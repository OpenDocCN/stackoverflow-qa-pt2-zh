# StackOverflow 问答 13667000-13667999

# c# - 使用 User32.dll SendMessage 发送带有 ALT 修饰符的键

> ID：13667001
> 
> 赞同：0
> 
> 时间：2012-12-02T06:32:35.643
> 
> 标签：c#, key, sendmessage, user32, alt

> **可能重复：**
> [C# 和 SendMessage（键）不起作用](https://stackoverflow.com/questions/3080466/c-sharp-and-sendmessage-keys-is-not-working)

我正在编写一个应用程序，它使用*user32.dll*中定义的 SendMessage 函数将击键发送到另一个应用程序。我已经想出了如何发送一次击键，但我很难将击键与 ALT 键一起发送。

就我的问题而言，我将重点关注发送 F1 和 ALT + F1。

如上所述，我可以发送 F1 键没有问题。这是我发送 F1 键的代码片段：

```
// DLL Imports

//Set the active window
[DllImport("user32.dll")]
public static extern IntPtr SetActiveWindow(IntPtr hWnd);

//sends a windows message to the specified window
[DllImport("user32.dll")]
public static extern int SendMessage(IntPtr hWnd, int Msg, uint wParam, uint lParam);

// ...

// Some constants
#define WM_SYSKEYDOWN 260
#define WM_SYSKEYUP 261
#define WM_CHAR 258
#define WM_KEYDOWN 256
#define WM_KEYUP 257

// ...

// activate the window and send F1
SetActiveWindow(hWnd);
ushort action = (ushort)WM_SYSKEYDOWN;
ushort key = (ushort)System.Windows.Forms.Keys.F1;
SendMessage(hWnd, action, key, 0); 
```

一个有趣的旁注是，即使上面的代码可以将 F1 键发送到目标应用程序，它与我使用 Spy++ 看到的不同。这是我在监视目标应用程序时按 F1 键时 Spy++ 日志的输出：

```
<00001> 00050412 P WM_KEYDOWN nVirtKey:VK_F1 cRepeat:1 ScanCode:3B fExtended:0 fAltDown:0 fRepeat:0 fUp:0
<00002> 00050412 P WM_KEYUP nVirtKey:VK_F1 cRepeat:1 ScanCode:3B fExtended:0 fAltDown:0 fRepeat:1 fUp:1 
```

请注意，发送了两条消息，WM_KEYDOWN 和 WM_KEYUP。

*我的第一个问题是，当 Spy++ 告诉我 WM_KEYDOWN + WM_KEYUP 是正确的消息序列时，为什么我使用 WM_SYSKEYDOWN 成功发送 F1？*

继续我尝试发送 ALT + F1 的下一个挑战。

我使用 Spy++ 来监视在键盘上按 ALT + F1 时传递的消息，这就是我所看到的：

```
<00001> 00050412 P WM_SYSKEYDOWN nVirtKey:VK_MENU cRepeat:1 ScanCode:38 fExtended:1 fAltDown:1 fRepeat:0 fUp:0
<00002> 00050412 P WM_SYSKEYDOWN nVirtKey:VK_F1 cRepeat:1 ScanCode:3B fExtended:0 fAltDown:1 fRepeat:0 fUp:0
<00003> 00050412 P WM_SYSKEYUP nVirtKey:VK_F1 cRepeat:1 ScanCode:3B fExtended:0 fAltDown:1 fRepeat:1 fUp:1
<00004> 00050412 P WM_KEYUP nVirtKey:VK_MENU cRepeat:1 ScanCode:38 fExtended:1 fAltDown:0 fRepeat:1 fUp:1 
```

鉴于上述 Spy++ 消息捕获，我尝试使用以下代码（简化）发送确切的消息序列：

```
SetActiveWindow(hWnd);    
SendMessage(hWnd, (ushort)WM_SYSKEYDOWN, (ushort)System.Windows.Forms.Keys.Menu, 0);
SendMessage(hWnd, (ushort)WM_SYSKEYDOWN, (ushort)System.Windows.Forms.Keys.F1, 0);
SendMessage(hWnd, (ushort)WM_SYSKEYUP, (ushort)System.Windows.Forms.Keys.F1, 0);
SendMessage(hWnd, (ushort)WM_KEYUP, (ushort)System.Windows.Forms.Keys.Menu, 0); 
```

这没有用。

所以这引出了我的下一个问题。*还有什么我可以尝试的，或者我在这里做错了什么？*

每当我使用 Spy++ 捕获程序的输出时，都会记录以下内容：

```
<00001> 00050412 S WM_SYSKEYDOWN nVirtKey:VK_MENU cRepeat:0 ScanCode:00 fExtended:0 fAltDown:0 fRepeat:0 fUp:0
<00002> 00050412 R WM_SYSKEYDOWN
<00003> 00050412 S WM_SYSKEYDOWN nVirtKey:VK_F1 cRepeat:0 ScanCode:00 fExtended:0 fAltDown:0 fRepeat:0 fUp:0
<00004> 00050412 R WM_SYSKEYDOWN
<00005> 00050412 S WM_SYSKEYUP nVirtKey:VK_F1 cRepeat:0 ScanCode:00 fExtended:0 fAltDown:0 fRepeat:0 fUp:0
<00006> 00050412 R WM_SYSKEYUP
<00007> 00050412 S WM_KEYUP nVirtKey:VK_MENU cRepeat:0 ScanCode:00 fExtended:0 fAltDown:0 fRepeat:0 fUp:0
<00008> 00050412 R WM_KEYUP 
```

请注意，在第 2、4、6 和 8 行发送了*额外的消息**。这可能是无法正常工作的原因吗？*

关于从实际键盘输入捕获的消息与使用我的应用程序捕获的消息之间的差异，我还有最后一个问题。注意*cRepeat*、*ScanCode*、*fExtended*等*参数*。它们在使用我的键盘作为输入捕获的消息中是非零的，并且在我的应用程序发送的消息中它们都是零。*这可能是我的代码不起作用的原因吗？* *如果是这样，我该如何修改这些值？*（我假设它们来自 SendMessage 函数的第四个参数，在所有情况下我都将其设置为零。）

谢谢，

简

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T06:50:15.097

另一种解决方案。您似乎没有为 WM_SYSKEYDOWN 的 lparam 传递任何内容。然而[，文档](http://msdn.microsoft.com/en-us/library/ms646286%28v=vs.85%29.aspx)清楚地表明需要设置 lparam 的第 29 位以指示按下了 ALT 键。

```
ushort action = (ushort)WM_SYSKEYDOWN;
ushort key = (ushort)System.Windows.Forms.Keys.F1;
uint lparam = (0x01 << 28);
SendMessage(hWnd, action, key, lparam); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T06:41:54.150

我不认为 SendMessage 和 WM_SYSKEYDOWN 是你想要使用的。而是使用[SendInput](http://msdn.microsoft.com/en-us/library/ms646310%28VS.85%29.aspx)函数。如果我记得，您可能会为要模拟的每个击键传递四个输入。一个用于 alt 键的“向下”事件。对应键的另一个向下事件。然后每个有两个向上事件。

自从我不得不编写这样的代码以来已经有一段时间了，但我相信文档建议 VK_MENU 是“alt”键的代码。

# php - 如何输出结果？

> ID：13667007
> 
> 赞同：-1
> 
> 时间：2012-12-02T06:33:03.843
> 
> 标签：php

```
Array
(
[9] => stdClass Object
    (
        [tid] => 9
        [vid] => 3
        [name] => Domestic 
        [description] => Domestic 
        [weight] => 0
    )

[12] => stdClass Object
    (
        [tid] => 12
        [vid] => 3
        [name] => Economic 
        [description] => Economic 
        [weight] => 1
    )

[11] => stdClass Object
    (
        [tid] => 11
        [vid] => 3
        [name] => International
        [description] => 
        [weight] => 2
    )

 ) 
```

假设 print_r($child) 结果如上，我想如何回显所有 tid 和名称，我该怎么办？

```
foreach($child as $arr){
 foreach($arr as $key=>$vaule)
{
... 
```

我不知道如何循环它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T06:39:16.830

这应该为您打印数据。

```
foreach($child as $arr)
{

   echo 'Tid: ' . $arr->tid . ' and Name: ' . $arr->name . "\n";
} 
```

您可能希望添加适当的 HTML 标记来格式化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T06:51:58.330

```
foreach($child as $arr)
{
   echo "output: ".$arr->tid." ".$arr->name;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T06:56:10.230

`php`您可以使用此函数将对象转换为数组

```
<?PHP

function object2array($data)
{
    if (is_array($data) || is_object($data))
    {
        $result = array();
        foreach ($data as $key => $value)
        {
            $result[$key] = object2array($value);
        }
        return $result;
    }
    return $data;
}

?> 
```

使用此功能后，您可以使用此代码。

```
foreach($child as $arr)
{
    foreach($arr as $key=>$val)
    {
        if($key == "tid" || $key == "name")
        {
            // Here some code
        }
    }
} 
```

# java - Primefaces 3.5 SNAPSHOT 数据表推送（websocket）更新

> ID：13667011
> 
> 赞同：0
> 
> 时间：2012-12-02T06:33:36.563
> 
> 标签：java, jsf, primefaces

我正在使用 Mojarra、PF 3.5 SNAPSHOT、Tomcat 7.0.32 并尝试在其他客户端完成更改时自行更新数据表。我还将 CDF bean 与 MyCODI、@ViewAccessScoped 一起使用。

当我使用 3.4 时，行内编辑（而不是单元格内编辑）和标准 @ConversationScoped 它正在工作。

这是xhtml：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:fn="http://java.sun.com/jsp/jstl/functions"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui"
  xmlns:pe="http://primefaces.org/ui/extensions"
  xmlns:c="http://java.sun.com/jsp/jstl/core"
  xmlns:t="http://myfaces.apache.org/tomahawk">  

<ui:composition template="commonLayout.xhtml">                    

    <ui:define name="content">

        <p:growl id="growlmessage" showDetail="false" autoUpdate="true"/> 

        <p:contextMenu for="staffTable">  
            <p:menuitem value="Open" update="staffTable" icon="ui-icon-close" actionListener="#{staffbean.onOpen}" />  
            <p:menuitem value="Delete" update="staffTable" icon="ui-icon-close" onclick="confirmation.show()" />
        </p:contextMenu>  

        <p:confirmDialog id="confirmDialog" message="#{text['viewedit.delete.confirm']}"  
                         header="#{text['viewedit.delete.header']}" severity="alert" widgetVar="confirmation" appendToBody="true" closable="false" visible="false" >  
            <p:commandButton action="#{staffbean.onDelete}" ajax="true" value="Yes"  oncomplete="confirmation.hide()" icon="ui-icon-check" /> 
            <p:commandButton value="No" onclick="confirmation.hide()" type="button" icon="ui-icon-closethick" />   
        </p:confirmDialog>              

            <p:dataTable id="staffTable" var="staff" widgetVar="staffList" value="#{staffbean.objectList}" paginator="true" rows="15" paginatorPosition="bottom" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" currentPageReportTemplate="#{text['table.staff.filter.count']}" rowsPerPageTemplate="15,25,50,100" emptyMessage="#{text['table.staff.filter.notfound']}" filteredValue="#{staffbean.filteredObject}" editable="true" editMode="cell" draggableColumns="true" rowKey="#{staff.id}" selection="#{staffbean.selectedObject}" selectionMode="single"> 

                <f:facet name="header">                    
                    <p:columnGroup type="header">
                        <p:row>
                            <p:column colspan="4">
                                <h:outputText value="#{text['table.staff.header']}" />    
                            </p:column>
                        </p:row>
                        <p:separator/>
                        <p:row>
                            <p:panelGrid columns="5" styleClass="headerGrid">
                                <p:column colspan="2">
                                    <h:outputText value="#{text['table.filter.global']}" />                                    
                                    <p:inputText id="globalFilter" onkeyup="staffList.filter()" style="width:150px" />                                                             
                                </p:column>
                                <p:column colspan="2">
                                    <p:selectOneMenu id="pageonly" value="#{staffbean.pageOnly}" >                                         
                                        <f:selectItem itemLabel="#{text['dataexporter.pageonly']}" itemValue="true" />  
                                        <f:selectItem itemLabel="#{text['dataexporter.entirepage']}" itemValue="false"  /> 
                                        <p:ajax event="change" listener="#{staffbean.exportXLS}" update="@form" immediate="true" />
                                    </p:selectOneMenu>                                                     
                                    <h:commandLink>  
                                        <p:graphicImage id="exportPage" value="/resources/img/excel.png" />  
                                        <p:dataExporter type="xls" target="staffTable" fileName="staff" pageOnly="#{staffbean.pageOnly}"/>  
                                        <p:tooltip for="exportPage" value="#{text['dataexporter.tooltip']}" showEffect="fade" hideEffect="fade" />  
                                    </h:commandLink>                              
                                </p:column>
                            </p:panelGrid>
                        </p:row>
                    </p:columnGroup>                  
                </f:facet>

                <p:column id="nameColumn" headerText="#{text['label.name']}" sortBy="#{staff.name}" filterBy="#{staff.name}" filterMatchMode="contains">
                    <p:cellEditor>  
                        <f:facet id="nameoutput" name="output">  
                            <h:outputText value="#{staff.name}" /> 
                        </f:facet> 
                        <f:facet name="input">  
                            <p:inputText value="#{staff.name}" style="width:100%" required="true" requiredMessage="#{text['validation.error.required.name']}"/>  
                        </f:facet> 
                    </p:cellEditor>
                </p:column>  

                <p:column id="staffnoColumn" headerText="#{text['label.staffno']}" sortBy="#{staff.staffno}" filterBy="#{staff.staffno}" filterMatchMode="contains">  
                    <p:cellEditor>  
                        <f:facet name="output">  
                            <h:outputText value="#{staff.staffno}" /> 
                        </f:facet> 
                        <f:facet id="staffliststaffno" name="input">  
                            <p:inputText value="#{staff.staffno}" style="width:100%" required="true" requiredMessage="#{text['validation.error.required.staffno']}">                              
                                <pe:keyFilter regEx="/^\d+$/" preventPaste="false"/>                            
                                <f:validator validatorId="staffnoValidator" />   
                                <f:validator validatorId="numericValidator" /> 
                            </p:inputText>
                        </f:facet> 
                    </p:cellEditor> 
                </p:column>          

                <f:facet name="footer" id="footer">  
                    There are #{fn:length(staffbean.objectList)} staff in total.  
                </f:facet>                      

                <p:ajax event="cellEdit" listener="#{staffbean.onEdit}" update="@form" />                

            </p:dataTable>  

    </ui:define>
    <ui:define name="socket">
        <p:socket channel="/ba" >
            <p:ajax event="message" update="ba_staffTable" />
        </p:socket>                          
    </ui:define>       
</ui:composition> 
```

豆：

```
 public void update(Object object) {
    if (!getEm().getTransaction().isActive()) {
        getEm().getTransaction().begin();
    }
    try {
        get().merge(object);
        get().getTransaction().commit();
    } catch (PersistenceException e) {
        if (ExceptionUtil.is(e, ConstraintViolationException.class) || ExceptionUtil.is(e, RollbackException.class)) {
            e.printStackTrace();
            FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, ResourceLoader.MESSAGES.getProperty("staff.error.dbconstraint"), null));
            if (getEm().getTransaction().isActive()) {
                getEm().getTransaction().rollback();
            }
        }
    }
    PushContextFactory.getDefault().getPushContext().push("/ba", "");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T02:16:02.537

您的表 id`staffTable`不是`ba_staffTable`

# python - 对 python django 中的虚拟环境感到困惑

> ID：13667014
> 
> 赞同：1
> 
> 时间：2012-12-02T06:33:55.790
> 
> 标签：python, django, centos

我有我的 Django 项目文件夹，里面有我的`virtualenv`文件夹

我有几个问题

1.  我已经在主安装和虚拟环境中安装了软件包。不要将这些软件包相互混合。我的意思是，如果我在主安装中有旧版本，而在虚拟环境中有新版本，系统如何知道选择哪一个

2.  假设我将我的项目文件夹移动到新计算机而不是使用相同的虚拟 env 文件夹，因为它位于同一个应用程序目录中，或者我必须重新开始

3.  我怎么知道 pip 安装包到虚拟环境或主安装

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T07:17:26.270

1.  除非您使用 --system-site-packages 创建了 virtualenv，否则包根本不会混合。如果他们这样做了，则 Virtualenv 具有优先权。

2.  如果路径没有改变，那么您就有机会重复使用它。如果路径发生变化，您可以[创建一个 virtualenv --relocatable 。](http://www.virtualenv.org/en/1.6.1/index.html#making-environments-relocatable)但是您应该制作一个需求文件并能够在一个`pip -r req.txt`命令中重新生成一个新的 virtualenv。

3.  如果激活了 virtualenv，pip 将安装在 virtualenv 中，它具有优先级。

# c# - SSLStream 相互认证

> ID：13667018
> 
> 赞同：1
> 
> 时间：2012-12-02T06:34:38.707
> 
> 标签：c#, security, authentication, ssl, certificate

我正在尝试编写一个客户端-服务器库，让我的 LAN 计算机相互通信。由于这主要是一种自我教育尝试，因此我试图通过 SSL 进行这些连接。我的计划是维护一台主机，并让每个客户端都为主机维护一个相互验证的 System.Net.SslStream 实例。主机代码看起来（粗略地说）是这样的（为简洁起见，省略了错误处理）：

```
SslStream newStream = null;
newStream = new SslStream(this.client.GetStream(), false);
newStream.AuthenticateAsServer(
    this.Certificate as X509Certificate,
    true,
    System.Security.Authentication.SslProtocols.Tls,
    false);

if (!(
    newStream.IsMutuallyAuthenticated &&
    newStream.IsEncrypted &&
    newStream.IsSigned))
{
    throw new AuthenticationException("Authentication results unsatisfactory.");
} 
```

其中，`this.Certificate`是一个 X509Certificate2。客户端代码如下所示：

```
SslStream connectionStream = new SslStream(this.client.GetStream(), false);

connectionStream.AuthenticateAsClient(
    this.ServerHostname,
    new X509CertificateCollection(new X509Certificate[] { (X509Certificate)this.Certificate }),
    SslProtocols.Tls,
    false);

if (!(
    connectionStream.IsEncrypted &&
    connectionStream.IsMutuallyAuthenticated &&
    connectionStream.IsSigned))
{
    throw new AuthenticationException("Authentication results unsatisfactory");
} 
```

我已经按照[这篇文章的说明](https://stackoverflow.com/a/496738/612541)生成了客户端和服务器证书，并将根权限安装到客户端和服务器上本地计算机的受信任的权限中。然后，我为客户端和服务器生成证书，将 .cer 文件的副本放在客户端/服务器可访问的位置（加载以获取 X509Certificate 对象），并在各自机器的个人存储中安装带有私钥的文件。现在，当客户端和服务器在同一台机器上时，一切正常。但是当我生成一个新证书并将其放在第二台机器上时，客户端和服务器现在无法相互验证。连接已建立、加密和签名，但 IsMutuallyAuthenticated 为假。我怎样才能解决这个问题？我究竟做错了什么？

编辑：LocalCertificateSelectionCallback 和另一个回调告诉我客户端找到一个本地证书，这是我的，没有远程证书，也没有可接受的颁发者。我的证书被选中并从本地证书选择中返回。客户端没有 SSL 策略错误，在主机端，我仍然得到 RemoteCertificateNotAvailable。用 Wireshark 嗅探这个事务，我看到一个标准的 TCP 握手，然后是几百字节的乱码，其中包括主机证书的名称，然后是 FIN、ACK 数据包，这些数据包标志着事务的结束。所以客户端证书确实没有被发送，即使它是由 LocalCertificateSelectionCallback 例程选择的。什么可能导致这种情况？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T09:49:18.160

SSLStream 的构造函数具有 RemoteCertificateVALidationCallback 参数。它应该有帮助。

# c# - 如何创建测试以查看我的 AI 是否完美？

> ID：13667025
> 
> 赞同：2
> 
> 时间：2012-12-02T06:35:49.167
> 
> 标签：c#, recursion, artificial-intelligence, greedy

我做了一个井字游戏 AI 给定每个棋盘状态，我的 AI 将返回 1 个确切的移动位置。我还制作了一个函数，可以循环使用 AI 制作的所有可能的游戏

所以它是一个递归函数，让 AI 为给定的棋盘移动，然后让其他游戏做出所有可能的移动，并为每个可能的移动调用它自己的递归函数，并使用一个新的棋盘。

我这样做是为了当人工智能先行时，当另一个人先行时……然后将它们加在一起。我最终得到 418 次可能的胜利和 115 次可能的平局，以及 0 次可能的失败。

但现在我的问题是，我如何最大化获胜的数量？我需要将此统计数据与某些东西进行比较，但我无法弄清楚将其与什么进行比较。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T06:44:20.720

我的感觉是，您引用的统计数据已经相当不错了。两位专业的井字游戏玩家总是以平局告终，如果你的对手知道如何玩游戏，就没有办法强行获胜。

**更新**

可能有一种更优雅的方法来证明你的 AI 的正确性，但最直接的方法是蛮力方法。只需将所有可能的棋盘位置枚举为游戏树，并修剪直接导致失败的分支。然后对于树中的每个分支，您可以计算出跟随该分支所产生的获胜概率。然后，您只需要在每个棋盘位置上测试您的 AI，并确保它选择获胜概率最高的分支。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T16:13:32.260

您应该首先观察第 9 步始终是强制的：棋盘上只有一个空方格。移动也可以被认为是 8 强制，因为在七步之后可能恰好有三种情况：

*   `O`可以在下一步获胜，在这种情况下，它需要获胜
*   在剩下的两个方格中的任何一个方格中放置一个`X`赢得比赛`X`，在这种情况下`O`无论下一步如何都输了
*   `X`有零或一条通往胜利的道路，在这种情况下`O`阻止以强制平局

这意味着**游戏最多在七步之后就结束了**。

还要注意**只有三个开场动作**：中心、角落或侧面。您选择四个角或边中的哪一个都没有关系，因为板可以旋转以匹配“规范”开口（左上角或顶边的中间）。

您现在可以构建您的状态分析代码。从三个可能的开局中的每一个开始，使用在您进行移动时打开的所有方格回溯多达六个额外的移动。每次走完后，分析位置看是否`X`或`O`已经赢了；mark`X`以 Wx 获胜，`O`以 Wo 获胜。其余职位未定。

Wx 或 Wo 之后不要探索位置：只需返回上一步，报告对应方的胜利。

当你到达第七步时，静态分析位置以确定它是否是上述三种情况之一，将位置标记为 Wx、Wo 或 Draw。

现在到最重要的一步：当你回溯到`N-1`玩家的移动时`p`，

*   如果您尝试的移动之一使得下一级的所有位置都变为 Wp，则也将当前位置声明为 Wp。
*   如果您尝试的所有动作都导致对手获胜，则宣布当前位置为对手获胜
*   否则，将当前位置声明为平局，并返回上一级。

如果您这样做正确，所有三个空缺职位都将被归类为平局。三步后你应该会看到一些强行获胜。

运行此过程将每个位置分类为 Wx、Wo 或 Draw。如果您的 AI 在分类为 Wp 的位置上为玩家赢得胜利`p`，或者在分类为平局的位置上让您平局，那么您的 AI 就是完美的。另一方面，如果存在静态分类为 Wp 且 AI`p`仅获得平局的位置，那么您的 AI 引擎需要改进。

* * *

附加阅读：您可以在本文中找到有关该游戏的更多见解，[该文章](http://www.mathrec.org/old/2002jan/solutions.html)描述了计算可能的井字游戏游戏的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T11:40:08.827

你所做的比人工智能更线性优化。我不会在这里描述井字游戏的所有线性代数，网上有很多例子。

所以使用线性代数，你不必证明你的结果（搜索神奇的统计数据等），因为你的结果可以通过原始方程中的简单解注入来验证。

总之，有两种情况：

*   您正在使用简单的“演绎”逻辑（实际上是非形式线性代数公式）：如果不查看您的代码，我们无法找到一种现成的方法来检查您的结果。**编辑**：正如 Andrew Cooper 所建议的，蛮力可以是一种随时可用的方法，而无需查看您的代码。

*   您正在使用正式的线性代数公式：您的结果可以通过原始方程中的简单解注入来验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T20:14:04.077

您唯一可以比较的是一个潜在的行动反对另一个。每当轮到计算机采取行动时，让它从那时起玩所有可能的游戏，然后选择可能导致最高获胜次数的行动。你不可能总是赢，但你可以给对手更多的机会做出一个坏的举动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T07:51:30.173

或者，您可以随时尝试以下链接中的井字游戏算法：

[井字完美AI算法：更深的“造叉”步骤](https://stackoverflow.com/questions/8287084/tic-tac-toe-perfect-ai-algorithm-deeper-in-create-fork-step)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T00:20:21.667

鉴于我们知道

*   不能强求胜利
*   最佳策略是不会输的

你的人工智能已经被证明是最优的，如果

*   你在对抗它时确实搜索了整棵树
*   并且您的 AI 是确定性的（如果它在某些阶段掷骰子，您将不得不对抗所有组合）

它没有输，你不能要求它赢。它没有计算的胜利，因为您的完整树搜索也包括错误的移动。就是这样，你完成了。

只是为了好玩：
如果您对赢得/平局/输掉比赛的机会没有先验知识，那么一个常见的策略就是不断地挽救失去的位置。在下一场比赛中，你会尽量避免他们。如果您无法避免移动到丢失的位置，那么您会找到另一个位置。通过这种方式，您可以学会不输给某个策略（如果可能）或避免策略错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-12T21:52:57.013

为了证明你的井字游戏 AI 是正确的，它需要满足两个条件：

1.  它绝不能输。
2.  当对手偏离最佳打法时，它必须获胜。

这两个条件都源于这样一个事实，即如果两个玩家都发挥最佳，井字游戏总是以平局告终。

确定程序是否满足这两个条件的一种自动方法是为每个可能的井字游戏构建所谓的“**极小极大树”。**极小极大树完全表征了每个玩家的最佳移动，因此您可以使用它来查看您的程序是否总是选择最佳移动。这意味着我的回答基本上可以归结为，“写一个完美的人工智能，然后看看它是否和你自己的人工智能一样发挥作用。” 但是，极小极大算法很有用，据我所知，这是测试您的 AI 是否真正发挥最佳效果的唯一方法。

**以下是 minimax 算法的工作原理**（有关 gif 说明，请参阅[Wikipedia](http://en.wikipedia.org/wiki/File%3aPlminmax.gif) [。Wikipedia article on minimax](http://en.wikipedia.org/wiki/Minimax#Combinatorial_game_theory)中也有一些伪代码。）：

1.  从正在考虑的井字游戏设置开始，构建所有可能后续动作的树。根节点处的初始位置。在树的最低级别，您拥有所有可能的最终位置。

2.  将 +1 值分配给第一个玩家获胜的所有最终位置，将值 -1 分配给第二个玩家获胜的所有移动，并将值 0 分配给所有平局。

3.  现在我们将这些值沿树传播到根节点。假设每个玩家都发挥最佳。在最后一步中，玩家一将选择任何具有+1 值的棋步，即赢得比赛的棋步。如果没有一个动作的值为+1，玩家一将选择一个值为0的动作，平局。因此，玩家玩家一号移动的节点被分配了其任何子节点的最大值。相反，当是玩家二的着法时，他们更喜欢选择值为 -1 的着法，从而赢得比赛。如果没有可用的获胜动作，他们更愿意平局。因此，轮到玩家二的节点被分配一个等于其子节点最小值的值。使用此规则，您可以将值从树中的最深层一直传播到根节点。

4.  如果根节点的值为 +1，则第一个玩家应该以最佳游戏获胜。如果它的值为-1，则第二个玩家应该获胜。如果它的值为 0，则最佳游戏会导致平局。

您现在可以在每种情况下确定您的算法是否选择了最佳移动。构建井字游戏中所有可能移动的树，并使用极小极大算法为每个移动分配 +1、0 或 -1。如果您的程序是玩家一号，则最好始终选择最大值的移动。如果它扮演玩家二，那么它总是选择具有最小值的移动是最佳的。

然后你可以循环遍历树中的每一个动作，并让你的 AI 选择一个动作。上面告诉你如何确定它选择的移动是否是最优的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-12T21:58:50.380

## 我会使用[决策树](http://en.wikipedia.org/wiki/Decision_tree)来解决这个问题。

简而言之，决策树是一种递归计算最终结果的期望（和机会）的方法。树中的每个“分支”都是一个决策，其期望值是根据`sum of (value * chance)`该决策的可能性计算得出的。

在**有限的选项场景**（如井字游戏）中，您可以预先计算整个树，因此在人类玩家的每一步（机会）之后，您可以做出选择（决定）下一个分支女巫的期望最高赢。

在**国际象棋**游戏中，解决方案类似，但树不是预先构建的：每次移动后，计算机都会计算棋盘上每个可能移动的值，以便`n`向前推进。根据玩家选择的游戏难度选择最佳、次佳或第 n 次最佳期望。

# python - 无法在 python 中使用 int(raw_input())

> ID：13667026
> 
> 赞同：0
> 
> 时间：2012-12-02T06:36:06.067
> 
> 标签：python

我正在编码比赛中尝试这个[问题](http://www.codechef.com/DEC12/problems/GRANAMA)。我相信我已经解决了这个问题，但是在接受输入时遇到了一些问题。帮帮我：

* * *

输入

输入的第一行包含一个整数 T，表示测试用例的数量。T 测试用例的描述如下。每个测试用例由一行组成，其中包含两个以空格分隔的字符串 R 和 S，表示两个配方。

* * *

现在，我已经对问题进行了编码，它似乎可以工作，但是每当我直接复制粘贴输入值时，它都会通过给出此错误消息而无法工作

* * *

```
T= int(raw_input())
ValueError: invalid literal for int() with base 10:
'3\nalex axle\nparadise diapers\nalice bob' 
```

* * *

每当我尝试提交问题时，都会收到一条错误消息。可能他们也在复制粘贴输入值并检查输出。我的代码骨架是这样的

* * *

```
def whetherGranama(str1,str2):
    return "NO"
    #can't give the implementation out yet

T= int(raw_input())
ans=[]
for x in range(0,T):
    s=raw_input()
    s1,s2=s.split()
    ans.append(whetherGranama(s1,s2))

for elem in ans:
    print elem 
```

* * *

如何修复`\n`错误？我认为整个输入被视为一个字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T06:49:10.533

拆分输入，使用拆分列表提取整数过程

```
s = raw_input()
s = s.split()
T = int(s[0])

ans=[]

for st in s[1:]:
//Do the rest 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T06:47:55.573

首先拆分您的输入，然后转换 int：

```
T, body = raw_input().split("\n", 1)
for x in xrange(int(T)):
   ... 
```

这将拆分一次并为您提供第一个数字项，然后是输入字符串的其余部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T06:48:42.263

如果将整个输入作为一个字符串读入，您可以尝试使用`stdin.readline()`而不是`raw_input`捕获输入流：

```
from sys import stdin
T = int(stdin.readline()) 
```

然而，由于这是一场编码比赛，我假设速度至关重要。由于 IO 操作的计算成本很高，因此您实际上应该欢迎有机会一次读取所有输入。换句话说，一次读取所有内容然后解析代码中的输入通常会更快。我想在你的情况下，它看起来像这样（假设它是按设计一次性出现的）：

```
data = raw_input().splitlines() 
#(or data = sys.stdin.read().splitlines() or data = list(sys.stdin.readlines()))

T = int(data[0])
S = (s.split() for s in data[1:]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T06:50:11.177

是的，整个字符串被视为一个输入。您可以简单地将输入存储为列表并使用列表而不是`raw_input`在循环中调用，这看起来像这样：

```
def whetherGranama(str1,str2):
    return "NO"
    #can't give the implementation out yet

input_lines = raw_input().split("\n")
T = int(input_lines[0])
ans=[]
for x in range(1,T):
    s = input_lines[x]
    s1,s2=s.split()
    ans.append(whetherGranama(s1,s2))

for elem in ans:
    print elem 
```

# android - Android - 不允许我实现接口

> ID：13667028
> 
> 赞同：1
> 
> 时间：2012-12-02T06:36:15.003
> 
> 标签：android, interface, implements

很奇怪的错误。我正在尝试在我的 android 应用程序中的非活动类中实现一个简单的接口。但是，我得到一个运行时错误。如果我删除实现，代码可以正常工作。我会让代码自己说话，随时插话。谢谢！

这在实例化 Globals 的实例时会引发 ClassNotFoundException

```
public class Globals implements IReceivable {

private volatile static Globals uniqueGlobal;
private static ClientSocket clientSocket;

private Globals()
{

}

public static Globals getInstance() {
    synchronized (Globals.class) {

        if (uniqueGlobal == null) {
            uniqueGlobal = new Globals();
            uniqueGlobal.InitializeClient();
        }
    }

    return uniqueGlobal;
}
@Override
public void MessageReceived(UUID clientId, String message) {
    // TODO Auto-generated method stub

} 
```

}

当我删除它时，一切正常

```
public class Globals  {

private volatile static Globals uniqueGlobal;
private static ClientSocket clientSocket;

private Globals()
{

}

public static Globals getInstance() {
    synchronized (Globals.class) {

        if (uniqueGlobal == null) {
            uniqueGlobal = new Globals();
            uniqueGlobal.InitializeClient();
        }
    }

    return uniqueGlobal;
} 
```

}

**编辑**

这是 IReceivable 接口

```
public interface IReceivable {

public void MessageReceived(UUID clientId, String message); 
```

}

以及确切的错误：

> 12-02 10:14:15.859: E/AndroidRuntime(546): java.lang.NoClassDefFoundError: com.example.utilities.Globals

引发错误的行如下所示：

```
 Globals global = Globals.getInstance(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:31:47.413

好的，解决了问题。我没有告诉你的是接口在我添加到我的项目中的一个 jar 文件中。

我将 jar 文件添加到我的项目中并将其正确包含到构建路径中，但是，我没有将 jar 文件添加到“libs”文件夹中。显然，运行时的 android 只会包含此文件夹中的 jar 文件。

对我来说很好的学习经历。谢谢！

# asp.net-mvc-3 - ASP.NET MVC 领域导航

> ID：13667030
> 
> 赞同：0
> 
> 时间：2012-12-02T06:36:33.900
> 
> 标签：asp.net-mvc-3, asp.net-mvc-3-areas

我有一个带有如下注销表单的 MVC Web 应用程序：

```
 @using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { area = "", id = "logoutForm" }))
    {
        @Html.AntiForgeryToken()
        <a href="javascript:document.getElementById('logoutForm').submit()" class="k-button" style="color: black;">Log off</a>
    } 
```

问题是，如果我导航到某个区域并单击 LogOut 按钮，则该操作不起作用。

有谁知道如何使上述代码与默认区域一起工作？

谢谢格里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:49:33.607

知道了：

@using (Html.BeginForm("LogOff", "Account", new { area = "" }, FormMethod.Post, new { id = "logoutForm" }))

这行得通！！！！

# workflow - wss 3.0 工作流审批关闭任务

> ID：13667031
> 
> 赞同：1
> 
> 时间：2012-12-02T06:36:54.357
> 
> 标签：workflow, task, wss

我们仅在 wss 3.0 sP2 中为一个阶段批准/拒绝定制了工作流程，它运行良好。唯一的问题是下面描述的问题：

当任务分配给他们时，批准会通过电子邮件收到通知。批准人可以使用电子邮件中的链接批准/拒绝任务。但是，如果批准者再次打开该链接，他仍然可以执行相同的操作。

有什么方法可以告诉审批者，当他再次打开链接时，您已经关闭了此任务？

# java - 闪烁图标，更改时

> ID：13667033
> 
> 赞同：0
> 
> 时间：2012-12-02T06:37:00.260
> 
> 标签：java, swing, jframe

> **可能重复：**
> [如何使用 Swing 刷新 Windows 任务栏？](https://stackoverflow.com/questions/489255/how-can-i-flash-the-windows-taskbar-using-swing)

在大多数程序中，如果对图标化框架进行了更改，则任务栏中显示的图标会闪烁。

像这样，在“Preubas Con F...”中：

![在此处输入图像描述](../Images/50d6da1fedeb051fcfaef15135f18e63.png)

在 Java 中如何做到这一点？

# richfaces - 如何在 ExtJS -4.1 中使用事件队列 requestDelay

> ID：13667034
> 
> 赞同：2
> 
> 时间：2012-12-02T06:37:18.383
> 
> 标签：richfaces, extjs4.1

我们正在开发结合 Grails 2.1.x + ExtJS-4.1.x 的 ERP。我们正在使用 ExtJS MVC + ExtJS 数据包。在这种情况下，我们需要使用事件队列来避免事件处理程序/侦听器的并发问题。我想使用事件队列请求延迟来忽略 RichFaces 4.x 之类的转储响应，如下所示：

```
<a4j:queue requestDelay="500" ignoreDupResponses="true"/> 
```

我如何使用 RichFaces 事件队列，例如 ExtJS-4.1.x 中的功能

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:28:59.090

这完全取决于您在 Ext 和后端之间选择的通信方式，如果您打算使用，您可以使用500`Ext.Direct`以几乎相同的方式批处理请求，您将获得“几乎”相同的结果`Ext.direct.RemotingProvider.enableBuffer`结果如下：`<a4j:queue requestDelay="500"/>`但是为了忽略重复请求，您必须实现自己的队列，或者更好的是，覆盖，`Ext.direct.RemotingProvider`或者，如果您真的想控制一切，您可以实现自己的提供程序，这样，您将拥有一个非常细粒度的请求和响应的控制，检查[RemotingProvider的文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.direct.RemotingProvider)

# javascript - 我想改进 Javascript/jQuery 中的搜索替换功能

> ID：13667035
> 
> 赞同：0
> 
> 时间：2012-12-02T06:37:41.340
> 
> 标签：javascript, search, replace

```
var target   = $(".target-text"),
    relation = ['spun gold', 'gold', 'apple'],
    len      = relation;

for (var i=0; i<len; i++) {

    var e = relation[i],
        re = new RegExp(e,"ig");

    if (e.length > 0) {
        target.html( target.html().replace(re, "<span class='hit'>$&</span>") );
    }

}; 
```

搜索到的字符被标签包围。

这时候，就有问题了。
问题是结果在轮到搜索时发生变化。

喜欢 a`['spun gold', 'gold', 'apple']`是可以的，
但喜欢 a`['gold', 'spun gold', 'apple']`是 ng。

如果`gold => <span class='hit'>gold</span>`先执行，
`spun gold => <span class='hit'>spun gold</span>`会出错。
（自从第一次`gold`更改为。）`<span class='hit'>gold</span>`

有没有更好的办法？

* * *

编辑：

作为条件，搜索不仅是英文。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T06:45:17.013

我想我看到了问题：一个替代品弄乱了前一个替代品，因为它们共享一个公共子字符串。

`relation`通过在正则表达式中将术语组合成一个大“或”来执行单个替换：

```
var target   = $('.target-text'),
    relation = ['spun gold', 'gold', 'apple'],
    re = new RegExp(relation.join('|'), 'ig');

target.html(function (_, oldHtml) {
    return oldHtml.replace(re, "<span class='hit'>$&</span>");
}); 
```

**注意**，您可能需要在`.join('|')`ing 之前引用数组元素，以防止特殊字符破坏正则表达式。（例如：）`relation = ['foo', 'bar?']`。方法如下：[转义字符串以在 Javascript 正则表达式中使用](https://stackoverflow.com/questions/3446170/escape-string-for-use-in-javascript-regex/6969486#6969486)

# pointers - x86 asm，取消引用的指针未更新

> ID：13667036
> 
> 赞同：5
> 
> 时间：2012-12-02T06:37:48.780
> 
> 标签：pointers, assembly, x86

这是我正在处理的程序的测试过程，我通过堆栈传递了一些参数，其中一个是指针。当我尝试更改取消引用指针的值时，变量不会更新。

```
_testProc proc
    push bp                             ;Save base pointer to stack
    mov bp, sp                          ;Set new base pointer
    sub sp, 4                           ;Allocate stack space for locals
    pusha                               ;Save registers to stack

    mov di, [bp + 08]                   ;Parm 3 - ptr to variable

    mov word ptr [di], 10   ; <---- Doesn't work. di contains an address, 
                            ;       but what it points at doesn't get updated

    popa                                ;Restore registers from stack
    mov sp, bp                          ;Remove local vars by restoring sp
    pop bp                              ;Restore base pointer from stack
    ret 6                               ;Return and also clean up parms on stack
_testProc endp 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T07:27:46.483

*8086通过段*寄存器和*索引*寄存器的内容组合产生和寻址；我将其显示为 [SR,IR]。

您通过寄存器 di 的更新正在更新 [DS,DI] 定义的位置；没有任何特殊前缀的 mov 指令默认使用 DS 寄存器。如果您将地址 DI 作为某个其他段（ES？SS？）的偏移量，那么您实际上是在组合错误的寄存器来访问您想要的地址。

您的错误在于不清楚将“指针”传递给您的例程的约定是什么。您所定义的假设与 DS 有相对偏移。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T11:29:25.610

您能做的最好的事情就是尽快放弃 16 位分段代码！:)

如果做不到这一点，就会有“远数据”和指向它的“远指针”。你的“proc”没有说它是近还是远 - 我假设近（或者 Parm3 可能不是你认为它在堆栈上的位置......因为远返回地址是 4 个字节）。如果您打算更改的变量在堆栈上，那么您会遇到一些更复杂的情况。`mov word ptr ss:[di], 10`至少。如果您需要处理局部变量或静态变量，我认为您将需要一个远指针（4 个字节、段和偏移量）来找到它。

我首先想到的是，您说您正在尝试更改取消引用指针的值，而不是“取消引用”它（据我所知）。`mov di, [di]`在您从堆栈中获取值后尝试。无论如何，很容易尝试。:)

如果一切都失败了，请向我们展示调用代码。（并尽快进入 32 位代码！）

# matlab - 了解 Matlab 中的直方图

> ID：13667040
> 
> 赞同：0
> 
> 时间：2012-12-02T06:39:20.513
> 
> 标签：matlab, histogram

应用后我得到了以下结果：`[h,bins]=hist(data)`，这样，`data`将包含这些`LBP (Local Binary Pattern)`值。

> h =
> 
> 221 20 6 4 1 1 2 0 0 1
> 
> 垃圾箱 =
> 
> 第 1 至 7 列
> 
> ```
> 8.2500   24.7500   41.2500   57.7500   74.2500   90.7500  107.2500 
> ```
> 
> 第 8 至 10 列
> 
> 123.7500 140.2500 156.7500

我想问以下问题：

*   第一个`bin`代表值`0-8.25`，第二个代表`bin`值`8.26-24.75`，等等？

*   对于`h`value `221`，这是否意味着我们计算`221`了一个`LBP`范围为 的值`0-8.25`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:25:11.387

1) 否。bin 位置在 bin 的中心值中，也就是说，对于第一个 bin，值是`0-16.5`，第二个 bin 是`16.5-33`，等等。[`histc`](http://www.mathworks.com/help/matlab/ref/histc.html)如果指定 bin 边缘而不是中心更自然，请使用。

2) `h(1)=221`表示从您的整个`data`集合中（根据您的问题有 256 个元素），221 个元素的值介于 `0-16.5`.

# java - 在 Java GUI 中读取 txt 文件

> ID：13667041
> 
> 赞同：0
> 
> 时间：2012-12-02T06:39:35.863
> 
> 标签：java, swing, user-interface, file-io, jtextcomponent

我想做的就是显示一个txt文件的全部内容。我该怎么做呢？我假设我会将 JLabel 的文本设置为包含整个文件的字符串，但是如何将整个文件变成一个字符串？另外，txt 文件是否在 Eclipse 的 src 文件夹中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T07:14:26.327

此代码用于在您的 Jtext 区域中显示选定的文件内容

```
 static void readin(String fn, JTextComponent pane) 
              {
             try 
              {
               FileReader fr = new FileReader(fn);
               pane.read(fr, null);
               fr.close();
              }
                 catch (IOException e) 
                 {
                  System.err.println(e);
                 }
              } 
```

选择文件

```
 String cwd = System.getProperty("user.dir");
         final JFileChooser jfc = new JFileChooser(cwd);

            JButton filebutton = new JButton("Choose");
            filebutton.addActionListener(new ActionListener() 
            {
            public void actionPerformed(ActionEvent e) 
            {
                if (jfc.showOpenDialog(frame) !=JFileChooser.APPROVE_OPTION)

                        return;
                  File f = jfc.getSelectedFile();

            readin(f.toString(), textpane);

                  SwingUtilities.invokeLater(new Runnable() {
                    public void run() {
                        frame.setCursor(Cursor.
                            getPredefinedCursor(
                            Cursor.DEFAULT_CURSOR));

                    }
                });
            }
        }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T06:49:25.813

> 我想做的就是显示一个txt文件的全部内容。我该怎么做呢？我假设我会将 JLabel 的文本设置为包含整个文件的字符串，但是如何将整个文件变成一个字符串？

您最好使用[JTextArea](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextArea.html)来执行此操作。您还可以查看[read()](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#read%28java.io.Reader,%20java.lang.Object%29)方法。

> txt 文件是否在 Eclipse 的 src 文件夹中？

没有。您可以从任何地方读取文件。[“读、写和创建文件”](http://docs.oracle.com/javase/tutorial/essential/io/file.html)教程是一个很好的起点

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T06:44:41.027

*   在项目的工作文件夹中创建文本文件
*   逐行读取您的文本文件
*   将行内容存储在`stringBuilder`变量中
*   然后将下一行内容附加到`stringBuilder`变量
*   然后将`StringBuilder`变量的内容分配给`JLabel`的 text 属性

但是将整个文件的数据存储到`JLabel`、使用`JTextArea`或任何其他文本容器中并不是一个好主意。

像这样阅读您的文件：

```
BufferedReader br = new BufferedReader(new FileReader("file.txt"));
try {
    StringBuilder sb = new StringBuilder();
    String line = br.readLine();

    while (line != null) {
        sb.append(line);
       line = br.readLine();
    }
    String everything = sb.toString();
} finally {
    br.close();
} 
```

现在将所有内容的值分配给`JLabel`或`JTextArea`

```
JLabel1.text=everything; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T06:50:38.943

1.  用于`java.io`打开文件流。
2.  按行或字节从文件中读取内容。
3.  将内容附加到`StringBuilder`或`StringBuffer`
4.  设置`StringBuilder`或`StringBuffer`为`JLable.text`。

但我建议使用`JTextArea`..

您不需要将此文件放在 src 文件夹中。

# ruby-on-rails - Rails 奇怪的堆栈级别太深和路由错误

> ID：13667042
> 
> 赞同：3
> 
> 时间：2012-12-02T06:39:42.497
> 
> 标签：ruby-on-rails, ruby

在编辑一些代码（任何代码）并按刷新查看更改后，我只会在**开发环境**中收到此错误。

每次发生这种情况时，它都会引发一个错误，显示“**堆栈级别太深**”，然后当我刷新页面时，它会再次引发“**路由错误**”。然后我无法浏览任何页面，直到我重新启动服务器。

我将不得不停止 Rails 服务器然后重新启动它，然后它才能工作，直到我再次更改代码。

我尝试了几种方法，包括增加 ulimit "ulimit -s" 命令，但都没有解决问题。我搜索这与无限循环有关，但在我的情况下，它与代码无关，因为在我重新启动服务器后错误消失了。

任何线索或解决方案将不胜感激。谢谢。

编辑：添加 routes.rb 和堆栈跟踪

路线： http: [//pastebin.com/YzXyUH35](http://pastebin.com/YzXyUH35)

堆栈跟踪：

```
SystemStackError (stack level too deep):
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:70

  Rendered /Users/duy/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/duy/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/duy/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (19.9ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:10:50.860

请将您的会话存储更改为活动记录存储或`config.cache_store = :dalli_store`( `dalli`gem)，而不是 cookie 存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:22:26.723

devise_inviable gem 中有一个错误导致了我遇到的问题。我在这里找到答案有助于解决我的问题[rails 3 routes stack level too deep design](https://stackoverflow.com/questions/13919070/rails-3-routes-stack-level-too-deep-devise)

# curl - curl在登录网站时如何工作

> ID：13667043
> 
> 赞同：2
> 
> 时间：2012-12-02T06:39:55.010
> 
> 标签：curl

以下代码没有登录到该站点任何积极的建议：我试图登录，但它没有让我登录。

```
$ch = curl_init();  
curl_setopt($ch, CURLOPT_URL,"http://www.mywholesaleroute.com/");  
curl_setopt($ch, CURLOPT_COOKIEFILE,1);  
curl_setopt($ch, CURLOPT_POST, 1);  
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");  
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);  
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);  
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);  
curl_setopt($ch, CURLOPT_HEADER, true);    
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 120);  
curl_setopt($ch, CURLOPT_TIMEOUT, 120);  

$post_array = array(  
'pre_url'=>'jewelry/',  
'login_email'=>'developer1950@gmail.com',
'login_pswd'=>'help99123',   
);

curl_setopt($ch, CURLOPT_POSTFIELDS, $post_array); 

$output = curl_exec($ch);

curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:02:37.190

当将数组传递给数据时`CURLOPT_POSTFIELDS`，数据被编码为`multipart/form-data`，网站根本没有准备好处理。传入一个 URL 编码的字符串：

```
$fields = array();
foreach ( $post_array as $key => $value )
    $fields []= urlencode( $key ) . '=' . urlencode( $value );
$fields = implode( '&', $fields );
curl_setopt( $ch, CURLOPT_POSTFIELDS, $fields ); 
```

这会将数据编码为`application/x-www-form-urlencoded`.

> 在 HTTP“POST”操作中发布的完整数据。要发布文件，请在文件名前加上 @ 并使用完整路径。文件类型可以通过使用格式为“;type=mimetype”的文件名来明确指定。此参数可以作为 urlencoded 字符串（如 'para1=val1¶2=val2&...'）或作为字段名称作为键和字段数据作为值的数组传递。如果 value 是一个数组，则 Content-Type 标头将设置为 multipart/form-data。从 PHP 5.2.0 开始，如果文件以 @ 前缀传递给此选项，则 value 必须是数组。

[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

# nsarray - 无法使用 ARC 将 NSArray 复制到 std::vector

> ID：13667045
> 
> 赞同：1
> 
> 时间：2012-12-02T06:40:13.050
> 
> 标签：nsarray, automatic-ref-counting, stdvector

我正在尝试使用 Objective-C++ 将 NSArray 的内容复制到使用自动引用计数的项目中的 std::vector 中。
当我写这个时：

```
NSArray* array;

...

std::vector<id> buffer;
buffer.reserve(array.count);

[array getObjects:&buffer[0] range:NSMakeRange(0, array.count)]; 
```

调用`getObjects:range:`导致此**错误**：
`Cannot initialize a parameter of type '__unsafe_unretained id *`'`rvalue`类型为`'__strong id *`'

网上的一些搜索表明可能需要`__bridge`演员表。使用此代码：
`[array getObjects:(__bridge id*)&buffer[0] range:NSMakeRange(0, array.count)];`

导致此**错误**：
`Incompatible types casting '__strong id *' to '__strong id *' with a __bridge cast`

需要什么才能将数组对象复制到向量中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T23:48:36.073

我通过这样做让我的代码工作；

```
std::vector<__unsafe_unretained id> buffer(array.count);
[array getObjects:&buffer[0] range:NSMakeRange(0, array.count)]; 
```

向量是方法内部堆栈上的本地对象，因此它超出范围并且不需要保留数组元素

# actionscript-3 - 要在调用时实例化的 100 个或更多类的列表

> ID：13667047
> 
> 赞同：-1
> 
> 时间：2012-12-02T06:40:43.557
> 
> 标签：actionscript-3

假设这是 100 个或更多类的列表：

```
var abc:Abc ;
var def:Def ; 
var ghi:Ghi ;
var jkl:Jkl ;
..
..
..
..
..
var xyz:Xyz ; 
```

现在我想实例化第一组 100 个类。如何在 for 循环中使用数组来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:58:20.550

像这样？

你可以像任何旧对象一样传递类名，所以我认为你可以做这样的事情 -

```
var classes:Array = new Array();
classes.push(Abc);
classes.push(Def);
classes.push(Ghi);
// etc

for ( var classIndex:int = 0; classIndex < classes.length; classIndex++ )
{
    var klass:Class = classes[classIndex];
    var obj:klass = new klass():
} 
```

# java - 我该如何使用 有一个远程文件？

> ID：13667052
> 
> 赞同：7
> 
> 时间：2012-12-02T06:42:26.757
> 
> 标签：java, jsp, jakarta-ee, jsf-2, richfaces

我有一个专门用于静态内容的服务器，所以我不想使用资源目录来存储 javascript 文件，但我不想停止使用`<h:outputScript />`标签。

如何使该标记生成指向文件所在的静态服务器的链接，而不是**RES_NOT_FOUND**。我什至不需要 JSF 来检查文件是否存在......

我试过：`<h:outputScript name="#{requestBean.staticURL}/javascript.js"/>`

生成：`<script type="text/javascript" src="http://static.server.com/javascript.js"></script>`

但它会产生：`<script type="text/javascript" src="RES_NOT_FOUND"></script>`

我能做些什么？

**解决方案：** 丹尼尔向我指出了一个很好的解决方案！

我已经下载了 Omnifaces 的源代码并将`org.omnifaces.resourcehandler.CDNResourceHandle.createResource(String resourceName, String libraryName)`方法修改为：

```
public Resource createResource(String resourceName, String libraryName) {
    final Resource resource = wrapped.createResource(resourceName, libraryName);

    if (cdnResources == null) {
        return resource;
    }

    String resourceId = ((libraryName != null) ? libraryName + ":" : "") + resourceName;

    String path = cdnResources.get(resourceId);

    if(path == null){
        if(libraryName != null){
            resourceId = libraryName + ":%";
            path = cdnResources.get(resourceId);
            if(path == null){
                return resource;
            }
            path += "/"+resourceName;
        }
        else return resource;
    }

    final String requestPath = path;

    return new ResourceWrapper() {

        @Override
        public String getRequestPath() {
            return requestPath;
        }

        @Override
        public Resource getWrapped() {
            return resource;
        }
    };
} 
```

通过此更改，我可以将其添加到我的**web.xml**文件中

```
<context-param>
    <param-name>org.omnifaces.CDN_RESOURCE_HANDLER_URLS</param-name>
    <param-value>
        somelib2:%=http://cdn.example.com/somelib2,
        js/script1.js=http://cdn.example.com/js/script1.js,
        somelib:js/script2.js=http://cdn.example.com/somelib/js/script2.js,
        otherlib:style.css=http://cdn.example.com/otherlib/style.css,
        images/logo.png=http://cdn.example.com/logo.png
   </param-value>
</context-param> 
```

请注意，这会将**somelib2**`somelib2:%=http://cdn.example.com/somelib2`库中的任何资源指向**http://cdn.example.com/somelib2**中的相对路径，例如：

 ****`<h:outputScript name="js/myjs.js" library="somelib2" />`

将输出：

`<script type="text/javascript" src="http://cdn.example.com/somelib2/js/myjs.js"></script>`

这适用于`<h:outputScript /><h:outputStylesheet /><h:graphicImage />`任何使用资源的东西；

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T06:55:35.923

你不能

仅仅因为**只能**`<h:outputScript />`读取您的网络应用程序内的本地资源文件夹

 ****你可以做的是使用** [Omnifaces CDNResourceHandler](http://showcase.omnifaces.org/resourcehandlers/CDNResourceHandler)，这里是[JavaDoc](http://omnifaces.org/docs/javadoc/current/org/omnifaces/resourcehandler/CDNResourceHandler.html)

它将允许您使用远程文件

*这是展示中的一些代码*

为了让它运行，这个处理程序需要在 faces-config.xml 中注册如下：

```
<application>
    <resource-handler>org.omnifaces.resourcehandler.CDNResourceHandler</resource-handler>
</application>

<context-param>
    <param-name>org.omnifaces.CDN_RESOURCE_HANDLER_URLS</param-name>
    <param-value>
        js/script1.js=http://cdn.example.com/js/script1.js,
        somelib:js/script2.js=http://cdn.example.com/somelib/js/script2.js,
        otherlib:style.css=http://cdn.example.com/otherlib/style.css,
        images/logo.png=http://cdn.example.com/logo.png
    </param-value>
</context-param> 
```

有了上面的配置，下面的资源：

```
<h:outputScript name="js/script1.js" />
<h:outputScript library="somelib" name="js/script2.js" />
<h:outputStylesheet library="otherlib" name="style.css" />
<h:graphicImage name="images/logo.png" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T06:48:47.900

我想你不需要那个。它用于显示从类路径中的档案中获取的脚本。对于常规脚本，您只需键入相应的`<script>`标记即可。******

# php - 如何保存网页状态（动态添加内容），以便下次重新加载

> ID：13667054
> 
> 赞同：1
> 
> 时间：2012-12-02T06:44:05.213
> 
> 标签：php, javascript, jquery

我有一个网页，其内容也是使用 ajax 动态添加的。例如，通过图像添加图像并使用 jquery 添加可拖动的图像，以便可以拖动它们。

现在，我想在添加图像并使其可拖动后保存网页的状态，因此如果用户离开页面并使用链接再次返回同一页面，他可以看到他添加的图像并且也可以拖动它.

如何使用 jquery 或任何东西来实现这一点。我不知道我们该如何做到这一点。对此的任何指示都会有很大帮助。

我正在使用 php 和 jquery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T07:10:56.007

您可以使用 html5 网络存储概念来保存页面的状态。`sessionStorage`将最容易实施。[您可以在此处](http://playground.html5rocks.com/#sessionStorage)找到代码示例`sessionStorage`和其他存储类型。

如果`html5`不是一个选项，那么您可以使用它`cookies`来存储页面的状态。您可以`cookies`通过`Javascript`. 您还可以使用`jquery`插件[jquery-cookie](https://github.com/carhartl/jquery-cookie)来轻松实现。

您还可以找到有关[如何使用 jQuery 设置/取消设置 cookie 的更多讨论？](https://stackoverflow.com/questions/1458724/how-to-set-unset-cookie-with-jquery)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T06:46:37.297

您可以使用 javascript 将状态保存在某个隐藏字段中，并通过 ajax 调用访问该隐藏字段或使用服务器端代码 (php) 回发。提取页面解释它的状态并保存在一些持久性介质中，如数据库。

# xcode - PhoneGap 2.1.0 iOS Mac Xcode CordovaLib

> ID：13667055
> 
> 赞同：0
> 
> 时间：2012-12-02T06:44:08.137
> 
> 标签：xcode, cordova

试图获得一些关于如何让 Xcode 中的 iPhone 模拟器与我的 PhoneGap 2.1.0 项目一起运行的可靠文档。我从最初在我的 Mac Pro 上构建的 git repo 中将它拉下来，现在想在我的 Mac Air 上运行它。PhoneGap 和 Cordova 之间的术语有很多混淆，这使得初学者几乎不可能弄清楚如何设置项目。

当我在 XCode 中打开 PhoneGap 项目时遇到的问题是这个错误：

```
Lexical or Preprocessor Issue 'Cordova/CDVViewController.h' file not found 
```

很明显，XCode 看不到 Cordova 类文件，尽管我在 Preferences -> Source Trees (~/Documents/CordovaLib/.

只想让这东西运转起来！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T00:09:57.180

不确定这是否会对您有所帮助，但我开始尝试掌握 PhoneGap/Cordova，并找到了这个很好的指南。

它使用 Cordova，我被引导相信它是 PhoneGap 的来源（仍然有点困惑 tbh），希望它会以一种或另一种方式帮助你，它肯定让我启动并运行 :)

[https://docs.google.com/viewer?a=v&pid=forums&srcid=MDUyNDQxMjA3MzY2NzYzNDU0MjgBMTAxMDE4ODcyODc5Njc4NDQwMzQBOWNxRFF3Z0UyX29KATQBAXYy](https://docs.google.com/viewer?a=v&pid=forums&srcid=MDUyNDQxMjA3MzY2NzYzNDU0MjgBMTAxMDE4ODcyODc5Njc4NDQwMzQBOWNxRFF3Z0UyX29KATQBAXYy)

# c++ - GCC 错误还是 UB？这段代码应该编译吗？

> ID：13667057
> 
> 赞同：16
> 
> 时间：2012-12-02T06:44:21.533
> 
> 标签：c++, gcc, gcc4.7

下面的代码可以用 clang 编译，但不能用[GCC](http://gcc.gnu.org/)编译（试过 4.1.2、4.5.4 和 4.7.2）：

```
template <typename T>
struct A
{
    struct B { };
};

template <typename T>
bool operator==(typename A<T>::B const& b, T const&  t);

enum { BAR };

template <typename T>
bool test()
{
    return 0 == BAR;
} 
```

来自 GCC 4.7.2 的错误消息是：

```
a.cpp: In instantiation of ‘struct A<<anonymous enum> >’:
a.cpp:12:6:   required by substitution of ‘template<class T> bool operator==(const typename A<T>::B&, const T&) [with T = <anonymous enum>]’
a.cpp:19:17:   required from here
a.cpp:6:12: error: ‘&lt;anonymous enum>’ is/uses anonymous type
a.cpp:6:12: error:   trying to instantiate ‘template<class T> struct A<T>::B’
a.cpp:6:12: error: ‘&lt;anonymous enum>’ is/uses anonymous type
a.cpp:6:12: error:   trying to instantiate ‘template<class T> struct A<T>::B’ 
```

[GCC](http://gcc.gnu.org/)拒绝代码是正确的，还是我遇到了它的错误？

PS 我在尝试构建一个开源项目时看到了这个错误。我试图制作尽可能小的例子来重现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:40:45.077

根据原始标准，它不是有效的 C++：

标准的 14.3.1 说：

> 2 本地类型、没有链接的类型、未命名类型或从这些类型中的任何一种复合的类型不应用作模板类型参数的模板参数。[例子： ...

但是我相信最新的 C++11 标准取消了这个限制。这可以解释为什么有些编译器接受它而其他编译器拒绝它。

# ios - 如何根据远程文件中的位置检查我的当前位置 - iOS 应用程序

> ID：13667062
> 
> 赞同：1
> 
> 时间：2012-12-02T06:46:01.103
> 
> 标签：ios, xcode, gps

我有一个简单的位置图，当用户接近远程文件中列出的位置时，我想让我的应用程序发出哔哔声

列出的位置在我的名为 locations.txt 的服务器上

我如何每 1 分钟检查一次 locations.txt 以查看用户是否在某个位置的 300m 范围内？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:55:02.857

这个问题的标准答案是*位置感知指南*中描述[的基于形状的区域。](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW13)通常，如果您的区域数量有限，则可以选择基于形状的区域。但是，鉴于您想要很多区域，您可能必须“自己动手”：

 **   打开定位服务并监控您的位置。请参阅[位置感知编程指南](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW1)。如果您使用标准位置服务，请确保将 a 设置`desiredAccuracy`为尽可能低以实现功能需求（例如`kCLLocationAccuracyHundredMeters`）。

*   一旦你成功收到第一个[`didUpdateLocations`](https://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/occ/intfm/CLLocationManagerDelegate/locationManager%3adidUpdateLocations%3a)，如果你真的想每分钟检查一次，你可以在那个时候创建​​一个计时器。如果该计时器的目的只是检查用户的位置，那么实际上不需要计时器，您只需等待`didUpdateLocations`.

*   您可以遍历要监视的位置数组（我会将它们转换为`CLLocation`对象）并简单地使用[`distanceFromLocation`](https://developer.apple.com/library/mac/documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html#//apple_ref/occ/instm/CLLocation/distanceFromLocation%3a).

不过，有几点观察：

*   您建议您`locations.txt`每分钟检查一次以查看用户是否在位置 300m 范围内。我可以想象您可能提出该解决方案的两个原因：

    *   *服务器`locations.txt`变了吗？*如果这是您要解决的问题，更好的解决方案是[推送通知](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/WhatAreRemoteNotif/WhatAreRemoteNotif.html#//apple_ref/doc/uid/TP40008194-CH102-SW7)（也称为“远程通知”），并且您希望确保客户端可以访问最新信息。不断重新检索文件的过程非常昂贵（在带宽、电池、计算方面）；或者

    *   *用户移动了吗？*如果您担心用户是否已移动，正确的解决方案不是每分钟检查一次，而是等待调用[ `CLLocationManagerDelegate`] 实例方法。[`didUpdateLocations`](https://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/occ/intfm/CLLocationManagerDelegate/locationManager%3adidUpdateLocations%3a)如果您想避免过多的冗余检查，您可以随时跟踪最后一个请求是否发生在不到一分钟之前，然后仅在超过一分钟之前再次检查。但这与每分钟检查你是否需要有很大不同。

*   您建议使用文本文件。您可能想要考虑使用 JSON 文件（或 XML 文件），这是从服务器检索数据的更好机制。

* * *

例如，如果您有一个 JSON 格式的文本文件，您可以在另一行代码 ( [`JSONObjectWithData`](http://developer.apple.com/library/ios/documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html#//apple_ref/occ/clm/NSJSONSerialization/JSONObjectWithData%3aoptions%3aerror%3a)) 中解析结果。为了说明，让我向您展示 JSON 文件的外观（其中方括号表示数组，大括号表示字典，因此这是一个字典数组）：

```
[
  {
    "name" : "Battery Park",
    "latitude" : 40.702,
    "longitude" : -74.015
  },
  {
    "name" : "Grand Central Station",
    "latitude" : 40.753,
    "longitude" : -73.977
  }
] 
```

然后，您的应用程序可以通过两行非常轻松地检索结果：

```
NSData *locationsData = [NSData dataWithContentsOfURL:url];
NSArray *locationsArray = [NSJSONSerialization JSONObjectWithData:locationsData options:0 error:&error]; 
```

因此，您需要启动位置服务：

```
if (nil == self.locationManager)
   self.locationManager = [[CLLocationManager alloc] init];

self.locationManager.delegate = self;
self.locationManager.desiredAccuracy = kCLLocationAccuracyKilometer;

// Set a movement threshold for new events.
self.locationManager.distanceFilter = 500;

[self.locationManager startUpdatingLocation]; 
```

然后，您将有一个检查当前位置的例程：

```
- (void)checkLocation
{
    NSURL *url = [NSURL URLWithString:kLocationsUrlString];
    NSData *locationsData = [NSData dataWithContentsOfURL:url];
    NSAssert(locationsData, @"failure to download data"); // replace this with graceful error handling

    NSError *error;
    NSArray *locationsArray = [NSJSONSerialization JSONObjectWithData:locationsData
                                                              options:0
                                                                error:&error];
    NSAssert(locationsArray, @"failure to parse JSON");   // replace with with graceful error handling

    for (NSDictionary *locationEntry in locationsArray)
    {
        NSNumber *longitude = locationEntry[@"longitude"];
        NSNumber *latitude = locationEntry[@"latitude"];
        NSString *locationName = locationEntry[@"name"];

        CLLocation *location = [[CLLocation alloc] initWithLatitude:[latitude doubleValue]
                                                          longitude:[longitude doubleValue]];
        NSAssert(location, @"failure to create location");

        CLLocationDistance distance = [location distanceFromLocation:self.locationManager.location];

        if (distance <= 300)
        {
            NSLog(@"You are within 300 meters (actually %.0f meters) of %@", distance, locationName);
        }
        else
        {
            NSLog(@"You are not within 300 meters (actually %.0f meters) of %@", distance, locationName);
        }
    }
} 
```

当用户的位置发生变化时，这将被调用：

```
// this is used in iOS 6 and later

- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
{
    [self checkLocation];
}

// this is used in iOS 5 and earlier

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    if ([[[UIDevice currentDevice] systemVersion] floatValue] < 6.0)
        [self checkLocation];
} 
```

实现可能看起来像[GitHub 上的这个测试项目](https://github.com/robertmryan/ios-location-test)。这是一个准系统实现，但它让您了解手头的工具，即检索`locations.json`文件并将其与设备检索的位置进行比较。*

# c# - 当我查看发送的内容时，我可以向提琴手中可见的 ajax 调用添加评论吗？

> ID：13667064
> 
> 赞同：1
> 
> 时间：2012-12-02T06:47:06.563
> 
> 标签：c#, javascript, jquery, asp.net, ajax

我有这样的代码：

```
 $.ajax({
            cache: false,
            url: "/xx"
        }).done(onAjaxDone).fail(function (jqXHR, textStatus, errorThrown) {
            Dialog.Alerts.ajaxOnFailure(jqXHR, textStatus, errorThrown);
        }); 
```

和

```
 $.ajax({
            cache: false,
            url: "/xxxxx"
        }).done(onAjaxDone).fail(function (jqXHR, textStatus, errorThrown) {
            Dialog.Alerts.ajaxOnFailure(jqXHR, textStatus, errorThrown);
        }); 
```

当我与提琴手核对时，我注意到不止一个 ajax 调用。有什么方法可以将一些元数据添加到不会使用的 ajax 调用中，但这可以让我在我的代码中查看调用的来源。类似于我可以在 ajax() 中放置的评论之类的东西，并且在整个网络中都可以看到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T04:49:20.497

`headers`您可以使用以下选项在非标准标头中发送一些元数据：

```
$.ajax({
    //...
    headers: { MyCustomHeader: "Location #1" }
}); 
```

然后在服务器端使用`Request.Headers["MyCustomHeader"]`.

您也可以在查询字符串中附加一个键，但我认为使用 HTTP 标头的侵入性较小。

# c# - WPF TextBlock 点击事件

> ID：13667066
> 
> 赞同：2
> 
> 时间：2012-12-02T06:47:29.560
> 
> 标签：c#, wpf, grid, visual-studio-2012, .net-4.5

我在我的 wpf 应用程序的网格中创建了文本块。我知道如何创建点击事件。但我不确定如何从该单元格获取属性。我想要 Grid.Row 和 Grid.Column 的属性。我怎样才能做到这一点？

```
<Window x:Class="TicTacToe.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Tic-Tac-Toe" Height="356" Width="475">
    <Grid VerticalAlignment="Top" ShowGridLines="True" Height="313" Margin="10,10,2,0">
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition />
            <RowDefinition />
        </Grid.RowDefinitions>
        <TextBlock Grid.Row="0" Grid.Column="0" Text="o" TextAlignment="Center" FontSize="72" FontFamily="Lucida Bright" FontWeight="Bold"></TextBlock>
        <TextBlock Grid.Row="0" Grid.Column="1" MouseLeftButtonDown="ChoosePosition" ></TextBlock>
        <TextBlock Grid.Row="0" Grid.Column="2" ></TextBlock>
        <TextBlock Grid.Row="1" Grid.Column="0" ></TextBlock>
        <TextBlock Grid.Row="1" Grid.Column="1" ></TextBlock>
        <TextBlock Grid.Row="1" Grid.Column="2" ></TextBlock>
        <TextBlock Grid.Row="2" Grid.Column="0" ></TextBlock>
        <TextBlock Grid.Row="2" Grid.Column="1" ></TextBlock>
        <TextBlock Grid.Row="2" Grid.Column="2" ></TextBlock>

    </Grid>

</Window>

 private void ChoosePosition(object sender, MouseButtonEventArgs e)
        {
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T07:03:12.713

由于 Grid.Row 和 Grid.Column 是 Grid 类的附加属性，您可以使用以下语法获取它们：

```
int row = Grid.GetRow(myTextBox);
int column = Grid.GetColumn(myTextBox); 
```

在您的情况下，您可以在 Click 处理程序中转换 sender 参数，因此它看起来像这样：

```
var myTextBox = sender as TextBox;
if(myTextBox != null) {
   int row = Grid.GetRow(myTextBox);
   int column = Grid.GetColumn(myTextBox);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T19:08:16.793

只需将 TextBox 更改为 TextBlock

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T07:00:26.883

你检查过`sender`参数吗？这将为您提供对文本框对象的引用，这可能是您所需要的，具体取决于您要执行的操作。

# moodle - 从moodle的多个课程中获取课程总数

> ID：13667069
> 
> 赞同：0
> 
> 时间：2012-12-02T06:48:21.583
> 
> 标签：moodle

我想为多个moodle课程获得一个通用证书。有没有办法让个别课程获得总数并以此为基础限制这个证书资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:07:54.553

您好，moodle 中没有默认功能可以执行此操作。但是您可以根据自己的要求创建自己的自定义证书活动模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T12:30:20.013

在 moodle 证书模块中开始您的探索。这是一个具有自定义选项的标准插件。 [moodle docs 证书模块](http://docs.moodle.org/22/en/Certificate_module)。

# magento - Magento 的前端控制器中触发了哪些事件？

> ID：13667071
> 
> 赞同：-1
> 
> 时间：2012-12-02T06:48:41.003
> 
> 标签：magento

Magento 的前端控制器中触发了哪些事件，这些事件的功能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T10:39:26.013

有4个：

*   `controller_front_init_before`- 触发的第一个事件，可用于任何排序或重定向、日志记录或基准测试
*   `controller_front_init_routers`- 这里可以添加自定义路由器
*   `controller_front_send_response_before`- 设置 cookie、修改输出或关闭基准的最后机会。注意：这就是为什么在动作控制器中回显任何内容不是一个好主意。
*   `controller_front_send_response_after`- 在这里您可以清理或写入缓存、记录某些内容、任何其他清理或操作用户无需等待。

# vb.net - 帽子中的名字 suffle vb.net

> ID：13667078
> 
> 赞同：3
> 
> 时间：2012-12-02T06:50:07.587
> 
> 标签：vb.net, visual-studio-2012

我是堆栈溢出的新手，我正在学习一种新语言，即 vb.net。我正在开发第一个需要使用数据库的应用程序，而我正在尝试做的是获取列中的每个条目，将它们放入一个数组中，对数组进行混洗，然后将新数组放回数据库的列。帽子应用程序中的名称排序..我现在没有任何代码，我先做我的课程，我搜索了很多论坛，我已经有很多难题，比如随机数组，数据库处理。 .我的问题是我没有找到任何代码来阻止数据在洗牌后获得相同的顺序，例如：

假设我的数据库中有 4 个条目：Sarah、james、alex、daniel。

在对数组进行排序时，我怎样才能防止 sarah 排在第一位，或者 james 排在第二位，等等。

如果你能给我一点开始.. 正如我告诉你的那样，我开始学习这门语言，我不希望你们为我编写应用程序，但只要有一点线索就会非常感激。我在网上查看课程，但我对初学者课程和“hello world”第一个应用程序演示有点厌倦了……我想我已经准备好进行下一步了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T07:02:57.850

首先，为什么初始订单是无效的洗牌？

撇开这一点不谈，最简单的方法是克隆您的原始列表和元素，将其与您的函数结果进行比较，并保持随机化，直到它不是。更好地检查 0 或 1 个元素列表，否则您将获得无限循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T12:52:31.773

在符合 SQL 的数据库中，表中行的物理顺序应该在很大程度上无关紧要，因为当您从中选择数据时，您可以对任何内容进行排序（SQL Server 中的物理顺序由聚集索引确定/设置） ）。因此，在您希望将排序顺序保存到数据库的情况下，我建议您添加一个额外的列来存储每行的排序索引。

因此，例如，当按字母顺序排序时，数据将如下所示：

```
Name     SortIndex
------   ---------
Sarah    3
James    2
Alex     0
Daniel   1 
```

当洗牌时，物理顺序不会改变，但排序索引会，例如：

```
Name     SortIndex
------   ---------
Sarah    2
James    0
Alex     1
Daniel   3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T15:08:15.960

@Steven 得到了一个有效的观点。但我认为您甚至可以不添加`SortIndex`，因为您可以直接在查询中随机播放结果，如下所示（假设您的后端是 MSSQL）：

```
SELECT * FROM table1 ORDER BY NEWID() 
```

如果仍然需要，可以通过以下方式以编程方式对数组进行混洗：

```
Dim a() As String = {"Sarah", "James", "Alex", "Daniel"}
Dim shuffledList As New List(Of String)
Randomize()
For i = 0 To UBound(a)
  Dim allowedValues() As String = a.Except(shuffledList).ToArray
  shuffledList.Add(allowedValues(Math.Floor(Rnd() * allowedValues.Count)))
Next 
```

如果要确保任何元素不重复原始顺序，请改用以下代码：

```
Dim a() As String = {"Sarah", "James", "Alex", "Daniel"}
Dim ub As Integer = UBound(a)
Dim shuffledList As New List(Of String)
Randomize()
For i = 0 To ub
  Dim allowedValues() As String = a.Except(shuffledList).Except({a(i)}).ToArray
  Dim randomValue As String
  If i = ub - 1 And allowedValues.Contains(a(ub)) Then
    randomValue = a(ub)
  Else
    randomValue = allowedValues(Math.Floor(Rnd() * allowedValues.Count))
  End If
  shuffledList.Add(randomValue)
Next 
```

这里最重要的部分是如果最后一个项目尚未被拾取，则最后一个项目之前的项目被强制成为最后一个项目。这是为了确保最后一个项目除了最后一个位置之外的某个地方，否则在最后一步中没有任何东西可以选择。总体而言，序列似乎是随机排序的，并且可以保证项目#1 不会是#1，#2 不会是#2 等等。算法总是以 N 步结束，其中 N 是项目数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T17:16:53.837

感谢您的回答。我已经用另一种语言编写了该脚本，实现它的方式非常简单：

取同一个数组：Sarah、James、Alex、Daniel；

我会复制数组；

然后第一个数组中的每个条目都会在第二个数组中选择一个随机条目；莎拉会先走——如果她选择了自己的名字，取消它然后再次选择，直到她选择另一个名字；

然后从第二个数组中退出选择的名称；

然后用第二个名字重复每一步，第三个......

当然，所有这些都是通过循环完成的。

也许这一切都可以在 vb.net 中非常简单地实现，但我很确定（不知道很多）在 vb.net 中没有“Ramdomize.PreventSameSortIndexOrder”类型的函数；）。我理解 Steven 演示的内容，但您能解释一下如何防止索引 ID 在混洗后回到同一个地方吗？我正在学习使用 VB 处理 MS Access 数据库，但如果 SQL 由于某种原因更好，那么切换不会有问题。@Neolisk 你能告诉我更多关于你写的这个命令的信息吗：

```
SELECT * FROM table1 ORDER BY NEWID() 
```

谢谢大家！

# javascript - 关闭 html5 应用程序

> ID：13667082
> 
> 赞同：3
> 
> 时间：2012-12-02T06:50:18.850
> 
> 标签：javascript, android, html, cordova

我有一个内置 html5 和 phonegap for android 的应用程序，通过按退出按钮调用以下函数（JavaScript）：

```
function close_window() {
    if (confirm("Exit?")) {
        window.close();
    }
} 
```

带有“退出？”消息的窗口 出现了，但是单击确定时应用程序没有关闭，我们如何关闭它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T07:08:58.270

请使用phonegap的

navigator.app.exitApp() 退出应用程序。

希望这可以帮助..

# .net - ServiceStack遇到异常：底层连接已关闭：超出消息长度限制

> ID：13667084
> 
> 赞同：7
> 
> 时间：2012-12-02T06:50:34.663
> 
> 标签：.net, web-services, http, c#-4.0, servicestack

我有一个客户端应用程序，从服务器使用 Web 服务。

在应用程序的一种形式中，它显示了一个表格列表，其状态来自服务器，表格每 1 秒刷新一次。所以它就像所有表格信息的实时页面。

但是，在将表单留在那里大约 20、30 分钟后，它开始抛出“底层连接已关闭：超出了消息长度限制”。

[我在http://code.logos.com/blog/2012/01/webexception-the-message-limit-length-was-exceeded.html](http://code.logos.com/blog/2012/01/webexception-the-message-limit-length-was-exceeded.html)中看到博客，关于设置 MaximumResponseHeadersLength，但我使用 ServiceStack，不知道在哪里设置它，或者如何解决这个问题。有人可以帮忙吗？

```
public IList<Table> GetAllTables()
{
   return ServiceClient.Get<EntitiesResponse<Table>>("/tables").Entities;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-11T19:05:50.893

在使用 Apache Benchmark 测试在 ServiceStack 上运行的一些 Web 服务时，我遇到了同样的问题。

通过禁用 MiniProfiler，我能够摆脱错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T06:23:04.203

[ServiceStack](http://www.servicestack.net)本身不添加任何请求限制，因此您遇到的请求限制来自 ASP.NET 主机。

请参阅此答案以向您展示如何[增加 ASP.NET 的请求限制](https://stackoverflow.com/a/3853785/85785)。

# android - 当 Listpreferences 更改时，不会调用 onPreferenceChange 方法

> ID：13667088
> 
> 赞同：10
> 
> 时间：2012-12-02T06:50:44.770
> 
> 标签：android, preferences, toast

我的代码中有一个首选项活动。当用户更改 ListPreferences 中的单选按钮时，我想显示一个祝酒词。我使用了这段代码，但它不起作用。:(

```
public class PrefsActivity extends PreferenceActivity implements OnSharedPreferenceChangeListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.prefs);   
    }

    public void onSharedPreferenceChanged(SharedPreferences arg0, String key) {

        ListPreference listPreference = (ListPreference) findPreference(key);
        listPreference.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {

            @Override
            public boolean onPreferenceChange(Preference preference, Object newValue) {
                // TODO Auto-generated method stub
                Toast.makeText(PrefsActivity.this, "second", Toast.LENGTH_LONG).show();
                return false;
            }
        });
    }
} 
```

我的问题是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-02T07:30:06.333

`onCreate`将您的代码更改为：

```
@Override
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   addPreferencesFromResource(R.xml.prefs);  

   SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
   prefs.registerOnSharedPreferenceChangeListener(this);
} 
```

您没有添加`registerOnSharedPreferenceChangeListener`到`PrefsActivity`活动中。

# c# - .NET 垃圾收集器可以收集作为类成员的对象吗？

> ID：13667090
> 
> 赞同：3
> 
> 时间：2012-12-02T06:50:51.897
> 
> 标签：c#, .net, garbage-collection

我有一个类，它包含一个指向继承 IDisposable 的对象的指针

```
class Foo 
{
    private Bar bar;

    private test() 
    {
        bar = CreateBarFactory();
    }

}; 
```

在 test() 中设置 bar 之后，它永远不会被使用；

我想知道即使 Foo 实例仍然存在，是否允许 GC 处理 bar ？

如果是这样，有什么办法可以防止这种情况发生吗？bar 是指向包含引用计数的对象的指针，如果它是 Disposed() 则释放引用导致某些功能被禁用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T06:54:35.530

如果 foo 的实例仍然存在（即有人持有对它的引用.. 使其保持活动状态），则不会收集 bar。GC 会将其视为“可访问”，即在使用中。

可达对象的成员也被认为是可达的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T07:34:04.663

请不要混淆术语。C#*确实*有指针，但这不是你所拥有的。你有一个*参考*。重要的是，引用*确实*会影响垃圾收集器，而指针本身则不会。(*)

只要实例`Foo`是可访问的，它的引用也`bar`将保持该对象可访问。如果`Foo`并且`Bar`有终结器，那么，在终结`Foo`器中，你不应该假设任何情况`bar`——它可能已经被终结了。

即使，正如您所指出的，不会调用其他方法来访问`bar`，GC 和 JIT 不会执行这种分析。对于对象引用，整个对象被认为是可达的，并且它包含的任何引用都被遵循，并且定位相似的对象被标记为可达。必须这样做，以便基于反射的对象访问永远不会获得无效的引用。这也是为什么，如果您的对象分配了一个您将不再使用的大型辅助对象，那么（在这种有限的情况下）将引用设置为`null`.

唯一考虑未来代码将运行的生命周期分析是单个*方法*体内的代码，相对于局部变量。如果不再引用该变量，则方法中的局部引用变量不足以使对象保持活动状态。这是在 JIT 和 GC 之间协作完成的。

* * *

(*) 人们有时认为指针使对象保持活力。严格来说，这不是真的。可以*产生指针的**pinning*行为将使对象保持活动状态，但没有什么能阻止您在对象被固定后保持指针。当然，在任何时候取消引用指针都是不安全的......

 ** * *

而且，另一个术语问题：

> 我想知道是否允许 GC 处理 bar

GC*不*处理任何东西。当对象实现 IDisposable 并且对象的用户调用`Dispose`它（直接或通过例如`using`块）时，就会发生处置。

GC 不调用`Dispose`. 如果在对象上定义了一个终结器（因此我上面的警告将适用），它*可能会调用终结器，然后它会收集该对象。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T08:36:04.027

要正确使用此类，您应该从`IDisposable`iterface 继承它并实现`Dispose()`将调用`bar.Dispose()`. 它将保证这个膨胀的资源将在可以释放的时候被释放，而不是在 GC 决定收集的时候。*

# symfony - Symfony2 - 只允许匿名用户访问登录和注册页面

> ID：13667091
> 
> 赞同：7
> 
> 时间：2012-12-02T06:51:15.237
> 
> 标签：symfony, acl

我有一个带有登录表单的网站，成功登录后，我被重定向到索引。但是当我单击后退按钮时，它仍然让我查看登录表单，这是不好的。我只希望匿名查看者可以访问登录表单，而不是已经登录的用户。在 symfony2 中是否有一种简单的方法可以做到这一点？谢谢

这是我的安全：

```
 jms_security_extra:
    secure_all_services: false
    expressions: true

security:
    encoders:
        Mata\UserBundle\Entity\User: 
            algorithm:        sha1
            encode_as_base64: false
            iterations:   1

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
        user_db:
            entity: { class: MataUserBundle:User,  property: username }

    firewalls:

        secured_area:
            pattern:    ^/
            anonymous: ~
            form_login:
                check_path: /login_check
                login_path: /login
            logout:
                path:   /logout
                target: /

    access_control:
    - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/, roles: ROLE_USER } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T12:58:12.207

这可能不是最好或正确的方法，但它是我能弄清楚的唯一方法。

在我的 loginAction 方法中，我执行此操作（请参阅 $secured 变量）。如果用户会话通过了身份验证，那么我将它们重定向到主页/索引页面。我不知道如何通过防火墙配置来做到这一点，因为我不相信登录页面会附加防火墙。

```
/**
 * @Route("/login", name="login")
 * @Template()
 */
public function loginAction()
{
    $request = $this->getRequest();
    $session = $request->getSession();

    // if the session is secured (user is logged in) 
    // then $secured will be an object with various user information.
    $secured = unserialize($session->get('_security_secured'));
    if ($secured) {
        return $this->redirect($this->generateUrl('home'));
    }

    // get the login error if there is one
    if ($request->attributes->has(SecurityContext::AUTHENTICATION_ERROR)) {
        $error = $request->attributes->get(SecurityContext::AUTHENTICATION_ERROR);
    } else {
        $error = $session->get(SecurityContext::AUTHENTICATION_ERROR);
    }

    return array(
        'last_username' => $session->get(SecurityContext::LAST_USERNAME),
        'error'         => $error,
        'embed'         => $request->isXmlHttpRequest()
    );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-15T17:59:03.623

使用 symfony 4，您可以使用 allow_if 解决它：

```
access_control:
- { path: /login, allow_if: "!is_authenticated()" } 
```

这是 allow_if 字符串中可用的表达式列表 [http://symfony.com/doc/current/security/expressions.html#security-expression-variables](http://symfony.com/doc/current/security/expressions.html#security-expression-variables)

# .net - .Net Visual Studio 2010 中内置程序集的运行时版本不正确

> ID：13667093
> 
> 赞同：0
> 
> 时间：2012-12-02T06:51:39.633
> 
> 标签：.net, visual-studio-2010

项目目标框架已设置为 .Net 2.0，但在构建项目后，生成的 dll 文件的运行时版本为 v4.0.30319。

因此，我无法将此程序集重新包含到 2.0 项目中。任何想法如何获得正确的运行时版本？

# c# - WCF 将 HttpPostedFileBase 发送到服务进行处理

> ID：13667096
> 
> 赞同：0
> 
> 时间：2012-12-02T06:52:22.777
> 
> 标签：c#, asp.net-mvc, wcf

我需要在用户单击“上传文件”按钮后从网页的前端将 HttpPostedFileBase 发送到 wcf 服务以进行处理，该服务在服务器上运行。我先在服务合同中使用了HttpPostedFileBase，但是没有用。然后我尝试将 HttpPostedFileBase 放入数据合约中，但它仍然不起作用。我挣扎了两天来解决这个问题。现在是方法：

在服务合同中：

```
[ServiceContract]
public interface IFileImportWcf
{
    [OperationContract]
    string FileImport(byte[] file);
} 
```

并找到这两种方法将 byte[] 转换为流，反之亦然。

```
 public byte[] StreamToBytes(Stream stream)
    {
        byte[] bytes = new byte[stream.Length];
        stream.Read(bytes, 0, bytes.Length);
        stream.Seek(0, SeekOrigin.Begin);
        return bytes;
    }
    public Stream BytesToStream(byte[] bytes)
    {
        Stream stream = new MemoryStream(bytes);
        return stream;
    } 
```

在控制器中：

```
[HttpPost]
public ActionResult Import(HttpPostedFileBase attachment)
{
    //convert HttpPostedFileBase to bytes[]
    var binReader = new BinaryReader(attachment.InputStream);
    var file = binReader.ReadBytes(attachment.ContentLength);
    //call wcf service
    var wcfClient = new ImportFileWcfClient();
    wcfClient.FileImport(file);
} 
```

我的问题是：将 HttpPostedFileBase 发送到 wcf 服务的更好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:30:24.407

您需要在此处使用[WCF 数据流](http://msdn.microsoft.com/en-us/library/ms733742.aspx)。

正如我从您的问题中了解到的那样，您可以控制您的 WCF 服务合同。

如果您将合同更改为以下内容：

```
[ServiceContract]
public interface IFileImportWcf
{
    [OperationContract]
    string FileImport(Stream file);
} 
```

然后您将能够在客户端使用它：

```
[HttpPost]
public ActionResult Import(HttpPostedFileBase attachment)
{
    var wcfClient = new ImportFileWcfClient();
    wcfClient.FileImport(attachment.InputStream);
} 
```

请注意，您需要在配置中启用流式传输

```
<binding name="ExampleBinding" transferMode="Streamed"/> 
```

（有关详细信息，请参阅上面的链接）

# functional-programming - 下棋

> ID：13667097
> 
> 赞同：3
> 
> 时间：2012-12-02T06:53:03.023
> 
> 标签：functional-programming, scheme, artificial-intelligence, mit-scheme

我有一个移动程序，通过传递一对将合法移动应用于棋盘上的棋子：（cons source dest）所以（cons 1 2）从棋盘的位置1取一个棋子并将其移动到位置2。

我正在尝试制定一个应用它之前所做的相同动作的程序。我试着做

(move (reverse move)) 将通过 (cons 2 1) 从而将棋子向后移动。

不幸的是，反向对成对不起作用。我无法将其转换为列表，因为这将不得不更改大量代码以适应最后的空值。

有人能想到什么吗？顺便说一句，我正在使用 MIT 计划。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:04:08.717

您需要为此实现自己的`reverse-pair`过程，它可以像这样简单：

```
(define (reverse-pair p)
  (cons (cdr p) (car p))) 
```

或者这个，有点花哨但可读性较差：

```
(define (reverse-pair p)
  `(,(cdr p) . ,(car p))) 
```

无论哪种方式，它都按预期工作：

```
(reverse-pair '(1 . 2))
=> '(2 . 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T14:00:33.863

如果您将自己限制在成对的 `(a . b) 上，那么翻转它们就很容易了。像这样简单的东西

```
(define reverse-pair
  (lambda (p)
    (cons (cdr p) (car p)))) 
```

会做的。从您的上下文来看，我认为您不会处于您拥有`'(1 2 3 4 . 5)`并且需要扭转这种情况的位置，因此您应该对上述情况没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T13:49:23.557

如果 reverse 函数对 pair 不起作用，那么编写你自己的 reverse-pair 函数。我不记得它的方案语法，但我认为你已经有了工具，因为你基本上需要知道如何从对中读取两个值（你已经在你的“移动”函数上做了一些事情）和那么如何基于该数据构建一个新的元组。

我不明白你为什么认为这会使事情复杂化太多。就新函数之外的代码而言，它看起来与您使用“反向”函数建议的原始版本相同。

# actionscript-3 - As3 文本区域限制

> ID：13667098
> 
> 赞同：2
> 
> 时间：2012-12-02T06:53:08.277
> 
> 标签：actionscript-3, flash, apache-flex

我做了一个简单的聊天应用程序，但我遇到了这个问题，文本区域会填满，然后用户必须清除它。我怎样才能做到，如果文本区域达到一定数量的字符，它将清除旧聊天文本 ？

```
public function receiveMsg(userName:String,type:String,msg:String,txtColor:String):void{
            if(type == "user"){
                ConsoleTxt.htmlText += "<b>"+userName+"</b>: <font color='"+txtColor+"'>"+msg+"</font> \n"

            }

            if(type == "server"){
                ConsoleTxt.htmlText += "<b><font color='#6ade57'>SERVER</font></b> "+userName+" "+msg+"\n"
            }

            if(type == "disconnect"){
                ConsoleTxt.htmlText += "<b><font color='#6ade57'>SERVER</font></b> "+userName+" <font color='#fc0000'>"+msg+"</font>\n"

            }

            ConsoleTxt.verticalScrollPosition = ConsoleTxt.maxVerticalScrollPosition
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T07:30:16.520

在我看来，你应该处理行数而不是文本区域中的字符。

就像是 ：

```
textarea.addEventListener(Event.CHANGE, changeHandler);

var maxLines = 5;

function changeHandler(event:Event):void {  

    if(textarea.numLines > maxLines)

      textarea.text = textarea.text.substring(textarea.getLineLength(0));
} 
```

应确保文本区域中始终最多有 5 行，否则最旧的行将被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:18:04.110

对于任何有相同问题的人，解决了将所有数据设置为数组集合的问题。

```
private var chatHolder:Array = new Array();

        public function receiveMsg(userName:String,type:String,msg:String,txtColor:String):void{
            for(var i:int = 0;i < chatHolder.length;i ++){

                if(i > 4){
                    chatHolder.shift();
                }
            }

            if(type == "user"){     
                chatHolder.push("<b><a href='event:"+userName+"'>"+userName+"</a></b>: <font color='"+txtColor+"'>"+msg+"</font> \n")
            }
} 
```

# python - web.py 和 gunicorn

> ID：13667103
> 
> 赞同：4
> 
> 时间：2012-12-02T06:54:20.163
> 
> 标签：python, heroku, web.py, gunicorn

我的问题基本上是标题中的内容：如何设置 gunicorn 来运行 web.py 应用程序？（另外，如果有任何差异，我将如何在 heroku 上做到这一点？）

我已经使用内置的cherrypy在heroku上运行了我的应用程序，但是我无法让gunicorn与web.py一起使用（我只是不知道从哪里开始-我找不到任何教程）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-03T23:40:24.730

恐怕我对 Heroku 不熟悉，但我可以回答您的基本问题。

gunicorn 是一个 HTTP 服务器，用于通过 WSGI 运行 Python Web 应用程序。web.py 是一个使用 WSGI 创建 Python Web 应用程序的框架。

所以你并不需要一个教程来一起使用它们，因为你需要做的就是弄清楚如何将你的 web.py 应用程序的 WSGI 入口点传递给 gunicorn。WSGI 应用程序只是一个具有正确接口的 Python 可调用程序，即它采用某些参数并返回某个响应。有关更多信息，请参阅[此 WSGI 教程](http://webpython.codepoint.net/wsgi_tutorial)。

web.py 教程中的“hello world”应用程序看起来像这个 test.py：

```
import web

urls = (
    '/', 'index'
)

class index:
    def GET(self):
        return "Hello, world!"

if __name__ == "__main__":
    app = web.application(urls, globals())
    app.run() 
```

但这并没有暴露 gunicorn 需要的 WSGI 应用程序。

web.py通过`wsgifunc`. [`web.application`](http://webpy.org/docs/0.3/api#web.application)我们可以通过在类之后添加以下内容将其添加到 test.py `index`：

```
# For serving using any wsgi server
wsgi_app = web.application(urls, globals()).wsgifunc() 
```

这基本上是 web.py 文档在部署部分告诉你在使用[Apache + mod_wsgi](http://webpy.org/cookbook/mod_wsgi-apache)时要做的事情——Python 代码对我们来说与 gunicorn 相同的事实并非巧合，因为这正是 WSGI 给你的——一种编写 Python 的标准方法，以便可以使用任何支持 WSGI 的服务器进行部署。

正如[gunicorn 文档](http://docs.gunicorn.org/en/latest/run.html#gunicorn)中所解释的那样，我们可以将 gunicorn 指向模块的`wsgi_app`成员，`test`如下所示：

```
(tmp)day@office:~/tmp$ gunicorn test:wsgi_app
2012-12-03 23:31:11 [19265] [INFO] Starting gunicorn 0.16.1
2012-12-03 23:31:11 [19265] [INFO] Listening at: http://127.0.0.1:8000 (19265)
2012-12-03 23:31:11 [19265] [INFO] Using worker: sync
2012-12-03 23:31:11 [19268] [INFO] Booting worker with pid: 19268 
```

# python - 用于解析 Yahoo Finance 的 Python/lxml/xpath

> ID：13667104
> 
> 赞同：0
> 
> 时间：2012-12-02T06:54:25.853
> 
> 标签：python, xpath, lxml, yahoo-finance

编辑：我提供了我用来试图找出这个问题的确切源代码。

我正在尝试使用 Python 2.7 和 lxml 从 Yahoo Finance 中提取有关“总资产”的数据。我试图从中提取此信息的页面示例是**http://finance.yahoo.com/q/bs?s=FAST+Balance+Sheet&annual**。

我已经成功地从 Smartmoney 中提取了“总资产”的数据。我能够解析的 Smartmoney 页面的一个示例是**http://www.smartmoney.com/quote/FAST/?story=financials&timewindow=1&opt=YB&isFinprint=1&framework.view=smi_emptyView**。

这是我为解决此问题而设置的特殊测试脚本：

```
 import urllib
    import lxml
    import lxml.html 

    url_local1 = "http://www.smartmoney.com/quote/FAST/?story=financials&timewindow=1&opt=YB&isFinprint=1&framework.view=smi_emptyView" 
    result1 = urllib.urlopen(url_local1)
    element_html1 = result1.read()
    doc1 = lxml.html.document_fromstring (element_html1)
    list_row1 = doc1.xpath(u'.//th[div[text()="Total Assets"]]/following-sibling::td/text()')
    print list_row1

    url_local2 = "http://finance.yahoo.com/q/bs?s=FAST" 
    result2 = urllib.urlopen(url_local2)
    element_html2 = result2.read()
    doc2 = lxml.html.document_fromstring (element_html2)
    list_row2 = doc2.xpath(u'.//td[strong[text()="Total Assets"]]/following-sibling::td/strong/text()')
    print list_row2 
```

我可以从 Smartmoney 页面获取有关总资产的数据行，但是当我尝试解析 Yahoo Finance 页面时，我得到的只是一个空列表。

Smartmoney页面表格行源代码为：

```
 <tr class="odd bold">
<th><div style='font-weight:bold'>Total Assets</div></th>
<td>  1,684,948</td>
<td>  1,468,283</td>                                
<td>  1,327,358</td>                                
<td>  1,304,149</td>                                    
<td>  1,163,061</td>
    </tr> 
```

雅虎页面表格行源代码为：

```
 <tr>
<td colspan="2"><strong>Total Assets</strong></td>
<td align="right"><strong>1,684,948&nbsp;&nbsp;</strong></td>
<td align="right"><strong>1,468,283&nbsp;&nbsp;</strong></td>
<td align="right"><strong>1,327,358&nbsp;&nbsp;</strong></td>
    </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T07:21:53.207

包含语法错误，应该`td/strong/text()`在最后，加上你有一个尾随`]`. 我会说正确的查询是：

```
xpath('//td[strong[text()="Total Assets"]]/following-sibling::td/strong/text()') 
```

结果：

```
>>> tree.xpath('//td[strong[text()="Total Assets"]]/following-sibling::td/strong/text()')
[u'1,684,948\xa0\xa0', u'1,468,283\xa0\xa0', u'1,327,358\xa0\xa0'] 
```

在原始页面中，“总资产”`<strong>`容器具有空格和换行符。对结果使用附加`normalize-space`函数，`text()`如下所示：

```
xpath('//td[strong[normalize-space(text())="Total Assets"]]/following-sibling::td/strong/text()') 
```

# maven - 第谷：如何将 p2 更新站点复制到 Tomcat 服务器

> ID：13667109
> 
> 赞同：0
> 
> 时间：2012-12-02T06:55:23.693
> 
> 标签：maven, tycho

目前，我正在使用 Tycho 构建在本地生成我的产品安装/zip 和 p2 更新站点存储库。我只想将 p2 更新站点复制到 tomcat 服务器。知道如何使用最新的第谷版本来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:35:16.703

使用 Maven Antrun 插件并嵌入上传脚本。maven 环境变量允许您生成相对路径，因此这将与位置无关。

# python - 检查两个字符串是否包含相同的字符，而不考虑它们的频率

> ID：13667113
> 
> 赞同：2
> 
> 时间：2012-12-02T06:56:13.347
> 
> 标签：python

我有两个字典对应于两个不同字符串的字符数。我想检查它们是否由相同的字符组成，**无论字符的频率如何。**

* * *

说，我有两个字符串`caars`，`racs` 它们由相同的字符组成`a,c,r,s`

* * *

我知道`cmp`比较两个字典的方法，它也比较两个键值对。但我不想比较它们的值或计数。

* * *

以防万一，你可能会问，为什么我对两个字符串都有 dict 。好吧，我在问题的其他部分确实需要它们。那么，为什么不使用它们。

* * *

我怎样才能在python中快速做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T07:00:15.067

你想使用一个[`set`](http://docs.python.org/2/tutorial/datastructures.html#sets).

```
In [32]: str1 = 'caars'

In [33]: str2 = 'rats'

In [34]: set(str1) == set(str2)
Out[34]: False

In [35]: str3 = 'racs'

In [36]: set(str1) == set(str3)
Out[36]: True 
```

# c# - 从 c# 的 html 页面中提取多个值

> ID：13667115
> 
> 赞同：-1
> 
> 时间：2012-12-02T06:56:47.693
> 
> 标签：c#, html, html-parsing

我有这个来自 html 页面源

```
<h5 class="icn-venue"><a href="/venues/mmxchi-tavernita-venue" class="pin-red place" data-lat="41.8938" data-lon="-87.633" rel="map">Tavernita</a></h5> 
```

页面源上的这些标签之间有 10 个这样的值。我想在“h5”标签之间提取值。Class="icn-venue" 对于所有值都保持不变。我尝试拆分标签然后存储，但代码似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T07:06:24.050

你可以这样做`htmlAgilityPack`：

```
HtmlDocument doc = new HtmlDocument();
doc.Load(yourStream);

List<string> lst=doc.DocumentNode.SelectNodes("//h5[class='icn-venue']")
                    .Select(x=>x.InnerHtml)
                    .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T07:05:07.803

HTML Agility Pack 是处理 HTML 的绝佳工具：http: [//htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)

它至少可以使获取您需要的值并进行替换更容易一些。

包含使用 HTML 敏捷包的链接：如何使用[HTML 敏捷包](https://stackoverflow.com/questions/846994/how-to-use-html-agility-pack)

# hibernate - EclipseLink JAXB 和 JPA 内存开销

> ID：13667117
> 
> 赞同：1
> 
> 时间：2012-12-02T06:57:27.287
> 
> 标签：hibernate, jpa, jaxb, eclipselink, moxy

我有一个包含许多实体（3000）的应用程序，这些实体需要由 Web 服务返回并存储在数据库中。我从 Hibernate 和 CXF / Sun JAXB 实现开始。经过一些测量，我注意到内存消耗非常高（另一个要求是在低内存设备上运行）。
我已经从 Hibernate 切换到 EclipseLink（这将内存减少到原来的第四个）。
我的问题是从 Sun JAXB 实现切换到 Moxy 是否会进一步减少内存。
EclipseLink JAXB (Moxy) 实现是否重用了 JPA 检测类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:07:21.080

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

> EclipseLink JAXB (MOXy) 实现是否重用 JPA 检测类？

您绝对可以映射与 JPA 和 JAXB 一起使用的相同域模型类。EclipseLink JAXB (MOXy) 有一些扩展，可以更轻松地将 JPA 实体映射到 XML（支持双向关系、复合键等）。

将大量对象写入 XML 时，您可能需要考虑编组到 StAX `XMLStreamWriter`，以便在从数据库中提取对象时对其进行处理。

# mysql - 使用 perl 使用标志 --local-infile 启动 mysql

> ID：13667124
> 
> 赞同：0
> 
> 时间：2012-12-02T06:58:31.803
> 
> 标签：mysql, perl, upload

我正在编写一个简单的脚本来使用 perl 程序将文件列表上传到 mysql 中的表。每当我需要上传文件时，我通常可以使用“--local-infile”标志手动启动 mysql。我也使用 perl 来使用 DBI 获取 mysql 数据库中的表信息：

```
$dbh = DBI->connect("DBI:mysql:$db:$host", $user, $pass); 
```

但我不知道如何使用 perl 和上传文件所需的标志来启动 mysql。有没有办法通过本地启用在 perl 中启动与 mysql 的连接？或者，有没有可以在 mysql 中运行的命令来启用上传文件？我应该补充一点，我在远程主机上运行，​​所以我没有对 my.cnf 文件的编辑访问权限或 mysql 中的 root 访问权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:41:00.973

就在这里：

```
$dbh = DBI->connect("DBI:mysql:$db:$host;mysql_local_infile=1", $user, $pass); 
```

您也可以通过这种方式传递其他（局部）变量。请参阅[DBD::mysql 的文档](http://search.cpan.org/~capttofu/DBD-mysql-4.022/lib/DBD/mysql.pm#Class_Methods)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T09:02:57.297

首先，在 my.cnf的*客户端*下添加以下代码

**[客户]**

松散本地文件 = 1

然后添加参数；

```
mysql_local_infile=>1 
```

以下，

```
$dbh = DBI->connect("DBI:mysql:$db:$host", $user, $pass, {mysql_local_infile=>1, RaiseError => 0, PrintError => 0, mysql_enable_utf8 => 1}); 
```

其他参数属于我的代码，但我将它们用于**DBI->connect**的使用示例。

# java - 在struts中从数据库中检索数据

> ID：13667125
> 
> 赞同：0
> 
> 时间：2012-12-02T06:58:46.570
> 
> 标签：java, struts

我正在使用 struts 框架检索所有数据库数据，代码运行良好。

我只是将数据列表（数组列表）放入 JSP 请求中（如上代码）。我知道我们可以使用逻辑标记库获取数据，但我对此不太了解。可以将数据放入请求中吗？以及我们如何使用逻辑库检索数据？或任何其他方式？

```
 HashMap hm =null;
        List list = new ArrayList();
        String uname="";
        int no=0;
        while(rs.next())
        {
            uname=rs.getString(1);
            no = Integer.parseInt(rs.getString(2));
            hm=new HashMap();
            hm.put("name", uname);
            hm.put("number", no);

            list.add(hm);

        }

        request.setAttribute("myList",list); 
```

jsp页面。

```
 <%
                        try
                        {
                            DataForm d= new DataForm();
                            HashMap hm;
                            List list = new ArrayList();
                            if(request.getAttribute("myList")!=null)
                                list=(List)request.getAttribute("myList");
                            else
                                out.print("No Data Found..");

                             for(int i=1;i<list.size();i++)
                             {
                                hm=(HashMap)list.get(i);

                                %><tr> <td><%out.println(hm.get("name"));%></td>
                                 <td><%out.println(hm.get("number"));%></td></tr><%
                            }
                        }
                        catch(Exception e){e.printStackTrace();}
                    %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T08:06:43.253

如果我正确理解您要做什么，我必须说您没有有效地使用 HashMap。

Hashmap 用于存储对，以便您能够使用键快速检索值 ~ O(1)。键在哈希图中是唯一的。如果您尝试使用相同的密钥一个接一个地存储多对，则数据将被覆盖，最后您将只能看到最后一对。

在此示例中，您将 HashMap 用作保存“名称”和“数字”的容器，因此我认为根本不需要 hashMap。

这是你可以做的：

定义一个包含名称和编号的类：

```
class Data
{
    private String name;
    public int uNo;
    public Data(String name, int uNo)
    {
        this.name = name;
        this.uNo = uNo;
    }
    public getName()
    {
        return this.name;
    }
    public getUNo()
    {
        return this.uNo;
    }
} 
```

您的 Java 代码：

```
List<Data> list = new ArrayList<Data>();
while(rs.next())
{
    String uname=rs.getString(1);
    int no = Integer.parseInt(rs.getString(2));
    list.add(new Data(uname, no));
}
request.setAttribute("myList",list); 
```

你的 Jsp 代码：

```
<%
    try
    {
        DataForm d= new DataForm();
        List<Data> list = new ArrayList<Data>();
        if(request.getAttribute("myList")!=null)
        {
           list = (List<Data>)request.getAttribute("myList");
           for(Data data in list)
           {
               %><tr><td><%out.println(data.getName());%></td>
                     <td><%out.println(data.getUNo());%></td></tr><%
           }
        }
        else
        {
           out.print("No Data Found..");
        }
     }
     catch(Exception e){e.printStackTrace();}
%> 
```

现在，来到**逻辑标签库**。

这是您需要进行以下修改的内容：

i) 在您的 jsp 中，您可以这样做： 在 jsp 的开头添加这些行：

```
<%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %>
<%@ taglib uri="http://struts.apache.org/tags-logic" prefix="logic"%> 
```

使用这些来写入您的数据：

```
<logic:present name="myList">
  <logic:iterate name="myList" id="myListId">
     <tr>
          <td><bean:write name="myListId" property="name"/></td>
          <td><bean:write name="myListId" property="uNo"/></td>
     <tr>
  </logic:iterate>
</logic:present>
<logic:notPresent name="myList">
    No Data found.
</logic:notPresent> 
```

理想情况下，我会使用 JSTL 来显示用户/编号列表。

我没有测试过这段代码。但它提供了我的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T08:01:19.540

逻辑标签不用于检索数据：它们用于在 JSP 中实现一些逻辑而不使用 scriptlet，这被认为是不好的做法。

这确实是控制器（Struts 操作）的工作，不是从数据库中检索数据，而是调用将要执行的对象，并将对象列表放入请求中以便视图显示它们。

然而，struts 逻辑标签几乎都被弃用，取而代之的是 JSP EL 和 JSTL。您的 scriptlet 代码可以替换为以下几行：

```
<c:choose>
    <c:when test="${myList == null}">
        No Data Found.
    </c:when>
    <c:otherwise>
        <c:forEach var="element" items="${myList}">
            <tr>
                <td><c:out value="${element.name}"/></td>
                <td><c:out value="${element.number}"/></td>
            </tr>
        </c:forEach>
    </c:otherwise>
</c:choose> 
```

哪个更具可读性并正确转义数据。

我也会使用对象而不是 HashMaps 来保存您的数据。Java 是一种面向对象的语言。使用对象和封装。

# c# - 使用 Ninject 初始化具有初始值的字段

> ID：13667126
> 
> 赞同：2
> 
> 时间：2012-12-02T06:59:18.413
> 
> 标签：c#, ninject

我目前正在尝试研究如何使用 Ninject 为某些字段设置初始值。

我有这样的事情：

```
public class SomeClass
{
    private ISomething _something;

    public SomeClass(string someParam)
    {

    }

    public void DoAThing()
    {
        _something.DoSomething();
    }
} 
```

我的困境来自于`_something`初始值的设置，因为我不希望类知道`ISomething`要使用哪个默认实现，有没有办法在 Ninject 中实现这一点？

我应该补充一点，通过构造函数传递初始值不是一种选择。

我还应该补充一点，这是在一个类库中，所以任何关于如何以及何时设置内核和注入的信息都会很棒:)

**详细说明：似乎人们可能会感到困惑，我不是想将 ISomething 放入类中（它不是依赖项），而是 ISomething 的默认实现是依赖项，这就是我选择服务的原因-locator 模式，对于实际的依赖关系，我当然会将它们放在构造函数中。**

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:48:52.163

是的，拥有高度耦合的类并不是很好，因此依赖抽象是一个不错的选择。但是隐藏你的依赖并不是很好的解决方案。让它们对你的类的客户可见，并使用依赖注入来为你的类提供依赖的具体实现：

```
public class SomeClass
{
    private ISomething _something;

    public SomeClass(ISomething something, string someParam)
    {
        _something = something;
    }

    public void DoAThing()
    {
        _something.DoSomething();
    }
} 
```

还考虑创建工厂，它将为`ISomething`创建的`SomeClass`对象提供默认实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:39:43.270

最后，我决定使用静态 IOC 访问类，以允许我的代码访问类库用于主注入的核心 Ninject Kernel。

所以：

```
internal static class IOC
{
    private static readonly IKernel _kernel;

    static IOC()
    {
        _kernel = new StandardKernel(new IModule[] {
            new SomethingModule(),
        });
    }

    static T Get<T>()
    {
        return _kernel.Get<T>();
    }
}

internal sealed class SomethingModule : StandardModule
{
    public override void Load()
    {
        Bind<ISomething>().To<ConcreteSomething>(
            new ConstructorParam("arg", "value"));
    }
} 
```

然后在我上一堂课：

```
public class SomeClass
{
    private ISomething _something;

    public SomeClass(string someParam)
    {
        _something = IOC.Get<ISomething>();
    }

    public void DoAThing()
    {
        _something.DoSomething();
    }
} 
```

现在我可以得到具体的实现，甚至用默认值初始化它们以启动！

使用默认值初始化具体类的方法有点脆弱，但我确信在 Ninject 中有更聪明的方法可以实现这一点，但似乎服务定位器式代码和 Ninject 的混合解决方案工作得很好好！

顺便说一句，我相信您还可以在不同的范围内拥有多个 IOC 容器（它们自己通过 Ninject 传递：P）以防止创建庞然大物“无处不在”的内核。

希望这对某人有所帮助！

# java - SQLite JDBC 类路径

> ID：13667129
> 
> 赞同：1
> 
> 时间：2012-12-02T06:59:59.187
> 
> 标签：java, sqlite, classpath

我正在将**Eclipse 项目从 Windows 迁移到 Mac**。出于某种原因，我在 MAC 中加载 SQLite JDBC 驱动程序时遇到了类路径问题。Windows 副本是可以的。

```
 Exception in thread "main" org.hibernate.service.classloading.spi.ClassLoadingException: Specified JDBC Driver org.sqlite.JDBC class not found  at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.configure(DriverManagerConnectionProviderImpl.java:107) 
```

**这是我所做的：**

1.  显示 System.getProperty("java.class.path") - 结果在 PC 和 MAC 之间完全相同。导入相同的 JAR 和版本，没有多余的也没有丢失。

2.  最初我从 Maven 本地存储库中引用 sqlite。我取出实际的 sqlite-jdbc-3.7.2.jar，将它移到某个地方，并在构建路径中直接引用它。但问题依然存在。

**几点观察：**

在 Windows 中，键入“org.sqlite”。在代码中给了我一堆自动完成选项，而在 Mac 中，它没有给出任何东西。

其他 JAR 似乎可以很好地导入（例如，我有一个 JodaTime jar，它工作得很好）

这是一个类路径问题，还是我需要 SQLite-JDBC 的 Mac 发行版？我在他们的网站上没有看到任何特定的罐子。我当前的副本是通过 Maven 依赖项下载的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T08:37:53.437

问题已解决。

我只是用来自 xerial.org 的新副本替换了我当前的 JAR，并且它起作用了。

我从 Maven 依赖项下载获得的初始 JAR 已损坏，或者某些文件权限阻止 JVM 访问 JAR 的内容。

# php - unset 和 = null 的区别

> ID：13667137
> 
> 赞同：52
> 
> 时间：2012-12-02T07:00:31.970
> 
> 标签：php

从一个[随机的 php.net 帖子](http://us2.php.net/manual/en/function.unset.php#86347)：

> 如果你正在做 $whatever = null; 那么你正在重写变量的数据。您可能会更快地释放/缩小内存，但它可能会更快地从真正需要它们的代码中窃取 CPU 周期，从而导致更长的整体执行时间。

显然这是[无可争议的事实](https://stackoverflow.com/a/13636996/1469439)，所以也许有人会这么好心解释一下。

我的意思是，什么，`unset`神奇地不执行任何汇编指令，而`$whatever = null;`呢？给出的答案和说的一样有用

> $whatever = null 重置缓冲区和 L1 缓存，而 unset 清除缓冲区并重置 L2 缓存。

Techno mumbo jumbo 不构成答案。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-12-02T08:41:54.420

两种方法之间的一个重要区别是它也从符号表`unset($a)`中删除；`$a`例如：

```
$a = str_repeat('hello world ', 100);
unset($a);
var_dump($a); 
```

输出：

```
Notice: Undefined variable: a in xxx
NULL 
```

但是什么时候`$a = null`使用：

```
$a = str_repeat('hello world ', 100);
$a = null;
var_dump($a); 
```

输出：

```
NULL 
```

我还通过基准测试运行了代码，发现它`$a = null`比对应的代码快大约 6% `unset()`。似乎更新符号表条目比删除它更快。

**附录**

另一个区别（如这个小脚本所示）似乎是每次调用后恢复了多少内存：

```
echo memory_get_usage(), PHP_EOL;
$a = str_repeat('hello world ', 100);
echo memory_get_usage(), PHP_EOL;
// EITHER unset($a); OR $a = null;
echo memory_get_usage(), PHP_EOL; 
```

当使用`unset()`除 64 字节外的所有内存时，将返回，而`$a = null;`释放除 272 字节外的所有内存。我没有足够的知识来知道为什么两种方法之间存在 208 字节的差异，但它仍然存在差异。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-02T07:58:36.843

使用 unset 时，内存使用量和处理时间会更少。

[http://php.net/manual/en/function.unset.php#105980](http://php.net/manual/en/function.unset.php#105980)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-06-01T13:03:38.993

我做了一个简单的测试。

考虑这样一个简单的类：

```
class Cat{
    public $eyes  = 2;
    public $claws = 4;
    public $name  = "Kitty";
    public $sound = ['Meow', 'Miaou'];
} 
```

我运行此代码代码

```
$start = microtime(true);

for($i = 10000000; $i > 0; --$i){
    $cat = new Cat;
    $cat = null;
}

$end = microtime(true);

printf("Run in %s and use %s memory",
        round($end - $start, 2), round(memory_get_usage() / 1000, 2)); 
```

> 在 1.95 中运行并使用 233.29 内存

和这个

```
for($i = 10000000; $i > 0; --$i){
    $cat = new Cat;
    unset($cat);
} 
```

> 在 2.28 中运行并使用 233.1 内存

值得一提的是，该`null`方法运行得更快。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-06-19T14:38:27.340

上面的答案很棒，尤其是“两种方法之间的一个重要区别是 unset($a) 也会从符号表中删除 $a ”的评论。

但是，我认为没有人真正从实际意义上完全回答了这个问题，因为他们没有描述如何使用这两者。好的，我想我们知道他们基本上都做同样的事情。为什么要使用一个而不是另一个？

**无效的**

尽管 PHP 自我管理内存/垃圾收集，但会立即回收内存（代价是花费更长的时间）。

**未设置（）**

通常建议使用它，因为它“当我可以使用它时”回收内存，因此被认为更快，因为它不会立即将资源专用于它。

**什么时候应该使用 null vs unset？**

**基本（小数据）数据数组等是unset**的良好候选者，因为内存不会成为问题。更大的数据集和/或需要立即回收内存的任何地方都更适合**null**。例如，如果在一个函数等中多次调用此类大型数据库请求，可能会非常迅速地蚕食您的 PHP 内存上限，这将导致内存已满等原因导致页面 500 错误。因此，当速度很重要时（或一般情况下），应该首选**unset** ) 并且几乎不需要担心内存的增加。

示例：取一个大数组并将其放入 MemCache：

```
 list($inv1, $inv2, $inv3, $inv4) = array_chunk($inventory_array), 
            ceil(count($val['inventory']) / 4));
            MemCache::set($cacheKeyInv1, $inv1, $expiry);
            MemCache::set($cacheKeyInv2, $inv2, $expiry);
            MemCache::set($cacheKeyInv3, $inv3, $expiry);
            MemCache::set($cacheKeyInv4, $inv4, $expiry);
            for ($i = 1; $i < 5; $i++) {
                ${"inv" . $i} = null; // why not use unset ?
            } 
```

for 循环正在清理数据，可以使用 null 或 unset，但由于它是一个大型数据集，也许 null 是首选，因为它会更快地回收内存。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-11T00:58:31.103

使用代码

```
$a = str_repeat('hello world ', 10000);

$start1 = microtime(true);
unset($a);
$stop1 = microtime(true);

$a = str_repeat('hello world ', 10000);

$start2 = microtime(true);
$a = null;
$stop2 = microtime(true);

echo 'unset time lap of '. ( $stop1 - $start1 ) .'<br>';
echo 'null time lap of '. ( $stop2 - $start2 ) .'<br>'; 
```

10次​​：

```
unset time lap of 5.0067901611328E-6
null time lap of 1.1920928955078E-6

unset time lap of 9.5367431640625E-7
null time lap of 9.5367431640625E-7

unset time lap of 0
null time lap of 9.5367431640625E-7

unset time lap of 2.1457672119141E-6
null time lap of 1.1920928955078E-6

unset time lap of 2.1457672119141E-6
null time lap of 0

unset time lap of 9.5367431640625E-7
null time lap of 0

unset time lap of 1.9073486328125E-6
null time lap of 9.5367431640625E-7

unset time lap of 9.5367431640625E-7
null time lap of 0

unset time lap of 1.9073486328125E-6
null time lap of 9.5367431640625E-7

unset time lap of 0
null time lap of 0 
```

看起来空赋值的处理时间更短。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-08T21:27:10.153

不同之处在于 null 的赋值是 null 的赋值，而不是未初始化。如果你不处理性能关键问题，你关闭使用 unset，如果你在你的 PHP 版本上测试这两种可能性。主要区别在于 PHP 7.4 和属性类型，您可以取消设置不可为空的属性，但不能分配 null。

```
class C {
    public int $value;
}

$c = new C();
var_dump(isset($c->value));   // false
$c->value = 5;
var_dump($c->value);          //5
unset($c->value);
//var_dump($c->value);       //Error: Typed property C::$value must not be accessed before initialization
var_dump(isset($c->value));  // false
$c->value = 5;
$c->value = null;            //Error Typed property C::$value must be int, null used 
```

[https://3v4l.org/VUVD1](https://3v4l.org/VUVD1)

# types - Double 和 Float 大小

> ID：13667138
> 
> 赞同：-2
> 
> 时间：2012-12-02T07:00:40.450
> 
> 标签：types, double, programming-languages

有没有一种语言中名为 double 的类型占用的空间比类型名称 float 少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:02:25.480

我对此表示怀疑。名称`double`指的是精度。这意味着它的精度是浮点数的两倍。存储更精确需要更多空间。

# ruby-on-rails - Twitter Bootstrap 和 Rails：如何使某些视图具有响应性而其他视图不响应

> ID：13667139
> 
> 赞同：2
> 
> 时间：2012-12-02T07:00:52.767
> 
> 标签：ruby-on-rails, twitter-bootstrap, asset-pipeline

根据引导文档

将以下内容添加到您`<head>`的网站会使您的网站响应

`<meta name="viewport" content="width=device-width, initial-scale=1.0"> <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">`

在 rails 和资产管道中，您在 application.css 中声明您的 css 文件，因此不需要上面的最后一行。

我使用 bootstrap-sass gem，上面的行是在 application.css 文件中实现的这行代码

`@include "bootstrap-responsive";`

有用！

但不幸的是，这使得每个视图都有响应。

我有很多视图，例如我不想响应的主干应用程序。

我考虑将`<meta viewport...>`标签声明到一个布局文件中，该文件仅用于我的网站中需要响应行为的那些部分。

这似乎不起作用，尽管一些视图没有通过它们的布局声明这个元标记，但它们仍然变得响应。

由于我无法精细控制哪些 css 文件被加载到资产管道中，所以我有点难以理解如何关闭和开启这种响应行为。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:37:25.663

查看[此链接](https://stackoverflow.com/questions/7134034/using-rails-3-1-assets-pipeline-to-conditionally-use-certain-css)以获取一些有用的信息。这可能会让人不知所措，知道，你不必做所有这些......关键是：如果你删除了 require 树（它不会在目录中添加所有文件），你需要手动将它们添加到 config/environments/ production.rb 与：

```
config.assets.precompile += %w( application-all.css application-print.css application-ie.css ) 
```

然后你可以毫无问题地使用 stylesheet_link_tags ......

为了使其更灵活，我将其添加到我的应用程序头中：

```
<%= yield :head if content_for?(:head) %> 
```

然后我所有的观点都使用：

```
<% content_for(:head) do %>
<%= stylesheet_link_tag "#{params[:controller]}.#{params[:action]}" %>
<%= javascript_include_tag "#{params[:controller]}.#{params[:action]}" %>
<% end %> 
```

# perl - 从 cpan 隐藏 INC 目录，以便将模块的所有依赖项安装在目录中

> ID：13667144
> 
> 赞同：3
> 
> 时间：2012-12-02T07:02:17.103
> 
> 标签：perl, cpan, perl-module

对于无法运行 cpan install 的系统（生产中的互联网连接问题），我遇到了将 perl 模块与其所有依赖模块打包的要求。但是，从 linux 系统我可以进行 cpan 安装，已经安装了这些模块。有没有办法我可以从 cpan 命令屏蔽 @INC 目录，并只提供一个目录来查找所有 perl 模块，以便它将所有依赖项下载到该本地目录中。

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T10:16:10.943

看一下[lib::core::only](https://metacpan.org/module/lib%3a%3acore%3a%3aonly)和[local::lib](https://metacpan.org/module/local%3a%3alib) - 第一个从 @INC 中排除所有非核心路径，第二个可以轻松设置本地 perl 模块目录。

组合应该可以解决问题。

# c# - btnclick 函数调用另一个函数，但调用不在 btnclick 函数中

> ID：13667149
> 
> 赞同：1
> 
> 时间：2012-12-02T07:02:58.830
> 
> 标签：c#, asp.net

考虑以下内容：.cs 文件中 buttonclick fn 的代码：

```
protected void additembtnClick(object sender, EventArgs e)
        {   
          DataTable dt = createTemptable();
            dt = (DataTable)Session["dfdtemptable"];
            this.DFDLOVlst.DataSource = dt;
            this.DFDLOVlst.DataBind();
            this.txtLOVCode.Visible = true;
            this.txtLOVvalue.Visible = true;
            MDIngrdientsCode.Show();
} 
```

这是数据网格的 on_row clicked fn

```
protected void OnFindSelect(int Value)
        { 
                } 
```

findbtn 点击代码：

```
protected void btnFind_Click(object sender, EventArgs e)
        {
            this.FindLookup.SetLookup();
            this.FindLookup.SearchLookup();
            this.MdFindLookup.Show();
      } 
```

单击查找按钮时，查找控件会加载数据库中的值。选择任何行时，选定的行值将添加到相应的文本框和数据网格中。additembtnclick 是向数据网格添加新条目。用户可以添加新值，也可以单击查找并选择一行并更新其在数据网格中的值。用户添加新值时没有问题。当用户单击查找并选择特定行时。值被添加到对应的字段中。现在如果用户单击 additem 按钮将新值添加到数据网格中已有的值然后自动调用 fn onfindselected（fn for the onrowclicked event for the lookup control containsg datagrid），但调用不在按钮单击 fn 中。

无法弄清楚什么是错的..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T07:11:14.587

看起来 theOnFindSelect 本身并不是一个事件处理程序。它可能是从另一个事件处理程序（或超过 1 个）调用的。尝试寻找所有对它的调用，看看这是否有意义

# android - 如何在android的AsyncTask中使用方法？

> ID：13667152
> 
> 赞同：3
> 
> 时间：2012-12-02T07:03:07.410
> 
> 标签：android, google-maps, driving-directions

在我的应用程序中，我使用`JSON`web 服务从`Google Navigation api`. 我使用的代码如下。我得到了以下异常

`android.os.NetworkOnMainThreadException`.

如何使用异步任务？这是我的代码。谢谢。`public class MainActivity extends MapActivity {

```
 MapView mapView ;

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    System.out.println("*************1**************1");
    setContentView(R.layout.activity_main);
    System.out.println("*************2**************");
    mapView = (MapView) findViewById(R.id.mapv); 
    System.out.println("*************3**************");

                Route route = directions(new GeoPoint((int)(26.2*1E6),(int)(50.6*1E6)), new GeoPoint((int)(26.3*1E6),(int)(50.7*1E6)));

              RouteOverlay routeOverlay = new RouteOverlay(route, Color.BLUE);
              mapView.getOverlays().add(routeOverlay);
            mapView.invalidate();

    System.out.println("*************4**************");

}

@SuppressLint("ParserError")
private Route directions(final GeoPoint start, final GeoPoint dest) {

    //https://developers.google.com/maps/documentation/directions/#JSON <- get api
    String jsonURL = "http://maps.googleapis.com/maps/api/directions/json?";
    final StringBuffer sBuf = new StringBuffer(jsonURL);
    sBuf.append("origin=");
    sBuf.append(start.getLatitudeE6()/1E6);
    sBuf.append(',');
    sBuf.append(start.getLongitudeE6()/1E6);
    sBuf.append("&destination=");
    sBuf.append(dest.getLatitudeE6()/1E6);
    sBuf.append(',');
    sBuf.append(dest.getLongitudeE6()/1E6);
    sBuf.append("&sensor=true&mode=driving");

    Parser parser = new GoogleParser(sBuf.toString());
      Route   r =  parser.parse();
   System.out.println("********r in thread*****" +r);                  
            return r;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

} `

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T07:22:09.980

@imran khan 使用另一个线程的想法是正确的。在 HoneyComb 及以上版本中，您无法在 UI Thread 内进行任何联网操作。UI 线程是负责显示视图和接收触摸事件的线程，它必须是空闲的，不能被长时间运行的操作阻塞。（否则你会在 Android 上得到 ANR）。

但实际上将 AsyncTask 用于网络请求等长时间运行的操作并不是一个好主意。AsyncTask javadocs 甚至声明它们是为短期运行而设计的......

最好的方法是为此使用服务。我鼓励您阅读RoboSpice 库中的此信息图表并使用[RoboSpice](https://raw.github.com/octo-online/robospice/master/gfx/RoboSpice-InfoGraphics.png) [，](https://github.com/octo-online/robospice)它将简化通过网络创建服务，并使您更容易使用[Spring Android](http://www.springsource.org/spring-android)解析您的 json 内容。

![在此处输入图像描述](../Images/f97e7552860f73e3cf06aca5ed580f1b.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T07:28:19.273

您可以将用于使用 webservice 获取数据的代码放在 AsyncTask 类的 doInBackground() 方法中，并从该函数返回该结果。它将进入 onPostExecute() 方法，您可以在那里解析和更新您的 UI。

```
private class myasyncclass extends AsyncTask<String, Void, Route>{
    @Override
    protected Route doInBackground(String... params) {
        //Enter code for fetching data from remote server using webservice
        return yourRoutevalue;
    }
    @Override
    protected void onPostExecute(Route result) {   
        //Enter code for parsing and using the data(Update UI)
    }
} 
```

您应该在 AsyncTask(DoInBackground, Progress, OnPostExecute) 中具有相同的类型

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T07:09:44.280

使用 AsyncTask 更改您的代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
//Your Code here
new LongOperation().execute("");

System.out.println("*************4**************");

}

private class LongOperation extends AsyncTask<String, Void, String> {

      @Override
      protected Route  doInBackground(String... params) {
         Route route;
        try {
            route = directions(new GeoPoint((int)(26.2*1E6),
               (int)(50.6*1E6)), new GeoPoint((int)(26.3*1E6),(int)(50.7*1E6)));

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
            return Route ;
      }      

      @Override
      protected void onPostExecute(Route  route) {    
        // Update Ui here    
           RouteOverlay routeOverlay = new RouteOverlay(route, Color.BLUE);
           mapView.getOverlays().add(routeOverlay);
           mapView.invalidate();       
      }

} 
```

**注意：**如果您将任何值从 UI 元素传递给 HTTP REQUEST，那么您必须将其作为参数传递给 AsyncTask 的 doInBackground 方法。您可以在此处查看我们如何将参数传递给 AsyncTask：

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# sql-server - 在 ColdFusion 中使用 SQL Server 临时表

> ID：13667157
> 
> 赞同：3
> 
> 时间：2012-12-02T07:04:30.097
> 
> 标签：sql-server, coldfusion

ColdFusion 使用`#`'s 来描述变量。在 SQL Server 中，表名`#`分别`##`是临时表和全局临时表。如何在 ColdFusion 中使用 SQL Temp 表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T07:04:30.097

ColdFusion 将显示 ## 视为输出中的单个 #。因此

```
<cfquery name="qryTempUser">
SELECT * 
FROM   ##tempUsers
WHERE  Active_CODE = 1
</cfquery> 
```

正在从名为 #tempUsers 的临时表中提取

```
<cfquery name="qryTempUser">
SELECT * 
FROM   ###myTableName#
WHERE  Active_CODE = 1
</cfquery> 
```

从名为 myTableName 的 ColdFusion 变量中指定的临时表中提取

```
<cfquery name="qryTempUser">
SELECT * 
FROM   ####tempUsers
WHERE  Active_CODE = 1
</cfquery> 
```

正在从名为##tempUsers 的全局临时表中提取

```
<cfquery name="qryTempUser">
SELECT * 
FROM   #####myTableName#
WHERE  Active_CODE = 1
</cfquery> 
```

从名为 myTableName 的 ColdFusion 变量中指定的全局临时表中提取

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-02T14:43:08.180

另一种选择是使用存储过程。您必须在某处编写所有 t-sql，而存储过程可能会让您更轻松。

# php - PDO (mysql) 参数号无效：参数未定义

> ID：13667160
> 
> 赞同：0
> 
> 时间：2012-12-02T07:04:52.327
> 
> 标签：php, mysql, pdo

我发现了很多关于这个错误的现有问题，但它们都与我的代码情况无关，所以尽管搜索了一段时间，但我不得不开始一个新问题。

我正在用 PHP 编写 PDO 准备语句，我收到错误代码：

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[HY093]: Invalid parameter number: parameter was not defined' in... 
```

到目前为止已经构建的查询是：

```
SELECT * FROM esl_comments, esl_articles WHERE esl_comments.commentSet=:esl_comments.commentSet AND esl_comments.commentSetInstanceID=:esl_comments.commentSetInstanceID AND esl_comments.commentVisible=:esl_comments.commentVisible AND esl_comments.commentID=:esl_comments.commentID; 
```

并且数据被传递给试图执行查询的函数。我已经回应了它，它显示为：

```
esl_comments.commentSet - article
esl_comments.commentSetInstanceID - esl_articles.articleID
esl_comments.commentVisible - Y
esl_comments.commentID - 2 
```

所以查询中有四个占位符，所有四个都对数据感到满意，但是当我在绑定后尝试执行查询时，它给出了上述错误。

有谁知道可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:11:22.170

占位符[必须是](https://stackoverflow.com/a/5810058/567864)字母数字或下划线。

`:esl_comments.commentSet`不是有效的占位符。试试`:commentSet`吧。

（当然其他的也需要更换）

# html - 摄影网站的微数据

> ID：13667162
> 
> 赞同：1
> 
> 时间：2012-12-02T07:05:00.207
> 
> 标签：html, microdata, photography

我是所有网站管理员的新手……HTML、CSS 和绝对结构化的数据。我正在努力以极快的速度学习，而这个网站比任何其他网站都更有价值。但是，上次尝试为我的网站配备结构化数据时，我对自己是否做得正确感到迷茫。网上的例子很少，对于我这种类型的摄影画廊网站来说几乎没有。我真的很感激任何关于我是接近点还是偏离点的见解。

现在我关心的是在我的页面上构建显示单张照片的数据，而不是带有缩略图的页面。我在这里使用的示例来自[http://www.matttilghman.com/Passage-Through-Time.html](http://www.matttilghman.com/Passage-Through-Time.html)

我使用的 itemtypes 是整个页面的 ItemPage，它获得了 Author itemtype（我！）。页面上还有一个照片项目类型，它获取一个作者项目类型和一个位置项目类型。这就是我用于这些仅显示单张照片的页面的全部内容。

我在头部使用元内容来描述 ItemPage。我知道最好为微数据使用可见内容，但我认为我的可见内容最好稍后保存为项目类型照片。

然后我在显示照片的 div 中定义 itemtype Photos。对于照片的关键词，我尝试从可见的描述中截取它们。但这确实是我希望在页面上拥有的唯一可见文本，并且我已将其保存为关键字（我希望这是最重要的）。我还将它加倍为“文本”itemprop（加倍它会导致任何标志吗？）。诸如流派、描述、详细位置之类的东西，我想要结构化的数据，但我不希望它们把页面弄得乱七八糟，所以它都是元数据（这是 Schema 推荐的不可见数据）。大家觉得我的方法还可以吗？我应该在某个地方嵌套另一个重要的 itemtype 吗？我是否对 itemprop 做了一些使其无用的事情（比如使用元内容？）感谢您的任何建议！

我如何以及在何处构建 ItemPage（在头部）：

```
 <!DOCTYPE html>
<html lang="en"> <div id="HTMLDiv" itemscope itemtype="http://schema.org/ItemPage">
<head>
    <title itemprop="name">Passage Through Time, by Matt Tilghman</title>
    <link href="http://fonts.googleapis.com/css?family=Abel" rel="stylesheet" type="text/css">
    <meta itemprop="keywords" name="keywords" content="blah blah some keywords">
    <meta itemprop="description" name="description" content="description about photo etc">
    <meta name="author" content="Matt Tilghman">
    <span itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="Matt Tilghman" />
        <meta itemprop="email" content="my email" />
        <meta itemprop="description" content="Photographer of Landscapes from California, North Carolina, South Florida, and New Mexico" />
    </span> 
```

我如何以及在何处描述照片（在其 div 中）：

```
<div id="Oneonta-Falls-Oregon" class="separate" align="center" itemscope itemtype="http://schema.org/Photograph">   
   <span itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Matt Tilghman" />
      <meta itemprop="email" content="my email" />
      <meta itemprop="description" content="Photographer of Landscapes from California, North Carolina, South Florida, and New Mexico" />
   </span>
   <meta itemprop="description" content="Passage Through Time, by Matt Tilghman.  Fine art photograph of Oneonta Falls, in Oneonta Gorge, on the Oregon side of the Columbia River Gorge.  This is the Lower Falls, which is located about a mile upstream from the where the creek meets the Columbia River.">
   <meta itemprop="genre"   content="nature" />
   <meta itemprop="genre"   content="fine art" />
   <span itemprop="contentLocation" itemscope itemtype="http://schema.org/Place">
      <meta itemprop="name" content="Oneonta Gorge">
      <meta itemprop="description" content="Oneonta Gorge is on the Oregon side of the Columbia River Gorge, in the Pacific Northwest region of the United States">
   </span>         
   <a name="Oneonta-Falls-Oregon" href="" title="Passage Through Time" onclick="scroll(name,3); return false">
   <img itemprop="image" src="images/Oneonta-Falls-Oregon-L.jpg" alt="oneonta, gorge, falls, oneonta falls, waterfall, canyon, slot, pacific northwest, oregon, columbia river gorge" >
   </a>
   <br><br>
   <div class="titleL2" itemprop="name">Passage Through Time</div>
   <br>
   <div class="captionL2" itemprop="text">Shown here is <span itemprop="keywords">Lower Oneonta Falls</span>, an <span itemprop="keywords">intimate</span> <span itemprop="keywords">waterfall</span> at the end of <span itemprop="keywords">Oneonta Gorge</span>, on the <span itemprop="keywords">Oregon</span> side of the <span itemprop="keywords">Columbia River Gorge</span>. Oneonta Gorge seems like a <span itemprop="genre">landscape</span> off another planet. It's a narrow <span itemprop="keywords">gorge</span> reminiscent of the <span itemprop="keywords">slot canyons</span> of the American Southwest, but in the middle of a <span itemprop="keywords">lush</span> <span itemprop="keywords">temperate</span> <span itemprop="keywords">rain forest</span>, with walls clad in moss and ferns, dripping with moisture.  While hiking up the gorge, my mind was first struck by the similarity to a slot canyon, but then began to ponder the different ways they were created.  The slot canyons of the Southwest form when rain water drains through existing sandstone channels, further carving them with every downpour.  Oneonta Gorge, however, likely formed as the waterfalls (there are four) eroded their own precipice, marching backwards in time.  As I considered this, the trek upstream began to feel like a march forward in time, mimicking the path of the waterfall but at a much faster pace.  It's a truly remarkable piece of <span itemprop="keywords">wilderness</span>, and well worth the tricky trek over logjams and slippery boulders.</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:12:11.090

在我看来很好。绝对使用[Google 结构化数据测试工具](http://www.google.com/webmasters/tools/richsnippets?url=http%3A%2F%2Fwww.matttilghman.com%2FPassage-Through-Time.html&html=)来检查您的微数据标记。

我会对`<meta>`元素中包含如此多的信息有点警惕。虽然没有*错*，但它可能会使维护变得比必要的更难。另一种值得考虑的方法是将信息放入普通段落中，然后使用 CSS 对用户隐藏它们。这样，要检查信息是否是最新的，您只需禁用 CSS，就可以自然地阅读内容。它还具有可被较少微数据感知索引器索引的好处。

# sql-server - 安装 SQL Server 2012 SP1 后如何修复 VS 2012 中的 T-SQL 编辑器？

> ID：13667165
> 
> 赞同：29
> 
> 时间：2012-12-02T07:05:19.257
> 
> 标签：sql-server, visual-studio, visual-studio-2012, sql-server-2012

只需双击解决方案资源管理器，我就突然无法在 VS 2012 中打开 .sql 文件。我收到错误消息：

> 无法在自定义编辑器中打开 Transact-SQL 文件

我强烈怀疑这是在昨天为 SQL Server 2012 Express 安装 SP1 之后，作为 Windows 更新的一部分。错误对话框为我提供了*Get the latest version of SQL Server Data Tools*的链接，但该链接仅产生一个在 MSDN 上找不到的页面。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-03T19:04:52.227

安装[SQL Server Data Tools - 2012 年 11 月更新](http://msdn.microsoft.com/en-us/jj650015)修复了 SQL 编辑器。世界上一切都好起来了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-03T14:57:46.443

是的，SQL Server 2012 中的另一个*错误*

右键单击 SQL 文件并选择“打开方式...”。选择“源代码（文本）编辑器”并选择“设置为默认值”。

现在它又可以工作了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-11T19:20:00.787

差不多一年后，但我发现 joerage 的回答更有帮助。

[默认为 Visual Studio 2012 数据库项目中的 T-SQL 窗格视图](https://stackoverflow.com/questions/14571098/default-to-the-t-sql-pane-view-within-visual-studio-2012-database-project)

# javascript - 如何在 GNOME 开发环境中嵌入和缩放窗口？

> ID：13667166
> 
> 赞同：1
> 
> 时间：2012-12-02T07:05:27.817
> 
> 标签：javascript, gtk, gnome

我正在尝试制作具有一些很酷功能的 TileWM。当我浏览 Gtk 文档时，我没有找到与缩放窗口和嵌入窗口相关的 API（Gtk.plug 可以做到吗？）。我怎样才能建立它？

到目前为止，我正在使用种子。

# android - 我可以使用 SharedPreferences 从 2 个活动中接收价值数据吗

> ID：13667168
> 
> 赞同：0
> 
> 时间：2012-12-02T07:06:05.713
> 
> 标签：android, sharedpreferences

如何从 2 接收值`Activities`（传递数据）？

我有 3 个活动`ActivityOne`，，，，`ActivityTwo`。`ActivityThree`我想从`ActivityOne`to`ActivityThree`和`ActivityTwo`to发送值（传递数据） `ActivityThree`。

中的所有数据都`ActivityThree`不会被破坏，因此所有来自`ActivityOne`和`ActivityTwo`任何中的值数据`ActivityThree`。来自`ActivityOne`保存临时变量的数据和来自保存临时变量的`ActivityThree`数据。所以我可以一起显示所有的值数据，`ActivityTwo``ActivityThree``ActivityOne``ActivityTwo``ActivityThree`

我可以做`SharedPreferences`吗？如果是，任何人都可以提供一个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:32:16.193

使用 SharedPreferences 不是一个坏主意，但您的要求是暂时的。所以最好使用Bundle Extras。获取 Bundle 对象并通过 bundle 将所有第一个活动变量传递给第二个活动。从意图中检索包并将第二个活动变量放在同一个包中并将其传递给第三个活动。在第三个活动中检索捆绑包并使用它们。我希望这能帮到您。

```
Bundle b = new Bundle();
b.putString("name","value");
b.putInt("name1",9);
Intent i = new Intent(FirstActivity.this, SecondActivity.class);
i.putExtras("bundle",b);
startActivity(i); 
```

在第二个活动中检索

```
Bundle b = getIntent().getBundleExtra("bundle"):
b.putString("namein2",value);
b.putInt("nameIntin2",8);
Intent i = new Intent(SecondActivity.this,ThirdActivity.class);
i.putExtras("bundle",b);
startActivity(i); 
```

检索捆绑包并在第三个活动中使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T07:36:47.837

如果您使用共享偏好，

```
 //Get shared preference
    SharedPreferences prefs = this.getSharedPreferences("ANY_NAME_TO_IDENTIFY", Context.MODE_PRIVATE);

    //To set value
    pref.edit().putString("NAME", "Simone").commit();
    pref.putLong("NUMBER", new Date().getTime()); 

    //To get value

    pref.getString("NAME", "Put_any_default_value");
    pref.getLong("NUMBER", new Date().getTime()); 
```

# android - Android - 对话框 getSupportFragmentManager 未定义

> ID：13667169
> 
> 赞同：1
> 
> 时间：2012-12-02T07:06:18.897
> 
> 标签：android, dialog, alert, android-dialogfragment

我正在尝试在我的代码中实现一个简单的对话框。但它不起作用。我搜索了所有可用的教程，包括官方开发人员指南，但没有任何效果。我从 logcat 得到的错误是我得到了一个 nullPointerException，我猜那是在 getActivity 上。有什么帮助吗？

这就是我所拥有的：这是我的自定义对话框类。

```
public class SaveDialog extends DialogFragment {

    public Dialog onCreateDialog(Bundle savedInstanceState) {
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle("Save Password");
        builder.setView(getContentView());
        Dialog dialog = builder.create();
        dialog.show();
        return dialog;
    }

    private View getContentView() {
        LayoutInflater inflater = getActivity().getLayoutInflater();

        return inflater.inflate(R.layout.dialog, null);
    }
} 
```

这是我发生 onclick 的主要活动

```
private void savePassword() {
    SaveDialog savePasswordDialog = new SaveDialog();
    savePasswordDialog.show(savePasswordDialog.getSupportFragmentManager(), "tag");
} 
```

每次我启动 onClick 时，应用程序都会崩溃。最重要的是，目前我正在尝试使用 getSupportFragmentManager，但它说它是未定义的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-02T09:38:44.343

您应该使用 getSupportFragmentManager()，它仅在 FragmentActivity 中可用。

您应该将您的活动更改为片段之一。

检查[这个答案](https://stackoverflow.com/questions/13443811/cannot-call-getsupportfragmentmanager-from-activity)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-11-24T10:57:22.417

试试这个..作品！

* * *

```
((AppCompatActivity)activity).getSupportFragmentManager() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-28T15:07:17.930

只需从您的 android.support.v4.app.DialogFragment 或 android.support.v4.app.Fragment 调用 getFragmentManager()。它将返回一个 android.support.v4.app.FragmentManager（即支持 FragmentManager）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-02T12:24:11.757

您不必在 onCreateDialog() 中手动显示对话框，只需返回它就足以让 DialogFragment 在调用 savePassword() 时发挥其魔力（并显示对话框）。

所以从 onCreateDialog 中删除这一行： dialog.show();

它应该可以工作。祝你好运！

# java - 文件 I/O Java 提示符

> ID：13667175
> 
> 赞同：1
> 
> 时间：2012-12-02T07:07:24.400
> 
> 标签：java, file-io, while-loop

我有一个关于提示和接受文件名的快速问题，然后将文件文本作为扫描仪对象。

我希望程序提示用户输入文件名，直到他得到一个存在的文件，然后将文件文本用作扫描仪对象。

这是我到目前为止的代码，它工作到我退出`while {}`循环的地步，但是当我尝试处理扫描仪项目时，`while (input.hasNextLine()) {`它给了我一个错误，说它找不到扫描仪项目。

这可能是一个愚蠢的错误，但我似乎无法理解。

整个代码如下：

```
import java.io.*;
import java.util.*;

public class PersonalityTest {

public static void main(String[] args) throws FileNotFoundException {

    boolean isFile = false;

        Scanner sc = new Scanner(System.in);
        System.out.print("Input file name? ");
        String fileName = sc.next();
        File inputFile = new File(fileName);

    while (isFile == false) {    
        if (inputFile.exists()) {
            Scanner input = new Scanner(inputFile);
            isFile = true;
        }            
    }

    while(input.hasNextLine()) {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T07:12:44.047

`input`变量的范围 是`while (isFile == false)`块本地的。在外面声明它，否则它将不可见。

对于第一部分“我希望程序提示用户输入文件名，直到他得到一个存在的文件”：移动此代码：

```
 Scanner sc = new Scanner(System.in);
    System.out.print("Input file name? ");
    String fileName = sc.next();
    File inputFile = new File(fileName); 
```

进入一个方法并`while (isFile == false)`在存在检查之前在块内调用它（该方法应该与文件一起返回或通过其他方式使变量在块中可见）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T07:11:32.530

你不能`input`在语句之外访问`if`，因为编译器不确定，它会通过测试，你可以这样做：

```
Scanner sc = new Scanner(System.in);
Scanner input = null;
boolean isFile = false;

while (isFile == false){    

    System.out.print("Input file name? ");
    String fileName = sc.next();
    File inputFile = new File(fileName);

    if (inputFile.exists()){
        input = new Scanner(inputFile);
        isFile = true;
    }            
} 
```

但是会抛出一个`NullPointerException`if it is `null`。

我稍微更改了代码，这样，如果文件不存在，它就不会超过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T07:20:38.007

扫描仪在您的声明中`input`是本地的。`if`因此，您的`while (input.hasNextLine()) {`陈述将不起作用。Java 编译器将`input`视为一个单独的 Scanner 对象，**这就是问题出现的地方**，因为对于 Java 编译器，`input`您尝试使用的对象不存在。

我会遵循 MouseEvent 的建议代码，因为它不会遇到上述问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T07:48:41.117

其他答案已经解决了您的直接问题，但我想指出您的代码的其他几个问题：

您检查文件是否可以打开的方式存在缺陷。编写代码的更好方法是尝试打开文件......并在出现异常时重试。例如：

```
Scanner input = null;
do {
    System.out.print("Input file name? ");
    String fileName = sc.next();
    File inputFile = new File(fileName);
    try {
        input = new Scanner(inputFile);
    } catch (IOException ex) {
        System.out.println("Cannot open: " + ex.getMessage());
    }          
} while (input == null); 
```

为什么这比打电话更好`File.exists()`？

*   您可能能够打开文件的原因有很多。它可能根本不存在。它可能是不能作为文件打开的目录或特殊文件。该应用程序可能没有权限。该文件可能位于远程挂载的文件系统上，而远程挂载可能刚刚终止。

*   `File.exists()`调用（以及您可能进行的任何其他调用）与实际打开文件之间有一小段时间间隔。在那个时间间隔内，您的程序中的某些内容可能会导致文件无法打开；例如，它可以更改其权限或删除它。

第二个问题是您的代码可能会泄漏文件描述符，因为扫描仪未关闭。在您的特定应用程序（如所写）中，这无关紧要，因为您将在使用扫描仪后立即退出应用程序。但是如果你不是......并且这段代码被调用了很多次......你会发现你无法打开文件。

处理这个问题的正确方法是编写如下代码：

```
public static void main(String[] args) {
    try (Scanner input = openInput()) {
        while (input.hasNextLine()) {
            // do stuff
        }
    }
} 
```

这使用了 Java 7 新的“使用资源尝试”语法，可确保在 try 语句完成时关闭资源。（您可以在 Java 7 之前的版本中使用 try / finally 来做同样的事情，但代码有点麻烦。）

# google-chrome - chrome 扩展 OnMessage

> ID：13667176
> 
> 赞同：11
> 
> 时间：2012-12-02T07:07:29.207
> 
> 标签：google-chrome, background, google-chrome-extension

我是 Chrome 扩展的新手，当然我坚持每一步，但这特别难。也许这是一个愚蠢的错误，但这是我想要做的：

将内容脚本中的简单消息发送到后台页面，并将其作为变量处理。所以我的内容脚本中有这个：

```
$(document).ready(function() { 
    var d = document.domain;    
       chrome.extension.sendMessage({dom: d});  

 }); 
```

在我的后台脚本中：

```
chrome.extension.onMessage.addListener(function(request) {
    alert(request.dom);
}); 
```

因此，警报工作正常。但它“进入”我正在浏览的页面，而不是 HTML 扩展，这意味着，当点击我的扩展按钮时，它不会弹出，而是在页面加载时被编码到内容脚本中。

请，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-04T07:20:01.030

我的Demo扩展如下

**文件和角色**

a) *manifest.json* [（文档）](https://developer.chrome.com/extensions/manifest.html)

b) *myscript.js*（内容脚本见[文档](https://developer.chrome.com/extensions/content_scripts.html)）

c) *background.js*（背景 HTML 文件参见[文档](https://developer.chrome.com/extensions/background_pages.html)）

d) *popup.html*（浏览器操作弹出窗口见[文档](https://developer.chrome.com/extensions/browserAction.html#popups)）

e) *popup.js*（后台页面修改值的接收器）

***清单.json***

将所有文件注册到具有权限的清单（即背景、弹出窗口、内容脚本）

```
{
"name":"Communication Demo",
"description":"This demonstrates modes of communication",
"manifest_version":2,
"version":"1",
"permissions":["<all_urls>"],
"background":{
    "scripts":["background.js"]
},
"content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["myscript.js"]
    }
  ],
"browser_action":{
    "default_icon":"screen.png",
    "default_popup":"popup.html"
}  
} 
```

***myscript.js***

使用[sendMessage() API](https://developer.chrome.com/extensions/runtime#method-sendMessage)与后台页面通信

```
var d = document.domain;
chrome.extension.sendMessage({
    dom: d
}); 
```

***背景.js***

[使用onMessage()](https://developer.chrome.com/extensions/extension.html#type-Port)和[onConnect()](https://developer.chrome.com/extensions/extension.html#type-Port)监听器为 Content 和 popup.js 添加了事件监听器

```
var modifiedDom;
chrome.extension.onMessage.addListener(function (request) {
    modifiedDom = request.dom + "Trivial Info Appending";
});
chrome.extension.onConnect.addListener(function (port) {
    port.onMessage.addListener(function (message) {
        if (message == "Request Modified Value") {
            port.postMessage(modifiedDom);
        }
    });
}); 
```

***popup.html***

示例浏览器操作 HTML 页面注册 popup.js 以避免[内联脚本](https://developer.chrome.com/extensions/contentSecurityPolicy.html)

```
<!doctype html>
<html>

    <head>
        <script src="popup.js"></script>
    </head>

    <body></body>

</html> 
```

***popup.js***

使用[Port\Long Lived Connection](https://developer.chrome.com/extensions/extension.html#type-Port)与后台页面通信以获取结果

```
var port = chrome.extension.connect({
    name: "Sample Communication"
});
port.postMessage("Request Modified Value");
port.onMessage.addListener(function (msg) {
    console.log("Modified Value recieved is  " + msg);
}); 
```

希望这会有所帮助，如果您需要更多信息，请告诉我

# c# - 在 C# MVC 中将表从视图模型返回到控制器

> ID：13667178
> 
> 赞同：0
> 
> 时间：2012-12-02T07:07:49.207
> 
> 标签：c#, jquery, asp.net-mvc, viewmodel

我有一个视图，允许用户将项目添加到表中。该表是使用简单的 html 表单和 jquery 构建的以添加新行。

我需要能够将从视图添加的行返回到控制器（最好是通过视图模型）。现在，我能想到的就是使用 jquery 将分隔格式的数据添加到隐藏字段中。

但是我担心添加的数据长度对于隐藏字段来说可能太多了，而且验证起来会很复杂。

任何建议，将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T07:28:38.010

我想使用视图模型会有点困难，因为您必须知道您经常期望拥有的字段数量，尽管您可能使用列表但不确定是否可以仅使用 jquery 来实现，但您可以

增加您创建的输入的名称

```
<input type='text' name='somename1' />
<input type='text' name='somename2' />
<input type='text' name='somename3' /> 
```

和你的后端

```
[HttpPost]
public ActionResult collect(FormCollection collection)
{
     List<string> names = Request.Params
    .Cast<string>()
    .Where(p => p.StartsWith("somename"))
    .ToList();
   //  then iterate thru your dynamically created controls
   foreach(var item in names)
   {
      string text=collection[item].ToString();

   } 
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T07:16:44.817

可能使用现成的组件会更有用吗？例如 Telerik 或 KendoUI 可以开箱即用。

但是如果你想自己做，你可以把这些行放在 javascript 对象中，然后用 ajax 请求提交。在控制器动作中，它可以在模型绑定器的帮助下绑定到模型视图。

# java - 对查找偶数斐波那契数之和的运行时间感到困惑

> ID：13667181
> 
> 赞同：3
> 
> 时间：2012-12-02T07:08:41.907
> 
> 标签：java, performance, algorithm

对于 Project Euler 问题 2，我有两个解决方案，即找到所有小于 400 万的偶数斐波那契数的总和。

解决方案一（平均需要 11,000 纳秒）：

```
public class Solution {

static long startTime = System.nanoTime();
static final double UPPER_BOUND = 40e5;
static int sum = 2;

public static int generateFibNumber(int number1, int number2){
    int fibNum = number1+ number2;
    return fibNum;
}

public static void main( String args[] ) {
    int i = 2;
    int prevNum = 1;
    while(i <= UPPER_BOUND) {
        int fibNum = generateFibNumber(prevNum,i);
        prevNum = i;
        i = fibNum;
        if (fibNum%2 == 0){
            sum += fibNum;
        }
    }
    long stopTime = System.nanoTime();
    long time = stopTime - startTime;
    System.out.println("Sum: " + sum);
    System.out.println("Time: "+ time);
} 
```

和解决方案二（平均需要 14,000 纳秒）：

```
public class Solution2 {
static long startTime = System.nanoTime();  
final static int UPPER_BOUND = 4_000_000;
static int penultimateTerm = 2;                                         
static int prevTerm = 8;                                                
static int currentTerm = 34;                                             
static int sum = penultimateTerm+ prevTerm;                 

public static void main( String args[]) {
    while (currentTerm <= UPPER_BOUND) {
        sum+= currentTerm;
        penultimateTerm = prevTerm;
        prevTerm = currentTerm;
        currentTerm = (4*prevTerm) + penultimateTerm;
    }

    long stopTime = System.nanoTime();
    long time = stopTime - startTime;
    System.out.println("Sum: " + sum);
    System.out.println("Time: " + time);

} 
```

当我在 while 循环中执行更少的迭代并且也没有 if 语句时，为什么解决方案二需要更长的时间？这可以更有效地完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T07:54:10.063

只运行一次算法是评估其性能的一种非常不可靠的方法，特别是当时间约为 10ns 时。您的第二种方法确实更快。我重写了您的代码以迭代每个算法 100 次，并从您那里得到完全不同的结果。

代码：

```
public class Fib {
    private static int UPPER_BOUND = 4000000;
    private static int ITERS = 100;
    public static void main(String[] args) {
        long time1, time2;
        int sum1 = 0, sum2 = 0;
        long startTime = System.nanoTime();
        for (int iter = 0; iter < ITERS; ++iter) {
            sum1 = sol1();
        }
        time1 = System.nanoTime() - startTime;

        startTime = System.nanoTime();
        for (int iter = 0; iter < ITERS; ++iter) {
            sum2 = sol2();
        }
        time2 = System.nanoTime() - startTime;
        System.out.println("Time1 = " + time1 + "; sum1 = " + sum1);
        System.out.println("Time2 = " + time2 + "; sum2 = " + sum2);
    }

    private static int sol1() {
        int sum = 2;
        int i = 2;
        int prevNum = 1;
        while(i <= UPPER_BOUND) {
            int fibNum = generateFibNumber(prevNum,i);
            prevNum = i;
            i = fibNum;
            if (fibNum%2 == 0){
                sum += fibNum;
            }
        }
        return sum;
    }

    private static int sol2() {
        int penultimateTerm = 2;
        int prevTerm = 8;
        int currentTerm = 34;
        int sum = penultimateTerm + prevTerm;
        while (currentTerm <= UPPER_BOUND) {
            sum += currentTerm;
            penultimateTerm = prevTerm;
            prevTerm = currentTerm;
            currentTerm = (prevTerm << 2) + penultimateTerm;
        }
        return sum;
    }

    private static int generateFibNumber(int number1, int number2) {
        return number1+ number2;
    }
} 
```

结果（典型）：

> 时间1 = 189910；sum1 = 4613732
> 时间2 = 35501；总和2 = 4613732

请注意，在第二个算法中，我更改`(4*prevTerm)`为`(prevTerm << 2)`，它稍微快一些。这将时间缩短了大约 5%。每个测试仍然有很多开销：一个函数调用并将结果分配给一个局部变量。但是，通过迭代，您不会因为调用`System.nanoTime()`.

请注意，您的第一个代码也使用了`double`for `UPPER_BOUND`，这会减慢它的速度。我的代码试图使测试尽可能并行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T07:19:09.187

第二个版本*更快*。正如评论中指出的那样，您的时间不准确。此外，对需要几微秒的功能进行计时也是不可靠的。您应该在循环中运行代码并计算 x 次迭代的总时间，然后使用它来计算每次迭代的平均时间。

我还认为展示代码工作的原因可能很有用。请注意，偶数出现在每三个索引处。

```
1  1  2  3  5  8 13 21 34
      ^        ^        ^ 
```

第二个版本只直接计算偶数。它通过从 F(n) 和 F(n-3) 计算 F(n+3) 的值来做到这一点。

```
F(n + 3) = F(n + 2) + F(n + 1)
         = F(n + 1) + F(n) + F(n + 1)                              [1]
         = F(n) + F(n - 1) + F(n) + F(n) + F(n - 1)                [2]
         = F(n) + F(n - 2) + F(n - 3) + F(n) + F(n) + F(n - 1)     [3]
         = F(n) + F(n) + F(n - 3) + F(n) + F(n)                    [4]
         = 4 * F(n) + F(n - 3) 
```

使用以下身份：

1.  `F(n + 2) = F(n + 1) + F(n)`
2.  `F(n + 1) = F(n) + F(n - 1)`
3.  `F(n - 1) = F(n - 2) + F(n - 3)`
4.  `F(n) = F(n - 1) + F(n - 2)`

# three.js - 使用 THREE.js 在立方体几何体上应用纹理

> ID：13667182
> 
> 赞同：3
> 
> 时间：2012-12-02T07:08:46.913
> 
> 标签：three.js, textures

我有一个简单的 THREE.js 应用程序，它可以渲染一个立方体并在每个面上应用纹理，如下所示：

```
var cubeGeometry = new THREE.CubeGeometry(5, 8, 1, 4, 4, 1);

var materials = [ new THREE.MeshBasicMaterial({ map: THREE.ImageUtils.loadTexture('front.jpg') }),
//.....Front, back, left, etc...                              
]; 

...

var cubeMesh = new THREE.Mesh(cubeGeometry, new THREE.MeshFaceMaterial(materials)); 
```

然而，我看到的只是一个黑色立方体，即图像不会出现在立方体的表面上。

此外，我的代码在 THREE.js 库的第 50 版中运行良好，因此似乎一个更改是较新的版本导致我的代码中断，而且我似乎找不到任何相关文档。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-24T14:02:31.463

以下代码应从 97 版开始工作

```
// creates cubes geometry in front of camera (assuming your camera position and rotation has not changed)
var geometry = new THREE.CubeGeometry(1, 1, 1, -2, 0, 0);

// creates a texture loader for the cube
var texture = new THREE.TextureLoader();

// defines variables to make things easier
var counter, textures = [], materials = [];

// iterate through all 6 sides of the cube
for(counter = 0; counter < 6; counter ++) {

  // loads and stores a texture (you might run into some problems with loading images directly from a source because of security protocols, so copying the image data is a for sure way to get the image to load)
  textures[counter] = texture.load('data:image/restOfImageAddress');

  // creates material from previously stored texture
  materials.push(new THREE.MeshBasicMaterial({map: textures[counter]}));
}

// creates the cube by mixing the geometry and materials
var cubeMesh = new THREE.Mesh(geometry, materials); 
```

# c++ - 测量函数在其整个生命周期内在堆和堆栈上分配的总空间

> ID：13667187
> 
> 赞同：3
> 
> 时间：2012-12-02T07:09:24.983
> 
> 标签：c++, memory-management, heap-memory, dynamic-memory-allocation, stack-memory

我有一个用 C++ 编写的递归函数，它使用`new`. 如何测量函数在其整个生命周期内在堆和堆栈上分配的空间总量？

这是一个如何测量堆栈的示例（它不是我的代码）。

```
unsigned int maxStackLocation ; 
unsigned int minStackLocation ; 
main () 
{ 
    //get the address of a local variable before calling Quicksort 
    //the stack grows down, so this is the max stack location 
    int localVariable;
    void *currPtrLocation = (void*)(&localVariable); 
    maxStackLocation = *(unsigned int *)(&currPtrLocation); 
    //we get the value for the minimum stack location in quicksort itself 
    //call quicksort 
    Quick (A, num); 
    space = maxStackLocation - minStackLocation;
} 
//some redundant function whose stack usage will be measured
void Quick (unsigned int A[], int num) 
{ 
    if (num <= 1) 
    { 
        //check the stack usage 
        //figure out where we are on the stack by looking at the byte  
        // address of the local variable 
        //we do this by making a pointer to a local variable, and then  
        //casting it to a integer 
        void *currPtrLocation = (void*)(&num); 
        unsigned int currStackLocation = *(unsigned int*)(&currPtrLocation); 
        if (currStackLocation < minStackLocation) 
            minStackLocation = currStackLocation; 
        return; 
    }
} 
```

**编辑**
Borgleader 指出我最初的问题“测量最大空间函数在其整个生命周期内分配在堆和堆栈上”是不正确的。我已将“最大”更改为“总计”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T23:01:21.703

Valgrind 实际上可以为您进行非常精确的测量。您所需要做的就是编写尽可能简单的示例来调用您的函数。

例如，一个程序只`main()`使用 for 循环打印其参数（传递给函数）并`std::cout`产生以下输出：

```
zaufi@gentop /work/tests $ valgrind --tool=drd --show-stack-usage=yes ./stack-usage-test-1
==26999== drd, a thread error detector
==26999== Copyright (C) 2006-2012, and GNU GPL'd, by Bart Van Assche.
==26999== Using Valgrind-3.8.1 and LibVEX; rerun with -h for copyright info
==26999== Command: ./stack-usage-test-1
==26999==
./stack-usage-test-1
==26999== thread 1 finished and used 11944 bytes out of 8388608 on its stack. Margin: 8376664 bytes.
==26999==
==26999== For counts of detected and suppressed errors, rerun with: -v
==26999== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0) 
```

正如人们所看到的，唯一的线程将在堆栈上消耗近 12K。并且绝对大部分空间**在**. `main()`为了进行更好的测量，有必要在单独的线程中运行目标函数。像这样：

```
#include <iostream>
#include <thread>

int main(int argc, char* argv[])
{
    auto thr = std::thread([](){std::cout << __PRETTY_FUNCTION__ << std::endl;});
    thr.join();
    return 0;
} 
```

此代码将产生以下输出：

```
==27029== thread 2 finished and used 1840 bytes out of 8384512 on its stack. Margin: 8382672 bytes.
==27029== thread 1 finished and used 11992 bytes out of 8388608 on its stack. Margin: 8376616 bytes. 
```

那肯定更好。所以测量一个什么都不做的函数，你有一个*最小的堆栈使用量*（在最后一个例子中它大约是 1840 字节）。因此，如果您要在单独的线程中调用目标函数，则必须从结果中减去 1840 个字节（甚至更少）...

* * *

您可以使用以下简单算法自行完成几乎相同的操作：

1.  从堆中分配 8M 缓冲区（linux/pthreads 的默认堆栈大小，但实际上您可以分配任何其他（合理）大小）
2.  用一些图案填充它
3.  派生一个新线程，并将堆栈分配给刚刚分配和填充的区域（使用`pthread_attr_setstack()`（或朋友））
4.  只要您可以在该线程中调用目标函数并退出
5.  在主线程中，`pthread_join()`成功后，分析您的缓冲区以找到一个区域，您之前分配的模式没有保留

（甚至）在这种情况下，您最好对一个什么都不做的线程进行第一次测量——只是为了获得如上所述的最小使用量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T21:22:01.343

您测量堆栈使用情况的示例非常准确，并且会给您（非常接近）正确的答案。我也有一个关于确定堆使用情况的建议，但首先......

在他的书“更有效的 C++”第 27 项中，Scott Meyers（顺便说一句，我最喜欢的 C++ 作家）描述了为什么在一般意义上和在可移植或半可移植 C++ 的范围内不可能明确区分对象是否已被分配在堆栈、堆上或静态分配。但他的解释是从对象本身的角度来看分配的对象，而不是从请求这种分配的代码的角度来看分配。从请求分配的代码的角度来看，您可以根据您请求分配的方式确定一个对象（无论其类型如何）是在堆上分配还是在堆栈上分配。（边栏：当然这取决于您的系统实际使用运行时堆栈，有些人很快指出 C++ 标准不能保证，但是这些标准势利小人都没有指出任何不使用运行时堆栈的符合标准的 C++ 编译器的实际示例。回到我们的讨论......）例如：

```
int Fred;  // Fred is allocated on the stack
int *Barney = new int; // Barney is allocated on the heap 
```

Fred 超出范围时会破坏；当你处理完 Barney 后，你必须明确删除他。这同样适用于用户定义的类型，包括 STL 类型：

```
std::string Fred; // Fred is allocated on the stack (see disclaimer*)
std::string *Barney = new std::string(); // Barney is allocated on the heap

// *Disclaimer:  May not be totally true on some small embedded processors that
//               implement the runtime stack in a special small address space
//               separate from “normal” RAM. 
```

...但是：虽然称为 Fred 的 std::string 对象本身是在堆栈上分配的，但我们当然知道它的数据不能在堆栈上分配，因为它的数据是可变长度的，并且必须能够无限扩展为我们给它添加字符。所以只有 std::string 的管理部分（即 std::string 对象本身）可以被堆栈分配。

回到 Scott Meyer 的第 27 条，它适用于本次讨论：

```
myClass *someFunction() {
    int someInputParameter = 42;
    myClass Fred(someInputParameter); // Fred is allocated on the stack
    myClass *Barney = new myClass(someInputParameter); // Barney is allocated on the heap
    return Barney;
} 
```

根据 Scott Meyer 的第 27 条，Fred 和 Barney 都不能自己知道它们是堆栈分配还是堆分配，或者就此而言，静态分配（即“全局”或“文件范围”或“某些其他类”）。但是在 someFunction() 中，我们可以知道，因为我们知道我们是如何请求分配的。

* * *

现在，回到你的问题：

正如我所说，您展示的用于测量堆栈使用情况的示例非常准确。您在 main() 中肯定知道“localVariable”是在堆栈上分配的。而且您在 Quick() 中肯定知道“currPtrLocation”在堆栈上。如果你的堆栈变小了，你肯定知道因为 main() 调用 Quick()，Quick() 中的 'currPtrLocation' 的地址将低于 main() 中的 'localVariable' 的地址，所以你的算术有效. 它不会给出完全正确的答案，因为 Quick() 中可能有其他变量分配在堆栈位置但低于“currPtrLocation”，但您的测量结果将非常接近；当然和你应该关心的一样近。无论错误量是多少，无论调用堆栈有多深，它都是一个固定错误，并且如果您递归任何显着次数，误差占整体的百分比可以忽略不计。最后一件事：如果您希望解决方案即使对于堆栈增长的系统也可移植，您可以检测“localVariable”和“currPtrLocation”地址之间差异的方向并计算差异（即交换参数减法）相应地。

关于堆使用：

你的系统可能有一些钩子可以用来测量堆使用统计，但如果你不想深入研究，你可以按照 Synxis 的建议做一些事情，但是这个答案存在一些严重的问题。首先，Synxis 的建议忽略了所有的堆栈开销，包括返回地址、溢出的寄存器等，这些都不是微不足道的。其次，如果您使用问题中显示的堆栈测量技术，则无论如何都无需费力地维护堆栈分配对象的分配总和。第三，假设您只对堆分配对象的分配求和（您可以使用 sizeof() 运算符获得其大小），您不能只对它们求和。当您删除它们时，您必须减去分配的大小，以便您的“totalSize”保持所有的总大小*目前*分配的对象，并且您希望单独跟踪 totalSize 的高水位线。这样你就可以知道你的算法在任何时候使用的最大内存量。如果不这样做，即使您只有 4G 的 RAM，当您的算法报告它使用了 758 GB 之类的东西时，您可能会感到困惑。最后，无论您是在堆栈还是堆上分配给定对象本身，它都可能在堆上进行自己的内部分配。（如果当您调用该对象的方法时它在堆栈上进行临时分配，除非您也将堆栈跟踪代码放入该方法中，否则您的堆栈总数不会像我已经描述的那样完全正确，但错误会继续或多或少保持不变，具体取决于方法是否执行可能改变其调用行为的条件。）无论如何，关于您在堆栈或堆上分配的这个“给定对象”；如果它分配自己的内部堆内存，除非您将堆分配跟踪添加到内部对象，否则您将错过分配给这些内部对象的堆内存量。所以也许你最好看看你的系统可能提供的堆统计钩子。

现在，假设您想自己跟踪堆分配......您可能会探索的另一个选择是编写一个基类，您的算法可以从中派生出它创建的所有对象。您的基类可以覆盖 operator new & operator delete，这样基类本身就可以使用基类中的静态类变量来执行所有的 totalSize 跟踪（添加“new”并减去“delete”）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T11:18:45.400

拥有确切的总大小几乎是不可能的，因为它取决于您的平台、调用约定、优化模式等……但是您可以进行估计。我不计算参数，因为并不总是由被调用函数处理（取决于调用约定）。

没有 C++ 或 C 功能可以做到这一点。
我不知道有任何调试器会指示这个数字。我从来没有使用过 Valgrind 和 co，所以我不能告诉你他们是否可以告诉你这个数字（我怀疑他们可以）
所以，最后一个选择：你自己数......

```
unsigned int totalSize = 0;

int partition(unsigned int A[], int num, int left, int right, int pivot)
{
    /// UpdateTotalSize
    totalSize += sizeof(unsigned int);
    /// /UpdateTotalSize
    unsigned int value = A[pivot];
    A[pivot] = A[right];
    A[right] = value;

    /// UpdateTotalSize
    totalSize += sizeof(int);
    /// /UpdateTotalSize
    int store = left;

    for(int i = left; i < right; i++)
        if(A[i] < value)
        {
            // This variable does not count in the total size:
            // allocated, then deallocated, and so on...
            unsigned int tmp = A[i];
            A[i] = A[store];
            A[store] = tmp;
            store++;
        }

    /// UpdateTotalSize
    totalSize += sizeof(int);
    /// /UpdateTotalSize
    int tmp = A[store];
    A[store] = A[right];
    A[right] = tmp;
    return store;
}

void quick(unsigned int A[], int num, int left = -1, int right = -1)
{
    if(num <= 1)
        return;

    if(left <= -1)
        left = 0;
    if(right <= -1)
        right = right = num - 1;

    if(left >= right)
        return;

    /// UpdateTotalSize
    totalSize += sizeof(int);
    /// /UpdateTotalSize
    int pivot = (left + right) / 2;

    /// UpdateTotalSize
    totalSize += sizeof(int);
    /// /UpdateTotalSize
    int pivotNew = partition(A, num, left, right, pivot);

    quick(A, num, left, pivotNew - 1);
    quick(A, num, pivotNew + 1, right);
} 
```

请注意，这只是对总大小的*估计。*此外，对于这个例子，它可以在精神上完成。

*最后但同样重要的是：*当优化开启时，这个计数是不可靠的，所以只在没有优化的情况下使用它！

# c - 尝试增加数组时出现“需要左值”错误

> ID：13667191
> 
> 赞同：1
> 
> 时间：2012-12-02T07:09:38.133
> 
> 标签：c, arrays, lvalue

> **可能重复：**
> [数组名称是 C 中的指针吗？](https://stackoverflow.com/questions/1641957/is-array-name-a-pointer-in-c)

假设我有一个 char 数组，说 arr 和 arr 将代表第一个元素的地址，所以 arr++ 应该是完全合法的，那么为什么编译器会说“需要左值”。

另外，如果我这样做： arr=arr+1 那么为什么它是无效的转换。我只是将指针增加一。编译器告诉在 LHS 上操作数类型是 char[4] 但在 RHS 上它是 char *。

```
main()
{
char arr[]={'a','b','c','d'};
for(;arr!=arr+4;arr++) //lvalue required 
printf("%c",*arr);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T07:13:17.183

数组名不是可以赋值的变量。如果要修改它，则应使用指针变量：

```
char *arr_ptr = arr; 
```

然后你可以做`arr_ptr++`and `arr_ptr = arr_ptr+1`;

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T07:39:31.537

数组名称或任何数组类型的表达式都会隐式转换为指向数组第一个元素的指针，*除非*它是：

*   一元`&`（地址）表达式的操作数（产生整个数组的地址，而不是其第一个元素的地址——相同的内存地址，不同的类型）；或者
*   运算符的操作数`sizeof`（`sizeof arr`产生数组的大小，而不是指针的大小）；或者
*   运算符的操作数`_Alignof`（`_Alignof arr`产生数组的对齐方式，而不是指针的对齐方式）；或者
*   用于初始化数组对象的初始化程序中的字符串文字。

`_Alignof`是 C2011 中的新内容。

（转换通常被称为“衰减”。）

这些都不适用于这里，因此`arr++` *尝试*增加指针对象。问题是，没有指针*对象*，只有一个指针*值*。`arr`，在衰减为指针值后，不是左值，这意味着它不能出现在赋值的左侧或作为 的操作数`++`。

同样，给定：

```
int x; 
```

表达式`x`是左值，所以你可以写`x = 42;`——但表达式`(x + 1)`不是左值，所以你不能写`(x + 1) = 42;`. 您可以分配给，`x`因为它指的是一个*对象*。 `(x+1)`不引用对象，所以没有什么可以分配的。 `arr`，在它衰减之后，也不会引用一个对象（你有一个数组对象，但没有指针对象）。

（您的使用`arr != arr + 4`应该是一个线索；这永远不会是真的。）

而不是这样：

```
char arr[] = {'a', 'b', 'c', 'd'};
for (; arr != arr + 4; arr++) {
    printf("%c", *arr);
} 
```

你可以这样写：

```
char arr[] = {'a', 'b', 'c', 'd'};
char *ptr;
for (ptr = arr; ptr != arr + 4; ptr++) {
    printf("%c", &ptr);
} 
```

顺便说一句，在你的程序的顶部，你应该改变这个：

```
main() 
```

对此：

```
#include <stdio.h>
int main(void) 
```

另外，不要走路，跑到[comp.lang.c FAQ](http://www.c-faq.com)并阅读第 6 节，“数组和指针”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T07:12:22.140

数组不是指针。`arr`不代表地址。

# wordpress - 如何在 XAMPP 上设置现有的 Wordpress 项目

> ID：13667195
> 
> 赞同：0
> 
> 时间：2012-12-02T07:10:13.563
> 
> 标签：wordpress, git, github

我开始在 Github 上的现有 wordpress 项目上做一些工作。基本上，整个 Wordpress 安装都在 Github 上。我将它克隆到我的本地 XAMPP 安装中。配置所有内容的最佳方法是什么？我知道我必须制作一个配置文件并让 WP 与我的 MYSQL 数据库对话。我这样做了，虽然我的 wp-admin 工作正常，但前端的东西没有出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T07:22:08.327

在数据库中，您需要更新链接，使它们指向您的本地主机。

我这样做的方法是备份 sql 数据库，然后替换所有内容，例如：

原件：

```
www.domain.com/site/... 
```

和：

```
localhost/site/... 
```

然后恢复它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-01T10:35:14.600

在 2020 年，它是执行此操作的完美插件。它被称为复印机。您需要安装它，然后您有 4 个步骤来配置它将在哪台机器上运行。它真的很容易使用，请看这个链接：

[https://wordpress.org/plugins/duplicator/](https://wordpress.org/plugins/duplicator/)

# c - 堆栈内存中的变量顺序和内存寻址

> ID：13667202
> 
> 赞同：0
> 
> 时间：2012-12-02T07:11:14.807
> 
> 标签：c, gdb, stack

> **可能重复：**
> [堆栈上的局部变量分配顺序](https://stackoverflow.com/questions/1102049/order-of-local-variable-allocation-on-the-stack)

（x86_64 Linux 上的 C 程序）我试图了解变量分配给堆栈内存的方式。据我了解，堆栈帧中的变量向较低的内存地址移动。下面的程序显示了这一点。

```
int main() {
    int i = 6;
    char buffer[8];

    return 0;
} 
```

程序编译为：gcc -g prog.c

调试显示：

```
(gdb) x/x &i
0x7fffffffe04c: 0x00000006
(gdb) x/x buffer
0x7fffffffe040: (random data) 
```

字符数组的内存地址低于整数 i 变量。我的问题是，当声明的顺序如下所示颠倒时，整数变量 i 仍然位于大于字符数组的内存地址处？

```
int main() {
  char buffer[8];
  int i = 6;

  return 0;
}

(gdb) x/x &i
0x7fffffffe04c: 0x00000006
(gdb) x/x buffer
0x7fffffffe040: (random data) 
```

对于严格地说单个整数变量的排序，似乎不会出现此问题。如果交换整数声明的顺序，最早声明的将在堆栈帧中具有更高的内存地址。这里的问题是为什么字符数组会发生这种情况。[我已经在另一篇文章](https://stackoverflow.com/questions/1102049/order-of-local-variable-allocation-on-the-stack)中阅读了这个答案，但我想知道是否有人对此有明确的解释。

# php - 街道地址 php 的正则表达式

> ID：13667207
> 
> 赞同：1
> 
> 时间：2012-12-02T07:11:50.147
> 
> 标签：php, regex, expression

我正在尝试为街道地址编写正则表达式。示例：`124 Street`
我不太确定该怎么做。到目前为止，我有一些看起来像这样的东西 `^[0-9][a-zA-Z]$`。
但是，这是行不通的。任何帮助将不胜感激。
谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T07:15:37.517

`^[0-9][a-zA-Z]$`将匹配一个数字后跟一个字母。

如果要匹配任何仅由字母、数字、空格和句点组成的非空字符串，请使用

```
^[0-9a-zA-Z. ]+$ 
```

如果要匹配（一串数字和一个空格）可选，后跟一串字母和空格，那就是

```
^([0-9]+ )?[a-zA-Z ]+$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T07:39:43.590

也许这是一个更好的

```
`'^((Flat [1-9][0-9]*, )?([1-9][0-9]* ))?([A-Z][a-z]* )*([A-Z][a-z]*)$'` 
```

# php - PHP html_entity_decode 没有正确显示 HTML 文本

> ID：13667212
> 
> 赞同：0
> 
> 时间：2012-12-02T07:12:34.477
> 
> 标签：php, wordpress

我不确定我做错了什么，并且只是 PHP 的初学者，我不确定我的方法是否正确。我正在使用 TinyMCE 编辑器将一些文本存储在数据库中，并将在我的 WordPress 驱动站点的浏览器中显示此文本。

这是实际存储在数据库中的文本

```
&lt;strong&gt;Well we should think about how to see this editor&lt;/strong&gt;
&lt;ul&gt;
    &lt;li&gt;Its Good in nature&lt;/li&gt;
    &lt;li&gt;Well Matured&lt;/li&gt;
    &lt;li&gt;Easy to use.&lt;/li&gt;
&lt;/ul&gt;
&lt;strong&gt;&lt;span style=\&quot;color: #ff0000;\&quot;&gt;We should use this editor every now and than&lt;/span&gt;&lt;/strong&gt; &lt;span style=\&quot;color: #333333;\&quot;&gt;©&lt;/span&gt;

This is going to be a heading to test it
&lt;h1 style=\&quot;text-align: right;\&quot;&gt;&lt;/h1&gt; 
```

对于这样的编码文本，我很抱歉，我正在使用 PHP 的`html_entity_decode`方法将该文本发送回浏览器以显示。这是我的函数调用

```
html_entity_decode($event->Description,ENT_QUOTES,'UTF-8') 
```

## HTML 输出

```
<font color="#cc0000">'<strong>Well we should think about how to see this editor</strong>
 <ul> 
  <li>Its Good in nature</li> 
  <li>Well Matured</li> 
  <li>Easy to use.</li> 
  </ul>
  <strong>
  <span style=\"color: #ff0000;\">We should use this editor every now and than</span></strong> 
  <span style=\"color: #333333;\">©</span> 
  This is going to be a heading to test it 
  <h1 style=\"text-align: right;\"></h1>'</font> 
```

除了颜色信息外，一切似乎都已到位。颜色在生成的 HTML 输出中不起作用

任何人都可以帮助我了解我在哪里做错了似乎我没有正确解码它或者我缺少的其他一些东西是从我的 php 函数调用发送错误的 HTML

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:35:49.580

这可能是数据被编码以保存的方式：

```
htmlentities( addslashes($string) ); 
```

现在要获得准确的输出，您需要使用以下`stripslashes`功能删除斜线：

```
stripslashes( html_entity_decode($event->Description, ENT_QUOTES, 'UTF-8') ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T07:31:11.480

乍一看，我看到双引号在 HTML 代码中被转义。他们不应该。尝试删除反斜杠。像这样：

```
 <span style="color: #ff0000">We should use this editor every now and than</span></strong> 
  <span style="color: #333333">©</span> 
```

尝试`html_entity_decode()`使用`ENT_NOQUOTES`.

# php - 有 exit() 和没有头函数有什么区别？

> ID：13667213
> 
> 赞同：2
> 
> 时间：2012-12-02T07:12:42.583
> 
> 标签：php

> **可能重复：**
> [php - 我应该在调用 Location: header 后调用 exit() 吗？](https://stackoverflow.com/questions/3553698/php-should-i-call-exit-after-calling-location-header)

我不知道如何命名这个问题，但它就在这里。

下面的两个代码片段有什么区别：

script1 - 没有`exit()`：

```
if($var = true){
header('Location: anotherpage.php');
} 
```

script2 - 与`exit()`：

```
if($var = true){
header('Location: anotherpage.php');
exit();
} 
```

据我了解，`header()`如果条件为真，则退出当前页面并跳转到另一个页面，因此`exit()`之后`header()`是毫无意义的 - 我是对的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T07:16:54.083

该`header()`函数只是向浏览器发送一个标题以及页面的其余部分，告诉浏览器重定向。如果您不希望脚本继续运行，那么您应该执行`exit()`

> 在某些情况下，您也可能希望脚本继续运行，具体取决于脚本。您可能正在跟踪页面点击或其他内容，并且您可能将代码插入到每个页面底部包含的数据库中。如果您希望它在重定向之前跟踪命中，那么您不会想`exit`早点。

在大多数情况下，您确实想要这样做，`exit`因为在这种情况下您可能不想向浏览器输出任何内容，并且额外的代码只会减慢您的重定向速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T07:16:23.553

不，我假设`if ($var = true)`应该阅读`if ($var == true)`甚至只是`if ($var)`

该`header`函数将数据添加到 HTTP 标头。如果在上面的陈述之后你什么都没有`if`，那么两者都是一样的。但是，如果您在`if`语句之后有代码，该代码将被执行——这是您不希望发生的事情。

# jquery - 在asp.net mvc 3 razor中添加新项目后如何刷新表

> ID：13667223
> 
> 赞同：2
> 
> 时间：2012-12-02T07:14:43.820
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, razor

我是 asp.net mvc 的新手，并且在将新项目添加到表显示的项目列表后努力寻找刷新表的正确方法。

添加新项目控件与列表位于同一页面上。因此，当用户单击“添加”时，我想将其添加到数据库中并在下表中显示刷新的列表。虽然我让控制器将其添加到数据库中，但我无法刷新列表。您能否让我知道在这种情况下刷新表格的方法？

这是我的看法-

```
<table>
    <tr>
        <td>
            <input id="txtAddName" type="text" />
        </td>
        <td>
            <button id="btnAdd"  onclick="Add(); return false;">Add</button>
        </td>
    </tr>
</table>

<table width="100%">
    <tr>
        <th>Name</th>
    </tr>
    @foreach (var m in Model)
    {
        <tr>
            <td>
                <input id="txtName-@m.Id.ToString()" type="text" value="@m.Name.ToString()" />
            </td>
        </tr>
    }
</table>

function Add() {
        var _Name = $("#txtAddName").val();
        var url = '@Url.Action("Create", "Item")';
        $.post(
        url,
        {
            Name: _Name
        },
        function (data) {

        });
    } 
```

控制器 -

```
 [AcceptVerbs("POST")]
    public ActionResult Create(string name)
    {
        // Logic to add item goes here

        // What do I return here? I would want my table to now display the refreshed (including the new item)
    }

    [HttpGet]
    public ActionResult List()
    {
        // List is the action method that returns the initial list, both these are in the same controller
        return View(data);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T07:25:27.077

您必须更改**控制器**，如下所示**：**

```
 [AcceptVerbs("POST")]
    public ActionResult Create(string name)
    {
      // Logic to add item goes here

     // What do I return here? I would want my table to now display the refreshed (including the new item)

      return RedirectToAction("List");//redirect to List Action Method
    }

    [HttpGet]
    public ActionResult List()
    {
        // List is the action method that returns the initial list, both these are in the same controller
        return View(data);
    } 
```

***注意：***在上述**列表操作方法**中，您必须**从数据库中获取最新数据**并**发送回 View。**

**最新更新 ：**

在这里，我将给出如何显示**带有来自控制器的项目列表的表格**。

尝试在您的应用程序中使用这种视图来显示您的内容。

```
 <div class="boxedForm">
                    <table id="productDetails">
                        <tr>
                            <th>
                                Product Name
                            </th>
                            <th style="text-align: center;">
                                UPC Code
                            </th>
                        </tr>
                        @ foreach (var p in Model.ProductList)
                           {
                        <tr class="row">
                            <td>
                                @p.ProductName
                            </td>
                            <td>
                                @p.UpcCode
                            </td>
                        </tr>
                        }
                    </table>
            </div> 
```

***我的 ViewModel 就像***

```
public class ProductViewModel
    {
       public virtual ICollection<Product> ProductList { get; set; }
    } 
```

***我的模型就像***

```
public class Product
    {
        public Product() { Id = Guid.NewGuid(); Created = DateTime.Now; }
        public string ProductName { get; set; }
        public string UpcCode { get; set; }
    } 
```

**更新 2：**

***尝试使用您的 post 方法，如下所示：***

```
function Add() {
        var _Name = $("#txtAddName").val();
        var url = '@Url.Action("Create", "Item")';
        $.post(
        url,
        {
            Name: _Name
        },
        function (data) {
            var url = Sys.Url.route('YourRouteName', { action: "List", controller: "YourControllerName"});
            window.location = url;  
        });
    } 
```

# objective-c - 方法声明协议？

> ID：13667225
> 
> 赞同：1
> 
> 时间：2012-12-02T07:14:49.273
> 
> 标签：objective-c, ios, nimbus-ios

我开始使用 Nimbus 框架，我只是第一次遇到这种语法。看起来他们在方法声明中使用某种协议，然后在声明变量时使用。我只在类名之后看到头文件中使用的协议，所以这对我来说是全新的。

```
- (UIView<NIPagingScrollViewPage>*)pagingScrollView:(NIPagingScrollView *)pagingScrollView pageViewForIndex:(NSInteger)pageIndex { 
```

还：

```
UIView<NIPagingScrollViewPage>* pageView = nil; 
```

这到底是什么意思？他们为什么使用这种格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:16:16.207

该声明确保返回的 UIView 符合 NIPagingScrollViewPage 协议。如果该方法试图返回一个未声明为符合的对象，编译器将发出警告。

该语法的更常见用法是委托，因为您将允许任何符合协议的类成为委托，因此该语法用于确保该类符合协议。

```
-(void)setDelegate:(id<SampleDelegate>)del //Makes sure that del conforms to the protocol SampleDelegate, the compiler will emit a warning 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T07:25:44.007

这只是声明它正在确认该协议的方式。否则会显示警告。然后你必须使用id。

所以使用它总是一个好习惯`(datatype<protocol>*)variableName`

# c# - 如何将 VirtualKey 转换为 WinRT 中非美国键盘布局的字符？

> ID：13667233
> 
> 赞同：4
> 
> 时间：2012-12-02T07:16:46.690
> 
> 标签：c#, microsoft-metro, windows-runtime, windows-store-apps

在标准 .NET 中，存在 ToAscii/ToUnicode 和 MapVirtualKey 函数来处理此功能，尽管似乎尚未将等效函数或库引入 Metro/WinRT。如果 Metro/WinRT 中实际上没有公开的等效函数或库，那么这将使自定义文本输入框很难在美国以外的国家/地区推向市场。具体示例：在我的自定义控件中，如果法语键盘用户按下 è、ù、é 或 à 键，则无法将它们翻译成正确的字符。例如，è 使用 VirtualKey.Number7 的扫描码，据我所知，没有办法知道键盘布局，也没有简单的方法可以根据当前键盘布局翻译该扫描码。有没有人有这方面的一些信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-06T23:51:13.327

我想这取决于你在寻找什么。如果您正在寻找一个简单的英文字母或数字，您可以这样做：

```
private static char? ToChar(VirtualKey key, bool shift)
{
    // convert virtual key to char
    if (32 == (int)key)
        return ' ';

    VirtualKey search;

    // look for simple letter
    foreach (var letter in "ABCDEFGHIJKLMNOPQRSTUVWXYZ")
    {
        if (Enum.TryParse<VirtualKey>(letter.ToString(), out search) && search.Equals(key))
            return (shift) ? letter : letter.ToString().ToLower()[0];
    }

    // look for simple number
    foreach (var number in "1234567890")
    {
        if (Enum.TryParse<VirtualKey>("Number" + number.ToString(), out search) && search.Equals(key))
            return number;
    }

    // not found
    return null;
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-31T16:09:03.903

对于 WinRT（以 TextBox 为例，仅选择 Letters）：

```
 CoreWindow.GetForCurrentThread().CharacterReceived += TextBox_CharacterReceived;
 void TextBox_CharacterReceived(CoreWindow sender, CharacterReceivedEventArgs args)
    {
        char c = Convert.ToChar(args.KeyCode);
        if (char.IsLetter(c))
        {
           ...
        }
    } 
```

对于取消 de char 条目：

```
TextBox textBoxData;

void TextBox_KeyDown(object sender, KeyRoutedEventArgs e)
    {
        textBoxData = sender as TextBox;
        if (e.Key!=VirtualKey.Space)
        e.Handled = true;
    } 
```

可选的：

```
void TextBox_Paste(object sender, TextControlPasteEventArgs e)
   {
       e.Handled = true;
   } 
```

并修改 CharacterReceived：

```
if (char.IsLetter(c))
   {
     textBoxData.Text += c;
     textBoxData.SelectionStart = textBoxData.Text.Length;
    } 
```

警告！如果您的 TextBox 有 MaxLength 您必须修改您的代码：

```
if (char.IsLetter(c) && textBoxData.Text.Length < textBoxData.MaxLength) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T08:46:54.707

您可以使用 Win32 API 函数 MapVirtualKey 将虚拟键映射到一组值，其中一个是字符值。MapVirtualKey 似乎使用当前设置的键盘布局（未记录）。要使用指定的布局，您可以使用 MapVirtualKeyEx。

MapVirtualKey 不考虑是否按下 Shift。要在按下 Shift 时轻松获取信息，您可以使用 GetKeyState（不幸的是，WinRT 团队无法轻松获取修饰键的状态）。

以下是如何将虚拟键转换为字符的示例：

```
[DllImport("user32.dll")]
private static extern uint MapVirtualKey(uint uCode, uint uMapType);

[DllImport("user32.dll")]
private static extern short GetKeyState(uint nVirtKey);

private const uint MAPVK_VK_TO_CHAR = 0x02;

private const uint VK_SHIFT = 0x10;

private char TranslateVirtualKeyIntoChar(VirtualKey key)
{
   char c = (char)MapVirtualKey((uint)key, MAPVK_VK_TO_CHAR);
   short shiftState = GetKeyState(VK_SHIFT);
   if (shiftState < 0)
   {
      // Shift is pressed
      c = char.ToUpper(c);
   }
   return c;
} 
```

**更新**

不幸的是，此解决方案不适用于必须经过认证的 Windows 应用商店应用程序。认证失败，因为使用了 MapVirtualKey 和 GetKeyState 不受支持的 API。这也意味着这个解决方案很可能不会在 WinRT 下运行。

# python - 更改序列 Python 中迭代的起始值

> ID：13667237
> 
> 赞同：0
> 
> 时间：2012-12-02T07:17:19.607
> 
> 标签：python, function, recursion, iteration, return-value

```
fibs = {0: 0, 1: 1}
def fib(n):
    if n in fibs: return fibs[n]
    if n % 2 == 0:
        fibs[n] = ((2 * fib((n / 2) - 1)) + fib(n / 2)) * fib(n / 2)
        return fibs[n]
    else:
        fibs[n] = (fib((n - 1) / 2) ** 2) + (fib((n+1) / 2) ** 2)
        return fibs[n]

def test(n):
    count = range(0,n)
    seq = []
    for i in count:
        seq.append(fib(i))
    return seq

print test(10)

[0, 1, 1, 2, 3, 5, 8, 13, 21, 34] 
```

如何使它从 1 而不是 0 开始所以结果是

```
[1, 2, 3, 5, 8, 13, 21, 34, 55, 89] 
```

我尝试将 fibs 更改为 {1:1,2:2} 但它没有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:25:15.083

您可以将 count = range(0, n) 替换为 count = range(2, n+2) 以获得预期的输出。–

通过

尼古拉斯

```
def test(n):
    count = range(2,n+2)
    seq = []
    for i in count:
        seq.append(fib(i))
    return seq 
```

谢谢你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T07:27:16.997

你可以做这两件事。假设您的结果存储在 fibonacciNumbers 中。一种选择是对列表进行切片：

```
fibonacciNumbers[2:] 
```

第二个选项是简单地从 fibonacciNumbers 中弹出第一个元素。

```
for i in range(2):
    fibonacciNumbers.pop(0) 
```

# php - 将所有 $_POST[] 值发送到“下一页”。

> ID：13667240
> 
> 赞同：1
> 
> 时间：2012-12-02T07:17:28.657
> 
> 标签：php, html, forms, post, input

假设我在这里使用表单方法 POST 有很多值

```
$_POST["value1"]
$_POST["value2"]
$_POST["value3"]
$_POST["value4"]
$_POST["value5"]
$_POST["value6"]
$_POST["value7"] 
```

**我想将它们发送到 nextpage.php**

有什么功能可以做到这一点？除了使用

```
<form method="POST" action="nextpage.php">
<input type="hidden" name="value1"  value="value1 />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T07:25:10.560

存储所有值`$_SESSION`并在下一页中使用它，或者您可以使用这些值创建**URL并将您的页面重定向到**`nextpage.php`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T07:43:12.623

## 无会话通过

如果没有安全问题并且您的帖子数据包含搜索参数之类的内容。例如`$_POST`有

```
array('query'=>'keyword', 'orderby' => 'name', 'range' => '4-10' ) 
```

[您可以使用http_build_query](http://us.php.net/manual/en/function.http-build-query.php)从该数据生成查询字符串，并创建锚标记供用户单击并将该数据与 url 一起传递到下一页。

```
$url = 'nextpage.php?' . http_build_query($_POST); 
```

它会生成一个 url `nextpage.php?query=keyword&orderby=name&range=4-10`，你可以在 html 锚标记中使用，在下一页你可以从 $_GET 获取它。

## 使用会话

或者，您已经可以选择将其存储在其中`$_SESSION`以及在使用 destroy 之后`session`以保持您的站点性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T07:21:58.310

您可以使用`Session`或`cookie`访问其他页面

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T12:28:23.047

要将帖子值传递到下一页，请将完整的 $_POST 超全局数组变量存储到**会话中**，然后在下一页上，您可以使用**$_SESSION**变量访问这些值

或者，您可以使用**curl**使用 POST 方法将 HTTP 请求发送到下一页 然后可以使用下一页上的 $_POST 变量访问这些变量

请参考下面提到的代码片段作为通过 curl 使用 post 方法发送 HTTP 请求的示例

```
 $url='http://203.114.240.77/paynetz/epi/fts';
 $data = array('login' => '11','pass' => 'Test@123','ttype'  =>'NBFundTransfer','prodid'=>'NSE','amt'=>50,'txncurr'=>'INR','txnscamt'=>0,'clientcode'=>007,'txnid'=>uniqid(),'date'=>date('d/m/Y H:i:s'),'custacc'=>'123456789');
      $datastring = http_build_query($data);
     //die($url.'?'.$datastring);
      $ch=curl_init();
     curl_setopt($ch, CURLOPT_URL, $url);
     curl_setopt($ch, CURLOPT_TIMEOUT, 180);
     curl_setopt($ch, CURLOPT_HEADER, 0);
     curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
     curl_setopt($ch, CURLOPT_POST, 1);
     curl_setopt($ch, CURLOPT_POSTFIELDS, $datastring);
     $output = curl_exec($ch);
      //echo $output; die;
    curl_close($ch); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T07:25:51.777

使用此代码。

```
<!DOCTYPE HTML>
<html>
<head>
<title>First page</title>
</head>
<body onload="document.getElementById('send').submit()">

<form id="send" action="next_page.php" style="display: none;">
<?PHP
foreach($_POST as $key => $val)
{
    echo '<input type="hidden" name="'.$key.'" value="'.$val.'" />';
}
?>
</form>

</body>
</html> 
```

# c# - 使用 microsoft excel 对象库将 DataGridView 导出到 excel 是否适用于所有 Windows 计算机？

> ID：13667241
> 
> 赞同：0
> 
> 时间：2012-12-02T07:18:30.607
> 
> 标签：c#, datagridview, export-to-excel

我在 c# 中有一个 datagridview，我正在尝试导出到 excel。我正在关注本教程[http://www.c-sharpcorner.com/uploadfile/hrojasara/export-datagridview-to-excel-in-C-Sharp/](http://www.c-sharpcorner.com/uploadfile/hrojasara/export-datagridview-to-excel-in-C-Sharp/)我遇到了一些麻烦。首先，我什至无法构建它，因为我遇到了所有这些错误（使用与该网站上相同的代码）。

```
Warning 3   Task attempted to find "AxImp.exe" in two locations. 1) Under the "C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\NETFX 4.0 Tools\" processor specific directory which is generated based on SdkToolsPath 2) The x86 specific directory under "C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\NETFX 4.0 Tools\" which is specified by the SDKToolsPath property. You may be able to solve the problem by doing one of the following:  1) Set the "SDKToolsPath" property to the location of the Microsoft Windows SDK.    MathMunchers
Warning 4   Task could not find "AxImp.exe" using the SdkToolsPath "C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\NETFX 4.0 Tools\" or the registry key "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SDKs\Windows\v8.0A\WinSDK-NetFx40Tools-x86". Make sure the SdkToolsPath is set and the tool exists in the correct processor specific location under the SdkToolsPath and that the Microsoft Windows SDK is installed MathMunchers
Warning 5   The referenced component 'Microsoft.Office.Interop.Excel' could not be found.   
Warning 6   The referenced component 'Microsoft.Office.Core' could not be found.    
Warning 7   The referenced component 'VBIDE' could not be found. 
```

阅读这些错误似乎我需要在我的计算机上安装一些某些东西，所以我想知道这是否是编写这个的好方法，因为我希望这个应用程序能够在任何 Windows 7 机器上导出安装了excel。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T07:33:15.197

这仅适用于安装了 Excel 或安装了 Excel 库的操作系统。您需要考虑未安装 Excel 的替代方案！

# c# - WebClient 不支持并发 I/O 操作

> ID：13667245
> 
> 赞同：0
> 
> 时间：2012-12-02T07:19:14.587
> 
> 标签：c#, .net, io

我做了@Enigmativity 在这里写的：

```
 Action<int, ProgressBar, Label, Label, int, Button> downloadFileAsync = (i, pb, label2, label1, ServID, button1) =>
    {
        var bd = AppDomain.CurrentDomain.BaseDirectory;
        var fn = bd + "/" + i + ".7z";
        var down = new WebClient();
        DownloadProgressChangedEventHandler dpc = (s, e) =>
        {
            label1.Text = "Download Update: " + i + " From: " + ServID;
            int rec =Convert.ToInt16(e.BytesReceived / 1024);
            int total =Convert.ToInt16(e.TotalBytesToReceive / 1024)  ;
            label2.Text = "Downloaded: " + rec.ToString() + " / " + total.ToString() + " KB";
            pb.Value = e.ProgressPercentage;
        };
        AsyncCompletedEventHandler dfc = null;  dfc = (s, e) =>
        {
            down.DownloadProgressChanged -= dpc;
            down.DownloadFileCompleted -= dfc;
            CompressionEngine.Current.Decoder.DecodeIntoDirectory(AppDomain.CurrentDomain.BaseDirectory + "/" + i + ".7z", AppDomain.CurrentDomain.BaseDirectory);
            File.Delete(fn);
               if (i == ServID)
                {

                   button1.Enabled = true;
                   label1.Text = "Game Is Up-To-Date.Have Fun!!";
                  label2.Text = "Done..";
               }
         down.Dispose();
        }; 
```

我现在唯一的问题是程序正在解压下载的文件时

```
CompressionEngine.Current.Decoder.DecodeIntoDirectory(AppDomain.CurrentDomain.BaseDirectory + "/" + i + ".7z", AppDomain.CurrentDomain.BaseDirectory); 
```

在某些文件中，提取下载的文件需要时间，所以我如何告诉程序等到解压缩完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T08:33:01.567

尝试定义一个 lambda 来封装单个异步下载，然后在循环中调用它。

这是lambda：

```
Action<int> downloadFileAsync = i =>
{
    var bd = AppDomain.CurrentDomain.BaseDirectory;
    var fn = bd + "/" + i + ".7z";
    var wc = new WebClient();
    DownloadProgressChangedEventHandler dpc = (s, e) =>
    {
        progressBar1.Value = e.ProgressPercentage;
    };
    AsyncCompletedEventHandler dfc = null;
    dfc = (s, e) =>
    {
        wc.DownloadProgressChanged -= dpc;
        wc.DownloadFileCompleted -= dfc;
        CompressionEngine.Current.Decoder.DecodeIntoDirectory(fn, bd);
        File.Delete(fn);
        wc.Dispose();
    };
    wc.DownloadProgressChanged += dpc;
    wc.DownloadFileCompleted += dfc;
    wc.DownloadFileAsync(new Uri(Dlpath + i + "/" + i + ".7z"), fn);
}; 
```

您会注意到它很好地分离了所有事件并正确处理了`WebClient`实例。

现在这样称呼它：

```
while (i <= ServID)
{
    downloadFileAsync(i);
    i++;
} 
```

您必须调整进度条更新才能正确显示所有文件下载的进度，但原则上这应该适合您。

# perforce - P4Sandbox 配置错误 - “用户太多”

> ID：13667252
> 
> 赞同：0
> 
> 时间：2012-12-02T07:21:12.780
> 
> 标签：perforce

我很久以前在我的笔记本电脑上配置了一个 p4sandbox。这不会映射整个仓库。我最近在我的沙箱中添加了一个新项目，我想将它推送回我服务器上的主库。

在仪表板中，我选择将更改复制到镜像中，但是当我提交时，出现以下错误：

> 提交验证失败 - 修复问题然后使用“p4 submit -c 83”。'trigger-00' 验证失败：来自中央服务器 xxxx:1666 file.sln 的消息 - 文件不在客户端视图中。向中央服务器提交更改失败；提交被中止

所以我的下一步是去编辑工作区设置（因为它似乎在抱怨）但是由于流，我似乎无法在不编辑流路径映射的情况下编辑工作区。所以我去配置p4sandbox，并选择我的沙箱。

这在我的桌面上运行良好，但我的笔记本电脑抱怨弹出“错误 - 用户太多”。

我的问题是（a）我是否真的在做正确的事情将我的文件放入仓库（b）有人看到这个 p4sandbox 错误吗？谷歌搜索似乎没有出现消息。

谢谢

# java - Android 线程和消息传递

> ID：13667256
> 
> 赞同：0
> 
> 时间：2012-12-02T07:21:55.987
> 
> 标签：java, android, multithreading, handler, looper

我正在开发一个使用后台工作线程的 Android 应用程序。我需要能够从活动向线程发送消息，但我不太明白。

我有一个活动，一个线程在后台工作。我想启动线程并能够在需要时向它发送消息（参数、对象等）。我已经掌握了从线程向活动发送消息（通过将活动的处理程序传递给线程，并使用它来发送消息），但是每当我尝试从活动向线程发送消息时，应用程序就会崩溃。

我已经尝试遵循我在网上找到的 10-12 个很好的教程，所有这些教程似乎都有不同的做事方式，但我仍然没有让它正常工作。有人可以指出我正确的方向吗？

一个简单的活动示例：

```
import android.os.Bundle;
import android.app.Activity;

public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savesInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    private void doWork() {
        Worker worker = new Worker();
        worker.start();

        worker.handler.sendEmptyMessage(0);
    }
} 
```

一个简单的线程示例：

```
import android.os.Handler;
import android.os.Looper;
import android.os.Message;
import android.util.Log;

public class Worker extends Thread {
    public Handler handler;

    public void run() {
        Looper.prepare();

        handler = new Handler() {
            public void handleMessage(Message msg) {
                Log.d("Worker.run()", "Got message saying " + msg.what);
            }
        };

        Looper.loop();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:01:12.470

你必须阅读如何使用，并且 for 是 Looper 首先不要忘记在最后停止 Looper Goodluck

```
public class Worker extends Thread {
    public Handler handler;
@Override
public run() {
    Looper.prepare();
//initialization will take a little time you if you want to send message check if handler  != null
    handler = new Handler() {
        public void handleMessage(Message msg) {
            Log.d("Worker.run()", "Got message saying " + msg.what);
        }
    };

    Looper.loop();
}

public void sendMessage(Message m)
{ 
    while(handler == null);
    handler.sendMessages(m); 
} 
```

# python - 等价于 Python 中的 Lambda 表达式

> ID：13667262
> 
> 赞同：3
> 
> 时间：2012-12-02T07:22:35.700
> 
> 标签：python, lambda, functional-programming

我执行的一个常见操作是将字母列表连接到单词（字符串）列表中。

我通常使用列表理解：

```
lists_of_letters = [["m", "y"], ["d", "o", "g"], ["s", "k", "i", "p"]]
list_of_words = ["".join(a_list_of_letters) for a_list_of_letters in lists_of_letters]
# list_of_words == ["my", "dog", "skip"] 
```

或者有时功能更强大：

```
list_of_words = map(lambda x: "".join(x), lists_of_letters) 
```

我想知道是否有比使用 lambda 表达式更好的方法来编写 map 调用所需的函数。我正在尝试学习[operator](http://docs.python.org/3/library/operator.html)和[functools](http://docs.python.org/3/library/functools.html)来扩展我的 python 函数式编程能力，但在这种情况下我似乎找不到使用它们的明确方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T07:28:14.113

在这种情况下，您实际上可以说`map(''.join, lists_of_letters)`：

```
In [1]: lists_of_letters = [["m", "y"], ["d", "o", "g"], ["s", "k", "i", "p"]]
In [2]: map(''.join, lists_of_letters)
Out[2]: ['my', 'dog', 'skip'] 
```

因为`''.join`它本身就是一个接受单个参数的函数（空字符串上的绑定方法）：

```
In [3]: ''.join
Out[3]: <built-in method join of str object at 0x100258620> 
```

也就是说，在这里它*本身*可能并没有更好，因为它的可读性有点差 IMO

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T07:27:36.703

您在这里不需要 lambda 函数：

```
In [26]: map("".join, lists_of_letters)
Out[26]: ['my', 'dog', 'skip'] 
```

# php - CI Spark Ion_auth & phpactiverecord

> ID：13667263
> 
> 赞同：0
> 
> 时间：2012-12-02T07:23:01.570
> 
> 标签：php, codeigniter, phpactiverecord, ion-auth

在任何事情之前，请理解我是一个完整的 codeigniter 菜鸟，并且只知道足够的 php 来获得通过。但是如果解释得很好，那就很好理解了。

我正在构建一个 Web 应用程序，安装 sparks，然后 ion_auth 已启动并正常运行。

用户可以注册，yada yada yada。

现在我正在尝试创建我的第一个模型，即“项目”。

这就是我迷路的地方...

这是我的项目模型，我想使用 php-activerecord 并在我的用户和项目之间建立关系。

```
class Project extends ActiveRecord\Model {

    public function __construct() {
        parent::__construct();
        $this->load->database();
    }

    static $belongs_to = array(
        array('user')
    );

    public function projects() {}
} 
```

由于 Ion_Auth 是一个火花并坐在

```
-sparks
--ion_auth
---2.3.2
----models
-----ion_auth_model.php 
```

这是该类顶部的代码

```
class Ion_auth_model extends CI_Model { 
```

但是当我将 'extends CI_Model' 更改为 'extends Activerecord\model' 时，一切都会中断。

如何让这个工作，以便我可以在适当的模型中使用 $has_many 和 $belongs_to？

已经在这上面呆了几个小时了，它终于开始接触到我了。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T09:14:37.383

根据 Codeigniter 的模型[文档](http://ellislab.com/codeigniter/user-guide/general/models.html)，您的模型应该扩展 CI_Model，在模型中加载活动记录`$this->load->database();`或添加自动加载并像使用它一样 `$this->db->query('select * from tablename');`

# c - 指向接收不需要的垃圾值的单独函数中的数组的指针

> ID：13667267
> 
> 赞同：1
> 
> 时间：2012-12-02T07:23:44.673
> 
> 标签：c, arrays, pointers

我有一个函数，我将一个数组传递给我的主函数，并将一个 int 传递给我的主函数。我正在对这个新函数中的数组进行操作，我们称之为 foo。在 foo 中，我用 0 初始化另一个包含 52 个单元格的数组。我对从 main 传递的数组执行操作，并将该数据传输到新初始化的数组。我想将新数组返回给主函数。但当然，我不能返回像数组这样的数据结构。所以我改为返回一个指向该数组的 int 指针。在 int main 内部，我传递指针以使其指向数组中的各个单元格。当我打印指针指向的结果时，它应该指向 0 或大于 0 的整数。但是，我得到的结果不一致。出于某种原因，一些应该为 0 的值会打印出垃圾数据。我' 一段时间以来一直试图发现这个错误，但我只是想看看它。无论如何，这只是这部分代码的一般想法......

```
int main(){
    int *retPtr;
    char input[] = "abaecedg";
    retPtr = foo(input, size);
    for(i=0; i<52; i++){
        // error displayed here
        printf("%d\n", *(retPr + i));
    }
}

int foo(char input[], int size)
{
    int arr[52] = {0};      // should initialize all 52 cells with 0.
    int i=0, value;         // looking for non-zero results in the end.        
    int *ptr = &arr[0];                        
    for(i=0; i<size; i++){
        if(arr[i] > 64 && arr[i] < 91){
            value = input[i] - 65;
            arr[value]++;
        }
    }
    return ptr;
} 
```

希望这对我正在尝试做的事情有意义。在 foo 函数中，我试图找到某些字母的频率。我知道这可能有点神秘，但是代码很长，带有注释和所有内容，所以我想让它尽可能简洁。有什么可能的原因让我得到一些（数字> 0、0）的正确值和另一个垃圾值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T07:27:00.697

你得到垃圾的原因是创建的数组`foo`是在 foos 堆栈帧中分配的，然后你返回一个指向该帧的指针。返回时丢弃该帧`foo`。

如果您希望它在`foo`返回后保留，您应该在堆上分配数组（使用 malloc 和朋友）。`free()`完成数组后不要忘记它。

```
int main(){
    char input[] = "abaecedg";
    int retPtr[] = foo(input, size); //An array and a pointer is the same thing
    ...
    free(retPtr);
}

int *foo(char input[], int size)
{
    int arr[] = calloc(52*sizeof(int); // should initialize all 52 cells with 0.
    ...
    arr[value]++;
    ...
    return arr;
} 
```

* * *

另一种方法是让`foo`数组作为参数并使用它，以这种方式：

```
int main(){
    int ret[52] = {0};
    ...
    foo(input, size, ret);
    ...
}

void foo(char input[], int size, int *arr)
{
    ...
    arr[value]++;
    ...
    return; //Don't return anything, you have changed the array in-place
} 
```

之所以可行，是因为数组*与指针完全相同*，因此您实际上是通过引用将数组传递到`foo`. `arr`将指向同一个地方`ret`，进入堆栈帧`main`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T07:35:24.227

在函数`foo`中，数组`arr`是一个本地数组，即分配在栈上。您不能返回任何分配在堆栈上的数据指针，因为从函数返回后堆栈会回退，并且不再需要保证其内容。

如果你想返回一个数组，你应该在堆上分配它`malloc`，例如，并返回返回的指针`malloc`。但是您将不得不`free`在程序中的某个地方保留该内存。如果您未能释放它，您将遇到所谓的“内存泄漏”，这可能会或可能不会崩溃/干扰该程序再次运行，具体取决于您的环境。一个不干净的情况，这是肯定的。

这就是为什么我认为 C 对于函数式编程习惯用法不太好，例如从函数返回东西（除非它们是原始类型）。我将通过将另一个数组传递给 foo 来实现您尝试做的事情 - 一个输出数组，伴随着一个大小变量，并填充该数组。

或者，您可以将数组包装在一个结构中并返回该结构。结构可以按值返回，在这种情况下，它们通过堆栈复制到调用函数的返回值。

# java - 数组程序

> ID：13667276
> 
> 赞同：2
> 
> 时间：2012-12-02T07:25:15.943
> 
> 标签：java, arrays

有人可以帮帮我吗。我很难修复我的代码逻辑。这个程序应该计算用户输入的数字的平均值，假设数组的大小设置为 100，如果用户输入 -99，程序将被终止我知道问题出在 while 循环处理中

```
 Scanner input = new Scanner(System.in);

    int[] num = new int[100];

    int ctr=0, sum=0, ave = 0;

    while(num[ctr]!= -99)
    {
        System.out.print("Enter number: ");
        num[ctr]= input.nextInt();

        sum += num[ctr];

        ctr++;

    }

    System.out.print("Numbers are " );

    for(int x = 0; x<ctr; x++)
    {
        System.out.print(num[x] + " ");
    }

    ave = sum / (ctr-1);
    System.out.println("Average is " + ave);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T07:27:59.310

当数组被填充时，您的 while 循环没有终止条件。（当输入了 100 个整数，并且 ctr 等于 100。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T07:31:51.653

循环的问题`while`在于它从不查看刚刚输入的元素。它总是查看紧随其后的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T07:33:43.437

您应该在 while循环*之外*读取第一个输入。`while`因为当用户输入时`-99`，在循环内你会增加`ctr`，所以检查将在错误的数字上。所以实际上你永远不会检查你想要检查的当前号码。

```
int ctr=0, sum=0, ave = 0;
System.out.print("Enter number: ");
num[ctr]= input.nextInt();
while(num[ctr]!= -99)
{
   sum += num[ctr];
   ctr++;
   System.out.print("Enter number: ");
   num[ctr]= input.nextInt();
} 
```

但是你需要处理用户只输入一个数字的情况，在这种情况下你被零除，你得到的平均值是错误的。你还应该这样做：

```
ave = sum / (ctr); 
```

代替：

```
ave = sum / (ctr-1); 
```

现在你会得到很好的结果。

# c# - c# - 如何在浏览器中启动网站并在该浏览器中插入 javascript？

> ID：13667278
> 
> 赞同：0
> 
> 时间：2012-12-02T07:25:30.480
> 
> 标签：c#, javascript, html

如何在 c# 中启动一个网站，并在其中插入 javascript？

基本上我正在做的是，我创建了一个带有与网站中的文本字段匹配的文本字段的 Windows 表单应用程序，并且在填写表单应用程序中的字段后，它需要在浏览器中打开该站点（使用具有文本字段中的值），然后在 DOM 中插入一些 javascript，然后将这些值添加到文本字段中，然后调用提交按钮的单击命令。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:32:08.333

欧米茄，

您正在寻找 Web 浏览器自动化，请参见下文：
[网站测试 - 自动化、自动填充等 (C# WinForms)](http://www.keylimetie.com/Blog/2006/3/9/WebsiteTesting/)
[使用 C# 的 Microsoft Web 浏览器自动化](http://www.codeproject.com/Articles/5452/Microsoft-Web-Browser-Automation-using-C)

另请查看此库是否对您有帮助：
[http](http://seleniumhq.org) ://seleniumhq.org [从未亲自使用过]

但我不知道为什么要注入 JavaScript ... Windows 窗体，您可以使用它！

我希望这有帮助

# web-scraping - lxml - 在杂乱的 php 中抓取文本

> ID：13667280
> 
> 赞同：0
> 
> 时间：2012-12-02T07:25:40.310
> 
> 标签：web-scraping, lxml

我正在重写一个最初用 php 编码的写得很糟糕的网站。

我正在尝试隔离 ap 标签中的文本，并且想知道如何仅获取文本部分。有任何想法吗？

```
<p>
<span lang="EN-IE" xml:lang="EN-IE">

<br>
TEXT SAMPLE 1
<br>
<br>
TEXT SAMPLE 2

<span lang="EN-IE" xml:lang="EN-IE">TEXT SAMPLE 3
</span>,

<span lang="EN-IE" xml:lang="EN-IE">&nbsp;TEXT SAMPLE 4
</span>&nbsp;TEXT SAMPLE 5

<span lang="EN-IE" xml:lang="EN-IE">.&nbsp;</span>

</span><span lang="EN-IE" xml:lang="EN-IE">

<br>
<br>

TEXT SAMPLE 6
</span>

<span lang="EN-IE" xml:lang="EN-IE">&nbsp;</span>

TEXT SAMPLE 7 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:52:30.747

[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)是一个很好的起点。特别是[get_text](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#get-text)函数。

这将输出上面片段中的所有文本：

```
from bs4 import BeautifulSoup

CONTENT = """
<p>
<span lang="EN-IE" xml:lang="EN-IE">

<br>
TEXT SAMPLE 1
<br>
<br>
TEXT SAMPLE 2

<span lang="EN-IE" xml:lang="EN-IE">TEXT SAMPLE 3
</span>,

<span lang="EN-IE" xml:lang="EN-IE">&nbsp;TEXT SAMPLE 4
</span>&nbsp;TEXT SAMPLE 5

<span lang="EN-IE" xml:lang="EN-IE">.&nbsp;</span>

</span><span lang="EN-IE" xml:lang="EN-IE">

<br>
<br>

TEXT SAMPLE 6
</span>

<span lang="EN-IE" xml:lang="EN-IE">&nbsp;</span>

TEXT SAMPLE 7
"""

if __name__ == '__main__':
    soup = BeautifulSoup(CONTENT)
    print soup.get_text() 
```

输出可能需要一些字符串操作，因为有许多新行，但这会去掉 HTML。

# jquery-ui - JQueryUI Draggable - 设置 Containment [x1,x2] 值的问题

> ID：13667283
> 
> 赞同：0
> 
> 时间：2012-12-02T07:25:52.557
> 
> 标签：jquery-ui, draggable, containment

使用 [x1,y1,x2,y2] 格式时，我无法设置 jqueryUI 可拖动函数的包含值。这是js：

```
<script type="text/javascript">
    //slideTest.js
    $(document).ready(function(){
        $('.slideMin').each(function(){
            $(this).draggable({
                containment: [$(this).parent().offset().left,$(this).parent().offset().top,$(this).next('div').offset().left,$(this).parent().offset().top]
            });
        });
</script> 
```

以及脚本与之交互的 html：

```
<div class="slideBar">
    <div class="slideMin"></div>
    <div class="slideMax"></div>
</div> 
```

我正在尝试根据下一个 div 的 offset().left 设置拖动包含（slideMin div），在本例中为（slideMax）。

换句话说，我希望可拖动行为在到达下一个 (slideMax) div 的左侧时停止（对于 slideMin div）。

x1 似乎正在工作，因为拖动停止在定义的位置，但是，它重叠并延伸到下一个 div 之外，这是我不希望发生的。我设置 x2 值的方式一定有问题，但我不确定它是什么。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T19:46:42.127

想通了...我有两个 div，都是可拖动的。第一个 div 在到达下一个 div 时停止。上面的代码实现了这一点，直到我要拖动任一 div：一旦拖动任一 div，另一个 div 的可拖动范围不会更新，因此，我收到了可拖动范围与另一个 div 重叠的错误。为了解决这个问题，我必须重新启动并在可拖动函数中为正在移动的 div 设置另一个 div 的可拖动范围。

新代码如下所示：

```
$(this).draggable({
    containment: [$(this).position().left, $(this).position().top, $(this).next().position().left - $(this).width()+4, $(this).position().top],
    drag: function(e){
        $(this).next().draggable({
            containment: [parseFloat($(this).position().left) + parseFloat($(this).width())-4, $(this).next().position().top, parseFloat($(this).parent().position().left) + parseFloat($(this).parent().width())-3, $(this).next().position().top]
        });
    }
});
$(this).draggable({
    containment: [parseFloat($(this).prev().position().left) + parseFloat($(this).prev().width())-4, $(this).position().top, $(this).position().left, $(this).position().top],
    drag: function(e){
        $(this).prev().draggable({
            containment: [$(this).parent().offset().left-$(this).prev().width()+5, $(this).prev().position().top, $(this).position().left - $(this).prev().width()+4, $(this).prev().position().top]
        });
    }
}); 
```

PS，数字-3 -4 +5等是为我的可拖动div（4px手柄）上的手柄添加间距，如果您没有手柄，则不需要额外的-3 -4 +5部分的代码。

# zsh - 如何将函数/变量保留在我的 zshrc 本地？

> ID：13667284
> 
> 赞同：39
> 
> 时间：2012-12-02T07:25:56.347
> 
> 标签：zsh, zshrc

我在其中声明的任何变量`zshrc`都可以在 shell 中作为环境变量使用。我不希望这种情况发生。

我尝试将变量放在函数中并将它们设置为本地，但随后该函数在`zshrc`.

我怎样才能使*我的 zshrc 中发生的事情留在我的 zshrc 中*？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-02T15:35:20.603

如果您使用的是最新版本的 zsh，则可以使用匿名函数：

```
function () {
  local xyz=abc
  # whatever
} 
```

该函数将被自动执行，然后被丢弃，它仅用于范围界定目的。

这适用于任何源*文件*，不仅是 zshrc。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-12-02T11:27:03.863

它们可用，但不会导出，因此从命令行启动的脚本不会获取这些变量。如果你`.zshrc`看起来像

```
function zshrc()
{
    local VAR=1
    # Do stuff
}
zshrc 
```

然后你就再也不想启动`zshrc`功能了，你可以这样做

```
unfunction zshrc 
```

然后。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-02-07T03:34:42.757

如果您不将单词附加`local`到变量中，它将一直保留到您执行以下操作之一：

1.  打开一个新的终端窗口。
2.  运行`exec zsh`或`exec bash`取决于您的外壳。这只是清除了未分配单词的局部变量`local`。

### 避免这种情况

```
method_name(){
  a=11
  echo $a
} 
```

### 正确的例子

```
method_name(){
  local a=11
  echo $a
} 
```

此变量的范围为函数名称`method_name`，并且仅在调用时（而不是之后）在函数内部可用。

### 如果您想直接访问该局部变量，您可以这样设置

`local z=11`

### 并这样称呼它

`echo $z`

# 此外，环境变量与局部变量不同

根据您的 shell 和需要，您可以使用`.bash_profile`or`.bashrc`或`.zshrc`等来存储函数和别名。

[查看此参考以获取有关环境变量及其各自 shell 的更多信息](https://unix.stackexchange.com/questions/117467/how-to-permanently-set-environmental-variables)

[另请阅读本文以了解如何使用 shell 扩展在命令行上设置环境变量](https://unix.stackexchange.com/questions/56444/how-do-i-set-an-environment-variable-on-the-command-line-and-have-it-appear-in-c)

`env`您可以使用或快速查看环境变量`printenv`

惯例是使用大写

### 临时设置环境变量（存储到您关闭终端）

`export A=11`或者 `export B="11 is part of this string"`

假设您打开了一个新的终端窗口或获取了 .zshrc 或 .bashrc 或您正在使用的任何一个，您现在可以使用此环境变量，直到您关闭终端会话。注意：设置时不要使用$，而引用变量时一定要使用$。

### 例子

`echo "A is equal to: $A and that is pretty nice"`

`echo "$A"`

# 如何获取文件

`source ~/path/to/file/filename`

### 例子

`source ~/.bash_profile`

### 设置环境变量（直到您将其删除或重新设置）

使用上面的代码，但将其放在您的 ~/.bash_profile 或 ~/.zshrc 或其他相应的文件中。保存文件并获取它。

### 例子

`export B="11 is part of this string"`

### 您现在可以使用

`env`

要删除该环境变量，请将其从文件中删除并再次获取该文件。

# 要临时删除环境变量，请使用 unset

### 例子

`unset B`

注意取消设置时没有`$`。

### 从命令行设置环境变量

`export BLABLA="environment variable set from the command line, saved in file for later use"`

检查您要发送到的文件，它可能不会从新行开始，它可能已连接到您的最后一行，该行是其他函数、别名或其他。

这不是一个完全全面的答案，但它是朝着正确方向迈出的一大步。它显示了如何设置、使用和删除终端外壳中的范围。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-01T07:09:02.467

显然有一个 bash 约定用双下划线命名“私有”函数..当然它们实际上并不是私有的。我在我的 .zshrc 中使用了这个约定。

```
function __comment()
{
  curr=`pwd`
  echo "$curr $*"
}

__comment 'Here is a Comment' 
```

# javascript - 如何使指针事件在 IE 中工作？

> ID：13667285
> 
> 赞同：1
> 
> 时间：2012-12-02T07:25:59.073
> 
> 标签：javascript, html, css

我的图片在前面，文字在后面。我想选择后面的文字。这适用于 chrome 和 firefox。我如何使它也能在 IE 中工作。

```
<div id="parent-street-view">
    <div id="map_canvas">This is supposed to be visible and selectable</div>
    <img class="overlay-pollution"
    src="http://www.lorempixel.com/400/400" />
</div>​

<style>
@media print {
    .gmnoprint {
        display: none;
    }
}

@media screen {
    .gmnoscreen {
        display: none;
    }
}

#parent-street-view {
    position: relative;
}

#map_canvas {
    position: absolute !important;
    width: 500px;
    height: 400px;
    background-color: rgb(229, 227, 223);
    overflow: hidden;
    -webkit-transform: translateZ(0);
    z-index: 0;
}

#parent-street-view .overlay-pollution {
    width: 500px;
    height: 400px;
    position: absolute;
    z-index: 100;
    opacity: 0.5;
    pointer-events:none;
}​
</style> 
```

[http://jsfiddle.net/G5BeU/2/](http://jsfiddle.net/G5BeU/2/) 如何在 IE 中完成这项工作？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-05T10:39:15.573

1) - #map_canvas 的 z-index 值为 0，图像 .overlay-pollution 的 z-index 值为 100，问题在于图像实际上位于文本上方，这就是 IE 不这样做的原因t 允许选择文本，要解决此问题，请给 #map_canvas 更高的值，例如给 #map_canvas - z-index: 101。这将解决第一个问题。

2) - 当你给 #map_canvas 一个更高的值时，#map_canvas 的背景颜色将填充块并且图像不会出现，因此只需为 #map_canvas 背景颜色提供不透明度 - 背景颜色：rgb(229, 227, 223, 0.5);

希望这应该可以解决 IE 问题。

# c# - 更改 Shell 注册表

> ID：13667287
> 
> 赞同：1
> 
> 时间：2012-12-02T07:26:21.043
> 
> 标签：c#, windows, registry, windows-shell, regedit

在我的应用程序开始时，我将注册表的 shell 值更改为自定义 shell 并终止 explorer.exe（它在应用程序之外完成），我想让后门返回到原始 shell 并带回资源管理器。可执行程序。恢复进程对我来说很好，但是当我运行我的代码来更改注册表值时，没有抛出异常，但是当我签入 regedit 时值没有改变，这是我的代码（在另一个问题上看到它）：

```
 RegistryKey regKey = Registry.LocalMachine.OpenSubKey(@"SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon", true);
        regKey.SetValue("Shell", "explorer.exe", RegistryValueKind.String);
        regKey.Close(); 
```

请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T07:55:01.143

在您的代码中，您实际上设置了

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows NT\CurrentVersion\Winlogon\Shell 
```

由于某些注册表项是由 WOW64 重定向的，请查看[MSDN](http://msdn.microsoft.com/en-us/library/aa384232%28v=vs.85%29.aspx)以获取更多详细信息。

尝试这个：

```
RegistryKey localMachine = RegistryKey.OpenBaseKey(Microsoft.Win32.RegistryHive.LocalMachine, RegistryView.Registry64);

RegistryKey regKey = localMachine .OpenSubKey(@"SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon", true);
regKey.SetValue("Shell", "explorer.exe", RegistryValueKind.String);
regKey.Close(); 
```

# ios - 如何对日期对象的 NSMutableArray 进行排序

> ID：13667288
> 
> 赞同：5
> 
> 时间：2012-12-02T07:26:38.997
> 
> 标签：ios, iphone, objective-c, nsdate, nssortdescriptor

我正在做一些对 NSMutableArray 中的日期字符串进行排序的小工作，我正在从 sqlite db 获取数组。如果你打印它显示的数组是这样的

日期字符串是（“2011-05-01”、“2011-02-01”、“2012-01-08”、“2012-05-08”、“2010-01-09”）

我想按升序显示日期。请帮帮我......我是objc的新手......

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-02T07:28:21.367

首先，您应该将所有日期字符串（即`NSString`）对象转换为`NSDate`对象，然后对它们进行排序`dateObjects`。

我相信你已经`dateArray`包含了所有这些字符串。

```
NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"self" 
                                                           ascending:NO];
NSArray *descriptors = [NSArray arrayWithObject:descriptor];
NSArray *reverseOrder = [dateArray sortedArrayUsingDescriptors:descriptors]; 
```

*或者*

```
NSArray *reverseOrderUsingComparator = [dateArray sortedArrayUsingComparator: 
                                       ^(id obj1, id obj2) {
                                           return [obj2 compare:obj1];
                                       }]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T07:28:42.450

如果您的日期确实是 format 中的字符串`YYYY-mm-dd`，如您的问题所示，那么这将按升序对它们进行排序：

```
[arrayOfDates sortUsingSelector:@selector(compare:)]; 
```

如果您的日期实际上是`NSDate`对象，这也将起作用。

如果要创建数组的排序副本：

```
NSArray *sortedArray = [arrayOfDates sortedArrayUsingSelector:@selector(compare:)]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T08:05:26.567

一般来说，排序应该由数据库完成。sqlite3 支持[order by](http://www.sqlite.org/lang_select.html)。

# javascript - 单击按钮5次后如何显示图像

> ID：13667298
> 
> 赞同：0
> 
> 时间：2012-12-02T07:28:39.033
> 
> 标签：javascript

是否有一个 javascript 可以让我显示一个按钮，用户单击该按钮可以加载 5 个图像中的任何一个。然后在按钮点击“X”次后，Hello World 出现在按钮下方

我已经能够找到可以计算按钮被点击次数的脚本，但是在点击一定次数后没有任何结果会导致操作。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T07:34:15.583

您可以按如下方式设置代码：

```
<style type="text/css">
  #hello {
    display: none;
  }
</style>
<script type="text/javascript">
  var numClicks = 0;
  var x = 5;
  function action() {
    numClicks++;
    if (numClicks == x) {
      //do something here
      //get hello div and make it visible
      var hello = document.getElementById("hello");
      hello.style.display = 'block';
    }
  }
</script>    
<button type="button" onclick="action()">a button</button>
<div id="hello">Hello World!</div> 
```

# smlnj - 如何在emacs下运行sml/nj程序

> ID：13667300
> 
> 赞同：0
> 
> 时间：2012-12-02T07:29:01.070
> 
> 标签：smlnj, emacs24

经过一天的努力，我终于为 SML/NJ 配置了 Emacs。我对 emacs 和 SML 都是新手，现在我对如何在 emacs 下运行 sml 程序有疑问。当我命令时，Mx sml-mode 看起来不错，没有错误报告。

在打开（或创建像 test.sml 之类的文件）之后，我编写了简单的 sml 程序，但我不知道如何编译它。如某些视频所示，我尝试了 Cc Cc 和 Cc Cb。但没有任何回应。我正在使用 emacs 24.1、SMLNj 和 windows vista 系统。有人能告诉我如何在 emacs 中编译和运行 SML 程序吗？我是初学者，所以简单而详细的答案。

非常感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:18:10.197

我使用这段代码来启动和重启 sml repl。我把它绑定到Ms Mm。

```
(defun isml ()
  "If sml repl exists, then restart it else create a new repl"
  (interactive)
  (when (get-buffer "*sml*")
    (with-current-buffer "*sml*"
      (when (process-live-p "sml")
        (comint-send-eof)))
    (sleep-for 0.2))
  (sml-run "sml" ""))

(global-set-key (kbd "M-s M-m") 'isml) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:53:34.880

试试`C-c C-l`吧。您将不得不摆弄并确保`sml`您拥有的任何可执行文件都可用于 Emacs 和您的 PATH 或其他任何东西。我对 Windows 上的 Emacs 不够熟悉，无法帮助您。但这里是手册的相关部分`sml-mode`：[http ://www.smlnj.org/doc/Emacs/sml-mode.html#Interaction-Mode](http://www.smlnj.org/doc/Emacs/sml-mode.html#Interaction-Mode)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-13T02:54:46.500

```
(defun gcr/sml-eval-buffer ()
  "Intelligently evaluate a SML buffer."
  (interactive)
  (gcr/save-all-file-buffers)
  (let ((sml-process (get-process "sml")))
    (when sml-process
      (quit-process sml-process)))
  (sleep-for 0.25)
  (let ((sml-buffer (get-buffer "*sml*")))
    (when sml-buffer
      (kill-buffer sml-buffer)))
  (sml-prog-proc-load-file buffer-file-name)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-20T13:29:51.933

@wenjun.yan 的回答不适用于我的 Emacs。所以我把它改成了这样：

```
(defun isml ()
 "If sml repl exists, then restart it else create a new repl"
 (interactive)
 (when (get-buffer "*sml*")
   (when (process-live-p
   (get-process "sml"))
     (with-current-buffer "*sml*"
(comint-send-eof)))
   (sleep-for 0.2)
   (kill-buffer "*sml*"))
 (sml-run "sml" ""))

(global-set-key (kbd "<f7>") 'isml) 
```

# android - 如何在android中单击一个按钮将所有选项卡的数据添加到数据库中

> ID：13667301
> 
> 赞同：2
> 
> 时间：2012-12-02T07:29:01.687
> 
> 标签：android, android-tabhost, android-tabs, android-tabactivity

有五个 EditText 小部件放置在第一个选项卡中，五个 EditText 小部件放置在第二个选项卡中，五个 EditText 小部件放置在第三个选项卡中。现在我想通过单击一个按钮将所有选项卡的数据添加到数据库中。该按钮不在选项卡布局内。它在线性布局内...... xml树结构是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ffffff" >
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="300dp" >
        </FrameLayout>
                 <Button
                     android:id="@+id/submit"
                     android:layout_width="match_parent"
                     android:layout_height="wrap_content"
                     android:text="Submit" />
    </LinearLayout>
</TabHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:45:50.703

是的，不要在 tabcontent 的每个活动的末尾放置一个按钮。您所做的不是参加 3 个单独的活动，而是不参加任何内部子活动。在您的主要活动中，膨胀所有布局（您将其设置为活动的内容视图）并将它们设置为 3 个选项卡的内容。然后你将有 3 个被膨胀的视图。现在创建关于视图透视的 EditTexts 对象，并在单击按钮时使用它们。希望你能理解我的想法。更重要的是，不建议将活动用作选项卡的内容，因为它们会消耗更多内存。我知道有很多教程都遵循相同但隐藏了缺点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T09:25:42.077

我夸大了三个活动。所有这三个活动都包含 EditTexts。代码如下：

```
 TabHost tabHost = getTabHost();

    // Tab for Photos
    TabSpec photospec = tabHost.newTabSpec("Photos");
    photospec.setIndicator("General", getResources().getDrawable(R.drawable.icon_photos_tab));
    Intent photosIntent = new Intent(this, PhotosActivity.class);
    photospec.setContent(photosIntent);

    // Tab for Songs
    TabSpec songspec = tabHost.newTabSpec("Songs");
    // setting Title and Icon for the Tab
    songspec.setIndicator("Private", getResources().getDrawable(R.drawable.icon_songs_tab));
    Intent songsIntent = new Intent(this, SongsActivity.class);
    songspec.setContent(songsIntent);

    // Tab for Videos
    TabSpec videospec = tabHost.newTabSpec("Videos");
    videospec.setIndicator("Other", getResources().getDrawable(R.drawable.icon_videos_tab));
    Intent videosIntent = new Intent(this, VideosActivity.class);
    videospec.setContent(videosIntent);

    // Adding all TabSpec to TabHost
    tabHost.addTab(photospec); // Adding photos tab
    tabHost.addTab(songspec); // Adding songs tab
    tabHost.addTab(videospec); // Adding videos tab 
```

我已经在所有 3 个选项卡中添加了 EditText，我想通过单击一个按钮将所有 3 个选项卡（包含 EditText）的数据添加到数据库中。并且按钮在 main.xml 中输出如下：

![输出看起来像这样](../Images/1e8293a3be715b6ea7d35590ae93c499.png)

# mysql - 将内部选择查询与主查询联接

> ID：13667308
> 
> 赞同：0
> 
> 时间：2012-12-02T07:30:35.793
> 
> 标签：mysql

我想在我的课程管理系统中创建讲师的每月出勤报告。在此报告中，我需要使用嵌套选择查询来计算讲师在场和缺席的数量，以便在特定记录中显示它们。我认为可能的方法是，如果讲师代码与主查询中正在处理的讲师代码相同，则对要计算的每个出勤状态使用选择语句！

```
select lecturers.*, sum(distinct courses.credit) as 'Due Credits',(select count(*) from attendances where status='1' ) as Present, (select count(*) from attendances where status='0' ) as Absent from lecturers,courses,attendances
 where attendances.lecturer_code=lecturers.code 
 AND courses.lecturer_code=lecturers.code 
 group by lecturer_code 
```

【代号、姓名、部门、​​职务、学历为固定属性】

我需要知道是否有更好的方法来做到这一点！

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T10:41:36.903

```
SELECT   lecturers.*,
         SUM(DISTINCT courses.credit) AS `Due Credits`,
         SUM(attendances.status = 1)  AS `Present`,
         SUM(attendances.status = 0)  AS `Absent`,
FROM     lecturers
    JOIN courses     ON     courses.lecturer_code = lecturers.code
    JOIN attendances ON attendances.lecturer_code = lecturers.code
GROUP BY lecturer_code 
```

# javascript - 通过javascript在客户端更改文本时如何读取Asp.net TextBox值

> ID：13667316
> 
> 赞同：0
> 
> 时间：2012-12-02T07:31:38.603
> 
> 标签：javascript, asp.net, server-side

我有一个这样的服务器端文本框：

```
<asp:TextBox runat="server" id="testText" >hi this is a world!</asp:TextBox> 
```

所以我用这样的javascript在客户端更改这个值

```
document.getElementById("<%=testText.ClientID%>").value="Hahaha" 
```

当我读取值时，它会像代码隐藏中的代码一样写出“嗨，这是一个世界！” 值为什么？

```
 response.write(testText.text); // print "hi this is a world!" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:40:14.177

当您通过请求和响应呈现文本时，它会从服务器获取值，因此您的请求和响应将显示服务器上设置的值。Javascript 仅在客户端工作，一旦加载文档，它不依赖于请求和响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T10:28:04.990

我知道，这个问题很久以前就被问过了，但仍然添加我的答案，因为它可能对某人有帮助。

使用以下代码行：

```
response.write(Request.Form.Get(testText.UniqueID)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T11:59:45.460

你的问题没有向我澄清！但假设你也有按钮来改变文字，你可以根据需要改变它

```
<asp:TextBox ID="testText" runat="server" ClientIDMode="Static">hi this is a world!</asp:TextBox>
<asp:Button ID="Button1" runat="server" Text="Button"></asp:Button> 
```

在您的 Page_Load 上添加 javascritp 事件（我正在将 onclick 事件添加到用于处理 javascript 函数的按钮）

```
Button1.Attributes.Add("onclick", "javascript:clientsite()"); 
```

然后我认为您想从客户端站点更改服务器站点值，因此为此您必须替换该值

```
 function clientsite() {

    var servervalue = document.getElementById("testText").value;
    var replaceIt = servervalue.replace(servervalue, "hahaha");
    document.getElementById("testText").value = replaceIt;
} 
```

现在，当您单击按钮时，它将替换或更改从服务器端到客户端的值
可能对您有帮助

快乐编码 :D

# c# - 使用什么引擎来创建基于 HTML 布局的 .net 2 c# 应用程序？

> ID：13667319
> 
> 赞同：4
> 
> 时间：2012-12-02T07:32:05.330
> 
> 标签：c#, html, .net-2.0

我现在在网上浏览了几天，但仍然找不到我要找的东西。基本上我想开发我的应用程序界面，使用 HTML 和 CSS 的 GUI，当然保留事件，以及在运行时修改部分布局的机会（如 div 的内容）。该应用程序是一个数据库管理器，直观地显示数据，并在运行时更新它们。

*   **IE** aka 使用 System.Windows.Forms.WebBrowser，这是我尽量避免的，它取决于客户端系统，停在版本 7，很难与应用程序链接

*   **HTMLayout** - [http://www.terrainformatica.com/htmlayout/](http://www.terrainformatica.com/htmlayout/)：看起来很有趣，但是 .net c# 部分，nabu-library 已经死了

*   **Sciter** - [http://www.terrainformatica.com/sciter/](http://www.terrainformatica.com/sciter/)：与 HTMLayout 来自同一组，但无法真正理解集成，我不确定这是否是我想要的 - 也找不到。净 c# 信息

*   **Awesomium** - [http://awesomium.com/](http://awesomium.com/)：起初看起来确实不错，但它需要 .net 4 ，我们必须留在 .net 2 - 而且它似乎太多处理，使用和 .net wiki有点弱：[http ://wiki.awesomium.net/](http://wiki.awesomium.net/)

*   最后是**Gecko** [http://code.google.com/p/geckofx/](http://code.google.com/p/geckofx/)和**Webkit** [http://code.google.com/p/open-webkit-sharp/](http://code.google.com/p/open-webkit-sharp/) - 但目前我不确定它们是否可以使用要呈现整个应用程序，它们似乎只是带有另一个引擎的 WebBrowser。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-20T02:29:32.237

[此处](http://www.terrainformatica.com/2012/11/sciter-ui-application-architecture/)和[此处](http://www.terrainformatica.com/2013/04/calling-code-behind-ui-from-worker-threads/)概述了[Sciter 集成原则](http://terrainformatica.com/sciter/sciter-basics.whtm)。

Sciter 和 HTMLayout 都使用相同的集成原则和 API 架构。

从 .NET 包装器开始，请检查以下项目：

1.  [https://github.com/midiway/SciterSharp](https://github.com/midiway/SciterSharp)
2.  [https://code.google.com/p/experent/](https://code.google.com/p/expemerent/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:01:18.163

不确定这是否符合您的要求，但我目前使用 Webkit.NET [http://webkitdotnet.sourceforge.net/](http://webkitdotnet.sourceforge.net/)

本质上，我使用它的 Webkit 浏览器控件作为界面，将 HTML/CSS 标记存储为变量，然后我使用 C# 执行服务器端逻辑，然后将结果输出到浏览器控件（在这种情况下，C# 代替 PHP，因为我的应用程序中没有包含便携式 Web 服务器）。

我确实想更新它以实现一些更新的功能/标准，所以这篇文章是最有帮助的。

[http://peterdn.com/post/（首先！）-Using-WebKit-nightly-builds-with-WebKit-NET.aspx](http://peterdn.com/post/(First!)-Using-WebKit-nightly-builds-with-WebKit-NET.aspx)

# html - HTML 标题和边框问题

> ID：13667320
> 
> 赞同：0
> 
> 时间：2012-12-02T07:32:07.277
> 
> 标签：html, css, web, header

我遇到的问题：

当我决定取消 CSS 的边框时，标题区域会变小（我不想发生这种情况）。- 我想在不移动任何东西的情况下取消边界线。

当我将图像放入标题时（它会拉伸并且无法正确显示）。另外在图像上，我想放置一个文本可以吗？

另外，如果你进入菜单页面，你会看到缩略图没有对齐，这是为什么呢？

这是网站：http: [//younani.com/finalsite/finalindex.html](http://younani.com/finalsite/finalindex.html)

这是我的CSS：

```
#header {
    text-align: center;
    background: url('bg1.gif');
}

#container {
    width: 960px;
    margin: 0 auto;
    background-color: #FAFAFA;
    color: #003300;
    font-family: Arial, Helvetica, sans-serif;
    background-image: url('backgroundflower5.jpg');
    background-repeat: no-repeat;
    background-position: center;
    background-size: cover;
}

#h2 {
    text-align: center;
}

#container {
    width: 960px;
    margin: 0 auto;
}

#container div {
    border: 1px solid;
}

#center2 {
    float: left;
    margin: 10px 0 10px 20px;
    min-width: 200px;
    width: 494px;
    border-radius: 8px;
}

#left,#center,#right {
    float: left;
    margin: 10px 0 10px 20px;
    min-width: 200px;
}

#center {
    font-family: Josefin Slab;
    background-color: #FFFFFF;
    width: 494px;
    border-radius: 8px;
    text-align: center;
}

.clear {
    clear: both;
}

#right {
    font-family: Josefin Slab;
    font-weight: bold;
    border-radius: 8px;
    background-color: #FFFFFF;
}

#left a {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    color: #ffffff;
    display: block;
    padding: 10px 20px;
    background: -moz-linear-gradient(
        top,
        #ffffff 0%,
        #2a07ed);
    background: -webkit-gradient(
        linear, left top, left bottom, 
        from(#ffffff),
        to(#2a07ed));
    -moz-border-radius: 30px;
    -webkit-border-radius: 30px;
    border-radius: 30px;
    border: 3px solid #ffffff;
    -moz-box-shadow: 0px 3px 11px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(026,020,219,1);
    -webkit-box-shadow: 0px 3px 11px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(026,020,219,1);
    box-shadow: 0px 3px 11px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(026,020,219,1);
    text-shadow: 0px -1px 0px rgba(000,000,000,0.2),
        0px 1px 0px rgba(255,255,255,0.3);
}

#left a:link {
    background-color: #E6E6E6;
}

#left a:visited {
    background-color: #E6E6E6;
}

#left a:hover {
    border: 3px inset #333333;
}

#left ul {
    list-style-type: none;
    margin: 0;
    padding-left: 0;
}

#footer {
    text-align: center;
    font-family: Audimat;
    clear: both;
    width: 38%;
    border-radius: 8px;
    background-color: white;
    text-align: center;
    margin-right: auto;
    margin-left: auto;
} 
```

这是我主页的相关 HTML：

```
<div id="container" class="clearfix">
    <!-- Header -->
    <div id="header">
        <h1>Younani Flowers</h1>
    </div>
    <!-- Left Column -->
    <div id="left">
    <ul>
        <li><a href="finalindex.html">Home</a></li>
        <li><a href="menu.html">Menu</a></li>
        <li><a href="occasions.html">Occasions</a></li>
        <li><a href="aboutus.html">About Us</a></li>
        <li><a href="contactus.html">Contact Us</a></li>
        </ul>
    </div>
    <!-- Center Column -->
    <div id="center">
        HELLLLLO :D :D
    </div>
    <!-- Right Column -->
    <div id="right">
    <p><span style="text-decoration: underline;"><strong>Birth Month Flowers</strong></span></p>

    <p>January Carnation</p>
    <p>February Iris</p>
    <p>March Daffodil</p>
    <p>April Daisy</p>
    <p>May Lily</p>
    <p>June Rose</p>
    <p>July Delphinium</p>
    <p>August Dahlia</p>
    <p>September Aster</p>
    <p>October Calendula</p>
    <p>November Chrysanthe</p>
    <p>December Poinsettia</p>
    </div>
    <!-- Footer -->
    <div id="footer" class="clear">
    <div class="nav">
        <b>
                <a href="finalindex.html">Home</a>
        &nbsp;&nbsp;
                <a href="menu.html">Menu</a>
        &nbsp;&nbsp;
                <a href="occasions.html">Occasions</a>
        &nbsp;&nbsp;
                <a href="aboutus.html">About Us</a>
        &nbsp;&nbsp;
                <a href="contactus.html">Contact Us</a>
        &nbsp;&nbsp;
            </b>
    </div>
    </div>
</div>
<!-- #container --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T10:55:02.980

```
<div id="header" style="float: left; width: 100%;">
   <h1>Younani Flowers</h1>
</div> 
```

- - - 或者 - - -

应用清除修复

```
 <div id="header" class="clearfix">
   <h1>Younani Flowers</h1>
 </div> 
```

[http://www.webtoolkit.info/css-clearfix.html](http://www.webtoolkit.info/css-clearfix.html)

# sharepoint-2010 - 可查询负载在 SharePoint 中如何工作？

> ID：13667324
> 
> 赞同：2
> 
> 时间：2012-12-02T07:32:34.633
> 
> 标签：sharepoint-2010, linq-to-objects, sharepoint-clientobject

当 LINQ 用于检索 SharePoint 对象时，任何人都可以帮助我了解幕后正在进行什么样的工作。例如，我可以使用这样的代码[：](http://msdn.microsoft.com/en-us/library/ff798388.aspx)

```
private IEnumerable<List> newLists;

var dt = new DateTime(2010, 3, 20);
var query = from list
            in clientContext.Web.Lists
            where list.Created > dt && list.Hidden == false
            select list;

newLists = clientContext.LoadQuery(query);
clientContext.ExecuteQuery(); 
```

它是如何工作的？

请求是什么样的？

从我发现的[文档中：](http://msdn.microsoft.com/en-us/library/ff798388.aspx)

> 使用 CSOM 时，可以针对客户端对象（例如列表和 Web）编写 LINQ 查询，然后使用 ClientContext 类将这些查询提交给服务器。请务必了解，当您采用此方法时，您使用的是 LINQ to Objects 来查询 SharePoint 对象，而不是 LINQ to SharePoint。这意味着您的 LINQ 表达式不会转换为 CAML，并且您不会看到与 CAML 转换相关的性能优势。

所以，我有点困惑，因为我认为 LINQ 表达式转换为 Caml 请求。我无法理解它是如何工作的。如何在执行`ExecuteQuery()`方法时查看请求的详细信息？您能否向我推荐任何用于观看请求的工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T08:36:47.133

SP 在内部使用 CAML：SP 运行时将 Linq 转换为 CAML 并通过 Soap 请求或 REST 语句发送（如果您使用的是 RESTful 服务）：http: [//msdn.microsoft.com/en-us/library/ff798339.aspx](http://msdn.microsoft.com/en-us/library/ff798339.aspx)（举例）；

在此处查看更多信息：http: [//msdn.microsoft.com/en-us/library/ff798464.aspx](http://msdn.microsoft.com/en-us/library/ff798464.aspx)

这可能会有所帮助： http: [//nikspatel.wordpress.com/2012/08/05/sharepoint-2010-data-querying-options-server-om-vs-client-om-vs-rest-vs-linq- vs-搜索-api/](http://nikspatel.wordpress.com/2012/08/05/sharepoint-2010-data-querying-options-server-om-vs-client-om-vs-rest-vs-linq-vs-search-api/)

# bash - Bash 非贪婪替换

> ID：13667328
> 
> 赞同：2
> 
> 时间：2012-12-02T07:33:29.750
> 
> 标签：bash

说我有一个字符串

```
foo='teledunet&file=rotana_aflam&provider=rtmp&autostart=true&' 
```

如果我想删除`file`我可以做的参数

```
$ echo ${foo/&file=[^&]*}
teledunet 
```

但是正如您所看到的，搜索是贪婪的，并且会占用字符串的其余部分。可以用它来代替非贪婪吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T07:42:03.037

```
$ echo ${foo/&file*([^&])}
teledunet&provider=rtmp&autostart=true& 
```

您可能必须`shopt -s extglob`先启用扩展 glob 语法。

# mysql - MYSQL 简单移动平均线计算

> ID：13667331
> 
> 赞同：4
> 
> 时间：2012-12-02T07:34:02.373
> 
> 标签：mysql, performance, moving-average

对于提供的记录集（约 5000 条记录），以下 MySql 更新状态似乎花费了过多的时间来执行。下面的更新语句平均需要 12 秒才能执行。我目前计划对 5 个不同的时期和大约 500 个不同的股票代码运行此计算。这转化为 12 秒 * 5 次计算 * 500 个符号 = 30,000 秒或 8..33 小时。

**更新声明：**

```
UPDATE tblStockDataMovingAverages_AAPL JOIN 
(SELECT t1.Sequence,
   (
    SELECT AVG(t2.Close)
        FROM tblStockDataMovingAverages_AAPL AS t2
        WHERE (t1.Sequence - t2.Sequence)BETWEEN 0 AND 7
    )AS "8SMA" 
FROM tblStockDataMovingAverages_AAPL AS t1 
ORDER BY t1.Sequence) AS ma_query 
ON tblStockDataMovingAverages_AAPL.Sequence = ma_query.Sequence  
SET tblStockDataMovingAverages_AAPL.8MA_Price = ma_query.8SMA 
```

**表设计：**

```
CREATE TABLE `tblStockDataMovingAverages_AAPL` (
  `Symbol` char(6) NOT NULL DEFAULT '',
  `TradeDate` date NOT NULL DEFAULT '0000-00-00',
  `Sequence` int(11) DEFAULT NULL,
  `Close` decimal(18,5) DEFAULT NULL,
  `200MA_Price` decimal(18,5) DEFAULT NULL,
  `100MA_Price` decimal(18,5) DEFAULT NULL,
  `50MA_Price` decimal(18,5) DEFAULT NULL,
  `20MA_Price` decimal(18,5) DEFAULT NULL,
  `8MA_Price` decimal(18,5) DEFAULT NULL,
  `50_200_Cross` int(5) DEFAULT NULL,
  PRIMARY KEY (`Symbol`,`Sequence`),
  KEY `idxSequnce` (`Sequence`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1$$ 
```

任何有关加快进程的帮助将不胜感激。

**选择解释的输出：**

```
id  select_type         table   type    possible_keys   key                 key_len ref     rows    Extra
1   PRIMARY             t1      index   NULL            idxSymbol_Sequnce   11      NULL    5205    Using index; Using filesort
2   DEPENDENT SUBQUERY  t2      ALL     NULL            NULL                NULL    NULL    5271    Using where 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:48:51.707

`Close`您可以通过向字段添加索引来稍微优化它。AVG功能必须更有效。请分享您的数据集转储以更接近地查看它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T17:21:28.527

这应该会好一点：

```
update tblStockDataMovingAverages_AAPL
join (
  select t1.sequence as sequence, avg(t2.close) as av
  from tblStockDataMovingAverages_AAPL t1
  join tblStockDataMovingAverages_AAPL t2
  on t2.sequence BETWEEN t1.sequence-7 AND t1.sequence
  group by t1.sequence
) t1 on tblStockDataMovingAverages_AAPL.sequence = t1.sequence
set 8MA_Price = t1.av 
```

关于我的陈述`BETWEEN`：`field1 OPERATOR expression(field2)`比条件更容易优化。我认为这适用于.`expression(field1, field2) OPERATOR expression``ON``BETWEEN`

看起来`ORDER BY`您的查询中的 是不必要的，删除它可能会加快您的查询速度。

如果任何股票代码出现在同一个表中，将所有这些都放入一个更新查询中（尽管不同的时期不起作用），这可能比为每个都运行它要快得多。

正如已经建议的那样，添加索引`Close`可能会有所帮助。

# android - Android 布局 - 按钮大小

> ID：13667334
> 
> 赞同：0
> 
> 时间：2012-12-02T07:34:14.140
> 
> 标签：android, android-layout, android-relativelayout

这是我的按钮代码。问题是，它在所有设备上都是相同的大小。对小人大，对大人小。我如何相对改变它的大小？这是我的代码。

```
<Button
        android:id="@+id/button1"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_margin="3dp"
        android:background="@drawable/blue_gradient"
        android:layout_alignRight="@+id/relativeLayout1"
        android:layout_alignTop="@+id/relativeLayout1"/> 
```

我希望大小保持一致，具体取决于设备的分辨率。

**编辑** 我希望按钮是方形的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:48:45.110

您正在以 dp 或与密度无关的像素为单位指定宽度和高度。此度量单位旨在在所有设备上产生相同的*物理*尺寸，而不管像素密度如何，因为像素密度因设备而异。`layout_width`您还可以对和使用以下任一值`layout_height`：

*   `wrap_content`使视图足够大以容纳其内容。
*   `match_parent`使用其父视图的相应尺寸（宽度或高度）。

此外，您还可以使用其中任何一个指定填充和边距，这是典型的盒子模型。

Android 当前不支持百分比样式测量，例如将宽度设置为可用宽度的 60%。最接近的方法是使用 a并为其子视图`LinearLayout`指定值。`layout_weight`

如果您想更好地控制视图的大小，可以将其子类化并覆盖该`onMeasure`方法，您可以在该方法中计算视图的大小并通过调用`setMeasuredDimension(w, h)`. 这是一个这样做的人的例子：[https ://stackoverflow.com/a/3147157/1207921](https://stackoverflow.com/a/3147157/1207921)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T07:37:04.087

最好的方法是使用

`android:layout_width="wrap_content" android:layout_height="wrap_content"`

它可以很好地管理所有设备的大小。

对于方形按钮，您需要在代码中设置宽度/高度。[这](https://stackoverflow.com/a/3147157/1436931)会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:53:00.260

您可能想尝试根据屏幕分辨率（[Android，（新手）不同的 res imagebuttons](https://stackoverflow.com/questions/7020379/android-newbie-different-res-imagebuttons)）使用具有不同大小图像的图像按钮。

如果您将 LinearLayout 与 android:weightSum="2.0" 一起使用，并且将所有图像按钮设置为 android:layout_weight="1" ，则根据 LinearLayout 方向，它们的宽度/高度将恰好是 LinearLayout 的 50%。

# r - 由于 NA 已删除的轮廓多边形边框

> ID：13667336
> 
> 赞同：4
> 
> 时间：2012-12-02T07:34:22.400
> 
> 标签：r, maps, shapefile, ggplot2

我想在 R 中使用 ggplot2 绘制一个形状文件。更具体地说，我想绘制几个主要城市的每个街区的白人生活百分比。到目前为止，我一直在纽黑文工作。问题是某些块未填充，在这种情况下 % white = NA。Ggplot 自动将这些块绘制为灰色。我想把它们画成白色。

[带有灰色 NA 的纽黑文](http://tinypic.com/r/2ngvnyc/6)

```
c_opts <- theme(axis.text.x=element_blank(), 
axis.text.y=element_blank(), 
axis.title.x=element_blank(), 
axis.title.y=element_blank(), 
axis.ticks = element_blank(),
legend.text=element_text(size=10), 
legend.background=element_blank(), 
legend.key=element_rect(fill='transparent', colour=NA), 
panel.grid.major=element_line(colour='white'), 
panel.background=element_rect(fill='transparent', colour=NA),
legend.justification=c(0,0), 
legend.position=c(.15,.15),
legend.title=element_text(size=11, face='bold'))

map <- qplot(PolyCoordsY, PolyCoordsX, data=nh_geom, group=Poly_Name, fill = pc_nhwhite, geom="polygon", xlab = "", ylab = "", main = "New Haven") 
map + c_opts + scale_fill_gradient(name = "% White") 
```

我可以通过将 na.value = NA 添加到 scale_fill_gradient 参数来排除 NA。

```
map <- qplot(PolyCoordsY, PolyCoordsX, data=nh_geom, group=Poly_Name, fill = pc_nhwhite, geom="polygon", xlab = "", ylab = "", main = "New Haven") 
map + c_opts + scale_fill_gradient(name = "% White", na.value = NA) 
```

[排除 NA 的纽黑文](http://tinypic.com/r/e0ir6t/6)

尽管这会将 NA 块绘制为白色，但它也排除了这些块的多边形边界。有谁知道如何保持多边形轮廓？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:49:31.717

如果没有可重现的数据集，我无法测试这是否适用于您的特定情况。

尝试传递一种颜色来`na.value`喜欢这样：

```
scale_fill_gradient(name = "% White",na.value="white") 
```

# list - LISP：加入多个列表但不展平

> ID：13667337
> 
> 赞同：-2
> 
> 时间：2012-12-02T07:34:46.253
> 
> 标签：list, lisp, common-lisp, flatten

我有

```
(setq a '(0 1))
(setq b '(3 4))
(setq c '(6 8)) 
```

我希望得到输出`x`：

```
((0 1)(3 4)(6 8)) 
```

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T07:39:53.720

哇在这里错过了一些非常基本的东西！

```
(setq x (list a b c)) 
```

# razor - jquery-ui 文件不包括在我的项目中

> ID：13667341
> 
> 赞同：1
> 
> 时间：2012-12-02T07:35:49.657
> 
> 标签：razor, asp.net-mvc-4

我的 jquery-ui-1.9.2.js 文件似乎没有包含在我的项目中，尽管它在我的 BundleConfig.cs 文件中：

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include("~/Scripts/jquery-1.*"));
bundles.Add(new ScriptBundle("~/bundles/jqueryui").Include("~/Scripts/jquery-ui*"));
bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include("~/Scripts/jquery.unobtrusive*", "~/Scripts/jquery.validate*"));    
bundles.Add(new ScriptBundle("~/bundles/modernizr").Include("~/Scripts/modernizr-*")); 
```

但是，正确包含 jquery-1.8.3.js。我得到的错误是：`Uncaught TypeError: Object [object Object] has no method 'datepicker'`

我的选择器没问题，我检查了浏览器的控制台。

Chrome 在脚本文件夹中向我显示了这些 js 文件：

![在此处输入图像描述](../Images/f9ed99894849ab68a0c8d121d6ff4cbb.png)

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:00:43.353

编辑：已解决

`@Scripts.Render("~/bundles/jqueryui")`我没有在我的视图中添加这一行。

```
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/jqueryui") // Added
} 
```

# objective-c - 在 iPhone 5 上，UITableView 以 3.5 英寸格式截断

> ID：13667344
> 
> 赞同：5
> 
> 时间：2012-12-02T07:36:15.277
> 
> 标签：objective-c, ios, xcode, interface-builder, iphone-5

出于某种原因，在`UITableView`iPhone 5 上会中断。我没有看到整个屏幕上的表格视图，而是看到了蓝色背景。基本上，它的行为就像我使用的是 3.5" 英寸的屏幕。它唯一有效的时候是我在模拟指标中将视图设置为 "Retina 4 全屏"。但问题是我遇到了相反的问题带有 3.5 英寸的屏幕。这里有几张图片（视图当前在 Simulated Metrics 中设置为“Freeform”）：

![在此处输入图像描述](../Images/790feba9bf28505540b5187af85db9b3.png) ![在此处输入图像描述](../Images/73055701856b37b4ffcab45ad2dfe167.png)

我曾尝试寻找类似的问题，但没有任何帮助。如果有帮助，我确实有一个 MainWindow.xib。我正在使用 iPhone 6.0 Simulator 和 iPhone 4S 16GB 对此进行测试。如果有任何不清楚的地方，我会更新这个问题。任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T08:21:48.023

您可能没有设置正确的自动调整大小蒙版。尝试将掩码设置为 just `UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-15T18:17:42.993

这就是我所做的。我在属性检查器中开始我的 xib 文件大小为 3.5

在我的视图控制器中，我有这段代码，请确保在 viewDidAppear 方法中更改框架

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    if ([self hasFourInchDisplay]) {
        self.myTableView.frame = self.view.frame;
    }
}

- (BOOL)hasFourInchDisplay {
    return ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone && [UIScreen mainScreen].bounds.size.height == 568.0);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T14:17:20.833

您需要调整表格大小，添加一个属性`autoresizingMask`。

```
self.tableView.autoresizingMask = UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleHeight ; 
```

`tableView`您在内部`mainView(self.view)`或任何子视图中添加的另一件事。你可能有这个问题。

检查您的 mainView 的边界和框架。

希望这会帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-06T15:14:49.030

使用自动布局，您可以为表格视图的四个边距设置约束，然后单击添加约束

![在此处输入图像描述](../Images/3fd1f1f5a5fdd3af5dce413672512b80.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T08:39:30.413

尝试其中一种，看看它们是否有帮助：

```
myTableView.view.frame = self.view.bounds;
// or
myTableView.view.frame = self.view.frame; 
```

# ios - 该应用程序在 :setRefreshInterval 中引用了非公共选择器

> ID：13667350
> 
> 赞同：1
> 
> 时间：2012-12-02T07:37:47.643
> 
> 标签：ios, app-store, appstore-approval, flurry

尝试为应用商店上传 iOS 应用时，我收到一条错误消息，指出

```
The app references non-public selectors in :setRefreshInterval 
```

我在我的项目中使用了很多库，从不同的 Ad Network SDK 到three20，经过调查，我发现静态库 FlurryAds.a 包含这些方法，可能会导致应用被拒绝。

![截屏](../Images/23a23f3d324fcdf8c910a2b9893d8abe.png)

我已经安装了最新的 Flurry SDK，事实上我昨晚刚刚下载了它。

我问我的一位最近集成了 Flurry 广告的朋友，他遇到了同样的错误，但他的应用程序通过了。

现在我的问题是其他人在将应用程序上传到应用程序商店时遇到此错误，如果他们这样做了，他们的应用程序是否被拒绝？

现在我将禁用 FlurryAds，但我会转发您的建议/指示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:32:47.867

此警告显示为 Flurry 在两个不同的中介网络中调用 setRefreshInterval 的结果。Flurry 没有调用任何 Apple 私有 API。很多发布者都用这个提交了，由于没有调用私有API，所以提交到AppStore没有问题。（全面披露：我在 Flurry 的支持团队工作）

# python - 累积缓冲替代品

> ID：13667354
> 
> 赞同：0
> 
> 时间：2012-12-02T07:38:14.327
> 
> 标签：python, opengl

我正在将累积缓冲区用于运动轨迹，它的工作原理惊人且超级简单。太糟糕了 ATI 卡没有这个缓冲区。我需要能够复制颜色缓冲区，减少其所有值并将其粘贴到下一帧中。我能做些什么？它们被称为帧缓冲区吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:30:28.053

使用帧缓冲区对象和屏幕大小的纹理（或 2 的次大幂）。将帧缓冲区对象绑定到纹理并绘制场景。然后，绑定默认的帧缓冲区并绘制一个带有一些微弱不透明度的黑卡（以使之前的帧变暗），然后将纹理绘制为具有 GL_ONE、GL_ONE 混合函数的全屏四边形。不要在帧之间清除屏幕。

双缓冲会使这变得更复杂一些。您可能必须使用两个或三个纹理（一个用于场景，一个或两个用于累积状态，而不是仅使用默认帧缓冲区）。

它有点复杂，但从好的方面来说，一旦你完成了这个设置，你就可以做很多效果，比如模糊轨迹或其他 2d 后期处理。

以下是有关渲染到纹理调用的一些细节：

[http://ogltotd.blogspot.com/2006/12/render-to-texture.html](http://ogltotd.blogspot.com/2006/12/render-to-texture.html)

# wpf - 在主窗口的网格中打开用户控件 - WPF

> ID：13667356
> 
> 赞同：3
> 
> 时间：2012-12-02T07:38:54.933
> 
> 标签：wpf, user-controls

我现在正在用 WPF 编写一个应用程序，并试图记住我很久以前做过的事情。我试图有一个带有 4 个按钮的窗口，我将通过应用程序与它们一起导航。

我的代码：

```
<Grid>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="55*"/>
            <ColumnDefinition Width="453*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <StatusBar Margin="0" VerticalAlignment="Top" Height="23" Grid.ColumnSpan="4" Grid.Row="2" Background="#FF1A202C"/>
        <Menu Margin="0" Height="23" Grid.ColumnSpan="4" Background="#FF1A202C" />
        <StackPanel Grid.Row="1" Width="224.2" HorizontalAlignment="Left" Background="#FF1F7872"  >
            <Button Content="Dashboard" Style="{StaticResource BorderlessButton}" Foreground="#FFF1E7E7" Template="{DynamicResource GlassButton}" Margin="25,20,23,20" Click="Button_Click_1" />
            <Button Content="Components" Style="{StaticResource BorderlessButton}" Foreground="#FFF1E7E7" Template="{DynamicResource GlassButton}" Margin="25,20,23,20"/>
            <Button Content="TimeLine" Style="{StaticResource BorderlessButton}" Foreground="#FFF1E7E7" Template="{DynamicResource GlassButton}" Margin="25,20,23,20"/>
            <Button Content="Drilldown" Style="{StaticResource BorderlessButton}" Foreground="#FFF1E7E7" Template="{DynamicResource GlassButton}" Margin="25,20,23,20"/>
        </StackPanel>
        <Grid Grid.Column="2" Grid.Row="1" HorizontalAlignment="Stretch" Grid.ColumnSpan="2" Background="#FF72B095">

        </Grid>     
    </Grid> 
```

我有 4 个用户控件，我希望它们在单击按钮时出现在网格中（也许我需要替换控件）。

一个朋友建议我在 Blend 上使用 storyboard，但我记得很久以前我做了不同的事情，我只使用了 XAML 和 C#。

我尝试使用情节提要工具，但我不明白如何使用它，总的来说，我认为情节提要工具对我来说太过分了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T08:56:35.727

为网格命名：

```
<Grid  Name="MainGrid" >

</Grid> 
```

然后，在后面的代码中，处理点击事件：

```
void Button_Click_1(object sender, MouseEventArgs e)
{ 
    MainGrid.Children.Add( // Your control //);
} 
```

# java - 运行 Apache Mahout 示例时出现构建错误

> ID：13667357
> 
> 赞同：0
> 
> 时间：2012-12-02T07:39:10.507
> 
> 标签：java, machine-learning, mahout

我刚刚安装了 Hadoop 和 Mahout，现在我想尝试使用 Mahout 运行一些示例数据集。

我按照这里的示例：[https](https://cwiki.apache.org/MAHOUT/recommendationexamples.html) : //cwiki.apache.org/MAHOUT/recommendationexamples.html 我尝试了使用以下语法的 MovieLens 示例：

```
mvn -q exec:java -Dexec.mainClass="org.apache.mahout.cf.taste.example.grouplens.GroupLensRecommenderEvaluatorRunner" -Dexec.args="-i temp/ml-1m/ml-1m/ratings.dat" 
```

但它只是没有用。此外，它只是说 [ERROR] BUILD ERROR。我的问题，如何查看错误日志以及如何修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:35:41.083

你应该逃避`-q`. 命令是`mvn exec:java -Dexec.mainClass="org.apache.mahout.cf.taste.example.grouplens.GroupLensRecommenderEvaluatorRunner" -Dexec.args="-i temp/ml-1m/ml-1m/ratings.dat"` 我曾经因为文件路径错误而报错，你可以检查一下！

# iphone - 在朋友墙上发布推文

> ID：13667358
> 
> 赞同：2
> 
> 时间：2012-12-02T07:39:13.983
> 
> 标签：iphone, ios, twitter

我正在使用[https://github.com/mattgemmell/MGTwitterEngine](https://github.com/mattgemmell/MGTwitterEngine)在用户墙上发布推文。我使用它是因为我想支持最低 OS 4.3。我想知道如何在朋友墙上发布推文。“MGTwitterEngine”中有直接消息。但我想发布朋友墙而不是短信。

# api - 如何通过 ISBN 从国会图书馆以 XML/JSON 格式检索图书信息

> ID：13667361
> 
> 赞同：11
> 
> 时间：2012-12-02T07:39:29.017
> 
> 标签：api, isbn, z39.50

国会图书馆有一个网站可以按 ISBN 搜索书籍。检索图书信息的一种简单方法是使用如下 URL：

```
http://lccn.loc.gov/2009019559/mods 
```

它返回一个可以轻松解析的 XML 结构。URL 需要一个唯一的 LCCN 编号，格式如下：

```
http://lccn.loc.gov/[lccn]/mods 
```

我有一批用条形码编码的 ISBN 书籍。我如何检索/转换 ISBN 为 LCCN 以检索图书的 XML 数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-10T15:42:40.283

您可以使用美国国会图书馆的 SRU 目录。查询看起来像这样：

lx2.loc.gov:210/lcdb?version=1.1&operation=searchRetrieve&query=bath.isbn=[ISBN]&maximumRecords=1&recordSchema=mods

将 [ISBN] 替换为您要查找的 ISBN

在该响应中是一个 LCCN 元素。但是，目录已经返回 MODS，因此可能根本不需要执行任何操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T06:08:35.837

您可以使用 Google Books API，例如：[https ://www.googleapis.com/books/v1/volumes?q=LCCN2001051058](https://www.googleapis.com/books/v1/volumes?q=LCCN2001051058)

答案是 JSON 格式。它包括 ISBN-10 和 ISBN-13 标识符。您将不得不使用您最喜欢的编程语言对请求进行批处理，在 Pharo Smalltalk 中使用 PetitJson 解析器和 Zinc 使用 HTTPS 支持，它将是：

```
| parser lccnCollection |
parser := PPParserResource current parserAt: PPJsonParser.
lccnCollection := #('2001051058' '2001051058').
lccnCollection do: [: lccnNumber | 
    | json jsonObject |
    json := (Url absoluteFromText: 'https://www.googleapis.com/books/v1/volumes?q=LCCN' , lccnNumber) retrieveContents contents.
    jsonObject := parser parse: json.
    " ... retrieve ISSN from jsonObject, etc ... "]. 
```

请注意，您可能需要 API 密钥才能向 Google 发出批量请求。

# c - EXIT_FAILURE 与退出（1）？

> ID：13667364
> 
> 赞同：62
> 
> 时间：2012-12-02T07:39:47.070
> 
> 标签：c, exit

有什么不同？哪个是首选，或者我应该什么时候分别使用每个？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-12-02T07:43:12.360

`exit(1)`（通常）表示终止不成功。但是，它的使用是不可移植的。例如，在[OpenVMS 上](http://en.wikipedia.org/wiki/OpenVMS)，`exit(1)`实际上表示成功。

Only`EXIT_FAILURE`是返回不成功终止的标准值，但`1`在许多实现中用于相同的值。

* * *

所以总结一下：
如果你想编写完美的可移植代码使用，

`EXIT_FAILURE`对于失败的情况。同时，
您可以使用`exit(0)`或`EXIT_SUCCESS`成功案例。

请注意，`EXIT_SUCCESS`或`0`两者相同。

* * *

参考：

**C99 标准：7.20.4.3`exit`功能**
**第 5段**

> 最后，控制权返回到主机环境。如果 status 的值为`zero`或 `EXIT_SUCCESS`，则返回成功终止状态的实现定义形式。如果 status 的值为`EXIT_FAILURE`，则返回状态未成功终止的实现定义形式。否则返回的状态是实现定义的。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-02T07:44:36.193

对于真正可移植的代码，`EXIT_FAILURE`是首选。C 标准仅定义三个值的含义：`EXIT_FAILURE`、`0`和`EXIT_SUCCESS`（与`0`和`EXIT_SUCCESS`本质上是同义词）。

从实际的角度来看，*大多数*典型系统也接受其他值。如果没记错的话，Linux 将允许您返回任何 8 位值，而 Windows 将返回 16 位值。除非您真的关心移植到 IBM 大型机、VMS 等，否则您可能并不关心大多数不支持至少 8 位返回值的系统。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-02T07:42:00.533

使用`EXIT_FAILURE`. 它是一个在整个操作系统中使用的常量。它的值可能不是 1，而且它在代码中更具描述性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T07:43:10.343

对于某些程序应该返回什么样的状态值，有一些约定。最常见的约定是 0 表示成功，1 表示失败。执行比较的程序使用不同的约定：它们使用状态 1 表示不匹配，使用状态 2 表示无法比较。如果现有约定对它有意义，您的程序应该遵循现有约定。

> 一些非 POSIX 系统对退出状态值使用不同的约定。`For greater portability`，您可以使用宏`EXIT_SUCCESS` 和`EXIT_FAILURE`分别表示成功和失败的常规状态值。它们在文件 stdlib.h 中声明。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-02T08:58:24.167

不仅 VMS 有自己的规则，AmigaDOS 还定义了低于 5 的返回码是可以的。

# c - C 中的 goto 语句和替代方案

> ID：13667373
> 
> 赞同：4
> 
> 时间：2012-12-02T07:41:01.977
> 
> 标签：c, goto

下面的程序应该找到 n × n 矩阵的第一个全零行（如果有的话）。这是解决问题的正确方法吗？在 C 或任何一般语言中是否有另一种好的结构化方法来处理这段代码？我正在尝试了解有关 goto 语句及其适当用途/替代方案的更多信息。我很感激任何帮助！

```
int first_zero_row = -1; /* none */
int i, j;
for (i = 0; i < n; i++) {
    for (j = 0; j < n; j++) {
        if (A[i][j]) goto next;
    }
    first_zero_row = i;
    break;
    next: ;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T07:51:56.987

我不反对`goto`在某些情况下使用，但我认为可以这样重写：

```
for (i = 0; i < n; i++) {
    for (j = 0; j < n; j++) {
        if (A[i][j]) break;
    }
    if (j==n) { /* the row was all zeros */
        first_zero_row = i;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T09:01:13.683

使用一个小辅助函数来简化循环中的代码怎么样：

```
bool is_zero_row(int* Row, int size)
{
    int j;

    for (j = 0; j < size; j++)
        if (Row[j] != 0)
            return false;

    return true;
} 
```

进而

```
int first_zero_row = -1; /* none */
int i;
for (i = 0; i < n; i++) {
    if (is_zero_row(A[i], n))
    {
        first_zero_row = i;
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T07:57:55.500

首先：是的，你的方法对我来说是正确的。你可以这样重写它：

```
int first_zero_row = -1; /* none */
int i, j;
for (i = 0; i < n; i++) {
    int all_zeroes = 1;
    for (j = 0; j < n; j++) {
        if (A[i][j]) {
            all_zeroes = 0;
            break;
        }
    }
    if (all_zeroes) {
        first_zero_row = i;
        break;
    }
} 
```

但我认为这实际上不如`goto`版本清楚。在像 Perl 这样提供循环标签的语言中，您可以这样做：

```
my $first_zero_row = -1;  # none
ROW:
for my $i (0 .. $n-1) {
    for my $j (0 .. $n-1) {
        next ROW if $A[$i][$j];
    }
    $first_zero_row = $i;
    last ROW;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T09:45:47.960

你的代码对我来说看起来很可读。不分青红皂白的猎巫`goto`是不好的。去阅读 Donald E. Knuth 的[Structured Programming with go to Statements](http://pplab.snu.ac.kr/courses/adv_pl05/papers/p261-knuth.pdf)，了解关于这个主题的有趣想法。

我的版本*带有* `goto`, 以获得最大的效率并且也非常易读：

```
int i, j;
for (i = 0; i < n; i++) {
    for (j = 0; j < n; j++)
        if (A[i][j]) goto not_this_row;
    goto row_found;
    not_this_row:
}
/* Not found case here */

row_found:
/* Found case, i is the first zero row. */ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T07:45:40.287

您可以使用一个变量作为`flag`. 对于`if (A[i][j]) goto next;`条件，将标志值修改为其他值而不是`goto next`.

然后稍后检查该标志值以执行其他操作，这`next`在您的情况下位于标签之后。

```
int flag = 0;
for ( i = 0; i < n; i++ ) {
    for ( j = 0; j < n; j++ ) {
        if ( A[i][j] ){
            flag = 1;
            break;
        }
    }
    if( flag == 1 ){
        // do your stuff 
        continue;
    }
    if( flag == 0 ){
        first_zero_row = i;
        break;
    } 
```

注意：要从`goto`您的代码中删除它可能需要您调整某些代码行的位置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-29T14:22:29.787

自从我使用我的第一个 goto 来打破......嗯......永远的嵌套循环，今天，我将对此进行权衡。我对此感到难过，所以我读了一些关于为什么 goto 被认为是邪恶的。

Dijkstra（和其他人）认为 goto 是邪恶的原因是代码是在块中构建的，其中每个块都有前置条件和后置条件。goto（或中断）意味着您不能保证代码块将为下一个块生成有效的后置条件作为前提条件（即您不能“证明您的代码正确”，因为中断/转到可能会跳过代码块的重要部分）

但是，我认为 goto 在您的示例中很好的原因是：您实际上是在前面设置了一个完全有效的后置条件 (first_zero_row = -1 ...ie: "no all-zero row found")。因此，您的块不可能进入无效的后置条件状态。

不过，可读性问题是另一回事。Goto 使代码变得相当不可读。因此，对于您的特定示例，可能会有更好的选择。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-04-22T11:59:52.017

在我看来，`GOTO`一切都是邪恶的。如果在任何情况下都需要它们，最好考虑“提取方法”重构。

需要使用“GOTO”是一个很好的指标，表明你的方法（或功能）太复杂了，你应该把它分成不同的部分。

例如，问题的给定示例可以（并且应该）重构为：

```
bool is_zero_row(int *row, int size){
    for(i = 0; i<size; ++i){
        if(row[i]) return false;
    }
    return true;
}

bool find_zero_row_in_array(int **A, int rows, int row_size){
    int i,j;
    for(i = 0; i < rows; ++i) {
        if(is_zero_row(A[i], row_size)) return true;
    }
    return false;
}

...
if(find_zero_row_in_array(A, n, n)){
    //Found
} else {
    //Not found
}
.... 
```

这比原来的更加灵活和可读。至少我们现在有一个函数可以用于具有不同行数和列数的任何数组，而不是假设它们是相同的。

# java - 从 .txt 文件中读取数据并将其存储在 JTable 中

> ID：13667374
> 
> 赞同：0
> 
> 时间：2012-12-02T07:41:17.520
> 
> 标签：java, linux, swing, file-io, jtable

我想将命令“ps -e > /home/workspace/MyProject/List.txt”的输出重定向到`JTable`. 有什么办法吗？如果是，如何？

PS：我希望此命令连续执行，直到用户退出，并且`JTable`每次执行此命令时都更新。

```
 runtime.exec("ps -e > /home/workspace/MyProject/List.txt"); 
```

我使用 watchservice API 来监视 MyProject 目录中的更改。

所以经过这么多的编辑，我开始意识到命令没有被 run.exec() 执行当我从终端执行它时，它运行良好，但是当我在我的 Java 程序中运行它时，没有创建文件。谁能告诉我我做错了什么？我正在使用 Ubuntu 12.04。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:11:09.897

用windows`Tasklist`命令测试，你用linux命令试试。

```
public class ProcessListTable {

  private String GetProcessListData() {
    Process p;
    Runtime runTime;
    String process = null;
    try {
        System.out.println("Processes Reading is started...");

        //Get Runtime environment of System
        runTime = Runtime.getRuntime();

        //Execute command thru Runtime
        // use appropriate command for linux "ps"
        p = runTime.exec("tasklist /FO CSV /nh");

        //Create Inputstream for Read Processes
        InputStream inputStream = p.getInputStream();
        InputStreamReader inputStreamReader = new InputStreamReader(inputStream);
        BufferedReader bufferedReader = new BufferedReader(inputStreamReader);

        ArrayList<String> taskEntries = new ArrayList();
        String line = bufferedReader.readLine();
        while (line != null) {
            taskEntries.add(line);
            line = bufferedReader.readLine();
        }
        bufferedReader.close();
        inputStreamReader.close();
        inputStream.close();

        MyTableModel myTableModel = new MyTableModel();
        myTableModel.update(taskEntries);
        JTable table = new JTable(myTableModel);
        JFrame frame = new JFrame("TaskList");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.add(new JScrollPane(table));
        frame.pack();
        frame.setVisible(true);

        System.out.println("Processes are read.");
    } catch (IOException e) {
        System.out.println("Exception arise during the read Processes");
        e.printStackTrace();
    }
    return process;
}

 public class MyTableModel extends AbstractTableModel {

    String[] columnName = new String[]{"Image Name", "PID", "Session Name", "Session#", "Mem Usage"};
    String[][] valueA;

    public void update(ArrayList<String> taskEntries) {
        valueA = new String[taskEntries.size()][columnName.length];
        int size = taskEntries.size();
        for (int i = 0; i < size; i++) {
            String entry = taskEntries.get(i);
            String[] splitValues = entry.split(",");
            for (int j = 0; j < splitValues.length; j++) {
                String v = splitValues[j];
                v = v.replaceAll("\"", "");
                // mem contains "," so added mem usage at the end
                if (j >= 5) {
                    valueA[i][4] = valueA[i][4] + v;
                } else {
                    valueA[i][j] = v;
                }
            }
        }
    }

    @Override
    public int getRowCount() {
        return valueA.length;
    }

    @Override
    public String getColumnName(int column) {
        return columnName[column];
    }

    @Override
    public int getColumnCount() {
        return columnName.length;
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        return valueA[rowIndex][columnIndex];
    }
 }

 public static void main(String[] args) {
    ProcessListTable gpl = new ProcessListTable();
    gpl.GetProcessListData();
 }
} 
```

# android - 3cxphone 如何在没有原生 sip 堆栈的情况下在 android 上工作

> ID：13667376
> 
> 赞同：2
> 
> 时间：2012-12-02T07:41:39.677
> 
> 标签：android, native, sip

我读过一些帖子说三星 Galaxy s2 不支持本机 sip 堆栈，但是 3cxphone 在 Galaxy s2 中如何工作？

它是否依赖于本机 sip 堆栈，我如何为 android 创建一个类似于 3cxphone 的应用程序？

我试图通过 android sdk 中的 SIP 库来做一个，但它在 Galaxy s2 上不起作用。

也许我误解了本机 sip 堆栈是什么？

# c# - 使用 Tag Lib C# 在 Mp3 中嵌入专辑封面

> ID：13667378
> 
> 赞同：2
> 
> 时间：2012-12-02T07:41:58.093
> 
> 标签：c#, ios6, taglib, id3-tag, taglib-sharp

尝试使用 c# 标签库添加专辑封面，

```
 TagLib.File trackFile = TagLib.File.Create(strLocalFile);
  Picture picture = new Picture("Picture path");
  picture.Type = PictureType.FrontCover;
  picture.MimeType = "image/jpeg";
  picture.Description = "Front Cover";        
  trackFile.Tag.Pictures = new IPicture[1] { picture };
  trackFile.Save(); 
```

我在 windows 媒体播放器、itunes 和 iphone 中获取图片（仅在纵向模式下）。当我切换到横向模式时，会显示专辑封面，但是当滑过封面流时专辑封面会消失。

我在代码中遗漏了什么吗？

我在 iPhone 4s 上使用 iTunes 11、iOS 6

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T20:50:16.770

让我自己举个例子：

我发现 iTunes 讨厌 UTF-16，这就是问题所在。

```
targetMp3File = TagLib.File.Create(...);

// define picture
TagLib.Id3v2.AttachedPictureFrame pic = new TagLib.Id3v2.AttachedPictureFrame();
pic.TextEncoding = TagLib.StringType.Latin1;
pic.MimeType     = System.Net.Mime.MediaTypeNames.Image.Jpeg;
pic.Type         = TagLib.PictureType.FrontCover;
pic.Data         = TagLib.ByteVector.FromPath(...);

// save picture to file
targetMp3File.Tag.Pictures = new TagLib.IPicture[1] { pic };    
targetMp3File.Save(); 
```

所以基本上整个事情都在`pic.TextEncoding`排队。此外，我通过 .NET 常量分配了 Mime 类型。

**资料来源：** [在 .Net 中使用 Taglib-sharp 2.0.4.0 编写 ArtWork 时遇到问题](https://stackoverflow.com/questions/7237346/having-trouble-writing-artwork-with-taglib-sharp-2-0-4-0-in-net/13688851#13688851)

这应该适用于 iTunes 和 iPod/iPad/iPhone。但这仅适用于 MP3 文件...

# django - 无法使用 django-registration 创建用户配置文件

> ID：13667382
> 
> 赞同：5
> 
> 时间：2012-12-02T07:42:07.273
> 
> 标签：django, django-registration

我正在使用 django-registration 应用程序。我正在尝试创建一个社交网站。我是网站开发的新手。这是我得到的错误：

环境：

请求方式：POST 请求网址：127.0.0.1:8000/accounts/register/

Django 版本：1.4.2 Python 版本：2.7.2

```
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.humanize',
 'registration_defaults',
 'django.contrib.admin',
 'registration',
 'polls')
Installed Middleware:
('django.middleware.csrf.CsrfViewMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/Library/Python/2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Library/Python/2.7/site-packages/registration/views.py" in register
  187\.             new_user = backend.register(request, **form.cleaned_data)
File "/Library/Python/2.7/site-packages/registration/backends/default/__init__.py" in register
  79\.                                                                     password, site)
File "/Library/Python/2.7/site-packages/django/db/transaction.py" in inner
  209\.                 return func(*args, **kwargs)
File "/Library/Python/2.7/site-packages/registration/models.py" in create_inactive_user
  78\.         new_user = User.objects.create_user(username, email, password)
File "/Library/Python/2.7/site-packages/django/contrib/auth/models.py" in create_user
  160\.         user.save(using=self._db)
File "/Library/Python/2.7/site-packages/django/db/models/base.py" in save
  463\.         self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File "/Library/Python/2.7/site-packages/django/db/models/base.py" in save_base
  565\.                 created=(not record_exists), raw=raw, using=using)
File "/Library/Python/2.7/site-packages/django/dispatch/dispatcher.py" in send
  172\.             response = receiver(signal=self, sender=sender, **named)
File "/Users/dineshsingh/Desktop/django/mysite/users/models.py" in create_user_profile
  20\.         UserProfile.objects.create(user=instance)
File "/Library/Python/2.7/site-packages/django/db/models/manager.py" in create
  137\.         return self.get_query_set().create(**kwargs)
File "/Library/Python/2.7/site-packages/django/db/models/query.py" in create
  377\.         obj.save(force_insert=True, using=self.db)
File "/Library/Python/2.7/site-packages/django/db/models/base.py" in save
  463\.         self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File "/Library/Python/2.7/site-packages/django/db/models/base.py" in save_base
  551\.                 result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
File "/Library/Python/2.7/site-packages/django/db/models/manager.py" in _insert
  203\.         return insert_query(self.model, objs, fields, **kwargs)
File "/Library/Python/2.7/site-packages/django/db/models/query.py" in insert_query
  1593\.     return query.get_compiler(using=using).execute_sql(return_id)
File "/Library/Python/2.7/site-packages/django/db/models/sql/compiler.py" in execute_sql
  910\.             cursor.execute(sql, params)
File "/Library/Python/2.7/site-packages/django/db/backends/util.py" in execute
  40\.             return self.cursor.execute(sql, params)
File "/Library/Python/2.7/site-packages/django/db/backends/sqlite3/base.py" in execute
  344\.             return Database.Cursor.execute(self, query, params)

Exception Type: DatabaseError at /accounts/register/
Exception Value: no such table: users_userprofile 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T13:44:35.293

```
According to the Error stack, I think you are doing it in the wrong manner. 
It may be that you are creating an app  named `users` which is not required here. 
```

以下是如何使用的分步过程`django-registration`。

安装 django-registration 后，我们需要将它添加到`settings.py`文件中，以确保我们的 django 引擎读取并加载它。

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.admin',
    'registration',     #<--Here I have added
) 
```

现在您需要在文件中添加更多设置`settngs.py`：

```
ACCOUNT_ACTIVATION_DAYS = 2
EMAIL_HOST = 'localhost'
DEFAULT_FROM_EMAIL = 'webmaster@localhost'
LOGIN_REDIRECT_URL = '/' 
```

现在更新`urls.py`文件以将所有`/accounts/`请求发送到`django-registration`应用程序。

```
from django.conf.urls.defaults import *
from django.views.generic.simple import direct_to_template
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    ...
    (r'^accounts/', include('registration.urls')),
    ...
) 
```

现在您需要创建一些模板来支持您的`django-registration`.

```
login.html — user login form
logout.html — shown after a user has logged out
password_change_form.html — password change form
password_change_done.html — shown after successful password change
password_reset_form.html — ask user for email to send password-reset mail to
password_reset_email.html — template for password-reset mail
password_reset_done.html — shown after password-reset email has been sent
password_reset_confirm.html — ask user for new password after reset
password_reset_complete.html — shown after successful password reset
registration_form.html — user registration form
registration_complete.html — shown after a user has registered
activation_email_subject.txt — subject of activation email
activation_email.txt — template for activation email
activate.html — shown after a user has activated his account 
```

您需要放入这些文件的基本模型可以是[@the-django-registration-git-hub-link](https://github.com/yourcelf/django-registration-defaults/tree/master/registration_defaults/templates/registration)

现在我希望你能让它运行起来。

还有几个链接可以查看。 [链接 1](http://devdoodles.wordpress.com/2009/02/16/user-authentication-with-django-registration/) [链接 2](http://agiliq.com/books/djenofdjango/chapter5.html#reusable-apps)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:50:29.127

你有权利`AUTH_PROFILE_MODULE`吗`settings.py`？

这似乎应该是：

```
 AUTH_PROFILE_MODULE = 'registration.RegistrationProfile' 
```

# android - Android FB SDK3.0 - 如何检查用户是否登录？

> ID：13667383
> 
> 赞同：3
> 
> 时间：2012-12-02T07:42:16.573
> 
> 标签：android, facebook, facebook-android-sdk

嗨，我正在使用适用于 Android 的 Facebook sdk3.0。如何检查用户是否登录？

目前我正在使用这个：

```
public static boolean isUserLoggedInWithFacebook() {
    Session session = Session.getActiveSession();
    if(session != null && session.isOpened()) 
        return true;
    return false;
} 
```

但它有时会`false`在用户仍然登录时给出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T08:02:02.570

尝试使用`facebook.isSessionValid()`. 如果用户退出，它应该返回 false。

# jquery - 自动刷新表不起作用

> ID：13667387
> 
> 赞同：0
> 
> 时间：2012-12-02T07:43:04.167
> 
> 标签：jquery, ajax, html-table, refresh

我想每 5 秒刷新一次表..

现在我正在使用这段**代码**：

```
<script type="text/javascript">
    $(document).ready(function(){
      refreshTable();
    });

    function refreshTable(){
        $('#content').load('refresh_data_dapur.php');
        setTimeout(refreshTable, 5000);
    }
</script> 
```

**refresh_data_dapur.php**

```
$sql = "select t.no_meja, d.nama_menu,d.jumlah,t.status from detail_transaksi d join transaksi t on(d.id_transaksi=t.id_transaksi) where t.status ='pending' and d.status_menu = 'pending'";
$result = mysql_query($sql);
                    echo '<table cellpadding="5" cellspacing="0" border="1">';
                    echo '<tr>';
                    echo    '<th>No Meja</th>';
                    echo    '<th>Nama Menu</th>';
                    echo    '<th>Jumlah</th>';      
                    echo    '<th>Status</th>';      
                    echo '</tr>';
                    while($detail_transaksi = mysql_fetch_array($result))
                    {
                    echo    '<tr>';
                    echo    '<td>';
                    echo    $detail_transaksi['no_meja'];
                    echo'</td>';
                    echo    '<td>';
                    echo $detail_transaksi['nama_menu'];
                    echo '</td>';
                    echo    '<td>';
                    echo $detail_transaksi['jumlah'];
                    echo '</td>';
                    echo    '<td>';
                    echo $detail_transaksi['status'];
                    echo '</td>';
                    echo  '</tr>';
                    } 
```

在我的**html**中：

```
<div id="content">

</div> 
```

当我尝试加载页面时，它没有显示任何内容...

当我在 html 中修改成这段代码时，它显示了数据，但表格仍然没有刷新......

```
<div id="content">
    <?php include("refresh_data_dapur.php");?>
 </div> 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T07:51:28.303

这里一切都很好。但你正在使用`setTimeout(refreshTable, 5000);`. 它将`refreshTable`在页面加载 5 秒后运行一次该功能。你应该使用

```
setInterval(refreshTable, 5000); 
```

反而。这将每五秒运行一次并将其保留在函数之外和`refreshTable`函数之后，因为您在声明之前在 setTimeout 中使用它。这可能是原因。

# mysql - 限制sql中统计的记录数

> ID：13667392
> 
> 赞同：0
> 
> 时间：2012-12-02T07:43:15.777
> 
> 标签：mysql

在我的数据库中，我可以很容易地看到我的表中的最后 50 个人，state=NY 和 postcode=12405，我可以查看表以查看他们是否有狗。

```
 SELECT state, postcode, havedog
    FROM address
    WHERE (state=NY) AND (postcode=12405)
    ORDER BY surname DESC
    LIMIT 0 , 5 
```

哪个返回

```
state   postcode    havedog
NY  12405   yes
NY  12405   yes
NY  12405   no
NY  12405   no
NY  12405   yes 
```

我还可以计算我的整个数据库中有多少人有一只狗，其中 state=NY 和 postcode=12405

```
 SELECT state, postcode COUNT(havedog) AS DOG
    FROM address
    WHERE (state=NY AND postcode=12405 ) AND (havedog=yes) 
```

但是我不知道如何限制计数，所以它只计算 state=NY 和 postcode=12405 和 havedog=yes 的最后 5 条记录，是否可以对 Count 函数应用限制？

例如，鉴于上表，我的计数结果应该是 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:47:37.330

使用子选择：

```
SELECT COUNT(*) FROM
(
    SELECT state, postcode, havedog
    FROM address
    WHERE state = 'NY' AND postcode = 12405
    ORDER BY surname DESC
    LIMIT 5
) T1
WHERE havedog = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T07:47:48.373

你可以这样做：

```
SELECT
  state,
  postcode
  COUNT(havedog) AS DogCounts
FROM
(
  SELECT state, postcode, havedog
  FROM address
  WHERE (state=NY) AND (postcode=12405)
  ORDER BY surname DESC
  LIMIT 50
) t
GROUP BY state, postcode 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T07:49:41.927

```
SELECT top 50 state, postcode, COUNT(havedog) OVER () AS DOG
FROM address 
WHERE (state='NY' AND postcode=12405 ) AND (havedog='yes') 
```

# php - .htaccess 重写 id

> ID：13667393
> 
> 赞同：0
> 
> 时间：2012-12-02T07:43:55.257
> 
> 标签：php, .htaccess

我试图阻止人们在将鼠标悬停在链接上时看到“混乱”的 URL。像这个：

[http://screensnapr.com/v/4z84A3.png](http://screensnapr.com/v/4z84A3.png)

现在，我将它放在 .htaccess 中，如下所示：

```
RewriteEngine On 
RewriteRule ^forms/([0-9]+).*/?$ _lib/forms/report.php?id=$1 [L,QSA] 
```

但显然我做错了什么。这是我的链接：

```
<a style="float: right;padding-right: 15px; color: #3BC3C0;" href="../../_lib/forms/report.php?id=<?php echo $row['id'] ?>" rel="facebox"><img src="../../_lib/images/notice.png"></a> 
```

你们碰巧知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:12:20.313

```
RewriteRule forms/(\d+)/.*$ /foldername/foldername/_lib/forms/report.php?id=$1 
```

HTML

```
<a style="float: right;padding-right: 15px; color: #3BC3C0;" href="/foldername/foldername/_lib/forms/report.php?id=<?php echo $row['id'] ?>" rel="facebox"><img src="/foldername/foldername/_lib/images/notice.png"></a> 
```

您需要为链接使用绝对 url，所以不要使用 ../../_lib/forms 使用**/foldername/foldername/_lib/forms/**然后更新我使用该路径的重写规则中的路径部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T08:03:35.323

尝试这个：

```
RewriteRule ^forms/([0-9]\d*)/.*$ /_lib/forms/report.php?id=$1 
```

这是假设您的 _lib 目录位于网站的文档根目录中。最好从 Document Root 提供指向 PHP 文件的显式路径。

# python - 如何使用 PyGTK 事件处理程序手动触发事件？

> ID：13667394
> 
> 赞同：3
> 
> 时间：2012-12-02T07:43:59.423
> 
> 标签：python, events, triggers, pygtk

将事件连接到函数后，我想要一种手动触发事件的方法（没有实际发生事件）。我正在寻找类似 jQuery 的 .trigger() 函数的东西。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T09:46:37.517

使用小部件上的[`emit`方法](http://developer.gnome.org/pygobject/stable/class-gobject.html#method-gobject--emit)，例如`button.emit("clicked")`.

# c++ - C++ 混合 printf 和 cout

> ID：13667397
> 
> 赞同：2
> 
> 时间：2012-12-02T07:44:59.117
> 
> 标签：c++, printf, cout

> **可能重复：**
> [混合 cout 和 printf 以获得更快的输出](https://stackoverflow.com/questions/1924530/mixing-cout-and-printf-for-faster-output)

我正在使用 Microsoft Visual Studio 6.0。

下面的程序，

```
#include "stdafx.h"
#include "iostream.h"

int main(int argc, char* argv[])
{
printf("a");
printf("b");
printf("c");
return 0;
} 
```

产生“abc”。

而下面的程序，

```
#include "stdafx.h"
#include "iostream.h"

int main(int argc, char* argv[])
{
printf("a");
cout<<"b";
printf("c");
return 0;
} 
```

产生“acb”。

有什么问题？我不能在同一个程序中混合 cout 和 printf 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T08:01:05.577

该标准说：

> 当标准 iostream 对象`str`与标准 stdio 流*同步*`f`时，插入字符的效果`c`是
> 
> ```
> fputc(f, c); 
> ```
> 
> 是一样的效果
> 
> ```
> str.rdbuf()->sputc(c); 
> ```
> 
> 对于任何字符序列；

默认情况下，除非您调用 ，否则`sync_with_stdio(false)`与`cout`同步`stdout`。因此，您的第二个代码片段相当于：

```
printf("a");
fputc(stdout, 'b')
printf("c"); 
```

即使在您的实施中也必须产生“abc”。

底线：MSVC6 不符合标准，这并不奇怪，因为它已经很老了。

# objective-c - 调用自定义微调器后视图未收到触摸

> ID：13667401
> 
> 赞同：0
> 
> 时间：2012-12-02T07:45:19.180
> 
> 标签：objective-c, ios, cocoa-touch

我按照这里的指南弹出我自己的自定义视图以表明我正在搜索用户结果：http: [//joris.kluivers.nl/blog/2012/03/02/custom-popups-revisited/](http://joris.kluivers.nl/blog/2012/03/02/custom-popups-revisited/)

找到搜索结果后，我关闭自定义视图，立即弹出一个 Flurry 广告。我点击广告上的 x 按钮，然后我的下一个视图出现。此视图不再接收任何触摸事件，底部的标签栏也不起作用。我怀疑当 Flurry 广告出现时，它必须对自定义视图进行动画处理（通过转换为 0.0f），但我不确定。我包括了如何创建微调器以及解雇的代码。

注意：我已确认该问题与我的 customSpinner 消失时以模态方式显示的 Flurry 广告有关。我不知道如何解决它。当我不显示广告时，触摸事件注册良好。

PCFFinder.c

```
- (void)queryServer:(NSString *)queryString  {
    __block PCFCustomSpinner *spinner = [[PCFCustomSpinner alloc] initWithFrame:CGRectMake(0, 0, 200, 200):@"Searching.."];
    [spinner show];
    NSString *url = @"https://selfservice.mypurdue.purdue.edu/prod/bwckschd.p_get_crse_unsec";
    NSString *referer = @"https://selfservice.mypurdue.purdue.edu/prod/bwckgens.p_proc_term_date";
    dispatch_queue_t task = dispatch_queue_create("Task 3", nil);
    dispatch_async(task, ^{
        NSString *webData = [PCFWebModel queryServer:url connectionType:@"POST" referer:referer arguements:queryString];
        if (webData) {
            classesOffered = [PCFWebModel parseData:webData type:2];
            dispatch_async(dispatch_get_main_queue(), ^{
                [spinner dismiss];
                spinner = NULL;
                if ([classesOffered count] > 0) {
                    if (self.view.window)
                        searching = NO;
                        //the ad pops up in the next view controllers viewWillAppear method and after exiting the ad, the views no longer work
                        [self performSegueWithIdentifier:@"ChooseClass" sender:self];
                }else {
                    [spinner dismiss];
                    PCFCustomAlertView *alert = [[PCFCustomAlertView alloc] initAlertView:CGRectMake(0, 0, 300, 200) :@"Search Results" :@"No results were found. Please try broadening the search or double check your input." :@"OK"];
                    [alert show];
                    //the views still work here though..
                    searching = NO;
                }
            });
//rest omitted because it is irrelevant.
} 
```

CustomPopup.c

```
-(void)dismiss
{
    __block UIWindow *animatedWindow = self.window;
    [UIView animateWithDuration:0.3f delay:0.0f options:UIViewAnimationCurveEaseOut animations:^{
        animatedWindow.transform = CGAffineTransformMakeScale(0.0f, 0.0f);
    }completion:^(BOOL finished) {
        animatedWindow.hidden = YES;
        animatedWindow = nil;
    }];
}

-(void)show
{
    self.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];
    self.window.windowLevel = UIWindowLevelAlert;
    self.window.backgroundColor = [UIColor clearColor];
    self.center = CGPointMake(CGRectGetMidX(self.window.bounds), CGRectGetMidY(self.window.bounds));
    [self.window addSubview:self];
    [self.window makeKeyAndVisible];

    //animated
    self.window.transform = CGAffineTransformMakeScale(1.5f, 1.5f);
    self.window.alpha = 0.0f;

    __block UIWindow *animationWindow = self.window;
    [UIView animateWithDuration:0.3f delay:0 options:UIViewAnimationCurveEaseIn animations:^{
        animationWindow.transform = CGAffineTransformMakeScale(1.0f, 1.0f);
        animationWindow.alpha = 1.0f;
    }completion:nil];

} 
```

我尝试在 viewWillAppear 方法中将视图设置为第一响应者，但这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:19:19.487

在您的解除方法中，您将单个窗口设置为具有零比例并隐藏。这肯定是你的问题。动画弹出视图然后将其从超级视图中删除。

# javascript - 是什么导致我的画布绘图在某些值处中断和跳过（2 ^ 15，一个）？

> ID：13667404
> 
> 赞同：2
> 
> 时间：2012-12-02T07:45:31.920
> 
> 标签：javascript, canvas, matrix, easeljs

我正在使用 EaselJS 开发基于 2d 画布的应用程序，用户可以通过拖动背景在 xy 平面上无限移动。想想谷歌地图，除了背景是重复的瓷砖。

运动的代码非常简单，看起来像这样：

```
// container  - the createjs.Container being panned
// background - a createjs.Shape child of container, on which the 
//              background is drawn
background.onPress = function(evt) {
  var x = evt.stageX, y = evt.stageY;

  evt.onMouseMove = function(evt) {
    // the canvas is positioned in the center of the window, so the apparent 
    // movement works by changing the registration point of the container in 
    // the opposite direction.
    container.regX -= evt.stageX - x;
    container.regY -= evt.stageY - y;
    x = evt.stageX;
    y = evt.stageY;
    stage.update();
  };

  evt.onMouseUp = function(evt) {
    // Here the background would be redrawn based on the new container coords.  
    // However the issue occurs even before the mouse is released.
    background.redraw();
    stage.update();
  };
}; 
```

所有工作都按预期工作，*直到*任一轴上达到 32678px (2^15)。在不同的浏览器中发生的事情是不同的，但它首先发生的点是相同的。

在 Firefox 中，它会突然移动一大块像素 (~100) 而不是 1。然后它会在 65538 (2^16+2) 处再次发生，之后可能会更多，但我没有亲眼目睹。在故障点之后，阻力将继续顺利，如预期的那样，但保持移动。

在 Chrome 中，效果更加显着。绘图中断并导致在 32768 处的页面上重复出现约 100 像素宽的背景“条纹”，并且在重绘时不会自行纠正。

奇怪的是，EaselJS 中的数字并没有反映这个问题。容器变换矩阵的唯一变化是`tx`or`ty`递增 1。其他矩阵没有变化。似乎*EaselJS*的所有数字都是正确的。

任何人都可以阐明这个问题吗？

**编辑：**
我通过使用计算的 regX/regY 重绘容器的某些部分来解决这个问题，而不是尝试在画布上转换非常大的 regX/regY 坐标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:36:47.917

这个问题可能与

[HTML 画布的最大尺寸是多少？](https://stackoverflow.com/questions/10259108/what-is-the-maximum-size-for-an-html-canvas)

根据我收集的浏览器用于`short int`存储画布大小的信息，最大可能值为 32,767。

可能与您的问题相关的链接，

*   [Mozilla - HTML5 Canvas 速度慢/内存不足](https://bugzilla.mozilla.org/show_bug.cgi?id=649924)
*   [https://stackoverflow.com/a/12535564/149636](https://stackoverflow.com/a/12535564/149636)

# python - Django安装问题

> ID：13667405
> 
> 赞同：0
> 
> 时间：2012-12-02T07:45:33.563
> 
> 标签：python, django, installation

我正在安装 Django，并且在运行`python setup.py install`. 它未被识别为外部或内部命令。我确实将路径更改为`C:\Python27;`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:11:45.543

您需要将`PATH`环境变量设置为包括：

```
C:\Python27 
```

如果您安装[pip](http://pypi.python.org/pypi/pip)，您还需要添加：

```
C:\Python27\Scripts 
```

给你的`PATH`

# css - 有什么方法可以仅使用 CSS 来删除 li 最后一个子边框

> ID：13667408
> 
> 赞同：1
> 
> 时间：2012-12-02T07:45:58.057
> 
> 标签：css

假设我有一个**ul li 结构**，我想删除**最后一个 li 边框**，该边框也支持**IE 6**，**仅使用 CSS**（在我的项目中仅使用 css 是强制性的）。

```
<ul>
    <li>HI</li>
    <li>HI</li>
    <li>HI</li>
    <li>HI</li>
</ul>' 
```

我想要一种在 IE6 中也可以使用的输出类型... ![在此处输入图像描述](../Images/e4051e83771e1bccec13d1e11ee52cf4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:13:43.107

由于支持 IE6 是一项要求，如果您不想使用 Javascript 或添加类（首选方法），您将不得不变得有点笨拙。

目前尚不清楚您要寻找什么外观，但这是一种保留子弹的方法。这假设边界已定义并且您想要*隐藏*一个。您可以`overflow: hidden`在`<ul>`和`margin-bottom: -1px`上设置`<li>`。这在 IE6 中工作得很好。

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/bUeP3/)]]]

### 输出：

![输出](../Images/5365757b8a2b22f2152870ceb5d27e06.png)

### CSS：

```
li {
    border: 1px solid black;
    margin-bottom: -1px;
}

ul {
    overflow: hidden;
}
​​ 
```

### HTML：

```
<ul>
    <li>one</li>
    <li>two</li>
    <li>three</li>        
</ul> 
```

这是另一种方法，您只是不定义底部边框。

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/nC8fa/)]]]

### CSS：

```
li {
    border-top: 1px solid black;
    border-right: 1px solid black;
    border-left: 1px solid black;
} 
```

### HTML：

```
<ul>
    <li>one</li>
    <li>two</li>
    <li>three</li>        
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T08:10:16.103

您可以通过将类添加到最后一个 li 来做到这一点，因为它不支持`last-selector`并且没有其他方法`+`

另一个可能不是纯 css 但我认为它会有所帮助的选项是 jQuery 你可以使用 jQuery，因为 jQuery 支持`last-child`

尝试

```
$(function(){
   $("ul li:last-child").css("border","none")
}) 
```

它将支持几乎所有的浏览器

除了有特殊要求外，考虑 ie6 也不是好主意。而是 facebook 和许多大网站不考虑 ie6 检查[**浏览器统计**](http://www.w3counter.com/globalstats.php) ie6 甚至不持有**.5%**所以我建议不要考虑 ie6

> ![在此处输入图像描述](../Images/b6397babfcf347bc436aa83b0e8c1c11.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T08:51:14.867

下面是解决方案（在 IE9 的 quirks 模式下测试过，相当于 IE6，但让我知道结果，我坚信它应该可以工作）：

```
<html>
<head>
  <style>
    ul li{
        border:1px solid red;
    }
    ul li.lastchild{
        border-bottom: 0px; // Or use "border: 0px;" if you completely 
                            // want to remove the border
    }
  </style>
</head>
<body>
    <ul>
        <li>HI</li>
        <li>HI</li>
        <li>HI</li>
        <li class="lastchild">HI</li>
    </ul>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-02T17:40:18.080

经过长时间的研究，我得到的结果是 CSS 中没有一个方法可以删除最后一个 li 边框，这也适用于 IE6 ......所以你必须在最后一个 li 元素上添加一个类，或者你使用 jquery 来删除最后一个 li 边框.......

**结果：- 仅使用 CSS 无法实现此目标.......**

# javascript - 不带预览/对话框的直接打印

> ID：13667417
> 
> 赞同：0
> 
> 时间：2012-12-02T07:47:48.040
> 
> 标签：javascript, jquery, html, css

有没有办法通过一个按钮直接打印内容而没有预览或打印对话框？我的代码

```
<head>
<style type="text/css">

#printable { display: none; }

@media print
{
    #non-printable { display: none; }
    #printable { display: block; }
}
</style>
</head>
<body>
<div id="non-printable">
    MY normal page contents
</div>

<div id="printable">
    Printer version
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:07:24.510

不，您不能“静默”打印

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-05T02:20:20.720

此处提供了无声打印技术列表，这些技术往往涉及支持云的打印机或客户端/服务器端中间件。 [将 NPAPI 放到 Chrome 浏览器上后替代 Jzebra/QZ Java Raw Print Plugin](https://stackoverflow.com/questions/27057816)

# prolog - 如何从 Prolog 中的列表中获取每个连续元素

> ID：13667419
> 
> 赞同：0
> 
> 时间：2012-12-02T07:48:28.807
> 
> 标签：prolog

假设我有一个清单 `[[a,b,c],[d,e,f],[g,h,i]]`

我想获取每个连续的元素并将其放在另一个谓词中。

```
func(a,b).
func(b,c).

func(d,e).
func(e,f).

func(g,h).
func(h,i). 
```

我已经编写了要放入的谓词，但是我很难从列表列表中获取两个元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:00:05.413

你可以试试 ：

```
consecutive(L, R) :-
    maplist(create_func, L, RT),
    flatten(RT, R).

create_func([A,B], [func(A,B)]) :- !.

create_func([A,B | T], [func(A,B) | R]) :-
    create_func([B | T], R). 
```

# javascript - 如果/或比较似乎溢出到函数调用中？

> ID：13667423
> 
> 赞同：1
> 
> 时间：2012-12-02T07:48:50.803
> 
> 标签：javascript

我对此完全感到困惑。在我调用“setCookie”的那一行，如果第二个函数参数与上面的 current_cat OR 比较相同（即“art”），则整个 if 语句都会中断（并且函数不会在其中调用）。如果我更改参数使其不匹配（即“art_z”），则代码有效。多个“if”块会出现问题；但该代码仅适用于一个“if”块。没有多少黑客可以解决这个问题 - 有什么想法吗？提前非常感谢。

```
 var current_cat = getCookie("FOF_CURRENT_CATEGORY");

    if (menuitem == "menu_art" || current_cat == "art")  
    { 
    document.getElementById("menu_arc").className = "amble12graylight";
    document.getElementById("menu_art").className = "amble14blackregular";
    document.getElementById("menu_des").className = "amble12graylight";  
    document.getElementById("menu_fas").className = "amble12graylight";  
    document.getElementById("menu_sch").className = "amble12graylight";
    document.getElementById("menu_man").className = "amble12graylight";  
    setCookie("FOF_CURRENT_CATEGORY","art",365);
    }

    if (menuitem == "menu_arc" || current_cat == "arc")  
    { 
    document.getElementById("menu_arc").className = "amble14blackregular";
    document.getElementById("menu_art").className = "amble12graylight";
    document.getElementById("menu_des").className = "amble12graylight";  
    document.getElementById("menu_fas").className = "amble12graylight";  
    document.getElementById("menu_sch").className = "amble12graylight";
    document.getElementById("menu_man").className = "amble12graylight";  
    setCookie("FOF_CURRENT_CATEGORY","arc",365);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T08:30:06.717

看来您的 setCookie 方法有问题。

添加一个调试器并检查那里似乎有什么问题。

或者，如果您可以共享可以复制的代码，那将有所帮助。

# node.js - Underscore.js _.extend 函数在模式中未定义时不会复制猫鼬模型属性？

> ID：13667429
> 
> 赞同：1
> 
> 时间：2012-12-02T07:49:46.873
> 
> 标签：node.js, mongoose, underscore.js

为什么我不能使用下划线（_）扩展来更新模式定义中未定义属性的猫鼬模型。有没有办法解决这个问题？

节点型号：

```
var mongoose = require('mongoose')
  , Schema = mongoose.Schema

var NodeSchema = new Schema({
    label: {type : String, default : 'none'}
}, { strict: false })

mongoose.model('Node', NodeSchema) 
```

节点控制器：

```
var node = new Node();
node = _.extend(node, {"EXTENDNOTinSchema":"TRUE"});
console.log("extend: " + node);
node.set("SETNOTinSchema","TRUE");
console.log("set: " + node); 
```

控制台输出：

```
extend: { __v: 0,
  _id: 50bb05656880a68976000001,
  label: 'none' }

set: { __v: 0,
  _id: 50bb05656880a68976000001,
  label: 'none' 
  SETNOTinSchema: TRUE} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T03:58:33.377

发生这种情况是因为如果架构中没有某些内容，则 Mongoose 无法使用“ [defineProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty) ”，并且这会将分配视为任何其他分配。

所以首先，要清楚。

```
node = _.extend(node, {"EXTENDNOTinSchema":"TRUE"}); 
```

与此相同：

```
node['EXTENDNOTinSchema'] = 'TRUE'; 
```

在一般情况下，这与此完全不同。

```
node.set("SETNOTinSchema","TRUE"); 
```

诀窍是 Mongoose 很聪明，并且使用`defineProperty`我上面提到的函数，它可以绑定一个函数来调用这样的事情：

```
node['INSCHEMA'] = 'something'; 
```

但是对于不在模式中的东西，它不能这样做，所以分配就像一个正常的分配一样工作。

我认为让你绊倒的部分`console.log`是在做一些隐藏的魔法。如果您查看[文档](http://nodejs.org/api/stdio.html#stdio_console_log_data)，`console.log`将调用`inspect`传递给它的对象的方法。在 Mongoose 的情况下，它的模型不直接将属性存储在模型对象上，它们存储在内部属性上。当您分配给使用`defineProperty`或调用监视的属性时`set`，它将值存储在内部对象上。当您创建`log`模型时，会`inspect`打印出内部模型内容，使模型值看起来像是直接存储在对象上。

所以当你这样做时

```
console.log(node); 
```

你真正看到的是

```
console.log(node.somehiddenproperty); 
```

所以你的问题的答案是真的，如果你有一堆不在模式中的值，你不能使用`_.extend`. 相反，只需使用它，`set`因为它无论如何都需要一个对象。

```
node.set({"EXTENDNOTinSchema":"TRUE"}); 
```

# c++ - 删除模板化 C++ 二维数组

> ID：13667431
> 
> 赞同：1
> 
> 时间：2012-12-02T07:50:13.037
> 
> 标签：c++, templates, destructor

对 C++ 要求在二维数组中传递维度的烦恼让我开始研究模板化的 Matrix 类。我已经用 C# 编码了一段时间，所以我确定我在这里有点生疏了。

问题是，当我点击试图删除二维数组的析构函数时，我得到了一个堆异常。

任何帮助感激地接受！

```
template <typename T>
class Matrix {
public:
    Matrix(int m, int n) : nRows(m), nCols(n) { 
        pMatrix = new T * [nRows]; 
        for (int i = 0; i < nCols; i++) {
            pMatrix[i] = new T[nCols];
        }
    }
    ~Matrix() { 
        if (pMatrix != NULL) { 
            for (int i = 0; i < nRows; i++) { delete[] pMatrix[i]; }
            delete[] pMatrix;
        }
    }
    T ** GetMatrix() const { return pMatrix; }
    T * Row(int i) const { return pMatrix[i]; }
    inline T Cell(int row, int col) const { return pMatrix[row][col]; }
    inline int GetNRows() const { return nRows; }
    inline int GetNCols() const { return nCols; }
private:
    int nRows, nCols;
    T ** pMatrix;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T08:01:55.180

这是错误：

```
for (int i = 0; i < nCols; i++) {
        pMatrix[i] = new T[nCols];
} 
```

循环应该是直到`nRows`，而不是`nCols`。

除此之外，让我告诉你我厌倦了分配二维数组时所做的一些事情。我必须做一个 3-d 数组。我使用了一个`map`从坐标映射的 , - 一个将 x, y, z 保存到我想要的类型的结构。

我工作得很快，不需要分配或解除分配。分配给坐标只需通过

```
mymap[Coord(x, y, z)] = whatever... 
```

当然，我需要定义`Coord`struct 并重载`< operator`，但我发现这种方式比尝试分配和取消分配 3-d 数组更方便。

当然，您需要检查此方案是否对您来说足够快。我用它使用 OpenGL 在一个大立方体内绘制单元格，完全没有抱怨。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T10:11:08.427

关于这个错误，@CodeChords_man 解释得很对。我有关于实施的说明。我建议查看[这篇精彩的常见问题解答帖子](https://stackoverflow.com/questions/6500313/why-should-new-be-used-as-little-as-possible)。

除非您 100% 确定，否则不应使用动态内存分配

1.  你*真的*需要它
2.  你知道如何实现它

我不知道第一个，以及性能对您来说如何至关重要。但至于第二个，你至少违反了[三的规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)。你的课使用起来很不安全。如果复制它，则内存缓冲区将被双重删除。

您不应该害怕使用 STL 容器，它们快速且经过优化。至少`std::vector`，在很多场景下它和原始指针一样快。您可以使用`std::vector`如下方式重写您的课程：

```
template <typename T>
class Matrix {
public:
  typedef std::vector<T> MatrixRow;
  typedef std::vector<MatrixRow> MatrixBody;

  Matrix(int m, int n) : nRows(m), nCols(n), _body(m, MatrixRow(n)) {}

  const MatrixBody& GetMatrix() const { return _body; }
  const MatrixRow& GetRow(int i) const { return _body[i]; }

  inline T Cell(int row, int col) const { return _body[row][col]; }
  inline int GetNRows() const { return nRows; }
  inline int GetNCols() const { return nCols; }
private:
  int nRows, nCols;
  MatrixBody _body;
}; 
```

由于此类不使用动态内存分配，因此复制和分配是安全的。在这种情况下，您也不需要显式存储`nRows`和；`nCols`你可以使用`_body.size()`and`_body[0].size()`代替。

关于向量的底层向量，它使用相同的`[i][j]`结构被取消引用。它很容易用`begin()`和迭代`end()`。如果您绝对需要在某些例程中使用原始指针，您可以随时使用`&row[0]`.

唯一可能的困难是您无法轻松转换`MatrixBody`为`T**`. 但是三思而后行，也许你根本不需要使用`T**`。

# c# - 如何使用 c# 在 ASP.NET 中解压缩文件

> ID：13667433
> 
> 赞同：0
> 
> 时间：2012-12-02T07:50:42.680
> 
> 标签：c#, asp.net, zip, j#, visualj#

我的代码遇到问题。PFA 我的代码如下

```
// Extract Zip File
public static void Extract(string zipFileName, string destinationPath)
{
    ZipFile zipfile = new ZipFile(zipFileName);      
    List<ZipEntry> zipFiles= GetZipFiles(zipfile);

    foreach (ZipEntry zipFile in zipFiles)
    {
        if (!zipFile.isDirectory())
        {
            java.io.InputStream s=zipfile.getInputStream(zipFile);
            //InputStream s = zipfile.getInputStream(zipFile);

            try 
            {
                Directory.CreateDirectory(destinationPath + "\\"  + Path.GetDirectoryName(zipFile.getName()));
                // Directory.CreateDirectory(destinationPath + "\ + Path.GetDirectoryName(zipFile.getName()));

                //Directory.CreateDirectory(Path.GetDirectoryName(zipFile.getName()));
                java.io.FileOutputStream dest = new java.io.FileOutputStream(Path.Combine(destinationPath + "\\" + Path.GetDirectoryName(zipFile.getName()), 
                //java.io.FileOutputStream dest = new java.io.FileOutputStream(Path.Combine(Path.GetDirectoryName(zipFile.getName()), 
                Path.GetFileName(zipFile.getName()))); 
                try
                {
                    int len = 0;
                    byte[] buffer = new  byte[7168];
                    while ((len = s.read(buffer))  >= 0)
                    {
                        dest.write(buffer, 0, len);
                    }
                }
                finally
                {
                    dest.close();
                }
            }
            finally
            {
                s.close();
            }
        }
    }
} 
```

问题是：在此类中，任何人都可以告诉我“字符串 zipFileName，字符串目的地路径”的格式意味着：在 zipFileName 和指定路径中使用哪个路径格式。

此代码用于在 c# 中使用 J# 解压缩文件，请尽快帮助我

：这里 zipFilename 是要压缩的路径文件，destinationPath 是要解压缩文件的路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:20:56.850

您是否使用任何压缩库。例如 ZipFile - 这是任何第三方库吗？

如果您计划实现它，您可以检查可用[的 C# 压缩库。](http://www.ginktage.com/2011/06/5-compression-libraries-for-net-developers/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T14:56:34.913

如果我正确理解了您的问题，并且您正在使用 Windows，那么您可能会使用如下格式：

```
Extract(@"c:\myfolder\mysubfolder\myfile.zip", @"c:\mydestinationfolder\mysubfolder"); 
```

试一试并发表评论，让我知道它是否有效，或者您之前尝试过的任何其他方法。

# forms - 如何将 CSRF 令牌添加到登录表单？

> ID：13667437
> 
> 赞同：0
> 
> 时间：2012-12-02T07:51:08.977
> 
> 标签：forms, security, symfony, csrf, symfony-2.1

我不确定这是否有必要，但我在登录表单中看不到任何 csrf 令牌。通常，当您创建表单时，您会`form_rest(form)`在最后添加，并添加 csrf 令牌。但是登录表单的处理方式不同，它不是真正的表单对象，它是一种自动的。[您可以在docs](http://symfony.com/doc/current/book/security.html#using-a-traditional-login-form)中看到这一点。

那是怎么回事？为什么登录表单没有csrf保护？我知道 CSRF 攻击是针对经过身份验证的用户，但 Sf2 中的匿名用户在技术上是经过身份验证的（请参阅会话 cookie），而且我可能希望进行某种渐进式参与，例如在 stackoverflow 中，您可以在其中执行一些操作而无需成为确认会员。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:10:36.180

登录表单不需要**CSRF**保护。

CSRF 定义：攻击者可以强制受害者向服务器发送 HTTP 请求。

典型的教科书示例：发起汇款。攻击者可以强制这样的请求：[http ://bank.example.com/withdraw?account=Alice&amount=1000000&for=Eve](http://bank.example.com/withdraw?account=Alice&amount=1000000&for=Eve)

如您所见，攻击者必须事先烘焙一个 URL。

在登录请求的情况下，这是没有意义的，因为攻击者必须像这样烘焙一个 URL：[http://example.com/login?user=pierre.ernst&pwd=secret](http://example.com/login?user=pierre.ernst&pwd=secret)。

如果攻击者已经拥有此信息（凭据），他很可能不会尝试 CSRF :-)

希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:18:25.157

实际上，`form_rest(form)`除了放入 CSRF 令牌之外，此函数还可以打印出任何尚未呈现的表单行，并且可以很好地放入以确保任何被忽略的附加字段肯定会被呈现。

您没有看到 CSRF 令牌的原因是因为 FOSUserBundle 登录表单不是 Symfony 表单，它只是一个常规的 HTML 表单，然后由 FOSUser 表单处理程序处理。

我不完全确定为什么会做出这个决定，但我确信它背后有技术原因，如果这是一个问题，您可以手动添加一个并扩展表单处理程序以在响应中处理和验证它，我相信该服务是参数化的，因此它应该相对容易更换。

不过，我最大的问题是，您为什么要费心这样做？这是一笔大买卖吗？CSRF 是一个有用的步骤，但不是万能的安全解决方案，而且就个人而言，我会有比这更大的优先级，如果这是一个大问题，它会在某个时候在 FOS 中得到修复。

对于你的后一点，我不确定相关性，这如何阻止你实现逐步参与？不管怎样，一个快速提示，虽然我自己没有构建系统的这一部分，但在我最近一直在从事的一个电子商务项目中，领导决定实现逐步参与（这样人们可以匿名结账），但仍然坚持很多在他们的操作中，新用户很早就被自动生成的用户名和自定义角色（例如 ROLE_GUEST）持久化，而 Symfony 中的默认功能证明不足以满足我们的用例。

# c++ - *.exp 文件有什么作用？

> ID：13667443
> 
> 赞同：24
> 
> 时间：2012-12-02T07:52:18.843
> 
> 标签：c++

> **可能重复：**
> [.exp 的用途以及 .lib 和 .dll 之间的区别](https://stackoverflow.com/questions/2727020/what-is-use-of-exp-and-what-is-the-difference-between-lib-and-dll)

当我与某个 c++ 库链接时，对于每个 *.lib，它都与一个 *.exp 文件相关联。*.exp 有什么作用？

```
***.lib / ***.exp 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T07:54:06.700

导出 (.exp) 文件包含有关导出函数和数据项的信息。当 LIB 创建一个导入库时，它也会创建一个 .exp 文件。当您链接一个程序，该程序直接或间接地从另一个程序导出和导入时，您将使用 .exp 文件。如果您使用 .exp 文件链接，LINK 不会生成导入库，因为它假定 LIB 已经创建了一个。

[**来自 MSDN**](http://msdn.microsoft.com/en-us/library/se8y7dcs%28v=vs.80%29.aspx)

> 您可以使用带有 /DEF 选项的 LIB 来创建导入库和导出文件。LINK 使用导出文件来构建一个包含导出的程序（通常是动态链接库 (DLL)），并使用导入库来解析对其他程序中这些导出的引用。
> 
> 请注意，如果您在初步步骤中创建导入库，则在创建 .dll 之前，您必须在构建 .dll 时传递与构建导入库时相同的一组目标文件。
> 
> 在大多数情况下，您不需要使用 LIB 来创建导入库。当您链接包含导出的程序（可执行文件或 DLL）时，LINK 会自动创建一个描述导出的导入库。稍后，当您链接引用这些导出的程序时，您指定导入库。
> 
> 但是，当一个 DLL 导出到一个它也直接或间接从中导入的程序时，您必须使用 LIB 创建一个导入库。当 LIB 创建一个导入库时，它也会创建一个导出文件。链接其中一个 DLL 时必须使用导出文件。

[来自 MSDN](http://msdn.microsoft.com/en-us/library/f0z8kac4%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T07:57:17.490

从[MSDN](http://msdn.microsoft.com/en-us/library/se8y7dcs%28v=vs.80%29.aspx)：

> 导出 (.exp) 文件包含有关导出函数和数据项的信息。当 LIB 创建一个导入库时，它也会创建一个 .exp 文件。当您链接一个程序，该程序直接或间接地从另一个程序导出和导入时，您将使用 .exp 文件。如果您使用 .exp 文件链接，LINK 不会生成导入库，因为它假定 LIB 已经创建了一个。有关 .exp 文件和导入库的详细信息，请参阅[使用导入库和导出文件](http://msdn.microsoft.com/en-us/library/f0z8kac4%28v=vs.80%29.aspx)。

# c# - 在后台代理中读取 PNG、JPEG

> ID：13667447
> 
> 赞同：0
> 
> 时间：2012-12-02T07:53:24.853
> 
> 标签：c#, image-processing, windows-phone-7.1, windows-phone, windows-phone-8

> **可能重复：**
> [如何在 Windows Phone 中的 ScheduledTaskAgent 上裁剪图像](https://stackoverflow.com/questions/13657168/how-to-crop-image-on-scheduledtaskagent-in-windows-phone)

我正在尝试在后台代理中读取和处理（实际上只是调整大小）PNG 或 JPEG 图像。

事实证明，我不能使用 BitmapImage 或 WriteableBitmap 来利用其 PNG/JPEG 解码和调整大小功能，因为它们需要在 UI 线程中运行（这在后台代理中显然不存在）。

我查看了第三方库，例如 ImageTools。ImageTools 似乎不支持 Windows Phone 的 JPG。

我该怎么做才能在后台线程中处理（读取、处理、保存）图像？我显然不想重新发明轮子并编写自己的解码器。

谢谢，

担

PS 为什么事情总是比你想象的要难？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:19:03.963

我之前一直在解决完全相同的问题，我的解决方案在这里：
[如何在 C# WinRT/winmd 中调整图像大小？](https://stackoverflow.com/questions/12349611/how-to-resize-image-in-c-sharp-winrt-winmd)

# facebook - 如何在 Facebook 上获取群组帖子的 Seen By 数据

> ID：13667448
> 
> 赞同：0
> 
> 时间：2012-12-02T07:53:34.880
> 
> 标签：facebook, facebook-graph-api, post, facebook-group

使用 Facebook Graph API，对于群组帖子，我们能够检索评论和喜欢的数据。现在随着在群组帖子中引入 Seen By 信息，似乎还没有公开 API 来获取 Seen By 数据，还是有？我们无法通过[https://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)上的文档找到该信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:25:49.907

正如@Tommy Cursh 建议的那样，目前没有可用的 API 可用于以编程方式获取 Seen By 数据。希望 Facebook 能很快提供它。

# excel - Excel 的最新修改时间戳

> ID：13667450
> 
> 赞同：0
> 
> 时间：2012-12-02T07:54:05.923
> 
> 标签：excel, vba

> **可能重复：**
> [使用 VBA 的 Excel 工作表的日期修改时间戳](https://stackoverflow.com/questions/13630792/date-modified-time-stamp-of-an-excel-sheet-using-vba)

嗨，我有一个 excel 工作簿...我想记下工作簿 1 的单元格 A2 中的时间戳，以便在工作簿的 sheet2 的任何行或列中进行的最新修改。

所以我的问题有两个：1.想跟踪最新的修改时间。2\. 想把 sheet1 的单元格 A2 设为用户保护，这样任何人都不能篡改跟踪的时间戳。这是我正在工作的代码......它不正确，因为它没有做任何事情......如果它会做任何事情，那么我分享它肯定没有任何问题，但因为它没有做任何事情所以它有点没用。

```
 Private Sub worksheet_change(ByVal Target As Range)
       Dim Row, Col

       For Row = 2 To Sheet2.UsedRange.Rows.Count
       For Col = 1 To Sheet2.UsedRange.Columns.Count
       If Target.Cells(Row, Col) Then
       Application.EnableEvents = False
       Sheet1.Cells("A2") = now()
       Application.EnableEvents = True
       End If
       Next Col
       Next Row

       End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T08:30:54.643

为了让您朝着正确的方向前进：

*   右键单击工作表 2 的工作表选项卡。
*   选择“查看代码”。
*   您将在模块顶部看到两个下拉菜单。在第一个中选择“工作表”。在第二个中选择“更改”。
*   这将为 Worksheet_Change 过程创建模板，只要用户更改 Sheet2 中的值，就会触发该模板。
*   使用它将时间戳写入 sheet1 的单元格 A2。

对于问题的第二部分，请保护工作表 1。在代码中，即：

```
ThisWorkbook.Worksheets("Sheet1").Protect DrawingObjects:=True, Contents:=True, Scenarios:=True 
```

在您写入单元格 A2 之前，请先取消保护它：

```
ThisWorkbook.Worksheets("Sheet1").Unprotect 
```

如果要添加密码，请在帮助中查找保护和取消保护方法。

（请记住，即使使用密码，工作表保护也很弱。对于临时工作来说还可以，但如果用户决心这样做，则可以被用户破解。更好的方法可能是将值写入工作表它具有 xlVeryHidden 的可见属性，因此大多数用户甚至都不知道它的存在（如果您对 VBA 项目应用保护）。同样，并非不可破解，但比将其放在可见工作表中更好。）

# sql - 如何选择具有指定条件的不同行

> ID：13667457
> 
> 赞同：2
> 
> 时间：2012-12-02T07:55:35.430
> 
> 标签：sql, sql-server

假设有一张桌子

```
_ _
a 1
a 2
b 2
c 3
c 4
c 1
d 2
e 5
e 6 
```

如何选择每组所有行的不同最小值？

所以这里的预期结果是：

```
_ _
a 1
b 2
c 1
d 2
e 5 
```

**编辑**

我的实际表包含更多列，我想全部选择它们。这些行仅在最后一列（示例中的第二列）中有所不同。我是 SQL 新手，可能我的问题在初始视图中格式不正确。

实际的架构是：

```
| day | currency ('EUR', 'USD') | diff (integer) | id (foreign key) | 
```

是重复的对`(day, currency)`，相差`(diff, id)`. 我想看到一个具有唯一对的表，并且原始表中`(day, currency)`的最小值是最小的。`diff`

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T07:58:47.577

在你的情况下，它就像这样简单：

```
select column1, min(column2) as column2
from table
group by column1 
```

对于两个以上的专栏，我可以建议：

```
select top 1 with ties
    t.column1, t.column2, t.column3
from table as t
order by row_number() over (partition by t.column1 order by t.column2) 
```

看看这篇文章[https://stackoverflow.com/a/13652861/1744834](https://stackoverflow.com/a/13652861/1744834)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T07:57:07.577

您可以通过 CTE 使用排名函数[**`ROW_NUMBER()`**](http://msdn.microsoft.com/en-us/library/ms186734.aspx)来执行此操作。特别是，如果除了这两列之外还有更多的列，它将给出如下的 distict 值：

```
;WITH RankedCTE
AS
(
   SELECT *, ROW_NUMBER() OVER(PARTITION BY column1 ORDER BY Colmn2 ) rownum
   FROM Table
)
SELECT column1, column2
FROM RankedCTE
WHERE rownum = 1; 
```

这会给你：

```
COLUMN1   COLUMN2
   a         1
   b         2
   c         1
   d         2
   e         5 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/90b02/2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T08:00:57.440

SELECT ColOne, Min(ColTwo) FROM Table GROUP BY ColOne ORDER BY ColOne

PS：不是机器前面，但请在上面试一试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T08:01:33.733

```
select MIN(col2),col1
from dbo.Table_1
group by col1 
```

# android - 如何知道 viewpager 是向左还是向右滚动？

> ID：13667459
> 
> 赞同：34
> 
> 时间：2012-12-02T07:55:47.597
> 
> 标签：android, android-viewpager

我正在使用 ViewPager（支持库）。我想知道每次 ViewPager 更改可见页面时，它是向左还是向右滚动。

请给我一个解决方案。也欢迎任何推荐。

谢谢

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-02T08:05:51.903

设置`setOnPageChangeListener`为您的`ViewPager`

保持一个全局变量为

```
private int lastPosition = 0; 
```

并且在

```
@Override
public void onPageSelected(int arg0) {
    if (lastPosition > position) {
         System.out.println("Left");
      }else if (lastPosition < position) {
         System.out.println("Right");
      }
      lastPosition = position;
} 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2014-10-31T14:42:01.917

这不是一个完美的解决方案，但这里有一种方法可以在您开始滑动时检查滑动方向：

```
new ViewPager.OnPageChangeListener() {

            private static final float thresholdOffset = 0.5f;
            private boolean scrollStarted, checkDirection;

            @Override
            public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
                if (checkDirection) {
                    if (thresholdOffset > positionOffset) {
                        Log.i(C.TAG, "going left");
                    } else {
                        Log.i(C.TAG, "going right");
                    }
                    checkDirection = false;
                }
            }

            @Override
            public void onPageSelected(int position) {}

            @Override
            public void onPageScrollStateChanged(int state) {
                if (!scrollStarted && state == ViewPager.SCROLL_STATE_DRAGGING) {
                    scrollStarted = true;
                    checkDirection = true;
                } else {
                    scrollStarted = false;
                }
            }
        }); 
```

**编辑：**有一种更优雅的方法涉及使用 a`ViewPager.PageTransformer`并检查它的位置间隔：

```
...
myViewPager.setPageTransformer(true, new PageTransformer());
...

public class PageTransformer implements ViewPager.PageTransformer {
    public void transformPage(View view, float position) {

        if (position < -1) { 
            // [-00,-1): the page is way off-screen to the left.
        } else if (position <= 1) { 
            // [-1,1]: the page is "centered"
        } else { 
            // (1,+00]: the page is way off-screen to the right.           
        }
    }
} 
```

您可以从以下内容了解更多信息：[将 ViewPager 用于屏幕幻灯片](http://developer.android.com/training/animation/screen-slide.html)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-12-18T13:10:05.910

1.  这是我在 ViewPager.OnPageChangeListener 的***onPageScrolled*** **()**方法中的简单解决方案：

 *[![在此处输入图像描述](../Images/ef8a758945fd37e6434ab2eedbecea4a.png)](https://i.stack.imgur.com/jBj8K.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-02-18T19:06:00.753

与 GuilhE 相同的解决方案，但有一个小修复，以避免在 ViewPager 中的第一页（没有更多页面向左）上向左翻页（向右滑动）时出现误报。它只是做一个额外的检查，看看滑动是否真的移动了。

```
new ViewPager.OnPageChangeListener() {

  private static final float thresholdOffset = 0.5f;
  private static final int thresholdOffsetPixels = 1;
  private boolean scrollStarted, checkDirection;

  @Override
  public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
    if (checkDirection) {
      if (thresholdOffset > positionOffset && positionOffsetPixels > thresholdOffsetPixels) {
        Log.i(C.TAG, "going left");
      } else {
        Log.i(C.TAG, "going right");
      }
    checkDirection = false;
  }
}

  @Override
  public void onPageSelected(int position) {}

  @Override
  public void onPageScrollStateChanged(int state) {
    if (!scrollStarted && state == ViewPager.SCROLL_STATE_DRAGGING) {
      scrollStarted = true;
      checkDirection = true;
    } else {
      scrollStarted = false;
    }
  }
 }); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-10-16T06:39:33.537

您可以保留类成员变量以保存上次访问的页面

```
private int mLastVisitedPageIndex = 0; 
```

然后使用以下功能检查方向

```
@Override
public void onPageSelected(int i) {
    boolean isMovingForward = mLastVisitedPageIndex < i?true:false;
    //Use isMovingForward variable anywhere now
    mLastVisitedPageIndex = i;
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-11-07T22:01:02.487

用那个

```
@Override
public void onPageSelected( int position )
{
    mCurrentFragmentPosition = position;
}
@Override
public void onPageScrolled( int position, float positionOffset, int positionOffsetPixels )
{
    boolean isGoingToRightPage = position == mCurrentFragmentPosition;
    if(isGoingToRightPage)
    {
        // user is going to the right page
    }
    else
    {
        // user is going to the left page
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-02T08:03:04.813

使用[`ViewPager.OnPageChangeListener`](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html)界面。您可以使用传递给的位置参数`onPageSelected`并将其与先前的值进行比较，以确定`ViewPager`滚动的方式。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-03-22T12:34:57.680

```
private float sumPositionAndPositionOffset;

@Override
public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
    boolean isSwipeToLeft = position + positionOffset > sumPositionAndPositionOffset;
    sumPositionAndPositionOffset = position + positionOffset;   
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-10-19T10:34:30.377

我用这个实现解决了这个问题。希望能帮助到你。

```
public static final float EPSILON= 0.001f;

@Override
public void onPageScrolled(final int position, final float positionOffset, final int positionOffsetPixels) {

    // initial position (positionOffset == 0)
    if (positionOffset < EPSILON) {
        mIsRight = positionOffset < 0.5;
        return;
    }

    // code here
    if (mIsRight) {
    } else {
    }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-04-21T09:31:03.207

我们也可以使用自定义 Viewpager 来做到这一点，它可以包含 swipeLeft() 和 swipeRight() 方法，并且它的 onTouchEvent(MotionEvent event) 方法可以包含 ACTION_MOVE 和 ACTION_CANCEL 情况。

// 如果有帮助，这可以是代码。

```
public class SwiperViewPager extends ViewPager {

    SwiperListener mSwiperListener;
    private float downX;
    private float downY;
    private boolean isTouchCaptured;
    private float upX1;
    private float upY1;
    private float upX2;
    private float upY2;

    public SwiperViewPager(Context context) {
        super(context);
    }

    public SwiperViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    private float x1, x2;
    static final int min_distance = 20;

    boolean eventSent = false;

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        switch (event.getAction()) {
            case MotionEvent.ACTION_MOVE: {
                downX = event.getX();
                downY = event.getY();

                if (!isTouchCaptured) {
                    upX1 = event.getX();
                    upY1 = event.getY();
                    isTouchCaptured = true;
                } else {
                    upX2 = event.getX();
                    upY2 = event.getY();
                    float deltaX = upX1 - upX2;
                    float deltaY = upY1 - upY2;
                    //HORIZONTAL SCROLL
                    if (Math.abs(deltaX) > Math.abs(deltaY)) {
                        if (Math.abs(deltaX) > min_distance) {
                            // left or right
                            if (deltaX < 0) {
                                if(!eventSent && mSwiperListener!=null){
                                    mSwiperListener.onLeftSwipe();
                                    eventSent = true;
                                }
                            }
                            if (deltaX > 0) {
                                if(!eventSent && mSwiperListener!=null){
                                    if(mSwiperListener.onRightSwipe()){
                                        eventSent = true;
                                        return false;
                                    }
                                }
                            }
                        } else {
                            //not long enough swipe...
                        }
                    }
                    //VERTICAL SCROLL
                    else {
                        if (Math.abs(deltaY) > min_distance) {
                            // top or down
                            if (deltaY < 0) {

                            }
                            if (deltaY > 0) {

                            }
                        } else {
                            //not long enough swipe...
                        }
                    }
                }
            }
            break;
            case MotionEvent.ACTION_UP:
            case MotionEvent.ACTION_CANCEL:{
                isTouchCaptured = false;
                eventSent = false;
            }

        }
        return super.onTouchEvent(event);
    }

    public void setmSwiperListener(SwiperListener mSwiperListener) {
        this.mSwiperListener = mSwiperListener;
    }

    public static interface SwiperListener {
        public boolean onLeftSwipe();

        public boolean onRightSwipe();
    }

} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-08-20T08:28:34.050

道歉 - 因为我发现了一个错误，所以不得不编辑答案。这是改进的解决方案：

该解决方案将当前页面索引与先前选择的页面索引 (previousPageIndex) 进行比较

newPageIndex 表示即将滚动到的页面。

Condition (positionOffset == 0) 比较滚动是否完成

```
private int previousPageIndex = 0;
private int newPageIndex = -1;

private final int MOVE_DIRECTION_NONE = 0;
private final int MOVE_DIRECTION_LEFT = 1;
private final int MOVE_DIRECTION_RIGHT = 2;

private int moveDirection = MOVE_DIRECTION_NONE;

@Override
public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
    super.onPageScrolled(position, positionOffset, positionOffsetPixels);

    if (moveDirection == MOVE_DIRECTION_NONE) {
        if (previousPageIndex  == position){
            moveDirection = MOVE_DIRECTION_LEFT;
            if (newPageIndex == -1) newPageIndex = previousPageIndex + 1;
        }  else {
            moveDirection = MOVE_DIRECTION_RIGHT;
            if (newPageIndex == -1) newPageIndex = previousPageIndex - 1;
        }
    }

    if (positionOffset == 0) {
        System.out.println("Reseting");
        previousPageIndex = position;
        moveDirection = MOVE_DIRECTION_NONE;
        newPageIndex = -1;
    }

    switch (moveDirection) {
        case MOVE_DIRECTION_LEFT:
            if (onPageChangingHandler != null) onPageChangingHandler.pageChanging(previousPageIndex, newPageIndex, positionOffset);
            System.out.println("Sliding Left | Previous index: " + previousPageIndex + " | New Index: " + newPageIndex + " | offset: " + positionOffset  + " | Position: " + position);
            break;
        case MOVE_DIRECTION_RIGHT:
            if (onPageChangingHandler != null) onPageChangingHandler.pageChanging(newPageIndex, previousPageIndex, positionOffset);
            System.out.println("Sliding Right | Previous index: " + previousPageIndex + " | New Index: " + newPageIndex + " | offset: " + positionOffset + " | Position: " + position);
            break;
        case MOVE_DIRECTION_NONE:
            System.out.println("Moving NONE");
            break;
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-11-26T08:08:14.087

```
viewPager.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {

        private int mCurrentSelectedScreen;
        private int mNextSelectedScreen;
        private static final float thresholdOffset = 0.5f;
        private boolean scrollStarted=true, checkDirection=false;
        ArrayList<Integer> comp_ary=new ArrayList<Integer>();

        @Override
        public void onPageSelected(int arg0) {
        }

        @Override
        public void onPageScrolled(int position, float positionOffset,
                int positionOffsetPixels) {

        //Log.e("positionOffsetPixels : "+positionOffsetPixels, "positionOffset : "+positionOffset);
        comp_ary.add(positionOffsetPixels);
             if (checkDirection) {
                    if (comp_ary.get(2) < comp_ary.get(comp_ary.size()-1)) {

                        Log.e("going left", "going left");
                    } else
                        if (comp_ary.get(2) > comp_ary.get(comp_ary.size()-1))
                    {

                        Log.e("going right", "going right");
                    }
                    checkDirection = false;
                    comp_ary=new ArrayList<Integer>();
                }
        }

        @Override
        public void onPageScrollStateChanged(int arg0) {

            if (!scrollStarted && arg0 == ViewPager.SCROLL_STATE_SETTLING) {
                scrollStarted = true;
                checkDirection = true;
            } else {
                scrollStarted = false;
            }

        }
    }); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-01-24T11:50:47.460

**如果您担心位置偏移***在***`0`取值后`0.9F`**

 **```
 private boolean LEFT_DAB; //left swipe
    private float offset; //current position offset
    private float take_off; //previous position offset
    private static final float quavo = 0.5F; //position offset threshold

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        super.onPageScrolled(position, positionOffset, positionOffsetPixels);

        offset = take_off > 0.9F ? take_off : positionOffset;
        take_off = positionOffset;

        if (offset > quavo) {
            LEFT_DAB = false;//RIGHT_SWIPE
        } else {
            LEFT_DAB = true;//LEFT_SWIPE
        }
    } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-03-03T02:54:05.513

这是一种在滚动方向发生时可以知道滚动方向的方法。您所要做的就是`OnPageChangeCallback()`在`ViewPager`. `ViewPager`您保存in的当前页面`OnPageSelected()`并将其与 的`position`参数进行比较`OnPageScrolled()`。如果当前页面小于或等于 ，`position`则向右滚动，否则，向左滚动。

```
var currentPage = 0
viewPager.registerOnPageChangeCallback(object : ViewPager2.OnPageChangeCallback() {
    override fun onPageSelected(position: Int) {
        super.onPageSelected(position)
        currentPage = position
    }

    override fun onPageScrolled(position: Int, positionOffset: Float, positionOffsetPixels: Int) {
        super.onPageScrolled(position, positionOffset, positionOffsetPixels)
        if (currentPage <= position) {
            // We are scrolling right
        } else {
            // We are scrolling left
        }
    }
}) 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2015-08-21T08:40:56.390

```
pager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {
        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {

            if(position  == pager.getCurrentItem()){
                // Move Right
            }
            else{
                // Move Left
            }

        } 
```***

# asp.net - IIS - 将应用程序放置在路由/子目录中

> ID：13667462
> 
> 赞同：1
> 
> 时间：2012-12-02T07:56:12.603
> 
> 标签：asp.net, iis, iis-7

我有一个 ASP.NET 4.5 应用程序在 IIS 7.5 中我的本地主机的根级别运行，其中，我有一个定义为的路由`archives`：

```
http://localhost/archives 
```

我正在尝试添加一个 WordPress 博客，`archives/blog`但不知道该怎么做。所以博客的 URL 应该如下：

```
http://localhost/archives/blog 
```

我尝试在名为 的根级别运行的 Web 应用程序中放置一个空目录`archives`，但是一旦这样做，由于与路由冲突，我会收到有关目录浏览的 HTTP 403 错误。

知道如何用路由覆盖空目录吗？或者我可以让博客在我想要的目录级别上工作的任何其他方式？

我读过关于`RouteExistingFiles`属性的文章，但也听说一旦它设置为 true，我还必须为我的所有静态内容（CSS、JavaScript、图像等）定义路由。

想法？

# c# - 从 ViewModel 中的不同线程更新 View Model 中的 UI 绑定集合时出错

> ID：13667463
> 
> 赞同：2
> 
> 时间：2012-12-02T07:56:34.267
> 
> 标签：c#, wpf, mvvm, task-parallel-library, mvvm-light

我是 WPF、MVVM 和 MVVMLight 的菜鸟，你能帮我解决一些对我的项目非常重要的事情吗？我需要从视图模型创建的不同线程更新视图中的集合。我的 ViewModel 完全不知道 View。我在我的视图模型中定义了一个可观察的集合：

```
public class LoginViewModel: ViewModelBase
{
    public ObservableCollection<DatabaseConfiguration> DatabaseConfigurations{ get; set; }

    private DatabaseConfiguration _dbConfig;

    public DatabaseConfiguration DbConfig
    {
        get{return _dbConfig;}
        set
        {
        _dbConfig=value;
        RaisePropertyChanged(()=>DbConfig);
        }
    } 
```

我使用 System.threading.Task 回调将一个项目从视图模型添加到集合中：

```
 void AddDBConfig(DatabaseConfiguration config)
    {
        Task<bool> asyncTask = Task.Factory.StartNew<bool>(
        () =>
        {
        return DatabaseUtility.ValidateDatabaseConnectionConfiguration(config);
        });        

        ExecuteAsync(asyncTask,
            (IAsyncResult ar) =>
            {
                Task<bool> t1 = (Task<bool>)ar;
                if (!t1.IsFaulted)
                {
                    if (!(bool)result)
                    {
                    //problematic statement
                    DatabaseConfigurations.Add(config);
                    }                    
                }
            }); 
    }

    public void ExecuteAsync(Task<object> asyncTask, AsyncCallback callback)
    {
        asyncTask.ContinueWith(task => callback(asyncTask));
        asyncTask.Start();
    }        
} 
```

我在执行时收到以下错误：

“这种类型的 CollectionView 不支持从不同于 Dispatcher 线程的线程更改其 SourceCollection”

MVVMLight 工具包中是否有任何解决方法或内置机制来从不同的线程更新 UI 集合？

您的帮助将是一个很大的帮助！！！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T08:40:30.850

`ContinueWith()`有一个接受 TaskScheduler 的重载。wpf 和 winforms 有特殊的调度程序。您可以拨打电话获取`TaskScheduler.FromCurrentSynchronizationContext()`

请[在这里](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.aspx)阅读。

SalientBrain 的回答也是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T08:15:06.843

```
Deployment.Current.Dispatcher.BeginInvoke(() =>
{
    //(non)problematic statement
    DatabaseConfigurations.Add(config);
    //or perform creating of ObservableCollection
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T07:04:41.033

Mvvm light 有一个调度程序助手类来处理它。请参阅[DispatcherHelper 的简单示例](https://stackoverflow.com/questions/7401538/simple-example-of-dispatcherhelper)。

首先，在视图模型构造函数中初始化 DispatcherHelper。

```
DispatcherHelper.Initialize(); 
```

然后，使用 CheckBeginInvokeOnUI 从 ui 线程运行。

```
DispatcherHelper.CheckBeginInvokeOnUI(
    () => DatabaseConfigurations.Add(config)
); 
```

请注意，使用 mvvm light，属性更新会自动在 ui 线程上运行。只有集合需要调度程序辅助方法。

# c++ - 线程的子线程？

> ID：13667475
> 
> 赞同：2
> 
> 时间：2012-12-02T07:58:11.930
> 
> 标签：c++, c, multithreading, performance

假设您有一个多线程程序，每个线程都可以从 DLL 调用一个函数，并且该 DLL 中的函数将以多线程方式处理数据，一般来说，这样做是否有任何性能优势/打击而不是使DLL中的这些函数单线程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T08:03:48.760

也许，也许不是。这取决于很多事情。

首先，产生新线程非常昂贵，因此并行完成的工作量将需要抵消这一成本。

其次，这些线程需要有空闲的 CPU 周期才能真正并行运行，而不是时间分片到同一个内核上。

最后，线程需要能够使用这些空闲的 CPU 周期，而不是例如花费大部分时间等待对方。

# oracle-apex - Oracle Application Express 的功能 UI 设计模式

> ID：13667478
> 
> 赞同：1
> 
> 时间：2012-12-02T07:58:43.987
> 
> 标签：oracle-apex

Oracle Application Express 开发是否有任何功能 UI（可用性或 UX）设计模式？简单的流程、信息 UI 布局、验证、换肤或渲染等方面的最佳实践。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:55:56.100

不幸的是，Oracle 并不以非常重视用户体验而闻名，因此特定于 APEX 的资源稀缺。几点建议：

皮肤可以通过下载新主题来完成。虽然没有像 Wordpress 这样的主题那么多，但谷歌搜索“自定义 oracle apex 主题”仍然值得一试。

[Smashing Magazine 的 Web 表单指南](http://uxdesign.smashingmagazine.com/2011/11/08/extensive-guide-web-form-usability/)对任何 APEX 开发人员都非常重要且非常有价值。从非 APEX Web 应用程序中汲取灵感并没有什么坏处，因为无论开发框架如何，设计原则通常都是相同的。

不要害怕进入模板的 HTML 和 CSS 并修补以使其更漂亮/更可用。

# java - Eclipse Subversion 存储库导入问题

> ID：13667482
> 
> 赞同：1
> 
> 时间：2012-12-02T07:59:23.330
> 
> 标签：java, eclipse, svn, subclipse

我的 Eclipse Subversion 存储库有问题。显然，我正在开展一个项目，我们的团队在该项目中最新添加的内容正在上传到存储库。我从我们的存储库中导入了一个名为“Test”的文件夹，后来又删除了它……现在我在导入同一个文件夹时遇到了问题。尝试导入时出现以下错误：

> “SVN 导入”遇到问题。
> 
> ```
> org.apache.subverison.javahl.ClientException:  The process cannot access the file  because another process has locked a portion of the file.
> svn: Can't read file 'C:\Users\Submersed\workspace\.metadata\.lock': The process cannot access the file because another process has locked a portion of the file.  
> 
> org.apache.subversion.javahl.ClientException: The process cannot access the file because another process has locked a portion of the file.  
> svn: Can't read file 'C:\Users\Submersed\workspace\.metadata\.lock': The process cannot access the file because another process has locked a portion of the file. 
> ```

我已经尝试删除该`.metadata\.lock`文件，并尝试完全重新安装 eclipse 和 subversion。我已经能够将数据导入到外部驱动器，但是不能将其存储在本地驱动器上很麻烦。

如果有人知道问题可能是什么，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:49:11.823

您不应该检查整个工作区。您应该只签入没有元数据的项目并生成工作空间。[您可以使用maven](http://maven.apache.org)和[Maven to Eclipse](http://eclipse.org/m2e/)等工具生成项目配置。所以你可以避免不同路径等问题。

但是，如果您必须检查整个工作区，请使用命令行工具。Eclipse 在您的工作区打开时持有锁定文件，因此当 Eclipse 打开它时您不能覆盖该文件。

# selenium - 使用 chrome 驱动程序时元素不可点击

> ID：13667483
> 
> 赞同：0
> 
> 时间：2012-12-02T07:59:26.937
> 
> 标签：selenium, selenium-webdriver

我正在尝试使用 chrome 驱动程序从 graytip 门户网站以 PDF 格式下载工资单。我正在尝试使用“driver.findElement(By.linkText(“Salary”)).click();“点击链接工资。但我是无法单击链接并失败，出现以下异常。

## 错误

org.openqa.selenium.WebDriverException：元素在点 (198, 139) 处不可点击。其他元素将收到点击：...（警告：服务器未提供任何堆栈跟踪信息）命令持续时间或超时：37 毫秒

而且，当我运行脚本 chrome 时，会为 bit torrent 打开一个额外的选项卡。所以当我运行程序时，会为“ [https://psdpl.greytip.in](https://psdpl.greytip.in) ”打开一个选项卡，而为 bittorrent 打开另一个选项卡。如何当我运行程序时，我处理不打开另一个 bittorrent 选项卡。

在这里我附上代码和屏幕截图。![bittorrent 选项卡<code>在此处输入代码</code>](../Images/d967625df58892a3a705177cfa9d8d30.png)在此处 输入图像描述![工资链接](../Images/23662a41a172f44487612583bf6ec4b4.png)

代码

```
package com.webdriver.tests;

import static org.junit.Assert.*;

import org.junit.Test;
import java.io.File;
import java.io.IOException;
import java.util.regex.Pattern;
import java.util.concurrent.TimeUnit;
import org.junit.*;
import static org.junit.Assert.*;
import static org.hamcrest.CoreMatchers.*;
import org.openqa.selenium.*;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.chrome.ChromeDriverService;
import org.openqa.selenium.chrome.ChromeOptions;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.Select;

public class PaySlipPDF {
private WebDriver driver;
private String baseUrl;
private StringBuffer verificationErrors = new StringBuffer();

@Before
public void setUp() throws Exception {
    System.setProperty("webdriver.chrome.driver", "C:\\soleti\\D-Drive\\Selenium\\chromedriver\\chromedriver.exe");
    driver = new ChromeDriver(); 
baseUrl = "https://psdpl.greytip.in/";
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
}

@Test
public void testPayslip() throws Exception {
    driver.get(baseUrl + "/login.do");
            driver.findElement(By.id("j_username")).clear();
    driver.findElement(By.id("j_username")).sendKeys("101786");
    driver.findElement(By.id("j_password")).clear();
    driver.findElement(By.id("j_password")).sendKeys("password");
    driver.findElement(By.id("login-button")).click();
    driver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);
    //driver.findElement(By.xpath("//*[@id='home-page']/div[1]/div[1]/ul/li[2]/a")).click();
    WebElement elementToClick = driver.findElement(By.xpath("//*[@id='home-page']/div[1]/div[1]/ul/li[2]/a"));
    System.out.println(elementToClick);
    // Scroll the browser to the element's Y position
    ((JavascriptExecutor) driver).executeScript("window.scrollTo(0,"+elementToClick.getLocation().y+")");
    // Click the element
    elementToClick.click();
    //driver.findElement(By.linkText("Salary")).click();

    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
    driver.findElement(By.linkText("View Payslips")).click();
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
    new Select(driver.findElement(By.id("payroll"))).selectByVisibleText("Mar 2012");
    driver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);
    driver.findElement(By.className("btn btn-gts-print")).click();

}

@After
public void tearDown() throws Exception {
    //driver.quit();
    String verificationErrorString = verificationErrors.toString();
    if (!"".equals(verificationErrorString)) {
        fail(verificationErrorString);
    }
}

private boolean isElementPresent(By by) {
    try {
        driver.findElement(by);
        return true;
    } catch (NoSuchElementException e) {
        return false;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T22:56:13.050

导致问题的是 BitTorrent 工具栏。它通过扩展程序启动到 Chrome 中。要么完全卸载它，要么强制 Selenium 告诉 Chrome 禁用所有扩展。这可以使用 ChromeOptions 类来完成：

[http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/chrome/ChromeOptions.html](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/chrome/ChromeOptions.html)

使用 addArgument 方法并给它这个参数，它告诉 Chrome 禁用所有用户扩展：

```
--disable-extensions 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T17:18:38.327

此问题与您系统上安装的 chrome 相关..卸载 google chrome 并重新安装..这将解决您的问题..:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T12:34:23.287

检查浏览器设置并查看默认主页是否已被安装的 bit torrent 工具栏更改。如果不需要，请尝试从浏览器中卸载 bitTorrent 工具栏并重新运行您的 selenium 程序。希望这可以帮助。

# android - SIGNAL 11 SIGSEGV 代码=2 崩溃 Android

> ID：13667484
> 
> 赞同：6
> 
> 时间：2012-12-02T07:59:43.317
> 
> 标签：android, opencv, native

我正在尝试使用本机函数处理从 MediaMetadataretriever 抓取的帧中的位图。但我遇到了致命的车祸说

```
SIGNAL 11 (SIGSEGV) at 0x422d8f20 (code=2)
SIGNAL 11 (SIGSEGV) at 0x42311320 (code=2) 
```

我尝试记录以查看哪里出错了。当我调用本机功能时，它似乎崩溃了。下面是我为原生函数调用的函数。

```
 protected Bitmap processFrame(Bitmap l_frame) {
    WarnC='a';
    int[] rgba = mRGBA;
    byte[] src_array =stream;
    ByteArrayOutputStream src_stream = new ByteArrayOutputStream();
    l_frame.compress(Bitmap.CompressFormat.PNG, 0, src_stream);
    src_array = src_stream.toByteArray();   
Log.i("test", "ok");
    WarnC= processcaller.LaneDetection(mFrameWidth, mFrameHeight, src_array, rgba);
    Bitmap bmp = g_frame; 
    bmp.setPixels(rgba, 0/* offset */, mFrameWidth /* stride */, 0, 0, mFrameWidth,mFrameHeight);  
    rgba =null;
    src_array=null;
    return bmp;
} 
```

在我在网上搜索并看到大多数人说它是分段错误之后立即出现崩溃信号，`Log.i("test","ok");` 并且可能是由于调用未初始化或不存在的函数引起的。但是扫描我的代码，我什么也找不到。任何指针？

# sql - 仅按天而不是按月按订单订购

> ID：13667485
> 
> 赞同：0
> 
> 时间：2012-12-02T07:59:46.810
> 
> 标签：sql, sql-server

嘿，我似乎无法解决这个问题，我有这个查询：

```
SELECT  DISTINCT CONVERT(VARCHAR(8), time, 4) AS Batch  
FROM Calls 
ORDER BY Batch 
```

它按天而不是常规日期对列进行排序，这意味着我得到了类似的东西：

```
1.11.12
1.12.12
2.11.12
3.11.12
4.11.12 
```

我怎么能解决这个问题？如果我尝试按时间排序，则查询不会区分值并弄乱我的所有查询。

这意味着：

```
SELECT  DISTINCT CONVERT(VARCHAR(8), time, 4) AS Batch , time 
FROM Calls 
ORDER BY time, Batch 
```

对查询进行很好的排序，但不会区分这些值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:02:45.103

试试这个

```
SELECT  DISTINCT CONVERT(VARCHAR(8), time, 4) AS Batch
FROM Calls 
ORDER BY time, Batch 
```

**更新：**

```
select convert(varchar(8), time, 4) as [Batch]
from [Calls]
group by convert(varchar(8), time, 4)
order by convert(datetime, convert(varchar(8), time, 4), 4) 
```

[**SQL 提琴示例**](http://sqlfiddle.com/#!3/fe7ef/1)

# java - Apache Tomcat 配置问题

> ID：13667486
> 
> 赞同：0
> 
> 时间：2012-12-02T08:00:25.843
> 
> 标签：java, tomcat

我刚刚设置了 Java 和它的包。但是，我在 NetBeans IDE 中编写“hello world”Java Web 应用程序时遇到问题。Apache Tomcat 无法正常启动并抛出异常“服务器端口 8080 已在使用中”。我将不胜感激任何建议或解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:02:19.177

Tomcat 默认使用 8080 端口运行。因此，如果任何其他应用程序正在此端口上运行，则 tomcat 将不会启动。更改 server.xml 文件中的端口；您可以输入任何其他值，例如 8085。

```
 <Connector port="8080" maxHttpHeaderSize="8192"
           maxThreads="150" minSpareThreads="25" maxSpareThreads="75"
           enableLookups="false" redirectPort="8443" acceptCount="100"
           connectionTimeout="20000" disableUploadTimeout="true" /> 
```

端口在 server.xml 的连接器元素中指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T08:02:51.547

错误消息是不言自明的。还有一些其他进程仍然存在并使用 8080 端口。

在您的 apache conf 文件夹中，打开 httpd 文件并查找 8080 端口。将 8080 更改为您喜欢的任何端口。您可能会在两个地方找到 8080。

您可以轻松更改 net-beans 中的端口号，只需转到`servers>tomcat and right click .. properties. and change the port to say 8084 etc...`

# php - 性能 mySQL：数据库表中一列中的长字符串或添加额外列？

> ID：13667501
> 
> 赞同：-1
> 
> 时间：2012-12-02T08:02:08.123
> 
> 标签：php, mysql, arrays, multidimensional-array, database-performance

如果我有一个像我从表单提交中获取的多维数组：

```
$participants = array(

    'participant1'=> array(
        'name'=>'jim',
        'age' => '15',
        'grade' => '8th'),

    'participant2'=> array(
        'name'=>'tom',
        'age' => '17',
        'grade' => '9th'),
....
); 
```

如果我有最大数量的参与者，最好将整个数组存储到一个名为“参与者”的数据库列中，或者在每个参与者的**性能**方面为每个参与者创建一个单独的列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:03:59.310

如果您只需要姓名或年龄，那么在标准化时使用单独的列会更好，而不是您不需要获取所有内容会更好

# c# - 我的 sql 命令有什么问题？

> ID：13667503
> 
> 赞同：-2
> 
> 时间：2012-12-02T08:02:23.450
> 
> 标签：c#, sql, sql-server, sql-server-2008

我已经尝试了几个小时，但我无法弄清楚我们出了什么问题

```
var cmd = new SqlCommand();
cmd.Parameters.Clear();
cmd.Connection = mySqlConnection;
cmd.CommandType = CommandType.Text;
cmd.CommandText = 
    "select Calle.Id_Calle FROM" + 
      "TominPredial.Calle as Calle,"+
      "TominPredial.Colonia as Col," +
      "TominPredial.Poblacion as Pob" +
     "WHERE Calle.Nombre = @NombreCalle" +
            "and Col.Id_Colonia = @id_col and Pob.Id_Poblacion = @id_pob";
cmd.Parameters.Add("@NombreCalle", nombreCalle);
cmd.Parameters.Add("@id_col", id_col);
cmd.Parameters.Add("@id_pob", id_pob);
cmd.ExecuteScalar() 
```

它在“Calle”附近显示不正确的语法

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T08:05:46.457

行之间没有空格：

```
"select Calle.Id_Calle FROM" + 
  "TominPredial.Calle as Calle,"+
  "TominPredial.Colonia as Col," +
  "TominPredial.Poblacion as Pob" +
 "WHERE Calle.Nombre = @NombreCalle" +
        "and Col.Id_Colonia = @id_col and Pob.Id_Poblacion = @id_pob"; 
```

这将使查询`... FROMTominpredial.calle ... pobWHERE ..`产生语法错误。

您必须在行尾的关键字之间放置空格。像这样：

```
...
"select Calle.Id_Calle FROM" + 
" TominPredial.Calle as Calle,"+
" TominPredial.Colonia as Col," +
" TominPredial.Poblacion as Pob" +
" WHERE Calle.Nombre = @NombreCalle" +
"   and Col.Id_Colonia = @id_col and Pob.Id_Poblacion = @id_pob"; 
/\
put a Spaces here 
```

# asp.net-mvc - 到达/访问 MVC 中 IEnumerable 对象中的特定索引

> ID：13667508
> 
> 赞同：3
> 
> 时间：2012-12-02T08:03:25.073
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我需要从 IEnumerable @model 访问特定项目；

我知道我可以通过以下代码访问所有项目：

```
@foreach (var item in Model) {
    <tr>
        <td>
        @Html.DisplayFor(modelItem => item.FoodName)
        </td>
} 
```

但是我需要通过这样做来访问第三项（例如）：Model[3].FoodName

有什么方法可以从 MVC 中的 IEnumerable 对象到达特定的索引项？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T11:09:34.023

您可以使用[`ElementAt(index)`](http://msdn.microsoft.com/en-us/library/bb299233.aspx)扩展方法：

```
Model.ElementAt(2) 
```

或将模型类型从 更改`IEnumerable<T>`为`IList<T>`或`T[]`：

```
@model IList<SomeViewModel> 
```

现在您可以使用索引循环：

```
@for (var i = 0; i < Model.Count; i++) 
{
    @Html.DisplayFor(x => x[i].FoodName)    
} 
```

如果您生成输入字段（EditorFor、TextBoxFor、...），这是首选方法，因为这样会为它们分配正确的名称。

# javascript - 用于查询多个对象键的 Underscore.js 或 CoffeeScript 习语？

> ID：13667511
> 
> 赞同：1
> 
> 时间：2012-12-02T08:03:36.040
> 
> 标签：javascript, coffeescript, underscore.js

我有一个已解析的查询字符串对象 ，`req.query`并且我想查看该对象是否具有三个键中的*任何*`foo`一个： 、`bar`、`baz`。

有没有一种使用 Underscore 和/或 CoffeeScript 查询的惯用方式？

```
# simple and direct but not very DRY:
if req.query.foo or req.query.bar or req.query.baz
  ..

# using the any filter combined w/ CS's in sugar:
if _(req.query).any (val, key) -> key in ['foo', 'bar', 'baz']
  ..

# plucking just the desired keys:
if _(req.query).pick('foo', 'bar', 'baz').keys().length
  ... 
```

还有比这些更好的方法吗？不管怎样，你会写什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T08:33:37.837

怎么用[`pick`](http://underscorejs.org/#pick)？

```
if !_.isEmpty(_(req.query).pick("foo", "bar", "baz"))
  ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T18:48:41.723

怎么样：

```
queryKeys = _.keys(req.query)
if _(queryKeys).intersection(['foo', 'bar', 'baz']).length
  ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T05:09:59.067

一些替代方案：

```
# Helper function:
# ----------------
_has = (obj, arr) -> (1 for key in arr when obj.hasOwnProperty(key)).length > 0

if _has req.query, ['foo', 'bar', 'baz']
    ...

# Extending `Object`:
# -------------------
Object::has = (arr) ->
    while arr.length && not result = @hasOwnProperty arr.shift() then
    result

if req.query.has ['foo', 'bar', 'baz']
    ...

# Using native `Array::some`:
# ---------------------------
if ['baz', 'bar', 'foo'].some {}.hasOwnProperty.bind req.query
    # ... 
```

其实我会这样写：

```
if (true for key in ['foo', 'bar', 'baz'] when req.query[k]).length 
```

但仅当列表长于该列表时，否则简单会`if query.foo or query.bar or query.baz`赢得清晰和效率。

# c - 由于没有回帧缓冲区，清除屏幕会导致闪烁

> ID：13667512
> 
> 赞同：0
> 
> 时间：2012-12-02T08:03:45.577
> 
> 标签：c, graphics, drawing

嘿伙计们，我正在使用一些汇编和 C 为原始类型板编程，认为该板类似于老式的黑白游戏男孩。

我在编写游戏时遇到了一个问题，因为没有后备缓冲区。当我清除屏幕时，它会直接绘制到屏幕上，以便真正清除屏幕，从而使我绘制的任何内容都不可见，因为它会在下一次通过时立即清除。因此，它不是用新的绘制屏幕替换绘制的屏幕，而是清除屏幕然后绘制它。

我想出了一个骇人听闻的解决方案，将渲染限制为每秒 10 帧。我这样做的方法是清除屏幕，绘制形状，然后在 1/10 秒内燃烧一个循环，无论多长时间。这样，任何被绘制的东西都会在那里停留更长时间，并且可见的时间更长，允许用户在它被立即擦除之前看到它。IE

```
while (1)
{
    doRender = 1;
    screen_clear();
    draw_circle(x,y,20,1);
    while(doRender)
    {
                // a interrupt will set doRender to 0, thus ending the loop
    }
} 
```

这行得通！有点，它会产生闪烁，并不可怕，但可以肯定的是。我的游戏不需要令人难以置信的帧率，10/秒就可以了。

有人对我的问题有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:15:26.390

你的解决方案很好。尝试通过仅清除绘制圆圈的区域来优化它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T11:22:16.953

您还可以使用 XOR 渲染。例如：你将你的精灵异或到屏幕上来渲染它，然后在下一帧再次在同一个地方异或它以将它移除并将它异或到它的新位置。

可以等vsync吗？如果您的绘图速度足够快，您可以在垂直空白间隔期间进行，消除任何剩余的闪烁。

# django - 在 django 应用程序中嵌入外部链接

> ID：13667515
> 
> 赞同：3
> 
> 时间：2012-12-02T08:03:59.373
> 
> 标签：django, django-templates

我在 myproject/templates/items/index.html 中添加了一个链接，如下所示

```
<a href="www.google.com">Search More</a> 
```

我希望当用户点击它时，她会访问 google.com。但是，现在的结果是这个链接是“myhost/items/www.google.com”而不是“www.google.com”。

（我正在修改一个现有的应用程序，我不得不承认我还没有完全阅读 django doc）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-02T08:12:32.797

每当您将外部链接传递给`<a href=''>`标签时，请始终使用`http`. 所以它会像：

```
<a href="http://www.google.com">Search More</a> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T08:06:07.407

你忘记了协议：

```
<a href="http://www.google.com">Search More</a> 
```

# qt - 从 QML 启动外部应用程序

> ID：13667518
> 
> 赞同：1
> 
> 时间：2012-12-02T08:04:25.003
> 
> 标签：qt, qml

**是否可以从QML 文件**运行外部应用程序（.exe 文件）？我知道我可以使用**Qt+QML 和 QProcess**类，但假设*我只能访问 QML 文件*而不能重新编译 c++/Qt 部分（实际上这个项目是一个 QML+Qt 项目）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T10:04:25.300

如果你不能访问你的 C++ 代码，恐怕你不能。

有一个关于此的[旧问题](https://bugreports.qt.io/browse/QTBUG-15178)（2010 年），但似乎并没有被考虑太多。

[无论如何，如果您可以将类似这个简单插件](http://gitorious.org/qml-process-element)的东西添加到您的项目中，那将非常容易（但这需要重新构建它）。

# json - Express.js 中的 POST 数据 JSON 验证

> ID：13667520
> 
> 赞同：12
> 
> 时间：2012-12-02T08:04:47.697
> 
> 标签：json, node.js, validation, rest, express

我正在使用 Node.js 和 Express.js 编写应用程序。该应用程序有一个（小）REST API，然后是一个 Web 前端。我使用 MongoDb。

对于 API，我倾向于`POST`将数据发送到某个端点，然后进行处理或其他操作，然后将其转储到数据库中。但是，我有一些我想强制执行的数据库模式。对我的`POST`数据强制执行特定结构的选项/最佳实践是什么，以便我知道某些字段存在且属于特定类型。

如果这可以在中间件级别完成，那就太好了，但这不是必需的。人们通常为验证/模式执行做什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-02T09:00:27.653

[node-validator](https://github.com/chriso/node-validator)是您正在寻找的。您可以像这样将其用作独立模块

```
var check = require('validator').check;

//Validate
check('test@email.com').len(6, 64).isEmail();        //Methods are chainable
check('abc').isInt();                                //Throws 'Invalid integer' 
```

或者您可以使用构建在 node-validator 之上的[express- validator 作为中间件。](https://github.com/ctavan/express-validator)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-17T22:39:09.640

这是各种 JSON 模式验证器的最新[基准。](http://cosmicrealms.com/blog/2014/08/29/benchmark-of-node-dot-js-json-validation-modules-part-3/)

此外，对于最佳实践，您可能需要查看[JSON-schema](http://json-schema.org/)，它试图制定一种定义 JSON 对象应如何定义的标准方法。

# git - 为什么我看到使用“git show”的提交，但在“git log”中看不到它？

> ID：13667525
> 
> 赞同：0
> 
> 时间：2012-12-02T08:05:42.417
> 
> 标签：git

我可以看到使用“git show 9a6fe03”的提交

但是当我使用“git log”并搜索“9a6fe03”时，我什么也看不到。

当我执行 'git grep 9a6fe03' 时，它也没有返回任何内容。

你能告诉我为什么吗？

谢谢你。

**更新**：当我使用 $git branch --all --contains 9a6fe03 时，我找到了我的提交

git branch --all --contains 956ae03

```
 remotes/my-git/branch1
  remotes/my-git/branch2
  remotes/my-git/branch3 
```

但是当我这样做时我什么也没看到

```
git branch --contain 9a6fe03 
```

我什么都得不到。

我的问题是我现在在哪个分支？当我做 '

```
 $ git branch
* (no branch) 
```

我想我在一个叫做“分离的头”的舞台上，但是当我做“回购同步”时，我得到了其他人的提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:54:59.907

多个问题，多个答案。:)

**1\. 日志 vs. 显示 vs. grep**

*   `git show 9a6fe03`将向您展示该单一提交。（包括更改。）
*   `git log 9a6fe03`还将向您展示该提交及其所有祖先。
*   `git log`（不带任何参数）将向您显示当前提交（HEAD）及其所有祖先。

如果 HEAD 不是您提交的祖先，则不会显示。

`git grep`完全不同。它会查看您的文件中的给定文本。由于可能没有文件会包含字符串“9a6fe03”，因此您不会得到任何输出。

**2\. 提交在哪个分支**

还有两种不同的分支：本地分支和远程分支。-`git branch`只显示本地分支 -`git branch -r`只显示远程分支 -`git branch -a`将显示本地和远程分支

在您的情况下，提交仅包含在远程分支中。因此，您只会在指定`-r`or `-a`(= `--all`) 时看到它。

**3\. 我在哪个分支**

由于您目前在“无分支”（又名分离的 HEAD），所以您正式在，嗯，没有分支。;)

您当前可能会看到代码的任何（可能很旧）版本，甚至碰巧在与分支的 HEAD 对应的提交上。

您可以尝试`git log --decorate --graph`- 如果有的话，它将在您的提交旁边显示任何类型的引用（如分支、标签等）。

# javascript - getElementsByClassName onclick 问题

> ID：13667533
> 
> 赞同：18
> 
> 时间：2012-12-02T08:06:29.187
> 
> 标签：javascript

我正在使用[Robert Nyman 的](http://robertnyman.com/2008/05/27/the-ultimate-getelementsbyclassname-anno-2008/)脚本来获取文档中具有相同类的所有元素，但它不适用于 onclick 或任何其他事件：

```
var photo = document.getElementsByClassName("photo_class","img",document.getElementById("photo_wrap")); 
photo.onclick = function(){alert("Finaly!"); 
```

也许你知道如何解决它？谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-02T08:14:49.033

我猜照片是一个数组。如果是这种情况，请尝试：

```
var photo = document.getElementsByClassName(
    "photo_class","img",document.getElementById("photo_wrap")
);

for (var i=0; i < photo.length; i++) {
    photo[i].onclick = function(){
        alert("Finaly!");
    }
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-02T08:09:29.750

尝试

```
photo[0].onclick = function(){alert("Finaly!");}; 
```

getElementsByClass 返回数组

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-02T08:10:28.677

你有没有机会尝试这样做？

```
var photo = document.querySelector("#photo_wrap img.photo_class");
photo.onclick = function() {alert("Hello!");}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-02T08:15:30.493

`getElementsByClassName`接受一个参数，类名并返回一个节点列表

如果您希望类名为“photo_class”的“photo_wrap”中的 <img> 元素采用相同的事件处理程序，则可以执行以下操作

```
var container = document.getElementById('photo_wrap');
var elements = container.getElementsByTagName('photo_class');
for(var x = 0; x < elements.length; x++) {
    // ignore anything which is not an <img>
    if(elements[x].nodeName != "IMG") {
       continue;
    }

    elements[x].addEventListener("click",function(){

      // do something when element is clicked
      this.style.backgroundColor = 'red'; // change element bgcolor to red

    },false);
} 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-12-02T08:16:17.490

使用 jquery，您可以轻松地定位具有特定类的所有元素并为其分配 onclick 事件，如下所示：

```
$(".photo_class").click(function(){
                            alert("Finally!")}); 
```

如果要定位具有 id 的特定元素，则可以使用以下调用：

```
$("#photo_element_id").click(function(){
                            alert("Finally!")}); 
```

# linux-kernel - linux内核中的帧缓冲区有新的骨架吗？

> ID：13667535
> 
> 赞同：0
> 
> 时间：2012-12-02T08:06:49.693
> 
> 标签：linux-kernel, framebuffer

我发现你在 2001 年重新设计了这个骨架：

[http://lxr.free-electrons.com/source/drivers/video/skeletonfb.c](http://lxr.free-electrons.com/source/drivers/video/skeletonfb.c)

它还成立吗？或者有什么新的指导方针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:42:15.170

我从来没有为 Linux 编写过帧缓冲设备驱动程序，但我建议你只编译并运行它。如果它有效，显然它并没有过时；）

# eclipse - 在本地机器上构建 cassandra

> ID：13667542
> 
> 赞同：0
> 
> 时间：2012-12-02T08:08:21.720
> 
> 标签：eclipse, ant, cassandra

当我尝试在本地盒子中构建 cassandra 时出现以下错误。

```
build-project:
     [echo] apache-cassandra: /Users/sn1/cassandra-codeBase/cassandra/build.xml
    [javac] Compiling 41 source files to /Users/sn1/cassandra-codeBase/cassandra/build/classes/thrift
    [javac] error: error reading /Users/sn1/cassandra-codeBase/cassandra/build/lib/jars/core-3.1.1.jar; cannot read zip file
    [javac] Note: /Users/sn1/cassandra-codeBase/cassandra/interface/thrift/gen-java/org/apache/cassandra/thrift/Cassandra.java uses or overrides a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
    [javac] 1 error

BUILD FAILED
/Users/sn1/cassandra-codeBase/cassandra/build.xml:675: Compile failed; see the compiler error output for details. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T08:10:57.587

您应该在 /Users/sn1/cassandra-codeBase/cassandra/build/lib/jars/ 目录中有 core-3.1.1.jar。

# json - Json Decode Php,使用ID获取名称

> ID：13667553
> 
> 赞同：0
> 
> 时间：2012-12-02T08:10:28.880
> 
> 标签：json, string, get

我得到了这个 json，但我不知道如何通过知道 ID 来获取名称。

```
[
    { "id":0, "name":"N/A"  },
    { "id":1, "name":"John" },
    { "id":2, "name":"Doom" }
] 
```

我在尝试着 ：

```
$json= file_get_contents($json);
$data = json_decode($json,true); 
```

但我不知道下一步该做什么.. :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T08:15:13.630

只包括 underscore.js 并做类似的事情

```
_.each(json, function(datum){ 
   if ( yourid === datum.id ) { //yourcode } 
}); 
```

# java - 浅拷贝 - 新实例或赋值

> ID：13667556
> 
> 赞同：4
> 
> 时间：2012-12-02T08:11:11.157
> 
> 标签：java

浅拷贝是指对象的**“拷贝”**，无论是原始值还是参考值，其属性值都相同。

在执行浅拷贝时是否有必要“*创建一个新实例*”？作为：

```
public class A {
    int aValue;
    B bObj;

    ...

    public A createShallow(A a1Obj) {
        A aObj = new A();
        aObj.aValue = a1Obj.aValue;
        aObj.bObj = a1Obj.bObj;

        return aObj;
    }
} 
```

或者*赋值*复制也被认为是浅拷贝：

```
B b = new B(10);
A a = new A(1, b);

A a1 = a; 
```

维基百科上的这篇[文章将浅拷贝定义为](http://en.wikipedia.org/wiki/Object_copy)*共享相同内存块*的引用变量。所以按这个copy by assignment也会是浅拷贝。

但它不是*指向同一对象的变量*而不是 Object 的*“副本”*吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T08:17:40.217

> 在执行浅拷贝时是否有必要“创建一个新实例”？

**是的，**您必须创建一个实例来创建对象的副本（或`shallow`或`deep`）。只是做引用的分配只会创建一个`copy of reference`指向同一个实例的。

您使用了一个`non-static method`正在创建一个`copy`. 但通常我更喜欢两种方式： -

要么使用`copy-constructor`： -

```
public A(A obj) {
    copy.aValue = obj.aValue;
} 
```

并像这样使用它：-

```
A first = new A();
A copy = new A(first); 
```

或者，使用 a`public static method`它接受一个实例并返回该实例的副本。

```
public static A createCopy(A obj) {
    A copy = new A();
    copy.aValue = obj.aValue;
    return copy;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T08:12:11.453

赋值不是副本——它只是对同一实例的第二次引用。

*副本*必须是新实例，否则不是副本；这只是另一个参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T08:15:20.983

> 在执行浅拷贝时是否有必要“创建一个新实例”？作为：

是的，这是必要的。

> 或者赋值复制也被认为是浅拷贝：

不，这是完全不同的操作。没有副本；这只是创建对现有对象的新引用。如果您通过这个新引用修改对象，您仍然在修改原始对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T08:16:01.933

引用分配不会创建新对象，而只是指向现有对象。

# javascript - node.js 和 sql 是否适用于简单的特定于客户端的号码跟踪应用程序？

> ID：13667563
> 
> 赞同：0
> 
> 时间：2012-12-02T08:12:52.373
> 
> 标签：javascript, node.js, web-applications

我需要编写一个允许任意数量的 Web 客户端递增和递减数字的应用程序。这与识别信息一起被发送到服务器并存储在服务器上。同时，另一个应用程序监视来自客户端的所有更新，并在另一个网页上可视化该数据。

这种问题对我来说是新的，所以我试图找出一种体面的方法来做到这一点，但也想要一个不会矫枉过正的方法。看起来使用客户端 javascript 通过 ajax 写入服务器文件可能有点棘手，所以我想到了 node.js 和 SQL 数据库。然而，鉴于这个应用程序是多么简单，我想知道它是否有点矫枉过正。

我可能正在查看大约 100 个最大并发客户端。我希望数据能够持续存在，以便我可以及时重新可视化之前的时刻（或重新启动崩溃的服务而不会丢失数据）。

这会不会有点矫枉过正？我真的只是在寻找一种简单的方法来尝试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:15:41.483

你的提议对我来说听起来很可靠。Node.js 非常轻巧，您可以选择连接到许多数据库。

无论如何，100 个同时连接的客户端实际上是相当大的流量。

# oracle - dbms_output.putline 的替代方案

> ID：13667564
> 
> 赞同：1
> 
> 时间：2012-12-02T08:13:14.153
> 
> 标签：oracle, plsql, oracle10g

我正在一个过程中创建一个动态查询，现在想查看它`dbms_output.putline`，但我的查询包含超过 255 个字符。

如何查看查询？

的替代品是`dbms_output.putline`什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T09:12:05.553

有一点混乱正在发生。

在 Oracle 9i`dbms_output.put_line`中被[限制为 255 个字符](http://docs.oracle.com/cd/B10501_01/appdev.920/a96612/d_outpu2.htm#1000446)。此限制[在 10g 中已删除，并且在](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_output.htm#i1000105)[Oracle 11g](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_output.htm#i1000105)中同样不存在。

您已标记您的问题[oracle10g](/questions/tagged/oracle10g "显示标记为“oracle10g”的问题")，这意味着您被限制为 32,767 字节，即标准 PL/SQL 最大值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T11:18:03.723

尝试弄乱类似的东西

```
create or replace procedure custom_output(in_string in varchar2 )
is 

   out_string_in long default in_string; 
   str_len number; 
   loop_count number default 0; 

begin 

   str_len := length(out_string_in);

   while loop_count < str_len
   loop 
      dbms_output.put_line( substr( out_string_in, loop_count +1, 255 ) ); 
      loop_count := loop_count +255; 
   end loop; 

end;

/ 
```

# java - 交通信号应用程序需要多少个线程？

> ID：13667565
> 
> 赞同：1
> 
> 时间：2012-12-02T08:13:29.803
> 
> 标签：java, multithreading

开发交通信号应用程序至少需要多少线程？我认为它只有一个，因为当任何一个灯为绿色时，其他三个方向将为红色。对于这个应用程序，不需要并行运行多个操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T08:21:35.873

如果不知道整个应用程序的范围是什么，就无法有意义地回答这个问题。（在简单的情况下，交通灯*模拟*当然可以在单个线程中实现……如果条件合适的话。）

然而，*现实世界*中的交通信号灯控制系统通常是用 C 等语言编写的，这些语言更擅长与控制器硬件接口。这让你的问题没有实际意义……有点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T08:15:09.253

作为司机，我当然希望这只是一个线程！

你只需要一个线程，但想象一下非线程安全代码或线程错误的影响......
**有人可能真的死了！**

### 已编辑

实际上，“这取决于”是正确的答案，如果有的话。

简单的红绿灯，例如人行横道，可以简单地阻塞等待按钮按下，然后完成循环并再次返回阻塞等待。

如果硬件不支持中断或其他单线程机制来处理实时输入信号，则可以接收许多输入的复杂事件驱动灯可能需要多个线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T08:40:17.717

正如其他人所提到的，在不知道您拥有的确切条件和限制的情况下，这是一项无用的练习。

但这是我的想法：我可能会有 4 个线程：

*   主线程——管理生命周期
*   接收线程——接收来自其他来源的事件，可能来自不同的硬件部分，比如消防车“遥控器”，或者来自附近交通信号灯的通信，以确定附近交通信号灯是否同步。
*   广播线程——将信号从这个特定的红绿灯发送到其他消费者（其他红绿灯、指挥和控制中心……）
*   处理线程——被委托处理从其他两个线程（接收器、广播器）发送和接收的事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T08:21:02.550

在一个非常微不足道的情况下是的。但通常交通信号取决于许多因素，例如：

1.  根据流量显示红/绿的时间
2.  在2-3条道路的任何交叉点上，每条道路的信号应该是同步的。

以此类推……

所以这个问题没有固定的答案。

# javascript - 为什么我不能停止点击时的默认操作？

> ID：13667573
> 
> 赞同：0
> 
> 时间：2012-12-02T08:14:35.827
> 
> 标签：javascript, jquery

我有以下内容：

```
$("#city-button-panel a")
    .click(function () {
    preventDefault();
    var $link = $(this);
    getCityContentAjax($link);
}); 
```

但它不允许我 preventDefault 并且它给出了一个语法错误

以下是#city-button-panel 深处的元素的样子：

```
<a href="/City/1555009O" id="btn-49">49</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T08:16:42.900

你需要调用`preventDefault`你被传递的事件。任何其他`preventDefault`要么未定义，要么做其他事情。尝试：

```
$("#city-button-panel a")
        .click(function (event) {
            event.preventDefault(); 
            var $link = $(this);
            getCityContentAjax($link);
        }); 
```

演示：http: [//jsfiddle.net/vatjK/](http://jsfiddle.net/vatjK/)

请注意，处理程序必须成功返回才能`preventDefault`正常工作。如果`getCityContentAjax`抛出异常，则无法阻止默认操作，同时也阻止异常传播。但是，您可以这样做（如果您无法修复`getCityContentAjax`）：

```
$("#city-button-panel a")
        .click(function (event) {
            event.preventDefault(); 
            var $link = $(this);
            try{
                getCityContentAjax($link);
            }catch(e){
                console && console.error(e);
                alert("Look at the console!!!"); // optional
            }
        }); 
```

这段代码没有语法错误。如果浏览器不这么认为，您可能在代码*之前有语法错误。*请注意，语法错误（括号不匹配等）和引用错误（全局范围内的函数不存在）之间存在差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T09:20:10.363

这是纯 javascript (+html) 版本

```
<head>
  <script>
     function theClick(url,ev){
       getCityContentAjax(url);
       ev.preventDefault();
     }
  </script>
</head>

<body>
  <a onclick="theClick(this,event)" href="url.html">a link</a>
</body> 
```

# java - 在 jQuery 中读取 json 数据并附加到 textarea

> ID：13667574
> 
> 赞同：0
> 
> 时间：2012-12-02T08:14:43.463
> 
> 标签：java, javascript, jquery, json

我有以下 JSON 数据。

```
{
  "cluster-1": [
    "item1",
    "item2"
  ],
  "cluster-2": [
    "item3",
    "item4"
  ],
  "cluster-3": [
    "item1",
    "item2"
  ]
} 
```

cluster-# 可以是任意数字。（范围为 1-50）“item#”只是字符串。

我想以下面的格式分离出数据，一旦完成，我想在几个 div 框中显示（我不想要这个，但如果你提供输入会很有帮助）

我想将它打印在 TextArea 框中，例如

```
cluster-1
  item1
  item2

cluster-2
  item3
  item4

cluster-3
  item5
  item6 
```

我正在从 java 源文件生成这些数据，如果需要更改格式，我可以控制它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:26:10.870

```
var data = {
          "cluster-1": [
            "item1",
            "item2"
          ],
          "cluster-2": [
            "item3",
            "item4"
          ],
          "cluster-3": [
            "item1",
            "item2"
          ]
        };

        var result = "";
        for (key in data) {
            result += key + "\n";
            for (subKey in data[key]) {
                result += "    " + data[key][subKey] + "\n";    
            }
        }

        console.log(result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T08:33:21.427

如果您正在寻找 ajax 类型的解决方案，请尝试以下解决方案：

```
 $.ajax({
                url: 'your json file path',
                type: 'GET',
                success: function() {
                    $.each(data[0], function(key, val) {
                        $('textareaID').val(key+'\n' + val+'\n');
                    });
                }); 
```

未经测试，但可能对您有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T08:33:45.927

上面的答案是关于 nodejs 的，我相信你在谈论简单的 js+html ......所以你会这样做而不是 console.log(result)：

```
$("div#myOutlet").text(result); 
```

在你的 html 中

```
<div id="myOutlet">text will be placed here</div> 
```

# php - 如何使用其 API 将新客户端添加到 snapbill

> ID：13667576
> 
> 赞同：1
> 
> 时间：2012-12-02T08:14:52.420
> 
> 标签：php, curl

我一直在尝试从 PHP 中使用 SnapBill 的 API。我只是想为表单发布的每个操作创建一个新客户端。

[SnapBill 客户端 API 的文档对](http://docs.snapbill.com/developers/api/client)我没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:31:38.747

我最近使用了这个 API，如果你是 REST 新手（像我一样），那么文档并没有任何意义。该 API 基于 RESTful 设计，因此我使用 PHP 的 cURL 库从 API 发送和获取请求。

这篇文章[http://www.lornajane.net/posts/2008/using-curl-and-php-to-talk-to-a-rest-service](http://www.lornajane.net/posts/2008/using-curl-and-php-to-talk-to-a-rest-service)对我帮助很大。希望你能明白。

# jquery - Jquery 选择框在 IE 7 中出现错误

> ID：13667591
> 
> 赞同：0
> 
> 时间：2012-12-02T08:16:08.363
> 
> 标签：jquery, html

Im using the following code and its working on all the browsers Except IE 7 this error occurs when the number of options exceeds 1900 options anyone have a solution for it .when I click a value it gives me a javascript error(A script on this page导致 Internet Explorer 运行缓慢）。感谢您的帮助。谢谢。这是我正在使用的代码。

```
 <html xmlns="http://www.w3.org/1999/xhtml">

   <head>

           <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

           <link href="http://select-box.googlecode.com/svn/tags/0.2/jquery.selectbox.css"type="text/css" rel="stylesheet" />

           <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

           <script type="text/javascript" src="http://select-box.googlecode.com/svn/tags/0.2/jquery.selectbox-0.2.min.js"></script>

         <title>Untitled Document</title>

      </head>

      <body> 

       <SCRIPT Language="JavaScript">

           <!-- 

           document.write('<select id="language">')

           for(i = 0; i < 2500; i++){

           document.write('<option value="javascript">'+i+'</option>') 

             }

            document.write('</select>')

           //-->

           </SCRIPT>

         </body> 

     <script type="text/javascript">

         $(function () {

         $("#language").selectbox();

       });

   </script>

    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T08:19:48.297

您是否尝试过输入数字的文本？我看不出滚动超过 2500 个数字的意义...当然，您可以使用两个选择，一个用于前 1250 个选项，另一个用于其他选项

# html - 调试 Http 405“方法不允许”

> ID：13667595
> 
> 赞同：0
> 
> 时间：2012-12-02T08:16:41.700
> 
> 标签：html, http

一个 Web 服务器正在运行（在 EC2 上），我正在以两种方式测试这个带有 method="post" 属性的简单 Html5 登录表单：

1.  原样
2.  在更大的网站内

> ```
> <div>
>     <form action="" method="post" >
>         <p/>
>         <input id="username" type="text" name="username" placeholder="Username" >
>         <p/>
>         <input id="password" type="password" name="password" placeholder="Password" >
>         <p/>
>         <input type="submit" class="btn" value="Login">
>     </form>
> </div> 
> ```

基于 Python 的 Web 服务器中的处理程序包括：

```
username = self.get_argument('username') 
password = self.get_argument('password') 
```

第一种方法适用于 Http 200，但第二种方法会生成 Http 405“方法不允许”。两者都在 Web 服务器上使用相同的处理程序代码。

我找不到问题出在哪里。调试此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:23:04.260

问题在于 Web 服务器和处理 Post 方法的 Class 函数的参数/属性的顺序。

# javascript - setInterval 中的引用成员函数

> ID：13667599
> 
> 赞同：2
> 
> 时间：2012-12-02T08:17:00.700
> 
> 标签：javascript, backbone.js, closures

我有一个看起来像这样的主干模型：

```
var myModel = Backbone.Model.extend({
    watch : function() {
        this.watcher = setInterval("this.refetch", 5000);
    }

    refetch : function() {
        //do something
    }
}); 
```

该`setInterval`方法实际上不起作用，因为我想在调用`this.refetch`中无效。`setInterval`两者都`setInterval("refetch", 5000);`不起作用。

我现在正在做的是这样的：

```
watch : function() {
    var that = this;
    setInterval(function(){
        that.refetch();
    }, 5000);   
} 
```

有没有更好的方法来做到这一点，这样我就不需要使用`that`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T09:22:31.700

由于 Backbone 已经自带 underscore.js，所以使用它。在您的情况下，上下文可以绑定到区间函数`_.bind`：

```
setInterval( _.bind( function(){this.refetch();}, this), 5000); 
```

这是更好的方法，不仅因为它更短，而且因为它可以防止`that`别名在嵌套范围内可见，这可能导致各种难以捕获的错误。请参阅 idiomatic.js 样式指南，“Faces of this”部分：[https ://github.com/rwldrn/idiomatic.js/](https://github.com/rwldrn/idiomatic.js/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T08:22:01.473

我想你现在在做什么，即

```
 function() {
var that = this;
setInterval(function(){
    that.refetch();
}, 5000);   
} 
```

本身就是一个更好的方法。！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T08:19:03.693

`this`在您的区间内不存在。如果您需要访问任何内容`this`，则需要将其传递给闭包中的匿名函数，如下所示：

```
setInternval( (
  return function(obj){
     obj.refetch();
  }(this)

) , 5000) 
```

# javascript - 解除绑定、销毁或删除先前声明的 jQuery 函数

> ID：13667600
> 
> 赞同：1
> 
> 时间：2012-12-02T08:17:27.910
> 
> 标签：javascript, jquery, breakpoints, sticky

我正在使用两个脚本（[FixTo](https://github.com/bbarakaci/fixto)和[Breakpoints](https://github.com/Abban/jQuery-Breakpoints)）来允许页面上的“粘性”元素。当我调整窗口大小时会出现问题。我需要销毁 FixTo 功能。有没有人在这方面取得任何成功：

```
$(window).bind('enterBreakpoint1024',function() {
  $('#log').text('debug: Entering 1024 breakpoint');
 // Sticky Elements (scroll)
 $('#stats').fixTo('.container');
 $('#extra').fixTo('.container', {mind: '#stats'});
 $('#right').fixTo('.container');
});

$(window).bind('exitBreakpoint1024',function() {
  $('#log').text('debug: Exiting 1024 breakpoint');
  // Need to Unbind, Destroy, or Remove the fixTo() function
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:32:58.497

我是插件的作者。

我在插件中添加了销毁、停止和启动方法。现在可以暂时或永久停止功能。

除非您追求自定义效果，否则 Fixto 不需要断点即可工作。

# jquery - jquery不更新div

> ID：13667602
> 
> 赞同：0
> 
> 时间：2012-12-02T08:17:50.967
> 
> 标签：jquery, time

我对 jquery 加载功能有疑问

```
jQuery(function(){
var refreshId = setInterval(function(){
    jQuery('.timeago').load(location.href+' .timeago>*');
}, 5000);
}); 
```

`After 5 seconds .timeago div just disappears! Why?`问题出在哪里或有另一种方法可以做到这一点？

PS对不起英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T08:24:02.010

`$(.yourDiv).trigger('create')`加载后尝试

# jsf - JSF 从 bean 方法重定向到另一个 bean

> ID：13667604
> 
> 赞同：1
> 
> 时间：2012-12-02T08:18:44.387
> 
> 标签：jsf

我有一个场景，我必须在呈现 JSF 页面之前调用另一个 bean 并注册 bean 属性，因为 JSF 页面引用了 bean 属性来呈现响应。

我正在寻找实现这种情况的最佳选择。为了更好地理解，我尝试以伪代码的形式表示所需的场景。

页面 A --> 按钮“查看详细信息”与 BeanOne.getDetail() 绑定 -- 范围是会话。

**BeanOne.getDetail()**

处理请求 - 调用后端方法以获取详细信息 - 如果 (type == XYZ) 然后调用 BeanTwo.getTypeXYZ() 并根据为 BeanTwo.getTypeXYZ() 定义的导航规则重定向 - 否则如果 (type == RST) 然后调用BeanThree.getTypeRST() 并根据为 BeanThree.getTypeRST() 定义的导航规则重定向

**BeanTwo.getTypeXYZ()**

*   处理请求
*   调用后端方法获取详细信息
*   设置 this.attributeB = 从后端方法返回的值。
*   导航到页面 B

**BeanTwo.getTypeRST()**

*   处理请求
*   调用后端方法获取详细信息
*   设置 this.attributeC = 从后端方法返回的值。
*   导航到页面 C

类似于在导航规则中使用 bean 方法名称

`<navigation-rule>`
`<from-view-id>Page A</from-view-id>`
`<navigation-case>`
`<from-action>#{beanOne.getDetail}</from-action>`
`<from-outcome>xyz</from-outcome>`
`<to-view-id>#{beanTwo.getTypeXYZ}</to-view-id>`
`</navigation-case>`
`<navigation-case>`
`<from-action>#{beanOne.getDetail}</from-action>`
`<from-outcome>rst</from-outcome>`
`<to-view-id>#{beanTwo.getTypeRST}</to-view-id>`
`</navigation-case>`
`</navigation-rule>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T09:00:00.700

你试过用`navication-rule`在`faces-config.xml`

```
<navigation-rule>
 <navigation-case>
  <from-outcome>XYZ</from-outcome>
  <to-view-id>pageB.xhtml</to-view-id>
  <redirect/>
  </navigation-case>
 <navigation-case>
  <from-outcome>RST</from-outcome>
  <to-view-id>pageC.xhtml</to-view-id>
  <redirect/>
 </navigation-case>
</navigation-rule> 
```

在豆

```
getTypeXYZ() {
   ...
   NavigationHandler nh = facesContext.getApplication().getNavigationHandler();
   nh.handleNavigation(facesContext, null, "XYZ");
} 
```

# java - 线程和观察者模式

> ID：13667606
> 
> 赞同：-1
> 
> 时间：2012-12-02T08:19:07.763
> 
> 标签：java, multithreading, design-patterns, thread-safety, core

我正在尝试在多线程程序中用 Java 编写观察模式来开发自己的日志程序。我的程序用于任何 Java 类，并且可以创建`Logger`该类，并向记录器写入一条消息。记录器类将调用记录器管理器类，它是一个单例类，它还有一个私有类，它是线程，在执行时调度程序运行，所以我将执行保留在私有构造函数中。

```
private void LoggerManager() { 
    System.out.println("IN CONSTRUCTOR"); 
    executorThread.submit(new CreateLoggerFileForSpecifiedTime());
}

static LoggerManager getInstance() {
    if (LOGMANAGER == null) {
        synchronized (LoggerManager.class) {
            if(LOGMANAGER == null){
                System.out.println("IN MANAGER");
                LOGMANAGER = new LoggerManager();
            }
        }
    }
    return LOGMANAGER;
} 
```

接下来LoogerManager 中有一个方法“writeMessageToLog”。

```
void writeMessageToLog(String componantName, String message, 
                     Calendar messageCreationTime) { 
    LoggerDetails logDetails = new LoggerDetails(componantName, message,
                     messageCreationTime); 
    LogInitiater logIntiater = new LogInitiater(logDetails, noticeOfLoggerChange, 
                     noticeOfMessageAdded); 
    executorThread.submit(logIntiater); 
} 
```

`LogIntitiater`是将 LogWriter 添加到两个主题的线程，一个主题是我在上面粘贴的调度程序，即计时器在每个指定时间运行并通知`LogWriter`需要创建新日志文件，而另一个目的是在添加消息时队列。代码没有按预期工作：*调度程序代码没有运行，我也试过了`execute`。没有调用私有构造函数 * 线程启动器并不总是被调用 * 观察模式：我使用了 J2SE 接口`Observable`，即`Observe`它们没有按预期工作

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:54:34.190

生产者 - Logger 的消费者方式**（不完整且未完全测试） - 将留给您**

这仅用于演示目的，并显示了一种执行异步日志记录的方法

```
import java.util.concurrent.ArrayBlockingQueue;
import java.util.concurrent.BlockingQueue;

class Logger extends Thread{
        private static Logger logger = null;
        private BlockingQueue<String> logRequests;

        private Logger(){
            logRequests = new ArrayBlockingQueue<String>(10000);
        }

        public static Logger getLogger(){
            if(logger == null){
                synchronized (Logger.class) {
                    logger = new Logger();
                    logger.start();
                }
            }
            return logger;
        }

        @Override
        public void run() {
            System.out.println("Starting to log");
            while(true){
                try {
                    System.out.println(logRequests.take());
                } catch (InterruptedException e) {
                    //interrupted so stop logging
                    System.out.println("Logger exiting");
                    break;
                }
            }
        }

        public void info(String logMessage){
            //not taken care of the case when queue becomes full
            //will leave it to you
            logRequests.add(logMessage);
        }
    } 
```

主班

```
public static void main(String[] args) {
        Logger.getLogger().info("This is info message");

        System.out.println("I am free");

        try {
            Thread.sleep(10000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

            //stop the log
        Logger.getLogger().interrupt();

    } 
```

# xml - XSD 属性 - 它们应该按顺序出现吗？

> ID：13667607
> 
> 赞同：0
> 
> 时间：2012-12-02T08:19:26.753
> 
> 标签：xml, xsd

我对 XSD Schema 中的属性有一个一般性的问题。
它们必须以与声明相同的顺序出现吗？例子：

```
<xsd:attribute name="aaa" >
<xsd:attribute name="bbb" > 
```

他们能像这样出现吗？

```
<shlomi aaa="1" bbb="2" > 
```

因为它们可能看起来像：

```
<shlomi bbb="2" aaa="1" > 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T09:45:29.687

不，属性是无序的。（也就是说，虽然它们有一个顺序，作为一个文本流，但这个顺序*并不重要*）。

因此，对于您提供的 XSD 片段，您的两个 XML 示例都是有效的。

# ruby-on-rails - 编写一个在我的帖子视图和投票控制器中都可用的方法？

> ID：13667608
> 
> 赞同：0
> 
> 时间：2012-12-02T08:19:32.373
> 
> 标签：ruby-on-rails

我有以下（`Vote`作为多态关联`Post`）：

**votes_controller.rb：**

```
if already_voted?
  @vote = @votable.votes.find_by_user_id(current_user.id)
  @vote.destroy
end 
```

**帖子/_vote_form.html.erb：**

```
<div class="vote-form">      
  <% if @post.votes.exists?(:user_id => current_user.id) %>
    <% if @post.votes.find_by_user_id(current_user.id).polarity == 1 %>
      <%= form_for ([@post, @post.votes.find_by_user_id(current_user.id)]),
                                                           method: :delete,
                                                           remote: true do |f| %>
(etc). 
```

我想`votes.find_by_user_id(current_user.id)`在帖子视图和投票控制器中都用这样的东西替换：

```
 def vote_by_current_user
    self.votes.find_by_user_id(current_user.id)
  end 
```

所以它们变得像这样更具可读性：

`@vote = @votable.vote_by_current_user`或者`<% if @post.vote_by_current_user.polarity == 1 %>`

我不确定如何在他们俩上都使用该方法。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:23:06.303

一件事：你不应该在你的模型中做任何与会话相关的事情（它打破了 MVC 模式），所以你已经在做正确的事情了。

你可以做些什么来改善这一点，那就是反过来：从`current_user`.

```
 class User < ActiveRecord::Base
   def self.polarized_vote_for( votable, polarity = 1 )
     votes.where( polarity: polarity ).find_by_votable_id( votable.id )
   end 
```

只需记住存储调用返回的关系以避免多个查询：

```
 <% if vote = current_user.polarized_vote_for( @post ) %>
   <%= form_for [@post, vote] do |f| %>
     # etc. 
```

# android - 提高音量和降低音量，通过本地应用在 Google TV 上静音

> ID：13667614
> 
> 赞同：1
> 
> 时间：2012-12-02T08:19:59.277
> 
> 标签：android, volume, google-tv

应用程序：在 Google TV 上运行的 UPNP 媒体服务器。我想提高和降低电视和/或放大器的音量（由用户在系统设置中配置）。

当用户将 Google TV 设备配置为在电视或放大器上使用音量控制时，AudioManager.setStreamVolume(AudioManager.STREAM_MUSIC, ...) 几乎什么都不做。

有没有办法通过软件模拟 Google TV 遥控器上的音量增大、减小和静音键的效果？

我知道可以使用 Anymote 协议来完成。但这需要配对，即使 UPNP 媒体服务器在本地运行。没有发生。

该功能在可能没有活动 UI 的服务中运行，因此调度 KeyEvent 也不是一种选择，我不认为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:40:13.327

新的 Google TV（NSZ、Vizio 和 LG）基于 ARM。至于关于音量控制的问题 - 因为音量控制已移交给外部系统，您需要监听其他设备的更改，以及应用程序需要知道活动音频流是什么。从上面有限的代码片段看来，您正在尝试在 STREAM_MUSIC 上设置音量，您是否尝试过 STREAM_SYSTEM？

我的另一个想法是，您可以在应用程序中将 Anymote 客户端版本作为服务运行（遥控器将在电视上运行 - 有点奇怪但可以工作），然后您的应用程序可以调用该服务来触发音量更改，因为您表示它适用于 Anymote。

# wcf - WCF 错误处理

> ID：13667615
> 
> 赞同：0
> 
> 时间：2012-12-02T08:20:31.663
> 
> 标签：wcf, error-handling

我有一个带有布尔函数的soap接口，如果一切顺利，这个函数应该返回true，如果出现问题，这个函数应该返回false。

如何在布尔函数上返回 false + errormessage ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:41:33.693

由于您的界面假定仅返回 bool 结果，因此您无法返回其他字符串。

如果它适合您的情况，那么您可以在服务器端生成带有指定消息的 Exception ，而不仅仅是 return `false`。

在这种情况下，服务器会返回 SOAP 错误作为响应。SOAP 错误包含异常消息。所以客户端知道请求被错误处理并且客户端能够读取错误消息。
那是标准行为。

您可以[在此处](http://msdn.microsoft.com/en-us/library/ms733721.aspx)找到更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:50:03.710

作为对您问题的直接回答：是的，这是可能的，尽管当然不仅使用`bool`返回类型。只需将消息作为`out`参数传递/提供。

例如：

```
 [OperationContract]
 bool MyOperation(/* ... other arguments ..., */ out string message); 
```

正如@Alexander Stepaniuk 所说，您应该考虑使用异常，即错误，或者考虑提供数据契约作为返回类型。

例如：

```
 [DataContract]
  public class MyResult
  {
       [DataMember]
       public bool Success { get; set; }

       [DataMember]
       public string ErrorMessage { get; set; }
  }

  [ServiceContract]
  public interface IMyContract
  {
       [OperationContract]
       MyResult MyFunction( /* ... other arguments ... */);
  } 
```

有关相关讨论，请参阅[为什么 WCF 合同会包含 ref/out 参数？](https://stackoverflow.com/questions/8071444/why-would-a-wcf-contract-include-a-ref-out-parameter).

# redirect - 重定向在 Global.asax 发布时间不起作用

> ID：13667618
> 
> 赞同：1
> 
> 时间：2012-12-02T08:21:12.673
> 
> 标签：redirect, iis-7.5, publish, global-asax

我在 Global.asax 中添加了自定义错误异常。它在调试模式下工作，但是当我在 IIS 7.0 中发布它时它不起作用： Global.asax：

```
 void Application_Error(object sender, EventArgs e)
    {
    // Code that runs when an unhandled error occurs
        //Ramezani V4.5: Change0002 29-08-91        
        if (Context.AllErrors[0].InnerException != null)
        {
            try
            {
                bool IsValid = (Session["ExceptionHandler"] == null);
                ArisFramWork.ExceptionHandler handler = new ArisFramWork.ExceptionHandler(Request.AppRelativeCurrentExecutionFilePath, (Context.AllErrors[0] == null ? new Exception("No Error Found") : Context.AllErrors[0]));
                Session["ExceptionHandler"] = handler;
                string redirectURL = (IsValid ? Request.AppRelativeCurrentExecutionFilePath : "~/ExceptionHandler.aspx");
                Response.Redirect((Request.QueryString.Count == 0 ? redirectURL : redirectURL + "?" + Request.QueryString.ToString()));    
            }
            catch
            {
                Session["ExceptionHandler"] = null;
            }
        }
        else
        {
            Response.Redirect("~/FileAccess.aspx");
        }
    }
 void Application_Start(object sender, EventArgs e)
    {
        FastReport.Utils.Config.WebMode = true;
        // Code that runs on application startup
        //Ramezani V4.5: Change0002 29-08-91       
        //if (Context.Handler is IRequiresSessionState || Context.Handler is IReadOnlySessionState)       
            Session["ExceptionHandler"] = null;
    } 
```

在 ExceptionHandler.aspx 中：

```
protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            publicclass.MessageBox("Hello ExceptionHandler", this);
            if (Session["ExceptionHandler"] != null)
            {
                if(ExceptionHandlerBulletedList.Items.Count==1)
                    ExceptionHandlerBulletedList.Items.RemoveAt(0);
                List<ArisFramWork.ExceptionHandler> ExecutionCollection = (List<ArisFramWork.ExceptionHandler>)Session["ExceptionHandler"];
                if (ExecutionCollection.Count < 1)
                {
                    Page.ClientScript.RegisterClientScriptBlock(Page.GetType(), "CloseForm", "window.close();", true);
                    return;
                }       
                .....
                Session["ExceptionHandler"] = null;
            }
        }
        catch (Exception exception)
        {
            Page.ClientScript.RegisterClientScriptBlock(Page.GetType(), "CloseForm", "window.close();", true);
        }
    } 
```

当我通过 Visual Studio 2010 在调试模式下运行网站时，它可以工作，但它不会在发布模式下重定向到 ExceptionHandler.asax

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:40:59.120

这是因为 global.asax 文件没有发布。手动将该文件复制到您发布的文件夹中。

如果这是一个 Web 应用程序项目，那么您可以将 global.asax 文件属性设置为内容。不幸的是，如果它是网站，那么您必须手动进行。

我仍然在想如何将 global.asax 包含到发布列表中。还没有答案。

[global.asax 在本地计算机上工作，但在我发布到服务器后不起作用](https://stackoverflow.com/questions/3647556/global-asax-works-on-local-computer-but-not-after-i-publish-to-server)

# assembly - 无法将用户输入与数字进行比较，nasm elf64

> ID：13667620
> 
> 赞同：1
> 
> 时间：2012-12-02T08:21:35.933
> 
> 标签：assembly, 64-bit, nasm

我发誓我今天已经阅读了 20 多页，从 NASM 的手册到大学指南到维基百科，再到介于两者之间的所有内容，但我无法理解这一点，我编写了一个程序来比较用户输入与0 或 1，然后根据它采取行动（一旦我在 Assembly 中掌握了它们的窍门，我可能应该使用一个数组），但现在就可以了。

问题是，**我的检查从来没有用过**，它们总是直接进入错误标签，我查看了[x86 NASM 程序集 - 输入问题](https://stackoverflow.com/questions/8073996/x86-nasm-assembly-problems-with-input)，看起来很相似但并不完全相同，我真的不需要存储用户的输入，只需检查它是什么并对其做出反应。

这是我的代码的简化版本，它应该在输入两个连续的 0 后退出，显然我无法测试它，因为我无法弄清楚用户输入了什么。

如果这是一个愚蠢的问题，我很抱歉，但本周大会得到了最好的我。

```
; constants
section .data
  lblZero:      db    'Zero';
  lblOne:       db    'One ';
  lblNumLength: db    0x4;
  tmp:          db    0;

; code
section .text
  global _start

; linker needs this, 'main'
_start:

loop:
  ; user was already prompted for a single digit
  ; store user's input ; read
  mov rax, 0 ;
  mov rbx, 19 ;
  mov rcx, tmp ;
  mov rdx, 10 ;
  syscall
  ; series of IFs
  cmp   rcx, 0    ; is input 0? 00 exits the program
  je    isZero
  cmp   rcx, 1    ; is input 1?
  je    isOne  
  jmp   exit  

; user typed 0
isZero:
  inc   rcx               ; flag for 0
  cmp   rcx, 2            ; checking if this is the 2nd zero
  je    exit              ; if so, we are outta here
  mov   rsi, lblZero ;
  mov   rcx, -1 ;
  jmp  print ;

; user typed 1
isOne:
  mov   rsi, lblOne ;
  mov   rcx, -1 ;
  jmp  print ;

; prints the string into the screen ; sys_write
print:
  mov   rax, 1 ;           
  mov   rdi, 1 ;         
  mov   rdx, lblNumLength ;       
  syscall
  jmp   loop

; displays an error message
err:
  ; sys_write, not relevant to the Q     
  syscall
  jmp loop

; shutsdown program ; sys_write ; sys_exit
exit:
  ; not relevant to the Q, code always ends here 
```

我在这里读到[http://www.cin.ufpe.br/~if817/arquivos/asmtut/index.html#stack](http://www.cin.ufpe.br/~if817/arquivos/asmtut/index.html#stack)输入不是真正的int，而是一个字符，所以我尝试创建只存储'1 ' 或 '0' 但似乎没有任何作用。

我是Assembly的超级新手，所以如果我在这里做得很愚蠢，如果你指出我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:10:20.000

假设您尝试在 64 位 AMD64 linux 上运行它，您需要确保使用正确的方式将参数传递给内核（调用约定）。

对于 linux/x64 上的 64 位应用程序，如下所示：

*   **rax** - 系统调用 ID
*   **rdi** - 参数 1
*   **rsi** - 参数 2
*   **rdx** - 参数 3
*   **r10** - 参数 4
*   arg 5 和 6 在**r9**和**r8中**
*   **rcx**和**r11**值不会在系统调用中保留，但不会破坏所有其他寄存器。

此外，Paul R 的回答也是正确的。'0' 的 ASCII 表示不是十进制零。另一个问题是标准输入默认在缓冲模式下运行，所以在你按下回车之前你实际上不会得到任何数据。下面的代码将两个字节读入 tmp 缓冲区（由 rsi 指向），并将第一个字节与 ascii-0 进行比较。第二个字节是我们并不特别感兴趣的换行符。

```
; constants
section .data
  lblZero:      db    'Not zero, try again', 0xa;
  tmp:          db    0,0;
; code

section .text
BITS 64
  global _start
_start: 
  mov rax, 0   ; sys_read(int fd, void *ptr, int count)
  mov rdi, 0   ; 0 = stdin 
  mov rsi, tmp ; @ tmp
  mov rdx, 2   ; 2 bytes (one for our number, another to store newline)
  syscall
  cmp byte[rsi], '0' ; is input '0' (or decimal 48) ? 
  je  done
  mov rax, 1            ; sys_write(int fd, void *ptr, int count)
  mov rdi, 1            ; 1 = stdout
  mov rsi, lblZero      ; @lblZero
  mov rdx, 20           ; 20 bytes
  syscall
  jmp _start

done:   
  mov rax, 60 ; sys_exit
  mov rdi, 0
  syscall 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T09:07:02.217

您需要比较*字符*，而不是整数值。改变：

```
cmp rcx,0 
```

至

```
cmp byte [rcx],'0' 
```

同上与 1 进行比较。

# c# - TPL 数据流，替代 JoinBlock 限制？

> ID：13667621
> 
> 赞同：5
> 
> 时间：2012-12-02T08:21:42.197
> 
> 标签：c#, concurrency, task-parallel-library, tpl-dataflow, actor-model

我寻找可以通过 n-TransformBlocks 链接到 JoinBlock 的替代方法，并将所有 TransformBlock 源块的消息连接/合并在一起，以便将此类集合传递到另一个数据流块。

JoinBlock 可以很好地完成这项工作，但仅限于连接最多 3 个源块。它还存在很多效率低下的问题（连接 2 个源块的偶数值类型（整数）非常慢）。有没有办法让从 TransformBlocks 返回的 Tasks 并等到所有 TransformBlocks 都有完成的任务才能在接受之前传递`Task<item>`？

有什么替代的想法吗？在传递加入的项目集合之前，我可能有 1-20 个这样的转换块，我需要将哪些项目连接在一起。每个变换块保证为每个“变换”的输入项准确返回一个输出项。

**编辑：要求澄清：**

根据我之前的一个问题，我将 JoinBlocks 设置如下：

```
public Test()
{
    broadCastBlock = new BroadcastBlock<int>(i =>
        {
            return i;
        });

    transformBlock1 = new TransformBlock<int, int>(i =>
        {
            return i;
        });

    transformBlock2 = new TransformBlock<int, int>(i =>
        {
            return i;
        });

    joinBlock = new JoinBlock<int, int>();

    processorBlock = new ActionBlock<Tuple<int, int>>(tuple =>
        {
            //Console.WriteLine("tfb1: " + tuple.Item1 + "tfb2: " + tuple.Item2);
        });

    //Linking
    broadCastBlock.LinkTo(transformBlock1, new DataflowLinkOptions { PropagateCompletion = true });
    broadCastBlock.LinkTo(transformBlock2, new DataflowLinkOptions { PropagateCompletion = true });
    transformBlock1.LinkTo(joinBlock.Target1);
    transformBlock2.LinkTo(joinBlock.Target2);
    joinBlock.LinkTo(processorBlock, new DataflowLinkOptions { PropagateCompletion = true });
}

public void Start()
{
    Stopwatch watch = new Stopwatch();
    watch.Start();

    const int numElements = 1000000;

    for (int i = 1; i <= numElements; i++)
    {
        broadCastBlock.Post(i);
    }

    ////mark completion
    broadCastBlock.Complete();
    Task.WhenAll(transformBlock1.Completion, transformBlock2.Completion).ContinueWith(_ => joinBlock.Complete());

    processorBlock.Completion.Wait();

    watch.Stop();

    Console.WriteLine("Time it took: " + watch.ElapsedMilliseconds + " - items processed per second: " + numElements / watch.ElapsedMilliseconds * 1000);
    Console.ReadLine();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T10:16:16.347

一种方法是使用`BatchBlock`with `Greedy`set to `false`。在这个配置中，块不会做任何事情，直到有`n`来自`n`不同块的项目等待它被消耗（在哪里`n`是你在创建时设置的数字`BatchBlock`）。发生这种情况时，它会立即消耗所有`n`项目并生成一个包含所有项目的数组。

此解决方案的一个警告是生成的数组未排序：您不会知道哪个项目来自哪个来源。而且我不知道它的性能与它相比如何`JoinBlock`，您必须自己测试。（虽然我会理解如果使用`BatchBlock`这种方式会更慢，因为非贪婪消费所需的开销。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-11T10:59:11.887

如果您想为每个项目执行多个并行操作，恕我直言，在单个块内执行这些操作更有意义，而不是将它们拆分为多个块，然后尝试再次将独立结果连接到单个对象中。所以我的建议是做这样的事情：

```
var block = new TransformBlock<MyClass, MyClass>(async item =>
{
    Task<SomeType1> task1 = Task.Run(() => CalculateProperty1(item.Id));
    Task<SomeType2> task2 = Task.Run(() => CalculateProperty2(item.Id));
    await Task.WhenAll(task1, task2).ConfigureAwait(false);
    item.Property1 = task1.Result;
    item.Property2 = task2.Result;
    return item;
}, new ExecutionDataflowBlockOptions()
{
    MaxDegreeOfParallelism = 2
}); 
```

在上面的示例中，类型`MyClass`的项目通过`TransformBlock`. 每个项目的属性`Property1`和`Property2`使用单独`Task`的每个属性并行计算。然后等待两个任务，当两个任务都完成时，结果将分配给项目的属性。最后返回处理后的项目。

对于这种方法，您唯一需要注意的是并行度将是内部并行操作和[`MaxDegreeOfParallelism`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.dataflow.executiondataflowblockoptions.maxdegreeofparallelism)块选项的乘积。因此，在上面的示例中，并行度将为 2 x 2 = 4。准确地说，这将是最大并行度，因为两个内部计算中的一个可能会比另一个慢。因此，在任何给定时刻，实际并行度可能在 2 到 4 之间。

# c - 打印语句在无限循环之前不会打印

> ID：13667625
> 
> 赞同：2
> 
> 时间：2012-12-02T08:22:06.783
> 
> 标签：c, compiler-construction, printf, infinite-loop, scanf

在尝试调试一些 C 代码时，我注意到 printf() 如果放置在无限循环之前将不会执行。有人知道为什么吗？实际上，这没什么大不了的，但对于调试来说，这是一场噩梦。

```
#include<stdio.h>

int main()
{
  int data;

  printf("This prints fine.\n");  

  printf("Enter data: ");
  scanf("%d", &data);

  printf("This should print but it doesn't.\n");

  while(1)
  {
    //Infinite Loop
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T08:30:48.037

在调用 printf() 时，在程序终止或遇到换行符后显示输出。但是由于您在 printf() 之后调用无限循环，因此程序不会终止并且不会显示缓冲区的输出。

用于`fflush(stdout)`强制显示缓冲区的输出

**`stdout`** 标准输出流是应用程序的默认输出目的地。在大多数系统中，它通常默认定向到文本控制台（通常在屏幕上）。

该**`fflush()`**函数使系统清空缓冲区

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:49:50.220

它们是一个叫做行缓冲区和块缓冲区的概念。您要写入屏幕的所有内容都将在缓冲区中。行缓冲区意味着当有新行 [\n] 找到它时“将刷新缓冲区，这意味着您的字符串将在屏幕上打印。块缓冲区意味着它们的块大小将是固定的，除非该块已满，否则它不会在屏幕。在上述情况下，新行 [\n] 足以打印

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T10:59:33.043

尝试 __fpurge(stdout) 它将清除您的输出缓冲区

# python - BeautifulSoup 并从列表中删除结果？Python

> ID：13667626
> 
> 赞同：0
> 
> 时间：2012-12-02T08:22:06.680
> 
> 标签：python, list, beautifulsoup

我正在尝试从我从一些 BeautifulSoup 结果创建的列表中删除项目。我的 for 循环似乎删除了一些符合我在 if 和 elif 条件中的条件的项目——但不是全部。你们能帮帮我吗？

```
from BeautifulSoup import BeautifulSoup
import urllib
import re

# url constructor for search
pass
pass
pass

# read the site into a string
site = urllib.urlopen("http://losangeles.craigslist.org/moa/")
html = site.read()
site.close()
soup = BeautifulSoup(html)

#Price
prices = soup.findAll("span", {"class":"itempp"})
prices = [str(j).strip('<span class="itempp"> $</span>') for j in prices]
print prices
print len(prices)

for k in prices:
    if k == '':
        prices.remove(k)
    elif int(k) <= 50:
        prices.remove(k)

print prices
print len(prices) 
```

返回：

```
['230', '120', '1', '333', '180', '380', '120', '1', '230', '25', '300', '500', '480', '199', '600', '180', '260', '200', '35', '250', '10', '80', '200', '20', '20', '', '20', '15', '10', '', '35', '225', '9', '', '79', '280', '30', '10', '10', '80', '1', '20', '', '15', '20', '200', '550', '20', '700', '350', '25', '30', '99', '', '', '40', '', '200', '25', '20', '180', '', '120', '50', '700', '120', '380', '320', '130', '325', '175', '180', '120', '260', '5', '450', '650', '400', '700', '50', '600', '250', '699', '245', '649', '450', '615', '450', '665', '5', '5', '50', '1100', '30', '300', '700', '15', '12', '12', '10']
100
['230', '120', '333', '180', '380', '120', '230', '300', '500', '480', '199', '600', '180', '260', '200', '250', '80', '200', '35', '225', '79', '280', '10', '10', '80', '20', '20', '200', '550', '20', '700', '350', '99', '', '', '200', '20', '180', '', '120', '700', '120', '380', '320', '130', '325', '175', '180', '120', '260', '450', '650', '400', '700', '600', '250', '699', '245', '649', '450', '615', '450', '665', '5', '1100', '30', '300', '700', '15', '12', '10']
71 
```

**请注意，第一个 1 已被删除，但随后还保留了一些 10，一些 ' 也是如此。

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:26:14.427

`prices`如果您想在循环期间删除某些项目，您应该遍历列表的副本。尝试：

```
for k in prices[:]:
    if k == '':
        prices.remove(k)
    elif int(k) <= 50:
        prices.remove(k) 
```

或使用列表推导：

```
prices[:] = [p for p in prices if p and int(p) > 50] 
```

# ios - 以圆周运动围绕一个点移动物体

> ID：13667632
> 
> 赞同：1
> 
> 时间：2012-12-02T08:23:37.280
> 
> 标签：ios, objective-c, animation

我在一个视图中有一些对象，我想在屏幕上围绕它们自己的点移动。我希望它们看起来几乎是静止的，但有轻微的圆周运动（不是旋转，物品将保持笔直和水平），有点像在海洋中上下浮动的浮标，也有一些水平运动。

我的基本想法是围绕对象移动锚点。我只想要一个微妙的效果，对象不会在整个屏幕上移动。最多10-20分。它们将是仍然能够被按下的 UIButtons。到目前为止，我搜索的所有结果都是围绕一个点旋转，而不是我所追求的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T13:35:09.857

您可以使用`CAKeyframeAnimation`使您的对象遵循一个小圆圈或任何其他适合您需要的路径。以下是创建和使用`CAKeyframeAnimation`对象的方法。

```
CAKeyframeAnimation *pathAnimation = [CAKeyframeAnimation animationWithKeyPath:@"position"];
pathAnimation.calculationMode = kCAAnimationPaced;
pathAnimation.fillMode = kCAFillModeForwards;
pathAnimation.removedOnCompletion = NO;
CGMutablePathRef * circle = CGPathCreateWithEllipseInRect(CGRectMake(/* the center of your object and the radius of your circle*/));
pathAnimation.path = circle;
CGPathRelease(circle);
[buttonView.layer addAnimation:pathAnimation forKey:@"animatePath"]; 
```

这应该让你开始。请注意，您需要导入 QuartzCore 框架才能使其正常工作。

# c# - 在 C# 中通过并发队列执行泛型方法

> ID：13667634
> 
> 赞同：0
> 
> 时间：2012-12-02T08:23:39.280
> 
> 标签：c#, multithreading

我想在后台线程中执行一些操作。但是，我想在后台工作人员中执行的方法的签名并不相同。例如：

```
objA.method1(arg1)
objA.method2(arg2)
objB.method3(arg3)
objA.method4(arg4) 
```

是否可以使用 ConcurrentQueue 或其他类以允许我指定要委托给工作线程的对象、方法和方法的参数？

我想使用类似于 ConcurrentQueue 的东西，它允许我使用生产者-消费者模式来生成和使用工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T08:30:29.987

您可以使用匿名方法：

```
 Queue<Action> Q;

 Q.Enqueue(()=> objA.method1(arg1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T08:38:18.307

实际上有很多替代品`BackgroundWorker`，但你确实也可以用它做任何事情。一旦我通过这样的`static`方法做到这一点：

```
static BackgroundWorker StartWorker(DoWorkEventHandler _doWork,
                                    ProgressChangedEventHandler _progressChanged,
                                    RunWorkerCompletedEventHandler _runWorkerCompleted,
                                    bool _workerReportsProgress,
                                    bool _workerSupportsCancellation,
                                    object arg)
{
    BackgroundWorker worker = new BackgroundWorker();
    worker.WorkerReportsProgress = _workerReportsProgress;
    worker.WorkerSupportsCancellation = _workerSupportsCancellation;
    worker.DoWork += _doWork;
    worker.ProgressChanged += _progressChanged;
    worker.RunWorkerCompleted += _runWorkerCompleted;
    try
    {
        worker.RunWorkerAsync(arg);
        return worker;
    }
    catch (Exception ex)
    {
        //...
        return null;
    }
} 
```

因此，如果方法的主体相当小，您可以通过 lambda 在此处传递任何委托：

```
StartWorker((s, e) =>
    {
        object argument = e.Argument;
        //do any work you need
    },
    (s, e) =>
    {
        //do smth on progress changed
    },
    (s, e) =>
    {
        //do smth on worker completed
    },
    true,
    true,
    null);//pass any argument you need 
```

或者您可以使用显式编写的方法...

当然`ProgressChangedEventHandler`，`RunWorkerCompletedEventHandler`如果您不需要它们，您可以省略其中的任何一个。

# php - 在drupal 7中的块内创建自定义表单

> ID：13667635
> 
> 赞同：3
> 
> 时间：2012-12-02T08:23:57.017
> 
> 标签：php, drupal, drupal-7, drupal-fapi, drupal-forms

我知道如何使用模块来创建块，并且我知道如何使用表单 api 创建自定义表单。

现在，我想在我创建的块中添加这个自定义表单。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T08:26:14.723

使用以下代码（[hook_block_view](https://api.drupal.org/api/drupal/modules!block!block.api.php/function/hook_block_view/7)）：

```
 function yourmodule_block_view($delta='') {
     $block = array();
     switch($delta) {
        case 'block_name':
          $block['subject'] = t("Block Title"); 
          $block['content'] = drupal_get_form('your_form_id');
          break;
     }
     return $block;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-14T09:57:54.587

当您在添加组件的同时创建 web 表单时，请查看右上角的表单设置：

1.  点击表格设置
2.  转到底部的高级设置，然后单击
3.  您会发现它可以作为一个框复选框启用

如果启用，此网络表单将作为一个块提供。

# sprite - 托管 DirectX 缩小精灵

> ID：13667638
> 
> 赞同：1
> 
> 时间：2012-12-02T08:24:18.063
> 
> 标签：sprite, scaling, managed-directx

我不知道如何缩小（缩小）我的精灵。

我使用了 2 个函数：**sprite.draw2d**和**sprite.draw**。当我使用第一个时，我指定参数“目标大小”，当我使用第二个时，我将转换应用于精灵，例如“affineTransformation2D”。

一切顺利，直到宽度和高度小于1（原始大小）。如果 size 为 (0.5, 0.5)，则仅绘制纹理的左上角四分之一。例如，如果 size 为 (0.7, 0.8)，则 MDX 会绘制 2 个相同的纹理，它们具有不同的大小并且彼此半透明。

为什么会这样？也许还有其他方法可以使精灵更小？

# actionscript-3 - 动态更改嵌入源类

> ID：13667639
> 
> 赞同：0
> 
> 时间：2012-12-02T08:24:42.327
> 
> 标签：actionscript-3, flash, apache-flex, actionscript, flex3

我正在开发一个 Flex 应用程序，我需要动态更新按钮图标源，但是，通过在运行时将图标属性更改为另一个 Class 变量对我来说还不够，我需要将 Class 源显式更改为另一个。我用谷歌搜索我的疑问，但还没有答案。

我想要以下内容： [http ://www.java2s.com/Code/Flex/Graphics/ChangeImagesourceinbuttonaction.htm](http://www.java2s.com/Code/Flex/Graphics/ChangeImagesourceinbuttonaction.htm)

但我需要它来做这样的事情：

```
[Embed(source="sun.jpg")]
[Bindable]
private var dayAsset:Class;

private function init(  ):void {
    dayImage.source = dayAsset;
}

private function showMoon(  ):void {
    dayAsset.source = "moon.jpg";
}

private function showSun(  ):void {
    dayAsset.source = "sun.jpg";
} 
```

我已经尝试了以前的代码但没有成功。

为什么我需要以这种方式更新“dayImage”图像源？因为我在多个位置引用了图像，所以我需要在触发事件时全部更新

任何解决方案：P 或评论将不胜感激。

谢谢。有一个美好的夜晚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:30:15.997

如果我理解这个问题；那么答案是您不能在运行时更改嵌入。它们在编译时执行；并成为您编译的 SWF 的一部分。

您很可能希望采用这样的方法：

```
// embed both images
[Embed(source="sun.jpg")]
[Bindable]
private var dayAssetSun:Class;

[Embed(source="moon.jpg")]
[Bindable]
private var dayAssetMoon:Class;

// us a variable to store the reference to the image you want to see
private var currentDayAsset :Class;

// set the current asset
private function init(  ):void {
    dayImage.source = currentDayAsset;
}

// these methods change the currentDayAsset variable; but do not affect the embeds
private function showMoon(  ):void {
    currentDayAsset =  dayAssetMoon;
}

private function showSun(  ):void {
    currentDayAsset =  dayAssetSun;
} 
```

# ruby - Rails action mailer javascript，ruby与javascript混合？

> ID：13667640
> 
> 赞同：0
> 
> 时间：2012-12-02T08:25:15.893
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.2

我正在使用导轨 3.2.8。

按照[http://www.railsmine.net/2010/03/rails-3-action-mailer-example.html上的教程](http://www.railsmine.net/2010/03/rails-3-action-mailer-example.html)

但似乎效果不佳。

似乎无法识别嵌入在 ruby​​ 代码中的 javascript

我认为导致问题的代码

```
def support_notification(sender)
  @sender = sender
  mail(mail(:to => "administrator@yourdomain.com <script type="text/javascript">
  /* <![CDATA[ */
  (function(){try{var      
  s,a,i,j,r,c,l=document.getElementById("__cf_email__");a=l.className;if(a)  
  {s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2) 
  {c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}
  s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();/* ]]> */
  </script>",
  :from => sender.email,
  :subject => "New #{sender.support_type}")
end 
```

错误提示

```
app/mailers/notifier.rb:6: syntax error, unexpected tIDENTIFIER, expecting ')'
...ourdomain.com<script type="text/javascript">
...                               ^

app/mailers/notifier.rb:6: syntax error, unexpected tSTRING_BEG, expecting keyword_do or     
'{' or '('...m<script type="text/javascript">
          ...                               ^
 app/mailers/notifier.rb:8: syntax error, unexpected  tIDENTIFIER, expecting keyword_end
  ...nt.getElementById("__cf_email__");a=l.className;if(a){s='';r...
  ...                               ^

 app/mailers/notifier.rb:12: syntax error, unexpected ')', expecting keyword_end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:29:25.167

可能在提到的博客 JavaScript 中存在错误，它在任何电子邮件地址附近爆炸，可能您想要的代码如下：

```
def support_notification(sender)
  @sender = sender
  mail(:to => "administrator@yourdomain.com",
  :from => sender.email,
  :subject => "New #{sender.support_type}")
end 
```

# android-emulator - adb 无法将 .apk 文件复制到 Android 模拟器：没有这样的文件或目录

> ID：13667641
> 
> 赞同：4
> 
> 时间：2012-12-02T08:25:44.197
> 
> 标签：android-emulator

我在让 MyFirstApp (Hello World) Android 应用程序在模拟器中工作时遇到了困难。

我正在按照以下说明进行操作：

[http://developer.android.com/training/basics/firstapp/running-app.html](http://developer.android.com/training/basics/firstapp/running-app.html)

Windows7-64 / 日食

该应用程序通过 USB 连接到我的手机。

采取的步骤：

1.  确保我的 PATH 环境变量包含 Android SDK。好的。

2.  启动 C:/Users/(me)/AppData/Local/Androd/android-sdk/platform-tools/adb.exe。好的。

3.  从 Eclipse 启动模拟器。好的，它出现了。

4.  验证 MyFirstApp.apk 是否存在于 Eclipse 工作区 MyFirstApp/bin 目录中。

5.  从 Eclipse 运行 MyFirstApp 应用程序。

Eclipse 控制台打印出：

* * *

> [2012-12-01 23:02:15 - MyFirstApp] Android 发布！
> 
> [2012-12-01 23:02:15 - MyFirstApp] adb 运行正常。
> 
> [2012-12-01 23:02:15 - MyFirstApp] 执行 com.example.myfirstapp.MainActivity 活动启动
> 
> [2012-12-01 23:02:15 - MyFirstApp] 自动目标模式：使用现有的模拟器 'emulator-5554' 运行兼容的 AVD 'Galaxy_Captivate_2.2'
> 
> [2012-12-01 23:02:15 - MyFirstApp] 将 MyFirstApp.apk 上传到设备 'emulator-5554'
> 
> [2012-12-01 23:02:17 - MyFirstApp] 无法在设备“emulator-5554”上安装 MyFirstApp.apk：没有这样的文件或目录 [!! 红色（错误）！！]
> 
> [2012-12-01 23:02:17 - MyFirstApp] com.android.ddmlib.SyncException：没有这样的文件或目录 [!! 红色（错误）！！]
> 
> [2012-12-01 23:02:17 - MyFirstApp] 发布取消！[！！红色（错误）！！]

我从命令行尝试了 adb install ：

> adb install MyFirstApp.apk

并得到

> 无法将“MyFirstApp.apk”复制到“/data/local/tmp/MyFirstApp.apk”：没有这样的文件或目录
> 
> /data/local/tmp/MyFirstApp.apk 的 rm 失败，没有这样的文件或目录

经过数小时的搜索，我还没有在其他任何地方看到此问题的报告。

如果我跑

> 亚行外壳

我可以看到 /data 目录。它看起来是空的，但权限是 drwxrwx--x，这会导致我无法看到任何内容。

因此，由于某种原因，.apk 文件似乎没有被复制到模拟器中。

另一件可疑的事情：如果我跑步

> 亚行日志猫

然后打印出一份投诉清单，包括，

> E/dalvikvm(3520): 无法打开 dex 缓存 '/data/dalvik-cache/system@framework@core.jar@classes.dex': 没有这样的文件或目录
> 
> ...
> 
> W/dalvikvm（3620）：JNI_CreateJavaVM 失败。

任何帮助将非常感激。

Android SDK 工具第 21 版

Android SDK 平台工具 Rev 16

安卓 2.2 (API 8)

SDK 平台版本 3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:35:47.377

谢谢路易斯的建议。

确实，模拟器没有正常启动。它卡在黑色的“ANDROID 死亡屏幕”中。我了解到模拟器在显示像普通 Android 手机一样的屏幕之前还没有完全启动。

目录名不是问题，我已经在使用默认的 C:/Users/... 目录，而不是 C:/Program Files。

但是，今天它起作用了。我不完全确定为什么它今天有效，而不是以前。这是我所做的：

1.  从 SDK 管理器安装最新版本的 Android SDK 工具和 Android SDK 平台工具。自从我在 2012 年 12 月第一次尝试以来，就有了一个新版本。

2.  删除目录，C:/Users/[my-username]/.android/avd

3.  （来自 Eclipse）使用内存选项和内部存储的默认值创建了一个新的 AVD。

4.  通过 Eclipse 从 Android Virtual Device Manager 启动模拟器。在 Eclipse 中打开 LogCat 视图有助于在模拟器启动时查看进度的类型输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-31T16:39:51.390

我也有同样的问题。可以试试：首先可以将apk包push到sdcard： **adb push test.apk /sdcard/**

然后，从 sdcard 安装 apk： **adb shell pm install /sdcard/test.apk**

希望能帮到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:07:48.443

该`data`目录中应该有大约 20 个目录，甚至在您安装应用程序之前。所以，如果你发现它是空的，这不是你的应用程序的问题，而是模拟器或 sdk 安装的问题。

导致奇怪行为的常见问题来自`spaces`在安装的目录名称中使用`SDK`。

尝试在 Ecipe 中选择菜单`Window`、`Prefrences`和`Android`in`SDK Location`而不是：

```
C:\Program Files (x86)\Android\android-sdk 
```

类型（在 32 位机器中）：

```
C:\Progr~1\Android\android-sdk 
```

或（在 64 位机器中）

```
C:\Progr~2\Android\android-sdk 
```

如果这不能解决您的问题，我建议重新安装 ADT 和 SDK。

问候。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-29T19:02:10.680

我今天尝试安装到模拟设备时遇到了同样的错误。结果发现没有可用空间，这就是找不到 APK 文件的原因（因为推送失败但由于某种原因 adb 不知道这一点并提供了一个信息错误）。

通过创建新的 AVD，这个问题可能会“消失”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-13T12:03:50.610

我有同样的问题。原因在于错误的 apk 文件:)。它被损坏了。

只是，试着检查一下。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-08T10:08:11.890

```
adb shell rm -rR -f /data/local/tmp 
```

接着

```
mkdir /data/local/tmp

chmod 777 /data/local/tmp 
```

尝试

```
adb install again 
```

当然，你可以选择其他权限模式

# javascript - 使用函数接受的参数与将它们分配给变量

> ID：13667651
> 
> 赞同：1
> 
> 时间：2012-12-02T08:26:50.340
> 
> 标签：javascript

有什么区别

```
(function($){
    $(document).ready(function() {

        $(this)/*... jQuery functions */

    });
})(jQuery); 
```

还有这个？

```
(function(jQuery){
    jQuery(document).ready(function() {

        var $ = jQuery;
        $(this)/*... jQuery functions */

    });
})(jQuery); 
```

我应该什么时候使用每个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T08:40:06.870

这两个示例之间的主要区别在于，一个示例的范围更广。在第一个示例中，您的重新定义的范围比第二个示例中的局部变量要高。从理论上讲，本地范围内的使用可能会稍微快一些，但这是否是有意义的差异还是取决于很多因素。

每个嵌套函数声明都有自己的一组局部变量。当 javascript 解释器去查找变量的值时`$`，它首先在最局部的范围内查找它（此时正在执行的函数的局部变量）。如果它在那里没有找到它，它会沿着链向上寻找更高范围内的其他变量。如果在下一个更高级别的范围内没有找到它，它会继续沿着链条上升。最终，它到达全局范围并在全局范围中搜索所需的符号。如果在那里找不到它，那么它是未定义的。

在您的第一个代码示例中，`$`将在这个更高的范围内找到，因为它不是正在执行的 document.ready 回调函数的直接局部变量。在您的第二个示例中，它将是一个真正的局部变量，因此可以更快地找到它。

此外，这两种情况都分配`$`给您范围内的非全局变量，以保护它不被外部代码劫持。

# php - 如何用英语搜索阿拉伯语数据

> ID：13667653
> 
> 赞同：0
> 
> 时间：2012-12-02T08:27:07.030
> 
> 标签：php, mysql, multilingual

我是 php 新手，在需要以英语或阿拉伯语存储数据的网站上工作。我成功地将阿拉伯语数据存储在 mysql 中，但问题是如何用英语搜索阿拉伯语的数据。

任何人都可以帮助我如何做到这一点，或者什么是最有效的方式和更好的方式来存储在数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T08:30:52.297

您应该使用 UTF8 编码来保持您的整个站点和数据库“多语言”。在这种情况下，搜索英语或阿拉伯语字符串基本上没有区别，因为从技术上讲，您只需查找 UTF8 字符串。UTF8 将涵盖阿拉伯语和英语

# macos - 在远程 OS X 机器上运行 MPI 作业

> ID：13667654
> 
> 赞同：2
> 
> 时间：2012-12-02T08:27:24.953
> 
> 标签：macos, osx-snow-leopard, mpi, openmpi

我已经使用 OS X 的内置程序构建了一个并行程序，`mpic++`并且我正在尝试在我的家庭网络中的两台 Mac 上运行 MPI 作业。两者都使用 Snow Leopard 10.6.8 并且可以在本地运行作业。我也可以使用`ssh`. 然而进入后

```
mpirun -n 2 --host localhost,10.0.1.2 ./enigmaMPI 
```

我被要求输入密码，然后我得到这个输出：

```
--------------------------------------------------------------------------
Failed to find or execute the following executable:

Host:       iMac.local
Executable: ./enigmaMPI

Cannot continue.
--------------------------------------------------------------------------
mpirun noticed that job rank 0 with PID 7748 on node localhost exited on signal 15 (Terminated). 
```

此消息不是很具体地帮助我找到解决方案……有人可以帮忙吗？

我使用以下命令构建了我的程序：

```
mpic++ main.cpp enigma.cpp enigma.h -o enigmaMPI 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:30:14.177

该消息尽可能地提供信息。这意味着 MPI 无法`enigmaMPI`在远程节点上的同一位置找到可执行文件。您必须确保：

*   `enigmaMPI`可以在`localhost`和 上的同一位置找到`10.0.1.2`；
*   MPI 库和运行时安装在两台机器上。

由于您运行的是 Snow Leopard，因此您很可能使用的是随附的 Open MPI 版本。那么你不必担心第二点。第一点的意思是，如果在您的本地机器`enigmaMPI`上找到`/Users/username/project/enigmaMPI`，那么您必须将其复制到另一台 Mac 上的相同路径。

这就是为什么大多数集群使用 NFS、Lustre、GPFS 等共享文件系统，并将文件系统安装在每个计算节点的相同位置。此外，正如 axiom 所指出的，设置无密码 SSH（使用公钥）可以节省您每次运行`mpirun`.

另外，据我回忆，Snow Leopard 仍然包含 Xgrid，并且提供的 Open MPI 版本有一个可以通过 Xgrid 执行进程的模块。您只需要在第二台 Mac 上启用 Xgrid 共享，然后以某种方式使用 Xgrid 启动器...

# python - Python：在回调函数中使用全局列表

> ID：13667659
> 
> 赞同：0
> 
> 时间：2012-12-02T08:28:05.517
> 
> 标签：python

这是我的回调函数，我将 rcv_buffer 设置为全局

```
def rx_callback(ok, payload):
    global n_rcvd, n_right, rcv_buffer
    n_rcvd += 1
    (pktno,) = struct.unpack('!H', payload[0:2])
    if ok:
        n_right += 1
        rcv_buffer.append((pktno, payload)) 
```

在 main() 中，我不断检查缓冲区以查看缓冲区是否为空：

```
 while 1:
        while len(rcv_buffer) > 0:
            (pktno, payload) = rcv_buffer.pop(0)
            print 'pktno = ', pktno, 'payload = ', payload[2:] 
```

但我没有做任何同步！我可以确定我对列表的操作不会崩溃吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:32:46.410

在 CPython 中，由于执行的解释性以及[Global Interpeter Lock](http://en.wikipedia.org/wiki/Global_Interpreter_Lock)（确保在任何给定时间仅执行来自单个线程的单个字节码），这是安全的。

不过，其他 Python 实现可能非常宽容……

# html - 提供多种常见文档格式的纯文本访问/迭代的库？

> ID：13667665
> 
> 赞同：0
> 
> 时间：2012-12-02T08:29:30.947
> 
> 标签：html, nlp, rtf, text-processing, doc

我有兴趣找到一个用于 NLP/文本处理目的的库，它提供了一个用于访问最常见文本格式的文本的通用接口：

*   Microsoft Word`.doc`和可能`.docx`
*   RTF
*   HTML
*   “纯文本”

我想要一些忽略文档中除文本之外的所有信息的东西，但它应该统一以下功能：

*   内联与块格式（块就像段落，但内联样式更改被忽略）
*   所有字符编码、实体等，UTF 应该是相同的（可能是 UTF-8 或 UTF-16）
*   可针对各种纯文本格式进行配置，例如用于自动换行的格式与带有硬编码换行符的格式
*   具有一次获取字符/单词/句子的方法，无论底层文档格式如何，都具有相同的语义
*   注意歧义，例如行尾的连字符、可能既是首字母缩略词的一部分又是句子结尾的句点。

如果它只支持任何两种格式并且只支持我上面的一些功能，我仍然很高兴。

谷歌搜索没有成功，但如果这样的事情不存在，我会感到惊讶。NLP 人们会用什么来处理大量真实世界的文本？任何平台/编程语言都可以，因为这很难找到。开源所以我可以贡献是最好的。

* * *

（如果这被认为是题外话并关闭，我至少会感谢其他 Stack Exchange 网站的推荐，或者在其他论坛上提出这样的问题。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:38:44.440

您可能需要两个步骤：从文件中获取内容，然后使用一些 NLP 工具包对其进行分析。第一步可以用[Apache Tika](http://tika.apache.org/)完成。对于第 2 步，最知名的替代方案可能是[Gate](http://gate.ac.uk/)、[Apache UIMA](http://uima.apache.org/)和[OpenNLP](http://opennlp.apache.org/)。请注意，可能会有一些重叠，例如 UIMA 可能已经有一个使用 Tika 的组件。

# php - PHP从字符串中提取包含特殊字符的单词

> ID：13667666
> 
> 赞同：0
> 
> 时间：2012-12-02T08:30:05.110
> 
> 标签：php, regex

我有一个字符串：

```
$str = " Côte-d'azure ! (3000) limousin - limousine  "; 
```

我需要提取一些单词并将它们放入一个数组中。最后得到：

```
array (
        0 => "Côte-d'azure",
        1 => "limousin",
        2 => "limousine"
     ); 
```

所以我尝试了：

```
preg_match_all("/[a-zA-Z]+/", $str, $all); 
```

但这忽略了特殊字符**ô** , **'** 和**-**

请任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T09:02:07.473

使用 Unicode 模式`u`和[字符属性](http://www.php.net/manual/en/regexp.reference.unicode.php)：

```
preg_match_all('/\p{L}[\p{L}\\\\\'-]+/u', mysql_real_escape_string($str), $all); 
```

这需要一个 (Unicode) 字母，然后匹配尽可能多的其他 Unicode 字母、反斜杠、连字符和撇号。如果您希望其他标点字符不分隔单词，请将其包含在字符类中。

请注意，5 个反斜杠。编译字符串时会删除三个反斜杠，因为其中两个转义了后面的反斜杠，最后一个转义了`'`. 所以正则表达式引擎只接收 2 个反斜杠。这些被正则表达式引擎解释为一个文字反斜杠。不幸的是，在使用 PHP 时，没有办法使用少于 4 个反斜杠来表示一个文字反斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T08:33:43.110

尝试

```
if (preg_match('/[^a-zA-Z0-9]+/', $your_string, $matches))
{
  echo '  symbol encountered !!';
} 
```

# visual-studio-2010 - assignment_3.exe 中 0x00428252 处的未处理异常：0xC0000005：访问冲突写入位置 0x00000004

> ID：13667668
> 
> 赞同：2
> 
> 时间：2012-12-02T08:30:13.170
> 
> 标签：visual-studio-2010, access-violation, unhandled-exception

我正在使用 VS2010，并且从“mov dword ptr [edx], eax”行中得到标题中的错误。这是一个简单的程序，它使用递归来查找阶乘并调用单独的函数阶乘来获取输入的阶乘。我正在使用输入 5 对其进行测试，并且“调用阶乘”返回 120（应该如此），但是当我尝试将其存储回输出中时，我得到了错误，我不知道为什么。

```
 push ebx
    push ecx
    push edx

    mov ebx, dword ptr[16 + esp] // input
    mov edx, dword ptr[20 + esp] // &output
    mov eax, ebx // copy ecx

    call factorial

    mov dword ptr [edx], eax
    pop edx
    pop ecx
    pop ebx

    ret 
```

阶乘：

```
 sub ebx, 1 // eax - 1
    cmp ebx, 1 // if eax equals 1 then end of recursion
    je skip
    push ebx

    call factorial
    pop ebx
    skip:
    mul ebx // multiply ebx * eax
    ret 
```

# delphi - Delphi - 按换行符拆分字符串

> ID：13667676
> 
> 赞同：4
> 
> 时间：2012-12-02T08:31:10.147
> 
> 标签：delphi, delphi-7, line-breaks, split

注意：我使用的是 Delphi 7。

有没有办法通过换行符分割字符串？

我想要以下内容：

```
procedure Split
   (const Delimiter: Char;
    Input: string;
    const Strings: TStrings) ;
begin
   Assert(Assigned(Strings)) ;
   Strings.Clear;
   Strings.Delimiter := Delimiter;
   Strings.DelimitedText := Input;
end;

var
  xMSG:String;
  xStr:String;
  xStrList:TStrings;
  xLineBreak:String;
  xHello:String;
  xWorld:String;
begin
  xLineBreak := AnsiString(#13#10);
  xMSG := 'Hello ' + xLineBreak + 'World';
  xStrList := TStringList.Create;
  Split(xLineBreak,AnsiString(xMSG),xStrList);
  xHello := xStrList[0];
  xWorld := xStrList[1];
  MessageBox(0,PAnsiChar(xHello + xWorld),'Test',0);
end. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T02:15:25.067

是的，这就是`Text`物业所做的。引用帮助（文本属性（TStrings））：

> 将 TStrings 对象中的字符串列为单个字符串，各个字符串由回车符和换行符分隔。

由于它是单排，因此您不需要额外的实用程序。

```
var
  xMSG:String;
//  xStr:String;
  xStrList:TStrings;
//  xLineBreak:String;
  xHello:String;
  xWorld:String;
begin
//  xLineBreak := AnsiString(#13#10);     // you don't need this, there's sLineBreak
  xMSG := 'Hello ' + sLineBreak + 'World';
  xStrList := TStringList.Create;

//  Split(xLineBreak,AnsiString(xMSG),xStrList);  
  xStrList.Text := xMSG;  // <--

  xHello := xStrList[0];
  xWorld := xStrList[1];
  xStrList.Free;
  MessageBox(0,PAnsiChar(xHello + xWorld),'Test',0);
end; 
```

# ruby-on-rails - en.yml 更改未生效

> ID：13667677
> 
> 赞同：0
> 
> 时间：2012-12-02T08:31:16.780
> 
> 标签：ruby-on-rails, ruby-on-rails-3, syntax, yaml

我对 en.yml 进行了一些更改，但它仍然显示我之前制作的旧错误消息。

```
en:  
  activerecord:
    models: 
      packjob: 
    attributes:
        pj_packer: 
    errors:
      models:
        packjob:
          attributes:
            pj_packer:
            blank: "A packer must be selected" 
```

我已经回收了 rails 服务器，它仍然显示旧的错误消息：

```
Pj packer can't be blank 
```

为什么仍然选择旧的错误消息而不是新的错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T09:41:35.703

您缺少`blank`.

# c# - 从 textbox1 获取文本并以其他形式将其设置在 textblock1 上

> ID：13667679
> 
> 赞同：0
> 
> 时间：2012-12-02T08:31:30.337
> 
> 标签：c#, windows-8, windows-runtime

我想从form1上的textbox1获取输入并将其设置在form2的textblock1上，但文本不会显示

表格1代码：

```
 private void Button_Click_3(object sender, RoutedEventArgs e)
    {
        var file = await ApplicationData.Current.LocalFolder.GetFileAsync(textbox1.Text + ".txt");
        var line = await FileIO.ReadLinesAsync(file);
        if (textbox1.Text == line[0] && tb2.Password == line[1])
           {
               textbox1.Text = line[0];
               Frame.Navigate(typeof(form2));                    
           }
    }

    public string MyValue
    {
        get { return textbox1.Text; }
    } 
```

form2上的代码

```
 var logged = new MainPage();
    textblock1.Text = logged.MyValue; 
```

有什么帮助吗？感谢：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T09:55:01.753

试试form1

```
 Frame.Navigate(typeof(form2), textbox1.Text); 
```

表格2

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    string name = e.Parameter as string;

    if (!string.IsNullOrWhiteSpace(name))
    {
          textblock1.Text = name ;
    }
    else
    {
        textblock1.Text = "Name is required.  Go back and enter a name.";
    }
} 
```

这个[链接](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh771188.aspx)可能有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T09:36:56.727

您没有获得所需的值，`form2`因为您正在创建一个新实例，`MainPage`该实例当然不包含您刚刚从中导航的实例的值。

您需要将该值作为参数传递给`form2`. 为此，您可以使用不同的重载，`Navigate`其中需要一个附加参数：

```
private void Button_Click_3(object sender, RoutedEventArgs e)
{
    var file = await ApplicationData.Current.LocalFolder.GetFileAsync(textbox1.Text + ".txt");
    var line = await FileIO.ReadLinesAsync(file);
    if (textbox1.Text == line[0] && tb2.Password == line[1])
    {
        textbox1.Text = line[0];
        Frame.Navigate(typeof(form2), textbox1.Text);                    
    }
} 
```

# javascript - 使用玉时，我遇到错误：“查找视图失败”

> ID：13667684
> 
> 赞同：1
> 
> 时间：2012-12-02T08:32:10.493
> 
> 标签：javascript, node.js

我很喜欢编写 node.js 程序。

这是我的 app.js 文件：

```
var express = require('express');
var app = express();

app.configure(function(){
    app.set('view engine', 'jade');
});

app.get('/index/:name',function(req, res){
    res.render('index', {
        title: req.params.name
    });
});

app.listen(8080); 
```

这是我的 index.jade

```
!!! 5
html
  head
    title= title 
```

当我从网络浏览器运行 call localhost:8080/index/example 时，我收到以下错误：

```
Error: Failed to lookup view "index.jade"
    at Function.render (/home/yusuf/MasaÃ¼stÃ¼/node/node_modules/express/lib/application.js:489:17)
    at ServerResponse.render (/home/yusuf/MasaÃ¼stÃ¼/node/node_modules/express/lib/response.js:716:7)
    at /home/yusuf/MasaÃ¼stÃ¼/node/app.js:9:6
    at callbacks (/home/yusuf/MasaÃ¼stÃ¼/node/node_modules/express/lib/router/index.js:160:37)
    at param (/home/yusuf/MasaÃ¼stÃ¼/node/node_modules/express/lib/router/index.js:134:11)
    at param (/home/yusuf/MasaÃ¼stÃ¼/node/node_modules/express/lib/router/index.js:131:11)
    at pass (/home/yusuf/MasaÃ¼stÃ¼/node/node_modules/express/lib/router/index.js:141:5)
    at Router._dispatch (/home/yusuf/MasaÃ¼stÃ¼/node/node_modules/express/lib/router/index.js:169:4)
    at Object.router [as handle] (/home/yusuf/MasaÃ¼stÃ¼/node/node_modules/express/lib/router/index.js:32:10)
    at next (/home/yusuf/MasaÃ¼stÃ¼/node/node_modules/express/node_modules/connect/lib/proto.js:190:15) 
```

问题是什么？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-02T19:46:02.013

您需要设置您的意见文件夹

```
app.configure(function(){
    app.set("view engine", "jade");
    app.set("views", __dirname + "/public");
}); 
```

如果这不起作用，请尝试

```
app.set('view engine', 'jade'); 
```

# cublas - cublas 内核函数会自动与主机同步吗？

> ID：13667685
> 
> 赞同：6
> 
> 时间：2012-12-02T08:32:28.647
> 
> 标签：cublas

只是关于cublas的一般问题。对于单线程，如果没有从 GPU 到 CPU 的内存传输（例如 cublasGetVector），那么 cublas 内核函数（例如 cublasDgemm）会自动与主机同步吗？

```
 cublasDgemm();
//cublasGetVector();
    host_functions() 
```

此外，在两个相邻的内核调用之间呢？

```
cublasDgemm();
cublasDgemm(); 
```

并且，不涉及先前内核中使用的全局内存的同步传输呢？

```
cublasDgemm(...gA...gB...gC);
cublasGetVector(...gD...D...); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T12:02:43.173

不，CUBLAS API 是异步的，除了一些返回标量值的 1 级例程。

3 级例程如`cublasDgemm`不阻塞主机，您需要调用阻塞 API 例程，如同步内存传输或显式主机-GPU 同步调用，以确保 CUBLAS 调用已完成。

# c# - 在服务器端，如何使用命名管道判断接收到的数据是客户端的 textbox1 还是 textbox2？

> ID：13667686
> 
> 赞同：1
> 
> 时间：2012-12-02T08:32:36.057
> 
> 标签：c#, .net, wpf, named-pipes

我正在开发 c# wpf 应用程序。我使用命名管道创建了一个示例客户端和服务器。在客户端应用程序上，我创建了两个文本框：textbox1 和 textbox2。我还在服务器端应用程序上创建了与 textbox1 和 textbox2 相同的两个文本框。我想将数据从客户端文本框发送到服务器端文本框，就像复制一样。但是我很困惑我如何识别从客户端接收到的数据是 textbox1 还是 textbox2？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T08:42:54.610

您可以创建 2 个命名管道，每个文本框一个。但这可能是矫枉过正。

另一种选择是为您通过管道发送的数据添加某种前缀，这将帮助您了解它在另一端的来源。例如，您可以在每个数据前面加上文本框的编号，用竖线“|”分隔它 然后是其余的数据。

因此，来自 TextBox1 的“Hello World”将如下所示：

```
1|Hello World 
```

其中一个来自 TextBox2 将如下所示：

```
2|Hello World 
```

# c++ - Google 如何为其 3D 地图绘制街道标签？

> ID：13667688
> 
> 赞同：0
> 
> 时间：2012-12-02T08:32:53.360
> 
> 标签：c++, google-maps

我正在开发一个以 3d 绘制街道地图的移动应用程序。我遇到的问题之一是尝试绘制没有任何重叠的街道标签。我可以让文本沿路径轮廓化，但它们有很多重叠的地方：

![在此处输入图像描述](../Images/f770985df90328d9a46abb01ecd93464.png)

谷歌在绘制没有任何交叉或重叠的街道标签方面做得非常好。适用于 Android 的移动 Google 地图应用程序中的 3d 视图特别擅长展示这一点。

我能想到的唯一想法是进行碰撞检测（在靠近标签之间的每个字母上都有边界球）。这在 3d 中相当昂贵，尤其是同时在屏幕上显示许多标签。

我一直在寻找一些关于谷歌如何进行街道标签放置的见解，或者我可以尝试的其他想法，这些想法比暴力碰撞检测更便宜。Google Maps 应用程序会在您缩放和平移显示时实时更新标签位置，因此无论他们使用什么方法都非常高效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:37:55.960

我会说你有点过于复杂了。与其试图逐个字母地碰撞，不如将其简化为一连串的线条。以直线方式书写的名称可以用一条直线表示。弯曲道路内的一些文字最多可以使用 2-3 行来近似。毕竟它不必是像素精确的。

您还可以构建与当前街道“碰撞”的其他街道的集合（也可以作为桥梁等位置），然后确保您的名称不会重叠或靠近这些位置。

# python - 将 PyMongo 添加到 Python IDE

> ID：13667690
> 
> 赞同：0
> 
> 时间：2012-12-02T08:33:00.150
> 
> 标签：python, ide, pymongo

我是一个 python 新手 - 我想使用 pymongo 库通过一些方便的 IDE 访问 mongoDb，在浏览了网页后我决定使用 WING。

有人可以指出如何将 pymongo 库添加到 WING ide（或任何其他 IDE）吗？我想获得命令的自动完成。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T12:27:32.083

那么你可以考虑使用 Sublime 文本。你可以直接从你的编辑器运行你的 python 程序。它具有自动完成功能（建议列出您可能要输入的内容）。尽管它不会像在 Netbeans 或 eclipse 中那样建议函数名称。但它仍然是许多人使用的非常优雅的编辑器。您也可以按照链接中的建议[安装 pymongo](http://api.mongodb.org/python/current/installation.html)。如果您没有 pip，请[按照以下步骤操作](http://www.pip-installer.org/en/latest/installing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-03T17:06:26.340

如果您在 windows 平台上，只需安装 pymongo.exe 文件，它将安装在 python 目录中。然后，您将能够通过键入以下内容在任何 IDE（例如 PyCharm）中访问它：

导入pymongo

# java - 在构造函数之外将元素添加到数组

> ID：13667693
> 
> 赞同：0
> 
> 时间：2012-12-02T08:33:34.047
> 
> 标签：java, arrays, listview

我想获取数组中的所有值并将它们存储到列表视图中，而不是通过单一调用存储。以下是我的代码，有人可以帮我修复吗？是否有一个变量可以表示数组的所有内容

这是我的代码：

```
String[] TKA = new String[100];

    JTable table;  
    Object tableData[][]={  
            {TKA[1],TKA[2],TKA[3],TKA[4],TKA[5]},
            {TKA[6],TKA[7],TKA[8],TKA[9],TKA[10]},
            {TKA[11],TKA[12],TKA[13],TKA[14],TKA[15]},
            {TKA[16],TKA[17],TKA[18],TKA[19],TKA[20]},
            {TKA[21],TKA[22],TKA[23],TKA[24],TKA[25]},
            {TKA[26],TKA[27],TKA[28],TKA[29],TKA[30]},
            {TKA[31],TKA[32],TKA[33],TKA[34],TKA[35]},
            {TKA[36],TKA[37],TKA[38],TKA[39],TKA[40]},
            {TKA[41],TKA[42],TKA[43],TKA[44],TKA[45]},
            {TKA[46],TKA[47],TKA[48],TKA[49],TKA[50]},
            {TKA[51],TKA[52],TKA[53],TKA[54],TKA[55]},
            {TKA[56],TKA[57],TKA[58],TKA[59],TKA[60]},
            {TKA[61],TKA[62],TKA[63],TKA[64],TKA[65]},
            {TKA[66],TKA[67],TKA[68],TKA[69],TKA[70]},
            {TKA[71],TKA[72],TKA[73],TKA[74],TKA[75]},
            {TKA[76],TKA[77],TKA[78],TKA[79],TKA[80]},
            {TKA[81],TKA[82],TKA[83],TKA[84],TKA[85]},
            {TKA[86],TKA[87],TKA[88],TKA[89],TKA[90]},
            {TKA[91],TKA[92],TKA[93],TKA[94],TKA[95]},
            {TKA[96],TKA[97],TKA[98],TKA[99],TKA[100]},             
    };  
    String[] columnTitle = { "AA","BB","CC","DD","EE" }; 

        table = new JTable(tableData , columnTitle);
        JScrollPane jt = new JScrollPane(table);
        add(jt);
        jt.setBounds(10, 200, 700, 500); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T09:02:57.200

创建一个新`TableModel`的，定义您希望表格如何显示。

**应用**

```
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;

    public class StackExample {

        public static void main(String[] args) {

            MyTableModel model = new MyTableModel("This is some string that I want to show");

            // Create a JTable and tell it to display our model
            JTable table = new JTable(model);

            // Display it all in a scrolling window and make the window appear
            JFrame frame = new JFrame("FileTableDemo");
            frame.getContentPane().add(new JScrollPane(table), "Center");
            frame.setSize(600, 400);
            frame.setVisible(true);
        }
    } 
```

**表模型**

```
import javax.swing.table.AbstractTableModel;

public class MyTableModel extends AbstractTableModel {

    private static final long serialVersionUID = 1L;
    private String data;
    String[] columnTitle = { "AA","BB","CC","DD","EE" }; 

    public MyTableModel(String data) {
        this.data = data;
    }

    @Override
    public int getRowCount() {
        return data.length() / 5;
    }

    @Override
    public int getColumnCount() {
        return 5;
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        return data.charAt((rowIndex * 5) + columnIndex);
    }

    @Override
    public String getColumnName(int column) {
        return columnTitle[column];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T08:43:41.623

改为使用集合，然后转换为`String[][]`：

```
ArrayList<String[]> temp = new ArrayList<String[]>();

int i = 0;
String innerArray;
while( i < TKA.length){
    innerArray = new String[5];
    for(int j = 0 ; j < innerArray.length ; j++){
        innerArray[j] = TKA[i];
        i++;
    }

    temp.add(innerArray);
}

String[][] result = temp.toArray(new String[0][0]); 
```

# symfony - 如何使用 Doctrine 2 重置实体

> ID：13667700
> 
> 赞同：0
> 
> 时间：2012-12-02T08:34:44.197
> 
> 标签：symfony, doctrine

我想从数据库中获取旧实体以更改保存历史记录。

现在我有一个代码：

```
// Old version 1!
$app = $appManager->findByAppleId(547409501);
$app->setVersion('1.1');
$oldApp = $appManager->findByAppleId(547409501);
print $app->getVersion() . '<br />' . $oldApp->getVersion(); 
```

但是应用程序和旧应用程序都有 1.1 版本。在 DB 应用程序中有版本 1

附言

->findByAppleId - 获取存储库并使用“查找”功能（Apple ID 是主键）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:18:57.430

如果必须更改字段，可以使用：

[http://docs.doctrine-project.org/en/latest/reference/events.html#preupdate](http://docs.doctrine-project.org/en/latest/reference/events.html#preupdate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T09:28:22.210

这个问题解决方法：

1.  从理论核心中的实体管理器获取 unitOfWork
2.  通过主键获取对象哈希
3.  删除此实体散列

代码：

```
/**
 * @{inerhitDoc}
 */
public function clearAppHashInUnitOfWork($appleId)
{
 // Get unit of work (Doctrine::EntityManager)
 $uow = $this->container
     ->get('doctrine')
     ->getEntityManager()
     ->getUnitOfWork();

 // Get app hash by ID
 $appHash = $uow
     ->tryGetByIdHash(
       $appleId,
       $this->container->getParameter('app.app_class')
     );

 // Hash already exists
 if ($appHash) {
   $uow
       ->removeFromIdentityMap($appHash);
 }
} 
```

# emacs - 如何强制emacs更新框架标题？

> ID：13667702
> 
> 赞同：5
> 
> 时间：2012-12-02T08:35:30.583
> 
> 标签：emacs, elisp

我自定义变量`frame-title-format`来更改框架标题。然而，Emacs 只在他/她想要的时候更新框架标题。我可以强制 Emacs 更新（即刷新）标题，比如说，在评估一些自定义函数之后？这是框架标题格式：

```
(setq frame-title-format "%b  %*  %n") 
```

我希望`%n`（缩小时显示）在缩小缓冲区后立即生效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-20T13:15:56.907

根据[https://www.gnu.org/software/emacs/manual/html_node/elisp/Mode-Line-Basics.html](https://www.gnu.org/software/emacs/manual/html_node/elisp/Mode-Line-Basics.html)

```
(force-mode-line-update) 
```

还强制更新菜单栏和框架标题。

`(force-mode-line-update)`我可以确认，当我第一次修改缓冲区并提供帮助时，包含“%*”的框架标题不会立即更新。[fedora 23 linux 上的 emacs 24.5.1]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T08:57:55.017

elisp 中强制重新显示的一种方法是使用`(sit-for 0)`. 您可以定义自己的函数，如下所示：

```
(defun my-narrow-to-region (start end)
  (interactive "r")
  (narrow-to-region start end)
  (sit-for 0)) 
```

**注意**：我无法验证这是否解决了您的问题，因为我使用的是 Mac OS X，即使没有这个，框架标题也会正确更新。

**更新**：在这个答案的早期版本中，我建议使用`defadvice`. 我意识到这不是一个好主意，因为它会影响该功能的*所有*用途，因为它会产生不必要的副作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T11:19:03.607

我认为 Emacs 不更新的原因可能是下面这个。（`C-h v`框架标题格式）

`It is used only on frames for which no explicit name has been set`.

我第一次设置它，它的工作原理。然后我用`modify-frame-parameters`设置另一个名字。这没用。我使用`modify-frame-parameters`标签框架，效果很好。

您可以使用`modify-frame-parameters`来设置标题。

```
(modify-frame-parameters nil
           (list (cons 'name string-name))) 
```

但我无法弄清楚如何根据参数设置名称，例如`frame-title-format`.

# javascript - 从 MongoDB 向 JS 传递变量

> ID：13667709
> 
> 赞同：0
> 
> 时间：2012-12-02T08:36:36.370
> 
> 标签：javascript, mongodb, pymongo

我想知道是否可以将变量从 MongoDB 传递到 JavaScript。我有一个任务，我想创建一组以下形式的集合：coll + X，其中 x 是数字（键），它将从 Mongo 传递。下面的片段显示了我想要实现的目标。

```
reduceInit = Code(
    "function(KEY, values) {"
        "var name = 'coll' + KEY;"
        "db.name.insert({a : 1});"
    "return {something: []};"
    "}"
) 
```

我见过 db.eval 函数，但我不知道在这种情况下如何使用它。

**编辑**：

```
"var word = key;"
"db.coll[word].insert({something : 1});" 
```

所以我发现我可以使用上面两行代码创建集合。问题是，这会产生表单的名称：**coll.X**现在的问题是，如何去掉名称中的点。

我提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:12:01.753

在python中，它很简单：

```
db['coll' +  str(key)].insert({'something': 1}) 
```

但是您确定要使用所有这些系列吗？`key`将单个集合用作索引字段会容易得多。

# php - 缩略图图像未显示在 ebay 沙箱中

> ID：13667713
> 
> 赞同：0
> 
> 时间：2012-12-02T08:37:28.367
> 
> 标签：php, ebay-api

我将图片详细信息放在请求 xml 中，同时使用这种格式的 Trading API 的 additem 调用在 ebay 中添加产品

```
<PictureDetails>
<PictureURL>http://www.mysite.com/images/11.jpg</PictureURL>
</PictureDetails> 
```

列出产品时不显示缩略图，但图像显示在产品详细信息页面中。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:19:01.447

ebay 沙盒不支持 ebay 论坛中提到的缩略图/图库图像：[https ://ebay.custhelp.com/app/answers/detail/a_id/231/~/gallery-images-in-the-sandbox](https://ebay.custhelp.com/app/answers/detail/a_id/231/~/gallery-images-in-the-sandbox)

# c# - 比较数组中的每个数字，每组 6 个

> ID：13667714
> 
> 赞同：4
> 
> 时间：2012-12-02T08:37:31.813
> 
> 标签：c#

大家好，我正在做一点自学，我遇到的问题似乎暂时难住了我，我认为这里有人我确定过去已经遇到过类似的事情。我有一个 1-10 的数组列表

```
public List<int> ValueArrays = new List<int> { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 }; 
```

我试图得到每个 6 组的总和，但我只是卡住了。例如我想要

```
[1,2,3,4,5,6]
[1,3,4,5,6,7]
[1,4,5,6,7,8] etc... 
```

我已经写了一些代码，但我只是在这里磕磕绊绊。

```
private void runbtn_Click(object sender, EventArgs e)
        {
            int thisTotal;
            //Object ListOfNumbersToCompareTo = new Object[];
            List<int> fiveEl = new List<int> { }; //= ValueArrays.GetRange(1, 5);//target a group of 5
            List<int> test2 = new List<int> { };
            //test2.AddRange(fiveEl);

            //thisTotal = SumRange(fiveEl);
             int groupSize = 5;

            for (int i = 0; i < ValueArrays.Count; i++)
            {

                fiveEl=ValueArrays.GetRange(i+1, 5);
                currentNum = ValueArrays[i];
                fiveEl.Add(currentNum);

                for (int x = 0; x < 1; x++)
                {
                    thisTotal = SumRange(fiveEl);

                    //fiveEl = ValueArrays.GetRange(x, groupSize);
                    //fiveEl.Add(currentNum);
                    //fiveEl.RemoveRange(x, groupSize); ;
                }

            }
} 
```

有人可以给我一个代码片段或指出我正确的方向吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T09:08:10.857

这是一个带有“硬编码”事实的快速 n 肮脏解决方案，您可以选择六人一组。对于通用解决方案，您需要递归并生成所有组合（您可以从[Algorithm 开始从 n 返回 k 元素的所有组合](https://stackoverflow.com/questions/127704/algorithm-to-return-all-combinations-of-k-elements-from-n)）

```
var numbersList = new[] { 1, 2, 3, 4, 5, 6 ,7,8,9,10};

        var groupsBySix = from i1 in numbersList
                        from i2 in numbersList.Where( i => i>i1)
                        from i3 in numbersList.Where(i => i > i2)
                        from i4 in numbersList.Where(i => i > i3)
                        from i5 in numbersList.Where(i => i > i4)
                        from i6 in numbersList.Where(i => i > i5)
                        select new []{ i1, i2, i3, i4, i5, i6 };

        var cachedGroups = groupsBySix.ToList();  // 210 groups of int arrays. Starts with [1..6] and ends with [5..10]
        var sums = groupsBySix.Select(list => list.Sum()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T09:25:46.457

我个人会这样写：

```
var values = new List<int> { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
var groupsOfSix = values.Subsequences().Where(s => s.Count() == 6); 
```

然后当然你可以`.Sum()`在每个生成的子序列上使用。

这使用了我前段时间写的一个扩展方法，它生成一个`IEnumerable<T>`. 这个解决方案不是最快的，但是天哪，它使代码易于阅读并且明显正确，并且在只有 10 个元素的输入列表中，它的速度已经足够快了。

这是`Subsequences`功能：

```
/// <summary>
/// Returns all subsequences of the input <see cref="IEnumerable&lt;T&gt;"/>.
/// </summary>
/// <param name="source">The sequence of items to generate subsequences of.</param>
/// <returns>A collection containing all subsequences of the input <see cref="IEnumerable&lt;T&gt;"/>.</returns>
public static IEnumerable<IEnumerable<T>> Subsequences<T>(this IEnumerable<T> source)
{
    if (source == null)
        throw new ArgumentNullException("source");
    // Ensure that the source IEnumerable is evaluated only once
    return subsequences(source.ToArray());
}

private static IEnumerable<IEnumerable<T>> subsequences<T>(IEnumerable<T> source)
{
    if (source.Any())
    {
        foreach (var comb in subsequences(source.Skip(1)))
        {
            yield return comb;
            yield return source.Take(1).Concat(comb);
        }
    }
    else
    {
        yield return Enumerable.Empty<T>();
    }
} 
```

# design-patterns - 富客户端数据处理和缓存模式

> ID：13667715
> 
> 赞同：0
> 
> 时间：2012-12-02T08:37:38.243
> 
> 标签：design-patterns, caching, mvvm, prism

我正在使用 WPF-PRISM-MVVM 开发一个富客户端应用程序。
客户端与提供 CRUD 功能的存储库服务交互，并通过 WCF 通道发布域实体的任何更改。
客户端处理域实体缓存以提高性能并提供离线功能。
为此，我编写了一个存储库代理服务，它位于客户端并包装存储库服务并处理缓存和更改传播到对域实体更改感兴趣的相关客户端组件。

经过长时间的介绍，我的问题是这样做的吗？
是否有任何我应该注意的客户端数据处理和缓存模式？

干杯，
多伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:25:50.870

我们使用[PostSharp](http://www.sharpcrafters.com/)形式的[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)进行客户端缓存，我们只需向方法添加一个属性，然后中提琴它就被缓存了：

我们的方面看起来像这样——它将实际的缓存实现推迟到一个实例，`ICacheService`但你明白了。

```
[Serializable]
[MulticastAttributeUsage(MulticastTargets.Method, PersistMetaData = true)]
public class MethodCacheAttribute : MethodInterceptionAspect
{

    public const int DefaultCacheSeconds = 600;
    private ICacheService CacheService { get; set; }
    private string methodName;

    [IntroduceMember(Visibility = PostSharp.Reflection.Visibility.Family, OverrideAction = MemberOverrideAction.Ignore, IsVirtual = true)]
    public double CacheForSeconds { get; set; }

    public MethodCacheAttribute() : this(DefaultCacheSeconds ) { }
    public MethodCacheAttribute(int seconds)
    {
        this.CacheForSeconds = seconds;
    }

    public override void CompileTimeInitialize(MethodBase method, AspectInfo aspectInfo)
    {
        this.methodName = method.Name;
    }

    public sealed override void OnInvoke(MethodInterceptionArgs args)
    {
        var key = this.BuildCacheKey(args.Arguments,args.Method);

        var item = ServiceLocator.Current.GetInstance<ICacheService>().Cache<object>(key, () =>
            {
                return args.Invoke(args.Arguments);
            },CacheForSeconds ==0 ? TimeSpan.MaxValue :  TimeSpan.FromSeconds(CacheForSeconds));
            args.ReturnValue = item;
    }

    private string BuildCacheKey(Arguments arguments, MethodBase method)
    {
        var sb = new StringBuilder();
        sb.Append(this.methodName);

        foreach (var argument in arguments.ToArray())
        {
            sb.Append(argument == null ? "_" : argument.GetHashCode().ToString());
        }

        if (method.IsGenericMethod)
        {
            var genericArgs = String.Join("-", method.GetGenericArguments().Select(t => t.Name));
            sb.Append(genericArgs);
        }

        return sb.ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:00:21.277

[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)的一个相当经典的应用是添加缓存功能。您基本上将实际组件实现与另一个缓存某些类型的请求的组件实现包装，从而提高性能。这是 IMO 一种简单且非常优雅的方法。

```
 Component myComponent = new ScientificCalculator();
  Component myDecorator = new ComponentDecorator(myComponent);
  // expensive
  double result = myComponent.doExpensiveComputation();

  // use the Decorator and cache the first time
  result = myDecorator.doExpensiveComputation();
  // and now is cheap
  result = myDecorator.doExpensiveComputation(); 
```

# c++ - GL_INVALID_ENUM 在上下文初始化之后

> ID：13667718
> 
> 赞同：3
> 
> 时间：2012-12-02T08:38:27.510
> 
> 标签：c++, opengl

在 glew init 完成后和调用任何其他 gl 命令之前调用 glGetError 时，我得到 GL_INVALID_ENUM 代码。我正在设置 OpenGL 4.2 CORE，向前兼容。将 GLFW 用于窗口/输入，将 GLEW 用于 gl 上下文，所有这些都在 Windows 7 上运行64位。我的显卡是GeForce 550GT，它具有最新的OpenGL 4.2驱动程序。另一个奇怪的事情是我使用的glDrawElements（）运行良好。但后来我尝试了glDrawArrays（），我需要它来完成一些特定的任务，它根本没用。我再次检查了所有 gl 语法、缓冲区创建着色器等。没有。调用 glDrawArrays() 时我确实得到 GL_INVALID_OPERATION，但我不知道为什么。所有这些工作都是一个迷你渲染引擎，但目前是管道真的很简单，所以我不明白可能是什么问题。这是我初始化上下文和窗口的方式：

```
 void Engine::InitWithGLFW(){

    if(!glfwInit()){
        exit(EXIT_FAILURE);
    }
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 4);
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 2);
    glfwOpenWindowHint(GLFW_OPENGL_FORWARD_COMPAT,GL_TRUE);
    glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);
    glfwOpenWindowHint(GLFW_FSAA_SAMPLES,0);
    glfwDisable( GLFW_AUTO_POLL_EVENTS );

 #ifdef DEBUG
    glfwOpenWindowHint(GLFW_OPENGL_DEBUG_CONTEXT, GL_TRUE);
 #endif

    if(!glfwOpenWindow(_width,_height,8, 8, 8, 8, 24, 8,GLFW_WINDOW)){
        glfwTerminate();
        exit(EXIT_FAILURE);
    }

    glfwSetWindowTitle("XDEngine V-1.0");
    InitGlew();

}

void  Engine::InitGlew(){
    glewExperimental=GL_TRUE;
    GLenum err = glewInit(); 

    if (GLEW_OK != err)
    {
        /* Problem: glewInit failed, something is seriously wrong. */
        fprintf(stderr, "Error: %s\n", glewGetErrorString(err));

    }

    fprintf(stdout, "Status: Using GLEW %s\n", glewGetString(GLEW_VERSION));

    glEnable(GL_MULTISAMPLE);
    glEnable (GL_BLEND);
    glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

    glEnable(GL_DEPTH_TEST);
    glDepthMask(true);
    glDepthFunc(GL_LEQUAL);
    glDepthRange(0.0f, 1.0f);
    glEnable(GL_DEPTH_CLAMP);
    glEnable(GL_CULL_FACE);
    glCullFace(GL_BACK);

    glfwSetWindowSizeCallback(Reshape);
} 
```

这是 glDrawArrays() 的渲染循环：

```
 void Draw(){
            _material->Draw();///activate shader program
            glBindBuffer(GL_ARRAY_BUFFER, vbo);
    glEnableVertexAttribArray(0);
    glVertexAttribPointer(0, 4, GL_FLOAT, GL_FALSE, 0, 0);

    glDrawArrays(GL_TRIANGLES, 0, 3);

    glDisableVertexAttribArray(0);

    glBindBuffer(GL_ARRAY_BUFFER, 0);
            _material->PostDraw();  //deactivate shader program

   } 
```

正如我所说，所有缓冲区和着色器程序都已初始化好。更新：好的，我找到[了第一个问题的答案](https://stackoverflow.com/questions/10857335/opengl-glgeterror-returns-invalid-enum-after-call-to-glewinit?rq=1)：

似乎 GL_INVALID_ENUM 可能发生在 GlewInit 之后，它不应该破坏渲染。所以我剩下第二个问题......

## 更新1：

我在使用 VBO 调用 glDrawArrays() 时找到了 GL_INVALID_ENUM 的解决方法。如果我将 VBO 打包到 VAO 中，错误就会消失，并且我可以进行渲染。这是否意味着在前向兼容的核心配置文件中我们不能直接使用 VBO 进行绘制？从不在官方文档中看到与它相关的任何内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T16:32:08.877

顶点数组对象在核心配置文件[中不是可选的。](http://www.opengl.org/wiki/Vertex_Rendering#Causes_of_rendering_failure)错误可能来自`GL_INVALID_ENUM`其他地方；你应该得到`GL_INVALID_OPERATION`. 请记住：OpenGL 错误是缓冲的，因此您必须不断获取 GL 错误，直到您返回`GL_NO_ERROR`.

> glfwOpenWindowHint(GLFW_OPENGL_FORWARD_COMPAT,GL_TRUE);

请停止这样做。前向兼容性在核心配置文件中[几乎没有意义](http://www.opengl.org/wiki/Core_And_Compatibility_in_Contexts#Forward_compatibility)。

# node.js - Mongoose - 使用单个集合的多个模式

> ID：13667719
> 
> 赞同：5
> 
> 时间：2012-12-02T08:38:45.637
> 
> 标签：node.js, mongodb, schema, mongoose

我正在尝试计划我的 api，例如：

```
/animals           // returns all animals
/animals/dogs      // returns all dogs
/animals/cats      // returns all cats
/animals/dogs/:id  // returns dog 
```

所以，我对“猫”和“狗”都有单独的模型，因为它们将包含独特的属性，但是两者都使用“动物”模式作为基本插件。

所以我的问题是关于在哪里存储数据，我的选择是：

1) 单一集合 - 将猫和狗都存储在一个集合中，这将使通过单一查询获取“/动物”的数据相对容易

2) 多个集合 - 将猫和狗都存储在单独的集合中，这将使数据存储更加合乎逻辑，但是当获取“/animals”的数据时将需要多次查询和连接该数据。

有没有我错过的其他选择或首选方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T09:53:34.510

您提到的选项是最适合您的问题的方法。

对于您的特定情况，如果每个模型的独特属性不是那么大**，则使用方式 1**将所有数据存储在单个集合中并轻松查询。

否则，如果您的模型有点重并且有很多属性将它们分成不同的集合并通过它们各自的模型查询它们。这似乎需要做更多的工作，但至少会给您更多的抽象和灵活性来操作重模型。**意思是选择选项 2**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T08:58:10.423

mongodb 的优点在于它是无模式的。听起来这正是您所需要的。我会考虑只使用普通的[node-mongodb-native](https://github.com/mongodb/node-mongodb-native)，并将所有动物存储在一个集合中。

# javascript - 基本的 javascript while 循环语法

> ID：13667720
> 
> 赞同：0
> 
> 时间：2012-12-02T08:39:09.197
> 
> 标签：javascript, syntax, while-loop

我正在使用while循环在javascript中编写一个函数，与下面列出的非常相似。

```
{
    var x="",i=0;
    while (i<5)
    {
        x=x + "The number is " + i + "<br>";
        i++;
    }
    document.getElementById("demo").innerHTML=x;
} 
```

现在在这段代码中， document.getElementById("demo").innerHTML=x; 尽管在 while 循环括号之外，代码仍会执行，并且下一组括号之外的代码会产生语法错误，因为它不属于任何函数。

在函数中的 while 循环之后如何执行单个命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-10-12T17:10:19.887

该行 `document.getElementById("demo").innerHTML=x;`执行一次。它正确显示了所有迭代，因为您将所有迭代都添加到`x`每个循环中。

# c# - 使用 C# 代码在 ASP.NET GridView 中选择一行

> ID：13667721
> 
> 赞同：1
> 
> 时间：2012-12-02T08:39:10.287
> 
> 标签：c#, asp.net, gridview, selectedvalue

我希望在 ASP.NET`GridView`中使用指定的值来选择`SelectedValue`.

`DataKeyNames`in`GridView`是`SN`，我有这样的东西： mySN = 5 ;

我想用代码找到`GridView`它的值等于行的行。`mySN``C#`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:41:27.217

尝试这个：-

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False"    
 DataKeyNames="id" onselectedindexchanged="GridView1_SelectedIndexChanged"> 
```

后面的代码：-

```
 protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
 {
int index = Convert.ToInt16(GridView1.SelectedDataKey.Value);

} 
```

# c# - 单击超链接后如何将值获取到页面打开的页面

> ID：13667723
> 
> 赞同：1
> 
> 时间：2012-12-02T08:39:24.673
> 
> 标签：c#, asp.net, c#-4.0

我有两个页面，其中我在一个页面中使用了 GridView。在 GridView 中，我使用超链接在单击后打开第二页。我正在传递要在第二页中使用的超链接中的值。

这是我的代码

```
<asp:HyperLink runat="server" ID="HyperLink1" 
     NavigateUrl='<%# "db_PmuKpi_OBPI_AllPMs.aspx?PMRMId="+ Eval("PMRMID") + "&sRM =" + 
                  Eval("PMRMName")%>' Text='<%# Eval("PMRMName","{0}")%>' />
<asp:Label ID="lblRM" runat="server" /> 
```

我想在第二页中使用 PMRMID 和 PMRMName。如何获取它们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T08:42:28.337

使用 Request.QueryString 检索在 url 中传递的值。

```
Request.QueryString["PMRMId"] 
```

检查此以获取详细信息：

[HttpRequest.QueryString 属性](http://msdn.microsoft.com/en-us/library/system.web.httprequest.querystring%28v=vs.100%29.aspx)

# javascript - JS模拟按钮单击使用悬停x秒

> ID：13667729
> 
> 赞同：0
> 
> 时间：2012-12-02T08:40:25.420
> 
> 标签：javascript, jquery

嗨，我正在尝试通过鼠标悬停来模拟 js 中的按钮单击。例如，我在 html 中有一个计算器组件（div 中的一组按钮）。我想要完成的是当用户将鼠标指针移到一个按钮上并在那里停留至少 3 秒时，该按钮将被“点击”，如果停留在那里，将会有另一个延迟（不一定是 3 秒，可以是 2 秒或 1 秒），它将再次被“点击”。

我已经用 click 和 keypress 事件处理程序完成了 Calculator 组件，但仍然没有鼠标悬停在输入处理程序上。

我所拥有的虽然看起来像：

```
 Calculator.mouseoverListener = function(e, calculatorObject){
     setTimeout(function(){
        value = $(e.target).val();
        calculatorObject.handleInput(value); 
     } , 2000); 
  } 
```

但这就像：（1）鼠标在按钮上移动（2）无论它在按钮上悬停多长时间，它都会等待 2 秒并模拟“点击”..

我可以使用的方法有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T08:53:00.090

我会采取将事件侦听器绑定到每个单独按钮的方法，就像这样（抱歉，未测试，因此可能有错误）：

```
var timeoutRef;

button.addEventListener('mouseover', function (event) {
    timeoutRef = setTimeout(function () {
        var newEvent = document.createEvent('UIEvents').initUIEvent('click',true,true,window,1);
        event.target.dispatchEvent(newEvent);
    }, 3000);
});

button.addEventListener('mouseout', function (event) {
    clearTimeout(timeoutRef);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T08:55:37.737

`setInterval`您可以通过使用而不是..来解决您的问题`setTimeout`。这两个函数非常相似，但是`setInterval`每 X 毫秒重复执行一个操作。

的返回值`setInterval`很重要，因为它将允许您`clearInterval`稍后使用它来停止执行函数

```
var hoverInterval = false;

Calculator.mouseoverListener = function(e, calculatorObject){
   if(hoverInterval) {
       // interval already active
       return true;
   }

   hoverInterval = setInterval(function(){
      value = $(e.target).val();
      calculatorObject.handleInput(value); 
   } , 2000); 
} 
```

根据您的代码，您需要为 <input> 元素鼠标移出事件添加一个侦听器，并且当该事件发生时，您清除之前的任何`hoverInterval`

假设你的计算器按钮有一个'calculatorButton'类，你的代码可能是这样的

```
$('.calculatorButton').mouseout(function() {
    if(hoverInterval) {
       clearInterval(hoverInterval);
    }
}); 
```

# java - 用于语音到文本转换的 Java API

> ID：13667731
> 
> 赞同：-3
> 
> 时间：2012-12-02T08:40:34.393
> 
> 标签：java, speech-recognition, voice

为了开发基于桌面的应用程序，我正在寻找Java 中的*语音到文本转换*第三方库。（开源将是首选）

有人知道这种灵活且可扩展的 API 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T08:46:45.290

[您可以从Sphinx-4](http://cmusphinx.sourceforge.net/sphinx4/)获得帮助。Sphinx-4 是完全用 JavaTM 编程语言编写的最先进的语音识别系统。

# php - Codeigniter: HELPERS 和 $CI =& get_instance();

> ID：13667733
> 
> 赞同：2
> 
> 时间：2012-12-02T08:41:41.487
> 
> 标签：php, codeigniter, libraries, helpers, controllers

我有一些函数可以管理控制器文件中某些控制器的访问级别。

我决定把它们带到图书馆或帮手那里。

由于它们主要是程序性的，我决定使用助手。

这是控制器文件中的原始方法（其他是 access_level_member、access_level_moderator 等）

```
 function access_level_admin() {

    if (!$this->session->userdata('loggedin')) {
        $this->session->set_flashdata('warning', 'Not logged in.');
        redirect('/start_page', 'refresh');
    }
    if (!$this->session->userdata('admin')) {
        $this->session->set_flashdata('warning', 'Access Denied!');
        redirect('/start_page', 'refresh');
    } 
```

这是一个帮手。

```
function access_level_admin() {
    $CI =& get_instance();
    if (!$CI->session->userdata('loggedin')) {
        $CI->session->set_flashdata('warning', 'Not logged in.');
        redirect('/start_page', 'refresh');
    }
    if (!$CI->session->userdata('admin')) {
        $CI->session->set_flashdata('warning', 'Access Denied!');
        redirect('/start_page', 'refresh');
    } 
```

所以我的问题是，将它放在库或助手中是更好的主意吗？可以使用 $CI =& get_instance(); 在帮手内。

有更好的想法或建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T03:10:29.680

我会将逻辑放在父控制器中并让您的控制器扩展它。

```
class Authenticated_Controller extends CI_Controller {
    public function __construct() {
        parent::__construct();
        if (!$this->session->userdata('loggedin')) {
            $this->session->set_flashdata('warning', 'Not logged in.');
            redirect('/start_page', 'refresh');
        }
}

class Admin_Controller extends Authenticated_Controller {
    public function __construct() {
        parent::__construct();
        if (!$this->session->userdata('admin')) {
            $this->session->set_flashdata('warning', 'Access Denied!');
            redirect('/start_page', 'refresh');
        }
} 
```

# android - 如何从应用程序内更改为 Holo Dark/Light 主题？

> ID：13667743
> 
> 赞同：5
> 
> 时间：2012-12-02T08:44:09.057
> 
> 标签：android

我知道有它是可能的，所以如果我有一个设置，我可以在 Holo.Light 和 Holo 之间进行切换，但是，我似乎不知道怎么做。感谢所有帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T08:58:07.483

我认为您可以使用该`setTheme()`方法来做到这一点。只需确保在使用之前调用它`setContentView`，否则它将不起作用。

例如：

```
if(userChoice ==1){
   setTheme(android.R.style.Theme_Holo_Light);
else if(userChoice == 2){
    setTheme(android.R.style.Theme_Holo);
} 
```

可以在[此处找到主题列表](http://developer.android.com/reference/android/R.style.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-02T08:58:51.497

根据对发布的答案的评论，如果您需要在默认的 Holo 主题之间切换，请使用：

```
if (mThemeId == R.style.AppTheme.Dark) {
        mThemeId = android.R.style.Theme_Holo_Light;
    } else {
        mThemeId = android.R.style.Theme_Holo;
    }
this.recreate(); 
```

从您的`Styles.XML`文件中使用您自己的自定义主题。例如，像这样：

```
<style name="ActionBar" parent="@android:style/Widget.Holo.ActionBar" />

<style name="ActionBar.Light" parent="@style/ActionBar">
    <item name="android:background">@color/actionbar_background_light</item>
</style>

<style name="ActionBar.Dark" parent="@style/ActionBar">
    <item name="android:background">@color/actionbar_background_dark</item>
</style>

<style name="AppTheme.Light" parent="@android:style/Theme.Holo.Light">
    <item name="android:actionBarStyle">@style/ActionBar.Light</item>
    <item name="android:windowActionBarOverlay">true</item>
    <item name="listDragShadowBackground">@android:color/background_light</item>
    <item name="menuIconCamera">@drawable/ic_menu_camera_holo_light</item>
    <item name="menuIconToggle">@drawable/ic_menu_toggle_holo_light</item>
    <item name="menuIconShare">@drawable/ic_menu_share_holo_light</item>
</style>

<style name="AppTheme.Dark" parent="@android:style/Theme.Holo">
    <item name="android:actionBarStyle">@style/ActionBar.Dark</item>
    <item name="android:windowActionBarOverlay">true</item>
    <item name="listDragShadowBackground">@android:color/background_dark</item>
    <item name="menuIconCamera">@drawable/ic_menu_camera_holo_dark</item>
    <item name="menuIconToggle">@drawable/ic_menu_toggle_holo_dark</item>
    <item name="menuIconShare">@drawable/ic_menu_share_holo_dark</item>
</style> 
```

将其定义为您的全局变量`Activity`：

```
private int mThemeId = -1; 
```

并像这样设置你的 onCreate() 方法：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if(savedInstanceState != null) {
        if (savedInstanceState.getInt("theme", -1) != -1) {
          mThemeId = savedInstanceState.getInt("theme");
          this.setTheme(mThemeId);
        }
        mTitlesHidden = savedInstanceState.getBoolean("titlesHidden");
    }

    setContentView(R.layout.main);
} 
```

以及在两个主题之间切换的代码：

```
if (mThemeId == R.style.AppTheme.Dark) {
    mThemeId = R.style.AppTheme.Light;
} else {
    mThemeId = R.style.AppTheme.Dark;
}
this.recreate(); 
```

注意：必须在调用之前设置主题`setContentView()`

# php - PHP passthru（'cls'）不起作用

> ID：13667745
> 
> 赞同：1
> 
> 时间：2012-12-02T08:44:41.967
> 
> 标签：php

我是命令行中 PHP 的新手。我正在使用 Windows，我想在命令行中清除屏幕。我已经搜索并找到了这段代码

`<?php passthru('cls'); ?>`

但是这段代码并没有清除屏幕，而是显示了这个字符'♀'。我也尝试过使用`shell_exec`and `exec`，但他们失败了。我做错什么了吗？我该如何解决？

感谢：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-19T15:33:19.957

经过大量搜索，我终于在依赖 ANSI 的 Windows 7 中找到了一个适合我的答案（如上面的评论）：

```
echo chr(27)."[H".chr(27)."[2J"; 
```

这在标准控制台中对我有用，***因为我安装了[Ansicon](http://adoxa.altervista.org/ansicon)***，这似乎是您所缺少的……如果您遇到问题，您可能还想尝试[Console2](http://sourceforge.net/projects/console)。

# c++ - 从 8 位转换为 1 字节

> ID：13667746
> 
> 赞同：5
> 
> 时间：2012-12-02T08:45:00.783
> 
> 标签：c++, byte, bit-shift

我有一个 8 位的字符串，我想将其转换为 1 个字节。我不确定为什么我的功能无法正常工作。我将 8 位存储到 8 个无符号字符的数组中。到目前为止，这是我的方法：

```
unsigned int bitsToBytes(unsigned char *bits)
{
  unsigned int sum = 0;
  for(int i = 7; i >= 0; i--)
  {
    sum += bits[i];
    sum<<=1;
  }
  return sum;

}

int main()
{
  unsigned char bits[8];
  unsigned int byt;
  byt = bitsToBytes(bits);
  cout << byt; //doesn't give me the right result
} 
```

编辑：我的位数组在数组中包含“1”和“0”！抱歉不清楚。

可能有人知道我在哪里做错了吗？我不确定为什么我的位没有正确转换为字节。有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T08:48:51.647

```
sum += bits[i]; 
```

如果您尝试转换 C*字符串*（例如`"1010101"`），此代码会添加 char（例如 48 和 49）的代码表值（ASCII、UTF-8，无论您使用哪种编码），而`1`不是`0`. 您应该将其重写为

```
sum += bits[i] - '0'; 
```

此外，您不初始化`bits`数组 - 在初始化之前使用它的内容会导致未定义的行为，因此您可以预期发生的*任何*事情。

此外，您的代码逻辑有缺陷 - 一，您必须在添加二进制数字**之前**进行左移。第二，您正在向后遍历字符串；线

```
for (int i = 7; i >= 0; i--) 
```

真的应该

```
for (int i = 0; i < 8; i++) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T08:50:26.833

在正常情况下，这应该可以正常工作。

char[] 包含什么？它是否包含“0”、“1”而不是 0、1？

为了确保，换行

```
sum += bits[i]; 
```

到

```
sum |= bits[i] & 1; 
```

此外，正如 Vaughn Cato 在评论中指出的那样，您需要在添加*之前*进行转换。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-30T21:37:46.583

如果有人仍然对将位转换为字节感兴趣，请查看此要点。我准备了它作为 Arduino 的草图，以便我可以发送代表每个字节的电脉冲。我使用 int 数组而不是字符数组，但概念是相同的。考虑到这些类型的大小，我可能很快会将其切换为字节或字符。

特别看一下 encodeByte 和 decodeByte 函数

传输比特[要点示意图](https://gist.github.com/fernandozamoraj/530ee4e4fd0d5d413dbb)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-03-15T16:33:30.253

```
#include <stdint.h>

int main()
{
    uint8_t aa=0x41; 
    printf("%c",aa);  //A
} 
```

# php - JavaScript 没有使用新的表单值更新 HTML 代码

> ID：13667749
> 
> 赞同：0
> 
> 时间：2012-12-02T08:45:57.547
> 
> 标签：php, javascript, html, forms, function

**问题：**

当输入两个表单值（最低/最高价格）时，不会更新呈现的查询结果。首次输入时，结果会正确显示，但随后使用新参数更改表单值时，html 代码不会更新以反映这些参数。

**HTML 代码：**

```
<input type="text" size="5" placeholder="Min. price" id="price_min">
<input type="text" size="5" placeholder="Max. price" id="price_max">
<input type="button" onclick="getHotelInfo()" value="Get" />
<div id="hotel_info"></div> 
```

**JavaScript 代码：**

```
function getHotelInfo() {
    $.get('hotelservice.php?priceMin=' + $('input#price_min').val() + '&priceMax=' + $('input#price_max').val(), function(data) {
        var hotelInfo = JSON.parse(data);
        content = '<table style="font-size:10px;width:100%;"><tr><th>Name</th><th>Stars</th><th>Price</th></tr>';
        for (var hotel=0; hotel<5;hotel++) 
        {
            content += '<tr><td><a href="' + hotelInfo[hotel].externalLink + '">' + hotelInfo[hotel].name +'</a></td><td><center>' + hotelInfo[hotel].stars + '</center></td><td><center>' + hotelInfo[hotel].price + '</center></td></tr>';
        }
        content += '</table>';
        $('#hotel_info').replaceWith(content);
    });
} 
```

**PHP代码：**

```
$priceMin = $_GET['priceMin'];
$priceMax = $_GET['priceMax'];

$xml_source = file_get_contents('http://www.kayak.com/h/rss/hotelrss/SE/vaxjo?mc=EUR');
$xml = simplexml_load_string($xml_source);
$result = array();
foreach ($xml->channel->item as $item) {
    $kyk = $item->children('http://www.kayak.com/h/rss/hotelextension');
    $price = (int)$kyk->price;
    if ($price < $priceMax && $price > $priceMin) {
        $entry = new stdClass();
        $entry->name = (string)$item->title;
        $entry->externalLink = (string)$item->link;
        $entry->price = $price;
        $entry->stars = (int)$kyk->stars;
        $result[] = $entry;
    }
}
echo json_encode($result); 
```

**期望的输出：** 当表单值发生变化并调用 getHotelInfo() 时，应该反映新的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:02:24.453

我测试了您的脚本，问题是（根据我的简短测试）PHP 脚本有时返回少于 5 个结果，然后您仍然尝试获取 5 个结果（在 for 循环中）。这会导致脚本访问不存在的对象的属性，从而导致错误并且脚本失败。因此没有任何更新。

无论如何，我先为您更新了脚本，因此返回的数据最大为 5 或从 PHP 脚本返回的数据的长度。新的 javascript 函数如下所示：

```
function getHotelInfo() {
    $.get('test.php?priceMin=' + $('input#price_min').val() + '&priceMax=' + $('input#price_max').val(), function(data) {
        var hotelInfo = JSON.parse(data);
        var limit = hotelInfo.length > 5 ? 5 : hotelInfo.length;

        content = '<table style="font-size:10px;width:100%;"><tr><th>Name</th><th>Stars</th><th>Price</th></tr>';
        for (var hotel=0; hotel< limit;hotel++) 
        {
            content += '<tr><td><a href="' + hotelInfo[hotel].externalLink + '">' + hotelInfo[hotel].name +'</a></td><td><center>' + hotelInfo[hotel].stars + '</center></td><td><center>' + hotelInfo[hotel].price + '</center></td></tr>';
        }
        content += '</table>';
        $('#hotel_info').html(content);
    });
} 
```

希望这能解决您的问题！

# sql-server - 无法找到日期类型表列的超出范围值

> ID：13667751
> 
> 赞同：3
> 
> 时间：2012-12-02T08:46:15.770
> 
> 标签：sql-server

执行查询`DBCC CHECKDB WITH NO_INFOMSGS`失败，出现以下错误：

> *页面 (1:2772455)，对象 ID 689489585 中的插槽 8，索引 ID 1，分区 ID 72057594305052672，分配单元 ID 72057594619953152（类型“行内数据”）。列“日期”值超出数据类型“日期时间”的范围。*

将列更新为合法值。

我在`DBCC checkDB`为数据库的特定表运行命令时收到上述消息，当我尝试通过运行以下查询来获取该表的日期列时：-

```
select [date] 
from  [TableName] 
where [Year] = 2011 
  and Month = 1 
  and [Date] < '1753-01-01'
  and Date > '9999-12-31' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T08:50:04.113

您可以尝试使用这样的`Between`关键字：-

```
 select [date] from  [TableName] where [Year]=2011 and Month=1 and [Date] between ('1753-01-01','9999-12-31') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T09:57:06.047

首先你的`WHERE clause`没有意义

1.  您正在寻找**早于“1753-01-01”** *且* **晚于**不存在的“9999-12-31”的日期。
2.  `[Year] = 2011`意味着您只需要 2011 年的记录，根本不需要按日期范围进行过滤。出于某种原因，如果你需要它应该是`[date] BETWEEN '17530101' AND '99991231`
3.  建议使用`ISO date format`which is `yyyymmdd`(ie; `'17530101'`)。***这可能是日期超出范围错误的原因。***

    我认为这可以完成工作；

    ```
     SELECT [date] FROM  [TableName] WHERE [Year] = 2011 AND Month = 1 
      --AND [date] BETWEEN '17530101' AND '99991231' 
      --This filter does not make sense as you have already filtered by 2011. 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-18T15:04:01.857

您有包含损坏值的页面 (1:2772455)，运行此命令以准确找出导致问题的行：

```
DBCC TRACEON ( 3604 )
DBCC PAGE ( 'dbname' , 1 , 2772455 , printopt=3 )
DBCC TRACEOFF ( 3604 ) 
```

搜索“INVALID”，您会发现 Date = INVALID COLUMN VALUE。向上滚动并获取主键。然后，您可以使用正确的日期更新该行。

# configuration - 如何在 Apache2 上为网站设置不同的子目录？

> ID：13667761
> 
> 赞同：0
> 
> 时间：2012-12-02T08:48:16.780
> 
> 标签：configuration, apache2, virtualhost, subdirectory

我有一个 Apache2 服务器，它被配置为提供一个位于不同文件夹中的网站，如下所示：

*   `/var/www/main`包含主页文件`index.html`
*   `/var/www/sub`包含另一个文件`sub.html`

虽然我的网站主页可以访问，但子部分不是：

*   `www.mysite.com`(== `www.mysite.com/index.html`) 有效
*   `ẁww.mysite.com/sub`不工作**_**
*   `ẁww.mysite.com/sub.html`不工作**_**
*   `ẁww.mysite.com/sub/sub.html`不工作**_**

错误消息总是`requested URL ... was not found on this server`

`/etc/apache2/sites-available/sub`：

```
<VirtualHost *:80>
    ServerName www.mysite.com
    DocumentRoot /var/www/sub
    <Directory /var/www/sub>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
    </Directory>
</VirtualHost> 
```

`/etc/apache2/httpd.conf`：

```
<VirtualHost *:80>
    DocumentRoot /var/www/main
    <Directory /var/www/main>
        AllowOverride all
        Options -MultiViews
    </Directory>
</VirtualHost> 
```

我的配置有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T09:09:41.113

需要总结

```
<VirtualHost *:80>
    ServerName www.mysite.com
    DocumentRoot /var/www/main
    Alias  /sub /var/www/sub
    <Directory /var/www/main>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
    </Directory>
    <Directory /var/www/sub>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
    </Directory>

</VirtualHost> 
```

然后`http://mysite.com/sub/sub.html`将是子文件。`http://mysite.com/index.html`或者`http://mysite.com`也应该工作。

如果不需要子目录，则需要查看`ReWrite`

# java - 配置中的 Struts2 {}

> ID：13667763
> 
> 赞同：0
> 
> 时间：2012-12-02T08:48:32.337
> 
> 标签：java, xml, struts2, struts, config

在查看 Struts2 的配置文件时，我正在关注有关 Struts2 的教程，我看到了这个

```
<package name="events" namespace="/events" extends="struts-default">
    <action name="*" class="actions.events.{1}">
        <result>/views/events/{1}.jsp</result>
        <result name="redirect" type="redirect">${redirectUrl}</result>
    </action>
</package> 
```

这里的一切都不是火箭科学，但让我难以置信的是，这意味着`class="actions.events.{1}`什么`{1}`或做什么？目的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:58:23.180

上面是通配符映射。{1} 是一个占位符，将替换为匹配的操作名称。所以，如果你有两个动作Action1和Action2，上面类似于

```
<action name="Action1" class="actions.events.Action1">
    <result>/views/events/Action1.jsp</result>
    <result name="redirect" type="redirect">${redirectUrl}</result>
</action>
<action name="Action2" class="actions.events.Action2">
    <result>/views/events/Action2.jsp</result>
    <result name="redirect" type="redirect">${redirectUrl}</result>
</action> 
```

[文档](http://struts.apache.org/2.x/docs/wildcard-mappings.html)中的更多信息。

# algorithm - 我怎样才能找到圆的所有点？

> ID：13667774
> 
> 赞同：3
> 
> 时间：2012-12-02T08:50:44.567
> 
> 标签：algorithm, geometry

给定圆心的半径和坐标，如何找到圆的所有点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-02T09:07:52.653

圆的方程是 (xh)^2 + (y -k)^2 = r^2。在哪里：

```
x = x-coordinate
y = y-coordinate
h = x-coordinate of the center point
k = y-coordinate of the center point
r = radius 
```

因为x轴上圆心到圆周上一点的距离，y轴和半径形成一个直角三角形，其中x距离是底，y距离是高度，r是斜边那个直角三角形。对于中心为 (0,0) 的圆，圆的方程为 x^2 + y^2 = r^2（这是勾股定理）。

您还可以使用恒等式 cos theta = y/r => y = r*cos theta 和 sin theta = x/y => x = r*sin theta 并从 0 到 360 度迭代 theta

因此，给定一个中心点 (h,k) 和半径 r，您可以找到位于圆圆周上的点 (x,y)。

然后你可以有一个功能来检查某个点是否在圆周内。你到底需要这个做什么？

# iphone - UILinebreakmode 不适用于 xcode 中的 UILabel？

> ID：13667780
> 
> 赞同：1
> 
> 时间：2012-12-02T08:52:57.703
> 
> 标签：iphone, xcode, uilabel

我有一个有很多行的 UILabel。行数取决于运行时。但是我的 UILineBreakmode 无法正常工作..

这是代码：

```
-(void)viewDidLoad
{
NSString *temp=@"";

    for(int i=0;i<[arr2 count];i++)
    {

        temp=[temp stringByAppendingString:[[array objectAtIndex:i]objectForKey:@"Specilities"]];
        temp=[temp stringByAppendingString:@","];
    } 
    temp = [temp substringToIndex:[temp length]-1];
CGSize constraint8 = CGSizeMake(190, 2000.0f);
CGSize size8=[temp sizeWithFont:[UIFont fontWithName:@"Helvetica" size:14] constrainedToSize:constraint8 lineBreakMode:UILineBreakModeWordWrap];
specialities =[[UILabel alloc]init];
[specialities setFrame:CGRectMake(124,270,190, size8.height)];
specialities.textAlignment=UITextAlignmentLeft;
specialities.backgroundColor=[UIColor clearColor];
specialities.font=[UIFont fontWithName:@"Helvetica" size:14];
specialities.text=[NSString stringWithFormat:@"%@ ",temp ];
specialities.numberOfLines=0;
[specialities sizeToFit];
[self.view addSubview:specialities];   
}

Expected result:

Family Dentistry,Dentist-
Child,Dentist-Family,
Orthodontist 

The result which Im getting:

Family Dentistry,Dentist-
Child,Dentist-Family,Orthodo
ntist 
```

我怎么才能得到它 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T09:19:06.623

尝试使用 UILabel 的 lineBreakMode 属性。例如，在你的标签上试试这个：

```
specialities.lineBreakMode=NSLineBreakByWordWrapping; 
```

可能的选项是：（有关详细信息，请参阅 Apple[文档](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSParagraphStyle_Class/Reference/Reference.html#//apple_ref/c/econst/NSLineBreakByWordWrapping)）

```
enum {
   NSLineBreakByWordWrapping = 0,
   NSLineBreakByCharWrapping,
   NSLineBreakByClipping,
   NSLineBreakByTruncatingHead,
   NSLineBreakByTruncatingTail,
   NSLineBreakByTruncatingMiddle
};
typedef NSUInteger NSLineBreakMode 
```

尝试各种设置。

# iphone - 隐藏 iPhone 的标签栏 xcode

> ID：13667784
> 
> 赞同：1
> 
> 时间：2012-12-02T08:54:09.363
> 
> 标签：iphone, xcode, uitabbarcontroller

我正在创建一个基于 TabBar 的应用程序，其中我在第二个选项卡中有 4 个选项卡我有一个 UICollectionView 控件来显示来自 RSS 提要的图像。

当用户单击任何图像时，它应该导航以显示在另一个 UIViewController 中以获取有关该图像的更多详细信息。我想在详细信息页面中隐藏 TabBar。我尝试了很多方法，但它不起作用。

以下是我在选择中的代码`UICollectionView`：

```
-(void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath {

    DetailView *detail=[[DetailView alloc] init];
    detail.item= (MWFeedItem *)[itemsToDisplay objectAtIndex:indexPath.row];
    [self.navigationController pushViewController:detail animated:YES];
    [detail setHidesBottomBarWhenPushed:YES];
    [self.myCollectionView deselectItemAtIndexPath:indexPath animated:YES];
} 
```

我`setHidesBottomBarWhenPushed:YES`为详细页面设置了仍然显示详细页面的标签栏。

我应该在这里做任何其他事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T12:10:00.643

您`DetailView`是视图控制器，因为您将其推入`self.navigationController`。

重写 ViewController 的`viewWillAppear`and`viewWillDisappear`方法`DetailView`，当您在 TabBarController 中添加 NavigationController 作为视图之一时，您可以直接访问`tabBarController`属于的视图控制器堆栈中的对象`NavigationController`。

请尝试以下代码：

```
-(void) viewWillAppear:(BOOL)animated {

    [super viewWillAppear:YES];

    // if you added bottom bar thr xib or thr code on DetailView VC, better if you remove it from DetailView xib
    [self setHidesBottomBarWhenPushed:YES]; 

    // this will hide the Tabbar  
    [self.tabBarController.tabBar setHidden:YES];
}

-(void) viewWillDisappear:(BOOL)animated{

    [super viewWillDisappear:YES];

    // this will show the Tabbar  
    [self.tabBarController.tabBar setHidden:NO];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T07:47:32.877

我最初的答案已转换为评论。因为它很短，我认为（仅比外部网站的链接多）！

但是，正如您在上次对我的评论中详细说明的那样，您真正需要的是：如果您想更改 UITabBar 的外观，则不一定需要为此目的子类化 UITabBarController。这取决于您需要的定制程度，但请先查看 Apple 的“外观 API”。这是来自 Ray Wenderlich 网站的一篇关于[iOS5 中用户界面自定义](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)的好文章（也适用于 iOS6，文章中包含一个示例项目）。

[这是](http://felipecypriano.com/2012/02/27/how-to-customize-uitabbar-on-ios-5/)通过 Appearance API 自定义标签栏的另一个好方法。

# javascript - 如何通过div访问图像

> ID：13667786
> 
> 赞同：0
> 
> 时间：2012-12-02T08:54:23.820
> 
> 标签：javascript, css

如果我有一个`div`over my `image tag`，怎么可能通过 保持访问图像`div`？我的意思是当我右键单击该 div 以获取图像标签等选项`open image in new tab`时，甚至左键单击以访问图像，但 div 应该是可见的..

我有类似的东西：

CSS

```
myDiv {
  position: absolute;
  top : 0;
  left: 0;
  width: 100%;
  height: 100%;
} 
```

HTML

```
 <div>
     <img src="..." alt="..">
     <div id="myDiv"></div>
   </div> 
```

*PS：我在某种灯箱上看到图像上有一个缩放图标，但是在右键单击或其他操作时，我可以访问图像，而不是像预期的那样访问覆盖 div。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T09:04:06.317

**我找到了答案：**

CSS：

```
pointer-events: none; 
```

# c# - Optional Else 会影响性能吗？

> ID：13667788
> 
> 赞同：0
> 
> 时间：2012-12-02T08:55:18.313
> 
> 标签：c#, if-statement, cpu, cil

诠释 i = 3;

此代码之间是否有任何性能差异：

```
if(i == 2)
   DoA();
if(i == 3)
   DoB();
if(i == 4)
   DoC(); 
```

而这段代码：

```
if(i == 2)
   DoA();
else if(i == 3)
   DoB();
else if(i == 4)
   DoC(); 
```

我想知道使用可选的 ELSE 是否会影响 CPU 理解代码的方式。我一直认为，当我们使用第二种方法时，如果`i`是`2`则 CPU 不会检查其他两个条件，但在第一种方法中，虽然第一个条件为真（`i == 2`）但 CPU 确实会检查第二个和第三个条件。这是真的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T09:18:30.673

您不应该根据性能来决定这一点。**两个版本的代码意味着不同的东西。**您应该使用*正确的那个。*

例如：

```
if (s == null)
{
    // do something
    s = GetNewValue();
}
if (s == "")
{
    // do something else
} 
```

如果没有`else`，此代码意味着：

*   `s`如果是，则执行第一个块`null`
*   然后，如果该块更改`s`为`""`（或`s`开始`""`），则执行第二个块。

`else`在 second 之前有一个额外的`if`，代码意味着：

*   `s`如果是 则执行第一个块`null`。
*   `s`如果不是`null`以 开头**且**等于 ，则执行第二个块`""`。

如果由于块不会修改您要比较的变量而没有区别，请**使用它，`else`因为它使您的代码的含义明确。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T08:58:03.490

当然，它确实会影响——更好！这与不必要的完全相反，因为通过使用这些 else，编译器将跳过其他 if 检查并获得更好的性能。

但是你不应该担心它，你的例子中的性能差异是如此之小以至于微不足道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T09:05:05.530

这是您的两个语句的 IL 代码：

```
.method private hidebysig static void m1() cil managed
{
    .maxstack 2
    .locals init (
        [0] int32 i,
        [1] bool CS$4$0000)
    L_0000: nop 
    L_0001: ldc.i4.3 
    L_0002: stloc.0 
    L_0003: ldloc.0 
    L_0004: ldc.i4.2 
    L_0005: ceq 
    L_0007: ldc.i4.0 
    L_0008: ceq 
    L_000a: stloc.1 
    L_000b: ldloc.1 
    L_000c: brtrue.s L_0014
    L_000e: call void ConsoleApplication1.Program::DoA()
    L_0013: nop 
    L_0014: ldloc.0 
    L_0015: ldc.i4.3 
    L_0016: ceq 
    L_0018: ldc.i4.0 
    L_0019: ceq 
    L_001b: stloc.1 
    L_001c: ldloc.1 
    L_001d: brtrue.s L_0025
    L_001f: call void ConsoleApplication1.Program::DoB()
    L_0024: nop 
    L_0025: ldloc.0 
    L_0026: ldc.i4.4 
    L_0027: ceq 
    L_0029: ldc.i4.0 
    L_002a: ceq 
    L_002c: stloc.1 
    L_002d: ldloc.1 
    L_002e: brtrue.s L_0036
    L_0030: call void ConsoleApplication1.Program::DoC()
    L_0035: nop 
    L_0036: ret 
}

.method private hidebysig static void m2() cil managed
{
    .maxstack 2
    .locals init (
        [0] int32 i,
        [1] bool CS$4$0000)
    L_0000: nop 
    L_0001: ldc.i4.3 
    L_0002: stloc.0 
    L_0003: ldloc.0 
    L_0004: ldc.i4.2 
    L_0005: ceq 
    L_0007: ldc.i4.0 
    L_0008: ceq 
    L_000a: stloc.1 
    L_000b: ldloc.1 
    L_000c: brtrue.s L_0016
    L_000e: call void ConsoleApplication1.Program::DoA()
    L_0013: nop 
    L_0014: br.s L_003a
    L_0016: ldloc.0 
    L_0017: ldc.i4.3 
    L_0018: ceq 
    L_001a: ldc.i4.0 
    L_001b: ceq 
    L_001d: stloc.1 
    L_001e: ldloc.1 
    L_001f: brtrue.s L_0029
    L_0021: call void ConsoleApplication1.Program::DoB()
    L_0026: nop 
    L_0027: br.s L_003a
    L_0029: ldloc.0 
    L_002a: ldc.i4.4 
    L_002b: ceq 
    L_002d: ldc.i4.0 
    L_002e: ceq 
    L_0030: stloc.1 
    L_0031: ldloc.1 
    L_0032: brtrue.s L_003a
    L_0034: call void ConsoleApplication1.Program::DoC()
    L_0039: nop 
    L_003a: ret 
} 
```

看起来生成的 IL(s)**不**一样。

**编辑 1**

在方法中`m2()`：

```
L_0014: br.s L_003a
.
.
.
L_0027: br.s L_003a 
```

那么方法'm2（）'更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T09:01:49.937

是的，使用 else if，考虑以下代码：

```
if(predicateA){
  //do Stuff
}
if(predicateB){
  // do more stuff
} 
```

或者

```
if(predicateA){
  //do stuff 
}
else if(predicateB){
  //do stuff
} 
```

在第二种情况下，如果 predicateA 为真，则不需要计算 predicateB（以及任何其他谓词）（因此整个代码将执行得更快），而在第一个示例中，如果 predicateA 为真，则仍将始终计算 predicateB，如果 predicateA 和 predicateB 不是互斥的，你也可能会得到一些意想不到的惊喜。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T10:32:31.153

如果“DoX”是像“a = b”这样的语句；那么第一个执行速度可能会更快，并且编译器仍然可能无法找出互斥比较的最佳选项。

在某些架构中，这三个比较可以转化为：

```
 cmp a,2;
 movlt  b, c;
 moveq  c, d;
 movgt  e, f; 
```

*如果*这些是非常简单的语句，程序员会有所帮助。

转换问题以获得更好性能的其他一些实用方法是使用函数指针并确保每一步都不会访问超出范围的数组。

```
 void (*do)()[]={ doA, doB, doC };

 do[i]();  
 // mov eax, do[eax*4];
 // call [eax] 
```

# c# - 将 IEnumerable 强制转换为 IEnumerable 当 T 在编译时未知时

> ID：13667798
> 
> 赞同：5
> 
> 时间：2012-12-02T08:58:05.690
> 
> 标签：c#, generics

我有一个带有以下签名的排序扩展方法：

```
public static IEnumerable<T> CustomSort<T>(this IEnumerable<T> source, string sortProperties) 
```

我们不久前写了它，它一直在做它的事情。现在我正在创建一个自定义控件，并且 DataSource 属性是一个 IEnumerable（非泛型）。有没有办法在非泛型 IEnumerable 中获取对象的类型？

我确信“对自定义控件数据源进行排序”的问题已经解决了一百万次，但我似乎无法找到解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T09:37:42.673

这里有一个基本问题，一个类型可以同时为多个 T 实现 IEnumerable-of-T。但如果我们排除这种情况，一个厚颜无耻的方法是：

```
void Evil<T>(IEnumerable<T> data) {...}

IEnumerable source = ...
dynamic cheeky = source;
Evil(cheeky); 
```

这基本上将这个问题转移到了 DLR，让您的 Evil-of-T 方法轻松应对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T09:08:41.863

就个人而言，我只会使用

```
DataSource.Cast<object>() 
```

然后你有一个`IEnumerable<object>`你可以在你的`CustomSort<T>`函数中使用的。我在这里假设这个函数已经可以处理任意对象；从第二个参数名称来看，我猜你无论如何都在使用反射，所以应该没问题。只需确保它`GetType()`在反映每个对象时使用它，而不是`typeof(T)`，因为`typeof(T)`显然会使用`object`它并且它不会获得实际对象的字段列表。

当然，如果您在编译时实际上知道数据源中所有对象的类型，您可能希望使用该类型，例如：

```
DataSource.Cast<Customer>() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T10:04:53.850

您可以创建一个扩展方法，该方法将在运行时返回正确的类型：

```
public static class LinqExtensions
{
    public static Type GetElementType(this IEnumerable source)
    {
        var enumerableType = source.GetType();
        if (enumerableType.IsArray)
        {
            return enumerableType.GetElementType();
        }
        if (enumerableType.IsGenericType)
        {
            return enumerableType.GetGenericArguments().First();
        }
        return null;
    }
} 
```

更新：我添加了用于`IEnumerable<T>`对非泛型执行泛型特定排序的机制`IEnumerable`

```
public static class SortingExtensions
{
    public static IEnumerable<T> CustomSort<T>(this IEnumerable<T> source, string sortProperties)
    {
        // sort here
    }

    public static IEnumerable CustomSort(this IEnumerable source, string sortProperties)
    {
        var elementType = source.GetElementType();
        var genericElementType = typeof (IEnumerable<>).MakeGenericType(elementType);

        var sortMethod = typeof (SortingExtensions).GetMethod(
            "CustomSort", 
            BindingFlags.Public | BindingFlags.Static,
            null, 
            new [] {genericElementType, typeof (string)},
            null);

        return (IEnumerable) sortMethod.Invoke(null, new object[] {source, sortProperties});
    }

} 
```

# php - 如果外键表列与oracle + yii框架中引用的父表列不匹配怎么办？

> ID：13667801
> 
> 赞同：0
> 
> 时间：2012-12-02T08:58:11.840
> 
> 标签：php, oracle, yii

我有两个表，表 A 和表 B。

现在表 A 有`A.id`并且 B 有`B.id`由此`B.id`是要链接的外键`A.id`

现在我的问题是，A 有 A.extraid 在 B 中“有”许多行，其中列名是`B.notsamextraid`. 换句话说， 的值`B.notsamextraid`与`A.extraid`

我应该怎么做才能让 Yii 匹配这两列，其中它们都有不同的名称？

（我无权将B.notsamextraid的名字改成B.extraid）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T09:34:39.173

Yii 文档说[DO 在数据库模式中定义外键关系](http://www.yiiframework.com/wiki/227/guidelines-for-good-schema-design/#hh5)。

你能试试下面的表格吗？Yii 应该能够获取两个外键：

```
create table a (
  id      int not null primary key,
  extraid int not null unique
);

create table b (
  id            references a(id),
  notsamextraid references a(extraid)
); 
```

编辑：要确定两个表之间是否已经存在外键，可以使用以下查询。这不是这个星球上最漂亮的查询，但是还有复制和粘贴 :-)

```
select t1.owner, t1.constraint_name, t1.constraint_type, t1.table_name, c1.column_name,
       t2.owner, t2.constraint_name, t2.constraint_type, t2.table_name, c2.column_name
  from all_constraints  t1
  join all_cons_columns c1
    on t1.constraint_name=c1.constraint_name
   and t1.owner=c1.owner 
   and t1.table_name=c1.table_name
  join all_constraints  t2
    on t1.owner=t2.owner
   and t1.r_constraint_name=t2.constraint_name
  join all_cons_columns c2
    on t2.constraint_name=c2.constraint_name
   and t2.owner=c2.owner 
   and t2.table_name=c2.table_name
   and c1.position=c2.position
 where t1.constraint_type = 'R'
   and t1.table_name in ('A','B'); 
```

# c++ - 二叉树实现 C++

> ID：13667803
> 
> 赞同：3
> 
> 时间：2012-12-02T08:58:39.467
> 
> 标签：c++, function, tree, insert, binary-tree

为了好玩，我一直在尝试用 C++ 实现二叉搜索树。我的问题是我的插入功能有问题。以下是我到目前为止的内容：

```
class TreeNode{

public: 
    int data;          
    TreeNode *left;    
    TreeNode *right;  
    void Insert(int value, TreeNode *x);
    void TreeNode::Print(TreeNode *x);
    TreeNode();
};

TreeNode::TreeNode(){

left = NULL;
right = NULL;

} 
```

.

```
void TreeNode::Insert(int value, TreeNode *x){

    if(x->left == NULL && x->right == NULL){
           TreeNode *tree = new TreeNode();                        
           tree->datavalue;                               
           x->left = tree;                                  
    }

    else if(x->left == NULL && x->right != NULL){

           TreeNode *tree = new TreeNode();                
           tree->data = value;                          
           x->left = tree;                                 
    }

    else if(x->left != NULL && x->right == NULL){

           TreeNode *tree = new TreeNode();                      
           tree->data = value;                            
           x->right = tree;                          
    }

    else if(x->left != NULL && x->right != NULL){

        ??????

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T09:19:43.713

请勿盲目插入，请遵循以下逻辑。如果 x.value 小于根值，则尝试向左插入。如果 x.value >= root.value，则向右走。重复此逻辑，直到您遇到 NULL 值。那将是插入元素的正确位置。

你可以翻转逻辑，我只是​​在 < 上选择了左，因为不到有点向左箭头。<-：P

```
TreeNode *root = this;
TreeNode *parent = root;
//Traverse the tree, go left if x.val < , else go right(>=)
while(root) {
    parent = root;
    root = (root->value > x.value) ? root->left : root->right;
}
if(parent->value > x->value) 
    parent->left = x;
else
    parent->right = x; 
```

如果您不关心排序，请使用队列进行深度优先搜索。

```
queue<TreeNode*> nodes;
nodes.push(this);
while(1)
{
    if(!nodes.front()->left)
    {
        nodes.front()->left = x;
        return;
    } 
    else if (!nodes.front()->right)
    {
        nodes.front()->right = x;
        return;
    }
    nodes.push(nodes.front()->left);
    nodes.push(nodes.front()->right);
    nodes.pop();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T09:12:30.927

如果要在左右孩子都不是 null 时插入，则可以通过递归移动到树的最左侧节点来插入项目。而且由于您只是以没有特定顺序的方式插入值，因此很难跟踪。而是在这种情况下实现二叉搜索树。

```
else if(x->left != NULL && x->right != NULL){
         Insert(value,x->left);
         x-> data  = value;
         x->left = x->right = NULL;
} 
```

最重要的是，插入一个 BASE 案例以退出递归。

# c# - Windows 应用商店应用程序中 FlipView 中的 ListBox SelectionChanged 事件（Windows 8 Metro）

> ID：13667804
> 
> 赞同：0
> 
> 时间：2012-12-02T08:58:43.257
> 
> 标签：c#, .net, windows-store-apps

我对翻转视图中的列表框有一个奇怪的问题。

```
 <FlipView 
        x:Name="flipView"
        ItemsSource="{Binding Source={StaticResource itemsViewSource}}" Padding="0">    
        <FlipView.ItemTemplate>
            <DataTemplate>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition  Height="30"/>
                            <RowDefinition Height="30"/>
                            <RowDefinition Height="30"/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <TextBlock Grid.Row="0" FontSize="32" Text="{Binding Question.OrginalWord}" HorizontalAlignment="Center"></TextBlock>
                        <TextBlock Grid.Row="1" FontSize="18" Text="{Binding Question.Clue}"></TextBlock>
                        <TextBlock Grid.Row="2" x:Uid="ExamPage_OptionLabel"></TextBlock>
                        <ListBox x:Name="ListofOptions" Tag="{Binding Question.Id}"  Grid.Row="3" ItemsSource="{Binding Options}"  Padding="15" Width="280"
                                   Height="200" SelectionChanged="OptionsChange" Loaded="ListofOptions_Loaded"></ListBox>
                    </Grid>               
            </DataTemplate>
        </FlipView.ItemTemplate>
    </FlipView> 
```

在列表框的 SelectionChanged 事件处理程序中，我禁用了列表框

```
 private void OptionsChange(object sender, SelectionChangedEventArgs e)
    {

        ((ListBox)sender).IsEnabled = false;

    } 
```

所以问题是想象flipview有6个项目。当我单击第一个翻转视图项目中的列表框项目（每个列表框有四个自己的项目）时，第一个翻转视图项目中的列表框被禁用，但最后一个翻转视图项目的列表框也被禁用。此外，当您翻转到 Flipview 中的最后一项，然后返回到第一项时，列表框将显示为未选中的 lisbox。这个问题不仅适用于第一个和最后一个翻转视图的项目，还适用于第 2 个和第 5 个、第 4 个和第 3 个翻转视图的项目。

这很奇怪:) :|

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:20:49.420

答案很棘手

[来自 MSDN 论坛的回答](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/741f51ca-189c-4cd7-9a72-b315e9c8014c)

# php - PDO 多个命名占位符不检索数据

> ID：13667807
> 
> 赞同：1
> 
> 时间：2012-12-02T08:58:55.130
> 
> 标签：php, mysql, pdo

如果准备好的语句只有一个命名占位符，那么到目前为止我编写的代码可以正常工作，但是如果查询有多个条件，它不会从数据库返回任何结果。

例如：

```
$query = array();
$query['columns'] = array('*');
$query['tables'] = array('esl_comments');
$query['where'] = array(
    'esl_comments.commentVisible' => array('=', 'Y')
); 
```

工作正常。但如果我尝试：

```
$query = array();
$query['columns'] = array('*');
$query['tables'] = array('esl_comments');
$query['where'] = array(
    'esl_comments.commentVisible' => array('=', 'Y'),
    'esl_comments.commentID' => array('=', '1'),
); 
```

（注意附加的 commentID 参数）尽管 mySQL 数据库中有满足条件的数据，但它无法返回任何内容。

我写的 PDO 代码是：

```
$sql ='SELECT ';
                foreach($query['columns'] as $column){ //What columnns do we want to fetch?
                    $sql.=$column . ", ";
                }
                $sql = rtrim($sql, " ,");
                $sql .=' FROM '; //Which tables will we be accessing?
                foreach($query['tables'] as $tables){
                    $sql.=$tables . ", ";
                }
                $sql = rtrim($sql, " ,"); //Get rid of the last comma
                $sql .=' WHERE ';

                if(array_key_exists('where', $query)) //check if a where clause was provided
                {
                    $fieldnames = array_keys($query['where']);
                    $count = 0;
                    $size = sizeof($fieldnames);
                    $bindings = array();
                    foreach($query['where'] as $where){

                        $cleanPlaceholder = str_replace("_", "", $fieldnames[$count]);
                        $cleanPlaceholder = str_replace(".", "", $cleanPlaceholder);
                        $sql.=$fieldnames[$count].$where[0].":".$cleanPlaceholder." AND ";
                        $bindings[$cleanPlaceholder]=$where[1];
                        $count++;
                    }
                    $sql = substr($sql, 0, -5);  //Remove the last AND
                }
                else{ //no where clause so set it to an always true check
                    $sql.='1=1';
                    $bindings=array('1'=>'1'); //Provide default bindings for the statement
                }

                $sql .= ';'; //Add the semi-colon to note the end of the query
                echo $sql . "<br/><br/>";
            //  exit();
                $stmt = $this->_connection->prepare($sql);

                foreach($bindings as $placeholder=>$bound){
                    echo $placeholder . " - " . $bound."<br/>";
                    $stmt->bindParam($placeholder, $bound);
                }

                $result = $stmt->execute();
                echo $stmt->rowCount() . " records<br/>";

                $results = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

我正在动态构建查询，因此我通过去除句点和下划线来清理占位符 - 因此使用“cleanPlaceholder”变量。

生成的查询如下所示：

```
SELECT * FROM esl_comments WHERE esl_comments.commentVisible=:eslcommentscommentVisible AND esl_comments.commentID=:eslcommentscommentID; 
```

被绑定的参数如下所示：

```
eslcommentscommentVisible - Y
eslcommentscommentID - 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T10:45:50.550

## bindParam 需要参考

该问题是由您在 foreach 循环中绑定参数的方式引起的。

```
foreach($bindings as $placeholder=>$bound){
    echo $placeholder . " - " . $bound."<br/>";
    $stmt->bindParam($placeholder, $bound);
} 
```

`bindParam`需要参考。它将变量而不是值绑定到语句。由于 foreach 循环中的变量在每次迭代开始时都会重置，因此只有最后一个引用`$bound`保持不变，并且您最终将所有占位符绑定到它。

这就是为什么您的代码在`$query['where']`仅包含一个条目时有效，但在包含多个条目时失败的原因。

您可以通过 2 种方式解决问题：

## 通过引用传递

```
foreach($bindings as $placeholder => &$bound) {  //pass $bound as a reference (&)
    $stmt->bindParam($placeholder, $bound);     // bind the variable to the statement
} 
```

## 按值传递

使用`bindValue`代替`bindParam`：

```
foreach($bindings as $placeholder => $bound) {  
    $stmt->bindValue($placeholder, $bound);     // bind the value to the statement
} 
```

# c++ - 使用 std::lock (c++11) 的大量 CPU 负载

> ID：13667810
> 
> 赞同：34
> 
> 时间：2012-12-02T08:59:32.983
> 
> 标签：c++, c++11, mutex, stdthread

我最近实现线程/互斥锁管理器的努力最终导致 75% 的 CPU 负载（4 核），而所有四个正在运行的线程要么处于睡眠状态，要么等待互斥锁解锁。

特定的类太大了，无法在这里完全发布，但我可以将原因缩小到死锁安全地获取两个互斥锁

```
std::unique_lock<std::mutex> lock1( mutex1, std::defer_lock );
std::unique_lock<std::mutex> lock2( mutex2, std::defer_lock );
std::lock( lock1, lock2 ); 
```

该类的另一部分使用`std::condition_variable`with`wait()`和`notify_one()`on`mutex1`来同时有选择地执行某些代码。

简单的改变

```
std::unique_lock<std::mutex> lock1( mutex1 );
std::unique_lock<std::mutex> lock2( mutex2 ); 
```

将 CPU 使用率降至正常的 1-2%。

我不敢相信，这个`std::lock()`功能是那么低效。这可能是 g++ 4.6.3 中的错误吗？

编辑：（示例）

```
#include <atomic>
#include <chrono>
#include <condition_variable>
#include <iostream>
#include <mutex>
#include <thread>

std::mutex mutex1, mutex2;
std::condition_variable cond_var;

bool cond = false;
std::atomic<bool>done{false};

using namespace std::chrono_literals;

void Take_Locks()
    {
    while( !done )
        {
        std::this_thread::sleep_for( 1s );

        std::unique_lock<std::mutex> lock1( mutex1, std::defer_lock );
        std::unique_lock<std::mutex> lock2( mutex2, std::defer_lock );
        std::lock( lock1, lock2 );

        std::this_thread::sleep_for( 1s );
        lock1.unlock();
        lock2.unlock();
        }
    }

void Conditional_Code()
    {
    std::unique_lock<std::mutex> lock1( mutex1, std::defer_lock );
    std::unique_lock<std::mutex> lock2( mutex2, std::defer_lock );

    std::lock( lock1, lock2 );
    std::cout << "t4: waiting \n";

    while( !cond )
        cond_var.wait( lock1 );

    std::cout << "t4: condition met \n";
    }

int main()
    {
    std::thread t1( Take_Locks ), t2( Take_Locks ), t3( Take_Locks );
    std::thread t4( Conditional_Code );

    std::cout << "threads started \n";
    std::this_thread::sleep_for( 10s );

    std::unique_lock<std::mutex> lock1( mutex1 );
    std::cout << "mutex1 locked \n" ;
    std::this_thread::sleep_for( 5s );

    std::cout << "setting condition/notify \n";
    cond = true;
    cond_var.notify_one();
    std::this_thread::sleep_for( 5s );

    lock1.unlock();
    std::cout << "mutex1 unlocked \n";
    std::this_thread::sleep_for( 6s );

    done = true;
    t4.join(); t3.join(); t2.join(); t1.join();
    } 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-25T15:37:55.497

在我的机器上，以下代码每秒打印 10 次并消耗几乎 0 cpu，因为大多数时间线程要么处于睡眠状态，要么被锁定的互斥锁阻塞：

```
#include <chrono>
#include <thread>
#include <mutex>
#include <iostream>

using namespace std::chrono_literals;

std::mutex m1;
std::mutex m2;

void
f1()
{
    while (true)
    {
        std::unique_lock<std::mutex> l1(m1, std::defer_lock);
        std::unique_lock<std::mutex> l2(m2, std::defer_lock);
        std::lock(l1, l2);
        std::cout << "f1 has the two locks\n";
        std::this_thread::sleep_for(100ms);
    }
}

void
f2()
{
    while (true)
    {
        std::unique_lock<std::mutex> l2(m2, std::defer_lock);
        std::unique_lock<std::mutex> l1(m1, std::defer_lock);
        std::lock(l2, l1);
        std::cout << "f2 has the two locks\n";
        std::this_thread::sleep_for(100ms);
    }
}

int main()
{
    std::thread t1(f1);
    std::thread t2(f2);
    t1.join();
    t2.join();
} 
```

样本输出：

```
f1 has the two locks
f2 has the two locks
f1 has the two locks
... 
```

我在 OS X 上运行它，活动监视器应用程序说这个进程正在使用 0.1% 的 cpu。该机器是 Intel Core i5（4 核）。

我很乐意以任何方式调整此实验以尝试创建活锁或过多的 CPU 使用率。

**更新**

如果此程序在您的平台上使用过多的 CPU，请尝试将其更改为 call `::lock()`，其中定义为：

```
template <class L0, class L1>
void
lock(L0& l0, L1& l1)
{
    while (true)
    {
        {
            std::unique_lock<L0> u0(l0);
            if (l1.try_lock())
            {
                u0.release();
                break;
            }
        }
        std::this_thread::yield();
        {
            std::unique_lock<L1> u1(l1);
            if (l0.try_lock())
            {
                u1.release();
                break;
            }
        }
        std::this_thread::yield();
    }
} 
```

我很想知道这对你有什么影响，谢谢。

**更新 2**

经过长时间的拖延，我写了一篇关于这个主题的论文的初稿。该论文比较了完成这项工作的 4 种不同方法。它包含您可以复制并粘贴到您自己的代码中并自己测试的软件（请报告您的发现！）：

[http://howardhinnant.github.io/dining_philosophers.html](http://howardhinnant.github.io/dining_philosophers.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-25T03:18:54.307

非`std::lock()`成员函数*可能会*导致 Live-lock 问题或性能下降，它只保证“ *Never Dead-lock* ”。

如果您可以通过设计确定多个互斥锁的“锁定顺序（锁定层次结构）”，则最好不要使用泛型`std::lock()`，而是按预先确定的顺序锁定每个互斥锁。

有关更多详细信息，请参阅在[没有死锁的情况下获取多个锁。](http://www.justsoftwaresolutions.co.uk/threading/acquiring-multiple-locks-without-deadlock.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-02T09:14:07.077

正如文档所说，*[t] 对象被一系列未指定的 lock、try_lock、unlock 调用锁定*。如果互斥锁被其他线程持有很长一段时间，那么根本不可能有效率。如果不旋转，函数就无法等待。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T04:09:17.760

首先，我要感谢所有答案。

在重现效果的示例代码的工作中，我发现了问题的根源。

条件部分锁定两个互斥锁，而它只使用一个用于该`std::condition_variable::wait()`功能。

但我仍然想知道，幕后发生了什么，会产生如此高的 CPU 负载。

# c# - 实施双语网站的最佳方法是什么？

> ID：13667811
> 
> 赞同：0
> 
> 时间：2012-12-02T08:59:42.343
> 
> 标签：c#, asp.net

我有一种实现双语网站的方法。它将表划分为包含本地化列和非本地化列的表。像这样 ：

## 类别

类别 ID

## 类别_本地

ID CategoryId 文化标题

我想知道这是否是最好的方法？如果是，我的问题是如何实现它。我的意思是如何处理两个表的 CRUD 方法。我正在使用 asp.net 4.5 网络表单。

我将不胜感激任何想法。谢谢并恭祝安康。

# php - 在社交引擎中获取音乐播放列表艺术品 src url

> ID：13667812
> 
> 赞同：1
> 
> 时间：2012-12-02T08:59:47.660
> 
> 标签：php, socialengine

我正在使用带有音乐模块的社交引擎 4.2，我需要为播放列表照片回显 src url。为音乐模块中的播放列表图稿打印 html 的代码是

`<?php echo $this->itemPhoto($playlist, null, $playlist->getTitle(),array('width' => '200px', 'height' => '200px')) ?>`

谁能指出我正确的方向？

最好的，

# eclipse - 在 Eclipse IDE 中重新映射 NOTEPAD++ 快捷方式

> ID：13667814
> 
> 赞同：2
> 
> 时间：2012-12-02T09:00:16.970
> 
> 标签：eclipse, keyboard-shortcuts, notepad++

我非常习惯于 NOTEPAD++，所以我如何使用 NOTEPAD++ 快捷方式重新映射我的常规 Eclipse IDE 快捷方式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T10:23:33.553

您可以通过转到 Window -> Preferences -> General -> Keys 来调整许多 Eclipse 的键盘快捷键。您必须找到每个“命令”并为其分配键盘快捷键，以匹配 Notepad++ 的快捷键。

# java - 在 oracle 11G r2 中连接 Java 瘦驱动程序的问题

> ID：13667815
> 
> 赞同：5
> 
> 时间：2012-12-02T09:00:21.867
> 
> 标签：java, oracle11g, thin, sqlexception

```
public static  Connection getConnection()throws SQLException,ClassNotFoundException
       { String username="scott";
            String password="tiger";

            String url="jdbc:oracle:thin:@localhost:1521";
        Connection connection = null;
        System.out.println("before class");
                   Class.forName("oracle.jdbc.OracleDriver");
                   System.out.println("Before connection");
                connection=DriverManager.getConnection(url,username,password);
           System.out.println("CONNECTED");
        return connection;
       } 
```

连接名称：orcl 用户名：scott 密码：tiger 连接详细信息：scott@

我正在使用 Oracle g11 第 2 版，并且我已经在构建路径中包含了 ojdbc.jar。尝试建立连接时，出现以下堆栈跟踪错误：

> java.sql.SQLException: Io 异常：连接字符串格式无效，有效格式为：oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:134) at oracle.jdbc.dbaccess 的“host:port:sid”。在 oracle.jdbc.driver.OracleConnection.(OracleConnection.java:404) 的 oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:333) 在 oracle.jdbc.driver 的 DBError.throwSqlException(DBError.java:179)。 OracleDriver.getConnectionInstance(OracleDriver.java:468) 在 oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:314) 在 java.sql.DriverManager.getConnection(Unknown Source) 在 java.sql.DriverManager.getConnection(Unknown Source ) 在 com.adobe.daoimpl.DBimplementation.registration(DBimplementation.java:21) 在 com.adobe.com.adobe.util.DBConnection$DBUtil.getConnection(DBConnection.java:23)。service.AdobeService.registration(AdobeService.java:13) 在 webservice.Web.service(Web.java:16) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 在sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.apache.axis.providers.java.RPCProvider.invokeMethod(RPCProvider.java:397) at org.apache .axis.providers.java.RPCProvider.processMessage(RPCProvider.java:186) 在 org.apache.axis.providers.java.JavaProvider.invoke(JavaProvider.java:323) 在 org.apache.axis.strategies.InvocationStrategy.visit (InvocationStrategy.java:32) 在 org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118) 在 org.apache.axis.SimpleChain.invoke(SimpleChain.java:83) 在 org.apache.axis。handlers.soap.SOAPService.invoke(SOAPService.java:454) at org.apache.axis.server.AxisServer.invoke(AxisServer.java:281) at org.apache.axis.transport.http.AxisServlet.doPost(AxisServlet. java:699) 在 javax.servlet.http.HttpServlet 在 org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:647) .service(HttpServlet.java:728) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)AxisServletBase.service(AxisServletBase.java:327) at javax.servlet.http.HttpServlet.service(HttpServlet.java:728) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)AxisServletBase.service(AxisServletBase.java:327) at javax.servlet.http.HttpServlet.service(HttpServlet.java:728) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-05-31T13:27:58.937

刚刚通过使用解决了这个问题：`jdbc:oracle:thin:@//ipadress:portnumber/service_name`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T09:08:02.027

您在连接字符串的末尾缺少 SID（或服务名称）。

它必须是“主机：端口：sid”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-13T10:00:26.950

它应该是

String url="jdbc:oracle:thin:@Localhost:1521:XE";

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T09:09:20.897

`SID`在连接字符串中添加数据库。

```
String url="jdbc:oracle:thin:@localhost:1521:SID_GOES_HERE"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-02T10:56:22.773

你的 SID 可能是 XE，所以它应该是 jdbc:oracle:thin:Localhost:1521:XE

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-05T20:16:26.970

我有同样的问题，同样的错误：

```
java.sql.SQLException: Io exception: Invalid connection string format, a valid format is: "host:port:sid" 
```

我通过更新我的 JDBC 驱动程序解决了这个问题。在我的特殊情况下，从 ojdbc7.jar 到 ojdbc8-12.2.0.1.jar

# ios - 我的应用程序没有出现在 iPhone 4 上的通知中心，但在 iPhone 4s 上出现

> ID：13667820
> 
> 赞同：0
> 
> 时间：2012-12-02T09:00:47.317
> 
> 标签：ios, iphone, apple-push-notifications

奇怪的是，同一个应用程序确实出现在一台设备的设置中而另一台设备上却没有。

你能给我一个建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:22:20.723

您每年会从 Apple 开发人员技术支持处获得两次支持事件 - 烧掉一个。今年早些时候我遇到了奇怪的问题，他们提供了帮助。您还可以在他们的私人列表上发布，这些列表由 Apple 工程师监控。

# php - 保存 XML 文件时如何解码 HTML 实体？

> ID：13667823
> 
> 赞同：2
> 
> 时间：2012-12-02T09:01:22.293
> 
> 标签：php, xml, domdocument, html-entities

我的 PHP 脚本中有以下代码：

```
$str = '<item></item>';
$xml = new DOMDocument('1.0', 'UTF-8');
$xml->formatOutput = true;
$xml->load('file.xml');
$items = $addon->getElementsByTagName('items')->item(0);
$items->nodeValue = $str;
$xml->save('file.xml'); 
```

在保存的 file.xml 中，我看到以下内容：

```
&lt;item&gt;&lt;\item&gt; 
```

如何在不编码 HTML 实体的情况下将其保存在 XML 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T13:50:16.627

使用 DOMDocumentFragment：

```
<?php

$doc = new DOMDocument();
$doc->load('file.xml'); // '<doc><items/></doc>'

$item = $doc->createDocumentFragment();
$item->appendXML('<item id="1">item</item>');

$doc->getElementsByTagName('items')->item(0)->appendChild($item);
$doc->save('file.xml'); 
```

如果要附加到根元素，请使用`$doc->documentElement->appendChild($item);`而不是`getElementsByTagName`.

# python - 从子进程的标准输出的 tar 中读取单个文件

> ID：13667824
> 
> 赞同：2
> 
> 时间：2012-12-02T09:01:27.697
> 
> 标签：python

我怎样才能从命令的标准输出中读取单个文件的内容而不敲击磁盘？

我想出了这样的事情：

```
def get_files_from(sha, files):
    from subprocess import Popen, PIPE
    import tarfile
    p = Popen(["git", "archive", sha], bufsize=10240, stdin=PIPE, stdout=PIPE, stderr=PIPE)
    tar = tarfile.open(fileobj=p.stdout, mode='r|')
    p.communicate()
    members = tar.getmembers()
    names = tar.getnames()
    contents = {}
    for fname in files:
        if fname not in names:
            contents[fname] = None
            continue
        else:
            idx = names.index(fname)
            contents[fname] = members[idx].tobuf()
            contents[fname] = tar.extractfile(members[idx]) #<--- HERE

    tar.close()
    return contents 
```

问题是`.read()`在标记的行上添加呼叫

```
 contents[fname] = tar.extractfile(members[idx]) #<--- HERE 
```

将给出错误：

> tarfile.StreamError：不允许向后搜索

那么如何获取文件的内容呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T09:08:54.840

您拼错了`mode=`参数，而是写了`more=`：

```
tar = tarfile.open(fileobj=p.stdout, mode='r|') 
```

`.tell()`如果您正确指定模式，将不会被调用。:-)

然后，您必须*遍历*tarfile 对象以提取成员，您不能从 tarfile 中读取任意文件：

```
for entry in tar:
    # test if this is a file you want.
    if entry.name in files:
        f = tar.extractfile(entry) 
```

您不能使用任何`.getnames()`、`.getmember()`或`.getmembers()`方法，因为这些方法需要对文件进行全面扫描，将文件指针放在末尾，让您无法读取条目数据本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T10:39:33.643

对于任何有兴趣的人：

```
def get_files_from(sha, files):
    from subprocess import Popen, PIPE
    import tarfile
    p = Popen(["git", "archive", sha], bufsize=10240, stdin=PIPE, stdout=PIPE, stderr=PIPE)
    tar = tarfile.open(fileobj=p.stdout, mode='r|')
    p.communicate()
    contents = {}
    doall = files == '*'
    if not doall:
        files = set(files)
    for entry in tar:
        if (isinstance(files, set) and entry.name in files) or doall:
            tf = tar.extractfile(entry)
            contents[entry.name] = tf.read()
            if not doall:
                files.discard(entry.name)

    if not doall:
        for fname in files:
            contents[fname] = None

    tar.close()
    return contents

print get_files_from("a8c11fcee68881dfb86095aa36290fb304047cf1", ['README.MD', 'foo'])
print get_files_from("a8c11fcee68881dfb86095aa36290fb304047cf1", '*') 
```

欢迎补丁！

# css - 类更改时从“显示：无”的CSS过渡？

> ID：13667827
> 
> 赞同：50
> 
> 时间：2012-12-02T09:01:55.040
> 
> 标签：css, css-transitions

我已经开始使用过渡来“现代化”网站的感觉。到目前为止，`:hover`过渡效果很好。现在我想知道是否可以根据其他事情触发转换，例如当类发生变化时。

这是相关的CSS：

```
#myelem {
    opacity: 0;
    display: none;
    transition: opacity 0.4s ease-in, display 0.4s step-end;
    -ms-transition: opacity 0.4s ease-in, display 0.4s step-end;
    -moz-transition: opacity 0.4s ease-in, display 0.4s step-end;
    -webkit-transition: opacity 0.4s ease-in, display 0.4s step-end;
}
#myelem.show {
    display: block;
    opacity: 1;
    transition: opacity 0.4s ease-out, display 0.4s step-start;
    -ms-transition: opacity 0.4s ease-out, display 0.4s step-start;
    -moz-transition: opacity 0.4s ease-out, display 0.4s step-start;
    -webkit-transition: opacity 0.4s ease-out, display 0.4s step-start;
} 
```

触发更改的 JavaScript 是：

```
document.getElementById('myelem').className = "show"; 
```

但这种转变似乎并没有发生——它只是从一种状态跳到另一种状态。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-02T09:40:17.420

当您删除`display`属性时，它确实有效。

```
#myelem {
    opacity: 0;
    transition: opacity 0.4s ease-in;
    -ms-transition: opacity 0.4s ease-in;
    -moz-transition: opacity 0.4s ease-in;
    -webkit-transition: opacity 0.4s ease-in;
}
#myelem.show {
    opacity: 1;
    transition: opacity 0.4s ease-out;
    -ms-transition: opacity 0.4s ease-out;
    -moz-transition: opacity 0.4s ease-out;
    -webkit-transition: opacity 0.4s ease-out;
}​ 
```

**[JSF](http://jsfiddle.net/ks8jD/)**中。

这样做的原因是只有带有数字的 CSS 属性才能被转换。你认为“50%的状态”应该在“ `display: none;`”和“ `display: block;`”之间是什么？由于无法计算，因此您无法为`display`属性设置动画。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-02T09:26:40.013

您不能使用该`display`属性在状态之间进行转换。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-25T11:20:06.640

@MarcoK 提供的答案（包括评论）已经表明了正确的方向。设置`display`属性*有碍* `transition`。
更好的*做法*是将无前缀（标准）版本放在浏览器供应商前缀版本之后，以便面向未来。后者的属性覆盖前者。
其他改进：

*   正如@Charmander 指出的那样，`-ms-transition`任何 Internet Explorer 都不支持
*   还有 Opera 的供应商前缀`-o-transition`为[Op 10.5-12 和 Op Mobile 10-12](http://caniuse.com/#search=transition)，目前可能只有不到 0.1% 的全球浏览器支持。我会把它放进去完成

CSS：

```
#myelem {
    opacity: 0;
    -webkit-transition: opacity .4s ease-in;
       -moz-transition: opacity .4s ease-in;
         -o-transition: opacity .4s ease-in;
            transition: opacity .4s ease-in;
}
#myelem.show {
    opacity: 1;
    -webkit-transition: opacity .4s ease-out;
       -moz-transition: opacity .4s ease-out;
         -o-transition: opacity .4s ease-out;
            transition: opacity .4s ease-out;
}​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-18T12:00:27.690

可以在 css 中动画显示和隐藏元素，而不是：

```
display: none;

/* and */

display: block; 
```

利用：

```
overflow: hidden;
max-height: 0;

/* and */

max-height: 9999999px; 
```

由于您替换了此属性，因此您可以使用 为任何 css 值设置动画`transition`。

工作示例： [https ://jsfiddle.net/utyja8qx/](https://jsfiddle.net/utyja8qx/)

# c# - Bouncy Castle API 文档在哪里？

> ID：13667828
> 
> 赞同：26
> 
> 时间：2012-12-02T09:01:59.457
> 
> 标签：c#, bouncycastle

我需要做一些基于密码学的工作，并且我发现了可用于 C# 和 Java 的 Bouncy Castle API，对于 Java，它有文档，但它没有 C# 文档。

任何人都可以提供一些资源，让我可以从那里获得将 Bouncy Castle 与 C# 结合使用的想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-02T09:47:38.317

我也找不到 Bouncy Castle API 的任何 C# 文档。好像不存在一样。

但你可以走这条路。下载库资源，然后稍微看一下。代码实际上看起来像 Java 代码，但差别很小：

1.  一些基类移至接口
2.  所有方法和属性都以“UpperCamelCase”命名

因此，您可以自由使用 Java 文档。最后，[在 C# 中使用它的一些示例](https://web.archive.org/web/20140324180459/http://elian.co.uk/post/2009/07/29/Bouncy-Castle-CSharp.aspx)。

另外，想补充一下，[这个问题的答案](https://stackoverflow.com/questions/5641326/256bit-aes-cbc-pkcs5padding-with-bouncy-castle#5641932)确实对我有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-22T09:44:03.987

[我在bouncyCastle 网站](https://downloads.bouncycastle.org/fips-csharp/BC-FNA-UserGuide-1.0.1.pdf)上找到了一些符合 FIPS 的 C# 版本的入门文档

也应该适用于非 FIPS 版本。

# c++ - 前进和前进有什么区别 (a) 和 (T&&)(a)

> ID：13667830
> 
> 赞同：9
> 
> 时间：2012-12-02T09:02:53.313
> 
> 标签：c++, c++11

```
template<typename T>  
void outer(T&& t) {inner(forward<T>(t));}  

template<typename T>  
void outer(T&& t) {inner((T&&)(t));} 
```

有什么区别？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T09:53:01.110

没有实际区别。`std::forward<T>(v)`被指定为`static_cast<T&&>(v)`。

`§20.2.3 [forward]`

```
template <class T> T&& forward(typename remove_reference<T>::type& t) noexcept;
template <class T> T&& forward(typename remove_reference<T>::type&& t) noexcept; 
```

> 2*返回：* `static_cast<T&&>(t)` .

C 风格的强制转换通过大多数 C++ 风格的强制转换来确定第一个有效的强制转换。其中一个是`static_cast`，这也是在这种情况下工作的第一个。

`§5.4 [expr.cast] p4`

> 执行的转换
> 
> *   一个`const_cast`（5.2.11），
> *   一个`static_cast`（5.2.9），
> *   a`static_cast`后跟 a `const_cast`,
> *   a `reinterpret_cast`(5.2.10)，或
> *   a`reinterpret_cast`后跟 a `const_cast`,
> 
> 可以使用显式类型转换的强制转换表示法来执行。[...] 如果转换可以用上面列出的一种以上的方式解释，则使用列表中第一个出现的解释，即使由该解释产生的转换是不正确的。

不过，我建议坚持使用`std::forward`. 从名称中可以清楚地看出意图，人们会比知道怪异`static_cast<T&&>`（甚至`(T&&)`）的作用更可能知道它的作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T09:38:35.237

没有有效的区别。以下是 VC++ 为右值引用定义 forward<> 的方式：

```
template<class _Ty> inline
    _Ty&& forward(typename remove_reference<_Ty>::type&& _Arg) _NOEXCEPT
    { // forward anything
        static_assert(!is_lvalue_reference<_Ty>::value, "bad forward call");
        return (static_cast<_Ty&&>(_Arg));
    } 
```

# c# - Wpf ItemSource 不更新可视控件

> ID：13667833
> 
> 赞同：0
> 
> 时间：2012-12-02T09:03:29.507
> 
> 标签：c#, wpf, data-binding, inotifypropertychanged

我正在使用 MVVM 模型，我有一个视图模型，其中包含一个可观察的 MyData 集合。此集合绑定到数据网格项目源。我使用 INotifyPropertyChanged 接口，并在编辑集合的某个项目后引发通知事件。然而，视觉控制没有更新，为了检查这一点，我在我的数据网格项目源中添加了一个转换器，所以在引发事件后，我使用新集合进入转换器！但视觉仍然没有得到更新，只有当我上下滚动或关闭并打开控件时。有任何想法吗？

# azure - 我应该何时重新打包我的 Azure 计算角色？

> ID：13667836
> 
> 赞同：2
> 
> 时间：2012-12-02T09:03:50.797
> 
> 标签：azure, visual-studio-2012, azure-web-roles, azure-worker-roles

首次设置 Azure Web / Worker 角色时，我需要“打包”项目并通过 Azure 门户上传。完成此操作后，我可以从 Visual Studio 中“发布”应用程序。

在什么情况下我需要再次“打包”项目并通过 Azure 门户对其进行更新？
换句话说 - 哪些更改需要重新打包项目？

注意：我需要“打包”项目才能通过 Azure 门户上传。当我在 Azure 中创建计算角色时，我必须上传一个包才能使计算角色运行。

从 Azure 门户：
*您没有将任何内容部署到生产环境。*
*上传新的生产部署。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T09:42:21.707

云服务包包含角色定义、配置设置、运行时位以及与您的应用程序捆绑的其他静态内容。Visual Studio（或 PowerShell）创建一个加密包（实际上是一个 zip 文件，在为模拟器构建时可以查看），以上传到您通过门户创建的命名槽。

将来，您可以在不重新构建包的情况下执行某些操作，例如更改实例计数和其他配置设置。另外：如果您将静态内容（例如 CSS、图像等）移动到 blob 存储，则可以直接更新这些内容，而无需重新创建/重新部署包（您可能需要向您的运行应用程序，重新加载一些资源，但这将是特定于应用程序的）。如果您有作为启动脚本的一部分安装的特定 exe 或 MSI，您也可以将它们移动到 blob 存储，因为它们可以在您的角色启动代码执行时轻松下载（这会减少包大小）。

如果您更改服务定义文件中专门定义的任何内容（例如，如果您添加角色或更改角色大小），您将不得不重新打包/重新部署（但您可以部署为更新，这不会让您的服务停止 [假设您有 2 个或更多实例] 或替换您分配的 IP 地址）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T09:26:45.870

我不认为你必须在第一次打包你的项目。您可以首次发布您的 Azure 项目。我不确定是什么阻止了您的发布。你能再解释一下吗。

事实上，发布与包非常相似。Visual Studio 刚刚打包项目并代表您将它们上传到 azure。

# php - preg_replace 的正则表达式

> ID：13667837
> 
> 赞同：3
> 
> 时间：2012-12-02T09:03:52.200
> 
> 标签：php, regex, preg-replace

我想建立一个模式来交换整数，这是唯一的事情

如果有一个单词与整数在同一行，我不想更改任何内容。

我试过`$pattern = '/(.)[0-9][0-9](.)/';` 了，但这对我来说效果不佳

例如，当我尝试时，`$pattern = '/1(.)2(.)3(.)/';`它将替换我将放入模式中的唯一单个数字

我想替换此示例主题

```
subject = "
1
2
3
4
5
6
7
8
9
10
" 
```

数字必须是整数而不是小数，其中一个是随机的，但不能有任何文本与数字在同一行？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T14:47:02.147

正则表达式不是解决所有编程问题的魔杖。

在这种情况下，听起来您实际上想要在`explode()`上拆分主题`\n`，然后将线条作为数组操作，然后使用 重新创建主题`implode()`。`$lines[$x]`当它们是和时，处理两条线要容易得多`$lines[$y]`。

此外，如果这些行来自 HTML，那么您不希望使用正则表达式来解析 HTML。相反，您想使用 PHP DOM 模块。 [http://php.net/manual/en/book.dom.php](http://php.net/manual/en/book.dom.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T12:13:06.467

你需要的是多线模式`m`。如果您使用它，则在每行`^`的开头`$`匹配并在每行末尾匹配。然后`\d+`用于任意长的整数：

```
/^[ \t]*\d+[ \t]*$/m 
```

除了`[ \t]*`数字之外，还允许任意数量的空格和制表符。请注意，这将删除空格以及数字。如果要保留空格，请使用

```
/^([ \t]*)\d+([ \t]*)$/m 
```

并将您的替换字符串更改为

```
$1yourReplacementString$2 
```

**编辑：**

我现在意识到您没有换行符，例如`\r`or`\n`或`\r\n`but`<br>`标签。这使它变得更加困难。像这样的东西应该涵盖大多数情况：

```
~((?:^|<br[ ]*/?>)[ \t]*)\d+([ \t]*(?:$|<br\b))~ 
```

同样，您需要在替换字符串周围添加`$1`和`$2`周围以不删除`<br>`标签。

但正如安迪所说，不应该使用正则表达式来处理 HTML。要么使用 PHP 提供的内置 DOM 模块，要么使用像[这样](http://simplehtmldom.sourceforge.net)的一些 3rd 方库。

# c++ - 使用 iostream 解决的分段错误

> ID：13667838
> 
> 赞同：4
> 
> 时间：2012-12-02T09:04:03.550
> 
> 标签：c++, segmentation-fault, iostream

所以这很粗糙。我有一段代码使用了 Columbia Physics System c++ 库。运行时出现段错误，很可能是因为类：CgArg 和向量 f_field_in 等未初始化。我使用了 Valgrind，发现确实各种参数都指向无效的内存。

奇怪的是，如果我在两个函数的任何位置插入 iostream 调用，段错误就会消失。当我将标志放在要调试的地方时，我发现了。如果我定义一个整数并编写一个简单的 cin >>，它也不会出现段错误。这就是为什么我认为这与 iostream 有关。

如果您知道调用 iostream 会以某种方式为参数提供代码片段的任何原因，如果您与我分享，我将非常感激。

```
#include <iostream>
using namespace std;

#include <config.h>
#include <util/lattice.h>
#include <util/dirac_op.h>
#include <util/gjp.h>
#include <interface.h>

#define CLOVER_MAT_SIZE 72

USING_NAMESPACE_CPS

// Same function for clover matrix and its inverse.
static
void interface(double *h_quda_clover, double *h_cps_clover)
{
  h_quda_clover[0]=h_cps_clover[0];  // c00_00_re = C0.x, A0 
```

......还有更多这样的东西......

```
 h_quda_clover[35+36]=h_cps_clover[34+36];  // c32_31_im = C8.w, A5
}

static
void fill_h_clover_inv(Lattice &lat, int site[], double *h_quda_clover_inv_site)
{
  double h_cps_clover_inv[72];
  Vector *f_field_out, *f_field_in;
  CgArg *arg;
  CnvFrmType convert=CNV_FRM_NO;
  DiracOpClover dirac(lat,f_field_out,f_field_in,arg,convert);
  //cout << "B: " << site << endl;
  //cout << "B: site: " << site[0] << ' ' << site[1] << ' ' << site[2] << ' ' <<         site[3] << endl;
  dirac.SiteCloverMat(site,h_cps_clover_inv);
  interface(h_quda_clover_inv_site,h_cps_clover_inv);
}

void fill_h_clover_inv_all(Lattice &lat, double *h_quda_clover_inv, int parity)
{
  double *ptr=h_quda_clover_inv;
  int nsites[4];
  nsites[0]=GJP.XnodeSites();
  nsites[1]=GJP.YnodeSites();
  nsites[2]=GJP.ZnodeSites();
  nsites[3]=GJP.TnodeSites();
  int site[4];
  cout << "A: " << site << endl;
  for (site[3] = 0; site[3] < nsites[3]; ++(site[3])) {
    for (site[2] = 0; site[2] < nsites[2]; ++(site[2])) {
      for (site[1] = 0; site[1] < nsites[1]; ++(site[1])) {
        site[0] = (site[3] + site[2] + site[1] + parity)%2;
        for (; site[0] < nsites[0]; site[0] += 2) {
  //cout << "A: site: " << site[0] << ' ' << site[1] << ' ' << site[2] << ' ' <<     site[3] << endl;
          fill_h_clover_inv(lat,site,ptr);
          ptr += CLOVER_MAT_SIZE;
        }
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:58:09.560

问题在于一些未初始化的参数被传递给 DiracOpClover。一旦我们正确初始化了 CgArg，

```
CgArg cg_arg;
cg_arg.mass=1.0 
```

一切都很棒！

感谢大家的帮助。

# angularjs - Jasmine 和 angularjs，不能为服务存根 $httpBackend

> ID：13667841
> 
> 赞同：7
> 
> 时间：2012-12-02T09:04:36.687
> 
> 标签：angularjs, jasmine

存根 $httpBackend 后，我似乎无法返回预期的结果，也不知道测试出了什么问题。你能看看这个失败的最小例子吗？

### 与演示链接

[http://jsfiddle.net/paos/kTNF5/](http://jsfiddle.net/paos/kTNF5/)

### 茉莉花输出

```
query() Expected [ ] to equal [ { hello : 'world' } ]. 
```

### 代码

依赖资源

```
<script src="https://raw.github.com/pivotal/jasmine/master/lib/jasmine-core/jasmine.js"></script>
<script src="https://raw.github.com/pivotal/jasmine/master/lib/jasmine-core/jasmine-html.js"></script>

<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular-resource.min.js"></script>
<script src="http://code.angularjs.org/1.0.1/angular-mocks-1.0.1.js"></script> 
```

测试 javascript

```
var mod = angular.module('mod', ['ngResource']);                                                                                                                               

mod.factory('Brief', function($resource) {
   var Brief = $resource('http://some_test/:id');                                                                                                                              
   return Brief;                                                                                                                                                               
});                                                                                                                                                                            

beforeEach(function() {
    module('mod');                                                                                                                                                             

    inject(function($injector) {
        resource = $injector.get('$resource');                                                                                                                                 
        $httpBackend = $injector.get('$httpBackend');                                                                                                                          
        Brief = $injector.get('Brief');                                                                                                                                        
    });                                                                                                                                                                        

});                                                                                                                                                                            

afterEach(function() {
    $httpBackend.verifyNoOutstandingExpectation();                                                                                                                             
    $httpBackend.verifyNoOutstandingRequest();                                                                                                                                 
});                                                                                                                                                                            

describe("Brief", function() {
    it("query()", function() {
        var getRequest = 'http://some_test';                                                                                                                                   
        var fakeGetResponse = [{
            "hello": "world"}];                                                                                                                                                

        $httpBackend.when('GET', getRequest).respond(fakeGetResponse);                                                                                                         

        var briefs = Brief.query();                                                                                                                                            
        expect(briefs).toEqual(fakeGetResponse);                                                                                                                               
        $httpBackend.flush();                                                                                                                                                  
    });                                                                                                                                                                        
});                                                                                                                                                                            

// KICK OFF JASMINE
var jasmineEnv = jasmine.getEnv();                                                                                                                                             
var trivialReporter = new jasmine.TrivialReporter();                                                                                                                           

jasmineEnv.addReporter(trivialReporter);                                                                                                                                       

jasmineEnv.specFilter = function(spec) {
    return trivialReporter.specFilter(spec);                                                                                                                                   
};                                                                                                                                                                             

jasmineEnv.execute();​ 
```

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-02T09:29:34.000

您已经快到了，但您的测试中仍然存在 2 个问题：

*   `$httpBackend`在刷新之前验证了期望。它是`$httpBackend.flush();`模拟传入响应的
*   在您的期望中，您正在比较对象实例（而不是它们的值），但 AngularJS`$resource`将创建一个新数组，如[https://stackoverflow.com/a/11966512/1418796](https://stackoverflow.com/a/11966512/1418796)中所述。您需要比较对象的值而不是引用。这样做的一种方法是：`expect(angular.equals(briefs, fakeGetResponse)).toBeTruthy();`

最后这里是一个测试通过的 jsFiddle：http: [//jsfiddle.net/VFqFU/](http://jsfiddle.net/VFqFU/)

# mysql - 加快 SQL 查询速度

> ID：13667843
> 
> 赞同：1
> 
> 时间：2012-12-02T09:04:43.093
> 
> 标签：mysql, sql, performance

我已将温度存储在 MySQL 数据库中。该表称为`temperatures`。例如，它包含列`dtime`和`temperature`。第一个是测量温度的时间（列类型是`DATETIME`），而后者显然是温度（类型是`FLOAT`）。

目前，我使用以下查询来获取某个时间段内的温度。

```
SELECT dtime, temperature 
FROM temperatures 
WHERE dtime BETWEEN "2012-11-15 00:00:00" AND "2012-11-30 23:59:59" 
ORDER BY dtime DESC 
```

我想在结果中添加一天的平均温度。我尝试了以下。

```
SELECT 
    dtime AS cPVM,
    temperature,
    (
        SELECT AVG(temperature) 
        FROM temperatures 
        WHERE DATE(dtime) = DATE(cPVM)
    ) AS avg
FROM temperatures 
WHERE dtime BETWEEN "2012-11-15 00:00:00" AND "2012-11-30 23:59:59" 
ORDER BY dtime DESC 
```

工作正常，但这真的，真的很慢。在此期间获取结果大约需要 5 秒，而第一个（没有平均值）在 0.03 秒内完成。

```
SELECT DATE(dtime), AVG(temperature) 
FROM temperatures 
WHERE DATE(dtime) BETWEEN "2012-11-15" AND "2012-11-30" 
GROUP BY DATE(dtime) 
ORDER BY dtime DESC 
```

然而，这个是在 0.04 秒内完成的。

如何更有效地获取平均温度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T09:09:05.590

使用连接而不是相关子查询：

```
SELECT dtime, temperature, avg_temperature
FROM temperatures 
JOIN (
    SELECT DATE(dtime) AS date_dtime, AVG(temperature) AS avg_temperature
    FROM temperatures
    WHERE dtime >= '2012-11-15' AND dtime < '2012-12-01'
    GROUP BY DATE(dtime)
) AS avg_t
ON date_dtime = DATE(dtime)
WHERE dtime dtime >= '2012-11-15' AND dtime < '2012-12-01'
ORDER BY dtime DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T09:24:58.907

由于您的第一个查询已经非常有效，让我们以它为起点。根据它生成的结果集的大小，查询第一个查询的结果仍然非常有效。

您的第三个查询似乎也非常有效地运行，因此如果我提出的查询执行得不够好，您可以退回到该查询。我喜欢它的原因是因为您可以将原始查询作为排序参数（减去`ORDER BY`）并将其插入到这个参数中，它显示了原始查询日期范围内的平均温度：

```
SELECT
    DATE(dtime) AS day_of_interest,
    AVG(temperature) AS avg_temperature
FROM
    (
        -- Your first query is here, minus the ORDER BY clause
        SELECT 
            dtime,
            temperature 
        FROM 
            temperatures 
        WHERE 
            dtime BETWEEN "2012-11-15 00:00:00" AND "2012-11-30 23:59:59" 
        -- ORDER BY irrelevant inside subqueries, only slows you down
        -- ORDER BY 
            -- dtime DESC
    ) AS temperatures_of_interest
GROUP BY
    day_of_interest
ORDER BY
    day_of_interest DESC 
```

如果此查询对您来说运行“足够高效”™，那么这可能是一个比其他一些更容易编码和自动化的解决方案。

希望这可以帮助！

# oracle - oracle中sql server TOP的替代

> ID：13667845
> 
> 赞同：0
> 
> 时间：2012-12-02T09:05:34.783
> 
> 标签：oracle, oracle10g

如何在 oracle pl sql 中获取前 3 条记录？我是 oracle 的新手，之前我使用过 sql server。

我的要求是获得 X 列的前 3 条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T09:12:14.363

试试这个从查询中检索前 N 条记录，您可以使用以下语法::-

```
 SELECT *
 FROM (your ordered query) alias_name
 WHERE rownum <= Rows_to_return 
```

例子：-

```
SELECT *
 FROM (select * from suppliers ORDER BY supplier_name) suppliers2
 WHERE rownum <= 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T09:08:12.463

这可能会帮助你

```
SELECT ename, sal 
  FROM ( SELECT ename, sal, RANK() OVER (ORDER BY sal DESC) sal_rank
           FROM emp ) 
 WHERE sal_rank <= 3; 
```

# javascript - 如何识别从asp.net中的javascript方法（不是按钮）到达的submit（）

> ID：13667848
> 
> 赞同：0
> 
> 时间：2012-12-02T09:06:15.697
> 
> 标签：javascript, asp.net

我有一个用户列表，在表中每一行的末尾我添加了两个链接（“href”）：一个用于“更新”用户，第二个用于“删除”用户。因此，为了启用，我添加了一个对 javascript 函数的调用，该函数捕获用户的 ID 并将其插入到我之前创建的某个表单（只有一个“隐藏”字段的表单），然后该函数激活了对服务器的 submit() 操作部分（asp.net 代码）。

我检查了 submit() 操作正常（检查了 respons.write()...）

但是我知道如何通过询问提交按钮的值来识别 IsPost 中的提交表单按钮（例如： if(Request.Form["ExpertButton"]== "delete"){..some code here... .})

但是当我用 javascript 激活 submit() 时，我怎么能识别帖子？我尝试使用 hiiden 字段的值，但它没有捕捉到它，它跳过了 if 语句......

用户代码列表：

```
foreach(var row in db.Query(displayExperts,nameOfExpert))
                {
                <tr>
                    <td class="dispExpertActScreen">@row.ExpertID</td>
                    <td class="dispExpertActScreen">@row.name</td>
                    <td class="dispExpertActScreen">@row.password</td>
                    <td class="dispExpertActScreen">@row.allowBonds</td>
                    <td class="dispExpertActScreen">@row.allowStocks</td>
                    <td class="dispExpertActScreen">@row.allowExchangeTraded</td>
                    <td class="dispExpertActScreen">@row.allowMutualFund</td>
                     <td class="dispExpertActScreen"><a href="#" onclick="expertToDelete('@row.ExpertID') ;return false;" style="color: #b04e4e">update</a></td>
                    <td class="dispExpertActScreen"><a href="#" onclick="expertToDelete('@row.ExpertID') ;return false;" style="color: #b04e4e">delete</a></td>
                </tr>
                } 
```

表格代码：

```
<form method="post" name="deleteExpert" style="font-size: medium; margin-top: 10%" dir="rtl">
    <input type="hidden" name="expertID" id="expertID" value="">
</form> 
```

javascript代码：

```
<script>

    function expertToDelete(expertID) {

        document.getElementById('expertID').value = expertID;
        document.getElementById('deleteExpert').submit ();
    }

</script> 
```

asp.net 代码：

```
@{
    var db = Database.Open("MyProjectSite");
    var display="no";
    var displayExperts="";
    var nameOfExpert="";
    var category="";
     if(IsPost)
    {
        if(Request.Form["ExpertButton"]== "search")// this is by button!!!
        {
             some code.....

        }

       //Response.Write("^^^^^^^^^^^^^^^^^^^^^");
        if(Request.Form["ExpertButton"] != "")// this need to be by javascript submit() method !!! here I need to recognize it.
        {
           var id=Request.Form["expertID"];
           Response.Write("^^^^^^^^^^^^^^^^^^^^^"+id);
           var deleteQuery="DELETE FROM InvestmanExperts WHERE ExpertID=@0";
           db.Execute(deleteQuery,id);
        }
    }
    db.Close();
} 
```

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T09:28:12.763

为什么不放置另一个隐藏的输入值：

```
<input type="hidden" name="txtJavascriptMode" id="txtJavascriptMode" value=""> 
```

然后在您的 javascript 代码中：

```
<script>
    function expertToDelete(expertID) {

        document.getElementById('expertID').value = expertID;
        document.getElementById('txtJavascriptMode').value = 'true';
        document.getElementById('deleteExpert').submit ();
    }
</script> 
```

在您的服务器端，您可以结帐

```
if(Request["txtJavascriptMode"] == "true")
{} 
```

# php - 在 yii 中加载 ajax 时发生内部服务器错误

> ID：13667851
> 
> 赞同：0
> 
> 时间：2012-12-02T09:06:35.617
> 
> 标签：php, yii

我在加载 Ajax 时遇到问题，我知道通过 Tamper Data 获取请求的截图：

[http://up.arabseyes.com/uploads/02_12_1213544389861.jpg](http://up.arabseyes.com/uploads/02_12_1213544389861.jpg)

结果是：内部服务器错误。我的代码有什么问题？

看法 ：

```
<?php
/* @var $this UsersController */
/* @var $model Users */
/* @var $form CActiveForm */
?>

<div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'users-index-form',
    'enableAjaxValidation'=>false,
)); ?>

    <?php echo $form->errorSummary($model); ?>

    <div class="row">
        <?php echo $form->labelEx($model,'الأسم الأول'); ?>
        <?php echo $form->textField($model,'first_name'); ?>
        <?php echo $form->error($model,'الأسم الاول'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'العائلة'); ?>
        <?php echo $form->textField($model,'last_name'); ?>
        <?php echo $form->error($model,'العائلة'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'كلمة المرور'); ?>
        <?php echo $form->passwordField($model,'password'); ?>
        <?php echo $form->error($model,'password'); ?>
    </div>
    <div class="row">
        <?php echo $form->labelEx($model,'تأكيد كلمة المرور'); ?>
        <?php echo $form->passwordField($model,'passwordconfirm'); ?>
        <?php echo $form->error($model,'passwordconfirm'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'البريد الإلكتروني '); ?>
        <?php echo $form->textField($model,'email'); ?>
        <?php echo $form->error($model,'email'); ?>
    </div>
        <div class="row">
        <?php echo $form->labelEx($model,'تأكيد البريد الإلكتروني'); ?>
        <?php echo $form->textField($model,'emailconfirm'); ?>
        <?php echo $form->error($model,'emailconfirm'); ?>
    </div>

        <div class="row">
        <?php echo $form->labelEx($model,'تاريخ الميلاد'); ?>
    <?php

$this->widget(
    'ext.jui.EJuiDateTimePicker',
    array(
        'model'     => $model,
        'attribute' => 'birth_date',
        'language'=> 'en',//default Yii::app()->language
         'mode'    => 'date',//'datetime' or 'time' ('datetime' default)
        'options'   => array(
        'dateFormat' => 'yy-mm-dd',
            //'timeFormat' => '',//'hh:mm tt' default
        ),
    )
);

?>

        <?php echo $form->error($model,'birth_date'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'الجنس'); ?>
        <?php echo chtml::activeDropDownList($model,'gender',$model->getStatusOption(),array('prompt'=>'أختر جنسك')
); ?>
        <?php echo $form->error($model,'gender'); ?>
    </div>

        <div class="row">
        <?php echo $form->labelEx($model,'البلد'); ?>
    <?php

    /*
     echo chtml::activeDropDownList($model,'country',$model->getcountry(),array('prompt'=>'اختر بلدك ')   , 
    array(
'ajax' => array(
'type'=>'POST', //request type
'url'=>CController::createUrl('current/dynamiccities'), //url to call.
//Style: CController::createUrl('currentController/methodToCall')
'update'=>'#city', //selector to update
//'data'=>'js:javascript statement' 
//leave out the data key to pass all form values through
))

    ); 

    */
    echo CHtml::activedropDownList($model,'country',$model->getcountry(),

    array(
'ajax' => array(
'type'=>'POST', //request type
'url'=>CController::createUrl('Register/dynamiccities'), //url to call.
//Style: CController::createUrl('currentController/methodToCall')
'update'=>'#city', //selector to update
//'data'=>'js:javascript statement' 
//leave out the data key to pass all form values through
))
    );

    ?>

        <?php echo $form->error($model,'country'); ?>
    </div>
    <div class="row">
        <?php echo $form->labelEx($model,'المدينة'); ?>
        <?php 
       //empty since it will be filled by the other dropdown
echo CHtml::dropDownList('city','', array());
 ?>
        <?php echo $form->error($model,'city'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'رمز الاتصال'); ?>
        <?php echo $form->textField($model,'mobile_code'); ?>
        <?php echo $form->error($model,'mobile_code'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'رقم الجوال'); ?>
        <?php echo $form->textField($model,'mobile_number'); ?>
        <?php echo $form->error($model,'mobile_number'); ?>
    </div>

    <div class="row buttons">
        <?php echo CHtml::submitButton('تسجيــــــــــــل'); ?>
    </div>

<?php $this->endWidget(); ?>

</div><!-- form --> 
```

控制器 ：

```
....
public function actionDynamiccities() /// call Ajax
{

 $data=Cities::model()->findAll('country=:country_id', 
                  array(':country_id'=>(int) $_POST['country']));

    $data=CHtml::listData($data,'id','city_name_e');
    foreach($data as $value=>$name)
    {
        echo CHtml::tag('option',
                   array('value'=>$value),CHtml::encode($name),true);
    };

}  
   .... 
```

提前致谢 。

# java - 为什么 Pattern.quote 总是返回带引号的字符串？

> ID：13667859
> 
> 赞同：2
> 
> 时间：2012-12-02T09:08:20.077
> 
> 标签：java, regex, optimization, pattern-matching

Pattern.quote("pattern") 返回`\Qpattern\E`。如果字符串中没有元字符，是否真的有必要将字符串字面化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T09:13:44.183

不，这不是必需的，但这就是实施者选择做的事情，可能是为了简化实施，并且因为不必要的成本`\Q`而且`\E`相当小。

在我的 JDK 中，唯一关心的`Pattern.quote()`是模式中是否已经存在。它不寻找任何其他特殊字符。`\Q``\E`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T09:15:23.980

我的猜测是它更简单，更有效。与其进行第一次检查是否有元字符，然后再进行第二次引用它们，只需假设存在元字符并始终引用。

# javascript - jQuery .blur() 事件未触发

> ID：13667864
> 
> 赞同：3
> 
> 时间：2012-12-02T09:09:09.817
> 
> 标签：javascript, jquery, html, forms

我有一个简单的登录表单，如下所示，附带一个 jQuery 脚本。我正在尝试使用 jQuery 进行一些简单的客户端表单验证。但是，我似乎无法触发模糊事件。我想不出我做错了什么，我尝试使用 '.on('blur', fn(){})' 但这也不起作用。请帮忙！

这是我的 HTML 文件：

```
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>DMIT 222 - Catalogue Project: Admin Login</title>
        <link rel="stylesheet" type="text/css" href="../styles/divs.css" />
        <link rel="stylesheet" type="text/css" href="../styles/fonts.css" />
        <link rel="stylesheet" type="text/css" href="../styles/tags.css" />
        <link rel="stylesheet" type="text/css" href="../styles/tables.css" />
        <link rel="stylesheet" type="text/css" href="styles/forms.css" />
        <script src="http://code.jquery.com/jquery-latest.js"></script>
        <script src="../scripts/loginFormValidation.js"></script>
    </head>
    <body>
        <div id="wrapper">
            <header>
                <h1>Ship Catalogue</h1>
            </header>
            <div id="mainContent">
                <form id="LoginForm" name="LoginForm" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
                    <div class="FormRow"><label for="Username">Username:</label><input type="text" name="Username" id="Username" /><p id="userErrors"><?php echo $userErrors; ?></p></div>
                    <div class="FormRow"><label for="Password">Password:</label><input type="password" name="Password" id="Password" /><p id="passwordErrors"><?php echo $passwordErrors; ?></p></div>
                    <div class="FormRow"><input type="submit" name="Submit" value="Login!" /></div>
                </form>
            </div>
            <footer>
                <a href="http://www.logicanddesign.ca/">Site Developed by Logic &amp; Design</a>
            </footer>
        </div>
    </body>
</html> 
```

这是 loginFormValidation.js 脚本：

```
$("#Username").blur(function(e){
    alert();
    if ($("#Username").val() == "") {
        $("#userErrors").text("Username must be entered!");
    }
});

$("#Password").blur(function(e){
    if ($("#Password").val() == "") {
        $("#passwordErrors").text("Password must be entered!");
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T09:11:44.403

您需要将事件包装在 jQuery 的 document.ready 函数中：

```
$(document).ready(function() {
    $("#Username").blur(function(e){
       alert();
        if ($("#Username").val() == "") {
            $("#userErrors").text("Username must be entered!");
        }
    });

    $("#Password").blur(function(e){
        if ($("#Password").val() == "") {
            $("#passwordErrors").text("Password must be entered!");
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T09:13:11.283

如果您添加一些内容来提醒它，它会起作用。JS 引擎抛出错误，因为在没有参数的情况下调用了警报函数。我还建议将事件与`document.ready()`

```
$(document).ready(function(){
    $("#Username").blur(function(e){
        alert("something");
        if ($("#Username").val() == "") {
            $("#userErrors").text("Username must be entered!");
        }
    });
}); 
```

示例：http: [//jsfiddle.net/PfnGv/](http://jsfiddle.net/PfnGv/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T09:13:43.737

要么在里面添加你的 jquery 模糊代码

```
$(document).ready(function() { ...// your blur code here } 
```

或在您的页面底部结束**正文**标记上方，例如：

```
<script type="text/javascript">
//your blur code
</script>

</body> 
```

# c++ - opencv imshow 导致内存泄漏（c++）

> ID：13667869
> 
> 赞同：1
> 
> 时间：2012-12-02T09:09:46.707
> 
> 标签：c++, opencv, memory-leaks

我写了这个方法（它显示一个图像）：

```
void ImageLoader::displayMyImage()
{
    namedWindow("new_Window1");
    imshow("new_window1", m_image);
    waitKey(2);
} 
```

m_image 是**Mat**类型。

我也使用这个析构函数：

```
ImageLoader::~ImageLoader()
{
    m_image.release();
} 
```

然而，Valgrind 发现了大量的内存泄漏。这是由这两个 cv 函数引起的： **namedWindow**和**imshow**（因为不调用 displayMyImage() 就没有任何泄漏）。有没有办法解决它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T14:31:20.493

您的第一个问题是您命名命名窗口的方式不同： **`"new_Window1"`不同于`"new_window1"`**. 其次，我告诉你我从来没有使用过namedWindow，你只需要使用imshow在一个名为的图像窗口中显示图像`"new_window1"`。

**备注1：**您不必担心显式释放`m_image`，这就是 Mat 首先要做的。

**Remark2：** `waitKey(0)`永远持有窗口。

我以前在这里看到过这个问题，所以我想你也可以在这里搜索答案。

# git - 如何标记 git 修订，然后列出标记的修订

> ID：13667876
> 
> 赞同：2
> 
> 时间：2012-12-02T09:11:46.943
> 
> 标签：git

我想在 git repo 中标记我的一些修订，然后列出被标记的修订。请指教，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T09:17:41.193

`git tag <tagname> <commit>`创建一个指向提交的标签。`git tag`将列出所有标签，`git show <tagname>`并为您提供有关指向的提交的详细信息。该`show`命令适用于任何[treeish](http://schacon.github.com/gitbook/4_git_treeishes.html)。

此外，您应该真正阅读文档。这是一个相当简单的问题，您只需浏览文档即可得到答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T09:17:52.270

`git tag <tag name>`要创建一个标签，如果你想为以前的版本创建一个标签，你可以 git checkout 然后 git tag。更多信息在这里：[http ://www.kernel.org/pub/software/scm/git/docs/git-tag.html](http://www.kernel.org/pub/software/scm/git/docs/git-tag.html)

列出所有标签`git tag -l`

# mysql - MySql 无限循环

> ID：13667878
> 
> 赞同：1
> 
> 时间：2012-12-02T09:12:02.990
> 
> 标签：mysql, sql, mysql-workbench

我对 MySQL 有点缺乏经验，所以请原谅我的幼稚。

我正在尝试根据 ISR id 号合并两个表，然后将该数据插入另一个表 adr。我正在 Workbench 5.2 中的 MySQL 数据库上运行 SQL 查询，如果我将代码限制如下，我的查询需要不到一秒钟的时间：

```
TRUNCATE adr;

INSERT into adr
(SELECT drug08q1.isr, drug08q1.drugname, reac08q1.pt 
FROM drug08q1
INNER JOIN reac08q1
ON drug08q1.isr = reac08q1.isr LIMIT 0,2815);

SELECT * FROM adr; 
```

如果我将限制增加到：

```
LIMIT 0,20816 
```

SQL 会说它永远运行并且永远不会结束。我不知道为什么将 LIMIT 增加超过某个随机阈值会导致无限循环。我可能做错了什么？

先感谢您！

# report - cognos 报告版本 10 中的条件隐藏问题

> ID：13667880
> 
> 赞同：0
> 
> 时间：2012-12-02T09:12:12.960
> 
> 标签：report, cognos, cognos-bi

我已经有一个条件块，它控制 10 个图表，如图表 1 .....基于块变量的图表 10`Chart`现在我必须有条件地隐藏图表 3，因为图表 3 的设计根据提示而有所不同`value = complex`。

所以我尝试使用样式变量和渲染变量来隐藏图表 3，我注意到这些条件只有在第二次单击提交按钮时才有效。在第一次运行期间，它没有正确渲染。

```
case when paramvalue='complex'
then 'Y'
else 'N'
end 
```

如果我尝试从查询中提取数据项，则会引发错误，因为它未在布局中引用。

我尝试了很多组合，但没有奏效。快速帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:01:38.627

> 它会抛出错误，因为它没有在布局中引用。

*通常*，您使用呈现对象（即列表、单例）的“属性”属性来定义不在列表中但需要引用的查询项。

这适用于列表，但通常不适用于图表或交叉表。如果您可以以某种方式将查询项压缩到图表上，则此错误将消失。

# android - 在 sqlite 表中执行删除行

> ID：13667885
> 
> 赞同：1
> 
> 时间：2012-12-02T09:12:55.980
> 
> 标签：android, sqlite

我有一个表调用 listTable 和 productTable 。我在 listTable 中执行 sqlite 删除功能，但我的编码有问题。在 productTable 内部有对 listTable 中主键的外键引用。

SQLiteHelper.java

```
 public class SQLiteHelper extends SQLiteOpenHelper {
            public static final String dbName = "shoppingDB1.db";
            public static final int dbVersion = 1;
            public static final String listTable = "ShoppingList";
            public static final String listId = "ShopingList_Id";
            public static final String listName = "ShopingList_Name";

            public static final String productTable = "Product";
            public static final String product_id = "Product_Id";
            public static final String productName = "Product_Name";
            public static final String product_FId = "Product_FId";
            private static final String CREATE_SHOPPLINGLIST_TABLE = "CREATE TABLE IF NOT EXISTS "
                    + listTable
                    + " ("
                    + listId
                    + " INTEGER PRIMARY KEY AUTOINCREMENT, "
                    + listName
                    + " TEXT ")";

            private static final String CREATE_PRODUCT_TABLE = "CREATE TABLE  IF NOT EXISTS "
                    + productTable
                    + " ("
                    + product_id
                    + " INTEGER PRIMARY KEY AUTOINCREMENT, "
                    + productName
                    + " TEXT, "+ product_FId
                + " INTEGER NOT NULL,   "
                             FOREIGN KEY ("
                + product_FId
                + ") REFERENCES "
                + listTable
                + " ("
                + listId
                + ")
         public void onCreate(SQLiteDatabase db) {
        db.execSQL(CREATE_SHOPPLINGLIST_TABLE);
        db.execSQL(CREATE_PRODUCT_TABLE);
}
        public void onOpen(SQLiteDatabase db) {
        super.onOpen(db);
        if (!db.isReadOnly()) {
            // Enable foreign key constraints
            db.execSQL("PRAGMA foreign_keys=ON;");
        }
    } 
```

ComicsData.java

```
public class ComicsData {
public ComicsData(Context context) {
        dbHelper = new SQLiteHelper(context);
    }

public void open() throws SQLException {
        database = dbHelper.getWritableDatabase();
    }
public void deleteList(String myid) {
        // TODO Auto-generated method stub
        String[] arg={myid};
        try{
        database.delete(SQLiteHelper.listTable, SQLiteHelper.listId+ " = ?",arg);
        }catch(Exception e){
            Log.e("cannot", e.toString());
        }
    } 
```

错误信息

```
12-02 17:27:46.232: E/error(21668): android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed 
```

如果列表中有产品，deleteList(String myid) 将显示错误。有谁知道我的问题是什么？应该是外键问题。我将 listId 传递给 deleteList(String myid)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T09:46:27.710

您的产品将列表 ID 作为外键。您不能删除包含产品的列表，因为所有具有该列表 id 作为外键的产品都将属于一个不存在的列表。

您已经对 ( ) 设置了约束，`db.execSQL("PRAGMA foreign_keys=ON;");`因此 SQLite 将不允许您这样做并抛出您看到的异常。

换句话说，该约束表示所有具有列表 ID 的产品都必须引用现有列表。

要解决此问题，您可以将所有引用您要删除的列表的 productTable.listIDs 清空。要自动执行此操作，请添加`ON DELETE SET NULL`到您的约束。

您应该阅读以下内容：

[http://www.sqlite.org/foreignkeys.html](http://www.sqlite.org/foreignkeys.html)

# iphone - 如何更改保存图像的文件夹路径？

> ID：13667889
> 
> 赞同：0
> 
> 时间：2012-12-02T09:13:32.047
> 
> 标签：iphone, objective-c, ios, ios5, ios6

我正在尝试更改保存图像的文件夹路径。（从 myfolder 到 yourfolder）
我编写的代码如下所示。

当我执行以下代码时，会发生错误。我认为它试图在更改之前从文件夹加载。

如何从更改的文件夹中加载图像文件？请帮忙。:o

```
// image loading.
UIImage *image1 = [UIImage imageNamed:@"alarm.png"];
UIImageView *imageView1 = [[UIImageView alloc] initWithImage:image1];
imageView1.center = CGPointMake(100, 100);
[self.view addSubview:imageView1];

// get document path.
NSFileManager *fileManager = [NSFileManager defaultManager];
NSArray *appsDirectory = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentPath = [appsDirectory objectAtIndex:0];

// create myFolder path.
NSString *myFolderPath = [documentPath stringByAppendingPathComponent:@"myFolder"];
if ([fileManager createDirectoryAtPath:myFolderPath withIntermediateDirectories:YES attributes:nil error:nil]){
    NSLog(@"success");
}
else {
    NSLog(@"failed");
}

// write image to saveImage@2x.png file.
NSData *imageData = [NSData dataWithData:UIImagePNGRepresentation(image1)];

NSString *saveName = @"saveImage@2x.png";
NSString *savePath = [myFolderPath stringByAppendingPathComponent:saveName];
[imageData writeToFile:savePath atomically:YES];

// load from saved the image1 to image2
UIImage *image2 = [UIImage imageWithContentsOfFile:savePath];

// change folderpath from myfolder to yourfolder
NSString *yourFolderPath = [documentPath stringByAppendingPathComponent:@"yourFolder"];
if ([fileManager moveItemAtPath:myFolderPath toPath:yourFolderPath error:NULL]){
    NSLog(@"USER folder success");
}
else {
    NSLog(@"USER folder fail");
}

// attach image2 to self.view
UIImageView *imageView = [[UIImageView alloc] initWithImage:image2];
imageView.center = CGPointMake(100, 200);
[self.view addSubview:imageView];

// it's occurs error. 
```

以下是日志列表。

2012-12-02 17:56:31.273 FolderTest[3372:11303] 成功
2012-12-02 17:56:31.277 FolderTest[3372:11303] USER 文件夹成功
ImageIO: CGImageRead_mapData 'open' failed '/Users/nice7285/Library /Application Support/iPhone Simulator/6.0/Applications/757CBD0E-CB49-4385-AF10-27322FB98381/Documents/myFolder/saveImage@2x.png' error = 2 (No such file or directory)
ImageIO: CGImageRead_mapData 'open' failed '/ Users/nice7285/Library/Application Support/iPhone Simulator/6.0/Applications/757CBD0E-CB49-4385-AF10-27322FB98381/Documents/myFolder/saveImage@2x.png' 错误 = 2（没有这样的文件或目录）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:34:56.897

我不太确定，但我有一些建议

尝试将创建文件夹行更改为如下所示

```
[fileManager createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:nil]; 
```

使用该函数写入数据

```
NSError *error;
[imageData writeToFile:savePath options:NSDataWritingAtomic error:&error]; 
```

我希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:41:46.300

这不是未创建目录的错误，而是由于您将图像保存到沙箱而没有分配而发生此错误

解决方案：-

```
// write image to saveImage@2x.png file.
NSData *imageData = [[NSData alloc]initWithData:UIImagePNGRepresentation(image1)];

NSString *saveName = @"saveImage@2x.png";
NSString *savePath = [myFolderPath stringByAppendingPathComponent:saveName];
[imageData writeToFile:savePath atomically:YES]; 
```

并且还使用分配的对象 ex 获取。

```
// load from saved the image1 to image2

UIImage *image2 = [[UIImage alloc] initWithContentsOfFile:savePath]; 
```

# javascript - JavaScript 在 Android WebView 中不起作用

> ID：13667890
> 
> 赞同：6
> 
> 时间：2012-12-02T09:13:40.600
> 
> 标签：javascript, android, webview

我想通过 webView 加载一个 url。网址是[http://wapp.baidu.com/f?kw=%BB%F0%BC%FD](http://wapp.baidu.com/f?kw=%BB%F0%BC%FD)，这个页面可以在系统默认浏览器上正常工作，但在我的 webView 中，一些 JavaScript 不能工作。JavaScript 已启用，我不知道它有什么问题。

我将不胜感激任何帮助。

```
private void initUI() {
    webView = (WebView) findViewById(R.id.web_view);
    webView.getSettings().setJavaScriptEnabled(true);

    final NavigationBar navigationBar = (NavigationBar) findViewById(R.id.navigationbar);
    navigationBar.refreshUI();
    navigationBar.rightButton.setImageResource(R.drawable.refresh);
    navigationBar.rightButton.setVisibility(View.VISIBLE);
    navigationBar.rightButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            refresh();
        }

    });

    navigationBar.leftButton.setImageResource(R.drawable.back);
    navigationBar.leftButton.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            webView.goBack();
        }

    });

    webView.setWebViewClient(new WebViewClient() {
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }

        public void onPageFinished(WebView view, String url) {
            navigationBar.leftButton.setVisibility(webView.canGoBack() ? View.VISIBLE
                    : View.INVISIBLE);
            super.onPageFinished(view, url);
        }
    });

    refresh();
} 
```

更新：问题已解决，只需添加以下代码：

```
webView.getSettings().setDomStorageEnabled(true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:31:27.737

如果您使用 proguard，它会停止运行 javascript。例如，在我的 proguard-project.txt 文件中，我有以下内容：

```
if your project uses WebView with JS, uncomment the following
# and specify the fully qualified class name to the JavaScript interface
# class:
#-keepclassmembers class fqcn.of.javascript.interface.for.webview {
#   public *;
#} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T08:47:00.140

我认为 javascript 文件缓存/刷新存在一些问题。我更改了 js 的文件名，它开始正常工作。

# mysql - 如果没有匹配的记录，MySql 查询以获取具有 NULL 的两列的所有组合

> ID：13667896
> 
> 赞同：4
> 
> 时间：2012-12-02T09:14:34.607
> 
> 标签：mysql, null, combinations

我有一个表，其中记录了服务器的停机时间。
我在 sqlfiddle 创建了这个表的简化版本。请看这里[sqlfiddle](http://www.sqlfiddle.com/#!2/8479e/8)
表有每条记录

```
Reason  Month   Down_Time
A       May     2
A       May     5
B       May     5
C       July    15
A       July    3
B       June    6
A       June    8
C       June    2 
```

如果没有匹配的记录，我需要编写一个查询来获取给月和原因的所有组合与 NULL
例如：如果我需要获取系统在 5 月、6 月和 7 月由于原因 A、B 的停机时间或 D.. 我期待的是..

```
Reason  Month   DOWNTIME
A       May     7
A       June    8
A       July    3
B       May     5
B       June    6
B       July    NULL
D       May     NULL
D       June    NULL
D       July    NULL 
```

由于我们在给定月份的记录中没有 D，它应该是 NULL
这是我的查询：

```
 SELECT Reasons.reason, Months.Month,sum( a.Down_time ) AS downtime
 FROM tabledown a
 RIGHT JOIN (
 SELECT 'A' AS reason
 UNION ALL SELECT 'B' AS reason
 UNION ALL SELECT 'D' AS reason
 ) Reasons
  ON a.reason = Reasons.reason
 RIGHT JOIN (
 SELECT 'May' AS month
  UNION ALL SELECT 'June' AS month
  UNION ALL SELECT 'July' AS month
 ) Months
 ON a.Month = Months.month
 GROUP BY Reasons.reason,Months.month
 ORDER BY Reasons.reason 
```

为什么我没有得到预期的输出:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T10:09:52.963

[正如预期的那样，您的第一个外部连接](http://www.sqlfiddle.com/#!2/8479e/19/0)会产生：

```
| 原因 | 月 |
------------------
| 一个 | 五月 |
| 一个 | 五月 |
| 一个 | 七月 |
| 一个 | 六月 |
| 乙| 五月 |
| 乙| 六月 |
| D | (空) |

```

*但是，因为如果至少*满足一次连接条件，外连接会产生结果（并且只有`NULL`在条件*从未*满足时才引入记录），所以[您的第二个外连接](http://www.sqlfiddle.com/#!2/8479e/20/0)*不会*产生 ; 的记录`(B, July)`。它也完全下降`Reason = 'D'`，因为加入条件没有得到满足（并且所有三个月都在其他地方得到满足）：

```
| 原因 | 月 |
------------------
| 一个 | 五月 |
| 一个 | 五月 |
| 乙| 五月 |
| 一个 | 六月 |
| 乙| 六月 |
| 一个 | 七月 |

```

虽然您*可以*`Reason = 'D'` [通过添加](http://www.sqlfiddle.com/#!2/8479e/21/0) 加入条件来解决损失`OR a.Month IS NULL`，但您仍然不会产生`(B, July)`. 相反，因为你想获得每一对`(Reason, Month)`，你必须用`CROSS JOIN`你的物化`Reasons`表和你的物化`Months`表：

```
SELECT Reason, Month
FROM   
  (
    SELECT 'A' AS Reason
    UNION ALL SELECT 'B'
    UNION ALL SELECT 'D'
  ) Reasons CROSS JOIN (
    SELECT 'May' AS Month
    UNION ALL SELECT 'June'
    UNION ALL SELECT 'July'
  ) Months 
```

```
| 原因 | 月 |
------------------
| 一个 | 五月 |
| 乙| 五月 |
| D | 五月 |
| 一个 | 六月 |
| 乙| 六月 |
| D | 六月 |
| 一个 | 七月 |
| 乙| 七月 |
| D | 七月 |

```

在[sqlfiddle](http://www.sqlfiddle.com/#!9/8479e/1/0)上查看。

然后，您只需要将结果与您的基础数据进行外部连接：

```
SELECT Reason, Month, SUM(Down_time) downtime
FROM   
  (
    SELECT 'A' AS Reason
    UNION ALL SELECT 'B'
    UNION ALL SELECT 'D'
  ) Reasons CROSS JOIN (
    SELECT 'May' AS Month
    UNION ALL SELECT 'June'
    UNION ALL SELECT 'July'
  ) Months
  LEFT JOIN tabledown USING (Reason, Month)
GROUP BY Reason, Month 
```

```
| 原因 | 月 | 停机时间 |
-----------------------------------------
| 一个 | 七月 | 3 |
| 一个 | 六月 | 8 |
| 一个 | 五月 | 7 |
| 乙| 七月 | (空) |
| 乙| 六月 | 6 |
| 乙| 五月 | 5 |
| D | 七月 | (空) |
| D | 六月 | (空) |
| D | 五月 | (空) |

```

在[sqlfiddle](http://www.sqlfiddle.com/#!9/8479e/2/0)上查看。

# java - 方波 DFT 在 PNg

> ID：13667898
> 
> 赞同：1
> 
> 时间：2012-12-02T09:14:43.363
> 
> 标签：java, image, matlab, data-compression, dft

所以更多细节：我开始写我的“学士学位论文”，这将是一些与图像压缩有关的东西

我想知道您是否知道任何尝试使用 PNG 格式的方波傅里叶级数（变换）作为滤波器而不是 haar 小波？会有什么好处吗？

如果您对我的论文有什么其他想法，那会有所帮助。我的时间范围是从现在到5-6月

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-01-28T19:57:07.587

证明 lu 分解是一个奇异矩阵。

# ruby - 如何防止 RSpec 隐藏缺少的依赖项？

> ID：13667900
> 
> 赞同：2
> 
> 时间：2012-12-02T09:14:54.813
> 
> 标签：ruby, rspec

我有一个 Ruby 程序在运行时失败，但是当我用 RSpec 测试它时可以工作。我知道错误的原因以及如何修复它（见下文），但我不知道如何构建一个失败的 RSpec 测试来证明错误的存在。

想象一下下面的 Ruby：

**foob​​ar.rb**

```
class Foobar
  attr_reader :fruit
  def initialize
    @fruit = Set.new ["Apple", "Banana", "Kiwi"]
  end
end 
```

上面的代码使用了**Set**，但它没有“要求 'set'”。这会导致它在运行时失败：

```
$ irb
> require './foobar.rb'
> f = Foobar.new
NameError: uninitialized constant Foobar::Set 
```

在修复疏忽之前，我想构建一个简单的 RSpec 测试来证明这个错误。我的测试如下所示：

**foob​​ar_spec.rb**

```
require 'rspec'
require './foobar.rb'

describe Foobar do
  it "can be initialized" do
    expect { Foobar.new }.to_not raise_error
  end
end 
```

运行测试，我惊讶地发现它通过了：

```
$ rspec foobar_spec.rb
.

Finished in 0.00198 seconds
1 example, 0 failures 
```

经过一番挖掘，我了解到 RSpec 会为自己加载**Set**。这导致**Set**可用于它测试的代码，在我的例子中隐藏了一个错误。

在我的测试中，我有“卸载/不需要”**设置的想法。**我最接近的是这段代码：

```
Object.send(:remove_const, :Set) 
```

这确实会导致测试失败，但不幸的是，它也阻止了 Set 被未来的“require”再次加载，这意味着即使我在 foobar.rb 中添加了**require 'set' ，它仍然会失败。**

有没有更好的方法在运行时卸载 gem？如果没有，我该怎么做才能使这个测试失败？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T09:49:59.930

```
require 'rspec'

describe 'foobar.rb' do
  it "can instantiate Foobar" do
    `ruby -e 'Foobar.new' -r./foobar.rb`
    $?.exitstatus.should == 0
  end
end 
```

适用于您提到的一种情况。也就是说，我不会推荐这种方法。为了涵盖引用类的所有情况，您需要以这种方式运行所有规范，因为类引用可能出现在代码中的任何位置。

# hbase - HBase 更新操作

> ID：13667901
> 
> 赞同：11
> 
> 时间：2012-12-02T09:15:00.540
> 
> 标签：hbase

1.  我是 HBase 新手，在 HBase 客户端 API 中发现不支持更新操作？那是对的吗？
2.  如果是这样，更新特定行键的值的建议最佳做法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-03T14:54:03.640

您可以使用 PUT 来创建或更新任何单元格的值。除非您希望新版本没有某些旧单元格，否则您不需要使用delete **。**

说我们有

```
r1:f1:c1:value1
r1:f1:c2:value2 
```

你可以输入 r1:f1:c1 新值，你会得到：

```
r1:f1:c1:new value 
r1:f1:c2:value2 
```

请注意，实际上每个单元格都存储为行键、列族、单元格、时间戳、版本和值。因此，根据您设置版本控制的方式（每个列族），您还可以访问旧值，包括执行时间点查询以查看已删除的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T09:32:06.890

我认为您想要做的是执行 Put 操作。您可以查看 HBase 的[Put API 客户端文档](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/Put.html)以及标题为：[Java 示例代码使用 HBase 数据模型操作](http://autofei.wordpress.com/2012/04/02/java-example-code-using-hbase-data-model-operations/)的一些示例和操作描述的博客文章。

要更新一行，您必须在单个 Mutation 中发出一系列“Delete”和“Put”，因此它们被视为外部更新。

有关如何构建此类调用的信息，请参阅[Class RowMutations 文档。](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/RowMutations.html)

# html - 禁用输入的值将数据发送到另一个页面的方式是什么？

> ID：13667904
> 
> 赞同：0
> 
> 时间：2012-12-02T09:15:24.487
> 
> 标签：html, input, disabled-input

我有一个表格，我想在禁用输入时发送数据。
是这样的。
我的代码是：

```
<form method="post" action="">
    <table class="tbl_wheader" style="width: 200px;">
        <tbody>
        <tr class="even">
            <td>
                state
            </td>
            <td>
                <input type="text" id="state_id" name="state_id" disabled="">
            </td>
        </tr>
        <tr class="even">
            <td>
            </td>
            <td>
                <input type="submit" value="ok" name="addschool">
            </td>
        </tr>
    </tbody> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T09:23:26.937

您可以将数据存储在`hidden`输入中

```
<input type="text" name="state_id" disabled="disabled" value="value" />
<input type="hidden" name="state_id" value="same value" /> 
```

或者你可以使用`readonly`属性

```
<input type="text" name="state_id" readonly value="value" /> 
```

# javascript - 强制在 javascript 中对自定义对象进行类型转换

> ID：13667905
> 
> 赞同：1
> 
> 时间：2012-12-02T09:15:29.910
> 
> 标签：javascript

假设我定义了 2 个构造函数和一个成员函数

```
function A() {}
function B() {}
A.prototype.a = function(){} 
```

我已经实例化了一个`B`. 如何强制转换使其成为`A`?

```
o = new B();
//What should I put here?
o.a(); 
```

我是 js 新手。而且我有一种感觉，`o`上面提到的是 a`A`还是 a`B`仅由对 a 的引用控制`prototype`。因此，我觉得类型转换应该是可能的。

欢迎回答，以及可以帮助我理解 js 对象的解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T09:18:39.253

对象的原型一旦创建就不能更改（即完全换出）（但是；在 JavaScript 的未来版本中，这可能是可能的）。

不过，JavaScript 中的对象具有极大的可塑性。你可以这样做，例如：

```
o.a = A.prototype.a; 
```

...然后`o`将具有该`a`功能。如果您想为其提供所有可枚举的属性`A.prototype`（包括*其*原型中的任何属性）：

```
var name;
for (name in A.prototype) {
    o[name] = A.prototype[name];
} 
```

函数的`prototype`属性是一个完全正常的、无聊的对象，分配给函数的正常、无聊的属性。当您使用`new`该函数（称为“构造函数”）创建对象时，该函数的`prototype`属性被分配给新创建的对象作为其底层原型（没有您可以在代码中访问的名称[尚未]） .

从 ES5 开始（在 Chrome、Firefox、Opera 和 IE9 中得到合理支持；在 IE8 和更早版本中不支持），您可以通过*获取*对象的原型[`Object.getPrototypeOf`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.2.3.2)，并且您可以创建对象并为其分配原型，而无需通过构造函数使用[`Object.create`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.2.3.5),但是一旦创建了对象，您就无法更改它的原型。

一些 JavaScript 引擎（如 Firefox 中的引擎）有一个当前非标准的扩展名`__proto__`，通过将其视为属性，您可以直接访问和操作对象的原型。例如：

```
o.__proto__ = A.prototype; 
```

...但这不是目前的标准。不过，它很可能是下一个标准的一部分。如果您对即将推出的 ES6 的信息感兴趣，可以[在此处](http://wiki.ecmascript.org/doku.php?id=harmony%3aspecification_drafts)找到规范草案等。

# c# - 右键单击从 WPF 中的 Dictionary<> 中删除 DataGrid

> ID：13667906
> 
> 赞同：0
> 
> 时间：2012-12-02T09:15:51.207
> 
> 标签：c#, wpf, dictionary, datagrid, mouseevent

我有一个 DataGrid，它从字典中接收它的值：

```
public class Files
        {
            public string File { get; set; }
            public string Duration { get; set; }
            public string Status { get; set; }           
        }

        Dictionary<Files, string> files = new Dictionary<Files, string>(); 
        DataGrid.ItemsSource = files.Keys; 
```

像这样以编程方式添加值：

```
private void AddFilesList(string addsrc, string addduration, string addstatus, string path)
        {
            files.Add(new Files
            {
                File = addsrc,
                Duration = addduration,
                Status = addstatus,

            }, path
               );
            DataGrid.Items.Refresh();  
        } 
```

现在我正在尝试将右键单击/删除添加到 DataGrid，这将从 Dictionary 中删除选定的值。

我使用 MVVM 模式来删除这样的值，这里是 XAML：

```
 <Grid>
    <Grid DataContext="{Binding Source={StaticResource EmpVM}}">
        <DataGrid AutoGenerateColumns="False" Height="287" 
              HorizontalAlignment="Left" Margin="23,12,0,0" 
              Name="DataGrid" VerticalAlignment="Top" Width="657" 
              SelectedIndex="{Binding Path=RecordIndex,Mode=TwoWay}">
            <DataGrid.ContextMenu>
                <ContextMenu>
                    <MenuItem Command="{Binding DeleteCommand}" 
        CommandParameter="{Binding RecordIndex}"  Header="Delete"/>
                </ContextMenu>
            </DataGrid.ContextMenu>
        </DataGrid>
    </Grid> 
```

现在的问题是“Selectedindex”反映了所选值的索引，而Dictionary<>没有索引。这我无法删除索引后的选定项目。我也不能使用 OrderedDictionary，因为我必须将一个类加载到字典中。

关于如何绑定 XAML 以从字典中删除所选项目的任何建议？

# java - 无法在未调用 Looper.prepare() Android 的线程内创建处理程序

> ID：13667912
> 
> 赞同：1
> 
> 时间：2012-12-02T09:18:04.993
> 
> 标签：java, android, android-asynctask

我正在使用 AsyncTask 调用 yahooweather API。以下是代码：

```
 public class myactivity extends Activity {
    final String yahooapisBase = "http://query.yahooapis.com/v1/public/yql?q=select*from%20geo.places%20where%20text=";
    final String yahooapisFormat = "&format=xml";
    String yahooAPIsQuery; ``EditText input_city;
EditText input_zip;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.myactivity);
    Button btn_findout = (Button) findViewById(R.id.btn_findout);
    input_city = (EditText) findViewById(R.id.input_cityOrcountry);
    input_zip = (EditText) findViewById(R.id.input_zip);

    // when Zip textbox has focus
    input_zip.setOnFocusChangeListener(new View.OnFocusChangeListener() {
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if (hasFocus) {
                String string = "";
                input_city.setText(string);
            }
        }
    });

    // when city/country textbox has focus
    input_city.setOnFocusChangeListener(new View.OnFocusChangeListener() {
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if (hasFocus) {
                String string = "";
                input_zip.setText(string);
            }
        }
    });

    // when findout button is clicked
    btn_findout.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // Perform action on click
            String uriPlace = Uri.encode(input_city.getText().toString());
            yahooAPIsQuery = yahooapisBase + "%22" + uriPlace + "%22"
                    + yahooapisFormat;
            Toast.makeText(getBaseContext(),
                    "Before entering into sub thread", Toast.LENGTH_LONG)
                    .show();
            new WeatherAPITask().execute(yahooAPIsQuery);
            Toast.makeText(getBaseContext(), "After sub thread",
                    Toast.LENGTH_LONG).show();
            Log.i("my label", "back in main thread...");
            // String woeidString = QueryYahooWeather(yahooAPIsQuery);
            // input_city.setText(woeidString);
        }
    });
}

private String QueryYahooWeather(String queryString) {

    String qResult = "";

    HttpClient httpClient = new DefaultHttpClient();

    HttpGet httpGet = new HttpGet(queryString);

    try {
        Log.i("WeatherApp", "digging into try block...");
        Log.i("queryString", queryString);
        HttpEntity httpEntity = httpClient.execute(httpGet).getEntity();

        if (httpEntity != null) {
            InputStream inputStream = httpEntity.getContent();
            Reader in = new InputStreamReader(inputStream);
            BufferedReader bufferedreader = new BufferedReader(in);
            StringBuilder stringBuilder = new StringBuilder();

            String stringReadLine = null;

            while ((stringReadLine = bufferedreader.readLine()) != null) {
                stringBuilder.append(stringReadLine + "\n");
            }

            qResult = stringBuilder.toString();
        }

    } catch (ClientProtocolException e) {
        e.printStackTrace();
        Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_LONG)
                .show();
    } catch (IOException e) {
        e.printStackTrace();
        Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_LONG)
                .show();
    } catch (Exception e) {
        e.printStackTrace();
        Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_LONG)
                .show();
    }
    Toast.makeText(getBaseContext(), "Returning from function",
            Toast.LENGTH_LONG).show();
    return qResult;

}

private class WeatherAPITask extends AsyncTask {

    protected void onPostExecute(String result) {
        Log.i("my label", "entering in onPostExecute");
        Log.i("result", result);
        input_city.setText("result");
    }

    @Override
    protected Object doInBackground(Object... params) {
        // TODO Auto-generated method stub
        try {
            Log.i("my label", "entering in doInBackground");
            Log.i("params[0]", params[0].toString());
            return QueryYahooWeather(params[0].toString());
        } catch (Exception e) {
            Log.i("my label", e.toString());
            return null;
        }
    }
}`` `}` 

调试代码后发现yahooAPI调用成功，可以在`QueryYahooWeather`函数中看到XML响应。但是一旦这个函数的执行完成，就会抛出一个异常：
`Can't create handler inside thread that has not called Looper.prepare()`

请帮帮我。

            回答 #1

赞同：2

时间：2012-12-02T09:21:09.747

删除所有 Toast 的 from`QueryYahooWeather`方法，因为此方法是从`doInBackground(Object... params)`of调用的，`AsyncTask`并且您无法从后台 Thread 访问像 Toast（也是 Ui 元素）这样的 Ui 元素。

**注意：**如果您想知道后台发生了什么，请使用[Log](http://developer.android.com/reference/android/util/Log.html)而不是 Toast

编辑：

将 doInBackground 更改为：

```
@Override
protected String doInBackground(Object... params) {
    // TODO Auto-generated method stub
    String strresult="";
    try {
        Log.i("my label", "entering in doInBackground");
        Log.i("params[0]", params[0].toString());
         strresult= QueryYahooWeather(params[0].toString());
         Log.i("strresult result ::: ", strresult);

    } catch (Exception e) {
        Log.i("my label", e.toString());
        return null;
    }
 return strresult;
} 
```

            回答 #2

赞同：1

时间：2012-12-02T09:21:19.720

你在打电话

```
Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_LONG)
            .show(); 
```

在`QueryYahooWeather`其中被调用`doInBackground`。

您不能`UI`从后台线程调用调用。

```

# javascript - 在 Django 中使用 POSTed json 对象

> ID：13667914
> 
> 赞同：0
> 
> 时间：2012-12-02T09:18:23.087
> 
> 标签：javascript, jquery, python, django, json

我想弄清楚如何在 Django 中处理 POSTed json 对象。我正在向服务器发布一个 json 对象，并希望像使用 python 字典一样使用它。

这是我的js：

```
$.post(
        "/projects/vote/", 
        obj,
        function(data) {
            //alert("Data Loaded: " + data);
            alert(data["msg"]);
}); 
```

我要返回的内容（django 视图结束）：

```
return HttpResponse(json.dumps(foo), mimetype="application/json") 
```

在哪里

```
foo = {"msg": str(postdata)} 
```

换句话说，我正在向服务器发布一个 json 对象，并提醒我在服务器上获取的 python 对象的字符串，以便我可以看到发生了什么。

如果我的 obj 是：

```
var obj = {
    'bulk': false,
    'data': {
          'chosen': '14',
          'proj1': '15',
          'proj2': '14',
          'proj3': '16',
          'more': false,

        },
    'data2': [
           {
               'a': 'apple'
           },
           {
               'b': 'banana'
           },
        ],      
  } 
```

我得到这个作为回报：

```
<QueryDict: {u'data[proj3]': [u'16'], u'data[proj2]': [u'14'], u'data[chosen]': [u'14'], u'data[proj1]': [u'15'], u'bulk': [u'false'], u'data2[0][a]': [u'apple'], u'data[more]': [u'false'], u'data2[1][b]': [u'banana']}> 
```

为什么json obj和python dict的结构不对齐？以及如何使结构相同？例如，我将 data2 作为另一个字典的键而不是 data2[0][a]

我如何获取邮政数据：

```
# django version 1.4
postdata = request.POST.copy() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T14:22:22.380

您可以使用以下方式将 json 作为纯字符串发布`JSON.stringify`：

```
 $.post(
            "/projects/vote/", 
            {msg: JSON.stringify(obj)},
            function(data) {
                //alert("Data Loaded: " + data);
                alert(data);
    }); 
```

因此，在服务器端，您应该只`'msg'`从以下内容中提取`request.POST`：

```
 def view(request):
          return HttpResponse(request.POST['msg'], mimetype="application/json") 
```

请注意，`JSON.stringify`某些浏览器默认不支持该功能，您可能需要使用 json lib：[https ://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T11:16:45.007

你没有展示你是如何`postdata`从 POST 中获得的，但你应该使用`request.body`（`request.raw_post_data`在 1.4 之前的版本中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T09:31:06.590

您没有发布 JSON 数据。将`dataType`参数设置为`json`：

```
$.post(
        "/projects/vote/", 
        obj,
        function(data) {
            //alert("Data Loaded: " + data);
            alert(data["msg"]);
        },
        'json'
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T07:26:34.917

服务端可以简单的返回一个字符串，js可以这样写：

```
$.post(
    "/projects/vote/", 
    obj,
    function(data) {
        data=eval('(' + data+ ')');//get the json object from string.
        //alert("Data Loaded: " + data);
        alert(data["msg"]);
}); 
```

希望这有帮助。

# smalltalk - 使用 Amber 将选项传递给 JS 函数

> ID：13667918
> 
> 赞同：5
> 
> 时间：2012-12-02T09:18:53.167
> 
> 标签：smalltalk, amber-smalltalk

我正在尝试编写等效于：

`$( "#draggable" ).draggable({ axis: "y" });`

在琥珀色的小谈话中。

我的猜测是：`'#draggable' asJQuery draggable: {'axis' -> 'y'}`但事实并非如此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T11:06:14.580

没有在 vanilla 0.9.1 上工作，但至少在过去两个月前在 master 上工作是：

```
'#draggable' asJQuery draggable: #{'axis' -> 'y'} 
```

并且这是推荐的方式。

PS：`#{ 'key' -> val. 'key2' -> val }`是内联创建的语法`HashedCollection`，它被实现（来自上述两个月前的修复），因此只有公共（又名可枚举）属性是 HashedCollection 键。在修复之前，所有方法都是可枚举的，这阻止了自然地使用它来代替 JavaScript 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T10:54:00.843

**herby**的出色回答指出了**推荐**的方法。显然，现在有字典文字支持（请参阅下面的评论）。不知道:-)

## 旧/替代方法

由于历史原因，或者对于不使用最新主版本的用户，这是一种替代方法：

```
options :=  <{}>. 
options at: #axis put: 'y'.
'#draggable' asJQuery draggable: options. 
```

第一行构造了一个空的 JavaScript 对象（它实际上是一个`JSObjectProxy`）。

第二行将字符串“y”放在槽“axis”中。它与以下效果相同：

```
options.axis = "y"; // JavaScript 
```

最后，它被调用，并作为参数传递。

## 数组文字与字典

你所做的没有奏效，因为在现代 Smalltalk（Pharo/Squeak/Amber）中，花括号用于数组文字，而不是 JavaScript 中使用的对象文字。

如果您在工作区中评估（打印）它：

```
{ #elelemt1\. #element2\. #element3 }. 
```

你得到：

```
a Array (#elelemt1 #element2 #element3) 
```

因此，如果你有一个*看起来*像 JavaScript 对象文字的东西，它实际上是一个关联数组。为了说明，我给你这个片段，右边是 print-it 的结果：

```
arrayLookingLikeObject := { #key1 -> #value1\. #key2 -> #value2\. #key3 -> #value3}.

arrayLookingLikeObject class. "==> Array"
arrayLookingLikeObject first class. "==> Association"
arrayLookingLikeObject "==> a Array (a Association a Association a Association)" 
```

我在这里写过：

[http://smalltalkreloaded.blogspot.co.at/2012/04/javascript-objects-back-and-forth.html](http://smalltalkreloaded.blogspot.co.at/2012/04/javascript-objects-back-and-forth.html)

# jquery - jquery 检查这是否等于 0,1 或 2

> ID：13667923
> 
> 赞同：0
> 
> 时间：2012-12-02T09:19:29.280
> 
> 标签：jquery, show-hide

首先对不起我的英语不好，我在`.eq()`jQuety 函数上有一个小问题。我有以下 HTML：

```
<ul>
    <li>1</li>
    <li>2</li>
    <li>2</li>
</ul> 
```

我想检查一下`.click`这是第一个li，第二个li还是第三个li。如果它是第一个或第二个我想要`.hide`一个 div，如果它是第三个 li 我想要`.show`它。

顺便说一句，我知道我可以使用`:not`功能，但它不支持 IE8，所以我不能。

谢谢，阿米特

编辑：谢谢，我最终这样做了：

```
if($(this).is(':nth-child(3)') == true) {
     $("#redB .bundleInfo p").show();
}else {
     $("#redB .bundleInfo p").hide();
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T09:27:49.073

您可以使用以下`index`方法：

```
var $li = $('ul li');

$li.click(function(){
   $('div').toggle( $li.index(this) > 1 );
}) 
```

[http://jsfiddle.net/qnNeN/](http://jsfiddle.net/qnNeN/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:37:05.480

试试这个

```
 $("ul li").each(function(){

   $(this).click(function(){

      if (index >= 0 && index <= 1) {
       // here someting
        } else {
       // here someting
       }

    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T09:23:08.417

鉴于您当前的 HTML，您可以执行以下操作：

```
$("li").bind("click", function(){
    var myLiElems= $("li");
    var curIdx = myLiElems.index($(this));

    if (2 == curIdx) {
        // show my div
    } else {
        // hide my div
    }
}); 
```

有关 jQuery 的 index() 函数的更多信息：http: [//api.jquery.com/index/](http://api.jquery.com/index/)

鉴于您当前的 javascript，您需要在此处检查 eq() 函数的文档：http: [//api.jquery.com/eq/](http://api.jquery.com/eq/)它没有按预期工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T09:23:34.357

尝试

```
 $('li').click(function(){

     switch($(this).index()){
      case 0:
        alert("its 0");
        break;
      case 1:
        alert("its 1");
        break;
      case 2:
        alert("its 2");
        break;

      default:
        alert("other")
        break;

      }

}) 
```

[[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/FdNGv/)]]]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T09:25:32.183

您可以使用`$(this).index()`在 ul 中获取单击的 li 的位置（索引为 0）。

***[现场演示。](http://jsfiddle.net/5NKHx/1/)***

```
​$('ul > li').click(function() {
    var index = $(this).index();
    if (index >= 0 && index <= 1) {
      // do something
    } else {
      // do someting else
    }
});​ 
```

# asp.net - 将图像和动态文本添加到 LinkBut ton

> ID：13667933
> 
> 赞同：0
> 
> 时间：2012-12-02T09:21:06.553
> 
> 标签：asp.net, image, linkbutton

我有几个 LinkBut​​tons 的水平数据列表。按钮代表一个阶段，可以是“完成”（绿色图像）或“未开始”（灰色图像）。此外，每个这样的按钮必须包含一些文本和它的阶段编号，例如：“STAGE 1”、“STAGE 2”等...

我找到了几个解决方案，但没有一个能同时满足我的要求——图像和文本。

有没有人在这件事上有一个好的和优雅的解决方案？

这是html代码：

```
<asp:DataList ID="dlStatuses" runat="server" RepeatDirection="Horizontal" 
        onitemdatabound="dlStatuses_ItemDataBound" 
        onitemcommand="dlStatuses_ItemCommand">
    <HeaderTemplate>
        <table border="0" cellpadding="0" cellspacing="0">
    </HeaderTemplate>
    <ItemTemplate>
        <asp:LinkButton ID="linkBtnStatuses" runat="server">
            <asp:Image ID="linkButtonImage" runat="server" ImageAlign="Middle" BorderStyle="None"/>
        </asp:LinkButton>
    </ItemTemplate>
    </asp:DataList> 
```

以及背后的代码：

```
protected void dlStatuses_ItemDataBound(object sender, DataListItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        DataRow row = (e.Item.DataItem as DataRowView).Row;

        #region Place Icons

        int StatusLevel = int.Parse(row["LevelID"].ToString());

        LinkButton lnkButton = (e.Item.FindControl("linkBtnStatuses")) as LinkButton;
        Image img = (e.Item.FindControl("linkButtonImage")) as Image;

        //lnkButton.Text = " Stage No. " + StatusLevel.ToString(); 

        switch (StatusLevel)
        {
            case 1:
                img.ImageUrl = "~/style/images/Green.png";
                break;
            case 2:
                img.ImageUrl = "~/style/images/Grey.png";
                break;
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:19:01.620

实际上，我认为最好的解决方案是用 div 包装 linkBut​​ton，并向该 div 添加一些文本。

`<div> <asp:LinkButton>...</asp:LinkButton> </div>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:12:16.717

删除服务器控件图像并根据您的条件将以下行添加到您的代码中

```
lnkButton.Text = "img src='../style/images/Green.png'"; 
```

# javascript - 在基于 Jquery 的时髦动画饼图中将单击转换为悬停

> ID：13667936
> 
> 赞同：0
> 
> 时间：2012-12-02T09:21:29.410
> 
> 标签：javascript, jquery, html, css

我在网上遇到了这个基于 Jquery 的饼图。您可以从这里免费下载：[http ://www.elated.com/articles/snazzy-animated-pie-chart-html5-jquery/](http://www.elated.com/articles/snazzy-animated-pie-chart-html5-jquery/)

我无法将滑动饼块的鼠标单击功能转换为以相同的方式对鼠标悬停做出反应。他们对鼠标悬停的反应方式似乎存在问题。但是，当将相同的鼠标悬停应用到表格时，没有问题，并且饼图会按预期做出反应。您能否查看代码并告诉我需要更改哪些内容才能使饼图在鼠标悬停时展开。

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:23:34.727

悬停事件在图表上不起作用的原因是图表是画布元素。切片不是单独的元素。因此，您需要使用 mousestop 事件，每次用户将鼠标悬停在切片上并保持鼠标不动时都会调用该事件。

mousestop 事件不随 Jquery 提供，但 Richard Scarrott 制作了一个 Jquery 插件：[http ://www.richardscarrott.co.uk/posts/view/jquery-mousestop-event](http://www.richardscarrott.co.uk/posts/view/jquery-mousestop-event)

您可以像这样在图表上使用它：

```
$('#chart').mousestop(100, handleChartClick); 
```

# javascript - 自动滚动到 div 的底部在带有 Html 的 android 中不起作用

> ID：13667938
> 
> 赞同：0
> 
> 时间：2012-12-02T09:21:43.777
> 
> 标签：javascript, android, html, css

我正在使用以下自动滚动到 div 底部的功能。当我在 Google chrome 和其他浏览器中测试它时它工作正常，但是当我在 android 手机中测试它时它不起作用

这是javascript函数

```
 function displaysender()
{
    var msg = document.getElementById("textarea").value;
    document.getElementById("display").innerHTML+='<b>Me</b>: '+msg+'<br><br>';
    var element = document.getElementById("display");

    element.scrollTop = element.scrollHeight;

} 
```

以下代码是html部分

```
 <div id="display" style="width:85%;height:340px;overflow:scroll"></div>
   <form>
    <div data-role="fieldcontain" data-theme="b">

        <textarea name="textarea" id="textarea" data-theme="b" style="float:right; width:60%"></textarea>

    <a href="" style="float:left"  data-role="button" data-inline="true" data-theme="e" onclick="displaysender();sendToBackend();">Send</a>
   </div>
</form> 
```

任何时间的帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T10:05:09.247

你也不能试试

```
window.scrollTo(0,element.offsetTop); 
```

# html - 如何设置表格单元格的最大高度？

> ID：13667941
> 
> 赞同：78
> 
> 时间：2012-12-02T09:22:04.543
> 
> 标签：html, css

我有一个固定宽度和高度的表格单元格，如果文本太大，单元格大小应该保持不变，并且文本应该被溢出隐藏：隐藏。

```
div {
   display: table-cell
   height: 100px;
   width: 100px;
   overflow: hidden;
   vertical-align: middle;
} 
```

但是，如果添加了太多文本，表格单元格会扩展超过 100 像素。有什么防止它膨胀的技巧吗？

文本长度应为几行，因此“white-space:nowrap”解决方案不适用

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-12-02T09:43:02.570

根据[CSS 2.1 规则](http://www.w3.org/TR/CSS21/tables.html#height-layout)，表格单元格的高度是“内容所需的最小高度”。因此，您需要使用内部标记间接限制高度，通常是一个`div`元素 ( `<td><div>content</div></td>`)，并在该元素上设置`height`和属性（当然，不对其进行设置，因为这会使其高度符合 CSS 2.1 表格单元格规则）。`overflow``div``display: table-cell`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-03-01T02:07:55.500

我认为接受的答案实际上并不能完全解决问题。你想`vertical-align: middle`在表格单元格内容上有一个。但是，当您在表格单元格中添加一个 div 并为其指定高度时，该内部 DIV 的内容将位于顶部。检查这个[jsfiddle](http://jsfiddle.net/beipawel/outgxx1w/3/)。溢出：隐藏；工作正常，但如果你缩短内容使其只有一行，这条线[将不会垂直居中](http://jsfiddle.net/beipawel/outgxx1w/2/)

解决方案不是在表格单元内添加 DIV，而是在外部添加。这是[代码](http://jsfiddle.net/beipawel/outgxx1w/4/)：

```
/* some wrapper */
div.d0 {
    background: grey;
    width:200px;
    height: 200px;
}

div.table {
    margin: 0 auto; /* just cosmetics */
    width: 150px;
    height: 150px;
    background: #eee;
    display: table;
}

div.tablecell {
    display: table-cell;
    vertical-align: middle;
    text-align:center;
    height: 100%;
    width: 100%;
    background: #aaa;
}

div.outer-div {
    height: 150px;
    overflow: hidden;
}
```

```
<div class="d0">
    <div class="outer-div">
        <div class="table">
            <div class="tablecell">
                Lorem ipsum 
                <!--dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren,-->
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-05-13T07:01:58.597

您可以执行以下任一操作：

1.  使用css属性“line-height”并为每个表格行设置它（），这也将使内容垂直居中

2.  将“display”css 属性设置为“block”，如下所示：

```
td 
{
  display: block;
  overflow-y: hidden;
  max-height: 20px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T09:29:48.627

尝试这样的事情： -

```
 table {
    width: 50%;
    height: 50%;
    border-spacing: 0;
    position:absolute;
}
td {
    border: 1px solid black;
}
#content {
    position:absolute;
    width:100%;
    left:0px;
    top:20px;
    bottom:20px;
    overflow: hidden;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T09:41:30.793

使用以下样式：

```
div {
  display: fixed;
  max-height: 100px;
  max-width: 100px;
  overflow: hidden;
} 
```

HTML是：

```
<div>
    your long text here
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-11T01:55:30.987

在 css 中，您无法设置表格单元格的最大高度，如果您使用空白 nowrap 则无法使用最大宽度来打破它，因此解决方案是 javascript 在所有浏览器中都可以使用。

所以，这对你有用。

**使用 Javascript 限制表中所有单元格或行的最大高度：**

该脚本适用于水平溢出表。

此脚本每次将表格宽度增加 300px，最大 4000px 直到行缩小到 max-height(160px) ，您还可以根据需要编辑数字。

```
var i = 0, row, table = document.getElementsByTagName('table')[0], j = table.offsetWidth;
while (row = table.rows[i++]) {
    while (row.offsetHeight > 160 && j < 4000) {
        j += 300;
        table.style.width = j + 'px';
    }
} 
```

**来源：[HTML 表格解决方案通过增加表格宽度来限制行或单元格的最大高度，Javascript](https://stackoverflow.com/questions/31899073/html-table-solution-max-height-limit-for-rows-or-cells-by-increasing-table-width/)**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-26T15:41:27.407

如果您使用的是 display:table-cell，max-height 将不适用于这种样式的 div。所以对我有用的解决方案是设置内部 div 的最大高度

```
<div class="outer_div" style="display:table">

    <div class="inner_div" style="display:table-cell">
        <img src="myimag.jpg" alt="" style="max-height:300px;width:auto"/>
    </div>
    <div class="inner_div" style="display:table-cell">
        <img src="myimag2.jpg" alt="" style="max-height:300px;width:auto"/>
    </div>

</div> 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-12-02T09:25:03.897

尝试

```
 <td style="word-wrap: break-word">Long text here</td> 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-09-21T06:45:49.473

这可能符合您的需求吗？

```
<style>
.scrollable {
  overflow-x: hidden;
  overflow-y: hidden;
  height: 123px;
  max-height: 123px;
}
</style>

<table border=0><tr><td>
  A constricted table cell
</td><td align=right width=50%>
  By Jarett Lloyd
</td></tr><tr><td colspan=3 width=100%>
  <hr>
  you CAN restrict the height of a table cell, so long as the contents are<br>
  encapsulated by a `&lt;div>`<br>
  i am unable to get horizontal scroll to work.<br>
  long lines cause the table to widen.<br>
  tested only in google chrome due to sheer laziness - JK!!<br>
  most browsers will likely render this as expected<br>
  i've tried many different ways, but this seems to be the only nice way.<br><br>
</td></tr><tr><td colspan=3 height=123 width=100% style="border: 3px inset blue; color: white; background-color: black;">
  <div class=scrollable style="height: 100%; width: 100%;" valign=top>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
    is this suitable??<br>
  </div> 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2012-12-02T09:25:31.497

这就是你想要的：

```
td {
   max-height: whatever;
   max-width: whatever;
   overflow: hidden;
} 
```

# python - Python SimPy：如何拆分或复制客户？

> ID：13667943
> 
> 赞同：1
> 
> 时间：2012-12-02T09:22:33.030
> 
> 标签：python, simulation, simpy

这是我试图在 SimPy 中实现的：

客户首先进入服务器 A 服务 5 分钟。然后每个客户分成两个，一个去Server B服务3分钟，一个去Server C服务2分钟。

我编写了以下代码，但根据输出似乎无法正常工作。另外我不确定我使用复制功能的方式是否正确，因为我想拆分每个离开服务器 A 的客户，但我觉得我的代码可能只适用于第一个客户。

任何帮助，将不胜感激。

```
from SimPy.Simulation import *
from copy import *

class Source(Process):                               
    def generate(self):                 
        for i in range(5):
            c = Customer(name="Customer%02d" % (i))  
            activate(c, c.runA())
            yield hold, self, 10                    

class Customer(Process):
    def runA(self):
        print("%7.4f %s (original) enters server A" % (now(), self.name))
        yield hold, self, 5
        print("%7.4f %s (original) leaves server A" % (now(), self.name))

        dup1 = copy(self)
        dup2 = copy(self)
        activate(dup1, dup1.runB())
        activate(dup2, dup2.runC())

    def runB(self):
        print("%7.4f %s (copy) enters server B" % (now(), self.name))
        yield hold, self, 3
        print("%7.4f %s (copy) leaves server B" % (now(), self.name))

    def runC(self):
        print("%7.4f %s (copy) enters server C" % (now(), self.name))
        yield hold, self, 2
        print("%7.4f %s (copy) leaves server C" % (now(), self.name))

initialize()
s = Source()                                         
activate(s, s.generate(), at=0.0)
simulate(until=100.0) 
```

输出：

```
 0.0000 Customer00 (original) enters server A
 5.0000 Customer00 (original) leaves server A
10.0000 Customer01 (original) enters server A
15.0000 Customer01 (original) leaves server A
20.0000 Customer02 (original) enters server A
25.0000 Customer02 (original) leaves server A
30.0000 Customer03 (original) enters server A
35.0000 Customer03 (original) leaves server A
40.0000 Customer04 (original) enters server A
45.0000 Customer04 (original) leaves server A
logout 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T15:01:01.513

恐怕复制一个 Simpy Process 并不是那么简单，我认为因为它们是生成器（[请参阅](https://stackoverflow.com/questions/1401610/python-copy-deepcopy-produces-an-error)）并且因为它们包含用于模拟的内部变量。

要使您的代码正常工作，您可以按如下方式修改 RunA(self)。在这里，我们创建了两个新的 Process-Customers，它们看起来像 self 而不是复制它。

```
def runA(self):
    print("%7.4f %s (original) enters server A" % (now(), self.name))
    yield hold, self, 5
    print("%7.4f %s (original) leaves server A" % (now(), self.name))

    dup1 = Customer(name = self.name)
    dup2 = Customer(name = self.name)

    activate(dup1, dup1.runB())
    activate(dup2, dup2.runC()) 
```

这很有效，因为您只有一个要复制的变量。在更复杂的情况下，您可以[使用 var(Object)](https://stackoverflow.com/q/109087/2389570)方法，但请注意 Process 类包含许多您可能不应该复制的变量。

另外，我推荐[这个 SimPy 教程](http://heather.cs.ucdavis.edu/~matloff/python.html)来帮助你设计你的模拟。

# java - javafx 致命错误异常访问冲突（问题框架：jfxmedia.dll）

> ID：13667955
> 
> 赞同：2
> 
> 时间：2012-12-02T09:24:17.060
> 
> 标签：java, javafx, fatal-error

[http://www.youtube.com/watch?v=bWl98dhvf8Q](http://www.youtube.com/watch?v=bWl98dhvf8Q)我参考了这个网站并将 mp4 视频添加到 javafx 程序中，我得到了一个致命错误，请有人帮我清除这个运行时错误！谢谢你...

> Java 运行时环境检测到一个致命错误：EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x6b9589ec, pid=1812, tid=5132 JRE 版本：7.0_10-b17 Java VM：Java HotSpot(TM) Client VM (23.6-b04 mixed模式，共享 windows-x86 ) 有问题的框架：C [jfxmedia.dll+0x89ec] Java_com_sun_media_jfxmediaimpl_platform_gstreamer_GSTPlatform_gstInitPlatform+0x218c
> 
> 无法写入核心转储。默认情况下，在 Windows 的客户端版本上不启用小型转储
> 
> 如果您想提交错误报告，请访问：
> [http](http://bugreport.sun.com/bugreport/crash.jsp) ://bugreport.sun.com/bugreport/crash.jsp 崩溃发生在 Java 虚拟机之外的本地代码中。请参阅有问题的框架以了解报告错误的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:42:47.650

您对此无能为力，只需报告错误即可。

看来您正在使用开发人员预览版 JDK 7u10 Build b17 ，[7u10](http://jdk7.java.net/download.html) Build b18现已可用，安装它可能是该错误已修复！. 但我建议使用 oracle [Java SE 7u9](http://www.oracle.com/technetwork/java/javase/downloads/index.html)的稳定版本。

# ruby - 通过 rbenv 安装 Ruby 失败

> ID：13667959
> 
> 赞同：1
> 
> 时间：2012-12-02T09:25:05.817
> 
> 标签：ruby, installation, rbenv

**问题：我安装了 ruby​​，但无法正确识别。** 我正在关注*VPS 的部署*：[https ://github.com/railscasts/335-deploying-to-a-vps](https://github.com/railscasts/335-deploying-to-a-vps)

我在 ubuntu 12.04 LTS 上设置我的服务器来部署我的 rails 应用程序。我正在关注关于部署到 VPS 的 railscast，并尝试通过 rbenv 安装 ruby​​。似乎一切都安装正确，但是当我尝试检查 ruby​​ 版本时，它给了我错误。以下是我运行的命令。

```
deployer@max:~$ rbenv install 1.9.3-p125
Downloading yaml-0.1.4.tar.gz...
-> http://cloud.github.com/downloads/sstephenson/ruby-build-download-mirror/36c852831d02cf90508c29852361d01b
Installing yaml-0.1.4...
Installed yaml-0.1.4 to /home/deployer/.rbenv/versions/1.9.3-p125

Downloading ruby-1.9.3-p125.tar.gz...
-> http://cloud.github.com/downloads/sstephenson/ruby-build-download-mirror/e3ea86b9d3fc2d3ec867f66969ae3b92
Installing ruby-1.9.3-p125...
Installed ruby-1.9.3-p125 to /home/deployer/.rbenv/versions/1.9.3-p125

Downloading rubygems-1.8.23.tar.gz...
-> http://cloud.github.com/downloads/sstephenson/ruby-build-download-mirror/178b0ebae78dbb46963c51ad29bb6bd9
Installing rubygems-1.8.23...
Installed rubygems-1.8.23 to /home/deployer/.rbenv/versions/1.9.3-p125

deployer@max:~$ rbenv global 1.9.3-p125
deployer@max:~$ ruby -v
'ruby' program can be found in the following packages:
 * ruby1.8
 * ruby1.9.1 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T11:01:22.503

您不需要使用 rbenv 来安装特定版本的 Ruby。而是使用[ruby](https://github.com/sstephenson/ruby-build#readme) ​​-build 将 1.9.3-p125 安装到`/usr/local`：

```
ruby-build 1.9.3-p125 /usr/local/ 
```

或者，手动安装 Ruby：

```
# Compile Ruby (instead of rbenv)
sudo apt-get -y install build-essential zlib1g-dev libssl-dev libreadline5-dev libyaml-dev
wget ftp://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p125.tar.gz
tar -xvzf ruby-1.9.3-p125.tar.gz
cd ruby-1.9.3-p125/
./configure --prefix=/usr/local
make
sudo make install
sudo gem install bundler --no-ri --no-rdoc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T09:45:22.920

也许你失踪了

```
eval "$(rbenv init -)"; 
```

在你的 shell 配置中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-27T14:11:58.017

您应该重新启动 shell 以允许`rbenv`找到新的 Ruby

> $ 执行 $SHELL
> $ 红宝石 -v
> 
> > ruby 1.9.3p194（2012-04-20 修订版 35410）[i686-linux]

# android - 如何从android中的毫秒获取日期

> ID：13667966
> 
> 赞同：13
> 
> 时间：2012-12-02T09:26:37.510
> 
> 标签：android, datetime, android-date

我有时间`milliseconds`，现在我想和这些**分开** 。`time``date``milliseconds`

我怎样才能做到这一点？？？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-02T10:08:11.463

你可以这样使用

```
Calendar cl = Calendar.getInstance();
cl.setTimeInMillis(milliseconds);  //here your time in miliseconds
String date = "" + cl.get(Calendar.DAY_OF_MONTH) + ":" + cl.get(Calendar.MONTH) + ":" + cl.get(Calendar.YEAR);
String time = "" + cl.get(Calendar.HOUR_OF_DAY) + ":" + cl.get(Calendar.MINUTE) + ":" + cl.get(Calendar.SECOND); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-02T10:01:28.427

这个函数会给你一个毫秒的字符串日期

```
public static String getFormattedDateFromTimestamp(long timestampInMilliSeconds)
{
    Date date = new Date(); 
    date.setTime(timestampInMilliSeconds);
    String formattedDate=new SimpleDateFormat("MMM d, yyyy").format(date);
    return formattedDate;

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-11T11:41:47.427

转换`milliseconds`为`Date`实例并将其传递给所选的格式化程序：

```
SimpleDateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy");

String myDate = dateFormat.format(new Date(dateInMillis))); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-02T09:32:13.817

您可以将毫秒转换为日期对象，然后以时间字符串和另一个仅包含日期的字符串的格式提取日期

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-02T10:05:47.920

使用[Calendar](http://developer.android.com/reference/java/util/Calendar.html)获取不同时间字段的值：

```
Calendar cal = Calendar.getInstance();
cal.setTimeInMillis(timeInMillis);
int dayOfMonth = cal.get(Calendar.DAY_OF_MONTH);
int monthOfYear = cal.get(Calendar.MONTH); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-08T09:22:20.850

对 Kiran Kumar 的进一步回答

```
 public static String getFormattedDateFromTimestamp(long timestampInMilliSeconds, String dateStyle){
        Date date = new Date(); 
        date.setTime(timestampInMilliSeconds);
        String formattedDate=new SimpleDateFormat(dateStyle).format(date);
        return formattedDate;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-11T16:54:51.267

## java.time 和 ThreeTenABP

我建议 java.time，现代 Java 日期和时间 API，用于您的日期和时间工作：

```
 long millisecondsSinceEpoch = 1_567_890_123_456L;

    ZonedDateTime dateTime = Instant.ofEpochMilli(millisecondsSinceEpoch)
            .atZone(ZoneId.systemDefault());
    LocalDate date = dateTime.toLocalDate();
    LocalTime time = dateTime.toLocalTime();

    System.out.println("Date: " + date);
    System.out.println("Time: " + time); 
```

我的时区（欧洲/哥本哈根）的输出：

> ```
> Date: 2019-09-07
> Time: 23:02:03.456 
> ```

其他答案中使用的日期和时间类 -和`Calendar`-设计不佳且早已过时。这就是为什么我不建议使用它们中的任何一个，而是更喜欢 java.time。`Date``SimpleDateFormat`

## 问题：java.time 不需要 Android API 级别 26 吗？

java.time 在较旧和较新的 Android 设备上都能很好地工作。它只需要至少**Java 6**。

*   在 Java 8 及更高版本以及更新的 Android 设备（从 API 级别 26 开始）中，现代 API 是内置的。
*   在非 Android Java 6 和 7 中获得 ThreeTen Backport，现代类的后向端口（ThreeTen 用于 JSR 310；请参阅底部的链接）。
*   在（较旧的）Android 上使用 ThreeTen Backport 的 Android 版本。它被称为 ThreeTenABP。并确保从`org.threeten.bp`子包中导入日期和时间类。

## 链接

*   [Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用 java.time。
*   [Java 规范请求 (JSR) 310](https://jcp.org/en/jsr/detail?id=310)，`java.time`第一次描述的地方。
*   [ThreeTen Backport 项目](http://www.threeten.org/threetenbp/)，`java.time`Java 6 和 7 的反向移植（ThreeTen for JSR-310）。
*   [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP) , ThreeTen Backport 的 Android 版
*   [问题：如何在Android项目中使用ThreeTenABP](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)，有非常详尽的解释。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-05T12:10:18.593

您可以使用日期格式并将您的毫秒值设置为此构造函数的参数，遵循以下代码：

```
SimpleDateFormat SDF= new SimpleDateFormat("dd/MM/yyyy"); 
String date = SDF.format(new Date(millies))); 
```

# web-applications - 保留可以由多人重新排序的列表的最佳方法是什么？

> ID：13667968
> 
> 赞同：1
> 
> 时间：2012-12-02T09:26:42.900
> 
> 标签：web-applications, language-agnostic

我有一堆 UI 元素，为简单起见，我们可以将它们视为 li 元素。

网页的访问者可以插入、删除或重新排序这些 li 元素，并且每次用户执行此操作时，都应保留更新的顺序。在这种情况下，链表将是最好的解决方案，但对于一个问题。

让我们假设两个用户 A 和 B 打开了包含该列表的网页。该列表看起来像这样 1 -> 2 -> 3 -> 4 -> 5 -> 6 -> 7 -> 8。

用户 A 将其重新排序为 1 -> 4 -> 3 -> 2 -> 5 -> 6 -> 7 -> 8。通过更新 1、4、3、2 和 5 的引用的 AJAX 调用成功地保留了此更改。

在此调用传输到后端所需的 2-3 秒内，在用户 B 的屏幕上持续并更新 - 用户 B 将其网页上显示的列表更新为 5 -> 2 -> 3 -> 4 -> 1 -> 6 -> 7 -> 8\. 生成了错误的 AJAX 调用，它们最终打乱了排序。

希望就如何最好地解决这个问题提出一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T09:29:30.817

有一个在订单更改时更新的 UUID。当他们想要重新排序时将 UUID 发送给客户端，并验证 UUID 在提交时没有更改。如果有，请拒绝重新订购或通知用户并允许他们采取适当的措施。

# java - 我如何调用 Web API 并将他返回的 JSON 分配给隐藏字段

> ID：13667969
> 
> 赞同：0
> 
> 时间：2012-12-02T09:26:43.443
> 
> 标签：java, json

我有一个`(/WcfJson/Service1.svc/VF/GetDocInfo)`返回以下 JSON 值的 Web API：-

```
{
  "data": [
    {
      " Ser": 1,
      " No": 1
    },
    {
      " Ser": 2,
      " No": 2
    },
    {
      " Ser": 3,
      " No": 3
    },
    {
      " Ser": 4,
      " No": 4
    },
    {
      " Ser": 5,
      " No": 5
    },
    {
      " Ser": 6,
      " No": 6
    },
    {
      " Ser": 7,
      " No": 7
    },
    {
      " Ser": 8,
      " No": 8
    }
  ]
} 
```

我需要将返回的 JSON 的值存储在我的表单隐藏值中，我可以通过以下表达式 #formName.fieldName# 访问表单隐藏值。那么我如何编写一个标准的 Java 类来执行以下操作：-

1-调用网络 API。

2-处理返回的 JSON。

3-将返回的 JOSN 分配给隐藏字段。

此致

# c# - java中vb.net'friend'关键字的等价物是什么？

> ID：13667971
> 
> 赞同：4
> 
> 时间：2012-12-02T09:27:25.650
> 
> 标签：c#, java, vb.net, friend, internal

我想编写一个内部（在 C# 中）类，我在 vb.Net 中使用了关键字“朋友”。现在我想在 Java 中做同样的事情。什么是等价物？

```
Friend Class NewClass

End Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T09:30:36.030

Java中没有等价物`friend`。您可以做的最好的事情是将这两个类放在同一个包中，并使一个类的成员包私有（即，没有`public`，`private`or `protected`）以使它们可以被另一个访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T09:38:36.983

Java 中没有关键字friend 或friend 等价物。当我转换 VB 代码时：

```
Friend Class NewClass

End Class 
```

到 C# 代码我得到的转换是：

```
internal class NewClass
{

} 
```

因此，要使其等效于 java 代码，您必须做两件事：

1st 将课程保存在您想要访问它的同一个包中。第二次声明没有任何访问修饰符的类：

```
class NewClass
{

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T09:29:53.430

C# 的内部相当于 Java 的默认作用域（即它自己的作用域）。

Java没有内部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T09:34:48.720

在 Visual Basic.NET 中，`Friend`关键字表示可访问性。在 C# 中，等效关键字是`internal`.

在 Java 中，没有这样的关键字，但是您可以通过在类声明中省略任何访问说明符来有效地获得关于包范围的相同可见性。

通过对相同类声明的 C# 和 Java 版本之间的[并列比较](http://www.javacamp.org/javavscsharp/internal.html)，（为了完整起见，我还添加了 Visual Basic 版本）注意`class B`以及`A.Y`、`B.Y`和`C.Y`的声明`D.Y`：

## Visual Basic 版本：

```
Public Class A
    Public Shared X As Integer
    Friend Shared Y As Integer
    Private Shared Z As Integer
End Class
Friend Class B
    Public Shared X As Integer
    Friend Shared Y As Integer
    Private Shared Z As Integer
    Public Class C
        Public Shared X As Integer
        Friend Shared Y As Integer
        Private Shared Z As Integer
    End Class
    Private Class D
        Public Shared X As Integer
        Friend Shared Y As Integer
        Private Shared Z As Integer
    End Class
End Class 
```

## C#版本：

```
public class A
{
    public static int X;
    internal static int Y;
    private static int Z;
}
internal class B
{
    public static int X;
    internal static int Y;
    private static int Z;
    public class C
    {
        public static int X;
        internal static int Y;
        private static int Z;
    }
    private class D
    {
        public static int X;
        internal static int Y;
        private static int Z;
    }
} 
```

## Java版本：

```
public class A
{
    public static int X;
    static int Y;
    private static int Z;
}
class B
{
    public static int X;
    static int Y;
    private static int Z;
    public class C
    {
        public static int X;
        static int Y;
        private static int Z;
    }
    private class D
    {
        public static int X;
        static int Y;
        private static int Z;
    }
} 
```

另请参阅[此 Visual Basic 和 C# 的比较以](http://www.codeproject.com/Articles/9978/Complete-Comparison-for-VB-NET-and-C)供参考。

# javascript - 获取高度为 100% 的图像的确切宽度；使用 jQuery

> ID：13667972
> 
> 赞同：2
> 
> 时间：2012-12-02T09:27:48.163
> 
> 标签：javascript, jquery, html, css

当我将图像的高度设置为 100% 时，会自动计算宽度以保持图像纵横比。
大多数情况下，此类图像的宽度不是整数而是双倍（如 645.34）。
`$("#myImg").width()`返回我总是一个整数。
如何使用 jquery 获得此类图像的确切宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T09:36:18.310

实际应用的宽度将*始终*等于浏览器的整数像素值。没有可渲染的半像素。我们可以指定`22.5px`etc，但它会被浏览器四舍五入到最接近的整数。然而，一些浏览器可能会消除边缘像素的锯齿以模拟半像素，但应用的宽度/高度值仍将*始终*为整数。

# php - 将模型（对象）插入表中

> ID：13667974
> 
> 赞同：0
> 
> 时间：2012-12-02T09:27:51.107
> 
> 标签：php, codeigniter

我有一个关于 codeigniter 数据库类的问题

根据用户指南，我可以通过使用轻松地将新行（或换句话说，对象）插入我的表中

```
$data = array(
               'title' => $title,
               'name' => $name,
               'date' => $date
            ); 
```

但是，这对我来说是否可以采用具有标题、名称、日期属性（可能还有这些属性的 getter 和 setter）的类（或模型）并将该模型类的新对象传递给 $this->db- >插入（'用户'，$模型）；

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:09:25.973

Codeignier 的 Active Record 不支持将 Model 的对象发送到 insert 函数，但是 如果你想使用面向对象技术进行数据库操作，你可以使用 ORM 库，如 Ignite [Records](https://www.assembla.com/spaces/IgnitedRecord/wiki)或[DataMapper](http://datamapper.wanwizard.eu/)

根据[文档](http://ellislab.com/codeigniter/user-guide/database/active_record.html#insert)，您可以发送这样的类的对象

```
 class Myclass {
     var $title = 'My Title';
     var $content = 'My Content';
     var $date = 'My Date';
 }

$object = new Myclass;    
$this->db->insert('mytable', $object); 
```

# r - 从配置单元执行 R 脚本

> ID：13667975
> 
> 赞同：3
> 
> 时间：2012-12-02T09:28:09.087
> 
> 标签：r, hive

有谁知道谁将数据从 hive 读取到 R 然后返回到 Hive？
我可以像这样使用 Python 轻松地做到这一点：

```
for line in sys.stdin:

  Some code ...

  sys.stdout.write(Output + '\n') 
```

R中有类似的方法吗？

谢谢汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:08:42.663

if you set up Rstudio on you hive server you can easily access it via R script. You would need the Rhive package. [http://cran.r-project.org/web/packages/RHive/](http://cran.r-project.org/web/packages/RHive/)

All you need to do after that is set your paths for hadoop and hive home in your R profile and use

```
library(Rhive)
rhive.init()
rhcon<-rhive.connect(address,port=) 
```

hope that helps!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-01T22:44:26.963

Ofir，我想您可以在 R 中以某种方式编写代码。确切地说：

```
conn <- file("stdin", open="r")
while (length(next.line <- readLines(conn, n=1, warn=FALSE)) > 0) { 
    # processing
    cat(output)
} 
```

# python - Python 2.6.1：预期的路径分隔符 ([)

> ID：13667979
> 
> 赞同：12
> 
> 时间：2012-12-02T09:28:40.517
> 
> 标签：python, xpath, python-2.6, elementtree

我在 python 2.6.1 中遇到路径分隔符错误。我在 python 2.7.2 版本中没有发现这个问题，但不幸的是我只在 2.6.1 中需要这个。有没有其他方法可以达到同样的效果？:(

我的代码：-

```
import xml.etree.ElementTree as ET #version 1.2.6
import sys   

class usersDetail(object): 

    def __init__(self, users=None):
        self.doc = ET.parse("test.xml")
        self.root = self.doc.getroot()

    def final_xml(self,username):
        r = self.root.find("user[@username='user1']") #not working in 2.6.1 :(
        self.root.remove(r)
        print r
        tree = ET.ElementTree(self.root)
        tree.write("msl.xml") 

if __name__ == '__main__':
    parser = usersDetail()
    parser.final_xml("user1") 
```

test.xml 是：-

```
<?xml version="1.0"?>
<users>
<user afp="yes" cifs="yes"  username="user1" volume="vol" webdev="yes" /></user>
</users> 
```

这将做的是只有当用户名 = 用户名时才会删除 xml。提前感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-02T09:37:40.540

您正在使用 XPath 表达式，`ElementTree`Python 2.6 中包含的版本不支持该表达式。您需要手动过滤属性，之后是`.findall()`：

```
def final_xml(self,username):
    users = self.root.findall("user")
    for user in users:
        if user.attrib.get('username') == 'user1':
            break
    else:
        raise ValueError('No such user')

    # `user` is now set to the correct element
    self.root.remove(user)
    print user
    tree = ET.ElementTree(self.root)
    tree.write("msl.xml") 
```

# php - php echo 奇怪的行为

> ID：13667980
> 
> 赞同：1
> 
> 时间：2012-12-02T09:28:46.793
> 
> 标签：php, echo

我只是在我的电脑上尝试一个简单的 php 测试：

*   Archlinux + httpd + php
*   phpinfo() 测试没问题
*   代码是用 vim 写的，没有复制粘贴

这是无法按预期工作的代码（取自一本书）：

```
<html>
<head><title>Test PHP </title></head>
<body>
<h1>Texte mis en avant</h1>
<?php
echo "<p>ceci est du code PHP</p>";
echo "<p>simple non?</p>";
?>
</body>
</html> 
```

这是我在浏览器中得到的：

> 前卫的文本
> 
> ceci est du code PHP
> 
> “；回声”
> 
> 简单的非？"; ?>

这有什么问题？（我第一次阻止这么简单的事情）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T09:31:58.903

PHP 引擎未处理该页面。查看页面来源进行验证。确保已为该页面正确安装它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T09:46:41.873

默认情况下，PHP 脚本文件必须使用`.php`后缀命名，以便传递给 PHP 解释器，因为文件名后缀是在页面服务期间考虑的。如果你`.html`按照你说的那样使用，那么它就按原样进行，因为 HTML 对 PHP 一无所知。因此，您应该将文件重命名为以`.php`（最简单的方法）结尾，或者告诉您的 http 服务器`.html`文件也应由 PHP 处理。即，如果您使用的是 Apache 并且`.htaccess`可以按虚拟主机使用，`.htaccess`请在服务的根目录中创建包含内容的文件：

```
<FilesMatch "\.html$">
  ForceType application/x-httpd-php
</FilesMatch> 
```

这将告诉您的 httpd，匹配给定模式的文件也应被视为 PHP 脚本。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-02T09:55:51.833

您的文件名应该有扩展名**.php**并且它存储在**文档根**文件夹中。

`html`将文件的扩展名从to更改为`php`并再次运行

# java - 休眠状态下的未知实体

> ID：13667986
> 
> 赞同：4
> 
> 时间：2012-12-02T09:30:18.903
> 
> 标签：java, spring, hibernate, maven, orm

执行主类时出现此错误。我试图在表投资组合中插入新记录。如您所见，我正在使用 Hibernate ORM 模型来做到这一点。还可以说休眠完成与数据库的连接没有任何问题！

```
Exception in thread "main" org.hibernate.MappingException: Unknown entity: com.nortal.vspa.model.Portfolio
at org.hibernate.internal.SessionFactoryImpl.getEntityPersister(SessionFactoryImpl.java:1129)
at org.hibernate.internal.SessionImpl.getEntityPersister(SessionImpl.java:1402)
at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:117)
at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:204)
at org.hibernate.event.internal.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:55)
at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:189)
at org.hibernate.event.internal.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:49)
at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:90)
at org.hibernate.internal.SessionImpl.fireSave(SessionImpl.java:756)
at org.hibernate.internal.SessionImpl.save(SessionImpl.java:748)
at org.hibernate.internal.SessionImpl.save(SessionImpl.java:744)
at com.nortal.vspa.main.Main.main(Main.java:24) 
```

实体类：

```
@Entity
@Table(name="portfolio")
public class Portfolio implements Serializable {

private static final long serialVersionUID = -1136208004146721604L;

@Id
@Column(name="symbol")
private String symbol;

public String getSymbol()
{
    return symbol;
}

public void setSymbol(String symbol)
{
    this.symbol = symbol;
}
} 
```

主类：

```
public class Main {

/**
 * @param args
 */
public static void main(String[] args) {

     Session session =  HibernateUtil.getSessionFactory().openSession();
     session.beginTransaction();
    Portfolio portfolio = new Portfolio();

    portfolio.setSymbol("MB");

    session.save(portfolio);
    session.getTransaction().commit();

}

} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-02T09:46:49.410

Hibernate 配置文件必须列出实体类：

```
<mapping class="com.foo.bar.Portfolio"/> 
```

或者您必须使用明确地将类添加到配置中

```
configuration.addClass(com.foo.bar.Portfolio.class) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-16T06:27:01.367

这可能是因为方言名称不正确。就我而言，我添加了服务器版本号以及 MySQL 方言。前任。org.hibernate.dialect.MySQL8Dialect

# .net - 如何在 Ngit 中使用 Ls-Remote

> ID：13667988
> 
> 赞同：0
> 
> 时间：2012-12-02T09:30:40.443
> 
> 标签：.net, git, gitsharp, ngit

我希望使用 NGit 执行以下操作，但经过将近一整天的时间，我完全迷失了：

*   创建一个空仓库
*   使用 URL 和凭据添加远程“来源”
*   运行 Ls-Remote 以获取`master`分支的最新哈希值`origin`

如果有人可以向我展示一个这样的例子，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:13:48.993

```
using System.Collections.Generic;
using System.Linq;
using NGit.Api;
using Sharpen;

// git init
string path = @"C:\git\repo1";
Git git = Git.Init().SetDirectory(new FilePath(path)).Call();
// after init, you can call the below line to open
// Git git = Git.Open(new FilePath(path));

// git remote origin
StoredConfig config = git.GetRepository().GetConfig();
config.SetString("remote", "origin", "url", @"http://user:password@github.com/user/repo1.git");
config.Save();

// git ls-remote
ICollection<Ref> refs = git.LsRemote().SetRemote("origin").Call();
Ref master = refs.FirstOrDefault(a => a.GetName() == "refs/heads/master");
if (master != null)
{
    string hash = master.GetObjectId().Name;
} 
```

# java - 如何在 Java 中多线程打开网络连接？

> ID：13667991
> 
> 赞同：-1
> 
> 时间：2012-12-02T09:31:03.473
> 
> 标签：java, multithreading, concurrency

我正在开发一个多线程 Java 项目，我的一个线程正在联系一个网页。目前我这样做如下：

```
URLConnection urlConn = webPageToContact.openConnection();
InputStreamReader inStream = new InputStreamReader(urlConn.getInputStream());
BufferedReader buff  = new BufferedReader(inStream); 
```

我的问题是，有没有办法以线程方式执行此操作，以便在该线程等待服务器响应时，我项目中的其他线程可以做事。我正在考虑某种“等待”方法。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T09:46:05.990

您还可以使用单线程池执行器：

```
ExecutorService service = Executors.newSingleThreadExecutor();
   service.submit(new Runnable() {
   @Override public void run() {
      URLConnection urlConn = webPageToContact.openConnection();
      InputStreamReader inStream = new InputStreamReader(urlConn.getInputStream());
      BufferedReader buff  = new BufferedReader(inStream);
      // put data in queue or some other data structure
   }    
});

service.shutdown(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T09:34:28.593

尝试这个：

```
Thread webReader = new Thread(){
    public void run(){
        URLConnection urlConn = webPageToContact.openConnection();
        InputStreamReader inStream = new InputStreamReader(urlConn.getInputStream());
        BufferedReader buff  = new BufferedReader(inStream);
    }
});
webReader.setDaemon(true);
webReader.start(); 
```

# javascript - 如何按 Meteor 中计算的属性/虚拟属性排序？

> ID：13667994
> 
> 赞同：6
> 
> 时间：2012-12-02T09:31:27.563
> 
> 标签：javascript, mongodb, meteor

最近开始玩 Meteor，遇到了一个问题：我收集了存储在 MongoDB 中并表示测试的记录，每个测试记录都有嵌套的测试执行结果集合/数组。在前端，我试图显示按成功或失败的测试执行次数排序的测试列表。该数字不存储在数据库中，是计算的结果。

谁能提出一个想法如何在 Meteor 中实现它？我还没有找到一种按计算属性排序的方法，并且正在寻找如何制作基于真实的虚拟/代理集合并显示/排序虚拟但还没有找到任何东西的想法。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-31T16:19:13.773

根据我使用 Meteor 的经验，您所追求的是**集合/文档转换**。一些代码，我试图使其与您的上下文相关（未经测试）。

```
Tests = new Mongo.Collection('tests', {
    transform: function(test) {
        test.successCount = function(){
            return Results.find({ testId: test._id, success: true }).count();
        };

        test.failCount = function(){
            return Results.find({ testId: test._id, success: false }).count();
        };

        return test; //this line is mandatory, transform must return the document
    }
}); 
```

根据应用程序的规模和流量，您需要决定每次请求测试文档时都会发生的读取是否比写入测试文档本身的显式成功和失败计数更昂贵或更便宜。

# android - 在弹出窗口中创建片段 - 在 Android 中

> ID：13667996
> 
> 赞同：5
> 
> 时间：2012-12-02T09:31:45.787
> 
> 标签：android, android-layout, android-fragments, popupwindow, android-fragmentactivity

是否可以在 PopupWindow 上加载 Fragment / FragmentActivity 类？我需要一个包含多个站点的 PopupWindow。第一个应该是一些按钮。使用这些按钮，您将更改弹出窗口的布局，并使用例如一些 TextViews 打开一个新窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-08T15:11:55.663

尝试使用[DialogFragment](http://developer.android.com/reference/android/app/DialogFragment.html)类。看到这个[帖子](http://android-developers.blogspot.fr/2012/05/using-dialogfragments.html)。

# android - 如何在自定义对话框 Android（不是对话框）中为 TextView 设置动画

> ID：13667997
> 
> 赞同：0
> 
> 时间：2012-12-02T09:31:50.217
> 
> 标签：android, android-animation, android-dialog

我正在尝试为自定义对话框中的 TextView 设置动画。**我不想为对话框设置动画**，我已经搜索过，但我发现的只是为对话框设置动画，而不是其中的项目。

```
 TextView txt=(TextView) findViewById(R.id.textView1);
             Animation mAnimation = new TranslateAnimation(0, 599, 0, 0);
                mAnimation.setDuration(10000);
                mAnimation.setFillAfter(true);
                mAnimation.setRepeatCount(-1);
                mAnimation.setRepeatMode(Animation.REVERSE);
                txt.setAnimation(mAnimation); 
```

我可以在不是对话框的布局中使用此代码为 TextView 设置动画，我也可以在对话框中显示文本，但是我想在运行时为对话框中的文本设置动画代码，我得到**不幸的是，应用程序已停止**

任何帮助，我尝试了 onCreateDialog 函数，但它已被弃用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T09:35:20.460

您应该让您的`TextView`实例引用对话框中的实例：

```
TextView txt=(TextView) dialog.findViewById(R.id.textView1); 
```

你正在做的是在主要搜索`Layout`它可能不存在，所以你的应用程序退出

# javascript - 在 contenteditable pre 中美化语法高亮

> ID：13667998
> 
> 赞同：2
> 
> 时间：2012-12-02T09:31:54.940
> 
> 标签：javascript, html, css, syntax-highlighting, prettify

我正在使用 google prettify 来突出显示 contenteditable pre 中的代码。contenteditable pre 包含 div 节点，并在用户按下 enter 或 bspace 时为每一行创建/删除 div。

我的 pre 元素包含初始代码，全部在一行上（我需要它在一行上，这样它才能正常工作，所以没有讨厌的 \n 或文本节点）。

```
<pre contenteditable="true" class="prettyprint"><div>&lt;html&gt;</div><div>&lt;body&gt;</div><div>&lt;script&gt;</div><div>var a =3;</div><div>//this is the problem</div><div>function problem(){ return 3; }</div><div>function wrongColor(){};<div>&lt;/script&gt;</div><div>&lt;/body&gt;</div><div>&lt;/html&gt;</div></pre> 
```

Prettify 在做的时候不喜欢这样`//one line comments`，它评论多行。

解释它的最简单方法是看小提琴：http: [//jsfiddle.net/grantk/jwfMr/](http://jsfiddle.net/grantk/jwfMr/)

我的问题是：有没有一种简单的方法可以在不修改源代码的情况下使用 css 或 javascript 解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T09:51:49.223

解决了：`prettyPrintOne()`在每个 div 节点的 innerHTML 的 for 循环中。