# StackOverflow 问答 15974000-15974999

# url - Symfony：根据 url 加载特定配置

> ID：15974001
> 
> 赞同：2
> 
> 时间：2013-04-12T14:28:30.447
> 
> 标签：url, symfony, configuration, parameters

我有一个带有我自己的小 Bundle 的标准 Symfony 2.2 项目。我有一条路线，说我有一条`/{customer}`，我可以`customer`在控制器中很好地阅读，到目前为止一切都很好。

但是，我还想加载一个名为 的配置`config_{customer}.yml`，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T23:17:30.927

您可以在特定的捆绑包与给定的主机匹配时加载它。然后该捆绑包将加载其`services.yml`文件。

```
# app/config/routing.yml
acme_hello:
    resource: "@AcmeHelloBundle/Resources/config/routing.yml"
    host:     "hello.example.com" 
```

您的捆绑包的服务文件：

```
# src/Acme/HelloBundle/Resources/config/services.yml
acme_hello:
    param: value 
```

有关详细信息，请参阅以下 URL。 [http://symfony.com/doc/master/components/routing/hostname_pattern.html](http://symfony.com/doc/master/components/routing/hostname_pattern.html)

# iphone - ios：我在哪里保存由alassets库生成的缩略图

> ID：15974004
> 
> 赞同：0
> 
> 时间：2013-04-12T14:28:38.393
> 
> 标签：iphone, ios, ios5, ios6

我想使用 ALAssetsLibrary 创建一个视频浏览器。我在如何使用 AssetsLibrary 方面向前迈进了一步。但问题在于创建缩略图。我的意思是如果我有超过 300 个视频，在哪里存储缩略图。现在我将它们保存在一个导致崩溃的数组中。我在哪里临时保存缩略图。

请让我知道我必须查看哪些内容。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:31:06.470

我认为您应该在此页面上查看 NSTemporaryDirectory() [https://developer.apple.com/library/mac/#documentation/cocoa/reference/foundation/miscellaneous/foundation_functions/reference/reference.html](https://developer.apple.com/library/mac/#documentation/cocoa/reference/foundation/miscellaneous/foundation_functions/reference/reference.html)。您可以为临时目录中的每个缩略图创建文件，并在程序中维护一组文件名/位置。

# javascript - CSS 过渡和浏览器选项卡

> ID：15974005
> 
> 赞同：2
> 
> 时间：2013-04-12T14:28:39.690
> 
> 标签：javascript, css, window, focus, transition

这是一个非常奇怪的问题：

我有一个圆圈，通过 CSS 旋转转换无限期地旋转，为了让它无限期地旋转，我使用 jquery 将每 30 秒的旋转值更改为更大的值。我发现这比完整的 CSS 解决方案在视觉上更流畅。

然而，我注意到 css 转换的行为是这样的：当窗口 > 选项卡 > 页面 > 元素有另一个选项卡处于活动状态或窗口最小化时，即使转换未完成，它也会停止。

所以jquery继续，但是过渡停止，使得旋转速度增加。停止在选项卡未聚焦时增加旋转的 jquery 函数有帮助，但不能完全解决问题，因为在元素“可见”但选项卡未聚焦的情况下（想想打开的选项卡但上面的另一个程序处于活动状态浏览器或浏览器的另一个窗口可能在磁贴中打开）过渡继续进行，但 jquery 计时器停止，最终使圆圈自行停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:31:47.647

也许您可以使用后台任务来刷新 CSS。查看此线程：[在 Javascript 中执行后台任务](https://stackoverflow.com/questions/1160137/execute-background-task-in-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:31:54.523

你为什么要为此使用过渡？

```
#yourElement {
    animation:spin 10s linear;
    -webkit-animation:spin 10s linear;
}
@keyframes spin {
    from {transform:none}
    to {transform:rotate(360deg)}
}
@-webkit-keyframes spin {
    from {-webkit-transform:none}
    to {-webkit-transform:rotate(360deg)}
} 
```

即使使用选项卡开关，这也会流畅而完美地制作动画。

# visual-studio-2010 - 在哪里可以找到我的 Visual Studio 部件号？

> ID：15974006
> 
> 赞同：2
> 
> 时间：2013-04-12T14:28:40.667
> 
> 标签：visual-studio-2010

我正在处理我们所有 Visual Studio 安装的清单。Microsoft 记录了具有以下部件号的两个 Pro 版本的许可证数量：77D-00110 和 77D-00111。我想确定我们的每台笔记本电脑上安装了哪个，但我不知道在哪里可以找到此许可证来确定哪个 Pro 版本是哪个。知道在哪里可以找到吗？

谢谢，

克里斯

**更新**

77D-00110 指：Microsoft Visual Studio 专业版 - 许可证和软件保证 77D-00111 指： Microsoft Visual Studio 专业版 - 软件保证

# formatting - 在 Orchard 中将日期时间格式化为完整日期/时间模式（短时间）

> ID：15974009
> 
> 赞同：0
> 
> 时间：2013-04-12T14:28:45.467
> 
> 标签：formatting, orchardcms, orchardcms-1.6

在 Orchard CMS（1.6 版）中，我有一个显示名为 StartDate 的 DateTime 属性的查询。设置时，我选择了“完整日期/时间模式（短时间）”作为日期格式，然后我将输出重写如下：

```
<My html text here> {Text} 
```

这将呈现为“我的 html 文本在这里**，星期六，2013 年 4 月 13 日下午 2:30** ”。

我意识到对于不同时区的用户，日期/时间会自动转换，而不是显示下午 2:30（服务器在 PST），而是显示下午 5:30（用户在 EST）。

遵循[Bertrand Le Roy](https://stackoverflow.com/users/363821/bertrand-le-roy)[在这里](https://stackoverflow.com/questions/13386048/convert-datetime-field-token-to-local-time-zone-in-email-rule)的解决方案，它解决了一个小问题。

现在我的代码是这样的：

```
<My html text here> {Content.Fields.MyContentType.MyDateTimeField.DateTime.Local} 
```

结果如下：“我的 html 文本在这里**4/13/2013 2:30:00 PM** ”。

格式不是我宁愿使用的格式。

有谁知道如何将其格式化为完整日期/时间模式（短时间）？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:41:20.680

`{Content.Fields.MyContentType.MyDateTimeField.DateTime.Local.Format:dddd, MMMM d, yyyy h:mm tt}`应该做的伎俩。

# sql-server - 使用 iif 函数更改报表生成器中的图像

> ID：15974012
> 
> 赞同：0
> 
> 时间：2013-04-12T14:28:59.200
> 
> 标签：sql-server, reportbuilder3.0, iif-function

我正在使用 sql server 报告生成器，我正在尝试根据参数中选择的日期更改图像的值。我选择了外部作为源，在表达式窗口中我有这样的东西：

```
=iif(Parameters!Date.Value <> 11.04.2013, "http://rack.0.mshcdn.com/media/ZgkyMDEyLzEyLzA0L2I1L3doZXJlZG9nb29nLmJoTi5qcGcKcAl0aHVtYgk5NTB4NTM0IwplCWpwZw/4931e287/304/where-do-google-doodles-come-from--ff2932470c.jpg", " ") 
```

但我收到以下消息：

`Argument not specified for parameter 'TruePart' of 'Public Function IIf(Expression As Boolean, TruePart As Object, FalsePart As Object) As Object'.`

我对使用报表生成器很陌生，所以请有人帮我找出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:22:57.963

**我将您的表达式粘贴到使用参数Date**、数据类型*Date/Time*设置的示例报告中，并且在使用表达式时遇到了相同的错误。

我通过将与表达式中的参数进行比较的数据更改为可以轻松转换为日期的字符串来解决此问题，因此从`11.04.2013`到`"11-Apr-2013"`：

```
=iif(Parameters!Date.Value <> "11-Apr-2013", "http://rack.0.mshcdn.com/media/ZgkyMDEyLzEyLzA0L2I1L3doZXJlZG9nb29nLmJoTi5qcGcKcAl0aHVtYgk5NTB4NTM0IwplCWpwZw/4931e287/304/where-do-google-doodles-come-from--ff2932470c.jpg", " ") 
```

当我选择不同的日期时，这停止了发生的错误并按预期工作；即除 2013 年 4 月 11 日以外的所有日期的 URL。

# delphi - Delphi：如何创建一个可以位于垂直滚动条上方的“拇指”？

> ID：15974013
> 
> 赞同：0
> 
> 时间：2013-04-12T14:28:59.697
> 
> 标签：delphi

MS Word 有这样一个功能：

![滚动条上方的单词拇指](https://i.stack.imgur.com/dtfUv.png)

小矩形显示在垂直滚动条上方并且是可点击的。例如，我想在我的 TMemo 后代的垂直滚动条上方添加这样的拇指。我怎样才能？我需要处理点击这样的拇指 - 显示分屏（显示第二个备忘录）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:34:36.633

Word 以自定义方式构造此表单 - 它分别将拇指和滚动条添加到窗口。要在 VCL 中模拟这种行为，您必须做同样的事情 - 而不是实例化 TMemo，制作一个包含备忘录和常规滚动条的自定义控件，并使用定位在滚动条上方放置一个具有相同宽度的小按钮。

# ios - 多点触控的两个视图

> ID：15974020
> 
> 赞同：0
> 
> 时间：2013-04-12T14:29:28.853
> 
> 标签：ios, touch, touchesbegan

我应该在主视图中管理两个不同的视图；我想检测我的视图中手指的确切数量，也就是说，如果我在“第一个视图”中有四个手指，我想要一个 var 说我的值 = 4，如果我在“第二个视图”中有 3 个手指，我想要另一个var 说我的值 = 3。我向您展示我的代码不能正常工作。

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

    UITouch *touch = [[event allTouches] anyObject];
    CGPoint touchLocation = [touch locationInView:self.view];

    NSLog(@"cgpoint:%f,%f", touchLocation.x, touchLocation.y);

    if (CGRectContainsPoint(view1.frame, touchLocation)){

        NSLog(@"TOUCH VIEW 1");
        totalTouch1 = [[event allTouches]count];
        NSLog(@"TOTAL TOUCH 1:%d", totalTouch1); 
    }

    else if (CGRectContainsPoint(view2.frame, touchLocation)){

        NSLog(@"TOUCH VIEW 2");
        totalTouch2 = [[event allTouches]count];
        NSLog(@"TOTAL TOUCH 2:%d", totalTouch2);
     }
 } 
```

使用我的代码，如果我开始将手指放在“第一个视图”中，一切都可以，但是例如，如果我将无名指放在第二个视图中，我的代码会进入第一个“如果”并说我的手指还处于第一个视图中. 我不明白这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:38:05.170

`[[event allTouches] anyObject];`只为您带来其中一种触感。

你需要像这样迭代所有的触摸：

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

    int touch1 = 0;
    int touch2 = 0;
    NSArray *touches = [[event allTouches] allObjects];
    for( UITouch *touch in touches ) {
        CGPoint touchLocation = [touch locationInView:self.view];

        NSLog(@"cgpoint:%f,%f", touchLocation.x, touchLocation.y);

        if (CGRectContainsPoint(view1.frame, touchLocation)){

            NSLog(@"TOUCH VIEW 1");
            touch1 += 1;
            NSLog(@"TOTAL TOUCH 1:%d", totalTouch1);
        }

        else if (CGRectContainsPoint(view2.frame, touchLocation)){

            NSLog(@"TOUCH VIEW 2");
            touch2 += 1;
            NSLog(@"TOTAL TOUCH 2:%d", totalTouch2);
        }
    }

    NSLog(@"Total touches on view 1: %d", touch1);
    NSLog(@"Total touches on view 2: %d", touch2);
} 
```

# c# - 为什么没有显示其他资源文件

> ID：15974025
> 
> 赞同：1
> 
> 时间：2013-04-12T14:29:41.247
> 
> 标签：c#, winforms

我将几个资源文件 (.resx) 添加到我的项目中。如果资源文件在根目录中，一切都很好，但是如果我将它移动到一个文件夹，当我想为图片框设置图像时，我无法在选择资源向导中找到我的 (.resx) 文件。只有默认资源文件存在，我必须手动设置它。像这样：

```
this.mnuFinancial Image = global::myProject.myCustomResource.myImage; 
```

# mysql - 删除 mysql_array_fetch

> ID：15974026
> 
> 赞同：0
> 
> 时间：2013-04-12T14:29:45.593
> 
> 标签：mysql, arrays, fetch

我有以下代码，计划是显示数据库中的数据，但如果作业不再可用，则允许站点管理员删除一行。我已将“删除”放在我想要删除该行的链接的位置。我尝试过使用`<a href='delete1.php?del=$row[JobID]'>Delete</a>`，但这只会在页面上引发错误。

```
<?php
include_once('db.php');

$result = mysqli_query($con,"SELECT * FROM Job ORDER BY JobID");

echo "<table border='1'>
      <tr>
          <th>Job ID</th>
          <th>Job Title</th>
          <th>Job Description</th>
          <th>Industry</th>
          <th>Job Type</th>
          <th>Salary</th>
          <th>County</th>
          <th>Town</th>
          <th>Delete</th>
     </tr>";

while($row = mysqli_fetch_array($result))
{
    echo "<tr>";
    echo "<td>" . $row['JobID'] . "</td>";
    echo "<td>" . $row['JobTitle'] . "</td>";
    echo "<td>" . $row['JobDescription'] . "</td>";
    echo "<td>" . $row['Industry'] . "</td>";
    echo "<td>" . $row['JobType'] . "</td>";
    echo "<td>" . $row['Salary'] . "</td>";
    echo "<td>" . $row['County'] . "</td>";
    echo "<td>" . $row['Town'] . "</td>";
    echo "<td>" . "Delete" . "</td>";
    echo "</tr>";
}
echo "</table>";

mysqli_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:34:20.743

你应该把它放在清单代码中：

```
 echo "<a href='delete1.php?del={$row['JobID']}'>Delete</a>"; 
```

（[文档](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing.complex)）

然后，在你的`delete1.php`你应该有类似的东西：

```
$jobid = intval($_GET['JobID']);
if ($jobid > 0) {
     mysqli_query($con, "DELETE FROM Job WHERE JobID=$jobid LIMIT 1");
} 
```

（注意：这是未经测试的，可能很不安全；它只显示了如何做到这一点的概念）

# ios - 转换 __bridge CFType 以支持 ARC

> ID：15974030
> 
> 赞同：2
> 
> 时间：2013-04-12T14:29:54.190
> 
> 标签：ios, objective-c, automatic-ref-counting

有人可以帮我转换下面的代码以支持 ARC 吗？

```
UIFont *boldFont = [UIFont fontWithName:@"DINPro-Medium" size:14];
CTFontRef ctBoldFont = CTFontCreateWithName((__bridge CFStringRef)boldFont.fontName, boldFont.pointSize, NULL);
CGColorRef cgColor = UIColorFromRGB(0x2b776d).CGColor;

NSNumber* underline = [NSNumber numberWithInt:kCTUnderlineStyleSingle];
NSDictionary *ULSubattributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                     CFBridgingRelease(ctBoldFont), (id)(id)kCTFontAttributeName,
                                     cgColor, (id)kCTForegroundColorAttributeName,underline, (NSString*)kCTUnderlineStyleAttributeName, nil]; 
```

我在最后一行说崩溃了，

```
*** -[Not A Type retain]: message sent to deallocated instance 0x20ad4910
*** -[Not A Type class]: message sent to deallocated instance 0x20ad4910 
```

我希望这是一个重复的问题。但我被困住了。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:47:38.643

这是我的一些实际工作代码，它们的功能与您的非常相似：

```
 CTFontRef font2 =
     CTFontCreateCopyWithSymbolicTraits (
         basefont, f, nil, kCTFontBoldTrait, kCTFontBoldTrait);
 NSDictionary* d2 =
     @{(NSString*)kCTFontAttributeName: CFBridgingRelease(font2)};
 [mas addAttributes:d2 range:encRange]; 
```

请注意，我*不*释放`font2`！`CFBridgingRelease`意思是“ARC，这个对象已经被保留了，*你*到时候释放它。” 而ARC确实如此。没有泄漏，没有僵尸，没有崩溃，没有问题。

（另一方面，`basefont`较早创建`CTFontCreateWithName`并从未移交给 ARC 进行控制的 ，必须使用 显式释放`CFRelease`。）

这是我书中更多的核心文本代码，贯穿始终显示 ARC 内存管理：

[http://www.aeth.com/iOSBook/ch23.html#_core_text](http://www.apeth.com/iOSBook/ch23.html#_core_text)

这是我书中关于使用 ARC 进行 CFType 内存管理的部分：

[http://www.aeth.com/iOSBook/ch12.html#_memory_management_of_cftyperefs](http://www.apeth.com/iOSBook/ch12.html#_memory_management_of_cftyperefs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T14:44:46.323

```
/* OK */UIFont *boldFont = [UIFont fontWithName:@"DINPro-Medium" size:14];
assert(boldFont); // just be sure
/* OK */CTFontRef ctBoldFont = CTFontCreateWithName((__bridge CFStringRef)boldFont.fontName, boldFont.pointSize, NULL);
assert(boldFont); // just be sure

/* 1) CGColorRef cgColor = UIColorFromRGB(0x2b776d).CGColor; */
CGColorRef cgColor = CGColorCreateCopy( UIColorFromRGB(0x2b776d).CGColor );
assert(cgColor); // just to be sure

/* OK */NSNumber* underline = [NSNumber numberWithInt:kCTUnderlineStyleSingle];

NSDictionary *ULSubattributes = @{ 
/* you don't own the kCT strings */(__bridge NSString *)kCTFontAttributeName : CFBridgingRelease(ctBoldFont),
/* ... */   (__bridge NSString *)kCTForegroundColorAttributeName : CFBridgingRelease(cgColor),
/* ... */   (__bridge NSString *)kCTUnderlineStyleAttributeName : underline }; 
```

1) iOS pre-iOS6 中存在一个错误，当您仍在使用 CGColorRef 时，ARC 将释放支持 CGColorRef 的 UIColor。我知道这一点，因为我创建了一个 rdar，然后在 iOS 6 中报告为已修复。

[PS：这里](http://mikeash.com/pyblog/friday-qa-2011-09-30-automatic-reference-counting.html)是 Mike Ash 的一篇不错的博客

编辑：此代码在我的 iOS 演示应用程序中运行良好（部署设置为 5.1 和 6） - 请参阅日志消息。我把 dict 变成了 ivar。

```
{

    UIFont *boldFont = [UIFont fontWithName:@"Helvetica" size:14];
    assert(boldFont); // just be sure
    CTFontRef ctBoldFont = CTFontCreateWithName((__bridge CFStringRef)boldFont.fontName, boldFont.pointSize, NULL);
    assert(boldFont); // just be sure

    CGColorRef cgColor = CGColorCreateCopy( [UIColor colorWithRed:0.8f green:0.8f blue:0.8f alpha:0.8f].CGColor );
    assert(cgColor);

    NSNumber* underline = [NSNumber numberWithInt:kCTUnderlineStyleSingle];
    assert(underline);

    ULSubattributes = @{ 
        (__bridge NSString *)kCTFontAttributeName : CFBridgingRelease(ctBoldFont),
        (__bridge NSString *)kCTForegroundColorAttributeName : CFBridgingRelease(cgColor),
        (__bridge NSString *)kCTUnderlineStyleAttributeName : underline };

    NSLog(@"ULSubattributes: %@", ULSubattributes);
} 
```

> 2013-04-12 11:48:20.294 WebViewScrollTester[44147:c07] ULSubattributes: { CTForegroundColor = " [ (kCGColorSpaceDeviceRGB)] ( 0.8 0.8 0.8 0.8 )"; NSFont = "CTFont \nCTFontDescriptor {type = mutable dict, count = 1,\nentries =>\n\t1 : {contents = \"NSFontNameAttribute\"} = {contents = \"Helvetica\"}\n}\n> "; NSUnderline = 1; }

EDIT2：我什至添加了一个 dispatch_after 以显示 ARC 没有发布任何内容：

```
 dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 5 * NSEC_PER_SEC), dispatch_get_main_queue(), ^
        {
            NSLog(@"ULSubattributes: %@", ULSubattributes);
        } ); 
```

# python - 通过 django send_mail 发送电子邮件

> ID：15974034
> 
> 赞同：0
> 
> 时间：2013-04-12T14:30:11.303
> 
> 标签：python, django

我已经使用 django send_mail 很长时间了。然而，在一个使用 django 1.4 的新项目中，我改变了我的开发机器，我遇到了一个非常奇怪的问题。

当我使用所有设置（EMAIL_HOST='localhost' EMAIL_PORT=25 等）在标准后端调用 send_mail 时，我收到错误消息：

```
 File "c:\python27\lib\site-packages\django\core\mail\backends\smtp.py", line 4
  8, in open local_hostname=DNS_NAME.get_fqdn())
  File "c:\python27\lib\smtplib.py", line 249, in __init__
  (code, msg) = self.connect(host, port)
  File "c:\python27\lib\smtplib.py", line 309, in connect
  self.sock = self._get_socket(host, port, self.timeout)
  File "c:\python27\lib\smtplib.py", line 284, in _get_socket
  return socket.create_connection((port, host), timeout)
  File "c:\python27\lib\socket.py", line 571, in create_connection
  raise err
  socket.error: [Errno 10013] An attempt was made to access a socket in a way forb
  idden by its access permissions 
```

我不知道我做错了什么，我已经调试过了，似乎连接函数接收到了正确的端口和主机，但是它被禁止了。我怀疑它可能是我的防病毒软件，但禁用它并没有帮助。

如果有人认为这是问题所在，我正在使用管理员权限（禁用 UAC）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:05:55.177

奇怪的。我将我的电子邮件服务器（python SMTPd）更改为端口 1025 而不是 25，一切恢复正常......

# java - GAE - 如何将服务器对象信息传递给客户端？

> ID：15974044
> 
> 赞同：0
> 
> 时间：2013-04-12T14:30:45.050
> 
> 标签：java, json, google-app-engine

在 Google App Engine 中，我在服务器上有一个对象/模型。我们称它为“汽车”。现在“Car”对象有几个属性（“Model”、“Year”等）。我想将“汽车”对象的信息从服务器传递到客户端，包括它的一些（如果不是全部）属性。一种选择是在客户端和服务器上完全定义“汽车”对象，方法是在两者上共享模型，但这比我需要的要多。另一个是定义模型的客户端版本，但这会导致两个模型之间的混淆，实际上我只想要模型的一些属性。很可能我只想传回我想要的几条信息。我知道我可以做到这一点的一种方法是将信息转换为 json 字符串并传递它。但是，我' 我不确定这是否是首选方法，或者是否有缺点。App Engine 是否有首选方式来传递此类信息？在 json 字符串中传递信息有什么缺点？是否有另一种方法具有与 json 字符串相同的优点但没有这个缺点？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T14:47:22.543

没有首选方法，无论哪种方法最适合您的应用程序。从/到 JSON 的手动（反）序列化对我来说似乎有点过头了。我通常做的是创建一个包装类并将其放在客户端和服务器共享的包中。为了使代码更易于维护，我倾向于（即尽可能）定义一个构造函数，该构造函数接收底层对象并提取所需的属性子集，使包装对象不可变等。

# c# - 如何在 C# 中读取 JSON 文件？

> ID：15974045
> 
> 赞同：0
> 
> 时间：2013-04-12T14:30:47.780
> 
> 标签：c#, json

我有这个 JSON 文件。我想在 C# 中动态地从所有构造函数 Animal 中读取 id、name、age 及其值。有谁知道该怎么做？非常感谢。

```
new Animals(
  new Animal(
   "id": "001",
   "name": "Monkey",
   "age": "2",
  ),
  new Animal(
   "id": "002",
   "name": "Elephant",
   "age": "4",
  )
) 
```

# c# - Sql 内连接一个选择语法到 lambdas .join() 语法

> ID：15974050
> 
> 赞同：1
> 
> 时间：2013-04-12T14:31:01.777
> 
> 标签：c#, sql, syntax, lambda

我得到了这个查询：

```
select t.user
     , t.loginDate 
from t_login as t
inner join 
(
    select user, max(loginDate) as mostRecentLoginDate 
    from t_login 
    group by user
) as tt
    on t.user = tt.user 
   and t.loginDate = tt.mostRecentLoginDate ; 
```

这个查询很好用，它为我的用户提供了最近的 loginDate。

现在我想在我的 C# 代码的 Lambdas 语法中使用这个查询。

那可能吗 ？

编辑 ：

C#代码：

```
myApp.DataLayer dl = new myapp.DataLayer();
IQueryable<Logins> logins = dl.getAllLogins();

if(displayRecent)
{
    logins = logins.Where(p => p.LoginDate == logins.Where(pp => pp.User == p.User).Max(pp => pp.LoginDate));
}

foreach (Login login in logins) // here it crash with StackOverflow exception 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:33:44.273

尝试以下方式：

```
var latestLogin = logins.Where(u => u.user == "userName").Max(u => u.logindate); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:35:55.190

这是一个使用 Linq 反对的测试。它应该适用于 Linq to SQL：

```
 public class Login { public DateTime loginDate { get; set; } public string user { get; set; } }

    [TestMethod()]
    public void foo()
    {
        var logins = new[] { 
          new Login() { loginDate = new DateTime(2013, 5, 1), user = "u1" }
        , new Login() { loginDate = new DateTime(2013, 5, 2), user = "u1" }
        , new Login() { loginDate = new DateTime(2013, 5, 3), user = "u2" }
        , new Login() { loginDate = new DateTime(2013, 5, 4), user = "u2" }

        };

        var lastLogins = logins.Where(l =>
                    l.loginDate == logins.Where(ll => ll.user == l.user)
                                         .Max(ll => ll.loginDate)
        ).ToList();
    } 
```

# ubuntu - 在 Ubuntu 12.04 上的 Nginx 中设置 iRedMail 管理站点

> ID：15974056
> 
> 赞同：2
> 
> 时间：2013-04-12T14:31:15.880
> 
> 标签：ubuntu, ssl, nginx, ubuntu-12.04

我花了很长时间让这个工作，但在任何地方都找不到可靠的答案，所以我想我会把我的解决方案发布到 SO，这样其他人可能会觉得它有用。

我想在与我的 MX 服务器分开的虚拟机上运行我所有的 SSL 站点，而 iRedMail 默认情况并非如此。使用 nginx 让 phpMyAdmin 和 roundcube 在新服务器上运行很容易，这里将不再介绍，让管理面板在 nginx 下使用 uwsgi 运行并不容易。

这样做的最终结果是一台服务器仅作为邮件服务器，一台运行 nginx 的服务器用于 Web 管理。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T14:36:25.867

我从全新的 Ubuntu 12.04.2 LTS 安装开始，使用默认选项设置 2 个服务器，仅在安装服务器以远程访问时添加 OpenSSL。一台服务器是邮件服务器，一台是 SSL Web 服务器。

在邮件服务器上，我下载了最新版本的 iRedMail（截至本文为 0.8.4）并运行安装以设置邮件服务器组件。我使用 mySQL 作为后端，所以我检查了该选项，输入了我的域信息和密码的其余部分，最后一页只检查了 DKIM、iRedAdmin 和 Fail2Ban。

在 web nginx SSL 服务器上...再次默认安装，仅添加 OpenSSL。

以下是以 root 身份运行的命令，用于安装运行管理面板所需的组件：

```
apt-get update
apt-get install nginx uwsgi uwsgi-plugin-python python-pip python-mysqldb
pip install jinja2
pip install web.py 
```

然后，我创建了我希望放置和设置 iRedAdmin 的位置

```
mkdir /var/www/iredadmin
mkdir /var/www/iredadmin/static
mkdir /var/www/iredadmin/python-home 
```

并复制直接从邮件服务器安装的 iredadmin 并将其放入新服务器的目录中。

```
scp -r user@mail-server:/usr/share/apache2/iredadmin/* /var/www/iredadmin/ 
```

创建了 uwsgi 应用程序配置 ini 文件，位于：/etc/uwsgi/apps-available/iredadmin.ini

```
[uwsgi]
plugins=python
vhost=true
socket=/var/run/uwsgi/app/iredadmin/iredadmin.socket 
```

创建软链接以启用应用程序：

```
ln -s /etc/uwsgi/apps-available/iredadmin.ini /etc/uwsgi/apps-enabled/iredadmin.ini 
```

为位于 /etc/nginx/sites-available/iredadmin 的 nginx 创建虚拟主机配置

```
server {
    listen 443 ssl; ## listen for ipv4; this line is default and implied
    access_log /var/log/nginx/iredadmin.access.log;
    error_log /var/log/nginx/iredadmin.error.log;

   ssl_certificate /etc/nginx/ssl/star.crt;
   ssl_certificate_key /etc/nginx/ssl/server.key;
   ssl_session_timeout 5m;
   ssl_protocols SSLv3 TLSv1;
   ssl_ciphers ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv3:+EXP;
   ssl_prefer_server_ciphers on;

    server_name iredadmin.server.com;

    location / {
    root /var/www/iredadmin/;
    uwsgi_pass unix:///var/run/uwsgi/app/iredadmin/iredadmin.socket;
    uwsgi_param UWSGI_PYHOME /var/www/iredadmin/python-home;
    uwsgi_param UWSGI_CHDIR /var/www/iredadmin;
    uwsgi_param UWSGI_SCRIPT iredadmin;
    include uwsgi_params;
    }

    location /static {
    alias /var/www/iredadmin/static/;
        }

    location ~ /\.ht {
            deny all;
    }
} 
```

并创建了一个软链接以启用 nginx 站点：

```
ln -s /etc/nginx/sites-available/iredadmin /etc/nginx/sites-enabled/iredadmin 
```

最后，重新启动服务并从浏览器转到您的服务器名称：

```
/etc/init.d/uwsgi restart
/etc/init.d/nginx restart 
```

# search-engine - 在复杂网页中使用微数据

> ID：15974058
> 
> 赞同：0
> 
> 时间：2013-04-12T14:31:18.903
> 
> 标签：search-engine, microdata

我有一个现有的网站。我在这个网站上有代表带有评论的产品的页面。我想使用微数据在 Google 上公开汇总评论。我的挑战是每个产品页面都相当复杂。我们花了很多钱来按照我们想要的方式设计。虽然我们的搜索结果现在看起来不错，但我们不确定如何添加汇总评论信息。

我查看了[这里](https://support.google.com/webmasters/bin/answer.py?hl=en&answer=146645)找到的信息。然而，看起来我们必须改变我们的页面设计。我们不想那样做。有没有办法在不改变我们设计的情况下获得聚合评论搜索引擎结果？理想情况下，我真的很想在 .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T08:26:05.723

您可以限定元数据以封装整个页面，甚至在 body 标记上也是如此。这样，信息可以在您的整个设计中传播，并且仍然是同一实体的一部分。

如果您的信息不能分层以形成正确的实体，您可以使用[itemref 属性](http://www.w3.org/TR/microdata/#attr-itemref)。引用标准：

> 注意： itemref 属性不是微数据数据模型的一部分。它只是一种句法结构，可帮助作者将注释添加到要注释的数据不遵循方便的树形结构的页面。

# android - 如何指导用户为我的应用启用无障碍服务

> ID：15974070
> 
> 赞同：3
> 
> 时间：2013-04-12T14:32:08.750
> 
> 标签：android, accessibility

我知道以编程方式为应用程序启用辅助功能服务是不可能的，所以我想将用户引导到这个屏幕： `System settings`--> `Accessibility`--> `app name`--> `enable/disable screen`。那可能吗 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T14:35:39.563

您可以在大多数设备上[使用`ACTION_ACCESSIBILITY_SETTINGS`](http://developer.android.com/reference/android/provider/Settings.html#ACTION_ACCESSIBILITY_SETTINGS). 然而：

*   这可能不适用于所有设备，因此您只需将它们发送到设置作为后备，如果您获得`ActivityNotFoundException`

*   没有办法让它们直接进入任何给定的应用程序，更不用说启用/禁用屏幕了

# javascript - 根据偏移量围绕文本创建跨度

> ID：15974075
> 
> 赞同：0
> 
> 时间：2013-04-12T14:32:21.773
> 
> 标签：javascript, jquery, html, offset

我们正在尝试将内容放入主 div 中的 div 中。但一半的线路正在被削减。我们应该如何避免这种情况。我们应该如何识别那条线并围绕这些词创建跨度并将其稍微向上或向下移动。

我们正在尝试使用`offsetheight`，`offsetTop`等等，因为我们不想使用滚动条。jquery中的任何想法来处理这个问题。

代码在这里：[jsfiddle](http://jsfiddle.net/tejaswi_kandula/r5eZ7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:17:35.943

我在玩你的代码......我不是 100% 确定你想要完成什么......但请查看我所做的修改，如果它让你更接近你想要做的事情，请告诉我.

我添加了下一个和上一个的功能，还修改了你周围的盒子，所以没有填充。您可以调整所有这些，但也许这会阻止尝试通过 jquery 移动东西的需要？

**演示：http:** [//jsfiddle.net/r5eZ7/3/](http://jsfiddle.net/r5eZ7/3/)

```
 $(".next").click(function() {
    var visiblep = $(".content p:visible");
    if (visiblep.next().length == 0) 
    {
      $(".content p:first").show();
    }
    else
    {
      visiblep.next().show();
    }
    visiblep.hide();
  }); 
```

# jquery - 获取数据属性值...数据返回 null

> ID：15974077
> 
> 赞同：2
> 
> 时间：2013-04-12T14:32:22.077
> 
> 标签：jquery

我有以下标签：

```
<a href="#" class="Test" data-url="/api/users/unlock">Test</a> 
```

以及以下 JQuery：

```
$('a.Test').click(function (e) {
  alert(e.data); >> This returns null
  jQuery.support.cors = true;
  $.ajax({
    url: e.data('url'),
    type: 'GET',
    dataType: 'json',
    success: function (data) {
      alert(data)
    },
    error: function () {
      alert("Failure!");
    }
  }); 
```

});

基本上，我试图在 Ajax 调用中使用 data-url 的 url。

这不起作用，当我尝试 alert(e.data) 时，我得到空值。

我究竟做错了什么？

谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T14:34:20.810

您需要使用 data() 函数，例如：

你需要`$(this).data("url");`

而且，需要注意的是， $(this) 将失去 $.ajax 调用内部的范围，因此请务必在其外部设置一个变量并改用它。IE

```
$('a.Test').click(function (e) {
  var url = $(this).data("url");
  jQuery.support.cors = true;
  $.ajax({
    url: url,
    type: 'GET',
    dataType: 'json',
    success: function (data) {
      alert(data)
    },
    error: function () {
      alert("Failure!");
    }
  }); 
```

# javascript - jQuery 从 1.8.3 迁移到 1.9.1 在一行中停止工作，我不知道为什么

> ID：15974079
> 
> 赞同：3
> 
> 时间：2013-04-12T14:32:25.517
> 
> 标签：javascript, jquery, migration, jquery-1.9, jquery-1.8

我正在使用这段代码：

```
http://labs.abeautifulsite.net/archived/jquery-alerts/demo/ 
```

它适用于 jQuery 1.8.3。

现在我更改为 jQuery 1.9.1，它停止工作

我的大多数其他代码都有问题，主要是我必须将 .live 更改为 .on 并解决了（我不知道这是否是正确的做法），但是使用此代码，我找不到问题.

这条线似乎给出了问题：

```
// IE6 Fix
var pos = ($.browser.msie && parseInt($.browser.version) <= 6 ) ? 'absolute' : 'fixed'; 
```

您可以在 jsFiddle 中对其进行测试，也可以更改为 jQuery 1.8.3，看看它是如何工作的。

[http://jsfiddle.net/sebababi/P8sfn/1/](http://jsfiddle.net/sebababi/P8sfn/1/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T14:33:58.050

`$.browser`在 jQuery 1.3 中已弃用并在 1.9 中删除。

[http://jquery.com/upgrade-guide/1.9/#jquery-browser-removed](http://jquery.com/upgrade-guide/1.9/#jquery-browser-removed)

在迁移到 1.9x 时，您应该使用[jQuery 迁移插件来查看任何错误。](http://jquery.com/upgrade-guide/1.9/#jquery-migrate-plugin)此外，jQuery 建议将特征检测与诸如 Modernizr 之类的库一起使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T14:34:45.337

您可以使用[**jQuery Migrate 插件**](http://blog.jquery.com/2013/02/16/jquery-migrate-1-1-1-released/)并调用`$.browser`. 它会起作用的！

使用插件很容易；例如，只需在 jQuery 的脚本标记之后立即包含它。

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.1.1.js"></script> 
```

JS：

```
$.each($.browser, function(i, val) {
  $("<div>" + i + " : <span>" + val + "</span>")
  .appendTo( document.body );
}); 
```

[**DEMO HERE**](http://jsfiddle.net/Hcgtr/)（请参阅左侧选中的 Migrate 1.1.0 复选框）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:04:45.167

使用特征检测。

```
var someEl = $("#theid");
someEl.css("position","fixed");
if ( someEl.css("position") == "static" ) {
    // doesn't support fixed, use absolute
    someEl.css("position","absolute");
} 
```

（未测试）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T14:35:04.917

$.browser 已从 1.9 中删除。您可以使用 jQuery Migrate 来获得 $.browser 支持。

见前文：[TypeError: 'undefined' is not an object (evalating '$.browser.msie')](https://stackoverflow.com/questions/14518300/typeerror-undefined-is-not-an-object-evaluating-browser-msie)

# c++ - 模板成员函数的实例化

> ID：15974080
> 
> 赞同：49
> 
> 时间：2013-04-12T14:32:26.877
> 
> 标签：c++, templates

在`Class.h`：

```
class Class {
public:
    template <typename T> void function(T value);
}; 
```

在`Class.cpp`：

```
template<typename T> void Class::function(T value) {
    // do sth
} 
```

在`main.cpp`：

```
#include "Class.h"

int main(int argc, char ** argv) {
    Class a;
    a.function(1);
    return 0;
} 
```

我收到一个链接错误，因为`Class.cpp`从不实例化`void Class::function<int>(T)`. 您可以使用以下命令显式实例化模板类：

```
template class std::vector<int>; 
```

您如何显式实例化非模板类的模板成员？

谢谢，

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-04-12T14:36:51.507

您可以在 中使用以下语法`Class.cpp`：

```
template void Class::function(int); 
```

由于类型推导，模板参数可以省略，这适用于函数模板。因此，以上等价于以下，只是更简洁：

```
template void Class::function<int>(int); 
```

请注意，没有必要指定函数参数的名称——它们不是函数（或函数模板）签名的一部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T14:37:28.340

您是否尝试过以下内容`Class.cpp`？

```
template void Class::function<int>(int value); 
```

# mysql - 最常见的值子查询 MySql

> ID：15974083
> 
> 赞同：0
> 
> 时间：2013-04-12T14:32:30.860
> 
> 标签：mysql, sql

还有其他方法可以编写此查询吗？我尝试在子查询中执行此操作，但由于有多个列，它不起作用。看起来这个查询只能自己工作。请纠正我

记录

PK记录Id

日期查看

看车

我试过这个

```
 SELECT R.`dateViewed` FROM Records ,(
   SELECT R.CarViewed, COUNT(R.CarViewed) as cnt FROM  Records R
   GROUP BY R.CarViewed
   ORDER BY cnt DESC
   LIMIT 1 ) AS favouriteCarOfTheDay
   GROUP BY R.`dateViewed 
```

然后我尝试了这个

```
 SELECT R.`dateViewed` ,COUNT(R.CarViewed) as cnt FROM Records ,
   (
   SELECT R.CarViewed FROM  Records R
   GROUP BY R.CarViewed
   ORDER BY cnt DESC
   LIMIT 1 ) AS favouriteCarOfTheDay
   GROUP BY R.`dateViewed 
```

在我尝试过的许多其他查询中，我不知道如何让它工作。

简而言之，对于特定日期，我想获取查看次数最多的汽车。

喜欢：日期查看最喜欢的CarOfTheDay

```
2012-09-22 | Nissan

2012-09-23 | BMW 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:02:55.267

我认为以下应该有效（免责声明，不是我自己的全部工作，改编自[另一个问题](https://stackoverflow.com/questions/344665/get-most-common-value-in-sql)的答案）

```
SELECT DISTINCT
    R.dateViewed,
    R.CarViewed
FROM Records R
WHERE
    R.dateViewed =
        (SELECT R2.dateViewed FROM
            (
                SELECT R1.dateViewed, COUNT(*) AS numViewed
                FROM Records R1 
                WHERE R1.CarViewed = R.CarViewed
                GROUP BY R1.dateViewed
                ORDER BY R1.numViewed DESC
            ) AS R2
            LIMIT 1
        )
ORDER BY r.dateViewed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:41:46.403

尝试这个

```
 SELECT R.`dateViewed` ,COUNT(R.CarViewed) as cnt ,R.CarViewed FROM Records R
   GROUP BY R.`dateViewed 
   ORDER BY COUNT(R.CarViewed) DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:09:45.470

这样的事情在 MySQL 中真的很糟糕，所以它实际上可能比两个相关的子查询慢，但至少它返回汽车和它的视图计数：

```
SELECT counts.`dateViewed`,counts.`CarViewed` as favourite_car, counts.cnt
FROM
(SELECT R.`dateViewed` ,R.`CarViewed`, COUNT(*) as cnt 
FROM Records
GROUP BY R.`dateViewed` ,R.`CarViewed`
) as counts JOIN
(SELECT R.`dateViewed`, MAX(cnt) as cnt
FROM
(SELECT R.`dateViewed` ,R.`CarViewed`, COUNT(*) as cnt 
FROM Records
GROUP BY R.`dateViewed` ,R.`CarViewed`
) as q
GROUP BY R.`dateViewed`) as maxes
ON counts.cnt=maxes.cnt 
```

# javascript - 未捕获的引用错误

> ID：15974084
> 
> 赞同：3
> 
> 时间：2013-04-12T14:32:36.987
> 
> 标签：javascript, html, referenceerror

我正在尝试使用`onEnded`HTML5 中的属性一首一首地播放 3 首歌曲。这是我的第一次尝试，但出现错误。

**错误 ：** `Uncaught ReferenceError: src is not defined nextSong marioKart.html:49 onended marioKart.html:58`

下面是我的代码：

```
<script>
function nextSong(){
    var song = document.getElementById("player");
    song.attr(src,"countdown.wav");
}
</script>
</head>

<body>
<div style="position:relative">
<audio controls autoplay="true" onEnded="nextSong()" onplay="race()" >
     <source id="player" src="startMusic.wav" type="audio/mpeg" />
</audio> 
```

有人可以帮助我实现这一目标吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T14:33:54.193

您应该将[attr()](http://api.jquery.com/attr/)与 jQuery 元素一起使用，但与 DOM 对象一起使用时，`src`如果它不是可变的，也应将其括在引号中。

*使用 jQuery 对象*

```
$(song).attr('src',"countdown.wav"); 
```

*使用 DOM 对象*

```
song.src = "countdown.wav"; 
```

# angularjs - angularjs中的条件ng-include

> ID：15974086
> 
> 赞同：94
> 
> 时间：2013-04-12T14:32:43.133
> 
> 标签：angularjs, angularjs-ng-include

如何在 angularJS 中有条件地执行 ng-include？

`x`例如，如果变量设置为，我只想包含一些内容`true`。

```
<div ng-include="/partial.html"></div> 
```

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-04-12T14:35:32.253

如果您使用的是 Angular v1.1.5 或更高版本，您还可以使用[ng-if](http://code.angularjs.org/1.1.5/docs/api/ng.directive:ngIf)：

```
<div ng-if="x" ng-include="'/partial.html'"></div> 
```

* * *

如果您有任何旧版本：

使用[ng-switch](http://docs.angularjs.org/api/ng.directive:ngSwitch)：

```
<div ng-switch on="x">
   <div ng-switch-when="true" ng-include="'/partial.html'"></div>
</div> 
```

[小提琴](http://jsfiddle.net/mrajcok/pMp9M/)

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2013-04-12T16:18:08.873

你也可以做

```
<div ng-include="getInclude()"></div> 
```

在您的控制器中

```
$scope.getInclude = function(){
    if(x){
        return "partial.html";
    }
    return "";
} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-04-26T10:07:43.070

其中一个答案的可读性更高的版本。加上设置`ng-include`以`null`删除元素 - 就像`ng-if`.

```
<div ng-include="x ? 'true-partial.html' : null"></div> 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-01-24T20:18:13.357

如果条件足够简单，您也可以将条件逻辑直接放在 ng-include 表达式中：

```
<div ng-include="x && 'true-partial.html' || 'false-partial.html'"></div> 
```

请注意，该表达式`x`不在单引号中，因此已被评估。有关详细信息，请参阅[http://plnkr.co/edit/4fvNDa6Gm3dbVLgsAZrA 。](http://plnkr.co/edit/4fvNDa6Gm3dbVLgsAZrA)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-12T09:00:04.397

我遇到了类似的问题，可能这个发现可以帮助某人。我必须在点击链接时显示不同的部分，但 ng-if 和 ng-switch 在这种情况下都不起作用（下面的代码不起作用）。

```
<button type="button" class="btn btn-link" ng-click="viewType('LIST')">List All</button>
<button type="button" class="btn btn-link" ng-click="viewType('EDIT')">Edit</button>
<button type="button" class="btn btn-link" ng-click="viewType('VIEW')">View</button>

<section class="col-md-8 left-col">
    <span ng-if = "LIST">
        <div data-ng-include="'./app/view/articles/listarticle.html'">
    </span>
    <span ng-if = "EDIT">
        <div data-ng-include="'./app/view/articles/editorarticle.html'">
    </span>

</section> 
```

所以我所做的是，而不是使用 ng-if，单击链接时只需更新 partialArticleUrl 的值（这是控制器中的模型）并在 html 上声明以下代码。

```
 <section class="col-md-8 left-col">
            <div data-ng-include="partialArticleUrl">
        </section> 
```

# php - JavaScript、jQuery、AJAX 和重音字符：如何让它们工作？

> ID：15974090
> 
> 赞同：0
> 
> 时间：2013-04-12T14:32:55.650
> 
> 标签：php, jquery, ajax, utf-8, non-ascii-characters

我在通过 AJAX 和 jQuery 显示重音字符时遇到问题。我会更详细地解释它。

我有一个页面，其中有一个`input`字段。当我用 4 个字符（必须是机场的 ICAO 代码）填充该字段时，它会通过 AJAX 调用 PHP 脚本。脚本如下：

**文件：** *ajax.airport.php*

```
<?php
    include("mysqlexec.inc.php");
    include("functions.inc.php");

    if(isset($_GET['icao'])){ 
        $airportData = GetAirportInfo($_GET['icao']);  

        if (!empty($airportData["Name"])) {
            echo $airportData["Name"];
        } else {
            echo "Not found!";
        }
    }
?> 
```

该函数向显示机场名称的[Our Airports](http://www.ourairports.com/ "我们的机场")网站`GetAirportInfo();`发出 HTTP 请求。如果您可以查看[此示例页面](http://www.ourairports.com/airports/SBGL/pilot-info.html)，您可能会注意到 ICAO 代码是***SBGL***，它是由用户输入的，并且函数（它是数组的元素）的返回将是***Galeão-Antônio Carlos Jobim Intl***，带有一些重音字符。*`input``GetAirportInfo();`*

 **问题是，当在文件中回显此内容时，却出现**了 Gale�o - Ant�nio Carlos Jobim Intl**。

所有文件都是`UTF-8`（没有 BOM）。我尝试了几个函数（PHP 和 JS 类型），但都没有成功。

在输入上执行的 jQuery 函数是这样的：

```
function showAirport(icao, dest) {
    var icao=icao.toUpperCase();

    if (icao.length < 4) {
       $("#"+dest).html("");
    } else {
       $("#"+dest).html('<img src="images/loadingsm.gif"/>');
       $.ajax({
           type    : "GET",
           url     : "ajax.airport.php",
           dataType: "html",
           data    : { icao: icao },
           success : function (result) {
               $("#"+dest).html(result);
           },
       });
    }
}; 
```

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:06:18.580

有检查 contentType 属性

```
function showAirport(icao, dest) {
var icao=icao.toUpperCase();

if (icao.length < 4) {
   $("#"+dest).html("");
} else {
   $("#"+dest).html('<img src="images/loadingsm.gif"/>');
   $.ajax({
       type    : "GET",
       contentType: "text/xml;charset=utf-8",
       url     : "ajax.airport.php",
       dataType: "html",
       data    : { icao: icao },
       success : function (result) {
           $("#"+dest).html(result);
       },
   });
} 
```

};

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:11:03.863

我认为您应该`$airportData["Name"]`在 ajax.airport.php 回显之前进行编码，在`json_encode()`ajax 数据回显之前使用。其他一些语言需要浏览器可以识别的编码

```
include("mysqlexec.inc.php");
include("functions.inc.php");

if(isset($_GET['icao'])){ 
    $airportData = GetAirportInfo($_GET['icao']);  

    if (!empty($airportData["Name"])) {
        echo json_encode($airportData["Name"]);
    } else {
        echo "Not found!";
    }
} 
```**

# math - 2D 坐标旋转 - 图像失真

> ID：15974097
> 
> 赞同：0
> 
> 时间：2013-04-12T14:33:11.183
> 
> 标签：math, rotation, coordinates, trigonometry, distortion

我有一个箭头，表示为 X，Y 点，我想旋转 25 度。我的箭头旋转了，但看起来不再好。角度不再是应有的 90 度。要点：

```
-85.0,0.0
-25.0,50.0
-25.0,15.0
85.0,15.0
85.0,-15.0
-25.0,-15.0
-25.0,-50.0
-85.0,0.0 
```

这使图像[看起来像这样](http://itools.subhashbose.com/grapher/index.php?x%5B%5D=-85&y%5B%5D=0&x%5B%5D=-25&y%5B%5D=50&x%5B%5D=-25&y%5B%5D=15&x%5B%5D=85&y%5B%5D=15&x%5B%5D=85&y%5B%5D=-15&x%5B%5D=-25&y%5B%5D=-15&x%5B%5D=-25&y%5B%5D=-50&x%5B%5D=-85&y%5B%5D=0&submit=Plot%20Graph&w=800&h=800&n=&dtsz=Auto&title=Arrow,%20no%20rotation&shax=on&xlbl=&axx=on&aspx=Auto&ylbl=&axy=on&aspy=Auto&sh_lbl_hv=on&nfurl=on&nStrip=on)。

这是我的（PHP）代码来旋转点：

```
$pts = array(
    array( -85, 0 ),
    array( -25, 50 ),
    array( -25, 15 ),
    array( 85, 15 ),
    array( 85, -15 ),
    array( -25, -15 ),
    array( -25, -50 ),
    array( -85, 0 ),
);

$rotate = deg2rad( 25 );
$sin = sin( $rotate );
$cos = cos( $rotate );

foreach( $pts as $xy ) {
    list( $x, $y ) = $xy;

    // Rotate
    $x2 = ( $x * $cos ) - ( $y * $sin );
    $y2 = ( $x * $sin ) + ( $y * $cos );

    printf( "%0.3f, %0.3f\n", $x2, $y2 );
} 
```

输出：

```
-77.036, -35.923
-43.789, 34.750
-28.997, 3.029
70.697, 49.517
83.375, 22.328
-16.318, -24.160
-1.527, -55.881
-77.036, -35.923 
```

生成的图像[不再好看](http://itools.subhashbose.com/grapher/index.php?x%5B%5D=-77.036161898115&y%5B%5D=-35.922552247959&x%5B%5D=-43.788607762951&y%5B%5D=34.749932808315&x%5B%5D=-28.996968602027&y%5B%5D=3.0291602620323&x%5B%5D=70.696887972005&y%5B%5D=49.517169053509&x%5B%5D=83.375435824226&y%5B%5D=22.32793544241&x%5B%5D=-16.318420749806&y%5B%5D=-24.160073349067&x%5B%5D=-1.5267815888813&y%5B%5D=-55.88084589535&x%5B%5D=-77.036161898115&y%5B%5D=-35.922552247959&submit=Plot%20Graph&w=800&h=800&n=&dtsz=Auto&title=Arrow,%20rotated%2025%20degrees&shax=on&xlbl=&axx=on&aspx=Auto&ylbl=&axy=on&aspy=Auto&sh_lbl_hv=on&nfurl=on&nStrip=on)。

我在数学上做错了什么？我希望它在应该的地方仍然有 90 度角，等等。

谢谢！赛斯

编辑：本练习的其余部分是我将这些点转换为纬度/经度坐标，以便在 Google 地球中显示。翻译代码：

```
$x2 = ( $x2 * $scale ) + $latref;
$y2 = ( $y2 * $scale ) + $lonref; 
```

我的“真正”问题是（正如@joel-in-go 指出的那样），纬度和经度之间的物理距离不相等吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T14:39:33.050

您的数学没有问题 - 图表中 X 和 Y 坐标轴上的比例不一样 :)

# python - ipython 安装新模块

> ID：15974100
> 
> 赞同：14
> 
> 时间：2013-04-12T14:33:17.667
> 
> 标签：python, module, installation, pip, ipython

我习惯于安装包的 R 功能，我正在尝试用`ipython`. 有时以下方法有效，但有时又无效，我想最终找出为什么它只在一半时间内有效。

通常要安装一个模块（例如`requests`模块），我会在打开一个新终端后键入以下内容：

```
$ sudo pip install requests
Password: ******* 
```

随后会显示一条消息，指示安装成功或已安装。

```
Requirement already satisfied (use --upgrade to upgrade): 
requests in /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages
Cleaning up... 
```

这表明可以访问代码。事实上，如果我现在从终端运行 python，它会显示一个很好的响应，没有任何错误。

```
$ python
ActivePython 2.7.2.5 (ActiveState Software Inc.) based on
Python 2.7.2 (default, Jun 24 2011, 12:20:15) 
[GCC 4.2.1 (Apple Inc. build 5664)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import requests
>>> 
```

我现在`PyLab`通过 Alfred 打开，它给了我一个错误。

```
Welcome to pylab, a matplotlib-based Python environment [backend: WXAgg].
For more information, type 'help(pylab)'.

In [1]: import requests
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
/Users/vincentwarmerdam/<ipython-input-1-686486c241c8> in <module>()
----> 1 import requests

ImportError: No module named requests 
```

我从 StackOverflow 上的另一个问题（[here](https://stackoverflow.com/questions/8663046/how-to-install-a-python-package-from-within-ipython?rq=1)）中阅读了一些帮助，这表明我从`ipython`shell 安装模块。这给出了一个更加莫名其妙的反应：

```
In [2]: !pip install requests
Requirement already satisfied (use --upgrade to upgrade): requests in     
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages
Cleaning up...

In [3]: import requests
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
/Users/vincentwarmerdam/<ipython-input-3-686486c241c8> in <module>()
----> 1 import requests

ImportError: No module named requests 
```

这对我来说似乎很奇怪。系统上是否安装了多个版本的python？我怎么能检查这个？我需要指向`ipython`安装代码的位置吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-08-05T10:20:08.093

实际上有一个更优雅的解决方案。当 pip 安装然后在 python 中你也可以做这样的事情：

```
import pip

def install(package):
   pip.main(['install', package])

install('requests') 
```

这更容易。登录到 virtualenv 后，您只需确保在您所在的会话中拥有所需的内容。简单。

### 编辑

另一种选择是使用`%%bash`魔法。

```
%%bash
pip install requests 
```

### 编辑2

如果您想要标准输出，甚至可以使用感叹号。

```
! pip install requests 
```

### 编辑3

这是`ipython`最安全的安装方法。

```
%pip install requests 
```

这可确保所有内容都安装在您`ipython`安装的 virtualenv 中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-02T15:40:26.433

这就是我所做的使它起作用的方法；通过命令行打开 iypthon 并输入

```
import sys
sys.path 
```

这显示了其他 python 模块所在的文件夹列表。对我来说，这是：

```
['',
 '/Library/Frameworks/Python.framework/Versions/7.3/bin',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/pandas-0.10.0-py2.7-macosx-10.5-i386.egg',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/googlemaps-1.0.2-py2.7.egg',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/oauth-1.0.1-py2.7.egg',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/oauth2-1.5.211-py2.7.egg',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/httplib2-0.7.7-py2.7.egg',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/selenium-2.28.0-py2.7.egg',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/jellyfish-0.2.0-py2.7-macosx-10.5-i386.egg',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/python_yelp-0.1.1-py2.7.egg',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/pymongo-2.4.2_-py2.7-macosx-10.5-i386.egg',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/lucene_querybuilder-0.1.6-py2.7.egg',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/mechanize-0.2.5-py2.7.egg',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/html2text-3.200.3-py2.7.egg',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python27.zip',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/plat-darwin',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/plat-mac',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/plat-mac/lib-scriptpackages',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/lib-tk',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/lib-old',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/lib-dynload',
 '/Users/vincentwarmerdam/Library/Python/2.7/lib/python/site-packages',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/PIL',
 '/Library/Python/2.7/site-packages',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/IPython/extensions] 
```

有了这些信息，我现在知道 ipython 在哪里寻找可以导入的模块。所以我手动下载了请求库，将其添加到相同的根目录中，这样就存在以下目录：

```
/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/requests 
```

此文件夹包含属于请求的 python 模块。我现在唯一要做的就是确保 ipython 知道这个文件夹存在。这是通过更新 sys.path 完成的。

```
req_link = '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/requests'
sys.path.append(req_link) 
```

在此之后我不再得到错误。

```
import requests 
```

只是工作。

同样在重新启动ipython后，我发现ipython会自动将新路径更新到`sys.path`列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-15T21:39:44.457

如果安装的新软件包是在终端上导入的，但没有导入到 ipython 笔记本，那么很可能您的库中安装了两个版本的 python。因此，在终端和 ipython 笔记本上导入包的地方有单独的 site-packages 目录。检查是否是这种情况。在终端使用：

```
import sys
sys.path 
```

这将显示您在终端上使用的 python 的 python 模块所在的位置。现在，在 ipython 笔记本中使用：

```
import sys
sys.path 
```

这将显示您在终端上使用的 python 的 python 模块所在的位置。

现在，如果这两个路径不同，您就知道您正在使用两个不同的 python 安装。为了解决这个问题，将安装好的包从终端 python 的 site-packages 目录复制到 ipython 的 site-packages 目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-18T00:22:19.143

我在尝试安装 patool 时遇到了同样的问题，但事实证明这是由于安装了多个解释器，当我从 ipython 运行它时它工作了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-19T09:01:44.870

这让我在 Windows 上运行 Spyder。如上面的答案，找到目录：

`import sys`

`sys.path`

这个网站： [www.geeksforgeeks.org/how-to-install-pip-on-windows/](https://www.geeksforgeeks.org/how-to-install-pip-on-windows/)

指导我这样做：[https ://bootstrap.pypa.io/get-pip.py](https://bootstrap.pypa.io/get-pip.py)

使用 cmd 从要添加模块的 Python 版本的目录中运行该脚本。然后只需使用 pip 再次从命令行添加模块。我什至没有费心将它添加到我的 PATH 中，但你可以这样做。

# ruby-on-rails - minitest上的错误消息测试

> ID：15974102
> 
> 赞同：4
> 
> 时间：2013-04-12T14:33:22.027
> 
> 标签：ruby-on-rails, ruby, minitest

我使用 mini_test 进行测试。我有一个如下所示的代码部分。

```
raise Type_Error, 'First Name must not be empty' if  @person.first_name == nil 
```

如何编写此代码的测试？谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:43:13.033

我认为您想要[assert_raises](http://bfts.rubyforge.org/minitest/MiniTest/Assertions.html#method-i-assert_raises)，它断言传递给它的块/表达式将在运行时引发异常。

例如，我的一个项目有以下 minitest：

```
 test 'attempting to create a CreditCard that fails to save to the payment processorshould prevent the record from being saved' do
    assert_equal false, @cc.errors.any?

    failure = "simulated payment processor failure"
    failure.stubs(:success?).returns(false)
    failure.stubs(:credit_card).returns(nil)

    PaymentProcessor::CreditCard.stubs(:create).returns(failure)

    assert_raises(ActiveRecord::RecordNotSaved) { create(:credit_card) }
  end 
```

在我的情况下，这样做是：

*   从支付处理器 API 创建模拟失败消息
*   在支付处理器上创建信用卡以返回模拟失败
*   尝试创建信用卡，模拟支付处理器返回失败状态，并断言我的内部保存/创建方法在这些情况下抛出错误

我应该说这个测试代码包括除了 minitest 之外的东西，比如 FactoryGirl，以及（我认为）should 和 mocha 匹配器。换句话说，上面显示的并不是严格的 minitest 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:37:48.803

```
raise Type_Error, 'First Name must not be empty' if  @person.first_name == nil 
```

为了测试上面的行，我写了一个如下所示的测试。我为此使用了 minitest::spec。

```
def test_first_name_wont_be_nil
    person.name = nil
    exception = proc{ Context.new(person).call }.must_raise(TypeError)
    exception.message.must_equal 'First Name must not be empty'
end 
```

上下文是进行某些过程的地方。

# sql - SQL函数不返回所有行

> ID：15974103
> 
> 赞同：0
> 
> 时间：2013-04-12T14:33:24.057
> 
> 标签：sql, function

我需要：所有过境点，以及当年的 AppData 记录（如果有，则为空）。应始终返回 38,244 条记录。

发生了什么：如果我在 2012 年运行它，我会得到所有行；如果我在 2013 年运行它，我只会得到 19248 行。

在第一个应用程序中，一条记录被插入到 AppData 表中。可能会有当年没有记录的过境点。在第 2 次或第 3 次申请时，它是一条更新记录；总会有与过境点相关的记录。

我已经在这几天了。非常感谢任何帮助！

表数据交叉表 - CRID, int

AppData 表 AppID、AppDate、AppYear。

```
 ALTER FUNCTION [dbo].[fnGetAppData2]
    (
-- Add the parameters for the function here
    @app as varchar(4),
     @year as varchar(4)
     )
    RETURNS 
    @SCLApps TABLE 

-- Add the column definitions for the TABLE variable here
(AppCRID int,
AppDate date,
AppNbr int, 
AppTruck varchar(10), 
Spray bit,
Cut bit,
Inspect bit,
Invoice date,
AppYear int)

    AS
    BEGIN
    --for 1st app
-- Fill the table variable with the rows for your result set

If @app = 1

INSERT @SCLApps (AppCRID,AppDate,AppTruck,Cut,Inspect,Spray,Invoice,AppNbr)
SELECT Crossings.CRID,

--application date
(CASE WHEN @app = 1 THEN
App1Date 
WHEN @app = 2 THEN
App2Date
WHEN @app = 3 THEN
App3Date
ELSE
Null
END), 

--application truck
(CASE WHEN @app = 1 THEN
App1Truck
WHEN @app = 2 THEN
App2Truck
WHEN @app = 3 THEN
App3Truck
ELSE
Null
END), 

--app cut
(CASE WHEN @app = 1 THEN
App1Cut
WHEN @app = 2 THEN
App2Cut
WHEN @app = 3 THEN
App3Cut
ELSE
Null
END), 

--app inspect
(CASE WHEN @app = 1 THEN
App1Inspect
WHEN @app = 2 THEN
App2Inspect
WHEN @app = 3 THEN
App3Inspect
ELSE
Null
END), 

--app spray  
(CASE WHEN @app = 1 THEN
    App1Spray
WHEN @app = 2 THEN
    App2Spray
WHEN @app = 3 THEN
    App3Spray
    ELSE
Null
END),

--invoice
(CASE WHEN @app = 1 THEN
    App1InvDate
WHEN @app = 2 THEN
    App2InvDate
WHEN @app = 3 THEN
    App3InvDate
    ELSE
Null
END),

--AppNbr
(CASE WHEN @app = 1 THEN
1
WHEN @app = 2 THEN
2
WHEN @app = 3 THEN
3
ELSE
Null
END)

FROM AppData full OUTER JOIN Crossings ON AppData.CRID = Crossings.CRID
WHERE (AppYear = @year or AppYear is null)

ELSE

--for 2nd and 3rd app--------------------------------------

INSERT @SCLApps (AppCRID,AppDate,AppTruck,Cut,Inspect,Spray,Invoice, AppNbr)
SELECT Crossings.CRID,

--application date
(CASE WHEN @app = 1 THEN
App1Date
WHEN @app = 2 THEN
App2Date
WHEN @app = 3 THEN
App3Date
ELSE
''
END), 

--application truck
(CASE WHEN @app = 1 THEN
App1Truck
WHEN @app = 2 THEN
App2Truck
WHEN @app = 3 THEN
App3Truck
ELSE
''
END), 

--app cut
(CASE WHEN @app = 1 THEN
App1Cut
WHEN @app = 2 THEN
App2Cut
WHEN @app = 3 THEN
App3Cut
ELSE
''
END), 

--app inspect
(CASE WHEN @app = 1 THEN
App1Inspect
WHEN @app = 2 THEN
App2Inspect
WHEN @app = 3 THEN
App3Inspect
ELSE
''
END), 

--app spray  
(CASE WHEN @app = 1 THEN
    App1Spray
WHEN @app = 2 THEN
    App2Spray
WHEN @app = 3 THEN
    App3Spray
    ELSE
''
END),

--invoice
(CASE WHEN @app = 1 THEN
    App1InvDate
WHEN @app = 2 THEN
    App2InvDate
WHEN @app = 3 THEN
    App3InvDate
    ELSE
''
END),

--AppNbr
(CASE WHEN @app = 1 THEN
1
WHEN @app = 2 THEN
2
WHEN @app = 3 THEN
3
ELSE
''
END)

FROM AppData full OUTER JOIN Crossings ON AppData.CRID = Crossings.CRID
    WHERE AppYear = @year

RETURN 
    END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:02:30.547

即使您正在执行 FULL OUTER JOIN，这部分也会消除没有匹配 AppData 的 Crossings：

```
WHERE AppYear = @year 
```

将最后一部分更改为：

```
FROM Crossings LEFT JOIN  
(SELECT *
FROM AppData
WHERE WHERE AppYear = @year) AS AppData
ON Crossings.CRID = AppData.CRID 
```

附带说明一下，case 语句有两种格式。您可以通过使用这个来简化：

```
CASE @app 
WHEN 1 THEN App1Truck
WHEN 2 THEN App2Truck
WHEN 3 THEN App3Truck
ELSE Null END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:01:32.037

首先，您应该使用内联表值函数，而不是多语句表值 UDF。其次，您的 UDF 有两个主要分支，一个用于 @app = 1 时，另一个用于 @app 的任何其他值。然而，在每个分支中，case 语句区分 @app = 1、2、3 的值。这显然是不正确的。
其次，正如@jBrooks 所指出的，AppYear 上的过滤器，如果放在 Where 子句中，将消除在任何表 appyear 中没有匹配的所有行。为了防止这种情况，这个谓词必须是 Join On 子句的一部分。

尝试这个：

```
CREATE FUNCTION  dbo.fnGetAppData2
( @app as varchar(4),  @year as varchar(4))
Returns Table
As
Return
(
  Select c.CRID,
     Case When @app = 1 Then App1Date When @app = 2 Then App2Date
          When @app = 3 Then App3Date  Else '' End, 

     Case When @app = 1 Then App1Truck When @app = 2 Then App2Truck
          When @app = 3 Then App3Truck Else '' End, 

     Case When @app = 1 Then App1Cut When @app = 2 Then App2Cut
          When @app = 3 Then App3Cut  Else '' End, 

     Case When @app = 1 Then App1Inspect When @app = 2 Then App2Inspect
          When @app = 3 Then App3Inspect Else '' End, 

     Case When @app = 1 Then App1Spray When @app = 2 Then App2Spray
          When @app = 3 Then App3Spray Else '' End, 

     Case When @app = 1 Then App1InvDate When @app = 2 Then App2InvDate
          When @app = 3 Then App3InvDate Else '' End, 

     Case When @app In (1,2,3) Then @app Else '' End 

  From AppData a Full Join Crossings c
      On c.CRID = a.CRID
          And AppYear = Coalesce(@year, AppYear)
)
GO 
```

# internet-explorer - IE9 @font-face 遇到未知错误

> ID：15974104
> 
> 赞同：3
> 
> 时间：2013-04-12T14:33:25.183
> 
> 标签：internet-explorer, css, font-face

我在 IE9（Windows 7）上遇到了 @font-face 的问题。XP 上的 IE 8 和 mac 上的所有浏览器都没有问题。只有IE9。

我像这样嵌入我的字体：

```
@font-face {
    font-family: 'wendy_lpregular';
    src: url('../fonts/wendylpstd-medium.eot');
    src: url('../fonts/wendylpstd-medium.eot?#iefix') format('embedded-opentype'),
         url('../fonts/wendylpstd-medium.woff') format('woff'),
         url('../fonts/wendylpstd-medium.ttf') format('truetype'),
         url('../fonts/wendylpstd-medium.svg#wendy_lpregular') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

它不呈现字体并在控制台中给我以下错误：

```
CSS3111: @font-face encountered unknown error. 
wendylpstd-medium.eot 
```

我有另一种要嵌入的字体 - 它显示正确。是什么导致了不起的 IE9 为这个哭泣？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:39:58.380

> 现在是我们的主要亮点 - “CSS3111：@font-face 遇到未知错误”。这个错误非常模糊。如果您再次查看 MSDN，您会看到它的描述说：“Cascading Style Sheets ( CSS）字体”。“未知问题”对我来说听起来不太好——我应该如何解决未知问题？幸运的是，我们在这里得到了提示。它说：“检查字体的来源”。实际上，CSS3111 通常是由字体的二进制源问题引起的。例如，流行的在线 TTF 到 EOT 转换器之一会生成带有不符合 Microsoft 标准的 NAME 表的 EOT 文件，这导致 EOT 字体永远不会在 IE 中加载并产生 CSS3111 错误。因此，当您体验 CSS3111 时，尝试使用不同的 TTF 到 EOT 转换器或字体生成器总是好的。

资料来源： http: [//www.marinbezhanov.com/web-development/16/how-to-embed-webfonts-properly-and-how-to-solve-the-ambiguous-css3111-font-face-encountered-unknown-错误/](http://www.marinbezhanov.com/web-development/16/how-to-embed-webfonts-properly-and-how-to-solve-the-ambiguous-css3111-font-face-encountered-unknown-error/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T15:08:13.013

您必须将字体转换为 base64。

1.  使用[这个小提琴](http://jsfiddle.net/eliseosoto/JHQnk/)将你的`woff`字体文件转换为 base 64。

2.  在 CSS 文件中使用第 1 步的输出，如下所示：

    ```
    src: url(data:application/x-font-woff;charset=utf-8;base64, [base 64 value from step 1 without brackets] ) format('woff'); 
    ```

最终结果将如下所示，其中`your base64`是第 1 步的值： ![WebFont 包含示例](https://i.stack.imgur.com/3zWtM.png)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T08:33:08.863

尝试使用**简单的线条**在您的 css 中定义 font-face，并使用**绝对 urls**，例如

```
@font-face{
    font-family:'wendy_lpregular';
    src:url('your-web.com/fonts/wendylpstd-medium.eot');
    src:url('your-web.com/fonts/wendylpstd-medium.eot?#iefix') format('embedded-opentype'),
    url('your-web.com/fonts/wendylpstd-medium.woff') format('woff'),
    url('your-web.com/fonts/wendylpstd-medium.ttf') format('truetype'),
    url('your-web.com/fonts/wendylpstd-medium.svg#GothamRM') format('svg')
} 
```

检查是否可以在 IE 中打开文件（your-web.com/fonts/wendylpstd-medium.woff），如果收到错误 404 转到 IIS，请在选择 IIS 根节点的同时双击“MIME 类型”配置选项在左侧面板中，然后单击右侧“操作”面板中的“添加...”链接。这将弹出以下对话框。添加**.woff**文件扩展名并指定“ **application/x-font-woff** ”作为对应的 MIME 类型

我在这个网站（[Robòtica educativa ）中使用了这个指令，我在（](http://www.roboticaeducativa.cat) [http://www.font2web.com/](http://www.font2web.com/)）上转换了我原来的 .ttf 字体

# jquery - Jquery Validate 插件仅适用于 HTML 表单标签

> ID：15974105
> 
> 赞同：0
> 
> 时间：2013-04-12T14:33:33.723
> 
> 标签：jquery, forms

由于 .net 原因，我需要使用 html 表单标签并使用 an`div id="etg_p_print_form"`而不是`form name="etg_p_print_form"`

**`function calc_total() {`不起作用，因为它仅适用于表单标签。**

名称上有表格标签

```
function calc_total() {
        f = document.etg_p_print_form;
        t = document.etg_p_print_form.total_price;
} 
```

id 上有 div 标签

```
 f = $('form')[0];
 t = $('#total_price')[0] 
```

**HTML**

**带表格**

```
<form name="etg_p_print_form" class="form-calculator"> 
```

**带 DIV**

```
<div id="etg_p_print_form" class="form-calculator"> 
```

演示[http://jsfiddle.net/zMAz6/10/](http://jsfiddle.net/zMAz6/10/)

# java - 如何将 JLabel[] 添加到 JTable？

> ID：15974108
> 
> 赞同：1
> 
> 时间：2013-04-12T14:33:38.620
> 
> 标签：java, arrays, swing, jtable, jlabel

我有一个要添加到 JTable 的 JLabels 数组。我尝试使用

```
 myJTable.add(myJLabelArray); 
```

希望它会起作用，但它不会（显然，否则我不会在这里）。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:57:36.133

使用[add](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#add%28java.awt.Component%29)方法不是将组件添加到`JTable`. 永远不要将组件直接添加到 a`JTable`或其`TableModel`.

`JLabels`只是呈现文本的 Swing 组件。

您可以使用`TableCellRenderer`. 看看[编辑器和渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:44:53.193

您不能只添加 myJTable.add(myJLabelArray)。正如 Reimeus 指出的那样，使用渲染器

```
 jTable1.getColumnModel().getColumn(0).setCellRenderer(new Renderer()); //set column1 with jlabel 
```

你的渲染应该扩展 DefaulttableCellRenderer

```
 class Renderer extends DefaultTableCellRenderer {
  JLabel lbl = new JLabel();

 //ImageIcon icon = new ImageIcon(getClass().getResource("sample.png"));

 public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected,
  boolean hasFocus, int row, int column) {
lbl.setText("hello");
//lbl.setIcon(icon);
return lbl;
}
} 
```

# c - 如何找到没有原型的 C 函数？

> ID：15974112
> 
> 赞同：9
> 
> 时间：2013-04-12T14:33:50.653
> 
> 标签：c, function-prototypes

公司政策规定 C 源代码中的每个函数都有一个原型。我继承了一个带有自己的 make 系统的项目（所以我**无法**在 gcc 或 Visual Studio 上对其进行测试），发现其中一个文件有一些没有原型声明的静态函数。有没有办法（不一定使用编译器）列出所有 .c 文件中没有原型的所有函数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T14:36:04.350

gcc 有一个选项可以警告您：

```
gcc -Wmissing-prototypes 
```

您可以将此警告转换为错误以停止编译并强制人们修复它：

```
gcc -Werror=missing-prototypes 
```

如果您只想列出它，您可以使用`gcc`选项`-Wmissing-prototypes`和 grep 进行编译，以便在日志中**没有以前的原型。**

**基于编辑更新**：

由于您现在提到不能使用 gcc，因此您必须为当前的编译器找到类似的选项。大多数编译器都有这样的选项。从手册页或内置帮助输出开始。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-29T19:53:09.173

`ctags`能做到！

`--c-kinds=p`生成所有函数原型的列表

`--c-kinds=f`生成所有函数定义的列表

现在你只需要比较这些。

`diff -u <(ctags -R -x --sort=yes --c-kinds=f | cut -d' ' -f1) <(ctags -R -x --sort=yes --c-kinds=p | cut -d' ' -f1) | sed -n 's/^-//p'`

# android - 拆分字符串并将其放入列表视图中

> ID：15974113
> 
> 赞同：0
> 
> 时间：2013-04-12T14:33:52.733
> 
> 标签：android, arrays, listview, split

我之前问过一个关于拆分字符串的问题，但可能还不够清楚。

我做了一个简单的活动，其中有一个例子来说明我的问题。

我有一条消息，它是来自服务器的一条很长的消息。

我需要拆分此消息并将其放入列表视图中，我将向您展示我的代码。

```
public class Page1 extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity6);

    String message = "0---12,,,2013-02-12 08:04,,,this is a test,,,0---11,,,2013-02-12 08:05,,,and this is why it is damaged,,,0---10,,,2013-02-12 08:06,,,what comes from select data randomly";

    String[] variables = message.split(",");

    ListView listView1 = (ListView) findViewById(R.id.listView12);
    String[] items = { variables.toString() };

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, items);

    listView1.setAdapter(adapter);

} 
```

}

现在让我们说拆分是逗号“，”所以它将是

```
0---12      ------->ID1

2013-02-12 08:04  ------------>date1

this is a test   ----------->subject1

0---11    ------->ID2

2013-02-12 -8:05   ------------>date2

and this is why it is damaged   ----------->subject2 
```

等等，现在我不能做的是我想把这些字符串放在一个循环中并将它们写入一个列表视图，这样subject1应该在item1中，而date1应该像这样在subitem1中

```
Subject1

Date1

------

Subject2

Date2

------ 
```

这就是列表视图的样子

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:14:16.113

请注意，它`ArrayAdaper`是专为仅包含一个的项目而设计的`TextView`。[从文档](http://developer.android.com/reference/android/widget/ArrayAdapter.html)：

> 由任意对象数组支持的具体 BaseAdapter。默认情况下，此类期望提供的资源 id 引用单个 TextView

考虑子类化`ArrayAdapter`（[docs](http://developer.android.com/reference/android/widget/SimpleAdapter.html)）并覆盖它的`getView`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:17:19.927

您需要创建一个自定义项以按照您想要的方式从您的对象`ArrayAdapter`中填充一个。`ListView`

这种技术的优点是您获得了一种视图回收机制，该机制将回收`Views`您的内部`ListView`以减少内存消耗。

**简而言之**，您必须：

**1.**创建一个代表单行数据的对象。

**2.**创建`ArrayList`这些对象中的一个。

**3.**创建一个包含 ListView 的布局或使用代码将 ListView 添加到您的主布局。

**4.**创建单行布局。

**5.**创建一个`ViewHolder`从 的角度代表数据行的视觉方面`Views`。

**6.**创建一个自定义`ArrayAdapter`，将根据您的需要填充行，在其中您将覆盖该`getView`方法并使用`position`您收到的当前行的参数`View`来指示该行`index`。

**7.**最后把这个分配`ArrayAdapter`给你的`ListView`in `onCreate`。

通过阅读我写的这篇博文，您可以了解如何实现这一点：

[创建自定义 ArrayAdapter](http://blog-emildesign.rhcloud.com/?p=495)

# android - 使用片段实现操作栏选项卡

> ID：15974120
> 
> 赞同：6
> 
> 时间：2013-04-12T14:34:04.057
> 
> 标签：android, android-fragments, android-actionbar

所以最近我需要实现操作栏选项卡，将当前片段换成新片段。尽管进行了数小时的密集搜索，我还是找不到明确的解决方案，所以我想我会在这里介绍我是如何解决这个问题的。其中两个片段包含列表视图，事实证明这是一个主要的复杂因素。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T14:34:04.057

首先创建一个要附加片段的活动。在该 Activity 的 XML 文件中添加一个线性布局，如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".WoodenSideProject" >
<LinearLayout
    android:id="@+id/fragment_placeholder"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
</LinearLayout> 
```

不要向 XML 文件添加任何其他内容。甚至没有预装 Eclipse 的选项卡主机。

接下来创建你的片段。首先使用片段的 XML 文件为您的片段构建您想要的 UI。我将展示如何使用列表视图创建片段：

```
public class Fragment1Name extends Fragment
{
public static String TAG="DirectionsFragment";
private String[] list_items = {"Put the list of Strings you want here"};
ListView lView1;
/*@Override
public void onActivityCreated(Bundle savedInstanceState)
{
    super.onActivityCreated(savedInstanceState);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(),
            android.R.layout.simple_list_item_1, list_items);
        setListAdapter(adapter);
}*/

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_XML_title, container, false);
    createListView(view);
    // Inflate the layout for this fragment
    return view;
}

private void createListView(View view)
{
    lView1 = (ListView) view.findViewById(R.id.ListViewID);
    //Set option as Multiple Choice. So that user can able to select more the one option from list
    lView1.setAdapter(new ArrayAdapter<String>(getActivity(),
    android.R.layout.simple_list_item_1, list_items));
}
} 
```

有些人建议为使用列表视图的片段扩展 ListFragment。我的经验是，麻烦多于其价值。

设置Activity的java文件如下：

```
public class ActivityName extends FragmentActivity {
public static Context appContext;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_project);

ActionBar actionBar = getActionBar();
actionBar.setDisplayHomeAsUpEnabled(true);
actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
setTitle("WoodenSideProject");

ActionBar.Tab tab1 = actionBar.newTab().setText("Tab1");
ActionBar.Tab tab2 = actionBar.newTab().setText("Tab2");
ActionBar.Tab tab3 = actionBar.newTab().setText("Tab3");

Fragment Fragment1Name = new Fragment1Name();
Fragment Fragment2Name = new Fragment2Name();
Fragment Fragment3Name = new Fragment3Name();

tab1.setTabListener(new MyTabsListener(Fragment1Name));
tab2.setTabListener(new MyTabsListener(Fragment2Name));
tab3.setTabListener(new MyTabsListener(Fragment3Name));

actionBar.addTab(tab1);
actionBar.addTab(tab2);
actionBar.addTab(tab3);
} 
```

在同一个 Activity 中创建以下类：

```
class MyTabsListener implements ActionBar.TabListener {
public Fragment fragment;

public MyTabsListener(Fragment fragment) {
    this.fragment = fragment;
}

@Override
public void onTabReselected(Tab tab, FragmentTransaction ft) {
    //do what you want when tab is reselected, I do nothing
}

@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    ft.replace(R.id.fragment_placeholder, fragment);
}

@Override
public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    ft.remove(fragment);
}
} 
```

我不知道其他人是否像我用片段实现操作栏选项卡一样遇到麻烦，但如果是的话，我希望这会有所帮助。任何有关更好实施的建议将不胜感激。

# c# - 防止 Word 文档的字段在打开时更新

> ID：15974125
> 
> 赞同：7
> 
> 时间：2013-04-12T14:34:20.367
> 
> 标签：c#, ms-word, office-interop

我为另一个团队编写了一个实用程序，它递归地遍历文件夹并将找到的 Word 文档转换为 PDF，方法是使用带有 C# 的 Word Interop。

我们遇到的问题是文档是使用日期字段创建的，这些字段在保存之前会更新为今天的日期。我找到了一种在打印前禁用更新字段的方法，但我需要防止字段在打开时更新。

那可能吗？我想在 C# 中进行修复，但如果我必须做一个 Word 宏，我可以。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T15:44:28.347

如 Microsoft 无尽的[文档](http://support.microsoft.com/kb/198544)迷宫中所述，您可以锁定域代码。例如，在 VBA 中，如果我在正文中有一个日期字段，形式为

```
{DATE  \@ "M/d/yyyy h:mm:ss am/pm"  \* MERGEFORMAT } 
```

我可以跑

```
ActiveDocument.Fields(1).Locked = True 
```

然后，如果我对文档进行更改，保存，然后重新打开，域代码将不会更新。

使用 c# Office 互操作的示例：

```
Word.Application wordApp = new Word.Application();
Word.Document wordDoc = wordApp.ActiveDocument;
wordDoc.Fields.Locked = 1; //its apparently an int32 rather than a bool 
```

您可以将代码放入`DocumentOpen`事件中。我假设您有一个订阅该事件的加载项。如果不是，请澄清，因为这本身就是一场战斗。

编辑：在我的测试中，以这种方式锁定字段会将它们锁定在 all`StoryRanges`中，因此无需在页眉、页脚、脚注、文本框等中获取字段实例。这是一种令人惊讶的享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-25T17:56:24.157

好吧，我没有找到使用 Interop 的方法，但我的公司确实购买了 Aspose.Words，并且我编写了一个实用程序来将 Word 文档转换为 TIFF 图像。[Aspose](http://www.aspose.com/ "Apose 的网站")工具不会更新字段，除非您明确告诉它这样做。这是我与 Aspose 一起使用的代码示例。请记住，我需要将 Word 文档转换为单页 TIFF 图像，并且我对许多选项进行了硬编码，因为它只是我自己在这个项目中的一个实用程序。

```
private static bool ConvertWordToTiff(string inputFilePath, string outputFilePath)
    {
        try
        {
            Document doc = new Document(inputFilePath);

            for (int i = 0; i < doc.PageCount; i++)
            {
                ImageSaveOptions options = new ImageSaveOptions(SaveFormat.Tiff);
                options.PageIndex = i;
                options.PageCount = 1;
                options.TiffCompression = TiffCompression.Lzw;
                options.Resolution = 200;
                options.ImageColorMode = ImageColorMode.BlackAndWhite;

                var extension = Path.GetExtension(outputFilePath);
                var pageNum = String.Format("-{0:000}", (i+1));
                var outputPageFilePath = outputFilePath.Replace(extension, pageNum + extension);

                doc.Save(outputPageFilePath, options);
            }

            return true;
        }
        catch (Exception ex)
        {
            LogError(ex);
            return false;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T03:38:54.640

我认为关于 SO 的新问题是合适的，因为这将需要 XML 处理而不仅仅是 Office Interop。如果您同时要转换 .doc 和 .docx 文件类型，则可能需要两种单独的解决方案：一种用于 WordML（Word 2003 XML 格式），另一种用于 OpenXML（Word 2007/2010/2013 XML 格式），因为您无法打开旧文件格式并另存为新文件而不更新字段。

检查锁定字段的 OOXML 向我们展示了[这个](http://www.schemacentral.com/sc/ooxml/a-w_fldLock-1.html) `w:fldLock="1"`属性。这可以通过对文档使用适当的 XML 处理来插入，例如通过 OOXML SDK 或通过标准 XSLT 转换。

可能会有所帮助：这个[how-do-i-unlock-a-content-control-using-the-openxml-sdk-in-a-word-2010-document](https://stackoverflow.com/questions/10728442/how-do-i-unlock-a-content-control-using-the-openxml-sdk-in-a-word-2010-document)问题可能是类似的情况，但对于内容控件。`Lock`如果和`LockingValues`类型以相同的方式应用于字段，则您可以将相同的解决方案应用于字段。然而，我不确定这一点。

为了更加确信这是解决问题的方法，请参阅该供应商针对该问题的[解决方案示例。](http://sliptd.com/products/Pages/SLIP-td-Component-Reference-Guide.aspx/SLIP-Converters/Open-Office-XML-OOX-Converter-Pack/Office-Open-XML-Lock-Fields)如果您需要在内部进行开发，那么[openxmldeveloper.org](http://openxmldeveloper.org/)是一个不错的起点 - 查找 Eric White 的示例来操作诸如[this](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2011/05/03/145486.aspx)的字段。

# css - 如何在LESS中设置关键帧名称

> ID：15974128
> 
> 赞同：28
> 
> 时间：2013-04-12T14:34:21.713
> 
> 标签：css, less, mixins, css-animations

我尝试为 CSS 动画关键帧设置这个 LESS mixin：

```
.keyframes(@name, @from, @to) {;
  @-webkit-keyframes "@name" {
    from {
      @from;  
    }
    to {
      @to;
    }
  }
} 
```

但是名称短语有一些问题，有什么选择可以正确地做到这一点吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-22T12:23:05.577

### 从 LESS >= 1.7 开始，您可以将变量用于关键帧关键字（名称）。

LESS 1.7 对指令的工作方式进行了一些更改，允许使用变量作为名称/关键字`@keyframes`（因此问题中的示例现在应该可以工作）。

* * *

> **不幸的是，关键帧名称不能在 LESS <= 1.6 中动态生成**

因此，处理关键帧的正常方式将使用硬编码名称，并且您只需要调用特定的“for”和“to”mixin，如下所示：

```
.colors-mixin-frame(@from,@to){
from {color: @from;}
to {color: @to;}
}

.width-mixin-frame(@from,@to){
from {width: @from;}
to {width: @to;}
}

// keyframes with hardcoded names calling for specific mixin frames
@keyframes red-blue { .colors-mixin-frame(red, blue); }
@keyframes change-width { .width-mixin-frame(254px, 512px); } 
```

* * *

## 但是您可以使用一种解决方法来动态生成名称

在将名称注入规则名称的地方，这需要声明下一个规则，该规则`}`在关键帧声明的末尾提供右括号。最方便的是，如果您只是构建调用该关键帧的动画

```
.animation-keyframes(@name, @from, @to, @anim-selector) {
  @keyf: ~"@keyframes @{name} { `'\n'`from ";
  @anim: ~"} `'\n'`.@{anim-selector}";
  @{keyf} {
      .from(@name,@from);
        }
      to {
        .to(@name,@to);
      }
  @{anim} {
    animation-name:@name;
  }
} 
```

请注意，您还需要定义`.from(){}`和`.to(){}`混入，而不仅仅是像您在示例中所做的那样使用`@from`和`@to`（因为 LESS 也不允许动态生成的属性）......这个混入现在可以构造所需的属性和值......使用特定属性，您可以使用守卫或特定名称的 mixin，如下所示：

```
// name-specific from and to mixins that are used if first argument equals "colors"
.from (colors, @color) {
  color: @color;
}
.to (colors, @color) {
  color: @color;
} 
```

现在我们可以在**LESS 中调用我们的 mixin：**

```
// test
.animation-keyframes (colors, red, blue, my-colanim); 
```

并获得**CSS：**

```
@keyframes colors { 
from {
  color: #ff0000;
}
to {
  color: #0000ff;
}
} 
.my-colanim {
  animation-name: colors;
} 
```

这也适用于 LESS 1.4，但请注意，我们使用 javascript 插值来换行，这需要 LESS 的 javascript 实现。

* * *

**编辑：**关于前缀的附加问题

## 与供应商前缀混合

在这里，我做了两个 mixin ... 一个没有供应商前缀，一个同时调用通用`.keyframes`mixin：

```
.keyframes (@name, @from, @to, @vendor:"", @bind:"") {
  @keyf: ~"@{bind}@@{vendor}keyframes @{name} { `'\n'`from ";
  @{keyf} {
      .from(@name,@from);
        }
      to {
        .to(@name,@to);
      }
}

.animation-keyframes-novendor (@name, @from, @to, @anim-selector) {
  .keyframes (@name, @from, @to);
  @anim: ~"} `'\n'`.@{anim-selector}";
  @{anim} {
    animation-name:@name;
  }
}

.animation-keyframes (@name, @from, @to, @anim-selector) {
  @bind: "} `'\n'`";
  .keyframes (@name, @from, @to, "-moz-");
  .keyframes (@name, @from, @to, "-webkit-", @bind);
  .keyframes (@name, @from, @to, "-o-", @bind);
  .keyframes (@name, @from, @to, "-ms-", @bind);
  .keyframes (@name, @from, @to, "", @bind);
  @anim: ~"} `'\n'`.@{anim-selector}";
  @{anim} {
    -moz-animation: @name;
    -webkit-animation: @name;
    -o-animation: @name;
    -ms-animation: @name;
    animation: @name;
  }
}

.from (colors, @color) {
  color: @color;
}
.to (colors, @color) {
  color: @color;
}

/* keyframes with all vendor prefixes */
.animation-keyframes (colors, red, blue, my-colanim);

/* keyframes with no vendor prefix */
.animation-keyframes-novendor (colors, red, blue, my-colanim); 
```

现在`.animation-keyframes`将为所有供应商前缀和具有供应商前缀属性的动画选择器生成关键帧。正如预期的那样，`.animation-keyframes-novendor`它给出了与上述简单解决方案相同的输出（没有供应商前缀）。

* * *

## 一些注意事项：

*   为了使您的动画真正起作用，您需要设置其他动画参数，例如计时函数、持续时间、方向、迭代计数（除了我们已经设置的名称之外，至少还需要持续时间）。

    例如：

```
 animation: @name ease-in-out 2s infinite alternate; 
```

*   如果您在命名空间中包装上述混入，请确保将其他混入中的混入引用更改为它们的整个路径（包括命名空间）。

    例如：

```
 #namespace > .keyframes () // see .less source in the demo for details 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-04T22:14:34.493

我目前正在研究一个 mixin 库

源代码可以在这里找到[https://github.com/pixelass/more-or-less](https://github.com/pixelass/more-or-less)

我的关键帧混合如下所示：

### 适用于更少的 1.7.x

### 米心

```
.keyframes(@name) { 
    @-webkit-keyframes @name {
        .-frames(-webkit-);
    }
    @-moz-keyframes @name {
        .-frames(-moz-);
    }
    @keyframes @name {
        .-frames();
    }
} 
```

## 输入

```
& {
    .keyframes(testanimation);.-frames(@-...){
        0% {
            left: 0;
            @{-}transform: translate(10px, 20px);
        }

        100% {
            left: 100%;
            @{-}transform: translate(100px, 200px);
        }
    }
} 
```

### 输出

```
@-webkit-keyframes testanimation {
  0% {
    left: 0;
    -webkit-transform: translate(10px, 20px);
  }
  100% {
    left: 100%;
    -webkit-transform: translate(100px, 200px);
  }
}
@-moz-keyframes testanimation {
  0% {
    left: 0;
    -moz-transform: translate(10px, 20px);
  }
  100% {
    left: 100%;
    -moz-transform: translate(100px, 200px);
  }
}
@keyframes testanimation {
  0% {
    left: 0;
    transform: translate(10px, 20px);
  }
  100% {
    left: 100%;
    transform: translate(100px, 200px);
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-14T12:48:40.890

这个怎么样：

```
@-webkit-keyframes some-animation {.mixi-frames;}
@-moz-keyframes some-animation {.mixi-frames;}
@-ms-keyframes some-animation {.mixi-frames;}
@-o-keyframes some-animation {.mixi-frames;}
@keyframes some-animation {.mixi-frames;}

.mixi-frames () {
    from {width: 254px;}
    to {width: 512px;}
} 
```

您需要为每个动画执行此操作。取自：[http ://radiatingstar.com/css-keyframes-animations-with-less](http://radiatingstar.com/css-keyframes-animations-with-less)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-12T23:14:45.860

还要感谢[Martin Turjak](https://stackoverflow.com/users/2113185/martin-turjak)的出色回答，*（谢谢）*我只是在 github 上放了一个 less mixin，它可以在没有 hack 的情况下以灵活的方式生成关键帧和动画的 css 代码，你可以在这里找到它[github.com/kuus/动画me.less](https://github.com/kuus/animate-me.less)。

使用这个 mixin，你可以编写这段代码来获取有效的跨浏览器 css（请参阅 github repo 以获得完整的解释）：

```
.animate-me(ComplexAnimation; 0.4s ease; '.complex-animation';
    '50%, 100%'; '%stransform: translateZ(-250px) rotateY(30deg)';
    70%; '%stransform: translateZ(-250px) rotateY(30deg); opacity: .5; background:   green';
    30%; '%stransform: translateZ(-250px) rotateY(30deg); opacity: .2; background: yellow';
    80%; '%stransform: translateZ(-250px) rotateY(30deg); opacity: 1; background: red'
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-29T00:05:46.950

前面提到的[https://github.com/kuus/animate-me.less](https://github.com/kuus/animate-me.less)做事！

你也可以看看我写的这个（看起来更整洁）： [https ://github.com/thybzi/keyframes](https://github.com/thybzi/keyframes)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T14:45:25.717

我认为你应该这样做

```
@-webkit-keyframes @name 
{
 code...
} 
```

更改`"@name"`为`@name`

`;`你应该在之后删除

```
.keyframes(@name, @from, @to) { 
```

# mysql - 如何优化一些 INNER JOIN Mysql 查询

> ID：15974129
> 
> 赞同：1
> 
> 时间：2013-04-12T14:34:27.593
> 
> 标签：mysql, inner-join

我在我的网站上遇到了一些每天都有更多流量的问题，我想知道如何优化这种对 MYSQL DB 的查询。

```
Query_time: 37 
Lock_time: 2 
Rows_sent: 10 
Rows_examined: 354287
SET timestamp=1323180396; 
```

询问：

```
Results for explain extended SELECT a.*, UNIX_TIMESTAMP(a.createdon) AS timestamp, ct.cityname, ct.SeoCityName, scat.subcatname, scat.SeoSubcatName, cat.catid, cat.SeoCatName, cat.catname, 
          COUNT(*) AS piccount, p.picfile, UNIX_TIMESTAMP(feat.featuredtill) AS featuredtill 
            FROM prefix_ads a
                 INNER JOIN prefix_es_cities ct ON a.cityid = ct.cityid
         INNER JOIN prefix_es_subcats scat ON a.subcatid = scat.subcatid
         INNER JOIN prefix_es_cats cat ON scat.catid = cat.catid
        LEFT OUTER JOIN prefix_adxfields axf ON a.adid = axf.adid
                LEFT OUTER JOIN prefix_adpics p ON a.adid = p.adid AND p.isevent = '0'        
                LEFT OUTER JOIN prefix_es_featured feat ON a.adid = feat.adid AND feat.adtype = 'A'        
            WHERE scat.catid = 2 
                AND a.enabled = '1' AND a.verified = '1' AND a.expireson >= NOW()                   
            GROUP BY a.adid
            ORDER BY a.createdon DESC
            LIMIT 0, 18: 
```

我们使用 EXPLAIN（我使用 PDO 进行数据库连接）

```
Array
(
    [id] => 1
    [0] => 1
    [select_type] => SIMPLE
    [1] => SIMPLE
    [table] => cat
    [2] => cat
    [type] => const
    [3] => const
    [possible_keys] => PRIMARY
    [4] => PRIMARY
    [key] => PRIMARY
    [5] => PRIMARY
    [key_len] => 2
    [6] => 2
    [ref] => const
    [7] => const
    [rows] => 1
    [8] => 1
    [filtered] => 100.00
    [9] => 100.00
    [Extra] => Using temporary; Using filesort
    [10] => Using temporary; Using filesort
)
Array
(
    [id] => 1
    [0] => 1
    [select_type] => SIMPLE
    [1] => SIMPLE
    [table] => scat
    [2] => scat
    [type] => ref
    [3] => ref
    [possible_keys] => PRIMARY,catid
    [4] => PRIMARY,catid
    [key] => catid
    [5] => catid
    [key_len] => 2
    [6] => 2
    [ref] => const
    [7] => const
    [rows] => 12
    [8] => 12
    [filtered] => 100.00
    [9] => 100.00
    [Extra] => 
    [10] => 
)
Array
(
    [id] => 1
    [0] => 1
    [select_type] => SIMPLE
    [1] => SIMPLE
    [table] => a
    [2] => a
    [type] => ref
    [3] => ref
    [possible_keys] => subcatid,cityid,verified,enabled,expireson
    [4] => subcatid,cityid,verified,enabled,expireson
    [key] => subcatid
    [5] => subcatid
    [key_len] => 2
    [6] => 2
    [ref] => some_DB.scat.subcatid
    [7] => some_DB.scat.subcatid
    [rows] => 354287
    [8] => 354287
    [filtered] => 100.00
    [9] => 100.00
    [Extra] => Using where
    [10] => Using where
)
Array
(
    [id] => 1
    [0] => 1
    [select_type] => SIMPLE
    [1] => SIMPLE
    [table] => ct
    [2] => ct
    [type] => eq_ref
    [3] => eq_ref
    [possible_keys] => PRIMARY
    [4] => PRIMARY
    [key] => PRIMARY
    [5] => PRIMARY
    [key_len] => 2
    [6] => 2
    [ref] => some_DB.a.cityid
    [7] => some_DB.a.cityid
    [rows] => 1
    [8] => 1
    [filtered] => 100.00
    [9] => 100.00
    [Extra] => 
    [10] => 
)
Array
(
    [id] => 1
    [0] => 1
    [select_type] => SIMPLE
    [1] => SIMPLE
    [table] => axf
    [2] => axf
    [type] => ref
    [3] => ref
    [possible_keys] => adid
    [4] => adid
    [key] => adid
    [5] => adid
    [key_len] => 4
    [6] => 4
    [ref] => some_DB.a.adid
    [7] => some_DB.a.adid
    [rows] => 1
    [8] => 1
    [filtered] => 100.00
    [9] => 100.00
    [Extra] => Using index
    [10] => Using index
)
Array
(
    [id] => 1
    [0] => 1
    [select_type] => SIMPLE
    [1] => SIMPLE
    [table] => p
    [2] => p
    [type] => ref
    [3] => ref
    [possible_keys] => adid
    [4] => adid
    [key] => adid
    [5] => adid
    [key_len] => 5
    [6] => 5
    [ref] => some_DB.a.adid,const
    [7] => some_DB.a.adid,const
    [rows] => 3
    [8] => 3
    [filtered] => 100.00
    [9] => 100.00
    [Extra] => 
    [10] => 
)
Array
(
    [id] => 1
    [0] => 1
    [select_type] => SIMPLE
    [1] => SIMPLE
    [table] => feat
    [2] => feat
    [type] => eq_ref
    [3] => eq_ref
    [possible_keys] => adid
    [4] => adid
    [key] => adid
    [5] => adid
    [key_len] => 7
    [6] => 7
    [ref] => some_DB.a.adid,const
    [7] => some_DB.a.adid,const
    [rows] => 1
    [8] => 1
    [filtered] => 100.00
    [9] => 100.00
    [Extra] => 
    [10] => 
) 
```

来自同一个查询的更多解释

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE  cat     const   PRIMARY     PRIMARY     2   const   1   Using temporary; Using filesort
1   SIMPLE  scat    ref     PRIMARY,catid   catid   2   const   12  
1   SIMPLE  a   ref     subcatid,cityid,verified,enabled,expireson  subcatid    2   some_DB.scat.subcatid   354287  Using where
1   SIMPLE  ct  eq_ref  PRIMARY     PRIMARY     2   some_DB.a.cityid    1   
1   SIMPLE  axf     ref     adid    adid    4   some_DB.a.adid  1   Using index
1   SIMPLE  p   ref     adid    adid    5   some_DB.a.adid,const    3   
1   SIMPLE  feat    eq_ref  adid    adid    7   some_DB.a.adid,const    1 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:59:29.603

试试这个查询

```
SELECT 
    a.*, 
    UNIX_TIMESTAMP(a.createdon) AS timestamp, 
    ct.cityname, 
    ct.SeoCityName, 
    scat.subcatname, 
    scat.SeoSubcatName, 
    cat.catid, 
    cat.SeoCatName, 
    cat.catname, 
    COUNT(*) AS piccount, 
    p.picfile, 
    UNIX_TIMESTAMP(feat.featuredtill) AS featuredtill 
FROM 
    prefix_ads a
INNER JOIN 
    prefix_es_cities ct 
ON 
    a.enabled = '1' AND 
    a.verified = '1' AND 
    a.cityid = ct.cityid  AND 
    a.expireson >= NOW()                   
INNER JOIN 
    prefix_es_subcats scat 
ON 
    scat.catid = 2 AND a.subcatid = scat.subcatid
INNER JOIN 
    prefix_es_cats cat 
ON 
    scat.catid = cat.catid
LEFT OUTER JOIN 
    prefix_adxfields axf 
ON 
    a.adid = axf.adid
LEFT OUTER JOIN 
    prefix_adpics p 
ON 
    p.isevent = '0' AND a.adid = p.adid         
LEFT OUTER JOIN 
    prefix_es_featured feat 
ON 
    feat.adtype = 'A' AND a.adid = feat.adid         
GROUP BY 
    a.adid
ORDER BY 
    a.createdon DESC
LIMIT 0, 18; 
```

`joins`还要在和`order by`like中使用的表的列上创建必要的索引`prefix_ads.createdon`，`prefix_ads.adid`...。

希望这可以帮助....

# c++ - 处理程序失败后该怎么办？

> ID：15974130
> 
> 赞同：1
> 
> 时间：2013-04-12T14:34:28.673
> 
> 标签：c++, asynchronous, handler, boost-asio

当读取操作处理程序返回错误时，意味着连接断开/失败/关闭？**开始另一个异步操作是否有意义？**

我的意思是，根据不同的可能错误，判断可能非常复杂。

```
void ReadHandler(const boost::system::error_code& error, size_t bytes_transferred)
{
   if(!error)
   {
      // OK
   }
   else
   {
      // does it make any sense to continue and start another async operation ?
      // or I have to check the error with error.value() and possibly close
      // the session or stop reading...etc ?
   } 
```

我如何知道连接是否仍然可用？当下面的 TCP 层发生读取错误时，是因为连接真的出了问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:45:42.157

理解错误本身可能有一些价值。但另一方面，除非你有一个完整的列表，列出“哪些错误可以继续，哪些不可以”，否则无论如何你最终都会得到一个“最佳猜测”的方法。

几乎可以肯定，有些错误是可以恢复的——暂时没有足够的缓冲区空间来接收数据包，或者类似的。其他错误是永久性的（有人拔掉了网络交换机的电源......）。

解决问题的一种方法是计算连续出现多少错误 - 如果您继续并且没有收到另一个错误，那么很好......如果您收到三个（或五个或十个或 100 个）错误连续退出，因为情况可能没有好转

另一种方法是在给定时间内允许如此多的错误（例如，10 秒内超过 5 个错误，或一分钟内超过 50 个错误，或者任何对您的应用程序有意义的错误）。

第三种方法是询问用户 - 这实际上取决于用户的级别，如果出现“遇到错误 X，您要继续吗？（是）|（否）”类型的问题，他/她会怎么做.

很大一部分问题当然是“你的应用程序在做什么，在错误处理方面‘弄错’的后果是什么？” - 如果不了解更多您的项目，我们无法真正回答这个问题 - 实际上，这可能超出了本网站的指导方针来解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:59:58.650

它实际上取决于应用程序，甚至异步操作，当调用处理程序时出现非零错误时您会做什么。在大多数应用程序中，我通常处理[`boost::asio::error::operation_aborted`](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/error__basic_errors.html)与其他错误不同的方式，因为这意味着程序正在关闭。根据协议，您可能还希望进行[`boost::asio::error::eof`](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/error__misc_errors.html)不同的解释。在没有通知的情况下关闭套接字可能是完全合适的。

# android - 哪个是编码列表视图的最佳方法

> ID：15974136
> 
> 赞同：-6
> 
> 时间：2013-04-12T14:34:41.830
> 
> 标签：android

我一直在寻找关于列表视图和微调器等的一段时间。我的问题是我想要一个列表视图，当在我的列表视图中选择一个选项时，我想要一个显示文本的活动（信息）我想知道是否有人可以向我展示此代码的一些示例。或者我认为它错了，可能有更好的选择来满足我的追求。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:40:17.757

看到这个教程它会帮助你 [http://www.vogella.com/articles/AndroidListView/article.html#listviewselection](http://www.vogella.com/articles/AndroidListView/article.html#listviewselection)

# git - GitLab：我无法推 送或克隆 repo，要求输入 Git 密码

> ID：15974141
> 
> 赞同：6
> 
> 时间：2013-04-12T14:34:48.590
> 
> 标签：git, ssh, passwords, gitlab

我已经用 Bitnami 安装了最新的 GitLab。但我无法将我的更新推送到中央仓库。它总是要求输入 Git 密码。我将它安装在本地服务器中，并将域名作为本地 IP。公钥在 /hom/git/.ssh/authorised_keys 列表中更新。Iut 它要求输入 Git 用户密码。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T09:12:45.317

它很奇怪。您能否检查一下您的 SSH 服务器是否配置为使用 authorized_keys 文件？

> /etc/ssh/sshd_config
> 
> 公钥认证是

您能否检查 .ssh/authorized_keys 文件的文件权限？所有者应该是 git 用户。您之前是否已经安装了 Gitlab 版本？也许 Gitolite 已经安装，你需要为 GitLab 5 使用 gitlab-shell。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T07:07:06.857

我假设你的 git 命令是这样的

```
 git clone git@domain:project.git 
```

或者可能

```
 sudo git clone git@domain:project.git 
```

有时我们会混淆我们正在使用的用户帐户。如果我们 run `sudo`，这意味着该命令正在以 root 身份运行。您是否为 root 创建了 SSH 密钥并将其放入 Gitlab 中？在其他情况下，您可能使用创建了 SSH 密钥`sudo ssh-keygen`但您正常运行 git，这意味着 git 命令正在以活动用户身份运行。

我们也可能会混淆我们放在 Gitlab 中的 SSH 密钥。

不确定你是否需要这个，但如果你使用 web hook，在 Ubuntu 中，Apache 通常作为 www-data 运行。因此，要使 web 挂钩工作，您需要为 www-data 用户创建 SSH 密钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-13T00:23:44.153

我昨天刚刚在虚拟机 (xenserver) 和 ubuntu 服务器 12.x LTS 上设置了 gitlab。我有同样的问题。

我设置了我的 ssh 密钥和所有这些，仍然没有。

我做了两件事，不知道是一件事还是两件事都解决了...

首先，我安装了 git (!)。我只是假设它会随 gitlab 一起提供，但事实并非如此。

```
sudo apt-get install git 
```

当您安装 gitlab 时，它会创建一个用户“git”，但是，它不会显示在主目录中。

我为 git 用户设置了密码：

```
sudo passwd git 
```

之后我重新启动机器。然后我可以像这样推/拉：

```
git clone git@192.168.1.182:test-group/test-repo.git 
```

我想使用 git / gitlab 为远程位置的许多机器部署自动和远程更新。我仍然不知道该怎么做。我以为您可以在 gitlab 中创建一个用户并根据该用户权限推/拉，但我似乎不知道该怎么做。

祝你好运！

# matlab - MATLAB 换行函数

> ID：15974147
> 
> 赞同：0
> 
> 时间：2013-04-12T14:34:54.373
> 
> 标签：matlab, nntool

这是介绍神经网络工具箱的简单示例。但是，我无法在没有错误的情况下运行它。你有什么建议吗？

注意：我有神经网络工具箱，我可以通过编辑看到`newlin`函数内部！

```
>> P1 = {0 -1 1 1 0 -1 1 0 0 1};
>> T1 = {0 -1 0 2 1 -1 0 1 0 1};
>> net = newlin(P1,T1,[0 1],0.01);
??? Undefined function or method 'newlin' for input arguments of type 'cell'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:54:44.203

检查您是否安装了神经网络工具箱：

```
ver nnet 
```

**编辑**

我现在看到，`newlin()`不接受单元格数组输入，即花括号`{ }`，使用方括号进行连接，即`[ ]`获取类型的向量`double`：

```
 P1 = [0 -1 1 1 0 -1 1 0 0 1];
 T1 = [0 -1 0 2 1 -1 0 1 0 1]; 
```

# javascript - 彩盒中的动态图像变化

> ID：15974148
> 
> 赞同：0
> 
> 时间：2013-04-12T14:34:56.173
> 
> 标签：javascript, jquery, html, css, colorbox

我在产品页面或电子商务网站上工作，目前有 3 张小图片和一张大图片。这三个小图像是可点击的，当用户单击其中一个图像时，较大的图像会更改以显示该图像，使用：

```
onMouseDown="document.Image.src=/img1.jpg;" 
```

这工作正常。我遇到的麻烦是尝试将其与彩盒链接时。我想做的是让用户单击其中一个较小的图像，然后加载较大的图像，然后当他们单击该较大的图像时，会调用颜色框函数，并且图像会显示在颜色框弹出窗口中。有没有办法做到这一点？

目前我的代码显示如下：

```
jQuery("a.largeImgPop").colorbox({opacity:0.4, rel:'largeImgPop', photo:true}); 

<a class="largeImgPop" href="/img1.jpg">1</a>
<a class="largeImgPop" href="/img1.jpg">2</a>
<a class="largeImgPop" href="/img1.jpg">3</a>

<img src="/img1.jpg" name="Image" alt="Image 1" /> 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:29:52.963

有几件事。

为什么点击小图后不直接跳到颜色框？

但是假设你有一个大的占位符图像和几个交换它们的缩略图，我会这样做。

给这个ID。您可以根据需要设置大小。

```
<img src="/main.jpg" id="mainImg" name="Image" alt="img_placeholder" /> 
```

尝试将 .click() && .live() 函数与 jquery 一起使用。注意：live() 在 jquery 的更高版本中已被弃用。如果不起作用，请尝试使用 on()。

```
 $(function(){ 
    $('.largeImgPop').click(function(){
        var img = $(this).attr('src');
        $('#mainImg').attr("src", img);
    });
    $('#mainImg').live('click',function(){
        $(this).colorbox({opacity:0.4, rel:'largeImgPop', photo:true});
    });

}); 
```

我不知道这是否可行……我也不知道您为什么要将一张图像加载到另一张图像上。您从未指定图像目录结构。您可以添加 rel="/images/larger/img1.jpg" 并得到它。

并改为。

```
var img = $(this).attr('rel');
$('#mainImg').attr("src", img); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:33:55.980

```
<img src="/img1.jpg" name="Image" alt="Image 1" onMouseDown="myFunction()"/> 
```

# ios - 自定义 UIStoryboardSegue 后退动画无法按预期工作

> ID：15974149
> 
> 赞同：0
> 
> 时间：2013-04-12T14:34:56.097
> 
> 标签：ios, uitableview, uistoryboardsegue

出于某种原因，我想在情节提要中为我的 segue 过渡制作一个自定义推送动画，而不是从右向左推送，而是从左向右推送，我开发了一个自定义 segue，它使用以下代码执行此操作：

```
UIViewController *sourceViewController = (UIViewController*)[self sourceViewController];
UIViewController *destinationController = (UIViewController*)[self destinationViewController];

CATransition* transition = [CATransition animation];
transition.duration = .25;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
transition.type = kCATransitionPush; //kCATransitionMoveIn; //, kCATransitionPush, kCATransitionReveal, kCATransitionFade
transition.subtype = kCATransitionFromLeft; //kCATransitionFromLeft, kCATransitionFromRight, kCATransitionFromTop, kCATransitionFromBottom

[sourceViewController.navigationController.view.layer addAnimation:transition
                                                            forKey:kCATransition];

[sourceViewController.navigationController pushViewController:destinationController animated:NO]; 
```

问题是，当单击下一个视图中的后退按钮时，segue 动画是默认动画并且尚未更改（它应该是从右到左，但它显示从左到右，这是默认动画）

我也应该如何改变动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:28:11.903

其实是我的错，UIStoryboardSegue 无法控制后退动画，因为它属于 uiviewcontroller 弹出动画！出于我的目的，我应该为我的场景编写自定义流行动画。

# php - [IF] 的 PHP 短语法存在且等于

> ID：15974153
> 
> 赞同：0
> 
> 时间：2013-04-12T14:35:12.143
> 
> 标签：php, variables, syntax

只是想知道这个表达式是否有一个简短的版本：

```
if(!empty($var) && $var == 'FOO')
{
 // Do things
} 
```

它检查是否`$var` `IS DEFINED`、`NOT FALSE`和。只有满足这些要求，条件的第二部分才会启动并检查 if 。`NOT NULL``NOT EQUAL TO ZERO``$var``$var == 'FOO'`

当然，我可以这样做：`if($var == 'FOO'){}`但如果`$var`没有定义，它会抛出一个`Notice`.

刚刚测试了这段代码：

```
$var='FOO';

if (!empty($var)=='FOO')
{
 echo 'BLAH'; 
}
// Will output 'BLAH' 
```

但`BLAH`在任何情况下，它都会在`!empty($var)`返回时输出`TRUE`。由于 string - `'FOO'`> `IS DEFINED`, `NOT FALSE`,它将输出. 意义只根据它的外表来判断，而不是根据里面的东西来判断。在我的情况下不会工作。`NOT NULL``NOT EQUAL TO ZERO``BLAH``!empty($var)=='FOO'``$var`

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:43:44.573

您可以实现自己的功能来做到这一点。

```
if (myFunction($var, 'foo')) ... 
```

函数看起来像：

```
public function myFunction($var, $expectedVar) {
// check if empty and equal
} 
```

# php - 为 Excel 导出 CSV

> ID：15974163
> 
> 赞同：5
> 
> 时间：2013-04-12T14:35:38.340
> 
> 标签：php, excel

我正在使用 PHP 编写一个 CSV 文件`fputcsv($file, $data)`。一切正常，但是我不能只在 Excel 中打开它，而是必须导入它并指定编码和要使用的分隔符（在向导中）。我已经看到其他网站的导出只需单击它们就可以正确打开，现在想知道我应该对我的文件做些什么来实现这一点。

我尝试使用这个库：[http](http://code.google.com/p/parsecsv-for-php/) ://code.google.com/p/parsecsv-for-php/ 但我什至无法让它运行，并且我不太确定它是否真的能帮助我......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-03-29T16:42:00.450

这就是我从 PHP 制作 Excel 可读 CSV 文件的方式：

*   添加 BOM 以修复 Excel 中的 UTF-8
*   将分号 (;) 设置为分隔符
*   设置正确的标题 ("Content-Type: text/csv; charset=utf-8")

举个例子 ：

```
$headers = array('Lastname :', 'Firstname :');
$rows = array(
    array('Doe', 'John'),
    array('Schlüter', 'Rudy'),
    array('Alvarez', 'Niño')
);

// Create file and make it writable

$file = fopen('file.csv', 'w');

// Add BOM to fix UTF-8 in Excel

fputs($file, $bom = (chr(0xEF) . chr(0xBB) . chr(0xBF)));

// Headers
// Set ";" as delimiter

fputcsv($file, $headers, ";");

// Rows
// Set ";" as delimiter

foreach ($rows as $row) {

    fputcsv($file, $row, ";");
}

// Close file

fclose($file);

// Send file to browser for download

$dest_file = 'file.csv';
$file_size = filesize($dest_file);

header("Content-Type: text/csv; charset=utf-8");
header("Content-disposition: attachment; filename=\"file.csv\"");
header("Content-Length: " . $file_size);
readfile($dest_file); 
```

适用于 Excel 2013。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-23T11:45:55.637

这真是一团糟。你当然可以使用 sep=; 或 sep=、或 sep=\t 或任何使 Excel 了解 CSV 中使用的分隔符的内容。只需将此字符串放在 CSV 内容的开头即可。例如：

```
fwrite($handle, "sep=,\n");

fputcsv($handle,$yourcsvcontent); 
```

这工作顺利。但是，如果您需要分别支持特殊字符或 MB，它不能与使 Excel 了解 UTF-8 所需的 BOM 结合使用。

最后，为了使其防弹，您需要读出用户区域设置并相应地设置分隔符，如上所述。将 BOM`("\xEF\xBB\xBF")`放在 CSV 内容的开头，然后编写 CSV，例如：通过检查用户的区域设置检索到的分隔符`fputcsv($handle, $fields, $user_locale_seperator);` 在哪里。`$user_locale_seperator`不舒服，但它的工作...

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-12T14:50:58.527

尽管 CVS 中有“C=comma”，但 Excel 使用您的语言环境本机分隔符。因此，如果您的语言环境分隔符是例如分号，那么假设`fputcsv`始终使用逗号，它将不起作用。

当您单击*“导出到 Excel CSV”*时，Google AdSense 的作用是`Tab`用作分隔符。那行得通。

要复制它，请将第三个参数 ( `delimiter`) 设置`fputcsv`为覆盖默认逗号。例如`Tab`使用：`fputcsv($handle, $fields, "\t");`

*将适合您的 CSV 格式与`fputcsv`.*

*考虑在您的问题中包含两者的示例。你可能会得到更好的答案。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T14:47:21.473

您可能有编码问题。

试试这个帖子：

[http://onwebdev.blogspot.com.es/2010/10/php-encoding-of-csv-file-for-excel.html](http://onwebdev.blogspot.com.es/2010/10/php-encoding-of-csv-file-for-excel.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-26T18:08:49.307

我注意到您需要考虑： `Content-Type`header BOM (Byte Order Mark) 文件中的实际字符编码

使用 BOM（工程）：

```
$bom = pack("CCC", 0xEF, 0xBB, 0xBF);
header('Content-Type: text/csv');
header('Content-Length: '.(strlen($csv)+strlen($bom)));
header('Content-Disposition: attachment;filename=my.csv');
echo $bom;
echo $csv; 
```

没有 BOM（有效，但您需要替换“智能引号”然后`utf8_decode`在每个值或单元格上运行，它会转换一些字符，例如 FRĒ 转换为 FRE'）

```
header('Content-Type: application/csv;charset=utf-8');
header('Content-Length: '.strlen($csv));
header('Content-Disposition: attachment;filename=my.csv');
echo $csv; 
```

如果使用了错误的 charset 和 BOM 组合，在 MS Excel 中打开时就会出现错误。

额外 `mb_strlen`的事实：告诉你字符数，`strlen`告诉你字节数。您不想用于计算 Content-Length 标头**。**`mb_strlen`

奖励 2：替换微软“智能”字符（破折号、大引号等）：

```
$map = array(chr(145) => "'"
            ,chr(146) => "'"
            ,chr(147) => '"'
            ,chr(148) => '"'
            ,chr(149) => '-'
            ,chr(150) => '-'
            ,chr(151) => '-'
            ,chr(152) => '-'
            ,chr(152) => '-'
            ,chr(171) => '-'
            ,chr(187) => '-'
);
// faster that strtr
return str_replace( array_keys($map), $map, $str ); 
```

# api - 无需登录即可通过api访问谷歌驱动器文件？

> ID：15974164
> 
> 赞同：2
> 
> 时间：2013-04-12T14:35:38.710
> 
> 标签：api, sdk, google-drive-api

我正在尝试制作一个网页，可以显示有关我的谷歌驱动器上的文档的信息。例如，我想在网页上显示我所有 google 文档的标题。我不希望用户必须登录到谷歌帐户，并且我不想授权任何东西（或用户授权任何东西）。我只希望用户在导航到页面时能够看到我显示的内容 - 以只读格式。用户将没有机会编辑或上传或删除任何内容，他们只能查看我显示的信息。

有没有办法在不使用 oauth 2.0 的情况下从谷歌驱动器（通过 API 或任何其他方式）获取文件？我查看了 api 文档，甚至编写了示例应用程序，但它们都有一个步骤，“转到此 URL，单击允许，输入代码”然后您就可以访问了。这些步骤不应该是必要的。我只想下载文件并能够操作它（在内存中或作为流）然后显示一些关于它的内容。

此外，我可能会误解 OAuth 2.0 的工作原理，因此如果情况如此，任何有用的信息将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:36:24.587

您无需向 Google 验证访问者的身份，但需要对自己进行身份验证，这样您的网络应用程序就可以从您的个人云端硬盘中检索数据。

为自己获取访问令牌和刷新令牌，存储它们并验证您的请求。如果您使用我们的客户端库之一，其中大多数会在访问令牌过期后刷新。有关更多详细信息，请参阅[将 OAuth 2.0 用于 Web 服务器应用程序，](https://developers.google.com/accounts/docs/OAuth2WebServer) [OAuth 2.0 Playground](https://developers.google.com/oauthplayground/)可帮助您了解如何获取这些令牌。

# c++ - 从 wiki 实现白平衡算法

> ID：15974166
> 
> 赞同：0
> 
> 时间：2013-04-12T14:35:40.357
> 
> 标签：c++, opencv

我想从 wiki [http://en.wikipedia.org/wiki/Color_balance实现一些白平衡算法](http://en.wikipedia.org/wiki/Color_balance)

它们只是一些简单的矩阵操作 openCV 是否提供任何函数来对一组像素进行乘法运算，如下所示？

例如，2 x 2、3 通道 Mat A =

```
0 0 0 1 1 1
2 2 2 3 3 3 
```

3 x 3, 1 通道 Mat B =

```
1 0 0
0 2 0
0 0 3 
```

A x B = C 和 C =

```
0 0 0 1 2 3
2 4 6 3 6 9 
```

我已经编写了一些通用函数来处理像素转换，但如果存在 openCV 的内置函数，我更喜欢它，因为 openCV 的函数可能会进行一些优化

```
template<typename T, typename UnaryFunctor>
void transform_channel(cv::Mat &src, int channel, UnaryFunctor functor)
{
    int const channels = src.channels();
    if(channels == 1 && src.isContinuous()){
        return transform_continuous_channel<T>(src, functor);
    }

    for(int row = 0; row != src.rows; ++row)
    {
        auto dst_ptr = get_pointer<T>(src, row, channel);
        for(int col = 0; col != src.cols; ++col){
            *dst_ptr = functor(*dst_ptr);
            dst_ptr += channels;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:50:59.680

矩阵乘法是在 OpenCV 中使用`*`运算符实现的。如果您想让它工作，您应该使用`cv::Mat::reshape()`（[此处](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=reshape#Mat%20Mat%3a%3areshape%28int%20cn,%20int%20rows%29%20const)的文档）将您的 RGB 图像重塑为 1 通道矩阵。

提示：`cv::Mat::reshape()`返回对新矩阵的引用而不复制数据（不必要且缓慢）。因此，像这样使用它通常是一个好主意：

```
cv::Mat someMatrix;
someMatrix = someMatrix.reshape(1); 
```

或者这样（使用另一个矩阵变量）：

```
cv::Mat rgbMatrix, myMatrix;
myMatrix = rgbMatrix.reshape(1); 
```

再次强调，这不会复制数据，因此您不会丢失任何内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:55:14.210

您会注意到颜色平衡操作仅由对角矩阵组成，这对应于按元素乘以标量。因此，您示例中的转换将是：

```
image = image.mul(cv::Scalar(1,2,3)); 
```

对于 3 通道图像。我不知道应用任意像素矩阵变换的函数。

# ruby - 无法在带有 mac 10.5.8 的 Rails 上安装 ruby

> ID：15974170
> 
> 赞同：1
> 
> 时间：2013-04-12T14:35:57.553
> 
> 标签：ruby, installation

我有一台较旧的 mac mini (v10.5.8) 我想安装最新版本的 rails。

`gem update --system`给我“没有要加载的文件”

`gem install rubygems-update`给了我和上面一样的东西

所以我从 ruby​​gems.org/pages/download 手动下载并提取了 tar 然后尝试运行`ruby setup.rb`，但这给了我......

```
./lib/rubygems/core_ext/kernel_require.rb:45:in 'gem_original_require': no such file to load -- stringio (LoadError) 
```

...所以我现在被卡住了..我不确定从这里去哪里...运行`ruby -v`给我“1.8.7（2008-05-31 patchlevel 0”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:42:52.963

与其使用系统 ruby​​，不如尝试使用[`rvm`](https://rvm.io/)安装最新版本的 Ruby：

```
$ curl -L https://get.rvm.io | bash -s stable --rails --autolibs=enabled --ruby=1.9.3 
```

或者，如果您想要更多控制权

```
$ curl -L https://get.rvm.io | bash -s stable
$ rvm get head
$ rvm install 1.9.3 
```

无论哪种方式，请确保您运行

```
$ rvm --default use 1.9.3 
```

请注意，您可能必须先安装 XCode 和 XCode 命令行工具。另请注意，您可能不应该使用`sudo`... 只是让它为您的用户安装 ruby​​。

# algorithm - 在矩形中布置圆圈

> ID：15974174
> 
> 赞同：0
> 
> 时间：2013-04-12T14:36:08.447
> 
> 标签：algorithm

我正在尝试锻炼如何有效地计算动态/随机视图的布局。

该视图将包含许多圆圈。每个圆圈都有预定的大小。这些尺寸都在给定的最大和最小尺寸之间。

我正在尝试找到一种有效的方法来在具有几个条件的矩形内布置圆圈。

圆圈不能与矩形的边缘重叠，并且圆圈之间必须有最小的“间距”。

我想出的第一个方法是随机生成坐标对并放置最大的圆。然后随机生成更多的坐标对，直到为下一个圆圈生成合适的坐标对。下一个，下一个，以此类推，直到全部画完。

这样做的问题是它可能需要很长时间才能完成。随后的每个圆圈都需要更长的时间来放置，因为它可以去的地方更少。

另一个问题是布局视图可能是不可能的。

我确信必须有更有效的方法来做到这一点，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:02:34.417

公式必须处理他们需要的最小可能正方形或从另一个角度来看，边缘点之间的排列具有最小可能**密度**。但是你的问题可以通过按大小对圆圈进行排序来解决，然后从最大的开始，逐步将它们排列到最小，因为越大越笨重，而较小的圆圈更容易适应小角落。

**构建圆圈的三角形**，其中 3 个圆圈有一个它们一起使用的描述空间。这个三角形有3个角对吗？:) 所以确定/计算那个角的角度和最接近 90 度角的角应该放在一个方角，最好说三个圆应该镜像放置，以便具有最合适的***90 度角的圆***后面是拐角处的那个人。如果第四个圆圈适合这个三角形的其余部分，那太好了，如果不是，你把这个圆圈精确地放在它里面，它是那个三角形的最小外层空间。因为它并不是说下一个更小的圆圈是最适合的圆圈，这也意味着你有一堆未放置的圆圈，直到找到一个更适合的圆圈。在你找到一个之后，你再次向上你的圆形堆栈并尝试将下一个放在其中一个角落，或者你尝试构建下一个三角形。在这里你可以看到这是多么复杂，该死！[http://en.wikipedia.org/wiki/Malfatti_circles](http://en.wikipedia.org/wiki/Malfatti_circles) 但是无论如何，这个三角形角中的一个角越多 90°，这 3 个圆圈所占用的空间就越小。

**另一个概念**可能是考虑更大的圆圈，比如空间，在与矩形相关的一个角上留下一个三角形。该三角形具有可用于较小圆圈的最大空间。如果没有完美契合的圆圈，那么您占用的正方形空间就会长大。因此，就我考虑用想象的三角形来处理这个问题以与其中的拟合圆圈进行比较或从正方形中取三角形范围是解决方案的基础。

# asp.net-mvc - 从实体类继承，因此它可以在实体框架中使用

> ID：15974188
> 
> 赞同：2
> 
> 时间：2013-04-12T14:36:43.213
> 
> 标签：asp.net-mvc, entity-framework, inheritance

我在使用实体框架代码优先方法时遇到问题：

```
public class Entity
{
    [Key]
    public int Id { get; set; }
    public string A { get; set; }
}

public class Context : DbContext
{
    public DbSet<Entity> Entities { get; set; }
} 
```

假设这是实体框架的设置。有用。我可以创建一个实体实例并将其添加到实体集。现在我的问题是：我想创建一个 Entity 的子类，它是传递给某个视图的 ViewModel：

```
public class EntityViewModel : Entity
{
    public String ViewModelProperty { get; set; }
} 
```

然后，当我从模型绑定器中取回生成的对象时，我应该能够做到这一点：

```
public void Action(EntityViewModel vm)
{
    db.Entities.Add(vm); // This should work since EntityViewModel inherits Entity
    db.SaveChanges();
} 
```

在这里，我得到以下异常：

> 找不到 EntityType 'EntityViewModel' 的映射和元数​​据信息。

我已经尝试将 [NotMapped] 属性添加到 EntityViewModel，这没有帮助。如果我手动将 EntityViewModel 属性提取到一个新的 Entity 对象中，它可以工作：

```
public void Action(EntityViewModel vm)
{
    var entity = new Entity
    {
        Id = vm.Id,
        A = vm.A
    };
    db.Entities.Add(entity); // This works!!!
    db.SaveChanges();
} 
```

为什么 EntityFramework 会这样？有没有办法告诉它忽略 EntityViewModel 对象？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:01:40.440

这将不起作用，因为 EF 将您的继承理解为[每个层次结构的表](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)方案，因此它希望`EntityViewModel`在同一个表上具有 的属性作为`Entity`.

您可以使用组合来避免此问题：

```
public class EntityViewModel : Entity
{
    public Entity Entity { get; set; } 
    public String ViewModelProperty { get; set; }
} 
```

进而

```
public void Action(EntityViewModel vm)
{
    db.Entities.Add(vm.Entity);
    db.SaveChanges();
} 
```

检查复杂对象模型绑定规则的[这个答案](https://stackoverflow.com/questions/714634/custom-model-binder-for-complex-composite-objects-help)。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:04:53.260

更好的方法是使用组合而不是继承。在这种情况下，视图模型可以直接将模型暴露给视图，也可以委托给模型。

# android - 自定义 BaseAdapter 仅将 Last Element 添加到 ListView

> ID：15974195
> 
> 赞同：1
> 
> 时间：2013-04-12T14:37:15.993
> 
> 标签：android, android-listview, baseadapter

我设计了一个自定义 BaseAdapter，它采用一个 Class(JsonKeys) 的 ArrayList，其中包含我需要的数据的 getter 和 setter。

我基本上是在解析一个 JSON 数组并将适当的数据插入到下面给出的列表行中：

```
"attendanceData": [
    {
      "ccode": "MAT 212",
      "cname": "ENGINEERING MATHEMATICS- IV",
      "cclass": "30",
      "bunked": "5",
      "percent": "86",
      "updated": "3\/20\/13"
    },
    {
      "ccode": "CSE 202",
      "cname": "FORMAL LANGUAGES &amp; AUTOMATA THEORY",
      "cclass": "28",
      "bunked": "3",
      "percent": "91",
      "updated": "3\/15\/13"
    },
    {
      "ccode": "CSE 204",
      "cname": "RELATIONAL DATABASE MANAGEMENT SYSTEMS",
      "cclass": "24",
      "bunked": "2",
      "percent": "93",
      "updated": "3\/15\/13"
    },
    {
      "ccode": "CSE 206",
      "cname": "MICROPROCESSORS",
      "cclass": "30",
      "bunked": "1",
      "percent": "97",
      "updated": "3\/6\/13"
    },
    {
      "ccode": "CSE 208",
      "cname": "EVENT DRIVEN PROGRAMMING USING JAVA",
      "cclass": "32",
      "bunked": "2",
      "percent": "95",
      "updated": "3\/14\/13"
    },
    {
      "ccode": "OPE 1",
      "cname": "OPEN ELECTIVE - ADVERTISING THEORY &amp; PRACTICE&nbsp;&#40;PME 332&#41;",
      "cclass": "13",
      "bunked": "3",
      "percent": "82",
      "updated": "3\/21\/13"
    },
    {
      "ccode": "CSE 210",
      "cname": "MICROPROCESSORS LAB",
      "cclass": "NA",
      "bunked": "NA",
      "percent": "NA",
      "updated": "NA"
    },
    {
      "ccode": "CSE 212",
      "cname": "JAVA PROGRAMMING LAB",
      "cclass": "NA",
      "bunked": "NA",
      "percent": "NA",
      "updated": "NA"
    },
    {
      "ccode": "CSE 214",
      "cname": "RELATIONAL DATABASE MANAGEMENT SYSTEMS LAB",
      "cclass": "NA",
      "bunked": "NA",
      "percent": "NA",
      "updated": "NA"
    }
  ] 
```

这些是我的自定义 BaseAdapter 和分别膨胀列表视图的片段的类。

```
public class AttendanceListAdapter extends BaseAdapter
{
    private ArrayList<JsonKeys> adapterkeylist = new ArrayList<JsonKeys>();
    private Context context;
    private static LayoutInflater inflater = null;
    TextView subject, code, attended, absent, percent, updated;
    JsonKeys dataString = new JsonKeys();

    public AttendanceListAdapter(Context c, ArrayList<JsonKeys> jk)
    {
        context = c;
        adapterkeylist =jk;
        inflater = LayoutInflater.from(context);
    }

    @Override
    public int getCount()
    {
        return adapterkeylist.size();

    }

    @Override
    public Object getItem(int position)
    {

        // return s[s.length/6][s.length%6];
        return adapterkeylist.get(position);
    }

    @Override
    public long getItemId(int position)
    {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        View v = convertView;

        if (convertView == null)
            v = inflater.inflate(R.layout.attendance_listrow, null);

        subject = (TextView) v.findViewById(R.id.subName);
        subject.setSelected(true);
        code = (TextView) v.findViewById(R.id.ccode);
        attended = (TextView) v.findViewById(R.id.subAttended);
        absent = (TextView) v.findViewById(R.id.subAbsent);
        percent = (TextView) v.findViewById(R.id.subPercent);
        updated = (TextView) v.findViewById(R.id.subUpdated);

        dataString = adapterkeylist.get(position);

        Log.i("Info Tag Attendance","\n"+dataString.getName());

        subject.setText(dataString.getName());
        code.setText("Subject Code: " + dataString.getCode());
        attended.setText("Classes Attended: " + dataString.getCClass());
        absent.setText("Classes Absent: " + dataString.getBunked());
        percent.setText("Attendance Percentage: " + dataString.getPercent());
        updated.setText("Last Updated: " + dataString.getUpdated());

        return v;

    }

} 
```

片段：

```
public class AttendanceDetailsTabFragment extends Fragment
{
    AttendanceListAdapter adapter;
    JSONArray ar;
    JSONObject jobj;
    ArrayList<JsonKeys> keyslist;
    JsonKeys jk;

    @Override
    public void onActivityCreated(Bundle savedInstanceState)
    {
        super.onActivityCreated(savedInstanceState);

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {

        View view = inflater.inflate(R.layout.attendance_listview_layout, container, false);

        keyslist = new ArrayList<JsonKeys>();
        String temp = new String();

        try
        {
            ar = new JSONArray();
            ar = GlobalVars.getJSON().getJSONArray("attendanceData");

            for (int i = 0; i < ar.length(); i++)
            {

                JSONObject jObject = ar.getJSONObject(i);
                jk = new JsonKeys();
                jk.setCode(jObject.getString("ccode"));
                temp = jObject.getString("cname");
                temp = StringEscapeUtils.unescapeHtml4(temp);// To convert HTML
                                                                // special chars
                                                                // to UniCode
                                                                // format;
                jk.setName(temp);
                jk.setCClass(jObject.getString("cclass"));
                jk.setBunked(jObject.getString("bunked"));
                jk.setPercent(jObject.getString("percent"));
                jk.setUpdated(jObject.getString("updated"));
                Log.i("Info Tag Attendance",
                        jk.getCode() + "\n" + jk.getName() + "\n" + jk.getCClass() + "\n" + jk.getBunked() + "\n" + jk.getPercent() + "\n"
                                + jk.getUpdated() + "\n");

                keyslist.add(jk);

            }

        } catch (JSONException e)
        {
            Log.e("Error Tag", "Could Not Get JSON Array");
        } finally
        {
            Log.i("Info Tag Attendance", "\n" + keyslist.size());

        }

        ListView list = (ListView) view.findViewById(R.id.list);

        // adapter.notifyDataSetChanged();
        adapter = new AttendanceListAdapter(getActivity(), keyslist);
        list.setAdapter(adapter);

        if (container == null)
        {
            return null;
        }

        return view;
    }

} 
```

可以在[http://postimg.org/image/6qs3oo3hp/找到正在发生的事情的屏幕截图](http://postimg.org/image/6qs3oo3hp/)

如您所见，只有最后一个元素被输入到 ListView 中。欢迎任何修复。我提前为代码长度道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:02:31.407

没关系，我刚刚意识到我在全局类（而不是数组）中设​​置变量，所以显然只有最后输入的数据被记录（Facepalm）。

愚蠢的错误，将使用HashMap重新制作代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T19:12:59.447

我在android中遇到了同样的问题，

我意识到我将 listitemclass 的变量设置为静态，因此当视图从其适配器返回时，它总是引用相同的变量。

删除了静态部分，它工作正常

# java - XMLStreamReader：获取字符偏移量：来自文件的 XML

> ID：15974196
> 
> 赞同：3
> 
> 时间：2013-04-12T14:37:16.027
> 
> 标签：java, stax

- `XMLStreamReader`>Location 有一个名为`getCharacterOffset()`.

不幸的是，Javadocs 指出这是一个命名模糊的方法：它还可以返回一个字节偏移量（这在实践中似乎是正确的）；从文件读取时（例如）似乎会发生这种情况：

[Javadoc](http://docs.oracle.com/javaee/5/api/javax/xml/stream/Location.html#getCharacterOffset)指出：

> 将字节或字符偏移量返回到此位置指向的输入源中。如果输入源是文件或字节流，则这是该流中的字节偏移量，但如果输入源是**字符媒体**，则偏移量是字符偏移量。（重点补充）

我真的需要**字符**偏移；而且我很确定我得到的是**字节**偏移量。

（UTF-8 编码的）XML 包含在（部分损坏的 1G）文件中。[因此需要使用较低级别的 API，它不会抱怨缺乏良好的格式，直到它真的别无选择，只能]。

**问题**

Javadoc 说“...输入源是字符媒体...”是什么意思：我如何强制它将我的输入文件视为“字符媒体” - 以便我获得准确的（字符）偏移量而不是字节偏移？

**额外**的废话：

[我很确定这是怎么回事-当我将文件分开时（使用某些已知的高级标签），我丢失了一些字符或多余的字符-以非累积的方式-我将差异减少到几个多字节字符抛出计数器：也是当我复制时（例如在 Powershell 中使用'head'/'tail' - 这个工具似乎可以正确识别[或假设 UTF-8] 并且可以很好地转换为据我所知，UTF-16]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:49:50.993

偏移量以底层证券为单位`Source`。

`XMLStreamReader`唯一知道它从 中读取了多少单位，所以`Source`偏移量是在这些单位中计算的。

A`Stream`以单位为单位工作`byte`，因此您最终会得到一个`byte`偏移量。

A`Reader`以 为单位工作`char`，因此您最终得到`char`.

文档[`StreamSource`](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/transform/stream/StreamSource.html)在“字符媒体”一词的含义上更加明确。

也许尝试类似的东西

```
final Source source = new StreamSource(new InputStreamReader(new FileInputStream(new File("my.xml")), "UTF-8"));
final XMLStreamReader xmlReader = XMLInputFactory.newFactory().createXMLStreamReader(source); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:52:38.913

`XMLInputFactory.createXMLStreamReader(java.io.InputStream)`是一个字节流

`XMLInputFactory.createXMLStreamReader(java.io.Reader)`是一个字符流

# c++ - 使用 const_iterator 时的断言

> ID：15974198
> 
> 赞同：1
> 
> 时间：2013-04-12T14:37:17.353
> 
> 标签：c++, std

我正在测试使用具有函数 foo 的接口。这是我在我的模拟中对这个函数的实现：

```
class Mock
{
public:
    void foo(Foo::const_iterator begin, Foo::const_iterator end) {
      _begin = begin;
      _end = end;

      ...
    }
    ...
    Foo::const_iterator _begin;
    Foo::const_iterator _end;
}; 
```

然后我有一个测试来检查 foo 是否被调用：

```
// test that function foo is not called
EXPECT_EQ(mock->_begin, Foo::const_iterator()); 
```

但这在 Visual Studio 中给了我一个断言，声称迭代器不兼容。如果我没有调用 foo()，我会期望 _begin 将等于 Foo::const_iterator()。为什么不是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:58:38.997

迭代器只有在指向同一个容器时才具有可比性。默认构造的迭代器根本不指向容器，因此它与定义上的任何东西都不兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:50:15.273

也许 VS 使用默认构造的迭代器来实现它们的迭代器兼容性检查，这样默认构造的迭代器永远不会与任何其他迭代器兼容，即使是默认构造的迭代器也是如此。

# c# - 这是如何运作的？LINQ to Entities 触发程序集的加载？

> ID：15974203
> 
> 赞同：3
> 
> 时间：2013-04-12T14:37:29.027
> 
> 标签：c#, .net, linq, entity-framework, linq-to-entities

## 解决方案中的项目

我有一个针对 .NET 4.5 并使用 Entity Framework 6 Alpha 3 的典型 3 层解决方案。该解决方案由三个项目组成，我们称之为：

1.  **实体**- 包含 EF 模型和实体定义的类库
2.  **DataAccess** - 充当 UI 和数据库之间的“业务层”的类库
3.  **WinformsClient** - Winforms 客户端应用程序

## 参考

WinformsClient 项目包含大量**外部引用**，包括对 CrystalReports DLL、其他“公司范围”程序集的引用等。

在我的 WinformsClient 中，我引用了我的 DataAccess 库。两者都使用实体库。

## 触发问题

在 WindowsClient 中，我调用了 DataAccess 库上的一个方法，我们称之为`GetData`. 在此方法中，`DbContext`创建了 a，执行了一些 LINQ 魔术并`IEnumerable<T>`返回了 an。

## 问题

现在，当我**第一次**调用此方法时，在调用第一个 LINQ 扩展方法时会加载许多外部程序集。这包括需要很长时间才能加载的 CrystalReports DLL。*但是这些程序集都不是**实体**或**数据访问**库实际引用的，也不是执行或显示数据所必需的。*

事实上，当我创建一个引用 DataAccess 和实体库的单独控制台应用程序时，我可以`GetData`很好地调用并获取我的实体列表，并且不会加载任何外部库。

我怀疑 Entity Framework / LINQ to Entities 与此有关，因为当我只是从 DataAccess 库（不加载 EF）返回 POCO 列表时，没有加载任何外部引用。

谁能解释这种行为？

## 更新

[此问题可能与此问题](https://stackoverflow.com/questions/6913275/how-to-prevent-ef4-from-dynamically-loading-all-assemblies)密切相关，其中 Entity Framework 尝试加载从项目中引用的所有程序集。任何帮助我理解为什么会发生这种情况/如何影响这种情况的建议仍然受欢迎！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:42:05.647

问题不在于实体或数据访问层，显然，问题在于您的 WinformsClient。我的建议是您在调用该方法的行设置断点`GetData`，这显然在您的 WinformsClient 项目中。

从那里，进入该`GetData`方法并检查您的调用堆栈，也许您会在那里找到违规者。似乎调用的方法`GetData`正在被您的 WinformsClient 应用程序中的某些东西监视。（obs：评论太长了）

# c++ - 我有一个在 linux 上运行的 c++ 程序，是否可以让它定期将状态快照存储在共享内存中以进行崩溃后恢复？

> ID：15974218
> 
> 赞同：9
> 
> 时间：2013-04-12T14:38:02.263
> 
> 标签：c++, linux, shared-memory

我不知道该怎么做，因为我已经看到了用于进程间通信的共享内存的例子。我想知道我是否可以从服务器中利用它来获取某些对象的定期快照并将它们以某种格式转储到共享内存中……如果我的程序崩溃……可以在重新启动程序时检索部分恢复。这可行吗？如果是这样，我可以看看什么来开始？

更新：我在某处读到 linux 上的共享内存（我在 linux 上）是持久的，所以我想我可能能够定期保存状态快照而无需辅助进程。例如，一个不断更新的结构，我每隔几秒就会转储到共享内存。我选择共享内存而不是文件的原因纯粹是为了速度，因为状态将是很多二进制数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T14:48:38.023

只是在类似 Uni*x 的系统上的一个想法（未尝试过）。

执行 fork(2) 并向该子进程发送 SIGTRAP 信号（或任何创建核心转储的信号）[。](http://unixhelp.ed.ac.uk/CGI/man-cgi?signal+7)

Fork 复制原始进程环境。这将转储完整的内存状态。然后可以通过gdb（或类似方法）对其进行分析。当然不是为了恢复...

您可以创建一个`gdbinit`文件，并且可以从`gdb`使用核心文件调用的脚本中转储变量。

为什么需要共享内存？将状态转储到磁盘不是很好吗？

* * *

我认为这也可以用于恢复。Perl -u 命令行参数做类似的事情。它解析脚本文件并转储核心文件。[undump](http://perldoc.perl.org/perlfaq3.html#How-can-I-make-my-Perl-program-run-faster?)程序可以使用该核心文件将核心直接加载到内存并启动 perl，而无需解析阶段。

# apache-flex - UIImpersonator.addChild() 没有调度正确的事件

> ID：15974220
> 
> 赞同：1
> 
> 时间：2013-04-12T14:38:06.177
> 
> 标签：apache-flex, ant, flexunit

我正在通过 Ant 运行 FlexUnit 测试。测试`test1`失败并显示消息“*在预期事件之前发生超时*”，但`test2`通过了。这两个测试之间的唯一区别是一个使用`UIImpersonator.addChild()`而另一个使用`FlexGlobals.topLevelApplication.addElement()`.

`test1`即使我监听`"addedToStage"`事件也会失败。`"added"`然而，监听事件是`test1`通过的。

```
[Test(async, ui, description="Fails")]
public function test1():void
{
    var c:UIComponent = new UIComponent;
    Async.proceedOnEvent(this, c, FlexEvent.CREATION_COMPLETE);
    UIImpersonator.addChild(c);
}

[Test(async, ui, description="Passes")]
public function test2():void
{
    var c:UIComponent = new UIComponent;
    Async.proceedOnEvent(this, c, FlexEvent.CREATION_COMPLETE);
    FlexGlobals.topLevelApplication.addElement(c);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:24:42.007

添加子元素时，它不会启动 flex 组件生命周期，因为 displayobject 是 flash 核心元素，而不是 flex。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:46:43.000

假设 Flex4/spark。addChild 添加了一个 MovieClip，而不是 Flex UIElement，它甚至不知道 FlexEvent 类型，因为它是一个 flash.core 对象。它只会抛出 addedToStage 或添加的事件（Event.added），但在单元测试中，它不会添加到阶段，因为 UIImpersonator 不是阶段的一部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T22:35:14.003

我今天使用新的 Apache FlexUnit 4.2.0 版本遇到了同样的问题。

当尝试运行包含在二进制发行版中的 sampleCIProject 时，使用 Async 的测试都不会成功。例外情况与上述完全相同。

看了一会儿源代码后，我注意到核心 FlexUnit 库有两种风格：`flexunit-4.2.0-20140410-as3_4.12.0.swc`和`flexunit-4.2.0-20140410-flex_4.12.0.swc`.

其中第一个适用于纯 AS3 项目，而后者适用于使用 Flex 的项目。sampleCIProject 在库路径中包含这两个库，我假设它使用的是纯 AS3 库中的 UIImpersonator 类，而不是支持 Flex 的类。我`flexunit-4.2.0-20140410-as3_4.12.0.swc`从项目中删除了，你瞧，异步测试又开始工作了。

对你来说可能有点晚了，但我希望这对其他人有帮助。

# android - Android中带有文本和圆角表的分隔线

> ID：15974225
> 
> 赞同：0
> 
> 时间：2013-04-12T14:38:41.580
> 
> 标签：android, android-layout

我想在 Android 中做以下布局：

![布局](https://i.stack.imgur.com/OW8Ai.png)

我的两个问题是：

*   是否可以在不使用图像的情况下对文本进行分隔？
*   我知道我想使用`TableLayout`注册表单，但是可以在桌子周围做一个圆角边框吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:46:37.687

这两个问题的答案都是肯定的。

您将要调查这两个[补丁的九个可绘制](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)对象。九个补丁可绘制允许您创建位图并指定位图将拉伸的位置。

作为表格的示例，您将拥有看起来像表格顶部和底部单元格的图像，并且您将单元格的中心（沿直边）标记为可拉伸区域。圆形边缘将保持不变，但中心将伸展以适应内容。

# c# - 编码的 UI 测试多语言组合框？

> ID：15974228
> 
> 赞同：1
> 
> 时间：2013-04-12T14:38:50.110
> 
> 标签：c#, visual-studio-2010, coded-ui-tests

我有一个多语言 Web 应用程序。我已经用英语编码的 ui 测试生成器记录了测试用例。我有一个关于组合框的问题。当我播放法语测试用例时会出错。因为它记录了英语的 selecteditem 值。如何解决这个问题？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:41:48.057

当您记录一个设置组合框值的操作时，您通常会得到一个执行该操作的方法和一个“Params”属性，您可以在其中设置一个要选择的值。

例如，如果您创建了一个名为 的方法`SelectFoo`，您将拥有一个名为 的属性`SelectFooParams`，它为组合框公开一个值。

这允许您记录一个动作，然后在多种情况下重复使用它，而不是为组合框的每个可能值制作一个记录。

# nuget - 在哪里可以下载 Microsoft jQuery Unobtrusive Validation 而不使用 NuGet

> ID：15974230
> 
> 赞同：28
> 
> 时间：2013-04-12T14:38:55.297
> 
> 标签：nuget, unobtrusive-validation

我想下载最新版本的 Microsoft jQuery Unobtrusive Validation，但是我不喜欢使用 NuGet，因为我无法告诉它在我的项目结构中安装包的位置。

Microsoft 是否将这些文件托管在我可以直接访问它们的地方？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-03-06T15:41:40.943

ASP.NET MVC 5.2 的文件（还没有？）在我下面提到的页面上，但链接是有效的：

*   [http://ajax.aspnetcdn.com/ajax/mvc/5.2/jquery.validate.unobtrusive.js](http://ajax.aspnetcdn.com/ajax/mvc/5.2/jquery.validate.unobtrusive.js)
*   [http://ajax.aspnetcdn.com/ajax/mvc/5.2/jquery.validate.unobtrusive.min.js](http://ajax.aspnetcdn.com/ajax/mvc/5.2/jquery.validate.unobtrusive.min.js)

[复制自[马克西姆](https://stackoverflow.com/a/26181069/173497)对这个问题的回答。]

我找到了一个页面 - [Microsoft Ajax Content Delivery Network - ASP.NET Ajax Library](http://www.asp.net/ajaxlibrary/cdn.ashx) - 列出了您可以下载的多个版本的文件。

以下是我通过在该页面中搜索“不引人注目”找到的：

> ASP.NET MVC 5.1
> 
> [http://ajax.aspnetcdn.com/ajax/mvc/5.1/jquery.validate.unobtrusive.js](http://ajax.aspnetcdn.com/ajax/mvc/5.1/jquery.validate.unobtrusive.js) [http://ajax.aspnetcdn.com/ajax/mvc/5.1/jquery.validate.unobtrusive.min.js](http://ajax.aspnetcdn.com/ajax/mvc/5.1/jquery.validate.unobtrusive.min.js)
> 
> ASP.NET MVC 5.0
> 
> [http://ajax.aspnetcdn.com/ajax/mvc/5.0/jquery.validate.unobtrusive.js](http://ajax.aspnetcdn.com/ajax/mvc/5.0/jquery.validate.unobtrusive.js) [http://ajax.aspnetcdn.com/ajax/mvc/5.0/jquery.validate.unobtrusive.min.js](http://ajax.aspnetcdn.com/ajax/mvc/5.0/jquery.validate.unobtrusive.min.js)
> 
> ASP.NET MVC 4.0
> 
> [http://ajax.aspnetcdn.com/ajax/mvc/4.0/jquery.validate.unobtrusive.js](http://ajax.aspnetcdn.com/ajax/mvc/4.0/jquery.validate.unobtrusive.js) [http://ajax.aspnetcdn.com/ajax/mvc/4.0/jquery.validate.unobtrusive.min.js](http://ajax.aspnetcdn.com/ajax/mvc/4.0/jquery.validate.unobtrusive.min.js)
> 
> ASP.NET MVC 3.0
> 
> [http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.unobtrusive-ajax.js](http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.unobtrusive-ajax.js) [http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.unobtrusive-ajax.min.js](http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.unobtrusive-ajax.min.js) [http: //ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.validate.unobtrusive.js](http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.validate.unobtrusive.js) [http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.validate.unobtrusive.min.js](http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.validate.unobtrusive.min.js)
> 
> ...

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-10-03T14:39:42.143

以下是链接：

> **用于 ASP.NET MVC 5.2.3 的 jQuery Unobtrusive**
> 
> [http://ajax.aspnetcdn.com/ajax/mvc/5.2.3/jquery.validate.unobtrusive.js](http://ajax.aspnetcdn.com/ajax/mvc/5.2.3/jquery.validate.unobtrusive.js)
> 
> [http://ajax.aspnetcdn.com/ajax/mvc/5.2.3/jquery.validate.unobtrusive.min.js](http://ajax.aspnetcdn.com/ajax/mvc/5.2.3/jquery.validate.unobtrusive.min.js)
> 
> **用于 ASP.NET MVC 5.2.2 的 jQuery Unobtrusive**
> 
> [http://ajax.aspnetcdn.com/ajax/mvc/5.2.2/jquery.validate.unobtrusive.js](http://ajax.aspnetcdn.com/ajax/mvc/5.2.2/jquery.validate.unobtrusive.js)
> 
> [http://ajax.aspnetcdn.com/ajax/mvc/5.2.2/jquery.validate.unobtrusive.min.js](http://ajax.aspnetcdn.com/ajax/mvc/5.2.2/jquery.validate.unobtrusive.min.js)
> 
> **用于 ASP.NET MVC 5.2 的 jQuery Unobtrusive**
> 
> [http://ajax.aspnetcdn.com/ajax/mvc/5.2/jquery.validate.unobtrusive.js](http://ajax.aspnetcdn.com/ajax/mvc/5.2/jquery.validate.unobtrusive.js)
> 
> [http://ajax.aspnetcdn.com/ajax/mvc/5.2/jquery.validate.unobtrusive.min.js](http://ajax.aspnetcdn.com/ajax/mvc/5.2/jquery.validate.unobtrusive.min.js)

通过使用这些文件，您还需要包含 jquery.validate(.min).js。可以找到最新的文件：

> **jQuery 验证**
> 
> [http://www.asp.net/ajax/cdn#jQuery_Validation_Releases_on_the_CDN_3](http://www.asp.net/ajax/cdn#jQuery_Validation_Releases_on_the_CDN_3) 或 [http://jqueryvalidation.org/](http://jqueryvalidation.org/)

您可以浏览**Microsoft Ajax CDN**以获取所有需要的库：[http ://www.asp.net/ajax/cdn](http://www.asp.net/ajax/cdn)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:42:45.800

[它在code.google.com](https://code.google.com/p/tfsstatus/source/browse/packages/Microsoft.jQuery.Unobtrusive.Validation.2.0.20505.0/?r=a95786c3fc70eba41949a29ee17107c3d1c766c5)上由 google 提供/托管

# php - 如何通过 PHP 在 jQuery 计算器中更新价格

> ID：15974232
> 
> 赞同：1
> 
> 时间：2013-04-12T14:38:59.043
> 
> 标签：php, jquery, html, forms

我正在创建一个“预算计算器”来管理节日的资金。

谁能告诉我如何在 JQuery 中包含 PHP 脚本？

到目前为止，我有一个表格来计算你每天在不同类别中的习惯可以花多少钱，然后在周末乘以 3。

我希望能够随时更新这些价格，以确保价格尽可能保持最新。所以我创建了一个 mysql 数据库和查询来计算中等价格，然后通过 php 脚本将其返回到页面。

这是一个 JSfiddle，可以让您了解它目前的样子 - 虽然它不在网站上运行，但您可以看到设置。 [JSfiddle](http://jsfiddle.net/HavBZ/) 这是表单实际外观的屏幕截图。如您所见，每个输入标题旁边的价格是通过 php 包含显示的。右侧的按钮通向“更新”表单，允许您输入新价格。

![截屏](https://i.stack.imgur.com/ZsEF7.jpg)

这是用于显示计算介质的查询示例：PHP：

```
<?php

include 'connect.php';

$query = "SELECT x.price FROM price_pints x, price_pints y GROUP BY x.price HAVING SUM(     SIGN( 1 - SIGN( y.price - x.price ) ) ) / COUNT( * ) > .5 LIMIT 1"; 

$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_array($result)){
echo "£".$row['price'];
}
?> 
```

我想要做的是让这个相同的 php 包含在“data-unit-price”标签中工作。有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:45:18.773

免责声明：这是我想出的最简单的方法，我试图避免更高级的东西，比如动态生成的 javascript 或 ajax

当您构建页面（PHP，服务器端）时，在三个变量中加载 3 个价格，然后像这样有 3 个隐藏输入

```
<input type="hidden" id="pint_price" value="<?php echo $pint_price; ?>"> 
```

您的脚本应该查看隐藏输入的值来初始化计算器。

注意：如果页面已经加载时价格发生变化，用户不会看到更新。您可能需要考虑在某处放置免责声明。

最好的解决方案是每次用户插入一个新值（如果带宽不是问题，无论是对于您的服务器还是对于用户）或每 X 分钟都有一个 ajax 请求。

请参阅[jQuery 获取文档](http://api.jquery.com/jQuery.get/)以获取参考和示例。

在不相关的说明中，您真的不应该使用 mysql_* 与（MySQL）数据库进行交互。稍加努力，学会使用 PDO。我真的推荐它。

# c# - 在“新”之后保留对象引用

> ID：15974233
> 
> 赞同：0
> 
> 时间：2013-04-12T14:38:59.877
> 
> 标签：c#, reference

从本质上讲，我试图廉价地引用一个基础对象，以便以后可以完全构建它，并且可以很容易地被不直接参与该对象构建过程的任何东西引用。但是，当我有一个在构建过程中有意义的对象时（它实际上是一个工厂，它创建了其他使用 a 的对象，这些对象依赖于“a”，并且在 switch 案例中构建这些对象是有意义的。）

我考虑过使用指针，但我认为它们不合适。

```
using System;

namespace ConsoleApplication5
{
    class ClassA
    {
        public virtual void hello()
        {
            Console.WriteLine("Hello World!");
        }
    }

    class ClassB : ClassA
    {
        public override void hello()
        {
            Console.WriteLine("Goodbye World!");
        } 
    }

    class ClassC
    {
        ClassA m_object;

        public ClassC(ClassA a)
        {
            m_object = a;
        }
        public void run()
        {
            m_object.hello();
            Console.WriteLine(m_object.GetType().ToString());
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            ClassA a;

            ClassC c = new ClassC(a);

            //switch(something)
            //{
                //case "somethingElse":
                    a = new ClassB();
                    c.run();
                    //...
                //break;
            //...
            //}
            //CompleteAGenericCollationTaskWith(a);
        }
    }
} 
```

基本上：

我正在尝试：在创建对象之前将对象的共享引用传递给对象，以便我可以（最好）从第二个对象内部对其进行只读访问。

我怀疑它与`a = new ClassB();`覆盖引用有关，但我只有大约 60% 的把握是这种情况，并且不知道如何在不使用指针的情况下保留它。

问题：

我该如何进行这项工作？我需要改变我的结构吗（可能）？我可以在保持`ClassA`和`ClassB`最小更改的`ClassC`同时做到这一点`Program`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:44:08.690

您需要阅读 MSDN 中的参考资料页面，它非常详细地解释了如何执行此操作：http: [//msdn.microsoft.com/en-us/library/14akc2c7.aspx](http://msdn.microsoft.com/en-us/library/14akc2c7.aspx)

话虽如此，虽然 'ref' 关键字可以在不修改太多代码的情况下解决这个特定问题，但引用尚未实例化的对象的编码风格很糟糕。您可能应该重构代码以正确尊重实例化顺序，例如通过将 ClassB 的实例传递给 c 的“运行”方法。

# cloud-foundry - 在 VCAP 上启用 SMTP 端口

> ID：15974235
> 
> 赞同：0
> 
> 时间：2013-04-12T14:39:11.080
> 
> 标签：cloud-foundry

我希望能够将电子邮件从部署在 VCAP 上的应用程序发送到支持 SMTP 的电子邮件提供商。有没有办法配置 VCAP 来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:44:37.890

Cloud Foundry 的出站通信没有限制，您应该能够从您的应用程序连接到您喜欢的任何邮件服务。

# ruby-on-rails-3 - --skip-stylesheets 和 --no-stylesheets 有什么区别

> ID：15974242
> 
> 赞同：6
> 
> 时间：2013-04-12T14:39:50.927
> 
> 标签：ruby-on-rails-3

我想生成没有样式表的脚手架，我发现了这两个标志：`--skip-stylesheets`, `--no-stylesheets`. 他们之间有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T14:54:00.153

如果您运行`rails g scaffold --help`，它将显示该生成器的帮助信息以及选项列表。

一些选项具有默认值。例如，如果您查看

```
-y, [--stylesheets]                           # Generate Stylesheets
                                              # Default: true 
```

您会看到它默认为true。如果您不想生成样式表，可以在该选项前加上前缀`--no`以禁用该特定选项。

该`skip-stylesheets`选项在 [Runtime options] 部分中定义如下：

```
-s, [--skip]     # Skip files that already exist 
```

**所以回答你的问题：**

`--no-stylesheets`根本不生成样式表

`--skip-stylesheets`生成样式表但跳过已经存在的样式表。

# ffmpeg - 使用 ffmpeg 调整到特定的宽度和高度

> ID：15974243
> 
> 赞同：3
> 
> 时间：2013-04-12T14:39:51.570
> 
> 标签：ffmpeg

我需要自动为视频生成缩略图。我无法预测视频的格式，但我需要缩略图始终为 220x120 像素。使用`-s 220x120`会产生奇怪的拉伸，就像`-vf "scale=220:120"`. 我希望拉伸是均匀的，如果视频太高，要么切掉顶部和底部，要么添加黑色边框。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T05:36:55.547

这是使用图片的示例，可以将相同的过滤器应用于视频：

```
ow=220
oh=120
ffmpeg -i foo.png \
  -vf "scale=max($ow\,a*$oh):max($oh\,$ow/a),crop=$ow:$oh" bar.png 
```

无论纵横比如何，这将：

*   缩小直到宽度或高度适合“盒子”
*   裁剪另一个，直到它也适合

内部的逗号需要转义，因此它们不会被解释为过滤器分隔符。

[§ 庄稼](http://ffmpeg.org/ffmpeg-all.html#crop)

[§ 规模](http://ffmpeg.org/ffmpeg-all.html#scale)

# c# - 一个例外两个消息

> ID：15974245
> 
> 赞同：0
> 
> 时间：2013-04-12T14:40:03.370
> 
> 标签：c#, mysql, ado.net

当我在这段代码中遇到异常时，我不知道为什么异常消息会出现两次。我会尝试更好地解释它：一张图片胜过一千个字：

![在此处输入图像描述](https://i.stack.imgur.com/NkQxU.png)

谁能帮我？

提前感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:57:54.107

在图像中，您可以看到异常消息之间的换行符。在`OdbcConnection`类中，该`CreateException()`方法处理一个错误，并将它们与一个（来自 .NET 4.0 System.Data 的代码）`OdbcErrorCollection`粘合在一起：`Environment.NewLine`

```
internal static OdbcException CreateException(OdbcErrorCollection errors, ODBC32.RetCode retcode)
{
  StringBuilder stringBuilder = new StringBuilder();
  foreach (OdbcError odbcError in errors)
  {
    if (stringBuilder.Length > 0)
      stringBuilder.Append(Environment.NewLine);
    stringBuilder.Append(Res.GetString("Odbc_ExceptionMessage", (object) ODBC32.RetcodeToString(retcode), (object) odbcError.SQLState, (object) odbcError.Message));
  }
  return new OdbcException(((object) stringBuilder).ToString(), errors);
} 
```

显然，底层库两次遇到相同的错误，然后向您抛出（一个）异常。

*我不知道您是否可以采取任何措施来防止这种情况发生，您的*代码似乎没有任何问题。

# c++-cli - 使用委托进行排序

> ID：15974252
> 
> 赞同：1
> 
> 时间：2013-04-12T14:40:19.507
> 
> 标签：c++-cli

我试图在 C++/CLI 中创建一个排序委托，但是，当我尝试编译时，我收到了这个错误：

```
>app.cpp(256): error C3374: can't take address of 'Program::AnonymousMethod1' unless creating delegate instance
>app.cpp(256): error C2664: 'void System::Collections::Generic::List<T>::Sort(System::Comparison<T> ^)' : cannot convert parameter 1 from 'System::Object ^(__clrcall *)(Program::teste1,Program::teste1)' to 'System::Comparison<T> ^'
>          with
>          [
>              T=Program::teste1 ^
>          ]
>          No user-defined-conversion operator available, or
>          There is no context in which this conversion is possible
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

这是错误的代码示例：

```
using namespace System;
using namespace System::Collections::Generic;

private ref class Program
{
private:
    enum class tokens
    {
        teste,
        lala,
        blabla,
    };

    ref struct teste1
    {
        int linha;
        tokens tk;
    };

private:
    static Object ^AnonymousMethod1(teste1 p1, teste1 p2)
    {
        return p1.tk.CompareTo(p2.tk);
    }

public:
    Program()
    {
        bool jump = false;
        List<teste1^>^ lstTest = gcnew List<teste1^>();
        Random ^rnd = gcnew Random();

        for (int i = 0; i < 20; i++)
        {
            teste1 ^tst = gcnew teste1();
            switch (rnd->Next(1,4))
            {
            case 1:
                tst->tk = tokens::teste;
                break;
            case 2:
                tst->tk = tokens::lala;
                break;
            case 3:
                tst->tk = tokens::blabla;
                break;
            }
            lstTest->Add(tst);
        }

        for each (teste1^ content in lstTest)
        {
            Console::WriteLine(content->tk.ToString());
        }

        lstTest->Sort(AnonymousMethod1);

        Console::WriteLine("==============================================================");

        for each (teste1^ content in lstTest)
        {
            Console::WriteLine(content->tk.ToString());
        }
    }
};

int main(array<String^> ^args)
{
    Program^ prg = gcnew Program();
    return 0;
} 
```

我只是想先用令牌'lala'对列表进行排序，我怎么能做到这一点，以及，我怎么能解决这个？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:09:22.623

您的列表是类型`List<test1^>`（注意`^`帽子）。所以`Comparison<T>`你想要的代表是`Comparison<teste1^>`. 因此，您需要按如下方式更改您的 AnonymousMethod1：

```
static int AnonymousMethod1(teste1 ^ p1, teste1 ^ p2)
{
    return p1->tk.CompareTo(p2->tk);
} 
```

在 C++/CLI 中，您需要显式创建您的委托：

```
 Comparison<teste1 ^> ^ comparisonDelegate = gcnew Comparison<teste1 ^>(&AnonymousMethod1);
    lstTest->Sort(comparisonDelegate); 
```

# ruby - Selenium Webdriver Ruby Send_keys 控制字符

> ID：15974253
> 
> 赞同：1
> 
> 时间：2013-04-12T14:40:19.877
> 
> 标签：ruby, selenium

我正在尝试通过 capybara / selenium 在输入字段中键入 ® 。

```
firefox browser
capybara (2.1.0)
selenium-webdriver (2.32.1) 
```

我相信我应该能够 send_keys [:alt, 'r']？

最新版的 selenium-webdriver + ruby​​ 坏了吗？因为向 sendkeys 发送任何复杂的东西都会给我这个：

```
>> field.native.send_keys 'b','c',[:control, 'a'], 'a'                                                                                                     

>> Selenium::WebDriver::Error::UnknownError: JSON.parse: unterminated string literal 
```

一点上下文：我曾经通过 JS 来做到这一点，但由于某种原因，每当我通过 execute_script 运行大量 JS 时，它都会在大约 50% 的时间给出一个 script_unresponsive 警报框。我一直在调整浏览器的超时时间，这是一个硬锁（永远）。我们有一个非常复杂的应用程序，我花了很多时间进行调查。所以我试图在没有 javascript 的情况下做到这一点 - 因为由于某种原因，我的杯子开始有 50% 的时间通过/失败。

任何想法表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:21:33.520

如果您需要做的就是使用发送键和 Ruby 按 ALT+R，这就是您需要做的：

```
require 'win32ole'
skey = WIN32OLE.new('Wscript.Shell')

skey.sendKeys('%{r}') 
```

用 ALT+V 和 selenium 测试了上述内容，它按预期工作。

如果您还需要进一步的帮助，请告诉我。

祝你好运！

PS。(% 代表 ALT), (^ 代表 CTRL)

# c# - 鼠标离开窗体时关闭应用程序

> ID：15974258
> 
> 赞同：0
> 
> 时间：2013-04-12T14:40:36.377
> 
> 标签：c#, winforms, mouseleave

我尝试使用鼠标离开事件处理程序，但我无法使用它。

```
private void Form1_MouseLeave(object sender, EventArgs e)
{
    this.Close();            
} 
```

我不想褪色。当鼠标光标离开表单屏幕时，它应该立即关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:44:59.877

关闭整个应用程序使用

```
Environment.Exit(0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T14:50:54.937

如果鼠标进入子控件，MouseLeave 事件将触发，这可能不是您想要的。

尝试使用计时器：

```
private System.Windows.Forms.Timer timer = new System.Windows.Forms.Timer();
private bool mouseEntered = false;

public Form1() {
  InitializeComponent();

  timer.Tick += timer_Tick;
  timer.Start();
}

protected override void OnMouseEnter(EventArgs e) {
  mouseEntered = true;
  base.OnMouseEnter(e);
}

void timer_Tick(object sender, EventArgs e) {
  if (mouseEntered && !this.Bounds.Contains(Cursor.Position)) {
    this.Close();
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T14:45:00.153

如果你有几种我喜欢的形式`Application.Exit()`。

`Form.Close()`仅适用于单个表单应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T14:46:40.957

1.  如果您正在使用的该应用程序中只有一个表单，`Application.Exit`则将关闭该应用程序本身。

2.  如果您要从主表单导航到另一个表单，那么在新表单中，使用`Form2.Close()`，这将带您回到您正在使用的主应用程序。

3.  如果你想关闭它们，那么先给`Form2.Close()`然后给`Application.Exit()`。那就足够了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T15:27:29.563

我做了一个小测试程序来重现你的问题。

```
namespace OddFormTest
{
    using System;
    using System.Windows.Forms;

    public class OddForm : Form
    {
        public OddForm()
        {
            this.Leave += Leaver;
        }

        [STAThread]
        internal static void Main()
        {
            Application.Run(new OddForm);
        }

        private void Leave(object sender, EventArgs e)
        {
            this.Close()
        }
    }
} 
```

正如您在问题中推断的那样。离开应用程序后，该`Leave`事件不会触发。

# java - JBoss 7.1.1 中的 CORBA 配置，无法获取 NameService

> ID：15974263
> 
> 赞同：0
> 
> 时间：2013-04-12T14:41:03.730
> 
> 标签：java, jakarta-ee, jboss, corba

我正在尝试在 JBoss 7.1.1 Final 上设置启用 CORBA 的应用程序。似乎我错过了一些东西，因为我尝试的一切都会导致另一个异常。所以，我尝试了什么：

```
standalone -c standalone-ha.xml -Djboss.node.name=nodeA or
standalone -c standalone-full-ha.xml -Djboss.node.name=nodeA 
```

然后是这里的第二行

```
GlobalData.orb = org.omg.CORBA.ORB.init(args, p);
orb.resolve_initial_references("NameService"); 
```

抛出异常：

```
(MSC service thread 1-9) IDL:omg.org/CORBA/ORB/InvalidName:1.0: org.omg.CORBA.ORBPackage.InvalidName: IDL:omg.org/CORBA/ORB/InvalidName:1.0
    at org.jacorb.orb.ORB.resolve_initial_references(ORB.java:1343) [jacorb-2.3.1.jbossorg-1.jar:]
    at MyApp.startServer(MyApp.java:145) [server.jar:] 
```

我的 /conf 文件夹包含一个带有条目的 jacorb.properties

```
ORBInitRef.NameService=corbaloc::localhost:3828/JBoss/Naming/root 
```

谁能给黑暗带来一些光明？谢谢，彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T12:42:18.810

我找到了解决该问题的方法，Jacorb 需要强制配置（jacorb.propeity），您可以从 JBoss 4.2.2 获取该文件

然后

您需要将该文件包含在您的类路径中，为此我们创建自定义模块

例如转到 jboss 模块目录

例如创建子目录**custom/myconfig/main**

在那里添加您的属性文件

创建 module.xml 文件 .. 您将为 instnace custom.myconfig 选择模块名称...

```
<module xmlns="urn:jboss:module:1.1" name="custom.myconfig">
    <properties>
        <property name="jboss.api" value="private"/>
    </properties>

    <resources>
        <resource-root path="."/>
        <!-- Insert resources here -->
    </resources>

    <dependencies>     
    </dependencies>
</module>

In your jboss-deployment-structure.xml include this module to your app

<jboss-deployment-structure>
    <ear-subdeployments-isolated>false</ear-subdeployments-isolated>
    <deployment>
        <dependencies>
            <module name="custom.myconfig/>
        </dependencies>
        <resources>
        </resources>
    </deployment>

    <sub-deployment name="My_WAR.war">
        <dependencies>
            <module name="custom.myconfig" />
        </dependencies>
    </sub-deployment> 
```

希望对我有帮助

# css - 在 CSS 侧面板中切换对象

> ID：15974264
> 
> 赞同：0
> 
> 时间：2013-04-12T14:41:13.870
> 
> 标签：css

我想在我的论坛上的每个成员的个人资料页面中切换两个框。

截屏：

[http://s22.postimg.org/69aqe1i29/panel.jpg](http://s22.postimg.org/69aqe1i29/panel.jpg)

我想要“我的徽章”部分下方的“关于”部分

这仅在 CSS 中可能吗？

直接链接到相关页面：http: [//idenitties.com/vanilla/profile/3/test1](http://idenitties.com/vanilla/profile/3/test1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:48:40.193

最好的方法是`<div>`在 HTML 中交换，但您可以使用一点绝对定位来移动 div。

例如，这将起作用：

```
.about{
position: absolute;
width: 230px;
bottom: -30px;
} 
```

但我想说最好的选择是只更改 HTML 中的顺序，简单的复制粘贴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:05:03.423

如果盒子高度是恒定的，您可以使用相对定位来切换它们。我的意思是您可以将顶盒向下移动以获得底盒的高度，否则。

```
.Box.About {
   position: relative;
   top: 114px;
}

.Box.PeregrineBadgesBox {
   position: relative;
   top: -178px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:41:57.497

重新排序 HTML 是您的最佳选择。如果这是生成的内容并且您无法以任何方式对其进行修改，则可以使用 Flexbox 对它们进行重新排序。

[http://tinker.io/9d3f8/1](http://tinker.io/9d3f8/1)

```
.container {
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
}

.about {
  -webkit-box-ordinal-group: 2;
  -moz-box-ordinal-group: 2;
  -webkit-flex-order: 1;
  -ms-flex-order: 1;
  -webkit-order: 1;
  order: 1;
}

<div class="container">
    <div class="about">
        About (first in source)
    </div>

    <div class="badges">
        Badges (second in source)
    </div>
</div> 
```

好处是您不需要知道任何一个元素的大小。缺点是浏览器支持有限：IE10、Chrome、Opera、Firefox、Safari

[http://caniuse.com/#feat=flexbox](http://caniuse.com/#feat=flexbox)

# asp.net - 调用 web 服务时出错：“类型 'System.ComponentModel.INotifyPropertyChanging' 在未引用的程序集中定义”

> ID：15974266
> 
> 赞同：1
> 
> 时间：2013-04-12T14:41:16.260
> 
> 标签：asp.net

我可以通过在服务器上的 Web 浏览器中访问它来调用我的 Web 服务，但是当我从我的测试客户端通过 Soap 客户端调用它时，我得到以下异常：

“'System.ComponentModel.INotifyPropertyChanging' 类型在未引用的程序集中定义。您必须添加对程序集 'System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' 的引用。”

..其余的堆栈跟踪如下。

```
 at System.Xml.Serialization.Compiler.Compile(Assembly parent, String ns, XmlSerializerCompilerParameters xmlParameters, Evidence evidence)

   at System.Xml.Serialization.TempAssembly.GenerateAssembly(XmlMapping[] xmlMappings, Type[] types, String defaultNamespace, Evidence evidence, XmlSerializerCompilerParameters parameters, Assembly assembly, Hashtable assemblies)

   at System.Xml.Serialization.TempAssembly..ctor(XmlMapping[] xmlMappings, Type[] types, String defaultNamespace, String location, Evidence evidence)

   at System.Xml.Serialization.XmlSerializer.FromMappings(XmlMapping[] mappings, Type type)

   at System.Web.Services.Protocols.SoapServerType..ctor(Type type, WebServiceProtocols protocolsSupported)

   at System.Web.Services.Protocols.SoapServerProtocol.Initialize()

   at System.Web.Services.Protocols.ServerProtocolFactory.Create(Type type, HttpContext context, HttpRequest request, HttpResponse response, Boolean& abortProcessing)

   --- End of inner exception stack trace --- 
```

现在我在我的 Web 服务项目中添加了这个 System.dll 作为参考，并将其设置为复制到本地。该 dll 不在服务器上的 GAC 中（但在我的开发服务器本地） - 这会是问题吗？

我的 web.config 中有以下部分：

```
<add assembly="System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
<add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
<add assembly="Microsoft.Build.Framework, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
<add assembly="System.Management, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" /> 
```

我不明白？如果 dll 在 bin 文件夹中并且该引用存在并且被添加到我的项目中，那么它在抱怨什么？

这些是我的 bin 文件夹中的 dll：

```
Devart.Data.dll
Devart.Data.Linq.dll
Devart.Data.Oracle.dll
Devart.Data.Oracle.Linq.dll
Oracle.DataAccess.dll
System.ComponentModel.Composition.dll
System.ComponentModel.DataAnnotations.dll
System.Configuration.dll
System.Data.dll
System.Data.Entity.dll
System.dll
System.Runtime.Serialization.dll
System.Web.dll
System.Web.Services.dll
System.Xml.dll 
```

我真的很难过，有谁知道我为什么会收到这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:01:38.080

在你的项目中，看看你的引用，看看system.dll引用的路径，这个路径说明你引用的是GAC版本还是bin版本？如果路径指向 GAC 版本，您将需要删除引用并重新添加对 bin 版本的引用。

# java - 无法使用 SID 连接到 Oracle

> ID：15974272
> 
> 赞同：1
> 
> 时间：2013-04-12T14:41:31.967
> 
> 标签：java, oracle, spring, database-connection

我有一个 web 应用程序，我用 spring 与 oracle 连接如果我在 xml 文件中提供 SID，我的应用程序将无法工作

xml 文件条目是

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
    destroy-method="close">
    <property name="driverClass"><value>oracle.jdbc.driver.OracleDriver</value> 
    </property>
    <property name="jdbcUrl">
        <value>jdbc:oracle:thin:@x.x.x.x:1521:XXX</value>
    </property>
    <property name="user">
        <value>xx</value>
    </property>
    <property name="password">
        <value>xx</value>
    </property></bean> 
```

即使我无法使用带有 SID 的 Oracle SQL Developer 进行连接。但如果我给出服务名称，它工作正常。

你能帮我吗？

# matlab - 如何使用 Matlab 脚本重命名文件夹

> ID：15974283
> 
> 赞同：1
> 
> 时间：2013-04-12T14:42:13.110
> 
> 标签：matlab

我想使用 Matlab 脚本重命名路径中的文件夹：

```
c:\My Path\New Folder\  -->  c:\MyPath\NewFolder\  %remove the spaces in the path name 
```

终于得到了我想要的工作：

```
system('7z e "C:\Public\test\dry?testing41013\Log?#1\max_logs_can_messages.tgz" -o"C:\Public\test\dry testing41013\Log #1\"') 
```

必须使用“？” 对于第一条路径中的空格，而不是第二条路径中的空格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:46:23.213

您可以使用[MOVEFILE](http://www.mathworks.com/help/matlab/ref/movefile.html)功能。它也适用于文件夹。

```
movefile('c:\My Path\New Folder\', 'c:\MyPath\NewFolder') 
```

# ruby - 种子是否会在不同的 Ruby 中生成相同的随机序列？

> ID：15974284
> 
> 赞同：1
> 
> 时间：2013-04-12T14:42:17.157
> 
> 标签：ruby, random, cross-platform

假设我打电话`srand(1234)`，然后`rand()`反复打电话。无论我的环境如何，我都能保证获得相同的随机数序列吗？

例如，

*   Ruby 1.8.7 与 1.9.3 与 2.0
*   MRI 与 JRuby
*   Windows vs Mac vs Linux

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T15:40:09.547

根据我的经验，答案是“是”

在测试新宝石时，我会做同样的事情。gem 尚未准备好用于实际使用，但严重依赖随机数，并且大多数测试都涉及预先运行 Ruby 的 srand() ，因此我得到了可预测的断言数。总而言之，我可能会在每次运行测试套件时测试由 rand() 生成的几百个小整数。

到目前为止，我已经测试过：

在 Windows 上：MRI 1.9.3

在 Mac 上：MRI 1.8.7、MRI 1.9.3 和 MRI 2.0.0

在 Travis（请参阅构建[https://travis-ci.org/neilslater/games_dice](https://travis-ci.org/neilslater/games_dice)）上，我测试了所有这些：

*   “1.8.7”
*   “1.9.3”
*   “2.0.0”
*   jruby-18mode # JRuby 1.8 模式
*   jruby-19mode # JRuby 1.9 模式
*   rbx-18模式
*   rbx-19模式

最后两个我什至不知道它们是什么:-)

测试套件从未因 Ruby`rand`方法中的意外数字而失败。

Ruby 中的底层机制称为 Mersenne Twister [http://en.wikipedia.org/wiki/Mersenne_twister](http://en.wikipedia.org/wiki/Mersenne_twister)，这将从相同的种子生成相同的值，即使是在不同的语言中，它已经实现。据我所知，这个算法是 Ruby `rand()`(and `srand()`) 在所有标准实现中使用的算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T14:47:09.863

好吧，这就是我在我的 irb 中得到的——它与你在你的 irb 中得到的相符吗？如果是这样，那么我认为您可以放心地说“是”。

顺便说一句，这就是播种的全部意义所在，所以我希望答案肯定是“是”，如果不是，我会感到惊讶。

```
ruby 1.9.3p327 (2012-11-10) [x86_64-darwin12.2.0]

irb(main):001:0> srand(1234)
=> 312936473923896776645464224839555650313
irb(main):002:0> rand
=> 0.1915194503788923
irb(main):003:0> rand
=> 0.6221087710398319
irb(main):004:0> rand
=> 0.4377277390071145
irb(main):006:0> rand
=> 0.7853585837137692
irb(main):007:0> rand
=> 0.7799758081188035 
```

# java - 如何使用 mockito 测试 ehcache？

> ID：15974285
> 
> 赞同：5
> 
> 时间：2013-04-12T14:42:18.207
> 
> 标签：java, mockito, ehcache, springmockito

我的辅助方法使用 ehcache，以减少对 Db 的查询。现在想实现JUnit+Mockito测试，确保ehcache正常工作。有这样的测试变体：

```
@Autowired
private DBService service;
@Autowired
private DiscountHelper discountHelper;

@Autowired
private CacheManager cacheManager;

@Before
public void setUp() throws Exception {
    assertNotNull(cacheManager);
}

@Test
public void testGetDiscountWithCache() throws RuntimeException,
        InterruptedException {

    String id1 = "id1";
    String id2 = "id2";
    String id3 = "id3";

    List<String> discountsId = new ArrayList<String>();
    discountsId.add(id1);
    discountsId.add(id2);
    discountsId.add(id3);

    List<Map<String, Object>> attrList = new ArrayList<Map<String, Object>>();
    attrList.add(new Discount().getAttributes());
    attrList.add(new Discount().getAttributes());
    attrList.add(new Discount().getAttributes());

    Cache cache = cacheManager.getCache(DiscountHelper.CACHE_NAME);

    assertNotNull(cache);
    assertEquals(0, cache.getSize());

    // First run with empty cache
    when(service.getAllItems(eq(Discount.TABLE_NAME))).thenReturn(attrList);
    List<Discount> actualResult = discountHelper
            .getAllDiscountsUsingCache();
    assertNotNull(actualResult);
    assertEquals(attrList.size(), actualResult.size());
    verify(service).getAllItems(eq(Discount.TABLE_NAME));

    cache = cacheManager.getCache(DiscountHelper.CACHE_NAME);
    // In cache should be 1 record
    assertNotNull(cache);
    assertEquals(1, cache.getSize());

} 
```

测试方法是：

```
@Cacheable(cacheName = CACHE_NAME, refreshInterval = 1000 * 900, decoratedCacheType = DecoratedCacheType.REFRESHING_SELF_POPULATING_CACHE)
public List<Discount> getAllDiscountsUsingCache() throws RuntimeException,
        InterruptedException {
    List<Map<String, Object>> result = dbService
            .getAllItems(Discount.TABLE_NAME);
    List<Discount> discountList = new ArrayList<Discount>();
    for (Map<String, Object> entry : result) {
        discountList.add(new Discount(entry));
    }
    return discountList;
} 
```

这非常有效。在测试中，我确信在调用方法后我会在缓存中得到一些东西。如您所见，我还验证了在 db 服务中调用方法 getAllItems。这对于第一次调用很有用。接下来，我在同一个测试中添加了对 discountHelper.getAllDiscountsUsingCache() 的第二次调用，如下所示：

```
when(service.getAllItems(eq(Discount.TABLE_NAME))).thenReturn(attrList);
actualResult = discountHelper
            .getAllDiscountsUsingCache();
assertNotNull(actualResult);
assertEquals(attrList.size(), actualResult.size());
verify(service, times(0)).getAllItems(eq(Discount.TABLE_NAME)); 
```

所以我只想检查在第二次调用时不会通过方法 getAllItems 通过此验证调用 DB 服务： verify(service, times(0)).getAllItems(eq(Discount.TABLE_NAME)); 并且结果将从缓存中获取。

但它不起作用，我仍然调用 DB 方法。我找到本教程[http://blog.goyello.com/2010/07/29/quick-start-with-ehcache-annotations-for-spring/](http://blog.goyello.com/2010/07/29/quick-start-with-ehcache-annotations-for-spring/)并尝试使用委托对象进行 ehcache 测试的变体，但它仍然调用 db 方法在测试。怎么了？顺便说一句，正如我在 tomcat 的日志中看到的那样，在生产环境中 ehcache 工作得很好，所以这是一个测试问题。任何建议如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T23:13:52.023

在第二次调用中，您使用 Springockito 在 Spring 上下文初始化期间创建的相同模拟对象（服务）（正如我从问题标签中假设的那样）。模拟会记住第一次调用的 getAllItems() 调用。你可以：

*   在第二次调用**之前**使用重置模拟`reset(service)`，

或者

*   **在第二次调用之后**检查）是否还有一个（不是两个）getAllItems() 调用。

# git - 通过 HTTP 推送到本地托管的 git 存储库

> ID：15974286
> 
> 赞同：6
> 
> 时间：2013-04-12T14:42:19.327
> 
> 标签：git

我希望使用该命令推送到托管在`http://localhost:8000/tehCode.git`servered上的 git 存储库。`python -m "SimpleHTTPServer"`

我收到一个错误

```
error: Cannot access URL http://localhost:8000/tehCode.git/, return code 22
fatal: git-http-push failed 
```

我可以很好地克隆这个存储库，但我不能推送到它。假设我仍想使用 Python SimpleHTTPServer ，我该怎么做？

我已经看过了

1.  [无法使用 http/https 将 Git 推送到远程存储库](https://stackoverflow.com/questions/5264949/cannot-push-git-to-remote-repository-with-http-https)
2.  [https://superuser.com/questions/473177/git-push-fatal-failed](https://superuser.com/questions/473177/git-push-fatal-failed)

但他们似乎正在使用 Apache，并且大多数解决方案都是通过编辑 Apache 的配置文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T14:50:07.277

使用 SimpleHTTPServer 时，您使用的是所谓的哑 http 协议。它之所以被称为哑巴，是因为它根本不了解 git。因此，推送到这样的服务器不起作用，因为 http 服务器不知道如何处理 git 发出的请求。

Git 有一个名为 git-http-backend 的 cgi 脚本，它允许通过使用智能 http 协议来推送 http。

我没有这方面的经验，但你可以看看你可以直接到 git-http-backend 的[pythons CGIHTTPServer 。](https://stackoverflow.com/questions/10396330/how-to-host-python-cgi-script-with-python-m-simplehttpserver-8000-or-python)

但最简单的方法是使用[apache](https://www.kernel.org/pub/software/scm/git/docs/git-http-backend.html)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T18:26:59.217

如果是本地的，为什么要使用 HTTP？可以只是`git push where/the/repo/lives`应该做。

# c++ - 如何检查类型是否已定义？

> ID：15974287
> 
> 赞同：2
> 
> 时间：2013-04-12T14:42:29.550
> 
> 标签：c++, typedef

例如

```
typedef float Real; 
```

并想检查 Real 是否已定义？对于宏，很容易

```
#define Real float
#ifndef Real
#define Real float
#endif 
```

typedef呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:09:12.830

Any`typedef`可以重复（具有相同的定义），因此您无需检查它是否已经存在。

警告：旧版本的 g++ 并没有完全遵循标准的规则。然后，对于手头的特定问题，解决方案是生成可能唯一的标识符。

# paypal - 会员资格和捐赠金额的贝宝按钮

> ID：15974289
> 
> 赞同：-1
> 
> 时间：2013-04-12T14:42:32.037
> 
> 标签：paypal

有没有办法有一个会员按钮，然后在结帐时也有一个会员可以添加捐款金额的方法？我正在使用 Joomla，但不确定是否可以这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:44:11.163

是的，有可能，在贝宝网站上生成您的捐赠按钮：[https ://www.paypal.com/us/cgi-bin/?cmd=_donate-intro-outside](https://www.paypal.com/us/cgi-bin/?cmd=_donate-intro-outside)

# etl - Informatica 错误 1417 :: 任务尚未向此服务进程注册

> ID：15974295
> 
> 赞同：0
> 
> 时间：2013-04-12T14:42:43.567
> 
> 标签：etl, informatica

在 informatica 中运行工作流时出现以下错误。

> 会话任务实例 [worklet.session]：[TM_6775 主 DTM 进程无法连接到主服务进程以更新会话状态，并显示以下消息：错误消息 [错误：为 [会话任务实例 [worklet. session]] 和 [文件夹 id = 206，工作流 id = 16042，工作流运行 id = 65095209，worklet 运行 id = 65095337，任务实例 id = 13272] 尚未向此服务进程注册。] 和错误代码 [1417]。 ]

当许多其他会话在整个工作流程中运行时，此错误随机出现。但是，如果我下次“启动任务”失败的任务，它会成功运行。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:05:15.020

Just an idea to try if you use versioning. Check that everthing is checked in correctly. If the mapping, worflow or worklet is checked out then you and informatica will run different versions wich may cause the behaivour to differ when you start it manually. Infromatica will allways use the checked in version and you will allways use the checked out version.

# workflow-foundation - 如何在 Windows 工作流基础 4.5 中获取用户的工作列表

> ID：15974297
> 
> 赞同：2
> 
> 时间：2013-04-12T14:42:45.750
> 
> 标签：workflow-foundation, .net-4.5

我们正在构建一个多租户应用程序，其中每个办公地点设置的审批工作流程都在变化。我们正在考虑用于管理状态的 Windows 工作流。我们的挑战是根据工作流中文档的状态为用户列出项目。详细说明，一个办公室可能在审批流程中具有角色 A -> B -> C。在其他情况下，可能是 A -> B + D（并行批准）-> C，在某些情况下可能是 A -> B -> E -> C。现在我们要显示角色 B、C、D 的工作清单& E as A 是创建工作项的人。我们不想跟踪数据库中文档的状态。我们希望使用工作流中的状态向这些用户显示工作列表。

谁能建议我们如何检索这些信息？

应用程序技术栈是作为客户端的 Web 应用程序 (ASP.Net MVC)，用于持久性的 Windows 工作流和工作流服务（中间件）SQL Server 和 XML。

# jquery - 防止内部div继承

> ID：15974299
> 
> 赞同：1
> 
> 时间：2013-04-12T14:42:49.460
> 
> 标签：jquery, html, css

我在另一个里面有一个 DIV，我想防止内部 div 从容器 DIV 继承光标 css。并防止内部 DIV 上的 jQuery 单击功能。

```
<div id="page_wrapper">

    <div id="content_wrapper">
        Lorum Ipsum<br />
        Lorum Ipsum<br />
        Lorum Ipsum
    </div> 

</div> 
```

CSS

```
#page_wrapper {
    z-index:1;
    background-color:#ccc;
    padding:20px;
    cursor:pointer;
}
#content_wrapper {
    z-index:20;
    width:300px;
    margin:0 auto;
    background-color:#fff;
    padding:20px;
} 
```

jQuery

```
<script>
$("#page_wrapper").click(function() {
       alert("Clicked!");
});
</script> 
```

在这里试试：http: [//jsfiddle.net/digisol/eUpXk/](http://jsfiddle.net/digisol/eUpXk/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:44:46.990

尝试这个：

```
$("#content_wrapper").css('cursor', 'default').click(function(e) {
     e.stopPropagation();
}); 
```

[**在这里演示**](http://jsfiddle.net/BKkSj/11/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T14:46:25.923

进行以下两项更改：

**jQuery：**

```
$("#page_wrapper").click(function(e) {
       if(e.target === this) alert("Clicked!");
}); 
```

**CSS**

```
#content_wrapper {
    z-index:20;
    width:300px;
    margin:0 auto;
    background-color:#fff;
    padding:20px;
    cursor: default; /* NEW */
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/BKkSj/12/)**

# mysql - sphinx 搜索索引器不会索引字段中的所有内容

> ID：15974303
> 
> 赞同：1
> 
> 时间：2013-04-12T14:43:10.047
> 
> 标签：mysql, sphinx, thinking-sphinx

`sql_query`MySQL 数据库的配置中似乎发生了一些奇怪的事情。sphinx.conf中sql_query的相关部分如下：

```
sql_query = ... GROUP_CONCAT(DISTINCT IFNULL(`vendor_items`.`description`, '0') 
SEPARATOR ' ') 
AS `vendor_item_descriptions`,... 
```

问题是，在某些情况下，该`description`字段只有部分被索引。似乎索引上升到一定程度，然后不再索引字段内容。我通过从该字段中搜索一个特定项目的一堆单词来解决这个问题。似乎该项目的描述内容的前 1/3 被编入索引。我认为这可能是字符编码问题，所以我剥离了任何不可打印的 UTF-8 字符的描述字段并重新索引。但没有运气。

有没有其他人遇到过这种问题或知道问题可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:49:18.307

我建议您查看`group_concat_max_len`MySQL 变量。

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

[http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_group_concat_max_len](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_group_concat_max_len)

在 sphinx 术语中可以使用 a`sql_query_pre`来更新会话的值

# php - PHP错误：上传目标文件夹似乎不可写

> ID：15974308
> 
> 赞同：0
> 
> 时间：2013-04-12T14:43:17.983
> 
> 标签：php, phpmyadmin

我是 php 新手，尝试将文件上传到 phpMyAdmin 时遇到错误：

```
Insert new record and upload photo

The upload destination folder does not appear to be writable.

Fatal error: Call to undefined function form_open_multipart() in /home/bg14nz/public_html/ci/application/views/vFormInsertPhoto.php on line 76 
```

这是我的代码：

```
<h1>Insert new record and upload photo</h1>

<?php echo $error;?>

<?php echo form_open_multipart('site/doupload');?> (line 76)

Photo title:

<input type="text" name="PhotoTitle" value="" size="50"  />
<br />

<input type="file" name="userfile" size="20" />
<br />

<input type="submit" value="upload" />
<br /><br />

<div><input type="submit" value="Submit"  /></div>
</form> 
```

非常感谢

注意：我正在使用 Codeigniter

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:57:49.557

这与 PHP、Codeigniter 或 MySQL 无关。您尝试写入的文件夹的基础权限不向正在运行（假设基本 LAMP 堆栈）Apache 的系统用户提供写入访问权限。

您需要更改文件夹的权限。如果您有 ssh 访问权限，则可以直接通过命令行执行此操作（查找 chmod 和 chown），如果您使用 cPanel 或其他类似的控制面板前端通过文件管理器 Web 应用程序管理您的服务器，那么它可能为您提供了一些更改权限的方法，或者如果您使用的是 FTP 程序（例如 Filezilla），它可能会为您提供一些更改文件夹权限的方法。您想为每个人提供写权限，或将所有权更改给运行 Apache 的用户。

如果您在共享服务器上运行，请注意，执行上述任何一项操作都可能使您向服务器上的其他人敞开大门，将他们想要的任何内容放入您的文件夹中。你不应该相信你在那个文件夹中找到的任何东西，如果它可以通过网络访问，那么你会定期查找上传的 PHP 文件，这些文件会发送垃圾邮件或执行其他恶意行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-17T12:45:28.987

尝试这个：

如果您使用的是 .htaccess，请检查以下 .htaccess 代码

```
RewriteEngine on
Rewritebase /
RewriteCond $1 !^(index\.php|uploads|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

“上传”是您上传文件等的文件夹。

[https://stackoverflow.com/a/372​​75618/6294040](https://stackoverflow.com/a/37275618/6294040)

# xml - 如何在运行时指定 StreamingMarkupBuilder 标签名称？

> ID：15974309
> 
> 赞同：0
> 
> 时间：2013-04-12T14:43:19.267
> 
> 标签：xml, groovy

我正在尝试使用 StreamingMarkupBuilder 构建 XML 文档。直到运行时我才知道元素的标签名称是什么，所以我试图找到一种在 StreamingMarkupBuilder.bind() 中指定它的方法。我已经看到了如何指定元素属性和值，而不是标签名称。有任何想法吗？

```
def xmlBuilder = new StreamingMarkupBuilder()

def xmlString = xmlBuilder.bind {
    root {
        for (MyClass obj : MyClass.list()) {
            obj.getTagName(myValue)
        }
    }
}.toString()

return xmlString 
```

我想得到什么：

```
<root>
    <FoundTagName>myValue</FoundTagName>
</root> 
```

**编辑**

这就是我最终得到的结果：

```
MyClass.list().each { f ->
    "$f.tagName"(f.getValue())
} 
```

我认为值得注意的是，在双引号中我使用了属性名称而不是方法名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:00:53.280

你的意思是这样吗？

```
import groovy.xml.*

def values = [ tim:12, apples:'yum' ]

String xmlString = new StreamingMarkupBuilder().bind {
  root {
    values.each { k, v ->
      "$k"( v )
    }
  }
}

assert xmlString == '<root><tim>12</tim><apples>yum</apples></root>' 
```

显然，我正在使用地图作为我的价值观，但您应该能够以类似的方式使用您的课程（无论是什么）......

# javascript - 制作套接字服务器时的Node.js绑定

> ID：15974310
> 
> 赞同：0
> 
> 时间：2013-04-12T14:43:21.517
> 
> 标签：javascript, node.js, sockets, bind

```
this.startServer = function(socket) {
    var client = new Client();
    client.socket = socket;
    clients.push(client);   
    // Handle incoming messages from clients.
    socket.on('data', bind(this.onSocketDataReceive, this));
}

this.onSocketDataReceive = function(data) {
    this.commandManager(client, data+"");
} 
```

在这个例子中，绑定解决了这个问题的可见性，但是客户端在 onSocketDataReceive 函数中是不可见的，有什么想法吗？如果我也尝试通过绑定传递客户端，那么这将变得不可见......

# c++ - VS2012 如何通过 IntelliSense 显示标准 C++ 库的文档？

> ID：15974312
> 
> 赞同：15
> 
> 时间：2013-04-12T14:43:34.870
> 
> 标签：c++, visual-studio-2012, documentation, intellisense

几天前我开始使用 Visual Studio 2012 学习 C++。我习惯于使用 IntelliJ IDEA 编程 Java，并且在调用方法时总是会显示文档和预期的参数。有没有办法在 C++ 的 VS2012 中也这样做？

如果我理解正确，由于 IntelliSense，这应该已经显示，但是如果我例如调用向量或字符串的成员函数，它只会向我显示如下内容：

`public: std::vector<std::string, std::allocator<std::string>>::const_iterator std::vector<std::string, std::allocator<std::string>>::begin() const`

但没有任何指示返回什么，预期什么，这个函数做什么。我只是缺少文档文件吗？

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-05-29T09:38:49.067

IntelliSence 向您显示了返回的确切类型。如果您想要提示，如何处理这种类型，请尝试搜索[cppreference](https://cppreference.com)，这是一个非常有用的 STL 资源

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-13T10:41:02.353

阅读所有模板和 std 命名空间很讨厌，但返回类型是`vector<string>::const_iterator`.

我听说 Stephan Lavavey（STL 的 Microsoft 维护者）提到，如果某些东西无法编译，他希望得到更好的错误消息。也许这也将使智能感知更易于使用。

# javascript - 获取 Rafael.js Set of Text 元素的第 n 个元素的 x 坐标

> ID：15974313
> 
> 赞同：0
> 
> 时间：2013-04-12T14:43:37.977
> 
> 标签：javascript, svg

我使用以下代码制作了一组 Rafael.js 文本元素。

```
var eltext = Canvas.paper.set();
text=Canvas.paper.text(xPos, yPos, character).attr({"font-size": fontSize});
eltext.push(text); 
```

我现在想获取集合的第一个文本元素（实际上是一个字符）的 x 坐标。我试过

```
firstChar=eltext.at(0);
xPos=firstChar.x; 
```

但它没有给出可信的价值。我也试过

```
firstChar=eltext.at(0);
xPos=firstChar.getAttribute('x'); 
```

但出现语法错误。我还发现 eltext.shift() 给出了语法错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:14:08.137

我的语法错误。这行得通。

```
firstChar=eltext[0];
characterPos=firstChar.attr('x'); 
```

# eclipse - Eclipse 中有“运行配置”但没有“运行为 Scala 应用程序”

> ID：15974317
> 
> 赞同：3
> 
> 时间：2013-04-12T14:43:50.063
> 
> 标签：eclipse, scala, scala-ide

我有以下 Scala 类，我可以通过首先输入 sbt 然后在 sbt 模式下从命令行运行它。但我无法从 eclipse 运行它。我已经在 scala 的角度。

```
> run-main bcomposes.twitter.QuerySearch #IPL

package bcomposes.twitter

import twitter4j._
import collection.JavaConversions._

/**
 * Gets a Twitter instance set up and ready to use.
 */
trait TwitterInstance {
  val twitter = new TwitterFactory().getInstance
}

/**
 * Given a command line query, search for tweets and print
 * them.
 */
object QuerySearch extends TwitterInstance {

  def main(args: Array[String]) { 
    val statuses = twitter.search(new Query(args(0))).getTweets
    statuses.foreach(status => println(status.getText + "\n"))
  }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-11-07T19:08:08.493

确保您指定的添加 scala 目标文件的包名称与您在代码中提到的包名称匹配。所以，纠正这个然后检查，“运行为 Scala 应用程序”现在应该可用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:17:19.963

您的 Scala 文件必须是 Scala 项目的一部分。 **使用 Scala 项目向导创建 Scala 项目，将文件添加到其中并重试。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-23T15:42:04.047

尝试使用方法在 Scala 对象上单击右键`main`（而不是在根项目元素上）。然后出现“运行为... Scala 应用程序”菜单项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-12T23:51:01.607

仅当我们使用“APP”类扩展 Scala 对象时，“作为 Scala 应用程序运行”才会在 Eclipse Scala IDE 中显示。

例子：

```
package grreter
object Exp extends App{
  println("Hello, New World!")
} 
```

（注意：如果您评论“扩展应用程序”，则不会显示“运行为 Scala 应用程序”。）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-12-03T08:31:38.550

我解决这个问题的方法是使用maven编译打包项目，当maven构建正确时，再次出现“run as scala application”。

# mysql - OS X 上的 SOCI MySQL 问题

> ID：15974320
> 
> 赞同：4
> 
> 时间：2013-04-12T14:43:54.290
> 
> 标签：mysql, macos, cmake, soci

我的项目正在尝试合并 SOCI，以便从 C++ 轻松访问 MySQL 数据库。我的一个队友使用 MySQL 后端在 linux 中创建了一个正在运行的 SOCI 测试程序，他的 CMake 文件中只有这个链接：

```
target_link_libraries(MyExecutable ${SOCI_LIBRARY}) 
```

但是，在 Mac 下，当我尝试运行程序时，它会在会话创建行出错：

```
session sql("mysql", "service...") 
```

出现此错误：

```
Error: Failed to find shared library for backend mysql 
```

我肯定安装了 MySQL，并且我肯定构建了支持 MySQL 的 SOCI，SOCI 的品牌甚至说它找到了 MySQL 库。

使用 SOCI 和 MySQL 后端的 CMake 项目是否也应该链接到 MySQL 或 SOCI MySQL 插件？我曾尝试沿着这条路线走，但最终会遇到不同的运行时错误，例如：

```
dyld: Library not loaded: libmysqlclient.18.dylib
Referenced from: MyExecutable
Reason: image not found 
```

任何帮助将不胜感激，如果需要，我可以提供我们的测试程序，谢谢！

# ms-access - microsoft access 2013 中的 vb6 与 vb.net

> ID：15974326
> 
> 赞同：0
> 
> 时间：2013-04-12T14:44:11.833
> 
> 标签：ms-access, vba

当我按下 Alt+F11 时，我得到*** *'Microsoft Visual Basic for Applications'* ***我可以启动一个模块。这个模块似乎在 Visual Basic 6.0 中。我怎样才能改写 Visual Basic .NET？我可以从同一个窗口进行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:49:41.607

您正在查看 VBA 而不是 VB6，尽管语法差异很小。VBA 是一种用于 Microsoft 应用程序的脚本语言。正如对您问题的评论所述，您需要单独编写一个 .NET 程序集并通过 VBA 与其交互。 [Visual Basic 6.0 和 VBA 的区别](https://stackoverflow.com/questions/993300/difference-between-visual-basic-and-vba)

# android - MultipartEntity图像上传不起作用

> ID：15974329
> 
> 赞同：0
> 
> 时间：2013-04-12T14:44:16.737
> 
> 标签：android

我想使用 MultipartEntity 上传图片，我已经添加了所有外部 jar 文件。

但是当我尝试使用下面的代码时，我得到 class not found 错误，并且图像无法上传。

现在我重新启动 eclipse ，现在我收到类似的错误

**无法执行dex：多个dex文件定义了Lorg/apache/http/entity/mime/FormBodyPart；**

**转换为 Dalvik 格式失败：无法执行 dex：多个 dex 文件定义 Lorg/apache/http/entity/mime/FormBodyPart；**

下面是我的 php 文件和 java 代码。

```
<?php
$photo = $_FILES['photo']['name'];

    if(!empty($_FILES['photo']['name']))
    {
        move_uploaded_file($_FILES['photo']['tmp_name'], "User_files/".$_FILES['photo']['name']);
    }

?> 
```

.

```
 DefaultHttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(URL);

        File file = new File(Environment.getExternalStorageDirectory()+"/a.png");

        //Log.d(TAG, "UPLOAD: setting up multipart entity");

        MultipartEntity mpEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
        //Log.d(TAG, "UPLOAD: file length = " + file.length());
        //Log.d(TAG, "UPLOAD: file exist = " + file.exists());

        mpEntity.addPart("photo", new FileBody(file, "image/png"));
        //mpEntity.addPart("id", new StringBody("1"));
        httppost.setEntity(mpEntity);
        HttpResponse response;
        try {
            response = httpclient.execute(httppost);
            HttpEntity resEntity = response.getEntity();
            }
            if (resEntity != null) {
                resEntity.consumeContent();
            }
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

# sql - SQL 查询计数

> ID：15974330
> 
> 赞同：3
> 
> 时间：2013-04-12T14:44:19.460
> 
> 标签：sql, sorting, join, inner-join

嗨，我有这张桌子，

```
 Recipe = (idR, recipeTitle, prepText, cuisineType, mealType)
    Ingredient = (idI, ingrDesc)
    RecipIngr = (idR*, idI*) 
```

我正在尝试查询一个列表，`ingrDesc`其中包含有多少接收者的计数`ingrDesc`。我只想列出那些`ingrDesc`出现超过 10 次的列表。

这是我所拥有的：

```
 SELECT a.idI, a.recipeTitle 
   FROM Recipe a
   INNER JOIN recpingr b
   ON a.idr = b.idr
   WHERE a.preptext = '>10' 
```

任何帮助，因为我不知道如何继续此查询

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:46:56.660

将 GROUP BY 与 HAVING 一起使用：

```
SELECT i.idI, i.ingrDesc, COUNT(*)
FROM Ingredient i
INNER JOIN RecipIngr ri ON i.idI = ri.idI
GROUP BY i.idI, i.ingrDesc
HAVING COUNT(*) > 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:00:57.987

您需要使用 group by 子句并拥有。我在这里创建了一个快速示例，但我的示例数据没有达到 10，所以我使用了任何多次使用的成分 (> 1)。

这是示例数据：

```
 create table dbo.recipe (
        idR             int             not null,
        recipeTitle     varchar(100)    not null,
        prepText        varchar(4000)   null,
        cuisineType     varchar(100)    null,
        mealType        varchar(100)    null
    ) 
    go

    insert into dbo.recipe values (1, 'Eggs and Bacon', 'Prep Text 1', 'American', 'Breakfast')
    insert into dbo.recipe values (2, 'Turkey Sandwich', 'Prep Text 2', 'American', 'Lunch')
    insert into dbo.recipe values (3, 'Roast Beef Sandwich', 'Prep Text 3', 'American', 'Lunch')
    go

    create table dbo.ingredient (
        idI             int             not null,
        ingrDesc        varchar(200)    not null
    )
    go

    insert into dbo.ingredient values (1, 'Large Egg')
    insert into dbo.ingredient values (2, 'Bacon');
    insert into dbo.ingredient values (3, 'Butter');
    insert into dbo.ingredient values (4, 'Sliced Turkey');
    insert into dbo.ingredient values (5, 'Lettuce');
    insert into dbo.ingredient values (6, 'Tomato');
    insert into dbo.ingredient values (7, 'Onion');
    insert into dbo.ingredient values (8, 'Bread');
    insert into dbo.ingredient values (9, 'Mustard');
    insert into dbo.ingredient values (10, 'Horseradish');
    insert into dbo.ingredient values (11, 'Sliced Roast Beef');
    go

    create table dbo.recipingr(
        idR             int             not null,
        idI             int             not null
    )
    go

    insert into dbo.recipingr values (1, 1);
    insert into dbo.recipingr values (1, 2);
    insert into dbo.recipingr values (2, 4);
    insert into dbo.recipingr values (2, 5);
    insert into dbo.recipingr values (2, 6);
    insert into dbo.recipingr values (2, 7);
    insert into dbo.recipingr values (2, 8);
    insert into dbo.recipingr values (2, 9);
    insert into dbo.recipingr values (3, 11);
    insert into dbo.recipingr values (3, 10);
    insert into dbo.recipingr values (3, 8);
    insert into dbo.recipingr values (3, 6);
    insert into dbo.recipingr values (3, 5);
    go 
```

这是查询：

```
 select 
        i.ingrDesc, 
        count(*) ingrCount
    from
        dbo.recipe r
        inner join dbo.recipingr ri on ri.idR = r.idR
        inner join dbo.ingredient i on i.idI = ri.idI
    group by 
        i.ingrDesc
    having
        count(*) > 1 
```

# c# - 在 C# Visual Studio 中实例化 Form1

> ID：15974335
> 
> 赞同：0
> 
> 时间：2013-04-12T14:44:26.697
> 
> 标签：c#, winforms

当我创建一个新的 Windows 窗体应用程序时，它会生成 Program.cs 文件，其中包含以下行：

```
Application.Run(new Form1()); 
```

我的问题是如何将 Form1 实例化为正确的形式应该是这样的：

```
Form1 myForm = new Form1(); 
```

它怎么能工作，因为这`Form1 myForm`部分似乎丢失了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:46:39.573

对象实例化的左侧只是声明将保存实例的变量。在您提到的情况下，无需在变量中捕获对象 - 新创建的引用直接传递到`Application.Run`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T14:47:11.177

这就是 C# 语言的工作原理。

该`Form1 myForm`部分只是创建一个变量，您可以使用它来引用该类的实例。

该`new Form1();`部分是创建实例的位。它是`Application.Run()`函数关心的实例。

* * *

现在，通常在没有引用的情况下创建实例是没有意义的，因为您将无法使用它。但也有一些例外。在这种情况下，实例被分配给`Application.Run()`方法中的参数。（所以从技术上讲，有一个参考）

例如：

```
public void Run(Form form)
{
    //can use form parameter here 
}

//inside some other function
Run(new Form1()); 
```

这就像做：

```
Form form = new Form1(); 
```

然后，该`Run()`方法可以根据需要使用该实例。

* * *

另一个不需要保留引用的例子是一次性方法调用，例如：

```
new Form1().DoSomething();
//here we no longer have access to the instance 
```

但我倾向于远离那些东西，因为它很少合适

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:10:57.617

考虑到`Application.Run()`的声明可能看起来像这样：

```
public void Run(Form formParameter)
{
   this._form = formParameter; 
   //lots of other stuff
} 
```

所以你看， 的值`new Form1()`将被分配给`Run`'s `formParameter`。您的直觉部分正确，但具有误导性。在很多情况下，实例化/构造对象而不将对象分配给变量很有用。考虑构造一个对象并在一行中调用它的方法之一`new Object().Method()`。

# javascript - Google Maps API v3 - 地理编码

> ID：15974336
> 
> 赞同：1
> 
> 时间：2013-04-12T14:44:27.177
> 
> 标签：javascript, google-maps

我想要一张带有 2 个标记的地图。如果我使用 LatLng（请参阅 JS 代码 / *WORKS JUST FINE* /），那没问题......但是一旦我尝试使用地理编码（请参阅 JS 代码 / *YU NOT WORKING？* /）它就不起作用。我想这都是错误的：

*var adresse3=geocoder.geocode({'address': 'Winkelriedstrasse 47, 6004 Luzern'})[0].geometry.location;*

谁能帮我。提前谢谢你。

```
var myCenter=new google.maps.LatLng(47.050944,8.309441);
var geocoder;
var map;
function initialize(){  
    var mapProp = {
      center            :myCenter         
    };
    var geocoder = new google.maps.Geocoder();
    var map = new google.maps.Map(document.getElementById("googleMap"),mapProp);
    /*WORKS JUST FINE*/
    var marker1=new google.maps.Marker({
        position: new google.maps.LatLng(47.050944,8.309441)
    });
    marker1.setMap(map);
    var infowindow1 = new google.maps.InfoWindow({
        content:"marker1"
    });
    google.maps.event.addListener(marker1, 'click', function() {
        infowindow1.open(map,marker1);
    });  
    /*Y U NOT WORKING?*/
    var adresse3=geocoder.geocode({'address': 'Winkelriedstrasse 47, 6004 Luzern'})[0].geometry.location;
    var marker3=new google.maps.Marker({
        position: adresse3
    });
    marker3.setMap(map);
    var infowindow3 = new google.maps.InfoWindow({
        content:"marker3"
    });
    google.maps.event.addListener(marker3, 'click', function() {
        infowindow3.open(map,marker3);
    }); 
}
google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:56:00.900

你的问题是 geocoder.geocode 是异步的，所以你必须传递一个[回调函数](https://stackoverflow.com/questions/2070275/javascript-closures-and-callbacks)。

改编自[谷歌地图文档](https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingStatusCodes)：

```
geocoder.geocode({'address': 'Winkelriedstrasse 47, 6004 Luzern'}, function(results, status)     {
  if (status == google.maps.GeocoderStatus.OK) {
    map.setCenter(results[0].geometry.location);
    var marker = new google.maps.Marker({
        map: map,
        position: results[0].geometry.location
    });
  } else {
    alert("Geocode was not successful for the following reason: " + status);
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T11:16:53.020

这就是我解决它的方法（我使用了 goMap 插件[http://www.pittss.lv/jquery/gomap/](http://www.pittss.lv/jquery/gomap/)）

```
<script type="text/javascript" src="js/jquery.gomap-1.3.2.min.js"></script> 
<script type="text/javascript">
$(document).ready(function() {
    $(function(){ 
        $("#googleMap").goMap({ 
            address: 'Luzern, Schweiz', 
            zoom: 13,
            maptype: 'ROADMAP',
            mapTypeControl: false,  
            hideByClick: false
        }); 
        $.goMap.createMarker({  
            address: 'Winkelriedstrasse 47, 6004 Luzern',
            html: 'Winkelriedstrasse 47, 6004 Luzern' 
        });
    });
});
</script> 
```

现在它工作得很好......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-01T08:22:20.593

尼古拉斯，你有一个错误：

```
geocoder.geocode('address': 'Winkelriedstrasse 47, 6004 Luzern', function(results, status) 
```

使用此代码：

```
geocoder.geocode({'address': 'Winkelriedstrasse 47, 6004 Luzern'}, function(results, status) 
```

# matlab - 带有变量下标的 Matlab 绘图

> ID：15974337
> 
> 赞同：0
> 
> 时间：2013-04-12T14:44:31.023
> 
> 标签：matlab, plot, matlab-figure

所以我需要绘制一个函数，假设它是： y = sin( x [k] )

但我只能编写 matlab 代码，如：

```
x = -pi : .1 : pi;
y = sin(x);
plot(x,y); 
```

如果我尝试做 x [k]，那么它会哭泣不知道是什么`k`。知道如何使用包含下标的变量绘制函数（下标只是描述性的，它们不包含任何值）？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:57:48.300

[变量](http://www.mathworks.com/help/matlab/matlab_prog/variable-names.html)不能有下标。您不必在 MATLAB 语句中精确地重现该公式。这很好命名变量只是`x`, or `xk`, or `x_k`, 等等。

另一方面，如果您有多个要与相同名称关联的向量，则可以将它们放入[元胞数组](http://www.mathworks.com/help/matlab/cell-arrays.html)中，并将每个向量作为`x{k}`.

您可以使用 Tex（默认）或 Latex 解释器在轴标签、标题和文本注释中使用下标。在文本字符串中使用下划线字符后跟下标。

```
title('y = sin(x_k)') 
```

或者

```
title('y = sin(x_{several chars})') 
```

# bash - Bash：根据正则表达式参数遍历文件

> ID：15974339
> 
> 赞同：1
> 
> 时间：2013-04-12T14:44:35.780
> 
> 标签：bash, loops

有几篇关于迭代 bash 文件的文章，如下所示：

```
count_files() {
    count=0

    for f in "filename_*.txt"
    do
        count=$(($count + 1))
    done
    echo "Current count:$count"
} 
```

调用 bash 脚本时，我需要传入“filename_*.txt”作为参数。像这样：

```
$: count_files.sh "filename_*.txt"

$: count_files.sh "different_filename_*.txt" 
```

但是，这只会获取第一个文件：

```
count_files() {
    count=0

    for f in $1
    do
        count=$(($count + 1))
    done
    echo "Current count:$count"
} 
```

如何传入正则表达式参数并遍历它？

注意：计算文件只是一个例子。如果您有一个简单的方法来做到这一点，请分享，但这不是主要问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:48:10.980

内部`count_files.sh`脚本确保你用这样的引号调用函数：

```
count_files "$1" 
```

代替：

```
count_files $1 
```

稍后将让您 count=1 因为通配符将在函数调用第一个文件名之前扩展。

# c# - 使用 AJAX 在视图内渲染部分视图

> ID：15974340
> 
> 赞同：1
> 
> 时间：2013-04-12T14:44:36.910
> 
> 标签：c#, html, ajax, asp.net-mvc

提交表单时，我正在尝试刷新视图内的部分视图。但是，每当我尝试时，它只会将部分视图呈现为普通视图。有人可以告诉我我做错了什么吗？

控制器：

```
public ActionResult ChangeHeatName(string heatName, string updatedHeat)
    {
        string user = User.Identity.Name;
        HomeModel H = new HomeModel();
        H.ChangeHeatName(heatName, updatedHeat, user);
        ChemViewModel mySlagViewModel = new ChemViewModel();
        mySlagViewModel = H.QueryResults(heatName);

        return PartialView("PartialChemAnalysis", mySlagViewModel);
    } 
```

局部视图形式（包含在局部视图中，不是主视图）：

```
@using (Ajax.BeginForm("ChangeHeatName", "Home", new AjaxOptions(){UpdateTargetId = "chemDiv" InsertionMode = InsertionMode.Replace}))
{
    <section>
        Heat Name:<input type="text" name="heatName" value="@Html.ValueFor(x => x.heatname)" style ="width:100px"/>
        Change to:<input type="text" name="updatedHeat" value="" style="width: 100px" />
        <input type="submit" name="ChangeHeatName" value="Change" />
    </section>
} 
```

呈现部分视图的索引视图：

```
@if(ViewBag.SearchKey == null)
{
    <div class="content-wrapper">
        <hgroup class="title">
            <h1>@HttpContext.Current.User.Identity.Name</h1>
            <h2>@ViewBag.Message</h2>
        </hgroup>
    </div>
}

@using (Html.BeginForm("Index", "Home", "POST"))
{
<div class="searchField">
   <input type="text" class="search-query" name="heatSearch" placeholder="Search">
        <button class="btn btn-success"  type="submit">Search</button>
    <br />
    @if (ViewBag.AverageSuccessful == true)
    {
        <input type="text" name="AvgConfirmation" class="search-query" value="Average Submitted Successfully" width:"400px" placeholder="Search" />
    }
</div>
}

@if(ViewBag.SearchKey != null)
{
    <div>
    <div id ="chemDiv">
    @Html.Action("PartialChemAnalysis", "Home", (string)ViewBag.SearchKey)
    </div>

    <div id ="slafDiv">
    @Html.Action("PartialSlagView", "Home", (string)ViewBag.SearchKey)
    </div>
    </div>

 } 
```

传递 SearchKey 的索引控制器：

```
 [HttpPost]
    public ActionResult Index(string heatSearch)
    {
        ViewBag.SearchKey = heatSearch;

        return View();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:04:25.180

目前，您的 ajax.beginform 在您的局部视图中，这一切都很好，但您的局部视图并未呈现在您的索引中，所以实际上您从不执行 ajax 替换逻辑，您只是调用一个操作方法并获得一个完整的页面部分视图的刷新。

这是可行的。

```
@if(ViewBag.SearchKey != null)
{
    <div>
        <div id ="chemDiv">
            @Html.Partial("ChangeHeatName")
        </div>

        <div id ="slafDiv">
            @Html.Action("PartialSlagView", "Home", (string)ViewBag.SearchKey)
        </div>
    </div>
} 
```

现在您的 Ajax.Beginform 在索引视图中呈现，当单击按钮时，它将刷新。

编辑：您需要做一些事情，`@Html.Action("PartialChemAnalysis", "Home", (string)ViewBag.SearchKey)`可能会将其粘贴在您的局部视图中，因为“chemDiv”中的所有内容现在都将在更新时被替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:36:30.933

您没有指定`POST`in `Ajax.BeginForm()`。尝试这个：

```
@using (Ajax.BeginForm("ChangeHeatName", "Home", FormMethod.Post, 
new AjaxOptions(){UpdateTargetId = "chemDiv" InsertionMode = InsertionMode.Replace}))
{...} 
```

另外，在你的控制器动作上设置一个断点并单步执行，看看它是否真的击中`return PartialView()`或跳过它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:29:02.027

发布这个是因为它不是一个直观的修复。显然 MVC 4 和 jQuery 1.9.1 存在问题，所以为了让它工作，我必须更改对 jQuery 1.7.1 的引用

# sql - SQL检查任何一天两次之间的DATE

> ID：15974342
> 
> 赞同：3
> 
> 时间：2013-04-12T14:44:40.380
> 
> 标签：sql, oracle, plsql, date-arithmetic

我有一个事务表，我的问题是跟踪该`transactionDateTime`列。使用 SQL，我似乎无法获取`DATE`或`TIMESTAMP`格式化，因此任何插入的数据都必须在任何一天的上午 8 点到晚上 10 点之间：

```
 CREATE TABLE Transaction_T
      (transactionID          NUMBER(8,0)              ,
       employeeID             NUMBER(10,0)      NOT NULL,
       customerID             NUMBER(6,0)       NOT NULL,
       transactionDate        VARCHAR2(9)       NOT NULL,
       transactionPayment     VARCHAR2(10) check(transactionPayment IN('cash','credit','debit','ebt')),
       transactionType        VARCHAR2(10) check(transactionType IN('void','return','sale')),
       transactionDateTime    TIMESTAMP check(transactionDateTime < '% 22:00:00' AND transactionDateTime > '% 08:00:00') NOT NULL,
CONSTRAINT TransactionPK PRIMARY KEY (transactionID),
CONSTRAINT TransactionFK1 FOREIGN KEY (employeeID) REFERENCES Employee_T(employeeID),
CONSTRAINT TranscationFK2 FOREIGN KEY (customerID) REFERENCES Customer_T(customerID)); 
```

上表已创建，但在尝试插入正确的 时`Date(Time)`，我收到有关 1 到 12 小时之间的格式错误，或者当时间低于 12 时，我收到了无效月份。我使用了 Oracle 文档格式，但仍然没有运气：

```
INSERT INTO 
transaction_T(transactionID, employeeID, customerID, transactionDate, transactionPayment, transactionType, transactionDateTime) 
VALUES(00000001, 0001, 000004, '04-APR-13','ebt','sale','04-APR-13 13:25:10'); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T14:54:54.613

你的`%`检查约束在这里不起作用。试试这个：

```
CHECK (
  EXTRACT(HOUR FROM transactionDateTime) < 22 AND
  EXTRACT(HOUR FROM transactionDateTime) >= 8) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:54:09.203

您可以像这样表达您的检查约束：

```
check(transactionDateTime between trunc(transactionDateTime) + 8/24 and trunc(transactionDateTime) + 22/24)) 
```

# c# - 使用 WiX 从另一个项目引用版本字符串

> ID：15974343
> 
> 赞同：1
> 
> 时间：2013-04-12T14:44:43.560
> 
> 标签：c#, .net, wix

现在，在我们的一个 WiX 安装程序中，我们明确定义了产品版本字符串，如下所示：

```
<?define ProductVersion="1.2.3"?> 
```

我们还在另一个表单的标题中使用了相同的版本号，下面是一个非常简化的示例，说明了如何应用：

```
public partial class frmMain : Form
{
    // assume the designer code is all properly generated

    private const string VERSION = "1.2.3";

    public frmMain()
    {
        InitializeComponent();
        this.Text += string.Format(" v{0}", VERSION);
    }
} 
```

这看起来很笨拙，我觉得没有必要在两个地方更新我们的产品版本。存储版本字符串信息的最佳位置在哪里，所以我只需在一个地方更新它，并且只需从表单和安装程序中引用这些数据？

请注意，在这种情况下，产品版本与程序集版本不匹配。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T05:32:43.537

C# 没有 C/C++ 和 WiX 工具集那样的预处理器，因此您不能做显而易见的事情并通过该路径传递版本。如果产品版本与程序集*文件*版本匹配，那么您可以执行以下操作：

```
<Product Version='!(bind.fileVersion.FileIdOfAssembly)'> 
```

如果文件版本可以匹配，那将是理想的。如果没有，那么剩下的唯一选择就是在安装时写一些东西并在运行时读取它。例如：

```
<RegistryValue Root='HKLM'
               Path='SOFTWARE\!(bind.property.Manufacturer)\!(bind.property.ProductName)'
               Name='Version' Value='!(bind.property.ProductVersion)' Type='string' /> 
```

然后在您的 frmMain() 中读取该注册表项。不确定是否值得增加应用程序的复杂性，因为您现在拥有简单、强大的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T07:28:31.570

I am not sure you would like to go through as much trouble as my solution will require, but here is it:

First, you should store assembly version in AssemblyInfo.cs file. This will allow sharing version (and other company - specific info) between projects just by referencing a common AssemblyInfo in all your projects. You can do it by adding existing file to a project as a link. For example, all our projects have two AssemblyInfo files: one local, project specific (GUID, etc...), and one common, with version info and company name.

```
[assembly: AssemblyFileVersion("1.3.100.25")]
[assembly: AssemblyVersion("1.1.0.0")] 
```

Second, if you have not done this already, take the WIX version out of WXS file and put it into a separate WXI file. Again, this will allow separate editing of version (and other constants, if needed), and referencing it in several projects:

```
<?include ..\..\..\Common\WIX\Version.wxi ?> 
```

Then, you will have to write a build task for MSBuild, and incorporate it as a pre-build dependency for all projects. In the build task, you can take version number from WXI file and put it into AssemblyInfo file, or vice versa. You can even store version data in a separate XML and inject it into both WXI and AssemblyInfo. Reading and writing WXI and AssemblyInfo is a simple string manipulation in C#, do not bother yourself with Reflection and stuff.

This third step is the only required one, and the most difficult. You should probably do all this if you have a lot of projects, or using automated builds.

# sql - DB2：按父子顺序设置完整性

> ID：15974347
> 
> 赞同：0
> 
> 时间：2013-04-12T14:44:59.557
> 
> 标签：sql, shell, db2, relational-database, sh

我正在尝试编写一个脚本（shell + DB2）来设置数据库中所有表的完整性。我使用下面的动态 SQL 生成脚本并执行它：

```
db2 -x "select 'SET INTEGRITY FOR '|| TABSCHEMA ||'.'||TABNAME || ' IMMEDIATE CHECKED;' from SYSCAT.TABLES where STATUS='C' and type='T'" > set_integrity.sql 
```

它工作正常，但问题是表有关系（父子表）。它给出错误 SQL3608N“当父级处于设置完整性待定状态时无法检查子表的完整性”

请让我知道如何修改我的 SQL 或编写一个 shell 脚本/存储过程，以便它以父子顺序设置完整性。我的最终目标是使零表处于检查待处理/设置完整性待处理状态。

请帮忙。谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:11:45.443

您当然可以查看`SYSCAT.REFERENCES`以确定父子顺序，但如果您有超过 1 级的依赖关系，您最终将需要编写递归查询。更不用说如果你有 2 个相互依赖的表（即 table1 在 table2 上有一个外键；而 table2 在表 1 上有一个外键），生成这个列表要困难得多。

我发现通常更容易忽略失败的`SET INTEGRITY`语句并重复该过程，直到没有剩余的表：

```
db2 -x "select 'SET INTEGRITY FOR '|| TABSCHEMA ||'.'||TABNAME || ' IMMEDIATE CHECKED;' from SYSCAT.TABLES where STATUS='C' and type='T'" > set_integrity.sql

tabcnt=$(wc -l set_integrity.sql)
while [[ ${tabcnt} -gt 0 ]] ; do
    db2 -tf set_integrity.sql

    # look for more tables in check pending state
    db2 -x "select 'SET INTEGRITY FOR '|| TABSCHEMA ||'.'||TABNAME || ' IMMEDIATE CHECKED;' from SYSCAT.TABLES where STATUS='C' and type='T'" > set_integrity.sql
    tabcnt=$(wc -l set_integrity.sql)
done 
```

这既不漂亮也不优雅，但它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-13T03:02:06.690

你可以试试这个：

```
db2 << EOL
with refs (parent, child, levels) as \
      (select reftabname, tabname, 1 from syscat.references where tabschema = 'DEV' \
      union all \
      select reftabname, tabname, levels+1 \
        from refs r, syscat.references s where s.tabname = r.parent and s.tabschema = 'DEV') \
select 'set integrity for ' || st.name || ' with immediate check' \
    from (select parent, max(levels) lv from refs group by parent) rf \
      right join sysibm.systables st on rf.parent = st.name \
      where st.status = 'C' and st.type = 'T' and st.creator = 'DEV' \
      order by coalesce(rf.lv,0) desc
EOL 
```

# ruby-on-rails - 使用 Remotipart 和 Carrierwave 上传 AJAX 文件

> ID：15974350
> 
> 赞同：1
> 
> 时间：2013-04-12T14:45:00.200
> 
> 标签：ruby-on-rails, ajax, file-upload, carrierwave, remotipart

我有一个模型，它有一个与之关联的图标。此图标上传由 Carrierwave 管理。

当我尝试从表单中通过 ajax 发送文件时，我的问题就出现了。

我的模型如下：

```
class Category < ActiveRecord::Base

   attr_accessible :name,
                   :icon
   mount_uploader :icon, TemplateCategoryIconUploader

 end 
```

控制器动作：

```
def update
    @category = Category.find(params[:id])
    @category.update_attributes(params[:category])

    if @category.save
      flash[:notice] = "Category Updated!"
      render_ajax_content_replace :element => :show_category, :partial => 'show'
    else
      render_ajax_content_replace :element => :show_category, :partial => 'show'
    end
  end 
```

最后是我的表格：

```
<%= form_for @category, :html => {:multipart => true}, :remote => true do |f| %>

        <%= error_messages_for f.object %>

       <%= f.file_field :icon %>
<% end %> 
```

删除事物的 ajax 方面允许提交工作。但是我要求它用 AJAX 来完成。

我得到的错误是缺少模板错误。然而，我所有的部分都存在并且有效。由于某种原因， render_ajax_content_replace 中断。它只是应该用部分替换元素。这在其他任何地方都可以完美运行。添加 AJAX 文件会破坏它。

# iphone - 具有属性和合成的实例变量和一个没有它们的实例变量 - ARC

> ID：15974352
> 
> 赞同：0
> 
> 时间：2013-04-12T14:45:05.663
> 
> 标签：iphone, objective-c, automatic-ref-counting

你可以像这样声明一个变量。

情况1：

```
@interface MyClass : NSObject
{
    NSString *str;
}

@end 
```

另外，如果你想设置它的属性，你可以做

案例2：

```
@interface MyClass : NSObject
{
    NSString *str;
}
@property (nonatomic, strong) NSString *str;

@end 
```

在.m中，

```
@synthesize str; 
```

我对案例 1 和案例 2 之间差异的理解是，当另一个类实例化此类时，可以从另一个类访问案例 2 中的综合变量和属性变量。

案例 1 和案例 2 之间还有哪些其他区别？假设这些变量仅在其 .m 文件中使用。您设置“str”属性的事实可能会有所不同，但是如何？如果您不设置属性，它们将如何与 ARC 一起发布？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:50:17.763

在这种情况下，由于设置方式的不同，这些差异相当令人困惑。

它也在使用现在的旧做法。

这样做的新建议方法（Apple 建议）是这样做......

我的类.h

```
@interface MyClass : NSObject

@property (nonatomic, strong) NSString *str;

@end 
```

我的班级.m

```
#import "MyClass.h"

@implementation MyClass

@end 
```

你不再需要@synthesize，因为 Xcode（从 4.5 开始）会自动为你生成这些。

这样做会设置名为的属性`str`和名为的 iVar `_str`。

您现在不再需要担心定义多个 ivars 和属性等...只需使用该属性即可。

属性 str 的示例 setter 方法如下所示...

```
- (void)setStr:(NSString*)str
{
    _str = str;
} 
```

# java - Java Hangman 类方法错误

> ID：15974354
> 
> 赞同：1
> 
> 时间：2013-04-12T14:45:17.497
> 
> 标签：java, class, methods

我几乎完成了一个基本的刽子手游戏，但我在课堂上使用“makeGuess”方法时遇到了困难。我正在尝试针对秘密单词测试用户输入（他们的一个字符猜测），并在他们的猜测正确或不正确时更新伪装的单词。任何正确方向的建议或指示将不胜感激。每次运行时我都会收到此错误：

```
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: 11
at java.lang.String.charAt(String.java:686)
at hangmandemo.Hangman.makeGuess(Hangman.java:42)
at hangmandemo.HangmanDemo.main(HangmanDemo.java:24)
Java Result: 1 
```

这是刽子手类：

```
package hangmandemo;

public class Hangman {

private String secretWord;
private String disguisedWord;
private int guesses;
private int wrongGuesses;
boolean found=false;

public String getDisguisedWord() {
    return disguisedWord;
}

public String getSecretWord() {
    return secretWord;
}

/**
 * returns number of guesses
 */
public int getGuesses() {
    return guesses;
}

/**
 * continues game until secretWord is found
 */
public boolean isFound() {
    return found;
}

/**
 * brings in a char to test against String
 */
public void makeGuess(char c) {
    for (int i = 0; i <= disguisedWord.length(); i++) {

        if (c == secretWord.charAt(i)) {
            disguisedWord = disguisedWord.substring(0, i-1) + c + disguisedWord.substring(i+1);

        }
        if (secretWord.equals(disguisedWord)) {
            found = true;
        }
    }
    wrongGuesses++;
}

/**
 * assigns secret String to secret word
 */
public void createSecretWord(String secret) {
    secretWord = secret;
}

/**
 * disguises secret word with "???"
 */
public void createDisguisedWord() {

    for (int i = 0; i < secretWord.length(); i++) {
        disguisedWord += "*";
    }
}

/**
 * returns number of wrong guesses
 */
public int getWrongGuesses() {
    return wrongGuesses;
} 
```

}

这是我的演示主课

```
package hangmandemo;
import java.util.Scanner;
public class HangmanDemo {
public static void main(String[] args) {
    Scanner keyboard = new Scanner(System.in);
    Hangman game = new Hangman();
    game.createSecretWord("assessments");
    game.createDisguisedWord();
    System.out.println("This is the hangmandemo. Press the number '3' to quit.");
    System.out.println("The disguised word is..."+ game.getDisguisedWord());
    while (!game.isFound()) {
        System.out.println("Enter a one character guess");
        char c = keyboard.next().charAt(0);
        if (c == 3) {
            System.out.println("game over, the word was... " + game.getSecretWord());
            System.exit(0);
        }
        game.makeGuess(c);
        System.out.println(game.getDisguisedWord());
    }

    System.out.println("you guessed it, the word was... " + game.getSecretWord());
    System.out.println("you had " + game.getGuesses() + " guesses.");
    System.out.println("you had " + game.getWrongGuesses() + " wrong guesses.");
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:47:04.467

这里有3个问题。

在你的循环中

```
for (int i = 0; i <= disguisedWord.length(); i++) 
```

的最后一个元素`disguisedWord`将位于 `disguisedWord[disguisedWord.length -1]，因为数组的索引从 0 开始。

通常将循环格式化为

```
for (int i = 0; i < disguisedWord.length(); i++) 
```

但即使这样还不够，因为

```
disguisedWord.substring(i+1) 
```

那时会出界。

和表达式

```
disguisedWord.substring(0, i-1) 
```

当 i = 0 时会抛出异常；

* * *

您需要在这里密切关注您的边缘条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:48:03.193

```
int i = 0; i <= disguisedWord.length(); i++ 
```

这一行，您必须将`<=`简单地更改为 a ，`<`否则您将以比最大索引大 1 的字符串长度访问索引，因为字符串索引从 0 开始并且长度只是总长度字符数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:48:27.737

代替`for (int i = 0; i <= disguisedWord.length(); i++)`

与`for (int i = 0; i < disguisedWord.length(); i++)`.

*Everthing*在 JAVA 中是从 0 开始索引的：`"abc"`char`'a'`位于 index `0`、`'b'`at`1`和`'c'`at `2`，而其长度为`3`.

# c - UNIX 套接字：是否可以欺骗 getsockopt() SO_PEERCRED？

> ID：15974356
> 
> 赞同：7
> 
> 时间：2013-04-12T14:45:21.390
> 
> 标签：c, security, sockets, unix, unix-socket

是否有（兼容的）方法来**欺骗**（以 root身份）可以通过选项获得的**unix 套接字**（文件系统套接字）**对等凭据**？[`getsockopt()`](http://linux.die.net/man/7/socket)`SO_PEERCRED`

*背景：*
我需要连接到一个服务器应用程序（我无法修改），它检查`UID`通过`SO_PEERCRED`. 我想欺骗信息，以便能够以**root****身份连接**到应用程序。

 ****更新**

*为了澄清这个问题*：
我正在寻找一种服务器查看特定对等点`UID`/的非侵入性方式`GID`。不**鼓励**需要更改内核（或使用内核模块）或以任何方式**更改服务器进程**或其**加载/链接进程**`LD_PRELOAD`（系统调用拦截等）的解决方案。

基本上，该解决方案应该在没有任何特殊要求的任何 linux（或一般的 unix）服务器上运行时工作。服务器进程可能已经在运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T21:25:07.383

你在正确的路线上。根进程有权欺骗这样的事情，问题只是 SO_PEERCRED 没有为进程提供任何机制或 API 来指定应该向对等方提供什么身份。

你可以做两件事：

1.  `setreuid(desired,-1)`拨打电话时暂时放弃 root ( ) `connect`。一个 unix-domain 连接在进程调用时被标记了对等方的凭据`connect`（`listen`反之亦然）。SO_PEERCRED 不会告诉您当前对等方的凭据。然后你可以恢复root。

2.  更好的是，使用另一个 API。消息传递 API 允许进程选择要呈现给对等方的标识。`sendmsg`使用`struct cmsg`包含您要发送的凭据的调用。内核将忽略非特权用户指定的凭据，并始终确保对方看到实际身份，但特权进程可以伪装成其他任何人。这更符合您的需求，因为删除和重新获得根是一项危险的活动，在这种情况下是不必要的。谷歌搜索“SCM_CREDENTIALS”（或“man -K”在你的系统上）来获取代码示例。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T15:26:27.053

不，原因是提供对等体的UID和GID的机制是**内核内部的**，你不能欺骗内核！内核使用对等体的 PID 来推断对等体的有效凭证。当一侧`connect`在套接字上执行时会发生这种情况。请参阅对`copy_peercred()`from `unix_stream_connect()`in的调用`net/unix/af_unix.c`。没有任何方法可以让对等方更改它发送的数据或让内核相信对等方的 PID 不是它所是的套接字。这与 AF_INET 套接字不同，内核不了解对等进程的内部知识，只能看到对等方发送的 IP 数据包头中的数据。

要获得此效果，您唯一可以做的就是将对等进程的有效 UID 设置为 root 或您想要的任何 UID/GID，为此您需要 root 密码或`sudo`权限。**

# php - 使用 PHP 删除文件夹中的图像

> ID：15974360
> 
> 赞同：-3
> 
> 时间：2013-04-12T14:45:29.827
> 
> 标签：php

我正在尝试找到一种方法，允许我网站上的用户删除文件夹中的某些图像`'photo/image id' = $_SESSION['user_id']`

那里有我可以用来执行此操作的脚本吗？如果有人能告诉我我需要做什么或指出我正确的方向，我将不胜感激。

我正在寻找可以回显照片的东西，并且在照片旁边有一个删除按钮或类似的东西，然后用户可以单击每张照片，它将从图像文件夹`directory = the $_session['user_id']`和位置的文件夹中删除那个`photo = the photo id`什么的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T14:47:40.493

查找[`glob()`](http://php.net/glob)和[`unlink()`](http://php.net/unlink). 这些可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:49:31.133

删除你应该使用的文件

```
if('photo/image id' == $_SESSION['user_id'])
 unlink(path_to_file); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:48:39.547

[使用 PHP 删除文件](http://www.tizag.com/phpT/filedelete.php)

确保您在文件夹中具有正确的权限。

# c# - Winforms 客户端和远程 XCF 服务之间的双向通信

> ID：15974361
> 
> 赞同：0
> 
> 时间：2013-04-12T14:45:30.027
> 
> 标签：c#, winforms, wcf

我有一个将托管在服务器和 WinForms 桌面应用程序上的 WCF 服务。我想在他们之间实现双向通信，并且只是在一些建议之后，这是最好的方法？

我已经做了一些查看，我看到很多提到的两种方法是使用 Web 套接字实现回调承包商。

我只是在就这些方法中的哪一种或是否有更好的方法获得一些建议和指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T17:47:09.923

我在学校项目中使用了回调合同，它很好地达到了目的。如果实施得当，它可以在服务器和客户端之间传输任何类型的数据。回调的定义方式与合同相同。这很简单，我建议您在 Code Project 上查找一些示例，例如这个[Callback example](http://www.codeproject.com/Articles/569866/TutorialplusonplusMessageplusExchangeplusPatternsp) ，它以最少的代码进行了解释。此外，在大多数书籍中，回调用作服务器响应的示例。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:59:26.820

您将此问题标记为 winforms，因此可能与它不太相关的 Web 套接字。

您可以使用回调（查找[Duplex](http://msdn.microsoft.com/en-us/library/ms731064.aspx)以获取模式详细信息）。

但是，如果您在双方都有复杂的功能，并且客户端上的防火墙不是问题 - 您可以创建 2 个 wcf“服务” - 一个将在客户端计算机上运行，​​另一个将在服务器上运行。这将使您更加灵活（对于诸如服务器重启、客户端重启等问题）

# c++ - CMake、DSO-Link-Change 链接失败

> ID：15974364
> 
> 赞同：1
> 
> 时间：2013-04-12T14:45:37.030
> 
> 标签：c++, gcc, linker, cmake, ld

几个月前我在 linux 上编译良好的软件停止在我的新 ubuntu 上编译：

```
Linking CXX executable myApp
/usr/bin/ld: ../libMyLib/libMyLib.a(MyFile.cpp.o): undefined reference to symbol '_ZN2cv6resizeERKNS_11_InputArrayERKNS_12_OutputArrayENS_5Size_IiEEddi'
/usr/bin/ld: note: '_ZN2cv6resizeERKNS_11_InputArrayERKNS_12_OutputArrayENS_5Size_IiEEddi' is defined in DSO /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../lib/libopencv_imgproc.so so try adding it to the linker command line
/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../lib/libopencv_imgproc.so: could not read symbols: Invalid operation
collect2: error: ld returned 1 exit status
make[2]: *** [myApp/myApp] Error 1
make[1]: *** [myApp/CMakeFiles/myApp.dir/all] Error 2
make: *** [all] Error 2 
```

我猜它与[https://fedoraproject.org/wiki/UnderstandingDSOLinkChange](https://fedoraproject.org/wiki/UnderstandingDSOLinkChange)有关。

我的项目（所有 cmake）包含几个库和一个应用程序，这些库和应用程序都依赖于 opencv 和/或 boost（每个都依赖于一些不同的）。我自己的库被构建为 .a 文件，ocv/boost 被作为共享库拉入，然后应用程序的链接失败并出现上述错误。

我还尝试将自己的库构建为 SHARED，但这导致了更多错误。我的库的 CMakeLists 看起来像

```
FIND_PACKAGE(Boost REQUIRED)
FIND_PACKAGE(OpenCV REQUIRED core)
...stuff...
include_directories( ${OpenCV_INCLUDE_DIRS} )
include_directories( ${Boost_INCLUDE_DIRS} )
add_library( ${SUBPROJECT_NAME} ${SOURCE} ${HEADERS} ) 
```

应用程序 CMakeLists 看起来像

```
FIND_PACKAGE( OpenCV REQUIRED core imgproc highgui)
include_directories( ${OpenCV_INCLUDE_DIRS} )
TARGET_LINK_LIBRARIES( ${SUBPROJECT_NAME} ${OpenCV_LIBS} MyLib ) 
```

这一切都是正确的，我一直认为这是做到这一点的方法，但现在有了这个 DSO 东西，我就再也无法让它工作了。

如果相关，我尝试使用 CMake 2.8.7 和 2.8.10，以及 g++ 4.7.2 和 4.8，都产生相同的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:36:37.967

GCC 对您在链接阶段指定库的顺序非常敏感。例如，如果`libA.a`依赖于`libB.a`并且一个可执行文件`App`同时依赖于两者，那么您必须通过以下方式调用链接器：

```
gcc main.o object1.o ... object2.o -lA -lB -o App 
```

**注意：**请注意，虽然`A`依赖于`B`，但仍然`A`在前面`B`。作为结论，*最独立的工件*应该链接到最后一个。当然这在某种意义上是违反直觉的，但尝试以与`const`在 C++ 中应用限定符相同的方式对待它。`:)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:53:24.090

OpenCV_LIBS 是否包含 -lopencv_imgproc？如果没有，请尝试手动添加 -lopencv_imgproc 链接命令行（运行 make V=1）如果有效，请将其添加到 TARGET_LINK

# excel - 从 Excel VBA 的范围中获取第一列范围

> ID：15974367
> 
> 赞同：12
> 
> 时间：2013-04-12T14:45:52.600
> 
> 标签：excel, vba

我想从一个范围中获取一个列范围（第一列），例如：如果范围：$E$9:$I$259 结果：$E$9:$E259

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-12T14:52:22.257

通过使用范围对象的列集合，如下所示：

```
Range("$E$9:$I$259").Columns(1) 
```

# ruby-on-rails - 形成多对多关联，不使用通常的添加和删除，但带有显示所有选项的复选框

> ID：15974369
> 
> 赞同：1
> 
> 时间：2013-04-12T14:45:54.400
> 
> 标签：ruby-on-rails, many-to-many, associations, nested-attributes, simple-form

假设我有三个模型来表达一个员工编程语言的经验，Language 是一个主表，员工不能编辑，只能由管理员用户操作。

```
class Employee
  has_many :experiences
  has_many :languages, through: :experiences
end

class Language
  has_many :experiences
  has_many :employees, through: :experiences

end

class Experience
  belongs_to :employee
  belongs_to :language

  attr_accessible :employee_id, :language_id, :duration
end 
```

我希望能够编辑表单上经验的属性持续时间，有一个复选框来建立关联本身，以及一些经验输入。

**已编辑**

我不想要动态嵌套属性解决方案，但是像这样，我想以复选框格式显示所有关联选项，而不是下拉菜单。

![在此处输入图像描述](https://i.stack.imgur.com/O62r1.png)

我知道这与往常不同，但有 UI 约束需要它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:19:44.073

我建议您使用嵌套模型，例如，如果您正在编辑员工信息，您可以添加经验（语言和持续时间）。

检查这些 RailsCasts [http://railscasts.com/episodes?utf8=%E2%9C%93&search=nested+model](http://railscasts.com/episodes?utf8=%E2%9C%93&search=nested+model)

您必须编辑您的 Employee 模型，以便它可以接受嵌套模型（在本例中为 Experience），并且您必须允许对 Experience 的属性进行批量分配。这边走：

员工

```
attr_accessible :experiences_attributes
accepts_nested_attributes_for :experiences, allow_destroy: true 
```

对于意见：

表格：

```
<%= simple_form_for @employee do |f| %>    
  <%= f.input :name %>

  <hr />

  <h3>Experience</h3>

  <%= f.simple_fields_for :experiences do |pf| %>
     <%= render 'experience_fields', f: pf %>
  <% end %>

  <%= link_to_add_fields "New employee experience", f, :experience %>

  <hr />

  <div>
    <%= f.button :submit %>
  </div>
<% end %> 
```

部分经验字段

```
<fieldset>
    <%= f.association :language %>
    <%= f.input :duration %>

    <%= f.hidden_field :_destroy %>
    <%= link_to "Remove", '#', class: "remove_fields" %>
</fieldset> 
```

检查 RailsCasts，特别是[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)和[http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)，以及如果您有高级帐户，请检查[http://railscasts.com/episodes/196-nested-model-form-revised](http://railscasts.com/episodes/196-nested-model-form-revised)

请记住添加视频中解释的 Javascript 函数和帮助程序。

另外，请观看：[https ://github.com/nathanvda/cocoon/wiki/A-guide-to-doing-nested-model-forms](https://github.com/nathanvda/cocoon/wiki/A-guide-to-doing-nested-model-forms)

# java - 上限泛型的问题

> ID：15974370
> 
> 赞同：0
> 
> 时间：2013-04-12T14:45:59.993
> 
> 标签：java, generics, bounded-wildcard

我在使用包含使用泛型的成员的类时遇到了一些问题。考虑以下示例类：

```
class BaseRequest {
    // Content goes here
}

class SubRequest extends BaseRequest {
    // IFace methods go here, etc.
}

// Simple datastructure interface
interface Structure<T> {

    List<T> getElementsList();

    Collection<T> getDependencies(T t);
}

// Simple structure implementation, details unimportant
class StructureImpl<T> implements Structure<T> {

    @Override
    public List<T> getElementsList() {
        // Implementation details not important
        return null;
    }

    @Override
    public Collection<T> getDependencies(T t) {
        // implementation details not important
        return null;
    }
} 
```

然后我有以下使用结构的类

```
class StructureUsingObject {
    final Structure<BaseRequest> structure;

    public StructureUsingObject(Structure<BaseRequest> structure) {
        this.structure = structure;
    }

    public void foo() {
        for (BaseRequest request : structure.getElementsList()) {
            Collection<BaseRequest> requests = this.structure.getDependencies(request);
            // do things
        }
    }
} 
```

就其本身而言，这是行不通的。

```
public void foo() {
    StructureImpl<BaseRequest> baseImpl = new StructureImpl<BaseRequest>();
    StructureUsingObject baseStruct = new StructureUsingObject(baseImpl);

    StructureImpl<SubRequest> subImpl = new StructureImpl<SubRequest>();
    // Compile error on this line
    StructureUsingObject subStruct = new StructureUsingObject(subImpl);
} 
```

这是有道理的；StructureImpl<BaseRequest> 实际上不是 StructureImpl<SubRequest> 的子类。因此，我尝试修改 StructureUsingObject 以使用通配符：

```
 class StructureUsingObject {
    final Structure<? extends BaseRequest> structure;

    public StructureUsingObject(Structure<? extends BaseRequest> structure) {
        this.structure = structure;
    }

    public void foo() {
        for (BaseRequest request : structure.getElementsList()) {
            // Compile error on this line
            Collection<BaseRequest> requests = this.structure.getDependencies(request);

            // To clarify, a compile error would happen here as well; the issue isn't with the return type
            this.structure.getDependencies(request);

            // do things
        }
    }
} 
```

这也不起作用；

```
The method getDependencies(capture#4-of ? extends BaseRequest) in the type Structure<capture#4-of ? extends BaseRequest> is not applicable for the arguments (BaseRequest) 
```

好的，这也是有道理的，尽管自动完成工具提示没有（它声明 getDependencies 应该有 (null t) 作为它的参数）。我真的不知道从这里去哪里。我不能在 foreach 中使用通配符。我怎样才能满足我的 StructureUsingObject 可以接受具有 BaseRequest 子类的结构的要求，同时还能够使用列表中的元素调用 getDependencies？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:59:39.010

调整您的最新版本以捕获通配符。

```
public void foo() {
    bar(this.structure);
}

private <T extends BaseRequest> void bar(Structure<T> s) {
    for (T request : s.getElementsList()) {
        Collection<T> requests = s.getDependencies(request);

        // do things
    }
} 
```

# javascript - 如果我插入指向嵌套插座的链接，Ember 网站会中断

> ID：15974371
> 
> 赞同：0
> 
> 时间：2013-04-12T14:46:08.027
> 
> 标签：javascript, ember.js

我目前正在学习 ember，但遇到了一些麻烦。

我有这个要链接的嵌套插座，但是当我这样做时，没有任何效果，并且我在 handlebars.js:704 上得到一个“未捕获的对象对象”。

我可以通过在其中输入 url（如下所示：index.html#/google/systemet）来转到正确的视图，但如果我执行以下操作，我会收到错误消息。

```
{{#linkTo 'systemet' this}}Systemet{{/linkTo}} 
```

现在，我真的不确定如何使用 ember。事实是我根本不知道。我不明白为什么我在链接末尾输入“this”，我很确定这就是网站中断的原因。我刚刚开始这个项目，所以这是我完整的 app.js：

```
APItest = Ember.Application.create();

APItest.Router.map(function() {
  this.resource('google', function() {
    this.resource('systemet', { path: '/systemet' });
  });
  this.resource('overlook');
  this.resource('discogs');
  this.resource('songkick');
  this.resource('lastfm');
});

APItest.IndexRoute = Ember.Route.extend({
    redirect: function () {
        this.transitionTo ('overlook');
    }
});

APItest.GooglesRoute = Ember.Route.extend({
    model: function () {
        return "hero";
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:56:53.653

根据 , 周围的代码`linkTo`，`this`可用于将模型传递给需要动态段的路由。但是，您的“systemet”路线*不需要*`this`动态段，因此在这种情况下您不需要。

除此之外，您可能需要也可能不需要创建一个`APItest.SystemetRoute`（我仍然对 ember 自动生成什么以及不自动生成什么感到困惑。^^）

*ps：如果您还没有找到它们，这里是[定义路由](http://emberjs.com/guides/routing/defining-your-routes/)和[链接](http://emberjs.com/guides/templates/links/)的 ember 指南。*

# sql - 在另一个表上的表上进行级联更新

> ID：15974372
> 
> 赞同：0
> 
> 时间：2013-04-12T14:46:07.953
> 
> 标签：sql, postgresql, triggers, sql-update

我是这里的新手，也是 PostgreSQL 的新手。我在两个不同的表中有两个不同的布尔列。当我更新我的布尔列`true`时，我还必须在中`tableone`设置一个布尔列。 `tabletwo``true`

例如：（这些与 相关`sipariskod`）

```
UPDATE tabletwo 
SET kalemonay = tableone.sonaydurum 
FROM  tableone 
WHERE tabletwo.sipariskod='10' 
```

我使用了这个 SQL 查询，但它不起作用。我不知道为什么。:(

当我更新`tableone`布尔值时，我需要一个函数或触发器来执行，以同时更新布尔值`tabletwo`- 如果它与相同的布尔值存在`sipariskod`。

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:18:36.470

从您提供的有限信息中无​​法猜出最佳解决方案。

在任何情况下，您的查询都会失败。没有连接两个表的条​​件，因此它会产生一个昂贵且无意义的[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)- 与`CROSS JOIN`. *实际上，您可以为 中的每一*行获取一个更新，而不是仅进行一次更新，`tableone`并且没有定义其中哪一个最晚才能产生持久的影响。

由于您提供：

> （这些与 sipariskod 有关）

..您的查询可能如下所示：

```
UPDATE tabletwo t2
SET    kalemonay = t1.sonaydurum 
FROM   tableone t1
WHERE  **t2.sipariskod = t1.sipariskod**
AND    t1.??? = ???
```

但是在您可以使用该对象**的触发器函数**中，此语句看起来会有所不同。`NEW`例如，在触发器的**触发器**函数内部

```
CREATE TRIGGER foo
AFTER UPDATE ON TABLE ON tableone
FOR EACH ROW EXECUTE PROCEDURE foo(); 
```

**触发函数**可能如下所示：

```
CREATE OR REPLACE FUNCTION foo()
  RETURNS trigger AS
$func$
BEGIN

IF NEW.sonaydurum IS DISTINCT FROM OLD.sonaydurum THEN
   UPDATE tabletwo t2
   SET    kalemonay = NEW.sonaydurum 
   WHERE  t2.sipariskod = NEW.sipariskod;
   AND    kalemonay IS DISTINCT FROM NEW.sonaydurum;
END IF;

RETURN NULL;

END
$func$ LANGUAGE plpgsql; 
```

我添加了一些检查以避免空更新。

### 外键

但是使用[外键](http://www.postgresql.org/docs/current/interactive/ddl-constraints.html#DDL-CONSTRAINTS-FK)*约束*和. 取决于细节。在创建外键之前，您必须清除引用表中的违规值，并在引用的列上创建唯一（或主）索引。您知道外键可以建立在*多列*上吗？`ON UPDATE CASCADE`

# data-structures - 链式哈希集的负载因子

> ID：15974373
> 
> 赞同：3
> 
> 时间：2013-04-12T14:46:19.063
> 
> 标签：data-structures, hashset

我被分配来实现一个链式哈希集：

该集合由一个链接列表数组（我称之为`A[]`）支持，如果两个不同的值获得相同的哈希值`k`，它们将被添加到列表中`A[k]`。

该结构在有界负载因子（在区间内`[0.25, 0.75]`）下工作正常。

在说明中，他们告诉我们将负载因子计算为：

> 负载系数 = 尺寸/容量

其中“size”是集合中当前*元素的总数*，“capacity”是数组的长度 ( `A.length`)。

我认为这种“大小”的定义在这种情况下是不合适的，应该是`A`.

例如，如果所有值都映射到同一个单元格，例如`A[1]`，那么当根据负载因子重新散列时，我们将`A`在实际上只使用第一个单元格时使后面的数组更大。

有人在这里看到我的逻辑有任何错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:04:05.303

哈希通常被修改为转换为数组索引，因此，当增加数组的大小时，元素很可能不会再次出现在同一个链表中（至少如果你使用它们不应该一个适当的散列函数）。

此外，负载因子的含义将发生相当大的变化。正如它所定义的那样，它将给出链接列表中项目的平均数量的一些指示，这是一个非常重要的数字，因为这是检索项目需要（平均）多长时间。

无论好坏，哈希表都依赖于适当的哈希分布，因此假设一个列表与其他列表相比不会变得太大。

存储用于指示散列函数质量的索引数量也很有意义，但我认为没有多大意义。API 对此无能为力（因为它不处理散列函数，它只是调用它）。如果使用错误的散列函数，调用代码中散列函数的动态变化似乎不太实用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-04T16:06:01.660

> 例如，如果所有值都映射到同一个单元格，比如 A[1]，那么在根据负载因子重新散列时，我们将使后面的数组 A 更大，而实际上只使用第一个单元格。

我认为一个隐含的假设是你正在使用一个好的散列函数。

# xml - 使用 XSLT 解析文本文件

> ID：15974377
> 
> 赞同：11
> 
> 时间：2013-04-12T14:46:31.833
> 
> 标签：xml, xslt, text, visual-studio-2005

我有一个结构如下的纯文本文件：

```
!ITEM_NAME
Item value
!ANOTHER_ITEM
Its value
... 
```

是否可以使用 XSLT 获得类似于以下内容的文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
<document>
  <ITEM_NAME>Item value</ITEM_NAME>
  <ANOTHER_ITEM>Its value</ANOTHER_ITEM>
  ...
</document> 
```

**编辑**

很抱歉我之前没有明确说明。我正在尝试使用 Visual Studio 2005 XSLT 引擎来完成这种转换。我已经尝试了两种提供的解决方案，我确信这是正确的。但是 Visual Studio 2005 不知道 unparsed-text 函数。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T17:36:05.243

如果您可以使用 XSLT 2.0，您可以使用`unparsed-text()`...

**文本文件**（不要将文本文件用作 XSLT 的直接输入。）

```
!ITEM_NAME
Item value
!ANOTHER_ITEM
Its value
!TEST_BANG
Here's a value with !bangs!!! 
```

**XSLT 2.0**（将此 XSLT 应用于自身（使用样式表作为 XML 输入）。您还必须更改文本文件的路径。您可能还必须更改编码。）

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="xs">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:param name="text-encoding" as="xs:string" select="'iso-8859-1'"/>
    <xsl:param name="text-uri" as="xs:string" select="'file:///C:/Users/dhaley/Desktop/test.txt'"/>

    <xsl:template name="text2xml">
        <xsl:variable name="text" select="unparsed-text($text-uri, $text-encoding)"/>
        <xsl:analyze-string select="$text" regex="!(.*)\n(.*)">
            <xsl:matching-substring>
                <xsl:element name="{normalize-space(regex-group(1))}">
                    <xsl:value-of select="normalize-space(regex-group(2))"/>
                </xsl:element>
            </xsl:matching-substring>
        </xsl:analyze-string>
    </xsl:template>

    <xsl:template match="/">
        <document>
            <xsl:choose>
                <xsl:when test="unparsed-text-available($text-uri, $text-encoding)">
                    <xsl:call-template name="text2xml"/>                                
                </xsl:when>
                <xsl:otherwise>
                    <xsl:variable name="error">
                        <xsl:text>Error reading "</xsl:text>
                        <xsl:value-of select="$text-uri"/>
                        <xsl:text>" (encoding "</xsl:text>
                        <xsl:value-of select="$text-encoding"/>
                        <xsl:text>").</xsl:text>
                    </xsl:variable>
                    <xsl:message><xsl:value-of select="$error"/></xsl:message>
                    <xsl:value-of select="$error"/>
                </xsl:otherwise>
            </xsl:choose>
        </document>
    </xsl:template>
</xsl:stylesheet> 
```

**XML 输出**

```
<document>
   <ITEM_NAME>Item value</ITEM_NAME>
   <ANOTHER_ITEM>Its value</ANOTHER_ITEM>
   <TEST_BANG>Here's a value with !bangs!!!</TEST_BANG>
</document> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-13T03:49:59.187

**这个 XSLT 2.0 转换**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:variable name="vText" select=
 "replace(unparsed-text('file:///c:/temp/delete/text.txt'),'\r','')"/>

 <xsl:template match="/">
  <document>
      <xsl:analyze-string select="$vText" regex="(!(.+?)\n([^\n]+))+">
       <xsl:matching-substring>
         <xsl:element name="{regex-group(2)}">
                <xsl:sequence select="regex-group(3)"/>
         </xsl:element>
       </xsl:matching-substring>
       <xsl:non-matching-substring><xsl:sequence select="."/></xsl:non-matching-substring>
      </xsl:analyze-string>
  </document>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于任何 XML 文档（未使用）并将提供的文本**驻留在本地文件中时`C:\temp\delete\Text.txt`：

```
!ITEM_NAME
Item value
!ANOTHER_ITEM
Its value
... 
```

**产生想要的正确结果：**

```
<document>
   <ITEM_NAME>Item value</ITEM_NAME>
   <ANOTHER_ITEM>Its value</ANOTHER_ITEM>
...
</document> 
```

**为了更全面地测试，我们将这段文本放入文件中：**

```
As is text
!ITEM_NAME
Item value
!ANOTHER_ITEM
Its value
As is text2
!TEST_BANG
Here's a value with !bangs!!!
!TEST2_BANG
 !!!Here's a value with !more~ !bangs!!!
As is text3 
```

**转换再次产生所需的正确结果：**

```
<document>As is text
<ITEM_NAME>Item value</ITEM_NAME>
<ANOTHER_ITEM>Its value</ANOTHER_ITEM>
As is text2
<TEST_BANG>Here's a value with !bangs!!!</TEST_BANG>
<TEST2_BANG> !!!Here's a value with !more~ !bangs!!!</TEST2_BANG>
As is text3
</document> 
```

# python - 如何使列表中有许多顶点的 Sympy Polygon？

> ID：15974381
> 
> 赞同：2
> 
> 时间：2013-04-12T14:46:39.540
> 
> 标签：python, python-2.7, polygon, sympy

我想使用 sympy python 来做一个有 n 个面的多边形并计算所有参数。

简单的形式是

```
from sympy import Polygon
p1, p2, p3, p4, p5 = [(0, 0), (1, 0), (5, 1), (0, 1), (3, 0)]
Polygon(p1, p2, p3, p4, p5)

Polygon(Point(0, 0), Point(1, 0), Point(5, 1), Point(0, 1)) 
```

但我想使用列表中的 n 个点，例如

```
p=[(0, 0), (1, 0), (5, 1), (0, 1), (3, 0)]
Polygon(p) 
```

但是这种形式和类似的形式没有得到验证。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T14:54:24.517

您可以通过在参数列表前面放一个星号来扩展它来做到这一点，如下所示：

```
p=[(0, 0), (1, 0), (5, 1), (0, 1), (3, 0)]
Polygon(*p) 
```

这将相当于调用`Polygon((0, 0), (1, 0), (5, 1), (0, 1), (3, 0))`.

# python - 从两个不同长度的列表添加到字典中的值

> ID：15974391
> 
> 赞同：5
> 
> 时间：2013-04-12T14:46:52.600
> 
> 标签：python, list

我有四个看起来像这样的列表：

```
lista = [['l', 'k'],['e', '3'],['c', 'k'],['x', 'i'],['d', 'f']]
listanum = [1,2,3,4,5]
listb = [['a', 'k'],['c', 'm'],['v', 'f']]
listbnum = [1,3,4] 
```

`lista`并且`listanum`是同步的，`listb`也是`listbnum`。我想制作一个字典，其中键是项目，`listanum`值是项目`lista`和`listb`，结果将是：

```
di = {1: [['l','k'],['a', 'k']], 
      2: [['e', '3'],[]], 
      3:[['c','k'],['c', 'm']], 
      4: [['x', 'i'],['v', 'f']], 
      5: [['d', 'f'][]]
} 
```

因此，如果 listb 中的 listanum 中的数字没有值，则字典值中的第二个列表为空。

我试过这个：

```
di = {}
for i in xrange(len(lista)):
  pos = listanum[i]
  if pos not in di:
    di[pos] = [[],[]]
  di[pos][0].append(lista[i])  
  if i in listbnum:
    di[pos][1].append(listb[i]) 
```

但收到此错误消息：`'IndexError: list index out of range'`。我看不出为什么超出范围？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T14:50:37.900

```
In [7]: da = dict(zip(listanum, lista))

In [8]: db = dict(zip(listbnum, listb))

In [9]: {k:[da.get(k,[]), db.get(k,[])] for k in set(listanum + listbnum)}
Out[9]: 
{1: [['l', 'k'], ['a', 'k']],
 2: [['e', '3'], []],
 3: [['c', 'k'], ['c', 'm']],
 4: [['x', 'i'], ['v', 'f']],
 5: [['d', 'f'], []]} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T14:50:44.250

压缩项目，并使用`collections.defaultdict`将值默认为`list`s：

```
from itertools import chain
from collections import defaultdict

di = defaultdict(list)

for key, value in chain(zip(listanum, lista), zip(listbnum, listb)):
    di[key].append(value) 
```

我曾经`chain`使循环遍历两组键值对更容易；这适用于 Python 2 和 3。如果这是仅 Python 2 的代码，您可以使用它`+`来连接两个列表。

输出`pprint`并转换回常规`dict`以使打印更容易：

```
>>> pprint(dict(di))
{1: [['l', 'k'], ['a', 'k']],
 2: [['e', '3']],
 3: [['c', 'k'], ['c', 'm']],
 4: [['x', 'i'], ['v', 'f']],
 5: [['d', 'f']]} 
```

这不会为第二组创建空列表；如果您*必须*有空列表，则仅限于构建两个单独的字典，然后合并它们：

```
dicta = dict(zip(listanum, lista))
dictb = dict(zip(listbnum, listb))

di = {k: [dicta.get(k, []), dictb.get(k, [])] for k in dicta.viewkeys() | dictb.viewkeys()} 
```

对于 Python 2，对于 Python 3，使用`.keys()`代替`.viewkeys()`, 来生成：

```
>>> pprint(di)
{1: [['l', 'k'], ['a', 'k']],
 2: [['e', '3'], []],
 3: [['c', 'k'], ['c', 'm']],
 4: [['x', 'i'], ['v', 'f']],
 5: [['d', 'f'], []]} 
```

具体来说，对于您的代码，您将`i`（索引到`lista`）与`pos`：

```
 if i in listbnum:
    di[pos][1].append(listb[i]) 
```

对于`i = 4`,`i in listbnum`是`True`, 但`listb[4]`不存在。您的代码还尝试从and*追加*列表，这不会产生正确的输出。`lista``listb`

使用/列表的*单独*循环稍微改变您的版本：`listb``listbnum`

```
di = {}
for i, pos in enumerate(listanum):
    if pos not in di:
        di[pos] = [[],[]]
    di[pos][0][:] = lista[i]

for i, pos in enumerate(listbnum):
    di[pos][1][:] = listb[i] 
```

# magento - Magento 以某种方式获取类别名称

> ID：15974397
> 
> 赞同：0
> 
> 时间：2013-04-12T14:47:05.133
> 
> 标签：magento, categories

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-12T07:47:38.973

```
//if you are in category or product page
    $currentCategory = Mage::registry('current_category'); 
//or load category if you are in pages other than product or category page
// $currentCategory = Mage::getModel('catalog/category')->load(12);
    $blockName = $currentCategory->getName().'-header';
    echo Mage::getModel(‘cms/block’)-> load($blockName)-> getContent(); 
```

如果您在产品或类别页面中，您可以使用 Magento 注册表加载当前类别。如果它在其他页面中，那么您需要通过其他方式加载类别。

# actionscript-3 - 访问 as3 中的特定对象

> ID：15974398
> 
> 赞同：0
> 
> 时间：2013-04-12T14:47:09.153
> 
> 标签：actionscript-3, flash, action

我正在制作两个拾色器框。通过这两个颜色选择器框，我正在更改特定电影剪辑的颜色。我使用以下代码：

```
for (var i:int = 0; i < 1; i++)
{
     color_picker(i)
}
var colorBox:ColorPicker;
var mc:MovieClip=  new MovieClip()
addChild(mc)

function color_picker(p)
{
    colorBox = new ColorPicker();
    mc.addChild(colorBox);
    colorBox.x = 0
    colorBox.y =  p * 40;
    p++;
    colorBox.addEventListener(ColorPickerEvent.CHANGE, changeColor1)
 }

var colorTransform1:ColorTransform = new ColorTransform();
function changeColor1(Event:ColorPickerEvent)
{
     var color = "0x" +Event.currentTarget.selectedColor.toString(16);
     colorTransform.color = color;
     cards.getChildAt(0).transform.colorTransform = colorTransform;
} 
```

这样，我只能访问最后一个颜色选择器框。请指导我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:49:50.700

因为你在说的时候修改了colorBox指针

```
 colorBox = new ColorPicker(); 
```

您可以创建一个数组，并将所有颜色选择器存储在那里，（或者作为一个不太好但更简单的解决方案，尝试定义 colorBox1 和 colorBox2。）

```
function color_picker(p)  {
    array.push(new ColorPicker())
    colorBox = array[array.length-1]
    mc.addChild(colorBox);
    colorBox.x = 0
    colorBox.y =  p * 40;
    p++;
    colorBox.addEventListener(ColorPickerEvent.CHANGE, changeColor1)
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:16:22.380

```
var mc:MovieClip=  new MovieClip()
addChild(mc)
for (var i:int = 0; i < 1; i++)
{
    color_picker(i)
}
function color_picker(p)
{
    var colorBox = new ColorPicker();
    mc.addChild(colorBox);
    colorBox.x = 0
    colorBox.y =  p * 40;
    //p++; //NO NEED TO INCREMENT THIS VALUE, IT'S GETTING FROM THE LOOP
    colorBox.addEventListener(ColorPickerEvent.CHANGE, changeColor1)
 }
var colorTransform1:ColorTransform = new ColorTransform();
function changeColor1(Event:ColorPickerEvent)
{
    var color = "0x" +Event.currentTarget.selectedColor.toString(16);
    colorTransform.color = color;
    cards.getChildAt(0).transform.colorTransform = colorTransform;
} 
```

# biztalk - ESB 工具包 - 通过 Orchestration Extender 将消息返回到请求响应 OnRamp

> ID：15974404
> 
> 赞同：0
> 
> 时间：2013-04-12T14:47:22.137
> 
> 标签：biztalk, esb, biztalk-2010, biztalk-orchestrations

我有以下请求/响应行程，它给出了令人费解的输出。

![行程](https://i.stack.imgur.com/vqIpL.png)

onRamp 连接到具有接收位置的请求-响应端口

*   类型：WCF-BasicHttp
*   ReceivePipeline：ItinerarySelectReceiveXml
*   SendPipline：PassThruTransmit

行程设置为请求/响应。我已经单独测试了所有组件，直到最后一张地图一切正常，但是我收到的消息是发送到 Map4 的消息，而不是从中产生的消息。使用该输出测试 Map4 工作正常，为什么我没有收到预期的消息返回？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:27:09.843

因此解决方案是将 GlobalBank.ESB.Itinerary.Processes.ProcessAndRespond 编排添加到 ESB.Config 作为行程服务，并将其用作行程中的最后一步/服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:11:37.720

你已经回答了你自己的问题，但我会提供一些我忘记的额外信息，直到你重新提示我的发现。

该特定编排正在启动包含以下提升属性的相关集：

*   BTS.CorrelationToken
*   BTS.EpmRRCorrelationToken
*   BTS.IsRequestResponse
*   BTS.ReqRespTransmitPipelineID
*   BTS.RouteDirectToTP

默认情况下不会提升这些属性，因此需要在行程处理的最后一步中设置显式相关性。底层订阅会将响应消息路由回预期的请求。

如果您有自己的自定义行程步骤，则可以简单地提升这些相同的属性，而不是调用可能不适合您预期的部署模型的“示例”编排。

# vba - 循环遍历具有 vba 中索引的数组并获取特定索引处的元素

> ID：15974406
> 
> 赞同：1
> 
> 时间：2013-04-12T14:47:22.783
> 
> 标签：vba, ms-access

我现在正在尝试这样的事情

```
Dim myAddress() As String
myAddress= Split("4th Street NW Washington, DC")

For intI = 1 To UBound(myAddress)
     `how can i access myAddress[intI+1] from here?
Next intI 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T14:50:31.490

尝试这个：

```
Dim myAddress() As String
myAddress= Split("4th Street NW Washington, DC")

For intI = 1 To UBound(myAddress)
    Console.WriteLine(myAddress(intI))
Next intI 
```

# sql - 修改 Access 2010 查询

> ID：15974411
> 
> 赞同：1
> 
> 时间：2013-04-12T14:47:43.697
> 
> 标签：sql, ms-access-2010

我已成功使用以下 Access 2010 查询从包含数千个组织费用的大型（超过一百万条记录）csv 数据库中检索数据。此查询生成由 LINE_NUM 组织的一长列数字（行号在 00100 和 10099 之间），以及每个组织的总数（行号 10100）：

```
SELECT
   [1995_1].RPT_REC_NUM,
   [1995_1].PRVDR_NUM,
   [1995_2].WKSHT_CD,
   [1995_2].LINE_NUM,
   [1995_2].CLMN_NUM,
   [1995_2].ITM_VAL_NUM
FROM 1995_1
INNER JOIN 1995_2
ON [1995_1].RPT_REC_NUM = [1995_2].RPT_REC_NUM
WHERE
   ((([1995_2].WKSHT_CD)="A000000") AND (Not ([1995_2].LINE_NUM)="09500") AND
   (([1995_2].CLMN_NUM)="0100" Or ([1995_2].CLMN_NUM)="0200"))
ORDER BY [1995_1].RPT_REC_NUM, [1995_1].PRVDR_NUM, [1995_2].LINE_NUM; 
```

我想在查询中添加一条语句，该语句仅测试并返回那些总行数所在的组织`( 00100-10099) =sum(10100)`。

到目前为止，我一直无法编辑查询来实现这一目标。

```
RPT_REC_NUM|WKSHT_CD|LINE_NUM|CLMN_NUM|ITM_VAL_NUM
38897   A000000 100 600 -58202
38897   A000000 200 200 98030
38897   A000000 200 600 8169
38897   A000000 300 200 3445
38897   A000000 400 200 406237
38897   A000000 400 600 22879
38897   A000000 500 100 319063
38897   A000000 500 200 1856092
38897   A000000 500 600 -202
38897   A000000 600 100 1433541
38897   A000000 600 200 3762820
38897   A000000 600 600 -1169298
38897   A000000 700 100 265470
38897   A000000 700 200 551233
38897   A000000 900 100 69663
38897   A000000 900 200 38948
38897   A000000 1000    100 214322
38897   A000000 1000    200 105166
38897   A000000 1100    100 273255
38897   A000000 1100    200 451171
38897   A000000 1100    600 -188629
38897   A000000 1400    100 396603
38897   A000000 1400    200 6961
38897   A000000 1500    100 143603
38897   A000000 1500    200 912099
38897   A000000 1600    200 1059912
38897   A000000 1700    100 240054
38897   A000000 1700    200 83344
38897   A000000 1700    600 -2638
38897   A000000 2500    100 2013226
38897   A000000 2500    200 98046
38897   A000000 2500    600 -2327
38897   A000000 2600    100 551931
38897   A000000 2600    200 23301
38897   A000000 3300    100 196060
38897   A000000 3300    200 13485
38897   A000000 3300    600 -2079
38897   A000000 3700    100 539873
38897   A000000 3700    200 427198
38897   A000000 3800    100 55167
38897   A000000 3800    200 2693
38897   A000000 3900    100 329716
38897   A000000 3900    200 33014
38897   A000000 4000    100 24716
38897   A000000 4000    200 130758
38897   A000000 4000    600 -83333
38897   A000000 4100    100 479582
38897   A000000 4100    200 1662635
38897   A000000 4100    600 -932119
38897   A000000 4300    100 48048
38897   A000000 4300    200 187022
38897   A000000 4300    600 -38404
38897   A000000 4400    100 547169
38897   A000000 4400    200 589613
38897   A000000 4400    600 -83525
38897   A000000 4600    100 49044
38897   A000000 4600    200 88309
38897   A000000 4800    200 73280
38897   A000000 4900    100 189434
38897   A000000 4900    200 48636
38897   A000000 5000    100 5415
38897   A000000 5000    200 546001
38897   A000000 5000    600 -97409
38897   A000000 5300    100 138862
38897   A000000 5300    200 111687
38897   A000000 5300    600 -67989
38897   A000000 5400    100 6129
38897   A000000 5400    200 3758
38897   A000000 5600    600 -2092
38897   A000000 6100    100 629731
38897   A000000 6100    200 944625
38897   A000000 6100    600 -871968
38897   A000000 9000    200 110713
38897   A000000 9000    600 -8202
38897   A000000 10100   100 9159677
38897   A000000 10100   200 14430232
38897   A000000 10100   600 -3577368 
```

感谢您的回复。此数据包括第 600 列，您会注意到我的查询不包括在内。但是，它确实（我认为）说明了我想要实现的目标：将与第 100-9000 行第 100 和第 200 列相关的值相加，看看它们的总数是否 = 第 10100 行第 100 和第 200 列的总和。

希望这个解释有所帮助。

铝

# php - PHP $_SESSION 未设置

> ID：15974412
> 
> 赞同：0
> 
> 时间：2013-04-12T14:47:46.890
> 
> 标签：php, hosting, fbconnect

我正在尝试学习将 fb connect 与网站集成。我面临以下一些问题。

从（[http://www.mydomain.com/exp/login.php](http://www.mydomain.com/exp/login.php)）提交facebook信息后，我正在调用重定向uri中的process_data.php，如下所示，

```
<fb:registration fields="[
{'name':'name'},
{'name':'email'},
{'name':'who', 'description':'additional info',     'type':'text'}]"
redirect-uri="http://www.mydomain.com/exp/process_data.php"
</fb:registration> 
```

然后，在 process_data.php 中，我执行以下操作，

```
if ($_REQUEST) {
$response = parse_signed_request($_REQUEST['signed_request'], 
                               $appSect);

if($response){  
    $_SESSION['facebook_data'] = $response;
    header('Location: '.$redirect_url); //http://www.mydomain.com/exp/home.php
} else {
echo '$_REQUEST is empty';
} 
```

最后，在 home.php 中，

```
<?php
  session_start();
  if(isset($_SESSION['facebook_data'])){
    //do something with data
  { 
```

?>

但它从未在 home.php 中遇到此代码。

和主机有什么关系吗？还是我做错了什么？

提前致谢，

卡松

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:57:08.743

当您重定向时，请尝试执行以下操作：

```
 header("Location: newpage.php?PHPSESSID=".session­_id()); 
```

接着：

```
session_id($_GET['PHPSESSID']); 
session_start(); 
```

AFAIK 当您设置会话变量然后立即重定向时会出现问题，但这并不总是有效。

请注意，最好将会话 ID 存储在 cookie 中而不是 URL 中。

或者尝试`exit`在重定向后立即使用：

```
header("Location: newpage.php");
exit; 
```

# apache - 按索引对构面字段进行排序，在 Solr 中不计数

> ID：15974414
> 
> 赞同：2
> 
> 时间：2013-04-12T14:47:55.283
> 
> 标签：apache, solr, solrnet

我正在尝试按“索引”而不是默认“计数”对构面字段进行排序。[http://wiki.apache.org/solr/SimpleFacetParameters#facet.sort](http://wiki.apache.org/solr/SimpleFacetParameters#facet.sort)

我有诸如日期、地点、关键字等方面的字段。默认情况下，所有三个方面字段均按“计数”排序。我有兴趣将“**日期**”上的排序更改为“索引”而不是默认的“计数”。我可以在 solrconfig 中做些什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:02:46.770

默认情况下设置为`count`，但可以根据字段进行自定义。基于[此](http://lucene.472066.n3.nabble.com/Different-sort-for-each-facet-td3989221.html)，您需要将其设置`index`为 all 并将其设置为其余字段`count`。

示例查询参数：`...&facet.field=Date&facet.field=Keywords&facet.field=Places&facet.sort=index&f.Place.facet.sort=count&f.Keywords.facet.sort=count`

编辑：我的理解是这`index`并不意味着`alphabetical`. 它表示索引中术语的自然顺序。我不确定是否有办法在查询时执行此操作，但如果您可以重建索引，您可以为数据添加前缀，例如，`23_date1`降序的位置。在客户端只显示没有[这里](http://lucene.472066.n3.nabble.com/FACET-SORT-INDEX-descending-td503632.html)建议的前缀。`24_date2``date1 > date2`

# asp.net - Internet Explorer 10 的网站 UI 和功能问题

> ID：15974423
> 
> 赞同：0
> 
> 时间：2013-04-12T14:48:13.397
> 
> 标签：asp.net, google-chrome, firefox, user-interface, internet-explorer-10

我有一个 ASP.net 网站，它在 IE9、Mozilla、chrome 上运行良好，但 IE 用户有很多问题。UI 甚至功能（如单击按钮、登录/注销都不起作用）。

我的IE版本是10.0.9200.16519。

以下是我到目前为止所做的一些事情，

a) 我比较了 IE 10 和 chorome 的视图源，发现了一些差异。我正在经历它们。

b）我正在尝试通过 IE 10 站点上的提琴手工具进行跟踪。

请建议检查浏览器问题的最佳选项。该站点适用于 IE9 及以下版本的 IE。

谢谢，

PS：我正在尝试使网站面向公众，如果有人可以提供他们的输入，我会发布网址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:55:50.227

如果来源不同，那么您的服务器正在向 IE 用户发送不同的页面。您可能正在使用 IE 条件注释（例如，`<!--[if IE]>`）。与 IE9 或更低版本不同，IE10 不**支持条件注释。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:37:56.067

asp.net 中有一个老错误，这里解释得很好：[Browser definition bug in ASP.NET](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

..基本上，当它们来自无法识别的浏览器时，它会导致无法正确处理 javascript 请求。IE10 属于这一类。

幸运的是，这是一个旧错误，并且已通过以下修补程序进行了修补：

这是.NET 2.0 [http://support.microsoft.com/kb/2600100](http://support.microsoft.com/kb/2600100)

而这个 .NET 4.0 [http://support.microsoft.com/kb/2600088](http://support.microsoft.com/kb/2600088)

现在可能也可以通过 Windows 更新获得。

# .net - 将 sql 参数列表添加到 sqldatasource 更新

> ID：15974438
> 
> 赞同：1
> 
> 时间：2013-04-12T14:48:40.347
> 
> 标签：.net, sqldatasource, sqlparameter

我在尝试创建和设置一些 sqlupdate 参数时遇到了麻烦，我希望下面的代码能够自我解释。

vis studio 不满意我的 PArams 在 mo 的数据源中

感谢您的任何建议

```
protected void btnSave_Click(object sender, EventArgs e)
{
    List<SqlParameter> Params = new List<SqlParameter>();
    Params.Add(new SqlParameter("@ID", hidID.Value));
    Params.Add(new SqlParameter("@MachineName", txtMachine.Text));
    Params.Add(new SqlParameter("@AssetNo", txtAssetNo.Text));
    Params.Add(new SqlParameter("@ID", hidID.Value));

    dsEquipment.UpdateParameters.Add(Params);

    if (strMode == "edit")
    {
        dsEquipment.Update();
    }
    else if (strMode == "insert")
    {
        dsEquipment.Insert();
    }
    else
    {
        return;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:43:27.833

在我删除之前尝试

```
dsEquipment.UpdateParameters = Params; 
```

或者

```
dsEquipment.UpdateParameters.Add(new SqlParameter("@ID", hidID.Value));
dsEquipment.UpdateParameters.Add(new SqlParameter("@MachineName", txtMachine.Text)); 
```

UpdateParameters 来自 System.Web.UI.WebControls
这看起来不像是一个网络应用程序
[SqlDataSource.UpdateParameters](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.updateparameters.aspx)

尝试使用 SQLcommand 或 System.Data.SqlClient 中的东西

[SqlCommand.Parameters 属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)

```
SqlCommand command = new SqlCommand(commandText, connection);
command.Parameters.Add("@ID", SqlDbType.Int);
command.Parameters["@ID"].Value = customerID; 
```

# vim - 在同一个字符上叠加两个 vim 语法匹配

> ID：15974439
> 
> 赞同：2
> 
> 时间：2013-04-12T14:48:45.147
> 
> 标签：vim, vim-syntax-highlighting

我在 vimscript 中定义了以下语法规则：

```
hi MyBold term=bold   gui=bold
hi MyRed  ctermfg=red guifg=#ff0000 
```

稍后，我想将两个高光应用到同一个角色。所以基本上，我尝试了以下方法：

```
syn match MyRed  /\%1c\%1l./
syn match MyBold /\%1c\%1l./ 
```

但随后第二场比赛取代了第一场比赛。因此，我进一步阅读了有关 的帮助以及该[问题](https://stackoverflow.com/questions/1819006/vim-syntax-files-trying-to-undestand-contains)`syntax match`的答案，并尝试使用参数：`syn match`

```
syn match MyRed  /\%1c\%1l./ contains=CONTAINED
syn match MyBold /\%1c\%1l./ contained 
```

但它的行为仍然完全相同。

那么，如何使用两个语法匹配来独立更改同一字符的背景和前景呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:59:26.743

你不能。对于每个字符，Vim 只使用一个特定的高亮组，由最后一个“最内部”非透明语法组匹配决定。

要解决此问题，请定义组合的高亮组和相应的`:syntax`命令。

```
:hi MyBoldRed cterm=bold ctermfg=red gui=bold guifg=#ff0000 
```

一些语法（例如`$VIMRUNTIME/syntax/html.vim`，以及各种 Wiki 格式）使用它来组合粗体、斜体和下划线，但之后会变得乏味和重复。但请记住，Vim 不是为所见即所得的。语法高亮只是提供一些提示。

**编辑**：[提出了一个补丁](http://groups.google.com/group/vim_dev/browse_thread/thread/e58820848647ffec/0bb8fefb0d2133ea#0bb8fefb0d2133ea)，可以为命令添加`combine`修饰符；`:syntax`它在 Bram 的待办事项列表中。

# asp.net - 如何告诉 IE 忽略 ASP 身份验证重定向？

> ID：15974441
> 
> 赞同：1
> 
> 时间：2013-04-12T14:48:56.523
> 
> 标签：asp.net, internet-explorer

如果您尝试访问登录页面后面的页面，系统会将您踢回登录屏幕。

如何告诉 IE 忽略这些重定向，以便在重定向之前捕获浏览器尝试访问的 URL？

数据包捕获技术不可行，因为它使用 SSL，并且客户端和服务器都是多用户系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:56:34.817

我不知道你可以告诉 IE 这样做，但是像[Fiddler](http://fiddler2.com/)这样的工具可以让你准确地看到正在发出的请求。

# performance - Linq to SQL - 查找具有最低字段值的元素 - 性能

> ID：15974445
> 
> 赞同：0
> 
> 时间：2013-04-12T14:49:07.897
> 
> 标签：performance, linq, select

今天我面临一个问题，即使用 Linq To Sql 查找对数据库的最有效查询。

我想从 db.ElementsCollection 中获取 element.SomeNumber 值最低的元素。

我只是通过以下查询设法做到了：

```
var query = db.ElementsCollection
   .First(o => o.SomeNumber == (db.ElementsCollection.Max(or => or.SomeNumber))); 
```

有没有更有效的查询来完成这项任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:51:54.153

这不就是你想要的吗：

```
var maxNumber=db.ElementsCollection.OrderByDescending(o=>o.SomeNumber).First(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:53:22.503

您可以`OrderByDescending`在属性上使用`SomeNumber`，然后获取第一项：

```
var query = db.ElementsCollection
              .OrderByDescending(o => o.SomeNumber)
              .First(); 
```

或者您可以使用[morelinq](https://code.google.com/p/morelinq/)：

```
var query = db.ElementsCollection
              .MaxBy(o => o.SomeNumber); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T14:53:22.950

那个怎么样：

```
var query = db.ElementsCollection.OrderByDescending(o => o.SomeNumber).First(); 
```

或者

```
var query = (from o in db.ElementsCollection
            order by o.SomeNumber descending
            select o).First(); 
```

它应该`TOP(1)`在 SQL Query 中翻译。

# apache2 - 尝试启动 apache2 时出错

> ID：15974447
> 
> 赞同：0
> 
> 时间：2013-04-12T14:49:12.553
> 
> 标签：apache2

当我尝试启动 apache2 时，会向我报告以下消息。

```
* Restarting web server apache2                                                
ulimit: 88: error setting limit (Operation not permitted)
ulimit: 88: error setting limit (Operation not permitted)
(13)Permission denied: make_sock: could not bind to address 0.0.0.0:80
no listening sockets available, shutting down
Unable to open logs
Action 'start' failed.
The Apache error log may have more information.
[fail] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:52:44.803

可能你的`80`端口被占用了。如果您有 Skype 或其他可能使用 80 端口的软件，请将其关闭并重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:16:52.767

Try this:

```
sudo /etc/init.d/apache2 restart 
```

or

```
su -
/etc/init.d/apache2 restart 
```

# java - main(java.lang.String) 已在 main(String args[]) 中声明错误显示

> ID：15974450
> 
> 赞同：1
> 
> 时间：2013-04-12T14:49:19.720
> 
> 标签：java, main, java.lang.class

当我编译以下代码时，它会显示此错误：`main(java.lang.String) already declared in main(String args[])`

```
public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);
    int[] array1 = new int[10];
    for (int i = 0; i < array1.length; i++)
        if (sc.hasNextInt())
            array1[i] = sc.nextInt();
    sc.close();
    int[] array2 = new int[10];
    for (int i = 0; i < array2.length; i++)
        if (sc.hasNextInt())
            array2[i] = sc.nextInt();
    median(array1, array2);
    sc.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:32:11.273

您正在“已经声明”，因为您有两次以下代码行......

`for (int i = 0; i < array1.length; i++)`

`for (int i = 0; i < array1.length; i++)`

如果你想按原样使用你的代码，你需要大括号......

`for (int i = 0; i < array1.length; i++){ //some code }`

`for (int i = 0; i < array2.length; i++){ //some code }`

# image - OpenCL 创建错误的颜色

> ID：15974454
> 
> 赞同：3
> 
> 时间：2013-04-12T14:49:30.447
> 
> 标签：image, opencl, gpgpu

我一直在尝试使用 OpenCL 图像过滤器时遇到问题。我以前写过很多这些（Sobel Edge Detection、Auto Segmentation 等），所以我*以为*我知道该怎么做，但是下面的代码给了我一些非常奇怪的输出：

```
//NoRedPixels.cl

__kernel void NoRedPixels(
    __read_only image2d_t srcImg,
    __write_only image2d_t dstImg, 
    sampler_t sampler,
    int width, int height,
    int threshold,
    int colour,
    int fill)
{
    int2 imageCoordinate = (int2)(get_global_id(0), get_global_id(1));

    if (imageCoordinate.x < width && imageCoordinate.y < height)
    {

        float4 pixel = read_imagef(srcImg, sampler, imageCoordinate);
        float4 blue = (float4)(0.0f,0.0f,1.0f,1.0f);

        if (1.0f - pixel.x <= 0.1f)
            write_imagef(dstImg, imageCoordinate, blue);
        else
            write_imagef(dstImg, imageCoordinate, pixel);
    }
} 
```

所以为了测试，我想做的就是用蓝色像素替换红色像素，但是这段代码会将所有匹配的像素替换为白色像素。据我所知，我的蓝色格式是正确的 RGBA 格式，用于创建纯蓝色（我之前做过这个没有问题）。

我使用 PyOpenCL 作为我的框架，并确保将源图像和目标图像的图像通道顺序设置为 RGBA。此外，我还确保将源图像转换为 RGBA 格式（使用 Python 图像库），如果它在运行内核之前还不是那种格式的话。

我回去看了看我写的其他内核，格式是一样的。我在这里缺少什么会导致它写出白色像素而不是蓝色像素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T16:16:37.607

好的，所以我想我已经想通了。出于某种原因，OpenCL 并不热衷于让您按照我想要的方式编辑频道。我最终通过简单地添加或减去等效的 float4 向量来获得我想要的结果向量来解决它。

```
__kernel void NoRedPixels(__read_only image2d_t srcImg, __write_only image2d_t dstImg, 
sampler_t sampler, int width, int height, int threshold, int colour, int fill)
{
    int2 imageCoordinate = (int2) (get_global_id(0), get_global_id(1));
    if (imageCoordinate.x < width && imageCoordinate.y < height)
    {   
        float4 pix = read_imagef(srcImg, sampler, (int2)(imageCoordinate.x, imageCoordinate.y));

        //Full red channel, subtract this from original to remove red!
        float4 red = (float4)(1.0f, 0.0f, 0.0f, 0.0f);
        float4 blue = (float4)(0.0f, 0.0f, 1.0f, 0.0f);

    if (pix.x >= 0.9f && pix.y <= 0.1f && pix.z <= 0.1f) //If red, then replace with blue.
    {   
        const float4 outColor = pix - red + blue;
        write_imagef(dstImg, imageCoordinate, outColor);
    }
    else
        write_imagef(dstImg, imageCoordinate, pix);

    }
} 
```

所以在这种情况下，通过创建向量来表示蓝色和红色（不透明）减去红色，然后添加蓝色，我得到了我想要的结果向量。就个人而言，我不确定为什么我必须这样做，但我很高兴我现在知道 OpenCL 期望我做什么。希望如果其他人遇到这个问题，他们会在这里找到这个。

# php - PHP/SQL - 读取文本文件如果一行等于数据库值回显用户名？

> ID：15974456
> 
> 赞同：0
> 
> 时间：2013-04-12T14:49:31.173
> 
> 标签：php, sql

我有一个超过 10k 行随机名称 (names.txt) 的文本文件，以及一个包含用户信息 (user_info) 的数据库

user_info 数据库的结构类似于：

```
user_id, name,           email,             DoB,           gender

   1,    John,           email@email.com,   01/01/1990       M
   2,    Tim,            email2@email.com,   01/01/1991       M 
```

等等..

我基本上想要实现的是使用 txt 文档进行名称搜索。

因此，当您上传文本文档时，如果其中的姓名为“Tim”，它将在 user_info 数据库中回显所有名为 Tim 的用户以及他们的电子邮件、出生日期和性别。

（我不知道该怎么做，但我猜是这样的）

```
<form action="search.php" method="post" >
                         <input type="hidden" name = "submit" value="Search" />
                </form>

 <?php

 $namestxt = file("/names.txt");

     if (isset($_POST['submit']))
{

      $getUsers = mysql_query("SELECT * FROM `user_info` WHERE `name` = '".$namestxt."'");

  while ($userInfo = mysql_fetch_assoc($getUsers))
  {

   echo $userInfo['name'].' . $userInfo['email'] . $userInfo['DoB']  . $userInfo['gender']<br/>';

  }

}

  ?> 
```

我知道这段代码可能很遥远，但希望你能理解我在这里想要做什么。

任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:57:43.433

`$namestxt`是从您的文件中读取的字符串数组。您可以按索引寻址元素：（`$namestxt[0]`文件中的第一行）。或者用[foreach](http://php.net/manual/en/control-structures.foreach.php)迭代它们。然后您可以编写一个 SQL 查询`select * from user_info where name in('Name1','Name2')`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:08:25.900

```
$getUsers = mysql_query("SELECT * FROM user_info;");

while($userInfo = mysql_fetch_assoc($getUsers))
{
    if(in_array($userInfo['name'], $namestxt))
    {
        echo $userInfo['name'] . ' ' . $userInfo['email'] . ' ' . $userInfo['DoB'] . ' ' . $userInfo['gender'] . '<br />';
    }
    else
    {
        echo 'user not found';
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:12:33.040

You need to convert that $snamestext, which is currently an array, into a comma separated string so you can use 'IN' in the query.

```
 $namestext = implode("'", $namestext);

 ......

 $getUsers = mysql_query("SELECT * FROM `user_info` WHERE `name` IN ('$namestxt')"); 
```

Also while echoing out the results you probably want to organize them in a table and check if that text file even exists before starting the process.

# java - Spring Batch：使用动态文件名将数据写入多个文件

> ID：15974458
> 
> 赞同：6
> 
> 时间：2013-04-12T14:49:34.583
> 
> 标签：java, spring, file, spring-batch, writer

我需要从数据库中获取数据并根据数据库中给出的文件名将该数据写入文件。

这是在数据库中定义数据的方式：

```
Columns --> FILE_NAME, REC_ID, NAME
 Data --> file_1.csv, 1, ABC
 Data --> file_1.csv, 2, BCD
 Data --> file_1.csv, 3, DEF
 Data --> file_2.csv, 4, FGH
 Data --> file_2.csv, 5, DEF
 Data --> file_3.csv, 6, FGH
 Data --> file_3.csv, 7, DEF
 Data --> file_4.csv, 8, FGH 
```

如您所见，基本上文件名和数据是在数据库中定义的，所以 SpringBatch 应该做的是获取这些数据并将其写入数据库中指定的相应文件（即，`file_1.csv`应该只包含 3 条记录（1,2， 3)，`file_2.csv`应仅包含记录 4 和 5 等）

是否可以`MultiResourceItemWriter`用于此要求（请注意，整个文件名是动态的，需要从数据库中检索）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T11:23:41.330

我不确定，但我不认为有一个简单的方法来获得这个。您可以尝试像这样构建自己的 ItemWriter：

```
public class DynamicItemWriter  implements ItemStream, ItemWriter<YourEntry> {

    private Map<String, FlatFileItemWriter<YourEntry>> writers = new HashMap<>();

    private LineAggregator<YourEntry> lineAggregator;

    private ExecutionContext executionContext;

    @Override
    public void open(ExecutionContext executionContext) throws ItemStreamException {
        this.executionContext = executionContext;
    }

    @Override
    public void update(ExecutionContext executionContext) throws ItemStreamException {
    }

    @Override
    public void close() throws ItemStreamException {
        for(FlatFileItemWriter f:writers.values()){
            f.close();
        }
    }

    @Override
    public void write(List<? extends YourEntry> items) throws Exception {
        for (YourEntry item : items) {
            FlatFileItemWriter<YourEntry> ffiw = getFlatFileItemWriter(item);
            ffiw.write(Arrays.asList(item));
        }
    }

    public LineAggregator<YourEntry> getLineAggregator() {
        return lineAggregator;
    }

    public void setLineAggregator(LineAggregator<YourEntry> lineAggregator) {
        this.lineAggregator = lineAggregator;
    }

    public FlatFileItemWriter<YourEntry> getFlatFileItemWriter(YourEntry item) {
        String key = item.FileName();
        FlatFileItemWriter<YourEntry> rr = writers.get(key);
        if(rr == null){
            rr = new FlatFileItemWriter<>();
            rr.setLineAggregator(lineAggregator);
            try {
                UrlResource resource = new UrlResource("file:"+key);
                rr.setResource(resource);
                rr.open(executionContext);
            } catch (MalformedURLException e) {
                e.printStackTrace();
            }
            writers.put(key, rr);
            //rr.afterPropertiesSet();
        }
        return rr;
    }
} 
```

并将其配置为作家：

```
<bean id="csvWriter" class="com....DynamicItemWriter">
        <property name="lineAggregator">
        <bean
         class="org.springframework.batch.item.file.transform.DelimitedLineAggregator">
            <property name="delimiter" value=","/>
            <property name="fieldExtractor" ref="csvFieldExtractor"/>
        </bean>
    </property> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-09T19:42:52.030

在 spring-batch 中，您可以使用[ClassifierCompositeItemWriter](https://docs.spring.io/spring-batch/trunk/apidocs/org/springframework/batch/item/support/ClassifierCompositeItemWriter.html)来执行此操作。

由于`ClassifierCompositeItemWriter`允许您在写入期间访问您的**对象**，您可以编写自定义逻辑来指示 spring 写入不同的文件。

看看下面的示例。`ClassifierCompositeItemWriter`需要一个`Classifier`接口的实现。下面你可以看到我创建了一个 lambda，我在其中实现了接口的`classify()`方法。`Classifier`该`classify()`方法是您将在其中创建`ItemWriter`. 在下面的示例中，我们创建了一个`FlatFileItemWriter`从`item`自身获取文件名的 a，然后为此创建一个资源。

```
@Bean
public ClassifierCompositeItemWriter<YourDataObject> yourDataObjectItemWriter(
    Classifier<YourDataObject, ItemWriter<? super YourDataObject>> itemWriterClassifier
) {
  ClassifierCompositeItemWriter<YourDataObject> compositeItemWriter = new ClassifierCompositeItemWriter<>();
  compositeItemWriter.setClassifier(itemWriterClassifier);
  return compositeItemWriter;
}

@Bean
public Classifier<YourDataObject, ItemWriter<? super YourDataObject>> itemWriterClassifier() {
  return yourDataObject -> {
    String fileName = yourDataObject.getFileName();

    BeanWrapperFieldExtractor<YourDataObject> fieldExtractor = new BeanWrapperFieldExtractor<>();
    fieldExtractor.setNames(new String[]{"recId", "name"});
    DelimitedLineAggregator<YourDataObject> lineAggregator = new DelimitedLineAggregator<>();
    lineAggregator.setFieldExtractor(fieldExtractor);

    FlatFileItemWriter<YourDataObject> itemWriter = new FlatFileItemWriter<>();
    itemWriter.setResource(new FileSystemResource(fileName));
    itemWriter.setAppendAllowed(true);
    itemWriter.setLineAggregator(lineAggregator);
    itemWriter.setHeaderCallback(writer -> writer.write("REC_ID,NAME"));

    itemWriter.open(new ExecutionContext());
    return itemWriter;
  };
} 
```

最后，您可以`ClassifierCompositeItemWriter`像通常附加您的 ItemWriter 一样附加您的批处理步骤。

```
@Bean
public Step myCustomStep(
    StepBuilderFactory stepBuilderFactory
) {
  return stepBuilderFactory.get("myCustomStep")
      .<?, ?>chunk(1000)
      .reader(myCustomReader())
      .writer(yourDataObjectItemWriter(itemWriterClassifier(null)))
      .build();
} 
```

> **注意**：正如@Ping 在评论中指出的那样，将为每个块创建一个新的编写器，这通常是一种不好的做法，而不是最佳解决方案。更好的解决方案是维护文件名和写入器的哈希图，以便您可以重用写入器。

# java - SEAM localeSelector 未注入

> ID：15974460
> 
> 赞同：0
> 
> 时间：2013-04-12T14:49:40.573
> 
> 标签：java, jsf, seam, seam2, jawr

我正在使用 SEAM 2 的 LocaleSelector 在我的应用程序中设置区域设置，它可以正常工作

我还使用 JAWR 的 i18n 消息生成器将消息作为 Javascript 变量提供，按照[此处](http://jawr.java.net/docs/messages_gen.html)的说明，我创建了一个解析当前语言环境的类，以便 JAWR 加载正确的消息包，这是我的代码

```
@Name("localeResolver")
public class LocaleResolver implements net.jawr.web.resource.bundle.locale.LocaleResolver {

    @In private LocaleSelector localeSelector;

    public LocaleResolver() {}

    @Override
    public String resolveLocaleCode(HttpServletRequest request) {
        if(localeSelector!=null){
            System.out.println("locale selector is not null setting jawr locale to "+localeSelector.getLocaleString());
            return localeSelector.getLocaleString();
        }else{
            System.out.println("locale selector is null setting jawr locale to "+request.getLocale().toString());
            return request.getLocale().toString();
        }   
    }
} 
```

但是 localeSelector 始终为 null，因此它使用 request.getLocale 进行设置，这似乎是浏览器的默认语言环境（如果用户希望手动覆盖则不好）

为什么注入的 localeSelector 会为空，我已经成功地将它注入到其他组件中？

谢谢

更新：web.xml 内容

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee      http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
 <context-param>
  <param-name>facelets.DEVELOPMENT</param-name>
  <param-value>true</param-value>
 </context-param>
 <context-param>
  <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
  <param-value>.xhtml</param-value>
 </context-param>
 <context-param>
  <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
  <param-value>server</param-value>
 </context-param>
 <context-param>
  <param-name>org.ajax4jsf.VIEW_HANDLERS</param-name>
  <param-value>com.sun.facelets.FaceletViewHandler</param-value>
 </context-param>
 <context-param>
  <param-name>org.jboss.jbossfaces.JSF_CONFIG_NAME</param-name>
  <param-value>Mojarra-1.2</param-value>
 </context-param>
 <context-param>
  <param-name>org.richfaces.SKIN</param-name>
  <param-value>plain</param-value>
 </context-param>
 <!-- Richfaces Global Ajax Que,
     added as getting concurrent conversation access exceptions
     from unknown locations -->
 <context-param>
  <param-name>org.richfaces.queue.global.enabled</param-name>
  <param-value>true</param-value>
 </context-param>

 <filter>
  <filter-name>Seam Filter</filter-name>
  <filter-class>org.jboss.seam.servlet.SeamFilter</filter-class>
 </filter>

 <!-- Seam -->
 <listener>
  <listener-class>org.jboss.seam.servlet.SeamListener</listener-class>
 </listener>
 <servlet>
  <servlet-name>Seam Resource Servlet</servlet-name>
  <servlet-class>org.jboss.seam.servlet.SeamResourceServlet</servlet-class>
 </servlet>
 <!-- JSF -->
 <servlet>
  <servlet-name>Document Store Servlet</servlet-name>
  <servlet-class>org.jboss.seam.document.DocumentStoreServlet</servlet-class>
 </servlet>
 <servlet>
  <servlet-name>Faces Servlet</servlet-name>
  <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
 </servlet>
 <!-- jawr Servlet -->

 <servlet>
    <servlet-name>JavascriptServlet</servlet-name>
    <servlet-class>net.jawr.web.servlet.JawrServlet</servlet-class>

    <!-- Location in classpath of the config file -->
    <init-param>
        <param-name>configLocation</param-name>
        <param-value>/jawr.properties</param-value>
    </init-param>
    <init-param>
        <param-name>mapping</param-name>
        <param-value>/jsJawrPath/</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>JavascriptServlet</servlet-name>
    <url-pattern>/jsJawrPath/*</url-pattern>
</servlet-mapping>

 <!-- Store item Servlet -->
 <servlet-mapping>
  <servlet-name>Document Store Servlet</servlet-name>
  <url-pattern>*.csv</url-pattern>
 </servlet-mapping>
 <servlet-mapping>
  <servlet-name>Document Store Servlet</servlet-name>
  <url-pattern>*.xls</url-pattern>
 </servlet-mapping>
 <servlet-mapping>
  <servlet-name>Document Store Servlet</servlet-name>
  <url-pattern>*.pdf</url-pattern>
 </servlet-mapping>
 <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.xhtml</url-pattern>
 </servlet-mapping>
 <!-- 120 min session timeout -->
 <session-config>
  <session-timeout>120</session-timeout>
 </session-config>
 <!-- Mime types -->
 <mime-mapping>
  <extension>htc</extension>
  <mime-type>text/x-component</mime-type>
 </mime-mapping>
 <!-- Index file def -->
 <welcome-file-list>
  <welcome-file>index.xhtml</welcome-file>
 </welcome-file-list>
 <!-- Server error page -->
 <error-page>
  <error-code>500</error-code>
  <location>/error.xhtml</location>
 </error-page>
 <!-- File not found page -->
 <error-page>
  <error-code>404</error-code>
  <location>/resourceNotFound.xhtml</location>
 </error-page>
 <!-- Unathorised pages -->
 <error-page>
  <error-code>401</error-code>
  <location>/notAuthorised.xhtml</location>
 </error-page>
 <error-page>
  <error-code>403</error-code>
  <location>/index.xhtml</location>
 </error-page>
</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:34:39.083

您`LocaleResolver`正在作为未通过标准 JSF Servlet 路由的单独 Servlet 请求的一部分被调用。发生这种情况时，Seam 拦截器不会被触发，并且不会发生双射。

为了解决这个问题，你需要通知 Seam 关​​于传入的请求，以便它正确地设置它的上下文（注意你需要关闭生命周期，所以返回获取的值是不行的）：

```
ServletLifecycle.beginRequest(request);
String locale = LocaleSelector.instance().getLocaleString();
ServletLifecycle.endRequest();
return locale; 
```

或者，您可以使用提供的`ContextualHttpServletRequest`类，它以更简洁的方式执行相同的操作（在`finally`块中关闭生命周期等）：

```
final String[] locale = new String[1];
new ContextualHttpServletRequest(request) {
    @Override
    public void process() throws ServletException, IOException {
        // Do the things that need to access Seam contexts within this function:
        locale[0] = LocaleSelector.instance().getLocaleString();
    }
}.run();
return locale[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:45:07.263

好的，我通过手动查找组件而不是使用以下注入解决了这个问题

```
public class LocaleResolver implements net.jawr.web.resource.bundle.locale.LocaleResolver {

    public LocaleResolver() {}

    public String resolveLocaleCode(HttpServletRequest request) {
        //Lookup component manually as not part of SEAM lifecycle
        LocaleSelector localeSelector = (LocaleSelector)Contexts.getSessionContext().get(LocaleSelector.class);
        if(localeSelector!=null){
            return localeSelector.getLocaleString();
        }else{
            return request.getLocale().toString();
        }   
    }
} 
```

我相信这是因为实施的 LocaleResolver 不是接缝生命周期的一部分，因此不会被拦截，但我可能是错的......？

# linux - 如何逐步调试没有符号或部分的程序集二进制文件？

> ID：15974462
> 
> 赞同：2
> 
> 时间：2013-04-12T14:49:49.967
> 
> 标签：linux, debugging, assembly, x86

考虑以下 NASM 代码：

```
 BITS 32

                org     0x08048000

  ehdr:                                                 ; Elf32_Ehdr
                db      0x7F, "ELF", 1, 1, 1, 0         ;   e_ident
        times 8 db      0
                dw      2                               ;   e_type
                dw      3                               ;   e_machine
                dd      1                               ;   e_version
                dd      _start                          ;   e_entry
                dd      phdr - $$                       ;   e_phoff
                dd      0                               ;   e_shoff
                dd      0                               ;   e_flags
                dw      ehdrsize                        ;   e_ehsize
                dw      phdrsize                        ;   e_phentsize
                dw      1                               ;   e_phnum
                dw      0                               ;   e_shentsize
                dw      0                               ;   e_shnum
                dw      0                               ;   e_shstrndx

  ehdrsize      equ     $ - ehdr

  phdr:                                                 ; Elf32_Phdr
                dd      1                               ;   p_type
                dd      0                               ;   p_offset
                dd      $$                              ;   p_vaddr
                dd      $$                              ;   p_paddr
                dd      filesize                        ;   p_filesz
                dd      filesize                        ;   p_memsz
                dd      5                               ;   p_flags
                dd      0x1000                          ;   p_align

  phdrsize      equ     $ - phdr

  _start:

                xor     eax, eax ;now just return to system with ebx
                inc     eax
                int     0x80

  ; your program here

  filesize      equ     $ - $$ 
```

如何调试这样结构的程序？最好我正在寻找一个 GDB 解决方案，它可以让我逐步运行汇编指令，允许在每一步预览寄存器。当我想在那里设置基于内存的断点时，会发生以下情况：

```
[localhost.localdomain][/tmp] $ gdb ./a.out 
GNU gdb (GDB) Fedora (7.5.1-37.fc18)
Copyright (C) 2012 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-redhat-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /tmp/a.out...(no debugging symbols found)...done.
(gdb) break 0x08048054
No symbol table is loaded.  Use the "file" command.
Make breakpoint pending on future shared library load? (y or [n]) n
(gdb) list breakpoints
No symbol table is loaded.  Use the "file" command. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:58:05.483

在特定地址设置断点的命令应该`break *0x08048054`在您的示例中。对于单步执行二进制文件，您可以使用`stepi`（步骤指令）命令。

# jquery-ui - 当带有类别的 JQuery UI 自动完成时，如何自定义格式化不同的类别？

> ID：15974468
> 
> 赞同：1
> 
> 时间：2013-04-12T14:49:58.847
> 
> 标签：jquery-ui, jquery-events, jquery-ui-autocomplete

将 JQueryUI 自动完成与类别一起使用时，如何自定义格式化不同类别？

JQueryUI 创建一个 ul 附加到`#menu-container <div>`. 下面的脚本只是用按类别排序的行项目填充该 ul。我想要做的是向该类别添加一个类，以便我可以使用单独的 css 对其进行格式化。

这是生成的html：

```
<ul class="ui-autocomplete">
<li class="ui-autocomplete-category">Activities</li>
<li class="ui-menu-item" role="menuitem"><a class="ui-corner-all" tabindex="-1">andhhx10</a></li>
<li class="ui-menu-item" role="menuitem"><a class="ui-corner-all" tabindex="-1">andk K12</a></li>
<li class="ui-menu-item" role="menuitem"><a class="ui-corner-all" tabindex="-1">andttop C13</a></li>
<li class="ui-menu-item" role="menuitem"><a class="ui-corner-all" tabindex="-1">andttop C11</a></li>
<li class="ui-menu-item" role="menuitem"><a class="ui-corner-all" tabindex="-1">anders andersson</a></li>
<li class="ui-menu-item" role="menuitem"><a class="ui-corner-all" tabindex="-1">andreas andersson</a></li>
<li class="ui-menu-item" role="menuitem"><a class="ui-corner-all" tabindex="-1">andreas johnson</a></li>
<li class="ui-autocomplete-category">Vendors</li>
<li class="ui-menu-item" role="menuitem"><a class="ui-corner-all" tabindex="-1">anders</a></li>
<li class="ui-menu-item" role="menuitem"><a class="ui-corner-all" tabindex="-1">andreas</a></li>
</ul> 
```

这是用于生成列出的自动完成类别的 jquery-ui：

```
<script>
$.widget( "custom.catcomplete", $.ui.autocomplete, {
  _renderMenu: function( ul, items ) {
   var self = this,
    currentCategory = "";
   $.each( items, function( index, item ) {
    if ( item.category != currentCategory ) {
     ul.append( "<li class='ui-autocomplete-category'>" + item.category + "</li>" );
     currentCategory = item.category;
    }
    self._renderItem( ul, item );
   });
  }
 });
</script>
<script>
var data = [

            { label: "andhhx10", category: "Activities" },
            { label: "andk K12", category: "Activities" },
            { label: "andttop C13", category: "Activities" }, 
            { label: "andttop C11", category: "Activities" }, 
            { label: "anders andersson", category: "Activities" },
            { label: "andreas andersson", category: "Activities" },
            { label: "andreas johnson", category: "Activities" },
            { label: "anders", category: "Vendors" },
            { label: "andreas", category: "Vendors" },
            { label: "antal", category: "Vendors" },
];

$( "#UserActivity" ).catcomplete({
    source: data,
    appendTo: '#menu-container',
});

</script> 
```

更新，我添加了以下代码行，但该类未附加到行项目。

```
$('#menu-container ul li:contains(Vendors)').addClass('ui-auto-vendors'); 
```

Update2：JSFiddle 示例：http: [//jsfiddle.net/changhaobyu/RhHpd/](http://jsfiddle.net/changhaobyu/RhHpd/)

Update3：我的下一个问题是我没有附加事件处理程序。在自动完成列表用项目填充 ul 后，JQuery 需要触发。我会先谷歌这个，如果我没有找到任何东西，我会在这里问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:04:17.663

您最初的[jsfiddle](http://jsfiddle.net/dirtyd77/RhHpd/5/)有效，您只需要添加`jQuery script`. `li`以下是使用 查找的文本的几种方法[`.filter()`](http://api.jquery.com/filter/)：

```
$('.ui-autocomplete-category').filter(':contains(Vendors)').addClass('ui-auto-vendors'); 
```

演示：http: [//jsfiddle.net/dirtyd77/RhHpd/3/](http://jsfiddle.net/dirtyd77/RhHpd/3/)

* * *

```
$('.ui-autocomplete-category').filter(function() { 
    return $.text([this]) == 'Vendors'; 
}).addClass('ui-auto-vendors'); 
```

演示：http: [//jsfiddle.net/dirtyd77/RhHpd/4/](http://jsfiddle.net/dirtyd77/RhHpd/4/)

# java - 将 PostgreSQL JSON 列映射到 Hibernate 实体属性

> ID：15974474
> 
> 赞同：88
> 
> 时间：2013-04-12T14:50:17.740
> 
> 标签：java, json, hibernate, postgresql, jpa

我的 PostgreSQL DB (9.2) 中有一个 JSON 类型的表。我很难将此列映射到 JPA2 实体字段类型。

我尝试使用字符串，但是当我保存实体时，我得到一个异常，它无法将不同的字符转换为 JSON。

处理 JSON 列时使用的正确值类型是什么？

```
@Entity
public class MyEntity {

    private String jsonPayload; // this maps to a json column

    public MyEntity() {
    }
} 
```

一个简单的解决方法是定义一个文本列。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-04-16T23:45:45.070

如果您有兴趣，这里有一些代码片段可以让 Hibernate 自定义用户类型就位。首先扩展 PostgreSQL 方言来告诉它 json 类型，感谢 Craig Ringer 的 JAVA_OBJECT 指针：

```
import org.hibernate.dialect.PostgreSQL9Dialect;

import java.sql.Types;

/**
 * Wrap default PostgreSQL9Dialect with 'json' type.
 *
 * @author timfulmer
 */
public class JsonPostgreSQLDialect extends PostgreSQL9Dialect {

    public JsonPostgreSQLDialect() {

        super();

        this.registerColumnType(Types.JAVA_OBJECT, "json");
    }
} 
```

接下来实现 org.hibernate.usertype.UserType。下面的实现将字符串值映射到 json 数据库类型，反之亦然。记住字符串在 Java 中是不可变的。也可以使用更复杂的实现将自定义 Java bean 映射到存储在数据库中的 JSON。

```
package foo;

import org.hibernate.HibernateException;
import org.hibernate.engine.spi.SessionImplementor;
import org.hibernate.usertype.UserType;

import java.io.Serializable;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Types;

/**
 * @author timfulmer
 */
public class StringJsonUserType implements UserType {

    /**
     * Return the SQL type codes for the columns mapped by this type. The
     * codes are defined on <tt>java.sql.Types</tt>.
     *
     * @return int[] the typecodes
     * @see java.sql.Types
     */
    @Override
    public int[] sqlTypes() {
        return new int[] { Types.JAVA_OBJECT};
    }

    /**
     * The class returned by <tt>nullSafeGet()</tt>.
     *
     * @return Class
     */
    @Override
    public Class returnedClass() {
        return String.class;
    }

    /**
     * Compare two instances of the class mapped by this type for persistence "equality".
     * Equality of the persistent state.
     *
     * @param x
     * @param y
     * @return boolean
     */
    @Override
    public boolean equals(Object x, Object y) throws HibernateException {

        if( x== null){

            return y== null;
        }

        return x.equals( y);
    }

    /**
     * Get a hashcode for the instance, consistent with persistence "equality"
     */
    @Override
    public int hashCode(Object x) throws HibernateException {

        return x.hashCode();
    }

    /**
     * Retrieve an instance of the mapped class from a JDBC resultset. Implementors
     * should handle possibility of null values.
     *
     * @param rs      a JDBC result set
     * @param names   the column names
     * @param session
     * @param owner   the containing entity  @return Object
     * @throws org.hibernate.HibernateException
     *
     * @throws java.sql.SQLException
     */
    @Override
    public Object nullSafeGet(ResultSet rs, String[] names, SessionImplementor session, Object owner) throws HibernateException, SQLException {
        if(rs.getString(names[0]) == null){
            return null;
        }
        return rs.getString(names[0]);
    }

    /**
     * Write an instance of the mapped class to a prepared statement. Implementors
     * should handle possibility of null values. A multi-column type should be written
     * to parameters starting from <tt>index</tt>.
     *
     * @param st      a JDBC prepared statement
     * @param value   the object to write
     * @param index   statement parameter index
     * @param session
     * @throws org.hibernate.HibernateException
     *
     * @throws java.sql.SQLException
     */
    @Override
    public void nullSafeSet(PreparedStatement st, Object value, int index, SessionImplementor session) throws HibernateException, SQLException {
        if (value == null) {
            st.setNull(index, Types.OTHER);
            return;
        }

        st.setObject(index, value, Types.OTHER);
    }

    /**
     * Return a deep copy of the persistent state, stopping at entities and at
     * collections. It is not necessary to copy immutable objects, or null
     * values, in which case it is safe to simply return the argument.
     *
     * @param value the object to be cloned, which may be null
     * @return Object a copy
     */
    @Override
    public Object deepCopy(Object value) throws HibernateException {

        return value;
    }

    /**
     * Are objects of this type mutable?
     *
     * @return boolean
     */
    @Override
    public boolean isMutable() {
        return true;
    }

    /**
     * Transform the object into its cacheable representation. At the very least this
     * method should perform a deep copy if the type is mutable. That may not be enough
     * for some implementations, however; for example, associations must be cached as
     * identifier values. (optional operation)
     *
     * @param value the object to be cached
     * @return a cachable representation of the object
     * @throws org.hibernate.HibernateException
     *
     */
    @Override
    public Serializable disassemble(Object value) throws HibernateException {
        return (String)this.deepCopy( value);
    }

    /**
     * Reconstruct an object from the cacheable representation. At the very least this
     * method should perform a deep copy if the type is mutable. (optional operation)
     *
     * @param cached the object to be cached
     * @param owner  the owner of the cached object
     * @return a reconstructed object from the cachable representation
     * @throws org.hibernate.HibernateException
     *
     */
    @Override
    public Object assemble(Serializable cached, Object owner) throws HibernateException {
        return this.deepCopy( cached);
    }

    /**
     * During merge, replace the existing (target) value in the entity we are merging to
     * with a new (original) value from the detached entity we are merging. For immutable
     * objects, or null values, it is safe to simply return the first parameter. For
     * mutable objects, it is safe to return a copy of the first parameter. For objects
     * with component values, it might make sense to recursively replace component values.
     *
     * @param original the value from the detached entity being merged
     * @param target   the value in the managed entity
     * @return the value to be merged
     */
    @Override
    public Object replace(Object original, Object target, Object owner) throws HibernateException {
        return original;
    }
} 
```

现在剩下的就是注释实体了。在实体的类声明中添加如下内容：

```
@TypeDefs( {@TypeDef( name= "StringJsonObject", typeClass = StringJsonUserType.class)}) 
```

然后注释属性：

```
@Type(type = "StringJsonObject")
public String getBar() {
    return bar;
} 
```

Hibernate 将负责为您创建 json 类型的列，并处理来回映射。将额外的库注入到用户类型实现中以获得更高级的映射。

如果有人想玩它，这里有一个快速示例 GitHub 项目：

[https://github.com/timfulmer/hibernate-postgres-jsontype](https://github.com/timfulmer/hibernate-postgres-jsontype)

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-04-13T02:03:32.927

[请参阅 PgJDBC 错误 #265](https://github.com/pgjdbc/pgjdbc/issues/265)。

PostgreSQL 对数据类型转换过于严格，令人讨厌。它甚至不会隐式`text`转换为类似文本的值，例如`xml`和`json`。

解决这个问题的严格正确的方法是编写一个使用 JDBC`setObject`方法的自定义 Hibernate 映射类型。这可能有点麻烦，因此您可能只想通过创建较弱的演员表来降低 PostgreSQL 的严格性。

正如@markdsievers 在评论和[这篇博](http://www.pateldenish.com/2013/05/inserting-json-data-into-postgres-using-jdbc-driver.html)文中所指出的，这个答案中的原始解决方案绕过了 JSON 验证。所以这不是你真正想要的。写起来更安全：

```
CREATE OR REPLACE FUNCTION json_intext(text) RETURNS json AS $$
SELECT json_in($1::cstring); 
$$ LANGUAGE SQL IMMUTABLE;

CREATE CAST (text AS json) WITH FUNCTION json_intext(text) AS IMPLICIT; 
```

`AS IMPLICIT`告诉 PostgreSQL 它可以在没有被明确告知的情况下进行转换，从而允许这样的事情起作用：

```
regress=# CREATE TABLE jsontext(x json);
CREATE TABLE
regress=# PREPARE test(text) AS INSERT INTO jsontext(x) VALUES ($1);
PREPARE
regress=# EXECUTE test('{}')
INSERT 0 1 
```

感谢@markdsievers 指出问题。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2016-06-21T13:58:21.460

## Maven依赖

您需要做的第一件事是在项目配置文件中设置以下[Hibernate Types](https://github.com/vladmihalcea/hibernate-types/) Maven 依赖项：`pom.xml`

```
<dependency>
    <groupId>com.vladmihalcea</groupId>
    <artifactId>hibernate-types-52</artifactId>
    <version>${hibernate-types.version}</version>
</dependency> 
```

## 领域模型

现在，您需要`JsonType`在类级别或**package-info.java**包级别描述符中声明 ，如下所示：

```
@TypeDef(name = "json", typeClass = JsonType.class) 
```

而且，实体映射将如下所示：

```
@Type(type = "json")
@Column(columnDefinition = "jsonb")
private Location location; 
```

如果您使用的是 Hibernate 5 或更高版本，则`JSON`类型会由[`Postgre92Dialect`](https://hibernate.atlassian.net/browse/HHH-9167).

否则，您需要自己注册：

```
public class PostgreSQLDialect extends PostgreSQL91Dialect {

    public PostgreSQL92Dialect() {
        super();
        this.registerColumnType( Types.JAVA_OBJECT, "jsonb" );
    }
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-05-04T05:27:53.157

如果有人感兴趣，您可以将 JPA 2.1 `@Convert`/`@Converter`功能与 Hibernate 一起使用。不过，您必须使用*pgjdbc-ng* JDBC 驱动程序。这样，您不必在每个字段中使用任何专有扩展、方言和自定义类型。

```
@javax.persistence.Converter
public static class MyCustomConverter implements AttributeConverter<MuCustomClass, String> {

    @Override
    @NotNull
    public String convertToDatabaseColumn(@NotNull MuCustomClass myCustomObject) {
        ...
    }

    @Override
    @NotNull
    public MuCustomClass convertToEntityAttribute(@NotNull String databaseDataAsJSONString) {
        ...
    }
}

...

@Convert(converter = MyCustomConverter.class)
private MyCustomClass attribute; 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-12-07T17:12:10.423

试了很多网上找的方法，大部分都不行，有些太复杂了。如果您对 PostgreSQL 类型验证没有那么严格的要求，下面的一个对我有用，并且更简单。

使 PostgreSQL jdbc 字符串类型为未指定，例如 `<connection-url> jdbc:postgresql://localhost:test?stringtype=‌​unspecified </connect‌​ion-url>`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-09-30T13:09:11.810

在执行检索投影中的 json 字段的本机查询（通过 EntityManager）时，尽管 Entity 类已经用 TypeDefs 注释。在 HQL 中翻译的相同查询执行没有任何问题。为了解决这个问题，我不得不以这种方式修改 JsonPostgreSQLDialect：

```
public class JsonPostgreSQLDialect extends PostgreSQL9Dialect {

public JsonPostgreSQLDialect() {

    super();

    this.registerColumnType(Types.JAVA_OBJECT, "json");
    this.registerHibernateType(Types.OTHER, "myCustomType.StringJsonUserType");
} 
```

其中 myCustomType.StringJsonUserType 是实现 json 类型的类的类名（从上面，Tim Fulmer 回答）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-02-03T20:05:32.200

有一个更容易做到这一点，它不涉及通过使用创建函数[`WITH INOUT`](https://www.postgresql.org/docs/current/static/sql-createcast.html)

```
CREATE TABLE jsontext(x json);

INSERT INTO jsontext VALUES ($${"a":1}$$::text);
ERROR:  column "x" is of type json but expression is of type text
LINE 1: INSERT INTO jsontext VALUES ($${"a":1}$$::text);

CREATE CAST (text AS json)
  WITH INOUT
  AS ASSIGNMENT;

INSERT INTO jsontext VALUES ($${"a":1}$$::text);
INSERT 0 1 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-04-23T22:29:26.487

我遇到了这个问题，不想通过连接字符串启用东西，并允许隐式转换。起初我尝试使用@Type，但因为我使用自定义转换器来序列化/反序列化映射到 JSON 的映射，所以我无法应用 @Type 注释。原来我只需要在我的 @Column 注释中指定 columnDefinition = "json" 。

```
@Convert(converter = HashMapConverter.class)
@Column(name = "extra_fields", columnDefinition = "json")
private Map<String, String> extraFields; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-03-19T07:31:04.933

以上所有解决方案都对我不起作用。最后，我使用本机查询来插入数据。

步骤 -1 创建一个抽象类 AbstractEntity ，它将使用注释 @MappedSuperclass（javax.persistence 的一部分）实现 Persistable 步骤 -2 在此类中创建您的序列生成器，因为您无法使用本机查询生成序列器。@Id @GeneratedValues @Column private Long seqid;

不要忘记 - 你的实体类应该扩展你的抽象类。（帮助您的序列正常工作，它也可以在日期上工作（检查日期，我不确定））

第 3 步在 repo 界面中编写本机查询。

value="INSERT INTO table(?,?)values(:?,:cast(:jsonString as json))",nativeQuery=true

步骤 - 4 这会将您的 java 字符串对象转换为 json 并在数据库中插入/存储，并且您还可以在每次插入时增加序列。

使用转换器时出现转换错误。我个人也避免在我的项目中使用 type-52。如果它对你们有用，请支持我的ans。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-19T05:59:14.673

当我将项目从 MySQL 8.0.21 迁移到 Postgres 13 时遇到了这个问题。我的项目使用带有 Hibernate 类型依赖项版本 2.7.1 的 Spring Boot。就我而言，解决方案很简单。 [![在此处输入图像描述](https://i.stack.imgur.com/Z2rBO.png)](https://i.stack.imgur.com/Z2rBO.png)

我需要做的就是改变它并且它起作用了。

引用自[Hibernate Types Documentation 页面](https://github.com/vladmihalcea/hibernate-types)。

# sql - 在插入期间选择有错误的行

> ID：15974475
> 
> 赞同：1
> 
> 时间：2013-04-12T14:50:21.377
> 
> 标签：sql, sql-server, select, insert

在 SQL Server 中，当我尝试使用表中的直接选择语句插入时，出现错误

```
Conversion failed when converting the nvarchar value 'CLONED' to data type int. 
```

有什么办法可以看到引发此错误的特定行？

```
insert into manual_defect SELECT <long list of columns> from xyztable 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:33:05.607

您从 xyztable 中选择的列之一是 nvarchar 类型，而 manual_defect 中的匹配列是 int。您需要在 xyztable 中找到该列中包含不会转换为 int 的内容的行。

```
SELECT * FROM xyztable WHERE NOT ISNUMERIC(yournvarcharcolumn + '.0e0') 
```

IsNumeric 检查一个值（在本例中为字符串）是否可以转换为数字类型。通过在检查之前附加“.0e0”，我们确保只有整数可以工作，因为当您将其添加到末尾时，字符串格式的任何其他数字类型都不再是有效的数字类型。

如果您真的只想找到引发您引用的错误的单行，那么这将更快地工作：

```
SELECT * FROM xyztable WHERE yournvarcharcolumn = 'CLONED' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:54:21.480

您可以使用尝试捕获并丢弃行号，但我发现快速调试的最佳方法是选择前 1000 个，然后选择 100 个并继续这样做，直到找到导致问题的行。只是一个建议

# wxpython - wxpython 控件类似于选项卡式窗格

> ID：15974476
> 
> 赞同：0
> 
> 时间：2013-04-12T14:50:23.543
> 
> 标签：wxpython

是否有任何看起来像选项卡面板的 Wxpython 控件...我可以使用笔记本但我无法关闭页面..我需要类似于 IE 的东西，您可以在其中打开新选项卡并在不需要时关闭它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:59:30.710

看看 agw.flatnotebook。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:39:24.123

虽然 FlatNoteBook 是一个不错的选择，但我认为 agw.aui.AuiNotebook 更好：

*   [http://wiki.wxpython.org/AuiNotebook%20%28AGW%29](http://wiki.wxpython.org/AuiNotebook%20%28AGW%29)
*   [http://www.blog.pythonlibrary.org/2009/12/09/the-%E2%80%9Cbook%E2%80%9D-controls-of-wxpython-part-2-of-2/](http://www.blog.pythonlibrary.org/2009/12/09/the-%E2%80%9Cbook%E2%80%9D-controls-of-wxpython-part-2-of-2/)

# servlets - 强制 servlet 从 URL 返回任何内容，而不是 java.io.IOException？

> ID：15974478
> 
> 赞同：1
> 
> 时间：2013-04-12T14:50:29.293
> 
> 标签：servlets

为了对抗同源策略，我创建了一个 Java Servlet，它充当我的 AJAX 请求的代理服务器，以从其他位置获取 XML。

问题是任何 HTTP 错误响应都没有返回到我的客户端，而是被捕获为异常并被记录。

我如何强制 servlet 返回它找到的任何内容，无论是 404、500 等。

这是我日志中的一个示例

```
java.io.IOException: Server returned HTTP response code: 500 for URL: 
```

或 `java.io.IOException: Server returned HTTP response code: 403 for URL`：

这是我的代码：

```
String url = "http://www.test.com/test.xml";
URL kcim = new URL(url);

        URLConnection kciconn = kcim.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(kciconn.getInputStream()));
        String inputLine;
        PrintWriter out = kciResponse.getWriter();

        while ((inputLine = in.readLine()) != null)
        {
            //output to client
            out.println(inputLine);

        }

    //close output stream
    System.in.close();
    in.close(); 
```

因此，总而言之，当我的 servlet 收到 HTTP 错误代码时，它最终会自行中断，导致我从 servlet 收到 HTTP 500 Server 错误，而不是来自被访问资源的真正 HTTP 代码。

如何阻止它破坏并强制 servlet 返回它返回的任何内容？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:48:54.663

1.  使用 HttpURLConnection 而不是 URLConnection
2.  在您的代理 servlet 中，无论是否引发异常，都调用：

    response.setStatus(httpURLConnection.getResponseCode());

干杯:^)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:58:11.967

# 代理人

您没有处理目标服务器发送的响应状态代码或处理它们发送的标头，因此客户端永远无法看到它们。使用 apache HTTP 客户端，您可以解决这个问题。下面的代码片段处理状态代码并读取响应标头（但未设置任何标头）。您可以将其用作模板并根据需要进行修改。例如 URL`https://github.com/thisurldoesnotexist`不存在，响应状态码正确设置为`404`。我假设 API 调用是`GET`s。

```
@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException
{
    HttpClient client = new DefaultHttpClient();
    HttpGet request = new HttpGet("https://github.com/thisurldoesnotexist");
    HttpResponse response = client.execute(request);
    StatusLine statusLine = response.getStatusLine();

    // Echo whatever headers you are interested in.
    Header[] allHeaders = response.getAllHeaders();

    resp.setStatus(statusLine.getStatusCode());
    BufferedWriter bufferedWriter = null;
    try
    {
        bufferedWriter = new BufferedWriter(resp.getWriter());
        InputStream content = response.getEntity().getContent();
        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(content,"UTF-8"));
        String temp = null;

        while((temp = bufferedReader.readLine()) != null)
        {
            bufferedWriter.write(temp);
            bufferedWriter.newLine();
        }
    }
    catch (Exception e)
    {
        resp.setStatus(500);
        // handle the exception
    }
    finally
    {
        if(bufferedWriter != null)
        {
            bufferedWriter.flush();
            bufferedWriter.close();
        }
    }
} 
```

# JSONP

虽然该片段可以解决您的问题，但我建议您也看看[JSONP](http://en.wikipedia.org/wiki/JSONP)。如果您的第三方提供商可以将 JS 包装在[JSONP 中，那将是一个更优雅的解决方案](http://www.codeproject.com/Articles/42641/JSON-to-JSONP-Bypass-Same-Origin-Policy)。我会多写一些关于使用 JSONP 的好处，但我链接到的文章在比较基于代理的解决方案和 JSONP 方面做得很好。

# wso2 - 集成 WSO2 ESB 4.6.0 和 BPS 3.0.0

> ID：15974483
> 
> 赞同：0
> 
> 时间：2013-04-12T14:50:37.460
> 
> 标签：wso2, wso2esb

我正在使用最新版本的 ESB 和 BPS，并希望将它们一起安装（而不是单独安装）。我尝试将 ESB 作为功能包安装在 BPS 上，反之亦然，两者都使用功能管理 UI，但我似乎在存储库中找不到任何一个。

是否有我缺少的存储库，或者手动执行此操作的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:39:47.483

您可以将[http://dist.wso2.org/p2/carbon/releases/4.0.2/](http://dist.wso2.org/p2/carbon/releases/4.0.2/)用于 BPS 3.0.0 功能。

ESB 4.6.0 功能将基于[http://dist.wso2.org/p2/carbon/releases/4.0.5/](http://dist.wso2.org/p2/carbon/releases/4.0.5/)。

# java - Java中的getter和setter

> ID：15974486
> 
> 赞同：1
> 
> 时间：2013-04-12T14:50:42.010
> 
> 标签：java, get, set

我很陌生`Java`，我正在尝试理解一些概念。我一直在读几本书，但我一直在同一个地方难过。看下面的代码：

```
package Grade;
import static java.lang.System.out;
import java.util.*;

public class GradeBook {

private String courseName;

public void setCourseName (String name) {
    courseName = name;

}
public String getCourseName() {
    return courseName;
}

public void Display() // needs a string to run
{
out.println("Welcome to:" + getCourseName() );  
}
} 
```

我不确定为什么`setCourseName()`需要（ String name ）在那里，或者它甚至从哪里获得该值。如果有人可以尝试用外行的方式解释这一点，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T15:15:52.933

## 成绩册的故事

**GradeBook**有一个秘密。它是名为**courseName**`private`的成员变量。

 **![在此处输入图像描述](https://i.stack.imgur.com/ugAtp.png)

**成绩簿：**除了我，没有人接触过这个变量！

敲，敲。是**教师**课。

**老师：**嘿，我发现你是**GradeBook**班，我给你布置今天的课程。我想你有一个`courseName`变量？

**成绩簿：**不，我没有！（*吞咽*）

*想着......嗯，我怎么能保守秘密，但仍然让她给我这个课程名称？我非常需要那个。*

**成绩簿：**好的，你差点把我弄到那里。我不会告诉你我是否有一个`courseName`变量，那太个人化了。但是你可以在方法中写下课程`setCourseName`。可以吗？我会从那里处理它。:)

## 实际上...

没有人强迫您编写*setCourseName*。你的程序会运行得很好。您可以选择制作 courseName `public`。

```
public String courseName; 
```

**但这是一个很大的 BUT：**这无异于把你的日记放在草坪上，让你的邻居或任何路人随心所欲。你不会这样做对吗？

**封装**，用外行的话来说。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T14:53:09.363

欢迎来到面向对象编程。您的成员变量 courseName 是私有的，不能从外部访问。

要提供对 courseName 变量的读取访问权限，您需要提供一个 getter 方法：

```
public String getCourseName() { ... } 
```

并提供对 courseName 的写访问权限，您需要提供一个 setter 方法：

```
public void setCourseName (String name) { ... } 
```

这里名称作为参数传递给 setter 方法，该方法用于将值设置为私有变量`courseName`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T15:07:18.477

您需要对此类使用 getter 和 setter 方法，因为该`courseName`字段是私有的；类外的代码不能直接访问该字段。使用该类的其他代码（通常称为*客户端代码*）将提供传递给的参数值`setCourseName`并使用返回的值`getCourseName`。

通过这个简单的示例，很难理解为什么会这样设计这个类。可以很容易地创建`courseName`一个公共字段并让客户端代码直接操作它。然而，随着类变得越来越复杂，使用 get/set 样式提供了许多优点。这里有一些：

*   使用 getter/setter 方法有助于将客户端代码与类实现方式的更改隔离开来。例如，您可能稍后决定课程名称具有某种内部结构，并且您希望将名称的各个部分保留在单独的字段中。您将能够简单地更改实现方式`setCourseName`和`getCourseName`实现方式，并且不需要更新客户端代码。

*   自动化软件生成工具依赖于属性 getter 和 setter 的存在。使用这些工具，您可以简单地将您的类建模为具有“courseName”属性，它将生成使用适当方法的代码。

*   稍后您可能会决定更改课程名称会产生某些副作用（例如在某处更新课程目录）。可以通过修改`setCourseName`方法来实现这些依赖关系。

一般的面向对象编程，默认的设计应该是尽可能的隐藏类的实现，只通过方法暴露类。有时有充分的理由违反这一原则，但坚持它往往会产生更强大的软件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T14:53:01.937

这个类本身从不使用`setCourseName`，但理论上它可以用来改变私有变量`courseName`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T14:55:11.400

请阅读`encapsulation`和`data abstraction`。在那个程序的某个地方，有人正在实例化`GradeBook`类，然后实例化`setting`它的成员变量。一个样本是：

```
package Grade;  
import static java.lang.System.out;
import java.util.*;

class GradeBook {

    private String courseName;

    public void setCourseName (String name) {
       courseName = name;

    }
    public String getCourseName() {
      return courseName;
    }

   public void display()
   {
      out.println("Welcome to:" + getCourseName() );  
   }
}

public class Main {
  public static void main(String[] s) {
   // creating instance of GradeBook class
   GradeBook gb = new GradeBook(); 
   // assigning value to the instance variable 'courseName' using setter 
   // as it a private member and cannot be accessed outside the class definition.
   gb.setCourseName("java");
   // calls a public method to display the value.
   gb.display();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-12T14:55:57.327

原因是您无法从班级外部访问私有属性 (courseName)。get 和 set 方法分别用于访问（get）和更改（set）其值。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-12T15:17:09.567

我最初发表了评论。但我决定发布一个答案，因为我相信很多人都误读了这个问题。

看起来您实际上是在询问`parameters`它们以及它们的用途，而不是关于 getter、setter 和封装。

我做了一些搜索，发现了这个链接： http: [//www.homeandlearn.co.uk/java/java_method_parameters.html](http://www.homeandlearn.co.uk/java/java_method_parameters.html)

这是 Java 初学者指南，专门解释了 Java 中的参数。

你用 Java 编写的`methods`代码有时需要值来完成他们的任务。您可能不希望您的方法拥有这些变量或继承这些变量，很多时候您只想为方法提供一个变量，以便它可以暂时将其用于快速任务或流程，然后返回一个值。那就是`String name`你在方法定义中看到的，它是一个参数，一个传递给方法的变量。您可以将任意数量的变量传递给方法。变量将按照您定义方法的方式进行分配。

例如，如果您定义：

```
public void myMethod(String one, String two, String three) {
    some code;
} 
```

然后你像这样调用那个方法：

```
myMethod("one", "two", "three"); 
```

然后在 myMethod 中，您现在可以使用变量`one`、`two`和`three`访问这些字符串值。

java 类就是为什么要传入一个值而不是让方法通过类访问它的一个例子`Math`。当您打电话时，`Math.floor(decimalValue)`您想给 Math 类您的 decimalValue 并让 Math 类使用它来确定地板，然后将其返回给您。你不想编写你的程序，以便数学类和其他所有东西都可以一直访问你`decimalValue`。

这是否说明了一切？**

# python - 从文本文件中选择特定的信息并将它们转换为 python 中的数组/列表

> ID：15974487
> 
> 赞同：1
> 
> 时间：2013-04-12T14:50:43.677
> 
> 标签：python

我有这个项目，我必须用 Python 编写代码，但对于一个初学者来说非常困难。基本上，我从来没有用过python编程，从昨天开始才开始用谷歌学习它，所以我想也许你们可以帮忙，因为我什至无法开始解决这个问题。

我得到了一个初始文本文件，我们称之为 input.txt，其中包含以下数据：

```
Thomas Hales
12 2345 
45 6780
63 3210
Peter Lebones
10 15430
11  1230
23 3450
John White
2 12130
11 32410
15 4520 
```

在它们下面有给定的名称和数字。左栏中的数字只是用于此问题的标识号。右栏中的数字是人们在银行投资的金额。

我应该获取文本文件中的所有数据，以某种方式对其进行操作，然后创建一个名为 output.txt 的新文本文件（所有这些都由 python 运行的脚本完成），对于上面的示例，包含这个：

```
Thomas Hales 45
Peter Lebones 10
John White 11 
```

到目前为止我所拥有的（但它根本不起作用。再加上一团糟，我是在某人的帮助下完成的，他也不知道他在做什么）：

```
import sys
import subprocess
import re
import string

try:
    fread=open(sys.argv[1]).readlines()
except IOError:
    print "There is no file like that!"
    sys.exit()
except IndexError:
    print "There is no argumentum given"
alpha = string.ascii_letters
writeout=open("result.txt","w")
inputarray=fread.readlines()
for ... in inputarray: # not sure what goes in the "..." part
    array=inputarray.split('\n')
for i in range(len(array)-1):
    if array[i].isalpha():
    writeout.write(array[i]+" ")

fread.close()
writeout.close() 
```

所以基本上，我得到了一个文本文件。然后，我应该为每个人选择他们的最高投资，并将左栏中的数字与所述最高投资相关联。然后我应该让脚本生成一个 output.txt，其中包含每个人的姓名和他们最高投资的“身份证号”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:10:21.677

我假设当一行以数字开头时，我们有一个投资，否则就是一个名字。

每次找到一个名字时，写下以前的名字和最高的投资标识符：

```
with open(sys.argv[1]) as inputfile, open("result.txt","w") as outputfile:
    name = None
    investment_id = max_investment = 0
    for line in inputfile:
        if not line.strip(): continue  # skip empty lines

        if not line[:1].isdigit():  # name
            if name and investment_id: 
                # write previous name
                outputfile.write('{} {}\n'.format(name, investment_id))
            name = line.strip()
            investment_id = max_investment = 0

        else:
            id, investment = [int(i) for i in line.split()]
            if investment > max_investment:
                max_investment = investment
                investment_id = id

    if name and investment_id: 
        # write last name
        outputfile.write('{} {}\n'.format(name, investment_id)) 
```

对于您的示例输入，它写道：

```
Thomas Hales 45
Peter Lebones 10
John White 11 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:24:17.543

```
 with open("input.txt", "r") as inp, open("output.txt", "w") as out:
       data = inp.readlines()
       for i in xrange(0, len(data), 4):
           name = data[i].strip()
           maxi = 0
           true_code = 0
           for item in data[i+1: i+4]:
              code, bal = item.strip().split(" ")
              code, bal = int(code), int(bal)
              if bal >= maxi:
                  maxi = bal
                  true_code = code
           out.write("%s %s" %(name, true_code)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T15:13:16.533

Perhaps this basic recipe for processing a file line by line will help get you started on the right foot.

```
import sys

file_name = sys.argv[1]

# This takes care of closing the file after we're done processing it.
with open(file_name) as file_handle:

    # Once we have a file handle, we can iterate over it.
    for line in file_handle:

        # This is where your real programming logic will go.
        # For now, we're just printing the input line.
        print line, 
```

I suspect you might also find `split()` to be useful, because it will allow you to break the numeric lines apart. For example, you could try this to experiment with how it works:

```
parts = line.split()
print parts 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T15:13:56.433

using the python re module may give you a nice launching platform, simply breaking down the lines into something you can iterate over.

```
>>> results = re.findall("(\w+) (\w+)",buff,re.S)
[('Thomas', 'Hales'), ('12', '2345'), ('45', '6780'), ('63', '3210'), ('Peter', 'Lebones'), ('10', '15430'), ('23', '3450'), ('John', 'White'), ('2', '12130'), ('11', '32410'), ('15', '4520')] 
```

# dynamics-crm-2011 - Ms Dynamics Crm 2011：来自桌面应用程序的基于浏览器的用户登录

> ID：15974492
> 
> 赞同：0
> 
> 时间：2013-04-12T14:50:51.967
> 
> 标签：dynamics-crm-2011

我们有一个场景，我们需要从桌面应用程序直接登录 Microsoft Dynamics Crm Web 应用程序。我们尝试了几种方法，例如从 url 登录，即在 url 中提供用户名和密码，并创建具有类似于 crm 登录页面但没有字段的网页成功。

注意：我们不需要护照身份验证方案，因为它仅用于桌面登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:07:46.777

如果这要回答这个问题，我不是 100%，因为没有太多关于您使用的语言、技术等的列表，但这可能是您正在寻找的。如果没有，请提供更多关于你在做什么，最好是一些示例代码。

假设您为您的应用程序使用 .NET，如果您下载 SDK，则有一些帮助 dll，其中一个提供了一个对话框，可让您连接到不同类型的 CRM 部署，包括 IFD、Windows、O365、live 等。

[这是关于它的SDK 文档](http://msdn.microsoft.com/en-us/library/microsoft.xrm.client.windows.controls.connectiondialog.connectiondialog.aspx)的链接，这里是一篇关于如何使用它的[好文章。](http://community.adxstudio.com/blogs/shan/2012-04-25-crm-connection-dialog/)

# ios - 将标量写入文件

> ID：15974493
> 
> 赞同：0
> 
> 时间：2013-04-12T14:50:52.143
> 
> 标签：ios, ios5, nsarray, plist

我有以下对象的数组：

```
@interface SACameraLocation : NSObject
{
    NSInteger locId;
    NSString *name;
    CLLocationCoordinate2D coordinate;
    NSInteger speed;
    NSInteger shootingMode;
    NSInteger side;
} 
```

然后我试图将数组写入 plist 文件：

```
if([arr writeToFile:path atomically:YES])
    NSLog(@"Write OK");
else
    NSLog(@"Write Fail"); 
```

我猜这是由于标量对象而失败的。将此类对象序列化/反序列化到文件的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:02:10.947

请阅读以下文档`NSArray writeToFile:atomically:`：

> 如果数组的内容都是属性列表对象（NSString, NSData, NSArray, 或 NSDictionary 对象），这个方法写入的文件可以通过类方法arrayWithContentsOfFile: 或者实例方法initWithContentsOfFile: 来初始化一个新数组。此方法在写出文件之前递归地验证所有包含的对象都是属性列表对象，如果所有对象都不是属性列表对象，则返回 NO，因为结果文件不是有效的属性列表。

您不能编写自定义对象数组。这就是它失败的原因。您可以让您的类符合`NSCoding`协议并实现两个必需的方法。然后你可以将你的对象转换为`NSData`using `NSKeyedArchiver`。或者您可以使用存档器一次对整个数组进行编码，然后写出一个`NSData`对象。

另一种选择是将您的对象转换为`NSDictionary`并写出这些字典的数组。

# ios - 分配配置文件中的读数

> ID：15974494
> 
> 赞同：1
> 
> 时间：2013-04-12T14:50:53.780
> 
> 标签：ios, instruments, xcode-instruments

当我使用分配配置文件测试我的应用程序时，我对 Instruments 中的读数有点困惑。该应用程序加载图片，然后调整它们的大小并将已经很小的图片保存在模型中。如果我查看分配跟踪，我可以看到内存使用量跳跃，并且在调整图片大小后内存使用量下降（很好），但同时表格视图“所有分配”中的读数保持不变 28.98 MB。那么为什么会这样，是否意味着我的应用程序仍然使用 28.98 MB？

如果有人知道如何使用 Instruments 的好文章，请分享。

![在此处输入图像描述](https://i.stack.imgur.com/WTuyb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:31:18.500

查看 Live Bytes 列，了解您的应用当前使用了多少内存。在您的屏幕截图中，您使用的是 1.34 MB 内存，而不是 28.98 MB。

总字节数列告诉您自仪器开始跟踪以来已分配了多少内存。释放内存时，总字节值不会下降。

# c - Pthreads矩阵乘法错误

> ID：15974499
> 
> 赞同：0
> 
> 时间：2013-04-12T14:51:07.017
> 
> 标签：c, matrix, segmentation-fault, pthreads

我想在我现有的串行矩阵乘法代码上使用 pthreads。我的目标是使用 pthreads 获得更好的执行时间，只是为了实现加速。但在那一点上，我被困住了。我的原始序列代码工作得很好，我在大约 15 秒内完成了 1000x1000 方阵乘法。但是当我执行我当前的 pthreads 程序时，我得到了一个分段错误。这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <assert.h>

int SIZE, NTHREADS;
int **A, **B, **C;

void init()
{
    int i, j;

    A = (int**)malloc(SIZE * sizeof(int *));
    for(i = 0; i < SIZE; i++)
        A[i] = malloc(SIZE * sizeof(int));

    B = (int**)malloc(SIZE * sizeof(int *));
    for(i = 0; i < SIZE; i++)
        B[i] = malloc(SIZE * sizeof(int));

    C = (int**)malloc(SIZE * sizeof(int *));
    for(i = 0; i < SIZE; i++)
        C[i] = malloc(SIZE * sizeof(int));

    srand(time(NULL));

    for(i = 0; i < SIZE; i++) {
        for(j = 0; j < SIZE; j++) {
            A[i][j] = rand()%100;
            B[i][j] = rand()%100;
        }
    }
}

void mm(int tid)
{
    int i, j, k;
    int start = tid * SIZE/NTHREADS;
    int end = (tid+1) * (SIZE/NTHREADS) - 1;

    for(i = start; i <= end; i++) {
        for(j = 0; j < SIZE; j++) {
            C[i][j] = 0;
            for(k = 0; k < SIZE; k++) {
                C[i][j] += A[i][k] * B[k][j];
            }
        }
    }
}

void *worker(void *arg)
{
    int tid = *((int *) arg);
    mm(tid);
}

int main(int argc, char* argv[])
{
    pthread_t* threads;
    int rc, i;

    if(argc != 3)
    {
        printf("Usage: %s <size_of_square_matrix> <number_of_threads>\n", argv[0]);
        exit(1);
    }

    SIZE = atoi(argv[1]);
    NTHREADS = atoi(argv[2]);
    init();
    threads = (pthread_t*)malloc(NTHREADS * sizeof(pthread_t));

    clock_t begin, end;
    double time_spent;

    begin = clock();

    for(i = 0; i < NTHREADS; i++) {
        rc = pthread_create(&threads[i], NULL, worker, (void *)i);
        assert(rc == 0);
    }

    for(i = 0; i < NTHREADS; i++) {
        rc = pthread_join(threads[i], NULL);
        assert(rc == 0);
    } 

    end = clock();

    time_spent = (double)(end - begin) / CLOCKS_PER_SEC;
    printf("Elapsed time: %.2lf seconds.\n", time_spent);

    for(i = 0; i < SIZE; i++)
        free((void *)A[i]);
    free((void *)A);

    for(i = 0; i < SIZE; i++)
        free((void *)B[i]);
    free((void *)B);

    for(i = 0; i < SIZE; i++)
        free((void *)C[i]);
    free((void *)C);

    free(threads);

    return 0;
} 
```

如果有人可以帮助我使我的 pthreads 程序运行，并实现一些加速，我会很高兴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:56:10.210

使用您当前的代码，您应该使用检索索引

```
int tid = (int)arg; 
```

（您的代码有效地将循环计数器视为地址，然后取消引用 0 或附近的地址。您的进程可能无法读取这些地址和/或不会适当对齐，因此出现 seg 错误）

上述更改可能会为您工作，但请注意将 a`int`作为 a传递`void*`并不完全正确。它依赖于`sizeof(int) <= sizeof(void*)`哪个可能但不能保证是真的。如果您关心这一点，您可以为传递给每个线程的数据分配内存，或者传递地址`i`并包含同步，以确保您在每次`pthread_create`调用后等待，直到线程被调度并读取其参数。

# xpath - selenium xpath - 如何选择具有特定内容的表格的最后一行？

> ID：15974500
> 
> 赞同：5
> 
> 时间：2013-04-12T14:51:09.293
> 
> 标签：xpath, selenium

我有一张这样的桌子：

```
<table>
  <th>
    <td>Area</td><td># of errors</td>
  </th>
  <tr><td>school</td><td>23</td></tr>
  <tr><td>student</td><td>0</td></tr>
  <tr><td>school</td><td>17</td></tr>
  <tr><td>student</td><td>0</td></tr>
</table> 
```

如何选择“学校”区域的最后一行。

直到最近我用 assert_text 和

```
//table//tr//td[contains(text(),'school')]/following::td 
```

a`value`为 0，即零错误。

但是，现在我需要考虑有错误的行，但仍然查看“最后”行 - 对于一个区域 - 错误为零。
对于这种情况，使用

```
//table//tr//td[contains(text(),'school')]/following::td 
```

错误地选择了有 23 个错误的第一行。

我尝试使用`tr[last()]`-

```
//table//tr[last()]//td[contains(text(),'school')]/following::td[2] 
```

但问题是这选择了最后一个表格行 - 这是给学生的。我想要最后一个用于学校的表格行（它实际上是所有行中最后一个表格行的下一个）。

我也试过：

```
//table//td[contains(text(),'school')][last()]/following::td[2] 
```

但这不起作用（它仍然选择“第一”学校行）。

我需要能够只考虑一个学校行、两个学校行和超过 2 个学校行，所以我需要表达式足够动态来处理它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T15:52:18.353

您正在搜索包含文本“学校”的元素，但标记包含文本“学校”，XPath 区分大小写。

您可以通过将大写字母转换为小写字母来解决此问题，这将使您的 XPath 如下所示：

```
//td[contains(translate(.,'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), 'school')][last()]/following::td[2] 
```

***笔记***

我没有使用 XPath2 lower-case() 函数，因为它不适用于所有浏览器。

***编辑***

为新标记更新了不区分大小写的 xpath 将是：

```
//tr[td[contains(translate(.,'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), 'school')]][last()]/td[2] 
```

或者不区分大小写的更简化版本是：

```
//tr[td[contains(., 'school')]][last()]/td[2] 
```

（. 是 text() 的简写，如果你愿意，你可以互换它们）

你也可以侥幸逃脱

```
//tr[td[.='school']][last()]/td[2] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T15:04:51.010

使用您的最终 XPath，它适用于我，并且确实选择了最后一个“学校”。所以我会去问你正在使用什么版本，什么浏览器等

此外，有时在使用 XPath 时，位置索引器可能会有点麻烦，那么……

```
(//td[contains(text(),'School')])[last()]/following::td[2] 
```

# browser - 知道正在加载哪个 URL 黑莓

> ID：15974502
> 
> 赞同：1
> 
> 时间：2013-04-12T14:51:14.017
> 
> 标签：browser, blackberry, java-me

所以我使用黑莓`BrowserSession`加载一个url，我加载了url。这个 url 有按钮，当你点击它们时 url 会改变，我想知道 url 什么时候改变，什么时候改变到某个 url 我想添加一个弹出窗口。有谁知道这是怎么做到的吗？

如果您在 Android 中编程，我们使用

```
 shouldOverrideUrlLoading(String url){} 
```

我不确定黑莓中是否有类似的。如果您可以在不使用的情况下检查正在加载的 url `BrowserSession`，那么这也可以。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T17:25:48.433

如果您使用 BrowerSession 启动 URL，页面将在 BlackBerry Browser 进程中呈现，您的应用程序无法访问其中的事件。您需要做的是加载您的 URL `BrowserField`- BlackBerry 等效的 WebView。

如果要在页面加载后显示弹出窗口，请实现`BrowserFieldListener`接口以了解页面何时加载。

如果要在用户单击链接时显示弹出窗口，则必须实现自己的`BrowserFieldNavigationRequestHandler`.

这是完整的代码。

```
static void showScreen() {
    MainScreen screen = new MainScreen();
    final BrowserField bf = new BrowserField();
    final ProtocolController pc = (ProtocolController) bf.getController();

    pc.setNavigationRequestHandler("http", new BrowserFieldNavigationRequestHandler() {
        public void handleNavigation(BrowserFieldRequest request) throws Exception {
            intercept();  //Intercept the request and my handler
            InputConnection ic = pc.handleResourceRequest(request);
            bf.displayContent(ic, request.getURL());
        }
    });

    screen.add(bf);
    bf.requestContent("http://www.google.com");
    UiApplication.getUiApplication().pushScreen(screen);
} 
```

# c# - 在字符串中获取自定义标签的优雅方式

> ID：15974505
> 
> 赞同：0
> 
> 时间：2013-04-12T14:51:18.670
> 
> 标签：c#, .net, regex, string

这里有一些优雅的方式来获取和替换字符串中的自定义标签吗？

例如

```
"some long text [o:prop] and [u:date]" 
```

结果数组：

*   “[o:prop]”
*   “[你：日期]”

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:08:24.840

```
@"\[[a-z]:[a-z]{4}\]" 
```

假定 1 个小写字符后跟一个冒号，然后是 4 个小写字符，全部由方括号括起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:52:51.563

这总是有风险的，但是您可以使用一些正则表达式，例如：

```
"\\[(.*?)]" 
```

使用*全局修饰符*.

更安全：`\\[(o:prop|u:date)]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T14:53:08.197

是的。使用正则表达式。

[http://www.regular-expressions.info/](http://www.regular-expressions.info/)

读。学。申请。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T15:06:59.230

尝试

```
var replacements = new Dictionary<string,string> {
    {"[o:prop]","FISH"},
      {"[u:date]","2013-04-12"}
};

var testString = "some long text [o:prop] and [u:date]";

var result= new Regex(@"\[[^[]*?]").Replace(
      testString,
      match => replacements.ContainsKey(match.Value) ? replacements[match.Value] : match.Value); 
```

# sed - 使用 sed 替换一系列十六进制值

> ID：15974506
> 
> 赞同：4
> 
> 时间：2013-04-12T14:51:23.437
> 
> 标签：sed, hex

我想将从 x'00 到 x'40' 的一系列十六进制字符替换为文件中的空格。我不想为他们每个人写一个 sed -e 's/\x00//g' ..有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T16:07:16.807

这可能会为您完成，具体取决于您的环境和 sed 版本。（它避免了与制表符混淆，但没有理由避免使用空格，因为您只是用另一个空格替换它。）

```
LANG='' sed 's/[\x00-\x08\x0A-\x40]/ /g' 
```

这会在 sed 命令期间清除 LANG。例如，如果您的环境是 UTF8，那可以解决一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:58:12.923

使用`tr`而不是`sed`. 首先，您必须将字符代码从十六进制转换为八进制。假设您想要 0 到 77 八进制。这里是：

```
tr '\0-\77' ' ' < your-input-file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-13T15:56:32.207

这个：

```
LC_ALL=C sed 's/[\x00-\x40]/ /g' 
```

或粗糙：

```
(LC_ALL=C; sed 's/[\x00-\x40]/ /g') 
```

测试：

```
alias hxr="perl -ne'for(split){print chr hex}'"

printf '%02X ' `seq 65` | hxr | hd

printf '%02X ' `seq 65` | hxr | LC_ALL=C sed 's/[\x00-\x40]/ /g'; echo 
```

# networking - 使用具有动态 IP 地址的主机名从 android 设备连接到 locahost（不断变化）

> ID：15974507
> 
> 赞同：0
> 
> 时间：2013-04-12T14:51:24.703
> 
> 标签：networking, mobile, tcp, ip, webpage

问题背景：

我有一台在 WAMP 服务器上运行本地网页的计算机。计算机已连接到无线连接。

我有一个连接到同一个无线网络的安卓平板电脑。

目的（我想做什么）：

我希望能够通过我的 APP 使用主机名访问 WAMP 服务器上的本地网页。

我已经尝试过的：

我已经可以使用计算机的 IP 地址（[http://192.168.xx/Webpage_Name](http://192.168.x.x/Webpage_Name)）从我的应用程序中寻址网页。但是，由于我的 ip 是动态的（不断变化），因此此实现将不起作用。如果我错了，请纠正我。

我的想法是使用编辑计算机的主机文件。但是，我的理解是主机文件是静态的，这意味着它无法将主机名解析为更改的 IP 地址（它只存储一个 IP 地址及其相应的主机名）。此外，主机文件不会在 Android 设备上，因此 android 设备将无法使用主机文件中指定的主机名连接到服务器。如果我错了，请纠正我。

我的第二个想法是使用 DynamicDNS 服务。但是，我唯一的问题是，如果我想要免费的第三方服务来提供 DNS，我的网页信息就必须通过互联网。我希望这个网页保持在本地，所以我认为 DNS 不是一个选项。如果我错了，请纠正我。

我的第三个想法是首先通过应用程序在计算机和 Android 设备之间建立 TCP 连接。然后我会将计算机的 IP 地址以字符串形式从计算机发送到 android 设备。然后android设备可以使用发送的IP地址连接到本地服务器。现在我的理解是，您需要 ip 地址和端口来在 android 设备和计算机之间创建 TCP 连接，这就是为什么我认为这种实现不起作用的原因。由于我还需要在此选项中对 IP 地址进行硬编码，因此问题仍然存在。

主要问题（我想从你们那里知道什么）：

有谁知道解决这个问题的任何其他选择？如果我错误地理解了上述选项之一（我已经尝试过的部分），并且您认为有办法让它们发挥作用，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:05:33.110

我找到了解决这个问题的方法。我在运行 WAMP 的计算机和移动设备之间创建了一个多播套接字客户端-服务器系统。计算机将充当服务器，而移动设备将充当客户端。建立连接后，我会在服务器端代码中获得计算机的 IP 地址。然后我通过多播套接字将 IP 地址作为字符串从计算机发送到客户端（移动设备）。然后，移动设备使用提供的 IP 地址创建指向 WAMP 服务器上指定网页的正确 URL 并加载该 URL。

有关服务器客户端系统的示例代码，请参阅此页面[http://docs.oracle.com/javase/tutorial/networking/datagrams/broadcasting.html](http://docs.oracle.com/javase/tutorial/networking/datagrams/broadcasting.html)。

# prolog - Prolog 从谓词列表中构建列表

> ID：15974509
> 
> 赞同：1
> 
> 时间：2013-04-12T14:51:29.870
> 
> 标签：prolog

我在 Prolog 中有以下谓词：

```
rules('Archer','NX-01').
rules('Kirk','NCC-1701').
rules('Picard','NCC-1701-D').
rules('Janeway','Voyager').
rules('Almak','IRWTMet'). 
```

其中“Archer”、“Kirk”、“Picard”、“Janeway”和“Almak”是舰长，“NX-01”、“NCC-1701”、“NCC-1701-D”、“Voyager”和“IRWTMet” ' 是船舶。

所以我想，给定一个船舶列表，返回一个船舶指挥官列表。

我正在尝试这个：

```
list_ship_commanders([],_).
list_ship_commanders([Ship|T],R):-
   findall(Commander,rules(Commander,Ship),R),
   list_ship_commanders(T,R). 
```

上述代码仅适用于 Ship 列表只有一个元素的情况。我正在使用“findall”，但我不确定这是正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:09:44.547

从您的数据（和您的代码）来看，您是否允许每个指挥官拥有多艘舰艇（或每艘舰艇拥有多艘指挥官 :) 尚不清楚。

如果您对此类细节不感兴趣，可以尝试：

```
list_ship_commanders(Ships, Commanders) :-
    findall(Commander, (member(S, Ships), rules(Commander, S)), Commanders). 
```

您将获得一份可能重复​​的指挥官列表，并且没有指向相关规则/2 的链接。

# spring - Spring MVC - 找不到上下文文件

> ID：15974510
> 
> 赞同：0
> 
> 时间：2013-04-12T14:51:33.607
> 
> 标签：spring, tomcat, servlets

我使用 Apache Tomcat 7，它是 ON - Spring 3，所有库都在类路径上（编译和运行时）。

这是我在 /WEB-INF/ **web.xml**中的 web.xml 文件：

```
<context-param> 
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/dispatcherServlet-context.xml</param-value> 
</context-param>  

<servlet>
    <servlet-name>dispatcherServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>dispatcherServlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

这是我在 WEB-INF/ **dispatcherServlet-context.xml**中的上下文文件：

```
<!-- Scans within the base package of the application for @Components to configure as beans -->
<context:component-scan base-package="controllers" />

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/views/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

我放入浏览器时的Tomcat错误`http://localhost:8080/projectname/`是：

```
org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from ServletContext resource [/WEB-INF/dispatcherServlet-servlet.xml]; 
```

嵌套异常是 java.io.FileNotFoundException: 无法打开 ServletContext 资源 [/WEB-INF/dispatcherServlet-servlet.xml] ecc ecc ecc

请注意，错误涉及文件*dispatcherServlet-servlet.xml*而不是*dispatcherServlet-context.xml*（我使用、创建和映射的那个）

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:04:10.493

在 Spring MVC 中，调度程序 servlet 配置的默认位置是：/WEB-INF/[SERVLET-NAME]-servlet.xml。您可以通过在您的 servlet 声明中添加一个 init 参数来重新配置它：

```
<servlet>
    <servlet-name>dispatcherServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            [PATH-TO-YOUR-FILE]/[CONFIG-FILE-NAME].xml
        </param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:03:13.360

只需删除

```
<context-param> 
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/dispatcherServlet-context.xml</param-value> 
</context-param> 
```

片段并将您的重命名`dispatcherServlet-context.xml`为`dispatcherServlet-servlet.xml`. 原因：Spring 和 Spring MVC 有两个不同的配置文件。您已尝试通过 Spring Framework 使用 Spring MVC 配置。

```
So for Spring : pass how many you want config files via `contextConfigLocation`
For Spring MVC : /WEB-INF/<dispatcher_servlet_name>-servlet.xml. 
```

您可以更改 Spring MVC 案例的默认名称（请参阅@Stefan Lindenberg 答案）

# tomcat - 启动Tomcat时出现异常

> ID：15974515
> 
> 赞同：2
> 
> 时间：2013-04-12T14:51:58.733
> 
> 标签：tomcat

启动 Tomcat 时出现此异常。

除此之外，Tomcat似乎运行正常。不过，我不喜欢控制台中的异常，而且我的 Google 搜索没有出现相关结果，因此将不胜感激。谢谢

```
Listening for transport dt_socket at address: 8787
Handler error
java.lang.ClassNotFoundException: startup
        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:276)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
        at org.apache.juli.ClassLoaderLogManager.readConfiguration(ClassLoaderLogManager.java:521)
        at org.apache.juli.ClassLoaderLogManager.readConfiguration(ClassLoaderLogManager.java:464)
        at org.apache.juli.ClassLoaderLogManager.readConfiguration(ClassLoaderLogManager.java:288)
        at java.util.logging.LogManager$2.run(LogManager.java:258)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.util.logging.LogManager.readPrimordialConfiguration(LogManager.java:256)
        at java.util.logging.LogManager.getLogManager(LogManager.java:239)
        at java.util.logging.Logger.<init>(Logger.java:221)
        at java.util.logging.LogManager$RootLogger.<init>(LogManager.java:973)
        at java.util.logging.LogManager$RootLogger.<init>(LogManager.java:970)
        at java.util.logging.LogManager$1.run(LogManager.java:179)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.util.logging.LogManager.<clinit>(LogManager.java:156)
        at java.util.logging.Logger.getLogger(Logger.java:274)
        at org.apache.juli.logging.impl.Jdk14Logger.getLogger(Jdk14Logger.java:181)
        at org.apache.juli.logging.impl.Jdk14Logger.<init>(Jdk14Logger.java:61)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at org.apache.juli.logging.impl.LogFactoryImpl.createLogFromClass(LogFactoryImpl.java:1116)
        at org.apache.juli.logging.impl.LogFactoryImpl.discoverLogImplementation(LogFactoryImpl.java:914)
        at org.apache.juli.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:604)
        at org.apache.juli.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:336)
        at org.apache.juli.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:310)
        at org.apache.juli.logging.LogFactory.getLog(LogFactory.java:685)
        at org.apache.catalina.startup.Bootstrap.<clinit>(Bootstrap.java:60)
log4j:WARN No appenders could be found for logger (org.apache.catalina.startup.Catalina).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

**编辑** server.xml 的内容：

```
<?xml version='1.0' encoding='utf-8'?> 
```

```
<Listener className="org.apache.catalina.core.AprLifecycleListener" SSLEngine="on" />
<Listener className="org.apache.catalina.core.JasperListener" />
<Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener" />
<Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener" />
<Listener className="org.apache.catalina.core.ThreadLocalLeakPreventionListener" />
<Listener className="com.atomikos.tomcat.AtomikosLifecycleListener" />

<GlobalNamingResources>
    <Resource name="UserDatabase" auth="Container" type="org.apache.catalina.UserDatabase" 
        description="User database that can be updated and saved"
        factory="org.apache.catalina.users.MemoryUserDatabaseFactory" pathname="conf/tomcat-users.xml" />
</GlobalNamingResources>

<Service name="Catalina">
    <Connector port="8080" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="8443" />
    <Connector port="8009" protocol="AJP/1.3" redirectPort="8443" />

    <Engine name="Catalina" defaultHost="localhost">
        <Realm className="org.apache.catalina.realm.LockOutRealm">
            <Realm className="org.apache.catalina.realm.UserDatabaseRealm" resourceName="UserDatabase" />
        </Realm>

        <Host name="localhost" appBase="webapps" unpackWARs="true" autoDeploy="true">
            <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs" 
                prefix="localhost_access_log." suffix=".txt" pattern="%h %l %u %t &quot;%r&quot; %s %b" />
        </Host>
    </Engine>
</Service> 
```

*** 编辑 2 ***

这是我在 logging.properties 文件中得到的内容：

```
handlers = startup
.handlers = startup, java.util.logging.ConsoleHandler

############################################################
# Handler specific properties.
# Describes specific configuration info for Handlers.
############################################################

startup.level = FINE
startup.directory = ${catalina.base}/logs
startup.prefix = startup.

java.util.logging.ConsoleHandler.level = FINE
java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:21:33.363

既然这么说`Handler error`我觉得你的tomcat的有问题`conf/logging.properties`。

特别是在该文件的前两行中查找任何杂散条目。默认情况下，这些是

```
handlers = 1catalina.org.apache.juli.FileHandler, 2localhost.org.apache.juli.FileHandler,
 3manager.org.apache.juli.FileHandler, 4host-manager.org.apache.juli.FileHandler, 
java.util.logging.ConsoleHandler

.handlers = 1catalina.org.apache.juli.FileHandler, java.util.logging.ConsoleHandler 
```

# java - Java中的证书路径发现

> ID：15974516
> 
> 赞同：1
> 
> 时间：2013-04-12T14:51:59.890
> 
> 标签：java, security, https, x509, pki

我尝试通过 java 内置功能为此 ( `HttpURLConnection`) 建立 https 连接。但我得到了这个例外：

```
javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
...
... 
```

我的证书链是：

`Root certificate -> Intermediate certificate -> Web server certificate`

根据“路径发现”的含义，使用的证书是正确的。信任锚是根证书，它是在我系统上的 java 密钥库中导入的。中间证书不是……但是

1.  中间证书由我信任的根签名 - 所以我也信任中间证书。
2.  Web 服务器证书使用我信任的中间证书签名（第 1 点）

那么验证必须成功通过吗？我有什么问题吗？

我在某处读到这个：

> 浏览器可以进行自动发现，服务器到服务器不能。

但是缺少此功能是非常基本的。是否有明确的方法来进行这种[自动发现](http://en.wikipedia.org/wiki/Certification_path_validation_algorithm)？

* ***更新

是的，这就是问题所在，GPI。我很困惑，因为浏览器可以验证服务器证书，但 java 应用程序不能。这种行为的原因是：

*   服务器只发送最终证书，而不是整个证书链；
*   证书是最近买的，用比较新的中间证书签名；
*   浏览器具有相对最新的证书列表，包括中间证书；
*   java有相对的不是最新的证书列表，中间证书不在里面。
*   浏览器通过中间证书验证最终证书 java 无法检查证书链，因为： 1\. 链未发送；2\. 最终证书（中间证书）的签名者不是信任锚。

解决方案可能是：

*   服务器返回整个证书链
*   要在 java 信任库中添加的中间证书

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:56:00.807

我相信您已经检查了您的链，因此我们可以理所当然地认为*RootCert*签署了*IntermediateCert*和*IntermediateCert*签署了*ServerCert*，具有有效的 X500 名称链和所有......

也就是说，您的逻辑是有效的，相信*RootCert*就足够了，但不要忘记，为了构建路径，您的客户端必须拥有路径中的**所有**证书。

在您的情况下，如果您仅信任根证书，则由服务器来宣传证书链的其余部分（中间和最终）。如果没有人“给”HTTP客户端中间证书，那么客户端将失败，因为从*根*到*服务器*不知道*中间*是不可能的。

`-Djavax.net.debug=all`通过使用该选项启动客户端，您实际上可以看到您的服务器证书链是什么。如果链的长度为 1，那么您的服务器只公布最终证书，客户端无法猜测中间证书存在。

（也可以使用浏览器检查并要求查看服务器证书，但您应该注意，浏览器会向您显示到信任锚的整个路径，因此如果您想推断服务器链是什么，您必须从此路径中删除浏览器的锚点）。

在生产服务上，您应该参考您的证书提供商的网站，以了解什么被视为根证书（它可能不是最高级别的证书）。这个有效的根应该是您的客户端的信任锚，并且任何服务器都应该从路径中的最后一个证书（通用名称是服务器的 DNS 名称的那个）至少通告链中的所有其他证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:12:46.727

In order to connect via Https you need to use an HttpsURLConnection object. You cannot create a connection with an HttpURLConnection object.

# php - 在 PHPExcel 中创建 Excel 文件后如何关闭它

> ID：15974518
> 
> 赞同：3
> 
> 时间：2013-04-12T14:52:01.367
> 
> 标签：php, phpexcel

我正在使用 PHPExcel 库创建一个 Excel 文件，并且使用以下代码可以正常工作：

```
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');
$objWriter->save($new_name); 
```

当我尝试从其他 Web 应用程序访问 Excel 文件时，出现以下错误：
`File is used by other program`

如何关闭`$objWriter`PHPExcel 来解决这个问题？

对此有任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T18:12:48.913

您可以尝试在保存后专门销毁资源，但这应该在脚本结束时自动覆盖。该`disconnectWorksheets()`方法也可以解决问题。

```
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');
$objWriter->save($new_name);
$objPHPExcel->disconnectWorksheets();
unset($objWriter, $objPHPExcel); 
```

离开[文档](http://www.contao-docs.org/docs/PHPExcel/html/class_p_h_p_excel___i_o_factory.html)，似乎没有真正“关闭”资源的好方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-18T11:58:27.823

```
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');
$objWriter->save($new_name);
$objPHPExcel->disconnectWorksheets();// Good to disconnect
$objPHPExcel->garbageCollect(); // Add this too
unset($objWriter, $objPHPExcel); 
```

我试过上面并解决了内存问题！

# ruby-on-rails-3.2 - 使用 javascript_include_tag 加载 Javascript

> ID：15974519
> 
> 赞同：0
> 
> 时间：2013-04-12T14:52:07.920
> 
> 标签：ruby-on-rails-3.2

因此，当我在特定网页上时，我在加载我的 javascript 文件时有点迷失了

**我做了什么：**

从 Application.js中取出`reguire_tree .`，因为我读到它会一次加载我们所有的每个脚本。然后我转到生成控制器时创建的 HAML 文件并执行此操作：

```
%p  From HAML!
- javascript_include_tag '/assets/javascripts/jstester.js' 
```

我的 jtester.js Javascript 文件位于 assets- **>javascripts**文件夹下，现在它只有以下内容：

```
document.write("from the script"); 
```

但它现在不运行我的脚本。我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:55:39.547

好的，我可以使用以下代码...但是如果有更好的做法，请告诉我...谢谢

```
%p  From HAML!
= javascript_include_tag 'jstester' 
```

# java - 通过远程接口将 EJB 注入 servlet

> ID：15974533
> 
> 赞同：2
> 
> 时间：2013-04-12T14:52:48.503
> 
> 标签：java, ejb, cdi

我正在查看一些 Jave EE 6 代码并对它的正确性表示怀疑：

```
@WebServlet
public class FooServlet {
  @EJB
  private transient BarRemoteInterface bar;
}

@Remote
public interface BarRemoteInterface {
}

@Stateless
public class BarBean implements BarRemoteInterface {
} 
```

*   我想知道`transient`关键字是否没有任何意义，因为注入的代理不会被序列化。（或者会，但没有效果？）

*   我认为如果我们不注入远程接口会更有效，因为它使用按复制传递参数传递。相反，我们宁愿注入 EJB`@EJB BarBean`以便使用它自动生成的（？）本地接口。我对吗？

*   在这种情况下，甚至`@EJB`可以替换`@Inject`为更通用的

如果他们是正确的，你能评论我的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:51:09.427

> 我想知道瞬态关键字是否没有任何意义，因为注入的代理不会被序列化。（或者会，但没有效果？）

不需要瞬态。EJB 规范说远程代理必须是可序列化的。如果你愿意，你可以让你的接口扩展 Serializable。

> 我认为如果我们不注入远程接口会更有效，因为它使用按复制传递参数传递。相反，我们宁愿使用@EJB BarBean 注入EJB，以便使用它自动生成的（？）本地接口。我对吗？

对，`@Remote`本质上是“通过副本”（不是真的，但这已经足够接近了）。无论如何，一些应用程序容器可以对此进行优化。`@Remote`只有在实际远程处理时才应使用。你应该不惜一切代价避免远程处理。类似 SOA 的架构速度很慢，而且众所周知不可能向外扩展。坚持下去，`@Local`除非你有充分的理由不这样做。

> 在这种情况下，甚至@EJB 也可以替换为@Inject，因为这更通用

是的，请随意使用`@Inject`您的 EJB。您的 JEE6 容器（TomEE、JBoss7、GlassFish 等）将能够解决这个问题。事实上，您应该问自己，我真的需要 EJB 吗？你能用纯 CDI 完成你的任务吗？EJB 仅在您必须担心事务语义时才有用，否则只需使用 CDI。

我希望这会有所帮助！

# c# - 我应该发送 WSDL 要求的变量还是 WebMethod 要求的变量？

> ID：15974535
> 
> 赞同：0
> 
> 时间：2013-04-12T14:52:52.180
> 
> 标签：c#, php, soap, wsdl, nusoap

如果我有一个`C#`WebService（不是我编写的），它具有以下内容`WebMethod`：

```
public string getObjetivos(int intUnidadeID, string strMascara, string strdtInicial, string strdtFinal){... 
```

并且`WSDL`文件只指定了它需要的 3 个变量，而不是 4 个：像这样：

```
...
<s:sequence>
<s:element minOccurs="0" maxOccurs="1" name="strMascara" type="s:string"/>
<s:element minOccurs="1" maxOccurs="1" name="dtInicial" type="s:dateTime"/>
<s:element minOccurs="1" maxOccurs="1" name="dtFinal" type="s:dateTime"/>
</s:sequence>
... 
```

通过 PHP 使用它，使用（尝试）`nusoap`以下内容（这不起作用，我不知道为什么）：

```
$intunidadeID = (int)$unidadeid;
require './nusoap.php';
$client = new nusoap_client('http://10.0.0.2/wsmobile/Servicemobile.asmx?WSDL', 'WSDL');
$param = array('intUnidadeID' = $intunidadeID, 'strMascara' = $strmascara, 'strdtInicial' = $strdtinicial, 'strdtFinal' = $strdtFinal);
$answer = $client->call('getObjetivos', array('parameters' => $param));
print_r($answer); 
```

问题是：我应该发送询问的 4 个变量`WebMethod`，还是只发送询问的 3 个`WSDL`？

这是一个好奇的问题。

# javascript - Find date in sheet and color it

> ID：15974536
> 
> 赞同：0
> 
> 时间：2013-04-12T14:52:53.573
> 
> 标签：javascript, google-apps-script

I'm trying to change this script to search for the date (now) and color the found date in the sheet.

Original script;

```
function findThis(val) {
var data = SpreadsheetApp.getActiveSheet().getDataRange().getValues();
var searchStr = "Foo";
Logger.log(res);
var res = findValue(data, searchStr);
if (res != null) {
Browser.msgBox("Found in row " + res[0] + ", column " + res[1]);
}
}

function findValue(data, obj) {
for (var i = 0; i < data.length; i++) {
for (var j = 0; j < data[i].length; j++) {
  if (data[i][j] == obj) {
    return [i, j];
  }
}
}
return null; 
```

}

My trial and error script;

I think the range is in res but when i want to getRange it does not accept the res coordinates, I've tryed getA1Notation() I am doing it wrong, but stil learning and trying, maybe you can help.

```
 function findThis(val) {
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet(); // toevoeging
  var data = SpreadsheetApp.getActiveSheet().getDataRange().getValues();
  var Today = new Date();
  var date = Utilities.formatDate(Today,"GMT+100","dd-M-yyyy");
  Logger.log(date)
  var searchStr = date;

  var res = findValue (data, searchStr);
  if (res != null) {
  Logger.log(res);
    Logger.log(res[0]+", "+res[1]);
    var Range = (res[0]+", "+res[1]);
    var x = (res[0]+", "+res[1]);
    //var C = range.getColumnIndex(res);
    var range = Range.getA1Notation()
    Logger.log(range); 
    var value = sheet.getRange([x]).getValue(); //toegevoegd
    Logger.log(value);
    Logger.log(x);    
    sheet.getRange(x).setBackgroundColor('Yellow'); 
    Browser.msgBox("Found in row " + res[0] + ", column " + res[1]);
  }
}

function findValue(data, obj) {
  for (var i = 0; i < data.length; i++) {
    for (var j = 0; j < data[i].length; j++) {
      if (data[i][j] == obj) {
        return [(i+1), (j+1)];
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:38:56.503

It looks like you are making some simple mistakes in understanding javascript objects and their methods. (Google apps-script, GAS, is a derivative of javascript, so any resource that will help you learn basic javascript will improve your skills here.)

A Range is an object of Class Range, while the a1Notation expression of a range in a Spreadsheet (e.g. "A1", or "A:Z") is an object of Class String. Now, a String has attributes and methods that are useful for doing the things you might want to do with a string of text. A Range object, on the other hand, has different attributes and methods that are appropriate to it - they are documented [here](https://developers.google.com/apps-script/reference/spreadsheet/range). For them to work on a variable *object* in your script, that variable must be of Class Range. Let's look at this line in your code:

```
var Range = (res[0]+", "+res[1]); 
```

That line creates a variable named Range, which is a String containing something like `"15, 16"`. Then, when you try `Range.getA1Notation()` it fails because strings don't have that method. What you need to do is use an actual Range object. Here's one way that will work for you, just replace the corresponding block in your current script:

```
if (res !== null) {
  var range = sheet.getRange(res[0],res[1]);
  range.setBackgroundColor('Yellow'); 
  Browser.msgBox("Found at " + range.getA1Notation());
} 
```

You don't need the variable `value` for anything in your example, but if you did, this is how you would obtain it.

```
 var value = range.getValue(); //toegevoegd
  Logger.log(value); 
```

Like @Sergeinsas, I've got some concerns about the way you're comparing dates. But if it's working for you, that's great.

# ios - 向 UIView 添加渐变的现代技术

> ID：15974537
> 
> 赞同：3
> 
> 时间：2013-04-12T14:52:58.303
> 
> 标签：ios, ios6, gradient

我知道向 UIView 添加背景渐变的几种方法。我想知道这样做最有效和可扩展的方式是什么，为什么？以下是我使用的技术：

*   创建 UIView 的子视图并覆盖 drawRect，我在当前上下文中绘制渐变。

    一个。当使用上面的渐变创建它的边界我想装饰和插入这个背景渐变作为第一个子视图，即`– insertSubview:atIndex:`

    湾。从上面得到背景渐变视图后，我在图像上下文中渲染它并将其用作背景图像，即

    ```
    UIGraphicsBeginImageContext(gradView.bounds.size);
    [gradView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *gradientImg = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    UIColor *background = [UIColor colorWithPatternImage:gradientImg];
    self.view.backgroundColor = 背景；

    ```

*   创建可拉伸的 PNG 并使用它来装饰视图背景。技术与您装饰 UIButton 的方式非常相似。

    ```
    -(UIColor *)backgroundColor:(CGRect)frame
    {
        UIImage *bg = [UIImage imageNamed:@"background_23x36"];
        bg = [bg resizableImageWithCapInsets:UIEdgeInsetsMake(0.0, 11.0, 0.0, 11.0)];
        UIGraphicsBeginImageContextWithOptions(frame.size, YES, [[UIScreen mainScreen] scale]);
        [bg drawInRect:frame];
        UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        返回 [UIColor colorWithPatternImage:image];
    }

    ```

*   创建 UIView 的子视图，但不要覆盖 drawRect，而是使用 CAGradientLayer。类似于[http://nscookbook.com/2013/04/recipe-20-using-cagradient-layer-in-a-custom-view/](http://nscookbook.com/2013/04/recipe-20-using-cagradient-layer-in-a-custom-view/)

那么添加渐变作为背景的最有效和可扩展的方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T20:43:43.250

正如 Fogmeister 上面建议的那样，在`drawRect:`您的子类的方法中执行此操作`UIView`。

```
- (void)drawRect:(CGRect)rect
{
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = UIGraphicsGetCurrentContext();

    NSArray *gradientColors = [NSArray arrayWithObjects:(id) [UIColor redColor].CGColor, [UIColor yellowColor].CGColor, nil];

    CGFloat gradientLocations[] = {0, 0.50, 1};
    CGGradientRef gradient = CGGradientCreateWithColors(colorSpace, (__bridge CFArrayRef) gradientColors, gradientLocations);

    CGPoint startPoint = CGPointMake(CGRectGetMidX(rect), CGRectGetMinY(rect));
    CGPoint endPoint = CGPointMake(CGRectGetMidX(rect), CGRectGetMaxY(rect));

    CGContextDrawLinearGradient(context, gradient, startPoint, endPoint, 0);
    CGGradientRelease(gradient);
    CGColorSpaceRelease(colorSpace);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T21:03:32.923

DrawRect 是我认为更有效的方式。我想扩展 jverrijt 的好答案。如果你需要 alpha 分量（透明到黑色渐变 fe），那么你可以使用这个：

```
UIGraphicsBeginImageContextWithOptions(self.bounds.size, NO, 0.0);
CGContextSaveGState(UIGraphicsGetCurrentContext());
CGContextSetBlendMode(UIGraphicsGetCurrentContext(), kCGBlendModeClear);
CGContextRestoreGState(UIGraphicsGetCurrentContext());

//Draw stuffs

UIGraphicsEndImageContext(); 
```

# timezone - Google timezone API - 时间戳参数

> ID：15974539
> 
> 赞同：10
> 
> 时间：2013-04-12T14:53:02.720
> 
> 标签：timezone, timestamp, timestamp-with-timezone

在我的客户端应用程序中，我有来自 skyhook API 基于其 IP 的纬度和经度信息

现在根据经纬度信息我需要找出客户端的时区信息。但在谷歌时区 API 文档[https://developers.google.com/maps/documentation/timezone/](https://developers.google.com/maps/documentation/timezone/)中，我看到时间戳是必填字段。在这种情况下，我需要做什么。

您还可以帮我理解时间戳对应的内容吗？例如：- 如果我的应用程序服务器在美国（比如 PST 时区）并且它使谷歌 API 调用传递服务器时间戳。

如果用户从印度登录客户端应用程序，将经纬度信息传递到应用服务器以获取时区信息，API 将提供什么作为 dstOffset 和 rawOffset？即，如果我用 dstOffset 和 rawOffset 添加服务器时间戳，我会得到客户端机器时区信息吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-08-21T14:11:32.960

几分钟以来，我一直在摸索[谷歌的 Timezone API ，特别是时间戳参数。](https://developers.google.com/maps/documentation/timezone/intro)也许这将列出需求：

在圣地亚哥，由于夏令时，我们（现在是 8 月）的 GMT 偏移量为 -8。[但是，在 11 月，我们的 GMT 偏移量将是 -7](http://www.timeanddate.com/time/zone/usa/san-diego)。

那么谷歌应该返回哪个 GMT 偏移量？-7 还是 -8？它们都是有效的，但这取决于您在哪一天进行测量。

输入时间戳参数。现在运行该服务，并使用[August 2015 的时间戳值](http://www.epochconverter.com/)，我得到以下响应：

```
{
   "dstOffset" : 3600,
   "rawOffset" : -28800,
   "status" : "OK",
   "timeZoneId" : "America/Los_Angeles",
   "timeZoneName" : "Pacific Daylight Time"
} 
```

但是，如果我将[时间戳增加到 2015 年 11 月](http://www.epochconverter.com/)（一旦圣地亚哥没有夏令时，我就会得到这个结果）：

```
{
   "dstOffset" : 0,
   "rawOffset" : -28800,
   "status" : "OK",
   "timeZoneId" : "America/Los_Angeles",
   "timeZoneName" : "Pacific Standard Time"
} 
```

在这两种情况下，rawOffset 都是相同的，但是由于我提供的时间戳，DST 发生了变化。如果您只想知道原始时区，则时间戳无关紧要。

但是，如果您希望应用程序在 8 月的圣地亚哥上午 8:00 和 11 月的圣地亚哥上午 8:00 可靠地执行某项操作，则需要使用时间戳。

换句话说，知道圣地亚哥*通常*与格林威治标准时间相差 -7 小时有什么价值。如果您使用时区，您可能会尝试确保您的 UTC 时间与该位置的真人所经历的时间相匹配。因此，DST 偏移量至关重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T15:19:45.540

您提供的文档链接明确指出时间戳应为 UTC，并且它用于显示正确的 DST 偏移值。它还将控制该`timeZoneName`字段是否在名称中显示为“标准”或“日光”。

如果您不关心这一点并且只想要该`timeZoneId`字段，那么您传递的值无关紧要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-01T22:56:01.850

尝试这个

```
DateDiff("s", "1/1/1970", DateTime.Now) 
```

# gdb - 在 Mingw 中构建 GDB 错误，配置：错误：未找到增强的 curses 库；禁用 TUI

> ID：15974544
> 
> 赞同：1
> 
> 时间：2013-04-12T14:53:15.677
> 
> 标签：gdb, mingw, tui

我尝试在 mingw 中构建 GDB 7.51 以进行跨平台调试，我发现 GDB 有 TUI 作为前端。无论如何，我用 --enable-tui 配置 GDB，然后总是停止并显示错误消息：

**配置：错误：未找到增强的诅咒库；禁用 TUI**

我通过谷歌检查了这个问题，然后我从 GNU 下载了 ncurses 源

[诅咒 5.9](http://www.gnu.org/software/ncurses/)

在我的 c:/mingw/msys/1.0/local/ 中构建并安装它

使用以下脚本语句运行 GDB 的配置

```
export PATH=$PREFIX/gccbinutils/bin/:/usr/local/bin:/usr/bin:/bin:/mingw/bin
export C_INCLUDE_PATH=/usr/local/include:/usr/local/include/ncursest:/usr/include:/c/mingw/include
export CPLUS_INCLUDE_PATH=/usr/local/include:/usr/local/include/ncursest:/usr/include:/c/mingw/include
export LIBRARY_PATH=/usr/local/lib:/usr/lib:/c/mingw/lib
export LD_LIBRARY_PATH=/usr/local/lib:/usr/lib:/c/mingw/lib
export LDFLAGS="-L/usr/local/lib -L/usr/lib -L/c/mingw/lib"
export LIBS="-lncursest"

$BUILD_MIPSGCCDIR/gdb/configure --prefix=$PREFIX/$pkg --target=$TARGET \
                --enable-tui \
                            --enable-curses \
                --enable-sim > $BUILDPATH/$TARGET$pkg.conf1.$argn.log  2>&1 
```

但它没有用。通过以下消息停止

```
checking for zlib.h... yes
checking for library containing dlgetmodinfo... no
checking for iconv... yes
checking for iconv declaration... install-shextern size_t iconv (iconv_t cd, char * *inbuf, size_t *inbytesleft, char * *outbuf, size_t *outbytesleft);
checking for library containing waddstr... no
configure: error: no enhanced curses library found; disable TUI
make[1]: *** [configure-gdb] Error 1
make[1]: Leaving directory `/d/tools/buildmipsgcc/build_gdb'
make: *** [all] Error 2 
```

我搜索了**waddstr**，并确定它存在于我的**c:/mingw/msys/1.0/local/lib/libncursest.a**中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:57:05.827

好的，让我们尝试通过提供手写来欺骗 Autotools `libncurses.la`：

```
# libncurses.la - a libtool library file
# Generated by ltmain.sh (GNU libtool) 2.2.7a
#
# Please DO NOT delete this file!
# It is necessary for linking the library.

# The name that we can dlopen(3).
dlname=''

# Names of this library.
library_names=''

# The name of the static archive.
old_library='libncursest.a'

# Linker flags that can not go in dependency_libs.
inherited_linker_flags=''

# Libraries that this one depends upon.
dependency_libs=''

# Names of additional weak libraries provided by this library
weak_library_names=''

# Version information for libncurses.
current=5
age=0
revision=9

# Is this an already installed library?
installed=yes

# Should we warn about portability when linking against -modules?
shouldnotlink=no

# Files to dlopen/dlpreopen
dlopen=''
dlpreopen=''

# Directory that this library needs to be installed in:
libdir='c:/mingw/msys/1.0/local/lib' 
```

检查我提供的路径和名称，如果它们不同 - 更改它们。如果它仍然不起作用，请报告，我会尝试进一步扩展它，直到我们最终修复它。

# c - malloc 指针上的偶尔分段错误

> ID：15974552
> 
> 赞同：0
> 
> 时间：2013-04-12T14:53:34.120
> 
> 标签：c, pointers, struct, malloc, fault

我有以下代码，每当我尝试释放我的 malloc 内存时，我有时会遇到分段错误。此错误仅在释放与我的某些结构成员相关的内存时发生（仅在昵称及以上），这意味着我从未遇到过分段错误`free(player->name)`，但大约有一半的时间我从其他两个释放中获得分段错误（查看仪器如何为空，没有效果）

```
typedef struct player_t {
    char * name;
    char * nickname;
    Instrument * instruments;
    int instrumentAmount;
} * Player;

Player playerCreate(const char* name, const char* nickname,
int maxInstruments) {
    Player one=malloc(sizeof(Player));
    if(one==NULL || !checkLegalName(name)|| !checkLegalName(nickname) ||   maxInstruments<=0) {
        return NULL;
    }

    one->name=malloc(strlen(name)+1);
    one->nickname=malloc(strlen(name)+1);

    if(!one->name || !one->nickname) {
        playerDestroy(one);
        return NULL;
    }

    strcpy(one->name,name);
    strcpy(one->nickname,nickname);
    one->instrumentAmount=maxInstruments;
    one->instruments=NULL;
    return one;
} 
```

其次是：

```
void playerDestroy(Player player) {
    if( !player) {
        return;
    }

    free(player->name);
    free(player->nickname); // this is where it happens.
    free(player->instruments);
    free(player);
} 
```

解决此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:17:48.997

您的（主要）问题出在这一行：

```
Player one=malloc(sizeof(Player)); 
```

Player 被定义为指向 player_t 结构的指针，因此您没有保留足够的内存来保留整个结构。仅对第一个指针 ( `name`) 就足够了，这就是您在访问时看到崩溃的原因`nickname`。

尝试：

```
Player one=malloc(sizeof(struct player_t)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:15:55.513

```
one->nickname=malloc(strlen(name)+1);
...
strcpy(one->nickname,nickname); 
```

如果`nickname`长于`name`怎么办？

# c# - 使用数据模板时，ComboBox 绑定基于两个源的属性相等来选择项目

> ID：15974553
> 
> 赞同：0
> 
> 时间：2013-04-12T14:53:35.277
> 
> 标签：c#, wpf, data-binding, combobox, datatemplate

**请注意：**

*   对于此示例，列表中的两种类型进行了很多简化，并且必须分开。

*   不能更改使用 int 作为类型之间的连接。

**问题：**

给定下面的代码，我如何获得标记为的 ComboBox `???`：

*   显示`ColorDefs.Name`为它的内容。

*   设置为等于`SelectedItem`的那个。`Models.DisplayColorNumber``ColorDefs.ColorNumber`

*   `Models.DisplayColorNumber`如果选择更改，则更新更新。

**在代码隐藏中**

```
public List<ModelData> Models { get; }
public List<DisplayColorDefinition> ColorDefs { get; }

DataContext=this; 
```

**XAML：**

```
<ListBox ItemsSource="{Binding Models}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <ComboBox ??? />
                <TextBlock Text="{Binding Models, Path=Name}" />
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

**模型数据类型：**

```
public class ModelData
{
    private string name;
    private int displayColorNumber;

    public string Name
    {
        get { return name; }
        set { name = value; }
    }
    public int DisplayColorNumber
    {
        get { return displayColorNumber; }
        set { displayColorNumber = value; }
    }
} 
```

**显示颜色定义类型：**

```
public class DisplayColorDefinition
{
    private int colorNumber;
    private string name;
    private Color displayColor;

    public int ColorNumber
    {
        get { return colorNumber; }
        set { colorNumber= value; }
    }

    public string Name
    {
        get { return name; }
        set { name = value; }
    }

    public Color DisplayColor
    {
        get { return displayColor; }
        set { displayColor = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:26:13.927

使用 SelectedValue 和 SelectedValuePath ：

```
<ListBox ItemsSource="{Binding Models}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <ComboBox ItemsSource="{Binding Path=DataContext.ColorDefs, RelativeSource={RelativeSource AncestorType={x:Type Window}}}"
                            DisplayMemberPath="Name"
                            SelectedValue="{Binding Path=DisplayColorNumber}"
                            SelectedValuePath="ColorNumber"
                            />
                <TextBlock Text="{Binding Name}" />
                <TextBlock Text="{Binding DisplayColorNumber}" />
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

SelectedValue 将是 Model 对象的属性，SelectedValuePath 将指示 DisplayColorDefinition 的哪个属性用于绑定。

# .net - 安装 Shield Limited Edition 教程，用于在 Visual Studio 2012 中为 Web 应用程序创建安装文件

> ID：15974555
> 
> 赞同：2
> 
> 时间：2013-04-12T14:53:39.960
> 
> 标签：.net, visual-studio-2012, windows-installer, installshield-le

自 2 小时以来，我一直在 Google 上搜索，以找到在 Visual Studio 2012 中为 Web 应用程序创建安装项目的分步教程，但我找不到任何内容。

任何人都可以指导我或指向我一个简单的教程来创建一个`Install Shield Limited Edition 2012`用于部署 Web 应用程序的安装项目`IIS 7.5`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T17:21:19.883

通常 Web 应用程序使用简单的 XCopy 进行部署。为什么你需要一个臃肿的设置？

# java - FramedCloud 显得脱节

> ID：15974557
> 
> 赞同：0
> 
> 时间：2013-04-12T14:53:52.547
> 
> 标签：java, gwt, openlayers, gwt-openlayers

使用 GWT OpenLayers，每当我显示 a`FramedCloud`时，云就会显得脱节。意思是，云中包含我要显示的数据的框向右移动，使气球看起来很奇怪。这是对其外观的模拟：

```
(------------)
|              |
|              |
|              |
(------------)
             \
              . 
```

如您所知，右侧伸出`FramedCloud`.

```
String html = new String("<HTML><BODY><H1>" + dataPoint1 +
                         "<br />" + dataPoint2 +
                         "</H1><TABLE WIDTH=300><TR>" + dataPoint3 +
                         "</TR></TABLE></BODY></HTML>");

thePopup = new FramedCloud(String.valueOf(id),
                           lonLat,
                           new Size(10, 10),
                           html,
                           new Icon("", new Size(0, 0), new Pixel(0, 0)),
                           false); 
```

我试过删除 HTML，但我有同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:45:28.823

我发现这与`gwt-openlayers`. 它与我正在使用的**OpenLayers 2.10有关。**问题在于 cloud-popup-relative.png 文件缺少两个像素。[如在osgeo.org](http://trac.osgeo.org/openlayers/ticket/3413)站点上跟踪的问题中所示下载新文件解决了我的问题。

# c++ - 删除对象时无法调用 __dealloc__

> ID：15974561
> 
> 赞同：2
> 
> 时间：2013-04-12T14:54:05.757
> 
> 标签：c++, python, destructor, cython

我有以下 C++ 类：

。H

```
class ALabSet: public LabSet {
public:
    PyObject *m_obj;

    ALabSet(PyObject *obj);

    virtual ~ALabSet();

    PyObject *GetPyObj();

}; 
```

.CPP

```
ALabSet::ALabSet(PyObject *obj): LabSet() {

    this->m_obj = obj;
    // Provided by "cyelp_api.h"
    if (import_cyelp()) {
    } else {
        Py_XINCREF(this->m_obj);
    }

}

ALabSet::~ALabSet() {
    Py_XDECREF(this->m_obj);
}

PyObject *ALabSet::GetPyObj() {
    return this->m_obj;
} 
```

我用 Cython 将其暴露如下：

```
cdef extern from "adapter/ALabSiteSetsManager.h" namespace "elps" :
    cdef cppclass ALabSet:
        ALabSet(PyObject *)

        PyObject *GetPyObj()

cdef class PyLabSet:
    cdef ALabSet *thisptr

    def __cinit__(self):
       self.thisptr = new ALabSet(<PyObject *>self)

    def __dealloc__(self):
       print "delete from PY !"
       if self.thisptr:
           del self.thisptr 
```

我的问题是我不知道如何从 Python 中调用析构函数。以下内容完全没有任何作用：

```
a_set = PyLabSet()
del a_set 
```

我在网上找不到类似的问题。你们有没有一个想法是出现在我这里？

我错过了一些关于引用计数管理的东西，或者......

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T15:12:38.883

`del a_set` removes a reference to the object (the local variable). There's still another reference, in the C++ object. This is known as a reference cycle. The cycle GC *could* collect this after a while. However, there is no guarantee when (or even **if**) this happens, so you should not rely on it¹.

For example, reference cycles containing pure Python objects with a [`__del__`](http://docs.python.org/3/reference/datamodel.html#object.__del__) special method [are documented](https://docs.python.org/3/library/gc.html#gc.garbage) to not be freed *at all*:

> Changed in version 3.4: Following PEP 442, objects with a `__del__()` method don’t end up in `gc.garbage` anymore.

I don't know whether [Cython's implementation of `__dealloc__`](http://cython.readthedocs.io/en/latest/src/userguide/special_methods.html#finalization-method-dealloc) triggers this behavior, but as outlined before, destruction isn't deterministic anyway. If you want to free some resource (e.g. a block of memory that isn't a Python object, a file, a connection, a lock, etc.) you should expose an explicit way of doing so manually (cf. the `close` methods of various objects). Context managers can simplify client code doing this.

Disclaimer: Almost all of this is CPython-specific.

¹ Some people prefer thinking of GC as an abstraction that simulates availability of infinite memory, rather than something that destroys unreachable objects. With this approach, it becomes quite obvious that destruction is not deterministic and not even guaranteed.

# rest - 从 RESTful Web 服务调用函数时出现 NoClassDefFoundError

> ID：15974563
> 
> 赞同：0
> 
> 时间：2013-04-12T14:54:18.143
> 
> 标签：rest, jax-rs, noclassdeffounderror

我正在尝试在 java 中创建一个允许使用 Yubikey 进行身份验证的 RESTful Web 服务。我正在修改我在尝试了解 REST 时完成的现有教程。

我正在尝试从 javax.ws.rs.core.Response 函数中调用验证函数，但不断收到来自导入的 yubikey jar 包的错误。

我从构建路径->库->添加外部罐子导入了这些罐子

将表单发布到 RESTful url 时出现以下错误：

**java.lang.NoClassDefFoundError: com/yubico/client/v2/exceptions/YubicoValidationException**

```
package de.vogella.jersey.todo.resources;

import javax.ws.rs.FormParam;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.core.Response;

import com.yubico.client.v2.exceptions.YubicoValidationException;
import com.yubico.client.v2.exceptions.YubicoValidationFailure;
import de.vogella.jersey.todo.resources.Validate;

@Path("/test")
public class Test {

@POST
public Response testCred(@FormParam("username") String username,
          @FormParam("password") String password,
          @FormParam("otp") String otp) throws YubicoValidationException, YubicoValidationFailure {
    int client_id = 11095; 
    boolean status;
    status = Validate.validate(otp, client_id);

    return Response.status(200)
        .entity("validation status: : " + status + ", for client " + otp)
        .build();

    }

} 
```

验证类如下：

```
package de.vogella.jersey.todo.resources;

import com.yubico.client.v2.YubicoClient;
import com.yubico.client.v2.YubicoResponse;
import com.yubico.client.v2.YubicoResponseStatus;
import com.yubico.client.v2.exceptions.YubicoValidationException;
import com.yubico.client.v2.exceptions.YubicoValidationFailure;

public class Validate {

 public static boolean validate(String otp, int client_id) throws YubicoValidationException, YubicoValidationFailure {
        YubicoClient client = YubicoClient.getClient(client_id);
        YubicoResponse response = client.verify(otp);
        if(response != null && response.getStatus() == YubicoResponseStatus.OK) {
          return true;
        }
        return false;
     }

} 
```

# android - onCheckedChanged

> ID：15974567
> 
> 赞同：1
> 
> 时间：2013-04-12T14:54:27.697
> 
> 标签：android, events, baseadapter

为什么在此适配器的活动开始时会触发 onChekedChanged 事件？如何避免这种情况？

```
class ScheduleAdapter extends BaseAdapter {
    SPMMainActivity   context;
    LayoutInflater    inflater;
    ArrayList<Action> actions;

    OnCheckedChangeListener myCheckChangList = new OnCheckedChangeListener() {
        public void onCheckedChanged(CompoundButton buttonView,boolean isChecked) {
            SPMManager.getSPMManager().setEnabled((Integer)buttonView.getTag() , isChecked);
            Log.d("debug","onChecked...");
            context.setNextAction();
            SPMManager.getSPMManager().update();
        }
    };
... 
```

UPD：解决方案是使用 onClick 代替

```
private OnClickListener checkbox_click_listener = new OnClickListener(){
        public void onClick(View v) {
            CheckBox c = (CheckBox) v ;
            SPMManager.getSPMManager().setEnabled((Integer)v.getTag() , c.isChecked());
            Log.d("onchecked","OnChecked changed");
            context.setNextAction();
            SPMManager.getSPMManager().update();
        }
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:02:23.290

```
boolean isFirst = false;
    OnCheckedChangeListener myCheckChangList = new OnCheckedChangeListener() {

        public void onCheckedChanged(CompoundButton buttonView,boolean isChecked) {
            if(isFirst){
                // Put your code here
            } else
                isFirst = false;
        }
    }; 
```

# ruby-on-rails - 在 rspec 测试中设置系统时间而不更改系统时钟

> ID：15974569
> 
> 赞同：15
> 
> 时间：2013-04-12T14:54:32.290
> 
> 标签：ruby-on-rails, ruby, rspec, timezone, clock

我正在努力让 Rails 3 应用程序准备好使用时区。我的开发机器在 EDT 中，而我托管的服务器在 UTC 中。在我的 rspec 测试中是否有办法更改 ruby​​ 正在使用的系统时区，以便我使用相同的系统时区运行测试而无需更改计算机上的系统时钟？我调查过 Delorean 和 Timecop，但它们不是我要找的。我正在寻找类似的东西

```
Time.system_time_zone = "UTC" 
```

...然后 Time.now 将返回 UTC 时间，而不是我的系统时区设置。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-12T15:01:40.330

```
before {Time.stub(:now) {Time.now.utc}} 
```

有了这个，`Time.now`在你的测试中调用任何地方，它都会以UTC返回你的系统时间。

例子：

```
describe Time do
  before {Time.stub(:now) {Time.now.utc}}

  it "returns utc as my system's time" do
    Time.now.utc?.should be_true
  end
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T14:59:19.677

Rails 准确地为您提供了您正在寻找的东西：

```
Time.zone = "UTC" 
```

查看[http://api.rubyonrails.org/classes/Time.html#method-c-zone-3D](http://api.rubyonrails.org/classes/Time.html#method-c-zone-3D)了解更多信息。

# android - 系统设置下缺少蓝牙

> ID：15974573
> 
> 赞同：2
> 
> 时间：2013-04-12T14:54:57.150
> 
> 标签：android, bluetooth, settings, android-source, android-4.2-jelly-bean

我正在将蓝牙移植到 JB（此处讨论的项目代码：[https](https://groups.google.com/forum/#!forum/renesas-emev-osp) : //groups.google.com/forum/#!forum/renesas-emev-osp）并且我设法手动启动它（启用 bttest）和通过 Power Widget 按钮。因此，代码明智的集成似乎很好，但是即使在完全干净的重建之后，在系统设置菜单下也不会出现蓝牙项目。我当然有这些：

```
$ grep BLUE *.mk
BoardConfig.mk:BOARD_HAVE_BLUETOOTH := true
BoardConfig.mk:BOARD_HAVE_BLUETOOTH_BCM := true 
```

但看起来这还不够，启用 BT 设置。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T10:45:54.660

我最近在编译自己的 AOSP 时遇到了同样的问题。

经过大量的反复试验，结果发现我在这些文件之一中缺少一个选项：

* * *

/system/etc/permissions/handheld_core_hardware.xml

/system/etc/permissions/tablet_core_hardware.xml

* * *

要编辑哪个文件取决于目录 /system/etc/permissions 中的哪个文件。

如果您具有 root 访问权限（我猜），那么您甚至可以简单地编辑设备上的相应文件，而无需重新编译/刷新（我个人使用 ES File Explorer 来执行此操作）。

只需将以下行添加到这些文件中的任何一个：

```
<feature name="android.hardware.bluetooth" /> 
```

然后启动/重新启动设备，并在系统设置中启用蓝牙选项。

干杯，

坦率

# c# - 查找上次打开的彭博窗口的索引

> ID：15974576
> 
> 赞同：2
> 
> 时间：2013-04-12T14:55:11.043
> 
> 标签：c#, bloomberg, dde

我正在使用标准 DDE 字符串打开彭博股票页面

```
<blp-1><home>MSFT US<EQUITY><GO>DES<GO> 
```

我有交易台的要求，将股票的显示窗口默认为最后打开的彭博窗口。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:03:05.290

这不可能。我们允许交易者设置偏好（windows 1,2,3,4 = blp-0, blp-1, blp-2, blp-3）然后您只需要说服他们习惯使用 3 而不是 4用于他们日常使用的窗口。

# c - 将 ebp/esp 与 edi/esi 结合使用

> ID：15974579
> 
> 赞同：1
> 
> 时间：2013-04-12T14:55:11.537
> 
> 标签：c, function, assembly, x86, nasm

我正在开发一个在汇编中实现函数并在 C 中调用它们的项目。这样做需要使用 EBP 和 ESP。 `[EBP + 8]`指向我想在我的汇编函数中反转的字符串的开头。我打算这样做：

```
cmp     esi, edi
jge     reversed
mov     al, [esi]
mov     bl, [edi]
mov     [esi], bl
mov     [edi], al
inc     esi
dec     edi
jmp     reverse_string 
```

如果我可以使用 esi 和 edi 指针，我可以找到空终止字符串的结尾。我需要使用不同的方式吗？一切都必须是索引偏移量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:06:37.463

如果`[EBP + 8]`持有字符串指针，您可以将其移至`ESI`并从那里继续。

```
mov esi,[ebp+8]
mov edi,esi
mov al,0
mov ecx,-1
cld
repne scasb   ; find the NULL terminator
dec edi
.... your original code follows 
```

# javascript - 匹配每隔一个字符

> ID：15974580
> 
> 赞同：3
> 
> 时间：2013-04-12T14:55:17.037
> 
> 标签：javascript, regex

如何将字符串中的每个第二个字符与正则表达式匹配：

```
'abcdef'.match(???) => ['a', 'c', 'e'] 
```

我有这个非正则表达式解决方案：

```
spl = []; for(var i = 0; i < str.length; i += 2) spl.push(str.charAt(i)); 
```

但寻找更优雅的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T15:02:52.893

另一种可能的方法：

```
'abcdefg'.replace(/.(.)?/g, '$1').split(''); 
```

它不需要任何垫片。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T14:58:46.560

您也可以在没有正则表达式的情况下执行此操作。

```
'abcdef'.split("").filter(function(v, i){ return i % 2 === 0; }); 
```

如果 IE<=8 支持是个问题，您可以添加[这个 polyfill](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter#Compatibility)。

* * *

另一种解决方案，更详细但性能更好，不需要垫片：

```
var str = "abcdef", output = [];
for (var i = 0, l = str.length; i < l; i += 2) {
    output.push(str.charAt(i));
} 
```

[JSPerf](http://jsperf.com/split-and-filter-vs-for-loop/4)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T14:57:46.040

您可以使用`..?`ES5[函数`map`（](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.19)可以由 shim 提供给还没有原生浏览器的浏览器）：

```
"abcde".match(/..?/g).map(function(value) { return value.charAt(0); });
// ["a", "c", "e"] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T15:07:35.773

使用`Array.prototype.map`也是一种选择：

```
var oddChars = Array.prototype.map.call('abcdef', function(i,k)
{
    if (k%2===0)
    {
        return i;
    }
}).filter(function(x)
{
    return x;
    //or if falsy values are an option:
    return !(x === undefined);
}); 
```

`oddChars`现在是`["a","c","e"]`...

# jquery - JQuery根据浏览器大小对onClick进行动画处理

> ID：15974581
> 
> 赞同：0
> 
> 时间：2013-04-12T14:55:17.263
> 
> 标签：jquery, jquery-animate, window-resize

几周以来，我一直在尝试解决以下代码，但无法弄清楚出了什么问题。当图标被选中时，下面的菜单会从左侧滑入和滑出，它还会像 Facebook 应用程序一样将元素移到右侧。但是，我需要它根据浏览器的大小略有不同（页面上的不同元素需要移动）。它在准备好文档时工作正常，但是当我调整浏览器大小时，它会尝试多次滑入和滑出，并且没有根据大小执行正确的滑动功能。任何人都可以建议吗？

```
var menuInitialized = false;

function doMenu() {

$(".c_left, .top_right, .c_right, .c_myaccount, .header_image, .c_footer, .copyright, .accepts, .myaccount, .header_logo").removeAttr('style');

var $menu = $(".c_left");
var width = $(window).width();
var status = 'closed';

if (width < 550) {
    if (!menuInitialized) {
        $('.icon-menu-2').on('click', function(event) {
            alert('small'); //test which is being activated onclick
            if (status === 'closed') {
                $menu.animate({
                    width: 185,
                    marginLeft: 0,
                    display: 'toggle'
                }, 'fast');
                $(".top_right, .c_right, .c_myaccount, .c_footer, .copyright, .accepts").animate({
                    marginLeft: 185,
                    display: 'toggle'
                }, 'fast');
                $(".myaccount").animate({
                    marginRight: -185,
                    display: 'toggle'
                }, 'fast');
                return status = 'open';
            } else if (status === 'open') {
                $menu.animate({
                    width: 0,
                    marginLeft: -185,
                    display: 'toggle'
                }, 'fast');
                $(".top_right, .c_right, .c_myaccount,.c_footer, .copyright, .accepts").animate({
                    marginLeft: 0,
                    display: 'toggle'
                }, 'fast');
                $(".myaccount").animate({
                    marginRight: 0,
                    display: 'toggle'
                }, 'fast');
                return status = 'closed';
            }
        });
        menuInitialized = true;
    }
} else if ((width < 800) && (width > 550)) {
    if (menuInitialized) {
        $('.icon-menu-2').on('click', function(event) {
            alert('large'); //test which is being activated onclick
            if (status === 'closed') {
                $menu.animate({
                    width: 185,
                    marginLeft: 0,
                    display: 'toggle'
                }, 'fast');
                $(".top_right, .c_right, .c_myaccount, .header_image, .c_footer, .copyright, .accepts").animate({
                    marginLeft: 185,
                    display: 'toggle'
                }, 'fast');
                $(".myaccount, .header_logo").animate({
                    marginRight: -185,
                    display: 'toggle'
                }, 'fast');
                return status = 'open';
            } else if (status === 'open') {
                $menu.animate({
                    width: 0,
                    marginLeft: -185,
                    display: 'toggle'
                }, 'fast');
                $(".top_right, .c_right, .c_myaccount, .header_image,.c_footer, .copyright, .accepts").animate({
                    marginLeft: 0,
                    display: 'toggle'
                }, 'fast');
                $(".myaccount, .header_logo").animate({
                    marginRight: 0,
                    display: 'toggle'
                }, 'fast');
                return status = 'closed';
                }
            });
            menuInitialized = false;
        }
    }
}
$(document).ready(doMenu);
$(window).resize(doMenu); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:00:15.003

可能是这样的：

```
var timeoutResize;
$(window).resize(function(){ 
        clearTimeout(timeoutResize);
        timeoutResize = setTimeout(doMenu,50);

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:13:37.273

我需要取消绑定点击功能，即：`$('.icon-menu').unbind('click');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:18:33.767

Roasted 的解决方案应该有效。在大多数浏览器中，随着窗口大小的调整，resize 事件会连续触发。根据您在处理程序中执行的操作，您可能需要引入延迟以等待调整大小完成，然后再执行处理程序代码。

# c# - 创建文件时出现 System.UnauthorizedAccessException

> ID：15974590
> 
> 赞同：6
> 
> 时间：2013-04-12T14:55:43.063
> 
> 标签：c#, exception

我正在尝试编写代码以便记录错误消息。我正在尝试用日期命名文件，并希望为每一天创建一个新的日志文件。经过一番环顾后，我得到了以下代码......

```
class ErrorLog
{
    public void WriteErrorToFile(string error)
    {
        //http://msdn.microsoft.com/en-us/library/aa326721.aspx refer for more info
        string fileName = DateTime.Now.ToString("dd-MM-yy", DateTimeFormatInfo.InvariantInfo);

        //@ symbol helps to ignore that escape sequence thing
        string filePath = @"c:\users\MyName\mydocuments\visual studio 2012\projects\training\" +
                            @"discussionboard\ErrorLog\" + fileName + ".txt";

        if (File.Exists(filePath))
        {
           // File.SetAttributes(filePath, FileAttributes.Normal);
            File.WriteAllText(filePath, error);
        }
        else
        {
            Directory.CreateDirectory(filePath);
           // File.SetAttributes(filePath, FileAttributes.Normal)
           //Throws unauthorized access exception
            RemoveReadOnlyAccess(filePath);
            File.WriteAllText(filePath, error);
        }
    }

    public static void RemoveReadOnlyAccess(string pathToFile)
    {
        FileInfo myFileInfo = new FileInfo(pathToFile);
        myFileInfo.IsReadOnly = false;
        myFileInfo.Refresh();
    }

    /*Exception thrown:
     * UnAuthorizedAccessException was unhandled.
     * Access to the path 'c:\users\anish\mydocuments\visual studio 2012\
     * projects\training\discussionboard\ErrorLog\04\12\2013.txt' is denied.
     */
} 
```

我发现一个讨论过类似问题的论坛，但使用 File.SetAttrributes(filePath, FileAttributes.Normal) 并没有帮助 RemoveReadOnlyAccess （包含在上面的代码中）。当我检查文件夹的属性时，它已标记为只读，但即使我勾选它，它也会再次出现。我检查了文件夹的权限，除了我无法更改的特殊权限外，一切都是允许的。任何关于我应该如何进行的建议将不胜感激。 [为什么访问路径被拒绝？](https://stackoverflow.com/questions/8821410/system-unauthorizedaccessexception-access-to-the-path-denied)该链接讨论了类似的问题，但我无法使用那里列出的建议来解决问题。

感谢您花时间看这个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T15:06:25.470

您的路径很奇怪：“我的文档”目录必须是“C:\Users\MyName\Documents\”

您可以使用 Environment 来轻松纠正它：

```
String myDocumentPath = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments); 
```

请注意，它将访问运行您的 exe 的用户的“我的文档”文件夹。

第二个错误，CreateDirectory 在参数中必须有路径，而不是文件。像你一样使用将创建一个带有文件名的子目录。所以你不能用这个名字创建一个文件！

尝试这个 ：

```
String fileName = DateTime.Now.ToString("d", DateTimeFormatInfo.InvariantInfo);

String filePath = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments)
    + @"\visual studio 2012\projects\training\discussionboard\ErrorLog\";
String fileFullName = filePath + fileName + ".txt";

    if (File.Exists(fileFullName ))
    {
        File.WriteAllText(fileFullName , error);
    }
    else
    {
        Directory.CreateDirectory(filePath);

[...]
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T15:03:59.057

一些可能的原因：

*   您的应用程序未在允许访问该路径/文件的帐户下运行
*   该文件被其他进程锁定以进行写入（或者也可能读取）

第一种情况可以通过检查进程在哪个帐户下运行并验证该帐户是否具有适当的权限来解决。

另一种情况可以通过检查是否有任何其他进程正在锁定文件来解决（例如，使用“WhosLocking”或“ProcessExplorer”等工具

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-27T21:02:45.227

我必须以管理员身份运行我的应用程序才能写入 c: 中的受保护文件夹。例如，如果在 Visual Studio 中调试您的应用程序，请确保右键单击“C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE\devenv.exe”并选择“以管理员身份运行”。然后从那里打开您的解决方案。我的应用程序试图写入 c:\

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-24T20:30:57.870

检查您的防病毒软件，它可能会阻止文件创建。

# android - 使用视频播放器完成动作

> ID：15974604
> 
> 赞同：0
> 
> 时间：2013-04-12T14:56:16.417
> 
> 标签：android, android-mediaplayer, android-video-player

当仅安装默认播放器并且有多个播放器失败时，我的应用程序会从 URL 播放视频。我想显示安装播放器的对话框，如图[http://mizuu.tv/wp-content/uploads/2012/07/default_video_player.jpg](http://mizuu.tv/wp-content/uploads/2012/07/default_video_player.jpg)，我尝试按照这些帖子安装播放器[android-list已安装媒体播放器](https://stackoverflow.com/questions/12972445/android-list-of-installed-media-players?rq=1)，[如何获取已安装媒体播放器列表](https://stackoverflow.com/questions/4586684/how-to-get-a-list-of-installed-media-players)以及[如何以编程方式获取已安装视频播放器列表？](https://stackoverflow.com/questions/8119379/how-to-get-a-list-of-installed-video-players-programmatically)但它继续失败。

提前谢谢大家

此帖子没有答案[播放视频前询问要播放的视频播放器](https://stackoverflow.com/questions/15944631/before-play-video-ask-about-the-video-player-to-play)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T07:48:02.660

我尝试通过在 Manifest 中添加此代码来强制使用 MediaPlayer 而不是要求视频播放器，因为由于视频来自互联网，因此浏览器始终显示为播放器

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />  
    <data android:mimeType="video/*" />
    <data android:mimeType="application/sdp" />
    <data android:pathPattern=".*3gp" />
    <data android:pathPattern=".*3GP" />
    <data android:pathPattern=".*mp4" />
    <data android:pathPattern=".*MP4" />
</intent-filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:16:47.237

您应该使您的应用程序能够响应选择意图。

具体来说，您将在 AndroidManifest 文件中声明一个响应音频/视频意图（我不知道名称）的具体内容`intent-filter`。`action`

# javascript - 我如何让它变得简单？

> ID：15974614
> 
> 赞同：-2
> 
> 时间：2013-04-12T14:56:51.563
> 
> 标签：javascript, arrays, dom

以下代码正在查找最大数字，如果存在任何值，那么我想将其与一个添加它为什么我需要这个我想存储唯一值

```
var xmlDoc=xmlHttpRequest.responseXML;
    var recordSet = xmlDoc.getElementsByTagName("RECORD");
    for(var j=0;j<recordSet.length;j++)
    {
        expNbrVal[j] = recordSet[j].getElementsByTagName("COL")[0].firstChild.data;
    }
    largest = expNbrVal[0];
    for(var jc=1;jc<expNbrVal.length;jc++)
    {
        if(parseInt(expNbrVal[jc])>parseInt(largest))
        {
            largest =  expNbrVal[jc];
        }
    }
    if(recordSet.length>0)
    {
        var expval = parseInt(largest);
        document.getElementById("expenseNbr").value = expval+1;
    }
    else
    {
        document.getElementById("expenseNbr").value =1;
    }
    expNbrVal.length =0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:07:51.667

我不知道原始代码，并且您正在使用一些已经存在的值，所以我不知道这是否有效，但这就是我将从中得到的。

```
Array.max = function( array ){
    return Math.max.apply( Math, array );
};
var array = [];
var xmlDoc=xmlHttpRequest.responseXML;
var recordSet = xmlDoc.getElementsByTagName("RECORD");

if(recordSet.length>0) {
    for(var j=0; j<recordSet.length; j++) {
        array.push(parseInt(recordSet[j].getElementsByTagName("COL")[0].firstChild.data));
    }
    var largest = Array.max(array);
}else{
    var largest = 0;
}
document.getElementById("expenseNbr").value = largest + 1; 
```

# php - PHP & MySQL 总行计数条件

> ID：15974615
> 
> 赞同：0
> 
> 时间：2013-04-12T14:56:51.950
> 
> 标签：php, mysql, conditional-statements, counting

我有一个问题来计算有条件的总行数。这是我的代码

```
$pagesize = 10;
$recordstart = (int)$_GET['recordstart'];
$recordstart = (isset($_GET['recordstart'])) ? $recordstart : 0;

$town = $_GET['label_town'];
$sub = ucfirst($_GET['label_sub']); 
```

这是我的选择条件。我也使用这个条件来计算总行数

```
if (isset($_GET['label_town']) === true && isset($_GET['label_sub']) === true) {
$where = "WHERE p.label_town = '$town' AND p.label_sub = '$sub' AND `visible` = 1";
} else if (isset($_GET['label_town']) === true && isset($_GET['label_sub']) === false) {
$where = "WHERE p.label_town = '$town' AND `visible` = 1";
} else {
$where = "WHERE `visible` = 1";
}

// Selecting data 
$all_page_index = mysql_query("SELECT p.page_id, p.timestamp, p.label_town, p.label_sub, p.ime_nekretnine, p.mjesto, p.cijena_noc, p.krevet_apart, p.broj_apart, p.min_nocenja, p.description, p.visits, i.image_id, i.page_id, i.ext
FROM data_page AS p
LEFT JOIN (
SELECT MAX( image_id ) AS max, page_id
FROM images
GROUP BY page_id
) AS n ON p.page_id = n.page_id
LEFT JOIN images AS i ON i.image_id = n.max
$where
ORDER BY p.page_id DESC
LIMIT $recordstart, $pagesize");

// Counting rows with conditions
function totalrows() {
    return mysql_result(mysql_query("SELECT COUNT(p.page_id) FROM data_page AS p $where"), 0);
} 
```

选择和显示数据工作正常，但问题在于 SELECT COUNT。无论条件如何，始终计算总行数。我在哪里做错了？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:00:37.687

您`COUNT`在函数定义中，其中`$where`未定义。您需要将其作为参数传递或将查询移到函数之外。

# android - Android WebView - 它支持摘要身份验证吗？

> ID：15974618
> 
> 赞同：2
> 
> 时间：2013-04-12T14:56:58.397
> 
> 标签：android, android-webview

我认为标题是不言自明的。我找不到任何提到 WebViews 支持摘要式身份验证的资源或参考资料。

几个警告：

*   我不是在谈论使用 base64 编码发送授权标头的基本身份验证。

*   我只是在谈论嵌入在应用程序中的 WebView，而不是简单的 http 请求，例如可以使用 apache http 客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:48:28.310

您可以在您的 WebView 中设置一个 WebViewClient 并在您的 WebViewClient 中覆盖以下方法，请参见下面的代码..

```
private class ExWebChromeClient extends WebViewClient {
    @Override
    public void onReceivedHttpAuthRequest(WebView view, HttpAuthHandler handler, String host, String realm) {
        super.onReceivedHttpAuthRequest(view, handler, host, realm);    //To change body of overridden methods use File | Settings | File Templates.
    }
}

webView.setWebViewClient(new ExWebChromeClient());//set your Extended WebViewClient here 
```

在这里您可以显示一个身份验证对话框。请在此处查看[Android 本机浏览器应用程序中的 showHttpAuthentication 方法](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/webkit/CallbackProxy.java#CallbackProxy.onReceivedHttpAuthRequest%28android.webkit.HttpAuthHandler%2Cjava.lang.String%2Cjava.lang.String%29)，这里显示并在 WebView 中正确处理了一个 http 身份验证对话框

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-18T11:00:06.297

这对我有用：

```
webView.setHttpAuthUsernamePassword("domain", "realm", "username", "password");
webView.loadUrl("http://domain:port/url/"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:52:24.587

使用[setHttpAuthUsernamePassword](http://developer.android.com/reference/android/webkit/WebView.html#setHttpAuthUsernamePassword%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)方法`WebView`指定要使用的用户名和密码。它用于基本和摘要身份验证请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-06T19:36:10.780

一言以蔽之，它确实支持 HTTP 摘要认证。我已经测试并确定了。

# css - 选择不在某些元素内的元素

> ID：15974628
> 
> 赞同：9
> 
> 时间：2013-04-12T14:57:15.623
> 
> 标签：css, css-selectors

使用 CSS3，有没有办法选择不在某个类的元素中的元素？例如，在下面的示例中，如何选择不在(ie, but not )`class="bar"`的元素内的元素？`class="foo"``id="2"``id="1"`

```
<div class="foo">
  ... arbitrary depth ...
    <div class="bar" id="1">
      ...
    </div>
  ...
</div>
...
  <div class="bar" id="2">
    ...
  </div>
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:19:43.693

根据[MDN](https://developer.mozilla.org/en-US/docs/CSS/%3anot)，`:not()`将根据某些条件匹配一个元素，它不会返回“非元素”。

我不知道任何伪选择器来测试**所有父母**的某些条件，所以我个人会使用这样的解决方法：

```
div {background: yellow;}
.bar {background: green;}
.foo .bar {background: yellow;} /*repeat original styles changed by .bar*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T22:33:37.653

## 如果`.foo`本身不是任意深

假设*标签*`.foo` *的深度是已知的`body`*（您的问题仅表示*内* `.foo`的任意深度，或者`.bar`不管 in 或 out 的任意深度`.foo`），那么类似以下代码的代码可以`.bar`为`.foo`. 对于第一个示例，我假设`.foo`是 的直接子级`body`，但如果不是，则必须稍微修改代码以适应适当的深度`.foo`（参见第二个示例）：

```
body > :not(.foo) .bar,
body > .bar {
    /* styles */
} 
```

[**请参阅上述代码的小提琴。**](http://jsfiddle.net/QAb9C/2/)

这只有在`.foo`没有嵌套太深的情况下才实用，因为`.bar`定位必须在`.foo`与之前的任何更高级别相同的级别上进行说明。因此，例如，如果`.foo`是 的孙子`body`，则需要以下内容：

```
body > * > :not(.foo) .bar, /* deeper levels checking for no .foo parent */
body > .bar, /* child level */
body > * > .bar { /* grandchild level; equal to .foo's level */
    /* styles */
} 
```

[**请参阅上述代码的小提琴。**](http://jsfiddle.net/QAb9C/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:08:41.073

不幸的是，让它工作的唯一方法是使用 :not 语法并通过元素或类名指定 1 层深度

这是小提琴：http: [//jsfiddle.net/2V7Wc/](http://jsfiddle.net/2V7Wc/)

html

```
<div class="foo">
    <div class="bar" id="one">
    </div>
</div>
<div class="bar" id="two">
</div> 
```

CSS：

```
.bar:not(#one) {
   /* styles */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T15:26:03.770

我会使用以下内容：

```
.bar {
    color:red;
}

.foo ~ .bar{
    color:green;
} 
```

看这个演示：http: [//jsfiddle.net/QR3kP/](http://jsfiddle.net/QR3kP/)

# python - 出现最大递归，Keller Box 出了什么问题？

> ID：15974631
> 
> 赞同：0
> 
> 时间：2013-04-12T14:57:20.360
> 
> 标签：python, numpy

这是非语法错误代码，但我似乎无法修复递归错误。在这里需要一些帮助。基于 matlab 的算法，我已经阅读了 matlab 上的教程，但我似乎可以弄清楚我错过了哪一部分。

```
import numpy as npy

blt = int(raw_input("Input the boundary layer thickness = "))
deleta = float(raw_input("Input the step size of boundary layer thickness = "))
np = int((blt/deleta) + 1)
stop = 1
k=1
l=2
g=2
eselon = 0.00001

def eta(j,k):
    if j == 1 and k == 1:
        return 0
    else:
        return eta(j-1,k) + deleta;
deta = deleta
def etanp():
    return eta(np,k)       
def f(j,k):
    return -eta(np,1)*etab2 + etanp()*etab1 + eta(j,1)
def u(j,k):
    return  -3*etab1 + 2*etab +1
def v(j,k):
    return (-6/etanp()*etab + (2/etanp()))
def fb(j,k):
    return 0.5 * (f(j,k) + f(j-1,k))
def ub(j,k):
    return 0.5 * (u(j,k) + u(j-1,k))
def vb(j,k):
    return 0.5*(v(j,k) + v(j-1,k))
def fvb(j,k):
    return fb(j,k)*vb(j,k)
def uub(j,k):
    return ub(j,k) * ub(j,k)

def a1(j,k):
    return 1 + 0.5*deta *fb(j,k)
def a2(j,k):
    return -1 + 0.5*deta *fb(j,k)
def a3(j,k):
    return 0.5 * deta * vb(j,k)
def a4(j,k):
    return a3(j,k)
def a5(j,k):
    return -1 * deta * ub(j,k)
def a6(j,k):
    return a5(j,k)

def r1(j,k):
    return f(j-1,k) - f(j,k) + deta * ub(j,k)
def r2(j,k):
    return u(j-1,k) - u(j,k) + deta * vb(j,k)
def r3(j,k):
    return v(j-1,k)-v(j,k) - deta *((fvb(j,k)*uub(j,k)))-deta

def AJ(j,k):
    if j == 2:
        return npy.matrix([[0,1,0],[-0.5*deta,0,-0.5*deta],[a2(2,k), a3(2,k), a1(2,k)]])
    else:
        return npy.matrix([[-0.5*deta,0,0],[-1,0,-0.5*deta],[a6(j,k),a3(j,k),a1(j,k)]])
def BJ(j,k):
    return npy.matrix([[0,-1,0],[0,0,-0.5*deta],[0,a4(j,k),a2(j,k)]])
def CJ(j,k):
    return npy.matrix([[-0.5*deta,0,0],[1,0,0],[a5(j,k),0,0]])

def alfa(j,k):
    if j == 2:
        return AJ(2,k)

    else:   
        return AJ(j,k) - (BJ(j,k)*gamma(j-1,k))
def gamma(j,k):
    if j == 2:
        return npy.matrix.I((alfa(2,k))*CJ(2,k))
    else:
        return npy.matrix.I((alfa(j,k))*CJ(j,k))
def rr(j,k):
    return npy.matrix([[r1(j,k)],[r2(j,k)],[r3(j,k)]])   
def ww(j,k):
    if j == 2:
        return npy.matrix.I(AJ(2,k)*rr(2,k))
    else:
        return npy.matrix.I((alfa(j,k))*(rr(j,k)-(BJ(j,k)*ww(j-1,k))))

def dell(j,k):
     if j == np:
        return ww(np,k)
     else:   
        return ww(j,k) - (gamma(j,k)*dell(j+1,k))
def delf(j,k):
    if j == 1:
        return 0
    elif j == 2:
        return dell(2,k)[1,0]
    else:
        return dell(j,k)
def delu(j,k):
    if j == 1 or j == np:
        return 0
    elif j == np-1:
        return dell(j,k)[0,0]
def delv(j,k):
    if j == 1:
        return dell(2,k)[0,0]
    elif j == 2:
        return dell(2,k)[2,0]
    else:
        return dell(j,k)[2,0]

def ffinal(j,l):
    return f(j,k) + delf(j,k)
def ufinal(j,l):
    return u(j,k) + delu(j,k)
def vfinal(j,l):
    return v(j,k) + delv(j,k)

# Beginning of calculation for Keller-Box

while stop > eselon:
    eta(1,1)
    for j in range (2,np):
        eta(j,k)  

# Initial condition
    etab = eta(j,k) / eta(np,k)
    etab1 = etab**2
    etab2 = etab**3 
    for j in range (1,np):
        deta
        f(j,1)
        u(j,1)
        v(j,1)

# Current value of Central Differentiation
    for j in range (2,np):
        fb(j,k)
        ub(j,k)
        vb(j,k)
        fvb(j,k)
        uub(j,k)
        a1(j,k)
        a2(j,k)
        a3(j,k)
        r1(j,k)
        r2(j,k)
        r3(j,k)
# Matrices Value for A1, Aj, Bj, and CJ
        CJ(j,k)
        AJ(j,k)
        BJ(j,k)
# Recursion: Forward Sweeping
    for j in range (3,np):
        alfa(j,k)
        gamma(j,k)
    for j in range(2,np):
        rr(j,k)
    for j in range(3,np):
        ww(j,k)

# Recursion: Backward Sweeping
    for j in range (np-1,2,-1):
        dell(j,k)

    for j in range (np,3,-1):
        delu(j-1,k)
        delf(j,k)
        delv(j,k)

# Newton's Method
    for j in range (1,np):
        ffinal(j,l)
        ufinal(j,l)
        vfinal(j,l)

# Check the convergence of iteration
    stop = npy.abs(delv(1,k))
    kmax = k
    k =+ 1

cfrex = vfinal(1,kmax)
print cfrex 
```

这是我从 mathlab 使用的参考资料

```
*******************************************************************
Input
*******************************************************************
blt = input ('Input the boundary layer thickness = ');
deleta=0.1; %input('Input the step size of boundary layer thickness=');
np = (blt / deleta)+ 1;
pr = 7; %input ('Input the prandtl number = ');
K = 0; %input ('Input the material parameter K = ');
lambda = 1; %input ('Input the mixed convection parameter = ');
stop = 1.0; k = 1; eselon = 0.00001;
while stop > eselon
eta(1,1) = 0.0;
for j = 2:np
eta(j,1) = eta(j-1,1) + deleta;
end
*******************************************************************
Initial Condition for f, u, v, h, p, s, t
*******************************************************************
etanpq = eta(np,1)/3;
etau15 = 1/eta(np,1);
etau16 = 2/eta(np,1);
etanp = eta(np,1);
for j =1:np
deta(j,k)= deleta;
etab = eta(j,1)/eta(np,1);
etab1 = etab^2;
etab2 = etab^3;
etau152 = etau15^2;
etau162 = etau16^2;
f(j,1) = -etanpq * etab2 + etanp * etab1;
u(j,1) = -etab1 + 2 * etab;
v(j,1) = -etau16 * etab + etau16;
h(j,1) = etau15 * etab - etau15;
p(j,1) = etau152;
s(j,1) = -eta(j,1) + eta(j,1) * etab;
t(j,1) = -1 + 2 * etab;
end

*******************************************************************
Current Central Differention Value
*******************************************************************
for j = 2:np
fb(j,k) = 0.5*(f(j,k) + f(j-1,k));
ub(j,k) = 0.5*(u(j,k) + u(j-1,k));
vb(j,k) = 0.5*(v(j,k) + v(j-1,k));
hb(j,k) = 0.5*(h(j,k) + h(j-1,k));
pb(j,k) = 0.5*(p(j,k) + p(j-1,k));
sb(j,k) = 0.5*(s(j,k) + s(j-1,k));
tb(j,k) = 0.5*(t(j,k) + t(j-1,k));
fvb(j,k) = fb(j,k) * vb(j,k);
uub(j,k) = ub(j,k) ^ 2;
pfb(j,k) = pb(j,k) * fb(j,k);
hub(j,k) = hb(j,k) * ub(j,k);
tfb(j,k) = tb(j,k) * fb(j,k);
sub(j,k) = sb(j,k) * ub(j,k);
*******************************************************************
Momentum Differential Equation
*******************************************************************
a1(j,k) = (1.0 + K) + 0.5 * deta(j,k) * fb(j,k);
a2(j,k) = -(1.0 + K) + 0.5 * deta(j,k) * fb(j,k);
a3(j,k) = 0.5 * deta(j,k) * vb(j,k);
a4(j,k) = a3(j,k);
a5(j,k) = -1 * deta(j,k) * ub(j,k);
a6(j,k) = a5(j,k);
a7(j,k) = 0.5 * K * deta(j,k);
a8(j,k) = a7(j,k);
a9(j,k) = 0.5 * lambda * deta(j,k);
a10(j,k) = a9(j,k);
*******************************************************************
Angel Differential
*******************************************************************
b1(j,k) = (1 + K/2) + 0.5 * deta(j,k) * fb(j,k);
b2(j,k) = -(1 + K/2) + 0.5 * deta(j,k) * fb(j,k);
b3(j,k) = 0.5 * deta(j,k) * pb(j,k);
b4(j,k) = b3(j,k);
b5(j,k) = -0.5 * deta(j,k) * hb(j,k);
b6(j,k) = b5(j,k);
b7(j,k) = -0.5 * deta(j,k) * ub(j,k) - K * deta(j,k);
b8(j,k) = b7(j,k);
b9(j,k) = -0.5 * K * deta(j,k);
b10(j,k) = b9(j,k);

*******************************************************************
Energy Differential
*******************************************************************
c1(j,k) = 1/pr + 0.5 * deta(j,k) * fb(j,k);
c2(j,k) = -1/pr + 0.5 * deta(j,k) * fb(j,k);
c3(j,k) = 0.5 * deta(j,k) * tb(j,k);
c4(j,k) = c3(j,k);
c5(j,k) = -0.5 * deta(j,k) * sb(j,k);
c6(j,k) = c5(j,k);
c7(j,k) = -0.5 * deta(j,k) * ub(j,k);
c8(j,k) = c7(j,k);
*******************************************************************
Definition value of  rj-1/2
*******************************************************************
r1(j,k) = f(j-1,k) - f(j,k) + deta(j,k) * ub(j,k);
r2(j,k) = u(j-1,k) - u(j,k) + deta(j,k) * vb(j,k);
r3(j,k) = h(j-1,k) - h(j,k) + deta(j,k) * pb(j,k);
r4(j,k) = s(j-1,k) - s(j,k) + deta(j,k) * tb(j,k);
r5(j,k) = (1.0 + K) * (v(j-1,k) - v(j,k)) - deta(j,k) * fvb(j,k) -...
deta(j,k)+ deta(j,k) * uub(j,k) - K * deta(j,k)...
* pb(j,k) - lambda * deta(j,k) * sb(j,k);
r6(j,k) = (1 + K/2) * (p(j-1,k) - p(j,k)) - deta(j,k) * pfb(j,k) + ...
deta(j,k) * hub(j,k) + 2 * K * deta(j,k) * hb(j,k) + ...
K * deta(j,k) * vb(j,k);
r7(j,k) = 1/pr * (t(j-1,k) - t(j,k)) - deta(j,k) * tfb(j,k) +...
deta(j,k) * sub(j,k);
end
*******************************************************************
Matrices Value A1, Aj, Bj, Cj
*******************************************************************
a{2,k} = [0 0 0 1 0 0 0 ;...
-0.5 * deta(2,k) 0 0 0 -0.5 * deta(2,k) 0 0;...
0 -0.5 * deta(2,k) 0 0 0 -0.5 * deta(2,k) 0;...
0 0 -1 0 0 0 -0.5 * deta(2,k);...
a2(2,k) a8(2,k) a10(2,k) a3(2,k) a1(2,k) a7(2,k) 0;...
b10(2,k) b2(2,k) 0 b3(2,k) b9(2,k) b1(2,k) 0;...
0 0 c8(2,k) c3(2,k) 0 0 c1(2,k)];

for j = 3:np
a{j,k} = [-0.5 * deta(j,k) 0 0 1 0 0 0 ;...
-1 0 0 0 -0.5 * deta(j,k) 0 0 ;...
0 -1 0 0 0 -0.5 * deta(j,k) 0 ;...
0 0 -1 0 0 0 -0.5 * deta(j,k);...
a6(j,k) 0 a10(j,k) a3(j,k) a1(j,k) a7(j,k) 0;...
b6(j,k) b8(j,k) 0 b3(j,k) b9(j,k) b1(j,k) 0;...
c6(j,k) 0 c8(j,k) c3(j,k) 0 0 c1(j,k)];

b{j,k} = [0 0 0 -1 0 0 0 ;...
0 0 0 0 -0.5 * deta(j,k) 0 0;...
0 0 0 0 0 -0.5 * deta(j,k) 0;...
0 0 0 0 0 0 -0.5 * deta(j,k);...
0 0 0 a4(j,k) a2(j,k) a8(j,k) 0;...
0 0 0 b4(j,k) b10(j,k) b2(j,k) 0;...
0 0 0 c4(j,k) 0 0 c2(j,k)];
end

for j = 2:np
c{j,k} = [-0.5 * deta(j,k) 0 0 0 0 0 0 ;...
1 0 0 0 0 0 0;...
0 1 0 0 0 0 0;...
0 0 1 0 0 0 0;...
a5(j,k) 0 a9(j,k) 0 0 0 0;...
b5(j,k) b7(j,k) 0 0 0 0 0;...
c5(j,k) 0 c7(j,k) 0 0 0 0];
end

*******************************************************************
Recursion of block Elimination
*******************************************************************
Forward Sweeping
*******************************************************************
alfa{2,k} = a{2,k};
gamma{2,k} = inv(alfa{2,k}) * c{2,k};
for j = 3:np
alfa{j,k} = a{j,k} - (b{j,k} * gamma{j-1,k});
gamma{j,k} = inv(alfa{j,k}) * c{j,k};
end
for j = 2:np
rr{j,k} = [r1(j,k); r2(j,k); r3(j,k); r4(j,k); r5(j,k); r6(j,k);...
r7(j,k)];
end
ww{2,k} = inv(alfa{2,k}) * rr{2,k};

for j = 3:np
ww{j,k} = inv(alfa{j,k}) * (rr{j,k} - (b{j,k} * ww{j-1,k}));
end
*******************************************************************
Backward Sweeping
*******************************************************************
delf(1,k) = 0.0;
delu(1,k) = 0.0;
delh(1,k) = 0.0;
delt(1,k) = 0.0;
delu(np,k) = 0.0;
delh(np,k) = 0.0;
dels(np,k) = 0.0;
dell{np,k} = ww{np,k};
for j = np-1:-1:2
dell{j,k} = ww{j,k} -(gamma{j,k} * dell{j+1,k});
end
delv(1,k) = dell{2,k}(1,1);
delp(1,k) = dell{2,k}(2,1);
dels(1,k) = dell{2,k}(3,1);
delf(2,k) = dell{2,k}(4,1);
delv(2,k) = dell{2,k}(5,1);
delp(2,k) = dell{2,k}(6,1);
delt(2,k) = dell{2,k}(7,1);
for j = np:-1:3
delu(j-1,k) = dell{j,k}(1,1);
delh(j-1,k) = dell{j,k}(2,1);
dels(j-1,k) = dell{j,k}(3,1);
delf(j,k) = dell{j,k}(4,1);
delv(j,k) = dell{j,k}(5,1);
delp(j,k) = dell{j,k}(6,1);
delt(j,k) = dell{j,k}(7,1);
end

*******************************************************************
Newton method
*******************************************************************
for j = 1:np
f(j,k+1) = f(j,k) + delf(j,k);
u(j,k+1) = u(j,k) + delu(j,k);
v(j,k+1) = v(j,k) + delv(j,k);
h(j,k+1) = h(j,k) + delh(j,k);
p(j,k+1) = p(j,k) + delp(j,k);
s(j,k+1) = s(j,k) + dels(j,k);
t(j,k+1) = t(j,k) + delt(j,k);
h(j,k+1) = -0.5 * v(j,k+1);
end
*******************************************************************
Convergence Check
*******************************************************************
stop = abs(delv(1,k));
kmax = k;
k = k + 1;
end
*******************************************************************
Skin Friction and Nusselt Number
*******************************************************************
cfrex = v(1,kmax)
nuxrex = 1/s(1,kmax)
nuxrex2 = s(1,kmax) 
```

但是，我的研究案例仅涵盖 f、u 和 v，因此，初始条件有一些变化。和许多其他部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T01:03:58.733

无限递归将发生在这两个函数中：

```
def alfa(j,k):
    return AJ(j,k) - (BJ(j,k)*gamma(j,k))
def gamma(j,k):
    return npy.matrix.I((alfa(g,k))*CJ(g,k)) 
```

在任何情况下，它们中的每一个都会调用另一个。所以，`alfa`调用`gamma`哪个调用`alfa`哪个调用`gamma`等等永远。

如果我们添加一个打印语句，我们可以看到这一点：

```
def alfa(j,k):
    print 'alfa({},{}) called'.format(j,k)
    return AJ(j,k) - (BJ(j,k)*gamma(j,k))
def gamma(j,k):
    print 'gamma({},{}) called'.format(j,k)
    return npy.matrix.I((alfa(g,k))*CJ(g,k)) 
```

然后我们可以看到发生了什么：

```
In [199]: alfa(3,1)
alfa(3,1) called
gamma(3,1) called
alfa(2,1) called
gamma(2,1) called
alfa(2,1) called
gamma(2,1) called
alfa(2,1) called
gamma(2,1) called
alfa(2,1) called
gamma(2,1) called
alfa(2,1) called
gamma(2,1) called
alfa(2,1) called
gamma(2,1) called
alfa(2,1) called
gamma(2,1) called
alfa(2,1) called
gamma(2,1) called
alfa(2,1) called
gamma(2,1) called
alfa(2,1) called
gamma(2,1) called
alfa(2,1) called
gamma(2,1) called
alfa(2,1) called
gamma(2,1) called 
```

... 等等

# css - 设置部分高度时的css布局问题

> ID：15974633
> 
> 赞同：0
> 
> 时间：2013-04-12T14:57:35.197
> 
> 标签：css, html

我正在用 HTML5 编写一个基本的网站，我已经准备好所有的网站结构，到目前为止一切都运行良好。

但是，我有一个部分似乎有点自行消失。

一旦我到达该部分的高度，这些部分就会移动到顶部两个部分后面的文章顶部，该部分中的实际内容保持在原位。

```
 <article><section class="welcome-box">
    <section class="welcome-wrapper">

        <div class="welcome-hello">
            <div class="welcome-hellotext">HELLO, WELCOME TO SAA RECRUITMENT </div>
        </div>

        <div class="welcome-line"></div>

        <div class="welcome-textbox">
            <div class="welcome-textboxtext">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo.</div>
        </div>

        <div class="welcome-button">
            <div class="welcome-buttontext">READ MORE</div>
        </div>
    </section>
</section>

<section class="home-slider">
    <div class="slider-wrapper">
        <div id="slider">
            <div class="slide1">
                <img src="images/slide_1.jpg" alt="" />
            </div>
            <div class="slide2">
                <img src="images/slide_2.jpg" alt="" />
            </div>
            <div class="slide3">
                <img src="images/slide_3.jpg" alt="" />
            </div>
            <div class="slide4">
                <img src="images/slide_4.jpg" alt="" />
            </div>
        </div>
        <div id="slider-direction-nav"></div>
        <div id="slider-control-nav"></div>
    </div>
</section>
<!-- Slider Script -->
<script type="text/javascript">
    $(document).ready(function() {
        var slider = $('#slider').leanSlider({
            directionNav: '#slider-direction-nav',
            controlNav: '#slider-control-nav'
        });
    });
</script>
 <!-- End Slider Script -->
<section class="about-box">
    <div class="about-boxtitle">TITLE HERE</div>
    <div class="about-boxline"></div>
    <div class="about-boxtext"></div>
</section>

<section class="news-box">
    <div class="news-boxtitle">NEWS</div>
    <div class="news-boxline"></div>
    <div class="news-boxtext"></div>
</section>

<section class="clients-box">
    <div class="clients-boxtitle">CLIENTS</div>
    <div class="clients">client</div>
    <div class="clients">client</div>
    <div class="clients">client</div>        
</section>   

    </article> 
```

我遇到问题的部分是一类“客户盒”（最后一节）

这是CSS：

```
.clients-box {
        width: 960px;
        margin-top: 10px;
        background-color: #FFF;
    }

    ul.clients {
        width: 940px;
        height: 40px;
        margin: 0 auto 0;
    }

    ul.clients li.client {
        width: 150px;
        height: 40px;
        display: inline-block;
        background-color: #039;
        clear: both; 
```

该网站位于此处：[http ://dev.saarecruitment.com/](http://dev.saarecruitment.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:01:21.423

`.clients-box`需要`float: left`或`float: right`。您可以`margin: 10px auto`使用 10 像素的顶部/底部边距将其添加到中心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:01:40.073

您已经使用`float`了以上所有内容，`<sections>`这意味着它们不占用空间。因此，这个盒子到达了顶部，在浮动元素的下方。

最简单的方法是也将 a`float: left`应用于此框。

另一种方法，灵感来自@Mr。外星人将只适用`clear:left`于这个块。

# macos - 如何在 OSX 上使用 Automator 复制文本文件中的每一行文本？

> ID：15974635
> 
> 赞同：1
> 
> 时间：2013-04-12T14:57:44.070
> 
> 标签：macos, text, applescript, clipboard, automator

交易是这样的：

我使用[http://www.clipmenu.com/](http://www.clipmenu.com/) ClipMenu 有 20 种状态的剪贴板，因为我需要复制一些分隔的 txt 文件的每一行。所以我打开 txt 文件，然后遍历每一行点击`command`+ `shift`+`→</kbd> then `command`+`c` then `↑</kbd> and so on until i reach the top and i have all the lines copied and stored in the history of ClipMenu.``

我的问题是，有没有办法制作一个以自动方式复制每一行的服务或脚本？我想我可以制作一个重复这些击键的脚本，直到它到达 txt 文件的顶部，但我不知道如何做到这一点。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:04:10.607

ClipMenu 似乎忽略了“瞬态”剪贴板，因此您还需要在复制操作之间进行延迟：

```
read POSIX file "/Users/username/Documents/test.txt" as «class utf8»
repeat with p in reverse of paragraphs of result
    if contents of p is not "" then set the clipboard to contents of p
    delay 1
end repeat 
```

或使用 UI 脚本：

```
delay 1
tell application "TextEdit"
    activate
    set n to number of paragraphs of document 1
end tell
tell application "System Events"
    key code {125, 123} using command down
    repeat n times
        key code 124 using {shift down, command down}
        keystroke "c" using command down
        key code 126
        delay 1
    end repeat
end tell 
```

关键代码列在 Events.h 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:27:48.723

我不知道如何使用 Automator 来做到这一点，但使用单声道 [MonoMac] 非常简单：

```
using (System.IO.FileStream file = new System.IO.FileStream("path", System.IO.FileMode.Open, System.IO.FileAccess.Read, System.IO.FileShare.Read)) {
    using (System.IO.StreamReader reader = new System.IO.StreamReader(file)) {
        while (!reader.EndOfStream) {
            String line = reader.ReadLine ();
            System.Windows.Forms.Clipboard.SetText(line);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:05:27.290

尝试：

```
set fileText to read (choose file) as «class utf8»

set filePara to paragraphs of fileText
repeat with aPara in filePara
    set aPara to contents of aPara
    if aPara ≠ "" then set the clipboard to aPara
    end repeat 
```

# sql - 在 Oracle SQL SELECT 中设置连接列的宽度

> ID：15974636
> 
> 赞同：1
> 
> 时间：2013-04-12T14:57:45.460
> 
> 标签：sql, oracle, width

我正在尝试在 Oracle 中设置连接列的宽度，但我不确定如何完成此操作。

我有这样的事情（简化）：

```
SELECT t.first_name || ' ' || t.family_name "Trainer name"
FROM trainer t 
```

输出如下所示：

```
Trainer name                       
------------------------------------
Bill Gates                        
Steve Jobs                           
Isaac Asimov 
```

我正在尝试将列宽限制为 18 个字符。我试图使用 COLUMN

```
COLUMN t.first_name || ' ' || t.family_name FORMAT A18 
```

但这行不通。文档说：“如果您在 COLUMN 命令中使用表达式，则必须完全按照 SELECT 命令中的形式输入 expr”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T15:10:04.367

另一种选择，将输出转换为 char(18)：

[http://sqlfiddle.com/#!4/69410/1](http://sqlfiddle.com/#!4/69410/1)

```
SELECT 
    cast(t.first_name || ' ' || t.family_name as char(18))   as "Trainer name"
FROM trainer t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:03:27.933

您已经为该列添加了别名，因此您必须在`column`命令中使用别名：

```
COLUMN "Trainer name" FORMAT A18

SELECT t.first_name || ' ' || t.family_name "Trainer name"
FROM trainer t;

Trainer name
------------------
Bill Gates
Steve Jobs
Isaac Asimov 
```

您可能会发现使用更简单的别名和列标题会更简洁，将功能与显示分开 - 在某种程度上：

```
CLEAR COLUMNS
COLUMN trainer_name FORMAT A18 HEADING "Trainer name"

SELECT t.first_name || ' ' || t.family_name AS trainer_name
FROM trainer t;

Trainer name
------------------
Bill Gates
Steve Jobs
Isaac Asimov 
```

无论哪种方式，如果连接的值超过 18 个字符，则该值将换行到第二行。为避免这种情况，您必须获得`substr`价值，这也可能是不可取的。

# dart - 飞镖程序中的拼写检查

> ID：15974639
> 
> 赞同：1
> 
> 时间：2013-04-12T14:57:49.530
> 
> 标签：dart

是否有提供访问字典/拼写检查器的 Dart 库？在 PUB 上进行一般的谷歌搜索并没有得到答案。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T05:41:33.780

我认为没有任何 Dart 库可以做到这一点。您可以将[js-interop](http://pub.dartlang.org/packages/js)与诸如[bjspell 之](https://code.google.com/p/bjspell/)类的 javascript 库一起使用。

另一种选择是向拼写检查服务发出[HttpRequest ，我认为](http://api.dartlang.org/docs/releases/latest/dart_html/HttpRequest.html)[谷歌翻译](https://developers.google.com/translate/v2/faq)对此有一个 api。

# mysql - 高效维护大量历史数据

> ID：15974641
> 
> 赞同：0
> 
> 时间：2013-04-12T14:57:49.967
> 
> 标签：mysql

我一直在考虑在下表结构中保留历史记录：

```
`id` bigint unsigned not null auto_increment,
`userid` bigint unsigned not null,
`date` date not null,
`points_earned` int unsigned not null,
primary key (`id`),
key `userid` (`userid`),
key `date` (`date`) 
```

这将允许我用它的 Reputation Graph 做类似 SO 的事情（我可以​​在其中看到自从我加入该站点以来我的声望增益）。

不过，问题出在这里：我只是进行了一个简单的计算：

```
SELECT SUN(DATEDIFF(`lastclick`,`registered`)) FROM `users` 
```

结果几乎没有差别 25,000,000 个工日。如果我打算每天为每个用户保留一行，那将是一张 [expletive] 大表，我期待进一步的增长。即使我排除了用户不上网的日子，这仍然是巨大的。

任何人都可以就维护如此大量的数据提供任何建议吗？将在此表上运行的唯一查询是：

```
SELECT * FROM `history` WHERE `userid`=?
SELECT SUM(`points_earned`) FROM `history` WHERE `userid`=? AND `date`>?
INSERT INTO `history` VALUES (null,?,?,?) 
```

例如，`ARCHIVE`发动机在这里有用吗？或者我不需要因为索引而担心？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:32:28.723

假设它的mysql：

1.  对于历史表，您应该考虑[分区](http://dev.mysql.com/doc/refman/5.1/en/partitioning.html)，您可以为您设置最佳分区规则并查看您有哪些查询，有两种选择：
    a。按日期分区（例如 1 个分区 = 1 个月）
    b. 按用户分区（假设您有 300 个分区和 1 个分区 = 100000 个用户）
    如果您要使用分区修剪，这将帮助您分配（[这里](http://dev.mysql.com/doc/refman/5.1/en/partitioning-pruning.html)）

2.  您可以为 user,date 使用复合索引（它将用于前 2 个查询）

3.  避免`INSERT`语句，当您有大量数据时使用[LOAD DATA](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)（这将不起作用，因为表已分区）

最重要的是……处理海量数据的最佳引擎是 MyISAM

# r - 如何处理 R 中的 hdf5 文件？

> ID：15974643
> 
> 赞同：59
> 
> 时间：2013-04-12T14:57:51.477
> 
> 标签：r, hdf5

我有一个`hdf5`格式的文件。我知道它应该是一个矩阵，但我想读取该矩阵`R`以便我可以研究它。我看到有一个`h5r`包可以帮助解决这个问题，但我没有看到任何简单易读/理解的教程。网上有这样的教程吗。具体来说，您如何`hdf5`使用此包读取对象，以及如何实际提取矩阵？

更新

我发现了一个`rhdf5`不属于 CRAN 但属于 BioConductoR 的包。界面相对比较容易理解，文档和示例代码也比较清晰。我可以毫无问题地使用它。我的问题似乎是输入文件。我想读取的矩阵实际上`hdf5`以`python pickle`. 所以每次我试图打开它并通过它访问它时，`R`我都会得到一个`segmentation fault`. 我确实想出了如何将矩阵从内部保存`python`为`tsv`文件，现在问题已经解决了。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-10-21T04:26:18.213

该`rhdf5`软件包运行良好，尽管它不在 CRAN 中。[从Bioconductor](http://bioconductor.org/packages/release/bioc/html/rhdf5.html)安装它

```
# as of 2020-09-08, these are the updated instructions per
# https://bioconductor.org/install/

if (!requireNamespace("BiocManager", quietly = TRUE))
  install.packages("BiocManager")
BiocManager::install(version = "3.11") 
```

并使用它：

```
library(rhdf5) 
```

列出文件中的对象以查找要读取的数据组：

```
h5ls("path/to/file.h5") 
```

读取 HDF5 数据：

```
mydata <- h5read("path/to/file.h5", "/mygroup/mydata") 
```

并[检查结构](http://stat.ethz.ch/R-manual/R-devel/library/utils/html/str.html)：

```
str(mydata) 
```

（请注意，多维数组[可能会出现转置](https://stackoverflow.com/questions/18359783/r-hdf5-dataset-written-incorrectly)）。您还可以阅读组，这些组将在 R 中命名为列表。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-06-12T14:35:57.553

您还可以使用**h5**，这是我最近在 CRAN 上发布的一个包。与之相比`rhdf5`具有以下特点：

1.  S4 对象模型直接与文件、组、数据集和属性等 HDF5 对象交互。
2.  更简单的语法，为支持命令的数据集实现了类似 R 的子集运算符 `readdata <- dataset[1:3, 1:3] dataset[1:3, 1:3] <- matrix(1:9, nrow = 3)`
3.  所有数据类型支持的 NA 值
4.  200 多个测试用例，代码覆盖率超过 80%。

要保存矩阵，您可以使用：

```
library(h5)
testmat <- matrix(rnorm(120), ncol = 3)
# Create HDF5 File
file <- h5file("test.h5")
# Save matrix to file in group 'testgroup' and datasetname 'testmat'
file["testgroup", "testmat"] <- testmat
# Close file
h5close(file) 
```

...并将整个矩阵读回R：

```
file <- h5file("test.h5")
testmat_in <- file["testgroup", "testmat"][]
h5close(file) 
```

另见 h5

*   克兰：http: [//cran.r-project.org/web/packages/h5/index.html](http://cran.r-project.org/web/packages/h5/index.html)
*   Github：[https ://github.com/mannau/h5](https://github.com/mannau/h5)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-03T21:44:58.610

该[`ncdf4`](http://cran.r-project.org/web/packages/ncdf4/index.html)软件包是 netCDF-4 的接口，也可用于读取 hdf5 文件（netCDF-4 与 netCDF-3 兼容，但它使用 hdf5 作为存储层）。

用开发者的话来说：

*   [HDF 组](http://www.hdfgroup.org/projects/netCDF-4/)说：

> NetCDF-4 结合了 netCDF-3 和 HDF5 数据模型，利用了各自的理想特性，同时利用了它们各自的优势

*   [统一数据](http://www.unidata.ucar.edu/software/netcdf/docs/netcdf/NetCDF_002d4-Format.html)说：

> netCDF-4 格式通过使用 HDF5 的增强版本作为存储层实现和扩展了 netCDF-3 数据模型。

在实践中，`ncdf4`提供了一个简单的界面，并且将代码从使用旧包`hdf5`和`ncdf`包迁移到单个`ncdf4`包使[我们的代码](http://github.com/PecanProject/pecan)更少错误并且更容易编写（我的一些试验和解决方法记录在[我之前的答案](https://stackoverflow.com/a/4954340/513006)中）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-12T15:06:43.650

我用这个`rgdal`包来读取 HDF5 文件。您确实需要注意二进制版本可能`rgdal`不支持`hdf5`. 在这种情况下，您需要在`gdal`从源代码构建之前使用 HDF5 支持`rgdal`从源代码构建。

或者，尝试将文件从 转换`hdf5`为`netcdf`. 一旦它们在 netcdf 中，您就可以使用优秀的`ncdf`包来访问数据。我认为可以使用该[`cdo`工具](https://code.zmaw.de/projects/cdo)完成转换。

# ios - 检查 HTTP 服务器上的文件是否不同于本地副本

> ID：15974644
> 
> 赞同：0
> 
> 时间：2013-04-12T14:57:53.723
> 
> 标签：ios, objective-c, cocoa

我确信这一定已经被计算了一百万次，这就是我问的原因。

我从 HTTP 服务器获取文件（JSON、PNG、XML、plist）并将它们保存在本地。然后读取、处理和显示这些文件。我的问题是，当我即将进入显示下载数据的屏幕时，我想知道服务器上是否有更新的文件。在这种情况下，我想获取文件、存储它并使用该信息。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:37:53.847

看起来已经有很好的答案了。只是对如何找到它们进行了一些创造性的思考！

[http://iphoneincubator.com/blog/server-communication/how-to-download-a-file-only-if-it-has-been-updated](http://iphoneincubator.com/blog/server-communication/how-to-download-a-file-only-if-it-has-been-updated)

好东西。

# heroku - 使用 Heroku 指向子域

> ID：15974646
> 
> 赞同：1
> 
> 时间：2013-04-12T14:57:57.703
> 
> 标签：heroku, dns, subdomain

我希望 www.domain.ie 和 domain.ie 都指向 domain.herokuapp.com

我希望secure.domain.ie 指向第三方预订引擎。

我已经运行了以下命令：

```
heroku domains:add www.tankardstown.ie 
```

这是我的 DNS 设置的样子

![在此处输入图像描述](https://i.stack.imgur.com/QNdFr.png)

www.domain.ie 和 domain.ie 重定向工作正常。问题在于secure.domain.ie。目前，我收到此错误：

![在此处输入图像描述](https://i.stack.imgur.com/Q5ymh.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:07:26.430

似乎没问题：

```
$ dig +noall +answer secure.tankardstown.ie
secure.tankardstown.ie. 86395   IN  A   82.195.138.28 
```

可能只是 DNS 传播延迟？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-28T13:58:00.007

在寻找其他东西时发现了这个问题，但我想我最好为其他疲惫的旅行者回答这个问题......

看起来这个问题是因为域没有正确添加到 Heroku。OP 只添加了“www”。但应该添加通配符域或“安全”。作为子域。

**实际解决方案：**

OP应该已经运行：

```
heroku domains:add *.tankardstown.ie 
```

Heroku 在这里有更多信息：

[https://devcenter.heroku.com/articles/custom-domains#add-a-wildcard-domain](https://devcenter.heroku.com/articles/custom-domains#add-a-wildcard-domain)

# ruby-on-rails - 如何推迟执行昂贵的 create_by 选项

> ID：15974653
> 
> 赞同：0
> 
> 时间：2013-04-12T14:58:13.093
> 
> 标签：ruby-on-rails, rails-activerecord

以下问题几乎*正是*我所需要的：[https ://stackoverflow.com/a/2394783/456188](https://stackoverflow.com/a/2394783/456188)

我想运行以下命令：

```
find_or_create_by_person_id(:person_id => 10, :some_other => expensive_query) 
```

`expensive_query` **但更重要的是，除非**我真的必须创建对象，否则我想推迟执行。

find_or_create_by 有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:58:54.427

结果`find_or_create_by*`接受了一个只在`create`案例中运行的块。

```
find_or_create_by_person_id(10) do |item|
    item.some_other = expensive_query
end 
```

# c# - WindowsMediaPlayer 播放时间

> ID：15974656
> 
> 赞同：0
> 
> 时间：2013-04-12T14:58:24.877
> 
> 标签：c#, winforms, axwindowsmediaplayer

我有一个 Windows 窗体，`aXWindowsMediaPlayer`它应该使用该方法每 5 秒播放一次随机视频/图片`aXWindowsMediaPlayer.Url = <video/image file location>`。这适用于图片，但是当视频较长时，它只会播放 5 秒而不是完整长度，对于较短的视频也是如此，它将播放完整视频，而其他几秒钟则黑屏。

有没有办法将 mediaPlayer 配置为仅在完整播放视频后才转到下一张图片/视频？

编辑1：

就像是：

```
 Timer_TickEvent()//Every 5 seconds it chooses a random given URL
    {
       axWindowsMediaPlayer1.URL = <Random URL>;
       if(<Random URL> == 'A video?')
       {
             timer.Enabled = false;
             PlayVideoLength();
       }
    }
    Private void PlayVideoLength()
    {
     if('<Random URL.Length> ?' == 'the length of the played video in axWindowsMediaPlayer1 ?')
     {
          Timer.enabled = true;
     }
    } 
```

这段代码显然行不通。这是我想要它做什么的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T15:37:20.107

您可以找到您的 URL 是否是具有**IWMPMedia::getItemInfo**或**getType**的视频/音频/图片媒体。

而不是在您的 axWindowsMediaPlayer 组件中设置 Url ：

```
 MyMediaComponent.Url = <MyMediaUrl>; 
```

您可以使用此 URL 创建一个新的：

```
WMPLib.IWMPMedia MyNewMedia = MyMediaComponent.newMedia(<MyMediaUrl>); 
```

而且我认为您可以通过以下方式获得媒体类型：

```
MyNewMedia.getType(); 
```

[您可以在此处](http://msdn.microsoft.com/en-us/library/windows/desktop/dd563431%28v=vs.85%29.aspx)找到 msdn 文档。

当您找到您的媒体类型后，您可以在设置您的 URL 之前测试您的媒体类型！

```
/* It is just a suggestion, this code don't work! */
if ( MyNewMedia.getType() == <A photo MEDIA code>)
{
    // Set the URL for show the picture
    MyMediaComponent.Url = <MyMediaUrl>;
    return;
}

//else

// This media is not a picture! 
```

希望我的想法对你有所帮助。

# git - 使用 git/git-svn，我怎样才能从遥控器/主干中脱身

> ID：15974658
> 
> 赞同：0
> 
> 时间：2013-04-12T14:58:30.783
> 
> 标签：git, git-svn

我的目录结构是这样的：

```
feipu123/
feipu123/trunk
feipu123/trunk/work
feipu123/tags
feipu123/branch 
```

我使用了这个命令：

```
git reset --hard remotes/trunk 
```

我的目录结构变成了：

```
feipu123/
feipu123/work 
```

我该怎么做才能使文件夹变成以前的样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:18:43.983

看起来您重置了主分支以匹配远程分支的尖端。如果您想将 master 分支返回到之前的状态，您可以使用它`git reflog`来查找您在`git reset --hard remotes/trunk`. 的输出`git reflog`应包含与此类似的内容

```
f9e224f HEAD@{0}: reset: moving to remotes/trunk
37abebb HEAD@{1}: xxxxx 
```

使用 reflog 中重置前一步的哈希来执行

```
git reset --hard 37abebb 
```

# knockout.js - 来自 JS 的 KnockoutJS 映射不创建可观察数组

> ID：15974662
> 
> 赞同：1
> 
> 时间：2013-04-12T14:58:53.723
> 
> 标签：knockout.js, knockout-mapping-plugin

我认为映射插件应该返回一个可观察数组，但即使来自服务器的“resp”响应有 1000 个元素，可观察数组也是空的。

我在这里错过了什么吗？请看下文。

```
 <script type="text/javascript">         

        function tasksViewModel() {
            var self = this;

            self.tasks = ko.observableArray(null);

            self.load = function () {
                $.ajax({
                    url: '/api/benchmark',              
                    success: function(resp) {
                       // This line isn't working!
                       self.tasks = ko.mapping.fromJS(resp);
                    },
                    dataType: 'json'
                });
            }
        }

        var viewModel = new tasksViewModel();

        $(function () {

            ko.applyBindings(viewModel);
            viewModel.load();
        });

    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:02:18.033

```
self.tasks(resp); 
```

您应该为现有的可观察数组设置新值

# php - 在 Doctrine 2 中，没有映射的继承导致 MySQL 查询中的未知列

> ID：15974669
> 
> 赞同：1
> 
> 时间：2013-04-12T14:59:11.600
> 
> 标签：php, mysql, inheritance, doctrine-orm

我有两节课，其中一节课在第二节课之前已经完全开发。当我开始开发第二个时，因为它基本相同，但具有额外的功能，我在 PHP 中扩展了该类。

让我们称父类 ClassA 和子类 ClassB （为简洁起见，省略了 getter/setter）：

```
class ClassA
{
    protected $label;
    protected $name;
}

class ClassB extends ClassA
{
    protected $extraField;
} 
```

然而，当我来映射它时，我遇到了问题。我不需要也不想要继承映射，因为我不想要多态查询；这两个类都用于站点的不同部分，我不想在查询 ClassA 时返回 ClassB 的实例，而只想直接返回 ClassA 的实例。

我通过从 ClassB 的映射中排除 ClassA 的属性来使映射工作（否则它抱怨字段重复）：

类A.dcm.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<doctrine-mapping xmlns="http://doctrine-project.org/schemas/orm/doctrine-mapping"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://doctrine-project.org/schemas/orm/doctrine-mapping
                    http://doctrine-project.org/schemas/orm/doctrine-mapping.xsd">

    <entity name="ClassA" table="a">
        <id name="id" type="integer" column="id">
            <generator strategy="AUTO" />
        </id>

        <field name="label" type="string" nullable="true"/>
        <field name="name" type="text" nullable="true"/>
    </entity>
</doctrine-mapping> 
```

ClassB.dcm.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<doctrine-mapping xmlns="http://doctrine-project.org/schemas/orm/doctrine-mapping"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://doctrine-project.org/schemas/orm/doctrine-mapping
                    http://doctrine-project.org/schemas/orm/doctrine-mapping.xsd">

    <entity name="ClassB" table="b">
        <field name="extraField" type="string" nullable="true"/>
    </entity>
</doctrine-mapping> 
```

这会正确生成包含所有必填字段的数据库表。但是，当查询它时：

```
$em->createQuery('SELECT b FROM ClassB')->getResult(); 
```

然后我得到一个异常抛出，因为 Doctrine 正在通过尝试巧妙地处理继承来生成这个 MySQL 查询，即使我没有映射它：

```
SELECT c0_.label AS label0, c0_.name AS name1, c0_.id AS id2, c1_.extraField AS extraField3 FROM b c1_ 
```

正如您所看到的，它试图通过为其指定别名来从 A 表中获取列，而它应该做的只是从 B 表中获取并且它抱怨第一列不存在。

有没有实现我想要的而不必使用单表继承或类表继承（因为我不想要多态查询）或创建额外的类（映射的超类需要）？

我将 Doctrine 2.3.3（最新版本）与 MySQL 和 PHP 5.3 一起使用。

# svg - 如何突出显示组的内部 SVG 元素 ( g )

> ID：15974684
> 
> 赞同：0
> 
> 时间：2013-04-12T14:59:40.277
> 
> 标签：svg

我需要实现的概念是瞬间**突出各种元素。**通过突出显示，我的意思是改变某些方面，例如颜色。

我在**g**（组）元素中有几个**SVG 元素。**这些内部元素中的每一个都有自己想要保留的 css 样式（颜色、边框等）。我想突出显示特定事件的整体元素组，然后将其恢复到原始状态。

 **我可以通过存储它们的原始状态，对它们中的每一个应用一些样式更改，然后从原始状态恢复来实现上述目的，但这似乎并不那么直接和优雅。

我在想的是有一些**过滤**选项可以应用于**g**容器元素。这将允许应用过滤器，然后将其删除，所有内部元素将恢复正常。

我拥有的元素示例：

```
<g>
     <rect x="0" y="0" rx="5" width="100" height="60" style="stroke: green; stroke-width: 2; fill: yellow;">
     <rect x="20" y="20" rx="5" width="10" height="10" style="stroke: green; stroke-width: 2; fill: yellow;">
</g> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:43:41.773

我建议为此使用 CSS。您可以删除`style`属性并引入一些合理的类/ID（我没有在这个快速示例中添加类）：

```
<svg>
  <style type="text/css">
    g:hover rect:first-child {
      fill:red; stroke:blue;
    }

    g:hover rect {
      fill:green;
    }

    rect {
      stroke: green; 
      stroke-width: 2; 
      fill: yellow;
    }

  </style>
  <g>
    <rect x="0" y="0" rx="5" width="100" height="60"/>
    <rect x="20" y="20" rx="5" width="10" height="10"/>
  </g>
</svg> 
```

[试试 jsFiddle](http://jsfiddle.net/V9bNT/)**

# android - 检查应用程序内的密钥库别名和密钥库证书信息名称

> ID：15974686
> 
> 赞同：0
> 
> 时间：2013-04-12T14:59:42.857
> 
> 标签：android, apk, android-keystore

我已经用我生成的密钥库证书签署了我的 android 应用程序，是否可以在我的 java 代码中检查我使用它生成或导出我的 apk 文件的密钥库证书的唯一信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:56:07.633

我假设您正在尝试找出您最初使用*哪个*密钥库签署您的应用程序。我不知道您可以提取信息。

但是，如果您有多个密钥库，您可能会使用它对其进行签名，您可以使用每个密钥库再次签署该应用程序，并尝试将其安装在现有密钥库的顶部。正确的钥匙会让你安装它，错误的钥匙会给你一个错误。不过，我不记得您是否必须增加版本号。

# vbscript - VBScript - 如何知道何时完成？

> ID：15974689
> 
> 赞同：1
> 
> 时间：2013-04-12T14:59:59.367
> 
> 标签：vbscript, windows-task-scheduler

我在 Windows Scheduler 中运行一个简单/单一的 vbscript，以从我们的 SalesForce 应用程序执行 13 个单独的文件导出。脚本按预期运行。根据网络流量，完成 13 个导出总共需要 3-5 分钟。

我的意图是串行运行这些导出，但 vbscript 似乎很乐意并行运行它们。销售队伍没有问题或投诉。

成功完成导出后，我运行第二个 vbscript 将这些结果导入另一个应用程序（通过 msaccess 函数）。这第二个 vbscript 也提供了所需的结果。

问题：有没有办法以编程方式确定导出脚本何时完成，以允许我安全地启动导入脚本？目前，我已经设置了第二个调度程序作业，以在单独的导出脚本后 10 分钟运行导入脚本……但这可能会失败。我希望将这两个脚本更紧密地联系在一起。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:28:01.583

有几个选项。如果两个脚本都在具有相同权限的同一系统上运行，则您可以让第一个脚本在第二个脚本完成时实际启动它。

如果脚本需要不同的权限，或者您需要它们从任务管理器启动，请通过查找现有文件（例如`SCRIPT1.COMPLETE`. 如果该文件存在，让 script1 删除该文件并开始处理。当 script1 完成处理时，创建该文件。然后在 script2 中，创建一个查找`SCRIPT1.COMPLETE`. 如果文件不存在，请稍等几秒钟，然后重试。在完整的文件出现之前不要退出 while 循环。让 script2 在完成处理后删除 COMPLETE 文件。我建议您将“稍等片刻”功能设置为至少 30 秒左右，这样您的脚本就不会只是不断地检查。

# ios - 从 UIPopoverController 按钮 iOS 更新另一个 viewController UI

> ID：15974693
> 
> 赞同：0
> 
> 时间：2013-04-12T15:00:16.293
> 
> 标签：ios, uiviewcontroller, mkmapview, uipopovercontroller

我有一个 mapView，它有一个弹出框，当按下右导航栏按钮时会显示它。在这个弹出窗口中，我有 2 个按钮调用 mapView 中的 2 个方法。我已经连接了代码，当按下按钮时，我可以在日志中看到它们是从弹出窗口调用的（地图视图中的 2 个方法）但是这些按钮控制我的地图的刷新或重新输入它用户位置。

我遇到的问题是方法被调用但mapView没有按预期更新但是直接从mapView调用相同的方法它可以工作并且UI更新？

弹出框是否会在存在时阻止其他控制器中的 UI 更改？还是我根本没有得到什么？

例如，recenterer map 方法如下所示：

```
-(void)recenterMap{
NSLog(@"Recenter map");
[recycleMap setCenterCoordinate:recycleMap.userLocation.location.coordinate   animated:YES];
} 
```

正如从弹出窗口调用此方法时提到的，我可以看到它记录了它，但从来没有像 UI 中提到的那样做任何事情，而是直接从 mapView 作为测试？

像这样从弹出窗口调用方法：

```
-(IBAction)recenterTheMap:(id)sender{

//incidentsMapView is the mapView and recenterMap is the method in that class to recenter it
[self.incidentsMapView recenterMap];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:50:54.433

```
[recycleMap setCenterCoordinate:recycleMap.userLocation.location.coordinate   animated:YES]; 
```

应该

```
[self.recycleMap setCenterCoordinate:recycleMap.userLocation.location.coordinate   animated:YES]; 
```

XCode 应该就您的遗漏发出警告`self.`

# bash - 每次调用时更新 bash 变量

> ID：15974695
> 
> 赞同：1
> 
> 时间：2013-04-12T15:00:24.110
> 
> 标签：bash, variables

在我的 .bashrc 中，我将 bash 变量设置为脚本的输出

```
export FOO=`/home/jist/tools/lookup1.pl` 
```

这很好用，只是该脚本的输出可能会在白天发生变化（主要取决于我是否在公司的 VPN 上）。所以当我对变量做一些事情时，我希望它重新执行脚本并获取更新的值。我不知道该怎么做？有人可以帮忙吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T12:24:09.753

正如[威廉在](https://stackoverflow.com/users/2005672/william)[评论](https://stackoverflow.com/questions/15974695/update-bash-variable-everytime-it-is-called#comment22773812_15974695)中所述：

> 使其成为在标准输出上发出刷新值而不是变量的函数，并始终将其访问为`$(FOO)`

这意味着：

```
# create the function: put this in your .bashrc
FOO() { /home/jist/tools/lookup1.pl "$@"; }

# use the function and store its output: do this whenever you want the current result
currentFooResult=$(FOO)

# or, to just print the result to stdout:
FOO 
```

# cmd - 如何在 Windows 7 中重命名文件夹：名称中包含空格的命令行

> ID：15974707
> 
> 赞同：11
> 
> 时间：2013-04-12T15:01:13.887
> 
> 标签：cmd, windows-7

如何在 Windows 7 下重命名包含空格的路径？

命令行：

```
rename c:\ho hum\new folder  ->  c:\ho_hum\new_folder 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-12T15:10:14.520

这只能通过移动文件夹并为目标设置新名称来完成：

```
move "c:\ho hum\new folder" "c:\ho hum\new_folder"
move "c:\ho hum" "c:\ho_hum" 
```

# python - 通过每个类的属性创建一个类名字典

> ID：15974708
> 
> 赞同：1
> 
> 时间：2013-04-12T15:01:16.127
> 
> 标签：python, class, dictionary

我有一组类，它们的属性之一是 url。我想构建一个由该 url 键入的类的字典。这是我想出的代码：

```
class pagesByUrl(dict):
    "a cross reference of pages by url rather than object name"
    def __init__(self):
        pages={}
        for page in dir(xxxPages):
            try:
                pgAttr=getattr(xxxPages, page)
                pg=pgAttr('dummybrowser')
                pages[pg.url] = page
            except (KeyError, TypeError, AttributeError):
                pass
        print pages #At this point, the dictionary is good.
        self=pages
        print self #Also here, still just what I want.

pg=pagesByUrl()
print "pg is:", pg #But here, pg is an empty dictionary. 
```

我该怎么做才能让这个类实例化为我想要的字典？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:05:58.913

```
class pagesByUrl(dict):
    "a cross reference of pages by url rather than object name"
    def __init__(self):
        dict.__init__(self) #!
        pages={}
        for page in dir(xxxPages):
            try:
                pgAttr=getattr(xxxPages, page)
                pg=pgAttr('dummybrowser')
                pages[pg.url] = page
            except (KeyError, TypeError, AttributeError):
                pass

       self.update(pages)
       #Alternatively, forgo the previous `dict.__init__(self)` and the 
       #previous line and do:
       #dict.__init__(self,pages) 
```

如果你这样做`self = pages`，你只是用字典替换函数`self`中的本地名称。你实际上并没有改变原来的字典。 `__init__``pages``self`

当然，此时，根本不需要`pages`dict ——我们可以使用`self`：

```
class pagesByUrl(dict):
    "a cross reference of pages by url rather than object name"
    def __init__(self):
        dict.__init__(self)
        for page in dir(xxxPages):
            try:
                pgAttr=getattr(xxxPages, page)
                pg=pgAttr('dummybrowser')
                self[pg.url] = page
            except (KeyError, TypeError, AttributeError):
                pass 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:33:45.277

`__new__()`如果您想拥有纯“类型字典”， 请查看创建实例的方法

```
class dictA(dict):
    def __new__(self):
        self._pages={"one":1, "two":2}
        return self._pages

class pagesByUrl(dict):
    def __init__(self):
        _pages = {"one":1, "two":2}
        dict.__init__(self)
        self.update(_pages)

d = {"one":1, "two":2}
print type(d)
print d

d = dictA()
print type(d)
print d

d = pagesByUrl()
print type(d)
print d 
```

输出：

```
<type 'dict'>
{'two': 2, 'one': 1}
<type 'dict'>
{'two': 2, 'one': 1}
<class '__main__.pagesByUrl'>
{'two': 2, 'one': 1} 
```

# javascript - Apache 是否使用文件时间戳来检查资源是否已被修改？

> ID：15974709
> 
> 赞同：0
> 
> 时间：2013-04-12T15:01:19.593
> 
> 标签：javascript, html, apache, last-modified

我正在开发一个引用很少修改的大型 Javascript 文件 (1MB+) 的 html 页面。从[这里](http://www.jmarshall.com/easy/http/#http1.1s7)，我知道如果不修改js文件将不会被重新发送。

我的问题是：Apache 如何检查 ftp 上传的 javascript 文件是否被修改？它来自它的文件时间戳吗？如果没有，它从哪里得到这些信息？我想了解控制性能问题的过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:40:43.193

对于静态文件，调用[`stat()`](http://pubs.opengroup.org/onlinepubs/009696699/functions/stat.html)通常用于检查文件大小或修改时间是否已更改。

[Caching Guide](http://httpd.apache.org/docs/current/caching.html)进行了详细介绍，并且还包含了*A Brief Guide to Conditional Requests*部分中的上述参考。

# visual-c++ - 将 MSVC 静态库与 MinGW 一起使用的选项（reimp 无法转换它们）

> ID：15974711
> 
> 赞同：1
> 
> 时间：2013-04-12T15:01:22.287
> 
> 标签：visual-c++, gcc, sdk, mingw, static-libraries

我在一家公司工作，该公司最近购买了带有 SDK 的硬件。不幸的是，所有的 SDK 库都是用 Microsoft Visual C++ 编译器编译的（我不知道是哪一个）并且不能被[MinGW](http://mingw.org/)使用（我使用 MinGW C++ 编译器在 Code::Blocks 中开发）。

我尝试使用 reimp（来自[MinGW 实用程序集合](http://sourceforge.net/projects/mingw/files/MinGW/Extension/mingw-utils/)）转换库，该库过去曾与其他供应商的静态库一起使用，但在这种情况下，转换后的库在链接时会导致“未定义引用”错误。

reimp在转换过程中为每个库生成的def文件看起来不太好（它们充满了类似的行`??0nameOfFunction@@QEAA@AEBV0@@Z`，而在成功转换过程中生成的def文件包含类似的行`nameOfFunction@32`），所以看起来供应商的库只是一种 reimp 无法转换的类型。

是否有任何其他选项可以让我将这些库与 MinGW 一起使用？如果不是，要求供应商使用 g++ 重新编译他们的库是否合理（即，考虑到这些库最初是使用 MSVC 开发的，他们是否可以这样做）？

任何意见或建议表示赞赏！

# sql - SQL Server 按复杂查询分组

> ID：15974712
> 
> 赞同：0
> 
> 时间：2013-04-12T15:01:29.083
> 
> 标签：sql, sql-server, group-by, row-number

在 SQL Server 中，假设我们有一个`SALES_HISTORY`如下表。

```
CustomerNo  PurchaseDate    ProductId
    1         20120411         12
    1         20120330         13
    2         20120312         14
    3         20120222         16
    3         20120109         16 
```

...以及每个客户每次购买的许多记录...

如何编写适当的查询以进行查找：

对于每一位客户，

*   找到他在 MOST 买的产品，
*   求该产品占他购买的所有产品的百分比。

结果表必须具有如下列：

```
CustomerNo, 
MostPurchasedProductId, 
MostPurchasedProductPercentage 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:30:39.060

假设 SQL Server 2005+，您可以执行以下操作：

```
;WITH CTE AS
(
    SELECT *, 
           COUNT(*) OVER(PARTITION BY CustomerNo, ProductId) TotalProduct,
           COUNT(*) OVER(PARTITION BY CustomerNo) Total
    FROM YourTable
), CTE2 AS
(
    SELECT *,
           RN = ROW_NUMBER() OVER(PARTITION BY CustomerNo 
                                  ORDER BY TotalProduct DESC)
    FROM CTE
)
SELECT CustomerNo, 
       ProductId MostPurchasedProductId, 
       CAST(TotalProduct AS NUMERIC(16,2))/Total*100 MostPurchasedProductPercent
FROM CTE2
WHERE RN = 1 
```

当您拥有不止一种产品作为最常购买的产品时，您仍然需要进行交易。[**这是一个带有演示的 sqlfiddle**](http://sqlfiddle.com/#!3/b9243/6)供您尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:28:04.413

可以做得更漂亮，但它有效：

```
with cte   as(
select CustomerNo, ProductId, count(1) as c
from SALES_HISTORY
group by CustomerNo, ProductId)

select CustomerNo, ProductId as MostPurchasedProductId, (t.c * 1.0)/(select sum(c) from cte t2 where t.CustomerNo = t2.CustomerNo) as MostPurchasedProductPercentage
from cte t
where c = (select max(c) from cte t2 where t.CustomerNo = t2.CustomerNo) 
```

[SQL小提琴](http://sqlfiddle.com/#!3/8f266/3/0)

# ruby - 运行 Ruby 脚本时更改 Bash 终端输出颜色

> ID：15974716
> 
> 赞同：2
> 
> 时间：2013-04-12T15:01:38.077
> 
> 标签：ruby, bash

我想简单地更改我的终端输出颜色，运行一个 Ruby 脚本，以便标准输出以更改后的颜色打印，“睡眠”一秒钟，然后将其更改回来。我知道如何设置颜色，例如提示：

```
PS1="\e[0;36m[\w] \e[m " 
```

我想我需要编写一个 Bash 函数来做到这一点。那会是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-21T03:09:22.283

这是一个显示所有终端颜色的 Ruby 脚本。[下载它](https://github.com/mvndaai/ruby-toolbox/blob/master/terminal_colors.rb)或运行下面的代码。

```
def color(index)
  normal = "\e[#{index}m#{index}\e[0m"
  bold = "\e[#{index}m\e[1m#{index}\e[0m"
  "#{normal}  #{bold}  "
end

8.times do|index|
  line = color(index + 1)
  line += color(index + 30)
  line += color(index + 90)
  line += color(index + 40)
  line += color(index + 100)
  puts line
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:06:29.420

您可以使用在 bash 中使用的普通代码在 Ruby 中执行此操作（假设您在 Linux 上；Windows 需要一个库/gem，我目前不记得其名称），例如

```
puts "\e[31m etc Your text here." 
```

重置为正常显示：

```
puts "\e[0m" 
```

调整口味。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T15:09:02.070

您还可以使用 Term Ansicolor gem 从运行脚本中对其进行更改。

[http://flori.github.io/term-ansicolor/](http://flori.github.io/term-ansicolor/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-13T06:07:02.607

也可以使用[Colorize gem](https://github.com/fazibear/colorize)。

安装：

```
sudo gem install colorize 
```

用法：

```
require 'colorize'

puts "I am now red.".red
puts "I am now blue.".green
puts "I am a super coder".yellow 
```

*[这个答案是从How can I use Ruby to colorize the text output to a terminal?](https://stackoverflow.com/questions/1489183/colorized-ruby-output/1489233#1489233)*复制而来的？.

# javascript - 在 HTML 5 Canvas 中更改描边颜色

> ID：15974720
> 
> 赞同：5
> 
> 时间：2013-04-12T15:01:42.330
> 
> 标签：javascript, html, canvas, graphics

我正在尝试画一个圆，一种时钟，我从点 p1 开始并使用画布 2d 上下文绘制一个黑色的弧线，当我到达点 p1（完整的循环游览）时，我将颜色更改为白色，然后继续绘制，这应该会给它一种效果，就像黑色弧线被擦除一样，但是这不能按预期工作，因为当我改变上下文的颜色时，一切都会改变......

如何在不改变整个场景的颜色的情况下保持第一个圆圈的颜色，并在其上用不同的颜色绘制另一个圆圈？

这是我的尝试

```
<!DOCTYPE html />
<html>
<head>
<title></title>
<script type="text/javascript">
        var i = 0.01;
        var Color = "Black";
        var x = 75;                // x coordinate
        var y = 75;                // y coordinate
        var radius = 20;                    // Arc radius
        var startAngle = 0;                     // Starting point on circle
        var anticlockwise = false; // clockwise or anticlockwise

        function draw() {
            var canvas = document.getElementById('canvas');
            var ctx = canvas.getContext('2d');

                ctx.beginPath();
                var endAngle = i; // End point on circleMath.PI + (Math.PI * 5) /

                if (Math.floor(endAngle) >= 6) {
                    i = 0.01;
                    if (Color == "Black") {
                        Color = "White";
                    } else {
                        Color = "Black";
                    }
                }

                ctx.strokeStyle = Color;
                ctx.arc(x, y, radius, startAngle, endAngle, anticlockwise);
                ctx.stroke();

                i = i + 0.05;
                //document.getElementById('display').innerHTML = Math.floor(endAngle) + " " + Color;
    }

</script>
</head>
<body onload="window.setInterval(function(){draw()},100);">
<canvas id="canvas" width="150" height="150"></canvas>
<span id="display"></span>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T15:27:44.427

你的角度有点问题。您基本上`endAngle`每次都将弧线从 0 重新绘制到您的。因此，最后当 endAngle 大于 6 时，您将使用白色弧线从 0-6 重新绘制。

简单的解决方法是`endAngle = 0.01`在重置时设置`i`。您可能还希望`startAngle`在每次迭代中更新您的最后一个弧的结束，这样它就不会一直在自己身上绘制。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T16:06:13.383

使用 Shaded 的答案，您可以执行以下操作：

```
if (Math.floor(endAngle) > 6.0) {
    i = 0.01;
    endAngle = i;
    startAngle = 0;
    if (Color == "Black") {
        Color = "White";
        ctx.lineWidth = 4;
    } else {
        Color = "Black";
        ctx.lineWidth = 1;
    }
}

ctx.strokeStyle = Color;
ctx.arc(x, y, radius, startAngle, endAngle, anticlockwise);
ctx.stroke();

startAngle = endAngle - 0.1; 
```

因为白色会与后面的黑色抗锯齿，所以如果线宽相同，您会在边缘看到锯齿。增加线宽可以缓解这个问题。

**编辑：**更新以根据 Shaded 的评论删除过度的过度绘画。

# code-analysis - AMD CodeAnalyst 缺少系统数据选项卡

> ID：15974721
> 
> 赞同：0
> 
> 时间：2013-04-12T15:01:42.440
> 
> 标签：code-analysis, code-analyst

嗨，我刚刚下载了 AMD CodeAnalyst 3.8.1203.1066，在进行演示时，它指出在对热点进行分析后，会出现一个系统数据选项卡，但是我看不到这个选项卡有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T11:15:57.177

单击开始（绿色按钮）后开始基于时间的分析。单击左侧面板中的会话。在 Session.tbp 窗口中，最左边的选项卡是系统数据。

# jquery - 从 xhtml 文件 jsf2 中的 jquery 函数获取图像文件

> ID：15974725
> 
> 赞同：1
> 
> 时间：2013-04-12T15:01:48.060
> 
> 标签：jquery, jsf-2, path, background-image

我在我的 jsf 项目中使用了一些 jquery 函数，我想通过这个函数从我的项目的资源文件夹中获取一张图像：

我测试了这个：

```
$('.ui-datagrid-column').live('mousemove',function(){
            $(this).css('background-image', '../resources/images/vert_degrade.PNG');        

        }); 
```

但它没有找到图像文件

这是结构：![在此处输入图像描述](https://i.stack.imgur.com/f5m9B.png)

这个文件在页面目录中

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:08:25.540

如果你在 CSS`background-image`属性中指定了一个相对 URL，那么它就变成了相对于当前请求的包含 JS 代码的资源的请求 URL。因此，如果您在 JS 文件中声明它，则它与 JS 文件本身的请求 URL 相关。或者，如果您在 JSF 页面中声明它，那么它与 JSF 文件本身的请求 URL 相关。正如大多数初学者错误地假设的那样，它与服务器端磁盘文件系统路径中的物理位置无关。

因此，在您的情况下，该相对 URL 显然是错误的。在 JSF Web 应用程序中，JSF 资源处理程序的 URL 前缀`/javax.faces.resource`甚至是 servlet 映射之类的面孔`/faces/*`是最可能导致相对 URL 解析错误的原因。您需要查看请求 URL 并从中提取正确的相对 URL。

或者，如果该 JS 代码位于一个`<script>`或`<h:outputScript>`一个 JSF 页面中，那么您还可以使用`#{resource}`EL 中的隐式映射将资源标识符转换为完整的资源 URL：

例如

```
<h:outputScript>
    $('.ui-datagrid-column').live('mousemove',function(){
        $(this).css('background-image', '#{resource['images/vert_degrade.PNG']}');        
    });
</h:outputScript> 
```

更好的是在一个独立的 CSS 文件中创建一个 CSS 声明，`<h:outputStylesheet>`因为它支持评估 CSS 文件中的 EL 表达式。

```
.vert-degrade {
    background-image: url('#{resource['images/vert_degrade.PNG']}');
} 
```

和

```
$('.ui-datagrid-column').live('mousemove',function(){
    $(this).addClass('vert-degrade');
}); 
```

这样JS代码就可以保存在自己的JS文件中。

# php - 使用 PHP/PostGreSQL 的 Google 地图 - 地图未加载

> ID：15974727
> 
> 赞同：1
> 
> 时间：2013-04-12T15:01:54.253
> 
> 标签：php, javascript, xml, google-maps

我正在尝试使用使用我编写的 PHP 文件生成的 XML 值生成具有多个标记的地图。我可以成功地将 PostGreSQL 数据库中的 XML 值打印到“markers.php”页面上。

但是，当我尝试将数据加载到 Google Maps 地图中时，地图本身不会显示或任何标记。放置地图的画布也不会出现。

谁能发现我的脚本有问题？PHP 方面的工作完美我只是在寻找一种解决方案，它将加载地图和具有从数据库中获取的 lat/lng 值的多个标记。请参阅下面的相关文件。

**标记.php**

```
session_start();
$username = $_SESSION['nickname']; 

function parseToXml($htmlStr)
{
    $xmlStr=str_replace('<','&lt;',$htmlStr); 
    $xmlStr=str_replace('>','&gt;',$xmlStr); 
    $xmlStr=str_replace('"','&quot;',$xmlStr); 
    $xmlStr=str_replace("'",'&#39;',$xmlStr); 
    $xmlStr=str_replace("&",'&amp;',$xmlStr); 
    return $xmlStr; 
}

$conn = pg_connect("dbconnectionstring");   

if(!conn){
    die ("Not connected : " . pg_last_error());
}

/*USE $username VARIABLE TO GET THE U_ID WHICH CORRESPONDS TO THE OWNER COLUMN IN RECORDS*/
$sql = "SELECT * FROM users WHERE username='$username'";
$sqlres = pg_query($sql);
$sqlassoc = pg_fetch_assoc($sqlres);
$owner = $sqlassoc['u_id'];

$query = "SELECT * FROM records WHERE owner='$owner'";
$result = pg_query($query);
if(!$result){
    die('Invalid query : ' . pg_last_error());
}

header("Content-type: text/xml");

echo '<markers>';

while($row = pg_fetch_assoc($result)){

    echo '<marker ';
    echo 'name="' . parseToXML($row['name']) . '" '; 
    echo 'description="' . parseToXML($row['description']) . '" ';
    echo 'latitude="' .parseToXML($row['latitude']) . '" ';
    echo 'longitude="' .parseToXML($row['longitude']) . '" ';
    echo 'project="' .parseToXML($row['project']) . '" ';
    echo '/>';
}

echo '</markers>'; 
```

该脚本完美运行并适当地生成 XML。

**Map.php** - 包含 javascript

```
 function load(){
        var map = new google.maps.Map(document.getElementById("map"), {
         center: new google.maps.LatLng(51.4129, -4.0774),
        zoom: 13,
        mayTypeId: google.maps.MapTypeId.ROADMAP
    });
    var infoWindow = new google.maps.InfoWindow;

    /*markers.php file in same directory as map.php*/
    downloadUrl("markers.php", function(data){
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++){
        var name = markers[i].getAttribute("name");
        var address = markers[i].getAttribute("description");
        var project = markers[i].getAttribute("project");
        var point = new google.maps.LatLng(
            parseFloat(markers[i].getAttribute("latitude")),
            parseFloat(markers[i].getAttribute("longitude")));
        var html = "<b>" + name + "</b> <br />" + "<b>" + description + "</b> <br />" + project;
        var iconBase = 'http://users.aber.ac.uk/dwd/mfb/images';
        var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: iconBase + 'map_icon.png'
        });
        bindInfoWindow(marker, map, infoWindow, html);
    }
});

   }

function bindInfoWindow(marker, map, infoWindow, html) {
    google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
});

}

function downloadUrl(url, callback) {
    var request = window.ActiveXObject ?
        new ActiveXObject('Microsoft.XMLHTTP') :
        new XMLHttpRequest;

    request.onreadstatechange = function() {
        if(request.readyState == 4) {
            request.onreadystatechange = doNothing;
            callback(request, request.status);
            }
        };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {} 
```

这段代码取自 Google Maps with PHP/MySQL 教程，但我看不到让它工作。有任何想法吗？

# azure - 如何访问 Azure 存储 $logs

> ID：15974728
> 
> 赞同：4
> 
> 时间：2013-04-12T15:01:58.497
> 
> 标签：azure

在 Azure 门户中，我创建了如下 Blob 存储：

[http://mymedia.blob.core.windows.net/](http://mymedia.blob.core.windows.net/)

我通过转到 mymedia > configure > logging 并启用它来启用日志记录。

不幸的是，当我去：

[http://mymedia.blob.core.windows.net/](http://mymedia.blob.core.windows.net/) $logs

我收到“找不到资源错误”。

所以我的问题是这个。启用存储日志记录后，如何实际访问它？：/

干杯

皮特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-09-13T13:19:19.973

我也花了一些时间寻找它。看起来：

*   $logs 容器未显示在在线 Azure 门户中
*   $logs 容器也不会显示在 Visual Studio (2015) Cloud Explorer 中
*   但它**确实**出现在 Microsoft Azure Storage Explorer 工具中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:27:30.313

我不相信 $logs 容器默认是公开的。您可以使用像[Cerebrata 的 Azure Management Studio](http://www.cerebrata.com/products/azure-management-studio/introduction)这样的工具来打开您的存储帐户并查看 $logs 容器吗？

它们不会在“Blob Containers”节点下，而是在“Storage Analytics”-->“Raw Data”节点下，如下面的屏幕截图所示：

![在此处输入图像描述](https://i.stack.imgur.com/TOuAh.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:03:15.987

Cerebrata 的工具很棒，或者对于一些免费选项，请查看以下内容：

Azure 存储资源管理器 5。http [://azurestorageexplorer.codeplex.com/](http://azurestorageexplorer.codeplex.com/)

Azure 资源管理器。[http://www.cerebrata.com/labs/azure-explorer](http://www.cerebrata.com/labs/azure-explorer)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-12T13:08:21.130

另一个检查 Azure 存储日志的工具是 CloudVyzor LogPad，现在处于测试阶段。与 Storage Explorer 相比，您实际上可以搜索那里的日志。该视频详细解释了它：[https ://youtu.be/q8el9e71jIE](https://youtu.be/q8el9e71jIE)

# windows - Powershell v2 在 foreach 中提示输入值

> ID：15974729
> 
> 赞同：1
> 
> 时间：2013-04-12T15:02:01.077
> 
> 标签：windows, powershell

此代码在 PowerShell v1 中运行，但不在 PowerShell v2 中运行。它现在提示输入一个值：

![在此处输入图像描述](https://i.stack.imgur.com/m0asK.png)

```
Get-ChildItem -Path $source -Filter "*.journal" | 
 Where-Object { $_.Name -match 'SoundPC\[\d{1,12}-\d{1,12}\].journal' } | Sort-Object -Property CreationTime | ForEach-Object 
{

$sourcefile = $_.Name

} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:15:48.387

左大括号必须与 foreach 命令位于同一行，目前它位于新行：

```
Foreach-Object {... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-03T07:18:43.077

正如 Shay Levy 指出的那样，大括号必须与`ForEach-Object`命令位于同一行。

```
... | ForEach-Object {
    $sourcefile = $_.Name
} 
```

或者，您可以在行尾使用反引号字符 ` 来产生续行，这将允许您将左大括号放在下一行。作为一名 C# 开发人员，我更喜欢这个，以便我的大括号可以对齐。

```
... | ForEach-Object `
{
    $sourcefile = $_.Name
} 
```

# python - 如何获取 Flask 请求的 url 的不同部分？

> ID：15974730
> 
> 赞同：196
> 
> 时间：2013-04-12T15:02:05.797
> 
> 标签：python, url, flask

我想检测请求是否来自`localhost:5000`或`foo.herokuapp.com`主机以及请求的路径。如何获取有关 Flask 请求的信息？

* * *

## 回答 #1

> 赞同：306
> 
> 时间：2013-04-12T15:16:00.310

您可以通过几个[`Request`](http://flask.pocoo.org/docs/api/#flask.Request.path)字段检查 url：

> 假设您的应用程序正在侦听以下应用程序根目录：
> 
> ```
> http://www.example.com/myapplication 
> ```
> 
> 用户请求以下 URI：
> 
> ```
> http://www.example.com/myapplication/foo/page.html?x=y 
> ```
> 
> 在这种情况下，上述属性的值如下：
> 
> ```
>  path             /foo/page.html
>     full_path        /foo/page.html?x=y
>     script_root      /myapplication
>     base_url         http://www.example.com/myapplication/foo/page.html
>     url              http://www.example.com/myapplication/foo/page.html?x=y
>     url_root         http://www.example.com/myapplication/ 
> ```

您可以使用适当的拆分轻松提取主机部分。

* * *

## 回答 #2

> 赞同：278
> 
> 时间：2017-09-12T12:25:02.433

另一个例子：

要求：

```
curl -XGET http://127.0.0.1:5000/alert/dingding/test?x=y 
```

然后：

```
request.method:              GET
request.url:                 http://127.0.0.1:5000/alert/dingding/test?x=y
request.base_url:            http://127.0.0.1:5000/alert/dingding/test
request.url_charset:         utf-8
request.url_root:            http://127.0.0.1:5000/
str(request.url_rule):       /alert/dingding/test
request.host_url:            http://127.0.0.1:5000/
request.host:                127.0.0.1:5000
request.script_root:
request.path:                /alert/dingding/test
request.full_path:           /alert/dingding/test?x=y

request.args:                ImmutableMultiDict([('x', 'y')])
request.args.get('x'):       y 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-04-04T12:56:46.357

你应该试试：

```
request.url 
```

它应该总是工作，即使在本地主机上（刚刚做到了）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-03T05:54:47.497

如果您使用的是 Python，我建议您探索请求对象：

`dir(request)`

由于对象支持方法**dict**：

`request.__dict__`

可以打印或保存。我用它在 Flask 中记录 404 代码：

```
@app.errorhandler(404)
def not_found(e):
    with open("./404.csv", "a") as f:
        f.write(f'{datetime.datetime.now()},{request.__dict__}\n')
    return send_file('static/images/Darknet-404-Page-Concept.png', mimetype='image/png') 
```

# git - git add 的文件模式是否有否定语法？

> ID：15974732
> 
> 赞同：7
> 
> 时间：2013-04-12T15:02:10.790
> 
> 标签：git

假设我想使用`git add`（或其他一些命令行指令 - 我不能使用 .gitignore）添加所有文件，除了 *.hi 文件。有没有办法做到这一点？到目前为止，我已经尝试过：

`git add '!*.hi'`

`git add '!(*.hi)'`

据我了解，这是您在 glob 语法中指定否定的方式，也是在 .gitignore 中执行此操作的方式。然而，对于这两个命令，我都收到错误消息`fatal: [pattern] did not match any files`。对于它的价值，我正在从 Windows Powershell 运行这些命令。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T17:05:16.957

纯粹的 Git 方法是将它们全部添加，然后再次从索引中删除那些您不想要的文件：

```
git add .
git rm --cached *.hi 
```

`--cached`只需要从索引中删除它们；否则你会删除这些文件。请注意，这`git rm`将始终“添加删除”到索引，因此如果文件被跟踪，这可能不是您想要的。然后你应该使用`git reset`评论中建议的 Klas Mellbourn：

```
git add .
git reset -- *.hi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T17:01:07.517

在 PowerShell 中，这有效：

```
git add $(Get-ChildItem -Recurse -Exclude '*.hi') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-25T08:54:38.577

排除模式是

```
git add '!:*.hi' 
```

注意分号。

在 PowerShell 中测试`git version 2.28.0.windows.1`

我发现[this answer to how to use the exclude pattern in git](https://stackoverflow.com/questions/55977195/git-add-files-which-do-not-match-a-pattern)有用

# css - 查找 div 宽度

> ID：15974735
> 
> 赞同：2
> 
> 时间：2013-04-12T15:02:20.800
> 
> 标签：css, html

我有三个div。两个较小的在同一个容器内，即第三个 div。

*   第一个子 div 大小为 350x350 像素。
*   第三个 div 是另一个容器 div 的 89%，这意味着我不知道它的大小。
*   我想让第二个子 div 跨越第一个子 div 和容器 div 的边缘。

基本上：

```
<div id="container">
    <div id="first_child" style="width:350px; height:350px;">&nbsp;</div>
    <div id="second_child" style="width:???px; height:350px;">&nbsp;</div>
</div> 
```

`second_child`如果我希望`second_child`元素精确地跨越`first_child`元素和边缘之间，如何计算元素的宽度`container`？

编辑：上传快速绘制的图像。大的黑色方块是`container`，测量值未知。红框是`first_child`，蓝框是`second_child`。我想找到它的宽度，`second_child`这样它就会`first_child`从`container`.

![](https://i.stack.imgur.com/9daAj.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:06:03.357

您可以使用 CSS `calc()`：

```
#second_child {
   width: -moz-calc(100% - 350px);
   width: -webkit-calc(100% - 350px);
   width: calc(100% - 350px);
} 
```

对于 IE8 及更低版本，您必须使用 jQuery 或 javascript

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T15:19:23.100

我认为您需要像这样使用一些CSS：

```
#container {
    width:89%;
    height:350px;
}
#first_child {
    float:left;
    width:350px;
    height:350px;
}
#second_child {
    height:350px;
    margin-left:350px;
} 
```

[这是一个工作示例](http://jsfiddle.net/3x8aX/3/)（添加样式以查看效果）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T15:16:43.250

上面给出了纯 CSS 的一个很好的答案，所以我只回答“我如何找到所需的宽度？”的问题。在 JavaScript 中。

```
// This is assuming there is no padding.
totalWidth = document.getElementById('container').offsetWidth;
firstChildWidth = document.getElementById('first_child').offsetWidth;
document.getElementById('second_child').style.width = (totalWidth - firstChildWidth) + 'px'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T15:15:31.683

您可以使用纯 css 定位来做到这一点，因为您知道第一个孩子有多大：

```
#container {
position:relative
}

#first_child {
width:350px;
height:350px
}

#second_child {
height:350px;
position:absolute;
top: 0;
left:350px;
right:0;
} 
```

请注意，容器 div 具有 position:relative。这是使 position:absolute 使用容器 div 的左上角而不是 body 所必需的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T15:06:58.200

使用 jQuery：

```
var containerWidth = $('#container').width();
$('#second_child').width(containerWidth - 350); 
```

# php - 如何为使用 ZF2 中的 Sql 对象创建的 Sql 语句的结果集设置数组对象原型

> ID：15974738
> 
> 赞同：2
> 
> 时间：2013-04-12T15:02:22.133
> 
> 标签：php, zend-framework2, zend-db

我想在我的模型中使用 Sql 对象来查询数据库。我有一个实体对象，可以说 Person 和 person 对象有`exchangeArray()`方法。我想将此 Person 对象设置`Array Object Prototype`为我的 sql 查询的 ResultSet 中的一个。

我研究了如何做到这一点，但我发现的唯一信息是如何将 Array Object Prototype 设置为`ResultSet`分配给`Zend\Db\TableGateway\TableGateway`.

```
$personEntity = new PersonEntity();
$resultSet = new \Zend\Db\ResultSet\ResultSet();
$resultSet->setArrayObjectPrototype($personEntity);
$db = $sm->get('Zend\Db\Adapter\Adapter');
$table = new \Zend\Db\TableGateway\TableGateway('table', $db, null, $resultSet); 
```

我的问题是如何设置`PersonEntity`对象来表示从`Zend\Db\Sql\Sql`对象返回的数据库行？

提前致谢，

史蒂夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T11:00:19.190

我认为以下示例将回答您的问题：

```
class Foo
{
    ...
    public function fetchAll() 
    {
        $sql = new Sql($dbAdapter); // Zend\Db\Sql\Sql
        $select = $sql->select('table_foo');
        $query = $sql->prepareStatementForSqlObject($select);
        $resutl = $query->execute();
        $resultSet = new ResultSet(); // Zend\Db\ResultSet\ResultSet
        $resultSet->setArrayObjectPrototype(new EntityObject()); // <-- HERE you set your entity object
        $resultSet->initialize($resutl);
        return $resultSet;
    }
    ...
} 
```

此代码将返回一个`ResultSet`对象，在该对象中，每一行返回都将由 . 在本例中表示`EntityObject`。

[这](http://framework.zend.com/manual/2.0/en/modules/zend.db.result-set.html#quickstart)是对显示注入`dataSource`结果对象的手册的参考。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-27T09:32:57.463

您可以将数组对象原型设置为您想要的任何结果集，如下所示：

```
$resultSet->setArrayObjectPrototype(new Entity); 
```

# xaml - Telerik：raddatetimepicker SelectedDateChanged 事件不起作用

> ID：15974739
> 
> 赞同：2
> 
> 时间：2013-04-12T15:02:22.687
> 
> 标签：xaml, events, telerik, raddatepicker

您好我使用元素（类似的日期选择器）。当我使用特定按钮更改日期时，会引发 SelectedDateChanged 事件。（正确）当我直接在文本框中更改日期时，不会引发事件 SelectedDateChanged。（不正确）

你知道这个问题吗？你知道解决方案吗？

谢谢（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T07:16:32.833

```
<telerik:RadDatePicker ID="RadDtpTrnDate"
                       runat="server"
                       Calendar-EnableShadows="true"
                       Enabled="false"
                       Culture="en-IN"
                       DateInput-DateFormat="dd-MMM-yyyy"
                       DateInput-EmptyMessage="DD-MMM-YYYY"
                       DateInput-AutoPostBack="true"
                       ShowPopupOnFocus="true"
                       ToolTip="Input Date"
                       AutoPostBack="true"
                       OnSelectedDateChanged="RadDtpTrnDate_SelectedDateChanged">
</telerik:RadDatePicker> 
```

尝试这个................

# python - 从 dict 中检索对象，使其可以通过 json.dumps() 轻松转储

> ID：15974744
> 
> 赞同：1
> 
> 时间：2013-04-12T15:02:31.553
> 
> 标签：python, json, python-2.7

我怎样才能让它以类似pythonic的方式打印出来（我可以手动制作它，但感觉有更好的pythonic方式），最初我认为我可以为此使用dict，但我的python知识有限，我'我猜他们是一种更简单的方法。我的最终目标是通过 json.dumps() 创建一个 json 对象

期望的结果：

```
{'cars': [{'make': 'VW', 'model': 'Jetta'},{'make': 'BMW', 'model': 'X5'}], 'name': 'John Smith'} 
```

代码：

```
class Person(object):
    def __init__(self):
        self.name = None
        self.cars = []

class Car(object):
    def __init__(self, make, model):
        self.make = make
        self.model = model

>>> p = Person()
>>> p.name = 'John Smith'
>>> p.cars.append(Car('VW', 'Jetta'))
>>> p.cars.append(Car('BMW' ,'X5'))

>>> p.__dict__
{'cars': [<__main__.Car object at 0x7fe5566e9490>, <__main__.Car object at 0x7fe5566e94d0>], 'name': 'John Smith'} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:07:46.200

该`json.dumps()`方法有一个`default`关键字，可让您指定将未知项目转换为 JSON 的方法。利用它：

```
def default(obj):
    if isinstance(obj, (Car, Person)):  # so if this is one of *your* objects
        return obj.__dict__             # turn it into a python dict

    raise TypeError                     # Sorry, don't know how to handle this 
```

然后使用它来创建 JSON：

```
json.dumps(p, default=default) 
```

结果：

```
>>> json.dumps(p, default=default)
'{"cars": [{"make": "VW", "model": "Jetta"}, {"make": "BMW", "model": "X5"}], "name": "John Smith"}' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T15:05:30.490

将此添加到汽车类：

```
def __repr__(self):
    return "{'make': %s, 'model': %s}" % (self.make, self.model) 
```

编辑：

你也可以这样做：

```
def __repr__(self):
    return str(self.__dict__) 
```

但它会打印所有属性。

编辑2：

我没有意识到您的目标是使用 json.dumps() 生成 JSON 文件。在这种情况下，您应该使用 Martijn Pieters 的方法。

# javascript - 是否可以将 javascript 变量添加到 escape_javascript 语句中？

> ID：15974754
> 
> 赞同：0
> 
> 时间：2013-04-12T15:02:59.820
> 
> 标签：javascript, ruby-on-rails, interpolation

我知道这听起来很疯狂。;)

我的线路：

```
"#{escape_javascript(content_tag(:a, "edit", :href => edit_object_payment_url(@object, "\#{payment_id}"))) 
```

然后通过插值，我注入我的变量。Payment_id 是一个 JavaScript 变量。是否可以在语法上将该变量传递到这个 escaped_javascript 语句中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:14:48.597

您的 Rails 视图将无法访问 JavaScript 变量，因此您将无法像`edit_object_payment_url`使用 JavaScript 变量那样调用 Rails URL 辅助方法。但是您可以使用 JavaScript 在客户端构建 URL。

# javascript - 重新加载函数会导致 onclick 处理程序停止工作

> ID：15974755
> 
> 赞同：0
> 
> 时间：2013-04-12T15:03:01.540
> 
> 标签：javascript, jquery, html, file-upload

所以我有以下

```
<form id="uploadControls">
    <input type="file" id="browseFiles">
    <input type="button" id="startUpload" value="Upload">
    <input type="checkbox" id="overwrite">
</form> 
```

一些javascript使用这些来控制文件上传机制。后端工作得很好。我使用 resumable.js（[https://github.com/23/resumable.js](https://github.com/23/resumable.js)），这是我的上传控件的一个小示例片段

```
var resume;
function resumableUpload(){
    resume = new Resumable({
        url: uploadURL,
        query: {overwrite: !!($("#overwrite").attr('checked'))},
        size: 1024*1024
    });
    // some events with callback functions
    resume.assignBrowse(document.getElementById("browseFiles"));
}
$("#startUpload").live("click",function(){
    resume.upload();
}); 
```

现在，如果有人要选中复选框以允许文件覆盖以前存在的文件（保存时不带时间戳），我需要更新`query`可恢复对象中的参数，而我能够做到这一点的唯一方法是使用 reloading `resumableUpload()`。问题是，当调用是这样的：

```
$("#overwrite").on('click',resumableUpload); 
```

然后所有`onclick`处理程序停止响应。

我尝试了以下方法：

```
$("#overwrite").on('click',function(){
    $("#uploadControls").each(function(){
        this.reset();
    });
    startResumable();
}); 
```

但这似乎不起作用。

我做错了什么？这适用于使用 resumable.js 库将文件选择器绑定到 a`<button>`但在 Firefox 上不起作用，所以我需要一个更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:07:17.787

尝试使用委托：

```
$("#uploadControls").on('click','#overwrite',function(){...}); 
```

顺便提一句：

```
$("#startUpload").live("click",function(){...}); 
```

应该：

```
$(document).live("click","#startUpload",function(){...}); 
```

**LIVE**已弃用：

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

# sql - 删除组中不包含最大值的所有行

> ID：15974758
> 
> 赞同：0
> 
> 时间：2013-04-12T15:03:08.957
> 
> 标签：sql, max, sql-delete

我对这个流行的问题和接受的答案有一个转折： [如何在 SQL 中通过另一列选择具有 MAX(列值)、DISTINCT 的行？](https://stackoverflow.com/questions/612231/how-can-i-select-rows-with-maxcolumn-value-distinct-by-another-column-in-sql)

我有一个结构类似的表，但不是选择具有最高数据时间的行，而是我想删除每个 ID 分组中不包含最大日期时间的所有行。查询应该使表的行数更小。

我已经尝试在 WHERE NOT EXISTS 子查询中使用接受的答案的选择查询，但我收到错误“您无法指定目标表......在 From 子句中进行更新”

您将如何更改它以删除此处不符合 SELECT 要求的行：

```
SELECT tt.*
FROM topten tt
INNER JOIN
    (
     SELECT home, MAX(datetime) AS MaxDateTime
     FROM topten
     GROUP BY home
    ) groupedtt ON tt.home = groupedtt.home AND tt.datetime = groupedtt.MaxDateTime 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:50:24.353

ID 是表的主键

```
;with
GetResults
AS
(
    SELECT tt.*
    FROM topten tt
    INNER JOIN
        (
         SELECT home, MAX(datetime) AS MaxDateTime
         FROM topten
         GROUP BY home
        ) groupedtt ON tt.home = groupedtt.home AND tt.datetime = groupedtt.MaxDateTime
)
    DELETE GetResults
    FROM topten tt LEFT JOIN GetResults ON tt.ID = GetResults.ID
    WHERE GetResults.ID IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:21:45.267

with `id` being the pk of `topten`:

```
 delete
      from topten tt1
     where tt1.id NOT IN (
                 SELECT tt2.id
                   FROM topten tt2
             INNER JOIN (
                          SELECT home, MAX(datetime) AS MaxDateTime
                          FROM topten tt3
                          GROUP BY home
                        ) groupedtt ON tt2.home = groupedtt.home AND tt2.datetime = groupedtt.MaxDateTime
           )
         ; 
```

# sharepoint - 如何找出 BDC 中的反手数据库（BDCM 模型）

> ID：15974766
> 
> 赞同：1
> 
> 时间：2013-04-12T15:03:28.410
> 
> 标签：sharepoint, bcs, bdc

我想知道如何知道哪个数据库是 BDCM 模型使用的。我做了一些研究，发现我可以从中央管理员导出模型（我做了）。现在我有一个模型（abc.bcdm）可以使用，我不确定如何使用它来找出它连接到的数据库（外部内容类型）。

我在这里找到了一篇好文章 ( [http://msdn.microsoft.com/en-us/library/bb736296(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/bb736296(v=office.12).aspx) )，并且我还安装了业务数据目录定义编辑器。但是，此软件无法识别 .BDCM 文件。

我会非常感谢任何人的帮助。提前致谢。

# internet-explorer - MVC 4 网页中的 jqgrid (4.4.1 版) 网格挂起 IE9/10

> ID：15974770
> 
> 赞同：1
> 
> 时间：2013-04-12T15:03:38.520
> 
> 标签：internet-explorer, jqgrid, freeze

这是 jqgrid 版本 4.4.1 和 IE9/10 在 MVC 4 Web 应用程序中的一个奇怪的挂起问题（MVC 3 也发生过）。

我有很多带有 jqgrids 的页面，这是所有页面的问题。当在开发模式下运行时（按 F5 键），页面在 IE 中工作正常，但是当它们从 Web 服务器运行时，它会挂起浏览器。这在 Chrome、Safari 或 Firefox 中不是问题。

如果我打开IE JS错误显示，不断出现如下错误，这就是浏览器死机的原因：

消息：无效的参数。行：151 字符：212 代码：0 URI：.../Scripts/jquery.jqGrid-4.4.1.min.js

这是来自其中一个悬挂页面的 jgrid：

```
$("#GridQuery").jqGrid({
    caption: "Lists",
    colNames: [
        "ID",
        "Select",
        "List Name",
        "Last Import Date",
        "Last Run Date"
        ],
    colModel: [
        { name: "ID", index: "ID",
            hidden: true,
            sortable: false,
            width: 0
        },
        { name: "Select", index: "Select",
            align: "center",
            sortable: false,
            width: 10
        },
        { name: "ListName", index: "ListName",
            sortable: false,
            width: 60
        },
        { name: "LastImportDate", index: "LastImportDate",
            align: "center",
            sortable: false,
            width: 30
        },
        { name: "LastRunDate", index: "LastRunDate",
            align: "center",
            sortable: false,
            width: 30
        }
        ],
    altRows: true,
    altclass: "altGridRows",
    cellEdit: false,
    cellsubmit: "clientArray",
    datatype: "json",
    emptyrecords: "No lists have been defined",
    footerrow: false,
    gridview: true,
    height: "100%",
    mtype: "post",
    pager: "#GridQueryPager",
    rowList: [5, 10, 20],
    rowNum: 5,
    url: "/App/GetQueryList",
    userDataOnFooter: false,
    viewrecords: true,
    width: 700,

    jsonReader: {
        root: "rows",
        page: "page",
        total: "total",
        records: "records",
        repeatitems: true,
        cell: "cell",
        id: "id",
        userdata: "userdata"
    },

    gridComplete: function () {
        var idList = $("#GridQuery").jqGrid("getDataIDs");
        if (idList) {
            for (var iX = 0; iX < idList.length; iX++) {
                var id = $("#GridQuery").jqGrid("getCell", idList[iX], "ID");
                var checkbox = "<input type='checkbox' id='Check_" + iX + "' />";
                $("#GridQuery").jqGrid("setCell", idList[iX], "Select", checkbox);
            }
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:16:39.717

我的页面在 IE 本地正确显示但不是来自网络服务器时出现问题。我在_layout.cshtml中添加了代码，head标签

```
<meta http-equiv="X-UA-Compatible" content="IE=5, IE=8, IE=9, IE=10" > 
```

这对我的情况有所帮助。希望对你有帮助

谢谢

# c# - 这个过程会影响数据库的可用性吗？

> ID：15974772
> 
> 赞同：1
> 
> 时间：2013-04-12T15:03:50.317
> 
> 标签：c#, .net, database, oracle, backup

[http://rockingtechnology.blogspot.co.uk/2011/06/oracle-backup-and-restore-code-in-cnet.html](http://rockingtechnology.blogspot.co.uk/2011/06/oracle-backup-and-restore-code-in-cnet.html)

根据上述文章中建议的代码，更具体地说：

```
ProcessStartInfo psi = new ProcessStartInfo();
psi.FileName = "C:/oracle/product/10.2.0/db_1/BIN/exp.exe";
Process process = Process.Start(psi);
process.WaitForExit();
process.Close(); 
```

一旦调用 Process.Start(psi) 并因此执行 exp.exe，我怎么能期望数据库会因从其他地方中断 CRUD 操作而受到影响？

使用 Oracle 的 exp.exe 进程 - 例如，当前写入相关数据库的所有用户的会话是否会被终止？我想（或至少希望）不会，但我无法找到文件来证实这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:13:43.003

您实际上是在问（旧的）[Oracle 导出工具 ( `exp`)](http://www.orafaq.com/wiki/Import_Export_FAQ)对数据库有什么影响。`SELECT`这是一个逻辑备份，因此您通常可以按照对数据库运行多个查询的方式来考虑效果。也就是说，其他会话不会被杀死，但正常的锁定机制可能会阻止它们访问数据，直到`exp`完成它，这可能会导致超时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:16:29.797

[`EXP`](http://docs.oracle.com/cd/E11882_01/server.112/e22490/original_export.htm#SUTIL3634)是原始的导出实用程序。它已停产，并且在最新版本 (11g) 中不受支持。

您可以[`EXPDP`](http://docs.oracle.com/cd/E11882_01/server.112/e22490/dp_export.htm#i1007466)改用，尽管导出文件是写在服务器而不是客户端机器上的。

这两个实用程序都向数据库发出标准`SELECT`命令，并且由于读取器不会干扰 Oracle 中的并发性（写入器不会阻塞读取器，读取器不会阻塞读取器），因此这不会阻塞您的其他数据库操作。

然而，由于它发出语句，它可能会增加资源使用量，尤其是 IO，这可能会影响并发活动的性能。

无论您使用什么工具，您都应该花一些时间了解这些选项（另外，由于您可能希望将其用作逻辑副本，请确保您测试了相应的导入工具[IMP](http://docs.oracle.com/cd/E11882_01/server.112/e22490/original_export.htm#BABBHCIE)和[IMPDP](http://docs.oracle.com/cd/E11882_01/server.112/e22490/dp_import.htm#i1007653)）。还有一句警告：这些工具不是备份工具。您不应该依赖它们进行备份。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T15:18:39.327

EXP 和 IMP 不是适当的备份和恢复工具。它们用于在 Oracle 数据库之间交换数据和数据结构。它们的替代品 Data Pump（EXPDP 和 IMPDP）也是如此。

导出卸载到文件，因此它不会影响系统上的任何用户。但是，如果您想要一组一致的数据，如果有任何其他用户连接到系统，则需要使用 CONSISTENT=Y 参数。

有趣的是，Data Pump 没有 CONSISTENT 参数。它将表（或表分区）作为单个事务卸载，但保证所有数据库对象一致性的唯一方法是使用 FLASHBACK_SCN 参数（或将所有用户踢出系统）。

* * *

> “这一切都是为了帮助博士。”

作为 DR 解决方案，这将起作用，但有以下附带条件。

1.  用户将丢失自上次导出以来的所有数据（很明显）
2.  您需要确保所有对象的导出一致
3.  进口需要时间。如果您有很多表或大量数据，则需要很多时间。加索引等

还要记住导出统计数据和数据。

# r - 尝试使用 R fitdistr{MASS} 拟合伽马分布时出错

> ID：15974773
> 
> 赞同：10
> 
> 时间：2013-04-12T15:03:53.280
> 
> 标签：r, gamma-distribution

我对 R 中的 fitdistr{MASS} 函数有疑问。我有这个向量：

```
a <- c(26,73,84,115,123,132,159,207,240,241,254,268,272,282,300,302,329,346,359,367,375,378, 384,452,475,495,503,531,543,563,594,609,671,687,691,716,757,821,829,885,893,968,1053,1081,1083,1150,1205,1262,1270,1351,1385,1498,1546,1565,1635,1671,1706,1820,1829,1855,1873,1914,2030,2066,2240,2413,2421,2521,2586,2727,2797,2850,2989,3110,3166,3383,3443,3512,3515,3531,4068,4527,5006,5065,5481,6046,7003,7245,7477,8738,9197,16370,17605,25318,58524) 
```

我想用一个命令将伽玛分布拟合到数据中：

```
fitted.gamma <- fitdistr(a, "gamma") 
```

但我有这样的错误：

```
Error in optim(x = c(26, 73, 84, 115, 123, 132, 159, 207, 240, 241, 254,  : 
non-finite finite-difference value [1]
In addition: Warning messages:
1: In densfun(x, parm[1], parm[2], ...) : NaNs produced
2: In densfun(x, parm[1], parm[2], ...) : NaNs produced
3: In densfun(x, parm[1], parm[2], ...) : NaNs produced
4: In densfun(x, parm[1], parm[2], ...) : NaNs produced 
```

所以我尝试初始化参数：

```
(fitted.gamma <- fitdistr(a, "gamma", start=list(1,1))) 
```

对象 fit.gamma 已创建，但在打印时会产生错误：

```
Error in dn[[2L]] : subscript out of bounds 
```

你知道发生了什么，或者可能知道其他一些 R 函数来拟合 MLE 的单变量分布吗？

提前感谢您的任何帮助或回复。

库巴

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T15:14:32.627

总是先绘制你的东西，你的缩放是远远的ffffffff。

```
library(MASS)
a <- c(26,73,84,115,123,132,159,207,240,241,254,268,272,282,300,302,329,346,359,367,375,378, 384,452,475,495,503,531,543,563,594,609,671,687,691,716,757,821,829,885,893,968,1053,1081,1083,1150,1205,1262,1270,1351,1385,1498,1546,1565,1635,1671,1706,1820,1829,1855,1873,1914,2030,2066,2240,2413,2421,2521,2586,2727,2797,2850,2989,3110,3166,3383,3443,3512,3515,3531,4068,4527,5006,5065,5481,6046,7003,7245,7477,8738,9197,16370,17605,25318,58524)
## Ooops, rater wide
plot(hist(a))
fitdistr(a/10000,"gamma") # gives warnings
# No warnings
fitted.gamma <- fitdistr(a/10000, dgamma,  start=list(shape = 1, rate = 0.1),lower=0.001) 
```

现在您可以决定如何处理缩放

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-04T17:50:04.257

对于明显符合伽马分布但比例错误的数据（即，好像它已被乘以/除以一个大数），这是拟合伽马分布的另一种方法：

```
fitgamma <- function(x) {
  # Equivalent to `MASS::fitdistr(x, densfun = "gamma")`, where x are first rescaled to 
  # the appropriate scale for a gamma distribution. Useful for fitting the gamma distribution to 
  # data which, when multiplied by a constant, follows this distribution
  if (!requireNamespace("MASS")) stop("Requires MASS package.")

  fit <- glm(formula = x ~ 1, family = Gamma)
  out <- MASS::fitdistr(x * coef(fit), "gamma")
  out$scaling_multiplier <- unname(coef(fit))
  out
} 
```

用法：

```
set.seed(40)
test <- rgamma(n = 100, shape = 2, rate = 2)*50000
fitdistr(test, "gamma") # fails
dens_fit <- fitgamma(test) # successs
curve(dgamma(x, 2, 2), to = 5) # true distribution
curve(dgamma(x, dens_fit$estimate['shape'], dens_fit$estimate['rate']), add=TRUE, col=2) # best guess
lines(density(test * dens_fit$scaling_multiplier), col = 3) 
```

[![密度图](https://i.stack.imgur.com/40TxC.png)](https://i.stack.imgur.com/40TxC.png)

# c# - 如何让用户在一个表单/窗口中导航多个“屏幕”？

> ID：15974774
> 
> 赞同：0
> 
> 时间：2013-04-12T15:03:55.723
> 
> 标签：c#, forms, user-interface, navigation

我正在开发一个项目，该项目模拟公司的程序以在 GUI 中执行各种功能（在 VS2010 上使用 C#）。目前大约有 10 种左右不同的表格，每个功能一个（用作菜单、填写各种表格、管理所述表格等）。到目前为止，我们一直在使用以下方面的东西：

```
Form1 myForm1 = new Form1();
myForm1.Show(); 
```

打开新屏幕和

```
this.Hide(); 
```

完成当前活动的表单时。（`this.Close()`只是似乎关闭了整个程序）

这会导致一些问题，即在单击表单右上角的 X 后，进程存在继续运行的问题（我认为这是由于隐藏表单未正确关闭所致）。我还怀疑，如果用户使用程序内导航而不杀死进程足够长的时间，那么不断生成和隐藏表单最终会占用所有内存。

在野外，我很少看到依赖不断打开新窗口/表单来启用用户导航的程序。诸如安装程序之类的程序通常使用某种事件来使当前显示的内容消失并出现新内容，而无需更改为新的表单/窗口。我该怎么做呢？是否将按钮/文本框/标签全部堆叠在一个屏幕上，但隐藏起来还是我缺少更直观的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:12:57.807

Have you looked in to using some kind of MDI setup: [http://www.codeproject.com/Articles/7571/Creating-MDI-application-using-C-Walkthrough](http://www.codeproject.com/Articles/7571/Creating-MDI-application-using-C-Walkthrough)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:13:37.573

The way you can do this (but isn't always feasible) is to make a [UserControl](http://msdn.microsoft.com/en-us/library/aa302342.aspx) for each screen. When its time to move on to the next screen, you simply hide the current user control and show the next one. So if you have 8 screens for example, you make each one into a user control.

Then on your MainForm's Load event, you initially hide all except the first one. When its time to move onto the second screen, you hide the first control and show the second, etc etc

# wpf - 使用 Prism 区域创建“可合并”工具栏？

> ID：15974783
> 
> 赞同：1
> 
> 时间：2013-04-12T15:04:26.027
> 
> 标签：wpf, prism

我正在开发一个 WPF 应用程序，我希望在屏幕顶部有一个通用工具栏（当我说“工具栏”时，它不会是 WPF 工具栏控件，更可能只是一系列类似于 Windows 8 应用程序的图像按钮酒吧）。我正在使用棱镜导航。

我的想法是这个工具栏将存在于主窗口中，并且在整个应用程序中始终可见。工具栏将包括几个标准按钮，例如“退出”和“帮助”。

在工具栏下方，主窗口基本上只包含一个大的 Prism 区域。当我将此区域导航到视图（称为“view1”）时，我希望 view1 将其他按钮添加到工具栏中。

现在，“view1”可能有自己的 Prism 区域，当其中一个被导航到视图（称为“view2”）时，view2 应该能够在“标准”主窗口按钮旁边添加自己的按钮*以及*view1 添加的按钮。

不用说，在离开视图时应该删除相关按钮。

我确信我可以推出自己的解决方案，但想知道我是否可以使用 Prism 简化事情？我考虑在“标准”按钮旁边的工具栏中放置一个 Prism 区域。“view1”然后会将这个区域导航到一个基本上只包含 view1 按钮的视图。这个“view1 按钮视图”本身可以包含一个区域，view2 可以导航到它自己的“按钮视图”。这是可行的，还是会变得太复杂？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:19:17.500

听起来你可能有点复杂，或者至少你最后失去了我......但今天并不需要太多！

一个建议：例如，您的“工具栏”可能是`ItemsControl`您`ItemsSource`的某个类的集合`ToolBarOperation`。此类可以包含要向用户显示的描述和单击时要执行的 ICommand。将您`ItemsControl`的项目设置为按钮并将每个按钮的命令绑定到您的类的 ICommand。该集合将由当前可见视图的视图模型填充（即`View1`，视图模型已经知道它将负责执行哪些命令。加载时，用的列表`View1`填充集合。）`ViewModel1``ToolBarOperation`

因此，要回答您的问题，我认为您不需要任何特定于 Prism 的东西（除了它们的实现`DelegateCommand`）......文档中讨论的“控制器模式”可能会有所帮助。但是，与 Prism 一起完成您想要的事情应该不难。

# .net - Linq DataContext.Mapping.GetTables() 不返回任何内容

> ID：15974786
> 
> 赞同：0
> 
> 时间：2013-04-12T15:04:31.430
> 
> 标签：.net, linq-to-sql

我正在尝试尽可能多地使用 LINQ，所以我想弄清楚这一点。我可以使用 DataContext ExecuteQuery 方法获取用户选择的服务器/数据库中的表列表，但不使用 Mapping.GetTables() 枚举器。

这是我所拥有的（由 BackgroundWorker.RunWorkerAsync(args) 调用）：

```
//Build the connection string (args contains the Server and database names)
Dictionary<string, string> args = (Dictionary<string, string>)e.Argument;
string ConnectString = "Data Source=" + args["SqlServerHolder"] + ";Integrated Security=True;Initial Catalog=" + args["SqlServerDatabaseHolder"];

//Get the connection and pull the list
using (SqlConnection con = new SqlConnection(ConnectString))
{
    // Open connection
    con.Open();

    //create a linq connection and get the list of database names
    DataContext dc = new DataContext(con);

    //THIS WORKS
    e.Result = new ObservableCollection<string>(dc.ExecuteQuery<string>("SELECT [name] FROM sysobjects WHERE xtype='U'").AsEnumerable());

    //THIS COMES BACK EMPTY (tables)
    IEnumerable<string> tables = (from mt in dc.Mapping.GetTables() select mt.TableName);
    e.Result = new ObservableCollection<string>(tables);
} 
```

运行硬编码查询是可行的，但我宁愿使用 GetTables() 方法来避免这种情况。我能想到的唯一一件事是数据库像这样动态连接，我必须以某种方式填充映射？

谢谢厄尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T09:57:42.233

Linq-to-sql 需要一些代码来处理 ORM 功能——它适用于强类型类。

现在您选择一个随机数据库，因为没有可用的映射，因此没有结果。换句话说，随机数据库没有 DBML。

另一个语句只是简单的 SQL，因此它可以在任何随机数据库中工作，但它确实返回任何 stronly 类型的内容。

# python - import tkinter as tk 和 from tkinter import 之间的区别

> ID：15974787
> 
> 赞同：21
> 
> 时间：2013-04-12T15:04:37.413
> 
> 标签：python, import, tkinter

我知道这是一个愚蠢的问题，但我才刚刚开始学习 python，而且我对 python 没有很好的了解。我的问题是有什么区别

```
from Tkinter import * 
```

和

```
import Tkinter as tk 
```

？为什么我不能只写

```
import Tkinter 
```

谁能抽出几分钟来启发我？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-12T15:07:43.133

`from Tkinter import *`将 Tkinter 中的每个公开对象导入到您当前的命名空间中。 `import Tkinter`在您的命名空间中导入“命名空间”Tkinter 并 `import Tkinter as tk`执行相同操作，但将其在本地“重命名”为“tk”以节省您的输入

假设我们有一个模块 foo，包含类 A、B 和 C。

然后`import foo`让您访问 foo.A、foo.B 和 foo.C。

当您这样做时，`import foo as x`您也可以访问它们，但是在名称 xA、xB 和 xC 下 `from foo import *`将直接在您当前的命名空间中导入 A、B 和 C，因此您可以使用 A、B 和 C 访问它们。

还有`from foo import A, C`wich 将导入 A 和 C，但不会将 B 导入您当前的命名空间。

您也可以这样做`from foo import B as Bar`，这将使 B 在名称 Bar 下可用（在您当前的命名空间中）。

所以一般来说：当你只想要一个模块的一个对象时，你做`from module import object`or `from module import object as whatiwantittocall`。

当您需要某些模块功能时，您可以这样做`import module`，或`import module as shortname`节省您的打字时间。

`from module import *`不鼓励，因为您可能会意外隐藏（“覆盖”）名称，并且可能会丢失属于哪个模块的对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T15:08:12.543

你当然可以使用

```
import Tkinter 
```

但是，如果这样做，则必须在使用的每个 Tk 类名称前加上`Tkinter.`.

这是相当不方便的。

另一方面，以下内容：

```
import Tkinter as tk 
```

通过只要求您键入`tk.`而不是`Tkinter.`.

至于：

```
from Tkinter import * 
```

[由于应避免通配符导入中](https://stackoverflow.com/questions/3615125/should-wildcard-import-be-avoided)讨论的原因，这通常是一个坏主意

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-31T10:51:43.603

写作：

```
from tkinter import * 
```

导致导入`tkinter`模块中存在的所有内容

写作：

```
import tkinter 
```

导致导入`tkinter`模块，但如果您这样做，为了能够调用您必须使用的任何方法：

```
tkinter.function_name() 
```

# ruby - 为什么在这里调用 super 失败

> ID：15974790
> 
> 赞同：2
> 
> 时间：2013-04-12T15:04:52.940
> 
> 标签：ruby

```
 module A
   def foo
     if super.respond_to? :foo
        puts 'super responded to :foo'
     end
   end
 end

 class Lab
   include A
 end

 puts Lab.ancestors.inspect #=> Lab, A, Object, Kernel, BasicObject]
 Lab.new.foo 
```

`foo': super: no superclass method`foo' for # (NoMethodError)

我假设在这种情况下，对 super 的调用会先到`Object`然后再到`BasicObject`，最后会返回 false。

为什么我得到`no superclass method foo`？

我正在使用 ruby​​ 1.9.3 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:11:56.550

Super调用父类上的同名方法。

```
if super.respond_to? foo 
```

该行将在层次结构中的任何父类上调用 foo。

编辑：

你可能想做类似的事情

```
self.ancestors.select{|a| a.respond_to? :foo}.size > 0 
```

作为支票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:35:11.737

您的代码实际上没有意义：您使用条件来保护调用，但无论如何`super`您都是在该条件下调用。`super`换句话说：你打电话`super`是为了确定打电话是否安全`super`。`foo`因此，如果祖先链中没有调用任何方法，您将收到错误消息。

# c - 二维 char** 数组中的 strcpy() 分段错误

> ID：15974792
> 
> 赞同：0
> 
> 时间：2013-04-12T15:04:55.627
> 
> 标签：c, segmentation-fault, strcpy

我目前正在编写一个 shell，它获取输入并将其存储在字符串 (char*) 数组中。为了启用像流水线这样的 UNIX 操作，我希望能够编写类似的命令

```
echo this | function more | function2 
```

为此，我在 while 循环中收集命令及其参数，并尝试将参数数组的所有内容复制到一个新的二维数组中，该数组包含整个命令行，例如“ `ls -f -a`”。到目前为止，这是可行的，但是，一旦`|`在命令行中找到“”，我就会尝试重置循环，忽略“ `|`”，并开始一个新的循环做同样的事情，直到`'\0'`找到，这标志着原始输入的结尾：

```
char* arguments[MAXARGS]; // holds argument components, e.g. "ls" or "-f"
char** arg_collection[MAXARGS][MAXARGS]; // supposed to hold command lines, e.g. "ls -f -a"
argc_current = 0; // iterator for the loop, counts arguments
col_iterator = 0; // iterator for amount of command lines
int sentinel = 1; // sentinel value for while loop
...

while(sentinel)
{
    arguments[argc_current] = (char*) malloc (sizeof(word)); // word is defined, just not listed on here - refers to the currently read command / argument
     strcpy(arguments[argc_current], word); // copy current word into arguments

    if(tokens[argc_current] == TOKEN_TERMINATOR || tokens[argc_curernt] == TOKEN_NULL)
    {
       sentinel = 0; // tokens holds information about the type of word, e.g. if it is '\0'
    }

    if(tokens[argc_current] == T_BAR) // if the word is "|"
    {
       for(i = 0; i < argc_current; i++)
       {
          strcpy(arg_collection[col_iterator][i], arguments[i]); // copy argument list into collection
       }

       col_iterator++; // increment command line counter
       argc_current = 0; // reset argument counter, restart the loop
    }

    else
    {
        arg_current++; // increment current argument counter
    }
}

evaluating arguments here.. 
```

第一个循环工作正常，例如，如果我输入

```
echo this | echo more | 
```

它填充`arg_collection[0][0]`and `arg_collection[0][1]`，所以我得到 " `echo this`" 结果。然而，在`col_iterator`增加到 1 之后，当我注意到第二个“|”时调用 strcpy 时，我以分段错误的形式撞到了砖墙。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:06:41.487

看起来`word`是一个`char*`. 如果是这样，你应该改变

```
arguments[argc_current] = (char*) malloc (sizeof(word)); 
```

至

```
arguments[argc_current] = malloc(strlen(word)+1); 
```

`sizeof(word)`会给你一个指针变量的大小，而不是它指向的数据的大小。 `strlen`告诉你`word`. 是终结器所`+1`必需的。`'\0'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-22T12:07:35.953

首先，您应该在使用之前分配 arg_collection。（由于您没有提供整个代码，我假设您不这样做）。

然后，您将在线取消引用您的 arg_collection 的两倍：

```
strcpy(arg_collection[col_iterator][i], arguments[i]); // copy argument list into collection 
```

当你必须

```
strcpy(arg_collection[col_iterator], arguments[i]); 
```

也就是说，当它只是一个字符时，您将 arg_collection 中字符串 col_iterator 的索引 i 处的字符视为 char *。

# java - DocumentBuilder XML 文件空变量问题

> ID：15974793
> 
> 赞同：0
> 
> 时间：2013-04-12T15:04:57.957
> 
> 标签：java, xml, nullpointerexception

我在 JAVA 中使用 DocumentBuilder Factory 来创建 XML 文件，并且在我的 createTextNode() 方法中，“null”值是不可接受的。

```
Element card_number = doc.createElement("number");
        card_number.appendChild(doc.createTextNode(MYVALUE));
        card.appendChild(card_number); 
```

在这段代码中，如果 MYVALUE 等于 NULL，它给出一个

```
javax.xml.transform.TransformerException: java.lang.NullPointerException
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:736)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:340) 
```

我不想进行 if 检查，因为我有很多 Element 属性。我无法对每个 Element 属性进行 if 检查。那么，DocumentBuilder 是否针对空变量设置了这个问题，它只是写了一个空白字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:15:19.637

您可以创建一个实用程序来执行此操作：我会给您签名：

```
void appendTextNodeIfNotNull(Element parent, String text) 
```

# ios - 页面控件和 UIButton

> ID：15974794
> 
> 赞同：0
> 
> 时间：2013-04-12T15:05:01.137
> 
> 标签：ios, uibutton, pagecontrol

我正在尝试构建一个使用页面控件作为主导航的应用程序。我想拥有可以滑动的全屏按钮，当您单击它们时，它会将您带到相应的视图。我知道如何为图像而不是按钮实现页面控制，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:10:48.437

这听起来像一个糟糕的设计，但假设你有一些很好的理由，我只是没有足够的创意来想象，你不需要使用按钮，你可以使用图像，只需向它们添加一个 UITapGestureRecognizer 并触发该事件. 实际上，整个视图（图像）将是一个按钮。

# url - 网站因维护而关闭时的 URL 重定向

> ID：15974796
> 
> 赞同：0
> 
> 时间：2013-04-12T15:05:07.183
> 
> 标签：url, redirect

我有一些网站要重定向到另一个 URL，因为它们正在进行维护。在 IIS 上手动操作很烦人。我想知道是否有特定的命令行或脚本可以用来更快地完成工作。我有 IIS 6 和 windows server 2003。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:09:44.263

如果您有一个 ASP.NET Web 应用程序站点，并且您将一个名为“app_offline.htm”的文本文件放在该站点的根目录中，则对该网站的所有请求都将重定向到该 app_offline.htm 文件。有关详细信息，请参阅[此博客文章](http://weblogs.asp.net/pleloup/archive/2008/09/22/taking-an-asp-net-site-offline-with-a-message.aspx)。

# c# - 如何在退出 MVC 3 项目中添加/集成 SqlMembershipProvider？

> ID：15974797
> 
> 赞同：2
> 
> 时间：2013-04-12T15:05:16.690
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, sqlmembershipprovider

在创建一个新的 MVC 项目时，Visual Studio 会处理`SqlMembershipProvider`它是否是一个非空项目。VisualS Studio 创建一个数据库和所有必要的表。

但是，我有一个现有的 MVC 3 项目，我想添加/集成`SqlMembershipProvider`.

如何`SqlMembershipProvider`在现有数据库中添加和创建所有需要的表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:40:24.013

你需要跑

```
Aspnet_regsql.exe   ( this creates the necessary tables into your existing database) 
```

看看这里： [asp.net mvc 4中的windows和forms身份验证有什么区别？](https://stackoverflow.com/questions/15842274/whats-difference-between-windows-and-forms-authentication-in-asp-net-mvc-4/15845541#15845541)

是的，忽略涉及 windows 和表单身份验证比较的代码部分。但是，它应该作为 SQLMembershipProvider 的有用信息，它使用 Membership 和 MembershipUser 类向 ASP.NET 应用程序提供这些成员资格服务。

Aspnet_regsql.exe

[http://msdn.microsoft.com/en-us/library/system.web.security.sqlmembershipprovider(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.web.security.sqlmembershipprovider(v=vs.90).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:08:12.960

您可以使用[Microsoft ASP.NET Universal Providers](http://nuget.org/packages/Microsoft.AspNet.Providers) nuget 包

> ASP.NET 通用提供程序在 ASP.NET 4 中为所有版本的 SQL Server 2005 及更高版本以及 SQL Azure 添加了提供程序支持。如果您使用这些提供程序来开发您的应用程序，则该应用程序将为 Azure 等云环境做好准备。除了支持额外的存储选项之外，提供程序的工作方式与现有的基于 SQL 的提供程序类似，因此您可以轻松地将应用程序切换为通过 SQL Azure 使用云存储。

对于[这个](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)伟大的汉塞尔曼的帖子

> 这些提供者的配置与现有的 SqlMembershipProvider 类相同，但 type 参数设置为新提供者的类型，如下表所示：
> 
> SQL 提供程序类型 -> 通用提供程序的等效类型 System.Web.Security.SqlMembershipProvider -> System.Web.Providers.DefaultMembershipProvider System.Web.Profile.SqlProfileProvider -> System.Web.Providers.DefaultProfileProvider System.Web.Security.SqlRoleProvider - > System.Web.Providers.DefaultRoleProvider（内置提供程序）System.Web.Providers.DefaultSessionStateProvider

# c# - C#-如何在计算机当前时间而不是数字中获取单词中的天数？

> ID：15974804
> 
> 赞同：0
> 
> 时间：2013-04-12T15:05:53.813
> 
> 标签：c#, mysql, database, datetime, days

我正在用 Windows 窗体 c# 构建一个记录每日报告的程序。我尝试`NOW();`在我的 MySql 数据库中使用，到目前为止它可以工作，但我担心的是我只想得到它的天数，这不是一个数字，例如 3-15-2013（2013 年 4 月 15 日），15 是星期一而不是检索值 15我希望它检索“星期一”这个词。这可能以编程方式吗？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:09:25.423

如果您将日期发送到[DAYNAME](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_dayname)函数，您将获得星期几的名称。

从文档中：

> DAYNAME（日期）
> 
> 返回日期的工作日名称。从 MySQL 5.1.12 开始，用于名称的语言由 lc_time_names 系统变量的值控制（第 10.7 节，“MySQL 服务器区域设置支持”）。
> 
> mysql> SELECT DAYNAME('2007-02-03');
> 
> ```
>  -> 'Saturday' 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:12:43.627

In C# try use:

```
DateTime theDate = DateTime.Now;
theDate.ToString("dddd"); 
```

More on: [http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

# jpa-2.0 - 在关系表中加载数据时出现 JPA StackOverflowError

> ID：15974808
> 
> 赞同：1
> 
> 时间：2013-04-12T15:05:57.303
> 
> 标签：jpa-2.0, entity-relationship, stack-overflow, foreign-key-relationship

我正在尝试在三个表中实现加载（[映射问题的开始](https://stackoverflow.com/questions/15922933/how-to-bind-the-entity-through-the-additional-table-with-a-composite-key)）

`Products`：

```
@Entity
@Table(name = "products")
public class Product implements Serializable {
    @Id
    @Column(name = "id")
    private Integer id;

    @OneToMany(mappedBy = "property", fetch = FetchType.LAZY)
    private Collection<ProductProperty> productPropertyCollection;

    ...
} 
```

`Properties`：

```
@Entity
@Table(name = "properties")
public class Property implements Serializable {
    @Id
    @Column(name = "id")
    private Integer id;

    @OneToMany(mappedBy = "property", fetch = FetchType.LAZY)
    private Collection<ProductProperty> productPropertyCollection;

    ...
} 
```

`Product_Property`

```
@Entity
@Table(name = "product_property")
public class ProductProperty implements Serializable {
    @EmbeddedId
    protected ProductPropertyPK productPropertyPK;

    @MapsId(value = "propertyId")
    @JoinColumn(name = "property_id", referencedColumnName = "id")
    @ManyToOne()    
    private Property property;

    @MapsId(value = "productId")
    @JoinColumn(name = "product_id", referencedColumnName = "id")
    @ManyToOne()
    private Product product;

    ...
}

@Embeddable
public class ProductPropertyPK implements Serializable {
    @Basic(optional = false)
    @NotNull
    @Column(name = "product_id", insertable = false, updatable = false)
    private int productId;
    @Basic(optional = false)
    @NotNull
    @Column(name = "property_id", insertable = false, updatable = false)
    private int propertyId;
    ...
} 
```

它适用于 1、10、100 种产品，但在某处出现错误，因为 1000 种或更多产品会引发错误：

```
Caused by: java.lang.StackOverflowError
    at java.util.HashMap.getEntry(HashMap.java:443)
    at java.util.HashMap.containsKey(HashMap.java:434)
    at java.util.HashSet.contains(HashSet.java:201)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.discoverAndPersistUnregisteredNewObjects(UnitOfWorkImpl.java:4141)
    at org.eclipse.persistence.mappings.ObjectReferenceMapping.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectReferenceMapping.java:938)
    at org.eclipse.persistence.mappings.ObjectReferenceMapping.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectReferenceMapping.java:916)
    at org.eclipse.persistence.internal.descriptors.ObjectBuilder.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectBuilder.java:1964)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.discoverAndPersistUnregisteredNewObjects(UnitOfWorkImpl.java:4178)
    at org.eclipse.persistence.mappings.CollectionMapping.cascadeDiscoverAndPersistUnregisteredNewObjects(CollectionMapping.java:426)
    at org.eclipse.persistence.internal.descriptors.ObjectBuilder.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectBuilder.java:1964)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.discoverAndPersistUnregisteredNewObjects(UnitOfWorkImpl.java:4178)
    at org.eclipse.persistence.mappings.ObjectReferenceMapping.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectReferenceMapping.java:938)
    at org.eclipse.persistence.mappings.ObjectReferenceMapping.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectReferenceMapping.java:916)
    at org.eclipse.persistence.internal.descriptors.ObjectBuilder.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectBuilder.java:1964)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.discoverAndPersistUnregisteredNewObjects(UnitOfWorkImpl.java:4178)
    at org.eclipse.persistence.mappings.CollectionMapping.cascadeDiscoverAndPersistUnregisteredNewObjects(CollectionMapping.java:426)
    at org.eclipse.persistence.internal.descriptors.ObjectBuilder.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectBuilder.java:1964)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.discoverAndPersistUnregisteredNewObjects(UnitOfWorkImpl.java:4178)
    at org.eclipse.persistence.mappings.ObjectReferenceMapping.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectReferenceMapping.java:938)
    at org.eclipse.persistence.mappings.ObjectReferenceMapping.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectReferenceMapping.java:916)
    at org.eclipse.persistence.internal.descriptors.ObjectBuilder.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectBuilder.java:1964)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.discoverAndPersistUnregisteredNewObjects(UnitOfWorkImpl.java:4178)
... 
```

当我创建 ProductProperty 时，我正在设置`product`and `property`in ，并添加到集合以在and`ProductProperty`中进行双向。`Product``Property`

我在哪里会犯错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:16:34.360

看起来您的对象模型复杂性或深度很难在 JVM 的堆栈限制内遍历。事实上，每个实体似乎都可以从每个其他实体到达，这在递归遍历时会导致问题。尝试增加 -Xss 设置。您还可以减少互连性，例如删除 OneToMany 映射之一并直接查询它，而不是将其存储在 Product 或 Property 映射中。您还可以使用 EclipseLink 提交增强，以使用堆栈而不是递归来遍历对象图。

# java - 带有第三方 websocket 插件的 JMETER 2.9 中未捕获的异常 java.lang.ExceptionInInitializerError

> ID：15974811
> 
> 赞同：3
> 
> 时间：2013-04-12T15:06:00.670
> 
> 标签：java, websocket, jmeter, classnotfoundexception, jmeter-plugins

我创建了一个新罐子，即`ApacheJMeter_WebSocket.jar`.

然后我把它放在`/apache-jmeter-2.9/lib/ext/`文件夹里。

当我从 bin 启动 jmeter 时，我观察到此错误并且无法继续进行：

```
Uncaught Exception java.lang.ExceptionInInitializerError. See log file for details.
Uncaught Exception java.lang.NoClassDefFoundError: Could not initialize class   org.apache.jmeter.gui.util.MenuFactory. See log file for details. 
```

我尝试删除 pom.xml 中的重复条目（在此处附加的 jar 中）并使用最新版本更新了所有依赖的 jar。

任何人都可以对此有所了解，这将更加有用。

实际上 ApacheJMeter_WebSocket.jar 直接下载不可用，所以我只是从 git hub 收集了源代码并使用所需的库清除了所有错误。

因此，如果有人可以帮助解决这个问题，那将非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-13T19:06:03.843

有2个选项：

*   您的插件缺少应该放在 lib 文件夹中的依赖项 jar
*   您的插件与您的 JMeter 版本不兼容

无论如何，截至 2018 年 9 月，负载测试 Websocket 的最佳选择是使用 Peter Doornbosh 的这个 3rd 方插件：

*   [https://bitbucket.org/pjtr/jmeter-websocket-samplers](https://bitbucket.org/pjtr/jmeter-websocket-samplers)

您可以使用 JMeter 插件管理器安装此插件：

*   [https://jmeter-plugins.org/install/Install/](https://jmeter-plugins.org/install/Install/)

# c# - 将while循环中的一个tablecell变量传递给另一个类

> ID：15974813
> 
> 赞同：0
> 
> 时间：2013-04-12T15:06:06.430
> 
> 标签：c#, asp.net-mvc, html

目的：想要在另一个类而不是代码隐藏类的 html 网页上显示表格。或者如何调用另一个类而不是代码隐藏类？

表格单元错误，“并非所有代码路径都返回值”。

迷你代码在下面

```
public class SQLscr : Page
{
    protected void creattable(object sender, EventArgs e)
    {           
        Table Table1 = new Table();
        TableRow r = new TableRow();
        TableCell tempc = new TableCell();;
        tempc = CreateaTable.tablecell(tempc);
        r.Cells.Add(tempc);
        Table1.Rows.Add(r);
    } 
```

}

```
public class CreateaTable 
```

{ public static TableCell tablecell(TableCell c) {

```
 SqlDataReader myReader = myCommand.ExecuteReader();
    while (myReader.Read()){
        c.Controls.Add(...);
        return c;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:12:28.373

问题在这里：

```
while (myReader.Read()){
    c.Controls.Add(new LiteralControl(myReader["startbit_1_2_3"].ToString() + "," +
            myReader["stream_index"].ToString() + "," +)));
    return c;
} 
```

我怀疑您是否想返回该循环的第一次迭代。那就是异常所在的地方-您可能永远不会遇到异常，`return c`这就是为什么它给您异常的原因，即并非所有代码路径都返回值。

将其移到 while 循环之外。

```
while (myReader.Read()){
    c.Controls.Add(new LiteralControl(myReader["startbit_1_2_3"].ToString() + "," +
            myReader["stream_index"].ToString() + "," +))); 
}
return c; 
```

# javascript - JavaScript 中的字符串求值函数

> ID：15974816
> 
> 赞同：0
> 
> 时间：2013-04-12T15:06:10.957
> 
> 标签：javascript, python

JavaScript 中是否有任何内置函数，例如`eval`Python 中的内置函数？注意：`eval`函数将方程作为字符串并返回结果。例如假设变量`x` 为 2，则`eval("2x+5")`返回 9。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:08:35.983

是的，`eval`JavaScript 中也有函数。

此外，该语句应该对评估有效，即`eval("2*x+5")`。

您还应该注意，`eval`不建议在 JavaScript 中使用。[**你可以在MDN**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval#Don.27t_use_eval.21)上阅读。

**参考：** [https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:07:53.427

是的，它被称为 eval，很奇怪。

[http://www.w3schools.com/jsref/jsref_eval.asp](http://www.w3schools.com/jsref/jsref_eval.asp)

编辑：来自 VisioN ( [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval) ) 的 mozilla 链接更好，因为它解释了为什么你不应该使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:10:02.610

您可以使用`eval()`，但是您需要将任何“人类”数学运算符转换为 javascript 可以理解的运算符。

```
var sum = "4x5";

eval(sum.replace("x", "*")); 
```

**更新**没有阅读关于 x 是变量的部分！这确实使它稍微复杂一些，具体取决于方程的复杂程度。

# vb.net - 是否可以覆盖 vb.net 资源管理器 GetString 函数？

> ID：15974817
> 
> 赞同：1
> 
> 时间：2013-04-12T15:06:17.640
> 
> 标签：vb.net

在自动生成的资源设计器文件中，每个资源都有属性。该属性调用“GetString”，它返回字符串值。我想覆盖这个 getstring 函数，这样我就可以做逻辑来看看我是否需要检索这个值或不同的值。我无法弄清楚如何做到这一点，因为设计器文件是自动生成的。

```
Public ReadOnly Property General() As String
   Get
   Return ResourceManager.GetString("General", resourceCulture)
  End Get
End Property 
```

例如，在我的 GetString 函数版本中，我会检查传入的键（“General”）并查看数据库中是否有该键的自定义值。如果自定义值存在，我会使用该值。如果自定义值不存在，我将调用基本 GetString 函数来获取 Resource 值。我想为此使用内置的 Resource 类，因为在我的代码中我可以只使用“@Resources.General”并利用已经存在的自动完成功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:27:26.150

请参阅[ASP.NET Resourcemanager 以读取本地 .resx](https://stackoverflow.com/questions/3405877/asp-net-resourcemanager-to-read-local-resx)。它在 C# 中，但您可以将其转换过来。它不是您正在寻找的 100%，但显示了一种覆盖方式，您可以根据需要进行调整。

# css - SUSY如何保持行分开

> ID：15974822
> 
> 赞同：2
> 
> 时间：2013-04-12T15:06:36.550
> 
> 标签：css, sass, susy-compass

如果我想要一个 SUSY 网格

```
[column1 of copy] [column2 of copy]
[column3 of copy now on a new row] [column4 of copy] 
```

...也就是说，无论列有多高，我都想为我的 column3 和 column4 文本添加一个新行，是否有一种纯粹的 SUSY 方式来实现这一点？

我发现如果 column2 的内容很高（很多文本），那么 column3 会“弹出”到 column1 的正下方，所以我假设没有应用 clear — 我正在使用`omega`每个中最后一项的指令行并且天真地假设这是一个可以确保行清除的灵丹妙药。

我现在正在解决这个问题

```
<div class="clearfix"></div> 
```

在每一行之间，但我想知道我是否不了解 SUSY 的一部分，也许我可以用纯 SUSY 语句来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:17:18.153

你不需要任何额外的标记，也不需要 Susy 的帮助，有一种超级简单的 css 方法来处理这个问题。这正是该`clear`物业的用途。你只需要这样：

```
.column-three { clear: both; } 
```

您可以清除`left`、`right`或`both`将项目放在浮动下方的任一侧或两侧。Susy 没有任何功能，因为我找不到任何方法让它比现在更简单或更有意义。

# jsf - 元素之间的 JSF PanelGrid 空间

> ID：15974833
> 
> 赞同：0
> 
> 时间：2013-04-12T15:07:05.303
> 
> 标签：jsf, primefaces, panel

我对 h:panelGrid 控件有疑问。我尝试在其中放置一些元素并在以下内容之间留出空间：

```
<h:panelGrid columns="2">
    <h:outputLabel value="Output1 is: "/>
    <h:inputText/>

    <h:outputLabel value="Output2 is: "/>
    <h:inputText/>

    <h:outputLabel value="Output3 is: "/>
    <h:inputText/>
</h:panelGrid> 
```

当我使用`"columns=2"`参数时，它会正确显示。但我试图只在第一和第二之间腾出空间。不是所有的组件。

我尝试使用`<br/>`，但它不起作用。

我正在使用 PrimeFaces 3.5 版本。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-12T15:19:58.860

只需要放

`<h:outputText value="&#160;" />`

在某些项目之后两次以腾出空间（在这种情况下）。

感谢@RongNK

# optimization - 递归到迭代转换

> ID：15974837
> 
> 赞同：0
> 
> 时间：2013-04-12T15:07:16.397
> 
> 标签：optimization, recursion, iteration, pseudocode

知道每个递归函数都可以转换为迭代版本。有人可以帮我找到这个伪代码的迭代版本吗？我正在尝试优化代码，递归显然不是要走的路

```
sub calc (a, b )
{
    total = 0;
    if(b <= 1) 
        return 1
    if( 2*a > CONST)
        for i IN (1..CONST)
            total += calc(i, b-1) ;
    else
        for j IN (2*a..CONST)
            total += calc(j, b-1) ;
    return total;
}
CONST = 100;
print calc (CONST,2000); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:48:08.223

从递归到迭代的重构并不是解决您的性能问题的答案。**该算法从缓存**中获益最多，与斐波那契数列的方式大致相同。

在 F# 中编写了一个简短的测试程序后，带有一些示例数据（`CONST = 5`, `a = 0..10`, `b = 2..10`）：

*   原程序耗时 6.931 秒
*   缓存版本耗时 0.049 秒

解决方案是保留一个带有键的字典`tuple(a,b)`并在计算之前查找值。这是带有缓存的算法：

```
dictionary = new Dictionary<tuple(int, int), int>();

sub calc (a, b )
{
    if (dictionary.Contains(tuple(a,b)))
        return dictionary[tuple(a,b)];
    else
    {
        total = 0;
        if(b <= 1) 
            return 1
        if( 2*a > CONST)
            for i IN (1..CONST)
                total += calc(i, b-1);
        else
            for j IN (2*a..CONST)
                total += calc(j, b-1);

        dictionary[tuple(a,b)] = total;
        return total;
    }
} 
```

编辑：只是为了确认不是我的测试的迭代性质导致了性能提升，我用一组参数（`CONST = 5`, `a = 6`, `b = 20`）再次尝试了它们。

*   缓存版本耗时 0.034 秒
*   原始版本仍在运行...（2 分钟以上）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T01:16:00.197

只有**尾递归**算法可以转换为迭代算法。您提供的代码绝对不是尾递归的，因此它不能轻易转换为迭代形式。

性能问题的解决方案是[记忆化](http://en.wikipedia.org/wiki/Memoization)

# azure - 在 Azure 上安装小型 Windows Server 2008

> ID：15974842
> 
> 赞同：3
> 
> 时间：2013-04-12T15:07:20.067
> 
> 标签：azure, licensing, windows-server-2008

我想在 25Gb**磁盘上的 windows azure 上安装 w2k8**。
如果我从 VM 库中选择一个映像，它将安装在 127Gb 的磁盘上（我需要的五倍）。

所以我想我必须安装本地化，运行 sysprep 并将其上传到 azure（我有关于如何从我的 google 执行此操作的详细信息）。但**我不拥有 w2k8**。我的问题是：

我可以使用 w2k8 的 180 天试用期在 25Gb VHD 上进行设置吗？
180天后还能用吗？//因为它在 Azure 上？？？
这个过程是否“符合许可”？
还有其他方法可以获得我想要的相同吗？

（编辑）我提供赏金，因为我对我的四个问题有部分答案。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:49:02.633

Maarten Balliauw 写了一篇关于如何在 Windows Azure 上调整 VHD 大小的精彩博客文章。它专注于扩展虚拟磁盘，而不是缩小虚拟磁盘，但它也可能有效（我只测试了扩展，而不是缩小）。这种工作方式至少可以为您节省数小时的上传和系统准备，所以我认为值得一试，从库中创建一个新的虚拟机，关闭机器，删除它和磁盘（不是 VHD），然后应用调整大小。

博客文章在这里：[http://blog.maartenballiauw.be/post/2013/01/07/Tales-from-the-trenches-resizing-a-Windows-Azure-virtual-disk-the-smooth-way。 aspx](http://blog.maartenballiauw.be/post/2013/01/07/Tales-from-the-trenches-resizing-a-Windows-Azure-virtual-disk-the-smooth-way.aspx)

希望它有效

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T16:01:57.717

为什么要更小的磁盘？您只需为实际使用的存储量付费，因此对于 127 GB 的图片库，您只需为写入磁盘的数据量支付存储成本。

# php - 无法将 FormData 发送到 PHP

> ID：15974847
> 
> 赞同：0
> 
> 时间：2013-04-12T15:07:34.740
> 
> 标签：php, javascript, file-upload, xmlhttprequest

再会，

我正在尝试构建基本的文件加载站点，但我无法让它工作。

没有错误消息，它只是不会这样做。

这是我的 JS

```
var attachments = document.getElementById('files'); 
var file = new FormData();

for (i=0; i< attachments.files.length; i++){
    file.append('file[]', attachments.files[i]);
    console.log(attachments.files[i]);

}
console.log(file);
var request = new XMLHttpRequest();
request.open('POST','php/upload.php', true);
request.setRequestHeader('cache-control', 'no-cache');
request.send(file); 
```

HTML是这样的：

```
<form action="" method="post" enctype="multipart/form-data">
<input type="file" id="files" name="file[]" multiple="multiple"><br>
</form> 
```

并且 PHP 非常简单——**虽然**我从来没有收到回显消息，

```
if (isset($_FILES['file'])&&!empty($_FILES['file'])){
echo 'got to through the if';
} 
```

关于可能出了什么问题的任何想法？

# android - 安卓模拟器问题

> ID：15974851
> 
> 赞同：0
> 
> 时间：2013-04-12T15:07:40.583
> 
> 标签：android, android-emulator, avd

我的 Android 模拟器太慢了，它实际上并没有显示我的任何 Android 工作！我已经离开了一个小时，然后回来什么也没找到。我真的很感激任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T03:54:50.703

可能您的计算机的设置有点慢。

我注意到高分辨率模拟器会消耗大量资源。所以基本上以 340-400 分辨率运行它，运行速度要快得多。希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:02:22.370

您的内存可能有问题...尝试编辑 AVD 只是增加或减少 RAM 大小..尝试参考此链接...[这里](http://developer.android.com/tools/devices/managing-avds.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T13:33:49.970

尝试增加内存。我还建议使用“通用”AVD。类似于这里：

[http://mobile.tutsplus.com/tutorials/android/common-android-virtual-device-configurations/](http://mobile.tutsplus.com/tutorials/android/common-android-virtual-device-configurations/)

如果这不起作用，我强烈建议您购买 android 设备。有很多便宜的（尤其是来自中国的）。

但这也是一个重复的问题，请参见此处：

[有什么办法可以减少android SDK提供的Android Emulator的启动时间](https://stackoverflow.com/questions/2384706/is-there-any-way-to-reduce-the-boot-up-time-of-android-emulator-provided-with-an)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-24T13:08:07.097

尝试使用 Genymotion。您可以在注册后下载适用于 Windows/Mac OS X/Linux 的版本。Eclipse 的插件也是可用的。

我给你链接[Genymotion Emulator](http://www.genymotion.com/)请下载和设置。

根据我的经验，Genymotion Vertual 设备比 android 模拟器更快。

# jquery - 从jquery数组返回值

> ID：15974853
> 
> 赞同：0
> 
> 时间：2013-04-12T15:07:41.990
> 
> 标签：jquery, arrays

我创建了一个简单的 html 来枚举名称，上面的人名作为类。然后我得到类名并对照数组检查它。结果未定义。这是我的代码：

```
var prof_name = $(this).attr('class');
var n = prof_name.split(' ');
var name_out = n[0];

var nameList = {'rom':'Rommel Santiago','holy':'Holiander Fields'};
var nameValue = nameList.nameout;

alert(nameValue); //this pops up as undefined

alert(nameList.rom) // this pops up as 'Rommel Santiago' 
```

我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:09:21.530

问题是您错误地引用了您的数组。我假设你的班级名称`$(this)`是`rom holy`

你正在检索`rom`这样的：`var name_out = n[0];`

并且您想引用 中的`rom`密钥`nameList`，您可以这样：

```
var nameValue = nameList[name_out]; 
```

完成此操作后，您的更新代码将如下所示：

```
var prof_name = $(this).attr('class');
var n = prof_name.split(' ');
var name_out = n[0];

var nameList = {'rom':'Rommel Santiago','holy':'Holiander Fields'};
var nameValue = nameList[name_out];

alert(nameValue); //this pops up as Rommel Santiago 
```

工作示例：http: [//jsfiddle.net/6GM7T/2/](http://jsfiddle.net/6GM7T/2/)

* * *

**此外**

我建议您不要使用类来存储数据。

您可以改用`data`属性标签，如下所示：

```
<div id="myDiv" data-name="Rommel Santiago"></div> 
```

您可以使用 jQuery 轻松检索该数据：

```
$('#myDiv').data('name'); //returns Rommel Santiago 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:21:38.337

我相信 OP 希望使用 的值`name_out`作为 的索引`nameList`，在这种情况下：

```
var nameValue = nameList.nameout; 
```

应该：

```
var nameValue = nameList[name_out]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T16:02:09.230

正如他们所说

它适用于这个

```
var prof_name = "rom holy";
var n = prof_name.split(' ');
var name_out = n[0];
alert("Parameter Selected = "+name_out);
var nameList = {'rom':'Rommel Santiago','holy':'Holiander Fields'};
var nameValue = nameList[name_out];

alert("From Object : "+nameValue); //this pops up as undefined

alert("Actual Value = "+nameList.rom) // this pops up as 'Rommel Santiago' 
```

[http://jsfiddle.net/Kartheek/nx3WQ/1/](http://jsfiddle.net/Kartheek/nx3WQ/1/)

如果你像 nameList.nameout 这样调用它实际上会在 namelist 中搜索 nameout 作为参数

如果您使用 nameList[nameout] 它会搜索索引 nameout 值。

# sql - 在 sql 中计算 HH:MM:SS 中的日期时间总和

> ID：15974856
> 
> 赞同：0
> 
> 时间：2013-04-12T15:07:47.590
> 
> 标签：sql, sql-server-2008, tsql

我想在 HH:MM:SS 中计算 Sum

首先，我正在计算 HH:MM:SS 中的日期时间差异（效果很好）

```
Select  * 
Into    #_TicketType 
From    (    
        Select  *,
                convert(varchar(5), DateDiff(s, [Start Date] , [End Date] )/3600)
              + ':'
              + convert(varchar(5),DateDiff(s, [Start Date] , [End Date])%3600/60)
              + ':'
              + convert(varchar(5),(DateDiff(s,[Start Date] , [End Date])%60)) as [Ticket Type Time]
            ,
                convert(varchar(5),DateDiff(s, [Ticket Open Time]  , [Ticket Closed Time] )/3600)
              + ':'
              + convert(varchar(5),DateDiff(s,[Ticket Open Time]  , [Ticket Closed Time])%3600/60)
              + ':'
              + convert(varchar(5),(DateDiff(s,[Ticket Open Time]  , [Ticket Closed Time])%60))[Total Call Time]
        FROM CTE
        )_A 
```

`[Start Date] , [End Date],[Ticket Open Time] , [Ticket Closed Time]`类型的列`DateTime`

此外，我想在 HH:MM:ss 中计算它的总和

我的查询：-

```
Select Distinct ATM,
    CAST (
          (SUM (datepart(hh, convert (varchar, [Ticket Type Time], 108)))
        + (sum (datepart(mi, convert (varchar, [Ticket Type Time], 108)))/60) ) 
    AS VARCHAR(2))
    + ':'
    + CAST (
          sum( datepart(mi, convert (varchar, [Ticket Type Time], 108))) 
        - 60 
        * (sum(datepart(mi, convert (varchar, [Ticket Type Time], 108)))/60)
    as VARCHAR(2))
    + ':' 
    + CAST (
          sum( datepart(ss, convert (varchar, [Ticket Type Time], 108))) 
        - 60 
        * (sum( datepart(SS, convert (varchar, [Ticket Type Time], 108)))/60)
    as VARCHAR(2))
From #_TicketType Group By ATM 
```

它给了我错误

```
**Msg 241, Level 16, State 1, Line 67
Conversion failed when converting date and/or time from character string.** 
```

**数据库 SQL 服务器 2008**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:22:43.620

这里有两个相关的问题。

1.  SQL Server 不支持间隔数据类型。
2.  “8 点”和“8 小时”通常写成完全相同——“8:00:00”——但它们的意思完全不同。

* * *

您不能添加“日期时间”类型的值。“8点加3点”有意义吗？没有。

现在，“8 小时加 3 小时”是有道理的，但*小时*不是 DateTime 类型。在标准 SQL 中，它们属于 Interval 类型。在不支持 Interval 数据类型的系统中（SQL Server 就是其中之一），您必须以已知单位（如小时、分钟或秒）计算差异。您可以*轻松地*总结这些类型的值。

*   以秒或分钟为单位计算差异。
*   将这些值保留在您的查询中。
*   对秒或分钟求和。
*   将转换为漂亮、友好的显示格式 (HH:MM:SS) 视为一个单独的步骤，或者让前端应用程序代码来完成。

这应该消除对 convert() 的部分或全部调用，甚至可能运行得更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T16:28:54.823

我认为您的意思是转换为时间（如果您的 SQL Server 版本不支持，则转换为日期时间），而不是 varchar。

但是，这是一种非常糟糕的方法。25:01:01 将不是有效的日期时间。您应该总结秒数（如另一个答案中所建议的那样），然后在最后按您喜欢的方式格式化结果。

因此，在您的第一个查询中，包括以秒为单位的持续时间的另一列：

```
, DateDiff(s,[Start Date] , [End Date]) as [Ticket Type Seconds] 
```

然后在第二个查询中，只需格式化 SUM([Ticket Type Seconds])，可能像这样：

```
STR(SUM([Ticket Type Seconds])/3600) 
+ RIGHT(CONVERT(char(8),DATEADD(s,SUM([Ticket Type Seconds]),0),108),6) 
```

这为您提供了小时数（可能超过 24），与您在将秒数转换为约会时间。

# jquery - 在微调器中添加加号（Jquery）

> ID：15974858
> 
> 赞同：-1
> 
> 时间：2013-04-12T15:07:49.883
> 
> 标签：jquery, jquery-ui, jquery-plugins, spinner

我正在尝试使用微调器在我的字段中添加一个符号（+），但它每次返回没有符号的数字，我能以某种方式解决这个问题吗？

```
var spinner = $( "#spinner" ).spinner({
    step: 0.25,
    min:-12, 
    max:8, 
    change: function( event, ui ) {
        var ph = $('#spinner').val();
        if(ph.indexOf('+') == 0) {
          alert($('#spinner').val());
          $('#spinner').val('+'+$('#spinner').val());
       } else {

       }
    },
    spin: function( event, ui ) {

    }

}); 
```

或者你可以在这里查看：http: [//jsfiddle.net/XseWc/220/](http://jsfiddle.net/XseWc/220/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:20:08.283

这也是为了旋转： [JSFIDDLE](http://jsfiddle.net/XseWc/241/)

```
var spinner = $("#spinner").spinner({
    step: 0.25,
    min: -12,
    max: 8,
    change: function (event, ui) {        
    },
    spin: function (event, ui) {
        var keepPlus =  spinner.val().indexOf('+') === 0?true:false;
        setTimeout(function () {
            var ph = spinner.val(); 
            if (ph > 0 && keepPlus)spinner.val('+' + spinner.val());
        }, 0);
    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:12:15.650

indexOf 返回一个索引，或 -1 表示未找到。您需要与 -1 而不是 0 进行比较

```
if(ph.indexOf('+') == -1) 
```

`[jsFiddle Demo](http://jsfiddle.net/XseWc/223/)`

但是，我建议以完全不同的方式解决这个问题。相反，重写 _format 方法。

```
$.ui.spinner.prototype._format = function(value){
    if (value > 0) {
        return "+" + value;
    } else {
        return value;
    }
}

var spinner = $( "#spinner" ).spinner({
    step: 0.25,
    min:-12, 
    max:8
}); 
```

`[jsFiddle Demo](http://jsfiddle.net/XseWc/240/)`

现在它在变化和旋转上都得到了更新，没有丑陋的跳跃，它也适用于负数。这样做当然意味着您不能使用全球化数字格式。

# c# - 如何在多行文本框中逐行显示数据库中的数据？

> ID：15974860
> 
> 赞同：-1
> 
> 时间：2013-04-12T15:07:51.217
> 
> 标签：c#, .net, textbox

我试过下面的代码。它运行成功，但在 txtQueue（文本框）中显示结果为“System.Data.DataView”，而不是数据。

```
 try
 {
    AddURL objAddurls = new AddURL();
    objAddurls.ExecuteSql("select sURL from addurl where iStatus=1 AND iLicenseID='" + CommonMethods.iLicenseID + "'");
    txtQueueURLs.Text = objAddurls.DefaultView.ToString();
 }

 catch (Exception ee)
 {

 } 
```

任何人都可以告诉我这段代码有什么问题或建议我新代码吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:34:14.517

> 如何在多行文本框中逐行显示数据库中的数据？

检索数据表单数据库的方法很少，这只是其中之一，您将选择哪种方法并不重要。

将数据逐行写入文本框可以通过将*textBox.Multiline*属性设置为 true 并在每次需要换行时将*Environment.NewLine*添加到*textBox.Text来实现。*

以下是可能对您有所帮助的示例代码：

```
using System.Data.SqlClient;

namespace StackTest
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            string connectionString = @"Data Source=(localdb)\Projects;Initial Catalog=DbTest;Integrated Security=True;Connect Timeout=30;Encrypt=False;TrustServerCertificate=False";
            string selectString = "select * from TblTest";
            textBox1.Multiline = true;

            SqlConnection conn = new SqlConnection(connectionString);
            SqlCommand cmd = new SqlCommand(selectString,conn);

            conn.Open();
            SqlDataReader rdr = cmd.ExecuteReader();

            while (rdr.Read())
            {
                textBox1.Text += rdr[0];
                textBox1.Text += rdr[1];
                //...
                textBox1.Text += Environment.NewLine;
            }

            conn.Close();                 
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:25:11.900

您正在调用[DataView.ToString()](http://msdn.microsoft.com/en-us/library/t7k4xfbd.aspx)上的 ToString 方法，该方法返回组件的名称。我认为您想遍历 DefaultView 中的行并将 TextBox 值分配给它。

```
 StringBuilder sb  = new StringBuilder();
 foreach (DataRowView rowView in objAddurls.DefaultView)
  {
   DataRow row = rowView.Row;
   // build a string from your row //
  }

txtQueueURLs.Text = sb.ToString() 
```

# xml - 选择无效字符的 Oracle SQL 问题

> ID：15974864
> 
> 赞同：0
> 
> 时间：2013-04-12T15:07:55.117
> 
> 标签：xml, oracle, plsql, oracle10g, invalid-characters

在 Oracle 10g 中将两个单元格合并为一个时创建的无效字符有问题。

然后将该字符串插入到 xml 文件中，如果插入了无效字符，则会破坏 xml 文件。（XML 可以高达 8gb，而且很难修复，所以我需要在每天创建 xml 之前自动运行它。

我一直在做的是找到一个版本，如下所示。

```
select * from (select ar_journal.jnlinpnum,debtor_ref,dump(narration) as dn,narration from ENERGYDB.ar_journal) where dn like '%31%' and dn not like '%=31:%'; 
```

但是，这只会带回一个字符，并且会出现很多字符，需要删除字符 0 - 31 和 226 - 256。

所以我尝试了这个，

```
create table tmp_charprefix(
charf1 Varchar2 (10), charf2 varchar2 (10)) ;

INSERT INTO tmp_charprefix (charf1, charf2) VALUES ('%27%', '%=27%');
INSERT INTO tmp_charprefix (charf1, charf2) VALUES ('%28%', '%=28%');
INSERT INTO tmp_charprefix (charf1, charf2) VALUES ('%29%', '%=29%');
INSERT INTO tmp_charprefix (charf1, charf2) VALUES ('%30%', '%=30%');
INSERT INTO tmp_charprefix (charf1, charf2) VALUES ('%31%', '%=31%');
INSERT INTO tmp_charprefix (charf1, charf2) VALUES ('%60%', '%=60%');
INSERT INTO tmp_charprefix (charf1, charf2) VALUES ('%62%', '%=62%'); 
```

以上是我要寻找的价值观。

```
create table tmp_charfix as
select aj.jnlinpnum, aj.type_jnl, ajt.jnl_descr, ajei.reason_no, ar.reason_descr, aj.narration
from ar_journal aj, ar_jnl_type ajt, ar_jnl_extra_info ajei, ar_reason ar
where ajt.type_jnl = aj.type_jnl
and ajei.jnlinpnum = aj.jnlinpnum
and ajei.reason_no = ar.reason_no
and aj.jnlinpnum in ( select jnlinpnum from (
select ar_journal.jnlinpnum, debtor_ref, dump(narration) as dn, narration from energydb.ar_journal)
where dn like (select charf1 from tmp_charprefix tmo)
and dn not like (select charf2 from tmp_charprefix tmt)
and substr(tmo.charf1,2,8) = substr(tmt.charf2,3,8) ; 
```

-- 试图调用 charf1 的子串并将其与 charf2 的子串匹配

我收到以下错误，但我不确定我是否在最后一行做一些可能的事情

```
SQL Error: ORA-00907: missing right parenthesis
00907\. 00000 -  "missing right parenthesis"
*Cause:    
*Action: 
```

任何帮助将不胜感激，在过去的几个小时里，我一直坚持这一点。

谢谢，

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:24:09.830

选择相关记录使用

```
 select jnlinpnum
         , debtor_ref
         , dn
         , narration
      from (
                select ar_journal.jnlinpnum
                     , debtor_ref
                     , dump(narration) as dn
                     , narration
                     , regexp_instr ( dn, '([^[:digit:]=]|^)(27|28|29|30|31|60|62)([^:[:digit:]]|$)' ) as dn_occurrence
                  from ENERGYDB.ar_journal
           )
     where dn_occurrence > 0
         ; 
```

可以使用该`regexp_replace`功能执行实际替换。`regexp_`检查性能，但是，8gb 输出对于使用类函数可能是禁止的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:19:32.043

这是一个建议而不是答案，但它太长了，无法放入评论中，所以我必须将其作为答案呈现。

建议：**缩进你的代码**。这将使发现问题变得容易得多。

```
create table tmp_charfix as
  select
    aj.jnlinpnum,
    aj.type_jnl,
    ajt.jnl_descr,
    ajei.reason_no,
    ar.reason_descr,
    aj.narration
  from
    ar_journal aj,
    ar_jnl_type ajt,
    ar_jnl_extra_info ajei,
    ar_reason ar
  where ajt.type_jnl = aj.type_jnl
    and ajei.jnlinpnum = aj.jnlinpnum
    and ajei.reason_no = ar.reason_no
    and aj.jnlinpnum in ( -- OPEN PAREN HERE WITH NO CLOSING PAREN
      select jnlinpnum from (
        select ar_journal.jnlinpnum, debtor_ref, dump(narration) as dn, narration
        from energydb.ar_journal
      ) -- this parenthesis is also trouble, coming between FROM and WHERE
      where dn like (select charf1 from tmp_charprefix tmo)
        and dn not like (select charf2 from tmp_charprefix tmt)
        and substr(tmo.charf1,2,8) = substr(tmt.charf2,3,8)
    -- Oracle is still waiting for a closing parenthesis here... 
```

# html - 带有图像的 iPhone 功能，单击缩略图并显示大图像

> ID：15974865
> 
> 赞同：0
> 
> 时间：2013-04-12T15:07:59.477
> 
> 标签：html, image, jquery-mobile

您好，我正在为 iPhone 开发一个移动网站（不是应用程序）。

这是一个非常菜鸟的问题，尽管我已经搜索并没有真正找到我正在寻找的内容，因为我不确定要使用哪些确切的搜索词。

在 iPhone 上，当您单击图像时，它会在屏幕上显示更大的图像，以便您可以放大/缩小。

我正在使用比原始图像小很多的生成的缩略图，单击缩略图时如何加载完整的分辨率图像？

再次抱歉这个菜鸟问题，如果有人能指出我正确的方向，部分问题是我没有移动网站或 iphone 功能的经验，我会继续玩 jquery mobile，看看我能从哪里得到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:18:33.387

当您单击缩略图时，您可以将用户重定向到另一个 HTML 页面，其中包含最大宽度和最大高度（以 % 为单位）的图像。

在移动设备中，最好有一个以 % 为单位的设计，以适应所有移动设备屏幕上的设计。

```
<img src="myImage.jpg" alt="myImage" id="myImg" /> 
```

在 CSS 中

```
#myImg{
max-height:100%;
max-width: 100%;
} 
```

您还有其他解决方案，也可以使用 jQuery 插件：http: [//fancybox.net/](http://fancybox.net/)

# bash - BASH 很慢吗？

> ID：15974873
> 
> 赞同：8
> 
> 时间：2013-04-12T15:08:30.607
> 
> 标签：bash

我在 SPOJ 上解决了这个问题 - [http://www.spoj.com/problems/ALICESIE/](http://www.spoj.com/problems/ALICESIE/)

问题归结为打印 (n+1)/2

这是我的 C 代码，在 0.03 秒内通过

```
 #include <stdio.h>
    int main() {
        int test, n;
        scanf("%d", &test);
        while(test--) {
            scanf("%d", &n);
            printf("%d\n", (n + 1) >> 1);
        }
        return 0;
    } 
```

虽然这是我的 BASH 代码，它给出了 Time Limit Exceeded（即 > 1s）

```
read test
while (( test-- ))
do
    read n
    echo "$(((n+1)/2))"
done 
```

谁能让我知道为什么会这样？BASH 很慢吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T15:20:51.160

Bash 在执行数字运算方面很慢。但这不是 Bash 的设计目的。

Bash 在编写脚本以自动执行某些重复操作方面*非常*快。修改错误的 Bash 脚本并再次运行它很快。可以快速找出 Bash 脚本到底在做什么（而不必寻找您正在查看的 C 可执行文件的源代码）。

而这样的例子不胜枚举。

C 和 Bash 是两种截然不同的语言和环境。如果你抱怨 Bash 很慢，那么你是在用它来解决错误的问题。

*“不要抱怨螺丝刀很难把钉子钉在墙上。”*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T15:12:18.420

您正在将编译后的代码与脚本语言 (Bash) 进行比较。

Bash 脚本总是比编译后的代码慢，因为它们需要被解释。

您可能知道，为了运行用 C 编写的代码，您首先需要编译它。对于 Bash 脚本，您不必阅读它，代码只是“即时阅读”。所以 Bash 比 C 慢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T15:25:57.443

当然，由于其他答案中给出的原因，Bash 比 C 慢，但这并不能解释这里发生了什么。我怀疑你让你`read`的一个永远挂起，直到超时。当我实现这个时：

```
#!/bin/bash

main() {
    local test
    local i
    local n
    read test
    for (( i=$test; i>0; i--)); do
        read n
        echo "$(((n+1)/2))"
    done
}

time {
    echo 1000
    printf '%d\n' {1002..2}
} | main 
```

不需要太多时间：

```
real    0m0.033s
user    0m0.029s
sys 0m0.013s 
```

您可以使用 to标志强制`read`语句自行超时，如下所示：`-t``read`

```
main() {
    local test
    local i
    local n
    read -t.3 test
    if [[ -z $test ]]; then
        echo "Failed to read a test value within 300ms."
        return 1
    }
    for (( i=$test; i>0; i--)); do
        read -t.3 n
        if [[ -z $n ]]; then
            echo "Failed to read a value for n within 300ms."
            return 1
        }
        echo "$(((n+1)/2))"
    done
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-30T23:48:18.770

没有添加shebang。

```
#!/bin/bash

read test
while (( test-- ))
do
    read n
    echo "$(((n+1)/2))"
done 
```

我提交的这段代码在 SPOJ 中运行了 0.14 次并被接受。除了shebang之外，我看不到问题代码有任何区别！
（给读者）

# scala - 在scala中动态创建案例类的新实例

> ID：15974876
> 
> 赞同：7
> 
> 时间：2013-04-12T15:08:41.087
> 
> 标签：scala, reflection

给定对案例类伴随对象的引用`t`和一系列参数`seq`，我如何调用案例类的新实例？

当我自己键入参数的编号时，我可以创建一个类。

```
scala> case class B(n:String,a:Int,b:Int)
defined class B

scala> val t:AnyRef = B
t: AnyRef = B

scala> val m = t.getClass.getMethods.filter{m => m.getName == "apply"}.
    filterNot {_.getReturnType.getName == "java.lang.Object"}(0)
m: java.lang.reflect.Method = public B B$.apply(java.lang.String,int,int)

scala> m.invoke(t,"name",1:java.lang.Integer,2:java.lang.Integer)
res99: Object = B(name,1,2) 
```

我无法解决的问题是使用一系列参数调用调用，例如`Seq("name",1:java.lang.Integer,2:java.lang.Integer)`. 非常感谢任何帮助如何做到这一点。

我使用 scala 2.10.0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T15:15:15.393

只是我自己发现的（分别在这里看到过[https://stackoverflow.com/a/2060503/55070](https://stackoverflow.com/a/2060503/55070)）。它是

```
method.invoke(t,seq: _*) 
```

有时把它写下来真的很有帮助;-)

# javascript - 用 Javascript 编写扩展方法

> ID：15974881
> 
> 赞同：0
> 
> 时间：2013-04-12T15:08:57.840
> 
> 标签：javascript

我想知道是否有人可以帮助我理解***为什么***有必要添加以下行...

```
if (!obj.hasOwnProperty(key)) continue; 
```

...在以下方法中：

```
extend: function(obj) {
  // shallow copy
  for (var key in obj) {
    if (!obj.hasOwnProperty(key)) continue;
      this[key] = obj[key];
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:18:16.570

当您使用`for-in`循环遍历对象的属性名称时，您会看到**所有**可枚举的属性，包括对象从其原型继承的那些属性。似乎实现该方法的人不想复制从原型继承的属性，因此只包含对象本身直接拥有的属性。

这是一个例子：

```
function Thing(name) {
    this.name = name;
}
Thing.prototype.speak = function() {
    console.log("I'm " + this.name);
};
Thing.prototype.infoForAllThings = 42;
var t1 = new Thing("Fred");
console.log(t1.name);             // "Fred"
console.log(t1.infoForAllThings); // "42"
t1.speak();                       // "I'm Fred"
var t2 = extend(t1);              // (Where `extend` is like your function,
                                  // but returns the object rather than using `this`
console.log(t2.name);             // "Fred"
console.log(t2.infoForAllThings); // "undefined"
t2.speak();                       // Error 
```

在上面，从它的原型`t1`继承`infoForAllThings`和`speak`属性，它被设置为`Thing.prototype`创建时间`t1`。但是该`extend`函数用于`hasOwnProperty`将它们过滤掉，因此不会将它们复制到它创建的副本中，因此它们不存在于`t2`. 因为那是直接分配`t2`给*对象*的，它不是来自原型，但其他来自原型，所以不会被复制。`name`

# arrays - 用char数组填充二维数组java

> ID：15974886
> 
> 赞同：1
> 
> 时间：2013-04-12T15:09:17.670
> 
> 标签：arrays, for-loop, multidimensional-array, char

如何将 char 1d 数组转换为 2d 数组，然后通过一次读取每一列来打印 2d 数组。即使用参数“-encrypt abcd”

```
public class CHARSTRING {

public static void main(String[] args) {

    String encrypt = args[0];
    String letters = args[1];
     //length of letters to be encrypted
    int n = letters.length();
    char Rows [] = letters.toCharArray();       

    if (encrypt.equals("-encrypt")) {

        if ( (n*n)/n == n) {

            int RootN = (int) Math.sqrt(n); //find depth and width of 2d array
            char [][] box = new char [RootN][RootN]; //declare 2d array

        for (int i=0; i<RootN; i++) {
            for (int j=0; j<RootN; j++) {
                box[i] = Rows;
                System.out.println(Rows); 
```

//输出4行：abcd

但我试图让输出为“acbd”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-07T17:05:17.243

在最后的双循环中，一个循环用于行，一个循环用于列。不要使用：

```
 for (int i=0; i<RootN; i++) {
        for (int j=0; j<RootN; j++) {
            box[i] = Rows;
            System.out.println(Rows);
        }
    } 
```

它使用 println 打印行的每个值，因此它在每行之后添加一个“\n”。相反，请尝试使用：

```
 for (int i=0; i<RootN; i++) {
        for (int j=0; j<RootN; j++) {
            box[i] = Rows;
            System.out.print(Rows);
        }
        System.out.println();
    } 
```

这样，所有值都应该打印在同一行，然后更改为新行。

# javascript - 沿固定角度“直接”移动矢量

> ID：15974890
> 
> 赞同：4
> 
> 时间：2013-04-12T15:09:24.590
> 
> 标签：javascript, vector, html5-canvas, kineticjs, trigonometry

我已经搜索了这个问题的答案并尝试了许多建议的解决方案，但似乎都没有奏效。我一直在为此苦苦挣扎，因此非常感谢任何见解。

我在 JS 画布上有 3 个形状（我想是矢量），每个形状的方向表示为偏离 0 的度数和宽度。我需要从它的方向“直接”拖动这些形状之一。这很难用语言解释，所以请查看我创建的图形：

![将中间的形状直接拖出](https://i.stack.imgur.com/OxKXX.gif)

中间（对角线）形状为 45 度。它的原点是红点，(x1,y1)。用户拖动形状，他们的鼠标位于绿点 (x2,y2)。由于形状的原点在左下角，我需要将形状定位在浅蓝色形状的位置，就好像用户从形状的原点直接向外拖动一样。

我认为这并不重要，但我用来执行此操作的库是 KineticJS。这是我可用的代码和一些信息，它们可能有助于解决问题。此代码将形状定位在鼠标顶部，这不是我想要的：

```
var rotationDeg = this.model.get("DisplayOri"), // rotation in degrees
    rotationRadians = rotationDeg * Math.PI / 180, // rotation in rads
    unchanged = this.content.getAbsolutePosition(),  // {x,y} of the shape before any dragging

    dragBoundFunc = function (changed) {
        // called on a mouseMove event, so changed is always different and is the x,y of mouse on stage
        var delta = {
            x: changed.x - unchanged.x,
            y: changed.y - unchanged.y
        };

        return changed; // go to the mouse position
    }; 
```

[编辑] 我应该提一下，“return delta”的明显效果是行不通的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T15:20:51.427

听起来您想限制对象的移动。

1.  确定表示约束轴的向量：也就是说，我们只希望沿着这条线发生运动。从您的绘图中可以看出，这是从红点到左侧的短线方向。该向量的方向`-1/m`是`m`我们移动的直线的斜率。

2.  约束运动。移动由鼠标移动增量表示 - 但我们只想要该移动在约束轴方向上的部分。这是通过`dot product`两个向量中的一个来完成的。

所以在伪代码中

```
 m = (line.y2 - line.y1)/(line.x2 - line.x1)
 constraintSlope = -1/m

 contraintVector = {1, constraintSlope}  //unit vector in that direction
 userMove = {x2-x1, y2-y1}               //vector of mouse move direction

 projection = userMove.x * constraintVector.x + userMove.y * constraintVector.y

 translation = projection * constraintVector   //scaled vector 
```

# php - Codeigniter：消息：无法修改标头信息 - 标头已由（输出开始于

> ID：15974891
> 
> 赞同：12
> 
> 时间：2013-04-12T15:09:25.360
> 
> 标签：php, codeigniter

我创建了一个动态菜单 CMS 网站。我是在Windows系统下开发的。当我在 Windows 操作系统中运行我的项目时，我的项目运行没有任何错误。但现在将其上传到 Linux 操作系统服务器我收到警告和错误，例如：

```
 A PHP Error was encountered

    Severity: Warning

    Message: Cannot modify header information - headers already sent by (output started at /home/ansofcm8/public_html/apps/resources/math/application/core/MY_Controller.php:1)

    Filename: libraries/Session.php

    Line Number: 675 
```

可能是什么原因。请帮我。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-12T15:11:23.650

`<?php`MY_Controller.php 中的 php 打开标记之前似乎有空格。

`<?php`检查所有 PHP 文件并删除标记前的空格。如果有空格或换行，则启动http请求的body，不能在http请求中添加新的headers。

# iphone - scrollsToTop 不适用于 UIViewController 遏制

> ID：15974893
> 
> 赞同：9
> 
> 时间：2013-04-12T15:09:31.250
> 
> 标签：iphone, ios, uiviewcontroller

使用 SDK 6.1、Xcode 4.6.1，我制作了一个新项目 Master-Detail iOS App，ARC，没有故事板。

然后在`DetailViewController`, 在s 中`viewDidLoad`添加两个s并确保第二个像这样隐藏：`UITableView``UIViewController`

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIViewController *lViewController1 = [[UIViewController alloc] init];
    UITableView *lTableView1 = [[UITableView alloc] initWithFrame: self.view.frame];
    lTableView1.scrollsToTop = YES;
    [lViewController1.view addSubview: lTableView1];
    lTableView1.dataSource = self;
    [self.view addSubview: lViewController1.view];
    [self addChildViewController: lViewController1];

    UIViewController *lViewController2 = [[UIViewController alloc] init];
    UITableView *lTableView2 = [[UITableView alloc] initWithFrame: self.view.frame];
    lTableView2.scrollsToTop = YES;
    [lViewController2.view addSubview: lTableView2];
    lTableView2.dataSource = self;
    [self.view addSubview: lViewController2.view];
    [self addChildViewController: lViewController2];

    // now hide the view in view controller 2
    lViewController2.view.hidden = YES;
} 
```

（我确保`DetailViewController`是一个数据源，它返回 100 行`UITableViewCell`s 并`textLabel.text`设置为`@"hello"`）

第二个视图控制器的存在使得`scrollsToTop`（点击状态栏）不再起作用。如果我不使用`UIViewController`遏制并且只添加两个`UITableView`s 并将第二个设置为隐藏，`scrollsToTop`则可以。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T07:54:53.467

`scrollsToTop`仅适用于单个可见视图。从[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)中：

> 此手势适用于单个可见滚动视图；如果有多个设置了此属性的滚动视图（例如，日期选择器），或者如果委托返回`NO`in `scrollViewShouldScrollToTop:`，`UIScrollView`则忽略该请求。在滚动视图滚动到内容视图的顶部后，它会向委托发送`scrollViewDidScrollToTop:`消息。

您可以尝试`[tableView setContentOffset:CGPointZero animated:YES]`手动调用每个表格（或滚动）视图。为此，请在协议中实现该`scrollViewShouldScrollToTop:`方法：`UIScrollViewDelegate`

```
- (BOOL)scrollViewShouldScrollToTop:(UIScrollView *)scrollView {
    [lTableView1 setContentOffset:CGPointZero animated:YES];
    [lTableView2 setContentOffset:CGPointZero animated:YES];
    return NO;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T08:50:28.543

您只能使用属性 .scrollsToTop = YES 为每个 ViewController设置***1 个*ScrollView 。**如果您设置 2 scrollview.scrollsTopTop = YES，它将停止运行。

```
ie: your sample project (DetailViewController.m) update following lines,

line48:    lTableView1.scrollsToTop = YES; 
line56:    lTableView2.scrollsToTop = NO; 
```

然后，scrollsToTop 正常工作。如果您希望同时设置 ScrollsToTop 的滚动视图超过 1 个，请继续挖掘。祝你好运！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T14:36:21.127

我目前正在试验你的项目。什么时候

```
lViewController2.view.hidden = YES; 
```

被替换为

```
lTableView2.hidden = YES; 
```

然后滚动工作，即使有控制器遏制。

我试图在控制器的视图和表格之间插入一个视图，然后隐藏这个视图，但是表格没有滚动。

我试图通过试验来隐藏控制器，`shouldAutomaticallyForwardAppearanceMethods`但表格没有滚动。

**结果：**根据我的实验，只有一个滚动视图必须在视图层次结构中可见，并且`hidden`未检出父视图的属性。`hidden`必须`NO`在所有其他滚动视图上设置为，而不是在它们的父视图上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T07:06:50.207

在测试了几个选项和各种命中并尝试之后，我终于确定了一个最终解决方案，即（`setBounds:`在你的情况下）并且效果很好。不过，您必须为动画付出额外的努力。`scrollView``tableView`

```
 CGRect frame = scrollView.frame;
    frame.origin.x = 0;
    frame.origin.y = 0;
    [scrollView setBounds:frame]; 
```

顺便说一句，在您的情况下，请尝试`YES`返回

```
- (BOOL)scrollViewShouldScrollToTop:(UIScrollView *)scrollView; 
```

虽然如果没有定义，假设是。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T13:58:28.723

我已经使用了它，现在它工作正常。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

    UIViewController *lViewController1 = [[UIViewController alloc] init];
    UITableView *lTableView1 = [[UITableView alloc] initWithFrame: self.view.frame];
    lTableView1.scrollsToTop = YES;
    [lViewController1.view addSubview: lTableView1];
    lTableView1.dataSource = self;
    [self.view addSubview: lViewController1.view];
    [self addChildViewController: lViewController1];
    lTableView1.tag=1;

    UIViewController *lViewController2 = [[UIViewController alloc] init];
    UITableView *lTableView2 = [[UITableView alloc] initWithFrame: self.view.frame];
    lTableView2.scrollsToTop = NO;
    [lViewController2.view addSubview: lTableView2];
    lTableView2.dataSource = self;
    [self.view addSubview: lViewController2.view];
    [self addChildViewController: lViewController2];
    lTableView2.tag=2;
    // now hide the view in view controller 2
    lViewController2.view.hidden = YES;

}

- (NSUInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSUInteger)section {
    return 50;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath      *)indexPath {
    static NSString * const kCellIdentifier = @"MyCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:kCellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:kCellIdentifier];
    }
    cell.textLabel.text = [NSString stringWithFormat:@"hello %d %d",indexPath.row, tableView.tag];
    return cell;
} 
```

# java - Ajax 响应不是来自 servlet

> ID：15974894
> 
> 赞同：0
> 
> 时间：2013-04-12T15:09:32.753
> 
> 标签：java, ajax, servlets

```
function pay() // function to retrieve value from the servlet via AJAX

        {   

            var xmlHttp=new XMLHttpRequest();
            if (typeof XMLHttpRequest != "undefined")//object
            {
                xmlHttp= new XMLHttpRequest();
            }
            else if (window.ActiveXObject) //object
            {
                xmlHttp= new ActiveXObject("Microsoft.XMLHTTP");//object
            }
            if (xmlHttp==null)
            {
                alert("Browser does not support XMLHTTP Request")
                return;
            } 
            var url="http://localhost:8084/ElectricityBillPaymentSystem/GenerateReceipt";

            url +="?username=" +document.getElementById("userinfo").value+"&bill="+document.getElementById("amnt").value;
            if(document.getElementById("mode1").checked)
            {

                url+="&type=Card";
            }
            else
            {
                url+="&type=NetBanking";
           }
           alert(url);
            xmlHttp.open("POST", url, true); // open connection to servlet
            xmlHttp.send(null);

            xmlHttp.onreadystatechange = function stateChange() // call if status 200
            {
                if (xmlHttp.readyState==4 && xmlHttp.status==200)
                {   alert(xmlHttp.responseText);
                    document.getElementById("bill").innerHTML=xmlHttp.responseText;
                    alert(xmlHttp.responseText);

                }
            }
            location.href="#payment"; //redirect
        }

public class GenerateReceipt extends HttpServlet { //Http servlet

/**
 * Processes requests for both HTTP
 * <code>GET</code> and
 * <code>POST</code> methods.
 *
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
Statement stmt;
        Connection con;
        ResultSet rs;
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException, DocumentException, ClassNotFoundException, SQLException 
{
            response.setContentType("text/html;charset=UTF-8");//Http servlet
            PrintWriter out=response.getWriter();//Http servlet

            try 
            {            
                Date dt=new Date();
                int mon=dt.getMonth()+1;String currentdate=dt.getYear()+1900+"-"+dt.getMonth()+"-"+dt.getDate();
        String fname=request.getParameter("username"); // parameters passing working..
        String amnt=request.getParameter("bill");
        String typ=request.getParameter("type");
        String transid="TRANS"+Integer.toString(mon);
        String serviceno;
        Class.forName("com.mysql.jdbc.Driver");

        con = DriverManager.getConnection("jdbc:mysql://localhost:3306/test","root","");
        stmt=con.createStatement();
        rs=stmt.executeQuery("select * from userprofiles where FirstName='"+fname+"' ");
        rs.next(); 
        serviceno=rs.getString(8);
        rs.close();
        stmt.executeUpdate("update Payment set BillAmount=0 where ServiceNo in( Select ServiceNo from userprofiles where FirstName='"+fname+"' )");   // insert into tables
        stmt.executeUpdate("insert into Transaction values('"+serviceno+"', '"+currentdate+"', '"+transid+"', '"+typ+"'  )"); // insert into tables
        stmt.close();out.println("haa"); // not printed
        String buffer="<table border=1><tr><th>TransactionID</th><th>Bill Amount</th><th>Date of Transaction</th><th>Type of Transaction</th>";// insert into tables
        buffer+="</tr><tr><td>"+transid+"</td><td>"+amnt+"</td><td>"+currentdate+"</td><td>"+typ+"</td></tr></table>";// insert into tables
        out.println(buffer);// not printed in the responseTEXT
        out.println("haa");}} 
```

两者都与数据库连接完美

我没有通过 AJAX 从 Servlet 得到响应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:14:36.930

利用

```
 out.write(buffer); 
```

代替

```
out.println(buffer) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-11T20:41:33.907

使用 response.getWriter().append(buffer);

# process - 使用命令提示符查找正在运行的进程的文件位置

> ID：15974895
> 
> 赞同：1
> 
> 时间：2013-04-12T15:09:32.933
> 
> 标签：process, cmd

我正在托管游戏服务器，并且正在使用 SSH 重新启动服务器。为了检查所需的服务器是否在线，我使用`tasklist /FI "IMAGENAME eq srcds.exe" /V /FO LIST`. 但是，这并没有给我真正详细的信息。

有什么方法可以获取具有给定名称的进程列表，以及更详细的信息，例如启动参数或端口/IP 绑定，以便我可以通过端口 + IP 或启动参数识别服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:39:54.730

试试 WMI。查询[Win32_Process](http://msdn.microsoft.com/en-us/library/aa394372)类应该为您提供您正在寻找的信息，例如

```
wmic process get Caption,CommandLine,ProcessId /format:list 
```

# ms-access - 如何从 Access 中的一系列表创建平面文件？

> ID：15974897
> 
> 赞同：0
> 
> 时间：2013-04-12T15:09:41.890
> 
> 标签：ms-access, flat-file

我在 Access 2007 数据库中有一系列表。我正在尝试找到一种将平面文件输出到合并所有表格的 Excel 电子表格的方法，以便平面文件的每一行代表每个表格中表格行的唯一组合。

例如，这些表：

![在此处输入图像描述](https://i.stack.imgur.com/pYvaM.jpg)

将结合起来制作这个输出表：

![在此处输入图像描述](https://i.stack.imgur.com/Zwti1.jpg)

我面临的挑战是：

*   “输入”表的行数和列数以及数量可能会有所不同
*   最终输出表中的总行数可以变得非常大（200,000+ 行）
*   我很了解 Excel 和 VBA（在 Excel 中），但对 Access 几乎一无所知

有没有办法在 Access 中做到这一点？Access 中是否有一些我完全忽略的本机功能？任何指针（即使它是“你需要读入 X 和 Y”）将不胜感激！

谢谢，

亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-30T02:02:32.470

如上所述：

> 创建一个新查询。选择您的 3 个表作为数据源。如果需要，通过将一个表中的字段之间的线拖动到另一个表中的字段来设置表之间的连接。如果没有连接，您将获得笛卡尔积……第一个表中的每一个都与第二个表的每一行配对，然后这些组合中的每一个都与第三个表的每一行配对。选择要包含在结果集中的字段。当查询返回您需要的内容时，保存并为其命名。然后，您可以将该命名查询导出到 Excel。
> 
> 如果表格很大，您可能会达到 Excel 的行/列限制。

# php - 使用 php 中的按钮对数据进行排序

> ID：15974901
> 
> 赞同：0
> 
> 时间：2013-04-12T15:09:50.557
> 
> 标签：php, html, sorting, button

我试图创建一个按钮，其功能是对数据进行降序或升序排序。但是，我不知道该怎么做

我在互联网上做了一些研究，但没有一个给出答案。

有谁知道怎么做或一些可以作为参考的源代码？？？

这是我的代码 test.html

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Data Mining</title>
</head>

<body>
    <form action="showDB.php" method="post">
    <table border="0">
    <tr>
        <th>test</th>
    </tr>
    <tr>
        <td>Select Foreign Agent Country</td>
        <td></td>
        <td>
        <select name="country">
        <option value="US">United States</option>
        <option value="NZ">New Zealand</option>
        <option value="JP">Japan</option>
        </select> 
        </td>
      </tr>
        <td>
        <input type="submit" name="formSubmit" value-"Submit">
        </td>
    </table>
    </form>

</body>
</html> 
```

显示数据库.php

```
<?php
//connect to server
$connect = mysql_connect("localhost", "root", "");

//connect to database
//select the database
mysql_select_db("fak_databases");

//submit button
if($_POST['formSubmit'] == "Submit")
{
    $country = $_POST['country'];
}

//query the database
if($country == 'US') {  
    // query to get all US records  
    $query = mysql_query("SELECT * FROM auip_wipo_sample WHERE applicant1_country='US'");  
}  
elseif($country == 'NZ') {  
    // query to get all AUD records  
    $query = mysql_query("SELECT * FROM auip_wipo_sample WHERE applicant1_country='NZ'"); 
}elseif($country == 'JP') {  
    // query to get all AUD records  
    $query = mysql_query("SELECT * FROM auip_wipo_sample WHERE applicant1_country='JP'");  
} else {  
    // query to get all records  
    $query = mysql_query("SELECT * FROM auip_wipo_sample"); 
}  
//fetch the result
Print "<table border cellpadding=3>"; 
//ascending descending button
Print "<tr><th colspan='2'><input type='submit' name='asc_sort' value-'Asc'></input></th></tr>";

while($row = mysql_fetch_array($query))
{

    Print "<tr>";
    Print "<td>".$row['invention_title'] . "</td>"; 
    Print "<td>".$row['invention-title'] . " </td></tr>"; 
}
    //sorting the data, I got from internet but doesn't work
    if(isset($_POST['asc_sort']) && !empty($_POST['asc_sort']) && $_POST['asc_sort']==1)
    {
         $query = "SELECT * FROM auip_wipo_sample ORDER BY invention_title ASC";

    }else{

        $query = "SELECT * FROM auip_wipo_sample ORDER BY invention_title DESC";
    }

Print "</table>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:16:01.577

改变这个：

```
Print "<tr><th colspan='2'><input type='submit' name='asc_sort' value-'Asc'></input></th></tr>"; 
```

至

```
Print "<tr><th colspan='2'><input type='submit' name='asc_sort' value='Asc'></input></th></tr>"; 
```

和这个

```
if(isset($_POST['asc_sort']) && !empty($_POST['asc_sort']) && $_POST['asc_sort']==1) 
```

至

```
if(isset($_POST['asc_sort']) && !empty($_POST['asc_sort'])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:24:44.830

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Data Mining</title>
</head>

<body>
    <form action="showDB.php" method="post">
    <table border="0">
    <tr>
        <th colspan="3">test</th>
    </tr>
    <tr>
        <td>Select Foreign Agent Country</td>
        <td>
        <select name="country">
        <option value="US">United States</option>
        <option value="NZ">New Zealand</option>
        <option value="JP">Japan</option>
        </select> 
        </td>
        <td><input type="checkbox" name="asc" value="1" /> Ascending?</td>
      </tr>
     <tr> 
        <td colspan="3">
        <input type="submit" name="formSubmit" value-"Submit">
        </td>
       </tr>
    </table>
    </form>

</body>
</html> 
```

一些事情：

*   您在中间提取了一条查询语句，此时您仍在检索前一条语句。这需要将数据拉入多个数组然后进行处理。
*   您应该为此使用 pdo 或 mysqli 之类的东西，但这是您当前方法的示例。
*   此外，您在 POST 上使用 isset ...如果 POST 中有任何内容，它将按设置返回。
*   引用未设置的 POST 变量将导致错误，因此我正在检查以确保已设置国家/地区，然后我为开关提供了 NULL 答案。

示例代码：

```
<?php
    //connect to server
    $connect = mysql_connect("localhost", "root", "");

    //connect to database
    //select the database
    mysql_select_db("fak_databases");

    //submit button
    if(!empty($_POST['formSubmit'])&&($_POST['formSubmit']=="Submit")&&(!empty($_POST['country']))){
        $country = $_POST['country'];
    } else {
        $country = '';  
    }

    if(!empty($_POST['asc']))
        {
             $append = " ORDER BY invention_title ASC";

        }else{

            $append = " ORDER BY invention_title DESC";
        }

    switch($country){
    case 'US':
    $query = "SELECT * FROM auip_wipo_sample WHERE applicant1_country='US'$append";
    break;
    case 'NZ':
    $query = "SELECT * FROM auip_wipo_sample WHERE applicant1_country='NZ'$append";
    break;
    case 'JP':
    $query = "SELECT * FROM auip_wipo_sample WHERE applicant1_country='JP'$append";
    break;
    default:
    //all records
    $query = "SELECT * FROM auip_wipo_sample$append";

    }

    //query the database
    if($result = mysql_query($query)){
    //fetch the result
    print "<table border cellpadding=3>"; 

    while($row = mysql_fetch_array($result))
    {

        print "<tr>";
        print "<td>".$row['invention_title'] . "</td>"; 
        print "<td>".$row['invention-title'] . " </td></tr>"; 
    }
        //sorting the data, I got from internet but doesn't work

    print "</table>";
    } else {
                    //For Testing
        echo "Query Failed:<br />$query";   
    }

?> 
```

# django - 'url' 需要一个非空的第一个参数。Django 1.5 中的语法发生了变化，请参阅文档

> ID：15974905
> 
> 赞同：1
> 
> 时间：2013-04-12T15:10:00.223
> 
> 标签：django, authentication, login

我正在尝试使用 django.contrib.auth 登录，但似乎这在 Django 1.5 中不起作用这是 urls.py

```
r'^login/$', 'django.contrib.auth.views.login',  {'template_name': 'login.html'}), 
```

这是我的模板

```
1   {% extends "website/base.html" %}
2   
3   {% block content %}
4   
5   {% if form.errors %}
6   <p>Authentication error</p>
7   {% endif %}
8   
9   <form action="{% url django.contrib.auth.views.login %}" method="post">
10    {% for field in form %}
11    <p>
12      {{ field.label_tag }}: {{ field }}
13      {{ field.errors }}
14    </p>
15    {% endfor %}
16    <p><input type="submit" value="Login" /></p>
17    <input type="hidden" name="next" value="{{ next }}" />
18  </form> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T15:16:29.220

您需要在视图名称周围加上引号：

```
<form action="{% url "django.contrib.auth.views.login" %}" method="post"> 
```

# database - 在 Win7 中将 postgres db 推送到 heroku 的简单方法？db:pull 和 pg:transfer 的问题

> ID：15974916
> 
> 赞同：2
> 
> 时间：2013-04-12T15:10:27.833
> 
> 标签：database, postgresql, heroku, taps

使用 Rails 3.2.2，完成从 sqlite 到 postgres 9.2 的迁移。[在本](https://stackoverflow.com/questions/7086654/installing-postgres-on-windows-for-use-with-ruby-on-rails)教程中使用答案作为安装 postgres 的指南，并在第 11 步中询问运行`heroku db:pull`我得到的位置：

`Failed to connect to database: Sequel::AdapterNotFound -> LoadError: cannot load such file --pg`

我深入挖掘并发现 db:pull (taps gem) 已被弃用，并且遇到了一些关于 pg:transfer 的建议。安装了 pg:transfer，但我觉得它可能是 *nix only(?) 就好像我运行一样：`heroku pg:transfer`它返回：

`Heroku client internal error. No such file or directory - .env (Errno:ENOENT)`

如果我使用 -f 和 -t 执行 pg:transfer 它会给我： `'env' is not recognized as an internal or external command, operable program or batch file`这意味着它没有绑定到路径或不作为 Windows 中的命令存在。

对上述错误有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:21:10.167

通过使用 pg:backups gem 解决，在 Heroku 文档中被推荐作为水龙头的替代品。我使用[本指南](http://dipinkrishna.com/blog/2012/09/heroku-importrestore-data-database-postgres-dump-file/)并将我的转储上传到 Dropbox 以供 Heroku 提取。

这是我的步骤和 cmds 的确切列表：

1.  将 heroku.com 附加组件中的 pgbackups 添加到我的实例中。
2.  `heroku pgbackups:capture DATABASE`（这只是备份你的heroku db）
3.  `pg_dump -h localhost -U <pg username> -Fc dbname > dbname.dump`
4.  将 dbname.dump 移动到我的保管箱上的文件夹中
5.  在 Dropbox 中，右键单击 dbname.dump =>“共享链接”
6.  取消分享对话框弹出，右击“下载按钮”，复制链接地址（Chrome）
7.  `heroku pgbackups:restore DATABASE <paste dropbox download link here>`

Dropbox 技巧：不要使用 Dropbox 提供的文件链接，因为它是一个 html 重定向，并且会导致 pg:restore 失败，*即使扩展名以 .dump 结尾*

相反，导航到您的 Dropbox 页面并在“下载”按钮上“右键单击复制链接地址”。那是您在 pgbackups:restore 中使用的地址（应该类似于`db.dump?token=<long random string>`）

有点笨拙，但完成了工作。如果您知道更好的方法，请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T02:58:19.580

您需要制作一个 .env 文件，其中包含以下内容：

```
DATABASE_URL=postgres://localhost/myapp_development 
```

参考：

*   [https://github.com/ddollar/heroku-pg-transfer](https://github.com/ddollar/heroku-pg-transfer)
*   [https://devcenter.heroku.com/articles/config-vars#local-setup](https://devcenter.heroku.com/articles/config-vars#local-setup)

# visual-studio-2010 - COMVisible class in VS 2010 assembly still not visible through com

> ID：15974917
> 
> 赞同：-1
> 
> 时间：2013-04-12T15:10:33.250
> 
> 标签：visual-studio-2010, vb6, comvisible

I created a VS 2010 class library. Marked the assembly for Com Visibility. Signed the assembly with a strong key. Created my class, have my entry point method available.

The library works fine from a test project in C#.

I regasm the class library to gac, via: c:\windows\microsoft.net\framework\v4.0.30319\regasm testdll.dll /tlb: testdll.tlb /codebase

Include the tlb file as a reference in my VB6 project. I find it through resources 'browse' so its there.

When i try to instantiate the class... its empty. the public method that should be available via the public class doesn't show.

```
Dim objTest as testdll.testclass
set objTest = new testdll.testclass

objTest.testmethod   <---  this 'testmethod' doesn't display in intellisense... nothing does. 
```

In addition i tried calling the 'testdll.testclass' via CreateObject, i get the error "ActiveX component can't create object"

Now i have other projects i've done COM visibility for and i've tried comparing the difference, but i don't see any. I can't understand why it isn't working.

Any clues??? tx very much.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:52:19.627

Just use an interface... one you define or to use the [ClassInterface(ClassInterfaceType.AutoDual)] there are comments online you can find that indicate not to use autodual, but if you control the complete usage of your library, it seems like an 'ok' way to go.

I tried all sorts of ways to simulate / understand why my one project didn't need an interface to be visible by an vb project, without success. i had originally thought perhaps possible that it was because that project implemented an IDisposable Interface (the ONLY interface used in the C# projects that is com visible) but that didn't turn out to be the reason. Anyway I don't want to waste anyone else's time on this. thanks for the responses.

this link provides ample information on the subject: [http://anturcynhyrfus.blogspot.com/2011/03/creating-com-visible-c-component.html](http://anturcynhyrfus.blogspot.com/2011/03/creating-com-visible-c-component.html)

# php - php - 指向根目录的链接不起作用

> ID：15974918
> 
> 赞同：0
> 
> 时间：2013-04-12T15:10:40.290
> 
> 标签：php, hyperlink

这是我的文件夹和文件的层次结构：

```
/website
   /admin
      /about
           editAbout.php
      adminHeader.php
      adminDashboard.php
      adminLogout.php 
```

`adminHeader.php`是我页面的标题，因此它被包含在所有页面中。它还包含具有此代码的注销链接：

```
<a href="adminLogout.php">Logout</a> 
```

在 adminDashboard.php 页面中它可以工作，但在 editAbout.php 页面中，它不起作用，因为链接不正确，它变成

```
http://www.domainname.com/admin/about/adminLogout.php 
```

我试图将链接更改为

```
<a href="http://www.domainname.com/admin/adminLogout.php"> 
```

并且也通过使用`$_SERVER['DOCUMENT_ROOT']`但也没有工作。

有谁知道如何将链接重置为正确的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:32:31.793

您不需要添加服务器名称，因为浏览器会为您输入。因此，只需将所有路径设为绝对路径（从 Web 浏览器的角度来看）：

```
/admin/adminLogout.php 
```

例子：

```
<a href="/admin/adminLogout.php"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:15:44.697

您可以使用 ../ 回到它成为 `enter code here`注销的父文件夹

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T15:15:52.450

尝试这个：

```
$_SERVER['SERVER_NAME'] . "/admin/adminLogout.php"; 
```

SERVER_NAME 值是指域。

# c++ - operator== 改变其操作数是不好的做法吗？

> ID：15974922
> 
> 赞同：21
> 
> 时间：2013-04-12T15:11:00.710
> 
> 标签：c++, comparison, operator-overloading, constants, equality

## 设想

我有一门课，我希望能够比较它的平等性。该类很大（它包含一个位图图像），我将对其进行多次比较，因此为了提高效率，我对数据进行哈希处理，并且仅在哈希匹配时进行完全相等检查。此外，我只会比较我的对象的一小部分，所以我只在第一次完成相等性检查时计算哈希值，然后将存储的值用于后续调用。

## 例子

```
class Foo
{
public:

   Foo(int data) : fooData(data), notHashed(true) {}

private:

   void calculateHash()
   {
      hash = 0; // Replace with hashing algorithm
      notHashed = false;
   }

   int getHash()
   {
      if (notHashed) calculateHash();
      return hash;
   }

   inline friend bool operator==(Foo& lhs, Foo& rhs)
   {
      if (lhs.getHash() == rhs.getHash())
      {
         return (lhs.fooData == rhs.fooData);
      }
      else return false;
   }

   int fooData;
   int hash;
   bool notHashed;
}; 
```

## 背景

根据[这个答案](https://stackoverflow.com/a/4421719/1227469)的指导，等式运算符的规范形式是：

`inline bool operator==(const X& lhs, const X& rhs);`

此外，给出了以下关于运算符重载的一般[建议](https://stackoverflow.com/a/4421708/1227469)：

> 始终坚持运营商众所周知的语义。

## 问题

1.  我的函数必须能够改变它的操作数才能执行散列，所以我不得不将它们设为非`const`. 这是否有任何潜在的负面后果（示例可能是标准库函数或期望`operator==`有`const`操作数的 STL 容器）？

2.  `operator==`如果突变没有任何可观察到的影响（因为用户无法看到哈希的内容），是否应该认为突变函数与其众所周知的语义相反？

3.  如果上述任何一个的答案是“是”，那么更合适的方法是什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-12T15:15:20.957

对于成员来说，这似乎是一个完全有效的用例`mutable`。您仍然可以（并且应该）`operator==`通过 const 引用获取参数，并为该类提供`mutable`哈希值的成员。

然后，您的类将有一个散列值的获取器，该散列值本身被标记为`const`方法，并且在第一次调用时会延迟评估散列值。这实际上是一个很好的例子，说明为什么`mutable`要添加到语言中，因为它不会从用户的角度改变对象，它只是在内部缓存昂贵操作的值的实现细节。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-12T15:14:21.330

用于`mutable`要缓存但不影响公共接口的数据。

你现在，“变异”→ `mutable`。

然后从*逻辑性* `const`的角度考虑，对象为使用代码提供了什么保证。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T15:18:21.007

您永远不应该在比较时修改对象。但是，此函数不会在逻辑上修改对象。简单的解决方案：使`hash`可变，因为计算哈希是兑现的一种形式。请参阅： ['mutable' 关键字除了允许变量由 const 函数修改之外还有其他用途吗？](https://stackoverflow.com/questions/105014/does-the-mutable-keyword-have-any-purpose-other-than-allowing-the-variable-to)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T15:34:43.397

1.  不建议在比较函数或运算符中产生副作用。如果您可以设法计算哈希作为类初始化的一部分，那就更好了。另一种选择是有一个负责的管理器类。注意：即使是看似无辜的突变也需要锁定多线程应用程序。
2.  此外，我建议避免将相等运算符用于数据结构并非绝对微不足道的类。很多时候，项目的进展会产生对比较策略（参数）的需求，而等式运算符的接口变得不够充分。在这种情况下，添加比较方法或仿函数不需要反映标准 operator== 接口以实现参数的不变性。
3.  如果 1\. 和 2\. 对您的情况来说似乎过大了，您可以将 c++ 关键字 mutable 用于哈希值成员。这将允许您甚至从 const 类方法或 const 声明的变量修改它

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-13T00:31:21.667

是的，引入语义上意想不到的副作用总是一个坏主意。除了提到的其他原因：始终假设您编写的任何代码将永远只被甚至没有听说过您的名字的其他人使用，然后从这个角度考虑您的设计选择。

当使用您的代码库的人发现他的应用程序很慢并尝试对其进行优化时，如果它在 == 重载中，他将浪费时间试图找到性能泄漏，因为从语义的角度来看，他并不期望它看来，要做的不仅仅是简单的对象比较。在语义便宜的操作中隐藏潜在的昂贵操作是一种不好的代码混淆形式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T22:06:30.587

你可以走可变路线，但我不确定是否需要这样做。您可以在需要时进行本地缓存，而无需使用 mutable。例如：

```
#include <iostream>
#include <functional> //for hash

using namespace std;

template<typename ReturnType>
class HashCompare{
public:
    ReturnType getHash()const{
        static bool isHashed = false;
        static ReturnType cachedHashValue = ReturnType();
        if(!isHashed){
            isHashed = true;
            cachedHashValue = calculate();
        }
        return cachedHashValue;
    }
protected:
    //derived class should implement this but use this.getHash()
    virtual ReturnType calculate()const = 0;
};

class ReadOnlyString: public HashCompare<size_t>{
private:
    const std::string& s;
public:
    ReadOnlyString(const char * s):s(s){};
    ReadOnlyString(const std::string& s): s(s){}

    bool equals(const ReadOnlyString& str)const{
        return getHash() == str.getHash();
    }
protected:
    size_t calculate()const{
        std::cout << "in hash calculate " << endl;
        std::hash<std::string> str_hash;
        return str_hash(this->s);
    }
};

bool operator==(const ReadOnlyString& lhs, const ReadOnlyString& rhs){ return lhs.equals(rhs); }

int main(){
    ReadOnlyString str = "test";
    ReadOnlyString str2 = "TEST";
    cout << (str == str2) << endl;
    cout << (str == str2) << endl;
} 
```

输出：

```
 in hash calculate 
 1
 1 
```

你能给我一个很好的理由来解释为什么将 isHashed 保留为成员变量是必要的，而不是让它在需要的地方本地化？请注意，如果我们真的想要，我们可以进一步摆脱“静态”使用，我们要做的就是创建一个专用的结构/类

# c# - selenium/selenium 网格：如何将请求发布到具有不同 IP 地址的 Web 服务器

> ID：15974925
> 
> 赞同：1
> 
> 时间：2013-04-12T15:11:12.070
> 
> 标签：c#, selenium, selenium-grid

我必须测试一个限制来自同一 IP 地址的总请求的网站。有没有办法在每个新请求发送到 Web 服务器时更改 IP 地址，以便服务器无法通过当前 IP 地址超过最大请求数的异常？我不知道天气可以通过更换代理来解决吗？我需要在 C# 中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:54:47.310

看起来您正在尝试在每次调用服务器后更改本地计算机的 IP 地址 - 目前使用 selenium 是不可能的。如果您坚定地尝试这样做，则需要从 c# 查找 DHCP[释放](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393047%28v=vs.85%29.aspx)/[更新](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa393064%28v=vs.85%29.aspx)的方法，或者如果您有能力，给自己随机创建的静态 IP，所有这些都来自 c#。

这是您可能会发现有用的另一个链接[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/8bf269bd-128e-457f-8c64-09834e995b59/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/8bf269bd-128e-457f-8c64-09834e995b59/)

如果您正在分发您的测试，如果您的所有测试机器都开始更改它们的 IP，您可能会遇到更多麻烦 - selenium 会认为它失去了与测试机器的连接并被炸毁。

另外，不要忘记在测试完成后更改所有内容（如果您使用 NUnit 之类的东西，请确保在 [TearDown] 中正确重置您的设置）

# python - 导入 python-iptables 包“iptc”时未定义符号“afinfo”

> ID：15974927
> 
> 赞同：1
> 
> 时间：2013-04-12T15:11:17.477
> 
> 标签：python, iptables

我正在尝试利用 python-iptables 包在 Web 应用程序中列出 iptables 规则。当我将 iptc 包添加到我的环境中时，出现以下错误。我使用 yum 'provides' 来查找 libxtables.so.4 文件的来源，发现`iptables`and`iptables-devel`包是 CentOS 6.4 x64 中的合适选择。我升级了这些软件包，但没有改变错误。

有人对我如何解决这个问题有任何建议吗？

```
 pgrace@ny-misc01:~/repos/python-iptables/libxtwrapper$ python
Python 2.6.6 (r266:84292, Sep 11 2012, 08:34:23)
[GCC 4.4.6 20120305 (Red Hat 4.4.6-4)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import iptc
Traceback (most recent call last):
  File "", line 1, in 
  File "/usr/lib64/python2.6/site-packages/iptc/__init__.py", line 10, in 
    from ip4tc import Table, Chain, Rule, Match, Target, Policy, IPTCError
  File "/usr/lib64/python2.6/site-packages/iptc/ip4tc.py", line 11, in 
    from xtables import (XT_INV_PROTO, NFPROTO_IPV4, XTablesError, xtables,
  File "/usr/lib64/python2.6/site-packages/iptc/xtables.py", line 744, in 
    class xtables(object):
  File "/usr/lib64/python2.6/site-packages/iptc/xtables.py", line 757, in xtables
    _xtables_afinfo = ct.c_void_p.in_dll(_lib_xtables, "afinfo")
ValueError: /lib64/libxtables.so.4: undefined symbol: afinfo
>>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T22:29:26.417

看到这个：[https ://github.com/ldx/python-iptables/issues/25](https://github.com/ldx/python-iptables/issues/25)

这是一个**已知问题**，旧版本的 libxtables 声明`afinfo`为静态，因此 python-iptables 无法访问它。不过，有一个可能的解决方法 - 请密切关注票证，一旦有进展就会更新。

另一种解决方案是更新您机器上的 iptables。

**免责声明：**我是 python-iptables 的维护者。

**更新：**这应该现在修复。

# java - 带有非拉丁元素的 Xsd 到 java

> ID：15974934
> 
> 赞同：0
> 
> 时间：2013-04-12T15:11:33.433
> 
> 标签：java, xsd, xjc

我有一个 xsd，其中元素以非拉丁字符命名。我怎样才能生成java类，其中filelds将被正确命名，没有“奇怪”的字符：我可以为每个字符转换提供我自己的规则吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:23:05.320

一种方法是通过[自定义绑定](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/tutorial/doc/JAXBUsing4.html)——更具体地说是类和属性。我不知道角色级别的绑定自定义。要将其实现为基于模式的全局替换，您很可能必须编写自己的插件并在 xjc 中启用扩展。

# sql - 选择带有连接的 NVL

> ID：15974935
> 
> 赞同：2
> 
> 时间：2013-04-12T15:11:34.683
> 
> 标签：sql, oracle

我正在尝试编写一个 SQL 语句，该语句将从一个表中提取值并从另一个表中提取相应的值。这工作正常，除非连接中使用的值之一为空，然后它不返回任何内容。如果连接为空，我希望脚本返回一个值（如“Nothing”）。这可能吗？我知道我可以在选择中使用 NVL，但是加入呢？这是我的脚本：

```
 SELECT  
 i.equip_pk,
 i.request_pk, 
 MY_ALIAS.EQUIP_ALIAS_ID 
 FROM
 tableOne i
 JOIN table2 MY_ALIAS ON (i.EQUIP_PK = MY_ALIAS.EQUIP_PK)
 WHERE i.request_pk=:requestPk 
```

我正在使用 Oracle 10g，但该脚本不会用作 PL/SQL。

谢谢你的帮助

杰森

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:14:31.297

您可以使用`LEFT JOIN`. 这将返回 中的所有行`tableOne`，当在第二个表中找不到匹配项时，它将返回 null。然后你可以`NVL`像你提到的那样使用。

```
SELECT  
 i.equip_pk,
 i.request_pk, 
 NVL(MY_ALIAS.EQUIP_ALIAS_ID, 'Nothing here')
 FROM tableOne i
 LEFT OUTER JOIN table2 MY_ALIAS ON (i.EQUIP_PK = MY_ALIAS.EQUIP_PK)
 WHERE i.request_pk=:requestPk 
```

如果您期望来自 的空值`equip_pk`，则可以将`NVL`其应用于。即使它为空，`LEFT JOIN`仍然会产生正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:15:04.493

```
SELECT  
 NVL(i.equip_pk, 'Nothing'),
 NVL(i.request_pk, 'Nothing)', 
 MY_ALIAS.EQUIP_ALIAS_ID 
 FROM
 tableOne i
 FULL JOIN table2 MY_ALIAS ON (i.EQUIP_PK = MY_ALIAS.EQUIP_PK)
 WHERE i.request_pk=:requestPk 
```

# vb.net - 在VB中加载表单窗口后如何运行函数/子？

> ID：15974936
> 
> 赞同：3
> 
> 时间：2013-04-12T15:11:36.490
> 
> 标签：vb.net

我有一个从 USB 徽章阅读器获取用户 ID 的功能，用于登录应用程序。当我运行该应用程序时，在我滑动标签之前不会出现登录窗口。我需要知道是否可以加载 Windows，然后开始运行从 USB 获取数据的功能。

谢谢 ：）

```
Private Sub SerialPort1_DataReceived()
    'Threading.Thread.SpinWait(1000)
    OpenPort()
    If SerialPort1.IsOpen() Then

        byteEnd = SerialPort1.NewLine.ToCharArray
        'read entire string until .Newline 
        readBuffer = SerialPort1.ReadLine()
        readBuffer = readBuffer.Remove(0, 1)
        readBuffer = readBuffer.Remove(8, 1)
        WWIDTextBox.AppendText(readBuffer)

    End If
End Sub

Private Sub Form1_Activated(ByVal sender As Object, _
ByVal e As System.EventArgs) Handles MyBase.Activated
    SerialPort1_DataReceived()
End Sub

Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    'SerialPort1_DataReceived()
End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T15:41:17.427

问题是您正在调用该`ReadLine`方法，这是一个阻塞（同步）方法。换句话说，当你调用它时，该方法在它有要返回的值之前不会返回值。因此，它会停止在当前线程上的执行，直到读取完整的行（当刷卡时）。由于您在调用它时处于 UI 线程上，因此它会锁定 UI，直到刷过徽章为止。

`SerialPort1_DataReceived`您可以从不同的线程执行工作，而不是从 UI 线程调用您的方法。最简单的方法是`BackgroundWorker`在设计器中将组件拖到表单上。然后你可以添加这样的代码：

```
Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    BackgroundWorker1.RunWorkerAsync()
End Sub

Private Sub BackgroundWorker1_DoWork(sender As Object, e As DoWorkEventArgs) Handles BackgroundWorker1.DoWork
    OpenPort()
    If SerialPort1.IsOpen() Then
        byteEnd = SerialPort1.NewLine.ToCharArray
        Dim readBuffer As String = SerialPort1.ReadLine()
        readBuffer = readBuffer.Remove(0, 1)
        readBuffer = readBuffer.Remove(8, 1)
        e.Result = readBuffer
    End If
End Sub

Private Sub BackgroundWorker1_RunWorkerCompleted(sender As Object, e As RunWorkerCompletedEventArgs) Handles BackgroundWorker1.RunWorkerCompleted
    WWIDTextBox.AppendText(CStr(e.Result))
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-04T22:34:22.360

在 VS2013 上工作时，我遇到了同样的问题，我需要刷新 datagridview（网格中的颜色）。这对我有用。

```
Sub MyForm_VisibleChanged(sender As Object, e As EventArgs) Handles Me.VisibleChanged

            If Me.Visible Then
                'do action...
            End If

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-17T05:05:45.957

```
Private Sub loadCombo()
    Dim sqlconn As New OleDb.OleDbConnection
    Dim connString As String
    connString = ""
    Dim access As String
    access = "select slno from atable"
    Dim DataTab As New DataTable
    Dim DataAdap As New OleDbDataAdapter(access, connString)
    DataAdap.Fill(DataTab)
    ComboBox1.DataSource = DataTab
    ComboBox1.DisplayMember = "slno"

End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T15:18:35.180

尝试[表单激活](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.activated%28v=vs.90%29.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)事件

```
Private Sub Form1_Activated(ByVal sender As Object, _
    ByVal e As System.EventArgs) Handles MyBase.Activated
 'Call your function here
End Sub 
```

它调用函数`After the Form Loads`...

# jakarta-ee - 使用html锚标签在struts2中下载文件

> ID：15974938
> 
> 赞同：0
> 
> 时间：2013-04-12T15:11:41.630
> 
> 标签：jakarta-ee, struts2, download

在普通的 HTML 标记中，可以使用锚标记生成下载链接，例如：

```
<a href="www.example.com/somefile.zip">DOWNLOAD</a> 
```

在 struts2 中，我将文件名和文件 URL 存储在数据库中。然后，在 JSP 文件中，填充下载链接，如：

```
<s:iterator value="fileList">
<a href='<s:property value="fileURL"/>'> <s:property value="fileName"/> </a>
</s:iterator> 
```

通过这种方式，文件名及其链接被填充。当我将鼠标悬停在链接上时，我可以在浏览器的状态栏中看到正确的文件 URL。但是当我单击链接时，现在会显示下载对话框。我搜索了互联网，他们告诉使用 FileInputStream。我的问题是，是否可以像上面的代码那样生成下载链接而不是使用 FileInputStream？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:25:05.750

使用 Struts2 你有`Action`s 和`Result`s。

所以，你需要一个`Action`映射到你的链接，让我们称之为`download_file.do`

你创建你的链接列表，传入一个参数来告诉struts2下载哪个文件（允许任意文件是危险的，所以文件名可能会很好）。

```
<s:iterator value="fileList">
   <s:a action="download_file"> 
      <s:property value="fileName"/>
      <s:text name="my.link"/>
   </a>
</s:iterator> 
```

现在，`Action`您需要`fileName`照常设置。

在`execute`方法中获得文件名后，打开一个并`InputStream`为其`File`提供一个`getter`。您可能还想获取文件的大小和要下载的名称。

让我们假设`InputStream`is`getFileToDownload`的 getter ， size 的 getter 是`getFileSize`。

您需要为内容配置提供一个 getter，这将设置下载文件的名称，例如：

```
public String getContentDisposition() {
    return "attachment;filename=\"" + fileName + "\"";
} 
```

还有一个 MIME 类型的吸气剂，比如

```
public String getContentType() {
    return "text/plain";
} 
```

显然将 MIME 设置为正确的类型。

所以你的基本`Action`看起来像这样

```
public class MyAction extends ActionSupport {

    private final File baseDownloadDir = new File("somewhere");
    private String fileName;
    private InputStream inputStream;
    private long fileSize;

    @Override
    public String execute() throws Exception {
        /*
         *This is a security hole begging to be exploited.
         *A user can submit "../../../../someImportantFile"
         *and potentially download arbitrary files from the server.
         *You really need to do some validation on the input!
         */ 
        final File fileToDownload = new File(baseDownloadDir, fileName);
        fileSize = fileToDownload.length();
        inputStream = new FileInputStream(fileToDownload);
        return "downloadFile";
    }

    public String getFileName() {
        return fileName;
    }

    public void setFileName(String fileName) {
        this.fileName = fileName;
    }

    public long getFileSize() {
        return fileSize;
    }

    public InputStream getFileToDownload() {
        return inputStream;
    }

    public String getContentDisposition() {
        return "attachment;filename=\"" + fileName + "\"";
    }

    public String getContentType() {
        return "text/plain";
    }
} 
```

然后您返回一个结果名称，让我们调用它`downloadFile`。

在您的动作映射中，您需要将该结果映射到 a `StreamResult`，这是一个 XML 示例

```
<result name="downloadFile" type="stream">
    <param name="inputName">fileToDownload</param>
    <param name="contentType">${contentType}</param>
    <param name="contentLength">${fileSize}</param>
    <param name="contentDisposition">${contentDisposition}</param>
    <param name="contentCharSet">UTF-8</param>
    <param name="allowCaching">true</param>
</result> 
```

您可能想要更改字符集。

# php - 为域名重写 URL

> ID：15974939
> 
> 赞同：0
> 
> 时间：2013-04-12T15:11:42.590
> 
> 标签：php, html, apache, http

好的，所以我与 godaddy 一起托管，并且我有 2 个网站与他们一起托管。我制定了一个 htaccess 规则并将其添加到我的主目录中，它会影响两个域名。我只是想知道是否可以添加任何内容以仅适用于一个域名？我的 mod 重写规则如下

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule (.*)_ index.php?pageid=$1 
```

当我将此添加到我的主目录时，它会影响我托管的两个网站。将这个 mysite.com?index.php 更改为这个 mysite.com/index_ 的规则

但是我是否说过我需要一些如何在其中设置域名的一些方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:57:34.520

在你之前添加这一行`RewriteRule`

```
RewriteCond %{HTTP_HOST} ^www.mydomainname.com$ 
```

您的规则将仅影响此域，您的 .htaccess 应如下所示：

```
Options +FollowSymLinks
RewriteEngine on
RewriteBase /
RewriteCond %{HTTP_HOST} ^www.mysite.com$
RewriteRule (.*) /index.php?pageid=$1 
```

这将匹配

```
http://www.mysite.com/week1 
```

并将其重写为

```
http://www.mysite.com/index.php?pageid=week1 
```

然后您可以访问`$_GET['pageid']`以获取值

# ruby - 寻找更优雅的解决方案

> ID：15974940
> 
> 赞同：-1
> 
> 时间：2013-04-12T15:11:43.237
> 
> 标签：ruby

我是 ruby​​ 新手，正在解决这样的问题：

有 n 个编号的字母和 n 个编号的信封。字母 x 不能放入信封 x 中。（OP 只想要索引 x-1 处没有 x 值的值）我想要的是打印出所有可能的情况。

Array + 1的索引--->信封号

Array的元素--->字母的个数

`Input: n = 3.`

`Output: [2, 3, 1], [3, 1, 2]`

`Input: n = 4.`

```
Output:   [2, 1, 4, 3], [2, 3, 4, 1], [2, 4, 1, 3], [3, 1, 4, 2],
          [3, 4, 1, 2], [3, 4, 2, 1], [4, 1, 2, 3], [4, 3, 1, 2],
          [4, 3, 2, 1] 
```

这是我的代码：

```
$nums = []
def f( already, n, times )
  if n > times
    $nums << already.dup
    return
  else
    1.upto(times) do |i|
      next if ((already.include? i) || n == i)
      already << i
      f( already, n+1, times )
      already.pop
    end
  end
end 
```

我正在寻找更优雅的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:17:49.250

使用[`permutation`](http://ruby-doc.org/core-2.0/Array.html#method-i-permutation)枚举器，拒绝所有与索引值`x-1`匹配的枚举器`x`：

```
def f(n, x)
  (1..n).to_a.permutation.reject{|p| p[x-1] == x}
end

> f 3, 3
  => [[1, 3, 2], [2, 3, 1], [3, 1, 2], [3, 2, 1]] 
> f 4, 4
  => [[1, 2, 4, 3], [1, 3, 4, 2], [1, 4, 2, 3], [1, 4, 3, 2], [2, 1, 4, 3], [2, 3, 4, 1], [2, 4, 1, 3], [2, 4, 3, 1], [3, 1, 4, 2], [3, 2, 4, 1], [3, 4, 1, 2], [3, 4, 2, 1], [4, 1, 2, 3], [4, 1, 3, 2], [4, 2, 1, 3], [4, 2, 3, 1], [4, 3, 1, 2], [4, 3, 2, 1]] 
```

**更新**

再次查看您的问题，不清楚您是否要使用特定的`x`，或者只是逻辑应该适用于`x`. 如果第二个猜测是您想要的，那么请改用它：

```
def f(n)
  (1..n).to_a.permutation.reject{|p| p.any?{|x| p[x-1] == x}}
end

> f 3
  => [[2, 3, 1], [3, 1, 2]] 
> f 4
  => [[2, 1, 4, 3], [2, 3, 4, 1], [2, 4, 1, 3], [3, 1, 4, 2], [3, 4, 1, 2], [3, 4, 2, 1], [4, 1, 2, 3], [4, 3, 1, 2], [4, 3, 2, 1]] 
```

# javascript - JavaScript 函数引用深度限制

> ID：15974942
> 
> 赞同：0
> 
> 时间：2013-04-12T15:11:55.073
> 
> 标签：javascript

我想知道 JavaScript 是否有任何功能深度限制。我问是因为我正在处理一个复杂的应用程序，不幸的是，我们无法更改数据结构。

例如，如果我尝试引用一个变量，例如：

`Thi.sIs.An.Except.ionally[345].LongF.unct.ional[z].Refer.ence.Thats[23].Sev.eral.Lay.ers[96].Deep`

我有时可以设置和获取`Deep`结构及其成员的值（如果它在同一个窗口中），但如果我将此元素包含在另一个类中或尝试从另一个页面引用它并设置 Deep 的成员，那么 deep 稍后会返回 null 或 undefined为其每个成员。浏览器不会抛出错误，我只是得到意外的行为。

编辑：我想补充一点，我试图`Deep`从嵌套框架中引用同一域上至少三个级别。例如，框架需要`Deep`在 frame中引用`Course`，从主框架向下两层，但在需要访问它的框架的单独分支上。我们继承的应用程序使用框架，但这些可以更改为 iframe。将这些更改为 iframe 也可以吗？

```
parent.Topic.Course.Thi.sIs.An.Except.ionally[345].LongF.unct.ional[z].Refer.ence.Thats[23].Sev.eral.Lay.ers[96].Deep 
```

有什么我在这里想念的吗？或者某种关于 JavaScript 功能深度的参考？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:22:43.163

您可以嵌套对象的距离似乎没有任何限制（或者如果它非常高）。此代码工作正常（注意我测试这是在 chrome 中）：

```
var ctr=1, obj={};
while( ctr < 1000000 ){ // 1 million
    obj = obj.obj = {}; ctr++;
}; 
```

我感觉您的问题与您尝试“从另一个页面”访问此内容有关。您可以发布与此相关的代码吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:47:37.690

Javascript 中的嵌套对象不应该有*固有*的限制，这取决于特定的设计实现。它应该取决于 Javascript 运行时可用的内存量。

Javascript 对象具有属性。如果你有一个 23 级的深层次结构`foo.bar.baz.quux[23].figaro.figaro.figaro...`，那么顶层对象“看到”的唯一东西就是它的直接子属性：`foo`有一个属性`bar`，它本身就是一个对象。中包含的值`foo.bar`不会`foo`以任何方式产生影响。（从`foo`的角度来看，它是一个对象引用，就像 C 中的指针。）类似地，对象`foo.bar`有一个子属性`baz`，它本身就是一个对象。

请注意，您可以在属性访问中有循环，因此从技术上讲，您*可以*拥有无​​限级别的“嵌套”。这是 JSDB javascript shell 中的一个示例，其中对象`foo`和`bar`每个对象都有另一个作为属性：

```
js>foo = {}
[object Object]
js>foo.foo = foo
[object Object]
js>foo.foo.foo.foo.foo
[object Object]
js>foo = {x: 1}
[object Object]
js>bar = {y: 2}
[object Object]
js>foo.bar = bar
[object Object]
js>bar.foo = foo
[object Object]
js>foo.bar.foo.bar.foo.bar.foo.bar.foo.bar.y
2 
```

这些对象*无法*在 JSON 中序列化，因为它们具有引用循环。

* * *

如果您遇到的限制*不是*内存问题，则与核心语言无关，而可能与浏览器中遇到的对象模型的某些方面有关。（例如，如果对象模型是用 C 或 Java 实现并暴露给 Javascript，那么 C/Java 实现中可能存在错误或“怪癖”。）

# ruby-on-rails - ember js 中的关联

> ID：15974945
> 
> 赞同：0
> 
> 时间：2013-04-12T15:11:59.523
> 
> 标签：ruby-on-rails, ember.js

我有两个模型**Users**和**Recipes**。用户可以创建食谱，用户可以将食谱添加到收藏夹。

在 Rails 中，我在用户模型中与收藏夹模型（user_id，recipe_id）有这样的关联。我已经有最喜欢的用户食谱。如何获取当前用户创建的食谱？

```
has_many :favorites
has_many :recipes
has_many :recipesbox, through: :favorites, source: :recipe 
```

当我尝试在 Ember js 中进行此操作时，我遇到了麻烦。

user_serializer.rb

```
class UserSerializer < ActiveModel::Serializer
  attributes :id, :name, :email
  has_many :recipes, embed: :ids
  has_many :recipesbox, through: :favorites, embed: :ids
end 
```

用户.js.coffee

```
App.User = DS.Model.extend
  name: DS.attr('string')
  email: DS.attr('string')
  recipes: DS.hasMany('App.Recipe') 
```

recipe.js.coffee

```
App.Recipe = DS.Model.extend
  user: DS.belongsTo('App.User')
  title: DS.attr('string') 
```

用户.hbs

```
<h1>{{name}}</h1>
<p><b>Email:</b> {{email}}</p>
<h3>Favorites</h3>
{{#each recipe in recipes}}
  <div>
    <span>{{recipe.id}}</span>
    <span>{{recipe.title}}</span>
  </div>
{{/each}} 
```

我的序列化用户是：

```
{
  user: {
    id: 1,
    name: "ejiqpep",
    email: "ejiqpep@gmail.com",
    recipe_ids: [
      4,
      5
    ],
    recipesbox_ids: [
      4,
      1,
      2,
      3
    ]
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:49:16.150

关于什么

```
App.User = DS.Model.extend
  name: DS.attr('string')
  email: DS.attr('string')
  recipes: DS.hasMany('App.Recipe')
  favorites: DS.hasMany('App.Favorite') 
```

然后分别是模型

```
App.Favorite = DS.Model.extend({..}); 
```

# flash - 当页面上的flash对象小于对话框大小时如何打开flash安全设置

> ID：15974962
> 
> 赞同：0
> 
> 时间：2013-04-12T15:12:54.797
> 
> 标签：flash

如果页面上 Flash 播放器的窗口小于上下文菜单中安全设置对话框的大小，则“参数...”项会消失。

对话也不能从 actionscript (Security.showSettings("privacy");) 调用。

有哪些方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:08:10.877

除了调整 swf 的大小之外，您无法以其他方式解决它。这写在 Adob​​e 官方 Web 应用程序开发指南的某处。

# android - Triggering a map event (like a marker click) in Google maps Android V2

> ID：15974973
> 
> 赞同：20
> 
> 时间：2013-04-12T15:13:16.910
> 
> 标签：android, google-maps, google-maps-markers, google-maps-android-api-2

I am trying to trigger a marker click (or other map events too) programmatically in Google maps API for android V2\. Does anyone have an idea as to how to do it ?

Apparently javascript api (v3) , has a trigger function but I could'nt find anything for android.

Thanks for the help.

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-14T13:49:23.880

您不能直接触发标记单击。

如果你需要在 onMarkerClick 返回 false 时运行默认实现（或者你没有 OnMarkerClickListener），你需要自己做：

```
marker.showInfoWindow();
map.animateCamera(CameraUpdateFactory.newLatLng(marker.getPosition()), 250, null); 
```

此处假定为 250，API 不会为您提供内部用于此默认标记点击行为的值。

如果你有一个 OnMarkerClickListener，你可以只保留引用并在其上调用一个函数，将标记作为参数发送。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T17:20:11.470

有一个很好的教程来检测谷歌地图 V2 上的标记点击：[http ://android-er.blogspot.in/2013/01/google-maps-android-api-v2-example_5213.html](http://android-er.blogspot.in/2013/01/google-maps-android-api-v2-example_5213.html)

希望这会帮助你。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-13T01:32:33.440

[OnMapClickListener](http://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.OnMapClickListener.html)是一个接口，可用于检测 Google Maps V2 上的点击。类似于 js 中的“触发器”。您为特定事件设置了一个侦听器，然后等到您得到一些。然后你声明一个方法并处理事件。

# sql-server - Where are stored procedures stored at? Does it create an execution plan when you create it?

> ID：15974978
> 
> 赞同：1
> 
> 时间：2013-04-12T15:13:35.283
> 
> 标签：sql-server, stored-procedures

Where is the execution plan for a stored procedure stored at? When you create a stored procedure does it create an execution plan then or do you have to run it once before anything is created?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:48:59.357

执行计划是在存储过程第一次**运行**时创建的- 它存储在（易失性）计划缓存中。

如果服务器太忙并且需要空间来缓存更新的执行计划，或者如果 SQL Server 服务关闭，则该缓存将消失，并且下一次需要解析该过程并再次确定执行计划.

仅仅通过创建存储过程，您就**不会**存储任何执行计划——存储过程不是*预编译的*或类似的东西，正如民间传说经常声称的那样。事实并非如此。

事实上，在您创建存储过程时，SQL Server 甚至不会检查对象是否存在。您完全可以创建一个从不存在的表中选择的存储过程 - 它会被创建得很好。该错误仅在运行时发生 - 一旦第一次尝试构建执行计划（当然，此时表不存在的事实将导致错误）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:20:48.117

存储过程主体存储在系统表中。该计划在每次执行时都会被缓存和重用，虽然是的，但首先必须在第一次执行时创建它。

# c# - 从 linux C 到 Windows C# 的套接字问题

> ID：15974979
> 
> 赞同：0
> 
> 时间：2013-04-12T15:13:36.917
> 
> 标签：c#, c, linux, sockets

这就是我正在做的事情。基本上，我在 linux C 中有一些代码处理一堆数据，然后我需要将这些数据发送到可以“实时”绘制数据的 C# 应用程序。所以我所做的就是将数据保存到一个文件中，让 C# 应用程序只监视文件更改，然后更新图表。但这真的没有那么好。该文件正在读取它正在更频繁地更改而不是它并不有趣。因此，在听取了一些有用的人的建议后，我决定学习如何使用套接字发送数据。

这就是我现在正在做的事情。C 中的处理数据使用套接字内容发送到 C#。完全有效。但问题就在这里。我需要在发送信息后使用 usleep(10000) ，或者使用 getchar() 并慢慢发送每个值。否则，我在尝试将发送的值转换为双精度时出现错误。

错误读取“System.FormatException：输入字符串的格式不正确。在 System.Number.ParseDouble（字符串值，NumberStyles 选项，NumberFormatInfo numfmt）。

```
sprintf(line, "%.4f", value[i][j]);
write(sock, line, 128);
usleep(10000); 
```

C# 代码取自此处的示例：http: [//www.codeproject.com/Articles/463947/Working-with-Sockets-in-Csharp](http://www.codeproject.com/Articles/463947/Working-with-Sockets-in-Csharp)

问题在这里：

```
content = Encoding.ASCII.GetString(buffer, 0, bytesRead);
chart4.Series["Graph"].Points.Add(Convert.ToDouble(content.ToString())); 
```

那么为什么当我在发送数据后暂停时它会起作用，但如果我不暂停就发送它就不行呢？我发送的太快了吗？

另外，如果我有 4 个不同的图表需要接收恒定的数据流，我应该有 4 个不同的套接字，每个套接字都有不同的端口号，这样我就知道哪个正在接收数据？对不起菜鸟问题。我正在尝试自己学习这些东西。我还在上学，还没有学到任何类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:17:29.003

TCP 套接字是流。他们没有消息的概念。当您发送太快时，一个呼叫中会收到多个发送呼叫，这会导致尝试解析多个号码的一部分。

我建议您选择以下选项之一：

1.  在每个样本之间添加分隔符。
2.  使用基于消息而不是基于流的协议。
3.  编写固定大小的消息。例如，只需发送原始的 8 个字节`double`并使用 a`BinaryReader`来读取它们。

# c++ - C++ native to C++/CX: How do I turn a std::vector into a IVector?

> ID：15974981
> 
> 赞同：0
> 
> 时间：2013-04-12T15:13:38.200
> 
> 标签：c++, generics, struct, stdvector

I'm pretty new to programming in C++. I've done some C# over the years, but I wouldn't say I am proficient at it. I'm trying to change some code from native c++ to C++/CX and keep hitting lots of compiler errors, specifically in concern to vectors. I've been reading through [MSDN - Collections (C++/CX)](http://msdn.microsoft.com/en-us/library/windows/apps/hh700103.aspx/ "Collections (C++/CX)") and gathered that I need to use an IVector.

I have a struct defined in another header file:

```
typedef struct myStruct{
 float p;
 double x;
 double y;
 uint id;
} 
```

I used a vector of this struct as a parameter in a method declaration:

```
void ProcessStruct (std::vector<myStruct> myStructs){} 
```

When converting it to an IVector, like so:

```
void ProcessStruct (Windows::Foundation::Collections::IVector<myStruct>^ myStructs){} 
```

I always end up getting compiler error [C3225](http://msdn.microsoft.com/en-us/library/7ka8tbxh.aspx): "generic type argument for 'arg' cannot be 'type', it must be a value type or handle type". I tried using using `IVector<myStruct^>^` instead, but then I just end up with C3699: "operator' : cannot use this indirection on type 'type'"

So I guessing my only option is to create a generic , but here I get very confused as to what I am actually supposed to be doing. How do I take a struct and turn it in to a generic? What is std::vector doing that IVector cannot?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T01:26:57.220

首先你需要使用 Platform::Collections::Vector 而不是 std::vector。它们的工作原理基本相同，因为它们的行为都类似于向量，但是 Platform::Collections::Vector 是一个 WRT 对象，这就是我们使用 ^（帽子指针）来处理它们的原因。

我像这样使用它：

```
public ref class Something{
public:
    property Windows::Foundation::Collections::IVector<int>^ num{
        void set(Windows::Foundation::Collections::IVector<int>^ e){
            NUM = static_cast<Platform::Collections::Vector>(e);
        };
        Windows::Foundation::Collections::IVector<int>^ get(){
            return NUM;
        };
    };

private:
    Platform::Collections::Vector<int>^ NUM;
}; 
```

从某种意义上说，您将 IVector 用作属性（因为属性可以是公共成员），然后将其转换为 c++/cx Vector。稍后当您需要它时，使用 IVector 作为返回 Vector 的媒介。

另请注意，set 函数的参数是 IVector，get 函数也是 IVector 类型。

一些帮助的代码:)

```
void Something::SomeFunction(){
num = ref new Vector<int>;  //make num point to a new Vector<int>

num->Append(5);             //Take the number 5 cast it from IVector to Vector
                            //and store it in NUM. (The cast happens due to
                            //the code in the IVector property we made)

int TempNum = 7 + num->GetAt(0);    //Use num to get the first element of NUM and 
                                    //add 7 to it. (It's now 10, I mean 12)

num->InsertAt(0, T);                //Take T (12) and replace it with the first
                                    //element in NUM.
}; 
```

请记住，当我们对 num 做某事时，它会被强制转换，而不是对 NUM 做。这就是为什么有一个接口，它们帮助我们在 Java、C# 等之间使用向量（或任何其他东西，如字符串或映射）。

# javascript - jQuery .val() 方法只给我第一个输入的值

> ID：15974991
> 
> 赞同：0
> 
> 时间：2013-04-12T15:13:58.163
> 
> 标签：javascript, jquery, jquery-ui

我正在使用 jQuery UI 对话框输入图像的 URL。我正在使用以下方法：

```
 <input id="dlg" value="Open Dialog" type="button" />

<script type="text/javascript">
var img = '<div id="dialog" title="Insert Image" style="width:500px;height:300px">';
img += '<table><tr><td style="width:100px">';
img += 'Image URL: </td><td><input id="txt" type="text" value="" size="52" /></td>';
img += '</tr></table></div>';

$('#dlg').click(function(){

$(img).dialog({buttons: {'Ok':function(){
    var value = $("#txt").val();
    var http = value.substr(0,7);

    alert(value);

    $(this).dialog('close');
}}},

 { closeOnEscape:true, resizable:false, width:600, height:200

 });

});
</script> 
```

当我按下`(<input id="dlg" value="Open Dialog" type="button" />)`按钮时，会出现一个对话框，其中包含一个文本框输入字段。当我在文本字段中输入任何值时，它会提醒该值。但是当我第二次或第三次按下按钮并在对话框的文本框中输入一些其他值，然后按确定时，它会提醒我第一次输入的值。所以，无论我点击按钮多少次并输入任何值，它都会提醒我第一次输入的值。

我`var value = $("#txt").val();`是否使用此方法正确获取文本框值？如果是，那么为什么它给了我第一次输入的值。

注意：我已经多次清除浏览器的缓存，所以不会出现任何缓存问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:18:54.173

问题是每次调用它时，您都在制作对话框的新副本。这意味着您有多个具有相同名称的元素。为避免这种情况，您需要在关闭对话框后将其销毁。

改变：

```
$(this).dialog('close'); 
```

到

```
$(this).dialog('close').dialog("destroy"); 
```

其他选择是创建元素一次然后重用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:19:34.143

在我看来，txt 项目被多次创建。完成后，您需要从 DOM 中删除该项目。

在这个部分

```
$(img).dialog({buttons: {'Ok':function(){
    var value = $("#txt").val();
    var http = value.substr(0,7);

    alert(value);

    // save value somewhere

    $("#txt").remove();

    $(this).dialog('close');
}}}, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T15:21:59.027

这是因为每次创建对话框时都在创建 dom 结构，所以每次请求时都会获取第一个创建的输入框`$("#txt")`。

所以解决方案是在小部件关闭时删除完整的dom结构

```
$(img).dialog({
    buttons: {
        'Ok':function(){
            var value = $("#txt").val();
            var http = value.substr(0,7);

            alert(value);

            $(this).dialog('close');
        }
    },
    close: function(){
        $(this).remove()
    },

    closeOnEscape:true, 
    resizable:false, 
    width:600, 
    height:200
 }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T15:22:43.783

> 无论我点击按钮多少次并输入任何值，它都会提醒我第一次输入的值。
> 
> 我`var value = $("#txt").val();`是否使用此方法正确获取文本框值？

是的。

> 如果是，那么为什么它给了我第一次输入的值。

因为`$("#txt")`指的是 DOM 中具有该 id 的第一个元素。每次单击时，您都可以从`img`字符串动态创建元素，并通过小部件将它们附加到 DOM `dialog`。然而，调用它的`close`方法只会隐藏它们，但不会将它们从 DOM 中删除，因此点击处理程序总是`value`从第一个创建的输入中提取它。

尝试调用该[`destroy`方法](http://api.jqueryui.com/dialog/#method-destroy)：

```
$(this).dialog('close').dialog("destroy"); // not sure whether the "close" is still necessary 
```

或者您只创建一次对话框，`open`每次点击都会创建。

# ruby - 重现随机数组排序

> ID：15974992
> 
> 赞同：11
> 
> 时间：2013-04-12T15:14:03.623
> 
> 标签：ruby, arrays, random

我有一个要随机排序的对象数组。对于这种情况，我可以使用`array.shuffle`. 但是，如果我想稍后在同一个数组上重现该订单怎么办？有什么方法可以提供种子、随机数等，以便我以后可以重现这个序列？

我想从 MongoDB 数据库（使用 MongoID）生成一个随机的对象列表，并且该列表必须在以后复制。但据我所知，没有真正好的方法可以直接在 MongoDB 中实现随机排序。可能有很多对象（> 1,000,000），但计算时间是第一次尝试，而不是重要的事实。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-12T15:20:48.853

如果您查看[Ruby 文档，`Array#shuffle`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-shuffle)您会发现您可以将 a`Random`作为生成器传递；如果您`Random`每次使用相同的种子传递一个新的随机播放，它会给出相同的结果。

```
>> arr = %w{John Paul George Ringo}
=> ["John", "Paul", "George", "Ringo"]
>> arr.shuffle(random: Random.new(1))
=> ["Ringo", "John", "George", "Paul"]
>> arr.shuffle(random: Random.new(1))
=> ["Ringo", "John", "George", "Paul"]
>> arr.shuffle(random: Random.new(1))
=> ["Ringo", "John", "George", "Paul"] 
```

编辑：这可以扩展为`Array#shuffle`产生*多个*可重复的洗牌，这样每个单独的洗牌和洗牌序列都可以重复，通过使用一个`Random`（而不是每次一个新的）并用相同的种子更新它来重复：

```
>> arr = [1, 2, 3, 4] => [1, 2, 3, 4]
>> r = Random.new(17) => #<Random:0x000000017be4d0>
>> arr.shuffle(random: r) => [3, 1, 4, 2]
>> arr.shuffle(random: r) => [1, 3, 2, 4]
>> arr.shuffle(random: r) => [4, 3, 2, 1]
>> r = Random.new(17) => #<Random:0x00000001c60da8>
>> arr.shuffle(random: r) => [3, 1, 4, 2]
>> arr.shuffle(random: r) => [1, 3, 2, 4]
>> arr.shuffle(random: r) => [4, 3, 2, 1]
>> etc.
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T15:18:04.940

通过查看方法的来源（[http://ruby-doc.org/core-2.0/Array.html#method-i-shuffle](http://ruby-doc.org/core-2.0/Array.html#method-i-shuffle)），看起来它正在放入 Ruby 随机数生成器进行排序。

如果是，您可以设置种子

```
srand *seed number* 
```

在运行脚本之前。虽然我不是 100% 的，但它似乎有效，但我肯定会为它编写单元测试！

# java - 表格布局或自定义列表视图布局

> ID：15974993
> 
> 赞同：0
> 
> 时间：2013-04-12T15:14:03.943
> 
> 标签：java, android, android-tablelayout

谁能告诉我在android中创建这种类型的视图需要使用什么布局。我想去`TableLayout`，但我不确定这一点。

谁可以帮我这个事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:29:31.527

如果工作表的内容是动态的，那么也许 a`ListView`会更合适，因为要更新列表，您唯一要做的就是通知适配器数据集已更改。

另一个需要考虑的选择是`ExpandableListView`. 这与 ListView 的不同之处在于允许两个级别：可以单独展开以显示其子级的组。

（`ExpandableListView`如果您不想让它可扩展，可以将其设置为默认扩展。）

# entity-framework - Breeze 基于列的安全性

> ID：15974999
> 
> 赞同：0
> 
> 时间：2013-04-12T15:14:16.663
> 
> 标签：entity-framework, breeze

我有一个使用 Breeze 的“网络表单”、“数据库优先实体”项目。我有一个包含敏感数据（例如 SSN#）的“人员”表。目前我有一个用于 GetPeople 的 IQueryable web api。

我正在处理的当前页面是“管理人员”屏幕，但它不用于编辑或查看 SSN#。我想我知道如何使用 BeforeSaveEntity 来确保用户将无法保存 SSN 更改，但是有没有办法不将 SSN#s 传递给客户端？

注意：我宁愿只使用一个 EDMX 文件。现在，我能看到的唯一方法是在数据库中为我要传递给客户端的每组数据都有一个“视图”，这些数据与表不完全匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T15:58:46.907

您还可以使用 JSON.NET 序列化属性来抑制 SSN 从服务器到客户端的序列化。请参阅有关序列化属性的 JSON.NET 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T01:53:37.587

分开你的桌子。（目前，这是唯一想到的解决方案。）

将您的 SSN 数据放在具有相关键（1 对 1 关系）的另一个表中，问题将得到解决。（只需处理您的保存以备不时之需。）

如果您使用的是 Breeze，它会起作用，因为您几乎无法控制用户登录后的 Breeze API 交互，因此分离数据更安全。（微风通常很棒，但在这种情况下它是有害的。）