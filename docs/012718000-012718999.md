# StackOverflow 问答 12718000-12718999

# php - 树枝模板内的php函数

> ID：12718005
> 
> 赞同：2
> 
> 时间：2012-10-03T22:52:00.640
> 
> 标签：php, symfony, twig

我有一个树枝模板，我在其中呈现了从数据库中获取的一些信息。信息的长度很大，不适合为其提供的空间。我想在我的树枝模板中使用php 的**substr**函数。

index.html.twig 包含

```
 <span>{{ patent.description }}</span> 
```

描述很长我想显示整个描述的前 80 个字符。

在php中我可以使用

```
 substr(patent.description,0,80) 
```

谁能指导我如何在我的树枝模板中使用这个功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T22:59:34.550

切片函数执行此操作，

```
<span>{{ patent.description|slice(0,80) }}</span> 
```

切片过滤器用作数组的 array_slice PHP 函数和字符串的 substr。它是在 Twig 1.6 中添加的。

# c++ - 如果小数位数大于 0，如何仅使用 printf 打印小数？

> ID：12718007
> 
> 赞同：2
> 
> 时间：2012-10-03T22:52:04.997
> 
> 标签：c++, floating-point, printf

我将如何使用 printf() 函数打印浮点数，以使我只打印不为 0 的小数部分？例子：

```
1.0 -> 1
2.0 -> 2
1.5 -> 1.5
2.25 -> 2.25 
```

等等

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T22:57:45.263

```
printf("%g\n",5.0);
printf("%g\n",5.1); 
```

# sql - 引起：javax.persistence.PersistenceException：插入对象

> ID：12718009
> 
> 赞同：0
> 
> 时间：2012-10-03T22:52:13.480
> 
> 标签：sql, jpa, persistence

SRAssignment.java

```
@Entity
@Table(name="SR_ASSIGNEMENT", uniqueConstraints= { @UniqueConstraint
(columnNames="SRAID")})
@SequenceGenerator(name="SRASSIGNMENT_SEQUENCE", initialValue=1, allocationSize=1)
public class SRAssignment implements Serializable{

@Id @GeneratedValue(strategy=GenerationType.SEQUENCE, 
generator="SRASSIGNMENT_SEQUENCE")
@Column(name="SRAID", nullable=false)
private long sraId;

@ManyToOne(fetch=FetchType.LAZY)
@JoinColumn(name="EMPNO")
private Employee employee;

@OneToOne(fetch=FetchType.EAGER, mappedBy="srNo", optional=false)
private ServiceRequest serviceRequest;

@ManyToOne(fetch=FetchType.LAZY)
@JoinColumn(name="assignedBy")
private Employee assignedBy;

@Column(name="ASSIGNEDON")
@Temporal(TemporalType.TIMESTAMP) 
private Date assignedOn;

@OneToOne(fetch=FetchType.LAZY, optional=true, mappedBy="slotNo")
private ScheduleSlot startSlot;

@OneToOne(fetch=FetchType.LAZY , optional=true, mappedBy="slotNo")
private ScheduleSlot expectedEndSlot;

@OneToOne(fetch=FetchType.LAZY , optional=true, mappedBy="slotNo")
private ScheduleSlot actualEndSlot;

@Column(name="SRA_COMMENT", nullable=true)
private String comment;

@Column(name="ATTACHMENT", nullable=true)
private Object attachment;

.... 
```

服务请求.java

```
@Entity
@Table(name="SERVICE_REQUEST", uniqueConstraints = {@UniqueConstraint(columnNames=     
{"SRNO"})})
@SequenceGenerator(name="SERVICE_REQUEST_SEQUENCE", initialValue=1, allocationSize=100)
public class ServiceRequest implements Serializable {

@Id @GeneratedValue(strategy=GenerationType.SEQUENCE, 
generator="SERVICE_REQUEST_SEQUENCE")
@Column(name="SRNO",  nullable=false)
private long srNo;

@Column(name="DESCRIPTION")
private String description;

@Column(name="STATUS") 
private int status;

@ManyToOne(fetch=FetchType.LAZY)
@JoinColumn(name="CUSTNO", referencedColumnName="CustNO")
private Customer customer;

@Column(name="DATECREATED")
private Date dateCreated;

@Column(name="DATEUPDATED")
private Date dateUpdated;
...

ServiceRequest request = workPersistence.getRequestById(assigner.getRequestId());
Employee employee = workPersistence.getEmployeeById(assigner.getTechnician());
Employee manager = workPersistence.getEmployeeById(assigner.getAssignedBy());
SRAssignment assignment = new SRAssignment();

assignment.setEmployee(employee);
assignment.setAssignedBy(manager);
assignment.setServiceRequest(request);
assignment.setAssignedOn(Calendar.getInstance().getTime());

EntityManager em = entityManagerFactory.createEntityManager();
EntityTransaction tx = em.getTransaction();
tx.begin();
em.persist(assignment);
em.refresh(assignment);
System.out.println("refresh assignment, now commiting...");
tx.commit(); 
```

我得到的错误是：

刷新分配，现在提交... javax.persistence.RollbackException：事务未能在 com.ge.dsp.iwork.persistence.JpaWorkPersistence 的 org.datanucleus.api.jpa.JPAEntityTransaction.commit(JPAEntityTransaction.java:118) 处提交。 assignRequest(JpaWorkPersistence.java:417) 在 com.ge.dsp.iwork.impl.WorkServiceImpl.getRequestAssigned(WorkServiceImpl.java:146) 在 com.ge.dsp.iwork.impl.WorkServiceImpl.assignRequest(WorkServiceImpl.java:112)在 com.ge.dsp.iwork.test.WorkServiceTest.testServiceRequestAssignment(WorkServiceTest.java:85) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun .reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java。lang.reflect.Method.invoke(Method.java:597) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1581) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods( AbstractAutowireCapableBeanFactory.java:1522) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519) at org .springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) 在 org.springframework.beans.factory.support。AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294) at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225) at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java :291) 在 org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609) 在 org.springframework 的 org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)。 context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.access$1600(AbstractDelegatedExecutionApplicationContext.java:69) 在 org.springframework.osgi.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:85) 在 org.springframework.osgi.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:85) 在 org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext$4.run(AbstractDelegatedExecutionApplicationContext.java:355)。 springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.completeRefresh(AbstractDelegatedExecutionApplicationContext.java:320) 在 org.springframework.osgi.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor$CompleteRefreshTask.run(DependencyWaiterApplicationContextExecutor.java:132) 在 java.lang。 Thread.run(Thread.java:662) 引起：javax.persistence.PersistenceException：使用语句插入对象“com.ge.dsp.iwork.entity.SRAssignment@7edab86b”springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext$4.run(AbstractDelegatedExecutionApplicationContext.java:355) at org.springframework.osgi.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:85) at org.springframework.osgi.context.support .AbstractDelegatedExecutionApplicationContext.completeRefresh(AbstractDelegatedExecutionApplicationContext.java:320) at org.springframework.osgi.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor$CompleteRefreshTask.run(DependencyWaiterApplicationContextExecutor.java:132) at java.lang.Thread.run(Thread.java :662) 引起：javax.persistence.PersistenceException：使用语句插入对象“com.ge.dsp.iwork.entity.SRAssignment@7edab86b”springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext$4.run(AbstractDelegatedExecutionApplicationContext.java:355) at org.springframework.osgi.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:85) at org.springframework.osgi.context.support .AbstractDelegatedExecutionApplicationContext.completeRefresh(AbstractDelegatedExecutionApplicationContext.java:320) at org.springframework.osgi.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor$CompleteRefreshTask.run(DependencyWaiterApplicationContextExecutor.java:132) at java.lang.Thread.run(Thread.java :662) 引起：javax.persistence.PersistenceException：使用语句插入对象“com.ge.dsp.iwork.entity.SRAssignment@7edab86b”AbstractDelegatedExecutionApplicationContext$4.run(AbstractDelegatedExecutionApplicationContext.java:355) at org.springframework.osgi.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:85) at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.completeRefresh(AbstractDelegatedExecutionApplicationContext.java :320) at org.springframework.osgi.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor$CompleteRefreshTask.run(DependencyWaiterApplicationContextExecutor.java:132) at java.lang.Thread.run(Thread.java:662) 原因：javax。 persistence.PersistenceException：使用语句插入对象“com.ge.dsp.iwork.entity.SRAssignment@7edab86b”AbstractDelegatedExecutionApplicationContext$4.run(AbstractDelegatedExecutionApplicationContext.java:355) at org.springframework.osgi.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:85) at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.completeRefresh(AbstractDelegatedExecutionApplicationContext.java :320) at org.springframework.osgi.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor$CompleteRefreshTask.run(DependencyWaiterApplicationContextExecutor.java:132) at java.lang.Thread.run(Thread.java:662) 原因：javax。 persistence.PersistenceException：使用语句插入对象“com.ge.dsp.iwork.entity.SRAssignment@7edab86b”355) 在 org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.completeRefresh(AbstractDelegatedExecutionApplicationContext.java:320) 在 org.springframework.osgi 的 org.springframework.osgi.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:85) .extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor$CompleteRefreshTask.run(DependencyWaiterApplicationContextExecutor.java:132) at java.lang.Thread.run(Thread.java:662) 原因：javax.persistence.PersistenceException：插入对象“com .ge.dsp.iwork.entity.SRAssignment@7edab86b" using 语句355) 在 org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.completeRefresh(AbstractDelegatedExecutionApplicationContext.java:320) 在 org.springframework.osgi 的 org.springframework.osgi.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:85) .extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor$CompleteRefreshTask.run(DependencyWaiterApplicationContextExecutor.java:132) at java.lang.Thread.run(Thread.java:662) 原因：javax.persistence.PersistenceException：插入对象“com .ge.dsp.iwork.entity.SRAssignment@7edab86b" using 语句AbstractDelegatedExecutionApplicationContext.completeRefresh(AbstractDelegatedExecutionApplicationContext.java:320) at org.springframework.osgi.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor$CompleteRefreshTask.run(DependencyWaiterApplicationContextExecutor.java:132) at java.lang.Thread.run(Thread.java: 662）引起：javax.persistence.PersistenceException：使用语句插入对象“com.ge.dsp.iwork.entity.SRAssignment@7edab86b”AbstractDelegatedExecutionApplicationContext.completeRefresh(AbstractDelegatedExecutionApplicationContext.java:320) at org.springframework.osgi.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor$CompleteRefreshTask.run(DependencyWaiterApplicationContextExecutor.java:132) at java.lang.Thread.run(Thread.java: 662）引起：javax.persistence.PersistenceException：使用语句插入对象“com.ge.dsp.iwork.entity.SRAssignment@7edab86b”persistence.PersistenceException：使用语句插入对象“com.ge.dsp.iwork.entity.SRAssignment@7edab86b”persistence.PersistenceException：使用语句插入对象“com.ge.dsp.iwork.entity.SRAssignment@7edab86b”**"INSERT INTO SR_ASSIGNEMENT (ASSIGNEDBY,SRA_COMMENT,EMPNO,ASSIGNEDON,SRAID) VALUES (?,?,?,?,?)" 失败：ORA-01400: 无法将 NULL 插入 ("DSP_QA_4"."SR_ASSIGNEMENT"."SRNO" )**

```
 at org.datanucleus.api.jpa.NucleusJPAHelper.getJPAExceptionForNucleusException(NucleusJPAHelper.java:270)
    at org.datanucleus.api.jpa.JPAEntityTransaction.commit(JPAEntityTransaction.java:116)
    ... 25 more 
```

引起：java.sql.SQLIntegrityConstraintViolationException：ORA-01400：无法将 NULL 插入（“DSP_QA_4”。“SR_ASSIGNEMENT”。“SRNO”）

```
 at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:439)
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:395)
    at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:802)
    at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:436)
    at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:186)
    at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:521)
    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:205)
    at oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:1008)
    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1307)
    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3449)
    at oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:3530)
    at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeUpdate(OraclePreparedStatementWrapper.java:1350)
    at org.datanucleus.store.rdbms.datasource.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
    at org.datanucleus.store.rdbms.datasource.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
    at org.datanucleus.store.rdbms.SQLController.executeStatementUpdate(SQLController.java:419)
    at org.datanucleus.store.rdbms.request.InsertRequest.execute(InsertRequest.java:411)
    at org.datanucleus.store.rdbms.RDBMSPersistenceHandler.insertTable(RDBMSPersistenceHandler.java:166)
    at org.datanucleus.store.rdbms.RDBMSPersistenceHandler.insertObject(RDBMSPersistenceHandler.java:142)
    at org.datanucleus.state.JDOStateManager.internalMakePersistent(JDOStateManager.java:2377)
    at org.datanucleus.state.JDOStateManager.flush(JDOStateManager.java:3769)
    at org.datanucleus.ObjectManagerImpl.flushInternalWithOrdering(ObjectManagerImpl.java:3884)
    at org.datanucleus.ObjectManagerImpl.flushInternal(ObjectManagerImpl.java:3807)
    at org.datanucleus.ObjectManagerImpl.flush(ObjectManagerImpl.java:3747)
    at org.datanucleus.ObjectManagerImpl.preCommit(ObjectManagerImpl.java:4137)
    at org.datanucleus.ObjectManagerImpl.transactionPreCommit(ObjectManagerImpl.java:428)
    at org.datanucleus.TransactionImpl.internalPreCommit(TransactionImpl.java:400)
    at org.datanucleus.TransactionImpl.commit(TransactionImpl.java:288)
    at org.datanucleus.api.jpa.JPAEntityTransaction.commit(JPAEntityTransaction.java:103)
    ... 25 more 
```

**为什么它没有获得 serviceRequest 信息并且没有让 SRNO 插入到分配中？当我尝试以下操作时，也处于相同的关系：**

```
EntityManager em = entityManagerFactory.createEntityManager();
Query query = em
.createQuery(
"SELECT assignment FROM SRAssignment assignment WHERE assignment.sraId = :sraId")
            .setParameter("sraId", new Long(assignmentId));
List<SRAssignment> assignments = query.getResultList();
SRAssignment sra = (SRAssignment) assignments.get(0);
    System.out.println(sra.getSraId());
    System.out.println(sra.getEmployee().getEmpNo());
    System.out.println("________________________________________");
    System.out.println(sra.getServiceRequest().getSrNo());
    System.out.println();
    em.close(); 
```

一旦我点击 **System.out.println(sra.getServiceRequest().getSrNo());**

我收到错误： ***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* ___** 线程“SpringOsgiExtenderThread-88”org.springframework.beans.factory.BeanCreationException 中的异常：在 URL [bundle://178.33:0/META-INF/spring/module-context.xml] 中定义名称为“testGetAssignmentById”的 bean 创建错误: init 方法调用失败；嵌套异常是 javax.persistence.PersistenceException: Cannot perform operation "==" on org.datanucleus.store.rdbms.sql.expression.ObjectExpression@843249a 和 org.datanucleus.store.rdbms.sql.express ion.NumericExpression@7017feb2 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519) 在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:25:07.080

ok I got it now... The JPA spec does not allow a uni-direction OneToOne with the foreign key in the target table. It requires to define a OneToOne in both directions .. so i have defined onetoone in serviceRequest to use a myppedBy... I modified SRAssignment as:

```
@OneToOne(fetch=FetchType.LAZY )
@JoinColumn(name="SRNO", nullable=false)
private ServiceRequest serviceRequest; 
```

and ServiceRequest as:

```
@OneToOne (fetch=FetchType.LAZY, optional=true,  mappedBy="serviceRequest")
private SRAssignment assignment; 
```

Thanks

# php - PHP CURL 和 DOMDocument 错误

> ID：12718011
> 
> 赞同：0
> 
> 时间：2012-10-03T22:52:20.990
> 
> 标签：php, url, curl, domdocument

我正在尝试使用 curl 和 DOMDocument 提取信息，我必须提取所有链接的 div 层。

但没有向我展示任何东西，我不明白，因为如果它没有 curl 的话。

```
 function media_uri_request($url, $method='', $vars='') 
  {
        $ch = curl_init();
        if ($method == 'post') 
        {
        curl_setopt ($ch, CURLOPT_POST, 1);
        curl_setopt ($ch, CURLOPT_POSTFIELDS, $vars);
        }

        curl_setopt ($ch, CURLOPT_URL, $url);
        curl_setopt ($ch, CURLOPT_HEADER, false);
        curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt ($ch, CURLOPT_FAILONERROR, false);
        curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, true);
        curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.7.12) Gecko/20050915 Firefox/1.0.7");
        curl_setopt ($ch, CURLOPT_HTTPHEADER, array("REMOTE_ADDR: ".$_SERVER['REMOTE_ADDR'], "HTTP_X_FORWARDED_FOR: ".$_SERVER['REMOTE_ADDR']));
        curl_setopt ($ch, CURLOPT_COOKIEJAR, 'tmp/cookie.txt');
        curl_setopt ($ch, CURLOPT_COOKIEFILE, 'tmp/cookie.txt');
        curl_setopt ($ch, CURLOPT_MAXREDIRS, 10);
        curl_setopt ($ch, CURLOPT_TIMEOUT, 0);
        curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, 0);
        $buffer = curl_exec($ch);
        curl_close ($ch);

        if (isset($buffer) && filter_var($buffer, FILTER_SANITIZE_URL)) {
        $urls = Array();

        $dom = new DOMDocument();
        @$dom->loadHTMLFile($buffer);

        foreach($dom->getElementsByTagName('a') as $buffer) {
            $urls[] = Array(
                'name'  => $buffer->nodeValue,
                'href'  => $buffer->getAttribute('href'),
                'title' => $buffer->getAttribute('title'),
                'rel'   => $buffer->getAttribute('rel'),
                'id'    => $buffer->getAttribute('id'),
            );
        }
        return $urls;
    }
  } 
```

目前向我显示页面上的所有链接，但我只需要一个 div 的 id 并获取此链接。

```
<div id="something">
<a href="anylink">sometitle</a>
<a href="anylink">sometitle</a>
<a href="anylink">sometitle</a>
<a href="anylink">sometitle</a>
</div> 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T22:59:01.643

代替

```
foreach($dom->getElementsByTagName('a') as $buffer) { 
```

和

```
foreach($dom->getElementById('something')->getElementsByTagName('a') as $buffer) { 
```

这样做，您首先通过 id 找到 div，然后在其子项中搜索链接。阅读 DOMDocument:: [getElementById](http://php.net/manual/en/domdocument.getelementbyid.php) () 了解更多信息。

有一种不同的方式：

```
$xpath = new DOMXPath($dom);
$elements = $xpath->query("//*[@id=something]");
if ($elements->length > 0) {
    foreach ($elements->item(0)->getElementsByTagName('a') as $buffer) { 
```

此外，使用`@$dom->loadHTML($buffer);`- 从字符串加载 HTML，而不是从文件加载。

# visual-studio-2010 - 可通过 AddIn 获得 VSTO 预填充模板

> ID：12718012
> 
> 赞同：1
> 
> 时间：2012-10-03T22:52:21.920
> 
> 标签：visual-studio-2010, excel, vsto, excel-addins, excel-template

我是 VSTO 的新手 - 在 Excel 中，我们希望用户单击 Excel 插件图标，以获取标题、公式、颜色/字体等的模板。最好通过 VS2010“Excel模板”或“Excel AddIn”项目？

请注意，填充的模板将需要包含填充了数据库数据的下拉列表（将通过 WCF 服务传输）。Excel VSTO 客户端还需要将数据推送回 WCF 服务以进行数据库更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:28:48.093

由于将模板向下移动到客户端所涉及的有效负载，我们决定将填充客户端所需的数据发送到线路（JSON，通过 GZip 压缩）并让客户端接收和解释数据并将 Excel 表填充为需要（通过 VSTO 动态创建控件、细胞群等）

# maven - 在 Maven 中发布多个错误？

> ID：12718017
> 
> 赞同：3
> 
> 时间：2012-10-03T22:52:58.213
> 
> 标签：maven

在尝试将版本推送到 Maven 时，我遇到了几个错误，包括：

```
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

和

```
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Unable to commit files
Provider message:
The git-commit command failed.
Command output: 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T22:52:58.213

因此，这实际上只是我将托管在 git 上的开源项目的版本推送到[Sonatype maven repo](https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide)所必须经历的过程的脑残。几乎这里的所有内容都在单独的 StackOverflow 问题中进行了介绍，但是对于那些（像我一样）第一次这样做的人来说，概述很有用。

整个过程实际上只是两个命令：

*   mvn 发布：准备
*   mvn 发布：执行

然而，正是这些繁琐的细节吸引了我。所以这是我需要遵循的过程：

1.  签入对项目的所有更改。如果有任何未推送的本地更改，Maven 会抱怨。
2.  确保您[在 git 中有一个 SSH 公钥](https://help.github.com/articles/generating-ssh-keys)。这将修复或防止`Permission denied (publickey).`错误。
3.  确保您的项目版本是 SNAPSHOT 并删除 release.properties 文件（如果存在）。这将修复或防止`git-commit command failed.`错误。
4.  运行上面列出的 Maven 命令。
5.  我将 GPG 密钥详细信息添加到 ~/.m2/settings.xm。下面列出了完整的文件。
6.  此时，您将在暂存区等待未签名的文物。我只上传了一个父 POM 文件，所以我需要使用命令签名`mvn -Pgpg gpg:sign-and-deploy-file -Durl=https://oss.sonatype.org/service/local/staging/deploy/maven2/ -DrepositoryId=sonatype-nexus-staging -DpomFile=pom.xml -Dfile=pom.xml`
7.  现在使用[https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide#SonatypeOSSMavenRepositoryUsageGuide-8a.ReleaseIt的说明发布它](https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide#SonatypeOSSMavenRepositoryUsageGuide-8a.ReleaseIt)

这是 ~/.m2/settings.xml 文件。

```
<settings>
    <servers>
        <server>
            <id>sonatype-nexus-snapshots</id>
            <username>username</username>
            <password>password</password>
        </server>
        <server>
            <id>sonatype-nexus-staging</id>
            <username>username</username>
            <password>password</password>
        </server>
    </servers>
    <profiles>
        <profile>
            <id>gpg</id>
            <properties>
                <gpg.passphrase>password</gpg.passphrase>
                <gpg.keyname>12345678</gpg.keyname>
            </properties>
        </profile>
    </profiles>
</settings> 
```

# jakarta-ee - 无法传递自定义对象、ejb 远程接口和 JPA、Netbeans

> ID：12718019
> 
> 赞同：0
> 
> 时间：2012-10-03T22:53:22.703
> 
> 标签：jakarta-ee, serialization, jpa, netbeans, glassfish-3

我正在使用 Netbeans 7、带有应用程序客户端的 JEE 项目、带有远程接口的无状态 ejb 以及由 sql 脚本制作的 JPA 实体类。

接口位于单独的库项目中，在 ejb 和客户端项目中引用。

**问题是无法返回**使用由实体类制作的自定义接口对象的远程方法。序列化大概。

使用标准类型的远程方法可以正常工作。

您可以在错误代码中查看异常：

```
Exception in thread "AWT-EventQueue-0" javax.ejb.EJBException: java.rmi.RemoteException: CORBA NO_IMPLEMENT 1398079489 Maybe; 
```

和这个：

```
Caused by: java.lang.ClassNotFoundException: entity_klase.Varalica (no security manager: RMI class loader disabled) 
```

我怀疑**接口和实体类不**完全匹配，因此无法在客户端重建对象。

**这些信息应该足够了，如果您需要更多相关的详细信息，我附上了实体类、该类的接口、远程接口、ejb 实现功能和完整的错误日志。**

所以这里是实体类：

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package entity_klase;

import java.io.Serializable;
import java.util.Date;
import javax.persistence.*;
import javax.validation.constraints.NotNull;
import javax.validation.constraints.Size;
import javax.xml.bind.annotation.XmlRootElement;

/**
 *
 * @author ime1
 */
@Entity
@Table(name = "VARALICA")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Varalica.findAll", query = "SELECT v FROM Varalica v"),
    @NamedQuery(name = "Varalica.findById", query = "SELECT v FROM Varalica v WHERE v.id = :id"),
    @NamedQuery(name = "Varalica.findByNaziv", query = "SELECT v FROM Varalica v WHERE v.naziv = :naziv"),
    @NamedQuery(name = "Varalica.findBySlika", query = "SELECT v FROM Varalica v WHERE v.slika = :slika"),
    @NamedQuery(name = "Varalica.findByLager", query = "SELECT v FROM Varalica v WHERE v.lager = :lager"),
    @NamedQuery(name = "Varalica.findByCena", query = "SELECT v FROM Varalica v WHERE v.cena = :cena"),
    @NamedQuery(name = "Varalica.findByVelicina", query = "SELECT v FROM Varalica v WHERE v.velicina = :velicina"),
    @NamedQuery(name = "Varalica.findByBoja", query = "SELECT v FROM Varalica v WHERE v.boja = :boja"),
    @NamedQuery(name = "Varalica.findByOpis", query = "SELECT v FROM Varalica v WHERE v.opis = :opis"),
    @NamedQuery(name = "Varalica.findByAkcijaTrajanje", query = "SELECT v FROM Varalica v WHERE v.akcijaTrajanje = :akcijaTrajanje"),
    @NamedQuery(name = "Varalica.findByAkcijaProcenat", query = "SELECT v FROM Varalica v WHERE v.akcijaProcenat = :akcijaProcenat"),
    @NamedQuery(name = "Varalica.findByTipVaralice", query = "SELECT v FROM Varalica v WHERE v.tipVaralice = :tipVaralice"),
    @NamedQuery(name = "Varalica.findByPopust", query = "SELECT v FROM Varalica v WHERE v.popust = :popust")})
public class Varalica implements VaralicaRemote, Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @NotNull
    @Column(name = "ID")
    private Integer id;
    @Size(max = 50)
    @Column(name = "NAZIV")
    private String naziv;
    @Size(max = 250)
    @Column(name = "SLIKA")
    private String slika;
    @Column(name = "LAGER")
    private Integer lager;
    // @Max(value=?)  @Min(value=?)//if you know range of your decimal fields consider using these annotations to enforce field validation
    @Column(name = "CENA")
    private Double cena;
    @Size(max = 15)
    @Column(name = "VELICINA")
    private String velicina;
    @Size(max = 15)
    @Column(name = "BOJA")
    private String boja;
    @Size(max = 250)
    @Column(name = "OPIS")
    private String opis;
    @Column(name = "AKCIJA_TRAJANJE")
    @Temporal(TemporalType.TIMESTAMP)
    private Date akcijaTrajanje;
    @Column(name = "AKCIJA_PROCENAT")
    private Integer akcijaProcenat;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 15)
    @Column(name = "TIP_VARALICE")
    private String tipVaralice;
    @Column(name = "POPUST")
    private Integer popust;

    public Varalica() {
    }

    public Varalica(Integer id) {
        this.id = id;
    }

    public Varalica(Integer id, String tipVaralice) {
        this.id = id;
        this.tipVaralice = tipVaralice;
    }

    @Override
    public Integer getId() {
        return id;
    }

    @Override
    public void setId(Integer id) {
        this.id = id;
    }

    @Override
    public String getNaziv() {
        return naziv;
    }

    @Override
    public void setNaziv(String naziv) {
        this.naziv = naziv;
    }

    @Override
    public String getSlika() {
        return slika;
    }

    @Override
    public void setSlika(String slika) {
        this.slika = slika;
    }

    @Override
    public Integer getLager() {
        return lager;
    }

    @Override
    public void setLager(Integer lager) {
        this.lager = lager;
    }

    @Override
    public Double getCena() {
        return cena;
    }

    @Override
    public void setCena(Double cena) {
        this.cena = cena;
    }

    @Override
    public String getVelicina() {
        return velicina;
    }

    @Override
    public void setVelicina(String velicina) {
        this.velicina = velicina;
    }

    @Override
    public String getBoja() {
        return boja;
    }

    @Override
    public void setBoja(String boja) {
        this.boja = boja;
    }

    @Override
    public String getOpis() {
        return opis;
    }

    @Override
    public void setOpis(String opis) {
        this.opis = opis;
    }

    @Override
    public Date getAkcijaTrajanje() {
        return akcijaTrajanje;
    }

    @Override
    public void setAkcijaTrajanje(Date akcijaTrajanje) {
        this.akcijaTrajanje = akcijaTrajanje;
    }

    @Override
    public Integer getAkcijaProcenat() {
        return akcijaProcenat;
    }

    @Override
    public void setAkcijaProcenat(Integer akcijaProcenat) {
        this.akcijaProcenat = akcijaProcenat;
    }

    @Override
    public String getTipVaralice() {
        return tipVaralice;
    }

    @Override
    public void setTipVaralice(String tipVaralice) {
        this.tipVaralice = tipVaralice;
    }

    @Override
    public Integer getPopust() {
        return popust;
    }

    @Override
    public void setPopust(Integer popust) {
        this.popust = popust;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Varalica)) {
            return false;
        }
        Varalica other = (Varalica) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "entity_klase.Varalica[ id=" + id + " ]";
    }

} 
```

这是库项目中该类的接口：

```
 package entity_klase;

import java.io.Serializable;
import java.util.Date;
//import javax.persistence.*;
//import javax.validation.constraints.NotNull;
//import javax.validation.constraints.Size;
//import javax.xml.bind.annotation.XmlRootElement;

/**
 *
 * @author ime1
 */

public interface VaralicaRemote extends Serializable {

    public  Integer getId();

    public  void setId(Integer id);

    public  String getNaziv();

    public  void setNaziv(String naziv);

    public  String getSlika();

    public  void setSlika(String slika);

    public  Integer getLager();

    public  void setLager(Integer lager);

    public  Double getCena();

    public  void setCena(Double cena);

    public  String getVelicina();

    public  void setVelicina(String velicina);

    public  String getBoja();

    public  void setBoja(String boja);

    public  String getOpis();

    public  void setOpis(String opis);

    public  Date getAkcijaTrajanje();

    public  void setAkcijaTrajanje(Date akcijaTrajanje);

    public  Integer getAkcijaProcenat();

    public  void setAkcijaProcenat(Integer akcijaProcenat);

    public  String getTipVaralice();

    public  void setTipVaralice(String tipVaralice);

    public  Integer getPopust();

    public  void setPopust(Integer popust);

    @Override
    public  int hashCode();

    @Override
    public  boolean equals(Object object);

    @Override
    public  String toString();

} 
```

这是stateles bean远程接口：

```
package za_admin;

import entity_klase.VaralicaRemote;
import java.util.ArrayList;
import java.util.List;
import javax.ejb.Remote;

/**
 *
 * @author ime1
 */
@Remote
public interface ZaAdminSessionBeanRemote {

    List<String> getGrupe();

    List<String> getNaziviProizvodaGrupe(String grupa);

    VaralicaRemote getVaralica(String naziv);//THIS METHOD WONT WORK

} 
```

这是正在运行的方法 bean 实现，我对其进行了调试，并在 return 语句处捕捉：

```
@Override
public VaralicaRemote getVaralica(String naziv) {

 VaralicaRemote varalica = null;

    try {

        Query q1 = em.createQuery("SELECT OBJECT(v) FROM Varalica v WHERE v.naziv = :naziv");
        q1.setParameter("naziv", naziv);         
        varalica = (VaralicaRemote) q1.getSingleResult();

    } catch (Exception e) {
        e.printStackTrace();
    } finally {
    }
   return varalica;//HERE IT SNAPS
} 
```

这是persistance.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="Projekat-ejbPU" transaction-type="JTA">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <jta-data-source>jdbc/security</jta-data-source>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
      <property name="eclipselink.weaving" value="false"/>
      <property name="eclipselink.ddl-generation" value="create-tables"/>
    </properties>
  </persistence-unit>
</persistence> 
```

这是错误日志：

```
 init:
JavaLibraryZaRemote1.init:
Deleting: E:\Documents and Settings\ime1\Desktop\Projekat1\Projekat\JavaLibraryZaRemote1\build\built-jar.properties
JavaLibraryZaRemote1.deps-jar:
Updating property file: E:\Documents and Settings\ime1\Desktop\Projekat1\Projekat\JavaLibraryZaRemote1\build\built-jar.properties
JavaLibraryZaRemote1.compile:
JavaLibraryZaRemote1.jar:
deps-jar:
compile:
library-inclusion-in-archive:
Building jar: E:\Documents and Settings\ime1\Desktop\Projekat1\Admin\dist\Admin.jar
dist:
pre-run-deploy:
Distributing E:\Documents and Settings\ime1\Desktop\Projekat1\Admin\dist\Admin.jar to [GlassFish Server 3.1.2]
post-run-deploy:
run-deploy:
Copying 1 file to E:\Documents and Settings\ime1\Desktop\Projekat1\Admin\dist
Copying 2 files to E:\Documents and Settings\ime1\Desktop\Projekat1\Admin\dist\AdminClient
Warning: E:\Documents and Settings\ime1\Desktop\Projekat1\Admin\dist\gfdeploy\Admin does not exist.
Exception in thread "AWT-EventQueue-0" javax.ejb.EJBException: java.rmi.RemoteException: CORBA NO_IMPLEMENT 1398079489 Maybe; nested exception is: 
    org.omg.CORBA.NO_IMPLEMENT: ----------BEGIN server-side stack trace----------
org.omg.CORBA.NO_IMPLEMENT: WARNING: IOP01000001: Missing local value implementation  vmcid: SUN  minor code: 1 completed: Maybe
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:248)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:95)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.handleFullLogging(WrapperGenerator.java:387)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.access$400(WrapperGenerator.java:107)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator$2.invoke(WrapperGenerator.java:511)
    at com.sun.corba.ee.spi.orbutil.proxy.CompositeInvocationHandlerImpl.invoke(CompositeInvocationHandlerImpl.java:99)
    at $Proxy134.missingLocalValueImpl(Unknown Source)
    at com.sun.corba.ee.impl.io.FVDCodeBaseImpl.implementation(FVDCodeBaseImpl.java:113)
    at com.sun.org.omg.SendingContext._CodeBaseImplBase._invoke(_CodeBaseImplBase.java:99)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatchToServant(CorbaServerRequestDispatcherImpl.java:528)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatch(CorbaServerRequestDispatcherImpl.java:199)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequestRequest(CorbaMessageMediatorImpl.java:1624)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:1486)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleInput(CorbaMessageMediatorImpl.java:990)
    at com.sun.corba.ee.impl.protocol.giopmsgheaders.RequestMessage_1_2.callback(RequestMessage_1_2.java:214)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:742)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.dispatch(CorbaMessageMediatorImpl.java:539)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.doWork(CorbaMessageMediatorImpl.java:2324)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.performWork(ThreadPoolImpl.java:497)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.run(ThreadPoolImpl.java:540)
Caused by: java.lang.ClassNotFoundException: entity_klase.Varalica (no security manager: RMI class loader disabled)
    at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:375)
    at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:165)
    at java.rmi.server.RMIClassLoader$2.loadClass(RMIClassLoader.java:620)
    at java.rmi.server.RMIClassLoader.loadClass(RMIClassLoader.java:202)
    at java.rmi.server.RMIClassLoader.loadClass(RMIClassLoader.java:135)
    at com.sun.corba.ee.impl.util.JDKBridge.loadClassM(JDKBridge.java:319)
    at com.sun.corba.ee.impl.util.JDKBridge.loadClass(JDKBridge.java:228)
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.loadClass(Util.java:640)
    at com.sun.corba.ee.impl.util.RepositoryId.getClassFromType(RepositoryId.java:577)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.getClassFromType(ValueHandlerImpl.java:373)
    at com.sun.corba.ee.impl.io.FVDCodeBaseImpl.implementation(FVDCodeBaseImpl.java:105)
    ... 12 more

----------END server-side stack trace----------  vmcid: SUN  minor code: 1 completed: Maybe
    at za_admin._ZaAdminSessionBeanRemote_Wrapper.getVaralica(za_admin/_ZaAdminSessionBeanRemote_Wrapper.java)
    at admin.AdminJFrame.jList2MouseReleased(AdminJFrame.java:448)
    at admin.AdminJFrame.access$400(AdminJFrame.java:44)
    at admin.AdminJFrame$7.mouseReleased(AdminJFrame.java:291)
    at java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:273)
    at java.awt.Component.processMouseEvent(Component.java:6134)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3265)
    at java.awt.Component.processEvent(Component.java:5899)
    at java.awt.Container.processEvent(Container.java:2023)
    at java.awt.Component.dispatchEventImpl(Component.java:4501)
    at java.awt.Container.dispatchEventImpl(Container.java:2081)
    at java.awt.Component.dispatchEvent(Component.java:4331)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4301)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:3965)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:3895)
    at java.awt.Container.dispatchEventImpl(Container.java:2067)
    at java.awt.Window.dispatchEventImpl(Window.java:2458)
    at java.awt.Component.dispatchEvent(Component.java:4331)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
Caused by: java.rmi.RemoteException: CORBA NO_IMPLEMENT 1398079489 Maybe; nested exception is: 
    org.omg.CORBA.NO_IMPLEMENT: ----------BEGIN server-side stack trace----------
org.omg.CORBA.NO_IMPLEMENT: WARNING: IOP01000001: Missing local value implementation  vmcid: SUN  minor code: 1 completed: Maybe
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:248)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:95)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.handleFullLogging(WrapperGenerator.java:387)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.access$400(WrapperGenerator.java:107)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator$2.invoke(WrapperGenerator.java:511)
    at com.sun.corba.ee.spi.orbutil.proxy.CompositeInvocationHandlerImpl.invoke(CompositeInvocationHandlerImpl.java:99)
    at $Proxy134.missingLocalValueImpl(Unknown Source)
    at com.sun.corba.ee.impl.io.FVDCodeBaseImpl.implementation(FVDCodeBaseImpl.java:113)
    at com.sun.org.omg.SendingContext._CodeBaseImplBase._invoke(_CodeBaseImplBase.java:99)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatchToServant(CorbaServerRequestDispatcherImpl.java:528)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatch(CorbaServerRequestDispatcherImpl.java:199)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequestRequest(CorbaMessageMediatorImpl.java:1624)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:1486)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleInput(CorbaMessageMediatorImpl.java:990)
    at com.sun.corba.ee.impl.protocol.giopmsgheaders.RequestMessage_1_2.callback(RequestMessage_1_2.java:214)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:742)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.dispatch(CorbaMessageMediatorImpl.java:539)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.doWork(CorbaMessageMediatorImpl.java:2324)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.performWork(ThreadPoolImpl.java:497)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.run(ThreadPoolImpl.java:540)
Caused by: java.lang.ClassNotFoundException: entity_klase.Varalica (no security manager: RMI class loader disabled)
    at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:375)
    at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:165)
    at java.rmi.server.RMIClassLoader$2.loadClass(RMIClassLoader.java:620)
    at java.rmi.server.RMIClassLoader.loadClass(RMIClassLoader.java:202)
    at java.rmi.server.RMIClassLoader.loadClass(RMIClassLoader.java:135)
    at com.sun.corba.ee.impl.util.JDKBridge.loadClassM(JDKBridge.java:319)
    at com.sun.corba.ee.impl.util.JDKBridge.loadClass(JDKBridge.java:228)
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.loadClass(Util.java:640)
    at com.sun.corba.ee.impl.util.RepositoryId.getClassFromType(RepositoryId.java:577)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.getClassFromType(ValueHandlerImpl.java:373)
    at com.sun.corba.ee.impl.io.FVDCodeBaseImpl.implementation(FVDCodeBaseImpl.java:105)
    ... 12 more

----------END server-side stack trace----------  vmcid: SUN  minor code: 1 completed: Maybe
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.mapSystemException(Util.java:311)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.privateInvoke(StubInvocationHandlerImpl.java:213)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.invoke(StubInvocationHandlerImpl.java:152)
    at com.sun.corba.ee.impl.presentation.rmi.codegen.CodegenStubBase.invoke(CodegenStubBase.java:227)
    at za_admin.__ZaAdminSessionBeanRemote_Remote_DynamicStub.getVaralica(za_admin/__ZaAdminSessionBeanRemote_Remote_DynamicStub.java)
    ... 25 more
Caused by: org.omg.CORBA.NO_IMPLEMENT: ----------BEGIN server-side stack trace----------
org.omg.CORBA.NO_IMPLEMENT: WARNING: IOP01000001: Missing local value implementation  vmcid: SUN  minor code: 1 completed: Maybe
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:248)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:95)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.handleFullLogging(WrapperGenerator.java:387)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.access$400(WrapperGenerator.java:107)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator$2.invoke(WrapperGenerator.java:511)
    at com.sun.corba.ee.spi.orbutil.proxy.CompositeInvocationHandlerImpl.invoke(CompositeInvocationHandlerImpl.java:99)
    at $Proxy134.missingLocalValueImpl(Unknown Source)
    at com.sun.corba.ee.impl.io.FVDCodeBaseImpl.implementation(FVDCodeBaseImpl.java:113)
    at com.sun.org.omg.SendingContext._CodeBaseImplBase._invoke(_CodeBaseImplBase.java:99)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatchToServant(CorbaServerRequestDispatcherImpl.java:528)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatch(CorbaServerRequestDispatcherImpl.java:199)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequestRequest(CorbaMessageMediatorImpl.java:1624)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:1486)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleInput(CorbaMessageMediatorImpl.java:990)
    at com.sun.corba.ee.impl.protocol.giopmsgheaders.RequestMessage_1_2.callback(RequestMessage_1_2.java:214)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:742)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.dispatch(CorbaMessageMediatorImpl.java:539)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.doWork(CorbaMessageMediatorImpl.java:2324)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.performWork(ThreadPoolImpl.java:497)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.run(ThreadPoolImpl.java:540)
Caused by: java.lang.ClassNotFoundException: entity_klase.Varalica (no security manager: RMI class loader disabled)
    at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:375)
    at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:165)
    at java.rmi.server.RMIClassLoader$2.loadClass(RMIClassLoader.java:620)
    at java.rmi.server.RMIClassLoader.loadClass(RMIClassLoader.java:202)
    at java.rmi.server.RMIClassLoader.loadClass(RMIClassLoader.java:135)
    at com.sun.corba.ee.impl.util.JDKBridge.loadClassM(JDKBridge.java:319)
    at com.sun.corba.ee.impl.util.JDKBridge.loadClass(JDKBridge.java:228)
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.loadClass(Util.java:640)
    at com.sun.corba.ee.impl.util.RepositoryId.getClassFromType(RepositoryId.java:577)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.getClassFromType(ValueHandlerImpl.java:373)
    at com.sun.corba.ee.impl.io.FVDCodeBaseImpl.implementation(FVDCodeBaseImpl.java:105)
    ... 12 more

----------END server-side stack trace----------  vmcid: SUN  minor code: 1 completed: Maybe
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.sun.corba.ee.impl.protocol.giopmsgheaders.MessageBase.getSystemException(MessageBase.java:900)
    at com.sun.corba.ee.impl.protocol.giopmsgheaders.ReplyMessage_1_2.getSystemException(ReplyMessage_1_2.java:131)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.getSystemExceptionReply(CorbaMessageMediatorImpl.java:637)
    at com.sun.corba.ee.impl.protocol.CorbaClientRequestDispatcherImpl.processResponse(CorbaClientRequestDispatcherImpl.java:499)
    at com.sun.corba.ee.impl.protocol.CorbaClientRequestDispatcherImpl.marshalingComplete(CorbaClientRequestDispatcherImpl.java:373)
    at com.sun.corba.ee.impl.protocol.CorbaClientDelegateImpl.invoke(CorbaClientDelegateImpl.java:273)
    at org.omg.CORBA.portable.ObjectImpl._invoke(ObjectImpl.java:457)
    at com.sun.org.omg.SendingContext._CodeBaseStub.implementation(_CodeBaseStub.java:63)
    at com.sun.corba.ee.impl.encoding.CachedCodeBase.implementation(CachedCodeBase.java:119)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.getClassFromString(CDRInputStream_1_0.java:2292)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_value(CDRInputStream_1_0.java:1095)
    at com.sun.corba.ee.impl.encoding.CDRInputObject.read_value(CDRInputObject.java:531)
    at com.sun.corba.ee.impl.presentation.rmi.DynamicMethodMarshallerImpl$14.read(DynamicMethodMarshallerImpl.java:384)
    at com.sun.corba.ee.impl.presentation.rmi.DynamicMethodMarshallerImpl.readResult(DynamicMethodMarshallerImpl.java:483)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.privateInvoke(StubInvocationHandlerImpl.java:203)
    ... 28 more
run-single: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:28:43.143

可能你需要返回实体类 Varalica，并使用 VaralicaRemote 作为远程类来转换 ejb 返回的方法。

# innerhtml - 似乎无法弄清楚为什么 InnerHTML 语句不起作用

> ID：12718020
> 
> 赞同：1
> 
> 时间：2012-10-03T22:53:33.247
> 
> 标签：innerhtml

我一直在使用 javascript 编辑器，它在它的内置浏览器中运行良好，但是当我在 IE 和 Firefox 中尝试它时，它会加载但随后不起作用。

HTML如下：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
<noscript>
<p>This page requires JavaScript. Please turn on JavaScript if your browser supports it and reload the page.</p>
</noscript>
<script type = "text/javascript" src="jscripts/pvar.js">
</script>

<title></title>

</head>

<body>
<form name="form1">
Version 2012.10.1.1a
<h2>
Panasas Sizing Form
</h2>
<br>
<table colspan='3' border='0'>
<tr>
<td align="left">&nbsp;<input type="text" name="textq1" id="dtextq1" readonly="readonly" value="How will this be sized?" style="border: 0"/>
<select name="question1" id="dquestion1" value="" onfocus="this.style.background='khaki'" onblur="this.style.background='white'" onchange="setOptions1(document.form1.question1.options[document.form1.question1.selectedIndex].value)">
<Option value=""></option>
<Option value="Capacity">Capacity</option>
<Option value="Bandwidth">Bandwidth</option>
<Option value="Both">Both</option>
</select></td>
<tr>
<td align="left" id="q1c1">&nbsp;</td>
<tr>
<td align="left" id="q2c1">&nbsp;</td>
<tr>
<td align="left" id="q3c1">&nbsp;</td>
<tr>
<td align="left" id="q4c1">&nbsp;</td>
<tr>
<td align="left" id="q5c1">&nbsp;</td>
<tr>
<td align="left" id="q6c1">&nbsp;</td>
<tr>
<td align="left" id="q7c1">&nbsp;</td>
</table>
</form>
</body>
</html> 
```

Javascript如下：

```
 function setOptions1(chosen)
{
var label=document.getElementById;
var textbox1="";
var textbox2="";

if (chosen == "") {
label('q1c1').innerHTML="";
label('q2c1').innerHTML="";
label('q3c1').innerHTML="";
label('q4c1').innerHTML="";
label('q5c1').innerHTML="";
label('q6c1').innerHTML="";
label('q7c1').innerHTML="";

}
if (chosen == "Capacity") {
label('q1c1').innerHTML="How much capacity do you require?";
label('q1c1').appendChild(document.createTextNode(' '));
textbox1 = document.createElement('INPUT'); 
textbox1.type = 'text';
textbox1.value = 0;
textbox1.size = 2;
textbox1.maxLength = 4;
label('q1c1').appendChild(textbox1);
label('q1c1').appendChild(document.createTextNode(' '));
textbox2 = document.createElement('SELECT'); 
textbox2_option = document.createElement('option');
textbox2_option= new Option ('GB',1,true,false);
textbox2_option= new Option ('GiB',2,false,false);
textbox2.add(textbox2_option);
label('q1c1').appendChild(textbox2);
label('q2c1').innerHTML="Average File Size:";
label('q3c1').innerHTML="Network efficiency:";
label('q4c1').innerHTML="What price level?";
label('q5c1').innerHTML="Would you like to include an IB Router?";
label('q6c1').innerHTML="";
label('q7c1').innerHTML="";

}
if (chosen == "Bandwidth") {
label('q1c1').innerHTML="What are the bandwidth requirements?";
label('q2c1').innerHTML="Network efficiency:";
label('q3c1').innerHTML="Average File Size:";
label('q4c1').innerHTML="What price level?";
label('q5c1').innerHTML="Would you like to include an IB Router?";
label('q6c1').innerHTML="";
label('q7c1').innerHTML="";
}
if (chosen == "Both") {
label('q1c1').innerHTML="How much capacity do you require?";
label('q2c1').innerHTML="Average File Size:";
label('q3c1').innerHTML="What are the bandwidth requirements?";
label('q4c1').innerHTML="Network efficiency:";
label('q5c1').innerHTML="What price level?";
label('q6c1').innerHTML="Would you like to include an IB Router?";
label('q7c1').innerHTML="";
}

}//end function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:04:32.030

问题是这一行：

var 标签=document.getElementById;

将其替换为

```
function label(s) {
  return document.getElementById(s);
} 
```

宿主对象很挑剔——它们并不总是喜欢被视为常规函数引用。

顺便说一句：我将您的代码剪切并粘贴到一个文件中，而不是通过`Google Chrome`. 错误消息`invalid invocation`让我失望地将定义替换`label`为我的第一个调试步骤。

# django - Django Haystack 和 Woosh 不处理 Web 请求，但在生产服务器上处理 django shell

> ID：12718021
> 
> 赞同：0
> 
> 时间：2012-10-03T22:53:39.040
> 
> 标签：django, django-haystack, whoosh

在我的生产服务器上，当我搜索网页时，我没有使用 haystack 获得任何搜索结果，但它正确构建索引，我可以使用 django shell 上的 haystack api 检索结果。

没有抛出异常，我根本没有得到任何结果。

在我的本地服务器上一切正常。

唯一明显的区别是生产服务器使用 fcgi，而本地服务器使用 wsgi。

我一生都无法弄清楚发生了什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:12:15.070

我通过拥有 apache 的搜索索引目录并移动解决了这个问题：

```
import haystack
haystack.autodiscover() 
```

从 search_sites.py 到 urls.py

我仍然不完全理解为什么搜索现在有效，但我很高兴它是！

# android - 在 android_version 2.2 中显示一个气球

> ID：12718022
> 
> 赞同：0
> 
> 时间：2012-10-03T22:53:40.250
> 
> 标签：android, balloon

我对如何在地图中显示气球进行了一些研究。但我发现气球仅在 android_version 4.0 中单击带有 android 版本 2.2 的标记时是否可以在地图中显示气球

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T22:56:20.030

我在一个项目中使用了[android-mapviewballoons](https://github.com/jgilfelt/android-mapviewballoons)，它似乎工作正常。

# php - 获取特定时区 PHP

> ID：12718023
> 
> 赞同：0
> 
> 时间：2012-10-03T22:53:41.790
> 
> 标签：php, timezone

我有一个 zip_code 数据库，该数据库也具有与邮政编码关联的正确时区。我将用户的 zip_code 存储在会话中，并像这样正确地提取他们的时区：

```
$timezone_array = mysql_query("SELECT time_zone FROM zip_code WHERE zip_code = '".$zip_session."'");
while($timezone_cells = mysql_fetch_array($timezone_array))
{
    $their_timezone = $timezone_cells['time_zone'];
} 
```

如果我的邮政编码是 07110，那么`$their_timezone`将是东部。如何在 PHP 中使用它来设置正确的时区？我想不出一种`date_default_timezone_set('America/new_york')`像这样使用这个功能的方法`date_default_timezone_set($their_timezone)`。存储在数据库中的 time_zones 是 Atlanic、Eastern、Central、Mountain、Pacific 等。PHP 中的任何函数都可以使用这些函数而不是最近的城市，例如：America/New_York？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T23:10:36.817

美国/中部、美国/东部、美国/太平洋有效，请参阅：

[支持的时区列表：其他](http://php.net/manual/en/timezones.others.php)

# java - 安卓 GTFS 应用

> ID：12718027
> 
> 赞同：1
> 
> 时间：2012-10-03T22:54:21.477
> 
> 标签：java, android, iphone, ios, gtfs

我正在尝试开发使用 GTFS 的应用程序。这似乎是一个愚蠢的问题，但我找不到任何答案。

以色列的 GTFS 是一个相当小的国家，没有那么多公共汽车基础设施，压缩文件约为 120 MB。现在我能想到的让它工作的唯一可能方法是下载文件，但使用手机下载 120 MB 可能需要很长时间。当然，您只能执行一次并将其保存在手机上的数据库中，但仍需要下载 120 MB。

由于它是压缩的，我无法在服务器上解压缩它，而只能获取 txt 文件..

所以基本上我在问，如何在不下载压缩文件的情况下将信息发送到手机？

我见过并使用过使用相同 GTFS 文件的应用程序，它们加载速度非常快，即使在第一次加载时也是如此。

我希望你理解我的问题，不知道如何更好地解释它。

谢谢！

Ps 我也会做一个 iPhone 应用程序，这是同样的问题，因此 iPhone 标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:01:20.987

一种方法可能是在您的应用程序开发期间预处理 GTFS 数据。您可以将其加载到 SQLite 数据库中，并使用 Core Data 在运行时从文件中获取您需要的数据。这也使您有机会仅包含您的应用程序实际需要的数据 - 要求用户下载他们不需要的额外数据是没有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T11:49:52.817

使用协议二进制格式 (pbf)，以前是 google，现在是开源的。它紧凑且可快速搜索，因此无需在设备上解压缩并将其加载到该设备上的数据库中，因为 pbf 充当数据库。只需在代码中包含 pbf 库即可对其进行查询。当然，您必须在在线分发数据之前对其进行一次压缩。

# python - Python PIP：包目录不存在

> ID：12718032
> 
> 赞同：2
> 
> 时间：2012-10-03T22:54:55.777
> 
> 标签：python, django, pip, setup.py

由于我将包上传到 pypi，因此我的 setup.py 或 MANIFEST 中似乎缺少某些内容。 [http://pypi.python.org/pypi/django-audiofield/](http://pypi.python.org/pypi/django-audiofield/)

当我尝试安装它时： **pip install django-audiofield**

我总是收到错误：

**错误：包目录“audiofield”不存在**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-15T23:43:23.457

这已经解决了，我在 setup.py 中发现了一个问题

我正在阅读 args 以检查是否通过了“安装”并在此基础上做一些逻辑。所以“python setup.py install”工作正常，但不是来自 pypi。

# java - 如何为使用 Netty 发送 UDP 数据包的服务器配置源端口？

> ID：12718035
> 
> 赞同：0
> 
> 时间：2012-10-03T22:55:01.143
> 
> 标签：java, udp, netty

我有一个使用 Netty 进行套接字 I/O 的服务器任务。它绑定到端口 MY_PORT 并从客户端接收 UDP 消息。它响应这些客户端，将消息发送回目标端口为 MY_PORT 的客户端。使用wireshark，我看到从我的服务器传出的数据包也有一个源端口MY_PORT。这一切都很好。

负责服务器和客户端之间网络的人员在使用负载平衡器时遇到了一些问题。他们说，如果我的服务器发送给客户端的 UDP 消息的**源端口与用于目标的端口不同**，这将对他们有所帮助。

我查看了 Netty API，但我不确定如何做到这一点。似乎因为我已经绑定到本地端口，所以我也必须将它用于传出数据包？？这是我的代码的精简版本。

```
import java.net.InetAddress;
import java.net.InetSocketAddress;
import java.net.SocketAddress;
import java.net.UnknownHostException;
import java.util.concurrent.Executors;

import org.jboss.netty.bootstrap.ConnectionlessBootstrap;
import org.jboss.netty.buffer.ChannelBuffer;
import org.jboss.netty.buffer.ChannelBuffers;
import org.jboss.netty.channel.Channel;
import org.jboss.netty.channel.ChannelHandlerContext;
import org.jboss.netty.channel.ChannelPipeline;
import org.jboss.netty.channel.ChannelPipelineFactory;
import org.jboss.netty.channel.Channels;
import org.jboss.netty.channel.MessageEvent;
import org.jboss.netty.channel.SimpleChannelHandler;
import org.jboss.netty.channel.socket.nio.NioDatagramChannelFactory;

public class UdpServer {

    private final int port;
    private Channel serverChannel;

    public UdpServer( int port ) {
        super();
        this.port = port;
    }

    public void start() {
        NioDatagramChannelFactory serverChannelFactory =
            new NioDatagramChannelFactory( Executors.newCachedThreadPool(), 1 );
        ConnectionlessBootstrap serverBootstrap =
            new ConnectionlessBootstrap( serverChannelFactory );
        serverBootstrap.setPipelineFactory( new ChannelPipelineFactory() {
            @Override
            public ChannelPipeline getPipeline() {
                return Channels.pipeline( new SimpleChannelHandler() {
                    @Override
                    public void messageReceived( ChannelHandlerContext ctx,
                        MessageEvent e ) {
                        // TODO, handle message from client
                    }
                } );
            }
        } );
        serverBootstrap.setOption( "reuseAddress", Boolean.TRUE );
        final InetSocketAddress trafficAddress = new InetSocketAddress( port );
        serverChannel = serverBootstrap.bind( trafficAddress );
    }

    public void sendMessage( byte[] message, String clientIp )
        throws UnknownHostException {
        // TODO, how do I control the source port of this packet??
        SocketAddress address =
            new InetSocketAddress( InetAddress.getByName( clientIp ), port );
        ChannelBuffer buffer = ChannelBuffers.wrappedBuffer( message );
        serverChannel.write( buffer, address );
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T02:01:18.587

您已经在使用`bind()`设置本地地址。您可以使用`connect()`连接到特定的目标端口（“连接”概念的延伸）。在常规数据报套接字上，您可以在发送请求中包含远程端口，但如果您使用的是`write()`. 在这种情况下，您必须使用`connect()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:43:16.027

> 他们说，如果我的服务器发送给客户端的 UDP 消息的源端口与用于目标的端口不同，这将对他们有所帮助。

这对我来说听起来很糟糕。网络管理员似乎不知道如何实际分配源/目标端口。即使客户端使用系统分配的诗人而不是他们可能应该使用的固定端口，系统仍然可以分配与服务器使用相同的端口号。

但是，您可以通过让客户端使用系统分配的端口而不是固定端口来关闭它们，或者至少将它们转移到另一个问题上。当然，除非有客户端防火墙...

# iphone - RestKit 自定义序列化

> ID：12718038
> 
> 赞同：0
> 
> 时间：2012-10-03T22:55:09.390
> 
> 标签：iphone, ios, restkit

我需要将 RestKit 配置为与期望以下内容的服务器 API 交互：

*   所有请求都在 multipart/form-data 中
*   有一个 JSON 有效负载。但是，客户端必须将有效负载折叠成表单数据字符串并在其前面加上“json=”
*   身份验证是通过使用包含任何 GET 参数的 URL 对 JSON 有效负载的内容进行哈希处理来完成的。并将此哈希附加到 URL（是的，我知道这很糟糕。但我无法控制 API）

我试图让 RestKit 将其序列化输出附加到 json=，然后将 RKObjectLoader 修改为计算机并附加正确的签名哈希。

我已经尝试继承 RKObjectManager 并覆盖 sendObject:toResourcePath:usingBlock: 来覆盖 HTTPBody; 但不能让它工作。我也尝试过继承 RKClient 和 configureRequest: 但似乎这个方法在对象序列化之前被调用。

这是我使用 RestKit 的第一天。帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:29:51.430

更新：我制定了一个与我原来描述的底部不同的解决方案。我创建了 RKObjectLoader 和 RKObjectManager 的子类。自定义对象管理器只需进行一项更改即可返回自定义对象加载器。对象加载器的发送消息被覆盖以执行自定义构造。

这是我制定的解决方案。

我使用 RKClient 的一个子类，我在其中覆盖

```
- (void)configureRequest:(RKRequest *)request {
  [super configureRequest:request];
  request.delegate = self;
} 
```

并在委托中完成我所有的编码/签名。

```
- (void)requestWillPrepareForSend:(RKRequest *)request {
  [self encodeJSONPayloadForRequest:request];
  [self signRequest:request];
}

- (void)encodeJSONPayloadForRequest:(RKRequest*)request {
  NSDictionary * bodyDict = (NSDictionary*)request.params;
  NSError * error = nil;
  NSString * jsonString = [bodyDict JSONStringWithOptions:JKSerializeOptionNone error:&error];
  if (error) NSAssert(false, @"error serializing into JSON");
  NSDictionary * dictionary = [NSDictionary dictionaryWithObject:jsonString forKey:@"json"];
  request.params = dictionary;
} 
```

我需要实现一种机制来传递给任何预先存在的委托。但是，这种方法似乎可以解决问题。

# ruby-on-rails - 如何在不将文件存储在磁盘上的情况下创建回形针附件（从原始字节？（也许））？

> ID：12718040
> 
> 赞同：3
> 
> 时间：2012-10-03T22:55:23.750
> 
> 标签：ruby-on-rails, ruby, paperclip

这有效（但似乎很乏味）：

```
 File.new("temp.pdf", "w").close
  File.open("temp.pdf", "w+") do |f|
    f.write(response.body)
    pdf = PDF.new({
      :document    => f,
    })
    pdf.save

  end

  # delete the temp file
  File.delete("temp.pdf") 
```

但是，每次我想在 S3 存储桶上创建 PDF 时，我宁愿不必创建、写入、上传删除内容

这就是我想做的：

```
 pdf = PDF.new({
            :document    => response.body,
        })
        pdf.save 
```

但是，看到 response.body 只是一堆字节（我想，我不确定 response.body 的格式或如何查找它），回形针不知道将其转换为文件。

注意：response.body 来自 DocRaptor：[http](http://docraptor.com/) ://docraptor.com/ ，它将 html 转换为 PDF。

# c# - 如何使用 word interop 一次将一个项目添加到 word 文档的新行

> ID：12718044
> 
> 赞同：8
> 
> 时间：2012-10-03T22:55:39.847
> 
> 标签：c#, .net, ms-word, office-interop

我正在尝试将这三种类型的内容添加到 word 文档中。这就是我现在尝试做的方式。但是，每个项目都会替换最后一个项目。添加图像总是添加到页面的开头。我有一个循环，它调用一个函数来创建标题和表格，然后在之后添加图像。我认为问题在于范围。我使用对象 start = 0 的起始范围；

我怎样才能让这些一次添加一个到文档中的新行？

```
foreach (var category in observedColumns)
            {

                CreateHeadersAndTables();
                createPictures();
            } 
```

添加标题：

```
 object start = 0;
                Word.Range rng = doc.Range(ref start , Missing.Value);
                Word.Paragraph heading;
                heading = doc.Content.Paragraphs.Add(Missing.Value);
                heading.Range.Text = category;
                heading.Range.InsertParagraphAfter(); 
```

添加表格：

```
 Word.Table table;
            table = doc.Content.Tables.Add(rng, 1, 5); 
```

添加图片：

```
 doc.Application.Selection.InlineShapes.AddPicture(@path); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-05T18:12:33.767

一种简单的方法是使用段落来处理`Range`对象并简单地逐个插入新段落。

查看 API 文档会发现它`Paragraphs`实现了一个`Add`方法：

> 返回一个 Paragraph 对象，该对象表示添加到文档中的新的空白段落。(...) 如果未指定 Range，则新段落将添加到所选内容或范围之后***或文档末尾***。

资料来源：http: [//msdn.microsoft.com/en-us/library/microsoft.office.interop.word.paragraphs.add (v=office.14).aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.paragraphs.add(v=office.14).aspx)

这样，就可以直接将新内容附加到文档中。

为了完整起见，我提供了一个示例，展示了解决方案的工作原理。样本循环通过一个`for`循环，并为每次迭代插入：

*   一个新的文本行
*   一张桌子
*   照片

该示例已实现为 C# 控制台应用程序，使用：

*   .NET 4.5
*   Microsoft Office 对象库版本 15.0，以及
*   Microsoft Word 对象库版本 15.0

...即 MS Office 2013 附带的 MS Word Interop API。

```
using System;
using System.IO;
using Microsoft.Office.Interop.Word;
using Application = Microsoft.Office.Interop.Word.Application;

namespace StackOverflowWordInterop
{
    class Program
    {
        static void Main()
        {
            // Open word and a docx file
            var wordApplication = new Application() { Visible = true };
            var document = wordApplication.Documents.Open(@"C:\Users\myUserName\Documents\document.docx", Visible: true);

            // "10" is chosen by random - select a value that fits your purpose
            for (var i = 0; i < 10; i++)
            {
                // Insert text
                var pText = document.Paragraphs.Add();
                pText.Format.SpaceAfter = 10f;
                pText.Range.Text = String.Format("This is line #{0}", i);
                pText.Range.InsertParagraphAfter();

                // Insert table
                var pTable = document.Paragraphs.Add();
                pTable.Format.SpaceAfter = 10f;
                var table = document.Tables.Add(pTable.Range, 2, 3, WdDefaultTableBehavior.wdWord9TableBehavior);
                for (var r = 1; r <= table.Rows.Count; r++)
                    for (var c = 1; c <= table.Columns.Count; c++)
                        table.Cell(r, c).Range.Text = String.Format("This is cell {0} in table #{1}", String.Format("({0},{1})", r,c) , i);

                // Insert picture
                var pPicture = document.Paragraphs.Add();
                pPicture.Format.SpaceAfter = 10f;
                document.InlineShapes.AddPicture(Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments), "img_1.png"), Range: pPicture.Range);

            }

            // Some console ascii-UI
            Console.WriteLine("Press any key to save document and close word..");
            Console.ReadLine();

            // Save settings
            document.Save();

            // Close word
            wordApplication.Quit();
        }
    }
} 
```

# javascript - 如何根据图像源单击“答案”链接？

> ID：12718047
> 
> 赞同：0
> 
> 时间：2012-10-03T22:55:47.927
> 
> 标签：javascript, click, greasemonkey

我有一个简单的“谁是”游戏页面，我想用 Greasemonkey 制作一个简单的自动回答脚本。我怎样才能做到这一点？

根据`sid`图片中的`src`：

```
<img src="whois_picture.php?yid=123456&sid=3084" /> 
```

它应该单击匹配的链接...

*   如果`sid=3084`，选择答案`d`。
*   如果`sid=3023`，选择答案`a`。
*   等等

模拟：[http ://thedudu.com/auto_select/](http://thedudu.com/auto_select/)

关键目标页面 HTML：

```
<div id="whois_guestion">
    <img src="whois_picture.php?yid=123456&sid=3084" />
</div>
<div id="game_options">
    <a href="#" class="game_option">Mickey Mouse</a>
    <input type="hidden" value="a" name="secenekharf" />

    <a href="#" class="game_option">Bugs Bunny</a>
    <input type="hidden" value="b" name="secenekharf" />

    <a href="#" class="game_option">Gofy</a>
    <input type="hidden" value="c" name="secenekharf" />

    <a href="#" class="game_option">Mario</a>
    <input type="hidden" value="d" name="secenekharf" />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T06:36:58.473

1.  制作`sid`s 和 answers 的对象，如下所示：

    ```
    var answerKey   = {
          3084: "d"
        , 3023: "a"
        //etc.
    }; 
    ```

2.  然后使用jQuery选择正确的答案链接。

3.  最后，向链接发送点击事件。

下面是一个完整的脚本可能的样子：

```
// ==UserScript==
// @name     _Auto-answer script
// @include  http://thedudu.com/auto_select/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change introduced
    in GM 1.0\.   It restores the sandbox.
*/

var answerKey   = {
      3084: "d"
    , 3023: "a"
    //etc.
};

setTimeout (clickAnswerIfAny, 222); //-- 222 milliseconds

function clickAnswerIfAny () {
    var questImg    = $("#whois_guestion img");
    var questSid    = questImg.attr ("src").replace (/^.+?\bsid=(\d+).*$/i, "$1");
    var answerVal   = answerKey[questSid];
    if (typeof answerVal != "undefined") {
        console.log ("Ans found...");
        //-- Find the <input> with the answer value.
        var answerInp   = $("#game_options input[value='" + answerVal + "']");
        if (answerInp.length) {
            //-- In this case, the link is the previous sibling element.
            var answerLink  = answerInp.prev ();
            console.log (answerInp, answerLink);
            //-- Click the link.
            console.log ("Clicking...");
            var clickEvent  = document.createEvent ('MouseEvents');
            clickEvent.initEvent ('click', true, true);
            answerLink[0].dispatchEvent (clickEvent);
        }
    }
} 
```

另请参阅[此答案](https://stackoverflow.com/a/11025788/331508)。

# visual-studio-2012 - 您如何在 Javascript 文件中编写自己的智能感知注释？

> ID：12718048
> 
> 赞同：3
> 
> 时间：2012-10-03T22:55:49.193
> 
> 标签：visual-studio-2012

在 C# 中，我可以在定义类或函数之前添加 /// 开始的注释，这些会影响我编写使用该类型或函数的代码时显示的智能感知提示。但它不适用于 Javascript。我可以获得这些特别的评论和额外的提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:56:16.907

不远，但注释应该在js函数中。

这是一个例子：

```
function getArea(radius)
  {
      /// <summary>Determines the area of a circle that has the specified radius parameter </summary>
      /// <param name="radius" type="Number">The radius of the circle.</param>
      /// <returns type="Number">The area.</returns>
      var areaVal;
      areaVal = Math.PI * radius * radius;
      return areaVal;
  } 
```

您还可以在 MSDN 中找到[HowTo](http://msdn.microsoft.com/en-us/library/bb514138.aspx)和[doc 。](http://msdn.microsoft.com/en-us/library/hh524453.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-03-01T21:32:49.180

对于截至本评论当前日期的 VS 2017+，您需要使用 JSDoc for TypeScript。本例中的“{string}”表示 param1 是字符串类型。

```
/**
 * A description for myFunction.
 * @param {string} param1 - The first argument to this function
 */
function myFunction(param1) {
...
} 
```

*   [JSDoc 参考](https://www.typescriptlang.org/docs/handbook/jsdoc-supported-types.html)
*   [MSDN](https://docs.microsoft.com/en-us/visualstudio/ide/javascript-intellisense?view=vs-2022#:%7E:text=IntelliSense%20based%20on%20type%20inference.%20In%20JavaScript%2C%20most,initialize%20it%20or%20the%20most%20recent%20value%20assignment.)
*   [VS Wiki 的 JS](https://github.com/microsoft/TypeScript/wiki/JavaScript-Language-Service-in-Visual-Studio)

# parsing - 如何有效使用 Alex 的启动码功能？

> ID：12718051
> 
> 赞同：8
> 
> 时间：2012-10-03T22:56:16.707
> 
> 标签：parsing, haskell

我开始学习[Alex](http://www.haskell.org/alex/)并相信我已经到了有状态上下文会有所帮助的地步，但我不完全确定如何去做。我正在尝试对[erlang binaries](http://www.erlang.org/doc/man/binary.html)的有限子集进行 lex 。使用以下词法分析器：

```
{
module Main (main, Token(..), AlexPosn(..), alexScanTokens, token_posn) where
}

%wrapper "posn"

$digit = 0-9      -- digits                                                                            
$alpha = [a-zA-Z] -- alphabetic characters                                                             
$dbl_quote = \"

tokens :-

  $white+                        ;
  ","                            { tok (\p s -> Comma p) }
  "<<"                           { tok (\p s -> BinaryOpen p) }
  ">>"                           { tok (\p s -> BinaryClose p) }
  $dbl_quote [^$dbl_quote]* $dbl_quote { tok (\p s -> ErlStr p (init (tail s))) }
  $digit+                        { tok (\p s -> ErlInt p (read s)) }

{
-- action helpers:                                                                                     
tok :: (AlexPosn -> String -> Token) -> AlexPosn -> String -> Token
tok f p s = f p s

data Token =
  Comma       AlexPosn |
  BinaryOpen  AlexPosn |
  BinaryClose AlexPosn |
  ErlInt   AlexPosn Integer |
  ErlStr   AlexPosn String
  deriving (Eq, Show)

token_posn :: Token -> AlexPosn
token_posn (Comma    p) = p
token_posn (BinaryOpen  p) = p
token_posn (BinaryClose p) = p
token_posn (ErlInt   p _) = p
token_posn (ErlStr   p _) = p

main :: IO ()
main = do
  s <- getContents
  print (alexScanTokens s)
} 
```

我做得很好。例如，

```
> alex so_erlang_lexer.x  && ghc --make -o erlexer so_erlang_lexer.hs && echo '<<"100", 1>>' | ./erlexer 
[1 of 1] Compiling Main             ( so_erlang_lexer.hs, so_erlang_lexer.o )
Linking erlexer ...
[BinaryOpen (AlexPn 0 1 1),ErlStr (AlexPn 2 1 3) "100",Comma (AlexPn 7 1 8),ErlInt (AlexPn 9 1 10) 1,BinaryClose (AlexPn 10 1 11)] 
```

我希望*lexed*返回等效于`Binary [ErlStr "100", ErlInt 1]`，但我无法找到一个使用在我脑海中点击的起始代码的词法分析器。

*   [此处引用](https://stackoverflow.com/questions/1513020/how-do-i-do-python-style-indent-dedent-tokens-with-alex-haskell)的 GHC 词法分析器不使用任何 Alex 包装器。
*   Alex 自己的关于其 monad 和 monadUserState 包装器的文档[让](http://www.haskell.org/alex/doc/html/wrappers.html#id462424)我不确定应该选择哪个以及如何使用它们。
*   [亚历克斯关于老虎](https://github.com/simonmar/alex/blob/master/examples/tiger.x)的例子是最有希望的，但它太大了，我很难澄清我的无知。
*   这个[问题](https://stackoverflow.com/questions/6038573/request-for-comments-on-simple-alex-parser)使用了 monad 解析器，但似乎没有使用它的状态特性。

有人会好心指导我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T09:17:21.903

我不完全确定你想用词法分析器做什么，并且知识渊博可以指导你（但如果你只需要过滤无用的标记，alex 的 monadic 接口似乎有点矫枉过正），无论如何这里有一个示例代码用于`AlexUserState`积累带有“monadUserState”包装器的选定标记。

```
 {
module Main (main) where
}

%wrapper "monadUserState"

$digit = 0-9      -- digits                                                                            
$alpha = [a-zA-Z] -- alphabetic characters                                                             
$dbl_quote = \"

tokens :-

  $white+                              ;
  ","                                  { ignoreToken  }
  ">"                                 { ignoreToken }
  $dbl_quote [^$dbl_quote]* $dbl_quote { pushToken  $ ErlStr . init . tail  }
  $digit+                              { pushToken  $ ErlInt . read }

{

alexEOF :: Alex ()
alexEOF = return ()

-- some useful interaces to the Alex monad (which is naturally an instance of state monad)
modifyUserState :: (AlexUserState -> AlexUserState) -> Alex ()
modifyUserState f = Alex (\s -> let st = alex_ust s in Right (s {alex_ust = f st},()))

getUserState ::  Alex AlexUserState
getUserState = Alex (\s -> Right (s,alex_ust s))

-- Token definition minus position information for simplicity
data Token =
  Comma        |
  BinaryOpen   |
  BinaryClose  |
  ErlInt    Integer |
  ErlStr    String
  deriving (Eq, Show)

newtype AlexUserState = Binary [Token]
  deriving (Eq, Show)

alexInitUserState :: AlexUserState
alexInitUserState = Binary []

-- action helpers:                                                                                     
pushToken :: (String -> Token) -> AlexAction ()
pushToken tokenizer = 
  \(posn,prevChar,pending,s) len -> modifyUserState (push $ take len s) >> alexMonadScan
    where
       -- Here tokens are accumulated in reverse order for efficiency.
       -- You need a more powerful data structure like Data.Sequence to preserve the order.
       push :: String -> AlexUserState -> AlexUserState
       push s (Binary ts) = Binary (tokenizer s : ts) 

ignoreToken :: AlexAction ()
ignoreToken _ _   = alexMonadScan

runAlexScan :: String -> Either String AlexUserState
runAlexScan s = runAlex s $ alexMonadScan >> getUserState

main :: IO ()
main = getContents >>= print . runAlexScan

} 
```

但我想主要问题是你似乎对 Haskell 中 monad 的概念和用法还不够熟悉。Alex 的 monadic 接口实际上是非常自然且典型的状态 monad，一旦您有一些编码经验，您只需浏览生成的代码就很容易猜到。（如果你猜错了，类型检查器很可能会发现相关错误。）

为此，由于这里似乎有很多关于 monad 的好问题和答案，所以我只参考[Real World Haskell](http://book.realworldhaskell.org/)（其关于分析的章节对我特别有帮助。）

但是，如果你碰巧已经对范畴论有所了解，那么学习 monad 的最快方法可能是直接阅读一些相关论文（请记住，范畴论中的 monad 是对*动作*的概括，就像在组的动作中一样，它自然适合编程环境。）为此，请参阅 [有关 monads 和 arrows 的论文列表](http://www.haskell.org/haskellwiki/Research_papers/Monads_and_arrows)，其中包括为具有一定技术背景的人提供的介绍性论文和教程。

顺便说一句，我刚刚开始学习 Erlang。你能指导我一些吗？没有静态类型的缺乏让你感到痛苦吗？您是否尝试过 cloud-haskell 并将其与 Erlang 进行比较？在分布式编程的背景下，您觉得哪种语言效率最高？

# ajax - 需要额外输入的 Rails 高级客户端验证

> ID：12718053
> 
> 赞同：0
> 
> 时间：2012-10-03T22:56:21.060
> 
> 标签：ajax, ruby-on-rails-3, transactions, client-side-validation

我正在使用[roo](http://roo.rubyforge.org/) gem 处理一个包含教师提交的学生信息的 excel 文件，然后将这些信息逐行解析并存储在数据库中。在某些情况下，这些 excel 文件的输入被标记为无效，需要教师进一步输入。输入将对应于预定义的决定，即是、否、真、假、取消。

例如，如果一个字段被读取并被标记，我想向老师显示一个提示，要求他继续处理或取消，在这种情况下，我将分别继续我的循环或回滚。

我想知道是否有人可以给我一个关于我需要什么工具的基本概要，或者我如何在 Rails 应用程序中实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:13:30.293

我没有找到任何这样的例子，我想这只是 Web 应用程序没有完成的事情。

除非我看到有人提出更好的建议，否则我认为我会将其分解为两个单独的过程，一个验证过程将首先处理将每一行存储到哈希字段数组中的 excel 文档，并将它们各自的错误消息返回给用户重定向。接下来的页面会将散列数组格式化为带有复选框等的表单表，这些复选框将被发送回控制器以进行第二次处理并提交。

在纸上听起来不错，但我会自己找出这是否真的可行。

# iphone - 无法在基本单元测试设置中测试我的课程

> ID：12718057
> 
> 赞同：3
> 
> 时间：2012-10-03T22:57:00.037
> 
> 标签：iphone, objective-c, ios, xcode, unit-testing

[按照这些说明](https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html)，我已经成功地将一个普通的单元测试包添加到我的项目中。我可以构建并运行我的测试目标，并且一个示例测试工作正常。

当我尝试测试特定课程时，事情开始走下坡路。

在我的应用程序中，我的许多 .h 文件都包含在 .pch 文件中。此外，MyModel 与其他类交互。因此，当我导入 MyModel.h 并在我的测试中使用它时，我收到一堆错误，这些错误与无法加载其他文件有关。我的解决方法是在我的测试目标的 .pch 文件中简单地添加相同的文件，并将这些文件添加到测试目标的“编译源”列表中。

所以我将这些类添加到测试目标和 .pch 中，尝试运行，但我最终陷入了无限循环，总是需要更多文件。当我最终将每个 .m 添加到我的项目中时，运行测试仍然非常失败。

知道我需要如何正确设置我的项目，以便我可以简单地`#import "MyModel.h"`进入我的测试文件并编写/运行我的测试吗？我的项目是否有可能以一种无法进行测试的方式进行配置？

**更新 1** 遵循卡尔的建议，但无法通过第 2 步。我得到：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_MyModel", referenced from:
      objc-class-ref in BaseUnitTests.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

正是在这一点上，我将 MyModel.m 添加到“构建阶段/编译源”，并沿着将所有其他 .m 文件添加到测试目标的“编译源”的无尽路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:43:32.083

代码绝对可以以使测试变得困难的方式编写，尤其是在编写时没有考虑到测试。但这并非不可能。现在你只需要清理你的导入。我认为我会采取的方法是

1）从测试目标中删除所有非测试用例类实现（.m）——它们不需要在那里。通过从测试目标的构建阶段的“编译源”窗格中删除它们来做到这一点。

2) 将所有 PCH 导入复制到您的测试用例中（暂时）。导入`"MyModel.h"`. 尝试获取一个实例`MyModel`并测试它不是`nil`并且具有正确的类。如果需要，请继续添加导入，但不要添加 .m。

3) 这一步和下一步是可选的，但我强烈推荐它们，因为它们可能会揭示代码中的问题区域，从而阻止您编写细粒度的测试。一旦你通过了这个简单的测试，就该开始清理你的导入了。切换回您的主项目。首先，我将开始从 pch 中删除您自己的任何类（不包括库/框架类型导入）。一次从 pch 中删除一个标题，并将它们导入真正需要它们的文件中。

3a) 在您完成此过程时，请确保从其他头文件中导入尽可能少的文件。在少数情况下，您的 .h 中应该只包含 #import，通常：1) 子类化导入文件中声明的类 2) 实现导入文件中声明的协议 3) 引用导入文件中定义的任何 C 类型. 对于协议和类，在标头中使用 @protocol 和 @class 前向声明它们，并且仅在您实际向它们发送消息或访问它们的属性的地方（通常在您的 .m 中）导入它们

因此，此时，您应该有一个通过的单元测试和一个更干净的 pch。确保现在清理单元测试中的导入。切换回您的测试目标，并开始编写更多测试。随着您使界面更加专注和可测试，导入文件的需求将会减少。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-22T05:51:45.313

我遇到了同样的问题，只需将 xxx-Prefix.pch 文件路径添加到我的**测试目标的****GCC_PREFIX_HEADER**即可解决，就像我对主应用程序目标所做的那样：

 **[![在此处输入图像描述](../Images/3b5294d024a63592e05ecd97b69f749c.png)](https://i.stack.imgur.com/mXxQu.png)**

# google-analytics - Google Analytics（分析）访客流：对 URL 进行分组？

> ID：12718060
> 
> 赞同：11
> 
> 时间：2012-10-03T22:57:09.127
> 
> 标签：google-analytics

我试图对我的网站访问者通过两个特定的多页操作（例如事件注册）的方式进行一些仔细分析，以确定某些访问者在何处以及为什么没有完成这些操作。我正在尝试使用 Google Analytics（分析）“访客流”工具来检查数据，尤其是找出“未完成”访客接下来去了哪里。

我遇到的困难是开发人员如何在我们的 MVC 框架中组合 URL 结构。粗略地说，URL 如下所示：

```
/contacts/432/edit                 /* create new person profile, [0-9]+ format for new person ID */
/event_orders/763/edit             /* create new event reg, [0-9]+ format for new event registration */
/event_orders/763?success=true     /* action completed */ 
```

由于 URL 的构造方式，目前无法使用 GA 访问者流分析来查看站点用户如何通过操作序列。

**我希望：**我希望能够通过使用正则表达式来定义 URL 分组。

我知道在过滤页面视图时可以使用正则表达式，但我在“访客流”部分中没有找到任何类似的内容。如果有什么看起来好像我需要定义站点范围的 URL 分组以便始终将`/contacts/[0-9]+/edit`其视为相同的 URL，从而在查看访问者流时将“创建新事件注册”页面视图分组为一个块。

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T09:47:27.877

不幸的是，如果不创建新配置文件以及一些自定义配置文件过滤器，就没有干净的方法可以做到这一点。

为此，只需跳转到管理界面，**创建一个新配置文件**（如果您不想混淆现有数据 - 您可以创建大量这些数据）并使用以下选项**创建自定义高级过滤器：**

**类型：**搜索和替换

**字段：**请求 URI

**搜索字符串：** ^/(contacts|event_orders)(/\d*)(.*)

**替换字符串：** /$A1$A3

这是 GA 界面中的外观：

![在此处输入图像描述](../Images/010e63aac2d978888ac19cfe25073800.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T02:22:06.260

在最初的问题中，我陈述了我的期望：“我希望能够通过使用正则表达式来定义 URL 分组。”

事实证明，谷歌分析的访问者流量正是允许这样做的！就是这样。

1.  **加载访客流量**，并应用您想要的任何其他过滤器和细分。

2.  **浏览访客流界面以查找您要分组的页面的*一个示例。***就我最初的问题而言，一个例子是`/contacts/432/edit`

3.  **左键单击该节点并选择“通过此处探索流量”。**这将转换界面，使其显示该节点的所有入口路径和出口路径，无论该节点在每个访问者与站点交互的顺序中出现在何处。

4.  **单击新显示中节点上方的“齿轮”图标。**这将打开一个新的对话框，允许多个“匹配”选项：“包含”、“开始于”、“结束于”、“等于”和“***匹配正则表达式***”！

5.  我没有在这里深入研究正则表达式灵活性的深度，但是对于我正在寻找的分组之一，**我进入`/contacts/*/edit`了第二个字段**

6.  第三个字段是可选的，但允许您为节点使用更友好的名称。

7.  **点击“应用”。**现在所有匹配的 URL 都将被分组！

8.  （奖励）为了查看已分组的特定 URL 以及每个 URL 的一些概览统计信息，**请左键单击节点并单击“组详细信息”。**

快乐的正则表达式！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-29T00:54:38.387

Robert Kingston 几乎是正确的，但是替换字符串应该是完全不同的——当你使用括号来捕捉你插入的字符串时`\1`，`\2`等等。

这是更改 URL 的方法：

1.  创建一个新视图。
2.  为其添加过滤器。
3.  选择非标准过滤器。
4.  使用“搜索和替换”选项。
5.  在过滤器归档中选择“请求 URI”。
6.  在“搜索字符串”中输入正则表达式（注意 URI 以 开头`/`，例如`http://abc.eu/my/file.php?abc`URI 是：）`/my/file.php?abc`。
7.  在“替换字符串”字符串中，您可以输入您想要的任何文本。

在这种特殊情况下，您需要：

1.  搜索字符串：`^/(\w+)/(\d+)[/?](\w+)(.*)`
2.  替换字符串：`/\1/\3?\2&\4`

原始 URI 和新 URI：

```
/contacts/432/edit -> /contacts/edit?432&
/event_orders/763?success=true -> /event_orders/success?763&=true 
```

这应该可以让您弄清楚原始 URI 是什么，但访问者流应该看起来更好（查询字符串在流中被忽略）。

**笔记！**即使您向旧视图添加过滤器，您的旧数据也不会被修改。这就是您应该添加新视图的原因。否则，您将使用旧格式和新格式的 URL 混合数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T13:44:27.080

Robert Kingston 说得对，尽管可能值得注意的是 $A1$A3 在替换字符串中的含义。

$A 表示过滤字段 A，1 表示“第一个弯曲括号中的内容”，3 表示“第 3 个括号中的内容”。开头的斜线实际上只是一个斜线。

我强烈建议为这种事情创建额外的配置文件，并始终拥有一个在发生灾难时永远不会触及的“普通”配置文件。

# c++ - 理解 C++ lambda 捕获规范中的 [&]

> ID：12718064
> 
> 赞同：1
> 
> 时间：2012-10-03T22:57:48.530
> 
> 标签：c++, lambda, c++11

这是做什么的？具体来说，我想要传递给 lambda 的“this”对象中有 20 个字段中的 3 个字段。如果我使用 [&] 会只占用我使用的 3 个字段吗？它们会通过引用还是值传递？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T23:02:14.177

> 这个 ([&]) 有什么作用？

它指定所有（隐式）捕获都是通过引用捕获的。也就是说，它的行为就好像存在闭包对象的隐藏引用成员，由实际捕获的对象初始化。

> 我想传递给 lambda 的“this”对象中有 20 个字段中有 3 个字段。如果我使用 [&] 会只占用我使用的 3 个字段吗？

`this`不，如果您仅捕获对象的成员，则仅捕获`this`指针（始终按值）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T23:04:47.317

捕获规范告诉编译器如何捕获不同的变量。Using`[&]`意味着 lambda 中提到的本地范围内的所有变量都将通过引用来引用，即，只要使用 lambda，它们就需要保留。对这些变量的任何更改都将反映在原件中。您还可以使用`[=]`which 将存储正在使用的变量的副本。如果你想混合访问，你可以设置一个默认值并覆盖以后引用变量的方式，例如，`[=,&foo]`捕获所有通过值引用的变量，除了`foo`通过引用捕获的变量。

在任何情况下，lambda 对象只会存储对 lambda 函数内部实际使用的变量或捕获中明确（按名称）提及的变量的引用或副本（感谢 jpalecek 指出始终存储明确提及的变量）。

在提到的上下文中，您提到了成员变量：它们永远不会被捕获，因为它们不在本地范围内。可以捕获的是`this`，但由于它是不可变的，所以它总是被价值捕获。说到不可变：变量默认按值捕获`const`。如果要更改它们，则需要通过在参数列表和 lambda 函数的主体之间`mutable`提及来创建 lambda 函数。`mutable`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T23:02:43.040

Using `[&]` as your capture specification in a C++11 lambda simply means that any variable which is referenced inside the lambda will be treated as if it implicitly were specified using `&varname` in the capture specification. The lambda will not capture any unreferenced variable.

# javascript - jQuery .change() 函数问题

> ID：12718067
> 
> 赞同：0
> 
> 时间：2012-10-03T22:58:46.587
> 
> 标签：javascript, jquery, css, expressionengine, volusion

我在我的网站上使用 .change() 函数单击此处，它使用户能够选择其产品的数量。我遇到的问题是我的图表只是将我的我链接到 12 包而不是 6 包。我检查了萤火虫，我注意到 JS 创建了两个按钮，我相信链接到 6 包的按钮开始与 12 包的按钮重叠。

最终，我希望按钮链接相对于价格发生变化。有谁知道我需要在下面添加我的代码来实现这一点？

**我只有一个链接按钮，我正在使用表达式引擎，所以第二个是自动创建的**

```
<script type="text/javascript">
var message = new Array();
message[1] = "$15.00";
message[2] = "$25.00";
$(document).ready(function(){            
$("#item_select").change(function()
 {
  var message_index
  message_index = $("#item_select").val();
   $(".price-item h3").empty();
    if (message_index > 0)
    $(".price-item h3").append(message[message_index]);
  });
 });
 </script>

{p_cartlink}
 <a href="http:// class="button_atc atc_{url_title}"></a>
 {/p_cartlink} 
```

问题在于此代码用于模板，我不希望您`SLEEP-12 and SLEEP-6`使用产品 ID 所需的产品名称。是可以在JS中为每个按钮创建一个需要ID然后启用和禁用按钮的方式。例如，当您选择 6 件装时，会出现 6 件装按钮并禁用 12 件装？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T23:13:19.763

你可以这样做

```
$(document).ready(function() {
    $("#item_select").change(function() {
        var message_index
        message_index = $("#item_select").val();
        // get the correct button
        var $button = $('.price-item right .button_atc').eq(message_index-1);
        // hide button - not the correct one
        $('.price-item right .button_atc').not($button).hide();
        // show correct button
        $button.show();
        $(".price-item h3").empty();
        if (message_index > 0) $(".price-item h3").append(message[message_index]);
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T23:06:27.950

我将只有一个，而不是在您的页面中有两个链接按钮。然后，当索引更改时，我会更新该链接按钮的 href 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:25:57.227

这行得通吗？

```
<select id="item_select">
    <option value="6">6 pack</option>
    <option value="12">12 pack</option>
</select>

$('.button_atc').bind('click',function(){
var val = $('#item_select').val();
window.location = "store.bodyworksforme.com/ShoppingCart.asp?ProductCode=SLEEP"+val;
}); 
```

如果需要，您也可以为按钮设置 id 并使它们特定于产品。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T23:18:18.807

这变成了一个非常丑陋的 hack，代码未经测试，但我认为它应该可以工作。

请试一试，如果您有任何问题，请告诉我：

```
<script type="text/javascript">
var message = ["$15.00","$25.00"];
$(document).ready(function(){
    // Init to make sure we display the correct button @ load
    $("#item_select").trigger('change');

    // The change-function
    $("#item_select").on('change'.function() {
        var message_index = $("#item_select").val();
        var message_indexn = message_index.split(' ');
        var message_id = 0;
        for ($i = 0; i < message_indexn.length; i++) {
            if (/^[\d]+$/.test(message_indexn[i])) {
                message_id = message_indexn[i];
                break;
            }
        }

        $(".price-item h3").empty();
        if (message_index > 0)
            $(".price-item h3").append(message[message_index-1]);

        $('.price-item .button_atc').each(function () {
            if ($(this).attr('href') == 'http://store.bodyworksforme.com/ShoppingCart.asp?ProductCode=SLEEP-'+message_id) {
                if ($(this).is(':hidden'))
                    $(this).show();
            }
            else {
                if ($(this).is(':visible'))
                    $(this).hide();
            }
        });
    });
});
 </script> 
```

# php - 在新选项卡/页面中重新加载时保留有关 textarea 的信息

> ID：12718068
> 
> 赞同：0
> 
> 时间：2012-10-03T22:58:46.600
> 
> 标签：php, linux

从主题本身来看，我应该怎么做？...我正在使用管道将输出从 linux 获取到 Php。

例如

```
echo "<textarea cols='100' rows='20' readonly='readonly' style='resize:none;'>";

       $dev = stream_get_contents($pipes[1]);

       echo $dev;

       echo "</textarea>";

       fclose($pipes[1]); 
```

这是我的表格。

```
<form method="post">
<input type="radio" name="cmd" value="./iodev scan">Scan<br />
<input type="radio" name="cmd" value="./monitor">Enable Monitoring<br />
<input type="submit" value="GO">
</form> 
```

现在，当我获得数据时，我需要它在加载到新选项卡或页面或页面重新加载时保留在 textarea 中，它会坐在那里而不会消失。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:01:38.070

你可以尝试一些有趣的事情，比如让你的 textarea 名字很有趣`textPipes`

```
if (!isset($_POST['textPipes']) || empty($_POST['textPipes'])) {
    $_POST['textPipes'] = stream_get_contents($pipes[1]);
    fclose($pipes[1]);
}

echo "<textarea cols='100' rows='20' readonly='readonly' style='resize:none;' name='textPipes' >";
echo $_POST['textPipes'];
echo "</textarea>"; 
```

*** 编辑 ！***

根据您的要求，您也可以在 Memcache 中对其进行处理

```
$mem = new Memcache();
$mem->connect("localhost",11211);

#Identify current user
$currentUser = "demic0de";

#Create Unique Key
$key = $currentUser . sha1($pipes[1]);

if(!$mem->get($key))
{
    #set value and expire every 10 mins 
    $mem->set($key,stream_get_contents($pipes[1]) ,null,600);
    fclose($pipes[1]);
}

echo "<textarea cols='100' rows='20' readonly='readonly' style='resize:none;' name='textPipes' >";
echo $mem->get($key);
echo "</textarea>"; 
```

# xml - DTD 引用的初学者问题

> ID：12718069
> 
> 赞同：1
> 
> 时间：2012-10-03T22:58:50.267
> 
> 标签：xml, dtd

下午好，我对 XMl 和 DTD 还很陌生，但同时我也很开心。我有一个简单的任务，我将其命名为“联系人”，但我很难让 DTD 进行验证。我当然错过了一些东西，希望能得到一些提示或帮助。代码在下方，错误在代码下方。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Contacts [
<!ELEMENT Contacts (XYZ, ABC, WIZ)>
<!ELEMENT XYZ (#PCDATA)>
<!ELEMENT ABC (#PCDATA)>
<!ELEMENT WIZ (#PCDATA)>
]>
<Contacts>
<XYZ>
"XYZ Inc.",
    "Jones","Barnaby"
    "bjones@xyz.com"
    "Owner-Operator"
    "402-410-2314"
    "8923 Holmes St"
    "Omaha","NE","68222","USA"
    "<div>Prospect</div>"
    "Business"
</XYZ>

<ABC>
"ABC International"
    "Magnum","Thomas"
    "tmagnum@abcint.biz"
    "Owner-Operator"
    "402-310-2222"
    "402-571-2893"
    "3204 Plains Ave"
    "Papillion","NE","68103","USA"
    "<div>Vendor</div>"
    "Business"
</ABC>

<Wiz>"Wiz Kids"
    "Plum","Steve"
    "steve@wizkids.com"
    "Sales Rep"
    "402-555-2325"
    "402-516-2038"
    "402-333-2428"
    "1234 Main St"
    "Belluvue","NE","68201","USA
    #http://wizkids.com#
    <div>Vendor</div>"
</Wiz>
</Contacts> 
```

错误：

1.  必须声明元素类型“div”
2.  意外的元素“div”。父元素类型的内容必须匹配 (#PCDATA)。
3.  必须声明元素类型“div”
4.  意外的元素“div”。父元素类型的内容必须匹配 (#PCDATA)。
5.  必须声明元素类型“Wiz”
6.  必须声明元素类型“div”
7.  意外元素“Wiz”。父元素类型的内容必须匹配 (XYZ,ABC,WIZ)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:11:34.257

使用 CDATA 将内容包装在 xml 中，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Contacts [
<!ELEMENT Contacts (XYZ)>
<!ELEMENT XYZ (#PCDATA)>
]>
<Contacts>
<XYZ>
<![CDATA["XYZ Inc.",
    "Jones","Barnaby"
    "bjones@xyz.com"
    "Owner-Operator"
    "402-410-2314"
    "8923 Holmes St"
    "Omaha","NE","68222","USA"
    "<div>Prospect</div>"
    "Business"]]>
</XYZ>
</Contacts> 
```

或者将 div 添加到元素定义中：

```
<!ELEMENT XYZ (#PCDATA|div)> 
```

或者在 DTD 中定义“<”和“>”实体并在内容中使用它们而不是实际的“<”和“>”：

```
<!ENTITY lt "<">
<!ENTITY gt ">">
<XYZ>
&lt;Prospect&gt;
</XYZ> 
```

请记住，XML 标记区分大小写，因此要么定义元素 Wiz，要么在内容中将其称为 WIZ。

另外，请查看本教程：[http ://www.w3schools.com/dtd/default.asp](http://www.w3schools.com/dtd/default.asp)

# jquery - 如何在 Iphone (webview) 中隐藏滚动条

> ID：12718077
> 
> 赞同：0
> 
> 时间：2012-10-03T22:59:43.523
> 
> 标签：jquery, iphone, html, css

我正在做一个网络视图 Iphone 应用程序，并且我正在使用 Jquery 滚动。但在 Iphone 上出现滚动条。我该如何隐藏它。

链接在这里

[http://gridberry.com/iphone/](http://gridberry.com/iphone/)

请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:07:17.210

我不是 100% 确定，但请尝试更改您的设置，如下所示：

```
$(function(o){  
    o = $("#overscroll").overscroll({
        cancelOn: '.no-drag',
        persistThumbs: true,
        showThumbs: false,
        scrollLeft: 200
    }).on('overscroll:dragstart overscroll:dragend overscroll:driftstart overscroll:driftend', function(event){
        //
    });
}); 
```

如果这不起作用（我不能 100% 确定查看源代码），我知道可以采用更骇人听闻的方式来做到这一点。让我知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T04:54:59.970

您可以使用以下代码将滚动条隐藏到浏览器中。

```
overflow: hidden; 
```

或者

```
document.body.style.overflow = 'hidden'; 
```

# php - PHP使用'!!'转换为布尔值

> ID：12718078
> 
> 赞同：5
> 
> 时间：2012-10-03T23:00:04.867
> 
> 标签：php, boolean

这里相当直截了当的问题。一直在查看一些代码，我看到了一个似乎将给定变量转换为布尔值的函数。它是这样的：

```
function to_bool( $var ) {
    return !!$var;
} 
```

很简单，但它是如何工作的？以前从未见过这种情况，谷歌搜索并没有真正让我到任何地方。额外的'！' 有点翻转结果？'!$var' 可用于检查 var 是否为假，'!!' 也是如此 将“假”变为真，反之亦然？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T23:02:50.360

> how does it work?

The not operator places the variable into a conditional. Therefore, the result is boolean. The second not flips its value.

It's more clear just to use an explicit cast in your code rather than such a function:

```
(bool)$var; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T23:02:09.677

一个`!`是倒置的布尔值，所以两个`!!`是非倒置的布尔值。这是一个变量的双重否定，并以布尔类型返回

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T23:02:10.847

拿！！2

`!2`评估为`!(true)`

评估为`!false`最终结果`true`。not boolean 基本上将右操作数视为 bool。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-03T23:04:13.777

嗯……有趣。

好吧，PHP 在确定变量是“真”还是“假”时遵循一组特定的规则。

使用某些运算符将强制做出该决定。例如，当您使用运算符添加字符串和`"a"`整数时，您会得到，因为运算符的意图是连接。`2``.``"a2"``.`

在这里，第一个`!`意味着您试图否定变量。否定任何东西意味着您必须首先将其视为布尔值，这就是它的作用。然后第二个`!`只是否定它。

这是一种奇怪的做法。坦率地说，`if ($var)`会产生与您相同的结果`if (to_bool($var))`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-21T17:22:51.433

你也可以从类型转换的角度来看这个。在 PHP 中，对值执行逻辑表达式将给出布尔结果。因此，第一个否定隐含地将值转换为布尔值，而第二个求值只是反转第一个否定。您可以使用其他逻辑运算符来做同样的事情（虽然我不推荐它，因为有些有不同的优先级）：

```
// using "truthy" 2 as a value //

!!2          // true 
2 ||  false  // true
2 &&  true   // true
2 xor false  // true

// using "falsey" 0 as a value //

!!0         // false
0 ||  false // false
0 &&  true  // false
0 xor false // false 
```

# hibernate-envers - Hibernate Envers：检索修订类型已删除的条目

> ID：12718083
> 
> 赞同：2
> 
> 时间：2012-10-03T23:01:01.793
> 
> 标签：hibernate-envers

```
AuditQuery query = auditReader.createQuery()
                     .forRevisionsOfEntity(AB.class, false, true)
                     .add(AuditEntity.property("bId").eq(bId))
                     .addOrder(AuditEntity.revisionNumber().desc()); 
```

上面的代码检索除 RevType`DEL`修订之外的所有修订，因为`bId`column is `null`。

我有三个表`A`，`B`和`AB`。`AB`table 是一个关系表。因此`AB`表具有`abID`PK 和`aId`, `bID`, 修订信息。每当`B`被删除时，它都会更新`AB_AUDv table with revtype`DEL`and keeps`辅助`,`投标`as`null`。

要显示已删除`B`，任何人都可以建议我修改 auditreader 查询吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T06:14:13.730

您可以：

*   在删除时存储数据（[Envers 文档](http://docs.jboss.org/hibernate/core/4.0/devguide/en-US/html/ch15.html#d0e4871)，`org.hibernate.envers.store_data_at_delete`）
*   查询（删除它的修订版）处的实体 - 1。

# jquery - jQuery 1.8.2 + 非当前 jQuery UI = outerWidth 和 outerHeight 损坏

> ID：12718084
> 
> 赞同：13
> 
> 时间：2012-10-03T23:01:02.197
> 
> 标签：jquery, version, outerwidth

这是对错误关闭的问题的重做：[jQuery 1.8 outer Height/Width not working](https://stackoverflow.com/questions/12093806/jquery-1-8-outer-height-width-not-working)

我遇到了同样的问题。现在返回 jQuery 对象而不是数字`outerWidth`。`outerHeight`

我们使用的是 2012 年 1 月 10 日发布的 jQuery UI 1.8.17。它不是一个超级旧的版本，所以我感觉其他人会看到这个。由于一些糟糕的 jQuery ui 插件，我们被锁定在这个版本中，因此目前无法选择升级。

如果我找到解决方案，我会回答这个问题。

这是一个演示问题的小提琴[http://jsfiddle.net/delvarworld/yxDHu/](http://jsfiddle.net/delvarworld/yxDHu/)（在“管理资源”中添加了 jQuery UI 版本）

更新：这是因为 jQuery UI 中的这一行：

```
return orig[ "outer" + name ].call( this, size ); 
```

在 jQuery 1.8.2 中错误地触发了这种情况：

```
var chainable = arguments.length && ( defaultExtra || typeof margin !== "boolean" ), 
```

因为即使`size`未定义，检查也是针对`arguments.length`. chainable 在这里应该是假的。你可以传入 undefined ，它仍然会使参数成为长度为 1 的对象。有人需要阅读他们的 JS ;)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T23:37:12.883

一个简单的解决方案似乎只是传入`false`

```
$(document.body).outerWidth(false); 
```

或者，如果您想要边距，则为 true，但如果您传入 true，则看起来您不会遇到此错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-10T17:22:47.153

看起来是 jqueryUI 问题。似乎已在 1.8.22 中修复。

`With jquery UI 1.8.21:` [http://jsfiddle.net/yVq5H/13/](http://jsfiddle.net/yVq5H/13/)

`With jquery UI 1.8.22 (fixed):` [http://jsfiddle.net/yVq5H/14/](http://jsfiddle.net/yVq5H/14/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T23:17:08.973

我建议升级你的 jQuery 和 jQuery UI 包。1.8.1 和 1.8.2 尤其解决了与 outerWidth / outerHeight 相关的问题，当然 jQuery UI 需要保持同步。

请参阅公告上的更改日志以供参考：

[http://blog.jquery.com/](http://blog.jquery.com/)

[http://blog.jqueryui.com/](http://blog.jqueryui.com/)

# c - 如何访问 UNICODE_STRING 命令行变量？

> ID：12718085
> 
> 赞同：0
> 
> 时间：2012-10-03T23:01:02.227
> 
> 标签：c, windows, winapi, process, command-line-arguments

我发现在 windows 中运行的程序的命令行参数存储在 Process Environment 块中。我发现更多的是在 PEB 内部有一个名为 RTL_USER_PROCESS_PARAMETERS 的结构，它包含一个名为 UNICODE_STRING CommandLine 的成员变量；我可以通过编写 ac 代码来访问这个变量吗？请协助有关 PEB 的更多信息，请参阅此链接 [http://msdn.microsoft.com/en-us/library/aa813706%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa813706%28VS.85%29.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:24:47.023

你需要这个[`GetCommandLine`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683156%28v=vs.85%29.aspx)功能。即使您的程序是 ANSI，您仍然可以显式调用宽版本`GetCommandLineW`.

此功能[记录在 MSDN 上](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683156%28v=vs.85%29.aspx)。查看“要求”部分，您会看到它已在 中定义，`WinBase.h`但您应该包含`Windows.h`. 它仅从 Windows XP 开始可用，因此根据您使用的 SDK 版本，您可能需要先定义[`_WIN32_WINNT`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383745%28v=vs.85%29.aspx)：

```
#define _WIN32_WINNT 0x0502
#include <windows.h> 
```

# ruby-on-rails - 路由错误：将参数传递给控制器 中的操作

> ID：12718086
> 
> 赞同：1
> 
> 时间：2012-10-03T23:01:02.773
> 
> 标签：ruby-on-rails, routing, parameter-passing, rails-routing, link-to

我的模型摘要：一个用户有很多约会。一个约会有很多预订。预订属于约会。

我正在尝试链接到一个特定视图（称为“users_bookings”），该视图列出了特定约会的所有预订。这是我尝试过的：

```
<% current_user.appointments.each do |appointment|%>
    <%= link_to "view all bookings", users_bookings_appointment_booking_path(appointment)%>
<%end%> 
```

这是我得到的错误：

```
undefined method `users_bookings_appointment_bookings' 
```

附加信息：

路线：

```
resources :appointments do
    resources :bookings do
      get 'users_bookings', :on => :collection
    end        
  end 
```

预订控制器创建操作：

```
def create
    @appointment = Appointment.find(params[:booking][:appointment_id])
    @booking = @appointment.bookings.new(params[:booking]) 
```

预订控制器 Users_bookings 操作：

```
def users_bookings
    @appointment = Appointment.find(params[:booking][:appointment_id])
    @bookings = @appointment.bookings.all
end 
```

users_bookings 视图：

```
<% @bookings.each do |booking| %>
    <td><%= booking.appointment_date%></td>
    <td><%= booking.start_time %></td>
    <td><%= booking.end_time %></td>
<%end%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:45:09.320

`match`除非您真的想匹配该 URL 的*所有*HTTP 请求（`GET`,`POST`等），否则您不应该使用（正如其他人所建议的那样）。相反，只需向`do`块中的资源添加路由：

```
resources :appointments do
  resources :bookings do
    get 'user_bookings', :on => :collection
  end
end 
```

这将为向“/appointments/:appointment_id/bookings/user_bookings”的请求添加额外的路由，`GET`并将其路由到“bookings#user_bookings”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T23:40:58.563

您是否尝试定义指向控制器中已定义操作的自定义路由，例如：

```
match 'appointments/:id/users_bookings' => 'bookings#users_bookings', :as => :users_bookings 
```

资源丰富的路线只是减轻您为 CRUD 操作键入标准路线的负担，但可以使用自定义路线进行扩展，例如，如果您想为资源对象的 PDF 或 CSV 导出提供下载链接

然后，您可以在视图文件中使用 users_bookings_path 来指向操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T23:35:31.290

我会将其更改为预订控制器的索引操作。这样它将匹配'/appointments/1/bookings'。

但是，如果有原因您不能这样做，因为它不是标准路由之一，您需要在 routes.rb 文件中指定它。就像是：

```
match '/appointments/:id/bookings/users_bookings' => 'bookings#users_bookings' 
```

# java - 如何抓取网站？

> ID：12718088
> 
> 赞同：-3
> 
> 时间：2012-10-03T23:01:08.553
> 
> 标签：java, android

我知道如何解析 RSS 提要，但如何阅读文章？我必须抓取网站吗？或者有没有用java解析文章的替代方法？

提前致谢

编辑：我决定使用[jSoup](http://jsoup.org)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T23:13:05.127

那么RSS提要（大概）包含作为文章链接的URL，所以它（大概）归结为您所说的“阅读”。

*   如果您只需要获取它们，请使用`URL.getInputStream`或其他一些 HTTP 客户端库。

*   如果您想显示新闻文章页面供最终用户阅读，那么您只需要在本机浏览器中打开 URL。

*   如果您想提取文章文本，那么是的，您确实需要使用适当的 HTML 解析器或（blech！）使用忽略 HTML 结构的 kludgey 文本模式识别来解析 HTML。

# c++ - 了解 SSE3 矩阵乘法优化

> ID：12718093
> 
> 赞同：0
> 
> 时间：2012-10-03T23:01:40.820
> 
> 标签：c++, sse

参考[http://blogs.msdn.com/b/xiangfan/archive/2009/04/28/optimize-your-code-matrix-multiplication.aspx](http://blogs.msdn.com/b/xiangfan/archive/2009/04/28/optimize-your-code-matrix-multiplication.aspx)。

```
template<>
void SeqMatrixMult4(int size, float** m1, float** m2, float** result)
{
    Transpose(size, m2);
    for (int i = 0; i < size; i++) {
        for (int j = 0; j < size; j++) {
            __m128 c = _mm_setzero_ps();

            for (int k = 0; k < size; k += 4) {
                c = _mm_add_ps(c, _mm_mul_ps(_mm_load_ps(&m1[i][k]), _mm_load_ps(&m2[j][k])));
            }
            c = _mm_hadd_ps(c, c);
            c = _mm_hadd_ps(c, c);
            _mm_store_ss(&result[i][j], c);
        }
    }
    Transpose(size, m2);
} 
```

为什么`_mm_hadd_ps(c, c)`在最里面的 for 循环之后还有 2 个？为了验证我的理解：此代码从 m1 加载 4 个浮点数，从 m2 加载另外 4 个浮点数，然后将它们相乘得到 4 个浮点数 ( `__m128`)。然后我将它们相加`c`（此时，它仍然是 4 个浮点数？）。然后在for循环之后我`hadd`这个结果两次？那有什么作用？

* * *

我稍微重写的代码会产生错误的结果

```
long long start, end;
__m128 v1, v2, vMul, vRes;
vRes = _mm_setzero_ps();

start = wall_clock_time();
transpose_matrix(m2);
for (int i = 0; i < SIZE; i++) {
    for (int j = 0; j < SIZE; j++) {
        float tmp = 0;
        for (int k = 0; k < SIZE; k+=4) {
            v1 = _mm_load_ps(&m1[i][k]);
            v2 = _mm_load_ps(&m2[j][k]);
            vMul = _mm_mul_ps(v1, v2);

            vRes = _mm_add_ps(vRes, vMul);
        }
        vRes = _mm_hadd_ps(vRes, vRes);
        _mm_store_ss(&result[i][j], vRes);
    }
}
end = wall_clock_time();
fprintf(stderr, "Optimized Matrix multiplication took %1.2f seconds\n", ((float)(end - start))/1000000000);

// reverse the transposition
transpose_matrix(m2); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T23:47:48.680

`haddps`不会对向量中的所有四个元素求和。需要两条`haddps`指令来获得完整的水平总和。

如果我们对向量的元素进行编号`{c0,c1,c2,c3}`，则第一个`haddps`产生`{c0+c1, c2+c3, c0+c1, c2+c3}`。第二个产生`{c0+c1+c2+c3, <same thing in the other lanes>}`。

# php - 如果表> 0 MySQL 显示代码

> ID：12718094
> 
> 赞同：0
> 
> 时间：2012-10-03T23:01:48.963
> 
> 标签：php, mysql

我有一个名为“cat_id”的 mysql 表。

我的网站被编码为每页显示一个句子列表。但我也希望这些在页面上显示句子的 div 来显示它们的类别 ID。

因此，类别仅从我的数据库中的数字 0 开始。那么我将如何制作一个 if 语句，并将其放在显示内容的这些 div 中，如果“cat_id”高于 0，则它显示此代码。

```
<div class="meta">
<small class="float-left gray">
Your Category: <a href="<?=$u?>categories/<?=$cat_record['cat_id']?>/<?=$page_no?>"><?=stripslashes($cat_record['cat_id'])?></a>
</small>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T23:10:21.487

所以我假设这段代码是从查询体中提取的，如果是这样，你可以在它周围包装一个 if 语句

```
<?php if ($cat_record['cat_id'] > 0): ?>
    <div class="meta">
    <small class="float-left gray">
    Your Category: <a href="<?=$u?>categories/<?=$cat_record['cat_id']?>/<?=$page_no?>"><?=stripslashes($cat_record['cat_id'])?></a>
    </small>
    </div>   
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T23:11:06.853

我猜您的返回值 from`$cat_record['cat_id']`被解释为字符串，因此不能用于 if 语句中的整数比较。

尝试转换为整数并进行比较。

```
$cat_int = intval($cat_record['cat_id']);
if($cat_int>0)
{
     //Code here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T23:20:26.297

您当然可以从数据库中获取所有条目，并在您的 php 代码中使用条件来仅显示 cat_id>0 的条目，但我认为仅从数据库中检索您首先需要的条目会更简洁SQL 语句中的 WHERE 子句。

尝试以下操作：

```
<?php
    //Get results above 0
    $query="SELECT * FROM tablename WHERE cat_id>0";
    $result=mysql_query($query);
    $cat_records=array();
    while($row=mysql_fetch_array($result)) $cat_records[]=$row;

    //Loop through results to display the div
    foreach($cat_records as $cat_record){
        echo '<div class="meta"><small class="float-left gray">Your Category: <a href="'.$u.'categories/'.$cat_record['cat_id'].'/'.$page_no.'">'.stripslashes($cat_record['cat_id']).'</a></small></div>';
    }
?> 
```

# macos - Installing JSON::XS on Mac OSX

> ID：12718104
> 
> 赞同：6
> 
> 时间：2012-10-03T23:02:47.063
> 
> 标签：macos, perl, perl-module

I hope you're all ready for a long adventure through my frustration:

I'm using Perl 5.10, on Mac OSX : Snow Leopard, with XCode 3.2.6.

What I am trying to do is use the module JSON::XS in a program.

This is the first time that I've ever done something with Perl, so I look up some simple example programs and try them out, and they all work. Then I go to use JSON::XS. I get:

```
Can't locate JSON/XS.pm in @INC (@INC contains: /Library/Perl/Updates/5.10.0 /System/Library/Perl/5.10.0/darwin-thread-multi-2level /System/Library/Perl/5.10.0 /Library/Perl/5.10.0/darwin-thread-multi-2level /Library/Perl/5.10.0 /Network/Library/Perl/5.10.0/darwin-thread-multi-2level /Network/Library/Perl/5.10.0 /Network/Library/Perl /System/Library/Perl/Extras/5.10.0/darwin-thread-multi-2level /System/Library/Perl/Extras/5.10.0 .) at part1.pl line 5.
BEGIN failed--compilation aborted at part1.pl line 5. 
```

I do some Googling, and figure that it needs to be installed. Also in my Googling I find heavy recommendations to use cpanm. So I try installing cpanm first using cpan (which I already have).

I get a very long printout, that basically says NO, NOT OK, "chances to succeed are limited", and FAILED over and over and over again. It's too long to include in its entirety, but the bits I found interesting are:

```
Warning (usually harmless): 'YAML' not installed, will not store persistent state
Running make test
Can't test without successful make
Running make install
Make had returned bad status, install seems impossible
Could not read '/Users/danielgierl/.cpan/build/ExtUtils-ParseXS-3.15-VSmBrZ/META.yml'. Falling back to other methods to determine prerequisites 
```

I look into installing YAMl, because sections of output like the above (which I got repeatedly) make me think that's the problem. Essentially it also failed, and among other reasons it gave me warnings like the above.

Another section of the output says:

```
make: *** No rule to make target `/System/Library/Perl/5.10.0/darwin-thread-multi-2level/CORE/config.h', needed by `Makefile'.  Stop. 
```

I look this up online, and though I understand why it says what it does, I see no way that I could fix this, since these are Makefiles gotten from cpan or elsewhere.

Another section:

```
Running install for module 'version'
Running make for J/JP/JPEACOCK/version-0.9901.tar.gz
Has already been unwrapped into directory /Users/danielgierl/.cpan/build/version-0.9901-U8IMPt
Could not make: Unknown error
Warning (usually harmless): 'YAML' not installed, will not store persistent state
Running make test
Can't test without successful make
Running make install
Make had returned bad status, install seems impossible 
```

In general lots of unknown errors. I am also trouble by the section where it tells me:

```
Testing if you have a C compiler
ld: library not found for -lbundle1.o
collect2: ld returned 1 exit status
lipo: can't open input file: /var/folders/1C/1CnzBuv+F5y+8M5YPm6I4k+++TI/-Tmp-//ccTWRqov.out (No such file or directory)
error building /var/folders/1C/1CnzBuv+F5y+8M5YPm6I4k+++TI/-Tmp-/compilet.bundle from /var/folders/1C/1CnzBuv+F5y+8M5YPm6I4k+++TI/-Tmp-/compilet.o at /System/Library/Perl/5.10.0/ExtUtils/CBuilder/Base.pm line 213.

I cannot determine if you have a C compiler
so I will install a perl-only implementation

You can force installation of the XS version with

perl Makefile.PL --xs 
```

I know for a fact that I have a c compiler, since gcc -v tells me that it is version 4.2.1\. On the plus side, it does tell me that my kit looks good (whatever that is). If I try running the command they recommend me, I get told that there is no such file or directory.

After some more Googling, I keep seeing XCode re-re-referenced for Mac users. I already had a version of XCode, but because it might have problems, I uninstall it, then get version 3.2.6 (my OS is too old for the newer versions). The install fails for unknown reasons, and it tells me to contact the software company. However, before it fails, it does install the UNIX tools, including gcc (which I later got the latest version for), so I don't think that's the problem.

All in all, this has consumed some 6 hours of my time today, and I'm stressed and physically ill (though I was this morning before starting this futile venture, but it's been exacerbated), and I have no idea where I am supposed to go next.

I'm hoping that it's all been some stupid error that'll be remedied in 10 seconds by an experienced user, but I fear the worst. In general I've done every bit of advice I've found, from running with --sudo to sacrificing a goat to the sun gods. I'd appreciate any help.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T00:36:28.220

你最好别管系统`perl`。相反，使用[perlbrew](http://search.cpan.org/perldoc/App%3a%3aperlbrew)安装您自己`perl`的 s.

您可以在不使用using的情况下安装[cpanm](http://search.cpan.org/App%3a%3acpanminus)`cpan`

`curl -L http://cpanmin.us | perl - App::cpanminus`

为您当地的`perl`.

此外，您可能必须[为 XCode 安装命令行工具](https://developer.apple.com/xcode/)。

如果不能，您可能需要考虑从[MacPorts](http://www.macports.org/)安装构建工具，并将它们放在系统路径之前的路径中，但在您的本地路径之后，`perl`因为您不一定想弄乱`perl`MacPorts 可能安装的任何一个。

# jquery - jquery cloning new elements and adding variable to name

> ID：12718106
> 
> 赞同：-1
> 
> 时间：2012-10-03T23:02:51.930
> 
> 标签：jquery, clone

Hi I have this jQuery Function to duplicate form fields. Now I need to process them with PHP and my problem is that the cloned elements have the same input name.

I would like to add and variabel on the end of the name like _1 _2 _3 and so on. Also it would be great to put in a hidden field the amount of cloned elements to process them in a loop.

I'm really not good in jQuery and need it pretty quick otherwise I would start reading documentary about it and do it myself.

Maybe u guys can help me out. Would appriciate it a lot :)

There is the jQuery Part:

```
$(document).ready(function() {
$('#btnAdd').click(function() {
    var num     = $('.clonedInput').length;
    var newNum  = new Number(num + 1);

    var newElem = $('#input' + num).clone().attr('id', 'input' + newNum);

    newElem.children(':first').attr('id', 'name' + newNum).attr('name', 'name' + newNum);
    $('#input' + num).after(newElem);

    $('#btnDel').removeAttr('disabled');

    if (newNum == 10)// Max
        $('#btnAdd').attr('disabled','disabled');
});

$('#btnDel').click(function() {
    var num = $('.clonedInput').length;

    $('#input' + num).remove();
    $('#btnAdd').removeAttr('disabled','');

    if (num-1 == 1)
        $('#btnDel').attr('disabled','disabled');
});

$('#btnDel').attr('disabled','disabled'); 
```

});

And here the HTML

```
<div id="input1" class="clonedInput">
<!-- Elements to clone -->
    <div class="control-group">
        <label class="control-label" for="">Firmenname</label>
        <div class="controls">
            <input type="text" class="input-xlarge {validate:{required:true}}" rel="popover" data-content="Der Firmenname ist ein wichtiger Hinweis." data-original-title="Hilfe" id="firma" name="firma">
        </div>
    </div>

    <div class="control-group">
        <label class="control-label" for="">Branche</label>
        <div class="controls">
            <input type="text" class="input-xlarge" name="branche">
        </div>
    </div>

    <div class="control-group">
        <label class="control-label" for="">Anschrift</label>
        <div class="controls">
            <input type="text" class="input-xlarge" name="anschrift">
        </div>
    </div>

    <div class="control-group">
        <label class="control-label" for="">Ansprechpartner</label>
        <div class="controls">
            <input type="text" class="input-xlarge" name="ansprechpartner">
        </div>
    </div>

    <div class="control-group">
        <label class="control-label" for="">Tel.</label>
        <div class="controls">
            <input type="text" class="input-xlarge">
        </div>
    </div>
<!-- END Elements to clone -->    
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:00:29.037

您的输入名称应该全部是`name[]`而不是`name_1`,`name_2`等。PHP 识别这种名称格式，并创建`$_POST['name']`一个数组，其中每个具有该名称的输入都有一个元素。

您仍然需要为元素提供唯一 ID。但也许您克隆的输入根本不需要 ID，因此您可以完全避免这个问题。

您可能还想查看 jquery-dynamic-form 插件。但是，我刚刚检查并没有解决这个问题（实际上，每行中嵌入+和-按钮的演示具有重复的ID，因此它不是有效的DOM）。

顺便说一句，您不需要使用`new Number`. 写吧：

```
var newNum = num+1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:05:50.883

要创建唯一的 id，只需保留一个从 0 开始并在每次创建新克隆时递增 1 的计数器。然后将此计数器连接到您的姓名字段。

# jquery - How do I parse this XML in jQuery that store values in attributes only?

> ID：12718107
> 
> 赞同：0
> 
> 时间：2012-10-03T23:02:58.507
> 
> 标签：jquery, xml, xml-parsing

I have this XML called via $.post() and this is the return value:

```
<processResponse xmlns:client="http://xmlns...." xmlns="http://xmlns..." xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <ns2:ProcessResult xmlns:ns2="http://xmlns...">
      <ns2:StatusCode>SUCCESS</ns2:StatusCode>
      <ns2:StatusMessages>
         <ns2:StatusMessage>
            <ns2:Code>0</ns2:Code>
            <ns2:Message>Success</ns2:Message>
         </ns2:StatusMessage>
      </ns2:StatusMessages>
   </ns2:ProcessResult>
   <premises>
      <ns3:cwsPremise xmlns:ns3="http://xmlns..">
         <ns3:cwsPremiseService>
            <ns3:cwsPremiseHeader PremiseID="5855654654"/>
            <ns3:cwsPremiseDetails PremiseID="5855654654" PremiseType="BBBB" Address="3892 A street" City="PA" Postal="96456" PremiseDataArea="PB" PremiseInfo="b55" District="a333" IsMultiple="N" AllowSelfService="Y" NeedAppointment="N"/>
         </ns3:cwsPremiseService>
      </ns3:cwsPremise>
      <ns3:cwsPremise xmlns:ns3="http://xmlns...">
         <ns3:cwsPremiseService>
            <ns3:cwsPremiseHeader PremiseID="99565423587"/>
            <ns3:cwsPremiseDetails PremiseID="99565423587" PremiseType="AAAA" Address="123 Main street" City="SC" Postal="98652" PremiseDataArea="AE" PremiseInfo="K876" District="b999" IsMultiple="N" AllowSelfService="Y" NeedAppointment="N"/>
         </ns3:cwsPremiseService>
      </ns3:cwsPremise>
   </premises>
</processResponse> 
```

How do parse the attributes such as PremiseID, PremiseType, Address, Postal, PremiseDataArea, PremiseInfo, District that is in `<ns3:cwsPremiseDetails PremiseID="5855654654" PremiseType="BBBB" Address="3892 A street" City="PA" Postal="96456" PremiseDataArea="PB" PremiseInfo="b55" District="a333" IsMultiple="N" AllowSelfService="Y" NeedAppointment="N"/>`?

This is my attempt:

```
$.post(url, function(xml) {

   var $PremiseID = $(xml).find('cwsPremiseDetails').attr('PremiseID').text();

   console.log($PremiseID);
   // output: nothing

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:09:21.633

JQuery::attr() 返回一个字符串，而不是一个 jQuery 对象。尝试不使用 .text() 调用。

```
var $PremiseID = $(xml).find('cwsPremiseDetails').attr('PremiseID'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T23:47:27.900

尝试先解析 xml，如果您没有将 dataType 指定为 xml，它将不会返回 XMLDocument，而只会返回一个字符串

```
$.post(url, function(xml) {    
   var $PremiseID = $($.parseXML(xml)).find('cwsPremiseDetails').attr('PremiseID');    
   console.log($PremiseID);    
}); 
```

# asp.net - ASP.Net MVC 返回相同的视图，使用特定的布局页面

> ID：12718108
> 
> 赞同：4
> 
> 时间：2012-10-03T23:03:16.570
> 
> 标签：asp.net, asp.net-mvc, razor

我有一个视图，我正在使用特定的 layout.cshtml 文件，而不是主共享布局页面：“_LayoutExCr”

这对于控制器的 Get 部分很好：

```
 //
    // GET: /Exhibitor/Create

    public ActionResult Create()
    {
        return View("Create","_LayoutExCr");
    } 
```

这工作正常 - 并显示具有特定 _LayoutExCr“主”页面的创建视图。

但是，在我的 Create 方法的 POST 中，如果输入了错误的访问代码，我想返回到相同的视图，使用 _LayoutExCr“主”页面 - 但 VS2012 Express 用红色下划线：

```
 return View(exhibitor, "_LayoutExCr"); 
```

> 'System.Web.Mvc.Controller.View(string, string)' 的最佳重载方法匹配有一些无效参数

```
 //
    // POST: /Exhibitor/Create

    [HttpPost]
    public ActionResult Create(Exhibitor exhibitor)
    {
        if (ModelState.IsValid)
        {
            if (exhibitor.AccessCode == "myaccesscode")
            {
                db.Exhibitors.Add(exhibitor);
                db.SaveChanges();
                return RedirectToAction("Thankyou");
            }
            else
            {
                ModelState.AddModelError("", "The Access Code provided is incorrect.");
                return View(exhibitor, "_LayoutExCr");
            }

        }

        return View(exhibitor, "_LayoutExCr");
    } 
```

谁能让我知道如何使用相同的布局页面将模型返回到视图？

谢谢，

标记

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T23:06:13.193

[http://msdn.microsoft.com/en-us/library/dd492244(v=vs.98).aspx](http://msdn.microsoft.com/en-us/library/dd492244(v=vs.98).aspx)

你想要一个不同的重载：

`return View("Create", "_LayoutExCr", exhibitor);`

第一个参数是视图的名称。第二个是主人的名字。第三个是您要发送到视图的模型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T23:04:45.340

您需要在模型[之前传递视图名称](http://msdn.microsoft.com/en-us/library/dd492244%28v=vs.98%29.aspx)**和**主名称，以及它们两者

# vb.net - 如何将导入的命名空间输入 CompileAssemblyFromSource

> ID：12718110
> 
> 赞同：2
> 
> 时间：2012-10-03T23:03:20.850
> 
> 标签：vb.net

我正在尝试将 VB 源文件加载到内存中。但是，VB 文件假定与其关联的项目具有在项目级别定义的一些全局“导入命名空间”。此 VB 功能允许单个文件在每个文件上省略 Imports 语句（在 C# 中使用）。

```
 Dim sourceCode As String = ""
    'sourceCode &= "Imports System.Data" & vbNewLine
    sourceCode &= "Class Foo" & vbNewLine
    sourceCode &= "Sub Print()" & vbNewLine
    sourceCode &= "Dim dtbl As DataTable" & vbNewLine
    sourceCode &= "System.Console.WriteLine(""Hello, world!"")" & vbNewLine
    sourceCode &= "End Sub" & vbNewLine
    sourceCode &= "End Class" & vbNewLine

    Dim compiler As New Microsoft.VisualBasic.VBCodeProvider

    Dim params As New Compiler.CompilerParameters
    params.ReferencedAssemblies.Add("System.dll")
    params.ReferencedAssemblies.Add("System.Data.dll")
    params.ReferencedAssemblies.Add("System.Xml.dll")
    params.GenerateInMemory = True
    params.GenerateExecutable = False

    Dim results As Compiler.CompilerResults = compiler.CompileAssemblyFromSource(params, sourceCode)

    If results.Errors.Count > 0 Then
        For Each compileError In results.Errors
            Console.WriteLine(compileError.ToString)
        Next
        Return
    End If

    Dim assembly = results.CompiledAssembly 
```

第 2 行被注释掉。如果我取消注释并添加 Imports 语句，则代码可以正常工作。如果我将“Dim dtbl As DataTable”更改为“Dim dtbl As System.Data.DataTable”，它也可以正常工作。

有没有办法将这个 Imports 语句提供给编译器或参数，而不是取消注释那行代码，就好像它是一个全局项目级别的 Imported Namespace？

我可以将这个 Imports 语句添加到我读入的每个文件的顶部。但如果它已经存在，那么我会收到 Imports 语句重复的错误。我可以做一些正则表达式检查以查看 Imports 语句是否已经存在，但我想尽可能地利用 System.CodeDom 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:55:27.497

好的，没有答案:(我猜框架没有做我想做的事。这是我使用正则表达式注入 Imports 语句的 hacky 解决方案。

```
sourceCode = AddImportsIfNeeded(sourceCode, "System.Data")

Private Function AddImportsIfNeeded(ByVal sourceCode As String, ByVal namespaceToImport As String) As String

    If Not Regex.IsMatch(sourceCode, "^\s*Imports\s+" & Regex.Escape(namespaceToImport) & "\s*$", RegexOptions.Multiline) Then
        Return "Imports " & namespaceToImport & vbNewLine & sourceCode
    End If
    Return sourceCode

End Function 
```

请注意，如果文件包含 Option 语句（如 Option Strict On），这将不起作用。Imports 语句必须位于 Option 语句下方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-09T15:27:53.080

`CompilerOptions`您可以使用类的属性导入命名空间`CompilerParameters`。将此行添加到您的示例中，编译器将不再生成编译器错误：

```
params.CompilerOptions = "/import:System.Data" 
```

# ruby - Ruby：用 Like 准备好的语句

> ID：12718120
> 
> 赞同：0
> 
> 时间：2012-10-03T23:04:11.623
> 
> 标签：ruby, prepared-statement

我正在尝试使用`like`关键字创建一个准备好的语句：

这是sql语句：

```
select user, 
       name_xml 
  from employee
 where name_xml like '<name>Varname</name>' 
```

`Varname`是一个动态变量。它可以包含任何字符串值。例如：`Varname = 'John Smith'`

代码：

```
sql_name = @dbh.prepare(sql)

sql = 'select user, name_xml from employee
where name_xml  like '<name>?</name>''

sql_name.execute (Varname) 
```

我面临的问题是“？” 它应该包含 Varname 字符串值。谁能帮我这个？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T02:22:32.323

当 a 在字符串文字中时，大多数驱动程序不会将其识别`?`为占位符。为了解决这个问题，您有几个选择。首先，您可以在 Ruby 中完成字符串工作：

```
sql = 'select user, name_xml from employee where name_xml like ?'
#...
sql_name.execute("<name>#{Varname}</name>") 
```

或者您可以将这些部分粘贴到 SQL 中：

```
sql = %q{select user, name_xml from employee where name_xml like '<name>' || ? || '</name>'}
#...
sql_name.execute(Varname) 
```

应该在大多数数据库中`||`连接字符串，但有些人会想要`+`或`concat(...)`代替。

请注意第二个中的 for quoting 切换`%q{...}`，它的作用类似于单引号 (Ruby) 字符串，但您不必担心转义 SQL 想要用于其字符串文字的嵌入式单引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:31:48.333

感谢您的答复！那应该行得通。我尝试了以下方法，它也可以完美运行：

```
sql = 'select user, name_xml from employee
where name_xml  like ('#{test}')'

Varname = "John Smith" 
  test = "%<name>"+Varname+"</name>%"

 sql_name= @dbh.prepare(sql)

  sql_name.execute()

  sql_name.fetch do |row|
    sql_name =  row[0]
  end 
```

# vb.net - 动态地将组合框单元添加到 datagridview

> ID：12718122
> 
> 赞同：0
> 
> 时间：2012-10-03T23:04:17.073
> 
> 标签：vb.net, datagridview, datagridcomboboxcolumn, datagridviewcombobox, datagridviewcomboboxcell

我有一个动态填充的datagridview。我希望根据某些条件在某些列中填充组合框。

但是我的组合框单元被添加到**最底部的行**而不是**正确的行**。

谁能告诉我需要做什么？

我哪里错了？

```
Private Sub dgvSteps_CellContentClick(ByVal sender As Object,
                                          ByVal e As DataGridViewCellEventArgs
                                          ) Handles dgvSteps.CellContentClick

        Dim reader = New XmlTextReader("C:\Qualcomm\" & tempNode.profilePath)
        reader.WhitespaceHandling = WhitespaceHandling.None
        reader.Read()
        reader.Read()
        reader.Read()
        dgv2.Rows.Clear()

        While reader.NodeType <> XmlNodeType.EndElement
            Dim str1 As String
            Dim str2 As String
            str1 = reader.Name
            str2 = reader.ReadElementString(str1)

            If reader.Name = "Port" Then
                Dim dgv2Cb As New DataGridViewComboBoxCell  'Create DatagridViewComboBoxCell
                Dim ports As String() = SerialPort.GetPortNames()
                Dim port As String
                For Each port In ports
                    dgv2Cb.Items.Add(port)
                Next port
                dgv2Cb.Sorted = True
                dgv2.Rows.Add(str1, str2)
                rowIndex = dgv2.RowCount  'Get the RowCount at the time of adding combobexcell, and add comboboxcell in that row

                dgv2.Rows(rowIndex).Cells(1) = dgv2Cb
            Else
                dgv2.Rows.Add(str1, str2)
                               End If
        End While
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:28:57.783

您是否将数据网格的 AutoGenerateColumns 属性设置为 false？

```
dgCFG.AutoGenerateColumns = false; 
```

# java - 在 Java Servlet 中生成 JSON 对象

> ID：12718125
> 
> 赞同：0
> 
> 时间：2012-10-03T23:04:44.983
> 
> 标签：java, jquery, json, servlets

我正在尝试实现一个 Servlet，它生成 JSON 的方式与此 php 脚本相同：

```
$response->page = $page;
$response->total = $total_pages;
$response->records = $count;
$i=0;
while($row = mysql_fetch_array($result,MYSQL_ASSOC)) {
/*
    $response->rows[$i]['id']=$row[id];
    $response->rows[$i]['cell']=array($row[id],$row[invdate],$row[name],$row[amount],$row[tax],$row[total],$row[note]);
*/
    $response->rows[$i]['id']=$row['id'];
    $response->rows[$i]['name']=$row['name'];
    $response->rows[$i]['author']=$row['author'];
    //$response->rows[$i]=array($row[id],$row[invdate],$row[name],$row[amount],$row[tax],$row[total],$row[note]);
    $i++;
}        
echo json_encode($response); 
```

正确的 json 输出应该是这样的：

```
{"page":null,"total":0,"records":"68","rows":[{"id":"1","name":"Thinking in Java","author":null},{"id":"4","name":"Effective Java: A Programming Language Guide","author":"Joshua Bloch"},{"id":"5","name":"Learn Java for Android Development","author":"Jeff Friesen"}]} 
```

我以这种方式尝试过，但它似乎产生了另一个输出：

```
JsonArray jArray = new JsonArray();
    JsonObject jo = new JsonObject();
    jo.addProperty("page", page);
    jo.addProperty("total", totalPageString);
    jo.addProperty("records", count);
    jArray.add(jo);

    int i = 0;
    try {
        while (rs2.next()) {
            JsonObject tmp = new JsonObject();

            tmp.addProperty("rows[" + i + "]['lastname']", rs2.getString(1));
            tmp.addProperty("rows[" + i + "]['firstname']",
                    rs2.getString(2));
            tmp.addProperty("rows[" + i + "]['staffnumber']",
                    rs2.getString(3));
            jArray.add(tmp);
            i++;
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }

    response.setContentType("application/Json");
    response.getWriter().print(jArray); 
```

我的输出如下所示：

```
[{"page":"0","total":"Infinity","records":2},{"lastname":"Hanke","firstname":"Jannis","staffnumber":"9395835"},{"lastname":"Hanke","firstname":"Jannis","staffnumber":"83833"}] 
```

rs2 是一个包含数据库数据的结果集。php 代码来自 jquery combogrid 插件的示例页面。

我真的不明白这个工作。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:17:45.500

给定所需的 JSON，请考虑以下内容：

```
JsonObject jo = new JsonObject();
jo.addProperty("page", page);
jo.addProperty("total", totalPageString);
jo.addProperty("records", count);

JsonArray jArray = new JsonArray();
try {
    while (rs2.next()) {
        JsonObject row = new JsonObject();

        row.addProperty("id", rs2.getString(1));
        row.addProperty("name", rs2.getString(2));
        row.addProperty("author", rs2.getString(3));
        jArray.add(row);
    }
    jo.add("rows", jArray);
} catch (SQLException e) {
    e.printStackTrace();
}

response.setContentType("application/json");
response.getWriter().print(jo); 
```

重要笔记：

*   因为你有`rs2`结果集，所以`rows`消失了。您不希望将其作为字段名称的一部分。
*   您可能会构建`jArray`并将其附加到对象上，而不是相反。
*   请参阅[此链接](https://stackoverflow.com/questions/477816/the-right-json-content-type)以获取正确的内容类型

# qt - 如何强制执行 qmake 库依赖项的顺序？

> ID：12718126
> 
> 赞同：1
> 
> 时间：2012-10-03T23:04:44.717
> 
> 标签：qt, qmake

我遇到了很多错误，因为 qmake 不正确地订购了我正在使用的 boost 库。

这是 .pro 文件的样子

```
QT       += core gui

TARGET = MyTarget
TEMPLATE = app

CONFIG += no_keywords \
          link_pkgconfig

SOURCES += file1.cpp \
           file2.cpp \
           file3.cpp

PKGCONFIG += my_package \
             sqlite3

LIBS += -lsqlite3 \
        -lboost_signals \
        -lboost_date_time

HEADERS += file1.h\
           file2.h\
           file3.h

FORMS += mainwindow.ui

RESOURCES += Resources/resources.qrc 
```

这将产生以下命令：

```
g++ -Wl,-O1 -o MyTarget file1.o file2.o file3.o moc_mainwindow.o -L/usr/lib/x86_64-linux-gnu -lboost_signals -lboost_date_time -L/usr/local/lib -lmylib1 -lmylib2 -lsqlite3 -lQtGui -lQtCore 
```

注意：mylib1 和 mylib2 由另一个项目静态编译，放置在 /usr/local/lib 中，并有一个适当的 pkg-config .pc 文件指向那里。.pro 文件通过`my_package`in引用它们`PKGCONFIG`。问题不在于 pkg-config 的输出，而在于 Qt 的排序。

这是 .pc 文件：

```
prefix=/usr/local
exec_prefix=${prefix}
libdir=${exec_prefix}/lib
includedir=${prefix}/include

Name: my_package
Description: My component package
Version: 0.1
URL: http://example.com
Libs: -L${libdir} -lmylib1 -lmylib2
Cflags: -I${includedir}/my_package/ 
```

链接阶段非常失败，因为 mylib1 和 mylib2 提出了许多未定义的引用来提升应用程序和 mylib1 和 mylib2 都在使用的库。

我们有另一种使用 scons 的构建方法，它为链接器正确排序。它的构建命令顺序如下。

```
g++ -o MyTarget file1.o file2.o file3.o moc_mainwindow.o -L/usr/local/lib -lmylib1 -lmylib2 -lsqlite3 -lboost_signals -lboost_date_time -lQtGui -lQtCore 
```

请注意，主要区别在于 boost 库的顺序。Scons 将它们放在 QtGui 和 QtCore 之前的最后，而 qmake 将它们放在首位。编译命令中的其他差异并不重要，因为我手动修改了 qmake 生成的 make 文件，并且简单的重新排序解决了问题。

所以我的问题是，我如何在我的 .pro 文件中强制执行正确的顺序，尽管 qmake 认为它们应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T03:35:25.377

mylib1、mylib2 的 .pc 文件可能不完整。

如果这些库依赖于`-lboost_date_time`and `-lboost_signals`，那么 .pc 文件应该已经通过以下方式引入这些依赖项：

```
Libs: -lboost_date_time -lboost_signals 
```

...并且 qmake 会将它们放在链接行中的正确位置。无需将它们显式放入 .pro 文件中 :)

# asp.net - 验证：使用带有 Web 表单和 EF 的 ModelState

> ID：12718130
> 
> 赞同：1
> 
> 时间：2012-10-03T23:05:23.520
> 
> 标签：asp.net, entity-framework, validation, web-applications

我正在使用 VS 2012/.NET 4.5、EF 5 以及从较旧的 VS 2012/.NET 4 项目导入/打开的解决方案。从原始项目中的数据库生成了一个 edmx（带有自跟踪实体），我只是尝试使用 ASP.NET Web 表单而不是 MVC 向我的模型添加数据验证。MVC 不是此项目的选项。

我已经尝试过这种方法，同时谷歌搜索了几天并将各种信息拼接在一起。

我试过使用 MetadataType 来扩展我的 edmx 模型……它只是不工作。这是它的样子：

```
//generated by VS 2010
namespace DataAccess.Model
{
    [DataContract(IsReference = true)]
    public partial class NoBilling: IObjectWithChangeTracker, INotifyPropertyChanged
    {
        //...and so on...all generated by Visual Studio
    }
} 
```

...扩展：

```
namespace DataAccess.Model
{
    [MetadataType(typeof(DataAccess.Model.NoBillingMetadata))]
    public partial class NoBilling {}

    public partial class NoBillingMetadata
    {
        [Required, StringLength(50)]
        public string Company
        {
            get;
            set;
        }

        [Required, MaxLength(50)]
        public string EmailDomain
        {
            get;
            set;
        }
    }
} 
```

...在网络表单中：

```
protected void SaveButton_Click(object sender, EventArgs e)
{
    //assign to entity
    NoBilling nb = new NoBilling();
    nb.Zip = "10001";

    //save
    try
    {
        NoBillingProxy nbPx = new NoBillingProxy();
        nbPx.Save(nb);
    }
    catch (Exception exp)
    {               
        //data validation
        if (ModelState.IsValid)
        {
            //always tests true, no values in ModelState collection
        }

        throw;
    }
} 
```

我知道我在这里遗漏了一些东西，但我没有无限的时间来继续挖掘和拼凑东西。我不知道这个 ModelState 类的内部结构，它是如何被调用、触发等的。我假设它不起作用，因为我实际上没有绑定任何数据？我不会总是将实体绑定到控件，所以有没有办法改变“IsValid”状态，没有绑定？

这是我用来获得一堆我尝试过的文章：

[http://msdn.microsoft.com/en-us/vs11trainingcourse_aspnetwebforms45_topic3.aspx](http://msdn.microsoft.com/en-us/vs11trainingcourse_aspnetwebforms45_topic3.aspx)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:27:59.910

在 MVC 中，模型验证由控制器自动调用。当您使用网络表单时，您需要自己调用验证，使用 a`ValidationContext`和`TryValidateObject`。

请参阅[http://odetocode.com/blogs/scott/archive/2011/06/29/manual-validation-with-data-annotations.aspx](http://odetocode.com/blogs/scott/archive/2011/06/29/manual-validation-with-data-annotations.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-28T12:12:38.780

使用 System.ComponentModel.DataAnnotations；

公共类 SecurityLayer {
StringBuilder SB = new StringBuilder();

```
 public string SecurityValidate(object OBJ)
    {
        SB.Clear();
        var context = new ValidationContext(OBJ, serviceProvider: null, items: null);
        var results = new List<ValidationResult>();

        var isValid = Validator.TryValidateObject(OBJ, context, results);

        if (!isValid)
        {
            foreach (var validationResult in results)
            {
                //    Console.WriteLine(validationResult.ErrorMessage);
                SB.AppendLine(validationResult.ErrorMessage);
            }
        }

        return (SB.Length == 0 ? "SUCCESS" : SB.ToString());
    }
} 
```

# jquery - jQuery + XML：解析节点父级

> ID：12718132
> 
> 赞同：0
> 
> 时间：2012-10-03T23:05:29.653
> 
> 标签：jquery, xml

我有这个 XML：

```
<node-type-A>
    <node-type-B name='somname1'>
        <mynode>mynodevalue-1</mynode>
    </node-type-B>
    <node-type-B name='somname2'>
        <mynode>mynodevalue-2</mynode>
    </node-type-B>
</node-type-A>

<node-type-A>
    <node-type-B name='somname3'>
        <mynode>mynodevalue-3</mynode>
    </node-type-B>
</node-type-A> 
```

现在，我有 mynode 值（这是输入）。如果超父节点类型 A 有多个节点类型 B，我需要输出节点类型 B 的名称。

*   因此，如果输入是 mynodevalue-2，那么它将输出 somname2。
*   如果输入是 mynodevalue-3 那么它不会输出任何东西，因为它的超级父节点类型 A 只有一个节点类型 B。
*   如果输入是 mynodevalue-1，那么它将输出 somname1（因为它的超级父节点类型 A 有多个节点类型 B）。

我正在使用 jquery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:11:55.740

您可以使用`filter`方法：

```
$('node-type-A').filter(function(){
    return $('node-type-B', this).length > 1
}).find('node-type-B').each(function(){
    console.log(this.name)
}) 
```

# c++ - 将 C++ 库链接到具有非 C++ 主函数的程序

> ID：12718135
> 
> 赞同：1
> 
> 时间：2012-10-03T23:05:52.397
> 
> 标签：c++, c, dll, shared-libraries

给定一些 C++ 函数（使用 STL），您可以在具有未使用 C++ 编译器编译的 main 函数的程序中使用它们吗？你能避免将该程序与 C++ 编译器联系起来吗？

我知道接口必须是外部“C”函数并且它们不应该抛出异常。

通过搜索网络，我发现许多来源暗示这是不可能的，例如：

*   [http://www.gnu.org/software/libtool/manual/html_node/C_002b_002b-libraries.html#C_002b_002b-libraries](http://www.gnu.org/software/libtool/manual/html_node/C_002b_002b-libraries.html#C_002b_002b-libraries) “因此，运行 ld 链接 C++ 程序或库被视为失败。”
*   [http://www.velocityreviews.com/forums/t591272-re-linking-ac-program-to-ac-library-which-uses-stl.html](http://www.velocityreviews.com/forums/t591272-re-linking-a-c-program-to-a-c-library-which-uses-stl.html) “调用 C++ 库的 C 主程序命运多舛开始”

但我也发现了这个： [http ://wewantarock.wordpress.com/2010/11/01/working-around-the-static-libstdc-restriction/](http://wewantarock.wordpress.com/2010/11/01/working-around-the-static-libstdc-restriction/)

我是这样理解的：解决方法是构建一个共享库。您使用 C++ 编译器链接共享库，而共享库本身就是一种“程序”（具有 DLLMain 之类的启动/拆卸函数，而不是普通的 main 函数）。使用共享库的程序不需要知道它是一个 C++ 库。

我理解正确吗？

有什么问题吗？

编辑1：我试过了 - 成功。我用 libtool 构建了我的共享库，并且可以通过与普通的链接来使用它

```
cc c_main_program.o -lmy_cpp_library -o c_main_program 
```

**更新的问题**，在成功的实验之后：是否有任何让我感到惊讶的问题（例如在其他平台上，或者当我在全局变量中使用构造函数时，......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T23:20:27.310

只要您导出接口是使用已知调用约定的直接 c 函数，在内部使用 STL 就没有问题。Dll 已经构建，不需要调用链接器或编译器来使用它们。

c++ 的问题在于 c++ 的二进制格式依赖于实现，因此无法保证使用不同编译器构建的源代码兼容代码将是二进制兼容的。链接模板存在单独的问题，因为库中仅包含模板的实例化具体版本，编译器必须查看模板的定义以避免两次声明它（对于大多数编译器）。

c 没有此类问题 c 函数具有已定义的接口，并且数据类型的布局也是已知的，因此从单独的编译器动态加载没有问题。但这意味着你只能使用 c 的类型和特性。

有关更详尽的讨论，请查看[此](https://rads.stackoverflow.com/amzn/click/com/0123850037)

# java - 《Spring persistence with Hibernate》一书中画廊的源代码不起作用

> ID：12718136
> 
> 赞同：1
> 
> 时间：2012-10-03T23:05:53.910
> 
> 标签：java, spring, glassfish

我已经下载了本书随附的源代码`Spring persistence with Hibernate / Paul Tepper Fisher, Brian D. Murphy`。源代码位于[http://www.apress.com/9781430226321](http://www.apress.com/9781430226321)。我尝试运行画廊项目，它抱怨`transaction-type`不是`JTA`. 所以我`RESOURCE_LOCAL`改为`JTA`. 然后测试开始失败，因为

```
Caused by: javax.persistence.PersistenceException: [PersistenceUnit: galleryPersistenceUnit] Unable to build EntityManagerFactory
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:892) 
```

由于

```
Caused by: org.hibernate.HibernateException: The chosen transaction strategy requires access to the JTA TransactionManager
at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:399)
at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1385)
at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:954)
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:883) 
```

在我完成`@Ignore`所有测试之后，我现在收到以下错误。有谁知道如何解决这一问题？我在 Mac OSX 上运行 Glassfish 3.1.2 和 Netbeans 7.2。

```
INFO: PWC1412: WebModule[null] ServletContext.log():Initializing Spring root WebApplicationContext
SEVERE: PWC1306: Startup of context /gallery failed due to previous errors
SEVERE: PWC1305: Exception during cleanup after start failed
org.apache.catalina.LifecycleException: PWC2769: Manager has not yet been started
at org.apache.catalina.session.StandardManager.stop(StandardManager.java:873)
at org.apache.catalina.core.StandardContext.stop(StandardContext.java:5571)
at com.sun.enterprise.web.WebModule.stop(WebModule.java:527)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:5384)
at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2019)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:680)

 SEVERE: ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException: java.lang.NoSuchMethodError:   org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V
at org.apache.catalina.core.StandardContext.start(StandardContext.java:5389)
at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2019)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.NoSuchMethodError: org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V
at org.apache.commons.logging.impl.SLF4JLocationAwareLog.info(SLF4JLocationAwareLog.java:159)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:187)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:4750)
at com.sun.enterprise.web.WebModule.contextListenerStart(WebModule.java:550)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:5366)
... 39 more

WARNING: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.NoSuchMethodError:  org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V
 java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.NoSuchMethodError: org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:921)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2019)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:680)

SEVERE: Exception while invoking class com.sun.enterprise.web.WebApplication start method
java.lang.Exception: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.NoSuchMethodError: org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V
at com.sun.enterprise.web.WebApplication.start(WebApplication.java:138)
at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
at  com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:680)

SEVERE: Exception while loading the app
INFO: closing
SEVERE: Exception while loading the app : java.lang.IllegalStateException:   ContainerBase.addChild: start: org.apache.catalina.LifecycleException:  java.lang.NoSuchMethodError: org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j /Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V
SEVERE: ReaderProvider raises an exception on destroy()
java.lang.IllegalStateException: WEB9031: WebappClassLoader unable to load resource [org.apache.lucene.search.FieldCache], because it has not yet been started, or was already stopped
at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1401)
at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1359)
at org.apache.lucene.index.DirectoryReader.doClose(DirectoryReader.java:818)
at org.apache.lucene.index.IndexReader.decRef(IndexReader.java:170)
at org.apache.lucene.index.IndexReader.close(IndexReader.java:1302)
at org.hibernate.search.reader.SharingBufferReaderProvider$ReaderUsagePair.close(SharingBufferReaderProvider.java:202)
at org.hibernate.search.reader.SharingBufferReaderProvider.destroy(SharingBufferReaderProvider.java:127)
at org.hibernate.search.impl.SearchFactoryImpl.close(SearchFactoryImpl.java:243)
at org.hibernate.search.event.FullTextIndexEventListener.cleanup(FullTextIndexEventListener.java:182)
at org.hibernate.event.EventListeners$2.processListener(EventListeners.java:219)
at org.hibernate.event.EventListeners.processListeners(EventListeners.java:181)
at org.hibernate.event.EventListeners.destroyListeners(EventListeners.java:215)
at org.hibernate.impl.SessionFactoryImpl.close(SessionFactoryImpl.java:980)
at org.hibernate.ejb.EntityManagerFactoryImpl.close(EntityManagerFactoryImpl.java:126)
at org.glassfish.persistence.jpa.JPADeployer.closeEMFs(JPADeployer.java:417)
at org.glassfish.persistence.jpa.JPADeployer.event(JPADeployer.java:408)
at org.glassfish.kernel.event.EventsImpl$1.run(EventsImpl.java:120)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:59:32.033

听起来像是与 sfl4j（Java 的简单日志框架）版本的冲突。我看到项目中有 1.6.0`pom.xml`并且在那个版本中请求方法有一个`int`参数。

似乎 glassfish 中的某个类（从 apache 项目中提取）正在寻找该类的不同版本，可能是旧版本。

# dns - 从浏览器访问域时服务器如何检索网站

> ID：12718141
> 
> 赞同：0
> 
> 时间：2012-10-03T23:06:29.080
> 
> 标签：dns, get, webpage, put

每当我接受采访时，我都会不断收到这些问题。如果用户单击浏览器上的链接或在浏览器中键入域时，究竟发生了什么以及如何检索数据并在用户计算机上呈现网页。有哪些书可以帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:30:53.070

我参与的一本好书是[The TCP/IP Guide](https://rads.stackoverflow.com/amzn/click/com/159327047X)。它有点过时（从 2005 年开始），但基本思想没有改变。他还有一个[网站](http://www.tcpipguide.com/)。

# regex - 卷曲 http://subtitle.co.il/browsesubtitles.php?cs=movies | grep -o -P '(?<=list.php\?mid=)\d+'

> ID：12718142
> 
> 赞同：0
> 
> 时间：2012-10-03T23:06:37.710
> 
> 标签：regex, bash, curl, grep

bash 脚本的新手，以前的答案对我没有帮助。

我正在尝试从网页中获取 id，我需要解析`page1`，获取 id 列表，并使用它们来解析相应的网页。

问题是我不确定如何编写脚本......

这是我想做的事情：

1.  `url1`根据解析`regexp`。输出：提取的 id 列表（`101`、`102`、`103`等）。
2.  用输出id解析每个url，例如：parse( `http://someurl/101`)，然后parse( `http://someurl/102`)等。

到目前为止，我想出了这个命令：

```
curl http://subtitle.co.il/browsesubtitles.php?cs=movies | grep -o -P '(?<=list.php\?mid=)\d+' 
```

上面的命令有效，并给出了一个 id 列表。

对接下来的步骤有什么建议吗？我在正确的轨道上吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:26:19.010

这是一个递归算法，所以你需要写一个函数：

```
parse_url() {
  ids=$(curl "$1" | grep -o -P '(?<=list.php\?mid=)\d+')
  for id in $ids
  do echo $id
     parse_url "http://someurl/$id"
  done
} 
```

使用起始页面调用此函数，它将回显在该页面上找到的所有 ID，然后递归解析所有`http://someurl/ID`页面。

这只是回显在所有页面中找到的所有 ID。如果您想对找到的 ID 执行其他操作，可以将此脚本通过管道传递给该 ID。另外，我不做任何重复抑制，所以如果页面之间有反向引用，这个脚本可能会永远循环。您可以跟踪已经在数组中看到的 ID，并在递归之前检查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T23:35:55.057

您下一步可能会对所有 id 进行循环：

```
parse_url () {
    for id in $(grep -o -P '(?<=list.php\?mid=)\d+' "$1"); do
        # Use $id
        url="http://someurl/$id"
        # or parse for the URL with the ID
        url="$(grep -o -P 'http://[a-zA-Z./%0-9:&;=?]*list.php\?mid=$id[a-zA-Z./%0-9:&;=?]*' "$1")"
        # Get page
        new_page_file="$(mktemp)"
        wget -q -O "$new_page_file" "$url"
        # Parse url
        parse_url "$new_page_file"
        # Delete old temporary file
        rm "$new_page_file"
    done
}

wget -q -O file.html http://subtitle.co.il/browsesubtitles.php?cs=movies
parse_url file.html 
```

在这里，我们定义了一个名为 的函数`parse_url`，它遍历它在作为参数传递的文件中找到的所有 id（即，`$1`是传递给函数的第一个参数）。

然后我们可以使用 ID 生成 URL，或者我们可以从同一文件中 grep URL，现在提取 ID。请注意，用于查找 URL 的正则表达式假定 URL 具有特定格式：

1.  它以“http://”开头
2.  它仅包含方括号之间使用的字符

要下载页面，我们使用命令创建一个临时文件`mktemp`。既然您说您是 bash 脚本的新手，我将简要解释`$(...)`一下出现的 s。他们运行括号之间指定的命令或一系列命令，然后执行它们，捕获它们的标准输出并将其放置在原来的位置`$(...)`。`$new_page_file`在这种情况下，它被放置在我们分配给变量的双引号内。因此`$new_page_file`包含为存储临时文件而创建的随机文件名。

然后，我们可以将 URL 下载到该临时文件中，调用该函数对其进行解析，然后将其删除。

为了最初调用该函数，我们将初始 URL 下载到一个文件`file.html`中，然后调用该函数并将该文件名作为参数传递。

编辑：添加递归，基于*Barmar*的回答

希望这会有所帮助=)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T23:37:39.290

这种 cli html 解析正是我编写[Xidel](http://videlibri.sourceforge.net/xidel.html)的目的。（而且它使用 xpath 而不是正则表达式，所以你不会召唤[Cthulhu](https://stackoverflow.com/a/1732454/1501222) ......（太晚了，他已经在那里了，我刚去我的浴室，有这个非常奇怪的声音......））

如果您只需要ID

> 使用它们来解析相应的网页。

您可以只关注链接，而不是显式提取 id。

例如打印所有链接页面的标题

```
xidel 'http://subtitle.co.il/browsesubtitles.php?cs=movies' -f '//a[starts-with(@href,"list.php")]' -e //title 
```

`//a` 通过跟踪其目的地的所有链接`starts-with(@href,"list.php")`。（`-f`表示跟随链接，`-e`：表示提取数据。）

或者，如果您想提取视图 url 上的大文本块：（不懂语言，不知道它在说什么......）

```
xidel 'http://subtitle.co.il/browsesubtitles.php?cs=movies' -f '//a[starts-with(@href,"list.php")]/replace(@href, "list.php[?]mid=", "view.php?id=")' -e 'css("#profilememo")' 
```

或者如果你真的需要单独的 id，你可以先提取它们：

```
xidel 'http://subtitle.co.il/browsesubtitles.php?cs=movies' -e '//a[starts-with(@href,"list.php")]/substring-after(@href,"mid=")' -f '//a[starts-with(@href,"list.php")]' -e //title 
```

或者更容易使用临时变量`links`来存储所有链接：

```
xidel 'http://subtitle.co.il/browsesubtitles.php?cs=movies' -e '(links:=//a[starts-with(@href,"list.php")])[0]' -e '$links/substring-after(@href,"mid=")' -f '$links' -e //title 
```

# c# - 在 WPF 中自动隐藏网格行

> ID：12718145
> 
> 赞同：0
> 
> 时间：2012-10-03T23:06:58.513
> 
> 标签：c#, wpf, gridview

我正在尝试构建一个全屏应用程序，该应用程序将在网格行中包含行/列。我想要的是默认折叠的角落行/列，每当光标位于边缘时，行/列应该是未折叠的，即它会变得可见（就像 Windows 中的媒体播放器对他播放控件所做的那样。

有人可以帮我详细说明如何实现这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T05:33:31.863

您应该能够将要隐藏高度的行设置为 0 并添加 MouseEnter 和 MouseLeave 事件。命名您的行（以便您可以调用它），然后在 MouseEnter 方法（增加使其可见）和 MouseLeave 方法（减少回 0 以隐藏）中修改高度。

我目前无法访问 VS，所以我不能 100% 确定它们是事件名称，但应该让你明白我的意思。

# memory - 如何在linux中为进程分配更多内存

> ID：12718148
> 
> 赞同：4
> 
> 时间：2012-10-03T23:07:10.503
> 
> 标签：memory, memory-management, fedora

我在 64 位 Fedora 16 上使用 CAD 程序。在某一时刻，程序突然崩溃并完全退出。我最初的猜测是，没有足够的内存可供该程序执行该操作并退出。为了测试它，我想为该特定程序分配更多内存，如果其他程序没有足够的内存，我可以这样做。我怎样才能做到这一点？我如何告诉（希望通过终端）系统将增加的内存分配给特定进程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T23:17:00.710

这不是内存管理在 Unix/Linux 上的工作方式。您不会为进程分配内存，它们只是在需要时请求更多的虚拟内存。

也许您在谈论的是进程的虚拟内存限制。你可以使用shell的`ulimit`命令来设置各种进程限制；使用该`-d`选项设置进程的数据段（即堆）和`-s`堆栈的最大大小。但是，非root用户只能减少限制，不能增加限制。此选项适用于该 shell 进程以及从中运行的任何程序；我不确定您如何从 GUI 窗口管理器中为应用程序执行此操作（也许将命令放在您的`.xinitrc`.

系统管理员可以在 中配置每个用户和每个组的默认限制`/etc/security/limits.conf`。

# c# - 异步 Web 服务中的 EndInvoke 返回无用值

> ID：12718153
> 
> 赞同：1
> 
> 时间：2012-10-03T23:07:36.147
> 
> 标签：c#, web-services, soap

我对示例中的简单 C# Web 服务有疑问。这是我的服务器端代码：

```
public delegate string LengthyProcedureAsyncStub(int milliseconds);

    public class MyState
    {
        public string text;
        public object previousState;
        public LengthyProcedureAsyncStub asyncStub;
    }

    [WebMethod]
    public IAsyncResult BeginLengthyProcedure(int milliseconds, AsyncCallback cb, object s)
    {
        LengthyProcedureAsyncStub stub = new LengthyProcedureAsyncStub(LengthyProcedure);
        MyState ms = new MyState();
        ms.previousState = s;
        ms.asyncStub = stub;
        return stub.BeginInvoke(milliseconds, cb, ms);
    }

    public string LengthyProcedure(int milliseconds)
    {
        System.Threading.Thread.Sleep(milliseconds);
        return "Success";
    }

    [WebMethod]
    public string EndLengthyProcedure(IAsyncResult call)
    {
        MyState ms = (MyState)call.AsyncState;
        string result = ms.asyncStub.EndInvoke(call);
        return result;//ms.text;
    } 
```

我像这样使用来自客户端的服务：

```
private void button1_Click(object sender, EventArgs e)
    {

        Waiter(5000);

    }

    private void Waiter(int milliseconds)
    {
        asyncProcessor.Service1SoapClient sendReference;
        sendReference = new asyncProcessor.Service1SoapClient();
        sendReference.ClientCredentials.Windows.AllowedImpersonationLevel = System.Security.Principal.TokenImpersonationLevel.Impersonation;
        sendReference.BeginLengthyProcedure(milliseconds, ServiceCallBack, null);

    }

    private void ServiceCallBack(IAsyncResult result)
    {
        string strResult = result.ToString();
    } 
```

问题是客户端变量 strResult 的值应该是“Sucess”，而不是：“System.ServiceModel.Channels.ServiceChannel+SendAsyncResult”。我做错了什么或忽略了什么？

提前感谢您的时间:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:30:47.197

您必须通过`sendReference`而不是`null`.

```
private void Waiter(int milliseconds)
{
    asyncProcessor.Service1SoapClient sendReference;
    sendReference = new asyncProcessor.Service1SoapClient();
    sendReference.ClientCredentials.Windows.AllowedImpersonationLevel = System.Security.Principal.TokenImpersonationLevel.Impersonation;
    sendReference.BeginLengthyProcedure(milliseconds, ServiceCallBack, sendReference);

}

private void ServiceCallBack(IAsyncResult result)
{
    asyncProcessor.Service1SoapClient sendReference = result.AsyncState as asyncProcessor.Service1SoapClient;
    string strResult = sendReference.EndLengthyProcedure(result);
} 
```

# python - django-social-auth 获取声称的 id

> ID：12718159
> 
> 赞同：0
> 
> 时间：2012-10-03T23:08:23.337
> 
> 标签：python, django, openid

我正在尝试使用[django-social-auth](https://github.com/omab/django-social-auth)进行 OpenId 登录，并且正在尝试使其与[Steam](http://steamcommunity.com/dev)一起使用。问题是，Steam 的系统只是给你一个 64 位的 hash，使用 claim_id，然后使用它来使用另一个 API 获取信息。我的问题是：我如何使用 django-social-auth 获得claim_id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:14:52.597

最后，声明的 id 作为 uid 保存在 social_auth 记录中。

# iphone - iPhone Objective C KissXML XMLDocument 字符串？

> ID：12718163
> 
> 赞同：1
> 
> 时间：2012-10-03T23:08:59.120
> 
> 标签：iphone, objective-c, xml

我正在为我的一个朋友的播客创建一个应用程序。该应用程序有一个带有其 URL 的 rss xml 文件。在这里查看之后，我决定使用 KissXML 作为它的文档，但我似乎无法让 DDXMLDocument 正常工作。我创建了一个与播客的 rss 提要的连接，其 URL 格式为

```
NSString *podcastURL = [NSString stringWithFormat:@"http://podcast.website.com/rss/"];
NSURL *requestURL = [NSURL URLWithString:podcastURL];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:requestURL];
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self] 
```

然后，在委托方法中

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data

我正在尝试使用接收到的数据来创建 DDXMLDocument。在使用...创建字符串后，我尝试了 initWithData 和 initWithString

```
NSError *error = nil;
NSString *response = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```

我 NSLog 这个字符串来查看它的内容，对我来说它看起来就像一个完美的 xml 文档。我创建 XMLDoc

```
DDXMLDocument *responseDoc = [[DDXMLDocument alloc] initWithXMLString:response options:0 error:&error]; 
```

但是当我尝试检查这个新的 XMLDoc 时，我得到的只是 NULL。谁能看看我做错了什么？XML 字符串响应对我来说似乎是有效的，但我想我真的不知道。谢谢你的帮助！

编辑：我想我应该添加一些我收到的 XML，以防有人发现我无法找到的问题。不过，播客有 100 多集，每集都有长度、描述、标题、iTunes 的一堆东西等所有内容。这是 XML 开头的样子，其中包括一集（虽然没有任何真实的播客信息）：

```
<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"         xmlns:cc="http://web.resource.org/cc/" xmlns:itunes="http://www.itunes.com/dtds/podcast-1.0.dtd" xmlns:media="http://search.yahoo.com/mrss/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<channel>
    <atom:link href="http://podcast.libsyn.com/rss/" rel="self" type="application/rss+xml"/>
    <title>Podcast</title>
    <pubDate>Mon, 01 Oct 2012 06:18:33 +0000</pubDate>
    <lastBuildDate>Wed, 03 Oct 2012 22:19:37 +0000</lastBuildDate>
    <generator>Libsyn WebEngine 2.0</generator>
    <link>http://podcast.libsyn.com</link>
    <language>en</language>
    <copyright><![CDATA[podcast]]></copyright>
    <docs>http://podcast.libsyn.com</docs>
    <managingEditor>person@hotmail.com (person@hotmail.com)</managingEditor>
    <description><![CDATA[Comedy podcast with People!]]></description>
    <image>
        <url>http://assets.libsyn.com/content/3220867.jpg</url>
        <title>podcast</title>
        <link><![CDATA[http://podcast.libsyn.com]]></link>
    </image>
    <itunes:author>Person1  and Person2</itunes:author>
<itunes:keywords>keywords</itunes:keywords>
<itunes:category text="Comedy"/>
    <itunes:image href="http://assets.libsyn.com/content/3220867.jpg" />
    <itunes:explicit>yes</itunes:explicit>
    <itunes:owner>
        <itunes:name><![CDATA[Person1]]></itunes:name>
        <itunes:email>person@hotmail.com</itunes:email>
    </itunes:owner>
    <itunes:summary><![CDATA[Show Summary]]></itunes:summary>
    <itunes:subtitle><![CDATA[podcast]]></itunes:subtitle>
            <item>
        <title>#123 - Episode123 Title</title>
        <pubDate>Mon, 01 Oct 2012 06:18:33 +0000</pubDate>
        <guid isPermaLink="false"><![CDATA[46f771dfb560aa4d573fe3ebdee86870]]></guid>
        <link><![CDATA[http://podcast.libsyn.com/Episode123_Title]]></link>
        <media:thumbnail url="http://assets.libsyn.com/item/2082832" />
        <description><![CDATA[<p>Description of Episode 123.</p>
<p>Music: Episode 123 Music</p>]]></description>
        <enclosure length="80069010" type="audio/mpeg" url="http://traffic.libsyn.com/podcast/123.mp3" />
        <itunes:duration>01:06:44</itunes:duration>
        <itunes:explicit>no</itunes:explicit>
        <itunes:keywords />
        <itunes:subtitle><![CDATA[Episode 123 Description]]></itunes:subtitle>
                </item> 
```

对不起，如果这太多了，不能在这里发布。此 XML 中包含标题内容和一个项目（剧集）。这看起来像应该与 DDXMLDocument 一起使用的正确代码吗？再次感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:01:33.803

看起来蒂姆·迪恩的评论是正确的。我收到的 XML 字符串非常庞大，以至于我没有注意到它们实际上是在 didReceiveData: 中调用 NSLog 的时间之间分开的。一切都很好，只是无法使用这些部分字符串创建 DDXMLDocument。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:01:56.387

好吧，也许有点晚了，但你为什么不使用KissXML 本身的[这个例子](https://github.com/AFNetworking/AFKissXMLRequestOperation)：

```
-(void)downloadXML{
    AFKissXMLRequestOperation *operation = [AFKissXMLRequestOperation XMLDocumentRequestOperationWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://legalindexes.indoff.com/sitemap.xml"]] success:^(NSURLRequest *request, NSHTTPURLResponse *response, DDXMLDocument *XMLDocument) {
      NSLog(@"XMLDocument: %@", XMLDocument);
  } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, DDXMLDocument *XMLDocument) {
      NSLog(@"Failure!");
}];

[operation start]; 
```

然后你需要做的就是`XMLDocument`拿出需要的东西`DDXMLElements`

# ios - 使用单例获取“发送到类的无法识别的选择器”

> ID：12718164
> 
> 赞同：0
> 
> 时间：2012-10-03T23:09:09.637
> 
> 标签：ios

我是 ios 的新手，我尝试编写一个简单的单例对象来在控制器之间共享数据。这是我的代码：

```
#import <Foundation/Foundation.h>
#import "SynthesizeSingleton.h";

@interface BSStore : NSObject

+(BSStore *)sharedStore;

@property (nonatomic,strong) NSArray *sharedNotebooks;

@end

#import "BSStore.h"

@implementation BSStore

SYNTHESIZE_SINGLETON_FOR_CLASS(BSStore)

@synthesize sharedNotebooks;

@end 
```

//在AppDelegate中写入对象

```
[BSStore sharedStore].sharedNotebooks = notebooks; 
```

//读取ViewController中的对象

```
 Notebook *notebook = [[BSStore sharedStore].sharedNotebooks objectAtIndex:indexPath.row]; 
```

我得到：

```
2012-10-04 02:01:29.053 BarneyShop[1827:f803] +[BSStore sharedStore]: unrecognized selector sent to class 0x69b8
2012-10-04 02:01:29.073 BarneyShop[1827:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[BSStore sharedStore]: unrecognized selector sent to class 0x69b8'
*** First throw call stack: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T23:13:38.513

这就是你的 Singleton 类应该是这样的：

```
#import "BSStore.h"

@implementation BSStore

@synthesize sharedNotebooks;

+ (BSStore *) sharedStore
{
    static BSStore * singleton;

    if ( ! singleton)
    {
        singleton = [[BSStore alloc] init];

    }
    return singleton;
}

@end 
```

现在您可以致电：

```
[BSStore sharedStore].sharedNotebooks; 
```

# php - 删除 2 个或更少的换行符

> ID：12718168
> 
> 赞同：0
> 
> 时间：2012-10-03T23:09:37.877
> 
> 标签：php, regex, line-breaks

我将如何使用 str_replace 查找每个结尾方括号 ']' 并从末尾删除 2 个或更少的换行符。因此，如果 ] 之后有 1 或 2 个换行符，它将全部删除。如果有 3 个，你会在 ] 之后得到 1 个。4 之后你会得到 2 等等。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:14:04.500

既然您提到`str_replace`了，我假设您使用的是 PHP（如果是这种情况，您应该为此添加一个标签！）。并且由于您标记了正则表达式，您可能想要使用它`preg_replace`。那么这应该独立于平台工作：

```
$newstr = preg_replace('/\](?:\r\n|\n|\r){1,2}/', ']', $str); 
```

`$str`显然你的原始字符串在哪里。

请注意，`]`被转义了，因为它是一个特殊的正则表达式字符（用于字符类）。圆括号仅包含所有可能的换行符的列表。是可选的`?:`，对于需要访问捕获的子模式的复杂正则表达式更相关（实际上是`?:`说，不要匹配这个子模式，因为我不需要它）。简单地说，匹配其中的`{1,2}`一两个。而且由于正则表达式默认是贪婪的，如果可以的话，它需要两个。

**编辑：**再想一想。您可以使用 来解决这个问题`str_replace`，但对于所有可能的换行符来说并不是那么好（因为`str_replace`不支持替代方案）。[这个例子](http://php.net/manual/en/function.str-replace.php#example-4554)可能会给你一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T23:15:47.773

[**str_replace**](http://uk.php.net/str_replace) ,

```
mixed str_replace ( mixed $search , mixed $replace , mixed $subject [, int &$count ] ) 
```

不支持正则表达式，你想要的是[**preg_replace**](http://uk.php.net/preg_replace)

```
mixed preg_replace ( mixed $pattern , mixed $replacement , mixed $subject [, int $limit = -1 [, int &$count ]] ) 
```

用类似的模式`'/\](?:\r\n|\n|\r){0,2}/'`替换`']'`

# asp.net - 自定义配置文件更改时应用程序重新启动

> ID：12718170
> 
> 赞同：3
> 
> 时间：2012-10-03T23:10:01.310
> 
> 标签：asp.net, web-config

我只是想检查一下，因为我在 Google 上找不到答案。如果在运行时更改了我的应用程序根目录中的自定义配置文件，应用程序将不会重新启动，对吗？.NET 只是监视 web.config 对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:24:25.603

默认情况下，如果您更改了 web.config 文件中引用的自定义配置文件，网站将重新启动，但克服这种行为很容易。您需要在您的 machine.config 文件中将属性“ *restartOnExternalChanges ”更改为 false。*

请参阅：http: [//msdn.microsoft.com/en-us/library/ms228057.aspx](http://msdn.microsoft.com/en-us/library/ms228057.aspx)

另请注意，如果您修改 bin 文件夹下的文件，应用程序将重新启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T23:25:45.487

找到了一个很好的资源，似乎可以解释导致自动重置的原因。这实际上取决于您的案例中的一些细节。

[http://blogs.msdn.com/b/johan/archive/2007/05/16/common-reasons-why-your-application-pool-may-unexpectedly-recycle.aspx](http://blogs.msdn.com/b/johan/archive/2007/05/16/common-reasons-why-your-application-pool-may-unexpectedly-recycle.aspx)

更改以下文件还将触发应用程序池的立即重新启动：

*   网络配置
*   机器配置
*   全球.asax
*   bin 目录或其子目录中的任何内容

# python - 为什么我在生产中得到这个 UnicodeEncodeError 而不是在开发中？应用引擎 Python

> ID：12718178
> 
> 赞同：0
> 
> 时间：2012-10-03T23:10:57.183
> 
> 标签：python, google-app-engine

我知道这已经被问过很多次了，我可能应该对这个问题投反对票，但我尝试了很多事情都没有成功。

我的应用程序正在生产中。

我收到此错误：

```
2012-10-03 15:08:29.385 'ascii' codec can't encode character u'\xed' in position 2: ordinal not in range(128) Traceback (most recent call last): File "/base/python27_runtim
E 2012-10-03 15:08:29.447 Traceback (most recent call last):
E 2012-10-03 15:08:29.447 File "/base/python27_runtime/python27_dist/lib/python2.7/wsgiref/handlers.py", line 85, in run
E 2012-10-03 15:08:29.447 self.result = application(self.environ, self.start_response)
E 2012-10-03 15:08:29.447 File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1519, in __call__
E 2012-10-03 15:08:29.447 response = self._internal_error(e)
E 2012-10-03 15:08:29.447 File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1511, in __call__
E 2012-10-03 15:08:29.447 rv = self.handle_exception(request, response, e)
E 2012-10-03 15:08:29.447 File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1505, in __call__
E 2012-10-03 15:08:29.447 rv = self.router.dispatch(request, response)
E 2012-10-03 15:08:29.447 File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1253, in default_dispatcher
E 2012-10-03 15:08:29.447 return route.handler_adapter(request, response)
E 2012-10-03 15:08:29.447 File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1077, in __call__
E 2012-10-03 15:08:29.447 return handler.dispatch()
E 2012-10-03 15:08:29.447 File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 547, in dispatch
E 2012-10-03 15:08:29.447 return self.handle_exception(e, self.app.debug)
E 2012-10-03 15:08:29.447 File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 545, in dispatch
E 2012-10-03 15:08:29.447 return method(*args, **kwargs)
E 2012-10-03 15:08:29.447 File "/base/data/home/apps/s~sigs-enlanube/1.362200469572800834/SIGS.py", line 231, in post
E 2012-10-03 15:08:29.447 descripcion = str(self.request.get('txtDescripcion')).decode('utf-8')
E 2012-10-03 15:08:29.447 UnicodeEncodeError: 'ascii' codec can't encode character u'\xed' in position 2: ordinal not in range(128) 
```

这是堆栈跟踪中提到的行： ![在此处输入图像描述](../Images/0cac554cd1adf5eb467d6d71c2d6658c.png)

我正在使用jinja2。这是在文本区域中输入的文本。

![在此处输入图像描述](../Images/ef7e497f728a7536db4d2156f5814860.png)

这是页面的开始方式： ![在此处输入图像描述](../Images/6746a68904cb10bbb233780bd8b56696.png)

这是文本区域代码：

![在此处输入图像描述](../Images/65e5b1283c3c55addb314babc8fe65f8.png)

我不明白为什么在生产中会出现此错误，因为在 localhost 中测试时一切正常。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:39:06.213

这可能是由于一个错误，请参阅[提交多部分/表单数据表单时应用引擎中的编码问题](https://stackoverflow.com/questions/3624226/encoding-problem-in-app-engine-when-submitting-multipart-form-data-forms)

```
>>> import quopri
>>> t = unicode(quopri.decodestring('=CD'), 'iso_8859-2')
>>> print t
Í 
```

# javascript - element.setAttribute('prop',value) vs element.prop = value

> ID：12718186
> 
> 赞同：5
> 
> 时间：2012-10-03T23:12:01.683
> 
> 标签：javascript, html, dom, cross-browser

我们有一个 setAttribute 方法，用于 DOM 元素。

[https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute](https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute)

它与使用以下内容有何不同？

```
 domElement.propName = value 
```

这两种方法有什么好处吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T23:14:15.187

`domElement.setAttribute('propName', obj)`正在设置一个 XML 属性，它将被转换为一个字符串并添加到 DOM 标记中。

`domElement.propName`正在设置一个 expando 属性，它可以是任何类型。它将它设置在包装 DOM 对象实现的 JS 对象上。

它们没有相同的效果，除非您正在处理解析器识别的属性，例如`src,id,value`. 这些属性被复制到 expando 属性，但是有很多兔子洞和它不能可靠工作的情况（通常当 expando 不带字符串时，比如`onclick, checked`）

这个例子表明它们是不同的。

```
domElement.setAttribute('someProp', 5);
console.log(domElement.someProp); // undefined
domElement.someProp = 10; 
console.log(domElement.someProp); // 10
console.log(domElement.getAttribute('someProp')); // "5" -> it's a string 
```

始终使用 DOM expando 属性不太可能引起麻烦。您想要使用 setAttribute 的唯一情况是您需要序列化节点（使用`outerHTML`）并且您希望该属性反映在序列化中

# python - 在类体内调用类静态方法？

> ID：12718187
> 
> 赞同：204
> 
> 时间：2012-10-03T23:12:08.047
> 
> 标签：python, decorator, static-methods

当我尝试从类的主体中使用静态方法，并使用内置`staticmethod`函数作为装饰器定义静态方法时，如下所示：

```
class Klass(object):

    @staticmethod  # use as decorator
    def _stat_func():
        return 42

    _ANS = _stat_func()  # call the staticmethod

    def method(self):
        ret = Klass._stat_func() + Klass._ANS
        return ret 
```

我收到以下错误：

```
Traceback (most recent call last):
  File "call_staticmethod.py", line 1, in <module>
    class Klass(object): 
  File "call_staticmethod.py", line 7, in Klass
    _ANS = _stat_func() 
  TypeError: 'staticmethod' object is not callable 
```

*我理解为什么会发生这种情况（描述符绑定）*，并且可以通过`_stat_func()`在上次使用后手动转换为静态方法来解决它，如下所示：

```
class Klass(object):

    def _stat_func():
        return 42

    _ANS = _stat_func()  # use the non-staticmethod version

    _stat_func = staticmethod(_stat_func)  # convert function to a static method

    def method(self):
        ret = Klass._stat_func() + Klass._ANS
        return ret 
```

所以我的问题是：

    **是否有更清洁或更“Pythonic”的方法来完成此任务？**

* * *

## 回答 #1

> 赞同：226
> 
> 时间：2012-10-03T23:24:28.450

`staticmethod`对象显然具有`__func__`存储原始原始函数的属性（它们必须这样做是有道理的）。所以这将起作用：

```
class Klass(object):

    @staticmethod  # use as decorator
    def stat_func():
        return 42

    _ANS = stat_func.__func__()  # call the staticmethod

    def method(self):
        ret = Klass.stat_func()
        return ret 
```

* * *

顺便说一句，虽然我怀疑 staticmethod 对象具有某种存储原始函数的属性，但我不知道具体情况。本着教别人钓鱼而不是给他们一条鱼的精神，这就是我所做的调查并找出答案（我的 Python 会话中的 C&P）：

```
>>> class Foo(object):
...     @staticmethod
...     def foo():
...         return 3
...     global z
...     z = foo

>>> z
<staticmethod object at 0x0000000002E40558>
>>> Foo.foo
<function foo at 0x0000000002E3CBA8>
>>> dir(z)
['__class__', '__delattr__', '__doc__', '__format__', '__func__', '__get__', '__getattribute__', '__hash__', '__init__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__']
>>> z.__func__
<function foo at 0x0000000002E3CBA8> 
```

在交互式会话中进行类似的挖掘（`dir`非常有帮助）通常可以非常快速地解决这些问题。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-12-10T16:42:26.537

这是我喜欢的方式：

```
class Klass(object):

    @staticmethod
    def stat_func():
        return 42

    _ANS = stat_func.__func__()

    def method(self):
        return self.__class__.stat_func() + self.__class__._ANS 
```

`Klass.stat_func`由于[DRY 原则](http://c2.com/cgi/wiki?DontRepeatYourself)，我更喜欢这种解决方案。让我想起了Python 3 中[有一个新功能的原因：）`super()`](https://www.python.org/dev/peps/pep-3135/#rationale)

但我同意其他人的观点，通常最好的选择是定义一个模块级函数。

例如对于`@staticmethod`函数，递归可能看起来不太好（您需要通过调用`Klass.stat_func`inside来打破 DRY 原则`Klass.stat_func`）。那是因为您没有引用`self`内部静态方法。有了模块级功能，一切都会好起来的。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-03T23:21:05.120

在类定义之后注入类属性怎么样？

```
class Klass(object):

    @staticmethod  # use as decorator
    def stat_func():
        return 42

    def method(self):
        ret = Klass.stat_func()
        return ret

Klass._ANS = Klass.stat_func()  # inject the class attribute with static method value 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-10-03T23:40:18.797

这是因为 staticmethod 是一个描述符，并且需要一个类级别的属性获取来执行描述符协议并获得真正的可调用对象。

从源代码：

> 它可以在类（例如`C.f()`）或实例（例如`C().f()`）上调用；该实例被忽略，除了它的类。

但不是直接从类内部定义它。

但正如一位评论者所提到的，这根本不是真正的“Pythonic”设计。只需使用模块级功能即可。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-05-15T23:23:53.343

这个解决方案怎么样？它不依赖于`@staticmethod`装饰器实现的知识。内部类 StaticMethod 充当静态初始化函数的容器。

```
class Klass(object):

    class StaticMethod:
        @staticmethod  # use as decorator
        def _stat_func():
            return 42

    _ANS = StaticMethod._stat_func()  # call the staticmethod

    def method(self):
        ret = self.StaticMethod._stat_func() + Klass._ANS
        return ret 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-10-20T22:01:22.623

如果“核心问题”是使用函数分配类变量，则另一种方法是使用元类（这有点“烦人”和“神奇”，我同意静态方法应该在类内可调用，但不幸的是它不是t)。这样，我们可以将行为重构为一个独立的函数，而不会使类混乱。

```
class KlassMetaClass(type(object)):
    @staticmethod
    def _stat_func():
        return 42

    def __new__(cls, clsname, bases, attrs):
        # Call the __new__ method from the Object metaclass
        super_new = super().__new__(cls, clsname, bases, attrs)
        # Modify class variable "_ANS"
        super_new._ANS = cls._stat_func()
        return super_new

class Klass(object, metaclass=KlassMetaClass):
    """
    Class that will have class variables set pseudo-dynamically by the metaclass
    """
    pass

print(Klass._ANS) # prints 42 
```

在“现实世界”中使用这种替代方法可能会有问题。我不得不使用它来覆盖 Django 类中的类变量，但在其他情况下，最好使用其他答案中的一种替代方法。

# wordpress - 如何根据 wpreviewsite.com 插件设置自定义排序（评分最高的帖子）？

> ID：12718189
> 
> 赞同：1
> 
> 时间：2012-10-03T23:12:25.217
> 
> 标签：wordpress, sorting, plugins, customization, posts

这个问题与使用高级插件的 WordPress 网站有关。

目前基于functions.php中的WP-PostViews插件为“大多数视图”启用了排序：

```
add_action( 'init', 'wpse13483_init' );
function wpse13483_init() {
add_rewrite_rule( '(.+?)/order/views/?$', 'index.php?category_name=$matches[1]&v_sortby=views&v_orderby=desc', 'top' );
} 
```

但是现在尝试添加对基于 wpreviewsite.com 插件的“最高评价”排序的支持。不知何故，这绝对是可能的，因为这个插件带有一个“评分最高的帖子”小部件，它使用以下代码（以及其他不太重要的代码......相当肯定这是关键部分）：

```
//Post sorting
$sort = get_option('rs_sort');
if ($sort == 'rating') {
add_filter('posts_fields', 'rs_weighted_fields');
add_filter('posts_join', 'rs_weighted_join');
add_filter('posts_groupby', 'rs_weighted_groupby');
add_filter('posts_orderby', 'rs_weighted_orderby');
} else if ($sort == 'comments') {
add_filter('posts_orderby', 'rs_comments_orderby');
} 
```

希望了解如何使用这些 WordPress 后置过滤器并将它们以某种方式转换为 PHP 函数，或者以其他方式成为 functions.php 中的新重写规则。谢谢！

# c# - 如果设置为 true，AcceptsReturn 会禁用多行文本框中的 Key.Return 检测吗？

> ID：12718190
> 
> 赞同：4
> 
> 时间：2012-10-03T23:12:28.383
> 
> 标签：c#, wpf

在我的 Windows 应用程序中，我通过将 AcceptsReturn 属性设置为 True 来创建一个多行文本框。它允许用户在文本框中输入多行文本。另外，我每次都想做一些事情，在文本框中按下 Return/Enter 键。事件处理程序代码如下...

```
private void TextBox_KeyDown(object sender, KeyEventArgs e)
{ 
    if (e.Key == Key.Return)

        // do something here
} 
```

看来，如果 AcceptsReturn 设置为 True 并按下 Return 键，则根本不会调用此事件处理程序。正确检测到任何其他按键。如果 AcceptsReturn 未设置为 True 并且按下 Return 键，则调用事件处理程序并检测到 Return 键按下。这样做的问题是按下 Return 键不会将用户推进到文本框中的新行（如预期的那样）。所以，我希望按下 Return 键以正确地将用户推进到文本框中的新行，并且我希望能够检测到该 Return 键按下。我的方法错了吗？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-03T23:44:29.390

`KeyDown`是冒泡事件，这意味着它首先在源控件 ( `TextBox`) 上引发，然后在父级上引发，然后在父级的父级上引发，依此类推，直到它被处理。当您设置`AcceptsReturn`为 true 时，控件会处理 Return 键，因此事件不会冒泡。在这种情况下，您可以使用 event: 的隧道版本`PreviewKeyDown`，它在控件的每个祖先上从上到下在到达源控件之前引发。

请参阅MSDN 上的[路由策略](http://msdn.microsoft.com/en-us/library/ms742806.aspx#routing_strategies)

# vb6 - Visio 2013 Preview 和 VB6：Microsoft Office 无法验证此产品的许可证

> ID：12718191
> 
> 赞同：1
> 
> 时间：2012-10-03T23:12:31.617
> 
> 标签：vb6, ms-office, visio, office-2013

我正在尝试针对 Visio 2013 测试我们的应用程序，但遇到的问题会在 Visio 2013 Preview 中引发消息“Microsoft Office 无法验证此产品的许可证。您应该使用控制面板修复 Office 程序”。

我有一个简单的 VB6 表单，上面有一个按钮。在按钮事件处理程序中，我有以下代码。

```
Private Sub Command3_Click()
   Dim visoObj As Visio.Application

   Set visoObj = New Visio.Application

   visoObj.Visible = True
End Sub 
```

单击时，会打开 Visio 应用程序，但会打开消息“Microsoft Office 无法验证此产品的许可证。您应该使用控制面板修复 Office 程序”。

我已检查产品是否已激活并尝试从添加/删除程序中卸载/重新安装/修复/重新输入密钥。

我也试过

```
cscript ospp.vbs /act 
```

如[http://answers.microsoft.com/en-us/office/forum/office_home-office_install/office-cannot-verify-the-license-for-this-product/3bb811ad-29d6-49c7-a3d0-4634c154d155中所述?msgId=be64dcd6-ab02-4388-bb09-c9ab41ffe9ab](http://answers.microsoft.com/en-us/office/forum/office_home-office_install/office-cannot-verify-the-license-for-this-product/3bb811ad-29d6-49c7-a3d0-4634c154d155?msgId=be64dcd6-ab02-4388-bb09-c9ab41ffe9ab)

有人让 VB6 和 Visio 2013 预览版工作吗？

如果您尝试将 Visio 2013 绘图控件添加到 VB6 表单，您也会收到此消息。

我也成功地尝试了类似的代码来打开 Word 2013 Preview 和 Excel 2013 Preview。这工作得很好。只是无法弄清楚 Visio 出了什么问题。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T02:47:57.230

为了解决这个问题，我不得不关闭 VB6.exe 上的 XP SP3 兼容性。关闭此功能后，我可以在没有许可证消息的情况下动态创建 Visio.Application。

但这只是让我发现了另一个问题。

Visio 2013 预览绘图控件在 IDE 中无法用于 VB6 或 Visual Studio 2012 C# 窗体。

[http://social.msdn.microsoft.com/Forums/en-US/csharpide/thread/f5c30d5d-4d53-4fd5-a14e-3ce22223c8c9](http://social.msdn.microsoft.com/Forums/en-US/csharpide/thread/f5c30d5d-4d53-4fd5-a14e-3ce22223c8c9)

# oracle - 合并没有返回正确的数据

> ID：12718192
> 
> 赞同：0
> 
> 时间：2012-10-03T23:12:38.057
> 
> 标签：oracle

我有 2 张桌子：

```
CREATE TABLE employee (
employee_id NUMBER(5),
first_name  VARCHAR2(20),
last_name   VARCHAR2(20),
dept_no     NUMBER(2),
salary      NUMBER(10)); 
```

表员工具有值：

```
(1, 'Dan', 'Morgan', 10, 100000);
(2, 'Helen', 'Lofstrom', 20, 100000);
(3, 'Akiko', 'Toyota', 20, 50000);
(4, 'Jackie', 'Stough', 20, 40000);
(5, 'Richard', 'Foote', 20, 70000);
(6, 'Joe', 'Johnson', 20, 30000);
(7, 'Clark', 'Urling', 20, 90000);

CREATE TABLE bonuses (
employee_id NUMBER, bonus NUMBER DEFAULT 100); 
```

餐桌奖金具有以下价值：

```
(1,100);
(2,100);
(4,100);
(6,100);
(7,100); 
```

我确实根据奖金表合并：

```
MERGE INTO bonuses b
USING (
  SELECT employee_id, salary, dept_no
  FROM employee
  WHERE dept_no =20) e
ON (b.employee_id = e.employee_id)
WHEN MATCHED THEN
  UPDATE  SET b.bonus = e.salary * 0.1
  DELETE WHERE (e.salary < 40000)
WHEN NOT MATCHED THEN
  INSERT  (b.employee_id, b.bonus)
  VALUES (e.employee_id, e.salary * 0.05)
  WHERE (e.salary > 40000); 
```

当我从奖金中选择 * 时；

```
EMPLOYEE_ID BONUS 
------------------
1           100   
2           10000 
3           2500  
4           4000  
5           3500  
7           9000 
```

我的问题是“employee_id #6 我的奖金记录在哪里”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:20:58.020

被声明删除`DELETE WHERE (e.salary < 40000)`？而且您可能应该使其中一个条件包括平等。毕竟有人的薪水可能只有 40K，就像 Jackie 的一样。

# c++ - 使用无效句柄调用 SetEvent

> ID：12718196
> 
> 赞同：0
> 
> 时间：2012-10-03T23:13:16.230
> 
> 标签：c++, multithreading, events, memory, initialization

我有一个应用程序，其中一个线程调用 SetEvent，另一个线程等待该事件。但是，从未调用过 CreateEvent。

**SetEven 返回 false (ERROR_INVALID_HANDLE)，WaitForSingleObject 返回 WAIT_FAILED**

昨天，我们提交了一些显然不相关的内容：.rc 中的两行代码从工具栏中删除了按钮。

突然，在 realease-XP-32 上**WaitForSingleObject 返回 WAIT_TIMEOUT**。

但我想知道：

1-为什么资源中的提交（显然不相关）确实改变了 WaitForSingleObject 的返回？

2- 当我从 Visual Studio 启动应用程序 (XP32) 时，我得到的行为与直接启动应用程序时不同。WaitForSingleObject() 返回 WAIT_FAILED 而不是超时。知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:03:50.447

由于您从未调用过`CreateEvent`，因此您的`SetEvent`and`WaitForSingleObject`正在使用未初始化的变量。未初始化变量的内容是不确定的，因此您最终将未知值传递给`SetEvent`and `WaitForSingleObject`。看来，对于旧代码，内存使用模式恰好导致未初始化变量的值不是有效句柄的情况，所以你得到了`ERROR_INVALID_HANDLE`. 进行更改后，内存使用模式发生了变化，现在未初始化的变量具有一个恰好是有效句柄的值，因此`WaitForSingleObject`函数尽职尽责地等待它。该句柄恰好引用了未发出信号的对象，因此`WaitForSingleObject`调用超时并返回`WAIT_FAILED`。

换句话说，看似无关的更改暴露了一个预先存在的错误。使用未初始化的数据可能会导致这样的非局部效应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T23:36:52.810

如果您正在执行 WaitForSingleObject()，那么该调用是否真的失败了？也许它也抛出了无效句柄错误，所以它看起来只是“接收事件”。也有可能在更改 RC 文件之前从未实际编译过损坏的 CreateEvent() 代码。无论如何，没有看到代码就无法判断。

# c# - 语言翻译 A PI C#

> ID：12718198
> 
> 赞同：4
> 
> 时间：2012-10-03T23:13:18.897
> 
> 标签：c#, google-translate

我正在尝试创建一个自然语言处理程序，在该程序中我必须能够翻译单词和句子以及获得它们的词性。我听说你可以在你的程序中实现谷歌翻译 API，但在过去的两周里一直在努力，但没有成功。我曾尝试查看其他翻译服务，例如[this](http://www.codeproject.com/Articles/5768/Translation-Web-Service-in-C)，但由于我的 C# 背景非常有限，我无法从这篇文章中获得太多收获。任何人都可以为我提供一个简单的演练，我想了解我在做什么，这样我就可以进一步了解 C#，我可以用它来实现我的目标。它不一定是 Google API，但非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T00:54:00.847

两种主流选择是

1.  [Microsoft API](https://datamarket.azure.com/dataset/1899a118-d202-492c-aa16-ba21c33c06cb) ，这是免费的，有一定的限制

2.  [Google API](https://developers.google.com/translate/v2/pricing)是一项付费服务

一个廉价而肮脏的选择是使用新的 ASP.NET Web API 通过 HTTP 请求直接调用谷歌翻译（换句话说，屏幕抓取谷歌翻译页面），它很容易优雅地执行 HTTP 请求。例如：要将英语短语“test this”从英语翻译成法语，您需要以下 URL。

[http://translate.google.com/#en/fr/test%20this](http://translate.google.com/#en/fr/test%20this)

这是[asp.net web api 资源](http://www.asp.net/web-api)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T00:35:39.097

我认为您不能以您想要的方式使用文章中的代码。由于它正在编写 Bing 接管了 altavista 并更改了 url 的目标，而且这段代码本身并没有做任何翻译，它只是把它交给 babelfish 去咀嚼，但不是以一种长期稳定的方式。

我会用谷歌翻译[https://developers.google.com/translate/v2/getting_started](https://developers.google.com/translate/v2/getting_started)

祝你好运！

# c# - 使密码在 Windows 8 应用程序（C# 和 XAML）中可见

> ID：12718203
> 
> 赞同：0
> 
> 时间：2012-10-03T23:14:01.207
> 
> 标签：c#, xaml, windows-8

默认情况下，存储在 a 中的密码`PasswordBox`隐藏在掩码字符后面。这可以使用 . 从默认的插入符号更改为另一个字符`PasswordBox.PasswordChar`。

我的问题是：有没有办法完全删除屏蔽功能，换句话说，使密码可见？

显然，您的第一个想法可能是使用纯文本输入字段，但是，用户可以随意重复显示或隐藏。在使用此解决方案时，我可以用插入符号替换密码并将真实密码存储在一个变量中，然后如果用户希望它可见，然后再次用真实密码替换它，我不喜欢这个想法，因为它会产生很多有点凌乱的代码。

任何想法将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:30:07.120

我猜想，出于安全原因，`PasswordBox`控件不允许这样做。另一种方法是使用`PasswordBox`控件和隐藏的纯文本框。当用户选择显示密码时，您将字符串复制到文本框并显示并隐藏密码框。再次隐藏密码只是相反的过程。

# javascript - 如何在 Javascript 中使用名称保存 textarea 中的文件？

> ID：12718210
> 
> 赞同：0
> 
> 时间：2012-10-03T23:14:56.763
> 
> 标签：javascript, html, download, data-uri

> **可能重复：**
> [使用 HTML5/Javascript 生成和保存文件](https://stackoverflow.com/questions/2897619/using-html5-javascript-to-generate-and-save-a-file)

我想要一个客户端 HTML/JS 解决方案来解决这个问题 - 我有一个用户可编辑的文本区域 A、一个文本字段 B 和一个按钮 C。当用户单击 C 时，她会下载一个名称等于 B.value 和内容等于 A.value。我看了[这个](https://stackoverflow.com/questions/10018954/)，但它没有指定如何设置文件名，我不想要这样的 Flash 解决[方案](https://github.com/dcneiner/Downloadify)。我们可以假设用户使用的是最新的 Chrome 浏览器（这对我的团队来说是一个小工具）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T00:24:30.053

因为“我们可以假设用户使用的是最新的 Chrome 浏览器”，这种类型的事情可以通过创建一个`<a>`带有属性的*download*和*href*来完成，然后单击它。下面的示例代码。

```
var Download = {
    click : function(node) {
        var ev = document.createEvent("MouseEvents");
        ev.initMouseEvent("click", true, false, self, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
        return node.dispatchEvent(ev);
    },
    encode : function(data) {
            return 'data:application/octet-stream;base64,' + btoa( data );
    },
    link : function(data, name){
        var a = document.createElement('a');
        a.download = name || self.location.pathname.slice(self.location.pathname.lastIndexOf('/')+1);
        a.href = data || self.location.href;
        return a;
    }
};
Download.save = function(data, name){
    this.click(
        this.link(
            this.encode( data ),
            name
        )
    );
};

Download.save('hello world', 'my_file.txt'); 
```

# php - 如何在外部应用程序中注册 Yii 的自动加载器？

> ID：12718211
> 
> 赞同：1
> 
> 时间：2012-10-03T23:15:11.100
> 
> 标签：php, yii, autoload, autoloader, spl-autoload-register

我想试试 Yii，但我不想用它作为我的主要框架。换句话说，我想使用我自己的框架，同时也使用 Yii 的一些特性。我认为为了能够从我的应用程序中实例化 Yii 的类，我只需要从我的应用程序中注册 Yii 的自动加载器，可能类似于以下方式：

```
spl_autoload_register
(
    function ($classname)
    {
        YiiBase::autoload($className);
    }
); 
```

当然，我需要 require 或包含 YiiBase 类，所以在调用之前的函数之前，我会这样做：

```
$yiiBase = $_SERVER['DOCUMENT_ROOT'].'/yii/framework/YiiBase.php';
require_once($yiiBase); 
```

但我收到“无法重新声明 YiiBase 类”错误。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T07:35:43.610

1）不要直接包含YiiBase.php，包含yii.php。因为 yii.php 包含一个`Yii`在所有框架代码中使用的类（甚至在 YiiBase 方法中）。

```
 $yii = $_SERVER['DOCUMENT_ROOT'].'/yii/framework/yii.php';
 require_once($yii); 
```

（并且 YiiBase.php 默认包含在 yii.php 中）

2）`autoload handler`以这种方式注册你的。（Yii 具有添加自定义自动加载处理程序的内置功能）。

```
$my_autoload =  function($class) { ... };
// OR
// $my_autoload = array('MyClass', 'my_autoload')

YiiBase::registerAutoloader($my_autoload, true); 
```

第二个参数`true`告诉`whether to append/prepend the new autoloader after/before the default Yii autoloader`

*如果包含 YiiBase.php，那么 Yii 的默认自动加载器也将被包含在内。无需`YiiBase::autoload()`在您的代码中显式调用。**参考**：检查 YiiBase.php 文件的最后一行*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T23:52:00.547

你可以看看人们[将 Yii 与 wordpress 集成](http://www.yiiframework.com/wiki/?tag=wordpress)的一些方法，你可能不需要做 ->run() 应用程序，除非你需要控制器/路由，它还取决于你假装使用框架的哪些部分.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-23T03:48:56.687

为了为 Yii2 做这件事，[这篇文章](https://yii2-framework.readthedocs.io/en/stable/guide/tutorial-yii-integration/)在页面中间的“*在第三方系统中使用 Yii* ”标题下解释了它。

这是启动外部应用程序时要包含的相关部分：

```
 require(__DIR__ . '/../vendor/yiisoft/yii2/Yii.php');
  $yiiConfig = require(__DIR__ . '/../config/yii/web.php');
  new yii\web\Application($yiiConfig); // Do NOT call run() here 
```

显然，`__DIR__ . '/../`可能需要调整以适合您的目录布局。

# php - PHP脚本在每次错误后都会死掉

> ID：12718213
> 
> 赞同：1
> 
> 时间：2012-10-03T23:15:27.230
> 
> 标签：php

我试图让我的脚本在屏幕上输出错误，但错误一直输出到 error_log 并杀死脚本，

这是我当前的代码

```
 try{
            $db->query("SELECT `test`.`test` FROM `test` WHERE `test`.`test` = test");
            echo("no work?");
        }catch(PDOException $er){
            print("Still dont work");
        } 
```

`$db->query...`返回一个错误，但脚本在那里死掉，输出到 error_log 并且不会像我想要的那样完成它。

任何人都可以帮忙吗？

总结一下我得到的一些回应，杀死脚本的不是实际的 die() 函数，而是它自身所在的错误`$db->query()`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T23:16:51.290

顾名思义，`die()`在打印您传递给它的消息后，让您的脚本死掉（即退出）。

如果您只想让它打印错误，请使用`print()`而不是`die()`.

# python - 在 Pydev 中设置断点，但断点仅在回调上不命中

> ID：12718216
> 
> 赞同：1
> 
> 时间：2012-10-03T23:16:13.903
> 
> 标签：python

好的，我是 python 的新手，我的代码调用了一些库（它包装了一些 C++ 代码），我在我这边传递了一个回调函数（因为库需要）。奇怪的是，如果我在代码的另一部分插入断点，它将在 Eclipse 中命中并且调试器停止，但回调中的断点都没有命中。肯定会调用回调，但 PyDev 以某种方式忽略了断点。我做错了什么？回调显然来自不同的线程。我正在使用 Python 2.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:08:42.460

尝试在代码中导入`pdb`并手动设置断点`pdb.set_trace()`。这不适用于所有多线程情况，但我发现它适用于许多情况，并且是对原生 Eclipse/PyDev 调试器的重大改进。

# css - 带有前后伪元素的 IE8 Z-Index

> ID：12718218
> 
> 赞同：4
> 
> 时间：2012-10-03T23:16:47.263
> 
> 标签：css, internet-explorer-8, z-index, pseudo-element

我正在努力解决这个问题。我有一个`article`插入了两个元素的元素，`:before`并且`:after`它们都被绝对定位在该文章中。

在除 IE8 之外的所有浏览器中，z-index 堆叠都运行良好。它应该按照从下到上的顺序排列：

文章内容 > 淡出图像 > 图标

我已经尝试了一些不同的东西，最新的可以在这里看到：http: [//jsfiddle.net/LtYMV/2/](http://jsfiddle.net/LtYMV/2/)

我正在尝试的基本运行如下所示：

```
article {
    // styles
}

article:before {
    // icon background image used on inserted content
}

article:after {
    // background image used on inserted content
}​ 
```

我知道这有一些技巧，我似乎无法通过 z-index 值的任何组合来解决这个问题。帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T16:39:45.987

IE8 在伪元素和 z-index 方面很奇怪。有一个错误使子元素有点继承（不能覆盖）父母的 z-index。[您可以在 quirksmode 上](http://www.quirksmode.org/bugreports/archives/2006/01/Explorer_z_index_bug.html)阅读有关IE8 和 z-index 的更多信息。

我稍微改变了你的小提琴，使其在符合标准的浏览器中以与你的示例相同的方式工作，并在 IE8 中正常工作，但在 IE 中没有淡入淡出：http: [//jsfiddle.net/LtYMV/8/](http://jsfiddle.net/LtYMV/8/)，尽管图标*位于*文本。

我还创建了一个版本，它使用另一个元素作为图标（使用类“icon”，就在每个“.post”元素之后）。IE8 还没有褪色，但是图标*在*文字上方：[http://jsfiddle.net/LtYMV/7/](http://jsfiddle.net/LtYMV/7/)，所以它比上一个略有改进。

希望这可以帮助！

# objective-c - 如何在 CAShapeLayer 上添加外发光

> ID：12718219
> 
> 赞同：2
> 
> 时间：2012-10-03T23:16:47.633
> 
> 标签：objective-c, xcode, cocoa

我想在稍后制作动画的 CAShapeLayer 上创建外发光效果。这有可能实现吗？我正在查看文档，找不到类似的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T23:18:19.567

使用它的`shadowColor`,`shadowOpacity`和`shadowRadius`属性, 和 a `shadowOffset`of `(0,0)`。所有这些属性都可以通过通常的 CAAnimation malarkey 进行动画处理。

# c# - 在C#中获取特定单词后的字符串

> ID：12718223
> 
> 赞同：-1
> 
> 时间：2012-10-03T23:17:14.017
> 
> 标签：c#, .net, string

我有一个带有这个 html 的字符串：

```
<div class="cnt_listas"><ol id="listagem1" class="cols_2">
<li><a href="/laura-pausini/73280/">16/5/74</a></li>
<li><a href="/laura-pausini/73280/traducao.html">16/5/74</a></li>
</div> 
```

我需要获取 和 之间的所有`<ol id="listagem1" class="cols_2">`文本`</div>`。此字符串中的文本可能与此不同，它是网站的结果。我怎样才能得到这部分文字？

在这种情况下，我需要的文本是：

```
<li><a href="/laura-pausini/73280/">16/5/74</a></li>
<li><a href="/laura-pausini/73280/traducao.html">16/5/74</a></li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T05:54:38.807

我会使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/) 来解析 html

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

var h = doc.DocumentNode.SelectSingleNode("//ol[@id='listagem1']").InnerHtml; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T23:38:25.157

并不是解析 HTML 的最佳方法，但这里有一个扩展方法，它通常可以按照您要求的方式处理字符串：

```
public static string Between(this string source, string start, string end)
{
    // Find the first occurence of the start string
    var i = source.IndexOf(start);
    if (i < 0)
        return string.Empty;

    // Advance past the start string
    i += start.Length;

    // Find the next occurence of the end string
    var j = source.IndexOf(end, i);
    if (j < 0)
        return string.Empty;

    // Return the string found between the positions
    return source.Substring(i, j - i);
} 
```

把它放在一个静态类中，然后像这样调用它：

```
var substring = s.Between("foo","bar"); 
```

根据需要处理边缘情况（未找到字符串等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T23:23:06.677

几周前我在 Stackoverflow 上找到了这段代码，需要相同的算法吗？

```
private IEnumerable<string> GetSubStrings(string input, string start, string end)
{
    Regex r = new Regex(Regex.Escape(start) + "(.*?)" + Regex.Escape(end));
    MatchCollection matches = r.Matches(input);
    foreach (Match match in matches)
        yield return match.Groups[1].Value;
} 
```

**编辑：** [这](https://stackoverflow.com/a/2548406/796036)是此代码的来源。

**编辑 2：**要反驳对我的回答的评论，请看一下[这个](http://xkcd.com/208/)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-03T23:21:56.310

我不明白你在说什么......也许是这样的：

```
string specificWord = stringWhtml.Substring(stringWhtml.IndexOf("cols_2") + 8, stringWhtml.IndexOf("</div>")); 
```

# ios - 减慢 iPad 视网膜模拟器 6.0

> ID：12718230
> 
> 赞同：1
> 
> 时间：2012-10-03T23:17:45.703
> 
> 标签：ios, ipad, cocos2d-iphone, retina-display

我有一个用 cocos2d 为 iPhone 制作的游戏，我已经适应了 iPad，如果不是视网膜也能很好地工作。当我在视网膜 iPad 模拟器中运行我的游戏时，游戏非常慢，角色的图像需要大量加载。为什么会这样？模拟器的问题？我是否缺少一行代码才能正常运行？该代码正是 iPhone 和 iPhone 是伟大的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T23:21:33.700

模拟器可能具有与设备截然不同的性能配置文件——在这种情况下，您的计算机显卡可能只是在努力处理视网膜 iPad 屏幕的大图形上下文。您应该始终在实际设备上进行性能测试，尤其是像您这样使用 OpenGL 的应用程序。

# android - 在没有 android:exported=false 的情况下将 NFC Activity 设为私有

> ID：12718231
> 
> 赞同：1
> 
> 时间：2012-10-03T23:17:56.437
> 
> 标签：android, android-activity, nfc, intentfilter

我有一个 NFC 活动，它指定了一个意图过滤器和数据。这就像

```
 <intent-filter>
            <action android:name="android.nfc.action..." />
            <category android:name="android.intent.category.DEFAULT" />

            <data
                android:host="..."
                android:path="..." />
        </intent-filter> 
```

现在这里的问题是，因为我没有包括**android:exported="false"**。它使该活动容易受到来自外部应用程序的恶意攻击，因为该活动现在是公开的。这里的问题是，如果我将导出的属性设置为 false，我将无法获取从外部意图调用的活动（这应该通过 onNewIntent() 触发活动）

有没有办法让活动“安全”，同时不影响其一般触发机制，即通过外部意图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T02:43:40.707

如果您需要收到有关标签的通知，则需要意图过滤器。标签调度器使用它来查找感兴趣的活动，以便在扫描标签时考虑。如您所见，如果您将活动设为私有，则无法通知它。您担心什么“恶意攻击”？您的活动与您编写的代码一样安全：如果您只处理 NFC 意图，您将是“安全的”（当然，除非 NFC 有效负载触发设备擦除代码或其他东西......）

# javascript - 如何让图像向下/向上滚动页面，而不在页面边框处停止？

> ID：12718237
> 
> 赞同：1
> 
> 时间：2012-10-03T23:19:14.953
> 
> 标签：javascript, html, css, animation

这是我的代码：

```
 <HTML><head>
<Script language="JavaScript">
<!--
function changePos() 
{
 width = document.body.clientWidth;   //the width of the current document
 height = document.body.clientHeight; //the height of the current document
 Hoffset = img.offsetHeight;
 Woffset = img.offsetWidth;
 img.style.left = xPos;  
 img.style.top = yPos;  

 if (yon) 
 {
  yPos = yPos + 1;
 } 
 else 
 { 
  yPos = yPos - 1;
 }
 if(yPos < 0) 
 {
  yon = 1; yPos = 0;
 }
 if(yPos >= (height - Hoffset)) 
 {
  yon = 0; yPos = (height - Hoffset);
 }
}
//-->
</Script>
</head>
<body>
<IMG id="img" style="POSITION: absolute" src="Images\Colored.jpg">
<SCRIPT language=JavaScript>
<!-- 
 var height = 0;
 var Hoffset = 0;
 var Woffset = 0;
 var yon = 0;  //false
 var xPos = 20;
 var yPos = document.body.clientHeight;
 var Timer1 = setInterval('changePos()',30);
//-->
</Script>
</BODY>
</HTML> 
```

我想让图像上下滚动，但不要停在页面边框上，换句话说，只要图像到达任一位置，我就需要图像在页面下方和页面上方！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:54:50.243

改变

```
if(yPos < 0) 
 {
  yon = 1; yPos = 0;
 }
 if(yPos >= (height - Hoffset)) 
 {
  yon = 0; yPos = (height - Hoffset);
 } 
```

至

```
if(yPos < -Hoffset) 
 {
  yon = 1; yPos = -Hoffset;
 }
 if(yPos >= height) 
 {
  yon = 0; yPos = height;
 } 
```

# jquery - jquery验证规则依赖

> ID：12718240
> 
> 赞同：1
> 
> 时间：2012-10-03T23:19:55.697
> 
> 标签：jquery, jquery-validate

使用验证插件的“必需（依赖表达式）”解释中的此示例：

```
$("#myform").validate({
  rules: {
    details: {
      required: "#other:checked"
    }
  }, debug:true
});
$("#other").click(function() {
    $("#details").valid();
}); 
```

如果在下面的示例中选择了单选按钮#guide，我正在尝试进行所需的文本输入：

```
<input type="radio" id="outfitter" name="memtype" value="Outfitter" />Outfitter $125
<input type="radio" id="guide" name="memtype" value="Guide" />Guide $75
<input type="text" id="sponout" name="sponout" size="75" /> 
```

我只是不知道该放在哪里

```
 $("#other").click(function() {
    $("#details").valid();
 }); 
```

在规则验证编码中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T00:34:51.627

这是您可以执行此操作的一种方法：

```
$("#myform").validate({
    rules: {
        sponout: {
            required: "#guide:checked"
        }
    }
});

$("input[name='memtype']").change(function () {
    $("#myform").valid();
}); 
```

**示例：http:** [//jsfiddle.net/kqczf/1/](http://jsfiddle.net/kqczf/1/)

# ios - IOS设置Viewcontroller属性bad access错误

> ID：12718242
> 
> 赞同：0
> 
> 时间：2012-10-03T23:20:02.640
> 
> 标签：ios, xcode, uiviewcontroller, nsdate

我正在尝试从父级设置子视图控制器 (DateViewController) 的属性，并在第二次这样做时出现错误的访问错误。这是代码。这是 DateViewController.h。问题在于 selectedDate 属性：

```
#import <UIKit/UIKit.h>

@protocol DateViewDelegate <NSObject>
-(void) dateViewControllerDismissed:(NSDate *)selectedDate;
@end

@interface DateViewController : UIViewController {
    IBOutlet UIDatePicker *dateReceipt;
    id myDelegate;
}

-(IBAction)btnDone;
@property(nonatomic,assign)NSDate *selectedDate;
@property(nonatomic,assign)id<DateViewDelegate> myDelegate;
@end 
```

在 DateViewController.m 中，我确实合成了 selectedDate。现在在父视图控制器 (ComdataIOSViewController.m) 中，我将 DateViewController 的 selectedDate 属性设置为变量receiptDate，该变量在ComdataIOSViewController.h 的@interface 部分中声明为NSDate *。这是 ComdataIOSViewController.m 的一个片段：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    receiptDate = [NSDate date];
}

-(IBAction)btnSetDate {
    dlgDate=[[DateViewController alloc] initWithNibName:nil bundle:nil];
    dlgDate.selectedDate = receiptDate;
    dlgDate.myDelegate = self;
    [self presentModalViewController:dlgDate animated:true];
    [dlgDate release];
}

-(void) dateViewControllerDismissed:(NSDate *)selectedDate
{
    NSDateFormatter *dateFormat = [[[NSDateFormatter alloc] init] autorelease];
    [dateFormat setDateStyle:NSDateFormatterShortStyle];
    receiptDate = selectedDate;
    dateString = [dateFormat stringFromDate:receiptDate];
    lblDate.text = dateString;
} 
```

因此，当我第一次单击父控制器上的设置日期按钮时，会出现 DateViewController，我从 datepicker 控件中选择日期，然后控制器被关闭。在父视图控制器中，调用 dateViewControllerDismissed 并将接收日期设置为 selectedDate 参数。下次我单击日期按钮时，我收到一个错误的访问错误，我将 DateViewController 的 selectedDate 属性设置为receiptDate。我假设这是某种我没有正确处理的内存问题。IOS编程对我来说仍然是新的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T02:11:27.953

我在您的代码中发现了几个可能导致您的应用程序崩溃的问题。实际上它们是内存管理问题。

1.  将自动释放的对象分配给`receiptDate`：

    ```
    receiptDate = [NSDate date]; 
    ```

    当您稍后尝试使用此值时，它将导致应用程序崩溃，因为该`receiptDate`点可能已经被释放的内存。您可以通过保留该值来修复它：

    ```
    receiptDate = [[NSDate date] retain]; 
    ```

    并在`dealloc`您更改它的地方或任何地方发布（我不知道它是如何声明的。它应该是`retain`财产）。

2.  您正在分配`NSDate`而不保留它：

    ```
    receiptDate = selectedDate; 
    ```

    你可以通过保留来修复它：

    ```
    receiptDate = [selectedDate retain]; 
    ```

很抱歉，因为我无法在 Objective-C 中编写内存管理的所有方面。如果你对 iOS 内存管理不太了解，最好使用 ARC。

您可以在 Apple 的这两个指南中找到很多有用的信息：[Advanced Memory Management Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)和[Memory Management Programming Guide for Core Foundation](http://developer.apple.com/library/ios/#Documentation/CoreFoundation/Conceptual/CFMemoryMgmt/CFMemoryMgmt.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T02:21:57.830

您的财产永远不会被保留。我建议做的是将您的财产声明中的to 更改`assign`为。`retain`这将解决您的问题，您不必在`retain`任何设置 selectedDate 的地方打电话。该物业将为您做到这一点。

如果您不使用 ARC，请不要忘记在您的 dealloc 方法中将属性设置为 nil，如下所示：

```
self.selectedDate = nil; 
```

请注意，我使用 self.selectedDate。重要的是 selectedDate 作为属性而不是变量进行访问。

# sql - Oracle SQL——使用日期函数改进查询

> ID：12718253
> 
> 赞同：1
> 
> 时间：2012-10-03T23:21:44.307
> 
> 标签：sql, oracle

我有这个查询

```
 --Retention by DOC,Users created >= Jan 1,2012--
Select 
One.Date_Of_Concern,
Two.Users, 
One.Retained,
Round(One.Retained/Two.Users,4) as Perc_Retained
From
(
Select 
To_Date('2012-sep-09','yyyy-mon-dd')As Date_Of_Concern,
Count(P.Player_Id) As Retained
From Player P
Where
Trunc(P.Create_Dtime) >= To_Date('2012-Jan-01','yyyy-mon-dd')
 And
(To_Date('2012-sep-09','yyyy-mon-dd')-Trunc(P.Init_Dtime))<=7
 ) One
Inner Join
(
Select 
To_Date('2012-sep-09','yyyy-mon-dd')As Date_Of_Concern,
Count(P.Player_Id) As Users
From Player P
Where
Trunc(P.Create_Dtime) >= To_Date('2012-Jan-01','yyyy-mon-dd')
) Two On One.Date_Of_Concern = Two.Date_Of_Concern 
```

这给了我 1 行的结果：

```
Date_Of_Concern     USERS     RETAINED     PERC_RETAINED
09-Sep-12            449773    78983        0.1756 
```

我想通过添加某种日期更改方法来改进此查询。这样，我就不必每次都为 09-sep-12、10-sep-12、11-sep-12 等运行查询。相反，它将全部显示在同一个查询中，如下所示：

```
Date_Of_Concern     USERS     RETAINED     PERC_RETAINED
09-Sep-12            449773    48783        0.1756
10-Sep-12            449773    46777        0.1600
11-Sep-12            440773    44852        0.1500
12-Sep-12            349773    42584         0.1400 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:06:47.480

好吧，根据给定的信息，我不知道您是否有任何桌子可以加入并带来这些日期。但是，如果你不这样做，你可以试试这个：

我们必须生成行并以顺序形式重现日期。但首先，让我们看一下如何生成行：

生成 5 行：

```
SELECT rownum 
FROM dual 
CONNECT BY LEVEL <= 5;

 ROWNUM
----------
         1
         2
         3
         4
         5 
```

现在，应用它来重现您的日期的数据源：

```
SELECT to_date('2012-sep-09','yyyy-mon-dd') + (rownum -1) as Date_Of_Concern
FROM dual 
CONNECT BY LEVEL <= 5;

 Date_Of_Concern
----------
 2012-sep-09
 2012-sep-10
 2012-sep-11
 2012-sep-12
 2012-sep-13 
```

Obviously you will need a start date. Additionally, the number 5 has to be replaced by the number of dates you need, it could be a date range like

```
SELECT to_date('2012-sep-09','yyyy-mon-dd') + (rownum -1) date
FROM dual 
CONNECT BY LEVEL <= (to_date('2012-sep-20','yyyy-mon-dd') - to_date('2012-sep-09','yyyy-mon-dd')); 
```

OK, now the final result would look like this:

```
SELECT  both.Date_Of_Concern,
        both.Retained,
        both.Users,
        Round(both.Retained/both.Users,4) as Perc_Retained
  FROM (select Date_Of_Concern,
              (Select Count(P.Player_Id) As Retained
                From Player P
                Where Trunc(P.Create_Dtime) >= To_Date('2012-Jan-01','yyyy-mon-dd')
                  And (Date_Of_Concern-Trunc(P.Init_Dtime))<=7) Retained,
              (Select Count(P.Player_Id) As Users
                    From Player P
                    Where Trunc(P.Create_Dtime) >= To_Date('2012-Jan-01','yyyy-mon-dd')
                ) Users
          from (SELECT to_date('2012-sep-09','yyyy-mon-dd') + (rownum -1) Date_Of_Concern,
                FROM dual 
                CONNECT BY LEVEL <= 5)) both 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T01:11:00.310

I have a feeling your query can be simplified a lot. Here is an attempt to list day by day from the beginning of 2012\. Depends what kind of range you are looking for.

```
SELECT date_of_concern
      ,Running_Total_Users AS Users
      ,Running_Total_Retained As Retained
      ,ROUND(Running_Total_Retained / Running_Total_Users, 4) AS Perc_Retained

  FROM ( SELECT date_of_concern

               ,SUM(Users) OVER( ORDER BY date_of_concern
                                 ROWS BETWEEN UNBOUNDED PRECEDING
                                          AND CURRENT ROW ) AS Running_Total_Users

               ,SUM(Retained) OVER( ORDER BY date_of_concern
                                 ROWS BETWEEN UNBOUNDED PRECEDING
                                          AND CURRENT ROW ) AS Running_Total_Retained

           FROM ( SELECT TRUNC(Create_Dtime) date_of_concern
                        ,COUNT(Player_Id) Users
                        ,SUM( CASE WHEN (TRUNC(Create_Dtime) - TRUNC(Init_Dtime)) <= 7 THEN 1 ELSE 0 END ) AS Retained
                    FROM player ON ( TRUNC(.Create_Dtime) >= TO_DATE('2012', 'YYYY') )
                )
        ) 
```

The inner most query is an attempt to re-write the posted query counting from day 1 (Jan 1 2012). Then the next wrapper is supposed to do running totals for each subsequent day. The final wrapper is to enable the `Perc_Retained`. Completed untested of course :)

# c++ - 标头和不同的 cpp 文件

> ID：12718257
> 
> 赞同：1
> 
> 时间：2012-10-03T23:21:58.840
> 
> 标签：c++

我已经知道包括警卫，但这里有一些我想弄清楚的问题：

## 示例 1

### Foo.h

```
int SumOfNums(int i, int j); 
```

### Foo.cpp

```
#include "Foo.h"
int SumOfNums(int i, int j){
   return i+j;
} 
```

### 主文件

```
#include "Foo.h"
#include "Foo.h"

int main(){
    SumOfNumbs(5,10);
} 
```

这将编译并运行正常。

## 示例 2

### Foo.h

```
int SumOfNums(int i, int j);
int i; 
```

### Foo.cpp

```
#include "Foo.h"
int SumOfNums(int i, int j){
   return i+j;
} 
```

### 主文件

```
#include "Foo.h"

int main(){
    SumOfNumbs(5,10);
} 
```

根据编译器重新定义“i”。

## 示例 3

### Foo.h

```
int SumOfNums(int i, int j);
enum FooBar{FOO, BAR}; 
```

### Foo.cpp

```
#include "Foo.h"
int SumOfNums(int i, int j){
   return i+j;
} 
```

### 主文件

```
#include "Foo.h"

int main(){
    SumOfNumbs(5,10);
} 
```

这将编译并运行正常。

## 示例 4

### Foo.h

```
int SumOfNums(int i, int j);
enum FooBar{FOO, BAR}; 
```

### Foo.cpp

```
#include "Foo.h"
int SumOfNums(int i, int j){
   return i+j;
} 
```

### 主文件

```
#include "Foo.h"
#include "Foo.h"
int main(){
    SumOfNumbs(5,10);
} 
```

根据编译器重新定义 FooBar。

把它们加起来：

**示例 1** - 为什么 Foo.h 可以在 main.cpp 中包含两次，而没有包含保护？

**示例 2** - int 变量与函数头有何不同？

**示例 3** - 当 Foo.cpp 中有一个 FooBar 定义而 main.cpp 中有一个定义时，为什么链接器不报错？

**示例 4 - 这与****示例 1**有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T23:26:07.497

1.  多次声明一个*函数*不是错误。

2.  的函数声明`SumOfNums`只告诉编译器`SumOfNums`存在于某处（但不在这里）。的定义`i`在全局区域中分配存储并为其命名。您有两个*定义*，`i`每个`.cpp`文件中都有一个，因为包含该定义的标头不止一次。

3.  链接器永远不会看到`enum FooBar`. 枚举中的值被编译器用作常量。

4.  此示例包含 的声明`enum FooBar`，而示例 1 没有。编译器只希望看到给定`enum`一次的声明。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T23:29:18.743

> Ex1 - 为什么 Foo.h 可以在 main.cpp 中包含两次，当没有包含守卫时？

因为在那种情况下，它只*声明*了一个函数。您可以拥有任意数量的声明。

> Ex2 - int 变量与函数头有何不同？

这也是一个*定义*，因此违反了一个定义规则。

> Ex3 - 当 Foo.cpp 中有一个 FooBar 定义而 main.cpp 中有一个定义时，为什么链接器不抱怨？

跨翻译单元定义类型很好。

> Ex4 - 这和 Ex1 有什么区别？

您在同一个翻译单元中定义了两次相同的类型 - 不允许。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T23:26:56.373

1.  因为函数声明可以重复，但类型定义等不能。
2.  您`i`在包含标题的每个翻译单元中定义变量，但“一个定义规则”意味着您在程序中只能有一个变量定义。
3.  的定义`enum FooBar`纯粹是类型信息；标头既不定义也不声明该类型的变量。您会得到与标准标题类似的行为，例如`<iostream>`.
4.  这里的区别在于您尝试重复`enum FooBar`（通过包含`Foo.h`两次）的类型定义并且不允许类型重新定义，这是您应该使用标头保护的主要原因。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-03T23:33:00.423

一般的答案是您可以多次声明事物，但只能定义一次（这并不完全正确，很少有事物只能声明一次，例如，模板上的默认参数）。当在翻译单元中看到多个定义时，编译器会抱怨，当在不同的翻译单元中看到事物的多个定义并且不能在不同的翻译单元中多次定义时，链接器会抱怨。例如，类型、模板和内联函数可以在每个翻译单元中定义一次而不会出现问题。普通函数只能在一个翻译单元中定义。

在您的第一个示例中，您只需在标头中声明一个函数。您可以根据需要随时声明函数。不过，您只能定义一次。

您的第二个示例包括变量的定义`i`。编译此标头的每个翻译单元都将包含`i`. 当链接器尝试构建东西时，它会检测到有两个定义`i`并且它会失败。包括守卫不会阻止这个问题，因为你他们只在一个翻译单元中工作。

您的第三个示例只是在标头中声明了一个函数，并且还定义了一个`enum`. 每个翻译单元中只能定义一次类型，但多个翻译单元都可以定义一个类型。原因很简单：类型不会创建任何代码，也不会为变量分配任何空间。

您的第四个示例包括定义`enum`两次的标题，即翻译单元看到类型的重新定义并失败。如果您使用了包含警卫，这个问题就会被发现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T23:40:11.957

**Ex1** - 它可以，因为它可以。即，这是合法的，语言中没有任何内容可以阻止您多次包含头文件。如果有的话，一开始就不需要包含警卫。这没有什么`Foo.h`可以阻止它被包含两次。它所拥有的只是一个函数原型，您可以根据需要包含任意多个函数原型的副本，只要它们都相同。

**Ex2** - 您将从*链接器*获得重复的符号消息，因为您将有两个名为 的全局变量`i`。但这是链接器的事情，而不是编译器的事情。如果您实际上遇到了编译器错误，我想这可能是因为`Foo.cpp`在包含之后`Foo.h`，您有一个全局变量`i`。但是，在 的主体内部`SumOfNums`，您也将`i`其用作函数参数。因此，在该函数内部，您无法访问全局`i`. 不过，并不是所有的 c++ 编译器都会抱怨这一点。有些人只会给你一个警告，然后继续他们愉快的编译业务。

**Ex3** - 因为`FooBar`是一个类型，而不是一个变量。链接器符号仅为全局变量和函数实现生成（意味着具有主体的函数，而不仅仅是原型）。仅通过 include 不会生成链接器符号`Foo.h`，因此不存在链接器问题。

**Ex4** -`Foo.h`此示例中的 定义了一种类型，而示例 1 中的未定义。因此，通过`Foo.h`在同一个`main.cpp`文件中包含两次，您将两次注入相同的类型定义。那是违法的。如果你问我*为什么*这对于类型定义是非法的，但对于函数原型是合法的，我能告诉你的就是语言规范是这样写的。这背后可能有一个基本原理，但我不知道它是什么。

# mysql - 在 3 个表中具有多个左连接的 mysql 查询？

> ID：12718260
> 
> 赞同：0
> 
> 时间：2012-10-03T23:22:48.277
> 
> 标签：mysql, sql

我有一个搜索查询，它将从 3 个表中检索信息我进行了查询，因此它从 2 个表中检索信息，我不知道我是否可以合并第三个

```
SELECT *
FROM articles
INNER JOIN terms
ON articles.ArticleID = terms.RelatedID AND terms.TermType = 'article' 
```

第三个查询是

```
SELECT * FROM categories where CategoryID in (something) 
```

某些东西是文章表中的一个字段，其值类似于“3,5,8”

我想将这 2 个查询合并为 1 个查询，我不知道它是否可以通过 1 个查询完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:32:13.530

不查看您的架构（这会很有帮助）和一些示例数据尝试此查询

```
选择 *
FROM 类别，文章
INNER JOIN 术语
开启（articles.ArticleID = terms.RelatedID AND terms.TermType = 'article'）
在哪里
FIND_IN_SET(categories.CategoryID,articles.categories)

```

这是定义`FIND_IN_SET()`

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T23:34:19.010

如果我理解正确的话。看起来每篇文章都有多个类别，所有类别 ID 都存储为串联字符串。

```
SELECT A.*
FROM articles A
INNER JOIN terms T on A.ArticleID = T.RelatedID AND T.TermType = 'article'
LEFT JOIN categories C on C.CategoryID IN (3,5,8 OR A.CategoryIDs)
GROUP BY C.CategoryName 
```

您想 LEFT JOIN 因为您可能有也可能没有多个类别，您可以按类别分组以获取不同的类别文章对，并根据需要 CONCAT() 重新组合文章记录。

# ruby - Watir-webdriver - 强制 Firefox 关闭

> ID：12718261
> 
> 赞同：1
> 
> 时间：2012-10-03T23:22:49.983
> 
> 标签：ruby, watir-webdriver

我是 watir-webdriver 的常客。一个奇妙的宝石，但我对较新的浏览器关闭的问题越来越多。我运行一个 ubuntu 机器，它处理一些后台任务，通过 watir webdriver 启动一个 firefox 浏览器。当计算机运行几个小时后，通常处理超过 100 个作业，然后打开浏览器开始成为问题。它们占用了内存，最终卡住了计算机，迫使我重新启动。

即使我执行以下操作，也会出现问题：

```
begin
  b = Watir::Browser.new :firefox, :profile => 'default'
  # Goto a few pages
  b.close
rescue => e
  b.close
  raise e
end 
```

知道我能做些什么来解决它吗？如果发生异常，有没有办法确保进程被迫退出？以及如何调试它？

我经常看到一些超时异常说无法绑定到锁定端口或无法获得稳定的连接。

顺便说一句，红宝石 1.9.3，ubuntu 12.04 watir-webdriver 0.6.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:17:13.227

试试这个：

```
begin
  b = Watir::Browser.new :firefox, :profile => 'default'
  # Goto a few pages
ensure
  b.close
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T23:39:32.007

您可能想研究无头解决方案，例如[无头 gem](http://watirwebdriver.com/headless/)或[Celerity](http://celerity.rubyforge.org/)。

无头 gem 仍然驱动浏览器，只是不在显示器上。然而，Celerity 封装了 HTMLUnit，它是一个具有良好 javascript 支持的虚拟浏览器。我一直在使用 Celerity 来运行自动化测试，而且它很健壮。主要的警告是它只是 JRuby。

另一种选择是使用更精简的浏览器，例如 webkit。

# haskell - 多态约束

> ID：12718268
> 
> 赞同：7
> 
> 时间：2012-10-03T23:23:55.797
> 
> 标签：haskell, types

我有一些人为的类型：

```
{-# LANGUAGE DeriveFunctor #-}

data T a = T a deriving (Functor) 
```

...并且该类型是一些人为类的实例：

```
class C t where
    toInt :: t -> Int

instance C (T a) where
    toInt _ = 0 
```

我如何表达一个函数约束，它`T a`是某个类的实例`a`？

例如，考虑以下函数：

```
f t = toInt $ fmap Left t 
```

直观地说，我希望上述函数能够正常工作，因为`toInt`它适用于`T a`all `a`，但我无法在类型中表达这一点。这不起作用：

```
f :: (Functor t, C (t a)) => t a -> Int 
```

...因为当我们应用时`fmap`，类型已变为`Either a b`. 我无法使用以下方法解决此问题：

```
f :: (Functor t, C (t (Either a b))) => t a -> Int 
```

...因为`b`不代表一个普遍量化的变量。我也不能说：

```
f :: (Functor t, C (t x)) => t a -> Int 
```

...或用于`forall x`暗示约束对所有人都有效`x`。

所以我的问题是，是否有办法说约束在其某些类型变量上是多态的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T00:06:35.853

使用[约束](http://hackage.haskell.org/package/constraints)包：

```
{-# LANGUAGE FlexibleContexts, ConstraintKinds, DeriveFunctor, TypeOperators #-}

import Data.Constraint
import Data.Constraint.Forall

data T a = T a deriving (Functor)

class C t where
    toInt :: t -> Int

instance C (T a) where
    toInt _ = 0

f :: ForallF C T => T a -> Int
f t = (toInt $ fmap Left t) \\ (instF :: ForallF C T :- C (T (Either a b))) 
```

# spring - 是否可以从 activemq 和 rabbitmq 实现一个通用的 msg 消费者？

> ID：12718273
> 
> 赞同：0
> 
> 时间：2012-10-03T23:24:34.143
> 
> 标签：spring, jms, activemq, rabbitmq, amqp

我们当前的实现有一个抽象层分离（相当）一些接口 api，如 start、close 等，基本上遵循模板模式。有更好的方法吗？
不是 Spring 专家，但 Spring 能成为我们的答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T01:03:47.617

简短回答：不。更长的回答：API 和协议是不同的。Spring 或类似的框架对您没有帮助。一个通用的抽象层将是 AMQ(JMS) 和 RMQ (AMQP) 的子集。

理论上，您可以尝试使用 JMS 连接到 RMQ（如 Apache QPid 的客户端 JMS 库）。它不支持 AMQP 的所有功能，上次我尝试时，我只是运行了一个连接。所以不要去那里。或者通过一些常见的受支持的有线协议，例如 MQTT（非常有限）。

我认为你走对了——编写你自己的抽象来支持你需要的功能子集。

# python - pyserial.readline() 与 python 2.7

> ID：12718278
> 
> 赞同：1
> 
> 时间：2012-10-03T23:25:12.023
> 
> 标签：python, python-2.7, pyserial

我正在使用 python 2.7.2 和 pyserial 2.6。与具有 eol 的“\n”以外的字符的设备交谈时，使用 pyserial.readline() 的最佳方法是什么？[pyserial 文档](http://pyserial.sourceforge.net/shortintro.html#opening-serial-ports)指出 pyserial.readline() 在 python 2.6+ 中不再接受 'eol=' 参数，但建议使用 io.TextIOWrapper 如下：ser = serial.serial_for_url('loop://', timeout= 1 ) sio = io.TextIOWrapper(io.BufferedRWPair(ser, ser))

然而，python [io.BufferedRWPair 文档](http://docs.python.org/library/io.html#io.BufferedRWPair)特别警告不要使用这种方法，称“BufferedRWPair 不会尝试同步对其底层原始流的访问。您不应将其与读取器和写入器传递相同的对象；请改用 BufferedRandom。”

有人可以指出 pyserial.readline() 与“eol”以外的其他 eol 一起工作的工作示例吗？

谢谢，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:45:40.037

read() 对其读取的数据具有用户可设置的最大大小（以位为单位），如果您的数据字符串是可预测的长度，您可以简单地将其设置为捕获固定长度的字符串。它在执行时有点“肯塔基风向”，但只要您的数据字符串大小一致，它就不会出错。

除此之外，您真正的选择是捕获数据流并将其写入另一个文件，然后手动/以编程方式拆分您的条目。

例如，您可以将数据流写入 .csv 文件，并将分隔符变量调整为您的 EoL 字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-15T21:26:01.110

假设 s 是一个打开的 serial.serial 对象，换行符是 \r。然后这将读取到行尾并将所有内容作为字符串返回到 '\r'。

```
def read_value(encoded_command):
    s.write(encoded_command)
    temp = ''
    response = ''
    while '\r' not in response:
        response = s.read().decode()
        temp = temp + response
    return temp 
```

And, BTW, I implemented the io.TextIOWrapper recommendation you talked about above and it 1)is much slower and 2)somehow makes the port close.

# java - Java - 我正在将堆栈链表修改为队列链表，但我的 dequeue 方法仍然表现得像 pop

> ID：12718280
> 
> 赞同：3
> 
> 时间：2012-10-03T23:25:37.697
> 
> 标签：java, linked-list, stack, queue

`private Node back`还没有使用，并且`enqueue`（它是 push）和`dequeue`（它是 pop）除了重命名一些东西之外还没有真正被修改过。同样，这最初是一个堆栈，但我正在尝试将其修改为一个队列。我之前用 s 完成了非链表队列和堆栈`int`，但是对于对象和链表，我有点迷路了。

```
public class DogQueue 
{
    private Node front = null;
    private Node back = null;
    private Node element = null;
    private int counter = 0; 
```

以上只是设置变量。

```
 private class Node //This sets up the Linked List
                     //Data Structure with nodes.
  {
      private Dog doggy;
      private Node nextNode;
      private Node firstNode;

      Node(Dog newDog)
      {
          doggy = newDog;
      }    
  } 
```

我不太明白的节点东西在上面。

```
 public void enqueue(Dog aDog) //This should enqueue
                                //an object of type Dog.
  {       
      Node dogNode = new Node(aDog);
      dogNode.nextNode = front;
      counter++;
      front = dogNode;
  } 
```

上面这里的push方法没有修改，只是改名了。

```
 public Dog dequeue()      //This should output
                            //the first entry in the list.
  {
      Dog firstDog = front.doggy;
      element = front.firstNode;
      counter--;
      return firstDog;
  } 
```

上面是我遇到最多麻烦的地方——目前它的行为类似于 pop（获取和删除列表中最后输入的元素）。

```
 public boolean isFull()   //Checks to see if List is Full.
  {
      return ( counter == 5 );
  } 
```

我将计数器设置为最多 5，这样我就可以调试 isFull。

```
 public boolean isEmpty()  //Checks to see if List is empty
  {
      if ( counter == 0 )
        {
            return true;
        } else {
            return false;
        }
  } 
```

这只是说如果计数器为零，则 isEmpty 为真（否则为假）。

```
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:49:24.120

我不擅长数据结构，但我相信你的入队和出队仍然表现得像 pop 和 push。前面应该指向队列的头部，尾部应该指向最后一个有效对象。所以尾巴最终应该指向空。我认为它应该是这样的：

```
 public void enqueue(Dog aDog)
     {
         Node dogNode = new Node(aDog);

         counter++;
         if (front == null)
             front = back = dogNode;
         else
         {
             back.nextNode = dogNode;
             back = dogNode;

         }
     }
  public Node dequeue()      
  {
      if(front == null) return null;
      Dog firstDog = front ;
      front = front.nextNode;
      counter--;
      return firstDog;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:04:39.273

这是主要问题。队列是 FIFO（先进先出），而堆栈是 LIFO（后进先出）。对于队列，您入队的第一个元素是您收到的第一个元素，而您压入堆栈的最新元素是您收到的第一个元素。

为此，让我们稍微检查一下您的代码。

```
 public void enqueue(Dog aDog) { //This should enqueue an object of type Dog.
      Node dogNode = new Node(aDog);
      dogNode.nextNode = front;
      counter++;
      front = dogNode;
  } 
```

您正在将新 dog 元素的下一个节点设置在前面。您必须走到队列的末尾，将最近的节点设置为新节点，并将新节点设置为空。使用您的代码，它看起来像这样：

```
public void enqueue(Dog aDog) {
    if(front == null) {
        front = new Node(aDog);
        back = front; // back will move later
    } else {
        Node tmp = new Node(aDog);
        tmp.setFirstNode(back);
        back.setNextNode(tmp);
        back = tmp;
    }
} 
```

* * *

```
 public Dog dequeue() {      //This should output the first entry in the list.
      Dog firstDog = front.doggy;
      element = front.firstNode;
      counter--;
      return firstDog;
  } 
```

至少，这确实显示了队列中的第一件事。但它实际上并没有*移动*头指针！使用您的代码来执行此操作，它看起来像这样：

```
public Dog dequeue() {
    if(head == null) {
        return null;
    } else {
        Dog tmp = front.getDoggy()
        front = front.getNextNode(); //move the front to point to the next location
        front.getFirstNode().setNextNode(null); //sever the link to the first element 
        front.setFirstNode(null); //sever the link to the first element
        return tmp;
    }
} 
```

# javascript - Javascript onclick 使用 for 循环显示数组的最后一个元素

> ID：12718284
> 
> 赞同：3
> 
> 时间：2012-10-03T23:25:51.973
> 
> 标签：javascript

我有小问题。我正在使用一家公司的 API。我请求活动，他们返回给我一系列活动。这是代码的一部分。

```
client.requestActivities(function(activities) {
        if (activities.length > 0) {
            for(i=0; i < activities.length; i++) {
                var activity = activities[i];
                activity.onStart(function() { alert(i+ " started"); });
                activity.onCredit(function() { alert(i+ " credit"); });
                activity.onClose(function() { alert(i+ " close"); });
                activity.onFinish(function() { alert(i+ " finish"); });
                            $('.Game-Screen-Footer').append('<div class="Game-Screen-Footer-Adv" id="foota'+i+'"><a href="javascript:;" ><img src="'+activity.image_url+'" alt="'+activity.display_text+'" width="190" height="110"></a></div>');
                document.getElementById('foota'+i+'').onclick = function() {
                ARNO.box.show({html:'<div id="socialVibeFancyBox0"></div>', close: false, width:activity.window_width, height:activity.window_height, openjs: 
                            function(){
                                client.loadActivityIntoContainer(activity, 'socialVibeFancyBox0');
                            }
                        });
            }
        } 
```

}

大多数情况下，此函数返回包含 3 个元素的数组。但是当我点击第一个活动时，onStart 它应该提醒我（0 开始），但它会提醒（4 开始），这意味着它会提醒 i 的最后一个元素。我应该如何解决这个问题？我尝试了很多东西，但我没有找到解决方案，也许你可以帮助我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T23:27:41.780

这是关闭问题的又一个案例。尝试这个：

```
for( i=0; i<activities.length; i++) {
    (function(i) {
        // your code here
    })(i);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T23:30:31.700

将`for`循环的内容移到一个函数中，并传入需要单独限定范围的值。

```
for(i=0; i < activities.length; i++) {
    setUpActivity(i, activities[i]);
} 
```

* * *

```
function setUpActivity(i, activity) {

    activity.onStart(function() { alert(i+ " started"); });
    activity.onCredit(function() { alert(i+ " credit"); });
    activity.onClose(function() { alert(i+ " close"); });
    activity.onFinish(function() { alert(i+ " finish"); });
    ARNO.box.show({
        html:'<div id="socialVibeFancyBox0"></div>', 
        close: false, width:activity.window_width, 
        height:activity.window_height, 
        openjs:function(){
                    client.loadActivityIntoContainer(activity, 'socialVibeFancyBox0');
                }
            });
} 
```

函数调用会创建一个新的变量范围。在函数中创建的任何变量或参数都将在它们自己的范围内，并且在同一范围内创建的函数将永久引用这些变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T23:32:45.657

如果你不关心 IE8- 那么 ES5 已经解决了这个问题`forEach`：

```
activities.forEach(function(v, i){
  // now 'i' will work anywhere within this scope
}); 
```

# php - PHP 下拉选择用信息填充文本区域

> ID：12718287
> 
> 赞同：1
> 
> 时间：2012-10-03T23:26:15.237
> 
> 标签：php, drop-down-menu, textarea, conditional, auto-populate

我一直在试图找出一段代码来回答以下问题。

我有一个票务网站，其中有一个下拉菜单，用户可以选择他们希望票去哪个部门，我需要它在文本区域中填充一些东西（要求他们包括他们的 ID、位置、主管等）

我的下拉代码是：

```
 </tr>
<tr height=2px><td align="left" colspan=2 >&nbsp;</td</tr>
<tr>
    <th>Department:</th>
    <td>
        <select name="deptId" onChange="getTopic('findtopic.php?topic_id='+this.value)">
            <option value="" selected >Select Department</option>
            <?
             $services= db_query('SELECT dept_id,dept_name FROM '.DEPT_TABLE.' ORDER BY dept_name');
             while (list($deptId,$dept) = db_fetch_row($services)){
                $selected = ($info['deptId']==$deptId)?'selected':''; ?>
                <option value="<?=$deptId?>"<?=$selected?>><?=$dept?></option>
            <?
             }?>
        </select>
        &nbsp;<font class="error"><b>*</b>&nbsp;<?=$errors['deptId']?></font>
    </td>
</tr> 
```

文本区域的代码是：

```
 <tr>
    <th valign="top">Message:</th>
    <td>
        <? if($errors['message']) {?> <font class="error"><b>&nbsp;<?=$errors['message']?></b></font><br/><?}?>
        <textarea name="message" cols="35" rows="8" wrap="soft" style="width:85%"><?=$info['message']?></textarea>
    </td>
</tr> 
```

我的希望是我可以设置一些东西，所以当用户从下拉列表中选择“访问请求”（在 mysql db 中的 depts 列表中为“9”）时，文本区域将自动填充事物列表用户的要求。

我是编码新手，并且让网站启动并运行（在 OSTICKET 论坛的大量帮助下），但我被这个网站难住了。

如果您需要任何其他数据，请告诉我。

火球布雷迪

# jquery - 在窗口调整大小时更改背景位置会导致图像闪烁

> ID：12718289
> 
> 赞同：1
> 
> 时间：2012-10-03T23:26:26.623
> 
> 标签：jquery, html, css

我有一个轮播，我需要根据浏览器的当前宽度重新定位轮播幻灯片。我需要遵循的规则是：

```
browserWidth > 1200: do not reposition slide
browserWidth > 960 && browserWidth < 1200: move slide background X position based 
                                           on the formula (25/48*browserWidth)-625
browserWidth < 960: reposition background X position to -125px 
```

我写了一些 JavaScript 来做到这一点，但是每当我调整浏览器的大小时，图像就会开始闪烁很多。我认为计算机在尝试重新渲染背景图像时遇到了麻烦，因为它们的分辨率如此之高。有没有办法解决这个闪烁的问题？

```
$(window).resize(function() {
    var winW = $(window).width();
    if (winW > 960 && winW < 1200) {
        $('#' + carouselID).css('left', '600px' ); 
        var leftValue = ((25/48) * winW - 625) + 'px';
        var backgroundAtr = 'url(http://www.placehold.it/1200x800) ' + leftValue + ' top no-repeat';
        $('#' + carouselID + ' .slides .slide').css('background', backgroundAtr );
    } else if (winW <= 960) {
        $('#' + carouselID).css('left', '600px' ); 
        var leftValue = '-125px';
        var backgroundAtr = 'url(http://www.placehold.it/1200x800) ' + leftValue + ' top no-repeat';
        $('#' + carouselID + ' .slides .slide').css('background', backgroundAtr );
    } else if (winW >= 1200) {
        $('#' + carouselID).css('left', '50%' );
        var leftValue = 'left';
        var backgroundAtr = 'url(http://www.placehold.it/1200x800) ' + leftValue + ' top no-repeat';
        $('#' + carouselID + ' .slides .slide').css('background', backgroundAtr );
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:30:04.453

我建议将调整大小的代码放在`timeout`. 一些浏览器喜欢触发多个调整大小事件，这可能是导致闪烁发生的原因。尝试这样的事情：

```
var timeout;
$(window).resize(function() {
    clearTimeout(timeout);
    timeout = setTimeout(function () {
        var winW = $(window).width();
        if (winW > 960 && winW < 1200) {
            $('#' + carouselID).css('left', '600px' );
            var leftValue = ((25/48) * winW - 625) + 'px';
            var backgroundAtr = 'url(http://www.placehold.it/1200x800) ' + leftValue + ' top no-repeat';
            $('#' + carouselID + ' .slides .slide').css('background', backgroundAtr );
        } else if (winW <= 960) {
            $('#' + carouselID).css('left', '600px' );
            var leftValue = '-125px';
            var backgroundAtr = 'url(http://www.placehold.it/1200x800) ' + leftValue + ' top no-repeat';
            $('#' + carouselID + ' .slides .slide').css('background', backgroundAtr );
        } else if (winW >= 1200) {
            $('#' + carouselID).css('left', '50%' );
            var leftValue = 'left';
            var backgroundAtr = 'url(http://www.placehold.it/1200x800) ' + leftValue + ' top no-repeat';
            $('#' + carouselID + ' .slides .slide').css('background', backgroundAtr );
        }
    }, 10);
}); 
```

如果有超时，这将首先清除超时。然后它将设置您的调整大小代码以在 10 毫秒内执行。这应该给浏览器足够的时间来喘口气，并停止触发多个调整大小事件——它基本上是一个*去抖动*功能。

# matlab - MATLAB num2str 格式

> ID：12718291
> 
> 赞同：4
> 
> 时间：2012-10-03T23:26:50.057
> 
> 标签：matlab

我将变量值存储在 MATLAB 中，并将其中一个变量值作为文件名的一部分。例如`"Error=1e-003.mat"`，但是当我使用`num2str`命令将数字转换为字符串时，不同版本的 MATLAB 给了我不同的格式。这个数字`1e-3`，MATLAB2011 给我`1e-003`，MATLAB2012 给我`1e-03`。

当我尝试使用这两种格式混合加载一批文件时，这会遇到麻烦。有谁知道为指数添加零或删除零以使名称一致的方法？或者有什么其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T04:38:39.797

这是一种相当可靠的方法：

```
A = num2str(YOUR_NUMBER, '%0.0e');

if A(end-2)=='-' || A(end-2)=='+'
    A = [A(1:end-2) '0' A(end-1:end)]; end 
```

用文字：转换数字，并检查倒数第二个字符是 a`'+'`还是 a `'-'`。如果是这样，请添加一个`'0'`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-04T01:45:16.657

指定一个“格式字符串作为第二个参数，如下所示：

```
>> disp(num2str(2920230,'%0.10e'))
2.9202300000e+006 
```

这里`%0.10e`的意思是在小数点前至少显示 0 位，在其后以指数形式显示 10 位。

# ruby - 通过 ruby 编辑时如何“不更改”文件属性？

> ID：12718293
> 
> 赞同：1
> 
> 时间：2012-10-03T23:27:06.100
> 
> 标签：ruby

我用`ruby -pi~ -e \"gsub(/\\\"/, \\\"'\\\")\" \"#{dir}\\*.csv\"`单引号替换目录中所有文件中的双引号`#{dir}`

它运行良好，但它将文件的日期/时间更改为当前文件。

**如何保留文件的时间/日期属性？**

*   红宝石 1.9.3p194 (2012-04-20) [i386-mingw32]
*   Windows 7的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T00:29:44.460

您不能，但您可以像这样将修改时间设置回更改之前

```
original_time= File.mtime('myfile')
p original_time

date = Time.now - 86400
File.utime(date, date, 'myfile')
p File.mtime('myfile')

File.utime(original_time, original_time, 'myfile')
p File.mtime('myfile')

#2012-10-04 02:28:25 +0200
#2012-10-03 02:28:25 +0200
#2012-10-04 02:28:25 +0200 
```

utime(atime, mtime, file_name,...) → integer click to toggle source 将每个命名文件的访问和修改时间设置为前两个参数。返回参数列表中文件名的数量。

# c++ - 有没有办法在没有 QApplication::exec() 的情况下使用 Qt？

> ID：12718296
> 
> 赞同：5
> 
> 时间：2012-10-03T23:27:33.870
> 
> 标签：c++, qt, events, user-interface

有没有不调用 QApplication::exec() 来使用 Qt 的安全方法？

我有许多不同的对象在多个资源上执行长期进程（其中至少一个正在与 Web 应用程序服务器通信）。我正在制作一个 GUI 应用程序，提示用户在正确的时间输入这些不同的进程。我想将我的“流程”逻辑——决定下一步做什么的逻辑——放在一个地方，而不是像对话框类这样的 GUI 对象中。我在想我可以做这样的事情：

```
...

wait_dialog dlg;
dlg.setModal( false );
dlg.show(); // Should return...

netobject.start_long_lived_process_that_happens_on_other_thread( &completion_callback );
while ( !completion_callback_called() )
{
    qApp->processEvents();
    netobject.pump_callbacks();
    magically_avoid_busywait_while_still_servicing_qt_somehow();
}

dlg.hide();

... 
```

从 Qt 的角度来看，这安全吗？有没有“好”的实施方式`magically_avoid_busywait_while_still_servicing_qt_somehow()`？

我在这里想要完成的是尽可能以最明确的方式编写我们的处理流程。我想要一个执行此操作的函数：

```
 show_a_non_modal_wait_dialog()

 start_some_processing_1()

 wait_for_processing_1_to_finish()

 dismiss_non_modal_wait_dialog()

 show_modal_input_dialog()

 if ( cancelled ) return

 show_a_non_modal_wait_dialog()

 start_some_processing_2()

 wait_for_processing_2_to_finish()

 dismiss_non_modal_wait_dialog()

 show_modal_input_dialog()

 if ( cancelled ) return

 ... 
```

我真正想要避免的是开始并等待 Qt 小部件和窗口内的处理。此外，处理对象本身完全独立于 Qt。我想我想要做的是在单个函数中创建一个控制器，其中包含一些帮助回调和状态变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T23:45:48.833

您想要的是应用程序的主事件循环以外的事件循环。这可以使用[`QEventLoop`](http://qt-project.org/doc/QEventLoop.html)：

```
wait_dialog dlg;
dlg.setModal( false );
dlg.show(); // Should return...

QEventLoop loop;
connect(&netobject, SIGNAL(done()), &loop, SLOT(quit()));
netobject.start_long_lived_process_that_happens_on_other_thread();

loop.exec(); // BLOCKING (non-busy) until quit() is called via the signal done() 
```

虽然（在我看来）这是干净的代码，但这需要您的 netobject 类是 QObject 并实现一个信号`done()`（这也比提供回调更干净）。

现在您可以将整个代码包装在一个函数中，该函数本身就是一个阻塞调用，因此如果您愿意，它可以从您的对话框中返回一些结果。

# android - Android 和 Arduino 都通过蓝牙接收到奇怪的值

> ID：12718301
> 
> 赞同：2
> 
> 时间：2012-10-03T23:28:16.463
> 
> 标签：android, bluetooth, arduino, communication

我正在使用 Android 端的 BluetoothChat 代码使用聊天框向 Arduino UNO 发送 ON/OFF 信号（我正在发送 110、119 或下面定义的其他情况），但是当我显示接收到的值时，它显示奇怪Arduino 串行监视器中的值，即 255、254、250 或 245，并且在 Android 端也以奇怪的值回复。

但令人惊讶的是，当我从 android 发送这些命令并且没有其他指令/LED 正确执行/打开/关闭时，110、119 等中只有一个条件为真。

任何人都可以帮我解决问题吗？下面是我的arduino代码。

```
int data; 
String message; 

void setup () 
{ 
Serial.begin (57600); 

pinMode (6, OUTPUT); 
pinMode (7, OUTPUT); 
pinMode (8, OUTPUT); 
pinMode (9, OUTPUT); 
pinMode (10, OUTPUT); 

digitalWrite(6, LOW); // off LED 1 at pin6 
digitalWrite(7, LOW); // off LED 2 at pin7 
digitalWrite(8, LOW); // off LED 3 at pin8 
digitalWrite(9, LOW); // off LED 4 at pin9 
digitalWrite(10, LOW); // off LED 5 at pin10 
}

void loop () { 
int i=0; 
if (Serial.available()>0) 
{ 
int data= Serial.read(); 

Serial.println (" Received data: "); 
Serial.println (data); 

if (data==110) //q 
{ 
digitalWrite(6, HIGH); // turn on LED 1 at pin6 
message = "LED 1 On"; 
Serial.println (message); 

} 
if (data==102) // a 
{ 
digitalWrite(6, LOW); // off LED 1 at pin6 
message = "LED 1 Off"; 
Serial.println (message); 
} 

if (data==96) //c 
{ 
digitalWrite(7, HIGH); //on LED 2 
message = "LED 2 On"; 
Serial.println (message); 
} 

if (data==115) //d 
{ 
digitalWrite(7, LOW); // off LED 2 
message = "LED 2 Off"; 
Serial.println (message); 
} 

if (data==111) //e 
{ 
digitalWrite(8, HIGH); //on LED 3 
message = "LED 3 On"; 
Serial.println (message); 
} 

if (data==97)// f 
{ 
digitalWrite(8, LOW); //sets the LED 3 
message = "LED 3 Off"; 
Serial.println (message); 
} 

if (data==107) //g 
{ 
digitalWrite(9, HIGH); //turn on LED 4 
message = "LED 4 On"; 
Serial.println (message); 
} 

if (data==120)//h 
{ 
digitalWrite(9, LOW); //sets the LED 4 
message = "LED 4 Off"; 
Serial.println (message); 
} 

if (data==99) //i 
{ 
digitalWrite(10, HIGH); //sets the LED 5 
message = "L5 high"; 
Serial.println (message); 
} 

if (data==104) //j 
{ 
digitalWrite(10, LOW); //sets the LED 5 
message = "LED 5 Off"; 
Serial.println (message); 
} 

if (data==112) //y 
{ 
digitalWrite(6, HIGH); // turn on ALL LEDs 
digitalWrite(7, HIGH); 
digitalWrite(8, HIGH); 
digitalWrite(9, HIGH); 
digitalWrite(10, HIGH); 
message = "ALL LEDs ON"; 
Serial.println (message); 
} 

if (data==122)//z 
{ 
digitalWrite(6, LOW); //Turn off all LEDs 
digitalWrite(7, LOW); 
digitalWrite(8, LOW); 
digitalWrite(9, LOW); 
digitalWrite(10, LOW); 
Serial.println ("ALL LEDs OFF"); 
} 

else 
{ 
digitalWrite(13, HIGH); //sets the LED 5 
delay(3000); //3sec 
digitalWrite(13, LOW); 
delay(3000); 
Serial.println (" else case executed "); 

} ////end of else 

}
data=0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:20:29.803

试试**char data = Serial.read();**

并展示适用于 Android 的 Java 代码。

查看[蓝牙 Arduino&Android的 100% 工作代码](http://english.cxem.net/arduino/arduino5.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T07:12:01.720

如果您使用的是 Arduino Uno，那么您不能使用串行监视器打印值，如果您已经使用串行与蓝牙通信，因为它只有一个串行端口。

您必须使用软件串行库或使用具有 4 个串行端口的 Arduino Mega。

# xaml - Visual Studio Designer 崩溃 Windows 8 System.UnauthorizedAccessException

> ID：12718303
> 
> 赞同：0
> 
> 时间：2012-10-03T23:28:24.937
> 
> 标签：xaml, windows-runtime, visual-studio-2012

我正在尝试使用 Component Arts 图表控件在 Visual Studio 中创建 Windows 8 应用程序。每次我在 VS 中打开设计器时，都会出现以下错误：

System.UnauthorizedAccessException

拒绝访问路径“C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0\ExtensionSDKs\ComponentArt.WinRT.DV.Charting\2012.1.1871\References\CommonConfiguration\Neutral”

不确定我应该为这条路径提供哪些安全设置才能让 VS 开心！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:40:59.077

似乎这是微软的一个已知问题。您可以在下面的 SO 线程中查看此问题的解决方案。

[适用于 Windows 8 RTM 的 Microsoft Advertising SDK 导致访问被拒绝错误](https://stackoverflow.com/questions/12443845/microsoft-advertising-sdk-for-windows-8-rtm-causes-access-denied-error)

# javascript - How can I prevent dropping into an invisible part of a jquery sortable

> ID：12718304
> 
> 赞同：1
> 
> 时间：2012-10-03T23:28:35.767
> 
> 标签：javascript, jquery, jquery-ui

I've got a couple of jquery sortables inside containers that scroll vertically. When dragging between those containers items can be added to a sortable by dragging below the container. Consider the following html:

```
 <style>
        .constrainer {
            height: 160px;
            overflow-y: auto;
            width:280px;
            border: 1px solid orange;
        }
        .sortitem {
            border: 1px solid #807eba;
            width: 160px
            display:inline-block;
            padding: 10px;
            margin: 10px;
            background-color: white;
        }
    </style>

    <div class="constrainer" style="float:left">
        <ul class="sortme">
            <li class="sortitem">item 1</li>
            <li class="sortitem">item 2</li>
            <li class="sortitem">item 3</li>
            <li class="sortitem">item 4</li>
            <li class="sortitem">item 5</li>
            <li class="sortitem">item 6</li>
        </ul>
    </div>
    <div class="constrainer" style="float:right">
        <ul class="sortme">
            <li class="sortitem">item 1</li>
            <li class="sortitem">item 2</li>
            <li class="sortitem">item 3</li>
            <li class="sortitem">item 4</li>
            <li class="sortitem">item 5</li>
            <li class="sortitem">item 6</li>
        </ul>
    </div> 
```

And the following script:

```
$('.sortme').sortable({connectWith: '.sortme'}); 
```

Note that you can easily drag an item from one of the lists to another list by hitting BELOW the list.

I'd like to prevent dragging to a list that is cut off. In my actual application there is a much more complicated DOM structure, so the actual solution needs to find the actual area of the sortable that is in-view and allow dropping only in that area. Same for re-ordering items in a single sortable.

Here is a jsfiddle of the code above: [http://jsfiddle.net/PFSsJ/](http://jsfiddle.net/PFSsJ/)

Edit: Clarification

To be clear, I still want to drag items to the part of the list that is visible, just not the part of the list that is invisible. For even more fun, arrange the lists vertically such that jquery ui can't decide which one to drop it on and it flickers back and forth like this: [http://jsfiddle.net/PFSsJ/1/](http://jsfiddle.net/PFSsJ/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:56:35.397

I spent about two weeks working on various solutions to this problem. The code below is working for me in the application I'm building. Note that it only deals with sortables that are stacked vertically and scroll vertically. It could probably be modified to deal with horizontal sortables but I haven't tried as it doesn't fit my use-case.

You use it just like a sortable, just $('.ulClass').boundedSortable();

```
(function($) {
$.widget("ui.boundedSortable", $.ui.sortable, {
    widgetEventPrefix: "sort",
    _init: function () {
        this.element.data("sortable", this.element.data("boundedSortable"));
        return $.ui.sortable.prototype._init.apply(this, arguments);
    },
    _create:function() {
        var ret = $.ui.sortable.prototype._create.apply(this, arguments);
        this.containerCache.sortable = this;
        return ret;
    },
    refreshPositions:function(fast){
        $.ui.sortable.prototype.refreshPositions.apply(this, arguments);
        _.each(this.items, function(item){
            var element = item.item[0];
            var offset = item.item.offset();
            var points = [[offset.left + 1, offset.top + 1],
                          [offset.left + (item.width / 2), offset.top + (item.height / 2)],
                          [offset.left + item.width - 1, offset.top + 1],
                          [offset.left + item.width - 1, offset.top + item.height - 1]];
            item.visible = _.any(points, function(point){
                var visibleElement = $.elementFromPoint(point[0], point[1]);
                if(element === visibleElement || (visibleElement && $.contains(element, visibleElement))){
                    return true;
                }
                return false;
            });
        }, this);

        _.each(this.containers, function(container){
            var parent = container.element;
            var cache = container.containerCache;
            while((parent = parent.parent()) && parent.length){
                parent = $(parent);
                var offset = parent.offset();
                var parentHeight = parent.height();
                if(cache.height > parentHeight){
                    cache.height = Math.round(parentHeight);
                }
                if(offset && cache.top < offset.top){
                    cache.top = offset.top;
                }
            }
        }, this);
        return this;
    },
    _intersectsWithPointer: function (item) {
        var ret = $.ui.sortable.prototype._intersectsWithPointer.apply(this, arguments);
        if(ret){
            if(!item.visible){
                return false;
            }
        }
        return ret;
    },
    _clear: function(){
        if(!(this.placeholder && this.placeholder[0].parentNode)){
            this.placeholder = [{parentNode:{removeChild:function(){}}}];
            this.placeholder.before = function(){};
        }
        return $.ui.sortable.prototype._clear.apply(this, arguments);
    },
    _contactContainers: function(event) {

        /** directly from jQuery source **/

        // get innermost container that intersects with item
        var innermostContainer = null, innermostIndex = null;

        for (var i = this.containers.length - 1; i >= 0; i--){

            // never consider a container that's located within the item itself
            if($.ui.contains(this.currentItem[0], this.containers[i].element[0])){
                continue;
            }
            if(this._intersectsWith(this.containers[i].containerCache)) {

                // if we've already found a container and it's more "inner" than this, then continue
                if(innermostContainer && $.ui.contains(this.containers[i].element[0], innermostContainer.element[0])){
                    continue;
                }
                innermostContainer = this.containers[i];
                innermostIndex = i;

            } else {
                // container doesn't intersect. trigger "out" event if necessary
                if(this.containers[i].containerCache.over) {
                    this.containers[i]._trigger("out", event, this._uiHash(this));
                    this.containers[i].containerCache.over = 0;
                }
            }

        }

        /** end direct copy from jQuery source*/

        if(!innermostContainer){
            if (this.placeholder) {
                if(this.placeholder[0].parentNode) {
                    this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
                }
            }
            this.currentContainer = null;
            return;
        }
        return $.ui.sortable.prototype._contactContainers.apply(this, arguments);
    }
});
})(jQuery);

(function ($){
    var check=false, isRelative=true;
    $.elementFromPoint = function(x,y)
    {
        var elemFromPtFunc = null;
        if(document.getElementFromPoint){
            elemFromPtFunc = _.bind(document.getElementFromPoint, document);
        }else if(document.elementFromPoint){
            elemFromPtFunc = _.bind(document.elementFromPoint, document);
        }

        if(!elemFromPtFunc) {
            console.error('no element from point?');
            return null;
        }
        var scrollTop = $(document).scrollTop();
        var scrollLeft = $(document).scrollLeft();
        return elemFromPtFunc(x - scrollLeft,y - scrollTop);
    };
})(jQuery); 
```

# html - 可见性：可见和 youtube

> ID：12718305
> 
> 赞同：0
> 
> 时间：2012-10-03T23:28:56.707
> 
> 标签：html, css, google-chrome, youtube

我有一个用`ul`/`li`列表创建的菜单。

为了创造一个很好的效果，我有以下 css：

```
#menu ul { 

    /* ... */

    visibility:hidden; 

    /* ... */

} 

#menu li:hover > ul {
    /* ... */ 

    visibility: visible;

    /* ... */
} 
```

您可以在此处查看完整代码：[http](http://www.red-team-design.com/css3-animated-dropdown-menu) ://www.red-team-design.com/css3-animated-dropdown-menu 。

除非我嵌入了 Youtube 视频（例如随机视频 - `<iframe src="http://www.youtube.com/embed/e80qhyovOnA?rel=0" frameborder="0" width="420" height="315"></iframe>`），否则菜单可以正常工作，没有任何问题。

我已经解决了可见性 css 属性和使用 Chrome 时的问题。

有没有办法可以更改 CSS 以保持弹跳效果？

用作品替换它，`display:none`但它会失去弹跳效果。似乎与 Youtube 的代码有冲突。理想情况下，`iframe`除非它是自动化的，因为视频是通过`WYSIWYG`.

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T15:06:16.063

Youtube CSS 在过渡方面出了点问题，所以，只要改变

```
-webkit-transition: all .2s ease-in-out;
-moz-transition: all .2s ease-in-out;
-ms-transition: all .2s ease-in-out;
-o-transition: all .2s ease-in-out;
transition: all .2s ease-in-out; 
```

至

```
-webkit-transition: opacity .2s ease-in-out;
-moz-transition: opacity .2s ease-in-out;
-ms-transition: opacity .2s ease-in-out;
-o-transition: opacity .2s ease-in-out;
transition: opacity .2s ease-in-out; 
```

它对我有很大帮助。

# javascript - 是否可以从照片中读取地理标签以用于谷歌地图 API？

> ID：12718307
> 
> 赞同：2
> 
> 时间：2012-10-03T23:29:21.590
> 
> 标签：javascript, google-maps

我正在尝试查看是否可以使用 javascript 从照片中读取地理标签。我特别想这样做以在谷歌地图 API 中使用。我知道这可能大部分时间都是在服务器端完成的，但我想知道这是否可能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T23:40:36.377

地理标记数据在 EXIF 中存储为 long/lat，并且有一个[exif parser](http://blog.nihilogic.dk/2008/05/reading-exif-data-with-javascript.html)的客户端实现。

# asp.net - 操作失败，出现 0x8007000B

> ID：12718316
> 
> 赞同：1
> 
> 时间：2012-10-03T23:30:11.933
> 
> 标签：asp.net, command-prompt

我是我机器上的管理员，但是当我尝试运行时：

```
C:\Windows\Microsoft.NET\Framework\v2.0.50727\aspnet_regiis.exe -ir 
```

我收到此错误：

![在此处输入图像描述](../Images/43f7082a7ce7a2c71bd55139119a5312.png)

还尝试过： C:\Windows\Microsoft.NET\Framework\v2.0.50727\aspnet_regiis.exe -i 但这会返回相同的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T15:38:40.153

我有同样的错误，下面是修复的，

去

-添加/删除程序 -打开或关闭 Windows 功能 -Internet 信息服务 -万维网服务

启用 ASP.NET 的复选框。

# c# - 什么是 C# 中的 >> Java 运算符的等价物

> ID：12718319
> 
> 赞同：0
> 
> 时间：2012-10-03T23:30:32.230
> 
> 标签：c#, java

我正在将一些 Java 代码转换为 C#，并且遇到了 >> 运算符。该操作符叫什么，C# 中的等价物是什么？

我正在尝试转换以下代码：

```
final int pointerIndex = (action & ACTION_POINTER_INDEX_MASK) >> ACTION_POINTER_INDEX_SHIFT; 
```

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T23:31:39.053

它是右移运算符，在 C# 中也是如此。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T23:31:49.927

它是许多编程语言中可用的基本[移位运算符。](http://msdn.microsoft.com/en-us/library/xt18et0d%28v=vs.110%29.aspx)在 C# 中，它与在 Java 中相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T23:36:06.867

从未使用过，但这里是 msdn 链接：[C# shift](http://msdn.microsoft.com/en-us/library/aa691377%28v=vs.71%29.aspx)

# python - python 2.4 和 python 2.7 路径冲突

> ID：12718327
> 
> 赞同：0
> 
> 时间：2012-10-03T23:31:20.877
> 
> 标签：python, python-2.7

我尝试在有 2.4 的 centos 上安装 python 2.7。我已经阅读了许多文件并尝试应用它们，但仍然存在许多冲突。我是 sudo grant 的用户。当我编写 python 时，它会从 /opt/python2.7.1/bin 位置运行 python 2.7.1，但是，当我尝试安装 setuptools 时，`python setup.py install`它安装在`/usr/local/bin`.

可能是什么问题？它不应该在 /opt/python2.7.1./bin 吗？

注意：我已经更新了我的 .bash_profile

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:48:32.573

当您安装了多个 Python 版本时，您还必须在调用它时指定您想要的版本。在 CentOS 上，默认的 Python 是 2.4，并且被命名为“python”。因此，当您使用“python ...”安装时，您将使用 2.4 运行，它会尝试安装在 2.4 的站点包目录中。为了安装 2.7，您必须使用“python2.7 ...”进行安装。

Python 使用内置变量来确定它的位置和安装位置。什么是输出：

```
python2.7 -c "import sys; print sys.prefix" 
```

# cakephp - CakePHP 写入缓存时偶尔出现错误警告

> ID：12718331
> 
> 赞同：6
> 
> 时间：2012-10-03T23:31:40.253
> 
> 标签：cakephp, caching, cakephp-2.2

我正在使用 MAMP 在本地开发一个 CakePHP 2.2 站点。每隔一段时间，我就会收到一个或多个与此类似的警告，关于无法写入一个或多个缓存文件：

```
Warning: SplFileInfo::openFile(/Applications/MAMP/htdocs/mywebsite/www/app/tmp/cache/persistent/myapp_cake_core_cake_console_en-au): failed to open stream: Permission denied in /Applications/MAMP/htdocs/mywebsite/www/lib/Cake/Cache/Engine/FileEngine.php on line 313 
```

奇怪的是，/tmp 是 777，tmp/cache 是 777，而 tmp/cache/persistent 是 777（别担心……它不会是服务器上的 777！）。tmp/cache/persistent 中的文件本身是 644 - 但我假设 Cake 正在创建和管理该文件，并且使用它需要的权限来执行此操作。

如果我只是刷新页面，错误就会消失（然后稍后会重新出现）。我没有做任何显式缓存，所以这些东西只是 Cake 自动做的事情。

所以我的问题是：

a) Cake 的自动缓存是如何工作的？它是否在每次页面刷新时都尝试写入该文件，并且偶尔会失败一次？或者它只是偶尔尝试写入该文件，但每次尝试都失败？

b）如果它只是偶尔失败一次，我可以放心地忽略它吗？如果每次尝试都失败，我该如何解决？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-04T09:48:55.297

当与 Apache 不同的进程在缓存中创建文件时，可能会发生这种情况。例如，当您运行 shell 命令时可能会出现这种情况，因为您可能以不同于 apache 的用户身份执行此操作。

默认情况下，文件缓存创建具有权限的文件，仅允许创建文件的用户修改它们，但这可以通过在 core.php 的缓存配置中设置掩码来修复：

```
Cache::config('_cake_core_', array(
    'engine' => $engine,
    'prefix' => 'cake_core_',
    'path' => CACHE . 'persistent' . DS,
    'serialize' => ($engine === 'File'),
    'duration' => $duration,
    'mask' => 0666
));

Cache::config('_cake_model_', array(
    'engine' => $engine,
    'prefix' => 'cake_model_',
    'path' => CACHE . 'models' . DS,
    'serialize' => ($engine === 'File'),
    'duration' => $duration,
    'mask' => 0666
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T17:46:02.780

如果您想避免向“其他”组授予读/写访问权限，请在此处查看我的其他解决方案：

[https://stackoverflow.com/a/18703956/385979](https://stackoverflow.com/a/18703956/385979)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-16T16:43:00.607

真的很简单，假设你是一个 sudoer 并且你的用户名是 martinlutherking

```
sudo adduser martinlutherking www-data 
```

这样 cake 控制台命令可以读取 apache2 创建的缓存文件，但是您可能需要执行反向组添加以确保 www-data 可以读取 martinlutherking 创建的缓存文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-16T18:13:18.463

以防万一有人看到这个并想知道它在 cakePHP 3.x 中是如何工作的：

修改`/config/app.php`并添加`'mask' => 0666`到

```
/**
 * Configure the cache adapters.
 */
'Cache' => [
    'default' => [
        'className' => 'File',
        'path' => CACHE,
        'url' => env('CACHE_DEFAULT_URL', null),
        'mask' => 0666
    ], 
```

并且可能您还想将其添加到日志文件中：

```
/**
 * Configures logging options
 */
'Log' => [
    'debug' => [
        'className' => 'Cake\Log\Engine\FileLog',
        'path' => LOGS,
        'file' => 'debug',
        'levels' => ['notice', 'info', 'debug'],
        'url' => env('LOG_DEBUG_URL', null),
        'mask' => 0666
    ],
    'error' => [
        'className' => 'Cake\Log\Engine\FileLog',
        'path' => LOGS,
        'file' => 'error',
        'levels' => ['warning', 'error', 'critical', 'alert', 'emergency'],
        'url' => env('LOG_ERROR_URL', null),
        'mask' => 0666
    ],
], 
```

# mysql - 简单的 SQL 语句执行时间较长

> ID：12718333
> 
> 赞同：4
> 
> 时间：2012-10-03T23:31:47.407
> 
> 标签：mysql, sql

> **可能重复：**
> [在 Mysql 查询中引用整数的缺点？](https://stackoverflow.com/questions/4918512/disadvantages-of-quoting-integers-in-a-mysql-query)

我在 MYSql 数据库上有一个非常简单的名为 Device 的表。

```
+-----------------------------------+--------------+------+-----+----------------+
| Field                             | Type         | Null | Key | Extra          |
+-----------------------------------+--------------+------+-----+----------------+
| DTYPE                             | varchar(31)  | NO   |     |                |
| id                                | bigint(20)   | NO   | PRI | auto_increment |
| dateCreated                       | datetime     | NO   |     |                |
| dateModified                      | datetime     | NO   |     |                |
| phoneNumber                       | varchar(255) | YES  | MUL |                |
| version                           | bigint(20)   | NO   |     |                |
| oldPhoneNumber                    | varchar(255) | YES  |     |                |
+-----------------------------------+--------------+------+-----+----------------+ 
```

该表有超过 100K 的记录。我正在运行一个非常简单的查询

```
select * from AttDevice where phoneNumber = 5107357058; 
```

此查询几乎需要 4-6 秒，但是当我稍微更改此查询时，如下所示。

```
select * from AttDevice where phoneNumber = '5107357058'; 
```

执行几乎不需要时间。请注意，phoneNumber 列是 varchar。我不明白为什么前一种情况需要更长的时间而后来不需要。这两个查询之间的区别在于单引号。如果是这样，MYSQL 是否会以不同的方式处理这些查询，那为什么？

# 编辑 1

我使用`EXPLAIN`并得到了以下输出，但不知道如何解释这两个结果。

```
mysql> EXPLAIN select * from AttDevice where phoneNumber = 5107357058;
+----+-------------+-----------+------+---------------------------------------+------+---------+------+---------+-------------+
| id | select_type | table     | type | possible_keys                         | key  | key_len | ref  | rows    | Extra       |
+----+-------------+-----------+------+---------------------------------------+------+---------+------+---------+-------------+
|  1 | SIMPLE      | Device    | ALL  | phoneNumber,idx_Device_phoneNumber | NULL | NULL    | NULL | 6482116 | Using where |
+----+-------------+-----------+------+---------------------------------------+------+---------+------+---------+-------------+
1 row in set (0.00 sec)

mysql> EXPLAIN select * from AttDevice where phoneNumber = '5107357058';
+----+-------------+-----------+------+---------------------------------------+-------------+---------+-------+------+-------------+
| id | select_type | table     | type | possible_keys                         | key         | key_len | ref   | rows | Extra       |
+----+-------------+-----------+------+---------------------------------------+-------------+---------+-------+------+-------------+
|  1 | SIMPLE      |   Device  | ref  | phoneNumber,idx_Device_phoneNumber    | phoneNumber | 258     | const |    2 | Using where |
+----+-------------+-----------+------+---------------------------------------+-------------+---------+-------+------+-------------+
1 row in set (0.00 sec) 
```

有人可以解释一下 EXPLAIN 查询输出中存在的键、key_len 和行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T05:12:28.713

1）感谢您的“解释”。我们所有人（包括你，我敢肯定）*都知道*问题在于 mysql 必须将整数转换为字符串，并且必须为每一行执行此操作。但是您的“解释”证明了这一点。

2）这是一篇关于解释的简短文章：

> *   [http://www.lornajane.net/posts/2011/explaining-mysqls-explain](http://www.lornajane.net/posts/2011/explaining-mysqls-explain)
> 
> *possible_keys* 显示哪些索引适用于该查询，*键* 告诉我们实际使用了哪些索引-... 最后，*行*条目告诉我们 MySQL 必须查看多少行才能找到结果集。

```
Search value:   key:        type:  ref:   rows:  
-------------   ---         ----   ----   ----
5107357058      NULL        ALL    NULL   6482116
'5107357058'    phoneNumber ref    const  2 
```

3）“ref”列是“与索引比较的列”。在第二种情况下，字符串文字（“常量”）“5107357058”与键“phoneNumber”进行了比较。在第一种情况下，*没有*可用的密钥（因为您的搜索条件是完全不同的类型）；因此“ref”为NULL。

4）“类型”列是“连接类型”。“Ref”表示“从该表中读取所有具有匹配索引值的行”（在本例中为 2 行）。“ALL”表示“全表扫描”。在这种情况下，这意味着 600 万行。

5）这是“解释”的mysql文档：

*   [http://dev.mysql.com/doc/refman/5.5/en/explain-output.html](http://dev.mysql.com/doc/refman/5.5/en/explain-output.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T01:52:57.987

您通过不引用电话号码来欺骗 MySQL 做出错误的选择。考虑：

1.  列定义为 varchar
2.  在第一种（未加引号的）情况下，您将值提供为整数（长整数）。我原以为 MySQL 可以解决这个问题，但显然它没有，并进行了全表扫描。
3.  在第二种（引用的）案例中，您提供了正确数据类型（字符）的搜索键，MySQL 选择了索引而不是全表扫描。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T01:53:24.180

当您使用数字作为操作数时，不能使用 varchar 索引，摘自关于[隐式类型转换](http://dev.mysql.com/doc/refman/5.0/en/type-conversion.html)的精细文档：

> 对于字符串列与数字的比较，MySQL 不能使用列上的索引来快速查找值。如果 str_col 是索引字符串列，则在以下语句中执行查找时不能使用索引：
> 
> SELECT * FROM tbl_name WHERE str_col=1;
> 
> 原因是有许多不同的字符串可以转换为值 1，例如 '1'、'1' 或 '1a'。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T23:44:12.527

我相信 MySQL 在第一个示例中必须将数字转换为 varchar。在第二个例子中它没有。我猜这就是差异的来源。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T01:07:20.320

第一个示例逐个查看表，另一个使用索引。

[http://dev.mysql.com/doc/refman/5.0/en/show-columns.html](http://dev.mysql.com/doc/refman/5.0/en/show-columns.html)
如果 Key 是 MUL，则允许在列中多次出现给定值。该列是可以包含 NULL 值的非唯一索引或唯一值索引的第一列。

因此，第二个查询不是扫描所有空值，而是专门寻找非空值，从而加快处理速度。

....我认为。

# yui - YUI2 setStyle 不透明度在 IE10 中不起作用

> ID：12718334
> 
> 赞同：1
> 
> 时间：2012-10-03T23:31:48.553
> 
> 标签：yui, internet-explorer-10, yui2

我有一些看起来像这样的 YUI2 代码（v2.8.1）：

```
YAHOO.util.Dom.setStyle('foo', 'opacity', 0.5); 
```

和：

```
var t = new YAHOO.util.Anim(this._splashSlide.shutter, {opacity: {from: 1.0, to: 0}}, 1, YAHOO.util.Easing.easeBoth); 
```

它多年来一直运行良好，它会自动决定是否可以使用`style.opacity`或（对于 IE）是否必须使用 IE`style.filter`来实现不透明度。由于种种原因，不值得将此代码移植到 YUI3。

随之而来的是 IE 10，它（在标准模式下）不再具有该`style.filter`属性，仅支持标准`style.opacity`属性。这一切都很好，但是我正在运行的 YUI2 版本不了解 IE 10，并且显然仍在使用`style.filter`不再有效的属性。

所以，我的问题是是否有与 IE10 兼容的 YUI2 更新并将该`opacity`属性用于存在该属性的 IE 版本？

如果它只是一个简单的样式设置，我可以解决它，但我有许多 YUI 动画，我找不到解决这些问题的简单方法（我也不想花时间这样做）。

雅虎为 YUI2 解决了这个问题吗？任何人都知道解决方法，特别是对于`YD.setStyle()`内部调用的动画功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T00:00:36.657

我想我找到了自己问题的答案。YUI2 v2.9.0 将其`setStyle()`功能更改为使用功能检测，因此它们现在可以在支持它的浏览器上正确使用，并且仅在不支持时`style.opacity`使用 IE 。`style.filter``style.opacity`

如果有人想要一个典型的孩子来解释为什么浏览器检测不好而特征检测是好的，这是一个完美的例子。因为YUI2原来是用浏览器检测，现在在IE10上坏了。如果他们一开始就使用了功能检测，那么旧版本的 YUI2 可以在 IE10 上运行而无需更新。

现在，看看我是否可以让我的代码运行的站点升级到 YUI v2.9.0。如果没有，我将不得不编写一个混乱的解决方法。

# python - 更改字符串中的单词？

> ID：12718339
> 
> 赞同：1
> 
> 时间：2012-10-03T23:32:50.643
> 
> 标签：python, split, isnumeric

我有这个任务：

> 编写一个函数`smallnr(x)`，它接受一个数字`x`，如果`x`是一个整数`0`，`6`它返回数字的名称，否则它只是`x`作为字符串返回。

我做了以下事情：

```
def smallnr(x):
    if x>6:
        return str(x)
    else:
        lst=['zero','one','two','three','four','five','six']
        return (lst[x]) 
```

这行得通，但现在我必须这样做：

> 使用`smallnr`a 部分中的函数，编写一个函数 ，该函数`convertsmall(s)`将文本作为输入，`s`并返回 `s`转换为名称的小数字（0 到 6 之间的整数）的文本。例如，
> 
> > > convertsmall('我有 5 个兄弟和 2 个姐妹，共有 7 个兄弟姐妹。') '我有 5 个兄弟和 2 个姐妹，共有 7 个兄弟姐妹。'

我知道我需要以某种方式使用`split()`，`isnumeric()`但我不知道如何将它们放在一起并仅更改字符串中的数字。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:39:26.593

1.  拆分句子（在空格上）
2.  遍历单词（来自拆分）
3.  如果单词 isumeric 将其替换为函数的结果
4.  让他们重新聚在一起
5.  返回结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T23:42:19.983

所以你想把你传递给 convertsmall 函数的句子字符串用空格分割。您可以通过获取您的字符串并调用`.split(' ')`（例如`'hello world'.split(' ')`或`mystring.split(' ')`）来做到这一点。这将为您提供一个拆分数组，例如`['hello', 'world']`

然后您需要遍历生成的数组并查找数字或整数，然后将它们传递给您的函数并获取字符串值并将数组中的值替换为字符串值。

完成每个单词并转换数字后，您需要连接最终的数组。你可以这样做`' '.join(myArray)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T23:42:39.167

```
d={'0':'zero','1':'one','2':'two','3':'three','4':'four','5':'five','6':'six'}
parts = my_string.split() #split into words
new_parts = [d[p] if p in d else p for p in parts] #list comprehension to replace if possible
print " ".join(parts) #rejoin 
```

我认为会起作用

```
>>> mystring = 'I have 5 brothers and 2 sisters, 7 siblings altogether.'
>>> parts = mystring.split() #split into words
>>> d={'0':'zero','1':'one','2':'two','3':'three','4':'four','5':'five','6':'six'}
>>> new_parts = [d[p] if p in d else p for p in parts] #list comprehension to replace if possible
>>> print " ".join(new_parts) #rejoin
I have five brothers and two sisters, 7 siblings altogether. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T00:14:31.793

基于正则表达式而不是 split() 的解决方案：

```
def convertsmall(s):
    out = ''
    lastindex=0
    for match in re.finditer("\\b(\\d+)\\b", s):
        out += s[lastindex:match.start()]
        out += smallnr(int(match.group()))
        lastindex = match.end()
    return out + s[lastindex:] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T00:33:32.173

这是最简单的方法（在我看来）：

```
def convertsmall(text):
    return ' '.join(smallnr(int(word)) if word.isdigit() else word for word in text.split()) 
```

输出：

```
>>> convertsmall('I have 5 brothers and 2 sisters, 7 siblings altogether.')
'I have five brothers and two sisters, 7 siblings altogether.' 
```

为了理解这一点，让我们倒退一下：

1.  使用 -将字符串划分为一个`list`单词`text.split()`- 当没有传递参数时， split() 使用`' '`(space) 作为分隔符来划分字符串。
2.  `smallnr(int(word)) if word.isdigit() else word``smallnr()`-如果`word`是数字则调用，否则返回`word`不变。
3.  由于`word`是一个字符串，我们需要在将其`int(word)`传递给您的函数之前将其转换为整数，该函数假定`x`为整数。
4.  整个短语是一个列表理解，它处理每个`word`输入`text.split()`以产生一个新列表。我们`word`使用 ' '.join(list) 将列表中的 s 连接在一起，用空格分隔。

希望说明清楚:)

# ios - iOS 6 保存/恢复应用状态功能

> ID：12718341
> 
> 赞同：15
> 
> 时间：2012-10-03T23:32:55.790
> 
> 标签：ios, ios6

我正在尝试在 iOS 6 上使用新的保存/恢复应用程序状态功能，但是如果我终止了应用程序，则不会调用 (application:shouldRestoreApplicationState:) 方法，因此它不会恢复应用程序状态，但是如果我正在运行它从调试器被调用。

当我在 plist 中添加（应用程序不在后台运行）并将其设置为 YES 时，它起作用了，但我不想将其设置为 YES。我想知道是否有人在没有将（应用程序不在后台运行）设置为“是”的情况下让它工作。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-08T19:40:36.787

来自[苹果文档：](https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/StrategiesforImplementingYourApp/StrategiesforImplementingYourApp.html#//apple_ref/doc/uid/TP40007072-CH5-SW31)

> **当用户强制退出应用时，系统会自动删除应用的保留状态。**在应用程序被杀死时删除保留的状态信息是一种安全预防措施。（作为安全预防措施，如果应用程序在启动过程中崩溃两次，系统也会删除保留状态。）如果您想测试应用程序恢复其状态的能力，则不应在调试期间使用多任务栏杀死应用程序。相反，使用 Xcode 终止应用程序或通过安装临时命令或手势以按需调用退出以编程方式终止应用程序。

根据经验，最简单的方法是通过按主页按钮（或模拟器的 Command+Shift+H）将您的应用程序置于后台。然后使用 Xcode 停止按钮。正如文档所建议的，调试退出手势也可以。

**更新：**

我找到了一个小工作。应用程序将其状态保存在 Library/Saved Application State/[Bundle ID]-[App Name].savedState/data.data 中。

使用模拟器时，您可以复制此文件并在您想要恢复到该特定状态的任何时候将其放入。

同样，在设备上，您可以从管理器生成 .xcappdata 存档。然后，当您想从该保存状态恢复时，您可以上传 .xcappdata 存档。

# c# - 检查用户名是否存在

> ID：12718345
> 
> 赞同：1
> 
> 时间：2012-10-03T23:33:50.440
> 
> 标签：c#, asp.net

我正在开始编写网站代码，目前正在创建用户创建页面。所有验证工作正常，但我不确定将什么放入 checkUsername 方法以验证用户名不存在。下面是我的 ASP.NET 代码。

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
  <p>
  <asp:ValidationSummary ID="ValidationSummary1" runat="server" HeaderText="There were errors on the page:" />
  </p>
  <p>
      <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server"  ControlToValidate="username" ErrorMessage="Username is required."> *</asp:RequiredFieldValidator>
  Enter Username <asp:TextBox ID="username" runat="server"></asp:TextBox>
     <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" ControlToValidate="username" ErrorMessage="Username must be 4-10 letters or numbers." ValidationExpression="[a-zA-Z0-9]{4,10}" />
        <asp:CustomValidator ID="CustomValidator1" runat="server" controltovalidate="username" errormessage="Username is already in use." OnServerValidate="checkUsername" />
 </p>
 <p>
 Enter Password <asp:TextBox ID="entPWD" runat="server" TextMode="Password"></asp:TextBox>
        <asp:RegularExpressionValidator ID="RegularExpressionValidator2" runat="server" display="dynamic" ControlToValidate="entPWD" ErrorMessage="Password must contain one of the following: @#$%^&*/." ValidationExpression=".*[@#$%^&*/].*" />
        <asp:RegularExpressionValidator ID="RegularExpressionValidator3" runat="server" display="dynamic" ControlToValidate="entPWD" ErrorMessage="Password must be 6-12 characters." ValidationExpression="[^\s]{6,12}" />
 </p>
 <p>
 Confirm Password <asp:TextBox ID="confPWD" runat="server" TextMode="Password"></asp:TextBox>
        <asp:CompareValidator ID="CompareValidator1" runat="server" ControlToValidate="entPWD" ControlToCompare="confPWD" ErrorMessage="Passwords do not match." />
    </p>
    <asp:Button type="submit" ID="Button1" runat="server" Text="Submit" />
</asp:Content> 
```

这是我的代码背后：

```
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    private bool checkUsername(string username)
    {
        string connString = "Data Source=serveraddress;Initial Catalog=database;User Id=username;Password=password;";
        string cmdText = "SELECT COUNT(*) FROM igs_users WHERE username = @username";

        using(SqlConnection conn = new SqlConnection(connString))
            {
            conn.Open();

            using(SqlCommand cmd = new SqlCommand(cmdText, conn))
                {
                cmd.Parameters.AddWithValue("@username", username);

                int count = (int)cmd.ExecuteScalar();

                return (count > 0);
                }
            }
    }
} 
```

当我运行代码时，我收到以下错误消息：

```
Compiler Error Message: CS1061: 'ASP.default_aspx' does not contain a definition for 'checkUsername' and no extension method 'checkUsername' accepting a first argument of type 'ASP.default_aspx' could be found (are you missing a using directive or an assembly reference?) 
```

不知道我哪里出错了。我有使用 System.Data.SqlClient; 在后面的代码中，还添加了对 system.data.dll 的引用。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T23:36:04.080

自定义验证方法需要以下方法签名：

```
void checkUsername(object source, ServerValidateEventArgs args) 
```

ServerValidateEventArgs 不会将用户名作为字符串传递，而是具有该值。

而不是返回 true 或 false 进行验证，使用这个：

```
args.IsValid = true; 
```

有关使用 CustomValidators 的更多信息，请参阅此页面：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.onservervalidate (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.onservervalidate(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T23:36:14.910

尝试制作方法`public`而不是`private`. 您的 ASPX 页面正在尝试访问它，但它是`private`.

# haskell - haskell卡过滤器

> ID：12718346
> 
> 赞同：-2
> 
> 时间：2012-10-03T23:33:55.580
> 
> 标签：haskell

我有一组卡片

```
initialCards :: GameState
initialCards = [[Card s1 r1, Card s2 r2] | s1 <- [minBound .. maxBound]::[Suit], r1 <- [minBound.. maxBound]::[Rank], 
                                       s2 <- [minBound .. maxBound]::[Suit], r2 <- [minBound .. maxBound]::[Rank], 
                                       s1 /= s2, r1 /= r2] 
```

例如，我想保留等级为 Suit 和 Diamond 的 [Card]，我该如何编写代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:07:26.947

您在卡片列表上使用过滤器函数，并为其提供将 Suits 和 Diamonds 映射为 True 的函数。

# android - 如何禁用 adb 端口转发？

> ID：12718348
> 
> 赞同：10
> 
> 时间：2012-10-03T23:34:25.430
> 
> 标签：android, adb

如何禁用之前启用的 adb 中的端口转发规则

```
 adb forward tcp:1234 tcp:1234 
```

除了杀死并重新启动 adb 服务器之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T01:21:21.490

> 通过 ADB 设置重定向
> 
> Android 调试桥 (ADB) 工具提供端口转发，这是您设置网络重定向的另一种方式。有关更多信息，请参阅 ADB 文档中的转发端口。
> 
> 您还可以通过终止 ADB 服务器来删除重定向。

但是，您可以使用模拟器控制台提供的网络重定向，它提供了删除方法。访问类型：

> telnet 本地主机 emulator_port

通常第一个模拟器在端口 5554 上运行。

使用命令“rdir”添加、删除或列出网络重定向。

[请参阅使用网络重定向](http://developer.android.com/tools/devices/emulator.html#redirection)中的文档。

祝你好运。

**编辑：**

停止转发使用

`adb forward --remove tcp:<port>`, 或`adb forward --remove-all`.

这是 2012 年 12 月添加到 adb 的（[请参阅此处的补丁](https://android-review.googlesource.com/#/c/46371/)）。为 Android 4.3 (API 18) 发布的 SDK 更新是第一个支持它的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-21T06:03:31.593

尝试 adb forward --remove tcp:8080 或 adb forward --remove-all。

这是在 2012 年 12 月添加到 adb

# mysql - MySQL LOAD DATA INFILE 更新+插入问题

> ID：12718352
> 
> 赞同：0
> 
> 时间：2012-10-03T23:34:53.237
> 
> 标签：mysql, import

我得到了一个结构相当糟糕的表，它的主键设置为自动增量，而唯一键是唯一的。从概念上讲，UNIQUE 键应该是主键，但是建表的人在建表时并没有 UNQIUE 键的列信息。

现在，我们需要开始定期更新此表，其中提供的文本文件包含更新的行和新行。如果 UNIQUE 键中有匹配的值，那么挑战将是替换该行，并且我们实际上并不关心主键本身，只要它自动递增。

但是， LOAD DATA INFILE 的结构方式是它会重置我们已经拥有的 PK，这很糟糕 - 我们保留 PK 的原因是它是其他遗留表的外键（叹息......）。

那么......有没有办法可以制作一个优雅的仅限 SQL 的更新脚本，以文本形式读取更新的表，并仅基于 UNIQUE 键列进行更新，而不会搞砸 PK？

我想一个解决方案是将表导出到选项卡表单并执行 VLOOKUP 以分配具有匹配 PK 值的行（如果是新行，则为 NULL）。

有输入吗？

编辑：有人建议我将 LOAD DATE INFILE 加载到临时表中，然后从那里执行 INSERT/UPDATE。根据[这篇文章](http://www.electrictoolbox.com/article/mysql/cross-table-update/)和那篇文章所说的，这是我建议的脚本：

```
// Create temporary table
CREATE TABLE tmp {
// my specifications
}

// Load into temporary table
LOAD DATA LOCAL INFILE *'[my tab file]'* 
REPLACE INTO TABLE *mytable* FIELDS TERMINATED BY '\t' ENCLOSED BY '"' LINES TERMINATED BY '\r\n';

// Set copy all the columns over except the PK column. This is for rows with existing UNIQUE values
UPDATE mytable
RIGHT JOIN tmp ON mytable.unique = tmp.unique
SET mytable.col1 = tmp.col1, ..., mytable.coln = tmp.coln, mytable.unique = tmp.unique;

// Now insert the rows with new UNIQUE values
INSERT IGNORE INTO mytable (mytable.col1, mytable.col2, ...)
SELECT tmp.col1, tmp.col2, ... FROM tmp

// Delete the temporary table now.
DROP tmp; 
```

Edit2：我更新了上述查询并对其进行了测试。它应该工作。有什么意见吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:00:37.190

您可以使用 LOAD DATA INFILE 将数据加载到新表中。然后使用 INSERT、UPDATE 语句用新表中的数据更改表，在这种情况下，您可以根据需要链接表 - 通过主键/唯一键或任何字段。

# mysql - 查询 MySql DB VBScript 时返回亚洲字符而不是英文

> ID：12718353
> 
> 赞同：1
> 
> 时间：2012-10-03T23:35:09.970
> 
> 标签：mysql, vbscript

我正在使用 VBScript 查询仅包含英文字符的 MySQL 数据库。查询基本上是：SELECT * FROM table name PROCEDURE ANALYSE(1,1)

当我直接在数据库上运行查询时，它会返回预期的结果。但是，当查询通过 VBScript 运行时，它会返回乱码（中文？）。我知道事实上数据库只包含英语，因为我是建造它的人。我已经针对同一张表运行了许多其他查询，并且没有遇到任何问题。只有当我运行 PROCEDURE ANALYZE 查询时，它才会返回意外的内容。

VBScript 代码如下：

```
strSQLcommand = "SELECT * FROM " & strTempTableName & " PROCEDURE ANALYSE(1,1)"
otRecordset.Open strSQLcommand,Connection

If Not otRecordset.EOF Then
otRecordset.movefirst
Do While NOT otRecordset.EOF
wscript.echo otRecordset(0).value
wscript.echo  otRecordset(1).value
otRecordset.Movenext
Loop
End If 
```

从这个数据库中的任何其他表返回值我从来没有遇到过问题。我已经多次运行此查询并且总是得到相同的结果，这让我感到困惑。

非常感谢任何想法或想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:00:46.887

好的，所以，事实证明它与数据库本身无关。

我决定开始检查使用 VBScript VarTYpe() 方法返回的数据类型。返回“乱码/中文”的字段的数据类型为 8092。基本上，一个字节数组。洒一点谷歌仙尘让我想到了这个功能：

```
Function C8209toStr(body8209)
    If VarType(body8209) = 8209 Then
        Dim i
        ReDim aOut(UBound(body8209))
        For i = 1 to UBound(body8209) + 1
             aOut(i-1) = chr(ascb(midb(body8209,i,1)))
        Next
    C8209toStr = Join(aOut, "")
    End If
End Function 
```

希望能帮助其他人！

# javascript - 画布叠加导出

> ID：12718354
> 
> 赞同：0
> 
> 时间：2012-10-03T23:35:11.237
> 
> 标签：javascript, html, canvas, html5-canvas

我有 2 个画布，画布 1 和画布 2。两者都运作良好，但我想将它们混合以导出为图像。基于 CSS 的叠加层不起作用，因为它会打印 2 张图像。有什么要开始的吗？谢谢你。

```
<canvas id="canvas1" style="position:relative; float:left;border:1px solid #000 "     width="547" height="154">
</canvas>

<canvas id="canvas2" style="z-index: 1; position:absolute; float:left;" width="547" height="500">
</canvas> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T02:24:55.337

好吧，有几种方法可以解决这个问题，你所说的混合是什么意思？

如果您只是想将 canvas2 覆盖在 canvas1 上，但又不想更改任一原始画布，则可以将其数据发送到另一个画布，然后获取该数据。

遵循的方法：

```
draw canvas1 to canvas3
draw canvas2 to canvas3
get  canvas3 image 
```

工作的JavaScript：

```
// Make all the canvas and context variables */
var c1 = document.getElementById('c1');
var c2 = document.getElementById('c2');
var c3 = document.getElementById('c3');
var c4 = document.getElementById('c4');

var ctx1 = c1.getContext('2d');
var ctx2 = c2.getContext('2d');
var ctx3 = c3.getContext('2d');
var ctx4 = c4.getContext('2d');
/* */

// Draw square on canvas 1
ctx1.fillRect(0,0,50,50);

// Draw offset square on canvas 2
ctx2.fillRect(25,25,50,50);

// Make third image and onload function
var img3 = new Image();
img3.onload = function(){
  // Draw this image to canvas 4 so that we know it worked
  ctx4.drawImage(this,0,0);
}

// So we know when both have loaded
var imagesLoaded = 0;
function draw(){
  // increment number loaded
  imagesLoaded++;

  // draw this image to canvas 3
  ctx3.drawImage(this,0,0);

  // if the have both loaded, then...
  if (imagesLoaded == 2){

    // set third image's src to the canvas 3 image
    img3.src = c3.toDataURL();
  }

}

// First image
var img1 = new Image();
// So it will draw on canvas 3
img1.onload = draw;
// Set the src to canvas 1's image
img1.src = c1.toDataURL();

// Second image
var img2 = new Image();
// So it will draw on canvas 3
img2.onload = draw;
// Set the src to canvas 2's image
img2.src = c2.toDataURL(); 
```

[这里](http://jsfiddle.net/crzyman/6zE8M/)的工作示例。

但是，如果这不是您想要的，我很抱歉。

# algorithm - 设计一种算法从链表中随机选择一个元素

> ID：12718357
> 
> 赞同：2
> 
> 时间：2012-10-03T23:35:32.930
> 
> 标签：algorithm

> **可能重复：**
> [如何在链表中选择一个长度未知的统一随机元素？](https://stackoverflow.com/questions/9401375/how-would-you-pick-a-uniform-random-element-in-linked-list-with-unknown-length)

假设我们想从链表中随机选择一个元素，但我们不知道链表的长度。

设计一种算法，它需要尽可能少的运行时间来随机选择元素。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-03T23:41:36.810

有一个简单的算法`O(N)`，获取长度，然后选择一个元素。

但是你可以做得更好，使用在线算法，只访问每个元素一次：

您选择第一个元素作为答案，然后在第`k`th 个元素上用概率为 的元素替换您的答案`1/k`。这种方法没有偏差的事实可以用数学归纳法来证明。

广义版本（选择 k 个元素）是[水库采样](http://en.wikipedia.org/wiki/Reservoir_sampling)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-03T23:46:08.203

考虑一下：我假设您有一个变量来跟踪您的链接列表中有多少项目（标准编程实践）。如果你有一个传入该变量的函数，你所要做的就是有一个指向链表中一个项目的指针，并将指针设置为 rand() % Amount_Of_Items 然后让函数返回指针，如果你必须使用它。

# jquery - 请让这个手风琴适用于动态数据

> ID：12718362
> 
> 赞同：1
> 
> 时间：2012-10-03T23:36:03.677
> 
> 标签：jquery, css

我在下面有用于菜单手风琴的 JQuery 代码。实际上这段代码非常适用于静态数据，但在动态数据的情况下无法正确生成输出。在我的情况下，我的代码生成 ul ，li，锚标记自动生成，所以输出没有得到正确..

那么，谁能告诉我如何使它也适用于动态数据..？

这是代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="robots" content="all" />
<title>jQuery Vertical Accordion Menu Plugin v 2.6</title>
<link href="css/dcaccordion.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type='text/javascript' src='js/jquery.cookie.js'></script>
<script type='text/javascript' src='js/jquery.hoverIntent.minified.js'></script>
<script type='text/javascript' src='js/jquery.dcjqaccordion.2.7.min.js'></script>
<script type="text/javascript">
$(document).ready(function($){

                        $('.accordion-6').dcAccordion({
                        eventType: 'hover',
                        autoClose: true,
                        saveState: true,
                        disableLink: true,
                        menuClose: false,
                        speed: 'medium',
                        showCount: true,

                        autoExpand: true,
                        cookie  : 'dcjq-accordion-1',
                        classExpand  : 'dcjq-current-parent',

                        menuClose: false    
                    });

});
</script>
<link href="css/skins/blue.css" rel="stylesheet" type="text/css" />
<link href="css/skins/graphite.css" rel="stylesheet" type="text/css" />
<link href="css/skins/grey.css" rel="stylesheet" type="text/css" />
</head>
<body>

<div class="wrap">
    <div class="graphite demo-container">

            <ul class="accordion accordion-6">
                <li><a href="#">Home</a></li>
                <li><a href="#">Products</a>
                    <ul class="accordion"  id="accordion-6">
                        <li><a href="#">Mobile Phones &#038; Accessories</a> </li>
                        <li><a href="#">Desktop</a> </li>
                    </ul>
                </li>
            <li><a href="#">About Us</a>
                <ul class="accordion"  id="accordion-6">
                    <li><a href="#">About Page 1</a></li>
                    <li><a href="#">About Page 2</a></li>            
                </ul>
            </li>
            <li><a href="#">Services</a></li>
            <li><a href="#">Contact us</a></li>
            </ul>

    </div>
</div>

</body>
</html> 
```

顺便说一句，从这里我得到了这个代码：

```
http://www.designchemical.com/lab/jquery-vertical-accordion-menu-plugin/download/ 
```

希望有人能为我的问题提供解决方案..

谢谢！

# android - 应用专用键盘

> ID：12718364
> 
> 赞同：0
> 
> 时间：2012-10-03T23:36:09.310
> 
> 标签：android

我不想更换整个软键盘。我想在部署软键盘时添加一个 Next/Prev 按钮，当我的 WebView 中的一个字段看起来像 mylogin.yahoo.com 上的显示时

[http://imgur.com/a/zH0Ux](http://imgur.com/a/zH0Ux)

我在 github 上找到了这个

[https://github.com/chrisboyle/sgtpuzzles/blob/master/src/name/boyle/chris/sgtpuzzles/SmallKeyboard.java](https://github.com/chrisboyle/sgtpuzzles/blob/master/src/name/boyle/chris/sgtpuzzles/SmallKeyboard.java)

这似乎是完成此功能的合理方式。

扩展 android.inputmethodservice.KeyboardView 是一种合理的方式吗？

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T00:06:25.013

是的，扩展它是最好的方法。包装您要添加的内容。创建另一个键盘并将其设置为该键盘。

# jquery - jQuery排队动画序列有延迟；需要重复

> ID：12718366
> 
> 赞同：3
> 
> 时间：2012-10-03T23:36:23.040
> 
> 标签：jquery, loops, jquery-animate, queue, repeat

我需要下面的代码，它动画一系列图像，运行然后无限期地重复。目前它在页面加载，然后刚刚完成。看动画的网址是： http: [//marisspillanewines.com/dev/](http://marisspillanewines.com/dev/)

谢谢！莫娜

```
$(document).ready(function (){
  $("#cork_CU").animate({left: '-20px',top:'-20px'}, { duration: 600, queue: true, ease:true });
  $("#fisherman_CU").delay(4800).animate({left: '-20px',top:'-20px'}, { duration: 600, queue: true, ease:true });
  $("#maris_CU").delay(8800).animate({left: '-20px',top:'-20px'}, { duration: 600, queue: true, ease:true });
  $("#capsule_CU").delay(12800).animate({left: '-20px',top:'-20px'}, { duration: 600, queue: true, ease:true });
  $("#numbers_CU").delay(16800).animate({left: '-20px',top:'-20px'}, { duration: 600, queue: true, ease:true });
  $("#fisherman_CU").delay(4800).animate({left: '-700px',top:'600px'}, { duration: 0, queue: true, ease:true });
  $("#maris_CU").delay(4800).animate({left: '-700px',top:'-600px'}, { duration: 0, queue: true, ease:true });
  $("#cork_CU").delay(4800).animate({left: '700px',top:'600px'}, { duration: 0, queue: true, ease:true });
  $("#capsule_CU").delay(4800).animate({left: '700px',top:'-600px'}, { duration: 0, queue: true, ease:true });
  $("#numbers_CU").delay(4800).animate({left: '700px',top:'-600px'}, { duration: 0, queue: true, ease:true });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:16:48.967

对于 jQuery 中的此类时间问题，有一个[插件 jQuery-timing](http://creativecouple.github.com/jquery-timing/)。它将您的代码缩短为以下内容。我建议给图像一个通用的 CSS 类，例如“pic”：

```
var startLeft = $('.pic').each().css('left'),
    startTop = $('.pic').each().css('top'),
    targetPos = {left:-20,top:-20};

var $frame = $('.pic').parent();

function setBack(index) {
    this.css({left:startLeft[index], top:startTop[index]}).appendTo($frame);
}

$(".pic").repeat().each($).then(setBack).animate(targetPos,600).wait(4000); 
```

该解决方案非常通用，因为它不依赖于框架中的实际图像数量。

通过使用 .appendTo($frame) 我们确保动画图像始终位于最上面。

[.repeat()](http://creativecouple.github.com/jquery-timing/api/repeat/.repeat.html)是来自该扩展的计时方法，以及通过[.each($)](http://creativecouple.github.com/jquery-timing/api/each/.each_sequential.html)的顺序循环和延迟函数[.wait(timeout)](http://creativecouple.github.com/jquery-timing/api/wait/.wait_timeout.html)。

为了收集起始位置，我使用了带有并行[.each()](http://creativecouple.github.com/jquery-timing/api/each/.each_parallel.html)的简短语法。

# javascript - Ajax Control Toolkit ComboBox javascript 更新/更改

> ID：12718367
> 
> 赞同：3
> 
> 时间：2012-10-03T23:36:22.970
> 
> 标签：javascript, asp.net, testing, automated-tests, ajaxcontroltoolkit

我正在尝试编写一个自动化的 UI 测试。我正在为 asp.net 使用 Ajax Controlkit 中的 ComboBox。

我的测试框架注入了我正在选择的组合框选项的值，但是当它执行回发时，默认值会发布而不是新值（即使在回发发生之前显示了新值）。

我发现如果我注入新值，那么只需给组合框一个物理点击并继续测试回发发布正确的值。

我假设物理点击调用一个javascript函数来更新字段，但我似乎无法弄清楚我应该在我的测试中调用什么函数。

我很感激任何建议！

干杯乔恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:32:42.933

```
var extender = $find("ctl00_SampleContent_ComboBox1");
extender.get_textBoxControl().value = "Bravo";
extender._onTextBoxBlur(); 
```

在此页面上运行良好：[http ://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ComboBox/ComboBox.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ComboBox/ComboBox.aspx)

# drag-and-drop - 在 ember 中，如何将视图数据从拖放中传递？

> ID：12718369
> 
> 赞同：1
> 
> 时间：2012-10-03T23:36:33.650
> 
> 标签：drag-and-drop, ember.js

我正在使用 ember latest 和 jquery.ui 的 Draggable 和 Droppable。我还使用了一些有才华的 ember 人创建的 mixin，用于在 ember 中创建 Draggable 和 Droppable 视图。这是小提琴：

[http://jsfiddle.net/inconduit/6n49N/7/](http://jsfiddle.net/inconduit/6n49N/7/)

我需要将视图的内容附加到拖动事件，以便我可以在放置事件中访问它。直接使用 jquery，我知道你会这样做 $(..).draggable({ .. }).data("myData","some data here"); 但我不知道如何在这个 ember 实现中引用视图的内容。

这是小提琴中 App.Draggable 的片段：

```
 App.Draggable = JQ.Draggable.extend({
     appendTo: 'body',
     helper: function() {
          $(this).data("myData","this is where actual data would go"); 
```

JQ.Draggable 扩展了 Ember.View。在 helper() 函数内部，'this' 指的是实际的 DOM 元素，我不知道如何引用 View 的变量。我想传递视图的内容，以便可以在此处检索它：

```
 App.Droppable = JQ.Droppable.extend({
      drop: function(event,ui) {
          alert('Dropped! ' + $(ui.draggable).data("myData")); 
```

可拖动的模板如下所示：

```
 {{#view App.Draggable contentBinding="App.anObject"}}Drag me{{/view}} 
```

我想传递那个内容。请看一下fiddle，相关函数定义在javascript的底部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:38:38.300

在这里回答我自己的问题。

我在 didInsertElement 回调中附加了数据，如下所示：

```
App.DraggableDataView = App.Draggable.extend({
    didInsertElement: function() {
        this._super();
        var element = this.get('element');
        $(element).data('myData',this.get('content'));
    },
}); 
```

# vb.net - 在文本框中计算多步数学。- 视觉基础

> ID：12718375
> 
> 赞同：2
> 
> 时间：2012-10-03T23:37:05.640
> 
> 标签：vb.net

我希望我在 Visual Studio 2010 中创建的应用程序能够计算用户在整个文本框中输入的多步数学问题。

*   前任。3 * 55 / 7 ^ 2

用户点击一个按钮，程序就会计算出他们输入的问题的答案。我在想一些事情：

```
Dim sngAnswer As Integer
sngAnswer = Val(Me.txtInput.Text) 
```

但这不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:39:40.743

框架中没有任何内容可以自动执行这种类型的表达式评估。

您可能希望使用表达式解析库来处理数学表达式。 [NCalc](http://ncalc.codeplex.com/)和[FLEE](http://flee.codeplex.com/)都是很好的选择。

# javascript - 什么 javascript 来模拟 jquery.tokeninput 的选项卡、输入或逗号输入？

> ID：12718378
> 
> 赞同：0
> 
> 时间：2012-10-03T23:37:43.760
> 
> 标签：javascript, jquery, jquery-plugins, tokenize

有人知道[jquery.tokeninput](http://loopj.com/jquery-tokeninput/)吗？What combination of (jQuery) events do I use (presumably on the input field) to simulate the effect of entering text and pressing tab, enter or the comma key when the `allowFreeTagging`option is true?

我能够模拟字段输入和单击选择，如下所示：

```
$("#token-input-interests").focus();
$("#token-input-interests").val('#{typed_in_val}');
$("#token-input-interests").keydown();
... 
```

但是在交换关键事件的点击时我没有成功。

谢谢，

里尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T00:10:40.250

一般来说，试图模拟用户操作并不是一件好事。用户操作是......用户的操作，而不是 JS 代码。出于安全原因，我很高兴这很困难或不可能。

但是，如果您阅读文档，该插件似乎提供了一些基本且有用的方法来完成这项工作：

```
 $("YOUR_SELECTOR").tokenInput("add", {id: x, name: y}); 
```

这个允许您模拟一个以 x 作为标识符和 y 作为值的添加。

因此，请尝试使用它来添加预先输入的值。

您还有其他功能，例如：

```
 $("YOUR_SELECTOR").tokenInput("remove", {id: x});
    //to remove an entry by id

    $("YOUR_SELECTOR").tokenInput("remove", {name: y});
    // to remove an entry by value

    $("YOUR_SELECTOR").tokenInput("clear");
    // to clear the list

    $("YOUR_SELECTOR").tokenInput("get");
    // to retrieve an array of selection object like
    // [{id: x, name: y},{id: x, name: y},{id: x, name: y}] 
```

# c++ - 模板函数+函子参数，为什么函子没有内联？

> ID：12718384
> 
> 赞同：1
> 
> 时间：2012-10-03T23:39:01.497
> 
> 标签：c++, templates, inline, compiler-optimization, functor

下面的代码执行速度提高了 4 倍，如果在“REPLACING WITH ..”行附近，仿函数 compare_swaps() 将被替换为直接引用 my_intcmp()。显然，间接使用没有被内联。为什么？

```
inline bool my_intcmp( const int & a, const int & b ) {
        return a < b;
}

template <class T, class compare>
void insertion_sort_3( T* first, T* last, compare compare_swaps ) {
    // Count is 1?
    if( 1 == (last - first) )
        return;

    for( T* it = first + 1; it != last; it ++ ) {
        T val = *it;
        T* jt;

        for( jt = it; jt != first; jt -- ) {
            // REPLACING WITH if( my_intcmp(val, *(jt - 1) ) gives 4x speedup, WHY?
            if( compare_swaps(val, *(jt - 1)) ) {
                *jt = *(jt - 1);
            } else {
                break;
            }
        }

        *jt = val;
    }
}

#define SIZE 100000
#define COUNT 4

int main() {
    int myarr[ SIZE ];

    srand( time(NULL) );

    int n = COUNT;
    while( n-- ) {
        for( int i = 0; i < SIZE; i ++ )
            myarr[ i ] = rand() % 20000;

        insertion_sort_3( myarr, myarr + SIZE, my_intcmp );
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T23:45:24.460

编译器看到一个函数指针，他无法真正确定它没有改变。我以前见过几次。该问题的解决方法是使用一个简单的包装器`struct`：

```
struct my_intcmp_wrapper
{
    bool operator()(int v0, int v1) const {
        return my_intcmp(v0, v1);
    }
}; 
```

特别是对于内置类型，您可能希望通过值而不是通过引用传递对象。对于内联函数，它可能没有太大的区别，但如果函数没有内联，它通常会使情况变得更糟。

# ruby-on-rails-3 - 销毁belongs_to 离开FK

> ID：12718385
> 
> 赞同：1
> 
> 时间：2012-10-03T23:39:06.747
> 
> 标签：ruby-on-rails-3, activerecord

我有一个模型：

```
class Merchant < ActiveRecord::Base
    belongs_to :billing_address, class_name: Address, dependent: :destroy
    belongs_to :other_address1, class_name: Address, dependent: :destroy
    belongs_to :other_address2, class_name: Address, dependent: :destroy
    belongs_to :other_address3, class_name: Address, dependent: :destroy
    belongs_to :other_address4, class_name: Address, dependent: :destroy
    ...
end 
```

`Address`没有关联。

当我这样做时：

```
merchant.billing_address.destroy 
```

在数据库中，地址记录消失了，但`merchants.billing_address_id`保留了一个虚假值。这是mysql，所以没有参照完整性。

我究竟做错了什么？

注意：我意识到这可能更好地建模为`has_one`关联。我可能不得不去那里，但我不想去。

更新：添加了更多代码以显示多个地址关联。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-06T17:31:29.523

如果您希望在销毁帐单地址后，merchant.billing_address 为 null，则需要`:dependent => :nullify`在 Address 模型中使用。

参考[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:06:09.013

事实证明，ActiveRecord 不支持片面的 belongs_to 关联，[这与我使用过的其他 ORM 不同](http://nhforge.org/doc/nh/en/index.html#mapping-declaration-manytoone)。但是您可以像这样自己破解它：

```
before_save :remove_ids_for_nil_associations

def remove_ids_for_nil_associations
  self.billing_address_id = nil if is_getting_destroyed? self.billing_address
  ...
end

def is_getting_destroyed?(ref)
  ref.present? && ref.destroyed?
end 
```

# javascript - 消息窗口隐藏在面板后面

> ID：12718387
> 
> 赞同：1
> 
> 时间：2012-10-03T23:39:10.417
> 
> 标签：javascript, extjs, window, messagebox

单击可编辑单元格上的选项卡时，消息窗口隐藏在面板后面。

例如：双击第一个手机单元格，按TAB键。您可以看到消息框，然后隐藏在网格窗口后面。

```
Ext.create('Ext.data.Store', {
    storeId: 'simpsonsStore',
    fields: ['name', 'email', 'phone'],
    data: {
        'items': [{
            'name': 'Lisa',
            "email": "lisa@simpsons.com",
            "phone": "1224"
        }, {
            'name': 'Bart',
            "email": "bart@simpsons.com",
            "phone": "1234"
        }, {
            'name': 'Homer',
            "email": "home@simpsons.com",
            "phone": "1244"
        }, {
            'name': 'Marge',
            "email": "marge@simpsons.com",
            "phone": "1254"
        }]
    },
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'items'
        }
    }
});

var table = Ext.create('Ext.grid.Panel', {
    title: 'Simpsons',
    store: Ext.data.StoreManager.lookup('simpsonsStore'),
    columns: [{
        text: 'Name',
        dataIndex: 'name',
        editor: {
            xtype: 'textfield'
        }
    }, {
        text: 'Email',
        dataIndex: 'email',
        flex: 1
    }, {
        text: 'Phone',
        dataIndex: 'phone',
        editor: {
            xtype: 'numberfield',
            hideTrigger: true,
            validateOnChange: false
        }
    }],
    height: 200,
    width: 400,
    plugins: [Ext.create('Ext.grid.plugin.CellEditing', {
        clicksToEdit: 2
    })],
    listeners: {
        'validateedit': function () {
            Ext.MessageBox.show({
                icon: Ext.MessageBox.ERROR,
                buttons: Ext.MessageBox.OK,
                title: 'test',
                msg: 'test'
            });
        }
    }
});
tablePanel.add(table);
tablePanel.show();

}); 
```

以前有人遇到过这样的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T00:02:37.337

我从 sencha 网站得到了答案：

我看到它在 4.07 中没有这样做，但在 4.1 中。我将与开发团队交谈。

现在，您可以使用 defer：

```
Code:
listeners:{
    'validateedit':function(){
        Ext.MessageBox.show({
        icon: Ext.MessageBox.ERROR,
        buttons: Ext.MessageBox.OK,
        title: 'test',
        msg: 'test'
      }).defer(100);
    }
} 
```

# ios - MapKit 上的天气雷达叠加

> ID：12718390
> 
> 赞同：5
> 
> 时间：2012-10-03T23:39:27.123
> 
> 标签：ios, mkmapview, mapkit, mkoverlay

我已经搜索过 hi 和 low 并且作为新手开发人员我正在寻找一些帮助。我需要做的是在我正在尝试开发的应用程序的地图上显示天气雷达。我遇到的大部分内容都已过时。我的项目是使用故事板创建的，正在寻找有关此问题的任何帮助。我拥有所有 API 和相关信息。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:44:40.243

创建概览可能是一项相当繁琐的任务。我发现[本](http://www.shawngrimes.me/2010/12/mapkit-overlays-session-1-overlay-map/)教程是一个好的开始。

基本上教程说必须完成这些步骤：

1.  我会推荐一个 600 ppi 的 tiff。我的 tiff 的分辨率约为 4000*2000 像素。
2.  下载并安装gdal：[http](http://www.kyngchaos.com/software/frameworks) ://www.kyngchaos.com/software/frameworks 。gdal的安装并不令人愉快。我无法在这里解释每一步。基本上：首先使用完整的安装程序进行安装。然后安装 numPy。然后用终端在路径中复制gdal。
3.  将 tiff 加载到 Google 地图中以获取 4 个角的坐标。
4.  使用 gdal 创建 vrt 文件。该命令将看起来与此字符串相似：gdal_translate -of vrt -a_srs epsg：4326 -GCP 0 0 7.435822 46.953453 -GCP 2285 0 7.460397 46.953453 -GCP 2285 1479 7.466.46.460397 464.46797464.46797.467974.467974.4667464.4674464.467464.46467464.46467464.46467464.46467464.4667464.460397 MORTR
5.  [使用MapTiler](http://www.maptiler.org)创建图块。Mac 版本对我不起作用，但 Windows 版本完成了这项工作。
6.  您需要将这些图块添加到项目中并为它们创建一个文件夹引用。WWDC 视频 Session 127 的代码展示了它是如何工作的。
7.  重复步骤 3-5，直到覆盖正常。

# javascript - 重载方法的命名 - 单数还是复数？

> ID：12718393
> 
> 赞同：0
> 
> 时间：2012-10-03T23:39:39.807
> 
> 标签：javascript, methods, overloading, naming, plural

*这个问题是关于约定的。*

假设我有一个对象`Basket`，它在某个私有属性 ( `Basket._items`) 中存储各种项目。现在，我想要一些**添加**、**删除**和**获取**项目的方法。

每个方法可以将*单个* **项目**或**项目列表**作为参数，或者不带参数，在删除和获取的情况下，可以删除或返回**所有项目**。

我应该如何命名我的方法？

`addItem`或`addItems`
`removeItem`或`removeItems`
`getItem`或`getItems`

（它们不必*都是*相同的形式；例如，也许只有最后一个应该是复数。）

* * *

**编辑：像****add**和**get**这样的通用名称不会飞，因为在语义上我没有添加或获取篮子；该对象也用于容纳其他东西。我会考虑使用类似的东西`Basket.items.add()`，但这不是最佳选择，因为实际的项目对象也必须被存储`Basket.items._items`或者`Basket.items._contents`看起来很糟糕。我仍然想获得更多关于我原来的问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:02:51.513

第一个准则是使用与您已经为相关项目编写的代码相匹配的约定。

第二个准则是选择对最常见的方法使用最直观的名称。如果默认/常见/无参数使用是检索单个项目，则使用单数名称而不是复数名称。

第三个准则是匹配您已经在第三方库中使用的其他代码约定。例如，如果您知道使用您的库的人正在使用 jQuery，那么他们的约定可能会很好地遵循。

由于 Javascript 是一种动态语言，因此在您的方法签名中通常“懒惰”。所以你可以使用：

```
Basket.addItem(n);      // add a single item
Basket.addItem([n, m]); // add multiple items
Basket.getItem();       // retrieve a single item
Basket.getItem(5);      // retrieve an array of up to 5 items
Basket.removeItem();    // remove a single item
Basket.removeItem(2);   // remove up to two items
Basket.emptyItems();     // remove them all 
```

当然，除非您已经在使用`add()`, `get()`, `remove()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:18:27.187

如果参数是一个列表（数组），那么很明显您正在添加多个元素。如果参数是您要添加的元素的单个实例，则同样的想法也适用。

```
add( Array elements):
    foreach element e
        _items[lastindex] = e

add( Element element):
    _item[lastindex]= e 
```

这是我的看法。作为参考，你有：

[Java List 接口](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html) 和
[Java 编码约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)

不同的语言有不同的约定，但这里概述的约定通常也适用于其他语言（尽管它并不能完全回答您的问题）。

# c++ - CreateFileMapping() 甚至在重启后返回“已经存在”；如何删除旧的命名共享内存？

> ID：12718399
> 
> 赞同：1
> 
> 时间：2012-10-03T23:40:46.187
> 
> 标签：c++, winapi

我有一系列由主 exe 通过使用由 CreateFileMapping() 和 MapViewOfFile() 创建的命名共享内存控制的从属 exe。

我正在通过 Visual Studio 调试 Master，当我得到我需要的东西时，我只是告诉 Visual Studio“停止调试”。错误的举动，因为该命名共享内存处于活动状态，并且在重新启动后仍然存在！

我尝试通过查看错误代码来识别命名共享内存，看到它是 183（已经存在）并要求现有的命名共享内存，但是失败了。

无论哪种方式，我都会很高兴：在发现它已经存在时删除/删除它，或者在发现它已经存在时重用它。目前，我被困住了。我想我可以创建一个不同的名字，但是那个已经存在的该死的名字可能会永远留在那里......

无论如何，这是定义我的命名共享内存控制逻辑的 C++ 类：

```
enum ServerSharedMemReturnCodes {
    Success,                    // everything worked!
    SharedMemAlreadyGrabbed,    // EnableSharedMemoryAccess() error: _mapFile was not NULL!
    OpenFileMappingFailed,      // EnableSharedMemoryAccess() error: OpenFileMapping() filed!
    MapViewOfFileFailed         // EnableSharedMemoryAccess() error: MapViewOfFile() filed!
};

class ServerSharedMem {
public:
    ServerSharedMem() {
        _mapFile         = NULL;
        _serverCommLinks = NULL;
    }
    ~ServerSharedMem() {
        // Deactivate(); called explicitly at shutdown rather than here
    }

    /* our Named Shared Memory needs to be "activated" by the Master (installed to shared virtual memory). This does that. */
    inline int Activate( void ) {
        char *caller = "ServerSharedMem::Activate";

        if (_mapFile != NULL) {
            DebugMessage( caller, "Named Shared Memory already activated!" );
            return false;
        }

        TCHAR smName[]      = TEXT(CEX_SHAREDMEM_NAME);
        int   sharedMemSize = sizeof(ServerCommLink) * CEX_MAX_SERVER_COUNT;

        // debug logic: print out size and name:
        size_t convertedChars = 0;
        char   bsjnk[1024];
        errno_t err = wcstombs_s( &convertedChars, bsjnk, 1024, smName, sizeof(smName));
        if (err != 0) {
            DebugMessage( caller, "wcstombs_s  failed!" );
        } 
        char bsjnk2[1024];
        sprintf_s( bsjnk2, 1024, "sharedMemSize is '%d' bytes and smName is '%s'", sharedMemSize, bsjnk );
        DebugMessage( caller, bsjnk2 ); // size is 16832, name is "Global\CEX_ActiveTasks"

        // let's create a Named Shared Memory block:
        _mapFile = CreateFileMapping( INVALID_HANDLE_VALUE,   // request a paging file
                                      NULL,                   // default security
                                      PAGE_READWRITE | SEC_COMMIT, // read/write access and hold entirely in RAM
                                      0,                      // high-order DWORD of max file size
                                      sharedMemSize,          // low-order DWORD of max file size
                                      smName );               // name of our named shared memory
        if (_mapFile == NULL) {
            DebugMessage( caller, "failed to create Named Shared Memory!" );

            DWORD errCode = GetLastError();
            if (errCode == 183) { // already exists! we did not shutdown cleanly
               DebugMessage( caller, "It appears to already exist! Attempting to grab it!" );
               ServerSharedMemReturnCodes retCode = EnableSharedMemoryAccess();
               if (retCode == Success) {
                  DebugMessage( caller, "Yes! Got it!" );
                  for (int i = 0; i < CEX_MAX_SERVER_COUNT; i++) {
                      _serverCommLinks[i].Init();
                      _serverCommLinks[i].SetServerId( i );
                  }
                  return true;
               }
               static CHAR errBuffer[CEX_CMDBUFFER_SIZE];
                va_list     errArgs[256];
                FormatMessageA(FORMAT_MESSAGE_FROM_SYSTEM,NULL,errCode,0,errBuffer,CEX_CMDBUFFER_SIZE,errArgs);
                DebugMessage( caller, errBuffer );
                sprintf_s( errBuffer, CEX_CMDBUFFER_SIZE, "error code is '%d'", errCode );
                DebugMessage( caller, errBuffer ); // still 183, already exists
            }
            /*
            static CHAR errBuffer[CEX_CMDBUFFER_SIZE];
            va_list     errArgs[256];
            FormatMessageA(FORMAT_MESSAGE_FROM_SYSTEM,NULL,errCode,0,errBuffer,CEX_CMDBUFFER_SIZE,errArgs);
            DebugMessage( caller, errBuffer );
            sprintf_s( errBuffer, CEX_CMDBUFFER_SIZE, "error code is '%d'", errCode );
            DebugMessage( caller, errBuffer ); */
            return false;
        }
        else {
            _serverCommLinks = (ServerCommLink *)MapViewOfFile(_mapFile, FILE_MAP_READ | FILE_MAP_WRITE, 0, 0, 0);
            if (_serverCommLinks == NULL) {
                CloseHandle(_mapFile);
                _mapFile = NULL;
                DebugMessage( caller, "MapViewOfFile() failed!" );
                return false;
            }
            else {
                for (int i = 0; i < CEX_MAX_SERVER_COUNT; i++) {
                    _serverCommLinks[i].Init();
                    _serverCommLinks[i].SetServerId( i );
                }
                return true;
            }
        }
    }

    /* upon program shutdown, Named Shared Memory needs to be removed from Shared Virtual Memory. This does that. */
    inline void Deactivate( void ) {
        char *caller = "ServerSharedMem::Deactivate";
        if (_mapFile) {
            if (_serverCommLinks) {
                UnmapViewOfFile( _serverCommLinks );
                _serverCommLinks = NULL;
                DebugMessage( caller, "Unmapped Named Shared Memory view." );
            }
            CloseHandle(_mapFile);
            _mapFile = NULL;
            DebugMessage( caller, "Closed Named Shared Memory handle." );
        }
    }

    /* Slaves use this to gain access to the Named Shared Memory setup by their Master */
    inline ServerSharedMemReturnCodes EnableSharedMemoryAccess( void ) {
        if (_mapFile != NULL) {
            return SharedMemAlreadyGrabbed;
        }
        TCHAR smName[] = TEXT(CEX_SHAREDMEM_NAME);
        _mapFile = OpenFileMapping( FILE_MAP_READ | FILE_MAP_WRITE, FALSE, smName );
        if (_mapFile == NULL) {
            return OpenFileMappingFailed;
        }
        else {
            _serverCommLinks = (ServerCommLink *)MapViewOfFile( _mapFile, FILE_MAP_READ | FILE_MAP_WRITE, 0, 0, 0 );
            return Success;
        }
    }

    /* Slaves use this to release their hold on their view of the Named Shared Memory */
    inline void ReleaseSharedMemoryAccess( void ) {
        char *caller = "ServerSharedMem::ReleaseSharedMemoryAccess";
        if (_mapFile != NULL) {
            if (_serverCommLinks != NULL) {
                UnmapViewOfFile( _serverCommLinks );
                _serverCommLinks = NULL;
                DebugMessage( caller, "Unmapped Named Shared Memory view." );
            }
            else DebugMessage( caller, "No active Named Shared Memory view!" );
            CloseHandle(_mapFile);
            DebugMessage( caller, "Closed Named Shared Memory handle." );
        }
        else DebugMessage( caller, "No Named Shared Memory!" );
    }

    /* pass in a return code, get back a string describing the code */
    inline char *ReturnCodeInfo( ServerSharedMemReturnCodes code ) {
        switch (code) {
        case Success:                 return "Success.";
        case SharedMemAlreadyGrabbed: return "Shared memory access has already been enabled.";
        case OpenFileMappingFailed:   return "Unable to open Named Shared Memory!";
        case MapViewOfFileFailed:     return "Unable to map view of Named Shared Memory!";
        default:                      return "Unknown return code!!!";
        }
    }

    inline int Active( void ) { return(_serverCommLinks ? true : false); }

    /* returns the requested server;s communication link if Named Shared Memory is activated/enabled */
    inline ServerCommLink *GetServerCommLink( int serverId ) {
        if (!_serverCommLinks)
            return NULL;
        if ((serverId >= 0) && (serverId < CEX_MAX_SERVER_COUNT)) {
            return &_serverCommLinks[serverId];
        }
        return NULL;
    }

private:
    HANDLE         _mapFile;           // our Named Shared Memory handle
    ServerCommLink *_serverCommLinks;  // will point to shared memory, an array of size CEX_MAX_SERVER_COUNT
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-08T02:15:51.580

Visual Studio 需要以管理员身份运行才能启动 IDE，才能拥有创建命名共享对象的正确权限。

# php - 如何禁止这个 search.php 文件插入 MYSQL 条目？

> ID：12718401
> 
> 赞同：-1
> 
> 时间：2012-10-03T23:40:50.997
> 
> 标签：php

我目前正在使用一个脚本，当有人在我的网站上搜索电影时，它会检查 MySQL 数据库以查看电影数据是否存在。

如果是，它会显示搜索结果。如果没有，它会转到 IMDB.com，抓取内容，然后将该数据插入 MySQL 数据库。

有没有人通过快速查看下面的代码知道是否有一种方法可以通过注释掉一行来快速禁止这种情况发生，或者是否需要有人彻底检查它？

如果它在 MySQL DB 中看不到电影数据，我不希望它进入 IMDB。

```
 <?php
function PageMain() {
global $TMPL;
include('./includes/imdb.php');

    $all = 'Sorry, it seems that the movie you where looking for doesn\'t exist or we         don\'t have it in our database...';
$text = $_GET['a'];
$name = htmlspecialchars(urldecode($_GET['q']), ENT_QUOTES);

$per_page = 50;
$page_query = mysql_query("SELECT COUNT(id) from imdb WHERE title LIKE '%%$name%'");
$pages = ceil(mysql_result($page_query, 0) / $per_page);

$page = (isset($_GET['page']) AND (int)$_GET['page'] > 0) ? (int)$_GET['page'] : 1;
$start = ($page - 1) * $per_page;

if(!empty($name)) {
    $queryid = 'SELECT * FROM imdb WHERE title LIKE "%%'.$name.'%"';
    if(mysql_fetch_row(mysql_query($queryid)) >= 1) {
    $query = "SELECT * FROM imdb WHERE title LIKE '%%%s%%' LIMIT %d, %d;";
    $query = sprintf($query, $name, $start, $per_page);
    $result = mysql_query($query);

        $TMPL_old = $TMPL; $TMPL = array();
        $skin = new skin('search/rows'); $all = '';
        while($TMPL = mysql_fetch_assoc($result)) {
            if ($TMPL['votes'] == NULL) {$TMPL['votes'] = '?';}
            if ($TMPL['tagline'] == NULL) {$TMPL['tagline'] = 'None';}
            $TMPL['title_encoded'] = str_replace("+", "-",     urlencode($TMPL['title']));
            $TMPL['genre'] = '';
            foreach(explode(', ', $TMPL['genres']) as $v)
            $TMPL['genre'] .= '<a href="/genre/'.$v.'">'.$v.'</a>, ';
            $TMPL['actor'] = '';
            foreach(explode(', ', $TMPL['actors']) as $v) 
            $TMPL['actor'] .= '<a href="/actor/'.str_replace("+", "-",     urlencode($v)).'">'.$v.'</a>, ';
            $all .= $skin->make();
        }
        //Incepe selectarea actorilor
        $query_actors = "SELECT `actors` FROM `imdb` ORDER BY `id` DESC LIMIT 0,3";
        $actors_result = mysql_query($query_actors);

        $TMPL = array (); $skin = new skin('shared/actors'); $actors = '';
        while ($TMPL = mysql_fetch_assoc($actors_result))
        {
            $TMPL['actor'] = '';
            foreach(explode(', ', $TMPL['actors']) as $v)
            $TMPL['actor'] .= '<a href="/actor/'.str_replace("+", "-", urlencode($v)).'">'.$v.'</a> <br />';        
            $actors .= $skin->make();
        }
        // Incepe paginarea
        $skin = new skin('shared/pagination'); $pagination = '';
        if ($pages >= 1 && $page <= $pages) {
        for ($x=1; $x<=$pages; $x++) {
            $TMPL['pagination'] = ($x == $page) ? '<strong><a href="/index.php?a=search&q='.urlencode($name).'&page='.$x.'">'.$x.'</a></strong> ' : '<a href="/index.php?a=search&q='.urlencode($name).'&page='.$x.'">'.$x.'</a> ';
            $pagination .= $skin->make();
            }
        }
        $TMPL = $TMPL_old; unset($TMPL_old);

        $TMPL['actors'] = $actors;
        $TMPL['rows'] = $all;
        $TMPL['pagination'] = $pagination;

        $text = 'content';
    } else {
    $imdb = new Imdb();
    $movieArray = $imdb->getMovieInfo(htmlEntities($_GET['q']));

    if(!isset($movieArray['title_id'])) { $TMPL['rows'] = $all; } else {

    $title_id = $movieArray['title_id'];
    $poster = $movieArray['poster'];
    $title = $movieArray['title'];
    $tagline = $movieArray['tagline'];
    $year = $movieArray['year'];
    $release = $movieArray['release_date'];
    $votes = $movieArray['rating'];
    $plot = $movieArray['plot'];
    $runtime = $movieArray['runtime'];
    $storyline = $movieArray['storyline'];
    $genres = $movieArray['genres'];
    $stars = $movieArray['stars'];
    $oscars = $movieArray['oscars'];
    $mpaa = $movieArray['mpaa_rating'];
    $country = $movieArray['country'];
    $actori = implode(", ", $stars);
    $genuri = implode(", ", $genres);
    $countries = implode(", ", $country);
    $trivia = $movieArray['trivia'];

    $selectData = "SELECT * FROM `imdb` where `imdbid` = '$title_id'";

    if(strlen($poster) >= 5) {
    if(mysql_fetch_row(mysql_query($selectData)) === false) {
    $insertData = "INSERT INTO `imdb` (`imdbid` ,  `poster` ,  `title` ,  `tagline` ,  `plot` ,  `year` , `release`, `country`, `runtime` ,  `storyline`, `genres`, `actors`, `votes`, `oscars`, `mpaa`, `trivia`) VALUES ('$title_id', 'posters/$title_id.jpg', '$title', '$tagline', '$plot', '$year', '$release', '$countries', '$runtime', '$storyline', '$genuri', '$actori', '$votes', '$oscars', '$mpaa', '$trivia')";
    mysql_query($insertData);

    $ch = curl_init ($poster);
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.2 (KHTML, like Gecko) Chrome/15.0.874.12 Safari/535.2');
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);
    $rawdata=curl_exec ($ch);
    curl_close ($ch);

    $fp = fopen('posters/'.$title_id.'.jpg', 'w');
    fwrite($fp, $rawdata); 
    fclose($fp);
    }
    } else {
    if(mysql_fetch_row(mysql_query($selectData)) === false) {
    $insertData = "INSERT INTO `imdb` (`imdbid` ,  `poster` ,  `title` ,  `tagline` ,  `plot` ,  `year` , `release`, `country`, `runtime` ,  `storyline`, `genres`, `actors`, `votes`, `oscars`, `mpaa`, `trivia`) VALUES ('$title_id', 'posters/noposter.jpg', '$title', '$tagline', '$plot', '$year', '$release', '$countries', '$runtime', '$storyline', '$genuri', '$actori', '$votes', '$oscars', '$mpaa', '$trivia')";
    mysql_query($insertData);
    }
    }

    $query = "SELECT * FROM imdb WHERE title LIKE '%%%s%%' LIMIT %d;";
    $query = sprintf($query, $name, 40);
    $result = mysql_query($query);  

        $TMPL_old = $TMPL; $TMPL = array();
        $skin = new skin('search/rows'); $all = '';
        while($TMPL = mysql_fetch_assoc($result)) {
            if ($TMPL['votes'] == NULL) {$TMPL['votes'] = '?';}
            if ($TMPL['tagline'] == NULL) {$TMPL['tagline'] = 'None';}
            $TMPL['title_encoded'] = str_replace("+", "-", urlencode($TMPL['title']));
            $TMPL['genre'] = '';
            foreach(explode(', ', $TMPL['genres']) as $v)
            $TMPL['genre'] .= '<a href="/genre/'.$v.'">'.$v.'</a>, ';
            $TMPL['actor'] = '';
            foreach(explode(', ', $TMPL['actors']) as $v) 
            $TMPL['actor'] .= '<a href="/actor/'.str_replace("+", "-", urlencode($v)).'">'.$v.'</a>, ';
            $all .= $skin->make();
        }
        //Incepe selectarea actorilor
        $query_actors = "SELECT `actors` FROM `imdb` ORDER BY `id` DESC LIMIT 0,3";
        $actors_result = mysql_query($query_actors);

        $TMPL = array (); $skin = new skin('shared/actors'); $actors = '';
        while ($TMPL = mysql_fetch_assoc($actors_result))
        {
            $TMPL['actor'] = '';
            foreach(explode(', ', $TMPL['actors']) as $v)
            $TMPL['actor'] .= '<a href="/actor/'.str_replace("+", "-", urlencode($v)).'">'.$v.'</a> <br />';        
            $actors .= $skin->make();
        }
        $TMPL = $TMPL_old; unset($TMPL_old);

        $TMPL['actors'] = $actors;
        $TMPL['rows'] = $all;

        $text = 'content';
    }
    }
}
$TMPL['query'] = $name;
$TMPL['title'] = 'yourgamecodes.com/ - Movie - '.$name.'';

$skin = new skin("search/$text");
return $skin->make();
}
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:44:18.743

这：

```
else {
    $imdb = new Imdb();
    $movieArray = $imdb->getMovieInfo(htmlEntities($_GET['q'])); 
```

您可以注释掉整个 else 块，它不会再调用 imdb

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T23:51:14.197

用 INSERT 注释掉查询

```
// $insertData = "INSERT INTO `imdb`  (...)
//    mysql_query($insertData); 
```

# applescript - adobe reader的applescript保存为文本

> ID：12718405
> 
> 赞同：0
> 
> 时间：2012-10-03T23:41:05.173
> 
> 标签：applescript

谁能告诉我为什么会出现此错误：

```
错误“系统事件出现错误：无法获取菜单项 \"Text...\" 的菜单项 \"Save As\" 的菜单 \"File\" 的菜单栏 1 的进程 \"Adobe Reader\"。" 进程“Adobe Reader”的菜单栏1的菜单“文件”的菜单项“另存为”的菜单项“文本...”中的数字-1728

```

对于此代码：

```
tell application "Adobe Reader"
tell application "System Events"
    tell process "Adobe Reader"
        tell menu bar 1
            tell menu "File"
                tell menu item "Save As"
                    click menu item "Text…"
                end tell
            end tell
        end tell
    end tell
end tell
end tell 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:11:57.183

尝试

```
activate application "Adobe Reader"
tell application "System Events"
    tell process "Adobe Reader"
        click menu item "Text..." of menu 1 of menu item "Save As" of menu 1 of menu bar item "File" of menu bar 1
    end tell
end tell 
```

# html - Visual Basic Web 浏览器链接 - 单击时在程序中执行操作

> ID：12718410
> 
> 赞同：0
> 
> 时间：2012-10-03T23:41:28.463
> 
> 标签：html, vba, web

我的程序中有一个 Web 浏览器表单，它显示一个自定义的 html 页面。当我点击链接时，我希望它在程序中做某事（告诉程序做某事，并给它一个变量或 2），而不是转到另一个页面

有什么建议么？我在想可能与javascript相关的东西，但我不太了解vb如何处理这样的事情

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:53:23.300

我认为您尝试做的事情在 vb 中是不可能的。但是为什么你需要一个显示自定义站点的网络浏览器..你可以从这个站点复制信息到你的程序中，然后用你程序中的操作替换链接..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T12:54:32.440

Awesomium 框架将是做到这一点的一种方法。( [http://www.awesomium.com/](http://www.awesomium.com/) ) 它允许您使用 HTML5 和 CSS 在 .NET 和 C++ 中制作 UI

我知道，迟到的答案。

# ios - CGImageSourceCreateImageAtIndex 返回 nil

> ID：12718411
> 
> 赞同：0
> 
> 时间：2012-10-03T23:41:34.843
> 
> 标签：ios, pdf, uiimage, cgimage

我正在尝试使用此解决方案将 pdf 文件转换为图像：

```
CFURLRef urlRef = (CFURLRef)[NSURL fileURLWithPath:@"http://uat.okitoo.fr/document/document/s595_506cb1811852f/o_specimen-page-seule.pdf"];
CGImageSourceRef src = CGImageSourceCreateWithURL(urlRef, NULL);
NSDictionary* options = [NSDictionary dictionaryWithObject:(id)[NSNumber numberWithInt:500] forKey:(id)kCGImageSourceThumbnailMaxPixelSize];
CGImageRef firstPage = CGImageSourceCreateImageAtIndex(src, 0, (CFDictionaryRef)options);
UIImage* imagePDF = [UIImage imageWithCGImage:firstPage];
CGImageRelease(firstPage); 
```

我的 pdf 文件没问题，但是当我尝试此代码时，图像没有出现，并且我收到以下消息：“：ImageIO：CGImageSourceCreateImageAtIndex 图像源参数为零”。看不懂。。

我尝试了其他链接，但我有同样的问题..

有任何想法吗 ？还有其他方法可以将我的 pdf 文件转换为图像吗？

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:12:27.647

您使用不正确的 API 创建 URL，您需要 URLWithString：

```
CFURLRef urlRef = (CFURLRef)[NSURL URLWithString:@"http://uat.okitoo.fr/document/document/s595_506cb1811852f/o_specimen-page-seule.pdf"]; 
```

您当前使用的 API 用于本地文件系统上文件的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T23:46:07.610

正如消息所说，您`urlRef`的可能是`nil`.

可能是因为你没有提到真正的完整路径而只提到了文件名，并且找不到文件。

如果您的 PDF 是应用程序包中的文件，请使用`[[NSBundle mainBundle] pathForResource:@"test" ofType:@"pdf"]`. 如果您在运行时将其下载到沙箱中的某个位置，只需使用下载 PDF 的路径即可。

# c# - 从 IHttpModule 的 OnBeginRequest 方法访问会话变量

> ID：12718413
> 
> 赞同：0
> 
> 时间：2012-10-03T23:42:06.973
> 
> 标签：c#, asp.net, session-variables, ihttpmodule

我有一个网站，为了正常工作，需要在其所有 URL 上附加一个 XML 文件，假设该文件名为`module-1.xml`.

为了保持这些 URls 的干净，我编写了一个 IHttpModule，它使用`HttpContext.Current.RewritePath`来完成事件内部的附加工作`OnBeginRequest`。

IHttpModule 看起来很简单并且可以工作：

```
public void OnBeginRequest(Object s, EventArgs e)
{
   string url = HttpContext.Current.Request.Url.AbsolutePath;
   if (url.EndsWith(".aspx"))
      HttpContext.Current.RewritePath(url + "?module-1.xml");
} 
```

现在，我想使用 session 变量来检测用户何时决定将网站从 切换`model-1.xml`到`model-2.xml`并将我的代码更改如下：

```
public void OnBeginRequest(Object s, EventArgs e)
{
   string url = HttpContext.Current.Request.Url.AbsolutePath;
   if (url.EndsWith(".aspx"))
   {
      if (HttpContext.Current.Session["CurrentMode"] == "1")
         HttpContext.Current.RewritePath(url + "?module-1.xml");
      else if(HttpContext.Current.Session["CurrentMode"] == "2")
         HttpContext.Current.RewritePath(url + "?module-2.xml");
    }
} 
```

[根据我的发现](https://stackoverflow.com/questions/276355/can-i-access-session-state-from-an-httpmodule)，可以在模块内部访问会话，但不能从`OnBeginRequest`事件内部访问，这是唯一`HttpContext.Current.RewritePath`可以使其起作用的事件（至少从我一直在做的所有测试中）。

我的假设正确吗？如果是，我可以使用什么替代方案？创建自定义会话变量？我应该从 txt 文件还是从数据库中读取以了解用户正在查看的模块？我如何从模块内跟踪用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:52:27.103

这取决于您的应用程序所需的安全性。如果您不关心恶意用户能够更改值，只需将模块名称存储在 cookie 中。如果这样做，您可以将安全生成的标识符存储在 cookie 中，并在数据库中查找它以获得您需要使用的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T03:18:22.697

完全摆脱模块。您只是将它附加到 aspx 页面，因此不需要在 URL 中。相反，只需为您的项目页面创建一个基本页面以从以下位置继承：

```
public class Solution.Web.UI.Page : System.Web.UI.Page
{
    public string CurrentMode 
    { 
        get { return String.Compare(Session["CurrentMod"].ToString(), "1") == 0) ? "module-1.xml" : "module-2.xml"; }
    }
} 
```

这样您就可以简单地在您的页面上访问它，而无需该模块的开销或将该信息放入 cookie 的风险。

# r - 如何使用 R lattice xyplot 根据数值阈值对点进行着色

> ID：12718419
> 
> 赞同：4
> 
> 时间：2012-10-03T23:42:32.503
> 
> 标签：r, lattice, scatter-plot

我想根据 z 的值对每个面板中的点进行着色。我目前拥有的代码无法区分每个面板的 z 值。我意识到我需要一个面板功能和 panel.superpose 可能会有所帮助，但我迷路了。

```
x <- c(1:10, 1:10)
y <- c(10:1, 10:1)
z <- c(1:10, seq(1,20, by=2))
a = c(rep("one",10),rep("two",10))

xyplot(y ~ x |a,
   panel=function(x,y, ...) {
     panel.xyplot(x,y, pch=20, cex=0.3, col = ifelse(z < 5, "red", "black"))
   }
   ) 
```

正确的绘图只会在“两个”面板中显示顶部的两个点为红色。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T08:13:29.583

这应该是你想要的：

```
DF <- data.frame(x, y, z, a)

xyplot(y ~ x | a, groups = z < 5, data = DF, col = c("black", "red"),
 pch=20, cex=0.3) 
```

![在此处输入图像描述](../Images/03795b2ddfd91da5fba233047581312a.png)

为了阐明颜色的顺序，`z < 5`创建一个逻辑向量。由于`order(c(TRUE,FALSE))`puts `FALSE`before `TRUE`，这决定了组颜色的顺序。因此，所有值`z<5`采用第二种颜色，所有其他值`z`采用第一种颜色。

# algorithm - 最优选择选举算法

> ID：12718420
> 
> 赞同：4
> 
> 时间：2012-10-03T23:42:36.333
> 
> 标签：algorithm, flow

给定一组人（类似于）：

```
[p1,p2,p3]
[p2,p3]
[p1]
[p1] 
```

从每组中选择 1 个，尽量减少任何一个人被选中的最大次数。

对于上述集合，必须选择给定人员的最大次数为 2。

我正在努力为此找到一个算法。我不认为它可以用贪心算法来完成，更多地沿着动态编程解决方案的思路思考。

关于如何去做的任何提示？或者你们中的任何人都知道任何关于这些东西的好网站，我可以看看吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T00:33:39.843

这既不是动态的，也不是贪婪的。我们先来看一个不同的问题——是否可以通过最多选择每个人一次来完成？

你有 P 个人和 S 套。创建一个带有 S+P 顶点的图，表示集合和人。当 pi 是 si 的一个元素时，person pi 和 set si 之间有一条边。这是一个[二分图](http://en.wikipedia.org/wiki/Bipartite_graph)，然后您的问题的决策版本等效于测试该图中的[最大基数匹配](http://en.wikipedia.org/wiki/Matching_%28graph_theory%29#Maximum_matchings_in_bipartite_graphs)是否具有大小 S。

如该页所述，这个问题可以通过使用[最大流量](http://en.wikipedia.org/wiki/Maximum_flow_problem)算法来解决（注意：如果你不知道我在说什么，那么现在就花点时间阅读它，因为你不会理解其余的否则）：首先创建一个超级源，添加一条连接到所有容量为 1 的人的边（表示每个人只能使用一次），然后创建一个超级接收器并添加连接每个集合到容量为该接收器的边1（表示每组只能使用一次）并在源和接收器之间运行合适的最大流算法。

现在，让我们考虑一个稍微不同的问题：是否可以通过最多选择每个人**k**次来完成？

如果你注意了上一段的注释，你应该知道答案了：只要改变离开超级源的边的容量，以表明在这种情况下每个人都可能被多次使用。

因此，您现在有一个算法来解决最多选择**k**次人的决策问题。不难看出，如果你可以用k来做，那么你也可以用任何大于k的值来做，也就是说，它是一个单调函数。因此，您可以对问题的决策版本运行二进制搜索，寻找仍然有效的最小 k。

注意：您还可以通过顺序测试 k 的每个值来摆脱二分搜索，并增加上次运行中获得的残差网络，而不是从头开始。但是，我决定解释二进制搜索版本，因为它在概念上更简单。

# c++ - C++：可以优化未使用的 lambda 显式捕获吗？

> ID：12718423
> 
> 赞同：28
> 
> 时间：2012-10-03T23:42:41.290
> 
> 标签：c++, lambda, c++11, language-lawyer

我有相当数量的代码依赖于`shared_from_this()`在使用 lambda 表达式作为回调时捕获 a 以确保我的实例保持活动状态：

```
std::shared_ptr<Thing> self = shared_from_this();
auto doSomething = [this, self] ()
{
    // various statements, none of which reference self, but do use this
} 
```

所以问题是：由于我没有`self`在 lambda 主体内部引用，是否允许一致的编译器优化捕获？

* * *

考虑以下程序：

```
#include <functional>
#include <iostream>
#include <memory>

std::function<void ()> gFunc;

struct S : std::enable_shared_from_this<S>
{
    void putGlobal()
    {
        auto self = shared_from_this();
        gFunc = [self] { };
    }
};

int main()
{
    auto x = std::make_shared<S>();
    std::cout << x.use_count() << std::endl;
    x->putGlobal();
    std::cout << x.use_count() << std::endl;
} 
```

输出是：

```
1
2 
```

这表明`g++-4.7.1`没有优化捕获（也没有`clang-3.1`）。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-03T23:42:41.290

该标准保证捕获的值不会被优化掉（根据 §5.1.2/14）：

> **如果实体被**隐式捕获并且捕获默认值为 =，或者如果使用不包含 & 的捕获**显式捕获实体，则通过副本捕获实体。****对于通过副本捕获的每个实体，在闭包类型中声明了一个未命名的非静态数据成员。**这些成员的声明顺序是未指定的。如果实体不是对对象的引用，则此类数据成员的类型是相应捕获实体的类型，否则为引用类型。

因此，`self`被复制到评估闭包中（根据 §5.1.2/21）：

> 当计算 lambda 表达式时，复制捕获的实体用于直接初始化结果闭包对象的每个相应的非静态数据成员。

# php - MySQL 显示最新的而不是需要的

> ID：12718424
> 
> 赞同：0
> 
> 时间：2012-10-03T23:42:41.817
> 
> 标签：php, mysql

所以我有一个 MySQL 数据库，它在 'twit_info' 中包含一个部分 'category' 和 'twit_info' 我有 'cat_id' 而在 'category' 里面我有 'cat_id' 和 'cat_name'

但是由于某种原因，在输出此代码时，它向我显示了最新的“cat_id”的最新“cat_name”

但我希望它显示链接中的“cat_id”中的“cat_name”。我怎样才能让它在这里工作是我输出的代码，它显示了它。

```
<?php if ($row['cat_id'] > 0): ?>
    <div class="meta">
    <small class="float-left gray">
    From Recent Events: <a href="<?=$u?>categories/<?=$row['cat_id']?>/1"><?=stripslashes($cat_record['cat_name'])?></a>
    </small>
    </div>   
<?php endif; ?> 
```

下面是我认为的数据库。

```
 if(isset($_GET['catid']) and $_GET['catid'] !=''){
     $str = "SELECT * FROM twit_info where cat_id = ". $_GET['catid'] ." order by date_submitted desc";
     $str_cat = "SELECT * FROM category where cat_id = ". $_GET['catid'] ;
     }
     else{
     $str = "SELECT * FROM twit_info where cat_id = (select max(cat_id) from twit_info order by date_submitted desc) and cat_id !=0";
      $str_cat = "SELECT * FROM category where cat_id = (select distinct max(cat_id) from twit_info)";
     }
             $twit = dbConnect($str);
            //if(mysql_num_rows($twit)>0){
              $cat_info = dbConnect($str_cat);  
              $cat_record = mysql_fetch_array($cat_info);
              //print_r($cat_record);
            // } 
```

那么我怎样才能让那个php代码在上面显示那个'cat_id'的正确cat_name'

我认为是因为`<?=stripslashes($cat_record['cat_name'])?>`不正确吗？在html中？

基本上问题是`<?=stripslashes($cat_record['cat_name'])?>`不输出与`cat_id`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:56:06.603

根据评论，您的问题可能是您的 php.ini 中的 short_open_tag 未设置为 1 ，因此类似这样的事情`<?=`将无济于事

但是，建议您不要使用简码来回显 php 中的语句。你应该`<?php echo`改用。

这篇文章可能会有所帮助：

[问号等于，不适用于php](https://stackoverflow.com/questions/3277587/question-mark-equals-doesnt-work-on-php)

我有义务就切换到 PDO 和停止使用 mysql_ 函数发表标准演讲。一般来说，这是 php 标准的预期进展，有点像不再使用`<?=`了。

*编辑*

回到最初的假设，您的 URI 处理可能没有将该参数读取为`$_GET['catid']`.

当你发生什么`print_r($_GET)`？

# matlab - 非线性混合效应matlab中的协方差矩阵

> ID：12718426
> 
> 赞同：1
> 
> 时间：2012-10-03T23:42:45.767
> 
> 标签：matlab, effects, covariance, mixed

我想知道是否有人熟悉matlab中的NLMEFITSA算法。该算法为我提供了混合效应模型的固定效应参数 (beta) 以及它们的协方差矩阵 (psi)，但它也在“stats”结构中为我提供了一个我知道的称为“covb”的协方差矩阵这与标准误差有关，它对于计算置信区间很重要，但老实说，我不知道这个“covb”和“psi”协方差矩阵之间到底有什么区别。在模拟新数据时如何使用“covb”？

# python - 匹配 AWK 中多行的正则表达式。＆＆ 操作员？

> ID：12718429
> 
> 赞同：3
> 
> 时间：2012-10-03T23:43:08.153
> 
> 标签：python, regex, parsing, awk

我不确定 && 运算符是否适用于正则表达式。我要做的是匹配一行，使其以数字开头并具有字母“a”并且下一行以数字开头并具有字母“b”和下一行...字母“c” . 此 abc 序列将用作开始读取文件的唯一标识符。

这就是我在 awk 中的目标。

```
/(^[0-9]+ .*a)&&\n(^[0-9]+ .*b)&&\n(^[0-9]+ .*c) {
print $0
} 
```

这些正则表达式中只有一个像 (^[0-9]+ .*a) 一样工作，但我不确定如何将它们串在一起，下一行就是这样。

我的文件会是这样的：

```
JUNK UP HERE NOT STARTING WITH NUMBER
1     a           0.110     0.069          
2     a           0.062     0.088          
3     a           0.062     0.121          
4     b           0.062     0.121          
5     c           0.032     0.100         
6     d           0.032     0.100          
7     e           0.032     0.100 
```

我想要的是：

```
3     a           0.062     0.121          
4     b           0.062     0.121          
5     c           0.032     0.100         
6     d           0.032     0.100          
7     e           0.032     0.100 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:46:57.957

不，它不起作用。你可以尝试这样的事情：

```
/(^[0-9]+.*a[^\n]*)\n([0-9]+.*b[^\n]*)\n([0-9]+.*c[^\n]*)/ 
```

并根据需要对尽可能多的字母重复此操作。

The `[^\n]*` will match as much non-linebreak characters in a row as possible (so up to the linebreak).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T00:44:06.023

[Update based on clarification.]

One high order bit is that Awk is a line-oriented language, so you won't actually be able to do a normal pattern match to span lines. The usual way to do something like this is to match each line separately, and have a later clause / statement figure out if all the right pieces have been matched.

What I'm doing here is looking for an `a` in the second field on one line, a `b` in the second field on another line, and a `c` in the second field on a third line. In the first two cases, I stash away the contents of the line as well as what line number it occurred on. When the third line is matched and we haven't yet found the whole sequence, I go back and check to see if the other two lines are present and with acceptable line numbers. If all's good, I print out the buffered previous lines and set a flag indicating that everything else should print.

Here's the script:

```
$2 == "a" { a = $0; aLine = NR; }
$2 == "b" { b = $0; bLine = NR; }
$2 == "c" && !keepPrinting {
    if ((bLine == (NR - 1)) && (aLine == (NR - 2))) {
        print a;
        print b;
        keepPrinting = 1;
    }
}
keepPrinting { print; } 
```

And here's a file I tested it with:

```
JUNK UP HERE NOT STARTING WITH NUMBER
1     a           0.110     0.069
2     a           0.062     0.088
3     a           0.062     0.121
4     b           0.062     0.121
5     c           0.032     0.100
6     d           0.032     0.100
7     e           0.032     0.100
8     a           0.099     0.121
9     b           0.098     0.121
10    c           0.097     0.100
11    x           0.000     0.200 
```

Here's what I get when I run it:

```
$ awk -f blort.awk blort.txt
3     a           0.062     0.121
4     b           0.062     0.121
5     c           0.032     0.100
6     d           0.032     0.100
7     e           0.032     0.100
8     a           0.099     0.121
9     b           0.098     0.121
10    c           0.097     0.100
11    x           0.000     0.200 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:44:11.733

A friend wrote this awk program for me. It is a state machine. And it works.

```
#!/usr/bin/awk -f

BEGIN {
    # We start out in the "idle" state.
    state = "idle"
}

/^[0-9]+[[:space:]]+q/ {
    # Everytime we encounter a "# q" we either print it or go to the
    # "q_found" state.
    if (state != "printing") {
        state = "q_found"
        line_q = $0
    }
}

/^[0-9]+[[:space:]]+r/ {
    # If we are in the q_found state and "# r" immediate follows,
    # advance to the r_found state.  Else, return to "idle" and 
    # wait for the "# q" to start us off.
    if (state == "q_found") {
        state = "r_found"
        line_r = $0
    } else if (state != "printing") {
        state = "idle"
    }
}

/^[0-9]+[[:space:]]+l/ {
    # If we are in the r_found state and "# l" immediate follows,
    # advance to the l_found state.  Else, return to "idle" and 
    # wait for the "# q" to start us off.
    if (state == "r_found") {
        state = "l_found"
        line_l = $0
    } else if (state != "printing") {
        state = "idle"
    }
}

/^[0-9]+[[:space:]]+i/ {
    # If we are in the l_found state and "# i" immediate follows,
    # we're ready to start printing.  First, display the lines we
    # squirrelled away then move to the "printing" state.  Else,
    # go to "idle" and wait for the "# q" to start us off.
    if (state == "l_found") {
        state = "printing"
        print line_q
        print line_r
        print line_l
        line = 0
    } else if (state != "printing") {
        state = "idle"
    }
}

/^[0-9]+[[:space:]]+/ {
    # If in state "printing", print 50 lines then stop printing
    if (state == "printing") {
        if (++line < 48) print
    }
} 
```

# javascript - 是否存在适用于 JavaScript 的 Xtext 语法？如果没有，可以用它创建吗？

> ID：12718432
> 
> 赞同：1
> 
> 时间：2012-10-03T23:44:01.113
> 
> 标签：javascript, antlr, dsl, xtext

作为一个实验项目，我想尝试在 JavaScript 之上实现一些 DSL。 [Xtext](http://www.eclipse.org/Xtext/)似乎是一个很好的起点，因为它具有很好的开箱即用的 Eclipse 集成。我希望从现有的 Xtext JavaScript 实现开始，但找不到。

似乎其他人也没有运气。[http://www.eclipse.org/forums/index.php/m/756376/](http://www.eclipse.org/forums/index.php/m/756376/)

Xtext 是为此而设计的吗？就我的目的而言，它和 Antlr 之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:06:37.417

这个问题本身有点令人困惑。

**你想用 JS 实现 DSL 吗？**（“JavaScript 之上的 DSL”）在这种情况下，您可以在这里找到一个起点：http: [//www.mailsend-online.com/blog/a-dsl-in-javascript.html](http://www.mailsend-online.com/blog/a-dsl-in-javascript.html)。此外，本文还通过实际编译成 JS 的 CoffeScript 描述了几个用例。

**或者：你想实现一个描述 JS 文件的 DSL 吗？** 为 JavaScript 定义语法将是一项巨大的工作。当然，您可以使用 Xtext 来做到这一点，但它仍然很大。使用 Xtext，您可以使用 EBNF 符号定义语法，然后使用 MWE 工作流程，为基本的文本建模环境生成所有必要的工件：解析器、词法分析器、编译器、元模型工件、编辑器 GUI 等。在后台， Xtext 使用 ANTLR 解析输入文件，例如在 GUI 上编辑的文件。因此，如果您想“重用”现有语法，您应该查看 ANTLR 的语法列表：[http](http://www.antlr.org/grammar/list) ://www.antlr.org/grammar/list 。（ECMAScript 是您可能正在寻找的。）

# regex - 查找目录模式

> ID：12718435
> 
> 赞同：1
> 
> 时间：2012-10-03T23:44:13.270
> 
> 标签：regex, shell

我正在尝试获取名为“target”的目录下存在的所有 zip 文件。我想在给定目录下递归搜索此文件模式 - “ *target/* .zip”

这是我的命令：

```
find . -type f \( -path '*/target/*' -a -name '*.zip' \) 
```

这个给我的答案并不严格符合我的标准。这一个也匹配像“target/foo/bar.zip”这样的文件，我想修剪这些结果，只获取目标目录下直接存在的 zip 文件。有人可以帮我一个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T05:38:55.350

这个怎么样：

```
$ find . -type f ! -path '*/target/*/*.zip' -a -path '*/target/*.zip' 
```

# scala - 如何使用 Scala 反射确定类型别名？

> ID：12718436
> 
> 赞同：2
> 
> 时间：2012-10-03T23:44:15.897
> 
> 标签：scala, scala-2.10

使用 2.10 中的 Scala 反射，如何确定一个类型是否是类型别名？

以下不起作用：

```
scala> import scala.reflect.runtime.universe._
import scala.reflect.runtime.universe._

scala> typeOf[String].typeSymbol.asType.isAliasType
res46: Boolean = false 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T05:48:32.610

这是一个错误：[https](https://issues.scala-lang.org/browse/SI-6474)`Type.typeSymbol` ://issues.scala-lang.org/browse/SI-6474 由自动取消引用别名的事实引起。

```
scala> showRaw(typeOf[String])
res0: String = TypeRef(SingleType(ThisType(scala), scala.Predef), newTypeName("String"), List())

scala> typeOf[String].typeSymbol
res1: reflect.runtime.universe.Symbol = class String

scala> typeOf[String].typeSymbol.asType.isAliasType
res2: Boolean = false

scala> val TypeRef(_, sym, _) = typeOf[String]
sym: reflect.runtime.universe.Symbol = type String

scala> sym.asType.isAliasType
res3: Boolean = true 
```

REPL 打印输出部分提供了一种解决方法，即执行手动模式匹配并提取基础符号。另一种方法是转换为`scala.reflect.internal.Types#Type`并使用`typeSymbolDirect`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-26T22:40:40.490

请注意，除了`scala.reflect.internal.Types#Type`，您还需要避免`getClassByName()`：在[scala-dev 问题 248](https://github.com/scala/scala-dev/issues/248)和[PR 5482](https://github.com/scala/scala/pull/5482)之后，Scala 2.12.1 将确保：

*   [`companionClass`返回一个类，而不是类型别名](https://github.com/scala/scala/commit/bd1858896f6546d778aa93c39b491ed5e2d7e0b3)，
*   [getClassByName 和 friends 中不遵循类型别名](https://github.com/scala/scala/commit/4e3ffd4bf00ab71ef64c31a45d5c3e2838aa78ee)。

> 这使得查询别名时`getClassByName`失败/`getClassIfDefined`返回。`NoSymbol`
> 
> 当前的行为可能会混淆类文件解析器：解析类时，交叉检查会验证`pool.getClassSymbol(nameIdx)` 返回当前正在解析的类的符号。
> 如果存在隐藏链接类的类型别名，则跟随别名将返回一个不相关的类。

# android - facebook android sdk - 无法从 json 响应中解码个人资料图片

> ID：12718439
> 
> 赞同：1
> 
> 时间：2012-10-03T23:44:18.323
> 
> 标签：android, facebook, sdk

我在玩 facebook android sdk。直到昨天，他们的 Hackbook 示例代码还在工作。但是今天它不再起作用了。我查看了 json 响应，似乎 facebook 改变了他们的 json 响应格式。

这是对请求字段的响应`"name, picture"`：

```
{"name":"Mohammad Haque","id":"xxxxxxxx","picture":{"data":
{"url":"http:\/\/profile.ak.fbcdn.net\/hprofile-ak-ash3\/xxxx.jpg","is_silhouette":false}}} 
```

看起来个人资料 url 现在包裹在另一个父项中。有没有人遇到过这个问题？我在 facebook 上找不到任何相关信息。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T08:47:31.167

这是 Facebook 更新[http://developers.facebook.com/roadmap/](http://developers.facebook.com/roadmap/)

根据 Facebook 文档（https://developers.facebook.com/docs/reference/api/user/） - 图片返回字符串；如果您的应用启用了**“October 2012 Breaking Changes”**迁移设置，则此字段将是具有 url 和 is_silhouette 字段的对象；如果用户尚未上传个人资料图片，is_silhouette 为真

我通过这个查询检索到图片网址： [https ://graph.facebook.com/me/picture?type=large](https://graph.facebook.com/me/picture?type=large)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:06:33.717

```
 JSONObject jb=Util.parseJson(query);       
         JSONArray ja=jb.optJSONArray("picture")
         JSONArray v=ja.optJSONArray("data")
         JSONObject j=v.optJSONObject(0);
         j.get("name").toString();
         j.get("url").toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:55:19.757

只需使用更改适当地解析 JSON，它应该可以工作。

# ios - xcode中的预期标识符]

> ID：12718443
> 
> 赞同：-3
> 
> 时间：2012-10-03T23:44:38.450
> 
> 标签：ios, xcode, identifier

我决定编写一个 iphone 应用程序，看看它是多么容易。除了这部分，我已经完成了大部分编码，请帮助：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    //1
    NSString *urlString = @"http://zaphod_beeblebrox.pythonanywhere.com/";
    //2
    NSURL *url = [NSURL URLWithString:urlString];
    //3
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    //4
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    //5
    [NSURLConnection sendAsynchronousRequest:request queue:queue
                           completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
                               if ([data length] > 0 && error == nil) [UIWebView]
                               else if (error != nil) NSLog(@"Error: %@", error);
                           }];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T04:11:33.273

您的错误消息的来源是您当前拥有`[UIWebView]`，这是没有意义的，因为方括号表示您正在调用一个方法，但是您有一个类名，但您没有任何方法名。目前尚不清楚您要做什么。请参阅Objective-C 编程语言的[对象消息](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocObjectsClasses.html#//apple_ref/doc/uid/TP30001163-CH11-SW5)部分，其中讨论了调用对象方法（即向对象发送消息）。

我猜您正在尝试在 ? 中加载 html 页面`UIWebView`？你显然需要一个`IBOutlet`你的`UIWebView`. （如果这没有意义，我建议您从 Apple 的教程[Your First iOS App](http://developer.apple.com/library/ios/referencelibrary/GettingStarted/RoadMapiOS/chapters/RM_YourFirstApp_iOS/Articles/00_Introduction.html)开始。）

在下面的示例中，我将假设您的`IBOutlet`被称为`webview`，因此我可能会建议您摆脱`NSOperationQueue`and`NSUrlConnection`并`UIWebView`为您加载 html：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *urlString = @"http://zaphod_beeblebrox.pythonanywhere.com/";
    NSURL *url = [NSURL URLWithString:urlString];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [self.webview loadRequest:request];
} 
```

阅读一些 iPhone 编程教程可能也值得一读（只需 google 一下，您就会获得大量点击），或者查看 Apple [App Programming Guide](http://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/chapters/Introduction.html)或查看[http://developer.apple.com](http://developer.apple.com)上的精彩资源.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T23:49:05.457

该`[UIWebView]`语句是无意义的/毫无意义的，并且不是有效的 Objective-C 语法。

*（我什至不明白你试图用这个声明做什么......）*

# api - 流式传输 GMail API 的最佳方式

> ID：12718445
> 
> 赞同：0
> 
> 时间：2012-10-03T23:44:50.220
> 
> 标签：api, gmail, websocket, sinatra, real-time

我正在使用 GMails IMAP API 构建一个 Web 应用程序。对我来说，“实时”更新的最佳方式是什么？

截至目前，我在前端使用 Ruby Sinatra 后端和主干.js。我正在寻找一种方法来使我的前端、我的服务器和 gmail api 之间的通信尽可能快速和无缝。

谢谢您的帮助

编辑：我的意思是让它看起来是实时的最好方法。我意识到 gmail 不支持网络套接字。但是，什么是设置我的服务器和前端以使数据交易尽可能顺畅的好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T23:50:27.687

我不认为这是可能的。HTTP 不能以这种方式工作。为此，您需要[WebSocket](http://en.wikipedia.org/wiki/WebSocket)，但 Gmail API 不支持 WebSocket。

您可以经常更新信息（但您会遇到 google api 请求数量限制）。或在用户需要时更新信息（需要仔细规划）。

# php - 如何使用 PHP 将日期组合到 URL 中

> ID：12718448
> 
> 赞同：0
> 
> 时间：2012-10-03T23:45:20.170
> 
> 标签：php, date, substr

这是我到目前为止的代码：

```
$url = substr($url,0,10); 
```

这会产生一个这样的 URL：

domain.com/my-web-pag.php

我想做的是如何找出将日期添加到 URL 中的方法

```
date('m-d-y'); 
```

这样最终的 url 看起来像这样：

domain.com/10-03-12-my-web-pag.php

有人介意帮我把代码拼凑起来吗？我非常感谢任何愿意提供帮助的人。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:49:33.637

```
$url = date('m-d-y-').substr($url,0,10); 
```

这将显示类似 site.com/10-29-12-my-web-pag.php

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T23:50:01.650

你可以这样做：

```
$str = 'domain.com/my-web-pag.php';
$arr = explode('/',$str);
$url = $arr[0] . '/' . date('m-d-y') . '-' . $arr[1];
echo $url; // outputs domain.com/10-03-12-my-web-pag.php 
```

# linux - 使用 grep 匹配确切的单词

> ID：12718457
> 
> 赞同：1
> 
> 时间：2012-10-03T23:46:11.507
> 
> 标签：linux, shell

我需要搜索一个确切的单词并打印一行。如果我没有任何`.`（点）在行，它正在工作。

```
$cat file
test1 ALL=ALL
w.test1 ALL=ALL

$grep -w test1 file
test1 ALL=ALL
w.test1 ALL=ALL 
```

它也给出了第二行，我只想要带有确切单词的行`test1`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T23:57:43.967

试试这个：

```
grep -E "^test1" file 
```

这表明以单词 test1 开头的任何内容作为第一行。现在，如果您需要在中间完成此操作，则此方法不起作用，但您对此并不十分具体。至少在给出的示例中 ^ 会起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T23:58:23.117

对于您的示例，您可以在正则表达式中用 a`^`和空格指定行的开头`\s`

```
grep "^test1\s" file 
```

这取决于您可能还需要匹配哪些其他分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-09T18:03:27.377

我知道我来**晚**了，但我发现了这个问题并想回答。一个*词*被定义为一个字符序列并由空格分隔。所以我认为这会起作用 grep -E ' +test1|^test1' file

* * *

这将搜索以 test1 开头的行或 test 前面至少有一个空格的行。抱歉，如果有人可以纠正我，我可以找到更好的方法:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-23T12:32:50.970

您可以将以下作为示例测试文件。

```
$cat /tmp/file
test1 ALL=ALL    
abc test1 ALL=ALL    
  test1 ALL=ALL    
w.test1 ALL=ALL    
testing w.test1 ALL=ALL 
```

在正则表达式下方运行以搜索以 test1 开头的单词以及在行之间也包含单词 test1 的行。

```
$ grep -E '(^|\s+)test1\b' /tmp/file   
test1 ALL=ALL    
abc test1 ALL=ALL   
  test1 ALL=ALL 
```

# ios - GLSL：是否可以创建包含中心像素的单色区域的蒙版？

> ID：12718461
> 
> 赞同：4
> 
> 时间：2012-10-03T23:47:02.033
> 
> 标签：ios, opengl-es, opengl-es-2.0, glsl, flood-fill

我想在我的 iPhone 应用程序中使用 GLSL 着色器在 Photoshop 中为屏幕的中心像素创建类似“魔杖”的效果（从相机捕获图像）。现在我通过获取像素数组并为中心像素应用某种洪水填充算法（全部使用 Objective-C 代码）来实现这一点。这是在 CPU 上执行的，这对我来说有点太慢了，所以我想尝试使用 GLSL 着色器来实现。

实际上，我只需要在片段着色器中重写洪水填充，更准确地说，要知道当前片段的颜色是否接近阈值颜色，以及当前片段是否是先前检测到的区域内片段的邻居。这对我来说听起来太混乱了，我不明白这是否可能。

洪水填充的算法是（伪代码）：

```
Flood-fill (node, target-color, replacement-color):
 1\. Set Q to the empty queue.
 2\. If the color of node is not equal to target-color, return.
 3\. Add node to Q.
 4\. For each element n of Q:
 5\.     If the color of n is equal to target-color:
 6\.         Set w and e equal to n.
 7\.         Move w to the west until the color of the node to the west of w no longer matches target-color.
 8\.         Move e to the east until the color of the node to the east of e no longer matches target-color.
 9\.         Set the color of nodes between w and e to replacement-color.
10\.         For each node n between w and e:
11\.             If the color of the node to the north of n is target-color, add that node to Q.
12\.             If the color of the node to the south of n is target-color, add that node to Q.
13\. Continue looping until Q is exhausted.
14\. Return. 
```

问题：是否可以在着色器中做到这一点，如果可以，我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T05:03:31.470

不，着色器不是这样工作的。在着色器中，您始终只能读取或写入，不能同时进行。如果你回顾你的算法，它确实会读取和写入相同的数据。

你可以尝试一个乒乓球方案，但我怀疑它会很快：

```
for ( sometime )
  for (every pixel in dest) 
    if source has filled neighbours (up,left,top,bottom) and is above threshold, then write fill
    else write source
  flip source and dest 
```

这将在每次迭代中增加一个像素 - 但您在完成时只有一个上限（图像大小）。

您可以更聪明地尝试做一些金字塔计划：首先以 2 倍较低的分辨率运行，然后使用它来确定填充区域。但它实际上并不是一个在 GPU 上运行良好的算法。我建议改为使用手动优化的汇编 CPU 版本。

# php - 我需要使用母版页在我的 asp.net 应用程序中包含一个 php 页面，这可能吗？

> ID：12718466
> 
> 赞同：0
> 
> 时间：2012-10-03T23:47:46.247
> 
> 标签：php, asp.net, iframe, master-pages

我想为这个特定的 php 页面使用母版页 - 例如，我可以有一个使用所述母版页的 aspx 页面并在该页面中使用引用 php 页面的 iframe 吗？那行得通吗？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:49:44.843

我同意贾斯汀的观点，选择一种语言并坚持下去可能会容易得多。IFrame 可能会导致问题。但简短的回答 - 是的，您可以在母版页中有一个指向 PHP 页面的 iframe。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T23:51:43.233

是的，您可以使用`iframe`：

`<iframe src="path/to/my/file.php"></iframe>`

您还必须确保已安装 php 并使用 IIS。

# java - 如何在 Java 中检查 2 个句子之间新插入的单词

> ID：12718468
> 
> 赞同：0
> 
> 时间：2012-10-03T23:47:52.190
> 
> 标签：java, compare

有人知道如何在 Java 中实现这个场景吗？

> **句子 A** - 这是一个非常简单的句子。
> 
> **句子 B** - 这实际上是我刚刚写的一个简单的句子。
> 
> **输出**- 这[实际上]是一个简单的句子[我刚刚写的]。

其中括号内的是新添加的单词。

注意：我对此有点陌生，所以我真的不知道从哪里开始:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:52:22.817

这可能是一个很好的问题。您本质上是在寻找字符串差异 [如何在 Java 中执行字符串差异？](https://stackoverflow.com/questions/132478/how-to-perform-string-diffs-in-java)

# r - 如何将列表输出到R中的文件

> ID：12718472
> 
> 赞同：11
> 
> 时间：2012-10-03T23:49:00.483
> 
> 标签：r, list

假设有一个作者的书籍列表，在将数据读入列表“LS”后，我尝试将其输入到文件中，输出为

```
> write.table(LS, "output.txt")
Error in data.frame(..., title = NULL,  : 
  arguments imply differing number of rows: 1, 0

> write(LS, "output.txt")
Error in cat(list(...), file, sep, fill, labels, append) : 
  argument 1 (type 'list') cannot be handled by 'cat' 
```

我能够使用 dput 但我希望数据的格式正确（文件中没有重复关键字的冗余）。有什么建议么？谢谢

**更新** 输入（头（LS，2））

```
list(structure(list( title = "Book 1", 
authors = list(structure(c("Pooja", "Garg"),
 .Names = c("forename","surname")), 
structure(c("Renu", "Rastogi"), 
.Names = c("forename","surname")))),
 .Names = c("title", "authors")), 

structure(list( title = "Book 2", 
 authors = list(structure(c("Barry", "Smit"), .Names = c("forename", 
    "surname")), structure(c("Tom", "Johnston"), .Names = c("forename", 
    "surname")))), .Names = c("title", "authors"))) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T00:27:12.103

您可以先将列表转换为数据框：

```
LS.df = as.data.frame(do.call(rbind, LS)) 
```

或者

```
LS.df = as.data.frame(do.call(cbind, LS)) 
```

然后你可以简单地用 write.csv 或 write.table 保存 LS.df

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-04T00:29:45.277

使用您提供的数据和`rjson`

```
library(rjson)

# write them to a file
cat(toJSON(LS), file = 'LS.json')

LS2 <- fromJSON('LS.json')

# some rearranging to get authors back to being a data.frame

LS3 <- lapply(LS2, function(x) { x[['authors']] <-  lapply(x[['authors']], unlist); x})

identical(LS, LS3)

## TRUE 
```

该文件看起来像

```
[{"title":"Book 1","authors":[{"forename":"Pooja","surname":"Garg"},{"forename":"Renu","surname":"Rastogi"}]},{"title":"Book 2","authors":[{"forename":"Barry","surname":"Smit"},{"forename":"Tom","surname":"Johnston"}]}] 
```

# 如果您希望每本书在单独的行上，那么您可以使用

```
.json <-  lapply(LS, toJSON)
# add new lines and braces

.json2 <- paste0('[\n', paste0(.json, collapse = ', \n'), '\n]')
 cat(.json)
[
{"title":"Book 1","authors":[{"forename":"Pooja","surname":"Garg"},{"forename":"Renu","surname":"Rastogi"}]}, 
{"title":"Book 2","authors":[{"forename":"Barry","surname":"Smit"},{"forename":"Tom","surname":"Johnston"}]}
] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-16T04:07:31.747

我使用 RJSONIO 包。

```
library(RJSONIO)

exportJSON <- toJSON(LS)
write(exportJSON,"LS.json") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-18T23:20:03.003

最好使用 format()

`LS.str <- format(LS)`

# php - 如何使用 BCRYPT 通过 PHP/MySQL 验证密码

> ID：12718476
> 
> 赞同：1
> 
> 时间：2012-10-03T23:49:34.717
> 
> 标签：php, bcrypt

我不明白这是如何工作的

```
$hash = $bcrypt->hash($_POST['password']); //this string is stored in mysql 
```

然后当用户登录时，

```
//get hash string from above from mysql, then

if ($bcrypt->verify($_POST['password'], $row['password'])) {
   echo "Logged in.";
} 
```

A.) 我这样做正确吗？

B.）如果是这样，如果盐没有存储在数据库中，bcrypt 如何记住盐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:28:53.357

盐被预先添加到散列中，因此该函数将盐从数据库中的散列中提取出来。这就是为什么您必须将哈希值从数据库传递给验证函数，而不是仅仅重新散列密码并比较它们。

是的，看起来你做得对。

# c - GLib 哈希表 - 无法查找键/值

> ID：12718479
> 
> 赞同：0
> 
> 时间：2012-10-03T23:49:54.187
> 
> 标签：c, hashtable, glib

我正在尝试将 malloc 的字符串添加为键，并将结构添加为值。每次都是一个新字符串，但有时文本是相同的，因此应将它们视为相同的键。添加结构后，我尝试检索它，但它不成功（下面的“添加失败”）。此外，我的总计数没有更新，当销毁调用免费时，我出现了故障。我现在已经评论了免费。

```
GHashTable *heavyhitter= g_hash_table_new_full(NULL, g_str_equal, (GDestroyNotify) free_hh_key,(GDestroyNotify) free_hh_metadatarecords);
...
//Called multiple times:
void add_to_heavyhitter_hashtable(struct memory *mem, const char *file,int line, size_t sz) {   
struct hh_metadata_record *hh_metadata_record_toadd;

char *orig_key;
asprintf(&orig_key, "%s:%d", file, line);
char *effective_key = orig_key;

gpointer e_key_ptr = &effective_key;
gpointer hh_meta_ptr = &hh_metadata_record_toadd;

if (g_hash_table_lookup_extended(mem->heavyhitter_hashtable, &orig_key,
        &e_key_ptr, &hh_meta_ptr)) {
    printf("found\n");
    hh_metadata_record_toadd = hh_meta_ptr;
    printf("hh_metadata_record_toadd sz: %Zu\n", hh_metadata_record_toadd->sz);
} else {
    printf("not found\n");
    hh_metadata_record_toadd = hh_get_metadata_record_new(sz);

}

printf("Effective Key: %s\n", effective_key);

hh_metadata_record_toadd->count += 1;
hh_metadata_record_toadd->sz += sz;
mem->hh_total_count += 1;
mem->hh_total_size += sz;

g_hash_table_insert(mem->heavyhitter_hashtable, e_key_ptr,
        hh_metadata_record_toadd);
if(g_hash_table_lookup_extended(mem->heavyhitter_hashtable, effective_key, NULL, NULL ))
    printf("Succesfully added.\n");
else
    printf("Failed add\n");
printf("hash Table size: %Zu\n",g_hash_table_size(mem->heavyhitter_hashtable)); 
```

free 功能暂时被注释掉：

```
void free_hh_key(gpointer a) {
    (void) a;
    printf("Freeing: %s\n", (char*) a);
    //free(a);
} 
```

结果：

```
not found
Effective Key: hhtest.c:49
Failed add
hash Table size: 1
not found
Effective Key: hhtest.c:49
Freeing: �' �'  �'  �/Y�
Failed add
hash Table size: 1
not found
Effective Key: hhtest.c:10
Freeing: �' �'  �'  �/Y�
Failed add
hash Table size: 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:18:07.800

我将函数类型更改为：g_str_hash

# bash - 查找所有需要更新的文件

> ID：12718480
> 
> 赞同：0
> 
> 时间：2012-10-03T23:49:58.867
> 
> 标签：bash, for-loop

我使用下面的脚本将目录中的所有 pdf 文件转换为 png 文件，并且我只想在尚未转换的文件上运行它。

```
#!/bin/bash
# Convert pdf to png
for f in *.pdf
do
    echo "Converting $f"
    gs -dNOPAUSE -dBATCH -sDEVICE=png256 -r480 -q -sOutputFile="png/$f.png" "$f"
done
rename -f 's/\.pdf\.png/\.png/' png/*.pdf.png 
```

如何修改循环，使其仅限于相应 png 文件不存在或比 pdf 文件旧的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T23:58:11.007

对脚本的简单修改：

```
#!/bin/bash
# Convert pdf to png
for f in *.pdf
do
    png="png/${f%pdf}png"
    if [ -e "$png" -a "$f" -nt "$png" ]; then
        continue
    fi

    echo "Converting $f"
    gs -dNOPAUSE -dBATCH -sDEVICE=png256 -r480 -q -sOutputFile="$png" "$f"
done 
```

首先，我们`$png`使用就地编辑创建一个变量。基本上，`%pdf`bash 告诉 bash 删除最后一次出现的`pdf`，即扩展名。然后我们可以将它放入一个字符串中，为其添加前缀`png/`并添加 png 扩展名。这为您节省了最后一个重命名命令。

现在我们有一个`if`语句，`continue`如果满足某个条件则循环。继续意味着转到循环的下一个迭代，而不为该迭代执行任何其他操作。条件是 "$png" 存在 ( `-e "$png"`) 并且 ( `-a`) "$f" 比 "$png" ( `"$f" -nt "$png"`) 更新。

但我建议编写一个 Makefile：

```
PDFS := $(wildcard *.pdf)
PNGS := $(addprefix png/,$(PDFS:.pdf=.png))
all: $(PNGS)
png/%.png: %.pdf
    gs -dNOPAUSE -dBATCH -sDEVICE=png256 -r480 -q -sOutputFile="$@" "$<" 
```

`make`并在您想要生成更新的 PNG的任何时候运行它。

# css - CSS3 - 图像角落隐藏在边框半径后面

> ID：12718482
> 
> 赞同：0
> 
> 时间：2012-10-03T23:50:02.113
> 
> 标签：css, css-transitions

如何将方形图像（90 度角）隐藏在具有边框半径的内容 cox 后面。

这适用于 iPhone 移动应用程序。

[对齐顶部 http://www.kerrydeaf.com/corner.png](http://www.kerrydeaf.com/corner.png "工具提示")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T00:45:57.160

`border-radius`当W3C 首次宣布该物业时，我遇到了这个问题。您必须找到解决方案：首先，使用`background-image`将图像设置为您`div`的背景。其次，将使用`<img class="my-class-rounded-corners" src="myimage">`，将类附加到`<img>`标签而不是 a `div`，然后将圆角设置为该类的属性。

# java - 将 null 作为参数传递给函数时的运行时异常

> ID：12718483
> 
> 赞同：0
> 
> 时间：2012-10-03T23:50:12.127
> 
> 标签：java, runtime-error

如果“messageString”不为空，我将调用异常，将“messageString”作为参数传递，如下所示

```
if (messageString !=null) {
  throw new org.jaffa.exceptions.ApplicationExceptions(
    new com.mirotechnologies.task.core.domain.exceptions.TaskException(
        com.mirotechnologies.task.core.domain.exceptions.TaskException.MANDATORY_FIELD, 
        messageString
    )
  );     
} 
```

（我必须编写类的完整路径，因为它在 AOP 片段中）

如果`messageString`不是，它可以正常工作`null`并适当地显示消息。

但是当它是时`null`，它实际上是在异常中抛出一个运行时错误，说

```
undefined argument 'messageString' at : throw new org.jaffa.exceptions.ApplicationExceptions(new com.mirotechnologies.task.core.domain.exceptions.TaskException(com.mirotechnologies.task.core.domain.exceptions.TaskException.MANDATORY_FIELD, messageString)); 
```

无法调试它，因为它在 AOP 内部，也不确定为什么它会进入循环，如果它为 null - 可能是它的编译器问题，即 TaskException 构造函数的模糊 null 参数？

这是TaskException中的构造函数声明

```
public TaskException(String propertyName, Object parameter0) {
        this(propertyName, new Object[] {parameter0});
}

public TaskException(String propertyName, Object[] parameters) {
        super(propertyName, parameters);
} 
```

`messageString`传递java 代码片段时是否需要添加演员表

**更新**：我在抛出异常时添加了一个强制转换（对象）messageString，现在它抛出了**无法将“void”值转换为 java.lang.Object**的错误- 再次为什么它是“void”，它不应该没有进入循环，因为messageString 为空？

最初第一行被声明为 java.lang.String messageString = null;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:15:54.737

您猜对了，这是构造函数`null`上下文中的歧义。`TaskException's`

您可能想尝试调用：

```
new TaskException(TaskException.MANDATORY_FIELD, new Object[] {messageString}) 
```

# php - $_SESSION['id'] 似乎不起作用

> ID：12718485
> 
> 赞同：0
> 
> 时间：2012-10-03T23:50:32.340
> 
> 标签：php, javascript, jquery, ajax, session

我有带有 jquery ajax 调用的 php 页面。这个页面的请求肯定会正确设置 $_SESSION['id'] ，这里是代码：

```
<?php
    session_start();
    if(!isset($_SESSION['id'])){
            header('Location: ../index.php');
    }
    else{
            $id = $_SESSION['id'];
    }
...?> 
```

ajax调用代码：

```
 $.ajax({
         url: '../php/functions/user_unused_area_list.php',
         dataType: 'json'        
    }).always(userUnusedAreaList);

  function userUnusedAreaList(list, textStatus, error){
    if(textStatus === 'success'){
        alert(list);
    }
    else {
       alert('Failed: ' + error);
    }
} 
```

这是 ajax 请求调用的 pho 页面：

```
if(isset($_SESSION['id'])){
    $id = $_SESSION['id'];
    echo 'good';
}
else{
    echo 'not good';
} 
```

我收到 Feiled 的警报：SyntaxError: UnexpectedToken n。（我认为它来自“不好”） **注意：**还有其他 ajax 调用，它们看起来相同并且工作正常，这浪费了我生命中的许多小时。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T23:51:27.667

放在`session_start();`最后一个代码片段的顶部。

# python - python正则表达式模式提取两个字符之间的值

> ID：12718486
> 
> 赞同：1
> 
> 时间：2012-10-03T23:50:32.767
> 
> 标签：python, regex, url

我正在尝试以以下形式从网址中提取一个 ID 号

```
http://www.domain.com/some-slug-here/person/237570
http://www.domain.com/person/237570 
```

这些网址中的任何一个也可以有参数

```
http://www.domain.com/some-slug-here/person/237570?q=some+search+string
http://www.domain.com/person/237570?q=some+search+string 
```

我尝试使用以下表达式从上述 url 中捕获 '237570' 的 id 值，但每一种都可以，但在所有四种 url 场景中都有效。

```
(?<=person\/)(.*)(?=\?)
(?<=person\/)(.*)(?=\?|\z)
(?<=person\/)(.*)(?=\??*) 
```

我所看到的是它正在获取 237570 但包括 ? 以及 url 中紧随其后的字符。当您点击？、/ 或字符串末尾时，我怎么能说停止捕获？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T00:32:48.830

细绳：

```
http://www.domain.com/some-slug-here/person/1234?q=some+search+string
http://www.domain.com/person/3456?q=some+search+string
http://www.domain.com/some-slug-here/person/5678
http://www.domain.com/person/7890 
```

正则表达式：

```
person\/(\d{1,}) 
```

输出：

```
>>> regex.findall(string)
[u'1234', u'3456', u'5678', u'7890'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T23:54:18.243

不要`.*`用来匹配ID。`.`将匹配任何字符（换行符除外，除非您使用 DOTALL 选项）。只需匹配一堆数字：`(.*)`-->`(\d+)`

# html - 放置宽度超载的 div

> ID：12718487
> 
> 赞同：0
> 
> 时间：2012-10-03T23:50:39.460
> 
> 标签：html, css

我命名了 Div `Container`，其宽度为 100%；因此它的实际像素宽度可以从一个用户更改为另一个用户。在里面`Container`，我有 10 个盒子，每个盒子都有以下值：

```
width:8%;
margin-left:1%;
margin-right:1%;
border:1px solid #000000;
float:left; 
```

有了这些值，它应该像这样呈现，对吧？

![它应该是什么样子](../Images/98da0c1251d3dc47a65f7bdcdc3a3467.png)

其实不是。盒子有 8%**的**空间宽度和 2% 的空间宽度（边距），并且由于边框线（1px），**每个盒子都有 10% 宽度 + 2px**

当您使用分辨率时，您会看到框不时延伸第二行，并且看起来像这样：![在此处输入图像描述](../Images/4e8a71c5ce5846b37cf32e036b0e6147.png)

我该如何解决这个布局？

我想过在那些盒子里放另一个盒子来设置外盒子的边框，但这对我来说不太适用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:22:30.673

我为此创建了一个[jsfiddle](http://jsfiddle.net/h2x8F/)。为每个内盒添加一个新的 div 并设置以下属性将解决问题。（关键是将边框从外框移到内框。）

```
width: 100%;
height:100%;
border: 1px solid #000000; 
```

# node.js - 错误：EPERM，Node.js 和 Etherpad Lite 不允许操作

> ID：12718488
> 
> 赞同：10
> 
> 时间：2012-10-03T23:50:40.900
> 
> 标签：node.js, azure, etherpad, iisnode

在将[Etherpad Lite](https://github.com/Pita/etherpad-lite)站点上传到 Azure for Web 站点之前，我试图在我的计算机上启动并运行 IIS，但是当我尝试 ( [http://pastebin.com/4rZWbqix](http://pastebin.com/4rZWbqix) ) 时出现此错误：

> iisnode 在处理请求时遇到错误。HRESULT：0x2 HTTP 状态：500 HTTP 原因：内部服务器错误
> 
> 您收到此 HTTP 200 响应是因为 system.webServer/iisnode/@devErrorsEnabled 配置设置为“true”。
> 
> 除了node.exe进程的stdout和stderr的日志，考虑使用debugging和ETW traces来进一步诊断问题。
> 
> node.exe进程生成到stdout和stderr的最后64k输出如下图：fs.js:520 return
> 
> ```
>  binding.lstat(pathModule._makeLong(path));
>               ^ Error: EPERM, operation not permitted 'C:\Users\Matthew'
> at Object.fs.lstatSync (fs.js:520:18)
> at Object.realpathSync (fs.js:1047:21)
> at tryFile (module.js:142:15)
> at Function.Module._findPath (module.js:181:18)
> at Function.Module._resolveFilename (module.js:336:25)
> at Function.Module._load (module.js:280:25)
> at Module.runMain (module.js:492:10)
> at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
> ```

Etherpad 的目录中没有 fs.js 文件，所以我认为它是 Node.js 的某个部分有问题。我是 Node.js 的新手，因此我们将不胜感激。

编辑 1：我目前正在研究 Azure 的替代方案，并授予 C:\Users\Matthew 权限。但是有可能以某种方式修改 fs.js 以在 binding.lstat 周围放置一个 try/catch 吗？

编辑2：在玩了一点之后（添加权限有效！），我已经让它工作了。但现在加载 127.0.0.1:81 返回：

> iisnode 在处理请求时遇到错误。HRESULT：0x2 HTTP 状态：500 HTTP 原因：内部服务器错误
> 
> 您收到此 HTTP 200 响应是因为 system.webServer/iisnode/@devErrorsEnabled 配置设置为“true”。
> 
> 除了node.exe进程的stdout和stderr的日志，考虑使用debugging和ETW traces来进一步诊断问题。
> 
> node.exe进程生成到stdout和stderr的最后64k输出如下图所示：
> 
> [x1B][33m[2012-10-03 20:28:13.587] [WARN] 控制台 - [x1B][39m未找到设置文件。继续使用默认值！
> 
> [x1B][32m[2012-10-03 20:28:14.338] [INFO] 控制台 - [x1B][39mInstalled 插件：

看起来这不是错误，因为输出的是预期的，但它似乎停止在 plugins.formatPlugins() 处。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T02:36:07.100

确保与运行您的 node.js 应用程序的 IIS 应用程序池关联的用户身份对您部署应用程序的位置具有适当的文件系统权限（在本例中看起来`c:\users\matthew`如此）。

如果您在默认应用程序池中运行您的应用程序并使用默认 IIS 用户，您应该能够授予必要的权限：

%systemdrive%\windows\system32\icacls.exe c:\users\matthew /grant IIS_IUSRS:(OI)(CI)F

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T12:42:06.260

这是关于文件夹“C:\Users\Matthew”的权限。取得所有权并授予修改权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-03T19:58:20.710

我遇到了同样的问题，当我尝试通过 `nvm use [some node version 10.12.0 in my case]`它输出使用最新的节点版本时它成功但是当我运行`node -v`它时向我显示实际上我在一个 8 节点上。

我通过以第二个 Windows 用户身份登录解决了这个问题（尽管他们都是管理员和节点都安装在 C:/ 上），然后我使用`nvm use 10.12.0`替换节点版本，当我用当前用户重新登录时它工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-26T11:24:26.923

**案子**

> ***错误：EPERM，不允许操作 'C:\Users\Matthew'***

发生此错误是因为用户**IIS_IUSRS**无权访问此文件夹**C:\Users\Matthew**

**解析度**

您可以将您的应用程序放在“**公共文件夹**”中，例如：“ **C:\Test\[yourapplication]** ”，并仅授予用户**IIS_IUSRS**对该文件夹的访问权限。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-10-04T02:18:37.180

我不推荐使用 Azure 来托管 Etherpad Lite，我们不会针对 Microsoft 的服务进行优化，这包括 Microsoft Windows。如果可以选择，请使用 linux 来托管您的节点实例，根据我的经验，您会更开心。

# ajax - 如何使用 ajax 调用的响应来操作动态页面？

> ID：12718492
> 
> 赞同：0
> 
> 时间：2012-10-03T23:51:25.260
> 
> 标签：ajax

我正在尝试使用用户插入的数据提交一个表单，并从名为 (update.asp) 的页面获取 html。

1.  如何获取 html 响应以及如何将其写入页面上的 div？响应将是“成功”。
2.  如果我的页面抛出 500 或其他类型的错误，我该如何处理？

    ```
    $('input#btnUpdate').click( function() {
        $.ajax({
        url: 'update.asp',
        type: 'post',
        dataType: 'json',
        data: $('form#myForm').serialize(),
        success: function(data) {
            // how do i catch the response? is this the right place?
        },
        error: function(data) {
            // how do I catch the error code here?
        }
    }); 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T00:51:41.927

在这两种情况下，来自服务器的响应都将作为示例中的数据变量传递给回调。尝试在回调中使用 console.log(data) 以在开发者控制台中查看结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T01:58:00.650

```
$('input#btnUpdate').click( function() {
    $.ajax({
        url: 'update.asp',
        type: 'post',
        dataType: 'json',
        data: $('#myForm').serialize(),
        success: function(response) {
              $("#yourDIV").html(response);
        },
        error: function (xhr, ajaxOptions, thrownError)  {
              alert(thrownError);        //output, 500
        }
    });
}); 
```

更多信息：[ajax()](http://api.jquery.com/jQuery.ajax/)

# c - 你能解释一下这段代码吗？

> ID：12718495
> 
> 赞同：4
> 
> 时间：2012-10-03T23:51:35.290
> 
> 标签：c, buffer-overflow

所以我一直在阅读有关缓冲区溢出和 Aleph One 关于堆栈粉碎的文章。我想我什么都懂，除了他的漏洞利用代码中的这一点：

```
ptr = buff;   
addr_ptr = (long *) ptr;
for (i = 0; i < bsize; i+=4)
   *(addr_ptr++) = addr; 
```

buff 和 ptr 是字符数组。addr 持有一个堆栈指针，该指针指向堆栈开始处内存中的一个位置。bsize 是 buff 的大小。它在做什么？为什么他说 i+=4？他设置 addr_ptr 等于什么，为什么？当我尝试将其打印出来时，我只会得到 NULL。

这是文章的链接：http: [//insecure.org/stf/smashstack.html](http://insecure.org/stf/smashstack.html)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T00:01:46.583

他每次移动 4 个字节以推进一个字（8 位 * 4 字节 = 32 位字）。请注意，他在您的代码示例后面的段落中评论了他的猜测和测试方法。

他在黑暗中射击，试图溢出缓冲区。addr_ptr 被设置为 ptr 的地址，然后在 for 循环中被沿着缓冲区推送。

# jquery - 获取对象的名称属性

> ID：12718504
> 
> 赞同：0
> 
> 时间：2012-10-03T23:52:22.147
> 
> 标签：jquery

我设置了一个函数来获取对象的名称属性并运行一个函数。对象的名称设置为变量，但当我调用它时它不起作用。我错过了什么？

[http://jsfiddle.net/rexonms/wPUhK/1/](http://jsfiddle.net/rexonms/wPUhK/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T23:54:36.353

首先，您的调用`parent()`只会让您获得`<p>`包含链接，而不是您想要的元素。添加第二个`.parent()`，或者使用更合适的函数来查找特定容器。

其次，您的选择器应该是：`$('[name='+completed+']')`

# android - 在 While 循环中使用同步

> ID：12718511
> 
> 赞同：0
> 
> 时间：2012-10-03T23:52:54.950
> 
> 标签：android, thread-safety, synchronized

我发现以下代码不起作用，因为 while 循环无限期地窃取了锁：

```
public void run()
{
    while(true)
    {
        synchronized(run)
        {
            if (!run) break;
            [code]
        }
    }
}

public void stopRunning()
{
    synchronized(run)
    {
        run = false;
    }
} 
```

我的目标是确保在我知道我的 run() 函数不再实际运行之前，我不会从 stopRunning() 命令返回。我试图阻止 run 函数继续引用我正在销毁的其他东西。我的第一个想法是在 synchronized(run) 之前添加一行代码，例如 Thread.sleep(100) 以确保它释放锁。这是推荐的做法还是我忽略了某些东西[愚蠢/明显]？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T00:05:02.167

如果您只需要 stopRunning() 阻止直到 run() 完成操作，则可以使用设置为 1 的 CountDownLatch 。将其称为 stopSignal 或其他东西，在 run() 中，您可以在完成后调用 stopSignal.countDown() . 在 stopRunning 中，您可以设置 run() 完成的条件，然后调用stoppedSignal.await()。在 run() 通过倒计时“释放”闩锁之前，它不会继续。这只是一种更简洁的方法。所有被删除的同步块的东西。

当心“同步”关键字 - 这是一个非常生硬和旧的工具。并发包中有一些很棒的东西可以更巧妙地实现特定目的。“实践中的并发”是一本很棒的书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:04:56.873

这样的事情就足够了吗？

```
public void run()
{
    while(run)
    {
        [code]
    }

   onRunStopped();
}

public void stopRunning()
{
    run = false;
}

public void onRunStopped()
{
    // Cleanup
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T00:12:50.050

while`synchronized(run)`将锁定运行，您可以使用`run.wait()`冻结线程 run() 在另一个线程中执行。在另一个线程中，使用`run.notify()`或`run.notifyAll()`获取 run() 以继续。

synchronized 用于在线程之间进行同步。仅当它们中的两个或更多之间存在潜在的竞争条件时才使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T00:33:07.517

确保代码中的两个点的“运行”对象相同。

while 循环应该与 stopRunning() 方法同步到同一个对象。

while 循环没有占用锁，这两条代码更有可能引用不同的对象。但我不能说，因为代码中没有显示运行对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T01:37:55.120

可能有更优雅的解决方案，但我相信您可以通过以下更改来解决它：

```
private boolean lock;

public void run() 
{ 
    while(true) 
    { 
        synchronized(lock) 
        { 
            if (!run) break; 
            [code] 
        } 
    } 
} 

public void stopRunning() 
{ 
    run = false; 
    synchronized(lock){ } 
} 
```

# ios - UIPicker 之间的交互

> ID：12718512
> 
> 赞同：1
> 
> 时间：2012-10-03T23:52:56.687
> 
> 标签：ios, uipicker

我在屏幕上有 2 个选择器视图。填充旋转和点击都返回正确和预期的结果。它们通过 TAG 属性在必要的委托方法中使用“if/switch”语句进行区分。

我想要的是 forpicker1 在运行时在用户交互时动态更改picker2 中的选定行。例如，picker1 的值为 1 到 10 Picker2 的值为红色、蓝色、绿色、紫色等

用户在picker1中点击值为2的行并自动将picker2旋转/动画到预定行，在这种情况下说紫色，然后用户再次点击picker1第5行，然后picker2再次动画/旋转到另一个预定行，依此类推

什么有效：

在 viewDidLoad 和 [picker2 selectRow:row inComponent:component animated:NO] 中创建了两个选择器；没有问题，但仅在初始视图加载时第一次运行。如果从以下位置调用，它不会更改选定的行

不起作用的是调用： [picker2 selectRow:row inComponent:component animated:NO]; 来自其他（委托）方法，即使我调用： [self.thePicker reloadAllComponents];

这是否有效，或者它不应该这样做？我是这个论坛的新手，所以如果我很厚，请提前道歉！尽管干杯，我一直在寻找答案

# java - 在 Java 中关闭一个框架

> ID：12718513
> 
> 赞同：0
> 
> 时间：2012-10-03T23:52:57.883
> 
> 标签：java

我想知道是否有人可以向我解释为什么我的 this 不会编译？当用户点击 [x] 按钮时，我试图在 java 中关闭一个框架。我不确定您是否需要 java 中的侦听器或类似的东西，但是由于我一直在查找这个问题，所以这似乎就是您所需要的。

```
import javax.swing.JFrame;

public class BallWorld
{
  public static void main( String[] args )
  {
    BallWorldFrame world = new BallWorldFrame();
    world.setDefaultCloseOperation(world.DISPOSE_ON_CLOSE);
    world.setVisible( true );

   }

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:57:56.153

这不起作用的原因是因为您的`BallWorldFrame`类没有您尝试调用的方法。尝试这个：

```
public class BallWorldFrame extends JFrame {
    ...
} 
```

请注意，我们正在扩展[`JFrame`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html)，从而允许我们使用 和 等`setDefaultCloseOperation`方法`setVisible`。

* * *

现在要创建一个关闭框架的按钮，您需要使用`ActionListener`. 您可以尝试这样的事情（将所有内容放在一个类中）：

```
public class BallWorld extends JFrame implements ActionListener {

    private JButton x;

    public BallWorld() {
        x = new JButton("x");
        x.addActionListener(this);
        add(x);
        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        setVisible(true);
    }

    public static void main(String[] args) {
        new BallWorld();
    }

    public void actionPerformed(ActionEvent e) {
        dispose();  // close the frame
    }
} 
```

请注意我们的类现在如何实现`ActionListener`和覆盖`actionPerformed`以关闭框架。，我们`x.addActionListener(this)`的意思是“当点击'x'按钮时，执行`actionPerformed`我们类的方法中定义的动作，即关闭框架”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:16:47.293

从您所说的来看，听起来您`BallWorldFrame`并没有从 a 扩展，`JFrame`因为默认关闭操作是`JFrame`

尝试一个更简单的例子：

```
public static void main(String[] args) {

    EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {

            BallWorldFrame world = new BallWorldFrame();
            // All these compile and run without issue...
            world.setDefaultCloseOperation(world.DISPOSE_ON_CLOSE);
            world.setDefaultCloseOperation(BallWorldFrame.DISPOSE_ON_CLOSE);
            world.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
            world.setVisible(true);

        }
    });

}

public static class BallWorldFrame extends JFrame {
} 
```

nb`static`声明的原因是，在我的示例中， the`BallWorldFrame`是我的主类的内部类。如果您`BallWorldFrame`存在于它自己的类文件中，则不需要它。

# html - 绝对位置，右上角（调整大小）

> ID：12718514
> 
> 赞同：8
> 
> 时间：2012-10-03T23:52:58.940
> 
> 标签：html, css

应该很简单......我想。

我有这样的设置：

```
<div id="main">
   <div id="a1">THE FIRST</div>
   <div id="a2">THE SECOND</div>
</div> 
```

我希望整个主 div 位于屏幕的右上角，当我调整浏览器的大小时，我希望它留在那里。我不是在说固定定位——只是绝对的。

但是，这个 css 不起作用。有任何想法吗？

```
#main {
        position:relative;
    top:0;
    right:0;
    z-index:300;
    min-width:0;
    width:8%;
}

#main #a1 {
    position:absolute;
    background: #082540;
    z-index: 300;
    right:0;
    top:40px;
}

#main #a2 {
    position:absolute;
    background: #082540;
    z-index: 300;
    right:0;
    top:0;
} 
```

** 编辑 **

如果我将 div 放在右上角，我希望它在我从右到左进入浏览器时消失（如“固定”）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T00:00:44.680

ID 和 NAME 令牌必须以字母开头，这就是为什么您的`#1`和`#2`样式不适用的原因，将它们更改为类似`#a1`或`#a2`

**更新**：
只需添加`float:right;`到您的`#main`div

工作[**演示**](http://jsfiddle.net/jY6w3/)

# c# - Microsoft 媒体平台播放器框架，通过按钮按下（或双击视频）使视频全屏

> ID：12718517
> 
> 赞同：1
> 
> 时间：2012-10-03T23:53:27.747
> 
> 标签：c#, xaml, windows-8, microsoft-metro, mmppf

我刚刚开始玩 Windows 8 开发，我试图弄清楚如何制作一个视频，其来源是从一个 url 弹出到全屏，无论是按下按钮还是双击视频正在播放的区域。关于如何做到这一点的任何想法？作为后续行动，我还必须能够将其最小化回正常的播放窗口。关于如何使用 xaml C# 执行此操作的任何想法？

参考： [http ://playerframework.codeplex.com/wikipage?title=Windows%208%20Metro%20Player:%20Install%20and%20configure%20-%20XAML/C](http://playerframework.codeplex.com/wikipage?title=Windows%208%20Metro%20Player:%20Install%20and%20configure%20-%20XAML/C)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:19:33.970

播放器框架有一个名为 IsFullScreen 的布尔属性来管理全屏状态。但是，您需要自己完成工作以隐藏页面上的额外元素和/或调整媒体播放器的大小。推荐的方法是设置此属性并处理 IsFullScreenChanged 事件。例如：

```
<Grid Style="{StaticResource LayoutRootStyle}" x:Name="LayoutRoot">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Border x:Name="LeftPanel" Background="Red" Width="40"/>
    <mmppf:MediaPlayer x:Name="player" Grid.Column="1" IsFullScreenVisible="True" Source="http://smf.blob.core.windows.net/samples/videos/wildlife.mp4"/>
</Grid>

public MainPage()
{
    this.InitializeComponent();
    player.DoubleTapped += player_DoubleTapped;
    player.IsFullScreenChanged += player_IsFullScreenChanged;
}

void player_IsFullScreenChanged(object sender, RoutedPropertyChangedEventArgs<bool> e)
{
    LeftPanel.Visibility = e.NewValue ? Visibility.Collapsed : Visibility.Visible;
}

void player_DoubleTapped(object sender, DoubleTappedRoutedEventArgs e)
{
    player.IsFullScreen = !player.IsFullScreen;
} 
```

注意：MediaPlayer 调用 IsFullScreenVisible 上还有一个属性，您可以将其设置为 true 以在默认控制条中显示全屏切换按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-29T19:39:56.813

我将此代码用于fullWindow。它可以工作，但在完整窗口中它使用默认传输控件

```
private void MediaPlayer_IsFullScreenChanged(object sender, Windows.UI.Xaml.RoutedPropertyChangedEventArgs<bool> e)
            {
                Microsoft.PlayerFramework.MediaPlayer mp = (sender as Microsoft.PlayerFramework.MediaPlayer);
                mp.IsFullWindow = !mp.IsFullWindow;
            } 
```

# php - 在提交时将 js 变量发送到 php 文件

> ID：12718518
> 
> 赞同：0
> 
> 时间：2012-10-03T23:53:36.023
> 
> 标签：php, javascript, html

我正在尝试传递由动态创建的文本框创建的 javascript 变量。

代码位于[http://pastebin.com/X4tFqHNw](http://pastebin.com/X4tFqHNw)，因为 php 会破坏此处的代码。

正如您在代码中看到的那样，它可以很好地传递其他所有内容，但我不知道如何将标签变量发布到 php 文件中。有没有办法将如下所示的标签传递给php？

```
 function save(e) {
    var tags = multiTags.find("input.tag").map(function() {
        return $(this).val();
    }).get().join(',');
    alert(tags);
    return false;
} 
```

网站在这里：[http](http://eurothermwindows.com/ed/inputform.php) ://eurothermwindows.com/ed/inputform.php 。您会注意到，单击添加时会创建一个新框（如 js 中所示）。如果可能的话，我希望通过这些值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T01:21:57.497

你可以使用 jquery 来
$('#target').submit(function() {
$('').val(value);
});
您可以针对隐藏的输入。然后将该变量作为 POST 数据传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:06:28.677

你可以看看这里-> [http://forum.jquery.com/topic/passing-value-to-hidden-form-field](http://forum.jquery.com/topic/passing-value-to-hidden-form-field)。我想这应该足以让您找到解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T00:18:59.507

尝试这样的事情：

```
function save() {
    var tags = new Array();
    $('input.tag').each(function(index){
        tags[index] = $(this).val();
    });
    tags = tags.join(',');
    alert(tags);
    return false;
} 
```

# java - 使用 values/strings.xml、HTML 和 CSS 格式化 TextView 文本

> ID：12718519
> 
> 赞同：4
> 
> 时间：2012-10-03T23:53:43.937
> 
> 标签：java, android, html, css

我正在尝试用大量文本格式化 TextView 以使其看起来更好，因为我觉得使用 HTML 和 CSS 很容易，所以我想我会试一试。并且由于将它放在 values/strings.xml 中可以让您本地化，我发现这是最好的选择。现在，我设法通过以下方式在字符串中获取 HTML：

```
<![CDATA[ <html code here> ]]> 
```

但是，如果我尝试例如：

```
<![CDATA[
    <html>
    <head>
    <body>
    <style type=\"text/css\">
        p {
        display: block;
        border-bottom: 1px solid #31B6E7; }
    </style>
    </head>
    ...
    etc
]]> 
```

它只会将 CSS 代码粘贴为纯文本，是否无法以这种方式使用 CSS 进行格式化，或者这里有没有人对我有好的提示？

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T00:12:42.367

我认为您可能对 TextView 或 Html.fromHtml 方法抱有一些期望，因为这就是将 HTML 变成可与 TextView 一起使用的 Spannable 的原因。这是相当基本的。这是它支持的内容：

[http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html](http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T00:05:10.800

您必须告诉 TextView 它正在接收 HTML。[我想你可以在这里](https://stackoverflow.com/questions/2116162/how-to-display-html-in-textview)找到你的答案。这适用于 HTML。[不支持 CSS](http://developer.android.com/guide/topics/ui/themes.html) - 你必须通过你的布局 XML 来做到这一点......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-09T01:51:43.913

您可以使用[android.webkit.WebView.loadData()](http://developer.android.com/reference/android/webkit/WebView.html)来呈现 HTML + CSS，而不是 TextView。

# vim - 我可以使用父目录而不是每个文件的模式行配置 vim 吗？

> ID：12718522
> 
> 赞同：1
> 
> 时间：2012-10-03T23:54:08.427
> 
> 标签：vim, modeline

> **可能重复：**
> [Vim：对目录中的文件应用设置](https://stackoverflow.com/questions/456792/vim-apply-settings-on-files-in-directory)

vim 可以配置选项卡大小和基于文件类型将选项卡扩展到空格等设置。

我想为我的产品中的源文件配置 vim 的编辑设置，但我不想在每个源文件中设置模式行，并且我不想依赖 ~/.vimrc 中的许多每个开发人员的设置。

我想将设置放在我的产品源代码树的顶级文件夹中的一两个文件中，并且在 ~/.vimrc 中最多有非常简单的每个开发人员设置，以便他们的 vim 会话将在任何时候查找项目配置编辑该项目中的源文件。

我不希望在 ~/.vimrc 中预先配置顶级文件夹，因为我想随时将产品源树检出到多个位置而不重新配置 ~/.vimrc 所以我希望它真的会有可以通过从正在编辑的源文件的位置遍历父文件夹来找到。一旦找到配置文件，我希望它被解释为 ~/.vimrc 或模式行。

有没有这样的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T00:01:40.697

在右侧栏中，您可能会看到相关问题：[Vim: apply settings on files in directory](https://stackoverflow.com/questions/456792/vim-apply-settings-on-files-in-directory?rq=1) that 实际上完全回答了您的问题。

注意：根据经验，一旦找到该文件，不应将其解释为 .vimrc，而应类似于 ft-plugin。大多数设置应为本地缓冲区。唯一必须是全局的设置是针对不能正确处理项目特定设置的插件（不幸的是，有很多）。

# c++ - 如何使用 C/C++ 在 exe 内部完全存储用户设置？

> ID：12718530
> 
> 赞同：1
> 
> 时间：2012-10-03T23:54:56.587
> 
> 标签：c++, c, windows, exe

这更多是关于如何以及是否实际解决问题的问题。

> 如何使用 C/C++ 在 exe 内部完全存储用户设置？

这甚至可能吗？如果可以，怎么办？我主要只是好奇，因为我真的想不出办法，对我来说，一些应用程序似乎可以做到这一点。

*注意：我已经知道诸如生成子进程、使用文件、云或注册表等方法，我只是想知道您是否可以在内部实际保存设置。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T00:18:43.007

你可以用迂回的方式。但是您将不得不担心修改可执行文件的影响，这可能会阻止它再次被执行。

例如，如果你用一个简单的

```
int main()
{
   std::cout<<"This is some text to display"<<std::endl;
   return 0;
} 
```

您将在可执行文件中看到（如果您在记事本中打开并搜索）字符串“这是要显示的一些文本”是二进制文件中的纯文本。

我的理论是，您可以使用带有插入运算符的字符串流对象到变量中，然后获取值。

因此，您将加载可执行文件以及之后的线程或控制台应用程序，以搜索以纯文本形式提供的可执行文件中的值并覆盖它们。但是，我不知道它们是大小分隔的还是类似的。所以这样做很有可能会破坏你的程序。

同样，这是一个潜在的解决方法，但我不明白你为什么希望做这样的事情。更不用说你可能会破坏整个可执行文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T23:58:09.923

实际上没有办法，因为可执行文件在运行时无法修改自己。您可以生成另一个进程，该进程将在关闭后修改原始可执行文件，但这很愚蠢。

关于这个确切的主题以及人们如何在此处存储用户设置有一个有趣的讨论：

[http://cboard.cprogramming.com/cplusplus-programming/83391-saving-settings-data-executable-itself-permenent-basis.html](http://cboard.cprogramming.com/cplusplus-programming/83391-saving-settings-data-executable-itself-permenent-basis.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:13:33.543

解决此问题的方法可能是将真正的可执行文件和配置文件打包在一个自解压压缩文件（zip 或类似文件）中。自解压可执行文件将解压缩到一个临时目录并从那里执行程序。该程序可以创建/修改配置文件并将它们再次打包到自解压文件中。有几件事需要处理，比如如何定位自解压压缩文件的位置以便能够重新打包......

# ruby-on-rails - 在 Ruby 中编写返回其他值为零的三进制的最短方法？

> ID：12718533
> 
> 赞同：2
> 
> 时间：2012-10-03T23:55:31.237
> 
> 标签：ruby-on-rails, ruby

通常我想写一些返回 "Yes" if `true`、 "No" if`false`或 "NA" （或任何其他字符串） if的东西`nil`。目前我这样做：

```
@contact.boolean ? 'Yes' : (@contact.boolean.nil? ? "NA" : "No") 
```

这是写这个的最短方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T00:02:32.677

这是一个想法：

```
> {true => "Yes", false => "No", nil => "N/A"}[true]
 => "Yes" 
```

所以，当然，你会做`{true => "Yes", false => "No", nil => "N/A"}[value]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:02:38.347

将其移至方法怎么样？为什么一定要短？如果你把它移到一个方法中，那么你只需要调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T00:02:59.833

差不多。您正在尝试使用返回 2 个不同值的运算符返回 3 个不同的值，因此您需要双三元组。

你需要在你的对象中存储真或假吗？你不能存储“是”或“否”吗？如果是这样，并且假设您的属性被称为比布尔值更好的东西，那么您可以简单地写

```
@contact.correct? || "(NA)" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T04:46:27.790

一旦你通过了一个三元的真/假测试，阅读时就开始变得更加难以理解。这转化为维护问题。我建议移至`case`声明：

```
case @contact
when true
  'Yes'
when false
  'No'
when nil
  '(NA)'
end 
```

其他语言使链式三元语句更具可读性；在 Perl 中使用复杂的链是因为很容易以一种易于查看正在发生的事情的方式构建它们。而不是这样写：

```
$contact == true ? 'Yes' : contact == false ? 'No' : '(NA)'; 
```

你可以这样写：

```
$contact == true       ? 'Yes'
    : contact == false ? 'No'
    :                    '(NA)'; 
```

对于任何阅读代码的人来说，这确实是一个很好的关于逻辑的视觉提示。

# jquery - 包装器隐藏时无法停止 youtube 视频

> ID：12718534
> 
> 赞同：1
> 
> 时间：2012-10-03T23:55:52.140
> 
> 标签：jquery, youtube

我有 2 个 div 需要显示隐藏。一张有图片，一张有 youtube 视频。

```
<div class="gallery-video-wrapper">
     <iframe id="player" type="text/html" width="430" height="323" src="http://www.youtube.com/embed/u1zgFlCw8Aw?enablejsapi=1" frameborder="0"></iframe>
</div>
<div class="gallery-images">
    <img src="image1.jpg" />
rest of the jquery gallery code...
</div> 
```

默认只显示视频。在点击

```
<a href="#" class="show-gallery">Show Images</a> 
```

我想展示我设法做的画廊。但是，如果播放视频，除非我删除整个 div，否则我似乎无法停止它。如果这样做，我不知道如何把它放回去。

这是我到目前为止的脚本：

```
$('.show-gallery').click(stop, function() {

        $('.gallery-video-wrapper').fadeOut();
        $('.gallery-images').fadeIn(function() {
            $('.ad-gallery').adGallery({
                display_back_and_forward : true,
                display_next_and_prev : true,
                update_window_hash : false,
                scroll_jump : 0,
                thumb_opacity : 1
            });
        });
    }); 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:01:32.470

> *但是，如果播放视频，除非我删除整个 div，否则我似乎无法停止它。如果这样做，我不知道如何把它放回去。*

你试过用`.detach()`代替`.remove()`吗？

> .detach() 方法与 .remove() 方法相同，不同之处在于 .detach() 保留与已删除元素关联的所有 jQuery 数据。当移除的元素稍后要重新插入到 DOM 中时，此方法很有用。

你也可以试试`.hide()`div，`.show()`以后再试试

# math - 32 位计算机如何处理大位数？前任。512 位整数

> ID：12718536
> 
> 赞同：2
> 
> 时间：2012-10-03T23:56:08.803
> 
> 标签：math, computer-science, bit

我一直在阅读一篇关于密码学的文章，我心想“32 位计算机实际上如何对 512 位值甚至 64 位值执行操作？”

有人能指出我正确的方向吗？也许我不知道如何正确表达我想知道的内容，但谷歌搜索对弄清楚这一点并没有太大帮助。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T07:59:03.887

这是[GregS 评论](https://stackoverflow.com/questions/12718536/how-does-a-32bit-computer-work-with-large-bit-numbers-ex-512bit-integers#comment17175512_12718536)的扩展。

假设我知道所有 100 个`single-digit * single-digit`乘法（从`0 * 0 = 0`到`9 * 9 = 81`），并且有人要求我计算`561 * 845`。我*可以*说，“对不起，我不能乘以这么大的数字”；或者，我可以记住我的童年教育并这样做：

```
 561
       845 *
----------
      2805
     2244
    4488   +
==========
    474045 
```

这只要求我可以在任何给定步骤中做*我已知范围内*的乘法或加法（带进位）。

现在，假设上面的每个符号不是*十进制数字，而是**一个 32 位字*；而不是我，我们有一个处理器，它可以将 32 位字乘以 64 位结果，并添加（带进位）32 位字。瞧，我们有一个系统可以进行任意大的二进制乘法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T00:00:22.293

一次 32 位。有标志来指示进位、溢出等，以允许通过重复操作进行多字算术。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T00:03:28.923

32 位处理器可以将较大的数字拆分到多个寄存器上，尽管它比在单个 32 位寄存器上执行操作要慢。对于加法/减法，它只是从最低有效寄存器开始执行算术，然后将状态位传送到下一个有效寄存器。乘法/除法可能会变得更复杂，但主要的缺点是性能。

有关详细信息，请参阅[http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic)。

还有这个问题：[编程语言如何处理大量算术](https://stackoverflow.com/questions/1438753/how-do-programming-languages-handle-huge-number-arithmetic)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T23:59:51.517

这些操作在软件中执行或使用专用硬件（用于加密）。例如库，请参阅[GMP](http://gmplib.org/)和[MPFR](http://www.mpfr.org/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T00:02:17.800

简而言之，就像米奇所说的那样，它只是一点一点地分解它。您的处理器可能需要一些时间来处理它，但这就是为什么我们现在拥有多核处理器来加速这个过程。这也是为什么大多数操作系统都有 32 位和 64 位版本以及最终 128 位的原因。如果您对此感兴趣，请参加一些关于汇编和机器语言的课程

# python - 在python中生成有向词图

> ID：12718537
> 
> 赞同：5
> 
> 时间：2012-10-03T23:56:15.913
> 
> 标签：python, graph, networkx

从句子列表中，我想根据以下属性生成有向图以生成子句：

假设有三个句子：

*   我爱糖果
*   我爱你
*   我非常喜欢糖果

每次对出现时，该图将在每个连续单词之间具有权重 1 的边。

然后我找出图中权重最大的路径。这里它返回“我非常喜欢糖果”，重量为 3+2+1+1

```
str1 = """Man who run in front of car, get tired.
Man who run behind car, get exhausted."""
# create a list of words separated at whitespaces
wordList1 = str1.split(None)
# strip any punctuation marks and build modified word list
# start with an empty list
wordList2 = []
for word1 in wordList1:
# last character of each word
lastchar = word1[-1:]
# use a list of punctuation marks
if lastchar in [",", ".", "!", "?", ";"]:
    word2 = word1.rstrip(lastchar)
else:
    word2 = word1
# build a wordList of lower case modified words
wordList2.append(word2.lower()) 
```

现在`wordList2`有一个连续单词的列表。如何将其转换为图表。我正在使用 networkx 库，但对它不太熟悉。

如何继续制作边缘加权图？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T20:06:01.857

这是使用networkX解决您的问题的方法。

此代码将生成一个有向图 dG。dG 每个单词都有一个节点，带有一个“count”属性，表示该单词被看到了多少次。每个二元组将有一个有向边，并带有一个“权重”属性，指示二元组出现了多少次。

```
import networkx as nx
import string
from sys import maxint

str1 = """Man who run in front of car, get tired.
Man who run behind car, get exhausted."""

wordList1 = str1.split(None)

wordList2 = [string.rstrip(x.lower(), ',.!?;') for x in wordList1]

dG = nx.DiGraph()

for i, word in enumerate(wordList2):
    try:
        next_word = wordList2[i + 1]
        if not dG.has_node(word):
            dG.add_node(word)
            dG.node[word]['count'] = 1
        else:
            dG.node[word]['count'] += 1
        if not dG.has_node(next_word):
            dG.add_node(next_word)
            dG.node[next_word]['count'] = 0

        if not dG.has_edge(word, next_word):
            dG.add_edge(word, next_word, weight=maxint - 1)
        else:
            dG.edge[word][next_word]['weight'] -= 1
    except IndexError:
        if not dG.has_node(word):
            dG.add_node(word)
            dG.node[word]['count'] = 1
        else:
            dG.node[word]['count'] += 1
    except:
        raise 
```

要查看图表的内容，您可以打印节点和边。

```
for node in dG.nodes():
    print '%s:%d\n' % (node, dG.node[node]['count'])

for edge in dG.edges():
    print '%s:%d\n' % (edge, maxint - dG.edge[edge[0]][edge[1]]['weight']) 
```

请注意，二元边权重不是从零开始计数，而是从 maxint 开始向下计数。这是因为 networkX 的最短路径实用程序将使用权重值作为每条边的成本。通过使我们的最高计数成为我们最小的权重，我们可以使用这些实用程序来找到具有最高边缘计数的路径。

例如，我们可以得到单词“man”和“exhausted”之间计数最多的路径：

```
>>>shortest_path = nx.shortest_path(dG, source='man', target='exhausted', weight='weight')
>>>print shortest_path
['man', 'who', 'run', 'behind', 'car', 'get', 'exhausted'] 
```

或者，我们可以得到单词“man”和所有其他单词之间计数最高的路径：

```
>>>shortest_paths = nx.shortest_path(dG, source='man', weight='weight')
>>>print shortest_paths
{'run': ['man', 'who', 'run'], 
'get': ['man', 'who', 'run', 'behind', 'car', 'get'], 
'exhausted': ['man', 'who', 'run', 'behind', 'car', 'get', 'exhausted'], 
'car': ['man', 'who', 'run', 'behind', 'car'], 
'who': ['man', 'who'], 
'behind': ['man', 'who', 'run', 'behind'], 
'of': ['man', 'who', 'run', 'in', 'front', 'of'], 
'in': ['man', 'who', 'run', 'in'], 
'front': ['man', 'who', 'run', 'in', 'front'], 
'tired': ['man', 'who', 'run', 'behind', 'car', 'get', 'tired'], 
'man': ['man']} 
```

如上所述，有可能在这样的图中得到循环，我不确定 networkx 最短路径算法将如何处理这种情况。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T00:26:45.963

使用字典存储二元组，每次遇到二元组时将值加 1。获取字典值的最大值以生成您的起点，然后递归调用一个函数，该函数获取从前一个二元组中的最后一个单词开始的具有最高值的二元组，直到不再存在以最后一个单词开头的二元组。警惕圆形图的可能性，例如`I love that I love that I love`无限（设置递归限制）。

我从未专门与networkx合作过，但浏览主页后，上述内容仍然适用。

# bash - 用变量替换 Bash 命令

> ID：12718538
> 
> 赞同：1
> 
> 时间：2012-10-03T23:57:06.147
> 
> 标签：bash, pipe, command-substitution, variable-substitution

我有一个 bash 脚本，它基于文件列表构建命令，因此该命令是动态构建的。即时构建它意味着它被存储在一个变量中。然后我想运行该命令并将输出存储在一个单独的变量中。当我使用命令替换来尝试运行命令时，它会出错。当变量使用管道时，如何让命令替换与变量中的命令一起使用？

这是我的脚本：

```
# Finds number of files that are over 365 days old

ignored_files=( 'file1' 'file2' 'file3' )
path_to_examine="/tmp/"
newer_than=365

cmd="find $path_to_examine -mtime -$newer_than"
for file in "${ignored_files[@]}"; do
    cmd="$cmd | grep -v \"$file\""
done
cmd="$cmd | wc -l"
echo "Running: $cmd"
num_active_files=`$cmd`
echo "num files modified less than $newer_than days ago: $num_active_files" 
```

如果我运行该程序，则输出：

```
# ./test2.sh 
Running: find /tmp/ -mtime -365 | grep -v "file1" | grep -v "file2" | grep -v "file3" | wc -l
find: bad option |
find: [-H | -L] path-list predicate-list
# 
```

如果我运行该 cmd，则输出：

```
# num=`find /tmp/ -mtime -365 | grep -v "file1" | grep -v "file2" | grep -v "file3" | wc -l`
# echo $num
10
# 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T00:11:29.453

您必须使用以下`eval`命令：

```
num_active_files=`eval $var` 
```

这允许您为 bash 生成动态运行的表达式。

希望这会有所帮助=)

# wpf - 将键盘焦点移动到下一个树项？

> ID：12718544
> 
> 赞同：0
> 
> 时间：2012-10-03T23:57:46.913
> 
> 标签：wpf, treeview

我有一个在 wpf 和 mvvm 中使用 treeview 的应用程序。treeitem 模板包含一个文本框，供用户输入或更改字段数据。如果用户在编辑时按下制表符，我想它是否会移动到下一个可见的树项文本框并允许他们开始编辑它。这可能吗？我可以抓住 tab 键，但不知道如何移动到下一个项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:51:38.080

好的，我不确定这是最干净的方法，但我找到了一种方法，它似乎没有受到速度问题的影响，所以它现在可以工作，如果有人有一个更干净的答案，仍然会感兴趣。这是我所做的：

我使用了一种类似于[此处](https://stackoverflow.com/questions/974598/find-all-controls-in-wpf-window-by-type)引用的方法来获取 TreeView 中所有文本框的集合。然后我将“发送者”用于 KeyDown 事件，转换为文本框，并得到它的 datacontext，这是我对该节点的视图模型。然后我使用我的整体视图模型来查找下一个可见节点的视图模型（通过两种方式绑定到“IsExpanded”非常容易）。最后，我遍历了开始时找到的所有文本框，直到我找到一个 datacontext 是下一个可见视图模型并在其上调用 Keyboard.Focus(myTextBox)。

就像我说的那样，似乎应该有一种更清洁的方法，但它现在有效......

# c# - 使用用户控件的 ASP.NET C# 下拉列表

> ID：12718545
> 
> 赞同：10
> 
> 时间：2012-10-03T23:57:47.880
> 
> 标签：c#, asp.net

首先，我是 ASP.NET 的新手

为了在不同页面上的不同表单中重复使用我的下拉列表，我被建议使用用户控件来完成此操作。因此，我阅读了一些有关用户控制的内容并尝试使用它，但由于我是 ASP.NET 的新手，所以无法让它工作。得到这个错误：

> 无法通过嵌套类型“ASP.Vendor._Default”访问外部类型“ASP.Vendor”的非静态成员

1）我创建一个 Controls\Vendor.ascx 文件

```
<% @ Control Language="C#" ClassName="Vendor" %>
<%@ Import Namespace="System.Data" %>
<%@ Import Namespace="System.Data.SqlClient" %>
<%@ Import Namespace="System.Web.UI" %>
<%@ Import Namespace="System.Web.UI.WebControls" %>
<%@ Import Namespace="System.Configuration" %>
<%@ Import Namespace="System.Linq" %>
<%@ Import Namespace="System.Collections.Generic" %>

<script runat="server">

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            FillVendor();
        }
    }

    private void FillVendor()
    {
        string strConn = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
       System.Data.SqlClient.SqlConnection conn = new System.Data.SqlClient.SqlConnection(strConn);
        SqlCommand cmd = new SqlCommand();
        cmd.Connection = conn;
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = "SELECT VendorID, VendorName FROM Vendor";
        DataSet objDs = new DataSet();
        SqlDataAdapter dAdapter = new SqlDataAdapter();
        dAdapter.SelectCommand = cmd;;
        conn.Open();
        dAdapter.Fill(objDs);
        conn.Close();

        if (objDs.Tables[0].Rows.Count > 0)
        {
            VendorList.DataSource = objDs.Tables[0];
            VendorList.DataTextField = "VendorName";
            VendorList.DataValueField = "VendorID";
            VendorList.DataBind();
            VendorList.Items.Insert(0,"-- Select --");
        } else {
             lblMsg.Text = "No Vendor Found";
        }
    }
}
</script>
<asp:DropDownList ID="VendorList" runat="server" AutoPostBack="True" >
</asp:DropDownList> 
```

2）我用这段代码创建了一个 Tes2.aspx 页面，看看我是否可以拉出那个供应商下拉列表，但没有运气。

```
<%@ Page Language="C#" %>
<%@ Register TagPrefix="uc" TagName="Vendor" 
    Src="Controls\Vendor.ascx" %>
<html>
<body>
Testing
<form runat="server">
    <uc:Vendor id="VendorList" 
        runat="server" 
        />
</form>
</body> 
```

显然，我是新手，必须做错事。有人可以帮助我或给我一个用户控件中的下拉列表示例以及如何将其包含在表单中吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T00:01:37.633

我看到的第一个问题是您从`Page`内部继承`UserControl`：

```
public partial class _Default : System.Web.UI.Page 
```

继承自`UserControl`。

```
// notice that I also renamed the class to match the control name
public partial class Vendor : System.Web.UI.UserControl 
```

## 使用代码隐藏文件

正如@x0n 所指出的，您的用户控件代码可以放置在代码隐藏文件中（当您在 Visual Studio 中创建用户控件时自动创建）。用户控件通常由标记部分 (.ascx)、代码隐藏 (.ascx.cs) 和设计器文件 (.ascx.designer.cs) 组成。HTML 标记进入 ASCX 文件，绑定代码进入代码隐藏。

我建议保存您的代码，删除您当前的用户控件，然后通过 Visual Studio 重新添加它。

**示例项目结构**
![在此处输入图像描述](../Images/cebfc1402e522939b9a1ecb679c0973b.png)

**标记 (ASCX) 文件**

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="VendorListControl.ascx.cs" Inherits="MyNamespace.VendorListControl" %>
<asp:DropDownList runat="server" ID="ddlVendorList" />
<asp:Label runat="server" ID="lblMessage" /> 
```

**代码隐藏**

```
using System;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;

namespace MyNamespace
{
    public partial class VendorListControl : System.Web.UI.UserControl
    {
        protected void Page_Load( object sender, EventArgs e ) {
            if( !IsPostBack ) {
                FillVendors();
            }
        }

        private void FillVendors() {
            string strConn = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
            System.Data.SqlClient.SqlConnection conn = new System.Data.SqlClient.SqlConnection( strConn );

            SqlCommand cmd = new SqlCommand();
            cmd.Connection = conn;
            cmd.CommandType = CommandType.Text;
            cmd.CommandText = "SELECT VendorID, VendorName FROM Vendor";

            DataSet objDs = new DataSet();
            SqlDataAdapter dAdapter = new SqlDataAdapter();
            dAdapter.SelectCommand = cmd; ;
            conn.Open();
            dAdapter.Fill( objDs );
            conn.Close();

            if( objDs.Tables[0].Rows.Count > 0 ) {
                this.ddlVendorList.DataSource = objDs.Tables[0];
                this.ddlVendorList.DataTextField = "VendorName";
                this.ddlVendorList.DataValueField = "VendorID";
                this.ddlVendorList.DataBind();
                this.ddlVendorList.Items.Insert( 0, "-- Select --" );
            }
            else {
                this.lblMessage.Text = "No Vendor Found";
            }
        }
    }
} 
```

**替代方法 - 删除类声明**

如果您出于某种原因不想添加代码隐藏文件，请完全删除类声明并仅将代码包含在其中。

```
<script runat="server">
    protected void Page_Load(object sender, EventArgs e){
        if (!IsPostBack){
            FillVendor();
        }
    }

    // etc
</script> 
```

作为旁注，我会将数据访问逻辑放在一个单独的类中以进行适当的分离/重用，但是一旦您纠正了上述问题，您概述的结构应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:00:28.273

不要将类的定义放在 ASCX 本身内。创建一个单独的 CS 文件并使用`<%@ Control ...`指令上的 CodeBehind 属性引用单独的文件。ASP.NET 运行时将在首次访问时编译您的 ASCX 和 CS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T00:11:14.653

你在使用 Visual Studio 吗？如果是这样，您应该使用提供的模板，因为它会更容易，并且您可以一起避免这个问题。例如，要添加用户控件，您可以右键单击要放入的文件夹（位于解决方案资源管理器中），然后转到添加 -> 新项目。然后选择 Web 用户控件，为其命名并单击添加。

# php - 无法让 PDO 准备好的语句接受包含撇号的姓氏

> ID：12718558
> 
> 赞同：1
> 
> 时间：2012-10-03T23:59:59.937
> 
> 标签：php, pdo, prepared-statement

> **可能重复：**
> [MySQL / PDO / Prepared Statements - 都是一个很大的跳跃，有点压倒性和有点混乱？](https://stackoverflow.com/questions/8061185/mysql-pdo-prepared-statements-all-a-big-jump-a-bit-overwhelming-and-a-lit)

我正在使用此代码将数据插入用户表中。除非用户的姓氏包含撇号（例如 O'Toole），否则它可以正常工作。我的理解是，PDO 准备好的语句应该处理撇号，而我不需要额外的工作。我的假设是否不正确，这就是为什么此代码不适用于带有撇号的名称的原因？

我没有收到错误消息。

```
require_once('/database/database.php');
$query = "INSERT INTO users
             (first_name,last_name, email, pass, reg_date)
          VALUES
             ('$fn','$ln','$em', SHA1('$pwd'), NOW())";

try {
    $statement=$db->prepare($query);
    $statement->bindValue(':first_name',$fn);
    $statement->bindValue(':last_name',$ln);
    $statement->bindValue(':email',$em);
    $statement->bindValue(':pass',SHA1('$pwd'));

    $success = $statement->execute();
    $row_count = $statement->rowCount();
    $statement->closeCursor(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T00:04:20.333

您没有正确使用绑定，请尝试以下操作：

```
$query = "INSERT INTO users
         (first_name, last_name, email, pass, reg_date)
      VALUES
         (:first_name, :last_name, :email, :pass, NOW())"; 
```

您将值“绑定”到查询中的占位符。

# naudio - PCM Wave 文件中的数据长度使用 MemoryStream 和 WaveFileWriter

> ID：12718559
> 
> 赞同：0
> 
> 时间：2012-10-04T00:00:15.357
> 
> 标签：naudio, pcm

**设想：**

我正在使用 NAudio 1.5，我正在尝试从 IWaveProvider 以 PCM、8 位、22050hz 格式记录正弦波，如下所示：

```
Private Sub record(ByVal waveForm As String, _
                   ByVal duration As Integer, _
                   ByVal frequency As Integer, _
                   ByVal amplitude As Integer, _
                   ByVal sampleRate As Integer)
    Dim wave As IWaveProvider = _
          Audio.SoundModulWaveFormProviderFactory.createWaveForm(waveForm, _
                frequency, amplitude, sampleRate)
    Dim memStream As New System.IO.MemoryStream()
    Dim writer As New WaveFileWriter(memStream, wave.WaveFormat)
    Dim numberOfBytes As Integer = writer.WaveFormat.AverageBytesPerSecond
    Dim buffer(numberOfBytes) As Byte
    Dim i As Integer
    Dim count As Integer
    For i = 1 To duration
        count = wave.Read(buffer, 0, numberOfBytes)
        writer.Write(buffer, 0, count)
    Next
    writer.Flush()
    Try
        Me.audioStream = New MemoryStream()
        memStream.WriteTo(Me.audioStream)
    Catch ex As Exception
        Trace.WriteLine(ex.Message)
    End Try
    writer.Close()
    recorded = True
End Sub 
```

然后将内存流移交给解析整个波形文件并将其包含到声音列表中的函数。

**问题**

上面提到的函数期望波形数据的长度是从字节位置 42 到 45。不幸的是，这似乎总是 0。因此我没有得到任何长度。

**问题：**

如何确保 WaveFileWriter 正在将此信息写入 MemoryStream？还是仅在写入文件时才这样做？

也许有不同的方法可以达到相同的目标？

**更新：**

WaveFileWriter 在直接写入文件时确实包含波形数据长度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:38:06.347

长度仅在您调用 Close 时由 WaveFileWriter 设置。所以移动 writer.Close 在你的 Try 块之前。此外，NAudio 有一个名为 IgnoreDisposeStream 的帮助器类，您可以使用它来防止 MemoryStream 在您想要它之前被释放。

```
Dim writer As New WaveFileWriter(new IgnoreDisposeStream(memStream) ...

...
writer.Close()
Try
    Me.audioStream = New MemoryStream()
    memStream.WriteTo(Me.audioStream)
Catch ex As Exception
    Trace.WriteLine(ex.Message)
End Try

recorded = True 
```

# javascript - TypeError：'undefined' 不是对象（评估 'window.frames["content"].document.location'）

> ID：12718565
> 
> 赞同：0
> 
> 时间：2012-10-04T00:00:43.650
> 
> 标签：javascript, html, iframe

在 Internet Explorer 上，我的代码运行良好，但我在 Mac 上使用 Safari，它给了我这个错误。这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
<title>The Me Project</title>
<link href="me.css" rel="stylesheet" type="text/css" href="me.css" />
<script type="text/javascript">
function page(setter)
{
    if (setter=="home") 
    {
        window.frames["content"].document.location.href = "home.html";
    }
    else if (setter=="birth")
    {
        window.frames["content"].document.location.href = "birth.html";
    }
    else if (setter=="cool")
    {
        window.frames["content"].document.location.href = "cool.html";
    }
    else if (setter=="family")
    {
        window.frames["content"].document.location.href = "family.html";
    }
    else
    {
        window.frames["content"].document.location.href = "home.html";
    }
}
</script>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
</head>
<body>
<div id="header">
    <div id="nav">
    <h1>Parth's Me Project</h1>
    <ul>
    <li><a onclick="page('home')">Home</a></li>
    <li><a onclick="page('birth')">Birth Year</a></li>
    <li><a onclick="page('cool')">Cool Things</a></li>
    <li><a onclick="page('family')">My Family</a></li>
    </ul>
    </div>
</div>
<div id="main">
<iframe src="home.html" name="content" id="content" seamless height="1000" frameborder="0"/>
</div>
<frame>
</body>
</html> 
```

如果您需要其他页面，请告诉我。我试图保持相同的标题和导航栏，所以我在底部使用 iframe。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T01:55:26.813

该错误告诉您 `window.frames["content"].document`解析为，`undefined`因此浏览器无法访问该`location`属性。

在 iFrame 中访问文档在不同的浏览器中是不同的，见下文。此外，像这样链接引用不是一个好主意（正如您所发现的那样），因为它使调试变得更加困难。

```
function setIframeHref(iFrameID, href) {
    var frame, cont, doc;

    // Firstly, get the iframe
    frame = window.frames[iFrameID];

    // In some versions of IE, frame.document is the document the iFrame 
    // is in, not the document in the iFrame. Also, some browsers
    // use contentWindow and others contentDocument.
    // In some browsers, contentDocument points to the iFrame window,
    // in others to the document, so...
    if (frame) {
        cont = frame.contentWindow || frame.contentDocument;

        // cont might be the iFrame window or the document
        if (cont) {
            doc = cont.document || cont;

        // For current browsers that don't have the above
        } else {
            doc = frame.document
        }   
    }

    // If have a document, set the vaue of location.href
    if (doc && doc.location) { 
        doc.location.href = href;
    }
} 
```

请注意，如果 HREF 不是来自同一个域或子域，您可能仍然会遇到问题。一些网站不允许他们的页面显示在 iFrame 中，因此一些浏览器会拒绝显示它们，而另一些则会在新选项卡或窗口中打开它们。

# multithreading - Clojure 消息处理/异步，多线程

> ID：12718573
> 
> 赞同：5
> 
> 时间：2012-10-04T00:01:30.013
> 
> 标签：multithreading, asynchronous, clojure, io, idioms

我有一个小的 Clojure 消费者/发布者接收消息，处理它们并将它们发送给其他消费者，所有这些都通过 RabbitMQ。

我已经定义了一个消息处理程序，它在一个单独的线程中处理消息（与主线程分开）。从下面的代码中可以看出，线程同步接收和发送消息，这一切都发生在一个由**lcm/subscribe**函数启动的事件循环中。

那么，问题是，创建这些同步消息处理程序的 N 大小线程池的“Clojure 方式”是什么？我猜非 Clojure 的方式是通过 Java 互操作手动生成多个线程。

此外，考虑到处理不是非常占用 CPU 资源，这是否会加快消息处理速度？让这些消息处理程序异步会更好吗 - 再次考虑到发布比处理花费更多的时间？

最后，我将如何衡量这些竞争方法的性能（我来自 Ruby/Javascript 世界，那里没有任何多线程）？

**注意**：我知道这一切都可以通过水平扩展和产生更多监听消息总线的 JVM 进程来避免，但是由于该应用程序将部署在 Heroku 上，我想在每个测功机中使用尽可能多的资源/过程。

```
(defn message-handler
  [ch metadata ^bytes payload]
  (let [msg (json/parse-string (String. payload "UTF-8"))
        processed-message (process msg)] 
    (lb/publish ch "e.events" "" processed-message)))

(defn -main
  [& args]
  (let [conn          (rmq/connect {:uri (System/getenv "MSGQ")})
        ch            (lch/open conn)
        q-name        "q.events.tagger"
        e-sub-name    "e.events.preproc"
        e-pub-name    "e.events"
        routing-key   "tasks.taggify"]
    (lq/declare ch q-name :exclusive false :auto-delete false)
    (le/declare ch e-pub-name "fanout" :durable false)
    (lq/bind ch q-name e-sub-name :routing-key routing-key)
    (.start (Thread. (fn []
                       (lcm/subscribe ch q-name message-handler :auto-ack true)))))) 
```

* * *

在更基本的说明中......我将如何重构此代码以支持使用附加参数注册消息处理程序回调，如下所示：

```
 (.start (Thread. (fn []
                       (lcm/subscribe ch q-name (message-handler pub-name) :auto-ack true)))))) 
```

然后发布参考：

```
 (lb/publish ch pub-name "" processed-message))) 
```

而不是文字：

```
 (lb/publish ch "e.events" "" processed-message))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T04:27:45.480

对于问题的第二部分，您可以使用部分应用程序，如下所示：

```
(defn message-handler
  [pub-name ch metadata ^bytes payload]
  (let [msg (json/parse-string (String. payload "UTF-8"))
        processed-message (process msg)] 
    (lb/publish ch pub-name "" processed-message)))

(.start 
  (Thread. 
     (fn []
       (lcm/subscribe ch q-name (partial message-handler e-pub-name) :auto-ack true)))))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T00:17:40.903

这是一个非常大的话题，您可能会考虑将这个问题分解为几个不同的问题，但简洁的答案是：[使用`agents`](http://clojure.org/agents).

# c++ - 在 C++ 中获取用户的登录会话

> ID：12718578
> 
> 赞同：0
> 
> 时间：2012-10-04T00:01:42.103
> 
> 标签：c++, windows, winapi, sessionid, pid

我想获取父进程为 explorer.exe 的当前登录会话的句柄。

如果我们以管理员或服务身份运行进程，它将没有登录会话。我想获得登录会话的原因是我有一个程序（.exe），当用户尝试通过（右键单击.exe->以管理员身份运行）打开它时，我想限制打开它并且当一个用户通过管理员打开它我们没有与之关联的登录会话，而当用户通过双击它打开它时，它具有与之关联的登录会话。

我搜索了很多地方，但我只是得到了获取登录 SID 的过程。如果有人想了解更多信息，您可以下载[http://technet.microsoft.com/en-us/sysinternals/bb896653](http://technet.microsoft.com/en-us/sysinternals/bb896653)并在资源管理器下 --> 右键单击​​任何正在执行的程序 --> 安全性。在这里您将找到登录会话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T00:22:19.490

您可以调用[GetCurrentProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683179%28v=vs.85%29.aspx)来获取当前进程的句柄，然后使用它来调用[OpenProcessToken](http://msdn.microsoft.com/en-us/library/aa379295%28v=vs.85%29.aspx)以获得当前进程的访问令牌。一旦你有了它，你就可以调用[GetTokenInformation](http://msdn.microsoft.com/en-us/library/aa446671%28v=vs.85%29.aspx)来请求[TokenSessionId](http://msdn.microsoft.com/en-us/library/aa379626%28v=vs.85%29.aspx)。

**编辑：**

我只是想到了你可以尝试的其他方法：你可以请求[TokenOwner](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379628%28v=vs.85%29.aspx)而不是会话 ID，一旦你有了它，你就有了一个安全描述符。然后，您可以调用[LookupAccountSid](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379166%28v=vs.85%29.aspx)以获取与描述符关联的帐户名称。然后，您可以对照“管理员”或类似的东西进行检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T02:46:40.620

您可以通过使用[`OpenProcessToken`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379295%28v=vs.85%29.aspx)后跟选项来获取与进程关联的登录会话。但是，这不是确定进程是否使用“以管理员身份运行”启动的明智方法，因为没有直接的方法来确定特定登录会话是否被提升。使用“以管理员身份运行”启动的进程不会有登录会话是不正确的。[`GetTokenInformation`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446671%28v=vs.85%29.aspx)`TokenStatistics`

要查明进程是否“以管理员身份运行”，请使用该`TokenElevationType`选项。`TokenElevationTypeFull`当且仅当使用“以管理员身份运行”时，这应该返回。

`TokenElevationType`（一个警告：如果非管理员用户使用“以管理员身份运行”然后输入管理员用户名和密码，我不确定会返回什么。您应该测试这种情况。您可能想要使用`TokenElevation`而不是`TokenElevationType`。）

如果您真正想知道该进程是否具有管理权限，则应[`CheckTokenMembership`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376389%28v=vs.85%29.aspx)改为使用。查找管理员组。[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376389%28v=vs.85%29.aspx)有完全执行此操作的示例代码。

这里的区别是如果 UAC 被禁用（并且用户是管理员）或者用户是本地管理员，您希望发生什么。在这些情况下，没有“以管理员身份运行”选项，所有进程都自动以管理员权限运行。如果要检测这些情况，请使用`CheckTokenMembership`. 如果您只想检测用户明确表示“以管理员身份运行”的情况，请使用`TokenElevationType`.

# eclipse - 关于 Eclipse 项目的 git svn

> ID：12718581
> 
> 赞同：0
> 
> 时间：2012-10-04T00:02:15.887
> 
> 标签：eclipse, git, svn, version-control, git-svn

这是我的 svn repo 的配置：

```
branches
  jack
    proj1
    proj2
  hobbes
    proj1
    proj2
trunk
  proj1 
```

两者`proj1`都是`proj2`Eclipse 项目。我做了一个`git svn -s clone`成功的。不过有一个问题。`git-svn`认为`trunk`是我的主目录（即在`trunk`git 分支中时），这意味着拥有我的`.gitignore`内部`proj1`将无法正常工作。但是我需要有`.gitignore`inside `proj1`，否则当有人从`proj1`（通过`svn`）结帐时，`.gitignore`将不包括在内！

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:37:32.950

您的布局不是标准的（`-s`开关）。您必须指定all`--trunk=<trunk_subdir>`和. 你不应该在你的目录旁边有一个目录。标准布局将是：`--tags=<tags_subdir>``--branches=<branches_subdir>``trunk``.git`

```
proj1
  trunk
  branches
    jack
    hobbes
  tags
proj2
  trunk
  branches
    jack
    hobbes
  tags 
```

我不知道您的 svn 布局是否完全有可能正确描述一个项目，它的分支和标签是`git svn`.

# jquery - 结合bootstrap编写jQuery代码

> ID：12718585
> 
> 赞同：0
> 
> 时间：2012-10-04T00:02:37.993
> 
> 标签：jquery, twitter-bootstrap

jQuery 代码如下：

```
var $seatdiv = $('<div id = "seat'+i+'" class="seat-class"></div>')
.css({left: leftValue + 'px', bottom: bottomValue + 'px'}); 
```

我试图添加这个“引导”代码，但它不起作用：

```
$seatdiv.popover({content:row_label+" "row_name+"  " +column_label+ " "+column_name}); 
```

谁能告诉我应该如何一起编写这些代码？干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:07:49.630

我对引导程序的东西不太熟悉，但只看代码，jQuery 选择器似乎有点不对劲。您应该只通过 ID 引用，所以它看起来更像：

```
var itemID = '#seat' + i;    
$(itemID).css(...);
$(itemID).popover(...); 
```

jQuery 选择器就像 CSS 选择器：[http](http://api.jquery.com/category/selectors/) ://api.jquery.com/category/selectors/ - id 在其名称前使用“#”访问，某个类的项目使用“.”访问 在班级名称之前。

此外，通读文档 (http://twitter.github.com/bootstrap/javascript.html#popovers)，您的 bootstrap.js 副本是否包含工具提示代码？这是必需的。

你所有的其他代码看起来应该对我有用。

# mysql - MySQL 循环遍历表

> ID：12718596
> 
> 赞同：10
> 
> 时间：2012-10-04T00:04:14.077
> 
> 标签：mysql

我想从包含`first_name`列的每个表中输出数据。我将以下过程放在一起，但在我的循环中，mysql 按字面意思解释表名，而不是评估变量`table_name`。解决方法是什么？

```
delimiter //

drop procedure if exists hunt //
create procedure hunt()
begin
    DECLARE done int default false;
    DECLARE table_name CHAR(255);

    DECLARE cur1 cursor for SELECT TABLE_NAME FROM INFORMATION_SCHEMA.COLUMNS 
        WHERE TABLE_SCHEMA = "wholesale_production" and COLUMN_NAME LIKE "%first%" ;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
    open cur1;

    myloop: loop
        fetch cur1 into table_name;
        if done then
            leave myloop;
        end if;
        select * from `wholesale_production`.table_name where created_at >= '2012-10-01';
    end loop;

    close cur1;
end //

delimiter ;

call hunt(); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-04T00:26:49.417

试试这个：

```
delimiter //

drop procedure if exists hunt //
create procedure hunt()
begin
    DECLARE done BOOL default false;
    DECLARE tablename CHAR(255);

    DECLARE cur1 cursor for SELECT TABLE_NAME FROM INFORMATION_SCHEMA.COLUMNS 
        WHERE TABLE_SCHEMA = "wholesale_production" and COLUMN_NAME LIKE "%first%" ;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
    open cur1;

    myloop: loop
        fetch cur1 into tablename;
        if done then
            leave myloop;
        end if;
        set @sql = CONCAT('select * from `wholesale_production`.', tablename, ' where created_at >= ''2012-10-01''');
        prepare stmt from @sql;
        execute stmt;
        drop prepare stmt;
    end loop;

    close cur1;
end //

delimiter ;

call hunt(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-27T10:00:47.387

对上面的内容进行一点编辑以迭代 ahtoug 所有表并选择它们。

```
delimiter //
drop procedure if exists hunt //
create procedure hunt()
begin
    DECLARE done int default false;
    DECLARE table_name CHAR(255);

    DECLARE cur1 cursor for SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES
                  WHERE table_schema ='mbu4u';
   DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
    open cur1;
       myloop: loop
        fetch cur1 into table_name;
        if done then
            leave myloop;
        end if;
        set @sql = CONCAT('select * from `mbu4u`.',table_name);
        prepare stmt from @sql;
        execute stmt;
        drop prepare stmt;
    end loop;

    close cur1;
end //

delimiter // 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-26T10:35:37.213

table_name 是保留标记在“DECLARE table_name CHAR(255);”中使用另一个变量名

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-04T00:16:25.113

在 cur1 你正在使用 TABLE_NAME 那里尝试使用表的真实名称

# php - “IN”功能无法正常工作

> ID：12718598
> 
> 赞同：0
> 
> 时间：2012-10-04T00:04:27.017
> 
> 标签：php, sql, function, search

我想在数据库的结构之一中找到一个值，但我的代码无法正常工作

```
// $dir_id = 2;
// dirs (in database) = 1,2,3

SELECT * FROM `items` WHERE (id='$id' && $dir_id IN(`dirs`)) ORDER BY `id` DESC 
```

但是这段代码找不到 2 它只是在里面找到 1`dirs`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T00:07:13.890

例如，在`IN`您将通过要匹配的 id 列表

```
AND dirs IN (1,2,3,4,5) 
```

用你的例子：

```
SELECT * FROM `items` 
WHERE id='$id' 
AND dirs IN ('$dir_id')
ORDER BY `id` DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:31:12.923

我过去曾这样做过：

```
SELECT * FROM `items` WHERE (id='$id' && $dir_id IN(Select 'column_name' from `dirs`)) ORDER BY `id` DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T11:39:26.300

如果您将字符串存储`"1,2,3"`在`dirs`列中。（*通过你应该规范你的数据库设计。*）

然后你不能使用`IN`，你需要使用**[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)**来代替。

```
SELECT * FROM `items` 
WHERE (id='$id' AND FIND_IN_SET('$dir_id', `dirs`)) 
ORDER BY `id` DESC 
```

# javascript - 我如何找出为什么我的 Javascript 不能在 IE 中运行

> ID：12718599
> 
> 赞同：0
> 
> 时间：2012-10-04T00:04:26.390
> 
> 标签：javascript, html, mouseover, conflict

有什么技巧可以理解为什么，我只是在 Joomla 上运行我的网站 - 最后我不再需要 CMS，所以我将它全部转换为独立格式，它之前在 IE 中运行良好（所以 javascript 被打开正在工作）但是现在当我转到该页面时，它只能在其他所有浏览器中正常运行。

鼠标悬停事件（例如图像更改和鼠标悬停时显示/隐藏 div）不再起作用......我检查了 Adob​​e BrowserLab，但它似乎没用......

有什么旅行/技巧可以用来找出原因吗？

[http://www.chessfactory.com](http://www.chessfactory.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T00:10:23.373

这取决于您要解决的具体问题，但[这个问题](https://stackoverflow.com/questions/3404/javascript-troubleshooting-tools-in-ie)可能会有所帮助。

另外，请参阅[IE 开发人员工具介绍](http://msdn.microsoft.com/en-us/library/ie/gg589507%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:10:56.930

[Internet Explorer 9 开发人员工具参考](http://msdn.microsoft.com/en-us/library/ie/gg589507%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T00:30:51.330

按 f12 获取开发人员工具。尝试清除[缓存](http://www.wikihow.com/Clear-Your-Browser%27s-Cache)。

# android - 自定义软键盘视图未正确显示

> ID：12718602
> 
> 赞同：1
> 
> 时间：2012-10-04T00:04:48.937
> 
> 标签：android, view, ime

我扩展了 Android Sample SoftKeyboard 示例。这个扩展需要在键盘上方添加两个垂直的 AlphabetLinearLayouts（从 LinearLayout 扩展），除了 LatinKeyBoardView。LatinKeyboardView 是标准键盘。

当我从布局中删除这两个侧视图时，行为符合预期 - 在 EditText 内部进行选择会拉起软键盘，并且之前屏幕上的所有视图都向上移动。

通常当键盘纵向弹出时，屏幕上的任何内容都会移动到键盘上方，有效地将一些内容推离屏幕以为键盘腾出空间。

我认为因为我有这两个额外的垂直视图作为我的键盘的一部分，所以框架试图向上推送内容并失败，因为键盘视图占用了太多空间。

我试图弄清楚如何解决这个问题。最好的情况是以某种方式让我的垂直视图显示在原始内容之上，除了显示软键盘所需的内容之外没有进一步的位移。

我构造我的 KeyboardView 如下：

```
@Override public View onCreateInputView() {
  RelativeLayout outer = (RelativeLayout) getLayoutInflater().inflate(
        R.layout.input, null);
  // Set up keyboard view.
  mInputView = (LatinKeyboardView) outer.findViewById(R.id.keyboard);
  mInputView.setOnKeyboardActionListener(this);
  mInputView.setKeyboard(mQwertyKeyboard);
  // Maintain reference to APC.
  mAlphabetViewLeft = (AlphabetColumnLayout)outer.findViewById(R.id.alphabet_list_left);
  mAlphabetViewRight = (AlphabetColumnLayout)outer.findViewById(R.id.alphabet_list_right);

  // Set of references to handle touches.
  mAlphabetViewLeft.setTouchResolver(mTouchResolver);
  mAlphabetViewRight.setTouchResolver(mTouchResolver);

  return outer;
} 
```

我的 input.xml 文件如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
xmlns:app="http://schemas.android.com/apk/res/com.example.android.softkeyboard">

<com.example.android.softkeyboard.AlphabetColumnLayout
    android:id="@+id/alphabet_list_left"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_above="@+id/keyboard"
    android:orientation="vertical"
    app:available_letters="BGHIJKLMNOPUVY"/>

<com.example.android.softkeyboard.AlphabetColumnLayout
    android:id="@+id/alphabet_list_right"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_above="@+id/keyboard"
    android:orientation="vertical"
    app:available_letters="ACDEFQRSTWXZ"/>

<com.example.android.softkeyboard.LatinKeyboardView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/keyboard"
    android:layout_alignParentBottom="true"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"/>

</RelativeLayout> 
```

最后，我使用以下代码设置了 AlphabetColumnLayouts。它的作用是在键盘上方屏幕的每一侧创建一堆字母（我上面提到的两个输入视图）。AlphabetTextView 是一个普通的 TextView，带有一些额外的东西来帮助我以我想要的方式解决触摸问题。char[] 字母使用 input.xml 中的 app:available_letters 样式实例化。

```
public void instantiateViews(char[] letters, int appSize) {
  Context context = mWeakContext.get();
  assertNotNull(context);

  // Set up layout params of parent based on the screen size available,
  // keeping XML-defined params.
  RelativeLayout.LayoutParams lp =
      (RelativeLayout.LayoutParams) getLayoutParams();
  if (lp == null) {
    lp = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,
        RelativeLayout.LayoutParams.WRAP_CONTENT);
  }
  lp.height = appSize/2;
  Log.e(TAG, "LinearLayout = " + lp.debug(""));
  setLayoutParams(lp);

  // Set up the child TextViews.
  final int nLetters = letters.length;
  for (char c : letters) {
    AlphabetTextView tv = new AlphabetTextView(context, this);
    LinearLayout.LayoutParams tlp = new LinearLayout.LayoutParams(
      LinearLayout.LayoutParams.MATCH_PARENT,
      lp.height/nLetters);
    tv.setLayoutParams(tlp);
    //tv.setGravity(Gravity.CENTER);
    tv.setText(String.valueOf(c));
    tv.setTextSize(12);
    tv.setTypeface(Typeface.DEFAULT_BOLD);

    // Add child to Layout.
    addView(tv);
  }
  setOnTouchListener(this);
} 
```

这是我发布的 Android Groups 问题[的链接](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/ebzSdCPx7CM)，并附有一些图片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:32:18.183

你的描述不是很清楚。您实际上看到了什么是错误的？此外，您所描述的听起来像是您想创建自己的候选人版本？实施`onCreateCandidateViews()`不适合您的需求吗？

**更新**

看了截图，我现在明白你的意思了。

我认为你基本上是在痛苦的道路上。您创建的是一个`KeyboardView`大小为 that 的`View`，其高度包括那些`TextView`列（不足为奇）。应用程序如何与输入法交互并不取决于输入法，而是取决于应用程序本身。在这种情况下，消息应用程序似乎将其`android:windowSoftInputMode`设置为`adjustResize`（因此它“坐在”您`KeyboardView`跟随方向更改的顶部 - 我不知道为什么在您的输入法首次显示时它不会调整大小）。

此外，即使您确实设法让底层应用程序正常运行，您也会面临输入法问题可能会从应用程序本身窃取触摸事件（即您`KeyboardView`仍然是位于屏幕底部的矩形，无论那里有什么透明度。

从本质上讲，Android 的 IME 框架是为输入法设计的，它是一个单一的根视图，它粘贴在一个 中`Dialog`，并显示在屏幕底部。可能是最近的框架变化已经偏离了这一点；添加了一个新的`Keyboard`ctor，它允许客户端指定宽度和高度，而不仅仅是假设`Key`尺寸百分比是屏幕宽度/高度。

无论如何，虽然它可能会做其他事情，只是 IME 必须做应用程序期望的事情，这是黄金法则，因为如果您的 IME 不与用户的应用程序互操作，那么他们将不会使用它。

# c# - 用于在字段中选择 3 个类别的 SQL 正确语法

> ID：12718604
> 
> 赞同：1
> 
> 时间：2012-10-04T00:04:52.610
> 
> 标签：c#, sql, wpf, ms-access

我只想知道如何在 MS 访问中创建 SQL 语法。

我想要做的是我要从表中选择名称是`Employee`，其中字段名（位置）等于`Manager`, `Supervisor`,`Acting Supervisor`并且字段名（状态）等于`active`。

我在下面找到的代码不起作用：

```
SQL = "SELECT * FROM `Employee` WHERE `position`= '" + "Manager" + "' OR `position`= '" + "Supervisor" + "' OR `position`= '" + "Acting Supervisor WHERE `status`= '" +"ACTIVE"'"; 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:10:51.080

您实际上并不需要所有字符串连接，您在 之后缺少引号`Acting Supervsior`，并且您不能`WHERE`两次使用关键字 -`AND`改用。

```
SQL = "SELECT * FROM `Employee` WHERE (`position` = 'Manager' OR `position` = 'Supervisor' OR `position` = 'Acting Supervisor') AND `status` = 'ACTIVE'"; 
```

**更新**

`IN`您还可以使用关键字稍微简化逻辑：

```
SQL = "SELECT * FROM `Employee` WHERE `position` IN ('Manager', 'Supervisor', 'Acting Supervisor') AND `status` = 'ACTIVE'"; 
```

# php - 如何覆盖 suhosin 最大值？

> ID：12718609
> 
> 赞同：2
> 
> 时间：2012-10-04T00:05:12.370
> 
> 标签：php, suhosin

suhosin 正在过滤一个重要的 GET 参数。当以下不起作用时，如何覆盖 suhosin？

**public_html/php.ini ：**

```
[suhosin]
suhosin.get.max_value_length = 2048 
```

将 suhosin.get.max_value_length 等设置为 NULL 并使用户会话崩溃。

-

**public_html/.htaccess ：**

```
<IfModule mod_php5.c>
    php_value suhosin.get.max_value_length 2048
</IfModule> 
```

没有效果

-

（系统默认设置为：）

```
suhosin.get.max_value_length = 512
suhosin.get.max_value_length = 100000 
```

被过滤的 GET 参数长 576 个字符。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T00:35:36.787

我们可以通过重新构建 $_GET 来绕过 suhosin

```
// Override suhosin $_GET limitation
  $_GET = array();
  $params = explode('&', $_SERVER['QUERY_STRING']);
  foreach ($params as $pair) {
    list($key, $value) = explode('=', $pair);
    $_GET[urldecode($key)] = urldecode($value);
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T11:48:10.343

在 Debian|Ubuntu 系统上，您可以在`suhosin`以下位置全局设置参数：

```
/etc/php5/conf.d/suhosin.ini 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-01T01:38:35.980

还有一个更短的解决方案：

```
// Rebuild GET variables
parse_str($_SERVER['QUERY_STRING'], $_GET); 
```

# sql - SQL Server JOIN 数据库，如 wordpress

> ID：12718614
> 
> 赞同：0
> 
> 时间：2012-10-04T00:06:07.767
> 
> 标签：sql, sql-server, pivot

我需要制作通用数据库。它应该看起来像下面的例子。

[http://s11.postimage.org/4n6sigf37/Untitled_picture.png](http://s11.postimage.org/4n6sigf37/Untitled_picture.png)

我需要一些动态存储过程或查询。

这是一种存储在我的 sql 中的 wordpress 帖子。

我需要使用 SQL Server。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T01:31:29.543

基本上，您正在尝试在[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx?ppud=4)其中获取列中的值`key`并将每个值转换为自己的列的数据。如果您知道要转换的值，则可以通过 static 对它们进行硬编码`PIVOT`，类似于：

```
select id, name, email, password, state, city
from 
(
  select u.id,
    u.name,
    u.email,
    u.password,
    m.[key],
    m.value
  from users u
  left join usermeta m
    on u.id = m.user_id
) x
pivot
(
  max(value)
  for [key] in ([State], [City])
) p; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d7dbd/3)

但是你说你有一个未知数量的列，所以你会想要使用一个动态的`PIVOT`：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME([key]) 
                    from usermeta
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT id, name, email, password, ' + @cols + ' from 
             (
                select u.id,
                  u.name,
                  u.email,
                  u.password,
                  m.[key],
                  m.value
                from users u
                left join usermeta m
                  on u.id = m.user_id
            ) x
            pivot 
            (
                max(value)
                for [key] in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d7dbd/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:11:28.923

这应该有效：

```
SELECT a.ID, a.Name, a.Email, a.Password
    (SELECT Value FROM UserMeta WHERE Key = 'State' AND User_Id = a.ID) AS State,
    (SELECT Value FROM UserMeta WHERE Key = 'City' AND User_Id = a.ID) AS City
FROM User a 
```

# mysql - 选择相似的 IP 地址 - 忽略最后 3 位数字

> ID：12718615
> 
> 赞同：5
> 
> 时间：2012-10-04T00:06:08.960
> 
> 标签：mysql

我有一个包含用户名和 IP 的表。
我需要获取具有相似 IP 的用户列表 -*忽略最后 3 或 2 或 1 位数字*-

示例：**将 190.200.210.180**
和190.200.210.60**计**为同一个 IP。 将205.50.4.30和**205.50.4.197 算作****同**一个 IP。

 ******IP 的字段类型设置为 varchar，这是我目前无法更改的。

目前我正在使用：

```
SELECT GROUP_CONCAT( username ) names, IPs, COUNT( IPs ) AS Instances 
FROM users
GROUP BY IPs
HAVING (COUNT(IPs) >1)
ORDER BY  `Instances ` DESC 
```

获取相同IP的用户。 ![SQL 语句输出](../Images/8ae6c8183b983fcc545ca38c3eb76d52.png)

是否可以将 IP 的字段设置为 varchar 以做出选择语句来对具有相似 ip 的用户进行分组？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T00:21:31.057

试试这个：

```
SELECT 
    GROUP_CONCAT(username) AS names, 
    SUBSTRING_INDEX(IPs, '.', 3) AS IPs
    COUNT(*) AS Instances 
FROM
    users
GROUP BY 
    SUBSTRING_INDEX(IPs, '.', 3)
HAVING
    COUNT(*) > 1
ORDER BY
    Instances DESC 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T00:14:06.343

函数 SUBSTR_INDEX 使解析 IP 地址变得简单：

```
 SELECT SUBSTRING_INDEX(SUBSTRING_INDEX(y.IPs,'.',1),'.',-1) a,
         SUBSTRING_INDEX(SUBSTRING_INDEX(y.IPs,'.',2),'.',-1) b,
         SUBSTRING_INDEX(SUBSTRING_INDEX(y.IPs,'.',3),'.',-1) c,
         SUBSTRING_INDEX(SUBSTRING_INDEX(y.IPs,'.',4),'.',-1) d
  FROM (SELECT ... FROM users) y 
```

使用别名八位字节 a,b,c,d 作为基础，您应该能够对您的问题应用类似的逻辑并执行您想要的八位字节匹配...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T00:48:38.207

就个人而言，我会去消除最后的***.nnn***部分，如...</p>

```
SELECT
    GROUP_CONCAT(`username` SEPARATOR ', ') AS 'names',
    SUBSTRING(`IPs`,1,(CHAR_LENGTH(`IPs`)-CHAR_LENGTH(SUBSTRING_INDEX(`IPs`,'.',-1))-1)) AS 'roughIP',
    COUNT(*) AS 'Instances'
FROM `users`
GROUP BY `roughIP`
ORDER BY `Instances` DESC 
```******

# scheme - 如何将let表达式转换为cps？

> ID：12718616
> 
> 赞同：0
> 
> 时间：2012-10-04T00:06:12.370
> 
> 标签：scheme, continuation-passing

我想知道如何将 let 表达式转换为像这样的继续传递样式：

```
(let ([a (lambda (x) (+ 1 x))]) (a 4)) 
```

请给我一些例子。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T00:11:34.477

首先，请注意，`let`宏扩展为以下内容：

```
((lambda (a)
   (a 4))
 (lambda (x)
   (+ 1 x))) 
```

所以，现在，让我们对上面的内容进行 CPS 变换，我们得到：

```
((lambda (a k)
   (a 4 k))
 (lambda (x k)
   (+ 1 x k))
 k) 
```

最后一行的是您最初使用`k`的延续。`let`

如果所有这些`k`s 看起来太混乱，这里是相同的代码：

```
((lambda (a k1)
   (a 4 k1))
 (lambda (x k2)
   (+ 1 x k2))
 k0) 
```

其中`k0`是原始的延续。

在这两种情况下，我都假设它`+`也经过类似的 CPS 转换，以继续将加法的结果传递给....

# eclipse - 创建文件时的eclipse默认文件夹

> ID：12718622
> 
> 赞同：2
> 
> 时间：2012-10-04T00:06:50.957
> 
> 标签：eclipse, default

当 eclipse 创建一个文件（比如 feeds.txt）时，该文件会自动保存并从 eclipse 文件夹（不是工作区/项目文件夹）中读取。如何将其更改为工作区/“项目名称”文件夹

顺便说一句，我用这个：

```
private static final String feedFile = " Feeds.txt"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:17:18.110

你用它做什么？..如果这样命名，eclipse应该在项目文件夹中创建一个新文件试试这个

```
import java.io.*;

    try {
        File file = new File("Feeds.txt");
            file.createNewFile();

    } catch (IOException e) {
    } 
```

[http://www.exampledepot.com/egs/java.io/createfile.html](http://www.exampledepot.com/egs/java.io/createfile.html)

# ruby-on-rails - 您如何为 Carrierwave 中的现有图像重新处理图像？

> ID：12718626
> 
> 赞同：0
> 
> 时间：2012-10-04T00:07:05.887
> 
> 标签：ruby-on-rails, carrierwave

我已经`user`在使用创建的数据库中有一个`remote_avatar_url`并处理了两个图像 - 中型和大型版本。但现在用户需要能够用另一个`remote_avatar_url`. 当我这样做时，图像不会被重新处理。有什么我做错了吗？

用户.rb

```
def update
  user = User.find(params[:id])
  user.remote_image_url = "https://www.google.com/images/srpr/logo3w.png"
  user.save
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T18:16:29.393

您可以强制重新处理版本

```
instance = MyUploader.new
instance.recreate_versions! 
```

[https://github.com/jnicklas/carrierwave#recreating-versions](https://github.com/jnicklas/carrierwave#recreating-versions)

# json - MVC 3：JSON 获取请求未完全反序列化

> ID：12718628
> 
> 赞同：1
> 
> 时间：2012-10-04T00:07:23.570
> 
> 标签：json, asp.net-mvc-3

我正在尝试发送一个 GET 请求，参数中包含 JSON 字符串。看起来像这样：

```
var params = { "Url": "http://www.asdf.com", "Users": [{ "Name": "Bob" }, { "Name": "Bill"}] }; 
```

通过 jQuery 的 get 发送，服务器端的查询字符串是这样的：

> Url=http%3a%2f%2fwww.asdf.com&Users%5b0%5d%5bName%5d=Bob&Users%5b1%5d%5bName%5d=比尔

问题是，模型填充了 URL 属性，并且在 users 数组中看到了 2 个项目，但是，用户名保持为空。

有没有办法来解决这个问题 ？

编辑：

这是模型：

```
public class Parameters
    {
        public string Url { get; set; }
        public User[] Users { get; set; }
    }

    public class User
    {
        public string Name { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T02:53:52.440

您可以将**JSON**数据发布到您的 Action 方法，它会正常工作。MVC3 将为 JSON 输入做模型绑定。

确保在进行 ajax 调用时提供**contentType属性值。**

```
var params = JSON.stringify(  { "Url": "http://www.asdf.com", 
                                "Users": [{ "Name": "Bob" }, 
                                          { "Name": "Bill"}] });
$.ajax({
    url: '@Url.Action("AcceptJson","Home")',
    type: 'POST',
    contentType: 'application/json; charset=utf-8',   
    data: params, 
    success: function (r) {

    }
}); 
```

假设您有这样的操作方法

```
[HttpPost]
public ActionResult AcceptJson(Parameters model)
{
    if (model != null)
    {
        //check properties of model
    }        
    return Content("ha ha! Json works! Do something useful");
} 
```

您的模型绑定将正常工作。 ![在此处输入图像描述](../Images/4a5c9bda8c7bb06b06e8aa486ace004a.png)

# solr - 如何使用 ElasticSearch 和/或 Apache Solr 表达不寻常的查询？

> ID：12718630
> 
> 赞同：0
> 
> 时间：2012-10-04T00:07:36.003
> 
> 标签：solr, elasticsearch

在以下情况下如何查询索引。

文档具有以下属性：

```
body: # text
shares: # array of share(s)
    share:
        orgid: # text
        role: # text 
```

以下是一些示例文档：

```
docs = [
    {'body':'hello', 'shares':[{'orgid':'abc.de.1', 'role':'11'}, 
                                       {'orgid':'abc', 'role':'1'}]},
    {'body':'world', 'shares':[{'orgid':'abc.de', 'role':'111'}]},
    {'body':'today', 'shares':[{'orgid':'abc', 'role':'111'}]}
] 
```

使用 ElasticSearch 语法，我想做以下查询：

```
Give me all docs where prefix of 'shares.orgid' = 'abc' and prefix of shares.role = '11'
    Should return: all of them
Give me all docs where prefix of 'shares.orgid' = 'abc.de' and prefix of shares.role = '111'
    Should return: world
Give me all docs where prefix of 'shares.orgid' = 'abc.de.1' and prefix of shares.role = '11'
    Should return: nothing
Give me all docs where prefix of 'shares.orgid' = 'abc' and prefix of shares.role = '111'
    Should return: world, today 
```

当我研究这个时，我发现了以下感兴趣的[信息](http://blog.sematext.com/2012/10/01/solr-vs-elasticsearch-part-3-searching/)：

特别是： **弹性搜索**

> ElasticSearch 允许您使用两种类型的查询 - has_children 和 top_children 查询来对子文档进行操作。第一个查询接受以 ElasticSearch Query DSL 表示的查询以及子类型，它会导致所有父文档具有与给定查询匹配的子文档。第二种类型的查询针对一组子文档运行，然后将它们聚合到父文档中。我们还可以为第二种查询类型选择分数计算。

也很有趣：[http ://www.elasticsearch.org/guide/reference/query-dsl/has-child-query.html](http://www.elasticsearch.org/guide/reference/query-dsl/has-child-query.html)

更多重新索引：[http](http://www.elasticsearch.org/guide/reference/api/index_.html) ://www.elasticsearch.org/guide/reference/api/index_.html 父母和孩子

子文档可以通过在索引时指定它的父文档来索引。例如：

```
$ curl -XPUT localhost:9200/blogs/blog_tag/1122?parent=1111 -d '{
    "tag" : "something"
}' 
```

索引子文档时，路由值会自动设置为与其父文档相同，除非使用 routing 参数显式指定路由值。

编辑：

我越来越近了。这是一个使用我正在尝试的包装器的测试，它演示了一种方法。我将编写一个测试来演示问题/问题的解决方案。[https://github.com/aparo/pyes/blob/master/tests/test_nested.py](https://github.com/aparo/pyes/blob/master/tests/test_nested.py)。我运行了该测试并对其进行了调整以使用 PrefixQuery 并且它可以工作。

根据评论者 javanna，子查询不是前进的方向。以下是使用 pyes 的示例摘录：

```
from pyes.filters import TermFilter, NestedFilter
from pyes.query import FilteredQuery, MatchAllQuery, BoolQuery, TermQuery, PrefixQuery

# from their unit test setup
self.conn.index({"field1": "value1",
                 "nested1": [{"n_field1": "n_value1_1",
                              "n_field2": "n_value2_1"},
                         {"n_field1": "n_value1_2",
                          "n_field2": "n_value2_2"}]},
    self.index_name, self.document_type, 1)
self.conn.index({"field1": "value1",
                 "nested1": [{"n_field1": "n_value1_1",
                              "n_field2": "n_value2_2"},
                         {"n_field1": "n_value1_2",
                          "n_field2": "n_value2_1"}]},
    self.index_name, self.document_type, 2)

self.conn.index({"field1": "value1",
                 "nested1": [{"n_field1": "ni",
                              "n_field2": "11"},
                         {"n_field1": "n_value1_2",
                          "n_field2": "n_value2_1"}]},
    self.index_name, self.document_type, 3)

self.conn.index({"field1": "value1",
                 "nested1": [{"n_field1": "ni.kirmse.104",
                              "n_field2": "111"},
                         {"n_field1": "n_value1_2",
                          "n_field2": "n_value2_1"}]},
    self.index_name, self.document_type, 4)

self.conn.refresh(self.index_name)

# just hacked their test to quickly see if I could do a prefix query on beginning of nested array/list values.

q = FilteredQuery(MatchAllQuery(),
    NestedFilter('nested1',
        BoolQuery(must=[PrefixQuery('nested1.n_field1', 'ni'),
                        PrefixQuery('nested1.n_field2', '111')])))
resultset = self.conn.search(query=q, indices=self.index_name, doc_types=[self.document_type]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T01:08:26.600

好的，我找到了一种使用 pyes 的方法，pyes 是一个 python elasticsearch 包装器。

我在这里抓住了他们的一项测试：[https ://github.com/aparo/pyes/blob/master/tests/test_nested.py](https://github.com/aparo/pyes/blob/master/tests/test_nested.py)

为了回答这个问题，我修改了测试来演示如何实现目标。

```
class NestedSearchTestCase(ESTestCase):
    def setUp(self):
        super(NestedSearchTestCase, self).setUp()

        mapping = {
            'shares': {
                'type': 'nested'
            }
        }
        self.conn.create_index(self.index_name)
        self.conn.put_mapping(self.document_type, {'properties': mapping}, self.index_name)
        self.conn.index({"body": "hello",
                         "shares": [{"orgid": "abc.de.1",
                                      "role": "11"},
                                    {"orgid": "abc",
                                      "role": "1"}]},
                        self.index_name, self.document_type, 1)

        self.conn.index({"body": "world",
                         "shares": [{"orgid": "abc.de",
                                      "role": "111"}]},
                        self.index_name, self.document_type, 2)

        self.conn.index({"body": "today",
                         "shares": [{"orgid": "abc",
                                      "role": "111"}]},
                        self.index_name, self.document_type, 3)

        self.conn.refresh(self.index_name)

    def test_nested_filter(self):
        q = FilteredQuery(MatchAllQuery(),
            NestedFilter('shares',
                BoolQuery(must=[PrefixQuery('shares.orgid', 'abc'),
                                PrefixQuery('shares.role', '11')])))
        resultset = self.conn.search(query=q, indices=self.index_name, doc_types=[self.document_type])
        self.assertEquals(resultset.total, 3)
        # prints: hello, world, today
        print ', '.join([r['body'] for r in resultset])

        q = FilteredQuery(MatchAllQuery(),
            NestedFilter('shares',
                BoolQuery(must=[PrefixQuery('shares.orgid', 'abc.de'),
                                PrefixQuery('shares.role', '111')])))
        resultset = self.conn.search(query=q, indices=self.index_name, doc_types=[self.document_type])
        self.assertEquals(resultset.total, 1)
        # prints: world
        print ', '.join([r['body'] for r in resultset])

        q = FilteredQuery(MatchAllQuery(),
            NestedFilter('shares',
                BoolQuery(must=[PrefixQuery('shares.orgid', 'abc.de.1'),
                                PrefixQuery('shares.role', '11')])))
        resultset = self.conn.search(query=q, indices=self.index_name, doc_types=[self.document_type])
        self.assertEquals(resultset.total, 0)
        # prints: nothing
        print ', '.join([r['body'] for r in resultset])

        q = FilteredQuery(MatchAllQuery(),
            NestedFilter('shares',
                BoolQuery(must=[PrefixQuery('shares.orgid', 'abc'),
                                PrefixQuery('shares.role', '111')])))
        resultset = self.conn.search(query=q, indices=self.index_name, doc_types=[self.document_type])
        self.assertEquals(resultset.total, 2)
        # prints: world, today
        print ', '.join([r['body'] for r in resultset]) 
```

# vb.net - vb.net main 不允许设置私有变量

> ID：12718634
> 
> 赞同：0
> 
> 时间：2012-10-04T00:07:59.037
> 
> 标签：vb.net, variables, scope, main

我有以下代码 - 我想在开始之前预设/初始化子程序中的一些变量。（具体来说，我会读取一个控制文件并预加载一些变量，比如起始文件夹搜索路径）。我该怎么做呢？

公开课形式1

```
<STAThread()> _
Shared Sub Main()
    Dim mainWindow As Form1 = New Form1()
    MessageBox.Show("Hello! I'm exectuing!")

    ' This next line generates an error.
    ' I don't know how to set this variable in Main. 
    ' How do I set up variables, perhaps from a control file ?
    openFileDialog1.InitialDirectory = "c:\mypath"

    Application.Run(mainWindow)

End Sub
Private Sub FindButton_Click(ByVal sender As System.Object, _
           ByVal e As System.EventArgs) Handles FindButton.Click

    ' Displays an OpenFileDialog so the user can select a Cursor.
    Dim openFileDialog1 As New OpenFileDialog()
    ' Filter by All Files
    openFileDialog1.Filter = "All Files|*.*"

    openFileDialog1.Title = "Process a File"

    If openFileDialog1.ShowDialog() = DialogResult.OK Then
        If openFileDialog1.CheckPathExists Then
            If openFileDialog1.CheckFileExists Then
                ' do stuff with the file here 

        Else
            StatusLabel.Text = "Path does not exist"
        End If
    Else
        StatusLabel.Text = "openFileDialog1.ShowDialog error"
    End If

End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T00:33:45.060

因为在 VB 中，“共享”类似于 C# 中的“静态”。而且您正在尝试对对象的实例进行静态引用。

那就是`openFileDialog1.InitialDirectory = "c:\mypath"`试图引用 openFileDialog1 对象实例。将该行移到 Form1 的构造函数（或者可能是其他更合适的事件，oninit 或我不熟悉 winforms 的东西），它应该完成同样的事情。

[MSDN VB 共享 Sope](http://msdn.microsoft.com/en-us/library/4hbsxy95%28v=vs.80%29.aspx)

# android - 适配器类转换异常从 ListView 中删除页脚视图

> ID：12718635
> 
> 赞同：3
> 
> 时间：2012-10-04T00:08:04.020
> 
> 标签：android, android-layout

> **可能重复：**
> [删除页脚视图时适配器类转换异常？](https://stackoverflow.com/questions/12649423/adapter-class-cast-exception-when-removing-a-footer-view)

这是日志：

```
java.lang.ClassCastException: com.test.MyAdapter cannot be caste to  android.widget.HeaderViewListAdapter
at android.widget.ListView.removeFooterView(ListView.java:387)
at com.test.MyActivity.removeFooterViews() 
```

MyAdapter 是一个多列表适配器。真的没有看到删除页脚与将我的适配器转换为 android.widget.HeaderViewListAdapter 有什么关系？这是从哪里来的？

这是 MyActivity.removeFooterViews() 中发生的所有事情

```
 if (myFooterView != null)
        {    
                   myListView.removeFooterView(myFooterView);  
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T00:12:21.173

我们能否看到导致这种情况的代码而不仅仅是异常消息？如果我不得不猜测，我会说你正在调用类似的东西`ListView.getAdapter()`并将返回`ListAdapter`的类型转换为你时使用的类型`ListView.setAdapter()`。

这是一个常见的错误。但是，重要的是要记住，`ListAdapter`您设置的与`ListView`返回给您的不同，因为它在后台使用适配器来支持页眉和页脚。

# delphi - 在 Delphi 上获取 IE 版本 - 注册表解决方案不起作用

> ID：12718636
> 
> 赞同：3
> 
> 时间：2012-10-04T00:08:20.050
> 
> 标签：delphi, internet-explorer, registry

我使用这个函数来获取 IE 版本。但在某些情况下，它找不到这个键并返回 0。还有另一种不依赖注册表的方法吗？

```
function GetIEVersion: string;
var
   Reg: TRegistry;
   S: string;
   i : integer;
begin
   Reg := TRegistry.Create;
   with Reg do
      begin
         RootKey := HKEY_LOCAL_MACHINE;
         OpenKey('Software\Microsoft\Internet Explorer', False);
         if ValueExists('Version') then
          begin
            S := ReadString('Version');
          end
         else
         begin
            S := '0';
         CloseKey;
        end;
         Free;
      end;
    result := s;
end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T00:39:26.520

`TRegistry.OpenKey()`使用该`TRegistry.Access`属性知道打开密钥时要请求什么权限。默认情况下，`TRegistry.Access`设置为`KEY_ALL_ACCESS`，仅限管理员使用。改为使用`TRegistry.OpenKeyReadOnly()`。此外，为了更好地衡量，您可以摆脱`ValueExists()`检查，因为`ReadString()`如果该值不存在，则返回一个空白字符串。

尝试这个：

```
function GetIEVersion: string; 
var 
  Reg: TRegistry; 
begin 
  Result := '';
  Reg := TRegistry.Create; 
  try
    Reg.RootKey := HKEY_LOCAL_MACHINE; 
    if Reg.OpenKeyReadOnly('Software\Microsoft\Internet Explorer') then
    try
      Result := Reg.ReadString('Version'); 
    finally
      Reg.CloseKey; 
    end; 
  finally
    Reg.Free; 
  end;
  if Result = '' then
    Result := '0'; 
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T01:02:05.730

您可以使用获取文件版本信息的方法。首先我们会得到`iexplore.exe`路径。

```
function GetIEPath: string;
var
  Reg: TRegistry;
  Len: Integer;
begin
  Result := '';
  Reg := TRegistry.Create;

  with Reg do
  begin
    try
      RootKey := HKEY_CLASSES_ROOT;
      OpenKeyReadOnly('CLSID\{0002DF01-0000-0000-C000-000000000046}\LocalServer32');
      try
        Result := ReadString('');
      finally
        CloseKey;
        Len := Length(Result);

        if Len >= 2 then
        begin
          if(Result[Len] = '"') then
            Delete(Result, Len, 1);

          if(Result[1] = '"') then
            Delete(Result, 1, 1);
        end
        else
        begin
          Result := '';
        end;
      end;
    finally
      Free;
    end;
  end;
end; 
```

`{0002DF01-0000-0000-C000-000000000046}`是 Internet Explorer 的 CLSID。的默认键值为`LocalServer32`路径`iexplore.exe`。

然后，我们使用一些 API 调用，如 Simon Grossenbacher 在[此链接](http://www.swissdelphicenter.ch/torry/showcode.php?id=27)上演示的那样，来获取文件版本信息。修改他的函数，我们得到这个：

```
function GetIEVersion: string;
var
  IEPath: string;
  VerInfoSize: DWORD;
  VerInfo: Pointer;
  VerValueSize: DWORD;
  VerValue: PVSFixedFileInfo;
  Dummy: DWORD;
begin
  Result := '0';

  IEPath := GetIEPath;
  if IEPath = '' then
    Exit;

  VerInfoSize := GetFileVersionInfoSize(PChar(IEPath), Dummy);
  if VerInfoSize = 0 then
    Exit;

  GetMem(VerInfo, VerInfoSize);
  GetFileVersionInfo(PChar(IEPath), 0, VerInfoSize, VerInfo);
  VerQueryValue(VerInfo, '\', Pointer(VerValue), VerValueSize);

  with VerValue^ do
  begin
    Result := IntToStr(dwFileVersionMS shr 16);
    Result := Result + '.' + IntToStr(dwFileVersionMS and $FFFF);
    Result := Result + '.' + IntToStr(dwFileVersionLS shr 16);
    Result := Result + '.' + IntToStr(dwFileVersionLS and $FFFF);
  end;
  FreeMem(VerInfo, VerInfoSize);
end; 
```

然后，您只需使用，例如，这个：

```
ShowMessage(GetIEVersion); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-11T14:03:26.470

```
function TFuncoesSO.GetIEVersion(AOnlyMajorVersion: Boolean = False): string;
var
   lVersao: string;
   lReg: TRegistry;
begin
   Result := '';

   lReg := TRegistry.Create;

   try

      lReg.RootKey := HKEY_LOCAL_MACHINE;

      if lReg.OpenKeyReadOnly('Software\Microsoft\Internet Explorer') then
      begin
         lVersao := '';

         if lReg.ValueExists('svcVersion') then
         begin
            lVersao := lReg.ReadString('svcVersion');
         end
         else if lReg.ValueExists('Version') then
         begin
            lVersao := lReg.ReadString('Version');
         end
         else if lReg.ValueExists('IVer') then
         begin
            lVersao := lReg.ReadString('IVer');
         end;

         if (lVersao <> '') then
         begin
            if (AOnlyMajorVersion) then
            begin
               if (WordCount(lVersao, ['.']) > 0) then
               begin
                  lVersao := ExtractWord(1, lVersao, ['.']);
               end;
            end;
         end;

         Result := lVersao;

         lReg.CloseKey;
      end;

   finally
      lReg.Free;
   end;
end; 
```

# ios - 通过 Airplay 将图像发送到设备

> ID：12718637
> 
> 赞同：1
> 
> 时间：2012-10-04T00:08:25.620
> 
> 标签：ios, airplay

我有一个支持 Airplay 的应用程序，它可以毫无问题地将音频和视频内容发送到 Airplay。

我的应用程序也有幻灯片支持，我正在尝试找到如何将照片信息发送到 Airplay 选择的设备。这样，当用户浏览照片时，播放图像也会发生变化。我希望在 iOS5.1 中实现这一点。

我知道使用本机照片应用程序可以做到这一点。

这是使用镜像完成的吗？有人可以指出我正确的方向吗？

提前致谢。

# java - JSF 1.2 - 使用为表生成动态 ID 属性

> ID：12718638
> 
> 赞同：4
> 
> 时间：2012-10-04T00:08:42.123
> 
> 标签：java, jsp, jakarta-ee, datatable, jsf-1.2

使用 为表（在循环中）创建动态 ID 属性的最佳方法是什么`<h:dataTable>`？

我们使用以下内容：

*   JSF 1.2
*   JSP
*   Sun 应用服务器 9.0_01
*   JSTL 1.1

我们有一个包含 8 个表的页面。

每个表**必须**有一个唯一的 ID 属性。

这些表是通过迭代包含包含表数据的元素的 Map 来绘制的。

定义表的 ID 属性时应使用 Map 的键。

例子：

如果我的地图包含这些键： `Dog, Cat, Mouse, Bird`

理想情况下，我希望我的表的 ID 属性为：`dog-table, cat-table, mouse-table, bird-table`

随机的东西也会起作用：`t1-table, t2-table, t3-table`

的 ID 属性`<h:dataTable>`不允许 EL 表达式（所以我不能直接访问我的地图键）。

创建我的 ID 属性的最佳方法是什么？

我想到了两种方法，但它们看起来都很老套：

1.  使用 scriptlet 或 JSP 值表达式

2.  使用 jQuery 为每个表分配唯一的 ID（在呈现之后和处理之前）

最终目标是使用 jqGrid 显示这些表（所以我们无论如何都在使用 jQuery）。

任何帮助都是极好的...

* * *

***笔记：***

我们使用辅助类来*模拟*对 Map 的迭代（因为这在 JSF 1.2 中无法完成）。

我们没有实际迭代 Map ，而是生成一个具有*name*和 a的对象列表`List<Foo>`。

名称代表键，列表代表表的行。

* * *

***编辑***：

我最终想到`<h:dataTable>`在这种情况下会生成自己的唯一 ID。

生成的名称足以解决我的问题......

即使我的页面正在运行，我仍然对将来如何处理这种情况感到好奇。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:28:27.113

我想这会帮助你...

使用 ${} 语法的所有表达式都会立即求值。这些表达式只能在模板文本中使用，或者作为可以接受运行时表达式的标记属性的值。

```
 id="${data.map}-table 
```

# ios - iPad UI 设计选项

> ID：12718640
> 
> 赞同：3
> 
> 时间：2012-10-04T00:09:01.157
> 
> 标签：ios, ipad, user-interface

我有一个应用程序，其主布局是一个自定义顶栏（具有类似于 Web 浏览器、后退、前进等的操作）、一个左侧主菜单和一个显示所有信息的中心视图。

所以起初我认为这个应用程序是一个主从应用程序，但顶部栏和导航选项似乎阻止了这个选项。

然后我记得视图控制器包含选项。基本上我会尝试用一个代表顶栏的视图构建根视图控制器，一个表视图作为主菜单，并在中央视图中添加子视图控制器。此选项还允许我构建具有类似布局的视图控制器（左侧菜单和中心显示视图）。

事实是，我不能 100% 确定这是更好的选择，所以我在这里问是否有人有类似的经验，以及你是否认为这是构建这种布局的最佳选择。

干杯!

**EDIT1：**这是代表布局的图像。在内容视图中可能有其他类似于主从视图的视图。

![在此处输入图像描述](../Images/c48fafc10951d834dbf8dc89d3231a30.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:20:46.590

我会这样创建它：

从 UINavigationController 开始。

这将允许您使用顶部的 UINavigationBar 来获取您的顶部菜单栏。

然后，创建一个包含 UITableView 和 UIView（不是控制器）的自定义 UIViewController 并将其推送到导航堆栈上。这允许您从同一个控制器控制两个视图，使它们之间的交互变得微不足道。

另一方面，如果您需要大量更换右视图或左视图并希望它们“独立”，那么您最好按照最初的想法使用视图控制器包含。这稍微复杂一些，但是 UIView 类参考有很好的文档来说明如何完成这个。

# c - C中的图像平滑问题

> ID：12718648
> 
> 赞同：0
> 
> 时间：2012-10-04T00:10:06.167
> 
> 标签：c, matrix, smoothing

好的，所以我正在尝试使用带有均值滤波器的整数编写图像平滑程序。出于某种原因，尽管只有角落部分以及顶部、底部部分正确推杆。

例如，一个有四个邻居的数字应该返回这 4 个邻居的平均值，而不是。具有 3 个邻居的数字应返回这 3 个邻居的平均值。

但这仅适用于角值和顶部底部值。侧面和中间的计算不正确。

```
please enter number of columns and rows
5 5
 1  83  92  66  38
87  27  98  36  80
54  55  33  97   5
26  93  40  79  55
21  34  54  85  25
The smoothed image is
85  40  82  55  73
14  89  51  81  20
71  38  83  24  76
73  40  68  64  52
30  56  53  52  70 
```

如您所见，第一个矩阵中的 1 有 83 和 87 作为其邻居，并在第二个矩阵中正确返回 85，第二个数字 87 有 1,27,54 作为其邻居，但错误地返回 14 作为平均值。有人可以看看我下面的代码，请通过编辑或详细说明来解决这个问题，我已经看了好几个小时了，似乎无法理解这个问题。如果你能解决这个问题，我将永远感激不尽！

```
#include <stdio.h>
#include <stdlib.h>
#include <conio.h>
#include <time.h>
// function that randomly generates numbers 
void fillArray(int a[10][20], int m, int n)
{
 int random;
  int i,j;  
      for (i=0;i<m;i++)
      {
          for (j=0;j<n;j++)
          {
              random=rand()%100;
              a[i][j]=random;
          }
      }
 }
// function that prints the first matrix of random numbers
void printarray (int a[10][20], int m, int n)
{
 int i,j;
for (i=0;i<m;i++) 
{
    for (j=0;j<n;j++)
        {
        printf("%4d", a[i][j]);
        }
        printf("\n");
    }
}
// function that finds the mean for any number and its 4 nieghbors 
void corner1 (int a[10][20], int c[10][20], int n, int m)
{
int i,j;
 for (i=0;i<m;i++) 
{
    for (j=0;j<n;j++)
    {
        if (i<=0&&j<=0){
           c[i][j]=(a[i+1][j]+a[i][j+1])/2;
          }
      }
  }
}
void middle(int a[10][20], int c[10][20], int n, int m)
{
int i,j;
 for (i=1;i<m-1;i++) 
{
    for (j=1;j<n-1;j++)
    {

        c[i][j]=(a[i-1][j]+a[i][j-1]+a[i+1][j]+a[i][j+1])/4;
    }
}

}

void side1 (int a[10][20],int c[10][20], int n, int m)
{
int i,j;
 for (i=1;i<m-1;i++) 
{
    for (j=0;j<n-1;j++)
    {
      if (i>=1&&j<=0){

              c[i][j]=(0+0+a[i-1][j]+a[i+1][j]+a[i][j+1])/3; 
        } 
    }     
 }
}  
void corner2(int a[10][20], int c[10][20], int m, int n)
{
int i,j;
 for (i=0;i<m;i++) 
{
    for (j=0;j<n;j++)
    {

        if (i>=1 && j>=0){

           c[i][j]=(a[i-1][j]+a[i][j+1])/2;
        }
    }
 }
}               
void top (int a[10][20], int c[10][20], int m, int n)
{
int i,j;
 for (i=0;i<m;i++) 
{
    for (j=1;j<n-1;j++)
    {
        c[i][j]=(a[i][j-1]+a[i][j+1]+a[i+1][j])/3;
          }
    }
}

void bottom (int a[10][20], int c[10][20], int m, int n)
{
int i,j;
 for (i=1;i<m;i++) 
{
    for (j=1;j<n;j++)
    {
        c[i][j]=(a[i][j-1]+a[i-1][j]+a[i][j+1])/3;
    }
  }   
}
void side2(int a[10][20], int c[10][20], int m, int n)
{
   int i,j;
 for (i=1;i<m-1;i++) 
{
    for (j=0;j<n;j++)
    {
      c[i][n-1]=(0+0+a[i-1][j]+a[i+1][j]+a[i][j-1])/3;        
    }         
  } 
}     

void corner3(int a[10][20], int c[10][20], int m, int n)
{
int i,j;
 for (i=1;i<m;i++) 
{
    for (j=0;j<n;j++)
    {
        c[i][n-1]=(a[i-1][j]+a[i][j-1])/2;
        }
   }
} 
void corner4(int a[10][20], int c[10][20], int m, int n)
{
int i,j;
 for (i=0;i<m-1;i++) 
{
    for (j=0;j<n;j++)
    {
        c[i][n-1]=(a[i+1][j]+a[i][j-1])/2;
    }
  }
}                             
int main()
{

int a[10][20];
int c[10][20];
int m,n;
srand(time(NULL));
//User input
printf("please enter number of columns and rows\n");
scanf("%d %d", &m,&n);
fillArray(a,m,n);
printarray (a,m,n);
printf("The smoothed image is\n");

corner1(a,c,m,n);
side1(a,c,m,n);
middle (a,c,m,n);
corner2(a,c,m,n);
top(a,c,m,n);
bottom(a,c,m,n);
side2(a,c,m,n);
corner3(a,c,m,n);
corner4(a,c,m,n);
printarray(c,m,n);

getch();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:27:43.410

Welp，看起来我们在同一个班级，因为我目前正在做同一个项目（我看到你之前的问题，你在其中逐字引用了他的作业 PDF）。我还没有完成它，但我知道一个问题是你设置的完全错误并且使用了太多的功能。它应该是一个带有一堆 if 语句的平滑函数。同样，我还没有完成它，所以我没有任何代码可以向您展示，但是当我这样做时，如果可能的话，我会编辑这篇文章（编辑：有可能，所以这就是我要做的） .

编辑：好的，所以我终于完成了。Freaking 让我永远意识到我把边界设置得太大了。我将只发布应该使用的单个平滑函数，而不是发布整个代码。

```
int smoothen(int mArray[100][100], int uX, int uY)  {

int tempArr[100][100];
int x, y;

for(x = 0; x < uX; x++)
{
    for(y = 0; y < uY; y++)
    {
        // Multiple if/else statements to test pixel location
        if ((x == 0) && (y == 0))
        {
            tempArr[x][y] = (mArray[x][y] + mArray[x+1][y] + mArray[x][y+1]) / 3;
        }
        else if ((x > 0 && x < uX-1) && (y == 0))
        {
            tempArr[x][y] = (mArray[x][y] + mArray[x+1][y] + mArray[x-1][y] + mArray[x][y+1]) / 4;
        }
        else if ((x == uX-1) && (y == 0))
        {
            tempArr[x][y] = (mArray[x][y] + mArray[x-1][y] + mArray[x][y+1]) / 3;
        }
        else if ((x == uX-1) && (y > 0 && y < uY-1))
        {
            tempArr[x][y] = (mArray[x][y] + mArray[x-1][y] + mArray[x][y+1] + mArray[x][y-1]) / 4;
        }
        else if ((x == uX-1) && (y == uY-1))
        {
            tempArr[x][y] = (mArray[x][y] + mArray[x-1][y] + mArray[x][y-1]) / 3;
        }
        else if ((x > 0 && x < uX-1) && (y == uY-1))
        {
            tempArr[x][y] = (mArray[x][y] + mArray[x+1][y] + mArray[x-1][y] + mArray[x][y-1]) / 4;
        }
        else if ((x == 0) && (y == uY-1))
        {
            tempArr[x][y] = (mArray[x][y] + mArray[x+1][y] + mArray[x][y-1]) / 3;
        }
        else if ((x == 0) && (y > 0 && y < uY-1))
        {
            tempArr[x][y] = (mArray[x][y] + mArray[x+1][y] + mArray[x][y+1] + mArray[x][y-1]) / 4;
        }
        else if ((x > 0 && x < uX-1) && (y > 0 && y < uY-1))
        {
            tempArr[x][y] = (mArray[x][y] + mArray[x+1][y] + mArray[x-1][y] + mArray[x][y+1] + mArray[x][y-1]) / 5;
        }

    }
}
printArray(tempArr, uX, uY);  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:26:56.180

您在某些功能中切换了尺寸：

```
void middle(int a[10][20], int c[10][20], int n, int m)
...
void side1 (int a[10][20],int c[10][20], int n, int m)
...
void corner2(int a[10][20], int c[10][20], int m, int n) 
```

# c# - 拆分一串数字和单词c#

> ID：12718655
> 
> 赞同：1
> 
> 时间：2012-10-04T00:10:40.330
> 
> 标签：c#, split

嗨，我想拆分一个由空格和表单分隔的字符串， `1010 FirstName MidName LastName` 并在 C# MVC4 控制器中使用整数 1010 此字符串将从隐藏的表单元素解析到控制器

```
 var str = "1010 Firstname Midname LastName";

            string[] parts = str.Split(' ');
            if (parts != null)
            {
                int idpart = parts[0];
            } 
```

我收到错误无法将类型字符串隐式转换为 int 在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T00:17:14.647

```
var str = "1010 Firstname Midname LastName";              
string[] parts = str.Split(' ');             
if (parts != null)             
{                 
    int idpart = Convert.ToInt32(parts[0]);
    string firstpart = parts[1];             
    string midpart = parts[2];
    string lastpart = parts[3];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:17:37.107

使用 Split 方法 - 接受一个分隔符数组并返回一个字符串数组。

```
private static char[] splitArray = { ' ' };
string[] results = input.Split(splitArray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T00:30:19.650

异常是由以下行引起的：

```
int idpart = parts[0]; 
```

因为parts[0] 将是一个字符串，你不能直接将它分配给一个int。

你需要告诉它把字符串解析成这样的int：

```
int idpart = int.Parse(parts[0]); 
```

请注意，如果您传递的字符串不是解析器可以转换为整数的格式，这将引发异常，因此您需要将某种形式的异常处理放入或使用[int.TryParse 方法](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T00:30:23.900

您不能简单地将字符串转换为 int，您必须使用 int.Parse() 显式转换

```
string str = "1010 FirstName MidName LastName";
var splits = str.Split(' ');
var number = int.Parse(splits[0]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T07:16:16.657

最佳使用 int.TryParse().. 你不会被抛出任何异常。

var str = "1010 名字中间名姓氏";

```
 var splittedData = str.Split(' ');

            if (splittedData != null && splittedData.Length > 0)
            {
                int _number;

                if (!int.TryParse(splittedData[0], out _number))
                {
                    Console.WriteLine("Not a number");
                }
                else
                {
                    Console.WriteLine("Got this number - {0}", _number);
                }
            }

            Console.ReadLine(); 
```

# clojure - 为什么Java抱怨找不到命名空间？

> ID：12718658
> 
> 赞同：6
> 
> 时间：2012-10-04T00:10:52.733
> 
> 标签：clojure, leiningen

我正在尝试在 Windows 7 上设置 lein 构建环境，并从 Linux 上成功的构建环境中复制了文件。我已经安装了 maven 和 jdk 以及 lein。

HOME 指向`c:\Users\cnorton`maven 目录所在的位置。

尝试运行 lein repl 或 lein compile 时出现此错误，并且无法弄清楚我做错了什么。

原因：java.lang.Exception：加载“/repl_test/core”后找不到命名空间“repl-test.core”

这是project.clj

```
(defproject repl-test "0.0.1-SNAPSHOT"
  :description "TODO: add summary of your project"
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [org.clojure/clojure-contrib "1.2.0"]
                 [clojure-csv/clojure-csv "1.2.4"]
                 [org.clojure/tools.cli "0.1.0"]
                 [clj-http "0.1.3"]]
   :aot [repl-test.core]
   :main repl-test.core) 
```

这是 src/repl_test/core.clj 的第一部分

```
(ns repl-test.core
  (:gen-class)
  (:use clojure.contrib.command-line)
  (:require [clojure.contrib.string :as cstr])
  (:require [clojure.contrib.trace :as ctr])
  (:require [clojure.string :as sstr])
  (:use clojure-csv.core)) 
```

如果有人可以将 project.clj 和 core.clj 的标题作为答案发布，我会非常有帮助，它允许该项目成为主要项目。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T05:34:07.220

我会避免在您的文件夹名称和名称空间中使用“-”，它实际上已转换为“_”，但并非在所有地方。

以下内容可能适合您，也可能不适合您。我让你的骨架项目与：

```
(defproject st1 "1.0.0-SNAPSHOT"
:description "TODO: add summary of your project"
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [org.clojure/clojure-contrib "1.2.0"]
                 [clojure-csv/clojure-csv "1.2.4"]
                 [org.clojure/tools.cli "0.1.0"]
                 [clj-http "0.1.3"]]
                 :aot [repl_test.core]
                 :main repl_test.core) 
```

与您相同的 clj 文件：

```
 (ns repl_test.core
  (:gen-class)
  (:use clojure.contrib.command-line)
  (:require [clojure.contrib.string :as cstr])
  (:require [clojure.contrib.trace :as ctr])
  (:require [clojure.string :as sstr])
  (:use clojure-csv.core)) 
```

我用下划线将文件夹**repl-test**重命名为**repl_test**。

然后

```
 lein compile 
```

和

```
 lein run 
```

出于好奇，我还查看了[clojure-csv](https://github.com/davidsantiago/clojure-csv/tree/master/src)，他们在所有地方都使用“-”，除了在文件夹名称中，所以可能有幸复制他们所做的事情。

另外，引用另一个关于 clojure 命名空间的[SO 问题：](https://stackoverflow.com/questions/2223190/what-are-common-conventions-for-using-namespaces-in-clojure)

“还请注意，您不得在命名空间名称中使用下划线或在文件名中使用连字符，并且无论您在命名空间名称中使用连字符的任何位置，都必须在文件名中使用下划线（以便定义 ns my.cool-project在名为 my) 的目录中名为 cool_project.clj 的文件中。”

并且来自 java 包的[Clojure 编程 Wiki](http://en.wikibooks.org/wiki/Clojure_Programming/Concepts)部分：“Clojure 尊重目录和文件的 Java 命名约定，但命名空间名称的 Lisp 命名约定。因此，Clojure 命名空间 com.my-app.utils 将存在于名为 com/my_app 的路径中/utils.clj。特别注意下划线/连字符的区别。”

# excel - 按 Excel 数据透视表中的“总计”列排序？

> ID：12718663
> 
> 赞同：16
> 
> 时间：2012-10-04T00:11:22.797
> 
> 标签：excel, pivot-table, excel-2011

根据Mac CPub 对 Excel 2011（对于 OS X）[在此处](http://mac2.microsoft.com/help/office/14/en-us/excel/item/f895e0b6-488f-4910-9653-b4dc7c9dca34)找到的解释，您可以按以下方式对“总计”列进行排序：“... Excel for Mac 没有“按总计排序”选项，***但您可以选择总计列，然后使用功能区上的排序按钮执行此操作***。”

[当我尝试执行此功能时，不幸的是，正如您在这个简短的截屏视频](http://screencast.com/t/K2mE8tvK6zJ)中看到的那样，它似乎被禁用了。

关于如何允许按总计排序的任何想法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-04T07:45:31.163

您应该只选择数据透视表的数据部分，而不是页眉或页脚（在您的截屏视频中，从 E5 开始到 A？）。然后，您可以使用标准排序选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-26T15:13:49.027

您可以更改行标签的排序选项。单击行标签并选择*更多排序选项*。在此菜单中选择*升序*或*降序*，然后从下拉列表中选择*XXXX 计数。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-27T01:18:17.607

这是修复：我遇到了同样的问题，发现我必须从工作表最右侧的数据透视字段选择框的“行”框中删除三个字段中的第三个。然后我可以按总计排序（只需右键单击该列）。然后，当我将第三个字段添加回“行”框中时，它在每个级别中都正确排序。仅供参考，要查看字段列表框，您必须单击数据透视表。

# asp.net - 为什么在尝试使用 NuGet 包构建解决方案时，Visual Studio 会给出拒绝访问、代码 5 错误？

> ID：12718669
> 
> 赞同：14
> 
> 时间：2012-10-04T00:12:11.497
> 
> 标签：asp.net, visual-studio-2010, visual-studio, nuget

我正在尝试构建一个引用 NuGet 包的 Visual Studio 解决方案。我已经从别人的计算机上复制了解决方案（通过 Git，但我不知道复制的方法在这里是否重要）。当我尝试构建解决方案时，我不断收到此命令：

```
Error 3 The command ""D:\Custom Work\MySolution\Project\.nuget\nuget.exe" install
    "D:\Custom Work\MySolution\Project\AAIA.Model\packages.config" -source ""
    -RequireConsent -o "D:\Custom Work\MySolution\Project\packages"" exited with code 5.
    Please verify that you have sufficient rights to run this command. 
```

我检查了所有文件夹的权限，它们似乎都很好。也没有共享违规；Visual Studio 2010 是唯一涉及这些文件和文件夹的程序。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-09-12T18:48:15.353

您的克隆解决方案可能没有传递 nuget.exe 文件的 Windows“执行”权限。

如果您在 cygwin 中使用 git clone 进行克隆，然后尝试使用 Visual Studio 打开和构建，则不会为 nuget.exe 正确设置权限。它的“linux”不支持windows的可执行权限。如果您使用 git-extensions 之类的东西进行克隆，则可以避免此问题，因为它是为 Windows 构建的并支持可执行权限。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-21T01:30:08.130

或者在我的情况下，`<solution root>\.nuget\nuget.exe`文件已损坏。

1.  删除`<solution root>\.nuget\nuget.exe`文件
2.  (re)enable NuGet package restore (VS2012 menu => "project" => enable nuget package restore)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-02-16T11:51:11.020

可执行位问题与 Cygwin、Linux 或其他无关。

## 理论上你需要知道的一切

Windows 和 Linux（以及所有 Unixen）都有可执行程序文件的概念，这些文件在文件系统上被标记为此类文件。当 git 在工作空间中检出一棵树时，它会将其 blob 写入文件，并根据存储在树对象中的“模式”设置它们的[权限。](https://en.wikipedia.org/wiki/File_system_permissions)

“模式”基于[Unix 模式](https://en.wikipedia.org/wiki/Modes_%28Unix%29)，但受到[更多限制](https://www.git-scm.com/book/en/Git-Internals-Git-Objects)，大概是为了便于移植（只有三种模式：普通文件、可执行文件和符号链接）。Windows 实现使用它来相应地设置[NTFS 文件权限](https://msdn.microsoft.com/en-us/library/bb727008.aspx)不会有任何问题。

这应该是故事的结局。可执行文件是 git 存储库中标记的可执行文件，并在所有用户系统上自动设置。

## Visual Studio 怪癖

但是，VS 团队*显然*决定自动将一些（全部？）新签出的文件设置为可执行文件，即使它们在存储库中没有被标记为可执行文件。理论上听起来不错，很多人忘记或不真正理解“权限”的概念。

*我说“显然”是因为它似乎与继承的权限有关。可能是他们没有真正的意图这样做，而是忘记自己设置适当的权限。*

在实践中，这意味着*更多的*人会忘记并保持遗忘，只要他们都专门使用 Visual Studio 来操作存储库。那些使用任何其他工具（包括官方 git 命令）的人将无法开箱即用地执行程序，并且会被错误地告知使用 Visual Studio 而不是在存储库中*实际将文件标记为可执行文件*.

相反，在使用 VS 将文件从存储库中检出时，似乎没有办法**不自动将文件设置为可执行文件。**

以这种方式设置时，有一些巫毒会阻止 git 检测实际权限。这可能与权限继承和特殊权限有关。将文件资源管理器的安全窗格用于文件的属性以及 git 的源代码，您可能能够确定这是功能还是错误。（IMO，这一点没有实际意义，因为我认为工作空间中的权限应该与存储库中的权限相匹配，他们在使用官方 git 命令时会这样做。）

## 手动操作权限

使用 Windows 的文件资源管理器，使用文件属性窗口及其安全窗格。使用 Cygwin 或任何其他 Unix-y 环境，使用`chmod`.

## Visual Studio 用户的真正修复

```
chmod +x .nuget/NuGet.exe 
```

（或者使用文件资源管理器以 git 检测到它的方式正确设置可执行权限 - 就像`chmod`那样。）

git 应该检测到更改并将其解释为模式更改。`git diff`产量：

```
diff --git a/.nuget/NuGet.exe b/.nuget/NuGet.exe
old mode 100644
new mode 100755 
```

现在**提交**它并将其推送到上游，这样其他人就不必这样做了。

将来，请尝试改用官方`git clone`命令或更好地研究此命令，以便向能够以理智的方式修复此问题的人写一份适当的错误报告。可能是双方都有事情要做（git 可能需要更智能地了解 Windows 上的继承权限，而 Visual Studio 在结帐时可能需要更加小心设置）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-03T14:59:21.763

确保您的`.nuget\nuget.exe`文件具有可执行权限。通过复制，您可能已经更改了所有权或权限。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-04T00:12:11.497

此处拒绝访问 NuGet 的是 Visual Studio 配置设置。

1.  在 VS 中，转到**Tools > Options**。
2.  向下滚动到**包管理器**节点。
3.  确保选中**允许 NuGet 在构建期间下载丢失的包。**
4.  单击**确定**。
5.  尝试重建您的解决方案。

# c# - 带有 CRM 插件的备忘录模式

> ID：12718674
> 
> 赞同：0
> 
> 时间：2012-10-04T00:12:39.087
> 
> 标签：c#, .net, plugins, dynamics-crm, dynamics-crm-2011

> **可能重复：**
> [CRM 2011 工作流程：查找以前的值](https://stackoverflow.com/questions/6211846/crm-2011-workflows-finding-the-previous-values)

如何获取 CRM 插件内实体的当前值？

我知道您可以通过以下行获取“更新”实体，但我需要获取其现有值的快照。

```
 var updatedEntity = (Entity) context.PluginExecutionContext.InputParameters["Target"] 
```

获取现有值的最佳方法是什么？如果这是一个数据库触发器，我正在寻找该`DELETED`表。

# nservicebus - Azure Worker Role 中托管的 NServicebus 无法正常工作

> ID：12718675
> 
> 赞同：0
> 
> 时间：2012-10-04T00:12:40.307
> 
> 标签：nservicebus, azure-worker-roles

对于这个问题，我可能遗漏了一些明显的东西，但我似乎无法将端点部署为 azure worker 角色以在生产环境中工作；它在本地 azure 模拟器下运行良好。

以下是我使用 nservicebus 示例附带的示例项目之一复制此问题所采取的步骤：

1.  从 3.2.8 版本下载的示例。
2.  使用了 AzurePubSub 示例并更改了 Web 和辅助角色中的配置以使用实际存储位置而不是本地开发存储。
3.  使用本地计算模拟器在本地运行，以验证 Web 角色和辅助角色是否按预期工作。
4.  部署到生产环境。web 角色按预期工作并将消息放置在队列中，但辅助角色不处理消息。

没有例外，worker 角色按预期部署和启动；它似乎没有处理消息。

我希望我错过了一些简单的东西，并且以前有人遇到过这个问题。

**更新**：我看到以下日志条目在角色的事件日志中。问题仅仅是默认日志配置文件试图访问 127.0.0.1:10000 吗？

这是示例配置使用的配置文件：

```
NServiceBus.Production NServiceBus.OnAzureTableStorage NServiceBus.WithAzureStorageQueues 
```

这是完整的事件日志条目：

```
An unhandled exception occurred. Type: System.Exception Process ID: 2512
Process Name: WaWorkerHost
Thread ID: 6
AppDomain Unhandled Exception for role OrderService_IN_0
Exception: Exception when starting endpoint, error has been logged. Reason: Unable to connect to the remote server
   at NServiceBus.Hosting.GenericHost.Start()
   at NServiceBus.Hosting.Azure.RoleEntryPoint.Run()
   at Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.StartRoleInternal()
   at Microsoft.WindowsAzure.ServiceRuntime.Implementation.Loader.RoleRuntimeBridge.<StartRole>b__1()
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart()

Inner Exception: Unable to connect to the remote server
   at Microsoft.WindowsAzure.Diagnostics.Management.RoleInstanceDiagnosticManager.<.ctor>b__2(Object sender, ErrorEventArgs args)
   at Microsoft.WindowsAzure.Diagnostics.ControlChannel.GetControlContainer()
   at Microsoft.WindowsAzure.Diagnostics.ControlChannel.set_StartupInfo(DiagnosticMonitorStartupInfo value)
   at Microsoft.WindowsAzure.Diagnostics.Management.RoleInstanceDiagnosticManager..ctor(CloudStorageAccount storageAccount, String deploymentId, String roleName, String roleInstanceId)
   at NServiceBus.Integration.Azure.AzureAppender.ConfigureAzureDiagnostics()
   at NServiceBus.SetLoggingLibrary.Log4Net(Configure config, Object appenderSkeleton)
   at NServiceBus.SetLoggingLibrary.Log4Net[TAppender](Configure config, Action`1 initializeAppender)
   at System.Collections.Generic.List`1.ForEach(Action`1 action)
   at NServiceBus.Hosting.Profiles.ProfileManager.ActivateProfileHandlers()
   at System.Collections.Generic.List`1.ForEach(Action`1 action)
   at NServiceBus.Configure.Initialize()
   at NServiceBus.Hosting.GenericHost.Start()

Inner Exception: No connection could be made because the target machine actively refused it 127.0.0.1:10000
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout, Exception& exception) 
```

**更新 - 解决方案：** 问题是我用作基线的示例项目使用了较旧的连接字符串标识符名称“Diagnostics.ConnectionString”，并且 NServiceBus Azure Logging Appender 正在寻找指定诊断存储位置的较新的天蓝色标识符“Microsoft .WindowsAzure.Plugins.Diagnostics.ConnectionString。” 重命名标识符解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T06:46:31.467

我是 nservicebus 中 azure support 的作者。让我帮你解决这个问题，一定是出了问题，有几种方法可以找出问题所在。

1.  使用 RDP 登录到工作进程，并检查机器事件日志中是否存在源自工作进程的异常。
2.  使用 windows azure 诊断部署并检查写入表存储的日志
3.  使用 Intellitrace 部署并从工作人员下载堆栈跟踪以进行远程调试会话。

# c - 如果函数没有返回，执行堆栈会发生什么？

> ID：12718678
> 
> 赞同：1
> 
> 时间：2012-10-04T00:13:26.317
> 
> 标签：c, operating-system

在 C 中，如果函数不返回，线程的执行堆栈会发生什么？

```
void funcB() __attribute__ ((noreturn));

int funcA (...)
{
   // do stuff
   funcB();
   // do more stuff
} 
```

这种情况的一个例子是，funcA 是创建新线程的内核函数，而 funcB 是将新线程切换到用户模式并让它运行的内核代码。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T00:23:56.137

你见过这个吗？[http://gcc.gnu.org/onlinedocs/gcc-4.3.2//gcc/Function-Attributes.html](http://gcc.gnu.org/onlinedocs/gcc-4.3.2//gcc/Function-Attributes.html)

正如它在关于的部分中所说`noreturn`：

> 不要假设调用函数保存的寄存器在调用 noreturn 函数之前已恢复。

我假设这意味着不能保证，例如，堆栈指针（或其他堆栈帧元素）将在`noreturn`函数完成后恢复。

# javascript - 空 jQuery 字符串不为空

> ID：12718679
> 
> 赞同：1
> 
> 时间：2012-10-04T00:13:30.477
> 
> 标签：javascript, jquery, string, conditional

有人可以向我解释一下吗？如果我正在尝试做某事`key != ''`

```
var key = "";
if($('div[title="Keyword"]').text() != '') {
  key = $('div[title="Keyword"]').text().trim(); 
}

//this always alerts
if (key != '') { alert(key); } 

//this never alerts
if (!key) { alert(key); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:51:30.777

我在评论中说它可能是一个不被`trim`. 好吧，在您进一步评论之后，很明显情况就是如此。它是[U+200B 零宽度空格字符](http://www.fileformat.info/info/unicode/char/200b/index.htm)。它可能来自 jsfiddle（我打赌你从那里粘贴了一些东西）。

# flash - Tree组件目录列表的智能排序

> ID：12718682
> 
> 赞同：1
> 
> 时间：2012-10-04T00:13:41.293
> 
> 标签：flash, apache-flex, air, flex4.5

*（我继承了一个 Flex/AIR 项目，自从我使用 Flex 以来已经有一段时间了，如果这是一个基本问题，请原谅我）*

我有一个 Flex/AIR 项目，它加载图像文件名的目录并将它们呈现在 Tree 组件中。然后用户可以单击文件名来显示图像。

我很难理解为什么 Flex Tree 组件视图中的排序（文件名的顺序）与（OSX）目录视图不同。OSX 正在做聪明的事情，并对数字和 alpha 值进行排序。Flex Tree 并没有那么聪明……正如下面的屏幕截图所示。

我一直在寻找 spark Sort 和 SortField 集合，但尚不清楚如何使用它们。是否有一个简单的解决方案来进行我需要的那种排序：告诉 Flex 考虑文件名的数字部分的方法？

**更新：**

猜猜我正在猎杀蛇……称为“自然排序”（[sorting-for-humans-natural-sort-order](http://www.codinghorror.com/blog/2007/12/sorting-for-humans-natural-sort-order.html)）……

![在此处输入图像描述](../Images/737c056d6636f3ef232f220320a799d8.png) ![在此处输入图像描述](../Images/ba5c2208a7eab4080bfe0cde31d4af0f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:47:16.713

as3-commons-lang 项目中已经存在“自然”排序的功能。在`StringUtils`类中，查找[naturalCompare()](http://www.as3commons.org/as3-commons-lang/asdoc/org/as3commons/lang/StringUtils.html#naturalCompare%28%29)函数。

现在剩下要做的就是将其应用于层次结构中的所有集合。您必须递归遍历树中的所有节点，并对每个节点的`children`.

# php - PHP：让用户只下载购买的文件

> ID：12718685
> 
> 赞同：5
> 
> 时间：2012-10-04T00:14:23.277
> 
> 标签：php, redirect, download, client-side

我预见到允许客户通过 PayPal 从我这里购买某些内容的问题。我将提供多种无形商品。当有人完成对其中一种商品的购买时，他们将被重定向到一个登陆页面——我们称之为“thank_you.php”——它将自动排队下载并允许链接排队下载以防万一自动启动。这将通过将唯一的项目 ID 传递给下载页面（“download.php”）来完成。

此方法本质上是对这些线程的最佳答案的模仿：

[PHP生成文件以供下载然后重定向](https://stackoverflow.com/questions/822707/php-generate-file-for-download-then-redirect)

[一个 PHP 脚本让用户从我的网站下载文件而不显示我网站中的实际文件链接？](https://stackoverflow.com/questions/3252387/a-php-script-to-let-users-download-a-file-from-my-website-without-revealing-the)

但是，我担心一旦用户在“thank_you.php”上他们可以下载他们的项目，然后使用 Firebug（或等效）来编辑项目 ID 并下载另一个不同的项目：

```
<a href="download.php/38a205ec300a3874c867b9db25f47c61">Download Here</a> 
```

至

```
<a href="download.php/7c8ddc86c0e4c14517b9439c599f9957">Download Here</a> 
```

我需要你们在这方面比我做得更好的人的想法和帮助：我可以实施什么（以及如何）作为仍然允许相同的客户访问和休闲的解决方案，同时防止这种操纵？

**编辑**：ID 哈希用于在整个站点中预览和引用该项目，我不怕人们猜测，而是他们在单独的选项卡中浏览该站点以获取其他 ID 并继续下载不同的项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T00:27:30.933

虽然这些其他答案假设您有一个带有用户名的会话，但听起来好像您刚刚为文件创建了一个哈希以隐藏文件名。换句话说，您还不如在键盘上放一把猴锤，并将其作为您拥有的每个文件的文件名。

然后听起来您担心用户会过来，敲击键盘，并以某种方式最终与您的猴子所做的完全匹配。这不太可能。

更有可能有人会复制并粘贴您的链接并分享它。听起来好像您需要在身份验证方案中至少再添加一层（例如，用户名和项目 ID 的哈希值），或者链接一旦使用就会过期。

从您的评论来看，听起来好像您正在使用哈希来识别网站另一部分的项目，这意味着用户可以通过查看网站另一部分的源来确定项目的哈希。在这一点上，你通过默默无闻的安全很像我在与某人闲聊并说“鱼和猫正在亲热”时使用暗语（例如“鱼意味着约翰，猫意味着丽莎”），同时拥有一张纸旁边的纸上写下任何人都可以看到的映射。听起来您只是想隐藏文件名，以免人们猜到它们。这被称为[通过默默无闻的安全性](http://en.wikipedia.org/wiki/Security_through_obscurity)，并不会真正为您带来太多收益。

大多数其他答案都假设一个项目存在，并且它将有多个不同的哈希指向它（例如，file1，hash1、hash2 和 hash3 都是指向它的有效链接）。在这种情况下，他们创建了多个散列，并且每个散列对于某个用户 + 项目都是唯一的。我认为他们还假设网站上的每个人都将下载项目称为`item1`not `hash1`，这听起来像你在做什么？

您最好只在代码中的某处创建一个字典，该字典在项目名称和散列之间具有映射，然后仅在下载页面上，将散列替换为名称。同样，这只是通过默默无闻的安全性，可以共享链接，但人们无法在浏览您的网站时获得哈希值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T00:22:26.483

我原来的答案：

您将需要存储（在数据库或会话变量中）用户可以访问的项目，您将为每个项目生成一个唯一的随机令牌。该令牌将用于识别购买的物品。将令牌传递到他们将能够下载的页面（在会话变量、POST 参数中，或者作为 url 中的最后一个选项，即 GET）。在您需要下载的页面中，您将使用会话信息查询数据库/会话变量，以识别客户和传递的令牌（但是您传递了它）并检索要下载的文件。

如果您需要保留已购买项目的列表以供重新下载，您也可以这样做，但请记住在用户请求下载时再次创建令牌。如果您愿意，还可以添加到期日期。

* * *

现在我已经提到了几个替代方案，然后再次根据引用答案的性质，我想您将需要更多详细信息来说明如何做到这一点。

也许 ernie 是对的，我不应该假设你有一个会话。也许我应该告诉你如何做一个会话。

所以我将采取其中一种实现方式，最简单的方式。

* * *

```
<?php
    //Oh, I'm in a PHP page...
    //check if there is not a session
    if (session_id() != '')
    {
        //Ok, there is no session, let's create one
        session_start();
    }
    //Now we are sure there is a session
    //Let's store in the session the id of the file I want to allow to download
    $_SESSION['download'] = GetFileId();
    //GetFileId will do some mambo jambo expecto patronum to return an id
    //The id will be 38a205ec300a3874c867b9db25f47c61 or something
?> 
```

现在在下载页面......

```
<?php
    //Oh, I'm in another PHP page...
    //check if there is not a session
    if (session_id() != '')
    {
        //no session? screw you, no download for you
        header('Location: sorry.php');
    }
    else
    {
        //Now we are sure there is a session
        //Let's get from the session the id of the file I want to allow to download
        $id = $_SESSION['download'];
        //Now get the url to redirect to allow the download
        $url = GetUrl($id);
        //GetUrl will do some mambo jambo expecto patronum to return an url
        //Ok, now we are going to return that file...
        //So put the correct MIME type
        header('content-type: image/gif');  //if it is a gif...
        //Load the file
        $contents = file_get_contents($url); 
        echo $contents;
        //That's the only output
        exit();
     }
?> 
```

请注意，我只允许从 PHP 访问该文件，因此我可以先验证用户是否具有访问权限。您不应该允许用户只输入 url（即使他猜不到）并访问文件。因此，如果您正在运行您的服务器，您希望将这些文件放在服务器 Web 文件夹之外，或者如果您使用的是使用 .htaccess（或您的主机提供的其他机制）保护它们的主机。

* * *

评论这个解决方案：

它简单，易于实施。然而它也有一些缺点：

*   如果会话在下载之前终止，则用户将损失金钱*。
*   没有明确的方法实现重新下载。
*   它仍然容易受到会话劫持（我知道，这很牵强，但最好是安全的）。

*：假设连接丢失，并且会话在客户端过期。哦，不，我们不需要满意的客户。

所以，你真的，真的，需要用数据库备份它并创建随机令牌，最好有一个到期日期。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T00:17:26.250

当他们付款时，将可用的下载 ID 和随机哈希存储在付款表中。然后使用*该*哈希来获取 ID。然后，哈希不应与特定产品相关，而应与付款相关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T00:18:03.077

您可以实现的最简单的事情之一是跟踪用户购买的日志系统。您可以将请求的 ID 与存储的与用户购买相关的 ID 交叉引用。如果它们不相关，请不要提供文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T00:19:36.030

您需要跟踪用户在数据库中购买了哪些商品。然后download.php 可以检查用户是否购买了他们正在尝试下载的项目。

# objective-c - UICollectionView 在包含标题时不会重新加载项目

> ID：12718689
> 
> 赞同：3
> 
> 时间：2012-10-04T00:15:05.437
> 
> 标签：objective-c, cocoa-touch, core-data, ios6, uicollectionview

***编辑：**最初的问题是错误的，所以有些内容可能有点不相关。但可能会让你对我做事的方式有更好的印象。*

我有一个非常奇怪的问题`NSFetchedResultsController`。首先，我将描述我的应用程序的当前情况。我有多个`Album`和`Photo`实体，它们都是抽象类的子类`AbstractItem`。

在我`AlbumViewController`的中，我使用 to a`NSFetchedResultsController`来获取所有`AbstractItem`当前的`superAlbum`. 像这样：

```
- (NSFetchedResultsController *)fetchedResultsController {
    if (!fetchedResultsController ) {
        NSFetchRequest *request = [[NSFetchRequest alloc] init];

        [request setEntity:[NSEntityDescription entityForName:@"AbstractItem"
                                       inManagedObjectContext:managedObjectContext]];

        [request setSortDescriptors:@[
         [NSSortDescriptor sortDescriptorWithKey:@"type" ascending:YES],
         [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES],
         [NSSortDescriptor sortDescriptorWithKey:@"creationDate" ascending:YES]
        ]];

        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"superAlbum = %@", self.parentAlbum];
        [request setPredicate:predicate];

        NSFetchedResultsController *newController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                                        managedObjectContext:managedObjectContext
                                                                                          sectionNameKeyPath:@"type"
                                                                                                   cacheName:nil];

        newController.delegate = self;

        self.fetchedResultsController = newController;
    }

    return fetchedResultsController;
} 
```

当我选择 时`Album`，会启动另一个实例`AlbumViewController`并将其推送到我的导航控制器上。在这种情况下`parentAlbum`，设置为选定的对象。

现在，当我`Album`使用以下代码添加新内容时，会发生错误。

```
Album *album = (Album *)[Album itemInManagedObjectContext:self.managedObjectContext];
album.name = @"Test album";
album.superAlbum = self.parentAlbum;

NSError *error;
BOOL success = [self.managedObjectContext save:&error];

if (!success) {
    NSLog(@"Error: %@", error);
} 
```

~~使用对象`controller:didChangeObject:atIndexPath:forChangeType:newIndexPath:`的类型调用该方法。那个在 current 中不存在。因此，当它尝试在集合视图中更新它时会失败。`NSFetchedResultsChangeUpdate``parentAlbum``NSFetchedResultsController`~~

~~不在当前中的对象怎么可能`NSFetchedResultsController`用于通知？我该如何解决这个问题？~~

**编辑：**
发布问题后，我意识到这实际上不是`NSFetchedResultsController`关于错误对象的通知。但它会通知上一个（父）集合视图中的对象，但它会对它自己的集合视图控制器执行此操作。

但这可能只是问题所在；集合视图控制器在不可见时收到通知，看起来它目前无法处理。我这样处理通知：

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath {    
    switch (type) {
        case NSFetchedResultsChangeUpdate:
            [self.collectionView reloadItemsAtIndexPaths:@[indexPath]];
            break;
    }
} 
```

我很确定它以前工作得很好。在迭代自上次提交以来所做的更改后，我让它再次工作。在我删除`UICollectionView`标题（补充视图）后它再次起作用。

所以：`UICollectionView`当项目有标题并且当前不可见时，我无法更新项目。这是一个很难发现的问题，但是如何解决呢？认为这是一个非常奇怪的问题。

我得到的错误：

```
2012-10-04 11:54:21.148 PhotoLibrary[9195:c07] -[NSISObjectiveLinearExpression coefficientForVariable:]: unrecognized selector sent to instance 0x968bae0
2012-10-04 11:54:21.151 PhotoLibrary[9195:c07] CoreData: error: Serious application error.  Exception was caught during Core Data change processing.  This is usually a bug within an observer of NSManagedObjectContextObjectsDidChangeNotification.  -[NSISObjectiveLinearExpression coefficientForVariable:]: unrecognized selector sent to instance 0x968bae0 with userInfo (null)
2012-10-04 11:54:21.156 PhotoLibrary[9195:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSISObjectiveLinearExpression coefficientForVariable:]: unrecognized selector sent to instance 0x968bae0'
*** First throw call stack:
(0x2977012 0x1418e7e 0x2a024bd 0x2966bbc 0x296694e 0xcb06c3 0xcb569c 0xcbf88e 0x58c670 0x5945bd 0x29198fd 0x594605 0x29198fd 0x594605 0x29198fd 0x594605 0x5946c7 0x9cd53 0x5525ff 0x9ea5c 0x5522f7 0x565228 0x56231b 0x55ed4e 0x55edf0 0x8f56 0x1242c1a 0xbcddc9 0x29d10c5 0x292befa 0xb02482 0x11545f3 0x11ede5f 0x114fa26 0x115316e 0x55dc 0x85e5 0x4312c1 0x142c705 0x57920 0x578b8 0x118671 0x118bcf 0x117d38 0x8733f 0x87552 0x653aa 0x56cf8 0x20badf9 0x20baad0 0x28ecbf5 0x28ec962 0x291dbb6 0x291cf44 0x291ce1b 0x20b97e3 0x20b9668 0x5465c 0x26bd 0x25e5)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T16:25:53.440

我不知道这是解决方案还是解决方法，但是如果您在以下位置发布获取的结果控制器`viewWillDisappear`：

```
- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
    self.fetchedResultsController = nil;
} 
```

那么您的 ErrorTest 程序就不会再崩溃并且似乎可以正常工作。

这避免了对当前不可见的集合视图的更新。

由于您已经在访问 FRC `viewWillAppear`：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    // ...    
    NSError *error = nil;
    BOOL success = [self.fetchedResultsController performFetch:&error];
    // ...
} 
```

由于 FRC 的惰性设置器功能，当视图再次可见时，FRC 将重新创建。

# events - 在 MIDI 通道事件中解码 RPN

> ID：12718691
> 
> 赞同：3
> 
> 时间：2012-10-04T00:15:11.943
> 
> 标签：events, format, midi, channel

我正在研究 midi 文件格式，但遇到了文件问题。

这是我的 midi 示例文件的内容，其中出现了通道事件。

[ **“00”、“b1”、“64”、“00”、“00”、“65”、“00”、“00”、“06”、“0c”**、“00”、“e1”、“ 00”、“40”、“00”、“b1”]

我认为这是一个 RPN 事件*（我强调的部分）*。

但我没有设法解码这个 RPN。为什么控制器 64 后面跟着 2 个字节和 65 也是。
如何知道是否只有一个或两个字节要解码？

我找到了这个资源，但找不到答案： http:
[//www.sonicspot.com/guide/midifiles.html](http://www.sonicspot.com/guide/midifiles.html)
[http://www.somascape.org/midi/tech/spec.html#rpns](http://www.somascape.org/midi/tech/spec.html#rpns)

编辑：
稍后在同一个midi文件中：
[“00”，“b1”，“65”，“00”，“00”，“64”，“01”，“00”，“06”，“40”， “00”、“26”、“00”、“00”、“65”、“7f”、“00”、“64”、“7f”、“00”、“b0”、“64”、“00” ", "00", "65", "00"]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:13:31.473

`64 00`和之后的第二个零值`65 00`是以下消息的增量时间。每条消息之前都有增量时间。以下是如何解释您的第一个样本：

```
time  status  data
 00     B1     64 00
 00            65 00 (running status B1)
 00            06 0C (running status B1)
 00     E1     00 40
 00     B1 
```

以下是如何解释第二个示例：

```
time  status  data
 00     B1     65 00
 00            64 01 (running status B1)
 00            06 40 (running status B1)
 00            26 00 (running status B1)
 00            65 7F (running status B1)
 00            64 7F (running status B1)
 00     B0     64 00
 00            65 00 (running status B0) 
```

# eclipse - 如何让eclipse标记for循环或if语句的开始位置

> ID：12718693
> 
> 赞同：3
> 
> 时间：2012-10-04T00:15:36.263
> 
> 标签：eclipse, lines, jgrasp

我使用了 JGrasp 一段时间，现在，虽然我意识到 Eclipse 更好，但我喜欢 JGrasp 中的一件事，它总是会标记 for 循环或 if 语句的位置（结束。）

您可以通过在 Eclipse 中突出显示一个括号来完成同样的事情，但这并不有效，而且它仍然只突出显示另一个括号。我正在寻找的是您在这张图片中的代码左侧直接看到的行。

（对不起，我是新人，还不能发图片。但它只是imgur。）

i.stack.imgur.com/KWtqI.jpg

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T00:39:04.683

您可以使用 EditBox 并根据需要对其进行自定义。[http://editbox.sourceforge.net/](http://editbox.sourceforge.net/)

# ms-access - 使用访问表单进行 1 对 1 关系

> ID：12718694
> 
> 赞同：0
> 
> 时间：2012-10-04T00:15:36.623
> 
> 标签：ms-access

我在 Access 中保存表单时遇到问题，我有 2 个以 1:1 关系相关的表：（从技术上讲，这是一对多的关系，但我以这种方式使用它）

表1：身份证，......

表 2 : id,.....,table1_id

所以我在访问中为Table1制作了一个表格，为Table2制作了另一个表格，在这个表格中我使用第一个作为子表格。

所以我需要在用户输入所有内容后保存数据，我想我必须先保存与Table1相关的数据并获取添加行的生成ID，然后才能提交Table2的数据，

我怎样才能做到这一点？

如果仍有不清楚的地方，我可以提供更多细节。

在此先感谢您的帮助。

# c# - 验证方法错误

> ID：12718696
> 
> 赞同：1
> 
> 时间：2012-10-04T00:16:01.823
> 
> 标签：c#, asp.net

我有以下方法来确保输入的用户名不存在。

```
protected void checkUsername(object source, ServerValidateEventArgs args)
{
    string connString = "Data Source=server;Initial Catalog=database;User Id=username;Password=password;";
    string cmdText = "SELECT COUNT(*) FROM igs_users WHERE username = @username";

    using(SqlConnection conn = new SqlConnection(connString))
    {
        conn.Open();
        using(SqlCommand cmd = new SqlCommand(cmdText, conn))
        {
            cmd.Parameters.AddWithValue("@username", username);
            Int32 count = (Int32)cmd.ExecuteScalar();

            args.IsValid = true;
        }
    }
} 
```

当我运行它时，我收到以下错误。

System.ArgumentException 未被用户代码处理 HResult=-2147024809 消息=不存在从对象类型 System.Web.UI.WebControls.TextBox 到已知托管提供程序本机类型的映射。源=系统.数据

调试器在下面的行中给了我这个错误。

```
Int32 count = (Int32)cmd.ExecuteScalar(); 
```

知道这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T00:23:21.410

我认为这是行

```
cmd.Parameters.AddWithValue("@username", username); 
```

是`username`文本框吗？如果是这样，您应该将行更改为：

```
cmd.Parameters.AddWithValue("@username", username.Text); 
```

当前所在的行尝试将 TextBox 控件本身绑定到`@username`参数。更正将 TextBox 控件中的文本绑定到`@username`.

# java - 创建实现接口的所有类的向量

> ID：12718697
> 
> 赞同：0
> 
> 时间：2012-10-04T00:16:12.743
> 
> 标签：java, interface

我有一个接口“车辆”和实现该接口汽车、自行车、自行车等的类。

我可以创建接口的 Vector 并为其分配实现类的实例吗？例如：

```
Vector<Vehicle> vi;
vi.add(0, new Car());
vi.add(1, new Bicycle()); 
```

等等

那么在运行时，我可以简单地检查索引并调用所需的函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T00:30:05.023

你当然可以。这是运行时使用多态性的经典示例。

```
import java.util.Vector;

interface Vehicle {
    public int getNumberOfWheels();
}

class Car implements Vehicle {

    final int numberOfWheels = 4;

    public int getNumberOfWheels() {
        return numberOfWheels;
    }
}

class Bicycle implements Vehicle {

    final int numberOfWheels = 2;

    public int getNumberOfWheels() {
        return numberOfWheels;
    }
}

public class Program {

    public static void main(String args[]) {
        Vector<Vehicle> vi = new Vector<Vehicle>();
        vi.add(0, new Car());
        vi.add(1, new Bicycle());
        for(Vehicle v: vi) {
            System.out.println(v.getClass().getName() 
                + " has " + v.getNumberOfWheels() + " wheels");
        }
    }
} 
```

**[演示](https://compilr.com/evgeniynaydenov/polymorphism/Program.java)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T00:43:35.930

是的，你可以这么做。接口应该以这种方式使用。

现在建议更好的方法来做到这一点：很难做到，因为不太清楚你需要做什么。第一个建议是使用 ArrayList 而不是 Vector。两者的主要区别在于 Vector 是“同步的”，这意味着线程安全。但是，同步对性能有很大影响，Vector 类通过同步对其所有方法的访问来实现完全的线程安全。通常最好使用非同步容器，如果您需要线程安全，则在容器外管理您自己的同步，因为您可以根据使用情况将它们仅放在需要它们的地方。

在您的列表具有预先知道的固定大小的极端情况下，您甚至可以使用一个简单的数组，即：

```
Vehicle[] vi = new Vehicle[2];
vi[0] = new Car();
vi[1] = new Bicycle(); 
```

# knockout.js - 在 Knockout 中对 Observable 数组进行排序

> ID：12718699
> 
> 赞同：66
> 
> 时间：2012-10-04T00:16:38.793
> 
> 标签：knockout.js

我在人员对象的淘汰赛中有一个可观察的数组。我希望能够根据姓氏对人员列表进行排序。问题是列表中有许多重复的姓氏。结果是，当有多个姓氏时，第一个名字会在找到时出现。我希望能够按姓氏对数组进行排序，当有多个姓氏时，也可以按名字排序。我正在使用文本输入让用户开始输入姓氏。结果绑定到显示所有匹配项的模板。

`<input data-bind="value: filter, valueUpdate: 'afterkeydown'">`

这是我的 Knockout 数组过滤器代码：

```
function Item(firstname, lastname) {
     this.firstname = ko.observable(firstname);
     this.lastname = ko.observable(lastname);
}

var playersViewModel = {
     items: ko.observableArray([]),
     filter: ko.observable("")
};
var players;

$(function() {
    playersViewModel.filteredItems = ko.computed(function() {
         var filter = this.filter().toLowerCase();
         if (!filter) {
              return this.items();
         } else {
              return ko.utils.arrayFilter(this.items(), function(item) {
                    return ko.utils.stringStartsWith(item.lastname().toLowerCase(), filter);
              });
         }
    }, playersViewModel);

    $.getJSON('./players.json', function(data) {
        players = data.players;
        playersViewModel.players = ko.observableArray(players);
        ko.applyBindings(playersViewModel);    
        var mappedData = ko.utils.arrayMap(players, function(item) {
             return new Item(item.firstname,item.lastname);
        });
        playersViewModel.items(mappedData);
    });    
}); 
```

对于姓氏过滤，这很好用，但是当有重复的姓氏时，我无法找到添加排序名字的方法。例如，在我的数组中按姓氏排序时，我得到：

```
Joe Bailey
Jack Brown
Adam Brown
Bob Brown
Jim Byrd 
```

我希望重复的姓氏也对其名字进行排序：

```
Joe Bailey
Adam Brown
Bob Brown
Jack Brown
Jim Byrd 
```

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-01-25T00:21:06.167

KnockoutJS 可观察数组提供了排序功能，这使得在 UI 中对数据绑定数组进行排序相对容易（无论数据的自然顺序如何。）

```
data-bind="foreach: items.sort(function (l, r) { return l.lastName() > r.lastName() ? 1 : -1 })" 
```

您不必对源数据进行预排序/重新排序，如果您在绑定之前进行排序（或由于排序而重新绑定），那么您做错了。

也就是说，你要问的是按两个数据排序，姓氏，然后是名字。

而不是 "l.lastName() > r.lastName() ? 1 : -1" 考虑以下内容：

```
l.lastName() === r.lastName() 
    ? l.firstName() > r.firstName() ? 1 : -1
    : l.lastName() > r.lastName() ? 1 : -1 
```

我敢肯定，这可能会更有效率。基本上你有三个条件在起作用：

1.  姓氏是否相等？
2.  如果是这样，比较名字并返回结果。
3.  否则，比较姓氏并返回结果。

我已经扫描了您的代码，但没有看到这样的排序功能。

这类似于 Michael Best 的回答，但是，我试图澄清 WHERE 处理排序（在您的绑定中，第一个示例中）以及如何实现您正在寻找的排序（多个数据。）

```
data-bind="foreach: items().sort(function (l, r) { return (l.lastName() == r.lastName()) ? (l.firstName() > r.firstName() ? 1 : -1) : (l.lastName() > r.lastName() ? 1 : -1) })" 
```

自然，当您引入更多排序向量（例如反转或附加数据）时，这可能会变得笨拙，因此您应该实现一个过滤器函数来为您执行上述评估：

```
data-bind="foreach: items().sort(my.utils.compareItems)" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T00:31:33.743

如果你确保你`players.json`返回的名字是排序的，你会没事的。如果它从数据库中加载它们，您需要将名字字段添加到您的`ORDER BY`子句中。

如果您想在 Javascript 中进行排序，您可以在从服务加载后立即进行：

```
players.sort(function(player1, player2) {
    return player1.lastname.localeCompare(player2.lastname) ||
        player1.firstname.localeCompare(player2.firstname);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-20T07:35:48.293

我在尝试对可观察数组进行排序时遇到了一些问题，我在代码中没有看到任何结果。

在将新项目返回到数组之前，您需要先对通过 ajax/getJSON 请求收到的结果进行排序。

这样，在将结果作为新项目添加到您的可观察数组之前对其进行排序。不需要在绑定处对它们进行排序。

请参见下面的示例。

```
players(ko.utils.arrayMap(result, function (item) {
                    result.sort(function (l, r) {
                        return l.name == r.name ? 0 : (l.name < r.name ? -1 : 1);
                    });
                return new Player(item);
            })); 
```

1.  使用 AJAX / getJSON 获取数据
2.  将该请求的结果排序到您选择的数组中

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2014-01-16T11:44:04.650

您必须使用两次排序来执行此操作。在第一次排序中，根据人的姓氏进行排序，在第二次排序中，如果有两个以上的人具有相同的姓氏，则首先根据姓氏进行搜索，而不是根据他们所在位置的名字进行排序，使用一些标准排序算法....

# java - 将 curl 与 apache HttpPost 对象一起使用

> ID：12718701
> 
> 赞同：1
> 
> 时间：2012-10-04T00:16:48.887
> 
> 标签：java, curl, http-post

我想转储一个`org.apache.http.client.methods.HttpPost`对象的完整内容，这样我就可以使用 curl 来调试这个对象有什么问题。有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:02:40.163

不太清楚您要做什么，但我想您想查看从 Java 发送到某个远程端点的内容。您可以拦截实际的 HTTP 请求，并且有相应的工具：

*   [提琴手2](http://www.fiddler2.com/fiddler2/)
*   [线鲨](http://www.wireshark.org)
*   用于 IntelliJ IDEA 的[TunnelliJ插件](http://plugins.intellij.net/plugin/?id=155)

截获请求后，您将看到其原始形式，例如

```
POST /endpoint HTTP/1.1
Accept-Encoding: gzip
Accept: text/xml
Content-Type: text/xml; charset=utf-8
Content-Length: 342
Host: 127.0.0.1:8080
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.2.1 (java 1.5)

<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
/// etc 
```

有了转储，您将能够使用 curl 重现请求并修改其中的某些部分以查看它们是否错误。

Fiddler2 很容易上手。TunnelliJ 更简单，但与 IDEA 相关联。Wireshark 是较低级别的，允许拦截任何流量，而不仅仅是 HTTP。但它需要一些技能才能使用它。

# javascript - 如何使用 jQuery 提取子 XML

> ID：12718705
> 
> 赞同：0
> 
> 时间：2012-10-04T00:17:20.697
> 
> 标签：javascript, jquery, html

我有这个 XML 文件名为`payload.xml`：

```
<Remoting><Response>
<Controller id="c">
<Messages/>
<StructData name="Root">
    <F name="@ErrorOccured"/>
    <F name="@TransitionErrorOccurred"/>
    <List name="DataList" aspect="Delete"/>
    <List name="DataList" aspect="New">
        <Item name="001">
            <F name="CreationDateTime" >2012/04/26</F>
            <F name="ProductDescription" />
        </Item>
        <Item name="01F">
            <F name="CreationDateTime" >2012/08/09</F>
            <F name="ProductDescription" >Smartphone 16GB</F>
        </Item>                 
        <Header name="@tableSize">316 </Header>
    </List>
</StructData>
<Events>
    <Event event="$Core" operation="$AddRow" path="/Root/DataList"/>
</Events>
</Controller>
</Response></Remoting> 
```

我需要从中提取这个 XML：

```
<Item name="001">
    <F name="CreationDateTime" >2012/04/26</F>
    <F name="ProductDescription" />
</Item>
<Item name="01F">
    <F name="CreationDateTime" >2012/08/09</F>
    <F name="ProductDescription" >Smartphone 16GB</F>
</Item> 
```

我的第一步是：

```
jQuery.get("payload.xml", function(result){ 
    obj = $(result).find('Response').find('Controller').find('StructData');}) 
```

当我检查调试器内部时，我看不到任何 XML 内部`obj`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T00:52:04.603

尝试小写您的标签。

```
jQuery.get("payload.xml", function(result){ 
    obj = $(result).find('response').find('controller').find('structdata');}) 
```

如果这不起作用，试试[这个](http://jsfiddle.net/SZxuC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:53:11.483

```
$('Item', result).each(function(){
    $('F',this).text()
}); 
```

# java - ActionListener 实现

> ID：12718711
> 
> 赞同：1
> 
> 时间：2012-10-04T00:17:37.127
> 
> 标签：java, swing, concurrency, actionlistener, event-dispatch-thread

我不知道如何从单独的 ActionListener 类中实现动作监听器。我将应用程序分为几个类。Main 类调用 Frame 类来创建带有所有按钮的 GUI。现在，当按下按钮时，我需要向 ActionListener 方法发送一些数据以使其完成工作。如果我在 Frame 类中添加 ActionListener 而无法发送所需的数据，如果我在 main() 方法中添加 ActionListener，在调用 Frame 类之后会感觉很笨拙。下面是代码： public class Main {

```
public static Client klijent;

public static void main(String[] args) {

    FrameBuilder frame= new FrameBuilder();
    frame.frameBuild();
    frame.send.addActionListener(new SendBttnListener(ClientBuilder(klijent,frame.txt.getText())));

    try {
        frame.statLabel.setText(InetAddress.getLocalHost().getHostAddress());
    } catch (UnknownHostException e) {
        e.printStackTrace();
    }

    Udp udp;
    // klijent = null;

    while(true){
        klijent=new Client();
        udp=new Udp();

        klijent=udp.packageIN();
        if(klijent!=null){
            frame.statLabel.setText("");
            String str=new String(klijent.getBajt(),0,klijent.bajt.length);
            str=str.trim();
            frame.statLabel.setText(str+"@...@"+klijent.clientAddress.toString()+":"+klijent.clientPort+"-->Duljina:"+klijent.bajt.length);
        }
    }
}

public static Client ClientBuilder(Client klijent2, String str){

    klijent.setBajt(str.getBytes());

    return klijent2;
} 
```

如您所见，客户端对象可以更改很多（UDP 服务器），并且在等待下一个包时将被清除。后来我想实现一些客户端列表并在 Frame 类中添加 Action 监听器似乎很愚蠢。当我创建用于构建 GUI 的 separet 类时我出错了吗？有什么建议吗？

提前致谢....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T00:31:57.783

您发送的方法应该包含在它自己的实现中。这可以是单例实现或作为对包装动作侦听器的引用传递。

按钮动作监听器应该只在按钮的上下文中进行管理，它不应该从按钮上下文的外部访问（即我不相信你应该能够做到这一点`frame.send.addActionListener(...)`），因为调用者不应该关心如何发送请求就实现了，只是……

我有一个类或接口，您可以将其传递给您的框架，为它提供“发送”消息的手段。

```
public interface Sender {
    public void sendMessage(String message); // Or what ever parameter you want...
} 
```

我会将实现的参考传递给您的框架...

```
Sender sender = new ImplementationOfSender();
frame.setSender(sender); // It could also be passed to the constructor 
```

在框架中，我会将我的动作监听器附加到按钮上，当触发时，我会访问发送者并发送消息......

```
send.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent evt) {
        Sender sender = getSender();
        if (sender != null) {
            sender.sendMessage(...);
        }
    }
}); 
```

现在说了这么多......你的程序很快就会在你的脸上爆炸......

这将使您的程序停止运行，使 UI 看起来像是挂起的。

```
while(true){
    klijent=new Client();
    udp=new Udp();

    klijent=udp.packageIN();
    if(klijent!=null){
        frame.statLabel.setText("");
        String str=new String(klijent.getBajt(),0,klijent.bajt.length);
        str=str.trim();
        frame.statLabel.setText(str+"@...@"+klijent.clientAddress.toString()+":"+klijent.clientPort+"-->Duljina:"+klijent.bajt.length);
    }
} 
```

与 UI 的所有交互都必须在[事件调度线程 (AKA EDT)](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)的上下文中完成。任何阻塞操作，例如你的循环，都不应在 EDT 的上下文中执行

我会阅读[Swing 中的 Concurrency](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)。

您的程序可能已经爆炸的唯一原因是当您启动它时，您还没有将 UI 的创建同步到 EDT。

您可能想阅读[Swing Single Threading Rule](http://bitguru.wordpress.com/2007/03/21/will-the-real-swing-single-threading-rule-please-stand-up/)

# indexing - Elasticsearch + 轮胎 + 附件映射器 + 回形针 = 无命中

> ID：12718717
> 
> 赞同：0
> 
> 时间：2012-10-04T00:18:32.423
> 
> 标签：indexing, attachment, elasticsearch, tire

我正在尝试在我的应用程序中使用 ElasticSearch + Tire 进行全文搜索。

目前我有一个`Entry`通过`has_attached_file`回形针的模型。我已经安装并运行了最新版本的 ElasticSearch/Tire，还安装了 Attachment-mapping 插件。

如果我的查询是针对可以在其他`Entry`字段之一中找到的任何内容，则它可以完美运行。我试图运行`rake environment tire:import CLASS="Entry"`以更新索引，但我得到了

```
** Invoke environment (first_time)
** Execute environment
** Invoke tire:import (first_time)
** Execute tire:import
[IMPORT] Starting import for the 'Entry' class
--------------------------------------------------------------------------------
7/7 | 100% rake aborted!##############################################
stack level too deep
/home/capuser/.rvm/gems/ruby-1.9.2-p320/gems/rake-0.9.2.2/lib/rake/task.rb:162
Tasks: TOP => tire:import 
```

我觉得问题出在编码文件或我的`to_indexed_json`函数中。

这是一些代码：

```
class Entry < ActiveRecord::Base
  include Tire::Model::Search
  include Tire::Model::Callbacks

  has_attached_file :document,
                :url  => "/assets/entries/:id/:basename.:extension",
                :path => ":rails_root/public/assets/entries/:id/:basename.:extension"

  before_post_process :image?

  validates_presence_of :entry_type

  attr_accessible :description, :title, :url, :category_ids, :subcategory_ids, :entry_type_id, :document

  mapping do
    indexes :title
    indexes :description
    indexes :categories do
      indexes :name
    end
    indexes :subcategories do
      indexes :name
    end
    indexes :entry_type
    indexes :document, :type => 'attachment'
  end

 def to_indexed_json  
    {
    :title          => title,
    :description    => description,
    :categories     => categories.map { |c| { :name => c.name}},
    :subcategories  => subcategories.map { |s| { :name => s.name}},
    :entry_type     => entry_type_name,
    :document       => attachment
    }.to_json
  end

  def self.search(params)
    tire.search(load: true) do
      query { string params[:query], default_operator: "AND" } if params[:query].present?
    end
  end

  def attachment
    if document.present?
      path_to_document = "#{RAILS_ROOT}/app/assets/#{document}"
      Base64.encode64(open(path_to_document) { |pdf| pdf.read})
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:25:21.333

我有几个愚蠢的错别字，这把事情搞砸了。我一定读过一篇文章，他们用不同的格式编写了 to_indexed_json 函数，我很困惑。我在写问题之前就修复了它，所以这就是我以前的问题。

```
 def to_indexed_json  
    {
    :title          => title,
    :description    => description,
    :categories     => categories.map { |c| { :name => c.name}},
    :subcategories  => subcategories.map { |s| { :name => s.name}},
    :entry_type     => entry_type_name,
    :methods        => [:attachment]
    }.to_json
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-08T14:23:20.797

如果您希望方法实际命中，您的方法哈希在 json 中，应该在它之外。像这样：

```
def to_indexed_json  
  only: {
    :title          => title,
    :description    => description,
    :categories     => categories.map { |c| { :name => c.name}},
    :subcategories  => subcategories.map { |s| { :name => s.name}},
    :entry_type     => entry_type_name
  },
  methods: [:attachment]
end 
```

# jquery - e.pageX 和 e.pageY 不能正常工作？

> ID：12718721
> 
> 赞同：6
> 
> 时间：2012-10-04T00:18:51.300
> 
> 标签：jquery

我试图在单击鼠标时将 div 放置在光标所在的任何位置。因此，当我使用 e.PageX 和 e.pageY 时，它实际上使我的 div 远低于预期。有任何想法吗？

```
var mouseX = e.pageX;
var mouseY = e.pageY;
$("#moverdiv").css({'top':mouseY,'left':mouseX}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T00:36:48.850

pageX 的定义是：

pageX 是触发鼠标事件时鼠标指针相对于整个文档的 X 坐标的整数值（以像素为单位）。该属性考虑了页面的任何水平滚动。

如果你把这种代码：

```
 $(document.body).click(function(mouseEvent) {

        $("#MyDiv").css({
            'top': mouseEvent.pageY,
            'left':mouseEvent.pageX
        });
    }); 
```

它完美地工作。

如果 div 不在想要的位置，那是因为你的 DIV 可能有一个与 body 不同的参考点（与浏览器的左上角不同）。

实际上，绝对定位元素是指第一个参考父元素。如果没有找到引用父级，则最终引用父级是**body**。可能是您有一个具有 CSS 属性的中间元素：**position: relative**。此 CSS 属性使元素成为定位的参考并引起移位。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T00:36:10.530

这对我有用。试试这个：

```
<!DOCTYPE html>
 <html>
   <head>
     <script src="jquery.js"></script>
     <script>
        $(document).ready(function(){
          $(document).click(function(e){ 
            var mouseX = e.pageX;
            var mouseY = e.pageY;
            $("#moverdiv").css({'top':mouseY, 'left':mouseX});
          });

        });
     </script>
     <style type="text/css">
         #moverdiv{
            position: absolute;
            top: 0px;
            left: 0px;
            background-color: #000;
            width: 100px;
            height: 100px;
           }
      </style>
   </head>
   <body>
      <div id="moverdiv"></div>
   </body>
 </html> 
```

这是[演示](http://jsfiddle.net/rE5ur/1/)

# java - javac 错误：“导入 x”处的“包 x 不存在”

> ID：12718723
> 
> 赞同：21
> 
> 时间：2012-10-04T00:19:11.007
> 
> 标签：java, junit, compiler-errors

我正在尝试使用带有以下命令的命令提示符编译我的 java 文件“check4PrimeTest.java”：

> javac -classpath .:junit.jar check4PrimeTest.java

我收到以下错误：

> 错误：包 junit.framework 不存在 import junit.framework.*;

我不确定为什么会出现此错误，因为我的程序中有 import junit.framework.*。

下面是我的代码：

```
package check4prime;
// check4PrimeTest.java

//Imports 
import junit.framework.*;

public class check4PrimeTest extends TestCase {

    //Initialize a class to work with. 
    private check4Prime check4prime = new check4Prime();

    //constructor 
    public check4PrimeTest (String name) { 
        super(name);
    }

    //Main entry point 
    public static void main(String[] args) {
        System.out.println("Starting test...");
        junit.textui.TestRunner.run(suite());
        System.out.println("Test finished...");
    } // end main() 

    //Test case 1 
    public void testCheckPrime_true() {
        assertTrue(check4prime.primeCheck(3));
    }

    //Test cases 2,3 
    public void testCheckPrime_false() {
        assertFalse(check4prime.primeCheck(0));
        assertFalse(check4prime.primeCheck(1000));
    }

    //Test case 7 
    public void testCheck4Prime_checkArgs_char_input() { 
        try {
            String [] args= new String[1];
            args[0]="r";
            check4prime.checkArgs(args);
            fail("Should raise an Exception.");
        } catch (Exception success) { 
            //successful test
        }
    } //end testCheck4Prime_checkArgs_char_input() 

    //Test case 5 
    public void testCheck4Prime_checkArgs_above_upper_bound() {
        try { 
            String [] args= new String[1];
            args[0]="10001";
            check4prime.checkArgs(args);
            fail("Should raise an Exception.");
        } catch (Exception success) { 
            //successful test
        }
    } // end testCheck4Prime_checkArgs_upper_bound() 

    //Test case 4 
    public void testCheck4Prime_checkArgs_neg_input() {
        try { 
            String [] args= new String[1];
            args[0]="-1";
            check4prime.checkArgs(args);
            fail("Should raise an Exception.");
        } catch (Exception success) { 
            //successful test
        }
    } // end testCheck4Prime_checkArgs_neg_input()

    //Test case 6
    public void testCheck4Prime_checkArgs_2_inputs() {
        try { 
            String [] args= new String[2];
            args[0]="5";
            args[1]="99";
            check4prime.checkArgs(args);
            fail("Should raise an Exception.");
         } catch (Exception success) {
            //successful test 
         } 
    } // end testCheck4Prime_checkArgs_2_inputs 

    //Test case 8 
    public void testCheck4Prime_checkArgs_0_inputs() {
        try { 
            String [] args= new String[0];
            check4prime.checkArgs(args);
            fail("Should raise an Exception.");
        } catch (Exception success) { 
            //successful test
        } 
    } // end testCheck4Prime_checkArgs_0_inputs 

    //JUnit required method. 
    public static Test suite() { 
        TestSuite suite = new TestSuite(check4PrimeTest.class);
        return suite;
    } //end suite() 

} //end check4PrimeTest 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T00:26:00.090

您收到此错误是因为您尝试导入包而不告诉系统包所在的位置。以下是告诉您的系统软件包所在位置的说明：

> 除了源目录和目标目录之外，您的 javac 目标没有指定任何内容——它没有添加任何类路径条目；您需要为相应的 JUnit jar 文件添加一个条目。有关更多详细信息，请参阅 javac 任务文档。您可能希望将 JUnit 的路径指定为类路径属性、嵌套元素或对其他地方声明的路径的引用。

*   [javac 任务文档](http://ant.apache.org/manual/Tasks/javac.html)

来源：[在 Eclipse 中使用 Ant 运行 JUnit 测试时出现问题。初学者问题](https://stackoverflow.com/questions/7547439/problem-running-junit-tests-with-ant-in-eclipse-beginner-question)

`prompt> javac -classpath .;$JUNIT_HOME\junit4.x.x.jar test.java`

**编辑：JUNIT安装（从[这里](http://junit.sourceforge.net/doc/faq/faq.htm#started)）：**

> 视窗
> 
> 要在 Windows 上安装 JUnit，请执行以下步骤：
> 
> ```
> 1\. Unzip the junit.zip distribution file to a directory referred to as %JUNIT_HOME%.
> 
> 2\. Add JUnit to the classpath (type the following into a command line shell): `set CLASSPATH=%CLASSPATH%;%JUNIT_HOME%\junit.jar` 
> ```
> 
> Unix (bash)
> 
> 要在 Unix 上安装 JUnit，请执行以下步骤：
> 
> ```
> 1\. Unzip the junit.zip distribution file to a directory referred to as $JUNIT_HOME.
> 
> 2\. Add JUnit to the classpath (type the following into terminal):
> 
> `export CLASSPATH=$CLASSPATH:$JUNIT_HOME/junit.jar` 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T00:23:04.597

您的 import 语句告诉编译器您需要一个工件，在这种情况下，您是在告诉编译器您需要使用 junit。但是声明你正在使用它并将它提供给 JVM 是不同的事情。您需要确保您的 junit jar 文件位于您的类路径中。

**编辑：** 顺便说一句，使用 IDE 将为您节省时间。我意识到 eclipse 可能令人生畏，但我建议开始使用它。除非您更像是命令行类型的人，但即使那样，如果您做任何严肃的事情，您也应该使用 IDE IMO。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-27T08:03:39.650

您收到此错误是因为您正在导入包或使用无法找到的 jar 文件。

您应该检查环境变量中的类路径变量。将 jar 文件或包的路径添加到类路径变量。此外，如果显示错误“无法加载类，找不到主文件”，请将您的 java 文件的类文件路径添加到类路径变量

希望这可以帮助。！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-24T01:44:33.513

就我而言，***在 Windows***机器上，我只是用分号替换了冒号：它奏效了！

> javac -cp .:./abc.jar:./def.jar Practice.java Practice.java:2: 错误：com.coding.javapractice 包不存在

替换后 : 与 ;

> javac -cp .;./abc.jar;./def.jar Practice.java

编译成功。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-27T16:05:59.107

如果您使用 Java 9 或更高版本和 JUnit 5 或更高版本，那么 JUnit 包可能定义在模块中，您可能需要使用`--module-path`指向包含模块/Modular JAR 的目录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-03T15:31:17.740

在这里添加我的答案，以防它帮助某人。如果尝试导入多个 jar，则可以使用`*`通配符。对我有用的命令（windows 10，java 17）是：

```
javac -cp .;* Canvas 
```

# oracle - PLS-00049：更新触发器中的绑定变量错误

> ID：12718725
> 
> 赞同：0
> 
> 时间：2012-10-04T00:19:18.920
> 
> 标签：oracle, triggers

我正在尝试在 Oracle 11g Express Edition 中编写一个简单的触发器：

```
CREATE OR REPLACE TRIGGER EMPLOYEE_UPDATE 
BEFORE UPDATE ON EMPLOYEE
FOR EACH ROW
BEGIN
   :new.End_Date := SYSDATE;
END; 
```

但它会引发错误：

```
Error(4,1): PLS-00049: bad bind variable 'NEW.END_DATE' 
```

这个简单的触发器有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T00:48:12.993

不知何故重写 CREATE TABLE EMPLOYEE 语句后问题消失了。我有

```
CREATE TABLE EMPLOYEE
( "Employee_ID" NUMBER(6,0),
 "HireDate" DATE,
 "Salary" NUMBER(8,2),
 CONSTRAINT "EMPLOYEE_PK" PRIMARY KEY ("Employee_ID") ENABLE
 ); 
```

我删除了表并重写了没有双引号的 CREATE TABLE 语法：

```
CREATE TABLE EMPLOYEE
( Employee_ID NUMBER(6,0),
 HireDate DATE,
 Salary NUMBER(8,2),
 CONSTRAINT EMPLOYEE_PK PRIMARY KEY (Employee_ID) ENABLE
 ); 
```

问题消失了。

**编辑：** 正如@Sathya 解释的那样，在Oracle 中，一个对象名称在创建时用引号引起来它的名称变得区分大小写。我的误解是问题。

# sql-server-2008 - MERGE 未按预期合并数据

> ID：12718727
> 
> 赞同：1
> 
> 时间：2012-10-04T00:19:55.390
> 
> 标签：sql-server-2008, tsql, merge

我第一次尝试 MERGE 运行没有遇到任何错误，但它没有像我想要的那样合并数据。谁能告诉我我做错了什么？重点是比较#Temp 和#tblCollectionGameList 并更新#tblCollectionGameList，使其仅包含#Temp 中的项目（将缺失的项目插入tblCollecitonGameList 并从tblCollectionGameList 中删除不再在#Temp 中的项目）

```
 CREATE TABLE #Temp
(
    CollectionID smallint NOT NULL,
    IncludedSectionID smallint NOT NULL
)

INSERT INTO #Temp (CollectionID, IncludedSectionID) VALUES(0, 0);
INSERT INTO #Temp (CollectionID, IncludedSectionID) VALUES(0, 1);

SELECT * FROM #Temp;

CREATE TABLE #tblCollectionGameList
(
    ID smallint IDENTITY(0,1) NOT NULL,
    CollectionID smallint NOT NULL,
    IncludedSectionID smallint
)

INSERT INTO #tblCollectionGameList (CollectionID, IncludedSectionID) VALUES(0,0);
INSERT INTO #tblCollectionGameList (CollectionID, INcludedSectionID) VALUES(0,2);

SELECT * FROM #tblCollectionGameList;

BEGIN TRAN

MERGE #tblCollectionGameList AS t
USING #Temp AS s
ON (t.CollectionID = s.CollectionID)
WHEN NOT MATCHED BY TARGET
    THEN
        INSERT(CollectionID, IncludedSectionID) VALUES (s.CollectionID, s.IncludedSectionID)
WHEN NOT MATCHED BY SOURCE
    THEN
        DELETE;

SELECT * FROM #tblCollectionGameList;

ROLLBACK TRAN

DROP TABLE #Temp;
DROP TABLE #tblCollectionGameList; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T00:48:28.993

您的问题是您要加入一个非唯一的列。

一切都有`CollectionID = 1`，所以一切都匹配 - 没有符合`NOT MATCHED BY TARGET`条件的行，也没有符合`NOT MATCHED BY SOURCE`条件的行。

而是尝试`CollectionID`在表中创建唯一性。

```
INSERT INTO #Temp (CollectionID, IncludedSectionID) VALUES(0, 0);
INSERT INTO #Temp (CollectionID, IncludedSectionID) VALUES(1, 1);

INSERT INTO #tblCollectionGameList (CollectionID, IncludedSectionID) VALUES(0,0);
INSERT INTO #tblCollectionGameList (CollectionID, INcludedSectionID) VALUES(2,2); 
```

# c# - 在 Windows 应用商店应用中使用 System.Diagnostics、性能计数器

> ID：12718728
> 
> 赞同：2
> 
> 时间：2012-10-04T00:20:01.037
> 
> 标签：c#, performancecounter, windows-store-apps

根据msdn上的这个页面

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh441592.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh441592.aspx)

Windows 商店应用程序的 System.Diagnostics 命名空间使您能够与性能计数器交互。

要使用桌面应用程序执行此操作，我通常会执行以下操作：

```
PerformanceCounter cpu = new PerformanceCounter("Processor", "% Processor Time", "_Total");
PerformanceCounter ram = new PerformanceCounter("Memory", "Available MBytes"); 
```

并且，然后使用 NextValue() 随着时间的推移监控这些

但是，当您创建 Windows 商店应用程序时 - System.Diagnostics 命名空间似乎不包含 PerformanceCounter 类。我认为这是可能的，因为前面提到的 msdn 页面指出您可以与性能计数器进行交互。

有人知道如何在 Windows 商店应用程序中进行 CPU 使用和内存使用性能计数器吗？

# coldfusion - 捕获特定的文本字符串并从 XML 中删除文本字符串

> ID：12718730
> 
> 赞同：1
> 
> 时间：2012-10-04T00:20:20.383
> 
> 标签：coldfusion, coldfusion-9

我试图弄清楚如何只显示 | 之间的单词 和 | 在下面的 XML 描述中。例如，单词“web”或“VideoGames”。

我已经尝试过了，但是因为每个单词的长度不同，所以我不成功。另外，我无法摆脱 |

```
<cfoutput>#Right(thefeed2.rsschannel.eachresult.resultnumber[x].metadata.xmlAttributes.v, 10)#</cfoutput> 
```

我也在尝试做一个相反的任务——过滤掉 | 之间的单词。和 | 所以它不显示。换句话说，以第一项为例，显示整个描述，减去单词“web”或“VideoGames”

我已经尝试过了，但同样，我遇到了与试图过滤掉描述相同的问题，没有中间的词 | 和|。

```
<cfoutput>#left(thefeed2.rsschannel.eachresult.resultnumber[x].metadata.xmlAttributes.v, 500)#</cfoutput> 
```

所以我的问题是...

1：如何提取|之间的单词 和 | 从描述元素。

2：在与数字 1 不同的实例中，如何删除 | 之间的单词 和 | 在描述中？

顺便说一下，“thefeed2”就是我所说的 XML 提要。

```
<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
<rsschannel>
<resultsnumbertotal>11    </resultsnumbertotal>
<eachresult>
<resultnumber N="1">
<U>/file.cfm?id=yahoocom    </U>
<T>Yahoo    </T>
<metadata N="description" V="Quickly find what you're searching for, get in touch with friends and stay in-the-know |Web|"/>
</resultnumber>

<resultnumber N="2">
<U>/file.cfm?id=halo    </U>
<T>Halo    </T>
<metadata N="description" V="Halo is a multi-billion dollar science fiction video game franchise created by Bungie and now managed by 343 Industries and owned by Microsoft Studios. |VideoGames|"/>
</resultnumber>

<resultnumber N="3">
<U>/file.cfm?id=bingcom    </U>
<T>Bing    </T>
<metadata N="description" V="Bing is a search engine that brings together the best of search and people in your social networks to help you spend less time searching and more time doing. |Web|"/>
</resultnumber>

<resultnumber N="4">
<U>/file.cfm?id=lal    </U>
<T>Lakers    </T>
<metadata N="description" V="The Los Angeles Lakers are an American professional basketball team based in Los Angeles, California. They play in the Pacific Division |Sports|"/>
</resultnumber>

<resultnumber N="5">
<U>/file.cfm?id=quick    </U>
<T>Stay in the Know    </T>
<metadata N="description" V="Quickly find what you're searching for, get in touch with friends and stay in-the-know |Misc|"/>
</resultnumber>

<resultnumber N="6">
<U>/file.cfm?id=multi    </U>
<T>Billion Dollars    </T>
<metadata N="description" V="Halo is a multi-billion dollar science fiction video game franchise created by Bungie and now managed by 343 Industries and owned by Microsoft Studios. |Misc|"  />
</resultnumber>

<resultnumber N="7">
<U>/file.cfm?id=searching    </U>
<T>Searches    </T>
<metadata N="description" V="Bing is a search engine that brings together the best of search and people in your social networks to help you spend less time searching and more time doing. |Web|" />
</resultnumber>

<resultnumber N="8">
<U>/file.cfm?id=LosAngeles    </U>
<T>Los Angeles    </T>
<metadata N="description" V="The Los Angeles Lakers are an American professional basketball team based in Los Angeles, California. They play in the Pacific Division |Sports|"/>
</resultnumber>

<resultnumber N="9">
<U>/file.cfm?id=quick    </U>
<T>Stay in the Know    </T>
<metadata N="description" V="Quickly find what you're searching for, get in touch with friends and stay in-the-know |Misc|"/>
</resultnumber>

<resultnumber N="10">
<U>/file.cfm?id=LosAngeles    </U>
<T>Los Angeles    </T>
<metadata N="description" V="The Los Angeles Lakers are an American professional basketball team based in Los Angeles, California. They play in the Pacific Division"/>
</resultnumber>

<resultnumber N="11">
<U>/file.cfm?id=quick    </U>
<T>Stay in the Know    </T>
<metadata N="description" V="Quickly find what you're searching for, get in touch with friends and stay in-the-know |SummaryofDescription|"/>
</resultnumber>

</eachresult>
</rsschannel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:45:02.520

您想将正则表达式与 REreplace() 一起使用。示例（在 cfscript 中）：

1)

```
origString = thefeed2.rsschannel.eachresult.resultnumber[x].metadata.xmlAttributes.v;
newString = REreplace(origString, "\|.*\|", "new text"); 
```

2)

```
origString = thefeed2.rsschannel.eachresult.resultnumber[x].metadata.xmlAttributes.v;
newString = REreplace(origString, "\|.*\|", ""); 
```

正则表达式`\|.*\|`将匹配任何以 | 开头和结尾的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T00:42:32.960

总是只有两个`|`符号吗？如果是这样，您可以使用它`GetToken`来查找值

```
<cfset Mystring = GetToken(variable,1,'|') /> 
```

`GetToken`将您的变量视为带有分隔符的列表`|`

要删除您可以使用的单词`replace(variable,Mystring,'')`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T00:49:30.467

这个怎么样。对于字符串操作，总是后退一步寻找模式来帮助你发挥创造力。例如，CFML 的“列表”概念会带来一些有趣的时刻。更高级的用户总是会直接使用正则表达式，但如果您刚刚开始，这绝对是一个高级主题。立即，我将您的字符串识别为由竖线 (|) 分隔的列表。您还可以看到句子是由空格分隔的单词列表。这是一些代码。

```
 //set your string to something
 <cfset myString = "thefeed2.rsschannel.eachresult.resultnumber[x].metadata.xmlAttributes.v" />
//now let's treat the phrase as a list, we'll get position 2 of the list.
<cfset myWord = listGetAt(myString,2,'|');
//assuming you don't want the pipes in the clean string, let's just do a fast replace once
<cfset cleanString = replace(myString,"|#myWord#|","") />
//if you do want the pipes then you'll need a regex (a more advanced topic)
<cfset cleanStringWithPipes = rereplace(myString,"(\|)[ A-Za-z0-9]+(\|)","\1\2") /> 
```

# android - AppWidget setFillInIntent 无法处理 setData 或 componentName 中的数据集？

> ID：12718731
> 
> 赞同：2
> 
> 时间：2012-10-04T00:20:54.653
> 
> 标签：android, android-intent, android-appwidget, android-pendingintent, appwidgetprovider

我想从我的应用小部件启动不同的应用程序。小部件是一个项目列表，单击一个项目应该会打开一个应用程序，例如 Google Plus。当按下列表中的项目时，没有任何反应。当我删除 setData 和 setComponentName 时，它​​会弹出一个对话框，询问要使用什么应用程序。不能将数据和组件名与 appWidget 集合上的 PendingIntent 合并吗？

我的 AppWidgetProvider 看起来像这样：

```
public class StreamsWidgetProvider extends AppWidgetProvider {

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {

    final int N = appWidgetIds.length;

        for (int i=0; i<N; i++) {
            int appWidgetId = appWidgetIds[i];

            RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget);

            ...

            //set service for list view
            Intent listIntent = new Intent(context, StreamsWidgetService.class);
            listIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
            listIntent.setData(Uri.parse(listIntent.toUri(Intent.URI_INTENT_SCHEME)));
            views.setRemoteAdapter(R.id.streamItemsList, listIntent);

            ...

            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);
            views.setPendingIntentTemplate(R.id.streamItemsList, pendingIntent);
            appWidgetManager.updateAppWidget(appWidgetId, views);
        }

        super.onUpdate(context, appWidgetManager, appWidgetIds);
    }
} 
```

}

StreamsWidgetService 看起来像这样：

```
public class StreamsWidgetService extends RemoteViewsService {
    private static final String TAG = "StreamsWidgetService";

    @Override
    public RemoteViewsFactory onGetViewFactory(Intent intent) {
        return new StreamItemWidgetFactory(intent);
    }

    private class StreamItemWidgetFactory implements RemoteViewsService.RemoteViewsFactory {
        @Override
        public RemoteViews getViewAt(int position) {
            StreamItem item = mItems.get(position);

            RemoteViews rv = new RemoteViews(getPackageName(), R.layout.widget_item);
            ...

            Intent intent = new Intent();
            intent.setData(ContentUris.withAppendedId(StreamItems.CONTENT_URI, item.getId()));

            AccountType at = item.getAccountType();
            intent.setComponent(new ComponentName(at.getPackageName(), at.getViewStreamItemActivity()));
            rv.setOnClickFillInIntent(R.id.streamItemRowId, intent);
            Log.d(TAG, "FillIntent set for " + item.getId() + " at position " + position + " with data " + intent.getDataString() + " and component " + intent.getComponent().toString());

            return rv;
        }

        ...
    }
} 
```

当使用没有 fillIntent 的正常活动时，这有效：

```
final AccountType at = item.getAccountType();
final Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(ContentUris.withAppendedId(StreamItems.CONTENT_URI, item.getId()));
intent.setClassName(at.getPackageName(), at.getViewStreamItemActivity());
startActivity(intent); 
```

我该如何解决这个问题？我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-04T02:54:48.150

除非您特别要求，`PendingIntent`否则不允许填写组件。

```
PendingIntent pendingIntent = PendingIntent.getActivity(context,
    0, intent, Intent.FILL_IN_COMPONENT); 
```

请注意，这与其他`FILL_IN_*`标志的工作方式不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T12:41:24.020

我通过对我自己的 AppWidgetProvider 使用广播意图解决了这个问题。我有自己的操作，我在 onReceive 中检查。然后，我使用包名、类名和数据 ID 的参数设置 fillInIntent。在 onReceive 方法中使用它，我可以创建一个看起来与我的 ListActivity 中的意图完全相同的新意图。

在服务中：

```
Intent intent = new Intent();
intent.putExtra(StreamsWidgetProvider.BROADCAST_PARAM_ITEM_ID, item.getId());
AccountType at = item.getAccountType();
intent.putExtra(StreamsWidgetProvider.BROADCAST_PARAM_CLASS_NAME, at.getViewStreamItemActivity());
intent.putExtra(StreamsWidgetProvider.BROADCAST_PARAM_PACKAGE_NAME, at.getPackageName());

rv.setOnClickFillInIntent(R.id.streamItemRowId, intent); 
```

在 AppWidgetProvider 中：

```
public static final String ACTION_START_ACTIVITY = "startActivity";
public static final String BROADCAST_PARAM_ITEM_ID = "intentId";
public static final String BROADCAST_PARAM_PACKAGE_NAME = "intentPackage";
public static final String BROADCAST_PARAM_CLASS_NAME = "intentClassName";

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {

    final int N = appWidgetIds.length;

    for (int i=0; i<N; i++) {
        int appWidgetId = appWidgetIds[i];

        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget);

        ...

        Intent intent = new Intent(context, StreamsWidgetProvider.class);
        intent.setAction(ACTION_START_ACTIVITY);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, 0);
        views.setPendingIntentTemplate(R.id.streamItemsList, pendingIntent);

        appWidgetManager.updateAppWidget(appWidgetId, views);
    }

    super.onUpdate(context, appWidgetManager, appWidgetIds);
}

@Override
public void onReceive(Context context, Intent intent) {
    if(ACTION_START_ACTIVITY.equals(intent.getAction())) {
        long itemId = intent.getLongExtra(BROADCAST_PARAM_ITEM_ID, 0);
        String packageName = intent.getStringExtra(BROADCAST_PARAM_PACKAGE_NAME);
        String className = intent.getStringExtra(BROADCAST_PARAM_CLASS_NAME);

        Intent i = new Intent(Intent.ACTION_VIEW);
        i.setData(ContentUris.withAppendedId(StreamItems.CONTENT_URI, itemId));
        i.setComponent(new ComponentName(packageName, className));
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

        context.startActivity(i);
    }

    super.onReceive(context, intent);
} 
```

# visual-studio-2010 - Visual Studio 2010 后期构建步骤中的 Powershell 脚本

> ID：12718733
> 
> 赞同：4
> 
> 时间：2012-10-04T00:21:19.443
> 
> 标签：visual-studio-2010, powershell, post-build-event

我有一个 powershell 脚本，它可以在 powershell shell 和 cmd 窗口中完美运行，现在我正尝试从 Visual Studio 中的构建后步骤启动它。

经过几次不同的尝试让它吃午饭并成功运行后，我目前对 VS2010 中“构建后事件”的“命令行”属性进行了以下配置。

所有这些都在 Post-Build 配置中的一行中，但我将文本包装在这里只是为了便于阅读：

```
C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe -NonInteractive
-File "$(SolutionDir)testScript.ps1"
-ConfigurationFile "$(SolutionDir)configuration.txt"
-SolutionDir "$(SolutionDir)"
-Platform "$(Platform)"
-Configuration "$(Configuration)" 
```

powershell 脚本需要 4 个强制参数：ConfigurationFile、SolutionDir、Platform 和 Configuration。如您所见，我提供了上面的每个参数，并将它们括在双引号中以防止值中出现空格。

在 VS2010 中，SolutionDir 宏展开为有空格的路径，Platform 展开为“Release”，Configuration 展开为“Win32”。

当构建后步骤执行时，这是我得到的错误：

```
testScript.ps1 : Cannot process command because of one or more missing
mandatory parameters: Platform Configuration.
    + CategoryInfo          : InvalidArgument: (:) [testScript.ps1], 
    ParentContainsErrorRecordException
    + FullyQualifiedErrorId : MissingMandatoryParameter,testScript.ps1 
```

...任何想法我可能会错过什么？它显然能够在 $(SolutionDir) 中找到脚本，但我不知道它是否在获取任何命令行参数。$(SolutionDir) 中的尾随 '\' 字符会挂起吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-04T01:31:27.047

变量`$(SolutionDir)`，因为它是一个以反斜杠“\”结尾的目录。因此，当变量展开时，for 的参数`-SolutionDir "$(SolutionDir)"`如下所示：

```
-SolutionDir "c:\Your Solution Dir\" 
```

当它被解析时，最后的斜杠有效地转义了右引号，并且 shell 解析器看不到参数的结尾，因此将`-SolutionDir`其余参数“吸入”到 SolutionDir 参数中的参数。您可以通过添加尾部斜杠来用另一个反斜杠转义最终的反斜杠来解决此问题：

> -SolutionDir "$(SolutionDir)\"

# c - 有哪些第三方选项可用于在 C 中处理字符串？

> ID：12718734
> 
> 赞同：2
> 
> 时间：2012-10-04T00:21:21.243
> 
> 标签：c, string, libraries, arrays

我已经意识到我在 Python 中的编码速度比在 C 中快 17 倍，我想我有点假设我不是一个程序员，直到我真正考虑它并意识到唯一的问题是我可以'不处理 C 字符串/字符数组/字符指针/任何东西。我对它们有一个障碍，操纵它们需要我几个小时。我在 C++ 中没有这个问题。

但是现在生活迫使我用纯 C 编写代码，我正在尝试寻找是否可以添加一些第三方库来让我的生活更轻松。我做了一些谷歌搜索，但我并没有真正找到太多。我开始考虑自己做，但我觉得我会重新发明轮子。那里肯定有东西吗？有谁知道这样的事情？在这方面使 C 更像 C++ 的东西。我意识到这是一个愚蠢的想法，因为那是 C++ 的重点，但你明白，我敢肯定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T00:24:39.427

有[Better String Library](http://bstring.sourceforge.net/)，这是一个用于处理“字符串”的纯 C 库，它试图避免标准 C 字符串处理的许多问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T00:27:37.320

[http://developer.gnome.org/glib/2.34/glib-utilities.html](http://developer.gnome.org/glib/2.34/glib-utilities.html)

[http://developer.gnome.org/glib/2.34/glib-Strings.html](http://developer.gnome.org/glib/2.34/glib-Strings.html)

它是 gnome 的基础，但我认为你可以独立于 gnome 使用它。根据概述页面，“它适用于许多类 UNIX 平台，以及 Windows 和 OS X。”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T01:34:09.040

您可以通过阅读有关 SO 的相关问题来开始解决您的指针/数组/字符串问题。不乏这样的问题。

为了编写包含指针/数组/字符串的正确 C 代码，您必须学习和理解一些重要的事情：

1.  指针、数组、指向指针的指针、指向数组的指针、数组的数组、指针的数组等等的声明。对于外行来说，C 声明确实很奇怪。但是，它们是可学习的，并且有一些类似的工具`cdecl`可以快速将 abracadabrish 声明翻译成简单的英语或其他方式。
2.  如果你看到一个函数将它的一个参数声明为一个数组（例如`void f(int a[])`），不要相信你的眼睛。它是一个指针，而不是一个数组。在 C 中，数组永远不会作为函数参数传递。仅传递指针。语法具有欺骗性，C 语言的创建者已经/对这样的事情感到抱歉，但现在这都是历史了。你不能改变它。
3.  在所有 C 表达式中（不要与声明和定义混淆），除了大约一个，数组表现为指向其第一个元素的指针。运营商是个例外`sizeof`。`sizeof(array)`将返回你真正的数组大小`chars`。但是当你这样做的时候`sizeof(array+0)`，你已经转换`array`为指向指针类型的表达式，`array[0]`在这种情况下`sizeof`将返回指针的大小。
4.  您不能分配数组。您可以在定义它们时初始化它们，您可以复制它们，但在定义它们`=`之后不能分配。
5.  C 中没有基本类型形式的字符串。只有`chars`, 数组`chars`和指向数组的指针`chars`和指向数组的指针`chars`，我们经常将它们都称为字符串，但实际上并非如此。您看到的字符串，例如`"I am a string. Or maybe I'm not."`称为字符串文字，并且在某处有一个`chars`与之关联的数组。我在某处说，因为字符串文字在不同的上下文中表现不同。在所有 C 表达式（不要与声明/定义混淆）中，除了大约一个之外，字符串文字表现为指向`char`包含文字文本的数组的第一个的指针。再次，例外是`sizeof`。`chars`它会以类似的方式返回底层数组的大小`sizeof("ABC")`. 同样，就像数组一样，在您编写 的那一刻`sizeof("ABC"+0)`，您已转换`"ABC"`为指向的指针`char`并将`sizeof`返回指针的大小。
6.  您不得尝试修改`char`由字符串文字创建的数组：`"ABC"[0] = 'Z';`这是未定义的行为。`char* p = "ABC"; p[0] = 'Z';`或等价物也是如此`char* p = "ABC"; *p = 'Z';`。
7.  您可以使用字符串文字来初始化数组`chars`或指向的指针`chars`（您也可以将字符串文字分配给指针，但不能分配给数组，数组不可分配，如前所述）。会发生什么取决于您正在初始化什么。In`char a[] = "Hello";`或 in`char a[] = { "Hello!" };`您创建一个数组，`chars`并将其内容设置为字符串文字中的文本。如果需要，您可以在之后修改该数组。在`char* p = "World!";`您创建一个`char`包含文字字符串文本的数组，并创建一个指向该数组`char`第一个的指针`char`。在这种情况下，您不能像我之前指出的那样更改数组。
8.  由空格分隔的两个或多个相邻字符串文字合并为一个：`"Hello" " World!"`与`"Hello World!"`.
9.  还有指针算术，但很简单。

这是关于它的。主声明、表达式和函数参数中的主数组，注意你的字符串文字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T00:27:33.747

虽然并不总是需要重新发明轮子。我倾向于认为通过这样做，您可以更好地了解事物的运作方式。虽然，不确定您正在使用哪种类型的时间框架。否则，正如另一个答案中提到的，更好的字符串库是一个非常好的。

# iphone - 适用于 iPad 上家庭 iPhone 的 Objective c 笔尖框架尺寸

> ID：12718736
> 
> 赞同：0
> 
> 时间：2012-10-04T00:21:52.757
> 
> 标签：iphone, objective-c, ios5

在 GUI 向导提供的选择中，我为每个带有“iPhone”家族的 viewController 做了一个笔尖。我让它在 iPad 和 iPhone 上工作（没有单独的 iPad 笔尖），因为我不会被打扰，我不明白这一点。我宁愿只为所有人准备一个笔尖（尤其是现在新的 iPhone 5 已经推出（屏幕尺寸不同）。

在我在 iPad 上的一个页面上，视图左对齐并且 iPhone 的大小（因为家庭：iPhone）。让这些笔尖同时工作的最佳方法是什么？初始化 viewControlers 后是否需要重置 frame.width 和 frame.height？IE 通过将其设置为 window.width 之类的东西？

编辑：我想出的是下面，这将是安全代码吗？

在每个 VC 的每个 viewDidLoad 方法中，我都会这样做：

```
self.view.frame = [[UIScreen mainScreen] bounds]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T01:57:06.230

为 iPhone 和 iPad 界面使用一个 xib/nib 文件的最佳方法是为您`UIView`的[AppleDocs](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instp/UIView/autoresizingMask)设置适当的自动调整掩码：

> 一个整数位掩码，用于确定接收器在其父视图的边界发生变化时如何调整自身大小。

在 iOS 6 中，它现在发布了进行自动调整的新方法：

> 使用布局约束自动定位视图（iOS 6 及更高版本）。您覆盖 updateViewConstraints 以添加视图尚未配置的任何必要的布局约束。此方法的实现必须调用 [super updateViewConstraints]。

您可以尝试在此处找到更多信息：[Cocoa Auto Layout Guide](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html#//apple_ref/doc/uid/TP40010853)

# javascript - 使用 Jquery 在页面上的任意位置单击关闭下拉菜单

> ID：12718739
> 
> 赞同：2
> 
> 时间：2012-10-04T00:22:22.953
> 
> 标签：javascript, jquery, html, javascript-events

到目前为止，我有以下代码：

```
<div id="wrapper">
<div id="user_info">
<p>Signed in as <span>max</span></p>
<ul>
<li><a href="#">Help</a></li>
<li id="siteSelector"><a href="#" class="">Switch to&#9660;</a>
<ul>
 <li><a href="JavaScript:void(0);">Item 1</a></li>
<li><a href="JavaScript:void(0);">Item 2</a></li>
<li><a href="JavaScript:void(0);">Item 3</a></li>
<li><a href="JavaScript:void(0);">Item 4</a></li>
</ul>
</li>
<li><a href="#">Sign Out</a></li>
</ul>
</div>
</div> 
```

CSS

```
#wrapper {
width: 1200px;
}
#user_info {
margin: 0 auto;
text-align: right;
width: 250px;
}
#user_info p {
color: #333333;
margin-bottom: 0;
margin-right: 1.6em;
}
#user_info ul {
margin-top: 5px;
}
#user_info ul li {
float: left;
list-style-type: none;
padding: 5px 3px;
}
#user_info a {
color: #0B594A;
}
#siteSelector {
position: relative;
}
#siteSelector > a {
padding: 0 10px;
}
#siteSelector ul {
display: none;
}
#siteSelector ul li {
text-align: left;
width: 95%;
}
.siteSelect_anchor {
background: none repeat scroll 0 0 #0B594A;
border-radius: 6px 6px 0 0;
color: #FFFFFF !important;
display: block;
margin-top: -5px;
padding-top: 5px !important;
text-decoration: none;
}
.siteSelect_ul {
background: none repeat scroll 0 0 #FFFFFF;
border-color: #0B594A;
border-radius: 6px 6px 6px 6px;
border-style: solid;
border-width: 5px;
box-shadow: 0 5px 20px #666666;
display: block !important;
height: auto;
left: 0;
padding-bottom: 15px;
position: absolute;
top: 20px;
width: 59px;
z-index: 250;
}
.siteSelect_ul a {
margin-left: -30px;
} 
```

和 JS：

```
 function clickNav() {
        $("#siteSelector").click(function() {
            $("a:first", this).toggleClass('siteSelect_anchor');
            $("ul:first", this).toggleClass('siteSelect_ul');
            $(".siteSelect_ul li").click(function(e) {
                var liTxt = $(this, ">a").text();
                $("#siteSelector > a").text(liTxt);
                     e.stopPropagation();
               });
                $(document).click(function() {
                     $("a:first", this).removeClass('siteSelect_anchor');
                     $("ul:first",this).removeClass('siteSelect_ul');
                });
            });
        } 
```

单击即可打开下拉菜单，但仅当您再次单击时才会关闭`#siteSelector`。如果有人单击页面上的任何位置，我需要关闭它，这就是我使用它的原因，`$(document).click(function)`但它不起作用，我不知道为什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T00:28:20.183

也许将文档上的点击处理程序更改为：

```
$(document).click(function(event) {
    if (! $(event.target).parents().andSelf().is("#siteSelector")) {
        $("a:first", this).removeClass('siteSelect_anchor');
        $("ul:first",this).removeClass('siteSelect_ul');
    }
}); 
```

`#siteSelector`此外，将其移到元素的单击处理程序之外。似乎您正在为`#siteSelector`单击处理程序中的列表项和文档绑定处理程序。这会导致问题。每次单击`#siteSelector`元素时，都会在其他事物上绑定单击处理程序的新副本，这将导致它们多次运行，从而导致各种奇怪的不良行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:53:08.050

这是你想要的吗？

[http://jsfiddle.net/VVS3T/11/](http://jsfiddle.net/VVS3T/11/)

JS

```
function clickNav() {
    $("#siteSelector").click(function() {
        $("a:first", this).toggleClass('siteSelect_anchor');
        $("ul:first", this).toggleClass('siteSelect_ul');
    });
    $(".item").click(function() {
       $("#siteSelector > a").text($(this).text());
   });
}
$(clickNav);
$(document).bind("click", function(e) {
    if(e.target.id != "siteSelectorAnchor" && !$(e.target).hasClass('item')) {
       $("#siteSelector a:first").removeClass('siteSelect_anchor');
       $("#siteSelector ul:first").removeClass('siteSelect_ul');
    }
});
​ 
```

HTML

```
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />

    </head>

<body>
  <div id="wrapper">
    <div id="user_info">
       <p>Signed in as <span>max</span></p>
        <ul>
          <li><a href="#">Help</a></li>
            <li id="siteSelector">
                <a id="siteSelectorAnchor" href="#" class="">Switch to&#9660;</a>
                <ul>
                    <li><a class="item" href="JavaScript:void(0);">Item 1</a></li>  
                    <li><a class="item" href="JavaScript:void(0);">Item 2</a></li>
                    <li><a class="item" href="JavaScript:void(0);">Item 3</a></li>
                    <li><a class="item" href="JavaScript:void(0);">Item 4</a></li>
                </ul>
            </li>
            <li><a href="/c/portal/logout">Sign Out</a></li>
        </ul>
    </div>

    <footer>

    </footer>
    </div>
    </body>
</html>
​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T00:29:46.600

您应该将您`$(document).click` 的所有事件回调移出。否则每次单击 $("#siteSelector") 时它都会被绑定。并且在第一次单击时它不起作用，因为单击事件尚未绑定到文档。

修改代码：[jsfiddle](http://jsfiddle.net/gqatu/3/)

```
 function clickNav( ) {
    $("#siteSelector").click(function( ) {
        $("a:first", this).toggleClass('siteSelect_anchor');
        $("ul:first", this).toggleClass('siteSelect_ul');        
        return false;
    });
    console.log($("#siteSelector li").length);
    $("#siteSelector li").click(function( e ) {
            var liTxt = $("a", this).text();
        console.log(liTxt, $("#siteSelector > a").length);
            $("#siteSelector > a").text(liTxt);
            e.stopPropagation();
            return false;
        });
    $(document).click(function( ) {
         console.log("a");
        $("a:first", $("#siteSelector")).removeClass('siteSelect_anchor');
        $("ul:first", $("#siteSelector")).removeClass('siteSelect_ul');
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T00:30:43.550

我过去用过`$("body").mouseup()`：

```
var visible = false;

$("#siteSelector").click(function() {
    // your code from above, plus:
    visible = true;
}

$("body").mouseup(function(){ 
    if (visible) {
        $("a:first", this).removeClass('siteSelect_anchor');
        $("ul:first",this).removeClass('siteSelect_ul');
        visible = false;
    }
}); 
```

# r - chart.Correlation 自变量与因变量可视化

> ID：12718743
> 
> 赞同：0
> 
> 时间：2012-10-04T00:22:53.280
> 
> 标签：r, ggplot2, time-series, correlation

在 R 中，我有一个包含一个自变量和 9 个因变量的数据集，我想查看散点图、直方图以及相关值，如 in`chart.Correlation()`但我不想看到因变量之间的相关性......这是不必要的。

即在下面的模拟示例中，我只关心/想要查看顶行和最左侧的列，以及所有直方图、所有红线和重要性星等，但我不关心/不关心想要所有其他散点图和相关值。这是否可能/是否有一种巧妙的方法可以在一个可视化中查看所有这些...即自变量与所有因变量...？

模拟示例：

```
d <- xts(matrix(rnorm(10000),ncol=10), Sys.Date()-1000:1)
library(PerformanceAnalytics)
chart.Correlation(d) 
```

附带说明...我对从...产生的一些相关值的字体大小有点恼火`chart.Correlation`...任何方式来设置最小和最大字体大小，以便字体大小不会变得不可读.. .

此外，请随意使用您认为可能有助于找到问题解决方案的任何其他软件包（例如 ggplot2 等）。

提前致谢

编辑：

所以这就是我到目前为止使用`ggplot`的方法`plyr`......我仍然缺少自变量的直方图......哦，`multiplot`来自这里： [http ://wiki.stdout.org/rcookbook/Graphs/多个%20graphs%20on%20one%20page%20(ggplot2)/](http://wiki.stdout.org/rcookbook/Graphs/Multiple%20graphs%20on%20one%20page%20(ggplot2)/)

现在已将其作为答案包含在内...但是任何其他建议/改进都会受到好评....

```
require(plyr)
require(ggplot2)

indep.dep.cor <- function(xts.obj, title=""){

        # First column always assumed to be independent
        df <- data.frame(coredata(xts.obj))
        assign('df',df,envir=.GlobalEnv)

        df.l <- melt(df, id.vars=colnames(df)[1], measure.vars=colnames(df)[2:ncol(df)])
        assign('df.l',df.l, envir=.GlobalEnv)

        cor.vals <- ddply(df.l, c("variable"), summarise, round(cor(df[,1],value),3))
        stars <- ddply(df.l, c("variable"), summarise, symnum(cor.test(df[,1],value)$p.value, corr = FALSE, na = FALSE, cutpoints = c(0, 0.001, 0.01, 0.05, 0.1, 1), symbols = c("***", "**", "*", ".", " ")))
        cor.vals$stars <- stars[,2]
        assign('cor.vals',cor.vals,envir=.GlobalEnv)

        bin.w <- min((ddply(df.l,c("variable"),summarise,diff(range(value))/30))[,2])

        m1 <- ggplot(df.l,aes_string(x="value"))+
            facet_grid(.~variable)+
            stat_density(aes(y=..density..),fill=NA, colour="red", size=1.2)+
            geom_histogram(aes(y=..density..),fill="white", colour="black", binwidth=bin.w)+
            opts(title=title)

        m2 <- ggplot(df.l,aes_string(x=colnames(df.l)[1], y="value"))+
            facet_grid(.~variable)+geom_point(aes(alpha=0.2))+
            opts(legend.position="none")+
            geom_text(data=cor.vals,aes(label=paste(cor.vals[,2],cor.vals[,3]),size=abs(cor.vals[,2])*2,colour=cor.vals[,2]),x=Inf,y=Inf,vjust=1,hjust=1,show_guide=FALSE)+
                scale_colour_gradient(low = "red", high="blue")+
                geom_smooth(method="loess")

        multiplot(m1,m2,cols=1)
}

indep.dep.cor(d) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:00:11.693

所以这就是我到目前为止使用`ggplot`的方法`plyr`......我仍然缺少自变量的直方图......哦，`multiplot`来自这里： [http ://wiki.stdout.org/rcookbook/Graphs/多个%20graphs%20on%20one%20page%20(ggplot2)/](http://wiki.stdout.org/rcookbook/Graphs/Multiple%20graphs%20on%20one%20page%20(ggplot2)/)

```
require(plyr)
require(ggplot2)

indep.dep.cor <- function(xts.obj, title=""){

        # First column always assumed to be independent
        df <- data.frame(coredata(xts.obj))
        assign('df',df,envir=.GlobalEnv)

        df.l <- melt(df, id.vars=colnames(df)[1], measure.vars=colnames(df)[2:ncol(df)])
        assign('df.l',df.l, envir=.GlobalEnv)

        cor.vals <- ddply(df.l, c("variable"), summarise, round(cor(df[,1],value),3))
        stars <- ddply(df.l, c("variable"), summarise, symnum(cor.test(df[,1],value)$p.value, corr = FALSE, na = FALSE, cutpoints = c(0, 0.001, 0.01, 0.05, 0.1, 1), symbols = c("***", "**", "*", ".", " ")))
        cor.vals$stars <- stars[,2]
        assign('cor.vals',cor.vals,envir=.GlobalEnv)

        bin.w <- min((ddply(df.l,c("variable"),summarise,diff(range(value))/30))[,2])

        m1 <- ggplot(df.l,aes_string(x="value"))+
            facet_grid(.~variable)+
            stat_density(aes(y=..density..),fill=NA, colour="red", size=1.2)+
            geom_histogram(aes(y=..density..),fill="white", colour="black", binwidth=bin.w)+
            opts(title=title)

        m2 <- ggplot(df.l,aes_string(x=colnames(df.l)[1], y="value"))+
            facet_grid(.~variable)+geom_point(aes(alpha=0.2))+
            opts(legend.position="none")+
            geom_text(data=cor.vals,aes(label=paste(cor.vals[,2],cor.vals[,3]),size=abs(cor.vals[,2])*2,colour=cor.vals[,2]),x=Inf,y=Inf,vjust=1,hjust=1,show_guide=FALSE)+
                scale_colour_gradient(low = "red", high="blue")+
                geom_smooth(method="loess")

        multiplot(m1,m2,cols=1)
}

indep.dep.cor(d) 
```

# iphone - 使用 Game Center 的回合制比赛进行俄罗斯方块或宝石迷阵等游戏

> ID：12718745
> 
> 赞同：2
> 
> 时间：2012-10-04T00:23:14.280
> 
> 标签：iphone, objective-c, ios, game-center, gamekit

我正在构建一个类似于宝石迷阵的游戏。我计划集成 Game Kit 以允许玩家与朋友对战。我想要的流程是：

*   玩家 1 挑战朋友
*   播放器 1 开始播放。玩家 2 可能会或可能不会同时开始游戏。他可能会立即或几天后开始比赛。
*   当两者都完成后，比较分数以确定谁是赢家。两人都被警告了。

我认为Game Kit的轮流是要走的路。但这并不是真正的回合制游戏，因此它并不适合这种用法。

因为我不希望玩家 2 必须等待玩家 1 完成才能开始，我想我可以让玩家 1 的“第一轮”简单地将棋盘状态发送给玩家 2。我不'不希望玩家 1 必须等待玩家 2 完成才能开始玩。

到目前为止，我正在考虑两种方法，但我希望其他人可能有更好的主意。

方法 1：玩家 1 的“第一轮”是将棋盘状态发送给玩家 2。玩家 1 现在可以玩棋盘，他的分数存储在本地，检索它的密钥是比赛号码。每当玩家 2 完成比赛时，他的得分就会在 matchData 中发送回玩家 1。玩家 1 会收到通知，轮到他了。当他重新开始比赛时，将检索他本地存储的分数并与玩家 2 进行比较。此时宣布获胜者。这并不理想，因为玩家 1 必须重新登录，即使他已经玩完了。

方法 2：与方法 1 一样，玩家 1 的“第一轮”是将棋盘状态发送给玩家 2。玩家 1 可以玩棋盘，但现在他的分数被发布到 Rails 服务器（或者可能类似于 Parse.com 以简化它）。在玩家 2 完成他的回合后，会进行 api 调用以查看玩家 1 是否已经完成。如果他有，则检索并比较分数并确定获胜者。如果没有得分，则玩家 2 回合结束并将控制权交还给玩家 1。当玩家 1 完成时，比较两个分数并确定获胜者。这里唯一的问题是我必须在我不想的时候创建一个后端。

无论如何，建议表示赞赏！谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T05:26:40.240

我不完全是 Game Center 方面的专家，但基于回合的比赛支持听起来像是适合这项工作的错误工具。

您的异步多人游戏听起来有点像您在 Jetpack Joyride 中看到的，如 WWDC 2012 Session 500 中演示的那样（游戏技术启动 -[视频](http://developer.apple.com/videos/wwdc/2012/)大约 10 分钟）。他们使用 Game Center 的新“得分挑战”功能，但通过提供其他玩家的幽灵来进行比赛来增强它。他们通过记录您的比赛来做到这一点，并且当您挑战其他玩家时，将记录上传到他们的服务器，并由他们存储在`context`字段中的 64 位值标识`GKScore`。当您的朋友接受挑战时，他的游戏副本会从分数挑战中提取该值，并使用它从服务器查找和下载记录的比赛数据。

# c++ - C++ 的高级音频库

> ID：12718747
> 
> 赞同：1
> 
> 时间：2012-10-04T00:23:31.983
> 
> 标签：c++, audio, cross-platform, media

我需要知道，是否有任何库可以处理此功能：

1.  解码主要格式（Mp3、Wav、Ogg 等）
2.  处理采样率、音量、持续时间、搜索等...
3.  使用库，允许您创建均衡器的功能
4.  处理通道数（立体声、单声道等）
5.  检测音频设备（输出和输入）并选择我要流式传输的设备
6.  获取歌曲、标题、专辑和歌曲默认采样率的信息。

我已经厌倦了寻找可以执行这 6 个功能的库。我不知道你能不能帮我解决这个问题。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T01:04:16.753

**[`FFmpeg`](http://ffmpeg.org)**

我很震惊没有人在我之前推荐它。它是一个开源库，能够转换你扔给它的任何媒体文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T00:30:24.007

查看 BASS： [http ://www.un4seen.com/](http://www.un4seen.com/)

它可以做你想做的大部分事情。我认为它唯一不做的就是获取元数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T00:30:54.883

您是否听说过或研究过[Audiere](http://audiere.sourceforge.net/)或 OpenAL？

# linux - LINUX：如何查找（grep）从根目录开始的文件？

> ID：12718751
> 
> 赞同：1
> 
> 时间：2012-10-04T00:23:47.857
> 
> 标签：linux, terminal, grep, root

我试图在 /usr 及其包含“main”的子目录中找到所有 c 文件，但我不知道如何让它从根目录开始搜索。我假设当前目录不在或者是 usr。所以我尝试了 grep -r "main" /usr/*.c 有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T00:27:16.643

```
find /usr -name "*.c" -exec grep -l main {} \; 
```

是一个简单的版本，它单独 greps /usr 中的每个 .c 文件并输出它的名称。

您可以通过`xargs`减少对 grep 的调用来改进它：

```
find /usr -name "*.c" | xargs grep -l main 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:49:30.877

```
WHERETOLOOK=/
find $WHERETOLOOK -type f -iname "*.c" | xargs grep main

EXAMPLES:

$ find / -type f -iname "*.txt" 2> /dev/null | xargs grep INST | head -n 3
grep: /opt/android-sdk/SDK/opt/sun-jdk-1.6.0.33/db/demo/programs/vtis/data/svn_log.txt:Adding message for DATA_SQLDATA_READ_INSTANTIATION_EXCEPTION.
/opt/sun-jdk-1.6.0.33/db/demo/programs/vtis/data/svn_log.txt:        - When a log record is encountered, set newFileStart to INVALID_LOG_INSTANT.
/opt/android-sdk/platforms/android-10/images/NOTICE.txt:DOWNLOADING, INSTALLING, COPYING OR OTHERWISE USING UNICODE INC.'S DATA

$ find /usr/share/ -type f -iname "*.txt" | xargs grep INST | head -n 3
/usr/share/games/holotz-castle/game/menu/sv/menu.txt:INSTÄLLNINGAR
/usr/share/webapps/phpmyadmin/3.5.2.2/postinst-en.txt:   mkdir ${MY_INSTALLDIR}/config
/usr/share/webapps/phpmyadmin/3.5.2.2/postinst-en.txt:   chown ${VHOST_SERVER_UID}:${VHOST_SERVER_UID} ${MY_INSTALLDIR}/config
xargs: grep: terminated by signal 13 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T01:13:06.570

如果您安装了[ack](http://betterthangrep.com/)（在 Debian/Ubuntu 中称为 ack-grep），您可以简单地`ack -l --cc main`从 /usr 运行并得到结果。

# intellij-idea - 如何在 IDEA 中下载 Gradle 项目的依赖源？

> ID：12718753
> 
> 赞同：51
> 
> 时间：2012-10-04T00:24:20.143
> 
> 标签：intellij-idea, gradle

看来eclipse插件使用以下机制来做到这一点：

```
apply plugin: 'java'
apply plugin: 'eclipse'

eclipse {
    classpath {
       downloadSources=true
    }
} 
```

但我找不到想法插件的相应选项。我错过了什么？

这是 build.gradle 文件：

```
apply plugin: 'groovy'
apply plugin: 'idea'

repositories {
    mavenCentral()
    mavenRepo name: "Grails", url: "http://repo.grails.org/grails/repo/"
}

dependencies {
    groovy 'org.codehaus.groovy:groovy-all:2.0.4'
    compile 'org.slf4j:slf4j-log4j12:1.6.6', 'postgresql:postgresql:9.1-901.jdbc4', 'net.sourceforge.nekohtml:nekohtml:1.9.16'
    ['core', 'hibernate', 'plugin-datasource', 'plugin-domain-class'].each { plugin ->
        compile "org.grails:grails-$plugin:2.1.0"
    }
}

idea {
    module {
        downloadJavadoc = true
        downloadSources = true
    }
}

// Fat Jar Option (http://docs.codehaus.org/display/GRADLE/Cookbook#Cookbook-Creatingafatjar)
jar {
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
}

task wrapper(type: Wrapper) {
    gradleVersion = '1.0'
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-12-10T07:45:40.747

我在以下配置中遇到问题：

```
主意 {
    模块 {
        // 如果你讨厌浏览 Javadoc
        下载Javadoc = false

        // 并且喜欢阅读资源 :)
        下载源 = true
    }
}

存储库{
    mavenLocal()
    mavenCentral()
}

```

`mavenLocal()`下载并附加删除的源时。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2019-09-20T12:56:51.270

对于 Kotlin DSL：

```
plugins {
    idea
}

idea {
    module {
        isDownloadJavadoc = true
        isDownloadSources = true
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-07T03:11:41.073

如果`mavenLocal()`由于对快照 jar 的依赖（或其他原因）需要保留存储库，则可以使用 maven 获取源 jar。

```
mvn dependency:get -Dartifact=GROUP_ID:ARTIFACT_ID:VERSION:jar:sources 
```

例如，

```
mvn dependency:get -Dartifact=org.springframework:spring-core:5.1.2.RELEASE:jar:sources 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-07-30T10:11:17.763

我注意到，当您已经下载了一个 jar 时，它的源代码在更改*build.gradle*后没有下载。

从我的主目录中删除*.m2*并调用*gradle 有所*帮助。

# c# - 如何在列表框中加载所有已知的颜色？

> ID：12718754
> 
> 赞同：1
> 
> 时间：2012-10-04T00:24:20.443
> 
> 标签：c#, wpf, c#-4.0

我想在我的`listBox`. 我也对字体使用相同的东西，但我不知道颜色。我的意思是，我不知道如何枚举所有已知的颜色。

```
foreach (FontFamily F in Fonts.SystemFontFamilies)
        {
            ListBoxItem l = new ListBoxItem();
            l.Content = F.ToString();
            l.FontFamily = F;
            listbox1.Items.Add(l);
        } 
```

如何做同样的事情`Color`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T04:50:14.613

您可以从[KnownColor获取颜色](http://msdn.microsoft.com/en-us/library/system.drawing.knowncolor.aspx)

```
KnownColor[] colors  = Enum.GetValues(typeof(KnownColor));
foreach(KnownColor knowColor in colors)
{
  Color color = Color.FromKnownColor(knowColor);

    ListBoxItem listItem = new ListBoxItem();
    listItem.Content = color.ToString();
    listItem.Color = color ;
    listbox1.Items.Add(listItem);
} 
```

[这](http://www.dreamincode.net/code/snippet1405.htm)是检索颜色的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T00:31:16.850

`Color`是一个结构，因此不在 的范围内`IEnumerable`，所以你必须像这样：

```
 foreach (Color color in Enum.GetValues(typeof(KnownColor))
    {
        ListBoxItem l = new ListBoxItem();
        l.Content = color.Name;
        l.Color = color;
        listbox1.Items.Add(l);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T04:09:11.877

你也可以试试这个

[链接到文章](http://www.codeproject.com/Articles/19356/Multi-color-DropDownList-using-C)

```
private List finalColorList()
{ 
    string[] allColors = Enum.GetNames(typeof(System.Drawing.KnownColor));
    string[] systemEnvironmentColors = 
        new string[(
        typeof(System.Drawing.SystemColors)).GetProperties().Length];

    int index = 0;

    foreach (MemberInfo member in (
        typeof(System.Drawing.SystemColors)).GetProperties())
    {
        systemEnvironmentColors[index ++] = member.Name;            
    }

    List finalColorList =  new List();

    foreach (string color in allColors)
    {
        if (Array.IndexOf(systemEnvironmentColors, color) < 0)
        {
            finalColorList.Add(color);
        }                           
    }
    return finalColorList;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T00:54:39.037

```
 var colorProperties = Colors.GetType().GetProperties(BindingFlags.Static | BindingFlags.Public);
    var colors = colorProperties.Select(prop => (Color)prop.GetValue(null, null));
    foreach(Color c in colors)
    {
        ListBoxItem l = new ListBoxItem();
        l.Content = c.ToString();
        l.Color = c;
        listbox1.Items.Add(l);
    } 
```

# ruby-on-rails - Ruby on Rails - 缓存变量

> ID：12718759
> 
> 赞同：7
> 
> 时间：2012-10-04T00:25:53.490
> 
> 标签：ruby-on-rails, ruby, caching, activerecord, memcached

我在控制器中设置了这两个变量。我如何缓存这些，这样它们就不会每次都与数据库通信，只有第一次。

```
@tablenutrients = Nutrient.find(:all)
@columnnutrients = @tablenutrients.collect {|x| x.nutrient} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-04T00:49:09.253

@djlumley 说了什么。

通常，您还可以配置和使用[ActiveSupport::Cache::Store](http://api.rubyonrails.org/classes/ActiveSupport/Cache/Store.html#method-i-fetch)来显式存储您自己的自定义变量。然后，您可以获取/设置缓存值，例如，如下所示：

```
@tablenutrients = Rails.cache.fetch("tablenutrients") do 
  Nutrient.find(:all)
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T00:42:55.803

如果您的数据库设置正确，它应该默认缓存您的数据。如果您使用的是 MySQL 或 postgresql，您可以更改缓存使用的 RAM 数量，以确保您获得高缓存命中率。

[除了简单的数据库缓存之外，使用Dalli 之](https://github.com/mperham/dalli)类的东西连接到 memcached 应该可以相当容易地提高性能。

如果设置正确，Rails 应该利用 memcached 将所有活动记录查询缓存在 memcached 中。[关于缓存](http://guides.rubyonrails.org/caching_with_rails.html)的Rails 指南和[Dalli 文档](https://github.com/mperham/dalli)应该可以帮助您根据正在运行的 Rails 版本开始。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T00:59:48.133

Rails 为您提供了一些内置缓存选项，其中两个可能对您有用，具体取决于您对查询结果所做的操作：

**片段缓存**

如果您将其用作选择框的集合，这是一种常用的表单，我会选择此选项。这将使您不仅可以缓存数据库结果，还可以缓存页面的实际 HTML 部分。只需`<%= cache do %>`在该部分周围添加 a 即可完成，如下所示：

```
<html>
   ...
   <body>
     ...
     <div class='content'>
       ...
       <%= cache do %>
         <%= select "nutrient", "nutrient", Nutrient.all.collect(&:nutrient) } %>
       <% end %> 
```

**铁路缓存**

您还可以编写一个方法来直接与内置缓存存储对话，方法是在**ApplicationController**中删除一个方法，然后让它在**before_filter**回调上运行，如下所示：

**application_controller.rb**

```
class ApplicationController < ActionController::Base
  before_filter :retrieve_nutrients

  def retrieve_nutrients
    @nutrients = Rails.cache.fetch("nutrients") do
      Nutrient.all.collect(&:nutrient)
    end
  end
end 
```

在生产环境中的这两种情况下，您都需要设置 Memcached 或 Redis 来充当缓存层（它们位于 Rails.cache 后面并且很容易实现）。我会查看[Rails Guides](http://guides.rubyonrails.org/caching_with_rails.html)以更深入地了解它。

# asp.net-mvc - PageFlow 应用程序块、MVC4 和 Visual Studio 2010

> ID：12718761
> 
> 赞同：2
> 
> 时间：2012-10-04T00:25:56.743
> 
> 标签：asp.net-mvc, navigation

我正在评估技术、原型设计并可能为一组使用 ASP.Net WebForms、UIP、Unity、MVP 和包装 Entlib 3.1 的自定义框架编写的基于 Web 的应用程序定义应用程序架构。当前工具包存在的一些问题是：

1.  很难利用最新的客户端技术将渐进增强构建到表示层中。

2.  用户控件本质上难以重用，并且生成服务器控件的复杂性增加了它们的广泛使用。

3.  母版页概念不提供组织范围内的重用。无论如何，它需要由项目团队大量定制。

4.  生成可访问、兼容和跨浏览器兼容的 HTML 非常困难。

5.  在产品组合中的应用程序之间几乎没有机会使用可重复使用的屏幕（视图）。

我们拥有的关键要求之一是能够生成可配置/可组合的导航流。在当前架构中，UIP 应用程序块相对容易实现这一点。

我们正在评估将 ASP.Net MVC4 用于我们未来的 Web 应用程序的情况。

我的问题是这样的：

有没有人使用 ASP.Net MVC 实现了 UIP 样式的可配置/可组合导航功能？

我遇到了 PageFlow 应用程序块：[http](http://webclientguidance.codeplex.com/wikipage?title=Page%20Flow%20Application%20Block) ://webclientguidance.codeplex.com/wikipage?title=Page%20Flow%20Application%20Block ，它旨在解决这个确切的问题。

我从 wcsf contrib 项目[http://wcsfcontrib.codeplex.com/](http://wcsfcontrib.codeplex.com/)下载了 PageFlow 应用程序块，但源代码甚至无法在 VS2010 上编译。有人用过 PageFlow 应用程序块吗？此应用程序块是否不受支持，因此已过时？

如果您需要为向导式 Web 应用程序提供可配置的导航功能，您会怎么做？

很抱歉这个冗长的问题。我想提供尽可能多的上下文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:03:28.587

我已经能够使用 Visual Studio 2010 构建 PageFlow Guidance 包。源代码可在 codeplex 站点上找到：[http ://wcsfcontrib.codeplex.com](http://wcsfcontrib.codeplex.com)

然而，有一些怪癖。以下是我遵循的步骤：

1.  将“PageFlow Application Block (VSTS Tests).sln”解决方案升级到VS2010

2.  确保针对来自最新 Web 客户端指导包二进制文件的 Entlib 和 Unity 框架版本构建解决方案：[http ://webclientguidance.codeplex.com/](http://webclientguidance.codeplex.com/)

3.  构建此解决方案后，您还可以升级和构建 visx 指导包 - “Pageflow Guidance Package (VSTS Tests).sln”

4.  确保您的 Visual Studio 副本上安装了 GAT2010 和 GAX2010 扩展

5.  确保您引用了 GAX2010 中的 Microsoft.Practices.RecipeFramework* 程序集

6.  pageflow 包和 Web Client Guidance 包之间存在奇怪的依赖关系。这是：Microsoft.Practices.RecipeFramework.Extensions.dll。您必须从 Web Client Guidance 包二进制文件中获取此程序集。

一旦您能够构建 PageFlow 应用程序块和 PageFlow 指导包，您就可以开始了。当与 Asp.Net MVC 结合使用时，PageFlowHttpModule 功能中有几个错误。依赖 .aspx http 扩展名来确定何时使用该模块。这很容易解决。

此应用程序块为您提供了两种在应用程序中配置页面流的潜在方法：

1.  使用 Workflow Foundation 3.0
2.  使用 XML 配置概念，与 UIP 完全相同。

这两者各有利弊。我们希望远离 WF3.0，因为它总体上增加了对旧版本的 Windows 工作流和 AppFabric 的依赖。在有人将其升级到 WF4.0 之前，使用它没有多大意义。

与此同时，PageFlow 应用程序块、MVC4 和 Visual Studio 2010 的工作就像一个魅力，正在做我们想做的一切与导航有关的事情。

# java - 使用递归正则表达式在 Java 中进行词法分析

> ID：12718763
> 
> 赞同：0
> 
> 时间：2012-10-04T00:26:04.347
> 
> 标签：java, parsing, grammar, tokenize, lexer

我正在使用 Java 解析文本。我在下面定义了一个语法：

```
Start := "(\\<)"
Stop := "(\\>)"
Var = "(\\w*)";
Cons = "([0-9]*)";

Type1 := Start ((Var | Cons) | TypeParent) (Type1 ((Var | Cons) | TypeParent))* Stop
Type2 := Start ((Var | Cons) | TypeParent) (Type2 ((Var | Cons) | TypeParent))* Stop

TypeParent := Type1 | Type2

...
etc 
```

我想将所有正则表达式组合成一个字符串模式并一次匹配。我的问题是当我开始在`Type1`and`Type2`行中使用递归语法元素时。我显然不能将递归定义输入到 Java 中的模式中——它只是一个带有正则表达式符号的字符串。

我想要的是我可以以某种方式有一个逻辑开关，它说如果在这个块中：

```
(Type2 ((Var | Cons) | TypeParent) 
```

除了 Type2 之外，所有模式都匹配，我可以捕获所有其他组，然后提取 Type2 令牌应该在的字符串，然后再次递归地将其输入到正则表达式中。最终，我会谈到以下基本情况：

```
(Var | Cons) | TypeParent) 
```

我意识到这不是正则表达式的意思——现在这是一个上下文无关的语法（？），因为它是递归的。但是没有想到一个超级聪明的解析器，我认为这种方法是可以破解的。

想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T00:37:45.580

你是对的。这不是正则表达式的本意。引入递归的那一刻，您就脱离了正则表达式、DFA 的领域，进入了无上下文语言、DPDA、解析器的领域。您需要一个堆栈来处理递归。不，它是不可破解的。

这个语法的解析器没有什么“超级聪明”的。它比您迄今为止所做的要简单得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T00:37:57.477

使用正确的工具来完成工作要容易得多。尝试[CUP](http://www2.cs.tum.edu/projects/cup/)、[ANTLR](http://www.antlr.org/)或[JavaCC](http://javacc.java.net/)。这是一个[ANTLR 示例](https://stackoverflow.com/questions/1931307/antlr-is-there-a-simple-example)。

# xaml - 如何在 FlipView 中获取当前视图？

> ID：12718768
> 
> 赞同：0
> 
> 时间：2012-10-04T00:26:50.060
> 
> 标签：xaml, data-binding, windows-runtime, datatemplate, winrt-xaml

我在 DataTemplate 中有一个带有一些控件的 FlipView。由于它位于 FlipView 中，因此它将生成这些控件的多个副本。如果我想找到当前 FlipView 视图中的控件（即在屏幕上/可见），我该怎么做？

我可以在里面的控件上检查加载的事件，但它会被多次调用，我不知道显示的是哪一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T03:29:12.047

创建一个可以从 ViewModel 绑定到 RichTextBlock 的 Attached Dependency 属性，例如：

```
public static class MyStaticClass
{
    public static readonly DependencyProperty IsVisible = DependencyProperty.RegisterAttached("IsVisible", typeof(bool), typeof(MyStaticClass), new PropertyMetadata(false, OnVisibilityChanged));

    private static void OnVisibilityChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var rtb = (RichTextBlock)d;
        var isVisible = (bool)e.NewValue;

        // Do something to rtb.Inlines  
    }
} 
```

使用此属性，您可以将其绑定到 ViewModel 的 IsSelected 属性：

```
<FlipView ItemsSource="{Binding SomeList}" SelectedItem="{Binding SelectedVM, Mode=TwoWay}">
    <FlipView.ItemTemplate>
        <DataTemplate>
            <RichTextBlock ns:MyStaticClass.IsVisible="{Binding IsSelected}" />
        </DataTemplate>
    </FlipView.ItemTemplate>
</FlipView> 
```

当 SelectedItem 更改时，您可以将子 View Model 上的 IsSelected 设置为 true，这会触发 MyStaticClass.OnVisibilityChanged 事件。

# ruby-on-rails - Rails 权威安装

> ID：12718770
> 
> 赞同：1
> 
> 时间：2012-10-04T00:27:06.273
> 
> 标签：ruby-on-rails, ruby, gem

我们正在为我们的应用程序使用权限。 [关联](https://github.com/nathanl/authority)

如何检查安装？我已经按照文档中的步骤进行操作，但似乎没有调用 ApplicationAuthority 类。我尝试在类中添加错误并且应用程序没有失败。

此外，模型中的这部分也不例外。

```
include Authority::Abilities 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T10:05:23.897

对于遇到此问题的其他任何人 - 您还需要为您的控制器添加授权。 [这](https://github.com/nathanl/authority#controllers)是文档的相关部分 - 本质上，只需添加`authorize_actions_for Model`到顶部，就好像它是`before_filter`.

# api - REST api：识别资源和内容，根据身份验证变化

> ID：12718772
> 
> 赞同：3
> 
> 时间：2012-10-04T00:27:11.100
> 
> 标签：api, http, rest, hateoas

我正在按照 HATEOAS / REST 原则设计一个 API。但是我不确定这个基本点：**资源识别。**

假设这个 url: **/images** 公开了用户上传的所有图像（给这个用户）。

假设我使用 oauth 访问令牌进行身份验证，/images 的内容将根据 Authorization 标头而有所不同。

这是否打破了资源概念的识别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T00:31:21.730

不，资源不必是静态的才能保持安静。想象一个提供时间的 Web 服务：

```
 Http://www.myservice.com/current-time/ 
```

其余剧本中的任何内容都不会要求这不能按预期工作。照片的情况是您的服务正在返回基于请求中设置的信息表示的资源 - 通过 auth 标头过滤掉所有非用户拥有的照片。您仍然返回相同的一般事物，一组照片。

与使用响应类型标头说您希望返回 json 表示与 xml 表示没有太大区别。

当你完全切换结果时，事情会变得很可疑，比如一个人获得了一组图像，而另一个人在同一资源位置提供了上周的 Glee 成绩单。

# php - BigCommerce 类别特定的特色产品

> ID：12718776
> 
> 赞同：0
> 
> 时间：2012-10-04T00:27:21.323
> 
> 标签：php, e-commerce

我想在类别（产品列表）页面中显示特色产品，但特色产品需要在该类别下。

我搜索了很多，但找不到任何答案。因此，如果你们中的任何人都可以让我知道这是否可行以及如何实现，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:44:41.323

你读过这个支持链接吗？

[https://support.bigcommerce.com/questions/1093/How+do+I+create+a+custom+category+template%3F](https://support.bigcommerce.com/questions/1093/How+do+I+create+a+custom+category+template%3F)

我想它可能会对你有所帮助。

# wordpress - 如何覆盖 WordPress 核心功能

> ID：12718782
> 
> 赞同：1
> 
> 时间：2012-10-04T00:28:07.273
> 
> 标签：wordpress, wordpress-theming

我正在尝试编辑当您点击**添加评论**按钮（*来自管理面板*）而不输入评论时出现的错误消息。

![](../Images/a314f1b3121f6f82cb754a753381717a.png)

这是处理此错误消息的`wp_ajax_replyto_comment`函数（来自*wp-admin/includes/ajax-actions.php ）。*

```
function wp_ajax_replyto_comment( $action ) {
    global $wp_list_table, $wpdb;
    if ( empty( $action ) )
        $action = 'replyto-comment';

    check_ajax_referer( $action, '_ajax_nonce-replyto-comment' );

    set_current_screen( 'edit-comments' );

    $comment_post_ID = (int) $_POST['comment_post_ID'];
    if ( !current_user_can( 'edit_post', $comment_post_ID ) )
        wp_die( -1 );

    $status = $wpdb->get_var( $wpdb->prepare("SELECT post_status FROM $wpdb->posts WHERE ID = %d", $comment_post_ID) );

    if ( empty($status) )
        wp_die( 1 );
    elseif ( in_array($status, array('draft', 'pending', 'trash') ) )
        wp_die( __('ERROR: you are replying to a comment on a draft post.') );

    $user = wp_get_current_user();
    if ( $user->exists() ) {
        $user_ID = $user->ID;
        $comment_author       = $wpdb->escape($user->display_name);
        $comment_author_email = $wpdb->escape($user->user_email);
        $comment_author_url   = $wpdb->escape($user->user_url);
        $comment_content      = trim($_POST['content']);
        if ( current_user_can( 'unfiltered_html' ) ) {
            if ( wp_create_nonce( 'unfiltered-html-comment' ) != $_POST['_wp_unfiltered_html_comment'] ) {
                kses_remove_filters(); // start with a clean slate
                kses_init_filters(); // set up the filters
            }
        }
    } else {
        wp_die( __( 'Sorry, you must be logged in to reply to a comment.' ) );
    }

    if ( '' == $comment_content )
        wp_die( __( 'ERROR: please type a comment.' ) );

    $comment_parent = absint($_POST['comment_ID']);
    $comment_auto_approved = false;
    $commentdata = compact('comment_post_ID', 'comment_author', 'comment_author_email', 'comment_author_url', 'comment_content', 'comment_type', 'comment_parent', 'user_ID');

    $comment_id = wp_new_comment( $commentdata );
    $comment = get_comment($comment_id);
    if ( ! $comment ) wp_die( 1 );

    $position = ( isset($_POST['position']) && (int) $_POST['position'] ) ? (int) $_POST['position'] : '-1';

    // automatically approve parent comment
    if ( !empty($_POST['approve_parent']) ) {
        $parent = get_comment( $comment_parent );

        if ( $parent && $parent->comment_approved === '0' && $parent->comment_post_ID == $comment_post_ID ) {
            if ( wp_set_comment_status( $parent->comment_ID, 'approve' ) )
                $comment_auto_approved = true;
        }
    }

    ob_start();
        if ( 'dashboard' == $_REQUEST['mode'] ) {
            require_once( ABSPATH . 'wp-admin/includes/dashboard.php' );
            _wp_dashboard_recent_comments_row( $comment );
        } else {
            if ( 'single' == $_REQUEST['mode'] ) {
                $wp_list_table = _get_list_table('WP_Post_Comments_List_Table');
            } else {
                $wp_list_table = _get_list_table('WP_Comments_List_Table');
            }
            $wp_list_table->single_row( $comment );
        }
        $comment_list_item = ob_get_contents();
    ob_end_clean();

    $response =  array(
        'what' => 'comment',
        'id' => $comment->comment_ID,
        'data' => $comment_list_item,
        'position' => $position
    );

    if ( $comment_auto_approved )
        $response['supplemental'] = array( 'parent_approved' => $parent->comment_ID );

    $x = new WP_Ajax_Response();
    $x->add( $response );
    $x->send();
} 
```

我只想覆盖这部分：

```
if ( '' == $comment_content )
        wp_die( __( 'ERROR: please type a comment.' ) ); 
```

这是我的代码，它放在我的主题中`functions.php`

```
function my_function_name() {
    if ( '' == $comment_content )
        wp_die( __( 'My custom message here' ) );
}
add_filter( 'wp_ajax_replyto_comment', 'my_function_name' ); 
```

不幸的是，我的代码不起作用。请帮我！谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T01:03:41.433

有些功能是“可插入的”，您可以在其中覆盖它们，但这不是其中之一。

调整核心功能的唯一方法是使用动作挂钩和过滤器，除非您只想进入并直接编辑核心（不好的做法......升级核心将覆盖您的更改）。

如果您`do_action('something');`在核心中找到 a，则可以使用`add_action('something','my_function');`.

如果您`apply_filters('something', $value)`在核心中找到 ，则可以使用 过滤该 $value `add_filter('something', 'my_function');`。

顺便说一句，在上面的例子中，你会这样做：

```
function my_function($value){
    // manipulate $value
    return $value;
} 
```

确保返回某些内容作为过滤后的值。不幸的是，我似乎找不到任何地方可以解决这个问题:(。

有关详细信息，请参阅[http://codex.wordpress.org/Plugin_API](http://codex.wordpress.org/Plugin_API)。

如果您必须更改该文本，您可以在使用 javascript 加载页面后进行。

# java - Java - ImageIcon 在 FOR 循环中不起作用

> ID：12718784
> 
> 赞同：1
> 
> 时间：2012-10-04T00:28:44.940
> 
> 标签：java, swing, jlabel, imageicon

我在 ImageIcon 数组中声明了 30 个 ImageIcon。我已经使用 FOR 循环声明了它们。唯一的问题是，当我尝试将 ImageIcon 添加到 JLabel 并在屏幕上显示 JPanel 时，它不起作用。这是我的代码：

```
package screens;

import javax.swing.*;

import java.awt.*;

public class gameScreen extends JPanel {
        private static final long serialVersionUID = 1L;
        // -------------VARIABLES---------------//
        Image wallpaper  = (Image)Toolkit.getDefaultToolkit().getImage(getClass().getResource("images/wallpaper.jpg"));

        ImageIcon[] teamsImg = new ImageIcon[30];
        public gameScreen() {

        for(int i = 0;i>30;i++){
            teamsImg[i] = new ImageIcon(Toolkit.getDefaultToolkit().getImage(
        getClass().getResource("images/img.png")));

         }

         JLabel label = new JLabel(teamsImg[27]);
         add(label);

    }

// -------------PAINT FUNCTION----------//
public void paintComponent(Graphics g) {
     g.drawImage(wallpaper,0,0,null);

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T00:44:57.910

我会花很长时间，认真地看看这条线......

```
for (int i = 0; i > 30; i++) { 
```

正如亚当萨维奇所说，“好吧，这就是你的问题”。

就个人而言，我会使用`ImageIO`over `Toolkit.getImage`，除非您有充分的理由不这样做（例如，`Toolkit.getImage`由于网络连接速度较慢，您需要后台加载功能）。 `ImageIO`由于它的插件架构以及保证当它返回时，图像将完全加载，它将使您可以访问更广泛的可能图像格式。

就像是...

```
try {
    wallpaper = ImageIO.read(getClass().getResource("images/wallpaper.jpg"));

    for (int i = 0; i < 30; i++) {

        teamsImg[i] = ImageIO.read(getClass().getResource("images/img.png"));

    }
} catch (IOException iOException) {
    System.err.println("Bad things happened");
    iOException.printStackTrace();
} 
```

这将需要使用`Image`而不是`ImageIcon`存储图像，但它为您带来的好处有点牺牲。

另外，您知道，您一遍又一遍地加载相同的图像？？？您可以只加载一次并设置对数组中每个元素的引用，它实际上是同一件事......（据我了解，图像 API 使用缓存版本来更快地重复加载）

![在此处输入图像描述](../Images/ebcad529dc4ebd44432569dd20794bb4.png)

# arrays - 遍历数组 mips

> ID：12718786
> 
> 赞同：0
> 
> 时间：2012-10-04T00:29:00.313
> 
> 标签：arrays, loops, mips

我正在做一个家庭作业，要求我计算数组中一系列十六进制值的灰度值。这是我理解的部分。我需要遍历这个值数组，直到遇到 -1。这是我所拥有的：

```
 # --------------------------------
# Below is the expected output.
# 
# Converting pixels to grayscale:
# 0
# 1
# 2
# 34
# 5
# 67
# 89
# Finished.
# -- program is finished running --
#---------------------------------

.data 0x0
    startString:    .asciiz "Converting pixels to grayscale:\n"
    finishString:   .asciiz "Finished."
    newline:    .asciiz "\n"
    pixels:     .word   0x00010000, 0x010101,   0x6,        0x3333, 
                0x030c,     0x700853,   0x294999,   -1

.text 0x3000

main:
    ori $v0, $0, 4              #System call code 4 for printing a string
    ori $a0, $0, 0x0            #address of startString is in $a0
    syscall                 #print the string

LOOP:   ori $a0, $0, 0x0 
    lw $t1, 48($a0)
    beq $t1 -1, exit
    addi $t4, $0, 3
    sll $t2, $t1, 8
    srl $s1, $t2, 24    #$s1 becomes red value
    sll $t2, $t1, 16
    srl $s2, $t2, 24    #$s2 becomes green value
    sll $t2, $t1, 24
    srl $s3, $t2, 24    #$s3 become blue value
    add $t1, $s1, $s2
    add $t1, $t1, $s3
    div $t1, $t4
    mflo $s4        #$s4 becomes grayscale value
    or $a0, $0, $s4
    ori $v0, $0, 1
    syscall
    ori $v0, $0, 4
    ori $a0, $0, 43
    syscall
    j LOOP

exit:

    ori $v0, $0, 4              #System call code 4 for printing a string
    ori $a0, $0, 33             #address of finishString is in $a0; we computed this
                        #  simply by counting the number of chars in startString,
                        #  including the \n and the terminating \0

    syscall                 #print the string

    ori $v0, $0, 10             #System call code 10 for exit
    syscall                 #exit the program 
```

我知道循环的每次迭代都需要将 48 增加 4，我只是不知道如何在 MIPS 中执行此操作。任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:28:18.460

您应该做的是使用一些寄存器来保存您正在使用的数组的索引值，并在每次迭代中将该寄存器增量为 4。

将常量放在数组所在的位置也是一个坏主意，因为如果您稍后更改数组内存中的位置，您也必须更新该常量。相反，使用标签并让汇编程序找出实际位置。

假设我们使用寄存器 $a1 来保存索引。然后，我们只需要对您的代码进行一些小改动：

```
 ori $a1, $0, 0x0   # Initialize index with 0
LOOP:  
    lw $t1, pixels($a1)  # We use the label name instead of the actual constant
         ...
         ...
    addi $a1, $a1, 4   # Increment index by 4
    j LOOP 
```

# jquery - getJSON 请求返回 Uncaught Reference & SyntaxError

> ID：12718787
> 
> 赞同：0
> 
> 时间：2012-10-04T00:29:02.457
> 
> 标签：jquery, json, getjson

我正在使用 getJSON 函数来捕获从 URL 调用返回的内容，但是，我一直遇到错误引用或语法错误。

如果我以“agent_name”作为参数运行脚本 getUserAgentDetails()，我会收到未捕获的 ReferenceError，说明 Chome（我正在使用的浏览器）未定义，而如果我使用参数“agent_version”或“os_name”我收到未捕获的语法错误，指出意外的数字。

我相信来自“os_name”的意外数字是由于我的 Windows 7 操作系统中的“7”，所以我怀疑返回时内容处理不正确。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
function getUserAgentDetails(param) {
$(document).ready(function() {
  $.getJSON(('http://www.useragentstring.com/?uas=' + encodeURI(navigator.userAgent) + '&getText=' + param + '&callback=?'), function(data) {
    var parts = data.split('=');
    alert(parts[1]);
  });
});
}

getUserAgentDetails("agent_name"); //Results in "Uncaught ReferenceError: Chrome is not defined"
//getUserAgentDetails("agent_version"); //Results in "Uncaught SyntaxError: Unexpected number "
//getUserAgentDetails("os_name"); //results in "Uncaught SyntaxError: Unexpected number "
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T00:57:26.200

对于请求，例如跨域请求，即；在您的情况下，**json**将不起作用..在这种情况下您需要使用**jsonp ..**

检查此[链接](http://en.wikipedia.org/wiki/JSON#JSONP)

# java - 为什么 Scanner 不能正确读取 Java 中的输入？

> ID：12718788
> 
> 赞同：-1
> 
> 时间：2012-10-04T00:29:31.093
> 
> 标签：java, loops, while-loop, java.util.scanner, equality

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

我写了一个程序，它会“掷骰子”并告诉你需要多少转才能获得 yahtzee。这可行，但是当它要求您再次访问时会出现问题。它会一直给我一个“无效的输入”，而实际上我输入的东西应该退出循环。这是我的代码，循环从第 24-34 行开始，但我会把它全部放好，以防万一早先出现问题。

```
import java.util.Scanner;
import java.util.Random;

public class Yahtzee {

public static void main(String[] args){

    int d[] = {0,0,0,0,0};
    int x = 0;
    Scanner s = new Scanner(System.in);
    Random r = new Random();

    while (1!=0){
        d[0] = r.nextInt(6);
        d[1] = r.nextInt(6);
        d[2] = r.nextInt(6);
        d[3] = r.nextInt(6);
        d[4] = r.nextInt(6);
        x+=1;

        if (d[0]==d[1] && d[0]==d[2] && d[0]==d[3] && d[0]==d[4]) {
            System.out.println("You got yahtzee, every dice showed " + Integer.toString(d[0]));
            System.out.println("It only took " + Integer.toString(x) + " turns");
            while (1!=3) {
                System.out.print("Go again? y/n: ");
                String ans = s.nextLine();
                if (ans.toLowerCase()=="n"){
                    System.exit(0);
                } else if (ans.toLowerCase()=="y") {
                    break;
                } else {
                    System.out.println("Invalid input!");
                }
            }

        }   
    }   
}   
} 
```

老实说，我无法弄清楚这一点，尽管它可能非常明显。问题出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T00:32:21.873

用于`.equals`比较字符串，而不是相等运算符`==`。

```
if (ans.toLowerCase().equals("n")){
    System.exit(0);
} else if (ans.toLowerCase().equals("y")) { 
```

相等运算符仅检查它们的内存位置是否相等，在这种情况下并非如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T00:31:27.130

用于`String.equals`检查字符串内容。该`==`运算符依赖于引用相等，因此前 2 个 if 语句表达式永远不会是`true`. 你可以有：

```
if (ans.toLowerCase().equals("n")) {
   System.exit(0);
} else if (ans.toLowerCase().equals("y")) {
   break;
} else {
   System.out.println("Invalid input!");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T00:39:49.687

前面两个答案都是正确的，你必须使用 String 类的 .equals 方法。

程序中的 == 运算符实际上是比较 2 个字符串对象引用而不是字符串的内容。

对于刚开始使用 Java 的人来说，这是一个很常见的错误。

有关更多信息，请参见此处：[http ://www.java-samples.com/showtutorial.php?tutorialid=221](http://www.java-samples.com/showtutorial.php?tutorialid=221)

# c++ - gcovr - 在 xml 覆盖 Cobertura 报告中是否存在损坏文件名的已知问题？

> ID：12718794
> 
> 赞同：1
> 
> 时间：2012-10-04T00:30:22.263
> 
> 标签：c++, python, code-coverage, sonarqube

我正在开发一个与 gcovr 覆盖率报告集成的 C++ 项目。我遇到了一个问题，即同一文件的 pacakge 条目两次添加到 gcovr 报告中，这导致报告服务器出现错误。

但是，在查看 gcovr xml 输出时，第二次输出文件时，filename 属性实际上被双“//”损坏，而 name 属性以类似的方式在同一个地方被双“.. ”。

下面是一个简单的示例，显示损坏的条目的外观，其中名称适当地替换为 foo 和 bar：

```
<package branch-rate="0.0" complexity="0.0" line-rate="1.0" name="foo.foo.foo.foo..bar.bar">
    <classes>
        <class branch-rate="0.0" complexity="0.0" filename="foo/foo/foo/foo//bar/bar/foobar.h" line-rate="1.0" name="foobar_h">
            <lines>
                <line branch="false" hits="612" number="37"/>
            </lines>
        </class>
    </classes>
</package> 
```

这似乎是 gcovr 中的一个合法错误。有没有人遇到过这种情况，如果有，知道修复或者修复是否在较新的版本中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:49:31.503

事实证明这是 gcovr 中的一个错误。使用该修复程序升级到稳定版本可以纠正该问题。

# objective-c - 覆盖已弃用的 UIKit 方法——我能收到警告吗？

> ID：12718797
> 
> 赞同：4
> 
> 时间：2012-10-04T00:30:26.187
> 
> 标签：objective-c, ios, uikit

Apple 有时会弃用 UIKit 中您应该覆盖的方法（例如 iOS 6 中的 [UIViewController shouldAutorotateToInterfaceOrientation:]）。

不幸的是，一旦您将部署目标更改为完全弃用的版本，即使该方法已弃用并且永远不会被调用......也不会产生警告/错误。

如果你 CALL 一个不推荐使用的方法，你会收到一个警告，但如果你覆盖一个，则不会。

我希望能够找到我要覆盖的所有已弃用的方法，以便随着时间的推移将它们清理掉。

有什么简单的方法可以做到这一点？

谢谢，-文斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:07:28.910

你应该有关于使用不推荐使用的函数的警告。

这里有一篇关于确保在 Xcode 中启用它们的文章，但它已经很老了：http: [//blog.mro.name/2010/06/xcode-missing-deprecated-warnings/](http://blog.mro.name/2010/06/xcode-missing-deprecated-warnings/)

这是 Xcode 4.5 的屏幕截图：

![这是选择 Project -> Target 时 Xcode 4.5 的屏幕截图：](../Images/6fe2774ce18f768792355f1ef310f429.png)

# bash - 在 shell 脚本中回显一些命令行（对单个命令回显）

> ID：12718801
> 
> 赞同：23
> 
> 时间：2012-10-04T00:30:51.380
> 
> 标签：bash, shell, echo

在 shell 脚本中，出于状态和调试原因，我想回显一些主要（长时间运行）命令。`set -x`我知道我可以使用or为所有命令启用回显`set -v`。但我不想看到所有命令（特别是 echo 命令）。有没有办法只为一个命令打开回声？

我可以这样做，但这很丑陋，也与这条线相呼应`set +x`：

```
#!/bin/sh

dir=/tmp
echo List $dir

set -x
ls $dir
set +x

echo Done! 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-04T00:47:02.513

以每次进程为代价，您可以使用：

```
(set -x; ls $dir) 
```

这会在子 shell 中运行命令，因此`set -x`只会影响括号内的内容。您无需编码或查看`set +x`. 当我需要进行选择性跟踪时，我会使用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T01:53:07.110

使用这个功能怎么样？

```
runtraced() {
    echo "$@"
    "$@"
}

dosomething
runtraced dosomethingelse 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T01:47:50.860

根据 Jonathan Leffler 的回答，这以相同的方式工作，只是更清楚一点，因为在命令之后需要注意。但是您需要指定应该使用哪个 shell。这是 sh 的示例：

```
sh -xc ls $dir 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-23T12:21:10.160

一个简单的方法是使用一个`heredoc`和一个未解释的字符串。它是 POSIX 可移植且快速的：

```
...
% cmd='ls ${dir}'
% sh -x <<_EOF_
> ${cmd}
> _EOF_
... 
```

您可以通过这种方式构建整个脚本，根据需要以编程方式解析和/或修改它们，将它们保存到 shell 变量并从 shell 变量中调用它们，并在另一个脚本或 shell 函数中运行它们：

```
...
% script="$(cat </some/entire/script.sh)"
% script="$(pipeline | processing | on | ${script})"    
% sh -x <<_EOF_ 2>&1 | grep ${specific_cmds_Im_looking_for}
> ${script}
> _EOF_
<desired output> 
```

在我对 POSIX 兼容方式的回答中[，查看是否在 sh 脚本中定义了一个函数，](https://stackoverflow.com/questions/14447555/posix-compliant-way-to-see-if-a-function-is-defined-in-an-sh-script/19885768#19885768)我更详细地描述了这个方法和原因。在 Stack Exchange 上，我非常彻底地讨论了如何`heredoc`使用它来解决一些烦人的引用问题，以回答[Is there a way to get *actual* (uninterpreted) shell arguments in a function or script?](https://unix.stackexchange.com/a/102310/52934) .

-麦克风

# java - 运行“蚂蚁列表”时 Spring 教程的 http 401

> ID：12718804
> 
> 赞同：2
> 
> 时间：2012-10-04T00:31:00.653
> 
> 标签：java, tomcat, ant

我厌倦了谷歌搜索。

从命令行运行“ant list”时，我得到了这个堆栈跟踪：

```
/home/tgh/workspace/FiLTH/build.xml:138: java.io.IOException: Server returned HTTP response code: 401 for URL: http://localhost:8080/manager/html/list
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1436)
at org.apache.catalina.ant.AbstractCatalinaTask.execute(AbstractCatalinaTask.java:230)
at org.apache.catalina.ant.AbstractCatalinaTask.execute(AbstractCatalinaTask.java:150)
at org.apache.catalina.ant.ListTask.execute(ListTask.java:51)
at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
at org.apache.tools.ant.Task.perform(Task.java:348)
at org.apache.tools.ant.Target.execute(Target.java:390)
at org.apache.tools.ant.Target.performTasks(Target.java:411)
at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1397)
at org.apache.tools.ant.Project.executeTarget(Project.java:1366)
at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
at org.apache.tools.ant.Project.executeTargets(Project.java:1249)
at org.apache.tools.ant.Main.runBuild(Main.java:801)
at org.apache.tools.ant.Main.startAnt(Main.java:218)
at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109) 
```

这是我的 build.xml：

```
<property name="src.dir" value="src/main/java"/>
<property name="web.dir" value="src/main/resources"/>
<property name="build.dir" value="target"/>
<property name="name" value="filth"/>

<path id="master-classpath">
    <fileset dir="jar">
        <include name="*/*.jar"/>
    </fileset>
    <!-- We need the servlet API classes: -->
    <!--  * for Tomcat 5/6 use servlet-api.jar -->
    <!--  * for other app servers - check the docs -->
    <fileset dir="${appserver.lib}">
        <include name="servlet*.jar"/>
    </fileset>
    <pathelement path="${build.dir}"/>
</path>

<target name="usage">
    <echo message=""/>
    <echo message="${name} build file"/>
    <echo message="-----------------------------------"/>
    <echo message=""/>
    <echo message="Available targets are:"/>
    <echo message=""/>
    <echo message="build     --> Build the application"/>
    <echo message="deploy    --> Deploy application as directory"/>
    <echo message="deploywar --> Deploy application as a WAR file"/>
    <echo message="install   --> Install application in Tomcat"/>
    <echo message="reload    --> Reload application in Tomcat"/>
    <echo message="start     --> Start Tomcat application"/>
    <echo message="stop      --> Stop Tomcat application"/>
    <echo message="list      --> List Tomcat applications"/>
    <echo message=""/>
</target>

<target name="build" description="Compile main source tree java files">
    <mkdir dir="${build.dir}"/>
    <javac destdir="${build.dir}" source="1.5" target="1.5" debug="true"
           deprecation="false" optimize="false" failonerror="true">
        <src path="${src.dir}"/>
        <classpath refid="master-classpath"/>
    </javac>
</target>

<target name="deploy" depends="build" description="Deploy application">
    <copy todir="${deploy.path}/${name}" preservelastmodified="true">
        <fileset dir="${web.dir}">
            <include name="**/*.*"/>
        </fileset>
    </copy>
</target>

<target name="deploywar" depends="build" description="Deploy application as a WAR file">
    <war destfile="${name}.war" webxml="${web.dir}/WEB-INF/web.xml">
        <fileset dir="${web.dir}">
            <include name="**/*.*"/>
        </fileset>
    </war>
    <copy todir="${deploy.path}" preservelastmodified="true">
        <fileset dir=".">
            <include name="*.war"/>
        </fileset>
    </copy>
</target>

<!-- ============================================================== -->
<!-- Tomcat tasks - remove these if you don't have Tomcat installed -->
<!-- ============================================================== -->

<path id="catalina-ant-classpath">
    <!-- We need the Catalina jars for Tomcat -->
    <!--  * for other app servers - check the docs -->
      <fileset dir="${appserver.lib}">
         <include name="catalina-ant.jar"/>
         <include name="tomcat-coyote.jar"/>
         <include name="tomcat-util.jar"/>
      </fileset>
      <fileset dir="${appserver.home}/bin">
         <include name="tomcat-juli.jar"/>
      </fileset>

</path>

<taskdef name="install" classname="org.apache.catalina.ant.DeployTask">
    <classpath refid="catalina-ant-classpath"/>
</taskdef>
<taskdef name="reload" classname="org.apache.catalina.ant.ReloadTask">
    <classpath refid="catalina-ant-classpath"/>
</taskdef>
<taskdef name="list" classname="org.apache.catalina.ant.ListTask">
    <classpath refid="catalina-ant-classpath"/>
</taskdef>
<taskdef name="start" classname="org.apache.catalina.ant.StartTask">
    <classpath refid="catalina-ant-classpath"/>
</taskdef>
<taskdef name="stop" classname="org.apache.catalina.ant.StopTask">
    <classpath refid="catalina-ant-classpath"/>
</taskdef>

<target name="install" description="Install application in Tomcat">
    <install url="${tomcat.manager.url}"
             username="${tomcat.manager.username}"
             password="${tomcat.manager.password}"
             path="/${name}"
             war="${name}"/>
</target>

<target name="reload" description="Reload application in Tomcat">
    <reload url="${tomcat.manager.url}"
             username="${tomcat.manager.username}"
             password="${tomcat.manager.password}"
             path="/${name}"/>
</target>

<target name="start" description="Start Tomcat application">
    <start url="${tomcat.manager.url}"
             username="${tomcat.manager.username}"
             password="${tomcat.manager.password}"
             path="/${name}"/>
</target>

<target name="stop" description="Stop Tomcat application">
    <stop url="${tomcat.manager.url}"
             username="${tomcat.manager.username}"
             password="${tomcat.manager.password}"
             path="/${name}"/>
</target>

<target name="list" description="List Tomcat applications">
    <list url="${tomcat.manager.url}"
             username="${tomcat.manager.username}"
             password="${tomcat.manager.password}"/>
</target> 
```

这是我的 build.properties：

```
appserver.home=/home/tgh/workspace/tomcat
appserver.lib=${appserver.home}/lib
deploy.path=${appserver.home}/webapps

tomcat.manager.url=http://localhost:8080/manager/html
tomcat.manager.username=tomcat
tomcat.manager.password=s3cret 
```

这是 tomcat-users.xml 的内容：

```
<role rolename="manager-gui"/>
<role rolename="manager-script"/>
<role rolename="manager-jmx"/>
<role rolename="manager-status"/>
<role rolename="tomcat"/>
<role rolename="role1"/>

<user username="tomcat" password="s3cret" roles="manager-gui"/>
<user username="tomcat" password="tomcat" roles="tomcat"/>
<user username="both" password="tomcat" roles="tomcat,role1"/>
<user username="role1" password="tomcat" roles="role1"/> 
```

有谁知道发生了什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T08:12:02.957

正如 GreyBeardedGeek 401 所提到的，显然意味着授权问题。您将需要配置经理角色和对 tomcat 的访问权限，从您的 tomcat-users.xml 我可以看到两个问题 1）tomcat 用户已被定义两次 2）没有角色定义为“经理”

我认为你的 tomcat-users.xml 应该看起来像

```
<role rolename="manager-gui"/>
<role rolename="manager-script"/>
<role rolename="manager-jmx"/>
<role rolename="manager-status"/>
<role rolename="tomcat"/>
<role rolename="role1"/>
<role rolename="manager"/>

<user username="tomcat" password="s3cret" roles="manager-gui,manager"/>
<user username="both" password="tomcat" roles="tomcat,role1"/>
<user username="role1" password="tomcat" roles="role1"/> 
```

我不确定您将使用什么/如何使用 manager-gui、manager-script、manager-jmx，但出于安全目的，您还应该删除不必要的用户“both”和“role1”。

有关配置管理器访问权限，您可以参考 tomcat[文档](http://tomcat.apache.org/tomcat-5.5-doc/manager-howto.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-01T15:02:44.950

您需要在 tomcat-users.xml 中进行如下配置

```
<user name="<username>" password="<password>" roles="manager-script,manager-gui,manager,manager-jmx"/> 
```

# c++ - 长时间锁定线程是错误的还是不建议？TCP相关

> ID：12718805
> 
> 赞同：1
> 
> 时间：2012-10-04T00:31:01.817
> 
> 标签：c++, multithreading

我正在开发一个带有 slotmanager 线程的服务器程序（对等待连接的其他 tcpthreads 的引用队列）。有点像您在排队等候游戏服务器时。我最初的计划是让 slotmanager 线程等待，然后如果通知（客户端等待）将继续。然后 tpcthreads 将每 X 毫秒请求一次状态更新。

我的其他选择是让 slotmanager 线程在队列为空时完成，然后如果它尚未运行并且队列中有等待的客户端或让 TCPthread 等待，则启动一个新线程，这可能导致连接超时。

# objective-c - 在 iOS 应用程序的目标 c 中编写方程

> ID：12718812
> 
> 赞同：1
> 
> 时间：2012-10-04T00:32:05.607
> 
> 标签：objective-c, ios, equation

所以我想首先说我无论如何都不是程序员。我想做的是构建一个生产力应用程序来帮助我完成日常工作。这就是我所拥有的。

```
 float u = ([startRate.text floatValue]);
    float v = ([grossProfit.text floatValue]);
    float w = y/40;
    float x = (x - z);
    float y = ([commissionRate.text floatValue]);
    float z = x / y;
    myPayRate.text = [[NSString alloc] initWithFormat:@"%3.2f", z]; 
```

所以如果用户输入...

```
u = 80
v = 800
y = 1.17 
```

然后我需要 z 以 51 的形式出现，但我得到的是“inf”。非常感谢任何帮助或见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T00:34:25.933

您正在初始化`x`为`x - z`. `x`应该从哪里来？

（也许应该是这样`w - z`，因为我没有看到任何使用`w`？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T00:05:33.413

也许像这样重新排列你的代码会有所帮助。

```
float u = ([startRate.text floatValue]);
float v = ([grossProfit.text floatValue]);
float y = ([commissionRate.text floatValue]);
float w = y/40;
float x = (x - z);
float z = x / y;
myPayRate.text = [[NSString alloc] initWithFormat:@"%3.2f", z]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T00:50:37.347

这里最有可能发生的是 的值为`[commissionRate.text floatValue]`0。可能`commissionRate.text`是空的，或者该值没有正确地从字符串转换为浮点数，可能是因为字符串的值与您期望的不同.

在行上放一个断点`float z = x / y;`并检查变量的值？

# c++ - Vector 不接受插入作为函数

> ID：12718813
> 
> 赞同：3
> 
> 时间：2012-10-04T00:32:05.897
> 
> 标签：c++

在该行中`temp.insert(it);`，我不断收到错误 No matching member function for call to insert，这意味着在我的代码中的某个时刻 temp 变成了向量以外的东西。有人有什么想法吗？

```
#include <iostream>
#include <vector> 

using namespace std;

vector<int> removeDuplicates(vector<int> stuff)
{

vector<int> temp;
vector<int>::iterator it;

for(vector<int>::size_type i = 0; i < stuff.size(); i++){
    //iterator to find stuff
    it = find(stuff.begin(), stuff.end(), stuff);

    //if it not in temp then add it
    if (it == temp.end()) {
        temp.insert(it); //No matching member function for call to insert
    }
}

return temp;

}

int main(int argc, const char * argv[])
{

vector<int> values;
for(int i = 0; i < 5; i++){
    values.push_back(i);
    values.push_back(i+1);
}

removeDuplicates(values);
return 0;
} 
```

好吧，答案对我帮助很大，但我决定重写代码，这就是我得到的，它似乎工作得很好

```
#include <iostream>
#include <vector> 

using namespace std;

vector<int> removeDuplicates(vector<int> oldvector)
{

// newvector to hold non-duplicates
vector<int> newvector;

vector<int>::iterator it;

for(vector<int>::size_type i = 0; i < oldvector.size(); i ++){

    //If it find a value then it returns the first element
    it = find(newvector.begin(),newvector.end(), oldvector[i]);
    if(it == newvector.end()){
        newvector.push_back(oldvector[i]);
    }

}

return newvector;

}

int main(int argc, const char * argv[])
{

vector<int> values;
vector<int> newvalues;

for(int i = 0; i < 5; i++){
    values.push_back(i);
    values.push_back(i+1);
}

newvalues = removeDuplicates(values);

//Print out the vector without duplicates
for(vector<int>::size_type i = 0; i < newvalues.size(); i ++){
    cout << newvalues[i] << "\t";

}

return 0;
} 
```

感谢您对原始问题的帮助，我学到了很多东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T00:39:36.320

三个（C++11 之前的）有效签名`std::vector::insert`是：

```
iterator insert ( iterator position, const T& x );
    void insert ( iterator position, size_type n, const T& x );
template <class InputIterator>
    void insert ( iterator position, InputIterator first, InputIterator last ); 
```

您选择了无效的选项 #4：

```
temp.insert(iterator); 
```

该选项不存在，您必须从上面列出的三个中进行选择。

* * *

在旁注中（正如 ildjarn 指出的那样），C++11 增加了更多......并带走了一些。无论如何，它们都不会像您所说的那样有效。请参阅：[http ://en.cppreference.com/w/cpp/container/vector/insert](http://en.cppreference.com/w/cpp/container/vector/insert)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T00:38:40.577

> *这意味着在我的代码中的某个时刻 temp 变成了向量以外的东西*

不，那没有发生。更重要的是，这**不可能**发生。

以下功能不存在。没有[匹配的函数](http://en.cppreference.com/w/cpp/container/vector/insert)只需要一个迭代器。

```
temp.insert(it); //No matching member function for call to insert 
```

试一下，例如，

```
temp.insert(it, 7); // will insert 7 immediately prior to end() 
```

# c - SSL_CTX_new 中的分段错误

> ID：12718814
> 
> 赞同：3
> 
> 时间：2012-10-04T00:32:16.537
> 
> 标签：c, unix, ssl, openssl, segmentation-fault

我正在尝试以客户端身份进行连接，但`SSL`我看到了一些奇怪的行为。`SSL_CTX_new`尝试创建新`SSL`上下文时，内部出现间歇性分段错误。还应该注意的是，这是一个`fCGI demon`, 并且只有在这样运行时才会出现问题。如果我将它作为独立`cgi`应用程序运行，问题似乎消失了。

查看核心文件，这就是我所看到的：

> 夹板（??，??）在0xd03c36f4在0xd03c5bcc
> malloc_y（0x4c，为0x0，0x9e，为0x0，0x20062240，量0x170，为0x0，为0x0）
> malloc_common_81_64（??）在0xd03512b8
> mem.default_malloc_ex（）在0xd0b0f784
> CRYPTO_malloc_24_10（）在0xd0b101c8
> ssl_cert .ssl_cert_new() 在 0xd6f86084
> ssl_lib.SSL_CTX_new() 在 0xd6f83084

有没有人遇到过类似的事情？搜索以前的问题出现了一些关于`SSL_CTX_new`返回的讨论`NULL`，但没有关于分段错误的报告。

这是我用来创建新上下文的函数：

```
SSL_CTX* newSSLContext(char* keyfile, char* password) {  
   SSL_METHOD *meth;  
   SSL_CTX *ctx;  
   if (!bio_err) {  
      SSL_library_init();  
      SSL_load_error_strings();  
      bio_err = BIO_new_fp(stderr, BIO_NOCLOSE);  
   }  
   signal(SIGPIPE, sigpipe_handle);  
   meth = SSLv23_method();  
   ctx = SSL_CTX_new(meth);  
   if (!(SSL_CTX_use_certificate_chain_file(ctx, keyfile))) {  
      err("Can't read certificate file");  
      return NULL;  
   }  
   pass = password;  
   SSL_CTX_set_default_passwd_cb(ctx, password_cb);  
   if (!(SSL_CTX_use_PrivateKey_file(ctx, keyfile, SSL_FILETYPE_PEM))) {  
      err("Can't read key file");  
      return NULL;
   }  
   if (!(SSL_CTX_load_verify_locations(ctx, keyfile, 0))) {  
      err("Can't read CA list");  
      return NULL;  
   }  
   return ctx;  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T15:48:33.013

`bio_err`您是否将变量初始化为NULL？`SSL_library_init`如果你之前不打电话`SSL_CTX_new`，你会出现段错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:10:55.360

缺少一个好的解决方案。为了满足我的 SSL 需求，我已求助于 libcurl。这似乎简化了我实际必须编写的代码。

# android - 将导航小部件添加到片段中的操作栏

> ID：12718816
> 
> 赞同：1
> 
> 时间：2012-10-04T00:32:31.547
> 
> 标签：android

我有一个应用程序，其中我使用操作栏（特别是 ActionBarSherlock）在片段之间实现了选项卡导航。在我用来显示消息列表的一个特定片段中，我想使用微调器小部件之类的东西在“收件箱”和“发件箱”之间进行选择。我需要选择的选项显示为持久，以便用户能够分辨他们正在查看的“框”。

使用 Fragment.setHasOptionsMenu 使用选项菜单很简单，我可以执行相同的操作。但是我想知道片段是否可以像使用选项菜单项一样使用导航小部件参与填充操作栏。我检查了 Fragment 类，但找不到任何可能有帮助的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:17:45.840

听起来您在收件箱/发件箱中想要的是`NAVIGATION_MODE_LIST`，但您已经在使用`NAVIGATION_MODE_TABS`导航了。我有两条建议的路径：

1.  您可以使收件箱/发件箱片段成为与表格导航不同的活动的一部分。然后你可以`NAVIGATION_MODE_LIST`在那个活动上使用。
2.  您需要在收件箱/发件箱之间创建自己的导航。

据我所知，您不能同时使用操作栏上的选项卡和列表。您必须将它们分开，以便在一种情况下使用选项卡，在另一种情况下使用列表，或创建自定义解决方案。

# facebook - 为什么 Facebook Open Graph 元数据有时会失败？

> ID：12718819
> 
> 赞同：2
> 
> 时间：2012-10-04T00:32:53.540
> 
> 标签：facebook, facebook-opengraph

我的一些网页中有 Open Graph 元标记。有时当我在 Facebook 分享这些页面的链接时，会读取 OG 数据，并在 FB 中显示页面的正确描述、图像等。其他时候，它不会——它只是显示页面的 URL（是的，它确实正确链接到页面。）

有人有过这种经历吗？认为这是一个 FB 错误还是我做错了什么？

作为记录，我确实通过 FB OG 调试器运行了它并且没有出错。

提前感谢您的任何想法/想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-01-13T11:46:23.083

我已经尝试了几次，我认为您只需要等到完全加载发布弹出窗口即可。如果我在打开弹出窗口后立即粘贴链接，OG 不起作用。

### 更新：

OG 发送此请求后开始工作 www.facebook.com/react_composer/feedx_sprouts/bootload/?composer_id=rc.u_0_z&target_id=000000000000000&composer_type=feedx_sprouts&friend_list_id=

# facebook - 独立网站上的图片库等外部内容的 Facebook 点赞量

> ID：12718822
> 
> 赞同：1
> 
> 时间：2012-10-04T00:33:10.737
> 
> 标签：facebook, count, facebook-like, external

我目前正在了解外部内容的“喜欢”系统是如何工作的，阅读了很多东西，但最后我尝试构建的墙上有一些缺失的砖块......

背景：我们（我和其他一些人）有自己的主页，上面有聚会、公共活动等拍摄的照片。经被描绘者同意拍摄的照片，他们将在第二天查看这些照片并下载它们，将它们放入社交媒体并在 Facebook 上喜欢它们。我们有一个 facebook 页面，我们可以在其中发布有关我们主页的一些内容，因此我们还可以使用 facebook 统计数据并与 facebook 用户建立联系。

由于我目前正在重新组织日志文件处理/统计（我不对网站进行编程，这是由我的朋友完成的）我还想知道，有多少 facebook 喜欢一张特定的图片（或画廊）。我们已经使用了 fbxml 系统。内容组织在图片库中，每个事件都有一个具有唯一 ID 的画廊。类似的东西： [http](http://partypics.example.com/index.php?content=foo&show=gallery&galleryid=12345) ://partypics.example.com/index.php?content=foo&show=gallery&galleryid=12345 图片也由他们的 ID 引用。

喜欢图片已经很好用了。

我现在想浏览画廊并找出任何图片真正获得了多少“喜欢” - 我知道您可以使用“edge.create”之类的东西来输入日志，但就我而言意识到不包括不同人通过 Facebook 本身（或分享等）所做的喜欢

问题：这张图片（或画廊）有什么方法可以拥有唯一的 facebook ID，我可以通过 http 或在命令行上使用 FQL 语句通过 Opengraph 进行查询？如果，我如何找出它的ID？（或者是否可以通过元标记进行设置？

将感谢您对某些文档的任何输入，涵盖...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:03:01.077

> 问题：这张图片（或画廊）有什么方法可以有一个唯一的 facebook ID，我可以通过 http 或在命令行上使用 FQL 语句通过 Opengraph 进行查询？如果，我如何找出它的ID？

对于开放图形对象，它们的 URL*是*它们在图形中的“id”。

例如，`http://example.com/`已经分享和评论了不少——具体多少，你可以访问[http://graph.facebook.com/http://example.com/查看](http://graph.facebook.com/http://example.com/)

因此，将您的画廊和图片设置为 Open Graph 对象，提供所有相关的元标记——然后您将能够通过其 OG URL 从 API 查询喜欢的内容。

（我建议也将您的图片设置为完整的 OG 对象，这意味着为每个对象创建一个带有 OG 元标记的页面，并让用户喜欢该页面而不仅仅是图片 URL - 否则您将无法提供 OG 信息，因为单独的图片 URL 不能让您将元信息放在任何地方。）

# git - 将存储在 github 上的项目部署到 debian 网络服务器

> ID：12718823
> 
> 赞同：3
> 
> 时间：2012-10-04T00:33:12.463
> 
> 标签：git, github, playframework, debian

我对 git（和 linux）有点陌生。我是一个小团队的一员，负责将我们的项目部署到我们的 debian 服务器。

我们还处于项目的早期阶段，因此不需要过于复杂的部署解决方案。

反正。我们的项目存储在 github 上，我们从中拉/推。目前，当我想要部署某些东西时，我使用 git pull 将它拉到我的 Windows 机器上。然后我使用这个脚本：

```
cd src/www
scp -r app public <user>@<server-ip>:/home/www 
```

我输入密码并上传文件。然后我登录服务器并重新启动服务（playframework）`play restart --%prod`

谁能推荐一个简单的解决方案，使服务器从 github 获取更改并自动重新启动服务器？我在 stackoverflow 上环顾四周，只发现由于我对 Linux 和 Git 缺乏经验而对我没有多大意义的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T00:44:06.267

一种选择是使用像[Capistrano](https://github.com/capistrano/capistrano "卡皮斯特拉诺")这样的部署库/框架。一旦您配置好您的部署（称为“配方”），Capistrano 允许您从命令行非常轻松地部署到一个或多个目标。它还提供了一个很好的发布结构，允许您更好地管理在任何给定时刻部署到目标的应用程序副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:14:56.043

搜索“持续交付”开始。这不是 GitHub 特定的问题。

一种可能的设置是使用持续集成服务器[Jenkins](http://jenkins-ci.org/)。它可以配置为定期检查您的 GitHub 存储库是否有更改。如果发现更改，它可以在应用程序或 Web 服务器上创建构建和/或部署工件。

当然，持续集成基础架构的初始设置和维护需要时间，您必须判断是否值得付出努力。然而，在今天看来，拥有类似的东西是最先进的。您可能还对[GitHub 开发人员的这篇文章感兴趣，他们如何通过推送到他们的存储库来直接部署](https://github.com/blog/1241-deploying-at-github)。

# java - Java程序绘制彩虹的一些帮助

> ID：12718827
> 
> 赞同：2
> 
> 时间：2012-10-04T00:33:37.617
> 
> 标签：java, swing, draw, background-color

我会坦率地说这件事；这是一项家庭作业，但是有人可以指导我正确的方向并向我解释代码的某些部分应该如何工作吗？指示在代码和问题下方。

到目前为止，这是我的代码：

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Container;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Rainbow extends JPanel
{
  // Declare skyColor:
     private final Color skyColor = Color.CYAN;

  public Rainbow()
  {
    setBackground(skyColor);
  } 
  // Draws the rainbow.
  public void paintComponent(Graphics g)
  {
super.paintComponent(g);
int width = getWidth();    
int height = getHeight();

// Declare and initialize local int variables xCenter, yCenter
// that represent the center of the rainbow rings:
int xCenter = width/2;
int yCenter = (height * 3) /4;

// Declare and initialize the radius of the large semicircle:
  int largeRadius = width/4;

g.setColor(Color.RED);

// Draw the large semicircle:
 g.fillArc(xCenter,yCenter,largeRadius,height,0,180);
// Declare and initialize the radii of the small and medium
// semicircles and draw them:
int smallRadius = height/4;
 g.setColor(Color.MAGENTA);

 g.fillArc(xCenter,yCenter,width,height,0,180);
 int mediumRadius = (int) Math.sqrt(smallRadius * largeRadius);
 g.setColor(Color.GREEN);
 g.fillArc(xCenter,yCenter,width,height,0,180);

// Calculate the radius of the innermost (sky-color) semicircle
// so that the width of the middle (green) ring is the
// arithmetic mean of the widths of the red and magenta rings:

// Draw the sky-color semicircle:
 g.fillArc(xCenter,yCenter,width,height,0,180);
  }

  public static void main(String[] args)
  {
JFrame w = new JFrame("Rainbow");
w.setBounds(300, 300, 300, 200);
w.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
Container c = w.getContentPane();
c.add(new Rainbow());
w.setVisible(true);
   }
} 
```

我的问题：fillArc 究竟是如何工作的；我了解参数中的内容，但是必须做什么才能使每条弧线彼此不同？如何为每条弧线设置一种颜色？我尝试这样做，最后我列出了最接近结尾的颜色并覆盖了其他颜色。当我继续编码时，我可能会有更多。

这些是方向：

![在此处输入图像描述][1]

“彩虹”由四个重叠的半圆组成。外圈为红色（Color.RED），中间为绿色（Color.GREEN），内圈为洋红色（Color.MAGENTA）。最里面的半圆与背景颜色相同。

按照下面的说明填写 Rainbow.java 中的空白。

1.  启动彩虹项目。

2.  在文件顶部的类声明之前添加一个带有您的姓名的完整注释标题。

3.  向 Rainbow 类添加 Color 类型的私有最终字段 skyColor 的声明，初始化为 Color.CYAN（天空的颜色）。在 Rainbow 的构造函数中，将窗口的背景设置为 skyColor 而不是 Color.WHITE。

4.  在paint 方法中，声明表示环中心坐标的局部整数变量xCenter 和yCenter。分别将它们初始化为内容窗格的 1/2 宽度和 3/4 高度（向下）。（回想一下，Java 中图形坐标的原点位于内容窗格的左上角，y 轴指向下方。）不要插入来自窗口尺寸的固定数字。

5.  声明一个表示最大（红色）半圆半径的局部变量 largeRadius，并将其初始化为宽度的 1/4。

6.  一个方法调用 g.fillArc(x, y, size, size, from, degree) （带有所有整数参数）绘制一个圆的扇区。x 和 y 是矩形（在本例中为正方形）左上角的坐标，椭圆（逻辑上）内接在该矩形中；size 是正方形的边（和圆的直径）；from 是弧的起点，以度为单位（水平直径的最东端为 0），度（正数）是弧的度量，逆时针方向。在paint方法中添加一个语句来绘制最大（红色）的半圆。测试你的程序。

7.  添加语句以显示中等（绿色）和小（洋红色）半圆。洋红色半圆的半径应为高度的 1/4。绿色的半径应该是红色半圆半径和洋红色半圆半径的几何平均值（乘积的平方根），四舍五入到最接近的整数。（对 Math.sqrt(x) 的调用返回 x 的平方根的值，一个双精度值。）重新测试你的程序。

8.  添加语句以显示背景（“天空”）颜色的最内半圆以完成彩虹。对这个半圆的颜色使用 skyColor 常量。选择天空颜色半圆的半径，使中间（绿色）环的宽度是红色和品红色环宽度的算术平均值。

9.  测试你的程序。

10.  提交您完成的程序并运行输出。您的运行输出（彩虹图片）可以通过捕获屏幕输出（Alt-PrintScrn），将其粘贴到图形程序（例如 MS Paint）中，然后将图像保存到您的 Eclipse 项目目录中来包含。

    ```
    import java.awt.Color;
    import java.awt.Graphics;
    import java.awt.Container;
    import javax.swing.JFrame;
    import javax.swing.JPanel;

    public class Rainbow extends JPanel
    {
      //Declare skyColor:
        private final Color skyColor = Color.CYAN;

      public Rainbow()
    {
    setBackground(skyColor);
    }

     // Draws the rainbow.
    public void paintComponent(Graphics g)
     {
    super.paintComponent(g);
    int width = getWidth();    
    int height = getHeight();

    // Declare and initialize local int variables xCenter, yCenter
    // that represent the center of the rainbow rings:
    int xCenter = width/2;
    int yCenter = (height * 3) /4;

    // Declare and initialize the radius of the large semicircle:
      int largeRadius = width/4;

    g.setColor(Color.RED);

    // Draw the large semicircle:
     g.fillArc(xCenter - largeRadius,yCenter - largeRadius   ,largeRadius,largeRadius,0,180);
    // Declare and initialize the radii of the small and medium
    //semicircles and draw them:
     int smallRadius = height/4;
     int mediumRadius = (int) Math.sqrt(smallRadius * largeRadius);
     g.setColor(Color.GREEN);
     g.fillArc(xCenter-(largeRadius+mediumRadius)/2,yCenter-          (largeRadius+mediumRadius)/2,mediumRadius,mediumRadius,0,180);
     g.setColor(Color.MAGENTA);
     g.fillArc(xCenter-(largeRadius+smallRadius)/2,yCenter-(largeRadius+smallRadius)/2,smallRadius,smallRadius,0,180);

    // Calculate the radius of the innermost (sky-color) semicircle
    // so that the width of the middle (green) ring is the
    // arithmetic mean of the widths of the red and magenta rings:
       int skyRadius = (int)((2 * Math.sqrt(smallRadius * largeRadius)) - width/4);

    // Draw the sky-color semicircle:
     g.setColor(skyColor);
     g.fillArc(xCenter-skyRadius,yCenter-skyRadius,skyRadius,skyRadius,0,180);

     }

     public static void main(String[] args)
     {
    JFrame w = new JFrame("Rainbow");
    w.setBounds(300, 300, 300, 200);
    w.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    Container c = w.getContentPane();
    c.add(new Rainbow());
    w.setVisible(true);
     }
    } 
    ```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T00:57:20.710

fillArc() 根据您给它的参数填充圆的一部​​分。例如你的第一个弧。

您正在绘制填充弧，在本例中是一个半圆形，颜色为红色。

```
//Set the arc color
g.setColor(Color.RED);

// Draw the large semicircle:
g.fillArc(xCenter,yCenter,largeRadius,height,0,180); 
```

![圆圈](../Images/5477d7df407cffd6c51954e6bbd90d50.png)

这是我们的填充弧。那看起来一点也不像彩虹。为了得到彩虹的形状，我们必须在里面画一个更小的弧线。在你的情况下，下一个是绿色的。所以我们在将颜色设置为绿色后再次填充弧。但是我们将半径缩小了一点，所以绿色不会覆盖整个红色部分。![在此处输入图像描述](../Images/fd810f779bf74315d8f618c72a9e454c.png)

请记住，当我们绘制时，我们在顶部绘制，因此如果您先绘制绿色，它将被红色覆盖。

然后我们再次在其中绘制另一条弧线，但将其设为天空的颜色（在本例中为白色）。这将创建最终的彩虹形状。所以我们再次做fillArc，但半径稍小，颜色为白色。

![彩虹！](../Images/f301b0dbc1daaaeb16c67e75bbfe777a.png)

在那里，我们画了一道彩虹。

为了使这个美丽的创作居中，我们必须了解有关 fillArc 函数的一些事情。

参数是：

```
public abstract void fillArc(int x,
           int y,
           int width,
           int height,
           int startAngle,
           int arcAngle) 
```

int x 和 int y 表示您正在绘制的弧的左上角的坐标。您的代码未居中的原因是您绘制弧线的方式。

```
g.fillArc(xCenter - largeRadius,yCenter - largeRadius,largeRadius,largeRadius,0,180);
g.fillArc(xCenter-(largeRadius+mediumRadius)/2,yCenter-(largeRadius+mediumRadius)/2,mediumRadius,mediumRadius,0,180);
g.fillArc(xCenter-(largeRadius+smallRadius)/2,yCenter-(largeRadius+smallRadius)/2,smallRadius,smallRadius,0,180); 
```

我取出了一些多余的东西。你知道你是如何减去 (largeRadius+smallRadius)/2 和 (largeRadius+mediumRadius)/2 的吗？这正在移动彩虹以使其偏离中心。你应该拥有的是：

```
g.fillArc(xCenter - largeRadius/2,yCenter - largeRadius,largeRadius,largeRadius,0,180);
    g.fillArc(xCenter-(mediumRadius)/2,yCenter-(largeRadius+mediumRadius)/2,mediumRadius,mediumRadius,0,180);
    g.fillArc(xCenter-(smallRadius)/2,yCenter-(largeRadius+smallRadius)/2,smallRadius,smallRadius,0,180); 
```

这将使彩虹正确居中。这就是为什么。

![在此处输入图像描述](../Images/e2ecdbfdbb646e0d9b64d1f7ed8b121c.png)

这就是他们开始绘制弧线的起点。如果你想让整个彩虹居中，你可以把它移到整个宽度的一半。所以如果你想让红色弧线居中，你会做

```
xCenter - (largeRadius/2) 
```

因为这是将 x 开始向左设置一半。您不会在其他弧中包含 largeRadius，因为您将它们围绕这一点居中。因此，您希望将它们移动它们各自宽度的一半，这就是为什么它们的 x 位置是

```
xCenter-(mediumRadius)/2
xCenter-(smallRadius)/2 
```

以 Y 轴为中心的工作方式不同。您必须考虑到彩虹整体的高度是 largeRadius 的 1/4。您的代码使用 yCenter = 3/4 * height，因此会对其进行一些更改。

这是我的解决方案

```
g.fillArc(xCenter - largeRadius/2,yCenter - largeRadius/2 + largeRadius/4 -height/4,largeRadius,largeRadius,0,180);
g.fillArc(xCenter-(mediumRadius)/2,yCenter-(mediumRadius)/2 + largeRadius/4 -height/4,mediumRadius,mediumRadius,0,180);
g.fillArc(xCenter-(smallRadius)/2,yCenter-(smallRadius)/2 + largeRadius/4 -height/4,smallRadius,smallRadius,0,180); 
```

让我们来看看。为了与 x 中相同的原理，我减去了 largeRadius/2（和相应的半径）。但后来我添加了 largeRadius/4，因为我们必须将整个彩虹向下移动。这是因为减去相应的半径/2 只会使彩虹居中，就好像它是一个完整的圆，而不是半圆。

添加 largeRadius/4 会将彩虹向下移动一半的高度，使其正确居中为半圆。最后，减去 height/4 会使 yCenter 更改为 height/2，因为 3/4 * height 是您分配的要求。

对评论中的所有问题感到抱歉，希望这能解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T01:41:58.960

我已经修改了您的部分代码，以便您有所了解。请记住，您的 xCenter 和 yCenter 代表圆的中心，而不是您需要在 fillArc 方法中使用的坐标。您提供的说明很好地解释了它。您可以从我在这里所做的事情中得到一个想法，然后自己解决其余的问题。

```
// First declare and initialize all radiuses
  int largeRadius = width/4;
  int smallRadius = height/4;
  int mediumRadius = (int) Math.sqrt(smallRadius * largeRadius);

//Then draw each arc in descending order from the largest one

g.setColor(Color.RED);

g.fillArc(xCenter-largeRadius,yCenter-largeRadius,largeRadius,largeRadius,0,180);

g.setColor(Color.GREEN);

g.fillArc(xCenter-(largeRadius+mediumRadius)/2,yCenter-(largeRadius+mediumRadius)/2,mediumRadius,mediumRadius,0,180);

g.setColor(Color.MAGENTA);

g.fillArc(xCenter-(largeRadius+smallRadius)/2,yCenter-(largeRadius+smallRadius)/2,smallRadius,smallRadius,0,180);

// Calculate the radius of the innermost (sky-color) semicircle 
```

为您 skyRadius 考虑：

> 1.  红色宽度 = 大半径 - 中等半径
> 2.  绿色宽度 = 中 - 小
> 3.  洋红色宽度 = 小半径 - 天空半径

如果我做对了你得到：skyRadius = smallRadius - 2*(mediumRadius-smallRadius)+largeRadius-mediumRadius

```
int skRadius=smallRadius-2*(mediumRadius-smallRadius)+largeRadius-mediumRadius;
 g.setColor(skyColor);
 g.fillArc(xCenter-(largeRadius+skRadius)/2,yCenter-(largeRadius+skRadius)/2,skRadius,skRadius,0,180); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-02T15:44:01.800

一个更简单的等式`skyRadius`是：

```
int skyRadius = largeRadius - 3 * mediumRadius + 3 * smallRadius; 
```

# ruby-on-rails - 红宝石数组序列化不起作用

> ID：12718828
> 
> 赞同：0
> 
> 时间：2012-10-04T00:33:38.517
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的模型中有以下代码：

```
def getFormattedAverages

   averages = Array.new();
   self.items.each do |i|

      x = self.responses.average(:x,:conditions=>['item_id = ?',i.id])
      if x.nil?
        x = 2000
      else
        x = x.to_i
      end
      y = self.responses.average(:y,:conditions=>['item_id = ?',i.id]).to_i
      if y.nil?
        y = "*"
      end
      averages.push([[x,y]])

    end

   return averages

end 
```

在我看来：

```
var dataseries = <%=@question.getFormattedAverages%>; 
```

在我的开发机器上，我得到的数据正是我需要传递给我的绘图函数的形式。当我在渲染页面上“查看源代码”时，它看起来像这样：

var dataseries = [[[31, 34]], [[45, 33]], [[34, 23]], [[10, 27]], [[21, 37]]];

但是当我在生产服务器上运行它时，它看起来像这样 -

var 数据系列 = -6745-798571322000010791-2270-18；

请注意，我的开发和生产服务器上的 x 和 y 数据是不同的。关键是所有的括号和逗号都被删除了。您能提供的任何帮助将不胜感激 - 这真的让我难过！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T01:45:13.040

我找到[了这个答案](https://stackoverflow.com/questions/10407638/how-do-i-pass-a-ruby-array-to-javascript-to-make-a-line-graph)。

将我认为的代码更改为阅读

```
var dataseries = <%=raw @question.getFormattedAverages.to_json%>; 
```

似乎工作！

# android - 在 ListView 中修改文本大小时更新项目高度

> ID：12718831
> 
> 赞同：1
> 
> 时间：2012-10-04T00:33:55.900
> 
> 标签：android, android-listview, android-arrayadapter, textview

我有一个使用类似于 simple_list_item_1 的 XML 布局来扩充其内容的`ListView`with an 。`ArrayAdapter`我在应用程序菜单中有两个选项来增加/减小文本大小。我设法`TextViews`通过`ListView`覆盖`getView`. `ArrayAdapter`像这样的东西：

```
adapter = new ArrayAdapter<Line>(MyActivity.this, R.layout.line_list, lines){
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        TextView textView = (TextView) super.getView(position, convertView, parent);
        textView.setTextSize(TypedValue.COMPLEX_UNIT_DIP, fontSizeDp + zoom);
        return textView;
    }
};
listView.setAdapter(adapter); 
```

菜单选项更改缩放值并调用`adapter.notifyDataSetChanged();`以使适配器更改文本大小。在那之前一切正常。

**问题是，当我将文本大小减小太多时，每个 TextView 的高度都不会包裹其内容。**也就是说，ListView 的项太高了。当我增加文本大小时，项目高度没有问题。

如果我调用 super.getView(position, convertView, parent); 在 convertView 为空的情况下，我使适配器始终膨胀。在这种情况下，由于高度被换行，因此减小文本大小可以正常工作。但是，我导致工作超负荷，我不希望这样。

我尝试使列表视图和/或文本视图无效或强制布局，但它不起作用。

任何帮助表示赞赏

**编辑：**这是 line_list 布局：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/text1"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:textAppearance="?android:attr/textAppearanceLarge"
android:textSize="@dimen/lineTextSize"
android:gravity="center"
android:paddingLeft="6dip"
android:paddingRight="6dip" /> 
```

lineTextSize 默认为 22dp，大为 40dp

**编辑2：**看起来像这样![在此处输入图像描述](../Images/4c3a4f7836545e037cda36a3a8de627e.png)

而不是这个屏幕：![在此处输入图像描述](../Images/3455f9f85f2d663c452bc2ba5197ec5f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T23:54:54.067

我在[这里](https://stackoverflow.com/questions/9541196/androidtextview-height-doesnt-change-after-shrinking-the-font-size)发现这是 Android 3.1+ 的一个已知错误

解决方案是添加这样的字符串

```
String ZERO_WIDTH_SPACE = "\u200b"; 
```

到 TextViews 的文本。所以，`getView`适配器的正确功能是：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    TextView textView = (TextView) super.getView(position, convertView, parent);
    textView.setTextSize(TypedValue.COMPLEX_UNIT_DIP, fontSizeDp + zoom);
    textView.setText(textView.getText() + ZERO_WIDTH_SPACE);
    return textView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:39:32.663

我设法测试了代码，似乎`ListView`不想在`Honeycomb`及更高版本中更新行的高度（当减小字体大小时）。解决您的问题的一个简单方法是实现`getView`适配器的方法，如果您的字体减少和/或回收的视图不适合当前字体大小，它将重新创建行视图。这是基于您的观察，强制使用set as的`super.getView()`方法是有效的，因为它将始终从头开始构建新行。我的代码正在做类似的事情，但性能要好得多：`convertView``null``ListView`

```
public class CustomAdapter extends ArrayAdapter<String> {

    private LayoutInflater mInflater;
    private int mResource;

    public CustomAdapter(Context context, int resource, String[] objects) {
        super(context, resource, objects);
        mInflater = LayoutInflater.from(context);
        mResource = resource;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null) {
            convertView = mInflater.inflate(mResource, parent, false);
        } else {
            if (mZoom - mOldZoom < 0) {
                Integer cacheZoom = (Integer) convertView.getTag();
                if (cacheZoom == null || cacheZoom.intValue() != mZoom) {
                    convertView = mInflater.inflate(mResource, parent, false);
                    convertView.setTag(mZoom);
                }
            }
        }
        ((TextView) convertView).setTextSize(
                    TypedValue.COMPLEX_UNIT_DIP, 40 + mZoom);
        ((TextView) convertView).setText(getItem(position));
        return convertView;
    }

} 
```

`mZoom`,`mOldZoom`是具有新旧缩放值的变量，用于查看字体的前进方向：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.item1:
        mOldZoom = mZoom;
        mZoom += 2;
        mAdapter.notifyDataSetChanged();
        break;
    case R.id.item2:
        mOldZoom = mZoom;
        mZoom -= 2;
        mAdapter.notifyDataSetChanged();
        break;
    }
    return super.onOptionsItemSelected(item);
} 
```

# c# - 从 C++ 创建的二进制文件中读取 Int64 值失败

> ID：12718834
> 
> 赞同：2
> 
> 时间：2012-10-04T00:34:14.010
> 
> 标签：c#, binary, windows-ce

我正在开发一个 C# CE 应用程序来从 C++ 程序创建的二进制文件中读取数据以进行项目验证。

下面是C++程序的编码。。

```
 // File Name: Ean2an.bin which is created by struct 
    struct EAN2AN_TYPE 
    {
    __int64     ean:40;     // 5 bytes, up to 12 digits
    __int64     rec_no:24;  // 3 bytes rec no in the c_ItemMaster File, up to 16 million  records
    };

    // After bind data to struct, wil create the binary file
   bool CreateBin_EAN2AN_TYPE()
   {
    if(mn_RecordCount_EAN2AN_TYPE == 0) return false;

    FILE   *binfile;

    qsort(mc_EAN2AN_TYPE, mn_RecordCount_EAN2AN_TYPE, sizeof(struct EAN2AN_TYPE), qsort_EAN2AN_TYPE);
    try
    {
        binfile = fopen(ms_Path_EAN2AN_TYPE, "wb");
        fwrite(&mc_EAN2AN_TYPE, sizeof(struct EAN2AN_TYPE), mn_RecordCount_EAN2AN_TYPE, binfile);
    }
    catch(Exception ^ex)
    {
        TaskProgramLibrary::Message::ERR("Create EAN2AN_TYPE.bin fail!\r\n       " + ex->Message);
    }
    finally
    {
        fclose(binfile);

        mdw_FileSize_EAN2AN_TYPE = FileSize(ms_Path_EAN2AN_TYPE);
    }

    return true;
      } 
```

我尝试使用二进制读取（基于位置）读取数据并使用 bitconverter 转换为 int64 或使用 Marshal.PtrToStructure，但返回值不正确。然后我尝试从文件中读取 5 个字节而不是 8 个字节，但返回的值仍然不正确。

```
Below is the written C# coding
    //Struct created in C#
   [StructLayout(LayoutKind.Sequential)]
        public struct EAN2AN_TYPE
        {
            [MarshalAs(UnmanagedType.I8)]
            public Int64 ean;
            [MarshalAs(UnmanagedType.I8)]
            public Int64 rec_no;
        } 

    //The ways i tried to read in C#
    //1.Read Int64 by Binary 
    private void ReadByBinary()
         {
            using (BinaryReader b = new BinaryReader(_fs))
            {
                while (b.PeekChar() != 0)
                {
                    Int64 x = b.ReadInt64();
                    Console.WriteLine(x.ToString());

                }
            }

        }

   //2.Using Marshal to convert the Intptr to struct's field type
    private object ReadByMarshal(Type iType)
        {
            _oType = iType;// typeof(System.Int64);
            byte[] buffer = new byte[Marshal.SizeOf(_oType)];
            //byte[] buffer = new byte[5];

            object oReturn = null;

            try
            {
                _fs.Read(buffer, 0, buffer.Length);

                GCHandle handle = GCHandle.Alloc(buffer, GCHandleType.Pinned);
                oReturn = Marshal.PtrToStructure(handle.AddrOfPinnedObject(), _oType);
                handle.Free();

                return oReturn;
            }
            catch (Exception ex)
            {
                throw ex;
            }
        }

    //3\. Use Binary and use bit converter to convert to Int64
     private void ReadByBinaryAndUseBitConverter()
        {
            using (BinaryReader b = new BinaryReader(_fs))
            {
                byte[] x = b.ReadBytes(8);
                Int64 y = BitConverter.ToInt64(x, 0);
                Console.WriteLine(y);

                byte[] x2 = b.ReadBytes(8);
                Int64 y2 = BitConverter.ToInt64(x2,0);
                Console.WriteLine(y2);
            }

        }

    //4\. Use Marshal and convert to struct
    public EAN2AN_TYPE  GetStructValue()
        {

            byte[] buffer = new byte[Marshal.SizeOf(typeof(EAN2AN_TYPE)];

            EAN2AN_TYPE oReturn = new EAN2AN_TYPE();

            try
            {
                //if (EOF) return null;

                _fs.Read(buffer, 0, buffer.Length);
                GCHandle handle = GCHandle.Alloc(buffer, GCHandleType.Pinned);
                IntPtr rawDataPtr = handle.AddrOfPinnedObject();

               oReturn = (EAN2AN_TYPE)Marshal.PtrToStructure(rawDataPtr, typeof(EAN2AN_TYPE));

                handle.Free();

                if (_fs.Position >= _fs.Length)
                    Close();

                return oReturn;
            }
            catch (Exception ex)
            {
                throw ex;
            }
        } 
```

编辑：上传二进制文件的图像 ![在此处输入图像描述](../Images/4b5a64eefbeaa679a8f35e17087f2c60.png)

编辑：C#程序读取的前8个字节值 ![在此处输入图像描述](../Images/4981b21c53518c74a9b28f27160596e5.png)

编辑器显示的二进制数据 ![在此处输入图像描述](../Images/fe9a3523433076ba54c229e453fe2b30.png)

有人知道吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T01:02:13.903

`ean`定义为 40 位的实体，`rec_no`是 24 位的，使得整个结构体只有 64 位。您的定义`EAN2AN_TYPE`是 128 位，所以显然会有问题。我质疑编写初始代码的人的理智，但你的工作是取回并使用它，所以你玩你所处理的。

**编辑：更新以使用您指定的数据并考虑到本的投诉**

这是获得相同结果的两种方法。一个更容易理解，因为它是逐步移动的，另一个更快且“更正确”。我将您的示例 EAN 数据放入我的输入中以验证结果。

```
public struct EAN2AN_TYPE
{
    public long ean; // can hold 5 bytes
    public int rec_no; // can hold 3 bytes
}

byte[] incoming = new byte[] { 0x6F, 0x5D, 0x7C, 0xBA, 0xE3, 0x06, 0x07, 0x08 }; 
```

内存复制：

```
using(var stream = new MemoryStream(incoming))
using (var reader = new BinaryReader(stream))
{
    // I leave it to you to get to the data
    stream.Seek(0, SeekOrigin.Begin);

    // get the data, padded to where we need for endianness
    var ean_bytes = new byte[8];
    // read the first 5 bytes
    Buffer.BlockCopy(reader.ReadBytes(5), 0, ean_bytes, 0, 5);
    var rec_no_bytes = new byte[4];
    // read the last 3
    Buffer.BlockCopy(reader.ReadBytes(3), 0, rec_no_bytes, 0, 3);

    var ean2 = new EAN2AN_TYPE();

    // convert
    ean2.ean = BitConverter.ToInt64(ean_bytes, 0);
    ean2.rec_no = BitConverter.ToInt32(rec_no_bytes, 0);
} 
```

位移：

```
using (var stream = new MemoryStream(incoming))
using (var reader = new BinaryReader(stream))
{
    // I leave it to you to get to the data
    stream.Seek(0, SeekOrigin.Begin);

    // get the data
    var data = BitConverter.ToUInt64(reader.ReadBytes(8), 0);
    var ean2 = new EAN2AN_TYPE();

    // shift into our data
    ean2.ean = (long)(data & ~0xFFFFFF0000000000);
    ean2.rec_no = (int)(data >> 40);
} 
```

当然，你可以创建`EAN2AN_TYPE`一个类，以 8 个字节提供它，然后让属性访问器也为你做一些转移的恶作剧。如果这必须是双向的事情（即您需要将数据放入其中一个结构中以发送回 C 应用程序），我会这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T00:39:02.460

这可能是数据的字节顺序（如果这是一个词）的问题。如果数据是在大端系统上写入的，而在小端系统上读取，则会遇到这样的问题，反之亦然。

另一个问题是这两个字段实际上被打包成一个 64 位值。您可能需要读取 Int64，然后使用位操作来提取这两个字段。您的所有代码似乎都在通过各种方式读取两个 Int64 值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T02:56:51.320

感谢您的回复..

最初的 C++ 代码由供应商编写。我只能通过阅读 C++ 代码来尝试理解。据我了解..它只是创建二进制文件并写入数据..我无法从代码中找到任何编码/转换部分..

我试图通过代码手动将第一个 ean(978086288751) 转换为 byte[]。byte[] 是 111 93 124 186 227 0 0 0 这与我得到的结果不同..

我已经测试了 ctacke 建议的代码。但我仍然无法获得正确的 ean..

下面是编码..（我在文件流中添加以读取二进制文件）

```
 using (FileStream fileStream = File.OpenRead(_File))
            {
                MemoryStream memStream = new MemoryStream();
                memStream.SetLength(fileStream.Length);
                fileStream.Read(memStream.GetBuffer(), 0, (int)fileStream.Length);

                using (BinaryReader reader = new BinaryReader(memStream))
                {
                    //stream.SetLength(_fs);               
                    // I leave it to you to get to the data
                    memStream.Seek(0, SeekOrigin.Begin);

                    // get the data, padded to where we need for endianness
                    byte[] ean_bytes = new byte[8];
                    // if this is wrong - then change param 4 to '3' to align at the other end
                    Buffer.BlockCopy(reader.ReadBytes(8), 0, ean_bytes, 0, 8);
                    //byte[] rec_no_bytes = new byte[4];

                    byte[] rec_no_bytes = new byte[4];
                    // if this is wrong - then change param 4 to '1' to align at the other end
                    Buffer.BlockCopy(reader.ReadBytes(3), 0, rec_no_bytes, 0, 3);

                    EAN2AN_TYPE ean2 = new EAN2AN_TYPE();

                    // convert
                    ean2.ean = BitConverter.ToInt64(ean_bytes, 0);
                    ean2.rec_no = BitConverter.ToInt32(rec_no_bytes, 0);
                }

            } 
```

//结果读取 5 个字节 : 17 0 0 0 0 ean : 17

//我改成

```
 var ean_bytes = new byte[8];
    Buffer.BlockCopy(reader.ReadBytes(8), 0, ean_bytes, 0, 8); 
```

结果读取 8 个字节：17 0 0 0 0 108 94 5 ean：386865365256241169

很抱歉，我仍然是新用户.. 无法发布任何附件.. 希望您能从我的解释中理解。

# java - 加载 JOGL 时出现的奇怪问题

> ID：12718835
> 
> 赞同：1
> 
> 时间：2012-10-04T00:34:17.977
> 
> 标签：java, opengl, dll, jogl

我一直收到这个 Java 运行时错误：

`Exception in thread "main" java.lang.UnsatisfiedLinkError: no jogl in java.library.path`

这与难以加载使用 Java OpenGL 所需的依赖本机库有关。这是一个遍布网络的问题；有一些依赖文件需要在类路径上。我已经尝试过`java -Djava.library.path "path/to/dir"`注册 DLL 的方法，但它似乎没有帮助。我想这可能是因为我试图在 Netbeans IDE 中运行这个应用程序。

奇怪的是，我已经下载了 Netbeans JOGL 插件和他们的示例应用程序，它们完美地展示了一些基本的 OpenGL 功能！我搜索了代码，没有自定义 DLL 加载，也没有我可以看到的任何项目特定的配置设置。我不知道是怎么回事！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T00:33:27.893

如果您参考 jogamp.org 的 JOGL，请查看我们[的 IDE Wiki 页面](http://jogamp.org/wiki/index.php/Setting_up_a_JogAmp_project_in_your_favorite_IDE)。

感谢我们的[自动化原生 JAR 库加载](http://jogamp.org/jogl/doc/userguide/index.html#automatednativelibraryloading)，您甚至根本不需要设置原生库路径。

使用 Eclipse 运行良好 - 正如我听说的使用 Netbeans 一样。

请不要忘记将源 zip 文件附加到匹配的 gluegen/jogl jar 文件中，这样您就可以从我们的 javadoc 中受益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T04:40:04.613

检查示例应用程序的设置。例如，在 Eclipse 中，您应该将 jars 添加到构建路径中（可以从项目设置中访问）

你也可以试试这个插件： http: [//plugins.netbeans.org/plugin/11451/addtolibrary](http://plugins.netbeans.org/plugin/11451/addtolibrary)

# javascript - Twitter Bootstrap 选项卡在点击时不会改变

> ID：12718839
> 
> 赞同：3
> 
> 时间：2012-10-04T00:35:07.053
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在使用 Twitter Bootstrap v2.1.1 及其可选项卡功能。

**问题：**单击任何选项卡时，尽管选项卡按钮本身`tab-pane`的状态发生了变化，但不会更改。`.tab`换句话说，当您单击选项卡按钮时，它会显示为按下状态，但应该随选项卡更改的内容不会。A`console.log()`表示正在触发 click 事件。有任何想法吗？

**HTML**

```
<!-- Tab Bar -->
<div class="tab-bar">
    <div class="tab active" id="photos" data-toggle="tab" data-target="#photos">
        <p>Photos</p>
    </div>
    <div class="tab" id="details" data-toggle="tab" data-target="#details"
        ><p>Details</p>
    </div>
</div>

<!-- Tab Panes -->
<div class="tab-content">
    <div id="photos" class="tab-pane">Photos</div>
    <div id="details" class="tab-pane">Details</div>
</div> 
```

**JS**

```
$('.tab-bar').tab();
$('.tab-bar .tab').click(function(e) {
    e.preventDefault();
    $(this).tab('show');
    console.log('show');
}) 
```

**JS 包括**

```
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/bootstrap-tab.js"></script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T01:16:02.863

几个问题和担忧：

1.  bootstrap-tab.js 的 src 直接链接到 Twitter Github 页面。我不认为这打算成为 Twitter Bootstrap 的 CDN。我相信这个文件是“吃你自己的狗粮”，即 Twitter Bootstrap Github 页面使用 Twitter Bootstrap 进行文档和下载。

    由于并非如此，他们可以随时轻松地更改目录结构或版本。

2.  您正在使用 bootstrap.min.js 和 bootstrap-tab.js。我相信 bootstrap.min.js 包括 bootstrap-tab.js 并且使用两者都会导致问题。请参阅以下帖子：[https ://groups.google.com/forum/?fromgroups=#!topic/twitter-bootstrap/XH_ttp_9yXg](https://groups.google.com/forum/?fromgroups=#!topic/twitter-bootstrap/XH_ttp_9yXg)

3.  我也在使用`twitter bootstrap 2.1.1`. `tab-bar`我在`bootstrap.min.js`, `bootstrap-tab.js`,中没有找到`bootstrap.css`。您是否有可能引用 2.1.1 文件并针对旧版本的 Twitter Bootstrap 进行编码？

# logging - 使 Python 日志记录与 Celery 异步工作

> ID：12718840
> 
> 赞同：1
> 
> 时间：2012-10-04T00:35:08.610
> 
> 标签：logging, celery

我有日志记录设置。特别是，我有 SMTPHandler。我想让它异步发生。我想用芹菜来做到这一点。那可能吗？

```
import logging
logger = logging.getLogger("logger")

mail_handler = STMPHandler(...)
mail_handler.setLevel(logging.ERROR)
...
logger.addHandler(mail_handler) 
```

# php - 如何在 blueimp 文件上传器中传递值？

> ID：12718842
> 
> 赞同：0
> 
> 时间：2012-10-04T00:35:14.747
> 
> 标签：php, javascript, json, jquery, blueimp

[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

**顺序：**

在我使用的这个文件上传器中，我想使用**$_GET['id']**请求传递一个值，如下所示：

> [http://mysite.com/message?id=2](http://mysite.com/message?id=2)

**问题：**

**$_GET['id']=2**无法在/server/php/ 文件夹中的**upload_class.php**或**index.php中读取。****从程序中读取$_GET['id']**值的最佳方法是什么？

熟悉该程序的人可以帮助我吗？提前致谢 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T00:49:09.813

您可以通过上传图片时发布的表单发送数据。

有两种方法可以做到这一点。获取或发布数据。

* * *

# 得到

**更改`action`表单的属性以包含附加参数：**

```
<form action="blueimp/php/index.php?id=2" method="post" enctype="multipart/form-data"> 
```

**使用以下命令访问 index.php 中的变量：**

```
$id = $_GET['id']; 
```

* * *

# 邮政

**使用您要传递的值向表单添加一个输入字段：**

```
<form action="blueimp/php/index.php" method="post" enctype="multipart/form-data">

  <input type="hidden" name="id" value="2" />

  <div style="float:left;">
    <label class="fileinput-button">
      <span>Add Images</span>
      <input id="fileSelector" type="file" name="files[]" multiple>
    </label>
    <button type="button" class="delete">Delete Selected</button>
    <button type="button" class="checkAll">Check All</button>
  </div>
</form> 
```

**使用以下命令访问 index.php 中的变量：**

```
$id = $_POST['id']; 
```

# ruby-on-rails - 通过rails 3.2中的属性解析对象数组

> ID：12718843
> 
> 赞同：0
> 
> 时间：2012-10-04T00:35:19.267
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

是否可以解析对象数组以按属性选择它们？我有一种情况，我需要在索引页面上显示按属性分组的模型的所有对象。我在控制器中一直在做的是......

```
#xx_controller.rb

@group1 = City.where(:population => 'big')
@group2 = City.where(:population => 'medium')
@group3 = City.where(:population => 'small') 
```

但我更愿意在控制器中做这样的事情......

```
@cities = City.all 
```

在我看来，类似于查询的内容，而不是预先打包的实例变量-

```
@cities.where.... 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:48:26.927

如果您不介意一次从数据库中加载所有内容，您可以执行以下操作：

```
@cities = City.all.group_by(&:population) 
```

它返回一个散列，其键是`population`属性的可能值。然后，在您看来，您可以通过执行访问每个“组”中的城市`@cities['small']`，`@cities['medium']`依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:45:41.937

你的意思是这样的吗？

```
@cities = City.all

small_cities = @cities.select { |city| city.population == 'small' }
medium_cities = @cities.select { |city| city.population == 'medium' }
big_cities = @cities.select { | city| city.population == 'big' } 
```

# r - 如何在R中的格子图形中设置条形标签字体大小

> ID：12718847
> 
> 赞同：19
> 
> 时间：2012-10-04T00:35:40.360
> 
> 标签：r, graphics, plot, lattice

我用三个面板创建了一个格子图。我可以控制轴和刻度标签的字体大小，但我无法弄清楚如何增加条形标签的字体大小。这是一个具体的例子：

```
# See below for the fake data to run this code
library(lattice)
barchart(choice ~ yes+no+not.app|group, data=data, 
         stack=TRUE, col=c("green","red","blue"), 
         xlim=c(0,100), layout=c(3,1),
         scales=list(cex=c(1.4,1.4), alternating=3),
         xlab=list(label="Percent of Respondents", fontsize=20), 
         main="") 
```

这是此代码生成的图表。请注意，除了条形标签（“第 1 组”、“第 2 组”、“第 3 组”）之外，所有字体都很好而且很大。我一直在 R-help 和 Stack Overflow 周围钓鱼，但无法解决这个问题。有谁知道魔法咒语？

![在此处输入图像描述](../Images/f691daa52f608977c4d739cbf4480350.png)

```
data = structure(list(choice = c("Choice 1", "Choice 1", "Choice 1", 
"Choice 2", "Choice 2", "Choice 2", "Choice 3", "Choice 3", "Choice 3", 
"Choice 4", "Choice 4", "Choice 4"), group = c("Group 1", "Group 2", 
"Group 3", "Group 1", "Group 2", "Group 3", "Group 1", "Group 2", 
"Group 3", "Group 1", "Group 2", "Group 3"), yes = c(23.53, 20.47, 
22.94, 16.51, 16.54, 16.51, 9.68, 13.39, 10.4, 24.48, 29.92, 
25.54), no = c(41.37, 37.01, 40.52, 48.39, 40.94, 46.94, 55.22, 
44.09, 53.06, 40.42, 27.56, 37.92), not.app = c(35.1, 42.52, 
36.54, 35.1, 42.52, 36.54, 35.1, 42.52, 36.54, 35.1, 42.52, 36.54
)), .Names = c("choice", "group", "yes", "no", "not.app"), row.names = c(NA, 
12L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-04T01:58:06.420

试试这个（提供一个例子的好工作）：

```
barchart(choice ~ yes+no+not.app|group, data=data, 
     par.strip.text=list(cex=2),
     stack=TRUE, col=c("green","red","blue"), 
     xlim=c(0,100), layout=c(3,1),
     scales=list(cex=c(1.4,1.4), alternating=3),
     xlab=list(label="Percent of Respondents", fontsize=20), 
     main="") 
```

要了解有关如何管理条带功能的更多信息，请键入：`?strip.default` 还有其他一些杠杆可以投入使用`strip.custom`。另请参阅 latticeExtra 包装，该包装能够在侧面放置带有`useOuterStrips`.

# android - 内容提供者用户词典上的查询错误

> ID：12718850
> 
> 赞同：0
> 
> 时间：2012-10-04T00:36:46.367
> 
> 标签：android

```
 String[] mProjection =
   {
    // UserDictionary.Words._ID,    // Contract class constant for the _ID column name
   UserDictionary.Words.WORD,   // Contract class constant for the word column name
   UserDictionary.Words.LOCALE  // Contract class constant for the locale column name
  };

   searchvalue = (EditText) findViewById(R.id.editText);

    mSelectionClause = UserDictionary.Words.WORD + " LIKE ?";
    mSelectionArgs[0] = searchvalue.getText().toString();

   Cursor mCursor = getContentResolver().query(
   UserDictionary.Words.CONTENT_URI,  
   mProjection,                       
   mSelectionClause,                  
   mSelectionArgs,                    
   null); 
```

任何想法为什么我在此查询中绑定或列索引超出范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:04:09.017

错误绑定或列索引超出范围是由于我没有在投影字段中包含主键字段 (UserDictionary.Words._ID)。

# android - android - 将文本视图与另一个视图的中心对齐

> ID：12718853
> 
> 赞同：21
> 
> 时间：2012-10-04T00:37:11.310
> 
> 标签：android, android-layout

我有一些图像按钮，每个都有一个相应的文本视图，我想将这些文本视图对齐到它们相应图像视图的中心，我的意思是，就像在应用程序抽屉上看到的那样......

```
 !-----!
 !icon !
 !_____!
app  name 
```

这是我的代码，我正在使用`RelativeLayout`

```
<ImageButton
    android:id="@+id/blog_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/logo_img"
    android:layout_marginLeft="50dp"
    android:layout_marginTop="51dp"
    android:background="@null"
    android:contentDescription="@string/blog_desc"
    android:src="@drawable/blog" />

<TextView
    android:id="@+id/blog_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/blog_button"
    android:layout_below="@+id/blog_button"
    android:layout_marginTop="8dp"
    android:text="@string/blog_desc" /> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-04T00:41:23.927

将其包裹在 a`LinearLayout`中并使孩子居中，如下所示：

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/logo_img"
    android:gravity="center_horizontal"
    android:orientation="vertical">

    <ImageButton
        android:id="@+id/blog_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@null"
        android:contentDescription="@string/blog_desc"
        android:src="@drawable/blog" />

    <TextView
        android:id="@+id/blog_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/blog_desc" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-07-16T15:33:42.753

旧帖子，但如果这可以帮助我认为没有必要添加额外的容器。

```
<ImageButton
    android:id="@+id/blog_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/logo_img"
    android:layout_marginLeft="50dp"
    android:layout_marginTop="51dp"
    android:background="@null"
    android:contentDescription="@string/blog_desc"
    android:src="@drawable/blog" />

<TextView
    android:id="@+id/blog_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/blog_button"
    android:layout_alignRight="@+id/blog_button"
    android:layout_below="@+id/blog_button"
    android:gravity="center_horizontal"
    android:layout_marginTop="8dp"
    android:layout_marginLeft="-20dp"
    android:layout_marginRight="-20dp"
    android:text="@string/blog_desc" /> 
```

这对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-16T15:54:16.423

如果 TextView 可以是透明的，那么这可以通过单个 View 来实现

```
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Test string"
    android:drawableTop="@android:drawable/btn_star"
    android:background="@android:color/transparent"
    android:textSize="10sp"
     /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-20T12:48:27.613

如果您的意见`RelativeLayout`遵循以下步骤：

1- 将想要在 Framelayout 中的目标视图中心对齐的视图包装起来。

2-将所有布局属性移动到 FrameLayout。

3-设置`layout_align_top`和`layout_align_bottom`（或开始和结束，如果水平）到目标视图。

4-设置`layout_gravity`为`center_vertical`（或`horizontal`）为框架布局的子级

结果： [![在此处输入图像描述](../Images/c4bca197db5176bb5948dca13e3c11c4.png)](https://i.stack.imgur.com/gQBS0.png)

```
<RelativeLayout
        android:id="@+id/yourView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintHorizontal_bias="0.0">

    <RatingBar
            android:id="@+id/masseur_rating_bar"
            android:layout_width="wrap_content"
            android:layout_height="16dp"
            android:layout_alignParentStart="true"
            android:layout_centerVertical="true"
            android:isIndicator="true"
            android:progressDrawable="@drawable/ic_selector_rating_bar"
            android:rating="@{masseurItem.rate}"
            android:scaleX="0.8"
            android:scaleY="0.8"
            tools:rating="4.5" />

    <TextView
            android:id="@+id/rate_text_view"
            style="@style/BodyTextViewStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toEndOf="@id/masseur_rating_bar"
            android:text="@{String.valueOf(masseurItem.rate)}"
            android:textSize="12sp"
            tools:text="4.5" />
</RelativeLayout> 
```

# iphone - Objective-C main.m 没有指定哪个应用程序委托，它仍然有效

> ID：12718855
> 
> 赞同：1
> 
> 时间：2012-10-04T00:37:26.790
> 
> 标签：iphone, objective-c

在这里完成教程：http: [//developer.apple.com/library/ios/#documentation/iphone/conceptual/iphone101/Articles/01_CreatingProject.html](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphone101/Articles/01_CreatingProject.html)

我注意到在支持文件的 main.m 中，他们说初始化发生在这里：

```
@autoreleasepool {
   return UIApplicationMain(argc, argv, nil, NSStringFromClass([HelloWorldAppDelegate class]));
} 
```

这是有道理的。它在程序开始时选择 HelloWorldAppDelegate。然而，在我与单视图模板一起使用的情况下，初始化值为空：

```
int main(int argc, char *argv[])
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    int retVal = UIApplicationMain(argc, argv, nil, nil);
    [pool release];
    return retVal;
} 
```

它在哪里指定要运行哪个应用程序委托？我运行了它，它运行良好，但不知道为什么有些东西让我感到烦恼。它是在另一个文件中声明的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T00:43:04.917

它在 xib/nib 文件中设置。[UIApplicationMain()](http://developer.apple.com/library/ios/documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIApplicationMain)的文档中提到了这一点。

# actionscript-3 - AS3点比较

> ID：12718857
> 
> 赞同：1
> 
> 时间：2012-10-04T00:37:39.877
> 
> 标签：actionscript-3, flash, comparison, point

我想知道为什么不能比较相等的点并使用'=='显示为相等

例如

```
var p1:Point = new Point( 1, 5 );
var p2:Point = new Point( 1, 5 );

trace( p1 == p2 )                   //false
trace( p1.x == p2.x, p1.y == p2.y ) //true true
trace( p1.equals( p2 ))             //true 
```

这似乎很奇怪而且有点毫无意义（双关语）
有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T00:42:49.060

`p1 == p2`比较两个对象，而不是对象的 x 和 y 分量。由于 p1 和 p2 是不同的对象（由新点创建）`p1 == p2`返回 false。

该[`.equals()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Point.html#equals%28%29)方法对 x 和 y 分量进行比较，因此它返回 true。

以下将返回 true ：

```
var p1:Point = new Point(1,5);
var p2:Point = p1;
trace(p1==p2); 
```

因为 p1 和 p2 实际上是同一个对象。

# facebook - 如何发布带有标记的 Google 地方信息（或地图）的操作？

> ID：12718862
> 
> 赞同：1
> 
> 时间：2012-10-04T00:38:02.680
> 
> 标签：facebook, location, action, tagging, google-places-api

我在发布带有标记的 Google Places 而不是 Facebook Place 的操作（使用 OpenGraph）时遇到问题。根据以下文档，它应该是直截了当的： [https ://developers.facebook.com/docs/opengraph/location_tagging/#third_party](https://developers.facebook.com/docs/opengraph/location_tagging/#third_party)

但是每次我尝试使用**place=http://GOOGLE_PLACE_URL**发布操作时，都会收到以下错误消息：

**您尝试发布的操作无效，因为指定的地点“http://GOOGLE_PLACE_URL”无效。**

我试过放 Google Maps、Google Places 和 Google+ Local URL，但都遇到了同样的问题。

注意：当我设置“place=Facebook_Place_ID”时，我可以成功发布操作。

非常感谢任何帮助或提示！

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T00:43:26.923

我认为 Google 的地点页面没有支持 Open Graph 所需的标记

从文档中：

> 使用 3rd 方地点发布操作与上面的位置标记示例类似，不同之处在于您会将 url 传递给另一个站点的`place`对象。

文档中的foursquare示例被定义为一个地方，以及foursquare使用的元数据： [https ://foursquare.com/v/eataly/4c5ef7​​7bfff99c74eda954d3](https://foursquare.com/v/eataly/4c5ef77bfff99c74eda954d3)

请参阅[https://developers.facebook.com/tools/debug/og/object?q=https%3A%2F%2Ffoursquare.com%2Fv%2Feataly%2F4c5ef7](https://developers.facebook.com/tools/debug/og/object?q=https%3A%2F%2Ffoursquare.com%2Fv%2Feataly%2F4c5ef77bfff99c74eda954d3) ​​7bfff99c74eda954d3 上的[Facebook 调试工具](https://developers.facebook.com/tools/debug)- 它清楚地显示了foursquare的位置被定义为 Facebook 并有可用的位置数据 - 我怀疑谷歌在他们的位置页面上没有这个`‎og:type‎ playfoursquare:venue`

# perl - 使用 perl 系统 grep

> ID：12718866
> 
> 赞同：0
> 
> 时间：2012-10-04T00:38:20.157
> 
> 标签：perl, shell, mod-perl

有下面的 perl grep`regex`并且它工作正常。

```
 my  @cont = grep {/,\s*511747450\s*,\s*CAN2\s*$/} @fileContents; 
```

我想将其转换为 unix 系统`grep`，并以以下方式使用命令尝试了相同的正则表达式`system`，但它不起作用。

```
 my $cmd="grep ,\s*5117474501\s*,\s*CAN2\s*\$ " . $dirPath . "/" .$fileName;
  my $exitStatus =system($cmd); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T01:46:46.050

`\`,`*`并且`$`对 shell 来说是特殊的。一些更多的逃避是为了。

```
use String::ShellQuote qw( shell_quote );

my $pat = ',\\s*5117474501\\s*,\\s*CAN2\\s*$';

my $cmd = shell_quote('grep', '--', $pat, "$dirPath/$fileName");
my $exitStatus = system($cmd); 
```

或者，您可以简单地通过使用`system`.

```
my $pat = ',\\s*5117474501\\s*,\\s*CAN2\\s*$';

my @cmd = ('grep', '--', $pat, "$dirPath/$fileName");
my $exitStatus = system({ $cmd[0] } @cmd); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T01:06:52.757

在某些版本中， grep 不适`\s`用于 bash。

尝试`[:space:]`代替`\s`.

grep 的行为因版本而异。

# android - 有人在 nikon s800c 上安装了 android 调试桥到 linux 主机工作吗？

> ID：12718867
> 
> 赞同：0
> 
> 时间：2012-10-04T00:38:20.623
> 
> 标签：android, adb, udev

好的，我有一个全新的 Nikon S800c 安卓相机，我想为其开发一个专门的相机应用程序，但我似乎无法让它出现在“adb devices”命令中。它是 USB ID 04b0:018f。在使用 udevadm 监视事件并在相机上启用或禁用 USB 调试时，我肯定会看到活动，但它从未显示为 adb 知道的设备。SDK 或 linux 中是否有需要更新以了解全新设备的内容？我确实添加了一条 udev 规则以使其模式为 666，甚至以 root 身份尝试了 adb 命令，但它从未出现过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:43:54.247

好的，魔术似乎是创建 ~/.android/adb_usb.ini 文件并将 0x04b0 值放入其中（仅在一行上）。我猜尼康是一个足够新的 android 设备制造商，股票 adb 不知道该供应商。在 google android 讨论组中得到了这个答案：

[https://groups.google.com/forum/?fromgroups=#!topic/android-discuss/ky_YMMxPxQ4](https://groups.google.com/forum/?fromgroups=#!topic/android-discuss/ky_YMMxPxQ4)

# php - 如何进行选择性for循环？

> ID：12718869
> 
> 赞同：0
> 
> 时间：2012-10-04T00:38:29.173
> 
> 标签：php, for-loop

我有一个复杂的场景，我需要运行一个 for 循环，它应该一直运行，不依赖于变量，但是如果变量确实存在（意味着它不等于''），那么我需要检查另一个。如果这两个条件都为真，那么它应该继续。令人困惑，但很难解释让我尝试向您展示：

$subcat 在 for 循环之前的其他地方定义

```
for($i=0; $i<sizeof($news_posts); ++$i)
    $subcategory = $news_posts[$i]['subcategory'];

    if( $subcat != '' && $subcat == $subcategory){
    CONSEQUENT XYZ. 
```

所以基本上。我需要这个 for 循环来每次执行 XYZ。但是如果 Subcat 存在，那么它只需要显示 subcat 与 subcategory 相同的结果。

1.  每次都跑
2.  如果 subcat 不存在，则显示每个条目。
3.  如果 subcat 确实存在，请检查 subcat == subcategory
4.  如果 subcat 确实 == subcategory，则显示它们的子类别与 sub cat 相同的每个条目。

怎么做这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T01:12:56.570

```
for($i = 0; $i < sizeof($news_posts); ++$i) {
    $subcategory = $news_posts[$i]['subcategory'];

    //Show entry only if subcat is not set OR if it is set and matches the subcategory
    if(!isset($subcat) || ($subcat == $subcategory)) {
        //Do show entry stuff
    }
} 
```

应该是不言自明的，这是您似乎正在寻找的条件。如果`$subcat`设置了只有匹配子类别的迭代将运行显示条目代码，否则所有迭代都将运行它。

因为 isset 是一种语言结构而不是函数，并且因为如果语句的第一个条件为真，则第二个条件被忽略，如果`$subcat`从未声明过，上面的代码不会引发错误，而不是原始代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:41:30.213

使用 isset() 测试变量是否存在： [php man isset](http://php.net/manual/en/function.isset.php)

# ruby - 如何在 Ruby 中创建 CSV 文件的某些列的副本，其中一列中有不同的数据？

> ID：12718872
> 
> 赞同：85
> 
> 时间：2012-10-04T00:39:00.387
> 
> 标签：ruby, csv

我有一个名为“A.csv”的 CSV 文件。我需要使用来自“A.csv”的数据生成一个名为“B.csv”的新 CSV 文件。

我将使用“A.csv”中的列子集，并且必须将一列的值更新为“B.csv”中的新值。最终，我将使用 B.csv 中的这些数据来验证数据库。

1.  如何创建新的 CSV 文件？
2.  如何将所需列的数据从 A.csv 复制到“B.csv”？
3.  如何为特定列附加值？

我是 Ruby 新手，但我能够读取 CSV 来获取数组或哈希。

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2013-10-30T22:24:00.227

正如 mikeb 指出的那样，有文档 - [http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html](http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html) - 或者您可以按照下面的示例进行操作（所有这些都经过测试并且在职的）：

## 要创建一个新文件：

在这个文件中，我们将有两行，一个标题行和一个数据行，非常简单的 CSV：

```
require "csv"
CSV.open("file.csv", "wb") do |csv|
  csv << ["animal", "count", "price"]
  csv << ["fox", "1", "$90.00"]
end 
```

结果，一个名为“file.csv”的文件包含以下内容：

```
animal,count,price
fox,1,$90.00 
```

* * *

## 如何将数据附加到 CSV

与上面的公式几乎相同，只是我们不使用“wb”模式，而是使用“a+”模式。有关这些的更多信息，请参阅此堆栈溢出答案：[什么是 Ruby File.open 模式和选项？](https://stackoverflow.com/questions/3682359/what-are-the-ruby-file-open-modes-and-options)

```
CSV.open("file.csv", "a+") do |csv|
  csv << ["cow", "3","2500"]
end 
```

现在，当我们打开 file.csv 时，我们有：

```
animal,count,price
fox,1,$90.00
cow,3,2500 
```

* * *

## 从我们的 CSV 文件中读取

现在您知道如何复制和写入文件、读取 CSV 并因此获取数据以进行您刚刚执行的操作：

```
CSV.foreach("file.csv") do |row|
  puts row #first row would be ["animal", "count", "price"] - etc.
end 
```

当然，这就像使用这个 gem 从 CSV 中提取信息的一百种不同方式中的一种。欲了解更多信息，我建议您既然有了入门知识就访问文档：[http ://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html](http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T00:50:10.340

你看过 Ruby 的 CSV 类吗？看起来还挺全面的。在这里查看： [http ://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html](http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-17T22:33:40.100

您可能希望使用它`CSV::parse`来帮助 Ruby 将 CSV 理解为数据表，并通过标题轻松访问值。

不幸的是，关于该[方法的可用](https://ruby-doc.org/stdlib-2.6.1/libdoc/csv/rdoc/CSV.html#method-c-parse)[文档`CSV::parse`](https://ruby-doc.org/stdlib-2.6.1/libdoc/csv/rdoc/CSV.html#method-c-parse)并没有很清楚地说明如何实际使用它。

*[我有一个类似的任务，并且通过 ruby​​guides.com 上的How to Read & Parse CSV Files With Ruby](https://www.rubyguides.com/2018/10/parse-csv-ruby/)*得到了更多的帮助，而不是 CSV 类文档或从这里指向它的答案。

我建议完整阅读该页面。关键部分是关于使用以下方法将给定的 CSV 转换为`CSV::Table`对象：

```
table = CSV.parse(File.read("cats.csv"), headers: true) 
```

现在有关于[class的](https://ruby-doc.org/stdlib-2.6.1/libdoc/csv/rdoc/CSV/Table.html)[文档`CSV::Table`](https://ruby-doc.org/stdlib-2.6.1/libdoc/csv/rdoc/CSV/Table.html)，但是 ruby​​guides.com 页面上的清晰示例可能会再次为您提供更多帮助。我要强调的一件事是，当您告诉`.parse`期望标题时，结果表会将第一行数据视为 row `[0]`。

您可能会对`.by_col`新`Table`对象可用的方法特别感兴趣。这将允许您遍历输入和/或输出中的不同列索引位置，并从一个复制到另一个或向输出添加一个新值。如果我让它工作，我会回来并发布一个例子。

# android - 移动（Android）浏览器：从只读输入字段中删除边框

> ID：12718875
> 
> 赞同：2
> 
> 时间：2012-10-04T00:39:16.773
> 
> 标签：android, input, field, readonly

第一次在这里发帖，但我一直在拖钓多年，并且总是在这里找到有用的答案，所以感谢社区以前的帮助:)

我的问题是：我正在使用基本表单字段为我公司的网站构建一个移动网站。我正在使用只读输入字段计算订单表格上的总数。问题是在我的 Android 浏览器（可能还有其他浏览器，我还没有完全测试）中，只读字段会显示一个边框，即使我已经尝试删除它 - 请参阅表单底部的摘要部分以下。

这是订购单： [https ://m.eyemagic.net/cc-order.html](https://m.eyemagic.net/cc-order.html)

也许你可以提供一些帮助？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T04:09:25.443

我猜你正在使用一个`edittext`作为你的只读输入字段。如果是这样使其与给定的网页相似，只需将`android:background`透明设置为：

```
<EditText
            android:id="@+id/txtBoxId"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10"
            android:clickable="false"
            android:background="#00FFFFFF"
            android:inputType="textNoSuggestions" /> 
```

希望它是有帮助的.. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T04:43:18.623

If you want it to appear as simple text, then use < span > and style appropriately. However if you want to stick to < input type="text" .../ > then make sure it is not editable and not focusable too.

```
 <input type="text" disabled="disabled" taborder="-1" ...> 
```

this will prevent android from drawing the focus border around the control too.

Hope this helps.

# codeigniter - 我正在使用 codeigniter 的上传功能，但是一旦我编辑了该项目，如何附加上传到服务器上的图像？

> ID：12718878
> 
> 赞同：0
> 
> 时间：2012-10-04T00:39:40.610
> 
> 标签：codeigniter, file-upload, upload

我已经成功使用[文件上传库](http://codeigniter.com/user_guide/libraries/file_uploading.html)在服务器上上传我的文件（主要是图像）。

我的问题是当我需要更新该特定项目时，我需要再次浏览照片。有没有办法可以将已经在服务器中上传的图像附加到我的上传按钮？我正在考虑制作一个像 wordpress 那样的媒体页面，但是有没有人知道谁能指出我的起点？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T05:07:46.813

您可以使用隐藏字段...查看此示例

**看法**

```
<?php echo form_upload("vLogo", $campaign->vLogo , "id='vLogo'"); ?>
<?php echo form_hidden("vLogo_old", $campaign->vLogo , "id='vLogo_old'"); ?> 
```

**控制器**

（编辑功能）

```
//The way you do when you click on browse and select a file
if(isset($_FILES['vLogo']['tmp_name']) && !empty($_FILES['vLogo']['tmp_name']))
{

            $this->load->library('upload', $config);
            // Initialaizing Logo upload
            $this->upload->initialize($config);

            if ( !$this->upload->do_upload('vLogo')){
                $logo_error = array('vLogo' => $this->upload->display_errors());
            }
            else{
                $data1 = array('upload_data' => $this->upload->data());
            }
}

else
{
//The browse filed is empty..So hidden input is taken 
     $data1['upload_data']['file_name'] = $post['vLogo_old'];
} 
```

# vb.net - 在 Visual Studio 2010 中使用 NCalc - VB.Net

> ID：12718881
> 
> 赞同：-1
> 
> 时间：2012-10-04T00:40:18.537
> 
> 标签：vb.net, ncalc

正如标题所述，我需要在 Visual Studio 2010 中使用 NCalc。我正在编写一个程序来计算 VB 中的多步数学问题，但我不太确定如何使用 NCalc。用户在文本框中输入一个数学问题，然后单击一个按钮，该按钮将告诉程序计算答案。我已经添加了 NCalc 作为参考，并将其导入到项目中，我只是不确定下一步该做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:43:24.270

您需要在文件顶部添加：

```
using NCalc.Domain; 
```

然后，您可以在按钮按下时写一些东西，例如：

```
Expression exp = new Expression(textBox1.Text); // Get the text box text
try
{
    object result = exp.Evaluate();
    textBox2.Text = result.ToString(); // Place the "answer"
}
catch(EvaluationException e)
{
    // This happens if the user enters a "bad" expression
    textBox2.Text = "Unable to compute: " + e.Message;
} 
```

有关详细信息，请参阅[NCalc 主页上的示例](http://ncalc.codeplex.com/wikipage?title=description&referringTitle=Home)。

# sql-server - 在 sp_procs 中从 dbo.sysobjects 移动到 sys.tables

> ID：12718882
> 
> 赞同：0
> 
> 时间：2012-10-04T00:40:22.903
> 
> 标签：sql-server, stored-procedures, sysobjects

我曾经通过在 master 中使用前缀创建它们并引用 dbo.sysobjects 来编写与数据库无关的存储过程`sp_`，它在运行时将绑定到我碰巧所在的任何数据库。

最终我尝试迁移我的代码以使用更新、更友好的 sys.tables，但是，它绑定到编译存储过程的数据库，因此返回错误的数据。

例子：

```
use master
go
create proc sp_test
as
   select name
   from   sys.tables
go
use MyOtherDb
go
exec sp_test
go 
```

`master`将在NOT in 中生成一个表列表`MyOtherDb`- 因此，现在在编写这些内容时，我有义务将我的代码包装在一个字符串中并动态执行它，一旦我已经深入一两层代码，这尤其困难写代码。

有人有解决这个问题的方法吗？我敢肯定，我不是唯一一个对此大发雷霆的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T00:51:16.287

啊！我需要标记为系统对象：

`exec sp_MS_marksystemobject 'sp_test'`

# c - 两个同时发送锁定两个程序

> ID：12718890
> 
> 赞同：0
> 
> 时间：2012-10-04T00:41:47.173
> 
> 标签：c, sockets, select, send, strace

[我正在调试我的应用程序（有点像之前的问题](https://stackoverflow.com/questions/12658096/unusual-select-sock-stream-behavior-behavior)的后续），它本质上是一个玩具点对点客户端。它的工作原理如下：

*   对等点 1 从对等点 2 请求一个块（或多个块）
*   对等点 2 收到请求，并将块发回

并且循环或多或少地重复。这对于较小的文件非常有用，但是对于任何必须分成大量块（比如 250 个 512 字节的块）的文件，它都会死掉。

在 Peer 2（接收请求的那个）上运行 strace 如下所示：

```
....    
[pid 11731] mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f03d0ac9000
[pid 11731] lseek(400, 200704, SEEK_SET) = 200704
[pid 11731] read(400, "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"..., 1024) = 1024
[pid 11731] read(400, "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"..., 4096) = 4096
[pid 11731] sendto(5, "SF\0\0\1\212\0\0\2\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"..., 522, 0, NULL, 0) = 522
[pid 11731] select(6, [4 5], NULL, NULL, NULL) = 1 (in [5])
[pid 11731] recvfrom(5, "BB\0\0\0\t\0\0\1\213\0\0\2\0test.dat\0\0\0\0\0\0\0\0\0\0"..., 300, 0, NULL, NULL) = 300
[pid 11731] open("test.dat", O_RDONLY)  = 401
[pid 11731] fstat(401, {st_dev=makedev(8, 4), st_ino=9187328, st_mode=S_IFREG|0644, st_nlink=1, st_uid=1000, st_gid=1000, st_blksize=4096, st_blocks=20480, st_size=10485760, st_atime=2012/10/03-10:25:29, st_mtime=2012/10/03-10:25:34, st_ctime=2012/10/03-10:25:34}) = 0
[pid 11731] mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f03d0ac8000
[pid 11731] lseek(401, 200704, SEEK_SET) = 200704
[pid 11731] read(401, "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"..., 1536) = 1536
[pid 11731] read(401, "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"..., 4096) = 4096
[pid 11731] sendto(5, "SF\0\0\1\213\0\0\2\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"..., 522, 0, NULL, 
```

Peer 1（发送请求的那个）上的 strace 结果如下所示：

```
....
[pid 11741] sendto(5, "BB\0\0\0\t\0\0\5\213\0\0\2\0test.dat\0\0\0\0\0\0\0\0\0\0"..., 300, 0, NULL, 0) = 300
[pid 11741] sendto(5, "BB\0\0\0\t\0\0\5\214\0\0\2\0test.dat\0\0\0\0\0\0\0\0\0\0"..., 300, 0, NULL, 0) = 300
[pid 11741] sendto(5, "BB\0\0\0\t\0\0\5\215\0\0\2\0test.dat\0\0\0\0\0\0\0\0\0\0"..., 300, 0, NULL, 0) = 300
[pid 11741] sendto(5, "BB\0\0\0\t\0\0\5\216\0\0\2\0test.dat\0\0\0\0\0\0\0\0\0\0"..., 300, 0, NULL, 0) = 300
[pid 11741] sendto(5, "BB\0\0\0\t\0\0\5\217\0\0\2\0test.dat\0\0\0\0\0\0\0\0\0\0"..., 300, 0, NULL, 0) = 300
[pid 11741] sendto(5, "BB\0\0\0\t\0\0\5\220\0\0\2\0test.dat\0\0\0\0\0\0\0\0\0\0"..., 300, 0, NULL, 0) = 300
[pid 11741] sendto(5, "BB\0\0\0\t\0\0\5\221\0\0\2\0test.dat\0\0\0\0\0\0\0\0\0\0"..., 300, 0, NULL, 0 
```

发送时都死了。我不完全确定为什么。如果有人能对此有所了解，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T00:51:41.060

您的发送被阻塞，因为对等方没有读取它们。这会导致对等方的接收缓冲区被填满，从而导致发送者的发送缓冲区被填满，从而导致 send() 阻塞。

# r - R删除条目不是日期的行

> ID：12718892
> 
> 赞同：2
> 
> 时间：2012-10-04T00:42:05.227
> 
> 标签：r, date

我有一个数据框，其中一列是（意味着）表单中的日期`00:00:00.0 yyyy-mm-dd`。大多数条目是，但有些不是。有没有办法删除包含非日期的行？类似的东西（如果列是“日期”）

```
data <- data[is.Date(DATE)==TRUE,] 
```

例如。

```
Fruit  Date
apple  00:00:00.0 2005-02-01
pear   00:00:00.0 2006-02-01
orange 00:00:00.0 -8-2-402145
rhino  00:00:00.0 2003-04-21 
```

我想

```
Fruit  Date
apple  00:00:00.0 2005-02-01
pear   00:00:00.0 2006-02-01
rhino  00:00:00.0 2003-04-21 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T01:30:06.477

按照joran的推理：

```
# get the test data
test <- data.frame(
    Fruit=c("apple","pear","orange","rhino"),
    Date=c("00:00:00.0 2005-02-01",
           "00:00:00.0 2006-02-01",
           "00:00:00.0 -8-2-402145",
           "00:00:00.0 2003-04-21")
)

# remove the rows by checking if not (!) an NA due to not meeting the date format
test[!is.na(strptime(test$Date,format="00:00:00.0 %Y-%m-%d")),] 
```

结果：

```
 Fruit                  Date
1 apple 00:00:00.0 2005-02-01
2  pear 00:00:00.0 2006-02-01
4 rhino 00:00:00.0 2003-04-21 
```

# sql - SQL Server CHECK 约束 - 确保文本上没有重复项

> ID：12718897
> 
> 赞同：1
> 
> 时间：2012-10-04T00:43:03.043
> 
> 标签：sql, sql-server, tsql

需要在我的表列上添加某种约束。我需要确保用户不会在表格的多行中手动或以其他方式输入相同的文本。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T00:47:24.073

您将希望使用某种类型的[唯一约束](http://msdn.microsoft.com/en-us/library/ms191166.aspx)，或者，当然，主键也可以工作。例如：

```
ALTER TABLE MyTable ADD CONSTRAINT UK_MyUniqueConstraint UNIQUE (MyColumn) 
```

[在 SE 上也讨论了](https://stackoverflow.com/questions/64981/sql-server-2005-how-create-a-unique-constraint)其他创建此方法的方法。

# java - 遵循 JAVA 谓词的语法

> ID：12718899
> 
> 赞同：3
> 
> 时间：2012-10-04T00:43:07.713
> 
> 标签：java, antlr

我正在尝试为以下代码编写产品（ LL ）

```
a[i].b[a[p]].id.xyz.a[c].o = i; 
```

在 Eclipse 中使用 ASTView，制作就像

```
FieldAccess -> Exp NAME
Exp -> FieldAccess
FieldAccess -> ArrayAccess NAME
ArrayAccess -> ArrayAccess Exp
ArrayAccess -> FieldAccess 
Exp -> FieldAccess
..... 
```

如何在 Antlr 中定义上述内容？它们是递归的，据我所知，JAVA 是 LL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T07:12:41.710

无法为规则创建 ANTLR v3 语法：

```
FieldAccess -> Exp NAME
Exp         -> FieldAccess 
```

ANTLR v4*可以*处理左递归，但只能处理左*递归规则*：

```
Exp -> Exp '*' Exp
     | Exp '/' Exp
     | Exp '+' Exp
     ...
     | Name
     ... 
```

*（伪语法语法！）*

但是 v4 也*无法*处理您***的**直接左递归规则*：

```
FieldAccess -> Exp NAME
Exp         -> FieldAccess 
```

我很确定您可以让 ANTLR 创建一个 AST，就像 Eclipse 使用一些花哨的 AST 重写规则一样，但是您将编辑您的问题并为输入“绘制”（或发布图片）所需的 AST `a[i].b[a[p].x].id.xyz.a[c].o = i;`，我可能会尝试一下。

## 编辑

这是一个关于如何在您发布的类似 AST 中解析示例输入的小演示：

```
grammar T;

options {
  output=AST;
}

tokens {
  ASSIGN;
  IND;
  FA;
}

parse
 : assign EOF -> assign
 ;

assign
 : lookup '=' expr ';' -> ^(ASSIGN lookup expr)
 ;

expr
 : lookup
 ;

lookup
 : (NAME -> NAME) ( array_index  -> ^(IND $lookup array_index)
                  | field_access -> ^(FA $lookup field_access)
                  )*
 ;

array_index
 : '[' expr ']' -> expr
 ;

field_access
 : '.' NAME -> NAME
 ;

NAME  : 'a'..'z'+;
SPACE : ' ' {skip();}; 
```

当我使用输入调试 ANTLRWorks 中的解析器时`a[i].b[a[p].x].id.xyz.a[c].o = i;`，正在生成以下 AST：

![在此处输入图像描述](../Images/7b529272a1893550849bc9209ef33d37.png)

## 编辑

规则：

```
lookup
 : (NAME -> NAME) ( array_index  -> ^(IND $lookup array_index)
                  | field_access -> ^(FA $lookup field_access)
                  )*
 ; 
```

无非就是这样：

```
lookup
 : NAME ( array_index^
        | field_access^
        )*
 ; 
```

除了第一个将为 input`"a[i].b"`创建一个这样的 AST：

```
 FA
       /  \
     IND   B
     / \
    A   I 
```

后者将创建一个“反向”AST：

```
 FA
       /  \
      B   IND
          / \
         I   A 
```

（当然，`FA`and`IND`不会在最后一个 AST 中，因为它们不在`array_index`and`field_access`规则中，但如果你把它们放在那里，它就会有那个结构）。

# ruby-on-rails - Zurb Foundation Nav 在 Rails 项目中的风格有限

> ID：12718903
> 
> 赞同：2
> 
> 时间：2012-10-04T00:43:26.403
> 
> 标签：ruby-on-rails, ruby-on-rails-3, zurb-foundation

我正在通过 rails 项目上的 zurb-foundation gem 使用 Zurb Foundation 3。一切都很顺利，直到我尝试添加导航栏：

```
<body>
  <div id="container" class="twelve columns">
      <div class="fixed contain-to-grid">
        <nav class="top-bar">
          <ul>
            <li class="name"><h1><%= link_to "Home", root_path %></h1></li>
          </ul>
          <section>
            <ul class="left">
              <li><a href="#">Left</a></li>
            </ul>

            <ul class="right">
              <li><a href="#">Right</a></li>
            </ul>
          </section>
        </nav>
      </div> 
```

看起来像：

![Zurb Nav 外观](../Images/614341251e7d8db1fb4eff4cb322bc5b.png)

除了颜色，我没有覆盖任何 zurb 样式，我的假设是它看起来与文档[http://foundation.zurb.com/docs/navigation.php](http://foundation.zurb.com/docs/navigation.php)中的第一个示例非常相似，但这似乎并不是这样的。该文档还提到了 javascript 依赖项，但这些都包括在内。

有人对如何开始让这个开始看起来漂亮有任何想法吗？

编辑：

将行添加到第一个列表中，如下所示：

```
<ul>
            <li class="name"><h1><%= link_to "Home", root_path %></h1></li>
            <li class="toggle-topbar"><a href="#"></a></li>
          </ul> 
```

呈现：

![在第一次建议之后](../Images/1444a5bef93f1afc87f273c9a1d429f5.png)

检查元素以查看是否显示内容，导航 JS 在那里：

```
(function ($){

  $.fn.foundationNavigation = function (options) {

    var lockNavBar = false;
    // Windows Phone, sadly, does not register touch events :(
    if (Modernizr.touch || navigator.userAgent.match(/Windows Phone/i)) {
      $(document).on('click.fndtn touchstart.fndtn', '.nav-bar a.flyout-toggle', function (e) {
        e.preventDefault();
        var flyout = $(this).siblings('.flyout').first();
        if (lockNavBar === false) {
          $('.nav-bar .flyout').not(flyout).slideUp(500);
          flyout.slideToggle(500, function () {
            lockNavBar = false;
          });
        }
        lockNavBar = true;
      });
      $('.nav-bar>li.has-flyout', this).addClass('is-touch');
    } else {
      $('.nav-bar>li.has-flyout', this).hover(function () {
        $(this).children('.flyout').show();
      }, function () {
        $(this).children('.flyout').hide();
      });
    }

  };

})( jQuery ); 
```

从 Foundation 中寻找 css，它适用于按钮和所有内容，并且导航栏样式似乎也在那里，例如：

```
.nav-bar {
  height: 40px;
  background: #4d4d4d;
  margin-top: 20px;
  padding: 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T10:54:49.247

对于 zurb-foundation 3.0.9，我遇到了与您完全相同的问题。尝试升级到 3.1.1

在您的 Gemfile 中，使用：

```
gem 'zurb-foundation', '~> 3.1.1' 
```

在 application.scss 中：

```
@import 'foundation'; 
```

确保你在文件中准备好这个

```
$(document).foundationTopBar(); 
```

更新宝石

```
bundle update 
```

确保已删除缓存：

```
bundle exec rake tmp:cache:clear 
```

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:00:31.457

您应该在下面的所有`<div>`标签上方和标签下方放置类似此示例的内容`<body>`。它存在于网格系统之外，因此它应该高于一切。注意没有`<div>`标签。

```
<nav class="top-bar">
    <ul>
      <li class="name"><h1><a href="#">James Stone</a></h1></li>
      <li class="toggle-topbar"><a href="#"></a></li>
    </ul>
    <section>
      <ul class="right">
        <li class="has-dropdown"><a href="#">I</a>
          <ul class="dropdown">
            <li><a href="#">Bio</a></li>
            <li><a href="#">Resume</a></li>
          </ul>
        </li>
    </section>
  </nav> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T02:26:17.583

您在第一个列表项之后缺少此行

`<li class="toggle-topbar"><a href="#"></a></li>`

这可能是正在发生的事情，但不是 100% 积极的。

# android - 在 Eclipse 上模拟 android 时从 android.jar 覆盖 DatagramSocket 文件

> ID：12718908
> 
> 赞同：1
> 
> 时间：2012-10-04T00:44:12.903
> 
> 标签：android, android-emulator, overriding

我正在尝试从 android.jar 库中对我的 DatagramSocket.java 文件注入网络故障。但是，自上周日（4 天）以来，我一直试图在带有 ubuntu 的 Vbox 上构建它，但没有成功。我想知道是否有任何方法可以注入 MINE DatagramSocket.java 而无需构建 android.jar，例如配置构建路径（Eclipse）并添加一个覆盖另一个现有文件的文件？

有人知道这是否可能吗？在此先感谢，对我的英语感到抱歉。这不是我的母语

迭戈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T00:53:54.310

假设您想这样做以进行测试，您可能希望查看 Robolectric 来替代 Android 类的替代实现，或者使用像 EasyMock 或 jMock 这样的模拟框架。

# android - Android 应用程序无法在不同的 Android 版本上运行

> ID：12718909
> 
> 赞同：-1
> 
> 时间：2012-10-04T00:44:39.080
> 
> 标签：android, android-version

我已经开发了一个 Android 应用程序`targetSdkVersion="15"`。当我在 Android 4.0.3 上运行此应用程序时，它运行良好。但是当我在 Android 2.3.3 上尝试这个时，它会显示错误。所以，现在我想知道，我们怎样才能自动找到版本控制问题，以及我们如何在开发时忽略版本控制问题。请有人指导我。提前致谢。

这是我的 logcat 中的堆栈跟踪。

```
10-04 08:36:00.731: W/dalvikvm(413): threadid=1: thread exiting with uncaught exception    (group=0x40015560)
10-04 08:36:00.742: E/AndroidRuntime(413): FATAL EXCEPTION: main
10-04 08:36:00.742: E/AndroidRuntime(413): java.lang.NoClassDefFoundError:     com.net.elderlyhealth.MainActivityMainpage$PagerAdapter
10-04 08:36:00.742: E/AndroidRuntime(413):  at  com.net.elderlyhealth.MainActivityMainpage.onCreate(MainActivityMainpage.java:62)
10-04 08:36:00.742: E/AndroidRuntime(413):  at  android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-04 08:36:00.742: E/AndroidRuntime(413):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
10-04 08:36:00.742: E/AndroidRuntime(413):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-04 08:36:00.742: E/AndroidRuntime(413):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-04 08:36:00.742: E/AndroidRuntime(413):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-04 08:36:00.742: E/AndroidRuntime(413):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-04 08:36:00.742: E/AndroidRuntime(413):  at android.os.Looper.loop(Looper.java:123)
10-04 08:36:00.742: E/AndroidRuntime(413):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-04 08:36:00.742: E/AndroidRuntime(413):  at java.lang.reflect.Method.invokeNative(Native Method)
10-04 08:36:00.742: E/AndroidRuntime(413):  at java.lang.reflect.Method.invoke(Method.java:507)
10-04 08:36:00.742: E/AndroidRuntime(413):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-04 08:36:00.742: E/AndroidRuntime(413):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-04 08:36:00.742: E/AndroidRuntime(413):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T01:09:17.273

你能提供错误的堆栈跟踪吗？这样至少我们可以对如何帮助您有所了解？

关于省略版本问题，不妨试试加行

```
android:minSdkVersion="8" 
```

在你的清单文件之前

```
targetSdkVersion="15" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T04:37:54.383

嗯，答案很简单。

android SDK 使目标 API 可用于您的项目。如果您使用的 API 在较低版本中不可用，那么您将收到错误消息。

解决方法

1.  在使用之前检查文档上 API 的可用性

2.  使用反射并满足 API 不可用的情况。您的应用程序的行为不会在所有设备上保持一致。

3.  您实际上应该将您的项目定位到最低限度的 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T00:50:20.803

android LINT 检查在某种程度上实现了这一点，但老实说，除此之外，最好的方法是定期在具有最低 SDK 版本的设备上运行应用程序。

# php - 将链接放入 PHP 生成的电子邮件时出错

> ID：12718910
> 
> 赞同：0
> 
> 时间：2012-10-04T00:44:54.410
> 
> 标签：php, html, email

我正在尝试使用 php 将 html 文本发送到电子邮件我只为下面的消息部分编写代码

```
$message="<html><body> 
<div><b>Title</b>:$app $vesion </div>
<div><a href="http://localhost/download/row[3]">Install Team Provisioning File</a>
</div> <br/>
<div><a href="http://localhost/download/row[5]">install binary</a>
</div>
 <div><b>Released</b>:$date</div> 
<body>
<html>"; 
```

但它显示错误语法错误，href 部分出现意外 T_STRING 请建议我如何在 $message 中附加一个 herf

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T00:46:18.817

您需要使用 \" 转义双引号

```
$message="<html><body> 
<div><b>Title</b>:$app $vesion </div>
<div><a href=\"http://localhost/download/row[3]\">Install Team Provisioning File</a>
</div> <br/>
<div><a href=\"http://localhost/download/row[5]\">install binary</a>
</div>
 <div><b>Released</b>:$date</div> 
<body>
<html>"; 
```

另外，row[3] 和 row[5] 是 PHP 变量吗？如果是这样，它需要一个`$`在前面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T00:46:36.983

href=... 部分中的内部引号正在关闭包装引号。尝试这个：

```
$message="<html><body> 
<div><b>Title</b>:$app $vesion </div>
<div><a href='http://localhost/download/" . $row[3] . "'>Install Team Provisioning File</a>
</div> <br/>
<div><a href='http://localhost/download/" . $row[5] . "'>install binary</a>
</div>
 <div><b>Released</b>:$date</div> 
<body>
<html>"; 
```

# python - 是否可以直接访问索引？

> ID：12718912
> 
> 赞同：1
> 
> 时间：2012-10-04T00:44:55.307
> 
> 标签：python, google-cloud-datastore

假设我有这样的模型：

```
User(db.Model):
  name = db.StringProperty()
  interests = db.StringListProperty() 
```

文档[“如何存储实体和索引 - Google App Engine - Google Developers”](https://developers.google.com/appengine/articles/storage_breakdown#anc-indextables)描述了他们如何存储索引。

而且我想`interests`在不获取所有用户的情况下在用户中获得所有唯一性。

编辑：我的意思是获得独特的`interests`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:57:58.480

Gql 查询允许您添加[属性列表](https://developers.google.com/appengine/docs/python/datastore/gqlreference)，因此您可以使用：

```
"SELECT interest FROM User" 
```

# search - SEO rel="nofollow" 有助于避免重复内容？

> ID：12718915
> 
> 赞同：0
> 
> 时间：2012-10-04T00:45:03.793
> 
> 标签：search, seo, search-engine

我正在从另一个网站导入一系列 XML 提要以进行内容混搭。内容包括文章的标题和前几段以及返回原始网站的链接。我担心谷歌可能会将其视为重复内容并影响我的页面排名？有人告诉我在返回原始文章的链接中插入 rel="nofollow" 会有所帮助吗？任何人都可以提供更详细的解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T02:55:31.717

是的，rel="nofollow" 是告诉谷歌您不希望谷歌通过该特定链接或页面将链接汁传递到另一个站点的好方法。有关详细说明，我建议您遵循此..

[谷歌nofollow指南](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=96569)

对于您的重复内容问题，您不必担心太多。只要您不只是在页面中复制和粘贴整篇文章，它就不会被视为重复内容。只需让它们保持标题和一点摘录和原始链接即可。

# rest - httpunit PutMethodWebRequest 抛出 IOException；错误的文件描述符

> ID：12718917
> 
> 赞同：1
> 
> 时间：2012-10-04T00:45:05.697
> 
> 标签：rest, put, http-unit, dropwizard

有人可以解释为什么这个 httpunit 测试用例在 wc.getResponse 中一直以“错误的文件描述符”失败。我添加了 is.close() 作为猜测，并在失败前后移动了它，但这没有任何效果。此测试将请求发送到 Dropwizard 应用程序。

```
 public class TestCircuitRequests
{
    static WebConversation wc = new WebConversation();
    static String url = "http://localhost:8888/funl/circuit/test.circuit1";

@Test
public void testPut() throws Exception
{
    InputStream is = new FileInputStream("src/test/resources/TestCircuit.json");
    WebRequest rq = new PutMethodWebRequest(url, is, "application/json");

    wc.setAuthentication("FUNL", "foo", "bar");
    WebResponse response = wc.getResponse(rq);
    is.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T23:40:32.140

没有回应？所以我会根据我学到的东西来尝试自己。

Httpunit 是一个老熟悉的工具，如果可以的话，我会使用它。但是它已经两年多没有更新了，所以我认为它对@PUT 请求的支持是不对的。

所以我改为转换为 Jersey-client。经过一番挣扎后，我最终得到了这个似乎确实有效的代码：

```
 @Test
public void testPut() throws Exception
{
    InputStream is = new FileInputStream("src/test/resources/TestCircuit.json");
    String circuit = StreamUtil.readFully(is);
    is.close();

    Authenticator.setDefault(new MyAuthenticator());
    ClientConfig config = new DefaultClientConfig();
    Client client = Client.create(config);
    com.sun.jersey.api.client.WebResource service = client.resource(url);

    Builder builder = service.accept(MediaType.APPLICATION_JSON);
    builder.entity(circuit, MediaType.APPLICATION_JSON);
    builder.put(String.class, circuit);
    return;
} 
```

这有意避免 JAX-RS 从 JSON 字符串自动构造 bean。

# javascript - 将 Javascript 命名空间设置为 Window：坏主意？还是辉煌？

> ID：12718922
> 
> 赞同：5
> 
> 时间：2012-10-04T00:46:09.120
> 
> 标签：javascript, createjs

我在 EaselJS 库的示例中看到了这段代码 - 它的作用是将整个 createjs 库的命名空间分配给“窗口”。

```
<script>
var createjs = window;
</script> 
```

我的问题是：将库的名称空间设置为窗口是一个非常愚蠢的想法吗？通过使所有命名空间变量突然全局作用域，它不是摆脱了使用命名空间的全部意义吗？

我能看到的唯一优势是让您为您的对象编写更短的构造函数。例如键入：

```
 stage = new Stage(canvas); 
```

代替：

```
 stage = new  createjs.Stage(canvas); 
```

这是一个坏主意，还是有点聪明，或者只是无害的古怪？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T19:45:05.700

以这种方式设置的原因是为了保持与未命名空间的先前版本的向后兼容性。这允许开发人员在添加时升级到最新版本，而无需重构所有代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T00:55:30.830

对我来说，一个好主意应该被很多人积极使用。这正是我认为这个技巧是个坏主意的原因：简而言之，它实际上违背了命名空间的想法：如果很多人（= 其他流行 JS 库的作者）开始使用`window`命名空间作为他们的命名空间根，方法覆盖的危害方法覆盖另一种方法将否定这种方法的任何可能的优点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T14:51:54.180

其实这取决于。如果您使用多个 JS 库，您可能会避免使用 Namespace to Window 来娱乐所有库。

但是，如果您为您的游戏/应用程序使用单个库 (CreateJS)，您可能会考虑使用 Namespace to Window 来节省大量用于反复编写自定义命名空间名称的时间。在使用 CreateJS 构建游戏时，我发现它是一种方便的方法。

# c - 字符串和字符数组如何在 C 中工作？

> ID：12718929
> 
> 赞同：8
> 
> 时间：2012-10-04T00:48:04.557
> 
> 标签：c, arrays, string, c-strings

我见过的任何指南似乎都没有很好地解释这一点。

我的意思是，您可以为 a 分配内存`char*`，或者`char[25]`改为写入？有什么不同？然后是文字，不能被操纵？如果要将固定字符串分配给变量怎么办？就像，`stringVariable = "thisIsALiteral"`那么你之后如何操纵它？

有人可以在这里直接记录吗？在最后一种情况下，对于文字，你如何处理空终止？我觉得这很令人困惑。

* * *

编辑：真正的问题似乎是，据我了解，您必须兼顾这些不同的结构才能完成甚至简单的事情。例如，only`char *`可以作为参数或返回值传递，但只能`char[]`分配文字和修改。我觉得很明显，我们经常/总是需要能够同时做到这两点，这就是我的陷阱所在。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-04T00:54:42.977

> `char*`分配的和有什么区别`char[25]`？

-ed 字符串的生命周期`malloc`不受其声明范围的限制。用简单的语言，您可以`malloc`从函数中返回 -ed 字符串；你不能对*自动存储*`char[25]`中的分配做同样的事情，因为它的内存将在从函数返回时被回收。

 *> 文字可以被操纵吗？

字符串文字不能就地操作，因为它们是在只读存储中分配的。您需要将它们复制到可修改的空间中，例如静态、自动或动态空间，以便对其进行操作。这是无法做到的：

```
char *str = "hello";
str[0] = 'H'; // <<== WRONG! This is undefined behavior. 
```

这将起作用：

```
char str[] = "hello";
str[0] = 'H'; // <<=== This is OK 
```

这也有效：

```
char *str = malloc(6);
strcpy(str, "hello");
str[0] = 'H'; // <<=== This is OK too 
```

> 你如何处理字符串文字的空终止？

C 编译器会为您处理空终止：所有字符串文字的末尾都有一个额外的字符，用`\0`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-04T01:00:59.580

您的问题涉及 C 中的三种不同构造：char 数组、在堆上分配的 char 指针和字符串文字。这些都是不同的，是微妙的方式。

*   Char 数组，您通过`char foo[25]`在函数内部声明获得的内存是在堆栈上分配的，它只存在于您声明它的范围内，但正好为您分配了 25 个字节。您可以在这些字节中存储您想要的任何内容，但如果您想要一个字符串，请不要忘记使用最后一个字节来终止它。

*   用 定义的字符指针`char *bar`仅保存指向某些未分配内存的指针。要使用它们，您需要将它们指向某个东西，或者像以前一样的数组 ( `bar = foo`) 或分配空间`bar = malloc(sizeof(char) * 25);`。如果你做后者，你最终应该释放空间。

*   字符串文字的行为取决于您如何使用它们。如果您使用它们来初始化 char 数组`char s[] = "String";`，那么您只需声明一个足够大的数组以准确保存该字符串（和空终止符）并将该字符串放在那里。这与声明一个 char 数组然后填充它是一样的。

    另一方面，如果您将字符串文字分配给 a`char *`那么指针指向您不应该修改的内存。尝试修改它可能会或可能不会崩溃，并导致未定义的行为，这意味着您不应该这样做。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-04T05:18:11.657

由于已经回答了其他方面，我只会添加问题“**如果您想要使用 char * 传递函数的灵活性但 char [] 的可修改性怎么办**”

您可以分配一个数组并将相同的数组传递给一个函数作为 char *。这称为*按引用传递*，内部仅传递实际数组的*地址*（准确地说是第一个元素的地址），而不是复制整个。另一个影响是函数内部所做的任何更改都会*修改原始数组。*

```
void fun(char *a) {
   a[0] = 'y'; // changes hello to yello
}

main() {
   char arr[6] = "hello"; // Note that its not char * arr
   fun(arr); // arr now contains yello
} 
```

对于使用 malloc 分配的数组也可以这样做

```
char * arr = malloc(6);
strcpy(arr, "hello");

fun(arr); // note that fun remains same. 
```

稍后您可以释放 malloc 内存

```
free(arr); 
```

char * a, 只是一个可以存储地址的指针，它可能是单个变量，也可能是数组的第一个元素。请注意，我们必须在实际使用它之前*分配*给这个指针。

与 char arr[SIZE] 相反，它在堆栈上创建一个数组，即它还分配 SIZE 个字节。因此，您可以直接访问 arr[3]（假设 3 小于 SIZE）而不会出现任何问题。

现在允许将任何地址分配给 a*是有意义**的，但不允许将其分配给 arr**，因为除了使用 arr 访问其内存之外别无他法。**

# ruby-on-rails - 为引擎生成模型和迁移

> ID：12718934
> 
> 赞同：7
> 
> 时间：2012-10-04T00:48:41.200
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, ruby-on-rails-plugins

因此，我正在开发一个新项目，这似乎是使用新引擎功能的绝佳选择。正如引擎所说，它有自己的小应用程序，有自己的视图、控制器和模型。这就是我的不足之处。

我创建了我将在其中安装新引擎的测试应用程序。

```
rails new engine_app && cd engine_app 
```

然后我创建新引擎

```
rails plugin new my_engine --mountable 
```

然后我将“gem”添加到 engine_app 的 gemfile

```
gem 'my_engine', :path => './my_engine' 
```

然后我将引擎安装在engine_app的路线中

```
mount MyEngine::Engine, :at => '/my_engine' 
```

然后我 cd 进入 my_engine 的虚拟应用程序并运行

```
rails generate model MyModel title:string body:text 
```

这就是我遇到困惑的地方。据我了解，这应该生成一个命名空间表（我认为它是 my_engine_my_model）。迁移文件中的表就是 my_model。

其次，我如何运行此迁移，迁移文件是否仅在调用表时正确：my_model？我尝试运行以下命令，但似乎没有任何反应，并且我检查了数据库并且表不存在。

回顾一下，我需要知道如何在引擎中创建迁移，并能够在父应用程序数据库上正确运行它们。

感谢您的任何帮助和指导。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T01:25:56.503

因此，我阅读的所有教程都没有指定您需要从引擎的根级别运行 script/rails generate。我一直看到参考告诉我转到测试/虚拟应用程序。从我的引擎的根目录运行 script/rails generate model [fields] 后，它创建了适当的模型、迁移 rake 任务，我能够运行

```
rake my_engine:install:migrations; rake db:migrate 
```

运行迁移

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-12T12:59:29.487

您可以将生成器与引擎目标一起使用：

```
bin/engem ENGINE_NAME rails g GENERATOR 
```

# java - box2d 不同步

> ID：12718936
> 
> 赞同：3
> 
> 时间：2012-10-04T00:48:50.220
> 
> 标签：java, concurrency, libgdx, box2d

我`world.step(timeStep, iterations, iterations)`在一个线程中调用，`Screen.render()`其中是另一个线程，这是：

```
MyBox2DDebugRenderer.render(world, cam.combined); 
```

一段时间后，我会得到

```
FATAL EXCEPTION: GLThread 2328
java.lang.IndexOutOfBoundsException: Invalid index 7, size is 7
    at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
    at java.util.ArrayList.get(ArrayList.java:304)
    at com.kingx.spacejourney.MyBox2DDebugRenderer.renderBodies(MyBox2DDebugRenderer.java:132)
    at com.kingx.spacejourney.MyBox2DDebugRenderer.render(MyBox2DDebugRenderer.java:74)
    at com.kingx.spacejourney.Universe.render(Universe.java:85)
    at com.badlogic.gdx.Game.render(Game.java:46)
    at com.badlogic.gdx.backends.android.AndroidGraphics.onDrawFrame(AndroidGraphics.java:449)
    at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1516)
    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1240) 
```

**MyBox2DDebugRenderer.java**

```
130    int len = world.getContactList().size();
131    for (int i = 0; i < len; i++)
132        drawContact(world.getContactList().get(i)); 
```

因此，在渲染时，box2d 世界正在发生变化。你有一些想法如何同步这个吗？我应该把它放在一个线程中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T10:55:12.980

正如您所说，box2d 世界在渲染时正在发生变化，这会产生这个线程问题。

您可以做的是使用 Java`synchronized`原语来确保一次只有一个线程能够访问 box2d 资源，即：

第一个线程（游戏更新）：

```
synchronized(world){
   ...
   // Make the physics work by stepping into time
   world.step(1 / 50.0f, BOX_VELOCITY_ITERATIONS, BOX_POSITION_ITERATIONS);
   ...
} 
```

第二个线程（渲染）：

```
synchronized(world){
   ...
   // Your rendering
   MyBox2DDebugRenderer.render(world, cam.combined);
   ...
} 
```

这里 using`world`不是唯一的选择，`this`如果两个线程共存于同一个类中，您还可以使用引用。

关于将所有内容放在一个线程中的选项，它肯定会解决您的问题。但是，在我看来，在两个线程中分离渲染和更新是一个好主意。首先，您将更好地使用您的 CPU 资源（这可能能够并行运行多个线程，也可以在移动平台中）。其次，如果游戏更新速度和渲染速度分开，你的游戏会更容易扩展。

问候，

# c# - 取决于处理器速度和 RAM 的理论 Mpx/s 值

> ID：12718942
> 
> 赞同：0
> 
> 时间：2012-10-04T00:49:46.833
> 
> 标签：c#, c++, performance, math

我的老师要我评估特定 CPU 和 RAM 可以处理的 Mpixel/second 的理论值。在显示任何加载的视频时，我们必须将该理论值与我们通过两个不同的 C# 和 C++ 项目获得的实际值进行比较。

我实际上不知道如何计算这个，我被困在那里。任何一个想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T01:13:49.623

首先，我绝不是这方面的专家。我相信你的老师说的是你应该对 CPU 的速度（100mhz）有某种认识？您应该对 RAM 的速度有所了解。如果您的教学仅将这两件事列为限定符来确定 Mpixel/second 的速度，那么您应该能够计算 CPU 从 ram 读取数据并将该数据发送到任何存在的视频设备的最大吞吐量（这似乎不相关）。

我故意省略了任何实际的方程式，以便您解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:56:25.470

这是我最终得到的：

```
[DllImport("KERNEL32")]
public static extern bool QueryPerformanceCounter(out long lpPerformanceCount);

[DllImport("Kernel32.dll")]
public static extern bool QueryPerformanceFrequency(out long lpFrequency);

private long frequency;
Window1.QueryPerformanceFrequency(out frequency); 
```

稍后在代码中：

```
Window1.QueryPerformanceCounter(out stop); // 64bit
double tFrame = (double) (stop - start) / frequency; 
```

这里是为了实用价值。仍在寻找可比较的理论值。

# java - 菜单项始终为空

> ID：12718944
> 
> 赞同：0
> 
> 时间：2012-10-04T00:49:59.087
> 
> 标签：java, android, menu, menuitem

```
MenuItem refresh = menu.findItem(R.id.refreshservice);
if (refresh.getActionView()!=null)
{
    refresh.setActionView(null);
}
else
{
    refresh.setActionView(R.layout.refreshicon_nonstatic);
} 
```

问题是，无论我尝试什么，MenuItem 始终为空。身份证是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T01:10:58.250

你可能想在你的活动中做这样的事情：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId()) {
        case R.id.refreshservice: 
```

# javascript - textContent 工作，但 nodeValue 没有

> ID：12718945
> 
> 赞同：3
> 
> 时间：2012-10-04T00:50:07.567
> 
> 标签：javascript, xml, dom, xml-parsing

为了更好地理解**textConent**和**nodeValue**之间的区别，我想了解为什么在我的代码中使用 nodeValue 不起作用。我有以下通过 jQuery 回调通过 AJAX 加载的 XML 字符串。如果您查看循环的中心，如果我使用 nodeValue 代替 textContent，该部分将产生一个空值。

**XML**

```
<?xml version="1.0" encoding="UTF-8"?>
    <Sensors>
        <Sensor>
            <id>56</id>
            <state>false</state>
        </Sensor>
    </Sensors> 
```

我在下面使用这个函数来解析 XML。

**JavaScript**

```
 function parseSensors(data,status,xhr) {
         var xml = xhr.responseXML;
         var sensors = xml.documentElement.childNodes;

         var list="<ul>";             
         for(var i=0; i < sensors.length; i++) {
             list= list +"<li>"+sensors[i].childNodes[0].textContent+"</li>";                 
         }
         list=list+"</u>";
         document.getElementById("real-time_active_sensors").innerHTML=list;            
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:34:51.973

节点的文本部分实际上是节点本身的子节点。如果节点中没有数据，例如调用 childNodes[0].nodeValue 将失败。在尝试访问它们之前，您需要检查实际存在多少子节点。否则，您将需要强制执行一个协议，该协议要求在创建 XML 数据时它不能包含空标记。

# c - 在 C 中的三重指针上使用 fread

> ID：12718952
> 
> 赞同：0
> 
> 时间：2012-10-04T00:50:23.530
> 
> 标签：c, multidimensional-array, fread

我知道如何使用 for 循环将文件读入 2d 数组以指示您在 C 中存储数据的位置，但我感兴趣的是您是否可以使用一个 fread() 调用来执行此操作。也就是说，我可以做这样的事情：

```
int A[5][5];
fread(&A, sizeof(int), 25, filePtr); 
```

我现在尝试这个时遇到了段错误，所以我想知道这是否可以完成。

编辑：好吧，我想以这种方式使用 fread 并不是我的问题。我的问题是我必须从函数内部调用 fread 并且 A 是在该函数之外定义的。

```
func(int size, int ***A)
{
  fread(*A, sizeof(int), size*size, filePtr);
}

main
{
  int A[n][n];
  func(n, &A);
} 
```

所以我的问题是我对 fread 的调用仍然存在段错误，我必须为我的函数原型使用三重指针。我只是为了好玩而尝试了 A（而不是 *A），但仍然遇到相同的段错误。看起来我只是用指针忽略了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T00:52:20.030

`A`已经是指向数组的指针。`&A`是指向这个指针的指针，这不是你想要的。您需要做的就是替换`&A`为`A`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T04:13:06.920

在 C 中考虑数组的最佳方式是指针的同义词，除了一方面：您不能像普通指针那样更改它们引用的地址。例如：

```
int A[5][5];
int *aptr = A;  // notice no &

aptr += 2; // works fine.
A += 2;    // does NOT compile. 
```

同样这个...

```
int A[5][5];
fread(A, sizeof(int), 25, filePtr); // again, note no & 
```

还有这个...

```
int A[5][5];
int *aptr = A;
fread(aptr, sizeof(int), 25, filePtr); // no & here either. 
```

两者最终都将相同的地址发送到`fread()`.

同样，在 C 中，将数组视为指针，您无法更改其“值”（内存地址）。它们的所有其他方面几乎相同。它会在以后为您省去很多麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T19:53:05.563

我的问题是连续记忆。当您意识到 fread 仅设置为采用单指针时，这实际上非常简单。因此它只能采用一维数组。但是，如果您的二维数组在内存中连续表示，则它类似于一维数组。因此，只需将 fread 指针传递给二维数组中的第一个元素，它将开始循环遍历它，就好像它是一维数组一样，一切都会好起来的。

所以只要确保你的二维数组是连续分配的，你应该没问题。

```
malloc(n*n *sizeof(int)) 
```

而不是在 for 循环中为每一行分配。

# javascript - 在一页上放置两个单独的 javascript 幻灯片

> ID：12718955
> 
> 赞同：1
> 
> 时间：2012-10-04T00:51:07.860
> 
> 标签：javascript, slideshow

我正在学习 javascript，我的一项家庭工作是在一页上有两个单独的 javascript 幻灯片。我已经能够成功创建第一个幻灯片。但是，当我尝试复制代码并简单地换出图像时，一张幻灯片会停止。这是第一个幻灯片的代码。谢谢你的帮助。

```
<script type="text/javascript">
<!--
var image1=new Image()
image1.src="../skin/frontend/default/pique/images/plans/deluxe/deluxe1.png"
var image2=new Image()
image2.src="../skin/frontend/default/pique/images/plans/deluxe/deluxe2.png"
var image3=new Image()
image3.src="../skin/frontend/default/pique/images/plans/deluxe/deluxe3.png"
//-->
</script>
<img src="../skin/frontend/default/pique/images/plans/deluxe/deluxe1.png" name="deluxe"
width="168" height="207" />
<script>
<!--
//variable that will increment through the images
var step=1
function slideit(){
//if browser does not support the image object, exit.
if (!document.images)
return
document.images.deluxe.src=eval("image"+step+".src")
if (step<3)
step++
else
step=1
//call function "slideit()" every 2.5 seconds
setTimeout("slideit()",2500)
}
slideit()
//-->
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T01:05:59.720

对于第二张幻灯片，请为图像使用单独的名称，例如“deluxe_second”或任何其他名称，并且还定义另一个相同的 slideit() 函数，除了：

```
document.images.deluxe_second.src=eval("image"+step+".src") 
```

希望它能解决你的问题:)

# ruby - 小马失败时会发送响应吗？

> ID：12718957
> 
> 赞同：0
> 
> 时间：2012-10-04T00:51:16.393
> 
> 标签：ruby, pony

我一直在使用 ruby​​ pony gem 发送电子邮件 [https://github.com/benprew/pony#readme](https://github.com/benprew/pony#readme)

不幸的是，文档没有我希望的那么大，只显示了一些发送电子邮件的方法，但似乎在无法发送邮件时没有返回任何消息。

有人有这个麻烦吗？所以我想知道小马是否无法发送电子邮件告诉用户这不可能发生。

我应该尝试例外吗？我是红宝石新手，所以我对做出决定的知识很少。

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:56:02.690

Pony 可以在失败时从 Net::SMTP 或 Mail gem 中抛出异常，因此您可以捕获该异常并向用户显示错误消息。[在 Google Group 上看到这样](https://groups.google.com/forum/?fromgroups=#!topic/ponyrb/I_b9t__Fs8w)的帖子，虽然细节有点稀缺。

# node.js - Express app.get 文档

> ID：12718962
> 
> 赞同：20
> 
> 时间：2012-10-04T00:51:42.853
> 
> 标签：node.js, express, middleware

我正在寻找有关`app.get`express.js 功能的一些文档。

```
app.get(
    '/path', 
    middleware(),
    function(req, res) {
        res.redirect('/');
    }
); 
```

上面的示例采用三个参数。普通文档只显示两个。我对这个中间参数的作用以及如何使用它感兴趣。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-04T01:37:10.397

该文档是文档的一部分`app.METHOD` [，](http://expressjs.com/api.html#app.METHOD)其中`get`是受支持的 HTTP 方法之一。

第二个可选参数称为中间件（您可以传递一个中间件函数数组）。这是一个在第三个参数回调（实际的路由处理程序）之前调用的函数，中间件函数的职责是让您的代码遵循 DRY（不要重复自己）原则。

中间件功能的示例是权限检查、访问验证、会话验证（如果用户未登录，则将他带到登录页面）等等。

由于多个路由可能需要相同的行为，因此您使用中间件，这样您就不必多次编写相同的代码。

# java - java ClassNotFoundException 在运行时加载类

> ID：12718965
> 
> 赞同：0
> 
> 时间：2012-10-04T00:51:54.073
> 
> 标签：java, plugins, classloader, runtime-error, classnotfoundexception

我在运行时在java中调用类时遇到问题我基本上是在制作一个插件框架

它首先打开 plugin/Plugins.cfg 并将测试解析为地图.. cfg 文件中的 EX 文本 1 = myplugin 2 = plugin2

（每个插件的主类是：plugin.(plugin name).main.class）

如您所见，它从地图中加载每个值并尝试运行其主类

```
public static void loadPlugins()
{
    int x = hackers.core.startup.InitializeGame.map.size();
    for (int i = 1; i<=x;i++)
    {
        String className = hackers.core.startup.InitializeGame.map.get(i + "");

        File file  = new File(System.getProperty("user.dir") + File.separator + "plugins" + File.separator + className);
        URL url = null;
        try {
            url = file.toURI().toURL();
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }  
        URL[] urls = new URL[]{url};
        ClassLoader cl = new URLClassLoader(urls);

        try {
            Class cls = cl.loadClass("plugin." + className + ".main");
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        System.out.println(className);
    }
}

Class cls = cl.loadClass("plugin." + className + ".main"); 
```

^line 给了我错误：java.lang.ClassNotFoundException: plugin.myplugin.main

有人知道这里有什么问题吗？或任何建议，我已经查看了它的 API，但它让我感到困惑并且缺乏文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T01:05:25.350

您`file`没有指向有效的类或 jar 文件。

调试以下行；您会注意到它的路径不是文件系统中的现有路径。

```
File file  = new File(System.getProperty("user.dir") + File.separator + "plugins" + File.separator + className); 
```

我会假设您忘记包含`.class`在`className`.

# javascript - Javascript 类型化数组“通过网络”

> ID：12718970
> 
> 赞同：5
> 
> 时间：2012-10-04T00:52:29.617
> 
> 标签：javascript, html, node.js, socket.io

我创建了一个 8 位无符号 javascript 数组：

```
 var myArray = Uint8Array(64); 
```

在客户端和服务器上操作这个数组，然后通过 socket.io 连接发送它。我们正在编写一个游戏，因此通过网络发送的数据尽可能小。由于 socket.io 不支持发送二进制数据，是否值得为 javascript 类型的数组烦恼，还是我们应该只使用普通的 javascript 数组？它们还会比原生 js 数组小吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T01:06:40.623

注意：我假设客户端是指浏览器。否则，请澄清更多细节。

Socket.io 不支持二进制数据，主要是因为它提供了不同的传输方式，而且很多都不支持。

但是，本机 websocket 确实支持 Blob 和 ArrayBuffer。

如果你真的想使用二进制数据来提高效率（我同意，这是你的情况），我认为你应该考虑使用 websockets 而不是 socket.io。

坏处：

*   只有约 55% 的用户使用支持 websocket 的浏览器浏览网页。
*   您不会拥有 socket.io 提供的商品，例如通道、发射和 on 方法。

好的：

*   Web 套接字 API 非常简单。

*   它的内存效率会更高。通常，您的普通数组是通过首先将它们制作为 JSON 字符串然后将它们发送回来来传输的。这意味着您实际上是在发送数组的字符串表示形式！相反，在这里您将发送您期望的字节数（以一种更可预测的方式，在发送之前不检查字符串长度，但如果需要，以一种更“协议”的方式）。

如果您决定使用 WS，您可以查看： http: [//www.adobe.com/devnet/html5/articles/real-time-data-exchange-in-html5-with-websockets.html](http://www.adobe.com/devnet/html5/articles/real-time-data-exchange-in-html5-with-websockets.html)

否则，您可以使用 JSON。

说实话，如果您仍然使用 JSON 来支持 socket.io 和“通用”支持，那么也启用 flash 传输，如果游戏需要低延迟，则禁用较慢的传输。

# macos - 0 Mac OS X 包中的方法返回值

> ID：12718971
> 
> 赞同：1
> 
> 时间：2012-10-04T00:52:43.497
> 
> 标签：macos, package, swt

我在玩——我的第一个 SWT 应用程序。当我打包我的eclipse SWT Table java应用程序Mac OS X 10.6.8时，方法返回值为0。如果我删除.app并执行应用程序可执行文件，它可以正常工作。它在日食中工作正常。它在 Windows 7 中运行良好。我的“调试”消息框总是包含正确的值。如果我对 Table clientHeight、headerHeight 和 itemHeight 进行硬编码，则返回值是正确的。

```
private int adjustItemsNEEDED(Table tTable) {
    int itemsNeeded = 0;
    int clientHeight = tTable.getClientArea().height;
    int headerHeight = tTable.getHeaderHeight();
    int itemHeight = tTable.getItemHeight();

    if (itemHeight != 0) {
        itemsNeeded = (clientHeight - headerHeight) / itemHeight;
    } else {
        itemsNeeded = 0;
    }
    messageTextBoxTop.setText("height=" + clientHeight + " header=" + headerHeight + "                item=" + itemHeight + " needed=" + itemsNeeded);
    return itemsNeeded;
} 
```

我的可执行文件：

```
#!/bin/sh
BASEDIR=`dirname $0`
exec java \
-d64 \
-XstartOnFirstThread \
-classpath $BASEDIR/org.eclipse.SWT.cocoa.macosx.x64/swt.jar:$BASEDIR \
-Djava.library.path=$BASEDIR/org.eclipse.SWT.cocoa.macosx.x64 \
MyApp 
```

我的 info.plist：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN"   "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>CFBundleExecutable</key>
<string>CheckBook</string>
<key>CFBundleGetInfoString</key>
<string>SWTHello 1.0 for Mac OS X</string>
<key>CFBundleIconFile</key>
<string>CheckBook.icns</string>
<key>CFBundleIdentifier</key>
<string>org.eclipse.swt.HelloWorldSWTApplication</string>
<key>CFBundleInfoDictionaryVersion</key>
<string>6.0</string>
<key>CFBundleName</key>
<string>CheckBook</string>
<key>CFBundlePackageType</key>
<string>APPL</string>
<key>CFBundleShortVersionString</key>
<string>1.0</string>
<key>CFBundleSignature</key>
<string>?????</string>
<key>CFBundleVersion</key>
<string>1.0</string>
<key>NSPrincipalClass</key>
<string>NSApplication</string>
</dict>
</plist> 
```

# php - PHPUnit 3.4.15、PHP 5.2.6 和 WordPress 核心测试——这还能工作吗？

> ID：12718974
> 
> 赞同：1
> 
> 时间：2012-10-04T00:53:14.867
> 
> 标签：php, wordpress, unit-testing, phpunit

*   PHP: 5.2.6
*   PHPUnit：3.4.15
*   XAMPP 堆栈
*   Windows 7的
*   用户体验：几乎没有
*   挫折程度：严重

让我切入正题。我正在尝试运行 WordPress 核心测试，但它们不会。我不确定我的版本是否可能......

这是我到目前为止所做的：我在 test_unit.php 中创建了一个非常简单的测试：

```
require_once ('PHPUnit\Framework.php');
class SimpleTest extends PHPUnit_Framework_TestCase
{
    public function testSomething()
    {
        $this->assertEquals(true, false);
    }
} 
```

我运行`phpunit test_unit.php`并且它有效（1 次测试，1 次断言，1 次失败）。

我仍然对如何包含 PHPUnit 感到困惑，我想有人说它在新版本中更改为某种自动加载器。

当我转到 wordpress 测试文件夹时，说明只是`phpunit`在该目录中运行。这不起作用。我尝试过针对特定文件，使用 --configuration 和 --bootstrap 标志来专门针对这些文件，所有发生的事情都是一样的：它给了我 1 个空白行，然后返回到命令提示符。

我是否需要在某处包含特定文件才能运行 WP 测试？一个更重要的问题：WP 测试是否会使用我过时的 PHPUnit 版本运行？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T01:08:39.040

尝试`phpunit`从tests/的*父目录运行。*[文档](http://codex.wordpress.org/Automated_Testing)中有一条线索说您可以运行特定测试：

```
phpunit tests/actions.php 
```

即它期望测试是一个子目录。

（文档说“*在与测试/目录相同的目录中运行 phpunit* ”，这有点令人困惑，不是，但与“*在测试/目录中运行 phpunit* ”明显不同。单元测试的[自述](http://unit-tests.svn.wordpress.org/trunk/README.txt)文件是清楚一点。）

# php - 如何解析标点符号并用PHP中的html标签替换

> ID：12718975
> 
> 赞同：0
> 
> 时间：2012-10-04T00:53:16.930
> 
> 标签：php, parsing, string-parsing

我想知道是否有一种方法可以像

```
$string = "Look at *me* because I am bold"; 
```

并用标签替换星号，以便字符串为

```
echo $string; //"Look at <bold>me</bold> because I am bold" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T00:55:24.783

尝试`$string = preg_replace('~\*(.*?)\*~','<bold>$1</bold>',$string);`

**编辑：**附加我忘记的分号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T01:01:56.180

不要自己动手，你很快就会遇到一堆特殊情况和很多麻烦。给自己找一个合适的 Markdown 库，然后做一些更重要的事情。

# ruby - 使用 RVM 1.16.8 和 Ruby 1.9.3p194 运行 Gem 命令时的问题 - `load_api_keys'：未定义的方法 `key?'

> ID：12718978
> 
> 赞同：2
> 
> 时间：2012-10-04T00:53:30.400
> 
> 标签：ruby, rubygems, rvm

我最近将我的 Mac Mini 更新到 OS 10.8 Mountain Lion，并且在 RVM 1.16.8 中使用 Ruby gems，Ruby 1.9.3p194 不再有效。

这是错误的简明版本：

```
`load_api_keys': undefined method `key?' for #<String:0x007f865a928a28> (NoMethodError) 
```

当我运行任何类似的命令`gem install bundler`或`gem -v`出现以下错误时：

```
➜  ~ gem
/Users/brettchalupa/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/config_file.rb:227:in `load_api_keys': undefined method `key?' for #<String:0x007f865a928a28> (NoMethodError)
from /Users/brettchalupa/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/config_file.rb:208:in `initialize'
from /Users/brettchalupa/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/gem_runner.rb:78:in `new'
from /Users/brettchalupa/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/gem_runner.rb:78:in `do_configuration'
from /Users/brettchalupa/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/gem_runner.rb:51:in `run'
from /Users/brettchalupa/.rvm/rubies/ruby-1.9.3-p194/bin/gem:25:in `<main>'

➜  ~ ruby -v
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin12.2.0]

➜  ~ rvm -v

rvm 1.16.8 (master) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/] 
```

我已经进入并注释掉了`load_api_keys`使事情正常运行的冲突方法调用，但它随后破坏了与 ruby​​gems.org 的任何交互。

问题是第 227 行，`if @api_keys.key? :rubygems_api_key then`

```
def load_api_keys
  @api_keys = if File.exist? credentials_path then
                load_file(credentials_path)
              else
                @hash
              end
  if @api_keys.key? :rubygems_api_key then
    @rubygems_api_key = @api_keys[:rubygems_api_key]
    @api_keys[:rubygems] = @api_keys.delete :rubygems_api_key unless @api_keys.key? :rubygems
  end
end 
```

删除 RVM 并尝试安装不同的 Ruby 后，我还没有找到解决此问题的方法。我不想简单地注释掉删除我使用的功能的东西。

如果有人可以就导致此问题的原因以及如何解决此问题提供任何见解，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T01:22:28.703

删除（或移动）/Users/brettchalupa/.gem/credentials 并让它使用默认凭据。

# ruby - 使用 ruby 获取目录中的所有文件名

> ID：12718982
> 
> 赞同：7
> 
> 时间：2012-10-04T00:54:08.197
> 
> 标签：ruby

> **可能重复：**
> [使用 Ruby 从文件夹中获取所有文件的名称](https://stackoverflow.com/questions/1755665/get-names-of-all-files-from-a-folder-with-ruby)

我是新手`Ruby`，我正在尝试从特定目录中获取所有文件名。只有一个级别，只需要获取整个名称列表。我怎么做？我查看了有关该主题的其他一些帖子，但没有任何帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-04T00:56:12.817

列出当前目录中的所有条目：

```
Dir.entries('.') 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-04T00:57:45.497

```
Dir.new('.').each {|file| puts file } 
```

请注意，这将包括 . 和 ..

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-04T04:21:17.817

似乎 OP 要求仅列出文件，而不是目录。

```
Dir['path/to/dir/*'].select { |e| File.file?(e) } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-04T01:00:27.010

您可以使用 Dir#glob 返回特定目录的特定文件名

```
Dir.glob("*") #Get all filenames on current directory
Dir.glob("somedirectory/*") #Get all filenames on some directory
Dir.glob("somedirectory/*.php") #Get specific files with specific extension on some directory 
```

# wordpress - WordPress 中的 Malihu 滚动条

> ID：12718990
> 
> 赞同：0
> 
> 时间：2012-10-04T00:55:49.853
> 
> 标签：wordpress

```
<?php wp_enqueue_script('jquery');?>
<?php wp_head(); ?>
<link href="<?php bloginfo('template_directory')?>/cusscroll/jquery.mCustomScrollbar.css" rel="stylesheet" type="text/css" />

<script type="text/javascript" src="<?php bloginfo('template_url');?>/cusscroll/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="<?php bloginfo('template_url');?>/cusscroll/jquery-ui-1.8.21.custom.min.js"></script>
<script type="text/javascript" src="<?php bloginfo('template_url');?>/cusscroll/jquery.mousewheel.min.js"></script>
<script type="text/javascript" src="<?php bloginfo('template_url');?>/cusscroll/jquery.mCustomScrollbar.js"></script>

<script type = "text/javascript">
(function($){
    $(window).load(function() {
        $("#primary").mCustomScrollbar({
            scrollInertia:900,
           scrollEasing:"easeOutQuint",
            mouseWheel:true
        });
    });
});
</script>
</head> 
```

这只是我的标题的一部分。我正在尝试为#Primary 内容框安装 Malihu 滚动条。无论我如何尝试，它仍然无法正常工作，我看到的只是常规滚动条。

这是我的#primary 内容框的CSS，以防万一：

```
#primary
{
    float:left;
    border: solid 1px #000;
    border-radius:5px;
    background: none;
    overflow:auto;
    padding:7px;
    margin-left:15px;
    width:650px;
    height:800px;
    margin-bottom:15px;
    color: #666;
    font-size: 12px;
    line-height:18px;
    font-family:verdana;
    color:#fff;
} 
```

请帮忙！我需要快点完成这件事。我在这里做错了什么？我必须添加任何其他代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:29:19.857

在您的自定义 javascript 中，尝试使用`jQuery(document).ready(function($)`作为您的第一行，而不仅仅是`(function($)`

所以...

```
<script type = "text/javascript">
jQuery(document).ready(function($){
    $(window).load(function() {
        $("#primary").mCustomScrollbar({
            scrollInertia:900,
            scrollEasing:"easeOutQuint",
            mouseWheel:true
        });
    });
});
</script> 
```

# api - PayPal Express Checkout API 回调

> ID：12718991
> 
> 赞同：0
> 
> 时间：2012-10-04T00:56:00.487
> 
> 标签：api, paypal, ios6, express-checkout

我正在为一个简单的购物车使用快速结帐 API。我使用回调参数来提供一个安全的 URL，PayPal 应该点击该 URL 并期望同时获得运输选项和税率作为回报。在桌面浏览器上，此过程按预期工作，但是在移动浏览器（尤其是 iOS 6）上测试时，它没有命中回调 URL。有什么想法吗？贝宝技术支持没有任何。

谢谢，豪伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:00:41.180

据我所知，移动快速结账和支付标准流程目前不支持即时更新回调 API。
至少对于 PayPal 支付标准来说是肯定的；[https://www.x.com/developers/paypal/products/mobile-paypal-payments-standard](https://www.x.com/developers/paypal/products/mobile-paypal-payments-standard)

> 不支持的用例 Mobile PayPal Payments Standard 正在扩展对下列商家自定义的支持。在此之前，您的客户仍然可以通过移动设备进行支付，但不会获得移动优化的结账体验。目前，只有集成了“立即购买”按钮或第三方购物车（使用“购物车上传”）的商家才能受益于移动 PayPal 支付标准，除非他们使用下面列出的自定义设置。
> 
> 目前不支持的商家自定义：
> 
> **即时更新 API**

# javascript - Jquery每个内部函数失败

> ID：12718993
> 
> 赞同：0
> 
> 时间：2012-10-04T00:56:17.233
> 
> 标签：javascript, jquery

我正在尝试编写一个函数，它将遍历一系列 div，挑出包含`small`元素的 div，克隆元素的内容，`small`在页面上的另一个块中搜索以找到`li`其索引与索引匹配的元素循环中的当前 div，然后将从 small 克隆的内容插入到该 div 内`element`的`span`元素中。

我已经让它工作起来，直到它应该将克隆的内容插入到`li`. 什么都没发生。此外，当我尝试将其放入我已注释掉的代码中所示的函数时，整个事情都失败了。任何帮助，将不胜感激。

```
//function NewPosts(){
    jQuery('div.tracked_tags > div').each(function (i) {
        var thisIndex = jQuery(this).index();
        if (jQuery(this).find('small').length){

            var postCount = jQuery(this).find('small').contents().clone();
            //alert('Hey'+postCount.html()+''+thisIndex+'');

            jQuery('div#right_column ul#tracked_tags li:eq('+thisIndex+')').find('.count').contents(postCount).alert(postCount);
            //setTimeout(arguments.callee, 30000);
        }
    });
//}; 
```

[这是小提琴。](http://jsfiddle.net/HNGJX/1/)警报并不重要，我只是将它们插入以进行故障排除。

根据建议，这基本上是我开始的代码：

```
<div class="tracked_tags">
        <div>
                <small id="blah" class="count">10 new posts</small>
                                                    </a>
        </div>
        <div>
                <small id="blah2" class="count">5 new posts</small>
                                                    </a>
        </div>                      
</div>

<ul id="tracked_tags">
<li><a href=""><span class="count"></span></a></li>
<li><a href=""><span class="count"></span></a></li>
</ul> 
```

这就是我想要的结果：

```
<ul id="tracked_tags">
<li><a href=""><span class="count">10 new posts</span></a></li>
<li><a href=""><span class="count">5 new posts</span></a></li>
</ul> 
```

**编辑**：我不知道为什么，但是将内容从一个元素复制/粘贴到另一个元素的代码部分突然开始工作。我已经调整了一些东西，所以我不确定最终做了什么，但是huzzah！

但是，整件事仍然失败，因为我取消了包装它的函数的注释。我需要它在一个函数中，以便它可以每 30 秒重新运行一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T01:10:35.537

使用[.html](http://api.jquery.com/html/)而不是[.contents](http://api.jquery.com/contents/)来注入数据。

改变

```
find('.count').contents(postCount); 
```

至

```
find('.count').html(postCount) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T03:53:32.213

关键问题：

1.  `.alert()`不是属性，不能像那样被链接。
2.  在小提琴中；那个用户脚本 jQuery 代码不好（它在 Firefox 中中断，以及其他几个罪过）。省略 Fiddle 中的此类代码，因为它与所提出的问题无关，并且对大多数（可能是所有）用户来说都无法解决问题。
3.  一旦包裹在函数 ( ) 中，除非从内部（或稍后注入的节点）`NewPosts`调用，否则代码不会触发。`myFunction()``<script>`

小问题：

1.  如果帖子计数只是文本（从示例 HTML 中看起来很可能，请不要使用`.contents()`或`.html()`。只需使用`.text()`
2.  同样，除非内容包含 HTML 节点，尤其是事件侦听器，否则不需要/指向`.clone()`.

无论如何，修复问题 1、2 和 3 会使代码看起来有效。看到[这个小提琴](http://jsfiddle.net/HNGJX/2/)。

```
function NewPosts () {
    jQuery('div.tracked_tags > div').each(function (i) {
        var thisIndex = jQuery(this).index();
        if (jQuery(this).find('small').length){

            var postCount = jQuery(this).find('small').contents().clone();
            //alert('Hey'+postCount.html()+''+thisIndex+'');

            jQuery('div#right_column ul#tracked_tags li:eq('+thisIndex+')').find('.count').contents(postCount);
            //setTimeout(arguments.callee, 30000);
        }
    });
};

NewPosts (); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T01:00:20.080

至于注释代码：

```
//function NewPosts(){
//};
   ^---REMOVE THIS 
```

更多内容：
似乎 .contents() 仅用作 getter，而不是您所暗示的 setter，`.contents(postCount)`请参阅[api 参考](http://api.jquery.com/contents/)。

# r - R遍历重复并选择

> ID：12718994
> 
> 赞同：0
> 
> 时间：2012-10-04T00:56:19.980
> 
> 标签：r, dataframe

我有一个这样的数据框：

```
id date               amt
1  2012-05-03 10:33   32
2  2012-06-01 12:49   242
2  2012-06-05 00:09   43
3  2012-06-03 05:19   323
3  2012-06-08 08:45   12
4  2012-06-09 12:38   32
5  2012-06-09 10:31   53 
```

现在我想删除重复`id`的，以便选择日期最早的那个。重复条目的数量各不相同。我只关心每个特定`id`和相应的第一次出现`amt`，所有其他条目都应该被删除。

我了解如何使用循环来做到这一点，但我觉得 R 中可以有一个简短而优雅的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T01:12:11.330

尝试类似的东西`newdata <- data[!duplicated(data$id), ]`。

编辑：正如@Aaron 和其他人在下面指出的那样，这假设您的数据已排序：

```
testdata <- data[with(data, order(id, date)), ]

newdata <- testdata[!duplicated(testdata$id), ] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T01:27:25.347

使用`data.table`优雅的语法

```
library(data.table)

 datetime <- seq(as.POSIXct("2001-01-01"), as.POSIXct("2001-01-30"), l=7)    

DT <- data.table(id = c(1,2,2,3,3,4,5),x = datetime, amnt = sample(7))
DT
##    id                   x amnt
## 1:  1 2001-01-01 00:00:00    3
## 2:  2 2001-01-05 20:00:00    4
## 3:  2 2001-01-10 16:00:00    1
## 4:  3 2001-01-15 12:00:00    5
## 5:  3 2001-01-20 08:00:00    7
## 6:  4 2001-01-25 04:00:00    6
## 7:  5 2001-01-30 00:00:00    2

DT[, .SD[which.min(x)],by=id]
##    id                   x amnt
## 1:  1 2001-01-01 00:00:00    3
## 2:  2 2001-01-05 20:00:00    4
## 3:  3 2001-01-15 12:00:00    5
## 4:  4 2001-01-25 04:00:00    6
## 5:  5 2001-01-30 00:00:00    2 
```

请注意，`data.table`将首选键作为`IDate.time`class not `POSIXct`，但由于此解决方案是为了编码优雅，它应该就足够了。

# c++ - 更改列表c ++中元素的值

> ID：12718996
> 
> 赞同：0
> 
> 时间：2012-10-04T00:56:53.047
> 
> 标签：c++, list, atoi, c-str

这就是我正在做的事情，我从 .txt 文件中获取了一些信息，这些信息当然是数字，当我获取它们时，我将它们作为字符串列表中的字符串......（我知道它可能是字符，但在这个例子中是字符串) 所以当我将它们插入另一个列表时，它应该是这样的

```
list<int> l;

//i is the iterator for the 1st list that already has all the strings
l.push_back(atoi(*i.c_str())); 
```

我不能使用 c_str() 因为我试图访问列表的元素无论如何我可以做到这一点吗？

**基本上我想做的只是从一个列表中获取我的字符串并将它们更改为整数，同时保持列表格式**

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T01:04:13.913

你需要`(*i).c_str()`或`i->c_str()`。

您可能希望以一种完全不同的方式来完成这项工作，特别是完全不需要您直接处理迭代器的方式。例如，假设您拥有的是：

```
list<string> strings;
list<int> ints; 
```

然后我几乎肯定会用 来完成这项工作`std::transform`，可能是这样的：

```
std::transform(strings.begin(), strings.end(), std::back_inserter(ints),
    [](std::string const &in) { return atoi(in.c_str()); }); 
```

或者：

```
transform(begin(strings), end(strings), std::back_inserter(ints),
          [](string const &in) { return stoi(in); }); 
```

如果您不熟悉它，最后一行是一个 lambda（C++11 的新功能）。假设您使用的是相当新的编译器（例如，gcc 4.7.x 或更新版本，VC++ 2010 或更新版本），这应该不是问题。

我也会认真考虑使用`std::vector`而不是`std::list`. 我几乎从未发现`std::list`这是一个特别好的选择。至少在我的经验中，即使理论上应该支持链表的情况通常也不会。