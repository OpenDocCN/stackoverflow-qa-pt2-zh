# StackOverflow 问答 13060000-13060999

# r - 如何在 R 中将矩阵分成较小的矩阵？

> ID：13060000
> 
> 赞同：5
> 
> 时间：2012-10-25T00:41:38.720
> 
> 标签：r, matrix

我有以下矩阵

```
2    4    1
6    32   1
4    2    1
5    3    2
4    2    2 
```

我想根据第三列制作以下两个矩阵

第一的

```
2    4
6    32
4    2 
```

第二

```
5    3
4    2 
```

我能想到的最好的，但我得到一个错误

> x <- cbind(mat[,1], mat[,2]) 如果 mat[,3]=1
> 
> y <- cbind(mat[,1], mat[,2]) 如果 mat[,3]=2

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T00:45:43.813

如果`mat`是你的矩阵：

```
mat <- matrix(1:15,ncol=3)
mat[,3] <- c(1,1,1,2,2)
> mat
     [,1] [,2] [,3]
[1,]    1    6    1
[2,]    2    7    1
[3,]    3    8    1
[4,]    4    9    2
[5,]    5   10    2 
```

然后你可以使用`split`：

```
> lapply( split( mat[,1:2], mat[,3] ), matrix, ncol=2)
$`1`
     [,1] [,2]
[1,]    1    6
[2,]    2    7
[3,]    3    8

$`2`
     [,1] [,2]
[1,]    4    9
[2,]    5   10 
```

`lapply`of是必要的`matrix`，因为 split 删除了使向量成为矩阵的属性，因此您需要将它们重新添加进去。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T02:14:32.750

还有一个例子：

```
#test data
mat <- matrix(1:15,ncol=3)
mat[,3] <- c(1,1,1,2,2)

#make a list storing a matrix for each id as components
result <- lapply(by(mat,mat[,3],identity),as.matrix) 
```

完成品：

```
> result
$`1`
  V1 V2 V3
1  1  6  1
2  2  7  1
3  3  8  1

$`2`
  V1 V2 V3
4  4  9  2
5  5 10  2 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-25T00:48:15.383

如果你有一个矩阵 A，当第三列为 1 时，这将得到前两列：

```
A[A[,3] == 1,c(1,2)] 
```

您可以使用它来获取第三列中任何值的矩阵。

说明： A[,3] == 1 返回一个布尔向量，如果 A[i,3] 为 1，则第 i 个位置为 TRUE。此布尔向量可用于索引矩阵以提取行我们想要。

免责声明：我对 R 的经验很少，这是 MATLAB 式的做法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T01:03:53.400

这是 pedrosorio 想法的功能版本：

```
 getthird <- function(mat, idx) mat[mat[,3]==idx, 1:2]
 sapply(unique(mat[,3]), getthird, mat=mat)  #idx gets sent the unique values
#-----------
[[1]]
     [,1] [,2]
[1,]    1    6
[2,]    2    7
[3,]    3    8

[[2]]
     [,1] [,2]
[1,]    4    9
[2,]    5   10 
```

# mysql - 选择不同的索引名称

> ID：13060002
> 
> 赞同：2
> 
> 时间：2012-10-25T00:41:54.120
> 
> 标签：mysql, sql

我需要从给定表中选择所有索引。

但是，当索引中有多个列时，MySQL 会使用所有可能的列组合创建多个具有相同名称的索引。

所以 SHOW INDEXES 多次返回相同的值。

有没有办法进行选择不同以从给定表中获取索引名称？

如果可能的话，这不是 MySQL 特定的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T00:57:49.033

请尝试以下查询：

```
SELECT DISTINCT INDEX_NAME FROM information_schema.statistics
  WHERE table_schema = 'your_schema'
    AND table_name = 'your_table' 
```

# php - $_FILES 未定义的 PHP 上传表单。想不通

> ID：13060006
> 
> 赞同：0
> 
> 时间：2012-10-25T00:42:19.610
> 
> 标签：php, html, file-upload

> **可能重复：**
> [尝试在 PHP 中使用 $_FILE 时出现“未定义索引”错误](https://stackoverflow.com/questions/8727947/getting-undefined-index-error-while-trying-to-use-file-in-php)

我已经为图像制作了一个 php 上传表单。它使用会话变量来确定上传目录。上传有两个选项，滑块目录或侧面目录，所以我有一个确定目录的 if 语句。如果我从表单中删除它，那么整个事情都可以正常工作，但是使用它，$_FILES 似乎没有被声明并作为未定义的索引错误返回。

可以找到代码如下：

上传.php

```
<?php
include("resize-class.php");
$allowedExt = array('jpg', 'jpeg', 'JPG', 'JPEG');
$tmps = explode(".", $_FILES['file']['name']);
$extension = end($tmps);
session_start();
if ($_POST['dir'] == 'side'){
    $dirent = $_SESSION['sideDir'];
}
else if($_POST['dir'] == 'slider'){
    $dirent = $_SESSION['sliderDIR'];
}
else{
    die();
}
echo $_POST['dir'];
print_r($_FILES);

if (($_FILES["file"]["type"] == "image/jpeg")&& ($_FILES["file"]["size"] < 4000000000)&& in_array($extension, $allowedExt)) {
    if ($_FILES["file"]["error"] > 0) {
        echo "Error: " . $_FILES["file"]["error"] . "<br />";
        echo 'here';
    } else {
        echo "Upload: " . $_FILES["file"]["name"] . "<br />";
        echo "Type: " . $_FILES["file"]["type"] . " <br />\n";
        echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br /> \n";
        echo "Stored in: " . $_FILES["file"]["tmp_name"]. "<br />\n";

    }
    if (file_exists($dirent. $_FILES["file"]["name"])) {
        echo $_FILES["file"]["name"] . "already exists";
    } else {
        $fName = $_FILES["file"]["name"];
        $tmpname = $_FILES["file"]["tmp_name"];
        move_uploaded_file($_FILES["file"]["tmp_name"], $dirent . $_FILES["file"]["name"]);
        $number = FileCounter($dirent);
        echo "Number of images in DIR: " . $number. "   <br />\n  ";
        $number +1;
        $resizeObj = new resize($dirent.$fName);
        $resizeObj -> resizeImage(250, 150, 'crop');  
        $resizeObj -> saveImage($dirent.$number.".jpg", 100); 
        unlink ($dirent.$_FILES["file"]["name"]);
    }
} else {
    echo "Error: " . $_FILES["file"]["error"] . "<br />";
}
function FileCounter($dir) {
            $counter = 0;
            $iterator = new DirectoryIterator(dirname($dir));
            foreach ($iterator as $fileinfo) {
                if ($fileinfo->isFile()) {
                    if ($fileinfo->getExtension() == "jpg") {
                        $counter++;
                        echo $counter . "\n";
                    }
                }
            }
            return $counter;
        }
?> 
```

HTML表格：

```
<form action="includes/upload.php" method="post">
  <label for="file">Filename:</label>
  <input type="file" name="file" id="file" />
  <div class="styled-select">
    <label for="dir"> Upload to:</label>
    <select size="2" name="dir" multiple="yes" id="dir">
      <option value="side" >Side Images</option>
      <option value="slider" >Slider Images</option>
    </select>
  </div>
  <br />
  <input type="submit" name="submit" value="Submit" />
</form> 
```

我猜我的代码中有一个非常愚蠢的错误，我已经盯着它看了一个小时，或者我不知道关于 $_FILES 和 $_POST 的一些东西。（或者我可能像白痴一样对表格进行了编码！）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T01:01:28.633

你的表格不见了

```
enctype="multipart/form-data" 
```

# objective-c - 代码签名错误：身份“iPhone 分发：”与任何有效、未过期的证书/私钥对不匹配。有什么解决方案吗？

> ID：13060012
> 
> 赞同：2
> 
> 时间：2012-10-25T00:42:52.667
> 
> 标签：objective-c, ios, xcode, ios6, code-signing

我正在编写和部署我的第一个 iOS 应用程序。当我尝试为真正的 iOS 设备构建我的项目的发布版本（风味）时（我`Release`在项目架构中选择并选择`Products->Archive`）。我在问题标题中遇到错误。尝试谷歌搜索我发现这是一个非常流行的错误，只有在 stackoverflow 上才有近四个线程。但是尝试遵循那里列出的建议并没有改变。我试图以不同的方式在 Targets->Build Settings 中更改证书密钥首选项（代码签名身份）。我也尝试通过`xcodebuild`. 最终，我尝试了所有组合（开发人员/发行版）。可能是这个设置甚至与这个问题无关 - 我不知道。那么问题是这个问题有一些确切的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T01:12:01.393

当我升级到 xcode 4.5 iOS 6 时，我遇到了同样的问题。只需转到管理器并选择配置文件，当你看到你的发行版时，点击它并删除它。然后尝试刷新。它将连接到开发人员站点并下载您当前的分发配置文件。然后，当您尝试在项目中选择您的配置文件时，您可以看到新的配置文件集将起作用。只需确保您的分发配置文件是最新的。应该是这样的。阿德里安

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T20:27:52.343

如果在尝试了所有方法后仍然出现此错误，则发现需要检查的另一个深奥的东西。确保 TARGETS->Build Settings 下的代码签名选择不会覆盖您在 PROJECT->Build Settings 中为代码签名设置的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:31:22.367

这个错误出现在我身上，因为我没有在调试模式下设置方案。

1.  选项单击运行按钮会弹出一个窗口，您应该在其中为“构建配置”选择“调试”。

# php - 解析错误：语法错误，意外的 T_STRING 59

> ID：13060013
> 
> 赞同：-3
> 
> 时间：2012-10-25T00:42:55.353
> 
> 标签：php, syntax-error

请修复这段代码。这就是它所说的“解析错误：语法错误，第 49 行 /home/timmycpc/public_html/ItemDatabase/index.php 中的意外 T_STRING”这是第 12 - 49 行：

```
<?php
$arr = json_decode(file_get_contents("url.com/file.json"),true);
$page = isset($_GET['p']) ? intval($_GET['p']) : 0;
$elementsPerPage = 20;
$elements = array_slice($arr, $page * $elementsPerPage, $elementsPerPage);
$totalpages = intval(count($arr)/$elementsPerPage);
if($_GET['p'] == ""){$_GET['p'] = '0';}
$whatpage = $_GET['p'];
if($whatpage > $totalpages){echo("<tr><td>Sorry this page does not exist. Please return to <a href='?p=0'>page 1</a>.</td></tr>"); exit;}
$link1 = $whatpage-1;
$link2 = $whatpage+1;
if($_GET['p'] == 0){$backbutton = "";} else {$backbutton = "<a href=?p=" . $link1 . ">Previous Page</a>";}
if($_GET['p'] == $totalpages){$nextbutton = "";} else {$nextbutton = "<a href=?p=" . $link2 . ">Next Page</a>";}
if($_GET['p'] == $totalpages or $_GET['p'] == 0){$middle = "";} else {$middle = " | ";}
$pagenav = $backbutton . $middle . $nextbutton;
echo('<tr><td colspan="5" align="center">'.$pagenav.'</td></tr>');
foreach($elements as $item)
{

$label = $item['label'];
$cost = $item['cost'];
$id = $item['paper_item_id'];
$member = $item['is_member'];
$patched = $item['is_bait'];

if ($member == "1") {
$member = "Yes";
}else{
$member = "No";
}

if ($patched == "1") {
$patched = "Yes";
}else{
$patched = "No";
}

$str .= "<tr><td><embed src="http://www.url.com/SWFViewer/items.swf?id=<?php echo($id); ?>"></td><td style='text-align: left !important;'><b>Name:</b> $label</td><td><b>Item ID:</b> $id</td><td><b>Members:</b> $member</td><td><b>Cost:</b> $cost coins</td><td><b>Patched:</b> $patched</td></tr>";
}

echo substr($str, 0, -5);
?></table></center></body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T00:54:39.123

您的线路`$str ...`正在进出[PHP String](http://php.net/manual/en/language.types.string.php)。这导致了解析错误。您必须转义`\"`引号、连接字符串或使用 HEREDoc。

有关详细信息，请参阅[PHP 字符串手册](http://php.net/manual/en/language.types.string.php)。

**选项1：（最佳）**您可以转义字符串中的双引号：（并删除`<?php echo`）

```
$str .= "<tr><td><embed src=\"http://www.url.com/SWFViewer/items.swf?id=$id\"></td><td style='text-align: left !important;'><b>Name:</b> $label</td><td><b>Item ID:</b> $id</td><td><b>Members:</b> $member</td><td><b>Cost:</b> $cost coins</td><td><b>Patched:</b> $patched</td></tr>"; 
```

**选项 2：**连接您的字符串并使用单引号：

```
$str .= '<tr><td><embed src="http://www.url.com/SWFViewer/items.swf?id=' . $id . '"></td><td style="text-align: left !important;"><b>Name:</b> ' . $label . '</td><td><b>Item ID:</b> ' . $id . '</td><td><b>Members:</b> ' . $member . '</td><td><b>Cost:</b> ' . $cost . ' coins</td><td><b>Patched:</b> ' . $patched . '</td></tr>'; 
```

**选项 3：（最慢）**使用 HereDoc：

```
$str .= <<<EOF
<tr><td><embed src="http://www.url.com/SWFViewer/items.swf?id=$id"></td><td style="text-align: left !important;"><b>Name:</b> $label</td><td><b>Item ID:</b> $id</td><td><b>Members:</b> $member</td><td><b>Cost:</b> $cost coins</td><td><b>Patched:</b> $patched</td></tr>
EOF; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-25T00:48:27.890

尝试这个

`$str .= "<tr><td><embed src=\"http://www.timmycp.co.cc/SWFViewer/items.swf?id=".$id."\"></td><td style='text-align: left !important;'><b>Name:</b> $label</td><td><b>Item ID:</b> $id</td><td><b>Members:</b> $member</td><td><b>Cost:</b> $cost coins</td><td><b>Patched:</b> $patched</td></tr>";`

# php - Flex AS3 - 无法发送 POST 数据

> ID：13060016
> 
> 赞同：0
> 
> 时间：2012-10-25T00:43:10.423
> 
> 标签：php, actionscript-3, apache-flex, post, air

这将是 AS 代码（Flex/AIR 平台）的想法：

```
protected function login_btn_login_clickHandler(event:MouseEvent):void
{

    var urlLoader:URLLoader = new URLLoader();
    var request:URLRequest = new URLRequest(config.domain+'/oms/request/user/login');

    Alert.show(login_inp_username.text) // OK!
    var requestVars:URLVariables = new URLVariables();
    requestVars.username = login_inp_username.text;
    requestVars.password = login_inp_password.text;

    request.data = requestVars;
    request.method = URLRequestMethod.POST
    urlLoader.load(request);

    urlLoader.addEventListener(Event.COMPLETE,login_evt_complete);
    urlLoader.addEventListener(IOErrorEvent.IO_ERROR,login_evt_ioerror);

}

protected function login_evt_ioerror(e:Event):void {
        Alert.show('IO Error: Check connection')
}

protected function login_evt_complete(e:Event):void {
        //  var response:XML = e.currentTarget;
        var response:XML = new XML(e.target.data);
        Alert.show(response)
} 
```

和 PHP：

```
<?php

    echo '<?xml version="1.0" encoding="utf-8"?>
    <result>result:'.$_POST['username'].'</result>
';

?> 
```

这就是我得到的全部

![在此处输入图像描述](../Images/2ae3a08217b601ae0725031a0252dd8a.png)

（问题是使用 PHP 我无法读取 POST 数据......或者它们没有发送）：

* * *

任何解决方案都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T00:56:46.250

改变了这一行

```
var request:URLRequest = new URLRequest(config.domain+'/oms/request/user/login'); 
```

对此

```
var request:URLRequest = new URLRequest(config.domain+'/oms/request/user/login/index.php'); 
```

它奏效了……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T02:29:46.103

尝试将 URLLoader.dataFormat 设置为 TEXT

```
urlLoader.dataFormat = URLLoaderDataFormat.TEXT; 
```

也不确定是否重要，但尝试将 url 设置为 login.php。

除此之外，您的代码似乎是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T02:34:14.467

尝试查看所有数据

```
dump($varName) 
```

# vb.net - 从 Serial 接收和处理 HEX 数据

> ID：13060019
> 
> 赞同：1
> 
> 时间：2012-10-25T00:43:27.740
> 
> 标签：vb.net, visual-studio-2010, serial-port

我是这个论坛的新手，所以我不确定这是否真的是放置这个的地方 - 如果需要，请随时移动到更合适的论坛。

* * *

好的，所以我正在 VB 2010 中编写一个简单的应用程序，将 HEX 数据发送和接收到串行设备。现在我已经完成了“发送”部分，但是，我在接收部分遇到了困难。设备每秒将恒定的 HEX 数据流发送回应用程序；我需要应用程序查看接收到的 HEX 字符串的某些字节并在 IF 语句中相应地执行操作（例如，如果字符串的字节 10 等于 "&10" 然后执行...）。

我不确定如何获取这些数据，从中解析出正确的字节，然后对其进行处理。：/我尝试使用的代码（但不起作用）如下：-

```
Private Sub SerialPort1_DataReceived(ByVal sender As Object, ByVal e As     System.IO.Ports.SerialDataReceivedEventArgs) Handles SerialPort1.DataReceived
       Dim statusget() As String
       Dim str1 As String
       str1 = SerialPort1.ReadExisting()
       statusget = str1.Split(",")

    If statusget(10) = "&01" Then
        btn_tx1.BackColor = Color.Red
        btn_tx2.BackColor = SystemColors.Control
        btn_tx3.BackColor = SystemColors.Control
        btn_tx4.BackColor = SystemColors.Control
        btn_tx5.BackColor = SystemColors.Control
        btn_tx6.BackColor = SystemColors.Control
        btn_tx7.BackColor = SystemColors.Control
        btn_tx8.BackColor = SystemColors.Control
    End If
End Sub 
```

此外，我有一个富文本框，它显示从设备接收到的所有数据，以便我可以监控它。它工作正常，除了它以奇怪的编码（不是十六进制）返回，例如“uZ !!!??”。

感谢您提供任何帮助。:)

* * *

**编辑 - 发送数据的代码：**

```
Private Sub btn_tx1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btn_tx1.Click
    Dim buftx1() As Byte = {&HF0, &H5A, &HF, &H5, &H1, &H11, &H0, &H0, &H0, &H0, &H0, &H0, &H30, &H37, &HFF}
    SerialPort1.Write(buftx1, 0, buftx1.Length)
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:30:33.627

避免考虑“十六进制”数据，因为十六进制只是将二进制数据格式化为易于人类阅读的字符串的一种方式。

显然，您的设备使用的是二进制协议；您的 Click 事件处理程序就是证明。这总是意味着它还返回二进制数据，而不是文本。这使得使用 SerialPort.ReadExisting() 错误，读取文本。结果就是你现在看到的垃圾，尤其是问号。产生这些是因为它不知道如何将接收到的字节转换为 ASCII 字符。

您必须改为使用 SerialPort.Read() 来填充 Byte()。一定要注意Read()的返回值；这告诉你你有多少字节。结果将小于您要求的字节数。继续调用 Read() 直到您根据协议规则从设备获得完整响应。

获得完整响应后，您可以使用设备返回的数据对其进行处理。在 RichTextBox 中显示它并不是非常有用，除了用于调试目的。您可以使用 BitConverter.ToString(Byte()) 重载从字节生成十六进制字符串。请务必在 DataReceived 事件处理程序中使用 Control.BeginInvoke()，因为您无法直接更新 UI，因为该事件在工作线程上运行。

如果您需要有关协议规则的帮助，请联系设备供应商以获得支持。

# c++ - C++ 程序的 Lnk2020 错误

> ID：13060025
> 
> 赞同：0
> 
> 时间：2012-10-25T00:44:44.110
> 
> 标签：c++, visual-studio-2010

所以我想做的是使用一组指针来跟踪产卵机器人并让它们通过碰撞来进行战斗。这是通过使用指针数组中的方法来完成的，但是在构建它时我不断收到 LNK2020 错误

这是 VBot.h 文件

```
class VBot
{
public:

VBot( int startX, int startY, Panel ^ drawingPanel ) : 
  x(startX), y(startY), panel(drawingPanel), energy(100), image(NULL) { };

virtual ~VBot() { };

virtual void Move() = 0;

virtual int EnergyToFightWith() = 0;

bool IsDead() const { return energy <= 0; }

virtual void Show();

bool CollidedWith ( VBot * b ) const;

  void DoBattleWith ( VBot * b );

protected:
  int x, y;                           // Current position of the VBot
  gcroot<Drawing::Bitmap ^> image;    // Image displayed for the VBot
  gcroot<Panel ^> panel;              // Panel on which to show the VBot.
  int energy;                           
  VBot();
};

class CNNBot : public VBot
{
public:
CNNBot( int startX, int startY, Panel ^ drawingPanel ):
VBot(startX, startY, drawingPanel)
{
    image = gcnew Drawing::Bitmap("HappyBot.bmp");
}
~CNNBot(){};

void Move();

int EnergyToFightWith();
bool IsDead() { return (VBot::IsDead()); }
virtual void Show() { VBot::Show();}
bool CollidedWith ( VBot * b ) { return VBot::CollidedWith(b);}
void DoBattleWith ( VBot * b ){ VBot::DoBattleWith(b);}

private:
static const int MOVE_VAL = 55;
static const int RIGHT_BOUND = 490;
static const int DOWN = 40;
static const int MAXY = 379;
bool switcher;

}; 
```

这是 VBot.cpp 文件

```
#include "stdafx.h"     

#include "Vbot.h"

void VBot::Show()
{ 
  Graphics ^ g = panel->CreateGraphics();
  g->DrawImageUnscaled( image, x, y );
  g->~Graphics();
 }

bool VBot::CollidedWith ( VBot * b ) const
{
 if (  b == NULL )
  return false;

return   ( x + image->Width ) >= b->x
  && ( b->x + b->image->Width ) >= x
  && ( y + image->Height ) >= b->y
  && ( b->y + b->image->Height ) >= y;

}

void VBot::DoBattleWith ( VBot * b )
{
 int mine = EnergyToFightWith();
 int yours = b->EnergyToFightWith();
if( mine == yours )
{
 energy = energy - mine / 2;
 b->energy = b->energy - yours / 2;
}
void CNNBot::Move()
{
if (this->switcher)
{
  this->x += MOVE_VAL;
  if( this->x >= RIGHT_BOUND)
{
    this->x = 0;
    this->y += DOWN;
    if(this->y > MAXY)
    {
        this->switcher = false;
        this->y = MAXY;
    }
 }
}
else
{
  this->x += MOVE_VAL;
  if( this->x >= RIGHT_BOUND)
{
    this->x = 0;
    this->y -= DOWN;
    if(this->y < 0)
    {
        this->switcher = true;
        this->y = 0;
    }
 }
}
panel->Invalidate();
} 
```

这是 BotContainer.h

```
#include <vcclr.h>
#include "VBot.h"
#include "stdafx.h"
#ifndef BOTCONTAINER_H
#define BOTCONTAINER_H
using namespace std;

//------------------------------------------------------------------------------
// This class is an array class that will contain pointers to bots that are spawned
    //
class BotContainer
{
private:
static const int MAXARRAY = 1000; //this is the max size of the array
VBot * list[MAXARRAY]; //This is the array of pointers
int count; // the variable that keeps track of the array

public:
//-------------------------------------------------------------------------------
//this the constructor that sets count to zero
//-------------------------------------------------------------------------------
BotContainer(){ count = 0;}
//--------------------------------------------------------------------------------
//This method will check for a collision between the all possible combinations of 
//two bots it is const
//---------------------------------------------------------------------------------
void checkCollisions() const;
//---------------------------------------------------------------------------------
//This method will destroy all dead bots in the array
//---------------------------------------------------------------------------------

void destroy();
//----------------------------------------------------------------------------------
//This method will take given bot pointer and add it to the list.
//The Parameters are a pointer to a VBot called inBot.
//This inBot will be added to the end of the array which will then increment count
//Before adding it checks to make sure the array isn't full.
//----------------------------------------------------------------------------------
void add(VBot * inBot);
void Add(CNNBot * inBot);
//----------------------------------------------------------------------------------
//This method will move all the elements in the array.
//----------------------------------------------------------------------------------
void moveAll();
};
#endif 
```

这是 BotContainer.cpp 文件

```
#include "stdafx.h"
#include <vcclr.h>
#include "BotContainer.h"
//---------------------------------------------------------------------------------
//This method will delete all the deat bots in the array from the highest indexed
//dead bot.  If a bot is deleted then the method will shift all higher indexed elements
// to one index less than its previous index
//-------------------------------------------------------------------------------------
void BotContainer::destroy()
{
for( int i = count - 1; i <= 0; i--)
{
    if ( list[i]->IsDead() == true )
    {
        int current = i; //index of the dead array
        delete list[i];
        for( int j = i + 1; j < count; j++)
        {
            list[current] = list[j];
            current = j; // index of the next element above the one just shifted
        }
        count--;
    }
}
}
//------------------------------------------------------------------------------------
//This method will go throught the array calling move() for each bot in the array
//-----------------------------------------------------------------------------------
void BotContainer::moveAll()
{
for( int i = 0; i < count; i++)
{
    list[i]->Move();
}
}
//-----------------------------------------------------------------------------------
//This method checks for collisions between any 2 bots in the array making sure to not 
//test (ivsi) or (ivsj) and also testing (jvsi).
// This method is const therfore it doesn't change the array just tests it.
//-----------------------------------------------------------------------------------
void BotContainer::checkCollisions() const
{
for( int i = 0; i < count; i++)
{   
    if (list[i]->IsDead() != true)
    {
        for( int j = i + 1; j < count; j++)
        {
            if(list[j]->IsDead() != true)
            {
                if ( list[i]->CollidedWith(list[j])) 
                {
                    list[i]->DoBattleWith(list[j]);
                }
            }

        }
    }
}
}
//--------------------------------------------------------------------------------
//This method will add a pointer of a bot to the array checking first to make sure 
//the array isn't full
//--------------------------------------------------------------------------------
void BotContainer::add(VBot * inBot)
{
if(this->count <= MAXARRAY)
{ 
    list[count] = inBot;
    count++;
}
}
void BotContainer::Add(CNNBot * inBot)
{
if(this->count <= MAXARRAY)
{ 
    list[count] = inBot;
    count++;
}
} 
```

这是 Form.h 文件

```
#pragma once
#include "stdafx.h"
#include <vcclr.h>
#include "BotContainer.h"

namespace Prog3
{

using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing;
/// <summary>
/// Summary for Form1
/// </summary>
public ref class Form1 : public System::Windows::Forms::Form
{
public:
    Form1(void)
    {
        InitializeComponent();
        //
        //TODO: Add the constructor code here
        //
        x = 0;
        y = 0;

    }

protected:
    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    ~Form1()
    {
        if (components)
        {
            delete components;
        }
     }
private: System::Windows::Forms::Panel^  pnlGameZone;
private: System::Windows::Forms::ComboBox^  cmbSelect;

protected: 

private: System::Windows::Forms::Button^  btnBotSpawn;
private: System::Windows::Forms::TrackBar^  trackBar1;
private: System::Windows::Forms::Label^  label1;
private: System::Windows::Forms::Label^  label2;
private: System::Windows::Forms::Label^  label3;
private: System::Windows::Forms::Label^  label4;
private: System::ComponentModel::IContainer^  components;

private:
    /// <summary>
    /// Required designer variable.
    /// </summary>

    int x;
    int y;
    BotContainer  VList();
private: System::Windows::Forms::Timer^  tmrspeed;

private: System::Windows::Forms::NumericUpDown^  updownX;
private: System::Windows::Forms::NumericUpDown^  updownY;

#pragma region Windows Form Designer generated code
    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    void InitializeComponent(void)
    {
        this->components = (gcnew System::ComponentModel::Container());
        this->pnlGameZone = (gcnew System::Windows::Forms::Panel());
        this->cmbSelect = (gcnew System::Windows::Forms::ComboBox());
        this->btnBotSpawn = (gcnew System::Windows::Forms::Button());
        this->trackBar1 = (gcnew System::Windows::Forms::TrackBar());
        this->label1 = (gcnew System::Windows::Forms::Label());
        this->label2 = (gcnew System::Windows::Forms::Label());
        this->label3 = (gcnew System::Windows::Forms::Label());
        this->label4 = (gcnew System::Windows::Forms::Label());
        this->updownX = (gcnew System::Windows::Forms::NumericUpDown());
        this->updownY = (gcnew System::Windows::Forms::NumericUpDown());
        this->tmrspeed = (gcnew System::Windows::Forms::Timer(this-
  >components));
        (cli::safe_cast<System::ComponentModel::ISupportInitialize^  >
  (this->trackBar1))->BeginInit();
        (cli::safe_cast<System::ComponentModel::ISupportInitialize^  >
 (this->updownY))->BeginInit();
        (cli::safe_cast<System::ComponentModel::ISupportInitialize^  >
 (this->updownY))->BeginInit();
        this->SuspendLayout();
        // 
        // pnlGameZone
        // 
        this->pnlGameZone->BackColor = 
  System::Drawing::SystemColors::Window;
        this->pnlGameZone->Location = System::Drawing::Point(53, 102);
        this->pnlGameZone->Name = L"pnlGameZone";
        this->pnlGameZone->Size = System::Drawing::Size(495, 379);
        this->pnlGameZone->TabIndex = 0;
        // 
        // cmbSelect
        // 
        this->cmbSelect->DropDownStyle =   
 System::Windows::Forms::ComboBoxStyle::DropDownList;
        this->cmbSelect->FormattingEnabled = true;
        this->cmbSelect->Items->AddRange(gcnew cli::array< System::Object^  
     >(3) {L"CNN Bot\t", L"MSNBC Bot", L"FOX NEWS Bot"});
        this->cmbSelect->Location = System::Drawing::Point(53, 52);
        this->cmbSelect->Name = L"cmbSelect";
        this->cmbSelect->Size = System::Drawing::Size(121, 21);
        this->cmbSelect->TabIndex = 1;
        // 
        // btnBotSpawn
        // 
        this->btnBotSpawn->Location = System::Drawing::Point(427, 48);
        this->btnBotSpawn->Name = L"btnBotSpawn";
        this->btnBotSpawn->Size = System::Drawing::Size(87, 23);
        this->btnBotSpawn->TabIndex = 4;
        this->btnBotSpawn->Text = L"Spawn a Bot";
        this->btnBotSpawn->UseVisualStyleBackColor = true;
        this->btnBotSpawn->Click += gcnew System::EventHandler(this, 
             &Form1::tmrspeed_Tick);
        // 
        // trackBar1
        // 
        this->trackBar1->Location = System::Drawing::Point(552, 48);
        this->trackBar1->Maximum = 800;
        this->trackBar1->Minimum = 50;
        this->trackBar1->Name = L"trackBar1";
        this->trackBar1->Size = System::Drawing::Size(134, 45);
        this->trackBar1->TabIndex = 5;
        this->trackBar1->TickFrequency = 100;
        this->trackBar1->Value = 50;
        // 
        // label1
        // 
        this->label1->AutoSize = true;
        this->label1->Location = System::Drawing::Point(50, 34);
        this->label1->Name = L"label1";
        this->label1->Size = System::Drawing::Size(65, 13);
        this->label1->TabIndex = 6;
        this->label1->Text = L"Select a Bot";
        // 
        // label2
        // 
        this->label2->AutoSize = true;
        this->label2->Location = System::Drawing::Point(200, 35);
        this->label2->Name = L"label2";
        this->label2->Size = System::Drawing::Size(53, 13);
        this->label2->TabIndex = 7;
        this->label2->Text = L"Starting X";
        // 
        // label3
        // 
        this->label3->AutoSize = true;
        this->label3->Location = System::Drawing::Point(306, 35);
        this->label3->Name = L"label3";
        this->label3->Size = System::Drawing::Size(53, 13);
        this->label3->TabIndex = 8;
        this->label3->Text = L"Starting Y";
        // 
        // label4
        // 
        this->label4->AutoSize = true;
        this->label4->Location = System::Drawing::Point(549, 32);
        this->label4->Name = L"label4";
        this->label4->Size = System::Drawing::Size(103, 13);
        this->label4->TabIndex = 9;
        this->label4->Text = L"Speed of Movement";
        // 
        // updownX
        // 
        this->updownX->Location = System::Drawing::Point(203, 53);
        this->updownX->Name = L"updownX";
        this->updownX->Size = System::Drawing::Size(85, 20);
        this->updownX->TabIndex = 12;
        // 
        // updownY
        // 
        this->updownY->Location = System::Drawing::Point(309, 52);
        this->updownY->Name = L"updownY";
        this->updownY->Size = System::Drawing::Size(80, 20);
        this->updownY->TabIndex = 13;
        // 
        // tmrspeed
        // 
        this->tmrspeed->Tick += gcnew System::EventHandler(this, 
   &Form1::tmrspeed_Tick);
        // 
        // Form1
        // 
        this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
        this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
        this->ClientSize = System::Drawing::Size(740, 493);
        this->Controls->Add(this->updownY);
        this->Controls->Add(this->updownX);
        this->Controls->Add(this->label4);
        this->Controls->Add(this->label3);
        this->Controls->Add(this->label2);
        this->Controls->Add(this->label1);
        this->Controls->Add(this->trackBar1);
        this->Controls->Add(this->btnBotSpawn);
        this->Controls->Add(this->cmbSelect);
        this->Controls->Add(this->pnlGameZone);
        this->Name = L"Form1";
        this->Text = L"Form1";
        this->Load += gcnew System::EventHandler(this, &Form1::Form1_Load);
        (cli::safe_cast<System::ComponentModel::ISupportInitialize^  >
                       (this->trackBar1))->EndInit();
        (cli::safe_cast<System::ComponentModel::ISupportInitialize^  >
                     (this->updownX))->EndInit();
        (cli::safe_cast<System::ComponentModel::ISupportInitialize^  >e) e) 
                     (this->updownY))->EndInit();
        this->ResumeLayout(false);
        this->PerformLayout();

    }

#pragma endregion
private: System::Void btnBotSpawn_Click(System::Object^  sender, System::EventArgs^                      
e)       {
             if ( cmbSelect->SelectedIndex == 0)
             {
                 x = Decimal::ToInt32(updownX->Value);
                 y = Decimal::ToInt32(updownY->Value);
                 CNNBot newBot(x,y,pnlGameZone);
                 CNNBot * temp = &newBot;
                 VList().Add(temp);
             }
         }
private: System::Void Form1_Load(System::Object^  sender, System::EventArgs^  e) 
     {

     }

private: System::Void tmrspeed_Tick(System::Object^  sender, System::EventArgs^  e) 
     {
         VList().moveAll();
         VList().checkCollisions();
         VList().destroy();
     }
};
}; 
```

这是我收到的错误消息。错误 1 ​​错误 LNK2020：未解析的令牌 (06000003) Prog3.Form1::VList C:\Users\Duerst\Documents\Visual Studio 2010\Projects\Prog 3\Prog 3\Prog 3.obj Prog 3

我是一个新手程序员，所以它可能是一些非常基本的东西，但如果你们能找到我做错了什么，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T01:20:52.680

问题是当你像这样声明 VList 时：

```
BotContainer  VList(); 
```

由于 () 运算符，编译器认为它是一个函数而不是一个对象。要修复它，请删除括号 ()

```
BotContainer  VList; 
```

并且还删除了 VList 非常出现的括号：

```
VList.Add(temp); 
```

代替：

```
VList().Add(temp); 
```

和：

```
VList.moveAll();
VList.checkCollisions();
VList.destroy(); 
```

代替：

```
VList().moveAll();
VList().checkCollisions();
VList().destroy(); 
```

# wordpress - 使用 mod_rewrite 将 wordpress 子页面重定向到不同的域

> ID：13060033
> 
> 赞同：1
> 
> 时间：2012-10-25T00:46:31.103
> 
> 标签：wordpress, url, mod-rewrite, ssl, url-masking

我正在尝试将[https://mydomain.com/free](https://mydomain.com/free)屏蔽为 www.myotherdomain.com，以便在输入 www.myotherdomain.com 或 myotherdomain.com 时，它会在 mydomain.com 加载页面，但在地址中显示 myotherdomain.com bar 以及通过 mydomain.com 保持 ssl 连接而不必使用 iframe，这可能吗，我对使用 .htaccess 和 mod_rewrite 相当陌生，我的 .htaccess 代码如下

```
# BEGIN WordPress

Options +FollowSymLinks
RewriteEngine On
RewriteBase /
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}
RewriteCond %{HTTP_HOST} !^javitaonlinecafe\.com$ [NC]
RewriteRule ^(.*)$ http://freejavitacoffee.com [R=301,L]

# END WordPress 
```

# oauth - 什么是正确的 OAuth 百分比编码？

> ID：13060034
> 
> 赞同：7
> 
> 时间：2012-10-25T00:46:40.933
> 
> 标签：oauth, urlencode, encode

我正在实施一个 Oauth Api 并且发现有一些我无法验证的事情，如果有人可以提供澄清，我会很高兴。警告我可能会漫无目的，所以我会尝试用粗体标记我的问题。

根据 oauth 1.0 规范[https://www.rfc-editor.org/rfc/rfc5849](https://www.rfc-editor.org/rfc/rfc5849)，我相信 oauth 参数对签名进行百分比编码的方式与在线时不同。第 3.6 节[https://www.rfc-editor.org/rfc/rfc5849#section-3.6](https://www.rfc-editor.org/rfc/rfc5849#section-3.6) *“它仅用于构建签名基本字符串和“授权”标头字段。”*

RFC3986 [https://www.rfc-editor.org/rfc/rfc3986](https://www.rfc-editor.org/rfc/rfc3986) 这似乎是正常请求中使用的百分比编码方案。但是我没有看到它给出任何类型的 'this' 映射到 'that' 所以我假设如果字符在保留列表中，则应该使用十六进制等效项。

**' '（空格）在为签名编码时是 %20 的唯一区别吗？**Oauth 规范参考了这一点，但我无法诚实地找到其他规范中定义的位置。如果有人能指出我提到的地方以及我可能如何误解它，那就太棒了。

**其他空白字符应该是 %20 吗？规范中的什么地方提到了这一点？**

**传统的 UrlEncode 是否适用于表单正文和查询参数？**

最后，我有一些我希望验证的示例输出。我试图展示 Oauth 签名编码字符和 Url 编码字符之间的区别。再一次，唯一的区别似乎是对 ''、'*' 和 '~' 的处理

```
Char  Oauth  Url
*     %2A     *
~     ~     %7E
%     %25     %25
!     %21     %21
:     %3A     %3A
/     %2F     %2F
=     %3D     %3D
&     %26     %26
+     %2B     %2B
      %20     +
,     %2C     %2C
@     %40     %40
\r\n  %0D%0A  %0D%0A
\n    %0A     %0A
\r    %0D     %0D
"     %22     %22
?     %3F     %3F
(     %28     %28
)     %29     %29
|     %7C     %7C
[     %5B     %5B
]     %5D     %5D 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-05T18:26:24.810

虽然这是一个老帖子，但还是想表达我的理解。

关于[rfc3986#2.1](https://www.rfc-editor.org/rfc/rfc3986#section-2.1)中指定的百分比编码，理解是除了未保留字符之外的所有字符都将被转义。

这意味着除了：

```
 unreserved  = ALPHA / DIGIT / "-" / "." / "_" / "~" 
```

其余字符将被编码。

[此处](http://oauth.googlecode.com/svn/code/java/core/commons/src/main/java/net/oauth/OAuth.java)提供了 java 中的示例实现。寻找接受字符串作为参数的 percentEncode 方法。

```
public static String percentEncode(String s) 
```

可以在[此处](http://oauth.net/code/)找到其他语言的其他代码示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-21T12:06:45.933

**对于 JavaScript：**

```
/**
 * encodeURIComponent(str) Unescaped / Reserved characters:
 *
 * Alphabetic, Digit and -_.~!*'()
 *
 * oAuth Unescaped / Reserved characters:
 *
 * Alphabetic, Digit and -_.~
 *
 */

// Encode with !*'()
this.oAuthEncode = function (value) {
  value = encodeURIComponent(value)
  value = value.replace(/!/g, '%21') // !
  value = value.replace(/\*/g, '%2A') // *
  value = value.replace(/'/g, '%27') // '
  value = value.replace(/\)/g, '%29') // )
  value = value.replace(/\(/g, '%28') // (
  return value;
};

// Decode with !*'()
this.oAuthDecode = function (value) {
  value = decodeURIComponent(value)
  value = value.replace(/%21/g, '!') // !
  value = value.replace(/%2A/g, '*') // *
  value = value.replace(/%27/g, '\'') // '
  value = value.replace(/%29/g, ')') // )
  value = value.replace(/%28/g, '(') // (
  return value;
}; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-02T13:12:05.327

也许 Twitter 开发人员文档的这一部分可能会对您有所帮助：[https ://developer.twitter.com/en/docs/basics/authentication/guides/percent-encoding-parameters.html](https://developer.twitter.com/en/docs/basics/authentication/guides/percent-encoding-parameters.html)

# ruby-on-rails - 将 has_many 与另一个 has_many Rails 聚合

> ID：13060036
> 
> 赞同：0
> 
> 时间：2012-10-25T00:46:56.533
> 
> 标签：ruby-on-rails, relationship, has-many

我有以下型号：

```
class User < ActiveRecord::Base
  has_many :subscriptions, as: :subscribable
  has_many :user_to_high_school_subscriptions
  has_many :high_school_subscriptions, through: :user_to_high_school_subscriptions

  def all_subscriptions
    self.subscriptions + self.high_school_subscriptions.subscriptions
  end
end

class UserToHighSchoolSubscription < ActiveRecord::Base
  belongs_to :user
  belongs_to :high_school_subscription
end

class HighSchoolSubscription < ActiveRecord::Base
  has_many :user_to_high_school_subscriptions
  has_many :users, through: :user_to_high_school_subscriptions
  has_many :subscriptions, as: :subscribable
end

class Subscription < ActiveRecord::Base
  belongs_to :subscribable, polymorphic: true
end 
```

有没有一个聪明的方法让我得到所有`Subscription`的 a `User`。

我试过了

```
u = User.first
subs = u.all_subscriptions 
```

但这是错误的（`undefined method subscriptions' for #<ActiveRecord::Relation:`）。我认为当我尝试使用`has_many :subscriptions`on the时会感到窒息，`HighSchoolSubscription`因为 a `user` `has_many :high_school_subscriptions`. （这一行：）`self.high_school_subscriptions.subscriptions`。

有没有办法在 Rails 中的 has_many 上聚合 has_many？

运行轨道 3.2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:57:36.637

`self.subscriptions`不返回`Array`但是`ActiveRecord::Relation`。这就是为什么这些`+`方法不起作用并且你得到提到的错误的原因。最简单的解决方法是这样做：

```
def all_subscriptions
  self.subscriptions.all + self.high_school_subscriptions.all.collect { |hss| hss.subscriptions.all }.flatten
end 
```

该`all`方法将触发数据库查询并返回一个数组。因为一个用户可能有很多高中订阅，而这些也可能有很多订阅，所以您必须遍历所有高中订阅并收集他们的订阅。如您所见，这完全是矫枉过正。

重新设计您的数据模型或以不同的方式进行。

也许，确定`Subscription`模型的范围可能是一种方式。添加一个属性来指定它是哪种订阅，然后您可以完全删除该`HighSchoolSubscription`模型。

# python - 返回二维列表Python中总和最小的行索引

> ID：13060037
> 
> 赞同：2
> 
> 时间：2012-10-25T00:47:13.417
> 
> 标签：python

我在python中使用二维列表，我需要找到列表中每个项目的总和，然后返回具有最小值的索引。

它应该像这样返回：

```
Row([[1000, 30], [12, 23], [560, 30, 1]])
1
Row([[10, 9], [20, 1, 2], [1, 3]])
2 
```

这是我到目前为止在外壳中的内容：

```
def Row(S):
count=0
for r in range(len(S[0])):
    for c in range(len(S)):
        count += sum([r])
        return r 
```

我无法在 shell 中获取代码以返回具有最低总和的二维列表中的索引。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T00:53:50.797

您可以在 1 行中执行此操作：

```
minidx = min(enumerate(data), key=lambda x:sum(x[1]))[0] 
```

虽然我更喜欢拆包（而不是索引结果）：

```
minidx, minlist = min(enumerate(data), key=lambda x:sum(x[1])) 
```

这有一个附带好处，您可以快速处理具有最小总和的列表......尽管一旦有了索引就很容易获得......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T00:54:04.430

您可以指定一个“键”来`min`根据一些任意标准获取列表的最小值。使用此功能，我们只需一行即可完成：

```
def min_sum(data):
    return min(xrange(len(data)), key=lambda i: sum(data[i])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T00:49:25.243

```
def row(data):
    sums = [sum(x) for x in data]
    return sums.index(min(sums))

print row([[1000, 30], [12, 23], [560, 30, 1]]) 
```

# c# - C#中从1到N的数字相加

> ID：13060042
> 
> 赞同：4
> 
> 时间：2012-10-25T00:47:34.503
> 
> 标签：c#, while-loop

我正在用 C# 编写代码并尝试添加数字 1 和 N 之间的所有数字，N 是在文本框中输入的数字。我正在这样做，至少尝试这样做，方法是将它放入一个while循环中。

我之前在 2 个文本框之间添加了所有数字，但由于某种原因，我让自己发疯了，无法弄清楚这一点。我是一个初级程序员，所以请温柔。

任何帮助将不胜感激。

编辑：我尝试过的六千件事之一。我认为这让我陷入了无限循环？

```
 private void btnAddAll_Click(object sender, EventArgs e)
       {
           int n;
           int count = 0;
           int answer = 0;

           n = int.Parse(txtNum.Text);

           count = n;

           while (count >= 1)
           {
               answer = answer + count;
               count++;
           }
               lstShow.Items.Add("Sum = " + answer);
               lstShow.Text = answer.ToString();
       } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T01:49:55.017

为什么不用高斯公式。(N*(N+1))/2

```
private void btnAddAll_Click(object sender, EventArgs e)
{
     int n, answer;  
     n = int.Parse(txtNum.Text);
     answer = (n*(n+1))/2;
     lstShow.Items.Add("Sum = " + answer);
     lstShow.Text = answer.ToString();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T00:49:03.120

您的编辑：您应该**减少**计数。另一个编辑，看来我需要解释更多：我的意思是**减少**`--`。post 或 pre 递减运算符将值减 1。

如果 count 不断增加 1，则永远不会满足**count >=1 。**您需要将**计数**减少到 1.. 因此`count--;`

另外，我建议您使用`TryParse(string,out int) ;`或至少将`Parse`调用包装在`try catch block`.

这是伪代码中的指针：

```
GetInput From User
TryParse Input
If Between 1 and N
Declare sum = 1;

for i to N-1 
   sum+=i; 

/* if you don't want to use the for loop
  while i < N 
  sum+=i;
  inc i; */
Print sum 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-25T00:58:41.950

如果您将其更改`++`为 a`--`它应该可以按您的意愿工作。

```
 int n;
   int count = 0;
   int answer = 0;

   n = 3;

   count = n;

   while (count >= 1)
   {
       answer = answer + count;
       count--; // here was the error
   }

   Console.WriteLine (answer); 
```

输出：6

此外，只是为了增加兴趣点，您可以使用 That 使用[Enumerable.Range](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.range.aspx)和[Enumerable.Sum](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.sum.aspx)而不是 while 循环（可能超出了家庭作业的预期，但知道那里有什么很有用）。

```
answer =  Enumerable.Range(1, n).Sum(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T01:01:32.110

调试对于任何程序员来说都是一项重要的技能。Visual Studio 中有一些很好的工具可以帮助调试。

卡住时调试代码的一个好方法是使用“断点”并单步执行代码。

选择您希望代码停止的行（例如`n = int.Parse(txtNum.Text);`），然后按 F9 - 这将在该行添加一个断点。

现在，当您运行程序时，它将在断点处停止。如果按 F11，您可以一次“单步执行”一行代码。执行此操作时，您可以将鼠标悬停在变量上以查看其值。

如果你这样做，你会很快在你的代码中找到问题。

# java - 使用 jUnit 或其他 api 测试 web 应用程序？

> ID：13060043
> 
> 赞同：-3
> 
> 时间：2012-10-25T00:47:34.677
> 
> 标签：java, ajax, testing, web-applications, junit

我想知道是否可以创建一个测试套件来使用 junit API 测试 Web 应用程序？或者我们必须添加其他 API，或者还有其他更好的选择吗？

这会支持 ajax、jquery、javascript 吗？

我的意思是我能测试使用 javascript、ajax、jquery 的 Web 应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:31:25.983

这些是您可能的解决方案（[http://java-source.net/open-source/web-testing-tools](http://java-source.net/open-source/web-testing-tools)）

# database - 没有这样的表——django

> ID：13060044
> 
> 赞同：0
> 
> 时间：2012-10-25T00:47:39.033
> 
> 标签：database, django

我正在使用南，我有syncdb，但是我被这个数据库错误卡住了，你能帮我解决这个问题，也许告诉我将来如何解决这样的问题。

这个丢失的数据库表错误正在几个不同的地方出现，处理名为 salesflow_contact 的东西

显示的错误是由于尝试将一些内容发布到表格，但我也得到了分页视图浏览联系人的错误

```
Environment:

Request Method: POST
Request URL: http://127.0.0.1:8000/addacontact

Django Version: 1.4.2
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'south',
 'sekizai')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware')

Traceback:
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/brian/projects/steprider/steprider/views.py" in Add_a_contact
  36\.           new_contact = form.save(request.user)
File "/home/brian/projects/steprider/salesflow/forms.py" in save
  23\.       contact.save()
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/base.py" in save
  463\.         self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/base.py" in save_base
  551\.                 result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/manager.py" in _insert
  203\.         return insert_query(self.model, objs, fields, **kwargs)
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/query.py" in insert_query
  1593\.     return query.get_compiler(using=using).execute_sql(return_id)
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/sql/compiler.py" in execute_sql
  909\.         for sql, params in self.as_sql():
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/sql/compiler.py" in as_sql
  872\.                 for obj in self.query.objs
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/django_extensions-0.9-py2.7.egg/django_extensions/db/fields/__init__.py" in pre_save
  135\.         value = unicode(self.create_slug(model_instance, add))
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/django_extensions-0.9-py2.7.egg/django_extensions/db/fields/__init__.py" in create_slug
  122\.         while not slug or queryset.filter(**kwargs):
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/query.py" in __nonzero__
  130\.             iter(self).next()
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/query.py" in _result_iter
  118\.                 self._fill_cache()
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/query.py" in _fill_cache
  892\.                     self._result_cache.append(self._iter.next())
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/query.py" in iterator
  291\.         for row in compiler.results_iter():
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/sql/compiler.py" in results_iter
  763\.         for rows in self.execute_sql(MULTI):
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/sql/compiler.py" in execute_sql
  818\.         cursor.execute(sql, params)
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/backends/util.py" in execute
  40\.             return self.cursor.execute(sql, params)
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/backends/sqlite3/base.py" in execute
  344\.             return Database.Cursor.execute(self, query, params)

Exception Type: DatabaseError at /addacontact
Exception Value: no such table: salesflow_contact

#!/usr/bin/env python
# -*- coding: utf-8 -*-
#
#  steprider.salesflow.forms.py
#  
#  Copyright 2012 BRIAN SCOTT CARPENTER <KlanestroTalisman@gmail.com>

from django.forms import ModelForm
from salesflow import models
from django import forms
from django.template.defaultfilters import slugify

class ContactForm(ModelForm):
    description = forms.CharField(widget=forms.Textarea)

    class Meta:
        model = models.Contact
        exclude = ("user","slug")

    def save(self, user):
        contact = super(ContactForm, self).save(commit=False)
        contact.user = user
        contact.save()
        return contact

class Contact_History_Form:

    class Meta:
        model = models.Contact_History
        exclude = ("user","slug")

#!/usr/bin/env python
# -*- coding: utf-8 -*-
#
#  views.py
#  
#  Copyright 2012 BRIAN SCOTT CARPENTER <KlanestroTalisman@gmail.com>
from django.shortcuts import render_to_response,get_object_or_404
from django.template import RequestContext
from salesflow.forms import *
from django.core.paginator import Paginator, EmptyPage, PageNotAnInteger

from salesflow.models import Contact

def home (request):
    """ This is the Home view"""
    return render_to_response(('index.html') ,context_instance=RequestContext(request))

def server_error(request, template_name='templates/500.html'):
    """
    500 error handler.
    Templates: `500.html`
    Context:
    STATIC_URL
      Path of static media (e.g. "media.example.org")
    """
    t = loader.get_template(template_name)
    return HttpResponseServerError(
        t.render(Context({'STATIC_URL': settings.STATIC_URL})))

def Add_a_contact(request):
    """give them a page so they can donate and save it to a database."""
    if request.method == 'POST':
        form = ContactForm(request.POST,request.FILES)
        if form.is_valid():
            new_contact = form.save(request.user)
            return HttpResponseRedirect(reverse(item, args=(new_contact.slug,)))
    else:
        form = ContactForm()
    return render_to_response('salesflow/addacontact.html',{'form': form},context_instance=RequestContext(request))

def browse_contacts(request):
    contact_list = Contact.objects.all()
    paginator = Paginator(contact_list,15)

    page = request.GET.get('page')

    try:
        contacts = paginator.page(page)
    except PageNotAnInteger:
        # If page is not an integer, deliver first page.
        contacts = paginator.page(1)
    except EmptyPage:
        # If page is out of range (e.g. 9999), deliver last page of results.
        contacts = paginator.page(paginator.num_pages)

    return render_to_response('salesflow/browsecontacts.html',
    {"contacts":contacts,
    "site":settings.SITE_DOMAIN},
    context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T01:15:22.900

错误很简单。你没有表叫`salesflow_contact`。

您需要运行`migrate`假设它具有初始的`schemamigration salesflow --initial`第一个表创建迁移。

`syncdb`不会为南方管理模型创建表，这很可能是您的问题。您可以绕过它，`syncdb --all`但如果它是真正由南方管理的，您应该运行并且假设您在那里进行迁移，`migrate salesflow`它应该创建表。`schemamigration salesflow --initial`

# applescript - Applescript 打印“缺失值”而不是空字符串

> ID：13060045
> 
> 赞同：2
> 
> 时间：2012-10-25T00:47:47.297
> 
> 标签：applescript

我正在使用此 Applescript 使用 GeekTool 在我的桌面上显示名为“城市”的列表中的提醒，但由于某种原因，此列表中的每个提醒都没有正文中的任何内容，它会打印出“缺失值”。我怎样才能让它不呢？

```
set theList to {}
set theOutput to ""

tell application "Reminders"
    repeat with i from 1 to (count of every reminder of list "Cities")
        if reminder i of list "Cities" is not completed then
            set theList to theList & {name, body} of reminder i of list "Cities"
        end if
    end repeat
    repeat with i from 1 to (count of every item of theList)
        set theOutput to (theOutput & item i of theList as string) & return
    end repeat
    return theOutput
end tell 
```

我追求的输出是：

伊斯坦布尔 - 2008 年 3 月访问 拉斯维加斯 京都 - 2012 年 2 月访问

目前其：

伊斯坦布尔访问 2008 年 3 月 拉斯维加斯 京都 访问 2012 年 12 月

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T01:21:38.280

发生这种情况是因为空主体的值为`missing value`，当您将其转换为字符串时，变为`"missing value"`。为避免这种情况，您可以在将提醒添加到`theList`.

```
repeat with i from 1 to (count of every reminder of list "Cities")
    set theReminder to reminder i of list "Cities"
    if theReminder is not completed then
        if the body of theReminder is not missing value then
            set theList to theList & {name, body} of theReminder
        else
            set theList to theList & {name of theReminder, ""}
        end if
     end if
 end repeat 
```

如果您不想在没有正文的提醒之间出现空行，您可以简单地`{name of theReminder}`在 else 子句中使用。

# sql - 更新大表并最小化用户影响

> ID：13060046
> 
> 赞同：0
> 
> 时间：2012-10-25T00:48:08.790
> 
> 标签：sql, sql-server, database

我对一般数据库/sql 服务器设计有疑问：

有一个包含 300 万行的表正在 24x7 访问。我需要更新表中的所有记录。你能给我一些方法来做到这一点，以便在我更新表格时将用户影响降至最低吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T01:04:21.340

通常你会编写一个更新语句来更新行。但是在您的情况下，您实际上想将其分解。

[http://www.sqlfiddle.com/#!3/c9c75/6](http://www.sqlfiddle.com/#!3/c9c75/6) 是一个常见模式的工作示例。您不希望批量大小为 2，也许您想要 100,000 或 25,000 - 您必须在系统上进行测试以确定快速完成和低阻塞之间的最佳平衡。

```
declare @min int, @max int

select @min = min(user_id), @max = max(user_id)
from users

declare @tmp int
set @tmp = @min

declare @batchSize int
set @batchSize = 2

while @tmp <= @max
begin
  print 'from ' + Cast(@tmp as varchar(10)) + ' to ' + cast(@tmp + @batchSize as varchar(10)) + ' starting (' + CONVERT(nvarchar(30), GETDATE(), 120) + ')'
  update users
  set name = name + '_foo'
  where user_id >= @tmp and user_id < @tmp + @batchsize and user_id <= @max

  set @tmp = @tmp + @batchSize
  print 'Done  (' + CONVERT(nvarchar(30), GETDATE(), 120) + ')'

  WAITFOR DELAY '000:00:001'

end
update users
set name = name + '_foo' 
where user_id > @max 
```

我们使用这样的模式来更新大约 10 倍表大小的用户表。使用 100,000 个块大约需要一个小时。性能当然取决于您的硬件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T01:02:29.677

与所有事物数据库一样，这取决于。什么是负载模式（即用户主要从表格末尾阅读）？如果有的话，如何添加新记录？您的索引填充因子设置和实际值是多少？您的更新会强制重新计算任何索引吗？您可以拆分更新以减少锁定吗？如果是这样，您是否需要强大的回滚能力以防发生故障？您是在每一行中设置相同的值，还是需要每行计算，或者您是否有每行源来匹配？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T00:58:41.640

为了尽量减少对用户的影响，我一次只更新一定数量的记录。在我看来，要更新的数量更多地取决于您的硬件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-25T01:01:47.663

使用循环甚至游标一次遍历表格一行。确保每次更新都使用行锁。

如果您无法识别仍需更新的行，请先创建另一个表来保存主键和更新指示符，将所有主键值复制其中，然后跟踪您的进度那张桌子。

这也将是最慢的方法。如果您需要它更快一点，一次更新几千行，仍然使用行锁提示。

# css - 无法弄清楚 Twitter Bootstrap 与 JSF Web 应用程序结合的问题（文本框阴影）

> ID：13060052
> 
> 赞同：1
> 
> 时间：2012-10-25T00:48:39.280
> 
> 标签：css, jsf, twitter-bootstrap, shadow

图片链接：http: [//i.stack.imgur.com/oh37d.jpg](http://i.stack.imgur.com/oh37d.jpg)

我和我的团队正在使用 JSF2.0 和 JBoss7 为一个学校项目开发一个 Web 应用程序。我们被迫使用过时的 HP 触摸板来运行该应用程序，因此我们当前通过笔记本电脑的 IP 在默认的 HP webOS 浏览器上连接和查看该应用程序。一切都运行良好，直到我们开始实施 Twitter Bootstrap 来设置样式。问题是，在笔记本电脑浏览器（IE、Chrome、Firefox）上，页面看起来很棒并且没有问题，但是一旦我们在平板电脑上查看页面，每个文本框右侧都有一个数百像素的黑框阴影，并且文本区域（如图所示）。

有谁知道哪个 CSS 属性会在旧版浏览器上导致这样的事情？

提前非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T00:54:35.983

如果确实与阴影有关，您可能需要查看`line 990`.`bootstrap.css`

*请注意，这可能在不同版本的 Twitter Bootstrap 之间有所不同*

```
textarea,
input[type="text"],
input[type="password"],
input[type="datetime"],
input[type="datetime-local"],
input[type="date"],
input[type="month"],
input[type="time"],
input[type="week"],
input[type="number"],
input[type="email"],
input[type="url"],
input[type="search"],
input[type="tel"],
input[type="color"],
.uneditable-input {
  background-color: #ffffff;
  border: 1px solid #cccccc;
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
     -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
          box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
  -webkit-transition: border linear 0.2s, box-shadow linear 0.2s;
     -moz-transition: border linear 0.2s, box-shadow linear 0.2s;
       -o-transition: border linear 0.2s, box-shadow linear 0.2s;
          transition: border linear 0.2s, box-shadow linear 0.2s;
} 
```

删除`box-shadow`声明，看看会发生什么。

作为预防措施，您可以搜索所有`box-shadow`出现的事件并将它们注释掉以查看它是否有所作为。

一旦你缩小了属性并修复了它，你可以使用一些 JS 魔法来只删除那个特定浏览器的阴影，但我会问一个关于这个的新问题。

# objective-c - RestKit：给定 RKObjectMapping、object.class 和 JSON 字符串，如何获取映射对象？

> ID：13060055
> 
> 赞同：0
> 
> 时间：2012-10-25T00:48:50.063
> 
> 标签：objective-c, ios, restkit

有没有办法将 RestKit 用作对象映射器，比如我给它一个 JSON 字符串和一个对象映射，然后它给我对象实体，而无需设置服务器和所有那些与网络相关的东西？

谢谢！

更新：

我需要的是：

1.  给 Restkit 一个 RKObjectMapping，对象类和 JSON 字符串
2.  获取解析的对象。

RestKit 文档告诉我的是：

```
RKObjectManager* objectManager = [RKObjectManager objectManagerWithBaseURL:@"http://restkit.org"];
[objectManager.mappingProvider setMapping:articleMapping forKeyPath:@"articles"];
RKObjectLoader* loader = [RKObjectManager loadObjectsAtResourcePath:@"/articles" delegate:self]; 
```

我不需要创建对象管理器和加载对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:14:00.693

解决方案是使用：

```
RKObjectMappingOperation *op = [RKObjectMappingOperation mappingOperationFromObject:jsonDict toObject:myObject withMapping:[MyObject mapping]];
[op performMapping:&error]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T01:04:16.223

您是否阅读了已提供的 Wiki？

[RestKit：对象映射](https://github.com/RestKit/RestKit/wiki/Object-mapping)

我个人喜欢使用 AFNetworking 进行联网和解析 JSON，然后使用 MagicalRecord 进行对象映射和其他核心数据工作。

# java - 有效管理 Java Web 应用程序中的内存

> ID：13060059
> 
> 赞同：-2
> 
> 时间：2012-10-25T00:49:24.827
> 
> 标签：java, spring, hibernate, jsf, annotations

我正在使用中型 Java Web 应用程序。我需要创建 25 个 Spring 托管服务和 DAO；以及大约 20 个 JSF 托管 bean。此外，我还有大约 20 个模型类。这 20 个是会话范围的 bean。如何有效地对所有 bean 进行内存管理。如何有效地使用会话范围的 bean？这种应用程序需要多少堆内存。我主要使用注释。这会提高我的表现吗？请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:26:47.193

我使用了 java profilers，但我对实际性能调整和内存使用的输出不满意，目前我们已经切换到[java melody](https://code.google.com/p/javamelody/)。这不仅有助于在开发和生产系统中进行性能优化。Java melody 非常易于集成和配置，在生产中您只需更新 web.xm 即可启用或禁用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T00:53:38.453

> 如何才能有效地管理所有的 bean 的内存。

除非内存分析表明您确实存在过度使用内存的问题，否则最好的策略是让 GC 处理内存管理。

正如@BalusC 所说：“测量就是知道”。

> 如何有效地使用会话范围的 bean？

嗯……这个问题太开放了，无法回答。

> 这种应用程序需要多少堆内存。

这取决于应用程序......显然。

> 我主要使用注释。这会提高我的表现吗？

无论哪种方式，它都应该没什么区别......我本来以为。

# java - 如何发现对象是否包含设置为 0 的数字字段？

> ID：13060062
> 
> 赞同：1
> 
> 时间：2012-10-25T00:49:48.207
> 
> 标签：java

如果 Java 对象包含设置为 value 的数字字段，我如何发现（可能使用反射）`0`？我在想这样的事情：

```
public boolean checkZero(Class T){
   return false; 
   // need help here 
} 
```

但是`T`没有检查值的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T01:05:20.530

我认为你可以这样做：

```
 public boolean checkZero(Class clazz){
        boolean zeroNumericFields = true;
        Field[] fields = clazz.getDeclaredFields();
        boolean zeroNumericFields = true;
        List<Class> numberClasses = new ArrayList<Class>();

        //Add all types you want to check e.g.
        numberClasses.add(Number.class);
        numberClasses.add(Integer.class);
        numberClasses.add(Long.class);
        numberClasses.add(Double.class);
        numberClasses.add(Float.class);

        if(fields.length > 0){
           for(Field field : fields){
               if(numberClasses.contains(field.getType())){
                   zeroNumericFields = false;
                   break;
               }
            }
        }
        return zeroNumericFields;
     } 
```

请注意：这不包括继承的字段（如果有）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T01:17:53.413

不确定它是否是你想要的，但让我们试试吧:)

```
static boolean checkZeroes(Object o) throws IllegalArgumentException,
        IllegalAccessException {

    Field[] fields = o.getClass().getDeclaredFields();

    for (Field f : fields) {
        // lets check what is inside of field
        f.setAccessible(true);// in case of private field
        Object value = f.get(o);

        System.out.println("checking " + f + ": " + value);
        if (value.equals((byte) 0) 
            || value.equals((short) 0)
            || value.equals((int) 0)
            || value.equals((long) 0)
            || value.equals((float) 0)
            || value.equals((double) 0)
            ){
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T01:12:22.033

```
public boolean checkZero(Class T){ 
```

不正确

> [检查] Java 对象是否包含...

你需要的是

```
public boolean checkZero(Object o){ 
```

现在你有一个`Object`，

*   用于[`Object.getclass`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#getClass%28%29)获取其`Class`
*   用于[`Class.getFields`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getFields%28%29)获取其字段
*   用于[`Field.getType`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Field.html#getType%28%29)获取字段的类
*   检查字段的类是否为 Numeric
*   用户[`setAccessible`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/AccessibleObject.html#setAccessible%28boolean%29)能够访问潜在的私有字段。在某些情况下这可能会失败，请查看文档。
*   用于[`Field.get`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Field.html#get%28java.lang.Object%29)获取该字段的值
*   将其转换为正确的静态类型并与 0 进行比较。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T01:14:10.450

您可以遍历类的声明字段并获取它们的值。但是，您还需要该类的实例来获取值。

```
public static boolean checkZero(Object toCheck) {
    final Class<?> numerics = new Class<?>[]{ int.class, double.class, float.class,
            long.class, short.class, byte.class, Integer.class, Double.class,
            Float.class, Long.class, Short.class, Byte.class };
    try {
        Class<?> clazz = toCheck.getClass();
        Field[] fields = clazz.getDeclaredFields();
        for (Field field : fields) {
            Class<?> type = field.getType();
            boolean isNumeric = false;
            for (Class<?> numeric : numerics) {
                if (type.equals(numeric)) {
                    isNumeric = true;
                    break;
                }
            }
            if (isNumeric) {
                Object value = field.get(toCheck);
                if (value == 0) {
                    return true;
                }
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return false;
} 
```

唯一可能的问题是比较对象形式的原始字段。您可能需要使用 Field#getInt、Field#getDouble 等来创建特殊情况，以检查值是否为零。

# java - 一定范围内无输出

> ID：13060064
> 
> 赞同：0
> 
> 时间：2012-10-25T00:50:12.843
> 
> 标签：java

我的程序又遇到了同样的问题。

这次的问题是程序在 59 到 20 之间没有输出任何内容。程序只是终止了。据我所知，所有 if 语句的格式都相同，但也许我只需要一些新的眼光，因为我的大脑正在阻止错误

这是代码：

```
import java.util.Scanner;

public class LazyDaysCamp
{
    public static void main (String[] args)
    {
        int temp;
        Scanner scan = new Scanner(System.in);

        System.out.println ("What's the current temperature?");
        temp = scan.nextInt();
        if (temp > 95 || temp < 20)
        {
            System.out.println ("Visit our shops!");
        } else if (temp <= 95)
            if (temp >= 80)
            {
                System.out.println ("It's good weather for swimming");
            } else if (temp >=60) 
                if (temp < 80)
                {
                    System.out.println ("It's good weather for tennis");
                } else if (temp >= 40)
                    if (temp < 60)
                    {
                        System.out.println ("It's good weather for golf");
                    } else if (temp >= 20)
                        if (temp < 40)
                        {
                            System.out.println ("It's good weather for skiing"); 
                        }
                    }
                }                                                                                                                                                                                                                                                                  
            }
        }
    }
} 
```

正如有人指出的那样，我知道 if 语句有点过分，但我必须这样做（级联 if）。否则我会使用逻辑运算符。

这是输出：

```
 ----jGRASP exec: java LazyDaysCamp

What's the current temperature?
100
Visit our shops!

 ----jGRASP: operation complete.

 ----jGRASP exec: java LazyDaysCamp

What's the current temperature?
85
It's good weather for swimming

 ----jGRASP: operation complete.

 ----jGRASP exec: java LazyDaysCamp

What's the current temperature?
70
It's good weather for tennis

 ----jGRASP: operation complete.

 ----jGRASP exec: java LazyDaysCamp

What's the current temperature?
50

 ----jGRASP: operation complete.

 ----jGRASP exec: java LazyDaysCamp

What's the current temperature?
30

 ----jGRASP: operation complete.

 ----jGRASP exec: java LazyDaysCamp

What's the current temperature?
15
Visit our shops!

 ----jGRASP: operation complete. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T01:05:18.487

您的问题出在 else 语句中。例如，当您尝试“50”时

```
else if (temp >=60) 
```

该语句返回 false，甚至没有转到下面的 if 语句，这意味着它没有机会跟随该语句的 else 得到正确的结果。

我建议只删除所有其他的并只使用 if 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T00:54:38.607

您的某些 if 语句没有大括号来表示它们的条件块。这使得很难确定您实际要完成的工作。在 Java 中，如果下一行包含应该执行的语句，则可以在 if 语句之后省略大括号。在您的场景中并非如此，并且上述约定不是最佳实践。我建议在整个条件语句中使用大括号来表示它们的分隔。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T00:56:45.243

请注意，您的一些 if 语句是不必要的。如果温度是`>= 80`，它只能是`< 80`您检查它时的那个点`< 80`。这样做几次。

问题是你的 else-if 语句被放置为这些不必要的 if 语句的替代品，这些语句*总是*正确的。结果，甚至永远不会评估 else-if 条件。

```
if (temp < 80) // this is unnecessary because it's previously checked, and is always true
{
    System.out.println ("It's good weather for tennis");
}
else if (temp >= 40) // this is attached to the true-if and therefore isn't evaluated 
```

# less - 解析 LESS 文件时的 open_basedir 限制

> ID：13060067
> 
> 赞同：1
> 
> 时间：2012-10-25T00:50:35.477
> 
> 标签：less, file-permissions, php, open-basedir

在解析我的“Twitter BootStrap”文件并将它们保存在磁盘上的 less-cache 文件夹中时，我收到了一条警告。

> 警告：is_file(): open_basedir 限制生效。文件(/../../lib/bootstrap/less/reset.less.less) 不在允许的路径内： (/var/www/vhosts/example.com/:/tmp/) in /第 80 行的 var/www/vhosts/example.com/httpdocs/wp-content/modules/wp-less/lessc/lessc.inc.php

我在我正在解析的主文件中使用（例如）`@import "../../lib/bootstrap/less/reset.less";`。

有趣的是，第一个样式表获得了两次扩展：`reset.less.less`- 其他的没有。让我想知道的另一件事是，为什么`/`文件前面有一个前导。

* * *

关于环境和服务器的一些数据：

*   PHP 5.3.3
*   WordPress 3.4.2
*   [使用LESSc 库](https://github.com/leafo/lessphp)的[WP-LESS 插件](https://github.com/sanchothefat/wp-less)（是的，我提交给这个 repo），它从[这里](https://github.com/leafo/lessphp/blob/master/lessc.inc.php#L80)抛出错误。

*`php.ini`*

```
include_path = ".:..:"
upload_temp_dir _no value/not set_
open_basedir = "/var/www/vhosts/example.com/:/tmp/" 
```

提前感谢您的帮助！

# python - 快速算法检测图像中的主要颜色？

> ID：13060069
> 
> 赞同：8
> 
> 时间：2012-10-25T00:50:51.423
> 
> 标签：python, algorithm, colors, python-imaging-library

有谁知道检测图像中主要颜色的快速算法？

我目前正在使用 k-means 和 Python 的 PIL 一起查找颜色，但速度很慢。处理一张 200x200 图像需要 10 秒。我有几十万张图片。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T04:46:52.380

一种快速的方法是将颜色空间简单地划分为 bin，然后构建直方图。它很快，因为每个像素只需要少量的决策，并且只需要遍历图像一次（并且遍历直方图以找到最大值）。

**更新：**这是一个粗略的图表，可以帮助解释我的意思。

x 轴上是将颜色划分为离散的 bin。y 轴显示每个 bin 的值，即与该 bin 的颜色范围匹配的像素数。该图像中有两种主要颜色，由两个峰显示。

![颜色直方图](../Images/92554e9fdf3b9ffc0ff014f7d25482d3.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:31:48.130

稍加修改，[这段代码](http://charlesleifer.com/blog/using-python-and-k-means-to-find-the-dominant-colors-in-images/)（我怀疑你可能已经看过了！）可以加速到不到一秒

如果将`kmeans(min_diff=...)`值增加到大约 10，它会产生非常相似的结果，但运行时间为 900 毫秒（相比之下，大约 5000-6000 毫秒`min_diff=1`）

将缩略图的大小进一步减小到 100x100 似乎也不会对结果产生太大影响，并且运行时间约为 250 毫秒

这是代码的略微调整版本，它只是参数化了`min_diff`值，并包含一些糟糕的代码来生成带有结果/时间的 HTML 文件

```
from collections import namedtuple
from math import sqrt
import random
try:
    import Image
except ImportError:
    from PIL import Image

Point = namedtuple('Point', ('coords', 'n', 'ct'))
Cluster = namedtuple('Cluster', ('points', 'center', 'n'))

def get_points(img):
    points = []
    w, h = img.size
    for count, color in img.getcolors(w * h):
        points.append(Point(color, 3, count))
    return points

rtoh = lambda rgb: '#%s' % ''.join(('%02x' % p for p in rgb))

def colorz(filename, n=3, mindiff=1):
    img = Image.open(filename)
    img.thumbnail((200, 200))
    w, h = img.size

    points = get_points(img)
    clusters = kmeans(points, n, mindiff)
    rgbs = [map(int, c.center.coords) for c in clusters]
    return map(rtoh, rgbs)

def euclidean(p1, p2):
    return sqrt(sum([
        (p1.coords[i] - p2.coords[i]) ** 2 for i in range(p1.n)
    ]))

def calculate_center(points, n):
    vals = [0.0 for i in range(n)]
    plen = 0
    for p in points:
        plen += p.ct
        for i in range(n):
            vals[i] += (p.coords[i] * p.ct)
    return Point([(v / plen) for v in vals], n, 1)

def kmeans(points, k, min_diff):
    clusters = [Cluster([p], p, p.n) for p in random.sample(points, k)]

    while 1:
        plists = [[] for i in range(k)]

        for p in points:
            smallest_distance = float('Inf')
            for i in range(k):
                distance = euclidean(p, clusters[i].center)
                if distance < smallest_distance:
                    smallest_distance = distance
                    idx = i
            plists[idx].append(p)

        diff = 0
        for i in range(k):
            old = clusters[i]
            center = calculate_center(plists[i], old.n)
            new = Cluster(plists[i], center, old.n)
            clusters[i] = new
            diff = max(diff, euclidean(old.center, new.center))

        if diff < min_diff:
            break

    return clusters

if __name__ == '__main__':
    import sys
    import time
    for x in range(1, 11):
        sys.stderr.write("mindiff %s\n" % (x))
        start = time.time()
        fname = "akira_940x700.png"
        col = colorz(fname, 3, x)
        print "<h1>%s</h1>" % x
        print "<img src='%s'>" % (fname)
        print "<br>"
        for a in col:
            print "<div style='background-color: %s; width:20px; height:20px'>&nbsp;</div>" % (a)
        print "<br>Took %.02fms<br> % ((time.time()-start)*1000) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T06:32:22.043

K-means 是此任务的不错选择，因为您事先知道主要颜色的数量。您需要优化 K-means。我认为您可以减小图像大小，只需将其缩小到 100x100 像素左右。找到你的算法以可接受的速度工作的大小。另一种选择是在 k-means 聚类之前使用降维。

并尝试找到快速的 k-means 实现。用python写这样的东西是对python的误用。它不应该像这样使用。

# jquery - 更改父 div 的复选框 attr onclick

> ID：13060070
> 
> 赞同：1
> 
> 时间：2012-10-25T00:50:51.467
> 
> 标签：jquery, html, checkbox

我有一个输出图像的 php 脚本，此时要选择图像，您必须单击一个复选框。我想更改它，以便在单击父 div 时将复选框设置为选中。

如果我的父 div 有不同的 id，我知道该怎么做，并且该类似乎不好，因为它将 php 输出的所有复选框设置为真/假。

这是我到目前为止所拥有的：

jQuery

```
$('#div').bind('click', function() {
   var checkbox = $(this).find(':checkbox');

    checkbox.attr('checked', !checkbox.attr('checked'));
}); 
```

HTML（由php输出，所以存在倍数。）

```
<div id="div" style='display:inline-block; padding:15px;' class='lifted drop-shadow-sq'>
    <img class='reflect reflect-br'  width='150px' height='150px' src=\"thumb.php?id=$id\">
        <input type='checkbox' class=\"show-man\" name=\"images[]\" value='$id'>
</div> 
```

那么，当以不会导致任何其他复选框之间发生冲突的方式单击父 div 时，我将如何将复选框设置为已选中？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T00:54:05.053

~~`div`您的选择器错误，您的标记中没有 ID 为的元素~~，您可以使用`prop`以下方法：

```
$('div').on('click', function() {
   $('input[type=checkbox]', this).prop('checked', function(i, checked){
      return !checked
   })
}); 
```

请注意，`:checkbox`选择器已弃用且 ID 必须是唯一的，如果您有多个具有相同 ID 的元素，则您的标记无效并且您的 ID 选择器仅选择具有该特定 ID 的第一个元素，您应该改用类。

```
$('.div').on('click', function() { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T00:58:19.137

假设每个 div 不超过 1 个复选框，并且每个复选框实现相同的类，您可以使用以下 jQuery：

```
$('input[type=checkbox].show-man').each(function(index, value) {
    var self = $(this);
    self.parent().on("click", function() { 
        self.prop('checked', !self.prop('checked'));
    });
}); 
```

作为解释，`$('input[type=checkbox].show-man')`应该抓住所有相关的复选框（这样您仍然可以在页面上拥有其他不受影响的复选框和 div）。然后该`each()`方法将通过并抓取每个复选框的每个父级并将单击事件分配给它以切换相关复选框的选中状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T01:02:37.027

为什么要重新发明轮子！

单击时的[HTML 标签元素](https://developer.mozilla.org/en-US/docs/HTML/Element/label)将更改复选框状态。改用标签，不需要 JavaScript。

```
<label for="cb" style='display:inline-block; padding:15px;' class='lifted drop-shadow-sq'>
    <img class='reflect reflect-br'  width='150px' height='150px' src=\"thumb.php?id=$id\">
        <input id="cb" type='checkbox' class=\"show-man\" name=\"images[]\" value='$id'>
</label> 
```

​</p>

# python - 选择单词时如何获取 Sublime 创建的区域？

> ID：13060078
> 
> 赞同：3
> 
> 时间：2012-10-25T00:52:05.243
> 
> 标签：python, plugins, sublimetext2, sublimetext

当您在[Sublime Text 2](http://www.sublimetext.com/)中选择一个单词时，该单词会突出显示，并且同一文档中的其他单词会在视觉上被概述/加框。据我了解，所有这些都称为区域，但我是编写 Sublime 插件和 Python 的新手。

如何在 Python 中获取所有这些区域？根据[API](http://www.sublimetext.com/docs/2/api_reference.html#sublime.View)，我可能可以使用`get_regions(key)`，但我不知道密钥是什么！

我可以通过使用当前选择的单词来创建自己的区域`find_all`，但是这些区域与 Sublime 概述的有点不同。如果可能的话，我想以某种方式访问​​内置功能。

![选定和概述的文本](../Images/a04032a0e4a697346e29a6a25e2e1fe1.png)

在图像中，我选择了“文本”，Sublime 列出了所有其他匹配的单词。基本上，我想得到那个 RegionSet。

# ios - MonoTouch 解决方案中的多个 Info.plist 文件

> ID：13060079
> 
> 赞同：3
> 
> 时间：2012-10-25T00:52:35.883
> 
> 标签：ios, xamarin.ios, monodevelop, info-plist

我正在尝试编写两个单独的可提交应用程序：一个用于 iPad，另一个用于 iPhone。这需要有两个单独的 plist 以允许独立指定不同的应用程序图标、启动图像等。

当我尝试重命名我的 Info.plist 时，MonoDevelop 会自动创建一个新的空 Info.plist 并改用它。出于同样的原因，我似乎无法将我的 Info.plist 移动到 iPad/ 子文件夹并让 MD 在那里取它。

目前我们在 1 个解决方案中有 3 个项目：iPad、iPhone、通用文件和库。

是在适当的子文件夹中拥有单独的 .sln 文件的唯一解决方案，还是我仍然可以以某种方式从一个 .sln 构建两个单独的应用程序？

*编辑：*如果这有助于可视化问题，则项目结构如下。

```
我的应用程序.sln
MyApp-iPad.csproj
MyApp-iPhone.csproj
MyApp-Common.csproj

主文件
AppDelegate-iPad.cs
AppDelegate-iPhone.cs

Info.plist（MD 目前在两个项目中都使用它）
常见的/
平板电脑/
iPad/Info.plist（用于 -iPad.csproj）
苹果手机/
iPhone/Info.plist（用于 -iPhone.csproj）

```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T06:02:34.780

这是我当前非常普通的解决方案：添加在构建之前运行的自定义命令

```
cp iPad/Info.plist Info.plist 
```

对于 iPhone：

```
cp iPhone/Info.plist Info.plist 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:48:43.027

我有一个项目，我需要能够使用不同的图标和资源构建应用程序。

我使用不同的构建配置文件和构建脚本，将正确的文件复制到资源文件夹中。这也会更改应用程序名称和标识符。

这是一个与您的解决方案类似的解决方案，但它允许您根据需要将不同的图像与您的应用程序捆绑在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T03:42:48.017

您需要制作 2 个项目，一个用于 iPad，一个用于 iPhone。

您应该将所有代码文件从一个项目“链接”到另一个项目。你可以通过这条路线拥有不同的 Info.plist 文件、图标、图像等。

这是一个讨论各种策略的链接：http: [//docs.xamarin.com/ios/Guides/Application_Fundamentals/Building_Cross_Platform_Applications/Sharing_Code_Options](http://docs.xamarin.com/ios/Guides/Application_Fundamentals/Building_Cross_Platform_Applications/Sharing_Code_Options)

# c# - 不可能的 NullReferenceException？

> ID：13060080
> 
> 赞同：32
> 
> 时间：2012-10-25T00:52:36.663
> 
> 标签：c#, nullreferenceexception, mscorlib

我正在调查一位同事在通过 Visual Studio 2010 运行应用程序时遇到的异常：

```
System.NullReferenceException was unhandled by user code
  Message=Object reference not set to an instance of an object.
  Source=mscorlib
  StackTrace:
       at System.Collections.Generic.GenericEqualityComparer`1.Equals(T x, T y)
       at System.Collections.Concurrent.ConcurrentDictionary`2.TryGetValue(TKey key, TValue& value)
       at xxxxxxx.xxxxxxx.xxxxxxx.RepositoryBase`2.GetFromCache(TIdentity id) 
```

使用[.NET Reflector](http://en.wikipedia.org/wiki/.NET_Reflector)，我
`GenericEqualityComparer<T>.Equals(T x, T y)`查看了`NullReferenceException`.

```
//GenericEqualityComparer<T>.Equals(T x, T y) from mscorlib 4.0.30319.269
public override bool Equals(T x, T y)
{
    if (x != null)
    {
        return ((y != null) && x.Equals(y));
    }
    if (y != null)
    {
        return false;
    }
    return true;
} 
```

`T,` `TKey`和的类型在此[堆栈跟踪](http://en.wikipedia.org/wiki/Stack_trace)`TIdentity`中都是相同的类型。

该类型是一种称为`Identity`实现的自定义类型`IEquatable<Identity>`。它是不可变的，不能用它在其实现中使用的字段的空值构造`Equals(Identity other)`。它也像这样覆盖`Equals(object obj)`：

```
public override bool Equals(object obj)
{
    if ((object)this == obj)
    {
        return true;
    }
    return Equals(obj as Identity);
}

public bool Equals(Identity other)
{
    if ((object)this == (object)other)
    {
        return true;
    }
    if ((object)other == null)
    {
        return false;
    }
    if (!FieldA.Equals(other.FieldA))
    {
        return false;
    }
    return FieldB.Equals(other.FieldB);
} 
```

我围绕实现有一套相当详尽的单元测试`Equals`。因此，它会愉快地接受 other/obj 的 null 值并按预期​​返回 false。

该类型既不会覆盖`==`运算符也不会覆盖运算`!=`符。

`Equals(Identity other)`即便如此，如果异常是从我的类的实现中抛出的，我希望在堆栈跟踪顶部看到我的`Identity`类，但它说`NullReferenceException`来自`mscorlib`.

我在 .NET Framework 版本 4.0.30319.269 上运行。

我没有内存转储，我以前没有见过这个，从那以后也没有复制过。尽管如此，我还是有义务进行调查并绝对确定它不是由我们的代码引起的，并且不会在生产中发生。

所以，真正的问题是：是什么导致了这个异常？

*   mscorlib 中的错误（似乎极不可能）
*   机器上的瞬时内存损坏（可能，难以用证据备份）
*   其他？

***响应Jordão的更新***

> 是否可以使用不是身份的对象调用该方法？

的`ConcurrentDictionary<TKey, TValue>`类型是`TKey`=`Identity`并且没有任何子类`Identity`。所以，我看不出这怎么可能。

> 是否可以使用 null 调用该方法？

单元测试涵盖了`Equals`使用 null 调用所有实现的场景。

> 堆栈跟踪来自哪个版本的代码？也许一些旧版本容易受到异常影响？

我正在分析生成异常的相同代码。我检查了我同事计算机上运行的 .NET Framework 的版本也是 4.0.30319.269。

> 任何多线程场景都可能导致异常？这些通常很难重现，但可能值得研究。

是的，代码是多线程的，并且是有意的。所以，这就是我使用`ConcurrentDictionary`.

*** 与 Jalal Aldeen Saa'd 的回应相关的后续行动 ***

我原以为只有在使用“ref”关键字通过引用传递参数时，才会导致其他一些线程设置`x`为的竞争条件。我开始使用以下代码验证该理论：`null``x`

```
ManualResetEvent TestForNull = new ManualResetEvent(false);
ManualResetEvent SetToNull = new ManualResetEvent(false);

[TestMethod]
public void Test()
{
    var x = new object();
    var y = new object();

    var t = Task.Factory.StartNew(() =>
    {
        return Equals(x, y);
    });
    TestForNull.WaitOne(); //wait until x has been tested for null value
    x = null;
    SetToNull.Set(); //signal that x has now been set to null
    var result = t.Result;
    Assert.IsFalse(result);
}

public bool Equals<T>(T x, T y)
{
    if (x != null)
    {
        TestForNull.Set(); //signal that we have determined that x was not null
        SetToNull.WaitOne(); //wait for original x value to be set to null
        //would fail here if setting the outer scope x to null affected
        //the value of x in this scope
        return ((y != null) && x.Equals(y)); 
    }
    if (y != null)
    {
        return false;
    }
    return true;
} 
```

并且测试完成没有错误。

如果我将签名更改为通过`x`并`y`通过引用（即`public bool Equals<T>(ref T x, ref T y) then the test fails with a`NullReferenceException `, but this does not match the method signature of`GenericEqualityComparer.Equals(T x, T y)`），我可以强制执行该行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T11:49:00.070

I'll lay out my hypothesis here.

The stack is leading you to believe that this is where the crash occurs, but it occurs elsewhere. We're looking at the wrong thread.

I don't know if this would be practical, but sometimes good old "printf debugging" helps. What if you print out the value you're looking for before calling `TryGetValue`? You would see whether you strike a null or not.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T00:10:03.600

大约几年前，我在 Equals 中遇到了一个空引用异常（不确定它是在 3.5 还是 4.0 中，或者它是否已修复）。我不清楚在您的情况下正在比较哪些类型，但在我的情况下，每当将泛型方法声明的 MethodInfo 反射对象与任何非 MethodInfo 对象进行比较时，都会发生这种情况...... Ka-boom！因此，如果您要比较反射对象，可能就是这样。如果你不是，那么至少我可以证明在 BCL 中至少有一个 Equals 实现可以在某些情况下无缘无故地抛出空引用异常，所以很可能还有其他的。即使是神圣的 .NET BCL 仍然是软件，所有软件都有错误。

# twitter-bootstrap - Twitter bootstrap typeahead 2.1.1 无法在源代码中设置功能

> ID：13060086
> 
> 赞同：1
> 
> 时间：2012-10-25T00:53:26.113
> 
> 标签：twitter-bootstrap, bootstrap-typeahead

我正在尝试将源设置为预先输入的引导程序，但出现以下错误：

```
typeahead.process is not a function 
```

这是一个说明案例的 jsFiddle：http: [//jsfiddle.net/NCEFR/1/](http://jsfiddle.net/NCEFR/1/)

我在做什么不当？

注意插件的版本是2.1.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T05:43:52.423

来自[预先输入的文档](http://twitter.github.com/bootstrap/javascript.html#typeahead)

> 该函数传递了两个参数，`query`输入字段中的值和`process`回调。该函数可以通过直接返回数据源来同步使用，也可以通过`process`回调的单个参数异步使用。

正确的函数参数：

```
var searchFunction = function(query, process) {  
    var result = "result1::result2".split("::");
    process(result);
} 
```

[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/NCEFR/4/)

# scala - Scala 映射和/或 groupby 函数

> ID：13060090
> 
> 赞同：4
> 
> 时间：2012-10-25T00:53:44.260
> 
> 标签：scala, map, grouping

我是 Scala 的新手，我正在尝试找出一些 scala 语法。

所以我有一个字符串列表。

```
wordList: List[String] = List("this", "is", "a", "test") 
```

我有一个函数，它返回一个包含每个单词的辅音和元音计数的对列表：

```
def countFunction(words: List[String]): List[(String, Int)] 
```

因此，例如：

```
countFunction(List("test")) => List(('Consonants', 3), ('Vowels', 1)) 
```

我现在想获取单词列表并按计数签名对它们进行分组：

```
def mapFunction(words: List[String]): Map[List[(String, Int)], List[String]]

//using wordList from above
mapFunction(wordList) => List(('Consonants', 3), ('Vowels', 1)) -> Seq("this", "test")
                         List(('Consonants', 1), ('Vowels', 1)) -> Seq("is")
                         List(('Consonants', 0), ('Vowels', 1)) -> Seq("a") 
```

我想我需要使用 GroupBy 来做到这一点：

```
def mapFunction(words: List[String]): Map[List[(String, Int)], List[String]] = { 
    words.groupBy(F: (A) => K)
} 
```

我已经阅读了 Map.GroupBy 的 scala api，看到 F 代表鉴别器函数， K 是您想要返回的键的类型。所以我尝试了这个：

```
 words.groupBy(countFunction => List[(String, Int)] 
```

但是，scala 不喜欢这种语法。我尝试为 groupBy 查找一些示例，但似乎对我的用例没有任何帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T02:42:12.660

根据您的描述，您的计数函数应该采用一个单词而不是单词列表。我会这样定义它：

```
def countFunction(words: String): List[(String, Int)] 
```

如果你这样做，你应该能够调用`words.groupBy(countFunction)`，这与：

```
words.groupBy(word => countFunction(word)) 
```

如果您无法更改 的签名`countFunction`，那么您应该可以像这样调用 group by：

```
words.groupBy(word => countFunction(List(word))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T01:34:32.557

您不应该将函数的返回类型放在调用中。编译器可以自己解决这个问题。你应该这样称呼它：

```
words.groupBy(countFunction) 
```

如果这不起作用，请发布您的`countFunction`实施。

**更新：**

我在 REPL 中对其进行了测试，并且可以正常工作（请注意，我`countFunction`的签名与您的签名略有不同）：

```
scala> def isVowel(c: Char) = "aeiou".contains(c)
isVowel: (c: Char)Boolean

scala> def isConsonant(c: Char) = ! isVowel(c)
isConsonant: (c: Char)Boolean

scala> def countFunction(s: String) = (('Consonants, s count isConsonant), ('Vowels, s count isVowel))
countFunction: (s: String)((Symbol, Int), (Symbol, Int))

scala> List("this", "is", "a", "test").groupBy(countFunction)
res1: scala.collection.immutable.Map[((Symbol, Int), (Symbol, Int)),List[java.lang.String]] = Map((('Consonants,0),('Vowels,1)) -> List(a), (('Consonants,1),('Vowels,1)) -> List(is), (('Consonants,3),('Vowels,1)) -> List(this, test)) 
```

您*可以*包含传递给的函数的类型`groupBy`，但就像我说的那样，您不需要它。如果你想传递它，你可以这样做：

```
words.groupBy(countFunction: String => ((Symbol, Int), (Symbol, Int))) 
```

# python - 为什么 Tor 无法访问本地主机页面

> ID：13060096
> 
> 赞同：11
> 
> 时间：2012-10-25T00:54:26.990
> 
> 标签：python, proxy, socks, tor

我有 Tor 运行和一个 python 脚本来获取网页：

```
socks.setdefaultproxy(socks.PROXY_TYPE_SOCKS5, "127.0.0.1", 9050)
socket.socket = socks.socksocket

print urllib2.urlopen(URL).read() 
```

但是，如果 URL 是

```
http://localhost/some_page.html 
```

我收到以下错误：

```
raise Socks5Error(ord(resp[1]),_generalerrors[ord(resp[1])])
TypeError: __init__() takes exactly 2 arguments (3 given) 
```

有人可以向我解释到底发生了什么吗？

谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-25T03:45:47.610

这是协议的设计方式。当您发送请求时，它会通过 Socks5 信封传输到 Internet 上的另一台机器。因此实际请求是从外部服务器发出的，因此无法访问 127.0.0.1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-11T05:30:30.703

您可以在 localhost 中将 Tor 代理与 php 一起使用。使用卷曲。将您的本地 IP 放在 LAN 代理配置“无代理：”上。示例 192.168.1.10。然后将您的 php 称为“ [http://192.168.1.10/your_script.php](http://192.168.1.10/your_script.php) ”

```
$proxy = '127.0.0.1:9150';
$ur = "http://anydomain.com";
$ch = curl_init();

curl_setopt($ch, CURLOPT_PROXY, $proxy);
curl_setopt($ch, CURLOPT_PROXYTYPE, 7);

curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);

    curl_setopt($ch, CURLOPT_URL, $ur);

    $curl_scraped_page = curl_exec($ch);
    $error = curl_error($ch); 
```

# c# - 枚举在 web.config 文件中是如何表示的？

> ID：13060103
> 
> 赞同：5
> 
> 时间：2012-10-25T00:54:59.607
> 
> 标签：c#, configuration, enums

我认为这个问题是微不足道的，枚举只是用一个整数表示，但我很惊讶事实并非如此！这是我所拥有的：

我有一个自定义配置文件，其中包含以下 TraceEventType 属性

```
 [ConfigurationProperty("Severity")]
  public TraceEventType Severity
  {
     get { return (TraceEventType)this["Severity"]; }
     set { this["Severity"] = value; }
  } 
```

在我的配置文件中，我用以下值表示这个属性：

```
 ...
  <FileLog  Filename="Test" 
            Severity="1" /> 
```

结果：我得到了这个：

System.Configuration.ConfigurationErrorsException：无法解析属性“严重性”的值。错误是：枚举值必须是以下之一：Critical、Error、Warning、Information、Verbose、Start、Stop、Suspend、Resume、Transfer。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T01:06:03.307

您应该能够在配置文件中使用枚举值的名称，就像错误消息状态一样。例如：

```
<FileLog Filename="Test" Severity="Verbose" /> 
```

System.Configuration 类将负责为您解析枚举。

# android - 摆脱 wchar_t 大小链接器警告

> ID：13060106
> 
> 赞同：2
> 
> 时间：2012-10-25T00:55:32.887
> 
> 标签：android, linker, android-ndk, wchar-t, linker-warning

我用`-fshort-wchar`. 我知道 RTL 假定为 4 字节 wchar_t，我知道我在做什么，图书馆**工作**。但是，在每个构建链接器上，每个目标文件都会给我以下警告：

> ld.exe：警告：MyFile.o 使用 2 字节 wchar_t 但输出是使用 4 字节 wchar_t；跨对象使用 wchar_t 值可能会失败

当我提供

```
LOCAL_LDLIBS := --no-wchar-size-warning 
```

这给了我一个“无法识别的选项”错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-05T13:09:10.253

至少早在 r7 之前，在 NDK 上添加`APP_LDFLAGS += -Wl,--no-wchar-size-warning`(to ) 对我来说效果很好。`Application.mk`

我认为它的工作方式与以下内容相同：

```
LOCAL_LDLIBS := -Wl,--no-wchar-size-warning 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T03:36:46.017

你见过[这个](http://sourceware.org/ml/binutils/2008-07/msg00125.html)吗？该帖子解释说，该`--no-wchar-size-warning`选项将使链接器将不匹配视为警告，而不是错误。与 enum 的情况一样，作者还是选择显示消息。

您看不到在项目中设置此标志的效果，因为如[其他地方](http://gcc.gnu.org/ml/gcc-patches/2008-07/msg01440.html)所述，使用`-fshort-wchar`自动添加`-Wl,--no-wchar-size-warning`。

# c++ - 将文本字段中的值存储在 .txt 中

> ID：13060110
> 
> 赞同：0
> 
> 时间：2012-10-25T00:56:06.240
> 
> 标签：c++, winapi

我的问题很简单（至少我认为是）。我想从文本输入中捕获一个值并将其存储在一个 txt 文件中。现在我正在使用此代码，操作按钮旨在在单击时将内容写入文件。但是我得到的是在文件中注册的按钮的值。

```
 case WM_CREATE:{
        CreateWindow(
            TEXT("EDIT"), TEXT("value"), 
            WS_VISIBLE | WS_CHILD | WS_BORDER, 
            190, 50, 50, 20,
            hwnd, (HMENU) NULL, NULL, NULL 
        );

        CreateWindow(
            TEXT("BUTTON"), TEXT("Ok"), 
            WS_VISIBLE | WS_CHILD, 
            250, 10, 30, 20,
            hwnd, (HMENU) ID_BTN, NULL, NULL 
        );

        break;
    }

    case WM_COMMAND: {
        if (LOWORD(wParam) == ID_BTN) {
            std::ofstream outfile;
            outfile.open("C:\\file.txt", std::ios_base::app);
            outfile << ID_BTN;
            outfile.close();
            MessageBox(hwnd, "Done!", "Title", MB_ICONINFORMATION);
              return 0;
         }
         break;
    } 
```

谢谢。

* * *

**编辑**：@ZanLynx，我试着按照你所说的去做，但是编译器一直说 hwndText 没有声明，当它是。

```
107 `hwndText' undeclared (first use this function) 
```

这是代码

```
#define ID_BTN 1
#define ID_TXT 2

LRESULT CALLBACK WindowProcedure (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    switch (message)
    {
        case WM_CREATE:
        {

            HWND hwndText = CreateWindow(
                TEXT("Edit"), TEXT("Write here"), 
                WS_VISIBLE | WS_CHILD | WS_BORDER | ES_AUTOHSCROLL | ES_AUTOVSCROLL,  
                190, 10, 100, 20, 
                hwnd, (HMENU) ID_TXT, NULL, NULL
            );

            CreateWindow(
                TEXT("BUTTON"), TEXT("OK"), 
                WS_VISIBLE | WS_CHILD, 
                250, 10, 30, 20,
                hwnd, (HMENU) ID_BTN, NULL, NULL
            );

            break;
        }

        case WM_COMMAND: 
        {

            if (LOWORD(wParam) == ID_BTN) 
            {
                LRESULT iTextSize = SendMessage(hwndText, EM_GETLIMITTEXT, 0, 0);
                char *szText = new char[iTextSize];
                SendMessage(hwndText, WM_GETTEXT, iTextSize, (LPARAM)szText);

                std::ofstream outfile;
                outfile.open("C:\\f.txt", std::ios_base::app);
                outfile << szText;
                outfile.close();

                MessageBox(hwnd, "Done!", "Title", MB_ICONINFORMATION);
                return 0;
            };  

            break;
        }

        case WM_DESTROY:
            PostQuitMessage (0);
            break;

        default:
            return DefWindowProc (hwnd, message, wParam, lParam);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T01:04:24.897

将句柄存储到 EDIT 窗口。

然后，您可以使用[编辑控件](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775458%28v=vs.85%29.aspx)功能获取文本，以便将其写入文件。

# windows-phone-7 - admob广告在windows手机上不刷新

> ID：13060111
> 
> 赞同：5
> 
> 时间：2012-10-25T00:56:09.937
> 
> 标签：windows-phone-7, admob

我已经在我的 windows phone 7 应用程序中实现了 admob。广告显示良好。但由于某些原因，它不会刷新。因此，只要用户使用该应用程序，相同的广告就会一直显示在屏幕上。

我检查了我的 admob 页面，刷新率设置为每 20 秒左右。

有没有人遇到过同样的问题？这是我实现admob的方式：

```
shell:SystemTray.IsVisible="True" xmlns:my="clr-namespace:Google.AdMob.Ads.WindowsPhone7.WPF;assembly=Google.AdMob.Ads.WindowsPhone7"> 
```

和

```
<my:BannerAd AdUnitID="a1508671d491d11" HorizontalAlignment="Left" Margin="0,-15,0,0" Name="bannerAd1" VerticalAlignment="Top" Height="80" Width="480" Grid.ColumnSpan="2" DataContext="{Binding}" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T08:09:36.053

尝试在指定时间间隔后创建新的广告单元。那将是解决此问题的方法，但不是解决方案。

```
 AdView bannerAd = new AdView
            {
                Format = AdFormats.Banner,
                AdUnitID = "MY_AD_UNIT_ID"  // Replace your AD Unit ID 
            };
            bannerAd.ReceivedAd += OnAdReceived;
            bannerAd.FailedToReceiveAd += OnFailedToReceiveAd;
            LayoutRoot.Children.Add(bannerAd);
            AdRequest adRequest = new AdRequest();
            adRequest.ForceTesting = true;
            bannerAd.LoadAd(adRequest); 
```

# javascript - 基于 Select 显示/隐藏表单元素

> ID：13060113
> 
> 赞同：0
> 
> 时间：2012-10-25T00:56:23.663
> 
> 标签：javascript, forms

我正在尝试根据选择显示/隐藏两个元素 - 一个标签和一个使用 Javascript getElementsByName 的输入。如果我在标签和输入上进行更改但由于某种原因 Name 不起作用，它可以与 getElementByID 一起使用。这是代码：

```
<script language="JavaScript" type="text/javascript">
<!--

function Toggle(obj){
 var val=obj.value;
 if (!obj.m){ obj.m=''; }
 if (!obj.m.match(val)){ obj.m+=','+val+','; }
 var hide=obj.m.split(',');
 for (var zxc0=0;zxc0<hide.length;zxc0++){
  if (document.getElementsByName(hide[zxc0])){
   document.getElementsByName(hide[zxc0]).style.display='none';
  }
 }
 var show=val.split(',');
 for (var zxc1=0;zxc1<show.length;zxc1++){
  if (document.getElementsByName(show[zxc1])){
   document.getElementsByName(show[zxc1]).style.display='';
  }
 }
}

//-->
</script> 
```

这里是表单元素：

```
 <div id="styled-select">
            <select name="how" onchange="Toggle(this);" class="dropdown">
                    <option value="Internet Search">Internet Search</option>
                    <option value="Facebook" >Facebook</option>
                    <option value="Twitter" >Twitter</option>
                    <option value="LinkedIN" >LinkedIN</option>
                    <option value="Referral">Referral</option>
                    <option value="Other">Other</option>
            </select>
            </div>                
            <label name="Referral" style="display:none;">Referred By:</label>
            <input name="Referral" style="display:none;" value="" class="hidden-txt"> 
```

当用户选择“推荐”时，它应该显示名为“推荐”的标签和输入。如果我使用 getElementByID，我就有了这个工作，给了选项两个用逗号分隔的值，并为标签和输入使用了单独的 ID。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:18:44.637

```
var elems = document.getElementsByName(hide[zxc0]);
if(elems) {
    for(var i = 0;i < elems.length;i++) {
       elems[i].style.display='none';
       //Do whatever else you need to do with the element.
    }
} 
```

正如 Kevin Boucher 所说，getElementsByName 返回一个数组。假设您想将 display=none 样式应用于具有该名称的所有元素，上面的代码将实现这一点。同样出于性能考虑，上面的代码只调用 document.getElementsByName() 一次，而不是超过 3 次，我相信这将是有益的。

可能值得研究[JQuery](http://api.jquery.com/category/selectors/ "jQuery")，因为它易于选择元素。

# asp.net - asp.net web.config 授权属性在 Visual Studio 中工作，但不适用于发布

> ID：13060116
> 
> 赞同：0
> 
> 时间：2012-10-25T00:56:48.847
> 
> 标签：asp.net, web.sitemap, aspmenu-control

谢谢你的帮助。

**编辑** 这已从最初的问题改变，因为没有发布答案，并且问题更详细地演变

我正在尝试完成一个 asp.net 4.0 Web 应用程序。我正在努力管理基于文件夹的授权。

来自 web.config 的 XML 示例：

```
<location path="~/drugAdmin">
<system.web>
  <authorization>
    <allow roles="drugAdmin" />
    <deny users="*" />
  </authorization>
</system.web>
</location>
<location path="~/wardAdmin">
<system.web>
  <authorization>
    <allow roles="wardAdmin" />
    <deny users="*" />
  </authorization>
</system.web>
</location>
<location path="~/websiteAdmin">
<system.web>
  <authorization>
    <allow roles="websiteAdmin" />
    <deny users="*" />
  </authorization>
</system.web>
</location>
<location path="~/personalAccount">
<system.web>
  <authorization>
    <deny users="?" />
  </authorization>
</system.web>
</location> 
```

当通过 Visual Studio 启动 Web 应用程序时，授权工作得很好。

当我使用相同的 web.config 文件发布到我的机器上的本地目录时，授权只允许匿名用户进入 wardAdmin 和 personalAccount 文件夹（即适用于其他文件夹）。

有没有人遇到过类似的问题并知道解决方案？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:47:21.513

更换波浪号解决了问题

```
<location path="drugAdmin">
<system.web>
  <authorization>
    <allow roles="drugAdmin" />
    <deny users="*" />
  </authorization>
</system.web>
</location> 
```

# javascript - 如何在我的 ERB 模板中使用 Javascript var 值制作 MD5 摘要？

> ID：13060120
> 
> 赞同：3
> 
> 时间：2012-10-25T00:57:26.240
> 
> 标签：javascript, ruby, erb

我需要制作一个签名以作为参数传递给 jQuery `$.post`AJAX 请求，但我有一些值要散列到 Javascript 变量中。有什么办法可以在 ERB 文件中做到这一点？例子：

```
var signature = '<%= Digest::MD5.hexdigest "app_key" + form params + "secret" %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T01:09:34.087

这通常会在客户端完成

```
var signature = md5('app_key' + form_params + 'secret'); 
```

`md5`是来自其他 javascript 库（如[md5.js ）的函数](http://pajhome.org.uk/crypt/md5/md5.html)

# zend-framework2 - 如何以 ZF2 的形式将 id 或 class 属性插入到 select 语句的选项中？

> ID：13060125
> 
> 赞同：0
> 
> 时间：2012-10-25T00:58:01.247
> 
> 标签：zend-framework2, html-select

目前，我在 ZF2 中有这个选择代码。效果很好，没有问题，但是！我想将 id 或 class 属性放入其中一个选项中。ZF2目前有可能吗？

```
 $this->add(
        array(
            'name' => 'number_of_rooms',
            'type' => 'Zend\Form\Element\Select',

            'options' => array(
                'label' => 'Number of Rooms',
                'options' => array(
                    array(
                        'value' => '',
                        'label' => '- number of rooms -',
                        'disabled' => true,
                    ),
                    array(
                        'value' => 'one bedrooms,
                        'label' => '1 Bedrooms',
                    ),
                    array(
                        'value' => 'two bedrooms',
                        'label' => '2 Bedrooms',
                    ),
                    array(
                        'value' => 'three bedrooms',
                        'label' => '3 Bedrooms',
                    ),

                ),
            ),
            'attributes' => array(
                'id'    => 'number_of_rooms',
            ),
        )
    ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:20:46.497

你需要做两件事。首先是编写自己的 SelectElement 扩展[`Zend\Form\Element\Select`](http://framework.zend.com/apidoc/2.0/classes/Zend.Form.Element.Select.html)，然后您还需要编写自己的 ViewHelper 渲染 Select，最简单的扩展[`Zend\Form\View\Helper\FormSelect`](http://framework.zend.com/apidoc/2.0/classes/Zend.Form.View.Helper.FormSelect.html)

使用内置的 Select 唯一有效的选项是：

```
//FormSelect.php #43-48
protected $validOptionAttributes = array(
    'disabled' => true,
    'selected' => true,
    'label'    => true,
    'value'    => true,
); 
```

您可以从上面链接的类中检查这一点。

# java - 方法之间的 Java JDBC 连接共享/中继

> ID：13060126
> 
> 赞同：2
> 
> 时间：2012-10-25T00:58:06.757
> 
> 标签：java, jdbc

我正在开发一个 WebApp，想知道在方法之间共享 JDBC 连接对象是否有任何优点/缺点

所以情况是

*   它是一个 WebApp 和多用户环境（大约 1000 个用户同时使用）
*   我正在使用支持连接池的容器（Weblogic Server）
*   我在 JDBC 调用中使用事务
*   我的大多数 JDBC 调用都是单记录插入/更新，但选择/删除可以批量发生

现在我有两种方法

**方法 1** 打开连接对象一次并在方法间中继它

```
// Just a Pseudo Code

Cn = OpenJDBConnection() // This will open up the  connection 
obj.Task1(Cn, Param1, Param2);
obj.Task2(Cn, Param1, Param2);
obj.Task3(Cn, Param1, Param2);
Cn.close(); 
```

**方法2** 在每种方法中打开和关闭连接

我倾向于方法 1，因为这样我就可以避免一些样板代码。但我不确定它是否是线程安全的？我有一个 100 个连接的池大小，我认为这对于在给定时间活跃的 1000 个用户来说是可以的

在采用其中一种方法之前，我还有什么需要考虑的吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T01:15:06.770

考虑在连接级别管理事务。

对于您的简单用例，方法＃1 可能有效，但很容易陷入这样一种情况，例如，您在连接上有待处理的事务，并调用另一个在同一连接上执行选择的方法，这将导致您要提交的交易（比您预期的要早）。

With properly-configured connection pooling, the overhead of releasing and re-obtaining a connection should be minmal, so I'd suggest approach #2\. When pooled, closing the connection doesn' really close it, it leaves it open and returns it to the pool.

# javascript - 由多个外部元素触发的主干视图

> ID：13060127
> 
> 赞同：1
> 
> 时间：2012-10-25T00:58:13.223
> 
> 标签：javascript, ruby-on-rails, backbone.js, backbone-views, backbone-events

我是 Backbone 的新手，想了解一下我应该如何处理这个问题。我可能在这里没有使用正确的定义 - 提前抱歉！

目前，我有一排元素，每个元素都有一个按钮（我将这些按钮称为按钮 A）。这些行是作为 Rails 部分生成的。该按钮会打开一个弹出框，其中包含一些特定于该信息行的控件。代码方面，每次单击任何按钮 A 时，只有一个弹出框会自行调整 + 信息，它位于 index.html.erb 文件中。

我想将这些代码转换为 Backbone 视图对象 - 但我不知道如何使弹出框视图与多个按钮交互。

解决这个问题的正确方法是为每个按钮创建一个弹出框并让多个弹出视图相互通信吗？什么是正确的方法？

目前，这些元素都不是主干视图对象。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T01:31:51.367

我假设：

*   您指的是模式弹出框，而不是弹出窗口。如果您尝试更改弹出窗口的内容，您只需加载一个显示您期望的数据的新 URL。
*   您的 Rails 模板已经创建了所有 HTML 标记
*   你正在使用 jQuery

**JSFiddle 示例：http: [//jsfiddle.net/4J6fL/](http://jsfiddle.net/4J6fL/)**

第一步是创建一个负责数据列表功能的[Backbone.View实例。](http://backbonejs.org/#View)

```
var DataView = Backbone.View.extend({
    events: {
        // this event will be bound to every button inside our parent element
        "click button": "enlarge"
    },

    enlarge: function(e) {
        // backbone rebinds 'this' to refer to the View. It will not refer to the element 
        // triggering the event as it would in jQuery. Grab a reference to the triggering element.
        $el = $(e.currentTarget);

        // gather the data for our popup window
        var popupData = {
            title: $el.siblings('p').text(),
            img: $el.siblings('img').attr('src')
        };

        this.popup(popupData);
    },

    popup: function(data) {
        // find the view's popup box element - this.$el refers to the views bound DOM element
        var $enlarged = this.$el.find('#enlarged');

        // create new elements based on the data
        var $title = $('<h2 />', { text: data.title });
        var $img = $('<img />', { src: data.img });

        // empty the popup box of current data
        $enlarged.html('');

        // fill the popup box with our new data
        $enlarged.append($title);
        $enlarged.append($img);
    }
}); 
```

此时，我们有一个可以绑定到任何 DOM 元素的视图，并赋予它上述功能。

*   该`events`属性负责将事件回调绑定到视图。
*   请注意`this`回调中的上下文，Backbone 将其绑定到视图，而不是事件。
*   `this.$el`指的是绑定到我们视图的 DOM 元素。你会看到如何做进一步。
*   实际的弹出逻辑是标准的 jQuery DOM 操作。

现在我们有了视图，我们需要初始化并使用它。这是在充当控制器的 Backbone.Router 中完成的：

```
dataView = new DataView({ el: $('#data-view') }); 
```

请注意我们如何传递`el`将绑定到该视图的元素 ()？这就是将 DOM 元素绑定到我们的视图的原因，允许我们在视图中对其进行操作。

下一个合乎逻辑的步骤是将弹出代码分离到另一个视图中，使用[事件](http://backbonejs.org/#Events)来指示何时应该更新。这将使您可以轻松地从页面的其他区域触发弹出窗口。

# algorithm - 在这种情况下如何实现树状数据结构

> ID：13060130
> 
> 赞同：0
> 
> 时间：2012-10-25T00:58:31.343
> 
> 标签：algorithm, perl, tree, perl-data-structures

我有这样的文件

```
A 100 200
A 120 220
B 140 250 
```

另一个文件是这样的

```
A 130 210
A 133 215
B 180 270 
```

然后我必须将第一个文件的每一行与第二个文件的每一行进行比较，并找出哪些行具有相交坐标

输出将是这样的

```
A 100 200 A 130 210
A 100 200 A 133 215
A 100 200 A 180 270 
```

它就像这样。

在我的代码中，它的代码是这样的，我从第一个文件中获取第一行并与第二个文件的所有行进行比较。

所以我想知道如何实现一个树状的数据结构来做到这一点，这样复杂性就会达到对数规模。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T01:06:28.410

您不需要树状数据结构。如果您的文件按第一个坐标排序，您可以在线性时间内轻松完成。只需为您保存当前相关行的每个文件维护一个缓冲区，您只需为两个文件同步推进缓冲区。关键是，与另一个文件的给定行相交相关的行将始终彼此相邻，因此您知道一旦丢弃一行，您就不必再检查它了（因为文件是排序）。

# asp.net-mvc-3 - 仅在提交时进行客户端验证

> ID：13060133
> 
> 赞同：2
> 
> 时间：2012-10-25T00:58:52.807
> 
> 标签：asp.net-mvc-3, validation, client-side

好的，这是一个非常简单的场景，因为我刚开始使用 MVC，所以我无法弄清楚。我创建了一个自定义密码验证器来同时使用客户端和服务器端。与此同时，客户端验证器只检查长度（一旦我让它工作，它会做更多的事情）。服务器端验证工作正常。这是客户端实现

```
$.validator.unobtrusive.adapters.add("password",
    function (options) {
        options.rules['password'] = {};
        options.messages['password'] = options.message;
    }
);
$.validator.addMethod("password", function (value, element, params) {
    if (value.length < 8 || value.length > 15) {
        return false;
    }
    return true;
}); 
```

我只希望在提交表单时触发此验证器。

目前，一旦您开始输入，它就会告诉您密码无效，直到密码满足长度要求。我希望它像我在其他表单字段上使用的标准“必需”验证器一样，它们只在提交表单后验证输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T02:40:01.017

是的，所以我在这里找到了一个类似的问题，其中包含一些关于禁用 keyup 功能的答案：[ASP.net MVC 3 jQuery Validation; 禁用不显眼的 OnKeyUp？](https://stackoverflow.com/questions/8022695/asp-net-mvc-3-jquery-validation-disable-unobtrusive-onkeyup)但我找到了另一种方法，它不涉及编写额外的 javascript 行或关闭所有字段的功能。基本上，我只是更改了`jquery.validation.js`文件中的实际函数来检查调用的属性`nokeyup`，如果找到则返回。您可以在离文件开头不远的地方找到 onkeyup 函数。它最初看起来像这样

```
onkeyup: function(a, b) {
    if ( b.which === 9 && this.elementValue(a) === '' ) {
        return;
    }
    else if ( a.name in this.submitted || a=== this.lastActive ) {
        this.element(a);
    }
}, 
```

所以我把它改成了

```
onkeyup: function (a, b) {
    if (b.which === 9 && this.elementValue(a) === "") { 
        return;
    }
    else if (a.getAttribute('nokeyup')) { // Added this statement
        return;
    } 
    else if ( a.name in this.submitted || a=== this.lastActive ) {
        this.element(a);
    }
}, 
```

在那之后，我所要做的就是将“nokeyup”属性添加到我的文本框中，在提交表单之前我不想触发验证，瞧。

# python - 如何在 Python 的诅咒中获得更多颜色？

> ID：13060139
> 
> 赞同：4
> 
> 时间：2012-10-25T01:00:00.943
> 
> 标签：python, terminal, ncurses

我现在正在为学校做一个项目，我正在使用诅咒。虽然，我对颜色的限制有点失望。colorama 模块有更多颜色，它们在我的终端上工作，所以我知道我的终端有很多颜色。虽然，在诅咒中，我们只有

```
COLOR_BLACK
COLOR_RED
COLOR_GREEN
COLOR_YELLOW
COLOR_BLUE
COLOR_MAGENTA
COLOR_CYAN
COLOR_WHITE 
```

如果那里有更多的颜色，那就太好了。

注意：Colorama 提供 ANSI 转义码，并且不适用于 Curses，所以那里没有捷径。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-01-29T11:57:09.003

curses 中的颜色只是从`0`to的一个数字`curses.COLORS - 1`。您列出的那些只是诅咒为您提供的*命名常量。*

Curses 很好地支持 256 色，但只有***当您的终端***通过`TERM`环境变量将自己标识为支持 256 色的终端时，它才会启用该功能。

虽然大多数现代终端多年来*都*支持 256 色，例如 Gnome Terminal 和 Xterm，但许多仍然没有这样报告。

如果你使用 运行你的程序`env TERM=xterm-256color yourprogram`，curses 将启用 256 色，*只要你的终端确实支持它，它就可以正常工作！*

如果它确实有效，请将您的终端更改为自动`TERM`适当地设置它。

推荐阅读：

[http://blog.sanctum.geek.nz/term-strings/](http://blog.sanctum.geek.nz/term-strings/)

[http://blog.sanctum.geek.nz/256-colour-terminals/](http://blog.sanctum.geek.nz/256-colour-terminals/)

[https://unix.stackexchange.com/a/181766/4919](https://unix.stackexchange.com/a/181766/4919)

[https://askubuntu.com/a/578798/11015](https://askubuntu.com/a/578798/11015)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T22:09:03.510

[Urwid](http://pypi.python.org/pypi/urwid)支持[256 色终端](https://excess.org/urwid/examples.html)：[palette_test.py](http://excess.org/urwid/browser/examples/palette_test.py)。

我推荐它作为 curses 模块的更好替代品（如果使用 curses 模块不是项目的要求）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-10T21:25:26.773

在 GitHub 上有一个免费使用、学习、修改和重新分发高级 GUI 库，位于“ [https://github.com/rigordo959/tsWxGTUI_PyVx_Repository](https://github.com/rigordo959/tsWxGTUI_PyVx_Repository) ”。

它使用“curses”低级 GUI 包在 Python 2x 和 3x 中实现。

您的应用程序可以使用像素模式“wxPython”高级 GUI API 的字符模式子集进行编程。它支持带有键盘和鼠标输入的显示器以及各种终端仿真器，包括彩色 xterms（8 色与 64 色对和 16 色与 256 色对）和非彩色 vt100/vt220。

它包括可以配置多达 256 种诅咒颜色的 Python 模块。然而，curses 不能处理超过 256 个颜色对，这意味着如果应用程序需要处理 256 个颜色对来显示或隐藏文本，则不能超过 16 个颜色。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-04-29T08:38:18.323

[Fabulous](https://pypi.python.org/pypi/fabulous/)包提供 256 色支持，但未链接到 ncurses。虽然，我相信你可以将两者混合使用。

# php - 从文本文件中读取 JSON 数据并输出到数组

> ID：13060143
> 
> 赞同：0
> 
> 时间：2012-10-25T01:00:27.807
> 
> 标签：php, json

> **可能重复：**
> [json_encode 返回 NULL？](https://stackoverflow.com/questions/1972006/json-encode-is-returning-null)

我正在尝试从我的文本文件“signups.txt”中读取 JSON 数据，并且正在使用以下内容。我想从我的文本文件中获取数据并在 foreach 循环中输出数据。到目前为止，这是我的代码，我不是 100% 确定如何去做。

```
$json_data = json_decode(file_get_contents('includes/signups.txt'), true); 
```

**我的数据：**

```
{"name":"John Smith","studentid":"10358595","fbid":"1284556651"} 
```

我在想以下几点：

*   将文件数据作为字符串编码成 JSON 可能吗？

*   使用 'true' 将 JSON 数据放入数组中

*   然后解码以便我可以使用数据

抱歉，我太含糊了，但我似乎无法在网上找到我要找的东西。如果帖子太简短，我深表歉意。我会尽力添加我可能错过的任何内容。谢谢。

**编辑：**就我当前的代码而言，当我 var_dump 时我只是得到 null 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T01:36:18.530

从您的脚本[http://pastebin.com/auGi421u](http://pastebin.com/auGi421u)

它表明您在读取文件时出错，但您不知道，因为您正在输出`print_r($json_data);`而不是`print_r($json_output)`

你可以试试这个

```
error_reporting(E_ALL);
ini_set("display_errors", "On");

$file = 'log.txt';

if (!is_file($file) xor !is_readable($file)) {
    trigger_error("File Not readable");
}

$data = file_get_contents($file);
$data = json_decode($data, true);
var_dump($data); 
```

# api - 如何在 jquery fancybox 插件中调用 jquery ajax？

> ID：13060144
> 
> 赞同：0
> 
> 时间：2012-10-25T01:00:28.493
> 
> 标签：api, jquery, plugins, fancybox

```
$('.more').fancybox({
            openEffect  : 'elastic',
            closeEffect : 'elastic',
            $.ajax({
                url: 'results.php',
                type: 'post',
                success:function(data){
                    $('.result').html(data);
                }
            });
        }); 
```

那是我的代码，我的萤火虫有这个错误：

```
 SyntaxError: missing : after property id
[Break On This Error]   

$.ajax({ 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-11-28T07:17:51.243

我来这里搜索未加载到fancybox 中的ajax 内容。但是，发布的所有者可能已完成此任务。我正在编写解决方案，它可能对其他人有所帮助。

**经过长时间的搜索，我打开了我的 fancybox js 文件并搜索了 oncomplete 或 callback。那里什么都没有。然后我搜索了oncancel，看到了其他的功能，比如aftershow和beforeshow。**

***而不是 oncomplete 我将其更改为 aftershow 并且它立即起作用。aftershow 区分大小写，它的变化取决于您的 fancybox 版本。检查fancybox js以获取更多详细信息***

# python - 如何为 windows 盒子编写安装程序（安装 python、python 模块和其他依赖项）？

> ID：13060146
> 
> 赞同：1
> 
> 时间：2012-10-25T01:00:47.713
> 
> 标签：python, windows, installation, windows-installer

我对这个主题一无所知，但是我需要有关创建安装程序的最佳工具或方法的建议，该程序安装 python、一些自定义 python 模块、一些其他 python 模块（如 PIL）和一些 EXE 依赖项，所有这些都存在于网络存储库中, 在 Windows 机器上。存储库中有 python（msi 文件）、PIL（exe 文件）、自定义 python 模块（pyc 文件）和两个 Windows 可执行文件（以及 exe 文件和一个 zip 文件）的安装程序。欢迎任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T01:23:45.767

您可以使用任何安装程序应用程序来执行此操作。每个依赖安装程序都有一个静默安装选项，因此您的安装程序只需要以正确的顺序为每个依赖项调用安装程序。我不会特别推荐任何 Windows 安装程序应用程序，因为我不喜欢它们中的任何一个，但它们都会做你想做的事。

您拥有的另一个选项是使用 py2exe，它可以将所有内容捆绑到一个在其自己的 python 环境中运行的单个 exe 文件中。这样做的好处是您不必担心在用户环境中安装 Python 并让用户可能卸载 python 然后让您的应用程序停止工作，因为一切都在独立环境中。

我见过的其他方法是使用您喜欢的任何编译的 Windows 语言编写的自定义 exe 为您完成所有这些，但这需要大量工作。

您还可以在使用安装程序应用程序或处理安装的独立 exe 编写的安装程序上进行一些工作，通过手动将 python.exe、dll 和相关代码放置在适当的相对目录中来获得 py2exe 路由的优势到您的应用程序代码。当您的应用程序开始让一切正常运行时，您可能不得不弄乱您的 PYTHONPATH 环境设置，但这样您就不必担心安装 Python 以及用户是否已经安装了 Python 或者他们是否卸载了它，因为那时您有您需要与您的应用程序捆绑在一起的 Python 版本。

需要注意的一件事是，如果您担心 Python 安装程序本身在任何依赖项之前的大小约为 10 MB，但其中很多与使用您的应用程序的最终用户无关，则没有像这样的 Python 运行时环境安装程序一个 Java 运行时环境安装程序，它只安装运行 Python 所需的东西，你总能得到开发工具。

希望这有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T21:08:23.170

很好的回应迈克尔。

但是，py2exe 可能会吓到新手用户，对他们来说，使用 pyinstaller 1.5.1 可能更容易（有 2.x 可用，但它本身过于复杂，尽管它具有简单而强大的库挂钩 [你很可能不会需要]）。

所有 pyinstaller 都需要进行配置（使用 Configure.py 自动配置），以及可执行文件的主要源文件，其余部分将由它负责。

下载pyinstaller后，可以将它的路径设置为环境变量，现在可以在批处理或cmd中大约三行制作一个可执行文件。

我通常会制作一个批处理脚本，让我可以轻松更改一些标签，将脚本放在我选择的目录中，然后一键生成可执行文件。

您的脚本可能类似于：

```
python %pyinstaller%/Configure.py

python %pyinstaller%/Makespec.py -F --icon=C:\Path\To\MyIcon.ico -n ExecutableName 
       C:\Path\To\Source\Main.py

python %pyinstaller%/Build.py ExecutableName.spec 
```

此外，如果在规范文件可用之前调用 Build.py，您可能必须包含一个伪暂停。我把这一行：

```
ping -n 2 127.0.0.1>nul 
```

在每个 %pyinstaller% 命令之间确保在它准备好之前没有调用任何内容，并且因为“暂停”需要一个键输入才能继续。“-n 2”将在继续之前暂停脚本 1 秒钟。

脚本运行后，它将创建两个目录（Build 和 dist）。您的独立可执行文件将位于“dist”文件夹中。

我已经将它用于我的所有应用程序，并且从未遇到过问题，除了与 PyMC 一起使用。这在其中一个模块中有一个垃圾库导入调用，它阻止了所有模块查找器跟随下一次导入，即使 py2exe 也不起作用。如果你遇到这样的事情，你很可能不得不进入模块源代码并修复垃圾。* 对于大多数图书馆来说，这种可能性非常小*

-- 编辑（2 分钟后） --

在发布后重新阅读您的问题后，您似乎需要一个实际的安装程序。

我建议使用 pyinstaller 使您的 python 可执行。创建的 EXE 将包含主脚本中的任何导入，因此您不必在主安装程序中包含 python、PIL、自定义模块的物理安装程序（只要它们在您的脚本中被引用）。现在是有趣的部分：

您将需要安装 InnoSetup。它是一个免费的开源程序，用于为 Windows 开发具有专业外观的安装程序。主安装程序需要一个脚本才能运行。这可能需要对语法进行一些阅读，但我会尽力为您提供 jist。

该脚本的语法与 Pascal 类似，该脚本中通常有 6 个部分在安装程序中使用：

[设置] 、 [文件] 、 [任务] 、 [图标] 、 [运行] 和 [代码]

[Setup] 部分包含有关安装程序的所有基本信息：

```
[Setup]
AppId={{123LKJESA-1441-FAKE-IDNO-THISWONTWRK}
OutputDir=.
OutputBaseFilename=MyInstaller
AppName=ExecutableName
AppVersion=1.0
AppPublisher=YourCompany
AppPublisherURL=http://www.URL.com
AppSupportURL=http://www.URL.com
AppUpdatesURL=http://www.URL.com
DefaultGroupName=A_GroupName
LicenseFile=C:\Path\To\Your\License.txt
DefaultDirName={pf}\MainDirName
WizardImageBackColor=$00001a
SetupIconFile=C:\Path\To\Icon.ico
Compression=lzma
SolidCompression=yes 
```

*   注意：AppID 对您的应用程序是唯一的，如果您创建新版本，此 ID 必须相同，否则安装程序会安装单独的 exe，卸载程序很有可能会崩溃。

此外，DefaultDirName 具有代表 Program Files 的键 {pf}。还有其他可用的位置键，可以在网站文档中找到。

* * *

[文件] - 此部分将包含安装程序所需的所有文件，并且它遵循非常标准的格式。您将需要一个 Source: 和一个 Destination (DestDir:)。其他有用的选项是 CopyMode，它告诉安装程序在重新安装时要做什么，以及 Flags：它提供了更多关于如何处理这个文件的选项。

例子：

```
[Files]
Source: C:\Path\to\my\created\python\executable.exe; DestDir: {app}; CopyMode: alwaysoverwrite;
Source: C:\Path\to\directory\of\files; DestDir: {localapp}; CopyMode: alwaysoverwrite; Flags: recursesubdirs; 
```

*   第一个源 destdir 中的 {app} 键是对应用程序目标的引用。
*   {localapp} 键将存储我给定目录中的所有文件，在用户本地应用程序数据文件中，python 应用程序可以引用该文件。

[任务] 将给用户选项来选择此应用程序的某些任务。在下面的示例中，我希望用户选择是否要拥有桌面图标。

```
[Tasks]
Name: "desktopicon" Description: "{cm:CreateDesktopIcon}"; GroupDescription: "{cm:AdditionalIcons}"; 
```

[Icons] 部分非常不言自明，可以在在线文档中查找（而且这篇文章太长了）

最后是 [代码] 部分

这部分不是完全必要的，因为安装程序将在没有它的情况下以默认模式运行。但是，如果您想创建一个更复杂的安装程序，您可以在这里进行。这是普通程序员可以处理的部分，但如果你有 Pascal 的背景，它会真的很有帮助。在这里，您可以创建自定义窗口，设置 AfterInstall 和 BeforeInstall 检查（例如检查注册表是否已安装某些程序，否则在继续之前启动另一个安装程序）

-- 编辑 2 --

匆忙中，我忘记了 [Run] 部分。[运行] 部分为用户提供了在安装后立即运行应用程序的选项。这是一个示例，它将在最后一页上显示一个复选框，该复选框最初是未选中的，供用户选择是否要运行程序。

```
[Run]
Filename: "{app}\ExecutableName.exe"; Flags: nowait postinstall unchecked 
```

*ReCap：一个好的应用程序和安装程序不应该要求用户安装 python 和使用的单独的库。使用 py2exe 或 pyinstaller 将创建一个独立的可执行文件，因此不需要在最终用户机器上安装这些文件。InnoSetup 将允许您创建安装程序，并将该可执行文件（和任何其他非 python 基本源）放置在所需的位置，以便它可以在您机器上的 .pyc 文件中运行时完全相同。

** 在部署您的应用程序之前，最好在不同的机器上测试您的应用程序和安装程序（或创建虚拟机）。例如。Windows 7 上的 {localappdata} 键指的是“C:\Users\UserName\AppData\Local”，而在 XP 上它指的是“C:\Documents and Settings\UserName\Local”（试图记住我的头顶所以可能是错的）。因此，如果您的程序正在访问用户的本地应用程序数据以存储文件，那么很有可能在 XP 上使用 os.environ['LOCALAPPDATA'] 会破坏路径链接。在 XP 上，InnoSetup 键 {userappdata} 将指向“C:\Documents and Settings\UserName\Application Data”，这是 python os.environ 映射指向的正确方向。使用“{userappdata}\Local”将产生正确的路径。但在 Windows 7 上，{userappdata} 将指向“C:\Users\UserName\AppData\Roaming”。因此，如果应用程序将向后兼容 Windows 版本，您将需要在 [Code] 部分设置一些代码，以确定正确的版本，并在使用哪个键上设置一个布尔标志。

在线文档的 URL 是：

[http://www.jrsoftware.org/ishelp/](http://www.jrsoftware.org/ishelp/)

我希望您（或其他人）觉得这很有用，因为它是一个强大的工具，因为您包含在 [Files] 部分中的所有文件都将打包到独立安装程序中，并出现在您提供的目标位置中。尽管这可能有点冗长，但它应该为您制作可执行文件并使用安装程序打包它提供了一个真正的良好开端。

祝你好运！

# android - 如何构建用户输入的android应用程序？

> ID：13060147
> 
> 赞同：1
> 
> 时间：2012-10-25T01:00:53.387
> 
> 标签：android

我正在寻找有关如何制作类似于日记或日记应用程序的 Android 应用程序的视频教程或书籍。

我似乎找不到（谷歌搜索！！！）除了非常基本的教程之外，我找不到任何东西，比如只用电子邮件表单创建一个像应用程序这样的网站。

有什么可以指导我的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T01:24:26.933

有一个与您正在寻找的非常相似的示例，那就是[记事本教程。](http://developer.android.com/training/notepad/index.html)

通过对本教程的扩展和即兴创作，您可以实现构建类似于日记或日记的应用程序所需的内容。

快乐编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T01:27:10.263

查找完整的教程来构建应用程序并不是您将从中受益的那种学习方式。相反，您想学习基础知识，然后将它们组合在一起以制作您想要的应用程序。

# javascript - 嵌入式视频的结束事件

> ID：13060148
> 
> 赞同：3
> 
> 时间：2012-10-25T01:01:08.097
> 
> 标签：javascript, jquery, html, youtube, vimeo

我正在尝试寻找一种方法来监听从 youtube/metacafe/vimeo 等嵌入的视频的结束/完成事件。我知道这可以通过使用 onStateChange 值为 0 的 youtube API 之类的东西来完成，但我'很好奇它是否可以在不通过 API 的情况下完成。

例如，如果我有类似的东西：

```
<div id="video-container">
    <iframe width="420" height="315" src="http://www.youtube.com/embed/0Bmhjf0rKe8" frameborder="0" allowfullscreen></iframe>
</div> 
```

无论如何我可以在 div 或 iframe 上监听 end 事件吗？

有点像这样： [用于管理 vimeo *和* youtube 视频播放列表的 Javascript 播放器？](https://stackoverflow.com/questions/6682287/javascript-player-for-managing-playlist-of-vimeo-and-youtube-videos) 但我有兴趣添加几个来源，所以如果我不必通过 API 会容易得多。

谢谢-

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-03T19:06:28.923

我认为，这对于 youtube 来说是不可能的。如果您使用自己的 Flash 播放器，这将是可能的。您将能够从您的 Flash 播放器调用自定义 JavaScript 函数。

# struct - 使用 C++ 更改函数中的结构值

> ID：13060151
> 
> 赞同：0
> 
> 时间：2012-10-25T01:01:18.737
> 
> 标签：struct, quadtree

我想在 C++ 中创建一个快速四叉树，但发现当我在函数中更改结构的值时，值会恢复。同样在递归函数中，我不会创建一些全局数据。我该怎么做呢？

```
#include <iostream>

struct a{
    unsigned int value;
    struct a * leaf[4];
};

void build(struct a root, unsigned int depth){

    depth++;

    root.value = 0;

    struct a leaf0;
    root.leaf[0] = &leaf0;
    struct a leaf1;
    root.leaf[1] = &leaf1;
    struct a leaf2;
    root.leaf[2] = &leaf2;
    struct a leaf3;
    root.leaf[3] = &leaf3;

    if (depth != 5) {
        build(*root.leaf[0], depth);
        build(*root.leaf[1], depth);
        build(*root.leaf[2], depth);
        build(*root.leaf[3], depth);
    }
}

int main(int argc, const char * argv[])
{
    struct a root;

    root.value = 364;

    build(root, 0);

    std::cout << root.value;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T01:05:48.893

您必须将结构的地址传递给您的函数（它应该接受指向该结构的指针）：

```
void build(struct a *root, unsigned int depth) {  
  ...
}

int main(int argc, const char * argv[])    
  ...
  build(&root, 0);
} 
```

# testing - 在 Linux 中使用 HtmlUnitDriver 和使用 Xvfb 编写无头测试有什么区别？

> ID：13060157
> 
> 赞同：1
> 
> 时间：2012-10-25T01:01:36.683
> 
> 标签：testing, webdriver, htmlunit, xvfb

我是测试新手。

我在 Linux 上工作。我正在阅读有关在无头模式下进行测试的内容，并遇到了两件事。一种是 X 虚拟帧缓冲区，它在内存中进行图形操作。因此，不显示任何输出。我在这个链接[http://www.seleniumtests.com/2012/04/headless-tests-with-firefox-webdriver.html](http://www.seleniumtests.com/2012/04/headless-tests-with-firefox-webdriver.html)中找到了实现细节。

我遇到的另一个是 HtmlUnitDriver。这也不会在运行测试时打开任何浏览器。我使用 HtmlUnitDriver 编写了一个基本的示例代码，断言似乎工作正常。

我知道 HtmlUnitDriver 不能很好地与 javascript 一起使用。但除此之外，在选择其中一个方面是否有任何重大差异？

我将测试一个确实包含一些 javascript 的 Web 应用程序。

我是这个领域的新手。因此，任何答案、建议等将不胜感激。先感谢您

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T14:39:48.820

根据我对这两种方法的经验：

*   在大多数实际情况下，HtmlUnit 会比带有 xvfb 的真正浏览器更快——仅仅是因为它不花时间渲染页面。（数据点：17 秒。HtmlDriver 与 62 秒。FirefoxDriver 用于我现在正在使用的特定测试套件）。
*   使用 HtmlUnit 同时运行多个测试更容易——而且消耗的资源少得多。如果您有大量测试并且需要它们快速完成（例如，您想遵循 10 分钟构建规则），这可能非常重要。
*   正如您所说，HtmlUnit 在 JavaScript 和 DOM 方面有自己的特点。并不比任何其他浏览器更好或更差（Firefox、Safari、IE、Chrome ......——它们都有自己的怪癖），但花时间修复错误是非常值得怀疑的。我也发现这些错误很难诊断，但这可能只是我的无知。
*   真正的浏览器 + xvfb 的一个优点是，您始终可以在没有 xvfb 的情况下使用完全相同的测试并查看发生了什么——甚至可能使用控制台来运行一些 JavaScript 来诊断问题。在使用 HtmlUnit 时，我有时会感到很盲目，并且由于上述怪癖，您不能总是在两种环境中使用完全相同的测试代码。

因此，总而言之，除非总的测试持续时间很重要并且您准备花一些时间与 HtmlUnit 战斗，否则使用常规浏览器 + xvfb 会更容易。

我也喜欢使用 xvnc，它还有一个额外的好处，就是允许您连接到正在运行的测试的屏幕并查看发生了什么（不确定您是否可以使用 xvfb 来做到这一点）。

# java - JAVA基本迭代器

> ID：13060159
> 
> 赞同：1
> 
> 时间：2012-10-25T01:01:53.057
> 
> 标签：java, iterator

这是我作业的解决方案，目的是根据用户输入的句子来反转字符串中的每个单词。我自己完成了这个，但我只是想知道迭代器在这段代码中是如何工作的。我不明白 tempword = ""; 的声明 以及他如何打印出由空格分隔的每个单词。

```
import java.util.Scanner;

public class StringReverser
{
    public static void main(String args[])
    {
        String sentence;
        String word;
        String tempWord = "";

        Scanner scan = new Scanner(System.in);
        Scanner wordScan;

        System.out.print("Enter a sentence: ");
        sentence = scan.nextLine();

        wordScan = new Scanner(sentence);

        while(wordScan.hasNext())
        {
            word = wordScan.next();

            for(int numLetters = word.length() - 1; numLetters >= 0; numLetters--)
                tempWord += word.charAt(numLetters);

            System.out.print(tempWord + " ");
            tempWord = "";
        }
        System.out.println();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T01:14:17.207

这一点在空格中添加

```
System.out.print(tempWord + " "); 
```

这一点颠倒了它

```
for(int numLetters = word.length() - 1; numLetters >= 0; numLetters--)
            tempWord += word.charAt(numLetters); 
```

该位为下一个字设置

```
tempWord = ""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T01:15:37.487

for 循环向后计数，从单词中最后一个字符的索引到第一个字符（以零为基础的表示法）

print 打印反转的单词+空格（“”），它使用 print 代替 println 的事实是因为 println 会添加一个回车符，将每个单词放在不同的行中。

tempWord = ""; 在每次迭代结束时重置变量，以便可以重用。

# ubuntu - Cron 作业在终端工作，不能单独工作

> ID：13060165
> 
> 赞同：0
> 
> 时间：2012-10-25T01:03:18.157
> 
> 标签：ubuntu, cron, crontab

我每天都在尝试运行一个 cronjob 来备份我的数据库。我通过登录到 root 并执行创建了 cronjob `crontab -e`，然后粘贴到我的命令中：

```
* * * * * /bin/bash -l -c 'cd /var/lib/postgresql && sudo -u postgres pg_dump db_development -O -f "/var/lib/postgresql/backup/db-`date +\%Y-\%m-\%d\\%k:\%M:\%S`.sql"' > /var/lib/postgresql/log/cron.log 2>&1 
```

这非常烦人，因为如果我在终端中使用 postgres 用户或 root 运行该命令，它就可以完美运行。但是，我根本没有从 cronjob 任务中得到任何数据。日志文件为空白，并且从未创建备份文件。

我已经尝试解决这个问题 10 多个小时，但我没有想法。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T01:08:22.917

很可能是环境问题。检查 shell 中的任何数据库环境设置。

您还可以将您的 cron 命令行包装在一个脚本中（并从 cron 调用该脚本）。然后，您最初可以让脚本转储环境（这样您就可以看到缺少的内容），最终让它设置正确的环境。vars 使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T01:09:18.013

虽然您可能在那里遇到环境问题，但这样一个长命令可能最好放在从 cron 调用的单独脚本中。

# ios - SQLite iOS 插入数据

> ID：13060166
> 
> 赞同：1
> 
> 时间：2012-10-25T01:03:26.863
> 
> 标签：ios, sqlite, insert

我试图在我的 sqlite 文件中只插入一个名称。我正在使用此代码，但它不起作用：/

```
-(void)InsertRecords:(NSMutableString *) txt{
    if(addStmt == nil) {
        const char *sql = "INSERT INTO myMovies (movieName)  VALUES(?) ";
        if(sqlite3_prepare_v2(database, sql, -1, &addStmt, NULL) != SQLITE_OK)
            NSAssert1(0, @"Error while creating add statement. '%s'", sqlite3_errmsg(database));
        else
            sqlite3_bind_text(addStmt, 1, [txt UTF8String], -1, SQLITE_TRANSIENT);
    }
    if(SQLITE_DONE != sqlite3_step(addStmt))

        NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(database));
    else
        sqlite3_reset(addStmt);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T05:40:17.270

将您的查询传递给此方法并尝试，

```
-(void)Insertdata:(NSString*)query{

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *databasePath = [documentsDirectory stringByAppendingPathComponent:@"YourDBName.sql"];

    if(sqlite3_open([databasePath UTF8String],&db) == SQLITE_OK)
    {
        NSString *querySQL = [NSString stringWithFormat: @"%@",query];

        char *errmsg=nil;

        if(sqlite3_exec(db, [querySQL UTF8String], NULL, NULL, &errmsg)==SQLITE_OK)
        {
           NSLog(@".. Row Added ..");
        }
    }
    sqlite3_close(db);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-17T04:41:46.327

尝试这个：

```
//save our data
- (BOOL) saveEmployee:(Employee *)employee
{
    BOOL success = false;
    sqlite3_stmt *statement = NULL;
    const char *dbpath = [databasePath UTF8String];

    if (sqlite3_open(dbpath, &mySqliteDB) == SQLITE_OK)
    {
        if (employee.employeeID > 0) {
            NSLog(@"Exitsing data, Update Please");
            NSString *updateSQL = [NSString stringWithFormat:@"UPDATE EMPLOYEES set name = '%@', department = '%@', age = '%@' WHERE id = ?",
                                    employee.name,
                                    employee.department,
                                    [NSString stringWithFormat:@"%d", employee.age]];

            const char *update_stmt = [updateSQL UTF8String];
            sqlite3_prepare_v2(mySqliteDB, update_stmt, -1, &statement, NULL );
            sqlite3_bind_int(statement, 1, employee.employeeID);
            if (sqlite3_step(statement) == SQLITE_DONE)
            {
                success = true;
            }

        }
        else{
            NSLog(@"New data, Insert Please");
            NSString *insertSQL = [NSString stringWithFormat:
                                   @"INSERT INTO EMPLOYEES (name, department, age) VALUES (\"%@\", \"%@\", \"%@\")",
                                   employee.name,
                                   employee.department,
                                   [NSString stringWithFormat:@"%d", employee.age]];

            const char *insert_stmt = [insertSQL UTF8String];
            sqlite3_prepare_v2(mySqliteDB, insert_stmt, -1, &statement, NULL);
            if (sqlite3_step(statement) == SQLITE_DONE)
            {
                success = true;
            }
        }

        sqlite3_finalize(statement);
        sqlite3_close(mySqliteDB);

    }

    return success;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T03:48:54.777

sqlite 的“内存不足”错误通常意味着您正在使用的数据库句柄尚未打开。确保您使用发布的代码中显示`sqlite3_open_v2`的`database`变量进行调用？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T11:00:32.587

好吧，我终于成功了！这是我为每个需要它的人使用的代码：

```
-(void)InsertRecords:(NSMutableString *)txt{

    NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"movieData.sqlite"];
    const char *dbpath = [dbPath UTF8String];
    sqlite3 *contactDB;

    sqlite3_stmt    *statement;

    NSLog(@"%@",dbPath);
    if (sqlite3_open(dbpath, &contactDB) == SQLITE_OK)
    {
        NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO myMovies (movieName) VALUES (\"%@\")", txt];

        const char *insert_stmt = [insertSQL UTF8String];

        sqlite3_prepare_v2(contactDB, insert_stmt, -1, &statement, NULL);
        if (sqlite3_step(statement) == SQLITE_DONE)
        {
            sqlite3_bind_text(statement, 1, [txt UTF8String], -1, SQLITE_TRANSIENT);
        } else {
            NSLog(@"error");
        }
        sqlite3_finalize(statement);
        sqlite3_close(contactDB);
    }
} 
```

# statistics - 在有关输出变量的信息不完整的情况下如何进行线性回归

> ID：13060168
> 
> 赞同：0
> 
> 时间：2012-10-25T01:03:34.570
> 
> 标签：statistics, regression

我需要做一个线性回归 y <- x1 + x2+ x3 + x4 y 是未知的，但是我们有 f(y) 而不是 y，它取决于 y 例如，y 是从 0 到 1 的二项式分布的概率0, 1 而不是 y 我们有 (0 的数量, 1 的数量) out of (0 的数量 + 1 的数量) 实验我应该如何执行线性回归以找到正确的 y 我应该如何考虑提供的信息量表明，对于某些 x1 x2 x3，我们有 n 次实验，这些实验给出了 y 的高置信度值，但对于其他 x1 x2 x3，由于测量次数较少，我们的 y 置信度值较低

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T01:05:25.723

对于未知变量 y，听起来您需要类似[BUGS （使用 Gibbs 采样的贝叶斯推理）之类的东西。](http://www.mrc-bsu.cam.ac.uk/bugs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T14:19:06.590

听起来您可能要求进行[逻辑回归](http://en.wikipedia.org/wiki/Logistic_regression)。

# python - 使用 pygame 处理 Python 矩形碰撞

> ID：13060170
> 
> 赞同：4
> 
> 时间：2012-10-25T01:03:39.627
> 
> 标签：python, pygame, collision

在过去的几天里，我一直在对这个主题进行广泛的研究，但我似乎无法为我的确切问题找到答案。

所以，我有一个简单的游戏设置，我的玩家在 0, 0，宽度为 10x10

```
 player= pygame.Rect(0, 0, 10, 10) 
```

除此之外，玩家的速度为 x: 0, y: 10，这将使他跌倒（y 为正，因为屏幕的原点在左上角。）

我在 0、100 处有一个图块，如图所示：

```
 dirt= pygame.Rect(0, 100, 10, 10) 
```

所以，我该如何*处理*碰撞，我已经知道我可以用 Rect.colliderect(Rect) 来检测它。

我尝试了几种方法，但遇到了一些问题：

当玩家击中某物时，我无法将玩家的速度降至 0，然后将他向后移动，直到他刚刚接触到物体，因为这仍然会导致行走问题，当他行走时，我在 x 上应用 +10 速度，但不幸的是，游戏仍在处理他正在坠落、碰撞*和*侧向移动，所以它只是将他移回他开始的地方。

我是一个初学者，所以一个简单的答案将不胜感激，如果我不需要，我希望*不必*使用pygame 以外的*任何*第三方模块。

**更新：**

这是我尝试过的一些粗略测试代码：

```
 def sim(obj, time, world):
        time= time / 1000
        obj.physProp['vel']= (obj.physProp['vel'][0] + (accel[0] * time), obj.physProp['vel'][1] + (accel[1] * time))
        if obj.physProp['vel'][1] > terminalY:
            obj.physProp['vel']= (obj.physProp['vel'][0], terminalY)
        obj.pos= (obj.pos[0] + (obj.physProp['vel'][0] * time) + ((accel[0] / 2) * (time ** 2)), obj.pos[1] + (obj.physProp['vel'][1] * time) + ((accel[1] / 2) * (time ** 2)))

        for ID in world:
            if obj.getRect().colliderect(world[ID].getRect()) == True:
                pass

        return (obj.pos, obj.physProp['vel']) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T05:36:16.537

拆分 x/y 运动。

移动 x，检查是否碰撞，如果是，则向后移动并将 xspeed 设置为 0。

移动 y，检查是否碰撞，如果是，则向后移动并将 yspeed 设置为 0。

这确实意味着每一步进行两次碰撞检查，但它非常流畅。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T01:15:29.187

Pygame API 邀请您以面向对象的方式编写所有游戏主题——这样你的坠落角色将拥有所有“方法”和“属性”来正确响应场景中的事物——比如击中某物。

所以，如果你的角色被定义为简单的东西：

```
class Char(object):
    # these start as class attributes, 
    # but whenever they are assigned to with a "self.var = bla" in
    # a method, an instance attribute starts existing
    x, y = 0,0
    vx, vy = 0,0

    def update(self):
        self.x += self.vx
        self.y += self.vy 
```

而您的外部代码，在检测到碰撞时，可以这样做：

```
def mainloop():
   while True:
       ...
       obj.update()
       if obj.getRect().colliderect(world[ID].getRect()): # don't do "== True" in `if's - it is just silly
             # take character back to the precious position
             obj.x -= obj.vx
             obj.y -= obj.vy
             # zero out velocities to make it stop:
             obj.vx = obj.vy = 0 
```

依此类推——你很快就会认为你的游戏“事物”被认为是“对象”，因为它们在编程中使用它们使代码非常自然地流动——一旦你了解了它的工作方式，看看 Pygame 的 sprite 模块——它允许您可以自动执行大量检查和更新，而无需`for`为每次检查显式编写循环

# meteor - 在 Meteor 中执行 DOM 操作的正确方法是什么？

> ID：13060173
> 
> 赞同：2
> 
> 时间：2012-10-25T01:03:57.283
> 
> 标签：meteor

我正在使用一个名为 Timeline 的包

[https://github.com/VeriteCo/TimelineJS](https://github.com/VeriteCo/TimelineJS)

它通过有一个占位符来工作，例如

```
<div id="my-timeline"></div> 
```

然后最终进行 jQuery 调用来操作 div。在视觉上，我看到时间线出现在屏幕上，然后几乎立即消失。以下简单示例会产生类似的效果：

```
<div id="my-temp"></div> 
```

结合

```
$(document).ready(function() {
    $('#my-temp').html('HELLO');
}); 
```

在不让结果 HTML 消失的情况下执行此类操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T00:30:47.647

我相信您应该使用[恒定区域](http://docs.meteor.com/#constant)来防止 Meteor 重新渲染您的 div。

```
{{#constant}}
    <div id="my-temp"></div> 
{{/constant}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T05:57:16.983

使用 Handlebars 模板，不要使用 jQuery 的 dom 操作。如果您必须使用 javascript dom 操作，请确保使用`Meteor.render()`.

[http://docs.meteor.com/#meteor_render](http://docs.meteor.com/#meteor_render)

您还需要在 Template.myTemplate.rendered 中调用您的时间线创建代码

[http://docs.meteor.com/#template_rendered](http://docs.meteor.com/#template_rendered)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-01T14:23:24.757

正如哈利所说，流星渲染是正确的方法。这是新文档的链接 [http://blazejs.org/api/templates.html#Template-onRendered](http://blazejs.org/api/templates.html#Template-onRendered)

# sql - MS Access SQL 查询 - 显示某一年的订单总数

> ID：13060176
> 
> 赞同：1
> 
> 时间：2012-10-25T01:04:14.950
> 
> 标签：sql, ms-access

SQL 似乎比我预期的要复杂。我的问题：对于每个客户，我想显示客户 ID 和 2011 年的订单总数。

我的桌子看起来像这样

```
Table: Order_t
Order_ID    Order_Date    Customer_ID
--------    ----------    -----------
1001        10/21/2011    1
1002        10/25/2011    8
1003        10/26/2011    15
1004        10/27/2011    5
1005        11/24/2011    3
1006        11/27/2011    2
1007        11/28/2011    11
1008        12/3/2011     12
1009        12/5/2011     1
1010         1/16/2012    4 
```

我希望我的查询显示如下表格：

```
Customer_ID    Orders_Placed
-----------    -------------
1              2
2              1
3              1
5              1
8              1
11             1
12             1
15             1 
```

我当前的查询是这样的（我目前完全忽略了 Date 部分，因为我什至还没有弄清楚分组：

```
SELECT Customer_ID, SUM(Order_ID) AS Orders_Placed
FROM Order_t
GROUP BY Order_ID, Customer_ID 
```

这是我明显错误的查询：

```
Customer_ID    Orders_Placed
-----------    -------------
1              1001
8              1002
15             1003
5              1004
3              1005
2              1006
11             1007
12             1008
1              1009
4              1010 
```

感谢您的帮助，但我也想了解我的逻辑问题出在哪里。我似乎不明白哪个关键部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T01:09:48.563

你的逻辑问题是这样的

```
GROUP BY Order_ID, Customer_ID 
```

这意味着 (Order_ID, Customer_ID) 的每个组合都放在不同的 GROUP 中。由于 Order_ID 单独是唯一的，因此实际上不会发生分组。

要正确执行此操作，您需要按 Customer_ID 分组（它看起来像您需要的，不是吗），然后`COUNT`是订单。最后，还要添加日期过滤器。

```
SELECT Customer_ID, COUNT(Order_ID) AS Orders_Placed
FROM Order_t
WHERE Order_Date >= #1/1/2011# and Order_Date < #1/1/2012#
GROUP BY Customer_ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T01:06:02.123

`count()`改为使用

```
SELECT Customer_ID, COUNT(Order_ID) AS Orders_Placed
FROM Order_t
GROUP BY Customer_ID 
```

# cytoscape.js - 为 cytoscape.js 强制导向布局设置随机种子？

> ID：13060179
> 
> 赞同：4
> 
> 时间：2012-10-25T01:04:24.903
> 
> 标签：cytoscape.js

在 cytoscape.js 2.0.0beta1 中，是否可以让乔木布局产生确定性的结果？我希望能够将其使用的随机种子设置为固定数字。

我的示例代码在这里： http: [//www.strgen.org/~jmc/cs2/ppi1.html](http://www.strgen.org/~jmc/cs2/ppi1.html)

如果您重新加载它，您会注意到每次加载页面时节点可能会以非常不同的布局结束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:55:45.763

我不认为 arbor 提供了一个选项，所以我认为如果不首先对 arbor 本身进行重大修改，这是不可能的。

# sencha-touch-2 - 如何将 UI“缩放”到可读大小

> ID：13060182
> 
> 赞同：0
> 
> 时间：2012-10-25T01:04:26.537
> 
> 标签：sencha-touch-2, sencha-touch-theming

当我在设备上显示我的应用程序时，字体、图标和按钮小得无法使用。在平板电脑上尤其如此。

如何轻松扩展所有 UI 组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T14:33:16.970

确保您的应用程序 html 文件中包含以下元标记：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"> 
```

如果您仍然觉得按钮和文本太小（这应该是个人喜好），您可以随时尝试更改 css。像这样添加新规则：

```
body {
    font-size: 140% !important; //I believe 114% is default
} 
```

希望能帮助到你。

# c# - 列表 获取正在执行的块编号

> ID：13060201
> 
> 赞同：1
> 
> 时间：2012-10-25T01:06:29.830
> 
> 标签：c#, linq

我将列表分成块并按如下方式处理：

```
foreach (var partialist in breaklistinchunks(chunksize))
{
  try
   {
       do something
  }
catch
{
print error
}

}

public static class IEnumerableExtensions
    {
        public static IEnumerable<List<T>> BreakListinChunks<T>(this IEnumerable<T> sourceList, int chunkSize)
        {
            List<T> chunkReturn = new List<T>(chunkSize);
            foreach (var item in sourceList)
            {
                chunkReturn.Add(item);
                if (chunkReturn.Count == chunkSize)
                {
                    yield return chunkReturn;
                    chunkReturn = new List<T>(chunkSize);
                }
            }
            if (chunkReturn.Any())
            {
                yield return chunkReturn;
            }
        }
    } 
```

如果有错误，我希望再次运行该块。是否可以找到我们收到错误的特定块号并再次运行？批次必须按顺序执行。因此，如果批次#2 产生错误，那么如果再次失败，我需要能够再次运行 2。我只需要永远退出循环。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T01:17:17.190

```
List<Chunk> failedChunks = new List<Chunk>();
foreach (var partialist in breaklistinchunks(chunksize))
{
    try
    {
        //do something
    }
    catch
    {
        //print error
        failedChunks.Add(partiallist);
    }

}

// attempt to re-process failed chunks here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T02:41:50.170

我根据[您](https://stackoverflow.com/questions/13060201/listtget-chunk-number-being-executed#comment17738288_13060407)对[Aaron's answer](https://stackoverflow.com/a/13060407/117870)的评论提出这个答案。

> 批次必须按顺序执行。因此，如果 2 有问题，那么如果再次失败，我需要能够再次运行 2。我只需要永远摆脱困境。

```
foreach (var partialist in breaklistinchunks(chunksize))
{
    int fails = 0;
    bool success = false;

    do
    {
        try
        {
            // do your action
            success = true; // should be on the last line before the 'catch'
        }
        catch
        {
            fails += 1;
            // do something about error before running again
        }
    }while (!success && fails < 2);

    // exit the iteration if not successful and fails is 2
    if (!success && fails >= 2)
        break;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T01:37:05.660

如果您不介意从 Enumerable 切换到 Queue，我为您提供了一个可能的解决方案，考虑到要求，哪种适合...

```
void Main()
{
    var list = new Queue<int>();
    list.Enqueue(1);
    list.Enqueue(2);
    list.Enqueue(3);
    list.Enqueue(4);
    list.Enqueue(5);

    var random = new Random();

    int chunksize = 2;
    foreach (var chunk in list.BreakListinChunks(chunksize))
    {
        foreach (var item in chunk)
        {   
            try
            {           
                if(random.Next(0, 3) == 0) // 1 in 3 chance of error
                    throw new Exception(item + " is a problem");
                else
                    Console.WriteLine (item + " is OK");
            }
            catch (Exception ex)
            {
                Console.WriteLine (ex.Message);
                list.Enqueue(item);
            }
        }
    }
}

public static class IEnumerableExtensions
{   
    public static IEnumerable<List<T>> BreakListinChunks<T>(this Queue<T> sourceList, int chunkSize)
    {
        List<T> chunkReturn = new List<T>(chunkSize);
        while(sourceList.Count > 0)
        {
            chunkReturn.Add(sourceList.Dequeue());
            if (chunkReturn.Count == chunkSize || sourceList.Count == 0)
            {
                yield return chunkReturn;
                chunkReturn = new List<T>(chunkSize);
            }       
        }
    }
} 
```

输出

```
1 is a problem
2 is OK
3 is a problem
4 is a problem
5 is a problem
1 is a problem
3 is OK
4 is OK
5 is OK
1 is a problem
1 is OK 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T02:45:42.953

`break`一旦块失败两次，您就可以使用退出循环：

```
foreach (var partialList in breaklistinchunks(chunksize))
{
    if(!TryOperation(partialList) && !TryOperation(partialList))
    {
        break;
    }
}

private bool TryOperation<T>(List<T> list)
{
    try
    {
        // do something
    }
    catch
    {
        // print error
        return false;
    }
    return true;
} 
```

您甚至可以使用 LINQ 将循环变成单线，但是将 LINQ 与副作用结合起来通常是不好的做法，而且它的可读性也不是很好：

```
breaklistinchunks(chunksize).TakeWhile(x => TryOperation(x) || TryOperation(x)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T01:12:12.107

一种可能性是使用 for 循环而不是 foreach 循环，并使用计数器作为确定错误发生位置的方法。然后你可以从你离开的地方继续。

# javascript - 原型与扩展对象

> ID：13060205
> 
> 赞同：1
> 
> 时间：2012-10-25T01:07:28.113
> 
> 标签：javascript, inheritance, prototype

未能有效地实现难以捉摸的原型概念，我发现自己扩展了这样的对象：

```
function BaseObj(propertyA){
    var obj = {
        baseProperty: propertyA,
        baseMethod: function(){ 
            //doStuff.. 
        }
    return obj;
}

function BiggerObj(propertyA, propertyB){
    var obj = BaseObj(propertyA);
    obj.anotherProperty = propertyB;
    obj.anotherMethod = function(){ 
        //doOtherStuff.. 
    };
} 
```

这种扩展对象的方式非常舒服，我开始得到这种继承层次的长链。我对那些了解原型模型的人的问题是：处理原型链和扩展对象（如上述方法）之间是否存在核心区别？
你可以用原型做一些你不能像这样做的事情吗？

# android - Android 实例化一个虚拟的 PendingIntent

> ID：13060212
> 
> 赞同：3
> 
> 时间：2012-10-25T01:09:59.343
> 
> 标签：android, android-intent, android-service, android-notifications, android-pendingintent

我有一个 Android 库，它有一个`Service`创建`Notification`. 据我了解，`Notification`必须设置`contentIntent`( `PendingIntent`) 否则将引发运行时异常。

问题是我希望用户能够按`Service`原样使用它，或者扩展它，以便他们可以`PendingIntent`在创建`Notification`. 但是，如果他们选择不这样做，我需要将其设置`PendingIntent`为某些东西，以免出现异常。有什么方法可以创建一个`PendingIntent`仅充当填充的假人吗？

以下是该方法的代码示例`createNotification`：

```
PendingIntent p;
if(getPendingIntentCallback != null) {
    p = getPendingIntentCallback.getPendingIntent();
}
else {
    p = ?;
}
notification.contentIntent = p; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T06:50:55.943

```
PendingIntent pi=PendingIntent.getBroadcast(this, 0, new Intent("DoNothing"), 0); 
```

这对我有用。它将启动“DoNothing”动作的广播。我希望没有人会听“DoNothing”广播并做一些事情作为对它的反应。但如果你愿意，你可以构建一些更奇特的东西。注意：我只是将其用作临时占位符。我将用对用户更有用的东西来代替它，因为我将在我的应用程序开发中取得进展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T02:09:16.573

通知需要有某种与之相关的动作。当应用用户点击通知时，您必须告诉 android 该怎么做。如果没有定义 contentIntent，让你的库失败会让你的库用户知道他们错过了一个非常重要的步骤。

您可以在创建通知之前检查待处理的意图。

```
if(getPendingIntentCallback != null) {
    p = getPendingIntentCallback.getPendingIntent();
    // create a notification

}
else {
    //don't create a notification
    Log.d("Notification", "Your notification was not created because no pending intent was found");
} 
```

或者要回答您提出的问题，您可以创建一个虚拟的待处理意图，执行一些任意操作，例如进入主屏幕。

请参阅此线程： [如何在 Android 中以编程方式启动主屏幕](https://stackoverflow.com/questions/4756835/how-to-launch-home-screen-programmatically-in-android)

# windows - VBScript-单行作为管理员

> ID：13060215
> 
> 赞同：2
> 
> 时间：2012-10-25T01:10:05.160
> 
> 标签：windows, vbscript, administrator

是否可以使用 shell.run 命令以管理员身份运行指定的程序？

例如：

```
shell.run(cmd.exe) <---Run this as admin
shell.run(Notepad) <---Run this as normal 
```

我知道我可以执行脚本以管理员身份运行，但这意味着该脚本中的所有内容都以管理员身份执行。

我的另一个选择是分离脚本并以管理员身份运行一个脚本，并在该脚本中包含需要以管理员身份运行的内容，然后调用另一个脚本以正常运行和运行该脚本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T01:20:28.157

```
Set oShell = CreateObject("Shell.Application")
oShell.ShellExecute "cmd.exe", , , "runas", 1
oShell.Run "nodepad.exe" 
```

（来源：[http](http://social.technet.microsoft.com/Forums/eu/ITCG/thread/310e57f9-2367-4293-9f97-53d0e077aacc) ://social.technet.microsoft.com/Forums/eu/ITCG/thread/310e57f9-2367-4293-9f97-53d0e077aacc ）

（更多信息：[http](http://ss64.com/vb/shellexecute.html) ://ss64.com/vb/shellexecute.html ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T01:13:56.690

Windows（至少从 XP 到 Win7）有一个`runas`命令可以满足您的需要。有关详细信息，请参见[此处](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/runas.mspx?mfr=true)。

因此，`cmd.exe`您可以运行`runas.exe`，而不是运行，`cmd.exe`作为要运行的程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-01T23:41:11.747

试试这个：

```
Dim ObjShell
Set ObjShell = CreateObject ("WScript.Shell")
ObjShell.Run "runas /K (command goes here) "
ObjShell.Run "notepad.exe" 
```

# cookies - 在我的域上设置 cookie 的一种易于扩展的方法是什么？

> ID：13060228
> 
> 赞同：0
> 
> 时间：2012-10-25T01:11:56.657
> 
> 标签：cookies, scalability, session-cookies, varnish, varnish-vcl

我正在尝试进行一些简单的 cookie 跟踪，并且需要找到一种易于扩展的方式来设置 cookie。设置只需要设置一个cookie，不需要服务器端逻辑，不需要唯一性或令牌。像“HAS_VISITED=true;”这样简单的东西 是我真正需要的。是否有一些云服务可以做到这一点？我需要它在我的域上，所以我真的不能让另一个域做到这一点。我已经研究了 Varnish 来设置 cookie，但这意味着我需要设置一个可以扩展的服务器。规模可能非常大（> 4k 请求/秒），所以我真的不相信自己能够真正自信地设置负载均衡器/EC2 配置。

我真的希望有人已经解决了这个问题。如果没有服务可以做到这一点，那么最便宜的设置（CPU/资源方面）是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T07:10:16.657

You can do only with Varnish, you need something like this:

```
set req.http.Cookie = "HAS_VISITED=true;"; 
```

# android - admob 广告浪费空间

> ID：13060236
> 
> 赞同：0
> 
> 时间：2012-10-25T01:12:33.680
> 
> 标签：android, android-layout, admob

在底部或顶部或其他地方留 50dp 空间用于仅在用户可以访问互联网时显示的广告并不是一个好主意。

当那里留有空白时，我的应用程序 UI 看起来不太好。只有在广告出现时才能真正做到喜欢，然后才能推送其他元素？

我尝试对广告应用填充，但它不起作用..我在底部只有几个按钮可以点击，所以你知道如果有广告为什么会有很多空白区域会很奇怪..

救命，救命，我最后的关心，完成我的应用程序~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:50:39.317

将广告的高度指定为`WRAP_CONTENT`而不是`50dp`。在返回广告之前，`AdView`不会占用任何空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:49:00.497

您的设备肯定没有连接到互联网。您应该检查是否有互联网连接。而且您应该决定是否让用户使用您的应用，因为您知道您不会从该用户那里获得任何收入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T05:03:32.780

是的，不指定 adView Layout 的静态高度，将其设置为**WRAP_CONTECT**。

也做一件事，正如你所说，如果没有互联网连接，那么空白空间看起来不太好。所以在你的java代码中。检查互联网连接，如果它可用，那么不要做任何事情，如果它可用，那么即使互联网不可用，你也会在该位置静态放置另一个布局以获得漂亮的外观。

希望你明白我的意思。

如果有任何疑问，请评论我。

继续编码。:)

# python - 如何在 Python 中加快我的 sqlite3 查询？

> ID：13060237
> 
> 赞同：1
> 
> 时间：2012-10-25T01:12:34.333
> 
> 标签：python, sqlite

我有一个有几亿行的 sqlite 表：

```
sqlite> create table t1(id INTEGER PRIMARY KEY,stuff TEXT ); 
```

我需要通过它的整数主键来查询这个表数亿次。我的代码：

```
conn = sqlite3.connect('stuff.db')
with conn:
    cur = conn.cursor()
    for id in ids:
        try:
            cur.execute("select stuff from t1 where rowid=?",[id])
            stuff_tuple = cur.fetchone()
            #do something with the fetched row
        except:
            pass #for when id is not in t1's key set 
```

在这里，ids 是一个可能包含数万个元素的列表。形成 t1 并没有花费很长时间（即每秒插入约 75K 次）。以我的方式查询 t1 速度慢得令人无法接受（即 10 秒内约 1K 次查询）。

我对 SQL 完全陌生。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T06:26:12.390

由于您通过键检索值，因此在这种情况下，键/值存储似乎更合适。关系数据库（包括 Sqlite）绝对是功能丰富的，但您无法击败简单的键/值存储的性能。

有几种可供选择：

*   [Redis](http://redis.io/)：“高级键值存储”，非常快，针对内存操作进行了优化
*   [Cassandra](http://cassandra.apache.org/)：极高的性能、可扩展性，被多个知名站点使用
*   [MongoDB](http://www.mongodb.org/)：功能丰富，试图成为关系和 NoSQL 之间的“中间地带”（他们已经开始提供[免费的在线课程](https://education.10gen.com)）

还有[很多很多](http://en.wikipedia.org/wiki/NoSQL#Key.E2.80.93value_store)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T04:08:47.513

您应该改为进行一次 sql 调用，应该更快

```
conn = sqlite3.connect('stuff.db')
with conn:
    cur = conn.cursor()

    for row in cur.execute("SELECT stuff FROM t1 WHERE rowid IN (%s)" % ','.join('?'*len(ids)), ids):
        #do something with the fetched row
        pass 
```

您不需要尝试，除非数据库中没有的 id 不会显示。如果您想知道结果中没有哪些 id，您可以执行以下操作：

```
ids_res = set()
for row in c.execute(...):
    ids_res.add(row['id'])
ids_not_found = ids_res.symmetric_difference(ids) 
```

# ruby - 我可以在 Ruby 中动态调用数学运算符吗？

> ID：13060239
> 
> 赞同：7
> 
> 时间：2012-10-25T01:12:55.853
> 
> 标签：ruby, reflection, metaprogramming

红宝石中有这样的东西吗？

```
send(+, 1, 2) 
```

我想让这段代码看起来不那么多余

```
if op == "+"
  return arg1 + arg2
elsif op == "-"
  return arg1 - arg2
elsif op == "*"
  return arg1 * arg2
elsif op == "/"
  return arg1 / arg2 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-25T01:16:02.027

是的，只需像这样使用[`send`](http://ruby-doc.org/core/Object.html#method-i-send)（或者，更好的是[`public_send`](http://ruby-doc.org/core/Object.html#method-i-public_send)）：

```
arg1.public_send(op, arg2) 
```

这是因为 Ruby 中的大多数运算符（包括`+`、`-`、`*`、`/`等）[只是](http://phrogz.net/programmingruby/language.html#table_18.4)简单地调用方法。所以`1 + 2`是一样的`1.+(2)`。

`op`如果是用户输入，您可能还希望将其列入白名单，例如`%w[+ - * /].include?(op)`，否则用户将能够调用任意方法（这是一个潜在的安全漏洞）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-23T19:00:53.097

作为另一种选择，如果您的运算符和操作数恰好是字符串格式，例如从`gets`方法中，您还可以使用`eval`：

例如：

`a = '1'; b = '2'; o = '+'`

`eval a+o+b`

变成

`eval '1+2'`

返回`3`

# nstableview - NSTableView 不交替颜色

> ID：13060240
> 
> 赞同：0
> 
> 时间：2012-10-25T01:13:27.067
> 
> 标签：nstableview, highlight, xcode4.5

我在 10.7 上使用 Xcode 4.5.1，刚刚开始。

我想在我的表格视图中交替使用彩色行，并且很高兴看到似乎可以打开此功能的复选框。

I notice that while the table view is selected, the graphics show as alternating, but as soon as the table is unselected, it reverts to white. 我试图通过检查和保存来“玩耍”，但无济于事。有没有办法以编程方式强制占用（或所有）行在运行时交替，而不是依赖错误复选框？这是一个已知的错误？我还注意到，如果在桌子上（从另一个窗口上方）投下阴影，那么交替的行很明显......这是一个线索吗？我也可以在 Xcode 的变量窗格中看到这种效果，因此它出现在 Xcode 本身中，而不仅仅是创建的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:23:56.060

是的，这是我的线索......当桌子处于阴影中时，突出显示复选框开始发挥作用。这里的许多“交替行”问题解决了我最初希望做的事情。

# c# - 在动态创建的 WPF 数据网格中将自定义模板分配给 DateCells

> ID：13060241
> 
> 赞同：1
> 
> 时间：2012-10-25T01:13:29.130
> 
> 标签：c#, wpf, datetime, datagrid, format

我一直在研究这个问题，但我无法弄清楚:(我有一个动态填充数据的数据网格。有时数据是日期/时间的形式。

现在，我需要做两件事：

1- 删除时间并仅显示日期（例如 6/1/2019 12:00:00 AM ---> 6/1/2019）

2-单击它时在单元格上显示日期选择器。

我搜索了解决方案，大多数解决方案都是针对静态数据网格的。

我尝试了资源方法，但没有成功。

感谢您的所有帮助

我的数据网格中的日期列示例：

![我的数据网格中的日期列示例](../Images/e33e00cf2d35de910cdd4105904281db.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T01:37:20.803

大概是这样的吧？

```
namespace WpfApplication {

    public class Thing
    {
        public string Name { get; set; }
        public DateTime Date { get; set; }
    }

    public partial class MainWindow : Window
    {
        public MainWindow() {
            InitializeComponent();
            DataContext = new Thing[] {new Thing {Name = "A", Date = DateTime.Today}};
        }

        private void DataGrid_AutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e) {
            if (e.PropertyName == "Date")
            {
                var templateColumn = new DataGridTemplateColumn();
                templateColumn.Header = "Date";
                templateColumn.CellTemplate = (DataTemplate) Resources["DateTemplate"];
                templateColumn.CellEditingTemplate = (DataTemplate) Resources["DateEditTemplate"];
                e.Column = templateColumn;
            }
        }
    }
}

<Window x:Class="WpfApplication.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <DataTemplate x:Key="DateTemplate">
            <TextBlock Text="{Binding Date, StringFormat='d'}" />
        </DataTemplate>
        <DataTemplate x:Key="DateEditTemplate">
            <DatePicker SelectedDate="{Binding Date, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
        </DataTemplate>
    </Window.Resources>
    <Grid>
        <DataGrid AutoGenerateColumns="True" ItemsSource="{Binding}" AutoGeneratingColumn="DataGrid_AutoGeneratingColumn" />
    </Grid>
</Window> 
```

# java - 对于 Integer 和 String 输入，Scanner 对象的行为不同

> ID：13060244
> 
> 赞同：2
> 
> 时间：2012-10-25T01:13:45.163
> 
> 标签：java, inputstream, user-input

> **可能重复：**
> [在 nextInt 之后使用 nextLine 时的扫描仪问题](https://stackoverflow.com/questions/7056749/scanner-issue-when-using-nextline-after-nextint)

在下面的两个代码片段中，我首先询问所需的输入数量，然后让用户输入特定类型的那么多输入。当所需的输入是 String 类型时，除非我首先使用 s.next() ，否则它会少一个输入，而对于 Integers 它可以正常工作。我不明白为什么。有人可以解释一下吗？谢谢

第一个带有字符串输入和 nextLine 函数的代码：

```
public static void main(String args[]){

    Scanner s = new Scanner(System.in);

    int num =  s.nextInt();

    String[] inputs = new String[num];

    for (int i = 0; i < inputs.length; i++) {
        inputs[i]=s.nextLine();
    }
    System.out.println("end of code");
} 
```

具有整数输入和 nextInt 函数的第二个代码：

```
public static void main(String args[]){

    Scanner s = new Scanner(System.in);

    int num =  s.nextInt();

    Integer[] inputs = new Integer[num];

    for (int i = 0; i < inputs.length; i++) {
        inputs[i]=s.nextInt();
    }
    System.out.println("end of code");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T01:47:12.110

这是因为以下行：

```
int num =  s.nextInt(); 
```

您的下一个 INT 只返回 INT，直到它到达 \n 字符。

如果您有这样的测试文件：

```
4
1
2
3
4 
```

您的字符代码将如下所示：

```
4'\n'
1'\n'
2'\n'
3'\n'
4'\n' 
```

因此，当您抓取整数时，它将为您在扫描仪上的“nextInt()”方法抓取 4。当您告诉它抓取下一行“nextLine()”时，它会抓取该行的其余部分，即 '\n'，并且不会将任何内容存储到数组的第一个值中。

在反面，如果你告诉它抓取下一个整数“nextInt()”，它将搜索直到找到下一个整数，这将导致 1 进入数组的第一个值。

# python - 在Python中替换英文字母之外的任何字符？

> ID：13060254
> 
> 赞同：0
> 
> 时间：2012-10-25T01:15:07.667
> 
> 标签：python, regex

如何替换英文字母表之外的任何字符？

例如，用 ' ' 替换的 'abcdükl*m' 将是 'abcd kl m'

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T01:17:28.283

使用正则表达式`[^a-zA-Z]`：

```
re.sub(r'[^a-zA-Z]', '', mystring) 
```

一些信息： 是`a-zA-Z`分别表示所有小写和大写字母的字符范围，`^`字符类开头的插入符号表示否定，例如“除这些之外的任何内容”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T01:21:57.080

假设您正在尝试规范化文本，请参阅“ [python 中的非 unicode 和非 ascii 的 HTML 的综合字符替换模块](https://stackoverflow.com/a/12944604/442650)”下的链接。

`unicodedata`有一种`normalize`可以优雅地为您降级文本的方法：

```
import unicodedata
def gracefully_degrade_to_ascii( text ):
    return unicodedata.normalize('NFKD',text).encode('ascii','ignore') 
```

完整文档 - [http://docs.python.org/library/unicodedata.html](http://docs.python.org/library/unicodedata.html)

如果您只是尝试去除非 ASCII 字符，那么其他人提到的否定字符集正则表达式就是这样做的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T01:16:38.983

搜索`[^a-zA-Z]`并替换为“”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T01:23:01.303

```
>>> import string
>>> print ''.join(x if x in string.ascii_letters else ' ' for x in u'abcdükl*m') 
abcd kl m 
```

# delphi - 所选字符串网格行的正常颜色（u）r 是多少？

> ID：13060257
> 
> 赞同：6
> 
> 时间：2012-10-25T01:15:20.140
> 
> 标签：delphi, winapi, tstringgrid

我正在覆盖`OnDrawCell`字符串网格。在某些情况下，我想使用`TColor`系统绘制时用于所选行的法线（否`OnDrawCell`）。

那是哪个颜色（u）r？clXXX ?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T02:12:50.423

在 Delphi 2010 之前，您可以使用`clHighlight`颜色。

在 Delphi 2010 中，TStringGrid、TDrawGrid 和 TDBGrid 组件现在有一个[`DrawingStyle`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Grids.TCustomGrid.DrawingStyle)属性，并且根据这个值（gdsClassic、gdsGradient、gdsThemed），您必须以这种方式计算颜色。

**1.供**gdsClassic 使用`clHighlight`；

2.for **gdsGradient**使用[`GradientFillCanvas`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.GraphUtil.GradientFillCanvas)方法

```
GradientFillCanvas(Canvas, GetShadowColor(clHighlight, 45), GetShadowColor(clHighlight, 10), LRect, gdVertical); 
```

**3.为gdsThemed**调用 的`DrawElement`方法`TCustomStyleServices`

```
StyleServices.DrawElement(Canvas.Handle, StyleServices.GetElementDetails(tgCellSelected), LRect, ARect); 
```

在引入 vcl 样式的 Delphi XE2（和 XE3）中，您必须使用与上述相同的样式，但检查当前样式是否为“自定义样式”（vcl 样式）

**1.for gdsGradient**使用GradientFillCanvas 方法以这种方式计算渐变的颜色

```
StyleServices.GetElementColor(StyleServices.GetElementDetails(tgGradientCellRowSelectedRight), ecGradientColor1, StartColor); //StartColor is a TColor variable
StyleServices.GetElementColor(StyleServices.GetElementDetails(tgGradientCellRowSelectedRight), ecGradientColor2, EndColor);//EndColor is a TColor variable 
```

2.gdsClassic **_**

```
StyleServices.GetElementColor(StyleServices.GetElementDetails(tgClassicCellRowSelectedRight), ecFillColor, LColor); //LColor is a TColor variable 
```

如果您想查看 VCL 如何绘制选定（突出显示）单元格/行的示例，请尝试执行该`TCustomGrid.DrawCellHighlight`方法。

# python - Python Tkinter 模块未显示输出

> ID：13060263
> 
> 赞同：11
> 
> 时间：2012-10-25T01:15:42.403
> 
> 标签：python, tkinter

我正在尝试学习 Python 并在 Python 中尝试一些 GUI 并遇到了这个 Tkinter 模块。我的代码运行，但运行时没有出现窗口。我的代码如下：

```
from Tkinter import *
#to create a root window 
root = Tk() 
```

程序运行，没有错误，但窗口不显示。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-25T01:19:45.257

将此添加到您的代码`root.mainloop()`中，[这是一个教程](https://tkdocs.com/tutorial/firstexample.html)。

**回应您的评论**

```
#Also note that `from <module> import *` is generally frowned upon
#since it can lead to namespace collisions. It's much better to only
#explicitly import the things you need.
from Tkinter import Tk, Label
root = Tk()
w = Label(root, text="Hello, world!")
w.pack()
root.mainloop() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T16:50:50.683

正如其他答案所指出的，您需要调用`mainloop`根对象。

我推荐一种 OO 风格的编程，我也建议*不要*进行全局导入（即：*不是*'from Tkinter import *'）。

这是我通常开始使用的模板：

```
import Tkinter as tk

class ExampleView(tk.Frame):
    def __init__(self, root):
        tk.Frame.__init__(self, root)
        l = tk.Label(self, text="your widgets go here...", anchor="c")
        l.pack(side="top", fill="both", expand=True)

if __name__=='__main__':
    root = tk.Tk()
    view = ExampleView(root)
    view.pack(side="top", fill="both", expand=True)
    root.mainloop() 
```

这使得将主逻辑保持在文件开头很容易，并将根的创建和调用保持`mainloop`在一起，我认为这使代码更容易理解。它还使重用此代码更容易一些（即：您可以创建一个更大的程序，这是可以创建的几个窗口之一）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T12:53:51.390

`root.mainloop()`在最后添加。

# linux - 从下面的 Shell 脚本中查找哪个文件有问题

> ID：13060264
> 
> 赞同：0
> 
> 时间：2012-10-25T01:15:42.807
> 
> 标签：linux, bash, shell, unix

**问题陈述：-** 下面是别人写的脚本，他离开了公司，所以我不知道我应该问谁。所以这就是我在这里发布以找到解决方案的原因。

该脚本的作用是 - 它从特定文件夹`(/data/ds/real/EXPORT_v1x0)`中压缩特定日期（20121017）的数据并将其移回 HDFS`(hdfs://ares-nn/apps/tech/ds/new/)`目录。

```
date=20121017
groups=(0 '1[0-3]' '1[^0-3]' '[^01]')
  for shard in 0 1 2 3 4 5 6 7 8 9 10 11; do
    for piece in 0 1 2 3; do
        group=${groups[$piece]}
        if ls -l /data/ds/real/EXPORT_v1x0_${date}_${shard}_T_${group}*.dat.gz; then
          gzip -dc /data/ds/real/EXPORT_v1x0_${date}_${shard}_T_${group}*.dat.gz | \
          hadoop jar /export/home/ds/lib/HadoopUtil.jar com.host.hadoop.platform.util.WriteToHDFS -z -u \
          hdfs://ares-nn/apps/tech/ds/new/$date/EXPORT-part-$shard-$piece
          sleep 15
       fi
    done
  done 
```

所以在迁移到 HDFS 的过程中，我发现这个文件在 HDFS 中有一些问题-

```
hdfs://ares-nn/apps/tech/ds/new/20121017/EXPORT-part-8-3 
```

那么有什么办法可以通过对上面的脚本进行一些排列，我们可以找出这个目录下的文件是什么`(/data/ds/real/EXPORT_v1x0)`，最终被转换成这个`hdfs://ares-nn/apps/tech/ds/new/20121017/EXPORT-part-8-3`有问题的文件。

有什么想法吗？

**更新：-**

下面是这样的吗？

```
groups=(0 '1[0-3]' '1[^0-3]' '[^01]')
  for shard in 0 1 2 3 4 5 6 7 8 9 10 11; do
    for piece in 0 1 2 3; do
        group=${groups[$piece]}
        if ls -l /data/ds/real/EXPORT_v1x0_${date}_${shard}_T_${group}*.dat.gz; then
          [ "$date/EXPORT-part-$shard-$piece" == "20121017/EXPORT-part-8-3" ] && {
                echo /data/real/EXPORT_v1x0_${date}_${shard}_T_${group}*.dat.gz
            }
         fi
    done
  done 
```

**我在 /data/real/EXPORT 文件夹中有几个示例文件格式 -**

```
/data/real/EXPORT_v1x0_20121017_4_T_115600_115800.dat.gz
/data/real/EXPORT_v1x0_20121017_4_T_235600_235800.dat.gz
/data/real/EXPORT_v1x0_20121017_4_T_115800_120000.dat.gz
/data/real/EXPORT_v1x0_20121017_4_T_235800_000000.dat.gz 
```

在进行更改后我得到的一些示例输出 -

```
/data/real/EXPORT_v1x0_20121017_0_T_0*.dat.gz: No such file or directory
/data/real/EXPORT_v1x0_20121017_0_T_1[0-3]*.dat.gz: No such file or directory
/data/real/EXPORT_v1x0_20121017_0_T_1[^0-3]*.dat.gz: No such file or directory
/data/real/EXPORT_v1x0_20121017_0_T_[^01]*.dat.gz: No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T01:33:57.400

在这种情况下，将整`gzip`行重新设置为：

```
[ "$date/EXPORT-part-$shard-$piece" == "20121017/EXPORT-part-8-3" ] && {
    echo /data/real/EXPORT_v1x0_${date}_${shard}_T_${group}*.dat.gz
} 
```

这应该够了吧。

编辑：删除`sleep`以加快循环！

# c# - 自定义@Html.ValidationMessageFor

> ID：13060268
> 
> 赞同：0
> 
> 时间：2012-10-25T01:16:30.473
> 
> 标签：c#, data-annotations, custom-attributes

我想定制`@Html.ValidationMessageFor`。

我有这段代码，但它使用`@Html.ValidationMessageFor`，现在将 HTML 格式化，只希望返回错误。

这个怎么做？

我的代码：

```
public static MvcHtmlString MyValidationMessageFor<TModel, TProperty>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TProperty>> expression)
    {
        return MvcHtmlString.Create(helper.ValidationMessageFor(expression).ToString());
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T01:30:27.640

你可以从 DataAnnotations 做很多这样的事情。你在验证什么？例如，如果它是必需的，你可以有

```
[Required(ErrorMessage= "Please enter something, anything, PLEASE!!!! Come on, I've been nice, just do it! DON'T LEAVE ME EMPTY FOR THE LOVE OF GOD")]
public string MyValue 
```

编辑以获得更戏剧化的效果。

哎呀！我读错了，你只是想要这个消息，你可以试试这个：

```
public static T GetAttributeFrom<T>(this object instance, string propertyName) where T : Attribute
{
    var attrType = typeof(T);
    var property = instance.GetType().GetProperty(propertyName);
    return (T)property .GetCustomAttributes(attrType, false).First();
}

var RequiredMessage = player.GetAttributeFrom<RequiredAttribute>("MyValue").ErrorMessage; 
```

资料来源：[如何从代码中检索数据注释？（以编程方式）](https://stackoverflow.com/questions/7027613/how-to-retrieve-data-annotations-from-code)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T03:11:10.790

我使用以下代码获取所有错误消息：

```
`StringBuilder sb = new StringBuilder();
foreach (ModelState state in ModelState.Values)
    foreach (ModelError error in state.Errors)
        sb.AppendFormat("<div>{0}</div>", error.ErrorMessage);` 
```

`您可以毫不费力地更改此代码，以仅获取所需控件的错误消息。`

 `* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T01:39:33.530

我找到了一个很好的来源，它揭开了编写自定义验证器的神秘面纱。信息太多，这里就不贴了，所以点击这个链接：[http ://tdryan.blogspot.com/2010/12/aspnet-mvc-3-custom-validation.html](http://tdryan.blogspot.com/2010/12/aspnet-mvc-3-custom-validation.html)

这让我继续前进，并且我已经根据本教程编写了许多验证器。

祝你好运。`

# java - 如何在java中选择你的getter和setter

> ID：13060270
> 
> 赞同：2
> 
> 时间：2012-10-25T01:16:41.403
> 
> 标签：java, getter-setter

我的支付类只有一个本地私有变量——totalCost，因此totalCost 也有一个getter 和setter 方法。TotalCost 是唯一的局部变量，因为它是唯一用于支付类中多个方法的变量。这个类应该有更多的getter和setter吗？

```
public class Payment {
    private int totalCost;

    public Payment(){
    }

    public int calculateItemcost(int itemQuantity, int itemPrice){
        return itemPrice * itemQuantity;

    public int calculateTotalcost(int itemCost){
        return totalCost = totalCost + itemCost;
    }

    public int calculateBalance(int clickedValue, int totalCost){
        return this.totalCost = totalCost - clickedValue;

    public int getTotalcost(){
        return this.totalCost;
    }    

    public void setTotalcost(int totalcost) {
        this.totalCost = totalcost;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T01:28:16.647

你知道得[墨忒耳定律](http://en.wikipedia.org/wiki/Law_of_Demeter)吗？

它收集了一些小的指导方针，以避免代码中的松散耦合。

Getter 和 setter 是导致类之间紧密耦合的元素。

为什么？

因为 getter 和 setter 会告诉你一个类的实现（尤其是它的字段）和它的设计。

总是系统地创建 getter/setter 代码的开发人员完全误解了面向对象编程的概念。

事实上，这会导致[领域模型贫乏](http://en.wikipedia.org/wiki/Anemic_domain_model)。

因此，它强制客户端自己实现业务逻辑，即使它不是它的角色。

简而言之：在应用程序中，80% 的 getter 和 setter 是不必要的。面向对象编程是关于**消息**的。你想要一个对象的行为，告诉它！不要询问有关其状态的信息，以便将您的厨房放在一边，因为这通常是一种程序化的编码方式。（[告诉！不要问！！](http://pragprog.com/articles/tell-dont-ask)）并赞成不尊重 DRY（不要重复自己）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T01:18:31.573

您将 getter 用于您可能需要在其他类中“获取”的字段，并将 setter 用于您可能需要在其他类中“设置”的字段。因此，在编写 getter/setter 之前，请考虑您的要求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T01:18:36.127

由于您只有一个字段，因此您已经有了 getter 和 setter。无关紧要。看起来不错。

虽然，重构这个：

```
 public int calculateTotalcost(int itemCost){
        return totalCost = totalCost + itemCost;
    }

    public int calculateBalance(int clickedValue, int totalCost){
        return this.totalCost = totalCost - clickedValue;
    } 
```

调用setter。例子：

```
public int calculateTotalcost(int itemCost){
       setTotalCost(totalCost + itemCost);
       return getTotalCost();
    } 
```

这种方式对 totalCost 的更改已本地化到该`setTotalCost`方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-25T01:21:04.117

我遵循两个准则。

首先，不一定*所有*私有数据都应该通过 getter 和 setter 公开，因为其中一些可能仅供内部使用。

其次，getter 和 setter 应该提供*对象*视图，而不是*实现*视图。

例如，如果您的班级硬编码了 10% 的采购税率（暂时忘记硬编码这是一个坏主意），即使它是计算值而不是私人会员。此外，您可能希望根据税前价格设置值。

因此，如果税前价值为政府秃鹰增加了 10%，例如：

```
public void setPreTax (int preTaxAmt) {
    totalCost = preTaxAmt * 11 / 10;
}
public int getTax (void) {
    return totalCost / 11;
} 
```

我没有为计算使用浮点数而烦恼，因为它与讨论无关并且您已经在使用`int`.

这种对象/实现分离是一件好事——你应该根据你想提供给它的客户的信息来设计你的 API，而不是基于内部细节。

# iphone - 页面加载后减少 UIwebView Iphone 的内存

> ID：13060271
> 
> 赞同：0
> 
> 时间：2012-10-25T01:16:46.740
> 
> 标签：iphone, ios, memory-management, uiwebview

我基于 uiwebview 为 iphone 创建了一个应用程序。但是当我在上面加载网站时，应用程序会不断增加内存。

```
www.google.com + 5 Mb
www.google.news + 2 Mb 
www.google.com + 5 Mb (total 12 Mb) 
```

但是我不想做这种情况，如何减少内存。特别是我的问题是，如何在页面加载后减少 uiwebview 的内存。谢谢

# sql-server-2005 - 如何处理 SSIS 中列数变化的 CSV 文件？

> ID：13060272
> 
> 赞同：0
> 
> 时间：2012-10-25T01:16:53.120
> 
> 标签：sql-server-2005, ssis

我有一个完整的 CSV 文件，例如有 6 列：

```
Rec ID | Charge Category | Charge Type Category | Product Name | Account No | Cost 
```

我一直在运行 SSIS，这种情况没有问题。

但是，我们发现其中一个 CSV 文件使用的列少于我们的列，例如：

```
Rec ID | Charge Type Category | Product Name |Cost 
```

我们如何使用“平面文件连接管理器”类型的连接不起作用来处理这个原因？！？！

还有其他我们需要探索的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:46:23.980

如果你只有这两种情况，你可以创建三个文件连接。使用第一个读取整行并仅处理标题。计算其中的列数并创建两个并行流 - 一个用于“短”格式，一个用于“长”格式，其中每个流使用不同的连接定义。

一个更复杂的选项是在数据流中的脚本转换中完成所有这些操作。让您的 CSV 文件逐行读取文件并将其传递给脚本，该脚本解析该行并将现有列值分配给定义的所有可能输出的子集。应以配置所有可能列的方式定义输出（类似于：[SSIS split string](https://stackoverflow.com/questions/13085783/ssis-split-string/13090189#13090189)）

解决方案的主要部分是：

1.  逐行读取文件的平面文件连接（将字段分隔符设置为不存在的组合，例如#$#）和

2.  转换模式下的 Scipt 任务，具有单个输入 (FullLine) 并定义了所有可能的输出：

    ![在此处输入图像描述](../Images/ec608bca37d0db5e92d0480a1346bbee.png)

在脚本中，您可以使用此处精美描述的概念：http: [//dwbi1.wordpress.com/2011/02/27/ssis-importing-files-read-the-first-n-rows/](http://dwbi1.wordpress.com/2011/02/27/ssis-importing-files-read-the-first-n-rows/)

在写完所有这些之后，我刚刚意识到脚本任务源可能是最简单的方法，它与将所有可能的列定义为输出的想法相同。

# trigger.io - 在 Android 4.1 上调用“forge.topbar.setTitle”有时会导致自发重置

> ID：13060274
> 
> 赞同：1
> 
> 时间：2012-10-25T01:17:02.370
> 
> 标签：trigger.io, forge

当我的主干.js 应用程序切换视图时，我正在使用 forge.setTitle 动态更改顶栏的文本。

有时，这样做会导致 Android 应用程序在 4.1 Jellybean 上重置。我再次看到 trigger.io 闪屏，我的应用程序返回到默认视图。我很难确定原因。

在backbone.js 术语中，我在给定视图的显示块中调用此函数。

```
forge.topbar.setTitle("My new view"); 
```

它似乎“有时”起作用，这表明存在竞争条件，但我不知道可能存在什么冲突。

有没有人遇到过这个问题？

我应该补充一点，setTitle 函数会抛出它的成功回调，所以那里没有检测到错误。

# android - jQuery Mobile 1.2 PhoneGap/Cordova 2.1 Android 4.0.3 错误加载页面

> ID：13060275
> 
> 赞同：0
> 
> 时间：2012-10-25T01:17:10.670
> 
> 标签：android, cordova, jquery-mobile, android-4.0-ice-cream-sandwich, cordova-2.0.0

我已经阅读了“铬错误：-6”并在 3.0+ 的 android webview 中得到了 url 参数的问题。

在启动时，我的应用程序会检查您是否已通过身份验证，如果没有，则执行 $.mobile.changePage 到登录页面。这失败并从 jQuery Mobile 抛出“错误加载页面”消息。我没有在查询字符串中传递参数，所以我认为唯一会妨碍的是 jQM 用于 ajax 导航的哈希操作。因此，我进行了一项更改并通过设置 $.mobile.ajaxEnabled = false 来关闭 ajax 导航。我的页面加载正确。

所以我的问题是：有没有其他方法可以配置东西，以便我可以启用 ajax 导航？或者是否有修复此问题的 PhoneGap/Cordova 2.1 或 jQuery Mobile 1.2 补丁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:00:05.420

您是否尝试过使用 `rel="external"` 文档页面上描述的属性？请参见[此处](http://jquerymobile.com/test/docs/pages/page-links.html)- 特别是“无 Ajax 链接”和“多页文档中的链接”

# visual-c++ - 有什么方法可以创建堆栈回溯并将调用堆栈记录到可与 Visual C++ 6.0 一起使用的跟踪日志文件？

> ID：13060277
> 
> 赞同：1
> 
> 时间：2012-10-25T01:17:23.217
> 
> 标签：visual-c++, visual-c++-6, traceback

我有一个遗留代码库，它在 Visual C++ 6.0 上具有二进制库依赖项，我无法获取这些二进制库的源代码。所以我一直在调试 Visual C++ 6.0 应用程序的崩溃。我注意到如果我至少可以使用 Visual C++ 2005 或更高版本， [CrashRpt](http://code.google.com/p/crashrpt/)会非常方便，但由于我不能，是否有任何其他选择至少具有某种全局能力来捕获错误并生成堆栈跟踪，如果应用程序因某些异常故障而终止，或者抛出未处理的异常？

我找到了一些[关于](http://www.howzatt.demon.co.uk/articles/oct04.html)结构化异常处理和 MS Debug Helper dll 的文章，但没有成熟的工作系统，我可以简单地将其放入 VC++6 应用程序中。

# nsis - 安装程序退出后卸载仍在运行

> ID：13060286
> 
> 赞同：0
> 
> 时间：2012-10-25T01:18:59.050
> 
> 标签：nsis

我不知道如何把它放在这里，我会尽力而为。请帮帮我

我有一个补丁安装程序，可以按预期安装和卸载。但是从程序文件中卸载补丁后，我尝试卸载其他软件。所有我收到一条弹出消息，说让卸载完成卸载。

我所知道的只是在卸载补丁结束时，我正在通过执行 .exe 文件来启动一个进程。我的卸载程序等待该进程退出，我不想退出。

我的其他选择是在卸载补丁后强制用户重新启动，我不希望这样做。

我用 /ASYNC 尝试了 Exec、ExecDos 和 ExecCmd，但我仍然看到同样的问题。

试试 1

```
ExecShell open "$INSTDIR\system\teven.exe" 
```

试试 2

```
ExecDos::exec /NOUNLOAD /ASYNC "$INSTDIR\system\teven.exe" ""
Pop $0
ExecDos::isdone /NOUNLOAD $0 
```

谁能帮我解决这个问题。如何启动 teven.exe 并让它继续运行并让我的卸载程序不等待 teven.exe 退出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:06:15.507

如果您要在卸载程序完成后执行其他操作，您几乎必须强制卸载程序等待。当您从添加/删除程序卸载时，Windows 甚至会强制等待卸载程序启动的所有子进程...

如果您想等待，为什么要使用 /ASYNC？（编辑：我猜你不想等待？）`ExecDos::isdone`不等待，它只是检查，`ExecDos::wait`如果你想等待就使用。

如果您没有使用高级选项并且不需要标准输入，那么您实际上不需要使用 3rd-party 插件：

如果 teven 是一个控制台应用程序并且您想隐藏控制台窗口（并等待）：

```
nsExec::Exec '"$INSTDIR\system\teven.exe"' 
```

除此以外：

```
ExecWait '"$INSTDIR\system\teven.exe"' 
```

如果您实际上不想等待，则可以使用`Exec`，但 Windows 可能会在卸载时强制等待...

# sql-server-2008 - 以编程方式检查链接服务器的现有登录名

> ID：13060294
> 
> 赞同：1
> 
> 时间：2012-10-25T01:20:31.467
> 
> 标签：sql-server-2008, tsql, linked-server

我正在编写一个可用于创建链接服务器的管理脚本。该脚本`IF EXISTS`在创建之前对链接服务器进行检查，这工作正常。

我已将`sp_addlinkedsrvlogin`详细信息添加到脚本中以生成访问链接服务器的适当权限。

当我再次尝试重新运行脚本时，它会引发错误：

> 消息 15190，级别 16，状态 1，过程 sp_dropserver，第 56 行服务器“LinkedServerName”仍有远程登录或链接登录。

## 所以我的问题是：

**检查链接服务器是否存在登录的具体代码是什么？**

这将允许我`EXEC sp_droplinkedsrvlogin`在发出条件之前有条件地`EXEC sp_dropserver`

* * *

现在的代码：

```
-- Set to master
    USE master
    GO

-- Set linked server vars
    DECLARE
        @ServerName         varchar(max)    =   'Server Name'       -- Name you wish to give to the Linked Server connection. To remove ambiguity you can name this the same as the Data Source you are connecting to.
        ,@ProductName       nvarchar(128)   =   'Product Name'      -- Type of OLE DB product you are connecting too, i.e. Oracle or SQL Server, e.g. SQl Server = N'MSSQL'.
        ,@ProviderName      nvarchar(128)   =   'Provider Name'     -- The OLE DB provider is expected to be registered with the specified PROGID in the registry, e.g. SQL Server = N'SQLNCLI'.
        ,@DataSource        nvarchar(4000)  =   'Source Name'       -- Is the name of the data source as interpreted by the OLE DB provider, i.e. the actual server name if connecting to MS SQL Server.
        ,@Location          nvarchar(4000)  =   'Location'          -- Not really worth using, listed for compelteness according to Reference 1 Location.           
        ,@ProviderString    nvarchar(4000)
        ,@CatalogName       nvarchar(4000)  =   'Database Name'     -- (Optional) Name of the database/catalog you will connect to. 
    SET
        @ProviderString =   'PROVIDER=SQLOLEDB; SERVER=' + @ServerName

-- Set linked server login vars
    DECLARE
        @Useself            varchar(8)      =   'Option'            -- 'TRUE' or 'FALSE' or NULL. Determines whether to connect to @rmtsrvname\@ServerName by impersonating local logins or explicitly submitting a login and password.
        ,@LocalLogin        varchar(100)    =   'Domain\Login'      -- Domain account.
        ,@User              varchar(50)     =   'SQL user'          -- Is the remote login used to connect to rmtsrvname when @useself\@Useself is FALSE.
        ,@Password          varchar(20)     =   'Password'          -- Is the password associated with @rmtuser\@User.

-- Drop linked server if already exists to prevent error when creating
    IF  EXISTS
        (
            SELECT  *
            FROM    sys.servers
            WHERE   server_id   !=  0
                    AND name    =   @ServerName
        )  
        EXEC    sp_dropserver
                @ServerName

-- Create linked server         
    EXEC    sp_addlinkedserver  
            @server         =   @ServerName
            ,@srvproduct    =   @ProductName
            ,@provider      =   @ProviderName
            ,@datasrc       =   @DataSource
            ,@location      =   @Location
            ,@provstr       =   @ProviderString
            ,@catalog       =   @CatalogName

-- Add permissions for usage            
    EXEC    sp_addlinkedsrvlogin 
            @rmtsrvname     =   @ServerName
            ,@useself       =   @Useself
            ,@locallogin    =   @LocalLogin
            ,@rmtuser       =   @User
            ,@rmtpassword   =   @Password 
```

* * *

下面接受的答案。我还发现，您可以在删除链接服务器时通过将参数传递`,@droplogins = 'droplogins'`给`EXEC sp_dropserver`proc 来强制删除登录：

```
IF  EXISTS
    (
        SELECT  1
        FROM    sys.servers
        WHERE   server_id   !=  0
                AND name    =   @ServerName
    )  
    EXEC    sp_dropserver
            @server         =   @ServerName
            ,@droplogins    =   'droplogins' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T01:27:02.633

```
select 1 
from sys.remote_logins l
inner join sys.servers s
on l.server_id = s.server_id
where s.name = @ServerName 
and l.remote_name = @User --check on remote user 
```

或者

```
select 1 
from sys.remote_logins l
inner join sys.servers s
    on l.server_id = s.server_id
inner join sys.server_principals p
    on l.local_principal_id = p.principal_id
where s.name = ServerName 
and p.name = @LocalLogin --check on local user 
```

# c - select() 在从客户端读取和接收数据时接受连接

> ID：13060295
> 
> 赞同：0
> 
> 时间：2012-10-25T01:20:30.853
> 
> 标签：c, linux, sockets

我已连接到某个客户端，然后我们正在通信。另一个客户端连接到我的服务器，它将立即输出有一个新连接.. 例如，在听其他客户端的同时接受？.. 我该怎么做？..

我已经有一个工作了，但它一次只做一件事。当我已经与我的客户通信时，我无法接受传入连接或其他客户的数据。当我正在通信的客户端断开连接时，我只能接受来自其他客户端的新连接或数据。我该怎么做才能同时处理接受和收听客户。我不想使用线程。

这是我的代码的一部分。

```
do
{
   fduse = fdin;
   printf("Waiting for Connection\n");
   err = select(sMax + 1, &fduse, NULL, NULL, NULL);
   if (err < 0)
   {
      perror("  select() failed");
      break;
   }
   DescRead = err;
   for (SockStorage = 0; SockStorage <= sMax && DescRead > 0; ++SockStorage)
   {
      if (FD_ISSET(SockStorage, &fduse))
      {
         DescRead -= 1;
         if (SockStorage == socketFd)
         {
            printf("  Listening socket is readable\n");
            do
            {
               NewSFD =
                  accept(socketFd, (struct sockaddr *)&cli_addr, &clilen);
               if (NewSFD < 0)
               {
                  if (errno != EWOULDBLOCK)
                  {
                     perror("  accept() failed");
                     DCSERVER = TRUE;
                  }
                  break;
               }
               if (ClientCount < MAX_CLIENTS)
               {
                  for (loop = 0; loop < MAX_CLIENTS; loop++)
                  {
                     if (Clients[loop].connected_sock < 0)
                     {
                        Clients[loop].connected_sock = NewSFD;
                        break;
                     }
                  }
                  ClientCount++;
               }
               else
               {
                  printf("Maximum Client Reached.\n");
                  char *sendtoclient = "Server full. ";
                  send(NewSFD, sendtoclient, strlen(sendtoclient), 0);
                  close(NewSFD);
                  break;
               }
               ip = ntohl(cli_addr.sin_addr.s_addr);
               printf("  Connection from %d.%d.%d.%d\n",
                  (int)(ip >> 24) & 0xff,
                  (int)(ip >> 16) & 0xff,
                  (int)(ip >> 8) & 0xff, (int)(ip >> 0) & 0xff);
               dlogs(ip);

               FD_SET(NewSFD, &fdin);
               if (NewSFD > sMax)
                  sMax = NewSFD;
            }
            while (NewSFD != -1);
         }
         else
         {
            int d;
            for (d = 0; d < MAX_CLIENTS; d++)
            {
               printf("Descriptor ID: %d\n", Clients[d].connected_sock);
            }

            pfds[0].fd = fd;
            pfds[0].events = POLLIN;
            pfds[1].fd = SockStorage;
            pfds[1].events = POLLIN;
            state = FALSE;
            do
            {
               rc = poll(pfds, 2, -1);
               if (pfds[0].revents & POLLIN)
               {
                  while ((nbytes = read(fd, buf, sizeof (buf) - 1)) > 0)
                  {
                     buf[nbytes] = '\0';
                     printf("%s\n", buf);
                  }
                  pfds[0].events = 0;
                  pfds[1].events = POLLIN | POLLOUT;
               }
               if (pfds[1].revents & POLLIN)
               {
                  err = recv(SockStorage, strbuf, sizeof (strbuf), 0);
                  if (err < 0)
                  {
                     if (errno != EWOULDBLOCK)
                     {
                        perror("  recv() failed");
                        state = TRUE;
                     }
                     break;
                  }
                  if (err == 0)
                  {
                     printf("  Connection closed\n");
                     state = TRUE;
                     break;
                  }
                  dSize = err;
                  printf("  %d bytes received\n", dSize);
               }

               if (pfds[1].revents & POLLOUT)
               {
                  int s;
                  for (s = 0; s < MAX_CLIENTS; s++)
                  {
                     if (Clients[s].connected_sock > 0)
                     {
                        err =
                           send(Clients[s].connected_sock, buf,
                           strlen(buf), 0);
                        if (err < 0)
                        {
                           perror("  send() failed");
                           track = s;
                           state = TRUE;
                           break;
                        }
                     }
                  }
                  pfds[0].events = POLLIN;
                  pfds[1].events = POLLIN;
               }

            }
            while (TRUE);
            fopen("/sockF.txt", "w");
            if (state)
            {
               ClientCount--;
               close(SockStorage);
               FD_CLR(SockStorage, &fdin);
               if (SockStorage == sMax)
               {
                  while (FD_ISSET(sMax, &fdin) == FALSE)
                     sMax -= 1;
               }
            }
         }
      }
   }
} while (DCSERVER == FALSE);
cleanUP(SockStorage, sMax);
} 
```

我已经做了两天了，但我仍然无法得到它。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T01:28:26.180

好吧，给你一个工作的多连接守护进程的例子，看看[这个例子](http://pastebin.com/gwyC6bLq)

如果您需要进一步的解释，请拍摄。

请注意，该示例中的代码已删除诸如`daemon_init()`等之类的内容，因此只是盲目地复制粘贴并尝试编译它是行不通的。

`setnonblocking()`根据要求添加。

```
void setnonblocking(sock)
  int sock;
{
  int opts;

  opts = fcntl(sock, F_GETFL);

  if (opts < 0)
    {
      syslog(LOG_ERR, "fcntl(F_GETFL) failed");
      exit(EXIT_FAILURE);
    }

  opts = (opts | O_NONBLOCK);

  if (fcntl(sock, F_SETFL, opts) < 0)
    {
      syslog(LOG_ERR, "fcntl(F_SETFL) failed");
      exit(EXIT_FAILURE);
    }

  return;
} 
```

和`daemon_init()`

```
int daemon_init(void)
{
  pid_t pid;
  int i;

  if ((pid = fork()) < 0)
    {
      return -1;
    }
  else if (pid != 0)
    {
      exit(0);
    }

  for (i=getdtablesize();i>=0;--i) close(i);
  i = open("/dev/null", O_RDWR); /* open stdin */
  dup(i); /* stdout */
  dup(i); /* stderr */

  setsid();
  return 0;
} 
```

# memory - 共享内存架构中的 OpenGL (ES 2.0) VBO 性能

> ID：13060299
> 
> 赞同：10
> 
> 时间：2012-10-25T01:21:04.693
> 
> 标签：memory, mobile, opengl-es, gpu, vbo

我是一名桌面 GL 开发人员，我开始探索移动世界。

为了避免误解或欢迎但琐碎的答复，我可以谦虚地说我非常了解 GL 和 GL|ES 机器。

一个简短的问题是：如果我们在共享内存架构中使用 GL|ES 2.0，那么在客户端阵列上使用 VBO 的意义何在？

更详细：

*   顶点缓冲区是原始内存块，驱动程序无法*以任何方式*优化任何内容，因为访问模式取决于：1）应用程序如何配置顶点数据布局，2）顶点着色器如何使用缓冲区内容，以及 3）我们可以有很多顶点着色器以不同的方式运行，并以不同的方式获取相同的缓冲区。

*   对齐：单个 VBO 存储可以从最适合底层 GL 系统的地址开始；如果我只是强制（例如，尊重对齐最佳实践）客户端阵列分配到这些边界怎么办？

*   基于图块的渲染与即时模式架构不应该发挥作用：据我了解，这与我的问题（即内存访问）无关。

我知道使用 VBO 可以让您的代码在*未来*的平台/硬件中运行得更好/更快，而无需修改它，但这不是这个问题的重点。

此外，我还意识到在共享内存架构中使用 VBO 会使内存使用量翻倍（如果您出于某种原因必须保留顶点数据供您使用），并且会花费您数据的 memcpy。

与交错的顶点数组一样，VBO 的使用在开发人员的论坛/博客/official_technotes 中得到了很大的“炒作”，但没有任何数据支持这些声明（即基准测试）。

*   在共享内存架构上使用 VBO 是否值得？
*   客户端阵列运行良好吗？
*   您对此有何看法/了解？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T11:24:15.933

我可以报告说，使用 VBO 在 Android 设备上存储顶点数据给了我零性能提升。在 Adreno、Mali400 和 PowerVR GPU 上进行了尝试。但是，我们使用 VBO，因为它是 OpenGL ES 的最佳实践。

您可以在我们的[文章](http://androidworks-kea.blogspot.com/2012/05/developers-notes-about-opengl-es.html)（*顶点缓冲区对象*段落）中找到有关此内容的说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T02:59:53.160

根据这份报告，即使保持 SMA 不变，它也取决于 OpenGL 实现（一些 VBO 工作在 CPU 上秘密完成）和 VBO 的大小：

[http://sarofax.wordpress.com/2011/07/10/vbo-vertex-buffer-object-limitations-on-ios-devices/](http://sarofax.wordpress.com/2011/07/10/vbo-vertex-buffer-object-limitations-on-ios-devices/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-26T10:22:19.487

我会告诉你，我对 iOS 平台的了解。VBO 确实可以提高你的表现。

1.  VBO 是完美的，如果你有一个静态几何体——一旦复制，每次绘制调用都没有额外的开销。CA 会在每次绘制调用时将您的数据从客户端内存复制到“gpu 内存”。如果您忘记了它，它可能会重新调整数据。
2.  VBO 可以通过 glMapBuffer 映射到 gpu - 这是一个异步操作，这意味着它几乎没有开销，但您应该记住 - 当您映射\取消映射缓冲区时，最好在取消映射操作后 2 帧使用它 - 以避免同步
3.  Apple 工程师宣称，VBO 将比 SGX 硬件上的 CA 具有更好的性能，即使您每帧都重新上传它——我不知道细节。
4.  VBO 是最佳实践。CA 已弃用。更好地跟上现代趋势并尽可能多地保持跨平台

# c# - 使用 iis express 时没有在远程 pc 上应用 css

> ID：13060303
> 
> 赞同：3
> 
> 时间：2012-10-25T01:21:38.763
> 
> 标签：c#, css, asp.net-mvc-3, iis-express

在开发过程中，我想出了在远程 PC 上使用我的 asp.net mvc 站点的必要性。因此，我将其配置为使用 IIS Express。

起初，Windows 身份验证出现了一个问题。我的网站应该在 windows 域内联网中工作，所以我想使用集成的 windows 身份验证。我设法通过[How To: Firefox and Integrated Windows Authentication](http://markmonica.com/2007/11/20/firefox-and-integrated-windows-authentication/) from [IIS Express Windows Authentication](https://stackoverflow.com/questions/4762538/iis-express-windows-authentication)（bees73 的回答）让它在 Firefox 上运行。但是 IExplorer 仍然要求打印登录名/密码，即使我在本地打开它，指定我的 ip 而不是 localhost。

IE 的问题仍未解决，但顺其自然 - 如果我打印我的凭据，它确实可以在本地工作。

我的问题是：当我在远程 PC 上打开我的网站时（在 Firefox（无需打印登录名/密码）和 IE（我必须打印 login'n'password）中）我的页面在没有应用样式的情况下呈现。看起来没有可用的css。但我没有收到任何错误。

在加载页面的源代码中，我确实有行

```
<link href="/Content/Site.css" rel="stylesheet" type="text/css" /> 
```

但是当我尝试查看 Site.css 时，它说，有一些内部服务器错误。

我想我没有正确配置 IIS Express，这就是问题所在。如果没问题，至少我猜集成的 Windows 身份验证必须在不询问 IE 上的登录名和密码的情况下工作。

所以，我的配置：

1.  项目本身 - 到 IIS Express，Windows 身份验证 - 开启，匿名 - 关闭。
2.  netsh http 添加 urlacl url= [http://myip:myport](http://myip:myport)用户=域名\mylogin
3.  netsh http 添加 iplisten ipaddres=myip
4.  在*applicationhost.config*：

绑定：

> ```
> <site name="MySite" id="2">
>     <application path="/" applicationPool="Clr4IntegratedAppPool">
>         <virtualDirectory path="/" physicalPath="D:\..." />
>     </application>
>     <bindings>
>        <binding protocol="http" bindingInformation="*:myport:localhost" />
>         <binding protocol="http" bindingInformation="*:myport:myip" />
>     </bindings>
> </site> 
> ```

验证：

> ```
> <sectionGroup name="authentication">
>    <section name="anonymousAuthentication" overrideModeDefault="Deny" />
>    ...
>    <section name="windowsAuthentication" overrideModeDefault="Allow" />
> </sectionGroup> 
> ```

* * *

> ```
> <authentication>
>     <anonymousAuthentication enabled="false" userName="" />
>     ...
>     <windowsAuthentication enabled="true">
>         <providers>
>            <add value="Negotiate" />
>            <add value="NTLM" />
>         </providers>
>      </windowsAuthentication>
> </authentication> 
> ```

* * *

> ```
> <add name="AnonymousAuthenticationModule" lockItem="true" /> 
> ```

* * *

> ```
> <location path="MySite">
>     <system.webServer>
>         <security>
>             <authentication>
>                 <anonymousAuthentication enabled="false" />
>                 <windowsAuthentication enabled="true" />
>             </authentication>
>         </security>
>     </system.webServer>
> </location> 
> ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T06:09:10.220

问题与 ISS Express 中的 netsh 和绑定配置有关。起初我通过我的 ip 设置它，它导致了令人困惑的错误。

在网上搜索任何内容时，我遇到了[Setting up IIS Express](http://www.crucisconsulting.co.uk/index.php/2011/03/setting-up-iis-express.htm)。那里都一样，但建议在*netsh*和 iis *applicationhost.config*中使用 pc 名称。

所以，我补充说

```
netsh http add urlacl url=http://MyPCName:MyPort/ user=everyone 
```

和

```
<binding protocol="http" bindingInformation="*:MyPort:MyPCName" /> 
```

和一个奇迹！有效。

至于 IE，我必须**关闭**“使用 Windows 授权”标志才能使其工作。非常感谢[Internet Explorer - 启用集成 Windows 身份验证](http://blog.super-networking.net/2008/02/internet-explorer-enable-integrated-windows-authentication/)。但是，如果 url 中使用了 ip，IE 仍然要求输入登录名和密码。如果使用 pc 名称，它会静默工作。

Firefox 要么要求输入登录名和密码（如果输入有效凭据就可以工作），或者你应该应用[如何：Firefox 和集成 Windows 身份验证](http://markmonica.com/2007/11/20/firefox-and-integrated-windows-authentication/)（在我的问题中提到），然后它可以使用 ip 和 pc 名称静默工作。

希望这对其他人有帮助。

**编辑**

一句话：我必须以管理员权限启动 VS2010。如果不是，我仍然会收到基于错误模拟错误的 HTTP 500 错误。因此，在 Windows 7 下，由 VS2010 启动的没有管理员权限的 IIS Express 似乎无法正常工作。

据我了解，线索是给 IIS_IUSRS 适当的权限。但在此之前，以管理员权限启动 VS 2010 会更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T03:59:55.463

可能是解析Css所在的根路径出错。您可以尝试使用 Url 助手来解决此问题。

```
<link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/Site.css")"  media="screen" /> 
```

在 Asp.net 开发服务器（在 Visual Studio 环境中）`<link href="/Content/Site.css" rel="stylesheet" type="text/css" />`可以正常工作。但是在 IIS 中托管时，无法使用相对路径解析根路径。在 URL 助手的帮助下，我们可以解决这个问题。使用 Firebug，您可以看到资源的加载错误（如果有）。

**编辑：**

在web.config `<system.web>`部分下修改如下。

```
 <system.web>
  <identity impersonate="true" userName="ServerName\Administrator" password="password"/>
 </system.web> 
```

为用户名和密码提供正确的值。您可以尝试将文件夹权限授予IIS用户组（`IUSR`，`IIS_IUSR`）到托管应用程序的文件夹。（右键单击托管文件夹->选项卡`Properties`下`Security`，您可以找到用户组并可以授予权限）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-25T04:17:02.800

`web.config`尝试在您的文件夹中放置一个文件`Content`。并将以下代码放入其中。

```
<?xml version="1.0"?>

<configuration>
    <system.web>
        <authorization>
            <allow users="*" />
        </authorization>
    </system.web>
</configuration> 
```

# neo4j - 如何为 Neo4j 图形构建自定义 Lucene 索引？

> ID：13060305
> 
> 赞同：0
> 
> 时间：2012-10-25T01:22:00.413
> 
> 标签：neo4j, gremlin

我正在使用 Gremlin 和 Neo4j 来操作来自 infochimps 的[ENRON 数据集](http://www.infochimps.com/datasets/enron-email-data-with-manager-subordinate-relationship-metadata)。这个数据集有两种类型的顶点，`Message`和`Email Addresss`两种类型的边，`SENT`和`RECEVIED_BY`。我想在这个数据集上创建一个自定义索引，`Lucene`为每个顶点创建一个文档，`type: 'Message'`并将来自相关顶点（例如，）的信息合并`v.in()`为文档`v.out()`中的附加字段`Lucene`。

我正在考虑以下代码

```
g = new Neo4jGraph('enron');

PerFieldAnalyzerWrapper analyzer =
    new PerFieldAnalyzerWrapper(new StandardAnalyzer());
analyzer.addAnalyzer("sender", new KeywordAnalyzer());
analyzer.addAnalyzer("recipient", new KeywordAnalyzer());

IndexWriter idx = new IndexWriter (dir,analyzer,IndexWriter.MaxFieldLength.UNLIMITED);

g.V.filter{it.type == 'Message'}.each { v ->
    Document doc = new Document();
    doc.add(new Field("subject", v.subject));
    doc.add(new Field("body", v.body));
    doc.add(new Field("sender", v.in().address);
    v.out().each { recipient -> 
        doc.add(new Field("recipient", recipient.address));
    }
    idx.addDocument(doc);
}
idx.close(); 
```

我的问题是：

1.  有没有更好的方法来枚举用于索引的顶点？
2.  我可以为此使用自动索引吗？如果可以，我如何指定应该索引的内容？
3.  我可以指定我自己的`Analyzer`，还是我坚持默认？什么是默认值？
4.  如果我必须创建自己的索引，我应该为此使用 gremlin，还是使用 Java 程序更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-29T11:41:40.153

我刚刚使用 Java 进程完成了导入，这真的很容易，在我看来，通过 Gremlin 更好地包容。

无论如何，如果进程失败是因为您无法创建 StandardAnalyzer 的新对象。该类的所有构造函数都需要参数，因此您应该创建一个包装类或使用正确版本的 Lucene 创建它，例如构造函数中的参数。

直到今天，Neo4J 只接受到 lucene 版本 36。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:58:24.230

我将在这里谈论直接 Neo4j 访问，因为我在 Gremlin 的旅行并不好。

所以你想在图形本身“之外”构建一个 Lucene 索引？否则，您可以使用内置的 graphDb.index().forNodes("myIndex", configForMyIndex) 来获取（按需创建）与 neo4j 关联的 Lucene 索引。然后，您可以通过调用 index.add(node, key, value) 向每个文档添加多个字段，其中每个节点将由该 Lucene 索引中的一个文档表示。

1) 在 Gremiln... 我不知道

2）见[http://docs.neo4j.org/chunked/milestone/auto-indexing.html](http://docs.neo4j.org/chunked/milestone/auto-indexing.html)

3）见[http://docs.neo4j.org/chunked/milestone/indexing-create-advanced.html](http://docs.neo4j.org/chunked/milestone/indexing-create-advanced.html)

4）您是否需要完全在数据库之外创建它？如果是这样，为什么？

# javascript - 调用 javascript 对象值给了我“未定义”

> ID：13060306
> 
> 赞同：0
> 
> 时间：2012-10-25T01:22:20.227
> 
> 标签：javascript, ajax, json, google-maps

我正在开发一个谷歌地图应用程序，我希望从数据库加载一些标记并将它们显示在地图上。所以我创建了一个数组并定义了一个这样的对象。

```
function shop_data(name,latitude,longitude,type)
    {
    this.name=name;
    this.latitude=latitude;
    this.longitude=longitude;
    this.type=type;
    } 
```

然后，我将从 ajax 请求中检索到的一些数据添加到“shop_data”对象数组中。该数组定义为“all_shops”。

```
var i=0;
for(var o in data){
var name = data[o].name;
    var type = data[o].type;
var lat = data[o].lat;
var lng = data[o].lng;

all_shops[i]=new shop_data(name,lat,lng,type);
i++
} 
```

然后，当我调用“all_shops[i].name”时，它会按原样给我这个名字。但是当我调用“all_shops[i].lat”或“all_shops[i].lng”时，它给了我“未定义”。我也尝试解析 lat,lng。这里 lat, lng 是 MySQL 数据库中的双变量。我可以通过调用名称、类型、lat、lng 从接收到的 ajax 数据中毫无问题地获取 lat、lng 值。但是当我将它们全部放在一个数组中并从数组中调用它们时，事情就出错了。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T01:28:04.937

从改变

```
this.latitude=latitude;
this.longitude=longitude; 
```

到

```
this.lat=latitude;
this.lng=longitude; 
```

您有一个简单的复制/粘贴错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T01:29:08.577

你应该调用你的`latitude`or `longitude`from `all_shops[i]`not`lat`或者`lng` 你有这样的`shop_data`函数定义

```
function shop_data(name,latitude,longitude,type)
{
   this.name=name;
   this.latitude=latitude;
   this.longitude=longitude;
   this.type=type;
} 
```

或者如果想使用`lat`或者`lng`改变`shop_data`函数定义，比如

```
function shop_data(name,latitude,longitude,type)
{
   this.name=name;
   this.lat=latitude;
   this.lng=longitude;
   this.type=type;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T01:29:32.580

更改变量名称以匹配并进行一些清理会给出：

```
function shop_data(name,latitude,longitude,type){
    this.name=name;
    this.lat=latitude;
    this.lng=longitude;
    this.type=type;
} 
```

和：

```
var i=0;
for(var o in data){
    var name = data[o].name;
    var type = data[o].type;
    var lat = data[o].lat;
    var lng = data[o].lng;

    all_shops[i]=new shop_data(name,lat,lng,type);
    i++
} 
```

# sql - 如何将表的记录从数据库检索到另一个数据库

> ID：13060307
> 
> 赞同：0
> 
> 时间：2012-10-25T01:22:32.587
> 
> 标签：sql, database, stored-procedures, sql-server-2005

我有两个具有不同数据库的表：

*   表“帐户”中的 AccntID <--数据库名称“ECPNWEB”
*   表“tblPolicy”中的 AccountTID <--数据库名称“GENESIS”

现在我想像这样插入“tblPolicy”：<--database 'GENESIS'

```
 INSERT INTO dbo.tblPolicy
      ( 

        PolicyID                 ,
        AccountTID               ,
        DistributorID            ,
        CARDNAME                 ,
        DENOMINATION             ,
        RETAILPRICE              ,
        COSTPAYABLE              ,
        ECPAYFEES                ,
        PLUCODE 

      ) 
-- Insert statements for procedure here

select t.* from
(Select  AccountTID=@AccntID, DistributorID=@DistributorID, CARDNAME=@CARDNAME, DENOMINATION=@DENOMINATION, RETAILPRICE=@RETAILPRICE, COSTPAYABLE=@COSTPAYABLE, ECPAYFEES=@ECPAYFEES, PLUCODE=@PLUCODE) t,
account a
where a.AccntID = t.AccountTID --for account 
```

现在我要做的是将此“仅”插入到与具有不同数据库“GENESIS”的“帐户”表连接的 tblPolicy

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T01:36:42.320

您可以从两个数据库中进行选择，如下所示：

```
SELECT table1.SomeField, table2.SomeField
FROM   [ServerName1].[Database1].[dbo].[Table1] table1
       INNER JOIN [ServerName2].[Database2].[dbo].[Table2] table2
       ON table1.SomeField = table2.SomeField 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T03:52:13.757

关键点是 [ServerName].[DatabaseName].[databaseowner].[tableName]..ie 完全限定名

这应该工作

```
;With Cte As
(
    Select AccountTID=@AccntID
    , DistributorID=@DistributorID
    , CARDNAME=@CARDNAME
    , DENOMINATION=@DENOMINATION
    , RETAILPRICE=@RETAILPRICE
    , COSTPAYABLE=@COSTPAYABLE
    , ECPAYFEES=@ECPAYFEES
    , PLUCODE=@PLUCODE
)

INSERT INTO GENESIS..dbo.tblPolicy
  ( 
    PolicyID                 ,
    AccountTID               ,
    DistributorID            ,
    CARDNAME                 ,
    DENOMINATION             ,
    RETAILPRICE              ,
    COSTPAYABLE              ,
    ECPAYFEES                ,
    PLUCODE 

  ) 

Select t.*
From Cte t,ECPNWEB..account a WITH (NOLOCK) 
where a.AccntID = t.AccountTID 
```

# javascript - 检查是否至少选择了一个单选按钮 - JavaScript

> ID：13060313
> 
> 赞同：18
> 
> 时间：2012-10-25T01:23:20.137
> 
> 标签：javascript

假设我有以下`HTML`表格：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <title>Choose</title>
</head>

<body>
  <form method="post" enctype="application/x-www-form-urlencoded">
    <h1>Choose</h1>

    <p><input type="radio" name="choose" value="psychology"><font size="5" color="#0033CC">Instant Psychology</font><br>
    <br>
    <input type="radio" name="choose" value="geography"><font size="5" color="#CC0000">Instant Geography</font><br>
    <br>
    <input type="radio" name="choose" value="gastronomy"><font size="5" color="#660033">Instant Gastronomy</font><br>
    <br>
    <input type="submit" name="Submit" value="Go"></p>
  </form>

</body><link rel="stylesheet" type="text/css" href="data:text/css,"></html> 
```

如何编写一个`JavaScript`函数来确保至少选择了一个无线电输入？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-25T01:26:24.957

像这样的东西应该可以解决问题

```
if ($("input[type=radio]:checked").length > 0) {
    // Do your stuff here
} 
```

**更新** 没有看到它不应该有 jQuery，所以这里有一个替代函数来检查纯 JS

```
 function check(){
     var radios = document.getElementsByName("choice");

     for (var i = 0, len = radios.length; i < len; i++) {
          if (radios[i].checked) {
              return true;
          }
     }

     return false;
 } 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-08-27T18:29:45.550

如果您的目标浏览器支持[HTML5 required](http://www.w3schools.com/tags/att_input_required.asp)属性，则可以不使用 javascript。

```
<input type="radio" name="choose" value="psychology" required>
<input type="radio" name="choose" value="geography" required>
<input type="radio" name="choose" value="gastronomy" required> 
```

请注意，在 chrome 中，您只需要`required`输入其中一个输入。我不确定其他浏览器会做什么。

除了 javascript 验证（如所选答案）之外，我通常还会这样做，以便也支持 html 4 浏览器。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-25T01:27:48.820

循环遍历`<input>`标签，检查类型以及是否已检查。

```
function isOneChecked() {
  // All <input> tags...
  var chx = document.getElementsByTagName('input');
  for (var i=0; i<chx.length; i++) {
    // If you have more than one radio group, also check the name attribute
    // for the one you want as in && chx[i].name == 'choose'
    // Return true from the function on first match of a checked item
    if (chx[i].type == 'radio' && chx[i].checked) {
      return true;
    } 
  }
  // End of the loop, return false
  return false;
} 
```

[这是在 jsfiddle 上运行的](http://jsfiddle.net/6AQk8/)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-01-02T21:11:48.597

我是这样解决的。

```
if(document.querySelector('input[name="choice"]:checked') == null) {
    window.alert("You need to choose an option!");
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-25T02:12:51.023

既然您说您需要知道是否“至少选择了一个输入”，您可能需要复选框而不是单选按钮。（您一次只能从一组共享一个`name`值的单选按钮中选择一个单选按钮。）

您可能应该删除`font`标签并稍微更新您的 HTML：

**HTML**

```
<h1>Choose</h1>
<div>
    <input type="checkbox" id="ckb-psychology" name="choose" value="psychology">
    <label for="ckb-psychology" class="blue">Instant Psychology</label>
</div>
<div>
    <input type="checkbox" id="ckb-geography" name="choose" value="geography">
    <label for="ckb-geography" class="red">Instant Geography</label>
</div>
<div>
    <input type="checkbox" id="ckb-gastronomy" name="choose" value="gastronomy">
    <label for="ckb-gastronomy" class="purple">Instant Gastronomy</label>
</div>
<input type="submit" name="Submit" value="Go"> 
```

**CSS**

```
label { font-size: 1.5em; }

.blue { color: #0033CC; }
.red { color: #CC0000; }
.purple { color: #660033; } 
```

**JavaScript**

```
function isOneChecked ( name ) {

    var checkboxes = document.getElementsByName( name ),
        i = checkboxes.length - 1;

    for ( ; i > -1 ; i-- ) {

        if ( checkboxes[i].checked ) { return true; }

    }

    return false;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-27T00:51:15.480

这个问题被问到一个`JS`解决方案。但是，这里有一个非常简单的技巧来使用`HTML`. 您可以简单地`required`使用`HTML input tag`.

**示例代码**

```
<input type="radio" name="gender" value="male" required>Male<br>
<input type="radio" name="gender" value="female">Female 
```

**你的表格**

请注意，您只需`required`为整个电台组提及一次关键字。

```
<form method="post" enctype="application/x-www-form-urlencoded">
    <h1>Choose</h1>

    <p><input type="radio" name="choose" value="psychology" required><font size="5" color="#0033CC">Instant Psychology</font><br>
    <br>
    <input type="radio" name="choose" value="geography"><font size="5" color="#CC0000">Instant Geography</font><br>
    <br>
    <input type="radio" name="choose" value="gastronomy"><font size="5" color="#660033">Instant Gastronomy</font><br>
    <br>
    <input type="submit" name="Submit" value="Go"></p>
  </form> 
```

# c++ - 如何使用 SWIG 为 C++ std::vector 生成 Lua 迭代器？

> ID：13060314
> 
> 赞同：1
> 
> 时间：2012-10-25T01:23:24.927
> 
> 标签：c++, lua, swig

在`lua/std_vector.i`SWIG 2.0.8 评论中说：

> 并且不支持迭代器和插入/擦除

但也许有人知道该怎么做？

例如，可以`#`通过定义添加长度运算符`__len`（它可能是偶然的，我通过反复试验找到了它）：

```
%include "std_vector.i"
%extend std::vector { int __len(void*) { return self->size(); } }
namespace std {
    %template(PointVector) vector<fityk::Point>;
} 
```

我已经尝试过类似的技巧`__call`，但我被卡住了。SWIG 包装妨碍了。我已经尝试使用`%native`，但无法使其与`%extend`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T22:35:25.260

I don't know how to do it in SWIG template, but I managed to plug `__call` to SWIG-generated metatable from C++, after calling `luaopen_module`:

```
 SWIG_Lua_get_class_metatable(L_, PointVector);
    SWIG_Lua_add_function(L_, "__call", lua_vector_iterator); 
```

So the vector can be used as iterator. A bit awkward 2 in 1, but works:

```
> = points
<PointVector userdata: 190FBE8>
> for n, p in points do print(n, p) end
0       (24.0154; 284; 16.8523)
1       (24.0541; 343; 18.5203) 
```

The iterator returns index and value, like `enumerate()` in Python, and Lua passes the index back to the iterator next time (3rd arg on the stack). I haven't seen this behaviour documented, so I may rely on implementation details.

Here is the function used as `__call()`:

```
// SWIG-wrapped vector is indexed from 0\. Return (n, vec[n]) starting from n=0.
static int lua_vector_iterator(lua_State* L)
{
    assert(lua_isuserdata(L,1)); // in SWIG everything is wrapped as userdata
    int idx = lua_isnil(L, -1) ? 0 : lua_tonumber(L, -1) + 1;

    // no lua_len() in 5.1, let's call size() directly
    lua_getfield(L, 1, "size");
    lua_pushvalue(L, 1); // arg: vector as userdata
    lua_call(L, 1, 1);   // call vector<>::size(this)
    int size = lua_tonumber(L, -1);

    if (idx >= size) {
        lua_settop(L, 0);
        return 0;
    }

    lua_settop(L, 1);
    lua_pushnumber(L, idx); // index, to be returned
    lua_pushvalue(L, -1);   // the same index, to access value
    lua_gettable(L, 1);     // value, to be returned
    lua_remove(L, 1);
    return 2;
} 
```

# java - java中动作声明上的NullPointerException

> ID：13060318
> 
> 赞同：0
> 
> 时间：2012-10-25T01:24:16.440
> 
> 标签：java, swing, user-interface, netbeans, nullpointerexception

我有一个按钮，我希望它在单击时运行一个方法，这是该按钮的代码...

```
 playAgainButton.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        action(e);
                    }

public void action(ActionEvent e) {

                        Main.playerTurn = true;
                        Main.computerWon = false;
                        Main.playerWon = false;

                        button1.setText("");
                        button2.setText("");
                        button3.setText("");
                        button4.setText("");
                        button5.setText("");
                        button6.setText("");
                        button7.setText("");
                        button8.setText("");
                        button9.setText("");
                    }
                    }); 
```

但我在这里得到一个 NullPointer 错误也是如此......

```
java.lang.ExceptionInInitializerError
Caused by: java.lang.NullPointerException
    at tictactoe.tictactoe.initComponents(tictactoe.java:281)
    at tictactoe.tictactoe.<init>(tictactoe.java:13)
    at tictactoe.Main.<clinit>(Main.java:30)
Exception in thread "main" Java Result: 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T01:25:58.790

`playAgainButton`可能是`null`！检查是否`null`：

```
System.out.print("Is playAgainButton null? " + (playAgainButton == null)); 
```

# jquery - 这个 json/jquery 调用的正确语法是什么？

> ID：13060320
> 
> 赞同：0
> 
> 时间：2012-10-25T01:24:35.770
> 
> 标签：jquery, json, cordova, syntax

我正在使用 phonegap 并在页面上进行搜索。表单中的 id 是 mysearch，应该放在 $.get 调用的末尾。我知道调用是正确的，因为我可以将它放在浏览器中并以 json 格式获取所需的输出。问题是我在表单中输入的内容并没有最终进入通话。在通话结束时，我的语法可能不正确。任何帮助将非常感激。表单代码和调用如下。

```
 <form action="searchresult.html" method="post">
    <input type="search" name="mySearch" id="mySearch" data-mini="true" data-   theme="b" style="color:#888;"
    value="" onfocus="inputFocus(this)" onblur="inputBlur(this)" autocorrect="off" autocomplete="off" autocapitalize="off" />
    </form>

    <script>
     $("#resultPage").live("pageshow", function (){
       $.get("http://www.test.net/jquery/test.cfc?method=getsearch&returnformat=json&searchName=" + $("#mySearch").val(), {},  function(res) { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T01:26:34.320

尝试使用 .on insted .live （因为不推荐使用此方法）

```
 $.get("YOUR URL", function(res) {
   // implement logical
}, 'JSON').error(function(){
   alert('Http error'); // protocol error like 404
}); 
```

# ms-access - 如何使用 VBA 中的查询结果来更新表？

> ID：13060321
> 
> 赞同：0
> 
> 时间：2012-10-25T01:24:41.533
> 
> 标签：ms-access, vba

我确信我的处理方法不正确，因为数据库必须存在设计问题，但我现在愿意尝试任何事情。

在一个表单上，我有一个主子表单，其中包含不同类型的土地和两个按钮（上一个和下一个）的下拉列表。这个子表单数据源是一个名为 Section22_PMLU 的表

嵌套在这个子表单中的是另一个使用 PMLU_Code 链接到父子表单的子表单。此数据正在更新到表 Section22_Data。

当用户单击父子窗体上的下拉菜单并进行土地选择，然后在子子窗体中选择详细信息（土地特征）时，此数据将正确显示在数据表中。即使用户再次单击下拉菜单（不创建新记录）并添加子记录，这也会反映在数据表中。

问题在于 PMLU 表。如果我最初从嵌套子表单中进行选择并添加数据，则此记录将记录/显示在 PMLU 表中。如果我单击下拉字段并单击“添加新记录”或按 Ctrl+，然后从下拉列表中选择一个新项目 - 它会在表格中正确记录/显示。但是，如果我在没有先创建新记录的情况下进行选择，则此项目将复制先前添加的项目。当我尝试返回（上一个按钮）查看未显示的记录时。但是它仍然在数据表中。

为了纠正这个问题，我必须直接进入 PMLU 表并添加与数据表中的 PMLU 代码匹配的缺失 PMLU 代码。

如果我运行以下查询，我会得到那些缺少的 PMLU。如何使用结果用缺失代码填充 PMLU 表

```
SELECT Section22_2_Data.PMLU_Code, Section22_2_Data.PMLUType
FROM Section22_2_Data LEFT JOIN Section22_2_PMLU ON Section22_2_Data.[PMLU_Code] = Section22_2_PMLU.[PMLU_Code]
WHERE (((Section22_2_PMLU.PMLU_Code) Is Null)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T00:39:10.850

我使用以下代码刷新修复了问题的表

```
Private Sub btnRefresh_Click()

    Dim strSQL As String

    strSQL = "INSERT INTO Section22_2_PMLU ( PMLU_Code )
        SELECT DISTINCT Section22_2_Data.PMLU_Code
        FROM Section22_2_Data LEFT JOIN Section22_2_PMLU ON Section22_2_Data.[PMLU_Code] = Section22_2_PMLU.[PMLU_Code]
        WHERE (((Section22_2_PMLU.PMLU_Code) Is Null));"
    CurrentDb().Execute strSQL, dbFailOnError
    ' Next 3 only to ensure the append is commited to the table '
    ' before requerying '
    DoEvents
    DBEngine.Idle dbRefreshCache
    DoEvents

    Me.Requery

End Sub 
```

# ios - 应用名称中的撇号

> ID：13060330
> 
> 赞同：4
> 
> 时间：2012-10-25T01:25:45.620
> 
> 标签：ios, xcode, apostrophe

我打算在 Apple 商店中发布一个标题中包含撇号的应用程序。我注意到当“目标”名称包含撇号时，XCode 在构建代码时已经存在问题。通过使用以下字符，我已经设法解决了这个问题（现在）：

```
’ 
```

相对于：

```
' 
```

这似乎构建得很好，但我有点担心以后可能会发生什么，例如当我将最终构建提交到商店等时。

有没有人碰巧知道这个小解决方法是否合适，或者我只是在为一个充满问题的世界做好准备？

例如，使用这样的抽象字符是否意味着没有人可以在商店中*搜索我的应用程序？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T20:44:49.617

将在 iOS 弹簧板上显示的应用程序的显示名称在应用程序的 infoPlist 中设置，与构建设置无关。Xcode 项目、目标和所有其他文件可以任意命名。

您需要`CFBundleDisplayName`在应用的 Info.plist 中设置。默认情况下，它设置为`${PRODUCT_NAME}`目标名称的 Xcode 配置变量，但它可以是您喜欢的。

更进一步，您应该使用该`InfoPlist.strings`文件为不同的本地化重载该值。在此文件中设置值将使 Info.plist 中的其他值过时。这些天 Xcode 在新项目中带有一个空白的，但如果它不存在，它很容易添加。

InfoPlist.strings 文件如下所示：

```
"CFBundleDisplayName" = "App's Name"; 
```

**注意：**如果您已将应用程序名称设置为如上，并且弹簧板未显示撇号，则可能是故意将其取出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T23:12:46.040

您似乎在谈论您在 App Store 中的应用程序的标题，该标题已输入 iTunes Connect，并且**与您编写的任何代码完全无关。**

如果您在 iTunes 连接中的应用程序名称中放置一个撇号，它可能会影响用户搜索您的应用程序，正如您所怀疑的那样。但应用程序通常具有扩展名称，为应用程序名称提供更多上下文，您还应该使用**关键字**来你的优势。

您应该查看[iTunes Connect 开发人员指南](http://developer.apple.com/library/mac/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/1_Introduction/Introduction.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-12T08:51:32.180

将您的`CFBundleDisplayName`in info.plist 编辑为

```
<string>App&apos;s Name</string> 
```

完美运行。我已经在生产应用程序中使用了上面，没有问题。

# jsf - ManagedBean 中的远程轮询并通过推送通知客户端视图

> ID：13060337
> 
> 赞同：9
> 
> 时间：2012-10-25T01:26:47.640
> 
> 标签：jsf, jakarta-ee, timer

我有一个 jsf 视图，它显示了来自表中托管 bean（视图范围）的一些数据，这些数据是远程检索的。
目前，数据是通过使用 primefaces 轮询组件从客户端视图轮询来更新的。

这还不够，因为有太多流量被发送到客户端，而且现在 primefaces 支持服务器推送，我只想重新加载数据并将其推送到客户端视图（如果数据已更改）。

这应该通过从 Web 层轮询到应用程序层调用类似`hasChanged(...)`. 如果数据发生更改，Web 层会向客户端推送通知以重新加载数据。

**当前客户投票**

客户端**>>**网络层**>>**应用层

*客户端通过 ajax 向 web 层请求数据，再次向应用层请求数据并更新视图*

**希望网络层投票和推送**

客户端**<<**网络层**>>**应用层

*网络层轮询应用层数据是否已更改并代表重新加载并通知（推送）客户端更新视图*

**方法：**

在 web 层的托管 bean 上实现轮询的最佳方法是什么？

1.  托管 bean 中的 TimerTask 在
    [JSF 托管 bean 中生成线程，用于使用计时器的计划任务](https://stackoverflow.com/questions/7499534/applicationscope-bean-that-uses-a-timertask-sheduler-good-or-bad)
2.  带有 Schedule 注释的附加 EJB
3.  带有 TimerService 的附加 EJB
4.  其他？

**编辑：**

**架构：（3层）**

*   Server1：数据库
*   Server2：应用层（EAR 与远程 EJB + Hibernate）
*   Server3：网络层（使用 JSF 2.0 + Primefaces 3.4 的 WAR）
*   客户端：浏览器

![建筑学](../Images/6155cbdedfd3df30ffe3c9ea9c7854ae.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T05:32:17.027

根据我的经验，我可以推荐两条路线，Spring Integration 和 CDI Events。我推荐 Spring 路线，但根据您当前的堆栈，我认为[CDI 事件](https://blogs.oracle.com/arungupta/entry/totd_145_cdi_events_a)已经涵盖了您。它们干净利落地帮助您实现 Observer/Observable 模式，并且您也可以清晰地分离层。不过我必须警告您，这种方法仅对中小型用例有效。考虑以下：

1.  设计并实现一个`Event`类，该类封装了需要传递给消费者的所有信息。我们称它为`FundsTransfer`事件 您的事件实现应该包含足够的信息以使侦听器仅过滤感兴趣的事件。一个简单的 POJO

    ```
    class FundsTransfer {

        BigDecimal transferValue;
        Date transferDate;
        int transferCurrencyCode;

        public FundsTransfer(BigDecimal transferValue, Date date, int currencyCode) {
            //set accordingly
        }
        //setters and getters
    } 
    ```

2.  在业务层实现一个业务对象，调用它`Notifier`。轮询的功能应该委托给这个对象。它将负责创建和发布类型对象`event`以响应服务器端的更改。根据您的要求，此对象可以是处理所有`Event`类型的单例，或者您可以让一组`Notifier`类型轮询不同的事件。

    ```
    //A sample implementation of your Observer object :
    @Singleton //Defines a singleton EJB
    public class PollerService {

        @Inject
        Event fundsTranferNotifier;

        //this annotation specifies that the polling method should run every second.
        @Schedule(second = "*/1", minute = "*", hour = "*", persistent = false)
        public void pollIt() {
            boolean found = this.pollingMethod(); // pollingMethod() will do the actual polling
            if (found) {     //based on the outcome of the polling method, fire the notifier  method
                blowWhistleOnTransfer();
            }
        }

        public void blowWhistleOnTransfer() {
            //this is the broadcast event.
            fundsTransferNotifier.fire(new FundsTransfer(new BigDecimal("100000", new Date(), 855));
        }
    } 
    ```

    在上面的代码中，我使用`Timer`EJB 作为我的观察者。有关EJB 计时器的介绍，请参阅[此内容。](http://what-when-how.com/enterprise-javabeans-3/scheduling-the-ejb-3-timer-service/)同样，该`Observer`对象将存在于应用层中

3.  每个客户端层都可以访问一个侦听器对象，当感兴趣的事件发生时（即已由某个`Notifier`类型发布），该对象将得到通知。`push`然后监听器可以基于这个事件发出一个。您的侦听器对象可以是带有`@Named`CDI 注释的 POJO。在您的侦听器对象中，只需实现一个带有`@Observes`注释的方法，并带有侦听器感兴趣的事件类型的参数：

    ```
    public void onNewTransfer(@Observes FundsTransfer transfer) {
        if (transfer.compareTo(new BigDecimal("150000")) > 0) {
            //push to view.
        }
    } 
    ```

    与 CDI 提供的消息过滤选项相比，上述过滤仍然相当粗糙。从我之前引用的教程中可以看出，您可以创建 CDI 限定符，以便对消息进行更细粒度的过滤。就像我之前所说的，这对于大规模部署来说有点繁重，在这种情况下，如果你愿意依赖的话，我会建议使用 spring 集成路线。

总之，系统的模型将是：

```
 One Poller(Notifier) Object (In the app layer)
                    |
                    |
                    |
            Multiple Listener Objects (In the web tier)
---------------------------------------------------
|   |    |    |    |   |   |     |   |    |    |  | 
```

# ruby-on-rails - 添加 Process.daemon 时 Ruby 脚本未运行

> ID：13060339
> 
> 赞同：0
> 
> 时间：2012-10-25T01:27:06.987
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, daemon

我有以下简单的脚本，它检查电子邮件帐户，如果有新邮件，它会转发电子邮件并发送短信。当脚本在没有`Process.daemon`. 添加后，电子邮件帐户收到电子邮件，没有任何反应（没有转发，也没有发送 SMS）并且控制台中没有错误消息。有什么建议么？

```
#!/usr/bin/env ruby
require "bundler/setup"
require "mailman"
require "twilio-ruby"

Mailman.config.pop3 = {
  :username => 'address@gmail.com',
  :password => 'password',
  :server   => 'pop.gmail.com',
  :port     => 995,
  :ssl      => true
}

Mailman.config.poll_interval = 60

Mailman::Application.run do  
  default do
    begin
      Ticket.receive_mail(message)
      MailForwarder.forwarded_email(message).deliver
      @account_sid = 'xxxxxxxxxxx'
      @auth_token = 'xxxxxxxxxx'
      @client = Twilio::REST::Client.new(@account_sid, @auth_token)
      @account = @client.account
      @sms = @account.sms.messages.create(
        :from => '+1111111111',
        :to => '+122222222',
        :body => message.subject
      )
      puts @sms
      puts "#{message.subject}"
    rescue Exception => e
      Mailman.logger.error "Exception occurred whle receiving message:\n#{message}"
      Mailman.logger.error [e, *e.backtrace].join("\n")
    end
  end
  Process.daemon
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T17:01:28.110

我相信您需要在启动 mailman 应用程序之前将您的脚本设置为守护进程。我做了一些测试，如果我在调用 Mailman::Application.run 之前调用 Process.daemon 它工作正常，但如果我把它放在你有它的地方它就不起作用。

所以我把它当作：

```
....

Mailman.config.poll_interval = 15

Process.daemon

Mailman::Application.run do

 default do

 end

end 
```

# javascript - 了解 JavaScript 安全模型

> ID：13060344
> 
> 赞同：2
> 
> 时间：2012-10-25T01:27:30.377
> 
> 标签：javascript, cross-domain, security

为什么我可以向具有跨域地址的 iframe 提交表单，但无法向该地址发送 XMLHTTPRequest？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T01:38:46.730

原因很简单，您的代码看不到 iframe 帖子的结果。您的脚本将被拒绝访问 iframe 的 DOM。

请记住，这实际上是*浏览器的*安全模型，而不是 JavaScript 的。

# python - 如果日期字符串中有字符或负数，我如何编写语句？

> ID：13060345
> 
> 赞同：2
> 
> 时间：2012-10-25T01:27:34.707
> 
> 标签：python, date

这是我到目前为止所做的。我是 python 新手。我想知道的是当日期字符串中存在字符时如何获取无效日期。例如 01/x1/2012 如果日期输入负数，则打印出无效日期。不使用导入或日历

```
dateStr = input("Date: ")
monthStr, dayStr, yearStr = dateStr.split("/")

months = ["January", "February","March", "April", "May", "June", "July", "August","September","October", "November","December"]
monthStr = months[int(monthStr)- 1]

print ("The date is:", monthStr, dayStr+",", yearStr)

if chr in dateStr:
    print("Invalid date") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T01:30:32.907

这些事情通常更容易完成`datetime`：

```
import datetime
date_str = input("Date: ")
try:
    date = datetime.datetime.strptime(date_str,'%m/%d/%Y')
except ValueError:
    print ("Bad date") 
```

* * *

没有日期时间：

```
def parse_date(date_str):
    pieces = date_str.split('/')
    try:
        for piece in pieces:
           assert int(piece) > 0
    except (ValueError,AssertionError):
        print ("Bad Date")
    else:
        print ("Good date")

parse_date('01/x1/2010')   #Bad Date
parse_date('01/-1/2010')   #Bad Date
parse_date('01/01/2010')   #Good date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T01:30:49.277

我会说，用正则表达式解析日期的有效性。为了让你开始，这个正则表达式将匹配 xx/xx/xxxx 格式的任何日期，其中 x 是一个数字

```
/d{1,2}//d{1,2}//d{4} 
```

您可以自定义您的正则表达式并检查有效匹配。

**编辑**：看起来使用日期时间是一个更好的主意

# php - 带有 mySQL 结果的 PHP If 语句

> ID：13060346
> 
> 赞同：-1
> 
> 时间：2012-10-25T01:27:38.087
> 
> 标签：php, mysql, if-statement

下面的代码应该检查数据库中是否有一个人，数据库中有一行，其用户名是从 cookie 登录获得的用户名。如果有，它应该包含一个页面，如果没有人在具有此 user_id 的数据库中，它应该回显。这是我到目前为止的代码，请告诉我我将如何做到这一点。在有人告诉我像我这样的 mySQL 语句正在贬值之前，我也已经知道了。这是我的代码：

```
<?php
include("dbconnect.php");
mysql_select_db("maxgee_close2");
$username = $_COOKIE['maxgee_me_user']; 
$result = mysql_query("select user_id from users where username = '$username'");
$row = mysql_fetch_array($result);    
mysql_free_result($result);
$check = mysql_query("SELECT * FROM events_main WHERE user_id ='$row['user_id']'") or die(mysql_error());
if(1==1){
  if (mysql_num_rows($check)>0) 
 {
include("example.php");
 }
  else
  {
  echo "example";
  }
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T01:55:26.167

在双引号字符串中，您的数组变量`$row['user_id']`被错误地解析，因为您引用了数组键而没有将整个内容包围在`{}`. *如果您不引用数组 key* ，则允许`{}`在双引号字符串中省略，但这会增加可读性。*`{}`*

 *```
check = mysql_query("SELECT * FROM events_main WHERE user_id ='{$row['user_id']}'") or die(mysql_error());
//-------------------------------------------------------------^^^^^^^^^^^^^^^^^^

// Also acceptable, but not as tidy, and troublesome with multidimensional 
// or variable keys - unquoted array key
check = mysql_query("SELECT * FROM events_main WHERE user_id ='$row[user_id]'") or die(mysql_error());
//-------------------------------------------------------------^^^^^^^^^^^^^^^^^^ 
```

如上所述，`$_COOKIE`从不认为是安全值。如果您继续使用旧`mysql_*()`API，则必须转义其值以防止 SQL 注入：

```
$username = mysql_real_escape_string($_COOKIE['maxgee_me_user']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T01:58:29.307

2 事情马上发生，就像 Waleed 说你对 SQL 注入持开放态度，这对你来说并不是一件好事。我会考虑阅读有关 MySQLi 和 PDO 的教程，从那里尝试深入研究更好的方法或运行查询。

您还选择使用 cookie 而不是会话来存储用户名？Cookie 可以在客户端进行修改，以说出任何使用 firebug 的聪明用户想要的内容。会话存储在服务器端，客户端（最终用户）只获得会话的 id。如果您将其作为会话发送，他们将无法修改用户名。（他们可以尝试将会话 ID 更改为另一组随机数字，但这就像在风中撒尿，请原谅我的法语。

这是一些pseduo代码，我认为可以让你上路

```
<?php
 include("dbconnect.php");

 $database = "maxgee_close2"; //Set the database you want to connect to

 mysql_select_db($database); //Select database

 $username = $_SESSION['maxgee_me_user']; //Grab the username from a server-side stored session, not a cookie!

 $query = "SELECT user_id FROM `users` WHERE `username` = '" . mysql_real_escape_string($username) . "' LIMIT 1"; //Note the user of mysql_real_escape_string on the $username, we want to clean the variable of anything that could harm the database.

 $result = mysql_query($query);

 if ($row = mysql_fetch_array($result)) {
  //Query was ran and returned a result, grab the ID
  $userId = $row["user_id"];

  mysql_free_result($result); //We can free the result now after we have grabbed everything we need

  $query_check = "SELECT * FROM `events_main` WHERE `user_id` = '" . mysql_real_escape_string($userId) . "'";

  $check = mysql_query($query_check);
   if (mysql_num_rows($check)>0) {
    include("example.php");
   }
   else {
    echo "example";
   }
 }

 ?> 
```

该代码可能/可能不起作用，但真正的关键变化是您正在运行 mysql_free_result($result); 在您的脚本有机会从数据库中获取用户 ID 之前。

总而言之，我真的会回去阅读更多教程。*

# python - 如何找到带有特定文本的 HTML 标签？- 美丽汤

> ID：13060347
> 
> 赞同：0
> 
> 时间：2012-10-25T01:27:45.937
> 
> 标签：python, regex, beautifulsoup

这是来源：

```
<span class="new"> <a class="blog" href="http://whatever1.com" rel="nofollow">whatever1</a> do something at <a class="others" href="http://example1.com" rel="nofollow">example1</a></span>

<span class="new"> <a class="blog" href="http://whatever2.com" rel="nofollow">whatever2</a> do other things at <a class="others" href="http://example2.com" rel="nofollow">example2</a></span>

<span class="new"> <a class="blog" href="http://whatever3.com" rel="nofollow">whatever3</a> do something at <a class="others" href="http://example3.com" rel="nofollow">example3</a></span> 
```

我想在其中找到所有内容`<span class="new">`，`do something at`这是我的代码，我只是不知道为什么它不起作用：

```
soup = bs4.BeautifulSoup(html, "lxml")
all_tags = soup.findAll(name = "span", attrs = {"class": "new"}, text = re.compile('do something.*')) 
```

什么都没找到。如果我删除`text = re.compile('.*do something.*')`所有上述标签，我知道我的正则表达式模式应该有问题，那么正确的形式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T01:51:24.070

您总是可以尝试混合方法：

```
soup = bs4.BeautifulSoup(html, "lxml")
spans = soup.findAll("span", attrs = {"class": "new"})
regex = re.compile('.*do something at.*')
desired_tags = [span for span in spans if regex.match(span.text)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T01:50:17.643

遍历 html 文件内容并打印匹配的行。在这里，我用列表 l 替换了文件内容：

```
>>> l = ['<span class="new"> <a class="blog" href="http://whatever1.com" rel="nofollow">whatever1</a> do something at <a class="others" href="http://example1.com" rel="nofollow">example1</a></span>', 

'<span class="new"> <a class="blog" href="http://whatever2.com" rel="nofollow">whatever2</a> do other things at <a class="others" href="http://example2.com" rel="nofollow">example2</a></span>',

'<span class="new"> <a class="blog" href="http://whatever3.com" rel="nofollow">whatever3</a> do something at <a class="others" href="http://example3.com" rel="nofollow">example3</a></span>' ]
>>> for i in range(len(l)):
    if re.search('<span class="new">.*do something.*', l[i]):
        print l[i]

<span class="new"> <a class="blog" href="http://whatever1.com" rel="nofollow">whatever1</a> do something at <a class="others" href="http://example1.com" rel="nofollow">example1</a></span>
<span class="new"> <a class="blog" href="http://whatever3.com" rel="nofollow">whatever3</a> do something at <a class="others" href="http://example3.com" rel="nofollow">example3</a></span>
>>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T04:34:31.220

这就是我通常查找文本的方式。

```
spans = soup.findAll("span", attrs = {"class": "new"})
for s in spans:
    if "do something" in str(s): 
```

# .htaccess - .htaccess 将所有子目录重定向到文件

> ID：13060355
> 
> 赞同：0
> 
> 时间：2012-10-25T01:28:55.770
> 
> 标签：.htaccess

我一直在尝试找到一种方法将除少数目录之外的所有目录重定向到带有变量的文件

例子：

```
site.com/test -> index.php?a=test 
```

我希望转发所有子目录，但以下除外

```
/images
/admin
/includes 
```

我已经尝试了以下但没有成功。

```
RewriteCond %{REQUEST_URI} !^/images(/|$)
RewriteCond %{REQUEST_URI} !^/admin(/|$)
RewriteCond %{REQUEST_URI} !^/includes(/|$)
RewriteRule ^([\w/]*)$ index.php/?a=$1 [L] 
```

有没有办法使用 .htaccess 来完成这个

编辑：

我发现这更接近我正在寻找的内容，但需要对其进行更新以允许访问 /images /admin /includes。

```
Options +FollowSymLinks -MultiViews
RewriteEngine on
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) index.php?a=$1  [NC,L,R=301] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T01:39:23.177

在 .htaccess 中，您可以使用此规则

```
RewriteEngine On
RewriteRule !\.(js|jpeg|ico|gif|jpg|png|css|xml|html|swf|zip|tar|pdf|flv|gz|wmv|avi|rar|mp3)$ index.php [L] 
```

在您的应用程序中，您可以获得**$_SERVER["REQUEST_URI"]**并随心所欲地进行操作！

```
<?php
$route = explode('/', $_SERVER['REQUEST_URI']);
print_r($route); 
```

# git - 执行读树合并后，Git 日志显示很少

> ID：13060356
> 
> 赞同：3
> 
> 时间：2012-10-25T01:28:58.580
> 
> 标签：git

所以我已经将另一个存储库合并到当前存储库的子目录中，如下所示：

```
git remote add -f Bproject /path/to/B
git merge -s ours --no-commit Bproject/master
git read-tree --prefix=dir-B/ -u Bproject/master
git commit -m "Merge B project as our subdirectory" 
```

不过，似乎有一些微妙的问题。当我做

```
git log dir-B/ 
```

结果只是“将 B 项目合并为我们的子目录”消息。如何获取我想要的日志信息，即dir -B的导入历史？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T01:53:36.190

您的合并提交显示`example.txt`为`BProject/master`重命名为`dir-B/example.txt`. 除非使用该选项，`git log`否则不遵循重命名后的文件/目录的历史记录：`--follow`

```
--follow
Continue listing the history of a file beyond renames (works only for a single file). 
```

如果你真的很想正确显示差异，你可以重写`Bproject/master`历史，就好像项目一直在一个目录`dir-B`中一样，然后做一个普通的合并。这将意味着合并历史的 SHA 与 上的 SHA 无关`Bproject/master`！不过，时间戳、作者和提交消息都将保留其原始值。

如果你想这样做，我建议`Bproject`先单独克隆，然后在该克隆中运行它：

```
git-filter-branch manpage

To move the whole tree into a subdirectory, or remove it from there:
git filter-branch --index-filter \
        'git ls-files -s | sed "s-\t\"*-&newsubdir/-" |
                GIT_INDEX_FILE=$GIT_INDEX_FILE.new \
                        git update-index --index-info &&
         mv "$GIT_INDEX_FILE.new" "$GIT_INDEX_FILE"' HEAD 
```

在您确认新历史看起来正确后，您可以将重写的版本作为远程添加到您的主项目中，并使用普通合并将其合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-07T12:01:43.827

基于 r3m0t 重写历史的想法，以下几行为我完成了整个技巧，将另一个 git 存储库作为新分支合并到我现有的一个子目录中：

（在工作中`git-sh`我可以省略命令的前导“git”）

```
co -b my-new-branch 
remote add -f origin-my-old-standalone-project ../my-old-standalone-project/
pull origin-my-old-standalone-project master
mkdir my-new-subdir
ci -am "merge 'old' standalone project as new branch 'my-new-branch'"
git filter-branch --index-filter \
        'git ls-files -s | sed "s%\t\"*%&my-new-subdir/%" |
                GIT_INDEX_FILE=$GIT_INDEX_FILE.new \
                        git update-index --index-info &&
         mv "$GIT_INDEX_FILE.new" "$GIT_INDEX_FILE"' HEAD 
```

之后我拥有了两个：新子目录中的单个文件的历史记录，好像它们一直在那里，以及主目录中的正常历史记录，好像子目录中的新文件一直在那里。（如您所见，不需要读取树或任何其他非日常使用的命令，'filter-branch' 完成了整个操作。）IDE 能够（分别；应该；成功测试 PyCharm）与结果。

之后，您应该能够像往常一样合并您的分支，将所有项目合二为一。

**tl; dr：** `--follow`按预期工作，正常历史记录，在执行上述 6 条命令将旧 git 项目合并到其他 git 项目的新分支和子目录后

# ipad - 在 iOS6 中使用 CoreAudio AUSampler 加载 EXS24 乐器

> ID：13060361
> 
> 赞同：2
> 
> 时间：2012-10-25T01:29:34.677
> 
> 标签：ipad, ios6, core-audio, coremidi

从 AUSampler API 看来，它似乎应该支持 Garage Band EXS24 乐器。AudioUnitProperties.h 文件内容如下：

```
typedef struct AUSamplerInstrumentData {
    CFURLRef                fileURL;
    UInt8                   instrumentType;
    UInt8                   bankMSB;
    UInt8                   bankLSB;
    UInt8                   presetID;
} AUSamplerInstrumentData; 
```

其中仪器类型可以有以下几种：

```
enum
{
    kInstrumentType_DLSPreset   = 1,
    kInstrumentType_SF2Preset   = kInstrumentType_DLSPreset,
    kInstrumentType_AUPreset    = 2,
    kInstrumentType_Audiofile   = 3,
    kInstrumentType_EXS24       = 4
}; 
```

我尝试使用以下功能加载仪器：

```
-(OSStatus) loadFromEXS: (NSString *) path withSampler: (AudioUnit) sampler {
    OSStatus result = noErr;

    NSURL *presetURL = [[NSURL alloc] initFileURLWithPath:[[NSBundle mainBundle] pathForResource:path ofType:@"exs"]];

    AUSamplerInstrumentData bpdata = {0};

    bpdata.fileURL = (__bridge CFURLRef)(presetURL);
    bpdata.instrumentType = kInstrumentType_EXS24;

    result = AudioUnitSetProperty(sampler,
                              kAUSamplerProperty_LoadInstrument,
                              kAudioUnitScope_Global,
                              0,
                              &bpdata,
                              sizeof(bpdata));
    return result;
} 
```

在我的资源中，我有一个包含 .exs 文件和一些 .wav 样本的组。此函数产生以下错误：

```
GlobalState::LoadEXS24Instrument: Load failed 
```

那么这是否意味着 EXS 文件不正确？这是否意味着我没有正确加载它？或者，这在 iOS6 中不受支持？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:43:09.073

是的，它似乎支持 EXS 文件格式。但是有一个问题：EXS 使用绝对文件路径。它不支持相对路径。这意味着您不能移动 .wav 样本，否则会破坏 EXS 乐器。这就是我的猜测为什么它不起作用。

看到这个：[https ://developer.apple.com/library/mac/#technotes/tn2283/_index.html](https://developer.apple.com/library/mac/#technotes/tn2283/_index.html)

# uiview - Monotouch：如何将 UIView 添加到 DialogViewController

> ID：13060362
> 
> 赞同：2
> 
> 时间：2012-10-25T01:29:52.207
> 
> 标签：uiview, xamarin.ios, dialogviewcontroller

在我的一个屏幕中，我需要将 UIView（带有一些标签和按钮）添加到 DialogViewController。原因是我没有使用 TableView 标头，因为我不希望该视图在表格滚动时滚动。

如果我将自定义视图添加到导航栏，我可以实现这一点，但是我的视图不会收到任何触摸（导航控制器会吃掉它们）。

我还尝试将自定义视图添加到 DialogsViewController 父控制器，虽然它可以工作，但在 LoadView() 中调整 tableview 的框架并没有做任何事情。

有没有其他方法可以将自定义视图添加到 DialogViewController？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T15:17:37.197

要添加不滚动的标题，您可以创建一个控制器，其视图包含您要添加的其他视图以及 DialogViewController 的视图。例如，以下简单示例将 UILabel 与 DialogViewController 的视图一起添加为附加控制器（在本例中称为*容器）的子视图：*

```
 [Register ("AppDelegate")]
    public partial class AppDelegate : UIApplicationDelegate
    {
        UIWindow window;
        MyDialogViewController dvc;
        UIViewController container;
        float labelHeight = 30;

        public override bool FinishedLaunching (UIApplication app, NSDictionary options)
        {
            window = new UIWindow (UIScreen.MainScreen.Bounds);

            container = new UIViewController ();

            container.View.AddSubview (new UILabel (new RectangleF (0, 0, UIScreen.MainScreen.Bounds.Width, labelHeight)){
                Text = "my label", BackgroundColor = UIColor.Green});

            dvc = new MyDialogViewController (labelHeight);

            container.View.AddSubview (dvc.TableView);

            window.RootViewController = container;

            window.MakeKeyAndVisible ();

            return true;
        }

    } 
```

然后DialogViewController在ViewDidLoad方法中调整TableView的高度：

```
 public partial class MyDialogViewController : DialogViewController
    {
        float labelHeight;

        public MyDialogViewController (float labelHeight) : base (UITableViewStyle.Grouped, null)
        {
            this.labelHeight = labelHeight;

            Root = new RootElement ("MyDialogViewController") {
                new Section (){
                    new StringElement ("one"),
                    new StringElement ("two"),
                    new StringElement ("three")
                }
            };
        }

        public override void ViewDidLoad ()
        {
            base.ViewDidLoad ();

            TableView.Frame = new RectangleF (TableView.Frame.Left, TableView.Frame.Top + labelHeight, TableView.Frame.Width, TableView.Frame.Height - labelHeight);
        }
    } 
```

这是显示模拟器中结果的屏幕截图： ![在此处输入图像描述](../Images/ec8153493fb69abc445caaf0843fd21f.png)

# ruby-on-rails - 如何制作带有报告功能的离线网络应用程序？

> ID：13060364
> 
> 赞同：0
> 
> 时间：2012-10-25T01:30:10.313
> 
> 标签：ruby-on-rails, html, model-view-controller

我有一个潜在客户想要构建一个平台无关的应用程序。最初它将在 Windows 7 平板电脑上运行，并且会扩展。这是一个屋顶业务，所以他们会用相机拍照，填写一些表格，然后从中生成报告。我能想到的第一件事是对我创建的 Web 服务进行 API 调用，该 Web 服务执行一些水晶报告，将它们魔术般地返回给客户端。

问题是，他们并不总是保证可以访问互联网。我可以在这里做什么？我现在的想法是在 Rails 或 MVC 4 中构建应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T02:43:56.317

很难回答你的问题，因为它不会是一个确切的答案，但我的想法是：

> 1° - 构建一个 Windows Phone 应用程序，该应用程序将填写所需的所有内容并在本地存储
> 
> 2° - 做一个后台进程，通过休息调用将其发送到服务
> 
> 3° - 构建服务以接收请求，并为客户端构建一个 Rails 应用程序以登录并访问可以在 Rails 中生成的报告

如果他们需要从任何地方访问报告，这是可能的。否则，可以在平板电脑本身中生成报告。

只是一些想法，解决方案可能会走一条非常不同的道路，因为您对确定的答案不够准确。

# javascript - jQuery .html()：div 开头缺少元素

> ID：13060366
> 
> 赞同：0
> 
> 时间：2012-10-25T01:30:24.287
> 
> 标签：javascript, jquery, dom

我正在选择一个`<div>`，像这样：

```
var html = $('div#mydiv').html(); 
```

*在控制台*和 DOM 中，当我将`html`var 粘贴回去时，div 开头缺少两个元素，其结构如下：

```
<div id="mydiv">
    <input type="checkbox" />
    <label for="input"></label>
    <div class="notes"></div>
    ...
</div> 
```

我只是从'notes' div 中获取-而不是输入或标签。这是最奇怪的事情。有任何想法吗？

编辑：通过“想法”，我的意思是 - 是的，我知道这应该可以正常工作。我想知道什么错误可能导致奇怪。输入和标签中有一些 PHP - 但这些输出在它们起源的 div 中很好，但不会显示在控制台或我通过 jQuery 设置 html 的 div 中。我正在查看是否存在格式错误的 HTML，但我不这么认为。

# java - 使用 JFileChooser 添加多个文件

> ID：13060371
> 
> 赞同：9
> 
> 时间：2012-10-25T01:30:44.080
> 
> 标签：java, jfilechooser

我正在寻找一个允许您从计算机附加文件的应用程序。例如，当 JFileChooser 打开时，您可以选择选择多个文件，当您单击“添加”时，它会将其添加到窗口中，然后您可以对这些文件进行不同的处理。类似于在电子邮件中附加文件。我必须展示的所有代码都是 JFileChooser，因为我认为我应该在继续之前学习如何做到这一点。

提前致谢

```
import javax.swing.JFileChooser;
import java.io.File;

public class Locket {

public static void main(String[] args) 
{
    JFileChooser chooser = new JFileChooser();
    File f = new File("Desktop");
    chooser.setCurrentDirectory(f);

    chooser.showOpenDialog(null);

} 
```

}

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-25T01:34:52.663

JFileChooser API 已经提供了一个名为`getSelectedFiles()`. 您可以将其用于多项选择。它返回一个文件对象数组，即`File[]`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-25T01:34:53.040

您需要使用[`JFileChooser#setMultiSelectionEnabled`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFileChooser.html#setMultiSelectionEnabled%28boolean%29)并将其设置为 true。这将允许用户能够选择多个文件

# delphi - 拖动时将鼠标悬停在字符串网格上？

> ID：13060373
> 
> 赞同：3
> 
> 时间：2012-10-25T01:30:50.897
> 
> 标签：delphi, tstringgrid

我的部分字符串网格是合格的放置目标，有些则不是（第一行是列标题，第一列是一种索引，后续列可能会被删除）。我有那个编码和工作。

现在我在想，当用户将鼠标拖到一个潜在的放置目标的单元格上时，给用户一个视觉指示可能会很好。我想突出显示他当前悬停的单元格的行和列中的第一个单元格（或者可能是整个行和列，形成一种十字准线；我还没有决定）。我想我可以在`OnDrawCell`.

我曾想过使用`OnMouseMove`and cehck `if Dragging then`，但是...

我的问题是当我拖动`OnMouseMove`事件时永远不会被调用。

有没有其他方法可以知道在拖动操作期间光标何时悬停在 strigngrid 上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T01:51:42.087

[`OnDragOver event`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Controls.TControl.OnDragOver)专为此而设计；它会自动调用，并提供鼠标指针所在的`X`和坐标。`Y`该链接位置有一个代码示例，也演示了如何使用它 - 它用于 a `TListBox`，但原理是相同的。

```
procedure TForm1.FormCreate(Sender: TObject);
begin
  ListBox1.Items.Add('Not');
  ListBox1.Items.Add('In');
  ListBox1.Items.Add('Alphabetical');
  ListBox1.Items.Add('Order');
end;

// This OnDragOver event handler allows the list box to
// accept a dropped label.

procedure TForm1.ListBox1DragOver(Sender, Source: TObject; X, Y: Integer;
  State: TDragState; var Accept: Boolean);
begin
  Accept := Source is TLabel;
end; 
```

# ruby-on-rails - Sublimetext 2，Rails，Haml :: .haml 文件中 rails 方法的颜色编码失败

> ID：13060374
> 
> 赞同：0
> 
> 时间：2012-10-25T01:30:54.330
> 
> 标签：ruby-on-rails, package, haml, sublimetext2

我正在使用 Sublimetext2 开发 Rails 应用程序（从 Textmate 切换）。我的 .haml 文件中的 rails 方法的颜色编码出现问题。扩展名为 .haml 的文件设置为使用从 Textmate 复制的 Ruby Haml 包打开。该问题出现在我尝试过的任何颜色主题中。

因此，例如，在一个文件中：

_form.html.haml

```
= form_for @object do |f|
  f.label ...
  f.text_field ...
  ... 
```

关键字“form_for”、“label”、“text_field”应该是红色的（使用 Railscast 主题时）。但它们是白色的。

Railscasts 主题似乎不是问题，因为问题（不是颜色编码 rails 方法）存在于 .haml 文件中的所有主题中。

我错过了什么还是这是一个错误？

谢谢，马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:53:24.313

也许你应该为haml尝试不同的包 - [https://github.com/n00ge/sublime-text-haml-sass](https://github.com/n00ge/sublime-text-haml-sass)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:42:52.940

这是 HAML 文件中的一个缺点。这是修复：

```
 diff --git a/Packages/Rails/Ruby Haml.tmLanguage b/Packages/Rails/Ruby Haml.tmLanguage
    index 88d43f2..8bf14a4 100644
    --- a/Packages/Rails/Ruby Haml.tmLanguage       
    +++ b/Packages/Rails/Ruby Haml.tmLanguage       
    @@ -90,7 +90,7 @@
                                    </dict>
                            </dict>
                            <key>end</key>
    -                       <string>$|(?!\.|#|\{|\[|=|-|~|/)</string>
    +                       <string>$|(?!\.|#|\{|\[|(?:!?=)|-|~|/)</string>
                            <key>patterns</key>
                            <array>
                                    <dict>
    @@ -199,7 +199,7 @@
                    <key>rubyline</key>
                    <dict>
                            <key>begin</key>
    -                       <string>=|-|~</string>
    +                       <string>(?:!?=)|-|~</string>
                            <key>contentName</key>
                            <string>source.ruby.embedded.haml</string>
                            <key>end</key> 
```

但是，我不确定如何将其上传到上游。这是我的原始帖子：[http ://www.sublimetext.com/forum/viewtopic.php?f=3&t=10246](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=10246)

# xcode - 关于分辨率大小 Xcode 的担忧

> ID：13060376
> 
> 赞同：0
> 
> 时间：2012-10-25T01:31:05.897
> 
> 标签：xcode, app-store

我有两张图片，一张是 320 x 480，称为 image.png，另一张是 640 x 1096，称为 image@2x.png。我的应用程序是否会因为没有完全是原始应用程序的两倍而被拒绝？如果我需要在 iPhone 5 上调整图像，我别无选择。任何提示或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T01:38:10.490

您的命名约定不正确。

图像文件命名有严格的规定。

对于分辨率为 320x480 的 iPhone 3G/3GS，您的图像应命名为 image.png

对于分辨率为 640x960 的 iPhone 4/4S，您的图像应命名为 image@2x.png

对于分辨率为 640x1136 的 iPhone 5，您的图像应命名为 image-568h@2x.png

这个问题与--> [iPhone 5 重复-新图像必须遵循什么命名约定？](https://stackoverflow.com/questions/12431445/iphone-5-what-naming-convention-the-new-images-have-to-follow)

# java - Java 字典迭代器类型问题

> ID：13060377
> 
> 赞同：2
> 
> 时间：2012-10-25T01:31:21.180
> 
> 标签：java, interface, dictionary, iterator, contract

因此，我试图为家庭作业创建一个 LinkedHashedDictionary 的 Iterator 成员，但是我在其类型方面遇到了多个问题。

迭代器接口：

```
package nhUtilities.containers2;

public interface Iterator<Element> extends Cloneable, java.util.Iterator<Element>
{
  public void reset ();
  public void advance ();
  public boolean done ();
  public Element get ();
  public boolean equals (Object obj);
  public boolean traverses (Object container);
  public Object clone ();
  public void setEqualTo (Iterator<Element> other);
  public boolean hasNext ();
  public Element next ();
  public void remove ();
} 
```

在我的代码中，我有一个名为 EntryIterator 的私有类。它扩展了一个 AbstractIterator，但实现了上面的 Iterator。

我目前的实现如下：

```
private class EntryIterator<Element> extends AbstractIterator<Element>
    implements Iterator<Element>
    {

        protected Iterator<Key> keyIterator;
        protected Dictionary<Key,Value> dictionary;

        public EntryIterator(Dictionary<Key,Value> dictionary)
        {
            keyIterator = keys.iterator();
            this.dictionary = dictionary;
        }

        public void reset()
        { keyIterator = keys.iterator(); }

        /**
         * @Requrie !this.done()
         */
        public void advance()
        { keyIterator.advance(); }

        public boolean done()
        { return keyIterator.done(); }

        // public Entry<Key,Value> get()
        // Violates initial Interface: Results in compile error.
        // Return type must be "Element"
        public Element get()
        {
            Key key = keyIterator.get();
            Value value = dictionary.get(keyIterator.get());
            return (Element) new Entry<Key,Value>(key, value);
        }

        public boolean traverses(Object container)
        {
            // TODO Iterator traverses
            return false;
        }

        public void setEqualTo(Iterator<Element> other)
        {
            this.keyIterator = ((EntryIterator<Element>) other).keyIterator;
            this.dictionary = ((EntryIterator<Element>) other).dictionary;
        }

    } 
```

关于它的类型，我已经完成了这个类的多种变体，但它们似乎都与我的字典不兼容。如果我保持上述格式，我的 Dictionary 的 iterator() 函数会出现错误：

```
public Iterator<Entry<Key,Value>> iterator()
{
    return new EntryIterator<Entry<Key,Value>>(this);
} 
```

错误指出它是“返回类型与 Dictionary.iterator() 不兼容”

我应该将 EntryIterator 类的类型更改为：

```
private class EntryIterator<eEntry<Key,Value>> extends AbstractIterator<Element>
implements Iterator<Element> 
```

我只是在我的 Dictionary.Iterator() 函数上收到一条错误消息，提示“令牌'<' 上应有语法错误”以及另一个不兼容错误。

有人能指出我如何将所有这些不同类型联系起来以使它们返回我的字典合同要求的正确方向吗？

我曾尝试在课堂上通过电子邮件向讲师提出我的问题，以及一对一的问题，但只是为了避免。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T03:45:45.180

所以，问题实际上出在我的类实例化上......对于有类似问题的每个人来说：

```
 private class EntryIterator extends AbstractIterator<Entry<Key,Value>> implements 
nhUtilities.containers2.Iterator<Entry<Key, Value>> 
```

# php - php/codeigniter - 使用 while 链接两个函数

> ID：13060384
> 
> 赞同：0
> 
> 时间：2012-10-25T01:33:21.793
> 
> 标签：php, codeigniter

我的应用程序中有一些关注/取消关注和阻止/取消阻止功能。它们工作正常，并且正确的数据正在填充我的数据库。以下是我的逻辑大纲：

```
if($this->user_is_followed) {
    //show unfollow button
}else {     
    //show follow button

}

if($this->user_is_blocked) {    
    //show unblock button
}else {
    //show block button
} 
```

一个问题：我需要为这两种情况链接关注/取消关注和阻止/取消阻止功能：

1 - 如果用户正在关注某人并单击阻止按钮，则应阻止和取消关注该用户（现在，该用户被阻止，但未取消关注）

2 - 如果用户阻止某人，并单击关注按钮，则应关注并取消阻止该用户（现在，该用户被关注，但未取消阻止）

我尝试使用 -while- 来链接这两个函数，但没有任何显示，甚至没有错误，只是一个空白屏幕：

这是我对 while 逻辑的尝试：

```
 if($this->user_is_followed) {
        while($this->user_is_blocked) {
            //show unfollow button
        }
    }       
    else if($this->user_is_blocked) {
        while($this->user_is_followed) {        
        //show follow button 
        }       
    } 
```

简而言之，我试图找出我可以为此使用的 php 控制结构。是-同时-还是别的什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T01:46:12.287

第一个就可以了，这取决于您是否可以同时被跟踪和阻止。

由于看起来您正在为内联输出执行此操作，因此您可能只想将其压缩为三元：

```
<?php echo ($this->user_is_followed ? 'unfollow button' : 'follow button'); ?> 
```

如果你有大量的标记，三元组会很糟糕，因为在 php 中回显 html 通常是一个愚蠢的想法。但是，如果您在类上使用 jquery 之类的库和侦听器，则可以在标签上分配“已关注”或“未关注”类`<a>`，然后根据 css 显示...希望这是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T01:48:24.747

你之前的逻辑大纲没有错。

```
if($this->user_is_followed {
    //show unfollow button
}
else {      
    //show follow button
}
if($this->user_is_blocked) {    
    //show unblock button
}
else {
    //show block button
} 
```

唯一会发生的变化是控制您的关注、取消关注、阻止和取消阻止按钮。因为在显示按钮时不需要执行任何操作吗？所以这两种情况应该在单击按钮后发生，而不是在显示按钮时发生。我建议根据您想要发生的场景为您的关注、取消关注、阻止和取消阻止按钮创建功能。

# c++ - 有理向量断言

> ID：13060389
> 
> 赞同：0
> 
> 时间：2012-10-25T01:34:33.770
> 
> 标签：c++, llvm

下面是 C++ 中的代码，

```
Num *= other.Den;
Den *= other.Num;
if (Den.isNegative()) {
    Num = -Num;
    Den = -Den;
}
assert(Den.isStrictlyPositive()); 
```

其中 Num 和 Den 的类型为 LLVM::APInt。

由于某种原因，我的断言失败了。我已经检查了分母是否明确为负并将其变为正。有人可以让我在这段代码中的什么情况下，断言会失败吗？当我针对测试用例运行我的代码时，它失败了。测试用例非常大，我没有成功拐弯一个特定的案例。上面的代码是我的算法的一部分，它正在做其他工作。

这是 isStrictlyPositive 的实现。它使用 LLVM 库文件 APInt.h。

```
bool isStrictlyPositive() const {
return isNonNegative() && !!*this;
}

bool isNonNegative() const {
return !isNegative();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T01:46:31.703

我基于以下假设：

*   严格正数意味着 > 0
*   `isNegative`< 0

鉴于您引用的片段，该函数`isStrictlyPositive`归结为：

```
return isNonNegative() && !!*this; 
```

这相当于：

```
return !(*this < 0) && !!*this; 
```

`!!*this`等价于`!(!*this)`which 等价于`!(*this==0)`which 等价于`*this!=0`，所以表达式为：

```
return !(*this < 0) && *this!=0; 
```

可以简化为：

```
return *this>=0 && *this!=0; 
```

这真的只是：

```
return *this > 0; 
```

所以，你的问题是，`Den`因此`0`不是消极的，也不是严格的积极的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T01:37:51.677

`0`既不是负数也不是严格正数。

# ios - 通过 PhoneGap 将 PNG 或 JPG 图像保存到 iOS 中的照片

> ID：13060397
> 
> 赞同：2
> 
> 时间：2012-10-25T01:35:11.923
> 
> 标签：ios, image, cordova, base64, photos

我是 PhoneGap 的新手，想知道如何将应用内图像保存到 iOS 中的照片。

虽然我能够使用

```
navigator.camera.getPicture 
```

有选项

```
quality:50, destinationType:Camera.DestinationType.DATA_URL,saveToPhotoAlbum: true 
```

要将相机拍摄的照片保存到照片中，我现在正在尝试了解如何将应用内图像保存到照片中。

考虑以下 PhoneGap - Cordova 页面，其中元素 myPhoto 保存图像数据，例如“data:image/jpeg;base64”...

```
<html>
    <head>
    <title>Save Image</title>
    <script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    function savePicture(){
                    //this is where the magic would happen
                    //how can I save myPhoto to Photos?
                    //output imageData to a jpg or png file which would show up in Photos?
    }

        </script>
</head>
<body>
    <button onclick="savePicture();">Save Photo</button> <br>
            <input type="hidden" name="myPhoto" id="myPhoto" value="">
</body>
</html> 
```

**问题：**

savePicture() 应该如何通过 Phonegap 将 myPhoto 中的图像数据保存到 iOS 中的照片？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-07T07:48:09.520

**也许你可以试试我为 IOS 编写的插件（如果你想将画布元素保存到相册，你可以使用下面的downloadWithUrl**方法获取画布的 dataURI ）。希望对你有效。

这是 git 链接：[https ://github.com/Nomia/ImgDownloader](https://github.com/Nomia/ImgDownloader)

简短的例子：

```
document.addEventListener("deviceready",onDeviceReady);

//google logo url
url = 'https://www.google.com/images/srpr/logo11w.png';

onDeviceReady = function(){
    cordova.plugins.imgDownloader.downloadWithUrl(url,function(){
        alert("success");
    },function(){
        alert("error");
    });        
}

//also you can try dataUri like: 1px gif
//url = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7' 
```

**您也可以使用下载**方法将本地文件保存到图库

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T20:10:00.850

我最近遇到了以下 Phonegap 插件，用于将 Canvas 图像保存到 iOS 中的照片： [https ://github.com/devgeeks/Canvas2ImagePlugin](https://github.com/devgeeks/Canvas2ImagePlugin)

按照自述[**说明**](https://github.com/devgeeks/Canvas2ImagePlugin)导入插件，然后您可以通过以下方式使用它：

```
<html>
    <head>
        <title>Save Image</title>
        <script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>
        <script type="text/javascript" charset="utf-8" src="../Canvas2Image/Canvas2ImagePlugin.js"></script>
        <script type="text/javascript" charset="utf-8">

        var canvas2ImagePlugin; //devgeeks plugin for saving canvas images to photo gallery

        function onDeviceReady() {
             canvas2ImagePlugin = window.plugins.canvas2ImagePlugin;
         }

        function savePicture(){
            canvas2ImagePlugin.saveImageDataToLibrary(function(msg){console.log(msg);},function(err){console.log(err);},'mycanvas');
         }

        </script>
    </head>
    <body>
        <canvas id="myCanvas" width="500px" height="300px"> <strong>[Your browser can not show this example.]</strong> </canvas>
        <button onclick="savePicture();">Save Photo</button> <br>
    </body>
</html> 
```

# amazon-ec2 - 使用弹性 ip 在亚马逊 ec2 上访问 wt

> ID：13060398
> 
> 赞同：0
> 
> 时间：2012-10-25T01:35:12.957
> 
> 标签：amazon-ec2, wt

当我午餐其中一个示例时，我在运行 ubuntu 的 ec2 微型实例上对最新的 wt 进行了源代码编译：

```
1:23:15.~/progs/wt-3.2.3-rc1/examples/widgetgallery
>../../build/examples/widgetgallery/widgetgallery.wt --docroot . --http-address localhost --http-port 8080
[2012-Oct-25 01:23:16.898953] 969 - [info] "config: reading Wt config file: /etc/wt/wt_config.xml (location = '../../build/examples/widgetgallery/widgetgallery.wt')"
[2012-Oct-25 01:23:16.901653] 969 - [info] "WServer/wthttp: initializing built-in wthttpd"
[2012-Oct-25 01:23:16.902948] 969 - [info] "wthttp: started server: http://localhost:8080" 
```

`http://54.243.50.12:8080/`当我放入或`http://54.243.50.12/`放入 chrome 的地址栏时，我无法访问它。它一直在加载并且永远找不到它。

弹性 IP 的关联起作用了。我可以用腻子连接到 54.243.50.12。

如果我在启动 wt 时尝试指定弹性 IP，则 wt 服务器不会启动：

```
1:31:45.~/progs/wt-3.2.3-rc1/examples/widgetgallery
>../../build/examples/widgetgallery/widgetgallery.wt --docroot . --http-address 54.243.50.12 --http-port 8080
[2012-Oct-25 01:31:53.696951] 1056 - [info] "config: reading Wt config file: /etc/wt/wt_config.xml (location = '../../build/examples/widgetgallery/widgetgallery.wt')"
[2012-Oct-25 01:31:53.699035] 1056 - [info] "WServer/wthttp: initializing built-in wthttpd"
[2012-Oct-25 01:31:53.699968] 1056 - [error] "wthttp: Error occurred when binding to 54.243.50.12:8080
bind: Cannot assign requested address"
[2012-Oct-25 01:31:53.700614] 1056 - [info] "WServer/wthttp: fatal: Error (asio): bind: Cannot assign requested address"
1:31:53.~/progs/wt-3.2.3-rc1/examples/widgetgallery
> 
```

如果没有弹性 IP，情况也是如此。

8080端口打开：

```
>netstat -an | grep "LISTEN "
tcp        0      0 0.0.0.0:8080            0.0.0.0:*               LISTEN
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN
tcp        0      0 127.0.0.1:5432          0.0.0.0:*               LISTEN
tcp6       0      0 :::22                   :::*                    LISTEN 
```

我做了所有在[http://redmine.webtoolkit.eu/boards/2/topics/4484#message-4516](http://redmine.webtoolkit.eu/boards/2/topics/4484#message-4516)但没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T02:15:31.963

我需要在安全组 > 入站中打开一个端口

# css - 幻像水平列表中的第一个条目

> ID：13060399
> 
> 赞同：3
> 
> 时间：2012-10-25T01:35:42.587
> 
> 标签：css, html, css-float, html-lists

我正在调整水平列表中的间距，似乎我有一个空白的第一个条目，生成一个分隔符（右边框）。增加和减少填充，扩大和缩小列表中的第一个幻像条目。

此页面上的导航栏[http://compuball.com/GW2/guides/ranger/pages/pet_basics_101.html](http://compuball.com/GW2/guides/ranger/pages/pet_basics_101.html)

分隔条创建在菜单项的右侧……第一个分隔符跟在一个不应该存在的项之后。

的CSS：

```
NAV {
    width: 940px;
    float: left;
    font-family: Geneva,Arial;
    border: 6px outset #A96505;
    background-color: #F4CB90;
}

NAV ul {
    margin: 0px auto;
    padding: 0px;
    list-style-type: none;
}

NAV li {
    display: inline;
}

NAV li a {
    text-align: center;
    border-right: 2px groove #C6995F;
    font-size: 1.6em; 
    padding: 2px 10px;
    color: #A96505;
    text-decoration: none;
}

NAV li a.last {
    border-right: none;
}

NAV li a:hover {
    color: #6D3F02;
} 
```

的HTML：

```
 <NAV>
        <UL>
            <LI><a href="#top">Home</a></LI>
            <LI><a href="#Intro">Introduction</a></LI>
            <LI><a href="#Charming">Acquiring Pets</a></LI>
            <LI><a href="#Classification">Classification</a></LI>
            <LI><a href="#Control">Control Panel</a></LI>
            <LI><a Class="last" href="#Management">Management Panel</a></LI>
        </UL>
    </NAV> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T01:52:03.437

你的问题是这样的：

```
<HEAD>
  <A ID = "top" />
</HEAD> 
```

您要做的是将其移出`<head>`文档，并将其移到`<body>`标签之后。此外，鉴于下面的优秀评论，我们应该让它看起来像这样，因为`<a>`标签不会自动关闭：

```
<a id="top"></a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T03:18:58.847

好的，这里有一个明确的问题 - 在 FireBug 中查看时，在`<a id="top">`进入 Wrapper 部分之前，您有四个实例。其中之一是在您的导航列表中，创建一个元素（然后被填充等）。

我猜您想要一个内部链接，使用户无需滚动即可到达页面顶部。这涉及页面顶部的**一个**目标引用（不在导航列表中），如下所示：`<a name="top"></a>`以及页面下方的尽可能多的相应链接，如下所示：`<a href="#top">Back to Top<a>`. 这将使屏幕顶部回到页面上目标引用所在的点。

所以。清除所有实例`<a id="top"></a>`并将它们替换为页面顶部的一个适当的目标引用（`<body>`例如，就在开始标记之后），你应该没问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T01:49:31.543

你的第一个 li 实际上有两个 a 标签，其中一个不确定它是如何出现的，因为它在你查看源代码时没有显示，但它就在那里。在 Chrome 中右键单击主页链接并选择检查元素，您将看到它在那里列出。

您是手动输入此 HTML 还是为您生成它？

在您的页面顶部附近，您有：

```
 <A ID = "top" /> 
```

a 标签不会自动关闭，因此发生的情况是该标签在找到菜单中的第一个标签之前不会关闭，从而在菜单中创建一个额外的元素。

```
<a id="top"></a> 
```

将使用额外的菜单项解决您的问题

运行您的页面：http: [//validator.w3.org](http://validator.w3.org)以查找其他错误（您的错误非常少！干得好！）

# jquery - 我如何在 jquery 日期选择器中制作一个清晰的按钮

> ID：13060408
> 
> 赞同：0
> 
> 时间：2012-10-25T01:37:13.173
> 
> 标签：jquery, jquery-ui

我需要通过弹出窗口使用jQuery datepicker来选择日期并填写不同窗口中的文本字段。（日期选择器和文本字段它们在不同的窗口中）

我直接在 datepicker 的按钮面板的 DIV 中的 jquery-ui-1.8.16.custom.min.js 中添加了一些清除按钮的代码

```
<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+
B+".datepicker._clearDate(this);\">Clear</button> 
```

和我的弹出窗口代码是这样的。

```
 $("#datepicker").datepicker({
                            showButtonPanel: true,
                            changeMonth: true,
                            changeYear: true,
                            onSelect: function(dateText, inst)
                            {
                                var doc = window.opener.form;
                                doc.textfieldname.value = dateText;
                                window.close();
                            }
                    });
            });

<div id="datepicker" align="center"></div> 
```

如何通过清除文本字段中的所有文本来使清除按钮工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:14:11.510

我已经通过 aad id 找到了清除按钮的解决方案，例如

```
<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+
B+".datepicker._clearDate(this);\" id = "BTClear" >Clear</button> 
```

你可以使用 clear by id like html button

# java - 保加利亚纸牌爪哇

> ID：13060410
> 
> 赞同：2
> 
> 时间：2012-10-25T01:37:22.313
> 
> 标签：java, algorithm, solver

在我的 AP 计算机科学课程中，我将在几天后完成以下作业：

“在这个作业中，你将模拟保加利亚纸牌游戏。游戏从 45 张牌开始。将它们随机分成若干随机大小的堆。例如，你可能从大小为 20、5、1、9 的堆开始， 10\. 在每一轮中，你从每一堆中取出一张牌，用这些牌组成一个新的牌堆。例如，示例起始配置将转换为大小为 19、4、8、10 和 5 的牌堆。纸牌是当桩的大小按某种顺序排列为 1、2、3、4、5、6、7、8 和 9 时。

在您的程序中，生成一个随机启动配置并打印它。然后继续应用纸牌步骤并打印结果。当达到纸牌的最终配置时停止。”

我想出了一个解决这个问题的程序，但问题是有时需要很长时间。其他时候它会像我预期的那样几乎立即解决它，但其他时候它可以迭代 18,000 次或更多。

根据[http://mancala.wikia.com/wiki/Bulgarian_Solitaire](http://mancala.wikia.com/wiki/Bulgarian_Solitaire)可以在 (k^2)-k 步或更短的时间内找到解决方案，在这种情况下 k 为 9。很多时候，我肯定不会在 72 步或更少的时间内找到解决方案。我已经研究这个程序好几个小时了，为了看看我是否可以让它更快，我无法让它在足够多的迭代中工作。所以现在我来到 Stack Overflow，看看你们中是否有人能帮助我朝着正确的方向前进。

这是我的代码：

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Random;

public class BulgarianSolitaire {

    ArrayList<Integer> cards = new ArrayList<Integer>();
    Random rand = new Random();
    boolean cont = true;
    boolean cont2 = true;

    public static void main(String[] args) {
        BulgarianSolitaire game = new BulgarianSolitaire();
    }

    public BulgarianSolitaire() {
        System.out.println("Started");
        int sum = 0;
        while (cont) {
            if (sum < 45) {
                cards.add(rand.nextInt(46 - sum));
            } else {
                cont = false;
            }

            sum = 0;
            for (int i = 0; i < cards.size(); i++) {
                sum += cards.get(i);
            }

            removeZeros(cards);

            System.out.println(cards);
        }

        System.out.println("Finished Generating Start");

        while (cont2) {
            solitaireStep();
            System.out.println(cards);
            if (checkCards()) {
                cont2 = false;
            }
        }

        Collections.sort(cards);
        System.out.println("Cards are sorted");
        System.out.println(cards);
    }

    public void removeZeros(ArrayList<Integer> list) {
        for (int j = 0; j < list.size(); j++) {
            if (list.get(j) == 0) {
                list.remove(j);
            }
        }
    }

    public void solitaireStep() {

        int numberRemoved = 0;

        for (int i = 0; i < cards.size(); i++) {
            int value = cards.get(i);
            cards.set(i, value - 1);
            removeZeros(cards);
            numberRemoved++;
        }

        cards.add(numberRemoved);
    }

    public boolean checkCards() {
        ArrayList<Integer> expectedCards = new ArrayList<Integer>();

        for (int i = 1; i < 10; i++) {
            expectedCards.add(i);
        }

        ArrayList<Integer> sortedCards = cards;
        Collections.sort(sortedCards);
        boolean equal = true;
        if (sortedCards.size() != expectedCards.size()) {
            equal = false;
        }

        for (int i = 0; i < sortedCards.size(); i++) {
            if (sortedCards.size() == expectedCards.size()) {
                if (sortedCards.get(i) != expectedCards.get(i)) {
                    equal = false;
                }
            }
        }

        return equal;
    }
} 
```

所以我基本上首先生成一个介于 0 到 45 之间的随机数，然后将其添加到卡片列表中。然后我继续生成随机数并将它们放入列表中，只要总和小于 45，这样生成的随机数就在 0 到 45 之间——最后一次迭代中数字的总和。列表中的零也会随着它的进行而被删除。

生成列表后，它将执行从列表中的每个数字中减去 1、删除零并添加一个与减少的堆栈数相等的新值的步骤。它还根据列表 {1, 2, 3, 4, 5, 6, 7, 8, 9} 检查卡片堆栈的有序版本，一旦找到匹配项，它将布尔值 cont2 设置为 false，以便它将停止执行单人纸牌步骤。

就是这样。我感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T01:59:43.660

你的缺陷在于你的`removeZeros`方法。

```
public void removeZeros(ArrayList<Integer> list) {
    for (int j = 0; j < list.size(); j++) {
        if (list.get(j) == 0) {
            list.remove(j);
        }
    }
} 
```

如果删除 处的元素`j`，则列表大小会减少 1。您也必须减小`j`。

为此更改：

```
 public void removeZeros(ArrayList<Integer> list) {
        for (int j = 0; j < list.size(); j++) {
            if (list.get(j) == 0) {
                list.remove(j);
                j--;
            }
        }
    } 
```

您的检查方法也过于复杂。

在您的单人纸牌步骤中，将所有应该等于零的值设置为零。

然后，删除**循环外的**零（使用修改后的方法） 。

然后，对数组进行排序。

然后，在您的检查方法中，由于数组已排序：

```
public boolean checkCards() {
    for(int i = 0; i < cards.size(); i++) {
        if(cards.get(i) != i + 1) {
            return false;
        }
    }
    return true;
} 
```

简单得多。它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T17:10:06.530

我已经尝试了上面的代码，但它没有工作。我编写了一个新代码，它可以工作：

```
import java.util.ArrayList;
import java.util.Collections;

public class P74_BulgarianSolitaire {

public static void main(String[] args) {
    // TODO Auto-generated method stub
    final int MAX_CARD = 45; 
    ArrayList<ArrayList<Integer>> twoDArrayList =  new ArrayList<ArrayList<Integer>>();

    int column = 1; 
    int card = 0;
    int left = MAX_CARD;

    do{ 
        column = (int) (Math.random()*(left)+1);  // 
        System.out.println("Column :"+column);

        ArrayList<Integer> row = new ArrayList<Integer>(); //New row to add. Must declare here. 
        for (int j=0;j<column;j++){
            card++;

            row.add(card);
        }

        twoDArrayList.add(row);

        left = MAX_CARD - card ;

    } while (card <MAX_CARD);
    System.out.println(twoDArrayList);
    System.out.println();

    boolean finish = false;

    while (!finish){
        ArrayList<Integer> row = new ArrayList<Integer>(); //New row

        //remove one card from each row
        for (int i=0;i<twoDArrayList.size();i++){
            row.add(twoDArrayList.get(i).get(0));
            twoDArrayList.get(i).remove(0);  //Remove the first column 
            if (twoDArrayList.get(i).isEmpty()){
                twoDArrayList.remove(twoDArrayList.get(i)); 
                i--;
            }
        }

        twoDArrayList.add(row);

        ArrayList<Integer> size = new ArrayList<Integer>(); // New list
        for (int i=0;i<twoDArrayList.size();i++){
            size.add(twoDArrayList.get(i).size());
        }
        Collections.sort(size);

        for (int i=1;i<size.size();i++){
            if (size.get(i)== size.get(i-1)+1 ) finish = true; 
            else {
                finish = false;
                break;
            }
        }

        for (int i=0;i<twoDArrayList.size();i++) Collections.sort(twoDArrayList.get(i));
        System.out.println(twoDArrayList);
    }
    System.out.println(twoDArrayList);

}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-24T15:58:07.800

```
 package learningofAlgorithm;
    import java.util.ArrayList;
    import java.util.Random;
    import java.util.Collections;
    public class bulgarianSolitaire {
    private Random gen;
    private int i=1;
    ArrayList<Integer> bs=new ArrayList<>();

    public bulgarianSolitaire(){
       /**gen=new Random();
       bs.add(gen.nextInt(45)+1);
       int sum=bs.get(0);
       while(sum!=45){
            bs.add(gen.nextInt(45-sum)+1);
            sum=sum+bs.get(i);
            i++;

        }*/
        bs.add(20);
        bs.add(5);
        bs.add(1);
        bs.add(9);
        bs.add(10);
    }

    public void dis(){
        for(Integer element:bs){
            System.out.print(element+" ");
        }
    }

    public void removeCard(ArrayList<Integer> s){
         int i=0;
        while(i<s.size()){
            if(s.get(i)==0){
                s.remove(i);
            }
             else{
                i++;
            }
        }

    }

     public void bsstep(){
         int newheap=0;
         for(int i=0;i<bs.size();i++){
             int key=bs.get(i);
                 bs.set(i, key-1);

             newheap++;

         }
        removeCard(bs);

         bs.add(newheap);   
    }

    public boolean checkCard()
    {   ArrayList<Integer> bscheck=new ArrayList<>();
        for(int i=1;i<10;i++){
        bscheck.add(i);
          }
        boolean flag=true;
        ArrayList<Integer> sortbs=bs;
        Collections.sort(sortbs);
        if(bscheck.size()!=sortbs.size()){
            flag=false;
        }

     for(int i=0;i<bscheck.size();i++){
         if(bscheck.size()==sortbs.size()){
              if(bscheck.get(i)!=sortbs.get(i)){
                  flag=false;
              }
          }
        }
        return flag;

    }

    } 
```

# windows - 什么是虚拟化（用于服务器）以及如何设置它

> ID：13060416
> 
> 赞同：-1
> 
> 时间：2012-10-25T01:38:43.313
> 
> 标签：windows, linux, virtualization

我刚给自己买了一台 IBM System x3650，想知道最好的设置方法是什么。我将从它运行 5 个 Drupal (php) 网站。我已经阅读了许多关于虚拟化的文章，并且想知道我将如何去做这件事。Windows机器VS Linux上的虚拟化更好吗？我可以使用 Oracle VirtualBox。任何形式的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T01:52:38.290

如果您只是要运行一堆网站，则不需要虚拟化。

虚拟化采用您的物理硬件，并允许您将其逻辑分配给虚拟机。您将安装管理程序（例如 Hyper-V 或 VMware ESX）而不是操作系统。然后，您可以创建虚拟机并在其上安装操作系统（您可以安装虚拟机管理程序支持的任何操作系统）。大多数虚拟机管理程序支持 Windows 和 Linux。

但是，要运行 5 个网站，请使用允许您在单个服务器上运行多个网站的 Web 服务器。apache (httpd) 和 IIS (Windows Web Server) 都允许这样做。虚拟化对于完成这项任务来说太过分了。

# php - php在加载时调用javascript

> ID：13060419
> 
> 赞同：0
> 
> 时间：2012-10-25T01:39:05.737
> 
> 标签：php, javascript

伙计们，我对 PHP 在加载时调用 Javascript 函数没有什么问题...想法是当页面加载时我对 PHP 的东西做很少的计算，所以当我完成时，我想要的只是使用 javascript 在同一个 DOM 元素中写下来。我不会向您展示用于计算的 PHP 代码，因为我 100% 确定它没问题。这是我到目前为止得到的代码，所以你能告诉我它有什么问题吗？

```
$test = 100;
echo "<script language=javascript> window.onload=UpdatePoints($test); </script>"; 
```

和 Javascript 功能很简单

```
function UpdatePoints(Points) {
document.getElementById('PointsNumber').innerHTML = Points;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T01:46:56.447

您需要将调用包装在一个通过引用分配的函数`UpdatePoints()`中，而不是调用 in 中的函数。否则，您正在调用该函数，并将其返回值分配给.`window.onload``window.onload``window.onload`

```
// This function wraps UpdatePoints($test)
// and is assigned as a reference to window.onload
function load() {
  UpdatePoints(<?php echo $test; ?>);
}
echo "<script type='text/javascript'> window.onload=load; </script>"; 
```

请注意，标签的`language`属性`<script>`已被弃用。在其位置包含一个`type=text/javascript`属性（尽管 text/javascript 通常是浏览器的默认设置）

但是，由于 的值`$test`是在页面加载之前创建的，并且在调用函数时无法更改，因此您最好不要将其作为参数传递，在这种情况下您不需要包装函数。只需删除`()`即可将其分配为参考。

```
echo "<script type='text/javascript'> window.onload=UpdatePoints; </script>";

function UpdatePoints() {
  // PHP write directly into the function since the value
  // can't change...  It's always going to be passed as what PHP assigns 
  // if you call it as UpdatePoints($test)
  var Points = $test;
  document.getElementById('PointsNumber').innerHTML = Points;
} 
```

# jquery - jquery jplayer flash回退不起作用

> ID：13060420
> 
> 赞同：0
> 
> 时间：2012-10-25T01:39:20.220
> 
> 标签：jquery, jplayer

我有一个 jquery jplayer，它的 html 版本运行良好。当我尝试将 Flash 版本加载为默认版本时，它停止工作。

当我加载页面时，Chrome 控制台显示错误“PPB_Graphics2D.PaintImageData: Rectangle is outside bounds”两次。Firefox 没有显示任何 JS 错误。

这是jQuery代码。

```
 $("#jquery_jplayer_1").jPlayer({
            solution:"flash, html",
            play: function() { // To avoid both jPlayers playing together.
                 $(this).jPlayer("pauseOthers");
            },
            ready: function () {
                $(this).jPlayer("setMedia", {
                     mp3: "http://test.com/music.mp3"

                  });
             },

             swfPath: "player/jplayer",
             supplied: "mp3",
             cssSelectorAncestor: "#jp-audio-container1"
   }); 
```

如果我将解决方案反转为解决方案：“html，flash”，则播放器可以正常工作。这是脚本生成的 Flash 播放器：

```
 <embed name="jp_flash_0" id="jp_flash_0" src="player/jplayer/Jplayer.swf" width="0" height="0" bgcolor="#000000" quality="high" flashvars="id=jquery_jplayer_1&amp;vol=0.8&amp;muted=false" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" style="width: 0px; height: 0px; "> 
```

验证 mp3 url 工作正常。我还验证了（使用 Chrome 网络）JPlayer.swf 文件路径是正确的，并且可以从上面的代码中访问。

可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T06:30:13.927

看起来错误“PPB_Graphics2D.PaintImageData：矩形超出范围”通常是由于 Chrome 的 PepperFlash 插件而发生的。一些解决方案建议禁用它。那对我不起作用。

经过大量搜索，我通过下载一个新的 jquery.jplayer.min.js 解决了这个问题。不知道另一个有什么问题。

**[编辑]**在开发过程中再次发生在我身上。记下结果，以利于其他有同样问题的人。我使用**Chrome 的 Flash 插件的调试版本**来解决这个问题。该错误是因为在“swf”属性中指定的相对 URL 上找不到 JPlayer。在 jPlayer 上花费了相当长的时间之后，*看起来在出现 swf 错误时要检查的两件事是 - swf 路径和 JPlayer.swf 的版本。*

# iphone - didFinishLaunchingWithOptions 方法中的崩溃

> ID：13060425
> 
> 赞同：0
> 
> 时间：2012-10-25T01:40:31.433
> 
> 标签：iphone, ios, appdelegate

```
self.rootViewController = [[RootViewController alloc] initWithNibName:nil bundle:nil];
[self.window addSubview:self.rootViewController.view];    //App will not crash without this line

self.navigationController = [[UINavigationController alloc] initWithRootViewController: self.rootViewController];
[self.window addSubview:self.navigationController.view]; 
```

我在模拟器中运行它，它崩溃了，为什么？

错误信息：

```
Terminating app due to uncaught exception 'UIViewControllerHierarchyInconsistency', 
reason: 'adding a root view controller <RootViewController: 0x6871620> as a child of 
view controller:<UINavigationController: 0x6a86dc0>' 
```

还是不知道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:03:54.850

您没有清楚地指定您的问题，所以请在控制台上添加错误消息。没有错误消息，我们无法判断问题发生在哪里。由于 nib 文件名，它如何崩溃，您将 nib 文件名指定为 nil。请指定 nib 文件名。试试这个代码一次。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        // Override point for customization after application launch.
        self.rootViewController = [[RootViewController alloc] initWithNibName:@"RootViewController" bundle:nil];
        self.navigationController=[[UINavigationController alloc] initWithRootViewController:self.rootViewController];
        self.window.rootViewController = self.navigationController;
     //   [self.window addSubview:navigationController.view];
        [self.window makeKeyAndVisible];
        return YES;
    } 
```

我希望这段代码能解决你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T04:15:07.260

你的逻辑是错误的。添加 rootViewController 或添加 navigationController 作为窗口的子视图。您不能同时添加两个视图控制器。在这里，您的 navigationController 将覆盖您的 rootviewcontroller。如果可能，然后将您的 rootviewcontroller 添加到 navigationController 或将 navigationController 添加到 rootviewcontroller

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T04:43:53.233

由于您将`RootViewController`笔尖名称设置为`nil`我希望您在`RootViewController.m`内部方法`-(id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil`或其他方式中管理您的视图。

要修复您给出的错误消息，请按照以下方式更改您发布的代码

```
self.rootViewController = [[RootViewController alloc] initWithNibName:nil bundle:nil];
self.navigationController = [[UINavigationController alloc] initWithRootViewController: self.rootViewController];
self.window.rootViewController = self.navigationController;
[self.window makeKeyAndVisible]; 
```

# python - 排序和选择数据

> ID：13060427
> 
> 赞同：0
> 
> 时间：2012-10-25T01:40:59.683
> 
> 标签：python, sql, sorting, select

我有大量需要处理的数据表（排序、计算新数量、根据某些条件选择特定行等等......）。到目前为止，我一直在使用电子表格软件来完成这项工作，但这真的很耗时，我正在努力寻找一种更有效的方式来完成这项工作。

我使用 python，但我不知道如何将它用于这些事情。我想知道是否有人可以建议使用一些东西。SQL？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T02:48:19.853

您可能会喜欢`sqlite3`Python 标准库中的模块：

*   [http://docs.python.org/library/sqlite3.html](http://docs.python.org/library/sqlite3.html)

您将获得一个存储在磁盘文件中的 SQL 数据库，无需配置单独的数据库服务器。它不适合多个客户端同时访问，但对于像您这样的单线程分析应用程序，它非常适合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T01:56:55.953

这是一个非常普遍的问题，但是您可以做很多事情来让您的生活更轻松。

1.CSV 如果您要存储按列排序的数据，并且您正在寻找易于阅读的文本文件，这些非常有用。

2.Sqlite3 Sqlite3 是一个不需要服务器使用的数据库系统（它使用文件代替），并且与任何其他数据库系统一样进行交互。但是，对于处理大量数据的超大型项目，不建议这样做。

3.MySql MySql 是一个需要服务器进行交互的数据库系统，但可以针对超大型项目和小型项目进行调整。

不过，还有许多其他不同类型的系统，所以我建议您四处搜索并找到最合适的系统。但是，如果你想弄乱 Sqlite3 或 CSV，我相信标准库中提供了 Sqlite3 和 CSV 模块，python 2.7 和 3.x。

# c - 将嵌套 if 转换为 if(condition1 || condition2) 时遇到问题

> ID：13060428
> 
> 赞同：0
> 
> 时间：2012-10-25T01:41:11.777
> 
> 标签：c, if-statement, strcmp

我有以下代码可以正常工作。

```
if((strcmppgm2ram((char*)name, (ROM char*)"products.htm") != 0))
{
    if((strcmppgm2ram((char*)name, (ROM char*)"restock.htm") != 0))
    {
        return HTTP_IO_DONE;
    }
} 
```

我想清理它并把它放在表格中：

```
if((strcmppgm2ram((char*)name, (ROM char*)"products.htm") != 0) || (strcmppgm2ram((char*)name, (ROM char*)"restock.htm") !=0))
{   
        return HTTP_IO_DONE;    
} 
```

不幸的是，后者无法正常工作。我忽略了什么？？提前致谢！PS strcmp == strcmppgm2ram 为了这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T01:43:03.400

你`||`在应该使用的时候使用`&&`。

只有当两个条件都为真时，才能达到结果。

它之前不起作用的原因是，即使其中一个字符串匹配，另一个字符串也不匹配，因此无论输入如何，语句都会导致返回`HTTP_IO_DONE`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T01:43:44.383

请注意，只有`return HTTP_IO_DONE;`当**两个**条件都为真时，您才应该使用**and** (&&) 而不是**or**

# django - Django 管理员列表过滤器特定日期

> ID：13060433
> 
> 赞同：1
> 
> 时间：2012-10-25T01:41:50.800
> 
> 标签：django, filter, admin

有没有办法实现管理列表过滤器，允许我为模型上的字段选择特定日期？

例如，我有一个带有`order_date`字段的订单模型，我想提供一个过滤器，允许用户在管理后端输入特定日期，例如“06-24-2012”，并返回一个包含所有订单的查询集“2012 年 6 月 24 日”的“订单日期”。

我知道如何通过 SimpleListFilter 实现自定义过滤器，但似乎我不能使用自定义表单字段来代替预先命名的过滤器选项，例如`today`和`tomorrow`。

这只能通过自定义 html 模板实现吗？

# objective-c - 在 Objective-C 中获取指针变量的地址

> ID：13060438
> 
> 赞同：3
> 
> 时间：2012-10-25T01:42:28.020
> 
> 标签：objective-c, sqlite, addressof

在 sqlite3_open 函数（通用 C 函数）中，我需要将 sqlite3 通用 C 指针的地址作为参数发送。
例子：

```
//Valid code
NSString * databaseFile; //Path of database file. (Objective-C Object)
sqlite3 * db; //Pointer to hold the sqlite database. (C Pointer)

sqlite3_open([databaseFile UTF8String], &db); //db is sent using the & operator. 
```

问题是我需要从对象内部获取 *db 变量。我知道这段代码是错误的，但它是一种解释我需要什么的方法：

```
//I need to get the address of the pointer 'database' from inside the Objective-C Object 'object'.
//I hope one of those wrong lines explain what I want:

sqlite3_open([databaseFile UTF8String], &[object database]);
sqlite3_open([databaseFile UTF8String], [object &database]);
sqlite3_open([databaseFile UTF8String], &(object->database); 
```

我希望有人能理解我......哈哈哈谢谢你的时间！=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T01:50:24.190

假设`MyClass`看起来像这样：

```
@interface MyClass : NSObject
...
@property ( nonatomic ) sqlite3 * database ;
...
@end 
```

您的代码将是：

```
MyClass * object = ... ;

sqlite3 * database ;
sqlite3_open( ..., & database ) ;

object.database = database ; 
```

# django - 检测模型中的用户时区

> ID：13060439
> 
> 赞同：0
> 
> 时间：2012-10-25T01:42:28.247
> 
> 标签：django

我需要获取用户时区才能将天真的日期时间转换为本地时间。然而，它是用于管理视图的，所以看起来我几乎无法将它安装到模型中。request.session.get('django_timezone') 在模型中不可用，那么如何检测时区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T01:55:47.997

您应该将用户的时区存储在他们的个人资料中，然后通过以下方式访问它：

```
tz = some_user.get_profile().timezone 
```

有关 Django 用户配置文件的更多信息，请参阅：[https ://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)

# python - 如何在 matplotlib 中获取当前情节的爬升

> ID：13060450
> 
> 赞同：3
> 
> 时间：2012-10-25T01:44:11.217
> 
> 标签：python, matlab, numpy, matplotlib

在 Matlab 中绘制后，我们`caxis(max(caxis()) - [0.5, 0])`将颜色限制从当前的最大颜色限制缩放到低于该最大值的 0.5。这是有效的，因为`caxis()`在 Matlab 中，既可以获取也可以设置颜色限制。如何在 matplotlib 中做到这一点？

也就是说，我想实现以下目标：

```
import numpy.random, numpy, pylab
arr = numpy.random.randn(100,100)
pylab.figure()
pylab.imshow(arr)
pylab.colorbar()
pylab.clim([numpy.max(arr.ravel())-0.5, numpy.max(arr.ravel())]) # [*]
pylab.show() 
```

*没有*星号调用`pylab.clim()`求助于`arr`，正在绘制的数组。换句话说，如何在 matplotlib 中获取当前图形的“clim”？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T02:06:52.777

如果您没有保留返回的图像对象，您可以使用`pylab.gci`来获取当前的 ScalarMappable（即当前颜色条将基于的任何内容）。

从那里，您只需要`get_clim`ScalarMappable 对象的方法。

所以，你可以这样做：

```
vmin, vmax = plt.gci().get_clim() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T01:48:55.600

发现一个 2006 年的邮件列表对话向我展示了方式：

```
im = pylab.imshow(arr)
pylab.clim(im.norm.vmax - numpy.array([0.5, 0])) 
```

# java - Xcode 4.5.1：链接器错误：NSJavaVirtualMachine，找不到架构 i386 的符号

> ID：13060452
> 
> 赞同：3
> 
> 时间：2012-10-25T01:44:18.690
> 
> 标签：java, objective-c, linker-errors, undefined-symbol, bridge

我正在尝试从目标 C、iPhone 5 应用程序中调用 Java 类。我正在使用 Xcode 4.5.1。在这个阶段，我什至无法加载虚拟机而不会出现以下错误：

架构 i386 的未定义符号：

“_OBJC_CLASS_$_NSJavaVirtualMachine”，引用自：main.o ld 中的 objc-class-ref：未找到架构 i386 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

这些是我遵循的步骤，

1) 在 main.m 中：

```
@autoreleasepool {

      [NSJavaVirtualMachine defaultVirtualMachine]; //Added this line to load the Java VM.

        id vector=[[NSClassFromString(@"java.util.Vector") alloc] init];
        [vector add:@"one item!"];
        NSLog(@"item 1=%@",[vector get:0]);

 return 0;

} 
```

2）我通过以下方式添加了JavaVM.Framework：（右键单击）框架->“将文件添加到项目”-> JavaVM.Framework->（将项目复制到目标组的文件夹并创建文件夹引用...->单击添加

（它也出现在 Build Phases -> Link Binary with Libraries）

3) 在 info.plist 中，添加了以下属性：

```
Cocoa Java Application = Yes 
```

Java 类路径和 Java 根目录

两者都设置为我存储 Java 文件的全局目录。

我正在尝试调用 Java 类的 add 和 get 函数`Vector`。但我似乎根本无法将 VM 加载到 Xcode 中！请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T04:37:08.427

你不能在 iOS 上使用 NSJavaVirtualMachine。Cocoa/Java 绑定仅在 OS X 中可用，即使在那里也已弃用。

# java - 传递 Java 对象的最有效方法是什么？

> ID：13060454
> 
> 赞同：1
> 
> 时间：2012-10-25T01:44:32.357
> 
> 标签：java, oop, methods, reference

我正在考虑创建以下方法：

```
public static MyBigCollection doSomeStuff(MyBigCollection m) { ... return m; } 
```

然后在另一个方法中（可能在另一个类中），像这样使用它：

```
MyBigCollection mbc = new MyBigCollection();
mbc = stuffClass.doSomeStuff(mbc); 
```

我是否以正确的方式进行此操作-这是对对象“做一些事情”的有效方法吗？为了可扩展性，我想中断这些东西。我做 c# 这么久了，我只是不确定 java。在 c# 中，该方法可以返回 void，我可以简单地调用 doSomeStuff(mbc) - 这将有效地通过引用传递我的对象并对它做一些事情。我一直在阅读 java 的工作方式不同，所以我想在这里咨询专家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T02:03:58.770

只有*一种*方法可以传递 Java 对象。Java 通过值传递*所有内容*。对象不通过；他们住在堆上。你传递引用，而不是对象。

据我所知，与 C# 相同。

这种微优化通常是没有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T01:47:21.117

我会重构为：

```
stuffClass.doSomeStuff(mbc); 
```

（即修改mbc并返回void的方法）

请记住，所有 Java 对象都存储在堆内存中，并通过引用指针传递。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T01:47:32.330

你这样做的方式很好，但你实际上并不需要`return`方法结束时的对象。因此，以下会更简单......

```
MyBigCollection mbc = new MyBigCollection();
stuffClass.doSomeStuff(mbc); 
```

Java 中的对象是通过引用传递的，因此方法中对`mbc`Object 的任何修改在方法调用结束后`doSomeStuff()`仍将保留在变量中。`mbc`

`return`您可能考虑使用Object的唯一原因`mbc`是，如果您希望能够将多个方法连接在一起，例如这个......

```
MyBigCollection mbc = new MyBigCollection();
mbc.doStuff1().doStuff2().doStuff3(); 
```

在这种情况下，因为`mbc`每个`doStuff()`方法都返回了，所以可以直接调用下一个方法返回到同一个对象。如果没有`return`参考，你必须做这样的事情......

```
MyBigCollection mbc = new MyBigCollection();
mbc.doStuff1();
mbc.doStuff2();
mbc.doStuff3(); 
```

这是同一件事，但不是那么紧凑。你如何去做真的取决于你打算如何使用方法和对象本身。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T01:51:17.607

我认为您的问题是关于 Java 如何将引用传递给对象。Java 是按值传递的，这在第一次说时可能会令人困惑。对于对象，这意味着对象的引用值被传递给方法。与该值引用的对象交互将改变“传入”的对象，因此您无需返回它。

字符串的处理方式不同，因为它们是不可变的。基元也是按值传递的，但由于传递的值不是引用，因此您不会更改原始变量。

测试这一点的最简单方法是编写一些代码并观察（您也可以考虑 Java 教程）

# python - 无法使用 shutil 从远程计算机复制文件

> ID：13060455
> 
> 赞同：4
> 
> 时间：2012-10-25T01:44:34.553
> 
> 标签：python, centos, samba, shared-directory, shutil

我需要从远程机器复制文件。

代码是这样的

```
import shutil

shutil.copyfile('//XXX.XXX.XXX.XXX/home/Shares Folder/file.txt','/home/file.txt') 
```

该文件的位置是一个共享文件夹，但每次我运行它都会给我这个错误

> 文件“”，第 1 行，在？
> 
> 文件“usr/lib/python2.4/shutil.py”，第 47 行，在 copyfile
> 
> frsc = open (src,'rb')
> 
> IOError：[Errno 2] 没有这样的文件或目录：'//XXX.XXX.XXX.XXX/home/Shares Folder/file.txt'

请注意，我在当前机器上运行此脚本，而我要复制的文件在远程机器上。我不确定这个细节是否相关，我还是说。

我 100% 确定该文件在那里，所以我想知道为什么它会给我这样的错误消息。

我使用 CentOS 和 python 2.4.3

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:31:18.313

您还使用 samba 和共享文件夹进行了标记 - 如果您尝试通过 samba 进行复制，您可能需要查看 pysmbc 或类似的 python samba 库。 [http://pypi.python.org/pypi/pysmbc/](http://pypi.python.org/pypi/pysmbc/)甚至有一个通过 samba 打开和读取文件的示例 - 这是在本地写出内容的一小步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:49:49.777

`shutil`不支持远程文件复制。它仅适用于本地副本。如果你的两台机器都是基于 UNIX 的，你可以尝试使用一些模块来实现你可用的传输（`SSH/SFTP`, `rsync`, whanot）

# prolog - 如何在 Prolog 中编写条件规划？

> ID：13060456
> 
> 赞同：0
> 
> 时间：2012-10-25T01:44:44.190
> 
> 标签：prolog, conditional, planning, clpfd

我试图编写一个可以理解用 C# 编写的学生程序的 prolog 代码。现在我被困在识别学生程序中的“if”语句的过程中。例如：以下是我期望学生提供的代码。

```
int d = int.Parse(Console.ReadLine());  // value d is inputted by user
int s = 0;

if (d>0)
    s = 2;
else if (d==0)
    s = 1;
else
    s = 0; 
```

我将这个预期代码的目标定义为：

```
goal:- 
   hasVarName(Vid_s, s),
   hasVarName(Vid_d, d),
   hasVarValue(Vid_d, Vd),
   ((not(gt(Vd,0)); hasVarValue(Vid_s, 2)),           %eq: [Vd>0] -> [val_s = 2]
   ((gt(Vd,0); not(eq(Vd,0)); hasVarValue(Vid_s, 1)), %eq: [~(Vd>0)^(Vd=0)] -> [val_s = 1]
   ((gt(Vd,0); eq(Vd,0); hasVarValue(Vid_s, 0).       %eq: [~(Vd>0)^~(Vd=0)] -> [val_s = 0] 
```

问题是我如何在 prolog 事实和规则中表示上述学生代码，以找出任何可能的条件都满足目标。

我试图将学生代码的第一部分更改为如下所示的事实，但真的不知道如何将学生的“if”语句表示为 prolog 中的事实/规则（我想，我不应该将其更改为 prolog “如果”，对吧？）

```
hasVarName(varID_d, d)
hasVarValue(varID_d, val_d)   %it is unknown, so I represent it as symbol 'val_d'

hasVarName(varID_s, s)
hasVarValue(varID_s, 0) 
```

另一个，在我的目标中，当我进行比较时，例如`gt(Vd,0)`我认为我不能使用序言大于运算符，也`Vd> 0`不会`Vd @> 0`导致 Vd 中的值实际上是用户输入的某个值，但它表示为符号值（在这种情况是：）`val_d`。

注意：使用上述目标，我认为如果将学生代码更改为以下代码，则可以满足定义的目标。

```
int d = int.Parse(Console.ReadLine());  // value d is inputted by user
int s = 0;

if (d>0)
    s = 2;
else if (d==0)
    s = 1; 
```

或者

```
int d = int.Parse(Console.ReadLine());  // value d is inputted by user
int s = 10;           // any random initialization

if (d>0)
{
    int x = 2;       // unnecessary step, but still Ok.
    s = x;
}
else if (d==0)
    s = 1;
else
    s = 0; 
```

但同样，我需要帮助/想法如何在序言中将此代码表示为操作/规则/事实以实现目标。

非常感谢任何帮助。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:22:03.237

我猜您尝试使用以下布尔标识通过暗示对 if-then-else 进行建模：

```
A -> B == ~A v B. 
```

与其使用蕴涵的连词，不如使用析取来在分支之间进行选择，并在控制流中使用合取更容易。但是您仍然需要通过否定排除以前的 if 条件。

举个例子：

```
if (d>0)
   s = 2;
else if (d==0)
   s = 1;
else
   s = 0; 
```

您可以使用 CLP( * ) 对其进行建模。添加额外的变量以便变量不会被覆盖，但这在上面的小片段中不是问题。在 CLP( * ) 中，上面的代码片段变成了，为了简单起见，我使用 CLP(FD)：

```
Welcome to SWI-Prolog (Multi-threaded, 64 bits, Version 6.3.0)
Copyright (c) 1990-2012 University of Amsterdam, VU Amsterdam
?- use_module(library(clpfd)).
?- [user].
that_if(D, S) :-
   (D #> 0, S #= 2;
    D #=< 0, D #= 0, S #= 1;
    D #=< 0, D #\= 0, S #= 0)
^D 
```

在一个体面的 CLP( * ) 系统中，您可以在查询中任意实例化或约束 D 或 S。例如，我们已经在 CLP(FD) 中得到：

```
/* What conditions give result S #= 1 ? */
?- S #= 1, that_if(D, S).
S = 1,
D = 0 .

/* What results give condition D #= 1 */
?- D #= 1, that_if(D, S).
D = 1,
S = 2 ;
false.

/* What conditions give a result S #=< 1 */
?- S #=< 1, that_if(D, S).
S = 1,
D = 0 ;
S = 0,
D in inf.. -1.

/* What results give a condition D #>= 0 */
?- D #>= 0, that_if(D, S).
S = 2,
D in 1..sup ;
D = 0,
S = 1 ;
false. 
```

再见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:16:34.240

通常一个语言实现需要一个抽象语法树，它可以方便地指定实现我们被允许表达的结构的语义动作。

您似乎跳过了构建语法树的阶段，并且（手动？）代表程序的中间级别。

如果您坚持这种中等级别的表示，则可以使用递归术语（实际上是抽象树），例如`if(Condition, Then, Else)`每个 var 依次是语法树。

否则，更实际的表示（通常应用于命令式语言），使用基本块（没有跳转的指令序列）和标签的概念来描述执行流程。

结果是一个图形，程序的行为由该表示的“拓扑”决定。

```
goal:- 
   hasVarName(Vid_s, s),
   hasVarName(Vid_d, d),
   hasVarValue(Vid_d, Vd),

   %eq: [Vd>0] -> [val_s = 2]
   ((not(gt(Vd,0)); hasVarValue(Vid_s, 2), goto(label(0))),

   %eq: [~(Vd>0)^(Vd=0)] -> [val_s = 1]
   ((gt(Vd,0); not(eq(Vd,0)); hasVarValue(Vid_s, 1), goto(label(0))),

   %eq: [~(Vd>0)^~(Vd=0)] -> [val_s = 0]
   ((gt(Vd,0); eq(Vd,0); hasVarValue(Vid_s, 0)), % the goto is useless here...

   label(0),
   ..... 
```

请注意，我没有注意正确描述您的示例程序，只是放置了跳转以显示这种可能性......

**编辑**我认为*一般*问题无法解决，相当于图灵机的[停机问题](http://en.wikipedia.org/wiki/Halting_problem)。对于手头的特殊情况，*如果没有循环*，我会在 AST 上使用抽象解释来解决问题。即计算有趣内容的解释器。

是否可行取决于您的目标程序的普遍性。您应该能够为每个条件点中涉及的每个变量划分整数域。事情变得迅速复杂......

具体来说，在 IF THEN ELSE 的条件点尝试对域进行分区。使用这种方法，让 Prolog*执行*IF 测试两个分支，传播值。但是，正如我所说，这并不容易......

# python - 在python中有效地找到数组的范围？

> ID：13060458
> 
> 赞同：4
> 
> 时间：2012-10-25T01:45:19.247
> 
> 标签：python, performance, range, max, min

是否有一种公认的有效方法来查找python中数字列表的范围（即最大值 - 最小值）？我尝试过使用循环，我知道我可以使用`min`和`max`函数进行减法。我只是想知道是否有某种更快的内置。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T01:55:08.017

如果你真的需要高性能，试试 Numpy。该函数计算数组[`numpy.ptp`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ptp.html)中值的范围（即）。`max - min`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T01:49:21.597

你不可能找到比`min`and`max`函数更快的东西。

您可以编写一个*函数*`minmax`来计算两个值而不是两次，但您应该对其进行基准测试以确保它更快。如果它是用 Python 本身编写的，则可能不是，但添加到 Python 的 C 例程可能会这样做。类似的东西（伪代码，即使它*看起来*像 Python）：

 **```
def minmax (arr):
    if arr is empty:
        return (None, None)
    themin = arr[0]
    themax = arr[0]
    for each value in arr[1:]:
        if value < themin:
            themin = value
        else:
            if value > themax:
                themax = value
    return (themin, themax) 
```

另一种可能性是在数组周围插入您自己的类（如果您想直接处理真实数组，这可能是不可能的）。这将基本上执行以下步骤：

*   将初始空数组标记为干净。
*   如果将第一个元素添加到数组中，则将其设置`themin`为该`themax`值。
*   如果将元素添加到非空数组，则设置`themin`并`themax`取决于新值与它们的比较方式。
*   如果删除等于`themin`or的元素，`themax`则将数组标记为脏。
*   如果从一个干净的数组中请求最小值和最大值，则返回`themin`and `themax`。
*   如果从脏数组中请求最小值和最大值，则在上面的伪代码中计算`themin`并使用循环，然后将数组设置为干净。`themax`

这样做是为了缓存最小值和最大值，这样在最坏的情况下，您只需要不经常进行大计算（在删除最小值或最大值的元素之后）。所有其他请求都使用缓存信息。

此外，元素的添加无需大量计算即可保持`themin`和更新。`themax`

而且，可能更好的是，您可以为*每个*`themin`and维护一个脏标志，`themax`以便弄脏一个仍然允许您使用另一个的缓存值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-25T01:55:32.537

如果你使用 Numpy 并且你有一个一维数组（或者可以从列表中快速创建一个），那么就有了函数`numpy.ptp()`：

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.ptp.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ptp.html)**

# php - 24:00 和 00:00 之间的区别？

> ID：13060467
> 
> 赞同：6
> 
> 时间：2012-10-25T01:47:13.183
> 
> 标签：php, date

24:00 时钟和 00:00 时钟有什么区别。IMO 24:00 时钟是前一天，00:00 时钟是新一天的开始。但我不太相信，而且我是新来的编程新手

更新：这是关于如何处理 24:00 和 00:00 混乱的军事时间和风格指南的维基百科文章：http: [//en.m.wikipedia.org/wiki/24-hour_clock#section_1](http://en.m.wikipedia.org/wiki/24-hour_clock#section_1)。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-25T02:45:06.367

**没有`24:00`**。只是 PHP在您输入时*理解*`24:00`，而不是抛出错误或返回`false`（如 5.3 之前）。如果你告诉 PHP `24:00 today`，它就会明白`00:00 tomorrow`。在 PHP 的时间表示中，它们都是同一时刻。

你可以*告诉*PHP 它是`24:00`，但是当你*问*PHP 时，它总是会说`00:00`. `24:00`只是`00:00`第二天的另一种说法。`23:59`和之间没有零长度的额外秒（或其他东西）`00:00`。

所以，当你说你不能在每个星期六的午夜安排某事时，我不明白，而实际上你有两种安排方式：`Fri 24:00`或`Sat 00:00`. 没有理由使用`Sat 00:01`.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-25T01:51:28.527

符号 24:00 主要用于指代时间间隔中一天的确切结束。一天的最后一分钟开始于 24 小时制的 23:59

[来自维基百科](http://en.wikipedia.org/wiki/12-hour_clock)

> 24:00 = 午夜（一天结束）显示为第二天的开始
> 00:00 = 午夜（一天的开始）

但真的`24:00 = 00:00`......没有区别，但由于兼容性问题，我建议你使用`00:00`

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-10-25T01:57:59.043

23:59 之后是 0:00，而不是 24:00 请在 php 中查看下面的代码，因为您放置了“php”标签：

```
echo date('G:i:s', mktime(0,0,0)) . "\n" ;
echo date('G:i:s', mktime(0,0,0)-1) . "\n" ; 
```

它将显示：

```
0:00:00
23:59:59 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-25T02:01:22.240

自己尝试一下（您应该对您的问题进行处理，以便与 PHP 的关系变得更加清晰）：

```
echo '00:00 - ', date('r', strtotime('00:00')), 
   "\n24:00 - ", date('r', strtotime('24:00')); 
```

给出以下输出（[Demo](http://codepad.viper-7.com/TlQXuS)）：

```
00:00 - Thu, 25 Oct 2012 00:00:00 +0000
24:00 - Fri, 26 Oct 2012 00:00:00 +0000 
```

接下来你可以做的事情（并且@Baba 已经指出它）是首先检查一些资源，比如（作为第一步）维基百科。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-12T04:32:35.090

00:00 / 24:00 的概念对我在中国工作的人来说是一个熟悉的概念——在我的情况下，我已经按照保险单的覆盖期限来处理它：

生效日期为 01/OCT/2013 24:00 的年度保单将承保 2013 年 10 月 1 日至 2014 年 9 月 30 日。

生效日期为 01/OCT/2013 00:00 的年度保单将承保 2013 年 10 月 2 日至 2014 年 10 月 1 日。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-25T10:34:40.107

24:00 是有效时间，它与 00:00 不*完全相同*- 它比 00:00 提前了整整 24 小时

12 月 25 日的 00:00 是圣诞节的开始。

12 月 25 日 24:00 是圣诞节的最后一天。你可以说现在是节礼日的 00:00。

节礼日特卖可能在节礼日的 00:00 开始 - 并可能在节礼日的 24:00 结束。比说 23:59:59 方便得多。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-03T16:22:15.140

让我们将 24 小时时间转换为 12 小时时间。如果是晚上 11:59，那么 1 分钟后就是凌晨 12:00。AM 指一天的开始，PM 指一天的结束。如果您使用 24:00，您将指的是一天结束 (PM)，而 12:00 PM 不是晚上。所以使用 00:00。

# ruby-on-rails - Rails 单选按钮没有一致地传递值

> ID：13060470
> 
> 赞同：3
> 
> 时间：2012-10-25T01:47:30.520
> 
> 标签：ruby-on-rails, ruby, radio-button

我的单选按钮一直有一些问题。这是我的 ruby​​ 生成的 HTML：

```
 <form accept-charset="UTF-8" action="/uanswers" class="new_uanswer" id="new_uanswer"         method="post"><div style="margin:0;padding:0;display:inline">
    <input name="utf8" type="hidden" value="✓" /><input name="authenticity_token"    type="hidden" value="tiJsYNr71Zqo+R5TheG2nvB3ownJ4iKbmwMfA/11TXg=" /></div> 
        <table> 
    <input id="uanswer_answer_id" name="uanswer[answer_id]" type="hidden" /> <tr> 
    <td><input id="uanswer_answer_id_12" name="uanswer[answer_id]" type="radio" value="12" /></td> 
    <td><label for="uanswer_answer_id">!</label></td> <td> | Count: 0</td> </tr> <input id="uanswer_answer_id" name="uanswer[answer_id]" type="hidden" />
    <tr> 
    <td><input id="uanswer_answer_id_13" name="uanswer[answer_id]" type="radio" value="13" /></td>
    <td><label for="uanswer_answer_id">!!</label></td> <td> | Count: 0</td> </tr> <input id="uanswer_answer_id" name="uanswer[answer_id]" type="hidden" />
    <tr>
    <td><input id="uanswer_answer_id_14" name="uanswer[answer_id]" type="radio" value="14" /></td>
    <td><label for="uanswer_answer_id">!!!</label></td> <td> | Count: 0</td>
    </tr>
</table> 
```

不幸的是，它仅在我选择第三个单选按钮时才有效。例如，如果我选择第一个或第二个，params 哈希中的“answer_id”字段为空白。但是，如果我选择第三个，它是正确的值：14。为什么会这样做？HTML 似乎正确的。

编辑：这是这个 HTML 背后的 ERB

```
<%= form_for(uanswer) do |f| %>
  <table>
  <% answers.each do |answer| %>
  <%= f.hidden_field :answer_id %>
    <tr>
      <% unless current_user.has_answered? question %>
        <td><%= f.radio_button :answer_id, answer.id %></td>
      <% end %>
      <td><%= f.label :answer_id, answer.answer %></td>
      <td> | Count: <%= answer.count %></td>
    </tr>
  <% end %>
  </table>
  <% unless current_user.has_answered? question %>
    <%= f.submit "Answer!" %>
  <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:13:21.420

answer_id 的隐藏字段可能是必要的（如果未选中单选按钮，它将使服务器清除 answer_id），但它被放置在错误的位置。它应该不在循环中：

```
<%= form_for(uanswer) do |f| %>
  <table>
  <%= f.hidden_field :answer_id %>
  <% answers.each do |answer| %>
    <tr>
      <% unless current_user.has_answered? question %>
        <td><%= f.radio_button :answer_id, answer.id %></td>
      <% end %>
      <td><%= f.label :answer_id, answer.answer %></td>
      <td> | Count: <%= answer.count %></td>
    </tr>
  <% end %>
  </table>
  <% unless current_user.has_answered? question %>
    <%= f.submit "Answer!" %>
  <% end %>
<% end %> 
```

# php - MySQL没有一致地更新行？

> ID：13060473
> 
> 赞同：0
> 
> 时间：2012-10-25T01:47:34.033
> 
> 标签：php, javascript, mysql

我有以下代码将 AJAX POST 发送到我服务器上的 php 文件以将行添加到 MySQL 表中。当用户将某个项目标记为他们的最爱时，此函数将运行：

```
$.ajax({
    type: 'POST',
    data: 'school='+school+'&token='+token,
    url: 'http://www.codekraken.com/testing/snowday/database9.php',
    success: function(data){
    console.log(data);
    },
    error: function(){
    console.log(data);
    }
 }); 
```

我也有一个类似的功能，当他们删除收藏夹时会运行：

```
data: 'school=&token='+token, 
```

这有效，但并非始终如一。PHP代码如下：

```
<?php
$server = "localhost";
$username = "";
$password = "";
$database = "";
$con = mysql_connect($server, $username, $password) or die ("Could not connect: " . mysql_error());

mysql_select_db($database, $con);

$token = $_POST["token"];
$school = $_POST["school"];

if (strlen($token) == 0){
    die('Incorrect token');
}

if (strlen($school) == 0){
    die('Invalid school name');
}

$sql = "INSERT INTO Snow (Token, School, Skip) ";
$sql .= "VALUES ('$token', '$school', '0') ON DUPLICATE KEY UPDATE School='$school'";

if (!mysql_query($sql, $con)) {
    die('Error: ' . mysql_error());
} else {
    echo "$token, $school = Success";
}

mysql_close($con);
?> 
```

我的意思是它不能始终如一地工作是，如果我将一个项目标记为收藏，它将创建一行。如果我取消标记它，它将变为`$school`无。如果我随后标记不同的项目，它将更改为该项目。**但是，如果**，我尝试将第一个项目标记为收藏，它不会更新，但会保留最后的更改。

因此，似乎它只是在每次发生新事情时才更新行，但如果该值已经存在，即使它当前不存在，也不会更新该行。

**注意：**列`Token`被索引为`UNIQUE PRIMARY`

相关的 JS 代码`var school`：

```
function setFavorite() {
    var threshold = {
        x: 30,
        y: 10
    };
    var originalCoord = {
        x: 0,
        y: 0
    };
    var finalCoord = {
        x: 0,
        y: 0
    };

    function touchMove() {
        finalCoord.x = event.targetTouches[0].pageX;
        changeX = originalCoord.x - finalCoord.x;
        var changeY = originalCoord.y - finalCoord.y;
        if (changeY < threshold.y && changeY > (threshold.y * -1)) {
            changeX = originalCoord.x - finalCoord.x;
            if (changeX > threshold.x) {
                window.removeEventListener('touchmove', touchMove, false);
                $(document).off("touchmove", ".row");
                if ($(event.target).attr("class") === "row-inside") {
                    var element = $(event.target);
                }
                if ($(event.target).attr("class") === "row-l") {
                    var element = $(event.target).parent();
                }
                if ($(event.target).attr("class") === "row-r") {
                    var element = $(event.target).parent();
                }
                var text = $(element).find(".row-l").text();

                var token = window.deviceToken;
                var school = $(element).find(".row-l").text();

                var favstatus = $(element).find(".row-r").text();
                var thisStar = $(element).parent().find(".star-inside");
                $(element).css("margin-left", "-75px");
                if ($(thisStar).hasClass("favorite")) {
                    $.ajax({
                        type: 'POST',
                        data: 'school=&token=' + token,
                        url: 'http://www.codekraken.com/testing/snowday/database10.php',
                        success: function (data) {
                            console.log(data);
                        },
                        error: function () {
                            console.log(data);
                        }
                    });
                    $(".clear span").text("");
                    $(thisStar).removeClass("favorite");
                    localStorage.removeItem("favorite");
                    localStorage.removeItem("favorite-status");
                } else {
                    $.ajax({
                        type: 'POST',
                        data: 'school=' + school + '&token=' + token,
                        url: 'http://www.codekraken.com/testing/snowday/database10.php',
                        success: function (data) {
                            console.log(data);
                        },
                        error: function () {
                            console.log(data);
                        }
                    });
                    $(".clear span").text("\"" + text + "\"");
                    localStorage.setItem("favorite", text);
                    localStorage.setItem("favorite-status", favstatus);
                    $(".star-inside").not(thisStar).removeClass("favorite");
                    $(thisStar).addClass("favorite");
                }
                setTimeout(function () {
                    $(element).css("margin-left", "0px");
                }, 500);
                setTimeout(function () {
                    $(document).on("touchmove", ".row", function () {
                        touchMove();
                    });
                }, 800);
            }
        }
    }

    function touchStart() {
        originalCoord.x = event.targetTouches[0].pageX;
        finalCoord.x = originalCoord.x;
    }
    $(document).on("touchmove", ".row", function () {
        touchMove();
    });
    $(document).on("touchstart", ".row", function () {
        touchStart();
    });
} 
```

MySQL 输出：

```
CREATE TABLE `Snow` (
 `Token` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
 `School` text COLLATE utf8_unicode_ci NOT NULL,
 `Skip` int(1) NOT NULL,
 PRIMARY KEY (`Token`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicod 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:36:06.367

我想到了。

问题似乎与 Phonegap 缓存 AJAX 请求有关。然后我想如果我添加`cache: false,`到 AJAX 请求中，它会解决它，但再一次，没有骰子。

然后我用谷歌搜索了一下，找到了让它工作的代码：

```
beforeSend: function(xhr) { xhr.setRequestHeader("Cache-Control", "no-cache"); xhr.setRequestHeader("pragma", "no-cache"); }, 
```

你把它放在你的 AJAX 请求中，所以它看起来像：

```
$.ajax({
    cache: false,
    beforeSend: function (xhr) {
        xhr.setRequestHeader("Cache-Control", "no-cache");
        xhr.setRequestHeader("pragma", "no-cache");
    },
    type: 'POST',
    ...
}); 
```

* * *

我不完全确定它是否可以在没有设置的情况下工作`cache: false`，但我不想摇摆不定。我还在我的 PHP 代码中指定了这些标头：

```
header("Expires: Tue, 01 Jul 2001 06:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache"); 
```

原来上面的内容不是必需的，但我会把它留在这里，以防它帮助别人。

# java - Java GUI 类按钮面板

> ID：13060476
> 
> 赞同：1
> 
> 时间：2012-10-25T01:48:11.377
> 
> 标签：java, swing, layout, paint

我希望在我的 GUI 中显示一个包含 12 个按钮的面板。但由于某种原因，他们没有出现。我现在不知道我的代码有什么问题。我还没有在我的动作执行方法中添加任何东西，但我会（现在我只专注于让按钮显示）。那么有人可以告诉我出了什么问题吗？谢谢！

编辑* 这就是我的 GUI 类中的所有内容，我想要显示两个电梯对象画布（什么都没有显示）

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;

public class GUI extends JFrame implements ActionListener 
{
private static final Dimension PREF_SIZE = new Dimension(1000, 1000);

MyCanvas leftCanvas = new MyCanvas();
MyCanvas rightCanvas = new MyCanvas();
ArrayList<JButton> buttonList = new ArrayList<JButton>(); 
JPanel buttonPanel, leftPanel, rightPanel;

public GUI()
{
  super("Elevators");
    //setSize(800,800);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    //setVisible(true);

    JPanel mainPanel = new JPanel();
    mainPanel.setLayout(new GridLayout(1,3));

    leftPanel = new JPanel();
    leftPanel.add(leftCanvas);
    rightPanel = new JPanel();
    rightPanel.add(rightCanvas);

    buttonPanel = new JPanel();     
    buttonPanel.setLayout(new GridLayout(12,1));   
    buttonPanel.setSize(900,900);

    add(mainPanel); 

    for(int i=0; i<12; i++)
    {
        buttonList.add(new JButton(""+i));
        JButton btn = buttonList.get(i);
        buttonPanel.add(btn);
    }
    mainPanel.add(buttonPanel, BorderLayout.CENTER);
    mainPanel.add(leftPanel, BorderLayout.EAST);
    mainPanel.add(rightPanel, BorderLayout.WEST);
    createAndShowGui();
}
@Override
public Dimension getPreferredSize() {
    return PREF_SIZE;
}
private static void createAndShowGui() {
  UI frame = new UI();
  frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  frame.pack();
  frame.setLocationByPlatform(true);
  frame.setVisible(true);
}
//public static void main(String[] args) {
  //SwingUtilities.invokeLater(new Runnable() {
    // public void run() {
      //  createAndShowGui();
   //  }
  //});
//} 
//public void paint(Graphics g)
//{

// }

public void actionPerformed(ActionEvent e)
{

}

} 
```

这是我的画布课

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.JFrame;
import javax.swing.JButton;

public class MyCanvas extends Canvas 
{
private Elevator e;

int xPos =0;
int yPos=0;

public MyCanvas()
{
   setSize(600,600);
   repaint();
}

public void paint(Graphics g)
{
   g.setColor(Color.BLACK);
   g.fillRect(xPos,yPos,100, 100);

}

public void actionPerformed(ActionEvent e)
{
    repaint();
}
public void setElevator(Elevator ev)
{
    e = ev;
}
} 
```

![这就是我想要完成的项目](../Images/0d53c7f0a0196e87b25ad6414a285ca8.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T02:09:24.080

你覆盖了框架的`paint`方法......

```
public void paint(Graphics g)
{

} 
```

但未能调用`super.paint(g)`....

的职责之一`paint`是绘制子组件...

**更新**

此外，由于约束已被丢弃，调用`this.setLayout(new BorderLayout())`会扰乱您的布局，这意味着布局管理器不知道应该去哪里

**更新示例**

我能够制作这个...

![在此处输入图像描述](../Images/28e9275bccb37d5d1eee0a38160712d4.png)

有了这个

```
public class Elevator02 {

    public static void main(String[] args) {
        new Elevator02();
    }

    public Elevator02() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                UI ui = new UI();
                ui.setLocationRelativeTo(null);

            }
        });
    }

    public class UI extends JFrame implements ActionListener {

        ArrayList<Button> buttonList = new ArrayList();
        JPanel buttonPanel;

        public UI() {
            super("Elevators");
            setSize(200, 400);
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            setVisible(true);

            JPanel mainPanel = new JPanel();
            mainPanel.setLayout(new GridLayout(1, 3));

            buttonPanel = new JPanel();
            buttonPanel.setLayout(new GridLayout(12, 1));

            add(mainPanel);

            for (int i = 0; i < 12; i++) {
                buttonList.add(new Button("" + i));
                buttonPanel.add(buttonList.get(i));
                buttonList.get(i).addActionListener(this);
            }
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            mainPanel.add(buttonPanel);
        }

//        public void paint(Graphics g) {
//        }
        public void actionPerformed(ActionEvent e) {
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T02:08:17.497

编辑：

之前（您提供的代码）

```
this.add(mainPanel); 

    for(int i=0; i<12; i++)
    {
        buttonList.add(new Button(""+i));
        buttonPanel.add(buttonList.get(i));
        buttonList.get(i).addActionListener(this);
    }
    this.setLayout(new BorderLayout());
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    mainPanel.add(buttonPanel, BorderLayout.CENTER); 
```

之后：（在添加组件之前设置框架的布局）

```
 this.setLayout(new BorderLayout()); // move this line
    this.add(mainPanel); 

    for(int i=0; i<12; i++)
    {
        buttonList.add(new Button(""+i));
        buttonPanel.add(buttonList.get(i));
        buttonList.get(i).addActionListener(this);
    }

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    mainPanel.add(buttonPanel, BorderLayout.CENTER); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T02:07:07.677

建议：

*   不要将 JFrame 的布局设置为 BorderLayout——它的 contentPane*已经使用了*BorderLayout。
*   将组件添加到使用 GridLayout 的容器时，不要使用 BorderLayout 约束。
*   使用 JButtons，而不是 Buttons（Swing 组件，而不是 AWT 组件）
*   不要设置任何东西的大小。而是覆盖`getPreferredSize()`返回所需的维度。
*   更好的是，让组件自己调整到最佳尺寸。
*   您总是希望`pack()`在将所有组件添加到顶级窗口（此处为 JFrame）之后以及在调用`setVisible(true)`.

例如，

```
import javax.swing.*;
import java.awt.*;
import java.util.ArrayList;

public class UI extends JFrame {
   private static final Dimension PREF_SIZE = new Dimension(800, 800);
   private ArrayList<JButton> buttonList = new ArrayList<JButton>();
   private JPanel buttonPanel;

   public UI() {
      super("Elevators");
      setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

      JPanel mainPanel = new JPanel();
      mainPanel.setLayout(new BorderLayout());

      buttonPanel = new JPanel();
      buttonPanel.setLayout(new GridLayout(12, 1));

      add(mainPanel);

      for (int i = 0; i < 12; i++) {
         buttonList.add(new JButton("" + i));
         JButton btn = buttonList.get(i);
         buttonPanel.add(btn);
      }
      mainPanel.add(buttonPanel, BorderLayout.CENTER);
   }

   @Override
   public Dimension getPreferredSize() {
      return PREF_SIZE;
   }

   private static void createAndShowGui() {
      UI frame = new UI();
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

显示为，

![按钮面板图像](../Images/9322fc9587a2c97f4ea587caad723837.png)

**编辑 2**
考虑为整个 GUI 使用 BorderLayout，两个电梯图像可以放置在 BorderLayout.LINE_START 和 BorderLayout.LINE_END 位置。电梯 JPanel 可以使用空布局来允许电梯组件改变位置。中央 JPanel 也可以使用 BoxLayout.PAGE_AXIS（垂直）中的 BoxLayout。

# c# - 如何从 ASP.NET C# 中的数据集中提取列和行

> ID：13060477
> 
> 赞同：1
> 
> 时间：2012-10-25T01:48:17.890
> 
> 标签：c#, asp.net, database, dataset, comparison

****如何比较 UnitsInStock 的数量与用户想要购买的数量？****

在这里，我对我的 SQL 数据库进行了查询，以获取放入 DataSet 的列列表。“where”子句是我当前正在浏览的项目，提取了有关该产品的所有当前信息。

**我尝试使用将数据取出到数据列中，然后我现在需要将其与 int、数量进行比较。**

```
 string selectionString =
        "SELECT Products.ProductID, " +
            "Products.ProductName, Categories.CategoryName, " +
            "Suppliers.CompanyName, Products.QuantityPerUnit," +
            "Products.UnitPrice, Products.UnitsInStock " +    
            "FROM Suppliers INNER JOIN (Categories  " +
            "INNER JOIN Products ON  " +
            "Categories.CategoryID = Products.CategoryID)  " +
            "ON Suppliers.SupplierID = Products.SupplierID " +
            "WHERE Products.ProductID = " +
            int.Parse(Session["Current Item"].ToString());

DataSet ds = new DataSet();//this is the dataset that keeps my columns and rows. 
```

然后我有一个循环将除最后一个列 UnitsInStock 之外的所有列分配给文本框。**我需要使用的值是一个 int，数量。**

根据用户打开的项目，每个项目的库存会有所不同。所以我打开的项目，我想知道如何将用户决定的可变数量与我从数据集中提取的数量进行比较。

UnitsInStock 列的索引是**6**。不要担心 QuantityPerUnit，这没什么。

这是包含 ProductName、CatergoryName、CompanyName、QuantityPerUnit、UnitPrice 和*UnitsInStock*的代码，因此您可以了解如何使用数据集。

```
 if (ds.Tables[0].Columns.Count != 0 &&
        ds.Tables[0].Rows.Count != 0)
    {

        for (int index = 0; index < ds.Tables[0].Columns.Count - 1; index++)/// count -1, explain
        {
            labelArray[index].Text = ds.Tables[0].Columns[index].ColumnName;//named constant
            if (index == 5) // The price field
            {

                textBoxArray[index].Text = ((Decimal)ds.Tables[0].Rows[0][index]).ToString("F");
            }
            else
                textBoxArray[index].Text = ds.Tables[0].Rows[0][index].ToString(); 
```

那么，我如何将数据库检索到的数量与从文本框中收集的用户想要购买的数量进行比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:36:44.033

我想您想过滤用户给出的数量的行。以下代码仅选择那些包含 UnitsInStock 等于用户给出的数量的行。

我假设用户给出的数量存储在 txtQuantityGivenByUser 文本框中。

```
var selectedRows = ds.Tables[0].Select("UnitsInStock = " + txtQuantityGivenByUser.Text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T01:04:03.890

在现有代码中比较它们的最简单方法是循环中`if (index ==`的另一个语句：`for`

```
if (index == 6)
{
    int qtyUserWants = int.Parse(qtyUserWantsTextbox.Text);
    int qtyInStock = (int)ds.Tables[0].Rows[0][index];

    if (qtyUserWants >  qtyInStock)
    {
        // do something
    } 
```

# gnu-make - 如何在 GNUmake 中指定 obj 和 bin 目录

> ID：13060480
> 
> 赞同：1
> 
> 时间：2012-10-25T01:48:35.130
> 
> 标签：gnu-make

我有以下目录结构，

我也有这个可以正常工作的 make 文件，但它需要同一目录中的所有文件，并且它还在同一目录中创建 *.o 和 bin 文件。有人可以告诉我如何改进此代码，以便我可以将 *.h 文件移动到 /h，将 *.c 文件移动到 /src。另外 *.o 文件将在 /obj 中创建，二进制文件将在 /bin 中创建？

我在想这样的事情。这部分只创建 *.o 文件，没有二进制文件。但是，这现在给了我一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:20:25.313

**第1步：`h/`**

添加一个变量，对`%.o`规则做一个小的改动，然后添加一个`vpath`指令，这样`%.o`规则就会知道去哪里看：

```
INC_DIR = h
%.o: %.c
    $(cc) -I$(INC_DIR) -c $<

vpath %.h $(INC_DIR) 
```

**第2步：`src/`**

添加另一个变量，更改 的分配`objs`，添加另一个`vpath`：

```
SRC_DIR := src
objs:=$(patsubst $(SRC_DIR)/%.c,%.o,$(wildcard $(SRC_DIR)/*.c))

vpath %.c $(SRC_DIR) 
```

**第 3 步：`obj/`**

添加一个变量，再次更改`objs`和规则，规则：`%.o``clean`

```
OBJ_DIR = obj
objs:=$(patsubst $(SRC_DIR)/%.c,$(OBJ_DIR)/%.o,$(wildcard $(SRC_DIR)/*.c))

$(OBJ_DIR)/%.o: %.c
    $(cc) -Ih -c $< -o $@

clean:
    rm -f *.d $(OBJ_DIR)/*.o $(prog) 
```

**第4步：`bin/`**

添加另一个变量，并更改 的赋值`prog`：

```
BIN_DIR := bin
prog:=$(BIN_DIR)/$(notdir $(PWD)) 
```

**编辑：**

**你现在要求的是一个糟糕的设计。**但这里是：

对象/生成文件：

```
SRC_DIR := ../src
objs:=$(patsubst $(SRC_DIR)/%.c,%.o,$(wildcard $(SRC_DIR)/*.c))

cc:=gcc

.PHONY: ALL_OBJS
ALL_OBJS: $(objs)

INC_DIR := ../h
%.o: %.c
    $(cc) -I$(INC_DIR) -c $<

vpath %.c $(SRC_DIR)

.PHONY: clean test

clean:
    rm -f *.[od]

-include *.d 
```

箱/制作文件：

```
P:= $(PWD)
P:= $(dir $(P))
prog:= $(notdir $(P:/=))

OBJ_DIR := ../obj
objs:=$(notdir $(wildcard $(OBJ_DIR)/*.o))

cc:=gcc
ccflags:=-lcurses -lgdbm -lgdbm_compat

$(prog): $(objs)
    $(cc) $(ccflags) -o $@ $^

vpath %.o $(OBJ_DIR)

.PHONY: clean test

clean:
    rm -f *.d $(prog)

test: $(prog)
    $(test)

-include *.d 
```

# post - 覆盖信用卡的 CURLOPT_FOLLOWLOCATION

> ID：13060481
> 
> 赞同：0
> 
> 时间：2012-10-25T01:48:46.610
> 
> 标签：post, curl, php, credit-card

我在共享服务器上托管的网站存在问题，该服务器设置了“open_basedir”...因此信用系统会引发错误并且不会向买家的信用卡收费。

## 错误信息

警告：curl_setopt() [function.curl-setopt]: CURLOPT_FOLLOWLOCATION 在安全模式或 open_basedir 设置时无法激活

## 代码

```
function http_post($method, $server, $port, $url, $vars) {

$postdata = "";
foreach($vars as $key => $value) {
    $postdata .= urlencode($key) . "=" . urlencode($value) . "&";
}

$postdata = substr($postdata,0,-1);
$content_length = strlen($postdata);

$headers = "POST $url HTTP/1.1\r\n".
    "Accept: */*\r\n".
    "Accept-Language: en-nz\r\n".
    "Content-Type: application/x-www-form-urlencoded\r\n".
    "Host: $server\r\n".
    "Connection: Keep-Alive\r\n".
    "Cache-Control: no-cache\r\n".
    "Content-Length: $content_length\r\n\r\n";

$ch = curl_init();
curl_setopt ($ch, CURLOPT_URL, $method . '://' . $server .":". $port . $url);
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($ch, CURLOPT_POST, 1);
curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata);

$ret = curl_exec($ch);
curl_close($ch);
return $ret;
} 
```

无论如何，在没有访问根 PHP.ini 并且必须切换主机的情况下，是否存在这种情况？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:03:49.887

没有办法覆盖 in 的值，`open_basedir`因为`php.ini`这会在某种程度上违背目的。另一种方法是编写自己的函数来执行`CURLOPT_FOLLOWLOCATION`与`open_basedir`未设置相同的功能。我使用了从[http://php.benscom.com/manual/en/function.curl-setopt.php#102121](http://php.benscom.com/manual/en/function.curl-setopt.php#102121)找到的此代码的变体，它循环您的请求并`Location:`在响应标头中进行正则表达式匹配，如下所示需要一个新的请求：

```
function curl_exec_follow(/*resource*/ $ch, /*int*/ &$maxredirect = null) { 
    $mr = $maxredirect === null ? 5 : intval($maxredirect); 
    if (ini_get('open_basedir') == '' && ini_get('safe_mode' == 'Off')) { 
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, $mr > 0); 
        curl_setopt($ch, CURLOPT_MAXREDIRS, $mr); 
    } else { 
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, false); 
        if ($mr > 0) { 
            $newurl = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL); 

            $rch = curl_copy_handle($ch); 
            curl_setopt($rch, CURLOPT_HEADER, true); 
            curl_setopt($rch, CURLOPT_NOBODY, true); 
            curl_setopt($rch, CURLOPT_FORBID_REUSE, false); 
            curl_setopt($rch, CURLOPT_RETURNTRANSFER, true); 
            do { 
                curl_setopt($rch, CURLOPT_URL, $newurl); 
                $header = curl_exec($rch); 
                if (curl_errno($rch)) { 
                    $code = 0; 
                } else { 
                    $code = curl_getinfo($rch, CURLINFO_HTTP_CODE); 
                    if ($code == 301 || $code == 302) { 
                        preg_match('/Location:(.*?)\n/', $header, $matches); 
                        $newurl = trim(array_pop($matches)); 
                    } else { 
                        $code = 0; 
                    } 
                } 
            } while ($code && --$mr); 
            curl_close($rch); 
            if (!$mr) { 
                if ($maxredirect === null) { 
                    trigger_error('Too many redirects. When following redirects, libcurl hit the maximum amount.', E_USER_WARNING); 
                } else { 
                    $maxredirect = 0; 
                } 
                return false; 
            } 
            curl_setopt($ch, CURLOPT_URL, $newurl); 
        } 
    } 
    return curl_exec($ch); 
} 
```

# php - 在 PHP 中使用简单测试的奇怪事情

> ID：13060495
> 
> 赞同：0
> 
> 时间：2012-10-25T01:50:25.067
> 
> 标签：php, simpletest

文件1：

```
<?php
require_once('simpletest/autorun.php');
require_once('simpletest/web_tester.php');

class TestOfRankings extends WebTestCase {
    function tesetWeAreTopOfGoogle() {
        $this->get('http://poll:8888/index.php/admin/unit_test');
        $this->assertText('this is good');
    }
}
?> 
```

文件2：

```
require_once('simpletest/autorun.php');
require_once('simpletest/web_tester.php');

class MakTest extends WebTestCase {
    function testOneAndOneMakesTwo() {
        $this->get('http://poll:8888/index.php/admin/unit_test');
        $this->assertText('this is good');
    }
} 
```

几乎相同的文件，为什么它们会给我不同的结果？

```
file1.php
OK
Test cases run: 0/2, Passes: 0, Failures: 0, Exceptions: 0

file2.php
OK
Test cases run: 1/2, Passes: 1, Failures: 0, Exceptions: 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T02:04:12.897

您的功能可能需要从测试开始。tesetWeAreTopOfGoogle 应该是 testWeAreTopOfGoogle 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T02:07:11.410

根据[SimpleTest 文档](http://simpletest.org/en/start-testing.html)：

> 当测试用例运行时，它将搜索以字符串“test”开头的任何方法并执行该方法。如果方法开始“测试”，那就是测试。

在`file1`函数名称中是`tesetWeAreTopOfGoogle`（这似乎是一个错字）。切换到`testWeAreTopOfGoogle`，你会是金色的。

# javascript - 在 Rails form_for 中自动添加数字

> ID：13060503
> 
> 赞同：2
> 
> 时间：2012-10-25T01:51:33.550
> 
> 标签：javascript, ruby-on-rails-3, forms

这是`form_for`我的 Rails 视图：

```
<div class="field">
  <%= f.label :num1 %><br />
  <%= f.text_field :num1 %>
  <%= f.label :num2 %><br />
  <%= f.text_field :num2 %>
  <%= f.label :sum %><br />
  <%= f.text_field :sum %>
</div> 
```

我想这样做，当用户在前两个字段中输入数字时，第三个字段会自动显示两个数字的总和，但用户可以手动更改第三个字段。我不确定我怎么能做到这一点，也许用一些 Javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:15:49.557

使用 jQuery 非常简单：

```
$('#num1').change(function() {
    var one = this.val();
    var two = $('#num2').val();
    $('#sum').val(one + two);
});
$('#num2').change(function() {
    var one = $('#num1').val();
    var two = this.val();
    $('#sum').val(one + two);
}); 
```

完毕。

# plugins - Facebook Like Box 不再显示面孔或信息流

> ID：13060506
> 
> 赞同：2
> 
> 时间：2012-10-25T01:52:05.300
> 
> 标签：plugins, facebook-social-plugins, facebook-likebox

我在 .net 网站中使用了 facebook 插件。最近他们已经停止显示流和面孔（标题显示正确）。

最大的指标是，如果我使用开发人员工具箱，流和面会显示——我的网页中的代码完全相同，但它们没有显示。他们曾经展示过——我不确定他们在什么时候坏了，所以我无法跟踪我的代码更改。

我的代码：（位于body标签下方）

```
 <script type="text/javascript">
                (function (d, s, id) {
                    var js, fjs = d.getElementsByTagName(s)[0];
                    if (d.getElementById(id)) return;
                    js = d.createElement(s); js.id = id;
                    js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
                    fjs.parentNode.insertBefore(js, fjs);
                } (document, 'script', 'facebook-jssdk'));
            </script> 
```

（放置在页面下方）

# c# - 如何将特定数据从 txt 文件读入数组

> ID：13060508
> 
> 赞同：0
> 
> 时间：2012-10-25T01:52:34.193
> 
> 标签：c#, regex

我正在学习C#。

现在我有一个如下的文本文件（它有数千行）：

```
 BL51 BANKED LINKER/LOCATER V6.11    10/09/2012  14:39:46  PAGE 1
    ...
    * * * * * * *   C O D E   B A N K   0   * * * * * * *
    BANK0   4000H     09A5H     UNIT         ?CO?MAIN 
    BANK0   49A5H     0289H     UNIT         ?CO?EEPROM
    BANK0   539EH     007DH     UNIT         ?PR?CSCALERPOWERSAVINGRESET?SCALER
    BANK0   541BH     00BFH     UNIT         ?PR?CSCALERRESET?SCALER
    BANK0   54DAH     06BCH     UNIT         ?PR?MODE
    ... 
```

我想在字符串“* * * * * * * CODEBANK 0 * * * * * * *”之后读取以“BANK0”开头的行，并将0x4000作为整数放入array1 [0]，将0x09A5放入array2 [0]，0x49A5进入array1 [1]，0x0289进入array2 [1]等等。

任何人都可以帮助我吗？

提前感谢您的帮助！:-)

感谢 Aaron Anodide，我完成了如下代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Diagnostics;
using System.Collections;
using System.Globalization;

namespace _2012_10_24_M51_file_read_into_array_test
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    OpenFileDialog OpenFileDig = new OpenFileDialog();

    private void button1_Click(object sender, EventArgs e)
    {
        OpenFileDig.Filter = "M51 files(*.m51)|*.m51";

        if (OpenFileDig.ShowDialog() == DialogResult.OK)
        {
            M51TextBox.Text = OpenFileDig.FileName;
        }
        else
        {
            return;
        }
    }

    // c sharp read text file into array
    /* Nomral C function */
    ArrayList M51Bank = new ArrayList();
    ArrayList M51Offset = new ArrayList();
    ArrayList M51Length = new ArrayList();

    ArrayList M51FunName = new ArrayList();
    ArrayList M51CFile = new ArrayList();

    /* C common code */
    ArrayList M51ComBank = new ArrayList();
    ArrayList M51ComOffset = new ArrayList();
    ArrayList M51ComLength = new ArrayList();

    ArrayList M51ComFunName = new ArrayList();

    static int arrayIdx1 = 0;
    static int arrayIdx2 = 0;

    private void button2_Click(object sender, EventArgs e)
    {            
        bool BankStart = false;

        string path = @"D:\xxxx.m51";
        string[] ReadText = File.ReadAllLines(path);            

        for (int idx = 0; idx < ReadText.Length; idx++)
        {
            if (ReadText[idx].Contains("*   C O D E   B A N K   0   *"))
            { 
                // found it do 
                BankStart = true;
            }

            if (ReadText[idx].Contains("OVERLAY MAP OF MODULE:"))
            {
                // found it do 
                BankStart = false;
            }

            if (BankStart == true)
            {
                if ((ReadText[idx].Contains("BANK0")
                        || ReadText[idx].Contains("BANK1")
                        || ReadText[idx].Contains("BANK2")
                        || ReadText[idx].Contains("BANK3")
                        || ReadText[idx].Contains("BANK4")
                        || ReadText[idx].Contains("BANK5")
                        || ReadText[idx].Contains("BANK6")
                        || ReadText[idx].Contains("BANK7")
                        || ReadText[idx].Contains("BANK8")
                        || ReadText[idx].Contains("BANK9")
                        || ReadText[idx].Contains("BANK10")
                        || ReadText[idx].Contains("BANK11")
                        || ReadText[idx].Contains("BANK12")
                        || ReadText[idx].Contains("BANK13")
                        || ReadText[idx].Contains("BANK14")
                        || ReadText[idx].Contains("BANK15"))
                    && (ReadText[idx].Contains("?CO?") != true))
                {
                    BANKProc(ReadText[idx]);
                }                        
            }               
        }

        /* */
        int[] m51bank = (int[])M51Bank.ToArray(typeof(int));
        int[] m51Offset = (int[])M51Offset.ToArray(typeof(int));
        int[] m51Length = (int[])M51Length.ToArray(typeof(int));
        string[] m51FunName = (string[])M51FunName.ToArray(typeof(string));
        string[] m51CFile = (string[])M51CFile.ToArray(typeof(string));

        for (int i = 0; i < M51Bank.Count; i++)
        {
            textBox1.Text += (int)m51bank[i] + " ";

            richTextBox1.Text += m51bank[i].ToString("X2");
            richTextBox1.Text += m51Offset[i].ToString("X2") + "\t";
            richTextBox1.Text += m51Length[i].ToString("X2") + "\t";
            richTextBox1.Text += m51FunName[i] + "\t";
            richTextBox1.Text += m51CFile[i] + "\r\n";
        }                                       
    }

    private void BANKProc(string p)
    {            
        string[] NumberSplit = p.Split(new char[]{' ', '\t', 'H','K'},StringSplitOptions.RemoveEmptyEntries);

        string[] NameSplit = p.Split(new char[]{'?'},StringSplitOptions.RemoveEmptyEntries);

        if (NameSplit.Length == 4)
        {
            M51Bank.Add(int.Parse(NumberSplit[1], NumberStyles.HexNumber));
            M51Offset.Add(int.Parse(NumberSplit[2], NumberStyles.HexNumber));
            M51Length.Add(int.Parse(NumberSplit[3], NumberStyles.HexNumber));

            M51FunName.Add(NameSplit[2]);
            M51CFile.Add(NameSplit[3]);

            arrayIdx1++;
        }
        else if (NameSplit.Length == 3)
        {
            M51ComBank.Add(int.Parse(NumberSplit[1], NumberStyles.HexNumber));
            M51ComOffset.Add(int.Parse(NumberSplit[2], NumberStyles.HexNumber));
            M51ComLength.Add(int.Parse(NumberSplit[3], NumberStyles.HexNumber));

            M51ComFunName.Add(NameSplit[2]);

            arrayIdx2++;
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T01:57:11.940

使用[File.ReadAllLines](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx) & [Split](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)

```
string path = @"c:\temp\MyTest.txt";
string[] readText = File.ReadAllLines(path);
foreach (string s in readText)
{
    string [] split = s.Split(new Char [] {'\t' });
    Console.WriteLine(split[0]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T02:33:28.993

我为你做了一些提示，假设你不希望有人为你做这项工作。如果您认为这可能对您有所帮助，请随时提出有关此问题的问题。

> 我想阅读以“BANK0”开头的行

*   "the line" 提示您要一次处理一行文本
    *   看看 File.ReadAllLines()
*   "start with BANK0" 提示您要使用条件逻辑和字符串比较

> 在字符串“* * * * * * * CODEBANK 0 * * * * * * *”之后

*   这是您的程序将具有状态的提示
    *   state1：​​尚未遇到CODEBANK行
    *   state2：遇到CODEBANK线

> 并将0x4000作为整数放入array1 [0]，将0x09A5放入array2 [0]，将0x49A5放入array1 [1]，将0x0289放入array2 [1]，依此类推。

*   您需要对每一行文本进行进一步处理，以便从中提取单个字段值
    *   看看 String.Split()
*   您需要将十六进制数字的字符串表示形式转换为实际值（值的类型将由array1和array2的类型给出）
    *   看看 int.Parse()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T02:11:38.230

使用 File.ReadAllLines() 和 String.StartWith() 和 String.Split() 方法：

```
foreach(string line in File.ReadAllLines())
{
   if(line.StartsWith("BANK0")
   {
       string[] words = line.Split("   "); // now these words can be put into their respective arrays
   }
} 
```

# javascript - 如何根据小数点后三位四舍五入

> ID：13060512
> 
> 赞同：1
> 
> 时间：2012-10-25T01:53:12.757
> 
> 标签：javascript

**问题**

我想根据第 3 位小数将一个数字四舍五入到最小的数字。

举个例子

如果数字是`6.1064`我想输出`6.10`而不是`6.11` 如果数字是`5.9407`我想输出`5.94`

**现在的情况**

我目前使用`Math.round`，但它不是我所追求的`6.1064`。`6.11`

我该怎么做这是Javascript？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T01:55:37.300

您可以使用[`Math.floor()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/floor).

```
Math.floor(1.9)
1 
```

但是如果你想到第 100 位，乘以 100，下限，除以 100。

```
var num = 6.1064;
Math.floor((num*100))/100;
6.1 
```

要使其显示 6.10 而不是 6.1，请使用[`toFixed()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)：

```
var num = 6.1064;
var floor = Math.floor((num*100))/100;
floor.toFixed(2)
"6.10" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T01:58:00.353

```
(Math.floor(6.1065 *100)/100).toFixed(2) 
```

# python - 在 Linux red hat 4.4 上安装 ipython 0.10.0 的错误

> ID：13060516
> 
> 赞同：0
> 
> 时间：2012-10-25T01:54:40.417
> 
> 标签：python, linux, wxpython, ipython

我正在尝试在 Linux Red Hat 4.4.4-17 上安装 ipython 0.10.0。

我使用以下说明：http: [//ipython.org/ipython-doc/stable/install/install.html](http://ipython.org/ipython-doc/stable/install/install.html)

```
$ tar -xzf ipython.tar.gz
$ cd ipython
$ python setup.py install 
```

但是，我得到了：

```
import pkg_resources
    Zope.Interface: yes
           Twisted: Not found (required for parallel computing
                    capabilities)
          Foolscap: Not found (required for parallel computing
                    capabilities)
           OpenSSL: 0.10
            sphinx: Not found (required for building documentation)
          pygments: Not found (required for syntax highlighting
                    documentation)
              nose: Not found (required for running the test suite)
           pexpect: no (required for running standalone doctests)

running install
running build
running build_py
running build_scripts
running install_lib
running install_scripts

changing mode of /home/user/usr/bin/ipengine to 755
changing mode of /home/user/usr/bin/ipcontroller to 755
changing mode of /home/user/usr/bin/ipcluster to 755
changing mode of /home/user/usr/bin/ipython to 755
changing mode of /home/user/usr/bin/ipythonx to 755
changing mode of /home/user/usr/bin/ipython-wx to 755
changing mode of /home/user/usr/bin/pycolor to 755
changing mode of /home/user/usr/bin/irunner to 755
changing mode of /home/user/usr/bin/iptest to 755

running install_data
running install_egg_info

Removing /home/user/usr/lib/python2.6/site-packages/ipython-0.10.1-py2.6.egg-info
Writing /home/user/usr/lib/python2.6/site-packages/ipython-0.10.1-py2.6.egg-info 
```

我使用easy_install 安装了nose、sphinx、pexpect、pygments。

为什么我仍然有这个错误？

而且，另一个错误：

```
$ ipython
Traceback (most recent call last):
  File "/home/user/usr/bin/ipython", line 26, in <module>
    import IPython.Shell
ImportError: No module named Shell 
```

谢谢

# sql-server - 获取复杂 NHibernate 查询的前 X 个结果（QueryOver 语法）

> ID：13060517
> 
> 赞同：1
> 
> 时间：2012-10-25T01:54:47.967
> 
> 标签：sql-server, nhibernate, queryover

我正在使用一个 Nhibernate 查询，我必须在其中执行一些复杂的查询连接别名来急切地加载我的根实体的子实体。加载时，我想过滤一些属性返回的根实体结果，包括一些在子级上的。

我已经使用连接别名让这一切正常工作，但**我很难过的是过滤返回到根实体的顶部“X”实例的结果，当由根实体 Id 以外的属性排序时**。由于我在抓孩子，因此 SQL 返回了许多重复的行。如果我尝试使用 .Take 过滤结果的数量，则在 NHibernate 将结果集折叠到不同的根实体之前执行 take。供参考，这是我的域模型。

```
public class Project{
    public int Id {get;set;}
    public double Value {get;set;}
    public IList<ProjectRole> Team {get;set;}

}

public class ProjectRole{
   public User User {get;set;}
   public Role Role {get;set;}
}

public class User{
   public string LoginName {get;set;}
} 
```

因此，我试图获取具有给定登录名的用户在项目团队中的所有项目。然后我想按项目的价值排序。我想尽可能有效地做到这一点，而无需选择 n+1 等。

**这个社区有什么推荐？**

附加信息：作为权宜之计，我目前正在返回所有结果，然后在内存中取前 X，但我不希望这是永久的，因为查询可以返回接近 10,0000 个项目，而我只想进入前7名左右。如果我写的是直接的 SQL，我会做这样的事情。

```
SELECT *
FROM Projects as p1
INNER JOIN (
    SELECT distinct TOP (7)  
        topProjects.PGISourceItem_id as topsId, 
        topProjects.Value as topsValue
    FROM Projects topProjects            
        left outer join ProjectRoles roles on topProjects.Id=roles.Project_id 
        left outer join PGUsers users on roles.User_id=users.Id             
    WHERE 
        (users.LoginName like 'DEV\APPROVER' or this_0_1_.IsPrivate = 0)
    ORDER BY topProjects.Value desc
) as p2 on p1.Id = p2.topsId 
```

但我不知道如何用 NHibernate 做到这一点。我可以创建的唯一子查询是 WHERE EXISTS 或 WHERE IN。而且由于我正在执行 ORDER BY Value 我不能使用 WHERE IN 因为我的选择返回多个属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:36:45.647

如果用户的项目少于 1k，这可能会起作用

```
var subquery = QueryOver.Of<User>()
    .Where(...)
    .JoinAlias(x => x.Projects, () => proj)
    .Select(Projections.Distinct(Projections.Property(() => proj.Id)));

session.QueryOver<Foo>()
    .WithSubquery.WhereProperty(x => x.Id).In(subquery)
    .Fetch(p => p.Collection)
    .OrderBy(x => x.Value)
    .Take(5)
    .List(); 
```

# asp.net-mvc - 在实体框架中添加实体插入空记录

> ID：13060518
> 
> 赞同：0
> 
> 时间：2012-10-25T01:55:01.947
> 
> 标签：asp.net-mvc, entity-framework

我正在尝试在 EF 中插入一个新实体：

```
public class Ad
{
    // Primary properties
    public int Kms { get; set; }

    // Navigation properties
    public virtual Model Model { get; set; }
} 
```

我从 View 中收到这样的模型（示例值）：

kms = 222 型号.Id = 3

然后，当我执行实体框架的 Add 和 SaveChanges 时，我会在模型表中插入一条 NULL 记录（生成一个新 ID），并在广告表中使用新插入的模型 ID 记录。

为什么会这样？

服务层：

```
 public void CreateAd(CreateAdDto adDto)
    {
        var adDomain = Mapper.Map<CreateAdDto, Ad>(adDto);

        _adRepository.Add(adDomain);
        _adRepository.Save();
    } 
```

存储库：

```
 public void Add(T entity)
    {
        _dbSet.Add(entity);
    }

   public void Save()
    {
        try
        {
            _dataContext.SaveChanges();
        }
        catch (DbEntityValidationException e)
        {
            var s = e.EntityValidationErrors.ToList();
            throw;
        }
    } 
```

视图模型：

```
public class CreateAdViewModel
{
    // Primary properties
    public string Version { get; set; }
    public int Kms { get; set; }
    public int Year { get; set; }
    public decimal Price { get; set; }

    public int Make_Id { get; set; }
    public int Model_Id { get; set; }

    // Navigation properties
    public IEnumerable<SelectListItem> MakeList { get; set; }
    public IEnumerable<SelectListItem> ModelList { get; set; }
} 
```

Dto:

```
public class CreateAdDto
{
    // Primary properties
    public int Kms { get; set; }
    public int Model_Id { get; set; }
} 
```

映射：

```
 Mapper.CreateMap<CreateAdDto, Ad>().ForMember(dest => dest.Model, opt => opt.MapFrom(src => new Model { Id = src.Model_Id })); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:56:17.253

如果您只是`Add`在实例上调用该方法`Ad`，则所有相关实体都将被视为新实体。因此，您可以`Model`先附加实例并添加`Ad`.

```
context.Models.Attach(ad.Model);
context.Ads.Add(ad);
context.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:14:14.097

基于@Eranga答案的解决方案（谢谢！）

希望这可以帮助其他人，因为它可以帮助我感谢@Eranga。

发生的事情是，在从 DTO 到 DOMAIN 的映射中，模型实体从视图中的下拉列表中的 Model_Id 映射到实体模型（正如您在问题的映射行中看到的那样）。

然后，当它通过实体框架添加到数据库时，EF 并不知道广告域实体中存在模型导航属性。

因此，为了解决这个问题，我必须创建一个新方法来向我的存储库添加一个新方法，以处理将模型实体附加到广告实体上下文的可能性：

```
public void Attach(T entity)
{
    _dbSet.Attach(entity);
} 
```

并在 Ad Service Create 方法中添加附件：

```
 private readonly IRepository<Ad> _adRepository;
    private readonly IRepository<Search> _searchRepository;
    private readonly IRepository<Model> _modelRepository;

    public AdService(IRepository<Ad> adRepository, IRepository<Search> searchRepository, IRepository<Model> modelRepository)
    {
        _adRepository = adRepository;
        _searchRepository = searchRepository;
        _modelRepository = modelRepository;
    }

    public void CreateAd(CreateAdDto adDto)
    {
        var adDomain = Mapper.Map<CreateAdDto, Ad>(adDto);

        _modelRepository.Attach(adDomain.Model);

        _adRepository.Add(adDomain);
        _adRepository.Save();
    } 
```

所以现在，当 adDomain 对象通过 _adRepository.Add 到达 EF 时，它已经知道导航属性 Model 的存在，并且可以添加新的 adDomain ojbect。

之前，发生的事情是，当 adDomain 对象到达 EF 时，EF 不知道 Model 的存在，因此它正在创建一个空记录。

希望这对其他人有帮助。

问候。

# wordpress - 图库插件的简码

> ID：13060524
> 
> 赞同：0
> 
> 时间：2012-10-25T01:55:46.387
> 
> 标签：wordpress

我目前正在使用 Wordpress Gallery 插件，它工作正常，但我想在一页上列出所有已创建的画廊。

Gallery Plugin Shortcodes 工作正常，这里是一个例子：`[print_gllr id=43 display=short]`

我可以使用以下方法显示该简码：`<?php echo do_shortcode('[print_gllr id=43 display=short]'); ?>`

但是，没有办法用 display=short 显示 print_gllr 的所有简码吗？

非常感谢Advace。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T00:51:22.777

这里是：

```
<?php 
    $args = array( 'post_type' => 'gallery' );
    $loop = new WP_Query( $args );
    while ( $loop->have_posts() ) : $loop->the_post();
?>
   <?php echo do_shortcode('[print_gllr id='.get_the_ID().' display=short]'); ?>
<?php endwhile; ?> 
```

它将创建一个包含所有画廊封面的循环，因此您可以在页面中使用它来显示全部。

# asp.net-mvc-3 - 获取为 MVC 编写的 HttpRequest 扩展方法以在 Web Api 中工作

> ID：13060530
> 
> 赞同：1
> 
> 时间：2012-10-25T01:56:10.963
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, asp.net-web-api, httprequest

我正在使用用于 MVC 的 OAuth 2.0，一个用于 Oauth2 的 .NET 库。但是，我正在构建一个 Web Api 项目，并希望让这个库与 Web Api 一起使用。

我遇到的问题是该库在从控制器调用的 HttpRequestBase 上使用了两个扩展方法。

以下是扩展方法：

```
public static string GetToken(this HttpRequest request)
    {
        var wrapper = new HttpRequestWrapper(request);
        return GetToken(wrapper);
    }

    public static string GetToken(this HttpRequestBase request)
    {
        if (request == null)
            return String.Empty;

        // Find Header
        var headerText = request.Headers[OAuthConstants.AuthorzationHeader];
        if (!String.IsNullOrEmpty(headerText))
        {
            var header = new AuthorizationHeader(headerText);
            if (string.Equals(header.Scheme, "OAuth", StringComparison.OrdinalIgnoreCase))
                return header.ParameterText.Trim();
        }

        // Find Clean Param
        var token = request.Params[OAuthConstants.AuthorzationParam];
        return !String.IsNullOrEmpty(token)
            ? token.Trim()
            : String.Empty;
    } 
```

在 MVC 项目中，他们只需从控制器调用 Request.GetToken()。当然，Web Api 的请求是一个 HttpRequestMessage。恐怕现在解决 HttpRequest 和 HttpRequest 消息之间的区别超出了我的能力范围。

我可以将此扩展方法转换为与 HttpRequestMessage 一起使用或以某种方式使其在 Web Api 中工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:41:25.080

您以前拥有的所有属性仍然可用（假设 OAuthConstants.AuthorzationParam 已在查询字符串上设置？）

```
using System;
using System.Linq;
using System.Net.Http;

namespace YourApp
{
    public static class Extensions
    {
        public static string GetToken(this HttpRequestMessage request)
        {
           if (request == null)
               return String.Empty;

           // Find Header
           var headerText = request.Headers.GetValues(OAuthConstants.AuthorzationHeader).SingleOrDefault();
           if (!String.IsNullOrEmpty(headerText))
           {
               //Brevity...
           }

           // Find Clean Param
           var token = request.GetQueryNameValuePairs().SingleOrDefault(x => x.Key == OAuthConstants.AuthorzationParam).Value;
           return !String.IsNullOrEmpty(token)
               ? token.Trim()
               : String.Empty;
       }
   } 
```

}

**控制器**

```
using System.Collections.Generic;
using System.Web.Http;
using YourApp;

namespace YourApp.Controllers
{
    public class FoosController : ApiController
    {
        public IEnumerable<string> Get()
        {
            var token = Request.GetToken();

            return null;
        }
    }
} 
```

# wso2esb - WSO2 ESB 4.5.0 示例axis2服务器无法启动（samples.util.SampleAxis2Server）

> ID：13060531
> 
> 赞同：2
> 
> 时间：2012-10-25T01:56:18.280
> 
> 标签：wso2esb

WSO2 ESB 4.5.0 示例axis2服务器无法启动（samples.util.SampleAxis2Server）

```
D:\esb-4.5.0\samples\axis2Server>axis2server.bat
 "Starting Sample Axis2 Server ..."
 Using AXIS2_HOME:      D:\axis2
 Using JAVA_HOME:       C:\Program Files\Java\jdk1.6.0_33
 Server could not start due to class loading issue java.lang.ClassNotFoundException: samples.util.SampleAxis2Server 
```

感谢雪兰佩雷拉。示例axis2 服务器正在工作。

* * *

执行示例客户端后出现新异常。

客户：

```
ERROR {org.apache.sandesha2.SandeshaModule} -  Could not load module policies. Using default values. 
```

ESB：

```
Heap dump file created [1178627263 bytes in 45.317 secs]
WARN - TimeoutHandler Expiring message ID : urn:uuid: ee4eeea8-1dd0-4704-8914-074c6cee40ae;
dropping message after global timeout of : 120 seconds
Exception in thread "[Timer] - Periodical Task (Bundle 124) (Bundle 124)"
java.lang.OutOfMemoryError:Java heap space[2012-10-25 10:13:10,070] ERROR - NativeWorkerPool
Uncaught exception java.lang.OutOfMemoryError: Java heap space
ERROR - NativeWorkerPool Uncaught exception
java.lang.OutOfMemoryError: Java heap space
Exception in thread "NHTTPLatencyView-nio-http-latency-view" java.lang.OutOfMemo
Exception in thread "PoolCleaner[28471793:1351129604388]" java.lang.OutOfMemoryE
Exception in thread "http-sender-connections-view" java.lang.OutOfMemoryError: 
Exception in thread "NHTTPS2SLatencyView-nio-http-latency-view" java.lang.OutOfM
ERROR - CarbonDeploymentSchedulerTask Error while running deployment synchronizer
java.lang.OutOfMemoryError: Java heap space 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T02:07:46.363

您是否定义了 AXIS2_HOME 环境变量？如果是这样，请删除并尝试。你可以看到

```
Using AXIS2_HOME:      D:\axis2 
```

没有使用其他服务器。（我尝试在windows中启动服务器并成功启动。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-07T14:59:12.970

在 Linux 中，您可以这样做

转到主文件夹

按 Ctrl + h （显示隐藏文件）

打开 .bashrc 文件

如果定义了 $AXIS2_HOME 将其删除，然后添加

```
 export AXIS2_HOME=""
 export PATH=$PATH:$AXIS2_HOME 
```

即使您从 apt-get 下载了 Axis2，这也会删除

# sql - oracle 中可配置的自动提交

> ID：13060533
> 
> 赞同：2
> 
> 时间：2012-10-25T01:56:28.467
> 
> 标签：sql, oracle

oracle 中是否有用于自动提交的内置功能？就像如果我想更新一百万行，并且我想将自动提交设置为 1000 行或 2000 行，我必须在某个地方进行配置。
它将在每 1000 或 2000 行之后使用自动提交更新循环中的百万行。此功能在 sqlloader 中可用。我想知道 oracle 中是否也有类似的功能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T02:44:41.370

不可以。您不能要求 Oracle 以增量方式提交单个 SQL 语句正在执行的工作。这将违反 ACID 合规性的原子性部分，因此对于关系数据库来说，这将是一件非常糟糕的事情。这样做意味着如果数据库失败或语句在处理 N 行后失败，您将无法知道哪些 N 行已被处理。这样做意味着其他用户可能会看到部分完整的数据，从而导致他们的报告不正确，并且他们的查询可能会返回误导性结果。

当然，您可以编写自己的自定义逻辑来批量更新行。然而，这通常是一个坏主意。运行正在执行临时提交的进程将需要更长的时间，甚至可能更长的时间。它将需要编写代码以确保该过程是可重入的（也就是说，它可以在服务器故障的情况下从中断的地方继续，而无需尝试重​​新更新已经更新和提交的行或至少不要将数据更新为不同的值。这将导致更新在服务器`UNDO`上生成更多`REDO`。这将要求使用数据的每个进程都知道他们可能在处理过程中读取它`UPDATE`陈述。而且它增加了 ORA-01555 错误的风险。通常不需要临时提交——缺点是非常非常少值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T06:24:48.787

是的。您可以使用[DBMS_PARALLEL_EXECUTE](http://docs.oracle.com/cd/E11882_01/appdev.112/e23448/d_parallel_ex.htm)执行此操作。

该包显然是为了并行执行事物，但它也在每个“块”之后提交。您可以将 设置`chunk_size`为 1000 或 2000 行，并将 设置`parallel_level`为 0 以串行运行。

这是一个简单的例子：

```
create table table1(a number);
insert into table1 select level from dual connect by level <= 100000;
commit;

begin
    dbms_parallel_execute.create_task('update_table1');

    dbms_parallel_execute.create_chunks_by_rowid(
        task_name => 'update_table1',
        table_owner => user,
        table_name => 'TABLE1',
        by_row => true,
        chunk_size => 1000
    );

    dbms_parallel_execute.run_task(
        task_name => 'update_table1',
        sql_stmt => 'update table1 set a = 5 where rowid between :start_id and :end_id',
        language_flag => dbms_sql.native,
        parallel_level => 0);
end;
/ 
```

尝试中途终止查询或会话。您只能看到部分更改已提交，并且您可以使用 跟踪块状态`dba_parallel_execute_chunks`。

* * *

**但是**，我同意 Justin Cave 和 Wolf 的观点，即这个功能几乎总是一个坏主意。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-25T02:13:15.997

语法 AUTOCOMMIT { ON | OFF } 描述 打开或关闭连接的自动提交模式。JDBC 指定默认的自动提交模式为 ON。某些类型的处理需要关闭自动提交模式。有关自动提交的信息，请参阅 Java DB Developer's Guide。

如果在有未完成的事务时将自动提交模式从关闭更改为打开，则在当前事务提交时提交该工作，而不是在打开自动提交时提交。当有事务未完成时，在打开自动提交之前使用 Commit 或 Rollback，以便在返回自动提交模式之前完成所有先前的工作。

```
Example
ij> autocommit off;
ij> DROP TABLE menu;
0 rows inserted/updated/deleted 
ij> CREATE TABLE menu (course CHAR(10), item CHAR(20), price INT);
0 rows inserted/updated/deleted
ij> INSERT INTO menu VALUES ('entree', 'lamb chop', 14),
('dessert', 'creme brulee', 6), 
('appetizer', 'baby greens', 7); 
3 rows inserted/updated/deleted
ij> commit;
ij> autocommit on;
ij> 
```

# function - 将命令列表转换为函数

> ID：13060537
> 
> 赞同：1
> 
> 时间：2012-10-25T01:57:15.517
> 
> 标签：function, wolfram-mathematica

我做了这个

```
f[x_] := x - 2
x0 = 999.; imax = 5;
Module[{i, x}, x[0] = x0;
 For[i = 0, i < imax, x[i + 1] = x[i] - f[x[i]]/f'[x[i]];
  Print[x[i]];
  i++]] 
```

并试图把它变成一个牛顿拉普森函数。我需要能够输入函数 F[x]、初始猜测和 imax。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T02:18:31.033

多一点 Mathematica 风格：

```
newt[f_, x0_, imax_] := NestList[# - f@#/f'@# &, x0, imax];
f[x_] := x - 2
x0 = 999; imax = 5; 
newt[f, x0, imax]
(*
-> {999, 2, 2, 2, 2, 2}
*) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T02:03:07.607

Mathematica 就是这么简单：

```
newtonraph = Function[{f,x0,imax},Module[{i,x}, 
                       x[0] = x0;
                       For[i=0, i < imax, x[i+1] = x[i] - f[x[i]]/f'[x[i]];
                         Print[x[i]];
                         i++
                       ];
                      ];
                     ]; 
```

并调用函数：

```
func[t_] = 23 + t + 2*(t^2)
newtonraph[func,10,100] 
```

# php - Codeigniter 未定义的状态变量

> ID：13060538
> 
> 赞同：0
> 
> 时间：2012-10-25T01:57:19.963
> 
> 标签：php, codeigniter, controller

我有这样的登录表单

![在此处输入图像描述](../Images/bea5a329195a54ccf1d28696c7c403de.png)

登录到应用程序，它显示这样的菜单 ![在此处输入图像描述](../Images/d772d76e17084502313cef88f44e92e6.png)

它一直很好，直到我点击一些菜单，然后它显示 ![在此处输入图像描述](../Images/31973bd97d64328a6f2e35cbb2747e9c.png)

这是我单击的链接的控制器，我认为`keuangan`它已经在菜单上，但是为什么`keuangan`当我单击菜单的某些链接时没有出现？

```
 function index()
{
    $data['title'] = 'QB Cash Advance Settlement';
    $this->load->view('menu',$data);
    $this->load->view('v/vcas');
} 
```

这是`c_menu`控制器

```
function index()
{
    $data['title'] = "QB Dashboard";
    $data['jabatan'] = "Keuangan";
    $this->load->view('menu',$data);
    $this->load->view('body');
} 
```

这是menu_view

```
<div id ="user">Selamat datang, <?php echo $jabatan; ?></div> 
```

登录控制器

```
function login()
{   
    $username = $this->input->post('username');
    $jabatan = $this->input->post('jabatan');
    $this->form_validation->set_rules('username','Username','alpha_numeric|trim|required|xss_clean');
    $this->form_validation->set_rules('password', 'Password', 'trim|required|xss_clean|callback_check_database');

     if($this->form_validation->run() == FALSE)
     {
         $this->load->view('login');
 }
  else
 {

         if($jabatan == 'keuangan')
         {
                 redirect('c_menu','refresh');
         }
         else if ($jabatan == 'hd')
         {
             echo $jabatan;
         }
         else
         {
             echo $jabatan;
         }
 } 
```

我需要`$data['title'] = 'keuangan'`在每个控制器/索引中声明吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:29:44.723

您绑定到视图中的数据将不会保留。所以当你第一次加载菜单时它就在那里，因为你在控制器中设置了它：

```
$data['jabatan'] = "Keuangan";
$this->load->view('menu',$data); 
```

但是，当您单击该链接时，它会转到另一个控制器。

```
$data['title'] = 'QB Cash Advance Settlement';
$this->load->view('menu',$data); 
```

`$data['jabatan']`在绑定到视图之前未在此控制器中设置，这`$data`就是它未定义的原因。

# struts2 - Struts 和 MySQL 中的搜索方法

> ID：13060540
> 
> 赞同：0
> 
> 时间：2012-10-25T01:57:48.543
> 
> 标签：struts2

嘿伙计们，我正在做的一个项目遇到了一些问题：/

我有这个代码

```
public class ListaAlumnoAction {

private List<Alumno> alumnos;

public String execute(){
    String camino="success";
    EntityManager em= Utilitario.getInstance().getEntityManager();
    Query query=em.createQuery("Select o From Alumno o");
    alumnos=query.getResultList();
    return camino;
}

public List<Alumno> getAlumnos() {
    return alumnos;
}

public void setAlumnos(List<Alumno> alumnos) {
    this.alumnos = alumnos;
}
} 
```

这种方法给了我一个学生名单。但在这种情况下，我只想要 1 个学生，例如通过代码或姓名和姓氏搜索。问题是我不知道为此目的使用哪种工具。

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:52:57.217

要通过指定的输入条件搜索学生，您需要将所需的输入从页面传递到操作类。并且需要修改查询，该查询将通过提及的姓名或姓氏或所需的输入来搜索学生记录。

例如，假设学生姓名是输入条件

从页面传递学生姓名：

```
 <s:form>
    ......          
    <s:textfield name="studentName" label="Student Name"></s:textfield>   
    <s:submit value="Search" name="submit" action="ListaAlumnoAction"/>
   ......
  </s:form> 
```

这里 studentName 将是搜索操作的输入，ListaAlumnoAction 是在单击 Search 按钮时触发的操作。

要在动作类中获取学生姓名：

```
 public class ListaAlumnoAction {

        private List<Alumno> alumnos;

 /* Please note both the text filed name in the page and attribute should be same "studentName" */
        private String studentName;   

      public String execute(){
        String camino="success";
        EntityManager em= Utilitario.getInstance().getEntityManager();
       // "name" variable will hold the studentName      
        String name = getStudentName();
       // Modify the query, by passing the name if it is not null
        Query query=em.createQuery("Select o From Alumno o");
        alumnos=query.getResultList();
        return camino;
    }

    public List<Alumno> getAlumnos() {
        return alumnos;
    }

    public void setAlumnos(List<Alumno> alumnos) {
        this.alumnos = alumnos;
    }

    // getter and setter for the studentName
    public String getStudentName(){
      return studentName;
     }
    public void setStudentName(String studentName){
      this.studentName = studentName;
     }     

    } 
```

# jsf - 在表单中获取 requestscoped bean 的页面参数

> ID：13060550
> 
> 赞同：0
> 
> 时间：2012-10-25T01:59:55.970
> 
> 标签：jsf, jsf-2

我有以下页面：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"        
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
    <title>Fire - Registration</title>
</h:head>

<h:body>

    <f:view>
        <f:event type="preRenderView" listener="#{confirmPasswordResetBean.bindSessionKey()}"/>
    </f:view>

    <p:growl id="growl" showDetail="true" life="5000" />

    <h:form>

        <p:panel header="Select your new password">

            <h:panelGrid columns="2" cellpadding="5">

                <p:outputLabel for="newPassword" value="Type your new password"/>
                <p:password id="newPassword" 
                            value="#{confirmPasswordResetBean.firstPassword}"
                            feedback="true"/>

                <p:outputLabel for="retypedPassword" value="Retype your password"/>
                <p:password id="retypedPassword" 
                            value="#{confirmPasswordResetBean.secondPassword}"/>

            </h:panelGrid>

            <p:commandButton id="confirmButton" 
                             value="reset" 
                             action="#{confirmPasswordResetBean.doResetPassword()}"
                             update=":growl"/>

        </p:panel>       

    </h:form>

</h:body> 
```

上面使用的backing bean是RequestScoped，页面本身带一个参数（sessionKey）……我想做的是： 1.将sessionKey绑定到backing bean中的一个变量。这很简单。2.在同一个bean中执行专用逻辑时使用sessionKey的绑定值，当客户端按下commandButton时。

问题是按下按钮会启动一个新请求，这会使当前 bean（具有绑定值）以及外部页面上下文无效......因此我失去了从任何一个 bean 获取 sessionKey 的所有方法或页面参数...我该如何解决这个问题？我对 Web 编程和 JSF 都比较陌生，所以如果这有一个明显的答案，请原谅我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T02:28:04.577

要么将 bean 放在视图范围内，这样它就可以在您与同一个视图交互时存在，或者将请求参数传递`<f:param>`给后续请求。

```
<p:commandButton ...>
    <f:param name="sessionKey" value="#{param.sessionKey}" />
</p:commandButton> 
```

顺便说一句，您宁愿习惯`<f:viewParam>`直接将请求参数绑定到 bean。

```
<f:metadata>
    <f:viewParam name="sessionKey" value="#{bean.sessionKey}" />
</f:metadata> 
```

### 也可以看看：

*   [<f:metadata>、<f:viewParam> 和 <f:viewAction> 可以用来做什么？](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for/6377957#6377957)

# apache - Apache mod_proxy 与 Redmine 在子 URI 上

> ID：13060551
> 
> 赞同：1
> 
> 时间：2012-10-25T02:00:09.200
> 
> 标签：apache, redmine, mod-proxy

我一定已经阅读了互联网上关于 Redmine 和 Apache 的每一篇文章，但我仍然无法让它工作！

我`http://server:3000`使用 Thin 完美地运行了 Redmine。我们在同一台服务器上有另一个 Apache 服务，它在不同的端口（8096）上托管我们的内部 Web 工具，所以我希望 Redmine 遵循相同的约定。

在 httpd.conf 中关于 Apache 的这方面，我添加了：

```
ProxyPass /redmine http://127.0.0.1:3000/
ProxyPassReverse /redmine http://127.0.0.1:3000/
ProxyPreserveHost on 
```

这似乎工作正常。如果您输入`http://server:8096/redmine`它会打开 Redmine 起始页面，但单击任何其他链接结果是**404**。

看起来它没有在站点的链接上附加 /redmine，因为单击“管理员”链接也需要我`http://server:8096/admin`而不是`http://server:8096/redmine/admin`

我还考虑将以下三个中的任何一个添加到**config/environment.rb**但似乎使用的信息存在冲突，而且它们似乎都没有：

```
ActionController::AbstractRequest.relative_url_root = "/redmine" 
ActionController::Base.relative_url_root = "/redmine" 
Redmine::Utils::relative_url_root = "/redmine" 
```

一如既往，非常感谢任何帮助！

编辑：：

我也在试用

```
ProxyPass /redmine http://server:3000
ProxyHTMLURLMap http://server:3000 /redmine
<Location /redmine>
    ProxyPassReverse http://server:3000
    SetOutputFilter proxy-html
    ProxyHTMLURLMap /               /redmine/
    ProxyHTMLURLMap /redmine/       /redmine
</Location> 
```

但似乎有相同的结果。有趣的是，如果我`http://localhost:8096/redmine`从本地服务器访问，所有链接似乎都可以工作并指向正确的页面，除了 CSS 和 JS 不工作。

如果远程手动输入任何链接，`http://server:8096/redmine/admin`那么我会使用 CSS 等获得正确的页面，这只是页面之间的链接不起作用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:22:53.370

伙计，我从未见过这样的 apache 代理更改上下文的工作设置：

```
ProxyPass /redmine http://127.0.0.1:3000/ 
```

这应该有效：

```
ProxyPass /redmine http://127.0.0.1:3000/redmine 
```

为此，您需要设置后端服务器（mongrel 或其他）以在子 uri 上工作。

我建议您改用 mod_passenger。这是设置 redmine 的最简单方法，它不涉及代理。以下是我的设置：

```
brunojcm@brunojcm-htpc:~$ cat /etc/apache2/sites-available/redmine 
<Directory /var/www/redmine>
    RailsBaseURI /redmine
    PassengerResolveSymlinksInDocumentRoot on
</Directory> 
```

`/var/www/redmine`您的公共 redmine 文件夹的链接在哪里。

```
brunojcm@brunojcm-htpc:~$ ll /var/www/redmine
lrwxrwxrwx 1 root root 27 Sep  4  2011 /var/www/redmine -> /opt/redmine/current/public/ 
```

您还需要安装 mod_passenger。我不记得具体怎么做，但我相信你需要`gem install passenger`在运行后`passenger-install-apache2-module`按照说明进行操作。

希望能帮助到你！

# ruby-on-rails - heroku cedar 交互式控制台轰炸

> ID：13060552
> 
> 赞同：1
> 
> 时间：2012-10-25T02:00:15.420
> 
> 标签：ruby-on-rails, heroku, console, cedar

背景：我有最新的 Heroku Toolbelt。我已经通过 Heroku toolbelt 进行了身份验证。我的应用程序在 Cedar 上。我在 Mac 上。我到处寻找解决方案....我

问题：这是我运行时得到的：“heroku run console --app [my-heroku-app-name]”

```
Running `console` attached to terminal... up, run.1
Usage:
  rails new APP_PATH [options]

Options:
  -r, [--ruby=PATH]              # Path to the Ruby binary of your choice
                                 # Default: /app/vendor/ruby-1.9.3/bin/ruby
  -b, [--builder=BUILDER]        # Path to a application builder (can be a filesystem path or URL)
  -m, [--template=TEMPLATE]      # Path to an application template (can be a filesystem path or URL)
      [--skip-gemfile]           # Don't create a Gemfile
      [--skip-bundle]            # Don't run bundle install
  -G, [--skip-git]               # Skip Git ignores and keeps
  -O, [--skip-active-record]     # Skip Active Record files
  -S, [--skip-sprockets]         # Skip Sprockets files
  -d, [--database=DATABASE]      # Preconfigure for selected database (options: mysql/oracle/postgresql/sqlite3/frontbase/ibm_db/sqlserver/jdbcmysql/jdbcsqlite3/jdbcpostgresql/jdbc)
                                 # Default: sqlite3
  -j, [--javascript=JAVASCRIPT]  # Preconfigure for selected JavaScript library
                                 # Default: jquery
  -J, [--skip-javascript]        # Skip JavaScript files
      [--dev]                    # Setup the application with Gemfile pointing to your Rails checkout
      [--edge]                   # Setup the application with Gemfile pointing to Rails repository
  -T, [--skip-test-unit]         # Skip Test::Unit files
      [--old-style-hash]         # Force using old style hash (:foo => 'bar') on Ruby >= 1.9

Runtime options:
  -f, [--force]    # Overwrite files that already exist
  -p, [--pretend]  # Run but do not make any changes
  -q, [--quiet]    # Suppress status output
  -s, [--skip]     # Skip files that already exist

Rails options:
  -h, [--help]     # Show this help message and quit
  -v, [--version]  # Show Rails version number and quit

Description:
    The 'rails new' command creates a new Rails application with a default
    directory structure and configuration at the path you specify.

    You can specify extra command-line arguments to be used every time
    'rails new' runs in the .railsrc configuration file in your home directory.

    Note that the arguments specified in the .railsrc file don't affect the
    defaults values shown above in this help message.

Example:
    rails new ~/Code/Ruby/weblog

    This generates a skeletal Rails installation in ~/Code/Ruby/weblog.
    See the README in the newly created application to get going. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T02:16:31.247

f-me 是对的：

解决方案：我有一个遗留的 .slugignore 文件，其中包括“脚本”......因此是非工作性。

# php - PHP 的 mktime() 函数是否依赖于时区？

> ID：13060559
> 
> 赞同：1
> 
> 时间：2012-10-25T02:01:52.147
> 
> 标签：php, kohana, mktime, kohana-3.2

我已经知道 mktime 返回自纪元（1970 年 1 月 1 日 00:00:00 GMT）以来的秒数，因此时间戳是基于 GMT 的。

我有一个用于学校集会的 PHP 网络应用程序，它是使用 Kohana 3.2 编写的。当安排展会时，我使用存储在展会“日期”字段中的 mktime 创建一个时间戳。在展会开始之前，如果您尝试查看展会，它会自动将您发送到展会的促销页面。如果您尝试查看促销页面并且展会已经开始，您将被发送到查看页面。所以你可以看到我正在做两次检查。

促销页面使用 PHP 将展会时间戳存储在隐藏字段中。使用该时间戳调用 javascript 倒计时例程，并开始倒计时展会日期和当前时间（转换为 EST）之间的剩余时间。计时器达到 0 意味着展会已经开始，页面被重定向到查看页面。

视图页面有一些代码设置来检查展会是否已经开始，它看起来像这样：

```
if( mktime() < $fair->date ) Request::current()->redirect('/fair/promo/' . $id); 
```

但是，当处理上述语句时，它会重定向回促销页面，其中计时器立即变为零并尝试将我发送回查看页面。大无限循环。

以下是我在促销页面上使用 javascript 获得时间的方法。

```
var st = srvTime();
var d = new Date(st);
var now = Math.round( d.getTime() / 1000);
now=now+3600; //adjust to EST 
```

所以问题又回到了 mktime()。根据 php.net，“参数可以按从右到左的顺序省略；因此省略的任何参数都将根据本地日期和时间设置为当前值。” 那么这是否意味着如果我在 CST 的服务器上调用 mktime()，自 epoch = CST time - Epoch 以来经过的秒数？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:11:30.000

参数可以按从右到左的顺序省略；因此省略的任何参数都将根据**本地日期和时间**设置为当前值。

# css - 如何用 twitter bootstrap 包装一个字形图标？

> ID：13060560
> 
> 赞同：0
> 
> 时间：2012-10-25T02:01:52.253
> 
> 标签：css, twitter-bootstrap, glyph, font-awesome

如何将字形图标和单词包装在一起，以使图标居中于单词上方或下方。例如：

```
 <div class="row">
   <div class="span4">
<div style="font-size: 60px;">
<i class="icon-camera-retro"></i> </p>
 <h1>Photography </h1>
</div>
</div>
<div class="span4">
 <div style="font-size: 60px;">
 <i class="icon-camera"></i> </p>
  <h1>Rentals</h1>
  <p></center></p>
  </div>
 </div>
 <div class="span4">
 <div style="font-size: 60px;">
 <i class="icon-star-empty"></i> </p>
 <h1>Dance Media</h1>
 <p></center></p>
   </div>​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:50:38.670

如果我正确理解您的问题，您需要放入`text-align: center;`包含文本和图标的 div。看看这个例子：http: [//jsfiddle.net/rahjU/11/](http://jsfiddle.net/rahjU/11/)

# ios - 什么是 og:url 元标记？

> ID：13060567
> 
> 赞同：1
> 
> 时间：2012-10-25T02:03:15.953
> 
> 标签：ios, facebook, facebook-opengraph, meta-tags

我正在构建一个应该为用户使用 openGraph 对象的 iOS 应用程序。正如我所看到的，我需要：

**1.**为这些对象中的每一个创建对象页面，其中包含 facebook 为您在 中创建的对象生成的所有元标记**`Get Code`**。

**2.**使用iOS app通过单页生成涉及这些对象的opengraph请求。IE。一个 PHP 文件，它使用您可能发送给它的参数，它会生成指向图像和一些标题等的链接......（我说的对吗？）

问题是第 2 步中的 PHP 文件应该是对象本身，而我的对象需要一个**`og:url`**被解释为 type:wesite 的对象，这是错误的，因为我的类型设置为我自己的自定义类型！或者它只是抛出一个错误，说 og:url 无效。

我可以看到 facebook 正在抓取我在 og:url 中提供的任何内容，所以基本上如果忽略所有元标记，为什么首先需要这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T02:59:59.890

基本上，要使用 Open Graph API 发布针对对象的操作，您似乎是正确的，需要有一个对象 URL，当访问该 URL 时，它会执行以下操作之一

1.  包含描述您创建的任何类型对象所需的完整元数据集，并将其提供给 Facebook 的爬虫
2.  包含 og:url 元标记、`<link ref="canonical`标记或 HTTP 301 重定向，指向执行 1) 的 URL

拥有一个接受输入参数并基于这些参数返回元数据的 PHP 脚本是一种常见的方法，最需要注意的是您的 og:url 标签与输入参数匹配，因此 Facebook 的爬虫不会向该 URL 而不是它最初要求的 URL

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T02:06:43.807

og:url 表示：Open Graph Uniform 资源定位器。

[https://developers.facebook.com/docs/opengraph/tutorial/](https://developers.facebook.com/docs/opengraph/tutorial/)

# eclipse - 在 Eclipse 中使用 GWT + Maven 项目

> ID：13060569
> 
> 赞同：4
> 
> 时间：2012-10-25T02:03:21.273
> 
> 标签：eclipse, gwt, maven

我在尝试创建一个可以在 Eclipse 中使用的简单 GWT + Maven 项目时遇到了很多问题。这就是我正在做的事情：

1.  创建一个新`gwt-maven-plugin`项目：

    ```
    mvn archetype:generate -q -DarchetypeGroupId=org.codehaus.mojo -DarchetypeArtifactId=gwt-maven-plugin -DarchetypeVersion=2.5.0-rc2 -DgroupId=myGroupId -DartifactId=myArtifactId -Dversion=1.0 -Dmodule=myModule
    ```

2.  在 Eclipse 中打开项目：File => Import... => Existing Maven Projects，然后选择我刚刚创建的项目。

但是，我收到这些错误：

```
在 Eclipse 中未找到处理 gwt-maven-plugin:2.5.0-rc2:generateAsync 的市场条目。有关详细信息，请参阅帮助。
在 Eclipse 中未找到处理 gwt-maven-plugin:2.5.0-rc2:i18n 的市场条目。有关详细信息，请参阅帮助。

```

我不明白这个错误信息。我[在 SO 上找到了一个相关问题](https://stackoverflow.com/a/7918273/393304)，但是将建议的片段添加到我的 pom.xml 似乎没有做任何事情。

任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:48:56.130

您应该告诉 m2e 忽略这些警告。一旦你执行了一个目标，async 和 i18n 目标就会自动执行，这只是一个典型的 maven / eclipse 不能一起玩的经典案例。

在项目的构建部分中附加 pluginManagement（在 plugins 元素之后）

```
 <plugins>
          your  maven plugins here
    </plugins>
        <pluginManagement>
            <plugins>
                <!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->
                <plugin>
                    <groupId>org.eclipse.m2e</groupId>
                    <artifactId>lifecycle-mapping</artifactId>
                    <version>1.0.0</version>
                    <configuration>
                        <lifecycleMappingMetadata>
                            <pluginExecutions>
                                <pluginExecution>
                                    <pluginExecutionFilter>
                                        <groupId>org.codehaus.mojo</groupId>
                                        <artifactId>
                                            gwt-maven-plugin
                                        </artifactId>
                                        <versionRange>
                                            [2.4.0,)
                                        </versionRange>
                                        <goals>
                                            <goal>i18n</goal>
                                            <goal>generateAsync</goal>
                                        </goals>
                                    </pluginExecutionFilter>
                                    <action>
                                        <ignore></ignore>
                                    </action>
                                </pluginExecution>
                            </pluginExecutions>
                        </lifecycleMappingMetadata>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement> 
```

**最后将文件夹 target/generated-sources/gwt 添加到构建路径**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T03:45:56.503

不要从命令行运行，而是安装 eclipse [m2e](http://eclipse.org/m2e/) (Maven Integration for Eclipse) 插件。这会让你的生活轻松很多。

**更新：检查这个[Maven GWT 2.0 和 Eclipse](https://stackoverflow.com/questions/1894003/maven-gwt-2-0-and-eclipse)**

# actionscript-3 - 语法错误：左括号前需要分号

> ID：13060574
> 
> 赞同：1
> 
> 时间：2012-10-25T02:04:04.310
> 
> 标签：actionscript-3, actionscript

我在顶层的第一帧有以下代码：

```
var level:Array = new Array();
var level[0] = new Object(); 
```

我收到以下错误：

```
Scene 1, Layer 'levels', Frame 1, Line 2
1086: Syntax error: expecting semicolon before leftbracket. 
```

我查看了许多示例，这些示例似乎在做与我正在做的事情相同的事情，并且我还尝试单独定义对象，然后将其添加到数组中，但出现相同的错误。我也搜索过答案，但我发现的所有问题都与这种情况略有不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T02:10:34.630

语法/语法产生

```
var level[0] = new Object(); 
```

是无效的。

**产生式需要一个简单的`var`标识符，而不是表达式¹。**解析器粗略地试图将产生式视为`var level;[0] = ..;`（但由于缺少分号而失败，并且无论如何都会失败，因为`[0] = ..;`它也是无效的产生式）。

尝试：

```
var level:Array = new Array();
level[0] = new Object(); // no "var" here so it is a valid grammar production 
```

或者，更简洁地说：

```
var level:Array = [{}];  // using Array and Object literal notations 
```

* * *

¹有关ANTLR 生产规则，请参见[AS3.g。](http://svn.badgers-in-foil.co.uk/metaas/trunk/src/main/antlr/org/asdt/core/internal/antlr/AS3.g)或者，对于 ECMAScript（AS 派生自它），请参阅[ES5-Annotated 的 12.2 变量语句，](http://es5.github.com/#x12.2)并注意它需要一个“标识符”，后跟一个可选的初始化程序 ( `=`) 或另一个声明 ( `,`) 或语句结束 ( `;`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T02:25:34.077

只有是

```
level[0] = {}; 
```

或者

```
level.push({}); 
```

# git - git子模块而不将元数据放在单独的git-dir中

> ID：13060577
> 
> 赞同：0
> 
> 时间：2012-10-25T02:04:36.913
> 
> 标签：git, git-submodules

我想对子模块元数据使用旧行为。我应该使用什么命令行？

1）克隆存储库--recursive

2) 添加新的子模块

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:19:59.597

如果我正确理解了这个问题，您希望将子模块存储库放在`.git`子模块工作树的目录中，因为它曾经被存储。没有办法做到这一点。如果您的 git 版本支持在父存储库中存储存储库信息的新方法，则该方法将始终用于新的子模块。

# xcode - 如何在不同的框架上制作 UITextField？

> ID：13060578
> 
> 赞同：0
> 
> 时间：2012-10-25T02:04:38.820
> 
> 标签：xcode, xcode4.3

我有一个要创建的 UITextField 数组。但 UITextField 保持在同一个框架上？这是我的代码。当您按下按钮时，它会创建一个新的 UITextField。

```
-(IBAction)textFieldcreating{

    textfieldform = [[NSMutableArray alloc] init];
    textField1 = [[UITextField alloc] initWithFrame:CGRectMake(10, 10, 100, 40)];
    textField1.borderStyle = UITextBorderStyleRoundedRect;
    textField1.font = [UIFont systemFontOfSize:15];
    textField1.placeholder = @"enter text";
    textField1.autocorrectionType = UITextAutocorrectionTypeNo;
    textField1.keyboardType = UIKeyboardTypeDefault;
    textField1.returnKeyType = UIReturnKeyDone;
    textField1.clearButtonMode = UITextFieldViewModeWhileEditing;
    textField1.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;    
    textField1.delegate = self;

    [textfieldform addObject:textField1];

    int counter;
    counter = 0;
    if(counter < [textfieldform count])
    {

            textField1.frame = CGRectMake(textField1.frame.origin.x+30, textField1.frame.origin.x+40, textField1.frame.size.width+40, textField1.frame.size.height+50);
            [self.view addSubview:textField1];

        counter++;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:26:38.817

您正在做的是创建一个新数组并保持所有 UITextView 的 xOrigin 和 yOrigin 相同！

做这样的事情。

在 .h 文件中，声明

```
@property (nonatomic, retain) NSMutableArray *textfieldform;
@property (nonatomic, readwrite) int yOrigin; 
```

在 .m 文件中，在`viewDidLoad`函数中，

```
self.textfieldform = [NSMutableArray arrayWithCapacity:0];
yOrigin = 0; 
```

现在，你的函数看起来像这样。

```
-(IBAction)textFieldcreating{

    //textfieldform = [[NSMutableArray alloc] init]; NO NEED OF THIS LINE NOW
    textField1 = [[UITextField alloc] initWithFrame:CGRectMake(10, yOrigin, 100, 40)];
    textField1.borderStyle = UITextBorderStyleRoundedRect;
    textField1.font = [UIFont systemFontOfSize:15];
    textField1.placeholder = @"enter text";
    textField1.autocorrectionType = UITextAutocorrectionTypeNo;
    textField1.keyboardType = UIKeyboardTypeDefault;
    textField1.returnKeyType = UIReturnKeyDone;
    textField1.clearButtonMode = UITextFieldViewModeWhileEditing;
    textField1.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;    
    textField1.delegate = self;

    [textfieldform addObject:textField1];

    yOrigin = yOrigin + 40 + 10; //old yorigin + btn height + y offset
} 
```

如果您也想更改 xOrigin，请使用 xOrigin 获取另一个变量

# session - 使用多个 uwsgi worker 和烧杯时的会话错误 session.typ 是内存

> ID：13060581
> 
> 赞同：0
> 
> 时间：2012-10-25T02:04:57.450
> 
> 标签：session, uwsgi

我正在运行一个金字塔网络应用程序，使用 velruse 进行 OAuth。如果单独运行应用程序，它会成功。
但如果使用 uwsgi multiple 运行并设置 session.type = memory。当从 oauth 回调时，request.session 将不包含必要的令牌信息。

# 生产.ini：

```
session.type = memory
session.data_dir = %(here)s/data/sessions/data
session.lock_dir = %(here)s/data/sessions/lock
session.key = mykey
session.secret = mysecret

[uwsgi]
socket = 127.0.0.1:6543
master = true
workers = 8
max-requests = 65536
debug = false
autoload = true
virtualenv = /home/myname/my_env
pidfile = ./uwsgi.pid
daemonize = ./mypyramid-uwsgi.log 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:34:48.450

如果您将内存用作会话存储，则只有写入会话数据的工作人员才能使用该信息。您应该使用另一个会话存储（可以由所有工作人员/进程共享）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:41:57.273

您的 uWSGI 配置不清楚（看起来它只包含套接字选项）。可以重新粘贴吗？

# java - org.springframework.beans.factory.BeanCreationException 创建名为“certificateOrderRepository”的bean时出错

> ID：13060582
> 
> 赞同：0
> 
> 时间：2012-10-25T02:05:01.720
> 
> 标签：java, spring

您好，我是 Spring 框架中的新手，我正在尝试使用 jUnit 进行测试。每当我运行测试时，我都会不断出现此错误。谁能帮帮我吗。

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'certificateOrderRepository': Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'systemConfigurationDto' defined in file [E:\confidential\Global_Sign\40_Make\royaljelly-pc\target\test-classes\test-applicationContext-bean.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'mtaDto.password' of bean class [com.globalsign.hb.dto.SystemConfigurationDto]: Nested property in path 'mtaDto.password' does not exist; nested exception is org.springframework.beans.NotReadablePropertyException: Invalid property 'mtaDto' of bean class [com.globalsign.hb.dto.SystemConfigurationDto]: Bean property 'mtaDto' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter?
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:300)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.test.AbstractSingleSpringContextTests.createApplicationContext(AbstractSingleSpringContextTests.java:216)
    at org.springframework.test.AbstractSingleSpringContextTests.loadContextLocations(AbstractSingleSpringContextTests.java:192)
    at org.springframework.test.AbstractSingleSpringContextTests.loadContext(AbstractSingleSpringContextTests.java:172)
    at org.springframework.test.AbstractSpringContextTests.getContext(AbstractSpringContextTests.java:133)
    at org.springframework.test.AbstractSingleSpringContextTests.setUp(AbstractSingleSpringContextTests.java:101)
    at junit.framework.TestCase.runBare(TestCase.java:132)
    at org.springframework.test.ConditionalTestCase.runBare(ConditionalTestCase.java:79)
    at junit.framework.TestResult$1.protect(TestResult.java:110)
    at junit.framework.TestResult.runProtected(TestResult.java:128)
    at junit.framework.TestResult.run(TestResult.java:113)
    at junit.framework.TestCase.run(TestCase.java:124)
    at junit.framework.TestSuite.runTest(TestSuite.java:232)
    at junit.framework.TestSuite.run(TestSuite.java:227)
    at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:81)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'systemConfigurationDto' defined in file [E:\confidential\Global_Sign\40_Make\royaljelly-pc\target\test-classes\test-applicationContext-bean.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'mtaDto.password' of bean class [com.globalsign.hb.dto.SystemConfigurationDto]: Nested property in path 'mtaDto.password' does not exist; nested exception is org.springframework.beans.NotReadablePropertyException: Invalid property 'mtaDto' of bean class [com.globalsign.hb.dto.SystemConfigurationDto]: Bean property 'mtaDto' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter?
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1361)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.autowireResource(CommonAnnotationBeanPostProcessor.java:435)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.getResource(CommonAnnotationBeanPostProcessor.java:409)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor$ResourceElement.getResourceToInject(CommonAnnotationBeanPostProcessor.java:541)
    at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:147)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:297)
    ... 30 more
Caused by: org.springframework.beans.NotWritablePropertyException: Invalid property 'mtaDto.password' of bean class [com.globalsign.hb.dto.SystemConfigurationDto]: Nested property in path 'mtaDto.password' does not exist; nested exception is org.springframework.beans.NotReadablePropertyException: Invalid property 'mtaDto' of bean class [com.globalsign.hb.dto.SystemConfigurationDto]: Bean property 'mtaDto' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter?
    at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:893)
    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:76)
    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:58)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1358)
    ... 43 more
Caused by: org.springframework.beans.NotReadablePropertyException: Invalid property 'mtaDto' of bean class [com.globalsign.hb.dto.SystemConfigurationDto]: Bean property 'mtaDto' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter?
    at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:707)
    at org.springframework.beans.BeanWrapperImpl.getNestedBeanWrapper(BeanWrapperImpl.java:555)
    at org.springframework.beans.BeanWrapperImpl.getBeanWrapperForPropertyPath(BeanWrapperImpl.java:532)
    at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:890)
    ... 46 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T23:54:21.343

```
 Invalid property 'mtaDto.password' of bean class [com.globalsign.hb.dto.SystemConfigurationDto]: Nested property in path 'mtaDto.password' does not exist; 
```

可能是在 jsp 等其他地方访问**密码字段。**没有实际代码很难回答。试一试，看看**密码**字段是否是原因..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:43:35.720

通常你会得到这个错误

```
Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException 
```

当您尚未定义 getter 和 setter 时。确保在引用类“systemConfigurationDto”中有 getter 和 setter。

# php - 如何使用函数 move_uploaded_file 创建一些目录？

> ID：13060583
> 
> 赞同：0
> 
> 时间：2012-10-25T02:05:05.750
> 
> 标签：php, file-upload, upload, image-uploading

我对如何设置我的环境才能正确使用此功能有一些疑问。

我真正需要的是这样的：

我正在为我的城市开发一个分类网站，每个用户都有自己的 id。当用户发布广告时，我必须将他上传的所有文件移至新（或非新）目录。

此目录的名称是用户 ID。

如果目录不存在，函数“move_uploaded_file”是否会创建目录？如果没有，我该怎么做？

例子：

```
//getUID() returns 5
//current directory: www/

move_uploaded_file('some_temp_file.ext','adimg/' . getUID() . '/new_file.ext'); 
```

是否要创建文件夹“5”并将临时文件移动到其中？

以及我需要如何配置我的文件夹（我正在 Windows 下对其进行测试）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T02:08:40.003

使用[php mkdir() 函数](http://php.net/manual/en/function.mkdir.php)。在`move_uploade_file()`用于创建要放置文件的目录（如果您通过 php 创建文件夹）之前。

如果您无法通过复选框编辑文件夹持久性，您可以通过 ftp 客户端进行设置。

![在此处输入图像描述](../Images/224a3b2f3672561c9f2749dbe14079b2.png)

# html - body 伪元素 100% 文档高度

> ID：13060601
> 
> 赞同：2
> 
> 时间：2012-10-25T02:07:47.727
> 
> 标签：html, css

我试图强制元素的伪元素始终为（不是窗口）`<body>`的 100% 高度。`Document`

*   `position`的*伪*元素***不能***设置为`FIXED`
*   这只是我遇到的问题的简化版本，因此解决方案必须仅是 CSS

**[演示页面](http://jsfiddle.net/rkYDv/1/)**

我搜索了**堆栈溢出**，但没有找到答案。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T02:15:08.217

尝试：

```
html {height: 100%;}
body {min-height:100%;} 
```

然后是您现有的代码：

```
body{ position:relative; }
p{ width:15%; padding:10px; }

body::before {
    background: red;
    content: "";
    height: 100%;
    width: 100%;  
    opacity: 0.2;
    pointer-events: none;
    position: absolute;
    top: 0;
    left: 0;
} 
```

​</p>

# python - 我正在尝试在 python 中创建字典

> ID：13060602
> 
> 赞同：0
> 
> 时间：2012-10-25T02:07:50.617
> 
> 标签：python, dictionary, list-comprehension

它需要一个包含 500 个投诉的文件，返回投诉的编号作为键，返回一个以汽车品牌、投诉日期、Crash True or False、City 和 State 为值的元组。

```
 ex)   mydict("Complaints.txt")[416]
      ('CHRYSLER', datetime.date(1995, 1, 9), False, 'ARCADIA', 'FL') 
```

到目前为止，我有：

```
 from collections import defaultdict
import datetime

def fieldict(filename):
    with open(filename) as f:
        x=[line.split('\t')[0].strip() for line in f] #list of complaint numbers
        y= line.split('\t') #list of full complaints
        d={}
        for j in x:
            Y= True
            N= False
            d[j] = tuple(y[2],datetime.date(y[7]), y[6], y[12], y[13])   #dict with number of complaint as key and tuple with index as values
        return d 
```

y 是将整个投诉分解为一个列表，其中删除了 \t 字符。如果有人能指出我正确的方向，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T02:44:10.707

您也可以稍微依赖 csv 模块（未经测试）：

```
import csv

def fieldict(filename):
    fullDict = {}
    with open(filename) as f:
        reader = csv.reader(f, delimiter='\t')
        for y in reader:
            fullDict[y[0].strip()] = (y[2],datetime.date(y[7]), y[6], y[12], y[13])
    return fullDict

if __name__ == "__main__":
    mydict = fieldict("Complaints.txt")
    print mydict[416] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T02:37:21.823

如果我对您的理解正确，我认为这就是您要寻找的。

```
import datetime

def fieldict(filename):
    returnDict = {}
    with open(filename) as f:
        for line in f:
            lineList = line.split('\t')
            index = lineList[0].strip()
            complaint = tuple(lineList[2],datetime.date(lineList[7]), lineList[6], lineList[12], lineList[13])

            returnDict[index] = complaint

    return returnDict

if __name__ == "__main__":
    mydict = fieldict("Complaints.txt")
    print mydict[416] 
```

# java - 透明JPanel 在另一个背景JPanel 之上？

> ID：13060603
> 
> 赞同：1
> 
> 时间：2012-10-25T02:08:05.887
> 
> 标签：java, swing, transparency

我试图在另一个 JPanel 的顶部显示一个 Jpanel，而底部面板处于非活动状态，而我可以在顶部面板上放置图像和绘制东西。我努力了

```
setOpaque(false); 
```

我试过了

```
Color transparent = new Color(0,0,0,0); 
```

我有一个绘制二维面板数组的 Board 类。然后我有一个 PlayerBoard 类，它绘制一个二维数组的面板，这也是一个图形的表示。我想要透明的 PlayerBoard 以便我可以将 Player 添加到 PlayerBoard 类而无需覆盖/编辑 Board 类。

这是 Board 类的代码：

```
package project;

import javax.swing.*;

import java.awt.*;

@SuppressWarnings("serial")
public class Board extends JPanel {

private JPanel boardPanel; 
private Grid[][] grid;
public Board(int x, int y){

    //Create a new Player

    //Create a Panel to hold the board
    boardPanel = new JPanel();
    boardPanel.setLayout(new GridLayout(x,y,2,2));

    //Create a grid to hold each panel square
    grid = new Grid[x][y];
    for(int row = 0; row < 6; row++){

        for(int column = 0; column < 6; column++){

            grid[row][column] = new Grid(x,y,true, Color.BLACK);

            if((row==5 && column==5) || (row==4 && column==4) || (row==4 && column==5) || (row==5 && column==4) || (row==1 && column==2) || (row==1 && column==3) || (row==0 && column==2) || (row==0 && column==3) || (row==4 && column==0) || (row==5 && column==0) || (row==5 && column==1) || (row==4 && column==1)){
                grid[row][column].changeColor(Color.YELLOW);
            }
            boardPanel.add(grid[row][column]);
        }
    }

    //add boardPanel to Board
    add(boardPanel);

}

} 
```

这是我的 PlayerBoard 课程

```
package project;

import java.awt.Color;
import java.awt.GridLayout;

import javax.swing.JPanel;

import org.jgrapht.UndirectedGraph;
import org.jgrapht.graph.DefaultEdge;
import org.jgrapht.graph.SimpleGraph;

@SuppressWarnings("serial")

public class PlayerBoard extends JPanel{

private JPanel boardPanel;
private Grid[][] board;
//private Player steve;

public PlayerBoard(int x, int y){

    UndirectedGraph<String, DefaultEdge> g = new SimpleGraph<String, DefaultEdge>(DefaultEdge.class);

    //Vertex of Graph
    String vertex = "";

    //Create a 2-d array of strings to hold the grid of the borad
    board = new Grid[x][y];

    //Create the boardPanel
    boardPanel = new JPanel();
    boardPanel.setLayout(new GridLayout(x,y,2,2));

    for(int i = 0; i < x; i++){

        for(int j = 0; j < y; j++){

            if(i==0){
                vertex = Integer.toString(j+1);
                board[i][j] = new Grid(i,j,true, new   Color(0,0,0,0));
                //board[i][j].changeColor(new Color(0,0,0,0));
                g.addVertex(vertex);
            }
            else{
                vertex = Integer.toString(((x*i)+(j+1)));
                board[i][j] = new Grid(i,j,true,new Color(0,0,0,0));
                //board[i][j].changeColor(new Color(0,0,0,0));
                g.addVertex(vertex);
            }

            boardPanel.add(board[i][j]);

        }
    }

    add(boardPanel);

    //Add the edges for the board graph
    g.addEdge("1", "2");
    g.addEdge("1", "7");
    g.addEdge("2", "8");
    g.addEdge("5", "11");
    g.addEdge("5", "6");
    g.addEdge("6", "12");

    g.addEdge("7", "13");
    g.addEdge("7", "8");
    g.addEdge("8", "14");
    g.addEdge("11", "17");
    g.addEdge("11", "12");
    g.addEdge("12", "18");

    g.addEdge("13", "14");
    g.addEdge("13", "19");
    g.addEdge("14", "20");
    g.addEdge("14", "15");
    g.addEdge("15", "21");
    g.addEdge("15", "16");
    g.addEdge("16", "17");
    g.addEdge("16", "22");
    g.addEdge("17", "23");
    g.addEdge("17", "18");
    g.addEdge("18", "24");

    g.addEdge("19", "20");
    g.addEdge("20", "21");
    g.addEdge("21", "22");
    g.addEdge("21", "27");
    g.addEdge("22", "28");
    g.addEdge("22", "23");
    g.addEdge("23", "24");

    g.addEdge("27", "28");
    g.addEdge("27", "33");
    g.addEdge("28", "34");

    /*
     * Print out the board
     */
    for(int i1 = 0; i1 < 6; i1++){

        for(int j = 0; j < 6; j++){

            System.out.print(board[i1][j]);
        }
        System.out.println();
    }

    System.out.println(g.toString());

    //steve = new Player("1", "bin/stuff/images/player.png");
    //add(steve);

    setOpaque(false);

}

public UndirectedGraph<String, DefaultEdge> getGraph(){

    return null;

}

} 
```

这是我的游戏类，我希望 PlayerBoard 位于 Board 类之上。这样我就可以在不破坏棋盘类的情况下将图像放在 PlayerBoard 类上

```
package project;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

import javax.swing.*;

@SuppressWarnings("serial")
public class Game extends JFrame implements MouseListener{

private PlayerBoard playerboard;
private Board board;
private Side side;
private JPanel boardPanel, playerPanel;

public Game(){

    Color transparent = new Color (0, 0, 0, 0); 

    //create a boardPanel
    boardPanel = new JPanel();
    boardPanel.setLayout(new BorderLayout());

    playerPanel = new JPanel();
    playerPanel.setLayout(new BorderLayout());

    //Create a board that is x,y
    board = new Board(6,6);

    playerboard = new PlayerBoard(6,6);
    playerboard.setOpaque(false);

    playerPanel.add(playerboard);
    playerPanel.setBackground(transparent);

    //Create a Side Panel
    side = new Side();

    //add the side and board to Game

    boardPanel.add(board, BorderLayout.CENTER);
    playerPanel.add(playerboard, BorderLayout.CENTER);
    playerPanel.setOpaque(false);

    getContentPane().setLayout(new BorderLayout());
    getContentPane().setBackground(Color.BLUE);
    getContentPane().add(side, BorderLayout.EAST);
    getContentPane().add(boardPanel,BorderLayout.CENTER);
    getContentPane().add(playerPanel, BorderLayout.CENTER);
    pack();

    //Important
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setResizable(true);
    setVisible(true);

}

} 
```

我在这里先向您的帮助表示感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T02:18:43.997

将顶部设置`JPanel`为底部的玻璃窗格，这应该覆盖整个底部：
`board.setGlassPane(playerBoard);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T03:00:54.610

这个问题还有更好的解决方案[——JXLayer](http://weblogs.java.net/blog/alexfromsun/archive/2008/06/the_new_jxlayer.html)。如果您使用 Java 7，它已经是 Swing 的一部分，称为[JLayer](http://docs.oracle.com/javase/7/docs/api/javax/swing/JLayer.html)

# python - Python范围，字典和变量的区别？

> ID：13060605
> 
> 赞同：6
> 
> 时间：2012-10-25T02:08:18.690
> 
> 标签：python, dictionary, scope

[Python范围](https://stackoverflow.com/questions/146359/python-scope) 我有同样的问题，但略有不同。

```
number = 0
def incrementNumber():
    number += 1 
```

上面的这个不起作用，但下面的这个不起作用，为什么？两者都在功能范围之外。

```
number = {'num':0}
def incrementNumber():
    number['num'] += 1 
```

如果我将变量添加为全局变量，第一个有效

```
number = 0
def incrementNumber():
    global number
    number += 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T02:12:56.207

查看此[博客文章](http://christophe.vandeplas.com/2011/06/python-global-variables.html)，它与您正在做的类似。特别是亚当的评论。

> 您不分配给dictionaryVar，而是分配给dictionaryVar['A']。所以它永远不会被分配，所以它是隐式的全局的。如果您要实际分配给 dictionaryVar，您会得到您“期望”的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T03:30:41.817

在第一种情况下`int`是不可变的，所以当你这样做时，你`number +=1`真的在​​更新 where`number`点。通常，您不希望更改在没有明确告知的情况下向上传播，python 会执行写时复制并为您提供局部变量编号。您比增加该变量并在函数返回时将其丢弃

对于可变的字典，您正在获取向上范围的引用，然后改变底层对象，因此您的添加会传播到函数之外。

在最后一种情况下，您已明确告诉 python*不要*将 number 设为局部变量，因此更改会根据需要传播出去。

相关[的python闭包局部变量](https://stackoverflow.com/questions/11142993/python-closure-local-variables)

# html - 大字体前的空白页

> ID：13060607
> 
> 赞同：0
> 
> 时间：2012-10-25T02:08:46.530
> 
> 标签：html, css, printing, page-break

我正在尝试打印大约 12 页长的 Google 图表。它在所有网络浏览器中都显示得很好（图表上方没有任何内容），但是当我打印文档时，它会在图表上方打印一两个空白页。

是否有 CSS 或 JS 或任何其他类型的修复？我的图表目前正在使用：

```
position: static;
left: 0;
top: 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T02:22:29.490

尽量不要使用任何位置静态。尝试使用相对位置。如果问题仍然存在，请告诉我们您使用的是哪种类型的图表？

尝试使用[https://support.google.com/drive/bin/answer.py?hl=en&answer=1047436](https://support.google.com/drive/bin/answer.py?hl=en&answer=1047436)

打印图表

要打印图表，您可以将其另存为图像或将电子表格下载为 PDF 文档。就是这样：

请按照以下步骤将图表另存为图像：

```
Click your chart to show the grey frame around it.
Click the chart menu in the upper left of the frame.
From the chart menu, select Save Image.
Open your saved image from your downloads folder. 
```

或者，您可以将电子表格下载为 PDF。这将包括您的图表以及电子表格中的数据。

```
From the File menu of your spreadsheet, select Download as > PDF.
Specify the customization options you'd like for your PDF, such as the selection you'd like to print and the layout of the page you print to.
Click Export, and a PDF file containing your spreadsheet will be downloaded. 
```

保存图像或将其下载为 PDF 后，您将能够在 PC 上使用 Ctrl + P 或在 Mac 上使用 Cmd + P 打印图表。

# meteor - Meteor 模板可以直接访问 Session 变量吗？

> ID：13060608
> 
> 赞同：26
> 
> 时间：2012-10-25T02:08:48.533
> 
> 标签：meteor, handlebars.js

在我的 Meteor 应用程序中，我发现自己写了很多东西，比如：

```
Templates.myTemplate1.isCurrentUser = function() {
  return Session.get("isCurrentUser");
};

Templates.myTemplate2.isCurrentUser = function() {
  return Session.get("isCurrentUser");
}; 
```

我需要许多不同的模板（我正在使用把手）来访问存储在 Session 中的相同简单值。

有没有办法避免一遍又一遍地编写相同的函数？谢谢

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-27T23:57:21.933

基于[@cioddi](https://stackoverflow.com/users/380942/cioddi)的答案，因为您可以将参数传递给 Handlebars 助手，您可以将其设为通用函数，以便您可以轻松地动态检索任何值，例如

```
Template.registerHelper('session',function(input){
    return Session.get(input);
}); 
```

然后您可以像这样在模板中调用它

```
{{session "isCurrentUser"}} 
```

请注意，[auth 包](https://github.com/meteor/meteor/wiki/Getting-Started-with-Auth)带有一个名为 CurrentUser 的全局帮助程序，您可以使用它来检测用户是否已登录：

```
{{#if currentUser}}
    ...
{{/if}} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-10-25T09:19:23.267

由于流星目前使用把手作为默认模板引擎，您可以为它定义一个帮助器，例如：

```
if (Meteor.isClient) {

Template.registerHelper('isCurrentUser',function(input){
  return Session.get("isCurrentUser");
});

} 
```

您可以在一个名为 helpers.js 的新文件中执行此操作，以保持 app.js 文件更干净。注册此助手后，您可以通过插入在任何模板中使用它`{{isCurrentUser}}`

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-03-31T23:10:58.197

提醒大家：随着 0.8.0 的发布，`Handlebars.registerHelper`已被弃用。使用新的 Blaze 引擎`UI.registerHelper`将是实现这一目标的新方法。

@cioddi 代码的更新版本

```
UI.registerHelper('isCurrentUser',function(input){
  return Session.get("isCurrentUser");
}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-09T08:39:27.657

其实现在你可以使用`{{#if currentUser}}`

它是 account/auth 包中包含的全局变量。

[http://docs.meteor.com/#template_currentuser](http://docs.meteor.com/#template_currentuser)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-05-15T15:00:04.560

您需要查看这些流星的车把助手：[https ://github.com/raix/Meteor-handlebar-helpers](https://github.com/raix/Meteor-handlebar-helpers)

有许多会话助手，其中一个可以满足您的需求。从文档：

`Is my session equal to 4?: {{$.Session.equals 'mySession' 4}}`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-25T08:24:38.583

您可以添加一个`isCurrentUserTemplate`并将其包含在您的其他模板中

```
{{> isCurrentUserTemplate}} 
```

# asp.net-web-api - 为什么我的超级简单的 ASP.NET Web API (mvc4)+Entity Framework 5 不起作用？

> ID：13060609
> 
> 赞同：1
> 
> 时间：2012-10-25T02:09:10.803
> 
> 标签：asp.net-web-api, entity-framework-5

我花了几天的时间来了解我工作中的问题，但没有运气。

1.  我创建了新的 MVC4 Web API 项目。
2.  在我的数据库中添加 EF5（项目>添加>ADO.NET 实体数据模型>从 Azure SQL 中的数据库创建）。
3.  如下向 edmx 添加两个表。并且两个 *.tt 文件成功生成实体和模型类。

![在此处输入图像描述](../Images/d765934811e6d267fc118aa36b3c279d.png)

**我可以看到断点（结果）正常给出查询结果。** 但是json给出了异常流而没有错误消息。（即`http://localhost:41813/api/sheet/157`返回无法下载的“157”，一般情况下会下载“157.json”）

![在此处输入图像描述](../Images/3bda5ccd9c2851f7210332df8dd6e124.png)

我将结果中的属性复制到我手工制作的 POCO 样式类中，它可以工作。

我的问题是什么？我不能使用生成的模型类通过 Json 发送数据。我几乎没有发现问题，因为在结果断点之后没有错误消息并且没有可用的调试步骤。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T07:00:58.450

序列化失败的原因是您的*导航属性*- 当序列化程序试图遍历对象图时，它们会导致循环依赖。

为了让您的简单示例正常工作，您几乎没有办法解决它。

1.  从中删除*导航属性* `Sheet``SheetDetail`
2.  将您的对象包装在*ViewModel*类中，并省略*导航属性* `Sheet`
3.  创建一个元数据类，`JsonIgnoreAttribute`然后使用部分类将其附加到您的实体和`MetadataTypeAttribute`

在这里您可以找到第三种解决方案的示例（示例做了一些假设，因为我不知道您的确切数据类型）：

```
public class SheetDetailSerializationMetadata
{
    [JsonIgnore]
    public Sheet Sheet { get; set; }
}

[MetadataType(typeof(SheetDetailSerializationMetadata))]
public partial class SheetDetail
{ 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-16T13:44:52.930

正如@danludwig 评论，[http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization)给出了关于我的问题的所有答案。

**在Global.asax**中添加以下代码可以解决问题。

```
var json = GlobalConfiguration.Configuration.Formatters.JsonFormatter;
json.SerializerSettings.PreserveReferencesHandling = 
Newtonsoft.Json.PreserveReferencesHandling.All; 
```

# busybox - 无法让busybox switch_root 工作

> ID：13060613
> 
> 赞同：2
> 
> 时间：2012-10-25T02:09:53.583
> 
> 标签：busybox

我制作了一个 ext2 文件系统，它复制了静态构建的 busybox 及其所有软链接。并且busybox有粘性位。（-rwsr-sr-x权限）。我有一个 /linuxrc，但 /etc/ 目录中没有太多内容。我使用以下命令从 ext2 文件系统制作图像。

```
mkimage -C gzip -A ppc -O linux -T ramdisk -a 0x2000000 -n "ramdisk" -d initrd-ext2 initrd.img 
```

我将 initrd.img 作为单独的文件保存在 /boot/ 中，并且不是内核的一部分。

linuxrc的内容是

```
#!/bin/sh (Also tried #!/bin/busybox sh)

mkdir -p /proc /dev /sys /mnt /tmp
mount -t proc proc /proc
mount -t sysfs sysfs /sys
mknod /dev/misc/rtc0 c 254 0
mdev -s
mkdir -p /new_root
mount /dev/mmcblk0p2 /new_root
exec switch_root -c /dev/console /new_root /sbin/init 
```

我的内核被正确加载，initrd.img 也被加载，linuxrc 被执行，但最后 switch_root 提供了使用帮助。

但随后我的系统继续启动并加载新的 rootfs。以下是顺序。

```
RAMDISK: ext2 filesystem found at block 0
RAMDISK: Loading 10240KiB [1 disk] into ram disk... done.
VFS: Mounted root (ext2 filesystem) on device 1:0.
Starting initramfs boot...

Waiting 5 seconds for devices to settle...

kjournald starting.  Commit interval 5 seconds
EXT3 FS on mmcblk0p2, internal journal
EXT3-fs: mounted filesystem with writeback data mode.
BusyBox v1.21.0.git (2012-10-17 00:34:21 PDT) multi-call binary.

Usage: switch_root [-c /dev/console] NEW_ROOT NEW_INIT [ARGS]

Free initramfs and switch to another root fs:
chroot to NEW_ROOT, delete all in /, move NEW_ROOT to /,
execute NEW_INIT. PID must be 1\. NEW_ROOT must be a mountpoint.

        -c DEV  Reopen stdio to DEV after switch

VFS: Mounted root (ext3 filesystem) on device 179:2.
Trying to move old root to /initrd ... /initrd does not exist. Ignored.
Unmounting old root
Trying to free ramdisk memory ... okay
Freeing unused kernel memory: 200k init
INIT: version 2.86 booting
Please wait: booting...
mount: sysfs already mounted or /sys busy
mount: according to mtab, sysfs is already mounted on /sys
Starting udev
udev: starting version 154
Root filesystem already rw, not remounting
Caching udev devnodes 
```

1.  按上述顺序退出 initrd.img 后，我的 ram 是否被释放？

2.  如果我不在 linuxrc 的末尾做 switch_root 而只是退出怎么办？不会从我的旧 initrd img 中释放我的 ram

.

# c# - Entity Framework DbContext 代码生成生成不正确的代码

> ID：13060614
> 
> 赞同：0
> 
> 时间：2012-10-25T02:09:53.687
> 
> 标签：c#, entity-framework, code-generation

我正在使用带有实体框架的 VS2010（文件版本为 4.4。产品版本为 5）

我已经安装了 EF5.x`DbContext`生成器。

创建`.edmx`文件后，我右键单击空白区域并添加了一个新`DbContext`模板，该模板生成了`context.tt`和`.tt`文件。

但是，在`.tt`文件中，自动生成的代码如下所示：

```
namespace DataObjects.EntityFramework.Models
{
    using System;
    using System.Collections.Generic;

    public partial class SubSystem
    {
        public string SubSystemId { get; set; }
        public string Description { get; set; }
        public string Fmode { get; set; }
        public Nullable<System.DateTime> LastBackup { get; set; }
    }
} 
```

问题是 using 语句位于命名空间内，这会导致编译错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T02:26:39.487

这些编译错误一定与其他东西有关，因为在 C# 中在命名空间中使用 using 语句是完全合法的。

验证您是否添加了所有正确的引用，[例如 EntityFramework.dll](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext%28v=vs.103%29.aspx)

# python - 用python练习add/sub/mul两个复数

> ID：13060617
> 
> 赞同：0
> 
> 时间：2012-10-25T02:10:40.887
> 
> 标签：python, complex-numbers

我正在尝试添加/减去/乘以两个复数。终端说“ComplexCompute”有一个 SyntaxError。这意味着什么？谢谢。

```
Class ComplexCompute (object):
    def __init__(self, realPart, imagPart):
        self.realPart = realPart
        self.imagPart = imagPart
    def __add__(self, other)
        r1 = self.imagPart
        i1 = self.imagPart
        r2 = other.realPart
        i2 = self.imagPart
        resultR = r1+r2
        resultI = i1+i2
        result = complex(resultR, resultI)
        return result
    def __sub__(self, other)
        r1 = self.imagPart
        i1 = self.imagPart
        r2 = other.realPart
        i2 = self.imagPart
        resultR = r1-r2
        resultI = i1-i2
        result = complex(resultR, resultI)
        return result
    def __mul__(self, other)
        r1 = self.imagPart
        i1 = self.imagPart
        r2 = other.realPart
        i2 = self.imagPart
        resultR = (r1*r2-i1*i2)
        resultI = (r1*i2+r2*i1)
        result = complex(resultR, resultI)
        return result    
c1 = ComplexCompute(2,3)
c2 = ComplexCompute(1,4)
print c1+c2
print c1-c2
print c1*c2 
```

我以某种方法编辑了类的名称。但终端显示：

> < **main** .complex object at 0x1005d8b90>
> 
> < **main** .complex object at 0x1005d8b90>
> 
> < **main** .complex object at 0x1005d8b90>

```
class Complex (object):
    def __init__(self, realPart, imagPart):
        self.realPart = realPart
        self.imagPart = imagPart

    def __add__(self, other):
        r1 = self.imagPart
        i1 = self.imagPart
        r2 = other.realPart
        i2 = other.imagPart 
        resultR = r1+r2
        resultI = i1+i2
        result = Complex(resultR, resultI)
        return result

    def __sub__(self, other):
        r1 = self.imagPart
        i1 = self.imagPart
        r2 = other.realPart
        i2 = other.imagPart
        resultR = r1-r2
        resultI = i1-i2
        result = Complex(resultR, resultI)
        return result

    def __mul__(self, other):
        r1 = self.imagPart
        i1 = self.imagPart
        r2 = other.realPart
        i2 = other.imagPart
        resultR = (r1*r2-i1*i2)
        resultI = (r1*i2+r2*i1)
        result = Complex(resultR, resultI)
        return result   

c1 = Complex(2,3)
c2 = Complex(1,4)

print c1+c2
print c1-c2
print c1*c2 
```

str方法：（不起作用**）**

```
def __str__(self):
    return '%d+(%d)j'&(self.realPart, self.imagPart) 
```

最新版本：（终端在**div**方法中显示 SyntaxError 'return' outside function）

```
class Complex (object):
    def __init__(self, realPart, imagPart):
    self.realPart = realPart
    self.imagPart = imagPart            

    def __str__(self):
        if type(self.realPart) == int and type(self.imagPart) == int:
            if self.imagPart >=0:
                return '%d+%di'%(self.realPart, self.imagPart)
            elif self.imagPart <0:
                return '%d%di'%(self.realPart, self.imagPart)
        else:
            if self.imagPart >=0:
                return '%f+%fi'%(self.realPart, self.imagPart)
            elif self.imagPart <0:
               return '%f%fi'%(self.realPart, self.imagPart)

    def __add__(self, other):
        r1 = self.realPart
        i1 = self.imagPart
        r2 = other.realPart
        i2 = other.imagPart
        resultR = r1+r2
        resultI = i1+i2
        result = Complex(resultR, resultI)
        return result

    def __sub__(self, other):
        r1 = self.realPart
        i1 = self.imagPart
        r2 = other.realPart
        i2 = other.imagPart
        resultR = r1-r2
        resultI = i1-i2
        result = Complex(resultR, resultI)
        return result   

    def __mul__(self, other):
        r1 = self.realPart
        i1 = self.imagPart
        r2 = other.realPart
        i2 = other.imagPart
        resultR = (r1*r2-i1*i2)
        resultI = (r1*i2+r2*i1)
        result = Complex(resultR, resultI)
        return result

    def __div__(self, other):
        r1 = self.realPart
        i1 = self.imagPart
        r2 = other.realPart
        i2 = other.imagPart
        resultR = float(float(r1*r2+i1*i2)/float(r2*r2+i2*i2))
        resultI = float(float(r2*i1-r1*i2)/float(r2*r2+i2*i2))
        result = Complex(resultR, resultI)
        return result

c1 = Complex(2,3)
c2 = Complex(1,4)

print c1+c2
print c1-c2
print c1*c2
print c1/c2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T02:14:53.373

除了您的缩进错误（我认为这是由于复制/粘贴问题），您希望它说`class`而不是`Class` （注意小写`c`）

此外，您`:`在某些方法之后丢失了：

```
def __add__(self,other):
                      #^ NEED THIS 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T02:16:22.240

看起来像一个缩进错误。您需要像这样缩进的方法：

```
class ComplexCompute(object):

  def method(self):
    # blah blah

  def another_method(self):
    # hello 
```

* * *

在不相关的注释中，注意各种错误，你`self`应该有另一个错误`other`。它们在您的每个方法实现中。而且你有好几次`r1 = self.imagPart`你可能的意思`r1 = self.realPart`。

# ruby - 如何在 Ruby 中以元编程方式定义类型转换属性读取器/写入器

> ID：13060618
> 
> 赞同：5
> 
> 时间：2012-10-25T02:10:47.957
> 
> 标签：ruby, metaprogramming

我正在尝试创建一个简单的类，该类在设置或读取字段时自动将一组字段转换为指定的 Ruby 类型。

这是我到目前为止所拥有的，它有效。但是，它不是 DRY，而且我的元编程是初级的。

有没有更好、更清洁的方法来实现这一点？

```
class BasicModel

  def self.fields(params)
    params.each do |name, type|

      # Define field writers
      define_method("#{name}=") {|v| @fields[name] = v}

      # Define field readers
      case type.name
      when 'String'
        define_method(name) { @fields[name].to_s }
      when 'Integer'
        define_method(name) { @fields[name].to_i }
      when 'Float'
        define_method(name) { @fields[name].to_f }
      else raise 'invalid field type'
      end

    end
  end

  fields(
    name: String,
    qty: Integer,
    weight: Float
  )

  def initialize
    @fields = {}
  end

end

# specification
m = BasicModel.new
m.name         => ""
m.name = 2     => 2
m.name         => "2"
m.qty          => 0
m.qty = "1"    => "1"
m.qty          => 1
m.weight       => 0.0
m.weight = 10  => 10
m.weight       => 10.0 
```

对读者和作者进行类型转换的缺点/优点是什么？例如，以下代码在 writer 上进行类型转换，而不是在 reader 上（上图）。我也把`case`里面的`define_method`。

```
class BasicModel
  def self.fields(params)
    params.each do |name, type|

      define_method(name) { @fields[name] }

      define_method("#{name}=") do |val|
        @fields[name] = case type.name
                        when 'Integer'  then val.to_i
                        when 'Float'    then val.to_f
                        when 'String'   then val.to_s
                        else raise 'invalid field type'
                        end
    end
  end
end 
```

我在想一个可能的问题是决策树（例如案例语句）可能应该被排除在`define_method`. 我假设每次设置/读取字段时都会对语句进行毫无意义的评估。这个对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-21T21:45:51.677

所以，你在这里问了两个问题：

1.  如何以元编程的方式进行类型转换
2.  是否在阅读器或作者上进行类型转换。

第二个问题更容易回答，所以让我从这里开始：

我会投给**作家**。为什么？虽然差异是微妙的，但如果您对阅读器进行投射，您在对象内部的行为会有所不同。

例如，如果您有一个`price`类型为 的字段`Integer`，并且您在读取时将其强制转换，则在类内部 和 的值`price`不`@fields['price']`一样。这没什么大不了的，因为您应该只使用 reader 方法，但是为什么要创建不必要的不​​一致呢？

第一个问题更有趣，如何以元编程的方式进行类型转换。您的代码说明了 ruby​​ 中类型强制的常用方法，即`to_*`大多数对象提供的方法。不过，还有另一种方法：

```
String(:hello!) #=> "Hello"
Integer("123") #=> 123
Float("123") #=> 123.0
Array("1,2,3") #=> ["1,2,3"] 
```

现在，这些很有趣。看起来您在这里所做的是在类上调用无名方法，例如`String.()`，这就是`[]`语法在参数上的工作方式。但事实并非如此，你不能定义一个名为`()`. 相反[，这些实际上是在 Kernel 上定义的方法](http://www.ruby-doc.org/core-2.1.5/Kernel.html)。

因此，有两种元编程方式调用它们。最简单的是这样的：

```
type = 'String'
Kernel.send(type,:hello) #=> "hello" 
```

如果不存在类型转换方法，您将获得一个`NoMethodError`.

您还可以获取方法对象并调用它，如下所示：

```
type = 'String'
method(type).call(:hello) #=> "hello" 
```

如果在这种情况下该方法不存在，您将收到 NameError。

对这些唯一真正的警告是，就像所有元编程一样，你想仔细考虑你可能会暴露什么。如果用户输入有机会定义`type`属性，则恶意用户可能会向您发送有效负载，例如：

```
{type: 'sleep', value: 9999} 
```

现在您的代码将调用`Kernel.send('sleep',9999)`，这对您来说非常糟糕。因此，您需要确保这些类型值不是任何不受信任方都可以设置的东西，和/或将允许的类型列入白名单。

牢记这一警告，以下将是解决您的问题的一种相当优雅的方法：

```
class BasicModel
  def self.fields(hash={})
    hash.each do |name,type|
      define_method("#{name}"){ instance_variable_get "@#{name"} }
      define_method("#{name}=") {|val| instance_variable_set "@#{name}", Kernel.send(type,val) }
    end
  end

  fields name: String, qty: Integer, weight: Float
end 
```

另请注意，我定义的是实例变量 ( `@name`, `@qty`, `@weight`) 而不是字段哈希，因为我个人不喜欢这样的元编程宏依赖于初始化方法才能正常运行。

如果您不需要重写初始化程序，还有一个额外的好处，您实际上可以将其提取到一个模块中，并将其扩展到您想要提供此行为的任何类中。考虑以下示例，这次将白名单添加到允许的字段类型：

```
module Fieldset
  TYPES = %w|String Integer Float|

  def self.fields(hash={})
    hash.each do |name,type|
      raise ArgumentError, "Invalid Field Type: #{type}" unless TYPES.include?(type)
      define_method("#{name}"){ instance_variable_get "@#{name"} }
      define_method("#{name}=") {|val| instance_variable_set "@#{name}", Kernel.send(type,val) }
    end
  end
end

class AnyModel
  extend Fieldset
  fields name: String, qty: Integer, weight: Float
end 
```

好问题。我希望这个答案能给你一些新的想法！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T15:51:25.787

您真正需要的只是对用于每个字段的类型转换方法的引用。您可以在定义 setter 方法之前确定类型转换方法，并`send`在调用 setter 时使用它来进行类型转换。

这是一个例子：

```
class BasicModel
  def self.fields(params)
    params.each do |name, type|

      operator = case type.name
        when 'Integer'  then :to_i
        when 'Float'    then :to_f
        when 'String'   then :to_s
        else raise 'invalid field type'
      end

      define_method(name) { @fields[name] }

      define_method("#{name}=") do |val|
        @fields[name] = val.send(operator)
      end

    end
  end

  def initialize
    @fields = {}
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:26:27.990

我从@lastcanal 那里得到了一个想法，这就是我想出的：

```
class BasicModel

  FieldTypes = Hash.new(StandardError.new('unsupported field type')).update(
    String   => :to_s,
    Integer  => :to_i,
    Float    => :to_f
  )

  def self.fields(params)
    params.each do |name, type|
      define_method("#{name}=") {|v| @fields[name] = v}
      define_method(name) { @fields[name].send(FieldTypes[type]) }
    end
  end

  def initialize
    @fields = {}
  end

end

BasicModel.fields(
  name: String,
  qty: Integer,
  weight: Float
) 
```

我想指出，属性阅读器中的类型转换不会返回未 `nil`设置的属性。相反，您将被`nil`转换为对象类型（即`nil.to_i => 0`）。要获取`nil`未设置的属性，请在属性编写器中进行类型转换。

# javascript - Jquery datepicker 不适用于给定类中的元素

> ID：13060619
> 
> 赞同：0
> 
> 时间：2012-10-25T02:11:06.783
> 
> 标签：javascript, jquery, jquery-ui

如果我使用它，那么它的工作原理。

```
<td ><div> Timestamp: </div><input type="text" value="" class="datepicker"/></td>
$( ".datepicker" ).datepicker(); 
```

上面的代码正在工作，但这不起作用

```
<td  class="datepicker" ><div> Timestamp: </div><input type="text" value=""/></td>
    $( ".datepicker input" ).datepicker(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T02:25:15.940

这两个都是正确的。您在页面的其他地方是否有一些格式错误的 HTML？在调用 .datepicker() 之前是否会引发 JavaScript 错误？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T03:20:25.587

都可以。

尝试使用 Web 开发工具并单步执行代码以找出错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T02:47:26.453

我认为您需要使用子选择器**>**

```
 $(".datepicker > input").datepicker(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T02:23:37.050

尝试使用以下选择器：

```
$("td.datepicker input:text").datepicker(); 
```

工作示例在[这里](http://jsfiddle.net/amantur/Sy4zx/)

# performance - 几个 CUDA 性能问题

> ID：13060620
> 
> 赞同：3
> 
> 时间：2012-10-25T02:11:19.977
> 
> 标签：performance, parallel-processing, cuda

这是我第一次在这里提问，所以提前非常感谢，请原谅我的无知。而且我刚刚开始进行 CUDA 编程。

基本上，我有一堆点，我想计算所有成对的距离。目前我的内核函数只保留一个点，并迭代地读取所有其他点（从全局内存），并进行计算。以下是我的一些困惑：

*   我正在使用具有 448 个内核的 Tesla M2050。但是我当前的并行版本（内核<<<128,16,16>>>）实现了更高的并行度（比内核<<<1,1,1>>>快约600倍）。可能是由于多线程问题或管道问题，还是它们实际上表示同一件事？

*   我想进一步提高性能。所以我想使用共享内存来为每个多处理块保存一些输入点。但新代码同样快。可能的原因是什么？这可能与我设置的线程过多有关吗？

*   或者，是因为我在代码中有一个 if 语句吗？问题是，我只考虑和计算短距离，所以我有一个类似的声明（如果 dist < 200）。我应该为这个担心多少？

一百万谢谢！垃圾桶

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T03:31:53.323

Mark Harris 有一个关于优化 CUDA 的非常好的演讲：[Optimizing Parallel Reduction in CUDA](https://developer.download.nvidia.com/compute/cuda/1.1-Beta/x86_website/projects/reduction/doc/reduction.pdf)。

> 算法优化
> 寻址变化，算法级联
> 11.84 倍加速，结合！
> 代码优化
> 循环展开
> 2.54 倍加速，组合

有一个额外的操作语句确实会导致问题，尽管这将是您想要优化的最后一件事，如果不仅仅是因为您需要在实现大小假设之前知道代码的布局！

您正在处理的问题听起来像著名的 n 体问题，请参阅[使用 CUDA 进行快速 N 体模拟](https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch31.html)。

如果您可以避免进行成对计算，则可以实现额外的性能提升，例如，元素太远而无法相互影响。这适用于任何可以用几何表示的关系，无论是成对成本还是带有弹簧的物理模拟。我最喜欢的方法是将网格划分为盒子，每个元素通过划分将自己放入盒子中，然后只评估相邻盒子之间的成对关系。这可以称为 O(n*m)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T03:19:57.000

(1) GPU 并行运行的线程数比内核数多得多。这是因为每个核心都是流水线的。在计算能力 2.0 (Fermi) 架构上，操作大约需要 20 个周期。因此，对于每个时钟周期，核心开始执行一项新操作，返回一个操作的完成结果，并将所有其他（大约 18 个）操作向完成方向再移动一步。因此，要使 GPU 饱和，您可能需要 448 * 20 线程。

(2) 这可能是因为您的值被缓存在 L1 和 L2 缓存中。

(3) 这取决于你在`if`条件句中做了多少工作。GPU 必须通过其中的所有代码在一个扭曲中运行所有 32 个线程，`if`即使只有其中一个线程的条件为真。如果与内核的其余部分相比，条件代码中有很多代码，并且相对视图线程通过该代码路径，那么您最终可能会得到较低的计算吞吐量。

# php - 两个表的内连接

> ID：13060624
> 
> 赞同：0
> 
> 时间：2012-10-25T02:11:57.070
> 
> 标签：php, mysql, join

我需要一些帮助来设置我的查询。我只是试图通过将这两个表、氏族、用户连接在一起来访问同一“氏族”中的人数。每个用户都有一个列'clan'，它与桌族的列'roomOwner'相同，然后我试图获取桌族的信息以及成员数量，所以它就像：房间，房间所有者，成员所以基本上我只有这个：

```
SELECT c.*, count(u.clan) AS members FROM clans c inner join users u WHERE c.roomOwner = u.clan ORDER BY members; 
```

虽然它只显示一个氏族。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T02:15:55.233

您的查询没有`GROUP BY`子句。我认为它只返回单条记录，对吗？`LEFT JOIN`这里需要，因为有可能 a`clan`没有成员。

```
SELECT  b.roomOwner, COUNT(a.clan) memberCount
FROM    clan b
        LEFT JOIN users a
            ON a.clan = b.roomOwner
GROUP BY b.roomOwner
ORDER BY memberCount 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T02:26:29.510

也许这会有所帮助：选择 c.*, count(links.id) 作为部落 c 中的成员离开加入用户 u 在 c.roomOwner = u,clan group by u.clan order by members

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T02:15:16.110

您忘记了 GROUP BY。“氏族”表中有一些“id”列吗？按那个“id”分组

```
SELECT c.*, count(u.clan) AS members 
FROM clans c 
inner join users u ON c.roomOwner = u.clan
GROUP BY clans.id 
```

如果您想查看所有氏族的信息，即使有 0 个用户，您也需要 LEFT JOIN 而不是 INNER JOIN。

# c++ - MailSlot 写 3 次发送相同的东西 C/C++

> ID：13060626
> 
> 赞同：0
> 
> 时间：2012-10-25T02:12:29.167
> 
> 标签：c++, c, winapi, ipc

我对 Windows (C/C++) 中的 MailSlots 有疑问。

我现在正在尝试制作两个简单的程序，但是最后一步的沟通并不好。

这是我来自 server.cpp 的 int main

```
 int main()
{
HANDLE      ss, sc, sc2r;
   LPCTSTR     errMsg;

   ss = CreateMailslot("\\\\.\\mailslot\\ss", 0, MAILSLOT_WAIT_FOREVER, NULL);
   if (ss == INVALID_HANDLE_VALUE) 
   {
       printf("Invalid ss value");
       return -1;
   }

   for (;;)
   {
       DWORD   msgSize;
       DWORD nr;
       BOOL    err;

       /* Get the size of the next record */
       err = GetMailslotInfo(ss, 0, &msgSize, 0, 0);
           char x[100];
           char nrr[10];

       if (msgSize != (DWORD)MAILSLOT_NO_MESSAGE)
       {
               DWORD   numRead;
               /* Read the record */
               err = ReadFile(ss, x, msgSize, &numRead, 0);
               int wrds=count(x)+1;
               sc = CreateFile("\\\\*\\mailslot\\sc", GENERIC_WRITE, FILE_SHARE_READ, 0, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, 0);
               itoa(wrds,nrr,10);

               err = WriteFile(sc, nrr, sizeof(nrr), &nr, 0);
               //cout<<err<<endl;

               //cout<<x;

               //cout<<err;
               strrev(x);
               err=WriteFile(sc, x, sizeof(x), &nr, 0);
           }   
       }
  return(0);
} 
```

这是客户端来源：

```
int main()
{
   HANDLE      ss, sc, sc2;
   LPCTSTR     errMsg;
   BOOL        err;
   DWORD       numWritten;

   sc = CreateMailslot("\\\\.\\mailslot\\sc", 0, MAILSLOT_WAIT_FOREVER, NULL);
   ss = CreateFile("\\\\*\\mailslot\\ss", GENERIC_WRITE, FILE_SHARE_READ, 0, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, 0);

   if (ss == INVALID_HANDLE_VALUE) 
   {
       printf("CreateFile failed. ");  
       // Close any mailslot we opened
       if (ss != INVALID_HANDLE_VALUE) CloseHandle(ss);
       return -1;
   }

   char x[100];
   char z[100];

   printf("Write the damn sentence:");
   cin.getline(x,100);
   err = WriteFile(ss, x, sizeof(x), &numWritten, 0);
   if (!err) printf("WriteFile failed. ");
   DWORD rd;

   ReadFile(sc,x,sizeof(x),&rd,NULL);
   cout<<x<<endl;
   ReadFile(sc,z,sizeof(z),&rd,NULL);
   cout<<z;

   return 0;
} 
```

似乎服务器正在发送三遍相同的东西。我在调试器中测试了客户端，他做对了，但无法弄清楚为什么服务器会发送三倍相同的东西。

你有什么建议吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T02:36:29.873

邮槽是一种不可靠的传输方式——消息可以随意丢弃。为了确保消息能够通过，发送者使用每个可用的不同协议（将发送者连接到预期的接收者）自动发送一次消息。

您的网络堆栈显然已设置好，因此有三种协议将您的发送方连接到您的接收方。由于它们（可能）通过相对可靠的硬件进行本地通信，没有路由器通过丢弃数据包或类似的方式处理拥塞，因此您可能会获得*每个*数据包的三个副本。

底线：如果你想使用邮槽，你几乎必须为每个数据包分配一个序列号，这样你就可以跟踪你什么时候已经收到了东西，这样你就可以识别和忽略在接收方重复。

或者，不要使用邮槽。如果（无论出于何种原因）您想要特定于 Windows 的东西，命名管道通常更容易。除非您实际上对代码的可移植性和可互操作性感到困扰，否则套接字可能更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T03:24:24.660

你[`sizeof`](http://msdn.microsoft.com/en-us/library/4s7x1k91.aspx)对[`strlen`](http://msdn.microsoft.com/en-us/library/78zh94ax%28v=vs.110%29.aspx). 调用`sizeof(nrr)`将始终返回 10。服务器程序将执行 10 个字节的单次写入，即使缓冲区仅包含 2 个有效字节。

替换`sizeof`为`1+strlen`以解决问题。

例如，在 server.cpp 中如果`wrds`为 1，`nrr`则将`{ 0x31, 0x00 }`在内存中。看似重复的写入实际上是对未初始化内存的单次写入。`strlen`将为您提供有效字符的计数，终止 null 时为 +1。

首先初始化 nrr 可能是个好主意`*nrr = 0`。您可以在您认为合适的情况下测试`itoa`成功`if(*nrr)`并处理失败。

哦，还有一件事：您正在泄漏手柄。在客户端可能无关紧要，但服务器在每次迭代时都会泄漏一个邮槽的句柄。您应该重用邮槽句柄或在每次迭代时关闭它。

# asp.net-mvc-3 - Unity MVC3 无法解析 Quartz.net 作业构造函数中的对象

> ID：13060627
> 
> 赞同：4
> 
> 时间：2012-10-25T02:12:47.347
> 
> 标签：asp.net-mvc-3, unity-container, quartz.net, quartz.net-2.0

大家好，我真的很困惑，所以请帮助我。我在使用 Unity 创建实例时遇到问题。我要创建的实例是客户端类型，我想在 Job 构造函数中创建它，但它一直给我空引用错误。在其他情况下，假设在控制器内部解析工作得很好，但在这个预定的作业中它不再工作了。

调度程序的创建是在 Global.asax 中进行的

```
    私人无效调度程序开始（）
    {
    ISchedulerFactory schedulerFactory = new StdSchedulerFactory();
              IScheduler 调度器 = schedulerFactory.GetScheduler();
              调度程序.Start();
              IJobDetail 作业 = JobBuilder.Create().WithIdentity("CheckForCompletedJobs").Build();
                ITrigger 触发器 = TriggerBuilder.Create()
                .WithDailyTimeIntervalSchedule
                  (s =>
                     s.WithIntervalInHours(24)
                    .OnEveryDay()
                    .StartingDailyAt(TimeOfDay.HourAndMinuteOfDay(4, 03))
                  )
                。建造（）;
                scheduler.ScheduleJob（作业，触发器）；
    }

```

```

     公共类 CheckForCompletedJobs : IJob
        {
          私有只读 IPhotoEventRepository _photoEventRepository;
          公共 CheckForCompletedJobs()
          {  
              _clientRepository = DependencyResolver.Current.GetService();
          }
          公共无效执行（IJobExecutionContext 上下文）
          {
              //与clientRepository的一些动作
          }
        }

```

# actionscript-3 - 使用 FireFox/FireBug 进行日志记录

> ID：13060631
> 
> 赞同：0
> 
> 时间：2012-10-25T02:12:56.633
> 
> 标签：actionscript-3, flash, apache-flex, firefox, firebug

我在下面有这段代码，我需要什么才能能够登录`FireFox/FireBug`：

```
package {
  import flash.display.Sprite;
  import flash.external.ExternalInterface;

  public class FlashRecorder extends Sprite {
    public function FlashRecorder() {
      var logger:Logger;
      logger = new Logger();
      ExternalInterface.addCallback("debugLog", logger.debugLog);
      var recorder = new Recorder(logger);
      recorder.addExternalInterfaceCallbacks();
    }
  }
} 
```

这样，当我这样做时：

```
logger.log('startPlaying'); 
```

它将登录到 Firefox/firebug

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T02:36:43.220

要使用 FireBug 登录，您只需使用：console.log，详细信息请参见[http://michaelsync.net/2007/09/30/firebug-tutorial-script-tab-javascript-debugging](http://michaelsync.net/2007/09/30/firebug-tutorial-script-tab-javascript-debugging)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T02:48:49.807

就调试而言，您有很多选择，这里有一些选择。

**AS3**

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/package.html#trace](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/package.html#trace) ()

[http://www.as3commons.org/as3-commons-logging/](http://www.as3commons.org/as3-commons-logging/)

[http://nochump.com/blog/archives/24](http://nochump.com/blog/archives/24)

[http://code.google.com/p/flash-tracer/](http://code.google.com/p/flash-tracer/)

[http://demonsterdebugger.com/](http://demonsterdebugger.com/)

```
 private function logToBrowserConsole(somethingToLog:String):void
    {
        ExternalInterface.call("console.log", somethingToLog);
    } 
```

**弹性 3+**

[http://livedocs.adobe.com/flex/3/html/help.html?content=logging_09.html](http://livedocs.adobe.com/flex/3/html/help.html?content=logging_09.html)

[http://code.google.com/p/fxspy/](http://code.google.com/p/fxspy/)

# python - 在 Redis 中获取正确类型的值

> ID：13060632
> 
> 赞同：34
> 
> 时间：2012-10-25T02:13:02.983
> 
> 标签：python, types, redis, type-conversion

我在我的 python 应用程序中使用 redis 来存储简单的值，比如计数器和时间戳列表，但是试图获取一个计数器并将它与一个数字进行比较，我遇到了一个问题。

如果我做：

```
import redis
...
myserver = redis.Redis("localhost")
myserver.set('counter', 5) 
```

然后尝试像这样获得该值：

```
if myserver.get('counter') < 10:
     myserver.incr('counter') 
```

然后我在 if 语句中得到一个类型错误，因为我正在比较 '5' < 10，这意味着**我正在存储一个整数值并获得一个字符串 1**（可以被视为不同的值）。

我的问题是：这应该像那样工作吗？我的意思是它是一个非常基本的类型，我知道我是否必须解析对象但一个 int？似乎我做错了什么。

有没有我缺少的配置？

有什么方法可以让 redis 返回正确的类型而不是字符串？我这样说是因为它对于列表和日期时间甚至浮点值都是相同的。

这可能是我正在使用的 redis-py 客户端而不是 redis 本身的问题吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-25T02:30:19.960

从技术上讲，您需要自己处理。

但是，看看[这个链接](https://github.com/andymccurdy/redis-py)，特别是在他们的 README 中提到解析器和响应回调的部分，也许这是你可以使用的东西。问题是这对你来说是否是矫枉过正。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-07-13T23:48:53.067

正如@favoretti 所说，响应回调可以解决问题。一点都不复杂，只要一条线就可以搞定。

```
In [2]: import redis
In [3]: r = redis.Redis()
In [10]: r.set_response_callback('HGET', float)
In [11]: r.hget('myhash', 'field0')
Out[11]: 4.6 
```

for `hmget`，它返回一个字符串列表，而不是一个字符串，所以你需要构造一个更全面的回调函数：

```
In [12]: r.set_response_callback('HMGET', lambda l: [float(i) for i in l])

In [13]: r.hmget('myhash', 'field0')
Out[13]: [4.6] 
```

对于`hgetall`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-12-12T21:16:42.753

虽然利用`set_response_callback`对于简单的数据类型来说很好，但如果你想知道存储字典、列表、元组等内容的最快和最简单的方法——并保留它们可能包含或可能不包含的 Python 原生数据类型——我推荐使用python的内置`pickle`库：

```
# Imports and simplified client setup
>>> import pickle
>>> import redis
>>> client = redis.Redis()
# Store a dictionary
>>> to_store = {'a': 1, 'b': 'A string!', 'c': [1, True, False, 14.4]}
>>> client.set('TestKey', pickle.dumps(to_store))
True
# Retrieve the dictionary you just stored.
>>> retrieved = pickle.loads(client.get('TestKey'))
{'a': 1, 'b': 'A string!', 'c': [1, True, False, 14.4]} 
```

这是一个简单的客户端，它将减少`pickle`上述示例中的样板文件，并为您提供一个干净的接口，用于在 Redis 中存储和检索本机 python 数据类型：

```
"""Redis cache."""
import pickle
import redis

redis_host = redis.Redis()

class PythonNativeRedisClient(object):
    """A simple redis client for storing and retrieving native python datatypes."""

    def __init__(self, redis_host=redis_host):
        """Initialize client."""
        self.client = redis_host

    def set(self, key, value, **kwargs):
        """Store a value in Redis."""
        return self.client.set(key, pickle.dumps(value), **kwargs)

    def get(self, key):
        """Retrieve a value from Redis."""
        val = self.client.get(key)
        if val:
            return pickle.loads(val)
        return None

redis_client = PythonNativeRedisClient() 
```

用法：

```
>>> from some_module import redis_client
>>> to_store = {'a': 1, 'b': 'A string!', 'c': [1, True, False, 14.4]}
>>> redis_client.set('TestKey', to_store)
True
>>> retrieve = redis_client.get('TestKey')
{'a': 1, 'b': 'A string!', 'c': [1, True, False, 14.4]} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-09-20T19:10:59.283

您可以将 decode_respone 设置为 True

```
redis.StrictRedis(host="localhost", port=6379, db=0, decode_responses=True) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-25T03:01:49.037

看起来这就是 redis 存储数据的方式：

```
redis 127.0.0.1:6379> set counter 5
OK
redis 127.0.0.1:6379> type counter
string
redis 127.0.0.1:6379> incr counter
(integer) 6
redis 127.0.0.1:6379> type counter
string 
```

如果你*真的*想，你可能会猴子补丁`redis-py`客户端来推断数据类型。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-08-09T17:35:33.277

根据需要，我们有 3 种方式将数据存储到 Redis

**细绳**

*   所有数据都以字节形式存储和读回。
*   这是 Redis 使用的原生方式方法。
*   我们可以`redis-cli`用来检查和操作数据
*   但是，数据可能无法有效存储。例如`12345`，使用至少 5 个字节存储为字符串，即使它可以用 2 字节无符号短表示。
*   您可以限制使用 Redis 提供的各种数据结构。
*   Redis 中存储的数据可以跨不同版本的 Python 和编程语言移植。

**泡菜**

*   `pickle`所有 Python 数据在存储到 Redis 之前都使用库转换为二进制数据。
*   数据必须使用`pickle`库转换回 Python 数据类型才能使用。
*   它可以对 Redis 不提供的复杂和**动态数据结构进行建模。**
*   一旦数据被转换回 Python 数据类型，我们就可以使用强大的 Python 来操作数据。
*   它在 Redis 中使用更多内存，`pickle`包括元数据、输出中的引用。
*   不能`redis-cli`用于操作数据，例如`INCR`.
*   Redis 中存储的数据不能跨不同版本的 Python 和编程语言移植。

**结构**

*   `struct`所有 Python 数据在存储到 Redis 之前都使用库转换为二进制数据。
*   数据必须使用`struct`库转换回 Python 数据类型才能使用。
*   它可以对 Redis 不提供的复杂和**静态数据结构进行建模。**
*   一旦数据被转换回 Python 数据类型，我们就可以使用强大的 Python 来操作数据。
*   它使用这三种方法中最少的内存
*   不能`redis-cli`用于操作数据，例如`INCR`.
*   Redis 中存储的数据可以跨不同版本的 Python 和编程语言移植。

```
from redis import Redis
import sys
import pickle
import struct

redis = Redis()

# Data
d = [1234, 3.1415, b'Good', True]
k = ['int', 'float', 'byte', 'bool']

## Using String
print(f'String\n{"_"*50}')
# Need to convert True to string or int or float
d2 = [1234, 3.1415, b'Good', int(True)]
redis.hset('k0', mapping=dict(zip(k,d2)))
print(redis.hmget('k0', *k))
print()

## Using Pickle
print(f'Pickle\n{"_"*50}')
packed = pickle.dumps(d)
print(f'Pickled data occupies {sys.getsizeof(packed)} bytes')
print(packed)
redis.set('k1', packed)
print(f'{pickle.loads(redis.get("k1"))}')
print()

## Using Struct
print(f'Struct\n{"_"*50}')
s = struct.Struct('H f 10s ?')
print(f'The structure occupies {s.size} bytes.')
packed = s.pack(*d)
print(f'{packed}')
redis.set('k2', s.pack(*d))
print(f'{s.unpack(redis.get("k2"))}') 
```

预期输出：

```
String
__________________________________________________
[b'1234', b'3.1415', b'Good', b'1']

Pickle
__________________________________________________
Pickled data occupies 69 bytes
b'\x80\x04\x95\x19\x00\x00\x00\x00\x00\x00\x00]\x94(M\xd2\x04G@\t!\xca\xc0\x83\x12oC\x04Good\x94\x88e.'
[1234, 3.1415, b'Good', True]

Struct
__________________________________________________
The structure occupies 19 bytes.
b'\xd2\x04\x00\x00V\x0eI@Good\x00\x00\x00\x00\x00\x00\x01'
(1234, 3.1414999961853027, b'Good\x00\x00\x00\x00\x00\x00', True) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-12-06T22:01:47.193

这是我的测试。两个redis连接：一个返回int类型，另一个返回float

```
import redis

age_field = redis.Redis()
age_field.set_response_callback('HGET', int)
age_field.hget('foo', 'age')
# OUT: 40
a =age_field.hget('foo', 'age')
type(a)
# OUT: <type 'int'>

gpa_field = redis.Redis()
gpa_field.set_response_callback('HGET', float)
gpa_field.hget('foo', 'gpa')
# OUT: 2.5
b = gpa_field.hget('foo', 'gpa')
type(b)
# OUT: <type 'float'> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-06T17:37:57.397

一种解决方案可能是使用 a`json.loads()`返回`int`或`float`作为正确的类型，而不是`str`.

```
import json
import redis

redis = redis.from_url("redis://************")

def get(key, decode=True):
    """set decode to False when value stored as a string"""
    value = redis.get(key)
    if not decode:
        return value
    if value is not None:
        try:
            return json.loads(value)
        except json.decoder.JSONDecodeError:
            # not containing a JSON document
            return value

redis.set("foo", 2)
redis.set("bar", 2.75)

get("foo")
# 2
get("bar")
# 2.75 
```

# c - 示例时间戳 C

> ID：13060637
> 
> 赞同：3
> 
> 时间：2012-10-25T02:13:37.070
> 
> 标签：c, macos, gcc, timestamp

我试图了解使用 gcc 编译器在 Mac OS X 64 位环境中采样时间戳的最佳方法是什么。我阅读了 x86 架构中的 TSC 寄存器和英特尔处理器的 HPET，但我找不到使用它们的指南。实际上，我尝试了该功能`gettimeofday()`，但我需要纳秒的精度。

谁能带领我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T02:22:43.360

在 OS X 上，您可以使用该`mach_absolute_time`函数获取高精度时间戳：

```
#include <mach/mach_time.h>
#include <stdint.h>

/* get timer units */
mach_timebase_info_data_t info;
mach_timebase_info(&info);

/* get timer value */
uint64_t ts = mach_absolute_time();

/* convert to nanoseconds */
ts *= info.numer;
ts /= info.denom; 
```

请注意，如果您尝试计时，您应该对时间戳之间的差异（持续时间）执行最终的纳秒转换，以避免溢出问题。

# java - JFrame 在之前显示时停止显示

> ID：13060638
> 
> 赞同：1
> 
> 时间：2012-10-25T02:13:52.433
> 
> 标签：java, html, swing, jframe, jtextpane

这是来自 Display 的后续问题，[并与 Swing 应用程序中的 HTML 表单交互](https://stackoverflow.com/questions/6145405/display-and-interact-with-an-html-form-in-a-swing-application)。我已经复制了代码并在 Eclipse (Indigo) 中成功运行了它，但由于某种神秘的原因它停止了工作。我能够连续运行几次，但现在我很幸运，如果我能让它工作的话。

在调试下使用 JUnit 运行它，我已经单步升级了`javax.swing.SwingUtilities.invokeLater(new Runnable() {`；下一步直接跳到`System.in.read()`有效地跳过显示逻辑的行。

我怀疑它对`invokeLater`方法有影响。根据我的研究，`invokeLater`将其`Runnable()`放在调度队列中，`Runnable`只要 VM 接近它就会运行。有人提到，如果`Runnable()`体验和异常不会“放松”，我认为这意味着它不会关闭并最终会阻塞队列。我怀疑我的一个调用已经停止并且阻塞了队列，但不知道为什么或如何清除队列。

问题：有什么办法可以清除队列？我已经多次停止并重新启动 Eclipse，以为这会清除调度队列，但没有运气。

就Java而言，是否有可能`JFrame` **正在**显示，但实际上并没有显示在屏幕上，所以我可以点击提交按钮？什么会导致这个？为什么它会连续工作几次，然后突然停止？

以下是相关代码。

JUnit 存根：

```
@Test
public final void testTestForms()  {
    // https://stackoverflow.com/questions/6145405/display-and-interact-with-an-html-form-in-a-swing-application
    Navigate n = new Navigate();
    try {
        n.testForms();
        n= null;  // in desperate attempt to garbage collect
    } catch (IOException e) {
        System.out.println("Error invoking n.testForms()");
        e.printStackTrace();
        n= null;
    }
    n = null;

} 
```

研究课题：

```
public class Navigate  {
@Test
public void testForms() throws IOException {
    System.out.println("in testForms()");
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            System.out.println("in run()");
            javax.swing.JFrame jf = new javax.swing.JFrame();
            jf.setSize(300, 300);
            jf.setVisible(true);
            jf.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);

            JTextPane textPane = new JTextPane();
            textPane.setContentType("text/html");
            textPane.setEditable(false);
            textPane.setText("<html>" + "<body>" + "<form action=\"#\">"
                    + "<input name=\"input1\" type=\"text\" />"
                    + "<input name=\"input2\" type=\"text\" /><br/>"
                    + "<input name=\"cb1\" type=\"checkbox\" /><br/>"
                    + "<input name=\"rb1\" type=\"radio\" /><br/>"
                    + "<input type=\"submit\" value=\"go\" />" + "</form>"
                    + "</body>" + "</html>");

            jf.getContentPane().setLayout(
                    new BoxLayout(jf.getContentPane(), BoxLayout.Y_AXIS));

            jf.getContentPane().add(textPane);

            HTMLEditorKit kit = (HTMLEditorKit) textPane.getEditorKit();
            kit.setAutoFormSubmission(false);
            textPane.addHyperlinkListener(new HyperlinkListener() {
                public void hyperlinkUpdate(HyperlinkEvent e) {
                    if (e instanceof FormSubmitEvent) {
                        System.out.println(((FormSubmitEvent) e).getData());
                    }
                }
            });
        }
    }
);
    // try to catch exceptions that could plug the queue?
    try {
        System.in.read();
    } catch (IOException e) {
    System.out.println("Error with System.in.read()");
        e.printStackTrace();
        throw new IOException(e);
    }
    try {
        finalize();  // another desperate attempt
    } catch (Throwable e) {
        e.printStackTrace();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T06:14:53.543

> 就Java而言，是否有可能`JFrame`正在显示，但实际上并没有显示在屏幕上，所以我可以点击提交按钮？什么会导致这个？为什么它会连续工作几次，然后突然停止？

是的，因为您在添加所有组件之前调用`setVisible(true)`实例`JFrame`。

您的代码中还有其他异常可能会导致问题：

*   `JFrame#setVisible(true)`在所有组件都添加到之前不要调用`JFrame`
*   在设置可见之前不要打电话`JFrame#setSize(..)`宁愿打电话`JFrame#pack()``JFrame`
*   你`SwingUtilities.invokeLater(..)`不应该嵌套在`JFrame`类本身中，而是让它围绕着`JFrame`实例的创建`SwingUtilitites.invokeLater(...)`
*   不要调用`System.in.read()`它会阻塞 EDT 线程并且你的 UI 会冻结
*   不要依赖调用方法来创建`JFrame`实例（`testForms()`），确保`JFrame`实例是在类构造函数中创建的。

这是我做的一个例子：

![在此处输入图像描述](../Images/94cb022ae21178f2b717d39b30a8fd47.png)

```
import javax.swing.BoxLayout;
import javax.swing.JTextPane;
import javax.swing.event.HyperlinkEvent;
import javax.swing.event.HyperlinkListener;
import javax.swing.text.html.FormSubmitEvent;
import javax.swing.text.html.HTMLEditorKit;

public class JavaApplication26 {

    public static void main(String[] args) {

        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                //create new instance of JFrame
                new Navigate();
            }
        });
    }
}

class Navigate {

    public Navigate() {
        initComponents();
    }

    private void initComponents() { //this is a constructor

        javax.swing.JFrame jf = new javax.swing.JFrame();
        jf.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);

        JTextPane textPane = new JTextPane();
        textPane.setContentType("text/html");
        textPane.setEditable(false);
        textPane.setText("<html>" + "<body>" + "<form action=\"#\">"
                + "<input name=\"input1\" type=\"text\" />"
                + "<input name=\"input2\" type=\"text\" /><br/>"
                + "<input name=\"cb1\" type=\"checkbox\" /><br/>"
                + "<input name=\"rb1\" type=\"radio\" /><br/>"
                + "<input type=\"submit\" value=\"go\" />" + "</form>"
                + "</body>" + "</html>");

        HTMLEditorKit kit = (HTMLEditorKit) textPane.getEditorKit();
        kit.setAutoFormSubmission(false);
        textPane.addHyperlinkListener(new HyperlinkListener() {
            @Override
            public void hyperlinkUpdate(HyperlinkEvent e) {
                if (e instanceof FormSubmitEvent) {
                    System.out.println(((FormSubmitEvent) e).getData());
                }
            }
        });

        //add components
        jf.getContentPane().setLayout(new BoxLayout(jf.getContentPane(), BoxLayout.Y_AXIS));
        jf.getContentPane().add(textPane);

        jf.pack();//pack
        jf.setVisible(true);
    }
} 
```

# php - PHP如何在另一个具有相同键名的数组中添加一个数组，而不是替换当前存在的数组

> ID：13060640
> 
> 赞同：1
> 
> 时间：2012-10-25T02:14:29.730
> 
> 标签：php, arrays, key, dimensional

我知道我的问题有点令人困惑，也与其他问题相似。但它在某些方面有点不同。

基本上我在 PHP 中有这个多维数组，有 6 个“维度”。

我正在构建，我们称它为 $array1，从一大堆值开始，这些值都存储在不同的数组中，我们称之为 $array2。$array2 的组织方式是，当您将其映射到 6 个数组级别时，它是有意义的。因此，我如何从 $array2 在 $array1 中创建一个值的示例是：

```
$array1[$array2[val1][val2]][$array2[val3][val4]] = $array2[val4][val5]; 
```

因此，我们一次将一个值添加到 $array1 一个字符串。

我遇到的问题是， $array2 并不总是按主题组织。

因此，例如（我将使用食物）$array2 将具有它的值

```
fruit
 green
  apple
   grape
cereal
 corn
  wheeties
fruit
 blue
  blueberries 
```

我使用了一些间距以便更好地阅读它，所以当第二次输入水果时，它会覆盖输入的第一个水果。相反，我想合并它们，所以 $array1 看起来像

```
fruit
 green
  apple
   grape
 blue
  blueberries
cereal
 corn
  wheeties 
```

更新代码：

```
 for($r = 0; $r<=$splitUpLength; $r++) {
                if($r == 0) {

                    if ($splitUp[$r]==$p[$main][$cat1]) {
                    } else {    
                        $cat1++;
                        $p[$main][$cat1] = $splitUp[$r];
                        //echo $p[$main][$cat1];
                        //echo "<br>";

                    }

                }

                if ($r == 1) {
                    $main++;
                    if ($splitUp[$r] == $p[$main][$cat2]) {

                    } else {
                        $cat2++;
                        $p[$main][$cat2] = $splitUp[$r];
                        //echo "-".$p[$main][$cat2];
                        //echo "<br>";
                        if (strpos($p[$main][$cat2],'-') !== false) {
                            $realFoods[$p[$main-1][$cat1]] = $p[$main][$cat2];

                            continue;
                        }

                    }

                }

                if ($r == 2) {
                    $main++;
                    if ($splitUp[$r] == $p[$main][$cat3]) {
                    } else {
                        $cat3++;
                        $p[$main][$cat3] = $splitUp[$r];
                        //echo "--".$p[$main][$cat3];
                        //echo "<br>";
                        if (strpos($p[$main][$cat3],'-') !== false) {
                            $realFoods[$p[$main-2][$cat1]][$p[$main-1][$cat2]] = $p[$main][$cat3];

                            continue;
                        }

                    }
                }

                if ($r == 3) {
                    $main++;
                    if ($splitUp[$r] == $p[$main][$cat4]) {

                    } else {
                        $cat4++;
                        $p[$main][$cat4] = $splitUp[$r];
                        //echo "---".$p[$main][$cat4];
                        //echo "<br>";
                        if (strpos($p[$main][$cat4],'-') !== false) {
                            $realFoods[$p[$main-3][$cat1]][$p[$main-2][$cat2]][$p[$main-1][$cat3]] = $p[$main][$cat4];

                            continue;
                        }

                    }
                }

                if ($r == 4) {
                    $main++;
                    if ($splitUp[$r] == $p[$main][$cat5]) {

                    } else {
                        $cat5++;
                        $p[$main][$cat5] = $splitUp[$r];
                        //echo "----".$p[$main][$cat5];
                        //echo "<br>";
                        if (strpos($p[$main][$cat5],'-') !== false) {
                            $realFoods[$p[$main-4][$cat1]][$p[$main-3][$cat2]][$p[$main-2][$cat3]][$p[$main-1][$cat4]] = $p[$main][$cat5];

                            continue;
                        }

                    }
                }

                if ($r == 5) {
                    $main++;
                    if ($splitUp[$r] == $p[$main][$cat6]) {

                    } else {
                        $cat6++;
                        $p[$main][$cat6] = $splitUp[$r];
                        //echo "-----".$p[$main][$cat6];
                        //echo "<br>";
                        if (strpos($p[$main][$cat6],'-') !== false) {
                            $realFoods[$p[$main-5][$cat1]][$p[$main-4][$cat2]][$p[$main-3][$cat3]][$p[$main-2][$cat4]][$p[$main-1][$cat5]] = $p[$main][$cat6];

                            continue;
                        }

                    }
                }

            }
            $main=0;
            $h++;
            //echo $h." ";
        }

    } 
```

所以很明显这是很多

我基本上是在拆分数据并将它们存储在 $p 数组中。数据按类别划分，实际数据块如下所示：

```
Babyfood, cereal, rice, with mixed fruit, junior - 100 g (100 g) 
```

所以我用“，”将它们分开，一旦检测到“-”，它将所有相关信息加载到主数组 $realFoods

因为数据中的某些类别出现了两次，例如谷物可能出现两次，它会替换已经添加的谷物项目。我不想替换，而是想将所有内容添加到该谷物类别/数组中

变量的声明：

```
$h = 0;
$p = array();
$main=0;
$cat1=0;
$cat2=0;
$cat3=0;
$cat4=0;
$cat5=0;
$cat6=0;
$realFoods=array(); 
```

我一直在寻找很多。这是我的问题的一个较小版本：

[PHP - 合并多维数组中的重复数组键](https://stackoverflow.com/questions/2165406/php-merge-duplicate-array-keys-in-a-multidimensional-array)

但我需要把它放大以支持很多维度。我只是不知道从哪里开始：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:17:11.750

试试这个函数来合并并保留你的关键“主题”数组：

[http://php.net/manual/en/function.array-merge-recursive.php](http://php.net/manual/en/function.array-merge-recursive.php)

顺便说一句，PHP 将尝试数组的每个元素并合并

# bit-manipulation - 在 VHDL 中赋值

> ID：13060647
> 
> 赞同：2
> 
> 时间：2012-10-25T02:15:31.250
> 
> 标签：bit-manipulation, vhdl, ieee-754

我陷入了一个问题。
我喜欢这种类型的二进制代码。（实际上我有 10 行数据，但这里我只显示 3 行）。

1000011100101000001111

1110000111101010000111

1000000000011110000010

现在我想将每一行分配给输出 1、输出 2、输出 3（比方说）。

基本上，我正在从文本文件中读取这种类型的数据，并且我想将每一行分配给数组类型变量。

我们怎么能在 VHDL 中做到这一点。任何建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:03:15.763

```
entity e is
port( output1 : out std_logic_vector(22 downto 0));
end entity

architecture rtl of e is
begin
  output1 <= "1000011100101000001111";
end architecture; 
```

你是这个意思吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T17:06:37.090

您需要的是 std_logic_textio 包或类似的东西。

[http://www.vhdl.org/rassp/vhdl/models/standards/std_logic_textio.vhd](http://www.vhdl.org/rassp/vhdl/models/standards/std_logic_textio.vhd)

这里展示了一个很好的例子来说明如何做到这一点：

[http://www.stefanvhdl.com/vhdl/html/file_read.html](http://www.stefanvhdl.com/vhdl/html/file_read.html)

# windows-8 - 在 GridViewItem 上设置 TranslateTransform 动画

> ID：13060649
> 
> 赞同：0
> 
> 时间：2012-10-25T02:15:34.540
> 
> 标签：windows-8, winrt-xaml

我在 GridView 中有一系列项目。

我想为 GridViewItem 的 TranslateTransform 设置动画，使其位于 GridView 的边界之外。当我这样做时，它被剪裁了。这种类型的转换可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:08:00.687

可悲的是，我不这么认为。不久前我不得不做类似的事情，结果发现 GriView（和 ListView、ListBox 等）的模板包含一个`ScrollViewer`控件。关于控件的事情`ScrollViewer`是，它们必须定义一个裁剪的视口来给用户滚动的印象。事实上，如果您要反编译 ScrollViewer 控件，您会看到它对剪裁的边界进行了硬编码，因此您甚至无法更改模板或样式。

自从我对此进行了调查，以及我在 Windows 8 中对 WPF 而不是 XAML 的调查后，事情可能已经发生了变化，但我认为根据您对问题的描述它不会发生变化。

这是与此主题相关的一个 SO 问题：[WPF 剪辑即使不需要剪辑 - 如何将其关闭？](https://stackoverflow.com/questions/4856225/wpf-clipping-even-when-no-clipping-is-desired-how-to-turn-it-off)

# java - 在方法中使用类变量

> ID：13060651
> 
> 赞同：2
> 
> 时间：2012-10-25T02:15:53.220
> 
> 标签：java, class, variables

在java中如何在方法中使用类变量？

这是我的代码

```
public class ExamQ3a {
    String[] descriptionArr = new String[50];
    static int[] codeArr = new int[50];

    public static void displayItems(int count, int[] codeArr,
            String[] descriptionArr) {
        count = this.codeArr.length;
        for (int i = codeArr.length; i < codeArr.length; i--) {

        }
    }
} 
```

这里突出显示的行是 count = this.codeArr.length; 我得到的错误是无法从静态上下文中引用非静态变量。但我已经将变量设为静态。那么给了什么？

所以只根据要求！不是我想问整个问题，只是想知道我为什么要使用静态，这是一个练习题

> 您将开发一个简单的应用程序系统来管理公司的库存。系统应该能够维护最多 50 个项目的列表。每个项目都有一个唯一的整数代码和描述。
> 
> (a) 编写 Java 语句，声明并创建两个数组来存储代码和项目的描述。
> 
> (b) 编写具有以下方法签名的 Java 方法：
> 
> public static void displayItems(int count, int[] codeArr, String[] descriptionArr)
> 
> 此方法以表格形式显示公司所有项目的代码和描述，并带有适当的列标题。
> 
> 参数： codeArr：存储项目代码的数组
> 
> descriptionArr：存储项目描述的数组
> 
> count：系统中的项目数

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T02:16:48.007

静态世界中没有`this`。摆脱它。解释一下，`this`指的是当前**实例**，当您处理静态方法或变量时，您处理的是与类关联的项，而不是任何一个特定实例。所以将代码更改为：

```
count = codeArr.length; 
```

**编辑 1**
顺便说一句，您不希望像`} } }`这样使您的代码很难阅读和遵循的右大括号捆绑在一起。空白是免费的，所以不妨明智地使用它来提高代码的可读性。

**编辑 2**
你说：

> 那么如何将数组 codeArr 引用到类变量 codeArr 呢？

你在类里面，这里没有必要使用类变量名，因为它被假定使用了。只需使用静态变量或方法名称，你就应该是金子了。

**编辑 3**
您对这种类型的变量使用 static 会使代码有异味。我认为如果这是一个实例变量而不是静态变量，那么你的整个程序会好得多。有关这方面的更多讨论，您可以告诉我们您决定将变量设为静态的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T06:35:01.037

还有一点需要注意的是，在下面这段代码**中 statement1**永远不会被执行：

```
for (int i = codeArr.length; i < codeArr.length; i--) { statement1; } 
```

它应该是

```
int length = codeArr.length;
for (int i = 0; i < length; i++) { ... } 
```

或者

```
int length = codeArr.length;
for (int i = (length-1); i > -1 ; i--) { ... } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T02:24:31.870

您是否要引用与方法参数同名的静态变量，您在静态变量前面加上类的名称。在这种情况下，它会是`ExamQ3a.codeArr`。

处理此问题的另一种方法是为方法参数选择不同的名称，或者开始为实例/静态变量使用公共前缀。

# join - Solr Join - 从不同的索引获取数据

> ID：13060653
> 
> 赞同：2
> 
> 时间：2012-10-25T02:16:02.060
> 
> 标签：join, solr, lucene

我正在开展一个项目，我们拥有 200 万种产品，并有 50 个客户采用不同的定价方案。索引 2M X 50 记录目前不是一个选项。我已经查看了 solr join 并且无法让它按照我想要的方式工作。我知道这就像一个自我加入，所以我有点怀疑它是否会起作用，但无论如何它都在这里。

这是示例架构

core0 - 产品 core1 - 客户端

因此，给定一个客户 ID，我想显示所有由 Samsonite 制造的包，按最低价格排序。

如果有更好的方法来解决这个问题，我愿意重新设计令人兴奋的模式。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:54:25.887

Solr 不是关系数据库。您应该查看[分片](http://wiki.apache.org/solr/DistributedSearch)功能并拆分索引。此外，您可以编写自定义插件，以在索引时根据客户的 id/name/whatever 详细说明价格数据（**糟糕**的是，您仍然会为每个客户复制一个产品）。

我们是怎么做的（所以你可以得到一个例子）：

*   客户端由 sqlite 处理
*   产品以其“基本”价格存储在 solr
*   每个客户端在询问数据库时都有一个通过自定义查询处理程序应用的“定价规则”（它只是一个值修饰符）

# linux - 如何通过选择打开具有给定位置的鹦鹉螺

> ID：13060664
> 
> 赞同：1
> 
> 时间：2012-10-25T02:17:52.707
> 
> 标签：linux, nautilus

我们可以在终端中使用给定目录打开 Nautilus，例如：

```
nautilus /home/jeeeyul/workspace 
```

但是，我想打开“/home/jeeeyul”并选择“workspace”并显示它，而不是打开“workspace”目录。我可以从终端执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:14:27.093

Nautilus 可以打开 的父文件夹`workspace`，但不包括控制选择的选项。

我能想到的唯一可能的选项是[`xdotool`](http://www.semicomplete.com/projects/xdotool/)，它可以在窗口中模拟鼠标和键盘事件。

对于鼠标，如果您可以预测`workspace`图标或列表项在 Nautilus 窗口中的位置，您可以使用 来打开具有特定尺寸的窗口`--geometry`，然后使用`xdotool`使鼠标单击该位置。如果您无法预测位置，您也许可以重命名`workspace`为将出现在列表顶部的名称，并让 Nautilus 按名称对项目进行排序……然后在单击后将其重命名。

键盘可能是更好的选择。您可以使用`xdotool`发送键盘命令和/或在 Nautilus 窗口中键入会强制选择的内容。您需要尝试如何操作。（我不知道您使用的是什么版本的 Nautilus，或者该文件夹中可能还有哪些其他文件。）

这些解决方案并不理想。运气好的话，其他对 Gnome 有更深入了解的人会发布一些非常聪明的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-24T23:29:22.663

我不知道这是否是最近添加的，但您可以打开文件夹的父文件夹并使用以下方法选择它：

```
nautilus -s /home/jeeeyul/workspace 
```

这将在 /home/jeeeyul/ 路径中打开 nautilus，并选择工作区文件夹。

只是想添加这个以防其他人仍在寻找解决方案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-25T03:03:54.467

是的，您可以使用终端执行此操作。启动终端后，您必须切换用户，您可以使用 sudo -i 切换为 root 用户，然后使用 nautilus。

# ruby - Ruby：在读取时点击写入？

> ID：13060672
> 
> 赞同：0
> 
> 时间：2012-10-25T02:19:02.627
> 
> 标签：ruby

因此，如果我理解正确，Object#tap 使用 yield 来生成一个临时对象，以便在执行过程或方法期间使用。根据我对产量的了解，它做了类似的事情，产量需要（东西）并给（东西）.dup到附加到它正在使用的方法的块？但是当我这样做时：

```
class Klass
attr_accessor :hash
  def initialize
   @hash={'key' => 'value'}
  end
end

instance=Klass.new
instance.instance_variable_get('@hash')[key] # => 'value', as it should

instance.instance_variable_get('@hash').tap {|pipe| pipe['key']=newvalue}

instance.instance_variable_get('@hash')[key] # => new value... wut? 
```

我的印象是yield -> new_obj。我不知道这是多么正确，我试图在 ruby​​-doc 上查找它，但是 Enumerator::yielder 是空的，yield(proc) 不存在，并且纤维版本......我不有任何纤维，事实上，Ruby 不是明确要求包含“纤维”来使用它们吗？

所以应该是对实例变量的读取方法和对临时变量的写入，而不是对实例变量的读/写......这很酷，因为这就是我试图做的事情并且在我寻找时意外发现一种将哈希作为实例变量处理的方法（对于一些大于我习惯的用于命名变量数组的表），但现在我有点困惑，我找不到使这种情况发生的机制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T02:46:07.507

`Object#tap`再简单不过了：

```
VALUE
rb_obj_tap(VALUE obj)
{
    rb_yield(obj);
    return obj;
} 
```

（来自[文档](http://www.ruby-doc.org/core-1.9.3/Object.html#method-i-tap)）。它只是产生然后返回接收器。IRB 中的快速检查显示`yield`产生对象本身而不是新对象。

```
def foo
  x = {}
  yield x
  x
end

foo { |y| y['key'] = :new_value }
# => {"key" => :new_value } 
```

因此，正如我们所希望的那样， 的行为与`tap`一致。`yield`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T02:29:10.303

`tap`不复制接收器。块变量被分配给接收者本身。然后，`tap`返回接收器。所以当你这样做时`tap{|pipe| pipe['key']=newvalue}`，接收者会`tap`被修改。据我了解，

```
x.tap{|x| foo(x)} 
```

相当于：

```
foo(x); x 
```

和

```
y.tap{|y| y.bar} 
```

相当于：

```
y.bar; y 
```

# ruby-on-rails - 多个文本字段的一个最大长度

> ID：13060677
> 
> 赞同：1
> 
> 时间：2012-10-25T02:20:34.803
> 
> 标签：ruby-on-rails, maxlength

嗨说我有两个文本字段。我只想为他们两个设置一个 maxlength。其中，例如300是最大长度。这适用于两个文本字段。多个字段是否可以有 1 个最大长度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T02:26:34.210

编辑：

您将需要使用 jquery/javascript 和客户端验证。作为起点

就像是

```
$('#text_field_1, #text_field_2').blur(function(){
  if($('#text_field_1').val() + $('#text_field_2').val() > 300){
    alert("Text Field max length has been reached");
  }
}); 
```

在该示例的基础上，您将希望在表单提交 $().submit 上有一个侦听器，该侦听器将返回 false，显示错误消息，如果最大长度大于允许的长度，则停止提交表单。

# asp.net - 无法停止为静态内容触发 ASP.NET 模块

> ID：13060678
> 
> 赞同：6
> 
> 时间：2012-10-25T02:20:35.303
> 
> 标签：asp.net, iis

我在 ASP.NET MVC 应用程序中有一个模块。该模块工作正常，但它会触发包括静态内容在内的每种类型的文件，即使我有：

```
<modules  runAllManagedModulesForAllRequests="false">
    <add name="MyModule" ... / >
</modules> 
```

该模块挂钩 AcquireRequestState 和 PostRequestHandlerExecute 事件，并且都显示静态内容触发（.htm、.css、.png 等）。

我的印象是 runAllManagedModulesForAllRequests="false" 应该阻止模块在非 ASP.NET 内容上触发。

澄清：

我**可以这样**设置 preCondition="managedHandler" ：

```
<add name="MyModule" type="MyApp.MyModule" preCondition="managedHandler" /> 
```

并让我的模块只触发托管请求。

但是，我试图理解为什么 IIS 管道通常会为每个请求触发托管模块命中。我认为这在旧版本中工作得很好，除非 runAllManagedModulesForAllRequests="true" 它不会将非托管内容触发到 ASP.NET 模块中。

在 Windows 8 64 位模式下的 IIS8 上运行，具有集成管道模式。

**更新：**

经过更多研究，事实证明以下内容是正确的：

*   如果 runAllManagedModulesForAllRequests="true" 所有模块 - 无论它们的 preCondition 属性设置如何在所有请求上触发。这对于在 HttpApplication 上实现的 Application_XXXX 事件也是如此
*   runAllManagedModulesForAllRequests="false" 无法阻止非托管请求命中模块，*除非*设置了 preCondition="managedHandler"
*   runAllManagedModulesForAllRequests="false" 确实会影响 Application_XXXX 事件，导致这些事件仅在托管请求上触发。IOW，Application_XXXX 的行为就好像“模块”实现有一个 preCondition="managedHandler"

有关这方面的更多详细信息，我发布了一篇博客文章： [http ://www.west-wind.com/weblog/posts/2012/Oct/25/Caveats-with-the-runAllManagedModulesForAllRequests-in-IIS-78](http://www.west-wind.com/weblog/posts/2012/Oct/25/Caveats-with-the-runAllManagedModulesForAllRequests-in-IIS-78)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T04:19:23.580

在 IIS7 中，Microsoft 引入了一种使用托管 (.NET) 代码（而不仅仅是本机代码）开发模块和处理程序的新方法。问题是在托管代码和本机代码之间切换请求非常昂贵，因此微软引入了`preCondition="managedHandler"`. 它将模块标记为仅可用于托管内容请求（.aspx、.asmx、...），因此 IIS 避免为静态内容触发它。

现在，您可能会遇到想要修改静态内容请求的情况，例如动态缩小 JavaScript。您可以使用 C# 编写模块并将其编译为托管模块，但您希望它针对静态内容被触发，因此您只需不要将其标记为`managedHandler`.

最后，`runAllManagedModulesForAllRequests="true"`用于覆盖`preCondition="managedHandler"`，因此所有这些都会被解雇。

更多信息请访问：
[http ://www.iis.net/learn/get-started/introduction-to-iis/iis-modules-overview#Precondition](http://www.iis.net/learn/get-started/introduction-to-iis/iis-modules-overview#Precondition)

# jquery - 如何使用 jQuery Form Plugin 使用多个表单或对象？

> ID：13060680
> 
> 赞同：1
> 
> 时间：2012-10-25T02:20:44.730
> 
> 标签：jquery, forms, plugins

我进行了很多搜索，但无法准确找到我想要做的事情，尽管它与已经回答的类似标题的帖子有关。

我正在使用 jQuery 表单插件。

一个输入/文本框和一个搜索按钮在页面下方的 div 中显示结果。

但是，我想在第一个输入区域下方添加 3 个按钮，它们是“流行标签”（按钮上表示为文本的值彼此不同），当单击一个时，下面 div 中的结果会被修改根据按钮的名称值。

我的问题是我不知道如何利用单独的对象或表单来完成它。

```
$(document).ready(function() {
var options = { 
    target:     '#searchResults', 
    url:        'ajax/getResults.php', 
    type:   'POST',
};
$('#searchForm').ajaxForm(options);
}); 
```

网络上没有任何内容说明如何添加不同的对象或元素，例如：

```
var options2 = { //... 
```

然后怎么绑定。可不可能是：

```
$('#searchForm').ajaxForm(options, options2); 
```

或者

```
$('#searchForm').ajaxForm(options);
$('#searchForm').ajaxForm(options2); 
```

或者是其他东西？

然后，我看到一个提到如何添加两个表单，例如：

```
$('#searchForm1','#searchForm2').ajaxForm(options); 
```

但是，这令人困惑，因为为什么两种不同的形式都具有相同的 var 选项，如果它们没有，那么它们又是如何参与的等等？

“getResults.php”使用

```
$searchedTerm = $_REQUEST['searchBox']; 
```

获取在该框中输入的内容以在年龄上降低 div。

如果我尝试使用相同的请求放置第二个提交按钮并获取其值，

```
$popTagBtn1 = $_REQUEST['popTagBtnNameValue1']; //name and id of second button in form 
```

它在使用时返回一个空值

```
echo $_REQUEST['popTagBtnNameValue1']; 
```

如果我尝试使用多种形式分开......再次，我不知道如何正确绑定它们并让它实际回显另一个按钮的值或名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:37:20.863

尝试

```
var allForms = $("form"); 
```

这得到数组中的所有表格

# php - .htaccess 中的 RewriteRule 不起作用

> ID：13060683
> 
> 赞同：2
> 
> 时间：2012-10-25T02:22:15.993
> 
> 标签：php, apache

我从来没有使用过像“漂亮的网址”这样的东西，但我必须解决这个问题，我只是不知道怎么做。所以我在php中有这个功能：

```
function niceUrl()
{
    // getting variable based on .htaccess
    $request = $_GET['tlederPageId'];
    var_dump($request);
    $vars = explode("/", $request);

    return $vars;
} 
```

而这个 var_dump 只打印 NULL

这在.htaccess中：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*)(.*)/?$ index.php?tlederPageId=$1&%{QUERY_STRING} 
```

而且我不知道这应该如何工作。我什至不知道去哪里寻求帮助。有人可以向我解释一下吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:55:18.097

好吧，让我们分解您提供的帖子：“漂亮的网址”：通常定义为 SEO 友好的网址，它描述了两件事

1、特定类别

2、该类别的特定主题

（注）这并不意味着你的主题必须有一个类别

使用上面的示例，一个漂亮的 URL 可能包含如下内容： [http ://www.animals.com/dogs/](http://www.animals.com/dogs/)

使用上面的示例二，一个漂亮的 URL 可能包含如下内容： [http ://www.animals.com/dogs/bulldogs/](http://www.animals.com/dogs/bulldogs/)

使用上面的“注释”：拥有一个相对域名不一定要有一个类别才能拥有一个主题；类似于： [http ://www.bulldogs.com/american-bulldogs/](http://www.bulldogs.com/american-bulldogs/)

关于您的“.htaccess”，这行对我来说似乎很奇怪：

```
RewriteRule (.*)(.*)/?$ index.php?tlederPageId=$1&%{QUERY_STRING} 
```

因为`(.*)(.*)`have 与说 [ANYTHING + ANYTHING = ANYTHING] 相同，尽管您的 .htaccess 会将任何请求转发到根目录中名为 index.php 的文件，其中 $_GET 变量为 tlederPageId 以及任何其他查询字符串通过了。

然后，您的工作就是确保传递给的 URL 首先通过 apache 然后通过 php 进行验证。

例如：如果您捕获“tlederPageId”并通过 PHP 对变量进行了一些预处理并确定 URL 无效（例如：[http](http://www.bulldogs.com/boxers/) ://www.bulldogs.com/boxers/ ），这是您的有责任抛出 404，如果有人传递了一个有效的 URL，您将接受该 URL 作为 200 OK。这些需要在 php 标头中设置。

# c# - DotNetOpenAuth 在修改后编译但在运行示例项目时抛出运行时异常

> ID：13060684
> 
> 赞同：8
> 
> 时间：2012-10-25T02:22:17.650
> 
> 标签：c#, visual-studio-2012, dotnetopenauth

我从 GitHub 下载了最新的 DotNetOpenAuth 代码，但最初构建失败。我通过运行以下命令解决了这个问题：

```
sn -Vr *,2780ccd10d57b246 
```

在这里找到：

[http://www.dotnetopenauth.net/developers/contributing/quickstart-environment/](http://www.dotnetopenauth.net/developers/contributing/quickstart-environment/)

我继续对项目 DotNetOpenAuth.AspNet 进行了一些修改。它编译得很好。然后我在示例下创建了一个 MVC 4 Web 项目来测试我的更改。再次编译解决方案。但是，一旦我单击调试，我就会得到 ASP.NET 黄屏死机，并出现以下错误：

*无法加载文件或程序集“DotNetOpenAuth.AspNet”或其依赖项之一。无法验证强名称签名。程序集可能已被篡改，或者它被延迟签名但未使用正确的私钥完全签名。（来自 HRESULT 的异常：0x80131045）*

MVC 4 项目是从空模板创建的，因此没有对 Microsoft.Web.WebPages.OAuth 的引用

我错过了什么？我完成了上面链接中的其余步骤：

```
sn -k mykeyfile.pfx 
sn -i mykeyfile.pfx mykeycontainer
sn -p mykeyfile.pfx mykeyfile.pub 
sn -q -t mykeyfile.pub
sn -Vr *,<YourPublicKeyTokenHere> 
```

并且还修改了文件 \tools\DotNetOpenAuth.props，特别是行：27,29,30 与新值

```
26\. <SignAssembly>true</SignAssembly>
27\. <PublicKeyFile Condition="'$(PublicKeyFile)' == ''">$(ProjectRoot)src\official-build-key.pub</PublicKeyFile>
28\. <AssemblyOriginatorKeyFile Condition="'$(AssemblyOriginatorKeyFile)' == ''">$(PublicKeyFile)</AssemblyOriginatorKeyFile>
29\. <KeyPairContainer Condition="'$(KeyPairContainer)' == ''">DotNetOpenAuth</KeyPairContainer>
30\. <PublicKeyToken>2780ccd10d57b246</PublicKeyToken>
31\. <DelaySign>true</DelaySign>
32\. <SignedSubPath>signed\</SignedSubPath> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T03:38:58.757

不需要修改 props 文件。问题可能在于您使用的是 64 位计算机，而`sn`您运行的命令仅影响 32 位注册表。然后在运行时失败，因为您在 64 位注册表上运行网站，其中没有跳过验证条目。

执行此操作的“正确”方法是安装 64 位 Windows SDK，以便您获得 64 位 sn.exe 并运行该命令。但是，这是快速简便的方法：

查看您的 reg 密钥的值：`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\StrongName\Verification\*,2780ccd10d57b246`

并将该密钥复制到

`HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\StrongName\Verification\*,2780ccd10d57b246`

然后重新启动所有相关进程（MSBuild.exe、devenv.exe、iis、WebDAV 或任何托管您的网站并报告错误的进程）。它应该开始为你工作。

# objective-c - insertObject: atIndex: - 空数组的索引 3 超出范围

> ID：13060688
> 
> 赞同：2
> 
> 时间：2012-10-25T02:22:52.677
> 
> 标签：objective-c, ios, nsmutablearray, nsarray, nsdictionary

我根据字典键创建一个数组：

```
factsBuiltArray = [NSMutableArray arrayWithCapacity: 6];
if ([statusDict count] == 10) {
    for (NSString *key in [statusDict allKeys]) {
        if ([key isEqualToString: @"currenciesAndConversions"]) {
            [factsBuiltArray insertObject:key atIndex: 0];
        }
        else if ([key isEqualToString: @"languageAndTranslations"]) {
            [factsBuiltArray insertObject:key atIndex: 1];
        }
        else if ([key isEqualToString: @"plugSize"]) {
            [factsBuiltArray insertObject:key atIndex: 2];
        }
        else  if ([key isEqualToString: @"timezone"]) {
            [factsBuiltArray insertObject:key atIndex: 3]; // crashes over here
        }
        else if ([key isEqualToString: @"population"]) {
            [factsBuiltArray insertObject:key atIndex: 4];
        }
        else if ([key isEqualToString: @"wikipedia"]) {
            [factsBuiltArray insertObject:key atIndex: 5];
        }
    }
} 
```

崩溃日志是：

```
*** -[__NSArrayM insertObject:atIndex:]: index 3 beyond bounds for empty array 
```

为什么将对象插入指定容量为 6 的数组会导致崩溃？非常混乱！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T02:32:55.700

容量只是一个容器类可以容纳多少个对象。在索引处插入要求该索引是基于容器中包含的对象总数（而不是可以包含的对象总数）的新对象的有效放置。

如果您的数组的值依赖于索引（这似乎可能是不同的架构或数据结构会更好），那么您可以通过使用 NSNull 预填充数组来确保填充每个索引。这将要求您稍后在从数组中读取时检查 NSNulls，尽管这可能是额外的工作，因此为什么这可能不是最好的方法。在任何情况下，您都可以将代码更改为以下内容以修复崩溃。

```
factsBuiltArray = [NSMutableArray arrayWithCapacity: 6];

for (NSUInter i = 0; i < 6; i++) {
    [factsBuiltArray addObject:[NSNull null]];
}

if ([statusDict count] == 10) {

    for (NSString *key in [statusDict allKeys]) {

        if ([key isEqualToString: @"currenciesAndConversions"]) {

            [factsBuiltArray replaceObjectAtIndex:0 withObject:key];
        }
        else if ([key isEqualToString: @"languageAndTranslations"]) {

            [factsBuiltArray replaceObjectAtIndex:1 withObject:key];
        }
        else if ([key isEqualToString: @"plugSize"]) {

            [factsBuiltArray replaceObjectAtIndex:2 withObject:key];
        }
        else  if ([key isEqualToString: @"timezone"]) {

        [factsBuiltArray replaceObjectAtIndex:3 withObject:key];

        }
        else if ([key isEqualToString: @"population"]) {

            [factsBuiltArray replaceObjectAtIndex:4 withObject:key];
        }
        else if ([key isEqualToString: @"wikipedia"]) {

            [factsBuiltArray replaceObjectAtIndex:5 withObject:key];
        }
    }
} 
```

# c# - 标签不为空时隐藏按钮

> ID：13060689
> 
> 赞同：2
> 
> 时间：2012-10-25T02:23:07.257
> 
> 标签：c#, wpf

我正在使用 WPF。

我想在标签不为空时显示按钮。当 Label 有值时，按钮将被隐藏。

如何使用 WPF 做到这一点？使用`<Style>`?

代码：

```
<Label Name="lblCustomerName"/>
<Button Name="btnCustomer" Content="X" Visibility="Hidden" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T02:29:13.860

尝试

```
 if (string.IsNullOrEmpty(lblCustomerName.Text)) { 
    btnCustomer.Visibility = Visibility.Hidden;
} 
else {
    btnCustomer.Visibility = Visibility.Visible;
}
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T05:00:21.467

您将需要使用转换器并将其绑定到 lblCustomer 的内容。

```
public class ContentNullToVisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value == null)
        {
            return Visibility.Hidden;
        }
        return Visibility.Visible;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

更多关于转换器[的信息](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)。

然后在 xaml 中，您可以执行以下操作：

第一行需要在您的资源中定义，您需要使用您在其中创建上述类的命名空间对其进行限定。定义资源后，您可以使用第二部分。

```
<ContentNullToVisibilityConverter x:Key="visConverter"/>

<Label Name="lblCustomerName"/>
<Button Name="btnCustomer" Content="X" Visibility="{Binding ElementName=lblCustomer, Path=Content, Converter={StaticResource visConverter}}" /> 
```

# css - 悬停时奇怪的“摆动”菜单

> ID：13060690
> 
> 赞同：0
> 
> 时间：2012-10-25T02:23:19.480
> 
> 标签：css, css-transitions

我在一个网站上工作，我有一个很大的 css 问题；悬停时，我的菜单以一种非常奇怪的方式“摆动”。css / html 代码本身运行良好，但是一旦我在真实站点中实现滑块，它的行为就会不同。它可能是一个 css 问题，但还要注意的是我的网站是建立在响应式主题上的。任何知道如何解决此问题的人请让 kme 知道。谢谢。这是该[网站的链接](http://blanketsandwine.com/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:00:45.017

当您说“摆动”时，您是指它们从左上角开始然后斜向右下角增长的效果吗？那是 jQuery 的“.show”事件触发。尝试用“.slideToggle”替换它。

不幸的是，您使用的 Wordpress 模板非常混乱，因此很难排除故障。

# html-table - 如何制作一个有 3、2 和 1 列的表格来填满整个表格？

> ID：13060691
> 
> 赞同：3
> 
> 时间：2012-10-25T02:23:35.410
> 
> 标签：html-table, html-email

> **免责声明：**我通常不使用表格进行布局，但它们似乎是 html 电子邮件的最佳选择。相信我，在电子邮件中玩 div 更糟糕。我正在寻找最好的解决方法，我对如何设计没有太多限制......

我快到了，但以下代码有问题：

```
<table border=1 width="600px">
  <tbody>
    <tr height="140px">
      <td width="210px"></td>
      <td width="180px"></td>
      <td width="210px"></td>
    </tr>
    <tr height="200px">
      <td colspan="3"></td>
    </tr>
    <tr height="100px">
      <td colspan="3"></td>
    </tr>
    <tr height="300px">
      <td width="300px"></td>
      <td></td>
    </tr>
  </tbody>
</table> 
```

[jsfiddle](http://jsfiddle.net/MKL3r/embedded/result/)

我的具体问题是最后一个单元格，我希望他们将表格的空间分别划分为 50%。

如您所见，我将最后`<td>`一个单元格的宽度修改为 300px（表格的一半），但这也修改了第一个单元格的宽度，这是不希望的结果，我希望前三个`td`保持 210px、180px、210px部分。

为了以防万一，这里有一个草图：

![在此处输入图像描述](../Images/ec134e4c58069d385b10ea54cd6abb95.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T02:35:23.173

如果您必须使用表格 - 除非您正在显示表格数据，否则您真的不应该使用表格 - 那么在我看来，这里的解决方案是让第一行成为一个单元格并在其中嵌套另一个表格，单元格宽度一样多根据需要。所以：

```
<table>
<tr><td colspan="2">
    <table><tr>
        <td width="210"></td>
        <td width="180"></td>
        <td width="210"></td>
    </tr></table>
</td></tr>
<tr><td colspan="2"></td></tr>
<tr><td colspan="2"></td></tr>
<tr><td width="50%"></td><td width="50%"></td></tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T02:41:55.303

创建一个表，其中每列代表每个可能的划分，然后自由地使用 colspan。因此，总共 4 列可能会在 210、300、490 和 600 处中断。

然后你希望第一行跨越 1、2、1，所有的全长跨越 4，然后一半和一半跨越 2 和 2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T02:30:04.267

你不能用一张桌子做到这一点。列将始终排列。如果这是针对其他内容的布局，那么您确实需要查看基于 div 的布局。

如果您必须使用表格：

```
<table border=1 width="600px">
    <tbody>
        <tr height="140px">
            <td width="210px"></td>
            <td width="180px"></td>
            <td width="210px"></td>
        </tr>
        <tr height="200px">
            <td colspan="3"></td>
        </tr>
        <tr height="100px">
            <td colspan="3"></td>
        </tr>
        <tr height="300px">
            <td colspan="3">
                <table>
                    <tr>
                        <td width="300"></td>
                        <td width="300"></td>
                    </tr>
                </table>
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-25T02:28:12.020

DIV 在这里将是更好的解决方案。你确定你需要一张桌子吗？也许，div？

# jmeter - 如何在 JMeter 中由单个用户读取 csv 的每一行？

> ID：13060694
> 
> 赞同：2
> 
> 时间：2012-10-25T02:24:01.473
> 
> 标签：jmeter

我有一个包含 10 个服务器名称的 CSV 文件。我想通过我的线程组的每个线程读取整个 10 行。

```
Thread 1 reads row1,row2....row 10  
Thread 2 reads row1,row2....row 10 
```

但目前我的测试脚本读取文件如下，

```
Thread 1 reads row1  
Thread 2 reads row2  
Thread 3 reads row3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:57:35.897

有两种选择：

*   共享模式=当前线程的[CSV 数据集配置](http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config)
*   [CSV 文件中的变量](http://code.google.com/p/jmeter-plugins/wiki/VariablesFromCSV)

阅读文档，看看哪一个更适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-21T12:48:11.727

使用以下函数代替变量：

```
${__FileToString(/path/to/your/file,,)} 
```

您不需要使用 CSV 阅读器，因为您希望将整个文件内容存储在变量中。下图说明了如何将整个文件内容作为参数值传递给 HttpRequest。

![在此处输入图像描述](../Images/08162bd1bf19b14301134aaa473a86ad.png)

# c++ - Arduino类重定义错误

> ID：13060699
> 
> 赞同：3
> 
> 时间：2012-10-25T02:25:00.543
> 
> 标签：c++, class, arduino, header-files, redefinition

在我的 Arduino IDE 中，我设置了一个通过移位寄存器运行八个 LED 的程序，现在我正在尝试创建一个类来控制移位寄存器。到目前为止，我已经创建了文件并为该类创建了一个带有一些函数的构造函数，但是当我尝试验证代码时，IDE 说我正在重新定义类 shiftreg，这是错误消息：

```
In file included from Lab9_step3.cpp:97:
shiftreg.h:2: error: redefinition of 'class shiftreg'
shiftreg.h:3: error: previous definition of 'class shiftreg' 
```

我的lab_9代码是：

```
 /*     ---------------------------------------------------------
 *     |  Arduino Experimentation Kit Example Code             |
 *     |  CIRC-05 .: 8 More LEDs :. (74HC595 Shift Register)   |
 *     ---------------------------------------------------------
 * 
 * We have already controlled 8 LEDs however this does it in a slightly
 * different manner. Rather than using 8 pins we will use just three
 * and an additional chip.
 *
 *
 */
#include "shiftreg.h"

//Pin Definitions
//Pin Definitions
//The 74HC595 uses a serial communication 
//link which has three pins
shiftreg a(2, 3, 4);

int sensorPin = 0;    // select the input pin for the potentiometer
int sensorValue = 0;  // variable to store the value coming from the sensor

/*
 * setup() - this function runs once when you turn your Arduino on
 * We set the three control pins to outputs
 */
void setup()
{
  a.pinmode();
}

/*
 * loop() - this function will start after setup finishes and then repeat
 * we set which LEDs we want on then call a routine which sends the states to the 74HC595
 */
void loop()                     // run over and over again
{ 
   for(int i = 0; i < 256; i++){
   a.update(i);

    // read the value from the sensor:
    sensorValue = analogRead(sensorPin); 

   delay(sensorValue); 
  }
}

    /******************************

    /*
     * updateLEDsLong() - sends the LED states set in ledStates to the 74HC595
     * sequence. Same as updateLEDs except the shifting out is done in software
     * so you can see what is happening.
     */ 
//    void updateLEDsLong(int value){
//      digitalWrite(latch, LOW);    //Pulls the chips latch low
//      for(int i = 0; i < 8; i++){  //Will repeat 8 times (once for each bit)
//      int bit = value & B10000000; //We use a "bitmask" to select only the eighth 
//                                   //bit in our number (the one we are addressing this time thro
//                        //ugh
//      value = value << 1;          //we move our number up one bit value so next time bit 7 will
//                        // be
//                                   //bit 8 and we will do our math on it
//      if(bit == 128){digitalWrite(data, HIGH);} //if bit 8 is set then set our data pin high
//      else{digitalWrite(data, LOW);}            //if bit 8 is unset then set the data pin low
//      digitalWrite(clock, HIGH);                //the next three lines pulse the clock pin
//      delay(1);
//      digitalWrite(clock, LOW);
//      }
//      digitalWrite(latch, HIGH);  //pulls the latch high shifting our data into being displayed
//    }
//    
//    
//    //These are used in the bitwise math that we use to change individual LEDs
//    //For more details http://en.wikipedia.org/wiki/Bitwise_operation
//    int bits[] = {B00000001, B00000010, B00000100, B00001000, B00010000, B00100000, B01000000, B10000000};
//    int masks[] = {B11111110, B11111101, B11111011, B11110111, B11101111, B11011111, B10111111, B01111111};
//    /*
//     * changeLED(int led, int state) - changes an individual LED 
//     * LEDs are 0 to 7 and state is either 0 - OFF or 1 - ON
//     */
//     void changeLED(int led, int state){
//       ledState = ledState & masks[led];  //clears ledState of the bit we are addressing
//       if(state == ON){ledState = ledState | bits[led];} //if the bit is on we will add it to le
//                        //dState
//       updateLEDs(ledState);              //send the new LED state to the shift register
//     }
//     **********************************/ 
```

我的 shiftreg.h 代码是：

```
/*Shift Register
*/               (Error occurs here)
class shiftreg   (and here)
{
  private:
    //Pin Definitions
    //Pin Definitions
    //The 74HC595 uses a serial communication 
    //link which has three pins
    int data; 
    int clock;
    int latch;

  public:
  shiftreg (int _data, int _clock, int _latch);
  void update(int value);
  void pinmode();
}; 
```

我的 shiftreg.cpp 代码是：

```
#include "shiftreg.h"

/*shiftreg constructor:
*/
shiftreg::shiftreg (int _data, int _clock, int _latch)
{
    data = _data; 
    clock = _clock;
    latch = _latch;

    //Used for single LED manipulation
    int ledState = 0;
    const int ON = HIGH;
    const int OFF = LOW;
}

/*
 * updateLEDs() - sends the LED states set in ledStates to the 74HC595
 * sequence
 */
void shiftreg::update(int value)
{
  digitalWrite(latch, LOW);     //Pulls the chips latch low
  shiftOut(data, clock, MSBFIRST, value); //Shifts out the 8 bits to the shift register
  digitalWrite(latch, HIGH);   //Pulls the latch high displaying the data
}

/*
*/
void shiftreg::pinmode()
{
    pinMode(data, OUTPUT);
    pinMode(clock, OUTPUT);
    pinMode(latch, OUTPUT);
} 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T02:49:54.480

根据您`shiftreg.h`在第 97 行包含的错误消息`Lab9_step3.cpp`。上面的 96 行是什么？错误可能就在其中的某个地方。

如果我不得不猜测，我会说您直接或间接地包含`shiftreg.h`两次（或更多） in `Lab9_step3.cpp`，并且发生错误是因为您的头文件中没有包含保护。

尝试将以下内容添加到`shiftreg.h`

```
#ifndef SHIFTREG_H
#define SHIFTREG_H

class shiftreg
{
  // ...
};

#endif 
```

# objective-c - 什么时候会调用 viewWill/DidAppear/Disappear 以及它是如何工作的？

> ID：13060700
> 
> 赞同：0
> 
> 时间：2012-10-25T02:25:11.250
> 
> 标签：objective-c, xcode4.5

我知道当视图即将出现时会调用 viewWillAppear 。

但是IOS怎么知道一个控制器的视图即将出现呢？

究竟是什么时候以及它是如何实施的？

例如， childController.view 是否首先检查窗口是否是它的超级祖先之一？视图是否有指向它的控制器的指针？这究竟是如何工作的？是否每次添加视图时都会检查它的窗口是否是超级祖先以及它是否是 UIViewController 的视图出口？

例如，如果我添加 childcontroller.view 但不添加到任何正在调用的视图的子视图中。会调用 viewWillAppear 吗？

childController 是否需要是 parentController 的子节点，以便在自动调用 parentController 的 viewWillAppear 时调用 childController 的 viewWillAppear？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T02:34:20.780

视图由您的控制器使用该`- (void)loadView`方法加载。实现此方法以从 nib/storyboard 加载空白视图或视图。如果您确实需要从头开始创建视图层次结构，则只需要覆盖它。

`view`当第一次请求属性的值并且控制器检测到值是时，所有的魔法都会发生`nil`。所有的生命周期方法调用都由 UIViewController 处理。除了在需要时实现这些方法之外，您无需做任何事情。`- (void)viewDidLoad`记住一件事：在调用方法之前，不能保证视图已经加载。

我所了解的关于控制器如何工作的一切都来自[View Controller Programming Guide](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html)。

# objective-c - XCode 的自定义编译器

> ID：13060703
> 
> 赞同：1
> 
> 时间：2012-10-25T02:26:22.713
> 
> 标签：objective-c, xcode, macos

如何将 LLVM 3.1 添加到 XCode（带有 LLVM 4.2 的 4.5 版）？有一个标志（默认 com.apple.compilers.llvm.clang.1_0），但我不知道如何使用它......

# php - 从php中的日期只获取星期三和星期四

> ID：13060706
> 
> 赞同：0
> 
> 时间：2012-10-25T02:26:37.670
> 
> 标签：php, date, filter, days

我遇到了一些常规...我的数据库中保存了单独的日期。我正在输出它们进行编辑，我需要能够只选择一个单独的日子（例如星期三）或不同的日子（例如星期四和星期五）并在我的输出中过滤它们。我以前从未这样做过，也不知道该怎么做。我正在从数据库中以简单的 while 循环输出日期：

```
$today = date("Y-m-d");
$getRates = mysql_query("SELECT * FROM rates WHERE hotel_id = '$hotelId' AND contract_id = '$contractId' AND room_id='$roomId' AND DATE(booking_date) >= '$today'") or die(mysql_error());
while($room = mysql_fetch_array($getRates)){
    $bdat = $room['booking_date'];
    $bdate = date('m/d/Y', strtotime($bdat));
    echo "<tr><td><input type='checkbox' name='date' value='$bdate' checked='checked' /></td>";
    echo "<td>$bdate</td>";
    echo "</tr>";
    }} 
```

这是我的过滤器：

```
<input type="checkbox" value="1" checked="checked" name="Monday" />Lunes
<input type="checkbox" value="2" checked="checked" name="Tuesday" />Martes
<input type="checkbox" value="3" checked="checked" name="Wednesday" />Miercoles
<input type="checkbox" value="4" checked="checked" name="Thursday"/>Jueves
<input type="checkbox" value="5" checked="checked" name="Friday"/>Viernes
<input type="checkbox" value="6" checked="checked" name="Saturday"/>Sabado
<input type="checkbox" value="7" checked="checked" name="Sunday"/>Domingo
<input type="submit" name="filter" value="Filtar Dias" /> 
```

非常感谢有关此主题的任何帮助。我真的不知道该怎么做。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:05:17.827

一种选择可能是使用 dayname 函数：

SELECT * FROM `table_name`WHERE DAYNAME(yourdatecolumn) = 'Tuesday';

[http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_dayname](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_dayname)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T02:34:08.067

```
 SELECT * FROM mytable WHERE DAYOFWEEK(some_event_date) = 7; 
```

# javascript - 带有 XML 有效负载的 Jquery POST 调用

> ID：13060708
> 
> 赞同：2
> 
> 时间：2012-10-25T02:26:43.320
> 
> 标签：javascript, jquery, xml, post

我必须提供一项服务，该服务需要以下输入消息才能成功调用。我使用 curl 调用了该服务。

```
POST /airavata-registry-rest-services/registry/api/hostdescriptor/save HTTP/1.1
User-Agent: curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3
Host: 127.0.0.1
Accept: text/plain
Content-Type: text/xml
Content-Length: 191

<type:hostDescription xmlns:type="http://schemas.airavata.apache.org/gfac/type">
   <type:hostName>LocalHost11</type:hostName>
   <type:hostAddress>127.0.0.1</type:hostAddress></type:hostDescription> 
```

我使用的 curl 命令是；

```
curl -H "Accept: text/plain" -X POST -H "Content-Type: text/xml" -d '<type:hostDescription xmlns:type="http://schemas.airavata.apache.org/gfac/type"><type:hostName>LocalHost11</type:hostName><type:hostAddress>127.0.0.1</type:hostAddress></type:hostDescription>' http://localhost:6060/airavata-registry-rest-services/registry/api/hostdescriptor/save 
```

我正在尝试通过 Jquery 调用相同的服务，但无法生成相同的请求。我写的代码是；

```
 var hostName = $("#hostName1").val();
    var hostAddress = $("#hostAddress1").val();
    var xml = $('<type:hostDescription xmlns:type="http://schemas.airavata.apache.org/gfac/type"><type:hostName>' + hostName + '</type:hostName><type:hostAddress>' + hostAddress + '</type:hostAddress></type:hostDescription>');

    var xmlData= $(xml);
    var xmlString;
    if (window.ActiveXObject){
        xmlString = xmlData.xml;
    } else {
        var oSerializer = new XMLSerializer();
        xmlString = oSerializer.serializeToString(xmlData[0]);
    }
    console.log(xmlString);

    $.ajax({
        headers: {
            Accept : "text/plain; charset=utf-8",
            "Content-Type": "text/plain; charset=utf-8",
            "Accept-Encoding" : ""
        },
        type: "POST",
        url: "http://localhost:6060/airavata-registry-rest-services/registry/api/hostdescriptor/save",
        data: xmlString,
        dataType: "xml",
        cache: false,
        error: function() { alert("No data found."); },
        success: function(xml) {
            alert("it works");
        }
    }).done(function( msg ) {
                alert( "Data Saved: " + msg );
            }); 
```

上述方法生成的请求如下所示。它也缺少消息正文。您能否建议我如何更改我的 jquery 函数来调用上述服务。

```
OPTIONS /airavata-registry-rest-services/registry/api/hostdescriptor/save HTTP/1.1
Host: 127.0.0.1
Connection: keep-alive
Access-Control-Request-Method: POST
Origin: http://localhost:7080
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/536.11 (KHTML, like Gecko) Ubuntu/12.04 Chromium/20.0.1132.47 Chrome/20.0.1132.47 Safari/536.11
Access-Control-Request-Headers: origin, contenttype, content-type, accept
Accept: */*
Referer: http://localhost:7080/client-api-demo/x_host_descriptor_save.html
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:25:17.573

我只是注意到在您的 curl 请求中传递的 Content-Type 与您的 AJAX 请求有所不同。

curl 请求使用以下 Content-Type：

```
"Content-Type: text/xml" 
```

在标题中，您可以这样设置：

```
headers: {
            Accept : "text/plain; charset=utf-8",
            "Content-Type": "text/xml; charset=utf-8"
        }, 
```

另外我相信您在传递数据时没有包括参数名称。您的数据可能会使用它所属的参数进行设置，具体取决于您在服务中期望的名称：

```
data: { inputxml: escape(xmlString)} 
```

希望这可以帮助！

# sharepoint-2010 - FBA _Layouts 文件夹权限问题

> ID：13060709
> 
> 赞同：0
> 
> 时间：2012-10-25T02:27:19.477
> 
> 标签：sharepoint-2010

刚刚在使用 FBA 的网站上的 _layouts 文件夹中创建了一个页面。每当我尝试访问新页面时，我都会收到“拒绝访问”。如何在 _layouts 文件夹中的页面上设置权限？这对我来说很好，它是公开的和可用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:42:42.413

希望我正确理解了这个问题。如果没有，请随时发表评论

您可以尝试使用 UnsecuredLayoutsPageBase 派生您的页面，以便它可以打开以供匿名访问。尝试此链接以获取更多信息 [http://dishasharepointworld.blogspot.in/2011/07/how-to-create-sharepoint-application_1072.html](http://dishasharepointworld.blogspot.in/2011/07/how-to-create-sharepoint-application_1072.html)

干杯VJ

# php - 带有 PHP 身份验证脚本的 Javascript 登录页面 - 哪个实现最好？

> ID：13060712
> 
> 赞同：1
> 
> 时间：2012-10-25T02:27:52.707
> 
> 标签：php, javascript, ajax, model-view-controller, front-controller

我为我的 HTTP 文件服务器编写了一个有效的 php 身份验证脚本。现在，我想用一些漂亮的图形编写一个登录页面。我通常用 HTML5、javascript 和 CSS 编写我的页面。我不确定如何实现 php 身份验证脚本。到目前为止，我有两种我认为我知道的方法：

1.  用 html5 和 javascript 编写登录页面，在用户在输入框中输入名称/密码后使用 ajax 调用 php 脚本，将用户名和密码传递给脚本，并让 php 根据该用户是否经过身份验证返回真或假. 问题是，我不知道如何让 php 返回 true 或 false 到 javascript。

2.  编写一个 PHP 前端控制器模型，其中 index.php 为图形加载 html5、javascript 和 css，如果用户通过身份验证，则重定向到 html 文件服务器的普通 index.html 文档。这个问题是我不熟悉使用 php 作为前端控制器，我不知道我是否可以使用 javascript 动态更改元素以获得特殊效果，就像它是一个普通的 html5 页面一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:38:46.827

您可以使用[jQuery](http://api.jquery.com)库来发出 Ajax 请求。请求看起来是这样的（它是 javascript）：

```
function submitLogin(enteredUsername, enteredPassword) {

  $.post('login.php', {username: enteredUsername, password:enteredPassword},   
  function(response) {
      if (response.result == true) {
         // success code here
      } else {
         // fail code here
      }
  }, 'json');
} 
```

login.php 文件应包含以下代码：

```
<?php

$username = $_POST['username'];
$password = $_POST['password'];
//... check username and password here
echo json_encode(array('result' => true)); // this is response, true or false
exit;

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:33:38.537

在 freenode 上做了很多询问之后，我发现最好将文档隐藏在 web 根目录之外，并在从 index.php 进行用户身份验证后，让像 php 这样的服务器端脚本自行为它们服务。

我可以使用来自 nginx 的 auth_basic，但我想要更强大的加密或散列 - 因此需要一种服务器脚本语言。我想像 facebook 这样的大鱼使用像 auth_basic 模块这样的网络服务器身份验证......但是一个更加定制和开发的版本。所以，在我的情况下，我会将文件放在 web 根目录之外。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-25T02:31:46.093

我建议第一个解决方案。您可以使用[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/) 让您的 php 返回到 javascript。

# algorithm - 是否有任何成本最优的并行算法用于（EREW PRAM）的排序？

> ID：13060717
> 
> 赞同：4
> 
> 时间：2012-10-25T02:28:14.390
> 
> 标签：algorithm, sorting, parallel-processing

是否有可能获得一个成本最优算法，用于[EREW PRAM](http://en.wikipedia.org/wiki/Parallel_random-access_machine)的 n 个处理器对 n 个整数进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:52:36.237

是的，Richard Cole 有一个名为“Parallel Merge Sort”的算法，它理论上使用 O(n) 处理器在 O(log n) 中对 EREW PRAM 上的输入（不仅仅是整数）进行排序。

[http://epubs.siam.org/doi/abs/10.1137/0217049](http://epubs.siam.org/doi/abs/10.1137/0217049)

# java - Java多线程方法访问

> ID：13060723
> 
> 赞同：0
> 
> 时间：2012-10-25T02:29:15.543
> 
> 标签：java, multithreading

即使不创建 Runner 对象，我也可以从线程的 run 方法访问 Runner 类中的 process 方法吗？为什么？

```
class Runner {
  public void process() {
    // some multithreaded code
  }
}

main() {
Thread t1 = new Thread(new Runnable() {
                public void run() {
                    process();
                }
           });
t1.start();        
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T02:36:33.467

如果你做到了，你可以`static`：

```
class Runner {
      public static void process() {
        // some multithreaded code
      }
    } 
```

然后：

```
public static void main() {
    Thread t1 = new Thread(new Runnable() {
                public void run() {
                    Runner.process();
                }
           });
    t1.start();        
} 
```

但是，没有资格或没有实例化，您将无法引用`process()`方法。`Runner.`这是因为`Java`是一种`Object Oriented`语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T02:37:52.797

如果 Runner 的 process 方法是静态的，你可以。

没有实例化就无法访问对象的非静态方法。在使该方法线程安全时，您只需要进行尽职调查。

# java - 如何重置片段的视图？

> ID：13060724
> 
> 赞同：0
> 
> 时间：2012-10-25T02:29:20.227
> 
> 标签：java, android, android-fragments

如果我有一个使用 onCreateView() 动态设置视图的片段，我将如何再次调用它？

我想实现某种“刷新”，其中视图根据 JSON 响应发生变化。我尝试创建一个新函数来执行午夜SV.removeAllViews()，但我怎样才能再次调用 onCreateView()？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:10:44.783

你不能不分离并重新附加片段。

如果您只想更新视图中的数据，您可以找到这些视图并从现有片段中刷新它们。

如果你真的想要多组*独特的布局*，你可以考虑`ViewFlipper`为你的片段布局使用一个，然后调用[setDisplayedChild()](http://developer.android.com/reference/android/widget/ViewAnimator.html#setDisplayedChild%28int%29)来切换到一个特定的视图。

# php - phpseclib - 超时

> ID：13060725
> 
> 赞同：0
> 
> 时间：2012-10-25T02:29:25.560
> 
> 标签：php, windows, cygwin, phpseclib

首先我只想告诉你我已经搜索了大约4个小时没有找到任何解决方案，所以我决定在这里问。

我正在使用带有 Cygwin 的 Windows。

我向服务器发送了一个 SSH 命令，告诉它下载一些游戏服务器文件，这个过程可能需要 20 分钟才能完成，现在我的 php 页面超时了。我试过了，`header (Location: URL);`但它仍在等待服务器的响应，然后超时。所以..有什么方法可以强制客户端到另一个页面，并且仍然让其余的代码继续。

最好的问候，汤姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:00:23.383

查看最新的 git 版本的 phpseclib。从[最新提交](https://github.com/phpseclib/phpseclib/commit/65193d9a25baa59bc34479322a694f2cf1f16180)开始，您现在可以分块下载文件。

例如。`$sftp->get('filename.ext', false, 0, 1000)`. 在此示例中，它将从 filename.ext 下载字节 0-1000 并返回包含这些字节的字符串。如果你这样做`$sftp->get('filename.ext', false, 1000, 1000)`，它将下载字节 1000-2000。

# css - Stylus CSS 媒体查询中的变量

> ID：13060726
> 
> 赞同：28
> 
> 时间：2012-10-25T02:29:28.287
> 
> 标签：css, stylus

我已经尝试了所有方法，但无法让 Stylus CSS 预处理器在媒体查询中使用变量。

例如这不起作用：

```
t = 1000px

@media screen and (max-width: t)
    html
        background blue 
```

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-03T01:39:25.377

看起来 stylus 支持一种更简洁的方式来执行与此[拉取请求](https://github.com/stylus/stylus/pull/776)相同的操作。

在这里，给定一个块大小，我可以制作使容器在页面中居中的样式，并根据浏览器大小将容器大小设置为 1、2 或 3 个块宽。让媒体查询成为一个变量（而不是在媒体查询行中粘贴变量）使其比使用`unquote`上面提到的方法更干净。

```
/* in app.styl */

full_block_width = 300px

three_blocks = "all and (min-width: " + 3*full_block_width + ")"
two_blocks = "all and (min-width: " +  2*full_block_width + ") and (max-width: " + (3*full_block_width - 1) + ")"
one_block = "all and (max-width: " + (2*full_block_width - 1) + ")"

.container 
  margin: auto

@media three_blocks
  .container 
    width: (3*full_block_width)

@media two_blocks
  .container 
    width: (2*full_block_width)

@media one_block
  .container 
    width: full_block_width 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-25T08:18:09.207

很遗憾，但您不能在媒体查询中使用变量或插值。我昨天偶然发现了类似的任务并提出了这个解决方案：

```
t = 1000px

unquote("@media screen and (max-width: " + t + ") {")
html
    background blue
unquote("}") 
```

这并不漂亮，但它确实有效——`unquote`实际上，您可以使用它来解决大多数此类 Stylus 问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-07-15T19:03:07.200

使用 Stylus 的 0.43.0 版本，支持媒体查询，就像您在示例中使用的那样，或者没有像这样的冒号：

```
t = 1000px

@media screen and (max-width t)
    html
        background blue 
```

[通过 Github](https://github.com/stylus/stylus/issues/1060)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-01-14T13:25:12.490

这对我有用。

```
medium = 'screen and (min-width: 768px)'
large = 'screen and (min-width: 992px)'
xlarge = 'screen and (min-width: 1200px)'

.box
    background: #000
    @media medium
        background: #111
    @media large
        background: #222
    @media xlarge
        background: #333 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-05-14T10:01:50.387

现在支持开箱即用，[来自官方页面的片段](http://stylus-lang.com/docs/media.html#interpolations-and-variables)：

```
foo = 'width'
bar = 30em
@media (max-{foo}: bar)
body
    color #fff 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-06-03T17:34:58.097

我写了一个 mixin，虽然它也不完全理想：

```
// media
media(args...)
  output = null
  for arg in args
    // check for tuple
    if arg[1]
      push(output,unquote('(%s: %s)' % (arg[0] arg[1])))
    else
      push(output,unquote(arg))

  unquote(s('%s',output)) 
```

它可以这样使用：

```
$_media = media(screen,'and',(min-width $screen-tablet))
@media $_media
  .container
    max-width 728px 
```

CSS 输出：

```
@media  screen and (min-width: 768px) {
  .container {
    max-width: 728px;
  }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-02-10T19:50:46.950

现在应该工作：

```
t = 1000px

@media screen and (max-width: t)
    html
        background blue 
```

[http://stylus-lang.com/docs/media.html](http://stylus-lang.com/docs/media.html)

从文档中：

插值和变量

您可以在媒体查询中使用插值和变量，因此可以执行以下操作：

```
foo = 'width'
bar = 30em
@media (max-{foo}: bar)
  body
    color #fff 
```

这将产生

```
@media (max-width: 30em) {
  body {
    color: #fff;
  }
} 
```

也可以在 MQ 中使用表达式：

```
.foo
  for i in 1..4
    @media (min-width: 2**(i+7)px)
      width: 100px*i 
```

会屈服于

```
@media (min-width: 256px) {
  .foo {
    width: 100px;
  }
}
@media (min-width: 512px) {
  .foo {
    width: 200px;
  }
}
@media (min-width: 1024px) {
  .foo {
    width: 300px;
  }
}
@media (min-width: 2048px) {
  .foo {
    width: 400px;

 }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-05-06T10:56:11.467

如果我可以提供一种干净易读的方式，我会使用哈希来发挥我的优势，如下所示：

```
// Custom media query sizes
--query = {
    small: "screen and (min-width: 554px)",
    medium: "screen and (min-width: 768px)",
    large: "screen and (min-width: 992px)",
    extra-large: "screen and (min-width: 1200px)",
} 
```

以及我如何称呼它，例如：

```
.main-logo
    font-large(--font.uni-sans-heavy)
    position: relative
    top: 50px
    left: 35px

    .logo-first
        color: --color.white
        margin-right: 3px

    .logo-second
        color: --color.bright-red

    @media --query.large
        left: 70px 
```

超级明显，易于阅读。保持美观和简单。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-10-30T17:51:40.503

我喜欢创建一个`media`mixin，这样就不必为媒体查询创建一个命名变量：

```
media(query)
  @media query
    {block} 
```

使用过程如下：

```
+media("screen and (min-width:" + width + "), print")
  .class
    foo: bar 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-09T15:19:39.087

我喜欢 Tony Tai Nguyen 的回答。这是另一个迭代：

```
sizes = {
  mobile: 0 768
  tablet: 769 1023
  desktop: 1024 1215
  widescreen: 1216 1407
  fullhd: 1408 99999999
}
query = {}

for name, pxs in sizes
  min = '(min-width:' + pxs[0] + 'px)'
  max = '(max-width:' + pxs[1] + 'px)'
  query[name] = min + ' and ' + max
  query[name + '-up'] = 'screen and ' + min
  query[name + '-down'] = 'screen and ' + max

// Usage: @media query.mobile or @media query.tablet-up etc... 
```

# xcode - 在应用程序包中嵌入多个交叉引用框架

> ID：13060727
> 
> 赞同：3
> 
> 时间：2012-10-25T02:29:30.427
> 
> 标签：xcode, macos, frameworks

所以首先，我想说这个问题： [Bundle framework with application in XCode](https://stackoverflow.com/questions/1621451/bundle-framework-with-application-in-xcode)

这个问题： [OSX：改变.framework的路径](https://stackoverflow.com/questions/1304239/osx-changing-path-of-framework)

两者都对我达到这一点非常有帮助，但我仍然不完全在那里。

因此，就像前两个问题的原始海报一样，我正在尝试在我的应用程序包中嵌入一个框架。或者，更确切地说，问题在于我试图在我的应用程序包中嵌入多个框架，其中一些框架相互依赖。我相信即使我的应用程序可以成功找到框架（我已经更改了安装目录，以便框架知道它们在哪里），相互引用的框架仍在寻找要安装在正常 ~/Library 中的框架/框架目录。

这是我尝试运行我的应用程序时得到的输出：

> Dyld 错误信息：
> 
> 未加载库：@rpath/SDL.framework/Versions/A/SDL
> 
> 引用自：/Users/Daly/Library/Developer/Xcode/DerivedData/Coin_Checkers_2-cibyiolfgsmcicdrcfxufftxzbsk/Build/Products/Debug/Coin Checkers 2.app/Contents/MacOS/../Frameworks/SDL_image.framework/SDL_image
> 
> 原因：找不到图片
> 
> 二进制图像：0x7fff5fc00000 - 0x7fff5fc3be0f dyld 132.1 (???) <29DECB19-0193-2575-D838-CF743F0400B2> /usr/lib/dyld

在我看来，它正在正确加载`SDL_image`，但在 SDL_image 引用时失败`SDL`。我可以使用任何类似的技巧将 SDL_image 框架定向到嵌入式 SDL 框架的正确位置吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T02:35:38.290

哦，没关系。我没有看到这个问题，直到它出现在侧面的相关部分： [Embedding frameworks in a Mac App Bundle](https://stackoverflow.com/questions/12499232/embedding-frameworks-in-a-mac-app-bundle?rq=1)

显然我需要做的就是设置运行路径搜索路径，这解决了我所有的问题。我曾尝试设置框架搜索路径，但这似乎没有帮助。

事实上，我重新下载了框架以查看这些`install_name_tool`步骤是否必要，但似乎并非如此。他们没有它就工作。有趣的。

# android - android：实现一个可滚动的弹出窗口来选择一个从0到100的数字

> ID：13060734
> 
> 赞同：1
> 
> 时间：2012-10-25T02:30:50.240
> 
> 标签：android, popup, spinner

我想编辑质量字段。所以点击一个按钮我想要一个弹出窗口，上面有数字 0 到 100。我可以选择这些数字中的任何一个来编辑数量。我希望这个窗口不要挡住整个视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:56:27.447

[http://developer.android.com/guide/topics/ui/controls/spinner.html](http://developer.android.com/guide/topics/ui/controls/spinner.html)

Spinner 应该提供一个类似于弹出窗口的列表视图。您可以在数组中定义您的项目。在您的情况下为 1-100 并检索该值。

在你的 layout.xml

```
<Spinner
            android:id="@id/spinner"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" /> 
```

在你的 strings.xml

```
<string-array name="number">
        <item>1</item>
        <item>2</item>
        <item>3</item>
        <item>4</item>
        <item>5</item>
        ...
</string-array> 
```

在你的 mainactivity.java

```
Spinner spinner = (Spinner) findViewById(R.id.spinner);

ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
                this, R.array.number, android.R.layout.simple_spinner_item);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        spinner.setAdapter(adapter); 
```

# spotify - 在 Spotify 高级搜索中对运算符进行分组

> ID：13060736
> 
> 赞同：1
> 
> 时间：2012-10-25T02:31:21.130
> 
> 标签：spotify

我正在尝试使用 Spotify Web API 在一个响应中返回多个特定结果。

例如，也许我想要 Spotify 的关于迈克尔杰克逊的“Thriller”和 Deep Purple 的“Highway Star”的详细信息。

由于我还没有 Spotify uris，我需要使用 Search 方法。这里有一个描述 Spotify 的高级搜索语法的[页面](http://www.spotify.com/us/about/features/advanced-search-syntax/)。它们支持针对特定字段进行搜索，例如曲目、艺术家和专辑。它们还支持基本的布尔运算符。

但是该页面（或互联网上的其他任何地方，据我所知）没有任何内容描述布尔运算符优先级的工作原理，或者您如何对搜索条件进行分组。

我需要与（曲目：Thriller AND 艺术家：“Michael Jackson”）或（曲目：“highway star” AND 艺术家：“Deep Purple”）有效相同的东西。

使用类似的标准一次只提取一首曲目是可行的：

[http://ws.spotify.com/search/1/track?q=track:"thriller"+AND+artist:"michael+jackson"](http://ws.spotify.com/search/1/track?q=track%3a%22thriller%22+AND+artist%3a%22michael+jackson%22)

我试图直接使用括号，即使文档中没有提到它们。没运气：

ws.spotify.com/search/1/track?q=(track:"thriller"+AND+artist:"michael+jackson")+OR+(track:"highway+star"+AND+artist:"deep+purple ")

然后我想我会尝试优先播放。也许他们不只是从左到右处理 - 也许 OR 都已解决，然后是 AND：

ws.spotify.com/search/1/track?q=track:"thriller"+OR+track:"highway+star"+AND+artist:"michael+jackson"+OR+artist:"deep+purple"

这看起来很有希望，并返回了 185 个结果，但这并不完全正确。我从其他乐队看到了名为“Highway Star”的曲目。这似乎排除了“从左到右”、“OR-before-AND”和“AND-before-OR”。这没有任何意义——还剩下什么？

任何有更多 Spotify 经验的人都可以了解这样的查询应该如何工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:00:02.020

不幸的是，Spotify 的 Web API 对此并没有太多支持（我自己试过，结果和你一样）。从外观上看，API 已经开发了几年，所以我不希望有太大的改变。

但是，我强烈建议您改为查看**[Echo Nest API ；](http://developer.echonest.com/)**他们支持非常[强大的查询](http://developer.echonest.com/docs/v4)，并且在他们的 API 中有很多很棒的东西。此外，他们还支持为搜索结果（曲目、艺术家等）[获取 Spotify URI:s 。](http://developer.echonest.com/docs/v4#project-rosetta-stone)这意味着您可能完全坚持使用 EN API。

此外，**The Echo Nest**不断为其 API 添加更多功能，因此它确实成为了音乐的首选 API（远远超过 Last.fm 和类似的 API）。

# iphone - 我的应用在 iPhone 和 iPad 之间安装很奇怪

> ID：13060738
> 
> 赞同：0
> 
> 时间：2012-10-25T02:31:40.833
> 
> 标签：iphone, ios, xcode, ipad

我有一个企业帐户（通过无线安装）。我制作了一个测试应用程序，它是一个通用应用程序，并在我的设备上对其进行了测试。但它以一种奇怪的方式安装。

如果我安装该应用程序，您可以看到 iPhone 应用程序上的安装图标翻了一番（见两个应用程序图标）。但在 iPad 上不会发生。我不知道为什么？

首先，我认为这是因为这两种设备的硬件差异。但应用程序大小只有 2.7MB，所以我希望这两款设备都能轻松处理该应用程序。

以下链接显示了此问题：[此链接显示奇怪的应用程序安装情况](http://bizmob.mcnc.co.kr:90/iPhone/mov/iOSinstall.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T02:44:57.410

如果您通过无线方式安装（通过配置了 plist 的下载链接），可能在下载链接的 plist 上设置的“捆绑包标识符”与正在下载的应用程序的“捆绑包标识符”不匹配。这通常是由于重复使用您的 plist（带有旧/错误的包标识符）进行下载而不是制作新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T02:36:36.817

在 Xcode 中运行清理，然后从设备本身中删除应用程序，然后重试

# python - 键值对的快速填充

> ID：13060742
> 
> 赞同：0
> 
> 时间：2012-10-25T02:32:11.890
> 
> 标签：python

我正在寻找一种创建大型键值对的快速方法，以后我可以简单地循环遍历。

```
key = {'a':'stuff', 'a':'more stuff', 'a':'dont look at me', 'b':'test2', 'b':'test3',...'z':'even more stuff'}
for a,b in key
    #do stuff 
```

我希望将参考浓缩`a`到一个单一的声明中。

在这种情况下，我需要`a`成为关键，并通过抓取`b`与当前`a`. 这实际上只是以后代码的可读性，但是如果有其他建议可以更轻松地完成此任务，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T02:38:33.360

您可以执行以下操作：

```
key={'a':['stuff','more stuff','even more stuff'],'b':['test2','test3']}
for k in key:
    for val in key[k]:
        #do stuff with values in the key 
```

# php - PHP函数只有数字

> ID：13060750
> 
> 赞同：-2
> 
> 时间：2012-10-25T02:33:34.127
> 
> 标签：php, validation

我知道 is_int 和 ctype_digit 以及其他类似的东西，但我需要一个只有当值中的***所有***字符都是数字时才会返回 true 的。如果您使用科学记数法 (5e4)，ctype_digit 将返回 true，因此这将不起作用。

在以下情况下必须返回 true：

```
123
1.2
-12 
```

如果有上述以外的任何东西，将无法正常工作。

我之所以强调这一点，是因为似乎所有内置函数中的一个都能够做到这一点。非常感谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T02:39:40.270

你为什么不试试这个？

```
function is_numbers($value){
   if(is_float($value)) return true;
   if(is_int($value)) return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T02:40:16.687

```
 <?php
    $tests = array("42",1337,"1e4","not numeric",array(),9.1);

      foreach ($tests as $element) 
      {
          if (is_numeric($element)) 
          {
             echo "'{$element}' is numeric", PHP_EOL;
          } 
          else 
          {
            echo "'{$element}' is NOT numeric", PHP_EOL;
          }

       }
    ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T02:42:13.200

我做这样的事情来检查纯数字

```
$var = (string) '123e4'; // number to test, cast to string if not already
$test1 = (int) $var; // will be int 123
$test2 = (string) $test1; // will be string '123'

if( $test2 === $var){
     // no letters in digits of integer original, this time will fail
   return true;
}
// try similar check for float by casting

 return false; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T11:07:55.907

我找不到合适的问题，其答案完全支持您的需求。我在上面发布的正则表达式将同时支持小数和负数。但是，它也支持前导零。如果你想消除这些，它会变得更加复杂。

```
$pattern = '/^-?[0-9]*\.?[0-9]*$/';

echo preg_match($pattern, '-1.234') ? "match" : "nomatch";
// match
echo preg_match($pattern, '-01.234') ? "match" : "nomatch";
// match
echo preg_match($pattern, '1234') ? "match" : "nomatch";
// match
echo preg_match($pattern, '001.234') ? "match" : "nomatch";
// match (leading zeros)
echo preg_match($pattern, '-1 234') ? "match" : "nomatch";
// nomatch (space)
echo preg_match($pattern, '-0') ? "match" : "nomatch";
// match (though this is weird)
echo preg_match($pattern, '1e4') ? "match" : "nomatch";
// nomatch (scientific) 
```

分解模式：

*   `^`字符串的开始
*   `-?`字符串开头的可选减号
*   `[0-9]*`后跟零个或多个数字
*   `\.?`后跟一个可选的小数
*   `[0-9]*`并且可选小数点后的数字
*   `$`字符串的结尾

# clojure - Clojure 中的 Mod 语法

> ID：13060755
> 
> 赞同：7
> 
> 时间：2012-10-25T02:34:15.857
> 
> 标签：clojure, modulus

如何在编程语言 clojure 中编写模数语法？

例如符号money %= money_value。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T02:37:37.183

Clojure 中有两个函数您可能想尝试：[`mod`](http://clojuredocs.org/clojure_core/clojure.core/mod)和[`rem`](http://clojuredocs.org/clojure_core/clojure.core/rem). 它们对正数的工作方式相同，但对负数的工作方式不同。这是文档中的一个示例：

```
(mod -10 3) ; => 2
(rem -10 3) ; => -1 
```

**更新：**

如果您真的想将您的代码转换为 Clojure，您需要意识到惯用的 Clojure 解决方案可能与您的 JavaScript 解决方案完全不同。这是一个很好的解决方案，我认为它大致可以满足您的需求：

```
(defn change [amount]
  (zipmap [:quarters :dimes :nickels :pennies]
    (reduce (fn [acc x]
              (let [amt (peek acc)]
                (conj (pop acc)
                      (quot amt x)
                      (rem amt x))))
            [amount] [25 10 5])))

(change 142)
; => {:pennies 2, :nickels 1, :dimes 1, :quarters 5} 
```

[您可以在ClojureDocs](http://clojuredocs.org/clojure_core/)上查找您不认识的任何功能。如果您只是不了解样式，那么您可能需要更多[的高阶函数](http://en.wikipedia.org/wiki/Higher-order_function)编程经验。我认为[4Clojure](http://www.4clojure.com/)是一个很好的起点。

# java - 二维卷积 - 如何在 Java 中实现？

> ID：13060757
> 
> 赞同：-5
> 
> 时间：2012-10-25T02:34:35.547
> 
> 标签：java, arrays, image-processing, convolution

我已经用头撞墙了好一阵子了。我习惯于使用 Matlab 的`conv2`函数，它自己进行卷积。

但是，我只是无法在 Java 中正确实现它。我会提供一个代码片段，但它都搞砸了。我会尽量弄清楚并发布（实际上是凌晨 4:30，我仍在为此苦苦挣扎..）。

任何人都可以发布一个工作代码方法，在Java中两个相同大小的二维数组之间进行二维卷积吗？

提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T03:01:13.117

一点谷歌搜索永远不会受到伤害。 [此代码](http://code.google.com/p/clasificaciondepizzas/source/browse/trunk/ClasificacionDePizzas/src/clasificaciondepizzas/operations/canny/Convolution.java)可能会对您有所帮助。尤其是，

```
public static double[][] convolution2D(double[][] input,
            int width, int height,
            double[][] kernel,
            int kernelWidth,
            int kernelHeight) {
        int smallWidth = width - kernelWidth + 1;
        int smallHeight = height - kernelHeight + 1;
        double[][] output = new double[smallWidth][smallHeight];
        for (int i = 0; i < smallWidth; ++i) {
            for (int j = 0; j < smallHeight; ++j) {
                output[i][j] = 0;
            }
        }
        for (int i = 0; i < smallWidth; ++i) {
            for (int j = 0; j < smallHeight; ++j) {
                output[i][j] = singlePixelConvolution(input, i, j, kernel,
                        kernelWidth, kernelHeight);
            }
        }
        return output;
    } 
```

# osx-snow-leopard - Mac OS X 10.6 上的 CPython 和 PyPy

> ID：13060758
> 
> 赞同：0
> 
> 时间：2012-10-25T02:35:00.327
> 
> 标签：osx-snow-leopard, cpython, pypy

我打算在我的系统上安装 PyPy。我的系统上已经存在 CPython 实现。安装 PyPy 会以任何方式影响这个现有的系统实现吗？

简而言之，我想知道 PyPy 和 CPython 是否可以在任何操作系统上共存而没有任何问题？我正在 Mac OS X 10.6 上尝试这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:24:52.200

它们可以在物理上共存而没有任何问题。

我正在一个同时安装了 Python 2.7.3、Pypy 1.9 和 Python 3.2.3 的系统中编写此代码。

除此之外，Alex Martelli（他是 Python 专家）在他的书[Python in a Nutshell](https://rads.stackoverflow.com/amzn/click/com/0596100469)中似乎同意这一点。引用他的话：

> “下载并安装所有这些。它们是免费的，并且可以毫无问题地共存。”

对于**它们，**他指的是 CPython、IronPython 和 Jython，但同样适用于 Pypy。

另外，你不应该相信我的话。下载并安装它并尝试一下。自然不会有任何问题。

# c - 将从 readdir() 返回的字符串放入 char **

> ID：13060764
> 
> 赞同：0
> 
> 时间：2012-10-25T02:36:33.343
> 
> 标签：c, unix, memory-management

我想制作一个字符串数组，将我所有的常规文件保存在当前目录中

我有以下

```
DIR *d = opendir(".");
struct dirent *dirent;
struct stat fileStat;
char **files;

while (dirent = readdir(d)) {
    stat(dirent->d_name, &fileStat);

    if (S_ISREG(fileStat.st_mode)) {

    }

}

closedir(d); 
```

我尝试在旅途中（在while循环中）分配每个元素，因为我的文件夹中的常规文件的数量不是预先确定的。但是，我不断收到段错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:40:21.577

问题是甚至没有分配指向字符串的指针的内存。

您需要 malloc 和 remalloc`files`来保存指向字符串的指针，然后分别 malloc 每个字符串，或者使用 strdup 为您完成它。

```
size_t files_length = 0;
size_t files_capacity = 16;
char **files = (char**)malloc(files_capacity*sizeof(*files));
if (files == NULL)
    explode();

while (...) {
    if (...) {
        if (files_capacity < files_length + 1) {
            files = (char**)remalloc(files, files_capacity*2*sizeof(*files));
            if (files == NULL) {
                explode();
            }
            files_capacity *= 2;
        }
        files_index = files_length++;
        files[files_index] = strdup(...);
    }
}

// free everything 
```

或者，您可以`files`只制作一个大型指针数组，`char *files[1024]`然后将文件名 strdup 放入其中。但这当然会限制您可以处理的文件数量，并且如果您只有几个文件要处理，则会花费不必要的内存，尽管只有指针会花费您额外的费用，而不是字符串。

# javascript - 无法在 Titanium Studio 中部署到 iOS

> ID：13060768
> 
> 赞同：0
> 
> 时间：2012-10-25T02:36:46.330
> 
> 标签：javascript, ios, titanium, appcelerator

所以，我很难从 Titanium Studio 部署到我的 ipod touch。尝试部署时出现此错误：

```
[DEBUG] Detected module for commonjs: ti.cloud 2.2.0 @ /Library/Application Support/Titanium/modules/commonjs/ti.cloud/2.2.0
[INFO] Performing clean build
[ERROR] 
[ERROR] Error: Traceback (most recent call last):
  File "/Library/Application Support/Titanium/mobilesdk/osx/2.1.1.GA/iphone/builder.py", line 1484, in main
    execute_xcode("iphoneos%s" % iphone_version,args,False)
  File "/Library/Application Support/Titanium/mobilesdk/osx/2.1.1.GA/iphone/builder.py", line 1239, in execute_xcode
    output = run.run(args,False,False,o)
  File "/Library/Application Support/Titanium/mobilesdk/osx/2.1.1.GA/iphone/run.py", line 41, in run
    sys.exit(rc)
SystemExit: 1 
```

我试过删除 iphone build 文件夹，不起作用。而且我认为我不需要重新启动 TS 或其他任何东西。必须有一个更简单的方法。如果这有帮助，我有很多 .png，而且我听说替换它们可以解决问题，但我不想全部替换它们。我的项目中有超过 500 个 png。有什么建议么？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:32:35.530

尝试做`Project > Clean...`，选择你的项目，然后重新编译。

如果这不起作用，请从 Ti Studio 中删除您的项目（实际上不要从 HD 中删除文件）。创建一个新项目，然后复制旧项目中的资产。重新编译。

# c# - 等待 base.SendAsync 后自定义 DelegatingHandler 永远不会返回

> ID：13060776
> 
> 赞同：4
> 
> 时间：2012-10-25T02:37:53.890
> 
> 标签：c#, async-await, dotnet-httpclient

我正在使用 HttpClient 构建 API 使用者。因为提供者要求消费者使用 Digest Authentication 进行身份验证，所以我需要编写一个自定义 DelegatingHandler，如下所示：

```
public class DigestAuthDelegatingHandler : DelegatingHandler
{
    public DigestAuthDelegatingHandler(HttpMessageHandler innerHandler) : base(innerHandler) { }
    protected async override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        var response = await base.SendAsync(request, cancellationToken);
        if (!response.IsSuccessStatusCode && response.StatusCode == HttpStatusCode.Unauthorized)//This line of code is never reached
        {
            //Generate the Digest Authorization header string and add to the request header,
            //then try to resend the request to the API provider
        }
        return response;
    }
} 
```

我创建一个 HttpClient 并将我的自定义 DelegatingHandler 添加到消息处理程序 pineline

```
HttpClient httpClient = new HttpClient(new DigestAuthDelegatingHandler(new HttpClientHandler()));            
httpClient.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
httpClient.BaseAddress = new Uri("http://127.0.0.1/");
HttpResponseMessage response = httpClient.GetAsync("api/getTransactionInfo?TransactionNumber=1000).Result; 
```

这样做之后，我的消费者看起来就像永远运行。当我在上面的代码行 await base.SendAsync 之后添加断点时，我看到代码永远不会返回，因此我无法检查响应是否获得 401 未授权以提取摘要授权标头详细信息。API 提供者没有任何问题，因为我已经使用传统的 WebHttpRequest 支持 Digest Authenticate 成功构建了另一个 API 消费者站点，并且它运行良好。

重要提示：如果我切换到将消费者编写为控制台应用程序，那么它运行良好。所以，我不确定，但我认为这是在异步模式下运行时与 ASP.NET 线程有关的问题？

我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:54:35.257

我同意 Darrel - 很可能，任务出错并且没有结果......您可以使用显式延续来检查任务状态 - 例如，

```
return base.SendAsync(request, cancellationToken).ContinueWith(task =>
    {
        // put the code to check the task state here...
    }); 
```

另一方面，我不确定您是否需要创建自定义`DelegatingHandler`身份验证...尝试使用`HttpClientHandler`凭据[属性](http://msdn.microsoft.com/en-us/library/system.net.http.httpclienthandler.credentials.aspx)（或[UseDefaultCredentials](http://msdn.microsoft.com/en-us/library/system.net.http.httpclienthandler.usedefaultcredentials.aspx)传递当前用户的默认凭据）

```
var httpClient = new HttpClient(new HttpClientHandler() {
       PreAuthenticate = true,
       Credentials = new NetworkCredentials(...
   }); 
```

**编辑**：找到与使用凭证缓存的 http 客户端一起使用摘要身份验证的示例 - 请参阅此 SO Q & A: [HttpRequestMessage and Digest Authentication](https://stackoverflow.com/questions/10658202/httprequestmessage-and-digest-authentication)

这应该可以解决您在摘要身份验证方面的实际问题，而无需构建您自己的处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T04:15:25.490

我的猜测是 .Result 阻止了您的处理程序中的继续。尝试将 .Result 更改为 .ContinueWith

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-22T14:52:24.683

遇到同样的问题，这就是最终为我工作的原因。问题是端点抛出了 500 Internal Server Error 并因此阻塞了线程。

```
protected override async Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        return await base.SendAsync(request, cancellationToken)
                         .ContinueWith<HttpResponseMessage>(task =>
        {
            return task.Result;
        });
    } 
```

注意anon函数内部的return是返回到SendAsync函数，然后我们实际返回的是Result。

# c++ - 我需要帮助排序这个双链表（C++）

> ID：13060778
> 
> 赞同：0
> 
> 时间：2012-10-25T02:38:33.303
> 
> 标签：c++

这是我到目前为止所拥有的：

```
void sort(const E &t)
{
  DNode<E> *tmp = new DNode<E>(t,NULL,NULL);

    if(size==0)
    {
        cout << "List is empty" << endl;
    }

            else if(t<=head->element)
            {
                tmp->element=t;
                head->prev = tmp;
                tmp->next=head;
                head = tmp;
            }
                    else if(t>=tail->element)
                    {
                        tmp->element=t;
                        tail->next = tmp;
                        tmp->prev=tail;
                        tail = tmp;
                    }

                         curr=tmp;
                         insert(t);
                         size++;
} 
```

insert() 只是我程序中的另一个函数：

```
 void insert(const E &t)
{
  DNode<E> *tmp = new DNode<E>(t,NULL,NULL);
  if (size == 0)
  { curr=head=tail=tmp; }
  else 
  {
    tmp->next=curr;
    tmp->prev=curr->prev;
    if (curr->prev) curr->prev->next=tmp;
    else { head=tmp; }
    curr->prev=tmp;
    curr=tmp;
  }
  size++;
} 
```

它确实编译，但它没有给出正确的结果。我不确定我的错误是什么，我真的需要帮助。任何帮助，将不胜感激。

这是在我的主程序中：

```
 one.sort(10);
  one.sort(20);
  one.sort(30);
  one.sort(40);
  one.sort(50);
  one.sort(60);
  one.print();
  one.moveToEnd();
  one.prev(); 
  one.prev();
  one.remove();
  one.remove();
  one.print();

  cout<<endl; 
```

我应该得到这个：

头部==> 10 -> 20 -> 30 -> 40 -> 50 -> 60 <==尾部 头部==> 10 -> 20 -> 50 -> 60 <==尾部

但我得到了这个： HEAD==> 10 -> 20 -> 20 -> 30 -> 30 -> 40 -> 40 -> 50 -> 50 -> 60 -> 60< ==TAIL HEAD==> 10 -> 20 -> 20 -> 30 -> 30 -> 40 -> 40 -> 60 -> 60 <==尾巴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T02:52:57.023

你看到的行为的原因是你错过了一个 else

这：

```
curr=tmp;
insert(t);
size++; 
```

无论您是否在头部或尾部添加了一些东西，都会执行。由于您提供的每个条目都会添加到尾部，因此每次都会插入两次。如果尚未将值添加到头部或尾部，则应仅调用 insert。

如果我理解正确，`curr=tmp;`并且`size++;`无论如何都应该运行，那么我认为只有对 insert 的调用应该在 else 块内。

编辑：

应该是这样的：

```
if(size==0)
{
    cout << "List is empty" << endl;
    //Need to insert here as well, to add the first value to the list.
    insert(t);
}

        else if(t<=head->element)
        {
            tmp->element=t;
            head->prev = tmp;
            tmp->next=head;
            head = tmp;
        }
                else if(t>=tail->element)
                {
                    tmp->element=t;
                    tail->next = tmp;
                    tmp->prev=tail;
                    tail = tmp;
                }

                else 
                {
                     insert(t);
                }
                curr=tmp;
                size++; 
```

顺便说一句，我（有点）保持了你的空白使用，虽然我觉得它有点不寻常。我通常会将相关的“if”、“else if”和“else”语句放在同一缩进级别上，并为嵌套块进一步缩进。我认为这是更标准的，但既不是这里也不是那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T02:52:31.850

希望这可以帮助：

```
 struct node {
       node* next;
       node* prev;
       Person p;
    };

    void sort(node* head) {
       node* n1;
       node* n2;

           for(n1 = head; n1->next != head; n1 = n1->next) {

                for( n2 = n1->next; n2 != head; n2 = n2->next) {

                       // swap data here if necessary
                 }
           }
      } 
```

对于交换：

```
 X1 = currPtr->previoius;
     X2 = currPtr->next->next;
     currNext = currPtr->next;
     currNext->previous = currPtr->previous;
     currPtr->previous = currPtr->next;
     currPtr->next = currNext->next;
     currNext->next = currPtr;
     X1->next = currPtr->previous;
     X2->previous = currPtr; 
```

# javascript - 显示模式中的 Google Map API 未完全显示

> ID：13060779
> 
> 赞同：3
> 
> 时间：2012-10-25T02:38:40.947
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3, zurb-foundation

我在 div 内的 Google Map 遇到问题，单击按钮后会在屏幕上弹出。谷歌地图只是部分显示。我知道我需要创建一个调整大小的事件，但不知道如何放置它或放置在哪里。任何帮助将非常感激！请记住，我对JS知之甚少！

链接到测试站点：点击 GOOGLE MAP 按钮查看手头的问题：

[http://simplicitdesignanddevelopment.com/Fannie%20E%20Zurb/foundation/contact_us.html#](http://simplicitdesignanddevelopment.com/Fannie%20E%20Zurb/foundation/contact_us.html#)

我的谷歌 API 脚本：

```
<script type="text/javascript">
    function initialize() {
        var mapOptions = {
            center: new google.maps.LatLng(39.739318, -89.266507),
            zoom: 5,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    }  
</script> 
```

包含地图的 div：

```
<div id="myModal" class="reveal-modal large">
    <h2>How to get here</h2>
    <div id="map_canvas" style="width:600px; height:300px;"></div>
    <a class="close-reveal-modal">&#215;</a>
</div> 
```

单击按钮时调用地图的脚本：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#myModal1').click(function() {
            $('#myModal').reveal();
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-09T10:52:48.427

以下两个解决方案对我有用

```
function initialize() {
   var mapOptions = {
    center: new google.maps.LatLng(39.739318, -89.266507),
    zoom: 5,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
  return map;
}

<div id="myModal" class="reveal-modal" data-reveal>
  <div id="map_canvas" style="height: 300px"></div>
  <a class="close-reveal-modal">&#215;</a>
</div>

$(document).ready(function() {
  var myMap;
  $('#myModal').bind('open', function() {
    if(!myMap) {
      var myMap = initialize();
      setTimeout(function() {
        google.maps.event.trigger(myMap, 'resize');
      }, 300);                  
    }
  });
} 
```

或者

```
$(document).ready(function() {
  var myMap;
  $('#myModal').bind('opened', function() {
    if(!myMap) {
      var myMap = initialize();
      google.maps.event.addDomListener(window, 'load', initialize);
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:54:39.950

打开模式后删除`width: 600px;`并`<div id="map_canvas">`触发调整大小`map`应该可以解决问题：

```
$(".reveal-modal").on("reveal:opened", function(e) {
  google.maps.event.trigger(map, 'resize')
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T05:04:06.013

首先，根据链接到的源，在单击按钮时调用地图的脚本什么都不做，只是抛出一个错误，因为在加载 jQuery 之前它就在页面中。您可以在错误控制台中看到它。您需要在其余脚本之后将其移至页面底部。

您的显示正在“工作”，因为您正在使用`data-reveal-id`菜单项上的属性，并且显示脚本会自动将其连接起来。

您正在创建地图 onload，这是一种不好的做法。除非需要，否则不要创建它。

所以为了解决你的问题，这就是我所做的。从菜单项中删除 并将`data-reveal-id`其替换为 ID，或者您可以使用其他选择器来访问它。我将其更改为，`id="myModal1"`因为这已经是您的事件代码中的内容。

将在单击按钮时调用地图的脚本移动到底部，并将其更改为如下所示：

```
$(document).ready(function() {
var map;
$('#myModal1').click(function() {
    if(!map){
        var mapOptions = {
          center: new google.maps.LatLng(39.739318, -89.266507),
          zoom: 5,
          mapTypeId: google.maps.MapTypeId.ROADMAP

        };
         map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);          
    }

    $('#myModal').reveal();
}); 
```

});

这将仅在用户单击链接以显示地图时创建地图，并且仅创建一次。那应该为你解决它。如果必须，您可以将打开的回调传递给`reveal()`调用并在那里触发调整大小，但在我有限的测试中，这不是必需的。

您还可以摆脱整个初始化函数。

现在去拿创可贴，在那个头上放些冰块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T03:05:12.093

尝试这个

```
<script type="text/javascript">
    function initialize() {
        var mapOptions = {
            center: new google.maps.LatLng(39.739318, -89.266507),
            zoom: 5,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    }
    $( document ).bind( "pageshow", function( event, data ){
        google.maps.event.trigger(map, 'resize');               
    }); 
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-18T04:54:21.583

```
$("#myModal").on('shown.bs.modal', function(){
     google.maps.event.trigger(map, 'resize')
}); 
```

# android - 如何使用电话。这是@隐藏

> ID：13060781
> 
> 赞同：1
> 
> 时间：2012-10-25T02:38:52.423
> 
> 标签：android

我想用 SMS-Conversation 做某事。所以我从 URI 得到它`content://mms-sms/conversations`。但是问题就出来了。那就是虽然我可以从光标中获取列，但这太危险了。因为列因不同的设备而异。所以我想用`Provider`. 阅读了源代码后，我找到了`Telephony`可以帮助我的课程。但我不能使用它。这是@隐藏！那么有什么方法可以使用它吗？

# sql - 基于另一列数据的列中的 SUM() 数据

> ID：13060782
> 
> 赞同：5
> 
> 时间：2012-10-25T02:39:07.647
> 
> 标签：sql, sql-server-2008

我有一个 sql 表

```
Project ID       Employee ID          Total Days

1                   100                   1
1                  100                   1
1                  100                   2
1                   100                   6
1                   200                   8
1                   200                   2 
```

现在我需要这张桌子看起来像

```
Project ID       Employee ID          Total Days

1                   100                   10
1                   200                   10 
```

作为 sql 新手，我对根据上述条件使用 SUM() 有点困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T02:42:05.640

下面的这个查询产生两列：`EmployeeID`, `totalDays`。

```
SELECT  EmployeeID, SUM(totalDays) totalDays
FROM    tableName
GROUP BY EmployeeID 
```

*后续问题：为什么在您想要的结果中`projectId`是`1 and 2`？*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T03:29:08.403

这里有两种方法

```
Declare @t Table(ProjectId Int, EmployeeId Int,TotalDays Int)
Insert Into @t Values(1,100,1),(1,100,1),(1,100,2),(1,100,6),(1,200,8),(1,200,2) 
```

**方法1：**

```
Select ProjectId,EmployeeId,TotalDays = Sum(TotalDays)
From @t 
Group By ProjectId,EmployeeId 
```

**方法2：**

```
;With Cte As(
Select 
    ProjectId
    ,EmployeeId
    ,TotalDays = Sum(TotalDays) Over(Partition By EmployeeId)
    ,Rn = Row_Number() Over(Partition By EmployeeId Order By EmployeeId)
From @t )
Select ProjectId,EmployeeId,TotalDays
From Cte Where Rn = 1 
```

**结果**

```
ProjectId   EmployeeId  TotalDays
1            100        10
1            200        10 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T02:49:45.883

```
select min("Project ID")as 'Project ID',"Employee ID"
   , SUM("Total Days") as 'Total Days'
from table1
group by "Employee ID" 
```

# jython - PyDev 控制台不接受任何输入

> ID：13060783
> 
> 赞同：1
> 
> 时间：2012-10-25T02:39:10.397
> 
> 标签：jython, pydev

我想知道是否有人可以帮助解决这个问题...我正在使用 Eclipse 4.2.1 和 PyDev 2.7.1 运行 JRE/JDK 7u9 32 位（一切都是最新的）。我已经安装了 Jython 2.5.3，并将 PyDev 设置为使用它作为解释器。

我的问题是，出于某种原因，PyDev 中的控制台似乎不会注册任何输入。

例如，我有以下代码：

```
inStr = raw_input('Enter a word: ').strip()
print inStr 
```

当我运行它时，控制台会显示“输入单词”提示。但是，当我在控制台中键入任何内容并按 Enter 时，它只是移动到新行，不会产生任何类型的额外输出，并且程序继续运行，等待接收输入。我已经尝试过 Java 6 和不同版本的 Jython，但我所做的没有任何区别。我读过 PyDev 控制台有时会输入额外的隐藏字符，因此会导致意外的程序行为，但我认为 .strip() 可以解决这个问题。在我的情况下，就好像控制台只是不接受任何输入周期......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T22:25:48.493

只是为了让任何偶然发现这一点的人清楚，这是 Jython 2.5.3 上的一个问题。

如果您使用 Jython 2.5.2 或 Jython 2.5.4rc1，则一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:42:11.320

我会将此作为对您问题的评论，但也许我没有足够的特权。

我遇到了同样的问题（最初，我认为它适用于 Eclipse 3.6）。我在以下配置中成功运行了您的代码（没有 strip()）（即，我输入了输入并将其打印到控制台）：

Eclipse 3.6.1/Python 2.6.6

Eclipse 4.2.1/Python 2.6.6

使用交互式控制台，它可以：

Eclipse 3.6.1/Jython 2.5.3

Eclipse 4.2.1/Jython 2.5.3

不幸的是，它失败了

Eclipse 3.6.1/Jython 2.5.3

Eclipse 4.2.1/Jython 2.5.3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-18T02:23:57.437

我有一个类似的问题。单击控制台顶部的红色方块以终止控制台工具提示后，它停止了。

# ruby-on-rails - 如何从 Carrierwave Uploader 对象引用父模型

> ID：13060784
> 
> 赞同：4
> 
> 时间：2012-10-25T02:39:15.300
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, carrierwave

我想在通过 Carrierwave 完成文件上传后运行一些方法。Carrierwave 包括[这里](https://github.com/jnicklas/carrierwave/wiki/How-to%3a-use-callbacks)详述的几个回调方法。

我打算使用 :store 回调。

这很好，但它需要我在 Uploader 对象实例中运行回调方法。这不是世界末日，但我想将所有逻辑保留在我的父模型中。

**我的问题是：我应该如何从 Uploader 引用父模型？我在文档中没有看到任何明显的东西？**

我想我可以做类似的事情

```
ParentModel.last.call_my_method_here 
```

但这似乎是一种非常脆弱的编码方式（不期望有很多请求，但仍然如此）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T13:40:11.057

我猜这个`model`变量是你要找的，[在这里查看使用它的例子](https://github.com/jnicklas/carrierwave#conditional-versions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:45:16.503

对于它的价值，我已经`after_commit`在父模型上使用了回调，到目前为止似乎工作正常。这也允许我与上传的文件进行交互。

# scala - scala：定义模拟对象的策略，使用隐式注入依赖项

> ID：13060787
> 
> 赞同：0
> 
> 时间：2012-10-25T02:39:26.587
> 
> 标签：scala, testing, dependency-injection, mocking

我有一个社交对象，负责连接到 Twitter、Facebook 等，并检索指定用户的提供者信息

对于每个提供者，我实现了一个单例 TwitterAdapter，所有这些都继承自一个抽象类 SocialAdapter

这是代码：[https ://github.com/RestOpenGov/ideas-ba/blob/master/webservice/app/services/security/SocialConnector.scala#L98](https://github.com/RestOpenGov/ideas-ba/blob/master/webservice/app/services/security/SocialConnector.scala#L98)

对于测试，我显然想模拟 TwitterAdapter，这样它就不会与 twitter 连接，而是返回一些固定的响应。

我发现的一种解决方案是使用隐式参数注入适配器列表。此解决方案的问题在于 Social.retrieveSocialProviderInfo 是从其他函数调用的，因此我必须通过所有调用链传递隐式 List[SocialAdapter] 参数，如下所示：

```
def createApplicationToken(accessToken: AccessToken)
  (implicit adapters: List[SocialAdapter] = Social.defaultAdapters)
: Either[List[Error], ApplicationToken] = {

  // go to social info provider and fetch information
  retrieveProviderInfo(accessToken).fold(
  [...]

def retrieveProviderInfo(accessToken: AccessToken)
  (implicit adapters: List[SocialAdapter] = Social.defaultAdapters)
: Either[List[Error], IdentityProviderInfo] = {
[...] 
```

最后

```
object Social {

  val defaultAdapters = List(TwitterAdapter, FacebookAdapter)

  def retrieveSocialProviderInfo
    (accessToken: AccessToken)
    (implicit adapters: List[SocialAdapter] = Social.defaultAdapters)   // adapters can be injected
  : Option[IdentityProviderInfo] = {
  [...] 
```

你明白了

它工作正常，通常我只是忽略第二组参数并从 Social.defaultAdapters 中选择默认值，我只在测试时将其设置为 List(MockTwitterAdapter, MockFacebookAdapter)，但我只是为了能够测试它而将代码弄乱了.

另一种解决方案是将 Social.defaultAdapters 设置为 var（而不是 val）并更改它以进行测试，通常在生产模式下它总是具有相同的值。

我认为这一定是一个很常见的场景。有没有更好的策略来处理这些情况？或者也许是某种方式来扩展隐式赋值的范围？还是我应该使用功能齐全的依赖注入框架？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T04:47:05.770

一个简单的方法可以是一直使用特征：

```
// you can test this trait and override the adapters as you wish
// by overriding the defaultAdapters member
trait Social {

  implicit val defaultAdapters = List(TwitterAdapter, FacebookAdapter)

  def retrieveSocialProviderInfo(accessToken: AccessToken):
    Option[IdentityProviderInfo] = ...
}

// you can use this object directly in your production code
// if you don't want to mix it in
object Social extends Social

// or use the trait by mixing it with another
trait Application extends Social {
  def createApplicationToken(accessToken: AccessToken): 
    Either[List[Error], ApplicationToken] = {
    // the defaultAdapters are accessible to the 
    // retrieveProviderInfo method 
    retrieveProviderInfo(accessToken).fold(...)
  } 
```

# google-app-engine - 当我的应用达到预期搜索订阅配额时会发生什么？

> ID：13060788
> 
> 赞同：5
> 
> 时间：2012-10-25T02:39:28.927
> 
> 标签：google-app-engine

谷歌可以补充这个资源吗？如果是这样，订阅超出配额时如何计费？费用？还有其他人将它用于现实生活中的大型应用程序吗？（成千上万的用户/订阅？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:50:24.387

[在这里查看](https://developers.google.com/appengine/docs/python/prospectivesearch/overview#Using_Prospective_Search)文档：

典型的前瞻性搜索应用程序的生命周期如下所示：

1.  您决定适当的文档架构。您的选择将取决于应用程序旨在处理的源数据类型。
2.  应用程序使用 subscribe() 调用来注册查询订阅以及使用查询语言的前瞻性搜索。
3.  应用程序将流式源数据中的项目转换为文档，这些文档是 db.Model 的实例。
4.  该应用程序使用 match() 调用将文档呈现给预期搜索，以匹配订阅的查询。
5.  预期搜索会在任务队列中返回匹配的订阅 ID 和文档。这些结果受制于通常的配额和限制。

基于此，您似乎只受到限制任务队列的配额限制，可以在[此处](https://developers.google.com/appengine/docs/quotas#Task_Queue)找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-09T00:55:38.570

超过订阅配额时，新订阅将失败。其他配额仍在发挥作用，但目前这是一个硬上限。

因此，在撰写本文时，除非您计划将订阅数量保持在 10k 以下，否则您将不堪重负。

前瞻性搜索很棒，我迫不及待地等待它最终退出实验状态。

# python - 使用 Python CGI 打印新页面

> ID：13060793
> 
> 赞同：2
> 
> 时间：2012-10-25T02:40:48.830
> 
> 标签：python, html, cgi

我正在使用/学习 Python 来完成 CGI 作业。基本上我们必须呈现一些表单，然后根据用户输入，呈现不同的表单等。

到目前为止，这是我的脚本代码：

```
import cgi
import cgitb
cgitb.enable()  # for troubleshooting
print ("Content-type: text/html\n\n")
form1 = open("html/assg5form1.html")
form2 = open("html/assg5form2.html")
form3 = open("html/assg5form3.html")
form4 = open("html/assg5form4.html")
form5 = open("html/assg5form5.html")
formstring = form1.read()
print formstring 
```

我遇到的问题是在呈现第一个表单之后，我不知道如何处理用户提供的输入。我通常会在表单上附加一个动作并触发另一个脚本，但我们需要在一个文件中完成所有脚本。如何清除我显示的表格并显示另一个？

# wpf - WPF Expander，从子元素中获取标题名称

> ID：13060795
> 
> 赞同：0
> 
> 时间：2012-10-25T02:41:03.090
> 
> 标签：wpf, expander

我有一个 WPF 扩展器，例如：

```
 <Expander Canvas.Left="251" Canvas.Top="425" Header="expander1" Height="100" Name="expander1">
        <Grid>
            <StackPanel Margin="10,4,0,0">
                <CheckBox Margin="4" Content="Option 1" Checked="chk_DoThis" />
                <CheckBox Margin="4" Content="Option 2" Checked="chk_DoThis" />
                <CheckBox Margin="4" Content="Option 3" Checked="chk_DoThis" />
            </StackPanel>
        </Grid>
    </Expander> 
```

单击复选框时，我会触发“已检查”事件。

有没有办法拉出一个包含扩展器的“标题”的字符串？在这个例子中，我想拉出 'expander1' 并将其分配给一个字符串。

我尝试了几种方法来做到这一点，但无法让它发挥作用。我使用 TreeViewItems 并使用 Header.Parent.ToString() 完成了同样的概念来获得我想要的东西。这里没有运气。这就是我所指的：

```
 string child = ((TreeViewItem)((TreeViewItem)((TreeView)sender).SelectedItem)).Header.ToString(); 
```

有谁知道我可以为我的 Expander 示例执行此操作的方法。谷歌搜索和搜索这个网站没有产生任何回报。这可能很容易，我只是忽略了它。

感谢任何有想法的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:48:52.050

您可以从 CheckBox 轻松获取 Expander。只需迭代到 VisualTree 并获得最顶层父级的扩展器。在下面的示例中，我只是简单地做了一个父母。

```
void MainWindow_Loaded(object sender, RoutedEventArgs e)
        {
            Expander expander = (Expander)checkBox.Parent;

            if (expander != null)
            {
                string str = expander.Header.ToString();
                Debug.WriteLine(str);
            }
        } 
```

我希望它会帮助你。

# java - Java：单链表，虚拟节点，插入

> ID：13060796
> 
> 赞同：0
> 
> 时间：2012-10-25T02:41:08.680
> 
> 标签：java, singly-linked-list

```
public class A<E> extend AbstractList<E>{

private SLNode<E> Head = new SLNode<E>
private int length = 0;     // length of the list

 // I will skip the class of SLNode<E>
 // Head's element and successor is initialized as null in the class SLNode<E>

     public void add(int index, E element)  // insert an element in the list 
     {
         // if index is less than 0 or greater than the length
          if( (index < 0) || (index > length ) )
               throw new IndexOutOfBoundsException();

          if(index ==0)
          {
              SLNode<E> newnode = new SLNode<E>(element, null);  // make new node
              newnode.setSuccessor(Head.getSuccessor());  
              Head.setSuccessor( newnode);
              length++;
          }
       } 
```

Q1。这是在列表前面添加元素的正确方法吗？（使用虚拟头节点，但没有尾） Q2。列表是空的还是非空的都一样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:02:50.310

这不是一个糟糕的方法，尽管对“head”使用“dummy”节点有点不寻常。

但它的优点是您可以将“Head”替换为“current”，将其初始化为“Head”，然后“爬取”列表`index`节点并进行插入，并且您不必将零情况特殊化.

```
 public void add(int index, E element)  // insert an element in the list 
 {
     // if index is less than 0 or greater than the length
      if( (index < 0) || (index > length ) ) {
           throw new IndexOutOfBoundsException();
      }

      // Find insertion point
      SLNode<E> current = Head;
      for (int i = 0; i < index; i++) {
          current = current.getSuccessor();
      }

      // Create & insert new node
      SLNode<E> newnode = new SLNode<E>(element, null);
      newnode.setSuccessor(current.getSuccessor());  
      current.setSuccessor( newnode);
      length++;
  } 
```

（但请注意，标准命名约定是为类名保留初始大写的名称。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T03:13:10.253

假设这是您在头部插入的方法，我不明白您为什么需要传入索引。理想情况下，我希望只有一种插入方法。但是由于您特别要求在头部插入。

```
public void addToHead(E element)  // insert an element at head
     {
         if(length==0)
             throw new Exception("head does not exist");

         element.setSuccessor(head);
         head = element;

         length++;

       } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T03:33:31.893

> Q1。这是在列表前面添加元素的正确方法吗？（使用虚拟头节点，但没有尾巴）

编辑：重新阅读您的问题并尝试您的代码后，我会说是的。

> Q2。列表是空的还是非空的都一样吗？

编辑：是的，它似乎在一个空列表上工作。

```
dummy_header_list<String> theList = new dummy_header_list<String>();
System.out.println(theList);
theList.add(0,"first add");
System.out.println(theList);
theList.add(0,"second add");
System.out.println(theList);
theList.add(0,"third add");
System.out.println(theList); 
```

给出：

```
[]
[first add]
[second add,first add]
[third add,second add,first add] 
```

有了这个 toString：

```
public String toString()
{
   String output = "[";
   SLNode<E> temp = Head.getSuccessor();
   while ( temp != null ) {
      if ( output.length() == 1 ) {
         output = output + temp.toString();
      }
      else {
          output = output + "," + temp.toString(); 
      }
      temp = temp.getSuccessor();
   }
   output = output + "]";
   return output;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T03:34:35.783

我认为您真的不需要在列表前面插入特殊情况。在此列表的前面插入与在列表中的其他任何位置插入没有什么不同。

```
public void add(int index, E element)
{
    // if index is less than 0 or greater than the length
    if ((index < 0) || (index > length))
        throw new IndexOutOfBoundsException();

    SLNode<E> previousNode = head;
    for ( int i = 0; i < index; i++ ) {
        previousNode = previousNode.getSuccessor();
    }

    SLNode<E> newNode = new SLNode<E>(element, previousNode.getSuccessor());
    previousNode.setSuccessor(newNode);
    length++;
} 
```

基本上，这只是遍历列表以找到要插入的正确节点 - 如果索引为 0，它会立即停止在开头。一旦有了要插入的节点，就执行以下三个步骤：

1.  创建一个新节点并将其后继节点设置为前一个节点的后继节点
2.  设置前一个节点的后继节点为新节点
3.  列表长度加一

我对此进行了一些小测试，它似乎工作得很好。

请注意，这种方法几乎假定 head 实际上永远不会被视为列表中的元素。它实际上只是一个开始列表的地方。我的意思是 head.getElement() 将*始终*返回 null - 它实际上并不是列表的一部分。我不确定这是否是您想要的实现，但是当您说您以 head 元素开始列表时，这似乎是最有意义的，即使列表应该是空的。

# c# - asp.net mvc - 搜索

> ID：13060798
> 
> 赞同：1
> 
> 时间：2012-10-25T02:41:40.760
> 
> 标签：c#, sql-server, asp.net-mvc, lucene.net

我有一个要求，用户可以输入关键字，搜索应该查看 4 列以匹配（名称、城市、州、邮编）并返回搜索结果。我想知道我是否应该使用 LIKE 子句、自由文本搜索、Lucene .net 等。此外，我正在使用 sql server。

优点缺点？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:13:19.883

Like 子句对于很多行来说会很慢，但对于 1k 行/年应该没问题（然后，在 10 年内你可能想要优化它）。

# asp.net-mvc-4 - MVCAwesome、MVC4 和 NuGet

> ID：13060802
> 
> 赞同：0
> 
> 时间：2012-10-25T02:42:07.413
> 
> 标签：asp.net-mvc-4, nuget

我使用 Razor 语法创建了一个新的 MVC4 项目，并使用 NuGet 添加了 MVCAwesome。

查看[此页面](http://awesome.codeplex.com/wikipage?title=Installation)，似乎所有预期的文件和配置文件都已到位。我按照指示对 Views/Web.config 进行了编辑。

但是，当我尝试引用任何 Awe() 控件时，对 Awe() 的引用以红色文本显示，并且我收到一条错误消息：**无法解析符号 Awe()**

```
@Html.Awe().DatePickerFor(model => model.BirthDate).ChangeMonth(true).ChangeYear(true) 
```

有没有人让这个工作？我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:57:56.930

仅供参考，我能够联系到这个库的维护者。事实证明，在这个较新的 NuGet 版本的控件中，您不需要 Awe() 部分。

出于某种原因， DatePickerFor 似乎仍然丢失，但我确实从包中看到了其他控件。

# visual-c++ - 在文本文件中找不到两个名称

> ID：13060806
> 
> 赞同：1
> 
> 时间：2012-10-25T02:42:26.477
> 
> 标签：visual-c++

我有一个包含 1000 行的文本文件。第一行看起来像“1 Jacob Emily”。第2-1000行就是这样。我需要编写一个程序来调用一个搜索男性姓名和女性姓名的函数。

我的输出应该是这样的：

例如，如果用户输入名称“Justice”，则程序应输出：

```
Justice is ranked 406 in popularity among boys.
Justice is ranked 497 in popularity among girls. 
```

如果用户输入名称“Walter”，则程序应输出：

```
Walter is ranked 366 in popularity among boys.
Walter is not ranked among the top 1000 girl names. 
```

这是我搜索名称的功能：

```
void name_search (string name)
{
    int rank;
    string male, female; 
    ifstream infile;
    bool male_found = false, female_found = false;

    infile.open ("babynames2004.txt");

    if (infile.fail())
    {
        cout << "The file was corrupt.\n";
    }

    while (!infile.eof() && male_found == false && female_found == false)
    {
        infile >> rank >> male >> female;

        if (name == male)
            male_found=true;
        else if (name == female)
            female_found=true;
    }

    if(male_found == true && female_found != true)
    {
        cout << name << " is ranked " << rank << " in popularity among boys.\n";
        cout << name << " is not ranked among the top 1000 girl names.\n";
    }
    else if (male_found != true && female_found == true)
    {
        cout << name << " is not ranked among the top 1000 boys names.\n";
        cout << name << " is ranked " << rank << " in popularity among girls.\n";
    }
    else if (male_found == true && female_found == true)
    {
        cout << name << " is ranked " << rank << " in popularity among boys.\n";
        cout << name << " is ranked " << rank << " in popularity among girls.\n";
    }
    else if (male_found != true && female_found != true)
    {
        cout << name << " is not ranked among the top 1000 boys names.\n";
        cout << name << " is not ranked among the top 1000 girl names.\n";
    }

    infile.close();
} 
```

这是调用该函数的程序的输出（因为没有更好的句子）。

```
This program allows you to search for the rank of a name from a list of the 1000 
```

2004 年最受欢迎的男性和女性婴儿名字。

输入您要搜索的名字： Jacob Jacob 在男孩中的人气排名第一。雅各布没有跻身前 1000 名女孩名字之列。

你想再次运行这个程序吗？（是或否） y 此程序允许您从 2004 年 1000 个最受欢迎的男性和女性婴儿名字列表中搜索一个名字的排名。

输入您要搜索的名字：Emily Emily 未跻身前 1000 名男孩名字之列。艾米丽在女孩中的人气排名第一。

你想再次运行这个程序吗？（是或否） y 此程序允许您从 2004 年 1000 个最受欢迎的男性和女性婴儿名字列表中搜索一个名字的排名。

输入您要搜索的名字： Jordan Jordan 在男孩中的人气排名第 43 位。乔丹没有进入前1000名的女孩名字。

你想再次运行这个程序吗？（是或否）

Jordan 这个名字出现在男性的第 43 行和女性的第 70 行。问题似乎是，当名称同时出现在男性姓名和女性姓名时，输出错误。顺便说一句，这是一门编程课的作业，这门课就像一场游戏。这不是关于实际学习编程，所以我仅限于在课堂上教授的基本结构。

谁能告诉我这是为什么？

# java - 在 case 内使用 if、else if、else 和循环进行切换

> ID：13060807
> 
> 赞同：6
> 
> 时间：2012-10-25T02:42:36.807
> 
> 标签：java

出于我的问题的目的，我只包括了案例 1，但其他案例是相同的。假设 value 当前为 1，我们转到案例 1，我们的 for 循环遍历数组以查看每个元素是否与whatever_value 变量匹配。在这种情况下，如果确实如此，我们将 value 变量声明为等于 2，然后跳出循环。问题是，当我突出显示另一个中断（在 Eclipse 中）时，它表示中断也附加到 for 语句，但我只希望将 for 语句附加到 if 语句，而不是 else if 语句出色地。我认为因为 for 语句没有括号，所以它只会循环 if 语句，但 eclipse 另有说明（否则 if 也会从 0 循环到数组的长度）。

```
 switch (value) {
  case 1:
     for (int i = 0; i < something_in_the_array.length; i++)
        if (whatever_value == (something_in_the_array[i])) {
           value = 2;
           break;
        } else if (whatever_value == 2) {
           value = 3;
           break;
        } else if (whatever_value == 3) {
           value = 4;
           break;
        }
     break;
  case 2:

  // code continues.... 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T02:49:24.837

你的问题.....我认为你的 for 循环包含所有的`if`,`else if`东西 - 这就像一个声明，就像 hoang nguyen 指出的那样。

改成这个。请注意表示 for 循环运行的代码块的括号以及第一个更改`else if`为`if`.

```
switch(value){

    case 1:
        for(int i=0; i<something_in_the_array.length;i++) {
            if(whatever_value==(something_in_the_array[i])) {
                value=2;
                break;
             }
        }

        if(whatever_value==2) {
            value=3;
            break;
        }
        else if(whatever_value==3) {
            value=4;
            break;
        }
        break;

    case 2:

code continues.... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T02:52:38.910

在这种情况下，我建议使用中断标签。

[http://www.java-examples.com/break-statement](http://www.java-examples.com/break-statement)

这样您就可以在 for 循环之外专门调用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T02:52:28.927

> 但我只希望将 for 语句附加到 if 语句，而不是 else if 语句。

好吧摆脱那个`else`。如果`else if`不应该是的一部分，则将`for`其写为：

```
 for(int i=0; i<something_in_the_array.length;i++)
                if(whatever_value==(something_in_the_array[i]))
                {
                    value=2;
                    break;
                }

           if(whatever_value==2)
           {
                value=3;
                break;  // redundant now
           }

           else if(whatever_value==3)
           {
                value=4;
                break;  // redundant now
           } 
```

话说回来：

*   完全不清楚你在这里真正想要做什么，
*   没有`else`循环中的部分在这里似乎没有多大意义，
*   很多人（包括我自己）认为总是使用大括号......这样人们在阅读代码时就不会被不正确的缩进绊倒。（在这种情况下，它可能会帮助我们弄清楚你在这里真正想要做什么......）

最后，如果将左大括号放在前一行的末尾，大括号就不那么突兀了；例如

```
 if (something) {
     doSomething();
  } 
```

而不是：

```
 if (something) 
  {
     doSomething();
  } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-25T02:52:46.353

似乎是一种家常便饭的做事方式，但是如果您必须...您可以对其进行重组以满足您的需求：

```
boolean found = false;

case 1:

for (Element arrayItem : array) {
    if (arrayItem == whateverValue) {
        found = true;    
    } // else if ...
}
if (found) {
    break;
}
case 2: 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-25T02:52:58.723

如果您需要该`for`语句仅包含`if`，则需要删除其`else`，如下所示：

```
for(int i=0; i<something_in_the_array.length;i++)
    if(whatever_value==(something_in_the_array[i]))
    {
        value=2;
        break;
    }

    /*this "else" must go*/
    if(whatever_value==2)
    {
        value=3;
        break;
    }

    else if(whatever_value==3)
    {
        value=4;
        break;
    } 
```

# jquery - JQuery 动画 DIV 并保持居中

> ID：13060810
> 
> 赞同：0
> 
> 时间：2012-10-25T02:43:15.460
> 
> 标签：jquery, jquery-animate

我有以下代码来演示我想制作动画的表单框：

[http://jsfiddle.net/sv33r/1/](http://jsfiddle.net/sv33r/1/)

JS代码是：

```
$(".login-form").click(function() {
    $(".login-form").animate({width:500, height: 300});
    $(".footer").animate({width:430, height: 95});
});
​ 
```

HTML是：

```
<div id="wrapper">    
    <form name="login-form" class="login-form" action="" method="post">
    <div class="gradient"></div>
      <div class="header">
        <h1>Logo here</h1>
        <span>test</span></div>

        <div class="content">
            blah    
        </div>

      <div class="footer">
        <input type="button" name="submit" value="Click to test grow" class="register" />
        </div>    
    </form>
</div>​ 
```

目前它只是重新调整大小而不在屏幕上重新居中。

为了做到这一点，我需要添加什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T03:02:01.120

如果您使用的是#wrapper div，最好将动画应用于该元素。像这样：

```
$("#wrapper").click(function() {
    $("#wrapper").animate({width:500, height: 300});
    $(".footer").animate({width:430, height: 95});
}); 
```

​然后，在你的css中从“.login-container”中删除以下规则：300px（你不需要这个，因为你在“#wrapper”元素中定义了相同的宽度）

[这是小提琴中的示例](http://jsfiddle.net/sv33r/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T03:00:17.360

将 css #wrapper width: 300px 更改为 min-width: 300px 从

```
#wrapper {
    height: 400px;
    margin: 70px auto;
    width: 300px;
} 
```

至

```
#wrapper {
    height: 400px;
    margin: 70px auto;
    min-width: 300px;
} 
```

# asp.net-mvc-3 - 模型 - 在数据项目或 Web 项目中？

> ID：13060812
> 
> 赞同：0
> 
> 时间：2012-10-25T02:43:52.680
> 
> 标签：asp.net-mvc-3, model-view-controller, models

创建新的 ASP.NET MVC3 应用程序时，默认项目中有一个`Models`文件夹。此`Models`文件夹包括`AccountModels`- `RegisterModel`、`LoginModel`等。

我有一个单独的 DAL 项目 - 它包括 a`repository`和 a `service`。

现在，我有一个方法`service`：

`TblUser Register(RegisterModel model);`

为此，我必须在我的数据项目中引用 Web 项目。

这是合适的，还是应该将我的`Models`文件夹包含在我的数据项目中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:14:55.083

您的第一个选项不合适。这就是所谓的循环依赖，它很糟糕。

您的第二个选择更好，但仍然不是很好。您的模型类无疑将具有仅适用于您的 ui 的字段和方法。它们不属于您的数据层，就像您的数据对象不属于您的 Web 层一样。这是耦合的一个例子——也称为关注点分离不佳——而且它也很糟糕。

最好的选择是将两层所需的数据分离到一组不同的类中（有时称为 dto 的 - 数据传输对象 - 或 poco 的 - 普通的旧类对象）。根据您的需要，这些类可以驻留在您的数据项目中或完全属于自己的项目中。如果您的服务驻留在 WCF 服务中，则这些类通常是 DataContracts。然后，在您的 MVC 项目中，您应该拥有您的模型，就像它们现在一样，但它们应该包含对您的 POCO 的引用，而不是保存它们自己的任何数据。因此，在您的特定情况下，您将在数据项目中创建一个 RegistrationInfo 类（或任何您想调用的类），然后将一个 RegistrationInfo 类型的字段添加到您的模型并将其传递给您的服务而不是整个 RegistrationModel。

编辑：添加了一个例子

```
namespace MyProject.Data.Objects {
    public class RegistrationInfo {

        [Required]
        public string Username { get; set; }

        [Required]
        public string Password { get; set; }

        [Required]
        public string Email { get; set; }

    }
}

namespace MyProject.Data {
    public class MyService {
        public TblUser Register(RegistrationInfo info) {
            // .. save to the database ..
        }
    }
}

namespace MyProject.UI.Models {
    class RegistrationModel {
        public RegistrationInfo Info { get; set; }

        /* Fields which the ui needs but the database does not */
        public bool ConfirmPassword { get; set; }
        public bool AllowFreeEmailAddresses { get; set; }

        public void Save() {
            new MyProject.Data.MyService().Register(this.Info);
        }

        public RegistrationModel() {
            this.Info = new RegistrationInfo();
        }
    }
} 
```

# c# - 在鼠标单击和鼠标释放时运行操作

> ID：13060814
> 
> 赞同：0
> 
> 时间：2012-10-25T02:44:08.880
> 
> 标签：c#, winforms, mouseevent

我正在开发一个 Windows Form C# 项目，该项目需要在用户单击按钮时运行代码，然后等待，然后在用户释放鼠标按钮时运行一组不同的代码。我已经尝试过 Button1.MouseDown 和 MouseUp 作为我搜索此信息时的建议，但这些都不起作用。

有谁知道如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T02:51:30.337

在 Visual Studio 中，尝试单击按钮并在属性中查看“事件”菜单。您可能需要向下滚动并找到事件“MouseDown”和事件“MouseUp”。

双击每一个，这将加载要使用的类。

在其中，您可以添加您的代码。

如果您希望以 100 毫秒的速度运行，您可以创建一个计时器，并且如果用户单击按钮并按住，那么计时器就会运行，并且在他释放的那一刻，您可以在其中使用 timer1.stop();

# android - android错误IllegalArgumentException

> ID：13060820
> 
> 赞同：0
> 
> 时间：2012-10-25T02:44:53.900
> 
> 标签：android, illegalargumentexception

我在我的代码中找不到以下错误。看起来问题出在异步任务 onpostexecute 中。

```
java.lang.IllegalArgumentException: View not attached to window manager
at android.view.WindowManagerImpl.findViewLocked(WindowManagerImpl.java:672)
at android.view.WindowManagerImpl.removeView(WindowManagerImpl.java:368)
at android.view.WindowManagerImpl$CompatModeWrapper.removeView(WindowManagerImpl.java:160)
at android.app.Dialog.dismissDialog(Dialog.java:319)
at android.app.Dialog.dismiss(Dialog.java:302)
at www.mobilezar.mn.Advertisements$InitialLoading.onPostExecute(Advertisements.java:216)
at www.mobilezar.mn.Advertisements$InitialLoading.onPostExecute(Advertisements.java:1)
at android.os.AsyncTask.finish(AsyncTask.java:631)
at android.os.AsyncTask.access$600(AsyncTask.java:177)
at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4898)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
at dalvik.system.NativeStart.main(Native Method) 
```

# c# - 请求Url#没有？

> ID：13060826
> 
> 赞同：-1
> 
> 时间：2012-10-25T02:45:28.857
> 
> 标签：c#, http, request

如何获取变量 access_token ？

[http://web.com/FBAout.aspx#access_token=AAACsvdmyOAgBAL1dVbN1t1ydGQNG4LvZCGjtJM6oXkO6IUObDdJsZBYqHQbTq401mvzD0cXMdsAOZAPEBnIxYF58zCv8ZBcErcsaWL4QOo6MxnPF10ZCRPL&expires_in=](http://web.com/FBAout.aspx#access_token=AAACsvdmyOAgBAL1dVbN1t1ydGQNG4LvZCGjtJM6oXkO6IUObDdJsZBYqHQbTq401mvzD0cXMdsAOZAPEBnIxYF58zCv8ZBcErcsaWL4QOo6MxnPFZCRPL&expires_in=5103)

问题是 url 使用 # 不？

任何身体帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:23:21.133

在服务器端获取哈希 (#) 之后的值是不可能的，因为它们不是由浏览器发送的。

最好的机会是从 javascript 中检索它们，然后将其发布到您的服务器。

# c# - 计算与 ListView 中指定字符串匹配的项目数

> ID：13060838
> 
> 赞同：2
> 
> 时间：2012-10-25T02:46:35.153
> 
> 标签：c#, .net, listview

我正在尝试计算 ListView 中与“保留”匹配的项目数。我有以下代码，但计数不正确。

```
public void update_seat(ListView lstv1, Label lbl1, Label lbl2)
{
   foreach (ListViewItem liv in lstv1.Items)
   {
      if (liv.SubItems[1].Text == "Reserved")
      {
         liv.Selected = true;

         int y = lstv1.SelectedItems.Count;
         lbl1.Text = y.ToString();

      }      
   }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:48:39.163

从下图中可以看出，下面的代码计算了指定列中出现的次数。您只需要调整`SubItems[int]`零件中的整数。

```
public void update_seat(ListView lstv1, Label lbl1, Label lbl2)
{
    int count = 0;

    foreach (ListViewItem item in lstv1.Items)
    {
            if (item.SubItems[0].Text == "Reserved")
                count++;
    }
} 
```

![在此处输入图像描述](../Images/7f8db4785221309892b759f57e17c3be.png)

# search-engine - 如何在没有搜索引擎 API 的情况下衡量或比较任意词的相对频率？

> ID：13060843
> 
> 赞同：1
> 
> 时间：2012-10-25T02:47:34.650
> 
> 标签：search-engine, frequency, text-processing, google-search-api, text-analysis

不止一次，我想以编程方式使用互联网上的使用频率作为启发式方法来选择两个单词或短语中更好的一个。

显而易见的方法以及手动执行的方法是将每个术语输入搜索引擎并注意有多少“点击”。

但是大型搜索引擎已经弃用了他们的搜索 API，或者每天免费查询 100 次，即使使用 API 密钥也是如此。如果您正在从事免费项目，那就不好了。大型搜索引擎在其服务条款中也有“禁止抓取”条款。

我需要它来处理任意的，甚至是无法识别的语言，以及存储空间有限的设备。这排除了拥有本地语料库或数据库的可能性。

* * *

一个应用领域是用于维基词典编辑的工具，即使他们不懂语言，也能帮助他们选择几种变体的主要拼写。我现在想到的是使用频率作为一种启发式方法，以帮助在外国文字的拼写和拉丁字母的有损音译之间选择最佳转换。

# perl - 使用案例语句从使用 Perl 的网页中检索信息

> ID：13060844
> 
> 赞同：-3
> 
> 时间：2012-10-25T02:47:38.340
> 
> 标签：perl

我目前正在尝试提取和分解包含温度读数的网页的信息。当谈到 Perl 时，我是一个完整的初学者，但我遇到了一些麻烦。我试图从中提取信息的页面是：[http](http://temptrax.itworks.com/temp) ://temptrax.itworks.com/temp 。到目前为止，我能够弄清楚如何获取页面并使用 split 将四个温度读数分成四行。到目前为止，这是我能想到的：

```
#!/usr/bin/perl
use warnings;
use LWP::Simple;
use v5.10.1;

my $content = get('http://temptrax.itworks.com/temp');
my @split = split ('Probe',$content);

foreach my $split(@split){
$split =~ s/'Probe''|'/ /g;

print $split . "\n";

} 
```

我遇到问题的下一步是使用案例语句分离四个温度读数。我不太明白该怎么做。在给出特定数字 1-4 时，我希望能够分别获得每个探头的读数。最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:44:37.317

通过直接解析成散列，我们可以简单地遍历键，或者对数据结构做任何其他想做的事情。不需要`case`。顺便说一句，该`Switch`模块已被弃用，实际上不应该使用。

```
#!/usr/bin/env perl

use strict;
use warnings;

use LWP::Simple;

my $content = get('http://temptrax.itworks.com/temp');
my %probes = $content =~ /Probe\s*(\d)\|\s*(\-?[\d\.]+)/g;

foreach my $probe (sort keys %probes) {
  print "$probe => $probes{$probe}\n";
} 
```

正则表达式可以这样解释（甚至替换）：

```
my %probes = $content =~ /
  Probe\s*      # starts with Probe
  (             # start capture
    \d            # a number (probe)
  )             # end capture
  \|\s*         # separated with a pipe symbol
  (             # start capture
    \-?           # possibly negative
    [\d\.]+       # digits or decimals (at least one)
  )             # end capture
/gx; 
```

# mysql - 是否有将 git diff 输出转换为 SQL INSERT 和 DELETE 语句的工具？

> ID：13060845
> 
> 赞同：0
> 
> 时间：2012-10-25T02:47:38.973
> 
> 标签：mysql, wordpress, git

我正在开发一个 WordPress 网站，在我的笔记本电脑上进行开发，然后通过将 git 推送到服务器来部署更改。这对文件很有用，我想对数据库的内容更改做同样的事情。

我在解决问题的第一次迭代中使用 git hooks`mysqldump`在提交前使用转储数据库，然后在结帐后恢复转储。这有效，但每次都会删除并重新创建整个数据库。这是不行的，因为 WordPress 还会自动更改我想要保留的数据库，比如销售哪些产品的记录，所以我不希望在每次结账时都删除并恢复整个事情。

我认为更好的解决方案是在提交期间继续转储数据库，然后在签出时使用一个新工具，该工具读取输出`git diff HEAD^`并将其转换为输入到`mysql`. 这样，数据库将随着我的更改逐步修补，同时保留其他人（例如 WordPress）所做的更改。例子：

混帐差异：

```
 (83,NULL,550,'TI-99/4A','',0,0,0,0,'',0,0,0),
-(85,NULL,2000,'Banana Jr. 6000','',0,0,0,0,'',0,0,0),
+(85,NULL,2000,'Banana Jr. 6000 (now with tint control!)','',0,0,0,0,'',0,0,0),
 (88,NULL,150,'Symbolics 3645','',0,0,0,0,'',0,0,0), 
```

转换为 SQL：

```
DELETE FROM `wp_yak_product` WHERE `post_id`='85';
INSERT INTO `wp_yak_product` VALUES (85,NULL,2000,'Banana Jr. 6000 (now with tint control!)','',0,0,0,0,'',0,0,0); 
```

我四处寻找，找不到这样的东西。我正在考虑自己写。

这样的事情存在吗？这是个好主意还是坏主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:45:29.633

我想到了一种可能的方法：

我将数据库转储到每个表的不同文件中：

```
wp_commentmeta.sql
wp_comments.sql
wp_links.sql 
```

等等

也许我可以将表格分为内容与簿记的类别，例如[Unix中的](http://www.linuxfoundation.org/collaborate/workgroups/lsb/fhs)[`usr`和`var`](http://www.linuxfoundation.org/collaborate/workgroups/lsb/fhs)目录之间的区别，并将簿记表添加到我的目录中，`.gitignore`这样当我更新内容时它们就不会被破坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T02:55:18.390

据我所知，这种工具不存在。我所知道的产生类似输出的最佳选择是使用[MySQL Workbench中的“](http://www.mysql.com/downloads/workbench/)[同步模型](http://dev.mysql.com/doc/workbench/en/wb-database-synchronization.html)”功能。

也就是说，我建议您在 SQL 文件中跟踪您在开发数据库中所做的更改，并检查到 git 中，该文件可以在您的生产服务器上执行。

# python - 使用 Python 框架的可扩展本地 HTTP 服务器

> ID：13060853
> 
> 赞同：1
> 
> 时间：2012-10-25T02:49:42.053
> 
> 标签：python, localhost, web-frameworks, httpserver

我正在尝试使用 Python 构建桌面应用程序。为了使其能够在尽可能多的平台上使用，我认为 Web UI 可能是一个不错的选择。这归结为首先制作本地 HTTP 服务器的问题。我做了一些调查，发现人们主要在谈论 BaseHTTPServer 和 SimpleHTTPServer。对于原型设计，对它们进行子类化可能就足够了。

除了纯原型，我还想留一些空间来扩展实际服务。也就是说，一旦成熟，我想将代码移动到一个真正的专用 HTTP 服务器上，这样最终用户只需要一个浏览器就可以使用它。

我在以下意义上说“可扩展”：

*   在迁移过程中代码修改尽可能少。
*   我将专注于原型设计阶段的算法。我也想给未来的前端设计师留点空间。

看起来 WSGI + Django 是一个被广泛提及的组合。经过一番搜索，我发现在 apache 或 nginx 中使用 WSGI。是否可以使用自包含模块？即wsgiref + Django，这样我就可以从一个入口脚本开始一切。我不想通过要求他们安装 apache 并对其进行配置来打扰潜在的首次采用者。如果您有示例代码或指针以供进一步阅读，那将是非常好的。

我是 Python 和 Python 中的 Web 编程的新手。谢谢你的帮助。我只是想确保我走在正确的轨道上。我的底层算法是在 Python 2.7 中实现的。所以 UI 解决方案最好也在 Python 2.7 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:02:25.510

我想你可能想要的是`Bottle`. 它是一个只需要安装标准库的 Web 框架。它还与许多其他生产服务器兼容，并与它自己的开发服务器一起提供。如果这还不够好，它们都在一个*文件*中，并且支持许多不同的模板语言，以及它自己内置的模板语言。

在这里查看：http: [//bottlepy.org/docs/dev/](http://bottlepy.org/docs/dev/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T03:14:51.293

如前所述，瓶子是一个不错的选择，我个人喜欢 Flask，如果我没记错的话，它就是瓶子的基础。无论如何，真正让 Flask 使用起来很愉快的三件事。

*   [蓝图](http://flask.pocoo.org/docs/blueprints/)——本质上是一种应用架构
*   [Flask-Sijax](http://packages.python.org/Flask-Sijax/) - 允许彗星技术
*   [Celery](http://celeryproject.org/) - 基于分布式消息传递的异步任务队列/作业队列

还有很多其他插件，包括一个用于管理界面的插件，我还没有尝试过，但它看起来很有希望，它适用于 Python 2.7

# c# - storageFolder.CreateFileAsync 期间出现 UnauthorizedAccessException

> ID：13060857
> 
> 赞同：0
> 
> 时间：2012-10-25T02:50:18.577
> 
> 标签：c#, windows-8, windows-store-apps, microsoft-metro

我有以下一段代码

```
 // Point to c:\users\yancheng\documents\visual studio 2012\Projects\App5\App5\bin\x86\Debug\AppX
    StorageFolder storageFolder = Windows.ApplicationModel.Package.Current.InstalledLocation;

    StorageFile file = await storageFolder.CreateFileAsync("1000.txt");

    if (file != null)
    {
        using (IRandomAccessStream writeStream = await file.OpenAsync(FileAccessMode.ReadWrite))
        {
            using (DataWriter dataWriter = new DataWriter(writeStream))
            {
                dataWriter.WriteInt32(1000);
            }
        }
    } 
```

我已通过 启用所有权限`Package.appxmanifest`。但是，我不确定为什么我仍然`UnauthorizedAccessException`在`storageFolder.CreateFileAsync`.

还有什么我错过的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:23:56.510

您正在尝试在应用程序的安装文件夹中创建一个文件。此位置是只读位置（请参阅[http://msdn.microsoft.com/en-us/library/windows/apps/hh967755.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh967755.aspx)）。

如果应用程序是由 Visual Studio 安装的，那么奇怪地将文件复制到此文件夹并从中删除文件是可能的，我在 Microsoft Connect 中报告了这个错误。总而言之，应用程序应该无法更改安装文件夹的任何内容。

应用程序只允许写入通过 ApplicationData 和 KnownFolders 到达的文件夹。在后一种情况下，必须声明相应的功能和文件类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T03:37:29.140

根据您上面的评论，我假设您已经检查了 package.appxmanifest 中的“文档库”功能。

查看[StorageFolder.CreateFileAsync 文档中](http://msdn.microsoft.com/en-us/library/windows/apps/br227250.aspx#Y174)的备注。它说：“如果您尝试在库或文件组等虚拟文件夹中创建文件，此方法可能会失败。” 然后在示例部分，它显示了使用 Windows.Storage.KnownFolders.documentsLibrary.createFileAsync() 在文档库中创建新文件的不同方法。你可以试试看它是否有效？

# python - NLTK 标记化问题

> ID：13060859
> 
> 赞同：1
> 
> 时间：2012-10-25T02:50:38.287
> 
> 标签：python, nltk

这里只是一个关于 NLTK 的快速初学者问题。我正在尝试从语料库中标记并生成二元组、三元组和四元组。

如果有的话，我需要添加`<s>`到列表的开头和`</s>`结尾以代替句点。

该列表取自 nltk 中的棕色语料库。（以及那个特定的部分）

所以我有

```
from nltk.corpus import brown
news = brown.sents(categories = 'editorial') 
```

我让这太难了吗？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T03:18:41.740

```
import nltk.corpus as corpus

def mark_sentence(row):
    if row[-1] == '.':
        row[-1] = '</s>'
    else:
        row.append('</s>')
    return ['<s>'] + row

news = corpus.brown.sents(categories = 'editorial')
for row in news[:5]:
    print(mark_sentence(row)) 
```

产量

```
['<s>', 'Assembly', 'session', 'brought', 'much', 'good', '</s>']
['<s>', 'The', 'General', 'Assembly', ',', 'which', 'adjourns', 'today', ',', 'has', 'performed', 'in', 'an', 'atmosphere', 'of', 'crisis', 'and', 'struggle', 'from', 'the', 'day', 'it', 'convened', '</s>']
['<s>', 'It', 'was', 'faced', 'immediately', 'with', 'a', 'showdown', 'on', 'the', 'schools', ',', 'an', 'issue', 'which', 'was', 'met', 'squarely', 'in', 'conjunction', 'with', 'the', 'governor', 'with', 'a', 'decision', 'not', 'to', 'risk', 'abandoning', 'public', 'education', '</s>']
['<s>', 'There', 'followed', 'the', 'historic', 'appropriations', 'and', 'budget', 'fight', ',', 'in', 'which', 'the', 'General', 'Assembly', 'decided', 'to', 'tackle', 'executive', 'powers', '</s>']
['<s>', 'The', 'final', 'decision', 'went', 'to', 'the', 'executive', 'but', 'a', 'way', 'has', 'been', 'opened', 'for', 'strengthening', 'budgeting', 'procedures', 'and', 'to', 'provide', 'legislators', 'information', 'they', 'need', '</s>'] 
```

# python - 如何检查 mechanize for python 中的复选框并运行与该复选框关联的事件？

> ID：13060864
> 
> 赞同：1
> 
> 时间：2012-10-25T02:51:42.170
> 
> 标签：python, mechanize-python

问题是表单有一个带有事件的复选框：

```
<input id="CheckBox1" type="checkbox" name="CheckBox1" checked="checked" onclick="javascript:setTimeout(&#39;__doPostBack(\&#39;CheckBox1\&#39;,\&#39;\&#39;)&#39;, 0)" /> 
```

当我尝试检查时，复选框确实被选中：

`CheckboxControl(CheckBox1=[*on])>`

但该事件没有运行。

我尝试使用`br.submit()`，但发生的情况是复选框未选中：

`CheckboxControl(CheckBox1=[on])>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:22:12.090

Mechanize 根本不包含 javascript 解释器。你需要一个“无头浏览器”。

# python - 如何验证生日是否已过？

> ID：13060865
> 
> 赞同：0
> 
> 时间：2012-10-25T02:52:03.157
> 
> 标签：python, date, if-statement, case

这与我的上一个问题相似。但是在这里我想知道如何知道一个人是否可以做某事，例如：

如果 joe 不到 21 岁，他就不能喝酒，用生日来告诉你他能不能喝。不使用导入或日历，试图掌握它

到目前为止，这就是我想出的。

```
dateStr = input("Today's Date: ")
monthStr, dayStr, yearStr = dateStr.split("/")
months = ["January", "February","March", "April", "May", "June", "July", "August","September","October", "November","December"]
monthStr = months[int(monthStr)- 1]
print ("The converted date is:", monthStr, dayStr+",", yearStr)
print("Joe did NOT have his birthday this year!")
Joe's birthday = True
for chr in dateStr:
  tv = True
  if:
    (i<= 13)
    print("Joe is Not allowed to watch TV.")
  else:
    print("Joe is allowed to watch TV.")
driving = True
if:
  (i<= 16)
    print("Joe is NOT Allowed to drive")
else:
  print("Joe is allowed to drive")
  drinking = True 
if:
  (i<= 21)
    print("Joe is NOT allowed to drink.")
else:
  print("Joes is allowed to drink.") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T02:54:37.730

我假设这是一个分配，无论如何检查[datetime](http://docs.python.org/library/datetime.html)模块，它真的很方便生成和比较日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T03:44:37.337

这似乎是一个分配问题，您还应该检查[dateutil.parser](http://labix.org/python-dateutil#head-a23e8ae0a661d77b89dfb3476f85b26f0b30349c)，它可以自动转换不同格式的日期，因此您不必自己解析它们。

# iphone - UITextView 没有在属性更改时触发 textViewDidChange？

> ID：13060868
> 
> 赞同：3
> 
> 时间：2012-10-25T02:52:17.787
> 
> 标签：iphone, uitextview

我有一个`UITextView`配置了一个代表。我已通过设置`allowsEditingTextAttributes`为启用编辑属性`YES`。

当用户在文本视图中键入一个字符时，代理会收到 `textViewDidChange`: 消息。

但是当用户更改属性时（例如进行选择并点击粗体或斜体），没有`textViewDidChange`: 消息。

该文档特别指出`textViewDidChange`：当用户更改属性时应该收到一条消息：

> 告诉代理指定文本视图中的文本或属性已被用户更改。

但这对我不起作用。我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T13:53:25.460

我在 iOS 6 中测试了这个场景并得到了完全相同的结果：“选择”弹出窗口中的属性更改没有触发该 `textViewDidChange:`方法。这似乎是一个错误，或者文档需要澄清什么类型的属性更改会触发此事件。

一种可能的解决方法是实现该`textViewDidChangeSelection:`方法。每当进行选择时都会调用它（用户在更改属性之前必须这样做）。检查 selectedRange.length 是否 > 0（这意味着已经选择了一个实际的单词，而不是仅仅移动光标），然后保存该 selectedRange。一旦长度再次为零，这意味着他们取消选择该项目。那时，您可以采用先前的范围并使用文本。

```
- (void)textViewDidChangeSelection:(UITextView *)textView
{
    static BOOL rangeSet = NO;
    static NSRange mySelectedRange;
    if( textView.selectedRange.length > 0 && !rangeSet )
    {
        mySelectedRange = textView.selectedRange;
        rangeSet = YES;
    }
    else if( textView.selectedRange.length == 0 && rangeSet)
    {
        // Work with text
        NSLog(@"Working with previously select text: %d, %d", mySelectedRange.location, mySelectedRange.length);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T04:37:42.897

在[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextViewDelegate_Protocol/Reference/UITextViewDelegate.html)中还提到了

```
This method is not called in response to programmatically initiated changes 
```

因此，如果您以编程方式设置粗体或斜体，则它不会调用此委托方法

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T04:34:47.517

请检查您是否在 .h 文件中设置了 UITextViewDelegate。你也必须`make

```
yourTextView.delegate = self 
```

这样您的文本视图将控制您当前的课程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-01T00:33:44.120

我通过继承 UITextView、覆盖`toggleBoldface:`和`toggleItalics:`方法以及从这些方法`toggleUnderline:`调用来解决这个问题。[这个答案](https://stackoverflow.com/a/20233093/462162)帮助我弄清楚了。`[self.delegate textViewDidChange:self]`

# c# - c#如何进行类似于OneNote Windows + S 快捷键的屏幕剪辑

> ID：13060871
> 
> 赞同：0
> 
> 时间：2012-10-25T02:52:28.207
> 
> 标签：c#, screen, overlay, onenote

我想实现与[OneNote](http://blogs.office.com/b/microsoft-onenote/archive/2010/09/14/my-favorite-back-to-school-features-in-onenote-2010.aspx)类似的屏幕剪辑功能。基本上它可以在整个屏幕上绘制一个半透明的叠加层，还可以冻结屏幕，以便用户可以剪切其中的一部分。

我已经做了一些研究，似乎最简单的方法是创建一个具有整个屏幕大小的半透明 TopMost 表单，然后在此表单上执行剪辑。然而，这种方法是缓慢的。我看到了一些关于为绘制覆盖做 Direct3D 钩子的其他建议，但这可能太复杂了，我不确定它相对于不同的 Direct3D 版本有多稳定。任何想法 OneNote 是如何做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:55:12.457

我认为与其在屏幕顶部创建透明层，不如抓取整个屏幕的屏幕截图并使其全屏显示。因此，用户正在绘制静态图像而不是半透明图层。由于它已经是屏幕截图，因此它已经被冻结。我认为无论如何他们都是这样做的，我怀疑应用程序可以简单地冻结屏幕，他们拍摄照片并用它覆盖您的屏幕，所以它就好像它被冻结了。

# html - 使用带有 html5 的“img”标签

> ID：13060874
> 
> 赞同：0
> 
> 时间：2012-10-25T02:52:44.690
> 
> 标签：html

曾经有人告诉我，html 中的“img”标签必须嵌套在诸如 p 标签之类的元素中。这是真的？还是被误导了？

```
<p><img src "img/mittromneylittleface.png" alt="drinks" /></p> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T03:05:12.700

好吧，如果您*曾经*被告知过，那么您是在 HTML 4 的上下文中被告知的。请在[此处](http://www.w3.org/TR/html4/sgml/dtd.html)查看 HTML 4 Strict 的 DTD 。

您将看到这`IMG`是一个`%inline`元素，但 HTML`BODY`元素只能包含`%block`、`SCRIPT`、`INS`和`DEL`元素：

```
<!ELEMENT BODY O O (%block;|SCRIPT)+ +(INS|DEL) -- document body -->

<!ENTITY % block 
   "P | %heading; | %list; | %preformatted; | DL | DIV | NOSCRIPT |
    BLOCKQUOTE | FORM | HR | TABLE | FIELDSET | ADDRESS"> 
```

所以如果你想验证 HTML 4 strict，你肯定应该包含`IMG`里面的 a`P`或类似的。在验证器上试一下，你会看到：

> 文档类型在此处不允许元素“IMG”；缺少“P”、“H1”、“H2”、“H3”、“H4”、“H5”、“H6”、“DIV”、“ADDRESS”开始标签之一

现在，在 HTML 5 中，您**可以**在`img`元素正下方放置一个`body`元素。[在此处](http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#the-body-element)`body`查看元素的定义。它说元素的内容模型是：`body`

> 流量内容

如果您查找 Flow 内容，您将看到这`img`是允许的！

# objective-c - 在objective-c中检查并返回一个非常量整数

> ID：13060882
> 
> 赞同：0
> 
> 时间：2012-10-25T02:53:43.297
> 
> 标签：objective-c, xcode, http

参考以下问题“ [String contains string in objective-c](https://stackoverflow.com/questions/2753956/string-contains-string-in-objective-c "字符串包含objective-c中的字符串") ”，我有一个返回以下标头的 HTTP 服务器：

PS无法附上截图，因为我是新用户，而是使用块引用:(

> HTTP 标头：{
> 
> -信息省略-
> 
> Server = "HTTP Client Suite (Test case number:21)";

我为从 HTTP 服务器获取响应而编写的代码块是：

```
 - (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    *- code omitted -*

     // **HTTP header field**

    // A dictionary containing all the HTTP header fields of the receiver
    // By examining this dictionary clients can see the “raw” header information returned by the server
    NSDictionary *headerField = [[NSDictionary alloc]initWithDictionary:[(NSHTTPURLResponse *)httpResponse allHeaderFields]];

    // Call headerField dictionary and format into a string
    NSString *headerString = [NSString stringWithFormat:@"%@", headerField];

    NSLog(@"HTTP Header: %@",headerString);

    // String to match (changeable) and temporary string to store variable
    NSString *stringToMatch = @"Test case number";
    NSString *tempString = @"";

    // Check if headerString contains a particular string
    // By finding and returning the range of the first occurrence of the given string (stringToMatch) within the receiver
    // If the string is not found/doesn't exists
    if ([headerString rangeOfString:stringToMatch].location == NSNotFound)
    {
        NSLog(@"Header does not contain the string: '%@'", stringToMatch);
        tempString = NULL;
        NSLog(@"String is %@", tempString);
    }
    else
    {
        NSLog(@"Header contains the string: '%@'", stringToMatch);
        tempString = stringToMatch;
        NSLog(@"String is '%@'", tempString);
    }

} 
```

我在这里所做的是实际查看字符串“测试用例编号”是否存在。如果是这样，那么我想提取数字 21 并将其存储在使用 NSInteger 的变量中，现在的问题是数字是可变的而不是恒定的（它每次都会根据 HTTP 服务器返回的内容而改变），因此我在这种情况下，我无法使用我之前所做的相同方法来检查字符串中是否存在整数。

我该如何实现这一目标？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:42:55.833

您可以使用[正则表达式](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)从字符串中提取数字。我在这里使用的模式是`"Test case number:<integer>"`.

首先创建一个正则表达式：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"Test case number:(\\d+)"
                                                                       options:NSRegularExpressionCaseInsensitive
                                                                         error:&error]; 
```

检查您的字符串是否与此正则表达式匹配：

```
NSString *string = @"HTTP Client Suite (Test case number:21)";
NSTextCheckingResult *match = [regex firstMatchInString:string options:0 range:NSMakeRange(0, [string length])]; 
```

如果找到匹配项，则从原始字符串中提取它。首先从原始字符串中获取数字的范围（起始位置，长度），然后`substringWithRange:`在原始字符串上使用提取数字。这有点冗长:)

```
if (match) {
    NSRange range = [match rangeAtIndex:1];
    NSString *number = [string substringWithRange:range];
} 
```

现在`number`应该包含您要查找的数字作为字符串。

# c# - C#：在文本文件中混淆密码的最佳实践？

> ID：13060883
> 
> 赞同：1
> 
> 时间：2012-10-25T02:53:48.320
> 
> 标签：c#, passwords, obfuscation, password-protection

Firefox 必须存储密码。这是完全不安全的，但它必须这样做，仅此而已。
我的 C# 应用程序具有相同的要求（它是一种浏览器）。

Firefox 不是以明文形式存储密码，而是对其进行了一些混淆。
这种混淆的最佳实践是什么？

例如，如果我理解得很好，这里是 Firefox 的策略：

*   为应用程序的用户创建盐
*   对于每个密码，在存储/检索时在对称变换中使用盐
*   将密码文件存储在以 salt 命名的目录中。

我的理解正确吗？
有没有更好的策略，甚至是 C# 库？

[其他编程语言的类似](https://stackoverflow.com/questions/6008304/password-file-obfuscation) [问题](https://stackoverflow.com/questions/982260/obfuscate-strings-in-python)也有不尽人意的答案，它们还不如 Firefox，只是建议使用 rot13 或 base64，这使得自动化恶意软件很容易识别未知软件中的混淆密码。（只搜索常用密码的base64值）

*再说一遍：我知道，它不会抵抗任何攻击者。但如果[Firefox 关心](https://bugzilla.mozilla.org/show_bug.cgi?id=357473)我也应该这样做。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T02:56:56.890

您应该使用[`ProtectedData`该类](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata.aspx)来加密密码。

您可以指定`DataProtectionScope.CurrentUser`使用当前用户的 Windows 登录密码加密数据，这样其他用户就无法解密它（如果用户没有密码，这也可以）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T02:59:06.477

使用加密而不是混淆可能是最容易的。混淆代码通常会使人们在查看源代码时更难识别代码中的内容。但是，如果您不加密信息，人们仍然可以弄清楚。

我的建议是使用 AES-256 或三重 DES-128 加密。

很容易，您可以将密码存储在文本文件中，然后进行加密。只有通过您的浏览器才能解密文件。

# mysql - 使用示例模式和数据加载 MySQL 的 .sql 脚本？

> ID：13060887
> 
> 赞同：2
> 
> 时间：2012-10-25T02:54:26.147
> 
> 标签：mysql

> **可能重复：**
> [是否有可用于 MySQL 的“Northwind”类型数据库？](https://stackoverflow.com/questions/2036395/is-there-a-northwind-type-database-available-for-mysql)

Microsoft 拥有 Northwind 数据库以提供带有示例数据的示例数据库。我知道如何创建一个脚本来为 MySQL 数据库做这样的事情，但我想知道这样的事情是否已经存在。

我有一些我想创建的应用程序作为自己的学习练习。

有谁知道 MySQL 的脚本，它将创建一个示例数据库并用大量的示例数据填充它？我正在寻找的不仅仅是几张桌子和几行的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:07:00.790

MySQL 有一些示例数据库可供学习，最著名的是 world 和 sakila。[您可以在http://dev.mysql.com/doc/index-other.html](http://dev.mysql.com/doc/index-other.html)下载它们。

# ruby-on-rails - 覆盖整数在 .erb 中的打印方式

> ID：13060891
> 
> 赞同：1
> 
> 时间：2012-10-25T02:55:16.370
> 
> 标签：ruby-on-rails, erb

我想用逗号在我的 rails 应用程序中打印数字。根据[这里](https://stackoverflow.com/a/1078366/684934)的答案，我可以包装我打印的每一个数字

```
number_with_delimiter(@number, :delimiter => ',') 
```

但是，我不想进入我的视图并手动应用它。我宁愿覆盖整数的打印方式。

在 java/jsp 中，`<%= %>` 标签内的任何内容都会被`toString()`调用以评估页面上打印的内容，因此我认为覆盖该类的`to_s`方法`Integer`可以：

```
class Integer
  def to_s
    number_with_delimiter(self, :delimiter => ',')
  end
end 
```

不幸的是，这不起作用，因为使用`<%=%>`标签打印的数字不会以逗号出现。（不会引发错误。）

我怎样才能做到这一点？`<%=%>`块不会自动调用`to_s`给定对象的方法吗？它如何评估要打印的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:04:03.817

你在修补错误的东西，你想修补`Fixnum`. 例如：

```
>> class Fixnum
>>   def to_s
>>     'pancakes'
>>     end
>>   end
=> nil
>> 1.to_s
=> "pancakes" 
```

对于 ERB：

```
>> ERB.new('<%= 11 %>').result
=> "pancakes" 
```

也就是说，你的捷径（就像大多数捷径一样）最终可能会在其他地方给你带来各种新的和有趣的问题。您最终将发送`'1,000'`到期望的东西（例如数据库或客户端 JavaScript 或...），`'1000'`并且您会得到一个令人困惑的嘶嘶声，适合您的工作。您还必须担心其他数字类，例如`Float`和`Bignum`。

修正你的观点，不要纠缠于你自己的懒惰。

# node.js - 用于 node.js 的 windows azure sdk localhost

> ID：13060900
> 
> 赞同：0
> 
> 时间：2012-10-25T02:56:41.073
> 
> 标签：node.js, azure, azure-web-roles

我正在使用 node.js 和 windows azure sdk 运行 helloworld 程序。

如果我保留：127.0.0.1:81

此链接有效，我在浏览器上打印了 hello world。

但是当我尝试时：

--http://192.168.1.6:81/

此链接无效。192.168.1.6 是我正在运行此应用程序的机器的本地 IP。

你能告诉我如何使用IP地址来实现它吗

我有 node.js helloworld 应用程序来自：

[http://www.windowsazure.com/en-us/develop/nodejs/tutorials/getting-started/](http://www.windowsazure.com/en-us/develop/nodejs/tutorials/getting-started/)

在将其部署到云中之前，我想使用主机的 IP 地址运行我的应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:33:59.107

计算模拟器专门绑定到 127.0.0.1 而不是任何其他 IP 地址，因此没有简单的方法可以做到这一点。（像端口转发这样的解决方法是可能的，但我不建议这样做，除非你有充分的理由必须这样做。）

# c# - 使用 JSON 的 WCF RESTful POST，来自 Windows Store App

> ID：13060905
> 
> 赞同：2
> 
> 时间：2012-10-25T02:57:40.457
> 
> 标签：c#, json, wcf, microsoft-metro, windows-store-apps

我正在从我的 Windows Store 应用程序（Windows Metro 应用程序）调用 RESTful Web 服务（托管在 Azure 中）。这是服务定义：

```
[OperationContract]
[WebInvoke(UriTemplate="/Test/PostData", 
    RequestFormat= WebMessageFormat.Json, 
    ResponseFormat= WebMessageFormat.Json, Method="POST", 
    BodyStyle=WebMessageBodyStyle.WrappedRequest)]
string PostDummyData(string dummy_id, string dummy_content, int dummy_int); 
```

从 Windows Store Apps 调用时，我在发布后收到请求错误（它甚至没有命中我在 PostDummyData 中放置的断点。我尝试了以下方法：

**使用 StringContent 对象**

```
using (var client = new HttpClient())
{
  JsonObject postItem = new JsonObject();
  postItem.Add("dummy_id", JsonValue.CreateStringValue("Dummy ID 123"));
  postItem.Add("dummy_content", JsonValue.CreateStringValue("~~~Some dummy content~~~"));
  postItem.Add("dummy_int", JsonValue.CreateNumberValue(1444));

  StringContent content = new StringContent(postItem.Stringify());
  using (var resp = await client.PostAsync(ConnectUrl.Text, content))
    {
        // ...
    }
} 
```

**使用 HttpRequestMessage**

```
using (var client = new HttpClient())
{
  JsonObject postItem = new JsonObject();
  postItem.Add("dummy_id", JsonValue.CreateStringValue("Dummy ID 123"));
  postItem.Add("dummy_content", JsonValue.CreateStringValue("~~~Some dummy content~~~"));
  postItem.Add("dummy_int", JsonValue.CreateNumberValue(1444));

  StringContent content = new StringContent(postItem.Stringify());
  HttpRequestMessage msg = new HttpRequestMessage(HttpMethod.Post, ConnectUrl.Text);
  msg.Content = content;
  msg.Headers.TransferEncodingChunked = true;

  using (var resp = await client.SendAsync(msg))
    {
        // ...
    }
} 
```

我认为它可能是有问题的内容类型标题（最后检查它是否设置为纯文本，但我找不到改变它的方法）。

HTTP GET 方法都可以正常工作。如果有人能指出我正确的方向，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T03:36:10.760

您应该在`StringContent`对象中设置内容类型：

```
StringContent content = new StringContent(postItem.Stringify());
content.Headers.ContentType = new System.Net.Http.Headers.MediaTypeHeaderValue("text/json"); 
```

或直接在构造函数中：

```
StringContent content = new StringContent(postItem.Stringify(),
    Encoding.UTF8, "text/json"); 
```

# c++ - 在 C++ 中使用 select 在协议中执行超时以通过串行端口传输文件

> ID：13060906
> 
> 赞同：2
> 
> 时间：2012-10-25T02:58:28.507
> 
> 标签：c++, c, serial-port

我有一个使用某种协议将数据写入串行端口的功能。当函数写入一帧时，它等待接收者的一个答复。如果没有收到应答，它必须在 3 次超时期间重新发送数据，并且在 3 次超时结束时没有成功，关闭通信...

我有这个功能：

```
int serial_write(int fd, unsigned char* send, size_t send_size) { 

......

        int received_counter = 0;
        while (!RECEIVED) {
            Timeout.tv_usec = 0;  // milliseconds
            Timeout.tv_sec  = timeout;  // seconds
            FD_SET(fd, &readfs);
            //set testing for source 1

            res = select(fd + 1, &readfs, NULL, NULL, &Timeout);
            //timeout occurred.

            if (received_counter == 3) {
                printf(
                        "Connection maybe turned off! Number of resends exceeded!\n");
                exit(-1);
            }

            if (res == 0) {
                printf("Timeout occured\n");
                write(fd, (&I[0]), I.size());
                numTimeOuts++;
                received_counter++;

            } else {
                RECEIVED = true;
                break;
            }

        }

......

} 
```

我已验证此函数在超时时不会重新发送数据。为什么？

# mongodb - 如果使用 Mongoid 的整个系统中最多只有 5 个角色，你会创建一个角色嵌入类吗？

> ID：13060908
> 
> 赞同：0
> 
> 时间：2012-10-25T02:58:41.187
> 
> 标签：mongodb, mongoid

`roles`如果最多可以有 5 个不同的角色，是否可以为用户表使用嵌入式文档字段？我问这个的原因是因为我相信对该字段使用数组类型会做同样的事情。我唯一一次使用角色字段是检查用户是否有能力访问网站上的某些页面/功能。我在这里错过了什么吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:01:21.543

我真的不认为这两种方法都不正确，而且我认为它与您希望模型的外观比如何存储数据更相关。它实际上仅取决于您想要保留的角色类型以及您计划如何检查用户角色之外的哪些信息（如果有的话）。

如果您只想存储角色列表（管理员、用户、版主等），那么序列化数组属性可能就可以了。另一方面，如果您的角色中存储了更多信息（例如，为每个角色授予的操作或权限），那么`UserRole`单独构建一个模型并将其嵌入到您的`User`模型中可能会有所帮助。

如果您只是存储一个角色列表，其中每个用户都可以是一个或多个角色的成员，那么实际上还有另一个非常好的选择。您实际上可以使用位掩码。使用这种方法，您的用户角色将被存储为一个简单的整数，并且您将使用一些 ruby​​ 的按位运算符将该值映射到一组角色。

[http://railscasts.com/episodes/189-embedded-association?view=asciicast](http://railscasts.com/episodes/189-embedded-association?view=asciicast)

# c# - 使用 AssemblyInfo.cs 设置其他程序集的属性及其背后的机制

> ID：13060909
> 
> 赞同：3
> 
> 时间：2012-10-25T02:58:42.000
> 
> 标签：c#, .net

我一直致力于让 log4net 在客户的演示程序中工作，以便他们可以将其与他们的代码库集成。我在执行[http://www.codeproject.com/Articles/14819/How-to-use-log4net](http://www.codeproject.com/Articles/14819/How-to-use-log4net)时发现了这篇文章，其中描述的步骤之一是

> 第 2 步：在您的 AssemblyInfo.cs 文件中添加以下行。

```
[assembly: log4net.Config.XmlConfigurator(ConfigFile="Web.config", Watch=true)]   //For log4net 1.2.10.0 
```

一旦我将那行代码添加到我的 AssemblyInfo.cs 中，记录器就开始工作了。

我在这个地方做了一些谷歌搜索，试图理解为什么需要这条线，并且大多数文档和评论声称 AssemblyInfo 是用于可选配置信息的。我不明白为什么添加这一行会使我的程序正常工作；我的关键问题是——AssemblyInfo.cs 中的配置信息如何被拾取和使用（是否有一些文档清楚地描述了这一点）——log4net 如何“知道”从 AssemblyInfo.cs 中获取该信息？

我从[AssemblyInfo.cs 中的 assembly 关键字的含义了解。是否允许在内部使用方法？](https://stackoverflow.com/questions/7954424/what-does-the-assembly-mean-in-the-assemblyinfo-cs-does-it-permit-to-use-method)这些是程序集的属性，而不是其背后的机制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:53:29.493

不错的话题。正如你所问的，我无法提供链接，只有几点，调查结果。我的一些陈述可能是众所周知且显而易见的。我试图把它们放在一起，在一个地方。并给出如何触发 log4Net 设置的*魔力的答案。*

*   AssemblyInfo.cs 是一个“普通”文件，与任何其他 .cs 文件一样，包含例如 C#*类*定义。在项目文件中，它被标记为“编译”。换句话说，这是按照惯例选择的位置，应该放置所有“程序集”属性。但是它们可以（*但不应该*）在任何地方（如果放置在任何项目编译文件中的特定命名空间声明之外）。
*   如果标记为 [AttributeUsage(AttributeTargets.Assembly)] ，任何自定义属性，如 log4Net“ **XmlConfiguratorAttribute** ”都可以添加到程序集定义中。
*   所有属性都只是一个元信息。换句话说，它们是可用的（用于反射），但没有隐式使用。*默认*不执行。
*   （某些属性，如 AssemblyVersion、AssemblyTitle 似乎已被执行，但编译器有意且显式地调用）

鉴于此，我们可以用属性做什么。我们的（自定义）代码允许使用反射来检查是否存在属性，主要是特定的已知类型（例如**XmlConfiguratorAttribute**）。如果存在这样的属性，我们可以“执行”它。例如。我正在使用具有“运行时”的 ASP.NET MVC，它允许 IFilter 类型的任何属性都将正确执行。它是 MVC 运行时，观察类和方法并显式执行这些属性。

在 AssemblyInfo.cs 中单独声明的属性声明是不够的。如上面声明 XmlConfiguration 的代码段。通常会有一些其他调用（在 ASP.NET 中可能在 Global.asax 中）构建 ILog

```
ILog logger = LogManager.GetLogger(MethodBase.GetCurrentMethod().DeclaringType); 
```

好吧，在方法调用链的某个地方，Log4Net 内部将检查是否存在：

```
var attributes = Attribute.GetCustomAttributes(thisAssembly, typeof(XmlConfiguratorAttribute)); 
```

如果是（程序集有这样的属性） - log4Net 可以使用它，强制它完成它的工作（例如从 xml 配置自己）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T03:03:32.693

Log4net 具有在调用程序集中查找程序集级`XmlConfigurator`属性的代码。

它读取它找到的属性的属性并适当地配置自己。

# postgresql - 带有条件的 PostgreSQL 外键

> ID：13060912
> 
> 赞同：1
> 
> 时间：2012-10-25T02:58:58.530
> 
> 标签：postgresql

使用 postgres sql，有没有办法在外键上设置一个条件，该条件仅限于另一个表，如普通外键约束，但也允许 0 的值存在而不存在于另一个表中。例如：

```
table_a:
  id

table_b:
  id
  foreign_key_on_table_a_id 
```

table_a 将有一个事物列表，并且 table_b 与 table_a 相关，但具有外键约束。即使 table_a 中没有 0 的 id，我也希望它允许值为 0。

这是使用正确的约束吗？是否有另一种/更好的方法可以在不将值添加到 table_a 的情况下执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T03:34:07.763

我会更改`foreign_key_on_table_a_id`为允许 NULL 值。然后像往常一样使用 FK 并将 NULL 放在那里而不是零。您可以在引用另一个表的列中具有 NULL。

或者，您可以编写一个函数，如果值在另一个表中，则返回 true，否则返回 false，然后添加 CHECK 约束：

```
CHECK (your_column = 0 or the_function(your_column)) 
```

不过，对于 FK，您不会得到任何通常的级联行为，而且这个 CHECK 是一个巨大的组合。

# ruby - 如何在使用 Ruby 和 Sinatra 编写的 Heroku 应用程序中使用 CGI？

> ID：13060914
> 
> 赞同：1
> 
> 时间：2012-10-25T02:58:58.740
> 
> 标签：ruby, heroku, cgi, sinatra

我正在尝试使用 CGI 将信息从文本表单移动到新网页。为此，我在表格中设置`action`为。然后，在我文件`action="new.html"`的相关部分，我有：`.rb`

```
get "/new.html" do
  @graph  = Koala::Facebook::API.new(session[:access_token])
  @app  =  @graph.get_object(ENV["FACEBOOK_APP_ID"])

  if session[:access_token]
    @query=CGI.new()         # Line of interest
    @input=@query["tool_1"]  # Line of interest
  end

  erb :my_tools_F
end

post "/new.html" do
  redirect "/new.html"
end 
```

新网页加载，但当我在文件`@input`中调用它时为空白。`.erb`在这部分脚本之前，我确实需要 CGI。我的网络主机是 Heroku，这两个`.erb`文件都在一个名为`views`. 该应用程序旨在在 Facebook 上启动。

示例代码在[这里](https://github.com/runninggraeb/Toolshed)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:50:47.027

您似乎正在尝试获取表单的参数。我在这里有另一个答案，但这对你不起作用。你可以在没有 cgi 的情况下轻松地做到这一点，你应该考虑使用内置的方法来做到这一点。但是，在您这样做之前，我注意到您的 github 帖子中有一些错误。

您的文件夹`Views`应为`views`. 小但很重要。我无法正确呈现页面。

在您`new.erb`的`index.erb`第 33 行上，它显示：

```
<input type="submit" value="Add""> 
```

最后有一个额外`"`的。只需将其删除即可：

```
<input type="submit" value="Add"> 
```

最后，做你需要做的事情：

```
get "/new.html" do
  erb :new
end

post "/new.html" do
  @input = params[:tool_1]
  erb :new
end 
```

而不是你所做的。在[http://www.sinatrarb.com/intro](http://www.sinatrarb.com/intro)上查找参数。

# flash - 在 Flash CS6 中使用 JSFL 获取补间动画中元素的颜色

> ID：13060916
> 
> 赞同：1
> 
> 时间：2012-10-25T02:59:17.253
> 
> 标签：flash, jsfl

我正在编写一个 jsfl 脚本来将 Flash CS6 中的动画导出为我们想要的格式。这就是问题所在，因为我们使用**补间**动画进行动画处理，我们可以使用以下代码正确获取元素的位置、旋转和缩放。但是代码不能使用颜色信息：

```
var element = something;
for( var frameIndex = 0; frameIndex < layer.frames.length; frameIndex++ )
{
    timeline.currentFrame = frameIndex;
    fl.trace( element.x + ", " + element.y );             // Works
    fl.trace( element.scaleX + ", " + element.scaleY );   // Works
    fl.trace( element.rotation );                         // Works
    fl.trace( element.colorAlphaPercent );                // DOES NOT WORK
} 
```

我们做了一个简单的动画，元素的 alpha 从 0 到 100 线性变化。当我们打印出从头到尾的所有`colorAlphaPercent`值时，结果都是0。我们进行了更多测试，发现无论您制作什么动画，在任何帧上，该`colorAlphaPercent`值始终等于第一帧上的值。同样的事情发生在`colorAlphaAmount`其他颜色值（红色、绿色、蓝色）上。

我们可以摆脱这种情况的唯一方法是进行`Convert to frame by frame animation`补间动画。但这将一个元素分解为许多元素，因此我无法判断它们最初是否是同一个元素。

那么......有没有人知道如何从补间动画中的元素获取颜色信息？不管怎么说，还是要谢谢你 ：）

# visual-studio-2010 - 托管类型 不支持的混合类型 Visual C++

> ID：13060927
> 
> 赞同：1
> 
> 时间：2012-10-25T03:01:27.853
> 
> 标签：visual-studio-2010, visual-c++

所以我正在做的是创建一个位图移动的表单，当它们发生碰撞时，它们会“战斗”。位图保存为 VBot 并继承到子机器人中，为了跟踪机器人，我构建了一个指针数组。VBot 和 BotContainer 是 .h 和 .cpp 文件，但是当我尝试在 Form.h 中创建私有 BotContainer 以跟踪 Bot 时，它给了我错误消息

错误 1 ​​错误 C4368：无法将“VList”定义为托管“Prog3::Form1”的成员：不支持混合类型 c:\users\duerst\documents\visual studio 2010\projects\prog 3\prog 3\Form1。 h 65 1 程序 3

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:39:23.643

你正在做这样的事情：

```
class BotContainer
{
    ...
};

public ref class Form1
{
private:
    BotContainer VList;

    ...
}; 
```

这是非法的，因为托管类型不能有非托管类型的成员（反之亦然）。您需要使用*指向*BotContainer 的指针，在构造函数中实例化并在析构函数中删除：

```
public ref class Form1
{
private:
    BotContainer* VList;

public:
    Form1()
    {
        VList = new BotContainer();
        ...
    }

    ~Form1()
    {
        delete VList;
    }
}; 
```

# wpf - 按钮内容中的样式 DataTrigger Setter 无效

> ID：13060932
> 
> 赞同：10
> 
> 时间：2012-10-25T03:02:23.350
> 
> 标签：wpf

```
<StackPanel>
    <TextBox Text="" x:Name="input"/>
    <Button Content="DataTrigger Before">
        <Button.Style>
            <Style TargetType="Button">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding ElementName=input, Path=Text}" Value="1">
                        <Setter Property="Content" Value="Changed"></Setter>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Button.Style>
    </Button>
</StackPanel> 
```

按钮内容中的样式 DataTrigger Setter 无效

谢谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-25T05:01:37.713

您的**DataTrigger**不会更改`Content`属性的值，因为您在**Button**声明中设置了它。所以，一旦确定，就永远不会改变。要允许更改，您必须在**Style**中设置值。

这将有效（我已经尝试过）：

```
<StackPanel>
    <TextBox Name="input"/>
    <Button>
        <Button.Style>
            <Style TargetType="Button">
                <Setter Property="Content" Value="DataTrigger Before"></Setter>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding ElementName=input, Path=Text}" Value="1">
                        <Setter Property="Content" Value="Changed"></Setter>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Button.Style>
    </Button>
</StackPanel> 
```

# html - 如何动态调整父DIV的大小？

> ID：13060934
> 
> 赞同：0
> 
> 时间：2012-10-25T03:02:26.823
> 
> 标签：html, dynamic, resize, css-float, width

基本上我有固定宽度为 250px 的浮动 div。我需要让它根据我添加的浮动 div 的数量自动调整父 div 的宽度和浏览器的宽度。

例如：如果我的浏览器尺寸是 800 像素宽，并且我有 2 个浮动 div，它们的总宽度为 500 像素，那么将没有水平滚动条，因为 500 适合 800。但是当我再添加 2 个浮动 div 时，所有浮动的总宽度将为 1000 像素，大于我的浏览器宽度，从而创建水平滚动条并使浏览器自动调整大小。

现在，当我尝试这样做时，不会在 800px 内找到的浮动 div 只是下拉而不是添加到侧面。

我可以指定父容器的固定宽度，但重点是让浮动动态添加到侧面。

有什么建议么？如果 CSS 做不到，也许 Javascript 可以。每当添加子 div 时，是否有一个 Javascript 会显式地向父 div 添加宽度？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:48:18.487

用于`width:reminder;`父 DIV。

# android - 从主菜单中的按钮链接不同的 android 活动

> ID：13060935
> 
> 赞同：2
> 
> 时间：2012-10-25T03:02:32.163
> 
> 标签：android, android-activity

我是 Android 应用程序开发的绝对初学者。

我创建了一个带有按钮的主菜单。可以说，这些按钮被命名为*btnA*、*btnB*和*btnC*。从主菜单中，如果我点击*btnA*，那么我将链接到*AsActivity*。同样，从主菜单中，如果我点击*btnB*，我将被发送到*BsActivity*。它与*btnC*相同。

我完全不知道该怎么做。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:14:11.840

只需使用[`Intent`](http://www.google.co.in/url?sa=t&rct=j&q=intent%20in%20andorid&source=web&cd=1&ved=0CCMQFjAA&url=http://developer.android.com/reference/android/content/Intent.html&ei=l66IUOWeN5SgiQf2pICAAw&usg=AFQjCNEjqM87rUmTERzSDN9d4ltsHw3kxQ&cad=rja)从主页移动到按钮单击的任何活动

```
 BtnA.setOnClickListener(new OnClickListener() {

        public void onClick(View v)
        {
            Intent n = new Intent(Home.this,actA.class);
            startActivity(n);
        }
    });

    BtnB.setOnClickListener(new OnClickListener() {

        public void onClick(View v) 
        {
            Intent n = new Intent(Home.this,actB.class);
            startActivity(n);
        }
    });

    BtnC.setOnClickListener(new OnClickListener() {

        public void onClick(View v)
        {
            Intent n = new Intent(Home.this,actC.class);
            startActivity(n);
        }
    }); 
```

并将actA，actB和actC添加到清单文件中

# c - fgets 在 C 中不返回 NULL

> ID：13060939
> 
> 赞同：0
> 
> 时间：2012-10-25T03:03:07.623
> 
> 标签：c, pipe, fgets

循环应该中断，但它一直卡在`fgets`. 通过管道`process_P1`交谈。`inputHandler`问题是`inputHandler`没有意识到什么时候停止写作......永远不会达到`process_P1`'lalala' 。`printf`

```
void process_P1(char *argv[], int fd[2], pid_t child)
{
    int bytes = 0;

    static char bufferIn[BUFFER_SIZE];
    static char bufferOut[BUFFER_SIZE];

    char line[BUFFER_SIZE];

    // close reading end of pipe
    close(fd[0]);

    FILE *in = fopen(getInput(argv), "r");
    FILE *out = fdopen(fd[1], "w");

    if (in == NULL) {
            sys_err("fopen(r) error (P1)");
    }
    int ret = setvbuf(in, bufferIn, _IOLBF, BUFFER_SIZE);
    if (ret != 0) {
            sys_err("setvbuf error (P1)");
    }

    if (out == NULL) {
            sys_err("fdopen(w) error (P1)");
    }
    ret = setvbuf(out, bufferOut, _IOLBF, BUFFER_SIZE);
    if (ret != 0) {
            sys_err("setvbuf error (P1)");
    }

    while (fgets(line, BUFFER_SIZE, in) != NULL)
    {
            fprintf(out, "%s", line);
            bytes += count(line) * sizeof(char);
    }

    // alert P2 to stop reading
    //fprintf(out, "%s", STOP);

    fclose(in);
    fflush(out);
    fclose(out);

    printf("P1: file %s, bytes %d\n", getInput(argv), bytes);

    // wait P2 ends
    if (waitpid(child, NULL, 0) < 0) {
            sys_err("waitpid error (P1)");
    }
}

void *inputHandler(void *args)
{
    int ret;

    static char bufferIn[BUFFER_SIZE];
    char line[BUFFER_SIZE];
    struct node *iterator;

    int *fd = (int*)args;

    close(fd[1]);

    FILE *in = fdopen(fd[0], "r");
    if (in == NULL) {
            sys_err("fdopen(r) error (P2)");
    }
    ret = setvbuf(in, bufferIn, _IOLBF, BUFFER_SIZE);
    if (ret != 0) {
            sys_err("setvbuf(in) erro (P2)");
    }

    while (fgets(line, BUFFER_SIZE, in) != NULL)
    {
    //      printf("%s", line);
            iterator = firstArg;
            while (iterator->next != NULL)
            {
                    ret = sem_wait(&(iterator->sem));
                    if (ret == 0) {
                            strcat(iterator->buffer, line);
                    } else {
                            sys_err("sem_wait error");
                    }
                    ret = sem_post(&(iterator->sem));
                    if (ret != 0) {
                            sys_err("sem_post error");
                    }
                    iterator = iterator->next;
            }
            line[0] = '\0';
    }
    printf("lalala\n");
    iterator = firstArg;
    while (iterator->next != NULL)
    {
            ret = sem_wait(&(iterator->sem));
            if (ret != 0) {
                    sys_err("sem_wait error");
            }
            iterator->shouldStop = 1;
            ret = sem_post(&(iterator->sem));
            if (ret != 0) {
                    sys_err("sem_post error");
            }
            iterator = iterator->next;
    }

    fclose(in);

    return NULL;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:03:12.153

问题可能不在您显示的代码中。既然你提到了一个管道，你的问题可能出在与它相关的管道上——而且最有可能的是，你`dup2()`在管道的一端做了一个使其成为标准输入或标准输出，但你忘记关闭你的文件描述符重复，或者您忘记关闭另一端。在`fgets()`没有进程可以写入它正在读取的管道之前，它不会终止。如果正在读取的进程仍然打开管道的写入端，它将停留在读取中，等待它写一些东西。

因此，请仔细查看您的管道代码。`pipe()`确保在将一端复制到标准输入或标准输出后关闭了返回的两个值。

# ios - iOS iAd 工作不一致

> ID：13060940
> 
> 赞同：1
> 
> 时间：2012-10-25T03:03:09.980
> 
> 标签：ios, iad

正如我所说，我的 iAd 有时工作，但有时不工作。它通常在第一次模拟器运行期间工作，但如果我开始打开不同的页面，它开始不起作用，所以我的代码强制横幅自行关闭（苹果规则）。它真的奇怪的原因我不知道为什么它这样做有时它可以正常工作，无论我通过多少个视图控制器它都会继续工作，但如果它开始不起作用，那么它对于许多视图控制器（具有不同的 h 和 m 文件）都不起作用然后突然它开始工作，经过几次成功的广告展示后，它又开始不工作了。我可以说它的工作成功率低于 %40，所以我必须解决它。

这与苹果 iad 服务器有关吗？

我正在模拟器 5.1 上测试我的应用程序，我只能收到我的横幅的 iad 测试广告，所以它们会是这个奇怪问题的原因吗？

iAd 是正常现象吗？

是我的代码应该受到责备吗？它缺少什么吗？

是关于 relasing iAd 还是我可以强制它尝试再次打开 iad ？

如果您知道有关此iad的方法，请帮助我！

h 文件

```
#import <UIKit/UIKit.h>
#import <iAd/iAd.h>

@interface a1viewcontroller : UIViewController < UIImagePickerControllerDelegate, UINavigationControllerDelegate > {

  ADBannerView *banner;    

}

@property (nonatomic, assign)BOOL bannerIsVisible;
@property (nonatomic, retain)IBOutlet ADBannerView *banner;

@end 
```

文件

```
@synthesize banner, bannerIsVisible;

-(void)bannerViewDidLoad: (ADBannerView *)abanner {

    if (!self.bannerIsVisible) {
        [UIView beginAnimations:@"animatedAdBannerOn" context:NULL];
        banner.frame = CGRectOffset(banner.frame, 0.0, 50.0);
        [UIView commitAnimations];
        self.bannerIsVisible = YES;
    }

}

-(void)bannerView:(ADBannerView *)aBanner {

    if (!self.bannerIsVisible) {
        [UIView beginAnimations:@"animatedAdBannerOff" context:NULL];
        banner.frame = CGRectOffset(banner.frame, 0.0, -320.0);
        [UIView commitAnimations];
        self.bannerIsVisible = NO;
    }

} 
```

其他视图控制器的代码相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:51:08.340

您可以使用以下方法来查看横幅的问题所在。

```
- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error {
    NSLog(@"%@",error.localizedDescription);
} 
```

确保您确实设置了横幅视图的委托。

我的猜测是这与 iAd 服务器有关。（不过不知道 iOS 6 中是否有很大变化。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T08:11:37.480

苹果文档说：

> “在您开发应用程序时，iAd Network 会向您的应用程序发送测试广告。为了帮助您验证您的实施，iAd Network 有时会返回错误以测试您的错误处理代码。”

同样在我的应用程序中，iad 返回了正确横幅、错误 3、错误 5 的组合...

我认为当 iAd 将从“iAd Network services test ads”更改为“iAd Network services”时，此问题将在应用程序发布后消失如果您签署了 iAd 网络协议并为您的应用程序启用了广告，则可以投放实时广告”

# file - 在批处理文件中不断删除感叹号

> ID：13060943
> 
> 赞同：2
> 
> 时间：2012-10-25T03:03:43.590
> 
> 标签：file, batch-file, replace, find

有人请帮助...哦，我将不胜感激。我有一个非常长的批处理文件，它运行良好，除了每次用户输入输入时，它都会替换所需文件中的字符串，但它正在删除文件中的 !s，由于它们是 XML 配置文件而导致问题，这些被注释出需要留下的部分。除非要求，否则我不会将整个代码放在这里，但简而言之，用户进行某些输入，然后批处理文件运行......这是一个文件的代码部分......用户输入驱动器安装字母和 bdi 服务器的名称。我希望用户输入替换 %drive% 和 %bdi1%....它确实....但我不希望它替换注释掉的部分...即：：

```
<!-- Tcp message preamble and postamble are flags that mark the beginning and end of an HL7 message. turns into <-- Tcp message preamble and postamble are flags that mark the beginning and end of an HL7 message. 
```

注意没有！

这是我的代码......我需要做什么才能让它停止删除！我试着看这里，我认为我对 Jeb 的回答进展顺利，但我无法让它发挥作用。提前致谢

```
if exist newfile.txt del newfile.txt
for /F "usebackq delims=" %%a in ("%drive%:\mckesson\%bdi1%\importer.config") do (
set str=%%a
set str=!str:server_name=%server%!
echo !str! >> newfile.txt
)
del importer.config
rename newfile.txt importer.config

if exist newfile.txt del newfile.txt
for /F "usebackq delims=" %%a in ("%drive%:\mckesson\%bdi1%\importer.config") do (
set str=%%a
set str=!str:bdi_name=%bdi1%!
echo !str! >> newfile.txt
)
del importer.config
rename newfile.txt importer.config

if exist newfile.txt del newfile.txt
for /F "usebackq delims=" %%a in ("%drive%:\mckesson\%bdi1%\importer.config") do (
set str=%%a
set str=!str:share_name=%share%$!
echo !str! >> newfile.txt
)
del importer.config
rename newfile.txt importer.config

if exist newfile.txt del newfile.txt
for /F "usebackq delims=" %%a in ("%drive%:\mckesson\%bdi1%\importer.config") do (
set str=%%a
set str=!str:drive_bdi=%drive%!
echo !str! >> newfile.txt
)
del importer.config
rename newfile.txt importer.config 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T05:28:56.437

这是延迟扩展和批处理解析器的影响。
如果延迟扩展被禁用，则感叹号没有问题，但如果启用，解析器假设`!`用于扩展变量，并且当只有一个标记时，它将被删除。

所以解决的办法是禁用延迟扩展，但是当你需要它时，你也必须启用它！

这可以通过在适当的时候简单地切换来完成。

```
setlocal DisableDelayedExpansion
(
  for /F "usebackq delims=" %%a in ("%drive%:\mckesson\%bdi1%\importer.config") do (
    set "str=%%a"
    setlocal EnableDelayedExpansion
    set "str=!str:server_name=%server%!"
    set "str=!str:bdi_name=%bdi1%!"
    set "str=!str:share_name=%share%$!"
    set "str=!str:drive_bdi=%drive%!"
    echo(!str!
    endlocal
  )
) > newfile.txt 
```

我将重定向移动到完整的 FOR 块，它更快，您不需要先删除文件。
我尝试将所有替换项移到一个块中，因此您只需要读取一次文件。

# java - 如何删除异常处理程序？

> ID：13060948
> 
> 赞同：-4
> 
> 时间：2012-10-25T03:04:48.787
> 
> 标签：java, exception-handling

我想从此代码中删除异常处理程序，因为我不明白它存在的原因，并且我相信它在我的代码阶段没有做任何事情。我有这个：

```
public void ToFile(){
               try{
                   PrintWriter pw = new PrintWriter(new FileWriter(file, false));

                    for (String st:stringarray){ 
                          pw.println(st);
                          pw.close();
                            }
                    }catch(Exception exception)
                    {}
            } 
```

当我删除异常部分时，我将其转换为这个，但它给了我错误......：

```
public void ToFile(){

                            PrintWriter pw = new PrintWriter();
                            for (String st:items){ 
                                    pw.println(srtingarray);
                                    pw.close();
                            }

            } 
```

我应该怎么办 ？ **编辑错误：**没有为 PrintWriter 找到合适的构造函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T03:09:10.570

尝试这样的事情：

```
public void toFile() throws IOException {
    PrintWriter pw = new PrintWriter(new FileWriter(file, false));

    for (String str: items){ 
        pw.println(str);
    }

    pw.close();
} 
```

写入失败时使用 a`PrintWriter`可以生成s。`IOException`您可以在函数中捕获并处理它们，或者添加一个`throws`允许异常向上传播到调用者的子句。

（我还把`close()`调用移到了循环之外，并修正了你的使用方式`pw`。）

知道添加`throws`子句并不能完全解决您的问题，因为调用者仍需要处理异常。它只是将问题提升了一个级别。不过，这是正确的做法。没有办法完全忽略`IOException`. 这些函数可能会出错，Java 会强制您在某个时候处理这​​些错误。这是**一件好事**。

如果您想在这里处理异常，您可以这样做。在子句中做*一些事情是个好主意。*`catch`看到`catch(Exception e) { }`一个空的处理程序让婴儿 Knuth 伤心。

```
public void toFile() {
    try {
        PrintWriter pw = new PrintWriter(new FileWriter(file, false));

        for (String str: items){ 
            pw.println(str);
        }

        pw.close();
    }
    catch (IOException exception) {
        exception.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T03:09:18.380

异常处理程序正在“处理” ¹`new FileWriter(file, false)`无法打开文件时可能引发的 IOException 。如果你不打算处理它，你必须在方法签名中声明它：

```
public void toFile() throws IOException {
    PrintWriter pw = new PrintWriter(new FileWriter(file, false));
    for (String st : items) { 
        pw.println(st);
    }
    pw.close();
} 
```

我还借此机会修复了方法名称。永远不要以大写字母开头的方法名称。这是一个重大的风格错误。

我修复了另外 2 个编译错误和一个错误。（看看你是否能发现它......并找出它为什么是一个错误。）

最后，**真正**正确的写法是：

```
// Java 7
public void toFile() throws IOException {
    try (PrintWriter pw = new PrintWriter(new FileWriter(file, false))) {
        for (String st : items) { 
            pw.println(st);
        }
    }
} 
```

或者

```
// pre-Java 7
public void toFile() throws IOException {
    PrintWriter pw = new PrintWriter(new FileWriter(file, false))) {
    try {
        for (String st : items) { 
            pw.println(st);
        }
    } finally {
        pw.close();
    }
} 
```

您需要这样做以便`FileWriter`总是关闭......即使在循环中引发了意外异常。

* * *

^(1 - 事实上，原版`catch (Exception exception) { }`真的很糟糕。首先，它只是狼吞虎咽地吃掉异常，什么也没说。其次，它是为了`Exception`……而这样做的，其中包括一大堆这样的异常`NullPointerException`，很可能是错误的证据。不要压制异常，尤其不要尝试`Exception`像那样“处理”。)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T03:06:46.567

异常的原因是在循环的第一次迭代之后，您将关闭 PrintWriter 对象。

# javascript - 我可以使用 Raphael.js 之类的东西在 HTML 窗口上方绘制矢量吗？

> ID：13060950
> 
> 赞同：1
> 
> 时间：2012-10-25T03:04:59.917
> 
> 标签：javascript, html, raphael, vector-graphics

关于在画布元素上绘图和使用 Raphael.js（非常棒）之类的东西有很多问题，但我想知道是否有一种方法可以在上方绘制一些矢量（主要是对角线）在 html doctype 网页中呈现的 DOM 文档。

我对 canvas 元素做的不多，但我认为也许可以做这样的事情：

1.  使用 javascript 获取/监视窗口大小
2.  创建/调整占据整个页面的画布元素
3.  以某种方式在画布元素上设置透明度
4.  绘制我想要的向量

当您使用清晰的 .gif 时，您无法单击或与其下方的内容交互 - 我希望仍然能够正常与网页交互。我还希望滚动以正常上下移动页面，以便矢量与 DOM 元素一起滚动。

我是否朝着正确的方向前进？

如何在标准网页的 HTML / DOM 上方绘制矢量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T03:20:41.717

这是 Raphael.js 在 div 中的文本顶部绘制的示例[http://raphaeljs.com/spin-spin-spin.html](http://raphaeljs.com/spin-spin-spin.html)

关于拉斐尔的更多背景：

> Raphael 在 SVG 画布上绘画。如果你给它一个透明的背景并将它定位在窗口上（z-index），那么你可以获得你想要的外观。

[https://groups.google.com/forum/?fromgroups=#!topic/raphaeljs/SAPCl_UMNco](https://groups.google.com/forum/?fromgroups=#!topic/raphaeljs/SAPCl_UMNco)

# jquery - 使用窗口大小更改 jQuery 幻灯片大小

> ID：13060956
> 
> 赞同：0
> 
> 时间：2012-10-25T03:05:51.337
> 
> 标签：jquery, responsive-design

当浏览器尺寸大于 1280 像素时，我需要将此滑块更改为 1180x454。不确定如何在 CSS 之外进行 @media 类型更改。谢谢。

```
<script type="text/javascript">

        $(document).ready(function() {
        $.noConflict();
    jQuery('#banner-example-1').paradigm(
                    {                                       
                        width:940,
                        height:362      

                });                     
        });

        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:32:11.780

这可能不是最好的解决方案，但鉴于滑块的一些限制，您似乎别无选择，只能在窗口调整大小时滚动自己的缩放功能。

```
$(window).resize(function() {
  // put your code here to trigger resizing of your slider
}); 
```

[这是一个基本的 jsfiddle 作为示例](http://jsfiddle.net/pvanhouten/GxULV/1/)。您可以执行类似的操作，检查窗口大小是否为某个宽度，如果是，请包含 javascript 来调整设置了内联宽度和高度的范例 div 的大小。

编辑：更新 jsfiddle 以包含更改元素宽度的逻辑。不幸的是，由于文档不公开，我无法告诉您具体需要做什么来触发范式的大小更改，因此如果不是像这样简单的事情，您可能需要联系开发人员寻求帮助：

```
$(window).resize(function() {
  // If > 1280 then width: 1180, height: 454 else width: 940, height: 362
  var width, height;
  if (this.outerWidth > 1280) {
    width = "1180px";
    height = "454px";
  }
  else {
    width = "940px";
    height = "362px";
  }
  $("#banner-example-1").css("width", width);
  $("#banner-example-1").css("height", height);
}); 
```

# mobile - 如何在 qooxdoo 移动框架中设置小部件的背景颜色？

> ID：13060958
> 
> 赞同：2
> 
> 时间：2012-10-25T03:06:30.670
> 
> 标签：mobile, widget, background-color, qooxdoo

我正在学习 qooxdoo 框架，我将在移动设备上开发 Web 应用程序。然而，问题来了。我不知道如何设置 qx.ui.mobile.core.Widget 的背景颜色。在 qx.ui.core.Widget（另一个类，我认为这是用于桌面应用程序）方面，有设置背景颜色的方法。但是，对于用于开发移动应用程序的 qx.ui.mobile.core.Widget，我可以在 API 参考中找到任何方法。我试图通过'addCssClass()'方法来做到这一点，它适用于标签等，但是，它不适用于复合小部件。默认情况下，移动应用程序的背景图像是 iPhone 组样式表视图中使用的图像。但是，我要做的是将背景图像修改为纯背景颜色。我不知道如何做到这一点，谁能给我一些想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:23:17.067

有几种方法可以改变 qx.Mobile 小部件：

如果使用“getContainerElement()”方法，则直接获取 HTML 元素。

在那里你可以设置任何属性，你也可以在纯 HTML 中设置。

另一种可能性是添加一个类，正如您所提到的：“addCssClass("foo")”

您只需将您的 css 选择器语句添加到您的项目资源文件夹中：

..资源/你的项目/css/styles.css

```
.foo{
  background-color:red;
} 
```

[或者您甚至可以通过http://demo.qooxdoo.org/current/apiviewer/#qx.bom.element.Style](http://demo.qooxdoo.org/current/apiviewer/#qx.bom.element.Style) set()蛮力设置样式

现在选择你的武器 =)

# sql - 修复“X 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中”

> ID：13060960
> 
> 赞同：1
> 
> 时间：2012-10-25T03:07:01.077
> 
> 标签：sql, group-by

早上好。我在下面有一个查询，要求每个项目编号的总数量。

```
select h.cstponbr 'Customer PO No.',
       h.sopnumbe 'Invoice No.', 
       d.itemnmbr 'Item No.',
       d.itemdesc 'Item Description', 
       d.qtyfulfi 'Qty Fulfilled', 
       sum(d.qtyfulfi) 'Total Qty Fulufilled'
from sop10100 h 
inner join sop10200 d on (h.sopnumbe = d.sopnumbe)
where h.cstponbr = @CUSTPONUM
group by d.itemnmbr 
```

我将如何安排我的查询，以避免出现以下错误。

> 列 'sop10100.CSTPONBR' 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T03:16:58.803

SELECT 语句中不是聚合函数的所有列（在您的示例中，除 sum(d.qtyfulfi) 之外的所有列都需要在 GROUP BY 子句中。

只需按照分组层次结构的顺序列出它们（在我的脑海中，我想从少到更具体）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T03:18:33.997

```
you can use only columns that are functionally depended on group by clause . 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T03:13:14.447

将您的查询修改为此，

```
select  h.cstponbr 'Customer PO No.',
        h.sopnumbe 'Invoice No.', 
        d.itemnmbr 'Item No.',
        d.itemdesc 'Item Description', 
        d.qtyfulfi 'Qty Fulfilled', 
        c.totalCount 'Total Qty Fulufilled'
from    sop10100 h 
        inner join sop10200 d 
            on (h.sopnumbe = d.sopnumbe)
        INNER JOIN
        (
            SELECT sopnumbe, SUM(qtyfulfi) totalCount
            FROM sop10200
            GROUP BY sopnumbe
        ) c ON c.sopnumbe = h.sopnumbe
where h.cstponbr = @CUSTPONUM 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T03:33:17.650

假设 Sql Server 2005+，这应该工作

```
;With Cte As(
Select 
       h.cstponbr 'Customer PO No.',
       h.sopnumbe 'Invoice No.', 
       d.itemnmbr 'Item No.',
       d.itemdesc 'Item Description', 
       d.qtyfulfi 'Qty Fulfilled',
       sum(d.qtyfulfi) Over(Partition By  d.itemnmbr) 'Total Qty Fulufilled',
       Rn =Row_Number() Over(Partition By  d.itemnmbr Order By (Select 1))
from sop10100 h 
inner join sop10200 d on (h.sopnumbe = d.sopnumbe)
where h.cstponbr = @CUSTPONUM  )

Select *
From Cte
Where Rn = 1 
```

更通用的应该是

```
select h.cstponbr 'Customer PO No.',
       h.sopnumbe 'Invoice No.',
       X.ItemNo,
       X.ItemDescription,
       X.QtyFulfilled,
       X.TotalQtyFulufilled
from sop10100 h 
inner join
            (Select 
                X.ItemNo
                ,d.itemdesc 'ItemDescription'
                ,d.qtyfulfi 'QtyFulfilled'
                ,d.sopnumbe
                ,X.TotalQtyFulufilled
                From sop10200 d
            Inner Join
                (Select d.itemnmbr 'ItemNo',sum(d.qtyfulfi)'TotalQtyFulufilled'
                From sop10200 d
                group by d.itemnmbr)X
            On d.itemnmbr = X.ItemNo)X
on (h.sopnumbe = X.sopnumbe)
where h.cstponbr = @CUSTPONUM 
```

# objective-c - 当设备方向改变时改变视图控制器

> ID：13060962
> 
> 赞同：1
> 
> 时间：2012-10-25T03:07:16.953
> 
> 标签：objective-c, ios, orientation

我在 xcode 4 中制作了一个 ios 应用程序，我需要一种方法来更改设备方向更改时屏幕上显示的内容。

有谁知道如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:30:47.500

可能您需要先检查如何检测设备方向是否发生变化，请参见此处：[如何检测方向变化](https://stackoverflow.com/questions/9122149/detecting-ios-uidevice-orientation)

然后在链接上的示例中，您应该知道如何更改屏幕上显示的视图。您可以使用 addSubview、presentModalViewController、pushViewController(for NavigationController) 等方法来做到这一点，例如：

*   [self presentModalViewController:aView Animation:YES];
*   [自我添加子视图：aView]；
*   [self.navigationController pushViewController:aView 动画:YES];

# objective-c - 当一个视图被卸载时，为什么我们要费心将这么多东西设置为零？

> ID：13060966
> 
> 赞同：1
> 
> 时间：2012-10-25T03:07:50.920
> 
> 标签：objective-c, uiviewcontroller

```
-(void)viewDidUnload
{
    [[NSNotificationCenter defaultCenter] removeObserver:self name:LASTUPDATEDLOCATION object:nil];
    [self setHeaderViewofWholeTable:nil];
    [self setFooterViewofWholeTable:nil];
    [self setHeaderActivityIndicator:nil];
    [self setFooterActivityIndicator:nil];
    [self setLastUpdated:nil];
    [self setLblPullDowntoRefresh:nil];
    [self setRefreshArrow:nil];
    [self setContainerForFormerHeader:nil];
    [self setFooterContainer:nil];
    [super viewDidUnload];
} 
```

我认为 viewDidLoad 被称为视图本身为零。当我们将视图设置为 nil 时，所有这些不会自动变为 nil 吗？

我有什么误解？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T03:14:04.547

在 ARC 之前，您需要手动释放分配的对象。设置标记`retain`为的属性`nil`进行释放。*当您使用自动引用计数*(ARC) 功能时，这不再是必需的，该功能在 Xcode 最新版本附带的编译器中默认启用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T03:18:16.243

好消息。从 iOS 6 开始，`viewDidUnload`已弃用。在 iOS 5 和更早的版本中，当内存不足时，您的视图可能已被卸载（为了确保没有内存泄漏，您在此方法中释放了 IBOutlets）。但这在 iOS 6 中不再调用，因此不再是必需的。

现在，如果内存出现问题，您的视图控制器可以覆盖：

```
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T03:38:27.450

其他一些答案涵盖了其中一些，但还有更多。视图控制器将`viewDidLoad`调用其方法。通常这会导致 IBOutlets 被保留，并且可能会分配和保留许多其他视图和对象。如果一切顺利，最终视图控制器将被释放，所有这些保留的对象都需要被释放。

这就是简单而快乐的道路。在内存不足的情况下，在 iOS 5 和更早版本中，视图控制器的视图可能会被卸载。该`viewDidUnload`方法使您有机会清理作为该`viewDidLoad`过程的一部分保留的所有其他对象。这是主要原因 - 在某些时候，`viewDidLoad`可能会再次调用以重新显示视图控制器的视图。

大多数人编写他们的`viewDidLoad`方法就像它只会被调用一次一样。如果该`viewDidUnload`方法正确清除对象，则可以。如果没有，下一次调用`viewDidLoad`将导致大量内存泄漏。

如果您没有在`viewDidUnload`. 但`viewDidUnload`仍然有助于在需要时清理内存。

如前所述，从 iOS 6 开始，视图控制器的视图在内存不足的情况下从不卸载，并且`viewDidUnload`(and `viewWillUnload`) 方法已被弃用。

如果您的应用仍然支持 iOS 5 和 iOS 6，您仍然需要正确使用`viewDidUnload`. 但是，如果您想在需要时释放内存，请使用`didReceiveMemoryWarning`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T03:11:32.637

我们将很多东西设置为 nil 以释放尽可能多的内存并减少处理器压力并延长电池寿命，并非所有对象都会自动从队列中删除。

# ruby - 匹配一对未转义的平衡分隔符

> ID：13060967
> 
> 赞同：5
> 
> 时间：2012-10-25T03:08:26.807
> 
> 标签：ruby, regex

如何匹配一对没有被反斜杠转义的平衡分隔符（它本身没有被反斜杠转义）（无需考虑嵌套）？例如使用反引号，我试过这个，但是转义的反引号不能像转义一样工作。

```
regex = /(?!<\\)`(.*?)(?!<\\)`/
"hello `how\` are` you"
# => $1: "how\\"
# expected "how\\` are" 
```

并且上面的正则表达式不考虑反斜杠被反斜杠转义并且在反引号前面的反斜杠，但我想。

StackOverflow 如何做到这一点？

这样做的目的并不复杂。我有文档文本，其中包括内联代码的反引号，就像 StackOverflow 一样，我想在 HTML 文件中显示它，内联代码装饰有一些跨度材料。不会有嵌套，但转义的反引号或转义的反斜杠可能会出现在任何地方。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T06:10:50.040

对于这类问题，Lookbehind 是每个人首先想到的，但它是错误的工具，即使在 .NET 这样支持不受限制的lookbehinds 的风格中也是如此。你可以破解一些东西，但它会很丑陋，即使在 .NET 中也是如此。这是一个更好的方法：

```
`[^`\\]*(\\.[^`\\]*)*` 
```

第一部分从开始的分隔符开始，吞噬任何不是分隔符或反斜杠的东西。如果下一个字符是反斜杠，它会使用该反斜杠及其后面的字符，无论它可能是什么。它可以是分隔符、另一个反斜杠或其他任何东西，没关系。

它会根据需要多次重复这些步骤，当两者`[^`\\]`都不`\\.`匹配时，下一个字符必须是结束分隔符。或字符串的结尾，但我假设输入格式正确。但如果格式*不*正确，这个正则表达式将很快失败。我提到由于这种其他方法，我看到了很多：

```
`(?:[^`\\]+|\\.)*` 
```

这适用于格式正确的输入，但是如果您从示例输入中删除最后一个反引号会发生什么？

```
"hello `how\` are you" 
```

根据 RegexBuddy 的说法，在遇到第一个反引号后，该正则表达式执行了 9,252 次不同的操作（或步骤），然后才可以放弃并报告失败；我的十步失败了。

**编辑**要仅提取分隔符内的 par，将该部分包装在捕获组中。您仍然必须手动删除反斜杠。

```
`([^`\\]*(?:\\.[^`\\]*)*)` 
```

我还将另一组更改为非捕获，我应该从一开始就这样做。我不会避免虔诚地捕获，但是如果您*使用*它们来捕获东西，那么您使用的任何其他组都应该是非捕获的。

**编辑**我认为我对这个问题的了解太多了。在 StackOverflow 上，如果您想在内联代码段或注释中包含文字反引号，您可以使用三个反引号作为分隔符，而不仅仅是一个。由于不需要转义反引号，因此您也可以忽略反斜杠。您的正则表达式可能会像这样简单：

```
```(.*?)``` 
```

处理错误分隔符的可能性，您使用相同的基本技术：

```
```([^`]*(?:`(?!``)[^`]*)*)``` 
```

这就是你所追求的吗？

* * *

顺便说一句，这个答案与@nneonneo 上面的[评论](https://stackoverflow.com/questions/13060967/matching-an-unescaped-balanced-pair-of-delimiters#comment17739643_13060967)并不矛盾。这个答案没有考虑比赛发生的环境。它在程序或网页的源代码中吗？如果是，匹配是否出现在注释或字符串文字中？我怎么知道我发现的第一个反引号没有逃脱？正则表达式对它们运行的​​上下文一无所知。这就是解析器的用途。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T05:37:59.113

如果您不需要嵌套，那么正则表达式确实是一个合适的工具。例如，编程语言的词法分析器使用正则表达式来标记字符串，字符串通常允许它们自己的分隔符作为转义内容。不过，任何比这更复杂的东西都可能需要一个成熟的解析器。

“通用公式”是匹配转义字符 ( `\\.`) 或任何作为内容有效但不需要转义的字符 ( `[^{list of invalid chars}]`)。一个“幼稚”的解决方案是用**or** ( `|`) 将它们连接起来，但对于更有效的变体，请参阅[@AlanMoore 的答案](https://stackoverflow.com/a/13062604/520779)。

完整的示例如下所示，有两种变体：第一个假设反斜杠**仅**用于在字符串**内部**转义，第二个假设反斜杠**在文本中的任何位置**转义下一个字符。

```
`((?:\\.|[^`\\])*)`

(?:\\.|[^`\\])*`((?:\\.|[^`\\])*)` 
```

[此处](http://rubular.com/r/yuyo9TVtfS)和[此处](http://rubular.com/r/nmaoaKki09)的工作示例。但是，正如@nneonneo 评论的（我也赞同），正则表达式并不意味着进行完整的解析，所以如果你想让它们正确工作，你最好保持简单（你想在文本中**找到**一个标记，还是您想在已经知道它从哪里开始**划定界限**？该问题的答案对于决定哪种策略最适合您的情况很重要）。

# html - CSS根据容器元素计数改变孩子的高度

> ID：13060969
> 
> 赞同：1
> 
> 时间：2012-10-25T03:08:35.103
> 
> 标签：html, vertical-alignment, css, liquid-layout

我有一个容器，它有时包含三个元素，有时包含四个元素。容器的高度是恒定的。

![在此处输入图像描述](../Images/0e277d3fb7ba013f8132772fcfae5aa5.png) ![在此处输入图像描述](../Images/6fad641805593c5ec08d357bd7d086d3.png)

对于像这样的垂直液体布局，基于 CSS 的方法有什么好的想法吗？

也就是说，孩子们的身高要么是 25%，要么是 33%，但他们自己算出来了吗？（聪明的孩子。） *编辑当然不一定要基于百分比......*

我可以很容易地做一些基于 PHP 的事情，但更优雅的解决方案会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:22:11.590

这是一个让你的生活更轻松的小 Sass：

```
$height: 200px

ul
  height: $height

@for $i from 1 through 6
  .list-#{$i} li
    height: $height/$i 
```

你也可以用直接的 CSS 来做到这一点：

```
.list-1 li {
  height: 200px;
}

.list-2 li {
  height: 100px;
}
... 
```

使用 PHP，根据子元素的数量将`.list-#`类添加到父元素。

您也可以使用 flexbox 在纯 CSS 中完成此操作，但它不适用于您需要的浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T06:04:21.017

好吧，我刚刚使用了一个表作为外部容器。动态添加的表格行会自动垂直缩放布局。

足够优雅，并且可以防止任何 PHP 处理。当然，欢迎任何其他解决方案（并且可能被接受）。

# zend-framework - 问号应该是X

> ID：13060971
> 
> 赞同：3
> 
> 时间：2012-10-25T03:08:52.153
> 
> 标签：zend-framework, unicode, character-encoding, twitter-bootstrap

我正在为网站使用 Zend Framework 和 Twitter Bootstrap。从 twitter bootstrap 我正在使用警报之类的东西：

```
<div class="alert">
  <button type="button" class="close" data-dismiss="alert">×</button>
  <strong>Warning!</strong> Best check yo self, you're not looking too good.
</div> 
```

在应该出现 X 的地方出现问号 (?)。我的字符集为 UTF-8。

这不是唯一发生的事情，但在许多我应该有西班牙字符的地方出现的是一个问号。有人知道出了什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:22:21.780

Dito，您可能只是在其中放一个简单的 x 而不是乘号。您还可以检查它是否适用于此 HTML 实体：

```
&times; 
```

我了解到编码是一个非常困难的话题。您的文档中有 doctype 声明——但也有 Web 服务器（apache？）声明，甚至还有 PHP 设置。您可以通过在 FireFox 中点击 cmd+I（pc/linux 上的 ctrl+i）来查看您的网站设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T05:43:51.567

我的十六进制编辑器告诉我它是 × 而不是 x 。从 html 中的元数据中删除字符集，然后重试。另外，尝试用“真实的”x 替换它。

# php - PHP查找邮政编码半径内的所有事件

> ID：13060974
> 
> 赞同：1
> 
> 时间：2012-10-25T03:09:18.493
> 
> 标签：php, zip, maps

我的老板刚刚要求我构建一个脚本，该脚本可以提取表中具有给定邮政编码半径范围内邮政编码的所有行。我以前从来没有做过这样的事情，我不知道从哪里开始。这需要与谷歌地图或类似的交互吗？什么是最好的工作流程，或者谷歌的一些关键词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T03:29:38.910

只是做了这样的事情..这两个资源非常有帮助

[在边界圆内选择点的](http://www.movable-type.co.uk/scripts/latlong-db.html)PHP 示例

[我们所有的拉链和坐标的](http://sourceforge.net/projects/zips/)完整数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T03:23:10.250

它不会立即为您提供解决方案，但是是的，您可以使用谷歌地图。自由的。

[https://developers.google.com/maps/documentation/javascript/](https://developers.google.com/maps/documentation/javascript/)

对于给定的邮政编码，您需要获取地理位置，然后对于给定的半径，每英里的步长，检查邮政编码。这就是我会做的。希望它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T03:27:32.787

我不太确定邮政编码是如何工作的，但我非常有信心它们有一个相似的数字，具体取决于它的接近程度，所以也许你可以用一个表格而不是使用更复杂的东西来解决这个问题，所以假设你查询到搜索 33175 和 33188 之间的一系列邮政编码，我想首先要澄清的是你的老板希望你使用什么样的半径（2 英里，20 英里？），以便我们可以更好地帮助你，我希望这能给你一个主意。总 =)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-25T03:16:30.963

存在“邮政编码数据库”，您可以在其中找到有关这些邮政编码的邮政编码 + 纬度/经度信息。知道一个邮政编码的纬度/经度，您可以找到附近的其他邮政编码。这是此类数据库信息的示例[http://www.geopostcodes.com/sample.php?c=US](http://www.geopostcodes.com/sample.php?c=US)该站点 (http://www.geopostcodes.com) 出售这些数据库，但也许您可以在某处找到免费版本。

当您知道“中央”邮政编码的纬度和经度时，您可以使用 SQL 找到最近的邮政编码，如本文[http://zcentric.com/2010/03/11/calculate-distance-in-mysql-with-latitude-and -longitude/](http://zcentric.com/2010/03/11/calculate-distance-in-mysql-with-latitude-and-longitude/)但你的表不是“成员”而是“邮政编码”

# java - Minicraft 碰撞检测

> ID：13060976
> 
> 赞同：1
> 
> 时间：2012-10-25T03:10:02.317
> 
> 标签：java, collision-detection

我试图了解此代码如何用于碰撞检测。我可以说目标是一个边界框，并且我们正在测试实体的每个可能点，但我不确定在这种情况下有符号移位运算符的目的。事实上，我什至不明白为什么它会有用，只是它做了什么。谁能详细说明？

```
protected boolean move2(int xa, int ya) {
    if (xa != 0 && ya != 0) throw new IllegalArgumentException("Move2 can only move along one axis at a time!");

    int xto0 = ((x) - xr) >> 4;
    int yto0 = ((y) - yr) >> 4;
    int xto1 = ((x) + xr) >> 4;
    int yto1 = ((y) + yr) >> 4;

    int xt0 = ((x + xa) - xr) >> 4;
    int yt0 = ((y + ya) - yr) >> 4;
    int xt1 = ((x + xa) + xr) >> 4;
    int yt1 = ((y + ya) + yr) >> 4;
    boolean blocked = false;
    for (int yt = yt0; yt <= yt1; yt++)
        for (int xt = xt0; xt <= xt1; xt++) {
            if (xt >= xto0 && xt <= xto1 && yt >= yto0 && yt <= yto1) continue;
            level.getTile(xt, yt).bumpedInto(level, xt, yt, this);
            if (!level.getTile(xt, yt).mayPass(level, xt, yt, this)) {
                blocked = true;
                return false;
            }
        }
    if (blocked) return false;

    List<Entity> wasInside = level.getEntities(x - xr, y - yr, x + xr, y + yr);
    List<Entity> isInside = level.getEntities(x + xa - xr, y + ya - yr, x + xa + xr, y + ya + yr);
    for (int i = 0; i < isInside.size(); i++) {
        Entity e = isInside.get(i);
        if (e == this) continue;

        e.touchedBy(this);
    }
    isInside.removeAll(wasInside);
    for (int i = 0; i < isInside.size(); i++) {
        Entity e = isInside.get(i);
        if (e == this) continue;

        if (e.blocks(this)) {
            return false;
        }
    }

    x += xa;
    y += ya;
    return true;
} 
```

值得注意的是，Entity 知道其确切的 x 和 y 位置，但 tile 根本不知道它的位置。世界有一组瓷砖，但只知道它的瓷砖位置......所以当需要进行碰撞检测时，该函数必须确定从玩家位置获取哪个瓷砖位置。

完整来源可在此处获得：[http ://www.ludumdare.com/compo/ludum-dare-22/?action=preview&uid=398](http://www.ludumdare.com/compo/ludum-dare-22/?action=preview&uid=398)

请注意，瓷砖是 16x16

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T06:42:32.827

除以 2 的幂通常表示为右移*n*位，其中*n*是幂。

过去在编写 C 或汇编时，您会这样做，因为它比实际除法要快得多。左移与乘以 2 的等效幂相同，也比硬件乘法快得多。如今，大多数编译器都会对此进行特殊处理并发出移位而不是乘/除以获取 2 的幂。

当然，如果您的图块大小不是 2 的幂，则必须改为除法。

# c++ - 将堆栈传递给函数

> ID：13060982
> 
> 赞同：6
> 
> 时间：2012-10-25T03:11:19.037
> 
> 标签：c++, function, stack

所以我在玩堆栈，我已经在我的主函数中填充了一个，但现在我想将它传递给我的其他函数，这样我就可以遍历它。我不确定将哪种数据类型放入原型中以便它接受它。建议？这是我所拥有的：

主文件

```
#include <iostream>
using namespace std;
#include "stack.h"

void displayStack(char &stackRef);

int main()
{
    Stack<char> stack;
    stack.push('a');
    stack.push('b');
    stack.push('c');

    return 0;
};

void displayStack(char starRef)
{
    // Cannot Get here - Errors!
}; 
```

它告诉我我有太多参数并且它与参数列表不匹配。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T03:14:12.210

这应该足够了：

```
void displayStack(const Stack<char>& stack); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T03:26:34.850

该名称`DisplayStack`表明该函数仅显示堆栈，不以任何方式更改它。因此，参数可以是对 的*引用`const`*。但是，名称中的后缀`Stack`是多余的，因为它是由参数暗示的，所以我会这样做：

```
#include <iostream>
using namespace std;
#include "stack.h"

typedef Stack< char > CharStack;

void display( CharStack const& stack )
{
    // ... Display the stack
}

int main()
{
    CharStack stack;

    for( auto const ch : { 'a', 'b', 'c' } )
    {
        stack.push( ch );
    }
    display( stack );
} 
```

注意 …

*   该功能已移至*上方* `main`。那时不需要愚蠢的纯粹声明，更少的工作。**DRY**：*不要重复自己*。

*   函数定义后的不正确分号已被删除。好吧，至少我认为他们是不正确的。不管是不是，它们都是多余的。

*   多余`return 0;`的 in`main`已被删除，因为那是*默认的*. 然而，一些程序员更喜欢让它显式。

不利的一面是，虽然 C++11 循环可以很好地与 g++ 4.7.2 一起编译，但它会导致Visual C++ 11.0的内部编译器错误 ( **ICE )：**

```
[d:\开发\测试]
> *cl foo.cpp*
foo.cpp
foo.cpp(7) : 警告 C4100: 'stack' : 未引用的形式参数
foo.cpp(16)：错误 C2059：语法错误：'{'
foo.cpp(16)：错误 C2143：语法错误：缺少 ';' 前 '}'
c1xx：致命错误 C1063：内部编译器错误
         请选择 Visual C++ 上的技术支持命令
         帮助菜单，或打开技术支持帮助文件以获取更多信息

[d:\开发\测试]
> _

```

那好吧。

按照你的方式去做。;-)

[向 Microsoft 报告的](https://connect.microsoft.com/VisualStudio/feedback/details/768644/internal-compiler-error-for-c-11-range-based-loop-with-range)编译器错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T03:15:53.030

如果您不想修改函数内部堆栈的内容：

```
void displayStack(const Stack<char> &starRef) 
```

如果要修改函数内部堆栈的内容：

```
void displayStack(Stack<char> &starRef) 
```

注意事项：

*   被传递的变量的*类型*必须是你在函数原型中提到的*类型。*
*   在 C/C++ 中，默认情况下，函数的所有参数都通过*copy*传递，即：将参数的副本而不是参数本身传递给函数。开销是副本。您*通过引用传递*以避免传递变量副本的开销。
*   `const`如果您希望传递的变量在函数中不可变，则在参数上使用限定符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T03:14:58.533

将您的 displayStack 函数更改为：

```
void displayStack(Stack<char> &stackRef) 
```

# android - Arduino中的温度转换器

> ID：13060987
> 
> 赞同：0
> 
> 时间：2012-10-25T03:11:40.317
> 
> 标签：android, arduino, temperature

我正在做一个需要我使用 TinkerKit 热敏电阻传感器来获取室温的项目。检测后，Arduino BT 板必须通过蓝牙将串行数据发送回 Android 手机。并且温度需要以摄氏度显示在手机屏幕上。

我已经使串行通信链路工作。但是热敏电阻的读数似乎很奇怪。它的读数为 173/174/175，但我不确定它的读数是华氏还是摄氏度（因为我找不到任何数据表和热敏电阻读数单元的详细信息）。

我必须在值中包含任何温度转换器编码吗？

输出值将映射 @ ：`outputValue = map(sensorValue, 0, 1023, 0, 255);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:17:58.827

您确定没有用于阅读热敏电阻的数据表或解释其返回内容的套件文档吗？我猜你得到的值是一个无符号字节（或者可能超过一个字节，基于地图中的“1023”值），表示两个范围之间的温度“百分比”。

就像如果它是 -40'C (0) 和 +40'C (255) 之间的单个无符号字节，174 将是 14'C (174/256 * 80 - 40) 或大约。您可能可以通过数学计算来确定房间中实际观察到的温度与已知良好温度计的热敏电阻值之间的相关性。

也许有一个套件库可以为您解释其价值？

# jquery - 带有条件/默认状态的 jQuery toggleClass

> ID：13060988
> 
> 赞同：0
> 
> 时间：2012-10-25T03:11:46.450
> 
> 标签：jquery, toggleclass

场景：我有两个按钮。在两个按钮之间是一个 V 形图像，具有用 css 定义的三个状态。每个州都有一个中立的阶级，卖它，买它。根据页面的不同，V 形可能处于三种状态中的任何一种。在鼠标悬停在两个按钮中的任何一个上时，我试图切换相应的类。示例：如果默认状态为“buy-it”类，将鼠标悬停在“购买”按钮上将不会执行任何操作，将鼠标悬停在“出售”按钮上将切换“出售”类，但返回默认的“购买”，鼠标悬停时购买. 如果 V 形处于中立状态，将鼠标悬停在任一按钮上都会切换买入/卖出，但会返回中立。

它是如此接近，但并没有完全按照我的意愿行事。

```
 (function(){

  var buttonChevrons = (function(){

    var initialize = function(){
      _setDefault();
      _setListeners();
    }

    //set default state
    var _setDefault = function(){
      //$(".chevron").addClass("neutral");
    }
    //set event listeners
    var _setListeners = function(){
      //Buy button
      $("#btnbuy").hover(function(){
        //default neutral state
        if( $(".chevron").hasClass("neutral")) {
          $(".chevron").toggleClass("buy-it");
        }
        //if buy it
        else if( $(".chevron").hasClass("buy-it")) {
          $(".chevron").toggleClass("");
        }
        //if sell it
        else if( $(".chevron").hasClass("sell-it")) {
          $(".chevron").toggleClass("buy-it");
        }
      })
      //Sell button
      $("#btnsell").hover(function(){
        //default neutral state
        if( $(".chevron").hasClass("neutral")) {
          $(".chevron").toggleClass("sell-it");
        }
        //if sell it
        else if( $(".chevron").hasClass("sell-it")) {
          $(".chevron").toggleClass("");
        }
        //if buy it
        else { $(".chevron").hasClass("buy-it") 
          $(".chevron").toggleClass("sell-it");
        }
      })

    }

    //call initialize
    return {init: initialize}
  }());

    //call buttonChevrons
  this.buttonChevrons = buttonChevrons;
}).call(this);

$(document).ready(function(){

  buttonChevrons.init()

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:51:44.613

只是因为我不能独自离开，所以我再次使用 lambda 函数为这些`hover()`方法生成回调函数。在这种情况下，它不会保存任何代码行，但作为一种通用技术，它可能很有用。在[jsfiddle](http://jsfiddle.net/slashingweapon/8tr3n/) ...

```
(function() {
    var chevron = $("#chevron");
    var defaultState;

    function toggle(tempClass, state) {
        return function(evt) {
            if (state) { chevron.toggleClass(defaultState, false); }
            chevron.toggleClass(tempClass, state);
            if (!state) { chevron.toggleClass(defaultState, true); }
        };
    }

    // decide on default state
    $.each(['buy-it', 'sell-it', 'neutral'], function(idx, initialClass) {
        if (chevron.hasClass(initialClass)) {
            defaultState = initialClass;
            return false;
        }
    });

    $("#btnbuy").hover(toggle('buy-it', true), toggle('buy-it', false));
    $("#btnsell").hover(toggle('sell-it', true), toggle('sell-it', false));
})();​ 
```

我不是强迫症......诚实！今晚电视上没有什么好东西。

# c - 如何在 C 中处理和优化代码

> ID：13060989
> 
> 赞同：0
> 
> 时间：2012-10-25T03:11:55.700
> 
> 标签：c, function, optimization

我是 C 新手，非常想知道如何解决任何超过 3 或 4 个函数的问题，我总是查看所需的输出并在其他函数中操作我的代码调用函数并获得所需的输出。以下是我首先通过他的 ID 然后是用户名查找学生记录的逻辑。根据我的教授的说法，这段代码逻辑过度，并且在很多方面都缺乏，如果有人可以帮助我解决我应该如何用 C 或任何其他语言解决任何问题，这对我作为初学者会有很大帮助，是的，我先写伪代码。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct{

int id;                                  //Assuming student id to be unique
int age;
char *userName;                         //Assuming student userName to be unique
char *dept;

}student;                               // Alias "student" created for struct

student* createstruct();                // All function prototype declared
student* createArray();
void addstruct(student* s2);
void searchChar(student* s2,int num);
void searchInt(student* s2,int num);

student* createstruct()                          // function createStruct() to malloc data of struct student.
{
    student *s;
    s = (student*)malloc(sizeof(student));
    s->userName = (char*)malloc(sizeof(char)*32);
    s->dept = (char*)malloc(sizeof(char)*32);
    printf("please enter id ");
    scanf("%d",&s->id);
    printf("please enter age ");
    scanf("%d",&s->age);
    printf("please enter userName ");
    scanf("%31s",s->userName);
    printf("please enter department ");
    scanf("%31s",s->dept);
    printf("\n");

    return s;
}

student* createArray()
{
    student *arr;                                    //declaration of arr poiter, type struct student
    arr = (student*)malloc(sizeof(student)*10);     // memory allocated for a size of 10
    return arr;
}

void addstruct(student *s2)                       // function for adding data to the structures in array
{
    int i,num;
    student* s1;
    printf("please enter the number of records to add:");
    scanf("%d",&num);
    printf("\n");

    if(num>0 && num<11)
    {
      for(i=0;i<num;i++)                    // if user want to enter 5 records loop will only run 5 times
       {
         s1 = createstruct();
         s2[i].id = s1->id;                 // traversing each element of array and filling in struct data
         s2[i].age = s1->age;
         s2[i].userName = s1->userName;
         s2[i].dept= s1->dept;
       }
    }
    else if(num>10)                         // if user enters more than 10
    {
      for(i=0;i<10;i++)                     // loop will still run only 10 times
        {
         s1 = createstruct();
         s2[i].id = s1->id;
         s2[i].age = s1->age;
         s2[i].userName = s1->userName;
         s2[i].dept = s1->dept;
        }

       printf("Array is full");            // Array is full after taking 10 records
       printf("\n");
    }

searchInt(s2,num);                        // Calling searchInt() function to search for an integer in records
searchChar(s2,num);                       // Calling searchChar() function to search for a string in records
free(s1);
free(s2);
}

void searchChar(student* s2,int num)           // function for searching a string in records of structure
{
    char *c;
    int i;
    c = (char*)malloc(sizeof(char)*32);
    printf("please enter userName to search ");
    scanf("%31s",c);
    printf("\n");

  for (i=0;i<num;i++)                             //num is the number of struct records entered by user
    {
      if ((strcmp(s2[i].userName,c)==0))          //using strcmp for comparing strings
      {
       printf("struct variables are %d, %d, %s, %s\n", s2[i].id,s2[i].age,s2[i].userName,s2[i].dept);
       break;
      }
      else if(i == num-1)
      {
          printf("nothing in userName matches: <%s>\n",c);
          break;
      }
    }
}

void searchInt(student* s2,int num)                 //searchs for an integer and prints the entire structure
{
    int i,z;
    printf("please enter id to search ");
    scanf("%d",&z);
    printf("\n");

  for (i=0;i<num;i++)
    {
      if (s2[i].id == z)
      {
          printf("struct variables are %d, %d, %s, %s\n\n", s2[i].id,s2[i].age,s2[i].userName,s2[i].dept);
          break;
      }
      else if(i == num-1)
      {
          printf("nothing in id matches: <%d>\n\n",z);
          break;
      }
    }
}

int main(void)
{
    student *s2;
    s2 = createArray();
    addstruct(s2);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:21:17.647

我不打算进行优化，因为如果您想要更好的理论性能，您可能会使用不同的数据结构，例如有序数组/列表、树、哈希表或某种索引……这些都不相关在这种情况下，因为您有一个处理少量数据的简单程序。

但是我要告诉你你教授提到的“过度逻辑”，以你的`searchInt`功能为例：

```
for (i=0;i<num;i++)
{
  if (s2[i].id == z)
  {
      printf("struct variables are %d, %d, %s, %s\n\n", s2[i].id,s2[i].age,s2[i].userName,s2[i].dept);
      break;
  }
  else if(i == num-1)
  {
      printf("nothing in id matches: <%d>\n\n",z);
      break;
  }
} 
```

这里的问题是，每次循环时，您都在测试以查看您是否位于循环中的最后一个元素。但是循环已经这样做了。所以你做了两次，更糟糕的是，你正在做减法（编译器可能会或可能不会优化到寄存器中）。

你通常会做的是这样的：

```
int i;
student *s = NULL;

for( i = 0; i < num; i++ )
{
    if( s2[i].id == z ) {
        s = &s2[i];
        break;
    }
}

if( s != NULL ) {
    printf( "struct variables are %d, %d, %s, %s\n\n",
            s->id, s->age, s->userName, s->dept );
} else {
    printf("nothing in id matches: <%d>\n\n",z);
} 
```

看到你只需要知道循环找到了一些东西。在测试它是否找到某些东西之前，您等待循环完成。

在这种情况下，我使用了一个指针来指示成功，因为我可以使用该指针来访问相关记录，而不必重新索引到数组中并弄乱代码。你不会总是使用指针。

有时你设置一个标志，有时你存储数组索引，有时你只是从函数返回（如果循环失败，你知道它没有找到任何东西）。

编程就是为你正在解决的问题做出明智的选择。仅在需要时进行优化，不要使问题过于复杂，并始终尝试编写易于阅读/理解的代码。

# ruby-on-rails - 路线中的路线和路线

> ID：13060991
> 
> 赞同：0
> 
> 时间：2012-10-25T03:12:33.947
> 
> 标签：ruby-on-rails, ruby-on-rails-3, redirect, routes

我目前有一个应用程序，当用户注册时，它被路由到索引（基本/“Welcome Aboard”rails 页面）

在 users_controller.rb 中，我有一个带有以下重定向的 create 方法：

```
redirect_to root_url, :notice => "Signed up!" 
```

在路线文件中，我有以下内容：

```
root :to => "users#new" 
```

当用户创建一个有效的注册时，它会重定向到 users#new（基本上是同一页面）但是，它会重定向到 rails 中的默认索引文件。

关于它为什么这样做的任何想法，我可能会错过什么？我很确定这是所有必要的信息，但如果需要更多信息，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T03:17:06.577

从公用文件夹中删除 index.html 文件。