# StackOverflow 问答 13986000-13986999

# python - 如何在 Python PIL 中加快绘制多个圆圈的速度

> ID：13986004
> 
> 赞同：2
> 
> 时间：2012-12-21T07:28:28.513
> 
> 标签：python, python-imaging-library

在 python PIL lib 中，我正在使用

```
>>> draw.ellipse((x - r, y - r, x + r, y + r)) 
```

画圆作为节点。但是，由于要绘制数以千计的节点，这需要很长时间。
有没有更快的方法来绘制我的所有节点？

对于背景：绘制树状图，以圆圈为节点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T09:05:15.517

如果你在每个周期都画那么多椭圆，它会很慢。

您需要使用 PIL 是否有特定原因？从您的问题详细信息来看，我不确定 PIL 是否适合您的任务：您需要一个图形库，而不是图像处理库。它们是有区别的。

[PyGame](http://www.pygame.org/)是适用于高性能绘图例程的 SDL 包装器。

一些技巧包括在[表面上](http://www.pygame.org/docs/ref/surface.html)绘制一次，然后只重绘脏区域。[这方面的教程可以在这里找到](http://www.pygame.org/docs/tut/newbieguide.html)：

> 大多数图形编程新手使用第一个选项 - 他们每帧更新整个屏幕。问题是，这对大多数人来说速度太慢了。
> 
> 该解决方案称为“脏矩形动画”。不是每帧更新整个屏幕，而是只更新自上一帧以来发生变化的部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T07:27:28.837

我发现 image.paste() 将速度提高了大约 5 倍。避免重叠存在透明问题，因此蒙版使速度稍慢。

```
def init_circle(r):
    center = [r] * 2
    im = Image.new(IMG_MODE, [r * 2] * 2, FG_COLOR)
    draw = ImageDraw.Draw(im) 
    draw.setink(BG_COLOR)
    draw.ellipse((1, 1, r * 2 - 1, r * 2 - 1), fill=NODE_COLOR)
    mask = invert(im.convert('L'))
    return im.crop((0, 0) + (r * 2, r * 2)), mask 
```

使用它：

```
im.paste(circle, (x, y, x + 2 * r, y + 2 * r), mask=mask) 
```

# matlab - 在自定义颜色图中显示矩阵中的值（Matlab）

> ID：13986013
> 
> 赞同：6
> 
> 时间：2012-12-21T07:29:03.493
> 
> 标签：matlab, map, colors, customization, colorbar

我想根据矩阵包含的值来可视化矩阵。我有一个单元格，其中包含 11 个矩阵，每个矩阵有 4 列，它们是 x、y、z（坐标）及其值。我想用位置 x、y、z 可视化这个值，并根据这些值定义我自己的颜色图，然后显示颜色条。我想使用 jet 作为颜色图。我想用蓝色来描述最大值，用红色来描述颜色图上的最小值。最大值和最小值之间的值具有红色到蓝色之间的颜色。

这是我已经尝试过的代码：

```
figure;
hold on
for i=1:length(diameter_lca)
    L2 = diameter_lca{i};
    dl1 = find(L2(:,4) > minimal_lca & L2(:,4)<2);%diameter 0-2
    dl2 = find(L2(:,4) >= 2 & L2(:,4) <= maksimal_lca);%diameter>2-maksimal
    x=L2(:,1);
    y=L2(:,2);
    z=L2(:,3);
    plot3(y(dl1),x(dl1),z(dl1),'*','Color','r');
    plot3(y(dl2),x(dl2),z(dl2),'*','Color','b');
end
daspect([0.488281 0.488281 0.625000]);
view(3); axis tight
camlight 
```

在上面的那些代码中，我所做的是可视化每个矩阵第 4 列的值，然后我做了一个条件，如果值在 0-2 之间，我给了红色，当它在 2 的最大值之间第4栏，我给了蓝色。

现在，我需要在没有任何类似条件的情况下显示 colormap jet 中每个矩阵的第 4 列中的每个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:18:48.487

最简单的方法是使用`scatter3`：

```
%# make jet colormap from red to blue
cmap = flipud(jet(128));

%# plot values
figure,
scatter3(L(:,1),L(:,2),L(:,3),[],L(:,4),'marker','*')

colormap(cmap)
colorbar 
```

# openerp - 如何为 Eclipse IDE 安装 OpenERP 插件？

> ID：13986014
> 
> 赞同：0
> 
> 时间：2012-12-21T07:29:05.400
> 
> 标签：openerp

我最近得知 Eclipse IDE 有一个 OpenERP 插件。谁能指导我如何安装它？

我已经安装了 OpenERP 服务器。我的 OpenERP + PostgreSQL + Gedit（带有 OpenERP 片段）开发环境已经设置好了。

现在，我只想尝试使用 eclipse 来看看使用它而不是 Gedit 是否更适合我。我已经成功安装了 Pydev 插件。我的问题是，我似乎找不到 OpenERP 片段/插件。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T14:22:15.607

[从这里http://code.google.com/p/openerp-eclipse-template/](http://code.google.com/p/openerp-eclipse-template/)下载 xml 和 python 片段的 openerp eclipse 模板。

您还可以在同一链接中找到有关如何安装它的视频。

# actionscript-3 - ActionScript 3 覆盖方法 + 增加可见性

> ID：13986021
> 
> 赞同：2
> 
> 时间：2012-12-21T07:29:58.090
> 
> 标签：actionscript-3, flash, methods, overriding

当我扩展一个类时，我想重写方法并更改它们的可访问性，就像受保护的方法应该在某个类中是公共的。当我编译它说：“不兼容的覆盖”。我不能减少也不能增加能见度。

减少没有意义，我也不需要它，但我能够增加Java 中的**方法可见性。**为什么不在 ActionScript 3 中？

```
public class OldClass
{
    protected function doStuff() : void
    {}
}
public class NewClass extends OldClass
{
    override public function doStuff() : void
    {}
} 
```

难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T07:40:58.867

不，你没有做错任何事。这就是语言的工作方式。从[文档](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7fcd.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7f3c)（强调添加）：

> 静态方法不是继承的，也不能被覆盖。但是，实例方法由子类继承，只要满足以下两个条件，就可以被覆盖：
> 
> *   ...
>     
>     
> *   **覆盖方法必须**与基类方法具有相同级别的访问控制。标记为内部的方法与没有访问控制说明符的方法具有相同级别的访问控制。
>     
>     
> *   覆盖方法必须具有与基类方法相同数量的参数。
>     
>     
> *   覆盖方法参数必须具有与基类方法中的参数相同的数据类型注释。
>     
>     
> *   覆盖方法必须具有与基类方法相同的返回类型。

# java - NetBeans 7.2.1 运行旧代码

> ID：13986030
> 
> 赞同：0
> 
> 时间：2012-12-21T07:31:06.733
> 
> 标签：java, netbeans

我一直在为学校做一个项目，最近遇到了一个错误。我意识到 NetBeans 没有更新我为项目更新的 GUI 项的代码。它不会在 GUI 设计器上更新，也不会在我在设计器预览中查看时甚至在我运行程序时更新。始终运行的代码来自 2 天前。我打开了一个旧项目，这不是问题。到目前为止，我已经删除了缓存，清理了项目，并在保存时启用了自动编译。我也重新安装了 NetBeans。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T09:35:58.923

我知道这是一个相当古老的问题，但是我在尝试解决类似（相同？）问题时遇到了这个线程并设法找到了解决方案，所以我将其发布在这里以供将来参考。

您是否有机会在 *nix 平台上运行 Netbeans？您可能是从不支持 Unix 类型权限的文件系统传输项目文件的 - 在从 NTFS 分区复制项目后，我开始遇到您描述的问题类型，默认情况下仅分配读取和写入权限给我的用户。`cd`到您的项目目录并尝试`chmod -R 777 *`（`rwx`递归地授予每个人的权限），然后重新打开 Netbeans 以查看您的问题是否已解决。（之后您可能希望在某些文件上重新设置不太宽松的权限掩码，但 777 是一种快速检查方法。）

（CR）编辑：@RTOSkit 对 OP 问题的评论让我走上了正轨。

# javascript - 如何在文件上传控制中应用水印

> ID：13986037
> 
> 赞同：-3
> 
> 时间：2012-12-21T07:31:37.177
> 
> 标签：javascript, asp.net

> **可能重复：**
> [将占位符属性放在文件类型输入字段上](https://stackoverflow.com/questions/11685617/putting-placeholder-attribute-on-file-type-input-field)

![在此处输入图像描述](../Images/040657d60fa6a5d82c032b6836331574.png)

我想展示这样的东西..

我有一个文件上传控件，需要在默认文件上传控件文本框中显示一些值。怎么可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:30:00.920

你可以尝试使用

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/TextBoxWatermark/TextBoxWatermark.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/TextBoxWatermark/TextBoxWatermark.aspx)

因为它肯定适用于文本框，但我没有尝试过文件上传控制。

# javascript - 在谷歌应用引擎中将数据从javascript发送到python

> ID：13986039
> 
> 赞同：3
> 
> 时间：2012-12-21T07:32:10.567
> 
> 标签：javascript, jquery, python, ajax, google-app-engine

我想使用 python 在谷歌应用引擎中创建一个应用程序。我必须将 json 字符串列表发送到 python 脚本。我已经完成了以下代码，但没有用。

```
$.post("/javascriptdata",{v:s},function(data,status) {}); 
```

在 python 脚本中，我有一个名为 javascriptdata 的类，必须将数据发送到该类

```
import wsgiref.handlers
import json
import sys
import cgi
from google.appengine.ext import webapp
from google.appengine.ext.webapp import Request
from google.appengine.ext.webapp.util import run_wsgi_app
from google.appengine.ext.webapp import template

class mainh(webapp.RequestHandler):
    def get(self):
        self.response.out.write(template.render("paint.html",{}))

class javascriptdata(webapp.RequestHandler):
    def post(self):
        self.response.headers['content-Type'] = 'html'
        data1=self.request.get('v')
        self.response.out.write("""<html><body>""")
        self.response.out.write(data1)
        self.response.out.write("""</body></html>""")

def main():
    app = webapp.WSGIApplication([
        ('/',mainh),("/save",javascriptdata)], debug=True)
    wsgiref.handlers.CGIHandler().run(app)

if __name__ == "__main__":
    main() 
```

javascriptdata 与 URL“/save”相关联。我创建了一个名为“save”的提交按钮，该按钮将重定向到 /save 但我没有得到任何输出。我知道这可能是一个愚蠢的错误，但我正在努力解决它。请建议我如何发布和阅读此代码的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:13:30.747

这似乎很可疑：

`$.post("/javascriptdata",{v:s},function(data,status) {});`

因为您没有`/javascriptdata`在 python 代码中映射的 URL。也许你的意思是

`$.post('/save', ...`?

或者，您可以将`WSGIApplication`init 更改为：

`...("/javascriptdata",javascriptdata)...`

# c# - 动画标题（如泰拉瑞亚的游戏标题）

> ID：13986042
> 
> 赞同：4
> 
> 时间：2012-12-21T07:32:25.057
> 
> 标签：c#, .net, xna, title

我想做的是制作一个像泰拉瑞亚这样的标题，只是它的来回摇摆而不是图形方面知道怎么做吗？

所以我想学习如何制作像泰拉瑞亚中显示的标题那样来回摇摆的图像？

对于那些不知道泰拉瑞亚是什么的人来说是这样的。

[http://www.youtube.com/watch?v=3K8PMG42l3M](http://www.youtube.com/watch?v=3K8PMG42l3M)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T08:28:09.837

徽标似乎在不相等的时间间隔内旋转并改变其大小。

首先，您需要熟悉[此方法](http://msdn.microsoft.com/en-US/library/ff433988%28v=xnagamestudio.40%29.aspx)：

> SpriteBatch.Draw 方法（Texture2D、Vector2、Nullable、Color、Single、Vector2、Single、SpriteEffects、Single）

参数是：

```
Texture2D texture,                   // texture of your logo
Vector2 position,                    // where to draw
Nullable<Rectangle> sourceRectangle, // null
Color color,                         // Color.White
float rotation,                      // you will be changing this
Vector2 origin,                      // and this
float scale,                         // also this
SpriteEffects effects,               // SpriteEffects.None
float layerDepth                     // 0 
```

使用这些变量：

```
float rotation = 0,
    rotationSpeed = 0.002f, // this is how much rotation will change each frame
    maximumAngle = 0.1f,
    minimumAngle = -0.1f,
    rotationDirection = 1,
    scale = 1f, // 1 means 100%, 0.95f = 95%
    scaleChange = 0.005f, // this may seem not much, but it's enough
    maxScale = 1.1f,
    minScale = 0.9f,
    scaleDirection = 1; 
```

只需`DrawLogo();`输入您的主要`Draw()`方法。

```
void DrawLogo()
{
    // these two very similar pieces of code will control scale and rotation

    if (rotationDirection > 0)
    {
        if (rotation < maximumAngle)
            rotation += rotationSpeed;
        else
            rotationDirection = -rotationDirection;
    }
    else
        if (rotation > minimumAngle)
            rotation -= rotationSpeed;
        else
            rotationDirection = -rotationDirection;

    if (scaleDirection > 0)
    {
        if (scale < maxScale)
            scale += scaleChange;
        else
            scaleDirection = -scaleDirection;
    }
    else
        if (scale > minScale)
            scale -= scaleChange;
        else
            scaleDirection = -scaleDirection;

    Texture2d t2d = logoTexture;

    spriteBatch.Draw(t2d,
        centerScreen,            // change this to `new Vector2(123, 456)`
        null,                    // null means draw entire texture
        Color.White,             // no tinting
        rotation,                // the rotation we calculate above
        new Vector2(t2d.Width / 2, t2d.Height / 2),
          // this sets rotation point to the center of the texture

        scale,                   // the scale we calculate above
        SpriteEffects.None,      // you can mirror your texture with this
        0);                      // I usually leave it zero :p
} 
```

这是经过测试并且工作得很好:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T08:25:12.120

您的意思是当您在菜单中选择内容时，我们可以在大约 1:16（可能也在其他时间）看到的效果？

## 概念

据我所知，您可以通过简单的旋转和缩放来做到这一点。因此，如果您不想制作动画 gif（您认为它是），您可以在您的 XNA 代码中完成。使用带有 alpha 通道的 png 或 gif（以便非文本是透明的）。

然后，当您在屏幕上绘制它时，`spriteBatch.draw()`您可以选择[支持**缩放**和**旋转**](http://msdn.microsoft.com/en-us/library/ff433988%28v=xnagamestudio.40%29.aspx)的重载之一。

然后你必须设置：

*   您想要的轮换（随着时间的推移，这将是一个轮换）
*   原点（到图像的中心）
*   规模（将随着时间的推移而扩大）

据我记得 XNA将时钟发送到`update()`方法，我们将不得不在那里更新图像的旋转和缩放。我们需要时钟，因为我们不能只是设置`rotaton = 10°`，XNA 会为我们处理一切。我们必须自己计算**每个时间步**的当前旋转。例如，如果一个完整的旋转将持续 10 秒，而 5 秒过去了，那么你知道你有一个半旋转。所以我们会告诉 XNA: `Set our rotation to 180° now`，在下一个时间步，我们可能会告诉: `Set our rotation to 190° now`。

基本概念是：

1.  计算我们在当前时间步中做了多少旋转/缩放部分
2.  告诉 XNA 在这个时间步调整这个旋转/比例
    *   一遍又一遍地重复这两个步骤

## 执行

我认为最好的做法是使用 sin() 或 cos() 函数进行缩放和旋转。他们的优点：

*   它们也有正值和负值（所以我们可以很容易地双向旋转）
*   它们很平滑，这意味着您的旋转和缩放在旋转/缩放结束时看起来不会太突然

我希望我的数学在这里是正确的。我会解释一切，所以如果有问题，其他人可以纠正我。或者您也可以找出是否有问题。我们将在这里使用 sin()，因为它从 0 开始，这在我们的例子中意味着什么都不应该发生。这就是我们想要的：我们想要从什么都没有发生的情况开始。

现在，sin() 的循环时间为 2*PI。当然，我们不希望缩放到持续 2*PI，而是希望达到 1000 毫秒。我们不能改变`Math.Sin()`C# 中的定义，但是我们可以改变我们抛出的值。因此，当我们的意思是 1000 毫秒时，我们会给出`Math.Sin()`2PI，当我们的意思是 500 毫秒时，我们会给出 PI。

我们将定义这些成员变量：

```
// define some variables for rotation and scale speed, in milliseconds 
int fullRotationTime = 1000; // max rotation will be reached after 1 second
float maxRotationAngle = MathHelper.ToRadians(10); // we will rotate by 10 degree up and down
int rotationTimePassed = 0;
float currentRotationAngle = 0;

int fullScaleTime = 1000; // max scale will be reached after 1 second
float maxScaleSize = 1.2f; // we will scale to 20% larger max
int scaleTimePassed = 0;
float currentScaleFactor = 1.0; 
```

在该`Update()`方法中，我们计算我们已经完成了多少旋转。

```
protected virtual void Update(GameTime gameTime)
{
    int milliseconds = gameTime.ElapsedGameTime.TotalMilliseconds;

    // these are the milliseconds in the current rotation
    rotationTimePassed += milliseconds;
    scaleTimePassed += milliseconds;

    if (rotationTimePassed >= fullRotationTime)
        rotationTimePassed %= fullRotationTime;
    if (scaleTimePassed >= fullScaleTime)
        scaleTimePassed %= fullScaleTime;

    float rotationTimeAdjustedToTwoPi = ((float)rotationTimePassed)/fullRotationTime * 2* Math.PI);
    currentRotationAngle = maxRotationAngle * Math.Sin(rotationTimeAdjustedToTwoPi);

    // we do not want the scaling to be negative, thus we add 1 to the whole and
    // divide by 2\. Then the maximum will be 1 and the minimum 0
    float scaleTimeAdjustedToTwoPi = ((float)scaleTimePassed)/fullScaleTime * 2* Math.PI);
    currentScaleFactor = maxScaleSize * (Math.Sin(scaleTimeAdjustedToTwoPi) + 1)/2;
} 
```

然后，在该`Draw()`方法中，我们可以取之前计算的值并显示我们旋转和缩放的图像。

```
protected virtual void Draw()
{
    spriteBatch.Begin();
    spriteBatch.Draw(texture,
        new Vector2(50, 50),
        null,
        Color.White,
        currentRotationAngle,
        new Vector2(texture.width/2, texture.height/2),
        currentScaleFactor,
        SpriteEffects.None,
        0
    );
    spriteBatch.End();
} 
```

它没有经过测试，因此甚至可能存在语法错误，但我至少基本思想应该是正确的，我认为重要的是您了解**如何**在概念上完成它。

## 可变时间步长

很容易将*user1306322*提到的可变时间步长集成到上面的代码中。我们有这些 if 条件，我们检查当前时间片是否结束，如下所示`if (rotationTimePassed >= fullRotationTime)`：

现在我们想让时间片变长，这里只需根据随机数调整一个新的时间片。像这样：

```
var rand = new Random();

if (rotationTimePassed >= fullRotationTime)
{
    rotationTimePassed %= fullRotationTime;

    // next rotation might take between 0.5 and 2.5 seconds
    fullRotationTime = rand.next(500, 2500);
} 
```

# objective-c - 如何通过单独提供密钥文件来播放 m3u8 加密的播放列表？

> ID：13986047
> 
> 赞同：4
> 
> 时间：2012-12-21T07:32:52.980
> 
> 标签：objective-c, ios, ios5, http-live-streaming

我有一个`m3u8`播放列表文件（让我们称之为素数），它指向另一个播放列表文件，该文件又具有带有密钥文件 URL 的 ts URL。使用`MPMoviePlayer`我当前可以播放该`prime m3u8`文件。这些段`encrypted`采用`AES-128`位加密，密钥文件在最终`m3u8`文件中。有没有办法可以提供最终`m3u8`文件并告诉应用程序使用本地密钥文件来解密视频，所以我不必公开发布密钥文件。

[这与this SO question](https://stackoverflow.com/questions/4491975/http-live-streaming-with-encryption)有点相关

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-04-17T07:03:07.200

我已经实现了类似的东西。我们所做的是：

1.  在运行时使用 JWT 令牌加密实时流片段的每个片段，该令牌具有键值对和时间戳的组合以进行验证。
2.  我们的服务器知道如何解密这个密钥。并且当解密数据有效时，服务器会以 .ts 文件响应，因此播放变得安全。

这是完整的工作代码，其中提到了步骤：

```
//Step 1,2:- Initialise player, change the scheme from http to fakehttp and set delete of resource loader. These both steps will trigger the resource loader delegate function so that we can manually handle the loading of segments. 

func setupPlayer(stream: String) {

operationQ.cancelAllOperations()
let blckOperation = BlockOperation {

    let currentTStamp = Int(Date().timeIntervalSince1970 + 86400)//
    let timeStamp = String(currentTStamp)
    self.token = JWT.encode(["Expiry": timeStamp],
                            algorithm: .hs256("qwerty".data(using: .utf8)!))

    self.asset = AVURLAsset(url: URL(string: "fake\(stream)")!, options: nil)
    let loader = self.asset?.resourceLoader
    loader?.setDelegate(self, queue: DispatchQueue.main)
    self.asset!.loadValuesAsynchronously(forKeys: ["playable"], completionHandler: {

        var error: NSError? = nil
        let keyStatus = self.asset!.statusOfValue(forKey: "playable", error: &error)
        if keyStatus == AVKeyValueStatus.failed {
            print("asset status failed reason \(error)")
            return
        }
        if !self.asset!.isPlayable {
            //FIXME: Handle if asset is not playable
            return
        }

        self.playerItem = AVPlayerItem(asset: self.asset!)
        self.player = AVPlayer(playerItem: self.playerItem!)
        self.playerView.playerLayer.player = self.player
        self.playerLayer?.backgroundColor = UIColor.black.cgColor
        self.playerLayer?.videoGravity = AVLayerVideoGravityResizeAspect

        NotificationCenter.default.addObserver(self, selector: #selector(self.playerItemDidReachEnd(notification:)), name: Notification.Name.AVPlayerItemDidPlayToEndTime, object: self.playerItem!)
        self.addObserver(self, forKeyPath: "player.currentItem.duration", options: [.new, .initial], context: &playerViewControllerKVOContext)
        self.addObserver(self, forKeyPath: "player.rate", options: [.new, .old], context: &playerViewControllerKVOContext)
        self.addObserver(self, forKeyPath: "player.currentItem.status", options: [.new, .initial], context: &playerViewControllerKVOContext)
        self.addObserver(self, forKeyPath: "player.currentItem.loadedTimeRanges", options: [.new], context: &playerViewControllerKVOContext)
        self.addObserver(self, forKeyPath: "player.currentItem.playbackLikelyToKeepUp", options: [.new], context: &playerViewControllerKVOContext)
        self.addObserver(self, forKeyPath: "player.currentItem.playbackBufferEmpty", options: [.new], context: &playerViewControllerKVOContext)
    })
}

operationQ.addOperation(blckOperation)
}

//Step 2, 3:- implement resource loader delegate functions and replace the fakehttp with http so that we can pass this m3u8 stream to the parser to get the current m3u8 in string format.

func resourceLoader(_ resourceLoader: AVAssetResourceLoader, shouldWaitForLoadingOfRequestedResource loadingRequest: AVAssetResourceLoadingRequest) -> Bool {

var url = loadingRequest.request.url?.absoluteString

let contentRequest = loadingRequest.contentInformationRequest
let dataRequest = loadingRequest.dataRequest
//Check if the it is a content request or data request, we have to check for data request and do the m3u8 file manipulation

if (contentRequest != nil) {

    contentRequest?.isByteRangeAccessSupported = true
}
if (dataRequest != nil) {

    //this is data request so processing the url. change the scheme to http

    url = url?.replacingOccurrences(of: "fakehttp", with: "http")

    if (url?.contains(".m3u8"))!
    {

        // do the parsing on background thread to avoid lags
// step 4: 
        self.parsingHandler(url: url!, loadingRequest: loadingRequest, completion: { (success) in

            return true
        })
    }
    else if (url?.contains(".ts"))! {

        let redirect = self.generateRedirectURL(sourceURL: url!)

        if (redirect != nil) {
            //Step 9 and 10:-
            loadingRequest.redirect = redirect!
            let response = HTTPURLResponse(url: URL(string: url!)!, statusCode: 302, httpVersion: nil, headerFields: nil)
            loadingRequest.response = response
            loadingRequest.finishLoading()
        }
        return true
    }
    return true
}
return true
}

func parsingHandler(url: String, loadingRequest: AVAssetResourceLoadingRequest, completion:((Bool)->Void)?) -> Void {

DispatchQueue.global(qos: .background).async {

    var string = ""

    var originalURIStrings = [String]()
    var updatedURIStrings = [String]()

    do {

        let model = try M3U8PlaylistModel(url: url)
        if model.masterPlaylist == nil {
            //Step 5:- 
            string = model.mainMediaPl.originalText
            let array = string.components(separatedBy: CharacterSet.newlines)
            if array.count > 0 {

                for line in array {
                    //Step 6:- 
                    if line.contains("EXT-X-KEY:") {

                        //at this point we have the ext-x-key tag line. now tokenize it with , and then
                        let furtherComponents = line.components(separatedBy: ",")

                        for component in furtherComponents {

                            if component.contains("URI") {
                                // Step 7:- 
                                //save orignal URI string to replaced later
                                originalURIStrings.append(component)

                                //now we have the URI
                                //get the string in double quotes

                                var finalString = component.replacingOccurrences(of: "URI=\"", with: "").replacingOccurrences(of: "\"", with: "")

                                finalString = "\"" + finalString + "&token=" + self.token! + "\""
                                finalString = "URI=" + finalString
                                updatedURIStrings.append(finalString)
                            }
                        }
                    }

                }
            }

            if originalURIStrings.count == updatedURIStrings.count {
                //Step 8:- 
                for uriElement in originalURIStrings {

                    string = string.replacingOccurrences(of: uriElement, with: updatedURIStrings[originalURIStrings.index(of: uriElement)!])
                }

                //print("String After replacing URIs \n")
                //print(string)
            }
        }

        else {

            string = model.masterPlaylist.originalText
        }
    }
    catch let error {

        print("Exception encountered")
    }

    loadingRequest.dataRequest?.respond(with: string.data(using: String.Encoding.utf8)!)
    loadingRequest.finishLoading()

    if completion != nil {
        completion!(true)
    }
}
}

func generateRedirectURL(sourceURL: String)-> URLRequest? {

    let redirect = URLRequest(url: URL(string: sourceURL)!)
    return redirect
} 
```

1.  实现 Asset Resource Loader Delegate 以自定义处理流。
2.  Fake the scheme of live stream so that the Resource loader delegate gets called (for normal http/https it doesn't gets called and player tries to handle the stream itself)
3.  Replace the Fake Scheme with Http scheme.
4.  Pass the stream to M3U8 Parser to get the m3u8 file in plain text format.
5.  Parse the plain string to find EXT-X-KEY tags in the current string.
6.  Tokenise the EXT-X-KEY line to get to the "URI" method string.
7.  Append JWT token separately made, with the current URI method in the m3u8.
8.  Replace all instances of URI in the current m3u8 string with the new token appended URI string.
9.  Convert this string to NSData format
10.  Feed it to the player again.

Hope this helps!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T08:46:10.647

是的——您可以在将最终的 m3u8 文件传递​​给播放器之前对其进行修改。例如，将 KEY 行更改为引用`http://localhost/key`. 然后你会想要运行一个本地 http 服务器，比如 cocoahttpserver 来将密钥传递给视频播放器。

# google-chrome - 一些 Chrome 用户没有看到为 MIDI 文件激活的 Quicktime 插件

> ID：13986048
> 
> 赞同：2
> 
> 时间：2012-12-21T07:32:56.857
> 
> 标签：google-chrome, quicktime

我有一个 webapp，它使用页面上的嵌入式 midi 文件作为功能的一部分。这对大多数用户来说都很好。但是相当多的 Chrome 用户会遇到根本无法播放 MIDI 文件的问题。Quicktime插件权限提示也没有激活。页面没有JS错误。转到 chrome://plugins/ 证明安装了 Quicktime 插件。用户甚至无法通过直接导航来播放 MIDI 文件。关于可能出错的任何建议？

编辑：尝试播放 MIDI 文件时，他们会看到带有问号的 Quicktime 徽标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T12:27:18.297

只是想添加：在高级选项卡/媒体编码下的 QuickTime 首选项中，确保选中“使用旧编解码器启用编码”...。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T19:25:15.420

Chrome 和 Quicktime 插件也有类似的问题。该插件不会播放任何嵌入的 .mid 文件。我不确定为什么这种方法有效，但是.... 卸载 Quicktime 程序。打开 Chrome 并转到包含嵌入式 .mid(s) 的网页。等待安装 Quicktime 插件警报。按照指示安装，然后关闭所有窗口。转到控制面板/程序和功能。找到 Quicktime 安装。选择“修复”。返回到嵌入了 .mid(s) 的网页。.mid 文件现在应该按预期播放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-14T03:53:19.053

对于当前版本的 Chrome，这无济于事。我必须切换到 FireFox 才能听到 .mid 文件。即使将默认的 .mid 播放器更改为 WMP 也无济于事。Chrome 想要将 .mid 文件保存到计算机。显然是一个错误。

# .net - 使用 Substring 使用 linq 进行实体框架 4.0 查询

> ID：13986049
> 
> 赞同：1
> 
> 时间：2012-12-21T07:32:56.663
> 
> 标签：.net, linq, entity-framework-4

我在使用 LINQ 通过特定列值从数据库获取结果时遇到问题。

这是我的表 Customer(Id, Name, Surname, ExternalID)。ExternalID 是具有特定字符串模式的 varchar 列，例如 01_johnDoe。

假设我想获得客户 johnDoe，而我的方法获得字符串 johnDoe。

我可以通过这种方式做到这一点：

```
public<Customer> GetMeACustomer(string customerExternalID)
{
using(var context=new MyContext())
{

var customerObject=(from c in contex.Customer where c.ExternalID.Contains(customerExternalID)).Single()   

}

} 
```

这段代码不够好，仅仅是因为发送到数据库的查询使用的是运算符 LIKE。这很慢（我有大量客户）。我无法在 linq 内部实现这样的功能：

```
 var example = ExternalIDFromDatabase.Substring(ExternalIDFromDatabase.IndexOf("_") + 1, customerExternalID.Count()); 
```

通过这段代码，我可以简单地说

```
var customerObject=(from c in contex.Customer where c.ExternalID.Substring(c.ExternalID.IndexOf("_") + 1, customerExternalID.Count())==customerExternalID).Single() 
```

但它不起作用。有任何想法吗 ？比你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:06:08.313

当您替换`customerExternalID.Count()`为`customerExternalID.Length`或创建局部变量（比如说`customerExternalIDCount`）并将计数分配给它时，它应该可以工作。可能提供者试图将此`Count`调用转换为 SQL。

顺便说一句，您可能想使用`Substring`方法而不指定`length`. 例如`01_johnRobin`，如果`02_johnRobins`在数据库中有和，您将获得 2 个结果`johnRobin` `customerExternalID`。

# java - 下载文件而不在服务器上存储文件？如何在不将文件存储在服务器上的情况下为客户端提供文件下载功能？

> ID：13986050
> 
> 赞同：0
> 
> 时间：2012-12-21T07:32:58.383
> 
> 标签：java, jasper-reports, report, download, outputstream

我在我的 liferay portlet 中使用 jasper 报告，我希望该用户直接从输出流中下载报告。我不想将报告 pdf 文件存储在我的服务器上。

我怎样才能用碧玉报告做到这一点？

```
File pdf = File.createTempFile("output.", ".pdf");
JasperExportManager.exportReportToPdfStream(jasperPrint, new FileOutputStream(pdf)); 
```

现在我正在这样做，它在某个目录中生成 pdf 文件，然后我向用户提供下载链接。但我希望该用户只需从直接输出流中下载 pdf。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:33:34.020

在您的 portlet 操作中：

```
public void serveResource(ResourceRequest request,ResourceResponse response) throws PortletException, IOException {

    response.setContentType("application/application-download");
    response.setProperty("Content-disposition", "attachement; filename=<some file.pdf>");

    OutputStream responseStream = response.getPortletOutputStream();

    jasperPrint=...
    JasperExportManager.exportReportToPdfStream(jasperPrint, responseStream);

    responseStream.flush();
    responseStream.close();

} 
```

然后像这样创建资源下载 url：

```
<a href="<portlet:resourceURL/>">Download Report</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T07:39:10.750

如果我正确理解了这个问题，您可以尝试

```
 ByteArrayOutputStream bous = new ByteArrayOutputStream();
  JasperExportManager.exportReportToPdfStream(jasperPrint, bous);
  byte[] bytes = bous.toByteArray(); 
```

# python - 在python中从反向切片字符串

> ID：13986054
> 
> 赞同：0
> 
> 时间：2012-12-21T07:33:13.907
> 
> 标签：python, string, slice

我有一个字符串，例如如下

```
i = 'backup_1.2012-12-19.tar.gz' 
```

我只需`2012-12-19.tar.gz`要从反向的字符串中获取（因为有时字符串会像这样改变`'backup_2.2012-12-20.tar.gz','backup_3.2012-12-21.tar.gz'`）

所以无论字符串是什么，我需要`2012 to .gz`从 python 中的反向切片字符

谁能让我知道如何做这个蟒蛇

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T07:34:47.943

你不能在第一个之后把所有东西都拿走`.`吗？

```
>>> s.split('.', 1)[1]
'2012-12-19.tar.gz' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T07:34:54.300

签出[`str.partition`](http://docs.python.org/2/library/stdtypes.html#str.partition)：

```
In [160]: i = 'backup_1.2012-12-19.tar.gz'

In [161]: i.partition('.')
Out[161]: ('backup_1', '.', '2012-12-19.tar.gz')

In [162]: i.partition('.')[-1]
Out[162]: '2012-12-19.tar.gz' 
```

**编辑**：如果你想“反转”日期：

```
In [163]: i.partition('.')[-1].partition('.')[0]
Out[163]: '2012-12-19'

In [164]: i.partition('.')[-1].partition('.')[0].split('-')[::-1]
Out[164]: ['19', '12', '2012']

In [165]: '-'.join(i.partition('.')[-1].partition('.')[0].split('-')[::-1])
Out[165]: '19-12-2012' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-21T07:35:51.680

您可以使用带有负索引的切片：

```
s[-17:] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T09:49:55.213

```
 ".".join(i.split(".")[1:]) 
```

这也将起作用。但是乔恩的回答更贴切，因为您将只进行两次操作。

或按照以下方式进行。即使字符串包含更多“。”，这也将始终返回您最后的字符串。在开始。

```
".".join(i.split(".")[-3:]) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-06-06T12:33:07.293

```
i = "backup_1.2012-12-19.tar.gz"
z = i[9:26]
print(z) 
```

# objective-c - 看似简单的 UINavigationController 问题，navigationItem 无法正确显示

> ID：13986055
> 
> 赞同：1
> 
> 时间：2012-12-21T07:33:16.007
> 
> 标签：objective-c, ios, ios6

我有一个基地`UINavigationController`和3个`UIViewController`。

让我们打电话给他们`Home, VC2, and VC3`。

我有一个故事板从`Home`to`VC2`和 from `VC2`to 开始`VC3`。

现在...如果我`[self.navigationController popToRootViewControllerAnimated:YES]`从 VC3 中调用，我会被带回`navigationItem`VC2 顶部栏的“主页”！什么！？

如果我只是使用“后退”按钮，`navigationItem`顶部栏将按预期显示每个视图......

任何人都可以建议替代`popToRootViewControllerAnimated:(BOOL)`, 或`popToViewController:(UIViewController*)`吗？两者都会导致问题发生..

编辑：另外，只是为了进一步说明会发生什么：一旦我弹回主页，VC2 的 navigationItem 就坐在那里，它包含自己的标题和后退按钮 - 如果我点击后退按钮，顶部栏从右侧滑出，现在顶部栏是空的。同样，使用 VC3:back -> VC2:back 按钮返回主页时不会发生这种情况。对于 UIKit 来说，这似乎是一件相当糟糕的事情，但也许我错过了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T22:12:17.790

好的，我弄清楚了问题所在。

在堆栈的底部实际上有一个不同的视图。我正在修复别人项目中的错误，所以我对结构有点模糊。

所以它更像是这样的：

`Splash > Home > VC2 > VC3`

不知何故，来自 VC3 的 popToRoot 将转到`Home`，而不是`Splash`. `VC2`不知何故，在那之后出现了导航栏。因此，在`Home`'s内部`viewDidAppear`，我添加`self.navigationController.viewControllers = [NSArray arrayWithObject:self];`了导航栏问题并自行解决。

# ruby - 加载错误：升级到 watir 4.0.2 后没有要加载的文件 - watir/testcase

> ID：13986057
> 
> 赞同：3
> 
> 时间：2012-12-21T07:33:30.140
> 
> 标签：ruby, watir

我刚刚升级到`watir 4.0.2`from `watir 2.0.4`，我收到以下错误，

```
C:/Ruby187/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:60:in `gem_original
_require': no such file to load -- watir/testcase (LoadError) 
```

我搜索了该错误，但无法找到解决方案。

**宝石清单**

```
abstract (1.0.0)                    
actionmailer (3.2.8, 3.0.0)                 
actionpack (3.2.8, 3.0.0)                   
activemodel (3.2.8, 3.0.0)                  
activerecord (3.2.8, 3.0.0)                 
activeresource (3.2.8, 3.0.0)                   
activesupport (3.2.8, 3.0.0)                    
addressable (2.3.2)                 
akami (1.2.0)                   
arel (3.0.2, 1.0.1)                 
Ascii85 (1.0.1)                 
builder (3.0.0, 2.1.2)                  
bundler (1.0.22)                    
childprocess (0.3.6)                    
commandline (0.7.10)                    
commonwatir (4.0.0, 2.0.4)                  
erubis (2.7.0, 2.6.6)                   
ffi (1.1.5)                 
gyoku (0.4.6)                   
hike (1.2.1)                    
hoe (3.0.8)                 
httpi (0.9.7)                   
i18n (0.6.1, 0.4.2)                 
journey (1.0.4)                 
libwebsocket (0.1.5)                    
mail (2.4.4, 2.2.19)                    
mime-types (1.19, 1.18)                 
mini_magick (3.2.1)                 
multi_json (1.3.6)                  
mysql2 (0.3.11 x86-mingw32, 0.2.18 x86-mingw32, 0.2.6 x86-mingw32)                  
nokogiri (1.5.5 x86-mingw32)                    
nori (1.1.3)                    
pdf-reader (1.1.1)                  
polyglot (0.3.3)                    
rack (1.4.1, 1.2.5)                 
rack-cache (1.2)                    
rack-mount (0.6.14)                 
rack-ssl (1.3.2)                    
rack-test (0.6.2, 0.5.7)                    
rails (3.0.0)                   
railties (3.0.0)                    
rake (0.8.7)                    
rautomation (0.7.3, 0.6.3)                  
ruby-rc4 (0.1.5)                    
rubygems-update (1.8.24)                    
rubyzip (0.9.9)                 
s4t-utils (1.0.4)                   
savon (0.9.9)                   
selenium-webdriver (2.26.0)                 
sprockets (2.1.3)                   
sqlite3 (1.3.6 x86-mingw32)                 
sqlite3-ruby (1.3.3)                    
subexec (0.0.4)                 
text-format (1.0.0)                 
text-hyphen (1.0.2)                 
thor (0.14.6)                   
tilt (1.3.3)                    
treetop (1.4.10)                    
tzinfo (0.3.33)                 
user-choices (1.1.6.1)                  
wasabi (2.1.0)                  
watir (4.0.2 x86-mingw32, 2.0.4)                    
watir-classic (3.3.0)                   
watir-webdriver (0.6.2)                 
websocket (1.0.6)                   
win32-api (1.4.8 x86-mingw32)                   
win32-process (0.6.6)                   
win32screenshot (1.0.7)                 
windows-api (0.4.2)                 
windows-pr (1.2.2)                  
xml-simple (1.1.1)                  

Ruby Version:ruby 1.8.7 (2010-08-16 patchlevel 302) [i386-mingw32] 
```

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:30:15.243

`watir/testcase`最近从 Watir 中删除。我找不到它何时被删除，但信息在[CHANGES](https://github.com/watir/watir-classic/blob/master/CHANGES)文件或[Git 历史记录](https://github.com/watir/watir-classic/commits/master)中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:36:57.793

虽然离开 Watir::TestCase 可能会更好，但如果您真的需要或想要使用它，您可以通过从 3.0.0 复制文件来重新创建它。

假设您使用的是 Ruby 1.8，它仍然默认安装了 test-unit gem，您可以执行以下操作：

1) 使用以下代码创建一个名为“watir_testcase.rb”的文件，它基本上是 3.0 中 testcase.rb 和 assertions.rb 文件的副本：

```
require 'watir-classic'
require 'test/unit'
require 'test/unit/assertions'

module Watir
  # Verification methods used by Watir::TestCase
  module Assertions
  include Test::Unit::Assertions

    # Log a failure if the boolean is true. The message is the failure message logged.
    # Whether true or false, the assertion count is incremented.
    def verify boolean, message = 'verify failed.'
      add_assertion
      add_failure message.to_s, caller unless boolean
    end

    def verify_equal expected, actual, message=nil
      full_message = build_message(message, <<EOT, expected, actual)
<?> expected but was
<?>.
EOT
      verify(expected == actual, full_message)
    end
    def verify_match pattern, string, message=nil
      pattern = case(pattern)
      when String
        Regexp.new(Regexp.escape(pattern))
      else
        pattern
      end
      full_message = build_message(message, "<?> expected to be =~\n<?>.", string, pattern)
      verify(string =~ pattern, full_message)
    end

  end

end

module Test::Unit::Assertions
    def assert_false(boolean, message=nil)
        _wrap_assertion do
            assert_block("assert should not be called with a block.") { !block_given? }
            assert_block(build_message(message, "<?> is not false.", boolean)) { !boolean }
        end
    end
end 

module Watir

  # This is a 'test/unit' testcase customized to exeucte test methods sequentially by default
  # and extra assertions
  #
  class TestCase < Test::Unit::TestCase
    include Watir::Assertions
    @@order = :sequentially
    def initialize name
      throw :invalid_test if name == :default_test && self.class == Watir::TestCase
      super
    end        
    class << self
      attr_accessor :test_methods, :order
      def test_methods
        @test_methods ||= []
      end
      def order
        @order || @@order
      end
      def default_order= order
        @@order = order
      end
      def sorted_test_methods
        case order
        when :alphabetically then          test_methods.sort
        when :sequentially then            test_methods
        when :reversed_sequentially then   test_methods.reverse
        when :reversed_alphabetically then test_methods.sort.reverse
        else raise ArgumentError, "Execute option not supported: #{@order}"
        end
      end
      def suite
        suite = Test::Unit::TestSuite.new(name)
        sorted_test_methods.each do |test|
          catch :invalid_test do
            suite << new(test)
          end
        end
        if (suite.empty?)
          catch :invalid_test do
            suite << new(:default_test)
          end
        end
        return suite
      end
      def method_added id
        name = id.id2name
        test_methods << name if name =~ /^test./
      end
      def execute order
        @order = order
      end
    end
    public :add_assertion
  end    

end 
```

2）在您的测试用例文件中，更改：

```
require 'watir/testcase' 
```

要求新创建的文件：

```
require './watir_testcase' 
```

（确保路径对于您保存文件的任何位置都是正确的）

# android - 发送给具有相同项目 ID 的所有用户 - GCM

> ID：13986058
> 
> 赞同：0
> 
> 时间：2012-12-21T07:33:32.707
> 
> 标签：android, push-notification, google-cloud-messaging

我知道必须提供第 3 方 GCM 服务器端应用程序`Registration IDs`才能向用户发送消息。

有没有办法无需提供就可以向所有用户发送消息`Registration IDs`？

我知道这`Project ID`不是特定于应用程序的。`Project ID`但是我们可以在不提供信息的情况下向同一注册的所有设备发送消息`Registration IDs`吗？

感谢您的关注。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T07:42:15.383

据我了解，没有办法通过单个帖子向所有用户广播消息。

您需要以最多 1000 个 ID 的块发送每个 ID。因此，如果您有 2200 个 ID，则需要将其分成 3 个帖子。1-1000、1001-2000、2001-2200。

# c# - Connection string to Database Application

> ID：13986077
> 
> 赞同：0
> 
> 时间：2012-12-21T07:35:11.873
> 
> 标签：c#, sql-server

I have a Windows Forms application to read, create and update members, the application is ready and I want to deploy/install it on three or four pc’s.

During the development process I have used a connection string like this:

```
using (SqlConnection connection = 
    new SqlConnection(
        "Data Source=MY-PC\\JGSQLSERVER;Initial Catalog=TESTSUB;Integrated Security=True")) 
```

There is a domain on which an organisations website runs, and there is SQL server server. I have made the same table structure in the SQL web server .

My question is when I install the small windows app on any pc, do I need to change the connection address so the application can connect?

For example, like the above:

```
using (SqlConnection connection = 
    new SqlConnection("Data Source=web servers address\\ webSQLSERVER;Initial Catalog=TESTSUB;Integrated Security=True")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:57:37.960

Exactly for this it is good practice to put the connection string in some kind of configuration file, either in the app.config or encrypted in some other kind of configuration. If you do this, you do not need to rebuild your app when you deploy it to different environments, or if the SQL server addresses change:

config:

```
<configuration>
    <connectionStrings>
      <add name="MyConnectionString" connectionString="your_connection_string" providerName="System.Data.EntityClient" />
    </connectionStrings>
</configuration> 
```

c#:

```
using (SqlConnection connection = 
    new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["MyConnectionString"])){
    //do stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T07:39:58.867

Short answer: Yes.
Otherwise your application(s) wouldn't know where to find its data(base) and would still look on the local system for it (where it couldn't be found).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T07:42:25.070

Yes, you need to point your app to the correct server. And unless the SQL Server service is running on the same machine as your client app or in the same domain, you will most likely want to use SQL authentication, not Windows authentication. You will need to create a user in SQL Server and add it to your database, also grant it any permissions that your app requires, I guess the user is usually a DBO. Then use a different connection string:

```
Server=myServerAddress;Database=myDataBase;User Id=myUsername;Password=myPassword; 
```

See [http://www.connectionstrings.com/](http://www.connectionstrings.com/) for examples of various connection strings for different databases. I hope it helps.

# actionscript-3 - 我应该在这里使用直接函数调用而不是事件处理程序吗？

> ID：13986078
> 
> 赞同：0
> 
> 时间：2012-12-21T07:35:16.617
> 
> 标签：actionscript-3, flash, actionscript

我在 Actionscript3 工作，构建一个类似 MMO 的游戏，我负责 UI 等等。我在很多工作流程中都使用事件，但我的伙伴建议我对我的 UI 资产使用直接函数调用。这是一个例子：

1.  我创建了一个**ColorChooser**类，我们用它来重新着色用户头像的部分。
2.  当您单击一种颜色时，**ColorChooser**会读取单击的像素（色谱图像的）并调度一个事件（**ColorChooser.COLOR_CHOSEN**）。
3.  我的**AvatarDesigner**类正在监听这个事件。
4.  当事件被调度时，**AvatarDesigner**中的处理程序事件读取**(e.target as ColorChooser).chosenColor**并将该颜色应用于头像的选定部分。

我的搭档建议我改为：

1.  为ColorChooser**提供**其父**AvatarDesigner**对象 ( **_avatarDesigner** ) 的实例。
*****   单击颜色时，读取单击的像素 ( **var selectedColor:uint** ) 并从**ColorChooser**对象中调用**_avatarDesigner.colorAvatar(chosenColor)**。****

 ******现在，在我的大部分 UI 中，我都在使用事件，这样我就可以将下拉菜单、按钮、文本区域等资产分开并可重复使用。我想我们会将这个 ColorChooser 对象重新用于其他事情（ObjectDesigner、WallpaperDesigner、BuildingDesigner）。他说每次我将它用于其他用途时，最好在 ColorChooser 中添加一个条件，所以可能像：

```
private function colorClicked(e:MouseEvent):void {
    var chosenColor:uint = *the color chosen (bitmapdata.getpixel());*
    switch(parent){
        case AvatarDesigner:    (parent as AvatarDesigner).colorChosen(chosenColor); 
                                break;
        case ObjectDesigner:    (parent as ObjectDesigner).colorChosen(chosenColor); 
                                break;
        case WallpaperDesigner: (parent as WallpaperDesigner).colorChosen(chosenColor); 
                                break;
        case BuildingDesigner:  (parent as BuildingDesigner).colorChosen(chosenColor); 
                                break;
    }
} 
```

或类似的东西（也许不是检查父级，而是检查构造函数中的字符串“类型”或其他东西）。这对我来说似乎很奇怪，因为每次在其他地方使用它时我都必须返回并添加一个案例。而对于事件，它可以触发它的事件并处理或不处理它，而不管它的父级是什么。他的一些推理是：

*   事件只能用于异步事件或输入（鼠标、键盘）
*   调度的事件和监听器占用更多的 cpu
*   直接函数调用更快，因为它是当前线程的一部分，并且不会在稍微不同的时间分派和处理
*   Actionscript3 和 Away3D（用于 3D）永远不会以这种方式使用事件

而我认为这些活动是适当的，原因如下：

*   允许对象完全独立于其父对象，使其更易于重复使用
*   我认为分派的事件和侦听器不会占用更多的 CPU（例如，因为任何给定的 Sprite 在任何给定的时间分派许多事件，如 ENTER_FRAME、MOUSE_OUT、ADDED_TO_STAGE）而没有看到性能下降
*   如果在 dispatchEvent 之后在侦听器中发生顺序相关的任务，那么轻微的异步性并不重要
*   Away3D 确实以这种方式使用它们，我认为，在挖掘了他们的 API 之后。

任何人都可以对此有所了解吗？每次我在不同类型的父项中使用此资产时，是否值得在新的逻辑条件中进行硬编码，例如“ShinyButton”？即使事件和侦听器正在使用 CPU，添加这样的条件不会使它有点像意大利面条吗？

此外，在我的一生中，我找不到 Actionscript3 最佳实践来判断事件是好是坏，以及为什么。另外，如果有人知道如何在低级别使用事件，我会很高兴。

谢谢阅读！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:35:25.137

我认为你的不同意见更多是基于习惯而不是真正的原因。

我会亲自使用个人事件模型，这是我想到的最开放和最灵活的解决方案。

但是，如果您想使用回调函数而无需返回到您的`ColorChooser`. applyColor”或“choseColor”，而不是形容词或名称，如“colorChosen”，这并不意味着很多）`IColorReceiver``applyColor(color:Color){};`

然后在您的`colorPicked(e:MouseEvent){}`方法中确保`parent`实现了`IColorReceiver`，并且您在调用`applyColor(chosenColor);`时没有使用其他测试，而不是使用`IColorReceiver`. 它也可以与经典继承一起使用，但需要更多代码以降低灵活性。

我不提供代码，但你似乎有一个合理的水平，所以我有信心。;)

（希望我的英语是正确的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:47:18.037

简短的回答，我认为你是对的，你的朋友是错的。任何感知到的性能提升（如果有的话）都可以忽略不计，并且正如您正确预期的那样，引入的[紧耦合](http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29)将使您的组件难以在其他情况下重用，并使您的项目更难作为一个整体进行维护。

ActionScript 是一种基于事件的异步语言，如果您鼓励他接受它而不是反对它，您将帮助您的朋友！

要回答您关于 ActionScript 3.0 开发最佳实践的问题，我认为您可以比查看 Flex 框架的某些组件的结构做得更糟。这些是由 Adob​​e 工程师开发的，因此可以被视为最佳实践的演示。您会发现大量使用事件来避免不同组件或组件参与者之间的紧密耦合，并尽量减少使用您朋友建议的那种[臭代码。](http://en.wikipedia.org/wiki/Code_smell)******

# jquery-mobile - 如何显示触摸滑动轨迹？

> ID：13986080
> 
> 赞同：0
> 
> 时间：2012-12-21T07:35:27.850
> 
> 标签：jquery-mobile, swipe, trail

我使用 Jquery Mobile 创建了一个简单的 html 页面。用户可以通过向两侧滑动屏幕来在页面之间导航。我想在用户使用滑动手势时显示手指轨迹（如果你玩过水果忍者，你就会明白我的意思。）

有什么想法可以实施吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:39:02.220

JqueryMobile 允许您获取触摸事件坐标..（可能是滑动的开始和结束），您可以使用画布或简单的解决方案 - div 元素网格来显示滑动手势轨迹

# xamarin.android - 如何通过 web 服务从 monodroid 与 sql server 交互？

> ID：13986085
> 
> 赞同：1
> 
> 时间：2012-12-21T07:35:45.413
> 
> 标签：xamarin.android

我想通过 Web 服务将数据从 monodroid 应用程序存储到 sql server。

monodroid ==> Web 服务 ==> Sql 服务器

实际上，我尝试通过 Web 服务使用带有 sql server 的 asp.net。它适用于这种方法。插入sql server的数据。

asp.net ==> 网络服务 ==> sql 服务器。

但是当我为 monodroid 尝试这种类似的方式时，数据尚未存储在 sql server 数据库中。

**这是我的 Web 服务代码：**

```
 SqlConnection conn = new SqlConnection(@"Data Source=DINESH-PC\SQLEXPRESS;Initial Catalog=remotedb;Integrated Security=True");
    SqlCommand com;

    public Service1 () {

    //Uncomment the following line if using designed components 
    //InitializeComponent(); 
}

    [WebMethod]
    public string insert(string name)
    {
        com = new SqlCommand("insert into dinesh values('" + name + "')", conn);
        conn.Open();
        com.ExecuteNonQuery();
        conn.Close();
        return "Hello World";
    }
} 
```

**这是我的 monodroid 代码**

```
public class Activity1 : Activity
{

    localhost.Service1 suresh = new localhost.Service1();
    string dinesh;
    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        // Set our view from the "main" layout resource
        SetContentView(Resource.Layout.Main);

        // Get our button from the layout resource,
        // and attach an event to it
        Button button = FindViewById<Button>(Resource.Id.MyButton);

        EditText e1=FindViewById<EditText>(Resource.Id.editText1);
        button.Click += delegate {

            dinesh = suresh.insert(e1.Text);
        };
    }
} 
```

}

帮助我，我需要在编码中更改什么，或者我需要更改任何设置以访问 monodroid 中的 Web 服务吗？

# java - Dagger for Android：调用 setContentView 后将 Activity 注入对象图

> ID：13986092
> 
> 赞同：8
> 
> 时间：2012-12-21T07:36:22.867
> 
> 标签：java, android, dependency-injection, dagger

我想在 Android 上使用 Dagger 将一个实例注入`Activity`到另一个类中，如下所示：

```
class PresentationLayer{
    Activity mActivity;

    @Inject
    public PresentationLayer(Activity activity){
        this.mActivity = activity;
    }

    public void presentData(User user){
        ((TextView)mActivity.findViewById(R.id.username))
            .setText(user.getName());
        //...
        //...
    }
} 
```

我能够进行注射，但所有领域`Activity`都**`null`在注射时**。

这是我进行注射的方式：

My`Activity`本身就是一个模块。

```
@Module(
    complete = false
)
class MainActivity extends Activity{

    @Override
    public void onCreate(Bundle bundle){
        super.onCreate(bundle);
        setContentView(R.layout.main_activity);
        ObjectGraph objectGraph = CustomApplication.getObjectGraph();
        PresentationLayer pres = objectGraph.get(PresentationLayer.class);
    }

    @Provides Activity provideActivity(){
        return this;
    }

} 
```

这是我的主要模块

```
@Module(
    entryPoints = PresentationLayer.class,
    includes = MainActivity.class
)
class DaggerModule{
    @Provides PresentationLayer providePresentation(Activity activity){
        return new PresentationLayer(activity);
    }
} 
```

还有我`Application`的引导对象图的类。

```
class CustomApplication extends Application{

    private static ObjectGraph sObjectGraph;
    @Override
    public void onCreate(){
        sObjectGraph = ObjectGraph.create(new DaggerModule());
    }

    static getObjectGraph(){
        return sObjectGraph;
    }
} 
```

我正在寻找一种**在调用`setContentView`**.

我该怎么做呢？

* * *

### 编辑1：

我让它像这样工作 - 但是我不确定这是否是“正确的方式”。我所做的是

1.  将 Activity 传递给`Module`构造函数
2.  确保我在完成之后构建，以便`ObjectGraph` *将*`setContentView()`正确的`Activity`实例传递给`ObjectGraph`.

我`Activity`的不再是匕首`Module`。

这在代码中转换为以下内容：

```
@Module(
    entryPoints = PresentationLayer.class
)
class DaggerModule{

    private Activity mActivity;

    public DaggerModule (Activity activity){
        this.mActivity = activity;
    }

    @Provides PresentationLayer providePresentation(){
        return new PresentationLayer(mActivity);
    }
} 
```

这就是我的`Activity`样子：

```
class MainActivity extends Activity{

    @Override
    public void onCreate(Bundle bundle){
        super.onCreate(bundle);
        setContentView(R.layout.main_activity);
        ObjectGraph objectGraph = CustomApplication.getObjectGraph(this);
        PresentationLayer pres = objectGraph.get(PresentationLayer.class);
        User user = //get the user here
        pres.presentData(user);
    }
} 
```

这个解决方案似乎解决了 Jesse Wilson 在[这个答案](https://stackoverflow.com/a/13992119/570930)中提出的观点。但是，我担心性能，因为**每次****创建**`ObjectGraph`时都会构建。**`Activity`**

有什么想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-21T14:42:12.803

不幸的是，这可能不适用于 Dagger 或大多数其他依赖注入框架。问题是 的生命`Activity`周期与`PresentationLayer`. 例如，当您旋转屏幕时，Android 将销毁该活动并在其位置创建另一个活动。没有`PresentationLayer`参与其中的钩子。

在 Square，我们一直在使用[Otto](http://square.github.com/otto/)在活动及其后端之间进行通信，并且效果很好。有关示例，请参阅 Eric Burke 的[示例代码项目](https://github.com/eburke/presentations/blob/master/strange_loop_2012/samplecode/src/com/squareup/anatomy/AccountActivity.java)。

# java - 两个android项目共享同一个proguard进程

> ID：13986095
> 
> 赞同：0
> 
> 时间：2012-12-21T07:36:27.643
> 
> 标签：java, android, proguard

我正在开发两个android项目A和B，它们都依赖于第三个lib-project C。当我用proguard编译A时，A将与C一起保护。当我编译B时，B也将与C一起保护. 问题来了。由于 proguard 优化，lib C 在应用 A 和应用 B 在 proguard 过程之后完全不同。我的问题是，在 A 和 B 的 proguard 进程之后，如何使 lib C 相同？

1.  Lib C 必须被保护。所以保持选项无济于事。
2.  A 和 B 必须优化。

# c# - Windows 手机：如何从 Outlook 中的任务中检索数据？

> ID：13986096
> 
> 赞同：0
> 
> 时间：2012-12-21T07:36:29.360
> 
> 标签：c#, windows-phone-7, outlook, windows-phone-8

我想从 Outlook 中的任务中检索数据，包括 windows phone 8 中的字段优先级、重要和截止日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:48:14.730

wp8 中没有此类任务可用于从 Outlook 中检索所有此类特定信息。请使用此链接了解有关可用启动器和选择器的基本信息。

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394029(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394029(v=vs.105).aspx)

# java - 将 CalendarEvent 插入“主要”以外的其他日历

> ID：13986099
> 
> 赞同：2
> 
> 时间：2012-12-21T07:36:46.457
> 
> 标签：java, google-api, google-calendar-api

如何将 CalendarEvent 插入到由其 Id 给出的特定日历中？

在我的应用程序中，我正在扫描所有日历并将它们添加到 ArrayList 中，如下所示：

```
for (CalendarListEntry calendarEntry : this.calendars.getItems()) {
      this.calendarIDs.add(calendarEntry.getId());
} 
```

我发现的唯一代码片段是：

```
Event createdEvent = service.events().insert("primary", event).execute(); 
```

我试图把提要 url 而不是*"private"*，比如

```
http://www.google.com/calendar/feeds/<id_here>%40group.calendar.google.com/private/full 
```

但后来我得到了一个

```
com.google.api.client.googleapis.json.GoogleJsonResponseException: 404 Not Found
{
  "code" : 404,
  "errors" : [ {
    "domain" : "global",
    "message" : "Not Found",
    "reason" : "notFound"
  }],
  "message" : "Not Found"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T13:40:51.883

试试这些代码片段：

片段1：

```
public void authenticate(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {

    List <String> scopes = new LinkedList<String>();
    scopes.add(scope);
    AuthorizationCodeRequestUrl authorize = new GoogleAuthorizationCodeRequestUrl(client_id, redirect_uri, scopes);
    authorize.setRedirectUri(redirect_uri);
    String authorize_url              = authorize.build();
    log.info(authorize_url);
    response.sendRedirect(authorize_url);
} 
```

片段一负责 OAuth 并将程序重定向到重定向 uri。变量 scope、client_id、cliend_secret 和 scope 的值来自 Google api 控制台。

片段 2：

```
public void importCalendarList(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
    String code = request.getParameter("code");
    HttpTransport transport = new NetHttpTransport();
    JsonFactory jsonFactory = new JacksonFactory();

    GoogleTokenResponse res = new GoogleAuthorizationCodeTokenRequest(transport, jsonFactory, client_id, client_secret, code, redirect_uri).execute();
    ]String accessToken = res.getAccessToken();
    Calendar.Builder builder = new Calendar.Builder(transport, jsonFactory, null);  
    builder.setCalendarRequestInitializer(new CalendarRequestInitializer(accessToken));
    Calendar calendarService = builder.build();
    Calendar.CalendarList.List list = calendarService.calendarList().list();
    list.setOauthToken(accessToken);
    List <CalendarListEntry>list1=list.execute().getItems();
    String id = list1.get(0).getId();
    p.write(id);

    for(CalendarListEntry temp:list1) {
        p.println(temp.getSummary());
        temp.getId();
    }

    Event e = new Event();

    e.setSummary("Test event");
    e.setLocation("Adaptavant");

    Date startDate = new Date();
    Date endDate = new Date(startDate.getTime() + 3600000);
    DateTime start = new DateTime(startDate, TimeZone.getTimeZone("UTC"));
    e.setStart(new EventDateTime().setDateTime(start));
    DateTime end = new DateTime(endDate, TimeZone.getTimeZone("UTC"));
    e.setEnd(new EventDateTime().setDateTime(end));
    Event insertedEvent = calendarService.events().insert(id, e).setOauthToken(accessToken).execute();

    p.println(insertedEvent.getId()); 
```

}

片段二获取日历列表并获取其中一个的 id 并在该日历中创建一个事件。如果要将事件添加到主日历，则主日历的 id 是用于登录的 gmail id。

更多文档可在此处找到：

[https://google-api-client-libraries.appspot.com/documentation/calendar/v3/java/latest/index.html](https://google-api-client-libraries.appspot.com/documentation/calendar/v3/java/latest/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T22:03:10.543

当用户是 google 用户但他没有连接到 google plus 时，通常会发生这种情况。

它也应该在这个调用中爆炸：service.people().get("me").execute();

# javascript - IE9 Highcharts 中显示的阴影

> ID：13986101
> 
> 赞同：0
> 
> 时间：2012-12-21T07:37:03.807
> 
> 标签：javascript

如何去除highchart中的绘图点阴影。在ie8和ie中没有问题，但在ie9中显示阴影。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:20:24.867

尝试添加`stacking:"normal"`如下：

```
plotOptions: {
series:{ stacking:"normal", shadow: false, 
fillColor:{ linearGradient: [0, 0 0 30],
stops: [ [0, 'rgb(212, 233, 252)'], [1,rgba(2,0,0,0)] ];
} 
```

# methods - 未定义的方法 `options=' for true:TrueClass

> ID：13986104
> 
> 赞同：2
> 
> 时间：2012-12-21T07:37:16.350
> 
> 标签：methods, undefined, options, nomethoderror

我在 custom.css.scss 文件的 {} 部分输入了一个错字并保存了。然后将其改回原来的样子并再次保存。

然后，当我刷新浏览器时，我收到错误消息标题“NoMethodError in Static_pages#home”

它给出的下一个细节是：

显示 /Users/luthermoore/Documents/rails_projects/nest/app/views/layouts/application.html.erb 其中第 5 行提出：

未定义的方法 `options=' for true:TrueClass (在 /Users/luthermoore/Documents/rails_projects/nest/app/assets/stylesheets/custom.css.scss)

提取的源代码（第 5 行附近） ***“stylesheet_link_tag”行如下所列。

`<html>` `<head>`
`<title>NesT</title>`
`<%= stylesheet_link_tag "application", :media => "all" %>`
`<%= javascript_include_tag "application" %>`
`<%= csrf_meta_tags %>`
`</head>`

*** *当我从 application.html.erb 文件中完全取出上面的整个“stylesheet_link_tag”行并刷新它时，它看起来就像普通的 html，但如果我把它放回去，它会再次给我同样的错误消息。我查看了另一个使用 EXACT SAME applications.html.erb 头的示例项目，它工作正常。我试过删除、保存、重写、保存。而且我还尝试删除，从确实有效的 application.html.erb 文件中复制并再次保存，并且错误消息不会消失。

我正在运行所有新的东西，几周前刚刚安装...... Rails 3.2.8 Ruby 1.9.3 Bootstrap-sass 2.2.1.1

请帮忙。如果你不能从我的解释中看出，我在编码方面是很绿色的。我试图尽可能详细，但如果您需要我提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T21:37:56.327

尝试删除应用程序的 /tmp/cache 文件夹中的内容

# bash - 为什么 sed 命令可以直接工作，而我在脚本文件中编写时不能工作？

> ID：13986116
> 
> 赞同：0
> 
> 时间：2012-12-21T07:38:14.867
> 
> 标签：bash, shell, sed, command, sh

这是我的上下文：我有一个名为 profile

```
# file: profile

MY_PATH = "/home/deng/default"
MY_NAME = "deng" 
```

我的测试文件：

```
#!/bin/sh
#file: test.sh
DJ_PATH="/deng/jian/doc"

OUTPUT_PATH="\"${DJ_PATH}/output\""
echo "OUTPUT_PATH = ${OUTPUT_PATH}"

DOC_KEY="MY_PATH"
DOC_VALUE=${OUTPUT_PATH}
echo "DOC_VALUE = ${DOC_VALUE}"

echo "sed 's:[ \t]*${DOC_KEY}[ \t]*=.*:${DOC_KEY} = ${DOC_VALUE}:' profile"
sed 's:[ \t]*${DOC_KEY}[ \t]*=.*:${DOC_KEY} = ${DOC_VALUE}:' profile 
```

在终端我跑

```
$ ./test.sh 
```

输出是

```
1  OUTPUT_PATH = "/deng/jian/doc/output"
2  DOC_VALUE = "/deng/jian/doc/output"
3  sed 's:[ \t]*MY_PATH[ \t]*=.*:MY_PATH = "/deng/jian/doc/output":' profile
4   MY_PATH = "/home/deng/default"
5   MY_NAME = "deng" 
```

它看起来配置文件中的文本没有被我想要设置的 DOC_VALUE ("/deng/jian/doc/output") 替换。但我在输出行 3 中运行了该命令。它有效：

```
sed 's:[ \t]*MY_PATH[ \t]*=.*:MY_PATH = "/deng/jian/doc/output":' profile 
```

输出：

```
MY_PATH = "/deng/jian/doc/output"
MY_NAME = "deng" 
```

所以发生了什么事？我在 test.sh 中写的命令有什么不同

```
sed 's:[ \t]*${DOC_KEY}[ \t]*=.*:${DOC_KEY} = ${DOC_VALUE}:' profile 
```

和我直接输入的命令？

```
sed 's:[ \t]*MY_PATH[ \t]*=.*:MY_PATH = "/deng/jian/doc/output":' profile 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T07:52:23.413

在您使用的文件`'`中，不要让 bash 解释变量。

改成`"`

```
sed "s:[ \t]*${DOC_KEY}[ \t]*=.*:${DOC_KEY} = ${DOC_VALUE}:" profile 
```

或使用多个中断`'`

```
sed 's:[ \t]*'${DOC_KEY}'[ \t]*=.*:'${DOC_KEY}' = '${DOC_VALUE}':' profile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T07:53:16.160

看这个例子：

```
#!/bin/sh

S=foo
D=bar

echo 'foo' | sed 's/${S}/${D}/g'       # echoes foo
echo 'foo' | sed 's/'${S}'/'${D}'/g'   # echoes bar 
```

# postgresql - 函数中的连接

> ID：13986119
> 
> 赞同：-2
> 
> 时间：2012-12-21T07:38:36.790
> 
> 标签：postgresql, aggregate-functions, plpgsql

有人可以向我解释这段代码的含义以及它是如何工作的吗？例如我有一张桌子，学生：

```
gname   lname
-------------
vi23    kola
vi34    red 
```

这个串联函数代码是如何与表格相关的？

```
CREATE FUNCTION concat (text, text) RETURNS text AS $$
DECLARE
t text;
BEGIN
IF character_length($1) &gt; 0 THEN
t = $1 ||', '|| $2;
ELSE
t = $2;
END IF;
RETURN t;
END;
$$ LANGUAGE plpgsql;

CREATE AGGREGATE pegar (
sfunc = concat,
basetype = text,
stype = text,
initcond = ''
); 
```

`$1`和分别是`$2`gname和lname的参数还是它们等于聚合函数pegar中的basetype和stype？这段代码发生了什么？

```
IF character_length($1) &gt; 0 THEN
    t = $1 ||', '|| $2;
    ELSE
    t = $2; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T07:41:44.540

我认为它将列结合到`comma separated values`. 所以它会返回`**vi23,kola**`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:59:13.877

它需要两个参数并检查第一个参数长度是否大于 0，因为如果长度为 0 或小于 0，则表示根本没有参数。如果为真，则将两个参数与它们之间的逗号连接起来（与 || 运算符连接）否则它将第二个参数存储为文本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T14:59:48.683

使用`sfunc`“状态”参数和下一个输入（状态参数的类型是`stype`设置）作为第一个和第二个（或更多...）参数（$1 和 $2）调用聚合的 。

因此，这定义了一个聚合，其中聚合新值的状态转换是将其附加到现有状态（如果已定义）。

这些映射到列的方式取决于您如何调用聚合，而您没有显示。但是，如果您这样做了，`select pegar(lname) from t`那么它将如下所示：

```
state= next=kola : output=kola
state=kola next=red : output=kola, red 
```

没有`finalfunc`定义，聚合的输出是最后一个状态：`kola, red`

聚合函数说明：[http ://www.postgresql.org/docs/current/static/sql-createaggregate.html](http://www.postgresql.org/docs/current/static/sql-createaggregate.html)

# jquery - jquery-ui-map 设置地理位置缩放级别

> ID：13986128
> 
> 赞同：-1
> 
> 时间：2012-12-21T07:39:32.213
> 
> 标签：jquery, google-maps-api-3

我正在使用 jquery-ui-map 并且需要在用户位置上设置缩放级别。目前它定位用户，然后完全放大，但我希望它进一步缩小。我缺乏 javascript 技能，我已经搜索了答案并尝试了很多东西，但似乎没有任何效果。这是代码...

```
jQuery('#map_canvas').gmap({'center': '-23.7002104, 133.8806114','zoom': 3 }).bind('init', function() { 
    jQuery('#map_canvas').gmap('getCurrentPosition', function(position, status) {
    if ( status === 'OK' ) {
    var clientPosition = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
        jQuery.getJSON( 'http://publicaccessgolf.com.au/mapdata/', function(data) { 
            jQuery.each( data.course, function(i, course) {
                jQuery('#map_canvas').gmap('addMarker', { 
                    'position': new google.maps.LatLng(course.latitude, course.longitude),      
                }).click(function() {
                    jQuery('#map_canvas').gmap('openInfoWindow', { 'content': '<div align="left"><p style="color:#000000;"><a href="http://publicaccessgolf.com.au/' + course.slug + '" >' + course.name + '</a><br />' + course.address + '<br />' + course.contact + '</p></div>' }, this);
                });
            });
        });
        jQuery('#map_canvas').gmap('addMarker', {'position': clientPosition, 'zoom': 3});

    }
    });     
}); 
```

好的，我解决了，正确的代码如下。使用 maxZoom 而不是缩放

```
jQuery('#map_canvas').gmap({'center': '-23.7002104, 133.8806114','maxZoom': 11}).bind('init', function() { 
    jQuery('#map_canvas').gmap('getCurrentPosition', function(position, status) {
    if ( status === 'OK' ) {
    var clientPosition = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
        jQuery.getJSON( 'http://publicaccessgolf.com.au/mapdata/', function(data) { 
            jQuery.each( data.course, function(i, course) {
                jQuery('#map_canvas').gmap('addMarker', { 
                    'position': new google.maps.LatLng(course.latitude, course.longitude),      
                }).click(function() {
                    jQuery('#map_canvas').gmap('openInfoWindow', { 'content': '<div align="left"><p style="color:#000000;"><a href="http://publicaccessgolf.com.au/' + course.slug + '" >' + course.name + '</a><br />' + course.address + '<br />' + course.contact + '</p></div>' }, this);
                });
            });
        });
        jQuery('#map_canvas').gmap('addMarker', {'position': clientPosition, 'bounds':true});

    }
    });     
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:02:57.720

一旦我遇到这样的问题，我就阅读了 api 文档并找到了一种方法，这对我有用，你可以替换这一行：

```
jQuery('#map_canvas').gmap('addMarker', {'position': clientPosition, 'zoom': 3}); 
```

有了这个：

```
 jQuery('#map_canvas').gmap('addMarker', {'position': clientPosition});
 jQuery('#map_canvas').gmap('option','zoom',3);
 jQuery('#map_canvas').gmap('option','center',new google.maps.LatLng(position.coords.latitude, position.coords.longitude)); 
```

试试这个，看看这是否对你有帮助。

# iphone - iOS-UImageView 缩放动画不起作用

> ID：13986130
> 
> 赞同：0
> 
> 时间：2012-12-21T07:39:43.233
> 
> 标签：iphone, objective-c, ios, imageview

我想创建一个动画，imageView 会变得越来越小和透明，然后消失。我尝试了下面的代码，它不起作用，运行时它会从 0.01 大小增长到原始大小。我无法弄清楚问题出在哪里。

非常感谢你！

```
[UIView animationWithDuration:2 animations:^{
[imageview setTransform:(CGAffineTransformMakeScale(0.01,0.01))];
[imageview setAlpha:0];
}
completion:^(BOOL finished){
[imageview removeFromSuperview];
}]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:06:31.553

试试这个代码：

```
[UIView animationWithDuration:2 animations:^{
CGAffineTransform *transform =  CGAffineTransformScale(imageView.transform, 0.01, 0.01);
[imageview setTransform:transform];
[imageview setAlpha:0];
}
completion:^(BOOL finished){
[imageview removeFromSuperview];
}]; 
```

这将考虑现有的 imageView 转换。（您是否有可能已经对这个 imageView 应用了转换？）

您可以尝试的另一件事是添加：`UIViewAnimationOptionBeginFromCurrentState` 作为动画方法的选项。您将不得不使用：

```
+ (void)animateWithDuration:(NSTimeInterval)duration delay:(NSTimeInterval)delay options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^)(BOOL finished))completion{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:31:55.680

实际上，您的方法名称似乎不正确。正确的方法是**animateWithDuration**

```
[UIView animateWithDuration:2 animations:^{ 
```

# javascript - 如何将数字划分为每个数字（示例） 11 = xy, x=1, y1

> ID：13986131
> 
> 赞同：-2
> 
> 时间：2012-12-21T07:39:44.060
> 
> 标签：javascript, jquery, numbers

我有以下对象

```
var obj = { b0: 11, b1: 12
            b3: 21, b4: 22 } 
```

我需要单独的数字，并在第一个数字`x`和第二个数字时为每个数字提供看起来像坐标（以供将来操作） `y`。和 mb 什么时候`(x1==x2 && y2-y1==1) =`做一些事情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:51:37.590

我会这样做：

```
var obj = { 'b0': 11, 'b1': 12, 'b3': 21, 'b4': 22 },
    matrixData = {}; 

for (var key in obj) {
    var sNum = obj[key].toString(),
        output = {'x': sNum.charAt(0),'y': sNum.charAt(1) };
    matrixData[key] = output;
}

console.log(matrixData); 
```

您会收到一个带有 x 和 y 坐标的嵌套对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T07:52:42.137

您可以调用 SStrings 原型方法`split`并再次返回一个数字数组，就像这样

```
function splitNumber (n) {
    var arr = String.prototype.split.call(n,"");
    var narr = [];
    for (var i=0,ilen = arr.length;i<ilen;i++)
        narr[i] = Number(arr[i])
    return narr
}
var x = 11
splitNumber(x) // [1,1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T07:50:58.187

如果数字只有两位数，你可以这样做：

```
function somesome() {
    var obj = { b0: 11, b1: 12, b3: 21, b4: 22 }
    var current = obj.b1
        console.log(current.toString().substring(0,1)); //first number
        console.log(current.toString().substring(1,2)); //second number
} 
```

# python - 首先取字符串的一些字符，但如果特定字符会出现，也要考虑该字符

> ID：13986132
> 
> 赞同：-5
> 
> 时间：2012-12-21T07:39:56.137
> 
> 标签：python, regex

首先，如果 [0-9]* 将出现在 23 个字符之前，我想从字符串中取出 23 个字符，然后将 [0-9]* 作为整个单词包含在内。假设我有一个字符串：

```
x = I have a car with tha id 6356

I have tried with x[:23] 
```

但它用于取前 23 个字符。这将在以下情况下失败：

```
x = I have a car with id [0-9]*[\s]
x1 = color id [0-9]* with [0-9]*[\s]
x2 = id [0-9]*[\s] with [0-9]*[\s] has index no:[0-9]*[\s]
x3 = id[\s] with[\s] model[\s] has index no[\s][0-9]*

output of x:  I have a car with id [0
output of x1: color id [0-9]* with [0
output of x2: id [0-9]* with [0-
output of x3: id[\s] with[\s] model[\ 
```

预期输出：

```
x: I have a car with id [0-9]*[\s]
x1: color id [0-9]* with [0-9]*[\s]
x2: color id [0-9]* with [0-9]*[\s]
x3: id[\s] with[\s] model[\s] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:47:29.680

看看那个子字符串是否在那里。如果是，则`position`向上移动，直到超过该子字符串：

```
x = 'color id [0-9]* with [0-9]*[\s]'
substring = '[0-9]*'
position = 23

length = len(substring)
index = x.find(substring, position - length)

if position - length < index < position + length - 1:
    position = index + length

print x[:position] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:56:28.177

这个正则表达式似乎可以解决问题：

```
^.{23}\d* 
```

这导致：

> '*这长长的绳子被砍断了。*' 结果是 '*这个长字符串是 cho* '。
> '*我的电话号码是 061234567891 很酷。*' 结果是 '*我的电话号码是 061234567891* '。

阅读第一组比赛，你就会得到你的字符串。

```
m = re.match(r"^.{23}\d*", x)
result = m.group(0) 
```

# java - Bean 名称的 BindingResult 和普通目标对象都不能用作请求属性 - Spring MVC

> ID：13986136
> 
> 赞同：6
> 
> 时间：2012-12-21T07:40:04.683
> 
> 标签：java, spring, binding

我收到此错误

```
java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'command' available as request attribute 
```

这是堆栈跟踪

> org.apache.jasper.JasperException: java.lang.IllegalStateException: Bean 名称“command”的 BindingResult 和普通目标对象都不能作为请求属性 org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:534) org. apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:452) org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389) org.apache.jasper.servlet.JspServlet.service(JspServlet.java: 333) javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 根本原因 java.lang.IllegalStateException: Bean 名称“command”的 BindingResult 和普通目标对象都不能用作请求属性 org.springframework.web.servlet。 support.BindStatus.(BindStatus.java:141) org.springframework.web.servlet.tags.form。AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:178) org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:198) org.springframework.web.servlet.tags.form.LabelTag.autogenerateFor(LabelTag. java:129) org.springframework.web.servlet.tags.form.LabelTag.resolveFor(LabelTag.java:119) org.springframework.web.servlet.tags.form.LabelTag.writeTagContent(LabelTag.java:89) org. springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102) org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79) org.apache.jsp.student_jsp._jspx_meth_form_005flabel_005f0( student_jsp.java:182) org.apache.jsp.student_jsp。_jspx_meth_form_005fform_005f0(student_jsp.java:117) org.apache.jsp.student_jsp._jspService(student_jsp.java:79) org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) javax.servlet.http.HttpServlet。服务（HttpServlet.java:722）org.apache.jasper.servlet.JspServletWrapper.service（JspServletWrapper.java:419）org.apache.jasper.servlet.JspServlet.serviceJspFile（JspServlet.java:389）org.apache.jasper。 servlet.JspServlet.service(JspServlet.java:333) javax.servlet.http.HttpServlet.service(HttpServlet.java:722)jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333) javax.servlet.http.HttpServlet.service(HttpServlet.java:722)jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333) javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

这是我的 web.xml 文件

 `````
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"

    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

    <display-name>Spring MVC Form Handling</display-name>
    <welcome-file-list>
    <welcome-file>student.jsp</welcome-file>
  </welcome-file-list>

  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

    <servlet>
        <servlet-name>HelloWeb</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/HelloWeb-Servlet.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>   

    <servlet-mapping>
        <servlet-name>HelloWeb</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
````  `这是我的 applicationContext.xml 文件

 `````
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:mvc="http://www.springframework.org/schema/mvc"

   xsi:schemaLocation="
   http://www.springframework.org/schema/beans     
   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/context 
   http://www.springframework.org/schema/context/spring-context-3.0.xsd
   http://www.springframework.org/schema/mvc
   http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

   <context:component-scan base-package="com.Prime" />
<mvc:annotation-driven/>
   <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
      <property name="prefix" value="/WEB-INF/JSP/" />
      <property name="suffix" value=".jsp" />
   </bean>

</beans> 
````  `这是我的 student.jsp 文件

 `````
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<html>
<head>
    <title>Spring MVC Form Handling</title>
</head>
<body>

<h2>Student Information</h2>
<form:form modelAttribute="SpringWeb" method="POST" action="/HelloWeb/addStudent" commandName="SpringWeb">
   <table>
    <tr>
        <td><form:label path="name">Name</form:label></td>
        <td><form:input path="name" /></td>
    </tr>
    <tr>
        <td><form:label path="age">Age</form:label></td>
        <td><form:input path="age" /></td>
    </tr>
    <tr>
        <td><form:label path="id">id</form:label></td>
        <td><form:input path="id" /></td>
    </tr>
    <tr>
        <td colspan="2">
            <input type="submit" value="Submit"/>
        </td>
    </tr>
</table>  
</form:form>
</body>
</html> 
````  `这是我的 StudentController.java 文件

 `````
package com.Prime;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.ui.ModelMap;

@Controller
public class StudentController {

   @RequestMapping(value = "/student", method = RequestMethod.GET)
   public ModelAndView student() {
      return new ModelAndView("/student.jsp", "SpringWeb", new Student());
   }

   @RequestMapping(value = "/addStudent", method = RequestMethod.POST)
   public String addStudent(@ModelAttribute("SpringWeb")Student student, 
   ModelMap model) {
      model.addAttribute("name", student.getName());
      model.addAttribute("age", student.getAge());
      model.addAttribute("id", student.getId());

      return "result";
   }
} 
````  `谁能帮我解决这个错误....提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:40:14.613

编辑：

我兄弟你的例外状态是“bean name **'command'** ”。我认为您有一些开发问题，因为您在此处发布的代码与异常不匹配。

* * *

`commandName`从您的表单标签中删除该属性，该`modelAttribute`属性就足够了：

```
<form:form modelAttribute="SpringWeb" method="POST" action="/HelloWeb/addStudent" > 
```

阅读这篇[文章](http://chompingatbits.com/2009/08/25/spring-formtag-commandname-vs-modelattribute/)后，这似乎不是您问题的解决方案，但无论如何您不需要指定它们两次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T09:52:29.193

我尝试了您的配置，但没有收到您的错误。但我不得不改变一些东西。

viewResolver 正在将 .jsp 添加到您的视图名称中。所以恕我直言，你应该改变

```
 return new ModelAndView("/student.jsp", "SpringWeb", new Student()); 
```

到

```
 return new ModelAndView("student", "SpringWeb", new Student()); 
```

所以删除 jsp 和 student 之前的“/”。

然后它对我有用。但正如我所说，我没有得到你的错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T01:20:45.527

调用`/student`正在寻找的 jsp 位置是

```
/WEB-INF/JSP//student.jsp.jsp 
```

更改配置以匹配正确的 url。````````

# php - 如何在codeigniter中创建通用连接函数以进行列表

> ID：13986153
> 
> 赞同：1
> 
> 时间：2012-12-21T07:41:28.613
> 
> 标签：php, codeigniter, activerecord, join

我在codeigniter中有一个用于列出的连接函数，但它只连接两个表，对于三个表我必须使用另一个函数等等有什么方法可以使这些函数对于任何数量的连接都通用 **模型代码**

```
public function __construct()
{
    $this->load->database();
}

//listing with join for two tabels
public function get_joinlist($table,$value,$table2,$condi,$join_type,$order_by,$order,$where,$limit, $offset)
{
        $this->db->select($value);
            $this->db->join($table2,$condi,$join_type);
    $this->db->order_by($order_by,$order);
    $this->db->where($where);
    return $query= $this->db->get($table, $limit, $offset);
}
//listing with join for three tabels
public function get_joinlist1($table,$value,$table2,$condi1,$join_type1,$table3,$condi2,$join_type2,$where,$order_by,$order)
{
    $this->db->select($value);
    $this->db->join($table2, $condi1,$join_type1);
    $this->db->join($table3, $condi2,$join_type2);
    $this->db->where($where);
    $this->db->order_by($order_by,$order);
    return $this->db->get($table);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:54:29.190

这是一个非常简单的示例，可以帮助您入门

构造`$joins`为数组：

```
$joins = array(
    array(
        'table' => 'table2',
        'condition' => 'table2.id = table1.id',
        'jointype' => 'LEFT'
    ),
); 
```

将连接作为数组处理的示例函数：

```
public function get_joins($table, $columns, $joins)
{
    $this->db->select($columns)->from($table);
    if (is_array($joins) && count($joins) > 0)
    {
        foreach($joins as $k => $v)
        {
            $this->db->join($v['table'], $v['condition'], $v['jointype']);
        }
    }
    return $this->db->get()->result_array();
} 
```

# android - adb连接两部智能手机时得到两个相同的序列号

> ID：13986155
> 
> 赞同：20
> 
> 时间：2012-12-21T07:41:36.500
> 
> 标签：android, adb

我有两部智能手机（**ZTEV788d**，系统**Android 2.3.6**）同时连接到计算机（**Ubuntu 11.10**），使用命令：`adb devices`我得到了这个：

```
List of devices attached
P753A12D    device
P753A12D    device 
```

序列号是一样的！

我在电脑端写了一个应用程序来和这两部手机通信，例如安装应用程序和推送文件。

我使用了这些命令：

```
adb -s P753A12D install XXX.apk
adb -s P753A12D push XXX /sdcard 
```

现在这两部手机有相同的序列号（`P753A12D`），当我运行这些命令时，我得到这个错误：

```
error:more than one device 
```

所以，我的问题是：

1.  两部手机序列号一样正常吗？
2.  我可以更改序列号吗？如果是，如何？
3.  即使序列号相同，是否有任何方法可以成功运行这些安装、推送命令？

顺便说一句，当我运行测试时，WiFi/3G 网络将被关闭。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-04-30T11:37:10.603

今天我为这个问题找到了一个简单的解决方案。

```
adb devices -l 
```

您将获得带有限定符的设备列表

```
List of devices attached
P753A12D device usb:26200000 transport_id:1
P753A12D device usb:24400000 transport_id:2 
```

然后你可以使用限定符而不是这样的序列号

```
adb -s usb:26200000 install xxx.apk 
```

或与`transport_id`和`-t`

```
adb -t 1 install xxx.apk 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-01-15T14:14:57.470

**如果您的设备已植根，请** 尝试以这种方式
更改设备的序列号，首先将其中一个连接到您的电脑，然后在 cmd 中键入

```
adb devices 
```

这会显示您的设备 ID（序列号）。

```
List of devices attached
P753A12D    device 
```

选择一些新名称，例如**NAME1**
然后键入此命令

```
adb shell
su 
device_name="NEW_NAME"
cd /sys/class/android_usb/android0/
echo -n $device_name > iSerial
cat iSerial 
```

`exit`从 root
`exit`退出 从 shell 退出

 **现在**开始****拔下 USB 电缆**并运行此命令**

 **```
adb kill-server 
```

再次连接您的设备并输入

```
adb devices 
```

现在你可以看到变化

```
List of devices attached
New_NAME    device 
```

**结束**

**注意：如果第一次没有工作**，请断开您的手机并再次从**开始**到**结束**
执行我的指南的这一部分。

 ***** * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-04-02T22:24:19.613

我遇到了同样的问题。这是因为 adb 工具使用序列号来识别连接到 USB 的设备，而不是设备路径（肯定是唯一的）。

如果您想动手，请下载 Android 源代码树，转到`system/core/adb/transport.c`，将其更改为以下内容：

```
void register_usb_transport(usb_handle *usb, const char *serial, const char *devpath, unsigned writeable)
{
    atransport *t = calloc(1, sizeof(atransport));
    D("transport: %p init'ing for usb_handle %p (sn='%s')\n", t, usb,
      serial ? serial : "");
    init_usb_transport(t, usb, (writeable ? CS_OFFLINE : CS_NOPERM));
//    if(serial) {
//        t->serial = strdup(serial);
//    }
    if(devpath) {
        t->devpath = strdup(devpath);
        t->serial = strdup(devpath);
    } 
```

`make adb`从顶层路径输入，瞧。设备使用 USB 路径进行识别。现在您可以一键安装和执行 Eclipse 中的所有设备。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-21T22:23:33.487

## 1\. 两部手机序列号相同是否正常？

序列号的目的是唯一标识设备，所以它们应该是不同的。话虽如此，一些制造商并不打扰。固件也可能错误地报告了数字。

[https://stackoverflow.com/questions/4636794/strange-output-of-adb-devices?rq=1](https://stackoverflow.com/questions/4636794/strange-output-of-adb-devices?rq=1)

您可以检查实际设备上的序列号，看看它是否与`adb`报告的内容相符。

```
Settings > About Device > Phone Identity > Device Serial Number 
```

* * *

## 2.我可以更改序列号吗？如果是，如何？

据我所知，没有一种简单或一致的方法可以做到这一点。以下是其他人已经完成这一壮举的一些例子（但我没有）：

[xda-developers.com - 更改任何 mtk android 手机的 Wifi、BT、IMEI、序列号](http://forum.xda-developers.com/crossdevice-dev/android-one-general/change-wifi-bt-imei-serial-mtk-android-t3058850)

[hugestreet.info - 如何更改 IMEI、任何 Android 设备的设备 ID](http://forum.xda-developers.com/crossdevice-dev/android-one-general/change-wifi-bt-imei-serial-mtk-android-t3058850)

* * *

## 3\. 有没有什么方法可以运行这些安装、推送命令，即使序列号相同？

如果一次只连接一个设备，运行命令应该没有任何问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-06T01:10:18.173

@mirokropacek 给出的答案适用于 Linux（可能也适用于 Mac），但不幸的是不适用于 Windows。这是由于`register_usb_transport`在 Windows 中调用该函数的方式。事实证明 devpath 参数总是`NULL`在 Windows 中。我需要处理相同的情况，因此我调整了上面给出的解决方案，如果`serial`参数为 NULL 或为空（零长度），则为每个设备随机生成一个设备 ID。

我不需要担心长时间区分设备和许多设备，因此为设备 ID 生成一个伪随机数`rand`，然后使用`sprintf`创建该 ID 的字符串表示似乎足以满足我的需要，但 YMMV . 它只生成一个 4 位十六进制数字，但对我来说效果很好（至少现在是这样）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-21T15:26:57.237

如果您不想更改设备本身，和/或没有 root 访问权限，并且设备具有网络访问权限，则可以切换到使用 TCPIP 而不是 USB：

1.  将 adb 切换为使用 TCPIP：`adb tcpip 5555`
2.  让 adb 使用网络连接到设备：`adb connect yourhostname`

我已经通过 SSH 隧道运行它，它将连接到本地主机，所以所有设备都显示为“本地主机”，这是非常没用的。将主机添加到 /etc/hosts（都指向 localhost）为我解决了这个问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-27T06:03:12.750

此外，您可以在处理附加的多个实例时使用以下命令（设备 + 模拟器）

```
adb -d shell #(or adb -e shell if you're connecting to an emulator). 
```

`-d`代表设备和`-e`代表模拟器******

# drupal-7 - 如何修改令牌的值？

> ID：13986168
> 
> 赞同：1
> 
> 时间：2012-12-21T07:42:36.380
> 
> 标签：drupal-7, drupal-webform

如何修改令牌的值？（有关更多信息，请参见下文。）

```
function hook_webform_submission_insert($node, $submission) {
  // Total_points is a hidden input tag in a web form and initially set as 0.
  // Total points will be calculated here, and assigned to total_points.
  // $total_points = token_replace('[submission:values:total_points]', array("webform-submission" => $submission));

  // How do I modify a token value? e.g.
  $the_token = &drupal_get_token($name_of_token = '[submission:values:total_points]');
  $the_token = "100" // Assign 100 points.
} 
```

* * *

*   在了解了代码流程后，我解决了这个问题。
*   我尝试做的是替换 webform 中的隐藏变量，然后使用它 webform2pdf。
*   如果您在 webform2pdf 的管理设置中有一些文本。例如 [提交：值：total_points]
*   做 $replacements['[submission:values:total_points]'] = my_value;
*   webform2pdf 将在生成的 pdf 中查看并插入 [submission:values:total_points] 的值（即 my_value）。
*   我意识到我可以在论坛和谷歌互联网上提问。归根结底，我仍然需要深入研究代码并理解它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T10:05:37.507

首先，[drupal_get_token()](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_get_token/7)用于生成防止跨站点请求伪造的值。它通常在创建链接时使用，例如， [overlay_disable_message()](http://api.drupal.org/api/drupal/modules!overlay!overlay.module/function/overlay_disable_message/7)就是这样做的。

```
 'query' => drupal_get_destination() + array(
        // Add a token to protect against cross-site request forgeries.
        'token' => drupal_get_token('overlay'),
      ), 
```

要更改像 [submission:values:total_points] 这样的令牌，模块需要实现[hook_tokens_alter()](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_tokens_alter/7)。[webform_tokens()](http://drupalcontrib.org/api/drupal/contributions!webform!webform.tokens.inc/function/webform_tokens/7)使用的代码可以指导您编写应该编写的代码。

```
function mymodule_tokens_alter(array &$replacements, array $context) {
  if ($context['type'] == 'submission' && !empty($context['data']['webform-submission'])) {
    // $submission = $context['data']['webform-submission'];
    // $node = $context['data']['node'] ? $context['data']['node'] : node_load($submission->nid);

    // Find any token starting with submission:values.
    if ($value_tokens = token_find_with_prefix($context['tokens'], 'values')) {
      if (!empty($value_tokens['total_points'])) {
        $replacements[$value_tokens['total_points']] = 100;
      }
    }
  }
} 
```

# javascript - 添加图像 URL 表单 - 使用 AJAX 预览图像

> ID：13986173
> 
> 赞同：0
> 
> 时间：2012-12-21T07:43:17.790
> 
> 标签：javascript, jquery, ajax, html, forms

我一直在试图找出如何做到这一点。

我唯一能找到的是上传图像，然后 AJAX 预览上传的图像。

我怎样才能对图片网址做同样的事情？

ie 用户提交一个图片 url，然后 AJAX 给出图片的预览。

如果有另一种方法可以使用其他技术，JQuery，HTML5 也可以。:)

* * *

更新：

为了清楚起见，我指的是输入类型=“文本”而不​​是输入类型=“文件”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:51:48.413

要根据输入到文本输入中的 URL 显示图像，请获取 url 并将其用作图像标记的源，如下所示：

```
<input type="text" id="url"/>  <!--text input-->
<input type="button" id="btn" value="show image" /> <!--button to get the image-->
<img src="" id="img">​ <!--image tag to show the image--> 
```

JS：

```
$('#btn').on('click', function() {           //on click of button
    $('#img').attr('src', $('#url').val());  //get the input value and 
});​                                          //set it as the source attribute 
```

[**小提琴**](http://jsfiddle.net/adeneo/pBXGe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T07:51:25.597

使用 html5，您可以获取上传的文件数据，然后将其写入图像或画布的 src 属性。请参阅：[从输入表单获取 Base64 编码文件数据](https://stackoverflow.com/questions/6978156/get-base64-encode-file-data-from-input-form)

# android - 添加广播接收器以与外部 USB 设备绑定

> ID：13986174
> 
> 赞同：0
> 
> 时间：2012-12-21T07:43:32.897
> 
> 标签：android, usb, broadcastreceiver, nfc

我正在构建一个与 USB NFC 阅读器交互的应用程序（对于没有本机 NFC 的设备）。接收器是 USB 并带有一个不错的 SDK，它似乎可以像宣传的那样工作（因为我可以成功地读取从阅读器滑过的标签）。

我认为我的挑战应该非常简单，但不清楚如何实施是如何注册我的应用程序，以便在靠近 NFC 标签触发 USB 连接的 NFC 阅读器时收到通知。

我是否只注册一个调用类似以下内容的广播接收器：

```
UsbDevice device = (UsbDevice) intent
                            .getParcelableExtra(UsbManager.EXTRA_DEVICE); 
```

并自己启动我的应用程序？不知怎的，这感觉不太对劲。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:45:06.987

我建议创建一个在清单中注册的 BroadcastReceiver。这将允许您的应用程序即使没有运行也能收到通知。

```
public class NfcReceiver extends BroadcastReceiver {
    /* ... */

    @Override
    public void onReceive(Context context, Intent intent) {
        if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())) {
            Parcelable[] rawMsgs =_
              intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
            if (rawMsgs != null) {
                msgs = new NdefMessage[rawMsgs.length];
                for (int i = 0; i < rawMsgs.length; i++) {
                    msgs[i] = (NdefMessage) rawMsgs[i];
                }
            }
        } /* end handle NDEF_DISCOVERED */
    } /* end onReceive */
} /* end BroadcastReceiver*/ 
```

在您的清单中，请务必添加正确的意图过滤器（我从未做过 NFC，但我相信这对您来说是正确的：）

```
<uses-feature android:name="android.hardware.nfc" android:required="true" />
<uses-sdk android:minSdkVersion="10"/>
<uses-permission android:name="android.permission.NFC" />

<receiver android:name=".NfcReceiver">
    <intent-filter>
        <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
        <category android:name="android.intent.category.DEFAULT"/>
        <data android:mimeType="text/plain" />
    </intent-filter>
</receiver> 
```

[http://developer.android.com/guide/topics/connectivity/nfc/nfc.html](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html)

[http://developer.android.com/guide/topics/connectivity/nfc/advanced-nfc.html](http://developer.android.com/guide/topics/connectivity/nfc/advanced-nfc.html)

如果您可以/希望走这条路，也有一些解决方案，例如：

[http://mobisocial.github.com/EasyNFC/apidocs/reference/mobisocial/nfc/Nfc-source.html](http://mobisocial.github.com/EasyNFC/apidocs/reference/mobisocial/nfc/Nfc-source.html)

# perl - perl中的字符串插值

> ID：13986177
> 
> 赞同：1
> 
> 时间：2012-12-21T07:43:49.547
> 
> 标签：perl, string-interpolation, widechar

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T09:27:56.053

You want

```
print "Character for $num is: ", chr($num), "\n"; 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-21T07:52:05.753

You can write something like :

```
foreach $num (2660..2670)
{
        print "Character for $num  is:",eval(qq!\"\\x{$num} \\n\"!);
} 
```

The problem with your original program, is that perl cannot evaluate "\x{...}" because this evaluation is done before the interpolation of $num.

# sql-server - 从 select 语句中查询

> ID：13986181
> 
> 赞同：0
> 
> 时间：2012-12-21T07:43:58.657
> 
> 标签：sql-server, subquery

我们可以从查询中查询吗？

例如：

```
select * from (select budgetyear from bg_year) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T07:45:34.417

是的，但是您编写的查询不起作用。子查询（又名派生表）必须有这样的别名：

```
select * from (select budgetyear from bg_year) AS T1 
```

即使不使用别名也是必需的。省略它是错误的。当然，在这个特定示例中，子查询没有任何意义，因为查询与此相同：

```
select budgetyear from bg_year 
```

我假设您为了举例而过度简化了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T07:48:59.493

是的，你可以，它被称为嵌套选择。看看这个在线教程：

[http://sqlzoo.net/wiki/SELECT_within_SELECT_Tutorial](http://sqlzoo.net/wiki/SELECT_within_SELECT_Tutorial)

完成教程后，应该对如何实现嵌套选择有一个相当不错的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T07:49:54.883

当然可以，选择返回的每个结果集都被视为一个表，因此您可以查询该结果集（表）

```
select budgetyear from bg_year 
```

此查询将返回一个表，您始终可以查询一个表。

# jquery - 如何改进我的 Jquery 移动应用程序的页面转换？

> ID：13986182
> 
> 赞同：6
> 
> 时间：2012-12-21T07:44:13.300
> 
> 标签：jquery, jquery-mobile

我在单个 HTML 页面中创建了一个小型 Jquery Mobile 应用程序。我面临的问题是移动设备中页面转换的性能非常糟糕。滑动到下一页后，我最终等待 3-4 秒，然后页面更改。有什么想法可以改进吗？

这是代码：

```
<!DOCTYPE html> 
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <title>Multi-page template</title> 

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <link rel="stylesheet" href="http://jquerymobile.com/branches/tables/css/themes/default/jquery.mobile.css">  
    <link rel="stylesheet" href="http://jquerymobile.com/branches/tables/docs/_assets/css/jqm-docs.css">
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

</head> 

<body> 
    <form id="test" method="post">
        <!-- Start of page: #p01 -->
        <div data-role="page" id="p01" data-theme="b" data-prefetch>

            <div data-role="header" data-theme="a">
                <h1>Page 01 of 05</h1>
            </div><!-- /header -->

            <div data-role="content" >
                <h3>Please provide these details about the child</h3>
                <br/>
                <fieldset>
                    <label>Child's Full Name:</label>
                    <fieldset>
                        <input id = "p01_childFirstName_text" type="text" placeholder="First Name...">
                        <input id = "p01_childMidName_text" type="text" placeholder="Middle Name...">
                        <input id = "p01_childLastName_text" type="text" placeholder="Last Name...">
                    </fieldset>
                </fieldset>    
                <br/>
                <fieldset data-role="controlgroup" data-type="horizontal">
                    <legend>Child's Gender:</legend>
                        <input data-theme="a" type="radio" name="radio-choice" id="p01_childGenderMale_radio" value="choice-1" checked="checked" />
                        <label for="p01_childGenderMale_radio">Female</label>

                        <input data-theme="a" type="radio" name="radio-choice" id="p01_childGenderFemale_radio" value="choice-2"  />
                        <label for="p01_childGenderFemale_radio">Male</label>

                        <input data-theme="a" type="radio" name="radio-choice" id="p01_childGenderOther_radio" value="choice-3"  />
                        <label for="p01_childGenderOther_radio">Other</label>
                </fieldset>
                <br/>
                <fieldset>
                    <label for = "p01_childEthnGroup_text">Child's Ethnic Group or Race:</label>
                    <input id = "p01_childEthnGroup_text" type="text" placeholder="Ethnic Group...">
                </fieldset>
                <br/>
                <fieldset>
                    <label for="p01_childBirthDate_text">Child's Birth Date:</label>
                    <input id = "p01_childBirthDate_text" type="text" placeholder="DD/MM/YYYY">
                </fieldset>  
                <br/>
                <fieldset>
                    <label for="p01_childBirthDate_text">Child's Grade in School:</label>
                    <input id = "p01_childBirthDate_text" type="text" placeholder="DD/MM/YYYY">
                </fieldset>  
                <br/>
                <fieldset>
                    <label for="flip-1">Is the Child attending a School?</label>
                    <select name="flip-1" id="flip-1" data-role="slider" data-theme="a">
                        <option value="off">Yes</option>
                        <option value="on">No</option>
                    </select>   
                </fieldset>  

            </div><!-- /content -->

            <div data-role="footer" data-theme="a">
                    <p class = "footer_text"><small><em>Please swipe the page to the sides to go to the next page, or to return to the previous one.</em></small></p>
            </div><!-- /footer -->

        </div><!-- /page one -->

        <!-- Start of page: #p02 -->
        <div data-role="page" id="p02" data-theme="b" data-prefetch>

            <div data-role="header" data-theme="a">
                <h1>Page 02 of 05</h1>
            </div><!-- /header -->

            <div data-role="content" data-theme="b">    
                <h3>Please provide these details about the child's parent</h3>
                <p><small><em>Please enter these details even if the parents are not working now. 
                              Be specific - for example: auto mechanic, high school teacher, home maker, 
                              day labourer, lathe operator, army sergeant etc.
                </em></small></p>
                <br/>
                <fieldset>
                    <label for="p02_fatherWorkType_text">Father's Type of Work:</label>
                    <input id = "p02_fatherWorkType_text" type="text" placeholder="Type of Work...">
                </fieldset>  
                <br/>
                <fieldset>
                    <label for="p02_motherWorkType_text">Mother's Type of Work:</label>
                    <input id = "p02_motherWorkType_text" type="text" placeholder="Type of Work...">
                </fieldset>  
                <br/>
                <fieldset>
                    <label>Your Full Name:</label>
                    <fieldset>
                        <input id = "p02_userFirstName_text" type="text" placeholder="First Name...">
                        <input id = "p02_userMidName_text" type="text" placeholder="Middle Name...">
                        <input id = "p02_userLastName_text" type="text" placeholder="Last Name...">
                    </fieldset>
                </fieldset>    
                <br/>
                 <fieldset data-role="controlgroup" data-type="horizontal">
                    <legend>Your Gender:</legend>
                        <input data-theme="a" type="radio" name="radio-choice" id="p02_userGenderMale_radio" value="choice-1" checked="checked" />
                        <label for="p02_userGenderMale_radio">Female</label>

                        <input data-theme="a" type="radio" name="radio-choice" id="p02_userGenderFemale_radio" value="choice-2"  />
                        <label for="p02_userGenderFemale_radio">Male</label>

                        <input data-theme="a" type="radio" name="radio-choice" id="p02_userGenderOther_radio" value="choice-3"  />
                        <label for="p02_userGenderOther_radio">Other</label>
                </fieldset>
                <br/>
                 <fieldset data-role="controlgroup">
                    <legend>Your Relation with the Child:</legend>
                        <input data-theme="a" type="radio" name="radio-choice" id="p02_userRelationBio_radio" value="choice-1" checked="checked" />
                        <label for="p02_userRelationBio_radio">Biological Parent</label>

                        <input data-theme="a" type="radio" name="radio-choice" id="p02_userRelationAdopt_radio" value="choice-2"  />
                        <label for="p02_userRelationAdopt_radio">Adoptive Parent</label>

                        <input data-theme="a" type="radio" name="radio-choice" id="p02_userRelationStep_radio" value="choice-3"  />
                        <label for="p02_userRelationStep_radio">Step Parent</label>

                        <input data-theme="a" type="radio" name="radio-choice" id="p02_userRelationGrand_radio" value="choice-3"  />
                        <label for="p02_userRelationGrand_radio">Grand Parent</label>

                        <input data-theme="a" type="radio" name="radio-choice" id="p02_userRelationFoster_radio" value="choice-3"  />
                        <label for="p02_userRelationFoster_radio">Foster Parent</label>

                        <input data-theme="a" type="radio" name="radio-choice" id="p02_userRelationOther_radio" value="choice-3"  />
                        <label for="p02_userRelationOther_radio">Others (Please Specify)</label>
                        <input class= "p02_input_hidden_text" id = "p02_userRelationOther_text" type="text" placeholder="Specify Relation...">

                </fieldset>

            </div><!-- /content -->

            <div data-role="footer" data-theme="a">
                    <p class = "footer_text"><small><em>Please swipe the page to the sides to go to the next page, or to return to the previous one.</em></small></p>
            </div><!-- /footer -->

        </div><!-- /page two -->

         <!-- Start of page: #p05 -->
        <div data-role="page" id="p05" data-theme="b" data-prefetch>

            <div data-role="header" data-theme="a">
                <h1>Last Page</h1>
            </div><!-- /header -->

            <div data-role="content" data-theme="b">    
                <h2>Congratulations! You have filled out the Child Behaviour Checklist.</h2>
                <p><small><em>Please click on the "SUBMIT" button below to send us the checklist.</em></small></p>
                <br/>
                <br/>
                <br/>
                <button type="submit" data-theme="a" class="ui-btn-hidden" data-disabled="false">Submit</button>

            </div><!-- /content -->

        </div><!-- /page five -->

    </form>
    <style>
        .footer_text {
            text-align:center;
        }
    </style>

    <script>
    $( document ).on( 'mobileinit', function(){
        $.mobile.loader.prototype.options.text = "loading...";
        $.mobile.loader.prototype.options.textVisible = false;
        $.mobile.loader.prototype.options.theme = "a";
        $.mobile.loader.prototype.options.html = "";
    });
    $(document).on ('pageshow', function (e, data) {         
        // keep all previously-visited pages in the DOM. Remove this option later when application becomes large.
        $.mobile.page.prototype.options.domCache = true;

        var activePage = $.mobile.activePage.attr("id");
        var previousPage = (parseInt(activePage.slice(1,3))-1).toString();
        var nextPage = (parseInt(activePage.slice(1,3))+1).toString();

        window.myActivePage = activePage;
        window.myPreviousPage = "#p0" + previousPage;
        window.myNextPage = "#p0" + nextPage;

    });
    // page navigation on using swipes
    $(document).on('swipeleft',function(event, ui){
            $.mobile.changePage(window.myNextPage, { transition: "slide"});
        });
    $(document).on('swiperight',function(event, ui){
            $.mobile.changePage(window.myPreviousPage, { transition: "slide", reverse:true});
        });

    // Code to show and hide fields. Spaghetti code. Refactor this when working on actual app.
    $(document).ready(function() {
        $('[id=p02_userRelationOther_text]').hide()
        $('[type=radio]').click(function(eventName) {
            if (this.id == 'p02_userRelationOther_radio') {
                $('[id=p02_userRelationOther_text]').show('slow')
            }
            else {
                $('[id=p02_userRelationOther_text]').hide('slow')
            }
        });

        $('[id=p03_noSports_check]').click(function(eventName) {
            if ($('[id=p03_noSports_check]').is(":checked")) {
                $('[class=p03_hidden_container]').hide('slow')
            }
            else {
            $('[class=p03_hidden_container]').show('slow')
            }
        });

        $('[id=p04_noHobby_check]').click(function(eventName) {
            if ($('[id=p04_noHobby_check]').is(":checked")) {
                $('[class=p04_hidden_container]').hide('slow')
            }
            else {
            $('[class=p04_hidden_container]').show('slow')
            }
        });
    });
    </script>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T08:05:23.897

有几种方法：

*   如果您正在使用 ! 包含多个页面的 html 文件，将它们包装到单个 div 中：

    ```
    <div id="container"/> 
    ```

并设置这个CSS：

```
 body {
        margin: 0;
    }

    #container {
        position: absolute;
        width: 100%;
        height: 100%;
    } 
```

js代码：

```
 $(document).one("mobileinit", function () {
        $.mobile.pageContainer = $('#container');
        $.mobile.defaultPageTransition = 'slide';
    }); 
```

可以在此处找到有关此方法的更多信息：http: [//outof.me/fixing-flickers-jumps-of-jquery-mobile-transitions-in-phonegap-apps/](http://outof.me/fixing-flickers-jumps-of-jquery-mobile-transitions-in-phonegap-apps/)

*   其他常见的解决方案是设置这个 css： .ui-page { -webkit-backface-visibility: hidden; }

该解决方案的问题在于它破坏了表单上的选择列表。

*   关闭它们：

    ```
    $(document).bind("mobileinit", function(){
        $.mobile.defaultDialogTransition = "none";
        $.mobile.defaultPageTransition = "none";
    }); 
    ```

*   在 jquery 移动应用程序上使用 fastclick 来加速点击事件，从而加快页面转换。点击事件最多可以添加 300 毫秒到页面转换。这个插件会做更多的事情，但在你的情况下就足够了。

链接：[https ://github.com/drowne/jquery.mobile.fastclick](https://github.com/drowne/jquery.mobile.fastclick)

*   如果您不想要其他插件，您仍然可以通过从页面更改按钮中删除 href 然后执行以下操作来实现更快的页面转换：

    ```
    <a class="ui-btn-left" data-icon="arrow-l" href="#" data-theme="a" id="back-btn">Back</a>

    $('#back-btn').bind('touchstart', function(e) {
        $.mobile.changePage("#pageID");
    }); 
    ```

如果您知道用户不会滚动，则 touchstart（或 touchend）事件非常有用。这实际上是点击事件在移动设备上需要很长时间才能解决的原因，设备正在等待查看用户是否在滚动或点击。所以 touchstart 不应该像常见的点击/点击事件那样有延迟。

**我希望其中一些解决方案对您有所帮助。考虑到，这些不是万无一失的解决方案，它们也有自己的缺点。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T00:51:18.090

至于全局 css 性能修复，请尝试[JQM CSS 生存工具包](https://github.com/mingyuen78/JQMSurvivalKitCSS)，这是一个修复特定性能问题的小型 css 工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-09T10:02:11.337

谢谢加约特雷斯。

我已经用 vclick 替换了“touchstart”并添加了 preventDefault()，否则我最终会遇到很多 pagechangefailed 事件。

```
<div data-role="page" id="event" data-theme="b" style="background: transparent;">
  <div data-role="header" data-theme='b' data-position='fixed'>
    <a class="ui-btn-left" data-icon="arrow-l" id="bhome" href="#">Back</a>
...

// Fastclick on back button - gets rid of the 300ms delay
$("#bhome").live('vclick', function(e) {
    e.preventDefault();
    javascript:history.back(1);//   $.mobile.changePage("#home", {transition:'fade'});
}); 
```

在开发过程中，我认为添加以下事件处理程序以确保不会发生错误是一件好事：

```
$(document).bind("pagechangefailed", function(event, data) {
    $.mobile.loading('hide');
    alert("pagechangefailed"); 
}); 
```

# c# - 如何在 C#.NET 中使软件分辨率独立

> ID：13986183
> 
> 赞同：1
> 
> 时间：2012-12-21T07:44:24.967
> 
> 标签：c#, winforms, screen-resolution

我在 C#.NET 中以 1366x768 的分辨率创建 Windows 应用程序，现在我以任何其他分辨率（如 1024x768 或 800x600）运行此应用程序，然后它将无法在该分辨率下工作，因为表单中的所有控件都将退出表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:45:35.183

尝试设置Windows 窗体中控件的**Anchor属性。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T07:48:36.280

设置 Anchor/Dock 属性

浏览 [如何创建独立于分辨率的表单](http://support.microsoft.com/kb/182070)

# html - HTML 表单不会在 IE9 中提交

> ID：13986190
> 
> 赞同：0
> 
> 时间：2012-12-21T07:44:53.730
> 
> 标签：html, jquery-mobile, internet-explorer-9

我有一个不会在 IE9 中提交的简单 HTML 表单。它适用于 Chrome、FF 和 IE10。

我尝试在 Windows 7 上的 IE9 和 Windows 8 上的 IE10 中提交。

除非我将浏览器模式更改为 IE9，否则 IE10 可以工作；那么它不会提交。

[演示](http://jsfiddle.net/nMR85/582/)。如果您在任何正常工作的浏览器上单击“保存”，它会将您带到假的 demo_form.asp。

这是表格：

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Title</title> 
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1"> 

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    </head>
    <body>
        <div data-role="page">
            <div data-role="header">
                <h1>Title</h1>
            </div>
            <div data-role="fieldcontain">
                <div class="error-messsage">
                    <p/>
                </div>
                <p>
                    <form action="demo_form.asp" data-ajax="false" method="get">
                        <input type="hidden" name="scoreType" id="_scoreType" value="T"/>
                        <div data-role="fieldcontain">
                            <fieldset class="ui-grid-a">
                                <div class="ui-block-a">Minutes:</div>
                                <div class="ui-block-b">Seconds:</div>
                                <div class="ui-block-a">
                                    <input type="number" name="score_minutes" value="1" id="_scoreMinutes" maxlength="20" autocomplete="off" data-inline="true"/>
                                </div>
                                <div class="ui-block-b">
                                    <input type="number" name="score_seconds" value="2" id="_scoreSeconds" maxlength="20" autocomplete="off" data-inline="true"/>
                                </div>
                            </fieldset>
                            <input type="hidden" name="score" id="_score" value="62"/>
                        </div>
                        <div data-role="fieldcontain">
                            <label for="_note">Note:</label>
                            <textarea name="note" cols="40" rows="10" id="_note" autocomplete="off"/>
                        </div>
                        <div data-role="fieldcontain">
                            <label for="_classAttended" class="select">Class Time:</label>
                            <select name="class_attended" id="_classAttended" data-native-menu="false">
                                <option value="-1"/>
                                <option value="6">06:00 am</option>>
</select>
                        </div>
                        <div data-role="fieldcontain">
                            <label for="_memberRating" class="select">Member Rating:</label>
                            <select name="member_rating" id="_memberRating" data-native-menu="false">
                                <option value="-1"/>
                                <option value="5">5 </option>
                            </select>
                        </div>
                        <div data-role="fieldcontain">
                            <label for="_rx">RX</label>
                            <input type="checkbox" name="rx" value="1" id="_rx" data-mini="true"/>
                        </div>
                        <div data-role="fieldcontain">
                            <a href="http://mysite.com/index.php/welcome/index/TRUE" data-ajax="false" data-role="button" data-inline="true">Cancel</a>
                            <button name="" type="Submit" id="_submit" class="ui-btn-hidden" value="Save" aria-disabled="false" data-inline="true" data-theme="b"/>
                        </div>
                    </form>
                </p>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T08:19:50.077

你有一个`<div>`试图在一个里面的`<form>`那个在里面`<p>`。但是`<div>`s 不能在 a`<p>`中，因此 HTML 解析器会关闭`<p>`元素，这样做也会关闭`<form>`. 所以保存按钮不在表单内，因此 IE9 不知道单击按钮时要提交什么。删除`<p>`围绕`<form>`.

FF、Chrome 和 IE10 中使用的 HTML5 解析器有一些巧妙的技巧来处理您的无效标记，但旧的 IE9 解析器无法应对。

此外，您有`<p/>`和`<textarea/>`。不要那样做。任何一个元素都不支持自闭合语法。

# android - Android 和顶栏通知

> ID：13986191
> 
> 赞同：0
> 
> 时间：2012-12-21T07:45:09.763
> 
> 标签：android

我正在处理我的应用程序中的一些通知。我正在使用谷歌云消息传递。我的应用程序在这种模式下工作：我有一个实现 GCM 的小应用程序，这个小应用程序只运行其他应用程序。但是我想当我有这个应用程序的一些新更新时，在顶部栏中显示新信息已添加到网络服务的通知。这是我的代码：

```
public class MainActivity extends Activity {

    private final static int APPLICATION_ID = 5;
    private boolean isInstalled = false;
    PackageManager pm;
    final String appName = "com.example.test";
    // Replace the xxx with the project id generated from the Google console when
    // you defined a Google APIs project.
    private static final String PROJECT_ID = "410016639123";

    // This tag is used in Log.x() calls
    private static final String TAG = "MainActivity";

    // This string will hold the lengthy registration id that comes
    // from GCMRegistrar.register()
    private String regId = "";

    // These strings are hopefully self-explanatory
    private String registrationStatus = "Not yet registered";
    private String broadcastMessage = "No broadcast message";

    // This intent filter will be set to filter on the string "GCM_RECEIVED_ACTION"
    IntentFilter gcmFilter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        ActivityManager aManager = (ActivityManager) this.getSystemService( ACTIVITY_SERVICE );
        List<RunningAppProcessInfo> processInfo = aManager.getRunningAppProcesses();

        for(int i = 0; i < processInfo.size(); i++){
            if(processInfo.get(i).processName.equals(appName)) {
                aManager.restartPackage("com.example.test.MainActivity"); 
            }
        } 

        pm = getPackageManager();
        // Create our IntentFilter, which will be used in conjunction with a
        // broadcast receiver.
        gcmFilter = new IntentFilter();
        gcmFilter.addAction("GCM_RECEIVED_ACTION");

        registerClient();
        if(!checkInstalled()){

            try {
                startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id="+appName)));
            } catch (android.content.ActivityNotFoundException anfe) {
                startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://play.google.com/store/apps/details?id="+appName)));
            }

        }else{
            Log.v("app", "App is installed");
        }

        Intent intent = pm.getLaunchIntentForPackage(appName);
        CopyAssets();
        if(intent != null) {
            intent.putExtra("application_id", APPLICATION_ID); 
            intent.putExtra("ApiKey", regId);
            //getApplicationContext().startActivity(intent);
            startActivityForResult(intent, Intent.FLAG_ACTIVITY_NO_HISTORY);
            finish();
        }
    }
    public void registerClient() {

        try {
            // Check that the device supports GCM (should be in a try / catch)
            GCMRegistrar.checkDevice(getApplicationContext());

            // Check the manifest to be sure this app has all the required
            // permissions.
            GCMRegistrar.checkManifest(getApplicationContext());

            // Get the existing registration id, if it exists.
            regId = GCMRegistrar.getRegistrationId(getApplicationContext());

            if (regId.equals("")) {

                registrationStatus = "Registering...";

                // register this device for this project
                GCMRegistrar.register(this, PROJECT_ID);
                regId = GCMRegistrar.getRegistrationId(this);

                registrationStatus = "Registration Acquired";

                // This is actually a dummy function.  At this point, one
                // would send the registration id, and other identifying
                // information to your server, which should save the id
                // for use when broadcasting messages.
                sendRegistrationToServer();

            } else {

                registrationStatus = "Already registered";

            }

        } catch (Exception e) {

            e.printStackTrace();
            registrationStatus = e.getMessage();

        }

        Log.d(TAG, registrationStatus);

        // This is part of our CHEAT.  For this demo, you'll need to
        // capture this registration id so it can be used in our demo web
        // service.
        Log.d(TAG, regId);

    }

    private void sendRegistrationToServer() {
        // This is an empty placeholder for an asynchronous task to post the
        // registration
        // id and any other identifying information to your server.
    }
    private static boolean checkFsWritable() {
        // Create a temporary file to see whether a volume is really writeable.
        // It's important not to put it in the root directory which may have a
        // limit on the number of files.
        String directoryName = Environment.getExternalStorageDirectory().toString() + "/DCIM";
        File directory = new File(directoryName);
        if (!directory.isDirectory()) {
            if (!directory.mkdirs()) {
                return false;
            }
        }
        return directory.canWrite();
    }

    /**
     * copies all assets (icons, terms document) to the sdcard if they are missing. 
     */

    private void copyFile(InputStream in, OutputStream out) throws IOException {
        byte[] buffer = new byte[1024];
        int read;
        while((read = in.read(buffer)) != -1){
          out.write(buffer, 0, read);
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    private boolean checkInstalled(){
        try
        {
             pm.getPackageInfo(appName, PackageManager.GET_ACTIVITIES);
             isInstalled = true;
        }
        catch (PackageManager.NameNotFoundException e)
        {
             isInstalled = false;
        }
        return isInstalled;
    }
    public void onSaveInstanceState(Bundle savedInstanceState) {

        super.onSaveInstanceState(savedInstanceState);

        savedInstanceState.putString("BroadcastMessage", broadcastMessage);

    }

    // When an activity is re-created, the os generates an onRestoreInstanceState()
    // event, passing it a bundle that contains any values that you may have put
    // in during onSaveInstanceState()
    // We can use this mechanism to re-display our last broadcast message.

    @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) {

        super.onRestoreInstanceState(savedInstanceState);

        broadcastMessage = savedInstanceState.getString("BroadcastMessage");

    }

    // If our activity is paused, it is important to UN-register any
    // broadcast receivers.
    @Override
    protected void onPause() {

        unregisterReceiver(gcmReceiver);
        super.onPause();
    }

    // When an activity is resumed, be sure to register any
    // broadcast receivers with the appropriate intent
    @Override
    protected void onResume() {
        super.onResume();
        registerReceiver(gcmReceiver, gcmFilter);

    }

    // There are no menus for this demo app.  This is just
    // boilerplate code.

    // NOTE the call to GCMRegistrar.onDestroy()
    @Override
    public void onDestroy() {

        GCMRegistrar.onDestroy(getApplicationContext());

        super.onDestroy();
    }

} 
```

和 GCM 类：

```
public class GCMIntentService extends GCMBaseIntentService {
private static final int NOTIFY_ME_ID=1;
  private int count=0;
  private NotificationManager mgr=null;
private static final String PROJECT_ID = "410016639568";

private static final String TAG = "GCMIntentService";

public GCMIntentService()
{
    super(PROJECT_ID);
    Log.d(TAG, "GCMIntentService init");
}

@Override
protected void onError(Context ctx, String sError) {
    // TODO Auto-generated method stub
    Log.d(TAG, "Error: " + sError);

}

@Override
protected void onMessage(Context ctx, Intent intent) {

    Log.d(TAG, "Message Received");

    String message = intent.getStringExtra("message");
    generateNotification(ctx, intent.getStringExtra("message"));

}

private void sendGCMIntent(Context ctx, String message) {

    Intent broadcastIntent = new Intent();
    broadcastIntent.setAction("GCM_RECEIVED_ACTION");

    broadcastIntent.putExtra("gcm", message);

    ctx.sendBroadcast(broadcastIntent);

}

@Override
protected void onRegistered(Context ctx, String regId) {
    // TODO Auto-generated method stub
    // send regId to your server
    Log.d(TAG, regId);

}

@Override
protected void onUnregistered(Context ctx, String regId) {
    // TODO Auto-generated method stub
    // send notification to your server to remove that regId

}
private static void generateNotification(Context context, String message) {
    long when = System.currentTimeMillis();
    NotificationManager notificationManager = (NotificationManager) context
            .getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(R.drawable.ic_launcher,
            message, when);
    String title = context.getString(R.string.app_name);
    Intent notificationIntent = new Intent(context,
            MainActivity.class);
    // set intent so it does not start a new activity
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
            | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent intent = PendingIntent.getActivity(context, 0,
            notificationIntent, 0);
    notification.setLatestEventInfo(context, title, message, intent);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notificationManager.notify(0, notification);
} 
```

}

我收到消息：

```
12-21 08:20:18.709: V/app(4682): App is installed
12-21 08:20:18.919: E/tag(4682): Files/terms.pdf
12-21 08:34:29.239: V/GCMBroadcastReceiver(4682): onReceive: com.google.android.c2dm.intent.RECEIVE
12-21 08:34:29.239: V/GCMBroadcastReceiver(4682): GCM IntentService class: pl.spot.rudolfmuller.GCMIntentService
12-21 08:34:29.244: V/GCMBaseIntentService(4682): Acquiring wakelock
12-21 08:34:29.264: V/GCMBaseIntentService(4682): Intent service name: GCMIntentService-410016639568-1
12-21 08:34:29.264: D/GCMIntentService(4682): GCMIntentService init
12-21 08:34:29.269: D/GCMIntentService(4682): Message Received
12-21 08:34:29.269: V/GCMBaseIntentService(4682): Releasing wakelock
12-21 08:34:45.324: V/GCMBroadcastReceiver(4682): onReceive: com.google.android.c2dm.intent.RECEIVE
12-21 08:34:45.324: V/GCMBroadcastReceiver(4682): GCM IntentService class: pl.spot.rudolfmuller.GCMIntentService
12-21 08:34:45.324: V/GCMBaseIntentService(4682): Acquiring wakelock
12-21 08:34:45.339: V/GCMBaseIntentService(4682): Intent service name: GCMIntentService-410016639568-2
12-21 08:34:45.339: D/GCMIntentService(4682): GCMIntentService init
12-21 08:34:45.344: D/GCMIntentService(4682): Message Received
12-21 08:34:45.344: V/GCMBaseIntentService(4682): Releasing wakelock 
```

但我的顶部栏中没有任何信息。我怎么能这样做？应用程序必须正在运行才能看到此通知？即使应用程序没有运行，我也想获得通知。

编辑：我编辑了我的代码，但仍然没有收到消息。我收到收到消息的日志，但之后是释放唤醒锁并且我的消息没有出现。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:20:38.297

BroadcastReceiver 上的 Android 文档：

> 注意：如果在 Activity.onResume() 实现中注册接收器，则应在 Activity.onPause() 中取消注册。（暂停时您不会收到意图，这将减少不必要的系统开销）。

因此，当您的应用程序未运行或暂停时，将不会生成通知。然而; 如果您在类的`onMessage`方法中生成通知，`GCMIntentService`即使您的应用程序未运行，它也会生成，因为该类是`service`在您的应用程序后台运行的。

如果你制作一个单独的 BroadcastReceiver 类，你可以在你`AndroidManifest.xml`的下面声明它：

```
<receiver android:name="yourpackage.yourclassname" >
    <intent-filter>
        <action android:name="GCM_RECEIVED_ACTION" />
    </intent-filter>
</receiver> 
```

# java - 运行无限 Java 程序以及性能如何受到影响

> ID：13986195
> 
> 赞同：4
> 
> 时间：2012-12-21T07:45:31.470
> 
> 标签：java, multithreading, performance, infinite-loop

所以我不是线程专家，也不是 java。

好的，所以我做了一个无限运行的小程序..（它应该）

每分钟从 XML 文件中获取数据并打印出来。xml 每隔几秒钟更新一次，但只需要 1 分钟的打印。所以我的主要看起来像这样。

```
while(true) {
   try {
       Thread.sleep(60000);
       String data = getSomeDataFromXMLFile();
       System.out.println(data);
   } catch (InterruptedException e) {
       e.printStackTrace();
   } 
```

该代码按其应有的方式工作。只是想知道它是否会以任何方式影响我的服务器性能？就像运行 10 天后它会占用所有 RAM 或其他东西..

非常欢迎提出建议和改进。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T07:52:32.367

假设这`getSomeDataFromXMLFile()`是正确的（不泄漏内存），您的代码就可以了。也许不漂亮，但很好。

一个不相关的小改进 - 如果您想每分钟读取一次文件（而不是：每次读取之间睡眠一分钟），您必须考虑时间`getSomeDataFromXMLFile()`。

考虑[`Timer`](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)使用类来缩小代码并避免上述问题：

```
Timer timer = new Timer();
timer.scheduleAtFixedRate(new TimerTask() {
    @Override
    public void run() {
        String data = getSomeDataFromXMLFile();
        System.out.println(data);
    }
}, 0, 60000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T07:53:03.213

根据我上周所做的，我构建了一个运行无限循环并执行一些事务的东西。我注意到，如果：

1.  每个运行的线程都会完成它的事务。因为如果没有，它将保持活动状态，并且您的程序将继续创建线程，直到您的 JVM 无法再持有线程为止。
2.  如果存在[内存泄漏](http://plumbr.eu/blog/what-is-a-memory-leak)，您的 JVM 将无法清除某些对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T07:51:07.860

您发布的代码不包含内存泄漏。在 Java 中，您通常不需要显式释放内存资源，因为它使用自动[垃圾回收](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)。当您分配给`data`旧值时，不再引用并成为垃圾回收的条件。下次运行垃圾收集器时，它将自动释放。垃圾收集器将根据需要运行 - 您无需明确告诉它运行。

但是，您应该小心确保关闭`getSomeDataFromXMLFile`方法内的任何资源，例如文件句柄。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T07:52:26.550

> 就像运行 10 天后它会占用所有 RAM 或其他东西？

这取决于如何`getSomeDataFromXMLFile()`实施。

如果您确定，这些方法已尽可能优化。它根本不会影响服务器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T07:51:56.703

这些肯定不会占用 RAM，因为您分配给相同的数据对象，旧数据对象的内存将在需要时由垃圾收集器回收。此外，如果您有多个线程，请调试线程是否应该在它们应该死亡的时候死亡，如果没有死亡，您会有很大的问题，并且线程会占用 RAM，这可能会导致堆短缺。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T07:55:23.460

您发布的代码是可以的。我已经看到甚至更短的时间间隔无限循环没有问题，这完全取决于您如何管理 getSomeDataFromXML() 方法中的资源。

无论如何，您可以检查 Java 7 可用更改的监视目录：http: [//docs.oracle.com/javase/tutorial/essential/io/notification.html](http://docs.oracle.com/javase/tutorial/essential/io/notification.html) 这样它只会在 XML 更改时运行。

# iphone - audioqueue 可以代替 mpmovieplayer 在 iphone 中使用实时音频流吗？

> ID：13986196
> 
> 赞同：0
> 
> 时间：2012-12-21T07:45:31.200
> 
> 标签：iphone, ios6, http-live-streaming

我已阅读 Apple 文档，因为不允许使用`MpMoviePlayerController`. 相反，您必须使用`HLS`.

是否可以`audioqueue`用于音频的实时流媒体而不是`HLS (HTTP Live Streaming)`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T07:49:02.257

我认为这不适用于超过 5 或 10 分钟的视频/音频直播

在 MpMoviePlayerController 中允许。你可以用长视频试一下，然后看看是不是

工作与否。但在我看来，这是直播的最佳选择。我也为

直播视频。

# objective-c - 从另一个 ViewController 调用一个 ViewController 的实例方法

> ID：13986199
> 
> 赞同：0
> 
> 时间：2012-12-21T07:45:35.580
> 
> 标签：objective-c, ios, uiviewcontroller, delegates

我意识到这个问题已经被问死了，在过去的几年里，至少每个月在 stackoverflow 上问一次，但我仍然找不到解决方案。

我有两个来自 UITabBarController 的 ViewController。两者都通过情节提要进行初始化。我正在尝试从另一个调用一个 VC 的方法。当然是实例方法。

![在此处输入图像描述](../Images/a7689deb1f3650f235bc6b527f3b95a1.png)

我听说过以下几种可能性：

**1：** NSNotifications

**2：**定义协议并将一个VC声明为另一个VC的委托。

**3：**实际上是通过RootViewController调用方法。

我有通过 NSNotifications 工作的代码，但我不喜欢这个概念，我想了解正确的方法。我最感兴趣的是可能性（3），然后是（2）作为最后的手段。

我试图让 (2) 工作几个小时，但没有从另一个 VC 初始化委托 VC，我很难过。（由于故事板，不是一个选项）。

**(2) 或 (3) 都可能吗？怎么会这样？**

如果两者都不可能，我对首选 iOS 架构的误解是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:51:54.147

是的，3 是可能的。假设您有两个`UIViewController`类，`FooViewController`（标签索引 0）和`BarViewController`（标签索引 1）。假设您想从 调用`FooViewController`'`-(void)doFoo`方法`BarViewController`。

在`BarViewController`，做`[(FooViewController *)[self.tabBarController.viewControllers objectAtIndex:0] doFoo]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:24:59.030

我想使用 NSNOtification 并不总是做类似事情的错误方法。我也为这个概念而奋斗。

对于这个 senario，我认为通知是可以的：

1.  你有一个包含控制器 A 和 B 的 tabbarcontroller
2.  控制器 A 是一些对象的列表，例如书籍。
3.  控制器 B 是您通过填写表格并单击提交来创建书籍的控制器
4.  控制器 A 然后更新其列表。

原因是Controller A的更新不是“点击提交”。它刷新是因为创建了一本书。这是关于数据的东西。不知何故，“一本书被创建”是应用程序中的一个关键事件。

对于另一个 senario，这是不行的

1.  你有一个包含控制器 A 和 B 的 tabbarcontroller
2.  控制器 A 在中心有一个 ViewC
3.  控制器B有一个按钮，当它被点击时，ViewC向上移动

这只是我自己的意见。

# sql-server-2008 - 在 SQL 2008 中使用日期查找上周一

> ID：13986200
> 
> 赞同：2
> 
> 时间：2012-12-21T07:45:36.223
> 
> 标签：sql-server-2008

我有一个非常简单的查询

```
SELECT SUM(Balance) FROM TimeSystem
WHERE EmployeeNo = @EmployeeNo
AND RegDate BETWEEN @StartDate AND EndDate 
```

现在，我被分配创建一个返回余额的查询，但仅从与@EndDate 同一周的星期一开始。

因此，我需要创建一个使用 @EndDate 的变量，并找到同一周的星期一日期，然后将其放在一个名为 @Monday 的变量中。

我只使用了大约 3 个月的 SQL，所以我不确定这是否可以归档？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:13:48.663

```
declare @date datetime
set @date=GETDATE()

select DATEADD(wk, DATEDIFF(wk, 0,@date),0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-20T14:52:34.503

另一个版本将在周日获得前一个周一：

```
DECLARE @date DATE

SET @date = '2017-06-18' -- GETDATE()

SELECT DATEADD(DAY
                 ,CASE DATEPART(WEEKDAY, @date)WHEN 1 THEN -6 ELSE (DATEPART(WEEKDAY, @date) - 2) * -1 END
                 ,@date
              ) 
```

# jquery - 智能扩展引导日期选择器功能

> ID：13986201
> 
> 赞同：1
> 
> 时间：2012-12-21T07:45:49.533
> 
> 标签：jquery, twitter-bootstrap, jquery-ui-datepicker

我正在开发基于 Twitter Bootstrap 的日期选择器，它使用来自[https://github.com/eternicode/bootstrap-datepicker](https://github.com/eternicode/bootstrap-datepicker)的日期选择器。

我想扩展做一些类似的事情，允许用户选择 2 个日期并在更改时更新以后的日历

*   选择出发日期
*   返回日期：禁用选择出发日期之前的所有日期，以便返回日期始终保持在出发日期之前。

目前使用以下，但它只工作一次......

```
$("#depart_date").datepicker(dp)
    .on('changeDate',function(ev){

        $("#return_date").datepicker({
                格式：默认日期格式，
                自动关闭：真，
                开始日期：$("#depart_date").val()

            });

    });

```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:35:16.100

我已经在 jsFiddle 中[为您整理了这些内容，希望它能够满足您的要求。](http://jsfiddle.net/zNbUT/276/)需要注意的是，`setStartDate`如果您想在初始化后更新最小日期，您应该在日期选择器上使用一个函数。

**html**

```
<input type="text" class="span2" value="02-16-2012" id="depart-date">
<input type="text" class="span2" value="02-16-2012" id="return-date"> 
```

**JavaScript**

```
$(function() {

    // create the departure date
    $('#depart-date').datepicker({
        autoclose: true,
        format: 'mm-dd-yyyy',
    }).on('changeDate', function(ev) {
        ConfigureReturnDate();
    });

    $('#return-date').datepicker({
        autoclose: true,
        format: 'mm-dd-yyyy',
        startDate: $('#depart-date').val()
    });

    // Set the min date on page load
    ConfigureReturnDate();

    // Resets the min date of the return date
    function ConfigureReturnDate() {
         $('#return-date').datepicker('setStartDate', $('#depart-date').val());
    }

});​ 
```

或者，可以在[此处](http://www.dangrossman.info/2012/08/20/a-date-range-picker-for-twitter-bootstrap/)找到某人制作的日期范围选择器。

# ruby-on-rails - 以编程方式设计基于用户身份验证

> ID：13986202
> 
> 赞同：1
> 
> 时间：2012-12-21T07:45:54.093
> 
> 标签：ruby-on-rails, authentication, login, devise, titanium-mobile

我正在以编程方式为基于用户登录的身份验证应用程序，该应用程序使用设计 gem 但无法成功。我知道对于基于设计的登录，我需要传递用户电子邮件和密码。我需要传递任何其他参数吗？在浏览器上，我可以使用用户电子邮件和密码登录，但我可以通过编程方式获得`Unauthorized`访问权限。

虽然程序在，`titanium`但我认为这并不重要，重要的是您传递给 rails 服务器的参数。

我的控制台输出 1 没有`user`在钛中添加参数：

```
Started POST "/users/sign_in" for 192.168.0.187 at 2012-12-21 12:57:32 +0530
Processing by Devise::SessionsController#create as URL_ENCODED_FORM
  Parameters: {"password"=>"[FILTERED]", "email"=>"Gjpu "}
Completed 401 Unauthorized in 1ms 
```

`user`在钛中添加参数后，我的控制台输出 2 ：

```
Started POST "/users/sign_in" for 192.168.0.187 at 2012-12-21 13:03:19 +0530
Processing by Devise::SessionsController#create as URL_ENCODED_FORM
  Parameters: {"user"=>"{password=6f278077d841b3385e06bfa99acb374f, email=gjmwtp
gj}"}
Completed 401 Unauthorized in 1ms 
```

我的钛金属代码打到 Rails 服务器 -

```
loginBtn.addEventListener('click',function(e)
{
    if (username.value != '' && password.value != '')
    {
        loginReq.open("POST","http://192.168.0.187:3000/users/sign_in");

        var params = {user: { email: username.value , password: Ti.Utils.md5HexDigest(password.value)}};

        //var params=JSON.parse(myparams);
        loginReq.send(params);
    }
    else
    {
        alert("Email/Password are required");
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:36:26.980

我现在可以使用自定义设计会话控制器进行身份验证并在`create`方法中添加两行。

```
@user = User.find_by_email params[:email]
sign_in_and_redirect @user, :event => :authentication 
```

这个伎俩奏效了。谢谢！

# android - Android：启动画面分辨率

> ID：13986205
> 
> 赞同：3
> 
> 时间：2012-12-21T07:46:19.193
> 
> 标签：android, android-resources, android-splashscreen

我在这个主题上进行了很多搜索，但一切都是徒劳的。我正在为我的 Android 应用程序引起轰动，但问题是图像在不同的屏幕上失真。我已阅读 Google 的“支持多屏”文章，但仍然无法正常工作。请告诉我必须放在 ldpi、mdpi、hdpi 和 xdpi 文件夹下的图像大小？

我尝试了以下方法：替换了 ldpi、mdpi、hdpi、xhdpi 文件夹中的图像。如果无论如何我能够完美地为纵向模式设置图像，那么在横向模式下它会变得很奇怪。请帮帮我，伙计们。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T07:51:14.227

你有几个选择：

制作一个 9 补丁启动画面（使其部分可拉伸）。

不要拉伸您的图像（例如，使用 android:scaleType="fitCenter" 代替 android:scaleType="fitXY" 并在布局内居中 imageview。

使用多个图像视图制作更简单的初始屏幕布局，这将毫无问题地处理不同的分辨率。

编辑：

对于多个 imageview 选项，您将启动屏幕的一部分（例如中心徽标）放入实际布局中，启动应用程序。它看起来不错吗？好的，例如，将它的大小（以 px 为单位）和设备密度带到[这个](http://labs.skinkers.com/content/android_dp_px_calculator/)计算器，看看其他密度的大小是多少

例如，200 px 在你的 hdpi 设备上看起来不错，它应该是这样的：

```
ldpi    @ 133.33dp   = 100.00px

mdpi    @ 133.33dp  = 133.33px

hdpi    @ 133.33dp  = 200.00px // this one is your device

xhdpi   @ 133.33dp  = 266.67px 
```

编辑2：

老实说，没有人知道它是如何工作的。一些伏都教仪式可能会有所帮助。

# qt - 同一用户在多台设备上进行诺基亚 Qt 应用内购买测试

> ID：13986208
> 
> 赞同：1
> 
> 时间：2012-12-21T07:46:53.780
> 
> 标签：qt, resolve

我已经集成了诺基亚 OVI 商店应用内购买的 QT API，即 IAPClient。

IAPClient 的参考在[这里](http://www.developer.nokia.com/Resources/Library/Qt_IAP/_zip/GUID-532F510B-9EE3-4069-AD8D-3E225C47A446/class_i_a_p_client.html)

我可以使用用户凭据（my_username_to_OVI：my_password_to_OVI）在一台设备（诺基亚 E7）上购买并成功恢复它们到 OVI 商店。

是否可以使用 OVI 商店的相同凭据在另一台诺基亚设备上恢复相同的项目（我已经在一台诺基亚设备上购买）？

> 诺基亚客户服务已确认我们必须在不同设备上购买商品，即使我们使用相同的用户名：密码进入 OVI 商店。在我们为它们付款之前，这些物品将无法在不同的设备上恢复。

# sql - 日期/时间点/间隔的（关系）数据库性能

> ID：13986215
> 
> 赞同：8
> 
> 时间：2012-12-21T07:47:40.387
> 
> 标签：sql, performance, ms-access

所以我在 Access SQL 中做一个项目，它进展顺利。我学到了很多关于 Access 和 VBA 的知识，这个网站在这个过程中很有帮助。

现在我面临一个性能问题，由于我在这种 SQL 工作方面的经验很少，所以我来这里思考一下。

我有一个大约 100 个部分的约 20 个表关系数据库，这些部分代表路线的一部分。Access 数据库本质上是一张地图，我在上面绘制了几条可以动态着色的路线（通过线） - 颜色由特定问题确定并从数据库中计算出来。

这是一张更好地解释它的图片。您不能单击访问中的线条，因此按钮的颜色和宽度设置为与线条相同，并且可以单击以获取更多信息。 ![一个东西](../Images/d9eaa991a0d548470015b1add4cd63c8.png)

用户可以选择一个日期，它将根据提出的问题显示路线的进度。到目前为止，这些问题始终是二元的“是或否”（绿色或红色）。

我发现由于查询的复杂性，我几乎必须在启动时为每个查询准备一个临时数据库，否则无法顺利滚动日期。

所以无论如何这是我的具体问题：

路线的每个部分都可以在特定日期处于不同的阶段（想想施工）。从“阶段 0”到“完成”

将实施代表项目阶段的新行。所有部分大约有 8 个可能的阶段，这些阶段可能发生在不同的时间，而且 - 事情就是这样 - 每个部分的顺序不同，并不是所有阶段都发生在所有部分上。

我在数据库中拥有的只是每个阶段的开始日期，而不是结束日期。阶段的顺序几乎由开始日期的顺序决定。至少每个阶段每个部分只能发生一次，所以就是这样。正如你所看到的，对于这种以性能为中心的程序来说，这是一件糟糕的事情。

我确信它将涉及一个或多个临时数据库。我的想法：

1.  将所有日期聚合到新表的一行中。由于设置了阶段数，因此每个阶段都有列 - 如果需要，何时开始以及何时结束。现在需要一个循环遍历每个并检查用户日期是否属于哪个阶段。所以：“SectionID - phase1needed phase1start phase1end .....”
    优势：

    *   可以手动确认数据并以二级形式很好地显示
    *   它使数据库保持小
        缺点：
    *   实际的循环需要经过（在最坏的情况下）所有阶段才能找到正确的循环。
2.  计算一个新的数据库，它只是“IdSection - Date - Phase”，并计算每个部分的阶段和间隔中的每一天。
    优势：

    *   这将运行时计算保持为每个部分一个查询
    *   访问应该处理大量数据
        缺点：
    *   我无法手动检查我所做的是否对所有部分都正确
    *   启动时需要很长时间，就像真的很长一样
    *   该数据库中将需要很多条目

现在我问你更喜欢哪个，或者即使有不同的方法？我无法真正改变我拥有的数据点。

简而言之，我必须显示不同阶段的时间间隔，并且在数据库中我只有时间起点，没有完整的阶段顺序。

谢谢你的想法，在这类事情上的任何经验都会有所帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:22:47.467

如果我理解正确，您有一系列类似于表格的数据：

```
Section 1, Phase 7, Start Date = 11/07/2012
Section 1, Phase 2, Start Date = 12/14/2012
Section 1, Phase 3, Start Date = 12/28/2012
Section 2, Phase 1, Start Date = 11/04/2012
Section 2, Phase 9, Start Date = 12/30/2012
Section 3, Phase 4, Start Date = 11/19/2012
Section 3, Phase 5, Start Date = 12/06/2012
Section 3, Phase 3, Start Date = 12/11/2012 
```

您想回答“2012 年 12 月 15 日每个部分处于什么阶段？”之类的问题，对吗？

在这种情况下，答案应该类似于以下形式：

```
Section 1, Phase 2
Section 2, Phase 1
Section 3, Phase 3 
```

为此，我假设您有一个名为 SECTION_PHASES 的表，其中包含以下字段：

```
SECTION    Number
PHASE      Number
START_DATE Date/Time 
```

您需要做的是找出在您当前输入日期之前发生的每个部分的最大开始日期，因为这是在下一个阶段更改之前最近的活动阶段。完成此操作后，您可以将该信息重新加入主表，以确定该日期之后的阶段。

您需要进行一次查询 SECTION_MAX_DATES，然后在其 SQL 视图中包含以下代码：

```
SELECT [SECTION_PHASES].SECTION, Max([SECTION_PHASES].START_DATE) AS target_date
FROM SECTION_PHASES
WHERE [SECTION_PHASES].START_DATE<#12/15/2012#
GROUP BY [SECTION_PHASES].SECTION
ORDER BY [SECTION_PHASES].SECTION; 
```

保存该查询后，您可以将其作为子查询加入到原始表中。现在，进行另一个查询 SECTION_PHASE_AT_DATE ，其中包括您的原始表和上一个查询，然后在其 SQL 视图中输入以下代码：

```
SELECT SECTION_PHASES.SECTION, SECTION_PHASES.PHASE, SECTION_PHASES.START_DATE
FROM SECTION_MAX_DATES INNER JOIN SECTION_PHASES ON (SECTION_MAX_DATES.target_date=SECTION_PHASES.START_DATE) AND (SECTION_MAX_DATES.SECTION=SECTION_PHASES.SECTION)
ORDER BY SECTION_PHASES.SECTION; 
```

如果我正确理解您的问题，该查询将为您提供您所追求的结果。如果我正确理解您，给定阶段的新开始日期表示在新日期之前的任何阶段的结束，则无需计算结束日期。

您仍然需要解决一些边缘情况，例如如果某个部分在给定日期之前还没有注册阶段会发生什么。我还将让您弄清楚如何在两个查询中的第一个的 WHERE 子句中参数化日期，考虑到您已经取得的进展，这对您来说可能是微不足道的！但是，我认为这是您为解决问题的数据/计算部分而寻找的 SQL 结构。

# java - 一个 EJB bean 可以实现多个接口吗？

> ID：13986223
> 
> 赞同：7
> 
> 时间：2012-12-21T07:48:38.260
> 
> 标签：java, interface, javabeans, ejb-3.1

除了业务接口（@Local、@Remote）或无接口视图（@LocalBean）之外，一个 EJB bean 能否实现多个用户定义的接口？

例如定义两个没有注解的接口`UserInterface1`, `UserInterface2`。

这是否合法实施：

```
@Stateless
public class MyBean implements UserInterface1, UserInterface2 { ... 
```

然后我有另一个困惑：

```
@Stateless
public class MyBean implements Runnable { ...
//inside I won't try to manage thread
} 
```

这是合法还是非法，我发现 glassfish 支持这种情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T10:34:37.630

给定的示例是非法的，但仍然被相当多的实现（应用程序服务器）所接受。

David Blevins不久前在 EJB 邮件列表上启动了一个关于此[的线程。](http://java.net/projects/ejb-spec/lists/jsr345-experts/archive/2012-06/message/0)

EJB 3.2 将使该主题的规则更加清晰。请参阅[EJB 3.2 中的新增功能？- Java EE 7 快来了！](https://blogs.oracle.com/arungupta/entry/what_s_new_in_ejb)（查找部分*简化规则以定义 bean 的所有本地/远程视图*）

# android - 如何在android的textview中编辑多个单词

> ID：13986225
> 
> 赞同：0
> 
> 时间：2012-12-21T07:48:51.883
> 
> 标签：android, textview

我想从 textview 的文本中加粗多个单词。我在数组中有我想在 textview 的文本中加粗的单词。SpannableStringBuilder 如何做到这一点？

**我的数组：**

> string[] array = {"生活","幸福","悲伤","眼泪","微笑","笑声","情绪"};

**我的文本视图文本：**

> **生活**充满了**幸福**、**悲伤**、**泪水**、**微笑**、**欢笑**和其他**情绪**，但是当生活让你失望时，只要坚强起来，昂首挺胸，对生活中的一切充满信心。

我通过[链接](https://stackoverflow.com/questions/10828182/spannablestringbuilder-to-create-string-with-multiple-fonts-text-sizes-etc-examp)和其他但没有找到我想要的任何解决方案。

```
 TextView text = (TextView) findViewById(R.id.textView1);
    String[] list = new String[] { "Life","happiness","sadness","tears","smiles","laughter","emotions"};    

    String textData ="Life is filled with happiness, sadness, tears, smiles, laughter and other emotions but when life gets you down, just be strong about it and keep your head up high and have faith in all things in life";
    CharSequence cseq = "";
    for(int i = 0 ; i < list.length ; i++)
    {
          cseq = setSpanBetweenTokens(textData, list[i] , new StyleSpan(Typeface.BOLD_ITALIC));
    }
    text.setText(cseq.toString()); 

public static CharSequence setSpanBetweenTokens(CharSequence text,
            String token, CharacterStyle... cs)
        {
            // Start and end refer to the points where the span will apply
            int tokenLen = token.length();
            int start = text.toString().indexOf(token) + tokenLen;
            int end = text.toString().indexOf(token, start);

            if (start > -1 && end > -1)
            {
                // Copy the spannable string to a mutable spannable string
                SpannableStringBuilder ssb = new SpannableStringBuilder(text);
                for (CharacterStyle c : cs)
                    ssb.setSpan(c, start, end, 0);

                // Delete the tokens before and after the span
                ssb.delete(end, end + tokenLen);
                ssb.delete(start - tokenLen, start);

                text = ssb;
            }

            return text;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T07:56:21.893

尝试使用 Html.fromHtml：

```
string[] array = {"Life","happiness","sadness",
"tears","smiles","laughter","emotions"};

String strtemp="";
    for(int i=0;i<array.length-2;i++){
     if(i<array.length-3)
       strtemp+="<b>"+array[i]+",<b/>";
      else{
       strtemp+="<b>"+array[i]+"<b/>";
     }
    }
    txtview=(TextView)findViewById(R.id.selection);
    txtview.setText(Html.fromHtml("YOUR_TEXT HERE"+strtemp+
             "YOUR_TEXT HERE <b>"+array[array.length-1]
                     +"</b> YOUR_TEXT HERE")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T08:02:36.527

如果我正确理解了您的问题，那么您有一个`TextView`包含一些动态文本的内容，并且您想将其中的某些单词加粗。尝试这样的事情：

```
Spannable sb = new SpannableString(textFromTextView);
for(int i = 0 ; i < array.length ; i++) {
    sb.setSpan(new StyleSpan(android.graphics.Typeface.BOLD),
        textFromTextView.indexOf(array[i]), 
        array[i].length, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
} 
```

然后以 sb 作为参数调用 textview 的 setText() 函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T07:54:43.257

请使用以下代码：

```
 textView.setText(Html.fromHtml("<b>"+array[0]+"</b>"+ "is filled with "+"<b>"+array[1]+"</b>"+","+"<b>"+array[2]+"</b>"+","+"<b>"+array[3]+"</b>"+","+"<b>"+array[4]+"</b>"+","+"<b>"+array[5]+"</b>"+"and other"+"<b>"+array[6]+"</b>"+"but when life gets you down, just be strong about it and keep your head up high and have faith in all things in life.")); 
```

# c# - SELECT 语句中的 Linq 静态方法

> ID：13986229
> 
> 赞同：6
> 
> 时间：2012-12-21T07:49:23.603
> 
> 标签：c#, entity-framework, linq-to-entities, linq-to-objects

我正在与 EF 合作并有一些疑问。这是我的代码

```
IEnumerable<Customer> customers = from c in context.Customers 
    select new Customer
    {
        ID = c.ID,
        Name = c.Name,
        LastName = c.LastName,
        DepID = c.DepID,
        Editable = SomeStruct.Check(c.DepID)
    }

public struct SomeStruct
{
    public static bool Check(int depID)
    {
        //Here I have some logic
    }
} 
```

它工作正常。但是，如果我声明`SomeStruct`它`class`会失败。

我的问题是：

1.  为什么会发生？
2.  使用静态函数会强制执行查询吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T12:01:09.777

在您的代码方法`SomeStruct.Check(c.DepID)`中应该转换为 SQL 查询。这描述了类/结构等的行为。这是由于实体框架在类和结构中使用此类方法的不同工作。但是你可以在客户端上做这个检查：

```
IEnumerable<Customer> customers = from c in context.Customers 
    select new
    {
        ID = c.ID,
        Name = c.Name,
        LastName = c.LastName,
        DepID = c.DepID
    }
    .AsEnumerable()
    .Select(d => new Customer
    {
        ID = c.ID,
        Name = c.Name,
        LastName = c.LastName,
        DepID = c.DepID,
        Editable = SomeStruct.Check(c.DepID)
    }); 
```

或者您可以将`Editable`属性设置为只读属性：

```
public class Customer
{
    public int ID { get; set; }
    public string Name { get; set; }
    public string LastName { get; set; }
    public Guid DepID { get; set; }
    public bool Editable { get { return SomeStruct.Check(DepID); } }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T19:23:47.773

很容易重现您的代码无法与 linq to 实体一起使用。*任何*不能翻译成 sql 的东西都会抛出运行时异常。在你的情况下：

> NotSupportedException：LINQ to Entities 无法识别方法“Boolean Check(Int32)”方法，并且该方法无法转换为存储表达式。

如果你让它在某个时候运行，那可能没有关系`struct`或`class`差异，请参阅[静态结构方法和静态类方法之间有什么区别？](https://stackoverflow.com/questions/13372194/whats-the-difference-between-a-static-struct-method-and-a-static-class-method)

您可能同时更改了其他内容，例如`ToList()`在`select`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:19:09.327

假设这是一个运行时问题，在您描述的许多情况下，这是一个参考问题。EF 的 linq 提供程序支持调用在类中声明的静态方法（静态或非静态）。

1.  我建议您将结构更改为类并使其成为静态以帮助您调查问题。

2.  不，在您调用第一次迭代或客户之前不会执行任何操作。

希望这可以帮助

# javascript - JQuery Ajax在url中添加哈希

> ID：13986231
> 
> 赞同：11
> 
> 时间：2012-12-21T07:49:27.903
> 
> 标签：javascript, jquery, ajax, url, struts2

我这里有这个使用 struts2-jquery 插件的代码

```
<h4>Choose A task</h4>
    <ul>
        <s:url value="views/ajaxvalidation.jsp" var="ajaxvalidation" >
            <s:param name="menuId" value="1"/>
        </s:url>
        <li><sj:a targets="resultContent" href="%{ajaxvalidation}">Ajax Validation</sj:a></li>
    </ul> 
```

当我点击它的内容时，url 变成了这样的东西，url 没有任何变化。它仍然保持不变，我想要的是当我单击链接时会发生这样的事情`www.myapp.com/#ajaxvalidation`。当我运行代码锚标记被翻译成这样的东西

```
<a id="anchor_1365013162" href="javascript:void(0)">Ajax Validation</a> 
```

有了这个，我将如何在 url 中添加一个哈希？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-21T08:28:06.263

这是一个工作示例（不考虑 Struts2）：

```
<html>
<body>
<a id="123" href="">Add Hash</a>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
$(document).ready(function() {
    $("a").click(function(e) {
        window.location.hash = $(this).attr("id");
        e.preventDefault();
    });
});
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-19T14:59:49.243

如果您不想跳转页面，则可以通过在现代浏览器上使用历史 API 并回退旧浏览器来解决此问题：

```
if(history.pushState) {
    history.pushState(null, null, '#myhash');
} else {
    location.hash = '#myhash';
} 
```

[归功于 Lea](http://lea.verou.me/2011/05/change-url-hash-without-page-jump/) Verou

# php - Yii 登录前保存表单

> ID：13986237
> 
> 赞同：1
> 
> 时间：2012-12-21T07:50:01.030
> 
> 标签：php, session, login, yii

我有一个用户可以发表评论的页面。为了提高用户参与度，我想让他们输入他们的评论，即使他们没有登录/注册，并且只有在他们提交后才登录。

实现这一目标的最佳/标准方法是什么？

目前，当访问一个只登录的页面时，我使用的是 Yii 的`loginRequired`方法`Redirects the user browser to the login page. Before the redirection, the current URL (if it's not an AJAX url) will be kept in {@link returnUrl} so that the user browser may be redirected back to the current page after successful login.`

然而，这只会保存 URL，而不是 POST 数据。

顺便说一句，我正在使用 Yii-Rights。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:52:33.983

我还没有听说过内置的方法来做到这一点。但是，当您单击链接时，我假设您点击了某种评论保存 URL，那么这是重定向到登录页面吗？

你会想要首先实际点击操作函数，所以它必须允许访客访问该函数，然后手动执行重定向，而不是让 Yii 使用访问规则等进行。

一旦进入您自己的功能，您将希望以某种方式将该数据与该访问者联系起来，通常的方式是，`$_SESSION`但当他们登录时会重新生成。您的另一个选择是 cookie 数据。

您可以在一个或两个 cookie 中设置评论数据，使用 cookie 保存功能的返回 URL 重定向到登录页面，甚至可以使用一个标志告诉它签入 COOKIE 而不是 POST。并从那里继续。

希望有帮助，还是我完全错过了重点？

**测试后更新**
OK，似乎 SESSION 数据在会话 ID 重新生成后仍然存在。所以你可以简单地存储在会话中。

我喜欢 Ian Atkins 方法，但它带来了对垃圾邮件机器人的担忧，您必须使用某种 Captcha 或其他方法来对抗。然而，如果您将其存储在会话中，则在用户登录或注册之前，实际上不会将任何内容放入数据库中。

这完全取决于您，取决于您的网站有多大（对垃圾邮件机器人有吸引力）以及在验证用户之前显示多条评论需要多大的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:03:05.050

为每个未登录的访问者创建一个 GUID。使用 GUID 作为临时用户 ID 来保存评论[。](http://en.wikipedia.org/wiki/Globally_unique_identifier)`$_SESSION`我可能会通过 AJAX 进行保存，并在回调中将它们发送到登录/注册页面。使用 中的 GUID`$_SESSION`将登录/注册之前的评论转换为具有新/现有用户 ID 的完全限定评论。

在显示方面，您可以轻松地将具有 ID 的用户和从未注册的用户的评论并排显示。它使您的“用户”和“评论”表更加复杂，但我认为这是完全可行的。

# netbeans - 使用 Netbeans 时如何在（隐式）列表中添加图标？

> ID：13986238
> 
> 赞同：1
> 
> 时间：2012-12-21T07:50:02.417
> 
> 标签：netbeans, java-me, midp, lcdui

我正在使用 NetBeans 开发 J2ME 应用程序；我使用“列表”控件创建了一个菜单列表，**列表类型为 IMPLICIT**。

在该列表中有一个名为 Map 的菜单。对于这个地图菜单，我想添加一个图标。我试图这样做，代码是：

```
Image Mainlistmap;
try
{
        Mainlistmap = Image.createImage("/src/map.png");
}
catch(Exception ex)
{
        System.out.println(ex.getMessage());
} 
```

我已将整个项目存储在以下目录中 - `E:\MScIT Part 2\MobileLocationReminder`.

`MobileLocationReminder`文件夹是项目文件夹，包含项目的所有东西，如 src 文件夹、dist 文件夹、build 文件夹、nbproject 文件夹、build.xml 文件

我已将图标存储在 src 文件夹中，图标名称为 map.png，大小为 30X33。

我想在列表中的地图菜单上显示一个 map.png 图标，但是在完成所有这些事情之后，它并没有给我想要的结果。

我在哪里存储图像图标以正确访问我的项目以及应该提供什么路径来访问项目中的图像？

# javascript - 在循环中更改多个类名

> ID：13986242
> 
> 赞同：0
> 
> 时间：2012-12-21T07:50:32.760
> 
> 标签：javascript, loops, z-index, addclass, removeclass

我昨天发布了我正在处理的这个项目，并设法找到了一种方法来获得我需要的大部分预期效果。我可能会这样做很长的路要走，但这里有我所拥有的和我需要的。

这被设置为四个框，每个框都从不同的 z-index 级别（40、60、80 和 100）开始，#layer1 位于顶部。单击顶部框时，它会向后移动，而其他三个则向前移动。当单击其他三个框之一时，它会向前移动，而它前面的框会被推回。我有 .layer1、.layer2、.layer3 和 .layer4 函数运行它，它可以工作，但只有一次。之后，事情开始变得棘手。我尝试在 changePos 函数中按层 id 查找每个框的当前 z-index 值，然后创建一个数组来保存这些值，然后创建一个循环以将它们与我现有的索引值相对应，但是它不是正确的。

```
 <script>
    $(function() {

       function changePos(){

                                    var l1Index = $("#layer1").css('zIndex');
                                    var l2Index = $("#layer2").css('zIndex');
                                    var l3Index = $("#layer3").css('zIndex');
                                    var l4Index = $("#layer4").css('zIndex');

                                    var i;
                                    var layerZindex = new Array();
                                    layerZindex[1] = l1Index;
                                    layerZindex[2] = l2Index;
                                    layerZindex[3] = l3Index;
                                    layerZindex[4] = l4Index;

                                    for (i=1;i<4;i++)
                                        {
                                        if(layerZindex[i] == 40){
                                            alert( "class layer" + i + "= 40, is now #layer4");
                                            $("#layer4").removeClass();
                                            $("#layer4").addClass("layer" + [i] + " zindex" + [i]);
                                            }
                                        else if(layerZindex[i] == 60){
                                            alert( "layer" + i + "= 60, is now #layer3");
                                            $("#layer3").removeClass();
                                            $("#layer3").addClass("layer" + [i] + " zindex" + [i]);
                                            }
                                        else if(layerZindex[i] == 80){
                                            alert( "layer" + i + "= 80, is now #layer2");
                                            $("#layer2").removeClass();
                                            $("#layer2").addClass("layer" + [i] + " zindex" + [i]);
                                            }
                                        else if(layerZindex[i] == 100){
                                            alert( "layer" + i + "= 100, is now #layer1");
                                            $("#layer1").removeClass();
                                            $("#layer1").addClass("layer" + [i] + " zindex" + [i]);
                                            }
                                        }
                                    }

        $(".layer1").click(function() {

            $(".layer1").animate({
                opacity: "0.6",
                left: "-120px",
                top: "-90px",
                zIndex: "40"
            }, 850);
            $(".layer2").animate({
                opacity: "1",
                left: "40px",
                top: "30px",
                zIndex: "100"
            }, 550);
            $(".layer3").animate({
                opacity: "0.6",
                left: "40px",
                top: "30px",
                zIndex: "80"
            }, 700);
            $(".layer4").animate({
                opacity: "0.6",
                left: "40px",
                top: "30px",
                zIndex: "60"
            }, 850);
            $("#siteDesc1").animate({
                opacity: "0"
            }, 600);
            $("#siteDesc2").animate({
                opacity: "1"
            }, 600);
            changePos();
        });

        $(".layer2").click(function() {
            $(".layer2").animate({
                opacity: "1",
                left: "40px",
                top: "30px",
                zIndex: "100"
            }, 400);
            $(".layer1").animate({
                opacity: "0.6",
                left: "-40px",
                top: "-30px",
                zIndex: "80"
            }, 550);
            $("Descriptions").animate({
                opacity: "0"
            }, 600);
            $("#siteDesc1").animate({
                opacity: "0"
            }, 600);
            $("#siteDesc2").animate({
                opacity: "1"
            }, 600);
            changePos();
        });

        $(".layer3").click(function() {
            $(".layer3").animate({
                opacity: "1",
                left: "80px",
                top: "60px",
                zIndex: "100"
            }, 400);
            $(".layer1").animate({
                opacity: "0.6",
                left: "-40px",
                top: "-30px",
                zIndex: "80"
            }, 400);
            $(".layer2").animate({
                opacity: "0.6",
                left: "-40px",
                top: "-30px",
                zIndex: "60"
            }, 550);
            $("Descriptions").animate({
                opacity: "0"
            }, 600);
            $("#siteDesc1").animate({
                opacity: "0"
            }, 600);
            $("#siteDesc3").animate({
                opacity: "1"
            }, 600);
            changePos();
        });

        $(".layer4").click(function() {
            $(".layer4").animate({
                opacity: "1",
                left: "120px",
                top: "90px",
                zIndex: "100"
            }, 400);
            $(".layer1").animate({
                opacity: "0.6",
                left: "-40px",
                top: "-30px",
                zIndex: "80"
            }, 400);
            $(".layer2").animate({
                opacity: "0.6",
                left: "-40px",
                top: "-30px",
                zIndex: "60"
            }, 550);
            $(".layer3").animate({
                opacity: "0.6",
                left: "-40px",
                top: "-30px",
                zIndex: "40"
            }, 700);
            $("Descriptions").animate({
                opacity: "0"
            }, 600);
            $("#siteDesc1").animate({
                opacity: "0"
            }, 600);
            $("#siteDesc4").animate({
                opacity: "1"
            }, 600);
            changePos();
        });

    });​
        </script>

Here is my html

    <div id="sites">
        <div id="layer1" class="layer1 zindex1">
        </div>
        <div id="layer2" class="layer2 zindex2">
        </div>      
        <div id="layer3" class="layer3 zindex3">
        </div>      
        <div id="layer4" class="layer4 zindex4">
        </div>
    </div> 
```

在 css 中，#layer id 当前驱动颜色，layer 类驱动大小、不透明度和定位类型（绝对），zindex 类使用边距驱动位置。

我的问题是我需要在一个循环上运行它，其中层类根据函数运行后以最高 z-index 结束的框重新发布。

另外，关于是否有更有效的方法来运行这种效果有什么意见吗？

: 并在这里更新我的进度，它是如此接近。我还没有弄清楚是什么导致了问题，但行为似乎执行了原始转换，没问题，但是当我运行 changePos 时被挂断了。它执行指定给顶部新框的功能，而不是重命名它。再次单击时，它会执行 .layer1 框的功能，然后在两者之间交替。changePos 函数似乎确实在重命名类，但在某个地方它变得混乱了。也许是 layerZindex 数组？我正在研究下一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:17:24.087

通过外部资源，我得到了一些帮助。这就是我所拥有的。

```
function changePos() {
        // References to the z-index levels, this makes our code shorter and more efficient
        var levels = {40 : 4, 60 : 3, 80 : 2, 100 : 1};
        var i = 1;
        $('[id^=layer]').each(function() {
            // Get the element z-index level
            var zIndexLevel = $(this).css('zIndex');

            // Set the respective element class
            if (levels[zIndexLevel]) {
                $('#layer' + i).attr('class', 'layer' + levels[zIndexLevel]);
                $('#SiteDescriptions' + i).animate({opacity: "1"}, 500);

                $('#SiteDescriptions' + !i).animate({opacity: "0"}, 500);
            //alert( levels[zIndexLevel] + ":" + zIndexLevel);
            i++;
            }
        }); 
```

希望这对可能有同样问题的人有所帮助

# regex - 正则表达式 90% 的字符串

> ID：13986243
> 
> 赞同：0
> 
> 时间：2012-12-21T07:50:40.717
> 
> 标签：regex, string, photoshop

我不确定这是否可能，如果这听起来有点模糊，很抱歉。在 JavaScript 中，我将字符串与 Photoshop 中文本层中的字符串（文本内容）进行匹配。这对短字符串来说很好。但是，对于较长的字符串，由于缺少句号或具有前导空格或包含换行符或缺少逗号（由于定界），它们可能不匹配。

我想更好的方法是完全匹配第一个，比如 16 或 32 个字符，然后保留它。但我想知道你是否可以在百分位的基础上匹配字符串；并接受超过 90% 的（宽误差，我知道，但字符串不太可能相似）我将如何处理？有没有像模糊正则表达式这样的东西？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T08:04:49.320

看来您需要的不是完全匹配，而是字符串相似度的度量。

有这样的措施。它被称为[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)。我用谷歌搜索，发现了几个 JavaScript 实现。您可以考虑改用这种方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T08:01:34.607

您可以通过替换删除所有空白、点和其他不相关的内容，并尝试将剩余文本与您的正则表达式匹配。这有点模糊:) 因为你丢失了一些令牌，但仍然会给你正确的结果。例如，不要搜索“XXX YYY”，而是搜索“XXXYYY”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T13:20:43.423

有一些近似的正则表达式实现，例如[agrep](http://en.wikipedia.org/wiki/Agrep)虽然从您的问题中不清楚将它用于您的特定问题是否可行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-05T18:31:40.127

您可以使用 php 轻松实现此目的：

```
$var_1 = 'PHP IS GREAT'; 
$var_2 = 'WITH MYSQL'; 

similar_text($var_1, $var_2, $percent); 

echo $percent; 
// 27.272727272727 
```

# android - 使用 ProGuard 混淆代码不起作用

> ID：13986244
> 
> 赞同：3
> 
> 时间：2012-12-21T07:50:44.600
> 
> 标签：android, obfuscation, proguard

我试图混淆我的项目。当我使用 eclipse 导出时，出现以下错误：

```
 Proguard returned with error code 1\. See console
 Warning: com.nineoldandroids.view.ViewHelper$Honeycomb: can't find referenced method 'void setScrollX(int)' in class android.view.View
 Warning: com.nineoldandroids.view.ViewHelper$Honeycomb: can't find referenced method 'void setScrollY(int)' in class android.view.View
 Warning: com.nineoldandroids.view.ViewPropertyAnimatorICS: can't find referenced method 'long getDuration()' in class android.view.ViewPropertyAnimator
 Warning: com.nineoldandroids.view.ViewPropertyAnimatorICS: can't find referenced method 'android.view.ViewPropertyAnimator setStartDelay(long)' in class android.view.ViewPropertyAnimator
 Warning: com.nineoldandroids.view.ViewPropertyAnimatorICS: can't find referenced method 'long getStartDelay()' in class android.view.ViewPropertyAnimator
 Warning: com.nineoldandroids.view.ViewPropertyAnimatorICS: can't find referenced method 'void start()' in class android.view.ViewPropertyAnimator
 Warning: com.nineoldandroids.view.ViewPropertyAnimatorICS: can't find referenced method 'void cancel()' in class android.view.ViewPropertyAnimator
 Warning: com.sileria.android.bc.IceCream: can't find referenced method 'void release()' in class android.view.Surface
 Warning: com.sileria.android.view.FriendAdapterView: can't find referenced method 'boolean onRequestSendAccessibilityEvent(android.view.View,android.view.accessibility.AccessibilityEvent)' in class android.widget.AdapterView
 Warning: com.sileria.android.view.FriendAdapterView: can't find referenced method 'void appendRecord(android.view.accessibility.AccessibilityRecord)' in class android.view.accessibility.AccessibilityEvent
 Warning: com.sileria.android.view.FriendAdapterView: can't find referenced method 'void onInitializeAccessibilityNodeInfo(android.view.accessibility.AccessibilityNodeInfo)' in class android.widget.AdapterView
 Warning: com.sileria.android.view.FriendAdapterView: can't find referenced class android.view.accessibility.AccessibilityNodeInfo
 Warning: com.sileria.android.view.FriendAdapterView: can't find referenced class android.view.accessibility.AccessibilityNodeInfo
 Warning: com.sileria.android.view.FriendAdapterView: can't find referenced method 'void onInitializeAccessibilityEvent(android.view.accessibility.AccessibilityEvent)' in class android.widget.AdapterView
 Warning: com.sileria.android.view.FriendAdapterView: can't find referenced method 'void setScrollable(boolean)' in class android.view.accessibility.AccessibilityEvent
 Warning: com.sileria.android.view.FriendAdapterView: can't find referenced method 'void setToIndex(int)' in class android.view.accessibility.AccessibilityEvent
 Warning: com.sileria.android.view.FriendAdapterView: can't find referenced class android.view.accessibility.AccessibilityNodeInfo
 Warning: com.sileria.android.view.FriendAdapterView: can't find referenced class android.view.accessibility.AccessibilityNodeInfo
       You should check if you need to specify additional program jars.
 Warning: there were 4 unresolved references to classes or interfaces.
          You may need to specify additional library jars (using '-libraryjars').
 Warning: there were 14 unresolved references to program class members.
          Your input classes appear to be inconsistent.
          You may need to recompile them and try again.
          Alternatively, you may have to specify the option 
          '-dontskipnonpubliclibraryclassmembers'.
 java.io.IOException: Please correct the above warnings first.
    at proguard.Initializer.execute(Initializer.java:321)
    at proguard.ProGuard.initialize(ProGuard.java:211)
    at proguard.ProGuard.execute(ProGuard.java:86)
    at proguard.ProGuard.main(ProGuard.java:492) 
```

我在其中添加了以下代码，`proguard-project.txt`但它仍然无法正常工作：

```
-dontwarn org.apache.commons.codec.binary.**

-keep class com.commonsware.cwac.sacklist.** { *; } 
-keep interface com.commonsware.cwac.sacklist.app.** { *; } 
-keep class com.nineoldandroids.view.** { *; } 
-keep interface com.nineoldandroids.view.** { *; } 

-keep class com.sileria.android.** { *; } 
-keep interface com.sileria.android.** { *; } 

-keepattributes *Annotation* 
```

知道我做错了什么吗？以及添加什么正确的代码才能`proguard-project.txt`使其工作？

# objective-c - 带有“正在加载”文本的活动指示器周围的圆角框

> ID：13986248
> 
> 赞同：3
> 
> 时间：2012-12-21T07:51:18.717
> 
> 标签：objective-c, ios, uiviewcontroller, uiactivityindicatorview

我知道如何制作一个简单的方形背景的活动指示器，但根本没有填充，我不知道如何让“加载”一词显示为这样。

![在此处输入图像描述](../Images/8bffc8796c5c2be934c3da07e3010f6a.png)

有谁知道这是如何实现的？我在网上查过，似乎找不到任何东西。谢谢你们！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T07:54:36.030

如果你想使用一些自定义组件，你可以使用[MBProgressHUD](http://www.cocoacontrols.com/platforms/ios/controls/mbprogresshud)。这是它的[源代码](https://github.com/matej/MBProgressHUD)。

![在此处输入图像描述](../Images/4b9e5cfdca074f77d27b281a21a2a994.png)

如果您想自己制作，您可以查看他们的源代码以了解他们是如何实现的，您可以对您的代码采用类似的方法。基本上，这将涉及在方法`UIView`中对活动指示器和标签进行子类化和绘制。`drawRect`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T07:56:11.627

黑色背景是`UIImageView`. 所以在你想要显示这个的 viewController 中：

```
[self.view UIImageView]; //Set proper frame for the UIImageView so that it comes in the centre. 
```

在该图像视图上，添加一个活动指示器和一个标有“正在加载”的标签。

我想这会给你你想要的。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T07:56:54.383

```
 - (void)drawRect:(CGRect)rect {

CGContextRef context = UIGraphicsGetCurrentContext();

switch (self.maskType) {

    case SVProgressHUDMaskTypeBlack: {
        [[UIColor colorWithWhite:0 alpha:0.5] set];
        CGContextFillRect(context, self.bounds);
        break;
    }

    case SVProgressHUDMaskTypeGradient: {

        size_t          locationsCount = 2;
        CGFloat         locations[2]   = {0.0f, 1.0f};
        CGFloat         colors[8]      = {0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.75f};
        CGColorSpaceRef colorSpace     = CGColorSpaceCreateDeviceRGB();
        CGGradientRef   gradient       = CGGradientCreateWithColorComponents(colorSpace, colors, locations, locationsCount);
        CGColorSpaceRelease(colorSpace);

        CGPoint center = CGPointMake(self.bounds.size.width / 2, self.bounds.size.height    / 2);
        float   radius = MIN(self.bounds.size.width, self.bounds.size.height) ;
        CGContextDrawRadialGradient(context, gradient, center, 0, center, radius, kCGGradientDrawsAfterEndLocation);
        CGGradientRelease(gradient);

        break;
      }
   }
 }
+ (void)showWithStatus:(NSString *)status {
[SVProgressHUD showWithStatus:status   networkIndicator:SVProgressHUDShowNetworkIndicator];
}

  + (void)showInView:(UIView *)view status:(NSString *)string {

 [SVProgressHUD showWithStatus:string maskType:SVProgressHUDMaskTypeNone    networkIndicator:SVProgressHUDShowNetworkIndicator]; 
```

}

```
 - (void)showWithStatus:(NSString *)string maskType:(SVProgressHUDMaskType)hudMaskType   networkIndicator:(BOOL)show {

self.fadeOutTimer = nil;

if (self.showNetworkIndicator)
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

self.showNetworkIndicator = show;

if (self.showNetworkIndicator)
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

self.imageView.hidden = YES;
self.maskType         = hudMaskType;

[self setStatus:string];
[self.spinnerView startAnimating];

if (self.maskType != SVProgressHUDMaskTypeNone) {
    self.overlayWindow.userInteractionEnabled = YES;
} else {
    self.overlayWindow.userInteractionEnabled = NO;
}

[self.overlayWindow makeKeyAndVisible];
[self positionHUD:nil];

if (self.alpha != 1) {
    [self registerNotifications];
    self.hudView.transform = CGAffineTransformScale(self.hudView.transform, 1.3, 1.3);

    [UIView animateWithDuration:0.15
                          delay:0
                        options:UIViewAnimationOptionAllowUserInteraction | UIViewAnimationCurveEaseOut | UIViewAnimationOptionBeginFromCurrentState
                     animations:^{
                         self.hudView.transform = CGAffineTransformScale(self.hudView.transform, 1 / 1.3, 1 / 1.3);
                         self.alpha             = 1;
                     }
                     completion:NULL];
}

[self setNeedsDisplay]; 
```

}

# php - PHP：使用 getElementbyId 从 javascript 中获取值

> ID：13986260
> 
> 赞同：-2
> 
> 时间：2012-12-21T07:52:20.170
> 
> 标签：php, javascript

我会通过使用 getelementbyID 到 PHP 变量来获取组合框的值，以及这样的代码

```
<select name="PROPINSI" onchange="document.getElementById('KOTAA').value = this.value" >
    <option value="a">a</option>
    <option value="b">b</option>            
 </select>

<select name="KOTA" id="KOTAA">
     <?php
         $propinsi = ; //in this variable, I want take this value

         $sqll="SELECT kota FROM master_propinsi WHERE propinsi = '$propinsi'";
                   $hasill= mysql_query($sqll);

                    while($dataa = mysql_fetch_array($hasill))
                    {            
                      echo "<option value='$dataa[kota]'>$dataa[kota]</option>";             
                    }

    ?>
 </select> 
```

有人能帮我吗？

我真的很感谢你的回答谢谢

如何从 ID="KOTAA" 的组合框中获取值到变量 $propinsi

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T07:55:17.357

您不能将变量值从当前页面 javascript 传递到当前页面 PHP 代码... PHP 代码在服务器端运行，它对客户端发生的事情一无所知。

您需要使用另一种机制将变量从 html-form 传递给 PHP 代码，例如在 GET 或 POST 方法上提交表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T07:57:19.290

您不能将 javascript 代码放入 PHP 中。虽然，有一个替代方案：[Ajax](http://www.w3schools.com/ajax/ajax_xmlhttprequest_create.asp)

# javascript - 刷新页面，无需重新发送 POST 数据（ASP.NET）

> ID：13986263
> 
> 赞同：8
> 
> 时间：2012-12-21T07:52:23.277
> 
> 标签：javascript, asp.net, postback

如何在不重新发送 POST 数据的情况下刷新和重新加载页面？

我已经尝试过`location.reload()`在 Chrome 上工作得非常好（这是开发时的测试环境）。但是 IE 和 Firefox 在 JS 中进入了无限循环——重新发布大量垃圾/重复数据。

注意：但是，我只想刷新页面以清除所有表单内容。我还在提交后注册了一个启动脚本，它将显示数据已成功添加的警报消息。

帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-21T07:56:00.520

尝试这个：

```
window.location.href = window.location.href; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-21T07:55:20.380

```
location.href = location.href + '?' + Math.random(); 
```

这应该有效。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-21T07:57:03.073

在您的代码中添加：

```
Response.Redirect(Request.RawUrl) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-21T07:57:07.723

如果您只想清除表单，为什么不：

```
<input type="reset" value="Clear Fields"> 
```

你也可以使用：

```
document.getElementById('<%=form1.ClientID%>').reset(); 
```

除非您还需要做其他事情，否则重新加载页面似乎是一种浪费。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-04T19:33:12.913

以下将解决您的问题：

```
Server.Transfer(Request.RawUrl); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-05-04T19:22:15.570

添加以下内容：

`Server.Transfer(Request.RawUrl);`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-10T20:37:09.350

我也尝试过重新加载，并且 reload(true) 都没有完全按照我的意愿做。

我已经看到位置对象有其他方法（而不是重新加载），因为我想在“get”中请求页面，我刚刚做了：

```
location.assign(window.location); 
```

到目前为止似乎正在做我想做的事，重新加载同一页面而不再次提交值。我的用例是会话过期时对服务器的 ajax 调用。我显示一条错误消息，指出会话丢失，然后我希望重新加载页面。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-04T19:52:43.870

使用`location.reload(true)`. 这个“硬”重新加载页面..

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-29T08:22:09.583

简单的方法：

```
history.replaceState(null, document.title, location.href) 
```

# android - Android 开发者控制台 310 eroor

> ID：13986269
> 
> 赞同：1
> 
> 时间：2012-12-21T07:52:56.177
> 
> 标签：android

当我尝试登录我的开发者控制台时，我收到以下错误。

> Eroare 310 (net::ERR_TOO_MANY_REDIRECTS)：Au fost prea multe redirecționări。（错误 310 (net::ERR_TOO_MANY_REDIRECTS)：重定向太多。）

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:22:52.173

我给谷歌发了一封电子邮件，他们帮助了我。如果您有同样的问题，请使用此链接[https://play.google.com/apps/publish/Home?switch_back=1](https://play.google.com/apps/publish/Home?switch_back=1)。

# php - 在您的网站中嵌入谷歌分析统计数据？

> ID：13986272
> 
> 赞同：0
> 
> 时间：2012-12-21T07:53:07.080
> 
> 标签：php, yii, google-analytics

我想在我网站的“统计”部分显示每小时和每日点击量的实际统计数据。

1.  有没有办法整合这个？
2.  我还能以某种方式整合显示网站上当前活跃用户的“实时统计”吗？
3.  将这个主题设置为适合我的其他统计图表怎么样？

注意：我不介意是否只是显示 iframe，但我找不到要查找的内容才能执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:57:19.960

您可以在此处找到所有信息： [https ://developers.google.com/analytics/](https://developers.google.com/analytics/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:00:27.663

您可以使用数据库或文件来保存所有页面访问并计算行数。看一个活生生的[例子](http://serve-licson.net23.net/stats.php)。我植入了这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:48:00.847

我最终这样做了：

```
$service = Yii::app()->JGoogleAPI->getService('Analytics');

$optParams = array(
 'metrics' => 'ga:visits',
 'max-results' => '1'
);

$gaData = 
  $service->data_ga->get( 
    'ga:66955412',
    $back,
    $back,
    'ga:visits',
    $optParams
  );

print $gaData->rows[0][0]; 
```

# c# - 需要一个函数来返回我可以调用方法的多种类型的游戏对象

> ID：13986280
> 
> 赞同：1
> 
> 时间：2012-12-21T07:54:42.203
> 
> 标签：c#, unity3d

我想让一个函数返回一个通用的游戏对象，然后我可以调用一个方法。这行不通。

我的游戏世界中有不同的对象。我想要一个可以调用的函数，它将返回在给定位置找到的对象。然后，检查找到什么类型的对象。我的每个对象都有一个返回对象类型的 GetObjectType 方法。

我非常感谢您可以发送给我的任何帮助。感谢您的关注。

```
GameObject spotObjectLocation1;

spotObjectLocation1 = GetObjectAtLocation(player.transform.position 
                                          + checkDirection);

// THIS IS WHAT I WANT TO DO THAT DOESN'T WORK
if (spotObjectLocation1.GetObjectType() == "box"){  }

GameObject GetObjectAtLocation(Vector3 location)
{
    GameObject[] objects = GameObject.FindGameObjectsWithTag("boxes");

    for (int i = 0; i < objects.Length; i++)
    {
        if (objects[i].transform.position.x == location.x 
            && objects[i].transform.position.z == location.z)
        {
            return objects[i];
        }
    }

    GameObject[] objects = GameObject.FindGameObjectsWithTag("blocks");

    for (int i = 0; i < objects.Length; i++)
    {
        if (objects[i].transform.position.x == location.x 
            && objects[i].transform.position.z == location.z)
        {
            return objects[i];
        }
    }
}

public class ObjectBox : MonoBehaviour {    
    public string GetObjectType()
    {
        return "box";   
    }
}

public class ObjectBlock : MonoBehaviour {  
    public string GetObjectType()
    {
        return "block"; 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:15:19.213

究竟是什么行不通？

无论如何，使用适当的继承树和“as”运算符会更好。例如，让您的所有盒子对象都继承自一个 Box 类（如果有多个盒子对象）：

```
public class Box : GameObject
{
    ...
}

public class ObjectBox : Box
{
    ...
} 
```

然后你可以使用“as”操作符来判断一个 GameObject 是否是一个盒子：

```
GameObject spotObjectLocation1 = GetObjectAtLocation(player.transform.position + checkDirection);

Box b = spotObjectLocation1 as Box;
if (b != null)
    ... 
```

此外，这种类型的代码有时使用普通的多态性会更好地处理。想想如果它实际上是一个盒子，你会如何处理它。您是否也想对其他类型的对象进行处理？如果是这样，让所有这些对象从一个公共基类继承，该基类提供派生类可能覆盖的虚拟或抽象方法。然后客户端代码可以简单地通过基类调用这些方法，而不需要知道对象的实际类型是什么。

# perl - XML::Parser 拒绝安装

> ID：13986282
> 
> 赞同：29
> 
> 时间：2012-12-21T07:54:45.297
> 
> 标签：perl, xml-simple

在过去两个小时左右的时间里，我一直在尝试在 Ubuntu 12.10 上安装 XML::Simple 并且已经完全没有想法了。它在 XML::Parser 上失败了。

我做了一个

```
sudo apt-get install expat 
```

它仍然没有工作。这是我得到的错误：

```
make[1]: Entering directory `/home/<user>/.cpan/build/XML-Parser-2.41-MCLo7T/Expat'
cp Expat.pm ../blib/lib/XML/Parser/Expat.pm
/usr/bin/perl /usr/share/perl/5.14.2/ExtUtils/xsubpp -noprototypes -typemap /usr/share /perl/5.14/ExtUtils/typemap -typemap typemap  Expat.xs > Expat.xsc && mv Expat.xsc Expat.c
cc -c   -D_REENTRANT -D_GNU_SOURCE -DDEBIAN -fstack-protector -fno-strict-aliasing -pipe -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2 -g   -DVERSION=\"2.41\" -DXS_VERSION=\"2.41\" -fPIC "-I/usr/lib/perl/5.14/CORE"   Expat.c
Expat.xs:12:19: fatal error: expat.h: No such file or directory
compilation terminated.
make[1]: *** [Expat.o] Error 1
make[1]: Leaving directory `/home/sclarawu/.cpan/build/XML-Parser-2.41-MCLo7T/Expat'
make: *** [subdirs] Error 2
TODDR/XML-Parser-2.41.tar.gz
/usr/bin/make -- NOT OK
Running make test
Can't test without successful make
Running make install
Make had returned bad status, install seems impossible 
```

似乎告诉我它无法找到 expat.h，但我不确定为什么或如何，考虑到 expat 已安装？我试图 apt expat-devel，但它似乎不是 apt 中的一个包。任何想法将不胜感激。:)

编辑：我似乎只是试图安装错误的软件包。-.- 总是小事。非常感谢那些回答的人！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-21T11:38:32.997

获得@Moritz Bunkus 上面指出的相同信息的另一种方法。

```
ubuntu:~$ apt-cache search expat 
expat - XML parsing C library - example application 
libexpat1 - XML parsing C library - runtime library 
libexpat1-dev - XML parsing C library - development kit 
```

结果集中的第三个就是您要查找的内容。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-05-10T12:14:17.380

除了其他答案，这里是如何在 CentOS/RHEL 上安装 expat 依赖项：

```
yum install expat-devel 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-12-21T09:37:20.597

您需要安装 Expat 库及其开发头文件。对于 DebUbuntu，这意味着`libexpat1-dev`和那些发行版一样，它们经常将它们的库分成两个包：一个用于运行时组件（共享库、数据文件、通用文档），一个用于开发组件（静态库、头文件、开发文档）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-04-01T13:54:08.287

以防万一，使用 Debian Jessie 我必须`libexpat1-dev`通过执行安装`apt-get install libexpat1-dev`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-08T16:47:22.143

我只能通过从 cpan 下载并手动编辑`Makefile.pl`内部以正确指向`EXPATLIBPATH`and来安装它`EXPATINCPATH`。

有关更详细的说明，请参阅[此帖子](https://stackoverflow.com/questions/9693031/how-to-install-xmlparser-without-expat-devel/44441248#44441248)。

# android - 在 mac 错误 2 上展开 ADT

> ID：13986286
> 
> 赞同：3
> 
> 时间：2012-12-21T07:55:12.540
> 
> 标签：android, macos, cordova, sdk

我正在使用 mac OS X10.8.2 和 Cordova 2.2.0，并且我正在尝试按照[phonegap 的文档中](http://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)所述安装 Android SDK ，在我下载 ADT zip 文件后，出现错误消息：

```
 Unable to expand "adt-bundle-mac-x86_64.zip" into "adt-bundle-mac-x86_64".
     (Error 2- no such file or directory.) 
```

我用谷歌搜索了几次错误，我也下载了几次文件。大多数评论说该文件可能已损坏，您是否知道在哪里可以找到另一个下载 Android SDK 的来源，或者只是如何修复该文件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:05:11.230

我有同样的问题。似乎在下载时，文件显示为 373 MB，下载完成后为 98.6 MB。不知道它是如何工作的。

但是我去下载了 Eclipse，将[https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)添加到了可用的软件站点中，然后它拉入了 SDK。所以我想这就是现在的解决方案。

# android - 使用异步任务时出错

> ID：13986292
> 
> 赞同：0
> 
> 时间：2012-12-21T07:55:57.550
> 
> 标签：android

我有两个并行运行的进程，并且在同一个数据库上执行相同的读写操作。所以我想把它们带到一个asynctask，让它们相互同步。但是在执行过程中，产生了一个错误，我不知道如何修复希望人们提供帮助。当你运行应用程序到***新的sync()。执行 （）;*** 错误

```
 public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.invoice);
 doTimerTask();
}

public void workoffline()
{
    clearArray();
    try {
        mDb.openDB();
        Cursor mCursor = mDb.getAllInvoice(IDDelivery);
        if (mCursor.moveToFirst()) {
            do {
                codeInvoiceArray.add(mCursor.getString(1));
                nameArray.add(mCursor.getString(2));
                phonenumberArray.add(mCursor.getString(3));
                addressArray.add(mCursor.getString(4));
                urlArray.add(mCursor.getString(5));

            } while (mCursor.moveToNext());
            loaddatalistview();
        }
        mDb.closeDB();
    } catch (Exception e) {
        e.printStackTrace();
    }

}

// lấy dữ liệu từ server về thiết bị
public void loaddata()
{

    String sampleURL = SERVICE_URL + "/monthlytarget.php";
    CallUrl wst = new CallUrl(CallUrl.GET_TASK, this, "Lấy thông tin hóa đơn...", 1, IDDelivery);
    wst.execute(new String[] {
            sampleURL
    });

    // Hiển thị thông tin nhận được lên listview

}

private class sync extends AsyncTask<Void, Void, Void>
{

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        loaddata();
        return null;
    }

    @Override
    protected void onPostExecute(final Void unused) {
        // TODO Auto-generated method stub
        workoffline();
    }

}

// kiểm tra thiết bị có kết nối mạng hay không?
// nếu có thiết bị sẽ làm việc online
// nếu không thiết bị sẽ chuyển sang hoạt động offline
public void testNetwork()
{
    // Kiểm tra kết nối đến server
    TestConnectionNew test = new TestConnectionNew();
    try {
        String recieve = test.execute("http://longvansolution.tk/monthlytarget.php").get();
        if (recieve.equalsIgnoreCase("true") && isNetworkAvailable() == true)
        {

           //loaddata();
           // workoffline();
            new sync().execute();
        }
        else if (recieve.equalsIgnoreCase("false") || isNetworkAvailable() == false)
        {
            String mess = "Không thể kết nối đến server hoặc thiết bị chưa có kết nối mạng!";
            Toast.makeText(Invoice.this, mess, Toast.LENGTH_SHORT).show();
            workoffline();
        }

    } catch (InterruptedException e) {
        e.printStackTrace();
    } catch (ExecutionException e) {
        e.printStackTrace();
    }
}

// thực hiện load data từ server về theo thời gian định sẵn
public void doTimerTask() {
    TimerTask mTimerTask;
    Timer t = new Timer();
    final Handler handler = new Handler();
    mTimerTask = new TimerTask() {
        public void run() {
            handler.post(new Runnable() {
                public void run() {
                    testNetwork();
                    Log.d("TIMER", "TimerTask run");
                }
            });
        }
    };
    // public void schedule (TimerTask task, long delay, long period)
    t.schedule(mTimerTask, 500, 300000); //
} 
```

错误

```
12-21 14:43:54.750: E/AndroidRuntime(11093): FATAL EXCEPTION: AsyncTask #4
12-21 14:43:54.750: E/AndroidRuntime(11093): java.lang.RuntimeException: An error occured while    executing doInBackground()
12-21 14:43:54.750: E/AndroidRuntime(11093):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
12-21 14:43:54.750: E/AndroidRuntime(11093):    at      java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
12-21 14:43:54.750: E/AndroidRuntime(11093):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
12-21 14:43:54.750: E/AndroidRuntime(11093):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
12-21 14:43:54.750: E/AndroidRuntime(11093):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
12-21 14:43:54.750: E/AndroidRuntime(11093):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
12-21 14:43:54.750: E/AndroidRuntime(11093):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
12-21 14:43:54.750: E/AndroidRuntime(11093):    at  java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
12-21 14:43:54.750: E/AndroidRuntime(11093):    at java.lang.Thread.run(Thread.java:856)
12-21 14:43:54.750: E/AndroidRuntime(11093): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
12-21 14:43:54.750: E/AndroidRuntime(11093):    at android.os.Handler.<init>(Handler.java:121)
12-21 14:43:54.750: E/AndroidRuntime(11093):    at android.app.Dialog.<init>(Dialog.java:107)
12-21 14:43:54.750: E/AndroidRuntime(11093):    at android.app.AlertDialog.<init>(AlertDialog.java:114)
12-21 14:43:54.750: E/AndroidRuntime(11093):    at android.app.AlertDialog.<init>(AlertDialog.java:98)
12-21 14:43:54.750: E/AndroidRuntime(11093):    at android.app.ProgressDialog.<init>(ProgressDialog.java:77)
12-21 14:43:54.750: E/AndroidRuntime(11093):    at Url.CallUrl.showProgressDialog(CallUrl.java:289)
12-21 14:43:54.750: E/AndroidRuntime(11093):    at Url.CallUrl.onPreExecute(CallUrl.java:300)
12-21 14:43:54.750: E/AndroidRuntime(11093):    at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:561)
12-21 14:43:54.750: E/AndroidRuntime(11093):    at android.os.AsyncTask.execute(AsyncTask.java:511)
12-21 14:43:54.750: E/AndroidRuntime(11093):    at com.longvan.saigonfleamarket.Invoice.loaddata(Invoice.java:240)
12-21 14:43:54.750: E/AndroidRuntime(11093):    at com.longvan.saigonfleamarket.Invoice$sync.doInBackground(Invoice.java:254)
12-21 14:43:54.750: E/AndroidRuntime(11093):    at com.longvan.saigonfleamarket.Invoice$sync.doInBackground(Invoice.java:1)
12-21 14:43:54.750: E/AndroidRuntime(11093):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
12-21 14:43:54.750: E/AndroidRuntime(11093):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:14:09.943

您必须在 UI 线程中运行 UI 交互。尝试做

```
runOnUiThread(new Runnable() {

                @Override
                public void run() {

                    //your UI interaction code here

                }
            }); 
```

这将在 UI 线程中执行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:02:44.357

CallUrl 是否试图显示 ProgressDialog？如果是这样，您无法通过 AsyncTask 的 doInBackground 方法执行此操作。请查看 publishProgress 方法。

[文档](http://developer.android.com/reference/android/os/AsyncTask.html)在这里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T08:26:27.640

在您的 UI 线程（默认）中，您正在创建一个`TimerTask`线程，在其中创建一个`Runnable`（线程），在其中您正在创建一个`AsyncTask`线程。在此过程中，您有一个`Toast`电话：

```
Toast.makeText(Invoice.this, mess, Toast.LENGTH_SHORT).show(); 
```

（您不能像这样直接从另一个线程访问 UI 线程；尝试使用处理程序。）

我相信一些简化是必要的；这里有一些很好的例子，应该会有所帮助：

[AsyncTask 和 Looper.prepare() 错误](https://stackoverflow.com/questions/4187960/asynctask-and-looper-prepare-error/4217754#4217754)

[无法在未调用 Looper.prepare() 的线程内创建处理程序 - 对话框内的 AsyncTask](https://stackoverflow.com/questions/11264538/cant-create-handler-inside-thread-that-has-not-called-looper-prepare-asynct)

[Java 无法在未调用 Looper.prepare() 的线程内创建处理程序](https://stackoverflow.com/questions/10403858/java-cant-create-handler-inside-thread-that-has-not-called-looper-prepare)

[Java 中的 Timer & TimerTask 与 Thread + sleep](https://stackoverflow.com/questions/1453295/timer-timertask-versus-thread-sleep-in-java)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T08:05:19.340

在调用异步任务之前创建一个 PorgressDialog 并在完成执行异步任务之后关闭 PorgressDialog。这将解决您的问题。[在这里](http://thedevelopersinfo.wordpress.com/2009/10/19/using-handler-for-long-time-operations-in-android/)检查[这里](http://android10.org/index.php/articlesother/239-android-application-and-asynctask-basics)，[这里](http://www.androidsnippets.com/grab-a-url-source-with-progressdialog-and-asynctask)和[这里](http://saigeethamn.blogspot.in/2010/04/threads-and-handlers-android-developer.html)

# jsrender - JSRender 中的逻辑 OR 语法是什么？

> ID：13986294
> 
> 赞同：0
> 
> 时间：2012-12-21T07:56:07.743
> 
> 标签：jsrender

我有两个布尔变量“IsOwner”和“IsModerator”（当然可以是真或假），我尝试如下**{{if IsOwner || IsModerator}} 这里有一些代码 {{/if}}**。但这似乎失败了......我错过了什么。？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:53:36.237

是的，`{{if IsOwner || IsModerator}} some code here {{/if}}`是正确的，应该可以正常工作。

# javascript - 使用 div 值，如 php 变量

> ID：13986295
> 
> 赞同：0
> 
> 时间：2012-12-21T07:56:08.893
> 
> 标签：javascript, html, drop-down-menu

我有这样的脚本

```
<script type="text/javascript">
    function showSelected(val){
        document.getElementById
('selectedResult').innerHTML = "The selected number is - " 
+ val;
    }
</script>

<div id='selectedResult'></div>

<select name='test' onChange='showSelected(this.value)'>
    <option value='1'>one</option>
    <option value='2'>two</option>
</select> 
```

输出显示为

```
<div id='selectedResult'></div> 
```

所以，我想用这个变量

实际上，我想在不提交的情况下获取下拉框值。这个脚本成功了，但我可以使用其他建议

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:22:47.793

我不确定我是否真的理解这个问题，但如果你想获取存储在 DIV 中的内容，请使用：

```
var stuff = document.getElementById('selectedResult').innherHTML; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:23:43.520

我可以建议您另一种我认为更有用的替代方案，您可以在您的项目中以不同的方式使用它。
在此示例中，您单击您的选项并将它们插入选项列表，如果需要，您可以从您的选择名称 = 测试中发送它们，您只需要更改它。
[演示](http://jsfiddle.net/YuM7a/1/)

这是您可以捕获项目、链接、图像、属性并将它们添加到选择框的脚本：

```
$(document).ready(function(){
    $('li').on('click',function(){
        $('#theSelect').append('<option   SELECTED>'+$(this).find('img').attr('value')+'</option>');
        var seen = {};
$('option').each(function() {
var txt = $(this).text();
if (seen[txt])
    $(this).remove();
else
    seen[txt] = true;
});
    });

     })

$('#del').click(function() {
var $list = $('#theSelect option');
var d = $list.length;

var b=($list.length-1);
$('#theSelect option:eq('+b+')').remove();

 }); 
```

# jetty - 优化 Jetty 以检测数千台机器的心跳？

> ID：13986297
> 
> 赞同：2
> 
> 时间：2012-12-21T07:56:20.373
> 
> 标签：jetty, failover, persistent-connection

我有大量机器（数千台甚至更多），每 X 秒都会向 Jetty 服务器执行一个 HTTP 请求，以通知它们还活着。对于 X 的什么值，我应该使用持久的 HTTP 连接（将受监控机器的数量限制为并发连接的数量），对于 X 的什么值，客户端应该重新建立 TCP 连接（理论上这将允许监控更多的机器使用相同的 Jetty 服务器）。

HTTPS 连接的答案将如何变化？（假设 CPU 不是约束）

这个问题故意忽略了多个 Jetty Web 服务器的横向扩展。

更新：基本上问题可以减少到lowResourcesMaxIdleTime的最小推荐值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:52:32.937

我想说这与其说是码头扩展问题，不如说是网络扩展问题，在这种情况下，“这取决于”您的网络基础设施。只有你真正知道你的网络是如何布局的，以及为了得出 X 的值所涉及的延迟类型。

从开销的角度来看，持久的 HTTP 连接当然会产生一些较小的影响（我说的是次要的，但取决于您的网络）并且 HTTPS 将再次产生更大的影响......但仅从流量的角度来看，因为您是假设 CPU 不是约束。

所以从码头的角度来看，它真的不需要参与这个问题，你似乎最终会寻求帮助来优化网络上的流量字节，所以你现在真的在寻找最好的协议。由于使用 HTTP，您必须处理每个请求的标头，因此您可能会很好地查看 spdy 或 websocket 之类的东西，它们将为您提供持久连接，但针对低往返网络开销进行了优化。但是......他们似乎有点过分了心跳。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T12:39:47.033

让他们在不同的时间提出请求怎么样？假设第一个机器请求，然后您选择一个时间来响应该机器作为下一次对该机器的心跳（同时保持 id/time 在码头服务器），第二个机器请求，您可以选择另一个时间来响应第二台机器。

这样，你可以让每台机器在不同的时间执行心跳请求，这样就不会出现并发问题。

如果所有机器可能同时启动，您还可以对第一次心跳使用随机时间。

# c# - 在 mvc3 razor 中发送确认电子邮件

> ID：13986299
> 
> 赞同：1
> 
> 时间：2012-12-21T07:56:24.210
> 
> 标签：c#, asp.net-mvc-3, sql-server-2008

当我单击创建时，它将保存在数据库中以及发送到有关 MailId 的电子邮件中，但我收到错误，例如无法连接到 sqlserverdatabase。谁能帮我！！！

在模型中：我已经添加了数据库

```
using System;
using System.Collections.Generic;

namespace EmployeeMVC.Models
{
    public partial class TblEmployeeDetail
    {
        public int id { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string EmailId { get; set; }
        public System.DateTime DOB { get; set; }
        public string MobileNo { get; set; }
        public string Gender { get; set; }
        public string Country { get; set; }
        public string State { get; set; }
        public string Skills { get; set; }
        public string Address { get; set; }
    }

} 
```

在控制器中：我添加了方法

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using EmployeeMVC.Models;
using System.Data;
using System.Data.Entity;
using System.Text;
using System.Data.Entity.Validation;
using System.Web.UI.WebControls;
using EmployeeMVC.Infrastructure;
using System.Web.Security;
using System.Text.RegularExpressions;

namespace EmployeeMVC.Controllers
{
    public class EmployeeController : Controller
    {
        public EmployeeMVCEntities1 db = new EmployeeMVCEntities1();

        //ss
        // GET: /Employee/

        public ActionResult Index()
        {
            using (db = new EmployeeMVCEntities1())
            {
                return View(db.TblEmployeeDetails.ToList());
            }
        }

        // GET: /Employee/Details/5

        public ActionResult Details(int id)
        {
            using (db = new EmployeeMVCEntities1())
            {
                return View(db.TblEmployeeDetails.Find(id));
            }
        }

        public ActionResult Create()
        {
            var Country = (from s in db.TblCountries
                           select new
                           {
                               s.CountryId,
                               s.CountryName
                           }).OrderBy(c => c.CountryName);
            ViewBag.Country = new SelectList(Country, "CountryId", "CountryName");

            IEnumerable<TblSkill> skillList = (from x in db.TblSkills select x).ToList();
            ViewBag.skill = skillList.Select(c => new SelectListItem{
                Text = c.Skills.ToString(),
                Value = c.SkillsId.ToString()
            });
            return View();
        }

        public ActionResult Verify(string id)
        {
            if (string.IsNullOrEmpty(id) || (!Regex.IsMatch(id, @"[0-9a-f]{8}\-([0-9a-f]{4}\-){3}[0-9a-f]{12}")))
            {
                ViewBag.Msg = "Not Good!!!";
                return View();
            }

            else
            {
                var user = Membership.GetUser(new Guid(id));

                if (!user.IsApproved)
                {
                    user.IsApproved = true;
                    Membership.UpdateUser(user);
                    FormsAuthentication.SetAuthCookie(user.UserName, false);
                    return RedirectToAction("Index", "Home");
                }
                else
                {
                    FormsAuthentication.SignOut();
                    ViewBag.Msg = "Account Already Approved";
                    return RedirectToAction("LogOn");
                }
            }
        }
        //
        // POST: /Employee/Create

        [HttpPost]
        public ActionResult Create(TblEmployeeDetail emp)
        {

            int CId = Convert.ToInt32(emp.Country);
            var Cname = (from c in db.TblCountries
                         where c.CountryId == CId
                         select c.CountryName).Single();

            int SId = Convert.ToInt32(emp.Skills);
            var Sname = (from sn in db.TblSkills
                         where sn.SkillsId == SId
                         select sn.Skills).SingleOrDefault();

            if (ModelState.IsValid)
            {    
                try
                {
                    emp.Country = Cname;
                    emp.Skills = Sname;
                    db.TblEmployeeDetails.Add(emp);
                    db.SaveChanges();   

                     // Attempt to register the user
                    MembershipCreateStatus createStatus;
                    //Make sure the user is not approve at this point!!!
                    Membership.CreateUser(emp.FirstName, emp.LastName, emp.EmailId,
                    null, null, true, null, out createStatus);

                    if (createStatus == MembershipCreateStatus.Success)
                    {

                        EmailManager.SendConfirmationEmail(emp.EmailId);
                        FormsAuthentication.SetAuthCookie(emp.FirstName,false /* createPersistentCookie */);

                        return RedirectToAction("create", "Account");
                    }
                    else
                    {
                        ModelState.AddModelError("", AccountValidation.ErrorCodeToString(createStatus));
                    }    

                    return RedirectToAction("Index");
                }

                catch (System.Data.Entity.Validation.DbEntityValidationException dbEx)
                {
                    StringBuilder sb = new StringBuilder();

                    foreach (var failure in dbEx.EntityValidationErrors)
                    {
                        sb.AppendFormat("{0} failed validation\n", failure.Entry.Entity.GetType());

                        foreach (var error in failure.ValidationErrors)
                        {
                            sb.AppendFormat("- {0} : {1}", error.PropertyName, error.ErrorMessage);
                            sb.AppendLine();
                        }
                    }

                    throw new DbEntityValidationException("Entity Validation Failed - errors follow:\n" + sb.ToString(), dbEx); //addthe original exception as the innerException

                }

            }
            return View(emp);

        }

        public ActionResult Edit(int id)
        {
            using (db = new EmployeeMVCEntities1())
            {
                return View(db.TblEmployeeDetails.Find(id));
            }
        }

        // POST: /Employee/Edit/5
        [HttpPost]
        public ActionResult Edit(int id, TblEmployeeDetail EmployeeDetails)
        {
            try
            {
                if (ModelState.IsValid)
                {
                    db.Entry(EmployeeDetails).State = EntityState.Modified;
                    db.SaveChanges();
                    return RedirectToAction("Index");

                }
                return View(EmployeeDetails);
            }
            catch
            {
                return View();
            }
        }

        public ActionResult Delete(int id)
        {
            using (db = new EmployeeMVCEntities1())
            {
                return View(db.TblEmployeeDetails.Find(id));
            }
        }

        //
        // POST: /Employee/Delete/5

        [HttpPost, ActionName("Delete")]
        public ActionResult DeleteEmployee(int id)
        {

            //db.Entry(EmployeeDetails).State = EntityState.Deleted;
            TblEmployeeDetail tbl = db.TblEmployeeDetails.Find(id);
            db.TblEmployeeDetails.Remove(tbl);
            db.SaveChanges();
            return RedirectToAction("Index");

        }
    }
} 
```

在基础设施文件夹中，EmailManager 是：对于电子邮件确认

```
using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.Security;
    using EmployeeMVC.Models;
    using System.Net.Mail;
    using System.Text;

    namespace EmployeeMVC.Infrastructure
    {
        public class EmailManager
        {
            private const string EmailFrom = "noreplay@gmail.com";
            public static void SendConfirmationEmail(string FirstName)
            {
                StringBuilder MailBody = new StringBuilder();
                var user = Membership.GetUser(FirstName.ToString());
                var confirmationGuid = user.ProviderUserKey.ToString();
                var verifyUrl = HttpContext.Current.Request.Url.GetLeftPart
                    (UriPartial.Authority) + "/Employee/Verify" + confirmationGuid;
                using (var client = new SmtpClient())
                {
                    using (var message = new MailMessage(EmailFrom, user.Email))
                    {
                        message.Subject = "Please Verify your Account";
                        MailBody.Append("<html><table cellpadding='0' cellspacing='0' width='100%' align='center'>" +
                                "<tr><td><p>Dear " + user.UserName + "</p><br>");
                        MailBody.Append("To verify your account, please click the following link:<span style='font-weight:bold;'><a href=\""
                            + verifyUrl + "\" target=\"http://localhost:59874\">"
                            + verifyUrl + "</a></span> to complete your registration.<br>");

                        message.IsBodyHtml = true;
                        client.EnableSsl = true;
                        client.Send(message);
                    };
                };

        }
    }
} 
```

在 Web.config 中：

```
<?xml version="1.0" encoding="utf-8"?>
    <!--
      For more information on how to configure your ASP.NET application, please visit
      http://go.microsoft.com/fwlink/?LinkId=152368
      -->
    <configuration>
      <connectionStrings>
        <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" />
        <add name="EmployeeMVCEntities" connectionString="metadata=res://*/Models.EmployeeModel.csdl|res://*/Models.EmployeeModel.ssdl|res://*/Models.EmployeeModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=192.168.1.200;Initial Catalog=EmployeeMVC;User ID=sa;Password=DBserver123;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" />
        <add name="EmployeeMVCEntities1" connectionString="metadata=res://*/Models.EmployeeModel.csdl|res://*/Models.EmployeeModel.ssdl|res://*/Models.EmployeeModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=192.168.1.200;Initial Catalog=EmployeeMVC;User ID=sa;Password=DBserver123;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" />
      </connectionStrings>
      <appSettings>
        <add key="ClientValidationEnabled" value="true" />
        <add key="UnobtrusiveJavaScriptEnabled" value="true" />
      </appSettings>
      <system.web>
        <compilation debug="true" targetFramework="4.0">
          <assemblies>
            <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
            <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
            <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
            <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
            <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
            <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
          </assemblies>
        </compilation>
        <authentication mode="Forms">
          <forms loginUrl="~/Account/LogOn" timeout="2880" />
        </authentication>
        <membership>
          <providers>
            <clear />
            <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
          </providers>
        </membership>
        <profile>
          <providers>
            <clear />
            <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
          </providers>
        </profile>
        <roleManager enabled="false">
          <providers>
            <clear />
            <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
            <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
          </providers>
        </roleManager>
        <pages>
          <namespaces>
            <add namespace="System.Web.Helpers" />
            <add namespace="System.Web.Mvc" />
            <add namespace="System.Web.Mvc.Ajax" />
            <add namespace="System.Web.Mvc.Html" />
            <add namespace="System.Web.Routing" />
            <add namespace="System.Web.WebPages" />
          </namespaces>
        </pages>
      </system.web>
      <system.webServer>
        <validation validateIntegratedModeConfiguration="false" />
        <modules runAllManagedModulesForAllRequests="true" />
      </system.webServer>
      <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
          <dependentAssembly>
            <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
            <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
          </dependentAssembly>
        </assemblyBinding>
      </runtime>
      <system.net>
        <mailSettings>
          <smtp deliveryMethod="Network">
            <network host="smtp.gmail.com" port="587" userName="idsignbilling@Gmail.com" password="iDsign@123" />
          </smtp>
        </mailSettings>
      </system.net>

    </configuration> 
```

在创建视图中：

```
 @model EmployeeMVC.Models.TblEmployeeDetail
    @{
        ViewBag.Title = "Create";
    }
    <h2>
        Create</h2>
    <link href="../../Content/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    @*<script src="../../Scripts/EditorHookup.js" type="text/javascript"></script>
    <script src="../../Scripts/RangeDateValidator.js" type="text/javascript"></script>*@
    <link href="../../Content/Calendar.css" rel="stylesheet" type="text/css" />
    <script src="../Scripts/jquery.ui.core.js" type="text/javascript"></script>
    <script src="../Scripts/jquery.ui.datepicker.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            $("#DOB").datepicker({
                changeMonth: true,
                changeYear: true,
                yearRange: "-20:+0"
            });

        });
    </script>
    @*<script>
        $(function () {
            ).datepicker();
        });
    </script>*@
    @using (Html.BeginForm())
    {    
        @Html.ValidationSummary(true)
        <fieldset>
            <legend>TblEmployeeDetail</legend>
            <div class="editor-label">
                @Html.LabelFor(model => model.FirstName)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(model => model.FirstName)
                @Html.ValidationMessageFor(model => model.FirstName)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.LastName)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(model => model.LastName)
                @Html.ValidationMessageFor(model => model.LastName)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.EmailId)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(model => model.EmailId)
                @Html.ValidationMessageFor(model => model.EmailId)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.DOB)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(model => model.DOB)
                @Html.ValidationMessageFor(model => model.DOB)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.MobileNo)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(model => model.MobileNo)
                @Html.ValidationMessageFor(model => model.MobileNo)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.Gender)
            </div>
            <div class="editor-field">
                @Html.RadioButtonFor(model => model.Gender, "Male", true)Male
                @Html.RadioButtonFor(model => model.Gender, "Female", true)Female
                @Html.ValidationMessageFor(model => model.Gender)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.Country)
            </div>
            <div class="editor-field">
                @* @Html.EditorFor(Model=> Model.Country)*@ @* @Html.DropDownListFor(m => m.Country, new SelectList(new string[] {"Select","India", "USA", "UK", "Australia"}, "Country"))*@
                @* @Html.DropDownListFor(model=>model.Country,)*@ @*@Html.DropDownListFor(model => model.Country, new SelectList(Model.Country,"Value", "Text"), "Select Contry")          *@
                @*@Html.ValidationMessageFor(model=>Model.Country)*@
                @Html.DropDownList("Country", "--select country--")
                @Html.ValidationMessageFor(model => model.Country)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.State)
            </div>
            <div class="editor-field">
                @* @Html.DropDownListFor(m => m.State, new SelectList(new string[] { "Select", "AP", "UP", "London", "Aust" }, "Country"))*@
                @* @Html.DropDownList("State","Select State")*@
                @Html.EditorFor(Model => Model.State)
                @Html.ValidationMessageFor(model => model.State)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.Skills)
            </div>
            <div class="editor-field">
                @{ 
           IEnumerable<SelectListItem> skill = ViewBag.skill;
           foreach (var item in skill)
           {

                    @Html.CheckBox("Skills", false, new { value = item.Value });                                                             
                    @*<input type="checkbox" name="skillsId" value="@item.Text" /> *@
                    <label>@item.Text</label>  
                    @Html.ValidationMessageFor(model => model.Skills)
           }
                }
               </div>
            @* @Html.CheckboxList("skillId",new { @checked="checked" } )*@ @* @Html.CheckBox("skill", Model.skill == 1 ? true : false)*@
            @*@Html.CheckBox("skill", model == null ? false : (model.Ischecked == 1 ? true : false), new { @value = "true" })*@
            @* @Html.EditorFor(Model => Model.Skills)
                @Html.ValidationMessageFor(model => model.Skills)*@ @* @{
               List<EmployeeMVC.Models.TblSkills> tag = ViewData["skills"] as List<EmployeeMVC.Models.TblSkills>;
               foreach (var item in skill)
                 {
                 @Html.CheckBoxList("Skills", true, new { value = item.SkillsId});
                <label>@item.Skills</label>  
                 @Html.ValidationMessageFor(model => model.Skills)
                 }
                }*@ @*<div class="editor-field">
                <table style="border: none;">
                    <tr>
                        @{
           List<EmployeeMVC.Models.TblSkill> Skills = ViewBag.skill;
           for (int i = 0; i < Skills.Count; i++)
           {
               Response.Write("<td style='border: none;'>");
               Response.Write(string.Format("<input type='checkbox' id='skill{0}' name='skill' value='{0}' {2}/><label for='skill{0}'>{1}</label><br/>",
               Skills[i].SkillsId, "&nbsp;" + Skills[i].Skills + "&nbsp;",
               (EmployeeMVC.Infrastructure.HtmlHelpers.GetTblSkill())
                ));
               Response.Write("</td>");
               if ((i + 1) % 3 == 0)
               {
                   Response.Write("</tr><tr>");
               }
           }
                        }
                    </tr>
                </table>
                @Html.ValidationMessageFor(model => model.Skills)
            </div>*@
            <div class="editor-label">
                @Html.LabelFor(model => model.Address)
            </div>
            <div class="editor-field">
                @Html.TextAreaFor(model => model.Address)
                @Html.ValidationMessageFor(model => model.Address)
            </div>
            <p>
                <input type="submit" value="Create" />
            </p>
        </fieldset> 
    }
    <div>
        @Html.ActionLink("Back to List", "Index")
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:04:15.753

成员资格提供程序使用`ApplicationServices`连接字符串。确保此连接字符串指向正确的数据库。

从您的 web.config 中，它与其他实体框架连接字符串不同：

```
<add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" />
        <add name="EmployeeMVCEntities" connectionString="metadata=res://*/Models.EmployeeModel.csdl|res://*/Models.EmployeeModel.ssdl|res://*/Models.EmployeeModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=192.168.1.200;Initial Catalog=EmployeeMVC;User ID=sa;Password=DBserver123;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:05:21.677

如果你在 localhost 上运行它（通常是在开发机器上），你可能没有安装 SMTP 服务器。如果是这种情况，您的电子邮件尝试将引发异常。要解决这个问题，请到这里获取 Papercut：[http://papercut.codeplex.com/](http://papercut.codeplex.com/) - 它会无缝拦截您的 SMTP 请求，以便您的代码可以继续它正在做的事情。

# gcc - gcc 在 c99 模式下是否错误地执行隐式函数声明？

> ID：13986301
> 
> 赞同：5
> 
> 时间：2012-12-21T07:56:28.487
> 
> 标签：gcc, standards, c99, c89

考虑以下代码：

```
int main (void) {
    int i = xyzzy();
    return i;
}
int xyzzy (void) {
    return 42;
} 
```

现在，虽然 for 的原型`xyyzy`在使用时是未知的，但这在 c89 模式下有效，因为没有原型的函数的默认返回类型是`int`隐式函数原型和实际函数兼容。

而且，事实上，如果您将函数的返回类型更改为`float`，您会得到（如预期的那样）：

```
testprog.c:6: error: conflicting types for 'xyzzy'
testprog.c:2: error: previous implicit declaration of 'xyzzy' was here 
```

因为隐式原型和实际函数不再匹配。

编译的原始代码`gcc --std=c89 --pedantic -Wall -Wextra`只给了我警告：

```
testprog.c: In function 'main':
testprog.c:2: warning: implicit declaration of function 'xyzzy' 
```

这是意料之中的，因为 c89 有这样的说法`3.7.1 Function definitions`：

> **extern int max(int a, int b) { ... }：**这`extern`是存储类说明符，`int`也是类型说明符（每个都可以省略，因为它们是默认值）。

并在`3.3.2.2 Function calls`：

> 如果函数调用中带括号的参数列表之前的表达式仅包含一个标识符，并且如果该标识符没有可见的声明，则该标识符被隐式声明，就好像在包含函数调用的最里面的块中，声明**extern整数标识符（）；**出现了。

因此，在声明之前使用函数*肯定会*导致创建默认原型。

* * *

然而，这两个短语在 c99 中都被删除了，而是在`6.5.2.2 Function calls`（我的粗体）中找到：

> 如果表示被调用函数的表达式具有指向返回对象类型的函数的类型指针，则函数调用表达式具有与该对象类型相同的类型，并且具有如 6.8.6.4 中指定的那样确定的值。**否则，函数调用的类型为 void。**

我理解它的意思是，如果在您尝试调用函数时没有看到声明，那么它会隐式声明为`void`返回类型。

然而，当使用 编译时`gcc --std=c99 --pedantic -Wall -Wextra`，我得到关于隐式声明的相同警告。

c99 不应该将该函数隐式声明为返回`void`吗？如果有的话，我会预料到一个`previous implicit declaration`错误，类似于我尝试将其重新声明为时得到的错误`float`。

`gcc`这里坏了，还是我在标准中遗漏了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T16:44:23.480

您正在错误地阅读标准。C 中没有隐式函数声明之类的东西。它已被 C99 从语言中删除。

GCC 在看到看起来像隐式函数声明的错误构造时会发出警告。就标准而言，这是可以的。标准在这里需要诊断，警告就是诊断。你可以使用`-Werror=implicit-function-declaration`GCC 的标志来把它变成一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-05T13:52:03.983

**这在6.5.1 主要表达式**的注释中有所介绍：

> 2 - 标识符是主要表达式，前提是它已被声明为指定对象（在这种情况下它是左值）或函数（在这种情况下它是函数指示符）。^(79))
> 
> * * *
> 
> 79) 因此，未声明的标识符违反了语法。

**5.1.1.3 诊断**需要一个符合要求的实现来生成诊断消息，以响应函数调用表达式的语法违规，该函数调用表达式涉及一个未声明的标识符作为表示被调用函数的表达式。当然可以自由地继续编译程序，就好像标识符已以隐式`int`C89 样式声明一样。

必须参考约束 6.5.2.2p1 阅读第 6.5.2.2p5 段：

> 1 - 表示被调用函数的表达式应具有指向函数的类型指针，该函数返回`void`或返回数组类型以外的对象类型。

因此，如果“*表示被调用函数*的表达式”没有*类型*“*指向返回对象类型的函数的指针*”，则它必须按*事实*（通过约束 6.5.2.2p1）具有类型“*指向函数返回`void`*的指针”，并且它6.5.2.2p5中的“*否则”是否涵盖这种情况。*也就是说，我在*[方括号]*中插入：

> 5 - 如果表示被调用函数的表达式具有指向返回对象类型的函数的类型指针，则函数调用表达式具有与该对象类型相同的类型，并且具有如 6.8.6.4 中指定的那样确定的值。**否则，*[即如果表示被调用函数的表达式具有指向函数返回的类型指针`void`，]*函数调用具有类型`void`**。

这是一种需要特殊语言而`void`不是对象类型的情况；不是被调用函数表达式是或包含未声明标识符的许可。

# windows-7 - Visual Studio 2012 MFC 向导使用 aero 生成应用程序故障

> ID：13986302
> 
> 赞同：4
> 
> 时间：2012-12-21T07:56:29.030
> 
> 标签：windows-7, mfc, visual-studio-2012, aero

一段时间以来，我一直在努力解决 MFC 中的这个故障。它可以很容易地观察到。

*   在 Visual Studio 2012 Update 1 中创建一个新的 MFC 应用程序，
*   在向导设置中设置多个文档/选项卡式文档，Office 2007 黑色风格
*   在 Windows 7 上运行应用程序：

## Windows 7 Aero 主题打开时启动的应用程序：

## ![Windows 7 航空](../Images/3b401c59075a82c87708e91c18e3620e.png)

## Windows 控制面板中的主题设置为 Windows 7 Basic：

## ![视窗 7 基础版](../Images/353846ec6694fac163f158bd0ed935d5.png)

## Windows 控制面板中的主题设置回 Windows 7 Aero：

## ![再次Windows 7 Aero](../Images/2b28bb40cc83caf3fd0214cbfb673de3.png)

请注意 aero 关闭时未上漆的间隙，以及 aero 重新打开时缺少关闭按钮的黑色标题。

这个问题一直存在，在 Visual Studio 2010 向导生成的应用程序中，过去可以通过 Windows 控制面板切换主题，但在使用*DwmEnableComposition()* API 调用禁用/重新启用 aero 后仍然显示黑色标题。

我希望在 Visual Studio 2012 中问题得到[解决](http://blogs.msdn.com/b/vcblog/archive/2012/06/14/10320171.aspx)，但似乎没有。那么我能做些什么来解决这个错误呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T07:50:24.190

我想[Windows Aero Glass 背景在休眠后坏了。我该如何解决这个问题？](https://stackoverflow.com/questions/4985056/windows-aero-glass-background-is-broken-after-hibernate-how-can-i-solve-this)基本上是同一个问题。

因此，该问题的答案应该是您正在寻找的。

# java - 如何从服务中打开（切换、设置）软键盘

> ID：13986307
> 
> 赞同：1
> 
> 时间：2012-12-21T07:56:43.623
> 
> 标签：java, android, android-softkeyboard

如何从我的服务中打开（切换、设置）软键盘？

我的应用程序不包含任何活动。但是当屏幕上出现外星应用程序时，我尝试在我的服务中触发打开软键盘。我在`InputMethodManager`'s 方法中找到`setInputMethod`。第二个参数是键盘的 id。我知道。但第一个论点是`IBinder`。我的应用程序中的 IBinder 参数是什么？

添加详细信息：

我的应用程序由`Service`和组成`InputMethodService`。

在服务中 - 分析系统中的启动应用程序。在`InputMethodService`- 我的软键盘 (IME)。如果在我的服务中我确定什么是正确启动应用程序（我不拥有此应用程序），我需要将当前切换`softkeyboard`到我的 InputMethodService 的 IME。只开关，不开键盘。当用户点击客户端应用程序中的可编辑视图时，系统会打开我的软键盘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:41:04.647

我的解决方案代码`Service`：

```
 ((InputMethodManager) contextService.getSystemService( Context.INPUT_METHOD_SERVICE)).setInputMethod( null, myInputMethodId);
    ((InputMethodManager) contextService.getSystemService( Context.INPUT_METHOD_SERVICE)).toggleSoftInputFromWindow( null, 1, 0); 
```

ps 仅当我的应用程序是系统时才有效（`null`第一个参数`setInputMethod`仅在我的应用程序是系统时可用）。我以编程方式获取我的应用程序的系统特权`mv /data/app/myapp.apk /system/app/myapp.apk`（基于[https://stackoverflow.com/a/14257161/1665964](https://stackoverflow.com/a/14257161/1665964)）。

# mqtt - 如何在 Mosquitto 中配置 mosquitto.conf

> ID：13986313
> 
> 赞同：1
> 
> 时间：2012-12-21T07:56:56.990
> 
> 标签：mqtt, mosquitto

我是新手，我使用过 Mosquitto（[http://mosquitto.org](http://mosquitto.org)）。我已经用 mosquitto-1.0.5-install-cygwin.exe 安装了它，并将它作为 Windows 服务运行。但我看不到任何日志。这是我的 mosquitto.conf：

```
log_dest topic

log_dest syslog

log_type error

log_type warning

log_type notice

log_type information 
```

请帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T21:21:31.773

```
log_dest syslog 
```

此选项会将日志消息发送到您可以在控制面板->管理工具->计算机管理->事件查看器中找到的 Windows 应用程序日志。

或者，如果您手动启动代理而不是作为您可以使用的服务

```
log_dest stdout 
```

或者

```
log_dest stderr 
```

并将输出重定向到文件。当前无法显式配置文件输出。

# php - PHP - 从目录文件创建导航，但第 1 页显示两次

> ID：13986317
> 
> 赞同：0
> 
> 时间：2012-12-21T07:57:17.850
> 
> 标签：php, navigation, pagination, directory

所以我在这里根据目录文件进行导航，但是它会输出两次第一页。

我的目录中目前有 6 个文件：index.php、2.php、3.php、4.php、5.php 和 6.php

我的导航将页面链接显示为 [1] [2] [3] [4] [5] [6] [1]

我如何防止 index.php [1] 最后再次打印？

```
<?php
$pathfiles = "../directory/";
$files = glob("../directory/*.php");
$key = array_search('index.php', $files);
unset($files[$key]);
natsort($files);
array_unshift($files, 'index.php');
foreach( $files as $file ) {
    echo '[<a href="'.($pathfiles).''
    .basename($file).'">'.str_replace('index', '1', basename($file,".php")).'</a>] ';
}
?> 
```

任何解决方案或线索将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:00:34.267

您可以将 array_unshift 更改为：

```
array_unshift($files, array_pop($files)); 
```

这基本上会将最后一个条目移动到第一个位置，请参阅[array_pop](http://php.net/array_pop)的 PHP 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:04:31.387

我很害怕`array_search()`找不到结果。检查`var_dump($files)`和`var_dump($key)`。

# python - 如何在python中计算日期之间的差异

> ID：13986327
> 
> 赞同：2
> 
> 时间：2012-12-21T07:57:47.340
> 
> 标签：python, date

> **可能重复：**
> [如何从 python 日期中减去一天？](https://stackoverflow.com/questions/441147/how-can-i-subtract-a-day-from-a-python-date)
> [在python中减去两次](https://stackoverflow.com/questions/5259882/subtract-two-times-in-python)

我在python中生成了如下日期

```
import time
time_stamp = time.strftime('%Y-%m-%d')

print time_stamp 
```

结果：

```
'2012-12-19' 
```

我正在尝试的是，如果上面的 time_stamp 是今天的日期，我想要一个`'2012-12-17'`通过执行差异的日期（减去两天）

那么如何在python中从当前日期开始减少两天的日期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:22:44.333

要在 Python 中的某些日期之间执行计算，请使用模块中的`timedelta`类`datetime`。

要完成您想要实现的目标，以下代码就足够了。

```
import datetime

time_stamp = datetime.datetime(day=21, month=12, year=2012)

difference = time_stamp - datetime.timedelta(day=2)

print '%s-%s-%s' % (difference.year, difference.year, difference.day) 
```

**上述解释：**

*   第二行创建一个新`datetime`对象（来自`datetime class`），具有指定的*日、月和年*
*   第三行创建一个`timedelta`对象，用于在datetime对象之间进行计算

# php - 如何检查和删除具有特定数据类型的数组值？

> ID：13986328
> 
> 赞同：0
> 
> 时间：2012-12-21T07:57:50.563
> 
> 标签：php, arrays, types

我有数组变量，它是不可预测的格式和长度。例如：

```
$arrayData = array(
   0 => (int) 100,
   1 => (date) 2012-12-01,
   2 => array(
       0 => (string) 'some string',
       1 => (int) 200,
   ),
   3 =>  (string) 'another string'
); 
```

我需要删除数组键和它的值并只保留字符串数据类型。

也许有人可以建议我解决该问题的正确方法，而不是使用循环和 gettype。

结果将是：

```
$arrayData = array(
   2 => array(
       0 => (string) 'some string',
   ),
   3 =>  (string) 'another string'
); 
```

或者：

```
$arrayData = array(
   0 => (string) 'some string',
   1 =>  (string) 'another string'
); 
```

或其他建议结果欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:06:03.973

如果您不想使用循环，则可以使用[array_walk_recursive 。](http://php.net/manual/en/function.array-walk-recursive.php)

```
<?php
$arrayData = array(
   0 => (int) 100,
   1 => (date) 2012-12-01,
   2 => array(
       0 => (string) 'some string',
       1 => (int) 200,
   ),
   3 =>  (string) 'another string'
);

array_walk_recursive($arrayData, 'test_print');

function test_print($value, $key)
{
   //your code to remove
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T08:09:28.317

您可以遍历数组并使用该`gettype()`函数来保留/删除数组项。但是，您需要一个递归函数来处理数组中的数组。`&`请注意以下代码示例中对两个的谨慎使用：

```
$arrayData = array(
    0 => (int) 100,
    1 => '2012-12-01',
    2 => array(
        0 => (string) 'some string',
        1 => (int) 200
    ),
    3 => (string) 'another string'
);
function remove_nonstring_recursive(&$array) {
    foreach ($array as $key => &$value) {
        $type = gettype($value);
        if ($type == "array") {
            remove_nonstring_recursive($value);
        } elseif ($type != "string") {
            unset($array[$key]);
        }
    }
}
remove_nonstring_recursive($arrayData);
var_dump($arrayData);
// array(3) {
//   [1]=>
//   string(10) "2012-12-01"
//   [2]=>
//   array(1) {
//     [0]=>
//     string(11) "some string"
//   }
//   [3]=>
//   string(14) "another string"
// } 
```

原始答案 - 使用`array_walk_recursive`全局变量

```
$arrayData = array(
    0 => (int) 100,
    1 => '2012-12-01',
    2 => array(
        0 => (string) 'some string',
        1 => (int) 200
    ),
    3 => (string) 'another string'
);
$arrayDataFiltered = array();
function remove_non_string($value, $key) {
    global $arrayDataFiltered;
    if (gettype($value) == "string") {
        $arrayDataFiltered[] = $value;
    }
}
array_walk_recursive($arrayData, "remove_non_string");
var_dump($arrayDataFiltered);
// array(3) {
//   [0]=>
//   string(10) "2012-12-01"
//   [1]=>
//   string(11) "some string"
//   [2]=>
//   string(14) "another string"
// } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T08:13:47.403

我现在不知道如何在没有递归的情况下做到这一点，但是在 array_walk_recursive 的帮助下你可能会想要：

```
<?php
    $arrayData = array(
        0 => 100,
        1 => 2012-12-01,
        2 => array(
            0 => 'some string',
            1 => 200,
        ),
        3 =>  'another string'
    );

    $objTmp = (object) array('flat' => array());
    array_walk_recursive($arrayData, create_function('&$v, $k, &$t', '$t->flat[] = gettype($v);'), $objTmp);

    var_dump($objTmp->Flat);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T08:03:53.080

foreach 主数组并检查每个值是否为字符串。最后，您将拥有一个仅包含字符串的数组。

```
foreach($arrayData as $key => $value){
    if(is_string($value)){
    $new[] = $value;
    }
} 
```

`$new`将只有字符串。

# asp.net - 常见的网络攻击

> ID：13986332
> 
> 赞同：2
> 
> 时间：2012-12-21T07:58:01.300
> 
> 标签：asp.net, .net, security, ddos

> **可能重复：**
> [为渗透测试准备一个 ASP.Net 网站](https://stackoverflow.com/questions/4122486/preparing-an-asp-net-website-for-penetration-testing)

如何跨用户攻击测试已经内置的网站？我有一个用 .NET 开发的流程管理系统，现在在将其投入生产环境之前，我想通过一系列攻击对其进行测试。

如果有人可以分享一些常见的攻击，这些攻击通常应用于我知道的一些 Web 应用程序，例如未经授权的访问、URL 嵌入式攻击、sql 注入等等，我将不胜感激。

请分享您的经验和建议，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:10:19.470

清单：

[Web 应用程序安全指南/清单](http://en.wikibooks.org/wiki/Web_Application_Security_Guide/Checklist)

有很多免费工具可用，你可以试试这些：

*   [Netsparker](http://www.mavitunasecurity.com/communityedition/)：Netsparker 社区版是一个 SQL 注入扫描器。
*   [网络安全](http://www.websecurify.com/)
*   [Watcher](http://websecuritytool.codeplex.com/)：Watcher 是一个 Fiddler 插件，旨在帮助渗透测试人员被动地发现 Web 应用程序的漏洞。
*   [Wapiti](http://www.ict-romulus.eu/web/wapiti/home)：Web 应用程序漏洞扫描器/安全审计器
*   [N-潜行者](http://www.nstalker.com/products/editions/free/)
*   [skipfish](http://code.google.com/p/skipfish/)：Skipfish 是一个活跃的 Web 应用程序安全侦察工具。它通过执行递归爬网和基于字典的探测为目标站点准备交互式站点地图。然后使用来自许多活动（但希望是非破坏性的）安全检查的输出对生成的地图进行注释。该工具生成的最终报告旨在作为专业 Web 应用程序安全评估的基础。
*   潦草
*   [x5s](http://xss.codeplex.com/)：x5s 是一个 Fiddler 插件，旨在帮助渗透测试人员发现跨站点脚本漏洞。它的主要目标是通过以下方式帮助您识别可能发生 XSS 的热点： 1\. 检测未将安全编码应用于发出的用户输入的位置。2\. 检测 Unicode 字符转换可能绕过安全过滤器的位置。3\. 检测非最短 UTF-8 编码可能绕过安全过滤器的位置
*   [Exploit-Me](http://labs.securitycompass.com/exploit-me/)：Exploit-Me 是一套 Firefox Web 应用程序安全测试工具，旨在轻量级且易于使用。

[免费的 Web 应用程序安全测试工具](http://www.webresourcesdepot.com/10-free-web-application-security-testing-tools/)

# ajax - XHR2 允许来源 - 这可以伪造吗？

> ID：13986336
> 
> 赞同：1
> 
> 时间：2012-12-21T07:58:42.367
> 
> 标签：ajax, security, xmlhttprequest, cross-domain, cors

关于通过 XHR2/CORS 访问的资源可以阻止请求的方式，除非它来自白名单域：

*   读取哪个标头来确定引荐来源域 - 它是标准的 HTTP_REFERRER 吗？
*   有人可以以某种方式发送假装来自另一个域的请求吗？

我知道 CORS 不是保护数据的可靠方法 - 我只是出于好奇而问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:31:59.830

读取的标头是`Origin`. 与任何 HTTP 标头一样，它可以被伪造。COSR 背后的想法是启用发送数据，同时仍然保护用户/防止滥用用户会话。禁止跨域请求是为了保护用户，而不是服务器。

攻击者应该假装这是另一个域发送请求并发送用户拥有的 cookie。这不是您可以`XSS`单独实现的 - 您必须窃取 cookie 并自行发送请求。但是您不能从站点 B 窃取站点 A 的 cookie。但是，如果 A 接受来自任何域的请求，通过 B 上的 XSS，您可以欺骗用户的浏览器向 A 发送请求，浏览器将发送 cookie，您可以读取响应背部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:48:19.580

标`Origin`头包含请求域。

此浏览器完全控制此标头，并且无法伪造。浏览器代表用户控制这个header，用户不能覆盖JS代码中的值。

请注意，我说的是“浏览器”；与任何 HTTP 请求一样，用户可以制作带有任何`Origin`标头的 curl 请求。但这作为攻击媒介的用途有限，因为黑客必须欺骗有效用户发出正确的 curl 请求，而这不太可能。

# ruby - 通过特定方式对数组进行切片

> ID：13986337
> 
> 赞同：-1
> 
> 时间：2012-12-21T07:58:50.033
> 
> 标签：ruby

Python中有一个很好的切片方法，例如

```
my_array[3:] 
```

我知道 Ruby 中也有切片方法，但没有与 Python 完全相同的方法`my_array[3:]`（以防不知道数组的大小）。是不是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:03:13.063

请在此处查看 ruby[​​ 切片方法](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-slice)。正如@Blender 建议的那样，您可以传递一个范围，例如：

```
my_array[3..-1] 
```

编辑：

# 范围示例

```
array = ["a", "b", "c", "d", "e"]
array[3..-1] 
```

将导致`["d", "e"]`as`d`的索引为 3 并且`e`是最后一个元素。

# 更多示例

```
a = [ "a", "b", "c", "d", "e" ]
a[2] +  a[0] + a[1]    #=> "cab"
a[6]                   #=> nil
a[1, 2]                #=> [ "b", "c" ]
a[1..3]                #=> [ "b", "c", "d" ]
a[4..7]                #=> [ "e" ]
a[6..10]               #=> nil
a[-3, 3]               #=> [ "c", "d", "e" ]
# special cases
a[5]                   #=> nil
a[5, 1]                #=> []
a[5..10]               #=> [] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T08:51:19.360

```
class Array
    def sub_array(pos, len = -1)
        if len == -1
        then # the rest of the array starting at pos
            len = self.size - pos
        end
        self.slice(pos, len)
    end
end

my_array = %w[a b c d e f]
p my_array.sub_array(3)     #=> ["d", "e", "f"]
p my_array.sub_array(5)     #=> ["f"]
p my_array.sub_array(9)     #=> nil
p my_array.sub_array(3, 2)  #=> ["d", "e"]
p my_array.sub_array(3, 9)  #=> ["d", "e", "f"] 
```

实际上，这最初是 String 的子字符串方法。

# c++ - 如何声明内部模板类？

> ID：13986339
> 
> 赞同：0
> 
> 时间：2012-12-21T07:58:54.710
> 
> 标签：c++, templates, inner-classes

我在声明内部模板类时遇到问题。

我`Class A`在`a.h` 这里创建了一个我的代码看起来像

```
class A
{
  public:

  private:
    // How declare LockFreeQueue here

};

template <typename T>
struct LockFreeQueue
{
      LockFreeQueue();
      void push(const T& t);
      bool pop(T& t);
    private:
      typedef std::list<T> TList;
      TList list;
      typename TList::iterator iHead, iTail;

};

/**
 * Constructor
 * Initializes required variables
 * */
template <typename T>
LockFreeQueue<T>::LockFreeQueue()
{
  list.push_back(T());
  iHead = list.begin();
  iTail = list.end();
}

/**
 * pushes data in the list
 * @param datatype that needs to be pushed
 * */
template <typename T>
void LockFreeQueue<T>::push(const T& t)
 {
   list.push_back(t);
   iTail = list.end();
   list.erase(list.begin(), iHead);
 }

/**
 * Pops Queue
 * @param t stores popped data at t's address
 * @return true if data available, false otherwise
 * */
template <typename T>
bool LockFreeQueue<T>::pop(T& t)
{
  typename TList::iterator iNext = iHead;
  ++iNext;
  if (iNext != iTail)
  {
    iHead = iNext;
    t = *iHead;
    return true;
  }
  return false;
} 
```

任何帮助将不胜感激，

谢谢 & BR Yuvi

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:10:10.487

把它移到里面：

```
class A
{
  public:

  private:

      template <typename T>
      struct LockFreeQueue
      {
          LockFreeQueue();
          void push(const T& t);
          bool pop(T& t);
         private:
          typedef std::list<T> TList;
          TList list;
          typename TList::iterator iHead, iTail;
      };
}; 
```

并在定义时添加范围`A`，如下所示：

```
template <typename T>
A::LockFreeQueue<T>::LockFreeQueue() 
```

# gtk - 在 gtksourceview 中插入注释/撤消失败

> ID：13986342
> 
> 赞同：2
> 
> 时间：2012-12-21T07:59:29.953
> 
> 标签：gtk, gtksourceview

我刚刚偶然发现了插入注释和撤消功能的一个微妙问题。重现步骤：

1.  打开编辑器
2.  在源缓冲区的某处插入注释
3.  按 ctrl+z 撤消
4.  插入另一条评论，评论插入正常，但标准输出中显示以下错误：

    GtkSourceView-CRITICAL **：modified_changed_handler：断言'action！= NULL'失败

5.  插入另一个评论，这也有效

6.  尝试通过按 ctrl+z 撤消，撤消不起作用，并且在 stdout 中显示以下错误：

    GtkSourceView-CRITICAL **: gtk_source_undo_manager_undo_impl: 断言 `undo_action != NULL' 失败

从这里开始撤消不起作用。

这是我的 insert_comment()：

```
 ...
tbuffer = gtk_text_view_get_buffer (GTK_TEXT_VIEW(txtinput[current_tab]));
gtk_text_buffer_get_selection_bounds (tbuffer, &start, &end);

gtk_text_iter_set_line_offset (&start, 0);
gtk_text_buffer_insert (tbuffer, &start, "// \0", -1);
    ... 
```

和我的撤消按键定义：

```
 case GDK_KEY_z:
        if (event -> state & GDK_CONTROL_MASK)
        {

            GtkSourceBuffer *sbuffer;

            sbuffer = GTK_SOURCE_BUFFER(gtk_text_view_get_buffer(GTK_TEXT_VIEW(txtinput[current_tab])));

            if (gtk_source_buffer_can_undo(sbuffer))
            {
                gtk_source_buffer_undo(sbuffer);
            }

            return TRUE;
        }

        break; 
```

我看到另一个人也有同样的问题，但没有提出解决方案。有没有其他人有这个问题？

我尝试将“修改后的”信号连接注释掉作为故障排除步骤，但问题仍然存在。

关于我可能做错了什么的任何想法？谢谢。

# vba - 我们可以将字典键分配给具有单个语句的列吗？

> ID：13986345
> 
> 赞同：3
> 
> 时间：2012-12-21T08:00:04.633
> 
> 标签：vba, excel, vbscript

我有大字典键，我想将其插入到 excel 表的列中。我通过以下方式完成了：

```
Dim a, d, i 'Create some variables
Set d = CreateObject("Scripting.Dictionary")
d.Add "a", "Athens" 'Add some keys and items.
d.Add "b", "Belgrade"
d.Add "c", "Cairo"

a = d.keys 'Get the keys

For i = 0 To d.Count - 1 'Iterate the array
    ob.Cells(i + 1, 1).Value = a(i)
Next 
```

但它可以在一个声明中完成吗？说`obj2.Cells(1,1).Resize(dicP.Count,1)=a`我也试过这个，但它只把第一个键放在我定义的范围内`Resize`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:09:00.240

像这样？

```
Sub a()
    Dim d '<~~ Create some variable
    Dim sKeys()

    Set d = CreateObject("Scripting.Dictionary")
    d.Add "a", "Athens" 'Add some keys and items.
    d.Add "b", "Belgrade"
    d.Add "c", "Cairo"

    '~~> Get dictionary Keys
    sKeys = d.keys

    Range("A1").Resize(d.Count) = Application.Transpose(sKeys)
End Sub 
```

# javascript - 如何在提供值的 onload 函数完成后执行 Javascript 函数需要一个值？

> ID：13986346
> 
> 赞同：6
> 
> 时间：2012-12-21T08:00:18.583
> 
> 标签：javascript, ajax, database

我知道这是一个很长的问题，所以请允许我尽可能地解释一下。

我有两个要在页面加载后运行的 javascript 函数，我们将它们称为 function1() 和 function2()。

function1() 使用 AJAX 从数据库中检索信息，该信息将根据从数据库中获得的信息将内容排列在一个 div 中。一旦函数完成，它还会从数据库中返回内容。

function2() 需要数据库中的值才能正常运行，因此它需要等到 function1() 返回其值，然后才能运行 function2()。不幸的是，我的代码不起作用，无需过多详细说明，以下是代码示意图：

```
function function1() {
if (some_cookie_exists) {
  //run some code
} else {
  //send parameters through "POST"
  xmlhttp.onreadystatechange = function() {
  if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
    var a = some_value_from_database;
    // change div content
  return a;
  }
  }
//sending parameters
}
function function2(a) {
//run code that depends on value of "a"
}

window.onload = function() {
var data = function1();
function2(data); 
```

我得到的错误是 var 数据未定义。function1() 成功检索数据，并按照我的预期运行，但 function2() 根本不执行，因为缺少值。谁能弄清楚我为什么会得到这个以及我应该如何解决这个问题？

注意：我真的只熟悉 Javascript（那时还是新手），我对 JQuery 基本上一无所知，所以如果你确实使用它来修复代码，请向我解释为什么它会起作用（它会在以后为我省去麻烦）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T08:10:32.137

AJAX 是异步的（这就是第一个 A 的含义）。AJAX 操作的结果在 function1() 中不可用，它们在`onreadystatechange`附加到 XMLHttpRequest 对象的处理程序中检索。所以目前还不清楚你会怎么做

```
var a = some_value_from_database; 
```

在`function1()`.

您需要做的是`function2()`从`onreadystatechange`处理程序调用。

如果您发布实际执行情况，`function1`我们或许能够提供更具体的细节。

更新：

以下是`function2()`当值可从 AJAX 调用获得时调用的方法：

```
xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        var a = some_value_from_database;
        function2(a);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T08:11:14.433

用回调来做。

```
function function1(callback) {
    /* ... */
    callback(data); // instead of return
}
var function2 = function(data) { // important: make "function2" a variable so that it can be passed as an argument later on
    /* ... */
}    
window.onload = function() {
    function1(function2); // important: no parentheses after function2, otherwise it would be executed right away
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T08:27:12.633

因为根据定义，ajax 是异步的，所以 function2 将在 function1 中的 ajax 完成之前开始执行。JQuery 在这里很有用，因为您可以将 function2 放在 function1 中 ajax 调用的成功回调中。

因此，在您的 HTML 中包含 JQuery，以下 JS 应该可以工作：

```
$(function() {   //same as onload
      function1() ;
}

function function1() {
        $.ajax({
              url: "url here",
              type: "GET",
               success: function(data) { // data is what is returned in ajax response
                           // rearrange divs
                            function2(data);
                }
           });
);

function function2(data) {
} 
```

更多关于 JQuery ajax 函数的信息：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# javascript - 在新标签页中打开页面

> ID：13986347
> 
> 赞同：2
> 
> 时间：2012-12-21T08:00:19.477
> 
> 标签：javascript, html, popupwindow

我想打开新标签`<a href="">`并想使用 JavaScript 关闭当前页面。

这是可以实现的吗？

这是我的代码

```
<a href="#" onclick="window.open('test_2.php', '_blank');window.close();">click here</a> 
```

新标签正在正确打开，但打开器窗口没有关闭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:02:40.503

尝试这个：

html:

```
<a href='javascript:closeAndOpen("url");'> close this one and open new tab </a> 
```

JS：

```
function closeAndOpen(url){
    window.open(url, '_blank');
    window.close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T08:02:12.603

使用 javascript`window.close()`关闭当前选项卡，并`window.open()`打开一个新选项卡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T08:59:57.513

您不能使用`window.close();`. 来关闭不是由您打开的窗口`javascript`。一种解决方案是使用`window.location.href = 'test_2.php';`哪个在同一选项卡中的当前页面上加载您的第二页。
但是，如果您想坚持“**打开新标签并关闭当前页面**”的想法，您需要做这样的事情。

```
onclick="window.open('test_2.php', '_blank');window.open(window.location, '_self').close();" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T08:27:59.597

那么，您想在新选项卡中打开页面并关闭当前页面吗？不就是停留在同一个标​​签页，进入新的页面吗？

```
<a href="#" onclick="window.location.href = 'test_2.php';">click here</a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T09:21:27.680

或者你可以使用 window.unload

```
window.onunload=function(){
    window.close();
}; 
```

# extjs - 使用 xtype:combo 时组合框不可见。不涉及任何形式

> ID：13986349
> 
> 赞同：0
> 
> 时间：2012-12-21T08:00:29.517
> 
> 标签：extjs

团队，

我面临一个问题，即组合框未在 div 上呈现。如果它非常基本，我很抱歉，但我是 EXTJS 的新手。

Ext Js 版本是 3.x。即使我不知道如何格式化代码，也对此表示歉意。

代码

```
<html>
<head>
<title>Expansion</title>
<link rel="stylesheet" type="text/css" href="ext/resources/css/ext-all.css" />
<script type="text/javascript" src="ext/adapter/ext/ext-base.js"></script>
<script type="text/javascript" src="ext/ext-all.js"></script>
</head>

<body>
<div id="c1"></div>

<div id="c2"></div>

</body>
</html>

<script type="text/javascript">

Ext.onReady(function(){
var itemsl=[];
itemsl.push([Ext.apply({
xtype:'combo',
triggerAction: 'all',
mode: 'local',
store: new Ext.data.ArrayStore({
id: 0,
fields: [
'myId',
'displayText'
],
data: [[1, 'item1'], [2, 'item2']]
}),
valueField: 'myId',
displayField: 'displayText',
emptyText: 'deactivated listbox',
_isExpanded: true,
isExpanded : function(){
return this._isExpanded || (this.list && this.list.isVisible());
},
renderTo: Ext.get('c1')
})

]);
});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T21:16:52.873

我认为这是提问者对 Extjs 工作方式的误解。xtype:"combo" 仅当您的配置是另一个 extjs 组件的子元素时才有效。在您的示例中，您没有将组合放在另一个 extjs 组件中，因此没有什么可以调用它的配置来实际使用 xtype 启动它。注意 Ext.apply 不是一个组件，只是一个将属性移动到对象中的函数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-21T22:10:12.983

请在 Ext.apply() 中使用 renderTo 配置；

# csv - 使用漂亮的汤从 html 页面中抓取数据的问题

> ID：13986352
> 
> 赞同：1
> 
> 时间：2012-12-21T08:01:09.083
> 
> 标签：csv, python-2.7, beautifulsoup

我正在从网站上抓取一些数据，并且可以使用以下引用的代码来做到这一点：

```
import csv
import urllib2
import sys
import time
from bs4 import BeautifulSoup
from itertools import islice
page = urllib2.urlopen('http://shop.o2.co.uk/mobile_phones/Pay_Monthly/smartphone/all_brands').read()
soup = BeautifulSoup(page)
soup.prettify()
with open('O2_2012-12-21.csv', 'wb') as csvfile:
    spamwriter = csv.writer(csvfile, delimiter=',')
    spamwriter.writerow(["Date","Month","Day of Week","OEM","Device Name","Price"])
    oems = soup.findAll('span', {"class": "wwFix_h2"},text=True)
    items = soup.findAll('div',{"class":"title"})
    prices = soup.findAll('span', {"class": "handset"})
    for oem, item, price in zip(oems, items, prices):
            textcontent = u' '.join(islice(item.stripped_strings, 1, 2, 1))
            if textcontent:
                    spamwriter.writerow([time.strftime("%Y-%m-%d"),time.strftime("%B"),time.strftime("%A") ,unicode(oem.string).encode('utf8').strip(),textcontent,unicode(price.string).encode('utf8').strip()]) 
```

现在，问题是我正在抓取的所有价格值中的 2 个具有不同的 html 结构，然后是其余值。因此，我的输出 csv 对那些显示“无”值。网页上价格的正常 html 结构是 `<span class="handset"> FREE to £79.99</span>`

对于这 2 个值的结构是 `<span class="handset"> <span class="delivery_amber">Up to 7 days delivery</span> <br>"FREE on all tariffs"</span>`

我现在得到的结果显示第二个 html 结构的**None**而不是**Free on all dutys ，在第二个结构中的双引号下提到****了所有关税上的免费**价格值，而它在第一个结构中的任何引号之外

请帮我解决这个问题，请原谅我的无知，因为我是编程新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:30:12.823

只需使用附加`if`语句检测这两项：

```
if price.string is None:
    price_text = u' '.join(price.stripped_strings).replace('"', '').encode('utf8')
else:
    price_text = unicode(price.string).strip().encode('utf8') 
```

然后`price_text`用于您的 CSV 文件。请注意，我`"`通过简单的替换调用删除了引号。

# ios - 多个（可能是无限的）iOS 应用使用相同的 Facebook 应用？

> ID：13986353
> 
> 赞同：3
> 
> 时间：2012-12-21T08:01:16.960
> 
> 标签：ios, facebook, single-sign-on

我想将我的 Facebook 应用程序集成到多个 iOS 应用程序中。我知道有一种方法可以在我的 Facebook 应用设置中包含所有捆绑 ID。但问题是，我在 API 中提供了这个功能。

任何使用我的 API 的人都应该能够让他的 iOS 应用程序连接到我的 Facebook 应用程序。而且由于 API 是公开的，我不可能知道所有可能的应用程序 ID。

我正在使用 Facebook SDK 3.1 并使用

```
[FBSession openActiveSessionWithReadPermissions:permissions
                              allowLoginUI:YES
                              completionHandler:] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:08:23.760

目前无法以编程方式将 Bundle ID 添加到 Facebook App Dashboard。因此，除非您提前知道 Bundle ID，否则您将无法进行设置。

顺便说一句，在将一个 Facebook 应用 ID 绑定到彼此不相似的应用或彼此扩展的应用时要小心，例如：付费版本与免费版本。

# javascript - 在从不同域加载页面的 iframe 中访问“pre”标签

> ID：13986354
> 
> 赞同：1
> 
> 时间：2012-12-21T08:01:26.270
> 
> 标签：javascript, iframe

我正在尝试将页面加载到 iframe 中。加载该页面时，我希望编辑加载文档内的“pre”标签的内容。加载的文档来自另一个域。我正在使用：resultframe 是 iframe

```
var atag= document.getElementById("resultframe").contentWindow.document.getElementsByTagName('pre');
 atag[0].innerHTML="done"; 
```

访问标签。

问题：这句话似乎没有效果。我需要知道正确的语法，并且我可以访问从不同域加载的页面元素。我从网上获得了语法以及它的一些变体。请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:41:52.103

虽然 JavaScript 受到阻止与另一个域交互的跨域策略的限制，但只要您能忍受某些限制，就有一种潜在的解决方法。

通过使用[PHP 和它的 cURL 库之](http://php.net/manual/en/book.curl.php)*类的东西* ，您可以从几乎任何地方获取页面的内容（即使是安全页面或需要登录的页面，只要您有凭据）。然后，您可以解析页面，编辑您需要的内容，并将其显示在您自己的站点中。但是，重要的是要意识到这只是您自己的页面*本地副本*。您将无法实际更改页面本身的内容。

 *另一种可能需要访问您希望编辑的所有域的权限，即使用[网络服务](http://en.wikipedia.org/wiki/Representational_state_transfer)以 PUT 请求的形式接受编辑。您可以通过 Web 服务实现更多功能，但它必须在您希望对其进行更改的所有目标域上都可用。

在不久的将来，[XMLHttpRequest Level 2](http://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html)可能成为现实，并将带来*跨域资源共享 (CORS)*。CORS 将允许一个域上的 Web 应用程序向另一个域发出跨域 AJAX 请求。目标域将有一个标头，明确允许来自另一个域的请求。潜在地，这可用于将编辑发送到另一个站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:22:56.267

你不能。出于安全原因，浏览器具有跨域策略。

如果我将 facebook 页面包含在 iframe 中，并且我可以获取您的所有信息，因为您始终与它相关联，该怎么办？*

# jaxb - 相同的对象具有不同的映射，具体取决于上下文 (MOXy)

> ID：13986357
> 
> 赞同：2
> 
> 时间：2012-12-21T08:01:45.743
> 
> 标签：jaxb, eclipselink, moxy

我正在使用**[EclipseLink MOXy](http://www.eclipse.org/eclipselink/moxy.php)**作为我的[JAXB (JSR-222)](http://jcp.org/en/jsr/detail?id=222)提供程序，并且需要一些关于我的映射文件的帮助来将我的类编组为 XML。

我正在使用外部文件进行映射。

我有两种类型的交易：**A 和 B**。两者都包含一个带有两个字段（text1 和 text2）的标题对象**（相同的对象）。**

在将这些编组为 XML 时，我希望 transactionA 的标头字段的 xml 标记成为 <headerA1> 和 <headerA2>，并且链接到 transactionB 的那些成为 <headerB1> 和 <headerB2>。

知道如何实现这一点（最好不使用继承）？

这是代码：

**标题类**

```
public class Header {

    private String text1;
    private String text2;

      public Header(){}

    public String getText1() {
        return text1;
    }

    public void setText1(String text1) {
        this.text1 = text1;
    }

    public String getText2() {
        return text2;
    }

    public void setText2(String text2) {
        this.text2 = text2;
    }

} 
```

**交易一**

```
public class TransactionA {

    private Header statementHeader;
    private BigDecimal units;
    private BigDecimal price;

    public TransactionA(){}

    public BigDecimal getUnits() {
        return units;
    }

    public void setUnits(BigDecimal units) {
        this.units = units;
    }

    public BigDecimal getPrice() {
        return price;
    }

    public void setPrice(BigDecimal price) {
        this.price = price;
    }

    public Header getStatementHeader() {
        return statementHeader;
    }

    public void setStatementHeader(Header statementHeader) {
        this.statementHeader = statementHeader;
    }

} 
```

**交易乙**

```
public class TransactionB {

  private Header statementHeader;
    private BigDecimal units;
    private BigDecimal price;

    public TransactionB(){}

    public BigDecimal getUnits() {
        return units;
    }

    public void setUnits(BigDecimal units) {
        this.units = units;
    }

    public BigDecimal getPrice() {
        return price;
    }

    public void setPrice(BigDecimal price) {
        this.price = price;
    }

    public Header getStatementHeader() {
        return statementHeader;
    }

    public void setStatementHeader(Header statementHeader) {
        this.statementHeader = statementHeader;
    }

} 
```

**映射文件**

```
<java-types>
  <java-type name="Statement" xml-accessor-type="NONE">
     <java-attributes>
        <xml-element java-attribute="tranA" />
        <xml-element java-attribute="tranB" />
     </java-attributes>
  </java-type>
  <java-type name="Header" xml-accessor-type="NONE">
     <java-attributes>
        <xml-element java-attribute="text1" name="headerA1" />
        <xml-element java-attribute="text2" name="headerA2" />
     </java-attributes>
  </java-type>
  <java-type name="TransactionA" xml-accessor-type="NONE">
     <java-attributes>
        <xml-element java-attribute="statementHeader" name="headerA" />
        <xml-element java-attribute="units" />
        <xml-element java-attribute="price"/>
     </java-attributes>
  </java-type>
  <java-type name="TransactionB" xml-accessor-type="NONE">
     <java-attributes>
        <xml-element java-attribute="statementHeader" name="headerB" />
        <xml-element java-attribute="units" />
        <xml-element java-attribute="price"/>
     </java-attributes>
  </java-type>
</java-types> 
```

**结果**如您所见，标题 B 的标签与标题 A 的标签相同。

```
<?xml version="1.0" encoding="UTF-8"?>
<tranA>
   <headerA>
      <headerA1>Description</headerA1>
      <headerA2>Units</headerA2>
   </headerA>
   <units>10</units>
   <price>99999999.98999999463558197021484375</price>
</tranA><tranB>
   <headerB>
      <headerA1>Bheader1</headerA1>
      <headerA2>Bheader2</headerA2>
   </headerB>
   <units>10</units>
   <price>99999999.98999999463558197021484375</price>
</tranB> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:19:17.100

一段时间以来，我们已经针对此类行为提出了增强请求。如果您可以对以下内容进行投票，但这将有助于将其提升到我们的优先级列表中。

*   [https://bugs.eclipse.org/bugs/show_bug.cgi?id=298220](https://bugs.eclipse.org/bugs/show_bug.cgi?id=298220)

* * *

**您今天如何做到这一点**

**XmlAdapter (HeaderBAdapter)**

您可以使用 an`XmlAdapter`为`Header`该类提供备用映射。

```
package forum13986357;

import javax.xml.bind.annotation.adapters.XmlAdapter;

public class HeaderBAdapter extends XmlAdapter<HeaderBAdapter.AdaptedHeaderB, Header>{

    public static class AdaptedHeaderB {
        public String headerB1;
        public String headerB2;
    }

    @Override
    public AdaptedHeaderB marshal(Header header) throws Exception {
        AdaptedHeaderB adaptedHeaderB = new AdaptedHeaderB();
        adaptedHeaderB.headerB1 = header.getText1();
        adaptedHeaderB.headerB2 = header.getText2();
        return adaptedHeaderB;
    }

    @Override
    public Header unmarshal(AdaptedHeaderB adaptedHeaderB) throws Exception {
        Header header = new Header();
        header.setText1(adaptedHeaderB.headerB1);
        header.setText2(adaptedHeaderB.headerB2);
        return header;
    }

} 
```

**oxm.xml**

以下是映射文档的更新版本。我已经更新了类中`statementHeader`属性的映射`TransactionB`以指定`XmlAdapter`应该使用 。

```
<?xml version="1.0"?>
<xml-bindings xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum13986357">
    <java-types>
        <java-type name="Statement" xml-accessor-type="NONE">
            <java-attributes>
                <xml-element java-attribute="tranA" />
                <xml-element java-attribute="tranB" />
            </java-attributes>
        </java-type>
        <java-type name="Header" xml-accessor-type="NONE">
            <java-attributes>
                <xml-element java-attribute="text1" name="headerA1" />
                <xml-element java-attribute="text2" name="headerA2" />
            </java-attributes>
        </java-type>
        <java-type name="TransactionA" xml-accessor-type="NONE">
            <java-attributes>
                <xml-element java-attribute="statementHeader" name="headerA" />
                <xml-element java-attribute="units" />
                <xml-element java-attribute="price" />
            </java-attributes>
        </java-type>
        <java-type name="TransactionB" xml-accessor-type="NONE">
            <java-attributes>
                <xml-element java-attribute="statementHeader" name="headerB">
                    <xml-java-type-adapter value="forum13986357.HeaderBAdapter" />
                </xml-element>
                <xml-element java-attribute="units" />
                <xml-element java-attribute="price" />
            </java-attributes>
        </java-type>
    </java-type 
```

s>

**jaxb.properties**

要将 MOXy 用作您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目 (http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your .html）：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

下面的演示代码可以用来证明一切正常。

```
package forum13986357;

import java.util.*;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;

import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(1);
        properties.put(JAXBContextProperties.OXM_METADATA_SOURCE, "forum13986357/oxm.xml");
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Statement.class}, properties);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        StreamSource xml = new StreamSource("src/forum13986357/input.xml");
        JAXBElement<Statement> jaxbElement = unmarshaller.unmarshal(xml, Statement.class);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(jaxbElement, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<statement>
    <tranA>
        <headerA>
            <headerA1>Description</headerA1>
            <headerA2>Units</headerA2>
        </headerA>
        <units>10</units>
        <price>99999999.98999999463558197021484375</price>
    </tranA>
    <tranB>
        <headerB>
            <headerB1>Bheader1</headerB1>
            <headerB2>Bheader2</headerB2>
        </headerB>
        <units>10</units>
        <price>99999999.98999999463558197021484375</price>
    </tranB> 
```

# php - 在线测试 PHP 脚本

> ID：13986359
> 
> 赞同：12
> 
> 时间：2012-12-21T08:01:50.530
> 
> 标签：php, testing, ide

上个月[codepad.viper-7.com](http://codepad.viper-7.com/)出现故障，许多粘贴代码的[stackoverflow](http://stackoverflow.com)答案都损坏了，包括我的一些。当它回来时，所有脚本都丢失了。

我正在寻找[codepad.viper-7.com](http://codepad.viper-7.com/)的免费匿名替代品，我可以在其中以最小的限制（ ，等）测试`php`脚本；在不同的版本上。`fopen``curl``mb_strlen`

这里推荐了很多，但很难找到适合[codepad.viper-7.com的替代品](http://codepad.viper-7.com/)

简单的测试脚本

```
<?php
   echo strlen(file_get_contents("http://google.com"));
?> 
```

输出

*   [codepad.viper-7.com](http://codepad.viper-7.com/JvuOqy) = 43736
*   [sandbox.onlinephpfunctions.com](http://sandbox.onlinephpfunctions.com/) = 禁用
*   [writecodeonline.com](http://writecodeonline.com/php/) = 禁用
*   [exorithm.com](http://www.exorithm.com/algorithm/sandbox) = 43736 但非匿名函数、print_r 等已禁用
*   [codepad.org](http://codepad.org) = 失败
*   [ideone.com](http://ideone.com/WRcC9t) = 禁用
*   [coderun.com](http://www.coderun.com/ide/) = 43736 但仅支持 PHP 版本 5.3.1
*   [codeanywhere.net](https://codeanywhere.net/) = 需要注册
*   [eval.in](http://eval.in/5093) = 禁止系统调用 socketcall
*   [3v4l.org](http://3v4l.org/JVoIh) = 失败

**问题：**

是否有任何限制最少的匿名替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:13:56.283

你可以试试[phpfiddle.org](http://phpfiddle.org/)。但要注意`http://google.com`是重定向到`https://www.google.com`，所以`file_get_contents`会返回`301 Moved`。

# c# - GetWindowLong / SetWindowLong 与覆盖 CreateParams？

> ID：13986363
> 
> 赞同：6
> 
> 时间：2012-12-21T08:02:25.797
> 
> 标签：c#, winforms

以前，当我想创建一个点击表单时，我[很想使用平台调用来设置扩展窗口样式](https://stackoverflow.com/questions/2798245/form-allow-click-through-in-c-sharp)（`GetWindowLong`/ `SetWindowLong`in `user32.dll`）。

刚才我想让它对 Alt+Tab 窗口列表不可见，并且我找到[了一个](http://www.csharp411.com/hide-form-from-alttab/)覆盖`CreateParams`设置扩展窗口样式而不是使用`GetWindowLong`/的示例`SetWindowong`。

现在我有这个：

```
protected override CreateParams CreateParams
{
    get
    {
        CreateParams cp = base.CreateParams;
        cp.ExStyle |= 0x80000 /* WS_EX_LAYERED */ | 0x20 /* WS_EX_TRANSPARENT */ | 0x80/* WS_EX_TOOLWINDOW */;
        return cp;
    }
} 
```

现在明显的变化不需要任何平台调用。

**所以我的几个问题：**

1.  在 Windows 上会有任何功能差异吗？（只是说我现在什至没有 XP 机器可以尝试。）
2.  现在我没有平台调用，我的程序会在 Linux/Mac 上的 Mono 上运行吗？（如果我现在可以尝试，我就不会在这里问你了。）
3.  [`Control.CreateParams`出现在 msdn 上](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.createparams.aspx)，并有一个操作窗口样式的示例。那么为什么 StackOverflow 上的一些在线“示例”和答案告诉人们使用`GetWindowLong`/ `SetWindowLong`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T12:20:58.430

> 在 Windows 上会有任何功能差异吗？

是的，非常如此。覆盖 CreateParams 可确保在使用 CreateWindowEx() 调用创建窗口时样式标志具有所需的值。Pinvoking SetWindowLong() 迟到了，它需要首先创建窗口，因为您需要 Handle 属性。将它与 GWL_STYLE 和 GWL_EXSTYLE 一起使用是有风险的，旧的 Windows 版本对此很不爽。以至于 Winforms 不这样做，它实际上*重新创建*了窗口，以便它可以将新的样式标志传递给 CreateWindowEx()。请注意 RecreateHandle() 方法，它在更改属性时使用，该属性是引擎盖下的样式标志。Winforms 确实有负担也必须支持 Windows 98。

> 我的程序会在 Linux/Mac 上的 Mono 上运行吗？

不确定，你确实必须尝试。但显然你有一个很好的“也许”，当你依赖 pinvoke 时，你的几率为零。

> 在 StackOverflow 上告诉人们使用 GetWindowLong / SetWindowLong？

惯性，我想。SetWindowsLong() 已经存在超过 25 年了，CreateParams 已经有 10 年历史了，但仍然非常晦涩难懂。

先发制人下一个问题：不，我从来没有见过一个完整的列表，其中列出了可以在每个 Windows 版本的窗口生命周期中的确切时间为哪个预定义的窗口类安全地更改哪些样式标志。很确定这样的列表不存在，或者可以信任，需要反复试验。请注意，可能需要使用 SWP_FRAMECHANGED 调用 SetWindowsPos() 才能使样式更改生效。

# html - XML 到 XSLT 转换中的强标记

> ID：13986370
> 
> 赞同：-2
> 
> 时间：2012-12-21T08:03:16.427
> 
> 标签：html, xml, xslt, xml-parsing

我有一个这样的 XML：

```
<texto>
    <mytag>
        <es><strong>a very important text</strong> and other text</es>
    <mytag>
</texto> 
```

我应用 XSLT 转换来获取 HTML 文件，但生成的 HTML 没有标记为`<strong>`我放入 XML 中。文本“一个非常重要的文本”正确显示，但它没有被标签包裹`<strong>`。

为什么？

如何使标签出现`<strong>`在生成的 HTML 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:02:26.637

这是可以工作的 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" version="1.0" encoding="UTF-8" indent="yes"/>

    <xsl:template match="/">
        <xsl:apply-templates select="//es"/>
    </xsl:template>

    <xsl:template match="es">
        <xsl:apply-templates select="*|text()|@*"/>
    </xsl:template>

    <xsl:template match="*|text()|@*">
        <xsl:copy>
            <xsl:apply-templates select="*|text()|@*"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

输入文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<texto>
    <mytag>
        <es><strong>a very important text</strong> and other text</es>
    </mytag>
</texto> 
```

输出文件：

```
<strong>a very important text</strong> and other text 
```

# c# - 使用单个书签将文本添加到 word 中的多行

> ID：13986371
> 
> 赞同：3
> 
> 时间：2012-12-21T08:03:16.707
> 
> 标签：c#, openxml

是否可以借助 Bookmarks 和 openXML 在 word 文档中添加几行？

我们有一个用作报告模板的 worddocument。在该模板中，我们需要添加几个交易行。问题是行数不是静态的。例如，它可以是 0、1 或 42。

在当前模板（我们可以更改）中，我们添加了 3 个书签 TransactionPart、TransactionPart2 和 TransactionPart3。树事务部分形成具有三个不同数据内容（ID、描述、金额）的单行

如果我们只有一个交易行，我们可以毫无问题地将数据添加到这些书签中，但是当我们应该添加第二行时我们该怎么办？没有更多行的书签。

有这样做的聪明方法吗？

或者我们应该更改 worddocument 以使行最终出现在表格中？这会更好地解决问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:08:26.273

我会在一个 3 列的表中放置一个书签，将其称为“事务”。像这样 ![表格布局](../Images/21574bff84cff1ca31fce882901c4bcb.png)

当您知道表格的设计但不知道您需要的行数时，最简单的方法是为您拥有的每一行数据添加一行。

你可以用这样的代码来完成

```
//make some data.
            List<String[]> data = new List<string[]>();

            for (int i = 0; i < 10; i++)
                data.Add(new String[] {"this","is","sparta" });
    using (WordprocessingDocument wordDoc = WordprocessingDocument.Open("yourDocument.docx", true))
                {
                    var mainPart = wordDoc.MainDocumentPart;
                    var bookmarks = mainPart.Document.Body.Descendants<BookmarkStart>();
                    var bookmark = 
                        from n in bookmarks 
                        where n.Name == "transactions" 
                        select n;

                    OpenXmlElement elem = bookmark.First().Parent;
                    //isolate tabel
                    while (!(elem is DocumentFormat.OpenXml.Wordprocessing.Table))
                        elem = elem.Parent;
                    var table = elem; //found
                    //save the row you wanna copy in each time you have data.
                    var oldRow = elem.Elements<TableRow>().Last();
                    DocumentFormat.OpenXml.Wordprocessing.TableRow row = (TableRow)oldRow.Clone();
                    //remove old row
                    elem.RemoveChild<TableRow>(oldRow);
                    foreach (String[] s in data)
                    {
                        DocumentFormat.OpenXml.Wordprocessing.TableRow newrow = (TableRow)row.Clone();
                        var cells = newrow.Elements<DocumentFormat.OpenXml.Wordprocessing.TableCell>();
                        //we know we have 3 cells
                        for(int i = 0; i < cells.Count(); i++)
                        {
                            var c = cells.ElementAt(i);
                            var run = c.Elements<Paragraph>().First().Elements<Run>().First();
                            var text = run.Elements<Text>().First();
                            text.Text = s[i];
                        }
                        table.AppendChild(newrow);
                    }
                } 
```

你最终得到这个

![决赛桌](../Images/d365a4821f9ccccf1ecc25cf9c17e2fa.png)

我已经在一个非常基本的文档上测试了这段代码，并且知道它可以工作。祝你好运，让我知道我是否可以进一步澄清。

# jsf - 页面上的 JSF 多组 selectOneRadio：如何恢复值？

> ID：13986373
> 
> 赞同：1
> 
> 时间：2012-12-21T08:03:22.710
> 
> 标签：jsf, selectoneradio

我有一个 jsf 页面，上面有多个单选按钮组（动态生成）。我需要在支持 bean 中从中检索值，但没有这样做。

业务：用户想要订阅由多组课程日组成的课程。用户可以选择课程日。因此，如果一门课程由例如 4 个课程日组成，分为 3 个不同的组，则用户可以从 12 个课程日中选择，每组 3 个。

xhtml页面的相关部分：

```
<c:forEach var="cd1" items="#{coursedayBean.getCoursedays(groupBean.getFirstGroup}">
  <h:selectOneRadio value="#{subscriptionBean.selectedCoursedays[cd1.sequenceNr]}" >
    <f:selectItems value="#{coursedayBean.getCoursedaysSelectItems}"/>
  </h:selectOneRadio>
</c:forEach> 
```

这会产生一个 *m 单选按钮矩阵，我想在其中检索 n 个值。selectItems 的类型为`<Long, String>`。

在我的支持 bean 中，我声明了以下内容：

```
public List<String> getSelectedCoursedays() {
  return selectedCoursedays;
}

public void setSelectedCoursedays(List<String> selectedCoursedays) {
  this.selectedCoursedays = selectedCoursedays;
} 
```

我尝试使用地图、列表，但它们都不起作用。setSelectedCoursedays 永远不会被调用。如何声明数组/列表/映射以获取支持 bean 中的值？

```
#{subscriptionBean.selectedCoursedays[cd1.sequenceNr]} 
```

不成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:32:26.440

这个构造应该可以正常工作。setter 确实永远不会被调用。JSF/EL 只是通过方法调用`ArrayList`自身的setter `add(index, object)`。即它基本上是：

```
subscriptionBean.getSelectedCoursedays().add(cd1.sequenceNr, selectedItem); 
```

我不确定您如何观察“它不起作用”的具体问题。也许您正在触发一个 ajax 请求并在 setter 方法上放置一个断点并且没有读取服务器日志。此构造在两种可能的情况下会失败。

1.  如果你不准备`selectedCoursedays`with `new ArrayList()`，那么你会得到`PropertyNotFoundException: Target Unreachable, 'selectedCoursedays' returned null`。

2.  如果您没有填写`selectedCoursedays`与课程日相同数量的`null`项目，那么您将获得一个`ArrayIndexOutOfBoundsException`

所以，你应该准备`selectedCoursedays`如下：

```
@PostConstruct
public void init() {
    selectedCoursedays = new ArrayList<String>();
    for (int i = 0; i < coursedays.size(); i++) {
        selectedCoursedays.add(null);
    }
} 
```

更简单的替代方法是使其成为`String[]`.

```
private String[] selectedCoursedays;

@PostConstruct
public void init() {
    selectedCoursedays = new String[coursedays.size()];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-21T10:25:37.753

`c:forEach`和之间缺少理解`ui:repeat`。`c:forEach`不会建立`UI component tree nodes`。[首先，您必须在此处](https://rogerkeays.com/jsf-c-foreach-vs-ui-repeat)参考它们之间的差异。

# perl - 如何卸载通过 cpan 安装的与 yum 冲突的 perl

> ID：13986375
> 
> 赞同：2
> 
> 时间：2012-12-21T08:03:44.160
> 
> 标签：perl, cpan, yum

在我的 centos 6.3 服务器上，我通过`yum install perl`packager install安装了 perl

但是，在`ExtUtils/Embed`通过`cpan`cpan 安装时，我的 Perl 更新到了 v5.17.4，而它应该是 5.10.1-127（可能是通过依赖项的某种方式，因为我使用了强制安装方法）。

所以现在我遇到了几十个问题，比如错误：

```
../x86_64-linux/CORE/libperl.a(op.o): relocation R_X86_64_32S against `PL_sv_yes' can not be used when making a shared object; recompile with -fPIC 
```

我无法用 fpic 重新编译，因为它是通过 cpan 以某种方式安装的。编译器正在使用这个新的 perl 而不是旧的兼容的，它不会给我这个错误。

有没有办法可以卸载这个 5.17.4 perl？我尝试使用`pm-uninstall`.. 等无济于事。我什至尝试`yum reinstall perl`过更新的 perl 仍在使用中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T20:27:23.573

这不会擦掉所有东西，但应该让你重新开始。

记录你安装的 perl rpm：

```
 rpm -qa | grep ^perl > /tmp/perlpkgs 
```

强制删除它们：

```
 for i in `cat /tmp/perlpkgs` ; do rpm -ev --nodeps $i ; done 
```

找出 perl 的安装位置，以防 cpan 将其放入`/usr/local`

```
 which perl 
```

如果它打印`/usr/local/bin/perl`然后`P=/usr/local`; 除此以外`P=/usr`

删除任何 perl 二进制文件等，

```
 rm -fr $P/bin/perl* $P/lib*/perl* $P/share/man/man?/perl*
 rm -fr $P/share/man/man?/*.3pm* $P/share/perl* 
```

重新安装所有原始软件包：

```
 yum install `cat /tmp/perlpkgs` 
```

# c# - 如何在 c# .net Windows 应用程序中加载第二个表单之前运行进度条？

> ID：13986376
> 
> 赞同：-2
> 
> 时间：2012-12-21T08:03:44.210
> 
> 标签：c#, winforms

我在 .net windows 应用程序中有两个表单，我想在第二个页面加载之前设置一个进度条，因为我的第二个页面在 10 到 15 秒后加载，所以，我想运行进度条直到第二个页面加载完成。

这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:19:49.113

这可能对你有好处。

```
namespace WindowsFormsApplication1
{
    public partial class Form2 : Form
    {
        public Form2()
        {
            InitializeComponent();

            timer1.Enabled = true;
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            timer1.Enabled = false;

            int d;

            for (d = 0; d <= 100; d++)
                progressBar1.Value = d;

            Hide();

            new Form1().Show();
        }
    }
} 
```

# delphi - 尽管 System.Generics.Defaults 正在使用中，但 TComparer.Construct 的未声明标识符

> ID：13986377
> 
> 赞同：1
> 
> 时间：2012-12-21T08:03:46.360
> 
> 标签：delphi

这是我试图学习的代码，但我被卡住了

```
uses
  System.Generics.Defaults, System.Generics.Collections, System.AnsiStrings,
  …

 try
      sortedDictKeys.Sort(TComparer.Construct(
       function (const L, R: integer): integer
       begin
         result := R - L;
       end
       )) ; 
```

> 未声明的标识符 TComparer.Construct(

我在 about.com 上尝试的上述代码中有太多实际参数错误

我试图了解泛型的基础知识。我被困在这里，不知道为什么它不会编译。

完整代码在这里：[http ://delphi.about.com/od/beginners/a/using-t-dictionary-hash-tables-in-delphi.htm](http://delphi.about.com/od/beginners/a/using-t-dictionary-hash-tables-in-delphi.htm)

此外，如果有人指出我在泛型参数中学习 TDictionary 的正确方向，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:18:31.417

您显示的代码正在尝试使用泛型类，但不包括类型。

我不确定在以前的 Delphi 版本中编译器是否从声明中推断出类型，但通常你必须声明类型，如下所示：

```
uses Generics.Defaults, Generics.Collections;

...

    sortedDictKeys := TList<Integer>.Create(dict.Keys);
    try
      sortedDictKeys.Sort(TComparer<Integer>.Construct(
       function (const L, R: integer): integer
       begin
         result := R - L;
       end
       )) ;
      for i in sortedDictKeys do
        log.Lines.Add(Format('%d, %s', [i, dict.Items[i]]));
    finally
      sortedDictKeys.Free;
    end; 
```

我从您链接的 about.com 文章中获得了代码，并对其进行了编译，但我没有对其进行测试。

根据评论中的要求，完整的功能如下所示：

```
var
  dict : TDictionary<integer, char>;
  sortedDictKeys : TList<integer>;
  i, rnd : integer;
  c : char;
begin
  log.Clear;
  log.Text := 'TDictionary usage samples';

  Randomize;

  dict := TDictionary<integer, char>.Create;
  try
    //add some key/value pairs (random integers, random characters from A in ASCII)
    for i := 1 to 20 do
    begin
      rnd := Random(30);

      if NOT dict.ContainsKey(rnd) then dict.Add(rnd, Char(65 + rnd));
    end;

    //remove some key/value pairs (random integers, random characters from A in ASCII)
    for i := 1 to 20 do
    begin
      rnd := Random(30);

      dict.Remove(rnd);
    end;

    //loop elements - go through keys
    log.Lines.Add('ELEMENTS:');
    for i in dict.Keys do
      log.Lines.Add(Format('%d, %s', [i, dict.Items[i]]));

    //do we have a "special" key value
    if dict.TryGetValue(80, c) then
      log.Lines.Add(Format('Found "special", value: %s', [c]))
    else
      log.Lines.Add(Format('"Special" key not found', []));

    //sort by keys ascending
    log.Lines.Add('KEYS SORTED ASCENDING:');
    sortedDictKeys := TList<integer>.Create(dict.Keys);
    try
      sortedDictKeys.Sort; //default ascending
      for i in sortedDictKeys do
        log.Lines.Add(Format('%d, %s', [i, dict.Items[i]]));
    finally
      sortedDictKeys.Free;
    end;

    //sort by keys descending
    log.Lines.Add('KEYS SORTED DESCENDING:');
    sortedDictKeys := TList<Integer>.Create(dict.Keys);
    try
      sortedDictKeys.Sort(TComparer<Integer>.Construct(
       function (const L, R: integer): integer
       begin
         result := R - L;
       end
       )) ;
      for i in sortedDictKeys do
        log.Lines.Add(Format('%d, %s', [i, dict.Items[i]]));
    finally
      sortedDictKeys.Free;
    end;

  finally
    dict.Free;
  end;
end; 
```

# c# - 如何对一个 SQL 字符串进行选择和更新查询？

> ID：13986379
> 
> 赞同：0
> 
> 时间：2012-12-21T08:04:04.270
> 
> 标签：c#, sql, select, sql-update

我想在我的 MySQL 数据库上做这样的事情。

`SELECT * FROM itemsordered WHERE purchaseOrder_ID = '@purchaseorderID';`

然后检索`stock_ID`itemsOrdered 数据库和已订购的项目数。

`string stockID = (dr["stock_ID"].ToString())`
`string restockQuantity = (dr["quantity"].ToString())`

然后使用它们来补充库存数据库中的现有数量

`UPDATE stocksdb SET quantity = @restockQuantity WHERE stock_ID = @stockID`

有没有更简单的方法来做到这一点？

`itemsordered`数据库列

`itemsOrdered_ID` `purchaseORder_ID` `stock_ID` `quantity` `status` `datereceived`

`stocksdb`数据库列

`stock_ID` `name` `onHandQuantity` `pricePerPiece` `dateUpdated`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:07:54.677

是的，还有更简单的方法。你可以`UPDATE`这样`JOIN`：

```
UPDATE stocksdb s
INNER JOIN itemsordered i ON s.stock_ID = i.stockID
SET s.quantity = i.onHand
WHERE i.purchaseOrder_ID = '@purchaseorderID'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T08:09:44.213

```
UPDATE stocksdb s
    INNER JOIN itemsordered i ON i.stock_ID = s.stock_ID
    SET quantity = i.quantity WHERE i.purchaseOrder_ID = '@purchaseorderID'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T08:11:18.037

您可以在更新语句中进行内部联接。

```
update stocksdb a inner join itemsordered b on a.stock_ID = b.stock_ID
set a.quantity = b.quantity
purchaseOrder_ID = '@purchaseorderID'; 
```

sql语句未经测试，但我想你明白了

干杯

# html - HTML 表格无法移除边框

> ID：13986389
> 
> 赞同：6
> 
> 时间：2012-12-21T08:05:22.477
> 
> 标签：html, css

我知道这可能是微不足道的，但我真的不知道出了什么问题。

我无法从我的桌子上删除边框。

![在此处输入图像描述](../Images/bb6e9b6054266c86519e245e3cb8cba1.png)

这是HTML

```
<table width="100%" border="0" cellpadding="0" cellspacing="0" style="border: none;padding: 0"> 
```

我也试过

```
<table width="100%" border="0" cellpadding="0" cellspacing="0" style="border:0;padding: 0" class="nothing"> 
```

但这没有用。谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-21T10:42:51.700

您还应该为 td 元素设置`border:none;`and `outline:none;`（不仅是表本身）和`border-collapse: collapse;`

由于您的课程“无”，请尝试：

```
.nothing
{
   border-collapse:collapse;
} 
.nothing td
{
   border:none;
   outline:none;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T08:07:13.523

尝试`border-collapse: collapse`

[https://developer.mozilla.org/en-US/docs/CSS/border-collapse](https://developer.mozilla.org/en-US/docs/CSS/border-collapse)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T08:11:24.793

试试这个：

```
style="border-collapse: collapse;" 
```

见：[http ://www.w3schools.com/cssref/pr_tab_border-collapse.asp](http://www.w3schools.com/cssref/pr_tab_border-collapse.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-01T01:34:23.267

尝试：

```
<table style="border-style: hidden;"> 
```

# c# - HttpWebRequest 突然停止工作，几次请求后没有收到响应

> ID：13986392
> 
> 赞同：7
> 
> 时间：2012-12-21T08:05:35.953
> 
> 标签：c#, .net, wpf, httpwebresponse

我正在使用 WPF .net 4.0 应用程序。我有一个搜索栏。对于每个搜索令牌，我需要对 8 个单独的 URL 执行 8 个 http 请求以获取搜索结果。一旦用户停止在搜索栏中输入，我会在 400 毫秒后向服务器发送 8 个请求。搜索 6 到 7 个搜索标记结果非常好。但在那之后，HttpWebRequest 突然停止工作。没有抛出异常，没有收到响应。我正在使用 Windows 7，我也禁用了防火墙。我不知道后续的http请求丢失在哪里。

谁能告诉我灯来解决这个问题？

下面是我的 HttpWebRequest 调用代码。

```
public static void SendReq(string url)
{
    // Create a new HttpWebRequest object.
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);

    request.ContentType = "application/x-www-form-urlencoded";
    request.Proxy = new WebProxy("192.168.1.1", 8000);

    // Set the Method property to 'POST' to post data to the URI.
    request.Method = "POST";

    // start the asynchronous operation
    request.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback), request);

}

private static void GetRequestStreamCallback(IAsyncResult asynchronousResult)
{
    HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;

    // End the operation
    Stream postStream = request.EndGetRequestStream(asynchronousResult);

    string postData = this.PostData;

    // Convert the string into a byte array. 
    byte[] byteArray = Encoding.UTF8.GetBytes(postData);

    // Write to the request stream.
    postStream.Write(byteArray, 0, byteArray.Length);
    postStream.Close();

    // Start the asynchronous operation to get the response
    request.BeginGetResponse(new AsyncCallback(GetResponseCallback), request);
}

private static void GetResponseCallback(IAsyncResult asynchronousResult)
{
    HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;

    // End the operation
    using(HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult))
    {
        using(Stream streamResponse = response.GetResponseStream())
        {
             using(StreamReader streamRead = new StreamReader(streamResponse))
             {
                 string responseString = streamRead.ReadToEnd();
                 Debug.WriteLine(responseString);
             }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-23T10:09:38.957

我想我很晚了，但我仍然想回答你的问题，也许它可以对其他人有所帮助。默认情况下，您发出的 HTTP 请求是 HTTP 1.1 请求。HTTP 1.1 请求默认有`Keep-Alive`连接。因此，当您向同一服务器 .net 框架发出太多请求时，只会使 x 不。的请求。

您应该通过以下方式关闭所有回复`response.Close()`

您还可以指定可以同时发出多少个请求。

```
ServicePointManager.DefaultConnectionLimit = 20; 
```

请注意，您必须`DefaultConnectionLimit`在您提出的第一个请求之前进行设置。[您可以在 msdn 上](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager%28v=vs.110%29.aspx)找到更多信息 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T13:09:13.620

我所看到的只是`GetRequestStreamCallback`你应该替换

```
postStream.Write(byteArray, 0, postData.Length); 
```

经过

```
postStream.Write(byteArray, 0, byteArray.Length); 
```

因为这些长度不一定相等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T20:07:04.883

@Somnath I am not sure if you found this answer, but if anyone else stumbles across this post with the same issue that Somnath and I were having.

We all try to do our due diligence in keeping memory clean and clear, but with streams we always will save unexplained issues if we make sure to flush the stream before we close it.

Replace This :

```
postStream.Write(byteArray, 0, byteArray.Length);
postStream.Close(); 
```

With This :

```
postStream.Write(byteArray, 0, byteArray.Length);
postStream.Flush();
postStream.Close(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-14T05:49:22.990

我遵循了你们所有人提供的所有建议，但无法阻止 HTTP 请求的静默失败。*但我找到了解决方法。直到现在，连我自己也无法得出最终的结论。*

**但是我的解决方法现在运行良好，没有任何失败。**

在**SendReq(string url)**函数中，我添加了以下代码行

```
System.Net.ServicePointManager.DefaultConnectionLimit = 100; // Just selected a random number for testing greater than 2
System.Net.ServicePointManager.SetTcpKeepAlive(true, 30, 30); // 30 is based on my server i'm hitting
System.Net.ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3;

request.KeepAlive = true; 
```

# mysql - mysql在where子句中使用逻辑+无效使用组函数

> ID：13986393
> 
> 赞同：1
> 
> 时间：2012-12-21T08:05:44.830
> 
> 标签：mysql, sql, logic, where

我有以下输出以下图像的 mysql 查询：

```
select
  v.invoicenumber,
  v.invoicedate,
  v.haulier,
  v.transporttype,
  count(v.loadnumber) as totalloads,
  sum(v.cost) as totalcost, 
  concat(SUM(if(invoiceapproved = 'yes', 1, 0)),' / ',count(v.loadnumber)) AS count,  SUM(if(invoiceapproved = 'yes', 1, 0)) as approved
from v2loads v  
  where v.invoiced='yes'   
  group by invoicenumber 
```

![在此处输入图像描述](../Images/63194775cfc70aa785f21a6a5a9e14fc.png) 此查询执行 100%。

我想要做的是过滤掉计数为 100% 的任何行/数据。在示例输出中，我想过滤掉发票 16，因为它是 2/2 和 100%。所以在哪里

```
 count(v.loadnumber) <> SUM(if(invoiceapproved = 'yes', 1, 0)) 
```

如果我将此逻辑添加到 where 子句中，则会因错误无效使用组函数而失败。所以下面的代码不起作用：

```
select v.invoicenumber,
  v.invoicedate,
  v.haulier,
  v.transporttype,
  count(v.loadnumber) as totalloads,
  sum(v.cost) as totalcost, 
  concat(SUM(if(invoiceapproved = 'yes', 1, 0)),' / ',count(v.loadnumber)) AS count, 
  SUM(if(invoiceapproved = 'yes', 1, 0)) as approved 
from v2loads v  
  where v.invoiced='yes' and 
  (count(v.loadnumber))<>(SUM(if(invoiceapproved = 'yes', 1, 0)))  
  group by invoicenumber 
```

我收到以下错误：

> 错误是`#1111`- 组功能的使用无效。

任何建议一如既往地受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:12:02.010

你可以这样做：

```
SELECT 
  *,
  CONCAT(approved, ' / ', totalloads) AS count, 
FROM
(
    SELECT
      v.invoicenumber,
      v.invoicedate,
      v.haulier,
      v.transporttype,
      COUNT(v.loadnumber)                    AS totalloads,
      SUM(v.cost)                            AS totalcost, 
      SUM(if(invoiceapproved = 'yes', 1, 0)) As approved 
    FROM v2loads v  
    WHERE v.invoiced='yes'
    GROUP BY invoicenumber
) t
WHERE totalloads <> approved; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:13:11.347

```
select v.invoicenumber,
v.invoicedate,
v.haulier,
v.transporttype,
count(v.loadnumber) as totalloads,
sum(v.cost) as totalcost, 
concat(SUM(if(invoiceapproved = 'yes', 1, 0)),' / ',count(v.loadnumber)) AS count,
SUM(if(invoiceapproved = 'yes', 1, 0)) as approved  
from v2loads v 
where v.invoiced='yes'
group by invoicenumber 
having (count(v.loadnumber))<>(SUM(if(invoiceapproved = 'yes', 1, 0))) 
```

# android - 将数据插入 SqliteDatabase Android 时出现 NullPointerException

> ID：13986402
> 
> 赞同：0
> 
> 时间：2012-12-21T08:06:18.017
> 
> 标签：android

安卓 2.3.3

```
static String name = "Database";
static int version = 1;

static SQLiteDatabase sqlDB;
static Cursor c;

public Database(Context context) {
    super(context, name, null, version);
    // TODO Auto-generated constructor stub

    sqlDB = getWritableDatabase();

    }

    @Override
    public void onCreate(SQLiteDatabase sqlDB) {
        // TODO Auto-generated method stub

    sqlDB.execSQL("create table if not exists Operations(Command Text, Pos1 Text, " +
                "Pos2 Text, Pos3 Text, Pos4 Text, Pos5 Text, Pos6 Text, Pos7 Text, Pos8 Text, Pos9 Text, Pos10 Text)");

        insertData();
    }

private void insertData() {
        // TODO Auto-generated method stub

        String addQuery ="ADD, add, and, had, ad, anddd, anndd, null, null, null, null";

                sqlDB.execSQL("insert into Operations values("+ addQuery +")"); 
                     //Exception at the above line
} 
```

共有 11 列。

我可以在数据库中插入 NULL 吗？如果是，我尝试将数据插入数据库的方式有什么问题吗？

正如rekire 所指出的，问题似乎出在getWritableDatabase() 上。我正在调用构造函数，Database db = new Database(this); 到目前为止，它在所有其他项目中都有效，因为我已经声明了名称和版本的局部变量并向工厂提供了 null。

> 回答 ::: 对不起，这是我的错误。我通过使用 Database.method() 而不是 object(db) 在数据库中调用了一个方法。这使得 SQLiteDatabase 和 Cursor 对象在 Database.java 文件中是静态的。当我将其更改为 db.method() 并删除 static 关键字时，它工作正常。

感谢您的宝贵时间.. 很抱歉给您带来麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:10:24.230

如果我猜对了，那么您的函数`getWritableDatabase()`将返回 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:35:50.443

在进行查询之前，您需要调用 open() 方法

```
mDbHelper.open(); //whitout this call mdb will be NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T08:48:03.513

```
private void insertData() {
    if(sqlDB == null) sqlDB.open();
    String addQuery ="ADD, add, and, had, ad, anddd, anndd, null, null, null, null";
    sqlDB.execSQL("insert into Operations values("+ addQuery +")");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T08:56:48.710

在你的

```
 public void onCreate(SQLiteDatabase sqlDB) 
```

你应该分配`sqlDB = sqlDB;` 然后你可以在 insertData() 中使用 sqlDB

# magento - 覆盖 Magento Controller_Abstract

> ID：13986403
> 
> 赞同：3
> 
> 时间：2012-12-21T08:06:29.670
> 
> 标签：magento, controller, overriding, magento-1.7

我们已修改 Magento 的 history.phtml 以显示所有订单，对受限网站没有任何限制。这是有效的，但是当我们尝试打印或查看订单时遇到了问题。我已经调试过了，问题出在 Magento 的`_canViewOrder`（位于`Mage_Sales_Controller_Abstract`）上。在该功能中，执行了额外的逻辑检查，以检查登录的用户是否可以查看/打印请求的订单：

```
if ($order->getId() && $order->getCustomerId() && ($order->getCustomerId() == $customerId)
            && in_array($order->getState(), $availableStates, $strict = true) 
```

由于我们这里有一些自定义开发，我们需要**重写此方法**以消除限制。不幸的是，我们在任何地方都找不到如何覆盖**Controller**类。

*请注意，我们确实知道如何覆盖路由器/控制器，但是这个位于 Controller 文件夹中并且是一个抽象类。*

谁能指出我正确的方向或为我提供示例 config.xml 来覆盖此类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T09:07:19.197

毕竟我决定使用快速方法。我已经覆盖了`Mage_Sales_OrderController`：

```
<?php
require_once Mage::getModuleDir('controllers', 'Mage_Sales') . DS . 'OrderController.php';
class MyCompany_MyModule_OrderController extends Mage_Sales_OrderController
{   
    /**
     * Check order view availability
     * Overridden from Mage_Sales_Controller_Abstract to
     * remove the customer restriction. We want to show all
     * orders to all customers on any time. 
     * 
     * TODO: Maybe in the future add a customer group restriction
     *
     * @param   Mage_Sales_Model_Order $order
     * @return  bool
     */
    protected function _canViewOrder($order)
    {
        $availableStates = Mage::getSingleton('sales/order_config')->getVisibleOnFrontStates();
        if ($order->getId() && in_array($order->getState(), $availableStates, $strict = true)) {
            return true;
        }

        return false;
    }
} 
```

在我的**config.xml**中，我告诉 Magento 先使用我的控制器并将其`OrderController`用作备份。由于我只覆盖了一个函数，因此不会触及所有现有代码。

```
<?xml version="1.0"?>    
...

<frontend>
...
    <routers>
...
        <sales>
            <args>
                <modules>
                    <MyCompany_MyModule before="Mage_Sales_OrderController">MyCompany_MyModule_Sales</MyCompany_MyModule>
                </modules>
            </args>
        </sales>
    </routers>
...
</frontend>
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T08:28:08.453

您可以通过将任何类放在`app/code/local`. 加载一个类时，Magento 首先查看本地，然后是社区，然后是核心。要实现您想要的，请将文件复制到`app/code/local/Mage/Sales/Controller/Abstract.php`并进行修改。

但是，请尽量避免这种方法，因为在升级时它会使事情变得有点混乱。您可能要考虑的一种选择是修改正在扩展的控制器`Mage_Sales_Controller_Abstract`，并覆盖`_canViewOrder`它的方法。见这里：[http ://drupal.org/project/magento](http://drupal.org/project/magento)

# android - 将图像设置为背景时，Android捏缩放不起作用

> ID：13986405
> 
> 赞同：0
> 
> 时间：2012-12-21T08:06:34.817
> 
> 标签：android, fullscreen, pinchzoom

我正在使用[此](https://github.com/MikeOrtiz/TouchImageView/blob/master/src/com/example/touch/TouchImageView.java)示例对我的图像视图进行缩放缩放属性。当我从 xml 将图像设置为 src 到这个 imageview 时，这个例子工作得很好。例如

```
 <com.zoom.TouchImageView
    android:id="@+id/imageView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="matrix"
    android:src="@drawable/idontcare" /> 
```

但是如果图像不够大，它不会覆盖全屏。所以如果我使用背景而不是 src

```
 <com.zoom.TouchImageView
    android:id="@+id/imageView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="matrix"
    android:background="@drawable/idontcare" /> 
```

它覆盖全屏，但捏缩放不起作用。如果我使用“fitXY”缩放类型的pinchzoom，也可以代替“matrix”。

如何实现全屏图像以及捏缩放？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:17:55.973

TouchImageView 只支持 src 不支持 ImageView 中的背景。因此，您可以做的是使用所需的图像设置您的 src 并将背景保留在其中作为图像的免费颜色。类似的东西。

```
 <com.zoom.TouchImageView
    android:id="@+id/imageView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="matrix"
    android:src="@drawable/idontcare"
    android:background="----- Background color of idontcare image--" /> 
```

试试看。！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:52:22.397

我将图像的位置从 sdcard 传递给此活动，并将图像视图设置为位图图像........

```
public class ZoomInZoomOut extends Activity implements OnTouchListener
{

    private static final String TAG = "Touch";
    @SuppressWarnings("unused")
    private static final float MIN_ZOOM = 1f,MAX_ZOOM = 1f;

    // These matrices will be used to scale points of the image
    Matrix matrix = new Matrix();
    Matrix savedMatrix = new Matrix();

    // The 3 states (events) which the user is trying to perform
    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    int mode = NONE;

    // these PointF objects are used to record the point(s) the user is touching
    PointF start = new PointF();
    PointF mid = new PointF();
    float oldDist = 1f;
    private String loc;
    private ImageView view;
    private Bitmap bmImg;
    private ArrayList<String> array_loc;
    private Button   next;
    private int total=0;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        try{
            setContentView(R.layout.full_image);

            Intent i = getIntent();
            loc = i.getExtras().getString("loc").toString().trim();
            int position = i.getExtras().getInt("id");

            next = (Button)findViewById(R.id.next); 
            view = (ImageView) findViewById(R.id.full_image_view);

            bmImg = BitmapFactory.decodeFile(loc);
            view.setImageBitmap(bmImg);
            view.setOnTouchListener(this);
            System.out.println("..."+position);

            array_loc = new ArrayList<String>();
            String targetPath = "/mnt/sdcard/DCIM/Camera/";
            File targetDirector = new File(targetPath);
            File[] files = targetDirector.listFiles();
            for (File file : files){
                array_loc.add(file.getAbsolutePath());
                total+=1;
            }
            System.out.println(array_loc);
            System.out.println(array_loc.get(1));

            next.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                }
            });
        }catch (Exception e) {
            System.out.println(e);
        }
    }

    public boolean onTouch(View v, MotionEvent event)
    {
        try{
            ImageView view = (ImageView) v;
            view.setScaleType(ImageView.ScaleType.MATRIX);
            float scale;

            dumpEvent(event);
            // Handle touch events here...

            switch (event.getAction() & MotionEvent.ACTION_MASK)
            {
                case MotionEvent.ACTION_DOWN:   // first finger down only
                    savedMatrix.set(matrix);
                    start.set(event.getX(), event.getY());
                    Log.d(TAG, "mode=DRAG"); // write to LogCat
                    mode = DRAG;
                    break;

                case MotionEvent.ACTION_UP: // first finger lifted

                case MotionEvent.ACTION_POINTER_UP: // second finger lifted

                    mode = NONE;
                    Log.d(TAG, "mode=NONE");
                    break;

                case MotionEvent.ACTION_POINTER_DOWN: // first and second finger down

                    oldDist = spacing(event);
                    Log.d(TAG, "oldDist=" + oldDist);
                    if (oldDist > 5f) {
                        savedMatrix.set(matrix);
                        midPoint(mid, event);
                        mode = ZOOM;
                        Log.d(TAG, "mode=ZOOM");
                    }
                    break;

                case MotionEvent.ACTION_MOVE:

                    if (mode == DRAG)
                    {
                        matrix.set(savedMatrix);
                        matrix.postTranslate(event.getX() - start.x, event.getY() - start.y); // create the transformation in the matrix  of points
                    }
                    else if (mode == ZOOM)
                    {
                        // pinch zooming
                        float newDist = spacing(event);
                        Log.d(TAG, "newDist=" + newDist);
                        if (newDist > 5f)
                        {
                            matrix.set(savedMatrix);
                            scale = newDist / oldDist; // setting the scaling of the
                                                        // matrix...if scale > 1 means
                                                        // zoom in...if scale < 1 means
                                                        // zoom out
                            matrix.postScale(scale, scale, mid.x, mid.y);
                        }
                    }
                    break;
            }

            view.setImageMatrix(matrix); // display the transformation on screen
        }catch (Exception e) {
            System.out.println(e);
        }
        return true; // indicate event was handled
    }

    /*
     * --------------------------------------------------------------------------
     * Method: spacing Parameters: MotionEvent Returns: float Description:
     * checks the spacing between the two fingers on touch
     * ----------------------------------------------------
     */

    private float spacing(MotionEvent event)
    {
        float x = event.getX(0) - event.getX(1);
        float y = event.getY(0) - event.getY(1);
        return FloatMath.sqrt(x * x + y * y);
    }

    /*
     * --------------------------------------------------------------------------
     * Method: midPoint Parameters: PointF object, MotionEvent Returns: void
     * Description: calculates the midpoint between the two fingers
     * ------------------------------------------------------------
     */

    private void midPoint(PointF point, MotionEvent event)
    {
        float x = event.getX(0) + event.getX(1);
        float y = event.getY(0) + event.getY(1);
        point.set(x / 2, y / 2);
    }

    /** Show an event in the LogCat view, for debugging */
    private void dumpEvent(MotionEvent event)
    {
        try{
            String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE","POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
            StringBuilder sb = new StringBuilder();
            int action = event.getAction();
            int actionCode = action & MotionEvent.ACTION_MASK;
            sb.append("event ACTION_").append(names[actionCode]);

            if (actionCode == MotionEvent.ACTION_POINTER_DOWN || actionCode == MotionEvent.ACTION_POINTER_UP)
            {
                sb.append("(pid ").append(action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
                sb.append(")");
            }

            sb.append("[");
            for (int i = 0; i < event.getPointerCount(); i++)
            {
                sb.append("#").append(i);
                sb.append("(pid ").append(event.getPointerId(i));
                sb.append(")=").append((int) event.getX(i));
                sb.append(",").append((int) event.getY(i));
                if (i + 1 < event.getPointerCount())
                    sb.append(";");
            }

            sb.append("]");
            Log.d("Touch Events ---------", sb.toString());
        } catch (Exception e) {
            System.out.println(e);
        }
    }

    @Override
    public void onBackPressed() {
        // TODO Auto-generated method stub

        Intent i = new Intent(getApplicationContext(),AndroidGridLayoutActivity.class);
        startActivity(i);
        ZoomInZoomOut.this.finish();
    }

} 
```

# java - JavaFX + java 7 和 Maven-2.2.1 下载错误

> ID：13986406
> 
> 赞同：1
> 
> 时间：2012-12-21T08:06:39.103
> 
> 标签：java, maven, javafx

我正在使用 Apache Maven-2.2.1 构建我的项目。

早些时候我运行 maven 步骤它成功下载了 maven 存储库。然后我使用的是 jdk1.6.0_10，我的 JAVA_HOME 环境变量具有相同的 jdk1.6.0_10 条目。

现在我已经将我的 Java 版本从 6 更新到 7，使用 jdk1.7.0_09 在 JavaFX 中构建应用程序，所以我将 JAVAFX_HOME 设置为指向 jdk1.7.0_09，但 JAVA_HOME 仍然指向 jdk1.6.0_10。这次 maven 下载成功，在构建时给了我以下错误-

```
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Internal error in the plugin manager executing goal 'com.sun.enterprise:osgiversion-maven-plugin:0.4.11:compute-osgi-version': Unable to load the mojo 'com.sun.enterprise:osgiversion-maven-plugin:0.4.11:compute-osgi-version' in the plugin 'com.sun.enterprise:osgiversion-maven-plugin'. A required class is missing: Lorg/apache/maven/shared/osgi/Maven2OsgiConverter;
org.apache.maven.shared.osgi.Maven2OsgiConverter
[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: Internal error in the plugin manager executing goal 'com.sun.enterprise:osgiversion-maven-plugin:0.4.11:compute-osgi-version': Unable to load the mojo 'com.sun.enterprise:osgiversion-maven-plugin:0.4.11:compute-osgi-version' in the plugin 'com.sun.enterprise:osgiversion-maven-plugin'. A required class is missing: Lorg/apache/maven/shared/osgi/Maven2OsgiConverter;
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:698)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
    at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
    at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
    at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.PluginManagerException: Unable to load the mojo 'com.sun.enterprise:osgiversion-maven-plugin:0.4.11:compute-osgi-version' in the plugin 'com.sun.enterprise:osgiversion-maven-plugin'. A required class is missing: Lorg/apache/maven/shared/osgi/Maven2OsgiConverter;
    at org.apache.maven.plugin.DefaultPluginManager.getConfiguredMojo(DefaultPluginManager.java:679)
    at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:468)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
    ... 17 more
Caused by: java.lang.NoClassDefFoundError: Lorg/apache/maven/shared/osgi/Maven2OsgiConverter;
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Class.java:2291)
    at java.lang.Class.getDeclaredField(Class.java:1880)
    at hidden.org.codehaus.plexus.util.ReflectionUtils.getFieldByNameIncludingSuperclasses(ReflectionUtils.java:47)
    at org.codehaus.plexus.component.composition.FieldComponentComposer.getFieldByName(FieldComponentComposer.java:212)
    at org.codehaus.plexus.component.composition.FieldComponentComposer.findMatchingField(FieldComponentComposer.java:171)
    at org.codehaus.plexus.component.composition.FieldComponentComposer.assembleComponent(FieldComponentComposer.java:62)
    at org.codehaus.plexus.component.composition.DefaultComponentComposerManager.assembleComponent(DefaultComponentComposerManager.java:68)
    at org.codehaus.plexus.DefaultPlexusContainer.composeComponent(DefaultPlexusContainer.java:1486)
    at org.codehaus.plexus.personality.plexus.lifecycle.phase.CompositionPhase.execute(CompositionPhase.java:29)
    at org.codehaus.plexus.lifecycle.AbstractLifecycleHandler.start(AbstractLifecycleHandler.java:101)
    at org.codehaus.plexus.component.manager.AbstractComponentManager.startComponentLifecycle(AbstractComponentManager.java:105)
    at org.codehaus.plexus.component.manager.AbstractComponentManager.createComponentInstance(AbstractComponentManager.java:95)
    at org.codehaus.plexus.component.manager.PerLookupComponentManager.getComponent(PerLookupComponentManager.java:48)
    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:331)
    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:440)
    at org.apache.maven.plugin.DefaultPluginManager.getConfiguredMojo(DefaultPluginManager.java:652)
    ... 19 more
Caused by: java.lang.ClassNotFoundException: org.apache.maven.shared.osgi.Maven2OsgiConverter
    at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at org.codehaus.classworlds.RealmClassLoader.loadClassDirect(RealmClassLoader.java:195)
    at org.codehaus.classworlds.DefaultClassRealm.loadClass(DefaultClassRealm.java:255)
    at org.codehaus.classworlds.DefaultClassRealm.loadClass(DefaultClassRealm.java:274)
    at org.codehaus.classworlds.RealmClassLoader.loadClass(RealmClassLoader.java:214)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
    ... 36 more
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 29 minutes 36 seconds
[INFO] Finished at: Fri Dec 21 13:07:49 IST 2012
[INFO] Final Memory: 13M/23M
[INFO] ------------------------------------------------------------------------ 
```

这是 Java 的问题还是在 Maven-2.2.1 版本中进行了任何更改。我下载了这个版本的 Maven 并与旧版本进行了比较，但没有发现任何变化。任何人都可以解决这个问题吗？

我尝试使用 JAVA_HOME 将 Maven-3.0.3（也尝试过 Maven-2.2.1，但出现上述错误）下载到 jdk1.7.0_09，我已经阐明了 JAVAFX_HOME 的用法，它不用于 maven 下载。我仍然遇到同样的问题，除了下载 Maven-3.0.3 是 -

```
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Internal error in the plugin manager executing goal 'com.sun.enterprise:osgiversion-maven-plugin:0.4.11:compute-osgi-version': Unable to load the mojo 'com.sun.enterprise:osgiversion-maven-plugin:0.4.11:compute-osgi-version' in the plugin 'com.sun.enterprise:osgiversion-maven-plugin'. A required class is missing: Lorg/apache/maven/shared/osgi/Maven2OsgiConverter;
org.apache.maven.shared.osgi.Maven2OsgiConverter
[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: Internal error in the plugin manager executing goal 'com.sun.enterprise:osgiversion-maven-plugin:0.4.11:compute-osgi-version': Unable to load the mojo 'com.sun.enterprise:osgiversion-maven-plugin:0.4.11:compute-osgi-version' in the plugin 'com.sun.enterprise:osgiversion-maven-plugin'. A required class is missing: Lorg/apache/maven/shared/osgi/Maven2OsgiConverter;
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:698)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
    at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
    at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
    at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.PluginManagerException: Unable to load the mojo 'com.sun.enterprise:osgiversion-maven-plugin:0.4.11:compute-osgi-version' in the plugin 'com.sun.enterprise:osgiversion-maven-plugin'. A required class is missing: Lorg/apache/maven/shared/osgi/Maven2OsgiConverter;
    at org.apache.maven.plugin.DefaultPluginManager.getConfiguredMojo(DefaultPluginManager.java:679)
    at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:468)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
    ... 17 more
Caused by: java.lang.NoClassDefFoundError: Lorg/apache/maven/shared/osgi/Maven2OsgiConverter;
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Class.java:2308)
    at java.lang.Class.getDeclaredField(Class.java:1897)
    at hidden.org.codehaus.plexus.util.ReflectionUtils.getFieldByNameIncludingSuperclasses(ReflectionUtils.java:47)
    at org.codehaus.plexus.component.composition.FieldComponentComposer.getFieldByName(FieldComponentComposer.java:212)
    at org.codehaus.plexus.component.composition.FieldComponentComposer.findMatchingField(FieldComponentComposer.java:171)
    at org.codehaus.plexus.component.composition.FieldComponentComposer.assembleComponent(FieldComponentComposer.java:62)
    at org.codehaus.plexus.component.composition.DefaultComponentComposerManager.assembleComponent(DefaultComponentComposerManager.java:68)
    at org.codehaus.plexus.DefaultPlexusContainer.composeComponent(DefaultPlexusContainer.java:1486)
    at org.codehaus.plexus.personality.plexus.lifecycle.phase.CompositionPhase.execute(CompositionPhase.java:29)
    at org.codehaus.plexus.lifecycle.AbstractLifecycleHandler.start(AbstractLifecycleHandler.java:101)
    at org.codehaus.plexus.component.manager.AbstractComponentManager.startComponentLifecycle(AbstractComponentManager.java:105)
    at org.codehaus.plexus.component.manager.AbstractComponentManager.createComponentInstance(AbstractComponentManager.java:95)
    at org.codehaus.plexus.component.manager.PerLookupComponentManager.getComponent(PerLookupComponentManager.java:48)
    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:331)
    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:440)
    at org.apache.maven.plugin.DefaultPluginManager.getConfiguredMojo(DefaultPluginManager.java:652)
    ... 19 more
Caused by: java.lang.ClassNotFoundException: org.apache.maven.shared.osgi.Maven2OsgiConverter
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at org.codehaus.classworlds.RealmClassLoader.loadClassDirect(RealmClassLoader.java:195)
    at org.codehaus.classworlds.DefaultClassRealm.loadClass(DefaultClassRealm.java:255)
    at org.codehaus.classworlds.DefaultClassRealm.loadClass(DefaultClassRealm.java:274)
    at org.codehaus.classworlds.RealmClassLoader.loadClass(RealmClassLoader.java:214)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 36 more
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 19 minutes 30 seconds
[INFO] Finished at: Fri Dec 21 19:13:39 IST 2012
[INFO] Final Memory: 15M/63M
[INFO] ------------------------------------------------------------------------ 
```

如何修复这些错误？

谢谢！

# ruby-on-rails - 如何正确构建带有参数的URI？

> ID：13986417
> 
> 赞同：3
> 
> 时间：2012-12-21T08:07:35.850
> 
> 标签：ruby-on-rails, ruby

我需要为类似的地址构建 URI

```
http://example.org/controller?param1=value1&param2=value2 
```

带有控制器路径变量

```
controller_path = example.org/controller 
```

以及一个大小灵活的数组

```
params = {:param1 => 'value1', :param2 => 'value2'} 
```

如何通过自己的类方法正确构建 URI？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:16:02.053

```
controller_path(:param1 => 'value1', :param2 => 'value2') 
```

或者

```
controller_path(params) # in your case 
```

# asp.net - 当我加载我的 URL 时，IIS 中实际发生了什么？

> ID：13986419
> 
> 赞同：3
> 
> 时间：2012-12-21T08:08:04.647
> 
> 标签：asp.net, asp.net-mvc, iis, web-applications, web

首先，希望大家有一个愉快的圣诞节:)

过去几年我一直是桌面应用程序开发人员，但我现在全职从事 ASP.NET 工作（工作变动 :)）

所以在过去的几天里，我发现自己越来越想知道当说新访问者将访问我的 URL 时实际发生了什么......

我刚刚开发了一个非常简单的基于 Signal R 的应用程序，我需要在所有会话中共享一些单例，现在在桌面上非常简单，但我根本不确定网络:(

所以基本上，这是这个问题..

当说有 5 个人访问我的 URL 时，IIS 实际上做了什么，他们都获得了一个单独的应用程序实例还是使用同一个实例？如果你能把它分解成简单的术语，那就太棒了！:)

另外，假设我有一个具有静态单例的类库 - 它是所有会话中该类的唯一实例？

希望这是有道理的:)

谢谢你的帮助！

干杯。圣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:13:21.323

这称为**IIS 生命周期**
必须从 Microsoft 和 IIS 的创建者处直接阅读完整的详细信息。
并非所有 IIS 都相同。

[IIS 7.0 的生命周期概述](http://msdn.microsoft.com/en-us/library/bb470252(v=vs.100).aspx)

[IIS 5.0 和 6.0 的生命周期概述](http://msdn.microsoft.com/en-us/library/ms178473(v=vs.100).aspx)

如果您在互联网上搜索，还有更多。

> 他们是否都获得了应用程序的单独实例，或者他们使用相同的实例

如果您为同一个应用程序[（网络花园）](https://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/659f2e2c-a58b-4770-833b-df96cabe569e.mspx?mfr=true)使用多个池，那么它们的请求将在池之间拆分，或者一个池，一个实例负责处理页面。

该页面可以从不同的线程处理，但会话上有一个全局锁定，因此如果您使用 MS 会话，该页面将串行处理（预计没有使用会话的那个）

每个池都是一个保存静态数据的实例，并且对于来自该池的所有请求都是相同的。如果您使用两个池，则您有两组不同的静态数据。

关于会话锁定的一些问题： [尝试使 Web 方法异步](https://stackoverflow.com/questions/11325150/trying-to-make-web-method-asynchronous)，[Web 应用程序在处理共享同一会话的另一个 Web 应用程序时被阻止](https://stackoverflow.com/questions/9426673/web-app-blocked-while-processing-another-web-app-on-sharing-same-session)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T08:48:07.817

如果您有默认的 IIS 安装，那么您将拥有一个应用程序池来服务所有请求。因此，在您的示例中，所有 5 个人都将共享一个静态单例。

但是，如果您需要扩展，那么您将拥有多个应用程序池。

应用程序池是您的应用程序的一个实例。

如果静态是用于数据库连接和类似的，那么我建议你看看替代方法，这样你就不需要静态了。如果它与您的用户感兴趣的业务相关，那么如果您需要扩展，您最好寻找其他方式在客户之间共享它。

# windows - 通过 Win32 API 从服务创建 Windows 会话

> ID：13986420
> 
> 赞同：5
> 
> 时间：2012-12-21T08:08:22.340
> 
> 标签：windows, winapi

我有一个 Windows 服务，可以通过调用“CreateProcessAsUser”函​​数在用户 Windows 会话中创建可执行文件。只要那里已经有一个 Windows 会话，它就可以正常工作。如果还没有，我希望能够以编程方式创建一个。这是可能的吗？似乎无法找到执行此操作的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:50:16.480

这不是我提出的问题的完全解决方案，但是如果您明白我的意思，那么通过提出这个问题来帮助实现我想要实现的目标的解决方案。

您可以将 Windows 配置为在启动时自动登录，而不是让 Windows 服务创建服务器会话。这仍然意味着有人可能会意外注销，但可以解决会话消失的主要原因：服务器正在重新启动。使用以下步骤激活自动登录：

1.  按键盘上的 Windows 键 + R 启动“运行”对话框。
2.  输入 regedit 并按回车键打开注册表编辑器
3.  然后浏览到 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WindowsNT\CurrentVersion\Winlogon\
4.  设置 AutoAdminLogon = 1 （如果不存在它的字符串变量，则创建它）
5.  设置 DefaultUserName = 你的用户名（如果不存在它的字符串变量，则创建它）
6.  设置 DefaultPassword = 你的密码（如果不存在它的字符串变量，则创建它）

说明取自这篇文章： [http ://channel9.msdn.com/Blogs/coolstuff/Tip-Auto-Login-Your-Windows-7-User-Account](http://channel9.msdn.com/Blogs/coolstuff/Tip-Auto-Login-Your-Windows-7-User-Account)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T20:31:26.920

您不能从服务创建新会话。会话由操作系统管理。当用户以交互方式登录时会创建新的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T08:12:22.180

LogonUser 函数呢？

[http://winapi.freetechsecrets.com/win32/WIN32LogonUser.htm](http://winapi.freetechsecrets.com/win32/WIN32LogonUser.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-14T09:14:07.890

@Robert，我知道这是一个老问题，你已经找到了适合你的东西，但就我而言，我正在寻找与你原来的问题类似的东西，我终于弄明白了，所以我想我会分享. 我的解决方案仅使用 .NET 和 COM 引用，而不是您标题中提到的 Win32 API，但我猜这对您来说并不是真正的要求。

我编写了一个简单的实用程序来使用远程桌面 ActiveX 控件（COM 参考）。如果您将此代码粘贴到类库中，您可以通过简单地传递服务器、用户名、域和密码来调用它，并且一切都为您完成，无需任何其他交互。一旦方法完成，您就可以调用您的“CreateProcessAsUser”代码。我以某种方式编写了此实用程序，以便您每次都可以调用它，但启动 RDP 会话需要几秒钟，所以为了性能起见，我建议您编写另一种方法来枚举会话并查看您的用户是否已登录和仅当您确定您的用户未登录时才调用此实用程序（这就是我在实际项目中所做的）。如果你觉得你在评论中的那篇文章需要帮助，我

这是一个返回我的问题的链接，它比这个问题有更多的要求/细节。

[从控制台或 Windows 服务以编程方式创建 Windows 会话](https://stackoverflow.com/questions/52801093/create-windows-session-programmatically-from-console-or-windows-service/52801094#52801094)

这是我的 RDP 实用程序。将此代码放入类库后，您可以从控制台应用程序、winForms 应用程序或运行在同一台机器上或远程机器上的 Windows 服务调用它。

```
using System;
using System.Diagnostics;
using System.Threading;
using System.Threading.Tasks;
using System.Windows.Forms;
using AxMSTSCLib;

namespace Utility.RemoteDesktop
{
    public class Client
    {
        private int LogonErrorCode { get; set; }

        public void CreateRdpConnection(string server, string user, string domain, string password)
        {
            void ProcessTaskThread()
            {
                var form = new Form();
                form.Load += (sender, args) =>
                {
                    var rdpConnection = new AxMSTSCLib.AxMsRdpClient9NotSafeForScripting();
                    form.Controls.Add(rdpConnection);
                    rdpConnection.Server = server;
                    rdpConnection.Domain = domain;
                    rdpConnection.UserName = user;
                    rdpConnection.AdvancedSettings9.ClearTextPassword = password;
                    rdpConnection.AdvancedSettings9.EnableCredSspSupport = true;
                    if (true)
                    {
                        rdpConnection.OnDisconnected += RdpConnectionOnOnDisconnected;
                        rdpConnection.OnLoginComplete += RdpConnectionOnOnLoginComplete;
                        rdpConnection.OnLogonError += RdpConnectionOnOnLogonError;
                    }
                    rdpConnection.Connect();
                    rdpConnection.Enabled = false;
                    rdpConnection.Dock = DockStyle.Fill;
                    Application.Run(form);
                };
                form.Show();
            }

            var rdpClientThread = new Thread(ProcessTaskThread) { IsBackground = true };
            rdpClientThread.SetApartmentState(ApartmentState.STA);
            rdpClientThread.Start();
            while (rdpClientThread.IsAlive)
            {
                Task.Delay(500).GetAwaiter().GetResult();
            }
        }

        private void RdpConnectionOnOnLogonError(object sender, IMsTscAxEvents_OnLogonErrorEvent e)
        {
            LogonErrorCode = e.lError;
        }
        private void RdpConnectionOnOnLoginComplete(object sender, EventArgs e)
        {
            if (LogonErrorCode == -2)
            {
                Debug.WriteLine($"    ## New Session Detected ##");
                Task.Delay(10000).GetAwaiter().GetResult();
            }
            var rdpSession = (AxMsRdpClient9NotSafeForScripting)sender;
            rdpSession.Disconnect();
        }
        private void RdpConnectionOnOnDisconnected(object sender, IMsTscAxEvents_OnDisconnectedEvent e)
        {
            Environment.Exit(0);
        }
    }
} 
```

# android - android sqlite中的分页

> ID：13986425
> 
> 赞同：0
> 
> 时间：2012-12-21T08:08:46.270
> 
> 标签：android, sqlite

如何在 android sqlite 中使用分页？任何直接在java中的示例代码？

我在用

```
Cursor cursor = mDb.query(DATABASE_TABLE, new String[] {KEY_DATE, KEY_REPS, 
KEY_WEIGHT}, null, null, null, null, KEY_DATE + "DESC", ???); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:44:46.200

Here there are an similar question/answer [Limit Records fetched in Android (Sqlite database)](https://stackoverflow.com/questions/2691513/limit-records-fetched-in-android-sqlite-database)

一些建议是在您的查询中使用 LIMIT ... OFFSET，或者创建您的自定义光标适配器。我想这取决于您要在哪个级别进行分页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-14T11:55:50.433

您可以将*LIMIT*关键字与 index 和 no 一起使用。获取某些记录的行，它是这样的：

```
Cursor cursor = mDb.query(DATABASE_TABLE, new String[] {KEY_DATE,   KEY_REPS, 
KEY_WEIGHT}, null, null, null, null, KEY_DATE + "DESC LIMIT index, No. of records to fetch", ???); 
```

希望这可以帮助。

# eclipse - 创建自定义 Eclipse 安装？

> ID：13986429
> 
> 赞同：2
> 
> 时间：2012-12-21T08:09:15.600
> 
> 标签：eclipse, plugins, installation

我通常使用 Eclipse 安装许多工具，例如 Subversive、PMD、EclEmma 等。每次更新 Eclipse 时，我都必须手动检查并添加每个工具。有没有办法打包工具，以便我可以将它们安装在一起而不是单独安装？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:26:09.853

我知道两种可能的解决方案 - 它们都不是你所要求的，但是......

*   使用导出向导“安装”->“已安装的软件项到文件”创建一个描述性文件，其中包含您使用的功能和更新站点。您可以选择要包含的功能。另请注意，生成的`p2f`文件不包括二进制功能和插件本身 - 只是一个描述性参考。（我应该说，我在使用相应的导入向导时遇到了一些问题，但是 YMMV ......）
*   或者，您可以使用导入向导“安装”->“从现有安装”将功能从*旧的（er）* Eclipse 安装安装到*新的（er）* Eclipse 安装中。这是一次性操作，然后您可以通过适当的更新站点以通常的方式更新已安装的功能（这些通常是自动安装的）。

就个人而言，我使用第二种方法，因为这样我就不必`p2f`在发现一些新的有趣功能时不断更新文件，而且 - 如上所述 - 导入向导并不总是像我预期的那样工作。

无论如何，我将旧的 Eclipse 安装保留了一段时间，以确保在出现问题时我可以依靠一些东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:12:22.667

我想到的第一件事就是下载你需要的每一个插件。将其存储在一个文件夹中，然后在 Eclipse 更新对话框中，选择该文件夹来代替 URL。

不记得您是否还需要编译某种已安装插件的 XML 列表。

使用此设置，每次安装 Eclipse 时，您只需使用其更新过程并安装您找到的每个软件包，并将其用作您的目录的更新 URL。

PS：好好看看这个[关于SO的优秀问题](https://stackoverflow.com/questions/1371176/downloading-eclipse-plug-in-update-sites-for-offline-installation?rq=1)

# objective-c - 为 iOS 6 创建视图

> ID：13986432
> 
> 赞同：1
> 
> 时间：2012-12-21T08:09:40.720
> 
> 标签：objective-c, ios, xcode

我想知道是否有人可以向我解释如何创建适用于 iPhone 5 和以前型号的视图。我做了我的研究，发现有人建议使用

```
setAutoresizingMask:UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight 
```

但我对此有以下疑问。

1.  如果我在界面生成器中构建并计划使用上述代码行，我是否将尺寸选项保留在“Retina 4 全屏”？

2.  上述代码行是否会考虑先前在 3.5 英寸屏幕上设置在特定位置的图像？

3.  是否有一个通用的地方我可以将这行代码放在我的应用程序中，以便它为所有视图执行，还是我需要将它放在每个 viewController 和 ViewDidLoad 中？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:24:41.120

如果您打算仅在 iOS6 上部署应用程序，那么您可以使用自动布局选项。

如果您的目标是 iOS 6.0 和以前的版本，那么您可以使用 autoresizingMask 调整视图大小。您可以使用的另一种方法是为 iPhone 5 和 iPhone 4S 设计单独的视图。与通用应用程序一样，检查屏幕大小并相应地加载视图。

谢谢，
吉姆。

# architecture - 在同一台服务器上设置 redis 及其客户端应用程序

> ID：13986434
> 
> 赞同：4
> 
> 时间：2012-12-21T08:09:42.573
> 
> 标签：architecture, redis

我正在浏览设置配置平台/服务的选项，该平台/服务将为所有消费者客户端服务/应用程序提供配置。要求是这应该设置在专用服务器上。

我正在探索 redis 是否可以成为支持复杂键值配置的可能选项之一。如果要在与消费者不同的服务器上设置 redis，则 GET 将涉及一些网络延迟（我*不是*非常担心 SET，因为它们将比 GET 少得多）。我是否应该在客户端机器上设置另一个缓存层（例如 EhCache 或其他）以避免机器到机器的网络延迟？在这种情况下需要处理缓存同步和失效。另外，我读到redis支持复制，但是客户端服务机器上的从属服务器（它是主服务器的确切副本）会占用大量内存，因为redis主要使用RAM来存储所有数据。此外，它们都可以竞争 CPU/资源。

注意：客户端服务/应用程序当前部署在 Amazon ec2 中型实例上。类似的也可以用于 redis。

请让我知道这种架构是否有任何好的替代方案，或者这根本不好。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T08:37:41.880

如果它们都是同一区域中的 EC2 实例，那么我不会太担心网络延迟。如果您假设您将拥有大量数据，我会为 redis 使用 m1large 或 m1xlarge。根据您的要求，缓存可能有意义，也可能没有意义。

我在 EC2 中使用了 redis，每秒处理数千个事务，没有任何问题。

# javascript - 刷新表格而不刷新整个页面以显示更新的数据

> ID：13986437
> 
> 赞同：1
> 
> 时间：2012-12-21T08:09:50.800
> 
> 标签：javascript, jquery, mysql, ajax

我希望在同一页面上列出的列表页面中显示新添加的数据。我的问题是，将数据添加到我的数据库后，我需要重新加载整个页面才能查看新数据。如何在不重新加载整个页面的情况下查看？

![列表页面](../Images/168103caaf1c1da1d98a4f1669206320.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:43:15.410

If you only want to refresh the table, you can use this jQuery plugin: [http://datatables.net](http://datatables.net)

You can call table refresh functions whenever you want. The plugin works using AJAX. To work with you need to have little javascript knowledge as well.

You can find sort of example/demo from here. [http://editor.datatables.net/tutorials/api_manipulation](http://editor.datatables.net/tutorials/api_manipulation)

However if you really want to do this get the concept and you also can develop same thing. You just require to learn some AJAX.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:34:28.577

在将数据保存到数据库后单击按钮，您需要使用以下脚本。无需往返于服务器到客户端，而是操作客户端。

```
$("#btnSubmit").click(function () {
$('#myForm').ajaxForm({ 
    success:   function(){
       $('#myTable tr:first').after('<tr><td>' + $("#Name").val() + '</td></tr>');
    }
}); 
}); 
```

# android - PhoneGap 创建脚本错误

> ID：13986438
> 
> 赞同：0
> 
> 时间：2012-12-21T08:09:56.693
> 
> 标签：android, cordova, cordova-2.0.0

我按照设置指南进行操作，该指南可在[此处](http://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)找到，但是当我运行创建脚本时，我得到：

`An error occurred. Deleting project...`

我的`bash_profile`文件如下所示：

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into shell session *as a function*

export PATH=${PATH}:/Development/android-sdk-macosx/platform-tools:/Development/android-sdk-macosx/tools 
```

当我跑步时，`./bin/create ~/Desktop/myapp com.myapp.special MyApp`我得到：

`An error occurred. Deleting project...`

（我没有文件夹`Desktop/myapp`）

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:26:45.690

我不得不重新安装平台工具才能让它工作。

# python - 如何在本地 OS X 机器上安装 reddit？

> ID：13986439
> 
> 赞同：0
> 
> 时间：2012-12-21T08:10:02.400
> 
> 标签：python, web-applications, pylons, osx-mountain-lion, reddit

他们为 Ubutu 提供了安装脚本。但是如何在 Mac OS X 机器上安装 reddit？[山狮]

此处列出了依赖项：[https ://github.com/reddit/reddit/wiki/Dependencies](https://github.com/reddit/reddit/wiki/Dependencies)

我该如何安装这些？只需谷歌这些，获取 .dmg 并安装？

接下来，这个安装指南也适用于 OS X 吗？链接 - [https://github.com/reddit/reddit/wiki/Install-guide](https://github.com/reddit/reddit/wiki/Install-guide) 如果不是我必须做的所有更改？

我是一个初学者，我非常感谢任何关于此的帮助。谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:22:01.230

不要尝试在 OSX 上原生运行。无关紧要。只需执行以下操作：

1.  为 OS X安装[Virtualbox 。](https://www.virtualbox.org/)
2.  创建合适的 Ubuntu 12.04 虚拟机。
3.  运行安装脚本。

即使您运行的是 Ubuntu 12.04，我仍然会推荐这种方法，这样您就可以将日常使用所需的环境与您可能不时需要的 reddit 环境完全分开。

# c# - 将许多文件插入具有不同线程的列表框中

> ID：13986445
> 
> 赞同：1
> 
> 时间：2012-12-21T08:10:35.740
> 
> 标签：c#, winforms

a 构建一个应用程序来获取视频文件（avi、mpeg..）并转换为另一种格式。

我的应用程序有我添加文件的列表框，我添加了添加目录的选项，所以使用`SafeFileEnumerator`类（我在这里找到它）我检查目录根并只收到具有权限的文件夹，当然还有所有文件，而不是我想要添加所有相关文件都放入我的列表框中，但如果线程为了避免 mt GUI 冻结，我想这样做，所以我尝试使用 BackgroundWorker，我认为我需要一些帮助来完成它，因为在我的情况下它不起作用适当地：

```
private void btnAddDirettory_Click_1(object sender, EventArgs e)
{
    string fileToAdd = string.Empty;
    BackgroundWorker backgroundWorker = null;
    DialogResult dialog = folderBrowserDialog1.ShowDialog();
    if (dialog == DialogResult.OK)
    {
        btnAddfiles.Enabled = false;
        btnAddDir.Enabled = false;
        btnPlay.Enabled = false;
        someClass myClass= new someClass ();

        foreach (string fileName in SafeFileEnumerator.EnumerateFiles(folderBrowserDialog1.SelectedPath, "*.*", SearchOption.AllDirectories))
        {
            backgroundWorker = new BackgroundWorker();
            backgroundWorker.WorkerReportsProgress = true;
            backgroundWorker.DoWork +=
            (s1, e1) =>
            {
                if (myClass.iAviFormat(fileName))
                {
                    if (myClass.isCorrectFormat(fileName))
                    {
                        backgroundWorker.ReportProgress(0, fileName);
                        //listBoxFiles.Items.Add(fileName);
                    }
                    else if (!myClass.isCorrectFormat(fileName))
                    {
                        fileToAdd = myClass.getNewFileName(fileName);
                        backgroundWorker.ReportProgress(0, fileToAdd);
                    }
                }
            };
        }

        backgroundWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(
        (s1, e1) =>
        {
            btnPlay.Enabled = true;
            btnClear.Enabled = true;
            btnAddfiles.Enabled = true;
            btnAddDir.Enabled = true;
        });

        backgroundWorker.ProgressChanged +=
         (s1, arguments) =>
         {
             listBoxFiles.Items.Add(arguments.UserState);
         };

        backgroundWorker.RunWorkerAsync();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:14:58.280

我认为您应该将 foreach 移至后台工作人员 DoWork 中。

就像是

```
backgroundWorker = new BackgroundWorker();
backgroundWorker.WorkerReportsProgress = true;
backgroundWorker.DoWork +=
(s1, e1) =>
{
    string fileToAdd = string.Empty;
    someClass myClass= new someClass ();

    foreach (string fileName in SafeFileEnumerator.EnumerateFiles(folderBrowserDialog1.SelectedPath, "*.*", SearchOption.AllDirectories))
    {
        if (myClass.iAviFormat(fileName))
        {
            if (myClass.isCorrectFormat(fileName))
            {
                backgroundWorker.ReportProgress(0, fileName);
                //listBoxFiles.Items.Add(fileName);
            }
            else if (!myClass.isCorrectFormat(fileName))
            {
                fileToAdd = myClass.getNewFileName(fileName);
                backgroundWorker.ReportProgress(0, fileToAdd);
            }
        }
    }
}; 
```

# html - 在php中发送html不起作用

> ID：13986451
> 
> 赞同：0
> 
> 时间：2012-12-21T08:11:25.550
> 
> 标签：html, email, sendmail, php

```
// Assign contact info
    $name = stripcslashes($_POST['name']);
    $emailAddr = stripcslashes($_POST['email']);
    $issue = stripcslashes($_POST['issue']);
    $comment = stripcslashes($_POST['message']);
    $subject = stripcslashes($_POST['subject']);    

// Set headers
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

$headers = "From: $name <$emailAddr>";
$headers .= "\r\n";
$headers .= "Reply-To: $emailAddr"; 

// Format message
$contactMessage =
"<div>
<p><strong>Name:</strong> $name <br/>
<strong>E-mail:</strong> $emailAddr <br/>

<p><strong>Message:</strong> $comment </p>

<p><strong>Sending IP:</strong> $_SERVER[REMOTE_ADDR]<br/>
<strong>Sent via:</strong> $_SERVER[HTTP_HOST]</p>
</div>";

// Send and check the message status
$response = (mail('myemail@myserver.com', $subject, $contactMessage, $headers) ) ? "success" : "failure" ;
$output = json_encode(array("response" => $response));

header('content-type: application/json; charset=utf-8');
echo($output); 
```

`

上面的代码有什么问题？在我从部分更改标题后，我没有收到 html 电子邮件我只收到纯文本电子邮件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:18:45.647

改变

```
$headers = "From: $name <$emailAddr>"; 
```

至

```
$headers .= "From: $name <$emailAddr>"; // you forgot to concatenation previous headers. 
```

# methods - 内置方法如何做事？

> ID：13986452
> 
> 赞同：3
> 
> 时间：2012-12-21T08:11:26.740
> 
> 标签：methods

只是最近一直在我脑海里玩的东西。我所说的内置方法的Java示例：`System.out.println("hi");`. 这种方法实际上是如何让“hi”出现在屏幕上的？我可以想象方法中的方法中的一长串方法，但是“基础”方法将如何做它应该做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:49:23.330

这是 println 的一个很好的例子。[http://luckytoilet.wordpress.com/2010/05/21/how-system-out-println-really-works/](http://luckytoilet.wordpress.com/2010/05/21/how-system-out-println-really-works/)

本质上，调用通过调用堆栈进行处理，直到它到达本机代码，然后您进入操作系统特定代码，即 Windows API。

# c# - 将获取数据保存到局部变量

> ID：13986454
> 
> 赞同：0
> 
> 时间：2012-12-21T08:11:45.540
> 
> 标签：c#, javascript, asp.net-mvc, web, get

我想知道有没有办法保存网站发送到服务器的获取参数，以便通过 java 脚本保存到本地变量。像 cookie 或会话变量之类的东西。

编辑1：

我也愿意将它保存到服务器端 cookie，但我仍然不知道该怎么做。

我在 VisualStudio 中使用 MVC4 和 C# 作为服务器端语言。如果有更简单的方法可以在服务器端做到这一点，我就准备好了。

编辑 2

评论游戏我一个想法，我设法通过会话类服务器端获得解决方案。谢谢大家 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:14:34.903

```
function getUrlParams() {
  var params = {};
  window.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(str,key,value) {
    params[key] = value;
  });

  return params;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:52:43.653

使用这种`Session.AddItem`方法，我能够保存我需要的所有数据。谢谢你们的帮助。

# linux - 在linux中生成字符串的文本文件

> ID：13986455
> 
> 赞同：0
> 
> 时间：2012-12-21T08:11:51.283
> 
> 标签：linux

我需要生成 3 个字符的字符串文本文件，允许重复字符串。我已经搜索了一种方法来执行此操作，但我只能找到生成完全随机文本的方法。由于我还是一个新手，我不知道如何进行。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:43:14.037

Using bash to get combinations inefficiently:

```
a[0]=a; a[1]=b; a[2]=c;
for i in $(seq 0 26); do
  r1=$(expr $i % 3)
  r2=$(expr $i / 3 % 3)
  r3=$(expr $i / 9 % 3)
  echo ${a[$r1]}${a[$r2]}${a[$r3]}
done 
```

A faster way:

```
a[0]=a; a[1]=b; a[2]=c;

for r1 in $(seq 0 2); do
  for r2 in $(seq 0 2); do
    for r3 in $(seq 0 2); do
      echo ${a[$r1]}${a[$r2]}${a[$r3]}
    done
  done
done 
```

# c++ - 从哪里获得最新的 OpenGL32.lib？

> ID：13986459
> 
> 赞同：14
> 
> 时间：2012-12-21T08:12:18.740
> 
> 标签：c++, visual-studio-2010, opengl-3

这个让我发疯。我一直在寻找两天，但找不到任何答案。我想用 Visual Studio 2010 / C++ 用 OpenGL 3（或更新版本）开发一些东西。

微软提供的头文件和库太旧了，无法支持 OpenGL 3，所以我正在尝试寻找更新的版本。我很容易在 OpenGL 注册表 (http://www.opengl.org/registry/) 中找到头文件，但在任何地方都找不到 OpenGL32.lib。没有它我应该如何链接程序？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T08:19:48.187

没有更新的 Windows OpenGL 库，也不会有。他们决定停止使用[OpenGL 1.1，甚至将其称为遗留图形](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374278%28v=vs.85%29.aspx)。

但是，您可以使用[load opengl function](http://www.opengl.org/wiki/Load_OpenGL_Functions)，这就是人们访问最新 opengl 功能的方式。

您还可以使用[GLEW 库](http://www.opengl.org/wiki/OpenGL_Loading_Library)来访问 opengl 函数。

# c# - 如何编辑包？

> ID：13986460
> 
> 赞同：0
> 
> 时间：2012-12-21T08:12:21.110
> 
> 标签：c#, visual-studio-2012, package, nuget-package

我为我正在从事的项目安装的软件包有问题。我需要使用的类之一是私有的。我怎样才能访问这些课程？或者如何编辑项目文件以便进行所需的更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:18:49.303

如果您无法直接获取代码，您可以在代码中编写一个扩展方法，该方法执行与您需要访问的类相同的功能。如果您无法在 Github 或托管它的任何地方获取源代码，请使用 Dotpeek 或 Reflector 等反编译器查看源代码并将您的扩展方法基于私有方法。

# php - HTML GET 和 POST 方法

> ID：13986463
> 
> 赞同：6
> 
> 时间：2012-12-21T08:12:22.983
> 
> 标签：php, html, forms, post, get

是否一定要求`action="abc.php"`in FORM标签必须有PHP、JSP、ASP文件？不能简单的 HTML 代码显示提交的数据`FORM`吗？

换句话说，

**文件：abc.html**

```
<form method="post" action="xyz.html">
     <input type="text" name="name" id="name" value="Enter your name here" />
</form> 
```

或者

```
<form method="get" action="xyz.html">
         <input type="text" name="name" id="name" value="Enter your name here" />
</form> 
```

现在在 file 中，我可以**仅**使用HTML 代码`xyz.html`显示在 abc.html 中输入的名称吗？

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T08:16:01.213

HTML 本身无法访问提交的 POST/GET 数据。您需要一种服务器端语言（PHP、python、ruby、.NET、...）来将这些值放入 HTML。

话虽如此，您可以发布到 HTML 页面，但您将无法对它做任何事情。

您可以使用 JavaScript[访问 GET 变量](https://stackoverflow.com/questions/1586330/access-get-directly-from-javascript)，但不能使用 POST。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T08:17:45.747

您不能仅使用 html 来显示它。您需要有一种服务器端脚本语言，如 PHP、ASP.Net 或 java 等...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T08:17:32.740

使用这些服务器端扩展的目的是通过 POST 或 GET 的方法来操作从服务器上的表单元素发送的数据，但是如果您只想显示在浏览器上输入的数据，您可以将其发送到 . html 文件，因为它们根本不需要被操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-21T08:19:52.933

不，你不能。导致post数据传输到服务器，服务器不能用简单的HTML代码处理数据，除了PHP、PYTHON、JAVA等服务器语言。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-21T08:22:24.247

您需要一种服务器端语言来处理表单并从用户那里获取数据。至少在 PHP 中，据我所知，您可以将 action="" 留空，这意味着您将在同一页面上处理表单

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T08:16:34.890

是的，您可以使用纯 html + javascript 来完成。例如，您可以使用 jQuery 检索 http 参数。更多信息可在此处获得：

[获取转义的 URL 参数](https://stackoverflow.com/questions/1403888/get-url-parameter-with-jquery)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-21T08:22:59.560

您可以使用 jQuery Ajax 方法来完成。

```
$(文档).ready(函数(){
          ajaxFunction();
});
    函数 ajaxFunction() {
        var postdata = jQuery("#form").serialize();
        jQuery.ajax({
            网址：“xyz.html”，
            类型：“发布”，
            数据：邮政数据，
            成功：函数（响应）{
                    控制台日志（响应）；
            },
            错误：函数（）{
                控制台日志（响应）；
            }
        });
    }

```

[参考](http://api.jquery.com/jQuery.ajax/)**

# java - 如何检查按钮组中是否选择了单选按钮？

> ID：13986466
> 
> 赞同：3
> 
> 时间：2012-12-21T08:12:38.100
> 
> 标签：java, swing, netbeans-7

我有一个包含 5 个单选按钮的按钮组，我需要检查是否至少选择了其中一个。

这是正确的吗？

`buttonGroup1.isSelected(ButtonModel);`

但是`ButtonmModel`这里有什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-23T09:19:09.673

```
buttonGroup1.getSelection()==null 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-22T19:18:43.037

此外，更重要的是，您可以使用 ButtonGroup 类的 getSelected() 方法确定按钮组的单选按钮之间是否存在选择，因为如果未选择任何内容，它将返回 null。

```
private boolean isSelection(ButtonGroup buttonGroup) {
    return (buttonGroup.getSelected() != null);
} 
```

我希望这可以帮助别人！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:16:16.070

由于您只有 5 个单选按钮，您可以手动检查所有单选按钮（假设单选按钮命名为 radio1、...、radio5）：

```
 boolean isRadio1, isRadio2, isRadio3, isRadio4, isRadio5 = false;

 if (radio1.isSelected() == true) isRadio1 = true;
 if (radio2.isSelected() == true) isRadio2 = true;
 if (radio3.isSelected() == true) isRadio3 = true;
 if (radio4.isSelected() == true) isRadio4 = true;
 if (radio5.isSelected() == true) isRadio5 = true; 
```

不是最优雅的解决方案，但它会成功。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T10:30:13.807

```
package radiobuttongroup;

import java.awt.Container;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.LinkedHashMap;
import java.util.Map;

import javax.swing.ButtonGroup;
import javax.swing.ButtonModel;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JRadioButton;

public class RadioButtonGroup {

  public static void main(String[] args) {
    new RadioButtonGroup();
  }

  private RadioButtonGroup() {
    Container contentPane = frame.getContentPane();
    contentPane.setLayout(new GridLayout(0, 1));

    for (int i = 1; i <= 5; i++) {
      JRadioButton radio = new JRadioButton(Integer.toString(i));
      ButtonModel buttonModel = radio.getModel();
      modelToRadioButton.put(buttonModel, radio);
      buttonGroup.add(radio);
      contentPane.add(radio);
    }

    JButton buttonTestSelection = new JButton("Selection Test");
    JButton buttonClearSelection = new JButton("Clear Selection");
    contentPane.add(buttonTestSelection);
    contentPane.add(buttonClearSelection);

    buttonTestSelection.addActionListener(new ActionListener() {
        @Override public void actionPerformed(ActionEvent arg0) {
          ButtonModel buttonModel = buttonGroup.getSelection();

          if (buttonModel == null) {
            System.out.println("No radio button is selected");
          }
          else {
            if (modelToRadioButton.containsKey(buttonModel)) {
              JRadioButton b = modelToRadioButton.get(buttonModel);
              System.out.println("You selected button " + b.getText());
            }
            else {
              System.err.println("Weird, unrecognised button model!");
            }
          }
        }
      });

    buttonClearSelection.addActionListener(new ActionListener() {
        @Override public void actionPerformed(ActionEvent e) {
          buttonGroup.clearSelection();
        }
      });

    frame.pack();
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);
  }

  private JFrame frame = new JFrame("RadioButtonGroup");
  private Map<ButtonModel, JRadioButton> modelToRadioButton =
    new LinkedHashMap<ButtonModel, JRadioButton>();
  private ButtonGroup buttonGroup = new ButtonGroup();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-22T17:26:17.813

在查找选定的单选按钮时，您无法通过 ButtonModel 做很多事情。但是 ButtonGroup 确实具有返回 AbstractButtons 枚举的 getElements() 方法。这些 AbstractButtons 可以在迭代期间通过枚举转换为 JRadioButtons...

以下方法将返回传递给它的ButtonGroup的选定JRadioButton，如果没有选择则返回null...

```
private JRadioButton getSelectedRadioButton(ButtonGroup buttonGroup) {

    Enumeration<AbstractButton> abstractButtons = buttonGroup.getElements();
    JRadioButton radioButton = null;

    while (abstractButtons.hasMoreElements()) {
        radioButton = (JRadioButton) abstractButtons.nextElement();
        if (radioButton.isSelected()) {
            break;
        }
    }
    return radioButton;
} 
```

一旦您选择了 JRadioButton，就可以访问它的属性。假设您想要选择任何按钮的文本属性...

```
String selectedRadioButtonText = getSelectedRadioButton(buttonGroup).getText(); 
```

我希望这可以帮助别人！！！

# asp.net - 解决方案中项目之间的asp.net上传文件

> ID：13986467
> 
> 赞同：0
> 
> 时间：2012-12-21T08:12:38.297
> 
> 标签：asp.net, file-upload, project, solution

我的解决方案分为几部分，例如在门户和逻辑之间进行通信的数据库部分逻辑部分 wcfs

当管理员上传 pdf 或 doc 之类的文件时，我有一个 AdminPortal 和 UserPortal 项目，它位于 AdminPortal 上的文件夹中。UserPortal 无权访问该部分，所以我怎样才能让这些文件对他们可见？？？

帮助将被appriciated。对不起我蹩脚的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:19:16.583

2个选项：1.将文件保存到数据库中。2.在iis中创建两个应用共享的虚拟文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:19:16.817

使用设置数据库表和值管理主机 + 文件上传位置 + 文件名解决了这个问题

用于门户之间的超链接下载就好了

# c# - 为什么 gif 图像在无模式窗口中没有动画？

> ID：13986468
> 
> 赞同：0
> 
> 时间：2012-12-21T08:12:46.867
> 
> 标签：c#, wpf, gif

为了在 WPF/C# 中显示动画 GIF，我在 Microsoft MSDN 中使用了这个代码示例：[在 WPF 中显示 GIF 动画](http://code.msdn.microsoft.com/windowsdesktop/CSWPFAnimatedGIF-3029aeb9)。

当我在无模式窗口 ( `window.Show()`) 中使用它时，图像不会动画。为什么？

使用`window.ShowDialog()`（模态窗口）它可以正常工作。

在 WPF Project Befor Start MainWindow 中，我显示一个窗口以无模式执行我的第一个任务，然后关闭它。（这些在 app.xaml.cs 启动事件中）

```
// app.xaml.cs 
public partial class App : Application
{
    private void Application_Startup(object sender, StartupEventArgs e)
    {
        FirstTask firstTask = new FirstTask();
        firstTask.Show();

        // do task
        System.Threading.Thread.Sleep(5000);

        firstTask.Close();

        MainWindow mainWindow = new MainWindow();

        mainWindow.ShowDialog();
    }
} 
```

我在 AnimatedGIFControl 类中添加了 AnimatedGIFControl_Loaded 函数的代码末尾以自动启动动画 gif。

ImageAnimator.Animate(_bitmap, OnFrameChanged);

完整的 AnimatedGIFControl_Loaded 代码

```
 void AnimatedGIFControl_Loaded(object sender, RoutedEventArgs e)
    {
        // Get GIF image from Resources
        if (gifanimate.Properties.Resources.ProgressIndicator != null)
        {
            _bitmap = gifanimate.Properties.Resources.ProgressIndicator;
            Width = _bitmap.Width;
            Height = _bitmap.Height;

            _bitmapSource = GetBitmapSource();
            Source = _bitmapSource;
            ImageAnimator.Animate(_bitmap, OnFrameChanged);
        }             
    } 
```

ImageAnimator.Animate(_bitmap, OnFrameChanged);

我还添加到 firstTask 窗口和 MainWindow 以显示动画 gif。

另一个问题：在 firstTask.Close(); 之后 应用程序不显示 MainWindow。你知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T13:41:54.347

Show() 方法不会阻塞调用并继续执行，

ShowDialog() 方法阻止调用并等待执行，直到模态对话框关闭（并且在此期间，所有 UI 消息都被调度）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T20:52:51.057

我喜欢一个解决方案。

// app.xaml.cs

```
/// <summary>
/// Interaction logic for App.xaml
/// </summary>
public partial class App : Application
{
    private FirstTask firstTask;

    private void Application_Startup(object sender, StartupEventArgs e)
    {
        BackgroundWorker backWorker = new BackgroundWorker();
        backWorker.DoWork += new DoWorkEventHandler(backWorker_DoWork);
        backWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(backWorker_RunWorkerCompleted);
        backWorker.RunWorkerAsync();

        MainWindow mainWindow = new MainWindow();
        firstTask = new FirstTask();

        firstTask.ShowDialog();

        mainWindow.Show();
    }

    void backWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        firstTask.Close();
    }

    void backWorker_DoWork(object sender, DoWorkEventArgs e)
    {
        System.Threading.Thread.Sleep(5000);
    }
} 
```

我使用 BackgroundWorker 在后台完成我的任务。完成任务后关闭 firstTask 并显示 mainWindow。

重要注意事项：为了在关闭第一个任务后显示主窗口，主窗口应在 firstTask.ShowDialog() 之前声明。

# android - 如何在android中检测key-guard状态

> ID：13986471
> 
> 赞同：4
> 
> 时间：2012-12-21T08:12:55.240
> 
> 标签：android, android-service

`disableKeyguard()`我有一个应用程序需要在调用or之前检测键盘保护的先前状态`reenableKeyguard()`，由用户设置！有没有办法完成这项任务？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T08:29:20.287

从[文档](http://developer.android.com/reference/android/app/KeyguardManager.html)

采用

```
((KeyguardManager)getSystemService(Context.KEYGUARD_SERVICE)).isKeyguardLocked() 
```

# java - 如果内容发生变化，自动调整舞台大小

> ID：13986475
> 
> 赞同：4
> 
> 时间：2012-12-21T08:13:08.493
> 
> 标签：java, javafx-2

我用 SceneBuilder 和相应的 Scene 和 Stage 创建了 AnchorPane。AnchorPane 包含 VBox。AnchorPane 的所有大小都是 USE_COMPUTED_SIZE。VBox 的高度以编程方式更改，但 Scene 和 Stage 的大小不会改变。

如何使它们自动调整为内容大小？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-08-01T17:03:46.140

Application 类的 start() 方法传递一个 Stage 对象（向导称为 stage）。如果您在该类 (mStage) 中声明 Stage 类型的成员变量，那么您在 start() 中做的第一件事就是保存它：

mStage = 阶段；

您现在可以随时执行此操作（当然是在您的 Application 类中）：

mStage.sizeToScene() ;

如果您需要从控制器类中执行此操作，您可以为控制器提供对您的应用程序的引用（或者可能更好，让您的应用程序类实现控制器的接口）。啊，你说，但我的 Application 类没有对控制器的引用，反之亦然）。好吧，我从不喜欢向导生成的代码，因为从 XML 文件中膨胀控制器而不给您对它的引用，这使得使用文档-视图-控制器模式变得困难。如果您想了解如何获得对控制器的引用，请参阅下面的幻灯片 8（不是第 8 页）。如果您还想实例化然后指定您自己的控制器（我有一个非常需要的用例），请参见幻灯片 10 和 11：

[https://docs.google.com/viewer?a=v&pid=sites&srcid=ZGVmYXVsdGRvbWFpbnxwc2NoaW1wZjk5fGd4OjVlODJiOTg2OTVlYzky](https://docs.google.com/viewer?a=v&pid=sites&srcid=ZGVmYXVsdGRvbWFpbnxwc2NoaW1wZjk5fGd4OjVlODJiOTg2OTVlYzky)

# php - Can't create/display php images - GD Image corrupt or truncated

> ID：13986489
> 
> 赞同：1
> 
> 时间：2012-12-21T08:14:34.690
> 
> 标签：php, image, gd, brokenimage

I'm having a problem and i'd like some help please. I have made a script for creating an image with PHP using GD library, but the problem is when i preview it on the Firefox it shows me an error in Firebug: "Image corrupt or truncated:localhost/my_scripts/images.php". **NOTE**: this is not an error displayed from PHP, it seems more like an error comming from the browser.

I have checked my code for syntaxes many times, i have also tried out and other gd functions, like imagegif, imagettftext etc etc but didn't have any effect. Here's my code:

```
//$image = @imagecreate(200, 20)or die("Cannot Initialize new GD image stream");
$image = imagecreate(200, 20);
$background = imagecolorallocate($image,0,0,0);
$foreground = imagecolorallocate($image,255,255,255);
imagestring($image,5,5,1,"This is a Test",$foreground);
header("Content-type: image/jpeg");
imagejpeg($image);
imagedestroy($image); 
```

GD library is enabled i've already checked that in phpinfo(), and I have also tried to preview it and on Chrome and looks the same. Any ideas what i might doing wrong or why happens this? and how can i fix this error??

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T08:37:59.613

I found something about this error and finally i figured out what was going on, so here is the solution to the problem:

Make sure that PHP code is the only thing on the page. No HTML, no spaces before or after the PHP code, etc, the only thing it should send to the browser should be the image data. If that still doesn't work then make sure that saving the PHP script in a format that does not include the UTF BOM and this should fix it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T20:03:50.567

I changed my code to `UTF-8 without BOM` and worked to me! Thanks Lykos.

# asp.net - ASP.NET 文件夹仅对登录用户进行访问。

> ID：13986490
> 
> 赞同：0
> 
> 时间：2012-12-21T08:14:44.273
> 
> 标签：asp.net, web-config

我正在 asp.net 中的一个项目中工作，我将一些文件存储在一个目录中，比如 temp。我想只向登录的用户授予对该文件夹及其内容的访问权限，否则它应该显示拒绝访问。

我努力了

```
<system.web>
  <authentication mode="Forms">
    <forms loginUrl="Default.aspx" defaultUrl="Default.aspx" ></forms>
  </authentication>
  <authorization>
    <allow users="*"/>
  </authorization>
</system.web>

  <location path="temp">
   <system.web>
    <authorization>
      <deny users="?"/>
    </authorization>
   </system.web>
 </location> 
```

但它不起作用。

我究竟做错了什么 ？正确的方法应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:45:10.547

首先，忘记修改 global `web.config`，没有必要这样做。`web.config`您只需在上述文件夹中创建一个辅助文件并放入：

```
<?xml version="1.0"?>
<configuration>
 <system.web>
  <authorization>
    <deny users="?"/>
    <allow users="*"/>
  </authorization>
 </system.web>
</configuration> 
```

里面。

其次，这不适用于不通过 ASP.NET 管道的静态文件。这很棘手，因为开发服务器为所有文件提供请求，并且仅当您将应用程序部署到 IIS 时才会出现问题。

你必须添加

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
</system.webServer> 
```

它告诉 IIS 使用 ASP.NET 管道处理所有可能的请求（包括对静态资源的请求）。但是，这有其缺点，因为它可能会稍微减慢服务器的速度。

# octopress - Octopress - 处理页面的子目录文件夹结构

> ID：13986506
> 
> 赞同：1
> 
> 时间：2012-12-21T08:16:38.233
> 
> 标签：octopress

我的所有页面都可以有一个子目录吗？

目前：

```
rake new_page['siht-daer-uoy-nac'] 
```

像这样生成降价文件：

```
source/
   |_ _posts
   |_ <some-other-directories> 
   |_ siht-daer-uoy-nac
                       |_ index.markdown 
```

然后做一个

```
 rake generate 
```

照顾一切并喷出一个漂亮的html文件。

我的问题/问题：

叫我强迫症患者，但我希望有一个像这样的目录结构：

```
source/
   |_ _posts
   |_ <some-other-directories> 
   |_ _pages
            |_ siht-daer-uoy-nac
                                |_ index.markdown 
```

让我的顶级目录结构散落着一堆页面蛞蝓，让我在里面哭了一点。我知道 jekyll 只是一个静态页面生成器，仅在 html 生成（和部署）时发挥作用。

## 是否可以为我的页面维护这种文件夹结构？

更新：

我认为开箱即用的 _pages 目录是不可能的，而不会明显地弄乱 octopress/jekyll 源代码（这些天之一）。同时，将一堆类似页面（如帖子）分组的解决方法如下 ngm 建议：

```
 rake new_page["osx-essential-software/2011.markdown"]
 # creates /source/osx-essential-software/2011/index.markdown
 rake new_page["osx-essential-software/2010.markdown"]
 # creates /source/osx-essential-software/2010/index.markdown 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T19:52:27.860

不确定这是设计使然还是意外，但如果您这样做：

```
rake new_page["foo/nac-i-sey"] 
```

你会得到一个子目录`nac-i-sey`下的页面。`foo`

所以如果你想要另一个页面`foo`，你可以这样做：

```
rake new_page["foo/another-page"] 
```

# c - 高性能tcp服务器架构

> ID：13986508
> 
> 赞同：3
> 
> 时间：2012-12-21T08:16:46.840
> 
> 标签：c, tcp, epoll

我正在开发一个高性能 tcp 服务器的项目，我决定使用 epoll 和多线程。但是我在设计服务器时发现很难，现在我对这两种设计感到很困惑：

一个调度程序，一些工作人员，调度程序使用 epoll 侦听所有连接并将传入数据分派给工作人员，工作人员不处理任何 IO 事件。

一个监听器，只处理监听事件，当一个新的连接到来时，它接受它并将它分派给一个worker，每个worker都有一个epoll fd然后监听这个新的socket。

女巫一个更好，还是有更好的设计？

谢谢！</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T08:46:17.030

没有简单的答案。你想要什么类型的服务器？

1.  许多并行短连接（标准 www）
2.  许多并行相当长的连接（中小型上传）
3.  1和2的混合
4.  很长的重连接（大上传）

您将使用什么服务器（机器）（128 x 弱 cpu/8 x 强大 cpu）？

更通用的是：一个dispatcher，一些worker，dispatcher使用epoll监听所有连接，将传入的数据分派给worker，worker不处理IO事件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T08:59:44.253

[libevent](http://en.wikipedia.org/wiki/Libevent)在这里将*非常*有用。它为解决您的问题而生。构建概念验证，以您期望的最大负载为其提供服务，并*测量*真正的瓶颈在哪里。然后优化—— [“过早优化是万恶之源”](http://en.wikipedia.org/wiki/Program_optimization)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T10:48:52.960

In general it's very difficult to come up with a high performance architecture that doesn't make too many assumptions about the connections.

I have tried to some work in that area and some information is available at [http://nginetd.cmeerw.org](http://nginetd.cmeerw.org)

Basically, I am using a single `epoll` fd (in edge-triggered mode) with a single thread pool. That means that each thread can do any work (accepting new connections, reading data, processing requests, sending replies) and therefore no additional thread context switches are needed. The main challenge with this architecture is to get synchronization just about right so you minimize contention, but still don't get any race conditions.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T08:19:22.720

关于这个主题的一个很好的资源是[C10K 问题](http://www.kegel.com/c10k.html)。

# sql - sql server 2005 -----如何使用子查询更新多行

> ID：13986517
> 
> 赞同：0
> 
> 时间：2012-12-21T08:17:50.667
> 
> 标签：sql, sql-server-2005, dml

我有 2 个名为 member 和 tree_str 的表...

“会员”表如下

```
self_id parent_id   position    
100     ROOT        ROOT    
101     100         LEFT    
102     100         CENTRE  
103     100         RIGHT   
104     101         LEFT    
105     101         CENTRE  
106     101         RIGHT 
```

“tree_str”表如下......

```
self_id  L1_Left     L1_center   L1_Right  
100     
101     
102     
103     
104     
105     
106 
```

现在我想像这样使用第一个表填充第二个表.....

```
self_id  L1_Left     L1_center   L1_Right  
100    101             102         103  
101    104             105         106  
102     
103     
104     
105     
106 
```

......我使用查询......

```
update tree_str 
    set tree_str.L1_Left = (select member.self_id from tree_str 
    INNER JOIN member 
    on member.parent_id=tree_str.self_id 
    AND member.position='LEFT')
    WHERE self_id IN (select member.parent_id from tree_str INNER JOIN member 
    on member.parent_id=tree_str.self_id and member.position='LEFT') 
```

但它给出了结果.......

```
Msg 512, Level 16, State 1, Line 1
Subquery returned more than 1 value. This is not permitted when the subquery 
follows =, !=, <, <= , >, >= or when the subquery is used as an expression.
The statement has been terminated. 
```

所以请建议我做正确的查询............?????

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:23:53.323

为什么不尝试类似的东西

```
UPDATE  tree_str
SET     L1_Left = ml.self_id,
        L1_center = mc.self_id,
        L1_right = mr.self_id
FROM    tree_str t LEFT JOIN
        member ml   ON  t.self_id = ml.parent_id
                    AND ml.position = 'LEFT' LEFT JOIN
        member mc   ON  t.self_id = mc.parent_id
                    AND mc.position = 'CENTRE' LEFT JOIN
        member mr   ON  t.self_id = mr.parent_id
                    AND mr.position = 'RIGHT' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:35:30.993

您的子查询返回多个值的原因是它与正在更新的行不相关。试试下面的 SQL。

```
update ts
 set ts.L1_Left =
  (select m.self_id
   FROM member m
     WHERE m.parent_id = ts.self_id
     AND m.position='LEFT')
FROM tree_str ts
WHERE self_id IN
  (select member.parent_id
   from tree_str
   INNER JOIN member
      on member.parent_id=tree_str.self_id
     and member.position='LEFT') 
```

请注意，相关子查询可能很昂贵，因此 Astander 的答案看起来可能更有效。但是，希望这有助于解释您的原始语法在哪里出错。

# node.js - 如何有效地计算文档流中文档之间的相似度

> ID：13986518
> 
> 赞同：6
> 
> 时间：2012-12-21T08:17:53.583
> 
> 标签：node.js, stream, nlp, cosine-similarity, term-document-matrix

我收集文本文档（在 Node.js 中），其中一个文档`i`表示为单词列表。考虑到新文档以文档流的形式出现，计算这些文档之间相似度的有效方法是什么？

我目前对每个文档中单词的归一化频率使用 cos-similarity。由于可扩展性问题，我不使用 TF-IDF（词频，逆文档频率），因为我获得了越来越多的文档。

## 最初

我的第一个版本是从当前可用的文档开始，计算一个大的 Term-Document 矩阵`A`，然后计算`S = A^T x A`（`S(i, j)`在通过`norm(doc(i))`和归一化之后`norm(doc(j))`）文档之间的 cos-similarity`i`以及`j`其词频分别为`doc(i)`和`doc(j)`。

## 对于新文件

收到新文件时该怎么办`doc(k)`？好吧，我必须计算这个文档与之前所有文档的相似度，这不需要构建整个矩阵。我可以取`doc(k) dot doc(j)`所有之前的内积`j`，结果是`S(k, j)`，这很好。

## 麻烦

1.  `S`Node.js 中的计算真的很长。实在是太长了！所以我决定创建一个 C++ 模块，它可以更快地完成整个事情。确实如此！但我等不及了，我应该能够使用中间结果。而我所说的“不等待”的意思是

    一个。等待计算完成，但也
    b。等待构建矩阵`A`（这是一个大矩阵）。

2.  计算 new`S(k, j)`可以利用这样一个事实，即文档中的单词比所有给定单词的集合（我用来构建整个矩阵`A`）少得多。因此，在 Node.js 中执行此操作看起来更快，避免占用大量额外资源来访问数据。

但是有没有更好的方法来做到这一点？

**注意**：我开始计算的原因`S`是我可以轻松地`A`在 Node.js 中构建，在那里我可以访问所有数据，然后在 C++ 中进行矩阵乘法并将其返回到 Node.js 中，这大大加快了整个过程. 但现在计算`S`变得不切实际，它看起来毫无用处。

**注2**：是的，我不必计算整体`S`，我可以只计算右上角的元素（或左下角的元素），但这不是问题。时间计算问题不是这个顺序。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2018-03-06T12:46:30.190

如果今天必须解决它，只需使用来自 fasttext 或 word2vec 的预训练词向量

# android - 定义每秒处理的关键事件数 Android

> ID：13986520
> 
> 赞同：0
> 
> 时间：2012-12-21T08:17:57.747
> 
> 标签：android, keyboard, keylistener

我需要限制每秒处理的关键事件的数量。这个想法是，因为在我的应用程序中用户可以使用键盘。例如，当用户按住右导航按钮时。我不想处理每个事件，因为我的应用程序可能会陷入计算循环。然后强制关闭，出现等待对话框。

我想每秒处理 2,3 个事件，而其他只是忽略。所以我可以为应用程序和计算线程添加一点冷却时间。

有可能吗？我想我必须在我的关键监听器中使用一些计时器或简单的睡眠功能，但我想不出正确的方法来做到这一点。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:27:21.703

一个简单的解决方案是在您收到关键事件时进行一些时间比较：

```
// a variable in your class:
private long mPreviousKeyEventTime = 0;

// in the key event handling function:
if(System.currentTimeMillis() - mPreviousKeyEventTime < 300) return;
mPreviousKeyEventTime = System.currentTimeMillis(); 
```

300 是以毫秒为单位的时间 - 根据您的需要更改它。

编辑：如果键盘也用于打字，则仅在导航时进行这些限制。

# maven - Maven Replacer 插件 StringUtil 问题

> ID：13986522
> 
> 赞同：1
> 
> 时间：2012-12-21T08:18:07.300
> 
> 标签：maven

我正在尝试在我的构建中实现[Maven Replacer Plugin 。](http://code.google.com/p/maven-replacer-plugin/wiki/UsageGuide)

但是我被这个问题困住了：

```
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal com.google.code.maven-replacer-plugin:replacer:1.5.2:replace (default) on project ReportBCSIS: Execution default of goal com.google.code.maven-replacer-plugin:replacer:1.5.2:replace failed: A required class was missing while executing com.google.code.maven-replacer-plugin:replacer:1.5.2:replace: org/apache/commons/lang/StringUtils
[ERROR] -----------------------------------------------------
[ERROR] realm =    plugin>com.google.code.maven-replacer-plugin:replacer:1.5.2
[ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy
[ERROR] urls[0] = file:/C:/Users/grudy/.m2/repository/com/google/code/maven-replacer-plugin/replacer/1.5.2/replacer-1.5.2.jar
[ERROR] urls[1] = file:/C:/Users/grudy/.m2/repository/org/codehaus/plexus/plexus-utils/1.1/plexus-utils-1.1.jar
[ERROR] Number of foreign imports: 1
[ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]
[ERROR] 
[ERROR] -----------------------------------------------------: org.apache.commons.lang.StringUtils
[ERROR] -> [Help 1] 
```

以下是我当前的 pom 配置：

```
 <plugin>
       <groupId>com.google.code.maven-replacer-plugin</groupId>
       <artifactId>replacer</artifactId>
       <version>1.5.2</version>
       <executions>
           <execution>
               <phase>prepare-package</phase>
               <goals>
                   <goal>replace</goal>
               </goals>                   
           </execution>
       </executions>
       <configuration>
           <file>target/${project.artifactId}/index.jsp</file>
           <replacements>
               <replacement>
                   <token>BUILDID-TOKEN</token>
                   <value>121212-HAHA</value>
               </replacement>         
           </replacements>
        </configuration>
    </plugin> 
```

任何的想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:04:13.850

在插件下面添加文本可以解决问题：

```
<dependencies>
    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.6</version>
    </dependency>
    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>2.0.1</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
</dependencies> 
```

# iphone - UINavigationController - 在弹出视图控制器之前运行代码

> ID：13986525
> 
> 赞同：2
> 
> 时间：2012-12-21T08:18:43.360
> 
> 标签：iphone, objective-c, ios

我有一堆`UIViewController`子类。每个修改一个`NSManagedObject`模型。他们中的许多人还展示了自己的模态视图控制器。

`NSManagedObjectContext`当用户“弹出”视图控制器或推送下一个视图控制器时，我需要保存更改。

目前，我正在隐藏默认的后退按钮并`UIBarButtonItem`使用`target`of`self`和 custom设置我自己的`action`。

这工作正常，但理想情况下，我想使用默认的后退按钮并在弹出之前运行代码。有没有办法在弹出之前运行我自己的代码？

（我不希望将代码放入`viewWillDisappear`，因为持久化到磁盘可能会很昂贵，而且这种方法也可以由视图控制器显示的模态触发。）可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T08:23:06.920

您可以`viewDidDisappear`在检查`self`1) 中的倒数*第二*个元素`self.navigationController.viewControllers`（下一个 VC 刚刚被推送的情况）或 2)`self.navigationController`是`nil`（`self`VC 刚刚被弹出）后，在 中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T08:23:33.817

是的..导航控制器有一个委托，它指示视图控制器何时弹出或推送..您可以使用它来完成您的任务...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T08:31:21.493

在您的代码中添加以下方法：

```
- (void) viewWillDisappear:(BOOL)animated{
     //your code here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T08:54:23.177

我使用 viewWillDissappear 使任何更改持久化。如果需要，我使用 viewWillAppear 来识别在其他 puhed 视图控制器完成工作时可能发生的任何更改（重新加载数据）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-27T14:57:22.770

对于弹出检查 isMovingFromParent in viewWillDisappear

```
func viewWillDisappear(_ animation:Bool){
    super.viewWillDisappear(animation);
    if isMovingFromParent {
        // your code here
    }
} 
```

# android - 为什么我的应用在更改语言后没有获得地址？

> ID：13986530
> 
> 赞同：2
> 
> 时间：2012-12-21T08:19:03.113
> 
> 标签：android, google-maps

我从位置获取地址：

```
GeoPoint p;
        Geocoder geocoder = new Geocoder(this, Locale.getDefault());
        Location location = new Location("A");
        location.setLatitude(34.7461307);
        location.setLongitude(135.5738767);
        p = new GeoPoint((int) (location.getLatitude() * 1E6),
                (int) (location.getLongitude() * 1E6));
        List<Address> add = null;
        try {
            add = geocoder.getFromLocation(p.getLatitudeE6() / 1E6,
                    p.getLongitudeE6() / 1E6, 1);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            // e.printStackTrace();
        }
        String addressjian = null;
        if (add != null && add.size() > 0) {
            // Get address
            String post = "";

            for (int i = 0; i <= add.get(0).getMaxAddressLineIndex(); i++) {
                String country = add.get(0).getCountryName();
                post = add.get(0).getPostalCode();
                if (!add.get(0).getAddressLine(i).equals(country)) {
                    if (addressjian != null && !addressjian.equals("")) {
                        addressjian = addressjian + ", ";
                    }
                    addressjian += add.get(0).getAddressLine(i);
                }

            }

        } 
```

如果我将语言设置为英语，结果是：

```
[Address[addressLines=[0:"１丁目-２１ Yagumo Higashimachi",1:"Moriguchi, Osaka Prefecture 570-8588",2:"Japan"],feature=570-8588,admin=null,sub-admin=null,locality=null,thoroughfare=null,postalCode=570-8588,countryCode=JP,countryName=Japan,hasLatitude=true,latitude=34.7456387,hasLongitude=true,longitude=135.5744525,phone=null,url=null,extras=null]] 
```

但是如果我将语言设置为日语，结果是：

```
[Address[addressLines=[0:"〒570-8588",1:"日本"],feature=570-8588,admin=null,sub-admin=null,locality=null,thoroughfare=null,postalCode=570-8588,countryCode=JP,countryName=日本,hasLatitude=true,latitude=34.7456387,hasLongitude=true,longitude=135.5744525,phone=null,url=null,extras=null]] 
```

为什么它没有得到街道的名称？为什么它取决于设备的语言？

# android - 在应用程序开始时未获取电池状态

> ID：13986531
> 
> 赞同：0
> 
> 时间：2012-12-21T08:19:05.397
> 
> 标签：android

我正在尝试使用一些侦听器来控制我的应用程序的电池电量和电源连接，但由于某种原因，它们在应用程序开始时也没有得到更新。有什么方法可以手动完成吗？

类电话状态服务

```
private BroadcastReceiver mPowerConnectedReceiver;

private BroadcastReceiver mPowerDisconnectedReceiver;

private BroadcastReceiver mNormalPowerReceiver;

private BroadcastReceiver mLowPowerReceiver;

private static boolean sIsBatteryCharging = false;

private static boolean sIsBatteryLevelOk = true; 
```

onCreate()

```
 mPowerConnectedReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(final Context context, final Intent intent) {
            PhoneStatusService.this.setChargingStatus(true);
        }
    };
    mPowerDisconnectedReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(final Context context, final Intent intent) {
            PhoneStatusService.this.setChargingStatus(false);
        }
    };
    mNormalPowerReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(final Context context, final Intent intent) {
            PhoneStatusService.this.setBatteryLevel(true);
        }
    };
    mLowPowerReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(final Context context, final Intent intent) {
            PhoneStatusService.this.setBatteryLevel(false);
        }
    };
    this.registerReceiver(mPowerConnectedReceiver, new IntentFilter(
            Intent.ACTION_POWER_CONNECTED));
    this.registerReceiver(mPowerDisconnectedReceiver, new IntentFilter(
            Intent.ACTION_POWER_DISCONNECTED));
    this.registerReceiver(mNormalPowerReceiver, new IntentFilter(Intent.ACTION_BATTERY_OKAY));
    this.registerReceiver(mLowPowerReceiver, new IntentFilter(Intent.ACTION_BATTERY_LOW)); 
```

# php - 如何在视图中格式化 dotProject 电话号码字段

> ID：13986535
> 
> 赞同：1
> 
> 时间：2012-12-21T08:19:20.863
> 
> 标签：php, formatting, phone-number, dotproject

我目前正在为我们公司使用 dotProject 版本 2.1.3，我希望在查看公司视图中的电话号码格式方面获得一些帮助。目前，它允许您以任何格式放置和分组数字。所以我可以输入 (619)555-1234 ext-123，它会以这种方式显示。我的问题是我不希望以这种方式将数字存储在数据库中。我只希望数据库将数字存储为一个整数。

所以我正在使用的是以下代码。如何更改此 php 页面代码以以视觉上令人愉悦的格式显示电话号码，例如从 55512312125512 到 (555)123-1212 分机：5512？ [字段当前的样子](http://www.it911now.com/images/dotproject_phone_number.jpg)

```
<tr>
        <td align="right" nowrap="nowrap"><?php echo $AppUI->_('
        '); ?>:</td>
        <td class="hilite"><?php echo @$obj->company_phone1; ?></td>
    </tr>
    <tr>
        <td align="right" nowrap="nowrap"><?php echo $AppUI->_('Phone'); ?>2:</td>
        <td class="hilite"><?php echo @$obj->company_phone2; ?></td>
    </tr>
    <tr>
        <td align="right" nowrap="nowrap"><?php echo $AppUI->_('Fax'); ?>:</td>
        <td class="hilite"><?php echo @$obj->company_fax; ?></td>
    </tr> 
```

让这 3 个电话号码字段以 (555)123-4567 ext-任意位数的格式显示，并且仍以连续号码（如 555123456）的形式存储在数据库中？

任何帮助将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:25:30.350

```
$data = $AppUI->_('Phone');

if(preg_match( '/^\+\d(\d{3})(\d{3})(\d{4})$/', $data,  $matches )) {
    $result = '(' . $matches[1] . ')' .$matches[2] . '-' . $matches[3];
    echo $result;
} 
```

这应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T23:24:00.010

这适用于 modules/companies/view.php 页面上的 dotProject 版本 2.1.3：

```
<tr> <td align="right" nowrap="nowrap"> <?php echo $AppUI->_('Phone'); ?>: </td> <td class="hilite"> <?php $data = @$obj->company_phone1; if(preg_match( '/^(\d{3})(\d{3})(\d{4})(\d*)$/', $data, $matches )) { if($matches[4] != '') $result = '(' . $matches[1] . ')' .$matches[2] . '-' . $matches[3] . ' ext.' . $matches[4]; else $result = '(' . $matches[1] . ')' .$matches[2] . '-' . $matches[3]; echo $result; } ?> </td> </tr> </code> 
```

这是由[(alex-sorin-dachin)提供的](https://stackoverflow.com/users/1457108/alex-sorin-dachin)

# git-rebase - 如何在 git 中变基？

> ID：13986545
> 
> 赞同：2
> 
> 时间：2012-12-21T08:20:11.213
> 
> 标签：git-rebase, git

谁能帮我在git上做一个rebase？这真的很混乱，我无法理解它的功能。我想在主原点上重新设置分支。

我怎么做？我还想将提交压缩为一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:34:46.430

看看[这里](http://git-scm.com/book/en/Git-Branching-Rebasing)的手册。

在您的分支上切换：

```
 git checkout myBranch 
```

在你的主人上重新设置它：

```
 git rebase master 
```

如果你想压缩一些提交（例如最后 10 次提交），你已经在你的分支上做了一个交互式变基：

```
git rebase -i HEAD~10 
```

然后在您的编辑器中，您可以使用`squash`关键字将提交合并到之前的提交中。

# javascript - 如何将（以编程方式）谷歌字体添加到 ckeditor

> ID：13986548
> 
> 赞同：6
> 
> 时间：2012-12-21T08:20:19.893
> 
> 标签：javascript, html, ckeditor, google-webfonts

我刚刚下载了CKEditor，它很棒。尽管我注意到它会使字体松弛。所以我认为能够将 Google Web Fonts 添加到 CKEditor 以添加其功能是一个好主意。

我在网上搜索过，但我只能找到如何手动进入并在 config.js 文件中添加每种字体。

有人可以帮我以编程方式将所有 Google Web 字体添加到 CKEditor 并展示如何。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-21T18:53:45.547

好的，我找到了答案。我在这里发布它，因此它可能对其他正在寻找相同内容的人有所帮助。所以这里是：

```
myFonts = ['Aclonica', 'Allan', 'Allerta', 'Allerta Stencil', 'Amaranth', 'Angkor', 'Annie Use Your Telescope', 'Anonymous Pro', 'Anton', 'Architects Daughter', 'Arimo', 'Artifika', 'Arvo', 'Astloch', 'Bangers', 'Battambang', 'Bayon', 'Bentham', 'Bevan', 'Bigshot One', 'Bokor', 'Brawler', 'Buda', 'Cabin', 'Cabin Sketch', 'Calligraffitti', 'Candal', 'Cantarell', 'Cardo', 'Carter One', 'Caudex', 'Chenla', 'Cherry Cream Soda', 'Chewy', 'Coda', 'Coda Caption', 'Coming Soon', 'Content', 'Copse', 'Corben', 'Cousine', 'Covered By Your Grace', 'Crafty Girls', 'Crimson Text', 'Crushed', 'Cuprum', 'Damion', 'Dancing Script', 'Dangrek', 'Dawning of a New Day', 'Didact Gothic', 'Droid Sans', 'Droid Sans Mono', 'Droid Serif', 'EB Garamond', 'Expletus Sans', 'Fontdiner Swanky', 'Francois One', 'Freehand', 'GFS Didot', 'GFS Neohellenic', 'Geo', 'Goudy Bookletter 1911', 'Gruppo', 'Handlee', 'Hanuman', 'Holtwood One SC', 'Homemade Apple', 'IM Fell DW Pica', 'IM Fell DW Pica SC', 'IM Fell Double Pica', 'IM Fell Double Pica SC', 'IM Fell English', 'IM Fell English SC', 'IM Fell French Canon', 'IM Fell French Canon SC', 'IM Fell Great Primer', 'IM Fell Great Primer SC', 'Inconsolata', 'Indie Flower', 'Irish Grover', 'Josefin Sans', 'Josefin Slab', 'Judson', 'Jura', 'Just Another Hand', 'Just Me Again Down Here', 'Kenia', 'Khmer', 'Koulen', 'Kranky', 'Kreon', 'Kristi', 'Lato', 'League Script', 'Lekton', 'Limelight', 'Lobster', 'Lora', 'Luckiest Guy', 'Maiden Orange', 'Mako', 'Maven Pro', 'Meddon', 'MedievalSharp', 'Megrim', 'Merriweather', 'Metal', 'Metrophobic', 'Michroma', 'Miltonian', 'Miltonian Tattoo', 'Molengo', 'Monofett', 'Moul', 'Moulpali', 'Mountains of Christmas', 'Muli', 'Neucha', 'Neuton', 'News Cycle', 'Nobile', 'Nova Cut', 'Nova Flat', 'Nova Mono', 'Nova Oval', 'Nova Round', 'Nova Script', 'Nova Slim', 'Nova Square', 'Nunito', 'OFL Sorts Mill Goudy TT', 'Odor Mean Chey', 'Old Standard TT', 'Open Sans', 'Open Sans Condensed', 'Orbitron', 'Oswald', 'Over the Rainbow', 'PT Sans', 'PT Sans Caption', 'PT Sans Narrow', 'PT Serif', 'PT Serif Caption', 'Pacifico', 'Paytone One', 'Permanent Marker', 'Philosopher', 'Play', 'Playfair Display', 'Podkova', 'Preahvihear', 'Puritan', 'Quattrocento', 'Quattrocento Sans', 'Radley', 'Raleway', 'Reenie Beanie', 'Rock Salt', 'Rokkitt', 'Ruslan Display', 'Schoolbell', 'Shanti', 'Siemreap', 'Sigmar One', 'Six Caps', 'Slackey', 'Smythe', 'Sniglet', 'Special Elite', 'Sue Ellen Francisco', 'Sunshiney', 'Suwannaphum', 'Swanky and Moo Moo', 'Syncopate', 'Tangerine', 'Taprom', 'Tenor Sans', 'Terminal Dosis Light', 'The Girl Next Door', 'Tinos', 'Ubuntu', 'Ultra', 'UnifrakturCook', 'UnifrakturMaguntia', 'Unkempt', 'VT323', 'Vibur', 'Vollkorn', 'Waiting for the Sunrise', 'Wallpoet', 'Walter Turncoat', 'Wire One', 'Yanone Kaffeesatz'];

config.font_names = 'serif;sans serif;monospace;cursive;fantasy';

for(var i = 0; i<myFonts.length; i++){
            config.font_names = config.font_names+';'+myFonts[i];
            myFonts[i] = 'http://fonts.googleapis.com/css?family='+myFonts[i].replace(' ','+');
}

config.contentsCss = ['/ckeditor/contents.css'].concat(myFonts); 
```

干杯，

普拉尼

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T08:49:48.710

您可以使用脚本语言使用开发人员 API 拉入所有 Google WebFonts 的列表，并自动生成 CKEditor 配置行。

要使用 API，您需要一个 API 密钥，

要获取 API 密钥，请访问[API 控制台](https://code.google.com/apis/console)。在“服务”窗格中，激活 Google Web Fonts Developer API；如果出现服务条款，请阅读并接受它们。

接下来，转到 API 访问窗格。API 密钥位于该窗格底部附近，位于标题为“简单 API 访问”的部分中。

获得 API 密钥后，您的应用程序可以将查询参数 key=yourAPIKey 附加到所有请求 URL。

API 密钥对于嵌入 URL 是安全的；它不需要任何编码。

webfonts 的端点是[https://www.googleapis.com/webfonts/v1/webfonts?key=YOURKEYHERE](https://www.googleapis.com/webfonts/v1/webfonts?key=YOURKEYHERE)并且它返回一个 JSON 响应，因此例如，您可以使用 jQuery 在请求中进行 ajax，并遍历对象，构建配置行，然后将其复制并粘贴进去。

# zend-framework - 使用 Zend 从 IMAP 检索到特定日期的邮件

> ID：13986551
> 
> 赞同：2
> 
> 时间：2012-12-21T08:20:49.943
> 
> 标签：zend-framework, object, imap

我正在使用 Zend_Mail_Storage_Imap 库从 IMAP 检索电子邮件。

```
$mail = new Zend_Mail_Storage_Imap(array('connection details'));
foreach($mail as $message)
{
  if($message->date > $myDesiredDate)
  {
    //do stuff
  }else{
    continue;
  } 
```

此代码检索所有邮件，其中最旧的邮件首先检索。变量 $myDesiredDate 是日期/时间，超过该时间的邮件就不需要了。有没有办法跳过所有邮件的检索并逐个检查每封邮件的日期？如果没有，我可以反转 $mail 对象以在顶部获取最新的电子邮件吗？

更新：我现在对代码进行了一些修改，从最新的邮件开始并检查当前邮件的日期时间。当我遇到一封超过我不想解析电子邮件的时间的电子邮件时，我就打破了循环。

```
 //time upto which I want to fetch emails (in seconds from current time)
    $time = 3600;
    $mail = new Zend_Mail_Storage_Imap(array('connection details'));
    //get total number of messages
    $total = $mail->countMessages()

    //loop through the mails, starting from the latest mail
    while($total>0)
    {
      $mailTime = strtotime(substr($mail->getMessage($total)->date,0,strlen($mail->getMessage($total)->date)-6));

      //check if the email was received before the time limit
      if($mailTime < (time()-$time))
        break;
      else
        //do my thing

      $total--;
    }

    //close mail connection

$mail->close(); 
```

我在这里唯一关心的是，如果我从邮件计数开始，我是否会以正确的顺序收到邮件？ 0 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:33:15.190

因为，我的代码工作得非常好，我将把它作为答案（快速而肮脏）。我现在从最新的邮件开始，检查当前邮件的日期时间。当我遇到一封超过我不想解析电子邮件的时间的电子邮件时，我就打破了循环。

```
 //time upto which I want to fetch emails (in seconds from current time)
    $time = 3600;
    $mail = new Zend_Mail_Storage_Imap(array('connection details'));
    //get total number of messages
    $total = $mail->countMessages()

    //loop through the mails, starting from the latest mail
    while($total>0)
    {
      $mailTime = strtotime(substr($mail->getMessage($total)->date,0,strlen($mail->getMessage($total)->date)-6));

      //check if the email was received before the time limit
      if($mailTime < (time()-$time))
        break;
      else
        //do my thing

      $total--;
    }

    //close mail connection

$mail->close(); 
```

# c# - 数据容器快速访问

> ID：13986554
> 
> 赞同：1
> 
> 时间：2012-12-21T08:21:08.013
> 
> 标签：c#, header, stream, containers, data-storage

在这种情况下，为了快速轻松地访问文件，存储数据的最佳方式是什么（无序列化 - 仅使用 Stream + BinaryWriter/BinaryReader）。

DataContainer 包含 10 个文件，每个文件为 1 mb。

如果我需要写入/读取文件 5，它应该只读取 10 mb 容器的那一部分，并使用可能存储在标题中的唯一名称/ID 标识符返回 1mb。当您希望更新容器中间的文件时会出现问题，因为索引将在流中更改（如果更新的对象大于或小于现有对象）

如何在更新时无需重写整个数据容器来处理这个问题？

我希望自己写这个，而不是使用预先存在的库。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:44:32.250

我认为您可以存储文件大小而不是索引，因此您可以计算索引。例如，考虑容器：文件大小 1 10 2 15 3 20 4 25 文件 4 的索引简单地计算为 10+15+20。

# android - 网络请求未完成时应用程序应采取什么行动

> ID：13986568
> 
> 赞同：0
> 
> 时间：2012-12-21T08:22:10.693
> 
> 标签：android, http, networking, android-asynctask

例如，当我向服务器发送一个 http 请求时，在我得到完整的响应数据之前，我通常会显示一个进度对话框并使其不可取消。我觉得这个设计一点都不友好，所以我想让对话框可以取消，但我发现我可以取消对话框但不能取消http请求。我在 AsyncTask 的子类中发送请求，doInBackgroud() 方法中没有循环，所以我无法检查取消属性。也许原始设计可以接受？

欢迎任何建议，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:28:04.690

如果在用户按下取消时不取消 HTTP 请求是可以的，只要它在用户看来就好像操作被取消了。

最终 HTTP 请求会在后台失败或成功。然后检查 isCancelled()，然后静默退出 doInBackground()。

# gwt - GWT：在主机页面中加载不同的 CSS

> ID：13986572
> 
> 赞同：1
> 
> 时间：2012-12-21T08:22:24.333
> 
> 标签：gwt, extjs, gxt

我有基于 GWTP 的 gwt 应用程序。应用程序支持两个版本（平板电脑和桌面）并使用不同的小部件库（sencha gxt 和 sencha touch）。这些库在主机页面中需要不同的 css 文件。Moreother css相互冲突。如何在我的主机页面中加载不同的 css 文件？

我已经阅读了[gwt mobilewebapp sample](http://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/#samples/mobilewebapp)，但它们使用单​​个 html 页面和不同的组件实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:07:19.967

您可以检查 Useragent 并决定要交付的 CSS 文件。

我建议使用[ClientBundles](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#CssResource)。这仅提供所需的 css 样式，并加快您的页面速度。

在您的入口点中，您只需决定要交付哪个 css 文件：

```
if(useragent == "desktop") {
   YourStyle.getTheme().getMGWTClientBundle().getDesktopCss().ensureInjected();
} else {
   YourStyle.getTheme().getMGWTClientBundle().getAppCss().ensureInjected();
} 
```

或者您可以[在您的 css 文件中进行切换](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#Conditional_CSS)。但是无论如何您都必须使用 ClientBundles。

在那里你可以有这样的东西：

```
@external gwt-button;
@if user.agent safari {
    .gwt-Button {
        ...
    }
} 
```

@external gwt-button 是为了避免混淆错误。你也可以使用@external *;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:25:43.147

您也可以在服务器端执行此操作，方法是使用 JSP 文件作为 css 源。然后，在 JSP 文件中，根据请求的用户代理或其他决定发送哪一组属性。

另一种选择是将主机页面编写为 JSP 文件，它可以根据请求包含适当的 CSS 文件。
这是一种非常简单的方法，但是您必须在 web.xml 中启用 JSP 处理器。它还要求您部署的系统上有一个 java 编译器，如果您只在 Web 服务器上安装 JRE，则情况并非如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T12:54:18.333

您必须创建两个加载 css 文件的类：

您可以做一些与输入 gwt.xml 文件相关的事情

```
<replace-with
    class="com.test.classMobile">
    <when-type-is
        class="com.Test.classBrowser" />
    <when-property-is name="tablet.user.agent" value="ipad" />
</replace-with> 
```

试试这个..我不确定 100%

# c# - Expression.Call 中的 ToUpper()

> ID：13986573
> 
> 赞同：2
> 
> 时间：2012-12-21T08:22:26.817
> 
> 标签：c#, .net, linq

下面的代码有效，但我想介绍一个`ToUpper()`

```
var predicate =
    Expression.Lambda<Func<T, bool>>(
        Expression.Call(
            Expression.PropertyOrField(parameter, "FirstName"),
            "Contains", null,
            Expression.Constant("myvalue".ToUpper())), parameter
        ); 
```

结果是：

```
{Param_0 => Param_0.FirstName.Contains("MYVALUE")} 
```

但我想要这个：

```
{Param_0 => Param_0.FirstName.ToUpper().Contains("MYVALUE")} 
```

我该如何改变？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T10:03:01.400

只需添加一个`Expression.Call`：

```
var predicate =
    Expression.Lambda<Func<T, bool>>(
        Expression.Call(
            Expression.Call( // <=== this one is new
                Expression.PropertyOrField(parameter, "FirstName"),
                "ToUpper", null),
            "Contains", null,
            Expression.Constant("myvalue".ToUpper())), parameter
        ); 
```

然后将其自身报告为：

```
Param_0 => Param_0.FirstName.ToUpper().Contains("MYVALUE") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T08:25:30.380

编辑：好的，我误读了这个问题。问题是您`Contains`直接调用`FirstName`属性的结果。您需要先致电`ToUpper`该物业，例如

```
var firstName = Expression.PropertyOrField(parameter, "FirstName");
var firstNameUpper = Expression.Call(firstName, "ToUpper", null);
var target = Expression.Constant("myvalue".ToUpper());
var contains = Expression.Call(firstNameToUpper, "Contains", null, target);
var lambda = Expression.Lambda<Func<T, bool>>(contains, parameter); 
```

请注意，这不是“文化上安全的”——使用不区分大小写的比较会更安全。[这个问题](https://stackoverflow.com/questions/444798/case-insensitive-containsstring)显示了一种使用 的方法`IndexOf`，但是您的 LINQ 提供程序可能不支持这种方法（我不知道您之后对这个表达式树做了什么）。

# c++ - 使用 Boost Python & std::shared_ptr

> ID：13986581
> 
> 赞同：16
> 
> 时间：2012-12-21T08:23:18.387
> 
> 标签：c++, boost, c++11, boost-python

我正在尝试让 Boost Python 与 std::shared_ptr 很好地配合使用。目前，我收到此错误：

```
Traceback (most recent call last):
  File "test.py", line 13, in <module>
    comp.place_annotation(circle.centre())
TypeError: No to_python (by-value) converter found for C++ type: std::shared_ptr<cgl::Anchor> 
```

通过调用 circle.centre()，它返回一个 std::shared_ptr。我可以将每个 std::shared_ptr 更改为 boost::shared_ptr （Boost Python 可以很好地使用它）但是要更改的代码量相当可观，我想使用标准库。

circle 方法声明如下：

```
const std::shared_ptr<Anchor> centre() const
{
    return Centre;
} 
```

像这样的锚类：

```
class Anchor
{
    Point Where;
    Annotation* Parent;
public:

    Anchor(Annotation* parent) :
        Parent(parent)
    {
        // Do nothing.
    }

    void update(const Renderer& renderer)
    {
        if(Parent)
        {
            Parent->update(renderer);
        }
    }

    void set(Point point)
    {
        Where = point;
    }

    Point where() const
    {
        return Where;
    }
}; 
```

相关的 Boost Python 代码是：

```
class_<Circle, bases<Annotation> >("Circle", init<float>())
.def("radius", &Circle::radius)
    .def("set_radius",  &Circle::set_radius)
    .def("diameter", &Circle::diameter)
    .def("top_left", &Circle::top_left)
    .def("centre", &Circle::centre);

// The anchor base class.
class_<Anchor, boost::noncopyable>("Anchor", no_init)
    .def("where", &Anchor::where); 
```

我正在使用 Boost 1.48.0。有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-26T20:08:37.587

看起来 boost::python 不支持 C++ 11 std::shared_ptr。

如果您查看文件 boost/python/converter/shared_ptr_to_python.hpp ，您会发现 boost::shared_ptr 的模板函数 shared_ptr_to_python(shared_ptr<T> const& x) 的实现（它解释了为什么代码适用于 boost:: shared_ptr）。

我认为你有几个选择：

*   使用 boost::shared_ptr （你试图避免）
*   为 std::shared_ptr 编写 shared_ptr_to_python 的实现（恕我直言，最好的选择）
*   向 boost::python 开发人员发送请求以支持 std::shared_ptr

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-11T13:14:27.543

除非我误解了，否则我认为这可以解决您的问题：

```
boost::python::register_ptr_to_python<std::shared_ptr<Anchor>>(); 
```

[http://www.boost.org/doc/libs/1_57_0/libs/python/doc/v2/register_ptr_to_python.html](http://www.boost.org/doc/libs/1_57_0/libs/python/doc/v2/register_ptr_to_python.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-31T22:33:31.450

有一个错误报告： [https ://svn.boost.org/trac/boost/ticket/6545](https://svn.boost.org/trac/boost/ticket/6545)

看起来有人正在研究它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-26T11:41:13.410

来自[http://boost.2283326.n4.nabble.com/No-automatic-upcasting-with-std-shared-ptr-in-function-calls-td4573165.html](http://boost.2283326.n4.nabble.com/No-automatic-upcasting-with-std-shared-ptr-in-function-calls-td4573165.html)的片段：

```
/* make boost::python understand std::shared_ptr */
namespace boost {
       template<typename T>
       T *get_pointer(std::shared_ptr<T> p)
       {
               return p.get();
       }
} 
```

为我工作。您将定义您的类，如：

```
class_<foo, std::shared_ptr<foo>>("Foo", ...); 
```

有了这个，其他返回的方法`std::shared_ptr<foo>`将正常工作。

虚函数/多态性可能需要一些魔法，这应该在我链接到的线程中进行介绍。

# java - Telnet 到 EchoServer Grizzly 示例应用程序

> ID：13986584
> 
> 赞同：0
> 
> 时间：2012-12-21T08:23:30.457
> 
> 标签：java, nio, grizzly

我一直在研究一个服务器应用程序，随着时间的推移，它会收到相当多的连接。为了能够处理这个问题，我一直在使用标准的 java NIO 类实现非阻塞设计。但是有很多细节需要处理，我更喜欢使用某种框架。最好我想使用 Spring Integration，但我找不到一些简单的工作示例。

相反，我现在正在评估 Grizzly 框架，它似乎提供了我需要的功能。我实现了他们的[EchoServer 示例](http://grizzly.java.net/nonav/docs/docbkx2.0/html/quickstart.html)，但发现我无法 Telnet 到服务器并且结果在控制台上回显给我。他们的 EchoClient 应用程序按预期工作。

就我而言，我无法对尝试连接到我的客户端做出任何假设，因此我必须能够支持从简单的 telnet 客户端到 NIO 客户端的所有内容。灰熊能做到这一点吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T11:24:08.750

您正在使用的示例基于 StringFilter 实现的特殊输入格式。StringFilter 将字符串解码/编码为带有字符串长度前缀的字节序列。确定 telnet 不使用相同的格式来编码字符串，这就是服务器不回显数据的原因。为了使服务器与 telnet 一起工作 - 只需从服务器的 FilterChain 中删除一个 StringFilter（注释掉这一行）：

```
//          filterChainBuilder.add(new StringFilter(Charset.forName("UTF-8"))); 
```

# css - Twitter Bootstrap 填充空白空间

> ID：13986589
> 
> 赞同：1
> 
> 时间：2012-12-21T08:23:55.583
> 
> 标签：css, twitter-bootstrap

我正在开发我的第一个 Twitter Bootstrap 项目，虽然几乎所有项目看起来都不错，但我找不到一个解决方案来填充跨行之间的空白空间。因此，假设我的第一行有 3 列（span4），其中 2 列的高度为 200 像素，最后一列只有 50 像素，我将在该元素下方获得 150 像素的空白空间。有没有机会让这些元素像 fe jQuery masonry 或 isotope 一样浮到顶部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T00:36:48.467

除了我上面的注释之外，这是一个响应式 CSS 解决方案，它基于为每列添加一个大的填充和同样大的负边距，然后将整行包装在一个隐藏溢出的类中。

```
.col{  
margin-bottom: -99999px;
padding-bottom: 99999px;
background-color:#ffc;
}

.col-wrap{  
overflow: hidden;   
} 
```

你可以看到它在 [jsFiddle工作](http://jsfiddle.net/panchroma/teFYS/)

# c# - 从 Umbraco 中的成员获取属性（在用户控件中）

> ID：13986591
> 
> 赞同：6
> 
> 时间：2012-12-21T08:24:02.883
> 
> 标签：c#, asp.net-membership, umbraco, ascx

我已经创建了一个 Umbraco 站点，并且我得到了一些我需要在 usercontrol(ascx) 页面中显示信息的成员。但我唯一能找到的是旧的 umbraco api，`m.GetProperty();`方法如下：

```
foreach (Member m in Member.GetAll) {
    m.getProperty("danceStyles");
} 
```

但是visual studio说那`Member`已经过时了，我应该`Membership`改用，但我不知道如何通过它从成员那里获取通用属性。我唯一能得到的是`Username`, `Email`and `Password`, 而不是我在 umbraco 中定义的属性...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:10:12.420

是的，`Member.GetAll`已经过时了，但我想你可以使用`Member.GetAllAsList()`这种方法来获取列表中的成员，这种方法对我有用

```
foreach (var member in Member.GetAllAsList())
{
    // to get Property
    var property = member.getProperty("danceStyles");

    // to get Property Value
    var propertyValue = member.getProperty("danceStyles").Value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:49:28.203

成员的默认属性，例如登录名、电子邮件和密码，可以通过 .Net 属性轻松引用，但是正如您所注意到的，自定义属性只能通过字符串访问。

该`getProperty()`方法返回一个`umbraco.cms.businesslogic.property.Property`对象，因此如果您想获取/设置您已创建的自定义属性的实际值，只需访问`Value`[umbraco] 属性的 [.net] 属性，如下所示：

```
m.getProperty("danceStyles").Value 
```

# windows - 如何将缩放功能添加到编辑控件？

> ID：13986593
> 
> 赞同：0
> 
> 时间：2012-12-21T08:24:03.520
> 
> 标签：windows, user-interface, zooming

我需要在我们公司编写的编辑控件中添加缩放功能，例如在firefox，chrome中缩放网页或在word中缩放编辑页面。编辑控件包含文本、绘制文本、绘制图像。

所以我想出了一个解决方案，用百分比因子修改所有与计算位置、大小、字体大小相关的行。

但是我认为我需要一些指导或示例来遵循，您能否给我一些参考资料或指出哪个源文件执行此缩放/缩放位于 firefox/chrome 中。

对不起我的英语，很长时间没有发言权，感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T05:15:45.193

实际上，firefox/chrome等中的缩放功能使用了计算机图形学理论中的缩放矩阵。

通常 cairo（firefox 等）、skia（chrome 等）等 2d 库是基于齐次矩阵的，这与其他 3d 库（opengl/directx）相同。为这些库的画布设置一个缩放矩阵，一切都被缩放了。

事情就是这样发展的。

# gnuplot - 使用 gnuplot 访问数据文件中的第 n 个数据点

> ID：13986596
> 
> 赞同：1
> 
> 时间：2012-12-21T08:24:36.097
> 
> 标签：gnuplot

在 gnuplot 中搜索所有管道和内置函数后，我仍然没有找到一种简单的方法来访问我的数据文件的第 n 个元素（不是通过增量，单个值）用作函数中的常量（或参数一个 for 循环）用于我的地块。例如，我有一个包含两列的单调递减数据文件，我想在绘图时标准化 y 值，因此通过从每个数据点减去最后一个值并将减法除以差值，y 的范围从一 (1) 到零 (0)在第一个数据点和最后一个数据点之间。我试过 awk 但我不太熟悉语法。如果有一个简单的方法我很想知道。

例如

使用 1 绘制“my2columndata.dat”:(($2-'lastdatapoint')/('firstdatapoint'-'lastdatapoint'))

或者第一个和最后一个数据点是同名的——它们是单调递减数据文件“my2columndata.dat”中的第一个和最后一个数据点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T02:38:02.160

这个想法与@andyras 相同，但使用`stats`.

要回答标题，您可以使用`every ::n::n`，其中 n 是选择的记录（即数据点）编号。记录从 0 开始编号，所以如果你想要第一行，它应该是`every ::0::0`. `every`可用于`plot`, `splot`, 或`stats`（`every`in`stats`的用法未记录）。我更喜欢`stats`它，因为它不绘制任何东西，但它确实使您的 gnuplot 控制台混乱（*编辑*以避免`nooutput`在命令末尾使用混乱的控制台`stats`）。此外，您可以`using`用来进行任意分配。

例如，要保存第一条记录的第二列，

```
stats "my2columndata.dat" u (firstdatapoint=$2) every ::0::0 
```

现在要获取最后一条记录，您可以使用 保存`stats`的记录数，并将其用作 中的记录号`every`，

```
stats "my2columndata.dat" # this saves the number of records to STATS_records
stats "my2columndata.dat" u (lastdatapoint=$2) every ::STATS_records-1::STATS_records-1 
```

现在你可以做你要求的情节。

* * *

在我完成之前，还有一些额外的技巧：

使用[mgilson 的计数列的想法](https://stackoverflow.com/questions/13373206/count-columns-in-csv-in-gnuplot)，您甚至可以将每一列保存到多个变量中。（注意：我使用和`u`for的简写）`using``ev``every`

```
filename = "yourfilename.dat"
r = 0 # record number
good = 1
col = 1
while (good) {
 stats filename u (good=valid(col)) ev ::r::r
 if (good) {
  stats filename u col ev ::r::r
  eval(sprintf("v%d=STATS_max",col))
  col = col+1
 }
} 
```

如果数据文件包含 8 列，那么现在定义`v1`了 to 。`v8`

但我认为使用外部工具是正确的方法（类 UNIX 可以使用 tail/head 等）。让我们责怪 gnuplot 作者使这成为可能:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:22:05.253

在您的情况下（因为您知道数据文件是单调递减的），这并不难做到。

```
set terminal unknown
plot 'my2columndata.dat' # gather basic statistics
first=GPVAL_DATA_Y_MAX
last=GPVAL_DATA_Y_MIN

set terminal <whatever>
set output <whatever.wht>
plot 'my2columndata.dat' u 1:(($2-last)/(first-last)) 
```

此方法在不创建输出的情况下收集有关数据文件的信息，然后使用 GPVAL 变量重新绘制。（您可以在使用命令绘图后在 gnuplot 中看到这一点`show variables all`。）在 gnuplot 4.6.0 及更高版本中，您可以使用`stats`命令来收集数据而无需像我在这里所做的那样绘图；`stats`虽然创建不同的变量名。

访问第 n 个数据点（正如您的问题标题所暗示的那样）会比较棘手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-10T14:29:13.850

尽管这个问题已经很老了，但在某些情况下，仍然可能需要获取某个列的第一个、第 n 个或最后一个值。我知道，Linux 用户可能会使用 awk 或其他外部程序，但以下是一个独立于平台的*gnuplot-only*解决方案。

此解决方案与@andyras 和@syockit 的现有答案的区别：

*   也适用于非单调递减的数据
*   不需要`stats`
*   也可以处理有几个空行的数据（@syockit 的解决方案可能会给出错误的结果）
*   还返回`n`第 th 个数据点。

也适用于 gnuplot 4.6.0（OPs 问题的时间）。

**数据：** ( `"Data.dat"`)

```
# some comments
 0.1  0.2
 1.1  1.2
 2.1  2.2

 4.1  4.2
 5.1  5.2

 7.1  7.2

10.1 10.2
11.1 11.2

13.1 13.2
14.1 14.2

17.1 17.2

19.1 19.2
20.1 20.2

22.1 22.2

24.1 24.2
25.1 25.2 
```

**代码：**

```
### get fist, nth and last datapoint of a column
reset

PointFirst = NaN
PointNth = NaN
PointLast = NaN
N=8

set terminal unknown
n=0
plot "Data.dat" u (n=n+1, n==1?PointFirst=$2:NaN, N==n?PointNth=$2:PointLast=$2)

print sprintf("First point:  %g",PointFirst)
print sprintf("% 2dth point:  %g",N,PointNth)
print sprintf("Last point:  %g",PointLast)
### end of code 
```

**结果：**

```
First point:  0.2
 8th point:  11.2
Last point:  25.2 
```

# c++ - 如何将从函数返回的指针的动态数组分配给变量？

> ID：13986600
> 
> 赞同：-1
> 
> 时间：2012-12-21T08:24:52.477
> 
> 标签：c++, function, pointers, dynamic-arrays

请看下面的代码

```
 Vehicle ** damagedVehicles(Vehicle **vehicles, int size)
    {
        Vehicle **damaged = new Vehicle *[size];

        for(int i=0;i<size;i++)
        {
            int d = vehicles[i]->damage;

            if(d>=35)
            {
                damaged[i] = vehicles[i];
            }
        }

        return damaged;
    }

int main()
{
Vehicle **damagedVehicles = damagedVehicles(vManager->getList(), vManager->getCount());
} 
```

如您所见，我的主要尝试不起作用。如何将该指针数组分配给变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:27:27.267

重命名变量，使其不与函数名称冲突？

```
Vehicle **myDamagedVehicles = damagedVehicles(vManager->getList(), vManager->getCount()); 
```

# emacs - 如何使 Emacs 鼠标拖动不突出显示或设置标记

> ID：13986605
> 
> 赞同：2
> 
> 时间：2012-12-21T08:25:12.460
> 
> 标签：emacs, elisp

当我按住 mouse-1 并在缓冲区中移动它时，我只想让光标跟随鼠标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:24:45.893

试试这个。

`(global-unset-key [drag-mouse-1])`

`(global-unset-key [down-mouse-1])`

**注意**：此方法存在鼠标不跟随鼠标的问题。尽管释放鼠标时光标会消失。

期待更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T03:05:12.790

要回答原始问题：

```
 (defun my-move-cursor (event)
  (interactive "e")
  (mouse-set-point event)
  (let (event ov)
    (track-mouse
      (while (progn
               (setq event (read-event))
               (or (mouse-movement-p event)
                   (memq (car-safe event) '(switch-frame select-window))))
        (mouse-set-point event)
        (if ov (move-overlay ov (point)  (1+ (point)))
          (setq ov (make-overlay (point) (1+ (point))))
          (overlay-put ov 'face 'match))))
    (when ov (delete-overlay ov)))) 
```

我最终做的有点不同。我修改了正常功能，使其不启用瞬态标记模式，并制作了一个恒定的叠加层，突出显示鼠标所在的字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T21:57:36.430

Ian Kelling 解决方案的一个轻微变体，它不使用覆盖，但控制光标闪烁，禁用当前处于活动状态的任何瞬态标记，并避免将鼠标移出 Emacs 窗口时出现问题：

```
(defun my-move-cursor (event)
  (interactive "e")
  (deactivate-mark)
  (mouse-set-point event)
  (let ((blinking (if blink-cursor-mode 1 0)))
    (blink-cursor-mode 0)
    (let (event)
      (track-mouse
    (while (progn
         (setq event (read-event))
         (mouse-movement-p event))
      (ignore-errors (mouse-set-point event)))
    ))
    (blink-cursor-mode blinking))
  ) 
```

我将此定义与我的 init 文件中的以下鼠标重新映射结合起来：

```
; Set up mouse 1 movement
(global-set-key [drag-mouse-1] 'mouse-set-point)
(global-set-key [down-mouse-1] 'my-move-cursor)

; Set up mouse 3 behavior to emulate standard mouse 1 behavior
(global-set-key [down-mouse-3] 'mouse-drag-region)
(global-set-key [drag-mouse-3] 'mouse-set-region) 
```

# java - 获取变换对象的 x 和 y 点

> ID：13986610
> 
> 赞同：1
> 
> 时间：2012-12-21T08:25:37.873
> 
> 标签：java, awt, java-2d, affinetransform

我正在使用 AffineTransform 变换炮塔的枪管，我希望子弹从枪管尖端直接射出。是否有形状方法来获取这些坐标，还是我必须手动计算？

转换代码

```
AffineTransform rotate = AffineTransform.getRotateInstance(rotation, getX() + getWidth()/2, getY() + getHeight()/2);
barrel = rotate.createTransformedShape(new Rectangle(getX() + getWidth()/2, getY() - getHeight()/2, 2, getHeight()/2 + 1)); 
```

子弹代码

```
int dx = getX() - o.getX();
int dy = o.getY() - getY();
bullets.add(new Bullet((int)barrel.getBounds2D().getX(), (int)barrel.getBounds2D().getY(), SPEED, new NVector(dx, dy))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:37:28.083

使用相同的变换 ( `rotate`) 来变换桶尖的坐标：

```
rotate.transform(tipOfTheBarrel, transformedTipOfTheBarrel); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:06:20.607

当你的枪管是一个旋转的矩形时，你就不能使用它，因为你的子弹可能应该从矩形边的中间出来，而不是一个角。

但是，如果您创建自己的形状并确保项目符号出现的点是形状中的第一个点，那么您可以使用它`getPathIterator()`来获取转换后的点。

# android - 通过我的应用程序登录后获取用户的 facebook url

> ID：13986615
> 
> 赞同：0
> 
> 时间：2012-12-21T08:25:48.250
> 
> 标签：android, android-facebook

我有一个应用程序，用户将通过 facebook 登录来使用这个应用程序。现在我需要的是我想得到那个登录用户的 facebook url，就像

“http://www.facebook.com/person.name”

现在，我想通过我的应用获取这个 url，或者我需要“person.name”。我可以获取 Facebook 名称（人名），但我不知道如何获取该用户名。请任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:45:16.890

首先，如果您已登录，您可以使用以下方式发送请求以获取您的个人资料：

`AsyncFacebookRunner asyncFacebookRunner = new AsyncFacebookRunner(facebook); asyncFacebookRunner.request("me", new fbRequestListener());`

然后在侦听器上，您可以在响应中获取用户名字段。

```
public class fbRequestListener implements RequestListener() {

@Override
public void onComplete(String response, Object state) {
     /**Parse the json response here to get the username
      Then, append it to the url as "http://www.facebook.com/" +username*/

}

/**don't forget to override other methods*/ 
```

}

希望有帮助。:)

# sonarqube - UTF-8 文件的声纳未知字符错误

> ID：13986617
> 
> 赞同：1
> 
> 时间：2012-12-21T08:25:55.310
> 
> 标签：sonarqube, sonar-runner

当声纳扫描我的 .net 项目时，我收到以下错误消息。问题出在哪里，谢谢

声纳版本：3.3.2

sonar.sourceEncoding=UTF-8

```
17:24:08.040 WARN  nownCharacterChannel - Unknown char: "" (file:/......../HtmlModule.ascx.cs:177:51)
17:24:08.040 WARN  nownCharacterChannel - Unknown char: "" (file:/......../HtmlModule.ascx.cs:177:53)
17:24:08.040 WARN  nownCharacterChannel - Unknown char: "" (file:/......../HtmlModule.ascx.cs:177:55)
17:24:08.040 WARN  nownCharacterChannel - Unknown char: "" (file:/......../HtmlModule.ascx.cs:177:57)
17:24:08.040 WARN  nownCharacterChannel - Unknown char: "" (file:/......../HtmlModule.ascx.cs:177:59)
17:24:08.040 WARN  nownCharacterChannel - Unknown char: "" (file:/......../HtmlModule.ascx.cs:177:61)
17:24:08.041 WARN  nownCharacterChannel - Unknown char: "" (file:/......../HtmlModule.ascx.cs:181:11)
17:24:08.041 WARN  nownCharacterChannel - Unknown char: "" (file:/......../HtmlModule.ascx.cs:181:13) 
```

源代码;

```
��using System; 
using System.Data; 
using System.Configuration; 
using System.Collections; 
...... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T14:26:13.167

如果您在 Windows 上开发 .NET 解决方案，您的项目可能不是以 UTF-8 编码，而是以 cp-1252 编码。尝试使用“sonar.sourceEncoding”的这种编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-06T19:51:13.830

默认情况下，.net 和 Java 属性插件使用 ISO-8859-1 来解析属性文件。这种行为会导致构建失败，因为我们的文件是用 UTF-8 编码的。

解决方案：在声纳分析中添加参数-Dsonar.sourceEncoding=utf-8

# macos - 我在哪里可以获得有关 iTunes 的指南或模板？

> ID：13986624
> 
> 赞同：-1
> 
> 时间：2012-12-21T08:26:41.593
> 
> 标签：macos, itunes

我想开发一个应用程序，而不是一个扩展。但应用程序有权控制 iTunes 并获取音乐信息，例如来自 iTunes 的歌词（类似于 SuperTunes）。我在哪里可以获得相关的模板或指南？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:33:11.140

至于 iTunes 的控制，没有原生的 cocoa API，但是您可以使用 AppleScript，可以使用以下方式从应用程序运行：

```
NSString* path = [[NSBundle mainBundle] pathForResource:@"ScriptName" ofType:@"scpt"];
NSURL* url = [NSURL fileURLWithPath:path];NSDictionary* errors = [NSDictionary dictionary];
NSAppleScript* appleScript = [[NSAppleScript alloc] initWithContentsOfURL:url error:&errors];
[appleScript executeAndReturnError:nil]; 
```

可以使用的 AppleScript 命令的一个很好的例子，可以在这里找到：http: [//dougscripts.com/itunes/itinfo/info03.php](http://dougscripts.com/itunes/itinfo/info03.php)

# vb.net - 如何将面板、按钮、标签和菜单条设置为透明？

> ID：13986629
> 
> 赞同：1
> 
> 时间：2012-12-21T08:27:22.207
> 
> 标签：vb.net, winforms, visual-studio-2008

我试图保持面板控件内部的按钮和标签的透明度。我将`BackColor`属性设置为`Transparent`，但它不起作用。

我也试过

```
Me.SetStyle(ControlStyles.SupportsTransparentBackColor, True)
Me.Panel1.BackColor = Color.Transparent 
```

但它似乎不起作用。

下面的截图是我们的设计方案。我们尝试在面板、按钮和菜单条下方设置一个图像。你能告诉我这是否可能，如果可以，怎么做？

[http://www.gomidjets.com/images/upper.png](http://www.gomidjets.com/images/upper.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:34:21.747

关于在 WinForms 中自定义设计您的表单，它并没有得到很好的支持。只有一些控件支持透明度，它确实会影响性能。如果您希望它必须是透明的，请确保您的表单已`TransparencyKey`设置为一个值，然后将每个`Panels, Buttons, Labels`和`MenuStrips`背景更改为这种颜色（通常是一些钝色）。

如果您的程序处于早期阶段，我强烈建议您认真考虑 WPF。从自定义级别到您正在执行的表单，您会更好地使用 WPF。我自己刚刚搬过来，这是我在 WPF 中的第一个项目的筛选（我从 StackOverflow 学到了这一切，所以你应该很快学会它！）

![在此处输入图像描述](../Images/a6ee9c0117a53ae5eed864a7454f9e33.png)

如您所见，从字面上看，该表单上的所有内容都已自定义，并且**每个**控件都支持 full `Transparency`！

# android - 在方向更改时保存片段状态

> ID：13986630
> 
> 赞同：8
> 
> 时间：2012-12-21T08:27:23.870
> 
> 标签：android, state, fragment, android-orientation

我正在为 Android 创建一个文件管理器应用程序，下面的两个类是执行该操作的大部分逻辑。我正在做的是在 ContentList 启动时，它将 ContentListFragment 添加到 ContestList xml 中的容器布局中。通过添加 ContentListFragment，我得到当前路径，然后调用 setFileDir(String S)，它基本上获取传入路径中的文件，获取该位置的文件列表，初始化数组，然后初始化适配器。然后我设置适配器、设置操作栏 UI 和上下文操作栏。现在，每次按下 ContentListFragment 上的一个项目时，它都会使用所选项目的路径创建另一个 ContentListFragment。然后将之前的片段添加到后堆栈中。现在一切都很好，花花公子，

ContentListFragment 的 onCreate 中的 setRetainInstance(true) 是唯一可以防止整个应用程序在应用程序更改方向时强制关闭。但是，这样做会导致应用程序稍后在我稍后返回时强制关闭（这是我遇到的主要问题，不明白为什么）。

当在方向更改时重新创建 Activity 时，我尝试用新的 ContentListFragment 替换当前的 ContentListFragment（此代码不在下面），但应用程序强制在 setFileDir() 处也以 NullPointerException 关闭，因此其他一切都崩溃了。

如何保存片段状态，以便在方向改变时一切都保持与方向改变之前相同，并且当我在一段时间后返回它时没有它强制关闭？

以防万一，我的应用程序只是一个带有递归 ContentListFragments 的 Activity。

```
public class ContentList extends DrawerActivity implements ContentListFragment.listFragmentListener{

    // instance variables
    private FragmentManager fm;
    private FragmentTransaction ft;
    private String currentPath;

    // Initializes variables.
    // If Activity is started for the first time, a path to the storage is
    // received.
    // Else, if it's an orientation change, the path is just retained.
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.content_list);

        if (savedInstanceState == null) {
            fm = getSupportFragmentManager();
            ft = fm.beginTransaction();
            File file = Environment.getExternalStorageDirectory();
            currentPath = file.getPath();
            ft.add(R.id.content_container_fragment_listview, new ContentListFragment());
            ft.commit();
        } else {
            fm = getSupportFragmentManager();
            currentPath = savedInstanceState.getString("PATH");
        }
    }

    // Grabs the currentPath in case of orientation changes.
    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putString("PATH", currentPath);
    } 
```

文件存储系统

```
public class ContentListFragment extends SherlockListFragment {

    // instance variables
    private ArrayList<Item> items;
    private ArrayList<Item> copy_move_queue_items;
    private ItemAdapter adapter;
    private listFragmentListener lfListener;
    private String currentPath;
    private MenuItem menuItemRename;

    // instantiates variables using setFileDir() and the path from the container Activity.
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRetainInstance(true);
        currentPath = ((ContentList) getActivity()).getCurrentPath();
        setFileDir(currentPath);

    }

    // Gets a reference to Activity interface
    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        try {
            lfListener = (listFragmentListener) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString()
                    + "must implement listFragmentListener");
        }
    }

    // Sets the UI of the listView and the ActionBar
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {

        View v = inflater.inflate(R.layout.content_list_fragment, container, false);

        File file = Environment.getExternalStorageDirectory();
        String rootPath = file.getPath();

        // Sets Action Bar title to current directory, and creates an Up
        // affordance if the root path doesn't equal the current Path
        getSherlockActivity().getSupportActionBar().setTitle(null);
        getSherlockActivity().getSupportActionBar().setLogo(R.drawable.ab_icon);

        if (currentPath.equals(rootPath)) {
            getSherlockActivity().getSupportActionBar()
                    .setDisplayHomeAsUpEnabled(false);
            getSherlockActivity().getSupportActionBar()
                    .setHomeButtonEnabled(false);
        } else {
            getSherlockActivity().getSupportActionBar()
                    .setDisplayHomeAsUpEnabled(true);

            // getSherlockActivity().getSupportActionBar().setTitle("/" +
            // (currentPath.substring(currentPath.lastIndexOf("/") +1)));
        }

        return v;

    }

    // Sets the long click Contextual Action Mode to the ListView
    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setActionMode();
        setListAdapter(adapter);
    }
    // Gets the list of files at the path and adds them to the Item ArrayList,
// initializing the adapter as well
public void setFileDir(String path) {
    File file = new File(path);
    File[] files = file.listFiles();
    Arrays.sort(files, new fileComparator());
    items = new ArrayList<Item>();
    for (File f : files) {
        items.add(new Item(f));
    }
    adapter = new ItemAdapter(getActivity(), R.layout.content_list_item, items);
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-01-14T16:58:27.713

> 这对我有用

```
@Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);
        onCreate(savedInstanceState);
    } 
```

> 并在您的 Activity 标签内的清单文件中
> 
> `android:configChanges="orientation|screenSize"`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-21T09:50:24.357

使用它来保存方向上的片段状态。

```
onCreate(Bundle save)
{
   super.onCreate(save);
   setRetainInstance(true);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-27T12:01:07.983

只是发布这个，因为这是工作和面试中面临的主要问题:) 在 API 13 之前，我们使用的是已弃用的**onRetainNonConfigurationInstance()**（此方法与现在移入片段的 Activity 有关）现在我们有一个新的称为**setRetainInstance()**的方法（片段类的方法部分）即使在活动创建之后也会保存片段的状态。

# ubuntu - 在 ubuntu 上的 PHP Storm 中找不到要访问的声明

> ID：13986633
> 
> 赞同：14
> 
> 时间：2012-12-21T08:27:27.217
> 
> 标签：ubuntu, phpstorm

有人在 ubuntu 上遇到过这个问题吗 - phpstorm 没有以某种方式看到类的声明。在 Windows 系统上一切正常。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-12-12T19:41:33.480

我的问题是我的整个供应商文件夹不知何故被忽略了。

要检查和修复，请导航到“文件 > 设置 > 项目设置 > 目录”，并确保“供应商”未被***排除***。

资料来源： http: [//fuelphp.com/forums/discussion/3943/how-to-setup-code-completion-in-phpstorm](http://fuelphp.com/forums/discussion/3943/how-to-setup-code-completion-in-phpstorm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-04-05T15:12:15.597

请尝试启用 Laravel 插件：

`Settings (Preferences) | Other Settings | Laravel Plugin | Enable Plugin for this Project`

[![在此处输入图像描述](../Images/fd9c9b8c4aa55614db9afa32be9bff04.png)](https://i.stack.imgur.com/aUCNC.png)

或者在这里：

`Languages & Frameworks | Php | Laravel| Enable Plugin for this Project`

[![在此处输入图像描述](../Images/7b582b25f1f8ff51cddbe01d6cc5aeef.png)](https://i.stack.imgur.com/6Fuqq.png)

正如在[https://confluence.jetbrains.com/display/PhpStorm/Laravel+Development+using+PhpStorm上所说](https://confluence.jetbrains.com/display/PhpStorm/Laravel+Development+using+PhpStorm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-13T13:11:43.013

我不得不删除`.PhpStorm20*`我的主目录中的文件夹，从一个全新的配置开始。在将相同的配置拖到多个 PhpStorm 版本两年之后，这种方式可能会更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-24T12:54:35.917

没有什么对我有用，这就是我解决它的方法：只需恢复设置

```
File > Manage IDE Settings > Restore Default Settings 
```

卸载IDE无济于事，恢复settigns是解决问题的最佳方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-29T04:59:23.653

我也有这个，这是由于我的 URL。

我有：

```
templateUrl:'/features/UI/partials/labelledSelect.html' 
```

并且需要做到：

```
templateUrl:'features/UI/partials/labelledSelect.html' 
```

所以我可以控制点击它（实际上在 WebStorm 中虽然它们看起来非常相似）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-28T04:00:00.017

我的文件 routes/web.php 中出现“找不到声明...”

```
Route::get('/', function () {
    return view('welcome');
}); 
```

但是添加之后`use Illuminate\Routing\Route;` 就好了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-06T14:00:33.173

在我的例子中，PHP Storm 没有看到标准 php 函数的声明：`fopen()`等`fwrite`。这些步骤有助于解决这个问题：

1.  将官方[phpstorm-stubs 存储库的代码作为](https://github.com/JetBrains/phpstorm-stubs)[zip 存档](https://github.com/JetBrains/phpstorm-stubs/archive/master.zip)下载到您的 PC 。
2.  解压到某个文件夹。
3.  打开`Settings`> `Languages and frameworks`> `PHP`。选择`PHP Runtime`选项卡。在窗口底部，您将看到`Default stubs path`选项。将其设置为您已解压缩存档的位置。

# php - 使用 PHP 和 HTML 浏览按钮获取文件数据

> ID：13986634
> 
> 赞同：0
> 
> 时间：2012-12-21T08:27:28.793
> 
> 标签：php, file

我正在使用一个 PHP 邮件程序，其中将使用`HTML`浏览按钮选择模板以获取数据以发送邮件。

我想在变量中获取数据..无法获取数据..

```
Warning: fopen(filename.txt) [function.fopen]: failed to open stream: No such file or directory in PATH/php_mailer\sendmail.php on line 18
Cannot open file: filename.txt 
```

**HTML**

```
 <form name="addtemplate"  id="addtemplate" method='POST' 
        action='' enctype="multipart/form-data">
            <table style="padding-left:100px;width:100%" border="0" cellspacing="10" cellpadding="0" id='addtemplate'>
                <span id='errfrmMsg'></span>
                <tbody>
                    <tr>
                        <td class="field_text">
                            Select Template
                        </td>
                        <td>
                            <input name="template_file" type="file" class="template_file" id="template_file" required>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input id="group_submit" value="Submit" type="submit" name='group_submit' />
                        </td>
                    </tr>
                </tbody>
            </table>
    </form> 
```

**PHP 代码**

```
if(isset($_POST['group_submit'])){
        if ($_FILES["template_file"]["error"] > 0) {
            echo "Error: " . $_FILES["template_file"]["error"] . "<br>";
        }
        else {
            echo $templFile = $_FILES["template_file"]["name"] ;
            $templFileHandler = fopen($templFile, 'r') or die('Cannot open file:  '.$templFile); //open file for writing ('w','r','a')...
            echo $templFileData = fread($templFileHandler,filesize($templFile));
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T08:34:53.203

请将 $_FILES["template_file"]["name"] 替换为 $_FILES["template_file"]["tmp_name"]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T08:31:45.487

它不起作用，因为`$_FILES['template_file']['name']`是浏览器发送到服务器的本地文件名；要读取您需要的上传文件`$_FILES['template_file']['tmp_name']`：

```
echo $templFile = $_FILES["template_file"]["tmp_name"] ;
echo $templFileData = file_get_contents($templFile); 
```

我也在使用`file_get_contents()`which 有效地替换`fopen()`,`fread()`和`fclose()`. 上面的代码不会`file_get_contents()`出于任何原因检查失败，这将：

```
if (false === ($templFileData = file_get_contents($_FILES["template_file"]["tmp_name"]))) {
    die("Cannot read from uploaded file");
}
// rest of your code
echo $templFileData; 
```

# c++ - 找不到-lX11

> ID：13986636
> 
> 赞同：2
> 
> 时间：2012-12-21T08:27:36.940
> 
> 标签：c++, c, gcc, linker, x11

我正在尝试编译一个程序，但链接失败并显示以下消息：

> gcc -O2 -pipe -Wl,--export-dynamic tkAppInit.o -L/home/dimitriv/ns-allinone-2.35/tk8.5.10/unix -ltk8.5 \
> -L/home/dimitriv/ns-allinone- 2.35/tcl8.5.10/unix -ltcl8.5 -lX11 -ldl -lieee -lm -Wl,-rpath,/home/dimitriv/ns-allinone-2.35/lib -o wish /usr/bin/ld:**找不到 - lX11**
> collect2：错误：ld返回1退出状态

但是，my`$LD_LIBRARY_PATH`包含已安装 X11 的目录：

> echo $LD_LIBRARY_PATH
> /share/apps/cim/lib:/opt/ns2/otcl-1.13:/opt/ns2/lib: **/home/dimitriv/local/lib** :

并且库似乎已正确安装。

> ls /home/dimitriv/local/lib | grep X11
> libX11.a
> libX11.la
> libX11.so libX11.so.6
> libX11.so.6.3.0
> libX11
> -xcb.a
> libX11-xcb.la libX11-xcb.so
> libX11
> -xcb.so.1
> libX11-xcb.so .1.0.0
> X11

为什么不能找到库并进行链接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T08:35:04.497

`LD_LIBRARY_PATH`包含共享库的路径，加载器（程序）使用这些路径来执行`ld`程序。

在编译期间，使用包含目录。在链接期间，需要对象库。最后一种是你缺少的那种。

您可能必须安装一个包才能获得 X11 开发库。在 Linux 上，该包称为`libX11-devel`. 安装，

```
sudo yum install libX11-devel             # for Redhat, Fedora, etc. 
```

或者

```
sudo apt-get install libX11-devel         # for Ubuntu, etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T08:32:24.963

正如您在编译命令本身中看到的那样：

```
gcc -O2 -pipe -Wl,--export-dynamic tkAppInit.o -L/home/dimitriv/ns-allinone-2.35/tk8.5.10/unix -ltk8.5 \ 
-L/home/dimitriv/ns-allinone-2.35/tcl8.5.10/unix -ltcl8.5 -lX11 -ldl -lieee -lm -Wl,-rpath,/home/dimitriv/ns-allinone-2.35/lib -o wish 
```

路径

```
-L/home/dimitriv/local/lib 
```

未添加。将其添加到您的 make 文件中，然后检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-15T18:19:07.437

解决方案：使用安装缺少的包

```
sudo apt-get install gconf-service libasound2 libatk1.0-0 libc6 libcairo2 libcups2 libdbus-1-3 libexpat1 libfontconfig1 libgcc1 libgconf-2-4 libgdk-pixbuf2.0-0 libglib2.0-0 libgtk-3-0 libnspr4 libpango-1.0-0 libpangocairo-1.0-0 libstdc++6 libx11-6 libx11-xcb1 libxcb1 libxcomposite1 libxcursor1 libxdamage1 libxext6 libxfixes3 libxi6 libxrandr2 libxrender1 libxss1 libxtst6 ca-certificates fonts-liberation libappindicator1 libnss3 lsb-release xdg-utils wget 
```

# c++ - 如何访问 MPEG4 文件的 GOV 标头内容？

> ID：13986641
> 
> 赞同：0
> 
> 时间：2012-12-21T08:27:51.110
> 
> 标签：c++, header, camera, rtsp, mpeg-4

我想知道如何访问 mp4 视频文件的 GOV 标头的内容。

我正在使用 Axis 摄像机通过 RTSP 流式传输视频，该视频以 mp4 格式存储在硬盘中。根据文档，相机在 MPEG4 GOV 标头中插入了特定的触发数据，但我不知道如何访问或检索这些信息。

我正在开发一个 C++ 应用程序，但现在我不需要以编程方式处理数据，因此允许 GOV 标头内容可视化的解决方案对我来说就足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:26:35.957

补充数据通常直接嵌入到流中，并且被认为是写入 MP4 文件的视频有效负载数据中。目的是保留整个流符合 MPEG-4 的要求，内部仍然有附加数据。解码器通常会忽略它。

您通常需要从文件中流式传输该数据并解析流以提取具有触发信息的数据部分。您将需要用于视频流的特定 API（文件格式/解复用器等 - 您的操作系统和环境到底是什么？）并且您需要 Axis 技术信息来查看它们究竟嵌入了什么以及您需要如何准确地解析它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:32:35.353

如果您通过 RTSP 进行流式传输，则不会传输 MPEG4 标头 - 而是通过来自客户端的 DESCRIBE 请求交换“SDP”（会话描述协议）信息。此 sdp 文件包含帧速率等的编码版本，该版本实际上取自 mpeg4 标头中的 MDAT 原子。

如果您特别需要访问 gov atom 以确定 p-frame i-frame 差异，您可以尝试在服务器上解析 MPEG4 标头并通过单独的通道传输它。

MPEG4 标头的外观基本上是一个纯文本原子名称，然后是一个通常为 4 个字节的长度（您需要根据您的平台进行字节交换），然后是数据。

这是我在 mpeg4 标头解析器中的一些调试代码：

```
public boolean valid_atom(byte[] word, int offset) {
    for (int i = 0; i < 4; i++)
        if (!(word[i + offset] >= 'a' && word[i + offset] <= 'z') && !(word[i + offset] >= 'A' && word[i + offset] <= 'Z'))
            return false;
    return true;
} 
```

...

```
public int parse_atom(byte[] b, int offset, int depth) {
    int len;
    len = ifba(b, offset);
    Log.d(TAG, String.format("atom: %c%c%c%c depth %d @ %d len %d", b[offset + 4], b[offset + 5], b[offset + 6], b[offset + 7], depth, offset, len));
    return len;
} 
```

...

```
private int ifba(byte[] buffer, int offset) {
    int retval = (buffer[offset] & 0xFF) << 24;
    retval += (buffer[offset + 1] & 0xFF) << 16;
    retval += (buffer[offset + 2] & 0XFF) << 8;
    retval += (buffer[offset + 3] & 0XFF);
    return retval;
} 
```

# asp.net - AJax Tab 容器的动态 ActiveTabChanged

> ID：13986650
> 
> 赞同：1
> 
> 时间：2012-12-21T08:28:29.390
> 
> 标签：asp.net, ajax, dynamic-data

如何开火`ActiveTabChanged`。`TabContainer`我已经编写了一个代码来`TabPanel`从数据库中填充 HeaderText，这是我的代码

```
public partial class dynamicTab : System.Web.UI.Page
{
    string strCon = ConfigurationManager.ConnectionStrings["SqlCon"].ConnectionString.ToString();
    TabContainer ajxTab;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
           // createTab();
            pnlDynamic.Controls.Add(ajxTab);
            ajxTab_ActiveTabChanged(ajxTab, EventArgs.Empty);
        }
    }

    private void ajxTab_ActiveTabChanged(TabContainer ajxTab, EventArgs eventArgs)
    {
        SqlConnection con = new SqlConnection(strCon);
        SqlCommand cmd = new SqlCommand("select * from Employee where DeptID='" + ajxTab.ActiveTab.ID.ToString() + "'", con);
        con.Open();
        SqlDataAdapter da = new SqlDataAdapter();
        da.SelectCommand = cmd;
        DataSet ds = new DataSet();
        da.Fill(ds);

        GridView grd = new GridView();
        grd.AutoGenerateColumns = true;
        grd.DataSource = ds;
        grd.DataBind();
        pnlDynamic.Controls.Add(grd);
    }

    protected void page_init(object sender, eventargs e)
    {
        createtab();

    }

    private void createTab()
    {
        SqlConnection con = new SqlConnection(strCon);
        SqlCommand cmd = new SqlCommand("select DeptID,DepartmentName from Department", con);
        con.Open();
        SqlDataAdapter da = new SqlDataAdapter();
        da.SelectCommand = cmd;
        DataSet ds = new DataSet();
        da.Fill(ds);
        ajxTab = new AjaxControlToolkit.TabContainer();
        for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
        {
            TabPanel pnl = new TabPanel();
            pnl.HeaderText = ds.Tables[0].Rows[i]["DepartmentName"].ToString();
            pnl.ID = ds.Tables[0].Rows[i]["DeptID"].ToString();
            ajxTab.Tabs.Add(pnl);
            ajxTab.ActiveTabIndex = 0;
        }
    }
} 
```

第一次`ActiveTabChanged`完美触发，但是当我单击第二个选项卡时`ActiveTabChanged`没有被触发。我尝试通过设置`ajxTab.AutoPostBack=true`但事件发生时选项卡容器不可见。

这是我的示例输出

![在此处输入图像描述](../Images/af2db56420261bfcecf14158ce89fdfa.png)

在单击计算机时，我想加载带有这些详细信息的网格，所以有人可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:36:50.500

您可以在 OnActiveTabChanged 事件中绑定每个选项卡的内容

> OnActiveTabChanged="TabContainer1_ActiveTabChanged" AutoPostBack="true"

# delphi - 如何从逗号分隔的字符串对列表中填充 TDictionay？

> ID：13986651
> 
> 赞同：-1
> 
> 时间：2012-12-21T08:28:45.263
> 
> 标签：delphi, tdictionary

我想要一个带有字符串列表的文本文件（例如，逗号与可用于自动替换的键和值分隔）并将每个键值对存储在`TDictionary<string, string>`. 如何填充字典？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T09:00:52.287

从您的评论看来，您似乎想知道如何将一些以逗号分隔的键值对提取到字典中。这是一个基本示例：

```
procedure PopulateKeyValueDict(Strings: TStrings;
  Dict: TDictionary<string, string>);
var
  CommaPos: Integer;
  Line: string;
  Key, Value: string;
begin
  for Line in Strings do
  begin
    CommaPos := Pos(',', Line);
    if CommaPos=0 then
      raise Exception.CreateFmt(
        'Could find comma separated key/value pair in ''%s''',
        [Line]
      );
    Key := Copy(Line, 1, CommaPos-1);
    Value := Copy(Line, CommaPos+1, MaxInt);
    Dict.Add(Key, Value);
  end;
end; 
```

您可能想要添加更多错误检查等，但我假设您已经知道如何做到这一点。此示例说明在第一个逗号上拆分一行，以及如何填充字典。

为了使用它，您需要将文件传输到`TStrings`对象。这是例行公事：

```
var
  Strings: TStringList;
....
Strings := TStringList.Create;
try
  Strings.LoadFromFile(FileName);
  PopulateKeyValueDict(Strings, Dict);
finally
  Strings.Free;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:55:45.743

如果你只有一对一的键值关系（不像三个关键词“apple”和“apples”，“McIntoshes”会变成“McIntosh”）——那么最简单的方法可能是使用 TStringList，提供了

1.  你让你的文件完全由`Key=Value`行组成，而不是`Key,Value`
2.  你要么需要它区分大小写，要么对文件执行大写。

然后你使用[http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TStrings.Values](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TStrings.Values)

为了加快速度，您可以使用 IniFiles 单元的 THashedStringList。在 JclXML 单元中的 JCL 中也有类似的东西。

# c++ - stl 中的抽象地图和矢量

> ID：13986655
> 
> 赞同：1
> 
> 时间：2012-12-21T08:29:26.167
> 
> 标签：c++, stl, map, vector, abstract-class

如果我有三种类型的地图和矢量：

```
map1<CString, int>
map2<CString, int, std::function1>
map3<some_wrapper_of_CString, int, std::function2> 
```

在 stl 中是否有一个抽象容器或一种方法来编写我自己的抽象容器，其唯一目的是进行多态性：

abstract_map = map1 或 map2 或 map3

我的课程包含我无法修改的 map1，因为它会使我的大学在工作中使用的其他课程崩溃。我想通过创建一个抽象地图来包装 map1 我可以传递 map2 和 3 而无需其他修改......

我希望这是有道理的......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:31:41.887

不，没有。当元素不能相互转换时，它的目的是什么？

你总是可以这样做：

```
containera c;
containerb c2(c.begin(), c.end()); 
```

这会将所有元素从一个容器转换为另一个容器。

如果您实际上有具有相同底层`value_type`的容器，则容器类型上的通常抽象是迭代器而不是抽象容器。

在您澄清您只需要对仿函数类型进行类型擦除之后：

```
class X {
  // constructor taking the full type
  X(const std::map<CString, int, std::function<bool(CString, int)>& x) : my_map(x) {}

  // constructor taking the default std::less
  X(const std::map<CString, int>& x) : my_map(x.begin(), x.end(), std::less<CString>()) {}

private:
  std::map<CString, int, std::function<bool(CString, int)> my_map;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T08:31:17.003

> 在 stl 中是否有一个抽象容器或一种方法来编写我自己的抽象容器，其唯一目的是进行多态性

在标准 C++ 库中，没有。

模板和动态多态性不能很好地混合。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T08:39:11.740

在 STL 中不仅没有抽象容器：您永远不应该从 STL 容器继承，因为它们的行为并非多态（例如，没有虚拟析构函数）。所以你必须寻找不同的解决方案。

在这种情况下，您必须支持组合而不是继承。您可以编写自己的包含 的抽象地图类`std::map`，例如：

```
template<typename T>
class BaseMap
{
  // Whatever you need here

private:

  std::map<T> internalMap;
} 
```

然后根据需要从这个类继承：

```
template<typename T>
class Map1 : public BaseMap<T>
{
  // Specialise your class here
} 
```

当然，`BaseMap`应该提供地图所需的接口，因为它不继承`std::map`接口。您可以在此处编写所需的任何虚拟、纯虚拟或非虚拟方法。

尽管您可能要问自己的第一个问题是：您真的需要不同的地图类吗？如果是这样，你真的需要它们是多态的吗？

# c++ - Ogre3d / 通过合成器侦听器访问传递并传递标识符

> ID：13986661
> 
> 赞同：1
> 
> 时间：2012-12-21T08:29:58.017
> 
> 标签：c++, ogre, ogre3d

我正在尝试使用 Ogre 1.8 实现延迟着色。这是我的最终合成器：

```
compositor DeferredShadingShowLit
{
    technique
    {
        texture rt0 target_width target_height PF_A8R8G8B8
        texture_ref mrt_output DeferredShadingGBuffer mrt_output

        target rt0
        {
            input none
            shadows off

            pass clear
            {
                identifier 1
            }

            pass render_quad
            {
                identifier 2
                material DeferredShadingPostQuadLight
                input 0 mrt_output 0
                input 1 mrt_output 1
            }
        }

        target_output
        {
            input none

            pass render_quad
            {
                identifier 3
                material DeferredShadingFinal
                input 0 rt0
            }
        }
    }
} 
```

我需要传递灯光位置，每帧都会改变`DeferredShadingPostQuadLight`材质（用于渲染灯光）。这是一个简单的例子，我还没有实现任何优化，例如 z 测试和灯光的边界体积。为此，我使用了以这种方式设置的合成器侦听器：

```
class LightListener : public Ogre::CompositorInstance::Listener
{
    public:

        LightListener(Ogre::Vector3 alightPos);
        virtual ~LightListener();
        virtual void notifyMaterialSetup(Ogre::uint32 pass_id, Ogre::MaterialPtr &mat);
        virtual void notifyMaterialRender(Ogre::uint32 pass_id, Ogre::MaterialPtr &mat);

        Ogre::Vector3 lightPos;
        Ogre::GpuProgramParametersSharedPtr fpParams;
};

LightListener::LightListener(Ogre::Vector3 alightPos)
{
    lightPos = alightPos;
}

LightListener::~LightListener()
{
}

void LightListener::notifyMaterialSetup(Ogre::uint32 pass_id, Ogre::MaterialPtr &mat)
{
    //if (pass_id == 2) // This gives me error
    fpParams = mat->getBestTechnique()->getPass(pass_id)->getFragmentProgramParameters();
}

void LightListener::notifyMaterialRender(Ogre::uint32 pass_id, Ogre::MaterialPtr &mat)
{
    //if (pass_id == 2) // This gives me error
    fpParams->setNamedConstant("lightPos", lightPos);
} 
```

问题是我无法通过他们的 id 访问通行证，如上面的注释行所示。

但是，如果这些行被注释掉并且我像这样更改合成器脚本：

```
compositor DeferredShadingShowLit
{
    technique
    {
        texture rt0 target_width target_height PF_A8R8G8B8
        texture_ref mrt_output DeferredShadingGBuffer mrt_output

        target_output
        {
            input none
            shadows off

            pass clear
            {
            }

            pass render_quad
            {
                material DeferredShadingPostQuadLight
                input 0 mrt_output 0
                input 1 mrt_output 1
            }
        }
    }
} 
```

材料的片段程序`DeferredShadingPostQuadLight`每帧都会更新，没有任何问题。

事情是我需要先渲染，`rt0`然后才渲染`target_output`。你能告诉我我在这里做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:46:53.287

我终于明白了！食人魔论坛上的答案常常具有误导性。我追踪了`pass_id`变量——你提供给继承的虚函数的变量`notifyMaterialSetup`和你放在这里的变量`mat->getBestTechnique()->getPass(pass_id)`实际上是完全不同的值。我不知道为什么互联网上的示例都有这样写的代码。这是完全错误的。`pass_id`指的是合成器通道，而`pass_id`of`mat->getBestTechnique()->getPass(pass_id)`指的是材质通道。我只是通过像这样更改代码来获得自己的示例：

```
void LightListener::notifyMaterialSetup(Ogre::uint32 pass_id, Ogre::MaterialPtr &mat)
{
    if (pass_id == 2)
    fpParams = mat->getBestTechnique()->getPass(0)->getFragmentProgramParameters();
    // I put 0 here because my material has only one pass
}

void LightListener::notifyMaterialRender(Ogre::uint32 pass_id, Ogre::MaterialPtr &mat)
{
    if (pass_id == 2)
    fpParams->setNamedConstant("lightPos", lightPos);
} 
```

感谢您的关注！

# mongodb - 如何在 mongodb 中正确存储我们想要索引的数据

> ID：13986662
> 
> 赞同：0
> 
> 时间：2012-12-21T08:30:04.287
> 
> 标签：mongodb

我有企业收藏。

业务由用户审核。

每个用户只能查看一次商家。未来的评论将简单地取代前者。

这就是我们存储它的方式

```
 "Reviews" : {
    "gusyanto" : {
      "day" : "December 21, 2012, 8:08 am",
      "review" : "Tes review"
    },
    "sapi" : {
      "day" : "December 21, 2012, 8:18 am",
      "review" : "makanan ini sangat enak"
    }
  } 
```

或者我们也可以使用这个

```
 "Reviews" : [{
      "userid" : "gusyanto",
      "day" : "December 21, 2012, 8:08 am",
      "review" : "Tes review"
    },
    {
      "userid" : "sapi",
      "day" : "December 21, 2012, 8:18 am",
      "review" : "makanan ini sangat enak"}
    ]
  } 
```

所以基本上我们希望可以将它存储为一个字典，其中键是用户 ID，或者我们可以将它存储为一个数组，其中用户 ID 是字段键。所以第二种方法的关键是静态的，即用户ID。

我们想要索引条目。例如，用户可能想知道他评论了哪些业务。

我应该使用哪种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:27:17.097

好吧，我会这样做：

```
 reviews (collection)
                                  |
                                  |
                    ______________|______________
                   |                             |
                 Doc 1                        Doc 2
  {"user_id": "USer1",                      {"user_id": "USer2",
   "review" : "Tes review",                  "review" : "makanan ini sangat enak",
   "date"   : "December 21, 2012, 8:08 am",  "date"   : "December 21, 2012, 8:08 am",
   "business": "Business1"                   "business": "Business2"
  }                                         } 
```

## 然后你可以建立一个索引如下：

```
 db.reviews.ensure_index([("user_id", ASCENDING), ("date", ASCENDING)])
  db.reviews.ensure_index([("business", ASCENDING), ("date", ASCENDING)]) 
```

## 现在您可以执行查询（在**log(n)**时间内），例如：

1.  获取 按日期排序的 **User1的所有评论。**
2.  获取按日期排序的业务评论。

## 更新：

假设您改为选择执行以下操作：

```
 Businesses (collection)
                                  |
                                  |
                    ______________|______________
                   |                             |
             BusinessDoc 1                    BusinessDoc 2
  {"business": "business1",                      {"user_id": "business",
   "review" : {..business1 reviews here..},     "review" : {..business2 reviews here..},
  }                                         } 
```

我建议您不要将所有评论都放在一个文档中，例如在一个文档中说“B1”，如果您有一个“企业”集合，就会发生这种情况。

### 为什么不是“商业”系列：

1.  它会使您的查询和索引变得复杂，并且
2.  如果一个非常受欢迎的“BusinessX”的评论太多，它将达到**16MB**的限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:44:28.020

我将以您的文档原样为例；但是，我想提一下，以字符串格式存储日期可能会损害您的索引和查询能力。

在此处对字段进行索引的问题`Reviews`是您拥有的评论内容字段。

我可以很容易地想象对于单个索引字段来说太大了，在这种情况下会抛出异常并且不会被索引（[http://docs.mongodb.org/manual/reference/limits/#Index%20Size](http://docs.mongodb.org/manual/reference/limits/#Index%20Size)和[http://docs.mongodb.org/manual/core/indexes/#indexes-on-sub-documents](http://docs.mongodb.org/manual/core/indexes/#indexes-on-sub-documents)）。这可能是 MongoDB 中全文字段的最大问题之一。

因此，考虑到这一点，我已经不建议在字段本身上形成索引。

但是，关于哪个索引是最好的，对于您的查询来说是非常主观的。

如果您只通过一个字段或另一个查询，即`day`或者`userid`然后我将创建两个单独的索引，但是如果您在查询中组合您的字段，我很可能会选择索引的复合版本。

# c++ - 正确使用 Boost 库需要哪些先验知识？

> ID：13986663
> 
> 赞同：0
> 
> 时间：2012-12-21T08:30:26.067
> 
> 标签：c++, boost

我仍在学习 C++ 概念，但我对指针、引用、面向对象编程和其他编程基础知识相当熟悉。但是我仍然需要了解更多关于模板、迭代器和正则表达式的知识。为了充分利用 Boost 库，是否还有其他概念我应该有坚实的基础？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T08:36:20.290

没有“正确”使用 Boost 之类的东西。您使用 Boost 的那部分来帮助您解决问题。例如，对于 Boost Test，您不必对任何特定内容了解太多。对于 Boost Graph 或 Algorithm，您应该很好地掌握模板。

因此，没有很好的方法来回答您的问题。查看您要使用的库的文档（Boost 或其他），如果您认为可以处理它，请使用它。否则，请回到这里并提出更具体的问题。;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T08:37:30.407

您应该了解模板和继承的工作原理，并仔细阅读您计划使用的模块的文档。对于大多数情况应该足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T08:36:30.647

很难说，因为 boost 确实是库的集合。在使用库之前，您应该了解问题域。例如，什么是线程以及在使用 boost.thread 之前如何处理它们。

至于 C++ 特定的东西：

1.  您应该知道标准库已经为您提供了什么。
2.  牢牢掌握如何使用模板

# sql - 从不同的表和不同的数据库中选择特定的列

> ID：13986667
> 
> 赞同：1
> 
> 时间：2012-12-21T08:31:09.083
> 
> 标签：sql, tsql, sql-server-2005

我有 3 个数据库

```
 - ECPNWEB
  - ECPNDB
  - ECPNPOS 
```

还有3张桌子

```
 - account -> ECPNWEB
  - branch -> ECPNDB
  - terminal -> ECPNPOS 
```

和具有多列的表

```
 - account (accntid,managedby,account,first,last,....)
  - branch(branch_code,company_code,name,distributor,cutoff,....)
  - terminal(retail,brand,model,serial,status,....) 
```

我想要做的就是获取特定的列。我想要的输出是：

```
 managedby for table account and ECPNWEB database
 name for table branch and ECPNDB database
 model for table terminal and ECPNPOS database.. 
```

像这样

```
 |managedby|name|model 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:39:24.597

1.  `sp_addlinkedserver()`是你需要的
2.  `exec sp_addlinkedserver @server = '*server_name*'`//---用你的替换*server_name*
3.  它看起来像这样：例如`select * from [server].[database].[schema].[table]`
4.  查看此链接[http://msdn.microsoft.com/en-us/library/ms190479.aspx](http://msdn.microsoft.com/en-us/library/ms190479.aspx)

我不是关于它，但试试这个并告诉我什么是 o/p。例如，您可以尝试这种方式

```
SELECT firstdb.*, seconddb.*
FROM Server1.Database1.dbo.myTable AS firstdb
INNER JOIN Server2.Database2.dbo.myTable AS seconddb
   ON firstdb.id = seconddb.id 
```

EDIT2：试试这个，不确定这会给你想要的结果，未经测试...用你的替换 *column_name*

```
SELECT account.managedby, branch.name, terminal.model FROM ECPNWEB.dbo.account, ECPNDB.dbo.branch, ECPNPOS.dbo.terminal AS a INNER JOIN account ON account.(column_name)=branch.(column_name)  INNER JOIN terminal ON account.(column_name)=terminal.(column_name) 
```

# asp.net-mvc-3 - 从接口继承的列名“鉴别器”无效

> ID：13986668
> 
> 赞同：2
> 
> 时间：2012-12-21T08:31:09.377
> 
> 标签：asp.net-mvc-3, entity-framework-4, ef-code-first

我需要你的帮助。每次进行选择时，我总是收到错误“无效的列名'鉴别器'”。奇怪的是，我的映射或表格中没有任何鉴别器列。我尝试`[NotMapped]`在我的类中添加（如此处所述：[EF Code First “Invalid column name 'Discriminator'”但没有继承](https://stackoverflow.com/a/6586990/440310)）但无济于事。

以下是我触发错误的代码。

**模型**

```
public class MasterUser : IAuditFields
{
    [Key]
    public string Username { get; set; }
    public string Name { get; set; }
    public string GroupID { get; set; }
    public string Status { get; set; }
    public string DeptID { get; set; }
    public string Rank { get; set; }

    public string CreatedBy { get; set; }

    [Required]
    public DateTime CreatedDate { get; set; }
    public string LastModifiedBy { get; set; }
    public DateTime? LastModifiedDate { get; set; }

    #region Relationships

    public UserAccess UserAccess { get; set; } // User needs to see what user access group he/she is in
    public UserAccessDetail UserAccessDetail { get; set; } //User needs to see what he/she can do
    #endregion
} 
```

**界面**

```
public interface IAuditFields
{
    string CreatedBy { get; set; }
    DateTime CreatedDate { get; set; }
    string LastModifiedBy { get; set; }
    DateTime? LastModifiedDate { get; set; }
} 
```

**配置类**

```
public class MasterUserConfig : EntityTypeConfiguration<MasterUser>
{
    public MasterUserConfig()
    {
        Property(usr => usr.Username)
            .HasColumnName("UserName")
            .IsRequired();
        Property(usr => usr.Name).HasColumnName("Name");
        Property(usr => usr.GroupID).HasColumnName("GroupId");
        Property(usr => usr.Status).HasColumnName("Status");
        Property(usr => usr.DeptID).HasColumnName("DeptId");
        Property(usr => usr.Rank).HasColumnName("Rank");
        Property(usr => usr.CreatedBy).HasColumnName("CreatedBy");
        Property(usr => usr.CreatedDate).HasColumnName("CreatedDate");
        Property(usr => usr.LastModifiedBy).HasColumnName("LastModifiedBy");
        Property(usr => usr.LastModifiedDate).HasColumnName("LastModifiedDate");

        ToTable("dbo.Users");
    } 
```

**数据上下文**

```
public class BBDataContext : DbContext
{
    public DbSet<MasterUser> Users { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        try
        {
            modelBuilder.Configurations.Add(new MasterUserConfig());

            base.OnModelCreating(modelBuilder);
        }
        catch (Exception ex)
        {
            DiagnosticHelper.Message = ex.Message;
            DiagnosticHelper.InnerException = ex.InnerException.Message;
            DiagnosticHelper.StackTrace = ex.StackTrace;
            DiagnosticHelper.Instance.WriteError();
        }
    }
} 
```

**选择方法**

```
 public MasterUser GetUserByUsername(string userName, string password)
    {
        try
        {
            return (_context.Users
                .Where(usr => usr.Username == userName && usr.Password == password && usr.Status == "ACTIVE"))
                .SingleOrDefault();
        }
        catch (Exception ex)
        {
            LogError(ex);
        }
        return null;
    } 
```

希望您能够帮助我。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:49:39.803

我在稍微不同的情况下遇到了同样的错误，我使用的是继承。通过确保可以从模型类访问的所有表/链接都由您的上下文配置，该问题已得到解决。

在您的情况下，这是 UserAccess 和 UserAccessDetail 类（以及可以从它们获得的任何其他内容）。尝试在 OnModelCreating 中配置这些。

# performance - 增加/测试我的 magento 网站的速度

> ID：13986671
> 
> 赞同：0
> 
> 时间：2012-12-21T08:31:20.387
> 
> 标签：performance, magento, testing

最近我在我的 magento 网站上遇到了一些奇怪的事情。有时我的网站运行缓慢，有时它可以接受。

你知道一些工具来测试它一天吗？我的网站在 VPS 上运行。

[http://bit.ly/iefbw1](http://bit.ly/iefbw1)

喜欢知道您在网站上的结果和评论速度。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:15:41.443

为了测试网站的速度 + 立即获得关于可以轻松改进以减少加载时间的建议，我使用[GTMetrix](http://gtmetrix.com/)。

其他一些加速 Magento 的指针：

*   在您的 VPS + PageCache 上安装[Varnish ，](https://www.varnish-cache.org/)[由 Varnish](http://www.magentocommerce.com/magento-connect/pagecache-powered-by-varnish.html) （Magento 模块）提供支持
*   安装 APC 以获得更好的缓存
*   确保您已启用[Magento 的默认编译功能](http://www.magentocommerce.com/wiki/modules_reference/english/mage_compiler/process/index)

**编辑：**正如 ADM 所提到的，您还必须优化您的 MySQL 和 Apache（考虑到您正在运行 apache2）配置。

**EDIT2：**作为一般建议，我建议您向 Google 搜索“加速 Magento”，您会发现数百个涵盖该主题的主题/文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:49:14.437

@Kenny你有一点错误的方法，开始你必须检查你的apache配置，卸载所有额外的模块`apache2ctl -M`，同样`php -m`，然后安装apc或eaccelerator，然后检查你的mysql配置，通常需要2天才能看到mysql的真实值，使用[mysqlreport](http://hackmysql.com/scripts/mysqlreport) perl 脚本，它会告诉你你的数据库发生了什么。然后你去[利用浏览器缓存](https://developers.google.com/speed/docs/best-practices/caching)，并且只有在你设置[FPC](http://www.magentocommerce.com/magento-connect/i-speed-performance-booster.html)之后。不确定编译是否“必须具有”功能...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-18T12:25:55.300

我检查了许多 Magento 网站，发现它们中的大多数都很慢。你有没有检查过为什么 Magento 网站很慢。让我展示一些使 Magento 网站更快的原因和解决方案。Magento 网站速度较慢的原因

1.  编译关闭
2.  缓存问题
3.  没有整页缓存
4.  代码循环
5.  未启用平面数据
6.  大型数据库
7.  内存限制太低
8.  索引未更新
9.  不使用 Memcached
10.  合并css和js文件
11.  Magento Htaccess Gzip、Mod_deflate、性能设置
12.  服务器

使Magento网站更快的解决方案 1.编译关闭：主要原因是安装了很多模块。系统的所有活动都必须经过模块，Magento中的一个动作可能涉及一些模块，因此Magento系统的加载和运行速度很慢。所以如果你想让你的网站更快，那么首先启用编译。启用编译的过程登录到管理面板系统->工具->编译->然后点击运行编译过程

2.  缓存问题：您的系统中未启用缓存。启用缓存系统的过程->缓存管理->全选->然后从操作中选择选项->选择启用->单击提交

3.  没有整页缓存：整页缓存对于任何基于 Magento 的网站都非常重要。您还可以将这个免费的 Magento 扩展用于全页缓存。Lesti 全页缓存

4.  代码循环：它们可能是自定义代码的原因，可能是添加了一些错误的代码，使其循环并使用错误的代码和循环数据库查询。如果这是问题，那么任何开发人员都只能解决问题或使用默认代码。

5.  未启用平面数据：平面类别和产品数据对于 Magento 网站非常重要。您是否应该启用产品和/或类别的平面数据取决于您的 Magento 网站结构。如果您只有几十个具有许多属性的产品，或者只有几百个具有几个属性/属性变体的产品，那么扁平化产品/类别可能不会显着影响网站速度。另一方面，如果您的网站包含近 1,000 种或数千种产品，那么几乎总是建议您将产品扁平化。如果这些产品分布在数十个类别中（并且产品不会在这些类别中重复），那么也建议将这些类别扁平化。

系统 -> 配置 -> 目录 -> 然后在前端选项卡中，您将找到两个设置，即使用平面目录类别和平面目录产品。将这两个设置都启用为是。

6.  大型数据库：由于大型数据库可能会降低服务器的性能。因此，始终建议您备份和删除旧数据和垃圾数据。如果您启用了日志，那么您每次在管理员中所做的更改将存储在管理员中，因此如果没有必要，您可以关闭日志记录或进行设置，因为它将删除所有您在一天结束或一周结束时登录。如果您的网站每天有超过 1000 名访问者，那么它肯定会将所有搜索到的数据保存在数据库中以及其他与客户相关的信息，如果不是那么重要，那么您也可以删除并清理您的数据库。

在 Magento 系统 -> 配置 -> 开发人员 -> 单击日志设置选项卡中启用或禁用日志的过程在这里您将找到日志的设置

7.  内存限制太低：我检查了一些帖子，他们说这也可能是原因，应该改进它以使 Magento 网站更快。您的配置文件中有一个设置可以设置您可以为 PHP 进程分配的最大内存量。由于 Magento 是一个大内存占用者，因此该值大于 128mB 会显着增加 Magento 执行操作所需的时间。

你想做什么。

有关更多信息：提高 Magento 速度和加载时间

[http://www.webtechnologycodes.com/increasing-magento-speed-and-loading-time/](http://www.webtechnologycodes.com/increasing-magento-speed-and-loading-time/)

# debugging - 如何从 Visual Studio Ultimate 2012 调试全屏 DirectX9 应用程序而不会出现问题？

> ID：13986678
> 
> 赞同：1
> 
> 时间：2012-12-21T08:31:44.547
> 
> 标签：debugging, visual-c++, windows-7, visual-studio-2012, directx

好吧，我想调试加载到进程中的 .dll，它在某处崩溃。我试图将最后执行的行记录到文件中，但这并没有多大帮助。

现在，当我附加调试器并且应用程序崩溃时，MSVC 调试会冻结进程，从而无法将选项卡切换到任何其他窗口，并且我卡在只有任务管理器工作的黑屏上。我尝试关闭应用程序进程，但这是不可能的，然后我不得不关闭 Visual Studio - 没有任何线索可能导致崩溃。

在这种情况下，如何有效且没有问题地进行调试？

（远程调试不是一个选项，我没有第二台机器可以使用，我也没有第二个屏幕）

# windows - 如何在 Windows 上重新定位活动程序？

> ID：13986679
> 
> 赞同：4
> 
> 时间：2012-12-21T08:31:44.587
> 
> 标签：windows, center

这似乎是一个愚蠢的问题，但我如何重新定位活动程序，或者当我无法单击它时将其重新显示在我的屏幕上？

有时，当我运行 Skype 并在全屏程序的分辨率之间切换时，Skype 窗口会从屏幕上消失，我无法将其拖回来。

有谁知道如何在不重新启动程序的情况下解决此问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T08:37:16.257

`Alt`+`Tab`直到所需的窗口处于活动状态。

尝试以下快捷方式：

`Win`+ `Left`：用活动窗口填充显示的左半部分。
`Win`+ `Right`：用活动窗口填充显示的右半部分。
`Win`+ `Up`：最大化
`Win`+ `Down`：在最大化之前最小化或重置为窗口大小。

**注意**，以上是针对 Windows 7 的。我还没有在其他操作系统上测试过。不确定它是否适用于早期版本。

# configuration - 我的 elasticsearch 实例已启动并正在运行，让我们将其投入生产。

> ID：13986682
> 
> 赞同：8
> 
> 时间：2012-12-21T08:32:01.063
> 
> 标签：configuration, elasticsearch, production-environment

我在 play2 和 elasticsearch 中构建了一个小应用程序，它将为我的其他应用程序提供自动完成功能。是时候将我的 elasticsearch 实例投入生产了。

**映射：**

```
curl -XPUT 'http://127.0.0.1:9200/auto_complete/?pretty=1' -d '
{
    "mappings": {
        "search_word": {
            "_all": {
                "enabled": false
            },
            "properties": {
                "id": {
                    "type": "string"
                },
                "word": {
                    "fields": {
                        "ngrams": {
                            "type": "string",
                            "analyzer": "custom_ngram"
                        },
                        "full": {
                            "type": "string",
                            "search_analyzer": "custom_full",
                            "index_analyzer": "custom_full"
                        }
                    },
                    "type": "multi_field"
                },
                "word_type": {
                    "type": "string"
                }
            }
        }
    },
    "settings": {
        "analysis": {
            "filter": {
                "customnGram": {
                    "max_gram": 50,
                    "min_gram": 2,
                    "type": "edgeNGram"
                }
            },
            "analyzer": {
                "custom_ngram": {
                    "filter": [
                        "standard",
                        "lowercase",
                        "customnGram"
                    ],
                    "type": "custom",
                    "tokenizer": "standard"
                },
                "custom_full": {
                    "filter": [
                        "standard",
                        "lowercase"
                    ],
                    "type": "custom",
                    "tokenizer": "standard"
                }
            }
        }
    }
}
' 
```

**为您提供一些测试数据：**

```
curl -XPOST 'http://127.0.0.1:9200/_bulk?pretty=1' -d '
{"index" : {"_index" : "auto_complete", "_type" : "search_word"}}
{"word" : "vvs", "word_type":"STRONG_SEARCH_WORD"}
{"index" : {"_index" : "auto_complete", "_type" : "search_word"}}
{"word" : "och VVS ab", "word_type":"WEAK_SEARCH_WORD"}
{"index" : {"_index" : "auto_complete", "_type" : "search_word"}}
{"word" : "vvs och rörjouren", "word_type":"NAME"}
{"index" : {"_index" : "auto_complete", "_type" : "search_word"}}
{"word" : "vvs & rörjouren", "word_type":"NAME"}
{"index" : {"_index" : "auto_complete", "_type" : "search_word"}}
{"word" : "rot och vvs", "word_type":"NAME"}
{"index" : {"_index" : "auto_complete", "_type" : "search_word"}}
{"word" : "vvsjouren", "word_type":"NAME"}
{"index" : {"_index" : "auto_complete", "_type" : "search_word"}}
{"word" : "vvs-jouren", "word_type":"NAME"}
' 
```

**为您提供的测试查询：**

```
curl -XGET 'http://127.0.0.1:9200/auto_complete/search_word/_search?pretty=1' -d ' 
{
    "query": {
        "bool": {
            "should": [
                {
                    "text": {
                        "search_word.ngrams": {
                            "operator": "and",
                            "query": "vvs"
                        }
                    }
                },
                {
                    "text": {
                        "search_word.full": {
                            "boost": 1,
                            "query": "vvs"
                        }
                    }
                }
            ]
        }
    }
}
' 
```

测试时我一直在默认模式下运行实例。目前我有大约 100 万份文档。

**如果我做：**

```
curl http://127.0.0.1:9200/auto_complete/_stats?pretty=1 
```

**我得到：**

```
{
    "auto_complete": {
        "primaries": {
            "docs": {
                "count": 971133,
                "deleted": 0
            },
            "store": {
                "size": "224.6mb",
                "size_in_bytes": 235552784,
                "throttle_time": "0s",
                "throttle_time_in_millis": 0
            },
            "indexing": {
                "index_total": 971126,
                "index_time": "4m",
                "index_time_in_millis": 242450,
                "index_current": 0,
                "delete_total": 0,
                "delete_time": "0s",
                "delete_time_in_millis": 0,
                "delete_current": 0
            },
            "get": {
                "total": 0,
                "time": "0s",
                "time_in_millis": 0,
                "exists_total": 0,
                "exists_time": "0s",
                "exists_time_in_millis": 0,
                "missing_total": 0,
                "missing_time": "0s",
                "missing_time_in_millis": 0,
                "current": 0
            },
            "search": {
                "query_total": 45,
                "query_time": "1.1s",
                "query_time_in_millis": 1152,
                "query_current": 0,
                "fetch_total": 35,
                "fetch_time": "50ms",
                "fetch_time_in_millis": 50,
                "fetch_current": 0
            }
        },
        "total": {
            "docs": {
                "count": 971133,
                "deleted": 0
            },
            "store": {
                "size": "224.6mb",
                "size_in_bytes": 235552784,
                "throttle_time": "0s",
                "throttle_time_in_millis": 0
            },
            "indexing": {
                "index_total": 971126,
                "index_time": "4m",
                "index_time_in_millis": 242450,
                "index_current": 0,
                "delete_total": 0,
                "delete_time": "0s",
                "delete_time_in_millis": 0,
                "delete_current": 0
            },
            "get": {
                "total": 0,
                "time": "0s",
                "time_in_millis": 0,
                "exists_total": 0,
                "exists_time": "0s",
                "exists_time_in_millis": 0,
                "missing_total": 0,
                "missing_time": "0s",
                "missing_time_in_millis": 0,
                "current": 0
            },
            "search": {
                "query_total": 45,
                "query_time": "1.1s",
                "query_time_in_millis": 1152,
                "query_current": 0,
                "fetch_total": 35,
                "fetch_time": "50ms",
                "fetch_time_in_millis": 50,
                "fetch_current": 0
            }
        }
    }
} 
```

我已经通读了[配置](http://www.elasticsearch.org/guide/reference/setup/configuration.html)，但我想要的是某种清单：

1.  更改日志文件路径
2.  由于您的索引看起来像 X，您应该将 -Xmx 和 -Xms 设置为 X 和 Y
3.  由于您的索引看起来像 X，您应该使用 X 节点和 Y 副本
4.  删除查询中的所有漂亮
5.  对于您最常用的查询，您需要预热它们
6.  如果不使用 _all 字段集 "_all": {"enabled": false}
7.  ?

所以我在这里寻找的是：你在转向生产时的故事以及你做了什么类型的配置来让你的索引顺利运行。您对我或正在投入生产的任何人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:32:57.157

您可以在这篇博文中找到“ELASTICSEARCH 飞行前检查表”：

[http://asquera.de/opensource/2012/11/25/elasticsearch-pre-flight-checklist/](http://asquera.de/opensource/2012/11/25/elasticsearch-pre-flight-checklist/)

它涵盖了基本配置、内存设置、名称解析等等。

# javascript - 错误的 JQuery 悬停动画

> ID：13986683
> 
> 赞同：1
> 
> 时间：2012-12-21T08:32:03.163
> 
> 标签：javascript, jquery, animation, html

我想要创建的是[这样](http://iconiclook.com/)的。悬停时应该有一个带有信息的向下滑动（就像鼠标悬停在 img 上的示例中一样）。我有的是[这个](http://www.mymoonrise.com/wolololo/test/)。问题是当指针位于子元素（`<a>`或`<p>`）上时，信息框会上下弹跳。

的HTML：

```
 <ul>
   <li>
   <div id="box_1" class="prevw_box">
     <div id="box_1-rep" class=" box-rep text1"><h3>CONDUCTIVE GRID TAPE</h3>
    <p class="p1">A lot of text ......a lot of text</p>

     <a class="see_product" href="#"></a>

     </div>

    </div>
   </li>

  </ul> 
```

的CSS：

```
 .box-rep {
     position:absolute;
     top:-220px;
     left:0;
     width:238px;
     height:440px;
     background-color:#887455; }

   .prevw_box {
      position:relative;
      float:left;
      width:238px;
      height:220px;
      overflow:hidden;} 
```

当然jQuery代码是：

```
 $('.box-rep')
.css({top:"-220px",opacity:"0.0"})
.mouseover(function(){
    $(this).stop().animate(
        {top:"0px",opacity:"0.8"},{duration:250})
        //$(this).stop()
    })

.mouseout(function(){
    $(this).animate(
        {top:"-220px",opacity:"0.0"},{duration:250})
}) 
```

在过去的几天里，我一直在努力解决这个问题，但我不能再忍受了。我需要这个想法，替代解决方案。

感谢您的快速答复！最近因为这个我很沮丧。我尝试了很多变体，我一遍又一遍地重做代码。问题已经解决了！再次感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:37:05.263

尝试使用 mouseenter 和 mouseleave，而不是 mouseover、mouseout。

```
$('.box-rep')
.css({top:"-220px",opacity:"0.0"})
.mouseenter(function(){
$(this).stop().animate(
    {top:"0px",opacity:"0.8"},{duration:250})
    //$(this).stop()
})

.mouseleave(function(){
$(this).animate(
    {top:"-220px",opacity:"0.0"},{duration:250})
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T08:36:38.663

您的`.mouseover`方法看起来不错，但您可能也应该添加一个`.stop()`，`.mouseout method`这样您的代码将如下所示：

```
$('.box-rep')
.css({top:"-220px",opacity:"0.0"})
.mouseover(function(){
    $(this).stop().animate(
        {top:"0px",opacity:"0.8"},{duration:250})
        //$(this).stop()
    })

.mouseout(function(){
    $(this).stop().animate(
        {top:"-220px",opacity:"0.0"},{duration:250})
}) 
```

尝试并更新您的测试网址

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T08:41:22.203

我会这样做：

```
$('#nav_bar li').css('backgroundPosition', '-224px 0').on({
    mouseenter: function() {
        $(this).stop(true,true).animate({backgroundPosition:"(-20px 0px)"}, 250);
    },
    mouseleave: function() {
        $(this).stop(true,true).animate({backgroundPosition:"(-224px 0px)"}, 250);
   }
});

$('.box-rep').css({top:"-220px",opacity:"0.0"}).on({
    mouseenter: function() {
        $(this).stop(true, true).animate({top:"0px",opacity:"0.8"},250);
    },
    mouseleave: function() {
        $(this).stop(true, true).animate({top:"-220px",opacity:"0.0"},250);
    }
}); 
```

[**演示**](http://jsfiddle.net/adeneo/pBXGe/2/embedded/result/)| [**代码**](http://jsfiddle.net/adeneo/pBXGe/2/) ​</p>

缩短的版本如下所示：

```
$('#nav_bar li').css('backgroundPosition', '-224px 0').on('mouseenter mouseleave', function(e) {
    $(this).stop(true,true).animate({backgroundPosition:"(-"+(e.type=='mouseenter'?20:224)+"px 0px)"}, 250);
});

$('.box-rep').css({top:"-220px",opacity:"0.0"}).on('mouseenter mouseleave', function(e) {
    var state = e.type=='mouseenter';
    $(this).stop(true, true).animate({top: (state?0:-220),opacity:state?0.8:0},250);
}); 
```

[**小提琴**](http://jsfiddle.net/adeneo/pBXGe/3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T08:43:57.740

只需`stop()`在您的电话中添加一个电话`mouseout`，它就像一个魅力。

[jsFiddle在这里](http://jsfiddle.net/SBabT/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T08:40:10.880

只需使用**jquery.hover**代替`mouseover`and `mouseout`- [http://api.jquery.com/hover/](http://api.jquery.com/hover/)

```
$('.box-rep')
.css({top:"-220px",opacity:"0.0"})
.hover(function(){
    $(this).stop().animate(
        {top:"0px",opacity:"0.8"},{duration:250})
        //$(this).stop()
    }, function(){
    $(this).animate(
        {top:"-220px",opacity:"0.0"},{duration:250})
})​ 
```

**JsFiddle**：http: [//jsfiddle.net/HDUVK/](http://jsfiddle.net/HDUVK/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T08:44:18.480

以这种方式使用它：

```
$('.box-rep').css({
   "top": "-220px",
   "opacity": "0.1"
}).mouseover(function() {
   $(this).stop().animate({
      top: "0px",
      opacity: "0.8"
}, 250);
}).mouseout(function() {
  $(this).animate({
      top: "-220px",
      opacity: "0.1"
}, 250);
}); 
```

小提琴在这里：http: [//jsfiddle.net/Gbqpv/](http://jsfiddle.net/Gbqpv/)

# lotus-notes - 预定代理 nsf 和 ntf

> ID：13986686
> 
> 赞同：3
> 
> 时间：2012-12-21T08:32:15.517
> 
> 标签：lotus-notes, lotusscript

我们在 Designer 中编码的产品通常结构如下：

*   数据库1.nsf,
*   database2-production.nsf,
*   database3-devel.nsf,

然后，它们都使用相同的模板：

*   数据库模板verX.X.ntf

我编码的代理是用 NTF 编码的。ntf 准备好移动到 NSF 文件后，我通常只做 Application > Refresh 设计。一切正常。现在事情是这样的......

在刷新设计和检查 domino.log 时，通常新创建的代理在以下方面工作得很好：

*   数据库1.nsf,
*   database3-devel.nsf

但是，- database2-production.nsf 似乎无法正确获取代理。即使我直接在 Designer 中打开 NSF 文件，一切看起来都很好。代理只是不运行。所有代理均已启用，具有适当的权限并已签名。那个-production.nsf 数据库只是不想合作。

通常我们通过重新启动 domino 来解决这个问题，即使这样，有时我们也不确定代理是否会按计划开始运行。

其他人是否有类似的问题，或者可能知道出了什么问题？看起来有某种缓存或其他东西..

我们不知道...

任何帮助都会很棒！

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T02:55:23.890

您可以使用`tell amgr debug *`代理管理器将详细信息输出到控制台。不幸的是，如果重新启动服务器似乎可以暂时解决问题，那么您可能需要在很长一段时间内收集调试信息才能看到正在发生的事情的前后画面——即使这样，它也可能无法将您指向原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T05:52:39.997

检查所有设计元素属性，不应检查禁止设计刷新或替换修改。还要检查这个数据库的 acl。

# c++ - Xcode 4.2 创建 xcode 示例项目

> ID：13986687
> 
> 赞同：1
> 
> 时间：2012-12-21T08:32:20.193
> 
> 标签：c++, xcode, macos, wxwidgets

我的任务是创建 xcode4 项目。该项目将被其他人用于使用 xcode4 打开、构建并运行。问题是我们使用 wxWidgets 库并且通过创建 xcode 项目我必须确保它具有有效的 wxWidget 库路径集。

使用终端获取有效的 wxWidgets 库路径很简单：

```
wx-config --cxxflags
wx-config --libs 
```

如何配置 xcode 来调用这些命令并使用它的输出来设置库路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:46:19.520

使用[CMake](http://www.cmake.org/)。您编写文本脚本，它会使用此脚本在其他开发人员的机器上生成 XCode 项目，并将正确的本地路径放入 XCode 项目或 Makefile。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:07:19.490

据我所知，您无法将 Xcode 配置为运行任何东西，因此您需要手动将这些命令的输出复制并粘贴到编译器/链接器选项中。

# java - 在使用 Spring JavaMail 发送电子邮件之前检索生成的 Message-ID

> ID：13986692
> 
> 赞同：11
> 
> 时间：2012-12-21T08:32:51.750
> 
> 标签：java, spring, smtp, jakarta-mail

我正在使用`org.springframework.mail.javamail.JavaMailSender`SMTP 发送电子邮件，并且我需要检索 Message-ID 标头。下面的代码

```
message.getMimeMessage().getMessageID() 
```

正在返回 null。如何检索消息 ID？

```
public void notifyByMail(final NotificationRequest request)
{
    MimeMessagePreparator preparator = new MimeMessagePreparator()
    {
        public void prepare(MimeMessage mimeMessage) throws Exception
        {
            MimeMessageHelper message = null;
            message = new MimeMessageHelper(mimeMessage, UTF_8);
            message.setTo(request.getTo());
            message.setCc(request.getCc());
            message.setFrom(request.getFrom());
            message.setReplyTo(request.getReplyTo());
            message.setSubject(request.getSubject());
            message.setText("some text", true);

            //Need to retrieve the Message-ID here
            System.out.println("Message - ID : " + message.getMimeMessage().getMessageID());
        }

    };
    getMailSender().send(preparator);
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-21T08:52:58.427

`message.getMimeMessage().saveChanges()`之前试试`message.getMimeMessage().getMessageID()`。

创建消息时还需要这个：

```
 MimeMessage msg = new MimeMessage(session) {
            protected void updateMessageID() throws MessagingException {
                if (getHeader("Message-ID") == null)
                    super.updateMessageID();
            }
        }; 
```

这会导致 Message-ID 标头仅在尚未设置的情况下才第一次设置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T08:50:26.760

在发送消息之前不会设置 messageID。

如果您想设置自定义消息，我相信您需要像这样覆盖 MimeMessage：

```
public class MyMimeMessage extends MimeMessage {
   private String messageID;

   public MyMimeMessage(Session session, String messageID) {
      super(session);
      this.messageID = messageID;
   }

   @Override
   protected void updateMessageID() throws MessagingException {
      setHeader("Message-ID", messageID);
   }  
} 
```

此外，一些电子邮件服务（例如 gmail）要求 messageID 符合某种语法（几乎像电子邮件地址），您可以在[此处查看](https://www.rfc-editor.org/rfc/rfc5322#section-3.6.4)

# php - wordpress 没有得到帖子 ID

> ID：13986694
> 
> 赞同：0
> 
> 时间：2012-12-21T08:33:01.087
> 
> 标签：php, jquery, wordpress

帖子 ID 不正确

在我的 jQuery 中，例如，如果 post id 为 1234，它将显示为`postid:1290`. 这是我在 jQuery 中调用我的操作的代码。

```
$("#vote").not(".disabled").click(function() {
    var el = $(this);
    el.html('<span id="loader"></span>');
    var nonce = $("input#voting_nonce").val();
    var data = {
        action: 'add_votes_options',
        nonce: nonce,
        postid: '<?php echo $post->ID; ?>,',
        ip: '<?php echo $_SERVER['REMOTE_ADDR']; ?>'            
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:47:36.343

什么`var_dump($post)`给了你？什么会`var_dump($post->ID)`返回？

**PS**我看到一个错字：`'<?php echo $post->ID; ?>,',`会给双逗号删除引号内的逗号：`'<?php echo $post->ID; ?>',`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:53:39.347

让在开发者工具 (F12) 中打开网络选项卡以查看您的 ajax 发布请求并检查 postid 参数值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T08:48:00.533

你有一个语法错误： `'<?php echo $post->ID; ?>,',`- 删除第一个逗号

# c# - 正则表达式，仅在字符串中替换引号 ("") 之外的字符

> ID：13986695
> 
> 赞同：1
> 
> 时间：2012-12-21T08:33:08.567
> 
> 标签：c#, regex, string, replace

我很难找到一个合适的模式来替换字符串本身内引号之外的字符，

例子 ：

```
string Code = "string a = \"David\";"; 
```

或者 ：

```
string CodeLine = "if(Code==\"*This+is-string*\"){int a=b*c;}"; 
```

替换后的输出应该是这样的：

```
"if( Code == \"*This+is-string*\" )\n{\nint a = b * c;\n}" 
```

但问题是我的正则表达式正在替换和排序引号内的字符，然后输出如下所示：

```
"if( Code == \" * This + is - string * \" )\n{\nint a = b * c;\n}" 
```

如您所见，它排列在 CodeLine 字符串内的“字符串”内......

我正在为代码编辑器进行智能缩进。所以现在我正在尝试制作一个排列器，这将使代码看起来更好（就像在 VS 中它会在结束块或行 ";" 后自动插入空格和新行。

这是我的正则表达式：

```
public string Arrange_String( string String )
    {

        String = Regex.Replace( String , @"(\w)([\]\[!#$%&'()*+,./:;<=>?@\^_`{|}~-])" , @"$1 $2"  );
        String = Regex.Replace( String , @"([\]\[!#$%&'()*+,./:;<=>?@\^_`{|}~-])(\w)" , @"$1 $2" );
        String = Regex.Replace( String , @"(\s*)(\.)" , @"$2" );
        String = Regex.Replace( String , @"(\.)(\s*)" , @"$1" );
        String = Regex.Replace( String , @"(\s*)(\()" , @"$2" );
        String = Regex.Replace( String , @"(\))(\s*)" , @"$1" );
        String = Regex.Replace( String , @"(\s*)(\[)" , @"$2" );
        String = Regex.Replace( String , @"(\])(\s*)(\W)" , @"$1$3" );
        String = Regex.Replace( String , @"(\s*)" + @"(""""|@""""|''|@"".*?""|(?<!@)(?<range>"".*?[^\\]"")|'.*?[^\\]')" + @"(\s*)" , @" $2 " );
        return String;
    } 
```

编辑 ：

一小时后，我找到了一种有效且简单的解决方案。首先这是我的代码：

```
public string Arrange_Code( string Main_String )
    {
        string Final_String = "";
        string Accumulated_String = "";
        bool Accumulate = true;
        bool Igonre = false;
        for ( int i = 0 ; i < Main_String.Length ; i++ )
        {
            if ( Main_String[i] == '\"' )
            {
                Igonre = false;
                if ( i > 1 )
                {
                    if ( Main_String[i - 1] == '\\' || Main_String[i - 1] == '\"' )
                    {
                        Igonre = true;
                    }
                }
                if ( Igonre == false )
                {
                    if ( Accumulate == true )
                    {
                        Accumulate = false;
                        if ( Accumulated_String.Length != 0 )
                        {
                            Final_String += Arrange_String( Accumulated_String );
                        }
                        Accumulated_String = "";
                    }
                    else
                    {
                        Accumulate = true;
                    }
                }
            }
            if ( Accumulate == true )
            {
                Accumulated_String += Main_String[i];
            }
            else
            {
                Final_String += Main_String[i];
            }
        }
        return Final_String + Accumulated_String;
    }

    public string Arrange_String( string String )
    {
        String = Regex.Replace( String , @"(\w)([\]\[!#$%&'()*+,./:;<=>?@\^_`{|}~-])" , @"$1 $2" );
        String = Regex.Replace( String , @"([\]\[!#$%&'()*+,./:;<=>?@\^_`{|}~-])(\w)" , @"$1 $2" );
        String = Regex.Replace( String , @"(\s*)(\.)" , @"$2" );
        String = Regex.Replace( String , @"(\.)(\s*)" , @"$1" );
        String = Regex.Replace( String , @"(\s*)(\()" , @"$2" );
        String = Regex.Replace( String , @"(\))(\s*)" , @"$1" );
        String = Regex.Replace( String , @"(\s*)(\[)" , @"$2" );
        String = Regex.Replace( String , @"(\])(\s*)(\W)" , @"$1$3" );
        String = Regex.Replace( String , @"(\s*)" + @"(""""|@""""|''|@"".*?""|(?<!@)(?<range>"".*?[^\\]"")|'.*?[^\\]')" + @"(\s*)" , @" $2 " );
        return String;
    } 
```

在使用正则表达式替换之前，我试图找到真正需要用“Arrange_Code”方法替换的字符串部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:48:05.260

您尝试编译的搜索不是正则的，因此不应应用正则表达式。为这样的东西写一个解析器。

问题在于引号用作开始标记、结束标记和取决于其上下文的字符。并且它在上下文中与本身可以转义的转义字符一起使用。基本上它很像用正则表达式解析 XML - 只是不要这样做！

# sql-server - SQL SSAS - 部署错误

> ID：13986698
> 
> 赞同：2
> 
> 时间：2012-12-21T08:33:31.407
> 
> 标签：sql-server, deployment, ssas

当我开始部署时，我收到此错误：

> *内部错误：操作未成功终止。*
> 
> *高级关系引擎中的错误。由于先前的故障，数据库操作被取消。*
> 
> *OLAP 存储引擎中的错误：在处理 ID 为“Dim Customer”、名称为“Customer”的维度时发生错误。*
> 
> *OLE DB 错误：OLE DB 或 ODBC 错误：用户“NT Service\MSSQLServerOLAPService”登录失败。；28000; 无法打开登录请求的数据库“AdventureWorksDW2012”。登录失败。; 42000。*

怎么了？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-04T16:21:33.620

有同样的问题，丹尼尔的 Meresa 回答很有帮助。可能情况下的详细解决方案是运行 SQL Management Studio 并在对象资源管理器中选择安全 - 登录 - 右键单击​​ - “新登录...”。填写如下登录名“NT Service\MSSQLServerOLAPService”，在Server Roles中勾选sysadmin。应该够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-06T01:19:26.777

错误说，您需要将“NT Service\MSSQLServerOLAPService”用户添加到“AdventureWorksDW2012”数据库。您可以在 SSMS 中执行此操作。连接到您的“AdventureWorksDW2012”数据库。在 Security-> User 下，使用 db_datareader、db_owner(Optional) 属性 [Membership, Owned_Schemas tab] 添加新用户 'NT Service\MSSQLServerOLAPService'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T11:00:08.427

查看您在包含客户维度源数据的分析服务中定义的数据源的模拟选项。您可以在此处配置 SSAS 应使用哪些凭据连接到数据源。

[关于模拟选项的 MSDN 条目](http://msdn.microsoft.com/en-us/library/ms187597.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-30T06:10:40.660

确保将用户“NT Service\MSSQLServerOLAPService”添加到数据库中并分配适当的角色读取...还确保在多维数据集源中的模拟选项下选择使用服务帐户选项。

# ios - 与现有应用程序的新 Twitter API 集成

> ID：13986699
> 
> 赞同：0
> 
> 时间：2012-12-21T08:33:32.403
> 
> 标签：ios, twitter

我有一个正在开发的应用程序，其中包含表格视图中的用户时间线。这将是每个应用程序中相同的用户时间线。我已经对此进行了编码，并且效果很好。我的问题是，当我在调用中将 API 版本从 1 更改为 1.1 时，它停止工作。所有推文都将通过推文表进行，因此我不需要身份验证。除了在调用中更改 API 版本之外，我是否需要添加代码，或者设置授权只是为了使用新 API 显示时间线？除了简单地显示单个用户时间线并使用推文表来响应之外，我没有添加任何功能。我附上了我的代码。任何帮助都会很棒。谢谢你。

```
- (void)fetchTweets
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"https://api.twitter.com/1/statuses/user_timeline.json?include_rts=false&screen_name=johnnelm9r&count=100"]];

        if (data == nil)
        {

        }

        else
        {
            NSError *error;

            tweets = [NSJSONSerialization JSONObjectWithData:data
                                                     options:kNilOptions
                                                       error:&error];
        }

        dispatch_async(dispatch_get_main_queue(), ^{
            [self.twitterTableView reloadData];
        });

    });

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(reachabilityChanged:)
                                                 name:kReachabilityChangedNotification
                                               object:nil];
    self.reachability = [Reachability reachabilityWithHostName:@"www.apple.com"];
    [self.reachability startNotifier];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T05:50:46.657

这就是我最终想出的。它对我需要它做的事情来说很好。希望它也可以帮助其他人。

```
- (void)fetchTweets
{
twitterLoader.animationImages = [NSArray arrayWithObjects:
                                 [UIImage imageNamed:@"StatusIndicator.png"],
                                 [UIImage imageNamed:@"StatusIndicator1.png"],
                                 [UIImage imageNamed:@"StatusIndicator2.png"],
                                 [UIImage imageNamed:@"StatusIndicator3.png"],
                                 [UIImage imageNamed:@"StatusIndicator4.png"],
                                 [UIImage imageNamed:@"StatusIndicator5.png"],
                                 [UIImage imageNamed:@"StatusIndicator6.png"],
                                 [UIImage imageNamed:@"StatusIndicator7.png"],
                                 [UIImage imageNamed:@"StatusIndicator8.png"],
                                 [UIImage imageNamed:@"StatusIndicator9.png"],
                                 [UIImage imageNamed:@"StatusIndicator10.png"],
                                 [UIImage imageNamed:@"StatusIndicator9.png"],
                                 [UIImage imageNamed:@"StatusIndicator8.png"],
                                 [UIImage imageNamed:@"StatusIndicator7.png"],
                                 [UIImage imageNamed:@"StatusIndicator6.png"],
                                 [UIImage imageNamed:@"StatusIndicator5.png"],
                                 [UIImage imageNamed:@"StatusIndicator4.png"],
                                 [UIImage imageNamed:@"StatusIndicator3.png"],
                                 [UIImage imageNamed:@"StatusIndicator2.png"],
                                 [UIImage imageNamed:@"StatusIndicator1.png"],
                                 nil];

twitterLoader.animationDuration = 0.8;
[twitterLoader startAnimating];

ACAccountStore *store = [[ACAccountStore alloc] init];
ACAccountType *twitterAccountType =
[store accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

    //  Request permission from the user to access the available Twitter accounts
[store requestAccessToAccountsWithType:twitterAccountType
                               options:nil
                            completion:^(BOOL granted, NSError *error)
 {
 if (!granted)
     {
     NSLog(@"User rejected access to the account.");
     }

 else
     {
     [twitterLoader startAnimating];

     NSArray *twitterAccounts =
     [store accountsWithAccountType:twitterAccountType];

     if ([twitterAccounts count] > 0)
         {
         ACAccount *account = [twitterAccounts objectAtIndex:0];
         [twitterLoader startAnimating];

         NSMutableDictionary *params = [[NSMutableDictionary alloc] init];
         [params setObject:@"johnnelm9r" forKey:@"screen_name"];
         [params setObject:@"100" forKey:@"count"];
         [params setObject:@"0" forKey:@"include_entities"];
         [params setObject:@"0" forKey:@"include_rts"];

             //  The endpoint that we wish to call
         NSURL *url =
         [NSURL
          URLWithString:@"http://api.twitter.com/1.1/statuses/user_timeline.json"];

         SLRequest *request = [SLRequest requestForServiceType:SLServiceTypeTwitter
                                                 requestMethod:SLRequestMethodGET
                                                           URL:url
                                                    parameters:params];

             // Attach the account object to this request
         [request setAccount:account];

         [request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error)
          {
          if (!responseData)
              {
              NSLog(@"%@", error);
              }

          else
              {
              NSError *jsonError;
              tweets = [NSJSONSerialization JSONObjectWithData:responseData
                                                       options:NSJSONReadingMutableLeaves
                                                         error:&jsonError];
              if (tweets)
                  {
                  NSLog(@"%@", tweets);
                  [self.twitterTableView reloadData];

                  [twitterLoader stopAnimating];
                  }

              else
                  {
                  NSLog(@"%@", jsonError);
                  }
              }
          }];
         [self.twitterTableView reloadData];
         [twitterLoader stopAnimating];
         }
     }
 }];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(reachabilityChanged:)
                                             name:kReachabilityChangedNotification
                                           object:nil];
self.reachability = [Reachability reachabilityWithHostName:@"www.apple.com"];
[self.reachability startNotifier];
} 
```

我还添加了一个简单的加载器和可达性。如果您不需要它，只需删除底部的 NSNotification。

并确保添加

**账户和社会框架**

并将它们的头文件导入到您使用它的 .m 文件中。

祝你好运！

# android - 已保存的首选项无法在 android 板上重新启动

> ID：13986702
> 
> 赞同：1
> 
> 时间：2012-12-21T08:33:59.567
> 
> 标签：android, button, save, sharedpreferences

从上周开始，我在保存偏好方面遇到了一个奇怪的问题。

我正在开发与 android 兼容的电路板。

我面临的实际问题是，

我有 4 个按钮，在按钮上单击我正在更改按钮的背景图像

Onfirstclick -> 将按钮的背景图像更改为突出显示 -> 第二次单击 -> 更改为正常背景图像，在第一次运行时，我保持正常的背景按钮图像

但是在重新启动时，尽管我使用的是共享首选项，但按钮背景图像并没有保存在我的工作板上。

我有一个用于打开和关闭的电源按钮，我正在重新启动我的电路板。

任何图像（正常/突出显示）我在 onclick 中的图像我应该在重新启动板后得到

好处是

```
 the code is working perfectly in android mobile but not in my board 
```

这是我的代码。

任何帮助总是受到赞赏。

```
 public class SharedprefsActivity extends Activity  {

    protected static final String TAG = "HvacActivity";
    /** Called when the activity is first created. */
    private Button seatdirnbtn;
    private SharedPreferences prefs;
    private String prefName = "MyPref";
    private SharedPreferences.Editor editor;
    private boolean isclick;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        seatdirnbtn = (Button) findViewById(R.id.seatdirnbtn);      
        seatdirnbtn.setOnClickListener(listner1);       
    }

    public void onResume() {
        super.onResume();
        getPrefAndButtonState();        
    }

    public void onPause() {
        super.onPause();
        setPrefAndButtonState();
    }

    @Override
    public void onRestart() {
        super.onRestart();
        getPrefAndButtonState();
    }

    @Override
    public void onStop() {
        super.onStop();
        setPrefAndButtonState();
    }

    public void getPrefAndButtonState(){
        prefs = this.getSharedPreferences(prefName, MODE_PRIVATE);
        isclick = prefs.getBoolean("prefName", false);
        System.out.println("bool? " + isclick);
        if (isclick) {
            seatdirnbtn.setBackgroundResource(R.drawable.icon4hlt);
        } else if (!isclick) {
            seatdirnbtn.setBackgroundResource(R.drawable.icon4);
        }
    }

    public void setPrefAndButtonState(){
        editor = prefs.edit();
        editor.putBoolean("prefName", isclick);
        editor.commit();        
        getPrefAndButtonState();
    }

    private View.OnClickListener listner1 = new View.OnClickListener() {    
        public void onClick(View v) {   
            if (isclick) {
                isclick = false;
                setPrefAndButtonState();            
            } else if (!isclick) {
                isclick = true;
                setPrefAndButtonState();
            }   
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:45:59.937

尝试使用`getApplicationContext()`而不是`this` ：

在`setPrefAndButtonState`方法中：

```
public void setPrefAndButtonState(){
      prefs = getApplicationContext().
                getSharedPreferences(prefName, MODE_PRIVATE); <<missing this line
      editor = prefs.edit();
      editor.putBoolean("prefName", isclick);
      editor.commit();        
      getPrefAndButtonState();
    } 
```

并在`getPrefAndButtonState`方法中

```
public void getPrefAndButtonState(){
    prefs = getApplicationContext().getSharedPreferences(prefName, MODE_PRIVATE);
    isclick = prefs.getBoolean("prefName", false);
    System.out.println("bool? " + isclick);
    if (isclick) {
        seatdirnbtn.setBackgroundResource(R.drawable.icon4hlt);
    } else if (!isclick) {
        seatdirnbtn.setBackgroundResource(R.drawable.icon4);
    }
} 
```

# php - Zend 快速入门扩展：映射器更新多个对象

> ID：13986703
> 
> 赞同：-1
> 
> 时间：2012-12-21T08:34:02.267
> 
> 标签：php, zend-framework

您能否帮助扩展一下[Zend 快速入门](http://framework.zend.com/manual/1.12/en/learning.quickstart.create-model.html)：在本教程中，我们使用 Mapper 更新**单个**留言簿。如果我想更新多个留言簿怎么办？并基于某些条件？

例如，我有一个删除所有在 2012 年 12 月 21 日之前创建的留言簿的操作。我应该更新什么来实现这一点？

我的方法有意义吗？

```
// application/models/GuestbookMapper.php 
class Application_Model_GuestbookMapper
{
    public function deleteByCreatedBefore($date)
    {
        $this->getDbTable()->deleteByCreatedBefore($date);
    }
}

// application/models/DbTable/Guestbook.php 
class Application_Model_DbTable_Guestbook extends Zend_Db_Table_Abstract
{
    public function deleteByCreatedBefore($date) {
        $where = $this->getAdapter()->quoteInto('created < ?', $date);
        $this->delete($where);
    }
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:23:12.063

如果您正在使用快速入门模型/映射器并希望忠实于该数据映射器范例，则`Application_Model_DbTable_Guestbook`除了属性（“名称”、“主”...）之外，您将没有任何东西。DbTable 模型将作为该单个表的数据库适配器存在。

您的删除功能将被放置在映射器中。

```
class Application_Model_GuestbookMapper
{
    public function deleteByCreatedBefore($date)
    {
        $where = $this->getDbTable()->quoteInto('created < ?', $date);
        //delete() returns num of rows deleted
        $this->getDbTable()->delete($where);
    }
} 
```

这将起作用，但可能不是实现所需功能的最佳/最安全的方法。

数据映射器的这个特殊示例非常简单，可能会误导某些人。映射器的留言簿示例实际上并不能很好地表示映射器，因为数据库行和域模型 (Application_Model_Guestbook) 映射 1 到 1（一个数据库列到一个模型属性）。

当您需要将多个数据库表映射到单个域模型时，数据映射器开始大放异彩。每次调用 delete() 时，您的域模型 (Application_Model_Guestbook) 可能必须影响一个以上的数据库表，因此 delete() 函数的结构很重要。

你应该怎么做才能使用映射器完成删除？

**第一：**更新`Application_Model_GuestbookMapper::fetchAll()`接受一个`$where`参数，我通常设置这种类型的函数来接受一个设置列和值的数组。

```
//accepted parameters: Zend_Db_Table::fetchAll($where = null, $order = null, $count = null, $offset = null)
//accepts array (column => value )
public function fetchAll(array $where = null)
    {
        $select = $this->getDbTable()->select();
        if (!is_null($where) && is_array($where)) {
            //using a column that is not an index may effect database performance
            $select->where($where['column'] = ?, $where['value']);
        } 
        $resultSet = $this->getDbTable()->fetchAll($select);
        $entries   = array();
        foreach ($resultSet as $row) {
            $entry = new Application_Model_Guestbook();
            $entry->setId($row->id)
                  ->setEmail($row->email)
                  ->setComment($row->comment)
                  ->setCreated($row->created);
            $entries[] = $entry;
        }
        return $entries;
    } 
```

**第二：**重构您`Application_Model_GuestbookMapper::deleteByCreatedBefore()`以接受来自的输出`fetchAll()`（实际上，构建一个接受输出的 delete() 函数会更简单：Guestbook 对象数组）

```
 //accepts an array of guestbook objects or a single guestbook object
 public function deleteGuestbook($guest)
    {
        if (is_array($guest) {
            foreach ($guest as $book) {
                if ($book instanceof Application_Model_Guest){
                    $where = $this->getDbTable()->quoteInto('id = ?', $book->id);
                    $this->getDbTable()->delete($where);
                }
            }
        } elseif ($guest instanceof Application_Model_Guest) {
            $where = $this->getDbTable()->quoteInto('id = ?', $guest->id);
                    $this->getDbTable()->delete($where);
        } else {
            throw new Exception;
        }
    } 
```

将域对象作为对象删除将变得更加重要，因为您必须考虑删除对象将如何影响其他对象或持久性（数据库）范例。在某些时候，您会遇到一种情况，如果其他对象仍然存在，您不希望删除成功。

这只是一个意见，但我希望它有所帮助。

# php - 为什么必须在 C++ 中转义字符串文字中的反斜杠？

> ID：13986708
> 
> 赞同：4
> 
> 时间：2012-12-21T08:34:23.390
> 
> 标签：php, c++, escaping, tcl

我想为两种语言声明相同的正则表达式模式。对于 TCL 我这样做

```
set pattern "\d\s\S" 
```

但对于 C++，我必须为相同的模式执行此操作

```
boost::regex pattern("\\d\\s\\S"); 
```

否则 C++ 编译器会告诉我们以下信息：

```
warning C4129: 'd' : unrecognized character escape sequence 
```

那么为什么 TCL 不尝试查找 \d \s \S 转义符号而只是忽略`\`-s 但 C++ 尝试并很糟糕？

PS PHP 就像我记得的 TCL 一样工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T08:49:17.627

这就是 C++ 和 PHP 的不同之处；在 PHP 中，反斜杠后面的字符与一小组特殊字符匹配（我相信`"rnvtx"`）。如果匹配失败，它将继续而不改变含义。

但是，C++ 期望字符在那个小集合中（我认为集合更大）但是如果匹配失败，您将看到一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T08:45:13.650

C++ 有[字符转义序列](http://en.cppreference.com/w/cpp/language/escape)的概念。采用这种形式的转义序列`\c`（“c”是一个字符）用于定义字符串文字中的某些特殊字符，因此反斜杠本身也必须转义以表示不隐含特殊字符.

# ios - iOS App loader - 应该上传什么文件类型

> ID：13986710
> 
> 赞同：2
> 
> 时间：2012-12-21T08:34:30.767
> 
> 标签：ios, app-store

我一直在从 XCode Organizer 将 iOS 应用程序上传到 appstore。这是一个非常简单的过程。而且我们没有看到任何 IPA 或 APP 文件被创建。现在我的客户正在尝试使用应用程序加载器上传应用程序，并不断要求 IPA 文件。现在我有一些具体的问题 -

1.  应用程序加载器现在存在吗？它是 XCode 之外的不同程序吗？
2.  如果是这样，我需要什么文件才能上传到应用商店？国际音标？
3.  如何为应用商店创建文件？请注意，我在发布配置中安装并设置了分发证书和应用商店配置文件。我敢肯定，如果我尝试过使用 XCode，它已经上传了。但是，客户不允许我这样做。他将使用应用程序加载器来完成。

特别说明 - 1\. 请不要给我指向苹果文档的链接，他们不会谈论文件类型以及如何创建它。他们总是说“二进制”。他们的文档标题不反映内容。2\. 请不要向我展示 Ad Hoc 构建过程，这不是我要问的。3\. 请仅在您之前使用过应用程序加载器的情况下回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T08:44:49.490

Application Loader 位于 Utilties 文件夹中。对于 XCode 4.5，转到 XCode -> 右键单击​​并选择 Show Package Contents，然后转到 Contents -> Applications -> Application Loader。

当你只是从 Xcode 进行构建时，你会得到 .app 文件。要从中创建 .ipa，请遵循以下过程：

1.  在“/”上创建一个名为 Payload 的文件夹
2.  复制此文件夹中的 .app 和 .mobileprovision 文件。
3.  打开终端，转到 / 并运行以下命令 zip -9 -y -r appName.ipa Payload/

这将在 / 上创建文件“appName.ipa”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:42:17.047

1.  是的，是的。
2.  据我所知，它需要一个压缩的 .app 文件。
3.  在 Xcode 中，转到 Products 并选择“show in finder”。然后右键单击压缩文件。结果应使用应用程序加载器上传。结果位于库目录中。根据您的设置，这可以从应用程序加载器中隐藏。因此，您应该将压缩文件复制到可从任何程序（如桌面）访问的目录中。

# eclipse-plugin - 为 OcalDE 设置 OCaml 二进制文件目录路径

> ID：13986717
> 
> 赞同：1
> 
> 时间：2012-12-21T08:34:56.360
> 
> 标签：eclipse-plugin, ocaml

我想在我的 Eclipse中使用`OcalIDE plugin`to 。`Ocaml`

我已经`ocaml-3.12.0-intel`在我的 Mac 上安装了，然后是`OcalIDE plugi`n。但我无法完成，因为我的`Ocaml`路径都未定义。

我知道我的`Ocaml`包是`/usr/local/lib/ocaml`默认安装的，但是首选项不断弹出`value must be an existing file`错误，我不知道出了什么问题。

有楼上的帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:16:39.607

如果您将 OCaml 安装在标准位置，则应自动填充路径。您可以签到：

```
Window > Preferences > OcaIDE > Paths 
```

还要检查这个非常好的教程：[http ://www.algo-prog.info/ocaide/tutorials/1-installing/installing.htm](http://www.algo-prog.info/ocaide/tutorials/1-installing/installing.htm)

# android - 如何在Sqlite查询Android的Where子句中查找子字符串

> ID：13986718
> 
> 赞同：1
> 
> 时间：2012-12-21T08:34:58.467
> 
> 标签：android, sqlite, where

我在这里想知道我应该如何在android`where`中的查询中编写子句，`sqlite`因为我见过的大多数示例都说`address = ?`，但我想检查一下`substring`。有没有办法检查数据库列中存在的字符串的子字符串。也许这很简单，但我还没有找到任何这样做的例子。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T08:35:40.787

是的，使用 LIKE 运算符检查 where 子句中的子字符串。

学习[SQL LIKE](http://www.w3schools.com/sql/sql_like.asp)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T09:00:57.450

使用如下字符串代替**WHERE**子句

-> 如果子字符串在列值的开头

```
columnName+" LIKE '"+subString+"%'" 
```

-> 如果子字符串位于列值的末尾

```
columnName+" LIKE '%"+subString+"'" 
```

-> 如果子字符串在列值的中间

```
columnName+" LIKE '%"+subString+"%'" 
```

# arrays - Perl：将一个数组洗牌 10 次，计算 10 个平均最大值，打印平均最大值。重复整个过程 1000 次

> ID：13986731
> 
> 赞同：0
> 
> 时间：2012-12-21T08:36:32.410
> 
> 标签：arrays, perl, bioinformatics

我有一个如下所示的数据集

**1\. 数据集**

```
NR_046018   DDX11L1 ,   0   0   1   1   1   1   1   1   1      1    0   0   0   0   1.44    2.72    3.84    4.92
NR_047520   LOC643837   ,   3   2.2 0.2 0   0   0.28    1   1   1   1   2.2 4.8 5   5.32    5   5   5   5   3
NM_001005484    OR4F5   ,   2   2   2   1.68    1   0.48    0   0.92    1   1.8 2   2   2   2.04    3.88    3
NR_028327   LOC100133331    ,   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0 
```

**2\. 需要什么**

1.  将数组洗牌 10 次。*每次*洗牌后，将数组分成 2 个新数组，例如*set1*和*set2*。（一半进入*set1*另一半进入*set2*）

2.  从每个新数组中，计算每行数字的最大值，然后计算所有行的平均最大值。

3.  获取每个*set1*和*set2的 10 个平均最大值。（10 次随机播放的 10 个平均最大值）计算**每个*集合获得的 10 个平均最大值的平均值，我们称之为*10avg1*和*10avg2*。

4.  获取 1000 *10avg2*和 1000 *10avg2*的列表。

**3.代码**

```
use warnings;
use List::Util qw(max shuffle);

my $file = 'mergesmall.txt';

#Open file and output file
open my $fh,'<',$file or die "Unable to open file";
open OUT,">Shuffle.out" or die;

#Read into array
my @arr = <$fh>;

#Intialize loop for shuffling 10 times
my $i=10;
while($i){
    my @arr1 = ();  #Intitialize 1st set
    my @arr2 = ();  #Initialize 2nd set

    my @shuffled = shuffle(@arr);

    push @arr1,(@shuffled[0..1]); #Shift into 1st set
    push @arr2,(@shuffled[2..3]); #Shift into 2nd set

    foreach $_(@arr1){
        my @val1 = split;
        my $max1 = max(@val1[3..$#val1]);

         $total1 += $max1;
         $num1++;
    }

    my $average_max1 = $total1 /  $num1;
    #print "\n\n","Average max 1st set is : ",$average_max1;
    print OUT "Average max 1st set is : ",$average_max1;

        foreach $_(@arr2){
        my @val2 = split;
        my $max2 = max(@val2[3..$#val2]);

        print "\n\n";

         $total2 += $max2;
         $num2++;
    }

    my $average_max2 =  $total2 /  $num2;
    #print "\n\n","Average max 2nd set is : ",$average_max2;
    print OUT "\n","Average max 2nd set is : ",$average_max2,"\n\n";

    $i--;

} 
```

**4.问题**

到目前为止，我能够编写的代码可以获得每个*set1*和*set2*的 10 个最大平均值。我无法弄清楚如何计算这 10 个最大平均值的平均值。如果我能弄清楚这一点，我可以轻松地`for`循环运行 1000 次并获得 1000 *10avgset1*和 1000 *10avgset2*

**五、注意事项**

1.  实际数据集的每一行最多包含 400 个数字，有些行少于这个数，有些根本没有，但从不超过 400 个。

2.实际数据集有41,382行。Set1 将包含 23,558 行，而 set2 将包含 17,824 行。

3.File 是一个.txt 文件，每行中的所有数字都是制表符分隔的。

如果可以就如何计算最大平均值的平均值提供一些想法，我将不胜感激。我曾想过使用`push @10avgset1, $average_max1`，但我无法使其工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:56:55.340

我注意到的第一件事：您没有使用`strict`编译指示，实际上是在使用全局变量。我不确定这是否是你想要的。此外，变量名称可能不以数字开头（通常）。

我注意到的第二件事：你重复了很多次。

这是一个执行这种奇怪的“最大值平均”的函数：

```
use constant CARRY => 1; # set behaviour of original code;

sub make_accumulator {
    my $group = shift;
    my ($max, $num) = (0, 0) if CARRY;
    my @acc;
    my $acc = sub {
        my ($max, $num) = (0, 0) unless CARRY;
        for (@_) {
            $max += max @$_;
            $num++;
        }
        my $avg = $max / $num;
        push @acc, $avg;
        printf "Average max in set %d is %.2f\n", $group, $avg;
        $avg;
    };
    my $get = sub { @acc };
    ($acc, $get);
} 
```

然后我们可以这样做`my ($acc, $get) = make_accumulator(1)`，其中`$acc`是一个回调，它封装了您的算法，并`$get`返回到目前为止计算的所有此类值的数组。

实际平均值计算为

```
sub average { sum(@_) / @_ } 
```

为了初始化脚本，我做了

```
#!/usr/bin/perl

use strict;
use warnings;
use List::Util qw(shuffle max sum);

use constant CARRY => 1;

my @arr = map {my @arr = split; [@arr[3..$#arr]]} <DATA>;

my ($acc1, $get1) = make_accumulator(1);
my ($acc2, $get2) = make_accumulator(2); 
```

在加载期间，该`@arr`行仅解析该行一次。然后我继续循环几次改组的版本`@arr`：

```
for (1 .. 5){
    my @shuffled = shuffle @arr;

    my $halfway = int (@shuffled / 2);
    my @arr1 = @shuffled[0 .. $halfway];
    my @arr2 = @shuffled[$halfway .. $#shuffled];

    my $average_max1 = $acc1->(@arr1);
    my $average_max2 = $acc2->(@arr2);

    printf "running: %.2f %.2f\n", average($get1->()), average($get2->());
    print "\n";
} 
```

在这里，我将洗牌后的列表严格分成两半，您想`23557`稍后再进行硬编码。然后我打印 set1 和 set2 的运行平均值。

这会产生如下输出：

```
Average max in set 1 is 2.93
Average max in set 2 is 4.60
running: 2.93 4.60

Average max in set 1 is 3.17
Average max in set 2 is 4.60
running: 3.05 4.60

Average max in set 1 is 3.09
Average max in set 2 is 4.60
mrunning: 3.07 4.60

Average max in set 1 is 3.17
Average max in set 2 is 4.55
running: 3.09 4.59

Average max in set 1 is 3.22
Average max in set 2 is 4.03
running: 3.12 4.48 
```

如果我设置`CARRY`为假值，我会得到

```
Average max in set 1 is 3.07
Average max in set 2 is 5.12
running: 3.07 5.12

Average max in set 1 is 3.07
Average max in set 2 is 2.46
running: 3.07 3.79

Average max in set 1 is 3.07
Average max in set 2 is 4.40
running: 3.07 3.99

Average max in set 1 is 3.41
Average max in set 2 is 4.40
running: 3.15 4.10

Average max in set 1 is 3.07
Average max in set 2 is 5.12
running: 3.14 4.30 
```

`n!/(n/2)!`这看起来很愚蠢，因为四行（我猜）的可能组合很少。

当然，这些值每次运行时都会有所不同，因为`shuffle`已经是伪随机的。

### 编辑：

`DATA`文件句柄假定您在脚本末尾有一个数据部分，例如

```
__DATA__
NR_046018   DDX11L1 ,   0   0   1   1   1   1   1   1   1      1    0   0   0   0   1.44    2.72    3.84    4.92
NR_047520   LOC643837   ,   3   2.2 0.2 0   0   0.28    1   1   1   1   2.2 4.8 5   5.32    5   5   5   5   3
NM_001005484    OR4F5   ,   2   2   2   1.68    1   0.48    0   0.92    1   1.8 2   2   2   2.04    3.88    3
NR_028327   LOC100133331    ,   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0 
```

要使用命令行中列出的任何文件，请执行

```
my @arr = map {...} <>;  # no explicit filehandle 
```

或手动打开文件。

# c# - 调试混合模式（C#、C++）应用程序

> ID：13986733
> 
> 赞同：8
> 
> 时间：2012-12-21T08:36:42.880
> 
> 标签：c#, windbg, crash-dumps, sos

我正在调试混合模式（托管和非托管）应用程序的问题。

实际问题在非托管代码中。

我已将 SOS dll 加载到 Windebugger 中。但是因为我已经加载了 SOS dll，所以它只向我显示了托管模式的调用堆栈。我如何也看到非托管代码的调用堆栈？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T09:52:58.950

SOS 命令`!dumpstack`将生成包含托管和非托管代码的完整堆栈跟踪。由于这是非托管代码中的问题，因此通常的调试器堆栈跟踪命令（`k`和变体）也可能有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T10:49:13.877

!sosex.mk 将以易于阅读的方式提供完整的堆栈跟踪。

# asp.net-web-api - 带有 WebAPI 和 OData 的 JayData 不运行回调

> ID：13986736
> 
> 赞同：1
> 
> 时间：2012-12-21T08:36:56.703
> 
> 标签：asp.net-web-api, odata, jaydata

我正在使用最新版本的 JayData 和 RC for Asp.Net WebAPI OData。当我运行 JavaScript 函数从服务器获取数据时，我可以看到带有 JSON 数据的请求和响应。但是，.then() 函数永远不会触发，因此 UI 不知道数据是从服务器返回的。

这是我的 JayData 通话：

```
(function(root) {
    var context = new Default.Container({
        name: 'oData',
        oDataServiceHost: '../api/transactions'
    });

    $(function() {
        context.TransactionsByMonth.take(5).toArray().then(function(transactions) {
            transactions.forEach(function (transaction) {
                alert('Test');
            });
        });
    });
}(window)); 
```

以下是响应标头：

响应标头 Cache-Control no-cache Content-Length 1811 Content-Type application/json Date Fri, 21 Dec 2012 08:32:58 GMT Expires -1 Pragma no-cache Server Microsoft-IIS/8.0 X-AspNet-Version 4.0。 30319 X-Powered-By ASP.NET X-SourceFiles =?UTF-8?B?YzpcdXNlcnNcanVzdGluXGRvY3VtZW50c1x2aXN1YWwgc3R1ZGlvIDIwMTJcUHJvamVjdHNcVHJlYXNTdXJlLldlYlxUcmVhc1N1cmUuV2ViXGFwaVx0cmFuc2FjdGlvbnNcVHJhbnNhY3Rpb25zQnlNb250aA==?= Request Headers Accept application/atomsvc​​+xml;q=0.8, application/json;odata=verbose;q=0.5, */*;q=0.1 Accept-Encoding gzip, deflate Accept-Language en-US,en;q=0.5 Connection keep-alive Cookie glimpseState=null; 一瞥最新版本=0.87；一瞥选项=空；glimpseClientName=null Host localhost:42039 MaxDataServiceVersion 2.0 Referer http://{localhost}/dashboard/test User-Agent Mozilla/5.0 (Windows NT 6.2; WOW64; rv:17.0) Gecko/20100101 Firefox/17.0

这是回应：

```
[
  {
    "TransactionByMonthId": 1,
    "BeginningBalanceAmount": 5970.0,
    "FloatAmount": 8027.0,
    "InflowsAmount": 8607.0,
    "OutflowsAmount": -2057.0,
    "EndingBalanceAmount": 33345.0,
    "MonthOfYear": 12,
    "MonthOfYearName": "MonthOfYearName6136f9ba-95c3-4977-ab29-5ec2e2968c5f",
    "QuarterOfYear": 8,
    "YearNumber": 2012
  },
  {
    "TransactionByMonthId": 10,
    "BeginningBalanceAmount": 9201.0,
    "FloatAmount": 4723.0,
    "InflowsAmount": 4933.0,
    "OutflowsAmount": -2808.0,
    "EndingBalanceAmount": 9858.0,
    "MonthOfYear": 11,
    "MonthOfYearName": "MonthOfYearName7c407e0d-d730-43c3-aff6-d3e56313f992",
    "QuarterOfYear": 17,
    "YearNumber": 2012
  },
  {
    "TransactionByMonthId": 19,
    "BeginningBalanceAmount": 3151.0,
    "FloatAmount": 19.0,
    "InflowsAmount": 9340.0,
    "OutflowsAmount": -6118.0,
    "EndingBalanceAmount": 19958.0,
    "MonthOfYear": 10,
    "MonthOfYearName": "MonthOfYearName504ded96-a4e3-4492-ae22-98da7c9c2ba1",
    "QuarterOfYear": 26,
    "YearNumber": 2012
  },
  {
    "TransactionByMonthId": 28,
    "BeginningBalanceAmount": 3826.0,
    "FloatAmount": 7120.0,
    "InflowsAmount": 3341.0,
    "OutflowsAmount": -9360.0,
    "EndingBalanceAmount": 33617.0,
    "MonthOfYear": 9,
    "MonthOfYearName": "MonthOfYearName5fa907a3-b6a3-4a42-a53b-2229da6e1dc6",
    "QuarterOfYear": 35,
    "YearNumber": 2012
  },
  {
    "TransactionByMonthId": 37,
    "BeginningBalanceAmount": 6832.0,
    "FloatAmount": 4412.0,
    "InflowsAmount": 2462.0,
    "OutflowsAmount": -3726.0,
    "EndingBalanceAmount": 40857.0,
    "MonthOfYear": 8,
    "MonthOfYearName": "MonthOfYearNameb3f6a899-6201-418a-b020-31babb42123b",
    "QuarterOfYear": 44,
    "YearNumber": 2012
  }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:31:12.183

有两点需要检查：

**需要 jquery 或 q**

如果你想使用 Promise 接口（then/fail），那么你应该包含 jquery 或 q.js 作为 Promise 实现（JayData 没有自己的 Promise 实现）。如果您使用 q.js，您还必须包含 jaydatamodules/qdeferred.js 作为 promise 适配器（这与 jquery 无关）。

**给定的响应是 WebAPI 而不是 OData**

您复制的响应负载不是 OData，它必须来自简单的 WebAPI 响应。因此，您需要 JayData 提供的 WebAPI 提供程序，而不是这种格式的 OData 提供程序。如果您使用的是 ASP.NET WebAPI OData 包，则某些内容未正确连接：此包将 WebAPI 响应负载格式更改为该 OData 的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:17:22.560

请也捕获并记录失败分支。.then() .fail(function(reason){console.log(reason);}) 同样使用 chrome，如果发生任何异常，您也可以捕获，所以请也尝试一下。

# css - 链式 CSS3 动画

> ID：13986747
> 
> 赞同：3
> 
> 时间：2012-12-21T08:37:26.513
> 
> 标签：css, animation, css-transitions

我有一个简单的问题（我认为）。

有什么方法可以链接 CSS3 动画，例如：

```
 #element { animation: fadeIn 5s 0s linear, fadeOut 5s 25s linear ; }

    @keyframes fadeOut {
        from { opacity:1; }
        to { opacity:0; }
    }

    @keyframes fadeIn {
        from { opacity:0; }
        to { opacity:1; }
    } 
```

在这种情况下，我想我可以用不同的延迟淡入和淡出不同的元素。非常感谢，莱昂内尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:13:56.943

是的，您可以使用 0%、25% 等增量并链接整个动画。

看看[这个小提琴](http://jsfiddle.net/nbatothemax/amJ2e/6/)。

我所做的是使用增量使动画成为一个大链。

```
@-webkit-keyframes move {
0%   {top:  100px;
      left: 100px;
      -webkit-transform: rotate(135deg);}
25%  {top:  250px;
      left: 250px;
      -webkit-transform: rotate(135deg);}
50%  {top:  100px;
      left: 250px;
      -webkit-transform: rotate(0deg);}
75%  {top:  250px;
      left: 100px;
      -webkit-transform: rotate(-135deg);}
100% {top:  100px;
      left: 100px;
      -webkit-transform: rotate(0deg);}
} 
```

% 时间是动画应该更改的停止点，因此要更改对象淡入和淡出的时间，只需相应地更改这些百分比。

# asp.net - 检查十进制数是否在范围内

> ID：13986752
> 
> 赞同：1
> 
> 时间：2012-12-21T08:37:59.943
> 
> 标签：asp.net, vb.net, decimal

这可能很容易，但我只需要确保如何正确地做到这一点。如何检查一个`decimal`数字是否在一个范围内？

我有两个十进制数字：

```
Dim minFactor As Decimal = 1.95
Dim maxFactor As Decimal = 2.05

Dim varResult as decimal 
```

现在我想检查我的计算`varResult`是否在两个因素的范围内。如果是，则返回`true`。

怎样才是最正确的做法？

我试过：

```
Select Case varResult 
    Case 1.95 To 2.05 
        Unit1 = True 
    Case Else 
        Unit1 = False 
End Select 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T08:47:18.543

您可以简单地使用[`>=`and`<=`运算符](http://msdn.microsoft.com/en-us/library/system.decimal.op_greaterthanorequal%28v=vs.110%29.aspx)：

```
If varResult >= minFactor AndAlso varResult <= maxFactor Then
    ' ...
End If 
```

但由于您使用的是 ASP.NET，我假设您的问题针对的是用户输入的验证。所以我会使用一个[`RangeValidator`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.rangevalidator.aspx)为此目的而制作的：

```
<asp:RangeValidator id="Range1"
           ControlToValidate="TextBox1"
           MaximumValue="2.05" 
           MinimumValue="1.95" 
           Type="Double"
           EnableClientScript="false"
           Text="The value must be from 1.95 to 2.05!"
           runat="server"/> 
```

请注意，`RequiredFieldVFalidator`当根本没有输入无效时，您还需要一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:47:31.603

只需将值与每个范围进行比较：

```
If varResult >= minFactor And varResult <= maxFactor Then ... 
```

如果范围限制应该包含，则可以使用`>=`and运算符，如果范围限制应该排除，则可以使用and运算符。`<=``>``<`

如果您有多个范围，并且一个范围接管了另一个范围，则通常将下限包括在内而上限不包括在内，这样范围重叠的地方就没有值：

```
Dim minRange1 As Decimal = 1.95
Dim maxRange1 As Decimal = 2.05
Dim minRange2 As Decimal = 2.05
Dim maxRange2 As Decimal = 2.95

If varResult >= minRange1 And varResult < maxRange1 Then
  ...
ElseIf varResult >= minRange2 And varResult < maxRange2 Then
  ...
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T08:48:03.727

简单的 ：

```
If (varResult < maxFactor && varResult > minFactor )
     return true; 
else 
     return false; 
```

谢谢

# emacs - 我可以在emacs中使用完成缓冲区而不是带有自动完成功能的菜单吗？

> ID：13986754
> 
> 赞同：0
> 
> 时间：2012-12-21T08:38:14.797
> 
> 标签：emacs, autocomplete

我想使用完成作为 emacs 的原始行为：使用`emacs -q`和

```
(setq tab-always-indent 'complete) 
```

当 hit 时`TAB`，给我一个显示所有候选人的完成缓冲区。我可以这样做`auto complete`吗？我更喜欢它用于不同模式的各种来源，但我不想使用它的菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T17:39:19.297

编写一个简单的“适配器”应该不会太难，即您可以添加的功能，`completion-at-point-functions`它将使用自动完成源来提供完成数据`completion-at-point`。

# iphone - 在 iOS 设备上找不到文件，但可以在模拟器中使用

> ID：13986757
> 
> 赞同：0
> 
> 时间：2012-12-21T08:38:21.780
> 
> 标签：iphone, objective-c, image, file, simulator

当我在模拟器上测试我的应用程序时，一切正常。但是当我在我的 iOS 设备上测试时，我得到了这个错误：

```
*** Terminating app due to uncaught exception 'FileNotFound', reason: 'file '/Users/name/Documents/appname/GFX/MainMenu.png' not found' 
```

我检查了 Build Phases Copy Bundle Resources 并添加了所有内容。当我在 中突出显示文件时`Xcode`，会在实用程序中检查目标成员身份。

我还尝试省略加载文件的代码，但在不同的文件上出现相同的错误。似乎只有应用程序图标和启动图像才能正确加载。

请注意，我正在使用**Sparrow 框架**（如果这有什么不同的话）。纹理像这样加载：

```
SPTexture *gameMenuTexture = [SPTexture textureWithContentsOfFile:(@"/Users/name/Documents/appname/GFX/MainMenu.png")];

SPImage *gameMenuImage = [SPImage imageWithTexture:(gameMenuTexture)];
[self addChild:gameMenuImage]; 
```

帮助将不胜感激。我在论坛上到处寻找答案。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:44:18.540

Issue is with the hard coded path:

```
@"/Users/name/Documents/appname/GFX/MainMenu.png" 
```

In device there will not be any folder in the specified path.

If it is on bundle use:

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"MainMenu" ofType:@"png"];
SPTexture *gameMenuTexture = [SPTexture textureWithContentsOfFile:filePath]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:46:30.687

测试这样的东西`SPTexture *gameMenuTexture = [SPTexture textureWithContentsOfFile:(@"MainMenu.png")];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T08:51:29.757

您的模拟器只是在您的 Mac 上运行的应用程序。它可以轻松访问我们 Mac 上的文件，例如 /Users/name/Documents/appname/GFX/MainMenu.png。

您的 iOS 设备无法直接访问 Mac 上的文件。最新发布应用程序时，第 3 方用户几乎无法访问您 Mac 上的任何内容。

想一想。它确实有道理。

# c# - C# EF Code first - 创建数据库并添加数据

> ID：13986758
> 
> 赞同：3
> 
> 时间：2012-12-21T08:38:28.793
> 
> 标签：c#, wpf, entity-framework

我想创建数据库并添加一些数据。我添加了 EF，我想先使用代码。我有这些课程：

```
public class Question
{
    public bool Sort { get; set; }
    public int QuestionID { get; set; }
    public int Level { get; set; }
    public string Description { get; set; }
    public string Answer1 { get; set; }
    public string Answer2 { get; set; }
    public string Answer3 { get; set; }
    public string Answer4 { get; set; }
    public string RightAnswer { get; set; }
    public bool Show { get; set; }
}

public class QuestionDb : DbContext
{
    public DbSet<Question> Questions { get; set; }
} 
```

这是我的连接字符串：

```
<add name="ConvertCSVtoSQL.QuestionDb" connectionString="Data Source=|DataDirectory|ConvertCSVtoSQL.QuestionDb.sdf"
      providerName="System.Data.SqlServerCe.4.0" /> 
```

现在我正在创建这样的数据库：

```
using (var db = new QuestionDb())
        {

            foreach (var question in questions)
            {
                db.Questions.Add(question);
            }
            db.SaveChanges();
        } 
```

它创建数据库，但如果我有一些我想添加的问题中的数据，我会收到错误：

> 'System.Data.SqlServerCe.4.0' ADO.NET 提供程序的实体框架提供程序类型 'System.Data.Entity.SqlServerCompact.SqlCeProviderServices, EntityFramework.SqlServerCompact, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'不被加载。确保提供程序程序集可用于正在运行的应用程序。有关详细信息，请参阅 [http://go.microsoft.com/fwlink/?LinkId=260882](http://go.microsoft.com/fwlink/?LinkId=260882)。

我尝试添加一些初始化程序，但没有帮助：

```
Database.DefaultConnectionFactory = new SqlCeConnectionFactory("System.Data.SqlServerCe.4.0",@"C:\Path\To\",@"Data Source=C:\Path\To\DbFile.sdf");
Database.SetInitializer(new CreateDatabaseIfNotExists<QuestionDb>()); 
```

那么问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T17:39:44.040

我查看了异常中的链接，将 nuget 包 EntityFramework.SqlServerCompact 添加到我的解决方案中，它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T22:04:19.233

在 VS 包管理器控制台中运行以下命令解决了我的问题：

安装包 EntityFramework.SqlServerCompact -Pre

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T08:49:15.990

请检查连接字符串的提供者名称...

[http://weblogs.asp.net/scottgu/archive/2010/12/08/announcing-entity-framework-code-first-ctp5-release.aspx](http://weblogs.asp.net/scottgu/archive/2010/12/08/announcing-entity-framework-code-first-ctp5-release.aspx)

希望你会发现这很有用

```
Database.DefaultConnectionFactory = new SqlCeConnectionFactory("System.Data.SqlServerCe.4.0",@"C:\\Path\To\\",@"Data Source=C:\\Path\\To\\DbFile.sdf");
Database.SetInitializer(new CreateDatabaseIfNotExists<QuestionDb>()); 
```

# java - JSP Unix 文件列表

> ID：13986759
> 
> 赞同：0
> 
> 时间：2012-12-21T08:38:34.753
> 
> 标签：java, list, jsp, unix, grep

我需要在我的 JSP 上创建一个链接列表，这些链接与 Unix 服务器上特定文件夹（带有 html 扩展名）中的一些文件相关。我的问题是：我如何“连接”到 Unix 服务器？我的 JSP 将存储在我需要搜索的同一台服务器上。我应该使用什么方法来搜索我的特定文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:53:39.317

您可以使用[File.listFiles(...)](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#listFiles%28java.io.FilenameFilter%29)方法（实际上在任何操作系统/文件系统上）。`uid`请注意，如果for webserver 无权访问文件夹/文件或例如，可能会有限制。在 UNIX 机器上的 chroot 环境中。

下面的代码片段

```
File[] files = new File( "/your/folder" ).listFiles( "*.html" ); 
```

应该给你一个`File[]`数组，其中的文件满足*/your/folder中的**.html*条件。

 *干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:08:46.803

您可以通过多种方式做到这一点。

如果服务器上的共享是本地的或已经本地安装的，那么您可以使用 Anders R.Bystrups 回答。

如果不是，那么您需要某种连接到服务器的方法。

如果它是共享资源（例如共享文件夹），那么您可以使用 //server/share/file 访问它）。

如果服务器正在运行 FTP 或 SFTP，那么您可以使用相关服务来检索文件列表。

最后，服务器可以运行一个 Web 服务（您必须编写它），它可以公开它拥有的文件列表。*

# java - JMX 服务 url 无法连接远程 jvm

> ID：13986762
> 
> 赞同：0
> 
> 时间：2012-12-21T08:38:50.290
> 
> 标签：java, jmx, mbeans

我用 JMX 编写了 JVM 监控。我将 MBean 服务器连接与以下 url

```
 service:jmx:rmi:///jndi/rmi://localhost:9999/jmxrmi 
```

它使用**localhost**工作，但我想连接其他机器 JVM，我也使用了它；

```
 service:jmx:rmi:///jndi/rmi://OTHER_SERVER_PORT:9999/jmxrmi 
```

它不起作用。我对此进行了研究，并且一些示例告诉将以下 JVM 选项添加到目标机器 JVM。

```
 -Dcom.sun.management.jmxremote
   -Dcom.sun.management.jmxremote.port=9999
   -Dcom.sun.management.jmxremote.authenticate=false
   -Dcom.sun.management.jmxremote.ssl=false 
```

那么在哪里添加上面的 JVM 选项呢？以及如何使用 JMX 服务 url 连接其他机器 JVM？这是我的示例类

```
 public class JMXRemote {
      public static void main(String[] args) throws Exception {
          JMXServiceURL url = new JMXServiceURL(
            "service:jmx:rmi:///jndi/rmi://OTHER_PC_PORT:9999/jmxrmi");

          JMXConnector c = JMXConnectorFactory.connect(url);
          MBeanServerConnection mbsc = c.getMBeanServerConnection();

          Object o = mbsc.getAttribute(new ObjectName("java.lang:type=Memory"),
            "HeapMemoryUsage");
          CompositeData cd = (CompositeData) o;
          System.out.println(cd.get("committed"));
      }
  } 
```

# wso2esb - 我需要遍历 xml 值并生成一个包含值的 xls 文件

> ID：13986766
> 
> 赞同：2
> 
> 时间：2012-12-21T08:39:20.253
> 
> 标签：wso2esb

我需要使用 xml 中的值生成 xls 文件。下面是我尝试执行的序列，但它只需要第一个结果。

```
<sequence xmlns="http://ws.apache.org/ns/synapse" name="ConcurTransformReconcilationExtractFlow">
   <property xmlns:ns="http://org.apache.synapse/xsd" xmlns:ns3="http://org.apache.synapse/xsd" name="current-context-details" expression="concat(get-property('current-context-details'), ', ConcurTransformReconcilationExtractFlow')" />
   <property name="scenario" value="ConcurTransformReconcilationExtractFlow" />
   <log level="custom">
      <property name="DEBUGGING" value="ConcurTransformReconcilationExtractFlow" />
   </log>
   <log>
      <property xmlns:ns="http://org.apache.synapse/xsd" xmlns:ns3="http://org.apache.synapse/xsd" name="datetime" expression="substring(get-property('current-date'),1,10)" />
      <property xmlns:ns="http://org.apache.synapse/xsd" xmlns:ns3="http://org.apache.synapse/xsd" name="date" expression="substring-after(get-property('current-date'), 'T')" />
      <property xmlns:ns="http://org.apache.synapse/xsd" xmlns:ns3="http://org.apache.synapse/xsd" name="time" expression="substring(substring-after(get-property('current-date'), 'T'), 1,8)" />
      <property xmlns:ns="http://org.apache.synapse/xsd" xmlns:ns3="http://org.apache.synapse/xsd" name="current-datetime" expression="concat(substring(get-property('current-date'),1,10),substring(substring-after(get-property('current-date'), 'T'), 1,8))" />
   </log>
   <filter xmlns:dat="http://ws.wso2.org/dataservice" xmlns:ns="http://org.apache.synapse/xsd" xmlns:ns3="http://org.apache.synapse/xsd" xpath="//dat:rows">
      <then>
         <xslt key="Concur_Group_Reconcilation_Extract_Transformation" />
         <log level="full" />
         <iterate expression="//sae" sequential="true">
            <target>
               <sequence>
                  <property name="company_code_sae_id" expression="concat('_',string(//@filename))" />
                  <log level="custom">
                     <property name="company_code_sae_id" expression="get-property('company_code_sae_id')" />
                  </log>
                  <property name="filename" expression="concat('Reconcilation_Extract_',substring(get-property('current-date'),1,10),'.xls')" />
                  <class name="com.semtech.integration.mediator.XMLToExcelMediator.XMLToExcelMediator" />
                  <property name="transport.vfs.ReplyFileName" expression="get-property('filename')" scope="transport" />
                  <property name="OUT_ONLY" value="true" />
                  <filter source="starts-with(get-property('company_code_sae_id'),'_')" regex="true">
                     <then>
                        <send>
                           <endpoint name="FileEpr">
                              <address uri="vfs:file:///exports/mounts/Concur/PaymentExtract" />
                           </endpoint>
                        </send>
                     </then>
                  </filter>
               </sequence>
            </target>
         </iterate>
      </then>
      <else>
         <enrich>
            <source clone="true" type="body" xpath="" property="" />
            <target action="replace" type="property" xpath="" property="body-message" />
         </enrich>
         <property name="error_message" expression="get-property('body-message')" />
         <property name="error_message" expression="concat('Invalid response received from data service:  ', get-property('error_message'))" />
         <log level="custom" category="ERROR">
            <property name="ConcurTransformReconcilationExtractFlow" expression="get-property('error_message')" />
         </log>
         <sequence key="GeneralErrorHandler" />
         <drop />
      </else>
   </filter>
   <description>Transforms the XML extract data service response to a xml file.</description>
</sequence> 
```

xslt转换后的输入如下

```
<?xml version="1.0"?>
<rows>
<sae filename="30">
<row>
<sae_id>6</sae_id>
<sae_date>2012-08-13-07:00</sae_date>
<Co30>314.42</Co30>
<payment_type>CASH</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>7</sae_id>
<sae_date>2012-08-20-07:00</sae_date>
<Co30>1456.62</Co30>
<payment_type>CASH</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>10</sae_id>
<sae_date>2012-09-08-07:00</sae_date>
<Co30>1359.88</Co30>
<payment_type>CASH</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>12</sae_id>
<sae_date>2012-09-18-07:00</sae_date>
<Co30>44.4</Co30>
<payment_type>CASH</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>15</sae_id>
<sae_date>2012-09-24-07:00</sae_date>
<Co30>2142.47</Co30>
<payment_type>CASH</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>19</sae_id>
<sae_date>2012-09-28-07:00</sae_date>
<Co30>3400.9</Co30>
<payment_type>CASH</payment_type>
<concur_pay>Y</concur_pay>
</row>
<row>
<sae_id>28</sae_id>
<sae_date>2012-10-03-07:00</sae_date>
<Co30>1243.89</Co30>
<payment_type>CASH</payment_type>
<concur_pay>Y</concur_pay>
</row>
<row>
<sae_id>33</sae_id>
<sae_date>2012-10-10-07:00</sae_date>
<Co30>101.88</Co30>
<payment_type>CASH</payment_type>
<concur_pay>Y</concur_pay>
</row>
<row>
<sae_id>36</sae_id>
<sae_date>2012-10-15-07:00</sae_date>
<Co30>2418.88</Co30>
<payment_type>CASH</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>40</sae_id>
<sae_date>2012-10-22-07:00</sae_date>
<Co30>1499.57</Co30>
<payment_type>CASH</payment_type>
<concur_pay>Y</concur_pay>
</row>
<row>
<sae_id>41</sae_id>
<sae_date>2012-10-23-07:00</sae_date>
<Co30>925.88</Co30>
<payment_type>CASH</payment_type>
<concur_pay>Y</concur_pay>
</row>
<row>
<sae_id>43</sae_id>
<sae_date>2012-10-25-07:00</sae_date>
<Co30>37.0</Co30>
<payment_type>CASH</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>44</sae_id>
<sae_date>2012-10-26-07:00</sae_date>
<Co30>1046.34</Co30>
<payment_type>CASH</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>46</sae_id>
<sae_date>2012-10-30-07:00</sae_date>
<Co30>3760.52</Co30>
<payment_type>CASH</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>51</sae_id>
<sae_date>2012-11-06-08:00</sae_date>
<Co30>1610.96</Co30>
<payment_type>CASH</payment_type>
<concur_pay>Y</concur_pay>
</row>
<row>
<sae_id>53</sae_id>
<sae_date>2012-11-08-08:00</sae_date>
<Co30>1962.57</Co30>
<payment_type>CASH</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>53</sae_id>
<sae_date>2012-11-08-08:00</sae_date>
<Co30>868.0</Co30>
<payment_type>COPD</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>56</sae_id>
<sae_date>2012-11-13-08:00</sae_date>
<Co30>11384.52</Co30>
<payment_type>CASH</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>56</sae_id>
<sae_date>2012-11-13-08:00</sae_date>
<Co30>2268.4</Co30>
<payment_type>COPD</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>59</sae_id>
<sae_date>2012-11-16-08:00</sae_date>
<Co30>750.15</Co30>
<payment_type>CASH</payment_type>
<concur_pay>Y</concur_pay>
</row>
<row>
<sae_id>61</sae_id>
<sae_date>2012-11-20-08:00</sae_date>
<Co30>1083.08</Co30>
<payment_type>CASH</payment_type>
<concur_pay>Y</concur_pay>
</row>
<row>
<sae_id>66</sae_id>
<sae_date>2012-11-27-08:00</sae_date>
<Co30>14624.52</Co30>
<payment_type>CASH</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>66</sae_id>
<sae_date>2012-11-27-08:00</sae_date>
<Co30>5874.2</Co30>
<payment_type>COPD</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>69</sae_id>
<sae_date>2012-11-30-08:00</sae_date>
<Co30>19.96</Co30>
<payment_type>CASH</payment_type>
<concur_pay>Y</concur_pay>
</row>
<row>
<sae_id>71</sae_id>
<sae_date>2012-12-04-08:00</sae_date>
<Co30>595.13</Co30>
<payment_type>CASH</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>75</sae_id>
<sae_date>2012-12-06-08:00</sae_date>
<Co30>685.47</Co30>
<payment_type>CASH</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>76</sae_id>
<sae_date>2012-12-07-08:00</sae_date>
<Co30>1286.91</Co30>
<payment_type>CASH</payment_type>
<concur_pay>N</concur_pay></row>
</sae>
</row>
</sae>
<sae filename="36">
<row>
<sae_id>53</sae_id>
<sae_date>2012-11-08-08:00</sae_date>
<Co36>631.8</Co36>
<payment_type>CASH</payment_type>
<concur_pay>Y</concur_pay>
</row>
<row>
<sae_id>56</sae_id>
<sae_date>2012-11-13-08:00</sae_date>
<Co36>1041.87</Co36>
<payment_type>CASH</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>58</sae_id>
<sae_date>2012-11-15-08:00</sae_date>
<Co36>3197.3</Co36>
<payment_type>CASH</payment_type>
<concur_pay>Y</concur_pay>
</row>
<row>
<sae_id>66</sae_id>
<sae_date>2012-11-27-08:00</sae_date>
<Co36>4912.54</Co36>
<payment_type>CASH</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>71</sae_id>
<sae_date>2012-12-04-08:00</sae_date>
<Co36>1008.42</Co36>
<payment_type>CASH</payment_type>
<concur_pay>Y</concur_pay>
</row>
<row>
<sae_id>76</sae_id>
<sae_date>2012-12-07-08:00</sae_date>
<Co36>46.62</Co36>
<payment_type>CASH</payment_type>
<concur_pay>N</concur_pay>
</row>
</sae>
<sae filename="33">
<row>
<sae_id>56</sae_id>
<sae_date>2012-11-13-08:00</sae_date>
<Co33>200.43</Co33>
<payment_type>CASH</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>56</sae_id>
<sae_date>2012-11-13-08:00</sae_date>
<Co33>950.2</Co33>
<payment_type>COPD</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>58</sae_id>
<sae_date>2012-11-15-08:00</sae_date>
<Co33>3231.53</Co33>
<payment_type>CASH</payment_type>
<concur_pay>Y</concur_pay>
</row>
<row>
<sae_id>62</sae_id>
<sae_date>2012-11-21-08:00</sae_date>
<Co33>156.66</Co33>
<payment_type>CASH</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>62</sae_id>
<sae_date>2012-11-21-08:00</sae_date>
<Co33>2806.92</Co33>
<payment_type>COPD</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>66</sae_id>
<sae_date>2012-11-27-08:00</sae_date>
<Co33>291.48</Co33>
<payment_type>CASH</payment_type>
<concur_pay>N</concur_pay>
</row>
<row>
<sae_id>69</sae_id>
<sae_date>2012-11-30-08:00</sae_date>
<Co33>47.78</Co33>
<payment_type>CASH</payment_type>
<concur_pay>Y</concur_pay>
</row>
</sae>
</rows> 
```

并且输出需要是一个 xls 文件，其列如下

```
sae_id  sae_date  Co30 Co33 Co36 Payment_type concur_pay 
```

在此之下，所有的值都应该被正确分配。上面的序列会这样做，但如果序列=“true”，则仅用于第一个值，如果序列=“false”，则仅用于最后一个值。请指导我获取所有值单个 xls 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:47:51.043

刚刚使用代理（见下面的代码）尝试了您的序列，并获取您的输入 XML（其中包含错误！）。那么它确实工作得很好。问题在这里：

当您循环遍历`<sae>`元素时（确实有效）**，您总是写入相同的文件名！**属性`transport.vfs.ReplyFileName`总是一样的。因此，当您使用时，您将在输出文件`sequential="true"`中获得最后一个的内容。`<sae>`但是当你使用`sequential="false"`序列时并没有真正定义，你会得到任何元素。

在这里，我用 更改了输出文件名，`company_cod_sae_id`然后每个 sae 将有一个输出文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<proxy xmlns="http://ws.apache.org/ns/synapse" name="stackoverflow_xls" transports="vfs" startOnLoad="true" trace="disable">
  <parameter name="transport.PollInterval">5</parameter>
  <parameter name="transport.vfs.FileURI">C:/WSO2/StackOverflow/XLS</parameter>
  <parameter name="transport.vfs.FileNamePattern">.*.(XML|xml)$</parameter>
  <parameter name="transport.vfs.ContentType">application/xml</parameter>
  <parameter name="transport.vfs.ActionAfterProcess">MOVE</parameter>
  <parameter name="transport.vfs.MoveAfterProcess">C:/WSO2/StackOverflow/XLS/saved</parameter>
  <target faultSequence="errorSequence">
     <inSequence>
        <log level="full"/>
        <iterate expression="//sae" sequential="true">
           <target>
              <sequence>
                 <property name="company_code_sae_id" expression="concat('_',string(//@filename))"/>
                 <log level="custom">
                    <property name="company_code_sae_id" expression="get-property('company_code_sae_id')"/>
                 </log>
                 <!--<property name="filename" expression="concat('Reconcilation_Extract_',substring(get-property('current-date'),1,10),'.xls')"/>-->
                 <property name="filename" expression="concat('Reconcilation_Extract_',get-property('company_code_sae_id'),'.xls')"/>
                 <!--<class name="com.semtech.integration.mediator.XMLToExcelMediator.XMLToExcelMediator"/>-->
                 <property name="transport.vfs.ReplyFileName" expression="get-property('filename')" scope="transport"/>
                 <property name="OUT_ONLY" value="true"/>

                 <filter source="starts-with(get-property('company_code_sae_id'),'_')" regex="true">
                    <then>
                       <send>
                          <endpoint name="FileEpr">
                             <address uri="vfs:file://C:/WSO2/StackOverflow/XLS"/>
                          </endpoint>
                       </send>
                    </then>
                 </filter>
              </sequence>
           </target>
        </iterate>
     </inSequence>
  </target> 
```

# c - 通过 TCP 与中间服务器在 2 个客户端之间传输数据的有效方法

> ID：13986769
> 
> 赞同：1
> 
> 时间：2012-12-21T08:39:23.623
> 
> 标签：c, tcp, pthreads, client-server

这是出于教育目的（大学作业）。

我需要用 C 语言为 Linux 编写一个客户端-服务器程序。（我已经有了那部分。客户端连接到服务器，它可以毫无问题地发送和接收文件......）。

当客户端连接到服务器时，它会向服务器发送客户端上的文件列表。所以服务器有一个它的客户端上所有文件的列表。

客户端 A 可以向服务器请求文件“test.txt”，服务器知道该文件在客户端 B 上，并且该文件应该从 B 传输到 A。我正在考虑最好的方法这。

1.  从 B 接收到缓冲区，并立即将缓冲区发送（）到 A？
2.  recv() 将 B 中的整个文件保存在服务器上，然后发送给 A？

我的程序应该支持这种行为：如果 A 向 B 询问文件，然后 C 向 B 询问文件，C 不应等到传输 A<-->B 结束。这就是我卡住的地方。

非常感谢你！！

编辑：我的服务器正在使用线程：每当有新客户端连接时，都会打开一个新线程来为其提供服务。目前，我的客户不使用线程（可以更改）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:34:35.297

如果您想使用套接字一次进行多次传输，您有两种选择：

**阻塞套接字和线程**

这就是您编写服务器的方式。线程的问题在于它们可能导致难以调试的错误。将其与本身很难调试的网络错误结合起来，您将面临一个潜在的噩梦般的调试会话。

**非阻塞套接字和 select()**

这种方式不需要线程，而是使用 select() 来查看哪些套接字有数据等待读取。将其与一些循环结合起来，您可以同时传输多个文件。将套接字设置为非阻塞很容易，使用正确的可能会稍微棘手一些，但考虑到线程+网络错误的可能性，这是我个人更喜欢编写网络代码的方式。

关于您的实际问题；我会建议这样的事情：

```
Client A connects to server S. You need to bind the local side for the next step.
A also opens another socket for data transfer on the next port upwards.
S sends file list to A. How you build up the file list I leave to you.
A requests file F from S.
S checks which client has F.
S sends "send F to A on port X" to B. You can check which remote port is used, and then you know which port to send the file on.
B recieves and executes the command. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:04:38.200

您必须为每个客户端连接 2 个套接字，因此您将拥有 4 个这样的套接字：

```
1 A <-> C
2 B <-> C 
3 A <-> C <-> B 4 
```

因此，您将不得不使用套接字 1 和 2 在客户端 A 和服务器 C（套接字 1）之间以及客户端 B 和服务器 C（套接字 2）之间传输文件。

然后，您必须使用套接字 3 和 4 在服务器 C 中开发一个桥接器，以将数据从 A 传输到 B。

我猜多线程解决方案应该可以工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T18:34:32.827

到目前为止我所得到的：服务器仅使用 select() 运行。客户端有一个处于listen() 模式的套接字——称之为dataSocket（在它的常规套接字之上）。如果客户端 A 想要一个文件，它会告诉服务器文件名。服务器通过文件找到用户，并对 dataSocket 进行 connet()。（我设法实现了）。

小文件传输没有问题。大文件失败。

我认为这是因为我的客户出了问题。我已经使用 select() 函数实现了客户端，如果它发现有人在执行 connect()，它会打开一个新线程并为请求提供服务。但是有什么问题。。代码是这样的：

```
FD_SET(globalSocket,&origin);
FD_SET(dataSocket,&origin);
FD_SET(STDIN,&origin); //#define STDIN 0
while(1)
{
 readfds=origin;
 select(fdmax+1,&readfds,NULL,NULL,NULL);
 for(i=0;...)
  {
   if(FD_ISSET(i,&readfds)
   {
    if(i==STDIN)
     // get user input
    if(i==dataSocket)
     {
      printf("someone wants a file from me");
      pthread_create(...);
     }
   }
  }
} 
```

我看到的一个问题是，当我第一次请求文件时，它会打印 2 或 3 次“有人想要我的文件”这一行，但只创建了一个线程。当我尝试发送一个大文件时，我确实得到了一些文件，但随后弹出“对等连接重置”......

我希望这里有人能够回答我解释得不太好的问题。谢谢你。

# python-2.7 - NZEC in python on spoj for AP2

> ID：13986770
> 
> 赞同：0
> 
> 时间：2012-12-21T08:39:46.857
> 
> 标签：python-2.7, return, return-value

我写了以下两个代码

## FCTRL2.py

```
import sys;
def fact(x):
    res = 1
    for i in range (1,x+1):
        res=res*i
    return res;

t = int(raw_input());
for i in range (0,t):
    print fact(int(raw_input())); 
```

和

## AP2.py

```
import sys;

t = int(raw_input());
for i in range (0,t):
    x,y,z = map(int,sys.stdin.readline().split())
    n = (2*z)/(x+y)
    d = (y-x)/(n-5)
    a = x-(2*d)
    print n
    for j in range(0,n):
        sys.stdout.write(a+j*d)
        sys.stdout.write(' ')
    print' ' 
```

FCTRL2.py 在 spoj 上被接受，而 AP2.py 给出 NZEC 错误。两者都可以在我的机器上正常工作，我发现两者的返回值没有太大区别。请解释两者有什么区别以及如何避免 AP2.py 的 NZEC 错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T17:09:02.727

输入中可能有额外的空格。一个好的问题设置器会确保输入满足指定的格式。但由于 spoj 几乎允许任何人添加问题，因此有时会出现这样的问题。缓解空白问题的一种方法是立即读取输入，然后对其进行标记。

```
import sys;   # Why use ';'? It's so non-pythonic.

inp = sys.stdin.read().split()    # Take whitespaces as delimiter
t = int(inp[0])
readAt = 1
for i in range (0,t):
    x,y,z = map(int,inp[readAt:readAt+3])    # Read the next three elements
    n = (2*z)/(x+y)
    d = (y-x)/(n-5)
    a = x-(2*d)
    print n
    #for j in range(0,n):
    #    sys.stdout.write(a+j*d)
    #    sys.stdout.write(' ')
    #print ' '
    print ' '.join([str(a+ti*d) for ti in xrange(n)]) # More compact and faster
    readAt += 3   # Increment the index from which to start the next read 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:55:48.717

第 10 行的 n 可以是浮点数，范围函数需要一个整数。因此程序以异常退出。

我在 Windows 上测试了这个值：

```
>ap2.py
23
4 7 9
1.6363636363636365
Traceback (most recent call last):
  File "C:\martin\ap2.py", line 10, in <module>
    for j in range(0,n):
TypeError: 'float' object cannot be interpreted as an integer 
```

# vb.net - 将重复代码移出事件处理程序时的设计模式

> ID：13986771
> 
> 赞同：1
> 
> 时间：2012-12-21T08:39:49.353
> 
> 标签：vb.net, design-patterns

我有这个代码：

```
Private Sub carButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles carButton.Click
    fTrafficSurveyA.incrementCount("Car")
    Call updateView()
End Sub
Private Sub bicycleButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles bicycleButton.Click
    fTrafficSurveyA.incrementCount("Bicycle")
    Call updateView()
End Sub
Private Sub lorryButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles lorryButton.Click
    fTrafficSurveyA.incrementCount("Lorry")
    Call updateView()
End Sub 
```

我已将其更改为以下内容：

```
Private Sub carButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles carButton.Click
    ButtonClickCode(CType(sender, Button))
End Sub
Private Sub bicycleButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles bicycleButton.Click
    ButtonClickCode(CType(sender, Button))
End Sub
Private Sub lorryButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles lorryButton.Click
    ButtonClickCode(CType(sender, Button))
End Sub

Private Sub ButtonClickCode(ByVal mySender As Button)

    Dim incrementVehicle As String
    Select Case mySender.Name
        Case "carButton"
            incrementVehicle = "Car"
        Case "bicycleButton"
            incrementVehicle = "Bicycle"
        Case "lorryButton"
            incrementVehicle = "Lorry"
        Case Else
            incrementVehicle = ""
    End Select

    fTrafficSurveyA.incrementCount(incrementVehicle)
    Call updateView()

End Sub 
```

新代码有更多的代码行。
新版本是更好的做法，还是我应该遵循第三种模式？

* * *

**编辑**

使用 Guffa 的回答 + 其他评论，我更改了基础`TrafficSurveyA`模型以包含枚举类型并更改了它的功能`incrementCount`，如下所示......这个枚举类型是否在正确的位置？

```
Enum vehicleType
    Car
    Lorry
    Bicycle
End Enum

Public Sub incrementCount(ByVal vehicle As vehicleType)
    ' Preconditions: none
    ' Postconditions: If vehicle is "Car", "Bicycle" or "Lorry" then 1 is added
    ' to the corresponding count. Otherwise nothing is done.

    Select Case vehicle
        Case vehicleType.Car : fCars = fCars + 1
        Case vehicleType.Bicycle : fBicycles = fBicycles + 1
        Case vehicleType.Lorry : fLorries = fLorries + 1
        Case Else 'do nothing
    End Select
End Sub 
```

接口代码最终是这样的：

```
Private Sub carButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles carButton.Click
    ButtonClickCode(TrafficSurveyA.vehicleType.Car)
End Sub
Private Sub bicycleButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles bicycleButton.Click
    ButtonClickCode(TrafficSurveyA.vehicleType.Bicycle)
End Sub
Private Sub lorryButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles lorryButton.Click
    ButtonClickCode(TrafficSurveyA.vehicleType.Lorry)
End Sub
Private Sub ButtonClickCode(ByVal incrementVehicle As TrafficSurveyA.vehicleType)

    fTrafficSurveyA.incrementCount(incrementVehicle)
    Call updateView()

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:53:46.813

由于事件处理程序中的代码是相同的，因此您可以只为所有事件使用一个事件处理程序：

```
Private Sub vehicleButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles carButton.Click, bicycleButton.Click, lorryButton.Click
  Dim mySender As Button = CType(sender, Button)

  Dim incrementVehicle As String
  Select Case mySender.Name
    Case "carButton"
      incrementVehicle = "Car"
    Case "bicycleButton"
      incrementVehicle = "Bicycle"
    Case "lorryButton"
      incrementVehicle = "Lorry"
    Case Else
      incrementVehicle = ""
  End Select

  fTrafficSurveyA.incrementCount(incrementVehicle)
  Call updateView()

End Sub 
```

另一种选择是保留单独的事件处理程序，并利用每个事件处理程序可以将正确的文本发送到公共方法的事实，因此您无需检查控件名称来确定文本：

```
Private Sub carButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles carButton.Click
  ButtonClickCode("Car")
End Sub

Private Sub bicycleButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles bicycleButton.Click
  ButtonClickCode("Bicycle")
End Sub

Private Sub lorryButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles lorryButton.Click
  ButtonClickCode("Lorry")
End Sub

Private Sub ButtonClickCode(ByVal incrementVehicle As String)
  fTrafficSurveyA.incrementCount(incrementVehicle)
  Call updateView()
End Sub 
```

# directx - 如何使用 directX 10 绘制字符串？

> ID：13986772
> 
> 赞同：0
> 
> 时间：2012-12-21T08:39:53.203
> 
> 标签：directx

我是directX的新手，对此我有疑问。我想在屏幕上画一个字符串，但它不起作用。我确实在互联网上进行了搜索，并为此获得了一些教程。这是代码：

```
//Create font
void RealGame::CreateMyFont(LPDIRECT3DDEVICE9 d3ddv)
{
D3DXCreateFont(d3ddv,    // the D3D Device
               20,    // font height
               0,    // default font width
               FW_NORMAL,    // font weight
               1,    // not using MipLevels
               false,    // italic font
               DEFAULT_CHARSET,    // default character set
               OUT_DEFAULT_PRECIS,    // default OutputPrecision,
               DEFAULT_QUALITY,    // default Quality
               DEFAULT_PITCH | FF_DONTCARE,    // default pitch and family
               L"Arial",    // use Facename Arial
               &font);

}
//Draw text on screen
void RealGame::DrawGameInfo(LPD3DXSPRITE sp,LPDIRECT3DDEVICE9 d3ddv,LPCWSTR text)
{
RECT textbox;
SetRect(&textbox, 100, 100, 800, 20);
D3DCOLOR fontColor = D3DCOLOR_ARGB(255,0,0,255);  
if(font!=NULL)
    font->DrawText(sp, text, -1, &textbox, 0, fontColor );

} 
```

结果是：屏幕上没有显示文本。如果我有，请告诉我原因并纠正我的错误。谢谢你。

更新：将标志更改为 DT_NOCLIP | DT_TOP | DT_LEFT => font->DrawText(sp, text, -1, &textbox, DT_NOCLIP | DT_TOP | DT_LEFT,, fontColor ); 有用。感谢 Gnietschow 的帮助。

# extjs4.1 - 使 Ext.Action 的文本属性依赖于另一个字段的值

> ID：13986777
> 
> 赞同：0
> 
> 时间：2012-12-21T08:40:10.960
> 
> 标签：extjs4.1

我在窗口中有一个网格。网格有 3 个操作：编辑、删除和禁用。我想知道是否可以使禁用操作（当前为“禁用/启用”）的文本依赖于所选记录的当前状态。假设用户选择当前状态为启用的记录，则操作的文本应为“禁用”。但是，如果用户选择状态为已禁用的记录，则操作的文本应为“启用”。使用Action时可以这样做吗？还是我需要使用按钮而不是操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:29:59.537

我假设您的操作按钮位于停靠在网格面板顶部的工具栏中。唯一棘手的事情是获取对网格的引用（不对其进行硬编码）。网格的“选择”事件只为您提供对所使用的行模型的引用。

```
/* Set a action attribute on the Ext.Action so we can find it */
var action = new Ext.Action({
    text: 'Do something',
    handler: function(){
        Ext.Msg.alert('Click', 'You did something.');
    },
    iconCls: 'do-something',
    itemId: 'myAction',
    action: 'myAction' // I don't like itemId's personally :)
});

/* In the Controller */
init: function() {
    this.control({
        'mygrid': {
            select: this.onRecordSelect
        }
    });
},

onRecordSelect: function(rowModel, record) {
    var grid = rowModel.views[0].ownerCt);
    var action = grid.getDockedItems('toolbar[dock="top"]')[0].down('button[action="myAction"]');
    var enabled = (record.get('CurrentStatus') == "Enabled");
    action.setText(enabled ? 'Disable' : 'Enable');
    action.setIconCls(enabled ? 'myDisableCls' : 'myEnableCls');
}

/* in SASS */
.myDisableCls{
    background-image:url(#{$icon_path}/checkbox.png) !important;
}
.myEnableCls {
    background-image:url(#{$icon_path}/checkbox_ticked.png) !important;
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:06:40.390

我用另一种方式解决了这个问题。这是我的代码：

```
grid.getSelectionModel().on({
        selectionchange: function(sm, selections) {
            if (selections.length > 0) {
                Edit.enable();
                Delete.enable();
                    if(selections[0].data.CurrentStatus == "Disabled"){
                    Disable.setText("Enable");
                    Disable.enable();
                }else{
                    Disable.setText("Disable");
                    Disable.enable();
                }
            } else {
                Edit.disable();
                Delete.disable();
                Disable.disable();
            }
        }
    }); 
```

# wordpress - 显示来自相似类别的自定义字段（从相似帖子中获取自定义字段）

> ID：13986779
> 
> 赞同：0
> 
> 时间：2012-12-21T08:40:16.687
> 
> 标签：wordpress

我有一个single.php，我在其中显示一个产品。我有此产品的类别和子类别，我想在底部显示来自类似类别的自定义字段图像。

例如，我在**Red Bag 1**中，我想在底部放置一个类似页面的**缩略图，例如****Red Bag 2**和**Red Bag 3**属于同一类别“Red Bag”

我实际上已经有一个代码，但我不知道如何定位由 Advance Custom Field 插件创建的自定义字段：`the_field("product_image")`

这是我的代码：

```
 <?php
            global $post;
            $cat_ID=array();
            $categories = get_the_category(); //get all categories for this post
              foreach($categories as $category) {
                array_push($cat_ID,$category->cat_ID);
              }
              $args = array(
              'orderby' => 'date',
              'order' => 'DESC',
              'post_type' => 'post',
              'numberposts' => 8,
              'post__not_in' => array($post->ID),
              'category__in' => $cat_ID
              ); // post__not_in will exclude the post we are displaying
                $cat_posts = get_posts($args);
                $out='';

                  foreach($cat_posts as $cat_post) {
                      $out .= '<li>';
                      $out .=  '<a href="'.get_permalink($cat_post->ID).'" title="'.wptexturize($cat_post->post_title).'">'.wptexturize($cat_post->post_title).'</a></li>';
                  }
                $out = '<ul class="cat_post">' . $out . '</ul>';
                echo $out;
            ?> 
```

`.wptexturize($cat_post->post_title).`假设是图像而不是标题。图片来源应取自自定义字段`the_field("product_image")`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:57:09.797

如果你会使用[`post_thumbnail_html`](http://codex.wordpress.org/Function_Reference/the_post_thumbnail)它会很简单。相反，您使用 aa 函数，该函数不是 wordpress: 的默认值`the_field`。
我不知道哪个插件可以做到这一点。

可能该函数 ( `the_field`) 将在正常范围内工作[`loop`](http://codex.wordpress.org/the_loop)。
为此，您应该更改`get_posts($args)`为`WP_Query($args)`并用`foreach($cat_posts..`循环替换。

我建议使用默认的 wordpress 缩略图/特色图片`post_thumbnail_html`

# html - 使用 Ajax 困境更新视图中的 HTML 标记

> ID：13986780
> 
> 赞同：0
> 
> 时间：2012-12-21T08:40:22.540
> 
> 标签：html, ajax, json, asp.net-mvc-3

我是新手，不知道它必须如何工作。

我的视图中有一个部分视图，`foreach`其中列出了该新闻文章的所有新闻评论。

我有一个带有`post`按钮的文本区域，用户可以在其中提交对这篇新闻文章的进一步评论。

新的新闻文章必须附加到列表中，而无需执行`location.reload`. 有人告诉我不要`AJAX`使用`JSON`。

这是我的控制器：

```
[HttpGet]
[NoCache]
public ActionResult SetCommentOnNews(int newsId, string newsComment) ??
{
  var currentUser = ZincService.GetUserForId(CurrentUser.UserId);
  ZincService.NewsService.SetCommentOnNews(newsId, newsComment, currentUser.UserId);
  return Json(new { success = true }, JsonRequestBehavior.AllowGet); ??
}

 <div class="news-comment-content" id="news-comment-content">
      <%  if (Model.Results != null) { 
         foreach (var newsItem in Model.Results.NewsComments) %>
      <% {  %>   
         <% Html.RenderPartial("~/Views/Home/SetCommentOnNews.ascx", newsItem); %>
      <% }  %>
 </div> 
```

我的部分：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<Zinc.Web.Areas.News.ViewModels.Home.NewsCommentsViewModel>" %> //this also not right

<div class="news-post-list-item">
  <div class="news-post-user-info-wrapper">
    <div class="avatar">
       <img width="52" height="52" alt="Avatar" src="/ThemeFiles/Base/images/User/user-avatar.png"/> 
    </div>
    <div class="who-and-when-box">
      <%: newsItem.CommentDate %>
      <br />
      <br />
      <%: ViewBag.UserName %>
    </div>        
    <div class="news-comment"><%: newsItem.NewsComment %></div>
    <div class="clear"></div> 
  </div>     
  <div class="clear"></div> 
</div> 

<div class="header">
  <h3>
      Leave a comment 
  </h3>
</div>
<div>  
  <textarea id="textareaforreply" rows="3" cols="160"></textarea>
</div>
<div>
  <a href="javascript:PostNewsComment(<%: Model.News.NewsId %>);" class="button" id="post_button">Post</a>     
</div>

 <script type="text/javascript">
 function PostNewsComment(newsId) {
   $("post-button").click(function () {
       var jqxhr = $.getJSON("<%= //Url.Action("SetCommentOnNews", "Home", new { area = "News" }) %>?newsId=" + newsId + "&newsComment=" + $("#textareaforreply").text(), function (data) {
     if (data.success) {
       alert($("#textareaforreply").text());
       $('#news-comment').append($("#textareaforreply").text());
     }
   });
 }
</script> 
```

上面的 JS 是我拥有的并且必须`HTML`使用`AJAX`? 我不知道该怎么做。有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:15:43.180

要使用 AJAX 将 HTML 注入列表，我将使用[带有模板](http://knockoutjs.com/documentation/template-binding.html)而不是局部视图的 Knockoutjs。Knockout 可用于在浏览器中呈现信息。视图用于渲染服务器端，这与 AJAX 不兼容。

当您说“有人告诉我使用 AJAX，而不是 JSON”时，您是什么意思。AJAX 使用 JSON 作为序列化通过网络发送的数据的方法。您是指 JQuery 方法**ajax**与**getJSON**吗？ **getJSON**只是**ajax**方法的一个包装器，它专门配置它以使用 HTTP GET 动词检索 JSON。两者都可以正常工作，但 ajax 确实让您可以更好地控制配置请求。

# sharepoint - 如何使用 JS REST API 在 SP2013 上基于 basetemplate 106 获取列表？

> ID：13986785
> 
> 赞同：1
> 
> 时间：2012-12-21T08:40:34.487
> 
> 标签：sharepoint, rest, sharepoint-2013

我只想获取带有 basetemplate 106 的列表。

我现在拥有的代码是：

```
 url:
            appweburl +
            "/_api/SP.AppContextSite(@target)/web/lists/?@target='" + hostweburl + "'",
        method: "GET",
        headers: { "Accept": "application/json; odata=verbose" },
        success: onGetHostWebListsSuccess,
        error: onGetHostWebListsFail 
```

此代码将从站点获取所有列表，这是很多信息。但想缩小范围。用于降低数据流量。

在这方面的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:35:44.547

您可以使用 $filter 查询选项来选择要返回的项目。

所以在你的情况下，过滤器看起来像这样：

```
$filter=BaseTemplate eq 106 
```

你的网址是这样的：

```
appweburl + "/_api/SP.AppContextSite(@target)/web/lists?$filter=BaseTemplate eq 106&@target='" + hostweburl + "'" 
```

# html - 我的内容在 IE 7 中左对齐？

> ID：13986792
> 
> 赞同：0
> 
> 时间：2012-12-21T08:41:49.217
> 
> 标签：html, css

我有一个外部 div，它在 chrome、firefox 中正常工作，但在 IE 中没有。我在外部 div 中有一些内容。为了使其居中对齐或页面中间，我给出了这个宽度：970px; 高度：630px；到外部 div... 这样我就可以在 chrome 和 Mozilla 的中心获得内容...但是在 IE 7 的情况下 .. 在 IE 中它的左对齐..

这是我的CSS....

```
<style type="text/css">
body, html 
{ 
    font-family:helvetica,arial,sans-serif; 
    font-size:90%; 
}
div.outer 
{  
    display: block; 
    margin-left: auto;
    margin-right: auto;
    width:970px;
    height:630px;
    position:relative;
}
</style> 
```

这是我的完整代码：

```
<head><title>home</title>
</head><body class='claro'><div class='outer' style="border:1px solid black;">
<div id="dottedBorderhome">
</div>
<div id="dragIconhome">
</div>
<div class="claro" id="menuDiv2" onclick="setWidgetproperty(this.id,'x','navMenu2');" onmousedown="setMenuBarProperty('navMenu2');" onmouseup="setDocStyle(this.id)" style="border: 1px dotted white; left: auto; position: absolute; top: 17px;">
     <!-- here one menu bar will come -->
</div>
<div class="claro" id="divlabel43" onclick="setWidgetproperty(this.id,null,'divlabel43')" onmouseup="setDocStyle(this.id)" style="left: 50px; position: absolute; top: 92px; text-align: right; font-family: Times; font-size: 15pt; font-weight: bold;" >
     <label id="label43" onclick="setLblProperty(this.id)" onmouseover="editName('divlabel43',this.id,'label')">
          Worklist Manager
     </label>
</div>
<div class="claro" id="htmlTableDiv9" onmouseup="setDocStyle(this.id)" style="left: auto; position: absolute; top: 130px; height:70px; width:150px;">
     <!-- here its contains table -->
</div>
<div class="claro" id="divImage2" onclick="setWidgetproperty(this.id,'xy','image2')" onmouseup="setDocStyle(this.id)" style="left: auto; position: absolute; top: 70px;">
     <img class="images" id="image2" name="Search-icon2.png" onclick="setImgProperty(this.id)" src="images/uploads/Search-icon2.png" style="height: 50px; width: 58px;">
</div>

<div class="claro" id="menuDiv1" onclick="setWidgetproperty(this.id,'x','navMenu1');" onmousedown="setMenuBarProperty('navMenu1');" onmouseup="setDocStyle(this.id)" style="border:1px dotted white; left: auto; position: absolute; top: 640px;">
     <!-- here another menu bar -->
</div>

<div id="CWPWORKLIST__1" onclick="setWidgetproperty(this.id,'xy','inner__CWPWORKLIST__1')" ondblclick="editDataGridResponseMapping(this.id)" onmouseup="setDocStyle(this.id)" style="left:auto; position:absolute; top:340px; height: 296px; width: 921px;">
     <!-- here another table-->
</div>
</div></body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:51:02.597

正如 Sven 建议的那样，[https://stackoverflow.com/questions/4742877/center-align-div-in-internet-explorer](https://stackoverflow.com/questions/4742877/center-align-div-in-internet-explorer)可能会保留您的答案。要么你有无效的 HTML 将 IE7 置于怪癖模式，要么你缺少文档类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:44:14.000

试试这个

```
<style type="text/css">
body, html 
{ 
    font-family:helvetica,arial,sans-serif; 
    font-size:90%; 
}
div.outer 
{  
    display: block; 
    margin:0 auto;
    width:970px;
    height:630px;
    position:relative;
}
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T09:53:23.357

使用具有正确文档类型的代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

# c++ - 在 C++ 中清除键盘缓冲区

> ID：13986794
> 
> 赞同：2
> 
> 时间：2012-12-21T08:41:54.257
> 
> 标签：c++

我使用了我的应用程序的一部分`Sleep(5000)`（我需要等待 5 秒）

问题是，如果用户在这 5 秒内按下任何键盘键，这些键将在睡眠后被读取，这会导致我的应用出现问题。

睡眠后如何清空缓冲区？

我试过了`cin.clear()`，`setbuf(stdin, NULL)`但如果缓冲区中有多个字符，他们就无法清除缓冲区。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T09:50:15.343

您正在使用的两个功能没有您期望的效果：

1.  `clear()`根本不影响缓冲区，而是清除错误标志。也就是说，如果读取失败，则会设置一个标志 ( `std::ios_base::failbit`)。虽然设置了任何错误标志（还有更多），但流不会尝试读取任何内容。
2.  `setbuf(0, 0)`影响流的内部缓冲区不存在（具有非空值的调用具有实现定义的含义，通常是“什么都不做”）。这通常是一个坏主意，因为它会导致流非常慢。此外，用户按下的键可能不会存储在此缓冲区中，而是存储在操作系统输入缓冲区中，直到它们被发送到应用程序（有特定于平台的方法来关闭操作系统输入缓冲区，例如，在 POSIX 上你'd 用于`tcsetattr()`将输入设置为非规范模式）。

在任何一种情况下，没有缓冲区并不能真正帮助您：用户很可能输入了有效的输入。正确的方法是尝试读取可用的输入，如果失败，则删除有问题的字符（或字符）。为此，您将尝试读取输入，如果失败，您将读取`clear()`流和`ignore()`一个或多个字符（此示例忽略一整行；`ignore()`不带参数调用仅忽略一个字符）：

```
T value;
while (!(std::cin >> value)) {
    std::cin.clear();
    std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
} 
```

无论如何，您总是需要验证输入是否成功，而额外的几行只是添加了一些恢复代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-03T09:30:35.730

清除键盘输入缓冲区的最简单方法是

```
while(kbhit()) getch(); 
```

只需将该代码放在程序中要清除缓冲区的任何位置。

所需的头文件是**conio.h**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-15T17:42:32.993

这似乎适用于使用 Code::Blocks 编译的 Windows 10：

```
#include <conio.h>
/**
 * clears keyboard buffer
 *
 * @author Shaun B
 * @version 0.0.2
 * @fixed 15-01-2016
 */
void clearKeyboardBuffer()
{
    while (_kbhit())
    {
        _getche();
    }
} 
```

然后从 C++ 脚本中需要的位置调用。

# ruby-on-rails - delay_job - 处理作业返回值

> ID：13986796
> 
> 赞同：0
> 
> 时间：2012-12-21T08:42:13.147
> 
> 标签：ruby-on-rails, delayed-job, exit-code

我正在使用delayed_job 执行系统调用。此系统调用调用 Groovy 脚本。

```
class Job
    def perform
        command "groovy file.groovy"
        system command
    end

    def success(job)
        # handle success
    end

    def error(job, exception)
        # handle error, exception
    end
end 
```

这一切都很完美，但我总是回到“成功”状态，因为我的 groovy 总是正确退出。我目前正在投入`RuntimeExeptions`Groovy 脚本来引发失败的工作。当我调用`system "groovy progra.groovy"`它并引发异常（groovy 程序引发异常）时，`system`调用的返回值正如预期的那样`false`。但是当通过delayed_job 做同样的事情时，它从不访问`def error`方法，而是访问`def success`方法。

您对 delay_job 如何实际控制`perform`方法的返回有什么建议吗？什么时候进入`error`or`failure`钩子。不幸的是，我在文档中没有找到关于这个主题的任何内容。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:58:19.477

你有没有尝试过这样的事情：

```
def perform
    command = "groovy file.groovy"
    system command || raise "Error executing command : #{command}"
end 
```

我很确定delayed_job 将执行调用包装在一个救援块中，并根据它捕获的任何异常调用成功或错误。

# .net - 如何在不同的类中传递参数

> ID：13986797
> 
> 赞同：0
> 
> 时间：2012-12-21T08:42:13.497
> 
> 标签：.net, design-patterns, software-design

我创建了由进程和任务（不是 .NET API 类）组成的小型框架组件。

进程可以包含多个任务。

现在在一个流程中，有一个参数列表应该可用于每个任务。

要求是
1\. 任务应该来自 DI
2\. 参数列表由 Process 拥有，并且应该可用于所有任务。任务会读取参数，也可以添加一些参数

Current Implementation -> Initialize 方法在 BaseTask（所有任务从其派生）和 BaseProcess（所有进程从其派生）中指定。这接受参数列表作为参数。

有没有针对此类问题的设计模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:50:57.590

您还可以为您的任务使用工厂，而不是将任务直接嵌入到流程中。最简单的形式是委托：

```
public class Process {

  private readonly List<Func<Process, BaseTask>> TaskFactories
    = new List<Func<Process, BaseTask>>();

  public RegisterTask(Func<Process, BaseTask> taskFactory)
  {
    TaskFactories.Add(taskFactory);
  }

  public IEnumerable<Task> CreateTasks() {
    return TaskFactories.Select(f => f(this)).ToArray();
    //ToArray used to ensure all tasks created here and now.
  }

} 
```

这样您就可以编写这样的任务：

```
public class MyTask : BaseTask { 
  public MyTask(Process p) {
    /* grab parameters from process here */
  }
} 
```

然后你可以注册这个任务，给定`Process p`这样的：

```
public void RegisterSomeTask(Process p) {
  p.RegisterTask((process) => new MyTask(p));
} 
```

这也消除了对`Initialize`方法的需求，在我看来，这绝不是一个理想的模式，因为除非您的状态管理绝对成功，否则可能会有一个未初始化的任务会引发错误。

# mysql - 多天时间段可用性mysql

> ID：13986801
> 
> 赞同：0
> 
> 时间：2012-12-21T08:42:25.473
> 
> 标签：mysql, calendar

我有一个关于 MySQL 中空闲时隙检索的问题。我有 2 个表。

```
 Table 1:
 TimeSlots (Defines the available timeslots in 15 minutes)

 Columns : StartTime (**Time**), EndTime(**Time**)
 Data:

 00:00:00 , 00:15:00
 00:15:00 , 00:30:00
 And so on until 23:45:00 , 00:00:00 
```

表 2 Scheduler（持有计划任务）

```
 Columns : idScheduler (**pk**) , Room (**int, fk**), StartDateTime (**DateTime**), EndDateTime (**DateTime**) 
```

我用来检索一天的开放时间段的查询是：

```
 SELECT StartTime, EndTime FROM TimeSlots WHERE 
     NOT Exists (                
            SELECT Room, StartDateTime, EndDateTime FROM Scheduler
        WHERE Room = 'Room1'
        AND DATE(StartDateTime) =  '2012-12-20'
        AND 
            (StartDateTime >= concat('2012-12-20', ' ' ,StartTime) AND
            StartDateTime <= concat('2012-12-20', ' ' ,EndTime))
            OR
            (EndDateTime >= concat('2012-12-20', ' ' ,StartTime) AND
            EndDateTime <= concat('2012-12-20', ' ' ,EndTime))
            OR
            (EndDateTime <= concat('2012-12-20', ' ' ,StartTime) AND
            StartDateTime >= concat('2012-12-20', ' ' ,EndTime))
        ) 
```

Room 和 StartDateTime 将成为最终解决方案中的参数。

我遇到的问题是，例如，如果预订了跨越多个时间段的房间（例如：1、1、2012-12-20 13:10:00、2012-12-20 13:55:00）

如果我运行上面提到的查询，它将给出以下输出：

```
13:00:00 - 13:15:00
13:15:00 - 13:30:00
13:30:00 - 13:45:00
13:45:00 - 14:00:00 
```

我在这里想念什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:54:09.627

我会尝试这样的事情：

```
SELECT StartTime, EndTime FROM TimeSlots WHERE 
 NOT Exists (                
        SELECT Room, StartDateTime, EndDateTime FROM Scheduler
    WHERE Room = 'Room1'
    AND DATE(StartDateTime) =  '2012-12-20'
    AND 
        (StartDateTime <= concat('2012-12-20', ' ' ,EndTime) AND
        EndDateTime >= concat('2012-12-20', ' ' ,StartTime))
    ) 
```

通过这种方式，您要求的时间段不与任何房间预订相交。

# ios5 - 无法将第二个选项卡栏添加到选项卡控制器

> ID：13986807
> 
> 赞同：0
> 
> 时间：2012-12-21T08:42:43.247
> 
> 标签：ios5, uitabbarcontroller, uitabbar

我有两个标签栏，以便产生类似于在UITabBarController 中[滑动 UITabBarItems 的问题中所示的效果](https://stackoverflow.com/questions/6700184/sliding-uitabbaritems-in-uitabbarcontroller)

我试图在最后一个索引处使用标签栏项目而不是箭头**来显示另一个标签栏**，并**隐藏当前的标签栏**。我正在以编程方式添加第二个标签栏`viewDidLoad`。问题是当最后一个标签栏项目被点击时，我的第二个标签栏没有出现。我所做的是：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    self.tabControler.view.frame = self.view.frame;
    self.tabControler.delegate = self;
    self.secondTabBarSelected = NO;

    self.secondTabBar = [[UITabBar alloc] initWithFrame:CGRectMake(0, 431, 320, 49)];
    self.secondTabBar.hidden = YES;
    self.secondTabBar.delegate = self;
    self.secondTabBar.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleTopMargin;
    [self.tabControler.view addSubview:secondTabBar];

    [self.view addSubview:tabControler.view];
    NSLog(@"children of tabcon: %@",[tabControler.view subviews]); //Here second tab bar added with correct frame
}

-(void) tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
    if (!self.secondTabBarSelected) {
        NSLog(@"first tab bar");
        if([[tabBarController viewControllers] indexOfObject:viewController] == 3)
        {
            self.firstTabBar.hidden = YES;
            self.secondTabBar.hidden = NO;

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:14:17.247

我发现我的标签栏不可见，因为我在它存在于 nib 文件中时明确分配它。相反，我只是设置了框架。我更正的代码是：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    self.tabControler.view.frame = self.view.frame;
    self.tabControler.delegate = self;
    self.secondTabBarSelected = NO;

    self.secondTabBar.frame = self.firstTabBar.frame;
    self.secondTabBar.hidden = YES;
    self.secondTabBar.delegate = self;
    NSLog(@"viewdidload frame: %@",secondTabBar.frame);

    self.secondTabBar.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleTopMargin;
    [self.tabControler.view addSubview:self.secondTabBar];
    NSLog(@"viewdidload frame: %@",secondTabBar.frame);

    [self.view addSubview:tabControler.view];
}

-(void) tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{

        NSLog(@"first tab bar - controller");
        if([[tabBarController viewControllers] indexOfObject:viewController] == 3)
        {
            self.firstTabBar.hidden = YES;
            self.secondTabBar.hidden = NO;
            self.secondTabBarSelected  = YES;
        }

} 
```

# windows-phone-7 - Passing data from app to background agent

> ID：13986808
> 
> 赞同：0
> 
> 时间：2012-12-21T08:42:59.177
> 
> 标签：windows-phone-7, background-service

I want to pass some data(e.g. string values) of foreground app to background agent in window phone application. How can i do it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:06:47.657

查看此链接中的“前台应用程序和后台代理之间的通信”（页面中间）：

msdn.microsoft.com/en-us/library/hh202944(v=vs.92).aspx

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:15:15.633

您可以使用 IsolatedStorage 和 ApplicationSettings

# qt - QMAKE 多线程标志

> ID：13986818
> 
> 赞同：1
> 
> 时间：2012-12-21T08:43:47.750
> 
> 标签：qt, qmake

**应该设置哪些标志来构建多线程应用程序？**

我看到有`QMAKE_CFLAGS_THREAD`和`QMAKE_LFLAGS_THREAD`。我找到[了这个](http://ldc.usb.ve/docs/qt/qmake-variable-reference.html#qmake-cflags-thread)文档，描述了这个标志，但缺乏如何设置它们的信息。

我还发现我应该添加：

```
CONFIG += thread 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:58:22.330

你只需要：

```
CONFIG += thread 
```

这将设置适当的编译器和链接器标志。这些`_THREAD`变量允许您修改这些默认标志，以防它们不适合您。

但是，您实际上甚至不需要添加`thread`到`CONFIG`. 现在的默认设置是无论如何都使用线程支持进行构建。

# sql - Add COLUMN that contains data count based on 'where'

> ID：13986820
> 
> 赞同：1
> 
> 时间：2012-12-21T08:43:58.673
> 
> 标签：sql, sql-server-2008

I would like to know the query where I can get the normal set of columns and add a column that contains the number of records in database..

For example, let's say I have these data..

```
ColA   ColB   ColC
----   ----   ----
1AB1   CARR   APPL
2BC1   APPL   APPL
1AB1   MAXR   APPL 
```

from those lines, I would like to generate these columns

```
ColA   ColB   ColC   Count
----   ----   ----   -----
1AB1   CARR   APPL     2 
```

A. This is my current select statement so far..

```
SELECT top 1 myTBL.* from mydb WHERE ColA = '1AB1' 
```

B. But i couldn't seem to add the following code to get my fourth column..

```
SELECT count(myTBL.*) as Count from mydb WHERE ColA = '1AB1' 
```

P.S. I would like to get a select statement that combines A and B select statements that I have. The error I'm getting says something about GROUP BY clause.. I'm having a hard time to understand this.. I hope you could formulate the correct select statement I can use for the given example.. Thanks for all the help..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:57:48.017

有几种方法可以做到这一点，但是，如果没有明显的主键，分析函数（也称为窗口函数）看起来是一个不错的选择。

```
select cola, colb, colc, cnt as "Count" from (
select
cola,
colb,
colc,
row_number () over (partition by cola order by colb) rn,
count (*) over (partition by cola) cnt

from
table1

where cola = '1AB1'
) as d
where rn = 1 
```

这给出了：

```
+------------+------------+------------+-------+
|    cola    |    colb    |    colc    | Count |
+------------+------------+------------+-------+
| 1AB1       | CARR       | APPL       |     2 |
+------------+------------+------------+-------+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T16:06:59.593

```
SELECT TOP 1 ColA, ColB, ColC, COUNT(*) OVER (PARTITION BY ColA) AS Count
FROM mydb
WHERE ColA = '1AB1' 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/d17a3/1/0)上的演示[](http://sqlfiddle.com/#!3/d17a3/1/0)

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T08:54:52.037

如果你只想要 ColA 的数量，我会做这样的事情

```
SELECT top 1 cola,colb,colc, (SELECT count(*) from mytbl t2 WHERE t2.ColA = t1.colA) 
FROM mytbl t1 
WHERE cola = '1AB1' 
```

当您使用子查询时，您不能使用 mytbl.*

另一种方式是：

```
Select t1.*,t2.count 
FROM mytbl t1 ,
(SELECT cola,count(*) as "count" from mytbl t2 group by cola) t2
where t1.cola = t2.cola 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T10:49:44.960

下面的查询将对 COLA 上表中的值进行分组和计数，并通过计数链接回 ColA 上的原始表。

```
SELECT myTable.ColA , myTable.ColB, myTable.ColC, ColASummary.ColA_Count 
FROM myTable
INNER JOIN 
(
SELECT ColA, COUNT(ColA) AS ColA_Count 
FROM myTable 
GROUP By ColA
)  AS ColASummary
ON myTable.ColA = ColASummary.ColA 
```

如果其他列也需要相同的内容，则可以以这种方式链接其他汇总表。**

# c - Why does "w" in fopen here not create a new file?

> ID：13986824
> 
> 赞同：4
> 
> 时间：2012-12-21T08:44:19.880
> 
> 标签：c, file

The program always ends up exiting. I seem to be running in to this problem frequently and I think I somehow previously fixed it but I'm not sure how. Why does it not create a file?

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>
#include <string.h>

int main (void){
    FILE *fp;
    int c;

    char file_w[100];
    char string[100];
    printf("Enter filename\n");
    fgets(file_w, 100, stdin);
    fp = fopen(file_w, "w");
    if (fp == NULL){
        printf("Can't open file\n");
        exit(0);
    }   
    printf("Enter a string");
    fgets(string, 100, stdin);
    for(c = 0; c <= sizeof(string); c++)
    {
        fprintf(fp, "%s\n", string);
    }

    printf("file written");
    fclose(fp);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:59:49.023

尝试打印您输入的文件的名称：

```
printf("%s\n", file_w); 
```

就在你得到file_w的那一行之后，只是为了确保输入你想要的。在我同样的情况下，终端可能配置错误。

如果您的计算机是 Linux 或 Unix，请尝试输入绝对名称路径：

```
/tmp/newfile.txt 
```

如果您的计算机是 Windows... 那么尝试查看 C:\temp\ 是否存在（或创建它）然后输入：

```
C:\temp\newfile.txt 
```

无论如何，请记住您可以指定绝对路径，而不仅仅是文件名。因此，请仔细检查您是否有权（即权限）写入应写入文件的目录。

如果您想检查错误并更好地描述问题，请尝试使用以下行而不是您的代码，就在 fopen 下

```
 if( fp == NULL ) {
        // Error, as expected.
        perror( "Error opening file" );
        printf( "Error code opening file: %d\n", errno );
        printf( "Error opening file: %s\n", strerror( errno ) );
        exit(-1);
  } 
```

strerror 它是一个很棒的函数，因为它会返回问题的描述而不是错误代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:33:40.380

我敢打赌，问题是“来自 fgets() 的实际名称后的不可见字符”。我会让你弄清楚那个角色到底是什么，它来自哪里以及如何解决它，因为“努力解决问题”是编程学习过程的一部分。如果这很容易，那么每个人都可以做到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T08:48:59.063

如果 的返回值为`fopen`NULL，则表示发生了一些错误。我建议您查看`errno`全局以查看发生了什么错误，以帮助您调试为什么它没有打开文件。

该`w`标志执行以下操作：

> write：为输出操作创建一个空文件。如果已存在同名文件，则丢弃其内容并将该文件视为新的空文件。

所以它应该在不存在时创建一个文件，或者当它确实存在时，覆盖它的内容。

如果它不这样做，那么您还有另一个问题，但是从您提供的少量信息中，很难说出它是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-10T09:22:11.693

我尝试了以下文件名：

C:\\temp\\test_file.txt

或者

fopen("C:\\temp\\employees.txt", "w");

它工作正常，没有错误（我在 Windows 10 中制作。GCC win32，版本：6.3.0）。

我认为您必须使用绝对路径来创建文件。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2021-07-24T09:46:47.630

使用gets()而不是fgets()...它会工作

. . 获取（文件_w）；. .

# ruby-on-rails-3.2 - 如何在 Rails 模型中保持代码 DRY

> ID：13986825
> 
> 赞同：1
> 
> 时间：2012-12-21T08:44:33.033
> 
> 标签：ruby-on-rails-3.2, dry

在 Rails 模型中使用 ENUM 时，这是一段令人惊叹的代码

```
 STATUS = {  approval: 0, 
              rejected: 1, 
              idle: 2, 
            }

  def status
    STATUS.key(read_attribute(:status))
  end

  def status=(s)
    write_attribute(:status, STATUS[s])
  end 
```

当我将它粘贴到任何模型中时效果很好，这正是问题所在。我多次使用它，所以我想保持代码干燥。

我尝试将其复制到`application_helper.rb`但它不起作用。什么是让它工作而不在所有其他模型中重复的最佳方法

代码信用：[http ://www.kensodev.com/tag/enum/](http://www.kensodev.com/tag/enum/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:30:58.440

该代码可以抽象为一个模块。

```
# lib/enumable.rb
module Enumable
  extend ActiveSupport::Concern

  module ClassMethods
    def enum(name, options)
      map = Hash[options.each_with_index.map { |e, i| [e, i] }]

      const_set(name.to_s.pluralize.upcase, map)

      define_method name do
        map.key(read_attribute(name))
      end

      define_method "#{name}=" do |value|
        write_attribute(name, map[value])
      end
    end
  end
end 
```

* * *

默认情况下，Rails 不会自动加载`lib`。将其添加到应用程序配置中。

```
# config/application.rb
config.autoload_paths += %W(#{config.root}/lib) 
```

* * *

将新模块包含到您的模型中。

```
# app/models/project.rb
class Project < ActiveRecord::Base
  include Enumable
  enum :status, [:approval, :rejected, :idle]
end 
```

* * *

```
$ rails c
Loading development environment (Rails 3.2.9)
1.9.3-p327 :001 > project = Project.new
 => #<Project id: nil, status: nil, created_at: nil, updated_at: nil> 
1.9.3-p327 :002 > project.status = :rejected
 => :rejected 
1.9.3-p327 :003 > project.status
 => :rejected 
1.9.3-p327 :004 > Project::STATUSES
 => {:approval=>0, :rejected=>1, :idle=>2} 
```

# python - Boost.Python installation failing with bjam errors

> ID：13986826
> 
> 赞同：0
> 
> 时间：2012-12-21T08:44:34.877
> 
> 标签：python, boost, boost-python, bjam

I have been struggling to get Boost.Python running .

i am following the steps mentioned in [http://www.boost.org/doc/libs/1_41_0/libs/python/doc/building.html](http://www.boost.org/doc/libs/1_41_0/libs/python/doc/building.html) . I followed section 3.1 step 2 . Bjam driver is giving my headaches . So as mentioned in the document i follow the steps outlined in Section 5 of [http://www.boost.org/doc/libs/1_41_0/more/getting_started/windows.html#or-simplified-build-from-source](http://www.boost.org/doc/libs/1_41_0/more/getting_started/windows.html#or-simplified-build-from-source) .

Attempt at Section 5.2 gives me the following errors :

```
C:\Program Files (x86)\boost\boost_1_50>.\bootstrap

Building Boost.Build engine

The system cannot find the path specified.

'.\build.bat' is not recognized as an internal or external command,

operable program or batch file.

Failed to build Boost.Build engine.

Please consult bootstrap.log for furter diagnostics.

You can try to obtain a prebuilt binary from

   http://sf.net/project/showfiles.php?group_id=7586&package_id=7294 
```

1

So since this attempt failed i tried adopting the steps outlined in 5.3 . I downloaded a jam zip file . and then built a jam.exe executable and then added the bjam exe to the PATH environment variable . So now attempting to do this

bjam --build-dir=build-directory toolset=toolset-name --build-type=complete stage

i.e

C:\Program Files (x86)\boost\boost_1_50>bjam --build-dir="C:\build-boost" toolse t=msvc --build-type=complete stage

fails with the following error ....

```
 C:\Program Files (x86)\boost\boost_1_50>bjam --build-dir="C:\build-boost" toolse
    t=msvc --build-type=complete stage

    Unable to load Boost.Build: could not find build system.
    ---------------------------------------------------------
    C:\Program Files (x86)\boost\boost_1_50\boost-build.jam attempted to load the bu
    ild system by invoking

       'boost-build tools/build/v2 ;'

    but we were unable to find "bootstrap.jam" in the specified directory
    or in BOOST_BUILD_PATH (searching C:\Program Files (x86)\boost\boost_1_50\tools/
    build/v2).

Please consult the documentation at 'http://www.boost.org'.

C:\Program Files (x86)\boost\boost_1_50> 
```

Now the directory tools/build/v2 does not exist in my boost home directory .. SO i re-downloaded the boost bundle and repeated all steps. still no success . now i dont know what to do ..

I want to get the examples given under the boost installation at libs/python/example/quickstart/ up and running .

Can someone please help with the installation ??

EDIT ::

As i see it the boost-build.jam file contains the following entry

BOOST_BUILD ?= tools/build/v2 ;

But i dont have this tools directory ?? Has the boost directory structure changed . ? Should i expect a "tools" directory with my Boost installation ? i cant find the file " bootstrap.jam" either ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:37:15.630

好的，所以我发现了问题。我从 BoostPro 而不是 Boost.org 下载了 boost 配置文件。好吧，因为我是一个新手，直到它严重打击我才意识到这一点。我在 Boost.org 上查看官方提升文档，显然存在一些差异。现在很高兴:-)

# python - python gtk 多窗口

> ID：13986828
> 
> 赞同：0
> 
> 时间：2012-12-21T08:44:42.740
> 
> 标签：python, linux, window, gtk, multi-window

我对 python gtk 模块有一个大问题（对我来说！）。

我可以打开多个窗口；但我不能单独关闭（一次，一个窗口）。如果我关闭一个窗口，所有窗口都会自动关闭。我只想关闭第一个窗口。关闭第一个窗口后，出现一个新窗口（由我选择）。

例如 ：

```
#!/usr/bin/env python

import pygtk
pygtk.require20()
import gtk

class CLS1(object):
    def __init__(self):
        self.mywindow = gtk.Window(gtk.WINDOW_TOPLEVEL)
        self.mywindow.connect("delete_event", gtk.main_quit)

        self.btn = gtk.Button("Cls1|Btn")

        self.mywindow.add(self.btn)

        self.mywindow.show_all()

    def main(self):
        gtk.main()

class CLS2(object):
    def __init__(self):
        self.mywindow = gtk.Window(gtk.WINDOW_TOPLEVEL)
        self.mywindow.connect("delete_event", gtk.main_quit)

        self.btn = gtk.Button("Cls2|Btn")

        self.mywindow.add(self.btn)

        self.mywindow.show_all()

    def main(self):
        gtk.main()

class APP(object):
    def __init__(self):
        self.mywindow = gtk.Window(gtk.WINDOW_TOPLEVEL)
        self.mywindow.connect("delete_event", gtk.main_quit)

        self.hori = gtk.HBox()

        self.btn1 = gtk.Button("AppBtn1")
        self.btn2 = gtk.Button("AppBtn2")

        self.btn1.connect("clicked", self.show_me , "AppBtn1")

        self.btn2.connect("clicked", self.show_me , "AppBtn2")

        self.hori.pack_start(self.btn1)
        self.hori.pack_start(self.btn2)

        self.mywindow.add(self.hori)

        self.mywindow.show_all()

    def show_me(self, penar, data):
        if data=="AppBtn1" :
            CLS1().main()

        if data=="AppBtn2":
            CLS2().main()

        gtk.main_quit()

    def main(self):
        gtk.main()

APP().main() 
```

我要这个 ：

1-我将运行程序

2-“APP”类将工作并会出现“APP”窗口

3-如果我单击一个按钮（AppBt1 或 AppBtn2）；“APP”窗口将关闭（自动；不是我！）

4-如果我点击了“APP”窗口上的“AppBtn1”按钮（@step 3）；“CLS1”类将工作，其窗口将打开

，或者如果我点击了“APP”窗口上的“AppBtn2”按钮（@step 3）；“CLS2”类将起作用，其窗口将打开

程序运行时我只想在屏幕上显示一个窗口；如果我点击一个按钮；它的窗口将关闭并打开一个新窗口（由我选择，并且自动！）

我怎样才能做到这一点？你能写它的代码吗:) 非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T23:37:08.120

调用 gtk.main_quit 将杀死整个程序（它基本上停止 GTK）。因此，您需要的只是*在最后一个窗口关闭时*停止 GTK 。您当前正在做的是在任何窗口关闭时停止 GTK。

因此，只需使用一个全局变量，您将使用它作为打开窗口的计数器。在删除事件处理程序上，递减该计数器，如果它达到 0，则意味着您没有更多的窗口打开，您可以调用 gtk.main_quit，否则，什么也不做，窗口将被正常销毁。

要杀死父窗口，只需在连接`clicked`信号时将父窗口作为最后一个参数传递。在关联的回调中，您将获得最后一个参数并对其调用 gtk.Widget.destroy。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T22:47:44.087

更好的方法可能是修改已经打开的窗口，而不是关闭它并打开另一个窗口。

# java - JFree 图表添加到 xyseries

> ID：13986835
> 
> 赞同：0
> 
> 时间：2012-12-21T08:45:24.470
> 
> 标签：java, key, jfreechart

当我添加更多数据时，我在更新我的 jfreechart 时遇到问题 - 我试图每 5 秒更新一次折线图并让它在点之间画线。我面临的问题是添加键 - 您无法添加具有相同值的键，所以我不确定如何使用新数据更新图表？

请有人建议我可能会出错的地方

```
 public static void main (String[] args){
          String val= args[0];
          LineChart chart = new LineChart("Name " + val);

          while(true){
             Main main = new Main();
             XMLData data = getMyData()         
             chart.addToDataSet(data);
             chart.pack();
               RefineryUtilities.centerFrameOnScreen(chart);
               chart.setVisible(true);
               LineChart.incremementxAxisTimePlot(true);
             try {
                Thread.sleep(5000);
             } catch (InterruptedException e) {
                e.printStackTrace();
             }
          }

package com.chart.graph;

import java.awt.Color;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYLineAndShapeRenderer;
import org.jfree.data.xy.XYDataset;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;
import org.jfree.ui.ApplicationFrame;
import com.graph.logfiledata.XMLData;

/**
 * A simple demonstration application showing how to create a line chart using data from an
 * {@link XYDataset}.
 *
 */
public class LineChart extends ApplicationFrame {

    private static int xAxisTimePlot = 5;
    private XYSeriesCollection dataset = new XYSeriesCollection();

    public LineChart(final String title) {

        super(title);
        final JFreeChart chart = createChart(dataset);
        final ChartPanel chartPanel = new ChartPanel(chart);
        chartPanel.setPreferredSize(new java.awt.Dimension(500, 270));
        setContentPane(chartPanel);

    }

    public static void incremementxAxisTimePlot(boolean update){
        if(update){
            xAxisTimePlot+=5;
        }
    }
    XYSeries series2 = new XYSeries("1");
    XYSeries series3 = new XYSeries("2");
    XYSeries series4 = new XYSeries("3");
    XYSeries series5 = new XYSeries("4");
    XYSeries series6 = new XYSeries("5");
    XYSeries series7 = new XYSeries("6");
    XYSeries series8 = new XYSeries("7");
    XYSeries series9 = new XYSeries("8");
    XYSeries series10 = new XYSeries("9");
    public void addToDataSet(XMLData data){

        series2.add(xAxisTimePlot, data.getOne());
        series3.add(xAxisTimePlot, data.getTwo());
        series4.add(xAxisTimePlot, data.getThree());
        ...        
        //dataset.addSeries(series1);
        dataset.addSeries(series2);
        dataset.addSeries(series3);
        dataset.addSeries(series4);
        dataset.addSeries(series5);
        dataset.addSeries(series6);
        dataset.addSeries(series7);
        dataset.addSeries(series8);
        dataset.addSeries(series9);
        dataset.addSeries(series10);

    }

    /**
     * Creates a chart.
     * 
     * @param dataset  the data for the chart.
     * 
     * @return a chart.
     */
    private JFreeChart createChart(final XYDataset dataset) {

        // create the chart...
        final JFreeChart chart = ChartFactory.createXYLineChart("Line Chart","X","Y", dataset, PlotOrientation.VERTICAL,true,true, false);
        chart.setBackgroundPaint(Color.white);

        // get a reference to the plot for further customisation...
        final XYPlot plot = chart.getXYPlot();
        plot.setBackgroundPaint(Color.lightGray);
        plot.setDomainGridlinePaint(Color.white);
        plot.setRangeGridlinePaint(Color.white);

        final XYLineAndShapeRenderer renderer = new XYLineAndShapeRenderer();
        renderer.setSeriesLinesVisible(0, false);
        renderer.setSeriesShapesVisible(1, false);
        plot.setRenderer(renderer);

        // change the auto tick unit selection to integer units only...
        final NumberAxis rangeAxis = (NumberAxis) plot.getRangeAxis();
        rangeAxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits());

        return chart;  
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:47:30.057

我设法通过将以下几行添加到构造函数中自己解决了这个问题

```
//dataset.addSeries(series1);
        dataset.addSeries(series2);
        dataset.addSeries(series3);
        dataset.addSeries(series4);
        dataset.addSeries(series5);
        dataset.addSeries(series6);
        dataset.addSeries(series7);
        dataset.addSeries(series8);
        dataset.addSeries(series9);
        dataset.addSeries(series10); 
```

然后根据原始帖子中的代码对其进行更新。

# c# - 在运行时构建连接字符串并将其保存在 c# windows 应用程序的应用程序设置中

> ID：13986836
> 
> 赞同：2
> 
> 时间：2012-12-21T08:45:27.830
> 
> 标签：c#, windows, deploying

我正在使用 sql server 2005 和 Visual Studio 2008 构建 C# windows 应用
程序。在客户端计算机上部署应用程序。我按这个顺序做这个

1.  我使用在我的应用程序中创建的相同用户/密码（即 sa/密码）安装 sql server 2005。
2.  我运行我的 Windows 应用程序 msi 文件。它将我的数据库安装在 sql server 2005 中。

当我尝试运行应用程序时，由于客户端计算机上的机器名称和 sql 服务器实例名称不同，我失败了。我在连接字符串中遇到错误。我需要一种方法来提取目标计算机名和 sql server 实例，并在部署期间将其保存在我的应用程序设置中（在我的 c# 代码中使用，以便我可以在运行时创建连接字符串。）

为了解决这个问题，我正在我的客户端计算机上安装 Visual Studio 并编辑源代码以更改机器名称和 sql 服务器实例。然后我的 Windows 应用程序运行。我不想以这种方式解决我的问题，而是需要一种方法，我可以在部署时设置我的参数，或者让你来建议更好的方法。

我会请求你帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:54:19.337

谷歌会给你很多选择。您在复制数据库时是否遵循了正确的步骤。

按照这些链接[http://blogs.msdn.com/b/sreekarm/archive/2009/09/11/move-a-database-from-one-server-to-another-server-in-sql-server-2008 .aspx](http://blogs.msdn.com/b/sreekarm/archive/2009/09/11/move-a-database-from-one-server-to-another-server-in-sql-server-2008.aspx)

这将回答你的[DBA Stack Exchange](https://dba.stackexchange.com/questions/174/how-can-i-move-a-database-from-one-server-to-another)

还发布您收到的确切错误消息。找出问题会很有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:54:32.100

使用 SQL CE 将需要大量返工。

完整的安装顺序是：

1.  安装 Windows Installer 3.1（如果未安装）
2.  安装 .Net 2.0（如果未安装）
3.  检查是否尚未安装 SQL：

> HKLM "SOFTWARE\Microsoft\Microsoft SQL Server\${instance_name}\MSSQLServer\CurrentVersion" "CurrentVersion"

然后你需要安装 SQL Server：

> ${installer_path}\SQLEXPR.exe -q /norebootchk /qn reboot=ReallySuppress addlocal=all INSTANCENAME=${instance_name} SAPWD=${password} SECURITYMODE=SQL SQLBROWSERAUTOSTART=1 SQLAUTOSTART=1 AGTAUTOSTART=1 ASAUTOSTART=0 RSAUTOSTART=0 DISABLENETWORKPROTOCOLS=0 ERRORREPORTING=1 SQMREPORTING=0 ENABLERANU=0 ADDUSERASADMIN=1

要连接到 SQL Server 实例，请使用您的**数据链接属性对话框**。您需要向用户明确说明如何连接到实例。例如

![在此处输入图像描述](../Images/affa207687b2ff40a162a2a4d5e96c29.png)

如果您使用 .\Instance_Name 语法，其中“.” 点表示应该解决问题的客户端 PC 名称。也在你的连接字符串中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T12:27:07.110

因此，如果我对您的理解正确，您已经在源代码中硬编码了连接字符串。当然，您已经发现这确实是一个坏主意，但要付出您的代价。

您需要将该连接字符串保存在 app.config 文件中。这样，当您将应用程序安装到客户时，您只需更改配置文件，您的代码就可以使用了。

在 app.config 中插入连接字符串：

*   右键单击您的项目并选择`Properties`，然后转到该 `Settings`页面。这将为您的项目创建一个`settings.settings`文件，并为您的属性打开一个 GUI 编辑器。
*   现在在列名中插入一个字符串（例如 `testConnection`）
*   从类型列中选择`ConnectionString`类型
*   在值列中插入对您的开发机器有效的连接字符串

现在，如果您打开 app.config，您会注意到一个名为的新部分`ConnectionStrings`，如下所示：

```
 <connectionStrings>
    <add name="ProjectName.Properties.Settings.testConnection" connectionString="Provider=Microsoft.Jet.OLEDB.4.0;Data Source=D:\temp\mytemp.mdb;User Id=admin;Password=;" />
  </connectionStrings> 
```

现在是时候一劳永逸地修复您的代码了。
在每个有硬编码连接字符串的地方，用类似这样的东西替换该代码

```
 string constring = ConfigurationManager.ConnectionStrings["ProjectName.Properties.Settings.testConnection].ConnectionString; 
```

当我们在这里时，请检查是否可以使用[SqlServer Express 2012 的 LocalDB 版本来消除安装 SqlServer 的需要。](https://stackoverflow.com/questions/9655362/localdb-deployment-on-client-pc)

# java - 通过请求属性访问存储在 var 中的列表的列表元素

> ID：13986840
> 
> 赞同：0
> 
> 时间：2012-12-21T08:45:51.060
> 
> 标签：java, javascript, spring

我已经通过请求属性将列表设置为`request.setAttribute("webServicel",webService_list);`，webService_list 包含`[getpkg,getActive,getEligible etc.]`。我想在 javascript 中访问列表的每个元素。我在做 -

```
for(var i = 0; i <5; i++)                                   {
    var service ='$webServicel.remove(0)';  
    document.forms[0].operations.options[i].text =service;
    document.forms[0].operations.options[i].value =service;
} 
```

但是每次我在 var 服务中设置 getpkg。请让我知道我哪里出错了。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:55:14.703

请记住您的 For 循环是**Javascript for 循环**而不是**JSP for 循环**

所以`$webServicel.remove(0)`将替换为列表中第一个元素的值，然后将下面的响应返回给浏览器

```
for(var i = 0; i <5; i++){
    var service ='getPkg';  
    document.forms[0].operations.options[i].text =service;
    document.forms[0].operations.options[i].value =service;
} 
```

**请改用以下方法**

```
<select name="operations">
<c:forEach var="webServiceItem" items="${webService_list}">
<option value="$webServiceItem" > $webServiceItem </option>
</c:forEach>
</select> 
```

# shopify - 将 javascript 添加到 shopify 的结帐成功页面

> ID：13986845
> 
> 赞同：0
> 
> 时间：2012-12-21T08:46:01.093
> 
> 标签：shopify

我需要创建一个应用程序，在成功结帐时添加一些 javascript。我如何实现这一目标？

我检查了文档和模板文件，但似乎不存在这样的注入代码的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T08:30:00.893

您可以使用[ScriptTag](http://api.shopify.com/scripttag.html)来完成此操作。引用文档：

> 请注意，如果 src 以“https://”开头，则 ScriptTag 只会出现在结帐中，以免破坏 SSL 锁定。

# php - Doctrine / Symfony 模型在用 new 实例化时不会删除

> ID：13986848
> 
> 赞同：0
> 
> 时间：2012-12-21T08:46:29.200
> 
> 标签：php, symfony, doctrine, symfony-1.4

一个简单的问题，但有谁知道为什么下面的代码实际上不会从我的数据库中删除任何内容？`->delete()`回报`true`... _

```
$model = new Model();
$model->setPrimaryKeyPart1($value1);
$model->setPrimaryKeyPart2($value2);
$model->delete(); // returns true, but isn't deleted. 
```

请注意，此模型是一个多对多表，所有值都是主键。

我觉得它与它有一个`isNew`标志有关，有没有办法以这种方式删除模型而不必从数据库中查询它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:49:39.860

您的对象`$model`不是来自数据库，而是以编程方式初始化的。

即使你设置`PK1`和`PK2`. 没有与该对象关联的数据库连接。

最好从数据库中检索对象然后删除它。

# java - JBoss AS7 中的系统属性

> ID：13986852
> 
> 赞同：1
> 
> 时间：2012-12-21T08:46:39.883
> 
> 标签：java, ssl, jboss, jboss7.x

在 JBoss AS7 的`standlone.xml`文件中，我将`my.dir`系统属性中的变量设置为

```
<system-properties>
<property name="my.dir" value="D:\\mylocation"
</system-properties> 
```

现在我正在尝试使用此变量通过以下方式在standalone.xml中指定密钥库文件的位置

```
certificate-key-file="${my.dir}\cert\mycert.keystore" 
```

但是，在启动 JBoss 时，我得到了`IO exception`因为 JBoss 无法找到路径。如果我做错了什么，你能告诉我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:09:14.543

据我所知，jboss web 子系统中的 ssl 元素不支持系统属性替换（目前）。您有 3 个选择：

*   使用绝对路径
*   使用`$JBOSS_AS7\bin`位置的相对路径
*   将证书存储在 JBoss 查找它们的默认位置 -`${user.home}/.keystore`这是用户运行的操作系统主目录`jboss.web`。

[在此处](http://docs.jboss.org/jbossweb/7.0.x/ssl-howto.html)查看有关 jboss.web ssl 配置的更多详细信息。

# java - Windows 8 开始屏幕上的 java 应用程序

> ID：13986854
> 
> 赞同：1
> 
> 时间：2012-12-21T08:46:54.080
> 
> 标签：java, windows

我一直在谷歌上搜索，但我找不到答案。谁能告诉我是否可以在 Windows 8 开始屏幕上放置 Java 应用程序？根据[java.com](http://www.java.com/en/download/faq/win8_faq.xml)

> Windows 8 何时支持 Java？Java 7 Update 10 的发布正式支持 Windows 8。Java 仅在桌面屏幕中受支持。Java 不会在“开始”屏幕中运行。

我不确定如何解释这一点，因为我不知道 Windows 8 的启动屏幕，而且他们在同一页面上谈论 Internet Explorer 10，这让我认为他们可能只是在谈论浏览器。基本上我想要一个磁贴像一个经典的 Windows 图标。这是它的工作方式吗？这是你可以运行java应用程序的方式吗？还是需要先进入桌面界面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:04:27.217

不，你不能。

Windows 8 开始屏幕上的所有应用程序都是从 Windows 应用商店下载的应用程序。

您开发的所有其他`Java`应用程序都将在桌面环境中运行，但不在开始屏幕中。

根据[此](http://visualstudiomagazine.com/articles/2012/09/12/write-windows-8-apps-in-native-java.aspx)来源，您可以期待使用为 Windows 应用商店创建应用程序`Java`，然后您可能会考虑将`Java`应用程序放在 Windows 开始屏幕上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T13:33:30.413

您不能直接将 Java 应用程序放在 Windows 8 的开始屏幕中（就像您无法在 Windows 7 的桌面上创建快捷方式图标一样），但是请注意，这很少是您想要的 Windows 桌面应用程序。

大多数情况下，您会希望使用 Windows 安装程序来包装 Java 桌面应用程序，该安装程序会将开始屏幕图标放在 Windows 8 上。然后，您的 Java 代码将由安装程序可执行文件启动，它可能会执行一些房屋清洁工作，例如检查兼容的内容计算机中安装了 Java 版本，如果需要，请安装更新版本。

# javascript - bxSlider onAfterSlide 回调

> ID：13986855
> 
> 赞同：1
> 
> 时间：2012-12-21T08:46:58.580
> 
> 标签：javascript, jquery, image, bxslider

大家早上好 :) 我这里有一个问题，我的脖子已经痛了 2 天了。我正在使用 bxSlider 让图像在页面上滑动，并且在 onAfterSlide 回调中调用我自己的函数。除了一件事，一切都很好。当我在幻灯片之间快速切换时，我的函数被调用了 2-3 次（我在页面上有 3 张图像），这不好，因为它返回了意外的结果。我不能使用最新版本的 bxSlider，因为标记已更改。我认为会发生这种情况，因为调用 onAfterSlide 回调时动画仍未完成。这就是我调用 bxSlider 的方式：

```
$('#slider_bx').bxSlider({
    mode: 'fade',
    speed: 1000,
    pause: 9000,
    auto: true,
    autoControls: false,
    prevText: '',
    nextText: '',
    autoHover: true,
    captions: false,
    pager: true,
    onBeforeSlide: function () {
        if ($('.slide_in').length) {
            $('.slide_in').hide();
        }
    },
    onAfterSlide: function () {
        if ($('.slide_in').length && $('.slide_in').is(':hidden')) {
            doCrazyStuff();
        }
    }
}); 
```

这是我的功能：

```
function doCrazyStuff() {
    var $this = $('.slide_in');
    if ($this.length > 0) {
        setTimeout(function () {
            $this.show();
            $this.rotate({
                duration: 2000,
                angle: 90,
                animateTo: -20
            });
        }, 3000);
    }
} 
```

任何帮助表示赞赏。谢谢。

**编辑：** 我尝试添加`.stop()`，但没有帮助。

```
$this.show().stop();
$this.stop().show();
$this.stop().rotate({
    duration: 2000,
    angle: 90,
    animateTo: -20
});

$this.rotate({
    duration: 2000,
    angle: 90,
    animateTo: -20
}).stop(); // throws an error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:56:38.677

尝试使用

`$('.slide_in').stop()`

在幻灯片功能之后，我希望它可以工作，如果可能的话，尝试在小提琴中提供代码，这将很容易提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T05:03:42.787

查看您的代码我认为问题不在于您的代码：但是由于您已将 auto 设置为 true，因此插件计时器不会停止并且会在其定期间隔内滑动图像。所以我希望在您的自定义函数中使用 stopAuto() bxSlider 函数可以解决问题。完成工作后不要忘记开始车展。谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T08:46:24.573

您可以取消超时或检查它是否正在运行。
如果您只想运行最后一次超时：

```
var crazyTimeout;
function doCrazyStuff() {
    var $this = $('.slide_in');
    if ($this.length > 0) {
        if (crazyTimeout != undefined) {
            clearTimeout(crazyTimeout); // Cancel previous timeout
        }
        crazyTimeout = setTimeout(function () {
            crazyTimeout = undefined;
            $this.show();
            $this.rotate({
                duration: 2000,
                angle: 90,
                animateTo: -20
            });
        }, 3000);
    }
} 
```

如果您只想运行第一个超时：

```
var crazyTimeout;
function doCrazyStuff() {
    var $this = $('.slide_in');
    if ($this.length > 0) {
        if (crazyTimeout != undefined) {
            return; // A timeout is still running: don't create new one
        }
        crazyTimeout = setTimeout(function () {
            crazyTimeout = undefined;
            $this.show();
            $this.rotate({
                duration: 2000,
                angle: 90,
                animateTo: -20
            });
        }, 3000);
    }
} 
```

# php - 错误的静态方法

> ID：13986856
> 
> 赞同：15
> 
> 时间：2012-12-21T08:47:05.317
> 
> 标签：php, static

`PHP`调用父类中的私有方法，而不是调用当前类中的方法定义`call_user_func`

```
class Car {
    public function run() {
        return call_user_func(array('Toyota','getName')); // should call toyota
    }
    private static function getName() {
        return 'Car';
    }
}

class Toyota extends Car {
    public static function getName() {
        return 'Toyota';
    }
}

$car = new Car();
echo $car->run(); //Car instead of Toyota

$toyota = new Toyota();
echo $toyota->run(); //Car instead of Toyota 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T12:09:14.183

我找到了一个不同方法的解决方案..

```
<?php
 class Car {
    public static function run() {
     return static::getName();
   }
   private static function getName() {
    return 'Car';
    }
  }

   class Toyota extends Car {
     public static function getName() {
        return 'Toyota';
      }
   }
echo Car::run();
echo Toyota::run();
  ?> 
```

使用`Late Static Binding`..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T10:04:20.277

你可能会使用这样的东西：

```
<?php

class Car {
    public function run() {
        return static::getName();
    }

    private static function getName(){
        return 'Car';
    }
}

class Toyota extends Car {
    public static function getName(){
        return 'Toyota';
    }
}

$car = new Car();
echo $car->run();

echo PHP_EOL;

$toyota = new Toyota();
echo $toyota->run();

?> 
```

输出：

```
Car
Toyota 
```

PHP 5.4.5

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T04:29:07.290

如果您只想从父母和后代获得访问权限，请使用“受保护”修饰符。海事组织，很明显。例如：

```
<?php

class Car {
    public function run() {
        return call_user_func(array('static','getName'));
    }
    protected static function getName() {
        return 'Car';
    }
}

class Toyota extends Car {
    protected static function getName() {
        return 'Toyota';
    }
}

$car = new Car();
echo $car->run(); // "Car"

$toyota = new Toyota();
echo $toyota->run(); // "Toyota" 
```

您可以使用 get_call_class() 而不是“静态”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T18:02:31.153

这是一个似乎在很长一段时间内一直存在和不存在的错误（请参阅@deceze 对问题的评论中的测试）。可以“修复”这个问题——也就是说，在 PHP 版本中提供一致的行为——使用[反射](http://php.net/reflection)：

由于依赖于[`ReflectionMethod::setAccessible()`](http://www.php.net/manual/en/reflectionmethod.setaccessible.php)调用私有/受保护的方法，因此在 PHP 5.3.2 及更高版本中工作。我将很快添加对此代码的进一步解释，它可以做什么和不能做什么以及它是如何工作的。

不幸的是，由于代码太大，无法直接在 3v4l.org 上对此进行测试，但这是第一个真正用于缩小 PHP 代码的用例[-](http://customhost.com.ua/php-minify/index.php)如果您这样做，它确实可以在 3v4l 上工作，所以请随意玩耍和看看你能不能打破它。我知道的唯一问题是它目前不理解`parent`. 它还受到`$this`5.4 之前的闭包缺乏支持的限制，但实际上并没有什么可以做的。

```
<?php

function call_user_func_fixed()
{
    $args = func_get_args();
    $callable = array_shift($args);
    return call_user_func_array_fixed($callable, $args);
}

function call_user_func_array_fixed($callable, $args)
{
    $isStaticMethod = false;
    $expr = '/^([a-z_\x7f-\xff][\w\x7f-\xff]*)::([a-z_\x7f-\xff][\w\x7f-\xff]*)$/i';

    // Extract the callable normalized to an array if it looks like a method call
    if (is_string($callable) && preg_match($expr, $callable, $matches)) {
        $func = array($matches[1], $matches[2]);
    } else if (is_array($callable)
                   && count($callable) === 2
                   && isset($callable[0], $callable[1])
                   && (is_string($callable[0]) || is_object($callable[0]))
                   && is_string($callable[1])) {
        $func = $callable;
    }

    // If we're not interested in it use the regular mechanism
    if (!isset($func)) {
        return call_user_func_array($func, $args);
    }

    $backtrace = debug_backtrace(); // passing args here is fraught with complications for backwards compat :-(
    if ($backtrace[1]['function'] === 'call_user_func_fixed') {
        $called = 'call_user_func_fixed';
        $contextKey = 2;
    } else {
        $called = 'call_user_func_array_fixed';
        $contextKey = 1;
    }

    try {
        // Get a reference to the target static method if possible
        switch (true) {
            case $func[0] === 'self':
            case $func[0] === 'static':
                if (!isset($backtrace[$contextKey]['object'])) {
                    throw new Exception('Use of self:: in an invalid context');
                }

                $contextClass = new ReflectionClass($backtrace[$contextKey][$func[0] === 'self' ? 'class' : 'object']);
                $contextClassName = $contextClass->getName();

                $method = $contextClass->getMethod($func[1]);
                $ownerClassName = $method->getDeclaringClass()->getName();
                if (!$method->isStatic()) {
                    throw new Exception('Attempting to call instance method in a static context');
                }
                $invokeContext = null;

                if ($method->isPrivate()) {
                    if ($ownerClassName !== $contextClassName
                            || !method_exists($method, 'setAccessible')) {
                        throw new Exception('Attempting to call private method in an invalid context');
                    }

                    $method->setAccessible(true);
                } else if ($method->isProtected()) {
                    if (!method_exists($method, 'setAccessible')) {
                        throw new Exception('Attempting to call protected method in an invalid context');
                    }

                    while ($contextClass->getName() !== $ownerClassName) {
                        $contextClass = $contextClass->getParentClass();
                    }
                    if ($contextClass->getName() !== $ownerClassName) {
                        throw new Exception('Attempting to call protected method in an invalid context');
                    }

                    $method->setAccessible(true);
                }

                break;

            case is_object($func[0]):
                $contextClass = new ReflectionClass($func[0]);
                $contextClassName = $contextClass->getName();

                $method = $contextClass->getMethod($func[1]);
                $ownerClassName = $method->getDeclaringClass()->getName();

                if ($method->isStatic()) {
                    $invokeContext = null;

                    if ($method->isPrivate()) {
                        if ($ownerClassName !== $contextClassName || !method_exists($method, 'setAccessible')) {
                            throw new Exception('Attempting to call private method in an invalid context');
                        }

                        $method->setAccessible(true);
                    } else if ($method->isProtected()) {
                        if (!method_exists($method, 'setAccessible')) {
                            throw new Exception('Attempting to call protected method in an invalid context');
                        }

                        while ($contextClass->getName() !== $ownerClassName) {
                            $contextClass = $contextClass->getParentClass();
                        }
                        if ($contextClass->getName() !== $ownerClassName) {
                            throw new Exception('Attempting to call protected method in an invalid context');
                        }

                        $method->setAccessible(true);
                    }
                } else {
                    $invokeContext = $func[0];
                }

                break;

            default:
                $contextClass = new ReflectionClass($backtrace[$contextKey]['object']);
                $method = new ReflectionMethod($func[0], $func[1]);
                $ownerClassName = $method->getDeclaringClass()->getName();
                if (!$method->isStatic()) {
                    throw new Exception('Attempting to call instance method in a static context');
                }
                $invokeContext = null;

                if ($method->isPrivate()) {
                    if (empty($backtrace[$contextKey]['object'])
                            || $func[0] !== $contextClass->getName()
                            || !method_exists($method, 'setAccessible')) {
                        throw new Exception('Attempting to call private method in an invalid context');
                    }

                    $method->setAccessible(true);
                } else if ($method->isProtected()) {
                    $contextClass = new ReflectionClass($backtrace[$contextKey]['object']);

                    if (empty($backtrace[$contextKey]['object']) || !method_exists($method, 'setAccessible')) {
                        throw new Exception('Attempting to call protected method outside a class context');
                    }

                    while ($contextClass->getName() !== $ownerClassName) {
                        $contextClass = $contextClass->getParentClass();
                    }
                    if ($contextClass->getName() !== $ownerClassName) {
                        throw new Exception('Attempting to call protected method in an invalid context');
                    }

                    $method->setAccessible(true);
                }

                break;
        }

        // Invoke the method with the passed arguments and return the result
        return $method->invokeArgs($invokeContext, $args);
    } catch (Exception $e) {
        trigger_error($called . '() expects parameter 1 to be a valid callback: ' . $e->getMessage(), E_USER_ERROR);
        return null;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T11:36:44.217

我认为，问题在于两个 getname 函数的访问级别不同。如果您将 getname() 的基类版本公开（与派生类版本相同），那么在 php 5.3.15（在我的 Mac 上）中，您将获得 Toyota。我认为，由于访问级别不同，您最终会在 Toyota 类中得到两个不同版本的 getname() 函数，而不是派生类版本覆盖基类版本。换句话说，你有重载而不是覆盖。因此，当 run() 函数在 Toyota 类中查找要执行的 getname() 函数时，它会找到两个并获取第一个，这将是第一个被声明的（来自基类）。

当然，这只是我的假设，但听起来似乎有道理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-13T15:50:41.803

使用 get_called_call 函数来执行此操作

```
public function run() {
    $self = get_called_class();
    return $self::getName();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-14T04:20:48.753

我相信您的功能会相互覆盖，默认情况下会使用第一个功能。除非您更改某个函数的参数，或重命名该函数，否则它将始终默认为父类函数。

# php - 需要将php值传递给javascript

> ID：13986862
> 
> 赞同：-2
> 
> 时间：2012-12-21T08:47:26.483
> 
> 标签：php, javascript

> **可能重复：**
> [如何将 JavaScript 变量传递给 PHP？](https://stackoverflow.com/questions/1917576/how-to-pass-javascript-variables-to-php)

在我的代码下面：

```
function disablefields(){ 

var suresh=[<?php echo $cryo_1kl_18_orig_jan; ?>];

if (document.getElementById('checkboxA').checked == 1){

document.getElementById('cryo_1kl_18_rev_jan').disabled=''; 
document.getElementById('cryo_1kl_18_rev_jan').value='**i want pass the php value here**';

} 
```

我想将php值传递给javascript ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:48:18.053

```
function disablefields()
{ 
     var suresh=[<?php //echo $cryo_1kl_18_orig_jan; ?>];

    if (document.getElementById('checkboxA').checked == 1) {
        document.getElementById('cryo_1kl_18_rev_jan').disabled=''; 
        document.getElementById('cryo_1kl_18_rev_jan').value='<?=$your_value?>';
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:48:56.723

```
document.getElementById('cryo_1kl_18_rev_jan').value='<?php echo $php_value;?>'; 
```

# java - 为什么Tomcat给出403错误？

> ID：13986868
> 
> 赞同：0
> 
> 时间：2012-12-21T08:47:37.567
> 
> 标签：java, web-services, apache, tomcat, access-control

我在下面配置了我的 tomcat-users.xml：

```
<?xml version='1.0' encoding='utf-8'?> 
<tomcat-users> 
<role rolename="tomcat"/> 
<role rolename="role1"/> 
<role rolename="manager"/> 
<role rolename="admin"/> 
<user username="admin" password="admin" roles="admin,manager"/> 
<user username="tomcat" password="tomcat" roles="tomcat"/> 
<user username="role1" password="tomcat" roles="role1"/> 
<user username="both" password="tomcat" roles="tomcat,role1"/>  
</tomcat-users> 
```

`webapps/dupload/task.html`我在向 servlet 提交查询表单的页面下放置了一个 html 页面。html代码如下：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>A Sample Form Using POST</TITLE>
</HEAD>

<BODY BGCOLOR="#FDF5E6">
<H2 ALIGN="CENTER">SimpleTaskQuery</H2>

<FORM ACTION="http://10.5.20.78:8080/mps4/ui/SimpleTaskQueryServlet"
   METHOD="POST">
 <CENTER>
Task Id:
 <INPUT TYPE="TEXT" NAME="id" VALUE="111"><BR>
 <INPUT TYPE="SUBMIT">
 </CENTER>
</FORM>

</BODY>
</HTML> 
```

但是当我提交表单时，tomcat 给出了以下错误：

```
HTTP Status 403 - Access to the requested resource has been denied

type Status report

message Access to the requested resource has been denied

description Access to the specified resource (Access to the requested resource has been denied) has been forbidden.

Apache Tomcat/7.0.26 
```

我已经编辑了 tomcat-users.xml 并使用管理员用户帐户登录。为什么这仍然不起作用？

**更新：**

webapp 的 web.xml 如下： web.xml：

```
 <security-constraint>
    <web-resource-collection>
      <web-resource-name>HTMLManger and Manager command</web-resource-name>
      <url-pattern>/ui/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
      <role-name>viewer</role-name>
    </auth-constraint>
  </security-constraint>
  <login-config>
    <auth-method>BASIC</auth-method>
    <realm-name>Tomcat Manager Application</realm-name>
  </login-config>
  <security-role>
    <description> </description>
    <role-name>viewer</role-name>
  </security-role> 
```

我把 tomcat－users.xml 编辑到：</p>

```
<?xml version='1.0' encoding='utf-8'?>
<tomcat-users>
<role rolename="manager-gui"/>
<role rolename="manager-status"/>
<role rolename="manager-script"/>
<role rolename="manager-jmx"/>
<role rolename="viewer"/>
<role rolename="admin"/>
<role rolename="tomcat"/>
<user username="admin" password="admin" roles="manager-gui"/>
<user username="viewer" password="viewer" roles="admin,tomcat,manager-gui,manager-script"/>
</tomcat-users> 
```

但是还是不行。</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-28T20:35:07.960

你应该解决这个问题：

```
<user username="viewer" password="viewer" roles="admin,tomcat,manager-gui,manager-script"/> 
```

该用户需要删除角色“manager-script”，以便他可以通过 html-interface 获得访问权限。所以它应该看起来像：

```
<user username="viewer" password="viewer" roles="admin,tomcat,manager-gui"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T21:41:50.320

您的 web.xml 说需要角色“查看者”。您以没有该角色的管理员用户身份登录。

如下更新您的 tomcat-users.xml：

```
<user username="admin" password="admin" roles="manager-gui, viewer"/>; 
```

奇怪的是，您的“查看者”用户也没有查看者角色，但这不是导致问题的原因（如果您以管理员身份登录）

# performance - 为什么页面被pingdom工具加载两次？

> ID：13986869
> 
> 赞同：0
> 
> 时间：2012-12-21T08:47:38.173
> 
> 标签：performance, load, double, pingdom

问题是页面加载了 2 次，由 pingdom 报告。

该页面是[www.klikmk.com](http://www.klikmk.com)

大多数时候速度看起来不错，但如果没有双重负载可能会更好。我也在寻找带有萤火虫的 html 代码，但我在它被调用 2 次的地方找不到它。

[图片](http://tinypic.com/r/33usiyq/6)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:11:36.640

当您的图像缺少 src 标签或为空时，也会发生 2 次页面加载

# c++ - C++ 在辅助线程中运行任务并期望在主线程上响应

> ID：13986876
> 
> 赞同：2
> 
> 时间：2012-12-21T08:48:15.073
> 
> 标签：c++, pthreads

我必须使用 C++ 中的线程在后台运行任务。实际上在代码中，我必须使用 curl 发送多个 HTTP 请求，并且我不想使用主线程运行，因为它会使主线程阻塞，直到任务完成。因此，我希望每个 http 请求都应该是这样的：

a) 创建一个新线程 b) 在这个新线程上发送 curl 请求 c) 一旦请求/响应完成，将响应/数据发送回主线程

在此过程中，我希望主线程空闲并运行其他一些自己的任务。我是 C++ 和线程的新手，请告知如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:51:45.890

如果您希望在工作线程完成后立即通知主线程，那么听起来您需要在主线程中有一个消息处理循环。

我只是在想这可以像 WinAPI 中的窗口过程一样实现。沿着这些思路。

```
cEvent event;
while( true )
{
  event = GetNextEvent();
  if( event.GetType() == APPQUIT )
  {
    break;
  }
  if( event.GetType() == SENDHHPTREQUEST )
  {
    // Create worker thread etc.
  }
  else if( event.GetType() == HTTPREQUESTCOMPLETED )
  {
    // Process HTTP request resuts.
  }
  ...
} 
```

工作线程需要一种将事件发送到主线程的方法。当然，从消息队列中添加、删除事件必须是线程安全的，即使用互斥锁进行保护。我猜想创建请求或处理请求结果所需的所有数据都需要以某种方式打包到 cEvent 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T08:00:00.913

如果您使用的是 c++11 标准，我必须制作一个“主线程调用程序”，它需要一个 lambda 代码并安排它在下次屏幕更新时在主线程上调用（始终在主线程上）。在内部，它使用一个 lambda 向量，并在每次调用 update 时将其耗尽。如果没有 lambda，则不安排更新。我在我的 iOS/Droid 生产代码中广泛使用它。你可以在这里得到它： [https ://github.com/radif/emjCCMainThreadCaller](https://github.com/radif/emjCCMainThreadCaller)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T09:13:01.160

您需要使用条件变量或自动或手动重置事件来通知您的主线程。当你启动你的辅助线程时，你让你的主线程等待这个条件变量，当辅助线程完成时，它发出一个标志，让主线程知道它已经完成并且可以继续做它正在做的事情。

# c# - DecryptBytesFromBytes [AES] C#

> ID：13986877
> 
> 赞同：-1
> 
> 时间：2012-12-21T08:48:16.740
> 
> 标签：c#, .net, aescryptoserviceprovider

我使用[这个函数](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aescryptoserviceprovider%28v=vs.90%29.aspx)来解密一个可执行文件：

```
public static string DecryptStringFromBytes_Aes(byte[] cipherText, byte[] Key, byte[] IV) ... 
```

但是，这个函数返回一个字符串输出，我可以看到我相应的解密文件的 ASCII 输出。但是，我需要得到一个`byte[]`输出。

我尝试了很多事情，但我被困住了：我需要一个`DecryptBytesToBytes`函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:03:02.023

该功能是专有的 - 即它是您的代码库的一部分，它肯定不是 BCL 的一部分。所以我建议你找到源代码并编写一个返回字节数组的新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T10:28:53.300

这在没有所有流的情况下有效：

```
 public static Byte[] Encrypt(Byte[] input, SymmetricAlgorithm crypto)
    {
        return Transform(crypto.CreateEncryptor(), input, crypto.BlockSize);
    }

    public static Byte[] Decrypt(Byte[] input, SymmetricAlgorithm crypto)
    {
        return Transform(crypto.CreateDecryptor(), input, crypto.BlockSize);
    }

    private static Byte[] Transform(ICryptoTransform cryptoTransform, Byte[] input, Int32 blockSize)
    {
        if (input.Length > blockSize)
        {
            Byte[] ret1 = new Byte[( ( input.Length - 1 ) / blockSize ) * blockSize];

            Int32 inputPos = 0;
            Int32 ret1Length = 0;
            for (inputPos = 0; inputPos < input.Length - blockSize; inputPos += blockSize)
            {
                ret1Length += cryptoTransform.TransformBlock(input, inputPos, blockSize, ret1, ret1Length);
            }

            Byte[] ret2 = cryptoTransform.TransformFinalBlock(input, inputPos, input.Length - inputPos);

            Byte[] ret = new Byte[ret1Length + ret2.Length];
            Array.Copy(ret1, 0, ret, 0, ret1Length);
            Array.Copy(ret2, 0, ret, ret1Length, ret2.Length);
            return ret;
        }
        else
        {
            return cryptoTransform.TransformFinalBlock(input, 0, input.Length); 
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T09:37:37.047

作为变体：

```
 static byte[] DecryptBytesToBytes (byte[] cipherText, byte[] Key, byte[] IV)
    {
        // Check arguments. 
        if (cipherText == null || cipherText.Length <= 0)
            throw new ArgumentNullException("cipherText");
        if (Key == null || Key.Length <= 0)
            throw new ArgumentNullException("Key");
        if (IV == null || IV.Length <= 0)
            throw new ArgumentNullException("Key");

        // Declare the string used to hold 
        // the decrypted text.
        byte[] encrypted = null;

        // Create an AesCryptoServiceProvider object 
        // with the specified key and IV. 
        using (AesCryptoServiceProvider aesAlg = new AesCryptoServiceProvider())
        {
            aesAlg.Key = Key;
            aesAlg.IV = IV;

            // Create a decrytor to perform the stream transform.
            ICryptoTransform decryptor = aesAlg.CreateDecryptor(aesAlg.Key, aesAlg.IV);

            // Create the streams used for decryption. 
            using (MemoryStream msDecrypt = new MemoryStream(cipherText))
            {
                using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read))
                {
                    using (StreamReader srDecrypt = new StreamReader(csDecrypt))
                    {
                        string encrypted_text = srDecrypt.ReadToEnd();
                        encrypted = new byte[encrypted_text.Length * sizeof(char)];
                        System.Buffer.BlockCopy(encrypted_text.ToCharArray(), 0, encrypted, 0, encrypted.Length);
                    }
                }
            }

        }

        return encrypted;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T09:37:56.557

您发布的代码用于加密字符串。以下代码将加密文件并使用文件路径对其进行解密。它会将文件写入硬盘。

```
 static void EncryptFile(string sInputFilename, string sOutputFilename, byte[] key, byte[] iv)
    {
        FileStream fsInput = new FileStream(sInputFilename, FileMode.Open, FileAccess.Read);

        FileStream fsEncrypted = new FileStream(sOutputFilename, FileMode.Create, FileAccess.Write);

        using (AesCryptoServiceProvider encryptor = new AesCryptoServiceProvider())
        {
            encryptor.Key = key;
            encryptor.IV = iv;

            ICryptoTransform transform = encryptor.CreateEncryptor();

            using (CryptoStream cryptostream = new CryptoStream(fsEncrypted, transform, CryptoStreamMode.Write))
            {
                byte[] bytearrayinput = new byte[fsInput.Length];
                fsInput.Read(bytearrayinput, 0, bytearrayinput.Length);
                cryptostream.Write(bytearrayinput, 0, bytearrayinput.Length);
            }

            fsInput.Close();
            fsEncrypted.Close();
        }
    }

    static void DecryptFile(string sInputFilename, string sOutputFilename, byte[] key, byte[] iv)
    {
        using (AesCryptoServiceProvider encryptor = new AesCryptoServiceProvider())
        {
            encryptor.Key = key;
            encryptor.IV = iv;

            using (FileStream fsread = new FileStream(sInputFilename, FileMode.Open, FileAccess.Read))
            {
                using (ICryptoTransform transform = encryptor.CreateDecryptor())
                {
                    using (CryptoStream cryptostream = new CryptoStream(fsread, transform, CryptoStreamMode.Read))
                    {
                        using (BinaryWriter fsDecrypted = new BinaryWriter(File.Open(sOutputFilename, FileMode.Create)))
                        {
                            byte[] buffer = new byte[1024];
                            var read = cryptostream.Read(buffer, 0, buffer.Length);
                            while (read > 0)
                            {
                                fsDecrypted.Write(buffer, 0, read);
                                read = cryptostream.Read(buffer, 0, buffer.Length);
                            }

                            fsDecrypted.Flush();
                            cryptostream.Flush();
                        }
                    }
                }
            }
        }
    } 
```

# database-design - 如何想出合适的餐桌设计？

> ID：13986880
> 
> 赞同：0
> 
> 时间：2012-12-21T08:48:22.677
> 
> 标签：database-design

我有一个问题如下所示：

```
1.Are you a good boy ? 
  ans:Yes/No
 OR,Are you a good girl?
  ans:Yes/No
 Or,Are you a good father?
  ans:Yes/No 
```

如果对上述三个问题中的任何一个的回答是“是”，请询问

```
 1.1 What is your age?ans:textbox
      OR
      What is your birth date?ans:textbox

   1.1.1 Where were you born?ans:textbox //this is the question inside the sub-question 
```

现在在问题 (1) 中实际上有 3 个问题，但它们的所有 id 都是 1....并且 (1.1) 是问题编号 (1) 的子问题，它实际上由两个具有相同 id 的问题组成（这里是可以是任何数字，不一定是 1.1)。

1.1.1是子问题里面的问题。

现在我如何在 sql server 中创建一个包含上述所有数据的表，以便回答上述问题将适当地插入到表中。如果解决方案被规范化而不是非规范化，将不胜感激。

如果答案表显示了所有要插入的选项，例如是/否，描述性答案，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:45:02.700

This is slightly confusing and I am not sure about your current schema but if the questions are predefined from a set values, this schema is the one to go with.

```
Questions
=================
questionID
optionID
subID            (0 if not a subquestion)
Question
Composite Primary Key (questionID, subID)

Answers
=================
userID
questionID
optionID
subID
answer
Composite Primary Key (questionID, subID) 
```

another approach can be..

```
Questions
===============
questionID      //Unique question ID
questionRank    //On which question number it is available i.e. 1 for "Are you a good..."
subCategory     //0 if main question, sub ID number if a sub question
question        //Actual question

UserAnswers
===============
userID
questionID
answer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:19:37.927

假设表格是问题。那里有一个类型列。说主要问题你插入 1 和分支你插入 2。如果你谈论主键，它们不能有相同的 id。您可以做一件事，即根据需要显示表格中的项目。字段可能是这样的。1\. ID，2\. 类型，3\. 问题。安息你的心愿

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:26:03.057

[您可以按照Bhrugesh Patel](https://stackoverflow.com/questions/13986880/how-to-come-up-with-a-suitable-table-design/13992165#13992165)的建议存储问题和答案。

为了对哪些问题应该遵循哪些其他问题进行建模，您需要一个[状态转换表](http://en.wikipedia.org/wiki/State_transition_table)。

> 状态转换表是一个表格，显示基于当前状态和其他输入，有限半自动机或有限状态机将移动到什么状态（或在非确定性有限自动机的情况下的状态）。

# html - OS X 中的 Safari – 带有边界半径的奇怪错误

> ID：13986881
> 
> 赞同：11
> 
> 时间：2012-12-21T08:48:28.450
> 
> 标签：html, css, safari

我在 Mac OS X 的 Safari 中遇到了一些非常奇怪的边界半径问题。看看这个 jsFiddle：http: [//jsfiddle.net/sXxtU/1/](http://jsfiddle.net/sXxtU/1/)

**Safari Mac OS X：（**
![在此处输入图像描述](../Images/7a6102d8818e4ea76b1a46cef940e877.png)
左上角和白色竖线）

**Chrome Mac OS X：（**
![在此处输入图像描述](../Images/cd187880b6bbae47b01ed8ce40e8b1ce.png)
非常好）

**Safari iOS 6.0**
![在此处输入图像描述](../Images/49e3b60604455a6da7bc4f2c08f5d30d.png)
（也很好）。

现在，在此示例中，我使用的是`border-radius: 5px 5px 0 0;`，即仅将其应用于顶角。但是，如果我选择绕过所有角落——我会得到这个（在 OS X 的 Safari 中）：

![在此处输入图像描述](../Images/8a52c918d966292f7588a1d3a0e1c021.png)

这是一个已知的错误？有什么办法可以解决这个问题吗？我猜这是由于一些剪辑问题，但无论我如何尝试应用不同的修复 - 我都无法让它看起来很正确。

**编辑**
我应该指出这是在 Safari 6.0.2 中。还没有机会测试其他版本。

**编辑 2**
尝试添加`border: 1px solid transparent;`，它看起来好多了。但是，如果我使用边框颜色（如#fff），我仍然会遇到一些剪裁问题（现在在右上角......？）。仍然对了解这里发生的事情非常感兴趣。

**编辑 3**
用户 Sparky 指出我的 HTML 无效（在 ul 元素中有一个 div 元素）——但是，我已经确认这与我遇到的问题无关。

**编辑 4**
一直在测试 Safari 6.0.2 一些旧版本的 OS X，而这个问题似乎只发生在 10.8.2 中。很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:57:47.177

这实际上是真的，与代码的编写方式无关，这是一个浏览器错误。

如果您放大存在此错误的页面，您将看到渲染将正确显示某些缩放级别。

仍然找不到解决此问题的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T06:20:47.640

发生这种情况是因为您在无序列表中插入了一个 div clear 。您的列表项应设置为 display: inline-block 并且您的 ul 可以对其进行清除修复以保持其适当的高度，即使您的列表项向左浮动。

我在 6.0 和 6.0.2 中对此进行了测试

这是您的 jsfiddle 的一个分支，并进行了一些调整。

[http://jsfiddle.net/rossedman425/VTySS/1/](http://jsfiddle.net/rossedman425/VTySS/1/)

HTML：

```
<div class="container">
<div class="pill">
    <ul class="cf">
        <li><a href="#">Item 1</a></li>
        <li><a href="#">Item 1</a></li>
    </ul>
</div> 
```

CSS：

```
.container {
    padding: 20px;
}
.pill {
    background-color: #00a38f;
    border-radius: 5px 5px 0 0;
}
ul {
    padding: 13px;
    list-style: none;
}
li {
    float:left;
    margin-right: 20px;
    display: inline-block;
}

.cf:before,
.cf:after {
    content: " ";
    display: table;
}
.cf:after {
    clear: both;
}
.cf {
    *zoom: 1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T03:11:39.787

也许那个版本的 OS X 正在渲染`UL`具有某种背景属性的 。它只是在黑暗中拍摄，但也许可以尝试`background: transparent;`一下`UL`。或者，如果它可以达到相同的目的，请尝试将背景颜色和边框半径移动到`UL`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T21:58:51.460

我无法在我的 Safari 版本中重现您的问题。

但是，我注意到您的 HTML 无效。 [根据 W3C 规范](http://www.w3.org/TR/REC-html40/struct/lists.html#h-10.2)和[在线 HTML 验证器工具](http://validator.w3.org/check?uri=http://jsfiddle.net/sXxtU/1/show/&charset=%28detect%20automatically%29&doctype=Inline&group=0)，`<ul>`元素只能包含`<li>`作为*直接*后代的元素。

您的 HTML 代码无效：

```
<ul>
    <li><a href="#">Item 1</a></li>
    <li><a href="#">Item 1</a></li>
    <div class="clear"></div> <!-- this line is invalid HTML -->
</ul> 
```

`<div class="clear"></div>`从中删除`<ul>`，看看是否可以清除它...

```
<ul>
    <li><a href="#">Item 1</a></li>
    <li><a href="#">Item 1</a></li>
</ul> 
```

您可以使用`overflow:`on`<ul>`来强制它扩展以包含其子项，这完全消除了对 clearing 的需要`div`。

```
ul {
    overflow: auto;
} 
```

[http://jsfiddle.net/sXxtU/7/](http://jsfiddle.net/sXxtU/7/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T17:10:01.197

我在 FF20 上遇到了类似的问题，但似乎只是我不小心放大了页面。将缩放重置为 0 删除了该线。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-29T01:20:06.890

也许使用偶数而不是奇数会起作用： Safari 6.0.5 on ML

就我而言，我测试了以下内容：

```
border-radius: 4px; /* HAPPY */
border-radius: 5px; /* SAD */
border-radius: 6px; /* HAPPY */ 
```

这似乎是一个浏览器错误。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-12-21T17:14:15.437

尝试以下方法调整边框半径：

```
border-top-right-radius:10px;
-webkit-top-right-border-radius:10px;
border-top-left-radius:10px;
-webkit-top-left-border-radius:10px; 
```

# c# - 将图像缩放到 1600 像素 X 700 像素

> ID：13986883
> 
> 赞同：0
> 
> 时间：2012-12-21T08:48:40.400
> 
> 标签：c#, image

当用户上传任何图像时，我们可以将其缩放到 1600 X 700 吗？

我正在使用下面的代码来缩放 1996 X 1442 的图像，但它永远不会缩放到 1600 X 700。

有没有更好的方法或其他方法来实现它？

```
private static Image resizeImage(Image imgToResize, Size size)
        {
            int sourceWidth = imgToResize.Width;
            int sourceHeight = imgToResize.Height;

            float nPercent = 0;
            float nPercentW = 0;
            float nPercentH = 0;

            nPercentW = ((float)size.Width / (float)sourceWidth);
            nPercentH = ((float)size.Height / (float)sourceHeight);

            if (nPercentH < nPercentW)
                nPercent = nPercentH;
            else
                nPercent = nPercentW;

            int destWidth = (int)(sourceWidth * nPercent);
            int destHeight = (int)(sourceHeight * nPercent);

            Bitmap b = new Bitmap(destWidth, destHeight);
            Graphics g = Graphics.FromImage((Image)b);
            g.InterpolationMode = InterpolationMode.HighQualityBicubic;

            g.DrawImage(imgToResize, 0, 0, destWidth, destHeight);
            g.Dispose();

            return (Image)b;
        } 
```

如果您查看下面的评论，他们说如果不丢失宽高比就无法存档，但如果我看到 HERO 图像，`airbnb`他们有 1600 X 700 的图像......

所以我认为这是可能的，但我不知道如何实现它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:51:52.157

当然不是，因为 1600 x 700 的纵横比 (0.4375) 与 1996 x 1442 (0.7724) 不同。你这样做的方式是缩放保持纵横比，所以你永远不会从 1996 x 1442 达到 1600 x 700。

你可以：

1.  缩放图像，使较长的角为 1600 长，然后剪下尺寸为 1600 x 700 的相关部分（保持纵横比）。
2.  将图像缩放到 1600 x 700，可能会在垂直“挤压”时扭曲图像。

代码中的另一个问题是舍入问题。

```
int destWidth = (int)...;
int destHeight = (int)...; 
```

简单地去掉小数位。即使计算结果是 699.9，`destWidth`也会是 699。

您可能想`Math.Round`改用它，这将按预期将 699.9 舍入到 700。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T08:59:37.827

嗯，其实是的！这个世界上几乎没有什么是不可能的。只是尝试搜索有关“[缝雕](http://en.wikipedia.org/wiki/Seam_carving)”的信息。抱歉，这里没有代码，因为我对这些算法不太熟悉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T08:54:30.570

我在几个方面调整了你的方法：

1.  它现在根据*较大*的比例进行缩放，而不是*较小*的比例，因此您最终将修剪图像上的位而不是留下白色（？）信箱。（这只是`<`vs `>`，所以很容易改变。）
2.  对于应该相等的一侧，这可以确保它是相等的，而不是缩放和舍入，并希望你最终不会有一个像素差异。
3.  如果纵横比不匹配，它会将绘制的图像居中，`g`因此您最终会得到等量的修剪左右或顶部和底部。（在不知道原始图像的比例是否正确的情况下，您必须以*某种方式*决定要修剪图像的哪些位。）

试一试，看看你是否喜欢结果。

```
private static Image resizeImage(Image imgToResize, Size size)
{
    int sourceWidth = imgToResize.Width;
    int sourceHeight = imgToResize.Height;

    double wRatio = (double)size.Width / sourceWidth;
    double hRatio = (double)size.Height / sourceHeight;

    int destWidth, destHeight;
    float top, left;

    if (wRatio > hRatio) // reverse for white bars rather than trimming
    {
        destWidth = size.Width;
        destHeight = (int)Math.Ceiling(sourceHeight * wRatio);
        left = 0;
        top = (destHeight - size.Height) / 2f;
    }
    else
    {
        destHeight = size.Height;
        destWidth = (int)Math.Ceiling(sourceWidth * hRatio);
        top = 0;
        left = (destWidth - size.Width) / 2f;
    }

    Bitmap b = new Bitmap(size.Width, size.Height);
    Graphics g = Graphics.FromImage((Image)b);
    g.InterpolationMode = InterpolationMode.HighQualityBicubic;

    g.DrawImage(imgToResize, left, top, destWidth, destHeight);
    g.Dispose();

    return (Image)b;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-21T08:55:52.613

此代码保留原始图像的[纵横比](http://en.wikipedia.org/wiki/Aspect_ratio_%28image%29)。如果保留它不重要，那么您可以摆脱比率计算部分并直接创建一个具有提供大小的位图对象。

```
private static Image resizeImage(Image imgToResize, Size size)
{
    Bitmap b = new Bitmap(size.Width, size.Height);
    Graphics g = Graphics.FromImage((Image)b);
    g.InterpolationMode = InterpolationMode.HighQualityBicubic;

    g.DrawImage(imgToResize, 0, 0, destWidth, destHeight);
    g.Dispose();

    return (Image)b;
} 
```

# python - 中断并继续功能

> ID：13986884
> 
> 赞同：19
> 
> 时间：2012-12-21T08:48:43.020
> 
> 标签：python, function, loops, break, continue

```
def funcA(i):
   if i%3==0:
      print "Oh! No!",
      print i
      break

for i in range(100):
   funcA(i)
   print "Pass",
   print i 
```

我知道上面的脚本不起作用。那么，如果我需要将带有 break 或 continue 的函数放入循环中，我该如何编写？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-21T08:52:17.197

函数不能在调用它的代码中导致中断或继续。中断/继续必须逐字出现在循环内。您的选择是：

1.  从 funcA 返回一个值并用它来决定是否中断
2.  在 funcA 中引发异常并在调用代码（或调用链更高的位置）中捕获它
3.  编写一个封装中断逻辑的生成器并对其进行迭代，而不是在`range`

#3 我的意思是这样的：

```
def gen(base):
    for item in base:
        if item%3 == 0:
           break
        yield i

for i in gen(range(1, 100)):
    print "Pass," i 
```

这允许您通过将它们分组到基于“基本”迭代器（在本例中为范围）的生成器中来放置条件中断。然后你迭代这个生成器而不是范围本身，你就会得到破坏行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T09:18:45.930

阐述 BrenBarns 的答案：`break` *幸运*的是不会传播。`break`是打破当前循环，周期。如果你想传播一个事件，那么你应该`raise`例外。虽然，引发异常以打破循环是一种非常丑陋的打破循环的方式，也是一种打破代码的好方法。

[亲](http://en.wikipedia.org/wiki/KISS_principle)！最简单的方法是直接在循环中检查条件

```
def my_condition(x):
  return x == 4

for i in xrange(100):
  if my_condition(i): break
  print i 
```

如果出于某种原因，你想传播一个异常，那么你可以像这样使用它

```
# exception example
for i in xrange(100):
  if i == 4: raise Exception("Die!")
  print i 
```

如前所述，这是一个*非常丑陋*的设计。想象一下，您忘记捕获此异常，或者您将其类型从`Exception`to`MyBreakException`更改为并忘记`try/except`在代码的较高部分更改它...

生成器示例有其优点，它使您的代码更具[功能性](http://en.wikipedia.org/wiki/Functional_programming)（我个人很喜欢）

```
# generator example
def conditional_generator(n, condition):
  for i in xrange(n):
    if condition(i):
      break
    else:
      yield i

for i in conditional_generator( 100, my_condition ):
  print i 
```

...类似于[`takewhile`](http://docs.python.org/2/library/itertools.html#itertools.takewhile%22)eumiro 提到的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T08:51:02.563

```
def funcA(i):
   if i%3==0:
      print "Oh! No!",
      print i
      return True
   else:
      return False

for i in range(100):
   if funcA(i):
       break
   print "Pass",
   print i 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T08:51:33.147

Break 不会在函数之间传播，您需要将其直接放在循环中的某个地方。

# javascript - NicEdit 插入多个 ` `标签当向多行文本添加“段落”格式时

> ID：13986892
> 
> 赞同：2
> 
> 时间：2012-12-21T08:49:31.033
> 
> 标签：javascript, jquery, jquery-plugins, nicedit

NicEditor 插入多个`<p>`标签 将“段落”格式添加到多行文本而不是一组`<P>`标签时.. 示例以下两行文本

这是一些虚拟文本
这是一些虚拟文本

关于“段落”格式的选择和应用被转换为
`<p>this is some dummy text</p>`
`<p>this is some dummy text</p>`

而不是正确地作为
`<p>this is some dummy text`
`this is some dummy text</p>`

请帮忙..

# iphone - 在应用内购买 ios 的音乐内容

> ID：13986899
> 
> 赞同：2
> 
> 时间：2012-12-21T08:49:57.410
> 
> 标签：iphone, ios, ios5, in-app-purchase, itunes

我正在为乐队编写应用程序。必须可以从应用程序中购买他们的音乐。以下是我正在考虑的选项：

1) 购买音乐作为应用内购买。不是很有用，因为 AFAIK 音乐文件无法导出到 ipod 音乐库，只能在应用程序中播放。我可以通过给用户一个 URL 来解决这个问题，然后他们可以使用该 URL 自己下载歌曲，但苹果会阻止这种方法 - 它是否被视为与 iTunes 音乐商店竞争？

2) 只需链接到 iTunes 商店中的专辑。不理想，因为它将用户带出应用程序。如果我确实走这条路，应用程序是否有可能确认购买已完成，或者至少让商店在购买完成后将我的应用程序带到前台？或者，我想我可以在我的应用程序中按艺术家搜索 iPod 库，以确定他们是否购买了乐队的东西。

3）还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:55:10.697

链接到 iTunes 似乎是这里最好的一步，尤其是对于用户而言，因为这允许他们跨设备使用曲目，并且在盗版限制方面让您的生活更加轻松（链接可以非常容易地共享）并且也不会小便苹果关了。

至于确认购买，我真的不知道，我想通过图书馆搜索可以工作，但他们可能还没有下载曲目等。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-21T08:54:18.707

App Store Review Guidelines 第 2.21 条规定，仅歌曲的应用程序应提交到 iTunes 商店。

# java - 渲染一个带纹理的正方形 OK。移动我的对象使其变形并看起来好像它被旋转了

> ID：13986901
> 
> 赞同：1
> 
> 时间：2012-12-21T08:50:06.153
> 
> 标签：java, android, matrix, transformation, perspective

这有什么明显的错误吗？我的正方形渲染正常，但是当我尝试向左/右/上/下/移动 9it 时，它的边缘会伸展到无限远，就好像使用了一些超高 FOV 一样……这不是……

```
private float[] mMVPMatrix = new float[16];
private float[] mProjMatrix = new float[16];
private float[] mVMatrix = new float[16];

@Override
public void onSurfaceChanged(GL10 glUnused, int width, int height) 
{
    // Set the OpenGL viewport to the same size as the surface.
    GLES20.glViewport(0, 0, width, height);

      float ratio = (float) width / height;

      float PI = 3.1428f;
      float near = 1.0f;
      float far  = 100.0f;
      float fov = 45; // degrees, try also 45, or different number if you like
      float top = (float)(Math.tan(fov * PI / 360.0f) * near);
      float bottom = -top;
      float left = ratio * bottom;
      float right = ratio * top;

      Matrix.frustumM(mProjMatrix, 0, left*0.1f, right*0.1f, top*0.1f, bottom*0.1f, near, far);
      //Matrix.orthoM(mProjMatrix, 0, -ratio, ratio, -1, 1, 0.5f, 4);

      Matrix.setLookAtM(mVMatrix, 0,
              0f, 0f,-150f,
              0f, 0f, 0f,
              0f, 1.0f, 0.0f);
}   

@Override
public void onDrawFrame(GL10 glUnused) 
{
    GLES20.glClear(GLES20.GL_DEPTH_BUFFER_BIT | GLES20.GL_COLOR_BUFFER_BIT);                    

    // Do a complete rotation every 10 seconds.
    long time = SystemClock.uptimeMillis() % 10000L;
    float angleInDegrees = (360.0f / 10000.0f) * ((int) time);

    if(m_nPoints.size()>0)
    {
        m_fX = m_nPoints.get(0).x;
        m_fY = m_nPoints.get(0).y;
        m_nPoints.remove(0);
    }

    Matrix.setIdentityM(mModelMatrix, 0);
    Matrix.rotateM(mModelMatrix, 0, angleInDegrees, 0.0f, 0.0f, 1.0f);
    Matrix.translateM(mModelMatrix,0,m_fX,m_fY, -12.0f);

    Matrix.setIdentityM(mModelMatrix, 0);
    Matrix.translateM(mModelMatrix,0,m_fX,m_fY, 0.0f);

    Matrix.multiplyMM(mMVPMatrix, 0, mVMatrix, 0, mModelMatrix, 0);
    Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mMVPMatrix, 0);

    m_nSquare.draw(mMVPMatrix);//mModelMatrix);
}   

public void draw(float[] mvpMatrix) {

// Add program to OpenGL environment
GLES20.glUseProgram(mProgram);
mPositionHandle = GLES20.glGetAttribLocation(mProgram, "vPosition");    // get handle to vertex shader's vPosition member
GLES20.glEnableVertexAttribArray(mPositionHandle);    //Enable a handle to the triangle vertices
GLES20.glVertexAttribPointer(mPositionHandle, COORDS_PER_VERTEX,GLES20.GL_FLOAT, false,vertexStride, vertexBuffer);    // Prepare the triangle coordinate data

textureCoordinateHandle = GLES20.glGetAttribLocation(mProgram, "a_TexCoordinate");
GLES20.glVertexAttribPointer(textureCoordinateHandle, 2, GLES20.GL_FLOAT, false, 0, textureBuffer);
GLES20.glEnableVertexAttribArray(textureCoordinateHandle);

textureUniformHandle = GLES20.glGetUniformLocation(mProgram, "u_Texture");
OpenGLESRenderer.checkGlError("glGetUniformLocation");
GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureDataHandle);
GLES20.glUniform1i(textureUniformHandle, 0);      

mMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix");//get handle to shape's transformation matrix
OpenGLESRenderer.checkGlError("glGetUniformLocation");
GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mvpMatrix, 0);//Apply the projection and view transformation
OpenGLESRenderer.checkGlError("glUniformMatrix4fv");
GLES20.glDrawElements(GLES20.GL_TRIANGLES, drawOrder.length,GLES20.GL_UNSIGNED_SHORT, drawListBuffer);//Draw the square
GLES20.glDisableVertexAttribArray(mPositionHandle);// Disable vertex array
}

private final String vertexShaderCode =
// This matrix member variable provides a hook to manipulate
// the coordinates of the objects that use this vertex shader
"uniform mat4 uMVPMatrix;" +

"attribute vec4 vPosition;" +
"attribute vec2 a_TexCoordinate;" +

"varying vec2 v_TexCoordinate;" +

"void main() {" +
// the matrix must be included as a modifier of gl_Position
"  gl_Position = vPosition * uMVPMatrix;" +
"  v_TexCoordinate = a_TexCoordinate;" +
"}";

private final String fragmentShaderCode =
"precision mediump float;" +

"uniform sampler2D u_Texture;" +

"varying vec2 v_TexCoordinate;" +

"void main() {" +
"  gl_FragColor = texture2D(u_Texture, v_TexCoordinate);" +
"}"; 
```

# iphone - 是否可以让 iPhone 识别属于网页上电话号码的联系人姓名？

> ID：13986902
> 
> 赞同：2
> 
> 时间：2012-12-21T08:50:09.673
> 
> 标签：iphone, html

我正在构建一个包含联系人及其电话号码的简单网页。当从 iPhone 访问页面时，iPhone 会识别号码，当用户触摸电话号码时，就会开始通话。当通话结束并且用户想要将号码保存在电话簿中（建立新联系人）时，我希望将联系人的姓名预先填写到电话簿条目的姓名字段中。

是否可以让 iPhone 识别网页上属于电话号码的名称？是否有元标记或 XML 标记让 iPhone 从网页中识别名称？

最好的问候威尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:26:51.990

不幸的是没有。最好的方法是提供 vCard，但出于安全原因，Safari 不支持它们。我发现的最接近的是[这个问题](https://stackoverflow.com/questions/1892373/iphone-how-to-get-safari-to-recognize-a-vcard)，但是那里的壁橱解决方案涉及返回一个嵌入了 vCard 的 ics (iCal) 文件。这并不理想。

总而言之，目前没有办法做到这一点。这个问题也有很多很好的信息：

[如何将联系人从网页添加到 iPhone 的通讯录？](https://stackoverflow.com/questions/1773876/how-to-add-a-contact-to-the-iphones-address-book-from-a-web-page)

如果您正在构建网页以将其嵌入到本机应用程序中，那么还有其他选择，但听起来情况并非如此。

# android - Android：指向内容提供者的html音频标签

> ID：13986904
> 
> 赞同：1
> 
> 时间：2012-12-21T08:50:17.663
> 
> 标签：android

我正在使用打包的网络，当我尝试使用音频标签时遇到问题。

在我的代码中，我有一个来自内容提供商的 WebView：

wv.loadUrl("content://content_provider/web_page");

在内容提供者中，我重写了“openAssetFile”方法，以便为 WebView 提供所需的文件。但是当我使用标签时，程序从不要求文件。

我还尝试使用“loadDataWithBaseURL”方法插入 html 代码，其中我使用“content://”自定义协议对路径进行硬编码，但它不起作用。

这很奇怪，因为当我使用视频标签时，它可以正常请求文件。任何其他内容也可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T10:36:04.947

虽然这是一个老问题，但我在这里发布了一个解决方案以供参考，因为我在其他地方找不到答案。

出于某种原因，从 webView（使用 MediaPlayer）对 mp3 文件的内容提供程序调用不会调用 openAssetFile，而是调用 openFile。（不确定提供商是否处理此路由）。这个问题似乎已在 4.2+ 中修复

对我有用的旧版本的解决方案是在您的内容提供者中覆盖 openFile ：

```
@Override
public AssetFileDescriptor openAssetFile(Uri uri, String mode){
    //your asset reading code that works for other file types here.
}
@Override
public ParcelFileDescriptor openFile(Uri uri, String mode){
    try {
        AssetFileDescriptor afd = openAssetFile(uri, mode);
        return afd.getParcelFileDescriptor();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
    return null;
} 
```

这适用于 Android 4.04 和 4.1

# php - 带有表单数据的 Ajax 复选框

> ID：13986906
> 
> 赞同：0
> 
> 时间：2012-12-21T08:50:21.683
> 
> 标签：php, ajax, jquery

我真的很困惑我是如何管理这些事情的。请查看附件图片。请参阅右侧面板区域。

从第一页开始，包名来自最后一页；假设page1.php。现在假设这个附加的图像是 page2.php。我能够从左侧获取选定的复选框值，并且它在右侧发布。看到我已经检查了视频复选框。我已经使用了 jquery。

问题 1 如果我刷新页面值会消失，但包值除外。无论用户检查什么，我都希望右侧面板中的所有复选框值并将其发布到 page3.php 以供进一步使用。我认为 jquery 不会这样做。我使用了 ajax 帖子但不能能够从下面的代码中获取值。请帮助他解决这个问题。

图片链接 [http://s7.postimage.org/3zbf1ucwb/image.jpg](http://s7.postimage.org/3zbf1ucwb/image.jpg)

```
 function refreshPrices() {

       var beg=<?php echo isset($beg) ? $beg : 0 ?>;
       var inte=<?php echo isset($int) ? $int : 0 ?>;
       var advn=<?php echo isset($adv) ? $adv : 0 ?>;
       var currentTotalValue = 0;
        currentTotalValue = currentTotalValue + beg + inte + advn;
        $("#results div").each(function() {
            if (!isNaN(parseInt($(this).find("span").text().substring(1)))) {
                currentTotalValue += parseInt($(this).find("span").text().substring(1));
            }
        });

        $("#totalValue").text("$" + currentTotalValue)

    }

    $(document).ready(function() {

        $('#1').click(function() {
            //var row = $(this);
            if (($(this).attr('checked')) == 'checked') {
                $('#result').append("-PDF Document <html><span style=float:right>$100</span></html>");
            }
            else {
                $('#result').text("");
            }

            refreshPrices()

        });

        $('#2').click(function() {
            if (($(this).attr('checked')) == 'checked') {
                $('#result2').append("-Video <html><span style=float:right>$200</span></html> ");
            }
            else {
                $('#result2').text("");
            }

            refreshPrices()
        });
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:55:25.977

`$(this).attr('checked')`返回真或假，而不是“检查”，所以你需要做：

```
if ( $(this).prop(':checked') ) { --- } 
```

要不就

```
if ( this.checked ) {
    $('#result').append("-PDF Document <html><span style=float:right>$100</span></html>");
} 
```

此外，您不应该只使用数字作为 ID，将其更改为`#a1`等，并且您确实意识到`<html>`标签是文档的开始和结束，并且将它们附加到 DOM 内的元素确实看起来很棒主意。

# xml - 由于 XML，R 不会停止抓取内存/RAM

> ID：13986907
> 
> 赞同：4
> 
> 时间：2012-12-21T08:50:24.127
> 
> 标签：xml, r, loops

我有一个如下所示的双循环 **，问题是 R (2.15.2) 正在使用越来越多的内存**，我不明白为什么。

虽然我知道这必须在内部循环中发生，因为`rbind()`我在那里做，但我不明白为什么当外部循环的新循环开始并且实际上对象（ 'xmlCatcher' ）被重用时，R 一直在抢内存：

```
# !!!BEWARE this example creates a lot of files (n=1000)!!!!

require(XML)

chunk <- function(x, chunksize){
        # source: http://stackoverflow.com/a/3321659/1144966
        x2 <- seq_along(x)
        split(x, ceiling(x2/chunksize))
    }

chunky <- chunk(paste("test",1:1000,".xml",sep=""),100)

for(i in 1:1000){
writeLines(c(paste('<?xml version="1.0"?>\n <note>\n    <to>Tove</to>\n    <nr>',i,'</nr>\n    <from>Jani</from>\n    <heading>Reminder</heading>\n    ',sep=""), paste(rep('<body>Do not forget me this weekend!</body>\n',sample(1:10, 1)),sep="" ) , ' </note>')
,paste("test",i,".xml",sep=""))
}

for(k in 1:length(chunky)){
gc()
print(chunky[[k]])
xmlCatcher <- NULL

for(i in 1:length(chunky[[k]])){
    filename    <- chunky[[k]][i]
    xml         <- xmlTreeParse(filename)
    xml         <- xmlRoot(xml)
    result      <- sapply(getNodeSet(xml,"//body"), xmlValue)
    id          <- sapply(getNodeSet(xml,"//nr"), xmlValue)
    dummy       <- cbind(id,result)
    xmlCatcher  <- rbind(xmlCatcher,dummy)
    }
save(xmlCatcher,file=paste("xmlCatcher",k,".RData"))
} 
```

有人知道为什么会发生这种行为吗？请注意，所有对象（如“xmlCatcher”）在每个周期都被重用，因此我假设使用的 RAM 在第一个“块”周期后应该保持不变。

*   垃圾收集不会改变任何事情。
*   不使用 rbind 不会改变任何事情。
*   使用更少的 xml 函数实际上会减少内存占用 - 但是为什么呢？

这是一个错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T12:00:13.890

你对重用内存的理解是wong。

当您创建新的 DummyCatcher 时，旧的 DummyCatcher 不再被引用，然后成为垃圾收集的候选者，这将在某个时候发生。

您不是在重用内存，而是在创建一个新对象并放弃旧对象。

垃圾收集将释放内存。

另外，我建议您查看 Rprofmem 来分析您的内存使用情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T10:28:36.713

[在本篇](http://www.burns-stat.com/pages/Tutor/R_inferno.pdf)的第2章中，`rbind`作为贪吃者的一般手段进行了讨论。

你可以避免使用`rbind`inside 循环，

```
my.list <- vector('list', chunk[k])
for(i in 1:chunk[k]) {
   dummy <- dummy + 1
   my.list[[i]] <- data.frame(dummy)
}
DummyCatcher  <- do.call('rbind', my.list) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T19:30:27.727

**它的 XML 包很愚蠢！**

The answer to this question came by **Milan Bouchet-Valat [here](http://r.789695.n4.nabble.com/Memory-filling-up-while-looping-tp4653682p4653749.html)** who proposed I should try to use the `useInternalNodes=TRUE`-option for `xmlTreeParse`. That stopped the RAM grabbing although there is also the possibility to manually handle memory-freeing. For further reading see: [here](http://www.omegahat.org/RSXML/MemoryManagement.html).

# css - CSS 属性的浮点值对性能的影响

> ID：13986910
> 
> 赞同：10
> 
> 时间：2012-12-21T08:50:26.513
> 
> 标签：css, performance

是否有任何已知问题，在 CSS 属性中使用浮点值会对渲染性能产生任何性能影响。尤其是在移动设备上？

在我的例子中，我们使用 JavaScript 设置边框的宽度，当我们使用浮点值时，在 iPhone4 上似乎需要更长的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:17:54.837

如果是 CSS`width`属性中的百分比问题，那么浮点值会受到尊重，当然会有轻微的性能下降，但这很大程度上取决于浏览器本身。例如`width`属性中的像素是四舍五入的，但没有定义它们是否实际四舍五入到最近的地板或天花板数字。然而，当对宽度使用分数（浮动）像素值时，IE9 和 FF4 似乎会四舍五入到最接近的像素，而 Opera 11、Chrome 和 Safari 会截断小数位。

即使在`width`绘制页面时对 CSS 编号进行了四舍五入，完整的值也会保留在内存中并用于后续子计算。例如，如果您的 100.4999 像素的 div 框绘制为 100 像素，那么宽度为 50% 的子框将被计算为 0.5*100.4999 而不是 0.5*100。以此类推到更深层次。

在深度嵌套的网格布局系统中，父级宽度为`em`，子级为`%`，并且上游最多包含四个小数点会产生明显的影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T09:18:12.683

我会说不，应该没有问题。至少如果这测试了我认为它的作用：

[http://jsperf.com/float-css-props](http://jsperf.com/float-css-props)

# javascript - youtube 视频从未开始播放到播放 5 秒时如何收听？

> ID：13986911
> 
> 赞同：0
> 
> 时间：2012-12-21T08:50:26.340
> 
> 标签：javascript, youtube, youtube-api

我有以下代码，当视频播放 5 秒时，它会打印到控制台。但是，如果用户暂停视频然后再次按播放，它会打印到控制台。

当状态从未启动到播放 5 秒时，如何仅打印到控制台？

```
function onYouTubePlayerReady(playerId) {
     ytplayer = document.getElementById("myytplayer");
    ytplayer.addEventListener("onStateChange", "onytplayerStateChange");
}

function onytplayerStateChange(newState) {
    if (newState == 1) {
        setTimeout(function(){
            current = ytplayer.getCurrentTime();
            console.log(current);
        }, 5000);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:29:23.460

`onStateChange`处理程序会因各种播放器状态更改而被触发，而不仅仅是“播放”事件：https [://developers.google.com/youtube/js_api_reference#onStateChange](https://developers.google.com/youtube/js_api_reference#onStateChange)

您需要修改您的`onytplayerStateChange()`函数以侦听“暂停”/“缓冲”事件并在触发这些事件时暂停倒计时，并且仅在触发下一个“播放”事件时重新启动它。

# php - 用 PHP 复制和压缩的最佳方法是什么？

> ID：13986913
> 
> 赞同：0
> 
> 时间：2012-12-21T08:50:37.223
> 
> 标签：php, copy, zip

我已经构建了一个插件，它复制了一系列目录，然后将它们压缩。我尝试了许多不同的 PHP 函数来实现这一点，发现[`stream_copy_to_stream()`](http://php.net/stream_copy_to_stream)是最快的。

也就是说，该功能仍然可以更快；特别是复制，因为压缩过程似乎不需要太长时间。

有没有其他选择？我试过了`copy()`，`php_exec()`但`stream_copy_to_stream()`我相信可能有更快的方法。

在 OOP 中重写会提高性能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:13:52.783

你可以试试 ：

```
<?php
  exec("unzip file.zip"); 
```

对于 .tar.gz 文件：

```
<?php
  exec("tar xzf file.tar.gz"); 
```

我认为，控制台命令比 php 函数快..

更多信息 ：

[http://linux.about.com/od/commands/l/blcmdl1_unzip.htm](http://linux.about.com/od/commands/l/blcmdl1_unzip.htm)

[https://askubuntu.com/questions/25961/how-to-install-a-tar-gz-or-tar-bz2-file](https://askubuntu.com/questions/25961/how-to-install-a-tar-gz-or-tar-bz2-file)

# iphone - 如何在您的 Facebook 墙贴中标记朋友...？

> ID：13986919
> 
> 赞同：0
> 
> 时间：2012-12-21T08:50:58.460
> 
> 标签：iphone, objective-c, ios, facebook, facebook-graph-api

我正在尝试在我的墙帖中标记我的一些朋友，并且我正在发送以下参数，但是这个帖子到我的墙我提供的 FB id 没有附加到帖子...

```
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:

                               @"Test 2  ",@"message",
                               @"100004311843201 , 1039844409", @"to",
                               @"http://www.google.com", @"link",
                               @"Test", @"name",
                               nil];

[self.appDelegate.facebook requestWithGraphPath:@"me/feed" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T10:53:19.043

要在您的 fb 状态中标记朋友..您需要使用 FBFriendPickerViewController 的朋友的“facebook id”和使用 FBPlacePickerViewController 的“place id”。以下代码将为您提供帮助。

```
 NSString *apiPath = nil;

apiPath = @"me/feed";

if(![self.selectedPlaceID isEqualToString:@""]) {

    [params setObject:_selectedPlaceID forKey:@"place"];

}

NSString *tag  = nil;
if(mSelectedFriends != nil){
    for (NSDictionary *user in mSelectedFriends) {
        tag = [[NSString alloc] initWithFormat:@"%@",[user objectForKey:@"id"] ];

        [tags addObject:tag];

    }

    NSString *friendIdsSeparation=[tags componentsJoinedByString:@","];
    NSString *friendIds = [[NSString alloc] initWithFormat:@"[%@]",friendIdsSeparation ];

    [params setObject:friendIds forKey:@"tags"];
}

FBRequest *request = [[[FBRequest alloc] initWithSession:_fbSession graphPath:apiPath parameters:params HTTPMethod:@"POST"] autorelease];

[request startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    [SVProgressHUD dismiss];

    if (error) {
        NSLog(@"Error ===== %@",error.description);
        if (_delegate != nil) {
            [_delegate facebookConnectFail:error requestType:FBRequestTypePostOnWall];
        }else{
            NSLog(@"Error ===== %@",error.description);
        }

    }else{

        if (_delegate != nil) {
            [_delegate faceboookConnectSuccess:self requestType:FBRequestTypePostOnWall];
        }
    } 
```

# xml - 如何将带有格式的文本导出到我从 powerpoint 导出的 xml 文件中？

> ID：13986922
> 
> 赞同：0
> 
> 时间：2012-12-21T08:51:08.487
> 
> 标签：xml, vba, formatting, powerpoint, cdata

如果有这样的文字

“这是一个*随机*文本，这应该是到xml的。这是第二***行***一个句子。

这是第 3 段。文本只是**单词**的集合。”

它应该显示为

<[cdata[这是一个<i>随机</i>文本，这应该是去xml的。这是第二个<b><i>行</i></b>单句。<br >这是第3段。文本只是<b>单词</b>的集合。"]]

而不是纯文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:26:39.667

每个文本范围都有一个 .Runs 属性；.Runs 告诉您在该范围内有多少相同格式的文本“运行”。如果所有文本的格式都相同，.Runs 将等于 1，并且 .Runs(1) 返回与整个文本范围相同的文本范围。在您的示例中， .Runs(1) 将返回一个包含“这是一个”的范围，.Runs(2) 将返回“随机”等等。对于每次运行，您需要根据 .Runs(x).Font.Bold、.Italic 等计算出要添加的 add'l 编码。

# objective-c - 从 init 调用实例方法

> ID：13986923
> 
> 赞同：1
> 
> 时间：2012-12-21T08:51:15.467
> 
> 标签：objective-c, cocoa-touch

从类的方法调用类的实例方法是否合适`init`？我在 ARC 环境中，我不确定我能做什么，不能做什么`init`。Apple的文档说[不要在初始化方法和dealloc中使用访问](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/TP40004447-SW6 "不要在初始化方法和 dealloc 中使用访问器方法")器方法，但我真的不明白为什么会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:26:10.630

这是关于它的讨论：[在 Init 和 Dealloc 中使用访问器](http://www.mikeash.com/pyblog/friday-qa-2009-11-27-using-accessors-in-init-and-dealloc.html)。没有真正的答案，这取决于。如果这样做，请确保没有副作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:25:09.863

Init 方法用于为类的实例变量设置初始值。

查看：

[为什么我不应该在 init 方法中使用访问器方法](https://stackoverflow.com/questions/3424382/why-shoudnt-i-use-accessor-methods-in-init-methods)

# javascript - 那里有任何 Node.js 问题跟踪器吗？

> ID：13986924
> 
> 赞同：20
> 
> 时间：2012-12-21T08:51:15.823
> 
> 标签：javascript, node.js, project-management, collaboration, issue-tracking

我现在能找到的只有[omega](https://github.com/wachunga/omega)，它使用 WebSockets 并实时更新。这很好，但仍处于开发阶段。

我想知道是否有任何方便的、可用于生产的问题跟踪器，它有钩子，或者以某种方式与 Git 或 SVN 集成。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T04:43:41.717

[Trello](https://trello.com/)内置在 Node 中，使用 socket.io 和 websockets。[你可以在这里](http://blog.fogcreek.com/the-trello-tech-stack/)阅读他们的堆栈。我的团队在我刚开始切换到 Assembla 之前就使用了它。但 Trello 很棒，我相信它与 Git 集成。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-08-21T14:10:24.493

rollbar.com 怎么样？（工作客户端和服务器端，与github集成）

# android - 在 Android 库项目中使用自定义操作启动服务

> ID：13986930
> 
> 赞同：0
> 
> 时间：2012-12-21T08:51:43.953
> 
> 标签：android, android-service, android-library

我创建了一个**名为 MyLibrary 的 Android 库项目**，它遵循**AndroidManifest.xml**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="test.myservice"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <service android:name="mytest.myservice.RemoteService" android:exported="true">
            <intent-filter >
                <action android:name="MYSERVICE"/>
            </intent-filter>
        </service>
    </application>

</manifest> 
```

创建库项目后，我**将此库项目的引用添加到名为 TestMyLibrayApp 的应用程序**中。我正在从**我的应用程序**启动服务，如下所示。

```
Intent playerservice = new Intent();
playerservice.setAction("MYSERVICE");
getBaseContext().bindService(playerservice,conn , Service.BIND_AUTO_CREATE); 
```

其中**conn**是服务连接对象。现在的问题是服务没有开始。谁能建议我错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:54:36.130

您需要将该`<service>`部分添加到 TestMyLibraryApp 的清单中。未使用库的清单。

# c - 这段代码会在 VC6.0 中崩溃吗？

> ID：13986938
> 
> 赞同：-3
> 
> 时间：2012-12-21T08:52:12.083
> 
> 标签：c

```
int main(void) {

      int i = 0;
      scanf("%f", &i);

      return 0;
} 
```

据称，如果我输入一个浮点数，它将崩溃。

我在 Gcc4.7 中对其进行了测试，它可以工作。我没有VC6.0，所以我想知道它是否会在VC6.0中崩溃。

如果会，为什么？有人告诉我是因为 FPU 没有初始化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:55:15.343

```
 int i = 0;
  scanf("%f", &i); 
```

你要：

```
 scanf("%d", &i); 
```

反而。

`%f`in`scanf`需要一个指针类型的参数`float`。传递指针类型的参数`int`是未定义的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T08:56:10.003

此代码导致**未定义的行为**。
如果它有效，你是（不）幸运的。它不能保证工作。它可能会失败或工作。

您有责任确保格式说明符与传入的实际类型相`printf`匹配`scanf`. 由于实际*类型*是`i`正确`int`的格式说明符应该是`%d`.

```
 scanf("%d", &i); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T09:30:57.790

我认为这是指旧版本的 microsoft（和 borland，可能还有其他）编译器，除非编译器检测到您正在使用浮点（或使用一些特殊的编译器选项来强制它），否则代码中没有浮点函数。这是一个毫无意义的例子，因为这段代码绝对不可能以合理的方式工作。如果您真的想将浮点值填充到整数中，则使用类型双关指针强制转换或联合是“批准”的方式。

这些天并不真正相关，因为对通用函数（例如 *printf 和 *scanf）的浮点支持通常在主标准库中提供，并且正确编写的代码不会有任何问题。

我相信如果您要在 printf 中使用 %f（或 %g），同样的问题也适用。

# javascript - 列排序后如何从jquery dataTable中获取正确的行数据？

> ID：13986940
> 
> 赞同：0
> 
> 时间：2012-12-21T08:52:21.867
> 
> 标签：javascript, html, jquery-ui, datatables

我正在使用 jquery dataTable 来显示客户记录。第一次进入客户页面时，我在 dataTable 中有 20 个客户记录，按 customerId 列排序（因此它们从 20 到 1 开始显示，其中 20 是第 20 个客户的 id，1 是第一个客户的 id）按 desc 顺序排列。第 20 个客户显示在数据表的顶部。

现在如果在我的 javascript 代码中执行以下操作

```
 var customerTable=$('#customer').dataTable();// where customer is the html div associated with dataTable

 var custData = customerTable.fnGetData(18)// it gives me data of 19 row in dataTable( as dataTable index starts from 0)
 // so i get the data of customer having customer id=19 
```

**到这里为止都很好。**

现在我单击 customerId 列上的排序图标。因此，对 id 为 1 的客户进行排序后，dataTable 将显示在顶部，而 id 为 20 的客户将显示在底部。现在我再次执行我的 javascript 操作

```
var customerTable=$('#customer').dataTable();

 var custData = customerTable.fnGetData(18)
 // it should give me data for customer id=2 Right? but still i am getting the old data i.e customer Data having id=19. 
```

**为什么排序后我没有得到正确的数据？在数据表排序后，我应该如何获得带有行 ID 的正确数据？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:17:29.993

我尝试了同样的事情，几乎没有改变。

首先创建全局变量来保存表。

```
var customerTable; 
```

然后将对象启动为就绪状态。

```
$(document).ready(function() {
        customerTable = $('#customer').dataTable();
}); 
```

如果您现在排序并获取数据。你可能会得到你想要的。

```
var custData = customerTable.fnGetData(18); 
```

我唯一知道的是排序后我没有启动表格对象。

# css - 将宽度设置为 100%，同时设置边距

> ID：13986951
> 
> 赞同：1
> 
> 时间：2012-12-21T08:53:17.517
> 
> 标签：css

我有一个页面的两个部分，一个侧边栏和一个主要内容区域。侧边栏是 225 像素宽，我希望主要内容区域是页面的 100% 宽度，减去侧边栏的 225 像素。所以我将主要内容区域的左侧边距设置为 225，这样它就不会与侧栏重叠，然后我将其宽度设置为 100%，但是这样做会将整个文档在右侧推出 225pxs，倾斜整个页面。如何将宽度设置为 100%，同时还具有边距并且不将文档推出？我有：

```
#main-content {
   position: absolute;
   margin-left: 225px;
   height: 100%;
   width: 100%;
}

#sidebar {
   position: relative;
   width: 225;
   height: 100%;
   background-color: #c00000;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:58:24.830

尝试

```
#main-content {
  position: absolute;
  left: 225px;
  right: 0;
  top: 0;
  bottom: 0;
} 
```

# java - 通过添加公制距离获取新的 GPS 坐标

> ID：13986952
> 
> 赞同：0
> 
> 时间：2012-12-21T08:53:19.353
> 
> 标签：java, android, osmdroid

我一直在尝试在 Java 中查找代码示例，我可以在其中将度量距离添加到特定坐标点。

例如，将 A 点的纬度增加 2 公里，将 B 点的经度减去 2 公里，我想获得一个位于 A 点西北部的新坐标点（B 点）。

那里有这种功能的示例源代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:10:09.440

如果您不需要高精度并且距离很小，您可以假设地球是一个半径约为 R = 6370 公里的球体。以弧度表示的纬度差就是 dNorth / R，经度差是 dEast / R / cos(lat)。

为了获得更高的精度，您必须考虑到地球的形状更像是一个椭球体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:09:01.437

我想是的，你可以使用大圆算法来做到这一点。

在半径为 R 的球面上，两个给定点 P1=(lat1, lon1) 和 P2=(lat2, lon2) 之间的最短距离（测地线）是大圆距离。可以使用以下公式计算：

```
dist = arccos(sin(lat1) · sin(lat2) + cos(lat1) · cos(lat2) · cos(lon1 - lon2)) · R (1) 
```

例如，自由女神像 (40.6892°, -74.0444°)=(0.7102 rad, -1.2923 rad) 与埃菲尔铁塔 (48.8583°, 2.2945°)=(0.8527 rad, 0.0400 rad) 之间的距离——假设半径为 6371 公里的地球图形的球面近似值是：

```
dist = arccos(sin(0.7102) · sin(0.8527) + cos(0.7102) · cos(0.8527) · cos(-1.2923 - 0.0400)) · 6371 km
  = 5837 km 
```

我在探索时发现的另一个例子是::

例子：

```
lat1: 34
lng1: 34 
```

在 lat1 中添加 5km 后，新点应该像 new_lat1: 34+5km new_lng1: 34 （lng1 将保持与我们仅在纬度中添加的相同）

所以你可以把你的概率分为两个步骤::

1.  使用加法计算坐标。

2.  然后使用在步骤1中获得的减法计算新坐标

# jquery - 花式框弹出内容，包括 twitter 提要

> ID：13986962
> 
> 赞同：1
> 
> 时间：2012-12-21T08:54:10.050
> 
> 标签：jquery, fancybox

我需要将 twitter 提要添加到fancybox 弹出窗口中。可以做到吗？

这是当前测试实现的链接：[fancybox_test2](https://inetwebdesign.com/fancybox/fancybox_test2.html)

我需要将 twitter 提要添加到弹出窗口中，如下图所示：[![截屏](../Images/1db16df45cfe01e1db3132d8b080dc7d.png)](https://i.stack.imgur.com/7Hetz.jpg)

# php - joomla 会话对象不返回任何内容

> ID：13986973
> 
> 赞同：0
> 
> 时间：2012-12-21T08:54:39.843
> 
> 标签：php, joomla

我有一个名称字段如下的表格

```
<label class="control-label" for="name">Your Name *</label>
<div class="controls">
<input type="text" class="input-xlarge" name="name" id="name" maxlength="10">
</div> 
```

在提交表单时，我正在尝试验证（服务器端）我的控制器中的字段，如下所示：

```
function save(){               

      $name = JRequest::getVar('name', 'POST');

      $session =& JFactory::getSession();

      if(!$name || strlen($name = trim($name)) == 0){
         $session->set('errorname', 'Please enter your name!');
         $error= true;
      }
         $session->set('valuename', $name);

      if(!$error){

         $model = & $this->getModel('jobs');

         $model->saveJob(JRequest::get('POST'));

         $redirectTo = JRoute::_('index.php?option='.JRequest::getVar('option').'&task=display');
         $this->setRedirect(str_replace("&amp;", "&",$redirectTo), 'Saved');
      }
      else {                          
         $redirectTo = JRoute::_('index.php?option='.JRequest::getVar('option').'&Itemid='.JRequest::getVar('Itemid'));
         $this->setRedirect(str_replace("&amp;", "&",$redirectTo), "The form is not complete!" );                 
       }    

    } 
```

然后再次在我的表单页面顶部，我尝试获取会话对象**错误名称**的值，如下所示：

```
$session =& JFactory::getSession(); 
$session->get('errorname'); 
```

我这样做只是为了测试目的；所以，当我提交表单而不填写字段时，会话对象应该返回一个错误（一条消息***请输入您的姓名！***）。但我想知道为什么什么都没有返回。

我不确定我是否遗漏了什么，请给我建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:10:16.350

这可能是由于您的 if 条件为 true 部分没有被执行。

```
if(!$name || strlen($name = trim($name)) == 0){
         echo 'works';die;
      } 
```

替换上面的代码并检查是否进入 if 条件为真部分。除此之外，您所做的一切都是正确的。如果正在评估 if 条件，则正确的页面将停止执行，因为`die;`使用了命令。这是确保您的代码没有错误的好方法。

[阅读此链接](http://www.tutsforu.com/c-language/8-joomla-tutorial/75-using-session-in-joomla.html)。它会给你一些用法`JFactory::getSession()`

# sas - 如何在 SAS 中使用每个类的单个质心来执行 1NN？

> ID：13986981
> 
> 赞同：1
> 
> 时间：2012-12-21T08:55:12.193
> 
> 标签：sas, cluster-analysis, knn

我在 SAS 中使用 PROC fastclus 为每个班级计算一个质心，

```
proc fastclus data=sample.samples_train mean=knn.clusters
maxc=1 *number of clusters*
maxiter=100;
var &predictors; 
by class;
run; 
```

我正在尝试根据创建的这些质心中最接近的一个对测试集进行分类。这我也在 SAS 中使用 PROC discrim。

```
proc discrim data=knn.clusters   
             testdata=sample.samples_test
             method=NPAR k=1 metric=identity noclassify;
      class class; 
      var &predictors; 
      ods output ErrorTestClass=knn.error;
run; 
```

我正在使用带有选项的欧几里得距离测量`metric=identity`。

返回以下错误。

```
ERROR: There are not enough observations to evaluate the pooled covariance matrix in DATA= data set or BY group. 
```

如果我将 fastproc 中的集群数设置为 2，则此方法有效。

但是，如何在 SAS 中执行每个类具有单个质心的 1NN？

# asp.net - 将数据作为控件属性或在控件代码中加载到 UserControl 中？

> ID：13986984
> 
> 赞同：1
> 
> 时间：2012-12-21T08:55:16.477
> 
> 标签：asp.net, user-controls

我正在构建一个用户控件，它将在页面上重复可变次数。我正在尝试确定处理要加载到控件中的数据的最有效方法。为了简单起见，假设它的结构如下：

```
<table>
    <tr>
        <td>Header Item</td>
    </tr>
    <tr>
        <td>Body Item n</td>
    </tr>
    <tr>
        <td>Body Item n+1</td>
    </tr>
    <tr>
        <td>Body Item n+2</td>
    </tr>
    <tr>
        <td>etc.</td>
    </tr>
    <tr>
        <td>Footer Item</td>
    </tr>
</table> 
```

将加载到此控件中的所有数据都来自 SQL 查询。Body 项目将在控件的每次迭代中发生变化，但 Header 和 Footer 项目将是相同的，这就是我试图在我可以看到的几个选项之间做出决定的地方。

1.  将查询构建到控件本身的代码中，并为控件的每次迭代重复它，或者：
2.  从将使用控件的 .aspx.cs 页面查询数据，并在创建控件时将它们作为属性传递。
3.  ?

选项 1 似乎效率很低。如果我们只讨论两个项目，那么我可能只是倾向于接受效率低下，但我们谈论的更多。

选项 2 似乎是合理的，但我不知道这是否真的比选项 1 更好。

想法？其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:04:25.160

使用`Repeater`控件

看看这里： http:
[//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater (v=vs.80).aspx?cs-save-lang=1&cs-lang= csharp#code-snippet-1](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater(v=vs.80).aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)

```
<asp:Repeater runat="server">

 <HeaderTemplate>
  <table>
   <tr>
    <td>Header Item</td>
   </tr>
 </HeaderTemplate>

 <ItemTemplate>
  <tr>
   <td>Body Item <%# Eval("Number") %></td>
  </tr>
 </ItemTemplate>

 <FooterTemplate>
   <tr>
    <td>Footer Item</td>
   </tr>
  </table>
 </FooterTemplate>

</asp:Repeater> 
```

# c++builder - 如何在 c++builder 中检查组件是否为 TEdit 类型？

> ID：13986987
> 
> 赞同：2
> 
> 时间：2012-12-21T08:55:31.047
> 
> 标签：c++builder, vcl

如何检查表单的所有组件并验证组件的类型`TEdit`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T09:02:24.127

您可以使用[dynamic_cast 运算符](http://docwiki.embarcadero.com/RADStudio/XE3/en/Dynamic_cast_%28C%2B%2B_Type_Cast_Operator%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:03:21.493

如果我错了，请原谅，但不会自动将所有表单组件对象指针添加到类定义（在头文件中）..

如：

```
class TFormSomeForm : public TForm
{
__published:
    TEdit *SomeEditBox;
    TEdit *AnotherEditBox;
...
} 
```

这意味着您可以从标题中分辨出哪些组件属于 TEdit 类型。
或者您可以单击设计视图中的组件，对象检查器将显示类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-12T12:29:06.270

我的函数设置 TWinControl 及其子项中所有编辑的 Text 属性。

```
void __fastcall SetEditsText(TWinControl* winControl, UnicodeString editsText)
{    
    for (int c = 0; c < winControl->ControlCount; c++)
    {
        TControl* ctrl = winControl->Controls[c];

        TWinControl* wc = dynamic_cast<TWinControl*>(ctrl);

        // Check if it's grouping component
        if (wc != NULL)
        {
            // Set edits of children
            SetEditsText(wc, editsText);
        }
        else 
        {
            if (ctrl->ClassType() == __classid(TEdit))
            {
                TEdit* ecomp = (TEdit*) ctrl;
                ecomp->Text = editsText;
            }
        }
    }
} 
```

使用：

```
void __fastcall TForm1::Button1Click(TObject *Sender)
{
    SetEditsText(form1, ""); // Clear all edits
} 
```

# iphone - 位置服务应用程序中的 NSTimer

> ID：13986988
> 
> 赞同：1
> 
> 时间：2012-12-21T08:55:33.947
> 
> 标签：iphone

我正在开发一个应用程序。在那个我使用位置服务。但我想在后台使用计时器。如果我在该位置服务任务中使用计时器，那么这个计时器也会与该位置服务一起在后台运行。

# iphone - @class @synthesize 可用性

> ID：13986993
> 
> 赞同：0
> 
> 时间：2012-12-21T08:55:55.313
> 
> 标签：iphone, objective-c, ios, synthesize

好的，我有课，我为我的核心数据创建

```
LoginPass.h 
```

然后我有头等舱

```
FirstClass.h 
```

然后我需要在 SecondClass 中使用这些类，在这里我用@class 声明它们。海德档案

```
SecondClass.h
...
@class FirstClass;
@class LoginPass;
...
    @interface SecondClass : UIViewController
  {
   ......
  }
@property (strong, nonatomic) FirstClass *fromFirstClass;
@property (strong, nonatomic) LoginPass *myEntity;
...
@end 
```

在 .m 文件中

```
#import "SecondClass.h"
#import "FirstClass.h"
#import "LoginPass.h"
@implementation SecondClass
...
@synthesize fromFirstClass = _fromFirstClass;
@synthesize myEntity = _myEntity;
... 
```

好的，我可以在代码中犯一些错误，请原谅。我真的不知道，现在也不感兴趣为什么我需要写

```
 @synthesize myEntity = _myEntity; 
```

但不是

```
 @synthesize myEntity; 
```

但我还有一个问题。为什么我可以在我的代码中使用 then

```
 self.fromFirstClass 
```

但我不能使用

```
 self.myEntity 
```

Xcode 给我一个错误并说我应该使用

```
 self._myEntity 
```

有什么区别？为什么我可以使用 self.fromFirstClass 而不是 self.myEntity？@结尾

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T09:16:03.380

您混淆了作为对象结构的变量部分的*实例变量*，以及实际上是设置和获取值的*方法的**属性。*

 *当您声明时，`@property (strong, nonatomic) FirstClass *fromFirstClass;`您实际上声明了两个方法`- (FirstClass *)fromFirstClass`和`- (void)setFromFirstClass:(FirstClass *)aFirstClass`.

当你使用点语法`FirstClass *classA = self.fromFirstClass;`时，你实际上调用了一个方法，它等价于`FirstClass *classA = [self fromFirstClass];`. 同样的，如果你写`self.fromFirstClass = classB;`，你实际上调用了：`[self setFromFirstClass:classB];`。

如果直接在对象方法中使用实例变量的名称，则可以访问该变量。

现在，当您`@synthesize fromFirstClass;`在现代运行时中编写代码时，您让编译器创建一个同名的实例变量`fromFirstClass`并编写这两个方法`- (FirstClass *)fromFirstClass`，`- (void)setFromFirstClass:(FirstClass *)aFirstClass`这将获取和设置实例变量。

如果你写`@synthesize fromFirstClass = _fromFirstClass;`，同样的事情会发生，除了创建的实例变量的名称前面有一个下划线。

最后，在较新版本的编译器中，如果您不编写任何内容，则默认行为是`@synthesize fromFirstClass = _fromFirstClass`自动为您执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T09:01:18.857

```
@synthesize fromFirstClass = _fromFirstClass;
@synthesize myEntity = _myEntity; 
```

上述这些行是正确的，但现在您不需要合成。`@synthesize`是编译器自己放的。

当您使用时，`self.prop`您的意思是您正在访问财产。

使用时`_prop`直接调用属性。

编辑：

使用时`self.prop`，根据 =(assignment) 的 lhs 或 rhs 调用该方法：

```
-(NSString *)prop; //gets called when you use myName=self.prop; 
```

和/或

```
-(void)setProp; //gets called when you use self.prop=@"master"; 
```

另一方面，如果您尝试使用，`self._myEntity`那么它会查找不存在的方法名称`_`，从而导致错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T10:07:08.630

编译器会添加

```
@synthesize myEntity = _myEntity; 
```

如果你完全省略`@synthesize`。

但是，您也可以使用

```
@synthesize myEntity; 
```

关键区别在于，在第一种情况下，`_myEntity`当 getter 是 myEntity 而 setter 是 setMyEntity 时调用局部变量。因此，您可以从外部访问 yourObject.myEntity 以设置或获取值。编译器会注意调用 setter 和 getter。您不能直接访问该属性。 `[yourObject.myEntity = value]`ist 等同于`[yourObject setMyEntity:value]`以及`value = yourObject.myEntity`等同于`value = [yourObject myEntity]`。

到目前为止，还没有从外部访问属性或其 getter 和 setter。从您的班级内部，您可能会认为这`self.myEntity = value`与`myEntity = value`（对于第二种情况）相同。但事实并非如此。`self.myEntity`调用setter（或getter）。这对于 getter 尤其重要，因为它带有免费的重要内存管理 - 有或没有 ARC。While`myEntity = value`直接访问该属性。

这就是 _ 及其关键优势（恕我直言）。如果您使用 _ 表示法，则调用该属性`_myValue`。这样做对于您和您的代码的读者来说，当直接访问实际属性以及何时使用 getter 和 setter 时，您和您的代码读者都非常清楚。*