# StackOverflow 问答 13715000-13715999

# c++ - C++ Linked List causing Segmentation Fault

> ID：13715000
> 
> 赞同：-1
> 
> 时间：2012-12-05T01:36:58.333
> 
> 标签：c++, segmentation-fault

My code is below, and my problem occurs when I am trying to "loadFile" through my program. It asks me for the filename, and when I give it a filename that it can find, it just says "Segmentation Fault" and stops running. I think the problem is either coming from the loadFile method itself or on line 244 which is where I'm writing the method for adding an element to the linkedlist. Any help is appreciated! Thanks.

[http://pastebin.com/7qZY9Hef](http://pastebin.com/7qZY9Hef)

Line 224:

```
 void countyElectionList::push_back(countyElectionResults * newCER){

    if(head == NULL)
head = newCER;
else
    {
    countyElectionResults * current = head;
    while(current->getNextResult() != NULL){
        current = current->getNextResult();
    }
current->setNextResult(newCER);
}

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T02:01:57.587

根据您链接的 URL 上的源代码（由于*多种*原因，包括缺少括号和缺少返回语句的函数等），问题出在此处：

```
// A constructor that initializes the private data members
countyElectionList::countyElectionList(){

} 
```

你永远不会初始化`countyElectionList::head`为 NULL，所以当你调用`countyElectionList::push_back`的值`head`很可能*不会*指向 NULL 而是指向谁知道什么......因此崩溃。

供将来参考：当您调试崩溃时，如果发生崩溃的函数看起来不可疑，并且您无法找到源代码的错误并逐步执行逻辑，您应该继续检查函数的调用者。

更新：因此，在检查了您的新 pastebin 代码（*仍然*无法编译，因为几个声称返回值的函数缺少返回语句）之后，错误继续出现在同一个函数中：

```
// A constructor that initializes the private data members
countyElectionList::countyElectionList(){
    countyElectionList::head == NULL;
} 
```

请注意，您使用`==`的是*比较运算符*而**不是**赋值运算符，即`=`. 这是要使用的正确代码：

```
// A constructor that initializes the private data members
countyElectionList::countyElectionList(){
    head = NULL;
} 
```

我不得不怀疑你是否真的试图编译这段代码。我做到了，我的编译器立即向我指出了错误。它甚至告诉我该怎么做：

> test.cpp(210) : 警告 C4553: '==' : 运算符无效；你打算'='吗？

我也怀疑你是在你的头上。我假设这是家庭作业，并且您没有进行实际的选举系统（*尽管...*），所以我想我的下一个问题是：您是否考虑过与您的教授交谈并解释您对语言的语法有什么困难? 也许你的学校有资源可以提供帮助。尝试通过在文件中随机插入内容来进行编程并不能帮助您学习；这是一种沮丧的练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T01:56:28.240

好吧，首先，您似乎从未在构造函数中初始化`head`为. `NULL``countyElectionList`

当您稍后尝试使用时，这可能会导致问题`head`，例如在`countyElectionList::push_back`.

# iphone - Multiple iAds with one view controller?

> ID：13715006
> 
> 赞同：1
> 
> 时间：2012-12-05T01:37:30.353
> 
> 标签：iphone, objective-c, ios, iad

So I am trying to have multiple(five actually)iAd banners in one view controller, and have them animate up from the bottom in succession as they each receive an add. I am trying to figure out the best way to implement this. Since they are all in one view controller, I have the delegate for each set to self, so they all call `- (void)bannerViewDidLoadAd:(ADBannerView *)banner`

and I have worked with iAds before, and with only one banner, I usually offset it from the bottom of the screen and then do this

```
-(void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error

{

 if (self.bannerIsVisible)
{

    [UIView beginAnimations:@"animateAdBannerOff" context:NULL];
    //Assumes the banner view is placed at the bottom of the screen.
    banner.frame = CGRectOffset(banner.frame, 0, banner.frame.size.height);
    [UIView commitAnimations];
    self.bannerIsVisible = NO;

   }
} 
```

but obviously banner cannot refer to all the banners at the same time,so how would I do this? Could I just use the property for each of them in this same way? I did try that, but it did not seem to be working.

And also, this is for a joke, and my personal desire to figure this out, in case you are wondering why I want five ad banners on one view.

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:57:34.280

在框架的眼中，有多个指向同一个委托的 iAd 实例可能是被禁止的，因此最好创建一个视图控制器，为要显示的每个 iAd 实现 iAd 委托方法，然后添加每个视图控制器subView 到显示所有广告的主视图。

# assembly - Do 16 bit register pairs make a machine 16 bit?

> ID：13715015
> 
> 赞同：2
> 
> 时间：2012-12-05T01:38:49.973
> 
> 标签：assembly, machine-instruction, vm-implementation

I have been working on a fictional retro virtual machine for xbox since January (I am not at all copying 0x10c, infact my project is older. just putting this out there incase some notch fanboys read this) and it has 6 general purpose registers. These are 8 bit but all can be combined to make 3 16 bit registers, memory addresses though are 16 bit and so is the program counter. I know this is a stupid question, but I couldn't figure this out, is it 16 or 8 bit???? The z80 uses 16 bit addresses and is 8 bit

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:16:24.777

据我所知，通用寄存器的处理器位宽决定了它，因为所有的计算都依赖于时钟速度，它只能处理通用寄存器的数量。

例如，在 32 位处理器中，它可以通过寄存器连接进行 64 位计算，但不能将其称为 64 位处理器。当然，在 32 位处理器中有一些 64 位扩展指令，但它们消耗双时钟，两步。

我认为您的处理器的设计者只是想扩展内存地址空间以支持更大的内存。

所以，我的结论是8位处理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T01:47:35.307

您的处理器可以一次处理 16 位数据，还是在后台使用两个单独的 8 位操作？如果是前者，则为 16 位。如果是后者，则为 8 位。

根据您的描述，它听起来像 16 位，因为它使用 16 位进行数据寻址。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-05T01:51:08.637

构成 16 位处理器的最常见定义是处理器可以使用本机指令处理的最长整数类型的大小。如果您的虚拟机具有在 16 位寄存器上运行并提供 16 位输入的算术指令，则它可以称为 16 位机器。

另一个常见的定义是地址空间的大小。由于您的虚拟机具有 16 位地址，因此它也符合 16 位的条件。

# php - Sorting SQL results into categories and displaying them in a table PhP

> ID：13715019
> 
> 赞同：3
> 
> 时间：2012-12-05T01:39:10.910
> 
> 标签：php, mysql, sql, sorting, categories

I want to display MySQL results like this in a PHP/HTML table. Maybe add mouse over info for each plant if thats easy later.

```
+-----------------------------------------------------------+
|category1  ¦ category2 ¦ category3 ¦ category4 ¦ category5 ¦ 
+-----------+-----------+-----------+-----------+-----------+
| plantName ¦ plantName ¦ plantName ¦ plantName ¦ plantName ¦ 
| plantName ¦ plantName ¦ plantName ¦ plantName ¦ plantName ¦ 
| plantName ¦ plantName ¦           ¦           ¦           ¦
|           ¦ plantName ¦           ¦           ¦           ¦
|           ¦ plantName ¦           ¦           ¦           ¦
+-----------+-----------+-----------+-----------+-----------+

```

First I select plants by elevation and rainfall values.

```
$sql = mysql_query("SELECT * FROM `plants_tb` 
WHERE $elevate>= elevationLOW  &&  $elevate<= elevationHI &&
$rainfall>= rainfallLOW  &&  $rainfall<= rainfallHI ORDER BY commonNames ASC");

$plant = 'commonNames';
$elevationH = 'elevationHI';
$elevationL ='elevationLOW';
$rainfallL ='rainfallLOW';
$rainfallH ='rainfallHI';
$species ='species';

echo "<table border='1'><tr><th>Name</th><th>Category</th></tr>";
while($row = mysql_fetch_array($sql)){
echo "<tr><td>" . $row[$plant] . "</td><td>" . $row['heightHI'] . "</td></tr>";
}
echo "</table>"; 
```

Now I need to display them in columns by height categories. Maybe I should make a temporary table of the selected plants, then categorize them, then display them in columns? Here is my idea for categorizing. I know this between code is not correct but, it gets my point out.

```
$sql="SELECT tree_height FROM $Elevation_Rainfall_list;
WHERE tree_height
BETWEEN 1 AND 7 = $Category1
BETWEEN 7 AND 15 = $Category2
BETWEEN 15 AND 30 = $Category3
BETWEEN 30 AND 9999 = $Category4
if not = $Category5 
```

mahalo for the support!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T03:14:47.217

看起来你想创建类似直方图的东西。

与其尝试在 SQL 查询中对数据进行分类，不如在 PHP 中使用以下代码进行分类：

```
$histogram = array();
# classify the data into histogram bins
while($row = mysql_fetch_array($sql)) {
    $h = $row['tree_height'];
    $cat = 3;
    if ($h <= 7) {
        $cat = 0;
    } elseif ($h <= 15) {
        $cat = 1;
    } elseif ($h <= 30) {
        $cat = 2;
    }
    $histogram[$cat][] = $row['commonNames'];
}

# determine the number of rows in the table
$rows = 0;
foreach ($histogram as $ar) { $rows = max($rows, count($ar)); }

# write a table with the data
echo "<table border='1'>\n" .
     "  <tr>\n    <td>Category 1</td>\n    <td>Category 2</td>\n" .
     "    <td>Category 3</td>\n    <td>Category 4</td>\n</tr>\n";
for ($i = 0; $i < $rows; ++$i) {
    echo "  <tr>\n";
    for ($cat = 0; $cat <= 3; ++$cat) {
        echo "    <td>" . $histogram[$cat][$i] . "</td>\n";
    }
    echo "  </tr>\n";
}
echo "</table>\n"; 
```

# java - 堆栈溢出错误在 [] 的 ArrayList 中添加对象

> ID：13715035
> 
> 赞同：0
> 
> 时间：2012-12-05T01:41:21.557
> 
> 标签：java, stack-overflow

尝试加载（）时出现堆栈溢出错误。我正在尝试从 txt 文件中读取 PhoneBookEntry 对象。txt 文件具有组成 PhoneBookEntry 对象的名称和编号。

你能告诉我我做错了什么吗？

```
package HashSet;

import java.io.InputStream;
import java.util.ArrayList;
import java.util.HashSet;
import java.util.Hashtable;
import java.util.Scanner;

public class PhoneBook {
    int capacity = 10;
    private ArrayList<PhoneBookEntry>[] buckets;

    public PhoneBook() {
        this(10);
    }

    public PhoneBook(int size) {
        capacity = size;
        buckets = new ArrayList[size];
        for (int i = 0; i < buckets.length; i++) {
            buckets[i] = new ArrayList<PhoneBookEntry>();
        }
    }

    public int getSize() {
        int tot = 0;
        for (ArrayList<PhoneBookEntry> x : buckets)
            tot += x.size();
        return tot;
    }

    public boolean add(PhoneBookEntry entry) {
        if (contains(entry))
            return false;
        int x = Math.abs(entry.hashCode());
        buckets[x % buckets.length].add(entry);
        return true;
    }

    public void load()
    {
        InputStream is = getClass().getClassLoader().getResourceAsStream("phone.txt");
        Scanner scan = new Scanner(is);
        if (scan.hasNext())
            add(new PhoneBookEntry(scan.next());
    }
    public void bucketSize() {
        for (int i = 0; i < buckets.length; i++)
            System.out.println(i + "    " + buckets[i].size());
    }

    public boolean contains(PhoneBookEntry word) {
        int x = Math.abs(word.hashCode());
        return buckets[x % buckets.length].contains(word);
    }

    public int getCapacity() {
        return capacity;
    }

    public static void main(String[] args) {
        PhoneBook phone = new PhoneBook();
        phone.load();
    }
} 
```

* * *

```
package HashSet;

import java.util.LinkedList;
import java.util.ListIterator;

public class PhoneBookEntry {
    String n;
    Integer nr;
    LinkedList<PhoneBookEntry> list;

    public PhoneBookEntry(String name, int number) {
        list = new LinkedList<PhoneBookEntry>();
        n = name;
        nr = number;
        list.add(new PhoneBookEntry(n, nr));
    }

    public String getN() {
        return n;
    }

    public void setN(String n) {
        this.n = n;
    }

    public Integer getNr() {
        return nr;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((n == null) ? 0 : n.hashCode());
        result = prime * result + ((nr == null) ? 0 : nr.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        PhoneBookEntry other = (PhoneBookEntry) obj;
        if (n == null) {
            if (other.n != null)
                return false;
        } else if (!n.equals(other.n))
            return false;
        if (nr == null) {
            if (other.nr != null)
                return false;
        } else if (!nr.equals(other.nr))
            return false;
        return true;
    }

    public void setNr(Integer nr) {
        this.nr = nr;
    }

    @Override
    public String toString() {
        return n + " " + nr;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:47:36.507

每个新的电话簿条目都会创建一个新的电话簿条目，该条目会创建一个新的电话簿条目，该条目会创建一个新的电话簿条目，等等……无限。也就是说，直到堆栈空间用完。

您需要重新考虑您的应用程序数据结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T01:46:02.373

```
public PhoneBookEntry(String name, int number) {
    list = new LinkedList<PhoneBookEntry>();
    n = name;
    nr = number;
    list.add(new PhoneBookEntry(n, nr));
} 
```

导致无限递归。您可能需要一个新类来放入链接列表（如果 PhoneBookEntry 可以包含多个名称/号码，则为 PhoneNumber 或其他类，否则放弃它。）

# php - IE9L Automatically changing Document Mode to IE7

> ID：13715036
> 
> 赞同：1
> 
> 时间：2012-12-05T01:41:23.263
> 
> 标签：php, javascript, internet-explorer, cross-browser, internet-explorer-9

This is the worst ... for some reason, my application is not working correctly because IE9 things that it's IE7 and automatically changes the Document Mode to IE7.

It's a really odd situation, because my PC does NOT do this. But it seems to be that those who have upgraded their IE from 7 or 8 to 9 get this behaviour... compatibility mode?

I have no idea what to do to ensure that IE renders the document properly!

![enter image description here](../Images/21326d751bb1e1d2f7f6e31a3517b186.png)

Some more information on the matter ... it is absolutely because of Compatibility Mode. When this mode is turned on, the screenshot above applies. But when Developer Tools are opened, everything works.

* * *

NOTE: I just read somewhere that IE will not be able to process `console.log()` and this could be the issue! Is this possible?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T01:49:13.747

尝试设置此元标记

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

我在 IE8 及以下版本中使用谷歌浏览器框架

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=IE8"> 
```

另请参阅[http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx)和[http://456bereastreet.com/archive/201103/x-ua-compatible_and_html5](http://456bereastreet.com/archive/201103/x-ua-compatible_and_html5)

编辑：正如 pocesar 在评论中所说，您的文档类型也设置不正确，应该是

```
<!doctype html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-25T16:14:38.073

IE11 自动将我网站的文档模式更改为“IE5”。我能够通过以下方式解决它，我希望这对某人有用。

我无法解释为什么，但如果我将元标记放在之后`<meta http-equiv="X-UA-Compatible" content="IE=edge" />` **，**`<meta name="viewport" content="width=device-width, initial-scale=1">`什么都不会发生，IE11 会将我的网站呈现为 IE5。

但是，如果我把它放在前面`<meta http-equiv="X-UA-Compatible" content="IE=edge" />` **，**`<meta name="viewport" content="width=device-width, initial-scale=1">`它可以工作，我网站的文档模式是最新的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T22:20:33.037

`console.log`是问题。显然 IE 只是不喜欢它，脚本会死。删除所有引用`console.log`，一切都很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T02:08:16.063

你的文档类型应该是

```
<!doctype html> 
```

而不是`<!-- DOCTYPE html -->`，这会破坏`UA-Compatible`标签的使用

另外，您应该将元标记放置为

```
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"> 
```

或在您的 .htaccess 中

```
<IfModule mod_headers.c> 
  Header set X-UA-Compatible "IE=Edge,chrome=1" 
</IfModule> 
```

（这些来自 HTML5 Boilerplate [http://html5boilerplate.com/](http://html5boilerplate.com/)）

# html - 彼此下方的两个元素共享固定高度容器中的可用高度

> ID：13715037
> 
> 赞同：1
> 
> 时间：2012-12-05T01:41:27.453
> 
> 标签：html, css

我很难正确表达这个问题，但我希望两个 div 在一个固定高度的容器中共享相同的高度。所以#container 元素会有一个固定的高度，例如500px；#upper 和 #lower 元素在其生命周期中可以变得更高和更小，但不能超过 500 像素。如果两个内部元素开始重叠，它们应该达到最大高度并让用户使用滚动条。

我附上了一张图片来澄清事情：

![](../Images/c3e8adea27524fb0ac1967e789216ad0.png)

还有一些示例（非工作）CSS，它们在概念上显示了我想做的事情：

```
#container {
    position: absolute;
    height: 500px;
}

#upper {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    min-height: 10%;
    max-height: 90%;
    overflow: auto;
}

#lower {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    min-height: 10%;
    max-height: 90%;
    overflow: auto;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T02:31:10.593

您可以尝试以下方法，但如果我有一些超出我想象的东西可以使用，这会更容易。

[http://codepen.io/DanielMinett/pen/uEdFv](http://codepen.io/DanielMinett/pen/uEdFv)

```
#container {
  width: 300px;
  height:500px;
  background-color: #CCCCCC;
  padding: 15px;
  position:relative
}

#upper {
  background-color: #1E90FF;
  min-height: 10%;
  max-height: 90%;
  padding-top: 3px;
  padding-left: 5px;
}

#lower {
  background-color: #EE8833;
  min-height: 10%;
  max-height: 90%;
  padding-top: 3px;
  padding-left: 5px;
  position:absolute;
  bottom:0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:20:14.147

使用 CSS：

将元素的高度限制为其父级的高度（或百分比）是可能的。

根据另一个元素的高度动态限制它是不可能的，并且需要实际的编程语言（即javascript）。

作为旁注，我可以设想您需要此功能的唯一情况（而不仅仅是设置说，max-height:50%; 在两个元素上）是无论如何您都将使用 javascript 填充元素......？

# iis-7 - url重写后的sql语句问题

> ID：13715039
> 
> 赞同：-1
> 
> 时间：2012-12-05T01:41:59.507
> 
> 标签：iis-7, asp-classic, url-rewriting

我正在客户的网站中实现 URL REWRITE (IIS 7)。

但是我的sql语句有问题。

在我有这个之前：

```
select * from 360 where titulo='"&request("titulo")&"'" 
```

没关系。

标题的一个例子是“Fiexpo Latinoamérica”

我的旧网址是portfolio.asp?titulo=Fiexpo Latinoamérica

但现在我的新网址是 /portfolio/fiexpo-latinoamerica

我使用 ASP 替换来删除空格并用“-”等符号更改它们。

所以现在，我的 sql 语句不起作用......因为数据库中没有具有该名称的名称。

我该怎么办？

我可以轻松地将 - 替换为空格，好的，但我有“波浪号”á é í ó ú

我该怎么办？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:34:36.517

这个新的 URL 是如何生成的？您应该为数据库中的每个项目保存新的 URL（slug），以便您可以使用它来生成链接并在有人请求页面时搜索它。

# c# - 连接到 DBF

> ID：13715040
> 
> 赞同：0
> 
> 时间：2012-12-05T01:42:09.407
> 
> 标签：c#, database, dbf

好吧，我正在开发一个程序，我必须连接到 DBF，但问题是，我需要从 DBF 中获取一些数据并放入文本框中，例如 ID、用户名......（这些数据是存储在 DBF 中），但我该怎么做呢？想用IDX，但是在C#中无法创建索引

对于数据库连接，我使用以下命令行：

```
OleDbConnection con = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\TEMP\;Extended Properties=dBASE IV"); 
```

那么，我该如何从 DBF 获取信息，并对其进行搜索，例如：

```
SELECT * FROM TESTE.DBF WHERE NOME='Alex' 
```

谢谢亚历山大

（*对不起我糟糕的英语*）

# hadoop - Hive cluster by vs order by vs sort by

> ID：13715044
> 
> 赞同：65
> 
> 时间：2012-12-05T01:42:47.910
> 
> 标签：hadoop, hql, hive

据我所理解;

*   sort by 仅在 reducer 中排序

*   order by 在全球范围内订购东西，但将所有东西都塞进一个减速器

*   cluster by 智能地通过 key hash 将内容分配到 reducer 中并进行排序

所以我的问题是集群是否保证全球秩序？分发方式将相同的键放入相同的减速器中，但相邻的键呢？

我可以找到的唯一文档是[here](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+SortBy)，从示例中它似乎在全球范围内订购它们。但从定义上看，我觉得它并不总是那样做。

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2013-09-17T01:09:05.527

更简短的回答：是的`CLUSTER BY`，只要您愿意自己加入多个输出文件，就可以保证全局排序。

更长的版本：

*   `ORDER BY x`: 保证全局排序，但是通过只通过一个 reducer 推送所有数据来做到这一点。对于大型数据集，这基本上是不可接受的。你最终得到一个排序的文件作为输出。
*   `SORT BY x`: 在 N 个 reducer 中的每一个上排序数据，但每个 reducer 可以接收重叠范围的数据。您最终会得到 N 个或更多具有重叠范围的排序文件。
*   `DISTRIBUTE BY x`: 确保 N 个 reducer 中的每一个都获得 的非重叠范围`x`，但不对每个 reducer 的输出进行排序。您最终会得到 N 个或更多具有非重叠范围的未排序文件。
*   `CLUSTER BY x`: 确保 N 个 reducer 中的每一个都获得不重叠的范围，然后在 reducer 上按这些范围进行排序。这为您提供全局排序，并且与执行 (`DISTRIBUTE BY x`和`SORT BY x`) 相同。您最终会得到 N 个或更多具有非重叠范围的排序文件。

说得通？所以`CLUSTER BY`基本上是更具可扩展性的`ORDER BY`.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-05T09:25:11.200

首先让我澄清一下：`clustered by`仅将您的密钥分配到不同的存储桶中，`clustered by ... sorted by`对存储桶进行排序。

通过一个简单的实验（见下文），您可以看到默认情况下您不会获得全局订单。原因是默认分区器使用哈希码拆分键，而不管实际键顺序如何。

但是，您可以获得完全有序的数据。

动机是 Tom White 的“Hadoop：权威指南”（第 3 版，第 8 章，第 274 页，Total Sort），他在其中讨论了 TotalOrderPartitioner。

我将首先回答您的 TotalOrdering 问题，然后描述我所做的几个与排序相关的 Hive 实验。

请记住：我在这里描述的是“概念证明”，我能够使用 Claudera 的 CDH3 发行版处理一个示例。

最初我希望 org.apache.hadoop.mapred.lib.TotalOrderPartitioner 能解决问题。不幸的是，它没有，因为它看起来像 Hive 的值分区，而不是键。所以我修补它（应该有子类，但我没有时间）：

代替

```
public int getPartition(K key, V value, int numPartitions) {
    return partitions.findPartition(key);
} 
```

和

```
public int getPartition(K key, V value, int numPartitions) {
    return partitions.findPartition(value);
} 
```

现在您可以将（修补的）TotalOrderPartitioner 设置为您的 Hive 分区器：

```
hive> set hive.mapred.partitioner=org.apache.hadoop.mapred.lib.TotalOrderPartitioner;

hive> set total.order.partitioner.natural.order=false

hive> set total.order.partitioner.path=/user/yevgen/out_data2 
```

我也用过

```
hive> set hive.enforce.bucketing = true; 

hive> set mapred.reduce.tasks=4; 
```

在我的测试中。

文件 out_data2 告诉 TotalOrderPartitioner 如何存储值。您通过对数据进行采样来生成 out_data2。在我的测试中，我使用了从 0 到 10 的 4 个存储桶和密钥。我使用 ad-hoc 方法生成了 out_data2：

```
import org.apache.hadoop.util.ToolRunner;
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.NullWritable;
import org.apache.hadoop.io.SequenceFile;
import org.apache.hadoop.hive.ql.io.HiveKey;
import org.apache.hadoop.fs.FileSystem;

public class TotalPartitioner extends Configured implements Tool{
    public static void main(String[] args) throws Exception{
            ToolRunner.run(new TotalPartitioner(), args);
    }

    @Override
    public int run(String[] args) throws Exception {
        Path partFile = new Path("/home/yevgen/out_data2");
        FileSystem fs = FileSystem.getLocal(getConf());

        HiveKey key = new HiveKey();
        NullWritable value = NullWritable.get();

        SequenceFile.Writer writer = SequenceFile.createWriter(fs, getConf(), partFile, HiveKey.class, NullWritable.class);
        key.set( new byte[]{1,3}, 0, 2);//partition at 3; 1 came from Hive -- do not know why
        writer.append(key, value);
        key.set( new byte[]{1, 6}, 0, 2);//partition at 6
        writer.append(key, value);
        key.set( new byte[]{1, 9}, 0, 2);//partition at 9
        writer.append(key, value);
        writer.close();
        return 0;
    }

} 
```

然后我将生成的 out_data2 复制到 HDFS（到 /user/yevgen/out_data2）

通过这些设置，我对数据进行了分桶/排序（请参阅我的实验列表中的最后一项）。

这是我的实验。

*   创建样本数据

    bash> echo -e "1\n3\n2\n4\n5\n7\n6\n8\n9\n0" > data.txt

*   创建基本测试表：

    蜂巢>创建表测试（x int）；hive> 将数据本地路径“data.txt”加载到表测试中；

基本上这个表包含从 0 到 9 的值，没有顺序。

*   演示表复制是如何工作的（实际上是 mapred.reduce.tasks 参数，它设置了要使用的最大减少任务数）

    hive> 创建表 test2(x int);

    蜂巢> 设置 mapred.reduce.tasks=4;

    hive> 插入覆盖表 test2 从测试 a 中选择 ax 连接测试 b on ax=bx; -- stupied join 强制非平凡的 map-reduce

    bash> hadoop fs -cat /user/hive/warehouse/test2/000001_0

    1

    5

    9

*   展示分桶。您可以看到键是随机分配的，没有任何排序顺序：

    hive> 创建由 (x) 聚类的表 test3(x int) 成 4 个桶；

    hive> 设置 hive.enforce.bucketing = true;

    蜂巢>插入覆盖表test3从测试中选择*；

    bash> hadoop fs -cat /user/hive/warehouse/test3/000000_0

    4

    8

    0

*   带排序的分桶。结果是部分排序的，不是完全排序的

    hive> create table test4(x int) clustered by (x) sorted by (x desc)分为4个桶；

    蜂巢>插入覆盖表test4从测试中选择*；

    bash> hadoop fs -cat /user/hive/warehouse/test4/000001_0

    1

    5

    9

您可以看到值按升序排序。看起来像 CDH3 中的 Hive 错误？

*   在没有集群的情况下通过语句进行部分排序：

    hive> create table test5 as select x from test distribution by x sort by x desc;

    bash> hadoop fs -cat /user/hive/warehouse/test5/000001_0

    9

    5

    1

*   使用我修补的 TotalOrderParitioner：

    hive> 设置 hive.mapred.partitioner=org.apache.hadoop.mapred.lib.TotalOrderPartitioner;

    蜂巢> 设置 total.order.partitioner.natural.order=false

    hive> 设置 total.order.partitioner.path=/user/training/out_data2

    hive> create table test6(x int) clustered by (x) sorted by (x)分为4个桶；

    蜂巢>插入覆盖表test6从测试中选择*；

    bash> hadoop fs -cat /user/hive/warehouse/test6/000000_0

    1

    2

    0

    bash> hadoop fs -cat /user/hive/warehouse/test6/000001_0

    3

    4

    5

    bash> hadoop fs -cat /user/hive/warehouse/test6/000002_0

    7

    6

    8

    bash> hadoop fs -cat /user/hive/warehouse/test6/000003_0

    9

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-08-04T15:59:38.757

CLUSTER BY 不产生全局排序。

接受的答案（由 Lars Yencken 撰写）通过声明减速器将接收非重叠范围来误导。正如 Anton Zaviriukhin 正确指向 BucketedTables 文档一样，CLUSTER BY 基本上是 DISTRIBUTE BY（与 bucketing 相同）加上每个 bucket/reducer 中的 SORT BY。并且 DISTRIBUTE BY 只是简单地将散列和 mods 放入桶中，虽然散列函数[可以](http://lemire.me/blog/2011/08/29/why-cant-hash-tables-preserve-the-order-of-keys/)保留顺序（i 的散列 > j 的散列，如果 i > j），但散列值的 mod 不会。

这是显示重叠范围的更好示例

[http://myitlearnings.com/bucketing-in-hive/](http://myitlearnings.com/bucketing-in-hive/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-07-25T15:43:44.633

据我了解，简短的回答是否定的。你会得到重叠的范围。

来自[SortBy 文档](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+SortBy#LanguageManualSortBy-SyntaxofClusterByandDistributeBy)：“Cluster By 是 Distribute By 和 Sort By 的捷径。” “具有相同 Distribute By 列的所有行都将进入同一个 reducer。” 但是没有信息可以通过保证不重叠的范围来分发。

此外，来自[DDL BucketedTables 文档](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL+BucketedTables)：“Hive 如何在存储桶之间分配行？通常，存储桶编号由表达式 hash_function(bucketing_column) mod num_buckets 确定。” 我想 Cluster by in Select 语句使用相同的原则在减速器之间分配行，因为它的主要用途是用数据填充分桶表。

我创建了一个包含 1 个整数列“a”的表，并在那里插入了从 0 到 9 的数字。

然后我将减速器的数量设置为 2 `set mapred.reduce.tasks = 2;`。

并且`select`该表中的数据带有`Cluster by`子句 `select * from my_tab cluster by a;`

并收到了我预期的结果：

```
0
2
4
6
8
1
3
5
7
9 
```

所以，第一个减速器（数字 0）得到偶数（因为它们的模式 2 给出 0）

第二个减速器（编号 1）得到奇数（因为它们的模式 2 给出 1）

这就是“分发方式”的工作原理。

然后“排序依据”对每个减速器内的结果进行排序。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-11T07:52:55.750

用例：当有一个大数据集时，应该像 sort by 那样进行排序，所有集合 reducer 在合并之前在内部对数据进行排序，从而提高性能。在按顺序排列时，较大数据集的性能会降低，因为所有数据都通过单个减速器传递，这会增加负载并因此需要更长的时间来执行查询。请参见下面关于 11 节点集群的示例。 [![在此处输入图像描述](../Images/f9be5c32f2ceef8e7471836d95184005.png)](https://i.stack.imgur.com/gPUHb.png)

这是 Order By 示例输出[![在此处输入图像描述](../Images/090e9cb7431e35f193d132a19452ab07.png)](https://i.stack.imgur.com/SWyjl.png)

这是排序方式示例输出[![在此处输入图像描述](../Images/1c92a411ee7d4ab6f5dfbcb4bdfb8617.png)](https://i.stack.imgur.com/R3iuh.png)

这个是 Cluster By example[![在此处输入图像描述](../Images/fcc0fa51792998a2cc5885c2940bd967.png)](https://i.stack.imgur.com/IAmRS.png)

我观察到，sort by、cluster by和distribute by的数字是**相同**的，但内部机制不同。在 DISTRIBUTE BY 中：相同的列行将转到一个 reducer，例如。DISTRIBUTE BY(City) - 一列中的班加罗尔数据，一个减速器中的德里数据：

[![在此处输入图像描述](../Images/dc3ab8a4b502b4ea7b808ad8ea6a1af0.png)](https://i.stack.imgur.com/ka9BW.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-02T16:17:36.940

SortBy：N个或更多具有重叠范围的排序文件。

OrderBy：单输出，即完全排序。

分发方式：通过保护 N 个减速器中的每一个来分发，以获得列的非重叠范围，但不对每个减速器的输出进行排序。

欲了解更多信息[http://commandstech.com/hive-sortby-vs-orderby-vs-distributeby-vs-clusterby/](http://commandstech.com/hive-sortby-vs-orderby-vs-distributeby-vs-clusterby/)

ClusterBy：参考上面同样的例子，如果我们使用Cluster By x，两个reducer会进一步对x上的行进行排序：

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-29T05:37:06.830

如果我理解正确

1.sort by - 只对reducer内的数据进行排序

2.order by - 通过将整个数据集推送到单个减速器来全局排序。如果我们确实有很多数据（倾斜），这个过程将花费很多时间。

3.  cluster by - 通过 key hash 智能地将内容分配到 reducer 并进行排序，但不授予全局排序。一个 key(k1) 可以放入两个 reducer。第一个 reducer 获得 10K K1 数据，第二个可能获得 1K k1 数据。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-19T14:25:56.350

Cluster by 是按 reducer 排序的，不是全局的。在许多书中，它也被错误地或混淆地提及。它有特殊用途，例如您将每个部门分配给特定的减速器，然后按每个部门中的员工姓名排序，并且不关心要使用的集群的部门顺序，并且由于工作负载分布在减速器之间，它的性能更高.

# c - 比较位与奇偶校验

> ID：13715045
> 
> 赞同：0
> 
> 时间：2012-12-05T01:42:59.703
> 
> 标签：c, bit-manipulation

将标志（0x00010001）按位与整数进行比较并查看整数中的两个位是否都设置的最有效方法是什么？

换句话说，执行以下操作的最有效方法是什么？

```
 bit = (number & 0x001 ) &  (number 0x 0x00010000 ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T01:46:23.587

一个简洁的解决方案，可扩展到您想要同时测试的任意数量的位：

```
!(~number & 0x00010001) 
```

我用按位非反转所有位`number`。如果这两个位都设置了，那么这两个位现在都将为 0，并且`&`与掩码按位与将导致 0。对 0 应用逻辑 NOT 将返回非零整数。

如果任何一位为 0，则反转该位将使其为 1。因此按位与后的结果将非零，非零整数的逻辑非将返回 0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T02:42:21.927

我会去

```
(number & 0x00010001) == 0x00010001 
```

当且仅当两个位`number`都设置时，这将是正确的。

# web-services - 在哪里可以找到 cxf/cxf.xml、cxf-extension-soap.xml、cxf-servlet.xml

> ID：13715048
> 
> 赞同：12
> 
> 时间：2012-12-05T01:43:01.340
> 
> 标签：web-services, wsdl, cxf

我是任何开放框架的新手（我是基于 java 的解决方案工程师）并试图构建一个 cxf 项目。

我知道我需要有`applicationContext.xml`类似的文件和内容

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
xmlns:cxf="http://cxf.apache.org/core" xmlns:jaxws="http://cxf.apache.org/jaxws"
xmlns:http-conf="http://cxf.apache.org/transports/http/configuration"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context  http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd
        http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd
        http://cxf.apache.org/transports/http/configuration http://cxf.apache.org/schemas/configuration/http-conf.xsd">

<import resource="classpath:META-INF/cxf/cxf.xml" />
<import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" />
<import resource="classpath:META-INF/cxf/cxf-servlet.xml" />

<http-conf:conduit name="*.http-conduit">
    <http-conf:client ReceiveTimeout=“300000“ AllowChunking="false"/>
</http-conf:conduit>

<import resource="classpath:META-INF/cxf/cxf.xml" />
<import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" />
<import resource="classpath:META-INF/cxf/cxf-servlet.xml" />

<cxf:bus>
    <cxf:features>
        <cxf:logging />
    </cxf:features>
</cxf:bus>

</beans> 
```

在里面。

我现在想知道在哪里可以下载
`cxf/cxf.xml, cxf-extension-soap.xml, cxf-servlet.xml`文件。

还是说我创建了一个动态 Web 项目是错误的？其他一些项目类型会自动生成这些文件吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-07-22T10:01:01.217

我知道这是一个旧帖子，但这可能对其他人有所帮助

`cxf-extension-soap.xml`在`cxf-rt-binding-soap`罐子里，但你需要`cxf-rt-frontend-jaxws`

`cxf-servlet.xml`在`cxf-rt-transports-http`罐子里

`cxf.xml`在`cxf-rt-core`jar 中（这是上述依赖项的传递依赖项）

因此，如果您包含`cxf-rt-frontend-jaxws`和`cxf-rt-transports-http`作为依赖项（例如，使用 Maven），您的项目应该可以正常工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-06T05:48:29.780

> 还是说我创建了一个动态 Web 项目是错误的？其他一些项目类型会自动生成这些文件吗？

您创建的 war 文件通常只有一个清单文件位于`META-INF`名为`MANIFEST.MF`. 此文件包含您的构建元信息。对我来说我有

```
Manifest-Version: 1.0
Gradle-Version: 2.0-rc-2
Created-By: 1.6.0_31 (Sun Microsystems Inc.)
Version: 10.51
Build: dev
Build-Timestamp: 10/01/2015 12:53:32
Build-User: athakur
Build-Host: ATHAKUR 
```

当您构建项目以创建 jar 或 war 时，会自动创建此目录。它可以具有其他属性，例如主类[[Refer this Q]](https://stackoverflow.com/questions/70216/whats-the-purpose-of-meta-inf)。

现在来回答你的问题。许多库将其配置文件放在相应的 jars META-INF 文件夹中。这只是另一个示例，您要查找的罐子是 CXF 罐子。

[![在此处输入图像描述](../Images/247360c07a201184d48f0a20a7dfa740.png)](https://i.stack.imgur.com/Jt27z.png) [![在此处输入图像描述](../Images/6cc9f289730344c3578e98aecee77a86.png)](https://i.stack.imgur.com/ZXhSR.png)

对于 gradle，您可以在`build.gradle`文件中添加以下内容

```
compile("org.apache.cxf:cxf-rt-frontend-jaxrs:3.1.3")
compile("org.apache.cxf:cxf-rt-frontend-jaxws:3.1.3")
compile("org.apache.cxf:cxf-rt-transports-http:3.1.3") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-09T22:59:15.607

这些文件中的每一个都可以在您需要包含在项目中的 CXF jar 中找到。

[cxf-servlet.xml](http://svn.apache.org/viewvc/cxf/trunk/rt/transports/http/src/main/resources/META-INF/cxf/cxf-servlet.xml?view=markup)

[cxf.xml](http://svn.apache.org/viewvc/cxf/trunk/rt/core/src/main/resources/META-INF/cxf/cxf.xml?view=markup)

[cxf-扩展-soap.xml](http://svn.apache.org/viewvc/cxf/trunk/rt/bindings/soap/src/main/resources/META-INF/cxf/cxf-extension-soap.xml?view=markup)

我一直发现启动和运行 CXF 项目的最快方法是使用 Maven Archetype。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-17T19:02:47.567

这是一篇旧帖子，但它仍然适用于将旧 CXF 迁移到新版本的人。我发现`cxf-rt-bindings-soap-3.1.7.jar`不再有`classpath:META-INF/cxf/cxf-extension-soap.xml`

看到这个：[REST CXF 和 Spring cxf-extension-jaxrs-binding File not found 异常？](https://stackoverflow.com/questions/10721243/rest-cxf-and-spring-cxf-extension-jaxrs-binding-file-not-found-exception)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-10T12:30:00.600

cxf 3.2.X 版本的 cxf-extension-http.xml 和 cxf-extension-soap.xml 你只需要包含这一行 cxf-extension-jaxws.xml

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-26T20:12:35.950

web.xml可以是这样的

CXF

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:ApplicationContext-cxf.xml</param-value>
</context-param>

<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>

<servlet>
    <servlet-name>CXFServlet</servlet-name>
    <display-name>CXF Servlet</display-name>
    <servlet-class>
        org.apache.cxf.transport.servlet.CXFServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>CXFServlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

以下是一个工作 ApplicationContext.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:jaxws="http://cxf.apache.org/jaxws" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:cxf="http://cxf.apache.org/core" xmlns:task="http://www.springframework.org/schema/task"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
     http://www.springframework.org/schema/beans/spring-beans.xsd http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.1.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd
     http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-4.1.xsd">

    <import resource="classpath:META-INF/cxf/cxf.xml"/>
<import resource="classpath:META-INF/cxf/cxf-extension-xml.xml"/>
<import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" />

    <task:annotation-driven />

    <context:component-scan base-package="com.smoothexample">
        <context:include-filter type="annotation"
            expression="org.springframework.stereotype.Service" />
        <context:include-filter type="annotation"
            expression="org.springframework.stereotype.Component" />
        <context:include-filter type="annotation"
            expression="org.springframework.stereotype.Repository" />
    </context:component-scan>

    <context:annotation-config />
    <context:component-scan base-package="com.smoothexample" />

    <bean
        class="org.springframework.context.annotation.CommonAnnotationBeanPostProcessor" />

<bean id="addressSoapService" class="com.smoothexample.cxf.soap.ws.impl.AddressSoapServiceImpl" />

    <jaxws:endpoint id="addressEndpointId"
        implementorClass="com.smoothexample.cxf.soap.ws.impl.AddressSoapServiceImpl"
        implementor="#addressSoapService" address="/addressSoapService">

    </jaxws:endpoint>

</beans> 
```

所有的maven依赖定义如下，包括cxf/cxf.xml、cxf-extension-soap.xml、cxf-servlet.xml的jar

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.lal.pro</groupId>
    <artifactId>apache-cxf-soap-ws</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>
    <name>apache-cxf-soap-ws Maven Webapp</name>
    <url>http://maven.apache.org</url>

    <properties>
        <cxf.version>2.5.0</cxf.version>

        <org.springframework.version>4.1.1.RELEASE</org.springframework.version>

        <ch.qos.logback.version>1.1.3</ch.qos.logback.version>
        <org.sl4j.version>1.7.12</org.sl4j.version>
        <spring.ws.version>2.2.4.RELEASE</spring.ws.version>
    </properties>
    <dependencies>

        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-frontend-jaxws</artifactId>
            <version>${cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-transports-http</artifactId>
            <version>${cxf.version}</version>
        </dependency>

        <dependency>
            <groupId>javax.xml.bind</groupId>
            <artifactId>jaxb-api</artifactId>
            <version>2.1</version>
        </dependency>

    </dependencies>
    <build>
        <finalName>apache-cxf-soap-ws</finalName>
    </build>
</project> 
```

请在[http://www.smoothexample.com/webservices/apache_cxf_soap_web_services.html找到更多详细信息](http://www.smoothexample.com/webservices/apache_cxf_soap_web_services.html)

# c++ - 如何从 IStream 读取到 char 数组并将其写入另一个 IStream？

> ID：13715049
> 
> 赞同：3
> 
> 时间：2012-12-05T01:43:17.000
> 
> 标签：c++, windows, visual-studio, sockets, istream

我正在尝试通过套接字连接发送图像，但以下代码有问题：

```
//stream to char array
STATSTG myStreamStats;
ULONG bytesSaved;
myStream->Stat(&myStreamStats, 0);
char* streamData = new char[myStreamStats.cbSize.QuadPart];
if(myStream->Read(streamData, myStreamStats.cbSize.QuadPart, &bytesSaved) == S_OK)
    cout<<"OK!"<<endl;
else
    cout<<"Not OK!"<<endl;

//char array to stream
if(myStreamR->Write(streamData, myStreamStats.cbSize.QuadPart, &bytesSaved) == S_OK)
    cout<<"OK!"<<endl;
else
    cout<<"Not OK!"<<endl;

//saving the image to a file
myImage = Image::FromStream(myStreamR);
myImage->Save(lpszFilename, &imageCLSID, NULL); 
```

该程序编译并运行，但我没有得到我的图像。如果我使用原始的“myStream”而不是“myStreamR”，它是由从原始流中读取的字符数组构造的，我会得到它。

输出是两个“OK！”，这意味着所有字节都被复制到数组中，并且所有字节都被粘贴到新的流中。但是，我检查了 savedBytes，发现在 read() 之后它的值是 0（不好），而在 write() 之后它等于我给的流大小。那么，如果什么都没读，为什么 read() 会给我一个“S_OK”标志呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T03:55:18.690

在向其写入数据后，您不会`MyStreamR`回到起点。`Image::FromStream()`从流的当前位置开始读取，因此如果您不返回，则将没有数据可供读取。

尝试这个：

```
STATSTG myStreamStats = {0};
if (FAILED(myStream->Stat(&myStreamStats, 0)))
    cout << "Stat failed!" << endl;
else
{
    char* streamData = new char[myStreamStats.cbSize.QuadPart];

    ULONG bytesSaved = 0;
    if (FAILED(myStream->Read(streamData, myStreamStats.cbSize.QuadPart, &bytesSaved)))
        cout << "Read failed!" << endl;
    else
    {
        //char array to stream
        if (FAILED(myStreamR->Write(streamData, bytesSaved, &bytesSaved)))
            cout << "Write failed!" << endl;
        else
        {
            LARGE_INTEGER li;
            li.QuadPart = 0;

            if (FAILED(myStreamR->Seek(li, STREAM_SEEK_SET, NULL)))
                cout << "Seek failed!" << endl;
            else
            {
                //saving the image to a file
                myImage = Image::FromStream(myStreamR);
                if (myImage1->GetLastStatus() != Ok)
                    cout << "FromStream failed!" << endl;
                else
                {
                    if (myImage->Save(lpszFilename, &imageCLSID, NULL) != Ok)
                        cout << "Save failed!" << endl;
                    else
                        cout << "OK!" << endl;
                }
            }
        }
    }
} 
```

# ruby-on-rails - Rails 应用程序：缺少带有 {:handlers=>[:erb, :rjs, :builder, :rhtml, :rxml], :formats=>["image/jpeg", "image/pjpeg", "image/png" 的模板, "图像/gif"]}

> ID：13715050
> 
> 赞同：0
> 
> 时间：2012-12-05T01:43:27.420
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, routes, handlers

我的 rails 应用程序使用名为“four_oh_four”的路由来提供自定义 404 页面，该页面使用网站的应用程序布局看起来不错。

我已经开始收到以下错误：

```
Missing template info/four_oh_four with {:handlers=>[:erb, :rjs, :builder, :rhtml, :rxml], :formats=>["image/jpeg", "image/pjpeg", "image/png", "image/gif"], :locale=>[:en, :en]} 
```

我似乎无法弄清楚我需要做什么来解决这个问题。有任何想法吗？

这是控制器的样子（真的没有）：

```
def four_oh_four
end 
```

这是 routes.rb：

```
match 'four_oh_four' => 'info#four_oh_four', :as => :four_oh_four
...
# Catch 404s
match '*path' => 'info#four_oh_four', :status => 404 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T02:46:13.293

You can check if there is a file named "four_oh_four.html.erb" in your info dir. It could be mistyping error . Usually the 404 page is located in /public .

# android - 安卓自动更新

> ID：13715054
> 
> 赞同：2
> 
> 时间：2012-12-05T01:43:55.397
> 
> 标签：android, auto-update

我看到很多与自动更新相关的问题和答案，正确答案是“没有用户参与就无法完成”。但是，我的许多应用程序都在 Play 商店中选中了“自动更新”复选框，我看到它们自动更新，然后在通知栏中通知我它们实际上已经更新。

很明显它*可以完成......我想知道我的各种选择是让我的应用程序拥有这个功能。它需要在谷歌Play商店中吗？可以在其他商店代替吗？它是否可用于侧面加载的apk......等等。

TIA。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T01:50:29.383

在标准手机上，唯一的方法是通过 google play 商店，并且只有在用户选择自动更新之后。当应用程序的权限发生变化时，它将停止工作。此外，谷歌可以随意从您的设备中删除应用程序。

以上适用于所有安装了 google 服务和 play 商店的 Android 设备。此外，通过适用于 Android 的 Amazon Appstore 购买的应用程序会在 Amazon Kindle Fire 设备上自动更新，一些制造商拥有自己的应用程序商店，其中可能包含该功能；想到三星和联想。

如果您控制硬件或拥有根设备，则可以创建/安装系统应用程序，该应用程序可以安装任何应用程序而无需用户干预。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T02:54:05.847

这里更多的是关于如何做的机制而不是理论。在实践中，这很容易实现。

在您的清单中：

```
 <receiver android:name=".BcastReciever">
        <intent-filter>
            <action android:name="android.intent.action.PACKAGE_REPLACED" />
            <data android:scheme="package" android:path="com.your.package" />
        </intent-filter>
    </receiver> 
```

然后在您的广播接收器中：

```
public class BcastReciever extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getDataString().contains("com.your.package")){
            Intent startActivityIntent = new Intent(context, Your.class);
            startActivityIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);
            startActivityIntent.setAction("onboot");
            context.startActivity(startActivityIntent);
        }
    }
} 
```

如果这是您想要的，您也可以只重新启动服务而不是触发活动。

# python - pygame 计数

> ID：13715072
> 
> 赞同：0
> 
> 时间：2012-12-05T01:47:10.343
> 
> 标签：python, pygame

在这段代码中，当我的角色与其中一个项目发生碰撞时，我有一个由“食物”组成的列表，它会自行删除，添加分数，并在列表中创建一个新食物。所以基本上屏幕上会弹出一种新食物。我有敌人在屏幕上飞来飞去并减去分数，他们也在一个列表中。我正在尝试编写我的程序，所以当我删除两个食物时，将使用“count”将一个新敌人添加到列表中。但由于某种原因，它什么也没做。谁能指出我正确的方向？

```
 def update(self) :
           self.score = self.player.update(self.score)
           for triangle in self.triangles:
               triangle.update(self.screen.get_rect())    
            #self.ball.update(self.screen.get_rect())
                if self.player.rect.colliderect(triangle.rect):
                    self.score -= 2
            for i, food in enumerate(self.foods):
                count = 0
                if self.player.rect.colliderect(food.rect):
                    self.score += 100
                    count += 1
                    del self.foods[i]
                    self.foods.append(Food(random.randint(0, 640), random.randint(0, 448)))
                    if count%2 == 0:
                        self.triangles.append(Ball(random.randint(0, 640), random.randint(0, 448)))
            if self.score < -1:
                pygame.mixer.music.stop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T01:57:36.247

您在每次迭代开始时将计数设置为 0，因此它永远不会超过 1。您需要在循环之外创建计数。

```
count = 0
for i, food in enumerate(self.foods):
    ... 
```

# android - 词预测引擎

> ID：13715078
> 
> 赞同：0
> 
> 时间：2012-12-05T01:47:50.983
> 
> 标签：android

我正在寻找一个类似于 android 4.1 的单词预测的客户端。我已经为引擎构建了所有代码，以接收任何类型的文本文件并对其进行解析，以便在预测中使用这些句子作为参考。

我计划使用用户的 SMS 对话作为参考，但我还需要一些基本文本文件来最初使用。关于一个好的文本对话源来解析和进行单词预测的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:58:59.883

我会简单地抓取推特样本流，制作一个简单的语言过滤器并存储文本数据。推文在文本上类似于 SMS，而且 twitter API 很容易学习。

[https://dev.twitter.com/docs/streaming-apis/streams/public](https://dev.twitter.com/docs/streaming-apis/streams/public)

# php - 输入时提交 jQuery/AJAX 登录表单

> ID：13715081
> 
> 赞同：4
> 
> 时间：2012-12-05T01:48:18.983
> 
> 标签：php, javascript, jquery, ajax

我有一个相当简单的登录表单，它使用 jQuery AJAX 请求提交。目前，提交它的唯一方法是按下“登录”按钮，但我希​​望能够在用户按下“Enter”时提交表单。

我只使用 jQuery AJAX 请求完成过表单提交，但我不确定我需要进行哪些修改才能在用户按下“Enter”时提交表单。

HTML：

```
<form>

    <label for="username">Username</label>
    <input type="text" id="username" placeholder="Username" />

    <label for="password">Password</label>
    <input type="text" id="password" placeholder="Password" />

</form>

<button id="login">Login</button> 
```

JavaScript：

```
$(document).ready(function() {

    $('#login').click(function() {

        $.ajax({
            type: "POST",
            url: 'admin/login.php',
            data: {
                username: $("#username").val(),
                password: $("#password").val()
            },
            success: function(data)
            {
                if (data === 'Correct') {
                    window.location.replace('admin/admin.php');
                }
                else {
                    alert(data);
                }
            }
        });

    });

}); 
```

摘自 login.php：

```
$stmt = $pdo->prepare("SELECT * FROM users WHERE username = :username AND password = :password");
$stmt->execute(array(
    ':username' => $user,
    ':password' => $pass
));

$rows = $stmt->fetchAll(PDO::FETCH_ASSOC);

$affected_rows = $stmt->rowCount();

if ($affected_rows == 1) {
    //add the user to our session variables
    $_SESSION['username'] = $username;
    echo ('Correct');
} else {
    echo 'Incorrect username/password';
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T01:56:33.700

在表单中添加 ID 并将登录按钮转换为提交按钮：

```
<form id="myform">

<label for="username">Username</label>
<input type="text" id="username" placeholder="Username" />

<label for="password">Password</label>
<input type="text" id="password" placeholder="Password" />

<input type="submit" id="login" value="Login"/>

</form> 
```

然后，而不是使用点击事件：

```
$('#login').click(function() { 
```

使用提交事件：

```
$('#myform').submit(function() { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-25T06:30:47.993

**HTML**

```
<form id='myfrm'>
    <label for="username">Username</label>
    <input type="text" id="username" placeholder="Username" />

    <label for="password">Password</label>
    <input type="text" id="password" placeholder="Password" />

    <button id="login">Login</button> 
</form> 
```

**JavaScript：**

```
$(document).ready(function() {

    $('#myform').submit(function() {

        $.ajax({
            type: "POST",
            url: 'admin/login.php',
            data: {
                username: $("#username").val(),
                password: $("#password").val()
            },
            success: function(data)
            {
                if (data === 'Correct') {
                    window.location.replace('admin/admin.php');
                }
                else {
                    alert(data);
                }
            }
        });
        //this is mandatory other wise your from will be submitted.
        return false; 
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T01:52:32.773

```
​$('form').on('keyup', function(e){
    if(e.which == 13 || e.keyCode == 13){
        alert('enter pressed');
    }        
});​​ 
```

# matlab - GUI 图形无法在双显示器上打开，但其他图形正常

> ID：13715083
> 
> 赞同：5
> 
> 时间：2012-12-05T01:48:27.747
> 
> 标签：matlab, matlab-figure, matlab-guide, multiple-monitors

我在 Windows 7 PC 上使用 matlab R2012a (7.14.0.737) 64 位。我有 2 台显示器。我希望能够在第二台显示器（左侧）上打开一个 matlab GUI 图。

在命令行打开数字那里工作正常。

```
h = figure( ... , 'position',[some -value on the other screen y w h) 
```

但是尽管 1）在 GUI 窗口属性中输入了正确的位置值和/或 2）使用代码，但 GUI 图形总是在第一台监视器上制作

```
set( hObject, 'position',[some -value on the other screen y w h) 
```

在 GUI 打开功能中。

但是，如果我将此代码放在输出函数中，就可以了。不雅，你看到的图出现然后移过去。GUI 中的值也按照我希望的方式设置。似乎只是被matlab忽略了。有任何想法吗？

*   更新 *

`movegui(fig, 'onscreen')`从那以后，我在打开指南创建的图形时读到了 matlab 调用。参数。我想现在的问题是如何覆盖它，或者如何将“屏幕上”设置为另一台显示器。在这方面仍然没有解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:25:37.630

您会注意到 matlab 中的 GUIDE GUI 具有几个在打开时自动调用的默认函数。这是 matlab 的一个恼人的功能，其中至少有两个函数会覆盖您的默认图形定位。也许可以修改[此处讨论的解决方案之一来解决您的问题。](http://www.mathworks.com/matlabcentral/newsreader/view_thread/149224)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:14:10.743

这不能直接从*GUIDE*中完成。

**解决方法**

导出你的图：*GuideMenu -> File -> Export*

换行：

```
movegui(gui_hFigure,'onscreen'); 
```

和：

```
set(gcbf, 'position',[some -value on the other screen y w h) 
```

* * *

对我来说（*R2012a*），这显示在导出的 GUI 的第 330 行附近：

```
...
  % openfig (called by local_openfig below) does this for guis without
  % the LayoutFcn. Be sure to do it here so guis show up on screen.
  movegui(gui_hFigure,'onscreen');   %% COMMENT OUT OR REPLACE THIS LINE
else
  gui_hFigure = local_openfig(gui_State.gui_Name, 
... 
```

# mysql - MySQL 存储过程 BEGIN/END 语句抛出错误

> ID：13715085
> 
> 赞同：2
> 
> 时间：2012-12-05T01:48:37.060
> 
> 标签：mysql

我正在尝试运行存储过程并在调试时遇到实际问题.....

我已经尝试将所有内容都删掉以尝试追踪问题，甚至对此我也遇到了错误：

```
DROP PROCEDURE IF EXISTS sp_transpose_tickets;
CREATE PROCEDURE sp_transpose_tickets ()
BEGIN
select 1;
END 
```

这是在我的本地机器上，在 root 用户下，所以授予了所有权限......运行 mySQL 5.5.20。

错误是：

错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 '' 附近使用正确的语法

错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“END”附近使用正确的语法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T01:59:16.683

您应该定义分隔符：

```
DELIMITER $$

DROP PROCEDURE IF EXISTS sp_transpose_tickets $$
CREATE PROCEDURE sp_transpose_tickets ()
BEGIN
    select 1;
END$$

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-11T13:48:30.807

我在使用 Dbeaver 时遇到了同样的问题。我需要做的就是从头到尾选择我的查询并运行查询。如果我只将光标放在开头而不选择所有代码，则会向我显示相同的错误。

# mysql - MySQL 从表 1 中选择一行，从表 3 中选择几行

> ID：13715086
> 
> 赞同：1
> 
> 时间：2012-12-05T01:48:43.623
> 
> 标签：mysql, sql

`tblProjects``tblPrCat`与两个表中的`t1_id`-columns 链接。与两个表中的-columns`tblCategories`链接。一个项目可能有几个类别。`tblPrCat``t3_id`

```
tblProjects
t1_id
t1_name

tblPrCat
t1_id
t3_id

tblCategories
t3_id
t3_name 
```

我正在尝试使用单个`SELECT`句子来获取项目的值（或 10 个）并获取与每个项目对应的类别的所有名称。

这是否可能在单个`SELECT`句子中返回每个项目的单行但多个类别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T01:54:21.450

您可以尝试这样的查询：

```
SELECT
    tblProjects.name AS project,
    tblCategories.name AS category
FROM
    tblProjects
    INNER JOIN tblPrCat USING (t1_id)
    INNER JOIN tblCategories USING (t3_id)
WHERE
    /* Your search criteria here */ 
```

注意：您会看到与每个项目关联的每个类别名称，但如果每个项目有多个类别，您会看到似乎是重复的项目名称。准备好在你的代码中处理这个问题。

**编辑：** 我曾假设（可能是错误的）每个项目至少有一个类别。为确保您也看到没有项目名称，请改用：

```
SELECT
    tblProjects.name AS project,
    IFNULL(tblCategories.name, 'No categories!') AS category
FROM
    tblProjects
    LEFT JOIN tblPrCat USING (t1_id)
    LEFT JOIN tblCategories USING (t3_id)
WHERE
    /* Your search criteria here */ 
```

**编辑：** 要仅显示每个项目一次，但将类别名称的摘要显示为逗号分隔的列表，请使用以下命令：

```
SELECT
    tblProjects.name AS project,
    IFNULL(GROUP_CONCAT(tblCategories.name), 'No categories!') AS category
FROM
    tblProjects
    LEFT JOIN tblPrCat USING (t1_id)
    LEFT JOIN tblCategories USING (t3_id)
WHERE
    /* Your search criteria here */
GROUP BY
    tblProjects.t1_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T01:55:29.800

您可以使用联接：

```
SELECT p.t1_name, c.name
FROM tblProjects p
LEFT JOIN tblPrCat prc ON (p.t1_id = prc.t1_id)
LEFT JOIN tblCategories c ON (c.t3_id = prc.t3_id) 
```

请注意，这将多次列出项目。IE

```
Project1    Cat1
Project1    Cat2
Project2    Cat1 
```

或者，如果您只想查看每个项目一次，您可以使用 Group Concat：

```
SELECT p.t1_name, GROUP_CONCAT(c.name)
FROM tblProjects p
LEFT JOIN tblPrCat prc ON (p.t1_id = prc.t1_id)
LEFT JOIN tblCategories c ON (c.t3_id = prc.t3_id)
GROUP BY p.t1_id 
```

这将产生：

```
Project1    Cat1, Cat2
Project2    Cat1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T01:52:58.837

```
SELECT * FROM 
    tblProjects p , 
    tblPrCat pc ,
    tblCategories c
WHERE
    c.t3_id = pc.t3_id
AND
    p.t1_id = pc.t1_id
AND
    p.t1_id = '1' 
```

# java - 当超时设置已经在 HttpClient 级别完成时，为 HttpGet 和 HttpHead 方法设置超时是否更好？

> ID：13715089
> 
> 赞同：1
> 
> 时间：2012-12-05T01:49:15.817
> 
> 标签：java, timeout, httpclient

我们有以下代码可以与我们的网站通信，并且我们在 HttpClient 级别设置了超时阈值，以确保“我们不会等待很长时间才能获得响应。”。代码是否足以满足上述要求？我们是否还需要为 HttpHead 方法设置额外的超时设置？

```
 HttpClient httpclient = new DefaultHttpClient();
        // the time it takes to open TCP connection.
        httpclient.getParams().setParameter(CoreConnectionPNames.CONNECTION_TIMEOUT, this.timeout);

        // timeout when server does not send data.
        httpclient.getParams().setParameter(CoreConnectionPNames.SO_TIMEOUT, this.timeout);

        // the head method
        HttpHead httphead = new HttpHead(url);

        HttpResponse response = httpclient.execute(httphead); 
```

# asp.net - 任何人都可以在初始 html 请求后解释 Chrome 延迟吗？

> ID：13715092
> 
> 赞同：1
> 
> 时间：2012-12-05T01:49:34.003
> 
> 标签：asp.net, performance, google-chrome

偶尔（但比预期的要频繁得多），我们的网络应用程序似乎会产生谷歌浏览器的延迟 - 并且已经这样做了很长时间。请查看此 Chrome 网络图；并注意第一次请求后的大时间间隔：

![Chrome 网络图](../Images/3b47b71768b89191bda4f68d780d230a.png)

有时页面加载速度尽可能快，所以我认为我们的 html 没有问题。此外，其他浏览器不会出现这些零星的延迟。

请注意，我始终运行最新版本的 Chrome。我们的网站是 ASP.NET 4.5。所有页面都是 SSL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:12:15.323

经过大量研究，我们认为该问题已在此处记录（并已解决）：http: //code.google.com/p/chromium/issues/detail?id= [155270](http://code.google.com/p/chromium/issues/detail?id=155270)

我们已经下载了 Chrome 的 24-beta 版，并且不再看到这个问题。

# html - 为什么选择元素没有其他表单元素那么宽？

> ID：13715096
> 
> 赞同：2
> 
> 时间：2012-12-05T01:49:52.873
> 
> 标签：html, css, forms

如果我将选择和文本输入设置为相同的宽度，则选择元素的宽度始终比文本输入的宽度小几个像素。无论我以像素或百分比设置宽度，这似乎都会发生。有谁知道为什么？有什么办法可以防止这种情况发生吗？

最小演示：[http ://codepen.io/nosecreek/pen/wehKu](http://codepen.io/nosecreek/pen/wehKu)

*在 Chrome 和 IE7 中测试*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T02:12:15.180

我认为这与渲染的 box-sizing 有关。选择的视觉部分小于定义宽度的框。将其包含在您的 css 中，它将看起来很正常。

```
input, select {
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
} 
```

[http://codepen.io/joe/pen/taJnz](http://codepen.io/joe/pen/taJnz)

参考：[在 HTML 中选择输入和文本输入 - 使宽度相等的最佳方法？](https://stackoverflow.com/questions/895904/select-inputs-and-text-inputs-in-html-best-way-to-make-equal-width)

编辑：我知道为什么会发生这种情况。我认为这是因为当您指定宽度时，您是在告诉它内部框的大小，即实际输入区域。文本框还带有标准边框，每个边框为 2px，这是文本区域宽度的额外大小。添加上面的 CSS 会改变宽度的计算方式。当我将文本框的边框设为 1px 时，它只比选择框大 2 px。这似乎可以解释它。

# php - 从字符串中提取数字，将它们保存到数组中，然后将它们放回字符串中

> ID：13715099
> 
> 赞同：1
> 
> 时间：2012-12-05T01:50:16.907
> 
> 标签：php, arrays, preg-replace, preg-match, preg-match-all

我一直在使用 stackoverflow 来学习很多关于 PHP 和 JS（包括 jquery）的知识，所以我一直倾向于谷歌，但我没有找到这个问题的确切答案

我有很多带有数字混合单词的字符串，例如：

“来自 12 人的 60 条评论，20% 的用户”

这是一个示例，但它可能要复杂得多（“word_one 45 word_two word_three 657 word_four 32% word_five USD20”）

用途是内容本地化：

我想检索数字并将它们保存到数组中**-> 完成**

我想将这些数字与我在数据库中已有的数字相匹配，即如果我有

zh:“来自 2 个人的 2 条评论，2% 的用户”

es：“2 个角色的 2 个评论，el 2% de los usuarios” **-> 也完成了**

现在我要做的是用原始字符串中的数字替换从数据库中提取的匹配字符串中的数字（它们都是“2”，因为我以这种方式保存它们，以避免复数单数问题）英语。例子：

**我有这个英文：**

“来自 12 人的 60 条评论，20% 的用户”

**我在数据库中有这个：**

zh:“来自 2 个人的 2 条评论，2% 的用户”

es：“2 个角色的 2 个评论，el 2% de los usuarios”

**我想要这个西班牙语：**

“12 个角色的 60 条评论，el 20% de los usuarios”

代码：

```
$pattern = '!\d+!';
$repv = preg_replace($pattern, "2", $v);

preg_match_all($pattern, $v, $matches);     
$matchesnb = count($matches, 1);
$pattarray = array_fill("0", "1", array_fill("0", ($matchesnb-1), $pattern));
$reptarget = preg_replace($pattarray, $matches, $dbdata[1]); 
```

非常感谢提前！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:17:18.580

为什么不将模板句子保存在数据库中以便与该[`sprintf()`](http://php.net/manual/en/function.sprintf.php)功能一起使用？

```
$str = array(
    'en' => '%d reviews from %d people, %01.1f%% of users',
    'es' => '%d comentarios de %d personas, el %01.1f%% de los usuarios'
);
$res = sprintf($str['es'],60,12,20); 
```

* * *

**编辑：**句子中单词的顺序在所有语言中都不相同。出于这个原因，我认为给论点编号是一种更好的方法。我在下面的数组中添加了土耳其语选项，以显示 arg1 和 arg2 如何切换以及百分号如何更改位置（例如，它放在土耳其语中的数字之前，而不是之后）。

```
$str = array(
    'en' => '%1$d reviews from %2$d people, %3$01.1f%% of users',
    'es' => '%1$d comentarios de %2$d personas, el %3$01.1f%% de los usuarios',
    'tr' => '%2$d kullanıcıdan %1$d yorum, tüm kullanıcıların %%%3$01.1f\'si'
);
$res = sprintf($str['es'],60,12,20); 
```

# python - Windows“nul”文件上的 os.stat

> ID：13715101
> 
> 赞同：5
> 
> 时间：2012-12-05T01:50:42.470
> 
> 标签：python, windows, dev-null

为什么我不能调用`os.stat`特殊的 Windows 文件`nul`？

```
>>> import os
>>> os.stat('nul')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
WindowsError: [Error 87] The parameter is incorrect: 'nul' 
```

我可以打开它：

```
>>> f = open('nul', 'r')
>>> f.read(10)
'' 
```

我希望以跨平台的方式检查特殊文件，`/dev/null`并惊讶地发现我无法统计我可以打开的文件。`nul``stat.S_ISCHR`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T02:17:10.087

根据这个旧的 Python 错误，它应该是这样的：

[http://bugs.python.org/issue1311](http://bugs.python.org/issue1311)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T02:28:19.140

这是底层 Win32`GetFileAttributesEx()`和`CreateFile()`函数的行为，最终由`os.stat()`和调用`open()`。

# android - 安卓蓝牙获取波特率

> ID：13715103
> 
> 赞同：1
> 
> 时间：2012-12-05T01:50:50.020
> 
> 标签：android, bluetooth, baud-rate

嗨，目前正在从事一个通过蓝牙工作的项目。

我与之交谈的设备有几种不同的模式。这些模式中的每一种都使用不同的波特率。

我在这个项目中使用了蓝牙聊天示例。

我的问题如下

这些设备的每个返回都发回不同的结束字符串。("\r\n" , "\r")

我希望能够知道设备处于什么模式。我能想到的最好方法是找到设备当前的波特率。有什么方法可以从连接中找到信息吗？

# google-tv - 谷歌电视 chrome 报告 GMT

> ID：13715104
> 
> 赞同：2
> 
> 时间：2012-12-05T01:50:55.537
> 
> 标签：google-tv

我有一台 Sony NSZ-GS7 Google TV，我正在编写一个 HTML 应用程序。但是，我遇到了将时区报告为 GMT / UTC 的问题。我写了一个重现问题的[jsfiddle](http://jsfiddle.net/tommyodom/YAU2U/)。即使在框设置中正确设置了时区，调用 getTimezoneOffset 也会返回 0。

```
var date, offset;
date = new Date();
offset = date.getTimezoneOffset() / 60; 
```

我想知道这是否只是索尼的一个错误，或者它是否是核心谷歌电视/Chrome？

我的 Sony 正在运行 GTV 3.2，Chrome 报告为版本 11。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:52:22.260

这是目前正在跟踪的 Google TV 平台的问题 - 如果您想在[http://code.google.com/p/googletv-issues/](http://code.google.com/p/googletv-issues/)提交问题，它将在修复后更新。

# windows - 静态/动态链接混淆

> ID：13715114
> 
> 赞同：1
> 
> 时间：2012-12-05T01:52:05.080
> 
> 标签：windows, visual-c++, dll, static-libraries

我似乎在这里误解了一些东西。我有一个 DLL（比如 DLL_1），其中有一些 C++ 类导出供客户使用。

静态库使用这些导出的类（例如 SLib_1）。

还有另一个 DLL（比如 DLL_Client）**仅**依赖于上述静态库，因此链接到 SLib_1。所以我有：

DLL_Client ==> SLib_1 ==> DLL_1

在构建 SLib_1 时，链接器是否解析了从 DLL_1 导出的类？该部分是否仅在构建 DLL_Client 时发生？

根据上面的答案，我还有一个问题。考虑到我还有另一个静态库，比如 SLib_2。如果我像这样重绘上面的依赖路径：

DLL_Client ==> SLib_2 ==> SLib_1 ==> DLL_1（每个模块只知道并链接到它后面的模块）

DLL_1 导出的符号是否对 DLL_Client 可见？在编译/链接整个设置时我没有问题。我的问题只发生在运行时。也就是说，当我使用Dependency Walker 加载DLL_Client 时，我发现它抱怨无法解析DLL_1 中的导出函数。

是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:01:20.040

对于您的第一个问题，静态库只是目标文件的集合。构建静态库时没有解决任何问题（事实上，如果您只有头文件，那么您可以编译，您可以构建静态库，甚至不存在任何其他代码）。只有当您将这些目标文件链接到您的 DLL 中时，静态库中的依赖关系才会被解析。

对于您的第二个，简短的回答是否定的。当/如果一个静态库依赖于另一个库（静态或动态），静态库不做任何事情来使最终用户可以看到它所依赖的库中的符号。这又回到了这样一个事实，即它只是一个目标文件的集合。将目标文件放入库中通常不会¹改变任何关于符号可见性或任何类似的东西。

简而言之，如果 DLL_Client 需要 SLib_2 中的函数，*并且还*直接使用 DLL_1 中的函数，则它需要链接 SLib_2.lib 和 DLL_1.lib。

* * *

¹ Lest somebody bring them up, I'll add that libraries do often contain a few symbols that have somewhat...special visibility, such as weak externals. Even here, it's not putting them in the library that makes them special though -- it's just that when you put something in a library is nearly the only time those special visibility options are really necessary or useful.

# .net - 是否有用于 WCF (REST) 和 .NET SOAP 堆栈的库以将 req/resp 导出为 HAR 格式？

> ID：13715116
> 
> 赞同：0
> 
> 时间：2012-12-05T01:52:21.807
> 
> 标签：.net, wcf

我们试图让我们的代码更容易排除故障，因此我们希望将其保存到一个日志文件中，然后我们可以将其导入 fiddler 等。我们从 WCF 调用 REST 服务，从 .NET SOAP lib 调用 SOAP。

HAR 格式： http: [//www.softwareishard.com/blog/har-12-spec/](http://www.softwareishard.com/blog/har-12-spec/)

似乎符合要求！

是否有 .NET 库可以轻松将我的 req/resp 记录到 HAR ？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T02:18:19.050

对于 SOAP，我总是将原始 Xml 记录到 IDispatchMessageInspector 实例中的文件或数据库中。

之后，从 SoapUi 运行消息就很简单了。

这是一篇关于写这种东西的好博客：

[https://github.com/geersch/WcfMessageLogging](https://github.com/geersch/WcfMessageLogging)

# operating-system - 从逻辑地址转换为物理地址

> ID：13715119
> 
> 赞同：1
> 
> 时间：2012-12-05T01:52:45.327
> 
> 标签：operating-system, paging

我在这里有一个家庭作业问题，我有点困惑如何开始。我必须将逻辑地址 0、4、9、15、30 转换为它们的物理地址。我在网上看了，但还没有找到类似的例子。我发现了一些问题，但给定的信息却大不相同（例如给我每个逻辑地址的页面索引和偏移量）。下面是问题，我确实做了第 1 部分，这给了我 m=32 和 n-3。在正确的方向上的帮助会很棒！

![在此处输入图像描述](../Images/623856e9e3eb2488f43cff6bd44e0b69.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:41:39.303

想出上面的页表结构几乎是不可能的，它没有提供必要的细节。虽然我会尽力帮助你。但是，我会假设这些值是物理地址（可能是）。

**我们必须考虑以下细节：**
地址空间：32 字节
总页数：4
页大小：8 字节
寻址：1 字节

页表条目：6 8 0 1

严格来说，我们必须对页表条目进行索引，从而获得其中的偏移量。
所以我们只需要 2 位来索引页表条目（4 个条目），而 6 位到页中的偏移量（8 字节 - 64 位）。
此外，我们应该假设一字节寻址。

```
虚拟地址：（8 位）- 总计
0 0（2 位）- 页表条目。
    0 0 0 0 0 0（6 位）- 偏移到页面。

```

下一个问题是将逻辑转换为物理：0、4、9、15、30（最好将这些数字转换为二进制格式）

```
一个例子：
     PTE 偏移量
0 = (0 0) (0 0 0 0 0 0)

它索引物理地址为6的第一个页表条目，
偏移量为 0。
所以 6 + 0 = 6（物理地址）

```

```
另一个例子：
     PTE 偏移量
4 = (0 0) (0 0 0 1 0 0)

它索引物理地址为6的第一个页表条目，
偏移量为 4。
所以 6 + 4 = 10（物理地址）

```

我希望它会帮助你。问候， Raphael S.Carvalho

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T16:13:42.943

(1) 逻辑空间大小为 32，使用 5 位，页面大小为 8，使用 3 位。

问题状态为“必需”，我认为这意味着使用的最少位数。那么高阶需要 5-3 = 2 位，低阶需要 3 位。

由于我们使用一字节寻址，如果我们使用 5-3 = 2 位来表示页码，那么我们可以发现地址格式不能用于物理地址格式。所以我们可以使用 8-3 的高阶 = 5 位表示页码，其余 3 位表示页偏移量。

(2)。以逻辑地址 4 为例，它的页码为 0，页偏移量为 4。根据表格，第 0 页映射到第 6 帧。因此，它的物理地址应该是

> (00110) (100) = 6 * 8 + 4 =54

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-20T04:52:52.007

*   逻辑地址：5 位（2^5 = 32 字节）和偏移量（低位部分）始终是一页的大小，即 3 位（2^3 = 8 字节）。因此，一阶是 5 - 3 = 2 位

*   翻译应该是这样的

    1.  获取页码（较高部分）和逻辑/虚拟地址的偏移量。例如，在我们的例子中，页码 3(11) 和偏移量 6(110) 用于逻辑地址 30（二进制的 11110）。
    2.  查找第 3 页的页表，所以这里的页框是 1。它导致我们物理地址的基址是 1 << 3 = 8（向左移动 3 位 = 偏移位）。
    3.  物理地址 = 基址 + 偏移量 = 8 + 6 = 14

希望它可以帮助。

# android - Android 应用程序库项目 Jar 在哪里？

> ID：13715122
> 
> 赞同：0
> 
> 时间：2012-12-05T01:52:55.597
> 
> 标签：android, eclipse

我刚刚创建了 android library 项目，标记为 library 但 bin 没有 java 类的 jar 文件。通过项目属性查看，没有看到您为编译构建设置的位置以输出 jar 文件？我希望每次构建项目时自动创建 jar。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:59:10.273

> 通过项目属性查看，没有看到您为编译构建设置的位置以输出 jar 文件？

Android 库项目本身并不“输出 JAR 文件”。

如果库项目被另一个 Android 项目使用，构建工具将创建一个 JAR 文件，其中包含已编译的 Java 类，但此 JAR 文件不是为分发而设计的。相反，这些相同的构建工具将合并该 JAR 文件以及库项目的资源，作为宿主应用程序构建过程的一部分。

# loops - 在一个动画中循环和停止单独的影片剪辑

> ID：13715124
> 
> 赞同：1
> 
> 时间：2012-12-05T01:53:18.857
> 
> 标签：loops, actionscript, flash-cs6

我正在为一个学校项目制作一个小型 Flash 横幅广告。我有多层动画雪花，它们都是 MovieClip，在时间线的末尾，我有两个作为 MovieClip 的文本项，它们滑入。我不知道如何让雪花保持连续循环一次动画已经结束，并且文本在其停止点保持在舞台上。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:12:32.123

将雪花放入带有时间轴的单独的 MovieClip 中，然后在新的 MovieClip 中放入类似

```
gotoAndPlay(1) 
```

在最后一帧。

然后将该 MovieClip 拖到主时间轴上，使其在自身内部播放。

将文本也放入它自己单独的 MovieClip 中，然后放一个

```
stop() 
```

在最后一帧。并将其拖到主时间轴上。

# d3.js - 在 D3 中搜索元素 - 强制布局或树

> ID：13715127
> 
> 赞同：6
> 
> 时间：2012-12-05T01:53:34.820
> 
> 标签：d3.js, tree, highlight, force-layout

是否有在 d3js 布局（强制定向或树）中搜索元素并突出显示该元素的示例？

我在想会有一个文本字段，用户可以在其中输入要搜索的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T03:07:30.237

我写了一个工具，允许浏览生物[监管网络](http://www.regulatorynetworks.org)，并排显示两个 SVG 面板。每个面板都包含一个转录因子（节点）的强制布局网络，由 d3.js API 绘制。`mouseover`您可以输入转录因子的名称，它会使用与事件发生时相同的代码突出显示它。探索代码可能会让您深入了解它是如何完成的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-18T19:43:25.433

这是我提出的[要点](http://bl.ocks.org/jjzieve/a743242f46321491a950)，也许相关？

我将我的实现分为三个步骤：

1) 在 select2 框中选择叶节点名称时，searchTree。

```
$("#search").on("select2-selecting", function(e) {
    var paths = searchTree(root,e.object.text,[]);
    if(typeof(paths) !== "undefined"){
        openPaths(paths);
    }
    else{
        alert(e.object.text+" not found!");
    }
}) 
```

2) searchTree 按与根节点（路径）的距离顺序返回一个节点数组

```
function searchTree(obj,search,path){
    if(obj.name === search){ //if search is found return, add the object to the path and return it
        path.push(obj);
        return path;
    }
    else if(obj.children || obj._children){ //if children are collapsed d3 object will have them instantiated as _children
       var children = (obj.children) ? obj.children : obj._children;
       for(var i=0;i<children.length;i++){
            path.push(obj);// we assume this path is the right one
            var found = searchTree(children[i],search,path);
            if(found){// we were right, this should return the bubbled-up path from the first if statement
                return found;
            }
            else{//we were wrong, remove this parent from the path and continue iterating
                path.pop();
            }
        }
    }
    else{//not the right object, return false so it will continue to iterate in the loop
        return false;
    }
} 
```

3）通过将“._children”替换为“.children”来打开路径，并添加“found”类以将所有内容涂成红色。（参见链接和节点实例）

```
function openPaths(paths){
    for(var i=0;i<paths.length;i++){
        if(paths[i].id !== "1"){//i.e. not root
            paths[i].class = 'found';
            if(paths[i]._children){ //if children are hidden: open them, otherwise: don't do anything
                paths[i].children = paths[i]._children;
                paths[i]._children = null;
            }
            update(paths[i]);
        }
     }
} 
```

我意识到这可能不是最好的方法，但是嘿，完成工作:)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-11-22T00:29:34.950

我已经使用基于 select2 的搜索小部件编写了一个解决方案。
您会找到以红色样式展开的路径的节点。
树已被充分探索，可以找到多个答案。

**可折叠树搜索**
[https://gist.github.com/PBrockmann/0f22818096428b12ea23](https://gist.github.com/PBrockmann/0f22818096428b12ea23)

希望这会帮助
帕特里克

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-05T03:31:59.840

您不是要 d3.selectAll 吗？

[https://github.com/mbostock/d3/wiki/Selections#wiki-d3_selectAll](https://github.com/mbostock/d3/wiki/Selections#wiki-d3_selectAll)

1.  使用带有搜索按钮的文本字段。
2.  将搜索转换为节点中的 D3/CSS3 选择器。
3.  d3.selectAll
4.  将新样式应用于匹配/不进行查询的节点。

# c++ - 为什么 cin.clear() 会修复因 cin 输入错误导致的无限循环？

> ID：13715131
> 
> 赞同：1
> 
> 时间：2012-12-05T01:54:11.047
> 
> 标签：c++, infinite-loop, cin

我写了一个 switch 语句，并创建了一个默认值，它只是说用户选择了一个错误的选项并重复输入。我想确保如果出现问题，它会先清除缓冲区，所以我使用了 cin.sync()，但输入“a”仍然会导致无限循环。我添加了 cin.clear() 来清除给我工作代码的标志......但我的困惑是它为什么工作。如果有失败标志，cin.sync() 是否不起作用？

声明如下，为简洁起见被截断：

```
while(exitAllow == false)
{
    cout<<"Your options are:\n";
    cout<<"1: Display Inventory\n";
    /*truncated*/
    cout<<"5: Exit\n";
    cout<<"What would you like to do? ";

    cin.clear();   //HERE IS MY CONFUSION//
    cin.sync();
    cin>>action;
    switch(action)
    {
        case 1:
                    /*truncated*/
        case 5:
            exitAllow = true;
            break;
        default:
            cout<<"\ninvalid entry!\n";
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T02:02:38.867

一旦您尝试读取并且失败，则流被标记为处于*失败*状态，并且所有后续读取尝试将自动失败，直到您清除失败标志，这是使用`clear()`函数完成的。

您应该在每次读取*后检查流的状态：*

```
if (cin >> var) {
   // do something sensible
} else {
   cin.clear();
} 
```

否则，`var`上次成功读取后存储的值将被视为算法的当前输入。

# jquery-plugins - Select2.js 插件预先而不是附加容器选定的元素

> ID：13715132
> 
> 赞同：0
> 
> 时间：2012-12-05T01:54:18.217
> 
> 标签：jquery-plugins

我正在使用 jQuery 插件[Select2.js v3.2](http://ivaynberg.github.com/select2/index.html)，它似乎`select2-container`在元素之前而不是在元素之后插入。这导致一些假定先前兄弟的代码中断。是否有一个“追加”选项来初始化容器，所以我知道它总是在元素之后追加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:54:59.230

似乎没有办法指定是`select2-container`在元素之前还是之后插入元素。在我看来，你有几个选择：

*   修改 Select2.js 源以在元素之后插入容器。[第 595 行](https://github.com/ivaynberg/select2/blob/master/select2.js)更改`.before(this.container);`为`.after(this.container);`.
*   从您的问题中不清楚哪个代码“假定以前的兄弟姐妹”。如果是您的代码，那么您应该更改。如果不是您的代码，您可以尝试查找并解决它。我无法在 Select2.js 源代码中找到任何此类假设。
*   初始化 select2 后，您可以通过将创建的元素移动到 DOM 中的所需位置来跟进。您可能希望隐藏这些元素，直到它们被初始化。您还应该对此进行测试以确保它不会破坏 Select2.js 插件。

    ```
    $('.select2-container').each(function() {
      $(this).siblings('.elementSelector').first().after($(this));
    }); 
    ```

请注意，修改 Select2.js 源代码将使将来升级该库更加痛苦（取决于您的舒适/专业水平）。我建议您在修改插件之前完全确定问题不在您的代码中。

# python - 我得到了一个错误 ZeroDivisionError: integer 除法或模除以零。我的代码有什么问题

> ID：13715134
> 
> 赞同：1
> 
> 时间：2012-12-05T01:54:19.610
> 
> 标签：python

```
for i,j in enumerate(output.readlines()):
    if i%len(tag) == 0:
         [1]
         [2]
         etc
         if i%len(tag) == len(tag) - 1:
            outputfile.write(<"something">) 
```

`ZeroDivisionError`还有更多代码，但自从我编辑了这段代码的前 2 行和最后 2 行以来，我一直遇到问题。我不知道为什么会发生这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T02:01:18.827

您需要检查并确保 len(tag) 不为 0，然后再尝试使用它来修改（**%**）另一个值。mod( **%** ) 基本上是一个除法运算，因此**如果 len(tag) 等于 0，您将得到 ZeroDivisionError**。

考虑以下代码，如果 len(tag) 等于 0，它将转义 for 循环：

```
for i,j in enumerate(output.readlines()):
    if len(tag) == 0:
        continue
    elif i % len(tag) == 0:
        #Rest of your code here.. 
        if i % len(tag) == len(tag) - 1:
            outputfile.write("something") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T01:57:17.537

如果错误出现在这部分代码中，则在某个点上`len(tag)`等于。`0`(`x%0`没有定义，就像`x/0`.)

放在`print tag`if 语句之前，看看问题出在哪里。

`tag`如果没有看到更多代码（在哪里定义/修改等），我无法获得更具体的信息。

# ruby-on-rails - 如何增加对象属性的值？

> ID：13715136
> 
> 赞同：2
> 
> 时间：2012-12-05T01:54:31.037
> 
> 标签：ruby-on-rails

如何增加“**周**”属性？

```
def newweek
 current_user.userprofile.week += 1
 respond_to do |format|
  format.html { redirect_to :action => "index"}
 end
end 
```

初始值为**0**。每次运行**newweek**时，周应增加**1**。

不幸的是，每次运行**newwek**时，该值都保持为**1**。我该如何解决？

# 编辑

```
class NewWeekToUserprofile < ActiveRecord::Migration
  def change
     add_column :userprofiles, :week, :integer, :default => 0
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:14:19.683

你可以使用`.increment`方法。

```
current_user.userprofile.increment :week 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T03:09:54.903

试试这个：

```
def newweek
 cu_p=current_user.userprofile
 cu_p.week=cu_p.week.nil? ? 1 : cu_p.week +1
 cu_p.save
 respond_to do |format|
  format.html { redirect_to :action => "index"}
 end
end 
```

编辑以测试用户配置文件的值（nil 与否）

# android - 每次切换文件时，Eclipse 都会有两三秒的延迟

> ID：13715137
> 
> 赞同：2
> 
> 时间：2012-12-05T01:54:35.477
> 
> 标签：android, eclipse

自从我卸载 Eclipse 并将其作为 Android SDK 包的一部分重新安装后，每次单击不同 java 或 xml 文件的选项卡时都会出现延迟。在此延迟期间，我看到几个按钮从工具栏中出现和消失了几次。

这两个图标看起来像一个带有紧腰带的文件，以及一个顶部带有刷新符号的文件。

如果我通过在包资源管理器中双击文件来切换文件，无论文件是否已经打开，都没有延迟。

是什么导致了这种延迟，我该如何阻止它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:59:10.350

转到`eclipse.ini`文件，将以下内容从 更改`1.5`为`1.6`从`Dosgi.requiredJavaVersion=1.5`到`-Dosgi.requiredJavaVersion=1.6`。

# java - 将字符串放入二维布尔数组 Java

> ID：13715138
> 
> 赞同：-4
> 
> 时间：2012-12-05T01:54:40.653
> 
> 标签：java, arrays, string, boolean

我只是想知道是否有人可以向我展示一些关于如何将此字符串放入 2D 布尔数组并打印出来的代码

示例：“0-1 0-2 1-2 1-3 2-3”，但字符串可能更复杂，例如“0-1 1-2 2-3 3-0 0-4 0-11 1- 5 1-6 2-7 2-8 3-9 3-10 4-5 6-7 8-9 10-11 4-7 4-8 5-9 5-10 6-9 6-10 7-11 8 -11"

一个例子是 0-1 为真，0-2 为真，1-2​​ 为真，1-3 为真，2-3 为真，所有其他位置都应为假

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:06:14.757

我不知道你把它们放在二维`boolean`数组中是什么意思。如果您在解析文本时遇到问题，那么这里有一些您可以使用的代码片段。

对于第一个解决方案，我假设数字总是成对出现并由单个 分隔`-`，并且空格用于分隔数字对。

如果您从标准输入读取，请使用此选项：

```
Scanner scanner = new Scanner(System.in); 
```

如果您有一个`String`包含所有数字并且想要处理它（让变量的名称为`inputString`），请使用它：

```
Scanner scanner = new Scanner(inputString); 
```

然后您可以从输入中读取数字：

```
while (scanner.hasNext()) {
    String pair = scanner.next();
    // Split by the hyphen
    String tokens[] = pair.split("-");

    // Normally, one should check the array before accessing it
    // I currently assume the input is valid
    int first = Integer.parseInt(tokens[0]);
    int second = Integer.parseInt(tokens[1]);

    // Do whatever you want with the 2 numbers extracted
} 
```

* * *

或者，您也可以使用[useDelimiter](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#useDelimiter%28java.util.regex.Pattern%29)作为分隔符添加`-`和使用`nextInt`读取数字，而无需`-`单独处理：

```
scanner.useDelimiter("[\\p{javaWhitespace}-]+"); 
```

代码将简单地变为：

```
scanner.useDelimiter("[\\p{javaWhitespace}-]+");

while (scanner.hasNext()) {
    int first = scanner.nextInt();
    int second = scanner.nextInt();

    // Do whatever you want with the 2 numbers extracted
} 
```

代码更简洁，但是否`-`出现在`first`and之间`second`，或者出现了多少`-`，或者是不是这对数字之间的唯一字符，现在还不得而知。如果我们假设输入格式是正确的就可以了。但是，如果没有给出该假设，我们将无法进行任何输入验证。

# c++ - 二叉搜索树上的范围查询（递归）

> ID：13715139
> 
> 赞同：2
> 
> 时间：2012-12-05T01:54:43.027
> 
> 标签：c++, recursion, vector, range, binary-search-tree

我被要求编写一些基于模板的代码，该模板将从范围查询中返回一个键向量（即 [x,y] 中的所有键）。请耐心等待，我对递归也很陌生。

```
template <typename Key, typename Value>
vector<<BSTNode<Key, Value>*> range_query(BSTNode<Key, Value>* root,Key key1,Key key2) {

vector<BSTNode<Key, Value>*> found;
if(key1 > key2) return found;

while(root != NULL){
    range_query(root->left,key1,key2);
    range_query(root->right,key1,key2);
    if(root->key >= key1 && root->key <= key2) found.push_back(root);
} 
```

由于我假设向量中的顺序无关紧要，这是否是遍历并将键存储在向量中的正确方法？另外，我将如何在递归结束时返回完成的向量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:06:22.523

作为参数传入（对 vector 的引用）并在函数内部更新：

```
template <typename Key, typename Value>
void range_query(BSTNode<Key, Value>* root, Key key1, Key key2, vector<<BSTNode<Key, Value>*>& found) 
{
    if (!root) return;
    if(key1 > key2) return;

    range_query(root->left,key1,key2,found);
    range_query(root->right,key1,key2,found);

    if(root->key >= key1 && root->key <= key2) 
        found.push_back(root);
    }
} 
```

我稍微修改了你的代码。

# php - 将 index.php 重定向到 root 不适用于 SSL

> ID：13715141
> 
> 赞同：0
> 
> 时间：2012-12-05T01:54:47.840
> 
> 标签：php, apache, codeigniter, mod-rewrite, ssl

我正在开发一个在 AWS 上运行的 codeigniter/php Web 应用程序。它是一个 LAMP 堆栈（ubuntu）。为了摆脱 url 中的 index.php，我激活了 mod_rewrite 并使用 .htaccess 文件来解决它。

我的 .htacces 文件如下（这是整个文件）：

> ```
> RewriteEngine on
> 
> RewriteCond %{REQUEST_FILENAME} !-f
> 
> RewriteCond %{REQUEST_FILENAME} !-d
> 
> RewriteRule .* index.php/$0 [PT,L] 
> ```

一切正常，网址没有显示 index.php，不在主页（http://www.example.com）中，也没有在更深的页面中，例如[http://www.example.com/home/指数](http://www.example.com/home/index)

一旦我添加/配置了 SSL，重定向就会停止工作。主页将像 SSL (https://www.example.com) 之前一样工作，但是更深层次的 URL 都不起作用。它试图打开“正确”的 url (https://www.example.com/home/index)，但是服务器声称 /home/index 找不到。看起来重写规则无法正常工作，因为如果我输入[https://www.example.com/index.php/home/index](https://www.example.com/index.php/home/index)它工作正常。

我已经用谷歌搜索并尝试了很多重写规则，但是它们都没有起到神奇的作用......

另一条信息：我正在使用 Apache 2 站点可用和站点启用，以便将用户路由到正确的基本 url（因为我在我的实例上运行多个应用程序）。

文件的顺序是： A.第一个文件的第一部分是：

> ```
> <VirtualHost *:80>
>       ServerAdmin webmaster@localhost
> 
>       Redirect permanent / https://www.example.com/
>         ...
> 
> </VirtualHost> 
> ```

B.第二个文件的第一部分是：

> ```
> <IfModule mod_ssl.c>
> <VirtualHost *:443>
>   ServerAdmin webmaster@localhost
> 
>   ServerName www.example.com
> 
>   DocumentRoot /var/www/example
>         ...
> 
> </VirtualHost>
> </IfModule> 
> ```

任何想法？我不确定这是配置问题还是我的应用程序中的问题。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:03:05.613

`.htacces`在您的 s 文件中尝试此代码。我也在 AWS 上开发 web 应用程序，像你一样启用 ssl 并且进展顺利。

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

# javascript - HTML 表单提交问题

> ID：13715142
> 
> 赞同：1
> 
> 时间：2012-12-05T01:54:53.037
> 
> 标签：javascript, html, forms, onclick, submit

全新的 HTML，我有其他语言的编程经验，只是遇到了 html 的问题。
我环顾四周，试图找到一种在 html 中发布所有需要的实例的“双重发布”的方法。

我现在需要多种形式的原因是因为外部代码接受了销售信息，并且通过授权页面移动，但我只能得到一个或另一个触发。

```
 <form method="post" action="sales_info_driver_page.cgi">

    Outer code here
    </form>
    <form method="POST" action="http://www.example.com/su.php"><p>
    <input type="text"  name="Email" size="20"><br>
    <input type="radio" name="Action" value="join-list" checked>Subscribe </p>
    <input type="hidden" name="ThanksURL" value="2222">
    </form>

    Outer code here

    <input type="submit" name="Submit" value="   Submit   " > 
```

是否可以通过 javascript 函数或其他方式提交内部表单？我读到嵌套表单不太合理，那么还有其他方法可以让这部分正确提交吗？

如果可能的话，需要 12-5-12！提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T02:35:33.200

而不是使用表单，您可以使用 div 来划分它

```
<form method="POST" action="http://www.example.com/su.php">
<div>

Outer code here
</div>
<div><p>
<input type="text"  name="Email" size="20"><br>
<input type="radio" name="Action" value="join-list" checked>Subscribe </p>
<input type="hidden" name="ThanksURL" value="2222">
</div>

Outer code here

<input type="submit" name="Submit" value="   Submit   " > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T02:05:12.670

将多个表单嵌套在其他表单中是不好的做法，因为它是无效的 HTML...

如果您想从表单外部的链接提交表单，只需给表单一个 ID，例如： `<form method="POST" action="http://www.example.com/su.php" id="form1">` 并将提交按钮添加回`<form>`.

然后，无论您想在哪里提交表单，都可以使用 javascript 处理程序：

例如： `<a href="#" onclick="document.getElementById('form1').submit();">Submit Form1</a>`

当然，更好的做法是使用函数而不是绑定内联事件处理程序，但这只是一个示例，用于演示使用`onclick`和表单提交。

如果你使用 jQuery，你可以这样做：`onclick="$('#form1').submit();"`，这要简单得多。

我想可以调整上述方法来提交所有表格；并且您可以使用 jQuery/Javascript 查找并收集单击按钮时要提交的所有值，然后使用 Ajax 调用将所有值发送到一个目的地。

# android - Phonegap、jQuery Mobile 和 iframe

> ID：13715144
> 
> 赞同：-1
> 
> 时间：2012-12-05T01:55:03.207
> 
> 标签：android, jquery, cordova, jquery-mobile, iframe

我有一个使用 phonegap 和 jquery mobile 编写的移动应用程序。由于安全原因，我在弹出窗口中打开移动网页的地方很少。

有没有办法在应用程序中插入移动网络？可以使用 iframe 还是有更好的方法？

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:39:49.313

除了 iFrame，您将找不到任何其他解决方案。但是你会遇到一些 android 版本的问题，主要是 2.X 版本。

还有另一种解决方案，但不能用作弹出窗口：[Phonegap childbrowser plugin](http://build.phonegap.com/blog/childbrowser-plugin)

# matlab - 将曲面拟合到数据，matlab

> ID：13715151
> 
> 赞同：1
> 
> 时间：2012-12-05T01:56:31.437
> 
> 标签：matlab, geometry-surface

我有数据 - 3 列。第一个和第二个 - X 和 Y 坐标，第三个值。我必须使用平方插值法来拟合曲面。然后用 .jpg 背景绘制拟合输出。

我已经

`[XOut, YOut, ZOut] = prepareSurfaceData(x, y, v); [c,goft]=fit([XOut,YOut],ZOut,'poly02'); plot(c);`

但我不知道如何将视图更改为 XY。然后从 .jpg 文件中添加背景

请给我一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:44:01.290

所以，据我了解，这个问题与拟合无关，而是关于如何将图像放在表面上？

你说'背景'，但我不确定你是指轴还是表面，但这应该可以工作（除非你需要一个额外的表面 z=0 前者）：

```
% make dummy test data
N = 60;
X = 1:N;
Y = 1:N;
[X, Y] = meshgrid(X,Y);
Z = X - X.^2 + Y.^2 + randn(N,N)*10;

% read jpg and make same size as grid    
im = imread('yourimage.jpg');
% convert image to indexed colours    
[im, map] = rgb2ind(im, 256);

% make figure
figure(1), clf

% make image same size as grid
subimage = im(1:N,1:N);
colormap(map)

% plot surf and use image as texture
s = surf(X,Y,Z);
set(s, 'faceColor', 'texture',...
    'edgecolor', 'none',...
    'cdata', subimage) 
```

这是你的意思吗？

# javascript - $('div:first').is(':first') 返回 false，为什么？

> ID：13715163
> 
> 赞同：3
> 
> 时间：2012-12-05T01:58:48.640
> 
> 标签：javascript, jquery, css

这看起来像一个错误，但我不确定。

据我所知，jQuerys`.is()`方法只会检查选择器字符串是否与您调用它的元素匹配（如果您传入选择器字符串 ofc ...）

如果您将声明完全限定为

```
$('div:first').is('div:first') 
```

它会正确返回`true`，但是..我的掌心来了：

```
$('div:last').is(':last') 
```

将再次正确返回`true`。

看看：http: [//jsfiddle.net/d6UGw/](http://jsfiddle.net/d6UGw/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T02:01:41.067

它与您的标记有关。

* * *

`div:last``div`表示标记中的最后一个。

`:last``element`表示标记中的最后一个。

它可能返回 true，因为您的最后一个元素是 div。

* * *

`div:first`表示标记中的第一个 div。

`:first`总是返回`<html>`元素，就像在一个有效的 HTML 文档中一样，它是你的第一个元素。

所以`$('div:first').is(':first')`永远不应该在有效的 HTML 文档中返回 true。

# c++ - 找不到highgui100d.dll，我在互联网上搜索过但没有找到

> ID：13715166
> 
> 赞同：1
> 
> 时间：2012-12-05T01:59:07.970
> 
> 标签：c++, visual-c++

(VS2010, Win 7 32bit)我在项目中使用OpenCV，当我在Debug模式下，我构建的dll缺少highgui100d.dll，但在release模式下不存在这个问题。现在想调试项目，怎么解决？

ps：我已经下载了一个highgui100d.dll（844K或840K）并添加到项目中，但是这个问题仍然存在。程序或dll有问题吗？而且其他的dll还可以，在release下也可以，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:09:06.087

你确定这个dll和你的exe在同一个目录吗？你应该把它放在那里。Windows 将在以下位置查找此 dll：

1) 在变量 PATH 中描述的所有目录中

2）你的exe的内部目录。

# sdk - xcode 4.5.2如何使用iOS5.1的sdk？

> ID：13715168
> 
> 赞同：0
> 
> 时间：2012-12-05T01:59:10.023
> 
> 标签：sdk, ios5.1

我安装了 Xcode 4.5.2，但是我只能找到 iOS 6 的 SDK。如何使用 iOS 5.1 的 SDK？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T02:28:44.543

您不能（轻松）使用 Xcode 4.5.2 编译/链接 iOS 5.1 SDK。但是，您可以安装 iOS 5.1 Simulator，它允许您在 iOS 5.1 SDK 下运行。如果您确实需要 Xcode 以及更早的 SDK，请下载更早版本的 Xcode。多个版本的 Xcode 可以在您的机器上同时存在。

# c# - WPF XAML Hello World 从头开始 ，带有代表

> ID：13715170
> 
> 赞同：-1
> 
> 时间：2012-12-05T01:59:28.180
> 
> 标签：c#, .net, wpf, xaml, user-interface

我想在屏幕上获得一个 XAML 指定的界面，这样我就可以学习 WPF。但我不想从一个已经完成所有连接的视觉工作室项目开始。我不希望从“main()”函数在屏幕上绘制 xaml 文件中指定的窗口的 c#“hello world”等价物。

那么如何将 XAML 文件连接到对象并从控制台应用程序将其绘制在屏幕上呢？请同时连接一个简单的事件。说一个“hello world”按钮（在 xaml 中指定），按下该按钮会使控制台打印“hello world”。我希望通过以下方式查看委托功能。

1.  XAML 中作为内联 c# 的逻辑。
2.  在与“main()”方法相同的文件中指定的逻辑，作为一个自由函数（编辑：哦，等等，c# 没有自由函数，以及某种不是代码隐藏的委托）。
3.  作为对象的成员函数的逻辑，我相信该对象是 XAML 的代码隐藏（当然假设这种在 xaml 和 c# 对象之间映射的方式是可能的）。

另外：[这个答案](https://stackoverflow.com/questions/6065618/how-start-a-window-with-main-in-console-project)显示了 ui runloop 接管了主线程，是否有任何糖可以为应用程序创建一个新线程，这样它就不会阻塞被调用者？

如果您想知道我为什么要问这个问题，或者为什么我想以这种方式学习 WPF。我想从没有其他显示信息的插件中触发临时 UI 元素。

* * *

对于那些觉得这个问题太模糊的人，这里有一个 xaml 的例子

```
<Canvas xmlns="http://schemas.microsoft.com/client/2007"  
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <TextBlock>Hello World!</TextBlock>
</Canvas> 
```

这个问题的主要应用程序是一个控制台 c# 应用程序，XAML 文件表示一个带有单个按钮的表单，按下按钮会向控制台打印“hello world”。而且我想看看将按钮连接到我的代码的不同方式，我不明白我怎么能更清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T02:34:16.507

冒着被告知这不是您所要求的风险，但由于不清楚：

```
class WpfSample
{
    [STAThread]
    public static void Main()
    {
        var window = new Window()
        {
            Title = "WPF",
            Width = 640,
            Height = 480
        };

        var grid = new Grid();

        var button = new Button()
        {
            Content = "Click Me",
            Width = 100,
            Height = 50,

        };

        grid.Children.Add(button);
        window.Content = grid;

        button.Click += (s, e) =>
        {
            MessageBox.Show("You clicked me");
        };

        window.ShowDialog();

    }
} 
```

话虽这么说，如果您想要为您的 WPF 应用程序添加插件，那么这样做（全部使用代码）并不是要走的路。

我们在插件中定义控件，而不需要将它们全部连接到代码中，为此我们使用 MEF。

*更新* 要从您存储在某处的某些 XAML 加载 UI，您可以使用 ValueConverter

```
public class StringToXamlValueConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        string xaml;
        if (value != null && !String.IsNullOrWhiteSpace(value.ToString))
        {
            xaml = value.ToString();
        }
        else
        {
            xaml = Settings.Default.DefaultLayoutView;
        }

        var root = XamlReader.Parse(xaml);
        return root;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

然后，您将像这样设置某些元素的内容：

```
<ContentControl Content="{Binding Layout.View, Converter={StaticResource StringToXamlConverter}}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T02:27:01.650

直截了当：

> 我想从没有其他显示信息的插件中触发临时 UI 元素。

绝对不需要从头开始绘制窗口，而是可以在对象上使用该`ShowDialog()`方法：`Window`

```
var myWindow = new Window();
myWindow.ShowDialog(); 
```

当然，您可以以编程方式将所需的任何控件添加到该窗口，或者您可以将其定义为 XAML，然后您将其重新水合为窗口。

话虽如此，理想情况下，插件的主机应该为您提供一个容器，您可以向其中添加内容（或提供您手动滚动的对话服务），而不是您必须直接从插件中强制显示内容。

# web - 网页上的元素自动调整大小

> ID：13715171
> 
> 赞同：0
> 
> 时间：2012-12-05T01:59:34.767
> 
> 标签：web, responsive-design, html, autosize, autoscaling

现在我有这个要求来制作网站，这样每当网站的用户重新调整他们的浏览器大小时，页面上的元素都会相应地调整，这样他们仍然可以在有组织但完整的视图中查看页面。

例如，当页面处于最大窗口时，body 区域应该有 6 列，当用户将浏览器缩小到较小时，它会自动变为 4 列（因此会比以前增加更多行）或较少的。

我**不**认为这是“响应式网页设计”，在我看来应该是这样的：页面在不同的设备或浏览器中看起来不同。

任何人都可以对我如何制作或推荐一些教程或博客有所了解？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:42:35.123

好吧，显然我错了：

> 我不认为这是“响应式网页设计”，在我看来应该是这样的：页面在不同的设备或浏览器中看起来不同。

原来它应该是响应式网页设计。

我相信问同样问题的人应该能够在网上找到很多这样的东西，只需搜索“响应式网页设计示例”等

这是一个例子，虽然是中文。 [http://www.tuicool.com/articles/vEfQJz](http://www.tuicool.com/articles/vEfQJz)

# php - 在 php 中使用 json_decode() 映射数据的 JSON 输出

> ID：13715173
> 
> 赞同：1
> 
> 时间：2012-12-05T02:00:13.027
> 
> 标签：php, drupal-6, json, openstreetmap, mapquest

我正在尝试编写 PHP 代码来与 Mapquest 的 Open API / Open Street Map 服务的 JSON 输出进行交互。我在下面列出了它。我一直在我的 Drupal 6 实现中使用此代码。此代码不返回任何输出。当我使用它时，`json_last_error()`输出 0。

```
function json_test_page() {
  $url = 'http://open.mapquestapi.com/directions/v1/route?outFormat=json&from=40.037661,-76.305977&to=39.962532,-76.728099';
  $json = file_get_contents($url);
  $obj = json_decode(var_export($json));
  $foo .= $obj->{'fuelUsed'}; 
  $output .= foo;
  return $output;
} 
```

[您可以通过URL](http://open.mapquestapi.com/directions/v1/route?outFormat=json&from=40.037661,-76.305977&to=39.962532,-76.728099)查看原始 JSON 输出。在这个函数中，我期望得到`1.257899`我的输出。我有两个问题：

(1) 我可以调用什么来从数组中取出物品。例如，如何`"distance":26.923`从数组中获取 JSON 中表示的值？

(2) 我是否有可能遇到我在[PHP 手册](http://php.net/manual/en/function.json-decode.php)中读到的递归限制问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T02:15:32.870

如果您仔细阅读 json_decode 的手册页，您会注意到有一个参数（默认为 false），您可以传递该参数以使其返回数组而不是对象。

```
$obj = json_decode($json, true); 
```

所以：

```
<?php

function json_test_page() {
    $url = 'http://open.mapquestapi.com/directions/v1/route?outFormat=json&from=40.037661,-76.305977&to=39.962532,-76.728099';
    $json = file_get_contents($url);
    $obj = json_decode($json, true);
    //var_dump($obj);
    echo $obj['route']['fuelUsed'];
}

json_test_page(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T02:02:53.747

从 中删除该`var_export`功能`json_decode`。

您正在尝试将有关字符串的信息转换为 json。

我能够以`fuelUsed`这种方式获得财产

```
function json_test_page() {
    $url = 'http://open.mapquestapi.com/directions/v1/route?outFormat=json&from=40.037661,-76.305977&to=39.962532,-76.728099';
    $json = file_get_contents($url);
    $obj = json_decode($json);
    return $obj->route->fuelUsed;
} 
```

# git - 我的 Git bash 忘记了我的别名。我能做些什么？

> ID：13715179
> 
> 赞同：49
> 
> 时间：2012-12-05T02:00:41.570
> 
> 标签：git, bash

我正在运行 Windows 7 的笔记本电脑上使用最新的适用于 Windows 的 Git bash。当我定义我的别名时：

```
$ alias gitc='git commit -a' 
```

会话期间一切正常，但如果我关闭并打开 bash，我将无法恢复它们。但是，命令历史记录被保留。

我该怎么办？我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-12-05T02:04:02.217

当您打开 git bash 输入命令时`touch .bash_profile`。继此型`vim .bash_profile`。然后，您可以将别名添加到此文件中。保存文件并重新打开 git bash，您的别名应该可以按预期工作。

此方法允许您为 git bash 中可用的任何 bash 命令创建别名，但是正如其他人回答的那样，也可以使用 git 本身创建特定于 git 的别名。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-05T07:23:18.680

您可以设置一个 .gitconfig 并添加这样的别名，而不是修改您的 bash_profile：

```
[alias]
  st = status
  ci = commit
  br = branch
  co = checkout
  df = diff
  lg = log -p 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-08-17T03:43:46.040

在主目录中创建 .bashrc 文件：

```
touch ~/.bashrc
vim ~/.bashrc 
```

在文件中`~/.bashrc`添加别名：

```
alias gitc='git commit -a'
# -- ... and your other aliases here ... 
```

保存文件（`<ESC>:wq`在 vim 中按）。重新加载文件，以便 bash 知道所做的更改：

```
source ~/.bashrc 
```

这些步骤在带有 Git bash (MINGW32) 的 Win 7/Win 8 中对我有用

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-11-04T23:13:34.427

对于*Windows*用户：
确保您在*主目录*中，*最简单的方法*是创建一个`.bash_profile`文件并在其中插入您的别名

> 注意：要使用记事本编辑它，请先执行此行：

`git config core.editor notepad`

然后创建文件并添加您的别名，如下所示：

`notepad .bash_profile`

现在您可以将别名添加到`.bash_profile`like ：

> alias yourAlias='你的命令'
> alias AnotherAlias='你的命令'

按`ctrl`+`s` *或* `File>save` 菜单保存文件

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T02:03:50.513

您需要将它们放在您的 .bash_profile 中。然后，每次新的登录 shell 启动时，它们都会被重置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T03:12:41.317

我知道你已经得到了答案，但你可能想考虑使用 git 自己的别名系统，这在 git config 帮助页面中有说明。然后它们可以是每个 repo 以及系统范围或每个用户。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-30T21:02:41.827

我对powershell很陌生。我从公司借了一台笔记本电脑不到一周，这包括了我对 Windows 的全部体验。但是，我可能已经找到了一个可行的解决方案（至少对我来说）。

（灵感来自[https://superuser.com/questions/1090141/does-powershell-have-any-sort-of-bashrc-equivalent](https://superuser.com/questions/1090141/does-powershell-have-any-sort-of-bashrc-equivalent)）

在 PowerShell 中：

`New-Item $profile -Type File -Force`

它会在 Documents 文件夹下名为 WindowsPowerShell 的文件夹中创建一个名为 Microsoft.PowerShell_profile.ps1 的文件。然后你可以用文本编辑器打开它：

`notepad $profile`

添加`$bash = [bash | . ~/.bash_profile]`到该文件。

现在，当从 powershell 输入 bash 时，您的 bash_profile 应该会自动获取。`env`例如，我可以键入bash_profile 中指定的所有局部变量。我想这也适用于.bashrc，但我还没有尝试过。

为了记录，这只是马文穆斯塔法答案的延伸。但是我不确定他的方法是否能解决我遇到的问题，即每次在 Windows 中启动新的命令提示符时，我都必须为我的 bash_profile 提供资源。

希望这是有用的。

**** 编辑 ****

该解决方案对我有用，但我因执行某些操作而收到来自 Windows 的投诉。我认为更好的解决方案是编辑`/etc/bash.bashrc`和添加`source ~/.bash_profile`. 完成此操作后，我的 PS1、配置文件变量等显示在`env`. 祝你好运。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-05T19:08:27.683

如果你从这里有 git：[https](https://git-scm.com/download/win) ://git-scm.com/download/win 转到已安装的文件夹。例如：“c:\Program Files\Git”

并找到`aliases.sh`通常位于此处的文件：`C:\installation\folder\etc\profile.d\`

现在您可以像这样为现有的别名添加别名：

```
# Some good standards, which are not used if the user
# creates his/her own .bashrc/.bash_profile

# --show-control-chars: help showing Korean or accented characters
alias ls='ls -F --color=auto --show-control-chars'
alias ll='ls -l'
alias sail='[ -f sail ] && bash sail || bash vendor/bin/sail' 
```

重新启动你的 bash 终端，现在你可以在每个 git 项目中使用你的新别名。

# javascript - jQuery 中的 .wrap()（多个）

> ID：13715180
> 
> 赞同：0
> 
> 时间：2012-12-05T02:00:43.107
> 
> 标签：javascript, jquery, html

我有这个 html 代码

```
<div id="div1">
    <span>Title</span>
</div>
<table id="table1">
    <tr>
    <td>AAA</td>
    <td>BBB</td>
    </tr>
</table>

<div id="div2">
    <span>Title</span>
</div>
<table id="table2">
    <tr>
    <td>AAA</td>
    <td>BBB</td>
    </tr>
</table> 
```

我需要的是，我想将 div1 和 table1 包装在一起。通过使用`$('#table1, #div1').wrap('<div></div>')`它只能一个一个地包装。有没有办法将两者包装在一起？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T02:03:33.843

你需要`.wrapAll()`.

```
$('#table1, #div1').wrapAll('<div></div>'); 
```

# macos - PyQT：OS X 全屏模式？

> ID：13715190
> 
> 赞同：3
> 
> 时间：2012-12-05T02:02:08.413
> 
> 标签：macos, osx-mountain-lion

我有一个开源 PyQT 应用程序，我想知道它是否可以像其他 OS X Mountain Lion 应用程序一样进入“全屏”；意思就像 Safari 全屏。

还是目前这不可能？

# ruby-on-rails - 无法保存员工模型

> ID：13715191
> 
> 赞同：0
> 
> 时间：2012-12-05T02:02:12.133
> 
> 标签：ruby-on-rails, model, controller, has-and-belongs-to-many

我是一个 RoR 新手。我无法创建分配角色的新员工。从下面的服务器日志中，我有点认为记录没有被保存，因为“role_ids”是空白的，但我无法理解为什么传递“role_ids”而不是“role”

我觉得这可能是一个单行修复。请帮我解决问题。在此先感谢您的时间。

```
Processing by EmployeesController#create as HTML
 Parameters: {"utf8"=>"✓", "authenticity_token"=>"Nf9Ti9vdr0ErvJV3LKoErT6dMoUwWAI5eJVBOUISZxo=", "employee"=> {"name"=>"dvxzv", "role_ids"=>["", "4"], "reports_to"=>"Adam"}, "commit"=>"Create Employee"}
 (0.1ms)  begin transaction
 (0.0ms)  rollback transaction
 Role Load (0.2ms)  SELECT "roles".* FROM "roles" ORDER BY title
 Role Load (0.1ms)  SELECT "roles".* FROM "roles" 
 Rendered employees/_form.html.erb (8.9ms) 
```

请注意上一行中的“role_ids”，我不确定为什么使用 role_ids 而不是 'role' 属性

**员工.rb**

```
class Employee < ActiveRecord::Base

attr_accessible :name, :role, :reports_to, :role_ids
validates :name, :presence => true, :length => { :maximum => 20 }

belongs_to :company
has_and_belongs_to_many :roles
end 
```

**角色.rb**

```
class Role < ActiveRecord::Base
    attr_accessible :title  
     has_and_belongs_to_many :employees
end 
```

**员工控制器.rb**

```
def create
    @employee = User.new(params[:user])
    @role = @employee.roles.build(params[:role]) unless @user.roles.build(params[:role]).blank? 
    respond_to do |format|
      if @employee.save
        format.html { redirect_to @employee, notice: 'Employee was successfully created.' }
        format.json { render json: @employee, status: :created, location: @employee }
      else
        format.html { render action: "new" }
        format.json { render json: @employee.errors, status: :unprocessable_entity }
      end
    end
  end 
```

**_form.html.erb**

```
 <%= simple_form_for(@employee, :html => {:class => 'form-horizontal' }) do |f| %>
<fieldset>
    <legend><%= controller.action_name.capitalize %> Employee</legend>  
 <div class="control-group">
 <%= f.label :name, :class => 'control-label' %>
 <div class="controls">
 <%= f.input :name, :label => false %>
  </div>
</div>
<div class="control-group">
 <%= f.label :role, :class => 'control-label' %>
<div class="controls">
 <%= f.association :roles, :collection => Role.all(:order => 'title'), :label_method => :id, :prompt => "Assign role", :label => false %>
    </div>
  </div>
<div class="control-group">
 <%= f.label :reports_to, :class => 'control-label' %>
<div class="controls">
  <%= f.input :reports_to, :collection => [ "Sam", "Adam", "Smith"], :prompt => "Select supervisor", :label => false %>
  </div>
  </div>
  <div class="form-actions">  
<%= f.button :submit %>
</div>
 </fieldset>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:07:59.883

您可能需要考虑阅读[有关嵌套资源的 Rails 指南](http://guides.rubyonrails.org/routing.html#nested-resources)。

如果您想让自己的事情变得更轻松，我强烈建议您研究 Jose Valim 的[Inherited Resources gem](https://github.com/josevalim/inherited_resources)，它为您解决了很多此类样板文件的肮脏问题。

# c++ - 关于非局部静态初始化的规则是什么？

> ID：13715192
> 
> 赞同：28
> 
> 时间：2012-12-05T02:02:16.853
> 
> 标签：c++, c++11

假设我有一个类，其唯一目的是在构造其对象期间引起的副作用（例如，向工厂注册一个类）：

```
class SideEffectCauser {
public:
  SideEffectCauser() { /* code causing side-effects */ }
}; 
```

还假设我想让一个对象为几个翻译单元中的每一个创建一次这样的副作用。对于每个这样的翻译单元，我希望能够`SideEffectCauser`在 .cpp 文件的命名空间范围内放置一个对象，例如，

```
SideEffectCauser dummyGlobal; 
```

但是 C++03 标准的 3.6.2/3 建议根本不需要构造该对象，除非使用 .cpp 文件中的对象或函数，并且诸如此类的文章和诸如此类的[在线](http://accu.org/index.php/journals/597)讨论表明[此类](http://www.gamedev.net/topic/612598-self-registering-factory-in-c/)对象有时未初始化。

另一方面，[有没有办法从保存类名的字符串中实例化对象？](https://stackoverflow.com/questions/582331/is-there-a-way-to-instantiate-objects-from-a-string-holding-their-class-name/582456#582456)有一个声称可以工作的解决方案，我注意到它是基于使用类型的对象`SideEffectCauser`作为静态数据成员，而不是作为全局对象，例如，

```
class Holder {
  static SideEffectHolder dummyInClass;
};

SideEffectHolder Holder::dummyInClass; 
```

两者`dummyGlobal`和`dummyInClass`都是非局部静态，但仔细查看 C++03 标准的 3.6.2/3 会发现该段落仅适用于命名空间范围内的对象。我实际上在 C++03 标准中找不到任何说明何时动态初始化类范围内的非局部静态变量的内容，尽管 9.4.2/7 建议与命名空间中的非局部静态变量相同的规则适用于它们范围。

问题 1：在 C++03 中，有没有理由相信`dummyInClass`比 更有可能被初始化`dummyGlobal`？或者如果没有使用同一翻译单元中的函数或对象，两者都可能未初始化？

问题 2：C++11 有什么变化吗？3.6.2 和 9.4.2 中的措辞与 C++03 版本不同，但据我所知，对于我上面描述的场景没有指定行为差异。

问题 3：是否有可靠的方法来使用类的对象（例如`SideEffectHolder`在函数体外部）来强制发生副作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:16:51.190

我认为唯一可靠的解决方案是为特定的编译器和运行时设计它。没有标准涵盖共享库中全局变量的初始化，我认为这是最复杂的情​​况，因为这在很大程度上取决于加载程序，因此也取决于操作系统。

Q1：没有 Q2：没有任何实际意义 Q3：没有标准的方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:02:17.997

我在 Linux 下使用与 g++ / C++11 类似的东西，并按预期注册我的工厂。我不确定为什么你不会调用这些函数。如果要实现您描述的内容，则意味着该单元中的每个函数都必须调用初始化函数。我不太确定如何做到这一点。我的工厂也在命名空间内，尽管它被命名为命名空间。但我不明白为什么它不会被调用。

```
namespace snap {
namespace plugin_name {
class plugin_name_factory {
public:
  plugin_name_factory() { plugin_register(this, name); }
...
} g_plugin_name_factory;
}
} 
```

请注意，无论如何不应在 C++ 中使用 static 关键字。静态定义通常比全局定义要慢。

# svg - 在 iBooks 上缩放 SVG 图像

> ID：13715194
> 
> 赞同：2
> 
> 时间：2012-12-05T02:02:31.923
> 
> 标签：svg, zooming, epub, ibooks

使用矩形或圆形时，无法在 iBooks for iPad（epub3.0 固定布局）中缩放 SVG 图像：

```
<svg version="1.1" viewBox="0 0 2048 2048" preserveAspectRatio="xMidYMid meet">
 <g id="viewport" transform="translate(200,200)">
 <g style="fill: #ffffff; stroke:#000000">
 <rect width="2048" height="2048" style="fill:green; stroke:black" />
 <circle  cx="1024" cy="1024" r="1024" style="fill:black; stroke:black" />
 <!--path d="M 0 0 H 2048 V 2048 H 0 Z"/-->
 </g>
 </g>
</svg> 
```

使用路径时图像可缩放：

```
<svg version="1.1" viewBox="0 0 2048 2048" preserveAspectRatio="xMidYMid meet">
<g id="viewport" transform="translate(200,200)">
<g style="fill: #ffffff; stroke:#000000">
<!--rect width="2048" height="2048" style="fill:green; stroke:black" /-->
<!--circle  cx="1024" cy="1024" r="1024" style="fill:black; stroke:black" /-->
<path d="M 0 0 H 2048 V 2048 H 0 Z"/>
</g>
</g>
</svg> 
```

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-13T20:25:05.633

好吧，我没有解决方案，但我有类似/相同的行为。

*   我在 ePub3.0 中有四个 SVG 图像，它们通过了所有 ePubcheck，使用 iBooks 在 Mac 上正常加载，使用 iTunes 与 iPad 同步，并在 iPad 上正常显示
*   其中三个 SVG 图像在 Mac 和 iPad 上也可以很好地缩放（单击图像进行缩放）
*   其中一张 SVG 图像在 Mac 上爆炸了。您只能看到它的左下部分。
*   同样的问题 SVG 图像在 iPad 上根本无法缩放。iPad 直接跳到下一页
*   问题 SVG 图像没有任何矩形或圆形元素。都是路径。但是，它更复杂，特别是因为我将所有文本都变成了路径来回避 !@$$ 字体问题。
*   所有四张图像都在 Inkscape 中绘制，保存为“Plain SVG”，然后使用文本编辑器进行编辑，以删除 ePub/Kindle 似乎不喜欢的元数据元素。

和你一样，我在挠头。我即将认输，简单地将所有内容渲染为大 PNG。

# ruby-on-rails - 在这台机器上可用的 gem 中找不到 gem 'jquery-rails (>= 0) ruby '

> ID：13715200
> 
> 赞同：1
> 
> 时间：2012-12-05T02:03:04.117
> 
> 标签：ruby-on-rails, ruby

我开始了一个名为“blog”的新项目，并在终端中输入了 $cd blog，然后当我输入 $rails server 时，我收到错误消息 **在可用的 gems 中找不到 gem 'jquery-rails (>= 0) ruby​​'在这台机器上。** 我应该怎么办？我尝试了捆绑安装，但它给了我一个致命错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:41:54.097

我已经通过 rvm 安装了 ruby​​ 和 rails，但在 ubunut 11.10 上没有 libssl-dev 包。为了补救，我做了以下事情：

```
sudo apt-get install libssl-dev
rvm remove 1.9.3 #or whatever your version of ruby is
rvm cleanup all
rvm install 1.9.3 
```

cd 到项目目录 bundle install

现在我似乎不再收到错误了

# ruby-on-rails - 嵌套资源悲伤路径呈现空白评论

> ID：13715210
> 
> 赞同：0
> 
> 时间：2012-12-05T02:03:56.257
> 
> 标签：ruby-on-rails, nested-resources

![在此处输入图像描述](../Images/9b044c905fc3152c999520ef3b50430f.png)

我有一个嵌套在帖子资源中的评论资源。

```
 def create
    @post = Post.find(params[:post_id])
    @comment = @post.comments.build(params[:comment])
    @comment.ip = request.remote_ip
    if @comment.save
      redirect_to post_path(@post, notice: "Comment was successfully created")
    else
      flash[:alert] = "Comment could not be created"
      render 'posts/show'
    end
  end 
```

这一切都很好，但是我有一个唠叨项，当带有评论表单的帖子/显示页面重新呈现时，它会显示未通过内联验证的评论。我想知道执行此操作的正确方法，而不是在视图层中执行一些逻辑以不显示未保存的评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:29:58.350

我最终在视图中解决了它，因为我找不到任何其他解决方案

```
<% @post.comments.each do |c| %>
  <% unless c.new_record? %>
    <strong><%= "#{c.name} wrote: " %></strong><br />
    <blockquote><%= c.body %></blockquote>
  <% end %>
<% end %> 
```

# php - jQUery PHP 将值传递给 ajax 我只需要 id 来编辑文件

> ID：13715214
> 
> 赞同：0
> 
> 时间：2012-12-05T02:04:07.647
> 
> 标签：php, jquery

如何使用 jQuery AJAX 从我的数据库中获取 id 的值。

我创建了一个 CRUD，我需要为 Create New 用户正在工作的每个受尊重的 id 编辑和删除用户，因为我不需要传递 id。但是当我更新用户时，ID 的值不适用于每个用户。

它只读取第一个 ID，但无法再读取其余用户。我有这个代码

```
<form method="get">
<table class="table table-bordered">
<?php 
$sqlView = mysql_query("SELECT * FROM user ORDER BY id DESC") or die (mysql_error());
while($rowView = mysql_fetch_array($sqlView)){
$id = $rowView['id'];
echo '
<tr>
    <td>
        <input type="hidden" name="id" value="'.$id.'" />
        <input type="hidden" name="name" value="'.$rowView['name'].'" />
        <input type="hidden" name="up" value="edit" />
        '.$rowView['name'].'
    </td>
    <td>'.$rowView['phone'].'</td>
    <td>'.$rowView['address'].'</td>
    <td>'.$rowView['email'].'</td>
    <td>'.$rowView['status'].'</td>
    <td><a href="#" class="update" id="'.$id.'">Update</a> Delete </td>
</tr>
';
}

?>
</table>
</form>

$('a.update').click(function(e) {
    $('<img src="images/loading.gif" id="loading" style="width:auto;" />').appendTo(".span9");
    //Cancel the link behavior
    e.preventDefault();
    //Get the A tag
    var id = $( 'input[name=id]' ).val();
    var edit = $( 'input[name=up]' ).val();
    var name = $( 'a#id' ).val();
    alert( name );
    $.ajax({
        type:"GET",
        url:"ajax/company.php",
        data: {id: id, up: edit, aid: name},
        dataType: 'html',
        target: '.span9',
        success: function(data){
            $(".span9").find('img#loading').remove();
            $(".span9").html(data);
        }
    })
}); 
```

ajax/company.php

```
<?
echo $_GET['id'];
?> 
```

我的ajax错了吗？

为什么它在 jQuery 无法传递每个 id 的值时打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:13:21.687

您的字段对于所有行都具有相同的名称，因此当您通过 $( 'input[name=id]' ).val() 查询它时，它总是返回第一个值。

如果您不想将字段的名称更改为唯一名称，您应该使用以下方式访问它们：

```
var row = $(this).parent().parent();
var id = row.find('input[name=id]' ).val();
var edit = row.find('input[name=up]' ).val();
var name = row.find('a#id' ).val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-15T09:02:54.853

您也可以尝试：

```
 var row = $(this).parents(\"tr:first\")
  or
  var row = $(this).closest('tr');

var id = row.find('input[name=id]' ).val();
var edit = row.find('input[name=up]' ).val();
var name = row.find('a#id' ).val(); 
```

# xml - 如何设置spring上下文：组件扫描以扫描单元测试环境中的“src/main/java”而不是“src/test.java”

> ID：13715215
> 
> 赞同：4
> 
> 时间：2012-12-05T02:04:08.797
> 
> 标签：xml, spring, unit-testing, maven

我是 Spring 和 Maven 的新手。最近我构建了spring MVC项目并使用maven来管理项目结构和依赖关系。

当我编写单元测试时，我遇到了一个问题，即我无法从“src/main/java”中获取 bean，并且似乎上下文只从“src/test/java”中加载 bean。

这是我的代码。

单元测试：src/test/java/com/web/component/form

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath*:META-INF/spring/applicationContext-web-test.xml"})
public class FormTest { 
    @Autowired
    private BeanFactory beanFactory; // I override this bean by myself
} 
```

配置 XML 文件：src/test/resources/META-INF/spring/applicationContext-web-test.xml 这里下面的组件扫描似乎只扫描 src/test/java 中定义的 bean，而不是 src/main/java。

```
<context:component-scan base-package="com.web">
    <context:exclude-filter expression=".*_Roo_.*" type="regex"/>
    <context:exclude-filter expression="org.springframework.stereotype.Controller" type="annotation"/>
</context:component-scan> 
```

覆盖 BeanFactory 类位于 src/main/java/com/web/helper/ 中。

错误：

```
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.web.helper.BeanFactory] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:924)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:793)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 41 more 
```

所以，我想问一下，有没有办法改变组件扫描，让它在spring maven单元测试中扫描src/main/java中定义的bean/classes而不是src/test/java？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:11:23.297

为了得到`BeanFactory`你可以实施`BeanFactoryAware`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T19:20:14.863

您是否尝试在测试 context.xml 中导入您的正常应用程序上下文？像这样：

```
<import resource="classpath:applicationContext.xml" /> 
```

不过，这可能会导致一些问题（[Springockito](https://bitbucket.org/kubek2k/springockito/wiki/Home)可以帮助轻松地用模拟替换不需要的 bean）。

我不记得遇到过这样的问题。但是[Spring 对资源的类路径声明中的通配符有一些限制](https://bitbucket.org/kubek2k/springockito/wiki/Home)- 也许组件扫描中的通配符以类似的方式受到限制？我通常有一些在测试中作为导入器的基本上下文，因此在那里设置了组件扫描。

你找到答案了吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-18T15:10:33.647

正如其他人所提到的，您没有在组件扫描中包含源文件夹。

Maven 会**自动**将 src/test/java 和 src/main/java 中的类添加到类路径中。以该顺序。

所以问题可能是由于您的 BeanFactory 实现。确保您的 BeanFactory 实现具有默认构造函数并且已成功创建。要强制订购，您可以添加 @DependsOn 注释（但我不认为这是问题所在）

# php - 如果另一行尚未更新，则更新单个 mysql 行

> ID：13715217
> 
> 赞同：0
> 
> 时间：2012-12-05T02:04:28.770
> 
> 标签：php, mysql, sql

假设我有以下`select`语句，它返回第一次出现`dog=0`的位置`insert_time`：

```
SELECT mammal, id
FROM mytable
WHERE dog = 0 
  AND insert_time > "2012-02-09 00:00:00"
LIMIT 0, 1 
```

然后我想更新该行，以便`mammal = 1`仅在哺乳动物尚未更新的情况下`=1`。我目前知道如何做到这一点的唯一方法是在 PHP 中获取数组，检查哺乳动物元素，然后`UPDATE`对行运行另一个 mysql 语句。

```
UPDATE mytable
SET mammal = 1
WHERE id = selectidfromabove 
```

有没有办法可以在一个 mysql 语句中完成这一切，也许将`SELECT`上面的语句包装在一个`UPDATE`语句中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T02:09:12.773

您可以完全按照您的建议进行操作：

```
UPDATE mytable
SET mammal=1
WHERE id IN (
    SELECT id
    FROM mytable
    WHERE dog = 0 
        AND insert_time > "2012-02-09 00:00:00"
    LIMIT 0, 1
); 
```

注意：您的原始选择查询已修改为仅选择 id。

# triggers - Salesforce.com 触发器：将联系人潜在客户源复制到机会

> ID：13715218
> 
> 赞同：2
> 
> 时间：2012-12-05T02:04:43.867
> 
> 标签：triggers, salesforce, apex-code, soql

我被困在编写这个 Salesforce.com 触发器的语法（也许还有逻辑）上。我希望触发器检查主要联系人是否列在商机的 ContactRoles 中。如果列出了主要的，我需要从相应的联系人中查找 LeadSource 并将该值插入到机会的 Lead Source 中。

非常感谢任何提示或提示！

```
trigger UpdateContactLeadSource on Opportunity (after insert, after update) {

//Declare the Lead Source Variable which will hold the contact's lead source
string leadsource;

// See if there is a primary contact listed on the Opportunity
for (Opportunity o : Trigger.new) {
OpportunityContactRole[] contactRoleArray =
   [select ContactID, isPrimary from OpportunityContactRole where OpportunityId = :o.id ORDER BY isPrimary DESC, createdDate];

    // If the there is a primary contact, then...
    if (contactRoleArray.size() > 0) {

    // Lookup ContactID on the Contacts table to find the lead source
    for (Contact contact : [SELECT LeadSource FROM Contact WHERE Contact.Id = :OpportunityContactRole.ContactId LIMIT 1]) 

    // Store the actual lead source in the leadsource variable
    { Contact.LeadSource = leadsource;}
    update Opportunity.LeadSource = leadsource; }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:56:20.927

您的代码中有几个严重的坏事。希望你不会感到被冒犯，这是一个很好的要求，也是一个学习的机会......

1.  `after insert`在这里没有任何意义。根据定义，如果您刚刚完成插入此机会，则其中还没有任何联系人角色。*
2.  `after update`没问题。`before update`会更好，因为您只需填写该值即可免费保存到数据库。
3.  我认为您可能必须将此逻辑复制到 OpportunityContactRole 上的类似触发器？而不是重复代码 - 使用一些可以从两个地方调用的类？
4.  我假设您只想`LeadSource`在机会为空的情况下填写它？
5.  您在循环中进行了选择，这是一个非常糟糕的做法；）您的触发器不是“批量”，当有人在一个事务中更新 10 个机会（例如通过使用 Data Loader）时它可能会失败，因为我们的限制为最多 20触发器中的查询。
6.  您不需要`ORDER BY`，`LIMIT 1`等等 - Salesforce 将保护您并只允许 1 个联系人作为主要联系人。即使您想使用 Data Loader 以此类错误加载它们。
7.  阅读有关关系如何在 Salesforce 中运作的信息，您似乎会受益匪浅。与普通 SQL 语言相比，“点表示法”和子查询看起来有点奇怪，但您可以使用它们来大大简化您的代码。如果您过去做过一些面向对象的编程，将会有所帮助。这是[一些指南](http://wiki.developerforce.com/page/A_Deeper_look_at_SOQL_and_Relationship_Queries_on_Force.com)，这是[官方文档](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_soql_relationships.htm)

TL;博士

```
trigger fillLeadSource on Opportunity (before update) {
    /*  I'm assuming you want to fill LeadSource in only if it was blank. 
        If that's not the case - just delete this first part of code and in the query instead of ":oppsToFill" bind to ":trigger.new" or
        ":trigger.newMap.keyset()".
        (I know they look weird but you can do it, bind objects/collections in queries that expect Ids / collections of Ids)
    */
    Set<Id> oppsToFill = new Set<Id>();
    for(Opportunity o : trigger.new){
        if(o.LeadSource == null) {
            oppsToFill.add(o.Id);
        }
    }

    // Now we'll select all possible contacts wasting only 1 query.
    if(!oppsToFill.isEmpty()){
        List<OpportunityContactRole> roles = [SELECT OpportunityId, Contact.Name, Contact.LeadSource
            FROM OpportunityContactRole
            WHERE isPrimary = true AND Contact.LeadSource != null AND OpportunityId IN :oppsToFill];

        if(!roles.isEmpty()){
            for(OpportunityContactRole ocr : roles){
                Opportunity oppToBeFilled = trigger.newMap.get(ocr.OpportunityId);
                System.debug('Changing lead source on ' + oppToBeFilled.Name + ' from ' + oppToBeFilled.LeadSource + ' to ' + ocr.Contact.LeadSource + ' (thx to ' + ocr.Contact.Name + ' being the Primary Contact).');
                oppToBeFilled.LeadSource = ocr.Contact.LeadSource;
            }
        }
    }
    // That's it. If there was a primary contact with Lead source, data will be copied over.
    // If there was no primary contact or he didn't have the source filled in - tough luck, we did our best.
    // Since it's before update, you get save to database for free.
} 
```

* * *

*   精细打印到＃1，用于高级场景；）如果您在插入后有另一个触发器将在某处添加它们，那么您可以在保存后立即拥有联系人角色......但这会非常混乱（取决于哪个触发器首先触发我会说你会得到一个非常有趣的随机行为，祝你调试好运）。如果您在给定对象上确实有多个触发器，其中包含相同的触发关键字，则建议只有 1 个触发器并完全控制动作顺序。有关更多信息，请参阅[http://www.embracingthecloud.com/2010/07/08/ASimpleTriggerTemplateForSalesforce.aspx](http://www.embracingthecloud.com/2010/07/08/ASimpleTriggerTemplateForSalesforce.aspx)。

* * *

**编辑以回答评论 re#3 中的问题**

`before`您需要在新触发器中使用相似但不相同的代码（在这种情况下，它是或`after`- 我们需要显式更新 Opportunities并不重要）。这里有点糟糕，因为您要查看的字段不是直接可用的 - 您可以访问 OpportunityId、ContactId 但不能访问 Contact.LeadSource。这样的事情应该可以解决问题：

```
trigger ContactRoleRollup on OpportunityContactRole(after insert, after update){
    Map<Id,Id> oppToContactMap = new Map<Id, Id>();
    for(OpportunityContactRole ocr : trigger.new){
        if(ocr.isPrimary){
            oppToContactMap.put(ocr.OpportunityId, ocr.ContactId);
        }
    }
    if(!oppToContactMap.isEmpty()){
        List<Opportunity> oppsToUpdate = [SELECT Id FROM Opportunity WHERE LeadSource = null AND Id IN :oppToContactMap.keyset()];
        Map<Id, Contact> contacts = [SELECT Id, LeadSource FROM Contact WHERE LeadSource != null AND Id IN :oppToContactMap.values()];

        for(Opportunity o : oppsToUpdate){
            Id contactId = oppToContactMap.get(o.Id);
            Contact c = contacts.get(contactId);
            if(c != null){
                o.LeadSource = c.LeadSource;
            }
        }
        update oppsToUpdate;
    }
} 
```

这里很有趣，因为此更新将触发我们的旧触发器。如果您离开了我的“如果填写了leadSource，则跳过”应该没问题，但您仍然可能想探索两件事：

*   在类中使用一些[辅助静态标志](http://www.salesforce.com/docs/developer/cookbook/Content/apex_controlling_recursive_triggers.htm)，将其称为“skipTriggerOnOpps”，您将在 OpportunityContactRoles 上的触发器中设置此标志，并将 Opportunity 触发器的整个代码包装在其中，这样如果我们已经处理了主要源同步，它就不会执行.
*   从理论上讲，您可以在不更改任何内容的情况下“触摸”机会（在这种情况下将旧触发器视为一种好处，而不是不必要的副作用）。对我来说，它看起来有点太神奇了，但是如果对这里发生的事情进行了很好的评论，它可能会导致更少的代码、更少的逻辑重复、更少的单元测试......只要它是`after`触发器就可以工作，因此查询联系人角色我们刚刚修改会看到新的值。它必须看起来像那样

    ```
    trigger ContactRoleRollup on OpportunityContactRole(after insert, after update){
        Set<Id> oppIds = new Set<Id>();
        for(OpportunityContactRole ocr : trigger.new){
            if(ocr.isPrimary){
                oppIds.add(ocr.OpportunityId);
            }
        }
        if(!oppIds.isEmpty()){
            update [SELECT Id FROM Opportunity WHERE LeadSource = null AND Id IN :oppIds];
            // That's it. Call update directly on returned list without changing anything, let the other trigger worry about the logic
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T11:28:53.477

eyecream 的机会触发器最有帮助，并且正在为我解决问题。不过，值得指出的是，不幸的是，SFDC 尚未支持 OpportunityContactRole 触发器的假设。正如这个想法 ( [https://success.salesforce.com/ideaview?id=08730000000BrdvAAC](https://success.salesforce.com/ideaview?id=08730000000BrdvAAC) ) 所指出的，目前无法触发 OCR。

# simd - fftw simd-altivec.h 无法编译

> ID：13715219
> 
> 赞同：0
> 
> 时间：2012-12-05T02:04:45.407
> 
> 标签：simd, xcode4.4, fftw, altivec

我在使用 Xcode 4.4 的 Mac 上使用 fftw。在我的项目中，我将整个 fftw 源代码添加到项目中并尝试编译它。

它无法成功编译，因为在 simd-altivec.h 中，它给出了如下错误：

* * *

ALTIVEC 仅适用于单精度

编译 simd-altivec.h 需要 -maltivec 或等效项

未知类型向量

未知类型 V

* * *

我的问题是：

将第三方库添加到我的项目中的更好方法是什么？直接将所有源文件添加到我的项目中对我来说似乎很尴尬......

二、simd-altivec.h中的错误应该如何处理？simd-altivec.h 是做什么的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:25:16.163

您应该以正常方式构建 FFTW，然后将已编译的库（例如`libfftw3.a`）和标头（`fftw3.h`）添加到您的 Xcode 项目中。

例如，从命令行构建和安装 FFTW 以获得单精度（浮点）（`libfftw3f.a`）：

```
$ ./configure --enable-float --enable-sse
$ make
$ sudo make install 
```

对于双精度 ( `libfftw3.a`)：

```
$ ./configure --enable-sse2
$ make
$ sudo make install 
```

或者，您可以只使用出色的[自制](http://mxcl.github.com/homebrew/)包管理器，它会为您处理所有事情：

```
$ sudo brew install fftw 
```

* * *

注意：`simd-altivec.h`适用于使用 AltiVec SIMD 构建的 PowerPC。

# sql - SQL Server中的CROSS JOIN查找距离

> ID：13715224
> 
> 赞同：1
> 
> 时间：2012-12-05T02:05:40.097
> 
> 标签：sql, sql-server, sql-server-2008

我有两张桌子叫做`hotels`and `hotel locations`。在`hotels`我的表中`HotelId, hotelName`。在`hotelLocations`我的表中`HotelId, HotelNorthing, HotelEasting`。是表`HotelId`中引用的外键`HotelId`，并且是保存酒店北距和东距值的 UTM 坐标。`hotels``HotelNorthing``HotelEasting`

我想使用此数据查找彼此最近的 2 家酒店，并通过查询显示酒店表中的酒店名称和 ID 以及计算的距离。我以前尝试过各种交叉连接，但都失败了。我使用了毕达哥拉斯定理来计算酒店之间的距离，但我没有找到合适的查询结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T03:25:46.557

假设 MS SQL 2008 或更高版本我会使用内置的地理类型：

```
insert into locations (name, location) values
('Hotel1', 'Point(138.58 -34.92)'),
('Hotel2', 'POINT(138.97 -34.78)'),
('Hotel3', 'POINT(138.00 -34.00)'),
('Hotel4', 'POINT(138.57 -34.01)'),
('Hotel5', 'POINT(138.50 -34.03)'),
('Hotel6', 'POINT(138.49 -34.04)'),
('Hotel7', 'POINT(138.88 -34.04)')

declare @StartLocation geography
select @StartLocation = location
from Locations 
where name = 'Hotel1'

select location.STDistance(@StartLocation)
from locations 
```

这将为您提供从 Hotel1 到所有其他酒店的距离，然后只需对列表进行排序并获得前 2 名即可。

* * *

编辑：从每家酒店计算到每家其他酒店：

```
create table locations
(
    ID INT IDENTITY(1,1),
    Name varchar(50),
    Location geography
)

insert into locations (name, location) values
('Hotel1', 'Point(138.58 -34.92)'),
('Hotel2', 'POINT(138.59 -34.93)'),
('Hotel3', 'POINT(138.00 -34.00)'),
('Hotel4', 'POINT(138.57 -34.01)'),
('Hotel5', 'POINT(138.50 -34.03)'),
('Hotel6', 'POINT(138.49 -34.04)'),
('Hotel7', 'POINT(138.88 -34.04)')

select l1.name, l2.name, l1.location.STDistance(l2.Location)
FROM Locations l1
JOIN Locations l2 on l2.ID < l1.ID 
```

* * *

编辑 2：将酒店名称拆分为单独的表格：

```
create table locationNames
(
    ID INT IDENTITY(1,1),
    Name VARCHAR(50)
)
insert into locationNames (Name) VALUES
('Hotel1'),
('Hotel2'),
('Hotel3'),
('Hotel4'),
('Hotel5'),
('Hotel6'),
('Hotel7')

create table locations
(
    ID INT IDENTITY(1,1),
    Location geography
)

insert into locations (location) values
('Point(138.58 -34.92)'),
('POINT(138.59 -34.93)'),
('POINT(138.00 -34.00)'),
('POINT(138.57 -34.01)'),
('POINT(138.50 -34.03)'),
('POINT(138.49 -34.04)'),
('POINT(138.88 -34.04)')

select ln1.Name, ln2.Name, l1.location.STDistance(l2.Location)
FROM Locations l1
JOIN Locations l2 on l2.ID < l1.ID
JOIN LocationNames ln1 on ln1.ID = l1.ID
JOIN LocationNames ln2 on ln2.ID = l2.ID 
```

# c - 基于结构的程序、链接器和多个定义？

> ID：13715228
> 
> 赞同：0
> 
> 时间：2012-12-05T02:06:25.860
> 
> 标签：c, linker-errors

这是给我的文件，我被告知不要更改两者中的任何一个。函数的规范在头文件中，main.c 是一个测试代码的外壳：

### 日期.h：

```
#ifndef _DateH_
#define _DateH_

typedef struct {
int month;
int day;
int year;
} date;

int is_leap_year(int the_year);

int days_in_month(int month,int leap_year);
// Recommendation: use switch statement

void input_date(date *dp);  // User input of form mm/dd/yyyy
                        // where mm, dd and yyy are integers
                        // NO PROMPT  JUST INPUT

void print_date(date d);    // Output format same as input_date's input format

int day_of_year(date d);    // Number of days since beginning of year
                        // January 1 is day 1 (not 0)

int compare_dates(date d1, date d2);
// Returns -1 if d1 earlier than d2, 0 if same date, +1 if d1 after d2

void check_age_and_birthday(date birthdate, date today);
// Output: "You are __ years old and this is your birthday\n"
//      or "You are __ years old and this is not your birthday\n"

void submit_status(date start, date end, date submit);
// Prints ""Submission not accepted - too early\n" if submit < start;
//        "Submission not accepted too - late\n" if end < submit;
//        "Submission accepted\n"  otherwise.
#endif

// Note: A year is a leap year if and only if it is divisible by 4
// and, if it is divisible by 100, it is also divisible by 400. 
```

### 主.c：

```
#include "date.h"
#include <stdio.h>

int main()
{
  date d,bdate,today,start,end,submit;

  printf("Enter a date: ");
  input_date(&d);

  printf("\n");
  print_date(d);
  printf(" is day %d of year %d, which is ",day_of_year(d),d.year);
  if (!is_leap_year(d.year))
    printf("not ");
  printf("a leap year\n\n");

  printf("Enter your birthdate: ");
  input_date(&bdate);

  printf("Enter today's date: ");
  input_date(&today);

  printf("\n");
  check_age_and_birthday(bdate,today);

  printf("\nEnter the start date: ");
  input_date(&start);

  printf("Enter the end date: ");
  input_date(&end);

  printf("Enter the date submitted: ");
  input_date(&submit);

  printf("\n\n");
  submit_status(start,end,submit);

  return 0;
} 
```

### 日期.c：

```
#include "date.h"

int is_leap_year(int the_year)
{
   if (the_year % 4 == 0) {
                if (the_year % 100 == 0) {
                        if (the_year % 400 == 0) {
                                return (1);
                        }
                        else return (0);
                }
                else return (1);
        }
        else return (0);
}

int days_in_month(int month, int leap_year)
{
        switch (month) {
                case 1: {
                        return (31);
                        break;
                }
                case 2: {
                        if (leap_year) return (29);
                        else return (28);
                        break;
                }
                case 3: {
                        return (31);
                        break;
                }
                case 4: {      
                        return (30);
                        break;
                }
                case 5: {
                        return (31);
                        break;
                }
                case 6: {
                        return (30);
                        break;
                }
                case 7: {
                        return (31);
                        break;
                }
                case 8: {
                        return (31);
                        break;
                }
                case 9: {      
                        return (30);
                        break;
                }
                case 10: {
                        return (31);
                        break;
                }
                case 11: {
                        return (30);
                        break;
                }
                case 12: {
                        return (31);
                        break;
                }
        }              
}

void input_date(date *dp)
{
        do
        {
             scanf("%d/%d/%d", dp->month, dp->day, dp->year);
        }
        while
             (dp->day > days_in_month(dp->month, is_leap_year(dp->year)) || dp->day < 1);
}

void print_date(date d)
{
        printf("%d/%d/%d", d.month, d.day, d.year);
}

int day_of_year(date d)
{
        int day_sum = 0;
        int i;

        if (is_leap_year(d.year))
        {
          for (i = 1; i < d.month; i++)
              {
              day_sum = day_sum + days_in_month(i, 1);
              }

        }
        else
        {
             for (i = 1; i < d.month; i++)
             {
                day_sum += days_in_month(i, 0);
             }
        }

         day_sum += d.day;

         return (day_sum);
}

void check_age_and_birthday(date birthdate, date today)
{
        int age;

        if (today.month > birthdate.month)
        {
                age = today.year - birthdate.year;
        }
        if (today.month < birthdate.month)
        {
                age = (today.year - birthdate.year) - 1;
        }
        if (today.month == birthdate.month)
        {
                if ((today.day > birthdate.day) || (today.day == birthdate.day)) {
                        age = today.year - birthdate.year;
                }
                if (today.day < birthdate.day) {
                        age = (today.year - birthdate.year) - 1;
                }
        }

        if (!compare_dates(birthdate, today))
        {
                printf ("You are %d years old and this is your birthday\n", age);
        }
        else
        {
                printf ("You are %d years old and this is not your birthday\n", age);
        }
}

 int compare_dates(date d1, date d2)
{
        if (d1.year > d2.year)
        {
                return (1);
        }
        if (d1.year < d2.year)
        {
                return (-1);
        }
        if (d1.year == d2.year)
        {
                if (d1.month > d2.month)
                {
                        return (1);
                }
                if (d1.month < d2.month)
                {
                        return (-1);
                }
                if (d1.month == d2.month)
                {
                        if (d1.day > d2.day)
                        {
                                return (1);
                        }
                        if (d1.day < d2.day)
                        {
                                return (-1);
                        }
                        if (d1.day == d2.day)
                        {
                                return (0);
                        }
                }
        }

 }

void submit_status(date start, date end, date submit)
{
        if (compare_dates(submit, start) == -1)
        {
                printf("Submission not accepted - too early\n");
        }
        if (compare_dates(submit, end) == 1)
        {
                printf("Submission not accepted - too late\n");
        }
        if ((compare_dates(submit, start) == 1) && (compare_dates(submit, end) == -1))
        {
                printf("Submission accepted\n");
        }

} 
```

当我将它们放入“控制台应用程序”项目并构建它时，出现错误：

```
[Linker error] undefined reference to `submit_status'  
ld returned 1 exit status  
[Build Error] [DateStruct.exe] Error 1 
```

如果我在单独的选项卡中运行它们，并且没有创建项目，我会得到：

```
mangled line number section.  
[Linker error] undefined reference to `WinMain@16'  
ld returned 1 exit status 
```

我为此使用 Dev-C++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T02:47:27.913

当您输入日期时，您的程序会崩溃，因为您正在传递`dp->month`、`dp->day`和`dp->year`to的值`scanf()`。`scanf()`需要一个指针来存储结果；在 C 中，整数看起来像一个指针，因此它很乐意将 in 中的未初始化值解释`dp->month`为指针，但由于无法在那里写入而崩溃。

您想改用`&dp->month`等。

我建议在启用所有警告的情况下进行编译（我不知道 Dev-C++，但 GCC 标志是`-Wall -Wextra`）；我还建议处理错误警告，这样您就不会意外忽略它们，使用`-Werror`. 如果我在启用警告的情况下编译，GCC 会告诉我问题：

```
cc -Wall -Werror -Wextra    struct.c   -o struct
struct.c: In function ‘main’:
struct.c:13:3: error: format ‘%d’ expects argument of type ‘int *’, but argument 2 has type ‘int’ [-Werror=format]
struct.c:13:3: error: format ‘%d’ expects argument of type ‘int *’, but argument 3 has type ‘int’ [-Werror=format]
cc1: all warnings being treated as errors 
```

这个示例错误也来自我编写的一个非常快速的测试文件。如果您尝试创建一个[简短的、独立](http://sscce.org/)的问题示例，它在调试问题时非常有帮助，如果您遇到困难，可以提出问题。您发布的代码有很多无关的部分；几个头文件，你从未真正接触过的函数，等等。将您的代码分解为问题的最小示例可以帮助您自己找到问题，或者如果失败，请提供一个示例，让其他人更容易查看和查看问题，而无需费力地处理一堆额外的东西.

这是一个演示问题的最小示例：

```
#include <stdio.h>                                                                                      

struct foo {                                                                                            
  int bar;                                                                                              
  int baz;                                                                                              
};                                                                                                      

int main() {                                                                                            
  struct foo x, *px;                                                                                    
  px = &x;                                                                                              

  printf("Enter bar and baz: \n");
  scanf("%d %d", px->bar, px->baz);

  printf("Got: %d %d\n", px->bar, px->baz);

  return 0;
} 
```

以及如何解决它：

```
#include <stdio.h>                                                                                      

struct foo {                                                                                            
  int bar;                                                                                              
  int baz;                                                                                              
};                                                                                                      

int main() {                                                                                            
  struct foo x, *px;                                                                                    
  px = &x;                                                                                              

  printf("Enter bar and baz: \n");
  scanf("%d %d", &px->bar, &px->baz);

  printf("Got: %d %d\n", px->bar, px->baz);

  return 0;
} 
```

# xcode - 无法在 OSX 10.8 以下设置部署目标（错误：dyld：未加载库 -- 原因：库版本不兼容）

> ID：13715229
> 
> 赞同：4
> 
> 时间：2012-12-05T02:06:35.913
> 
> 标签：xcode, macos, cocoa, frameworks, build

我正在尝试构建和运行基于 Cocoa 的 OSX 应用程序。但是，当我尝试将部署目标设置为 10.8 以外的任何版本时，应用程序尝试启动时会出现运行时错误：

```
dyld: Library not loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices
  Referenced from: /Users/chris/Library/Developer/Xcode/DerivedData/Build/Products/Release/MyApp.app/Contents/MacOS/MyApp
  Reason: Incompatible library version: MyApp requires version 64.0.0 or later, but ApplicationServices provides version 1.0.0 
```

据我所知，我的应用程序中没有任何内容使用 ApplicationServices.framework 中的任何内容。我什至不知道它为什么会尝试加载该库。

作为参考，我使用了一些 3rd 方框架，包括 Growl.framework (Growl 2.0)、Sparkle.framework (Sparkle 1.5 b6) 和 MagicKit.framework (https://github.com/aidansteele/MagicKit)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T19:03:23.520

回答我自己的问题（经过几个小时的调查）：

显然，通过链接到我的桌面应用程序项目中的 CoreGraphics.framework，它会导致 10.8 版本的 ApplicationServices 框架的运行时加载请求。幸运的是，我什至没有使用 CoreGraphics 的任何东西。删除导致 dyld 加载错误停止。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-03T10:01:54.987

确保将***ApplicationServices.framework***添加到目标的 Build Phase 选项卡中的***Link Binary With Libraries*** Phase。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-26T20:17:47.543

我通过尝试在 CoreGraphics 中使用符号并直接导入 <CoreGraphics/CGGeometry.h> 而不是文档中指定的推荐的 <ApplicationServices/ApplicationServices.h> 得到了这个错误。

信不信由你，即使在 10.8 中，您仍然应该为此导入和链接 ApplicationServices。

# php - C++ 'php_sprintf' 如何返回这个值？

> ID：13715230
> 
> 赞同：2
> 
> 时间：2012-12-05T02:06:48.910
> 
> 标签：php, c++, printf

```
void PrintMACaddress(unsigned char MACData[]){
    php_sprintf("MAC Address: %02X-%02X-%02X-%02X-%02X-%02X\n", 
        MACData[0], MACData[1], MACData[2], MACData[3], MACData[4], MACData[5]);
} 
```

输出代码为：

```
return PrintMACaddress(MACData); 
```

当我单击“构建”时，它显示此错误：

错误 C2664：“php_sprintf”：**无法将参数 2 从“unsigned char”转换为“const char *** ”

请帮忙，我是 C++ 的新手，我已经搜索了很多天来寻找这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:57:57.577

我假设它`php_sprintf`指的是您为 PHP 编写扩展时使用的内部 PHP 函数。`C`然后它具有与函数相同的参数`sprintf`。

您是否尝试将 MAC 地址打印到标准输出或字符串？

如果要打印到标准输出（随后打印到控制台），请使用`php_printf`. 所以你的代码看起来像：

```
void PrintMACaddress(unsigned char MACData[]){
    php_printf("MAC Address: %02X-%02X-%02X-%02X-%02X-%02X\n", 
        MACData[0], MACData[1], MACData[2], MACData[3], MACData[4], MACData[5]);
} 
```

如果要返回值而不是将其打印到输出中，则需要注意以下几点：

*   在 C++ 中使用字符串时，可以将其表示为`char *`或`std::string`
*   使用`std::string`是 C++ 的方式。
*   使用`char *`更`C`-ish 风格。您必须自己管理内存数组（在堆栈上分配或使用`new []`and `delete []`）

如果我使用以下方法重写该方法`std::string`：

```
std::string PrintMACaddress(unsigned char MACData[]){
    char tmp_[32]; // The output string should be always 32 bytes long
    php_sprintf(tmp_,"MAC Address: %02X-%02X-%02X-%02X-%02X-%02X\n", 
        MACData[0], MACData[1], MACData[2], MACData[3], MACData[4], MACData[5]);
    return std::string(tmp_);
} 
```

如果您想（或必须）使用`char *`：

```
char *PrintMACaddress(char *MACString, unsigned char MACData[]){
    php_sprintf(MACString,"MAC Address: %02X-%02X-%02X-%02X-%02X-%02X\n", 
        MACData[0], MACData[1], MACData[2], MACData[3], MACData[4], MACData[5]);
    return MACString;
} 
```

在这里，该方法获得了一个新参数 - 指向至少 32 字节的已分配数组的指针。然后它返回指向该数组的指针。你会像这样使用它：

```
char macString[44];
PrintMACaddress(macString, MACData);
/* Use the string stored in macString */ 
```

或者

```
char* macString = new char[44];
PrintMACaddress(macString, MACData);
/* Use the string stored in macString */   
delete [] macString; 
```

**编辑：**用 php_sprintf 更新了答案的第二部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T02:17:02.490

据我所知，第二个参数不能是`unsigned char MACData[]`你设置的；正如提到的错误。如果它必须是一个`unsigned char`，使用`(const char *)`将它转换为一个常量字符。

```
void PrintMACaddress(unsigned char MACData[]){
    php_sprintf("MAC Address: %02X-%02X-%02X-%02X-%02X-%02X\n", 
        (const char *)MACData[0], (const char *)MACData[1], (const char *)MACData[2], (const char *)MACData[3], (const char *)MACData[4], (const char *)MACData[5]);
} 
```

# perl - 如何在子例程中打印调用的子例程

> ID：13715231
> 
> 赞同：0
> 
> 时间：2012-12-05T02:06:55.653
> 
> 标签：perl, subroutine, output

我有这个 perl 脚本运行良好，输出显示在控制台中。但是，我的想法是重定向到一个文件....到目前为止，我能够完成一半的任务。除了在“sub writepage”中调用的两个子例程之外，我可以打印所有内容

有任何想法吗？

```
#!/usr/bin/perl
use strict;
use warnings;
use POSIX qw/strftime/;
#use warnings;
my $TOTALIOS = 'totalios';
my $READP = 'readpe';
my $CACHEP = 'cachehit';
my $CKBSEC = 'currentkb';
my $MKBSEC = 'maximumkb';
my $CIOSEC = 'currentio';
my $MIOSEC = 'maxio';
my $DATESTORE = 'dates.sec';
my $DATECMD = strftime "%m/%d/%y", localtime;
my $TIOS = 'Tios';
my $READp = 'readp';
my $CACHEp = 'cachep';
my $CKBsec = 'ckbsec';
my $MKBsec = 'mkbsec';
my $CIOsec = 'ciosec';
my $MIOsec = 'miosec';
my ($STORENUM, $STORENAME, $IMGPREFIX, $MONTH, $DAY, $YEAR) = &mysubinput;
#my $STORENUM;
#my $STORENAME;
#my $IMGPREFIX;
#my $MONTH;
#my $DAY;
#my $YEAR;
my $outfile = 'datastore.txt';
sub mysubinput
{
    print "Enter the number for the datastore: \n";
        my $STORENUM = <STDIN>;
        chomp($STORENUM);
        print "Enter the name for the datastore e.g: DataStore or ServerStore: \n";
        my $STORENAME = <STDIN>;
        chomp($STORENAME);
        print "Enter the data store image prefix e.g. datastore or serverstore: \n";
        my $IMGPREFIX = <STDIN>;
        chomp($IMGPREFIX);
        print "Enter the month MM: \n";
        my $MONTH = <STDIN>;
        chomp($MONTH);
        print "Enter the day DD: \n";
        my $DAY = <STDIN>;
        chomp($DAY);
        print "Enter the Year YYYY: \n";
        my $YEAR = <STDIN>;
        chomp($YEAR);
    return ($STORENUM, $STORENAME, $IMGPREFIX, $MONTH, $DAY, $YEAR);
#   print "$STORENUM $STORENAME $IMGPREFIX $MONTH $DAY $YEAR\n";
#   print "Not a very interesting routine\n";
#   print "This does the same thing every time\n";
#   print "$TOTALIOS\n";
#   print "Enter the number for the datastore: \n";
#   $line = <STDIN>;
#   chomp($line);
#   print "$line\n";
#   print "$DATECMD\n";
}
sub writedate 
{
    print "! $DATECMD\n";   
}    

sub writesections
{
    print "| [[File:$STORENAME-$STORENUM-$TIOS-$MONTH-$DAY-$YEAR.png| 100px]]\n";
    print "| [[File:$STORENAME-$STORENUM-$READp-$MONTH-$DAY-$YEAR.png| 100px]]\n";
    print "| [[File:$STORENAME-$STORENUM-$CACHEp-$MONTH-$DAY-$YEAR.png| 100px]]\n";
    print "| [[File:$STORENAME-$STORENUM-$CKBsec-$MONTH-$DAY-$YEAR.png| 100px]]\n";
    print "| [[File:$STORENAME-$STORENUM-$MKBsec-$MONTH-$DAY-$YEAR.png| 100px]]\n";
    print "| [[File:$STORENAME-$STORENUM-$CIOsec-$MONTH-$DAY-$YEAR.png| 100px]]\n";
    print "| [[File:$STORENAME-$STORENUM-$MIOsec-$MONTH-$DAY-$YEAR.png| 100px]]\n";
}   

sub writepage
{
    open (FILE, ">> $outfile") || die "problem opening $outfile\n";
    print FILE "Go back to [[MD3000i-Perf]] \n";
    print FILE "{| border=1 cellspacing=5 cellpadding=2 style=text-align: center \n";
    print FILE "|-\n";
    print FILE "! [[DataStore-1]]\n";
    print FILE "! [[DataStore-2]]\n";
    print FILE "! [[DataStore-3]]\n";
    print FILE "! [[DataStore-4]]\n";
    print FILE "! [[DataStore-5]]\n";
    print FILE "! [[DataStore-6]]\n";
    print FILE "! [[DataStore-7]]\n";
    print FILE "! [[DataStore-8]]\n";
    print FILE "! [[DataStore-9]]\n";
    print FILE "|-\n";
    print FILE "| [[File:disk.png |60px]]\n";
    print FILE "| [[File:disk.png |60px]]\n";
    print FILE "| [[File:disk.png |60px]]\n";
    print FILE "| [[File:disk.png |60px]]\n";
    print FILE "| [[File:disk.png |60px]]\n";
    print FILE "| [[File:disk.png |60px]]\n";
    print FILE "| [[File:disk.png |60px]]\n";
    print FILE "| [[File:disk.png |60px]]\n";
    print FILE "| [[File:disk.png |60px]]\n";
    print FILE "|}\n";
    print FILE "{| border=1 cellspacing=5 cellpadding=2 style=text-align: center\n";
    print FILE "|-\n";
    print FILE writedate();
    print FILE "|-\n";
    print FILE writesections();
    print FILE "|-}\n";
    close(FILE);
}

#open (FILE, "> $myfile") || die "Couldn't open $myfile: $!\n";
#print FILE writepage();
#close (FILE);

writepage(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T02:43:21.697

使用[选择](http://perldoc.perl.org/functions/select.html)。

或者从函数返回一个字符串而不是打印？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T02:49:11.267

我刚刚将 FILE 替换为词法文件句柄：

```
sub writedate 
{
    my $fh = shift;
    print $fh "! $DATECMD\n";   
}    

sub writesections
{
    my $fh = shift;
    print $fh "| [[File:$STORENAME-$STORENUM-$TIOS-$MONTH-$DAY-$YEAR.png| 100px]]\n";
    print $fh "| [[File:$STORENAME-$STORENUM-$READp-$MONTH-$DAY-$YEAR.png| 100px]]\n";
    [....]
}

  sub writepage
{
#   open (FILE, ">> $outfile") || die "problem opening $outfile\n";
    open my $fh, '>', $outfile or die "Problem opening $outfile\n";
    print $fh "Go back to [[MD3000i-Perf]] \n";
    print $fh "{| border=1 cellspacing=5 cellpadding=2 style=text-align: center \n";
    print $fh "|-\n";
    [....]
    [....]
    print $fh "|}\n";
    print $fh "{| border=1 cellspacing=5 cellpadding=2 style=text-align: center\n";
    print $fh "|-\n";
    writedate($fh);
    print $fh "|-\n";
    writesections($fh);
    print $fh "|-}\n";
#   close(FILE);
    close $fh;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-05T02:24:38.303

您应该使用词法文件句柄。这将使这项任务变得微不足道。通常，它也是处理文件句柄的首选方式。这是一个例子：

```
sub mysub {
    open my $fh, '>>', $outfile or die "Problem opening $outfile\n";
    print $fh "Some string\n";
    anotherSub($fh);
    close $fh;
}

sub anotherSub {
    my $fh = shift;
    print $fh "A second string\n";
} 
```

# c++ - 当我调整这个向量（向量）的大小时会发生什么

> ID：13715232
> 
> 赞同：4
> 
> 时间：2012-12-05T02:07:04.417
> 
> 标签：c++, vector

```
std::vector<std::vector<int>> vecOfVecs;
vecOfVecs.resize(10); 
```

vecOfVecs 的位置 0-9 是什么？std::vector 的实例？

如果是这样，这是否合法：

```
std::vector<int> *pToVec = &(vecOfVecs[0]);
pToVec->push_back(10); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T02:14:23.153

是的，位置 0-9 将是 的空实例`std::vector<int>`，就像您说的一样

```
for (size_t i = vecOfVecs.size(); i < 10; ++i) {
    vecOfVecs.push_back(std::vector<int>());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T02:16:49.437

C++03 中的“规范”定义`std::vector::resize`实际上有*两个*参数，而不是一个，第二个参数是用作新创建元素的“填充值”的元素值。第二个参数的默认参数等于元素类型的值初始化对象。这意味着您的电话

```
vecOfVecs.resize(10); 
```

实际上被翻译成一个

```
vecOfVecs.resize(10, std::vector<int>()); 
```

称呼。也就是说，实际上是您隐式提供了一个默认构造的实例，`std::vector<int>`用作所有新元素的初始化程序。

你的`pToVec->push_back(10)`电话是完全合法的。

C++11 对 的定义进行了一些微不足道的（在此上下文中）更改`resize`，但总体效果保持不变：新元素为您进行了值初始化。它们可以在调用 后立即使用`resize`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T02:10:21.730

有一个默认的第二个参数`resize`告诉您要插入额外空间的值。如果未指定该值，则使用默认构造的值。

```
void resize (size_type n, value_type val = value_type()); 
```

> 如果`n`大于当前容器大小，则通过在末尾插入所需数量的元素来扩展内容，以达到`n`. 如果`val`指定，则新元素被初始化为 的副本`val`，否则，它们被值初始化。

您的示例完全合法：您的向量向量将包含十个空向量。

# go - 返回指向本地结构的指针

> ID：13715237
> 
> 赞同：94
> 
> 时间：2012-12-05T02:07:50.120
> 
> 标签：go

我看到一些代码示例具有这样的结构：

```
type point struct {
  x, y int
}

func newPoint() *point {
  return &point{10, 20}
} 
```

我有 C++ 背景，这对我来说似乎是错误的。这种结构的语义是什么？新点是在堆栈还是堆上分配？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-12-05T02:15:37.817

Go 执行指针转义分析。如果指针脱离本地堆栈，在这种情况下，它会在堆上分配对象。如果它没有转义本地函数，编译器可以自由地将它分配到堆栈上（尽管它不做任何保证；这取决于指针转义分析是否可以证明指针保持在该函数的本地）。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-05T02:15:31.130

Golang 的“文档声明返回指向局部变量的指针是完全合法的。” 正如我在这里读到的

[https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/EYUuead0LsY](https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/EYUuead0LsY)

我看起来编译器看到你返回地址并为你把它放在堆上。这是 Go 中的一个常见习语。

# php - 需要一些关于 example.php/example 的答案

> ID：13715238
> 
> 赞同：1
> 
> 时间：2012-12-05T02:08:06.547
> 
> 标签：php, url, post, get, slash

我正在做一个项目，我在浏览一些代码时偶然发现了这个。我曾尝试用谷歌搜索，但找不到正确的关键字来搜索这个问题。

```
http://www.fruit.com/example.php/red 
```

我对此感到困惑，例如，`.php`它的结尾仍然有一个字符`/red`。这样做的目的是什么？跟`POST`方法有关系吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T02:10:30.840

一种可能的解释是开发人员正在使用`.htaccess`重写规则。很可能是与页面有关的额外数据（例如您提到的 POST 和 GET），并且这样做只是为了使 URL 看起来更漂亮或简化 URL。

有时也这样做是为了更容易链接回该页面，特别是如果该页面是基于数据生成的。

一个受欢迎的地方是博客。您经常看到博客将链接显示为：

`http://blog.com/blog/2001/02/23/how-pretty-is-this`

实际上，对服务器的请求类似于：

`/blog.php?year=2001&month=02&day=23&title=how-pretty-is-this`

这不是那么漂亮，也不那么容易链接回这个特定页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T02:26:26.883

Mr.Xenotype 很好地回答了您的问题，但遗漏了一小部分。

```
Does it have something to do with POST method? 
```

不，它处理 GET 方法。正如他所说，让 URL 看起来“漂亮”非常重要，如果网站是这样设计的，它实际上可能是 RESTful API 的关键部分（对于初学者来说有点高级）。

[http://www.fruit.com/example.php/red](http://www.fruit.com/example.php/red)

是相同的

[http://www.fruit.com/example.php?id=red](http://www.fruit.com/example.php?id=red)

需要对 .htaccess 文件进行一些修改才能使用所谓的正则表达式或 REGEX 来完成此操作。如果您想了解更多信息，我很乐意提供一些示例。

在 .htaccess 文件（服务器配置文件）中添加“RewriteRule”可以允许服务器更改服务器文件/文件夹的访问方式

```
//probably what the rewrite looks like of the example you provided
RewriteRule .* example.php/$0 [L] 
```

RewriteRules 分为 4 个块：action、pattern、rewrite 和 flag

行动：RewriteRule，本质上只是让服务器知道我们将要执行重写

Pattern: .* 是我们在这个例子中的模式。这 ”。” 代表任何字符，意思是匹配任何字符，“*”告诉它重复这个。因此，匹配重写后的任何字符。

rewrite 是执行此操作的页面，因此 example.php 是 rewrite。这个“$”告诉它从哪里开始重写。因此，我们将从“$”符号开始重写，并使用我们的模式。我们的模式“.*”告诉我们匹配任何字符，在本例中为红色。

[L] 表示最后一条规则。就是这样，没有更多的规则可循。您可以对多个页面使用多个重写规则。

所以现在，服务器不再使用 example.php?id=red，而是知道在“example.php/”之后开始匹配我们提供的任何字符。

# c++ - 从二叉搜索树中删除一个值

> ID：13715241
> 
> 赞同：1
> 
> 时间：2012-12-05T02:08:35.770
> 
> 标签：c++, pointers, binary-tree, binary-search-tree

我正在编写一个函数，该函数将从具有关联给定键的二叉搜索树中删除一个条目。到目前为止，我的代码有这个：

```
template <typename Item, typename Key = Item>
bool BSTree<Item,Key>::remove(const Key& key) {
    bool removed = false;
    Node* ptr = root;
    if(ptr == NULL)
        return removed;
    while(key != ptr) {
        if(ptr == NULL)
            return removed;
        else if(key > ptr) 
            ptr = ptr->right();
        else
            ptr = ptr->left();
    }
    removed = true;
    Item max = max(ptr);
    ptr->data() = max;
    Node* prev = ptr;
    while (ptr != NULL) {
        prev = ptr;
        ptr = ptr->right();
    }
    delete ptr;
    if (prev->left() != NULL) 
        prev = copy(prev->left());
    delete prev;
    return removed;
} 
```

Copy 是我已经编写的另一个函数，它将使用递归方法将所有值从某个节点传输到树的末尾。我相信这个功能应该可以工作，但我不完全确定，希望能得到一些反馈。

我对函数的最后三行也有问题。在它们中的每一个中，“if”、“delete”和“return”都带有下划线，并给出错误“错误：预期声明”。我不知道这是怎么回事，非常感谢您的反馈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T02:43:00.990

恕我直言，我看到了几件事。

1.  对于 BST 删除，您需要一种更好的移植方法，而不是“复制”，至少您应该找到与要删除的节点相比下一个最小的节点。

2.  ptr->数据（）=最大值；我猜您的“data()”方法返回对 Item 中成员的引用。没有错，就是感觉怪怪的。

3.  您有两个“删除”语句，但您不应该只删除一项吗？

4.  在这个部分：

    ```
    while (ptr != NULL) {

        prev = ptr;
        ptr = ptr->right();
    }
    delete ptr; 
    ```

    while 退出后，ptr 的值为 NULL，所以你在删除一个 NULL，不酷。

# vba - Vba：根据文本选择多行

> ID：13715245
> 
> 赞同：2
> 
> 时间：2012-12-05T02:10:04.383
> 
> 标签：vba, excel

我有一个由 4 列和未确定的行组成的列表。我试图只收集 Col B 和 C，其中 Col B 有单词 Jackpot 并将它们复制到新表中。我已经得到了要排序的列表，但是使用 UsedRange，复制了所有行。我如何只复制 B 和 C？

```
Range("A1").Activate
ActiveCell.EntireRow.Insert
Rows("1:1").Select
Selection.AutoFilter
Selection.AutoFilter Field:=2, Criteria1:="Jackpot"

ActiveSheet.UsedRange.Select 
```

* * *

```
Col A | Col B |      Col C | Col D
1       Stuff          1       1
1       MoreStuff      2       1
1       Jackpot        3       1
1       Jackpot        4       1
1       SomeStuff      5       1
1       Jackpot        6       1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T03:04:33.027

过滤后，您可以选择 B:C 范围，然后复制到您的目的地。我更新了您的代码以向您展示一个示例。*此外，您并不总是需要使用 VBA“选择”任何*内容（很少需要这样做）。

希望这可以帮助

```
Option Explicit

Sub doIt()
    Dim sh As Worksheet
    Set sh = ActiveSheet

    sh.Range("A1:D1").AutoFilter Field:=2, Criteria1:="Jackpot"

    ' make sure results were returned from the filter
    If (sh.Cells(sh.Rows.Count, 1).End(xlUp).Address <> "$A$1") Then

        Dim newSh As Worksheet
        Set newSh = Sheets.Add

        sh.Range("B:C").Copy newSh.Range("A1")

    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T03:11:26.900

先切，虽然我确实有一些问题：

```
Dim ws As Worksheet
Set ws = ThisWorkbook.Worksheets("Results")
ws.Rows(1).AutoFilter Field:=2, Criteria1:="Jackpot"
ws.Range("B2:C2", Range("B2:C2").End(xlDown)).Copy
ThisWorkbook.Worksheets("DestinationSheet").Range("A1").PasteSpecial 
```

1）这是否会每次都发生在同一张纸上（例如`Worksheets("Results")`）？
2) 你想包括标题行吗？如果是这样，在这两种情况下都将`.Copy`行更改为`B1:C1`。当前的实现只采用没有标题的过滤内容。

显然，您需要更改工作表名称以匹配您的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T07:22:03.887

这是一种不依赖自动过滤器的简单方法。不确定速度方面哪个更快，但我想为您的问题提供另一种解决方案。

```
Sub CopyJackpot()
Application.ScreenUpdating = False
Dim lastRow As Long, i As Long, j As Long

j = 1
lastRow = Range("B" & Rows.Count).End(xlUp).Row

For i = 1 To lastRow
    If InStr(Range("B" & i).Value, "Jackpot") Then
       Rows(i).Copy Destination:=Sheets(2).Rows(j)
       j = j + 1
    End If
Next

Application.ScreenUpdating = True
MsgBox j - 1 & " row(s) copied to Sheet2."

End Sub 
```

# perl - 如何捕获 Perl MongoDB::Cursor 的“recv timed out”错误？

> ID：13715246
> 
> 赞同：3
> 
> 时间：2012-12-05T02:10:04.123
> 
> 标签：perl, mongodb

我有一个 Perl 程序通过 cron 发出这些消息：

```
recv timed out (60000 ms) at /usr/local/lib/perl/5.8.8/MongoDB/Cursor.pm line 251.
recv timed out (60000 ms) at /usr/local/lib/perl/5.8.8/MongoDB/Cursor.pm line 251.
recv timed out (60000 ms) at /usr/local/lib/perl/5.8.8/MongoDB/Cursor.pm line 251. 
```

我已采取以下步骤来缓解：

*   $collection->find(...) 周围的 eval 块*   $cursor->next() 周围的 eval 块*   连接查询超时值 60000*   连接超时 1000

    超时并不奇怪，因为服务器处于高负载状态。但我想巧妙地捕捉超时并优雅地退出。

    有什么建议么？

    更新：

    我已经确定 recv 超时肯定发生在**$cursor->next()**调用上。

    ```
    # doesn't capture
    {   
        local $SIG{__DIE__} = sub { return; };    
        $doc_ref = $cursor->next();
    };

    # doesn't capture
    eval { $doc_ref = $cursor->next(); }; 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:31:00.683

幸运的是，它是一个`die`，您可以捕获它。有一次我写了一个[AnyEvent](https://metacpan.org/module/AnyEvent) + [EV](https://metacpan.org/module/EV)守护程序，它通过这个肮脏的技巧重生来欺骗死亡（*邪恶的笑声）：*

```
use FindBin qw($Script);
use EV;
$EV::DIED = sub { warn $@; exec $^X, $Script, qw(restart) }; 
```

还有一个通用`die`陷阱，由 brian d foy 在他的[Override die with END or CORE::GLOBAL::die](http://www.effectiveperlprogramming.com/blog/1310)文章中描述：

```
$SIG{__DIE__} = sub { warn "I'm sorry, Dave, I'm afraid I can't do that" }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:41:15.810

它可能是进行退出调用，而不是 diie，因此 eval 无法捕获它。尝试测试::陷阱。

> 主要（但不限于）用于测试脚本： 类固醇上的块 eval，可配置和可扩展，但默认情况下捕获 (Perl) STDOUT、STDERR、警告、异常、可能的退出代码和来自盒装块的返回值测试代码。

```
 use Test::Trap;

  my @r = trap { some_code(@some_parameters) };
  if ( $trap->exit != 0 ){
    say 'Expecting &some_code to exit with not 0';
  } 
```

# jquery - 如何发布访问 REST api 的 jQuery 代码，但保护它免受未经授权的使用

> ID：13715247
> 
> 赞同：3
> 
> 时间：2012-12-05T02:10:07.157
> 
> 标签：jquery, security, rest

这个问题与这个问题类似：

[开发 API - 如何使其安全？](https://stackoverflow.com/questions/6025613/developing-api-how-to-make-it-secured)

我想要的是针对我的服务器上的 REST api 开发一个基于 jQuery 的查询，以检索一些数据以显示在网页上。

我希望网页和 jQuery 的授权用户能够访问这些数据，但不希望其他人能够复制该 jQuery 并将其放在他们的网站上以任何方式访问这些数据。需要明确的是，这一切都发生在浏览器的客户端 - 不涉及任何服务器端代码......

如果可能的话，实现这一目标的正确策略是什么？

我不希望查看网页的最终用户必须知道他们浏览器中发生的任何事情......

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T02:51:03.193

如果您不要求最终用户对您的站点进行任何类型的身份验证，因此您不能将其用作身份验证方法，并且您希望您的网页能够在没有任何其他干预的情况下使用 REST API，那么不是保护 REST API 的万无一失的方法。如果您想在未经身份验证的浏览器中获取数据，那么任何人都可以检索该数据。

还要记住，他们总是可以只运行您的网页并从您的网页中解析数据，因此，如果使用此网页不需要身份验证，则数据已经可供公众使用。如果不要求身份验证，您就无法真正保护它。

您可以尝试一些方法来让人们更难使用您的 REST API，但没有一种方法是万无一失的。这些只是障碍，而不是安全。

1.  您可以将过期令牌放入您的网页，将其包含在 Web 请求中，然后在 REST API 中验证它是未过期的令牌。这可以防止某人直接从另一个浏览器页面使用您的 REST API（他们没有合法令牌），但不会阻止服务器首先获取主机页面、检索令牌然后使用它来访问 API .

2.  您可以尝试检查引荐来源网址并仅满足来自您的域的网络请求。这也不是万无一失的，因为引用者可以被欺骗，但它是一个障碍。

3.  您可以使数据响应模糊不清，这样就不会立即明白如何解释返回的数据（加扰、加密等）。同样，这只是一个障碍，不会阻止坚定的黑客对您自己的代码如何解释响应进行逆向工程，但这又是更多的工作阻碍了您的 REST API 的临时用户。

许多 REST API 所做的是需要一个`accessKey`与每个 API 调用一起使用。您的网页将内置一个 accessKey。任何希望使用您的 API（在您的许可下）的外部开发人员都申请一个 accessKey，然后您将其授予他们（如果您希望他们能够使用您的 API）。然后，您的服务器只允许来自批准的 accessKeys 的访问请求。如果您发现某个 accessKey 被恶意使用，您可以在您的服务器上关闭该 accessKey 的使用。如果您自己网页中的 accesskey 被他人违背您的意愿使用，那么您可以更改您在自己网页中放置的 accessKey 并撤销之前 accessKey 的权限。显然，一些流氓开发人员可以不断地从您自己的网页中获取 accessKey，但他们必须定期这样做才能定期使用您的 API。再次，它'

仅供参考，这是另一个类似的讨论：[如何限制 JSON 访问？](https://stackoverflow.com/questions/856045/how-to-restrict-json-access)

# javascript - 更改动态 iFrame 上的显示属性

> ID：13715249
> 
> 赞同：0
> 
> 时间：2012-12-05T02:10:16.963
> 
> 标签：javascript, jquery, iframe

我在许多页面上动态创建 iFrame。iFrame 包含一个对话框，用户可以在其中输入一些信息。这是在单独的网络服务器上，因为多个网站需要使用相同的对话框。当用户完成输入数据时，它通过将 div 的显示更改为无来隐藏对话框。唯一的问题是 iFrame 还在，它是透明的，但是 iFrame 下的任何内容都无法点击。无论如何，当 iFrame 内的对话框执行指定的操作时，它会将 iFrame 更改为在 iFrame 所在的页面上显示为无？

```
var PageOutput = "<iframe id=\"FiFrame\" src=\"myPage-1.html\" style=\"display: none; border: none; overflow: hidden; height: 500px; width: 300px; position:absolute; left: 0; top: 0;\"></iframe>";
var Icon = "<a href=\"#\" id=\"FLink\"><img src=\"images/feedback_button.png\" alt=\"\" style=\"position: fixed; right: 40%; top: 20%;\"/></a>";
$(document).ready(function() {
$(PageOutput).appendTo( document.body );
$(Icon).appendTo( document.body );
$('#FLink').click(function() {
    $('#FiFrame').fadeIn(1000);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:13:47.960

您可以做一些跨站点绑定来调用原始页面。

*   第 1 页。首页（网站 - example1.com）加载...

*   第 2 页。 iframe（网站 - example2.com）。在完成加载...

*   第 3 页。带有 javscript 的 iframe（站点 - example1.com）。

第 3 页需要包含一个脚本以在加载时调用顶部窗口（window.top.hideIframe().. 或其他内容）

此外，第 2 页需要知道原始调用站点，以便在调用第 3 页时能够调用正确的站点。

对不起，如果这没有意义。

# ios - UISplitViewController 呈现WithGesture 不起作用

> ID：13715250
> 
> 赞同：2
> 
> 时间：2012-12-05T02:10:17.247
> 
> 标签：ios, ipad, uisplitviewcontroller

我似乎无法让 PresentWithGesture 工作。我需要能够根据显示的详细视图控制器打开和关闭它。

```
- (IBAction)disableGestures:(id)sender
{
    AppDelegate *appDelegate = [UIApplication sharedApplication].delegate;
    appDelegate.splitViewController.presentsWithGesture = NO;

    NSLog(@"Disable Gestures!");
} 
```

我整理了一个简单的项目（使用默认的 UISplitViewController 模板）： [http ://www.filedropper.com/splitviewtest](http://www.filedropper.com/splitviewtest)

这不是 PresentWithGesture 的预期用途吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-10T19:20:41.520

设置`presentsWithGesture`为 NO（或 false）后，您还应该在主视图控制器和详细视图控制器中禁用`interactivePopGestureRecognizer`from`UINavigationController`实例：

```
override func viewWillAppear() {
    super.viewWillAppear()

    self.navigationController?.interactivePopGestureRecognizer?.enabled = false
} 
```

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:19:47.907

看起来您只能`presentsWithGesture`在 AppDelegate 中进行更改。

我的解决方案是禁用它并添加一个我可以控制的 UISWipeGestureRecognizer。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T09:24:59.480

SplitView 类型应用程序的代码

如果你想在横向模式下禁用手势，那么下面的代码对你来说是完整的

步骤 1 在 detailView.h 中导入 #AppDelegate.h

step-2 在 detailView.h 中实现这个方法

```
- (BOOL)splitViewController:(UISplitViewController *)svc
   shouldHideViewController:(UIViewController *)vc
          inOrientation:(UIInterfaceOrientation)orientation
{
    AppDelegate *appDelegate = [UIApplication sharedApplication].delegate;
    appDelegate.splitViewController.presentsWithGesture = NO;

    return YES;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-28T18:35:55.673

通过将此代码添加到您的详细视图控制器（应该是 UISplitViewControllerDelegate），将拆分视图控制器属性 PresentWithGesture 设置为 No

```
- (BOOL)splitViewController: (UISplitViewController *) svc
   shouldHideViewController: (UIViewController *) vc
              inOrientation: (UIInterfaceOrientation) orientation
{
   svc.presentsWithGesture = NO;

   return YES;
} 
```

# objective-c - 核心数据中布尔类型属性的问题与 Xcode 中的谓词

> ID：13715253
> 
> 赞同：0
> 
> 时间：2012-12-05T02:10:48.423
> 
> 标签：objective-c, core-data, predicate, nsnumber

好的，所以我已经尝试了苹果 SDK 开发者页面上的示例，但没有成功。我尝试了之前关于stackoverflow的问题的示例，例如：

```
NSEntityDescription  entitydesc = [NSEntityDescription entityForName:@"Model" inManagedObjectContext:context];
NSFetchRequest request = [[NSFetchRequest alloc]init];
[request setEntity:entitydesc]; 
```

//尝试了这种风格的谓词

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"accessible == %@", [NSNumber numberWithBool:YES]]; 
```

//和这个

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"accessible == YES"];
[request setPredicate: predicate];

NSError *error;
NSArray *matchingData = [context executeFetchRequest: request error: &error]; 
```

两者都不起作用。在调试器中，matchingData 应该有很多对象时显示 0 个对象。

我所有其他的 fetchrequests 都工作得很好。这是唯一给我带来问题的。

该属性在 .xcdatamodel 中列为布尔类型

该属性在实体的头文件下如下所示：

```
@property (nonatomic, retain) NSNumber * accessible; 
```

数据输入核心数据数据库如下：

```
NSNumber *accessibleFieldValue  = [NSNumber numberWithBool:YES];
[newModel setValue: accessibleFieldValue forKey:@"accessible"]; 
```

我已经检查过了，sqlite 数据库中没有输入 nil 值。

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:43:43.467

它适用于新的文字：

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"done = %@",@NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:15:49.597

我最终在 sqlite 数据库浏览器中访问数据库并将字段值的类型更改为 Numeric。出于某种原因，核心数据作为不兼容的数据类型输入数据......不知道为什么，但我觉得这可能是一个 Xcode 错误。正如我所说，在我更改字段类型后它现在可以工作了。我认为我不会很快在核心数据中使用布尔值......至少在我理解为什么这是一个问题之前不会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T02:17:19.667

```
NSNumber *accessibleFieldValue  = [NSNumber numberWithBool:YES];
[newModel setValue:accessibleValue forKey:@"accessible"]; 
```

`accessibleFieldValue`还是`accessibleValue`？如果您确定这段代码是正确的，那就是您做错了。

顺便说一句，您可以像这样设置值：

```
newModel.accessible = [NSNumber numberWithBool:YES]; 
```

# ruby - Ruby - 从对象内调用设置器

> ID：13715254
> 
> 赞同：8
> 
> 时间：2012-12-05T02:10:50.083
> 
> 标签：ruby

我一直在阅读 Pragmatic Programmers 'Programming Ruby' 这本书，想知道是否可以在类中调用 setter 方法，而不仅仅是直接分配给实例变量。

```
class BookInStock

  attr_reader :isbn, :price

  def initialize (isbn, price)
    @isbn = isbn
    @price = Float(price)
  end

  def price_in_cents
    Integer(price*100 + 0.5)
  end

  def price_in_cents=(cents)
    @price = cents/100.0
  end

  def price=(dollars)
    price = dollars if dollars > 0
  end

end 
```

在这种情况下，我使用 setter 来确保价格不能为负数。我想知道的是是否可以从 price_in_cents 设置器中调用价格设置器，这样我就不必编写额外的代码来确保价格为正。

提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-05T02:13:56.663

使用`self.setter`，即：

```
def price_in_cents=(cents)
    self.price = cents/100.0
end 
```

# bash - 从 git 命令捕获输出？

> ID：13715261
> 
> 赞同：10
> 
> 时间：2012-12-05T02:11:36.760
> 
> 标签：bash, capture, output

我正在编写一个脚本来自动为我设置新项目。

这包括拉下一个 github 存储库。

我想要做的是从我的脚本中得到一些输出，然后调用`git clone $repo`

我想在它运行时显示该命令的输出，但是当它运行时，如果它成功运行，则替换它的输出（注意只是 git 命令输出，我仍然希望之前的输出在那里）`repository successfully cloned`和如果失败，只需将输出留在那里，然后打印`repository cloning failed`。

我怎样才能做到这一点？

以下是我当前（相当简单）的脚本。

```
#! /bin/bash

# -p project name

templateurl="git@bitbucket.org:xxx/xxx-site-template.git"

while getopts ":p:" opt; do #eventually I'll add more options here

case $opt in
  p)
    project=$OPTARG
    ;;
  \?)
    echo "Invalid option: -$OPTARG" >&2
    exit 1
    ;;
  :)
    echo "Option -$OPTARG requires an argument." >&2
    exit 1
    ;;
esac
done

if [ -z "$project" ]; then
    echo "Project name required"
    exit 1
fi

clear
echo "|==========================|"
echo "| New xxx Project Creator  |"
echo "|==========================|"
echo "Project: $project"

if [ -d "$project" ]; then
    echo "Directory $project already exists!"
    exit 1
fi

mkdir $project
if [ ! -d "$project" ]; then
    echo "Failed to create project directory!"
    exit 1
fi

echo "Cloning xxx Template repository"
git clone $templateurl $project 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-05T02:34:05.543

`git clone`确实提供了一个可以用 $ 读取的退出代码？如下：

```
git clone user@server:repo
echo $? 
```

如果一切正常，这将打印 0。例如，如果该文件夹不是 git 存储库，您将获得退出代码 128。

您可以检查克隆是否按如下方式工作：

```
git clone user@server:repo localrepo --quiet
success=$?
if [[ $success -eq 0 ]];
then
    echo "Repository successfully cloned."
else
    echo "Something went wrong!"
fi 
```

`--quiet`只要没有错误，它将抑制来自 git 的任何输出。因此，如果您只是删除 else-branch，您将获得积极的输出或 git 产生的错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T02:36:22.670

```
git clone user@server:repo localrepo > git.log 2>&1
if [[ $? eq 0 ]];
then
   echo Repository successfully cloned.
else
   cat git.log
   echo Repository cloning failed.
fi

rm git.log 
```

**解释：**

`git clone user@server:repo localrepo > git.log 2>&1` 将 stdout 和 stderr 流重定向到 git.log。 `> git.log`将标准输出重定向到 git.log `2>&1`将标准错误重定向到与标准输出相同的位置（因此，git.log）。

`$? eq 0` 如果克隆成功，检查 git 的 retcode 应该是 0。

`cat git.log`输出 git.log 文件的内容。

# map - 使用纹理贴图的粒子系统的深度贴图

> ID：13715266
> 
> 赞同：1
> 
> 时间：2012-12-05T02:12:31.190
> 
> 标签：map, system, three.js, depth, particles

我正在尝试为粒子系统生成深度图，但如果我使用 MeshDepthMaterial 渲染粒子系统，则每个粒子仅被渲染为每个顶点的单个点 - 不覆盖纹理映射粒子显示的整个区域.

我需要使用 MeshDepthMaterial 来生成深度图，还是有其他选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T08:53:09.883

现在没有办法让 MeshDepthMaterial 尊重 ParticleSystem 的大小或纹理。但是，实现这样的自定义 ShaderMaterial 并不难。首先，您需要一个顶点着色器和片段着色器。

```
<script type="x-shader/x-vertex" id="vertexShader">
  uniform float size;
  void main() {
    gl_PointSize = size;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position , 1.0 ); 
  }
</script>

<script type = "x-shader/x-fragment" id="fragmentShader">
  uniform sampler2D map;
  uniform float near;
  uniform float far;

  void main() {
    float depth = gl_FragCoord.z / gl_FragCoord.w;
    float depthColor = 1.0 - smoothstep( near, far, depth );

    vec4 texColor = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );
    gl_FragColor = vec4( vec3(depthColor), texColor.a);
  }
</script> 
```

顶点着色器是完全标准的，片段着色器采用纹理 ( `sampler2D map`)，但不是将其用于颜色值，它只使用 alpha 级别`texColor.a`。对于 rgb，使用基于深度的灰度值，[就像 MeshDepthMaterial 一样](https://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLShaders.js#L1915-L1917)。现在要使用这个着色器，您只需要获取 html 并创建一个 THREE.ShaderMaterial ，如下所示：

```
var material = new THREE.ShaderMaterial({
    uniforms : {
      size : { type: 'f', value : 20.0 },
      near : { type: 'f', value : camera.near },
      far  : { type: 'f', value : camera.far },
      map  : { type: "t", value : THREE.ImageUtils.loadTexture( url ) }
    },
    attributes : {},
    vertexShader: vertShader,
    fragmentShader: fragShader,
    transparent: true
  }); 
```

在这里，您为着色器提供了它需要的所有信息：相机的近/远范围、粒子的大小和它需要映射的纹理。

[你可以在这里](http://jsfiddle.net/Fbcrs/3/)看到一个jsFiddle 演示。

# objective-c - 应用程序进入后台继续下载

> ID：13715274
> 
> 赞同：2
> 
> 时间：2012-12-05T02:14:07.047
> 
> 标签：objective-c, ios

我尝试 ASIHttpRequest 下载文件，但是当应用程序进入后台时，它会在几秒钟后停止下载，有没有办法在后台完全下载文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T02:20:50.207

您必须设置下载请求才能在后台继续。

```
[self.downloadRequest setShouldContinueWhenAppEntersBackground:YES]; 
```

self.downloadRequest 是 ASIHTTPRequest，所以只需将其替换为您的，在初始化后添加此行，然后它将在后台继续：]

# c++ - 如何通过从文件中读取将不同数据类型的数据推送到向量中？

> ID：13715282
> 
> 赞同：1
> 
> 时间：2012-12-05T02:15:39.127
> 
> 标签：c++, c, file, vector, scanf

我想使用以下代码将以下数据推送到向量中。但我的代码仅适用于整数。如何为以下数据执行此操作？谢谢你。

我的数据：

```
 M,0.455,0.365,0.095,0.514,0.2245,0.101,0.15,15
    M,0.35,0.265,0.09,0.2255,0.0995,0.0485,0.07,7
    F,0.53,0.42,0.135,0.677,0.2565,0.1415,0.21,9
    M,0.44,0.365,0.125,0.516,0.2155,0.114,0.155,10
    I,0.33,0.255,0.08,0.205,0.0895,0.0395,0.055,7
    I,0.425,0.3,0.095,0.3515,0.141,0.0775,0.12,8
    F,0.53,0.415,0.15,0.7775,0.237,0.1415,0.33,20
    F,0.545,0.425,0.125,0.768,0.294,0.1495,0.26,16
    M,0.475,0.37,0.125,0.5095,0.2165,0.1125,0.165,9
    F,0.55,0.44,0.15,0.8945,0.3145,0.151,0.32,19 
```

我的代码：

```
 fp = fopen(argv[1], "r"); //Opening the input file in read mode.
      if(!fp)
      {
          printf("open data source file failed!\n");
          goto MAINEXIT;
      }

      int ivalue;
      //extract data from files
      while(fscanf(fp,"%d,",&ivalue)!=EOF)
      {
          printf("Counter-%d\n",counter++);
          srcdata.push_back(ivalue); //Pushing value by value into the vector with "," delimiter.
      }

      if(fp)
      fclose(fp); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T02:18:21.493

`%d`用于整数。将其更改为`%lf`for `double`，并相应更改其他部分，例如更改`ivalue`为`double`。

* * *

根据您在问题中的评论，我认为您可能需要类似的东西

```
而(fscanf(fp,"%s", str)!=EOF)
{
    char* pch = strtok(str, ",");
    pch = strtok(NULL, ","); // 先跳过
    而（pch！= NULL）
    {
        双 d = atof(pch);
        printf("计数器-%d\n",counter++);
        srcdata.push_back(d);
        pch = strtok (NULL, ",");
    }
}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:24:58.997

由于您使用的是 C++ STL 容器 ( `vector`)，因此您确实应该使用 C++ I/O ( `iostream`) 而不是 CI/O ( `stdio`)。它更安全、更灵活，并且最终可以为您节省一些胃灼热。

这是一个 quick-n-dirty 示例，展示了如何将该数据读入向量：

```
#include <iostream>
#include <iomanip>
#include <vector>
#include <iterator>
#include <sstream>
#include <string>

/**
 * Create a struct type to represent each record,
 * with one char member (which I'm calling "gender"
 * based on the 'M' and 'F', but that's just a guess),
 * 7 doubles (which I've gathered into a fixed-size
 * array), and one integer.
 *
 * I've also overloaded the stream << and >> operators
 * to read and write the struct as a single entity.
 */
struct record {
  char gender;
  double dvar[7];
  int ivar;

  record() { }
  virtual ~record() { }

  std::ostream& operator<<(std::ostream& s)
  {
    s << gender << " ";
    for (int i = 0; i < 7; i++)
      s << std::fixed << std::setw(8) << std::setprecision(4) << dvar[i] << " ";
    s << std::setw(3) << ivar;
    return s;
  }

  std::istream& operator>>(std::istream& s)
  {
    char delim;
    s >> gender >> delim;
    for (int i = 0; i < 7; i++)
      s >> dvar[i] >> delim;
    s >> ivar;
    return s;
  }
};

/**
 * Overload the << and >> operators outside of the struct
 * definition; this is necessary for the istream and ostream
 * iterators to function properly.  Each operator simply
 * calls the overloaded operator in the struct definition
 */
std::ostream& operator<<(std::ostream& s, const record& r)
{
  const_cast<record&>(r).operator<<(s);
  return s;
}

std::istream& operator>>(std::istream& s, record& r)
{
  r.operator>>(s);
  return s;
}

/**
 * For the purpose of this example I'm reading from a string
 * stream local to main; however, you can swap out the string
 * stream with a C++ file stream (ifstream) and use it in the
 * copy method *exactly* as you use the string stream:
 *
 *    std::ifstream infile(filename);
 *    ...
 *    std::copy(std::istream_iterator<record>(infile),
 *              std::istream_iterator<record>(),
 *              std::back_inserter(myRec));
 */
int main(void)
{
  std::vector<record> myRec;

  /**
   * We're using a local string and string stream for the purpose of
   * this example, but the handling of a string stream and a file
   * stream would be exactly the same.
   */
  std::string data = "M,0.455,0.365,0.095,0.514,0.2245,0.101,0.15,15"
                   "M,0.35,0.265,0.09,0.2255,0.0995,0.0485,0.07,7"
                   "F,0.53,0.42,0.135,0.677,0.2565,0.1415,0.21,9"
                   "M,0.44,0.365,0.125,0.516,0.2155,0.114,0.155,10"
                   "I,0.33,0.255,0.08,0.205,0.0895,0.0395,0.055,7"
                   "I,0.425,0.3,0.095,0.3515,0.141,0.0775,0.12,8"
                   "F,0.53,0.415,0.15,0.7775,0.237,0.1415,0.33,20"
                   "F,0.545,0.425,0.125,0.768,0.294,0.1495,0.26,16"
                   "M,0.475,0.37,0.125,0.5095,0.2165,0.1125,0.165,9"
                   "F,0.55,0.44,0.15,0.8945,0.3145,0.151,0.32,19";

  std::stringstream dataStream;
  /**
   * Write the contents of the string to the string stream
   */
  dataStream << data;
  /**
   * Read the contents of the string stream into the vector
   */
  std::copy(std::istream_iterator<record>(dataStream),
            std::istream_iterator<record>(),
            std::back_inserter(myRec));

  std::cout << "Read " << myRec.size() << " records" << std::endl;

  /**
   * Write the contents of the vector to standard output.
   */
  std::copy(myRec.begin(), 
            myRec.end(), 
            std::ostream_iterator<record>(std::cout, "\n"));

  return 0;
} 
```

这非常简单；没有任何类型的错误处理或处理格式错误的输入的方法。但是，我认为它很好地说明了 C++ I/O 例程的强大功能。

但是，如果您卡在 CI/O 上，您可以执行以下操作：

```
struct record {
  char gender;
  double dvar[7];
  int ivar;
};

int getRecord(FILE *stream, struct record *r)
{
  char line[80]; // assuming each line is less than 80 characters long

  if (fgets(line, sizeof line, stream))
  {
    int count = sscanf(line, "%c,%f,%f,%f,%f,%f,%f,%f,%d",
                  &r->gender,
                  &r->dvar[0],
                  &r->dvar[1],
                  &r->dvar[2],
                  &r->dvar[3],
                  &r->dvar[4],
                  &r->dvar[5],
                  &r->dvar[6],
                  &r->ivar);
    if (count < 8)
    {
      fprintf(stderr, "Input line \"%s\" is malformed\n", line);
      return 0;
    }
  }
  else
  {
    if (feof(stream))
    {
      fprintf(stderr, "Reached end of file\n");
    }
    else
    {
      perror("Error on read");
    }
    return 0;
  }
  return 1;
}

int main(void)
{
   std::vector<record> myRec;
   FILE *input = fopen("myfile.dat", "r");
   record r;

   while(getRecord(input, &r))
     myRec.push_back(r);
   ...
} 
```

我*强烈*建议为此使用 C++ I/O 例程；将 CI/O 与 C++ 混合使用会导致胃灼热。

# ruby-on-rails-3 - Rails3 无法正确呈现页面

> ID：13715283
> 
> 赞同：1
> 
> 时间：2012-12-05T02:15:40.483
> 
> 标签：ruby-on-rails-3

我正在编写一个在子 URL 中运行的简单 Rails3 应用程序，除了一个问题外，它运行良好。如果我没有在任何控制器的“index”方法的 URL 末尾添加“.html”扩展名，则请求将返回一个空白页面。我请求哪个控制器并不重要，“索引”方法总是返回完全空的，包括如果我卷曲 URL。我在每个控制器中都有一个“index.html.erb”文件，带有简单但完整的 HTML，如果我在 URL 中包含“.html”扩展名，一切正常。以下是一些示例 URL 及其结果：

```
http://my.application.url/appname/pages -- returns a blank page.
http://my.application.url/appname/pages.html -- returns the correct HTML page
http://my.application.url/appname/pages/new -- returns the correct HTML form
http://my.application.url/appname/pages/1 -- returns the correct HTML page
http://my.application.url/appname/pages/1/edit -- returns the correct HTML form 
```

我的路线文件看起来与此类似：

```
My::Application.routes.draw do
  scope "/appname" do
    resources :posts
    resources :pages
    root :to => 'home#index'
  end
end 
```

我的控制器的适用部分与此类似：

```
class PagesController < ApplicationController
  def index
    @pages = Page.all
    respond_to do |format|
      format.html
    end
   end
...
end 
```

正如我所说，索引方法是唯一有这个问题的方法。我已经尝试了所有我能想到的东西，包括添加`My::Application.default_url_options = {:format => "html"}`application.rb （除非我需要从控制器执行 redirect_to ，否则我很茫然。该应用程序使用 Thin 作为 Apache 1.3 后面的应用程序服务器（很遗憾，我无法更改，这似乎不是问题，因为直接访问 Thin 服务器会导致同样的问题）。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:58:00.320

因此，答案似乎是，如果 URL 未指定 .html 扩展名，则应用程序将提供与控制器同名的资产（来自资产管道），至少在开发环境中运行时是这样。一旦我删除了从资产文件夹创建控制器时自动生成的 [controllername].css.scss 和 [controllername].js.coffee 文件（这两个文件都未使用），应用程序就可以正常工作。只是为了好玩，我尝试让它们进入并运行`rake assets:precompile`，但这种行为一直存在，直到文件被实际删除。这似乎仍然违反直觉，我正在考虑将此作为错误提交。

# javascript - 将联系表单添加到 jQuery 模式 (fallr)

> ID：13715284
> 
> 赞同：1
> 
> 时间：2012-12-05T02:15:52.810
> 
> 标签：javascript, jquery, forms, contact

我对 javascript 和 jQuery 还很陌生，但我正在慢慢掌握它。不幸的是，我真的需要让我的网站启动并运行，并且正在努力建立我的联系表格。

我下载了名为 Fallr 的 jQuery 插件（[http://codecanyon.net/item/fallr-simple-elegant-modal-box-jquery-plugin/372581](http://codecanyon.net/item/fallr-simple-elegant-modal-box-jquery-plugin/372581)），它创建了非常适合我的联系表格的弹出“模态”框。

我真的很难弄清楚表单在其中的工作方式。提供了登录表单的代码，我一直在尝试将其修改为联系表单，但我感到非常困惑。js代码：

```
 var login = function(){
                var user = $(this).children('form').children('input[type="text"]').val();
                var pass = $(this).children('form').children('input[type="text"]').val();
                var pass = $(this).children('form').children('input[type="text"]').val();

                if(user.length < 1 || pass.length < 1){
                    alert('Invalid!\nPlease fill all required forms');
                } else {
                    alert('username: '+user+'\npassword: '+pass);
                    $.fallr('hide');
                }
            }

            $.fallr('show', {
                icon        : 'mail',
                width       : '600px',
                content     : '<h4>contact me!</h4>'
                            + '<form>'
                            +     '<input placeholder="email" type="text"/'+'>'
                            +     '<input placeholder="subject" type="text"/'+'>'
                            +     '<input placeholder="message" type="text"/'+'>'
                            + '</form>',
                position : 'center',
                buttons : {
                    button1 : {text: 'Send :)', onclick: login},
                    button4 : {text: 'Cancel'}
                },
            }); 
```

我设置了一个 PHP 联系人文件。我只想让第三个文本字段更大，并在单击发送按钮时将其发送到联系人文件。我确信我可以以某种方式解决警报和验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T02:36:45.930

1.  在您的登录功能`this`中将是 onclick 事件或按钮（谁知道呢，它是 javascript！）
2.  将 ID 添加到您的输入，并将操作、方法和 ID 添加到您的表单
3.  提交

    ```
    var login = function(){
        # These are only used for client-side validation
        var user = $('#email').val();
        var subject = $('#subject').val();
        var message = $('#message').val();

        # This is where the validation occurs
        if(user.length < 1 || message.length < 1){
            alert('Invalid!\nPlease fill all required forms');
        # If the form passes validation, submit it.
        } else {
            alert('username: '+user+'\nsubject: '+subject);
            # This submits the form 
            # using the action and method attributes of the form
            $('#contactForm').submit();
            $.fallr('hide');
        }

    $.fallr('show', {
        icon        : 'mail',
        width       : '600px',
        content     : '<h4>contact me!</h4>'
                    # submit.php is the relative url of your script
                    + '<form id="contactForm" action="submit.php" method="post">'
                    +     '<input id="email" placeholder="email" type="text"/'+'>'
                    +     '<input id="subject" placeholder="subject" type="text"/'+'>'
                    +     '<input id="message" placeholder="message" type="text"/'+'>'
                    + '</form>',
        position : 'center',
        buttons : {
            button1 : {text: 'Send :)', onclick: login},
            button4 : {text: 'Cancel'}
        },
    }); 
    ```

# c++ - 从指针数组的元素中传递地址以设置另一个指针地址

> ID：13715285
> 
> 赞同：0
> 
> 时间：2012-12-05T02:16:00.943
> 
> 标签：c++, pointers, reference

我尝试过搜索回复，但不幸的是，示例似乎太复杂了，我无法理解。最根本的是，我想知道如何传递和更改指针数组的地址。

例子：

```
 class Foo {
      M** arryM;
      ...
      arryM = new M*[10];
      ...
      void Foo::replace(int ind, M &newm) {
        // Q1: which one correct to change the address of an element to a new object's address?
        arryM[ind] = newm; // this correct to pass and reset a new address for pointer?
        arryM[ind] = &newm; // or is this correct, or does this just set the object pointed by array element instead of the array element's address?
        *arryM[ind] = newm; // or do I need to dereference the pointer rep by array element first?
        &arryM[ind] = &newm; // or is this correct??
      }
      ...
      // Q2: is it easier to return a pointer or address for this function?
      M & Foo::getM(int ind) {
        M *out;
        // Q3: which one of following correct to get correct address value to return?
        out = arryM[ind]; // get address to M obj pointed by pointer array elem
        out = *arryM[ind]; // is "arryM[ind]" == "*ptr"?? if so how to get to "ptr"?
        out = &arryM[ind]; // is this way to get to "ptr" so addresses passed?
        return out;
      }
   }
   void main() {
     M *op1;
     M *op2;
     M *sol;
     Foo mstorage; // and assume already got valid M objects pointed to by arryM[] elements
     ...
     // Q4: which one correct?
     op1 = mstorage.getM(x); // x being the correct and valid int index pos
     op1 = *mstorage.getM(x); // so address and not object pointed to is passed?
     *op1 = mstorage.getM(x); 

     op2 = mstorage.getM(y);
     ... // perform some operations using op1 and op2 M functions
     int size = op1->getDim() + op2->getDim();
     sol = new M(size, name); // no default constructor--M objects need a size parameter
     ...// perform/set values of sol based upon op1, op2 values
     // Q5: this is correct to pass the address for sol object created, right?
     if (<sol already exists>) mstorage.replace(indx, *sol);
     else mstorage.add(*sol);
   } 
```

所以我从代码示例中提取的 5 个主要问题如下，Q1、Q3、Q4 对我来说是最重要/最令人困惑的：

Q1（重要）：如果 array[i] 返回一个指针 *n，那么我们如何取消对“array[i]”的引用，使其看起来像“n”，这样我们就可以得到“n=p”，其中“*p”有一个外部创建的对象的地址。此外，其中 "*p" 通过带有 type& 参数的函数调用传递。

Q2：在给定的上下文中，在函数中返回指针还是地址更好？或者更改上下文以使用一种函数返回类型而不是另一种更容易？

Q3（重要）：如果我们要返回一个地址，正确的方法是让“array[i]”（基于与 Q1 相同的假设）成为“n”中包含的地址而不是“*”表示的对象n”？

Q4（重要）：如果函数返回地址&，那么本地创建的指针*p 是否能够通过“p = obj.funcretaddress()”接收地址？我看到了一些带有双打的示例代码，但这让我感到困惑：“双小时= funcreturningaddress（）”。

Q5：只是仔细检查一个函数参数是否接受“obj &x”并且我们在本地创建一个“obj *y”，在函数调用中我们将传递“function(*y)”，然后在函数范围内传递“obj *n = &x" 以便由 array[i] 表示的指针可以获取本地创建的 obj 的正确地址。

非常感谢，因为我已经编译和调整了几天，试图从网络上获取具有 int 和 double 数据类型的示例并将它们应用于创建的类对象时感到困惑。

我很抱歉，如果有任何不清楚的地方请告诉我！

编辑：非常感谢，只是想澄清第四季度：

```
 int a = 2;
    int *b;
    b = &a;
    *b = 3;
    int c = 4;
    b = func(c); // *b now points to c, and value is 5?
    *b = func(c); // *b value is updated to 5, and a therefore also now 5??
    ...
    int & func(int &d) {
      d++;
      return &d; // correct, or wrong as &&d is returned?
      return d; // and the & is applied to the var d?
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T02:44:45.223

Q1。以下两个是正确的。arrayM[ind] 将返回指针。所以认为你正在存储到指针中。请注意您要添加的对象的生命周期（即 newM）

```
arryM[ind] = &newm; // or is this correct, or does this just set the object pointed by array element instead of the array element's address?
*arryM[ind] = newm; 
```

Q2。以下是正确的。

```
out = arryM[ind]; 
```

此外，当它期望引用时，您不能返回指针。因此，您可以将函数修改为发送者指针或发送值而不是指针。

Q3。如果您返回地址如下

```
return array[ind] 
```

那么这将返回一个指针。（即 M* myArray）。您可以按如下方式访问元素

```
1\. myArray[index]
2\. *(myArray+1) 
```

Q4.如果您返回引用（即 M&），那么您必须将它们收集在引用或普通对象中，否则您也可以将值存储到指针中，如下所示。

```
Function: M& foo()
Call: M m = foo()
OR M& m = foo()
OR M* m;  *m = foo(); 
```

Q5。我无法在这里得到你的问题。我稍后会更新它。

如果您需要详细解释，请告诉我。

# javascript - 将按钮从 disabled='true' 更改为 'false'

> ID：13715287
> 
> 赞同：0
> 
> 时间：2012-12-05T02:16:20.880
> 
> 标签：javascript, jsp

我写了一个关于提交表单的代码。当我单击 时`button(Download)`，状态为禁用，我想让它启用，但如果我在提交之间添加一个警告框并使禁用为 false，它可以工作。如果我删除警报框，它就不起作用。是时间问题还是其他？我该如何解决？

如何将按钮从 更改`disabled='true'`为`'false'`？

这是我的代码：

```
<div id="fm" class="btnStyleFunc" onclick="disabled='true';submitform()">
                                    <a><span>Download</span></a>
                                            </div> 
```

* * *

```
function submitform(){
    var element1 = document.getElementById('form');

    if (element1 != null){
    } else {        
    }

    document.getElementById('form').submit();
    alert('test');   // <--------
    document.getElementById('fm').disabled = false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T02:18:58.107

尝试这个：

```
function disabledFunc(id)
{
    var divObj = document.getElementById(id);
    divObj.disabled = false;
} 
```

并使用按钮 id 调用函数：

```
disabledFunc('fm'); 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T02:20:25.820

用这个：

```
<div id="fm" class="btnStyleFunc" onclick="this.disabled=true;submitform()">
                                    <a><span>Download</span></a>
                             </div> 
```

当然，该元素是一个 DIV 而不是一个按钮，所以我不知道`disabled`它的效果如何......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T02:50:54.787

正如 Farish 和 MrXenotype 所指出的，“禁用”属性对`div`元素没有意义。它可以动态添加，但不会影响行为。但我理解为什么您可能想要使用 a`div`而不是按钮，特别是如果您花时间自定义样式表以使其看起来像您想要的那样。

我认为你可以通过做一个小的改变来获得你想要的行为：

```
<div id="fm" class="btnStyleFunc" onclick="this.onclick=null;submitform()">
   <a><span>Download</span></a>
</div> 
```

`div`基本上，当您的 onclick 处理程序执行时，您会将其与元素断开连接。现在，当有人第二次单击您的“按钮”时，它什么也不做。在此期间，`onclick`您可能还希望将您的类更改为 btnStyleFunc 以外的其他内容 - 可能是一个名为`btnStyleFuncDisabled`. 然后您可以修改您的样式表，使任何`div`具有该类的元素都显示为灰色。

```
<div id="fm" class="btnStyleFunc" 
     onclick="this.className='btnStyleFuncDisabled'; this.onclick = null; dosubmit(this)">
   <a><span>Download</span></a>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T03:23:21.210

注意：

```
<div id="fm" class="btnStyleFunc" onclick="disabled='true';submitform()"> 
```

将创建一个`disabled`字符串值为“true”的全局变量，并且

```
 document.getElementById('fm').disabled = false; 
```

将`disabled`id 为“fm”的元素的属性与布尔值进行比较`false`。

# salesforce - 错误：SObject OpportunityLineItem 的无效字段折扣

> ID：13715289
> 
> 赞同：2
> 
> 时间：2012-12-05T02:16:39.087
> 
> 标签：salesforce, visualforce

我正在编辑“报价”visualforce 页面模板，需要为折扣添加一列。此字段提供 OpportunityLineItem 上每个项目的百分比，与 Quantity 非常相似。我不断收到错误（在主题字段中）并且无法弄清楚原因。

```
 <apex:repeat value="{!relatedTo.OpportunityLineItems}" var="line">
  <tr>
    <td>{!line.PricebookEntry.Name}</td>
    <td>{!line.Description}</td>
    <td ALIGN="center"><img src='{!line.PricebookEntry.Product2.URL_Picture__c}'/></td>             
     <td>{!line.Quantity}</td>

     <td><apex:OutputField value="{!line.Discount}"/></td>

     <td><apex:OutputField value="{!line.TotalPrice}"/></td>
      </tr>
   </apex:repeat> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:27:13.423

检查机会产品 (OpportunityLineItem) 折扣字段的字段级别安全性。我检查了几个组织，默认情况下任何配置文件都看不到折扣。

URL 将是这样的：（您需要从 cs7 更改服务器实例）

[https://cs7.salesforce.com/p/setup/field/StandardFieldAttributes/e?id=Discount&type=OpportunityLineItem](https://cs7.salesforce.com/p/setup/field/StandardFieldAttributes/e?id=Discount&type=OpportunityLineItem)

或者，使用 -*您的姓名*> 设置 > 应用程序设置 > 自定义 > 机会 > 机会产品 > 字段 > 折扣 > 设置字段级安全性。

此外，如果您的 relatedTo 列表是通过 SOQL 查询在后备控制器中创建的，请确保它选择了 Discount 字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T22:34:10.200

我正在尝试编写一个 VF 电子邮件模板，并且在 OpportunityLineItem 字段折扣和小计方面遇到了完全相同的问题。我可以肯定地说这不是 FLS 问题，请在两个字段上仔细检查，所有配置文件都可以看到它们。

```
<apex:repeat var="opp" value="{!relatedTo.OpportunityLineItems}">
   <tr>
       <td>{!opp.Discount}</td>
       <td>{!opp.Subtotal}</td>
   </tr>
</apex:repeat> 
```

我还使用 SoqlX 和 Data Loader 仔细检查了我的数据模型，这两个字段都显示在 OpportunityLineItem 对象上。

我能够想出的唯一适用于折扣的解决方法是创建一个名为 Discount__c 的百分比公式字段并将其设置为等于标准折扣字段。

[折扣__c 字段](https://www.evernote.com/shard/s89/sh/497645aa-c891-4c83-a612-6a7ff105fd04/e0612003344e86030e59672dce10e785/res/ada31750-8137-4537-9bd3-405a58c60ed5/Discount__c.jpg?resizeSmall&width=832)

另一方面，小计不能被公式字段引用，所以我不得不重新创建该字段。这也可用于创建小计字段的汇总汇总，因为不能使用标准小计字段。

[小计__c 字段](https://www.evernote.com/shard/s89/sh/6facc2de-2b45-410b-a7e3-4e355872978b/b4dbead8914346e2a6df0cb73088fe9c/res/a1452a64-a4b0-4957-a00e-652a4b9cc315/Subtotal__c.jpg?resizeSmall&width=832)

创建新字段后，我可以在电子邮件中引用它们而没有任何问题。我不明白为什么这也不适用于 VF 页面。

希望这会有所帮助，希望我能提供一个更好的解决方案，只需重新创建字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:49:24.027

是自定义字段吗？试试折扣__c

# ios - GKTurnBasedMatch 忽略 playerAttributes

> ID：13715293
> 
> 赞同：2
> 
> 时间：2012-12-05T02:16:49.177
> 
> 标签：ios, game-center

当我创建以下 GKRequest 对象来创建回合制游戏时：

```
GKMatchRequest *gameRequest = [[GKMatchRequest alloc] init];
gameRequest.minPlayers = 2;
gameRequest.maxPlayers = 2;
gameRequest.playerAttributes = MY_ROLE_1; 
```

此请求不应与具有相同 playerAttributes 的另一个请求匹配，但它是。有谁知道基于回合的游戏是否会忽略 playerAttributes ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:21:26.340

根据此页面：http: [//developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/MatchmakingwithGameCenter/MatchmakingwithGameCenter.html#//apple_ref/doc/uid/TP40008304-CH12-SW6](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/MatchmakingwithGameCenter/MatchmakingwithGameCenter.html#//apple_ref/doc/uid/TP40008304-CH12-SW6)

> 你的游戏定义了一整套角色；您的游戏定义的所有角色都必须在比赛创建时填补。这意味着在您定义的角色和比赛中允许的玩家数量之间有一个仔细的协调。因此，玩家属性需要额外的设计和测试工作。

可以在空座位的情况下创建基于回合的游戏，并在轮到他们时找到玩家。如果上述陈述为真，那么对于基于回合的游戏，playerAttributes 将被忽略，因为在创建比赛时它们无法全部填充。

# javascript - javascript如何更改链接onmouseover表格单元格的颜色？

> ID：13715301
> 
> 赞同：0
> 
> 时间：2012-12-05T02:17:21.493
> 
> 标签：javascript, html, hyperlink

我正在制作一个导航栏，并希望链接在鼠标悬停在表格单元格后更改颜色，而不是链接。有没有快速的方法？或者通过标签获取元素？(GetElementByTag("a"))

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T06:55:42.597

正如@Stuart 所说，将以下内容添加到您的 css 中，并确保您的 css 包含在您的 html 中。

```
td:hover a {
  color: blue
} 
```

# linux - shell脚本引号消失

> ID：13715302
> 
> 赞同：1
> 
> 时间：2012-12-05T02:17:44.957
> 
> 标签：linux, shell

我正在尝试编写一个 shell 脚本，并获取输入参数，例如：

`./test abc def ghi`

如果`echo $*`脚本里面有一个，它会列出参数，但是引号会消失，比如

`./test abc "def ghi"`--> abc def ghi

我不想用反斜杠 as 运行命令`./test abc \"def ghi\"`，尽管它可以解决这个问题。`echo $2`不会解决里面的报价，比如`./test abc "def ghi "jkl" mno"`

有没有其他方法可以解决它？谢谢：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T02:19:24.317

您可以通过将双引号包含在单引号中来做到这一点，如下所示：

```
./test abc '"def ghi"' 
```

**解释：**

用单引号括起来的所有内容都被 shell 解释为字符串文字。[这是有关强引用与弱引用](http://www.grymoire.com/Unix/Quote.html#uh-1)的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T02:19:31.773

您还可以使用单引号：

```
./test abc '"def ghi"' 
```

# ios5 - Twitter框架iOS - 登录成功后

> ID：13715303
> 
> 赞同：0
> 
> 时间：2012-12-05T02:17:47.663
> 
> 标签：ios5, twitter

如果我向用户显示一个带有“设置”按钮的弹出窗口，他们单击它并转到操作系统设置页面并输入他们的 Twitter 凭据，然后他们回到我的游戏并进入前台。

我怎么知道用户刚刚登录了他们的 Twitter 帐户，并且我需要一个 oauth 请求来获取他们的令牌？

一个极端情况是——用户在我的 Twitter 页面上并离开游戏以获取短信，然后进入我的游戏。我有一个调用的前台函数，但我不想假设他们没有登录 Twitter。

Twitter框架不应该为我们处理这个吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:54:49.433

如果您使用“Twitter Framework iOS”是指 iOS 5 的 Twitter 框架，您可以在用户最初尝试发送推文时将 BOOL 设置为 YES，如果成功则将其返回为 NO。`canSendTweet`这使您能够检查此布尔值，以及作曲家是否`viewDidAppear`确定您应该如何处理您的 oauth 请求。

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    if ([TWTweetComposeViewController canSendTweet] && myBOOL) {
        //send oauth request
        myBool = NO;
    }
} 
```

# twitter-bootstrap - 使用 twitter bootstrap 将切换部分滚动到视图中

> ID：13715304
> 
> 赞同：2
> 
> 时间：2012-12-05T02:18:02.523
> 
> 标签：twitter-bootstrap, scroll, toggle

我正在用 twitter bootstrap 建立一个网站。我在页面底部创建了一个了解更多按钮，当用户单击该按钮时，它会切换一个 div。我想让窗口“scrollintoview”在部分展开后显示 div。

learnmore 按钮可以正确切换 div，但窗口不会滚动以显示 div。

我曾尝试延迟 scrollintoview，因为如果我只是立即执行 onclick:scrollintoview，我可以看到窗口想要向下滚动，但内容尚不可见。

这是我正在使用的代码。

```
<div id="learnmorebtn">
<div class="learnmorebutton" data-toggle="collapse" data-target="#learnmore"  onclick="setTimeout('function () {"document.getElementById('learnmore').scrollIntoView()" }', 1500)"></button>
</div><!-- /#learnmorebtn -->

<div id="learnmore" class="collapse">my content</div><!-- /#learnmore --> 
```

我遇到的问题的一个活生生的例子（没有设置超时代码）是[http://www.chasedutton.com/fqbootstrap/](http://www.chasedutton.com/fqbootstrap/)。

我发现这个线程[jquery toggle and scroll to view](https://stackoverflow.com/questions/2197745/jquery-toggle-and-scroll-to-view)但是我不确定如何在切换后集成 scrollto 或 scrollintoview 。

感谢您的时间、精力和知识！

# windows-8 - Windows 8 商店分辨率要求

> ID：13715307
> 
> 赞同：0
> 
> 时间：2012-12-05T02:18:40.510
> 
> 标签：windows-8, microsoft-metro, windows-store

Windows 8 商店应用程序的分辨率要求是什么？应用程序必须是自动全屏还是我可以为应用程序容器设置一个大小，例如 600px * 600px？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T02:39:32.383

默认情况下，您的应用应该以任何分辨率运行。以下是 MS 的指南：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh780612.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh780612.aspx) [http://blogs.msdn.com/b/b8/archive/2012/03/21/scaling-to-different -screens.aspx](http://blogs.msdn.com/b/b8/archive/2012/03/21/scaling-to-different-screens.aspx)

# android - 如何更改夏洛克动作栏溢出菜单项的宽度？

> ID：13715317
> 
> 赞同：4
> 
> 时间：2012-12-05T02:19:47.943
> 
> 标签：android, menu, width, overflow, actionbarsherlock

溢出菜单项太宽，我需要它更窄。

这就是它现在的样子：

![在此处输入图像描述](../Images/c2e07ddd01ee911b4fda0a854aba7e6e.png)

# iis - IIS8 上的 CGI，程序挂起

> ID：13715318
> 
> 赞同：0
> 
> 时间：2012-12-05T02:20:02.017
> 
> 标签：iis, web, cgi

我已经阅读了几篇关于如何在我的 IIS8 服务器上启用 CGI 的文章。我已配置 ISAPI 和 CGI​​ 限制以允许未指定的 CGI 模块并将 CGI 设置为执行权限。当我尝试通过网站调用程序时，它只是挂在那里加载并且从不做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T23:05:54.910

可能您忘记在 CGI 可执行文件末尾添加几个 %s ：

perl.exe "%s" %s

# excel - 如果该列上单元格中的值低于使用宏的阈值，则删除列并在 Excel 中向左移动？

> ID：13715325
> 
> 赞同：0
> 
> 时间：2012-12-05T02:20:51.837
> 
> 标签：excel, vba

我有一个不相关的分类问题的数据集，我想这样做，我想减少属性总数。我已经将我的数据集转换为 CSV 格式，excel 处理得很好，但我需要做一些改变——而且我从来没有做过任何 VBA，所以语法对我来说似乎非常陌生。

基本上，我有 7071 列（属性）和 70 行（实例）。每列下方的单元格（例如 A 列的 A75）包含用于属性评估的特定统计方法。**我想要做**的是检查此单元格中的值（在此示例中为“A75”），如果它低于某个阈值，则删除整个列并将所有内容向左移动。所以，如果我有类似的东西：

`o A B C D ... XYZ`

`1 2 5 4 9 ... 2`

`2 3 9 0 1 ... 3`

`3 1 1 5 6 ... 0`

`...`

`75 0.23 0.5 0.6 0.44 ... 0.8`

我的计算确定最小阈值为 0.3，然后宏将摆脱 A 列并将其他列向左移动：

`o A B C ... XYZ`

`1 5 4 9 ... 2`

`2 9 0 1 ... 3`

`3 1 5 6 ... 0`

`...`

`75 0.5 0.6 0.44 ... 0.8`

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T07:21:34.517

这应该为你做。如果您删除行或列，则从末尾开始删除并移至开头（即从右到左或从下到上）。

```
Option Explicit

Sub RemoveColumns()
    Dim vEvalRange As Variant, ii As Integer

    'NOTE: This assumes the usedrange starts at cell A1!

    'Screen updating when deleting cells slows things down
    Application.ScreenUpdating = False

    'Set your evaluation row to an array.  It's faster to sort through variables than sheet ranges
    vEvalRange = ActiveSheet.Range(ActiveSheet.Cells(ActiveSheet.UsedRange.Rows.Count, 1), ActiveSheet.Cells(ActiveSheet.UsedRange.Rows.Count, ActiveSheet.UsedRange.Columns.Count)).Value

    'count from right to left otherwise your columns will shift and mess up your array
    For ii = UBound(vEvalRange, 2) To LBound(vEvalRange, 2) Step -1
        If vEvalRange(1, ii) < 0.3 Then
            ActiveSheet.Columns(ii).Delete
        End If
    Next ii

    Application.ScreenUpdating = True
End Sub 
```

# windows-phone-8 - Windows Phone 8 的消息/收件箱 API

> ID：13715327
> 
> 赞同：0
> 
> 时间：2012-12-05T02:21:12.967
> 
> 标签：windows-phone-8

Windows Phone 8 SDK 中是否有 API 可以让我计算手机上未读电子邮件或短信的数量？我不想阅读内容（还），我只想知道有多少。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:35:46.123

不可能对不起。

这是您可以阅读的有关用户的大多数个人信息的示例：http: [//msdn.microsoft.com/en-us/LIbrary/microsoft.phone.userdata](http://msdn.microsoft.com/en-us/LIbrary/microsoft.phone.userdata(v=vs.92) (v=vs.92 )

# asp.net-mvc - 如何在 asp.net mvc 应用程序中使用 selenium IDE 测试 jQueryUI 对话框

> ID：13715329
> 
> 赞同：0
> 
> 时间：2012-12-05T02:21:19.817
> 
> 标签：asp.net-mvc, jquery-ui, selenium

我正在尝试使用 Firefox 的 selenium IDE 插件记录功能测试。我正在测试一个 asp.net MVC 应用程序的登录功能。但它没有拿起用户名和密码。

* * *

```
[info] Executing: |open | / | |
[info] Executing: |click | id=loginLink | |
[info] Executing: |type | id=UserName | admin |
[error] Element id=UserName not found 
```

用户名和密码使用 from account 控制器显示，jsonlogon 部分显示在 jQueryUI 对话框中。

我怎样才能让它读取用户名和密码？

# html - 不接受 Angular js 属性的标签表单

> ID：13715331
> 
> 赞同：1
> 
> 时间：2012-12-05T02:21:36.557
> 
> 标签：html, ruby-on-rails, angularjs, ruby-on-rails-3

我有表单标签助手，例如

```
form_for(:session, url: sessions_path, name: "signin_form", "ng-controller": 
"signinctrl") do |f| %> 
```

每当我转到页面时，我都会从 rails 收到错误消息

```
unexpected tASSOC 
```

为什么 Rails 不接受该`ng-controller`属性？我的控制器在不同的文件中定义，我的 ng-app 在 html 标记中定义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:08:54.813

问题在这里：`"ng-controller": "signinctrl"`

Ruby 1.9 哈希语法仅支持符号（不带冒号），例如`ng-controller: "signinctrl"`(这将与`:ng-controller => "signinctrl"`.

要修复它，您只需要使用 1.8 样式的哈希语法。您可以在不更改其余属性的情况下将其混合并匹配到哈希中：

```
form_for(:session, url: sessions_path, name: "signin_form", "ng-controller" => "signinctrl") do |f| %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:54:14.980

你试过“data-ng-controller”吗？

# ajax - 一些 IE9 在 Ajax 请求上变成兼容性视图

> ID：13715335
> 
> 赞同：2
> 
> 时间：2012-12-05T02:22:03.987
> 
> 标签：ajax, internet-explorer-9, prototypejs

我有一个将 ajax 与prototype.js ( `Ajax.Updater`) 结合使用的Web 应用程序。

```
new Ajax.Updater('someID','/some/url',
    {
        asynchronous:true,
        evalScripts:true,
        parameters:Form.serialize(Event.element(event).form),
        requestHeaders:['X-Update', 'someID']
    }
); 
```

一些（不是全部）IE9 用户会遇到一个奇怪的现象。

*   `UserAgent`正常（非 ajax）HTTP 请求表示浏览器是 IE9，不在兼容性视图中。
*   `UserAgent`ajax HTTP requests 表示浏览器是 IE7（IE9 的 Compatibility View）。

我想强制浏览器不要在 ajax HTTP 请求中使用兼容性视图，但是 html 已经有一个`meta`标签 : `<meta http-equiv="X-UA-Compatible" content="IE=edge">`。

有谁知道原因或解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T05:11:54.757

这是一个可能的解决方案 - 但尚未完全研究 - 尝试设置

```
Header set X-UA-Compatible "IE=edge" 
```

在您的`httpd.conf`或`.htaccess`文件中 - 这会将 X-UA-Compatible 标头添加到来自 Apache 的所有响应中，以强制 IE 不使用兼容模式

# javascript - 摘录文本P标签打开问题

> ID：13715336
> 
> 赞同：0
> 
> 时间：2012-12-05T02:22:06.373
> 
> 标签：javascript, jquery

文字长度有限，点击后显示全部内容。但是如果有人可以检查代码，第一个 P 标签打开正常，但从第二个开始，它并没有完全打开。

```
$(document).ready(function(){
function excerpt(text, len) {
    return text.substring(0, len)+"&hellip;";
}

var $div = $('.container');
$div.each(function() {
  var $p=$(this).find("p:first");
   var theExcerpt = excerpt($p.text(), 230);
    $p.data('html', $p.html()).html( theExcerpt);
});

$('span').click(function() {
    var isHidden = $(this).text() == 'Show';
   var $p = $(this).parent().find("p:first");
    var theExcerpt = excerpt($p.text(), 230);
    $p.html( isHidden ? $p.data('html') : theExcerpt);
    $(this).remove();
});

});​ 
```

在线样品[在这里](http://jsfiddle.net/M6wzh/)。

如果我有`return text.substring(0, len)+"&hellip;" + <span>show</span>;` [http://jsfiddle.net/M6wzh/3/](http://jsfiddle.net/M6wzh/3/)

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:33:18.090

您可以通过更改 HTML 来解决此问题：`<span>Show</span>`s 需要位于“容器”div 中。[http://jsfiddle.net/M6wzh/1/](http://jsfiddle.net/M6wzh/1/)

（jquery 代码在与 相同的父元素中找到第一段`<span>Show</span>`并将其展开。由于没有`<span>Show</span>`s 在容器元素中，它只是在页面上找到第一段并展开它。）

# c - 使用 fork 系统调用

> ID：13715338
> 
> 赞同：1
> 
> 时间：2012-12-05T02:22:30.903
> 
> 标签：c, fork

这是我第一次使用 fork，我希望父进程计算总和，子进程为父进程中的总和提供输入，反之亦然，但我做不到，它们作为两个独立的过程！！我怎么能做到这一点，当我将输入作为 1 和 2 时，父母必须将总和返回为 3

```
int main()  {

    int num1 = 0, num2 = 0, sum = 0;
    pid_t pid;
    pid = fork();
    if(pid == -1)
        perror("fork");
    if(pid > 1)
    {
        wait(NULL);
        printf("sum:%d\n",sum = num1 + num2);
    }
    if(!pid)
    {
        printf("Enter two number\n");
        scanf("%d %d", &num1, &num2);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T02:31:00.590

一旦你分叉，每个进程都会获得自己的变量副本（至少从逻辑角度来看——请参阅写时复制以获取更多数据），因此您不能在分叉之后更改内容并期望其他进程看到这些变化。

您需要使用某种进程间通信：

[http://en.wikipedia.org/wiki/Inter-process_communication](http://en.wikipedia.org/wiki/Inter-process_communication)

您可能想查看此问题以获取更多详细信息：

[子进程之间的 UNIX 管道](https://stackoverflow.com/questions/5060350/unix-pipes-between-child-processes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:11:17.350

一旦你在程序中使用 fork 系统调用，它会创建另一个进程，你不能从一个进程返回到另一个进程（子进程到父进程），所以如果你想使用 fork 系统调用在两个进程之间进行通信，则意味着使用未命名管道（一个进程间通信的方法）

# java - 为什么要为 HttpHead 方法取回 cookie？

> ID：13715339
> 
> 赞同：0
> 
> 时间：2012-12-05T02:22:44.560
> 
> 标签：java, cookies, warnings, httpclient

我们正在使用 HttpHead 从客户的网站获取信息，但出于某种原因，我们也在响应中获取了 cookie。是预期的吗？有没有办法设置不返回cookie？

以下是我们的代码

```
 HttpClient httpclient = new DefaultHttpClient();
        // the time it takes to open TCP connection.
        httpclient.getParams().setParameter(CoreConnectionPNames.CONNECTION_TIMEOUT, this.timeout);

        // timeout when server does not send data.
        httpclient.getParams().setParameter(CoreConnectionPNames.SO_TIMEOUT, this.timeout);

        // the head method
        HttpHead httphead = new HttpHead(url);

        HttpResponse response = httpclient.execute(httphead); 
```

我们收到以下警告，表明也有响应返回的 cookie。

[WARN] ResponseProcessCookies - Cookie 被拒绝：“[版本：0][名称：DXFXFSG][值：AUR][域：...省略...][路径：/][到期：空]”。非法域属性“...省略...”。来源域：“……省略……”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:45:58.883

是的，这是预期的；`GET`除了没有正文之外，您应该得到与等效响应相同的响应。如果其中`GET`包含 cookie，您应该会看到它。

顺便说一句，我相信你看到的警告，从你提供的编辑消息中，服务器正试图为不同的域设置一个 cookie。

# c# - 获取通过 Assembly.load 加载其程序集的方法体的内存地址

> ID：13715340
> 
> 赞同：0
> 
> 时间：2012-12-05T02:23:05.620
> 
> 标签：c#, .net, system.reflection, mono.cecil

我已经使用 Assembly.load() 将程序集 B 加载到程序集 A 的 appdomain 中。

B 有一个名为“X”的方法，我需要检索它的内存地址/指针。

我知道 B 在 assembly.load() 之后作为单个连续内存数据映射到内存中。我可以使用 GetHInstance(module) 到达这个位置。通过使用 RVA 偏移量来到达 B 的代码段将不起作用，因为 B 是使用原始偏移量映射的。

如何从 A 中检索 X 的内存地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:38:41.907

这样做的最终目标是什么？你需要一个函数指针来传递给非托管代码吗？因为，如果是这样，那是行不通的——RVA 可能只指向 IL 代码，而不是进程无法运行的本机代码。

出于本演示的目的，我假设该方法与 Action 签名（无参数并返回 void 类型）匹配，是静态的，并且在 FullyQualified.TypeName 类上被称为 SomeMethod。给定本地范围内的程序集引用“asm”：

```
Type t = asm.GetType("FullyQualified.TypeName");
MethodInfo method = t.GetMethod("SomeMethod", BindingFlags.Public | BindingFlags.Static); 
```

此时，如果你真的想要IL中的方法体，你可以调用：

```
MethodBody body = method.GetMethodBody(); 
```

或者，如果您希望它在本机代码中，您可以传递给本机代码，那么您可以这样做：

```
Action action = (Action)method.CreateDelegate(typeof(Action));
IntPtr ptr = Marshal.GetFunctionPointerForDelegate(action); 
```

如果您正在查看实例方法，您还需要做其他事情（例如，您需要将实例作为第二个参数传递给 MethodInfo.CreateDelegate，以及更改绑定标志）。给定适当的权限，您还可以通过此机制访问私有方法。

# sql - 如何累积所有值

> ID：13715342
> 
> 赞同：0
> 
> 时间：2012-12-05T02:23:39.663
> 
> 标签：sql, accumulator, accumulate

我想显示的输出是总 EMPL_NUM 的累加器。例如，字段 TOTAL_FEBRUARY=TOTAL_JANUARY+TOTAL_FEBRUARY 中显示的值，而字段 TOTAL_MARCH=TOTAL_MARCH+TOTAL_JANUARY+TOTAL_FEBRUARY 中的值存在。我希望你们中的一些人可以提供解决方案。非常感谢你。编码如下图所示：

```
SELECT 
(CASE WHEN To_Char(A.EFFDT,'MM')=01 THEN 1  
  WHEN To_Char(A.EFFDT,'MM')=02 THEN 2
  WHEN To_Char(A.EFFDT,'MM')=03 THEN 3
  WHEN To_Char(A.EFFDT,'MM')=04 THEN 4
  WHEN To_Char(A.EFFDT,'MM')=05 THEN 5
  WHEN To_Char(A.EFFDT,'MM')=06 THEN 6
  WHEN To_Char(A.EFFDT,'MM')=07 THEN 7
  WHEN To_Char(A.EFFDT,'MM')=08 THEN 8
  WHEN To_Char(A.EFFDT,'MM')=09 THEN 9
  WHEN To_Char(A.EFFDT,'MM')=10 THEN 10
  WHEN To_Char(A.EFFDT,'MM')=11 THEN 11
  WHEN To_Char(A.EFFDT,'MM')=12 THEN 12
  ELSE NULL END) AS MONTHS 

  ,Count(*) AS EMPL_NUM

  ,Sum(CASE WHEN To_Char(A.EFFDT,'MM')=01 THEN 1 ELSE 0 END) AS TOTAL_JANUARY 
  ,Sum(CASE WHEN To_Char(A.EFFDT,'MM')=02 THEN 1 ELSE 0 END) AS TOTAL_FEBRUARY 
  ,Sum(CASE WHEN To_Char(A.EFFDT,'MM')=03 THEN 1 ELSE 0 END) AS TOTAL_MARCH 
  ,Sum(CASE WHEN To_Char(A.EFFDT,'MM')=04 THEN 1 ELSE 0 END) AS TOTAL_APRIL  
  ,Sum(CASE WHEN To_Char(A.EFFDT,'MM')=05 THEN 1 ELSE 0 END) AS TOTAL_MAY 
  ,Sum(CASE WHEN To_Char(A.EFFDT,'MM')=06 THEN 1 ELSE 0 END) AS TOTAL_JUN 
  ,Sum(CASE WHEN To_Char(A.EFFDT,'MM')=07 THEN 1 ELSE 0 END) AS TOTAL_JULY  
  ,Sum(CASE WHEN To_Char(A.EFFDT,'MM')=08 THEN 1 ELSE 0 END) AS TOTAL_AUGUST 
  ,Sum(CASE WHEN To_Char(A.EFFDT,'MM')=09 THEN 1 ELSE 0 END) AS TOTAL_SEPTEMBER 
  ,Sum(CASE WHEN To_Char(A.EFFDT,'MM')=10 THEN 1 ELSE 0 END) AS TOTAL_OCTOBER
  ,Sum(CASE WHEN To_Char(A.EFFDT,'MM')=11 THEN 1 ELSE 0 END) AS TOTAL_NOVEMBER 
  ,Sum(CASE WHEN To_Char(A.EFFDT,'MM')=12 THEN 1 ELSE 0 END) AS TOTAL_DECEMBER 

  FROM PS_JOB A
 ,PS_CITIZEN_PSSPRT B
 ,PS_CITIZENSHIP C
 ,PS_CITIZEN_STS_TBL D

 WHERE A.HR_STATUS='A'

 AND A.EFFDT=(SELECT Max(A1.EFFDT) FROM PS_JOB A1 WHERE A.EMPLID=A1.EMPLID AND A.EMPL_RCD=A1.EMPL_RCD AND A1.EFFDT<=SYSDATE)

 AND A.EMPL_RCD=0

 AND A.EFFSEQ=(SELECT Max(A2.EFFSEQ) FROM PS_JOB A2 WHERE A.EMPLID=A2.EMPLID AND A.EMPL_RCD=A2.EMPL_RCD AND A.EFFDT=A2.EFFDT)

 AND A.EMPLID =B.EMPLID(+) 

 AND B.DEPENDENT_ID=' '

 AND A.EMPLID=C.EMPLID  

 AND B.EMPLID=C.EMPLID

 AND B.DEPENDENT_ID=C.DEPENDENT_ID

 AND B.COUNTRY=C.COUNTRY

 AND B.COUNTRY=D.COUNTRY                                    

 AND C.COUNTRY=D.COUNTRY

 AND C.CITIZENSHIP_STATUS=D.CITIZENSHIP_STATUS

 AND C.CITIZENSHIP_STATUS IN ('5','7') 

 AND To_Char(A.EFFDT,'YYYY')=2012

  GROUP BY CASE WHEN To_Char(A.EFFDT,'MM')=01 THEN 1  
  WHEN To_Char(A.EFFDT,'MM')=02 THEN 2
  WHEN To_Char(A.EFFDT,'MM')=03 THEN 3
  WHEN To_Char(A.EFFDT,'MM')=04 THEN 4
  WHEN To_Char(A.EFFDT,'MM')=05 THEN 5
  WHEN To_Char(A.EFFDT,'MM')=06 THEN 6
  WHEN To_Char(A.EFFDT,'MM')=07 THEN 7
  WHEN To_Char(A.EFFDT,'MM')=08 THEN 8
  WHEN To_Char(A.EFFDT,'MM')=09 THEN 9
  WHEN To_Char(A.EFFDT,'MM')=10 THEN 10
  WHEN To_Char(A.EFFDT,'MM')=11 THEN 11
  WHEN To_Char(A.EFFDT,'MM')=12 THEN 12
  ELSE NULL END 
```

此处输入代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:36:00.977

计算 SUM 时使用 <= 运算符，例如：

```
Sum(CASE WHEN TO_NUMBER(To_Char(A.EFFDT,'MM')) <= 3 THEN 1 ELSE 0 END) AS TOTAL_MARCH 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T03:33:11.247

我认为你要的是一个运行总数。看看分析函数（例如，[psoug](http://psoug.org/reference/analytic_functions.html)站点）。如果查询的核心是正确的，请在内部查询中进行常规聚合，然后将其包装在分析函数中以获得运行总计。

```
SELECT month
      ,SUM(month_count) OVER ( ROWS BETWEEN UNBOUNDED PRECEDING
                                        AND CURRENT ROW )
       AS running_total

FROM (  SELECT To_Char(A.EFFDT,'MM') AS month
              ,COUNT(*) AS month_count

          FROM PS_JOB A
              ,PS_CITIZEN_PSSPRT B
              ,PS_CITIZENSHIP C
              ,PS_CITIZEN_STS_TBL D

          WHERE A.HR_STATUS='A'

            AND A.EFFDT=( SELECT Max(A1.EFFDT)
                            FROM PS_JOB A1 
                            WHERE A.EMPLID=A1.EMPLID
                              AND A.EMPL_RCD=A1.EMPL_RCD
                              AND A1.EFFDT<=SYSDATE )

            AND A.EMPL_RCD=0

            AND A.EFFSEQ=( SELECT Max(A2.EFFSEQ)
                             FROM PS_JOB A2
                             WHERE A.EMPLID=A2.EMPLID
                               AND A.EMPL_RCD=A2.EMPL_RCD
                               AND A.EFFDT=A2.EFFDT )

            AND A.EMPLID =B.EMPLID(+) 

            AND B.DEPENDENT_ID=' '

            AND A.EMPLID=C.EMPLID  

            AND B.EMPLID=C.EMPLID

            AND B.DEPENDENT_ID=C.DEPENDENT_ID

            AND B.COUNTRY=C.COUNTRY

            AND B.COUNTRY=D.COUNTRY                                    

            AND C.COUNTRY=D.COUNTRY

            AND C.CITIZENSHIP_STATUS=D.CITIZENSHIP_STATUS

            AND C.CITIZENSHIP_STATUS IN ('5','7') 

            AND To_Char(A.EFFDT,'YYYY')=2012

          GROUP BY To_Char(A.EFFDT,'MM')

     )

ORDER BY month 
```

# css - 如何对齐两个相邻的 dojo 小部件？

> ID：13715345
> 
> 赞同：0
> 
> 时间：2012-12-05T02:24:14.657
> 
> 标签：css, layout, dojo

警告，这可能是这里曾经问过的最简单的问题。我有这样的表格：

```
 <div data-dojo-type="dijit.layout.ContentPane" data-dojo-attach-point="loginPane" data-dojo-props="title: 'Login'">
    <div data-dojo-type="hotplate.hotDojoWidgets.AlertBar" data-dojo-attach-point="loginAlertBar"></div>
    <form data-dojo-type="dijit.form.Form" data-dojo-attach-point="loginForm" method="POST">
      <label for="${id}_login">Login</label>
      <input name="login" id="${id}_login" data-dojo-attach-point="login" data-dojo-type="dijit.form.ValidationTextBox" data-dojo-props="required:true"/>
      <label for="${id}_password">Password</label>
      <input type="password" name="password" id="${id}_password0" data-dojo-attach-point="password" data-dojo-type="hotplate.hotDojoAuth.ValidationPassword" />
      <input type="checkbox" name="remember" id="${id}_remember" data-dojo-attach-point="remember" data-dojo-type="dijit.form.CheckBox" />
      <label for="${id}_checkbox">Remember login</label>    
      <input type="submit" data-dojo-attach-point="loginButton" data-dojo-type="hotplate.hotDojoWidgets.BusyButton" label="Login!" />
    </form>
    <div data-dojo-attach-event="onclick:_onRecoverClick">Recover your password</div>
  </div> 
```

这是一个非常基本的形式。现在，我想做的很简单：我只是希望标签“记住登录”位于复选框的旁边。就如此容易。我还想在密码字段和复选框之间留出更多空间。

现在，*最简单*、*最整洁*的方法是什么？（请在此模板中添加“style=”，我会正确添加到 CSS 中）。

我试过`display:inline`复选框。然而，它最终根本不显示，因为 Dojo 似乎将它放在页面的最左侧（？）。

我将需要创建一个“新客户”表单，我希望能够将事物彼此相邻放置并创建更整洁的布局，而不是通常的每行一个字段的表单。

奖金问题：让边框出现在一组小部件周围的*最简单方法是什么？*一些优雅的东西。

谢谢！

默克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:17:49.247

正如我在上面的评论中所发布的，我只使用一张表格，因为我认为这对于表格来说很好。但是，很多人会不同意我的看法。

如果您想避免使用表格，可以将复选框放在**<label>**内。您可以将控件绑定到标签，方法是使用*for*属性或将控件放在**<label>**中。

*   请参阅[关于标签使用的 w3 教程](http://www.w3schools.com/tags/tag_label.asp)

因此，您可以更改：

```
<input
    type="checkbox" name="remember" id="${id}_remember"
    data-dojo-attach-point="remember"
    data-dojo-type="dijit.form.CheckBox" />
<label for="${id}_checkbox">Remember login</label> 
```

到：

```
<label style="margin-left:10px">
    <input
        type="checkbox" name="remember"
        data-dojo-attach-point="remember"
        data-dojo-type="dijit.form.CheckBox"
    />Remember login
</label> 
```

This should place the label to the right of the checkbox and bind the label to the checkbox. I've also, added a margin-left to the label so that space is created between your password field and the checkbox.

# asp.net - 动态创建多个不同值的链接按钮

> ID：13715349
> 
> 赞同：0
> 
> 时间：2012-12-05T02:24:44.933
> 
> 标签：asp.net, vb.net, for-loop

我尝试过这样的事情。

```
xmlN = xml.SelectNodes("Table/Name")
For ctr = 0 To xmlN.Count - 1
Dim link as new LinkButton
link.ID= xmlN(ctr).InnerText
link.name=xmlN(ctr).InnerText
Panel1.controls.add(link)
Next 
```

但我知道它只创建一个链接，其中 xmlN 的所有值都在链接内，有什么方法可以在每个循环中创建新的链接按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:10:48.313

您需要设置 link.Text = "any value" ，否则客户端将无法看到链接。

# php - WordPress 主题页面

> ID：13715350
> 
> 赞同：2
> 
> 时间：2012-12-05T02:24:58.527
> 
> 标签：php, html, wordpress, themes

我正在从一个 Photoshop PSD 文件开发一个 wordpress 主题。该主题有多个我正在尝试添加的页面。我创建了一个自定义页面模板，效果很好，但该页面有多个内容区域。它有三个由边界分隔的 div。现在，如果您在编辑页面菜单上添加内容，它只会将其全部放在第一个容器中。

有没有办法让用户可以从管理面板编辑和添加内容到所有三个内容区域？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:09:41.777

一个非常有用的插件也可用。它被称为 Page.ly Multiedit，你可以在这里找到它：[http](http://wordpress.org/extend/plugins/pagely-multiedit/) ://wordpress.org/extend/plugins/pagely-multiedit/ 。

更详细的说明和示例也可以在这里查看：http: [//blog.page.ly/multiedit-plugin/](http://blog.page.ly/multiedit-plugin/)。

这将允许向页面模板添加多个可编辑区域，并在页面编辑器中为每个可编辑区域添加一个选项卡。我已经多次使用它并取得了巨大的成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T05:25:13.937

是的..你可以添加多个容器让用户编辑..试试这个**多个内容块**：[http ://wordpress.org/extend/plugins/multiple-content-blocks/](http://wordpress.org/extend/plugins/multiple-content-blocks/)

将来，如果您想要更具体的容器编辑器，可能在侧边栏、页脚或幻灯片图像编辑器中，您可以使用这个**Magic Fields**： [http ://wordpress.org/extend/plugins/magic-fields/](http://wordpress.org/extend/plugins/magic-fields/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T19:04:10.477

你可以看看大卫汉森的这篇文章

[http://wp.smashingmagazine.com/2011/10/14/advanced-layout-templates-in-wordpress-content-editor/](http://wp.smashingmagazine.com/2011/10/14/advanced-layout-templates-in-wordpress-content-editor/)

还有这个

[http://wpstorm.net/2010/04/editor-styles-custom-post-types-wordpress-3-0/](http://wpstorm.net/2010/04/editor-styles-custom-post-types-wordpress-3-0/)

最后还有一个名为 Advanced custom fields 的插件，或许可以帮助您在 advancedcustomfields dot com 上下载它

祝你好运迈克

# javascript - Android 2.X HTML5 视频端全屏

> ID：13715351
> 
> 赞同：5
> 
> 时间：2012-12-05T02:24:58.567
> 
> 标签：javascript, android, html5-video

Android Gingerbread 是否有解决方法，以检测用户何时退出浏览器中的 HTML5 视频？基本上，Android 手机将 HTML5 视频全屏播放（与 iPhone 相同）`webkitendfullscreen`或`webkitfullscreenchange`在 Android 上不启动。因此无法在视频播放结束之前检测到全屏退出。

这篇文章的一条评论说它在 Android 2.3 中不受支持：[如何捕获视频的事件 ExitFullScreen？](https://stackoverflow.com/questions/11471919/how-can-i-catch-event-exitfullscreen-of-a-video)

有人找到解决方案或解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:21:25.560

在 Android 2.x 上的 HTML5 视频事件的方式上你没有太多的工作要做......*但是*，在 Android 2.x 上，视频将始终全屏播放，因此在关闭时会自动暂停。不幸的是，您没有`pause`像其他浏览器那样获得事件，但您确实可以访问两件事：

1)`timeupdate`事件，在视频播放时每秒为您提供数次数据。

2）`currentTime`视频元素的属性。

因此，虽然这有点难看，但您可以`currentTime`在视频开始播放后定期轮询属性，如果超过 500 毫秒相同，则认为视频已暂停（因此离开全屏模式） . 您还可以推断视频因`timeupdate`在给定时间段内没有事件而暂停。这有可能导致您的页面仅从暂停视频的用户重绘......但知道您可以找到一种安全的方法。

我意识到这是一个老问题，但我希望这对某人有帮助！

# c# - 将 Datagrid 项导出到对象列表

> ID：13715354
> 
> 赞同：0
> 
> 时间：2012-12-05T02:25:17.833
> 
> 标签：c#, wpf, linq, datagrid

如何获取数据网格中列出的项目并将其导出到对象列表中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T02:29:53.093

如果你特别想要类型`object`，这应该可以解决问题

```
var list = myDataGrid.Items.OfType<object>(); 
```

# c++ - 使用 cocoa 框架的 node.js 插件

> ID：13715357
> 
> 赞同：6
> 
> 时间：2012-12-05T02:25:47.200
> 
> 标签：c++, macos, cocoa, node.js

我想在 node.js 插件系统中使用 cocoa 中提供的一些 c++ 框架。

例如，如果说如果您不能在 node.js 插件中使用可可框架，您将如何在 mac 上的 node.js 的操作系统级别获取鼠标位置。

如果有办法将其链接起来，有人可以提供有关如何做到这一点的帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-14T15:38:48.233

Cocoa 不是用 ObjC 编写的吗？这样您就可以将它与[NodObjC](https://github.com/TooTallNate/NodObjC)一起使用。

如果您希望集成 C++，您的 goto 知识来源是 node core 的[Nan](https://github.com/nodejs/nan)。

新的实现使用 C++ 部门来做到这一点，比如[这里](https://github.com/octalmage/robotjs/blob/master/src/mouse.c)的桌面自动化。

# c# - “ClosedXML.Excel.XLWorkbook”的类型初始化程序引发异常

> ID：13715359
> 
> 赞同：3
> 
> 时间：2012-12-05T02:26:08.860
> 
> 标签：c#

```
using ClosedXML.Excel;

class XLSXWriter : BExporter
    {
        private readonly string _fName;

        public XLSXWriter(string fileName)
        {
            _fName = fileName;
        }

        public override void Export(IEnumerable<AnimalData> animals)
        {
            var workBook = new XLWorkbook(); <---Throws an exception

            var workSheet = workBook.Worksheets.Add("MySheet");

            workSheet.Cell("A1").Value = "Hello World";            

            FileStream fs = new FileStream(_fName, FileMode.Create);
            workBook.SaveAs(fs);
            fs.Close();          
        }
    } 
```

只是尝试这个库`ClosedXML.dll`，它会引发异常，无法弄清楚可能是什么问题。我`_fName`从`savefiledialog`. 任何人的想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T21:47:29.597

以为会删除这篇文章，但将来可能会对某人有所帮助....我所要做的就是再引用一个 DLL DocumentFormat.OpenXml.dll 。现在完美运行！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-09T06:36:59.440

更新 closedXML 库后，我修复了同样的错误。换句话说，如果 ClosedXML 和 OpenXML 是更新包，则不会发生此错误。

# highcharts - 如何在hightcharts中显示一些空项目？

> ID：13715364
> 
> 赞同：0
> 
> 时间：2012-12-05T02:26:56.317
> 
> 标签：highcharts

我在前几个小时有一些数据，但是现在之后的数据是空的，我想像这样显示它们： ![在此处输入图像描述](../Images/ca9cc723314a18cb0852b42fb6103a25.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:03:25.610

您可以将 xmax 添加到所需的值 xAxis。

这样其他点将显示为空。你可以说

startOnTick：假，endOnTick：假

例如参考：[example](http://jsfiddle.net/nagoba/dP8cL/1/)

我将 y 的最小值设置为 20，最大值设置为 400，

```
yAxis: {
        min: 20,
        max:400,
        startOnTick: false,
        endOnTick:false
    }, 
```

查看图表的显示方式。我希望这有帮助。

# python - 如何在没有中央小部件（PyQt4）的应用程序中设置 QDockWidget 初始（默认）大小？

> ID：13715365
> 
> 赞同：7
> 
> 时间：2012-12-05T02:27:00.120
> 
> 标签：python, qt, pyqt, pyqt4, qdockwidget

我有一个包含很多[QDockWidgets](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qdockwidget.html)而没有中央小部件的应用程序。我想设置一些[QDockWidgets](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qdockwidget.html)初始大小（应用程序启动时的大小），但我不想限制它们的最小/最大大小。

怎么做？例如，我需要将初始大小 150x75 设置为其中之一。我尝试了明显的方法（例如与停靠小部件内容相关的[QWidget.Resize()](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qwidget.html#resize-2)），但它根本不起作用。

这是一个简化的情况模型：

```
from PyQt4 import QtCore, QtGui

app = QtGui.QApplication([''])

mw = QtGui.QMainWindow() # mw = MainWindow
mw.setCentralWidget(None)
mw.showMaximized()

mw.dockWdg1 = QtGui.QDockWidget(mw)
mw.content1 = QtGui.QTreeWidget()
mw.dockWdg1.setWidget(mw.content1)
mw.addDockWidget(QtCore.Qt.DockWidgetArea(2), mw.dockWdg1)
mw.dockWdg1.setWindowTitle("1st dock widget")

mw.dockWdg2 = QtGui.QDockWidget(mw)
mw.content2 = QtGui.QTreeWidget()
mw.dockWdg2.setWidget(mw.content2)
mw.addDockWidget(QtCore.Qt.DockWidgetArea(1), mw.dockWdg2)
mw.dockWdg2.setWindowTitle("2nd dock widget")

mw.dockWdg3 = QtGui.QDockWidget(mw)
mw.content3 = QtGui.QTreeWidget()
mw.dockWdg3.setWidget(mw.content3)
mw.addDockWidget(QtCore.Qt.DockWidgetArea(1), mw.dockWdg3)
mw.dockWdg3.setWindowTitle("3rd dock widget")

mw.show()
app.exec_() 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T03:35:47.933

码头小部件将被合并到主窗口的布局中，因此任何调整它们大小的尝试都将被忽略。

对此的标准解决方法是创建内容小部件的子类并重新实现其`sizeHint`：

```
class TreeWidget(QtGui.QTreeWidget):
    def sizeHint(self):
        return QtCore.QSize(150, 75)

mw.dockWdg2 = QtGui.QDockWidget(mw)
mw.content2 = TreeWidget()
mw.dockWdg2.setWidget(mw.content2) 
```

但是，这仅在您还仔细管理其他 dockwidget 的大小时才有效。当然，最大化主窗口也会对最终结果产生影响。

你可能还想考虑使用[QMainWindow.saveState](https://qt-project.org/doc/qt-4.8/qmainwindow.html#saveState)和[QMainWindow.restoreState](https://qt-project.org/doc/qt-4.8/qmainwindow.html#restoreState)来管理你的dockwidgets的初始状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T20:38:50.393

使用 fixedSize 函数，如 setFixedWidth/setFixedHeight。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-22T09:22:20.560

我认为`sizeHint()`根据 MainWindow 的大小重新实现函数比仅返回固定大小要好。

[源代码](https://github.com/blab-liuliang/echo/blob/master/editor/echo/Base/UI/RenderWindow/RenderWindow.cpp)

```
// size hint
QSize RenderWindow::sizeHint() const
{
    float width = MainWindow::instance()->width() * 0.3f;
    float height = MainWindow::instance()->height() * 0.65f;
    return QSize( width, height);
} 
```

[![在此处输入图像描述](../Images/058d315e34f1215204e14d8553166a53.png)](https://i.stack.imgur.com/971nw.png)

# html - 中心部分设置为内联块？

> ID：13715374
> 
> 赞同：0
> 
> 时间：2012-12-05T02:28:22.913
> 
> 标签：html, css

我有一个这样定义的部分：

```
<footer>
    <section id="content">
        <section id="footer-links" class="center">
            <a href="index.php" class="float-left">Home</a>
            <a href="about.html" class="float-left">About</a>
            <a href="contact.html" class="float-left">Contact</a>
            <a href="terms.html" class="float-left">Terms and Conditions</a>
        </section>
    </section>
</footer> 
```

我已经应用了以下 CSS：

## 页脚

```
background-color: 
rgb(53, 53, 181);
color: 
rgb(255, 255, 255);
display: block;
font-size: 16px;
height: 100px;
width: 1424px; 
```

## 部分（#内容）

```
background-color: 
rgba(0, 0, 0, 0);
color: 
rgb(255, 255, 255);
display: block;
font-size: 16px;
height: 19px;
margin-bottom: 0px;
margin-left: 312px;
margin-right: 312px;
margin-top: 0px;
position: relative;
width: 800px; 
```

## 部分（#footer-links）

```
background-color: 
rgba(0, 0, 0, 0);
color: 
rgb(255, 255, 255);
display: inline-block;
font-size: 16px;
height: 19px;
margin-left: 0px;
margin-right: 0px;
width: 332px; 
```

## 一个

```
background-color: 
rgba(0, 0, 0, 0);
border-bottom-color: 
rgb(222, 222, 222);
border-bottom-style: dotted;
border-bottom-width: 1px;
color: 
rgb(222, 222, 222);
cursor: auto;
display: block;
float: left;
font-size: 16px;
height: 18px;
margin-right: 16px;
text-decoration: none;
width: 39px; 
```

![页脚左对齐](../Images/f61dfa2f6cc5868479e866ec1615a40a.png)

但是，如您所见，它左对齐`section`. 希望大家能帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:40:47.253

的这种特殊用途`display: inline-block`可能不是您所追求的（而且我认为这`float: left`部分也可能是错误的方法。例如：

```
<footer>
    <section id="content">
        <nav id="footer-links" class="center">   
            <a href="index.php" class="float-left">Home</a>
            <a href="about.html" class="float-left">About</a>
            <a href="contact.html" class="float-left">Contact</a>
            <a href="terms.html" class="float-left">Terms and Conditions</a>
        </nav>
    </section>
</footer>​ 
```

请注意使用 of`nav`而不是第二个`section`（语义上）。`nav`接下来，我将通过将using居中来清理并解决“居中”链接的问题`margin: 0 auto`。您需要在`width`父母`#content` *和*`nav`：

```
html, /* This part allows me to set margin: 0 auto; on footer. */
body {
    width: 100%;
    margin: 0;
    padding: 0;
}
footer {
    background-color: rgb(53, 53, 181);
    color: rgb(255, 255, 255);
    display: block;
    font-size: 16px;
    height: 100px;
    width: 600px; /* Note this line. */
    padding: 10px;
    margin: 0 auto; /* Note this line. */
}
#content {
    background-color: rgba(0, 0, 0, 0);
    color: rgb(255, 255, 255);
    font-size: 16px;
    height: 19px;
    margin-bottom: 0;
    width: 600px; /* The same width as footer. Keep that in mind. */
}
#footer-links {
    background-color: rgba(0, 0, 0, 0);
    color: rgb(255, 255, 255);
    font-size: 16px;
    height: 19px;
    margin: 0 auto;
    width: 400px; /* 200px less than #content and footer */
    text-align: center; /* HINT! This actually centers the text. */
    font-size: 16px;
}
#footer-links a {
    background-color: rgba(0, 0, 0, 0);
    border-bottom: 1px dotted rgb(222, 222, 222);
    color: rgb(222, 222, 222);
    cursor: auto;
    text-decoration: none;
    height: 18px;
    display: inline-block; /* So the next line will work.  */
    margin: 0 8px;
}​ 
```

[http://jsfiddle.net/3Kk2L/3/](http://jsfiddle.net/3Kk2L/3/)

现在，`text-align: center`on`#footer-links a` *实际上以内容为中心*。在这里观察很重要。

*另请注意*，我*确实*使用`display: inline-block`了 within on `#footer-links a`，然后允许我设置一个已定义的`margin`而不是继承`1px dotted`间隙上的下划线。*但是*，IE7 和更低版本不支持`display: inline-block`，如果需要，您应该先检查它的外观。就个人而言，我会担心太多，除非你真的需要支持 IE7 和（*畏缩*）IE6。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T03:55:32.850

我认为你可以消除所有这些 ids/classes，并且只针对元素`inline-block`

[http://jsfiddle.net/qwM6z/](http://jsfiddle.net/qwM6z/)

# php - 用户友好的 URL 而不是查询字符串？

> ID：13715381
> 
> 赞同：4
> 
> 时间：2012-12-05T02:29:44.560
> 
> 标签：php, url

> **可能重复：**
> [在 php 中使用用户友好的 seo](https://stackoverflow.com/questions/1444151/using-seo-user-friendly-in-php)
> [代码 ingniter 中的自定义路由](https://stackoverflow.com/questions/7692992/custom-routing-in-code-ingniter)

我正在开发一个 CMS，我想使用用户友好的 URL 而不是查询字符串。

例如：

`mysite.com/cat_1 => mysite.com/cat_1/itme_1`

代替

`mysite.com/?cat=1 => mysite.com/?item=1`

我应该如何实现这个？任何标准方式？

我的想法是使用半动态页面并使用用户友好的使用查询字符串的动态页面的 URL 生成静态快照。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T02:35:06.860

这是通过使用 .htaccess 来修改 URL 发送到客户端的方式来实现的。或者正如其他人所说，美化 URL。以下是一些文章链接，可帮助您开始了解`mod_rewrite`实现此功能所需的规则。

[http://net.tutsplus.com/tutorials/other/using-htaccess-files-for-pretty-urls/](http://net.tutsplus.com/tutorials/other/using-htaccess-files-for-pretty-urls/)

[http://www.roscripts.com/Pretty_URLs__a_guide_to_URL_rewriting-168.html](http://www.roscripts.com/Pretty_URLs_-_a_guide_to_URL_rewriting-168.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T02:32:13.783

您想在`.htaccess`内部重写您的 URL 并将它们适当地路由到您的应用程序。

这是一个特定的`.htaccess`示例，可以满足您的需求：

```
RewriteEngine on
RewriteRule ^cat_([0-9]*) /?cat=$1 [N,QSA]
RewriteRule ^item_([0-9]*) /?item=$1 [N,QSA] 
```

只需将上述内容放在`.htaccess`您的根网络文件夹中的一个文件中，您就可以开始使用了。

请注意，`mod-rewrite`如果尚未启用，您可能必须在 apache 服务器中启用（大多数共享托管服务提供商已启用它）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T02:32:57.107

仅使用 PHP 无法实现此功能。您需要为您的 HTTP 服务器配置 URL 重写，这会将用户友好的 URL 转换为您的脚本可以理解的查询字符串。在 Apache 的情况下，您应该查看`mod_rewrite`，通常可以通过`.htaccess`文件进行配置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T02:34:47.960

您可以使用像 Codeigniter 这样的框架：http: [//ellislab.com/codeigniter](http://ellislab.com/codeigniter)

并审查：[http ://ellislab.com/codeigniter/user-guide/general/urls.html](http://ellislab.com/codeigniter/user-guide/general/urls.html)

您将需要激活`mod_rewrite`并创建文件`.htaccess`

.htaccess 与 Codeigniter：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?$1 [L]    
</IfModule> 
```

然后你可以使用：

```
example.com/class/function/ID 
```

我希望这会有所帮助。

问候。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T02:36:00.287

使用 asp.net mvc 您可以免费获得它；）但说真的，我认为 PHP 有一个 Web 引擎（[代码点火器](https://stackoverflow.com/questions/7692992/custom-routing-in-code-ingniter)），它也提供高级路由。[此外，您可以使用一些Apache 黑魔法](http://www.codinginsight.com/custom-routing-in-php/)来扮演自己的角色

# matlab - 在matlab中保存和读取巨大的结构？

> ID：13715384
> 
> 赞同：0
> 
> 时间：2012-12-05T02:30:06.510
> 
> 标签：matlab, serialization, struct, save

在matlab中，我有一个程序，[这个实现](http://www.csie.ntu.edu.tw/~cjlin/liblinear/)线性支持向量机来做机器学习。

库在训练阶段输出一个表示模型的结构。此结构将用于测试阶段。

我想将这个结构保存到一个文件中，这样我就不必每次都经历训练阶段。

我已经尝试过[psychtoolbox](http://psychtoolbox.org/HomePage)的`WriteStructsToText()`and `ReadStructsFromText()`，但是由于在将结构读入内存时缓冲区溢出，它们失败了。

输出的结构是非常大量的数据（几十兆字节），所以这可能是问题所在。

结构：

```
 -Parameters: Parameters
    -nr_class: number of classes; = 2 for regression
    -nr_feature: number of features in training data (without including the bias term)
    -bias: If >= 0, we assume one additional feature is added to the end
        of each data instance.
    -Label: label of each class; empty for regression
    -w: a nr_w-by-n matrix for the weights, where n is nr_feature
        or nr_feature+1 depending on the existence of the bias term.
        nr_w is 1 if nr_class=2 and -s is not 4 (i.e., not
        multi-class svm by Crammer and Singer). It is
        nr_class otherwise. 
```

**编辑：**

有谁知道如何解决这个错误？

```
>> save('mode.txt','-struct','model');
>> model = load('mode.txt');
??? Error using ==> load
Number of columns on line 1 of ASCII file C:\Users\jason\Dropbox\Homework\cs280\FINAL PROJECTO\mode.txt
must be the same as previous lines. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T02:41:46.263

最简单的方法是将结构保存到 .mat 文件：

```
outputStructure = yourTrainingFunction;

save('someFileName.mat','-struct','outputStructure'); 
```

并加载

```
outputStructure = load('someFileName.mat') 
```

请注意，如果您的文件非常大，您可能必须在 Matlab 的常规设置中设置适当的兼容性（如果我没记错的话，7.3 之前的保存文件版本无法处理 >2GB 的文件）。

# python - 在一个类python 3中保存多个“自我”

> ID：13715389
> 
> 赞同：1
> 
> 时间：2012-12-05T02:31:05.587
> 
> 标签：python, oop, python-3.x

我目前正在导入一个文件，其中每一行都包含有关学生的特定信息。学生的姓名首先是他们的成绩。现在，我可以打印每个名字，然后是他们的成绩和平均成绩列表。我想弄清楚的是如何维护每个学生的成绩和姓名，并能够在同一个班级再次将他们调用到不同的函数中。截至目前，他们正在将最后一个学生保存为“自我”。学生人数不定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:50:16.923

如果你救了最后一个学生，因为`self`你做的事情根本上是错误的。事实上，如果你`self`在做错事时保存任何东西。

`self`是在 Python 中用来指代该方法所属的对象的名称（按照惯例，您可以称其为任何名称）。你永远不会把任何东西存入自己。

您需要做的是创建一个学生对象列表。

像这样的东西：

```
class Student(object):
    def __init__(self, name):
        self.name = name

students = [Student(name) for name in list_of_student_names] 
```

# javascript - 折叠 div 的手风琴菜单 CSS3、HTML5 问题

> ID：13715393
> 
> 赞同：1
> 
> 时间：2012-12-05T02:31:50.427
> 
> 标签：javascript, html, css, accordion

我对使用 HTML5 和 CSS3 的手风琴菜单有疑问。手风琴功能很好，有很好的缓动和过渡。我的问题是每个内容 div 都有很多内容，我需要使用 overflow-y 来滚动内容。如果您滚动内容，然后想跳转到另一个项目...您刚刚折叠的 div （因为它应该）但它不会恢复到超链接菜单项，而是显示滚动的内容。

我想看看当有人跳转到另一个项目时，是否有任何建议可以让导航更友好。

这是一个例子。[http://www.toolboxwebdesign.com/css3.html](http://www.toolboxwebdesign.com/css3.html)

**预先感谢您的任何帮助！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:25:09.017

我会在手风琴的内容周围放置一个 div，不包括标题，然后将你的溢出-y 放在那个 div 上。这样，标题将始终位于顶部，并且不会随内容滚动。

# c# - 如何在 TabItem 上设置 ZIndex？

> ID：13715394
> 
> 赞同：1
> 
> 时间：2012-12-05T02:31:54.687
> 
> 标签：c#, wpf, z-index, tabcontrol

我希望我的 TabItems 位于边框之间以实现“活页夹”效果，如下所示：

![](../Images/d5d2a7a16dd6670d90fcbf278e6d8c8c.png)

但是，我似乎无法将 ZIndex 与我的边框和每个 TabItem 项一起使用来实现这种效果。目前，我得到这个结果：

![](../Images/90b7f4766c03fe78d3e07ff185b53ff3.png)

使用此代码：

```
<Border CornerRadius="40,40,0,0" Background="Orange" Margin="8,31,2,21" Grid.RowSpan="4" Panel.ZIndex="-3" ></Border>
        <Border CornerRadius="40,40,0,0" Background="Red" Margin="6,29,4,23" Grid.RowSpan="4" Panel.ZIndex="-1"></Border>
        <Border CornerRadius="40,40,0,0" Background="Yellow" Margin="3,26,7,26" Grid.RowSpan="4" Panel.ZIndex="1"></Border>
        <Border CornerRadius="40,40,0,0" Background="DarkRed" Margin="1,23,9,29" Grid.RowSpan="4" Panel.ZIndex="3"></Border>
        <Border CornerRadius="40,40,0,0" Background="OrangeRed" Margin="-2,19,12,33" Grid.RowSpan="4" Name="border1" Panel.ZIndex="5"></Border>
        <TabControl Name="tabControl1" TabStripPlacement="Bottom" Background="Transparent" Margin="-2,32,15,6" Grid.RowSpan="4" BorderThickness="0">
            <TabItem Name="tabItem1" Margin="0,0,0,1" Panel.ZIndex="4">
                <TabItem.Header>
                    <TextBlock>
                Main</TextBlock>
                </TabItem.Header>
            </TabItem>
            <TabItem Name="tabItem2" Panel.ZIndex="5">
                <TabItem.Header>
                    <TextBlock Height="13" Width="91">
                Internet Explorer</TextBlock>
                </TabItem.Header>
            </TabItem>
            <TabItem Name="tabItem3" Panel.ZIndex="0">
                <TabItem.Header>
                    <TextBlock>
               Firefox</TextBlock>
                </TabItem.Header>
            </TabItem>
            <TabItem Name="tabItem4" Panel.ZIndex="-2">
                <TabItem.Header>
                    <TextBlock>
               Chrome</TextBlock>
                </TabItem.Header>
            </TabItem>
            <TabItem Name="tabItem5" Panel.ZIndex="-4">
                <TabItem.Header>
                    <TextBlock>
               Opera</TextBlock>
                </TabItem.Header>
            </TabItem>
        </TabControl> 
```

然而，这并没有达到预期的效果。如何在 WPF 中做到这一点？TabControl 是最佳选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T23:02:10.533

你的方法相当复杂！一种更简单的替代方法是在背景图像中的选项卡上使用隐藏按钮，并为具有隐藏选项卡的内容使用选项卡控件。

换句话说，将用户透明或不可见的图像放置在图像中的选项卡上。单击按钮时，如果 Firefox 控件位于选项卡编号 1 并且单击了 firefox 按钮，则代码会将选项卡控件的 ItemIndex 更改为 1。当然，您可能希望对用户隐藏选项卡控件中的实际选项卡。

这种方法更容易维护和开发！

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:02:50.243

我不太确定我是否理解正确，但这可能与您尝试做的很接近：

```
<TabControl Name="tabControl1" TabStripPlacement="Bottom" Background="Transparent" Margin="-2,32,15,6" Grid.RowSpan="4" BorderThickness="0">
        <TabItem Name="tabItem1" Margin="0,0,0,1" Panel.ZIndex="4">
            <TabItem.Header>
                <TextBlock>
            Main</TextBlock>
            </TabItem.Header>
            <Border CornerRadius="40,40,0,0" Background="Orange" Grid.RowSpan="4" Panel.ZIndex="-3" ></Border>
        </TabItem>
        <TabItem Name="tabItem2" Panel.ZIndex="5">
            <TabItem.Header>
                <TextBlock Height="13" Width="91">
            Internet Explorer</TextBlock>
            </TabItem.Header>
            <Border CornerRadius="40,40,0,0" Background="OrangeRed" Grid.RowSpan="4" Name="border1" Panel.ZIndex="5"></Border>
        </TabItem>
        <TabItem Name="tabItem3" Panel.ZIndex="0">
            <TabItem.Header>
                <TextBlock>
           Firefox</TextBlock>
            </TabItem.Header>
            <Border CornerRadius="40,40,0,0" Background="Red" Grid.RowSpan="4" Panel.ZIndex="-1"></Border>
        </TabItem>
        <TabItem Name="tabItem4" Panel.ZIndex="-2">
            <TabItem.Header>
                <TextBlock>
           Chrome</TextBlock>
            </TabItem.Header>
            <Border CornerRadius="40,40,0,0" Background="Yellow" Grid.RowSpan="4" Panel.ZIndex="1"></Border>
        </TabItem>
        <TabItem Name="tabItem5" Panel.ZIndex="-4">
            <TabItem.Header>
                <TextBlock>
           Opera</TextBlock>
            </TabItem.Header>
            <Border CornerRadius="40,40,0,0" Background="DarkRed" Grid.RowSpan="4" Panel.ZIndex="3"></Border>
        </TabItem>
    </TabControl> 
```

# objective-c - 获取脸书个人资料图片

> ID：13715397
> 
> 赞同：3
> 
> 时间：2012-12-05T02:32:19.227
> 
> 标签：objective-c, ios, cocos2d-iphone, ccsprite

目前我想获取 facebook 个人资料图片，然后将图片转换为 CCSprite。

到目前为止，我的代码如下所示：

```
//fbId is facebook id of someone
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/%@/picture?type=normal", fbId]];
NSData *data = [NSData dataWithContentsOfURL:url];
UIImage *image = [UIImage imageWithData:data];

//convert UIImage to CCSprite
CCTexture2D *texture = [[[CCTexture2D alloc] initWithImage:image resolutionType:kCCResolutionUnknown] retain];
CCSprite *sprite = [CCSprite spriteWithTexture:texture];
[self addChild:sprite]; 
```

它可以工作，但是在加载之前需要一段时间，大约几秒钟。

我的问题是，除了互联网连接，有没有更好的方法来尽快加载 Facebook 个人资料图片？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T04:35:28.853

您将网络代码放在主线程中，这会阻塞 UI 并带来糟糕的用户体验。通常，您应该将此类内容放在另一个线程中。尝试使用调度

```
dispatch_queue_t downloader = dispatch_queue_create("PicDownloader", NULL);
dispatch_async(downloader, ^{
    NSData *data = [NSData dataWithContentsOfURL:url];
    UIImage *image = [UIImage imageWithData:data];
    dispatch_async(dispatch_get_main_queue(), ^{
        CCTexture2D *texture = [[[CCTexture2D alloc] initWithImage:image resolutionType:kCCResolutionUnknown] retain];
        CCSprite *sprite = [CCSprite spriteWithTexture:texture];
        [self addChild:sprite];
    });
}); 
```

或者，如果您愿意，可以尝试[JBAsyncImageView](https://github.com/bunchjesse/JBAsyncImageView)。也许你必须把它破解到你的 CCSprite :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T04:25:28.870

一方面，我会选择使用[AFNetworking](https://github.com/AFNetworking)来异步请求图像数据。我的猜测是这就是造成延迟的原因。您可能会注意到您的 UI 在这几秒钟内被锁定。异步调用该数据将解决此问题。更好的是，您可以考虑使用[Facebook 的 iOS SDK](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/)来调用图像。

# activemq - 芹菜使用 ActiveMQ

> ID：13715400
> 
> 赞同：1
> 
> 时间：2012-12-05T02:32:35.687
> 
> 标签：activemq, rabbitmq, celery, amqp, django-celery

Celery 目前可以与 RabbitMQ 作为消息传递系统一起使用。我想知道即将发布的 ActiveMQ 5.8（[显然包括 AMQP](http://activemq.apache.org/amqp.html)支持）是否允许 Celery 使用 ActiveMQ 而不是 RabbitMQ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:41:42.113

一旦 Celery 使用 AMQP 1.0，它应该可以工作。似乎 Celery 仍在使用旧版本的协议，因此它的可移植性将受到限制。

# ruby - Ruby 类方法是线程安全的吗？

> ID：13715404
> 
> 赞同：9
> 
> 时间：2012-12-05T02:33:37.993
> 
> 标签：ruby, methods, thread-safety

例如，以下方法：

```
class MyClass
  self.perform(id)
    hash = doSomething(id)
    doMoreStuff(hash)
    return hash
  end
end 
```

我担心的是如果我有多个线程调用`MyClass.perform()`. 该对象`hash`是否可能被另一个线程覆盖？换句话说，线程 1 调用`doSomething`并获取返回的哈希值`{1 => 1}`。但紧接着线程 2 调用`doSomething`并获得`{2 => 2}`. 现在会发生什么？线程 1 的哈希是否更改为`{2 => 2}`？

还是每个线程都独立工作`hash`，其他线程永远无法触及？假设`doSomething`并且`doMoreStuff`已经是线程安全的。

如果重要的话，我使用的是 Rails 3.0。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-05T07:42:28.167

局部变量，例如 your `hash`，对于周围方法的特定调用是局部的。如果两个线程最终同时调用`perform`，那么每个调用都将获得自己的执行上下文，并且除非涉及共享资源，否则它们不会重叠：实例变量（`@hash`），类变量（`@@hash`），全局变量（`$hash`），...可能会导致并发问题。使用像您的`perform`.

但是，如果`perform`正在创建线程并且您最终在内部使用了闭包`perform`，那么您最终可能会得到多个线程引用通过闭包捕获的相同局部变量。因此，当您创建线程时，您必须小心范围问题，但在处理仅适用于局部变量的简单方法时，您不必担心它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T02:44:15.573

作为“类方法”的东西（它只是类对象上的单例方法）并不比作为实例方法更具有线程安全性。

# c++ - char指针和char数组的区别

> ID：13715405
> 
> 赞同：3
> 
> 时间：2012-12-05T02:33:54.743
> 
> 标签：c++, arrays, pointers

> 我定义了 2 个变量，一个是指针，一个是数组

```
char* ptr;
char* array;

ptr = "12345";
array = new int[5];

for(int i = 0; i < 5; i++)
    array[i] = i;

while(*ptr != 0)
        cout << *ptr++ << endl;

//Get garbage values
for(int i = 0; i < 5; i++)
    cout << ptr[i]; 
```

> 我想知道变量之间的主要区别是什么。以及为什么当我尝试以数组方式打印“ptr []”中的值时会得到垃圾值，但是在遍历 vales 时完全没问题。我似乎无法理解我的变量“ptr”如何指向 5 个字符，因为它应该只能指向一个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T02:35:57.007

指针和数组之间有很多区别，但是你得到垃圾的原因是当你使用`ptr`索引时，它已经指向“12345”的空终止符。

每次你这样做：

```
*ptr++; 
```

`ptr`指向它曾经指向的下一个元素（即 1, 2, 3, ...）。当循环结束时，它指向空终止符`\0`，然后当你尝试用 索引它时`i`，它指向未知内存。

我建议您使用临时指针来遍历元素：

```
const char* ptr; // declaring ptr constant in this case is a good idea as well

...

ptr = "12345";
char *tmp = ptr;

...

while(*tmp != 0)
    cout << *tmp++ << endl; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T02:56:58.250

您在这里确实有三个概念：指向字符的指针、动态数组和字符串文字：

```
 // Initialise a character pointer to point to a dynamic array of characters
    char* array = new char[5];

    // Assign values pointed to.
    for(int i = 0; i < 5; i++)
        array[i] = i;
    // Read back the values.
    for(int i = 0; i < 5; i++)
         std::cout << array[i];

    // Initialise a character pointer to point to a string literal.
    const char* const ptr = "12345";

    const char* charIterator = ptr;
    while(*charIterator != 0)
        std::cout << *charIterator << std::endl;

    //Another way to read values.
    for(int i = 0; i < 5; i++)
        std::cout << ptr[i]; 
```

`const`注意表达式中的双重使用`const char* const ptr`。第一个意味着字符值是恒定的，第二个是指针本身是恒定的。后者阻止了写入`ptr++`，并丢失了字符串文字开头地址的唯一句柄`"12345"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T03:24:10.557

如果直接使用指针 ptr ，则 ptr 存储指向数组值的地址将会改变。在这个循环中：

```
while(*ptr != 0)

   cout << *ptr++ << endl; 
```

现在，ptr 指向数组的末尾（\0）。

也许你应该在上面的循环之前执行最后一个循环。

通常，按照尼克的方式做更合适。

# c - 使用结构解引用运算符在 C 中粘贴标记

> ID：13715424
> 
> 赞同：3
> 
> 时间：2012-12-05T02:36:26.120
> 
> 标签：c, structure, token, c-preprocessor, dereference

我对使用取消引用运算符进行预处理器粘贴的“##”有疑问。谁能告诉我为什么下面的代码无法编译？

```
typedef struct
{
    char data;
} MY_STRUCT;

MY_STRUCT  My_Instance;
MY_STRUCT* My_PInstance;

#if 1
#define GET_MEMBER(membername)         (My_PInstance->##membername)
#else
#define GET_MEMBER(membername)         (My_Instance.##membername)
#endif 
```

然后当我打电话时：

```
char value = GET_MEMBER(data);  // Where My_PInstance is properly instantiated. 
```

我得到一个编译错误。

```
error: pasting "->" and "data" does not give a valid preprocessing token 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T02:39:08.837

你不需要粘贴。做就是了`(My_Pinstance->membername)`

'##' 应该将两个标记粘贴到一个有效标记中。但是 `->foo`不是有效的令牌。（例如，foo）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-18T19:03:57.557

只为其他任何来这里的人。我遇到了同样的问题，但使用了“。” 未讨论的 GET_MEMBER(..) 宏的变体，但我认为问题是相同的。

我犹豫地接受了 cwyang 的回答，因为真正粘贴的是文本

```
My_PInstance-> 
```

和

```
data 
```

根据我（和用户……）的想法，结果是一个适当的标记。

```
My_PInstance->data 
```

所以，我坚持通过更多的谷歌结果。最终我找到了[这个人](http://complete-concrete-concise.com/programming/c/preprocessor-the-token-pasting-operator "完整、具体、简洁")，他给出了一个真正打击的历史记录。概括：

### 回到过去，存在一种古老的替代语法，但*没有编译器再*认识到这种胡说八道。甚至不要去那里。

男人。这家伙说没有希望了......

那么，到底是什么？我去了那儿。替代语法有效，我***几乎没有***使用古老的编译器！

```
g++ (GCC) 4.7.3
Copyright (C) 2012 Free Software Foundation, Inc. 
```

所以，对于所有勇敢的字符串化器、连接器和标记器（！），这是我给你的教训。

*前：*

```
#define PROFILING_START_CLK(STAT, n)                        \
    time0##STAT##n = PRF_CLK_FN();                          \
    profilingStatsIndex##STAT##n = STAT##.count % PROFILE_SIZE; \
    STAT#.count++; 
```

*如此称呼：*

```
PROFILING_START_CLK(tst, 0); 
```

*为使用它的每个地方返回 2 个以下错误实例：*

```
error: pasting "tst" and "." does not give a valid preprocessing token 
```

就像 user1159503 一样。

不过，继续前进.... **以下工作：**

```
#define PROFILING_START_CLK(STAT, n)                          \
    time0##STAT##n = PRF_CLK_FN();                            \
    profilingStatsIndex##STAT##n = STAT/**/.count % PROFILE_SIZE;\
---------------------------------------^^^^
    STAT/**/.count++;
--------^^^^ 
```

无论我是否使用 g++ -ansi 开关，之前/之后的版本都失败/编译。

它起作用的原因是因为预处理器在进入宏之前会去除注释，所以顺序是这样的。

1.  当 '/**/' 被剥离时，STAT 与 .count 邻接。
2.  避免了“##”过程。特别是，在代码的这一点上避免了它对有效结果令牌的检查。
3.  STAT 被字符串化为“tst”（在我的例子中）
4.  随后的解析/令牌检查发现“tst.count”非常合适和令人愉快。

'##' 是否应该在宏中组装任意结构和/或成员？我不知道。我会这么认为，但粘贴过程不跨越运算符似乎也是正确的。

否则，问题将是，“粘贴过程是否像我们在这里讨论的那样仅跨越“加入”运算符。（'.'，'->'，'::'，...）

# php - PHP 和 MySQL 的简单数据库抽象

> ID：13715425
> 
> 赞同：3
> 
> 时间：2012-12-05T02:36:37.057
> 
> 标签：php, data-access-layer, database-abstraction, ezsql

这是我在这里的第一篇文章，如果我可以改进这个问题，请告诉我。

我正在更新网站。简而言之：它处理用户订阅并跟踪销售（我生产的产品）。我想保留我的选项，以便在不久的将来为其添加新功能。它是使用 PHP 和 MySQL 构建的。

我已经有 5 年没有认真更新过代码了，我正试图抓住这个机会，让整个代码更易于管理和更新。特别是，我试图让与数据库的交互变得更好。

我玩过[ezSQL](http://justinvincent.com/ezsql)，它可以让我以非常简洁的方式与数据库交互，例如：

```
$users = $db->get_results("SELECT name, email FROM users");
foreach ( $users as $user ) {
    // Access data using object syntax
    echo $user->name;
    echo $user->email;
} 
```

我真的很喜欢它：我很快就得到了一个我可以使用的对象，它使代码更易于阅读，不像以前那样有那么多 mysql_* 函数，也没有到处都是 SQL 查询。

如果它对 SELECT 查询很好，那么它对 INSERT 语句没有太大帮助，我最终可能会得到如下所示的代码：

```
$db->query( "INSERT INTO    users    (name, email, date, hostname, cid, code, email_id, email_date, source, ebook, audiobook )
                            VALUES    ( '" . $db->escape( $user->name ) . "',
                                        '" . $db->escape( $user->email ) . "',
                                        '" . $db->escape( $user->date ) . "',
                                        '" . $db->escape( $user->hostname ) . "',
                                        '" . $db->escape( $user->cid ) . "',
                                        '" . $db->escape( $user->code ) . "',
                                        '" . $db->escape( $user->email_id ) . "',
                                        '" . $db->escape( $user->email_date ) . "',
                                        '" . $db->escape( $user->source ) . "',
                                        '" . $db->escape( $user->ebook ) . "',
                                        '" . $db->escape( $user->audiobook ) . "')"
                            ); 
```

它可能会更糟，但仍然不是那么好经历。对我来说最糟糕的是，它根本不像前面的例子那么简单。

因此，给定以下表结构和 PHP 对象：

```
$user = new User();
$user->name = 'something';
$user->email = 'something@example.com';
/// etc.

class User {
    var $name;
    var $email;
    // etc.
} 
```

我想要一个简单的库，可以让我这样做：

```
$user->insert(); 
```

...并为我将类的每个成员与数据库中同名的列匹配，并相应地插入数据。

我的问题是：有这样的图书馆吗？如果不是，为什么这是一个坏主意。

我一直在阅读有关 MVC 的内容，但我认为这对这个项目来说太过分了。它会增加无关紧要的复杂性而不是简单性。例如，我不需要脚手架，也不需要任何为我生成默认代码的东西。另外，我不想最终陷入一个对于这样一个简单的项目来说太过分的框架。

所以我一直对 PHP 的数据库抽象层（例如：ADOdb、PDO）很好奇，但我还不清楚它们主要是为了缩短编写代码（我的预期用途）还是为*各种*数据库编写代码更轻松。我不介意我的代码只适用于 MySQL。我只是想为了清楚起见而抽象它，而不是兼容性。

不必为 PHP 测试每个 DAL，有人可以根据经验和上述简单的预期用途提供反馈吗？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T04:45:45.040

RedBeanPHP 是用于您描述的目的的优秀库。这是我用过的最灵活的 ORM。有关CRUD 操作，请参见其[主页上](http://www.redbeanphp.com/)的示例：

```
$post = R::dispense('post');
$post->text = 'Hello World';

$id = R::store($post);      //Create or Update
$post = R::load('post',$id); //Retrieve
R::trash($post);            //Delete 
```

这个库足够灵活，可以即时生成数据库表，因此您不必乱用模式。许多人认为这是一项功能——我通常将其关闭，因为我更喜欢手动调整我的表格。尽管如此，一个简单的调用`R::freeze()`将禁用该功能。无论如何，在投入生产之前确保模式被冻结是很重要的。

RedBeanPHP 还处理数据库表之间的关系，如果您想查看在后台执行了哪些查询（同样，只需调用`R::debug()`），它还具有简单的调试功能。它作为数据库抽象层非常强大，但如果您不想使用，则不必使用所有花哨的花里胡哨。包含库后，它或多或少是开箱即用的。

强烈推荐，特别是为了您的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T02:59:27.797

如果您想要一种可移植的方式来访问 PHP 中跨多个数据库后端的数据，请使用内置的 PDO 库。如果您想减少手写 SQL 的数量，您可能需要考虑使用众多 PHP ORM 之一，例如 Doctrine。

# django - 如何继承 django.contrib.gis.db.models.fields.PointField？

> ID：13715428
> 
> 赞同：0
> 
> 时间：2012-12-05T02:36:49.890
> 
> 标签：django, gis, geodjango

我有一个[`django.contrib.gis.geos.point.Point`](https://github.com/django/django/blob/1.4.2/django/contrib/gis/geos/point.py#L6)子类：

```
from django.contrib.gis.geos import Point

class Location(Point):
    def __init__(self, *args, **kwargs):
        lat = kwargs.get('latitude')
        lng = kwargs.get('longitude')

        if lat and lng:
            super(Location, self).__init__(lng, lat)
        elif lat or lng:
            raise TypeError(u'You must declare latitude and longitude, not '
                'just one of them.')
        else:
            super(Location, self).__init__(*args, **kwargs)

        self.__class__ = Location

    def __unicode__(self):
        c = self.coordinates()
        return u'Location <Lat: %.5f, Lng: %.5f>' % (c['latitude'],
            c['longitude']) 

    def __str__(self):
        return unicode(self).encode('utf-8')

    def coordinates(self):
        return {
            'latitude': self.coords[1], 
            'longitude': self.coords[0]
        } 
```

请注意，与 super 相比，此类没有额外的信息。它只有额外的方法来促进其使用。

如何创建一个[`django.contrib.gis.db.models.fields.PointField`](https://github.com/django/django/blob/1.4.2/django/contrib/gis/db/models/fields.py#L268)子类来使用`Location`？如果我`PointField`直接使用，它允许我存储 a `Location`（因为它本质上是 a `Point`），但是当我检索它的内容时，它会返回 a `Point`。

我怎样才能做到这一点？

# android - 安装后隐藏android应用程序图标

> ID：13715432
> 
> 赞同：6
> 
> 时间：2012-12-05T02:37:10.660
> 
> 标签：android

我已经看到谷歌应用程序上有一些 GPS 应用程序，安装后，该应用程序将没有图标显示，但会在后台运行服务。

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T02:59:36.123

要从启动器中删除应用程序，请不要将这些行与主活动放在一起 `AndroidManifest.xml`

```
<intent-filter>
  <action android:name="android.intent.action.MAIN" />
  <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

如果您想以编程方式将其删除，则使用[PackageManager.setComponentEnabledSetting](http://developer.android.com/reference/android/content/pm/PackageManager.html)将其从启动器中删除：

```
 ComponentName componentToDisable =
  new ComponentName("com.xxx.apptodisable",
  "com.xxx.apptodisable.LauncherActivity");

  getPackageManager().setComponentEnabledSetting(
  componentToDisable,
  PackageManager.COMPONENT_ENABLED_STATE_DISABLED,
  PackageManager.DONT_KILL_APP); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T02:58:34.987

使用此代码

```
PackageManager p = getApplicationContext().getPackageManager(); 
p.setComponentEnabledSetting(getComponentName(),PackageManager.COMPONENT_ENABLED_STATE_DISABLED, PackageManager.DONT_KILL_APP); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-21T05:30:48.437

从启动器中隐藏应用程序图标的最佳方法可以`<category android:name="android.intent.category.LEANBACK_LAUNCHER"/>`在清单 MainActivity 中使用

```
 <activity android:name=".MainActivity">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LEANBACK_LAUNCHER"/>
        </intent-filter>
    </activity> 
```

还添加使用功能

```
<uses-feature
    android:name="android.software.leanback"
    android:required="true" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T02:56:58.453

只是不要使用`android.intent.category.LAUNCHER`类别意图过滤器实现 Activity，并且服务接收启动广播。

# objective-c - 是否可以获得 UIButton 的当前背景颜色？

> ID：13715434
> 
> 赞同：0
> 
> 时间：2012-12-05T02:37:56.130
> 
> 标签：objective-c, ios, xcode

我知道 UIButtons 的 currentBackgroundImage 属性，但无论如何可以从 UIButton 获取简单的 backgroundColor 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T02:50:44.633

如果我的问题正确，您只想获取按钮的背景颜色并存储它？

```
UIColor* buttonColor = button.backgroundColor; 
```

`backgroundColor`是一个`copy`同时具有 setter 和 getter 的属性。您可以使用点符号来简化事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:02:05.223

根据您的问题，答案只能是“是”或“否”。

但我想解释一下，**是的，您可以检索**并设置 UIButton 的背景颜色。

```
UIButton *blueButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
//for setting
blueButton.backgroundColor = [UIColor colorWithRed:0.0f 
                                             green:0.0f
                                              blue:1.0 
                                               pha:1.0]; 
//for getting
UIColor *myBlueButtonColor = blueButton.backgroundColor; 
```

# objective-c - 如何检查视图是否在 ViewHierarchy 中？

> ID：13715435
> 
> 赞同：10
> 
> 时间：2012-12-05T02:38:23.540
> 
> 标签：objective-c, xcode4.5

例如，如果 viewController 的视图在 viewHierarchy 中，而我刚刚完成下载内容，我想快速更新内容。如果 self.view 不在 viewHierarchy 中，我想推迟更新。

我想，我可以添加一个布尔变量来表明这一点，并将其放在 viewWillAppear 和 viewWillDisappear 上。

我还可以扫描窗口并查看 UIView 是否在 viewHierarchy 中。

有没有更直接的方法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-05T02:48:27.920

As of iOS 9.0, in Swift, you can do this in your view controller:

```
if viewIfLoaded?.window != nil {
    // view should be updated
} 
```

or this if you want to actually use the view:

```
if let view = viewIfLoaded, view.window != nil {
    // update view
} 
```

For older versions of iOS, in Objective-C:

```
if (self.isViewLoaded && self.view.window != nil) {
    // view is in a view hierarchy and should be updated
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T03:05:59.080

我认为只有在视图加载完成后才会触发 viewDidLoad。因此，我认为您可以在 viewDidLoad 本身中添加必要的功能。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-12-05T15:15:29.687

要检查它是否不在视图层次结构中，这就足够了：

```
// From a UIViewController sub-class
if !self.isViewLoaded {
    // view is not in the view hierarchy
} 
```

# javascript - Javascript 从许多选择列表中获取选定索引

> ID：13715436
> 
> 赞同：0
> 
> 时间：2012-12-05T02:38:24.740
> 
> 标签：javascript, html, forms

我正在尝试创建用户可以从选择列表中单击的政府网站类别，他们将被定向到该位置。问题是我无法从这么多选择列表中获得 selectedIndex，或者我可能在其他地方搞砸了。选项值包含链接。这是一个可以使用的[JSFiddle](http://jsfiddle.net/By4v4/)链接。

HTML

```
<p>Select a site from one of the drop-down lists below.</p>
<table>
   <tr><td>Executive Branch</td>
       <td><select name="executive" id="executive" class="optionLinks">
           <option value="#">Select a Web site</option>
           <option value="http://www.whitehouse.gov">The White House</option>
           <option value="http://www.usda.gov">Department of Agriculture</option>
           <option value="http://www.doc.gov">Department of Commerce</option>
           <option value="http://www.defenselink.mil">Department of Defense</option>
           <option value="http://www.ed.gov">Department of Education</option>
           <option value="http://www.energy.gov">Department of Energy</option>
           <option value="http://www.os.dhhs.gov">Department of Health and Human Services</option>
           <option value="http://www.whitehouse.gov/homeland">Department of Homeland Security</option>
           <option value="http://www.hud.gov">Department of Housing and Urban Development</option>
           <option value="http://www.doi.gov">Department of the Interior</option>
           <option value="http://www.usdoj.gov">Department of Justice</option>
           <option value="http://www.dol.gov">Department of Labor</option>
           <option value="http://www.state.gov">Department of State</option>
           <option value="http://www.ustreas.gov">Department of the Treasury</option>
           </select>
       </td>
   </tr>
   <tr><td>Legislative Branch</td>
       <td><select name="legislative" id="legislative" class="optionLinks">
           <option value="#">Select a Web site</option>
           <option value="http://www.house.gov">House Web Site</option>
           <option value="http://www.house.gov/house/MemberWWW.shtml">Representatives' Web Sites</option>
           <option value="http://clerk.house.gov/">Clerk of the House</option>
           <option value="http://www.gpoaccess.gov/cdirectory/index.html">Congressional Directory</option>
           <option value="http://www.senate.gov">Senate Web Site</option>
           <option value="http://www.senate.gov/general/contact_information/senators_cfm.cfm">Senators' Web Sites</option>
           <option value="http://www.senate.gov/artandhistory/history/common/generic/Senate_Historical_Office.htm">Senate Historic Office</option>
           <option value="http://www.cq.com">Congressional Quarterly</option>
           <option value="http://www.loc.gov/">Library of Congress</option>
           <option value="http://www.gao.gov/">Government Accountability Office</option>
           <option value="http://www.cbo.gov/">Congressional Budget Office</option>
           <option value="http://www.gpoaccess.gov/">Government Printing Office</option>
           <option value="http://thomas.loc.gov/home/legbranch/otherleg.html#govpub">Government Records and Publications</option>
           </select>
       </td>
   </tr>
   <tr><td>Judicial Branch</td>
       <td><select name="judicial" id="judicial" class="optionLinks">
           <option value="#">Select a Web site</option>
           <option value="http://www.uscourts.gov">U.S. Courts</option>
           <option value="http://www.uscourts.gov/supremecourt.html">U.S. Supreme Court</option>
           <option value="http://www.uscourts.gov/courtsofappeals.html">U.S. Courts of Appeals</option>
           <option value="http://www.uscourts.gov/districtcourts.html">U.S. District Courts</option>
           </select>
       </td>
   </tr>
   <tr><td>State Governments</td>
       <td><select name="state" id="state" class="optionLinks">
           <option value="#">Select a Web site</option>
           <option value="http://www.statelocalgov.net/index.cfm">State and Local Government on the Net</option>
           <option value="http://www.loc.gov/global/state/al-gov.html">Alabama</option>
           <option value="http://www.loc.gov/global/state/ak-gov.html">Alaska</option>
           <option value="http://www.loc.gov/global/state/az-gov.html">Arizona</option>
           <option value="http://www.loc.gov/global/state/ar-gov.html">Arkansas</option>
           <option value="http://www.loc.gov/global/state/ca-gov.html">California</option>
           <option value="http://www.loc.gov/global/state/co-gov.html">Colorado</option>
           <option value="http://www.loc.gov/global/state/ct-gov.html">Connecticut</option>
           <option value="http://www.loc.gov/global/state/de-gov.html">Delaware</option>
           <option value="http://www.loc.gov/global/state/dc-gov.html">District of Columbia</option>
           <option value="http://www.loc.gov/global/state/fl-gov.html">Florida</option>
           <option value="http://www.loc.gov/global/state/ga-gov.html">Georgia</option>
           <option value="http://www.loc.gov/global/state/hi-gov.html">Hawaii</option>
           <option value="http://www.loc.gov/global/state/id-gov.html">Idaho</option>
           <option value="http://www.loc.gov/global/state/il-gov.html">Illinois</option>
           <option value="http://www.loc.gov/global/state/in-gov.html">Indiana</option>
           <option value="http://www.loc.gov/global/state/ia-gov.html">Iowa</option>
           <option value="http://www.loc.gov/global/state/ks-gov.html">Kansas</option>
           <option value="http://www.loc.gov/global/state/ky-gov.html">Kentucky</option>
           <option value="http://www.loc.gov/global/state/la-gov.html">Louisana</option>
           <option value="http://www.loc.gov/global/state/me-gov.html">Maine</option>
           <option value="http://www.loc.gov/global/state/md-gov.html">Maryland</option>
           <option value="http://www.loc.gov/global/state/ma-gov.html">Massachusetts</option>
           <option value="http://www.loc.gov/global/state/mi-gov.html">Michigan</option>
           <option value="http://www.loc.gov/global/state/mn-gov.html">Minnesota</option>
           <option value="http://www.loc.gov/global/state/ms-gov.html">Mississippi</option>
           <option value="http://www.loc.gov/global/state/mo-gov.html">Missouri</option>
           <option value="http://www.loc.gov/global/state/mn-gov.html">Montana</option>
           <option value="http://www.loc.gov/global/state/ne-gov.html">Nebraska</option>
           <option value="http://www.loc.gov/global/state/nv-gov.html">Nevada</option>
           <option value="http://www.loc.gov/global/state/nh-gov.html">New Hampshire</option>
           <option value="http://www.loc.gov/global/state/nj-gov.html">New Jersey</option>
           <option value="http://www.loc.gov/global/state/nm-gov.html">New Mexico</option>
           <option value="http://www.loc.gov/global/state/ny-gov.html">New York</option>
           <option value="http://www.loc.gov/global/state/nc-gov.html">North Carolina</option>
           <option value="http://www.loc.gov/global/state/nd-gov.html">North Dakota</option>
           <option value="http://www.loc.gov/global/state/oh-gov.html">Ohio</option>
           <option value="http://www.loc.gov/global/state/ok-gov.html">Oklahoma</option>
           <option value="http://www.loc.gov/global/state/or-gov.html">Oregon</option>
           <option value="http://www.loc.gov/global/state/pa-gov.html">Pennsylvania</option>
           <option value="http://www.loc.gov/global/state/ri-gov.html">Rhode Island</option>
           <option value="http://www.loc.gov/global/state/sc-gov.html">South Carolina</option>
           <option value="http://www.loc.gov/global/state/sd-gov.html">South Dakota</option>
           <option value="http://www.loc.gov/global/state/tn-gov.html">Tennessee</option>
           <option value="http://www.loc.gov/global/state/tx-gov.html">Texas</option>
           <option value="http://www.loc.gov/global/state/ut-gov.html">Utah</option>
           <option value="http://www.loc.gov/global/state/vt-gov.html">Vermont</option>
           <option value="http://www.loc.gov/global/state/va-gov.html">Virginia</option>
           <option value="http://www.loc.gov/global/state/wa-gov.html">Washington</option>
           <option value="http://www.loc.gov/global/state/wv-gov.html">West Virginia</option>
           <option value="http://www.loc.gov/global/state/wi-gov.html">Wisconsin</option>
           <option value="http://www.loc.gov/global/state/wy-gov.html">Wyoming</option>
           </select>
       </td>
   </tr>
</table>​ 
```

Javascript

```
window.onload = init;

function init()
{
    var allSelect = document.getElementsByTagName('select');

    for(var i = 0; i < allSelect.length; i++)
        allSelect[i].addEventListener('onchange', loadLink());
}

function loadLink()
{
    var allSelect = document.getElementsByTagName('select');

    for(var i = 0; i < allSelect.length; i++)
        if(allSelect[i].selectedIndex > 0)
            alert(allSelect[i].options[selectedIndex].value);
}​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T02:48:30.530

When you call `addEventListener` you need to pass a reference to a function, but you were *calling* the function by including parentheses after it. Also when using `addEventListener` the event is `'change'`, not `'onchange'` (drop the "on" from all events for use with `addEventListener`). So:

```
allSelect[i].addEventListener('onchange', loadLink());    // is NOT correct
allSelect[i].addEventListener('change', loadLink);        // is correct 
```

Also in this line of your second function:

```
alert(allSelect[i].options[selectedIndex].value); 
```

You were using a variable `selectedIndex` that isn't defined. That line should've been:

```
alert(allSelect[i].options[allSelect[i].selectedIndex].value); 
```

Also in your fiddle you weren't actually calling `init()`.

Here's a "working" version:

```
window.onload = init;

function init()
{
    var allSelect = document.getElementsByTagName('select');

    for(var i = 0; i < allSelect.length; i++)
        allSelect[i].addEventListener('change', loadLink, false);    
}

function loadLink()
{
    var allSelect = document.getElementsByTagName('select');

    for(var i = 0; i < allSelect.length; i++)
        if(allSelect[i].selectedIndex > 0)
            alert(allSelect[i].options[allSelect[i].selectedIndex].value);
} 
```

Demo: [http://jsfiddle.net/By4v4/5/](http://jsfiddle.net/By4v4/5/)

Do you really want to loop through *all* select elements every time one of them changes? You can do this to get the value of the one that changed:

```
function loadLink()
{
    alert(this.value);
} 
```

Demo: [http://jsfiddle.net/By4v4/12/](http://jsfiddle.net/By4v4/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T02:50:02.837

您没有调用该函数`init()`，也没有像 jsfiddle 中的示例一样分配事件，但请查看以下示例

[JSFiddle 演示](http://jsfiddle.net/By4v4/11/)

# apache - Slim aways 显示 404 错误页面

> ID：13715439
> 
> 赞同：0
> 
> 时间：2012-12-05T02:38:44.890
> 
> 标签：apache, .htaccess, xampp, http-status-code-404, slim

我正在尝试在 XAMPP 或 MAC OS 的本机 Apache 服务器下在我的 Mac 上测试 Slim，但任何人都可以工作。按照代码：

```
<?

require 'Slim/Slim.php';

\Slim\Slim::registerAutoloader();

$app = new \Slim\Slim();

$app->get('/', function () {
    echo '<h1>Sample test!!!</h1>';
});

// POST route
$app->post('/post', function () {
    echo 'This is a POST route';
});

// PUT route
$app->put('/put', function () {
    echo 'This is a PUT route';
});

// DELETE route
$app->delete('/delete', function () {
    echo 'This is a DELETE route';
});

$app->run();

?> 
```

查看 GET 函数回调只打印 H1 文本。

我的 .htaccess 内容：

```
RewriteEngine On

# Some hosts may require you to use the `RewriteBase` directive.
# If you need to use the `RewriteBase` directive, it should be the
# absolute physical path to the directory that contains this htaccess file.
#
# RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [QSA,L] 
```

我没有更改在 Slim 网站上获得的原始文件中的任何内容，并且在浏览器上一直显示 404 错误！

有人可以帮帮我吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:46:23.453

我使用的是 5.2.x 版本而不是 5.3.x！

# python - “金字塔”生成器的问题（在 IDLE 中）

> ID：13715440
> 
> 赞同：0
> 
> 时间：2012-12-05T02:38:56.517
> 
> 标签：python, function, python-3.x

对于我的编程课，我必须创建一个程序来创建一个“金字塔”（在 IDLE 中），如下所示：

```
 1 
            1 2 1 
          1 2 4 2 1 
        1 2 4 8 4 2 1 
      1 2 4 8 16 8 4 2 1 
```

它会在`2**(row)`哪里`row = 0`（最初）。它在`for`循环中使用。

`n`它提出了一个问题，即对于大于 5的值，输出不会像预期的那样出现。

到目前为止，这是我的代码：

```
def pyramid(n):
   rows, num, x, numbers, space_length, i_length = 0, '', 0, {}, 0, 0
   for rows in range(n):
      x = int(len(num) / 2)
      y = str(2**rows) + ' '
      num = num[0:x + 1] + y + num[x - 1 :]
      numbers[rows + 1] = num
   space_length = int(len(numbers[n]) / 2)
   for i in numbers:
      i_length = int(space_length - (len(numbers[i]) / 2))
      numbers[i] = (' ' * i_length) + numbers[i]
      print(numbers[i])

def main():    #I have to use the function of main() because my teacher requires it.
   n = int(input("Enter an integer greater than 0: "))
   if type(n) != int or n <= 0:
      raise TypeError("N must be an integer greater than 0.")
   pyramid(n)

main() 
```

这是我得到的输出：

```
>>> 
Enter an integer greater than 0: 10
                      1 
                    1 2 1 
                  1 2 4 2 1 
                1 2 4 8 4 2 1 
              1 2 4 8 16 8 4 2 1 
           1 2 4 8 1632 16 8 4 2 1 
         1 2 4 8 1632 64 2 16 8 4 2 1  #The 2 should be 32; space between 16 and 32.
      1 2 4 8 1632 64128 64 2 16 8 4 2 1    #Same thing again; spacing messes up.
   1 2 4 8 1632 64128256 28 64 2 16 8 4 2 1 
1 2 4 8 1632 64128256512 56 28 64 2 16 8 4 2 1 
```

如果有人可以帮我解决这个问题，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:07:15.057

这是你想要的？

```
def pyramid(n):
   rows, num, x, numbers, space_length, i_length = 0, '', 0, {}, 0, 0
   for rows in range(n):
      x = int(len(num) / 2)
      y = str(2**rows) + '  '
      num = num[0:x + 2:] + y + num[x - 1:]
      numbers[rows + 1] = num
   space_length = int(len(numbers[n]) / 2)
   for i in numbers:
      i_length = int(space_length - (len(numbers[i]) / 2))
      numbers[i] = (' ' * i_length) + numbers[i]
      print(numbers[i])

def main():    #I have to use the function of main() because my teacher requires it.
   n = int(input("Enter an integer greater than 0: "))
   if type(n) != int or n <= 0:
      raise TypeError("N must be an integer greater than 0.")
   pyramid(n)

main() 
```

输出：

```
 1  
                             1  2  1  
                          1  2  4  2  1  
                       1  2  4  8  4  2  1  
                   1  2  4  8  16  8  4  2  1  
                1  2  4  8  16  32  6  8  4  2  1  
            1  2  4  8  16  32 64  32  6  8  4  2  1  
        1  2  4  8  16  32 64  128  4  32  6  8  4  2  1  
    1  2  4  8  16  32 64  128 256  28  4  32  6  8  4  2  1  
1  2  4  8  16  32 64  128 256 512  56  28  4  32  6  8  4  2  1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:18:44.623

The code shown below works fine for the values of n that I tested (1 to 20). Note, in Python 2.7 and later the format `'{:{}}'` says to print two items, the first being the value to print, and the second the field width to print it in. (2.6 may require field numbers, eg `'{0:{1}}'`, which I haven't tested.) The expression `2**min(x, 2*i-x)` is used to generate sequences like 1 2 4 2 1 and 1 2 4 8 16 32 64 128 64 32 16 8 4 2 1 that count up and then back down. Array f holds field widths corresponding to the largest numbers in the table, *ie* those in the bottom line. `sum(f[:n-i])` is the sum of the field widths prior to the first number printed in a line. Note, the `print ... ,` form prints a separating space and does not advance to a new line. Some example output is shown after the code.

```
def pyramid(n):
    f = [1+len(str(2**min(i, 2*n-i-2))) for i in range(1+2*n)]
    for i in range(n):
        for x, w in zip(range(1+2*i), [sum(f[:n-i])]+f[n-i:]):
            print '{:{}}'.format(2**min(x, 2*i-x), w-1),
        print

pyramid(5)
pyramid(10)
for i in range(21):
    pyramid(i) 
```

Example output for n=15:

```
 1
                                               1     2    1
                                          1    2     4    2    1
                                     1    2    4     8    4    2    1
                                1    2    4    8    16    8    4    2    1
                           1    2    4    8   16    32   16    8    4    2   1
                       1   2    4    8   16   32    64   32   16    8    4   2   1
                   1   2   4    8   16   32   64   128   64   32   16    8   4   2   1
               1   2   4   8   16   32   64  128   256  128   64   32   16   8   4   2  1
            1  2   4   8  16   32   64  128  256   512  256  128   64   32  16   8   4  2  1
         1  2  4   8  16  32   64  128  256  512  1024  512  256  128   64  32  16   8  4  2  1
      1  2  4  8  16  32  64  128  256  512 1024  2048 1024  512  256  128  64  32  16  8  4  2 1
    1 2  4  8 16  32  64 128  256  512 1024 2048  4096 2048 1024  512  256 128  64  32 16  8  4 2 1
  1 2 4  8 16 32  64 128 256  512 1024 2048 4096  8192 4096 2048 1024  512 256 128  64 32 16  8 4 2 1
1 2 4 8 16 32 64 128 256 512 1024 2048 4096 8192 16384 8192 4096 2048 1024 512 256 128 64 32 16 8 4 2 1 
```

*Edit:* Following is a slightly longer version of the program, with intermediate variables and two functions introduced to improve readability.

```
def pyramid(n):
    def fieldsize(m):
        return 1+len(str(m))
    def numbers(m):
        return [2**min(j, 2*m-j) for j in range(1+2*m)]
    widths = [fieldsize(x) for x in numbers(n-1)]
    for i in range(n):
        wides = [sum(widths[:n-i])] + widths[n-i:]
        for v, w in zip(numbers(i), wides):
            print '{:{}}'.format(v, w-1),
        print

for i in range(21):
    pyramid(i) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T03:02:34.250

错误是，您需要为每个循环清除字符串“num”，并为字符串注入清除错误的结束位置

并建议使用 list for string concact

```
a = [1, 2, 4, 2, 1]
s = ' '.join([str(x) for x in a]) 
```

# templates - angular.js 中的模板 - 继承

> ID：13715441
> 
> 赞同：11
> 
> 时间：2012-12-05T02:39:06.200
> 
> 标签：templates, angularjs

作为服务器端 Web 框架用户（我使用 Django），我喜欢模板的组织方式。基本模板的页面标题、css、js、页眉和页脚被定义为块，可以在子模板中覆盖。

Angular 的做法是什么？

每个页面的内容当然是由ng-view提供的，除此之外，我也无能为力。例如，标题标签在视图之外，我无法动态更改它。

最好给我一个完整项目的示例代码，看看模板是如何组织的。大多数示例项目都很小，不需要在模板中继承。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T21:23:36.853

Django 的模板非常好，但请记住 Angular 主要用于构建 SPA（单页应用程序），因此它在概念上有所不同。在典型的 Angular 项目中，您将让服务器端框架生成基本模板，然后将路由交给 Angular 处理其他所有内容，并且根据路由有条件地包含内容部分。

Django 和 Angular 模板之间的一个相似之处是 ng-include 指令，它可以让你吸收一些可重用的 html。但是没有什么类似于 Django 的 {{block}} 或 {{block super}} 系统。

你可以编写一个自定义指令来引入额外的 css/javascript 而不是使用 {{block extrahead}}。

对于动态标题标签，您需要确保将控制器元素设置在头元素上方，否则它将超出范围，因此无法访问。我们在基本模板中这样做：

```
<title data-ng-bind="title">Oursite</title> 
```

然后在该 URL 的控制器中：

```
$rootScope.title = 'Dashboard | Oursite'; 
```

[此](https://groups.google.com/forum/#!msg/angular/xG-zIC-xBXE/5mwaEwAm-QUJ)线程中的其他建议方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-26T15:29:43.583

看看受 Jade、Handlebars 和 Django 或更简单的[ng-layout启发的](https://github.com/akatov/ng-layout)[angular-blocks](https://github.com/wmluke/angular-blocks)。

# android - android 使用 mqtt 推送通知

> ID：13715442
> 
> 赞同：1
> 
> 时间：2012-12-05T02:39:06.033
> 
> 标签：android, mqtt

当客户端首次连接到服务器时，如何将信息从 android 设备保存到数据库，以便我知道应该将通知推送到哪个设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:57:40.707

[首先，在 MQTT.org wiki](http://mqtt.org/wiki/doku.php/mqtt_on_the_android_platform)上有很多关于 Android 上 MQTT 的重要信息。

这个问题不是关于 Android 或 MQTT，而是关于唯一地识别客户端设备，以及管理后端服务上的数据。这里没有单一的答案，但是您的设备的 MQTT ClientID / 标识符必须是唯一的，例如，您需要在客户端生成一个标识符，该标识符在连接到代理之前是唯一的。您可能还想为该设备的推送通知建立一个特定主题。最初配置新客户端时，将该信息存储到您选择的数据库中，以便您了解用于处理单个设备的主题。

# drupal-7 - 指定角色的 Drupal 安全性

> ID：13715447
> 
> 赞同：1
> 
> 时间：2012-12-05T02:39:36.220
> 
> 标签：drupal-7

我的安全有些问题。我想为我的网站管理员添加安全问题，我找到了“安全问题”模块。它工作得很好，但对于经过身份验证的用户，而不是管理员。我想在登录后只为管理员检查安全问题，而不是为用户检查。我尝试阅读该模块的 .module 文件，但很难理解。那么，我该如何处理该模块。非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:17:53.717

如果你查看 .module 文件，你会发现这一行，第 377 行

`function _security_questions_user_login(&$form, &$form_state, $form_id) {`

这是更改用户登录表单以包含您的安全问题的功能。

我建议添加一条`if`语句来满足您的条件，例如：

```
global $user;

// Don't alter form if user isn't an administrator
if (!in_array('administrator', array_values($user->roles))) {
  return;
} 
```

完成此操作后，您需要做的就是转到权限页面并**取消选中**允许管理员**绕过安全问题**的框。

# c# - UI 中显示的情节提要文本

> ID：13715451
> 
> 赞同：1
> 
> 时间：2012-12-05T02:39:55.197
> 
> 标签：c#, xaml, windows-phone-8

我正在尝试通过 XAML 在 UI 中实现故事板。由于某种原因，它作为项目之一显示在屏幕上（可以理解，因为它在全景图中）。但是，无论我将它移到哪里，它都被认为是无效的，并且 VS 在城镇上突出显示它是无效的。

我正在使用的代码如下：

```
<Grid x:Name="LayoutRoot">
    <phone:Panorama Title="The Journey" RenderTransformOrigin="0.5,0.5" Margin="0,-1.492,2.985,0.001" UseLayoutRounding="False" d:LayoutRounding="Auto" Loaded="Panorama_Loaded_1">
        <phone:Panorama.RenderTransform>
            <CompositeTransform Rotation="0.03"/>
        </phone:Panorama.RenderTransform>
        <phone:PanoramaItem Header="Journey Name" Name="journeyName"/>
        <phone:PanoramaItem Header="">
            <Grid/>
        </phone:PanoramaItem>
        <BeginStoryboard>
            <Storyboard>
                <ColorAnimation Storyboard.TargetName="journeyName"
                            From="Blue"
                            To="White"
                            Duration="0:0:3"
                            AutoReverse="True"
                            />
            </Storyboard>
        </BeginStoryboard>
    </phone:Panorama>
</Grid> 
```

结果我得到了类似的东西

```
System.Windows.Media.Animation.BeginAnimation 
```

作为其中一项的文本。

有任何想法吗？我对 XAML 很陌生，所以我不太熟悉它的结构规则。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:34:17.173

我没有花时间测试你的东西，但从外观上看，你有几个问题。对于初学者来说，中间有一个损坏的`</Grid>`结束标签。其次，您需要将您的故事板声明为您正在使用的任何资源。您还需要一种通过某个事件调用它的方法（将由您决定），并且您没有将属性定位在您希望与之交互的对象上。因此，让您初步了解您的出发点；

```
<Grid x:Name="LayoutRoot">
   <Grid.Resources>
       <BeginStoryboard>
            <Storyboard>
                <ColorAnimation Storyboard.TargetName="journeyName"
                            <!-- Not sure what property it is you're 
                                 trying to interact with here, replace
                                 "Property" with whatever it is... -->
                            Storyboard.TargetProperty="Property"
                            From="Blue"
                            To="White"
                            Duration="0:0:3"
                            AutoReverse="True"
                            />
            </Storyboard>
        </BeginStoryboard>
      </Grid.Resources>
    <phone:Panorama Title="The Journey" RenderTransformOrigin="0.5,0.5" Margin="0,-1.492,2.985,0.001" UseLayoutRounding="False" d:LayoutRounding="Auto" Loaded="Panorama_Loaded_1">
        <phone:Panorama.RenderTransform>
            <CompositeTransform Rotation="0.03"/>
        </phone:Panorama.RenderTransform>
        <phone:PanoramaItem Header="Journey Name" Name="journeyName"/>
        <phone:PanoramaItem Header="">
        </phone:PanoramaItem>       
    </phone:Panorama>
</Grid> 
```

不过，我也可能建议您快速访问 google 机器并进行快速教程搜索以了解一些[基础知识](https://www.google.com/search?q=xaml%20storyboard%20animation%20tutorial)。此外，Expression Blend 使任何类型的故事板工作变得更加轻松和高效，因此它也值得研究。希望这会有所帮助，干杯！

# visual-studio-2010 - 通过 Visual Basic 复制超链接

> ID：13715453
> 
> 赞同：0
> 
> 时间：2012-12-05T02:40:30.630
> 
> 标签：visual-studio-2010, hyperlink, copy

我试图弄清楚如何通过 Visual Basic 复制超链接。

```
Private Sub Timer1_Tick(sender As System.Object, e As System.EventArgs) Handles Search.Tick
    If Me.WebBrowser1.ReadyState = WebBrowserReadyState.Complete Then
        PageText = WebBrowser1.Document.Body.InnerText
        If InStr(PageText, SearchText) > 0 Then
            Search.Enabled = False
            isThere()
        Else
            WebBrowser1.Refresh()
        End If
    End If
End Sub 
```

所以我到了那里，一旦在网页上找到“searchText”，我想复制与之关联的超链接。一旦找到该文本，它将附加一个超链接，我不知道如何复制它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:07:33.150

一种选择是使用 HtmlAgilityPack，可[在此处](http://htmlagilitypack.codeplex.com)获得。使用它，您可以使用 XPath 查询根据其文本获取超链接。

此示例按名称获取 StackOverflow 主页顶部“Ask Question”超链接的 URL：

```
Dim htmlDoc As New HtmlAgilityPack.HtmlDocument()
htmlDoc.LoadHtml(WebBrowser1.Document.Body.OuterHtml)
Dim node As HtmlAgilityPack.HtmlNode = htmlDoc.DocumentNode.SelectSingleNode("//a[text()=""Ask Question""]")
Dim attr As HtmlAgilityPack.HtmlAttribute = node.Attributes("href")
Dim url As String = attr.Value 
```

此外，顺便说一句，HtmlAgilityPack 能够直接从 URL 加载文档，这意味着您不必使用 WebBrowser 控件，除非您另有需要。

```
Dim web As New HtmlAgilityPack.HtmlWeb()
Dim htmlDoc As HtmlAgilityPack.HtmlDocument = web.Load("http://www.stackoverflow.com") 
```

# android - 实现 Zip 阅读器

> ID：13715454
> 
> 赞同：0
> 
> 时间：2012-12-05T02:40:57.047
> 
> 标签：android, zip, filereader, zipfile

好吧，我一直在寻找如何做到这一点，但我没有找到任何可以指导我的东西。这怎么能做到？我不是要你为我编写代码，只是告诉我从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:02:50.413

使用 ZipInnputStream ..[请参阅此处的参考](http://developer.android.com/reference/java/util/zip/ZipInputStream.html)

# ios - 创建一个 UIImageView 裁剪图像并在 50x 和 200y 时仅显示 100w 100h

> ID：13715456
> 
> 赞同：26
> 
> 时间：2012-12-05T02:41:09.323
> 
> 标签：ios, uiimageview

我正在尝试创建一个在我的 xcode 应用程序中弹出的框，该框仅显示该大小的图像。我有以下

```
UIImageView *newView=[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"beach.jpg"]]; 
```

但这会创建完整尺寸的图像并仅显示它。我如何在 50 以上和 200 下仅将其显示为 100w x 100h？我会使用 CGRect 吗？

另外，我可以让它点击它会导致它消失吗？

**编辑#1** 我不想缩小图像的大小 - 宁愿只拉出 100 个平方像素并将它们放在一个框架中。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-12-05T02:45:22.917

Please try using the following code.

```
MyImageview.contentMode = UIViewContentModeScaleAspectFill; 
MyImageview.clipsToBounds = YES; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-02-12T07:28:41.130

您可以使用以下代码裁剪图像：

```
CGRect cropRegion = CGRectMake(50, 200, 100, 100);
UIImage *image = [UIImage imageNamed:@"beach.jpg"];
CGImageRef subImage = CGImageCreateWithImageInRect(image.CGImage, cropRegion);
UIImage *croppedImage = [UIImage imageWithCGImage:subImage];
UIImageView *newView = [[UIImageView alloc] initWithImage:croppedImage]; 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-12-15T04:48:54.337

您还可以通过选中情节提要中的**Clip Subviews**选项来实现裁剪效果。

[![在此处输入图像描述](../Images/44b65bd91bfae30f337a33c39bce2d2a.png)](https://i.stack.imgur.com/TY4S5.png)

**或Swift 4+**代码中的等效设置

 **```
imageView.contentMode = .scaleAspectFill
imageView.clipsToBounds = true 
```**

# android - android服务广播（一个提醒功能）

> ID：13715459
> 
> 赞同：2
> 
> 时间：2012-12-05T02:41:33.213
> 
> 标签：android, service, broadcastreceiver, alarmmanager, broadcast

我想在我的应用程序中有一个提醒功能（通过设置提醒时间），使用通知。而且我知道可能使用过服务，广播和警报管理器，

我怎样才能完成这个功能？

我认为有两种方法：

1.  使用服务，通知服务中
2.  使用服务发送广播，通知在broadcastReceiver

第一个问题：

1.  哪种方式正确或更好？
2.  如何使用该警报管理器？这像java中的Timer类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T02:52:07.197

最简单和最有效的方法是将[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)用于提醒之类的事情。您将需要制作一个接收警报的[广播](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)接收器。您的接收者可以发出[通知](http://developer.android.com/reference/android/app/Notification.Builder.html)，因为`onReceive()`接收者的方法也接受一个`Context`参数。要制作警报，您必须获取 AlarmManager 类的实例，使用您需要的内容制作 PendingIntent，然后实际设置警报。

设置警报的示例代码

```
Intent intent = new Intent (this, AlarmBroadcastReceiver.class);
PendingIntent pendIntent = PendingIntent.getBroadcast(this, id,  intent, //makes a new intent
PendingIntent.FLAG_UPDATE_CURRENT); //only updates PendingIntent, does not recreate
AlarmManager alarmManager = (AlarmManager) getSystemService (Context.ALARM_SERVICE);
alarmManager.cancel(pendIntent); //used to cancel if previously active
alarmManager.set(AlarmManager.RTC_WAKEUP, timeToExec, //sets the alarm to exectute once
             pendIntent); 
```

# .net - 如何编写浏览器特定的 CSS 属性？

> ID：13715461
> 
> 赞同：2
> 
> 时间：2012-12-05T02:41:48.917
> 
> 标签：.net, html, css

请指导我如何编写浏览器特定的 css 属性（不是类或 id）？我无法为不同的浏览器管理不同的 css 文件。我想使用相同的 css 文件和类，但如果有差异，我会提到浏览器的太平洋属性。

请指导我如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T03:05:45.323

请更具体一点，但是当您通常编写 css 时，您希望它与所有浏览器兼容。

webkit 之类的东西各不相同（在 Firefox 中是 moz），但通常如果您在 css 中查找某些内容，则可以在每个浏览器中执行此操作。

```
background-image: -webkit-linear-gradient(left, #cccccc, #333333, #cccccc);
background-image: -moz-linear-gradient(left, #cccccc, #333333, #cccccc);
background-image: -ms-linear-gradient(left, #cccccc, #333333, #cccccc);
background-image: -o-linear-gradient(left, #cccccc, #333333, #cccccc); 
```

例如，上面的代码应该可以在大多数现代浏览器中工作，如果它们都失败了，那么只有一个后备（本例中为纯黑色）。

此外，您总是可以使用不同的 css 文件，这不是很困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T21:14:21.587

您可以使用 jquery 应用不同的 css 类

```
if($.browser.msie){
$("#someDiv").addclass("SomeClass");
} 
```

$.browser.msie 适用于 Internet Explorer
$.browser.chrome 适用于 chrome
$.browser.mozilla 适用于 mozilla
$.browser.safari 适用于 safari
$.browser.opera 适用于歌剧

当涉及基于定位的问题时，这种方式将为您提供灵活性

参考：[http ://api.jquery.com/jQuery.browser/](http://api.jquery.com/jQuery.browser/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T08:06:00.097

我猜你的意思是**Vendor Specific Prefixes**。我发现了一些您可能会喜欢的有趣内容：http: [//css3please.com/](http://css3please.com/)。

查看其他相关工具：[http ://css-tricks.com/tldr-on-vendor-prefix-drama/](http://css-tricks.com/tldr-on-vendor-prefix-drama/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T03:35:54.703

非常简单，您要么必须根据需要写出每个供应商前缀，要么使用 CSS 预处理器，例如 LESS。

Prefixr 也可以作为 Sublime Text 的插件，如果你碰巧在使用它（除了我使用 LESS 之外，我会这样做）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T02:56:47.123

如果可以的话，我可以推荐一种不同的方法。您可以测试该功能，然后根据该功能修改您的代码，而不是为每个浏览器编写代码吗？如果是这样，这个项目会有所帮助：

[http://modernizr.com/](http://modernizr.com/)

# compression - zlib 如何与 Z_FIXED 策略一起使用？

> ID：13715462
> 
> 赞同：1
> 
> 时间：2012-12-05T02:41:56.620
> 
> 标签：compression, zlib

快速浏览一下文档指出：

```
Z_FIXED prevents the use of dynamic Huffman codes, 
allowing for a simpler decoder for special applications. 
```

那么，如果它不使用动态霍夫曼，它会使用什么来代替呢？静态表？

如果是这样，它在哪里定义？它可以由用户定义和加载吗？（或侵入代码？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T07:22:53.953

固定表在[deflate 格式规范](https://www.rfc-editor.org/rfc/rfc1951)中定义。

# php - Codeigniter - 如何将 JSON 作为参数传递给视图

> ID：13715463
> 
> 赞同：3
> 
> 时间：2012-12-05T02:42:14.140
> 
> 标签：php, javascript, json, codeigniter, view

我正在构建一个 codeigniter/php web 应用程序。我试图在加载视图时将 JSON 对象从控制器传递到视图，以使 javascript 可以访问它。

JSON 如下所示：

```
{
    "event": {
        "id": "1",
        "name": "Some name",
        "description": "Some description",
        "address": "1 Main st."
    },
    "members": {
        "others": [
            {
                "id": "26",
                "name": "Brad Black"
            },
            {
                "id": "27",
                "name": "Bill Blue"
            }
        ],
        "current": {
            "id": "1",
            "name": "Jill White"
        }
    }
} 
```

控制器代码如下所示：

```
public function index()
{
    $some_data = $this->Some_model->get_some_data();

    $some_data = json_encode($some_data);

    $data = array (
            'some_data' => $some_data
    );

    $this->load->view('some_view',$data);
} 
```

视图 (some_view) 代码如下所示：

```
<script src="path/to/scripts/some_script.js" type="text/javascript"></script>

<script type="text/javascript">

    some_data = "<?php echo $some_data?>";

</script>

<div class="main">
</div> 
```

javascript (some_script) 代码如下所示：

```
var some_data;

$(document).ready(function(){

    some_data = $.parseJSON(some_data);
}); 
```

挑战在于，由于 JSON 对象是作为字符串发送的（在 json_encode 之后），因此它具有诸如 { 和引号之类的字符作为其中的一部分，当我将其分配给 var (some_data = "" ;)。我也尝试过使用，但效果不佳。

我尝试做了一堆不起作用的事情，为了取得进展，我暂时最终替换了控制器中的“ $data['some_data'] = str_replace('"', """, $some_data);

```
public function index()
{
    $some_data = $this->Some_model->get_some_data();

    $some_data = json_encode($some_data);

    $data = array (
            'some_data' => str_replace('"', "&quot;", $some_data);
    );

    $this->load->view('some_view',$data);
} 
```

并替换 javascript some_data = some_data.replace(/"/g, '"');

```
var some_data;

$(document).ready(function(){

    event_data = event_data.replace(/&quot;/g, '"');
    some_data = $.parseJSON(some_data);
}); 
```

这有点难看，我正在寻找更好的解决方案。

任何指针将不胜感激。

**更新！** 问题解决了，看起来额外的引号破坏了一些东西。

该解决方案与 mohan.gade 的回答一致：

控制器：

```
public function index()
{
    $some_data = $this->Some_model->get_some_data();

    $some_data = json_encode($some_data);

    $data = array (
            'some_data' => $some_data;
    );

    $this->load->view('some_view',$data);
} 
```

看法：

```
 some_data = <?php echo $some_data?>;

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:24:59.237

您的 JSON 值未传递到视图，请尝试更正以下代码。

```
public function index()
{
    $some_data = $this->Some_model->get_some_data();
    $some_data = json_encode($some_data);
    $data = array (
            'some_data' => $some_data
    );
        $this->load->view('some_view',$data);

}

//in view file 
   <script type="text/javascript">
     var jsonData = <?php echo $some_data; ?>
   </script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T04:43:20.707

这可以在没有大量代码的情况下安全地完成，前提是您的模型有一定的理智。您发布的 JSON 让我相信您有一个包含事件的数据库，并且一个事件要么存在，要么不存在。

如果`$this->Some_model->get_some_data()`返回一个类型化的，`FALSE`或者`NULL`如果不存在结果，则可以使用相等运算符进行验证，您可以安全地将其表达到视图中的 JS，就像您可以传达 JSON 一样。

例如：

```
$some_data = $this->Some_model->get_some_data();
if ($some_data === NULL) {
     $data['somedata'] = 'null';
} else {
     // We trust our model, pass it along.
     $data['somedata'] = json_encode($some_data);
}
$this->load->view('some_view', $data); 
```

然后，在您的 JS 中，只需验证包含原始 JSON 字符串的变量在对其进行操作之前实际上不为空。您也可以将其设置为整数，重点是使其易于区分。

从外观上看，如果事件确实存在，您至少将拥有事件数据和创建它的人作为成员。您可能需要做更多的完整性检查，我不确定您的模型中有什么。

只需确保 PHP 变量在您的 JS 中以语法正确的方式扩展，或者如果不存在数据来提供它，则可能选择完全更改 JS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T02:52:43.580

如果传递了空变量， json_encode 将返回`null`，因此您无需`"`在查看代码中对其进行转义。相反，您必须检查变量是数组还是要传入的对象以生成不同的代码。

以你为例：

```
if( is_array( $_var_value ) || is_object( $_var_value) ){
    echo 'var ' . $_var_name . ' = ' . json_encode( $_var_value ) . ";";
}else{ // if( is_string( $_var_value ) ){
    echo 'var ' . $_var_name . ' = "' .  $_var_value  . '";';
} 
```

为您更新案例

```
 <script type="text/javascript">
     <?php if( is_array( $_var_value ) || is_object( $_var_value) ){ ?>
     var some_data = <?php echo json_encode($some_data); ?>;
     <?php }else{ ?>
     var some_data = "<?php echo $some_data; ?>";
     <?php } ?>
 </script> 
```

# c++ - 文件 I/O。无法使用文件的路径

> ID：13715468
> 
> 赞同：0
> 
> 时间：2012-12-05T02:42:35.450
> 
> 标签：c++, file-io

基本上我希望能够加载文本文件。这可以。但我想将文本文件放在项目文件夹内的文件夹中。事实证明这是一个问题，因为一旦移动文件，我就无法加载它。我试过输入路径，但我只是得到一个运行时。任何人都可以帮我解决这个问题。

这是我的代码：

```
Storyline::Storyline()
{
    mStory = "Default";

}
Storyline :: Storyline(string story)
{
mStory= story;
}
void Storyline::print()
{
cout<< "Story= " << mStory<< endl;
cout<< endl;
}
void Storyline::save(ofstream& outFile)
{
outFile<< "Story = " << mStory<< endl;
outFile<< endl;
}
void Storyline::load(ifstream& inFile)
{
string garbage;
inFile>> garbage >> mStory;
}

void Storyline::Menu()
{
cout<< "\n\t******Menu******\n\n";
cout<< "Please choose one of the following:\n";
cout<< "1 -Play Game.\n";
cout<< "2 -Exit.\n";

}
void Storyline::Story(string story)
{
ifstream Story;                                                                                                     
        string line;                                                                                                            
        Story.open(story);                                                                                        
        if (Story.is_open())                                                                                
        {
                while ( Story.good() )                                                                              
                {
                        getline (Story,line);                                                                       
                        cout << line << endl;
                }
                Story.close();                                                                                           
        }
        else{
                throw("GAME FILE LOADING FAILED!");                                                             
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T04:38:36.463

如果您想使用双斜杠 \\ 来省去所有麻烦，您可以使用一个正斜杠 / 来代替，即使在 Windows 下也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:12:04.083

我遇到的问题是我没有逃脱我的斜线。在 C++ 中，斜线用于读取 \n 或 \t 之类的内容。所以基本上只有一个 \ 对编译器没有任何意义。我需要这样做：“文本文件\\Introduction.txt”

# serialization - 即使对于简单实体，ProtoBuf 序列化也会丢失数据

> ID：13715476
> 
> 赞同：2
> 
> 时间：2012-12-05T02:43:47.843
> 
> 标签：serialization, protobuf-net

**[更新#1]** ：如果其他人有兴趣查看基准测试，我已将修改和修复的“演示”项目上传到[https://github.com/sidshetye/SerializersCompare 。](https://github.com/sidshetye/SerializersCompare)

**[Update#2]**：我看到 ProtoBufs 仅在后续迭代中领先数量级。对于一次性序列化，BinaryFormatter 是一个快一个数量级的序列化。为什么？单独的问题...

我正在尝试比较 BinaryFormatter、Json.NET 和 ProtoBuf.NET（今天从 NuGet 获得后者）。我发现 ProtoBuf 没有输出任何真实字段，全是空值和 0（见下文）。加上 BinaryFormatter 似乎要快得多。我基本上序列化 => 反序列化对象并进行比较

*   带有重新生成对象的原始对象
*   字节大小
*   以毫秒为单位的时间

**问题**

1.  我怎样才能让 ProtoBuf 实际吐出真实值而不仅仅是（默认？）值？
2.  我在速度方面做错了什么？我认为 ProtoBuf 应该是最快的序列化程序？

我从我的测试应用程序得到的输出如下：

```
Json: Objects identical
Json in UTF-8: 180 bytes, 249.7054 ms

BinaryFormatter: Objects identical
BinaryFormatter: 512 bytes, 1.7864 ms

ProtoBuf: Original and regenerated objects differ !!
====Regenerated Object====
{
    "functionCall": null,
    "parameters": null,
    "name": null,
    "employeeId": 0,
    "raiseRate": 0.0,
    "addressLine1": null,
    "addressLine2": null
}
ProtoBuf: 256 bytes, 117.969 ms 
```

我的测试是在控制台应用程序中使用一个简单的实体（见下文）。系统：Windows 8x64，VS2012 更新 1，.NET4.5。顺便说一句，我使用`[ProtoContract]`and`[ProtoMember(X)]`约定得到了相同的结果。文档不清楚，但*似乎*DataContract 是较新的“统一”支持约定（对吗？）

```
[Serializable]
[DataContract]
class SimpleEntity
{
    [DataMember(Order = 1)]
    public string functionCall {get;set;}

    [DataMember(Order = 2)]
    public string parameters { get; set; }

    [DataMember(Order = 3)]
    public string name { get; set; }

    [DataMember(Order = 4)]
    public int employeeId { get; set; }

    [DataMember(Order = 5)]
    public float raiseRate { get; set; }

    [DataMember(Order = 6)]
    public string addressLine1 { get; set; }

    [DataMember(Order = 7)]
    public string addressLine2 { get; set; }

    public SimpleEntity()
    {
    }

    public void FillDummyData()
    {
        functionCall = "FunctionNameHere";
        parameters = "x=1,y=2,z=3";

        name = "Mickey Mouse";
        employeeId = 1;
        raiseRate = 1.2F;
        addressLine1 = "1 Disney Street";
        addressLine2 = "Disneyland, CA";
    }
} 
```

对于那些感兴趣的人，这里是我的 ProtoBufs 的 AllSerializers 类的片段

```
public byte[] SerProtoBuf(object thisObj)
{
    using (MemoryStream ms = new MemoryStream())
    {
        Serializer.Serialize(ms, thisObj);
        return ms.GetBuffer();
    }
}

public T DeserProtoBuf<T>(byte[] bytes)
{

    using (MemoryStream ms = new MemoryStream())
    {
        ms.Read(bytes, 0, bytes.Count());
        return Serializer.Deserialize<T>(ms);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:49:19.377

Firstly, your serialize / deserialize methods are both broken; you are over-reporting the result (`GetBuffer()`, without `Length`), and you aren't writing anything into the stream for deserialization. Here's a correct implementation (although you could also use `GetBuffer()` if you were returning `ArraySegment<byte>`):

```
public static byte[] SerProtoBuf(object thisObj)
{
    using (MemoryStream ms = new MemoryStream())
    {
        Serializer.NonGeneric.Serialize(ms, thisObj);
        return ms.ToArray();
    }
}

public static T DeserProtoBuf<T>(byte[] bytes)
{
    using (MemoryStream ms = new MemoryStream(bytes))
    {
        return Serializer.Deserialize<T>(ms);
    }
} 
```

That is why you are getting no data back. Secondly, you don't say how you are timing it, so here's some I've written based on your code (which also includes code to show that it is getting all the values back). Results first:

```
Via BinaryFormatter:
1 Disney Street
Disneyland, CA
1
FunctionNameHere
Mickey Mouse
x=1,y=2,z=3
1.2

Via protobuf-net:
1 Disney Street
Disneyland, CA
1
FunctionNameHere
Mickey Mouse
x=1,y=2,z=3
1.2

Serialize BinaryFormatter: 112 ms, 434 bytes
Deserialize BinaryFormatter: 113 ms
Serialize protobuf-net: 14 ms, 85 bytes
Deserialize protobuf-net: 19 ms 
```

Analysis:

Both serializers stored the same data; protobuf-net was an order of magnitude faster, and a factor of 5 smaller output. I declare: winner.

Code:

```
static BinaryFormatter bf = new BinaryFormatter();
public static byte[] SerBinaryFormatter(object thisObj)
{
    using (MemoryStream ms = new MemoryStream())
    {
        bf.Serialize(ms, thisObj);
        return ms.ToArray();
    }
}

public static T DeserBinaryFormatter<T>(byte[] bytes)
{
    using (MemoryStream ms = new MemoryStream(bytes))
    {
        return (T)bf.Deserialize(ms);
    }
}
static void Main()
{
    SimpleEntity obj = new SimpleEntity(), clone;
    obj.FillDummyData();

    // test that we get non-zero bytes
    var data = SerBinaryFormatter(obj);
    clone = DeserBinaryFormatter<SimpleEntity>(data);
    Console.WriteLine("Via BinaryFormatter:");
    Console.WriteLine(clone.addressLine1);
    Console.WriteLine(clone.addressLine2);
    Console.WriteLine(clone.employeeId);
    Console.WriteLine(clone.functionCall);
    Console.WriteLine(clone.name);
    Console.WriteLine(clone.parameters);
    Console.WriteLine(clone.raiseRate);
    Console.WriteLine();

    data = SerProtoBuf(obj);
    clone = DeserProtoBuf<SimpleEntity>(data);
    Console.WriteLine("Via protobuf-net:");
    Console.WriteLine(clone.addressLine1);
    Console.WriteLine(clone.addressLine2);
    Console.WriteLine(clone.employeeId);
    Console.WriteLine(clone.functionCall);
    Console.WriteLine(clone.name);
    Console.WriteLine(clone.parameters);
    Console.WriteLine(clone.raiseRate);
    Console.WriteLine();

    Stopwatch watch = new Stopwatch();
    const int LOOP = 10000;

    watch.Reset();
    watch.Start();
    for (int i = 0; i < LOOP; i++)
    {
        data = SerBinaryFormatter(obj);
    }
    watch.Stop();
    Console.WriteLine("Serialize BinaryFormatter: {0} ms, {1} bytes", watch.ElapsedMilliseconds, data.Length);

    watch.Reset();
    watch.Start();
    for (int i = 0; i < LOOP; i++)
    {
        clone = DeserBinaryFormatter<SimpleEntity>(data);
    }
    watch.Stop();
    Console.WriteLine("Deserialize BinaryFormatter: {0} ms", watch.ElapsedMilliseconds, data.Length);

    watch.Reset();
    watch.Start();
    for (int i = 0; i < LOOP; i++)
    {
        data = SerProtoBuf(obj);
    }
    watch.Stop();
    Console.WriteLine("Serialize protobuf-net: {0} ms, {1} bytes", watch.ElapsedMilliseconds, data.Length);

    watch.Reset();
    watch.Start();
    for (int i = 0; i < LOOP; i++)
    {
        clone = DeserProtoBuf<SimpleEntity>(data);
    }
    watch.Stop();
    Console.WriteLine("Deserialize protobuf-net: {0} ms", watch.ElapsedMilliseconds, data.Length);
} 
```

Lastly, `[DataMember(...)]` support isn't really the "newer 'uniformly' support convention" - it certainly isn't "newer" - I'm pretty sure it has supported both of those since something like commit #4 (and possibly earlier). It is just options provided for convenience:

*   not all target platforms have `DataMemberAttribute`
*   some people prefer to limit the DTO layer to inbuilt markers
*   some types are largely outside your control, but may already have those markers (generated data from LINQ-to-SQL, for example)
*   additionally, note that 2.x allows you to define the model at runtime without having to add attributes (although attributes remain the most *convenient* way to do it)

# php - 将变量附加到 $_SESSION 变量的末尾

> ID：13715479
> 
> 赞同：0
> 
> 时间：2012-12-05T02:43:56.113
> 
> 标签：php

我正在尝试将一个数字附加到 PHP`$_SESSION`变量的末尾，但由于某种原因，该数字没有附加。这是我遇到问题的代码部分：

```
value="'.$_SESSION["fname_'.$i.'"].'" 
```

`$i`包含我试图附加到`$_SESSION`变量的数字。有什么建议么？谢谢

```
//Loop through the number of stored in $_SESSION['management-count'] and print out that many sections
    $_SESSION['management-member-template'] = '' ;
    for ($i = 1; $i <= $_SESSION['management-count']; $i++) {
        $_SESSION['management-member-template'] .= '
        <li class="">
            <div class="heading-line">
                <h5>Member <span class="num">'.$i.'</span></h5>
                <a href="#" class="btn-remove"><span>Remove Member</span></a>
            </div>
            <div class="text-frame">
                <p>Would you like to use a previously entered individual?</p>
            </div>
            <div class="controls">
                <div class="radio-line" id="radio-'.$i.'">
                    <input type="radio" id="member_'.$i.'_1" name="member_'.$i.'" checked="checked"  />
                    <label for="member_'.$i.'_1">'.$_SESSION['legal-first-name'].' '.$_SESSION['legal-last-name'].', '.$_SESSION['legal-address'].' '.$_SESSION['legal-address-2'].', '.$_SESSION['legal-city'].', '.$_SESSION['legal-state'].' '.$_SESSION['legal-zip'].'</label>
                </div>
                <div class="radio-line" id="rad-'.$i.'">
                    <input type="radio" id="member_'.$i.'_2" name="member_'.$i.'" title="new-address" />
                    <label for="member_'.$i.'_2">No, enter a new name</label>
                </div>
            </div>
            <div class="new-address hidden" id="new-address-'.$i.'">
                <div class="form-row">
                    <div class="item">
                        <label>First Name <span>*</span></label>
                        <div class="text">
                            <input type="text" name="member['.$i.'][fname]" value="'.$_SESSION["fname_'.$i.'"].'" />
                        </div>
                    </div>
                    <div class="item">
                        <label>Last Name <span>*</span></label>
                        <div class="text">
                            <input type="text" name="member['.$i.'][lname]" value="'.$_SESSION["fname_'.$i.'"].'" />
                        </div>
                    </div>
                </div>
            </div>
        </li>
        <script type="text/javascript">
        $(document).ready(function () {
            $("#rad-'.$i.'").click(function() {
                $("#new-address-'.$i.'").removeClass("hidden");  
            });
            $("#radio-'.$i.'").click(function() {
                $("#new-address-'.$i.'").addClass("hidden");  
            });
        });
        </script>' ;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:57:13.570

弄清楚了。这是解决方案：

错误的：`value="'.$_SESSION["fname_'.$i.'"].'"`

正确的： `value="'.$_SESSION["fname_".$i].'" />`

# php - 侧边栏小部件在类别页面上未对齐

> ID：13715481
> 
> 赞同：0
> 
> 时间：2012-12-05T02:44:16.690
> 
> 标签：php, wordpress, categories

我重新发布了同样的问题，但我更好地定义了这些问题。

基本上，我试图限制出现在我的索引页面上的文章数量 - 但是，我似乎设法破坏了我创建的任何 CATEGORY 页面。

例如，如果您访问[http://www.invisiblejungle.com](http://www.invisiblejungle.com)，则从“广播节目”类别中提取的“近期帖子”部分显示得很好。

但是，如果您在导航栏中单击 Radio Shows，它是一个类别，它会将侧边栏小部件扔到页面底部，并扭曲每篇单独的文章。

编辑：

我发现当它检索帖子时，问题肯定出在 loop.php 中。

```
<?php  
/**
 * The loop for displaying multiple posts (blog, search, categories, tags, etc).
 *
 * @package WordPress
 * @subpackage Debut
 * @since Debut 2.0
 *
 */
?>

    <?php   if( have_posts() ) : ?>

        <?php
        /**
         * Page Header
         *
         */
        locate_template( 'includes/page-header.php', true ); ?>

        <?php   while( have_posts() ) : the_post(); ?>

            <article id="post-<?php the_ID(); ?>" <?php post_class( 'entry' ) ?>>

                <?php 
                /**
                 * Entry Thumbnail
                 *
                 */
                locate_template( 'includes/entry-thumbnail.php', true, false ); ?>

                <?php
                /**
                 * Entry Header
                 *
                 */
                locate_template( 'includes/entry-header.php', true, false ); ?>

                <?php
                /**
                 * Entry Content/Summary
                 *
                 */
                if ( is_archive() || is_search() ) : // Check if this is an Archives and Search page ?>

                    <div class="entry-summary">

                        <?php the_excerpt(); ?>

                        <a class="more-link" href="<?php the_permalink() ?>" title="<?php c7s_the_title_attribute(); ?>"><?php _e( 'Read More &rarr;', 'framework' ); ?></a>

                    </div><!-- .entry-summary -->

                <?php else : // If not Archives or Search page ?>

                    <div class="entry-content">

                        <?php global $more; $more = 0; // Needed for more tag to work ?>

                        <?php the_content( __( 'Read More &rarr;', 'framework' ) ); // Show content ?>

                        <?php do_action( 'get_page_links' ); // Show page links (custom function to wp_link_pages() - functions/theme-helpers.php ?>

                    </div><!-- .entry-content -->

                <?php endif; // End Archive and Search page check ?>

            </article><!-- #post-## -->

            <?php 
            /**
             * Entry Comments
             *
             */
            comments_template( '', true ); ?>

        <?php endwhile; // end posts loop ?>
      <?php else : // If there are not any posts ?>

        <?php
        /**
         * Page Header
         *
         */
        locate_template( 'includes/page-header.php', true ); ?>

        <?php
        /**
         * Archives
         *
         */
        get_template_part( 'loop', 'archives' ); ?>

    <?php endif; // end loop ?>

        <?php
    /**
     * Pagination
     *
     */
    if ( $wp_query->max_num_pages > 1 ) : // Check for pages ?>

        <div id="nav-below" class="pagenavi">

            <?php if ( function_exists( 'wp_pagenavi' ) ) : // Check for WP Page Navi Plugin ?>

                <?php wp_pagenavi(); ?>

            <?php else : ?>

                <div class="nav-previous"><?php next_posts_link( '<span class="meta-nav">&larr;</span>' . __( ' Older posts', 'framework' ) ); ?></div>

                <div class="nav-next"><?php previous_posts_link( __( 'Newer posts ', 'framework' ) . '<span class="meta-nav">&rarr;</span>' ); ?></div>

            <?php endif; // End WP Page Navi plugin check ?>

        </div><!-- #nav-below -->

    <?php endif; // end page check ?>

</section><!-- #entry-container --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:42:08.223

问题可能出在您的archive.php 中。

根据 Wordpress 模板层次结构，Wordpress 按这些文件的顺序查找您的类别页面：

```
 category-{slug}.php - If the category's slug were news, WordPress
 would look for category-news.php category-{id}.php - If the category's
 ID were 6, WordPress would look for category-6.php category.php
 archive.php 
 index.php 
```

[http://codex.wordpress.org/Template_Hierarchy](http://codex.wordpress.org/Template_Hierarchy)

因此，您的错误很可能位于该文件中。你可以做些什么来解决这个问题，就是进入一个运行良好的文件。比如你的`page.php`并将其所有内容复制到`archive.php`. 一定要先备份！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:06:28.560

```
<div id="main-container" role="main">

<section id="main">    

<section id="entry-container" role="contentinfo">////   

    <header class="entry page-header">

    ....
    ....
    ....            

    </ul><!-- #sidebar -->

</section><!-- #sidebar-container -->

</section><!-- #main -->////

    <div class="clearfix"><!-- nothing to see here --></div>

</div> 
```

我在 //// 之后放置的行是修复 html 的内容。请从您的工作页面之一发布 php，以便我进行比较。

# python - Access individual cells in csv file with python

> ID：13715485
> 
> 赞同：2
> 
> 时间：2012-12-05T02:45:16.550
> 
> 标签：python, regex, parsing, csv

How can I access individual cells in a csv document to parse and edit them? Also is there a way I can convert the csv document into a two-dimensional array?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:06:23.017

您将要使用为 python 制作的[csv 包。](http://docs.python.org/2/library/csv.html)您可能想尝试这样的事情（假设您的文件是有规律的结构并且没有标题）：

```
data = []
for row in csv.reader(open('you_file.csv', 'rb'), delimiter=',')
    data.append(row) 
```

尝试一下并查看[csv 包](http://docs.python.org/2/library/csv.html)文档以了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T03:10:58.803

这是为您提供的解决方案。

```
import csv

twoDimArray = [] 

with open('input.csv', 'rb') as csvfile: 
    reader = csv.reader(csvfile, delimiter=';', quotechar='|') 
    for row in reader: 
        twoDomArray.append(row) 

#DO STUFF WITH DATA 

with open('output.csv', 'wb') as csvfile: 
    writer = csv.writer(csvfile, delimiter=' ', 
                            quotechar='|', quoting=csv.QUOTE_MINIMAL) 
    for row in twoDinArray: 
        writer.writerow(row) 
```

另请阅读[文档](http://docs.python.org/2/library/csv.html)

祝你好运:)

# ruby-on-rails - Extend ActiveRecord method_missing

> ID：13715486
> 
> 赞同：0
> 
> 时间：2012-12-05T02:45:19.577
> 
> 标签：ruby-on-rails, activerecord, extending

I've been looking around the web and have found a great deal of information on attempting what I am, however one bit of sugar I'd like to add to my Ruby/Rails mixin, is creating a function that looks for a pattern. I want to create a base function called

is_a_*

where * can be anything. Whatever that * is, needs to be retrievable so I can use it inside the function and act accordingly. Do I have to use method_missing?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T03:00:34.460

这就是`method_missing`为此而设计的，例如，这样的东西应该可以工作：

```
module MyMixin

  def respond_to?(method, priv=false)
    (method.to_s =~ /^is_a_(\w+)$/) || super
  end

  def method_missing(sym, *args)
    if sym.to_s =~ /^is_a_(\w+)$/
      pattern = $1
      # then just do something with pattern here, e.g.:
      puts pattern
    else
      super
    end
  end

end 
```

然后只需包括`MyMixin`在您的课程中，例如：

```
class A
  include MyMixin
end

a = A.new
a.is_a_foo
#=> "foo" 
```

ps你并不严格需要覆盖[`respond_to?`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-respond_to-3F)，我只是为了完整起见将它包括在内：

```
a.respond_to?("is_a_foo")
#=> true
a.respond_to?("is_a_bar")
#=> true
a.respond_to?("is__a_foo")
#=> false 
```

# matlab - Plotting in matlab in axis off mode

> ID：13715493
> 
> 赞同：0
> 
> 时间：2012-12-05T02:46:00.850
> 
> 标签：matlab, matlab-figure

I have put a little part of my code

`figure, plot(Clip_M_EF(New_M_index(:,1),1),'xg'), axis off, hold on, plot(New_M_EF_MS,'*r'), hold on, plot(Clip_M_EF_GS(New_M_index(:,1),1),'+b')`

You see, because I have set axis mode into "off" the following plots cannot be plotted into any axis. But my teacher wants me to be able to plot them in the axis despite having them the axis in off mode. He says, "Please modify your code in a way that axes, titles, are displayed irrespective of the display mode matlab executed earlier.". I have wasted a lot of time searching for it. But I could not find any solution. Could you give me any solution?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T02:53:26.550

我认为它有效，试试这个：

```
axis off
set(myPlot, 'ButtonDownFcn', 'disp Goodbye') 
```

# android - android:onClick set on menuitem in xml

> ID：13715496
> 
> 赞同：3
> 
> 时间：2012-12-05T02:46:32.333
> 
> 标签：android, xml, menu, onclick, menuitem

Dear can we use onclick with menu item in xml. like below .i tried it but its not working.

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/logout"
    android:onClick="onLogOut"
    android:title="@string/logout">
</item> 
```

Java Code :

```
public void onLogOut(MenuItem v) {
    Utility.LogError(TAG, "onLogOut Clicked");
    Toast.makeText(this, "onLogOut", Toast.LENGTH_SHORT).show();
} 
```

}

onLogOut is not get called....

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T02:50:00.057

use

```
android:onClick="onLogOutClick" 
```

instead of

```
android:onClick="@string/onLogOutClick" 
```

for adding onclick with menu item

and And in Java we should write the method for this onlick

```
public void onLogOutClick(MenuItem item) {
     Log.d("MenuItem", "onLogOutClick :: "+item.getItemId());  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-06T09:09:29.983

您是否已经尝试过使其与[onOptionItemSelected](https://developer.android.com/reference/android/app/Activity.html#onOptionsItemSelected(android.view.MenuItem)) () 函数一起使用？

**onOptionsItemSelected**

> 在 API 级别 1 中添加
> 
> boolean onOptionsItemSelected（MenuItem 项）
> 
> This hook is called whenever an item in your options menu is selected. 默认实现简单地返回 false 以进行正常处理（调用项目的 Runnable 或根据需要向其 Handler 发送消息）。您可以将此方法用于您希望在没有其他设施的情况下对其进行处理的任何项目。

**编辑：**

我还发现了这个用于[处理点击事件](https://developer.android.com/guide/topics/ui/menus.html#PopupEvents)

**处理点击事件**

> 要在用户选择菜单项时执行操作，您必须实现 PopupMenu.OnMenuItemClickListener 接口并通过调用 setOnMenuItemclickListener() 将其注册到您的 PopupMenu。当用户选择一个项目时，系统会在您的界面中调用 onMenuItemClick() 回调。

例如（示例来自网站）：

```
 public void showMenu(View v) {
    PopupMenu popup = new PopupMenu(this, v);

    // This activity implements OnMenuItemClickListener
    popup.setOnMenuItemClickListener(this);
    popup.inflate(R.menu.actions);
    popup.show();
}

@Override
public boolean onMenuItemClick(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.archive:
            archive(item);
            return true;
        case R.id.delete:
            delete(item);
            return true;
        default:
            return false;
    }
} 
```

因此，如果您插入 onOptionsItemSelected 或 onMenuItemClick，您应该能够收到来自 onLogOut 的呼叫。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T03:51:49.447

那是因为它只适用于 XML**布局**，所以有一个菜单。对于菜单，您应该覆盖该`onItemMenuSelected()`方法。阅读[文档](http://developer.android.com/guide/topics/ui/menus.html#RespondingOptionsMenu)。

编辑：

哎呀！显然这是可能的，但仅限于 Honeycomb 及更高版本。

# matlab - Matlab 组合矩阵

> ID：13715499
> 
> 赞同：1
> 
> 时间：2012-12-05T02:46:53.510
> 
> 标签：matlab, matrix

我有一个 1024x3x3 矩阵`A`和另一个相同尺寸的矩阵`B`。我想制作一个 1024x2x3x3 的矩阵，它是两者的组合，有人可以帮忙吗？我的matlab技能​​很烂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:10:58.687

您的问题的单线解决方案是：

```
D = permute(cat(4, A, B), [1 4 2 3]); 
```

但是，这需要一些解释。这是一个让我们开始的例子：

```
%# A 3-d pre-allocation example
A = rand(3, 3, 3);
B = rand(3, 3, 3);
D = NaN(3, 3, 3, 2);
D(:, :, :, 1) = A;
D(:, :, :, 2) = B; 
```

如果您从预先分配所需的输出矩阵开始，然后手动将输入矩阵分配给输出矩阵，则问题在概念上要简单得多。然而，一旦你掌握了这个概念，你就可以使用一个`cat`函数调用来解决问题：

```
%# The 3-d cat solution
A = rand(3, 3, 3);
B = rand(3, 3, 3);
D = cat(4, A, B); 
```

的第一个参数`cat`提供您想要连接的维度。通过选择比我们矩阵的当前最大维度大一维的维度，我们创建一个新维度并沿着它连接。

因此，如果我们想要在当前维度集的末尾添加一个新维度，这就解决了问题。但是，在问题中，您声明希望新维度显示为第二个索引。适应这种情况的预分配示例的简单扩展是：

```
%# Another 3-d pre-allocation example
A = rand(3, 3, 3);
B = rand(3, 3, 3);
D = NaN(3, 2, 3, 3);
D(:, 1, :, :) = A;
D(:, 2, :, :) = B; 
```

但也许不涉及显式分配的更好方法是使用技巧 with`cat`创建一个额外的维度，然后使用`permute`将维度重新排列为我们想要的顺序，例如：

```
%# Another 3-d example with cat and permute
A = rand(3, 3, 3);
B = rand(3, 3, 3);
D = cat(4, A, B);
D = permute(D, [1 4 2 3]); 
```

希望这可以帮助。干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T09:53:56.740

连接`A`和`B`并用于`reshape`更改结果矩阵的维度：

```
C = reshape([A; B],1024,2,3,3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T03:27:49.153

你可以做：

给定：A -> 1024 x 3 x 3 B -> 1024 x 3 x 3

### 选择您的选项：

1) C = [AB]；%-> 1024 x 6 x 3

2) C = [A; 乙]; %-> 2048 x 3 x 3

3) C = 零(1024,3,3,2);

C(:,:,:,1) = A;

C(:,:,:,2) = B;

%C -> 1024 x 3 x 3 x 2

# javascript - JQuery; target and fire function only if in a certain directory

> ID：13715501
> 
> 赞同：1
> 
> 时间：2012-12-05T02:47:09.987
> 
> 标签：javascript, jquery, function, directory, pathname

OK the results of my script aren't exactly producing the answer I am looking and the variable is coming back the opposite of what I am looking for:

//REVISED:This is in the mouseOut of .hover()

Here is my function:

```
$(".about,.activeAbout").hover(
  function () {
    $('#dropInvestments').css( "left","-9999px" );
    $('#dropMedia').css( "left","-9999px" );
    $('#dropAbout').css( "left","415px" );
    $('#aboutTitle').addClass("aboutTitleActive").removeClass("aboutTitle");
  }, 
      function () {
      $pageLoc = document.location.pathname.split('/about/');
      alert($pageLoc);
      if (document.location.pathname == $pageLoc) 

    {
      $('#aboutTitle').addClass("aboutTitle").removeClass("aboutTitleActive");
    }

}
); 
```

Here is the pathname:

```
wga/x3/about/history.html 
```

What i want is to only do the class change if the current page is not in the about folder/directory. Any thoughts?

Using split takes out the about and returns the pathname without it...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:27:55.120

非常感谢 Ohgodwhy 和 TheSmose 为我指明了正确的方向，这就是我如何让它工作的。如果您可以使其更简单或有更好的方式，请随时发布。谢谢你：

```
$(".about,.activeAbout").hover(
  function () {
    $('#dropInvestments').css( "left","-9999px" );
    $('#dropMedia').css( "left","-9999px" );
    $('#dropAbout').css( "left","415px" );
    $('#aboutTitle').addClass("aboutTitleActive").removeClass("aboutTitle");
  }, 
  function () {
      $pageLoc = document.location.pathname;
      $tarLoc = /about/g;
      $result = $tarLoc.test($pageLoc);
      if ($result !== true) 

    {
      $('#aboutTitle').addClass("aboutTitle").removeClass("aboutTitleActive");
    }

  }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T02:52:08.807

用户正则表达式`.test`执行此操作：

```
function () {
    var pattern = /^\/?wga\/x3\/about\/.*/;
    if (pattern.test(document.location.pathname)) {
        $('#aboutTitle').addClass("aboutTitle").removeClass("aboutTitleActive");
    }
} 
```

# c# - Visual Studio 中的智能感知错误

> ID：13715504
> 
> 赞同：0
> 
> 时间：2012-12-05T02:47:20.030
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

我制作了一个模块化应用程序，每个模块都是一个单独的项目，它们的外观与 MVC 区域相似。

我实现了一个自定义`WebViewPage`，但即使在将指针从`web.config`后面删除为默认值之后，智能感知仍然无法正常工作。

在我的剃刀视图的第一行：

```
@model IEnumerable<Module2.Models.TestModel> 
```

我收到警告：

> *xxx\Module2\Views\Shared\TestModelTable.cshtml：ASP.NET 运行时错误：在类型 WebActivator.ActivationManager 上运行的预应用程序启动初始化方法引发异常，并显示以下错误消息：调用目标已引发异常.. xxx\Module2\Views\Shared\TestModelTable.cshtml*

和错误：

> *当前上下文 xxx\Module2\Views\Shared\TestModelTable.cshtml 中不存在名称“模型”*

然后每次我尝试引用模型时都会出现错误：

> *无法从用法中推断方法“System.Web.Mvc.Html.DisplayExtensions.DisplayFor(System.Web.Mvc.HtmlHelper, System.Linq.Expressions.Expression>)”的类型参数。尝试明确指定类型参数。xxx\Module2\Views\Shared\TestModelTable.cshtml 26 14 模块2*

此外，如果我添加`ViewBag.Title`到视图中，我会收到此错误：

> *找不到编译动态表达式所需的一种或多种类型。您是否缺少参考？xxx\Module2\Views\Shared\TestModelTable.cshtml*

我会假设 Web 配置存在问题，但它们是在 mvc 区域中找到的标准 Web 配置（我删除了 custom `WebPageView`）

我尝试在每个模块中创建的每个视图都会发生这种情况，但是主应用程序工作正常。结果，我尝试将 webconfigs 从主应用程序复制到模块，但仍然有很多错误。

* * *

**2012 年 6 月 12 日**更新****

 **在修复 RazorBuildProvider 的实现以处理模块后，应用程序现在可以成功呈现强类型视图。然而，智能感知仍然呈现这些错误。我怀疑该`@module...`行的第一个错误是罪魁祸首，它阻止了编辑器加载强类型模型所需的信息。

* * *

**2012 年 6 月 12 日**更新****

 **通过消除过程，我发现 ninject 的 PreApplicationStartMethod 是罪魁祸首。当该方法调用 RegisterServices 时，我的模块加载器被调用，并在其中某处引发错误。`[assembly: WebActivator.PreApplicationStartMethod(typeof(Frontline.App_Start.NinjectWebCommon), "Start")]`

为了获得更好的解决方案，我需要弄清楚如何正确调试此错误，我找不到任何东西，所以我在 SO [Debugging Visual Studio editor exceptions上发布了另一个（更通用的）问题](https://stackoverflow.com/questions/13735362/debugging-editor-exceptions-error-thrown-by-the-invocation)

我还将发布我的 hacky 修复作为答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:32:27.830

所以我无法解决问题的根源，但我有一个快速解决方案。

如果名称中有visual studio，我将在我的模块加载方法期间终止该进程：

```
if (System.Diagnostics.Process.GetCurrentProcess().ProcessName.Contains("VisualStudio"))
   return; 
```****

# python - Fixing Python Indentation When Including in a Method or a Class

> ID：13715508
> 
> 赞同：2
> 
> 时间：2012-12-05T02:47:51.953
> 
> 标签：python, pydev

I'm working with pydev on eclipse, and I'm wondering if there is a way to circumvent the indentation, or at least quickly edit indentation in files.

For example, if I make a handful of methods, but then want to put them under a class umbrella, is there an easy way of doing this in terms of indentation, or do I need to go through them line by line?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T02:55:50.150

突出显示所有代码并使用`Tab`and `Shift`+ `Tab`。

编辑：您还可以突出显示代码，右键单击选择，然后选择`Shift`+`►</kbd> (or to unindent, `Shift`+`◄</kbd>).``

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T02:57:10.013

我不知道 pydev 的行为如何，但我使用 spyder 已经有一段时间了，我可以选择未缩进/过度缩进的代码块的所有行，然后按 Tab/Shift+Tab 来添加/删除缩进。这甚至可以通过编辑菜单中的缩进/取消缩进选项来完成。

如果您不了解 Spyder，我建议您尝试一下！ [http://code.google.com/p/spyderlib/](http://code.google.com/p/spyderlib/)

# facebook - Facebook session dies despite activity?

> ID：13715509
> 
> 赞同：1
> 
> 时间：2012-12-05T02:47:56.773
> 
> 标签：facebook, facebook-php-sdk

I'm attempting to keep a Facebook session alive for as long as the user has the app open. This is done by a simple AJAX call every minute. I'm using the PHP SDK, and calling `$facebook->getUser()` to get the user's data.

But in spite of this, and even regular activity, the session times out after about 20-30 minutes of use.

The PHPSESSID cookie is configured to expire 30 days after it's set, not 30 minutes, and I'm repeatedly querying the Facebook API every minute. Shouldn't that keep the session alive for as long as the app is open in the browser?

# php - session variable not carrying over

> ID：13715510
> 
> 赞同：0
> 
> 时间：2012-12-05T02:48:15.730
> 
> 标签：php, session

I am starting the session in dbconnect.php .The session variable is carrying over to home.php on my localhost but when i am hosting it on a webserver the session variable is not carrying over.

checklogin.php

```
<?php 

session_start(); 
$username = $_POST['username'] ;   
$_SESSION['user'] = $username ; 
// other code 
?> 
```

home.php

```
<?php 
session_start();  
$user = $_SESSION['user'] ;  
echo $user;
// other code 
?> 
```

# ios6 - Can I play mpga auido in ios?

> ID：13715514
> 
> 赞同：1
> 
> 时间：2012-12-05T02:48:30.310
> 
> 标签：ios6, mpmovieplayercontroller

I want to play one media stream by MPMoviePlayer, it can play h264 video but there is no sound output. I want to know is there any framework can handle the mpga audio ?

I can play it by VLC and got the media information as follow:

![enter image description here](../Images/f4cfac41a7f3091b5a7e7d1c06bc4034.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:38:51.503

[Apple 的文档](http://developer.apple.com/library/ios/documentation/MediaPlayer/Reference/MPMoviePlayerController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006953-CH3-SW20)指出 MPMoviePlayerController 可以播放 iOS 原生支持的任何音频文件。

但不幸的是，[“ `mpga`”格式不是 iOS 原生支持的音频文件格式之一](https://stackoverflow.com/questions/1761460/supported-audio-file-formats-in-iphone)。

您将不得不找到一种方法将“ `mpga`”轨道转换为 iOS 可以使用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-16T06:57:59.447

MPGA 文件基本上是 mp3，但 AvPlayer 无法播放它们，因为它的文件扩展名。您可以轻松地将文件扩展名更改为 mp3，然后播放器将工作并可以播放文件。

# .htaccess - .htaccess Redirect Without The Question Mark

> ID：13715516
> 
> 赞同：2
> 
> 时间：2012-12-05T02:49:35.457
> 
> 标签：.htaccess, redirect

I am looking to redirect the URL `http://www.example.com/user_pages/home_0.shtml?page=Home` to `http://www.example.com/`. I have it redirecting to `http://www.example.com/?` using the following RedirectMatch:

```
RedirectMatch 301 ^/user_pages/home_0.shtml http://www.example.com/? 
```

I was hoping that someone could help me figure out how to remove the trailing question mark. I understand that is the way I have it setup but that is the farthest I could get to matching what I need.

Secondary question but I think it falls in line with what I am doing here. I have the following RedirectMatch setup:

```
RedirectMatch 301 ^/user_pages/contactus_0.shtml http://www.example.com/help.php?section=contactus&mode=update 
```

I am attempting to redirect `http://www.example.com/user_pages/contactus_0.shtml?page=Contact%20Us` to `http://www.example.com/help.php?section=contactus&mode=update` but I end up with `http://www.example.com/help.php?section=contactus/user_pages/contactus_0.shtmlmode=update`. I understand this is caused by the additional query string but I am at a lose on how to fix. Any help is appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:27:08.667

删除的一种方法**？**的查询是这样的：

```
RewriteEngine On
#Test for a query with `page=`
RewriteCond %{QUERY_STRING} ^page=.*$   
RewriteRule .* http://www.example.com? [L,R=301] 
```

最后一个**？**将删除查询，包括**？**

至于问题的最后一部分，请查看我的评论。

# matlab - 试图让 MATLAB 的图形停止“闪烁”

> ID：13715527
> 
> 赞同：3
> 
> 时间：2012-12-05T02:51:12.167
> 
> 标签：matlab, user-interface, graphics, matlab-figure

所以我在 MATLAB 中有一个简单的循环，它执行以下操作：

```
for p = 1:100

  x = 4.*randn(1,100);
  y = 7.*randn(1,100);

  figure(1) 
  plot(randn(1,100));

  figure(2);
  plot(randn(1,100));

end 
```

x 和 y 是组成的，但这就是它的要点。无论如何，当我运行这段代码时，毫不奇怪，MATLAB 会制作两个数字并相应地绘制。问题是，当我这样做时，我会在数字之间“闪烁”，这使得看到 x 和 y 随时间演变的质量变得更差。

我发现了一种使其中一个情节更平滑的方法，如下所示：

```
figure(1);
for p = 1:100

  x = 4.*randn(1,100);
  y = 7.*randn(1,100);

  plot(randn(1,100));
  drawnow

 end 
```

如果我这样做，那么图（1）当然会非常流畅地显示 x，而图（1）在图之间没有“闪烁”，但现在我不能显示图（2）或 y！

如何在不“闪烁”的情况下顺利地将这两个数量绘制在*不同的*图形（不是子图）上？

**编辑：**

感谢 Geodesic 的回答，该解决方案有效，但是有一个微妙之处，我认为这不是问题，但确实如此。

1) 我无法在此解决方案中使用“imagesc”。

例如，

```
figure(1);
aone = axes;
figure(2);
atwo = axes;

for p = 1:100

  x = 4.*randn(1,100);
  y = 7.*rand(10,100);

  plot(aone,x);
  drawnow;
  imagesc(atwo,y);
  drawnow;
end 
```

在这种情况下，带有 imagesc(atwo, y) 的部分会崩溃。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T03:34:59.697

您的闪烁是因为您通过循环一次又一次地生成每个图形窗口，这迫使窗口每次都出现在前台。首先生成图形，将一些轴附加到它们，然后将数据绘制到每个轴，如下所示：

```
figure(1);
aone = axes;
figure(2);
atwo = axes;
for p = 1:100

  x = 4.*randn(1,100);
  y = 7.*randn(1,100);

  plot(aone,randn(1,100));
  drawnow;
  imagesc(y,'Parent',atwo);
  drawnow;
end 
```

编辑：像这样`plot`的函数直接接受一个轴参数，但`imagesc`没有。在这种特殊情况下，您需要发送一个属性名称/值对作为参数。生成的图像的“父级”将是我们的轴`atwo`（见上文）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T17:19:24.967

对于`p`= 1，使用`plot`命令或`imagesc`命令创建您需要的图。通过获取输出参数来保留生成的图形对象的句柄：例如`h = plot(....`or `h = imagesc(....`。这将是一个句柄图形`lineseries`或`image`对象，或其他东西，具体取决于您创建的特定绘图类型。

对于`p`= 2:100，不要直接使用绘图命令，而是更新`Data`原始 Handle Graphics 对象的相关属性`h`。例如，对于`lineseries`由命令产生的对象`plot`，将其`XData`和`YData`属性设置为新数据。对于`image`由命令产生的对象`imagesc`，将其`CData`属性设置为新图像。

如有必要，请`drawnow`在更新后调用以强制刷新图形队列。

# c# - 检查列表是否 包含另一个 List 中的元素 使用 LINQ

> ID：13715529
> 
> 赞同：14
> 
> 时间：2012-12-05T02:51:18.687
> 
> 标签：c#, linq

如何使用 C# 中的 LINQ 检查列表是否包含另一个列表中存在的元素？我不想使用 for/while 循环。

所以，如果 List1 有 A、B、C，而 List2 有 B、1、2，那么我会返回 true。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-05T02:53:07.367

尝试这个：

```
List<string> a = ...
List<string> b = ...
var inComon = a.Intersect(b).Any(); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-05T02:53:34.237

使用[Enumerable.Any 方法](http://msdn.microsoft.com/en-us/library/bb337697.aspx)：

```
List<string> l1 = new List<string> { "1", "2" };
List<string> l2 = new List<string> { "1", "3" };
var result = l2.Any(s => l1.Contains(s)); 
```

我会说该`Intersect`方法（请参阅*dasblinkenlight*的回答） +`Any`必须比`Contains`+更好`Any`。使用起来肯定`Any`比`Count`.

# java - 医院管理类图说明

> ID：13715531
> 
> 赞同：1
> 
> 时间：2012-12-05T02:51:32.023
> 
> 标签：java, uml

我需要验证我是否正确识别了这些类之间的关系。例如假设我有以下实体，

```
Doctor 1---------m Diagnosis m----------m Prescriptions m ----------1 Patient
  1                                                                      m
  -                                                                      -
  -                                                                      -
  ------------------------------------------------------------------------ 
```

所以它的基本诊断是一个参考表，管理员医生在其中输入了所有诊断细节。例如，

```
Diag_ID, Category, Name,       Desc
1        Skin      Red Skin    Red spots in skin 
```

所以我的业务流程是医生为病人开处方。所以他会给出一个病人 ID（病人登记也会发生，但我没有显示那些实体）。然后从 Doctor.createPrescription(patientId) 他将参考诊断表并创建具有相关详细信息的处方。假设处方类构造函数采用新处方（diagnosisId,doctorId,patientID）。

识别它们之间的关系是否正确。 **创建处方时链接医生和诊断类是否正确。**如果不存在，医生还可以创建新的诊断类型。

因此，一名医生可以诊断出患有多种症状的患者。例如，一个有皮肤，另一个有胸部。所以在那种情况下，1名医生可以有很多诊断。但所有这些都应该由一名医生完成。因此，对于每个诊断，医生可以开具单独的处方，或者可以为所有诊断开具一个处方。所以它是多对多的关系。最后，那些处方应该属于一个病人。不能在患者之间共享。我想我的模型是对的知道吗？

如果多个医生可以诊断一个病人怎么办。如何扩展它以支持该要求？

任何建议，如果这个模型从一开始就错了。请推荐一个新型号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:02:22.353

考虑：

*   病人是有诊断清单的人，所以诊断清单应该由病人类持有
*   医生将被允许修改此列表并为给定的诊断创建处方。
*   多个医生可以修改一个患者的诊断列表
*   但是当一个医生正在修改这个列表时，他应该在这个列表上持有一个锁，并且在他完成之前不要释放它。
*   其他医生在锁处于活动状态时可以查看该列表，但在锁被释放之前他们应该无法修改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:05:20.237

**识别它们之间的关系是否正确**

这是一种方式，而且似乎足够准确。

**创建处方时链接医生和诊断类是否正确**

考虑不变性；如果诊断不能随着时间而改变（这可能是真的），那么在构造函数中要求所有三个似乎是最简单的，然后使类不可变。

**如果多个医生可以诊断一个病人怎么办。如何扩展它以支持该要求？**

```
Doctor m---------m Diagnosis
   m 
```

# php - php mysql防止快速表单提交中的重复插入

> ID：13715534
> 
> 赞同：2
> 
> 时间：2012-12-05T02:51:46.750
> 
> 标签：php, mysql, forms

我正在使用以下代码进行测试：

```
<?php
$db = new PDO('mysql:host=localhost;dbname=test', 'root', 'root');

if(filter_has_var(INPUT_POST, 'submit')) {

  $r = $db->query('SELECT * FROM test WHERE value="'.$_POST['value'].'"');
  $n = $r->rowCount();

  for ($i=0; $i<=10000000; $i++) {
    // do nothing
  }

  if  (!$n) {
    $db->query('INSERT INTO test (id, value) VALUES (NULL, "'.$_POST['value'].'")');
  }

}
?>

<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
  <input type="text" name="value" value="">
  <input type="submit" name="submit" value="Submit">
</form> 
```

在 safari 中测试上述表单时，我可以通过快速单击提交按钮多次将相同的值提交到我的数据库中。

但是，当我使用此代码进行测试时：

```
<?php
$db = new PDO('mysql:host=localhost;dbname=test', 'root', 'root');

if(filter_has_var(INPUT_POST, 'submit')) {

  for ($i=0; $i<=10000000; $i++) {
    // do nothing
  }

  $r = $db->query('SELECT * FROM test WHERE value="'.$_POST['value'].'"');
  $n = $r->rowCount();

  if  (!$n) {
    $db->query('INSERT INTO test (id, value) VALUES (NULL, "'.$_POST['value'].'")');
  }

}
?> 
```

条件有效，无论我单击提交按钮的速度有多快，我都无法多次提交相同的值。

是否有可靠的方法来防止第一个代码片段发生重复的数据库插入，使其行为与第二个片段一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:12:22.460

一般来说，客户端`onsubmit`处理程序可以帮助阻止意外的快速提交，但我通常选择使用`_SESSION`变量的服务器端解决方案。只需创建一个`$_POST`数组的哈希，将其存储为会话变量，然后将下一个提交`_POST`的哈希版本进行比较：

```
session_start();
//if this is the first time they've posted, just create a placeholder session var
if (!isset($_SESSION['repost_hash'])){$_SESSION['repost_hash']="";}

//if the post array is a duplicate, nullify the submission
if (isset($_POST) && md5(serialize($_POST)) == $_SESSION['repost_hash']){ 
   unset($_POST);
} else { //otherwise, if this is new data, update the stored hash
   $_SESSION['repost_hash'] = md5(serialize($_POST));
}
... 
```

如果您只想在短时间内停止重复提交，您还可以让第二个`$_SESSION`变量存储最后一次哈希的时间，这样您就可以在一两秒后将其过期。

# git - 用于检查 git 的更改然后循环通过更改的文件的 shell 脚本？

> ID：13715544
> 
> 赞同：16
> 
> 时间：2012-12-05T02:53:22.040
> 
> 标签：git, bash, shell, pull

我正在尝试编写一个执行以下操作的 shell 脚本：

1.  检查远程 git 存储库是否有任何要提取的更改。
2.  如果远程 git 存储库中有更改，请拉取这些更改。
3.  循环浏览新的或已修改的文件。

通过我的研究，我发现了一些必要的命令来做这些事情，但我无法让它们在 shell 脚本中一起工作。

这是一个包含我拥有的一些命令的脚本：

```
#!/bin/sh

#Check if there are any changed files
git --git-dir="/dir/.git" fetch origin

if git --git-dir="/dir/.git" log HEAD..origin/master --oneline
then

#Output the modified files from the last pull
        git --git-dir="/dir/.git" diff --name-status ORIG_HEAD..

fi 
```

我无法使用此脚本中的命令的事情是：

1.  用于检查是否有变化或不总是正确的 if 语句。我尝试过使用其他 git 命令的 if 语句，它们也总是正确的。似乎 git 不像正常的 shell 命令那样工作，你得到 0 或 1 响应。如何获得这样的 git 命令或其他 git 命令以在 if 语句中返回正确的响应？
2.  如何将命令输出的变量分配给数组以查看更改的文件，以便我可以使用 for 循环遍历它们？

如果我的脚本中的命令在这种情况下不会真正起作用，那么有什么更好的方法呢？

编辑：抱歉，当我遍历更改的文件时应该更清楚，我需要在遍历文件之前从远程存储库中提取更改，以便在处理这些文件时获得最新的更改。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-05T03:15:52.820

对于您的第一个问题，您可以使用`git diff --quiet`（或`git diff --exit-code`，但通常当您将它用于其退出代码时，您希望它不打印输出，并且`git diff --quiet`暗示`--exit-code`）来确定是否有任何更改。如果有变化，这将为您提供 1 值，如果没有，则为 0。因此，如果您想拥有仅在发生更改时才运行的代码：

```
if ! git --git-dir="/dir/.git" diff --quiet
then
    # do stuff...
fi 
```

对于您的第二个问题，我建议使用`while read ...`循环从以下位置读取行`git diff-tree`：

```
git --git-dir="/dir/.git" diff-tree ORIG_HEAD.. | \
    while read srcmode dstmode srcsha dstsha status srcfile dstfile
    do
        # do something with $srcfile and $dstfile
    done 
```

请注意，开头`$srcmode`会有一个额外的，并且只有在文件被重命名时才会有一个值。如果您不想担心重命名，请传入，而不是看到重命名，您只会看到添加和删除。`:``$dstfile``--no-renames`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-08-09T13:47:19.277

您可以简单地使用`git diff --name-only`列出更改的文件的所有文件名。

例如，这里有一个简单的脚本来列出所有编辑的 PHP 文件并测试语法。

```
#!/bin/bash
files=`git diff --name-only | grep -E '.php$' `
for file in $files; do
  php -l $file
done 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T03:00:43.540

你是对的，`git`除非出现错误，否则通常不会以非零状态退出。我发现检测未提交更改的最简单方法是这样的：

```
 let changes=0
 while read status filename; do
    let changes=1
    # do something with this filename/status
 done < <(git status --porcelain)
 if (( ! changes )); then
    echo "No changes."
 fi 
```

一般来说，如果您要尝试从代码中驱动 git，您应该使用`--porcelain`那些支持它的子命令，以使其以更自动化的方式运行。您可能还想研究其他语言的库以与 git 交互，而无需构建自己的 shell 命令；例如，在 Ruby 中有[grit](http://rubygems.org/gems/grit)。

现在，在您的情况下，您想检测上游发生了什么变化。为此，您可能想要使用`git diff-tree`. 与上面类似的逻辑：

```
 git fetch   # not pull
 while read filename; do
   # do something with filename
 done < <(git diff-tree --name-only origin/master master)  # or whatever branch you're using 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-31T22:32:27.290

如果您正在编写脚本并希望确保 repo 处于提交状态（例如，没有新的、修改的或暂存的文件），请尝试以下操作：

```
# Get to code.  Exit if unsaved changes in repo
if `git status | grep -q "nothing to commit"`; then
  git checkout --quiet $BRANCH || exit 1
else
  echo "ERROR: repo has unsaved changes"
  exit 1
fi 
```

这是我能找到的最简单的检查新文件、更改文件和暂存文件的方法。

# flash - fusioncharts 可以与远程 swf 一起使用吗？

> ID：13715547
> 
> 赞同：1
> 
> 时间：2012-12-05T02:53:48.557
> 
> 标签：flash, fusioncharts

看：

```
var mychart = new FusionCharts("http://localhost/xx.swf") 
```

它来自我的本地计算机，它工作正常！！

但另一个

```
var mychart = new FusionCharts("http://192.168.1.44/xx.swf") 
```

这是来自另一台电脑。这没用。

为什么 ？

这。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:32:58.693

理想情况下它应该工作。但是，如果您从本地文件系统运行 HTML 并尝试访问远程 URL，许多浏览器（如 Chorme）将阻止此访问。

您需要检查浏览器的网络调试工具以查看 SWF 是否正确加载。

同样，由于 SWF 存在于不同的域中，因此 SWF 将不允许跨域 JavaScript 到 SWF（反之亦然）脚本。可以分两步处理：

1.  从另一个域加载 SWF 时，您需要在该服务器中保留一个跨域策略文件，同时声明允许访问哪个域。

2.  如果您有图表的 Flash 源代码，则需要在图表的动作脚本代码 (AS2) 中添加允许所有域并重新编译并重新使用。

`System.security.allowDomain ("*");`

参考：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/2/help.html?content=00001490.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/2/help.html?content=00001490.html)

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/2/help.html?content=00000466.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/2/help.html?content=00000466.html)

# ios - 下载文件应该放在哪个目录

> ID：13715548
> 
> 赞同：0
> 
> 时间：2012-12-05T02:53:50.647
> 
> 标签：ios, ios5, ios6

从ios5开始，NSDocument中的文件会自动上传到iCloud，如果NSDocument中的文件太大，Apple会拒绝该应用程序。我想知道我应该存储下载文件的路径，以及存储未完成文件的路径（应用程序终止时不会被删除）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:31:14.687

Caches 目录适用于可以在它们消失时替换的文件。换句话说，如果您下载的文件在被删除的情况下可以简单地再次下载，那么 Caches 目录是一个好地方。

如果下载的文件不可替换并且下载的文件是用户启动的应用程序数据，那么 Documents 目录实际上是一个好地方，不应该导致拒绝。

# php - 奇怪的 Zend 框架问题 - include_once 在错误的文件夹中查找

> ID：13715552
> 
> 赞同：1
> 
> 时间：2012-12-05T02:54:31.357
> 
> 标签：php, zend-framework, gdata

我自己花了很多时间对此进行故障排除，但我所阅读的内容都没有解决我的问题，所以我希望我能在这里得到一些帮助。

所以无论如何，我已经编写了一个 PHP 脚本，它提供了各种功能来连接 Google 日历。当我使用一些内联测试代码直接运行这个脚本来调用我的函数时，一切运行正常。但是，当我使用“require_once”从其他脚本调用该函数以包含它时，我收到以下错误：

```
Warning: include_once(Zend\Gdata\Calendar\Extension\EventQuery.php) [function.include-once]: failed to open stream: No such file or directory in C:\Users\Luke Franklin\Clients\Tiers For Tea\Development\TiersForTea.com v1.1\lib\Zend\Loader.php on line 134
Warning: include_once() [function.include]: Failed opening 'Zend\Gdata\Calendar\Extension\EventQuery.php' for inclusion (include_path='.;C:\xampp\php\PEAR;C:\Users\Luke Franklin\Clients\Tiers For Tea\Development\TiersForTea.com v1.1\lib;C:\xampp\htdocs\TiersForTea.com\lib') in C:\Users\Luke Franklin\Clients\Tiers For Tea\Development\TiersForTea.com v1.1\lib\Zend\Loader.php on line 134 
```

您的第一个想法可能是我没有使用正确的包含路径，但我已经检查并重新检查了很多次。我什至尝试对路径进行硬编码。我很确定我使用的是正确的路径。

现在是奇怪的一点。如果您查看错误，您会注意到 Zend 试图包含的文件：`Zend\Gdata\Calendar\Extension\EventQuery.php`. 该文件实际上并不存在于“扩展”文件夹中。它确实存在于父文件夹中。如果我只是将“EventQuery.php”复制到“扩展”文件夹中，我的脚本将按预期运行。很奇怪，对吧？

所以这确实解决了我的问题，但我想知道这里发生了什么，以防它产生更多问题。我还应该注意，我正在将此脚本调用到 OpenCart 模块中。

您可能想查看我的一些代码，所以这里是重要部分的片段，如果您想了解更多详细信息，请告诉我：

```
<?php
set_include_path(get_include_path() . PATH_SEPARATOR . realpath('\\lib') . PATH_SEPARATOR . "C:\\xampp\\htdocs\\TiersForTea.com\\lib");
require_once('Zend/Loader.php');

function connect() {
    Zend_Loader::loadClass('Zend_Gdata');
    Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
    Zend_Loader::loadClass('Zend_Gdata_Calendar'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:27:37.470

我怀疑任何 Zend 文件中都存在该错误，因为您已表明它在您的隔离测试中正常工作。

引发错误，`Zend_Loader`这意味着您的代码中的某些内容正在引用`Zend_Gdata_Calendar_Extension_EventQuery`.

如果可用于查明位置，请检查堆栈跟踪中的错误。如果那不可用，请对该字符串进行全局查找。如果您找到任何匹配项，您需要将它们更改为`Zend_Gdata_Calendar_EventQuery`.

## 更新

似乎这是一个已知的错误

*   [http://framework.zend.com/issues/browse/ZF-7013](http://framework.zend.com/issues/browse/ZF-7013)
*   [http://framework.zend.com/issues/browse/ZF-11959](http://framework.zend.com/issues/browse/ZF-11959)

当您的代码使用`ErrorException`. 显然它已在 1.12 分支中修复，但尚未发布。

11959 错误报告中有一个补丁可以解决这个问题

# mysql - 使用 sorl-thumbnail 和 Django Admin

> ID：13715554
> 
> 赞同：0
> 
> 时间：2012-12-05T02:54:47.637
> 
> 标签：mysql, django, django-admin, sorl-thumbnail

当我使用 sorl-thumbnail 尝试格式化我的 django 管理员个人资料图像时，我收到此错误“employee_directory.thumbnail_kvstore'不存在”。有没有人在使用 sorl-thumbnail 和 django admin changelist 时遇到这个问题？

```
DatabaseError at /directory/employee/
(1146, "Table 'employee_directory.thumbnail_kvstore' doesn't exist") 
```

我仔细检查了我的 sorl-thumbnail 安装，并确保我做了一个同步数据库。以下是我的 models.py 和 admin.py 中的代码

模型.py：

```
from django.db import models
from sorl.thumbnail import ImageField

# Department Table
class Department(models.Model):
    department_name = models.CharField(max_length=128)

    def __unicode__(self):
        return self.department_name

# Employee Directory Table
class Employee(models.Model):
    last_name = models.CharField(max_length=32)
    first_name = models.CharField(max_length=32)
    profile_image = models.ImageField(upload_to="images/profile_image", blank=True)
    department_name = models.ForeignKey('Department')
    job_title = models.CharField(max_length=64)
    office_number = models.CharField(max_length=8, blank=True)
    fax_number = models.CharField(max_length=8, blank=True)
    mobile_number = models.CharField(max_length=8, blank=True)
    intercom_number = models.CharField(max_length=3, blank=True)
    email = models.CharField(max_length=128)
    memo = models.TextField(blank=True)

    def __unicode__(self):
        return self.last_name + ', ' + self.first_name 
```

管理员.py：

```
from directory.models import *
from django.contrib import admin
from sorl.thumbnail import get_thumbnail

class EmployeeAdmin(admin.ModelAdmin):

    def profile_img(self, obj):
        if obj.profile_image:
            t = get_thumbnail(obj.profile_image,"50x50",crop='center', quality=99)
            return u'<img src="/media%s"/>' % t.url
        else:
            return u'profile_image'
    profile_img.short_description = 'Profile image'
    profile_img.allow_tags = True

    search_fields = ['last_name', 'first_name']
    list_display = ['profile_img', 'last_name', 'first_name', 'department_name', 
                    'job_title', 'office_number', 'fax_number', 
                    'mobile_number', 'intercom_number', 'email']
    list_filter = ['department_name']

admin.site.register(Department)
admin.site.register(Employee, EmployeeAdmin) 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T07:11:14.413

我完全没用，我忘了把 sorl.thumbnail 放在我的应用程序的 django 设置中。

# heroku - 如何将子域指向 Heroku 应用程序，将根域指向另一个 Heroku 应用程序？

> ID：13715556
> 
> 赞同：53
> 
> 时间：2012-12-05T02:55:03.767
> 
> 标签：heroku, dns

我无法将子域路由到 Heroku 上托管的 Wordpress 博客，并将根域路由到另一个 Heroku 应用程序。

如果我购买了一个名为`cheese.com`NameCheap 的域，并且我想路由一个子域，例如`blog.cheese.com`如何在 Heroku 上执行此操作？

我需要在每个 Heroku 应用程序上放置什么类型的设置？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-07-24T14:07:55.377

我不确定 NameCheap 的确切方向，但将子域重定向到 Heroku 应用程序的一般方法是将 CNAME 记录添加到子域。要重定向根域，您需要在区域顶点设置类似 CNAME 的功能。

**子域**

blog.cheese.com 将有一个指向 myblog.herokuapp.com 的 CNAME 记录，您可能还想为 www.blog.cheese.com 创建一个 CNAME 记录。

一个示例记录可能是：

```
Name: blog.cheese.com
TTL: 14400
Type: CNAME
Address: myblog.herokuapp.com 
```

设置两个 CNAME 记录后，您需要告诉 heroku 将域指向您的应用程序。

```
heroku domains:add --app myblog blog.cheese.com 
```

如果你对你的两个子域都这样做，它们现在应该指向你的 Heroku 应用程序。

**根域**

要指向根域，您需要设置几条记录

```
Host Name: @      
URL: http://www.cheese.com                
Record Type: URL Redirect

Host Name: www            
URL: mymainpage.herokuapp.com              
Record Type: CNAME (alias) 
```

一旦设置了两个记录，只需通过 Heroku 调用以下命令将您的域指向它。

```
heroku domains:add --app mymainpage.herokuapp.com cheese.com 
```

这里有几个地方可以寻找额外的信息。

[将 namecheap 域名指向 Heroku](http://blog.romansanchez.me/2013/06/08/point-namecheap-domain-to-heroku/)

[自定义域 | Heroku 开发中心](https://devcenter.heroku.com/articles/custom-domains)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:47:21.510

您必须将自定义域添加到您的 heroku 应用程序 - [https://devcenter.heroku.com/articles/custom-domains](https://devcenter.heroku.com/articles/custom-domains) - 设置必要的 DNS 后，您可以添加通配符

# javascript - 比较 javascript 中的 ISO 8601 日期字符串

> ID：13715561
> 
> 赞同：12
> 
> 时间：2012-12-05T02:56:29.193
> 
> 标签：javascript, string-comparison

我想将 javascript 中的 ISO 8601 日期作为字符串进行比较，而不是为每个字符串创建 Date 对象并比较对象。

```
var date_array = ['2012-10-01','2012-11-27','2012-12-23'];
console.log(date_array[0] < date_array[1])  // gives true
console.log(date_array[1] > date_array[2])  // gives false 
```

我这样做的原因是我相信字符串比较应该比为每个日期字符串创建对象和比较对象更快。

这些比较似乎在某些浏览器中按预期工作。我可以期望这种~~按字母顺序排列的~~ **字典** 字符串比较适用于所有浏览器吗？这种日期比较方法实际上比使用 Date 对象更快吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T03:03:56.560

使用该比较运算符将按字典顺序查看字符串值[，](http://en.wikipedia.org/wiki/Lexicographical_order)这意味着*字典顺序*。

`0`在 ASCII 中，十进制数字按从最小 ( , `0x30`) 到最大 ( `9`, )的顺序存储`0x39`。如果它们始终采用这种格式，从最大值（年）到最小值（日）并且总是`0`填充到可能的最大值，那么这些比较就可以了。

# css - 如何使用 CSS 模拟状态栏消息？

> ID：13715567
> 
> 赞同：2
> 
> 时间：2012-12-05T02:57:29.573
> 
> 标签：css

当您将鼠标悬停在链接上时，它会告诉您链接将您带到哪里。如何找出输出相同内容所需的 CSS？

我想我只需要知道浏览器用来发出此类消息的确切颜色/字体样式等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:04:05.267

1.  默认字体和样式因浏览器而异
2.  用户可能没有使用默认值
3.  为什么？

您最喜欢使用以下 CSS 沿着 span 或 div 的线条

```
#fakeStatusBar {
    background: #CCC;
    display: inline-block; 
    position: fixed;
    bottom: 0;
    left: 0;
} 
```

# asp.net-mvc - 覆盖默认 MVC 编辑器模板不起作用

> ID：13715570
> 
> 赞同：2
> 
> 时间：2012-12-05T02:58:00.033
> 
> 标签：asp.net-mvc, razor, mvc-editor-templates

我一直无法让默认编辑器模板在我的 MVC 4 Razor Web 应用程序中工作。我一直找不到任何线索。我想覆盖字符串、密码等。我已经在我的模型中尝试过 UIHints（即使你不应该使用默认编辑器模板），确保我在我的视图中使用 EditorFor 并将编辑器模板放在 ~ /视图/共享/编辑器模板。我被困住了。任何帮助，将不胜感激。谢谢！

```
 public class LoginModel
{
    [Required(AllowEmptyStrings = false)]
    [StringLength(128)]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required(AllowEmptyStrings = false)]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [Display(Name = "Remember me?")]
    public bool RememberMe { get; set; }

    [HiddenInput()]
    public Guid UserEmailAddressId { get; set; }

    [HiddenInput()]
    public bool IsVerified { get; set; }
} 
```

我绑定到我的模型的部分视图......

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>RegisterModel</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.UserName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.UserName)
        @Html.ValidationMessageFor(model => model.UserName)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.PrimaryEmailAddress)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.PrimaryEmailAddress)
        @Html.ValidationMessageFor(model => model.PrimaryEmailAddress)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Password)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Password)
        @Html.ValidationMessageFor(model => model.Password)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.ConfirmPassword)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.ConfirmPassword)
        @Html.ValidationMessageFor(model => model.ConfirmPassword)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.CultureId)
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model => model.CultureId, (IEnumerable<SelectListItem>)ViewBag.Cultures, " -- Select -- ", null)
        @Html.ValidationMessageFor(model => model.CultureId)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.TimeZoneId)
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model => model.TimeZoneId, (IEnumerable<SelectListItem>)ViewBag.TimeZones, " -- Select -- ", null)
        @Html.ValidationMessageFor(model => model.TimeZoneId)
    </div>

    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset> 
```

}

在 ~/Views/Shared/EditorTemplates/Password.cshtml 下的 Password.cshtml 文件中

```
@Html.Password("", ViewData.TemplateInfo.FormattedModelValue, new { @class = "k-textbox" })
THE EDITOR IS WORKING 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:05:18.287

原来我在看错误的视图。实际视图使用的是@Html.TextBoxFor，这就是密码的默认编辑器模板未呈现的原因。您需要使用 @Html.EditorFor 来调用默认的编辑器模板。

# spring - 为什么不应用转换？

> ID：13715571
> 
> 赞同：1
> 
> 时间：2012-12-05T02:58:19.113
> 
> 标签：spring, scala, implicit-conversion, jdbctemplate

我想在 spring 中使用 scala 的隐式转换`JdbcTemplate`。

`JdbcTemplate`有以下两种方法：

```
jdbcTemplate.update(String sql, Object... params)               // (1)

jdbcTemplate.update(String sql, PreparedStatementSetter pss)    // (2) 
```

`PreparedStatementSetter`只是一个接口，我只想将一个函数值传递给`JdbcTemplate`. 这意味着我想将其更改为

JdbcTemplate.update(sql: String, setter: PreparedStatement => Unit) // (3)

我所做的是创建`RichJdbcTemplate`，作为包装`JdbcTemplate`：

```
class RichJdbcTemplate(jdbcTemplate: JdbcTemplate) {

  def update(sql: String, setter: PreparedStatement => Unit) {
    jdbcTemplate.update(sql, new PreparedStatementSetter() {
      def setValues(ps: PreparedStatement) {
        setter(ps)
      }
    })
  }
} 
```

而且我希望每次调用`jdbcTemplate.update(sql, setter: PreparedStatement => Unit)` 时都会在`jdbcTemplate`and之间进行隐式转换`RichJdbcTemplate`。但实际上它并没有在这里进行隐式转换。因为这里的方法符合`jdbcTemplate.update(String sql, Object... params)`. 这就是为什么这里没有隐式转换的原因。有没有其他解决方案可以实现这一目标？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T03:23:26.643

只需给您的方法起一个不同的名称即可；叫它`updateWithFunction`什么的。

正如您所提到的，问题在于 Scala 不寻找隐式转换，因为它直接在`JdbcTemplate`. 绕过它的方法是使用在 . 上找不到*的*`JdbcTemplate`名称。

您也可以显式地进行包装`new RichJdbcTemplate(jdbcTemplate).update(...)`，但这更难看。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T04:47:08.220

将更新方法重命名为其他名称。在对象中定义隐式转换并导入范围：

```
object MyImplConversions {
  implicit def toRichJdbcTemplate(jdbcTemplate: JdbcTemplate) =
    new RichJdbcTemplate(jdbcTemplate)
} 
```

# jquery - 每次点击都有新的精灵动画

> ID：13715572
> 
> 赞同：1
> 
> 时间：2012-12-05T02:58:20.063
> 
> 标签：jquery, click, sprite, frames, spritely

我试图在我的页面上有一个使用 Spritely 脚本进行动画处理的角色。我使用的精灵表总共包含 92 帧。我希望动画可以点击。

第一次单击它时，我希望它播放到第 70 帧并停止。然后，下次单击它时，我希望动画从第 70 帧播放到第 92 帧并停止。

我应该如何编写代码？

到目前为止，我能够让动画播放到第 70 帧并停止。即使作为初学者 Web 开发人员，这也相当容易。

这是我到目前为止所拥有的：

```
$('#stacheguy2').click(function() {
    $(this)
    .sprite({fps: 30, no_of_frames: 92, play_frames: 70,})

}); 
```

使用此代码，当您单击角色时，它会播放第 1-70 帧并停止。那挺好的。但是，下次单击它时，它会从第 70 帧开始并继续播放另外 70 帧。如何更改此设置以使动画仅在第二次单击时播放第 70 到 92 帧？

PS：我希望最终让角色为每次点击执行不同的帧序列。

如果您能帮助我解决这个问题，我将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:14:47.500

我很难找到一个包含 92 个图像的 PNG 文件进行测试，所以我不得不使用一个较短的文件。这是一个工作示例：http: [//jsfiddle.net/Yhrbb/](http://jsfiddle.net/Yhrbb/)

示例中的代码是这样的：

```
(function() {
    var total = 92;
    var play_on_click = 72;
    var played = 0;

    $('#fly').click(function() {
        if (played >= total) {
            return;
        }

        var current_play;

        if (play_on_click > (total - played)) {
            current_play = total - played;
        }
        else {
            current_play = play_on_click;
        }

        played += current_play;
        $('#bird').sprite({fps: 12, no_of_frames: 3, play_frames: current_play});
    });
})(); 
```

我们可以将其调整为适合您，如下所示：

```
​(function() {
    var total = 92;
    var play_on_click = 72;
    var played = 0;

    $('#stacheguy2').click(function() {
        if (played >= total) {
            return;
        }

        var current_play;

        if (play_on_click > (total - played)) {
            current_play = total - played;
        }
        else {
            current_play = play_on_click;
        }

        played += current_play;
        $(this).sprite({fps: 30, no_of_frames: 92, play_frames: current_play});
    });
})(); 
```

请注意，一旦我们达到总帧数，我们只需使用`return`on忽略额外的点击`if (played >= total)`。你可以在那个时候重置`played`或做任何你想做的事情。如果这不起作用，您是否介意发布您的 PNG 文件或类似长的文件以在 jsfiddle 中使用。

# 使用数组配置帧数

如果您想在每次单击时播放配置数量的帧，您可以这样做：http: [//jsfiddle.net/dNYks/](http://jsfiddle.net/dNYks/)

```
(function() {
    var play_on_click = [32, 21, 10, 20];
    var play_index = 0;

    $('#fly').click(function() {
        var current_play = play_on_click[play_index];

        play_index++;
        if (play_index > play_on_click.length-1) {
            play_index = 0;
        }

        $('#bird').sprite({fps: 12, no_of_frames: 3, play_frames: current_play});
    });
})(); 
```

我们可以调整此代码以匹配您的标记，如下所示：

```
(function() {
    var play_on_click = [32, 21, 10, 20];
    var play_index = 0;

    $('#stacheguy2').click(function() {
        var current_play = play_on_click[play_index];

        play_index++;
        if (play_index > play_on_click.length-1) {
            play_index = 0;
        }

        $(this).sprite(fps: 30, no_of_frames: 92, play_frames: current_play});
    });
})(); 
```

​</p>

​</p>

# php - Yii：其他动作的数据缓存

> ID：13715575
> 
> 赞同：1
> 
> 时间：2012-12-05T02:58:41.947
> 
> 标签：php, caching, yii, twitter

我有一个使用 API 将 twitter 链接到它的应用程序，在此操作中，我创建了一个请求密钥，在此处完成：

```
 public function createRequestKey()
 {
     $this->setScenario(self::SCENARIO_DEFAULT);
     if (!$this->validate())
         return false;

     $cache = \Yii::app()->cache;
     $key = __CLASS__ . '_' . $this->user->id . '_' . time() . '_' . rand(0, 100);
     $key = sha1($key);
     $data = array(
         'userId' => $this->user->id,      
     );
     $cache->set($key, $data, 60 * 30);
     $this->requestKey = $key;
     return true;
 } 
```

调用此方法的操作是这样的：

```
 public function actionTwitterLinkUrl()
 {
    if (!$this->checkOAuthRequest())
        return;

    $request  = \Yii::app()->getRequest();
    $response = \Yii::app()->response->setContentTypeToJSON();

    $user = $this->getUserFromHeader();
    $this->matchUserToLastValidatedToken($user);

    $linker = new \Sakanade\Operations\APITwitterLinker($user);
    if ($linker->createRequestKey()) {
        $params = $this->createQueryStringParams($linker->requestKey);
        $response->set('type',UserProfile::profileTypeToString(UserProfile::PROFILETYPE_TWITTER))
                 ->set('url', $request->getBaseUrl(true) . '/users/' . urlencode($user->id)
                 . '/profiles/twitter/link?' . http_build_query($params));
    } else {
        $response->setStatusCode(\Harusame\Components\HttpResponse::STATUS_BAD_REQUEST)
                 ->addMessage(\Sakanade\Models\Model::flattenErrorMessages($linker));
    }

    $response->render();
 } 
```

但是在调用下一个操作时，如果我使用 $cache->get($key) 访问缓存，它会返回 false，即使它将缓存的存储时间设置为大约 1800 秒。

```
public function actionTwitterRunLink()
{
    $request = \Yii::app()->request;
    $requestKey = $request->getQuery('key');
    if (!$this->checkOAuthRequest())
        return;

    $user = $this->getUserFromHeader();
    $this->matchUserToLastValidatedToken($user);

    $authUrl = $this->getAuthorizationUrl($user);
    $response = \Yii::app()->response->setContentTypeToJSON();
    $cache = \Yii::app()->cache;
    $response->set('key', $cache->get($requestKey))
             ->set('key2', $requestKey);
    $response->render();
} 
```

从缓存中显示呈现的键后，它会返回 false，但是如果我尝试从上一个操作中获取它，则会有一个返回值。为什么在调用另一个操作时会清除缓存？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:21:21.650

如果我没有记错缓存时间，如果没有从“现在”引用，我认为应该是：

```
$cache->set($key, $data, time() + (60 * 30)); 
```

# javascript - 用于 div 显示的翻转 javascript

> ID：13715576
> 
> 赞同：0
> 
> 时间：2012-12-05T02:58:47.127
> 
> 标签：javascript, jquery, html, css, asp-classic

我正在尝试为几个链接完成翻转或悬停以显示带有一些屏幕截图的 div。我应该如何编写这个脚本？

这是我的 HTML

```
<section class="tabs-content">
      <table class="imagetable" cellpadding="0" cellspacing="0" width="100%">
    <tr>
      <th colspan="2" class="reportname">Exam Reports</th>
    </tr>
    <tr>
      <td valign="top" class="formlabel" width="50%"><p><strong>For Faculty</strong><br />
      </p>
        <ul>
          <li><strong><a href="#">Exam Summary</a></strong><br /> 
            <em>Colorful and attractive end-of-exam report provides a clean summary from Learning Outcomes to At-Risk students<br />
            </em><br />
          </li>
          <% if session("medical") = 1 then %>
          <li><strong><a href="exams_category.asp">Category Analysis</a></strong><br />
            <em>Learning outcomes performance breakdown</em><br />
            <br />
          </li>
          <% end if %>
          <li><strong><a href="exams_itemanalysis.asp">Item/Question Analysis</a></strong><br />
            <em>Take an in-depth look at each item and its' performance</em><br />
<br />
          </li>
          <li><strong><a href="exams_etresults.asp">List of Students Scores</a></strong><br />
            <em>Simple list of every exam takers performance…configurable</em></li>
          </ul>
        <p>&nbsp;</p>
        <p><strong>For Students</strong><br />
        </p>
        <ul>
          <li><strong><a href="exams_release.asp">Release results directly to students</a></strong><br />
            <em>Make results available to students&hellip;configurable from simple to colorful</em></li>
        </ul></td>
      <td valign="top" class="formfield"  width="50%"><p><strong>Misc Administrative Reports<br /> <!--this section will be hidden and an image placeholder will display the images from the above report links-->
      </strong></p>
      <ul>
        <li><a href="exams_elapsedtime.asp">ET Elapsed Time</a></li>
        <li><a href="exams_backwardnav.asp">Backward Navigation</a></li>
        <li><a href="exams_unanswered.asp">Unanswered Essays</a></li>
        <li><a href="exams_midexam.asp">Mid-Exam Restart</a></li>
        <li><a href="exams_hardware.asp">Hardware Comparison</a></li>
        <li><a href="exams_absentee.asp">Absentee Report</a></li>
        <li><a href="exams_missingkeyword.asp">Missing Keywords</a></li>
      </ul></td>
      </tr>
    </table>
  </section>

    </div>
</div> 
```

想法？我希望最后一个列表被上述链接翻转时的图像替换。

克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T03:10:26.713

使用 jQuery 的 .hover() 方法。它允许您定义当用户将鼠标悬停在选择器上时触发的方法。它还有一个 hoverOut 事件处理程序，您可以在其中定义一个方法来解决用户离开选择器的问题。

[jQuery悬停API](http://api.jquery.com/hover/)

这与您相关：

> .hover( handlerIn(eventObject), handlerOut(eventObject) ) handlerIn(eventObject) 当鼠标指针进入元素时执行的函数。handlerOut(eventObject)当鼠标指针离开元素时执行的函数。

所以你应该做这样的事情：

```
$('yourLinkSelector').hover(function(){
       //handle the user mouseover here..
       //remove last list
       //show your screenshot div
   }, function(){
       //handle the mouseout here..
       //do whatever div removal you need for the screenshot div
       //show last list again...
}); 
```

# jquery - 没有使用 jquery $.post() 方法发布数据

> ID：13715580
> 
> 赞同：0
> 
> 时间：2012-12-05T02:58:57.173
> 
> 标签：jquery

没有发布数据代码，当我在网络选项卡中打开 html 文档时，它没有显示 POST 到 php 文档

```
$(document).ready(function() {
   $(document).delegate('#target','submit',function(e) {
       var data=$("#target:input").serializeArray();
       alert ('hi'); 
       $.post("signin.php",data,function(json) {
           if(json.status=='fail') {
               alert(json.message);
               return false;
           }
           else if(json.status=='success') {
               alert(json.message);
               return false;
           }
      }).error({alert("internal error");});
   });
 }); 
```

我想将数据发布到其中的 php 代码是：

```
<?php
 echo $_POST['txt1'].$_POST['txt2'];
 ?> 
```

我想通过它发布数据的html表单是

```
<div class="sld_dwn">
  <form class="sign_in_form" id='target'>
  <div>
  <a class="sign_in_data" >email:</a>
  </br>
  <input type="text" class="sign_in_box" name='txt1'>
  <a class="sign_in_data1">password:</a>
  </br>
  <input type="password" class="sign_in_box1"name='txt2' >
  </div>
  <a href='http://localhost' class="forgot">forgot password</a></br>
  <!--<input type="checkbox"><a class="stay">stay signin</a>-->
  <input type='submit' class="but_signin1" value='Sign in'>
  </form>
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:21:59.157

更改代码部分：

```
}).error({alert("internal error");}); 
```

至

```
}).error( function() { alert("internal error"); }); 
```

和

```
var data=$("#target:input").serializeArray(); 
```

至

```
var data=$("#target").serialize(); 
```

或者

```
var data=$("#target").find("input").serialize(); 
```

将 dataType 添加到您的 POST 中，例如：

```
$(document).ready(function() {
   $(document).delegate('#target','submit',function(e) {
       var data=$("#target:input").serializeArray();
       alert ('hi'); 
       $.post("signin.php",data,function(json) {
           if(json.status=='fail') {
               alert(json.message);
               return false;
           }
           else if(json.status=='success') {
               alert(json.message);
               return false;
           }
      }, "json").error({alert("internal error");});
   });
 }); 
```

和 php

```
<?php
  echo json_encode( array("status" => "success") );
?> 
```

# android - LibGdx GC_Concurrent running

> ID：13715582
> 
> 赞同：6
> 
> 时间：2012-12-05T02:59:02.533
> 
> 标签：android, garbage-collection, libgdx

我有一个游戏正在运行，但它一直在随机卡顿。这让我觉得 GC 正在运行。查找代码后，我看到很多 GC_CONCURRENT 消息，例如每秒 4-5 条。

```
12-04 22:14:22.018: D/dalvikvm(4757): GC_CONCURRENT freed 510K, 7% free 10139K/10823K, paused 4ms+6ms
12-04 22:14:22.288: D/dalvikvm(4757): GC_CONCURRENT freed 497K, 7% free 10139K/10823K, paused 3ms+7ms
12-04 22:14:22.558: D/dalvikvm(4757): GC_CONCURRENT freed 497K, 7% free 10139K/10823K, paused 3ms+6ms
12-04 22:14:22.823: D/dalvikvm(4757): GC_CONCURRENT freed 497K, 7% free 10139K/10823K, paused 3ms+7ms 
```

我已经将我的罪魁祸首缩小到我的渲染类。我刚刚学习 LibGdx（这是我的第一个 LibGdx 应用程序），想知道是否有人能看到问题所在。

```
public void render(){

    batch.begin();

    //Draw background
    batch.draw(skin.getSprite("background_chapter"), 0+(SIDE_EDGE*scaleX), 0+(BOTTOM_EDGE*scaleY), CAMERA_WIDTH, CAMERA_HEIGHT);

    //draw tiles
    bIter = world.getBlocks().iterator();
    while(bIter.hasNext()){
        tile = bIter.next();

        switch(tile.getType()){
        case Values.ICE:
            continue;
        (many more cases...)
        }   
        batch.draw(skin.getSprite(tr), tile.getPosition().x*scaleX, tile.getPosition().y*scaleY, tile.getBounds().width*scaleX, tile.getBounds().height*scaleY);
    }

    //put ice on top of other level elements, non mobile ice on bottom
    bIter = world.getBlocks().iterator();
    while(bIter.hasNext()){
        tile = bIter.next();
        if(tile.getType() == Values.ICE && tile.getCollide() == false){
         batch.draw(skin.getSprite("ice"), tile.getPosition().x*scaleX, tile.getPosition().y*scaleY, tile.getBounds().width*scaleX, tile.getBounds().height*scaleY);
        }
    }

            //mobile ice on top
    bIter = world.getBlocks().iterator();
    while(bIter.hasNext()){
        tile = bIter.next();
        if(tile.getType() == Values.ICE && tile.getCollide() == true){
             batch.draw(skin.getSprite("ice"), tile.getPosition().x*scaleX, tile.getPosition().y*scaleY, tile.getBounds().width*scaleX, tile.getBounds().height*scaleY);
        }
    }

    //pauly on top
    batch.draw(skin.getSprite("pauly_moving"), pauly.getBounds().x*scaleX, pauly.getBounds().y*scaleY, pauly.getBounds().width*scaleX, pauly.getBounds().height*scaleY);

    batch.draw(skin.getSprite("background_chapter"), 0+(SIDE_EDGE*scaleX), (9.6f*scaleY), CAMERA_WIDTH, 1*scaleY);

    //draw UI elements
    batch.draw(skin.getSprite("pause_menu_icon"), CAMERA_WIDTH-(SIDE_EDGE*scaleX), CAMERA_HEIGHT-(0.25f*scaleY), 1*scaleX, 1*scaleY);
    batch.draw(skin.getSprite("restart_menu_icon"), SIDE_EDGE*scaleX, CAMERA_HEIGHT-(0.25f*scaleY), 1*scaleX, 1*scaleY);

    font.draw(batch, "Moves: "+pauly.getCurrentMoves()+"/ "+world.getLevel().getMovesNeeded(), 2f*scaleX,10.1f*scaleY);

    font.draw(batch, world.getLevel().getTitle(), 6f*scaleX,10.1f*scaleY);
    //draws the FPS on screen
    font.draw(batch, "FPS: "+(Gdx.graphics.getFramesPerSecond()), 12f*scaleX,10.1f*scaleY);

    if(world.getState()==Values.PAUSED){
        batch.draw(skin.getSprite("pause_menu"), 0+(SIDE_EDGE*scaleX), 0+(BOTTOM_EDGE*scaleY), CAMERA_WIDTH, CAMERA_HEIGHT);
        //Gdx.app.log("WorldRenderer", "Game Paused");
    } else if(world.getState()==Values.LOOSE){
        batch.draw(skin.getSprite("die_menu"), 0+(SIDE_EDGE*scaleX), 0+(BOTTOM_EDGE*scaleY), CAMERA_WIDTH, CAMERA_HEIGHT);
        //Gdx.app.log("WorldRenderer", "Game Paused");
    } else if(world.getState()==Values.WIN){
        batch.draw(skin.getSprite("win_menu"), 0+(SIDE_EDGE*scaleX), 0+(BOTTOM_EDGE*scaleY), CAMERA_WIDTH, CAMERA_HEIGHT);
        //Gdx.app.log("WorldRenderer", "Game Paused");
    } 

    batch.end();

} 
```

我试过注释掉块，看起来我到处都收到了 GC 调用，尽管更多的是在中间。

编辑：答案

使用下面的答案，我使用 DDMS 查看分配。它每秒生成大约 100 个新对象……float[]、纹理区域、精灵……所有这些都与

```
skin.getSprite("texture"); 
```

每个调用都在制作一个 float[]、一个纹理区域和一个 sprite。所以感谢 DDMS 分配查找。解决方案是 Yul 通过在构造函数中创建精灵（字段）然后使用在线调用它们来所说的。

所以这...

```
batch.draw(skin.getSprite("background_chapter"), 0+(SIDE_EDGE*scaleX), 0+(BOTTOM_EDGE*scaleY), CAMERA_WIDTH, CAMERA_HEIGHT); 
```

改成这个了……

```
//in constructor()
background = skin.getSprite("background_chapter");

//in render()
batch.draw(background, 0+(SIDE_EDGE*scaleX), 0+(BOTTOM_EDGE*scaleY), CAMERA_WIDTH, CAMERA_HEIGHT); 
```

现在不再有 GC 调用，游戏运行起来似乎更流畅了。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:44:03.643

使用 DDMS Allocation Tracker 工具跟踪具体问题所在。（在您的 Android 设备上运行该应用程序，打开 DDMS 窗口，切换到 Allocation Tracker 选项卡，在“设备”选项卡中选择您的进程，开始您的游戏，单击“开始跟踪”，等待几秒钟，单击“获取分配” ”，查看数据表。我发现对 threadId 进行排序是一种将渲染线程活动与其他后台线程隔离开来的好方法。）

迭代器创建临时对象，因此特别是在渲染循环中，您应该使用显式索引。

字符串连接也会创建临时对象。

可能还有许多其他微妙的地方正在分配内存，但解决这个问题的正确方法是使用正确的工具。

# php - 在和之间选择 *

> ID：13715583
> 
> 赞同：1
> 
> 时间：2012-12-05T02:59:04.287
> 
> 标签：php, mysql

我正在尝试使用 MySQL 从数据库中选择事件列表。我对 php 还很陌生，但通常我可以弄清楚。不能接缝让这个工作虽然..

```
function get_events_within_dates($da,$dd) {
    global $connection;
    $query = "SELECT * 
        FROM events
        WHERE date 
        BETWEEN STR_TO_DATE('$da','Y-m-d') AND STR_TO_DATE('$dd','Y-m-d')            
        ORDER BY date ASC"; 
```

我用`$da`and`$dd`作为到达日期和离开日期..

当我用确切的日期替换变量时，我可以让它正常工作，尝试弄乱`STR_TO_DATE()`它并没有帮助。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:01:28.280

您缺少`%`格式字符串。用作`STR_TO_DATE()`：

```
 STR_TO_DATE('$da','%Y-%m-%d') 
```

完整查询如下：

```
 $query = "SELECT * 
             FROM events
             WHERE date BETWEEN STR_TO_DATE('$da','%Y-%m-%d') 
                        AND STR_TO_DATE('$dd','%Y-%m-%d')            
             ORDER BY date ASC"; 
```

# java - 如何使用外部 Java 程序将文件添加到 Lotus Notes 应用程序中的 .nsf

> ID：13715584
> 
> 赞同：0
> 
> 时间：2012-12-05T02:59:06.957
> 
> 标签：java, lotus-notes

我正在做一个项目，我需要将我的输出 excel 文件存储到 lotus notes .nsf 文件中，以便所有相关人员都可以通过 lotus notes 应用程序访问它。已经有一个现有的应用程序，但前面的过程是手动将 excel 文件添加到应用程序中。现在他们希望使用 java (netbeans IDE) 自动完成。

所以，我的问题是，任何人都可以指导我如何做到这一点的好资源。通常不使用 Lotus domino 设计器或仅使用 java API。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T04:03:42.180

首先阅读 Bob Balaban 的书“用 Java 编程 Domino”。它已经很老了，但它会为您理解 Domino 概念和 Java API 提供一个很好的开端。它是*免费*的，因为 Bob 已将其作为一系列 PDF 发布在他的博客中，请[点击此处](http://www.bobzblog.com/tuxedoguy.nsf/dx/programming-domino-with-java-final-flush)。它实际上可能涵盖了您真正需要了解的所有内容，该程序仅用于创建文档和附加文件。当然，一旦您阅读并开始编写代码，您可以回到 StackOverflow 寻求任何具体问题的帮助。

此外，Java API 的所有文档都包含在 Domino Designer 的帮助数据库中。即使您不想也不需要为您的项目使用 Domino Designer，您仍然应该安装它，以便您可以轻松访问所有类、方法和属性的帮助。

哦，还有一件事。书中遗漏了一件大事，那就是所有类的 recycle() 方法。它在本书编写时尚未开发，对于避免处理大量文档的代码中的内存泄漏至关重要。这是[一篇](http://www-01.ibm.com/support/docview.wss?uid=swg21097861)解释它的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:23:06.230

由于您可以使用 Java 访问 Notes API，因此您应该可以使用 NotesRichTextItem 类的 EmbedObject 方法。所有这些都记录在 Designer 帮助中：

**嵌入对象方法**

给定文件或应用程序的名称，可以：

*   将您指定的文件附加到富文本项目。
*   在富文本项中嵌入 OLE/1 对象。OLE/1 对象是使用您指定的文件创建的。

*定义在：RichTextItem*

**句法：**

```
public EmbeddedObject embedObject(int type, String class,
String source, String name)
    throws NotesException 
```

**参数**

```
int type 
```

以下之一：

*   EmbeddedObject.EMBED_ATTACHMENT
*   EmbeddedObject.EMBED_OBJECT（仅限 OLE/1 对象）

    字符串类

指定一个空字符串 ("")。

```
String source 
```

指定要附加或嵌入的文件的名称。

```
String name 
```

细绳。稍后可以引用 EmbeddedObject 的名称。可以为空。

**返回值**

```
EmbeddedObject 
```

新附加的文件或嵌入的 OLE/1 对象。

**用法**

文件可以附加到任何支持的平台上。文件可以作为 OLE/1 对象嵌入到任何受支持的平台上（如果文件属于受支持的类型，例如 Lotus® 应用程序数据文件）。

# algorithm - 采访 - 甲骨文

> ID：13715590
> 
> 赞同：4
> 
> 时间：2012-12-05T03:00:30.367
> 
> 标签：algorithm

在一场比赛中，唯一可以得分的分数是 2、3、4、5、6、7、8，并且可以任意次数

球队可以玩的组合总数是多少，球队可以达到50分。

例如 8,8,8,8,8,8,2 有效 8,8,8,8,8,4,4,2 也有效。ETC...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:48:13.450

这个问题可以用动态规划来解决，有2个参数：

*   `i`- 我们考虑到的索引
*   `s`- 总分。

`f(i, s)`将包含达到 score 的方法总数`s`。

让成为可以做出的**唯一正**`score[]`分数的列表。

 **DP溶液的配方：

```
f(0, s) = 1, for all s divisible to score[0]
f(0, s) = 0, otherwise

f(i + 1, s) = Sum [for k = 0 .. floor(s/score[i + 1])] f(i, s - score[i + 1] * k) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T03:15:05.590

这看起来像是一个硬币找零问题。不久前我为它写了一些 Python 代码。

**编辑解决方案：**

```
from collections import defaultdict

my_dicto = defaultdict(dict)

def row_analysis(v, my_dicto, coins):
    temp = 0
    for coin in coins:
        if v >= coin:
            if v - coin == 0: # changed from if v - coin in (0, 1):
                temp += 1
                my_dicto[coin][v] = temp
            else:                
                temp += my_dicto[coin][v - coin]
                my_dicto[coin][v] = temp
        else:
            my_dicto[coin][v] = temp
    return my_dicto

def get_combs(coins, value):
    '''
    Returns answer for coin change type problems.
    Coins are assumed to be sorted.

    Example:
        >>> get_combs([1,2,3,5,10,15,20], 50)
        2955
    '''
    dicto = defaultdict(dict)

    for v in xrange(value + 1):
        dicto = row_analysis(v, dicto, coins)

    return dicto[coins[-1]][value] 
```

在你的情况下：

```
>>> get_combs([2,3,4,5,6,7,8], 50)
3095 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T03:47:32.593

这就像访问一个 7 个分支的决策树。

代码是：

```
class WinScore{
static final int totalScore=50;
static final int[] list={2,3,4,5,6,7,8};
public static int methodNum=0;

static void visitTree( int achieved , int index){
        if (achieved >= totalScore ){
                return;
        }
        for ( int i=index; i< list.length; i++ ){
                if ( achieved + list[i] == totalScore ) {
                        methodNum++;
                }else if (  achieved + list[i] < totalScore ){
                        visitTree( achieved + list[i], i );
                }
        }
}
public static void main( String[] args ){
        visitTree(0, 0);
        System.out.println("number of methods are:" + methodNum );

}
}
output:
number of methods are:3095 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T12:10:33.373

刚刚偶然发现了这个问题 - 这是 ac# 变体，它允许您探索不同的组合：

```
static class SlotIterator
{
    public static IEnumerable<string> Discover(this int[] set, int maxScore)
    {
        var st = new Stack<Slot>();
        var combinations = 0;
        set = set.OrderBy(c => c).ToArray();
        st.Push(new Slot(0, 0, set.Length));
        while (st.Count > 0)
        {
            var m = st.Pop();
            for (var i = m.Index; i < set.Length; i++)
            {
                if (m.Counter + set[i] < maxScore)
                {
                    st.Push(m.Clone(m.Counter + set[i], i));
                }
                else if (m.Counter + set[i] == maxScore)
                {
                    m.SetSlot(i);
                    yield return m.Slots.PrintSlots(set, ++combinations, maxScore);

                }
            }
        }
    }

    public static string PrintSlots(this int[] slots, int[] set, int numVariation, int maxScore)
    {
        var sb = new StringBuilder();
        var accumulate = 0;
        for (var j = 0; j < slots.Length; j++)
        {
            if (slots[j] <= 0)
            {
                continue;
            }
            var plus = "+";
            for (var k = 0; k < slots[j]; k++)
            {
                accumulate += set[j];
                if (accumulate == maxScore) plus = "";
                sb.AppendFormat("{0}{1}", set[j], plus);
            }
        }

        sb.AppendFormat("={0} - Variation nr. {1}", accumulate, numVariation);
        return sb.ToString();
    }
}
public class Slot
{
    public Slot(int counter, int index, int countSlots)
    {
        this.Slots = new int[countSlots];
        this.Counter = counter;
        this.Index = index;
    }

    public void SetSlot(int index)
    {
        this.Slots[index]++;
    }

    public Slot Clone(int newval, int index)
    {
        var s = new Slot(newval, index, this.Slots.Length);
        this.Slots.CopyTo(s.Slots, 0);
        s.SetSlot(index);
        return s;
    }

    public int[] Slots { get; private set; }

    public int Counter { get; set; }

    public int Index { get; set; }
} 
```

例子：

```
 static void Main(string[] args)
    {

        using (var sw = new StreamWriter(@"c:\test\comb50.txt"))
        {
            foreach (var s in new[] { 2, 3, 4, 5, 6, 7, 8 }.Discover(50))
            {
                sw.WriteLine(s);
            }
        }
    } 
```

产生 3095 种组合。**

# python - 基于实例变量有条件地禁用缓存装饰器

> ID：13715594
> 
> 赞同：3
> 
> 时间：2012-12-05T03:00:46.363
> 
> 标签：python, caching, beaker

我想缓存一个类的某些方法——但`read_only`前提是在类的实例上设置了一个标志。

所以，在下面的对象中，我希望该`get()`方法是可缓存的，但前提`self.readonly`是它是 True。

我不能有条件地使用装饰器，因为它是在定义类时设置的，而不是在实例化时设置的。

```
from beaker.cache import cache_regions, cache_region
cache_regions.update({
    'long_term':{
        'expire':86400,
        'type':'dbm',
        'data_dir':'/tmp',
        'key_length': 32,
    }
})

class Foo(object):
  def __init__(self, read_only=True):
    self.read_only = read_only

  @cache_region('long_term')
  def get(self, arg):
    return arg + 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T03:40:34.500

您可以使用装饰器调用正确的（缓存与否）函数来检查所需的属性：

```
def conditional(decorator):

    def conditional_decorator(fn):
        dec = decorator(fn)
        def wrapper(self, *args, **kw):
             if self.read_only:
                 return dec(self, *args, **kw)
             return fn(self, *args, **kw)
        return wrapper

    return conditional_decorator 
```

像这样使用：

```
@conditional(cache_region('long_term'))
def get(self, arg):
    return arg + 1 
```

# macos - 如何绕过“Adobe Flash Player 已停止可能不安全的操作”。使用本地文件在 Mac 10.7 上运行

> ID：13715595
> 
> 赞同：0
> 
> 时间：2012-12-05T03:00:54.250
> 
> 标签：macos, flash, local-storage

我在扯头发。我有一个复杂的 Flash 播放器应用程序，我想在本地 Mac 10.7.4 上运行它。大约一年前，我在早期的 Mac OS 上使用早期的 Flash 播放器进行了设置，有时我不得不摆弄全局设置等，但它总是有效。但是现在 flash 已经决定（明智地）从本地系统偏好设置中处理有关使用 Flash 的安全设置。这是适当的屏幕，它*应该*让我告诉 Flash 我正在打开文件夹中的文件：

![在此处输入图像描述](../Images/44365251fc6206daed330332835278f8.png)

您可以看到我拼命尝试让闪存让我在 /Users/peter/BTDE2/ 等中打开文件 - 都失败了。为什么？我该如何解决这个问题？还是我只是放弃闪存作为一项可怕的糟糕工作......

从[http://help.adobe.com/en_US/FlashPlayer/LSM/WS6aa5ec234ff3f285139dc56112e3786b68c-7ff0.html#WS6aa5ec234ff3f285139dc56112e3786b68c-7feb](http://help.adobe.com/en_US/FlashPlayer/LSM/WS6aa5ec234ff3f285139dc56112e3786b68c-7ff0.html#WS6aa5ec234ff3f285139dc56112e3786b68c-7feb)的文档中可以看出，**应该**有一个修复程序。据此，“高级”面板上应该有一个“开发人员工具”控件，可以访问“受信任的位置”设置。好吧，这是 Flash 系统偏好设置中的高级面板，它没有显示这样的选择。好像有人在什么地方搞砸了。

![在此处输入图像描述](../Images/6cebd3961f2441901c0571d453338f0b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:36:01.770

在 Flash Player 面板中，您不能向下滚动以显示开发人员工具吗？ ![开发工具](../Images/8adbdaa8ebfab511afba793bf3661ae0.png)

# php - 从值不存在的表中选择

> ID：13715596
> 
> 赞同：2
> 
> 时间：2012-12-05T03:01:08.403
> 
> 标签：php, mysql, select

我有一张表 ( `country_table`)，其中列出了所有国家/地区及其各自的 ID。

```
|country_id|country_name|
|ES        |Spain       |
.
.
. 
```

我有一个数组，使用它从另一个表中获取`fetch_array`，如下所示：

```
$array = Array(
    [0]=>Array([country_id]=>'ES')
    [1]=>Array([country_id]=>'DE')
    [2]=>Array([country_id]=>'GB')) 
```

如何从中选择`country_table`不存在于表中但存在于数组中的记录（country_id 和 country_name）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:11:07.010

```
$sql ="SELECT country_id, country_name FROM country_table
       WHERE country_id NOT IN (". implode(",", $array) .")"; 
```

[`implode()`](http://php.net/manual/en/function.implode.php)函数将生成数组元素的逗号分隔字符串表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:04:49.470

这是sql。

```
select country_id, country_name from table where country_id not in ('ES','DE','GB'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T03:33:32.183

```
// gather unwanted id's first
$notInIds = array();
foreach ($array as $arr) $notInIds[] = $arr['country_id'];

// prepare query
$query = 'SELECT `country_id`, `country_name` FROM `your_table`
WHERE `country_id` NOT IN (' . implode(',',$notInIds) . ')';

// then execute it 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-22T13:58:56.477

对于这个问题：“如何从 country_table**中选择表中*不*存在**但**数组中存在**的记录（country_id 和 country_name） ？”

我想你必须编写一些代码（例如在 PHP 中）才能达到你想要的结果。问题是您无法显示不在表格中的数据（例如 country_name），这是不可能的，因为您不知道这些数据。唯一的可能性是显示数组中而不是表中的 country_id，因为这是您拥有的唯一数据...

# c# - sql用列名创建字符串变量

> ID：13715601
> 
> 赞同：1
> 
> 时间：2012-12-05T03:01:44.150
> 
> 标签：c#, sql, sql-server, sql-server-2008

我正在尝试通过 sql 代码或 c# 代码创建动态 sql 语句。例如，我想根据包含表名的字符串生成结果集。目前，我正在通过 c# 代码执行此操作。

我当前的问题是我想生成类似于以下内容的搜索

```
select * from customers
where ContactName+City like '%Berlin%' 
```

所以我想给一个表名作为字符串参数我需要以某种方式生成一个字符串变量`'ContactName+City+etc'`来构建搜索的一部分

我也对任何其他想法持开放态度。

```
var sql = string.Format(@"
select * from {0}
where {1} like '%criteria%'"
, variable_table
, "column1+column2+columnX"); //need function here to produce this string based on variable table? 
```

**基本上**，我将如何创建一个基于 variable_table 将可变数量的列连接在一起（）的字符串`'ContactName+City+etc'`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:08:31.533

为什么不简单地这样做：

```
 select * from variable_table_name
      WHERE column1+column2+columnX like '%criteria%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:53:56.957

您也可以纯粹在 SQL 中执行此操作。但是由于您已经在 C# 中完成了此操作，并且您只需要根据表名获取列列表，请尝试此操作。

如下创建一个 SQL udf。

```
CREATE FUNCTION funcReturnAllColumns
(
    @tableName VARCHAR(50)
)
RETURNS VARCHAR(500)
BEGIN

DECLARE @ID INT
DECLARE @ALLColumns VARCHAR(500)

SET @ALLColumns = ''

SELECT @ID = id
FROM sys.sysobjects
WHERE name = @tableName

SELECT @ALLColumns = @ALLColumns + '+' + name 
FROM sys.syscolumns
WHERE id = @ID

RETURN SUBSTRING(@ALLColumns,2,LEN(@ALLColumns))

END

SELECT dbo.funcReturnAllColumns('table_name') 
```

输出：列 1 + 列 2 + ..... + 列 N

您可能必须根据需要调整 varchar 限制和验证。

# php - PHP 会话是否跨子目录工作？

> ID：13715602
> 
> 赞同：7
> 
> 时间：2012-12-05T03:02:08.543
> 
> 标签：php, session

我有一个名为的主目录`System`，其子目录名为`Subsystem`. 我来自主目录的会话在子目录中不起作用。

当我`echo session_save_path();`在两个文件夹中时，他们会向我展示`"/tmp"`.

然后，我试图放入`session_save_path("../tmp");`我的子目录，但它显示我`"This webpage has a redirect loop"`。

`session.php`在`System`目录中：

```
<?php
session_start( );

if (!($_SESSION['uid']))
{
    header("Location:index.php");
}
else
{
    $_SESSION['uid'] = $_SESSION['uid'];
}
?> 
```

子系统文件夹中的 session.php：

```
<?php
session_save_path("../tmp");
session_start( );

if (!($_SESSION['uid']))
{
    header("Location:index.php");
}
else
{
    $_SESSION['uid'] = $_SESSION['uid'];
} 
```

?>

我已经用谷歌搜索了一遍，但我仍然无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:05:24.373

该目录不会影响您的会话状态（给定 Apache-PHP 网站的所有目录将在标准配置中访问相同的会话）。你不应该使用`session_save_path()`.

我认为问题的部分原因在于您将“uid”设置为自身（`$_SESSION['uid'] = $_SESSION['uid'];`）-因此可能永远不会真正将其设置为一个值-如果未设置，则可能会无限期地重定向。

我建议进行这个简单的测试，以确保您的会话实际上是有效的：

**/session_set.php**

```
<?php
    session_start();
    $_SESSION['uid'] = 123; 
```

**/sub_dir/session_get.php**

```
<?php
    session_start();
    echo $_SESSION['uid']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:17:08.533

会话在服务器上的临时目录中创建一个文件，其中存储了已注册的会话变量及其值。在访问期间，该数据将可供网站上的所有页面使用。

临时文件的位置由 php.ini 文件中名为 session.save_path 的设置确定。所以请检查这条路径。

另外 [session-save-path()][1] 获取和/或设置当前会话保存路径。

我认为你不需要写这一行并检查你的 php.ini 以获取正确的路径。

对于会话，我发现了一些有用的文章[http://www.tutorialspoint.com/php/php_sessions.htm](http://www.tutorialspoint.com/php/php_sessions.htm)

谢谢。

# jquery - Knockout.js "with" 绑定与 jQuery Mobile 冲突

> ID：13715612
> 
> 赞同：1
> 
> 时间：2012-12-05T03:03:16.527
> 
> 标签：jquery, jquery-mobile, knockout.js, knockout-2.0

我正在尝试在一个项目中同时使用 jQuery Mobile 和 Knockout.js，并且发现它们似乎在很多方面存在冲突。目前最糟糕的是，jQuery mobile 中的某些点击事件在`with`绑定中似乎无法正确触发。例如，我在 a 周围有一个`collapsible-set`，它不会折叠/展开。

我在 jsFiddle 中放了一个例子：http: [//jsfiddle.net/gregbacchus/VQXsK/](http://jsfiddle.net/gregbacchus/VQXsK/)

这显然是一个简化的例子。在实际情况下，我无法`with`移动`collapsible-set`.

这可以解决吗？

（顺便说一句：使用 jQuery v1.8.2、jQuery Mobile v1.2.0 和 knockoutjs v2.1.0）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:22:18.380

使用淘汰赛 2.2.0 或更高版本。

请参阅此小提琴[http://jsfiddle.net/DmNge/1/](http://jsfiddle.net/DmNge/1/)和此公告[http://blog.stevensanderson.com/2012/10/29/knockout-2-2-0-released/](http://blog.stevensanderson.com/2012/10/29/knockout-2-2-0-released/)

特别是说的部分，`"The with, if, and ifnot bindings have been enhanced to preserve their original DOM elements on initial binding, so they are lighter and won’t unnecessarily strip out any special behaviours inserted by third-party libraries. I know a lot of people asked for this."`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:41:55.267

不确定这是否只是一种解决方法，但这似乎可行

```
<div data-role="page" id="testPage">
    <div data-role="collapsible-set" data-theme="b" data-content-theme="d" >
        <div data-role="collapsible" data-collapsed="false">
    <!-- ko with: test -->
            <h4>Test</h4>
            <div>hello world</div>
            <div data-bind="text: hello"></div>
    <!-- /ko -->                
        </div>
    </div>                
</div> 
```

# c# - IQueryable<>.ToString() 太慢了

> ID：13715613
> 
> 赞同：3
> 
> 时间：2012-12-05T03:03:29.160
> 
> 标签：c#, entity-framework, linq-to-entities

我正在使用在这个问题的答案中找到的 BatchDelete：[EF Code First Delete Batch From IQueryable<T>?](https://stackoverflow.com/questions/8538899/ef-code-first-delete-batch-from-iqueryablet)

该方法似乎浪费了太多时间从 IQueryable 构建删除子句。具体来说，使用下面的 IQueryable 删除 20.000 个元素需要将近两分钟。

```
context.DeleteBatch(context.SomeTable.Where(x => idList.Contains(x.Id))); 
```

所有的时间都花在这条线上：

```
 var sql = clause.ToString(); 
```

该行是此方法的一部分，可在上面链接的原始问题中找到，但为方便起见粘贴在这里：

```
private static string GetClause<T>(DbContext context, IQueryable<T> clause) where T : class
{
    const string Snippet = "FROM [dbo].[";

    var sql = clause.ToString();
    var sqlFirstPart = sql.Substring(sql.IndexOf(Snippet, System.StringComparison.OrdinalIgnoreCase));

    sqlFirstPart = sqlFirstPart.Replace("AS [Extent1]", string.Empty);
    sqlFirstPart = sqlFirstPart.Replace("[Extent1].", string.Empty);

    return sqlFirstPart;
} 
```

我想`context.SomeTable.Where(x => idList.Contains(x.Id))`编译查询可能会有所帮助，但是AFAIK在EF 5上使用DbContext时无法编译查询。在论文中它们应该被缓存，但我看不到第二次执行同一个BatchDelete的迹象。

有没有办法让它更快？我想避免手动构建 SQL 删除语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:23:36.957

IQueryable 没有缓存，每次评估它时都会使用 SQL。在其上运行 ToList() 或 ToArray() 将对其进行一次评估，然后您可以将列表用作缓存版本。

如果你想保留你的接口，你可以使用 ToList().AsQueryable() ，这会传入一个缓存版本。

相关帖子。 [如何缓存 IQueryable 对象？](https://stackoverflow.com/questions/1008404/how-do-i-cache-an-iqueryable-object)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:29:03.397

在这种情况下，似乎无法缓存 IQueryable，因为查询包含要检查的 id 列表，并且每次调用都会更改列表。

我发现每次我必须批量删除对象时避免构建查询的两分钟延迟的唯一方法是使用 ExecuteSqlCommand，如下所示：

```
var list = string.Join("','", ids.Select(x => x.ToString()));
var qry = string.Format("DELETE FROM SomeTable WHERE Id IN ('{0}')", list);
context.Database.ExecuteSqlCommand(qry); 
```

我暂时将其标记为答案。如果建议任何其他不依赖 ExecuteSqlCommand 的技术，我很乐意更改答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T15:30:04.213

有一个 EF 模式可以正常工作。

它使用投影。仅从数据库返回密钥。（投影不会添加到上下文中，所以这非常快。然后您使用仅 KEY 存根 POCO 构建上下文，并点亮保险丝......

基本上。

```
 var deleteMagazine = Context.Set<DeadMeat>.Where(t=>t.IhateYou == true).Select(t=>t.THEKEY).toList

//Now instantiate a dummy POCO with KEY only for the list,
foreach ( var bullet in deleteMagazine)
{
context.Set<deadmeat>.attach(bullet);
context.set<deadmeat>.remove(bullet);
 // consider saving chnages every 1000 records .... performance, trial different values
if (magazineisEmpty)  // your counter logic here :-)
  context.SaveChanges
}
// shoot anyone still moving
context.SaveChanges 
```

检查 SQL 服务器探查器....

# ember.js - Ember.js - 如何将视图绑定到状态管理器，并确保呈现视图？

> ID：13715614
> 
> 赞同：1
> 
> 时间：2012-12-05T03:03:37.107
> 
> 标签：ember.js, views, rendering, ember-old-router

我正在使用 StateManager 来控制弹出模式的状态（例如，状态是“open.edit”、“open.show”和“close”）。我想在这里使用状态管理器，因为模式非常复杂并且需要它自己的事务（我使用的是 Ember 数据）。

我可以在我的 ModalStateManager 上设置适当的数据、视图和控制器。

但是，视图（在本例中为 App.ModalView）永远不会在 DOM 中呈现。我知道这一点是因为我已经在我的 App.ModalView 的 didInsertElement 函数中放置了日志语句，而这些语句永远不会被记录。

**当有人单击按钮打开模式时，如何呈现视图？**

这是当有人单击打开模式时在我的 ModalStateManager 上运行的代码。

```
App.ModalStateManager = Ember.State.create({

  closed: Ember.State.create({
    open: function(manager, modalData) {
      var view = App.router.get('applicationController').connectOutlet("modal", modalData); 
      //this is working
      //the view returned is the ModalView; it has a ModalController with expected content

     manager.transitionTo('open.show'); 
    }
  })

  //omitting other states for simplicity
)} 
```

**更大的问题：您应该如何构建一个具有多个状态和动态数据但在路由器内没有自己的 url 或状态的视图？*例如，想象一个包含独特项目列表的页面。单击一个项目会弹出一个显示项目内容的模式，允许用户编辑和保存它。模态在路由器中没有自己的 url 或状态，因此它不像`/:item_id`在路由器中设置可以轻松连接和更新的动态状态那么容易。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:16:54.550

在我们的一个应用程序中，我们有一个 PanelManager（StateManager 的子类）来处理我们的模态状态。还有一个 PanelController，它具有我们的面板容器视图绑定到的类名和可见性的属性。当从关闭状态转换到特定打开状态（例如，showingEditPanel）时，管理器设置类名和可见性属性并调用 panelController 上的 connectOutlet 以在面板容器中显示正确的视图/控制器组合。额外的复杂性可以用每个打开状态下的嵌套状态来建模。

# c++ - 定义一个新类型并重载它的操作符

> ID：13715617
> 
> 赞同：-3
> 
> 时间：2012-12-05T03:03:53.857
> 
> 标签：c++, operator-overloading

是否可以创建一个类型（比如说`degrees`）并为其定义特定的运算符？如：`=, +, *, -, /, +=, *=, -=, /=`。

我想知道这是因为我需要为我的一个程序使用度数，而我不想使用`float`对象，因为 using`degrees a; a.value = 120; a.value = b.value + a.value;`比简单的`degrees a = 120; a = b+a;`.

现在为什么我不使用：

```
typedef float degrees; 
```

? 好吧，因为我还需要一件事。当我写

```
degrees a;
a = 120;
a += 300; 
```

`a`应该等于`60`(420-360) 因为我真的不需要`a = 6150`什么时候可以有`a = 30`相同的效果。所以我会重载这些运算符以将值保持在 0 到 360 之间。

可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T03:23:01.247

您的问题的解决方案不需要 Boost 或任何其他库。您可以通过使用 C++ 类并重载您想要的数学运算符（+、-、*、/ 等）和您想要的赋值运算符（=、+=、-= 等）和比较来实现您想要的您想要的运算符（<、>、<=、>= 等）......或者您想要的任何运算符！

例如：

```
#include <cmath>

class Degrees {
public:
    // *** constructor/other methods here ***
    Degrees& operator=(float rhs) {
        value = rhs;
        normalize();
        return *this;
    }
    Degrees& operator+=(const Degrees &rhs) {
        value += rhs.value;
        normalize();
        return *this;
    }
    Degrees operator+(const Degrees &rhs) {
        return Degrees(value + rhs.value);
    }

private:
    float value;
    void normalize() {
        value = std::fmod(value, 360);
    }
}; 
```

然后你可以做这样的事情：

```
Degrees a, b; // suppose constructor initializes value = 0 in all of them
a = 10;
b = 20;
a += b; // now, a = 30.
Degrees c = a + b; // now, c = 50. 
```

我给了你一个重载赋值和加号运算符的例子，但你可以用任何其他类型尝试同样的事情，它应该可以工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T03:12:39.277

这是一个起点：

```
class Degrees {
  public:
    explicit Degrees(float value) : value(normalized(value)) { }

    Degrees &operator+=(Degrees that)
    {
      value += that.value;
      return *this;
    }
  private:
    float value;
};

inline Degrees operator+(Degrees a,Degrees b)
{
  a += b;
  return a;
} 
```

示例用法：

```
{
  Degrees a(120);
  Degrees b(300);
  Degrees c = a+b;
} 
```

# php - 链接不起作用

> ID：13715619
> 
> 赞同：0
> 
> 时间：2012-12-05T03:03:58.487
> 
> 标签：php, html, captcha, recaptcha

我不确定我页面上的联系表发生了什么 - [“我们可以提供帮助”。](http://0350498.netsolhost.com/contact.php)我观看了[Dream Weaver Tutorial](http://www.dreamweavertutorial.co.uk/)的教程系列，并尝试将 reCAPTCHA 和[Hot Dreamweaver](http://hotdreamweaver.com/)的附加组件结合起来。

有谁知道为什么导航和标题图片以及 Adob​​e 图片不显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:16:46.890

您正在使用绝对地址指向您的链接和资源到仅存在于您的本地计算机上的位置。而是在您的 html 中使用相对地址。

例子。

而不是这个html：

```
<img src="file:///I|/Town_Monitoring_Website/images/Logo copy.jpg" width="213" height="75" border="none" /> 
```

做这个：

```
<img src="images/Logo copy.jpg" width="213" height="75" border="none" /> 
```

您想删除 html 中的所有这些引用

```
file:///I|/Town_Monitoring_Website/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:09:05.107

您的所有图像源和链接都指向本地文件系统，它们需要是绝对路径或相对路径。我更新了您页面上的代码以反映相对路径，只要文件名和图像位于正确的目录中，这将是工作代码，只需复制和粘贴：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>

<!-- Contact Form Designed by James Brand @ dreamweavertutorial.co.uk -->
<!-- Covered under creative commons license - http://dreamweavertutorial.co.uk/permissions/contact-form-permissions.htm -->

    <title>Towne Monitoring Service/FAQ's</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="contact/css/contactform.css" rel="stylesheet" type="text/css" />
    <link href="css/css style sheet template.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript">
var nameError = 'Please enter a Name to proceed.';
        var phoneError = 'Please enter a valid Phone Number to continue.';
        var addressError = 'Please enter a valid Maling Address to continue.';
        var emailError = 'Please enter a valid Email Address to continue.';
        var commentError = 'Please enter your Message to continue.';
function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}
    </script>

    </head>

<body onload="MM_preloadImages('images/x.png')">

<div id="container">
<div id="header"><a href="index.html"><img src="images/Logo copy.jpg" width="213" height="75" border="none" /></a></div><!-- end div header -->

  <div id="nav">
<ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="products.html">Products</a></li>
      <li><a href="about.html">About Us</a></li>
      <li><a href="faq.html">FAQ's</a></li>
      <li><a href="did_you_know.html">Did You Know?</a></li>
      <li><a href="contact.php">We Can Help</a></li>

    </ul>
  </div><!-- end dic nav -->
<div id="content">
  <table width="1000" border="0">
    <tr>
      <td width="50">&nbsp;</td>
      <td width="574">&nbsp;</td>
      <td width="312">&nbsp;</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td><div id="for mWrap">
<div id="form">

<form action="contact.php" method="post" id="comments_form">
  <div class="row">
    <div class="label">Your Name</div>
    <!-- end .label -->
    <div class="input">
      <input type="text" id="fullname" class="detail" name="fullname" value="" />
          </div>
    <!-- end .input -->
    <div class="context">e.g. John Smith or Jane Doe</div>
    <!-- end .context -->
  </div>
  <!-- end .row -->
  <div class="row">
    <div class="label">Your Email Address</div>
    <!-- end .label -->
    <div class="input">
      <input type="text" id="email" class="detail" name="email" value="" />
          </div>
    <!-- end .input -->
    <div class="context">We will not share your email with anyone or spam you with messages either</div>
    <!-- end .context -->
  </div>
  <!-- end .row -->
  <div class="row">
    <div class="label">Your Phone Number</div>
    <!-- end .label -->
    <div class="input">

      <input type="text" id="phone" class="detail" name="phone" value="" />

          </div>
    <!-- end .input -->
    <div class="context">(123)-123-1234</div>
    <!-- end .context -->
  </div>
  <!-- end .row -->
  <div class="row">
    <div class="label">Your Address</div>
    <!-- end .label -->
    <div class="input">
      <input type="text" id="address" class="detail" name="address" value="" />    </div>
    <!-- end .input -->
    <div class="context">e.g. 123 Cherry ln. Happyville P.A. 18999</div>
    <!-- end .context -->
  </div>
  <!-- end .row --><!-- end .row --><br />
  <br />

<div class="submit">
  <input type="submit" id="submit" name="submit" value="Send Message" />
</div>
<!-- end .submit -->
<input type="hidden" name="hdwfail" id="hdwfail" value="contact.php" />
</form>

</div><!-- edn #form -->
</div></td>
      <td valign="top"><div id="loads"><table width="198" border="0">
        <tr>
          <td width="192" height="143"><h2>Download's<img src=images/Downloads/Adobe-PDF-Logo.jpg" alt="" width="100" height="100" /></h2>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p><a href="http://getadobe.com/reader">Click here for Adobe Reader.</a></p>
            </td>
        </tr>
        <tr>
          <td><p><a href="images/Downloads/Personal Emergency Info.pdf">Information Sheet</a></p>
            <p>(.pdf size: 182k)</p>
            <p><a href="images/Downloads/Company Brochure.pdf">Company Brochure</a></p>
            <p>(.pdf size: 390k)</p>
            <p><a href="images/Downloads/medbro.pdf">Handling Emergencies</a></p>
            <p>(.pdf size: 143k)</p></td>
        </tr>
        <tr>
          <td height="67">&nbsp;</td>
        </tr>
      </table></div></td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
  </table>
  <!-- end formWrap -->
</div>
<div id="apDiv7">
  <table width="1000" border="0">
  <tr>
    <td width="5">&nbsp;</td>
    <td width="588"><h3>&copy; 2012 TOWNE MONITORING SERVICE, LP   ALL RIGHTS RESERVED</h3></td>
    <td width="77" align="right"><img src="images/csaa.jpg" width="74" height="40" /></td>
    <td width="336"><img src="images/footer2.jpg" width="334" height="40" /></td>
  </tr>
</table>

</div><!-- end div7 -->
</div>
</body>
</html> 
```

# encoding - 使用 CCLabelTTF 绘制特殊字符在某些 android 手机中被破坏

> ID：13715620
> 
> 赞同：0
> 
> 时间：2012-12-05T03:03:59.727
> 
> 标签：encoding, cocos2d-x

这是代码（使用 Cocos2d-x），

```
CCLabelTTF *labelLevel = CCLabelTTF::create("Hello ▇ ⓫ ₩ ⅀", "Arial", 15);
labelLevel->setPosition(ccp(0, 0));
labelLevel->setAnchorPoint(ccp(0, 1));
this->addChild(labelLevel); 
```

在 iOS 手机中，它运行良好。但是，在某些 android 手机（例如 Nexus 1）中，特殊字符（.▇ ⓫ ₩ ⅀）不能很好地显示，跳过（空白）或只是框。

我的 IDE 是 Xcode，文件编码类型是 utf-8。

# mpi - 关于使用 BLCR 的扭矩检查点 MPI 作业的问题

> ID：13715623
> 
> 赞同：1
> 
> 时间：2012-12-05T03:04:11.403
> 
> 标签：mpi, torque, checkpoint, blcr

我们正在尝试使用扭矩检查点 MPI 作业，但似乎扭矩只能处理在单个节点上运行的作业。我检查了代码，发现当使用qhold检查作业时，qhold向pbs服务器发送一个PBS_BATCH_HoldJob请求，然后pbs服务器将此请求中继到主控主机，然后主控主机用BLCR检查自己运行的作业进程，但没有将请求发送到其姐妹节点，因此 MPI 作业似乎无法在扭矩上进行检查点。

还有一个问题，checkpoint 成功后（qhold 报告），torque 向 master 主机中的进程发送信号 15 以杀死该进程，然后，torque 会将 checkpoint 文件复制到 pbs_server 并在本地删除所有文件。使用qrls重启这个job时，调度器会为这个job分配新的节点，并将checkpoint文件复制到新节点，然后通过checkpoint文件重启job，那么问题来了：

1.  假设 Torque 可以对每个节点的 MPI 作业的进程进行 checkpoint，而通常我们的作业会占用大量内存，因此 checkpoint 文件非常大，但是 pbs 服务器没有足够大的磁盘来容纳 checkpoint 文件.

2.  在我们的环境中，在 MPI 作业开始之前，我们将一些大的元数据从另一个集群中直接拉到分配给 MPI 作业的节点上进行计算，并且在 checkpoint/restart 之后，作业进程可能会在一些不同的节点中恢复，并且元数据数据可能丢失。

如果有人可以告诉我你是如何为 MPI 工作做检查点的，如果我的问题可以回答并且需要修改扭矩代码，我也喜欢这样做。

谢谢。

# java - 类的数组（Java）

> ID：13715624
> 
> 赞同：-1
> 
> 时间：2012-12-05T03:04:13.467
> 
> 标签：java, arrays, class

我似乎找不到编写类数组的正确方法。在这种形式下，编译时不会引发错误，但是当我尝试使用数组/类时会收到错误。类数组在一个名为 HashTable 的类中（我需要自己编写一个作业），我正在使用下面的代码对其进行测试：

```
theHashTable.insert("aa", "ab"); 
```

这是 HashTable 类：

**编辑**：正如 Aniket 所指出的，文件名没有被初始化。我在下面更正了这一点，但收到了同样的错误。

```
private class HashTable {       
    private class Value {
        ArrayList<String> fileNames;
        String word;
        Value() {
            fileNames = new ArrayList<String>();
        }
    }

    private int currentSize = 101;
    private Value[] items;
    private HashTable() {
        items = new Value[currentSize];
        for (int i = 0; i < currentSize; i++) items[i] = new Value();
    }

    private int hash(String in) {
        int out = 0;
        for (int i = 0; i < in.length(); i++) out += 37*out+in.charAt(i);
        out %= currentSize;
        if (out < 0) out += currentSize;
        return out;
    }

    public void insert(String inW, String inF) {
        int index = hash(inW);
        index = 0;
        if (items[index].word.length() == 0) {
            items[index].word = inW;
            items[index].fileNames.add(inF);
        }
        else if (items[index].word.compareTo(inW) == 0) items[index].fileNames.add(inF);
        else System.out.println("Collision");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:06:51.287

`fileNames`类中的 ArrayList`Values`永远不会被初始化。`Values`为和 Initialize编写一个构造函数`fileNames`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T03:16:49.823

`fileNames`使用初始化（示例代码中的第 3 行）在您的内部类值中声明为：

```
 ArrayList<String> fileNames = new  ArrayList<String>(); 
```

# ruby-on-rails-3.2 - 如何使用 rspec 测试不良的网络连接

> ID：13715630
> 
> 赞同：0
> 
> 时间：2012-12-05T03:04:58.180
> 
> 标签：ruby-on-rails-3.2, capybara, rspec2, vcr

我想测试与外部 api 的连接错误。最好的方法是什么？

在我的控制器中，我有

```
begin
 result = connect.to_api
rescue Error::TooManyRequests => e
 flash = e
end 
```

我想测试错误是否显示给用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:30:10.280

模拟您的`connect`对象，以便它调用的任何方法都会引发您在网络完成时期望得到的错误。然后测试错误是否设置在您期望的位置。在不知道`connect.to.api`真的是这样的情况下，很难说你应该嘲笑什么，应该提高什么......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:48:31.053

让我的测试通过

`Connect.should_receive(:to_api).and_raise(Error::TooManyRequests)`

# php - 图片的php压缩

> ID：13715641
> 
> 赞同：0
> 
> 时间：2012-12-05T03:06:45.633
> 
> 标签：php

我正在使用以下代码一次压缩图像文件夹：

```
<?php
// increase script timeout value
ini_set("max_execution_time", 300);
// create object
$zip = new ZipArchive();
// open archive
if ($zip->open("my-archive.zip", ZIPARCHIVE::CREATE) !== TRUE) {
die ("Could not open archive");
}
// initialize an iterator
// pass it the directory to be processed
$iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator("images"));
// iterate over the directory
// add each file found to the archive
foreach ($iterator as $key=>$value) {
$zip->addFile(realpath($key), $key) or die ("ERROR: Could not add file: $key");
}
// close and save archive
$zip->close();
echo "Archive created successfully.";
?> 
```

但是图像太多，无法一次压缩。我有 70% 的图像，只想压缩 30% 的图像。最后的图像名称是 XYZ.jpg。所以我想在最后一张图片之后压缩所有图片。但我无法弄清楚如何做到这一点？

# c# - WCF 休息方法 - 此网页不可用

> ID：13715646
> 
> 赞同：2
> 
> 时间：2012-12-05T03:07:25.827
> 
> 标签：c#, wcf, service

我在使用 WCF 休息模板作为基础制作的服务中实现了一些方法。

这些方法运行良好并且正在返回 Json 数据。

但是，我实现了一个返回对象列表的方法，这似乎不断给我一个“此网页不可用”错误。我不知道如何调试这个或可能是什么原因。有人有建议吗？

```
[WebGet(UriTemplate = "GetCars/{TypeId}", RequestFormat=WebMessageFormat.Json)]
public List<Car> GetCars(String TypeId)
{
    CarFilter carFilter = new CarFilter();

    carFilter.requestType = "product";
    carFilter.numberOfCars = -1;// Convert.ToInt32(numberOfCars);
    carFilter.carIdTo = -1;//Convert.ToInt32(carIdTo);
    carFilter.carIdFrom = -1;//Convert.ToInt32(carIdFrom);

    return CarDataAccess.GetCar(Convert.ToInt32(TypeId), carFilter);
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:06:10.540

有两件事要检查。首先，通过添加 [ServiceKnownType] 属性来查看这是否是 KnownType 问题：

```
[ServiceKnownType] 
```

此外，在.NET 4.0 之前，如果这是 WCF，您仍然需要`OperationContract`方法上的属性。尝试这个：

```
[OperationContract]
[WebGet(UriTemplate = "GetCars/{TypeId}", RequestFormat=WebMessageFormat.Json)]
public List<Car> GetCars(String TypeId) 
```

# java - 在方法调用上抛出异常

> ID：13715648
> 
> 赞同：3
> 
> 时间：2012-12-05T03:07:39.383
> 
> 标签：java, exception, error-handling, throws

如何在方法上抛出和 UnsupportedOperationException？因此，如果我有一个 Iterable 对象并且我试图禁止该对象的 remove 方法。

在下面的方法中，我返回了一个可迭代对象，我需要通过抛出 UnsupportedErrorException 来禁用它的迭代器删除。我可以在方法的主体内执行此操作还是如何执行此操作？

```
 public Iterable<String> getInNodes (String destinationNodeName)  {
  if (!hasNode(destinationNodeName))
      return emptySetOfString;
  else {
  for(String e : nodeMap.get(destinationNodeName).inNodes)
  {
      emptySetOfString.add(e);
  }
  return emptySetOfString;
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T03:09:50.593

尝试这个。

```
@Override
public void remove() {
   throw new UnsupportedOperationException();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T03:21:59.017

我可能误解了你的问题。

如果您有一个普通的 Iterable，并且您想将其转换为生成`remove`无法调用的迭代器的 Iterable，您可以使用通过匿名子类化实现的这种怪物：

```
Iterable<String> iterable = // normal Iterable<String> you already have...

Iterable<String> noRemoveIteratorGeneratingIterable = new Iterable<String>() {
    @Override        
    public Iterator<String> iterator() {
        return new Iterator<String>() {
            Iterator<String> internalIterator = iterable.iterator();

            @Override
            public boolean hasNext() {
                return internalIterator.hasNext();
            }

            @Override
            public String next() {
                return internalIterator.next();
            }

            @Override
            public void remove() {
                throw new UnsupportedOperationException("Nope!");
            }
        };
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T03:12:46.043

在您的班级中，您可以 @Override 原始方法

```
public class myIterable extends Iterable {
    @Override
    public void remove() {
        throw new UnsupportedOperationException();
    }
} 
```

然后创建这个类的对象而不是原来的 Iterable。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T03:13:26.087

您也可以尝试使用适当的消息抛出消息：

```
public void remove() {
   throw new UnsupportedOperationException("Remove is unsupported on this object");
} 
```

# c - C 指针引用

> ID：13715649
> 
> 赞同：2
> 
> 时间：2012-12-05T03:07:51.347
> 
> 标签：c, memory

我有以下代码，它只是打印出一个人名的介绍。

```
#include <stdio.h>
#include <stdlib.h>

typedef struct {
    char* firstname;
    char* lastname;
}Person;

void intro(void *person){
    printf("The person you are looking for is %s %s\n", ((Person *)person)->firstname, ((Person *)person)->lastname);
}

int main()
{
    Person *a = NULL;
    a = (Person *)malloc(sizeof(Person));

    char *first = NULL, *last = NULL;
    first = (char *)malloc(sizeof(char)*20);
    strncpy(first,"Bob", 20);
    last = (char *)malloc(sizeof(char)*20);
    strncpy(last,"Newmonson", 20)
    a->firstname = first;
    a->lastname = last;

    intro(a);

    return 0;
} 
```

产生输出

`The person you are looking for is Bob Newmonson`

然而改变`intro(a)`为`intro(&a)`产生

`The person you are looking for is �@ Newmonson`

当我在 GDB 中打开第一次尝试并在第 10 行中断时，我找到了`person=0x601010`. 名字和姓氏都存储在我期望的位置，`0x04006b9`因为`0x4006bd`它们在堆栈中较早声明。

当我运行 GDB 并对`intro(&a)`. 的地址`person`现在是`0x7fffffffffdd38`，名字指向 ，`0x601010`姓氏指向`0x4006db`。

任何人都可以帮助解释发生了什么以及为什么我仍然可以在第二次测试中访问姓氏的正确地址。

**编辑 ：**

正如每个人似乎一直在问这个问题`void *`，这是我没有包含的这段代码的线程部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T03:11:50.723

这是因为is 已经是一个结构的`a`指针；`Person`因此`intro(&a)`传递一个指向该指针的指针，但`intro()`将其参数视为指向`Person`.

此外，如果`intro()`打算在 Person 上工作，它应该声明一个`Person *`参数，而不是`void *`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T03:13:12.363

指针变量`a`中保存的地址与被占用的实际内存位置的地址不同`a`。

address like`0x601010`是一个“低”内存地址，通常位于堆上的某个位置。类似的地址`0x7fffffffffdd38`是一个非常“高”的地址，通常会在堆栈上。因此`&a`，给您堆栈上变量的实际地址，`a`并将该值传递给函数，而不是`0x601010`存储在指针变量中的值`a`，并表示从返回的已分配内存缓冲区的第一个地址`malloc`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T03:22:49.000

首先：

```
/* allocate space for 20 characters and make 'first' point to that space. */
first = (char *)malloc(sizeof(char)*20);
/* now make 'first' point to the string Bob. Leak the memory that was allocated before. */
first = "Bob";
/* Rinse, lather, repeat. */
last = (char *)malloc(sizeof(char)*20);
last = "Newmonson"; 
```

现在解释为什么 using`intro(&a)`会给你意想不到的结果：

`intro`需要一个指针，它假定它指向一个类型的结构`Person`。您创建一个指向 a 的指针`Person`，然后为它分配空间。

调用`intro(a)`导致指针`Person`作为指向`void`intro 的指针传递，然后将其视为指向的指针`Person`，一切都很好。

`intro(&a)`但是，调用会获取of的*地址*`a`并将其传入。再次`intro`尝试将其视为指向的指针，`Person`但这不起作用，因为您传递的是指向 a 的指针的指针`Person`。您正在将西红柿传递给一个认为它正在获取橙子的函数。两者都是水果，你会得到果汁，虽然当你的早餐是美味的番茄汁而不是美味的橙汁时，你可能不会很高兴。

如果你问为什么调用`intro(&a)`会导致名字被破坏而姓氏被打印出来，答案是纯粹的运气：带有姓氏的字符串恰好在内存中的正确位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T03:23:45.210

尝试这个：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct {
    char* firstname;
    char* lastname;
}Person;

void intro(Person *person){
    printf("The person you are looking for is %s %s\n", (person)->firstname,   (person)->lastname);
}

int main()
{
    Person *a = NULL;
    char *first = NULL, *last = NULL;
    a = (Person *)malloc(sizeof(Person));

    first = (char *)malloc(sizeof(char)*20);
    first = "Bob";
    last = (char *)malloc(sizeof(char)*20);
    last = "Newmonson";
    a->firstname = first;
    a->lastname = last;

    intro(a);

    return 0;
} 
```

希望能帮助到你...

# c# - 在哪里可以找到 MSDN 文章中显示的内存类？

> ID：13715650
> 
> 赞同：0
> 
> 时间：2012-12-05T03:07:59.473
> 
> 标签：c#

我想问你在哪个图书馆`Memory`上课？我在一个特殊的部分搜索了 msdn 网站，动态内存分配（[http://msdn.microsoft.com/it-it/library/aa664786(v=vs.71).aspx](http://msdn.microsoft.com/it-it/library/aa664786%28v=vs.71%29.aspx)），但它只显示示例而不是在哪里班上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:11:55.530

`Memory`该类不是 C# 基类库的一部分。它是为该文档编写的示例类，说明了如何使用底层 OS 内存管理功能。

在此示例中，它使用（以及其他函数）`HeapAlloc`和`HeapFree`，它使用以下行使其可用于 C# 代码：

```
 [DllImport("kernel32")]
   static extern void* HeapAlloc(int hHeap, int flags, int size);
   [DllImport("kernel32")]
   static extern bool HeapFree(int hHeap, int flags, void* block); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:10:49.710

它不在其中一个库中。这只是一个例子。如果你想使用它，你可以复制和粘贴代码，但我不明白你为什么要在 C# 中进行非托管内存管理。

# c# - c# - 如何在 A 的类中获取对对象 A 的引用？

> ID：13715652
> 
> 赞同：0
> 
> 时间：2012-12-05T03:08:47.430
> 
> 标签：c#, asp.net

在我的 SharePoint 2010 c# / asp.net 站点中，我定义了一个类

```
namespace PDF_Library.VisualWebPart1
{
    public partial class PDF_Library : Usercontrol   
    {
         public static PDF_Library current;
         protected void Page_Load(object sender, EventArgs e)
         {
              current = (PDF_Library)this; 
         }
    }
}

public static class Page_State
{
    public static Page is_display()
    {
        return PDF_Library.current.Page; // didn't work...
    }
} 
```

它没有构造函数。我怎样才能得到参考`the current instance of this class`？

我在顶部尝试过这样的事情

`public static PDF_Library current;`

然后在一个函数中

`current = (PDF_Library)this;`

但这没有用...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T03:15:21.150

事实是，您`static`在 assinging`current`中使用的功能`this`不起作用。`static`是一种不绑定到类的任何实例的方法，因此您不能使用`this`.

您唯一的选择是使方法成为非静态方法或将类的实例作为参数传递给静态函数。

据我所知，您正在尝试创建“[单例模式](http://msdn.microsoft.com/en-us/library/ff650316.aspx)”。有关如何创建单例类的示例，请参阅上一篇 MSDN 文章的链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T03:26:21.110

您需要了解它不是以这种方式工作的。您的问题被标记为 asp.net - 多用户、多线程环境，`PDF_Library`将始终创建多个用户控件实例。绝对不确定他们中的哪一个会挂掉`PDF_Library.current`。你需要重新考虑你的设计。

更多关于这一点：`Page`实例在请求处理完成时被处置。通常，此实例及其所有控件和诸如`Response`、`Request`等`Context`内容将被设置为垃圾收集。因为您`UserControl`在静态字段中保留对实例的引用，所以所有这些对象（包括`Page`）都将保留在内存中，直到此`current`引用被其他内容替换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T03:18:58.910

看起来它将有一个实例。如果该类被标记为静态（它似乎不是），那么您可以通过名称“PDF_Library”来引用它。否则，使用 ILSpy 或反射器查看最终结果。我敢打赌它有一个构造函数；仅仅因为你没有看到一个，并不意味着它不存在。覆盖默认 ctor 并在那里设置您的实例。

```
namespace PDF_Library.VisualWebPart1
{
    public partial class PDF_Library : Usercontrol   
    {
        public static PDF_Library Current;
        public PDF_Library() : base() {
           Current = this;
        }

    }
} 
```

您的 Page_Load 代码可能遇到的问题是它在生命周期中被调用得太晚，这就是您的引用调用不起作用的原因。

# ruby - 如何在 Sinatra 中序列化 DataMapper::Validations::ValidationErrors to_json？

> ID：13715653
> 
> 赞同：3
> 
> 时间：2012-12-05T03:08:52.687
> 
> 标签：ruby, validation, rest, sinatra, ruby-datamapper

我正在使用 Sinatra 和 DataMapper 开发一个 RESTful API。当我的模型验证失败时，我想返回 JSON 以指示哪些字段出错。DataMapper 为我的 type 模型添加了一个 'errors' 属性`DataMapper::Validations::ValidationErrors`。我想返回这个属性的 JSON 表示。

这是一个单文件示例（一定要喜欢 Ruby/Sinatra/DataMapper！）：

```
require 'sinatra'
require 'data_mapper'
require 'json'

class Person
    include DataMapper::Resource

    property :id, Serial
    property :first_name, String, :required => true
    property :middle_name, String
    property :last_name, String, :required => true
end

DataMapper.setup :default, 'sqlite::memory:'
DataMapper.auto_migrate!

get '/person' do
    person = Person.new :first_name => 'Dave'
    if person.save
        person.to_json
    else
        # person.errors - what to do with this?
        { :errors => [:last_name => ['Last name must not be blank']] }.to_json
    end
end

Sinatra::Application.run! 
```

在我的实际应用程序中，我正在处理 POST 或 PUT，但为了使问题易于重现，我使用 GET 以便您可以使用浏览器或浏览器。`curl [http://example.com:4567/person](http://example.com:4567/person)`

所以，我所拥有的是`person.errors`，我正在寻找的 JSON 输出就像哈希产生的一样：

```
{"errors":{"last_name":["Last name must not be blank"]}} 
```

我需要做什么才能得到`DataMapper::Validations::ValidationErrors`我想要的 JSON 格式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T03:08:52.687

所以，当我打字的时候，答案就来了（当然！）。我已经花了几个小时试图弄清楚这一点，我希望这能避免其他人经历我所经历的痛苦和沮丧。

为了得到我正在寻找的 JSON，我只需要创建一个像这样的哈希：

```
{ :errors => person.errors.to_h }.to_json 
```

所以，现在我的 Sinatra 路线看起来像这样：

```
get '/person' do
    person = Person.new :first_name => 'Dave'
    if person.save
        person.to_json
    else
        { :errors => person.errors.to_h }.to_json
    end
end 
```

希望这可以帮助其他希望解决此问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:41:22.303

我知道，我回答得这么晚了，但是，如果您只是在寻找验证错误消息，您可以使用`object.errors.full_messages.to_json`. 例如

```
person.errors.full_messages.to_json 
```

会导致类似

```
"[\"Name must not be blank\",\"Code must not be blank\",
   \"Code must be a number\",\"Jobtype must not be blank\"]" 
```

这将在客户端从迭代键值对中解救出来。

# javascript - 通过单击菜单外部关闭 Javascript 菜单

> ID：13715657
> 
> 赞同：0
> 
> 时间：2012-12-05T03:09:14.663
> 
> 标签：javascript, drop-down-menu, click

我想通过单击菜单外部来关闭我的 Javascript 菜单。我正在使用[这个菜单](http://demo.joomi.ir/)。我不专业，请告诉我如何更改我的代码来做到这一点：

```
$("#theme_select").click( function () {
  if (theme_list_open == true) {
    $(".center ul li ul").fadeOut();
    theme_list_open = false;
  } else {
    $(".center ul li ul").show();
    theme_list_open = true;
  }
  return false;
});
$("#theme_list ul li a").click(function () {
  var theme_data = $(this).attr("rel").split(",");
  $("li.purchase a").attr("href", theme_data[1]);
  $("li.remove_frame a").attr("href", theme_data[0]);
  $("#iframe").attr("src", theme_data[0]);
  $("#theme_list a#theme_select").text($(this).text());
  $(".center ul li ul").hide();
  theme_list_open = false;
  return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:09:33.913

如果要在单击 iframe 区域时关闭该菜单，则必须在 iframe 中执行此操作。尝试将其放入 iframe 的文档就绪功能中：

```
$("html").click( function () {
    $(".center ul li ul", window.parent.document).fadeOut();
    window.parent.theme_list_open = false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:39:03.843

似乎您`$("#theme_select").click( function () {`用于打开和关闭菜单。并用于`$("#theme_list ul li a").click(function () {`处理点击菜单项，这将在之后关闭菜单。

事实上，您的问题有简单的解决方案。仅用于`$("#theme_select").click`打开菜单，`$("#theme_list ul li a")`用于处理链接，并引入`$(window).click`关闭菜单。

```
function checkAndCloseMenu(evt) {
  var dropmaker = $('#theme_select')[0];
  for (var node = evt.target; node != document.body; node = node.parentNode)
    if (node == dropmaker) return false;  // check if click in the dropmaker
  $('.center ul li ul').fadeOut();
  $(window).unbind('click', checkAndCloseMenu);
}
$("#theme_select").click(function() {
  $(".center ul li ul").show();
  $(window).click(checkAndCloseMenu);
});
$("#theme_list ul li a").click(function() {
  var theme_data = $(this).attr("rel").split(",");
  $("li.purchase a").attr("href", theme_data[1]);
  $("li.remove_frame a").attr("href", theme_data[0]);
  $("#iframe").attr("src", theme_data[0]);
  $("#theme_list a#theme_select").text($(this).text());
  return false;
}); 
```

PS：可能你应该给菜单和菜单项一些类名，你的选择器读起来很痛苦。

# java - Struts 2 验证失败密码显示为标签

> ID：13715660
> 
> 赞同：0
> 
> 时间：2012-12-05T03:09:19.507
> 
> 标签：java, struts2

当表单验证在其他表单元素（不是密码输入文本框本身）上失败时，我有一个非常奇怪的密码显示为标签错误。该视图的代码如下。

```
<s:if test="%{username == null}">
    <form method="post" enctype="multipart/form-data"
        action="manageUser_create.action">
</s:if>
<s:else>
<form method="post" enctype="multipart/form-data"
        action="manageUser_update.action">
</s:else>       
        <div>
            <s:textfield name="firstName" key="First Name"  cssClass="text-input" />
            <br class="clear" />                
            <s:textfield name="lastName" key="Last Name" cssClass="text-input" />
            <br class="clear" />                
            <s:file name="practiceLogo" id="practiceLogo" key="Upload Logo" cssClass="text-input" />
            <br class="clear" />
            <s:if test="%{username == null}">
                <s:textfield name="username" id="username"  key="Username" cssClass="text-input" />
                <br class="clear" />
            </s:if>
            <s:else>
                <s:hidden name="username"></s:hidden>
            </s:else>

            <s:password name="password"  key="Password" cssClass="text-input" />
            <br class="clear" />
            <s:textfield name="email" cssClass="text-input" key="Email Address" />                  
            <br class="clear" />
            <s:textfield name="replyToEmail" key="Reply To Email" cssClass="text-input" />                  
            <br class="clear" />
            <s:submit align="center" value="Save" id="submitButton" cssClass="btn btn-primary" />
        </div>
    </form> 
```

该操作使用注释进行验证，如下所示 -

```
@Validations(requiredStrings = {
        @RequiredStringValidator(type = ValidatorType.FIELD, shortCircuit=true, fieldName = "firstName", key = "opd.error.name.required"),
        @RequiredStringValidator(type = ValidatorType.FIELD, shortCircuit=true, fieldName = "lastName", key = "opd.error.name.required"),
        @RequiredStringValidator(type = ValidatorType.FIELD, shortCircuit=true, fieldName = "username", key = "opd.error.username.required"),
        @RequiredStringValidator(type = ValidatorType.FIELD, shortCircuit=true, fieldName = "password", key = "opd.error.password.required"),
        @RequiredStringValidator(type = ValidatorType.FIELD, shortCircuit=true, fieldName = "email", key = "opd.error.email.required"),
        @RequiredStringValidator(type = ValidatorType.FIELD, shortCircuit=true, fieldName = "replyToEmail", key = "opd.error.email.required")
        },
        emails = {          
        @EmailValidator(type = ValidatorType.FIELD, shortCircuit=true, fieldName = "email", key = "opd.error.email.format"),
        @EmailValidator(type = ValidatorType.FIELD, shortCircuit=true, fieldName = "replyToEmail", key = "opd.error.email.format")})
public String update() { 
```

当我不输入密码时，验证会失败，然后我会在密码标签和文本框上方看到正确的消息。这工作正常。

不起作用的是，如果我输入密码但遗漏了其他内容，例如回复电子邮件。代替显示密码标签，密码本身显示在应该显示“密码：”的位置。例如，如果密码是 abcd，则 abcd 将显示为标签。

**编辑** 这似乎是一个严重的错误。如果密码的属性“密钥”更改为密码或密码以外的任何内容，它会显示为标签。Struts 2 版本：2.2.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:38:41.163

我找到了解决方法。

在密码字段中使用属性“标签”而不是“密钥”可以解决此问题。

所以

```
<s:password name="password"  key="Password" cssClass="text-input" /> 
```

需要改为

```
<s:password name="password" label="Password" cssClass="text-input" /> 
```

看起来很奇怪，因为所有其他字段都使用密钥。

# node.js - mocha，node.js，ReferenceError：板未定义

> ID：13715662
> 
> 赞同：0
> 
> 时间：2012-12-05T03:09:24.483
> 
> 标签：node.js, express, mocha.js

我是 node.js 的新手，我正在尝试在一个项目中进行协作，为其添加 mocha 测试套件。我目前遇到的问题如下

```
ReferenceError: Board is not defined
at new Game (/Users/.../dr_mojo/public/javascripts/game.js:8:20)
at Context.<anonymous> (/Users/.../dr_mojo/test/test.game.js:13:17)
at Test.Runnable.run (/usr/local/lib/node_modules/mocha/lib/runnable.js:213:32)
at Runner.runTest (/usr/local/lib/node_modules/mocha/lib/runner.js:343:10)
at Runner.runTests.next (/usr/local/lib/node_modules/mocha/lib/runner.js:389:12)
. . . 
```

当运行我的测试时

```
$> mocha -u tdd test/test.game.js --reporter spec 
```

**公共/javascripts/board.js**

```
function Board(width, height) {
  this.board = new Array(width);
  this.width = width;
  this.height = height;
  for( var i = 0; i < width ; ++i) {
    this.board[i] = new Array(height);
  }
}
...
if(typeof module != 'undefined') {
  module.exports.Board = Board;
} 
```

**公共/javascripts/game.js**

```
function Game(lvl, speed, music) {
  this.initial = { ... };
  this.board = new Board(board_size[0], board_size[1]);
  ...
}
...
if(typeof module != 'undefined') {
  module.exports.Game = Game;
} 
```

**测试/test.game.js**

```
var assert = require("assert");
var Board  = require(__dirname + "/../public/javascripts/board.js").Board;
var Pill   = require(__dirname + "/../public/javascripts/pill.js").Pill;
var Game   = require(__dirname + "/../public/javascripts/game.js").Game;

describe('Game', function(){
  it('Clears a row', function(){
    var game  = new Game();
    var pill1 = new Pill(game.board, game.detector, [ {x : 0 , y : 0 }, {x : 1, y : 0 } ],["red", "red"]);
    var pill2 = new Pill(game.board, game.detector, [ {x : 2 , y : 0 }, {x : 3, y : 0 } ],["red", "red"]);

    assert.equal(game.board.matches().length, 1);

    game.findMatches(function(){});
    assert.equal(game.board.matches().length, 0);
  })
}) 
```

**服务器.js**

```
var express = require('express'),
    port    = 8888;

var app = express.createServer();

app.use(express.static(__dirname + '/public'));
app.set("view engine", "jade");
app.set('view options', { layout: false });

app.get('/play', function(req, res){
  res.render('play_game');
});

app.listen(port); 
```

如您所见，错误`game.js:8`在于我不知道如何正确配置它，因为在玩游戏时它可以正常工作，这意味着可以`new Game()`正常工作，问题是我没有正确配置它从测试套件。我会很感激任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:01:17.367

根据您提供的代码，我的猜测是您需要`require`从 game.js 到 board.js，如下所示：

```
var Board  = require(__dirname + "/../public/javascripts/board.js").Board; 
```

看起来这是一款您也在 node.js 中测试的浏览器游戏。那是对的吗？

# sql - Rails：如何将模型与聚合表中的数据连接起来？

> ID：13715663
> 
> 赞同：0
> 
> 时间：2012-12-05T03:09:28.850
> 
> 标签：sql, ruby-on-rails, ruby, postgresql, activerecord

我正在尝试将聚合表与其代表的对象类型连接起来。

这是聚合表的简化模式：

### 聚合表

```
aggregate_table[0] => {
  item_type: 'cars',
  item_id: 8,
  count: 12,
  time: 'Thu, 01 Nov 2012 00:00:00 PDT -07:00'
}

aggregate_table[1] => {
  item_type: 'people',
  item_id: 23,
  count: 48
  time: 'Thu, 01 Nov 2012 00:00:00 PDT -07:00'
} 
```

是否可以返回与从 AggregateTable 获取的各自计数合并的**Car对象？**

这是一个更具描述性的现实生活用例：

1.  查询聚合表 where `item_type: people`，具有特定的给定数据范围和按**计数**排序的结果。

2.  在**People**模型中查询聚合表查询返回的**item_ids 。**

3.  **将People**对象与相应的聚合表结果合并，例如：`People#count`

我尝试使用左外连接来实现这一点是徒劳的。这样做的正确方法是什么？

* * *

运行 PostgreSQL 9.1 和 Rails 3.2.8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:37:26.173

您应该使用[多态关联](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)。

```
Class Aggregation < ActiveRecord::Base
  belongs_to :item, :polymorphic => true
end 
```

并在关联类中包含`has_one`反向关联（不是必需的，但可能有用）。

有关确切的数据库架构，请参阅上面的文档。

那么对于你的问题：

**1**我不确定您所说的“特定给定数据”，但您可以通过以下方式查询聚合：

```
Aggregation.where(:item_type => "People").order(:count) 
```

**2**以下行将为您提供结果人员（您应该使用 Person/people，Rails 约定）

```
Aggregation.where(:item_type => "People").order(:count).map(&:item) 
```

或者

```
People.joins(:aggregation).order("aggregations.count") 
```

您应该能够在或两者上使用`Aggregation`条件`People`。

**3**我不确定你是否真的需要“合并”。以下行`count`将从`aggregations`表中为您提供：

```
People.joins(:aggregation).order("aggregations.count").each do |p|
  puts p.aggregation.count
end 
```

您也许应该添加一个`includes(:aggregation)`以避免每个“人”的查询。

如果您希望能够写作`p.count`而不是在课堂`p.aggregation.count`上使用：`delegate``People`

```
class People
  delegate :count, :to => :aggregation
end 
```

# html - 使用 rem 调整字体大小

> ID：13715664
> 
> 赞同：0
> 
> 时间：2012-12-05T03:09:38.180
> 
> 标签：html, css

```
html { font-size: 62.5%; } 
body { font-size: 1.4rem; } /* =14px */
h1   { font-size: 2.4rem; } /* =24px */ 
```

大家好，我正在努力计算。我们如何获得 14px 的 body 和 24px 的 h1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:13:00.523

当`html`以百分比形式给出字体大小时，它是根据用户在浏览器选项中设置的字体大小首选项计算的。这通常是 16px 作为跨浏览器的“标准”，但当然它可能会根据用户自己的设置而有所不同。

16px 的 62.5% 是 10px，给出 10px`html`的绝对字体大小。从那里，应该很容易计算出 和 的`body`大小`h1`。

# joomla - Joomla：多次覆盖类别博客输出？

> ID：13715665
> 
> 赞同：2
> 
> 时间：2012-12-05T03:09:45.497
> 
> 标签：joomla, components, overriding

是的。我想将类别博客组件的输出覆盖为 2 种不同的显示样式。

对于第一种样式，我在 [mytemplate]/html 文件夹中复制并编辑了 blog_item.php 和 blog.php。然后我从类别博客后端的下拉列表中选择模板样式。那行得通。类别博客的显示变化如我所料。

但是如果我想创建另一种风格并在另一个类别的博客中使用。我该怎么办？以及如何命名我的文件（我尝试过 blog_1.php、blog_item_1.php ）但只能在后端看到我的第一个样式显示。

我正在使用 joomla 2.5。

请帮我。非常感谢你 ！

==================================================== ================================

[更新] 我解决了这个问题。这是我的解决方案：

1.  将我的模板克隆到 [my_template_2]
2.  转到 [my_template_2]/html/com_content/category 然后根据需要编辑 blog.php、blog_item.php。
3.  转到后端，在我的类别博客 menuitem 中，我将 [my_template_2] 指定为其模板样式。

然后它起作用了。我的两个类别博客都有自己的风格。

这可能不是很好的解决方案，因为我必须使用多个模板，但此时对我来说已经足够了。

谢谢你，stackoverflowers。

==================================================== ================================

[更新 2]

现在，有了多种模板样式，我可以只在一个模板中为我的类别博客组件创建无限的样式。那好多了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:53:01.860

您可能知道，joomla 不允许开发人员为其组件制作不同的样式。

我认为您必须在模板管理页面中列出由“类别博客组件”制作的所有菜单，并让用户在那里设置每个菜单样式。**和 blog.php，检查模板设置然后加载自定义样式...

* * *

** 您必须开发一个自定义字段元素，其中列出所有“类别博客组件”菜单。

***您可以使用此代码访问组件模板中的模板参数：

```
$app        =& JFactory::getApplication();
$template   = $app->getTemplate(true);
$paramsTemplate = $template->params;
$style = $paramsTemplate->get('style'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T19:38:23.640

您不需要使用多种样式。您需要的是使用替代布局和替代菜单布局。对于模板的 html/componentname/category 文件夹中的替代菜单布局，请使用一组独特的名称创建新样式，类似于 blog 已经在文章类别布局文件夹中提供替代类别列表的方式。还要为您制作的每个布局创建一个新的 xml 文件，并使用匹配的名称。

当您创建菜单项时，您现在将获得这些选项以及其他正常选择。只需选择您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-03T14:50:04.817

基于上面的学习，这里是我的 /templates/mytheme/com_content/category/blog.php 代码

然后在全局配置 > 文章管理器选项 > 类别中选择博客作为覆盖/布局。

```
defined('_JEXEC') or die;

JHtml::addIncludePath(JPATH_COMPONENT.'/helpers');
$pageclass_sfx = trim($this->pageclass_sfx);

// so pick it on the page class in menu item
if (isset($pageclass_sfx) && $pageclass_sfx != '') {
    echo $this->loadTemplate($pageclass_sfx);
} else {
    echo $this->loadTemplate('default');
} 
```

如果需要其他东西，我可以添加多个 elseif，否则它会寻找 'blog_' 。$this->pageclass_sfx 。'php'。它总是以 blog_ 开头，因为那是编码到 com_content 中的。我移到 blog_default.php 和 blog_default_item.php 的旧博客

# python - 可选默认值

> ID：13715680
> 
> 赞同：0
> 
> 时间：2012-12-05T03:11:44.123
> 
> 标签：python

在python中，是否可以定义可覆盖的可选默认值，如果您定义该值，它不使用默认值，但如果您不使用，它会使用？

例如：

```
def hats(a= 'large', b= 'baseball', c= 'five dollars'):
    #method stuff goes here 
```

我知道我可以定义,`a`然后将默认值，但我可以以某种方式定义并拥有和使用默认值吗？`b``c``c``a``b`

比如，我可以调用方法吗`hats(NULL, something, something else)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T03:14:05.293

> 我可以以某种方式定义 c 并让 a 和 b 使用默认值吗

当然：

```
hats(c = 'something') 
```

`a`将使用和的默认值`b`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T03:26:01.487

当然。调用函数时可以参考参数名称

```
def hats(a= 'large', b= 'baseball', c= 'five dollars'):
        print a,b,c

hats(b = "football")
>>> large football five dollars 
```

如果您传递参数但未指定名称，则参数将按顺序传递，例如：

```
hats("big","tennis")
>>> big tennis five dollars 
```

以上结果仅更改了前两个参数（a 和 b）并将 c 保留为默认值。

最后，您根本不必传递任何参数：

```
hats()
>>> large baseball five dollars 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T03:14:11.660

这就是默认参数的重点。如果你传入一些东西，你传入的东西就会被使用。如果不这样做，则使用默认值。

# asp.net-mvc-3 - 列模板 kendo ui 网格 mvc 动作链接

> ID：13715683
> 
> 赞同：7
> 
> 时间：2012-12-05T03:11:59.183
> 
> 标签：asp.net-mvc-3, kendo-ui

以下代码在开发中运行良好，只要我在 Web 服务器中部署它就说可以找到文件目录。我需要更改 .client 模板，使其不像以前那样硬编码。因此，如果我们部署到 Top 文件夹名称不同或层次结构发生变化的服务器，它仍然会找到该页面。

我在考虑使用 @Url.Action 但不确定在这种情况下如何在 .CLientTemplate 中实现

```
columns.Template(@<text>
           @Html.ActionLink(@item.FirstName, "Index", "Summary", new { testId = @item.FirstName })  
         </text>)
          .ClientTemplate("<a href='/Summary/Index/?testId =#= TestId #'>#=FirstName#</a>").Title("First Name"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T12:54:06.460

这样的事情应该做：

```
.ClientTemplate("<a href='" + Url.Action("Index", "Summary", new { testId = "#=TestId#" }) + "'>#=FirstName#</a>") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T10:06:45.667

我得到这个工作正常

```
columns.Bound(a => a.Id)
       .Title("Action")
       .Filterable(false)
       .ClientTemplate(
                       "<a href='" 
                      + Url.Action("ActionName", "Controller") 
                      + "/#= Id #'" 
                      + ">View</a>"
                      ); 
```

我需要一个额外的列和一个链接按钮字段来转到客户的详细信息页面。我不需要此列的过滤器选项，这就是我使用`Filterable(false)`. 您也可以如上所述提供链接内容和列标题。这个值`"/#= Id #'"`是我传递给控制器​​操作方法的值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T12:09:06.237

如果您使用服务器绑定（而不是 ajax）和 Razor 作为您的视图引擎，这里是一个示例。我需要一个链接，例如 /Controller/Action/Id ，其中 Id 是从模型的属性中获取的。请注意，@item 表示网格当前正在处理的模型实例。

```
columns.Template(@<text>@Html.ActionLink(AbaScore.Resources.App.Edit,"ACTION", "CONTROLLER", new { @item.Id }, null)</text>) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-01T20:35:27.590

我已经看到了 87 个不同的例子，但没有一个有效。这就是我最终所做的，它奏效了，而且很简单。

```
columns.Bound(p => p.member_id)
       .ClientTemplate("<a href='/members/details/#=member_id#'>Details</a>")
       ; 
```

# android - ViewPagerIndicator 1000 页不流畅

> ID：13715692
> 
> 赞同：4
> 
> 时间：2012-12-05T03:12:45.767
> 
> 标签：android, android-viewpager, viewpagerindicator

现在我有一个`ViewPager`并且`ViewPagerIndicator`可以在 Android 上分页我的屏幕。

我覆盖`getCount()`并`FragmentStatePagerAdapter`返回 1000 以拥有 1000 页。我需要做一些代码来获取基于日历的页面标题（dd/MM/yyyy）。每次滚动时，我都会看到所有 1000 个页面标题都已重建（我在 Adapter#getPageTitle(int) 打印日志）。

这使我的寻呼机滚动非常缓慢，不再流畅。

我认为 ViewPagerIndicator 不应该在我滚动 1 页时重建所有页面标题。

更新：添加适配器的源代码

```
public class ResultAdapter extends FragmentStatePagerAdapter {
    public ResultAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public int getCount() {
        return 1000;
    }

    @Override
    public Fragment getItem(int position) {
        Log.d("xskt", "Adapter.GetItem.position=" + position);
        Calendar calendar = Utilities.selectedProvince.getLastDay(Utilities.selectedCalendar, Utilities.pagerSize - position - 1);
        ResultView resultView = new ResultView(Utilities.selectedProvince, calendar);
        resultView.setTitle(calendar.get(Calendar.DAY_OF_MONTH) + "/" + (calendar.get(Calendar.MONTH) + 1));
        return resultView;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        // Calendar calendar;

                //DO SOME CALCULATE WITH CALENDAR

        // String title = calendar.get(Calendar.DAY_OF_MONTH) + "/" + (calendar.get(Calendar.MONTH) + 1);
        // return title;
        Log.d("xskt","get page title");
        return ((ResultView) getItem(position)).getTitle();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T04:56:45.600

我需要同样的东西，这是我所做的代码，基本上我根据新片段的位置计算要显示的标题。

默认情况下，显示当前日期对应的片段，如果位置发生变化，我只是获取当前位置与新位置之间的差异并修改日期以相应显示。

```
public class RateFragmentPagerAdapter extends FragmentStatePagerAdapter{

private final int todayPosition;
private RateFragment currentFragment;
private final Calendar todayDate;

/** Constructor of the class */
public RateFragmentPagerAdapter(FragmentManager fm, int today_position, Calendar today_date) {
    super(fm);
    todayPosition = today_position;
    todayDate = (Calendar) today_date.clone();
}

/** This method will be invoked when a page is requested to create */
@Override
public Fragment getItem(int arg0) {     
    currentFragment = new RateFragment();
    Bundle data = new Bundle();

    data.putInt("current_page", arg0);
    currentFragment.setArguments(data);
    return currentFragment;
}

/** Returns the number of pages */
@Override
public int getCount() {     
    return RateDayApplication.numberOfDays;
}

@Override
public CharSequence getPageTitle(int position) {
    Calendar newDate = (Calendar) todayDate.clone();

    int diffDays = position - todayPosition;
    newDate.add(Calendar.DATE, diffDays);

    return RateDayApplication.dateTitleFormat.format(newDate.getTime());
} 
```

}

它很快，因为我从不调用片段对象，我只是比较函数中的当前位置（最终位置）和新位置。

# opengl - 在没有 gluLookAt 的情况下旋转相机而不是场景

> ID：13715693
> 
> 赞同：0
> 
> 时间：2012-12-05T03:12:45.627
> 
> 标签：opengl, rotation, glulookat

我创建了一个网格来代表行走的地面。

我已将箭头键链接起来以旋转/移动视图：

```
switch(currentKey)
        {
        case sf::Key::Up:
            z_trans+=1;
            break;

        case sf::Key::Down:
            z_trans-=1;
            break;

        case sf::Key::Left:
            y_angle-=0.5;
            break;

        case sf::Key::Right:
            y_angle+=0.5;
            break;
        } 
```

z_trans 是 z 中的平移，y_angle 是 glRotatef() 中 y 轴的旋转。

我可以让我的“角色”向前走，左右转，然后继续朝着他所面对的方向直走。唯一的问题是，当我离开原点 (0,0,0) 时，旋转发生在原点周围，而不是相机周围。因此，如果我距离原点 100 个单位，我的角色基本上遵循 100 半径圆的路径。

在不使用 gluLookAt 的情况下，有没有人知道如何实现这个？完全被难住了，在这里坐了两个小时试图弄清楚。

完整代码：

```
float elapsedTime=Clock.GetElapsedTime();
    if(elapsedTime>REFRESH_RATE){
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity(); 
        glTranslatef(x_trans, y_trans, z_trans); // y_trans == -25.f to keep us above the plane
        glRotatef(x_angle,1,0,0);
        glRotatef(y_angle,0,1,0);
        glRotatef(z_angle,0,0,1);

        currentKey=sf::Key::Num9;

        if (Event.Type == sf::Event::KeyPressed) currentKey = Event.Key.Code;
        switch(currentKey)
        {
        case sf::Key::Up:
            z_trans+=1;
            break;

        case sf::Key::Down:
            z_trans-=1;
            break;

        case sf::Key::Left:
            y_angle-=0.5;
            break;

        case sf::Key::Right:
            y_angle+=0.5;
            break;
        }
        drawGrid();

        Clock.Reset();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:12:26.623

转动拳头，然后翻译第二个？

编辑：我刚刚检查了一些我现有的代码。

```
glLoadIdentity();
// Rotate around origin first
glRotatef(RotY,-1.0f ,0.0f, 0.0f);
glRotatef(RotX, 0.0f, 1.0f, 0.0f);
// Then move the camera
glTranslatef(-Player.x, -Player.y, -Player.z); 
```

# dma - 使用 DMA 接收数据

> ID：13715696
> 
> 赞同：1
> 
> 时间：2012-12-05T03:12:57.650
> 
> 标签：dma

我有一个简单的理论问题。我知道的 DMA 通常有半满或全中断。如果我想使用 DMA 从外围设备传输数据，我如何确保获得所有数据，因为数据可能不在 dma 传输边界。

例如，串行端口可能发送 5 个字节，我会获取并中断前 4 个组合在一起（假设 dma 大小为 4），但第 5 个则没有。人们通常使用什么方法来解决这样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-04T05:05:05.933

我最好的方法是这样的：

*   设置 DMA 内存区域。假设它是地址 0x2 到 0x1000
*   串行设备在该区域写入字节，作为循环缓冲区
*   每次串行设备写入时，它都会更新它的“写入指针”并保存在字节 0x0 和 0x1 中
*   PC 主机可以 dma 写指针，并与自己的读指针进行比较。读指针可以保存在 pc 主机上，根本不处理 DMA。然后 PC 知道要读取多少内存，它也知道是否存在下溢或溢出。

这应该是您想要的一个很好的起点。

# codeigniter - 可以将空 URL 参数传递给我的控制器吗？

> ID：13715698
> 
> 赞同：2
> 
> 时间：2012-12-05T03:13:04.980
> 
> 标签：codeigniter, url, parameter-passing

假设我的控制器函数需要 2 个参数：page_name 和 user_name

URL 的格式为[http://mysite.com/controller_name/function_name/page_name/user_name](http://mysite.com/controller_name/function_name/page_name/user_name)

假设有时我可以有一个空白的用户名，而其他时候我可以有一个空白的 page_name，我可以通过加载这个 URL 来传递一个空白的 page_name 吗？ [http://mysite.com/controller_name/function_name//user_name](http://mysite.com/controller_name/function_name//user_name)

如果控制器功能是：

```
function function_name($page_name="default", $user_name=null) 
... 
```

上述第二个 URL 的 $page_name 值是否为“默认”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T03:21:48.690

你不能。服务器将简单地忽略额外的斜线。由于这两个参数都是可选的，因此您应该使用请求参数。 [http://mysite.com/controller_name/function_name?page_name=p1&user_name=u1](http://mysite.com/controller_name/function_name?page_name=p1&user_name=u1)

在您的控制器中，使用`$this->input->get('page_name')`and`$this->input->get('user_name')`获取值并检查值是否为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-14T20:17:35.830

我知道这是一个老问题，但我想出的解决方案很简单。它是这样的：

```
$this->input->get('limit') ? $this->input->get('limit') : 20; 
```

# php - 自动运行而不加载页面的时间 php/javascript

> ID：13715704
> 
> 赞同：0
> 
> 时间：2012-12-05T03:13:38.637
> 
> 标签：php, javascript, mysql

是否可以制作一个即使不加载可以根据时间条件更新数据库值的页面也能自动运行的脚本？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:16:30.447

您可以使用 cron 作业。它会根据您的设置自动运行，它可以每分钟运行一次，也可以每年运行一次。这完全取决于你。

通常它很容易设置，所以你不应该有任何问题。

不过，我们需要有关您的设置的更多详细信息。

# jquery - JQuery：单击 div 文本以设置输入字段值

> ID：13715705
> 
> 赞同：1
> 
> 时间：2012-12-05T03:13:42.567
> 
> 标签：jquery

当用户单击它时，我正在尝试使用 jquery 将输入字段值设置为选项字段内的文本。这将需要记录最后关注的输入字段，以便稍后在用户单击“选项”时设置其值。

标记

```
<div class="option">apples</div>
<div class="option">oranges</div>
<div class="option">pears</div>

<input type="text" value="default" class="fruit-name"/>
<input type="text" value="default" class="fruit-name"/>
<input type="text" value="default" class="fruit-name"/> 
```

JQuery（带伪代码）

```
$(document).ready(function(){
   $('.fruit-name').click(function(){
      $('.option').click(function(){
           $((this)(fruit-name)).val($((this)(option)).text());

      });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:20:36.763

```
$(document).ready(function() {
    var $option = $('.option'),
        $fruit = $('.fruit-name'),
        $last;

    $fruit.focus(function() {
        $last = $(this);
    })

    $option.click(function() {
        $last.val(this.innerHTML)
    })
}); 
```

[http://jsfiddle.net/jgBxs/](http://jsfiddle.net/jgBxs/)

# linq-to-sql - LINQ 查询其中记录在相关表中不存在，或者在相关表中存在条件

> ID：13715707
> 
> 赞同：0
> 
> 时间：2012-12-05T03:13:44.637
> 
> 标签：linq-to-sql

执行以下查询的最佳方式是什么？

我有两个具有以下结构的表：

![数据库表](../Images/6d1ad93a1d26e86ef5b59e7ef6aba794.png)

我想找到所有“无主”资产——这意味着没有 AssetOwner 记录具有 AssetID 并且将来没有 EndDate 或 EndDate。

我在这个查询中做了第一遍：

```
return from a in db.Assets
       where !db.AssetOwners.Any(o => o.AssetID == a.ID 
                                      && (!o.EndDate.HasValue || o.EndDate > DateTime.Now))
       select a; 
```

但鉴于我缺乏这方面的经验，我想知道这是否是执行此查询的最佳方式（我什至不知道选项是什么）。

干杯，

蒂姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:15:07.693

到目前为止还不错。尝试

```
return from a in db.Assets
       where !(a.AssetOwners.Any(o => o.EndDate.HasValue || o.EndDate > DateTime.Now))
       select a; 
```

# c++ - 如何识别股票市场的矩形价格拥堵？(C++)

> ID：13715709
> 
> 赞同：2
> 
> 时间：2012-12-05T03:13:49.323
> 
> 标签：c++, algorithm, stocks, congestion-control

在股市技术分析领域，有矩形价格拥堵水平的概念，即：价格在一段时间内基本上没有突破之前的高低水平，形成一个矩形图形。例如：[http](http://cf.ydcdn.net/1.0.0.25/images/invest/congestion%20area.jpg) ://cf.ydcdn.net/1.0.0.25/images/invest/congestion%20area.jpg 。

编辑：对我来说更清楚：股票和外汇市场是由称为“脉冲”和“修正”的一组运动组成的，第一个是当前股票趋势的方向，另一个是相反的方向。当股票朝着趋势方向移动时，冲动运动总是大于随后的修正，但有时会发生这种情况，修正最终与冲动的大小相同。因此，例如，在具有积极趋势的股票中，冲动运动从价格 10.00 美元移动到 15.00 美元，然后出现修正，将价格降至 12.00 美元。当新的推动力出现时，我想，它并没有超过之前的高点（15.00 美元），而是完全屈服于它，随后又出现了新的修正，将价格准确地降至之前的低点（12.00 美元）。所以现在我们可以在股票图中画两条平行的水平线：一条在 15.00 美元的价格处，另一条在 12.00 美元的价格处，形成一个价格在内部“拥挤”的通道。如果我们在最边上画两条垂直条，我们就得到了一个矩形：一个的顶部条在高水平，另一个在低水平。

我正在尝试在 C++/Qt 中创建一种算法，该算法能够使用列表容器内的烛台数据检测此类模式（使用 Qt -> QList），但目前我正在研究是否有人知道已经这样做的人代码，所以我在开发这种算法时节省了大量的精力和时间。

所以我的第一个问题是：有没有人知道并且开源代码可以检测到这样的数字？- 显然不必完全在这种情况下，但是如果有一个代码可以执行类似的任务，只需要我进行调整就可以了。

另一方面，我怎么能创建这样的算法呢？很明显，高点是检测高低电平，而不仅仅是控制这些电平何时“中断”以检测图形的结尾，但我怎样才能以有效的方式做到这一点？今天我能做的最好的事情是使用时间作为参数来检测高低水平（例如“四根蜡烛中的最高价格”，并且使用非常昂贵的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:17:45.937

技术分析非常模糊和主观，当每个人在同一张图表中看到不同的东西时，很难在程序中编写代码。一个好的开始是使用一些成本函数，例如选择最小化距离平方和的水平，这比较小的偏差更能惩罚大偏差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T03:48:52.640

您应该使用“滞后”阈值的想法；您为价格如何突破低 (L) 或高 (H) 水平创建一个 4 级状态机。（第一次达到新低电平）L->L，（返回低电平）H->L，（新高电平）H->H，然后（返回高电平）L->H。

# git - 使用 gitk，我可以看到 2 次提交之间的区别吗？

> ID：13715710
> 
> 赞同：44
> 
> 时间：2012-12-05T03:14:02.847
> 
> 标签：git, gitk

我努力了：

```
git diff sha1 sha2 
```

但是输出不是最好的，是否可以使用 gitk 看到 2 次提交之间的区别？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-07-09T13:31:38.580

至少在 Windows 中这是完全可能的：

![在此处输入图像描述](../Images/34b6138addc0ab26f049fe4617954e3e.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-07T10:11:33.507

不确定您是否真的想要一个差异，或者您是否想要正常的 gitk 表示，但仅适用于从`sha1`到的提交`sha2`

在后一种情况下，您可以提供所有正常的修订参数：[https ://www.kernel.org/pub/software/scm/git/docs/gitrevisions.html](https://www.kernel.org/pub/software/scm/git/docs/gitrevisions.html)

所以你可以做类似的事情

```
gitk sha1..sha2 
```

或者如果 master 被合并到`sha2`分支中并且您不想看到来自 master 的提交并且, 是从use`sha1`分支的第一个提交`master`

```
gitk master..sha2 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T06:37:23.457

不幸的是，`gitk`不支持这种方式的差异输出。:-(你可以使用`git difftool`。它支持许多内置工具。例如，你可以做`git difftool -t kdiff3 sha1 sha2`。它一次显示一个文件差异。在 git list 上有关于支持多个文件的讨论一次通过差异工具，但我不确定结果在哪里。我还没有看到实现它的补丁。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-20T15:20:36.370

不，但你可以使用融合来做到这一点：

```
git checkout sha1
git reset sha2
git diftool --tool=meld 
```

诀窍是，通过检查 sha1 然后重置为 sha2，您可以使它们之间的所有差异看起来都是未提交的更改。然后，meld 可以利用其查看未提交更改的能力，同时对所有涉及的文件进行比较。

# java - Java - ServerSocket 错误

> ID：13715715
> 
> 赞同：0
> 
> 时间：2012-12-05T03:14:20.930
> 
> 标签：java, serversocket

我正在尝试使用简单的聊天客户端从另一台计算机接收消息。

我在控制台中收到此错误：

```
Starting Listener.......
Could not listen on that port
error: null 
```

当我发送文本时，我在控制台中得到了这个。

这是我的代码

```
import java.io.*;
import java.net.*;

class TCPServer
{
   public static void main(String argv[]) throws Exception
      {

         System.out.println("Starting Listener.......");

         try{

             ServerSocket welcomeSocket = new ServerSocket(5060);

             while(true)
             {

                //
                // Read a message sent by client application
                //
            Socket clientSocket = welcomeSocket.accept();   
                ObjectInputStream ois = new ObjectInputStream(clientSocket.getInputStream());
                String message = (String) ois.readObject();
                System.out.println("Message Received: " + message);

             }

         }
         catch (IOException e) {
             System.out.println("Could not listen on that port");
             System.out.println("error: "+e.getMessage());
             System.exit(-1);
         }

      }
} 
```

谁能看到我在做什么导致该空值？就此而言，当我发送文本字符串时导致捕获异常的原因是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:23:52.273

使用 System.out.println("error: "+e) 查看异常类型，该类型应提供有关究竟出了什么问题的更多详细信息 - Java 的类库异常因不包含详细说明问题的消息而臭名昭著（并且才刚刚开始获取在最近的版本中对此更好）。

此外，您捕获的 IOException 将包括使用套接字的任何错误，包括您尝试从侦听套接字读取，因此您的错误处理具有误导性和不足。

# android - 如何添加 google-play-services.jar 项目依赖项，以便我的项目将运行并显示地图

> ID：13715716
> 
> 赞同：21
> 
> 时间：2012-12-05T03:14:20.740
> 
> 标签：android, google-maps, android-mapview

我有以下问题：我尝试使用`SupportMapFragment`哪个`com.google.android.gms.maps.SupportMapFragment`是 Google Maps Android API v2 的一部分。

*我的第一种方法是从android-sdk\extras\google\google_play_services\libproject\google-play-services_lib*位置将项目添加到 Eclipse，并将其设置为MyApp的**Properties -> Project References菜单中的引用项目。**我还将项目添加到**Java Build Path / Projects**。错误指示器从 Eclipse 中消失了，但是当我尝试运行我的应用程序时出现`NoClassDefFoundError`异常。

所以我的第二种方法是将**jar**文件从*google-play-services_lib/libs*复制到我项目的 libs 目录中。MyApp 成功启动，但在 LogCat 中我可以看到**死代码......一些消息**，所以我猜这个 jar 文件必须以另一种方式引用。

现在我感到困惑和疲倦。
也许在Android方面更有经验的人可以告诉我该怎么办？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-11T19:26:13.703

如果您需要正确构建项目，keyboardsurfer 参考的快速入门指南将起作用，但它会在您的 Eclipse 工作区中留下一个虚拟的 google-play-services 项目，并且它没有正确地将 Eclipse 链接到 Google Play服务 Javadocs。

这是我所做的：

1.  使用上面引用的[Android Maps V2 快速入门](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)中的说明或设置 Google Play 服务 SDK 中的说明[安装 Google Play 服务 SDK](http://developer.android.com/google/play-services/setup.html)，但**不要**按照说明将 Google Play 服务添加到您的项目中。

2.  右键单击 Package Explorer 中的项目，选择 Properties 以打开项目的属性。

3.  （仅当您已经按照快速入门指南中的说明进行操作时！）删除对 google-play-services 项目的依赖：

    *   单击 Android 类别并删除对 google-play-services 项目的引用。

    *   单击 Java Build Path 类别，然后单击 Projects 选项卡并删除对 google-play-services 项目的引用。

4.  单击 Java Build Path 类别，然后单击 Libraries 选项卡。

5.  单击添加外部 JAR... 并选择 google-play-services.jar 文件。这应该在 [您的 ADT 目录]\sdk\extras\google\google_play_services\libproject\google-play-services_lib\libs 中。

6.  单击新的 google-play-services.jar 条目旁边的箭头，然后选择 Javadoc Location 项。

7.  单击 Edit... 并选择包含 Google Play Services Javadocs 的文件夹。这应该在 [您的 ADT 目录]\sdk\extras\google\google_play_services\docs\reference 中。

8.  仍然在 Java Build Path 类别中，单击 Order and Export 选项卡。选中 google-play-services.jar 条目旁边的框。

9.  单击确定以保存您的项目属性。

您的项目现在应该可以访问 Google Play Services 库，并且 Javadocs 应该在 Eclipse 中正确显示。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-05T16:30:10.470

我所做的是将一个新项目导入到 eclipse 工作区中，而那个路径是

**android-sdk-macosx/extras/google/google_play_services/libproject/google-play-services_lib**

并**在您的项目中添加为库**..它..简单！您可能需要在项目中添加支持库。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-03T12:32:13.923

**小心，请按照以下步骤操作并节省您的时间**

1.  右键单击您的项目资源管理器。

2.  从现有代码中选择新建-> 项目-> Android 应用程序项目

3.  仅浏览此路径 - “C:\Users**your path**\Local\Android\android-sdk\extras\google\google_play_services”

4.  **小心，只关注 - google_play_services 而不是 google_play_services_lib**

5.  这样您就可以导入 google play 服务库。

如果您对此有任何疑问，请告诉我。

谢谢

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-26T14:55:39.083

这里描述的一些解决方案对我不起作用。其他人这样做了，但是他们在运行时产生了警告，并且 javadoc 仍然没有链接。经过一些实验，我设法解决了这个问题。步骤是：

1.  [按照Android Developers](http://developer.android.com/google/play-services/setup.html#Install)**的建议** 安装 Google Play 服务。

2.  [按照Android Developers](http://developer.android.com/google/play-services/setup.html#Setup)**上的建议** 设置您的项目。

3.  如果您遵循 1\. 和 2.，您应该会在工作区中看到两个项目：您的项目和 google-play-services_lib 项目。`docs`将包含 javadoc的文件夹复制`<android-sdk>/extras/google/google_play_services/`到`libs`项目的文件夹中。

4.  `google-play-services.jar`从`<android-sdk>/extras/google/google_play_services/libproject/google-play-services_lib/libs`项目的“libs”文件夹中复制。

5.  在`google-play-services_lib`项目中，编辑 libs/ **google-play-services.jar.properties**。`<path>`in`doc=<path>`应指向您在步骤 3 中创建`reference`的文件夹的子文件夹。`docs`

6.  在 Eclipse 中，执行**Project** > **Clean**。完成，javadoc 现在已链接。

# linux - perl 内存不足错误

> ID：13715718
> 
> 赞同：2
> 
> 时间：2012-12-05T03:14:56.903
> 
> 标签：linux, perl, solaris

我有一个产生 60 个子进程的 perl 脚本。我收到“内存不足错误”并且没有其他额外的错误消息知道它的原因。它表示什么？是不是因为我有 60 个子进程同时在系统中运行，所以出现内存不足错误。我在这个过程中没有大数组或哈希映射，所以不应该有内存问题。子进程只是 greps 文件。Solaris 10 是操作系统。

1.  我可以在 Solaris 10 中分叉的子进程的最大限制是多少？
2.  内存不足是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T03:33:56.040

有些系统有 64 个孩子的限制。我猜你找到了一个。收获那些已经完成的产卵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:59:39.070

我相信 60 个进程分叉对于任何系统来说都太多了。你确定你需要所有这些吗？尽管`fork()`经常用作*并行化*的同义词，但应谨慎使用。例如，大多数“慢任务”都是 I/O 绑定的，可以通过非阻塞异步调用并行化（参见[AnyEvent](https://metacpan.org/module/Coro)和[Coro](https://metacpan.org/module/Coro)）。[即使是 CPU 密集型任务也很棘手：除非您拥有 64 核SMP](https://en.wikipedia.org/wiki/Symmetric_Multiprocessor)机器，否则不要期望 60 个子进程的速度会提高 60 倍。此外，这里是 Perl 并发编程的一个很好的比较图表：http: [//blog.64p.org/entries/2009/06/30](http://blog.64p.org/entries/2009/06/30)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:36:16.157

您可以使用诸如[Parallel::ForkManager](http://search.cpan.org/perldoc?Parallel%3a%3aForkManager)之类的库来将同时处理的进程数保持在一定范围内。

# python - Python PDB 立即退出 (stdin)

> ID：13715725
> 
> 赞同：3
> 
> 时间：2012-12-05T03:15:46.860
> 
> 标签：python, pdb

我目前正在为班级编写 AI 作业，每次我尝试调试（使用 ipdb 或 pdb）时，pdb 都会立即关闭。该程序将地图作为输入，现在我只是将文本文件输入并从标准输入中获取行。

`python value_iteration.py < l_track.txt`

这工作正常，但我认为它导致`pdb.set_trace()`关闭，有没有办法明确确保标准输入被释放或什么？

当前地图抓取代码段：

```
def map_input():
...
control_line = sys.stdin.readline().rstrip('\n')
height, width = control_line.split(",")
height = int(height)
width = int(width)

print "Map:"
while row < height:
    for line in sys.stdin:
        create MDP from states
...
return mdp 
```

然后：

```
def value_iteration(mdp, epsilon):
....
for state in mdp.states.keys():
     print mdp.actions[state]
     ipdborpdb.set_trace()
     utils_prime[state] = R(state) + gamma * max([
        sum([
           p * mdp.utilities[ns] for (p, ns) in T(state, a)
        ]) for a in mdp.actions[state]
     ])
     if abs(utils_prime[state] - mdp.utilities[state]) > delta:
        delta = abs(utils_prime[state] - mdp.utilities[state])
...
return mdp with utilities 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T20:37:11.900

我从来不知道如何解决这个问题，所以我改用文件名输入。

# javascript - 在 Object.create() 中定义函数

> ID：13715728
> 
> 赞同：1
> 
> 时间：2012-12-05T03:16:00.763
> 
> 标签：javascript, design-patterns

我想只使用该`Object.create`函数创建一个对象（没有任何原型，*第一个参数为 null*）。

我在某处读到属性决定了 JavaScript 中对象的状态，而 JavaScript 具有三种不同的属性：

*   命名数据属性
*   命名访问器属性
*   内部属性

因此，当我在对象中定义函数时，我是否应该始终将其定义为`named accessor property`：

```
var obj = Object.create(null, {   
     a:{
        get:function(){
           alert('jQuery nyan!');          
        }
     }
});​ 
```

或者我应该将函数定义为 a`named data property`当它既不是 a`setter`也不是 a时`getter`？[例如一些对 DOM obj 进行更改的 jQuery 函数]

```
var obj = Object.create(null, {
     a:{
        value:function(){
              alert('jQuery nyan!');          
        }
     }
});​ 
```

我应该采取哪种方法？在性能（速度）和内存管理方面它们有区别吗？他们似乎都毫无例外地工作。

```
obj.a;
//output: 'jQuery nyan!' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:46:10.643

为了更容易引用它们，让我们将它们定义如下

```
var objA = Object.create(null, {a: {get:  function(){alert('jQuery nyan!');}}});
var objB = Object.create(null, {a: {value:function(){alert('jQuery nyan!');}}}); 
```

`objA.a`现在，调用vs几乎没有区别`objB.a()`，除了使用`()`.

但是，有一些差异。主要区别在于您不能将参数传递给 getter，它是按原样调用的。这意味着`objA.a(1,2,3)`不会调用带有参数的函数`1, 2, 3`。它实际上会在调用*后*抛出一个错误，假设 getter 没有返回一个*Function*（你实际上是在尝试这样做`undefined(1,2,3)`）。

第二个区别要求我们记住[`Object.create`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)的第二个参数接受一个[描述符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty#Description)对象，其中包括标志`writable`（默认为*false*）。这里的区别是你不能设置`writable:true`，`objA.a`因为“一个属性不能同时有访问器和可写或有值”。这意味着如果您希望更改 getter 的方法，则必须重新定义属性，而对于*value*，您可以启用使用`=`来更改与属性关联的方法。

此外，没有 setter`objA.a = <expr>`将不会执行任何操作。

通常，您只会在以下情况下使用 getter 和 setter，`value`否则将其作为标准行为；

*   轻量级计算输出
*   验证输入（保护对象）
*   隐藏变量以防止直接访问
*   保留变量或属性名称可能更改的标准 API

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T03:59:49.153

如果您不关心兼容性，使用`getter`and`setters`可能是替换`setNAME()`s 和`getNAME()`s 的好方法。与[功能版本相比，没有显着的性能增益/损失](http://jsperf.com/direct-property-access-vs-getter-function/2)。

请注意，因为它看起来像访问一个变量，而不是调用一个函数，所以`getter/setter`函数应该是非常轻量级的以满足这个期望。

并且永远不要像 jQuery 那样对 getter 和 setter都使用*一个函数，它非常慢。*由于javascript中没有函数签名，因此模拟它`if/else`会导致大量性能损失。

# javascript - 在 Highcharts 中更改图表类型时修复/折扣数据系列

> ID：13715733
> 
> 赞同：1
> 
> 时间：2012-12-05T03:16:19.887
> 
> 标签：javascript, highcharts

我正在使用[highcharts](http://highcharts.com)来显示两个系列的数据。第一个是原始数据，第二个是基于初始数据计算得出的趋势线。问题是，当更改图表类型时，它会将趋势线计算为一个相等的序列，并将其与第一个序列一起堆叠/绘制。

我正在尝试：

*   将趋势线数据保留*为虚线*类型并仅更改主要数据图表类型
    --或--
*   如果无法保持原样，则删除/折扣趋势线。

我已经把确切的问题放在了 jsfiddle[上](http://jsfiddle.net/YAdp4/)。

**HTML 下拉列表：**

```
<select id="chartType">
  <option value="spline">Spline</option>
  <option value="line">Line</option>
  <option value="column">Column</option>
  <option value="area">Area</option>
</select> 
```

**我用来更改图表类型的函数：**

```
 $('#chartType').change(function(){
        changeType(chart.series, this.value);
 });

   function changeType(series, newType) {

       serie = series[0];
       serie.chart.addSeries({
       type: newType,
       name: serie.name,
       color: serie.color,
       data: serie.options.data
       }, false);

       serie.remove();
   chart.redraw();
   } 
```

我`series[0]`在我的函数中用作主要数据 - 因为它是要加载的第一个系列，但是当我随机循环浏览下拉选项时，它似乎几乎循环了系列 - 改变了趋势线的图表类型。 ..这几乎就像更新后的系列订单在更改类型后互换！

任何想法/黑客/解决方案？

**系列数据：**

```
series: [
  {
    lineWidth: 6,
    name: 'Primary data',
    data: [59.359,60.395,68.830,70.290,73.259,81.344,60.113,60.113,80.644,110.929,96.731,78.104]
  },
  {
    lineWidth: 3,
    dashStyle: 'dash',
    name: 'Trend-line',
    color: '#999999',
    shadow: 0,
    data: [59.259,62.123,64.986,67.850,70.714,73.577,76.441,79.305,82.168,85.032,87.896,90.759]
  }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:29:59.280

发生的事情是您每次都在查看 series[0] 。但是因为您要删除一条趋势线，然后每次都添加一条新趋势线，所以 series[0] 每次都会更改。

所以你需要做的是增加一种一致性感，就像这样：

```
 for ( i = 0 ; i < series.length ; i++ ) {
        if ( series[i].name == 'Primary data' ) {
            serie = series[i];
        }                
    }            
    // serie = series[0]; 
```

# c# - 尝试从 C# 调用 AS3 中的方法时获取 HRESULT E_FAIL

> ID：13715739
> 
> 赞同：1
> 
> 时间：2012-12-05T03:16:45.713
> 
> 标签：c#, actionscript-3, com-interop

`HRESULT E_FAIL`尝试访问 AS3 .swf 文件中的方法时出现错误，该文件作为 Winform 内的 AxShockwaveFlashObject 组件运行。flash 组件可以通过 Externalinterface 与 C# 进行通信，但是从 C# 发送到 Flash 到目前为止是不可能的。

该错误似乎是通用且毫无意义的，因为我发现了许多未回答的问题。尽管如此，我仍会尝试针对这种特定情况：

**C＃**

```
String method = "<invoke name=\"NewFilename\" returntype=\"xml\"></invoke><arguments></arguments>";
mainFlashControl.CallFunction(method); 
```

**AS3**

```
public function Main():void 
{
    if (stage) init();
    else addEventListener(Event.ADDED_TO_STAGE, init);
}

private function init(e:Event = null):void 
{
    removeEventListener(Event.ADDED_TO_STAGE, init);
    if (ExternalInterface.available)
    {
        ExternalInterface.addCallback("NewFilename", NewFilename);
    }   
}

public function NewFilename():void
{
    // Do Something...
} 
```

更新：我[所能找到](http://forums.adobe.com/message/84670?tstart=0#84670)的只是一种解决方法，它通过调用（从 AS3 到 C#）并读取响应来检查每个时间间隔是否有任何等待调用的函数。但是，我也无法得到返回任何东西的响应。我使用过`flashComponent.setResponseValue("test");`，在闪存端，Externalinterface.Call() 总是返回 null。

更新：我现在也研究了 FSCommand，也可以从 AS3 到 C#，但我似乎也没有办法将返回值附加到它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:22:58.030

让它工作。我想它需要一个参数才能起作用：

**C＃**

```
 String method = "<invoke name=\"NewFilename\" returntype=\"xml\"><arguments><string>"+sfd.FileName+"</string></arguments></invoke>";
        mainFlashControl.CallFunction(method); 
```

**AS3**

```
 public function Main():void 
    {
        if (stage) init();
        else addEventListener(Event.ADDED_TO_STAGE, init);
    }

    private function init(e:Event = null):void 
    {
        removeEventListener(Event.ADDED_TO_STAGE, init);
        _mainState = new MainState();
        addChild(_mainState);
        _editState = new EditState();
        addChild(_editState);
        _selectKeyState = new SelectKeyState();
        addChild(_selectKeyState);

        if (ExternalInterface.available)
        {
            ExternalInterface.addCallback ("NewFilename",NewFilename);
        }   
    }

    public function NewFilename(s:String):Boolean
    {
        _mainState.visible = false;
        var th:TextHandle = new TextHandle(s, 100);
        th.y = 200;
        this.addChild(th);
        return true;
    } 
```

# sql-server - 在 SQL Server 存储过程中需要命名参数的方法？

> ID：13715742
> 
> 赞同：2
> 
> 时间：2012-12-05T03:16:54.097
> 
> 标签：sql-server, stored-procedures, parameters

我想知道 SQL Server 2008 中的存储过程中是否有方法要求使用命名参数？如果做不到这一点，一种判断*是否*使用命名参数的方法就足够了。

我们正在考虑开发一些将由外部系统调用的相对复杂的存储过程，并且我正在寻找方法来最大限度地减少外部系统数据混淆和/或丢失的风险。

存储过程将处理相对大量的参数（至少对我们而言），多达几十个。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:30:34.830

编写存储过程时，通过分配默认值在顶部包含必须传递的变量，然后包含可选的变量。

您也可以在存储过程中验证它们，例如：

```
If @Var = ''
Begin
 SET @Var = 'Default'
END 
```

您可以使用的另一件事是 .Net 中的异常。当您没有传递存储过程所需的变量时，它将抛出一个异常，指出参数 x 是必需的但未提供（或类似的东西）。捕获该异常并以适当的方式将其发送回用户。

或在应用程序级别验证所有参数（甚至在将它们放入存储过程之前）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:12:19.387

此存储过程使用“dbcc inputbuffer”命令。要使用此命令，您需要“查看服务器状态”权限或属于 sysadmin 角色。我想您可以通过在不使用参数名称时引发错误来强制执行命名参数要求。

```
create procedure usp_Example
    @LastName nvarchar(50), 
    @FirstName nvarchar(50),
    @Initials nvarchar(10) = 'Default Initials'
as begin

    declare @inputBuffer  table (eventtype nvarchar(30), parameters int, eventinfo nvarchar(255))
    declare @execStatement nvarchar(255)

    --get sql for sproc execution
    insert into @inputBuffer
    exec ('dbcc inputbuffer (' + @@spid + ') with no_infomsgs')
    select top 1 @execStatement = eventinfo from @inputBuffer

    --get named parameters      
    select s.name
    from sys.all_parameters s where s.object_id = @@PROCID and CHARINDEX(s.name,@execStatement) > 0

    --do stored proc specific operations

end

go
--test with no parameter naming
exec usp_Example 'LastName','FirstName','Initials'
go
--test with parameter naming
exec usp_Example @lastName = 'LastName',@Firstname = 'FirstName',@Initials = 'Initials'
go
--test with parameter naming and default value
exec usp_Example @LastName = 'LastName',@FirstName = 'FirstName'
go 
```

# python - psycopg2 实际上没有插入数据

> ID：13715743
> 
> 赞同：68
> 
> 时间：2012-12-05T03:16:59.060
> 
> 标签：python, postgresql, psycopg2

我需要将 JSON 数据从龙卷风插入到 postgres，所以这里的测试是这样的：

```
from psycopg2 import connect

conn = connect("user='pguser' host='localhost' dbname='pgdb' password='pgpass'")
cursor = conn.cursor()

data = '[{"id":"sdf","name":"wqe","author":"vb"}]'

for row in eval(data):
  print row
  cursor.execute("""INSERT INTO books(id,name,author) VALUES('%s','%s','%s')""" % \
        (row['id'], row['name'], row['author'])
  )

>>> cursor.execute("SELECT * FROM books")
>>> cursor.fetchall()
[('sdf', 'wqe', 'vb')]
>>> 
$> psql -d pgdb -U pguser -W
Password for user pguser: 
psql (9.1.6)
Type "help" for help.

pgdb=> select * from books;
 id | name | author 
----+------+--------
(0 rows) 
```

正如你`select`在python shell中看到的，有一些数据，但在psql中有0行！我可能做错了什么？

Python 2.7.2+

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2012-12-05T03:28:47.190

你没有提交交易。

Psycopg2 自动打开一个事务，您必须告诉它提交以使数据对其他会话可见。

请参阅[psycopg2 常见问题解答](http://initd.org/psycopg/docs/faq.html)和[`connection.commit()`方法](http://initd.org/psycopg/docs/connection.html#connection.commit)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-11-02T20:53:15.783

刚刚遇到同样令人困惑的问题。将选项放在一起：

正如@Craig Ringer 在 cursor.execute 之后所写，您可以运行 connection.commit

```
cursor.execute('INSERT INTO table VALUES(DEFAULT, %s)', email)
...
connection.commit() 
```

或连接后设置自动提交

```
connection = connect("user='pguser' host='localhost' dbname='pgdb' password='pgpass'")
connection.autocommit = True 
```

或使用 set_session 设置自动提交

```
connection = connect("user='pguser' host='localhost' dbname='pgdb' password='pgpass'") 
connection.set_session(autocommit=True) 
```

一切都为我工作。

# emacs - emacs 批量缩进与 cc-mode 访问标签

> ID：13715747
> 
> 赞同：1
> 
> 时间：2012-12-05T03:17:20.690
> 
> 标签：emacs, batch-file, cc-mode

我正在尝试使用 emacs 批量缩进源文件。我正在使用命令：

```
$ emacs -batch Source.h -l emacs-format-file.el -f emacs-format-function 
```

其中 emacs-format-file.el 包含：

```
(defun emacs-format-function ()
 (c-set-style "gnu")
 (setq c-basic-offset 4)
 (c-set-offset 'access-label nil)
 (c-set-offset 'substatement-open 0)
 (indent-region (point-min) (point-max) nil)
 (untabify (point-min) (point-max))
 (save-buffer)
) 
```

Emacs 根据我的喜好缩进文件，但有一个例外。“public”、“private”和“protected”关键字都缩进了一个额外的空格：

```
 class Foo
 {
-public:
+ public: 
```

我想将这些关键字与前面的左括号对齐。基于[这个问题](https://stackoverflow.com/questions/4490196/emacs-public-protected-private-label-indentation-of-c-header-file-not-working)，我认为设置“访问标签”可以解决这个问题，但它似乎没有任何效果。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:48:34.820

事实证明，emacs 将头文件作为 C 而不是 C++ 处理。修复方法是更改​​ .el 文件以手动切换到 C++ 模式：

```
(defun c++-indent-region ()
  (c++-mode)
  (c-set-style "gnu")
  (setq c-basic-offset 4)
  (indent-region (point-min) (point-max) nil)
  (untabify (point-min) (point-max))
  (save-buffer)
) 
```

# php - 丢失时收到语法错误；before 语句和接收 javascript 函数上的引用错误

> ID：13715749
> 
> 赞同：0
> 
> 时间：2012-12-05T03:17:36.023
> 
> 标签：php, javascript, jquery, html

嗨，当我打开应用程序时（代码在问题的底部），我立即收到一条错误消息：

```
SyntaxError:missing ; before statement 
```

上述错误在查看页面源代码中显示了这一行：

```
var moduleinfo = 
Notice: Undefined variable: moduleInfo in ... on line 267 
```

如何修复上述错误？

同样在下面的代码中，当用户从课程下拉菜单中选择课程并提交课程时，它会显示一个模块下拉菜单，但它也给了我另一个错误说明：

```
ReferenceError: validation is not defined 
```

上面的错误表明这个错误在页面源代码的第 1 行，它只是一个空行。

我的问题是如何在下面的代码中修复这两个错误:(下面代码的顺序是应用程序中的确切顺序，先是 php，然后是 javascript，我还评论了第 267 行的位置（javascript ) 对于第一个错误并注释了 javascript 函数验证的位置)

**PHP/HTML**

```
<?php

// connect to the database
include('connect.php');
include('noscript.php');

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
}

$sql = "SELECT CourseId, CourseNo, CourseName FROM Course ORDER BY CourseNo";

$sqlstmt = $mysqli->prepare($sql);

$sqlstmt->execute();

$sqlstmt->bind_result($dbCourseId, $dbCourseNo, $dbCourseName);

$courses = array(); // easier if you don't use generic names for data 

$courseHTML = "";
$courseHTML .= '<select name="courses" id="coursesDrop">' . PHP_EOL;
$courseHTML .= '<option value="">Please Select</option>' . PHP_EOL;

$outputcourse = "";
$hiddencourse = "";

while ($sqlstmt->fetch()) {
    $course     = $dbCourseId;
    $courseno   = $dbCourseNo;
    $coursename = $dbCourseName;
    $courseHTML .= "<option value='" . $course . "'>" . $courseno . " - " . $coursename . "</option>" . PHP_EOL;

    if (isset($_POST['courses']) && ($_POST['courses'] == $course)) {
        $outputcourse .= "<p><strong>Course:</strong> " . $courseno . " - " . $coursename . "</p>";
        $hiddencourse .= "<p><input type='hidden' id='hiddencourse' value='" . $courseno . " - " . $coursename . "'></p>";
    }

}

$courseHTML .= '</select>';

?>

<form action="<?php
echo htmlentities($_SERVER['PHP_SELF']);
?>" method="post" onsubmit="return validation();">
<table>
<tr>
<th>Course: <?php
echo $courseHTML;
?></th>
</tr>
</table>
<p><input id="courseSubmit" type="submit" value="Submit Course" name="courseSubmit" /></p>
<div id="courseAlert"></div>
<div id="targetdiv"></div>
</form>

<?php

if (isset($_POST['courseSubmit'])) {
    //get the form data 
    $coursesdrop = (isset($_POST['courses'])) ? $_POST['courses'] : '';

    $modulequery = "
SELECT
m.ModuleId, m.ModuleNo, m.ModuleName, m.Credits
FROM
Module m
WHERE
m.ModuleId NOT IN (
SELECT cm.ModuleId
FROM Course_Module cm
WHERE cm.CourseId = ?
)
ORDER BY m.ModuleNo
";

    $moduleqrystmt = $mysqli->prepare($modulequery);
    // You only need to call bind_param once
    $moduleqrystmt->bind_param("i", $coursesdrop);
    // get result and assign variables (prefix with db)

    $moduleqrystmt->execute();

    $moduleqrystmt->bind_result($dbModuleId, $dbModuleNo, $dbModuleName, $dbCredits);

    $moduleqrystmt->store_result();

    $modulenum = $moduleqrystmt->num_rows();

    $moduleHTML = '<select name="module" id="modulesDrop">' . PHP_EOL;
    $moduleHTML .= '<option value="">Please Select</option>' . PHP_EOL;

    $moduleInfo = array();

    while ($moduleqrystmt->fetch()) {
        $moduleHTML .= sprintf("<option value='%s'>%s - %s</option>", $dbModuleId, $dbModuleNo, $dbModuleName) . PHP_EOL;

        $moduleData               = array();
        $moduleData["ModuleId"]   = $dbModuleId;
        $moduleData["ModuleNo"]   = $dbModuleNo;
        $moduleData["ModuleName"] = $dbModuleName;
        $moduleData["Credits"]    = $dbCredits;

        array_push($moduleInfo, $moduleData);

    }

    $moduleHTML .= '</select>';

    $moduleexist = "
<div id='rt-container'>
<form id='moduleExistForm'>
<p><strong>Current Modules</strong></p>
<p>{$moduleSELECT}</p>
</form> 
</div>";

    echo $moduleexist;

}

?> 
```

**Javascript**

```
<script type="text/javascript">
    $(document).ready(function () {

        var moduleinfo = <?php echo json_encode($moduleInfo); ?> ; //line 267

        $('#modulesDrop').change(function () {

            var moduleId = $(this).val(),
                moduledata;

            for (var i = 0, l = moduleinfo.length; i < l; i++) {
                if (moduleinfo[i].ModuleId == moduleId) {
                    moduledata = moduleinfo[i];
                }
            }

            var currentindex = $('#credits').val(moduledata.Credits);

        });

    });

//below is the validation() function

    function validation() {

        var isDataValid = true;

        var courseTextO = document.getElementById("coursesDrop");

        var errCourseMsgO = document.getElementById("courseAlert");

        if (courseTextO.value == "") {
            $('#targetdiv').hide();
            $('#moduleForm').hide();
            $('#detailsForm').hide();
            $('#addbtn').hide();
            errCourseMsgO.innerHTML = "Please Select a Course";
            isDataValid = false;
        } else {
            errCourseMsgO.innerHTML = "";
        }

        return isDataValid;

    }
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T03:20:35.037

删除 php 行中的空格：

`var moduleinfo = <? php echo json_encode($moduleInfo); ?> ;`

到

`var moduleinfo = <?php echo json_encode($moduleInfo); ?> ;`

`<? php`应该在一起就好`<?php`

# cakephp - 在 beforeDelete 回调中返回 false 会杀死 deleteAll

> ID：13715751
> 
> 赞同：2
> 
> 时间：2012-12-05T03:18:10.050
> 
> 标签：cakephp

删除记录时，我正在测试条件是真还是假，并根据结果继续删除或从中返回。

问题是“return false”完全停止了 deleteAll。我的理解是 deleteAll 只会移动到下一条记录。

这是一个错误，还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:48:31.830

如果出现问题，该`beforeDelete`方法允许您中止删除操作。通过让它返回 false，您将中止操作。在这种情况下， deleteAll 操作，意味着您中止*所有*删除。您更可能寻找的是在 foreach 循环中删除，例如：

```
// $data would be the resultset of the rows you want to delete
foreach($data as $row) {
    $this->Model->delete($row['Model']['id']);
} 
```

这样，`beforeDelete`对每一行单独调用，允许删除“有效”行并保留“无效”行。

# java - Jackson 多态反序列化（类取决于 JSON 键）

> ID：13715753
> 
> 赞同：3
> 
> 时间：2012-12-05T03:18:19.533
> 
> 标签：java, json, jackson, deserialization

# TL;博士

基本上，我的问题是我有一个包装对象列表

```
{"stuff": [
  {"foobar" : {someObjectOfTypeA}},
  {"barfoo" : {someObjectOfTypeB}},
  {"foobar" : {someObjectOfTypeA}}
]} 
```

并且 someObjectOfTypeX 的类型取决于键“foobar”或“barfoo”的值。我怎样才能反序列化这个？（目前）序列化不是问题。

* * *

# 长版

我不知道足够的杰克逊来解决以下问题。我试过了，但我卡住了。

我要解析的 json 结构如下所示：

```
{
  "id": "foobar",
  "responses": [
    {
      "responseType1": {
        "code": 0,
        "foo": "bar"
      }
    },
    {
      "responseType2": {
        "code": 1,
        "bar": {"foo": ...}
      }
    },
    {
      "responseType1": {
        "code": 1,
        "foo": "foobar"
      }
    }
  ]
} 
```

我尝试使用杰克逊完整数据绑定对其进行反序列化。我的pojo是：

```
// pseudocode

// the outermost object
@JsonCreator
ServiceResponse(
  @JsonProperty("id") String id, 
  @JsonProperty("responses") ArrayList<ResponseWrapper> responses)

// every response has a wrapper. the wrapper is an object with just one key and one value. the value is an object of a certain class (ResponseTypeX extends AResponse), and the exact ResponseType is identified by the key (the key isn't the class name though). 
@JsonCreator
ResponseWrapper(AResponse keyDependsOnTypeOfAResponse ???)

// base class for all responseTypeX classes
// all subclasses of AResponse have a code and a complex payload object
@JsonCreator
AResponse (
  @JsonProperty("code") int code)

// one response type
// here, the payload is just a string, in reality it's a deep structure, so i dont want to parse this manually
@JsonCreator
ResponseType1 extends AResponse (
  @JsonProperty("code") int code,
  @JsonProperty("foo") String foo)

// one response type
@JsonCreator
ResponseType2 extends AResponse (
  @JsonProperty("code") int code,
  @JsonProperty("bar") SomeOtherObject foo) 
```

如您所见，`responses`是一个包装对象数组；包装器对象的“有效负载”类由键标识（但键与类名不是 1:1 匹配）。我的 ResponseTypeX 是有限的，大约有 20 个，所以如果我必须手动进行键：值类型识别，我很高兴。

但是是否可以为 WrapperResponse 对象编写一个手动反序列化器并继续反序列化其具有完整数据绑定的子级？如果是这样，如何？

* * *

我试图让 Wrapper 接受所有可能的 ResponseTypes 作为属性，希望它只会使“未设置”的那些无效，例如

```
@JsonCreator
ResponseWrapper(
  @JsonProperty("responseKey1") ResponseType1 response1,
  @JsonProperty("responseKey2") ResponseType2 response2,
  @JsonProperty("responseKey3") ResponseType3 response3,
  ...) 
```

但这失败了，可能是因为所有 ResponseTypes 都是 AResponse 的子类，因此杰克逊感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T22:40:30.723

一些自定义反序列化处理是必要的。我建议在解决方案中包含一个简单的 foobar/barfoo-to-type 条目的注册表（映射），就像[我 2011 年 5 月 25 日的旧博客文章中的第六个示例“使用 Jackson 将 JSON 反序列化为多态类型 - A完整的例子”](http://programmerbruce.blogspot.com/2011/05/deserialize-json-with-jackson-into.html)。

# javascript - 尝试从教程中运行 Hello World 程序，但未显示对话框

> ID：13715758
> 
> 赞同：1
> 
> 时间：2012-12-05T03:18:50.617
> 
> 标签：javascript

这是我要运行的文件，但它所做的只是打开带有页面标题的网页，它不运行脚本。

```
<!DOCTYPE html PUBLIC “-//W3C//DTD XHTML 1.0 Strict//EN”
“http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd”&gt;
<html lang=”EN” dir=”ltr” xmlns=”http://www.w3.org/1999/
xhtml”&gt;
<head>
<meta http-equiv=»content-type» content=»text/xml;
charset=utf-8» />
<title>HelloWorld.html</title>
<script type = «text/javascript»>
//<![CDATA[
// Hello, world!
alert(«Hello, World!»);
//]]>
</script>
</head>
<body>
</body>
</html> 
```

我尝试在 aptana 和记事本上运行，都没有显示对话框。我觉得我忘记了一个小而重要的部分？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T03:20:13.563

您的引号是斜引号（« 和 »）和智能引号（“和”）的组合。您需要 HTML 和 JavaScript 中的“常规”引号 , `"`。如果您的键盘自动配置为以某种方式进行替换，请尝试使用单引号，或者只是交换键盘布局以进行编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T03:21:47.457

您需要包含 single`' '`或 double`" "`而不是`«` `»`.

这是更正的代码，

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="EN" dir="ltr" xmlns="http://www.w3.org/1999/
xhtml">
<head>
<meta http-equiv="content-type" content="text/xml; charset=utf-8" />
<title>HelloWorld.html</title>
<script type = "text/javascript">
//<![CDATA[
// Hello, world!
alert("Hello, World!");
//]]>
</script>
</head>
<body>
</body>
</html> 
```

# c# - 将 2 个列表框组合成一个新的列表框 c#

> ID：13715763
> 
> 赞同：0
> 
> 时间：2012-12-05T03:19:19.523
> 
> 标签：c#, visual-studio-2010, list, listbox

我有 2 个列表框，每个列表框显示 2 个不同的列表，这些列表由用户输入填充。我想知道是否可以以某种方式组合每个列表框中的数据并将其显示在第三个列表框中。这是 Visual Studio 中的 windowsForms 应用程序。我还想确保在将新值添加到 2 个不同的列表框中时正确更新它。到目前为止，我所做的是将我拥有的两个列表组合在一起：

```
 public List<String> listAll()
    {
        List<String> all = new List<string>();
        all.AddRange(listFirstName());
        all.AddRange(listSecondName());
        return all;
    } 
```

这个问题首先是我不知道当一个新值添加到其他两个列表时这是否会更新。其次，现在我有了这个新列表，我仍然不知道如何在列表框中显示它。请记住，我仍然需要在主窗体中显示包含前 2 个列表的其他列表框以及包含它们两个值的新列表框。

干杯，欢迎和赞赏任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:31:04.547

您可以使用单独的方法来填充 listBox3。在该方法中，您可以清除现有项目并添加 listBox1 和 listBox3 中的所有项目。

当您向 listBox1 或 listBox2 添加项目时，您可以在添加项目后调用相同的方法。

```
listBox3.Items.Clear();
listBox3.Items.AddRange(listAll().ToArray()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:33:18.500

通常，如果您想确保 Listbox 动态更新，请使用 ObservableCollection 而不是 List。

ObservableCollection 与 List 具有相同的格式：

```
ObservableCollection<String> all = new ObservableCollection<string>(); 
```

确保添加以下内容

```
using System.Collections.ObjectModel; 
```

# tcl - 用于默认值分配的 TCL proc

> ID：13715764
> 
> 赞同：1
> 
> 时间：2012-12-05T03:19:26.460
> 
> 标签：tcl

如果用户不提供任何参数，tcl 中自动接受参数的 proc 的语法是什么？

我用过类似的东西

```
 proc a {{args 1}} {
    puts $args
    }

    a 
```

当我使用它时，我将我的 args 值设为 1。它返回一个空白字符串。请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T07:23:14.373

听起来你正试图一起做两件不同的事情：

1.  接受可变数量的参数到您的过程
2.  如果没有提供参数，则使用默认值

proc 并没有专门处理这种情况的语法。但是，它很容易实现。您可以接受可变数量的参数（`args`关键字），然后检查是否提供了任何参数（如果没有，则使用默认值）。

```
proc myproc {args} {
    if { [llength [info level 0]] < 2 } { #called with no args
        set args {the default list of values}
    }
    # rest of the code goes here
} 
```

该`info level 0`命令返回调用时正在运行的实际命令，并带有参数。因此，如果它的结果​​长度 < 2，我们知道当前命令是在没有参数的情况下调用的（因为列表中的第一个元素是实际的命令名称本身）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T03:23:28.243

该词`args`是保留字，在 proc 定义中具有特定含义。使用不同的变量名：

```
proc a {{x 1}} {
    puts $x
}

a 
```

* * *

## 附加答案

在 proc 定义中，通过将参数定义为具有两个成员的列表来给出默认值：第一个是参数的名称，第二个是默认值。

这个词`args`是一个特殊的参数，它实现了剩余参数（也就是说，它捕获了参数列表中没有指定的剩余参数）。这就是在 Tcl 中实现可变参数函数的方式。

定义过程时，`args`参数和默认值可以一起使用。但`args`不能有默认值。之前列出的任何参数`args`都可以具有默认值。但是具有默认值的参数必须列在没有默认值的参数之后。所以，基本上你可以写一个这样的函数：

```
proc a {x {y 1} args} {
    puts "$x $y ($args)"
}
a 1       ;# prints 1 1 ()
a 1 2     ;# prints 1 2 ()
a 1 2 3 4 ;# prints 1 2 (3 4) 
```

如果您的用例符合此模式，那么您可以像上面的示例一样使用默认值定义参数`args`。如果没有，那么您唯一的选择是`args`自己处理：

```
# Assume parameters are key-value pairs,
# if value not given then default to 1
proc b args {
    foreach {x y} $args {
        if {$y == ""} { set y 1 }
        puts "$x -> $y"
    }
}
b 1 2    ;# prints 1 -> 2
b 1 2 3  ;# prints 1 -> 2, 3 -> 1 
```

# javascript - 如何将值传递给 PHP 并使用 AJAX 返回处理后的结果？

> ID：13715765
> 
> 赞同：0
> 
> 时间：2012-12-05T03:19:26.913
> 
> 标签：javascript, php, json, ajax

在我的项目中有一个 process.php，它根据 GET 输入处理数据。例如：

如果 scandir.php?page=5 ，它将返回一个编码的 json 对象，它是一个多维数组。

现在我正在修改 ajax 部分，如何调用 php ，将值分配给 php 并返回并显示结果？

下面是我从教程站点找到的示例代码，它似乎没有将任何值传递给 php 文件？

```
 <!DOCTYPE html>
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <div id="prev"></div>
  <div id="curr"></div>
  <div id="next"></div>  
<script>
   $(document).ready(function(){
       var url = 'scandir.php?' + 'page=5';
        $.getJSON(url , null,
          function(data) {
            $.each(data.items, function(i,item){
              console.log(item);
            });
          });
    });
​&lt;/script>
</body>
</html> 
```

PHP文件创建的json对象示例

```
{"prev":["","demo\/medium\/Web081112_P001_medium.jpg"],"curr":["demo\/medium\/Web081112_P002_medium.jpg","demo\/medium\/Web081112_P003_medium.jpg"],"next":["demo\/medium\/Web081112_P004_medium.jpg","demo\/medium\/Web081112_P005_medium.jpg"]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:24:45.153

我认为你应该这样做：

```
var url = 'process.php?' + 'value='1 + yourValue;

$.getJSON(url , null,
  function(data) {
    $.each(data.items, function(i,item){
      $(item).appendTo("#results");
    });
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:00:49.977

要将值传递给 PHP 函数，请使用 AJAX JQuery 即 $.ajax 和成功回调使用 $.parseJSON 对数据进行编码。

```
 $.ajax({
         url: url,
         data: {param1:value1,p1:v2},
         success: function(data){
               var obj = $.parseJSON(data);
               alert(obj.index); //access the indivisual value of the variable

         }
      }); 
```

# java - 为什么我们不同步 Web 服务？

> ID：13715767
> 
> 赞同：2
> 
> 时间：2012-12-05T03:19:46.200
> 
> 标签：java, web-services, rest, synchronization, synchronous

让我们以 REST Web 服务为例。当我们定义一个webservices时，它在内存中被创建为一个单例，但是我们建议不要让webservices同步？为什么这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T03:34:35.077

Web 容器的作者不遗余力地制作了一个高度并发、高度可扩展的系统，该系统可以允许硬件可以处理的尽可能多的同时用户。

如果您去同步 Web 服务，那么现在无论您的服务器有多快或它可以处理多少并发连接，每个用户都必须排队等待一次使用您的 Web 服务。

对于大多数 Web 服务来说，这将被认为是一个相当大的架构失败 :)

# java - Java中一维数组的逆序

> ID：13715768
> 
> 赞同：-1
> 
> 时间：2012-12-05T03:19:49.833
> 
> 标签：java

> **可能重复：**
> [如何在 Java 中反转 int 数组？](https://stackoverflow.com/questions/2137755/how-do-i-reverse-an-int-array-in-java)

我需要在不使用临时值的情况下反转数组中给定数字的顺序。

```
public class Reverse 
{
    public static void main (String[] args)
    {
        int[] num  = { 12, 34, 50, 67, 88 }, cl, cl2;

        for (i=0; i < a.length; i++)
        {
            cl = a[i];
            cl2 = a[(a.length - 1 )-1];
            System.out.println (cl1 + " " + cl2);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T03:24:33.943

由于您似乎只是将值打印出来，因此您可以向后迭代您的数组。

```
for(int i = a.length - 1; i >= 0; i--) {
    // relevant code here
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T03:24:08.497

您可以使用[`Collections#reverse`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#reverse%28java.util.List%29)内联整数数组的反向排序，

```
Collections.reverse(Arrays.asList(num)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T04:04:32.803

给出的答案是完美的。但是我只是添加了另一个答案，以防您想在不使用任何临时文件的情况下将反向数组存储到原始数组中。用这个。

```
public class Reverse 
{
    public static void main (String[] args)
    {
        int[] a = { 12, 34, 50, 67, 88 };
        int i, j;

        for (i = 0, j = a.length - 1; i < j; i++, j--)
       {
           a[i]=a[i]+a[j];
           a[j]=a[i]-a[j];
           a[i]=a[i]-a[j];
       }
    }
} 
```

# python - 使用队列的 Python 多线程

> ID：13715772
> 
> 赞同：1
> 
> 时间：2012-12-05T03:20:17.270
> 
> 标签：python

我正在阅读一篇关于使用队列的 Python 多线程的文章并且有一个基本问题。

根据 print stmt，按预期启动了 5 个线程。那么，队列是如何工作的呢？

1.线程最初是启动的，当队列中填充了一个项目时，它是否会重新启动并开始处理该项目？2.如果我们使用队列系统，线程对队列中的每一项进行处理，性能上会有怎样的提升。是不是类似于串行处理ie；1 比 1。

```
import Queue
import threading
import urllib2
import datetime
import time

hosts = ["http://yahoo.com", "http://google.com", "http://amazon.com",
"http://ibm.com", "http://apple.com"]

queue = Queue.Queue()

class ThreadUrl(threading.Thread):

  def __init__(self, queue):
    threading.Thread.__init__(self)
    print 'threads are created'
    self.queue = queue

  def run(self):
    while True:
      #grabs host from queue
      print 'thread startting to run'
      now = datetime.datetime.now()

      host = self.queue.get()

      #grabs urls of hosts and prints first 1024 bytes of page
      url = urllib2.urlopen(host)
      print 'host=%s ,threadname=%s' % (host,self.getName())
      print url.read(20)

      #signals to queue job is done
      self.queue.task_done()

start = time.time()
if __name__ == '__main__':

  #spawn a pool of threads, and pass them queue instance 
    print 'program start'
    for i in range(5):

        t = ThreadUrl(queue)
        t.setDaemon(True)
        t.start()

 #populate queue with data   
    for host in hosts:
        queue.put(host)

 #wait on the queue until everything has been processed     
    queue.join()

    print "Elapsed Time: %s" % (time.time() - start) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:29:48.593

队列类似于列表容器，但具有内部锁定，使其成为一种线程安全的数据通信方式。

当您启动所有线程时会发生什么，它们都在`self.queue.get()`调用中阻塞，等待从队列中拉出一个项目。当一个项目从您的主线程放入队列时，其中一个线程将被解除阻塞并接收该项目。然后它可以继续处理它，直到它完成并返回到阻塞状态。

您的所有线程都可以同时运行，因为它们都能够从队列中接收项目。这就是您会看到性能改进的地方。如果`urlopen`和`read`在一个线程中花费时间并且它正在等待 IO，则意味着另一个线程可以工作。队列对象的工作只是管理锁定访问，并将项目弹出给调用者。

# wordpress - 添加“查看 20 | 50 | 100”按钮以加载更多 Wordpress 帖子

> ID：13715776
> 
> 赞同：0
> 
> 时间：2012-12-05T03:21:05.193
> 
> 标签：wordpress

我有存档和搜索页面，它们需要具有本质上更改“post_per_page”参数的按钮。我能够得到类似的东西来改变结果顺序（名称或日期），如下所示：

`<span class="left">Sort by: <a href="' . get_bloginfo('url') . '?s=' . get_search_query() . '&orderby=title&order=asc">Name<a>;`

我尝试在链接中使用“&posts_per_page=20”，但这似乎不起作用。

有什么建议么？

# c - 如何从标准 FILE 结构中获取文件名？

> ID：13715777
> 
> 赞同：1
> 
> 时间：2012-12-05T03:21:24.937
> 
> 标签：c

我想要的是：

```
 void printFname(FILE * f)
    {    
        char buf[255];
        MagicFunction(f,buf);
        printf("File name: %s",buf);
    } 
```

所以，我需要的只是“MagicFunction”，但[不幸的是我还没有找到这样](http://www.cplusplus.com/reference/cstdio)的......

有没有办法使用操作系统库来实现？（windows.h、cocoa.h、posix.h 等）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T03:23:59.217

没有这样的功能。可能没有文件名，或者与`FILE *`. 在 Unix 上，程序可以在文件被重命名或删除后继续引用文件，这可能意味着您有一个`FILE *`没有名称的文件。或者可以对文件进行更多的硬链接，这意味着一个文件可以有多个名称；你会选哪一个？为了进一步混淆，可以通过在包含该文件的目录上安装文件系统来临时隐藏文件。该文件仍将在磁盘上，以其原始路径名，但该文件将无法在该路径上访问，因为挂载遮住了它。

也有可能`FILE *`根本不对应文件系统上的文件。虽然他们通常会这样做，但您可以使用任何文件描述符创建一个[`fdopen()`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/fdopen.html)，并且该文件描述符可能是管道、套接字或其他在磁盘上从未有过路径的类似文件的对象。在某些版本的 C 库中，您可以打开一个字符串流（例如，[`fmemopen()`](http://www.gnu.org/software/libc/manual/html_node/String-Streams.html#String-Streams)在 glibc 中），因此`FILE *`实际上只对应一个内存缓冲区。

如果您关心名称，最好只跟踪打开文件时的名称。

有一些 hacky 方法来近似获取文件名；如果您只是将其用于调试或信息目的，那么它们可能就足够了。其中大多数将需要对文件描述符而不是 进行操作`FILE *`，因为文件描述符是引用文件的较低级别的方式。要获取文件描述符，请在[`fileno()`](http://www.gnu.org/software/libc/manual/html_node/Descriptors-and-Streams.html)上运行`FILE *`，并记住检查错误以防万一没有与之关联的文件描述符`FILE *`。

在 Linux 上，您可以对文件描述符[`readlink()`](http://www.kernel.org/doc/man-pages/online/pages/man2/readlink.2.html)在[`"/proc/self/fd/fileno"`](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)哪里进行操作。`fileno`这将显示文件打开时文件的文件名，或指示它是哪种其他文件描述符的字符串，如套接字或 inotify 句柄。FreeBSD 和 NetBSD 具有 Linux 仿真层，其中包括仿真 Linux 风格的 procfs；如果您安装与 Linux 兼容的 procfs，您也许可以在这些设备上执行此操作，尽管我没有它们可用于测试。

在 Mac OS X 上，您没有`/proc/self/fd`. 如果您不关心找到原始文件名，但引用该文件的其他文件名可以工作（这样您可以将其传递给另一个程序），您可以构造一个：`/.vol/deviceid/inode`. 例如，`/.vol/234881030/281363`。要获取这些值，[`fstat()`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/fstat.2.html)请在文件描述符上运行，`st_dev`然后`st_ino`在生成的`struct stat`.

在 Windows 上，文件和文件系统的工作方式与 Unix 完全不同。显然，可以将文件映射回 Windows 上的名称。从 Windows Vista 开始，您可以简单地调用[`GetFinalPathNameByHandle()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364962%28v=vs.85%29.aspx). 这需要一个`HANDLE`; `HANDLE`要从文件描述符中获取，请调用[`_get_osfhandle()`](http://msdn.microsoft.com/en-us/library/ks2530z6.aspx). 在 Windows Vista 之前，您需要做更多的工作，如[本文所述](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366789%28v=vs.85%29.aspx)。请注意，在 Windows`fileno()`上名为`_fileno()`，尽管前者可能会出现警告。

更进一步进入 hacky 领域，您可以使用更多技术。您可以使用[`lsof`](http://people.freebsd.org/~abe/)，或者您可以提取它用于解析路径名的代码。`lsof`实际上直接查看内核内存，从内核的名称缓存中提取信息。这有几个限制，如[常见问题解答中](ftp://lsof.itap.purdue.edu/pub/tools/unix/lsof/FAQ)[所述`lsof`](ftp://lsof.itap.purdue.edu/pub/tools/unix/lsof/FAQ)。当然，您需要 root 或同等权限才能直接或使用 suid/sgid 二进制文件执行此操作。

最后，对于查找一个或多个与打开文件匹配的文件名的可移植但缓慢的解决方案，您可以使用`fstat()`文件描述符找到设备和 inode 编号，然后递归遍历`stat()`每个文件的文件系统，直到找到一个文件匹配设备和 inode 号。记住我上面提到的警告；您可能找不到匹配的文件，匹配的文件不止一个，即使您没有找到任何匹配的文件，该文件可能仍然存在，但被挂载点隐藏。当然，可能会有竞争条件；某些东西可能会以您在遍历层次结构时永远看不到的方式重命名文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T03:22:46.113

没有这样的标准功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T03:30:25.707

你`fopen()`自己吗？如果是这样，`FILE *`请自己维护文件名哈希表。

否则，一般情况下是不可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T03:34:59.847

我认为即使在 windows.h、coca.h 或 unistd.h 中也没有这样的功能。很可能是你自己写的。只做一个

```
struct myFile {
FILE *fh;
char *filename;
} 
```

并将这样的结构保存到数组中，`struct myFile`并在数组上`MagicFunction(f,b)`行走，寻找等于 的地址`f`。

# xml - Groovy：将 XML 元素从一个文档复制到另一个文档

> ID：13715779
> 
> 赞同：3
> 
> 时间：2012-12-05T03:21:30.263
> 
> 标签：xml, groovy, xml-parsing, markupbuilder

我是 Groovy 的新手，遇到了一个简单的问题。我想做的就是从一个 XML 文件中提取某些元素并用它创建一个新文件。这是一个示例 XML，让我们使用一个 Maven pom 文件：

```
<project>
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.group</groupId>
  <artifactId>artifact</artifactId>
  <version>1.4</version>
  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.2</version>
        <scope>test</scope>
      </dependency>
    </dependencies>
 </dependencyManagement> 
```

我知道如何在 Groovy 中解析 XML：

```
def project = new XmlParser().parse("pom.xml")
project.groupId.each{
  println it.text()
} 
```

我也知道如何在 Groovy 中创建 XML：

```
def xml = new groovy.xml.MarkupBuilder()
xml.project (){
  modelVersion("artifactId")
  groupId("com.group")
  artifactId("artifact")
} 
```

但是，我似乎在将两者结合起来时遇到了问题。例如，我想获取*groupId*、*artifactId*和整个*依赖关系*树，并从中创建一个新的 XML。它不会那么难，我想利用 Groovy 的简单性。

这些方面的东西（当然这不起作用）：

```
def newXml= new groovy.xml.MarkupBuilder()
newXml.groupId= project.groupId
newXml.dependencies = project.dependencyManagement.dependencies 
```

* * *

谢谢。该代码帮助很大，但我如何处理命名空间，即输入中的项目标记是否如下所示：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"> 
```

然后它在输出中添加一些奇怪的注释。我想要的是输出中的项目标签也是这样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T09:58:06.887

你可以这样做`XmlSlurper`：

```
import groovy.xml.*

def pxml = '''<project>
             |  <modelVersion>4.0.0</modelVersion>
             |  <groupId>com.group</groupId>
             |  <artifactId>artifact</artifactId>
             |  <version>1.4</version>
             |  <dependencyManagement>
             |    <dependencies>
             |      <dependency>
             |        <groupId>junit</groupId>
             |        <artifactId>junit</artifactId>
             |        <version>4.8.2</version>
             |        <scope>test</scope>
             |      </dependency>
             |    </dependencies>
             |  </dependencyManagement>
             |</project>'''.stripMargin()

def p = new XmlSlurper().parseText( pxml )

String nxml = new StreamingMarkupBuilder().bind {
  project {
    dependecyManagement {
      dependencies {
        mkp.yield p.dependencyManagement.dependencies.children()
      }
    }
  }
}

println XmlUtil.serialize( nxml ) 
```

哪个打印：

```
<?xml version="1.0" encoding="UTF-8"?>
<project>
  <dependecyManagement>
    <dependencies>
      <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.2</version>
        <scope>test</scope>
      </dependency>
    </dependencies>
  </dependecyManagement>
</project> 
```

为了更好地处理命名空间，您可以尝试：

```
def pxml = '''<project xmlns="http://maven.apache.org/POM/4.0.0"
             |         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             |         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
             |  <modelVersion>4.0.0</modelVersion>
             |  <groupId>com.group</groupId>
             |  <artifactId>artifact</artifactId>
             |  <version>1.4</version>
             |  <dependencyManagement>
             |    <dependencies>
             |      <dependency>
             |        <groupId>junit</groupId>
             |        <artifactId>junit</artifactId>
             |        <version>4.8.2</version>
             |        <scope>test</scope>
             |      </dependency>
             |    </dependencies>
             |  </dependencyManagement>
             |</project>'''.stripMargin()

def p = new XmlSlurper().parseText( pxml )

String nxml = new StreamingMarkupBuilder().bind {
  mkp.declareNamespace(    '':"http://maven.apache.org/POM/4.0.0",
                        'xsi':"http://www.w3.org/2001/XMLSchema-instance" )
  project( 'xsi:schemaLocation':p.@schemaLocation ) {
    dependecyManagement {
      dependencies {
        mkp.yield p.dependencyManagement.dependencies.children()
      }
    }
  }
}

println XmlUtil.serialize( nxml ) 
```

哪个应该给你：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <dependecyManagement>
    <dependencies>
      <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.2</version>
        <scope>test</scope>
      </dependency>
    </dependencies>
  </dependecyManagement>
</project> 
```

# xpath - 使用 idref 的 XPath 表达式

> ID：13715784
> 
> 赞同：2
> 
> 时间：2012-12-05T03:21:58.703
> 
> 标签：xpath, xquery-3.0

我正在阅读和测试 XQuery 以及我使用 BaseX(www.basex.org) 和 saxon-HE 9.4.0.6N 的测试工具。对于以下简单的 XML 文件 - sample.xml 没有附加架构：

```
 <rootab>
     <l1>
       <items p="a">
         <itema x1="10" id="abc">testa</itema>
         <itemb x1="10" id="dfe">testb</itemb>
         <itemc x1="10" id="jgh">testc</itemc>  
       </items>
     </l1> 
     <l2>
         <items p="b">
           <itema x1="10" xidref="abc">testa</itema>
           <itemc x1="10" xidref="jgh">testc</itemc>  
           <itemd x1="10" xidref="abc">testA101</itemd>  
           <iteme x1="10" xidref="jgh">testB202</iteme>  
         </items>
     </l2> 
</rootab> 
```

在 Basex_GUI 中，如果我输入以下 XPath 表达式：`//idref("abc")/..` 结果是： `<itema x1="10" xidref="abc">testa</itema>`

在 BaseX_GUI 中，如果我添加简单的 XQuery 表达式：

```
for $x in doc('sample.xml')//idref("abc")/.. 
    return <aaa>{$x}</aaa> 
```

结果是：

```
<aaa>
  <itema x1="10" xidref="abc">testa</itema>
</aaa>
<aaa>
  <itemd x1="10" xidref="abc">testA101</itemd>
 </aaa> 
```

q1) 为什么 XPath 表达式只返回一个节点？我期待两个...

在 Saxon 中，通过使用以下 xql 文件：

```
 <test>
    {
    doc('sample.xml')//idref("abc")/..
    }
   </test> 
```

或 XQuery 表达式，我通过运行以下命令收到相同的结果`query sample.xql`：

```
<?xml version="1.0" encoding="UTF-8"?><test/> 
```

q2) 我的撒克逊测试出了什么问题？

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:41:16.290

基本上，`idref()`它对 DTD 验证很敏感——它识别在 DTD 中声明为类型**IDREF**的属性。

您没有向我们展示您的 DTD，更重要的是，您还没有展示如何提供查询的输入。有许多构建输入的方法，其中丢失了属性的“IDREF-ness”——例如，通过 DOM。即使您`doc()`在 Saxon 中使用该函数，输入树的构建方式也取决于许多因素，包括配置选项和您的 URIResolver。

我看到你正在使用.NET。当 Saxon 在 .NET 上使用 Microsoft XML 解析器时，它不知道哪些属性是 ID 和 IDREF，因此`id()`and`idref()`函数不起作用（MS 解析器根本不提供此信息）。因此，您需要使用 Saxon 产品附带的 JAXP 解析器 (Xerces)。我认为这是这些天的默认设置。

所以不是真正的答案，但希望有一些背景可以解释一些可能出错的事情。

# algorithm - 列出所有排列以将一些数字总结为目标数字

> ID：13715786
> 
> 赞同：0
> 
> 时间：2012-12-05T03:22:19.547
> 
> 标签：algorithm

> **可能重复：**
> [查找列表中哪个数字总和等于某个数字的算法](https://stackoverflow.com/questions/3420937/algorithm-to-find-which-number-in-a-list-sum-up-to-a-certain-number)

**问题：**

有一个列表：[1,2,3,4,6,8,10,12]，我想用这些数字总结一个新的数字 16。

**规则：**

1）不需要使用所有的数字，6 + 10 就可以了。

2）一个数字可以多次使用，12+2+1+1就可以了。

3）顺序很重要，12+6和6+12是两种不同的组合。

我已经看到[算法来总结所有组合的数字列表](https://stackoverflow.com/q/403865/94962 "总结所有组合的数字列表的算法")，但这不一样。

对算法不太了解，如果这适合某些算法，请告诉我，或者一些python代码/伪代码将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T07:53:13.873

首先 - 请注意，即使找到总和为所需数字的任何子集也是[NP-Complete](http://en.wikipedia.org/wiki/NP-complete)并且被称为[子集和问题](http://en.wikipedia.org/wiki/Subset_sum_problem)，因此没有已知的多项式解决方案。

现在，关于具体问题，这里有一些选项：

首先当然有明显的“生成所有子集并检查总和”的方式。请注意，如果您的元素都是非负的，您可以在实际开发它们之前使用分支和绑定并终止大部分可能性（如果您找到了一个子集`X`，`sum(X) == s`并且您正在寻找数字`n < s`- 您可以确定任何包含的集合`X`都不会找到解决方案）。类似于以下内容：

```
findSubsets(list,sol,n):
  if (list.empty() and n == 0): #found a feasible subset!
     print sol 
     return
  else if (n < 0): #bounding non feasible solutions
     return 
  else if (list.empty()): #a solution that sums to a smaller number then n
     return
  e <- list.removeAndReturnFirst()
  sol <- sol.add(e)
  findSubsets(list,sol,n-e)
  sol <- sol.removeLast()
  findSubsets(list,sol,n)
  list.addFirst(e) #cleanup, return the list to original state 
```

调用`findSubsets(list,[],n)`where`list`是您的项目列表，`n`是所需的数字并且`[]`是一个空列表。

请注意，如果需要，它可以很容易地并行化，在探索的两个子集之间不需要真正的同步。

* * *

如果列表仅包含整数，则另一种选择是使用[动态编程来解决子集和问题](http://en.wikipedia.org/wiki/Subset_sum_problem#Pseudo-polynomial_time_dynamic_programming_solution)。获得矩阵后，您可以通过返回表格重新创建表格中的所有元素。[这个类似的问题](https://stackoverflow.com/q/7489398/572670)讨论了如何从背包 DP 解决方案中获取列表。这两个问题的原理几乎相同。

# windows - 创建 CAB 文件 - 基本组件

> ID：13715799
> 
> 赞同：1
> 
> 时间：2012-12-05T03:23:49.203
> 
> 标签：windows, file, mobile, windows-ce, cab

我需要为我们基于 Windows 的库存枪构建 CAB 文件。我们目前使用 Visual Studio 2008 的试用版。我正在尝试寻找其他更便宜的替代品，以便我们可以购买许可软件并记录该过程。由于我不是开发人员，因此我想更好地了解这些 CAB 文件是如何构建的。在这种情况下，CAB 文件的基本组成部分是什么？使用 Visual Studio 时，我们只需创建一些文件夹、添加文件并创建注册表项并构建 CAB。我想更好地了解整个过程，这样我就可以学习如何使用免费或更实惠的工具来构建这些文件。任何链接或建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:18:03.370

makecab.exe，位于 c:\windows\system32

[MSDN](http://msdn.microsoft.com/en-us/library/bb267310.aspx#microsoftmakecabusersguide)上关于 Cabinet Format 和 MakeCAB 的文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T14:09:40.963

并且还`COMPRESS`命令了 MAKECAB 小弟之类的东西。

# php - CodeIgniter 给我错误 404 但我可以在 Firebug 中看到响应

> ID：13715804
> 
> 赞同：2
> 
> 时间：2012-12-05T03:24:09.340
> 
> 标签：php, ajax, codeigniter

我已经在 SO 中阅读了一些非常相似的问题，但没有一个解决方案对我有用。

问题是，例如，在视图中使用此代码：

```
$.ajax({
url: 'periodista/json',
async: false,
dataType: 'json',
success: function (json) {
$.each(json, function(k,v){valores.push(v); });

} 
```

我收到 404 Not Found 错误，但 Firebug 向我显示响应 (http://i.imgur.com/yG9cW.png)

我试图从一个带有 file_get_contents 函数的简单 php 脚本中读取 url 响应，但它不起作用

```
$url="http://localhost/xampp/populus/wordpress/app/periodista/json";
$json = file_get_contents($url); 
```

我得到了相同的答案（404 错误，我可以在 Firebug 中读取响应）。

我已经尝试使用“index.php”网址，在 htaccess 的帮助下没有 index.php 的网址，并使用完整的网址，但没有任何效果。而且我没有使用wordpress。

我认为当我尝试访问视图时控制器没有加载，但我不知道为什么。

编辑：我的控制器功能代码（我正在使用 Ignite Datatables 库）：

```
 public function json()
{
    $datatables = new Datatables();
    $datatables->select('nro_boletin')->from('proyecto_de_ley');
    echo $datatables->generate();

    $data['title'] = "Periodista";
    $this->load->view('periodista/json', $data);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-19T06:15:44.500

我有一个类似的问题，我不得不手动设置标题。

```
public function get_prev_input_data()
{
    header("HTTP/1.1 200 OK");
    header("Access-Control-Allow-Origin: *");
    header("Content-Type: application/json; charset=UTF-8");

    $userdata = [
        "id" => 5,
        "username" => "captain hook",
    ];

    $prev = [
        "a1" => 123,
        "a2" => 46,
    ];
    $response = [
        "userdata" => $userdata,
        "previnput" => $prev
    ];
    echo json_encode($response);
} 
```

所以你应该添加这一行

```
 header("HTTP/1.1 200 OK"); 
```

在您的**json()**函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:40:03.640

尝试设置内容类型 json 并输出它而不是加载视图，例如：

```
public function json() {
    $datatables = new Datatables();
    $datatables->select('nro_boletin')->from('proyecto_de_ley');
    echo $datatables->generate();

    $data['title'] = "Periodista";
    $this->output
               ->set_content_type('application/json')
               ->set_output(json_encode($data));
   //OR
   header('Content-Type: application/json',true);
   echo json_encode($data);

} 
```

由于您使用的是ajax，因此调用了您的函数

```
$.ajax({
    url: 'periodista/json', <-- your controllers function
    data: {"test" : "test" },
    async: false,
    dataType: 'json',
    success: function (json) { //output from your json function
          $.each(json, function(k,v){valores.push(v); });
    } 
```

# iphone - 编写应用程序网络浏览器以访问 IP 地址

> ID：13715805
> 
> 赞同：2
> 
> 时间：2012-12-05T03:24:12.697
> 
> 标签：iphone, ios, xcode, ip-address

我正在尝试在 xcode 中为我的 iphone 编写一个简单的应用程序来访问 IP 地址。我遵循了几个不同的教程，并创建了一个简单的浏览器，允许我访问 google 或 yahoo。但是我想访问一个IP地址。

谁能帮我解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:31:52.800

```
NSURL *theURL = [NSURL URLWithString:@"some.ip.adress.here"];
[theWebView loadRequest:[NSURLRequest requestWithURL:theURL]]; 
```

# php - Magento 在哪里是“更新购物车”按钮使用的功能

> ID：13715806
> 
> 赞同：0
> 
> 时间：2012-12-05T03:24:16.810
> 
> 标签：php, magento

我以为它是`updatePostAction()`在 app\code\core\Mage\Checkout\controllers\CartController.php 但我打了一个`Mage::log`电话，但它应该创建的日志文件从未出现（**日志记录是因为我创建了一堆新的日志文件**）

我在所有 magento 中进行了文本搜索，寻找其他声明，`updatePostAction()`如果本地/社区模块覆盖了 app/code/core 中的那个，但它只找到了它的 1 个实例，所以显然我没有权利功能

我正在尝试向按钮（和购物车）添加一些新功能，但我需要先查看它的代码，看看需要添加/更改什么才能开始工作

编辑 1：我知道我正在寻找的功能在您更改购物车中商品的数量时编辑 sales_flat_quote 表，我不知道它是如何工作的（为什么在添加功能之前我需要查看代码）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:27:36.680

您使用的是一些 j2tajaxcheckout 模块还是其他一些与 AJAX 购物车相关的模块？我昨天遇到了和你一样的问题，发现模块的 javascript 改变了购物车概览上更新按钮的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:34:20.077

您必须从管理界面启用日志设置。`System -> Configuration -> Developer -> Log Settings`从Enabled 到可以看到此设置`Yes`。

# c++ - 我似乎无法修复的意外错误

> ID：13715809
> 
> 赞同：1
> 
> 时间：2012-12-05T03:24:38.047
> 
> 标签：c++, templates, compiler-errors, binary-tree

我正在编写一个函数来复制模板化二叉树。到目前为止，我有这个：

```
template <typename Item, typename Key>
Node* BSTree<Item,Key>::copy(Node* root) {
    if(root == NULL) return NULL;

    Node* left;
    Node* right;
    Node* to_return;

    left = copy(root->left());
    right = copy(root->right());

    to_return = new Node(root->data());
    to_return->left() = left;
    to_return->right() = right;

    return to_return;
} 
```

但是当我尝试编译程序时，我遇到了多个错误，我无法弄清楚如何解决。它们都出现在模板声明之后的那一行。

1）错误C2143：语法错误：缺少';' 前'*'

2) 错误 C4430：缺少类型说明符 - 假定为 int

3) 错误 C2065：“项目”：未声明的标识符

4) 错误 C2065: 'Key' : 未声明的标识符

我在程序中的所有其他函数都可以正确编译并且模板没有问题，所以我不太确定为什么会这样。它已经在头文件中声明，并且肯定分配了一个返回类型，所以我很难过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:33:49.353

是`Node`的子类`BSTree`吗？如果是这样，则它不在返回类型的范围内，因此您必须对其进行限定：

```
template <typename Item, typename Key>
typename BSTree<Item,Key>::Node* BSTree<Item,Key>::copy(Node* root) 
```

如果您有 C++11，那么`auto`也可以：

```
template <typename Item, typename Key>
auto BSTree<Item,Key>::copy(Node* root) -> Node 
```

# java - @RequestParam 与 @PathVariable

> ID：13715811
> 
> 赞同：394
> 
> 时间：2012-12-05T03:25:03.457
> 
> 标签：java, spring, spring-mvc

`@RequestParam`处理特殊字符和处理特殊字符有什么区别`@PathVariable`？

`+`被`@RequestParam`作为空间接受。

在 的情况下`@PathVariable`，`+`被接受为`+`。

* * *

## 回答 #1

> 赞同：542
> 
> 时间：2012-12-05T07:47:16.083

*   `@PathVariable` is to obtain some placeholder from the URI (Spring call it an URI Template) — see [Spring Reference Chapter 16.3.2.2 URI Template Patterns](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#mvc-ann-requestmapping-uri-templates)
*   `@RequestParam` is to obtain a parameter from the URI as well — see [Spring Reference Chapter 16.3.3.3 Binding request parameters to method parameters with @RequestParam](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#mvc-ann-requestparam)

If the URL `http://localhost:8080/MyApp/user/1234/invoices?date=12-05-2013` gets the invoices for user 1234 on December 5th, 2013, the controller method would look like:

```
@RequestMapping(value="/user/{userId}/invoices", method = RequestMethod.GET)
public List<Invoice> listUsersInvoices(
            @PathVariable("userId") int user,
            @RequestParam(value = "date", required = false) Date dateOrNull) {
  ...
} 
```

Also, request parameters can be optional, and as of Spring 4.3.3 path variables [can be optional as well](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/PathVariable.html#required--). Beware though, this might change the URL path hierarchy and introduce request mapping conflicts. For example, would `/user/invoices` provide the invoices for user `null` or details about a user with ID "invoices"?

* * *

## 回答 #2

> 赞同：124
> 
> 时间：2016-10-14T10:00:59.147

**@RequestParam**注解用于访问请求中的查询参数值。查看以下请求 URL：

```
http://localhost:8080/springmvc/hello/101?param1=10&param2=20 
```

在上述 URL 请求中，可以访问 param1 和 param2 的值，如下所示：

```
public String getDetails(
    @RequestParam(value="param1", required=true) String param1,
        @RequestParam(value="param2", required=false) String param2){
...
} 
```

以下是@RequestParam 注解支持的参数列表：

*   **defaultValue** – 如果请求没有该值或为空，这是作为回退机制的默认值。
*   **name** - 要绑定的参数的名称
*   **required** - 参数是否是必需的。如果为真，则未能发送该参数将失败。
*   **value** – 这是 name 属性的别名

**@PathVariable**

@PathVariable标识用于传入请求的 URI 中的模式*。*让我们看看下面的请求 URL：

> [http://localhost:8080/springmvc/hello/101?param1=10¶m2=20](http://localhost:8080/springmvc/hello/101?param1=10&param2=20)

上面的 URL 请求可以写在你的 Spring MVC 中，如下所示：

```
@RequestMapping("/hello/{id}")    public String getDetails(@PathVariable(value="id") String id,
    @RequestParam(value="param1", required=true) String param1,
    @RequestParam(value="param2", required=false) String param2){
.......
} 
```

@PathVariable**注解**只有一个属性值，用于绑定请求 URI 模板。允许在单个方法中使用多个**@PathVariable注解。**但是，请确保不超过一种方法具有相同的模式。

还有一个更有趣的注释： **@MatrixVariable**

> [http://localhost:8080/spring_3_2/matrixvars/stocks;BT.A=276.70,+10.40,+3.91;AZN=236.00,+103.00,+3.29;SBRY=375.50,+7.60,+2.07](http://localhost:8080/spring_3_2/matrixvars/stocks;BT.A=276.70,+10.40,+3.91;AZN=236.00,+103.00,+3.29;SBRY=375.50,+7.60,+2.07)

以及它的控制器方法

```
 @RequestMapping(value = "/{stocks}", method = RequestMethod.GET)
  public String showPortfolioValues(@MatrixVariable Map<String, List<String>> matrixVars, Model model) {

    logger.info("Storing {} Values which are: {}", new Object[] { matrixVars.size(), matrixVars });

    List<List<String>> outlist = map2List(matrixVars);
    model.addAttribute("stocks", outlist);

    return "stocks";
  } 
```

但您必须启用：

```
<mvc:annotation-driven enableMatrixVariables="true" > 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2018-09-06T02:18:00.323

@RequestParam 用于查询参数（静态值），例如：[http://localhost:8080/calculation/pow?base=2&ext=4](http://localhost:8080/calculation/pow?base=2&ext=4)

@PathVariable 用于动态值，例如：[http://localhost:8080/calculation/sqrt/8](http://localhost:8080/calculation/sqrt/8)

```
@RequestMapping(value="/pow", method=RequestMethod.GET)
public int pow(@RequestParam(value="base") int base1, @RequestParam(value="ext") int ext1){
    int pow = (int) Math.pow(base1, ext1);
    return pow;
}

@RequestMapping("/sqrt/{num}")
public double sqrt(@PathVariable(value="num") int num1){
    double sqrtnum=Math.sqrt(num1);
    return sqrtnum;
} 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2019-11-28T11:59:07.070

1)`@RequestParam`用于提取*查询参数*

```
http://localhost:3000/api/group/test?id=4

@GetMapping("/group/test")
public ResponseEntity<?> test(@RequestParam Long id) {
    System.out.println("This is test");
    return ResponseEntity.ok().body(id);
} 
```

while`@PathVariable`用于直接从 URI 中提取数据：

```
http://localhost:3000/api/group/test/4

@GetMapping("/group/test/{id}")
public ResponseEntity<?> test(@PathVariable Long id) {
    System.out.println("This is test");
    return ResponseEntity.ok().body(id);
} 
```

2)`@RequestParam`在数据主要在查询参数中传递的传统 Web 应用程序中更有用，而`@PathVariable`更适合 URL 包含值的 RESTful Web 服务。

3)如果查询参数不存在或为空，则`@RequestParam`注释可以通过使用属性指定*默认值*`defaultValue`，前提是所需的属性是`false`：

```
@RestController
@RequestMapping("/home")
public class IndexController {

    @RequestMapping(value = "/name")
    String getName(@RequestParam(value = "person", defaultValue = "John") String personName) {
        return "Required element of request param";
    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-26T02:13:00.997

可能是 application/x-www-form-urlencoded midia 类型将空格转换为**+ ，并且接收者将通过将****+**转换为空格来解码数据。检查 url 以获取更多信息。[http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-27T15:18:24.533

两个注释的行为方式完全相同。

只有 2 个特殊字符 '!' 和 '@' 被 @PathVariable 和 @RequestParam 注释所接受。

为了检查并确认行为，我创建了一个仅包含 1 个控制器的 spring boot 应用程序。

```
 @RestController 
public class Controller 
{
    @GetMapping("/pvar/{pdata}")
    public @ResponseBody String testPathVariable(@PathVariable(name="pdata") String pathdata)
    {
        return pathdata;
    }

    @GetMapping("/rpvar")
    public @ResponseBody String testRequestParam(@RequestParam("param") String paramdata)
    {
        return paramdata;
    }
} 
```

点击以下请求我得到了相同的响应：

1.  localhost:7000/pvar/!@#$%^&*()_+-=[]{}|;':",./<>?
2.  localhost:7000/rpvar?param=!@#$%^&*()_+-=[]{}|;':",./<>?

!@ 在两个请求中都作为响应收到

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-12-20T17:14:24.083

```
@PathVariable - must be placed in the endpoint uri and access the query parameter value from the request
@RequestParam - must be passed as method parameter (optional based on the required property)
 http://localhost:8080/employee/call/7865467

 @RequestMapping(value=“/call/{callId}", method = RequestMethod.GET)
 public List<Calls> getAgentCallById(
            @PathVariable(“callId") int callId,
            @RequestParam(value = “status", required = false) String callStatus) {

    }

http://localhost:8080/app/call/7865467?status=Cancelled

@RequestMapping(value=“/call/{callId}", method = RequestMethod.GET)
public List<Calls> getAgentCallById(
            @PathVariable(“callId") int callId,
            @RequestParam(value = “status", required = true) String callStatus) {

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-27T12:04:17.970

@RequestParam：我们可以说它是像键值对一样的查询参数@PathVariable：-它来自URI

# google-apps-script - 使用“版本号”列对 TableChart 进行排序

> ID：13715813
> 
> 赞同：3
> 
> 时间：2012-12-05T03:25:18.377
> 
> 标签：google-apps-script, google-visualization

给定一个包含“Release Numbers”列的数据表，如何在该列上正确排序生成的 TableChart？

这些是表示“版本号”的字母数字字符串的示例：

```
"1.0", "12.0.1", "2.10", "2.0.0.142", "2.0.0.1_2", "10.2" 
```

此示例所需的排序顺序为：

```
"1.0", "2.0.0.2", "2.0.0.142", "2.10", "10.2", "12.0.1" 
```

由于这些值的格式，它们必须被视为“字符串”，因此按字母顺序排序。这会导致列表不符合逻辑“发布”顺序：

```
"1.0", "10.2", "12.0.1", "2.0.0.142", "2.0.0.2", "2.10" 
```

有许多比较值的解决方案，所以这不是这个问题的重点。相反，如何在 Google Apps 脚本的范围内对这些“字符串”进行自定义排序？

相关文章：

*   [如何使用js比较软件版本号？（只有数字）](https://stackoverflow.com/questions/6832596/how-to-compare-software-version-number-using-js-only-number)
*   [如何对包含数字、字符、字符的 varchar 列（SQL）进行排序？](https://stackoverflow.com/questions/541243/how-to-sort-varchar-column-sql-that-contains-number-chars-characters)
*   [如何一般使用 SQL Server 查询对“版本号”列进行排序](https://stackoverflow.com/questions/3474870/how-can-i-sort-a-version-number-column-generically-using-a-sql-server-query)

[这是一个几乎直接来自Gustavo Moura](http://googleappsdeveloper.blogspot.ca/2011/09/visualize-your-data-charts-in-google.html)的代码片段。

[你可以在这里](https://script.google.com/macros/s/AKfycbxk5xiLQ0Dvx9ZUE_yoOG_zL6QTK1v8Zlg3hMgn3B_rXS_NMMhF/exec "这里")试试我的版本。

```
function doGet() {    
  // Populate the DataTable.  We'll have the data labels in   
  // the first column, "Quarter", and then add two data columns,  
  // for "Income" and "Expenses"  
  var dataTable = Charts.newDataTable()      
        .addColumn(Charts.ColumnType.STRING, "Release")      
        .addColumn(Charts.ColumnType.NUMBER, "Income")      
        .addColumn(Charts.ColumnType.NUMBER, "Expenses")      
        .addRow(["1.0", 60, 55])      
        .addRow(["10.2", 50, 60])      
        .addRow(["2.10", 100, 50])
        .addRow(["12.0.1", 70, 60])      
        .addRow(["2.0.0.142", 30, 50])
        .addRow(["2.0.0.1_2", 114, 75])
        .build();

  // Build the chart. 
  var chart = Charts.newTableChart()
      .setDataTable(dataTable)  
//    .setTitle("Income and Expenses per Release")
      .build();

  // Add our chart to the UI and return it so that we can publish  
  // this UI as a service and access it via a URL.  
  var ui = UiApp.createApplication();  
  ui.add(chart);  
  return ui;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:50:54.953

您不能为 Charts 数据表提供排序功能。但是，在将数据添加到表之前，您可以对数据进行自己的排序。将每一行推入一个数组，并使用您自己的排序函数调用 .sort() ，该函数比较每行第一个索引中的版本号。您发布的第一个链接看起来有一个很好的答案。

如果要保持表格图表中的数据排序，请禁用 TableChart 上的排序，以便用户无法更改排序。

```
.setOption("sort", "disable") 
```

我没有尝试过，但我不认为谷歌会自动对数据进行排序，打破你自己的排序。

# c# - 使用 autofac 键控服务在运行时基于通用接口解析类型

> ID：13715818
> 
> 赞同：6
> 
> 时间：2012-12-05T03:25:51.347
> 
> 标签：c#, generics, runtime, autofac

我发现了许多与我面临的问题类似的问题和回答；但我无法拼凑出一个可行的解决方案。

我有以下内容：

```
public interface IProcessing<V,W> where W: TaskResponse where V: TaskRequest
    {
         W process(V req);
    } 
```

`TaskRequest`&是`TaskResponse` 抽象基类

这个具体的类也被定义：

```
public class MathProcessor : IProcessing<MathRequest, MathResponse>
    {
         public MathResponse process(MathRequest req) {
            // do stuff
            // create a MathResponse instance

            return resp;
        }
    } 
```

其中`MathRequest`&`MathResponse`是派生类，各个抽象类用作接口定义中的约束。

根据其接口注册具体类型并使用 autofac 解析是可以的。
但是，在运行时尝试基于另一种类型（在本例中为请求对象，例如 ）解析具体类型的预期用途出现了困难`MathRequest`。这基本上是为了实现常见的消息处理程序模式（以下是伪代码），其中接收消息并将其分派到适当的处理程序：

```
TaskRequest req = getNextRequest();

var proc = container.Resolve(req.getType().Name)

proc.process(req); 
```

根据论坛中的相关主题，基本建议是定义一个工厂并将其注册到容器中，然后在运行时使用该工厂根据提供的参数创建我需要的对象。这似乎是对的。

我还看到了使用`IIndex<K,V>`autofac 中的功能按键查找适当类型/服务的相关建议。

我在注册和`MathProcessor`通过键解析类型时遇到问题，其中键是一种类型（在这种情况下`MathRequest`）。该错误可能与通用接口定义和允许的内容更相关。

注册：

```
builder.RegisterType<MathProcessor>().As<IProcessing<MathRequest, MathResponse>>().Keyed<IProcessing<MathRequest, MathResponse>>(strTypeName); 
```

可以，但是

```
builder.RegisterType<MathProcessor>().As<IProcessing<TaskRequest, TaskResponse >>().Keyed<IProcessing< TaskRequest, TaskResponse >>(strTypeName); 
```

不是。

注意：基于.Net中关于泛型类型和协变的所有帖子，我将接口更改为：

```
public interface IProcessing<in V, out W> where W: TaskResponse where V: TaskRequest
    {
         W process(V req);
    } 
```

但这只是猜测，没有很好的理解。在我天真的观点 MathProcessor 是 IProcessing 的一种，但似乎并非如此。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-05T05:34:53.760

我认为这种类型的注册是不可能的，但是，鉴于您似乎以通用方式调用实际处理，我假设您的主要目标是为每种类型的请求实现离散处理器。

在这种情况下，您可以通过创建一个`BaseProcessing<TV,TW>`类型来稍微修改您的模型。例如：

```
public abstract class BaseProcessing<TV, TW> : IProcessing
    where TV : TaskRequest
    where TW : TaskResponse
{
    protected abstract TW DoProcess(TV req);

    public TaskResponse Process(TaskRequest req)
    {
        return DoProcess((TV)req);
    }
} 
```

它实现了一个非常基本的`IProcessing`接口，也就是我们将在 AutoFac 中注册的接口：

```
public interface IProcessing
{
    TaskResponse Process(TaskRequest req);
} 
```

以此为基础，您仍然可以创建处理器，例如：

```
public class MathProcessor : BaseProcessing<MathRequest, MathResponse>
{
    protected override MathResponse DoProcess(MathRequest req)
    {
        return new MathResponse();
    }
} 
```

注册它们的一种方法可能是使用密钥服务，例如：

```
builder.RegisterType<MathProcessor>().AsImplementedInterfaces().Keyed<IProcessing>(typeof(MathRequest));
builder.RegisterType<OtherProcessor>().AsImplementedInterfaces().Keyed<IProcessing>(typeof(OtherRequest)); 
```

在这种情况下，我实际上并没有使用类型的名称，而是使用类型本身，但两者都可以。

现在，拥有键控注册意味着您可以让另一个组件将其作为依赖项使用：

```
public class SomeConsumer : IConsumer
{
    private readonly IIndex<Type, IProcessing> _processors;

    public SomeConsumer(IIndex<Type, IProcessing> processors)
    {
        _processors = processors;
    }

    public void DoStuff()
    {
        var someRequest = new MathRequest();
        var someResponse = _processors[someRequest.GetType()].Process(someRequest);
    }
} 
```

# c# - GMAIL API - 检查新邮件的最快方法

> ID：13715820
> 
> 赞同：0
> 
> 时间：2012-12-05T03:26:13.127
> 
> 标签：c#, gmail, incoming-mail

*我通过电子邮件收到一些报价。并且有一个比赛谁先得到它。他们发送一封包含验证码的电子邮件。*

哪种解决方案最适合检查新的 gmail 邮件并尽快获取新的邮件正文？

我听说过

*   IMAP IDLE .. 够快吗？
*   POP3 通过 POP3 连续检查新邮件是否更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:30:22.460

最快的方法`IMAP`显然是

> 它允许客户端向服务器指示它已准备好接受实时通知。IDLE 命令的基本网络使用非常小，因此它可以非常有效地利用带宽

一个好的 IMAP 服务器对于空闲连接的开销最小，它支持 10 或 100 的数千个连接。

另一个实际问题是当前的电话网络技术会不时失去IP网络连接，这需要自动重新建立，并且

> 如果由于长时间的网络故障而丢失，则重新建立 IMAP 连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:33:12.647

如果您的身份验证是开放的，那么简单的 Web 请求可能是最快的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T03:35:23.530

请注意，在发送该电子邮件的时间与该电子邮件最终在 IMAP/POP 帐户中可供客户端访问之前如何由任意数量的中间服务器处理之间仍然存在很大延迟。

你确定你正在优化正确的问题吗？

# php - str_replace 用数组

> ID：13715826
> 
> 赞同：46
> 
> 时间：2012-12-05T03:26:53.977
> 
> 标签：php, arrays, str-replace

我`str_replace`在使用数组时遇到了 PHP 函数的一些问题。

我有这个消息：

```
$message = strtolower("L rzzo rwldd ty esp mtdsza'd szdepw ty esp opgtw'd dple"); 
```

我正在尝试这样使用`str_replace`：

```
$new_message = str_replace(
    array('l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','a','b','c','d','e','f','g','h','i','j','k'),
    array('a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'),
    $message); 
```

结果应该是`A good glass in the bishop's hostel in the devil's seat`，但相反，我得到了`p voos vlpss xn twt qxswop's wosttl xn twt stvxl's stpt`。

但是，当我只尝试替换 2 个字母时，它会很好地替换它们：

```
$new_message = str_replace(array('l','p'), array('a','e'), $message); 
```

字母`l`和`p`将被替换为`a`and `e`。

如果它们的大小完全相同，为什么它不能与完整的字母数组一起使用？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-12-05T03:38:26.667

因为 str_replace() 从左到右替换，所以在进行多次替换时，它可能会替换先前插入的值。

```
    // 输出 F，因为 A 被 B 替换，然后 B 被 C 替换，依此类推...
    // 最后 E 被 F 替换，因为从左到右替换。
    $search = array('A', 'B', 'C', 'D', 'E');
    $replace = array('B', 'C', 'D', 'E', 'F');
    $主题 = 'A';
    echo str_replace($search, $replace, $subject);

```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-12-05T03:30:19.180

[`str_replace`](http://php.net/str_replace)with 数组只是按顺序执行所有替换。[`strtr`](http://php.net/strtr)改为一次完成所有操作：

```
$new_message = strtr($message, 'lmnopq...', 'abcdef...'); 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-02-06T14:57:16.423

简单且优于`str_replace`：

```
<?php
$arr = array(
    "http://" => "http://www.",
    "w" => "W",
    "d" => "D");

    $word = "http://desiweb.ir";
    echo strtr($word,$arr);
?> 
```

**`strtr`PHP文档** [在这里](http://php.net/manual/en/function.strtr.php)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-06T16:58:10.643

除了标记为正确的答案之外，如果您必须替换单词而不是字符，您可以使用以下代码来完成：

```
$query = "INSERT INTO my_table VALUES (?, ?, ?, ?);";
$values = Array("apple", "oranges", "mangos", "papayas");
foreach (array_fill(0, count($values), '?') as $key => $wildcard) {
    $query = substr_replace($query, '"'.$values[$key].'"', strpos($query, $wildcard), strlen($wildcard));
}
echo $query; 
```

在这里演示：http: [//sandbox.onlinephpfunctions.com/code/56de88aef7eece3d199d57a863974b84a7224fd7](http://sandbox.onlinephpfunctions.com/code/56de88aef7eece3d199d57a863974b84a7224fd7)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-27T15:34:18.563

如果文本是一个简单的标记并且具有现有的锚点，请先暂存现有的锚点标签，换掉 url，然后替换暂存的标记。

```
$text = '
Lorem Ipsum is simply dummy text found by searching http://google.com/?q=lorem in your <a href=https://www.mozilla.org/en-US/firefox/>Firefox</a>,
<a href="https://www.apple.com/safari/">Safari</a>, or https://www.google.com/chrome/ browser.

Link replacements will first stage existing anchor tags, replace each with a marker, then swap out the remaining links.
Links should be properly encoded.  If links are not separated from surrounding content like a trailing "." period then they it will be included in the link.
Links that are not encoded properly may create a problem, so best to use this when you know the text you are processing is not mixed HTML.

Example: http://google.com/i,m,complicate--d/index.html
Example: https://www.google.com/chrome/?123&t=123
Example: http://google.com/?q='. urlencode('<a href="http://google.com">http://google.com</a>') .'
';

// Replace existing links with a marker
$linkStore = array();
$text = preg_replace_callback('/(<a.*?a>)/', function($match) use (&$linkStore){ $key = '__linkStore'.count($linkStore).'__'; $linkStore[$key] = $match[0]; return $key; }, $text);

// Replace remaining URLs with an anchor tag
$text = preg_replace_callback("/(http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/", function($match) use (&$linkStore){ return '<a href="'. $match[0] .'">'. $match[0] .'</a>'; }, $text);

// Replace link markers with original
$text = str_replace(array_keys($linkStore), array_values($linkStore), $text);

echo '<pre>'.$text; 
```

# java - 是否可以编写一个通过 JDBC 连接到 Oracle 的小程序？

> ID：13715827
> 
> 赞同：0
> 
> 时间：2012-12-05T03:27:21.993
> 
> 标签：java, oracle, security, jdbc, applet

我创建了一个简单的小程序 ( `Java 1.7.0_07`)，我尝试在其中连接到 Oracle 数据库 ( `ojdbc6.jar`)。该小程序在我的 IDE 的小程序查看器中运行良好，但无法从 Web 正确运行。

我遇到了安全异常，所以我签署了 jar 文件，认为可以修复它，但我仍然遇到安全异常，即：

```
java.security.AccessControlException: access denied ("java.util.PropertyPermission" "oracle.jdbc.RetainV9LongBindBehavior" "read")
    at java.security.AccessControlContext.checkPermission(Unknown Source)
    at java.security.AccessController.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPropertyAccess(Unknown Source)
    at java.lang.System.getProperty(Unknown Source)
    at oracle.jdbc.driver.PhysicalConnection$1.run(PhysicalConnection.java:3147)
    at java.security.AccessController.doPrivileged(Native Method)
    at oracle.jdbc.driver.PhysicalConnection.getSystemProperty(PhysicalConnection.java:3143)
    at oracle.jdbc.driver.PhysicalConnection.readConnectionProperties(PhysicalConnection.java:736)
    at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:519)
    at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:228)
    at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
    at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:521)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at com.ericr.signedApplet.SignedApplet.init(SignedApplet.java:61)
    at com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter.init(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

我一直在用头撞墙，试图让事情井井有条，关于如何设置的信息似乎相互矛盾。

所以......甚至有可能做我想做的事吗？如果是这样，是否有指南让我知道我需要在安全方面做什么才能让小程序在从 Web 访问时正常工作？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:39:39.573

问题归结为`AccessControlException`. 显然需要信任小程序才能读取该`oracle.jdbc.RetainV9LongBindBehavior`属性。

OTOH 通常建议通过将数据库放在 Web 服务后面来限制对数据库的访问。在这种情况下，applet 可以简单地连接到同一站点的 Web 服务，然后做它需要做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:32:29.887

可以或*应该**可以*通过 JDBC 从 applet 连接到 Oracle 数据库；有关说明，请参阅[Oracle 10g 第 1 版的](http://docs.oracle.com/cd/B14117_01/java.101/b10979/applet.htm)[*Oracle 数据库 JDBC 开发人员指南和参考*](http://docs.oracle.com/cd/B14117_01/java.101/b10979/applet.htm)[中的第 24 章“Applets 中的 JDBC”](http://docs.oracle.com/cd/B14117_01/java.101/b10979/applet.htm)，或者[它与 Oracle 10g 第 2 版的类似物](http://docs.oracle.com/cd/B19306_01/java.102/b14355/jdbcthin.htm#CACJHJAE)。*[](http://docs.oracle.com/cd/B14117_01/java.101/b10979/applet.htm)*

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T07:34:16.917

您可能还想查看[VJDBC](http://vjdbc.sourceforge.net/)项目。这可能是您正在寻找的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T21:54:21.450

两种环境之间的差异可能与您用于 JVM 的参数有关。在 NetBeans 中，对于我的*Apache Tomcat*服务器，我单击并启用了“使用安全管理器”选项，之后，我看到我收到的错误与您在我的 Web 服务器上遇到的完全相同。

要找到此选项，请转到顶部菜单并单击工具 > 服务器。然后，单击左侧菜单中“服务器”下的 Web 服务器。在右侧菜单上，单击“平台”选项卡，然后禁用“使用安全管理器”，这可能会解决您的问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-05T04:57:07.010

您需要检查访问 oracle 文件夹的权限或将用户添加到 oracle 组**

# javascript - 项目单独显示

> ID：13715833
> 
> 赞同：0
> 
> 时间：2012-12-05T03:28:03.093
> 
> 标签：javascript, jquery

如何`show()`单独制作，一旦我单击显示，所有`.whateverever`类都会打开。

这是代码：

```
$(document).ready(function() {
    function excerpt(text, len) {
        return text.substring(0, len) + "&hellip;" + '<span>Show</span>';
    }

    var $div = $('.container');
    $div.each(function() {
        var $p = $(this).find("p:first");
        var theExcerpt = excerpt($p.text(), 230);
        $p.data('html', $p.html()).html(theExcerpt);
    });

    $('span').click(function() {
        var isHidden = $(this).text() == 'Show';
        var $p = $(this).parent();
        var theExcerpt = excerpt($p.text(), 230);
        $p.html(isHidden ? $p.data('html') : theExcerpt);
        $('.whateverever').show();
        $(this).remove();
    });

});​ 
```

请在线查看示例：http: [//jsfiddle.net/M6wzh/6/](http://jsfiddle.net/M6wzh/6/) 非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:33:15.633

尝试

```
$(document).ready(function() {
    function excerpt(text, len) {
        return text.substring(0, len) + "&hellip;" + '<span>Show</span>';
    }

    var $div = $('.container');
    $div.each(function() {
        var $p = $(this).find("p:first");
        var theExcerpt = excerpt($p.text(), 230);
        $p.data('html', $p.html()).html(theExcerpt);
    });

    $('span').click(function() {
        var isHidden = $(this).text() == 'Show';
        var $p = $(this).parent();
        var theExcerpt = excerpt($p.text(), 230);
        $p.html(isHidden ? $p.data('html') : theExcerpt);
        $p.next().show();//the div you're looking for is the next sibling of the parent p
        $(this).remove();
    });

});​ 
```

[http://jsfiddle.net/mowglisanu/M6wzh/7/](http://jsfiddle.net/mowglisanu/M6wzh/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T03:31:52.720

```
$('.whateverever', this).show(); 
```

代替

```
$('.whateverever').show(); 
```

应该让你上路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T03:33:02.050

你可以这样做：

```
$('span').click(function() {
    var isHidden = $(this).text() == 'Show';
    var $p = $(this).parent();
    var theExcerpt = excerpt($p.text(), 230);
    $p.html(isHidden ? $p.data('html') : theExcerpt);
    $(this).next(".whateverever").show();
    $(this).remove();
}); 
```

[小提琴](http://jsfiddle.net/M6wzh/8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T03:47:02.363

在此之前你有没有使用过 jquery 的 .closet() 。只需对您的代码进行少量编辑

```
 $('.whateverever').show();
replace this line by        
   $.closest('.whateverever').show();
  and check. 
```

# android - 有没有办法在EditText中设置光标位置从左到右2dp

> ID：13715836
> 
> 赞同：3
> 
> 时间：2012-12-05T03:28:32.983
> 
> 标签：android, cursor, position, android-edittext

有什么方法可以根据 px 在 EditText 中从左到右设置光标位置。

我使用此代码

```
EditText etEmail = (EditText) findViewById(R.id.et_email);
etEmail.setText("Email");
etEmail.setSelection(2); 
```

它可以工作，但电子邮件文本不会被删除。所以我`etEmail.setText("Email")`改为`etEmail.setHnt("Email")`

像这样

```
EditText etEmail = (EditText) findViewById(R.id.et_email);
etEmail.setHint("Email");
etEmail.setSelection(2); 
```

但它错误。

有没有办法在 EditText 中设置光标的位置？

这是第一次加载

![在此处输入图像描述](../Images/7ad618043b705cf69bed697368cfde59.png)

这是我想要的

![在此处输入图像描述](../Images/34a8df5100795f8ba5cdeec71e01469b.png)

```
<EditText
            android:id="@+id/et_email"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/fillbox"
            android:hint="Email"
            android:ems="10"
            android:inputType="textEmailAddress" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T03:50:01.493

您可以`paddingLeft`在 XML 中设置属性

```
 <EditText 
    android:layout_width="90dp"
    android:layout_height="70dp"
    android:text="BBBBB"
    android:hint="AAAAAAAAAAAAAAAAAAAA"
    android:paddingLeft="30dp"/> 
```

或从代码中设置

```
EditText edt = (EditText)findViewById(R.id.edt);

        edt.setPadding(2, 0, 0, 0); //int left, int top, int right, int bottom 
```

在真实设备上检查![在此处输入图像描述](../Images/f43a98599455c5dad90a82e5ced3fd44.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T04:04:50.657

如果您希望 edittext 应该在中间而不是使用 this: `edt.setPadding(5, 5, 5, 5);`，如果您 edittext 应该在左侧或右侧留下一些间隙而不是执行以下操作：`edt.setPadding(5, 0, 0, 0);`

将此添加到您的 xml 文件中：

`android:hint="Email" android:paddingLeft="20dp"`

![在此处输入图像描述](../Images/db5bfc4b4141b00cdc67b57bc0670941.png)

# javascript - 评分按钮，一键传参执行php

> ID：13715837
> 
> 赞同：0
> 
> 时间：2012-12-05T03:28:34.640
> 
> 标签：javascript, ajax

我在工作时不知何故卡住了：

我想将一个参数传递给一个 php 文件，并在我们评价某事时执行它。php 文件已完成，但不知道如何编写 js 部分。

详细地，

1.  用户对一段文章评分，js 获得评分；------ 获取参数，存入函数Rate()，完成

2.  用户提交时；------ 不知道如何检查按钮是否被点击，在Rate()中添加DomListener？

3.  js 调用 php 文件，同时将 rating 参数传递给它；------ php部分完成

4.  执行 php 文件而不在新窗口中打开它。-----不知道该怎么办。

HTML

```
<div>
  <form id="rateform" action="php/rate.php" enctype="text/form-data" method="POST"> 
    <input id="rating" type="text" />
    <input id="sbm" type="button" />
  </form>
</div> 
```

JS

```
function Rate(){
  var rate = document.getElementById("rating").value;
  var sbm = document.getElementById("sbm");

  // don't know how to do...

  //if(sbm is clicked) {
  //   execute rate.php...
  //}
} 
```

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:10:46.617

这是我在 jQuery 中的做法（比处理`XMLHttpRequest`对象更好）：

```
$('#sbm').click(function() {
    var rating = $('#rating').val();

    /* Send request to PHP script. */
    $.post('/url/to/script', { rating: rating }, function(resp) {
        console.log('Response:', resp);
    });
}); 
```

你的 php 脚本可能是这样的：

```
<?php echo 'Hey, I got this rating ' . $_POST['rating']; ?> 
```

不过，我不是 PHP 人！

# jquery - asp.net mvc - 带有服务器参数的 js 文件

> ID：13715840
> 
> 赞同：1
> 
> 时间：2012-12-05T03:29:10.527
> 
> 标签：jquery, asp.net-mvc

我正在使用 asp.net mvc 3-4.0，问题是如何将模型值传递给 .js 文件。有时我不想在我的 razor 视图页面上放置太多 jquery 行。

喜欢的东西

```
 $("#qcontent").load(
                    "@Url.Action("QuestionList", "TuongTac")",
                {
                    id: 1,
                    keywords: @Model.keyword
                    ....
                } 
```

是否可以使其在 .js 文件中工作？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:37:58.650

我发现最干净的方法是使用`data-*`属性。

在 Razor 视图中：

```
<div id="qcontent" data-url="@Url.Action("QuestionList", "TuongTac")" data-keyword="@Model.keyword"></div> 
```

然后在您的外部 JavaScript 文件中：

```
$("#qcontent").each(function() {
    var url = $(this).data('url');
    var keyword = $(this).data('keyword');
    // ... 
}); 
```

另一种选择是将程序 JavaScript 放在一个外部文件中，然后在 Razor 视图中只转储一次点击所需的设置：

```
<script type="text/javascript">
    var qcontent.settings = @Json.Encode(new { url = Url.Action("QuestionList", "TuongTac"), keyword = @Model.Keyword });
</script> 
```

并在您的 JavaScript 文件中引用它：

```
$("#qcontent").load(qcontent.settings.url, { id: 1, keyword: qcontent.settings.keyword }); 
```

这种方法的缺点是您污染了全局命名空间，因此您需要小心命名空间。

# ios - 容器视图控制器中的初始视图控制器未显示

> ID：13715843
> 
> 赞同：0
> 
> 时间：2012-12-05T03:29:30.147
> 
> 标签：ios, uiviewcontroller

我在 UIViewController Containment 上观看了 WWDC 视频并通读了这篇博文：[http ://www.cocoanetics.com/2012/04/ contains-viewcontrollers/](http://www.cocoanetics.com/2012/04/containing-viewcontrollers/)

但我无法显示我的初始视图控制器。有什么我想念的吗？在我的 ContainerViewController.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    _homeViewController = [[HomeViewController alloc] init];
    _detailViewController = [[DetailViewController alloc] init];

    [self setSubViewControllers:@[_homeViewController, _detailViewController]];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    if (_selectedViewController.parentViewController == self) {
        // nothing to do
        return;
    }

    // adjust the frame to fit the container view
    _selectedViewController.view.frame = _containerView.bounds;

    // make sure that it resizes on rotation automatically
    _selectedViewController.view.autoresizingMask = _containerView.autoresizingMask;

    // add as child VC
    [self addChildViewController:_selectedViewController];

    // add it to container view, calls willMoveToParentViewController for us
    [_containerView addSubview:_selectedViewController.view];

    // notify that move is done
    [_selectedViewController didMoveToParentViewController:self];
}

- (void)loadView {
    // set up the base view
    CGRect frame = [[UIScreen mainScreen] bounds];
    UIView *aView = [[UIView alloc] initWithFrame:frame];
    aView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    aView.backgroundColor = [UIColor blueColor];

    // set up content view
    _containerView = [[UIView alloc] initWithFrame:frame];
    _containerView.backgroundColor = [UIColor grayColor];
    _containerView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    [aView addSubview:_containerView];

    self.view = aView;
}

- (void)setSubViewControllers:(NSArray *)subViewControllers {
    _subViewControllers = [subViewControllers copy];

    if (_selectedViewController) {
        // remove previous VC
    }

    _selectedViewController = _subViewControllers[0];

} 
```

我的 ContainerViewController 是我故事板中的初始视图控制器。我看到它显示在模拟器上，但 HomeViewController（我的容器中的第一个子视图控制器）没有显示。

当我单步调试调试器时，我的 ContainerViewController 的 subViewControllers 属性中确实包含 homeViewController 和 detailViewController。HomeViewController 的 viewDidLoad 也会被调用。我只是在屏幕上看不到任何东西，除了 ContainerViewController 的背景颜色。

有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:59:37.313

你有一个 NSArray，但你试图将它作为一个 C 数组来访问。

```
_subViewControllers[0] 
```

应该：

```
[_subViewControllers objectAtIndex:0]; 
```

话虽如此，您似乎有一些代码在其他方法中可能会更好。我会亲自清理很多，让它变得更简单。我会删除 loadView 和 _containerView，然后像往常一样使用 self.view。对于您正在尝试做的事情，似乎甚至不需要跟踪父视图控制器和子视图控制器。无论如何，这就是我的做法：

```
@interface ContainerViewController ()
@property (nonatomic, retain) NSArray *subViewControllers;
@end

@implementation ObservationReportViewController {
    UIViewController *_selectedViewController;
}
@synthesize subViewControllers = _subViewControllers;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        HomeViewController *homeViewController = [[HomeViewController alloc] init];
        homeViewController.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

        DetailViewController *detailViewController = [[DetailViewController alloc] init];
        detailViewController.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

        // Retain the view controllers.
        self.subViewControllers = @[homeViewController, detailViewController];
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self setSelectedViewController: [_subViewControllers objectAtIndex:0]];
}

-(void)setSelectedViewController:(UIViewController *)selectedViewController {
    if (_selectedViewController != selectedViewController) {
        [_selectedViewController.view removeFromSuperview];
        _selectedViewController = selectedViewController;
        // adjust the frame to fit the container view
        [self.view addSubview:_selectedViewController.view];
        //_selectedViewController.view.frame = _containerView.bounds;
        _selectedViewController.view.frame = self.view.bounds;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:00:06.407

所以我不是世界上最聪明的人，但屏幕上什么都没有显示的原因是因为笔尖在情节提要中，我需要这样做：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPad" bundle:nil];
    _homeViewController = [storyboard instantiateViewControllerWithIdentifier:@"HomeViewController"];
    _detailViewController = [storyboard instantiateViewControllerWithIdentifier:@"DetailViewController"]; 
```

希望这对还不熟悉 Storyboard 的人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-13T19:47:24.793

如果您通过与 MainStoryboard 不同的故事板中的故事板设置 InitialViewController，则需要更新项目设置以使用该新故事板。

[![在此处输入图像描述](../Images/a473285c7875185ab13452540a1d135d.png)](https://i.stack.imgur.com/cRV5Z.png)

转到项目设置，常规并将主界面设置设置为新故事板

[![在此处输入图像描述](../Images/86d3b97ac7d8ff2e7e58c2aaea3e81a0.png)](https://i.stack.imgur.com/kVjch.png)

# javascript - 从多个组合框打开一个新窗口

> ID：13715845
> 
> 赞同：0
> 
> 时间：2012-12-05T03:29:32.707
> 
> 标签：javascript, combobox

我有 3 个组合框，分别命名为 MCC1、MCC2 和 MCC3。我使用 javascript 为他们分配了一个 onChange 函数，该函数收集所选的索引值，然后打开一个新窗口到所需的网页。

```
var x=document.form.MCC.options[document.form.MCC.selectedIndex].value;

window.open('http://server/page='+x+'&tab=0','mywindow','width=400,height=200') 
```

我想对所有 3 个组合框使用相同的函数，但该函数需要知道 onchange 来自哪个组合框名称值。现在它只读取最后一个值，如果我使用多个 var。我已经尝试使用数组、多个 var 甚至为 name 值创建一个 var 来解决这个问题。我对 js 还很陌生，不确定解决这个问题的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:52:09.407

您可以尝试以下方式

JS：

```
function OpenWindow(target){
var x=$(target).val();
window.open('http://server/page='+x+'&tab=0','mywindow','width=400,height=200')
} 
```

HTML：

```
<select onchange="penWindow(this)" name="MCC1">...</select>
<select onchange="penWindow(this)" name="MCC2">...</select>
<select onchange="penWindow(this)" name="MCC3">...</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:54:34.347

看到这个：http: [//jsfiddle.net/DUMBH/](http://jsfiddle.net/DUMBH/)

```
function call(op) {
alert(op.name) //name of combobox
alert(op.value); // selected value
var x = op.value;

window.open('http://server/page=' + x + '&tab=0', 'mywindow', 'width=400,height=200')
}​ 
```

# xml - xpath - 如何找到第二个复选框？

> ID：13715846
> 
> 赞同：3
> 
> 时间：2012-12-05T03:29:41.340
> 
> 标签：xml, xpath

鉴于此 HTML

```
<ol>
  <li id="topic_roles_input">
    <fieldset class="choices">
      <input id="topic_roles_none" name="topic[role_ids][]" type="hidden" value="" />
      <ol class="choices-group">
        <li class="choice">
          <label for="topic_role_ids_107">
            <input id="topic_role_ids_107" name="topic[role_ids][]" type="checkbox" value="107" />Language Therapist
          </label>
        </li>
        <li class="choice">
          <label for="topic_role_ids_106">
            <input id="topic_role_ids_106" name="topic[role_ids][]" type="checkbox" value="106" />Speech Therapist
          </label>
        </li>
      </ol>
    </fieldset>
  </li>
</ol> 
```

我可以选择第一个复选框：

```
xpath=(//li[contains(@id,'topic_roles_input')]//input[@type="checkbox"][1]) 
```

但我不能选择第二个：

```
xpath=(//li[contains(@id,'topic_roles_input')]//input[@type="checkbox"][2]) 
```

如何选择第二个复选框，避免使用 106 / 107 id（这用于重复测试）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T04:42:49.993

使用`()`：

```
(//li[contains(@id,'topic_roles_input')]//input[@type="checkbox"])[2] 
```

老实说，您的^第一个和^(第二)个XPath 都选中了这两个复选框。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T05:09:15.050

**这是有关 XPath 的最常见问题解答之一**。

**请记住**：XPath 运算符`[]`的优先级（优先级）高于`//`伪运算符。

与要覆盖默认优先级时一样，解决方案是使用括号：

**使用**：

```
 (//input[@type='checkbox'])[1] 
```

**和**：

```
 (//input[@type='checkbox'])[2] 
```

**当然，您也可以使用以下方法获得相同的结果：**

```
 (//li[contains(@id,'topic_roles_input')]//input[@type='checkbox'])[1] 
```

**和**：

```
 (//li[contains(@id,'topic_roles_input')]//input[@type='checkbox'])[2] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-25T11:40:00.873

If you have no ID and you want to identify it based on the value rather than the nth position/order:

```
//input[@name='topic[role_ids][]' and @value='107'] 
```

# iphone - 设置后更改 MFSideMenu 选项

> ID：13715851
> 
> 赞同：0
> 
> 时间：2012-12-05T03:30:20.980
> 
> 标签：iphone, objective-c, ios

我正在使用库 MFSideMenu 并能够正确设置它。但是有些页面我想更改它的一些选项（设置后设置选项似乎是不可能的）。例如，我想在登录屏幕上关闭 MFSideMenu。我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T18:17:23.110

在您的 LoginVC 的 viewDidLoad 中：

```
[self.navigationController.sideMenu setPanMode:MFSideMenuPanModeNone]; 
```

应该做的伎俩。

# visual-studio-2012 - sql71501 sql 参数对内置类型的引用未解析

> ID：13715859
> 
> 赞同：2
> 
> 时间：2012-12-05T03:31:51.447
> 
> 标签：visual-studio-2012, database-project, table-valued-parameters, built-in-types

从 VS2012 我创建了一个数据库项目并创建了广告自定义类型

```
CREATE TYPE dbo.TypeProductCategoryTable AS TABLE
    ( ProductID int, CategoryID int ) 
```

现在，当我使用这种类型编写存储过程时，出现编译错误

> sql71501 sql 参数对内置类型的引用未解析

程序

```
CREATE PROCEDURE [dbo].[usp_ProductCategory_Mapping]
    @tvProdCat dbo.ProductCategoryTableType READONLY
AS
insert into tProductCategories(ProductId,CategoryId)
    SELECT @tvProdCat
RETURN 0 
```

如何处理？我们可以在 Visual Studio 数据库项目上创建自定义类型吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-07T14:04:21.583

您可以在 Visual Studio 项目中使用预部署脚本。为此，您需要在 VS 中添加 2 个文件： 1\. 在 VS 的数据库项目中创建 UserDefinedTableType.sql 并将创建表类型的脚本放入此脚本中。2.在您的数据库项目中添加 UserScripts -> pre-Deployment script 并在此处调用步骤 1 中的脚本。使用此代码： :r .\Scripts\Pre-Deployment\UserDefinedTableType.sql

未解决的引用将通过此解决方案解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-18T14:55:49.357

我遇到了这个问题，并意识到 TVP 的构建节点以某种方式插入到我的 .sqlproj 文件中使用它的 SP 下方。一旦我将 TVP 移到 SP 上方，我不再收到 VS 中的错误，并且项目按预期部署，没有错误。我以前没有意识到 .sqlproj 中构建节点的顺序很重要，但显然 DACPAC 编译器并不是为了智能地确定构建过程的顺序而回想起来的。我宁愿拥有这种控制权，即使它在这种情况下会让我失望。

# joomla - 为什么 WYSIWYG 编辑器删除 joomla 中的 http://.. 代码

> ID：13715863
> 
> 赞同：-1
> 
> 时间：2012-12-05T03:32:25.627
> 
> 标签：joomla, joomla2.5

在 joomla 我使用插件编辑器 - TinyMCE

例如：当我输入值是：`http://test.com/images/background.png`

=> 输出删除`http://test.com`

结果最终是`/images/background.png`

使用此插件时如何保留[http://test.com](http://test.com)，如何修复？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T03:43:13.987

在插件编辑器中 - TinyMCE`URLs`从更改`relative`为`absolute`

# ruby - 如何测试打开 Ruby 文件的模式类型？

> ID：13715864
> 
> 赞同：0
> 
> 时间：2012-12-05T03:32:27.937
> 
> 标签：ruby, file-io, io

假设您收到一个打开的`File`对象，但您不知道它是以什么类型的模式打开的（例如'r'、'w'、'w+'）。

您将如何确定文件以哪种模式打开？

据我所知，没有`IO`办法解决这个问题，但我可能会遗漏一些东西。

如果有必要为每种模式编写单独的测试，那么理想情况下，它应该是一个`if`不会修改指针位置（或文件内容）的单一方法或一个衬里语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:44:18.310

您可以尝试以下任何一种：

*   将单个字符写入文件描述符，然后取消查找；如果成功，则处于写入模式，否则会引发异常。

*   尝试并收集该`fstat`方法的信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T03:40:12.507

Ruby File 对象具有以下方法：

```
File(filename).readable?
File(filename).writeable?
File(filename).executeable? 
```

# python - 使用 Python MySQLdb 进行“IN”查询的更好方法

> ID：13715876
> 
> 赞同：0
> 
> 时间：2012-12-05T03:33:27.160
> 
> 标签：python

当我想用 做`IN`查询时`MySQLdb`，我写了类似的东西

```
ids = [1,2,3,4,5] # in most cases, this is passed in as a parameter
placeholder = ",".join(["%s"] % len(ids))
cursor.execute("SELECT * FROM a_table WHERE id IN (%s)" % placeholders,
               ids) 
```

到处重复这个非常麻烦。

我已经阅读了[MySQLdb](http://mysql-python.sourceforge.net/MySQLdb.html)的手册，但没有发现任何相关内容。

所以我想知道其他人是怎么做到的？MySQLdb 是否提供了一种未记录的更好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:54:04.610

如果您愿意尝试[SQLAlchemy](http://www.sqlalchemy.org/)（我更熟悉 Flask-SQLAlchemy，因此您可能需要稍微更改代码），您可以将查询简化为如下所示：

```
class a_table(db.Model):
    __tablename__ = 'a_table'
    __table_args__ = {
        'autoload': True,
        'autoload_with': db.engine
    }

ids = [1,2,3,4,5]
results = a_table.query.filter(a_table.id.in_(ids)).all() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:57:35.600

您上面的方法似乎是最好的方法，因为如您所知，参数化值被转换为文字。如果您多次这样做，我唯一（不那么令人印象深刻）的建议是在转换过程中创建一个函数。不理想，但没有绕过 MySQLdb 提供的内置清理，我似乎找不到另一种方法来处理它（虽然不是说没有）。另外，您可能已经想到了这一点：）

```
def InQuery(query, vals):
  # Would likely have to be adjusted to handle more complex/compound cases
  return query % ', '.join(['%s'] * len(vals)) 
```

然后执行如下查询：

```
ids = [1,2,3,4,5]
cursor.execute(InQuery(query, ids), ids) 
```

# python - 找不到self.rect？

> ID：13715877
> 
> 赞同：0
> 
> 时间：2012-12-05T03:33:30.823
> 
> 标签：python, pygame, rect

我有一个程序可以简单地移动图像。我尝试将 self.rect 声明为 load_png() 调用的一部分，但它根本不喜欢它。我认为这可行的原因来自[http://www.pygame.org/docs/tut/tom/games6.html](http://www.pygame.org/docs/tut/tom/games6.html)，说这应该可行：

```
def __init__(self, side):
            pygame.sprite.Sprite.__init__(self)
            self.image, self.rect = load_png('bat.png')
            screen = pygame.display.get_surface()
            self.area = screen.get_rect()
            self.side = side
            self.speed = 10
            self.state = "still"
            self.reinit() 
```

这是我的代码，根据它自己网站上的 pygame 教程，它应该可以工作：

```
def _init_(self):
    pygame.sprite.Sprite._init_(self)
    self.state = 'still'
    self.image =  pygame.image.load('goodGuy.png')
    self.rect = self.image.get_rect()       
    screen = pygame.display.getSurface() 
```

它给了我这个错误：

```
Traceback (most recent call last):
File "C:\Python25\RPG.py", line 37, in <module>
screen.blit(screen, Guy.rect, Guy.rect)
AttributeError: 'goodGuy' object has no attribute 'rect' 
```

如果你们需要我所有的代码，请留言，我会编辑它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:41:42.037

您没有定义 load_png 函数。

您需要先创建 pygame 图像对象，然后才能访问其 rect 属性。

```
self.image = pygame.image.load(file) 
```

然后你可以使用分配矩形值

```
self.rect = self.image.get_rect() 
```

或者您可以根据您链接的示例创建 load_png 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:39:39.977

python 或 pygame没有`load_png`内置函数。我想您所指的教程在某处手动定义了它。你想要的是[`pygame.image.load(filename)`](http://www.pygame.org/docs/ref/image.html#pygame.image.load)然后你可以调用[`get_rect()`](http://www.pygame.org/docs/ref/surface.html#Surface.get_rect)返回的 Surface 对象。完整的代码如下：

```
self.image = pygame.image.load('bat.png')
self.rect = self.image.get_rect() 
```

你的第二个问题是你已经定义了 function `_init_`，但是你需要双下划线：`__init__`。

此外，您需要发布实际发生错误的代码。

# mysql - MySQL 查询帮助在表之间移动数据

> ID：13715883
> 
> 赞同：0
> 
> 时间：2012-12-05T03:34:02.607
> 
> 标签：mysql, sql, forum, phpbb3, bbpress

我已经使用内置导入器通过 bbpress 中的 phpbb3 论坛导入。来自 bbpress 的所有没有帐户但被允许发帖的匿名用户都与那里的帖子断开连接，所有内容在 bbpress 中都显示为匿名。我使用此查询获取了所有`post_usernames`来自并创建了用户：`phpbb_posts`

```
INSERT INTO wp_users (user_login)
    SELECT DISTINCT post_username 
    FROM phpbb_posts 
```

现在我正在尝试在 3 个不同的表之间进行查询。这些方面的东西：

```
SELECT ID FROM wp_users 
INSERT INTO wp_posts(post_author)
WHERE wp_posts(post_date) = phpbb_posts(post_time)
  AND phpbb_posts(post_username) = wp_users(user_login) 
```

显然这是不对的……可能是语法错误，但我还需要添加一些方法来告诉 MySQL必须从第一行`user_login`附加到。`ID`希望这是有道理的。提前感谢您的帮助！

更新的查询：

```
SELECT ID FROM wp_users

SELECT post_time FROM phpbb_posts = post_date
SELECT post_username FROM phpbb_posts = user_login 
```

希望这种语法更有意义。这些确实有效，他们选择了正确的信息。问题是我不知道如何正确编写 WHERE 语句，就像你说的 baskint 一样，我想我需要以某种方式将最后一个语句作为子查询。再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:51:14.703

我仍然不确定每个表的 PK（主键）和 FK（外键）关系是什么。但是，假设这`wp_users`是主表并且`phpbb_posts.post_username`是`wp_users.user_login`...的 FK：

```
SELECT `wp_users`.`ID` 
FROM `wp_users` INNER JOIN
(SELECT `phpbb_posts`.`post_username` FROM `phpbb_posts`, `wp_posts` WHERE `phpbb_posts`.`post_time` = `wp_posts`.`post_date` ) AS `posts`
ON `wp_users`.`user_login` = `posts`.`post_username`; 
```

编辑（2012 年 12 月 5 日）：在[聊天](https://stackoverflow.com/questions/13715883/mysql-query-help-moving-data-between-tables/13716530#)和浏览特定内容后，@sbroways 不得不更改某些字段的数据类型和一些其他修改。反过来，最终的查询结果是：

```
SELECT wp_users.*, ws_posts.*
FROM wp_users INNER JOIN ws_posts
ON wp_users.user_login = ws_posts.user_login 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:48:48.927

你是对的。您的语法令人困惑且不正确。试图了解您要完成的工作。在第二个查询中，为什么要同时选择和插入？也许我遗漏了一些东西，但是您能否说明您要从哪些表格中提取的内容以及您希望如何以简单的英语查看结果？

你也可以考虑子查询（SELECT * FROM b WHERE id IS IN（SELECT Id from a）。你可以级联几次，也许会得到你的答案。

# javascript - d3.json：“未捕获的类型错误：无法读取未定义的属性‘孩子’”

> ID：13715891
> 
> 赞同：6
> 
> 时间：2012-12-05T03:35:29.533
> 
> 标签：javascript, html, json, d3.js, data-visualization

我正在尝试将 d3 作为表示生物数据的工具。

我正在尝试在我的 chrome 浏览器中打开以下示例，以便了解它是如何工作的。不幸的是，我收到以下错误“Uncaught TypeError: Cannot read property 'children' of undefined”。

[http://bl.ocks.org/4063550](http://bl.ocks.org/4063550)

如果单击该链接，则 .html 文件和 .json 文件的源代码都会显示在可视化输出的下方。显然，可视化正在上述页面上运行。我不确定我做错了什么。

我已将 index.html 文件和flare.json 文件复制到Web 服务器上的目录中。如果我尝试从本地文件加载它，我会收到另一个错误：XMLHttpRequest cannot load file:///C:/Users/(..omitted..)/flare.json。仅 HTTP 支持跨源请求。

确实可以从网络服务器加载flare.json 文件（我可以看到它的文本内容）。它包含我要绘制的树数据。

显然，flare.json 文件的开头如下：

`{` `"name": "flare",` `"children": [` `...`

不幸的是，d3.json 无法解析这些信息......

如果有帮助，这是我试图在 Chrome 中打开的 .html 文件：

```
<!DOCTYPE html>

<html>
<head>
    <title>heirarchical graph</title>

<meta charset="utf-8">
<style>

.node circle {
  fill: #fff;
  stroke: steelblue;
  stroke-width: 1.5px;
}

.node {
  font: 10px sans-serif;
}

.link {
  fill: none;
  stroke: #ccc;
  stroke-width: 1.5px;
}

</style>
    <script type="text/javascript"
            src="https://raw.github.com/mbostock/d3/master/d3.v2.min.js">
    </script>

    </head>
    <body>
    <script>

var diameter = 960;

var tree = d3.layout.tree()
    .size([360, diameter / 2 - 120])
    .separation(function(a, b) { return (a.parent == b.parent ? 1 : 2) / a.depth; });

var diagonal = d3.svg.diagonal.radial()
    .projection(function(d) { return [d.y, d.x / 180 * Math.PI]; });

var svg = d3.select("body").append("svg")
    .attr("width", diameter)
    .attr("height", diameter - 150)
  .append("g")
    .attr("transform", "translate(" + diameter / 2 + "," + diameter / 2 + ")");

d3.json("flare.json", function(error, root) {
  var nodes = tree.nodes(root),
      links = tree.links(nodes);

  var link = svg.selectAll(".link")
      .data(links)
    .enter().append("path")
      .attr("class", "link")
      .attr("d", diagonal);

  var node = svg.selectAll(".node")
      .data(nodes)
    .enter().append("g")
      .attr("class", "node")
      .attr("transform", function(d) { return "rotate(" + (d.x - 90) + ")translate(" + d.y + ")"; })

  node.append("circle")
      .attr("r", 4.5);

  node.append("text")
      .attr("dy", ".31em")
      .attr("text-anchor", function(d) { return d.x < 180 ? "start" : "end"; })
      .attr("transform", function(d) { return d.x < 180 ? "translate(8)" : "rotate(180)translate(-8)"; })
      .text(function(d) { return d.name; });
});

d3.select(self.frameElement).style("height", diameter - 150 + "px");

</script>
</body>

</html> 
```

而且，这里是flare.json 文件：

```
{
 "name": "flare",
 "children": [
  {
   "name": "analytics",
   "children": [
    {
     "name": "cluster",
     "children": [
      {"name": "AgglomerativeCluster", "size": 3938},
      {"name": "CommunityStructure", "size": 3812},
      {"name": "HierarchicalCluster", "size": 6714},
      {"name": "MergeEdge", "size": 743}
     ]
    },
    {
     "name": "graph",
     "children": [
      {"name": "BetweennessCentrality", "size": 3534},
      {"name": "LinkDistance", "size": 5731},
      {"name": "MaxFlowMinCut", "size": 7840},
      {"name": "ShortestPaths", "size": 5914},
      {"name": "SpanningTree", "size": 3416}
     ]
    },
    {
     "name": "optimization",
     "children": [
      {"name": "AspectRatioBanker", "size": 7074}
     ]
    }
   ]
  },
  {
   "name": "animate",
   "children": [
    {"name": "Easing", "size": 17010},
    {"name": "FunctionSequence", "size": 5842},
    {
     "name": "interpolate",
     "children": [
      {"name": "ArrayInterpolator", "size": 1983},
      {"name": "ColorInterpolator", "size": 2047},
      {"name": "DateInterpolator", "size": 1375},
      {"name": "Interpolator", "size": 8746},
      {"name": "MatrixInterpolator", "size": 2202},
      {"name": "NumberInterpolator", "size": 1382},
      {"name": "ObjectInterpolator", "size": 1629},
      {"name": "PointInterpolator", "size": 1675},
      {"name": "RectangleInterpolator", "size": 2042}
     ]
    },
    {"name": "ISchedulable", "size": 1041},
    {"name": "Parallel", "size": 5176},
    {"name": "Pause", "size": 449},
    {"name": "Scheduler", "size": 5593},
    {"name": "Sequence", "size": 5534},
    {"name": "Transition", "size": 9201},
    {"name": "Transitioner", "size": 19975},
    {"name": "TransitionEvent", "size": 1116},
    {"name": "Tween", "size": 6006}
   ]
  },
  {
   "name": "data",
   "children": [
    {
     "name": "converters",
     "children": [
      {"name": "Converters", "size": 721},
      {"name": "DelimitedTextConverter", "size": 4294},
      {"name": "GraphMLConverter", "size": 9800},
      {"name": "IDataConverter", "size": 1314},
      {"name": "JSONConverter", "size": 2220}
     ]
    },
    {"name": "DataField", "size": 1759},
    {"name": "DataSchema", "size": 2165},
    {"name": "DataSet", "size": 586},
    {"name": "DataSource", "size": 3331},
    {"name": "DataTable", "size": 772},
    {"name": "DataUtil", "size": 3322}
   ]
  },
  {
   "name": "display",
   "children": [
    {"name": "DirtySprite", "size": 8833},
    {"name": "LineSprite", "size": 1732},
    {"name": "RectSprite", "size": 3623},
    {"name": "TextSprite", "size": 10066}
   ]
  },
  {
   "name": "flex",
   "children": [
    {"name": "FlareVis", "size": 4116}
   ]
  },
  {
   "name": "physics",
   "children": [
    {"name": "DragForce", "size": 1082},
    {"name": "GravityForce", "size": 1336},
    {"name": "IForce", "size": 319},
    {"name": "NBodyForce", "size": 10498},
    {"name": "Particle", "size": 2822},
    {"name": "Simulation", "size": 9983},
    {"name": "Spring", "size": 2213},
    {"name": "SpringForce", "size": 1681}
   ]
  },
  {
   "name": "query",
   "children": [
    {"name": "AggregateExpression", "size": 1616},
    {"name": "And", "size": 1027},
    {"name": "Arithmetic", "size": 3891},
    {"name": "Average", "size": 891},
    {"name": "BinaryExpression", "size": 2893},
    {"name": "Comparison", "size": 5103},
    {"name": "CompositeExpression", "size": 3677},
    {"name": "Count", "size": 781},
    {"name": "DateUtil", "size": 4141},
    {"name": "Distinct", "size": 933},
    {"name": "Expression", "size": 5130},
    {"name": "ExpressionIterator", "size": 3617},
    {"name": "Fn", "size": 3240},
    {"name": "If", "size": 2732},
    {"name": "IsA", "size": 2039},
    {"name": "Literal", "size": 1214},
    {"name": "Match", "size": 3748},
    {"name": "Maximum", "size": 843},
    {
     "name": "methods",
     "children": [
      {"name": "add", "size": 593},
      {"name": "and", "size": 330},
      {"name": "average", "size": 287},
      {"name": "count", "size": 277},
      {"name": "distinct", "size": 292},
      {"name": "div", "size": 595},
      {"name": "eq", "size": 594},
      {"name": "fn", "size": 460},
      {"name": "gt", "size": 603},
      {"name": "gte", "size": 625},
      {"name": "iff", "size": 748},
      {"name": "isa", "size": 461},
      {"name": "lt", "size": 597},
      {"name": "lte", "size": 619},
      {"name": "max", "size": 283},
      {"name": "min", "size": 283},
      {"name": "mod", "size": 591},
      {"name": "mul", "size": 603},
      {"name": "neq", "size": 599},
      {"name": "not", "size": 386},
      {"name": "or", "size": 323},
      {"name": "orderby", "size": 307},
      {"name": "range", "size": 772},
      {"name": "select", "size": 296},
      {"name": "stddev", "size": 363},
      {"name": "sub", "size": 600},
      {"name": "sum", "size": 280},
      {"name": "update", "size": 307},
      {"name": "variance", "size": 335},
      {"name": "where", "size": 299},
      {"name": "xor", "size": 354},
      {"name": "_", "size": 264}
     ]
    },
    {"name": "Minimum", "size": 843},
    {"name": "Not", "size": 1554},
    {"name": "Or", "size": 970},
    {"name": "Query", "size": 13896},
    {"name": "Range", "size": 1594},
    {"name": "StringUtil", "size": 4130},
    {"name": "Sum", "size": 791},
    {"name": "Variable", "size": 1124},
    {"name": "Variance", "size": 1876},
    {"name": "Xor", "size": 1101}
   ]
  },
  {
   "name": "scale",
   "children": [
    {"name": "IScaleMap", "size": 2105},
    {"name": "LinearScale", "size": 1316},
    {"name": "LogScale", "size": 3151},
    {"name": "OrdinalScale", "size": 3770},
    {"name": "QuantileScale", "size": 2435},
    {"name": "QuantitativeScale", "size": 4839},
    {"name": "RootScale", "size": 1756},
    {"name": "Scale", "size": 4268},
    {"name": "ScaleType", "size": 1821},
    {"name": "TimeScale", "size": 5833}
   ]
  },
  {
   "name": "util",
   "children": [
    {"name": "Arrays", "size": 8258},
    {"name": "Colors", "size": 10001},
    {"name": "Dates", "size": 8217},
    {"name": "Displays", "size": 12555},
    {"name": "Filter", "size": 2324},
    {"name": "Geometry", "size": 10993},
    {
     "name": "heap",
     "children": [
      {"name": "FibonacciHeap", "size": 9354},
      {"name": "HeapNode", "size": 1233}
     ]
    },
    {"name": "IEvaluable", "size": 335},
    {"name": "IPredicate", "size": 383},
    {"name": "IValueProxy", "size": 874},
    {
     "name": "math",
     "children": [
      {"name": "DenseMatrix", "size": 3165},
      {"name": "IMatrix", "size": 2815},
      {"name": "SparseMatrix", "size": 3366}
     ]
    },
    {"name": "Maths", "size": 17705},
    {"name": "Orientation", "size": 1486},
    {
     "name": "palette",
     "children": [
      {"name": "ColorPalette", "size": 6367},
      {"name": "Palette", "size": 1229},
      {"name": "ShapePalette", "size": 2059},
      {"name": "SizePalette", "size": 2291}
     ]
    },
    {"name": "Property", "size": 5559},
    {"name": "Shapes", "size": 19118},
    {"name": "Sort", "size": 6887},
    {"name": "Stats", "size": 6557},
    {"name": "Strings", "size": 22026}
   ]
  },
  {
   "name": "vis",
   "children": [
    {
     "name": "axis",
     "children": [
      {"name": "Axes", "size": 1302},
      {"name": "Axis", "size": 24593},
      {"name": "AxisGridLine", "size": 652},
      {"name": "AxisLabel", "size": 636},
      {"name": "CartesianAxes", "size": 6703}
     ]
    },
    {
     "name": "controls",
     "children": [
      {"name": "AnchorControl", "size": 2138},
      {"name": "ClickControl", "size": 3824},
      {"name": "Control", "size": 1353},
      {"name": "ControlList", "size": 4665},
      {"name": "DragControl", "size": 2649},
      {"name": "ExpandControl", "size": 2832},
      {"name": "HoverControl", "size": 4896},
      {"name": "IControl", "size": 763},
      {"name": "PanZoomControl", "size": 5222},
      {"name": "SelectionControl", "size": 7862},
      {"name": "TooltipControl", "size": 8435}
     ]
    },
    {
     "name": "data",
     "children": [
      {"name": "Data", "size": 20544},
      {"name": "DataList", "size": 19788},
      {"name": "DataSprite", "size": 10349},
      {"name": "EdgeSprite", "size": 3301},
      {"name": "NodeSprite", "size": 19382},
      {
       "name": "render",
       "children": [
        {"name": "ArrowType", "size": 698},
        {"name": "EdgeRenderer", "size": 5569},
        {"name": "IRenderer", "size": 353},
        {"name": "ShapeRenderer", "size": 2247}
       ]
      },
      {"name": "ScaleBinding", "size": 11275},
      {"name": "Tree", "size": 7147},
      {"name": "TreeBuilder", "size": 9930}
     ]
    },
    {
     "name": "events",
     "children": [
      {"name": "DataEvent", "size": 2313},
      {"name": "SelectionEvent", "size": 1880},
      {"name": "TooltipEvent", "size": 1701},
      {"name": "VisualizationEvent", "size": 1117}
     ]
    },
    {
     "name": "legend",
     "children": [
      {"name": "Legend", "size": 20859},
      {"name": "LegendItem", "size": 4614},
      {"name": "LegendRange", "size": 10530}
     ]
    },
    {
     "name": "operator",
     "children": [
      {
       "name": "distortion",
       "children": [
        {"name": "BifocalDistortion", "size": 4461},
        {"name": "Distortion", "size": 6314},
        {"name": "FisheyeDistortion", "size": 3444}
       ]
      },
      {
       "name": "encoder",
       "children": [
        {"name": "ColorEncoder", "size": 3179},
        {"name": "Encoder", "size": 4060},
        {"name": "PropertyEncoder", "size": 4138},
        {"name": "ShapeEncoder", "size": 1690},
        {"name": "SizeEncoder", "size": 1830}
       ]
      },
      {
       "name": "filter",
       "children": [
        {"name": "FisheyeTreeFilter", "size": 5219},
        {"name": "GraphDistanceFilter", "size": 3165},
        {"name": "VisibilityFilter", "size": 3509}
       ]
      },
      {"name": "IOperator", "size": 1286},
      {
       "name": "label",
       "children": [
        {"name": "Labeler", "size": 9956},
        {"name": "RadialLabeler", "size": 3899},
        {"name": "StackedAreaLabeler", "size": 3202}
       ]
      },
      {
       "name": "layout",
       "children": [
        {"name": "AxisLayout", "size": 6725},
        {"name": "BundledEdgeRouter", "size": 3727},
        {"name": "CircleLayout", "size": 9317},
        {"name": "CirclePackingLayout", "size": 12003},
        {"name": "DendrogramLayout", "size": 4853},
        {"name": "ForceDirectedLayout", "size": 8411},
        {"name": "IcicleTreeLayout", "size": 4864},
        {"name": "IndentedTreeLayout", "size": 3174},
        {"name": "Layout", "size": 7881},
        {"name": "NodeLinkTreeLayout", "size": 12870},
        {"name": "PieLayout", "size": 2728},
        {"name": "RadialTreeLayout", "size": 12348},
        {"name": "RandomLayout", "size": 870},
        {"name": "StackedAreaLayout", "size": 9121},
        {"name": "TreeMapLayout", "size": 9191}
       ]
      },
      {"name": "Operator", "size": 2490},
      {"name": "OperatorList", "size": 5248},
      {"name": "OperatorSequence", "size": 4190},
      {"name": "OperatorSwitch", "size": 2581},
      {"name": "SortOperator", "size": 2023}
     ]
    },
    {"name": "Visualization", "size": 16540}
   ]
  }
 ]
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T06:09:30.230

为了让它工作，我不得不更换生产线

```
d3.json("flare.json", function(error, root) { 
```

和

```
d3.json("flare.json", function(root) { 
```

我在这里使用了我的直觉，但我仍然不明白它是如何在示例网站上工作的，而不是我的，或者我对代码进行更改的真正意义是什么。如果您知道如何以更深入的方式回答这个问题，请投稿，我会接受您的回答。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T15:45:41.397

该代码来自 d3.v3，但它指向 d3.v2，它不使用 d3.json 函数中的错误调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-24T17:38:44.103

这是因为返回的json对象是函数的第一个参数接收到的。这可能是因为 d3 的版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-15T15:31:31.423

有同样的错误。解决方案非常简单：您没有提供 JSON 对象数组。你说你的 JSON 开始如下：

`{ "name": "flare", "children": [ ...`

请更改，因此更改开始如下：

`[{ "name": "flare", "children": [ ...}]`

这样 D3 将能够找到“第一个`child`”

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-09-24T15:32:48.260

```
<script>
        function liveProject() {
           var  a=200;
           this. x=600;
           this. y=300;
           this. z= function () {
               return this.x+this.y;
           }
        }
        var lp=new liveProject();
        document.write(lp.z());
    </script> 
```

# php - PHP如何回显mysql查询列表中每个组的第一个值

> ID：13715897
> 
> 赞同：0
> 
> 时间：2012-12-05T03:36:17.430
> 
> 标签：php, mysql

为了更好地解释我的情况，请看一下这个 mokeup 查询结果：

```
Category    Item
cat1        Item 1
cat1        Item 2
cat1        Item 3
cat23       Item x
cat23       Item y
cat23       Item z
X           apples
X           oranges
X           bananas
and so on.... 
```

我正在从 mysql 数据库中提取数据，并**希望显示如下结果**：

```
Category----Item
cat1        Item 1
            Item 2
            Item 3
cat23       Item x
            Item y
            Item z
X           apples
            oranges
            bananas
and so on.... 
```

我尝试了不同的方法，但我空空如也。这是最新的尝试：

**PHP**

```
//Headers
echo 'Category';
echo ' | ';
echo 'Item';
echo "\n";

$sql = "SELECT `table1`.*, `table2`.* FROM table1 INNER JOIN table2 ON `table1`.`Category` = `table2`.`Category` ORDER BY `table1`.`Category`, `table2`.`Item`";
$dbq = mysql_query( $sql );
$cat = '';
while( $data = mysql_fetch_assoc( $dbq ) ) {
    if( !$cat == $data['category'] ) {
        $cat = $data['category'];

        echo $cat;
        echo ' | ';
        echo $data['item'];
        echo "\n";
    }
    else {
        echo '     ';
        echo ' | ';
        echo $data['item'];
        echo "\n";
    }
} 
```

使用此代码，当前输出为：

```
Category----Item
cat1        Item 1
            Item 2
            Item 3
            Item x
            Item y
            Item z
            apples
            oranges
            bananas 
```

...而不是所需的输出。

我正在寻找最有效和最简单的方法来回显每个类别 1 时间。也许这段代码不是处理它的最佳方法，但我尝试了不同的方式，现在我的大脑已经关闭 S_S 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:14:48.653

花了我不少时间...

改变

```
if( !$cat == $data['category'] ) { 
```

到

```
if( $cat != $data['category'] ) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:53:18.013

不确定您要查找的内容，因为该解决方案似乎可以解决您需要做的事情，但是如果您想对结果订单更加宽容，可以尝试以下操作：

```
$concated_data = array();
while( $data = mysql_fetch_assoc( $dbq ) ) 
{
  if ( ! array_key_exists( $data['category'], $concated_data ) )
    $concated_data[$data['category']] = array();

  array_push($concated_data[$data['category']], $data['item']);
}

foreach ($concated_data as $category => $items) 
{
  echo $category;
  $count = count($items);
  for ($i = 0; $i < $count; $i++)
  {
    if ($i == 0)
      echo "\t";
    else
      echo "\t\t";

    echo $items[$i]."\n"; // Items
  }
} 
```

在这一点上格式化你我猜，但我认为将数据放入数组数组是最好的方法，所以顶级键是类别，然后它们指向的数组现在保存你的项目数组。这也不假设您连续获得同一类别的结果。

抱歉，代码可能包含错误，因为我有一段时间没有用 PHP 编写代码了。但基本上你应该先累积项目然后通过累积列表并输出数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T04:05:06.440

最好将相同类别的项目连接起来，并将其存储为项目 1、项目 2、项目 3。

当您想使用此项目时，请使用 explode() 来拆分和

当您想在此项目中搜索特定项目时，请使用 mysql 的[FIND-IN-SET](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)

# javascript - D3.js 从单独的文件中绘制多个数据集

> ID：13715900
> 
> 赞同：14
> 
> 时间：2012-12-05T03:36:43.593
> 
> 标签：javascript, d3.js

我正在尝试使用来自两个 tsv 文件的两组数据制作散点图。但是，每个都与单个比例共享 x 轴。有两个 y 轴，每个轴都有自己的刻度。![图表](../Images/834077606c50410a41034c6be643dca8.png)我现在拥有的图表将在视觉上有所帮助。

问题是，第二个数据集（橙色）仅部分绘制为 a 轴上约 15,000 处的污点。它真的应该是一条更大的线。此外，当我运行它时，有时会呈现第二个数据集，而现在会呈现第一个数据集。不知道为什么会这样。。

以下是两个（可能）相关的代码块：

```
 //1st data set
    d3.tsv("datatest4.tsv", function(error, tsv1) {

        tsv1.forEach(function(d) {
            d.altit = +d.altit;
            d.tmp = +d.tmp;

        });

        x.domain(d3.extent(tsv1, function(d) { return d.altit; })).nice();
        y.domain(d3.extent(tsv1, function(d) { return d.tmp; })).nice();

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis)
            .append("text")
            .attr("class", "label")
            .attr("x", width)
            .attr("y", -6)
            .style("text-anchor", "end")
            .text("Altitude (m)");

        svg.append("g")
            .attr("class", "y axis axis1")
            .call(yAxis)
            .append("text")
            .attr("class", "label")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end");

        svg.selectAll(".dot")
            .data(tsv1)
            .enter().append("circle")
            .attr("class", "dot")
            .attr("r", 1)
            .attr("cx", function(d) { return x(d.altit); })
            .attr("cy", function(d) { return y(d.tmp); })
            .style("fill","steelblue");

    }); 
```

和

```
 //2nd data set
    d3.tsv("datatest2.tsv", function(error, tsv2) {

        tsv2.forEach(function(dd) {
            dd.alti = +dd.alti;
            dd.pressure = +dd.pressure;
        });

        x2.domain(d3.extent(tsv2, function(dd) { return dd.alti; })).nice();
        y2.domain(d3.extent(tsv2, function(dd) { return dd.pressure; })).nice();

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis2)
            .attr("x", width)
            .attr("y", -6)
            .text("Altitude (m)");

        svg.append("g")
            .attr("class", "y axis axis2")
            .call(yAxis2)
            .append("text")
            .attr("class", "label")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end");

        svg.selectAll(".dot")
            .data(tsv2)
            .enter().append("circle")
            .attr("class", "dot")
            .attr("r", 1)
            .attr("cx", function(dd) { return x2(dd.alti); })
            .attr("cy", function(dd) { return y2(dd.pressure); })
            .style("fill","orange");    

    }); 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-05T05:49:38.247

问题是您`svg.selectAll(".dot")`对每个数据集使用相同的选择器 ,`.data(tsv1)`和`.data(tsv2)`.

D3 认为第二组应该取代第一组。您可以通过为每种类型的点分配一个唯一的类来修复它。

```
 svg.selectAll(".blue.dot")// Select specifically blue dots
        .data(tsv1)
        .enter().append("circle")
        .attr("class", "blue dot")// Assign two classes
        ...

    svg.selectAll(".orange.dot")
        .data(tsv2)
        .enter().append("circle")
        .attr("class", "orange dot")
        ... 
```

# javascript - 沙盒社交分享 JavaScript

> ID：13715901
> 
> 赞同：0
> 
> 时间：2012-12-05T03:36:46.917
> 
> 标签：javascript, security, social-networking, sandbox

我想在我的网站上使用社交分享小部件（例如 Facebook Like、Twitter Tweet 等），但我不想直接嵌入第三方脚本标签。我希望我的网站只运行受信任或沙盒代码。

*   [Google Caja](http://code.google.com/p/google-caja/)可能会工作，但它需要专门编写第三方代码以适应 Caja。
*   内容安全策略可能会起作用，但它的[实现很少](http://caniuse.com/#feat=contentsecuritypolicy)，尤其是 IE（甚至 10 个），并且没有很好的方法来检测它是否存在。

有针对这个的解决方法吗？还是我必须在根本没有按钮和运行不受信任的 JavaScript 之间做出选择？

附加上下文：我想在 HTTPS 上运行我的整个网站，但我也想有共享按钮。我不想将安全 cookie 泄露到 Facebook 或 Twitter。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:32:14.557

> 我不想将安全 cookie 泄露到 Facebook 或 Twitter。

如果您担心浏览器会去获取 twitter/facebook JS 时它会传递您的网站 cookie，那么它不会。但是如果你包含一些 js 它可以通过 document.cookies 访问 cookie。而且我不认为重写真的是一种选择，工作量太大，如果改变了怎么办？

安全性与可用性始终是一场战斗。我建议不要在包含敏感信息的网站上包含这些按钮。并且祈祷不要发生任何不好的事情 :) 另外，您可以添加其他保护机制，例如在对用户数据或任何敏感数据进行任何更改之前请求重新验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:11:42.537

如果您不信任第三方 JavaScript（我不怪您，这很可怕！），您最好的选择是使用`iframe`这些社交网络提供的实现。例如，您可以通过将以下框架添加到您的网站来包含 Facebook“Like”按钮：

```
<iframe src="//www.facebook.com/plugins/like.php?href=[PAGE_URL_GOES_HERE]&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=true&amp;font&amp;colorscheme=light&amp;action=like&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:21px;" allowTransparency="true"></iframe> 
```

[https://dev.twitter.com/docs/tweet-button#using-an-iframe](https://dev.twitter.com/docs/tweet-button#using-an-iframe)详细介绍了 Twitter 的类似设置。

将代码封装在 an 中`iframe`可为您提供一些针对框架内容的保护措施，因为它无法到达父级以获取数据或操作您的代码。

`iframe`您可以通过（巧妙命名的）`sandbox`属性对沙盒进行沙箱化来提高保护级别。例如：

```
<iframe sandbox="allow-script allow-same-origin" src="..."></iframe> 
```

会将页面加载到 中`iframe`，并允许它运行可以访问其来源的脚本（但仍然不是父来源的来源）。但是，它不能导航顶级文档、加载插件等。Chrome、Safari、Firefox 18+ 和 IE9（我认为。可能是 10）支持沙盒。

# ruby - 无法安装rubyracer

> ID：13715902
> 
> 赞同：1
> 
> 时间：2012-12-05T03:36:50.520
> 
> 标签：ruby, gem, therubyracer

我正在尝试在 Debian 6 上进行 gem install therubyracer。我在 1.9.3 上使用 rbenv。当我最初这样做时，它抱怨 libv8，所以我做了一个 gem install libv8。现在，当我运行 gem install therubyracer 时，我收到以下错误，说它找不到文件。它正在谈论的文件，/home/chop/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/out/ x64.release/obj.target/tools/gyp/libv8_base.a，但是确实存在。

```
hop@fev-temp:~$ gem install therubyracer
Building native extensions.  This could take a while...
ERROR:  Error installing therubyracer:
    ERROR: Failed to build gem native extension.

        /home/chop/.rbenv/versions/1.9.3-p327/bin/ruby extconf.rb
checking for main() in -lpthread... yes
creating Makefile

make
compiling stack.cc
compiling accessor.cc
compiling constants.cc
compiling heap.cc
compiling init.cc
compiling primitive.cc
compiling signature.cc
compiling date.cc
compiling locker.cc
compiling exception.cc
compiling gc.cc
compiling script.cc
compiling external.cc
compiling v8.cc
compiling object.cc
compiling trycatch.cc
compiling context.cc
compiling string.cc
compiling value.cc
compiling array.cc
compiling invocation.cc
compiling message.cc
compiling constraints.cc
compiling function.cc
compiling backref.cc
compiling handles.cc
compiling template.cc
compiling rr.cc
linking shared-object v8/init.so
/home/chop/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/out/x64.release/obj.target/tools/gyp/libv8_base.a: could not read symbols: No such file or directory
collect2: ld returned 1 exit status
make: *** [init.so] Error 1

Gem files will remain installed in /home/chop/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/therubyracer-0.11.0 for inspection.
Results logged to /home/chop/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/therubyracer-0.11.0/ext/v8/gem_make.out 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-05T05:33:43.740

我刚刚遇到了完全相同的错误。我查看了[https://rubygems.org/gems/therubyracer](https://rubygems.org/gems/therubyracer)上的 gem 详细信息，似乎我们“幸运”地在发布日捆绑了一个新版本。

这似乎已经被报告：[https ://github.com/cowboyd/therubyracer/issues/215](https://github.com/cowboyd/therubyracer/issues/215)

所以，我认为最简单的方法是使用最新版本的 gem。所以我更新了我的 Gemfile 以指向最后一个版本，如下所示：

```
gem "therubyracer", "~> 0.10.2" 
```

我能够成功安装gem。

如果要手动安装 gem，可以使用：

```
gem install therubyracer --version "~> 0.10.2" 
```

# ruby-on-rails - Rails 3.2 上的 Therubyracer

> ID：13715903
> 
> 赞同：0
> 
> 时间：2012-12-05T03:36:54.437
> 
> 标签：ruby-on-rails

我正在尝试使“twitter-bootstrap-rails”与 Rails 3.2 一起使用。这取决于“therubyracer”

当我添加“therubyracer”并执行捆绑命令时，它会出错。

```
...
Failed to build gem native extension
checking for main() in -lpthread... no
checking ro w8.h... no
Could not create Makefile due to some reason, probably lack of necessary libraries and/or headers.
Check the mkmf.log file for more details.
... 
```

有谁知道如何修理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:22:38.157

除了 'therubyracer' gem 之外，你还必须安装 'execjs' gem。

在您的 gem 文件中写入`gem 'therubyracer'`, 和。`gem 'execjs'`并运行`bundle install`。

以上会顺利的。

# c# - 多个调度程序或多个作业触发器

> ID：13715904
> 
> 赞同：0
> 
> 时间：2012-12-05T03:36:58.230
> 
> 标签：c#, quartz.net, job-scheduling

我正在使用 Quartz.net 来安排我的工作。我的应用程序有不同的数据库，每个数据库都需要考虑用于作业处理。

我有两个问题：

1.  我可以为所有具有不同作业触发器的数据库使用相同的调度程序，还是为每个数据库使用一个调度程序？这是因为触发时间因数据库而异。

2.  一个比另一个有什么优势？哪种方法最适合我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:14:24.003

我不知道quartz.net，但我想这与java 版本相同。

由于调度程序实例只能绑定到一个数据源，因此可能没有办法实现这一点。每个数据库需要一个实例。

我能想象的唯一方法是你开发一个新的“连接器”来合并来自所有数据库的数据，但是（更难）它还必须能够将数据保存到适当的数据库......

也许您应该创建一个 Facade 对象来管理 Scheduler 实例的列表，并且只将该对象公开给您的应用程序。

HIH

# c# - 带有 Monotouch 的 iOS 事件处理 UITableViewSource

> ID：13715905
> 
> 赞同：1
> 
> 时间：2012-12-05T03:36:58.400
> 
> 标签：c#, events, uitableview, xamarin.ios

当单击a 的元素时，我正在尝试捕获和处理事件`UITableViewSource`。
这是我的代码：

```
 public class TableViewSource : UITableViewSource
    {
        public event EventHandler<SongSelectedEventArgs> SongSelected;
        private List<Song> rows;

        public TableViewSource (List<Song> list) 
        { 
            rows = list; 
        }

        public override int RowsInSection (UITableView tableview, int section) 
        { 
            return rows.Count; 
        }

        public override void RowSelected (UITableView tableView, NSIndexPath indexPath)
        {
            // raise our event
            var handler = SongSelected;
            if (handler != null)
                handler (this, new SongSelectedEventArgs (rows[indexPath.Row]));
        }

        public override UITableViewCell GetCell(UITableView tableView, NSIndexPath indexPath)
        {  
            UITableViewCell cell = new UITableViewCell(UITableViewCellStyle.Default,"mycell"); 
            cell.TextLabel.Text = rows[indexPath.Row].ToString();
            return cell;
        }

        public class SongSelectedEventArgs : EventArgs
        {
            public Song Group { get; set; }
            public SongSelectedEventArgs(Song group) : base()
            { Group = group; }
        }
    } 
```

我正在从 Xamarin 的示例中建模，这里：

```
 protected class AssetGroupTableSource : UITableViewSource
    {
        public event EventHandler<GroupSelectedEventArgs> GroupSelected;
        protected List<ALAssetsGroup> groups;

        public AssetGroupTableSource(List<ALAssetsGroup> groups) { this.groups = groups; }

        public override int NumberOfSections (UITableView tableView) { return 1; }

        public override int RowsInSection (UITableView tableview, int section) { return groups.Count; }

        public override UITableViewCell GetCell (UITableView tableView, NSIndexPath indexPath)
        {
            UITableViewCell cell = tableView.DequeueReusableCell ("AlbumCell");
            if(cell == null)
                cell = new UITableViewCell (UITableViewCellStyle.Default, "AlbumCell");
            cell.TextLabel.Text = groups[indexPath.Row].Name;
            return cell;
        }

        public override void RowSelected (UITableView tableView, NSIndexPath indexPath)
        {
            // raise our event
            var handler = GroupSelected;
            if (handler != null)
                handler (this, new GroupSelectedEventArgs (groups[indexPath.Row]));
        }

        public class GroupSelectedEventArgs : EventArgs
        {
            public ALAssetsGroup Group { get; set; }
            public GroupSelectedEventArgs(ALAssetsGroup group) : base()
            { Group = group; }
        }
    } 
```

当我在表格视图中单击一个元素（类`Song`）时，它成功地转到了覆盖`RowSelected`。然而，`handler`总是`null`。我在做什么与导致此失败的示例代码不同？

编辑：这是*应该*读取事件的行（但没有触发）：

```
 TableViewSource tableData = new TableViewSource(results);

        tableData.SongSelected += (object sender, TableViewSource.SongSelectedEventArgs e) => {
            //AssetEnumerationScreen assetScreen = new AssetEnumerationScreen (e.Group.Name, assetGroups[e.Group]);
            //NavigationController.PushViewController (assetScreen, true);
            Console.WriteLine("Test");
        }; 
```

编辑：这是大部分主体代码：

```
 TableViewSource tableData = new TableViewSource(results);

        tableData.SongSelected += (object sender, TableViewSource.SongSelectedEventArgs e) => {
            Console.WriteLine("Test");
        };

        tableData.SongSelected += delegate(object sender, TableViewSource.SongSelectedEventArgs e) {
            Console.WriteLine("Test");
            LyricsScreen assetScreen = new LyricsScreen (e.Song);
            NavigationController.PushViewController (assetScreen, true);
        };
        searchBool.ValueChanged += (sender, e) => {
            UpdateDisplay(tableData, songList);
        };
        lyricSearch.TextChanged += (sender, e) => {
            UpdateDisplay(tableData, songList);
        };

        lyricSearch.Text = String.Empty;

        this.searchResults.Source = tableData; 
```

编辑！：我发现了错误。我有这条线：

```
 tableData = new TableViewSource(results); 
```

两次，所以它订阅了第一个事件，但后来我创建了一个新的并将*那个*设置为源，用订阅覆盖了那个。

谢谢！

# php - 如何将多行插入数据库

> ID：13715906
> 
> 赞同：0
> 
> 时间：2012-12-05T03:37:00.770
> 
> 标签：php

这是我的代码..我的问题是当我创建多行时，只有第一行才进入数据库..下一行不是..供您参考，添加行功能效果很好......我使用这个概念MVC 的

**看法**

```
<SCRIPT language="javascript">
    function addRow(tableID) {

        var table = document.getElementById(tableID);

        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);

        var colCount = table.rows[0].cells.length;

        for(var i=0; i<colCount; i++) {

            var newcell = row.insertCell(i);

            newcell.innerHTML = table.rows[0].cells[i].innerHTML;
            //alert(newcell.childNodes);
            switch(newcell.childNodes[0].type) {
                case "text":
                        newcell.childNodes[0].value = "";
                        break;
                case "checkbox":
                        newcell.childNodes[0].checked = false;
                        break;
                case "select-one":
                        newcell.childNodes[0].selectedIndex = 0;
                        break;
            }
        }
    }

    function deleteRow(tableID) {
        try {
        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;

        for(var i=0; i<rowCount; i++) {
            var row = table.rows[i];
            var chkbox = row.cells[0].childNodes[0];
            if(null != chkbox && true == chkbox.checked) {
                if(rowCount <= 1) {
                    alert("Cannot delete all the rows.");
                    break;
                }
                table.deleteRow(i);
                rowCount--;
                i--;
            }

        }
        }catch(e) {
            alert(e);
        }
    }

</SCRIPT>
    <fieldset>
         <INPUT type="button" value="Add Row" onclick="addRow('dataTable')" />

<INPUT type="button" value="Delete Row" onclick="deleteRow('dataTable')" />

<TABLE id="dataTable" width="350px" border="1">
    <TR>
        <TD><INPUT type="checkbox" name="chk[]"/></TD>
        <TD><INPUT type="text" name="amount[]"/></TD>
        <TD><INPUT type="text" name="date[]" id="date" /></TD>
            <td align="center" valign="top" nowrap><input name="count1" type="text" id="count1" size="8" maxlength="10" value="10"></td>

    </TR>
</TABLE> 
```

**控制器**

```
 $count= $_POST['count1'];

    $amount= $_POST['amount'];
    $date= $_POST['date'];

    for($i=0; $i<=10; $i++){

  $this->Model->insertBil($date[$i],$amount[$i]);

 } 
```

**型号** 没有问题

# java - Ant 构建使用两个项目

> ID：13715908
> 
> 赞同：0
> 
> 时间：2012-12-05T03:37:53.047
> 
> 标签：java, ant

我在 Eclipse 中有两个独立的项目：“project”和“pinclude”

项目包含 pinclude，因此如果不以某种方式在我的 build.xml 中包含该项目的 java 文件，javac 将始终返回错误。

如何在 ant/javac 中包含 .class 文件？我试过寻找解决方案，但到目前为止我只想出了添加 jar 文件的方法。创建一个包含所有“pinclude”.class 文件的 jar 文件可以解决我的问题吗？

感谢您的帮助。

**注意**：

我很抱歉命名约定不好；这些只是我为解决这个问题而做的项目。

另外，请忽略 srcdir 和 destdit，它们并不重要。

构建.xml

```
<project name="project" basedir="." default="dist" >
<target name="dist" >
    <javac destdir="bin" 
        srcdir="${basedir}\myfileslocation\" >
    </javac>
</target> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:56:16.043

我不是 100% 确定你需要什么。你是说你有来自的类文件`pininclude`，你需要将它们包含在你的`<javac>`编译任务中吗？它会是这样的：

```
<javac destdir="bin"
    srcdir="${basedir}/myfileslocation">
    <classpath>
        <pathelement path="${path.to.pininclude.javac.files}"/>
    </classpath>
</javac> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:01:25.253

> 如何在 ant/javac 中包含 .class 文件？我试过寻找解决方案，但到目前为止我只想出了添加 jar 文件的方法。创建一个包含所有“pinclude”.class 文件的 jar 文件可以解决我的问题吗？

是的。它有助于将功能分成更小的模块。如果您将一个项目（在这种情况下为 pinclude）导出到一个 jar 中并在另一个中导入（通过类路径），那是最正确的步骤。

# php - 如何每天存储一次 Javascript GET 响应？

> ID：13715909
> 
> 赞同：1
> 
> 时间：2012-12-05T03:37:53.313
> 
> 标签：php, javascript, performance, caching

我正在制作一个从 Javascript 调用 SoundCloud 的 API 的网站，响应大约需要 7 秒。我想做的是以某种方式存储响应，然后在接下来的 24 小时内使用我已经下载的响应。无论如何，数据不应该每天更改一次以上，这将大大加快速度，而不是每次有人加载页面时都进行调用。

有没有办法使用 PHP 将它存储在我的服务器上的文本中？我根本没有数据库。

感谢您的帮助，我对此很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:43:53.820

您可以使用每天运行的 cron 作业来获取所需的 js。

```
0 0 * * * /usr/bin/curl --silent --compressed http://www.page.com/lib.js > my.js 
```

# html - 为什么我的元素不会水平显示？

> ID：13715912
> 
> 赞同：0
> 
> 时间：2012-12-05T03:38:30.573
> 
> 标签：html, css, alignment

我的网站有两个部分应该在类似的庄园中显示。一个显示正确，而另一个没有。顶部将每个元素放在自己的行中，而底部则将

上面和两个图像并排，我想要它们。我的两个问题是：1：为什么坏版本坏了？2：工作版本的哪些部分使其能够正确显示（或者更好的后续问题，css的哪些部分没有帮助它正确显示并且可以删除？

# 破碎的：

html:

```
<div id="maintitle">
<span id="chara1"><img src= "<?= $charused ?>" width="150" alt="char2"/></span>
<span id="maintitletext"><h1> Welcome to Born4battle's Wolfenstein 3D page</h1></span>
<span id="chara2"><img src= "<?= $charused ?>" width="150" alt="char2"/></span>
</div> 
```

CSS：

```
#maintitle{
color: #ffff00;
text-align: center;
}

#maintitle ul{
margin:0;
padding: 0;
list-style-type: none;
}

#maintitle li{
display: inline;
}

#chara1, #chara2, #maintitletext{
margin-top: 0px;
margin-right: auto;
margin-left: auto;
display: inline;
padding: .5em;
width: 110px;
} 
```

# 在职的：

html:

```
<div id="share">
<p> Get the official shareware for Wolfenstein 3D and Spear of Destiny below </p>
<span id="getwolf"><a href="ftp://download.dosgamesarchive.com/wolf3d.zip"><img src="http://www.timsooley.com/wolfnow.gif" alt="getwolf"></a></span>
<span id="getspear"><a href="ftp://download.dosgamesarchive.com/destiny.zip"><img src="http://www.timsooley.com/getspear.gif" alt="getspear"></a></span>
</div> 
```

CSS：

```
#share ul{
margin: 0;
padding: 0;
list-style-type: none;
}

#share li{
display:inline;
}

#getspear, #getwolf{
margin-top: 0px;
margin-right: auto;
margin-left: auto;
display: inline;
/*background: #bbbbbb;
border-top: solid 2px #333333;
border-left: solid 2px #333333;
border-right: solid 3px #999999;
border-bottom: solid 3px #999999;*/
padding: .5em;
width: 110px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:28:28.403

请参阅[小提琴](http://jsfiddle.net/Njh5Q/1/)。

阅读您的问题后，我的理解是您希望您的图像应该并排，文本应该在中间。在你损坏的代码中。

请让我知道我是否落后于某个地方。所以我可以根据您的需要进行更改。

查看我添加的css规则：

```
#maintitle{ color: #ffff00; text-align: center; overflow:hidden; width:480px; border:1px solid red; }

#maintitle span {   width:148px;    display:block;  font-size:12px; }

#chara1, #chara2, #maintitletext{ margin-top: 0px; margin-right: auto; margin-left: auto; display: inline; padding: .5em; width: 110px; float:left; // added to make all elements in horizontal manner } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:53:40.133

要在同一行中显示文本和图像，请在代码中进行以下更改：http: [//jsfiddle.net/S3CBj/2/](http://jsfiddle.net/S3CBj/2/)

```
#maintitle{
color: #ffff00;
text-align: center;
}

#maintitle ul{
margin:0;
padding: 0;
}

#chara1, #chara2, #maintitletext{
margin-top: 0px;
margin-right: auto;
margin-left: auto;
display: inline;
float: left;
padding: .5em;
width: 150px;
}​ 
```

# android - 在android中读取xml文件 - 解析

> ID：13715919
> 
> 赞同：1
> 
> 时间：2012-12-05T03:39:48.020
> 
> 标签：android, xml, string, list, xml-parsing

我是在 android 中读取 xml 文件的新手。我为此查了谷歌，但找不到合适的解决方案。

我希望解析这个 xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
        <key>aaaa</key>
        <array>
                <string>b</string>
                <string>c</string>
                <string>d</string>
                <string>e</string>
                <string>f</string>
        </array>
        <key>bbbb</key>
        <array>
                <string>g</string>
                <string>h</string>
                <string>i</string>
                <string>j</string>
                <string>k</string>
        </array>
</dict>
</plist> 
```

解析后希望得到如下对应：

aaaa [b,c,d,e,f] -> 一个列表/数组

bbbb [g,h,i,j,k] -> 一个列表/数组

换句话说，每个字符串（键）都应该对应于该键内的字符串数组。

我该怎么做？另外，我想知道应该在哪里放置 xml 文件。（它在 res/raw/ 文件夹中吗？如果是，那么文件的地址是什么？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:41:59.167

自己做的第一次抽奖：

```
public final class XMLManager {

public static HashMap<String, ArrayList<String>> getHmPlist(){

    HashMap<String, ArrayList<String>> hmPlist = null;

    try {

        hmPlist = new HashMap<>();
        Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new File("D:\\Loic_Workspace\\Test2\\res\\test.xml"));
        NodeList ndList = doc.getElementsByTagName("key");
        Integer keyLength = ndList.getLength();
        String keyValue = null;
        NodeList ndArray = null;
        Integer ndArrayLength = null;
        ArrayList<String> alElement = null;

        for(int i=0;i<keyLength;i++){
            alElement = new ArrayList<>();
            keyValue = ndList.item(i).getTextContent();
            if(keyValue != null){
                ndArray = ndList.item(i).getNextSibling().getNextSibling().getChildNodes();
                ndArrayLength = ndArray.getLength();
                for(int j=0;j<ndArrayLength;j++){

                    if(ndArray.item(j).getNodeName().equalsIgnoreCase("string")){
                        alElement.add(ndArray.item(j).getFirstChild().getTextContent());
                    }

                }

                hmPlist.put(keyValue, alElement);

            }

        }

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return hmPlist;

}

} 
```

为了回答您关于 res/raw/ 文件夹的问题。是的，您必须将 XML 放在该文件夹中，并通过 R 类在 Java 代码中使用它。

希望能帮助到你，

# java - 如何以动态大小居中 JPanel

> ID：13715921
> 
> 赞同：1
> 
> 时间：2012-12-05T03:39:56.467
> 
> 标签：java, swing, layout, resize, jpanel

我需要显示棋盘。我有一个扩展 JPanel 的 BoardPanel 类和一个包含 BoardPanel 的 GamePanel（也扩展 JPanel）类。GamePanel 填充所有应用程序框架。

我希望 BoardPanel 始终是一个正方形，其大小等于 GamePanel 的宽度和高度的最小值（如果 GamePanel 的宽度大于高度，则左侧和右侧应该有空白空间，如果它更小，则顶部和底部应该有空白空间）。BoardPanel 应该显示在父面板的中心也很重要。

我是这样写的：

```
public GamePanel() {
    setLayout(new BorderLayout(0, 0));
    boardPanel = new BoardPanel(...);
    this.add(boardPanel, BorderLayout.CENTER);
    ...
} 
```

在 BoardPanel 中：

```
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    int size = Math.min(this.getParent().getHeight(), this.getParent().getWidth());
    this.setSize(size, size);
    ...
} 
```

它可以很好地调整大小，但棋盘始终显示在 GamePanel 的左上角（所有空白区域都显示在机器人或右侧），我不知道如何修复它。

有什么帮助吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T07:37:28.027

使用`GridBagLayout`.

![居中的方形面板](../Images/5671dfdbff308c89c56c3442012fe3c3.png)

```
import java.awt.*;
import javax.swing.*;

public class CenteredPanel {

    public static void main(String[] args) {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                JPanel gui = new JPanel(new GridBagLayout());
                JPanel square = new SquarePanel();
                square.setBackground(Color.RED);
                gui.add(square);

                JFrame f = new JFrame("SquareBoard");
                f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                f.setLocationByPlatform(true);
                f.add(gui);
                f.setMinimumSize(new Dimension(400,100));
                f.pack();
                f.setVisible(true);
            }
        };
        SwingUtilities.invokeLater(r);
    }
}

class SquarePanel extends JPanel {
    @Override
    public Dimension getPreferredSize() {
        Container c = this.getParent();
        int size = Math.min(c.getHeight(), c.getWidth());
        Dimension d = new Dimension(size,size);
        return d;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T06:39:35.107

*   无需`new BorderLayout(0,0)`简单地使用默认构造函数`BorderLayout`

*   不要像这样调用而`setSize()`不是覆盖：`getPreferredSize()``JPanel`

    ```
    @Override
    public void getPreferredSize() {

            int size = Math.min(this.getParent().getHeight(), this.getParent().getWidth());

           return new Dimension(size,size);
    } 
    ```

*   在你的工作中也没有什么好处，`paintComponent`因为这应该只用于绘画。

如果上述方法不起作用，我建议您使用[SSCCE](http://sscce.org)来说明您可能遇到的具体问题

# android - 在应用程序启动器中实现快捷文本格式

> ID：13715937
> 
> 赞同：1
> 
> 时间：2012-12-05T03:42:33.187
> 
> 标签：android, text, android-launcher

我想将我的快捷方式文本格式化为与应用程序启动器中的快捷方式文本相同。太长的文字会被剪掉，尾巴会消失。有没有人知道该怎么做？

![在此处输入图像描述](../Images/4a35b9e6932cddecbf56406207ae4f3f.png)

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:45:33.863

添加`fadingEdge`到您的`TextView`定义中

```
android:fadingEdge="horizontal" 
```

但是，由于性能下降问题，不推荐使用此方法，并且仅应在应用程序的视觉设计需要时使用。

`API level 14`要请求具有及以上的衰落边缘，请使用

`android:requiresFadingEdge`属性

请参阅[文档](http://developer.android.com/reference/android/R.attr.html#fadingEdge)

# ruby-on-rails - Rails 用户跟踪活动

> ID：13715938
> 
> 赞同：0
> 
> 时间：2012-12-05T03:42:37.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3, notifications, tracking

我想跟踪网站上的用户活动。我试过`ActiveSupport::Notifications`但没有`user_id`或没有定义用户的东西。如我所见，有两种方法可以做到这一点：通过 ActiveRecord 查询和通过页面请求。`after_create`在第一种情况下，我应该使用模型（等）订阅所有可能的用户操作`after_destroy`，并且我有大约 20 个关联的模型，这是很多重复的代码。第二个-我不知道该怎么做，但对我来说似乎很简单。我没有使用设备或任何宝石。

也许在第一种方式中，我可以包含模块并在其中制作所有逻辑，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:20:34.933

每次用户进入任何页面时，通过添加 , ti 调用`before_filter :track_activity`解决了该问题。`ApplicationController`

# php - 这个 MySQL 查询不会运行的任何原因？

> ID：13715940
> 
> 赞同：1
> 
> 时间：2012-12-05T03:42:51.680
> 
> 标签：php, mysql, cron, truncate

我有以下 PHP 脚本设置每分钟作为 cron 作业运行：

```
<?php
$con = mysql_connect("localhost", "user", "pass");
if (!$con) {
    die("Database error");
}
mysql_query("TRUNCATE TABLE contact_ips");
mysql_close($con);
die();
?> 
```

此脚本是为了防止在 1 分钟内从同一个 IP 地址多次提交联系表单。因此，它应该清除提交表单的表的内容，而不是这样做。

可能是我的 cron 命令正常工作吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T03:49:27.360

首先，`mysql_query`被弃用。改为使用`mysqli`。

其次，您似乎想为查询设置一个变量，例如`$result = mysqli_query()`，您可以进行后处理。

您是否尝试向`die()`mysql 查询添加一个以检查该查询是否正在运行？

此外，您似乎还没有选择数据库。在连接代码之后添加它。`mysql_select_db("databaseName", $con);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T03:48:28.560

它应该是

```
<?php
$con = mysql_connect("localhost", "user", "pass");
if (!$con) {
    die("Database error");
}
mysql_select_db("database", $con);
mysql_query("TRUNCATE TABLE contact_ips");
mysql_close($con);
die();
?> 
```

# android - 如何为我的 Android apk 启用自动更新？

> ID：13715942
> 
> 赞同：4
> 
> 时间：2012-12-05T03:42:54.520
> 
> 标签：android, updates

我开发了一个简单的 Android 应用程序，可以在几台平板电脑上运行。它不在市场上 - 每个应用程序都是手动安装的。在未来的某个时候，我可能想要进行一些更改，但我不能要求每个用户都更新，所以它应该自己更新。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:51:24.447

这在库存设备上是不可能的。您可以做的最好的事情是下载一个新的 APK 文件并启动一个打开它的意图，这将把用户带到包安装程序按“安装”或“取消”

如果您的设备已植根并且您可以获得写入权限，`/data/app/`那么您可以下载 apk 文件并将其粘贴到该目录中以“安装”它。

# android - 在android中拆分路径名

> ID：13715944
> 
> 赞同：3
> 
> 时间：2012-12-05T03:43:09.293
> 
> 标签：android

我使用Environment从android中的sdcard获取路径..

我有一个文件夹路径：`/mnt/sdcard/DNTarie/MalinKundang`

我想要的只是取“MalinKundang”（文件夹路径中的姓氏），该怎么做？

谢谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T04:07:29.480

尽管这些`split`示例可以工作，但也许使用`File`该类可以说“更好”，以防万一您将代码移植到 Windows 或 MacOS：

```
String path = "/mnt/sdcard/DNTarie/MalinKundag";
String fileName = new File(path).getName(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T03:45:44.157

```
 String  ss = "/mnt/sdcard/DNTarie/MalinKundang";
  String[] arr = ss.split("/");
  System.out.println(ar[arr.length-1]);// Get last value in array 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T03:45:58.713

我相信

```
String path = "/mnt/sdcard/DNTarie/MalinKundag";
String stringYouWant = path.substring(path.lastIndexOf("/"), path.length()); 
```

应该这样做

# javascript - Nivo Slider 过渡未正确呈现并增加网页长度

> ID：13715947
> 
> 赞同：2
> 
> 时间：2012-12-05T03:43:27.673
> 
> 标签：javascript, jquery, nivo-slider

我正在 Rails 3.2 中开发应用程序并尝试将 Nivo Slider 添加到首页。加载后，过渡看起来像[这样](http://i.imgur.com/4hc1S.png)。其他过渡也有类似的扭曲。

当第一次转换发生时，页面的长度增加了数千个像素。我已经确定是#slider div 的大小在增加。这偶尔会重置，但后来我看到它再次重绘了数千个像素。

包含 Nivo 滑块的 div：

```
<div id="content">
<link href="/assets/nivo-slider-themes/default/default.css?body=1" media="screen" rel="stylesheet" type="text/css" />
  <div class="slider-wrapper theme-default">
  <div class="ribbon"></div>
  <div id="slider" class="nivoSlider">
    <img src="assets/index_slider_1.jpg">
    <img src="assets/index_slider_2.jpg">
    <img src="assets/index_slider_3.jpg">
  </div>
  <div id="htmlcaption" class="nivo-html-caption">
  </div>
</div> 
```

我使用的是 Nivo Slider 3.1 附带的默认打包 CSS 文件。

[包含问题的 JSFiddle](http://jsfiddle.net/KAdfV/)

是什么导致了过渡损坏，以及由于滑块 div 的长度增加而导致的页面长度增加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:50:24.930

您从 Nivo 使用的 CSS 文件导致了该错误。我从一个 Nivo 示例中获取了一个样式表，并将 jsfiddle 更新为：http: [//jsfiddle.net/ppDhT/](http://jsfiddle.net/ppDhT/)

```
<link rel='stylesheet' id='nivoslider-css'  href='http://nivo.dev7studios.com/wp-content/plugins/nivo-slider/scripts/nivo-slider/nivo-slider.css?ver=3.4.2' type='text/css' media='all' /> 
```

# matlab - 不使用循环将 3x3 矩阵乘以 3nx1 数组

> ID：13715949
> 
> 赞同：0
> 
> 时间：2012-12-05T03:43:35.377
> 
> 标签：matlab, matrix-multiplication

在我的代码中，我必须将一个矩阵`A`（维度 3x3）乘以一个向量`b1`（维度 3x1），得到`C`. 所以`C = A*b1`。现在，我需要重复这个过程，每次`n`保持`A`固定并更新到不同的 (3x1) 向量。`b`这可以使用循环来完成，但我想避免它以节省计算成本。相反，我想将其作为矩阵和向量乘积。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:46:22.020

您需要建立一个`b`向量矩阵，例如`n`等于 4：

```
bMat = [b1 b2 b3 b4]; 
```

然后：

```
C = A * bMat; 
```

在这种情况下，提供大小为 3x4 的解决方案。如果您想要长度为 3n x 1 的向量形式的解决方案，请执行以下操作：

```
C = C(:); 
```

我们可以在没有循环的情况下`bMat`为任意构造吗？`n`这取决于所有`b`向量的形式。如果您在评论中告诉我，我可以更新答案。

# c# - 通过 ESC/P 命令将位图写入 Epson TM88IV（写入 NVRam）

> ID：13715950
> 
> 赞同：3
> 
> 时间：2012-12-05T03:43:42.447
> 
> 标签：c#, .net, printing, command, epson

参考链接：

1.  [https://lh4.googleusercontent.com/-ceLtiOLVtME/UMBL1yf4RpI/AAAAAAAAAD0/itid5KibW_I/s1015/Doc1.png](https://lh4.googleusercontent.com/-ceLtiOLVtME/UMBL1yf4RpI/AAAAAAAAAD0/itid5KibW_I/s1015/Doc1.png)

2.  [https://lh6.googleusercontent.com/-nrphBDA6sjk/UMA_Ukh7ZSI/AAAAAAAAADY/LwjkgobOaBg/s846/MappingTable.png](https://lh6.googleusercontent.com/-nrphBDA6sjk/UMA_Ukh7ZSI/AAAAAAAAADY/LwjkgobOaBg/s846/MappingTable.png)

**更新**

我现在使用 LockBits 更改了图像转换，但失败了。有人可以给我一些建议吗？

```
 /// <summary>
    /// Orginal command Format in Decimal:
    /// 29[GS], 40[(], 76[L], pL, PH, 48(m), 67[fn], 48[a], kc1, kc2, b, xL, xH, yL, yH, c, [d1 -- dk]
    /// pL = Lower bit of sum of parameters (m to dk) = 11(m to c) + last bit of image
    /// pH = Higher bit of sum of parameters (m to dk) = 11(m to c) + last bit of image
    /// kc = Key Code of NVRam, kc1 = first bit of key code, kc2 = second bit of key code. P.S.: The key code will be hardcode H1.
    /// b = number of colors = 1
    /// xL & xH = Lower bit of image width, e.g. Width = 128 = 0x0080 then xL = 0x80, xH = 0x00
    /// </summary>
    /// <param name="pLogo"></param>
    public void LoadImageToPrinter(Bitmap pLogo)
    {
        BitmapData oBmpData = pLogo.LockBits(new Rectangle(0, 0, pLogo.Width, pLogo.Height), ImageLockMode.ReadOnly, pLogo.PixelFormat);

        //The list contains all the commands in Decimal format
        List<int> oCommandList = new List<int>();

        //k = (int((xL + xH × 256) + 7)/8) × (yL + yH × 256)

        string HexValueOfX = pLogo.Width.ToString("X4");
        string HexValueOfY = pLogo.Height.ToString("X4");

        //k
        int oExpectedImageByteCount = Math.Abs(oBmpData.Stride) * pLogo.Height;

        //Total bit used for parameters
        int oTotalParameterBitCount = 11 + oExpectedImageByteCount;

        //The hex value for the oTotalParameterBitCount
        string oTotalParameterBitCountInHex = oTotalParameterBitCount.ToString("X4").PadLeft(4, '0');

        //GS, (, L
        oCommandList.AddRange(new int[] { 29, 40, 76 });

        //pL
        oCommandList.Add(GetLowerHexValue(oTotalParameterBitCountInHex));

        //pH
        oCommandList.Add(GetHigherHexValue(oTotalParameterBitCountInHex));

        //m,  fn, a,  kc1, kc2, b
        oCommandList.AddRange(new int[] { 48, 67, 48, (int)'H', (int)'1', 1 });

        //xL, xH
        oCommandList.AddRange(new int[] { GetLowerHexValue(HexValueOfX), GetHigherHexValue(HexValueOfX) });

        //yL, yH, c
        oCommandList.AddRange(new int[] { GetLowerHexValue(HexValueOfY), GetHigherHexValue(HexValueOfY), 49 });

        //Append the image bit to the List
        byte[] oImageByte = new byte[oExpectedImageByteCount];
        IntPtr oPtr = oBmpData.Scan0;
        Marshal.Copy(oPtr, oImageByte, 0, oExpectedImageByteCount);
        pLogo.UnlockBits(oBmpData);

        //Clear NVRam
        mThermalPrinterLibrary.Write(new int[] { 29, 40, 76, 5, 0, 48, 65, 67, 76, 82 }.IntArrayToCharString());

        //Store graphics data
        mThermalPrinterLibrary.Write(oCommandList.ToArray().IntArrayToCharString());
        mThermalPrinterLibrary.Write(oImageByte);

        //Print the graphics data
        mThermalPrinterLibrary.Write(new int[] { 29, 40, 76, 6, 0, 48, 69, (int)'H', (int)'1', 1, 1 }.IntArrayToCharString());        
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T08:01:22.190

很多年前，我用 C 语言做过这个。我手头没有代码，但它不仅仅是一个片段。为此，您需要执行以下操作。

*   了解[BMP 文件格式](http://en.wikipedia.org/wiki/BMP_file_format)- 假设您正在从文件中读取位图。

*   查看 WINGDI.H（Microsoft Windows SDK），它具有文件头的 C 样式定义等：BITMAPFILEHEADER、BITMAPCOREHEADER、BITMAPINFOHEADER。

*   处理标题以确定位图是否满足您的要求（例如，为了简化处理，您可能要坚持位图正好是 128 x 98（BITMAPINFOHEADER.biWidth、BITMAPINFOHEADER.biHeight），有一个平面（BITMAPINFOHEADER.biPlanes = 1)，是单色的 (BITMAPINFOHEADER.biBitCount =1 )，未压缩 (BITMAPINFOHEADER.biCompression = 0)。这些限制不是绝对必要的，但会简化您的处理。

*   处理像素数组，并将其转换为 ESCPOS 转义序列所需的格式。

或者，您可能希望放弃使用 ESCPOS，而使用 OPOS / UPOS / POS for .NET，它提供了用于访问 POS 外围设备的更高级别的 API：POSPrinter 设备[公开了一种打印位图的方法](http://social.msdn.microsoft.com/Forums/en-US/posfordotnet/thread/cb323bd3-052a-4626-9615-846bf17ca79c)，并且避免了您需要自己做格式转换。您需要下载[Epson OPOS ADK](http://www.pos.epson-europe.com/support/drivers.htm)来执行此操作。祝你好运！

**更新**

> 而来自EPSON的文件就像地狱一样，不明白它需要什么。

[您对 Epson 的文件](http://support.epostraders.co.uk/support-files/documents/36/yLh-ESCPOS_AppProgGuideV10-05.pdf)有什么困难？也许您可以尝试就您不理解的部分提出具体问题。

**更新 2**

这里有一些提示：

*   **GS ( L pL pH m fn [params]** : pL 和 pH 是 16 位整数值的低位和高位字节，指定以下数据的字节长度（即**m fn [params]**）。

*   对于 fn = 67（定义 NV 数据栅格格式），格式为**GS ( L pL pH m fn a kc1 kc2 b xL xH yL yH [c d1...dk]1...[c d1...dk] b**其中 m = 48，fn = 67，a = 48。

*   kc1 和 kc2 是用于在打印时识别下载数据的键码

*   b 指定下载数据的颜色数，1 为单色，2 为双色。

*   xL 和 xH 是 16 位整数值的低位和高位字节，用于定义图像的点（像素）宽度。

*   yL 和 yH 是 16 位整数值的低位和高位字节，用于定义图像的点（像素）高度。

*   对于单色位图，将有一个块**c d1 ... dk**指定颜色**c**和像素数据。对于彩色位图，每种颜色有一个块**c d1 ... dk 。**

*   像素数据**d1 ... dk**有**k**个字节，其中 k = (width x (height+7))/8。位设置为 1 表示打印该点（像素）。

我不知道上面的内容是否比爱普生文档中的注释更清楚；如果不说你不明白哪些位。

**更新 3**

这是一个基于 128 宽度 x 98 高度位图的示例，如您的问题中所示，为简单起见为单色。

*   您需要 k = (int(width + 7)/8) × (height) = (int(128+7)/8) x 98 = 16 x 98 = 1568 字节的像素数据（bit = 1 表示点打印): d [1]至 d [1568]

*   假设颜色 c = 颜色 1 = 49 十进制 = 0x31 十六进制（也可以是 0x32 或 0x33）

*   宽度 = 128 = 0x0080，所以 xH = 0x00，xL = 0x80

*   高度 = 98 = 0x0062，所以 yH = 0x00，yL = 0x62

*   b = 颜色数 = 1

*   假设您的密钥是“H1”，即 kc1 = 'H' = 0x48 和 kc2 = '1' = 0x31

*   参数长度 = **m fn a kc1 kc2 b xL xH yL yH cd [1] ... d [1568]** = 11 + 1568 = 1579 = 0x062B 十六进制的长度，因此 pL = 0x2B，pH = 0x06。

因此，您发送的数据将是：

**GS ( L pL pH m fn a kc1 kc2 b xL xH yL yH cd [1] ...d [1568]**

十六进制：

1D 28 4C 2B 06 30 43 30 48 31 01 80 00 62 00 31 d [1] ... d [1568]

# javascript - 在二十一点中多次调用 Ajax

> ID：13715953
> 
> 赞同：0
> 
> 时间：2012-12-05T03:44:05.863
> 
> 标签：javascript, ajax

我正在使用 html、js、ajax 和 php 创建一个二十一点游戏。当玩家第一次加载游戏时，页面上会出现一个提示询问名称，这会转到 name.php，它会检查用户名是否在数据库中。如果没有，它会添加它。无论哪种情况，它都会在屏幕上显示玩家的姓名和银行总数。在我添加代码的下一部分之前，我的这部分代码运行良好。

当用户点击“hit”按钮时，hit.php 被调用，它现在应该只是从牌组表中拉出 1 张牌（稍后将完全实现 hit）并将其放置在屏幕上的“玩家”div 中. 但是，现在我有 2 个 ajax 调用，什么都没有发生，包括玩家姓名的原始提示。

第二次通话是否以某种方式干扰了第一次通话？

任何关于我应该如何处理 ajax 调用的建议将不胜感激。

```
var username;
var playerName = "";
var playerBank = 0;
var playerCard;
var playerHandValue = 0;
var dealerHandValue = 0;
var randomCardNumber;

function checkName() {
username = prompt("Welcome to Blackjack.\n Please enter your username");
if(document.getElementById('playerName').value == null) {
    ajaxName();
}   
click();
}

function printName() {
return playerName;
}

function printBank() {
return playerBank;
}
function ajaxName() {
var uName = username;
if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari 
    xmlhttpN=new XMLHttpRequest(); 
} 
else {// code for IE6, IE5 
    xmlhttpN=new ActiveXObject("Microsoft.XMLHTTP"); 
} 
xmlhttpN.onreadystatechange=function() { 
    if (xmlhttpN.readyState==4 && xmlhttpN.status==200) { 
        var elements = xmlhttpN.responseText.split("|");
        playerName = elements[0];

        playerBank = elements[1];
        document.getElementById('playerName').innerHTML = printName();
        alert(playerName);
        document.getElementById('playerBank').innerHTML = printBank();

    }
} 
xmlhttpN.open("POST","name.php",true); 
xmlhttpN.setRequestHeader('Content-type','application/x-www-form-urlencoded');
xmlhttpN.send("player="+username);
}
function click() {
document.getElementById('hit').onclick = function(){ ajaxButton(this);};
document.getElementById('stand').onclick = function(){ ajaxButton(this);};
document.getElementById('raiseBet').onclick = function(){ ajaxButton(this);};
document.getElementById('newGame').onclick = function(){ ajaxButton(this);};
}
function ajaxButton(buttonClicked) {
if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari 
    xmlhttpB=new XMLHttpRequest(); 
} 
else {// code for IE6, IE5 
    xmlhttpB=new ActiveXObject("Microsoft.XMLHTTP"); 
} 
xmlhttp.onreadystatechange=function() { 
    if (xmlhttpB.readyState==4 && xmlhttpB.status==200) { 
        var elements = xmlhttpB.responseText;
        if(buttonClicked.innerHTML == "HIT") {
            randomCardNumber = randNumber(1,52);
            playerCard = elements[0];
            document.getElementById('player').innerHTML = displayCard();
            xmlhttpB.open("POST","hit.php",true); 
            xmlhttpB.setRequestHeader('Content-type','application/x-www-form-urlencoded');
            xmlhttpB.send("card_id="+randomCardNumber);
        }
    }
if(buttonClicked.innerHTML == "STAND") {
    alert("stand");
}
if(buttonClicked.innerHTML == "RAISE BET") {
    alert("raise bet");
}
if(buttonClicked.innerHTML == "NEW GAME") {
    alert("new game");
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:22:40.067

您的浏览器中没有报告任何 JavaScript 错误，并且根本没有出现提示，并且单击 hit 时没有任何反应？听起来好像您根本没有调用 checkName() 或 click() 函数。您最近是否将它们重构为以前没有的方法？

在我看来， checkName 应该在页面加载后立即出现，所以如果还没有，请尝试在页面底部的脚本块中调用它。

# .htaccess - htaccess 重定向某个域的子文件夹

> ID：13715957
> 
> 赞同：0
> 
> 时间：2012-12-05T03:45:00.667
> 
> 标签：.htaccess, drupal-7, subdomain, subdirectory, drupal-domain-access

我有一个多子域多语言网站设置，我需要重定向某个域的语言子文件夹。例如。au.domain.com/us/request_uri 到 au.domain.com/en/request_uri。在其他域上需要忽略此规则。所有域都在相同的代码库上运行，并且都使用一个 htaccess 文件（drupal 安装与域访问模块）。不过，这不应该影响 htaccess 规则的设置方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:46:20.347

这是一种方法：

```
RewriteEngine On
RewriteRule ^us/(.*)$ http://au.domain.com/en/$1 [L,R=301] 
```

重定向：

`http://au.domain.com/us/anything`至

`http://au.domain.com/en/anything/`

**更新**

```
RewriteEngine On
RewriteRule http://au.domain.com/us/^(.*)$ http://au.domain.com/en/$1 [L,R=301] 
```

只会`http://au.domain.com/us/anything`被重定向到

`http://au.domain.com/en/anything/`

或者

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^au.domain\.com$ [NC]
RewriteRule ^us/(.*)$ http://au.domain.com/en/$1 [L,R=301] 
```

希望这可以帮助。

# iphone - 回到我的视图控制器时，为什么我的 iPhone UIToolBar 这么大？

> ID：13715958
> 
> 赞同：1
> 
> 时间：2012-12-05T03:45:16.960
> 
> 标签：iphone, xcode, uitoolbar

我在 Xcode 中有一个 UIToolbar，我正在使用 2 个 BarButtonItems 动态创建它，当我第一次进入页面时，它们的行为完全符合预期，但是如果我备份并返回，UIToolbar 会占据整个框架区域。

在我点击编辑按钮之前，行为应该没有 UIToolbar，此时它显示在底部。如果我点击取消按钮，UIToolbar 就会消失。这很完美。有一次，我点击后退按钮，然后单击按钮再次将我发送到此视图，UIToolbar 已接管。我仍然可以点击编辑按钮，UIToolbar 变成了底部的小按钮。如果我点击取消，它会一起消失。然后我可以单击编辑，它仍然是预期的视图。唯一的问题是当我第二次、第三次等第一次加载视图时。

我几乎觉得它从来没有被正确地释放过。我确实在 viewWillDisappear 方法上调用了 removeFromSuperview。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:19:01.743

这里 setFrame of `UIToolBar`in方法，如果你删除in`viewWillAppear:`也添加为你的子视图`self.view``UIToolBar``viewWillDisappear:`

```
-(void)viewWillAppear:(BOOL)animated{
    [yourToolBar setFrame:CGRectMake(0, 0, 320, 44)];// set frame which you want
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:52:26.343

只需您必须在类级别（在接口中）为您声明对象，然后`@synthesize`执行操作，`viewDidLoad`然后使用按钮为`UIView`

# c++ - 使用 C++ 中的列表制作图形

> ID：13715961
> 
> 赞同：0
> 
> 时间：2012-12-05T03:45:38.623
> 
> 标签：c++, list, graph

我得到了要工作的顶点列表。现在我试图将边缘放入每个顶点，但是当我尝试将相邻顶点放入原始顶点列表中的边缘时，它将不起作用。我使用一个迭代器来查找边缘开始处的顶点，并使用另一个迭代器来查找边缘（街道）结尾处的顶点。出于某种原因，当我尝试将边缘的顶点指针设置为顶点列表中的元素时，它不允许这样做。这是错误“错误 1 ​​错误 C2679：二进制 '='：未找到采用 'std::_List_iterator<_Mylist>' 类型的右手操作数的运算符”：

主要的：

```
#include<iostream>
#include<list>
#include <fstream>
#include<cmath>
#include <cstdlib>
#include <string>
#include<sstream>
#include "global.h"
#include "edge.h"
#include "vertex.h"
using namespace std;

int main ( int argc, char *argv[] ){
if(argc != 4){
    cout<< "usage: "<< argv[0]<<"<filename>\n";
}
else{

    ifstream map_file (argv[3]);

    if(!map_file.is_open()){
        cout<<"could not open file\n";
    }
    else{
        Edge tempe;
        Vertex tempx;

        std::string line;
        std::ifstream input(argv[3]);
        int xsect;
        int safety;
        int change = 0;
        int i = 0;
        int vert = 0;
        int adjvert = 0;
        int dist = 0;
        //k and m keep track of iteration through list
        int k = 0;
        int m = 0;
        std:string xname;

        std::list<Vertex> xSectionList;
        std::list<Edge> EdgeList;

        while (getline(input, line))
        {

          std::istringstream iss(line);
          if(line == "INTERSECTIONS:"){
              change =1;
              i = 0;
          }
          else if(line == "STREETS:"){
              change = 2;
              i = 0;
          }

          if( change ==1 && i != 0){
            iss >> xsect >> safety;

           std::getline(iss, xname);

           tempx.xsect = xsect;
           tempx.danger = safety;
           tempx.xstreets = xname;

           xSectionList.push_back(tempx);

          }

         else if(change ==2 && i!=0){ 

                iss >> vert >> adjvert >> dist;

              std::list<Vertex>::iterator it = xSectionList.begin();

              while(it->xsect != vert || k != xSectionList.size()+1) {
                it++;
                k++;
             }

              std::list<Vertex>::iterator tit = xSectionList.begin();

              while(tit->xsect != adjvert || m != xSectionList.size()+1) {
                tit++;
                m++;

             }

              //tempe.adjvertex = tit;
              tempe.distance = dist;
              it->EdgeList.push_back(tempe);
              it->EdgeList.begin()->adjvertex = tempx;
               //std::getline(iss, xname);
              }

           //cout<<xsect<< " " << safety << " " << xname<<endl;

          i++;
        }

        std::list<Vertex>::iterator kit = xSectionList.begin();
        std::list<Edge>::iterator lit = kit->EdgeList.begin();

        //std::cout << it->xsect<< " " << it->danger << " "<< it->xstreets;

        for(lit = kit->EdgeList.begin(); lit != kit->EdgeList.end(); lit++) {
            cout << kit->xsect << "" << lit->adjvertex->xsect << "" << lit->distance<< endl;
         }

        }
    }

getchar();
} 
```

标头顶点`

```
#ifndef VERTEX_H
#define VERTEX_H
#include<list>
#include<string>
#include "global.h"

struct Vertex_{
int xsect;
int danger;
std::string xstreets;

std::list<Edge> EdgeList;
/*struct Vertex_ *next;
struct Vertex_ *prev;*/
};

#endif 
```

边缘标头

```
#ifndef EDGE_H
#define EDGE_H

#include "global.h"
#include "vertex.h"
struct Edge_{
Vertex *adjvertex;
int distance;

/*struct edge *next;
struct edge *prev;*/
};

#endif 
```

文件示例我正在扫描交叉点是顶点和街道是边缘的数据：

```
397 0.6 Drachman and 27th
398 0.5 Drachman and 28th
399 0.3 Drachman and 29th
400 0.8 Drachman and 30th

STREETS:
1   2   0.5
2   3   1.0
3   4   0.9
4   5   0.7
5   6   0.1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:18:56.360

除非这是家庭作业，否则我只会使用提升图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:56:16.937

迭代器的工作方式类似于指针，但它通常不是指针。你需要做类似的事情

```
tempe.adjvertex = &*tit; 
```

`*tit`获取迭代器当前所在的顶点，因此`&*tit`获取指向该顶点的指针。

# java - Java 程序（Tomcat）不断消耗内存（RES 在顶部）

> ID：13715966
> 
> 赞同：5
> 
> 时间：2012-12-05T03:46:17.763
> 
> 标签：java, memory-leaks, cpu-usage

我在 4-cpu 和 32GB 内存的 64 位机器上运行 Tomcat（操作系统是 CentOS 6.3）。我启动 Tomcat 的 Java 选项是`-server -Xms1024m -Xmx1024m -XX:PermSize=512m -XX:MaxPermSize=512m`

一开始，使用top的RES只有810MB，而且还在不断增加。在此期间，我运行`jmap -J-d64 -histo pID`检查 Java 内存堆，我认为 gc 工作正常，因为堆峰值为 510MB，gc 后约为 200MB。但是当 RES in top hit 1.1g 时，CPU 使用率会超过 100%，Tomcat 会挂掉。

用于在 CPU使用`jstack pid`率为 100% 时查看转储，名为“vm 线程”的线程几乎占用了 100% 的 CPU。我用谷歌搜索，它是 JVM gc 线程。所以我的问题是：为什么当 gc 工作正常时 res 会继续增长？我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:41:02.020

可能是permgen泄漏。如果您说您的堆保持在 ~500Mb，并且 -XX:MaxPermSize 设置为 512Mb，则完全 permgen 将为您提供大约 1gb 的内存使用量。

如果您在程序生命周期的后期加载了很多（比如，很多！）jsps，或者您使用`String.intern()`了很多，则可能会发生这种情况。

请按照此线程进行进一步调查：[如何转储 Permgen？](https://stackoverflow.com/questions/4080010/how-to-dump-permgen)

而这个用于调整 gc 以扫描 permgen 的线程[JVM 标志 CMSClassUnloadingEnabled 实际上是做什么的？](https://stackoverflow.com/questions/3334911/what-does-jvm-flag-cmsclassunloadingenabled-actually-do)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T03:52:26.537

如果垃圾收集线程以 100% 的速度旋转，那么它可能正在尝试执行垃圾收集，但无法收集任何对象，因此您处于垃圾收集死亡螺旋中，它一直在尝试运行但无法释放任何记忆。

这可能是因为您的程序中存在内存泄漏，或者因为您没有为 vm 提供足够的内存来处理您在常规使用期间加载的对象数量。听起来您有足够的空间来增加堆大小。这可能只会延长你进入死亡螺旋之前的时间，或者它可能会让你进入跑步状态。您将需要运行相当长一段时间的测试，以确保您不只是延迟不可避免的事情。

# php - 使用 join 构建单个 SQL 查询。可能吗？

> ID：13715969
> 
> 赞同：7
> 
> 时间：2012-12-05T03:46:30.940
> 
> 标签：php, mysql, sql

我有 6 个表，我将执行一条 sql 语句：

```
1)participant
  ***********
  +id_participant
  +id_poste
  +name
  +email

2) profile_formaion
  ****************
  +id_poste
  +id_formation

3) formation
  *********
  +id_formation
  +lable

4) poste
  *********
  +id_poste
  +label

5) session
  *********
  +id_session
  +id_formaion
  +lable

6) session_composition
  *********
  +id_session
  +id_participant 
```

`EXAMPLE:`

数据：参与者

```
1 | 2 | user1 | user1@mail.com
2 | 3 | user2 | user2@mail.com 
```

数据：profile_formation

```
2 | 3
2 | 4 
```

数据：编队

```
1 |formation1
2 |formation2
3 |formation3
4 |formation4 
```

数据：邮政

```
1 |Poste1
2 |Poste2
3 |Poste3 
```

数据：会话

```
1 |1   /* id_session 1 to id_formation 1  and id_formation=1 is formation1 */ 
```

数据：session_composition

```
1 |2  /* id_session 1 to id_participant 2 */ 
```

我在尝试：

```
SELECT 
    participant.id_participant,
    participant.id_poste,
    participant.name,
    participant.email,
    formation.lable 
FROM participant
INNER JOIN profile_formaion ON
    profile_formaion.id_poste = participant.id_poste 
INNER JOIN formation ON
    formation.id_formation = profile_formaion.id_formation 
```

如何使用 sql statement(join) 获取结果：

数据：结果

```
1 | 2 | user1 | user1@mail.com | poste2|formation3
1 | 2 | user1 | user1@mail.com | poste2|formation4
2 | 3 | user2 | user2@mail.com | poste3|formation1 // How can we join to get it. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:41:01.570

如果您不反对使用联合，您可以随时这样做：

```
select
    participant.id_participant,
    participant.id_poste,
    participant.name,
    participant.email,
    poste.label,
    formation.lable
from
    participant
    inner join poste on participant.id_poste = poste.id_poste
    inner join profile_formaion on participant.id_poste = profile_formaion.id_poste
    inner join formation on profile_formaion.id_formation = formation.id_formation

union all

select
    participant.id_participant,
    participant.id_poste,
    participant.name,
    participant.email,
    poste.label,
    formation.lable
from
    participant
    inner join poste on participant.id_poste = poste.id_poste
    inner join session_composition on participant.id_participant = session_composition.id_participant
    inner join session on session_composition.id_session = session.id_session
    inner join formation on session.id_formaion = formation.id_formation 
```

# node.js - 使用node.js（MongoDB？）的分布式数据库记录事件

> ID：13715970
> 
> 赞同：2
> 
> 时间：2012-12-05T03:46:34.870
> 
> 标签：node.js, mongodb, logging, frameworks, nosql

我正在寻找 node.js 的系统或库，它可以在每个远程服务器上记录有关客户端访问的信息，并自动在中央日志服务器上收集该信息以供以后分析。远程服务器将具有只写访问权限，而中央服务器将积累大量数据以读取。

我希望有使用分布式 [NoSQL] 数据库的解决方案，比如 MongoDB。但是我还没有找到如何设置它。

例如，我希望可以在中央日志服务器上启动清理旧数据（当数据已处理时），并且可以在远程服务器上删除旧日期的条目，而开销很小。

目前我们已经登录文件和Hadoop系统进行日志分析。但我认为我们需要在数据库中积累数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:29:00.257

[Winston](https://github.com/flatiron/winston)是目前最好的 node.js 日志框架，可以选择登录 MongoDB 或 CouchDB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:26:50.760

[Scribe](https://github.com/facebook/scribe)可能是您正在寻找的。也有[节点包](https://encrypted.google.com/search?q=scribe&q=site%3anpmjs.org&hl=en)

我从未检查过它，因此如果您对其进行调查并发现它好/坏、易于/难以设置等，我有兴趣在评论中阅读您的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T06:25:52.657

MongoDB 或任何其他分布式数据库都无法解决问题。必须创建内部项目。MongoDB 的一些特性供考虑：

[Capped Collections](http://docs.mongodb.org/manual/core/capped-collections/)实际上是一种松散数据的方式。我可能适合短历史。

# java - Android App dev 使用 webview 平板加载 flash

> ID：13715971
> 
> 赞同：0
> 
> 时间：2012-12-05T03:46:37.493
> 
> 标签：java, javascript, android

我是 android 新手，我创建了一个简单的应用程序来将 flash 播放器加载到 webview 中。我的 Flash 播放器包含一个演示文稿，该演示文稿保存在 assets 文件夹中的 2 个文件夹中 1 是 Data 文件夹 2 是 Player 和我的 player.html

该应用程序被安装到平板电脑中并开始运行，但是一旦加载栏到达一半，它就会保持这种状态而没有完成。

这是我的活动 Java 文件

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Window;
import android.webkit.WebChromeClient;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends Activity
 {
 final Activity activity = this;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
    setContentView(R.layout.activity_main);
    WebView webView = (WebView) findViewById(R.id.webView);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setPluginsEnabled(true);

    webView.setWebChromeClient(new WebChromeClient() {
        public void onProgressChanged(WebView view, int progress)
        {
            activity.setTitle("Loading...");
            activity.setProgress(progress * 100);

            if(progress == 100)
                activity.setTitle(R.string.app_name);
        }
    });

    webView.setWebViewClient(new WebViewClient() {
        @Override
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl)
        {
            // Handle the error
        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url)
        {
            view.loadUrl(url);
            return true;
        }
    });

    webView.loadUrl("file:///android_asset/player.html");
}

} 
```

这是我的 XML 文件

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center|top"
android:orientation="vertical"
android:padding="5dp" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dp"
    android:text="HTML in WEB View"
    tools:context="MainActivity" />

<WebView
    android:id="@+id/webView"
    android:hardwareAccelerated="true"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

我在清单上将硬件加速为 true

有人可以让我知道问题可能出在哪里。

我的假设是需要授予对资产文件夹的文件访问权限？我是否需要将所有文件放在不带子文件夹的 assets 文件夹中？Webview 是否在等待我单击一个不可见的弹出窗口，允许 Flash 访问文件？

非常感激您的帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:46:04.367

生成 flash 文件的应用程序返回一个答案，指出它与 android 开发不兼容。

# keytool - Java 的 keytool 别名的有效字符是什么？

> ID：13715975
> 
> 赞同：3
> 
> 时间：2012-12-05T03:47:13.733
> 
> 标签：keytool

Java 7 命令的“别名”中哪些字符有效`keytool`？

我找到了这个页面 - [http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/keytool.html](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/keytool.html) - 但它似乎没有详细解释什么是有效别名。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T04:12:24.120

for 的源`keytool`根本不验证它，它只是调用 的方法[`KeyStore`](https://docs.oracle.com/javase/8/docs/api/java/security/KeyStore.html)，所以它归结为将接受的内容，这似乎是任何字符串，受其Javadoc 中`KeyStore`区分大小写的*警告的影响。*

# linux - 并行程序给出错误“对 _Kmpc_ok_to_fork 的未定义引用”

> ID：13715979
> 
> 赞同：1
> 
> 时间：2012-12-05T03:47:45.557
> 
> 标签：linux, fortran, openmp, intel

我正在尝试在 linux 上编译 OPENMP fortran 代码。我有大约 230 个子程序。我用来编译代码的代码如下： 1）一开始我用下面的命令编译了每个子程序

```
ifort -c -override-limits -openmp *.for 
```

然后所有的子程序现在都有一个单独的目标文件。

2）然后我尝试通过以下命令将目标文件编译为可执行文件

```
ifort *.o -o myprogram 
```

我收到以下错误：

```
WINDWAVE.F90:(.text+0x1c9d): undefined reference to `__kmpc_global_thread_num'
WINDWAVE.F90:(.text+0x1cb0): undefined reference to `__kmpc_ok_to_fork'
WINDWAVE.F90:(.text+0x1eea): undefined reference to `__kmpc_fork_call'
WINDWAVE.F90:(.text+0x1f09): undefined reference to `__kmpc_serialized_parallel'
WINDWAVE.F90:(.text+0x214b): undefined reference to `__kmpc_end_serialized_parallel'
WINDWAVE.F90:(.text+0x2427): undefined reference to `__kmpc_for_static_init_4' 
WINDWAVE.F90:(.text+0x29c7): undefined reference to `__kmpc_for_static_fini'
WINDWAVE.F90:(.text+0x29da): undefined reference to `__kmpc_barrier'
WINDWAVE.F90:(.text+0x2a50): undefined reference to `__kmpc_for_static_init_4'
WINDWAVE.F90:(.text+0x3773): undefined reference to `__kmpc_for_static_fini'
WINDWAVE.F90:(.text+0x3786): undefined reference to `__kmpc_barrier'
WINDWAVE.F90:(.text+0x37fc): undefined reference to `__kmpc_for_static_init_4'
WINDWAVE.F90:(.text+0x4a58): undefined reference to `__kmpc_for_static_fini'
WINDWAVE.F90:(.text+0x4a6b): undefined reference to `__kmpc_barrier'
WINDWAVE.F90:(.text+0x4a8f): undefined reference to `__kmpc_single'
WINDWAVE.F90:(.text+0x4d18): undefined reference to `__kmpc_end_single'
WINDWAVE.F90:(.text+0x4d2b): undefined reference to `__kmpc_barrier'
WINDWAVE.F90:(.text+0x4da9): undefined reference to `__kmpc_for_static_init_4'
WINDWAVE.F90:(.text+0x4fc5): undefined reference to `__kmpc_for_static_fini'
WINDWAVE.F90:(.text+0x4fd8): undefined reference to `__kmpc_barrier'
WINDWAVE.F90:(.text+0x504e): undefined reference to `__kmpc_for_static_init_4'
WINDWAVE.F90:(.text+0x596f): undefined reference to `__kmpc_for_static_fini'
WINDWAVE.F90:(.text+0x5982): undefined reference to `__kmpc_barrier'
WINDWAVE.F90:(.text+0x59fb): undefined reference to `__kmpc_for_static_init_4'
WINDWAVE.F90:(.text+0x6369): undefined reference to `__kmpc_for_static_fini'
WINDWAVE.F90:(.text+0x637c): undefined reference to `__kmpc_barrier'
WINDWAVE.F90:(.text+0x63f2): undefined reference to `__kmpc_for_static_init_4'
WINDWAVE.F90:(.text+0x6b8d): undefined reference to `__kmpc_for_static_fini'
WINDWAVE.F90:(.text+0x6ba0): undefined reference to `__kmpc_barrier'
WINDWAVE.o: In function `windwave_mp_fetch_':
WINDWAVE.F90:(.text+0x9cfd): undefined reference to `__kmpc_global_thread_num'
WINDWAVE.F90:(.text+0x9d10): undefined reference to `__kmpc_ok_to_fork'
WINDWAVE.F90:(.text+0x9da0): undefined reference to `__kmpc_fork_call'
WINDWAVE.F90:(.text+0x9dbc): undefined reference to `__kmpc_serialized_parallel'
WINDWAVE.F90:(.text+0x9e59): undefined reference to `__kmpc_end_serialized_parallel'
WINDWAVE.F90:(.text+0xa0ea): undefined reference to `__kmpc_for_static_init_4'
WINDWAVE.F90:(.text+0xa109): undefined reference to `__kmpc_for_static_fini'
WINDWAVE.F90:(.text+0xa118): undefined reference to `__kmpc_barrier' 
```

我正在使用 intel 13 composer 来编译程序。我不知道如何使用与 libiomp5md 的链接。

请帮我摆脱这个错误。我尝试了几次，但我无法得到这个错误。

如果我不使用 openmp 标志，程序会运行，但它不会被视为 openmp 程序。

谢谢

贾巴巴

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T04:25:04.403

对英特尔论坛的快速浏览表明，您可能还需要`-openmp`第二个命令上的选项，以使其链接到 OpenMP 库。

你可以通过谷歌搜索自己找到这个`__kmpc_global_thread_num`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-21T07:55:01.210

我有同样的问题，搜索后，有人建议这种方法，对我有用。只需在调用 ifort 时添加此选项：

```
 -openmp -fpp -auto 
```

该问题可能是由于未链接到 mp 库引起的。

# css - 渐变前缀无法与 scss 和指南针一起正常工作

> ID：13715983
> 
> 赞同：2
> 
> 时间：2012-12-05T03:48:18.663
> 
> 标签：css, sass

我目前是 scss 和指南针的新手。我最近听说了它并尝试学习和处理我的项目。但是我正在使用命令行来编译 scss 文件。我从以下位置下载了指南针源文件：

[https://github.com/chriseppstein/compass/tree/stable/frameworks/compass](https://github.com/chriseppstein/compass/tree/stable/frameworks/compass)

我正在尝试通过指南针使用渐变。我将 _images 文件从 compass 文件夹导入并开始使用渐变。它给出了一个输出，但梯度不起作用。这是我的scss代码：

> @import "compass/css3/images";
> 
> .testgradient { 宽度：300px; 高度：300px；向左飘浮;
> 
> @包括背景（
> 
> ```
>  linear-gradient(top left, #333, #0c0) 
> ```
> 
> ); }

css输出：

```
.testgradient {
 width: 300px;  height: 300px;  float: left;
background: -owg(compact(linear-gradient(top left, #333333, #00cc00), false, false, false, false, false, false, false, false, false));
background: -webkit(compact(linear-gradient(top left, #333333, #00cc00), false, false, false, false, false, false, false, false, false));
background: -moz(compact(linear-gradient(top left, #333333, #00cc00), false, false, false, false, false, false, false, false, false));
background: -o(compact(linear-gradient(top left, #333333, #00cc00), false, false, false, false, false, false, false, false, false));
background: compact(linear-gradient(top left, #333333, #00cc00), false, false, false, false, false, false, false, false, false); } 
```

正如您在输出中看到的，前缀没有很好地定义。我厌倦了在谷歌上搜索，如果我做错了，请告诉我。

任何帮助将不胜感激。提前致谢。

编辑：我已经在我的 Windows pc 中安装了 ruby​​，并通过键入以下命令通过命令行安装 sass 和 compass。

```
 gem install compass
 gem install sass 
```

我已经使用这两个命令来安装 compass 和 sass 并进行编译

```
sass --watch --style compressed path1:path2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:59:14.847

嘿嘿，问题解决了。错误是我使用 sass 编译器进行编译

```
sass --watch --style compressed sass:css 
```

其实是

```
compass watch projectname 
```

如果我的问题不清楚，我很抱歉。请不要投反对票。

# java - 使用 javassist 修改在类构造函数中使用 getter 和 setter 的字段

> ID：13715986
> 
> 赞同：1
> 
> 时间：2012-12-05T03:48:37.727
> 
> 标签：java, constructor, javassist

我正在尝试使用 javassist 修改类构造函数中的以下字段：

```
Label Label1 = new Label(new StringBuilder().append(user.name));
Label Label2 = new Label(new StringBuilder().append(user.time.toString()); 
```

我想将文本添加到 2 个标签。可以使用 getText() 和 setText() 访问和设置文本。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:29:46.210

最简单的方法是使用 java 代码修改构造函数主体并让 javassist 创建字节码的能力。

因此，您可以轻松地执行以下操作：

```
ClassPool classPool = ClassPool.getDefault();
CtClass ctClass = classPool.get("package1.package2.ClassToInject");
    /* Notice that in this case I'm going for the default constructor
     * If you want another constructor you just have to materialize the CtClass, for
     * each parameter and pass them in the CtClass Array
     */
CtConstructor declaredConstructor = ctClass.getDeclaredConstructor(new CtClass[] {}); 
 /* Now that you have your constructor you can use insertAfter(), this means, it 
      * will be the last thing to be executed in the constructor. We'll rewrite the 
      * label1 field with our new value. Notice that the string in insertAfter 
      * argument is a regular, valid java code line.
      */
    declaredConstructor.insertAfter("Label1 = new package3.package4.Label(new StringBuilder().append(\"somePrefixMayBeAStringOrAVariableInScope\").append(user.name));");

    // and finally we write the bytecode
ctClass.writeFile("/somePathToPutTheInjectedClassFile/"); 
```

另请记住，如果您要添加的前缀而不是 String 是其他类中的静态字段，则您必须提供该类的完整限定名，例如：`.append(package1.package2.SomeClass.SomeField)`.

这是必需的，因为`imports`仅在源代码级别，当您查看 JVM 字节码时，所有类引用都指向完整的限定名称。

有关如何使用 Javassist 进行此类修改的更多信息，请参见 javasssist 的文档，第[4.1 节在方法体的开头/结尾插入源文本](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/tutorial/tutorial2.html#before)

**更新**

每当您为 javassist 编写 Java 代码以进行注入时，请记住您必须使用完全限定的类名，否则 javassist 的类池将无法找到导致`javassist.CannotCompileException`.

# jquery - 如何在 jquery 中正确验证空文本输入

> ID：13715987
> 
> 赞同：0
> 
> 时间：2012-12-05T03:48:38.653
> 
> 标签：jquery, html

这是我验证 html 表的 jQuery 代码：

```
function validation() {

    var alertValidation = "";
    var _qid = "";
    var _msg = "";

    $("[class*='q']").each(function (i) {
        var questions = parseInt($("[class*=q" + i + "_qnum]").text());
        var marks = parseInt($("[class*=q" + i + "_ans_text]").text());
        var txtinput = $("[class*=q" + i + "_mark]").val();
        _qid = questions;
        _msg = "You have errors on Question Number: " + _qid + "\n";

        if (txtinput == '' || txtinput == null) {
            alertValidation += "\n\u2022 You have not entered in a value for all the Indivdiaul Marks textbox\n";
        } else if (marks < '0') {

            alertValidation = "Your Total Marks Remaining does not equal 0 \n\n\u2022 You Need To Remove " + Math.abs(marks) + " Marks";
        } else if (marks > '0') {

            alertValidation = "Your Total Marks Remaining does not equal 0 \n\n\u2022 You Have " + marks + " Marks Remaining";
        }

        if (alertValidation != "") {
            return false; //Stop the each loop 
        }

    });

    if (alertValidation != "") {
        alert(_msg + alertValidation);
        return false;
    }

    return true;
} 
```

现在我觉得奇怪的是，如果剩余标记数高于 0 时的验证以及剩余标记数低于 0 时的验证在输出警报时完美运行，如下所示：

**大于 0：**

```
You have errors on Question Number: 1
Your Total Marks Remaining does not equal 0 

• You Have 7 Marks Remaining 
```

**小于 0：**

```
You have errors on Question Number: 1
Your Total Marks Remaining does not equal 0 

• You Need To Remove 3 Marks 
```

但是，当我尝试验证“每个答案的分数”部分下的文本输入是否为空时，它会在下面显示此消息：

```
You have errors on Question Number: NaN

• You have not entered in a value for all the Indivdiaul Marks textbox 
```

为什么它不能显示此验证的问题编号？

我遇到的另一个小问题是，即使我在“每个答案的标记”下的所有文本输入中输入了一个值，它仍然会在不应该这样做时显示上述验证消息警报。为什么它也这样做？

下面是一个示例 html 表：

```
<table border='1' id='markstbl'>
<thead>
<tr>
<th class='questionth'>Question No.</th>
<th class='answermarksth'>Marks per Answer</th>
<th class='noofmarksth'>Marks Remaining</th>
</tr>
</thead>
<tbody>

<tr class="questiontd">
<td class="questionnumtd q<?php echo$questionId?>_qnum" name="numQuestion" rowspan="1">1 <input type="hidden" name="q1_ans_org" class="q1_ans_org" value="5"><input type="hidden" name="q1_ans" class="q1_ans" value="5"></td>
<td class="answermarkstd">
<input class="individualMarks q1_mark"  q_group="1" name="answerMarks[]" class="individualtext" type="text" onkeypress="return isNumberKey(event)" maxlength="3" />
</td>
<td class="noofmarkstd q1_ans_text"  q_group="1" rowspan="1"><strong>5</strong></td>
</tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:30:14.813

尝试使用 alert($("[class*=q" + i + "_qnum]").text());

或使用 google chrome 或 firebug 进行调试，

我相信 each() 会捕获您的网络中不存在的类，或者它包含无法解析为 Int 的字符、空格，这会导致您的脚本中出现 NaN，请尝试检查一下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:53:52.973

您可以使用 length 来检查属性是否有空文本而不是 != ""

```
alertValidation.length > 0 
```

你能检查下面的代码吗

```
parseInt($("[class*=q" + i + "_qnum]").text()); 
```

如果此 $("[class*=q" + i + "_qnum]").text() 未定义，则 parseInt 将仅返回 NaN

谢谢

# sparql - 返回一个匹配在所有主题、谓词和对象中搜索文本字符串的列表 - 在一个查询中？

> ID：13715991
> 
> 赞同：1
> 
> 时间：2012-12-05T03:48:52.990
> 
> 标签：sparql, semantic-web, owl, allegrograph

我正在寻找包含其中包含特定文本字符串的匹配 URI 或文本节点列表。

这允许我搜索具有匹配字符串的任何主题，但我还想返回任何匹配的谓词或对象 - 所有这些都在同一个查询中。

```
select ?s ?p ?o WHERE {
  ?s ?p ?o .
  FILTER (REGEX(STR(?s), "SEARCHTEXT", "i"))
} 
```

知道如何修改吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:22:49.447

```
select ?s ?p ?o WHERE {
  ?s ?p ?o .
  FILTER ( REGEX(STR(?s), "SEARCHTEXT", "i") ||
           REGEX(STR(?p), "SEARCHTEXT", "i") ||
           REGEX(STR(?o), "SEARCHTEXT", "i") )
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T07:19:48.850

What use case do you intend this for? Since you want to search for it, your regular expression seems to express some valuable information about the tokens it matches on. If this is the case, it would seem sensible to mark up your data with some relation making this knowledge explicit!

A regex search as you intend seems sensible only in a very few cases, e.g. for a DBMS administration front end. If you just want to solve the problem, I would do something like this (in code, not as a query):

```
result = data.subjectSet().add(data.predicateSet()).add(data.objectSet())
FOREACH (token ε result) {
    result.remove(token) unless(token ≙ regex)
}
return result; 
```

# php - Joomla 2.5 Alphauserpoints 替代图像调整器

> ID：13715992
> 
> 赞同：1
> 
> 时间：2012-12-05T03:49:05.400
> 
> 标签：php, image, joomla, resize

在实现图像调整器脚本时遇到问题：

```
<?php
// Create image from file
switch(strtolower($_FILES['Filedata']['type']))
{
case 'image/jpeg':
         $image = imagecreatefromjpeg($_FILES['Filedata']['tmp_name']);
         break;
case 'image/png':
         $image = imagecreatefrompng($_FILES['Filedata']['tmp_name']);
         break;
case 'image/gif':
         $image = imagecreatefromgif($_FILES['Filedata']['tmp_name']);
         break;
}
// Target dimensions
$max_width = 240;
$max_height = 180;
// Get current dimensions
$old_width = imagesx($image);
$old_height = imagesy($image);
// Calculate the scaling we need to do to fit the image inside our frame
$scale   = min($max_width/$old_width, $max_height/$old_height);
// Get the new dimensions
$new_width = ceil($scale*$old_width);
$new_height = ceil($scale*$old_height);
// Create new empty image
$new = imagecreatetruecolor($new_width, $new_height);
// Resize old image into new
imagecopyresampled($new, $image,
0, 0, 0, 0,
$new_width, $new_height, $old_width, $old_height);

// Catch the imagedata
ob_start();
imagejpeg($new, NULL, 90);
$data = ob_get_clean();
// Destroy resources
imagedestroy($image);
imagedestroy($new);
?> 
```

到以下上传脚本：

```
<?php
/* *
         * upload avatar
         */
        function uploadavatar()
        {
                $app = JFactory::getApplication();

                $db = JFactory::getDBO();
                $user =  JFactory::getUser();           

                // load language for component media
                JPlugin::loadLanguage( 'com_media', JPATH_SITE );
                JPlugin::loadLanguage( 'com_media', JPATH_ADMINISTRATOR );

                $params = JComponentHelper::getParams('com_media');

                require_once( JPATH_SITE.DS.'components'.DS.'com_media'.DS.'helpers'.DS.'media.php' );

                define('COM_AUP_MEDIA_BASE_IMAGE', JPATH_ROOT.DS.'components'.DS.'com_alphauserpoints'.DS.'assets'.DS.'images');                

                // Check for request forgeries
                JRequest::checkToken( 'request' ) or jexit( 'Invalid Token' );

                $file            = JRequest::getVar( 'Filedata', '', 'files', 'array' );
                $folder         = JRequest::getVar( 'folder', 'avatars', '', 'path' );
                $format         = JRequest::getVar( 'format', 'html', '', 'cmd');
                $return         = JRequest::getVar( 'return-url', null, 'post', 'base64' );
                $referrerid = JRequest::getVar( 'referrerid', '', 'post', 'string' );
                $err            = null;

                // Set FTP credentials, if given
                jimport('joomla.client.helper');
                JClientHelper::setCredentialsFromRequest('ftp');

                // Make the filename safe
                jimport('joomla.filesystem.file');
                $file['name'] = JFile::makeSafe($file['name']);

                if (isset($file['name']) && $referrerid!='') {
                        $extention = JFile::getExt($file['name']);
                        $newnameavatar = strtolower($referrerid.'.'.$extention);

                        //chmod (COM_AUP_MEDIA_BASE_IMAGE.DS.$folder, 0755) ;
                        $filepath = JPath::clean(COM_AUP_MEDIA_BASE_IMAGE.DS.$folder.DS.$newnameavatar);
                        // erase old avatar
                        if ( file_exists($filepath) ) @unlink( $filepath );

                        if (!MediaHelper::canUpload( $file, $err )) {
                                if ($format == 'json') {
                                        jimport('joomla.error.log');
                                        $log = JLog::getInstance('upload.error.php');
                                        $log->addEntry(array('comment' => 'Invalid: '.$filepath.': '.$err));
                                        header('HTTP/1.0 415 Unsupported Media Type');
                                        jexit('Error. Unsupported Media Type!');
                                } else {
                                        JError::raiseNotice(100, JText::_($err));
                                        // REDIRECT
                                        if ($return) {
                                                $app->redirect(base64_decode($return));
                                        }
                                        return;
                                }
                        }

                        if (JFile::exists($filepath)) {
                                if ($format == 'json') {
                                        jimport('joomla.error.log');
                                        $log = JLog::getInstance('upload.error.php');
                                        $log->addEntry(array('comment' => 'File already exists: '.$filepath));
                                        header('HTTP/1.0 409 Conflict');
                                        jexit('Error. File already exists');
                                } else {
                                        JError::raiseNotice(100, JText::_('UPLOAD FAILED. FILE ALREADY EXISTS'));
                                        // REDIRECT
                                        if ($return) {
                                                $app->redirect(base64_decode($return));
                                        }
                                        return;
                                }
                        }

                        if (!JFile::upload($file['tmp_name'], $filepath)) {
                                if ($format == 'json') {
                                        jimport('joomla.error.log');
                                        $log = JLog::getInstance('upload.error.php');
                                        $log->addEntry(array('comment' => 'Cannot upload: '.$filepath));
                                        header('HTTP/1.0 400 Bad Request');
                                        jexit('ERROR. UNABLE TO UPLOAD FILE');
                                } else {
                                        JError::raiseWarning(100, JText::_('ERROR. UNABLE TO UPLOAD FILE'));
                                        // REDIRECT
                                        if ($return) {
                                                $app->redirect(base64_decode($return));
                                        }
                                        return;
                                }
                        } else {
                                // SAVE IN PROFIL USER ALPHAUSERPOINTS
                                $query = "UPDATE #__alpha_userpoints" .
                                "\n SET avatar='".$newnameavatar."'" .
                                "\n WHERE referreid='".$referrerid."' AND userid='" . $user->id . "'"
                                ;
                                $db->setQuery( $query );                        
                                if (!$db->query())
                                {
                                        JError::raiseError( 500, $db->getErrorMsg() );                  
                                        return false;
                                }

                                require_once (JPATH_SITE.DS.'components'.DS.'com_alphauserpoints'.DS.'helper.php');

                                if ($format == 'json') {
                                        jimport('joomla.error.log');
                                        $log = JLog::getInstance();
                                        $log->addEntry(array('comment' => $folder));
                                        jexit('Upload complete');
                                        // apply rule for upload avatar
                                        AlphaUserPointsHelper::userpoints( 'sysplgaup_uploadavatar', '', 0, $referrerid );

                                } else {
                                        $app->enqueueMessage(JText::_('UPLOAD COMPLETE'));

                                        // apply rule for upload avatar
                                        AlphaUserPointsHelper::userpoints( 'sysplgaup_uploadavatar', '', 0, $referrerid );

                                        // REDIRECT
                                        if ($return) {
                                                $app->redirect(base64_decode($return));
                                        }
                                        return;
                                }
                        }
                } else {
                        $app->redirect('index.php', 'Invalid Request', 'error');
                }
        }

}
?> 
```

我试图用 $image 替换 $file 字符串，但没有运气。我认为问题可能在于：

```
$file = JRequest::getVar( 'Filedata', '', 'files', 'array' ); 
```

没有得到与此相同的数据：

```
$_FILES['Filedata'] 
```

这就是为什么我可能会遇到问题。但是转换脚本本身会自行工作并获取图像数据，调整大小并返回图像，问题在于用当前脚本实现它。

如果我确实替换了这个：

```
$file = $_FILES['Filedata'] 
```

有了这个：

```
$file = JRequest::getVar( 'Filedata', '', 'files', 'array' ); 
```

它会检索相同的图像数据吗？

我通常可以做很多这样的事情，虽然这需要我一段时间，但这个让我卡住了。我还没有达到我可以知道如何使它工作的水平，我必须通过反复试验和研究和示例来做到这一点，这很困难。

我尝试将以下内容放在检查伪造注释下并删除 $file = ...。然后将其余的 $file 字符串更改为 $newfile，但没有运气，它要么返回错误，要么忽略调整大小脚本，取决于我是否删除 $file =... 等

```
// Target dimensions
$max_width = 240;
$max_height = 180;
// Get current dimensions
$old_width = imagesx($file);
$old_height = imagesy($file);
// Calculate the scaling we need to do to fit the image inside our frame
$scale   = min($max_width/$old_width, $max_height/$old_height);
// Get the new dimensions
$new_width = ceil($scale*$old_width);
$new_height = ceil($scale*$old_height);
// Create new empty image
$new = imagecreatetruecolor($new_width, $new_height);
// Resize old image into new
imagecopyresampled($new, file,
0, 0, 0, 0,
$new_width, $new_height, $old_width, $old_height);
// Catch the imagedata
ob_start();
imagejpeg($new, NULL, 90);
$filenew = ob_get_clean();
// Destroy resources
imagedestroy($file);
imagedestroy($new); 
```

# r - 微阵列数据：寻找没有缺失观测值的探针

> ID：13715993
> 
> 赞同：0
> 
> 时间：2012-12-05T03:49:08.990
> 
> 标签：r

很多时候，您会下载数据并想知道表达水平的差异。事情变得复杂，因为每个样本可以有多个探针。

在以下示例中，我们只有两个样本（即 1 和 4）：

你的`data`文件看起来像这样

```
 ProbeID      SampleID ExperimID    Value    Type
1 2747406        1         2      6.449200 AFFEXON
2 2747407        4         2      6.455550 AFFEXON
3 2747408        1         2      6.534564 AFFEXON
4 2747408        4         2      6.453523 AFFEXON
..etc 
```

要查看手头的问题，请提取样本 1 和 4 并查看向量长度是否匹配：

```
Sample1 <- data[ data$SampleID == 1, ]    #Extract from data where SampleID == 1
Sample4 <- data[ data$SampleID == 4, ]    #Extract from data where SampleID == 4
dim(Sample1)                              #Return length of row and col using dim()
[1] 1012703  5 
dim(Sample4)
[1] 1411399  5 
```

如上所示，样本之间的探针数量是不相等的。这将为下游分析创建不相等的向量长度，从而难以比较两个样本之间的表达水平。因此，您需要找到没有缺失观测值的探针（即我们想要具有 2 个命中或频率为 2 的探针，因为我们有 2 个样本，并忽略 1 个命中探针。这将产生相等的向量长度并允许我们比较两个样本之间的表达水平。

这是一种方法：

```
probeTbl <- table(data[,1])               #Export probes into a table
head(probTbl)                             #Notice freq! We don't want the 1 hit ones.
2315101 2315102 2315103 ... 
  2       1       1
probeToSample <- which(probeTbl == 2)     #Export only those with 2 observations
head(probeToSample)                       #Check that probes -> to new variable
2315101 2315102 2315103 ...
  1       2       3               
numericPtoS <- as.numeric                 #Extract probeToSample as numeric vector 
(names(probeToSample))

WorkingData <- data[,1] %in% numericPtoS  #Use %in% logic operator to match original         
                                           #data with new vector numericPtoS, which 
                                           #contains desired hits or observations == 2 
```

如果有人有更好的方法，请加注。。.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:34:28.590

这不是一个新颖的答案，但可能是一个更完整的示例和一些小的改进，以使其更加通用。

我的示例包括 2 个探针——一个存在于 3 个样本中，一个存在于 2 个样本中。我动态检查样本数量（而不是硬编码的`x==2`.

您能否确认这是您正在寻找的行为？如果是这样，也许我们可以从这里进一步改进。

```
data <- read.table(text="ProbeID      SampleID ExperimID    Value    Type
 1 2747406        1         2      6.449200 AFFEXON
 2 2747407        1         2      6.455550 AFFEXON
 3 2747406        4         2      6.349200 AFFEXON
 4 2747407        4         2      6.755550 AFFEXON
 5 2747406        5         2      6.755550 AFFEXON")

freq <- table(data[,1])      #Export the probes into a table (with frequencies) 
compProbes <- freq[freq==max(freq)]  #Create new variable that contains probes with NO missing obs by identifying the probe with the maximum number of occurrences
compProbes <- as.numeric(names(compProbes)) #Extract name as numeric vector 
compRows <- data[,1] %in% compProbes    #Use %in% logic operator to match z and with probes=TRUE
newdata <- data[compRows,] 
```

# javascript - Google Maps Javascript API 距离矩阵请求限制

> ID：13715995
> 
> 赞同：3
> 
> 时间：2012-12-05T03:49:43.360
> 
> 标签：javascript, google-maps-api-3

Google Maps API 中的距离矩阵请求仅限于 25 个目的地。我希望能够使用地理位置获取我当前的位置，并根据我编译的火车站地址数据库找到最近的火车站。我的问题是我的数据库可能包含 100 多个火车站，所以我需要将我的一个大距离矩阵请求拆分为多个小距离矩阵请求。当 Google Maps API 返回结果时，它会规范化地址的格式，这使得很难以编程方式将响应与基于地址字符串的原始数据库行配对。此外，这些是异步请求，这意味着响应可以按任何顺序出现。是否有某种方法可以将索引传递给回调函数，以便我可以将响应与请求配对？处理此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:49:01.800

使用直线距离（可以直接从地理坐标使用半正弦公式计算）对火车站进行初始切割。仅将 25 个最近的站点发送到距离矩阵。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T11:09:20.850

如果您将 lat/lng 坐标存储在数据库中，则可以使用[Haversine 公式](http://en.wikipedia.org/wiki/Haversine_formula)查找最近的车站。这个[DEMO](http://daviestrachan.co.uk/maps/stationmap8a.php)使用了这种技术。该数据库来源于从[Geonames获得的数据](http://www.geonames.org/)

# xna - SpriteBatch 未绘制到屏幕上

> ID：13715999
> 
> 赞同：2
> 
> 时间：2012-12-05T03:50:26.943
> 
> 标签：xna, spritebatch

当游戏重置但 spritebatch 未绘制时，我正在尝试将快速加载精灵绘制到屏幕上。我在*game.spritebatch.begin() 上放了一个断点；*当我跨步时，什么都没有画出来。有任何想法吗？

这是我的重置功能

```
public void Reset()
{
    loadingScreen = game.Content.Load<Texture2D>("Textures\\loadingScreen");
    game.spriteBatch.Begin();
    game.spriteBatch.Draw(loadingScreen, Vector2.Zero, null, Color.Black, 0.0f, Vector2.Zero, 0.5f, SpriteEffects.None, 0f);
    game.spriteBatch.End();
    cameraPosition = original_cameraPosition;
    players.Clear();
    furthest = 0;
    enemies.Clear();
    LoadEnemies();
    ActivatePlayers();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:26:27.107

您可能没有在正确的位置轮询它。纹理reset( `loadingScreen = game.Content.Load<Texture2D>("Textures\\loadingScreen"`) 只能执行一次，否则会大量浪费资源。

另一方面的渲染代码：

```
 game.spriteBatch.Begin();
    game.spriteBatch.Draw(loadingScreen, Vector2.Zero, null, Color.Black, 0.0f, Vector2.Zero, 0.5f, SpriteEffects.None, 0f);
    game.spriteBatch.End(); 
```

这需要不断轮询，否则它只会呈现几毫秒，之后您将无法看到它。将渲染代码放在渲染方法中，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T14:36:47.307

你试过使用`Color.White`吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T14:40:32.133

在默认配置中，XNA 使用**双缓冲**。您所有的绘制命令都在发生 - 但结果被绘制到后**缓冲区**。您需要将其与前端缓冲区交换，以便结果出现在屏幕上。

通常这是为您完成的。游戏将在循环中调用`Update`, `BeginDraw`, `Draw`, `EndDraw`（这些是`Game`您可以在自己的游戏类中覆盖的方法）。`EndDraw`will call的默认实现，`GraphicsDevice.Present`它将交换缓冲区。

我的印象是，作为一个加载屏幕，你是在主游戏循环之外的某个地方绘制的。您可以调用`GraphicsDevice.Present`自己以翻转缓冲区。

其他一些提示：

*   你可以做相反的事情——并阻止 XNA 自动绘制——通过覆盖`BeginDraw`并返回 false。或打电话`SupressDraw`。（或者您可以通过覆盖`EndDraw`而不调用该`base`方法来防止交换。）

*   `SpriteBatch`，默认情况下，将缓冲所有绘图，直到`End`被调用。之后`Present`打电话。