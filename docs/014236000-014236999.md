# StackOverflow 问答 14236000-14236999

# php - 停止循环复制内容

> ID：14236004
> 
> 赞同：0
> 
> 时间：2013-01-09T13:13:59.427
> 
> 标签：php, sql, foreach, wordpress

我正在尝试修改的 wordpress 插件中有一个循环。

```
$dataarray = explode(',',$data);
foreach ($dataarray as $entry){
    $sql .= "OR ID = '$entry' ";
}   

$endvar = wp_parse_args( $var, $defaults );
extract( $endvar, EXTR_SKIP );
$sql = preg_replace("/^OR./","", $sql); 
$order = $endvar['order_by'];
$my_posts = $wpdb->get_results("SELECT * FROM $table_name2 WHERE $sql ORDER BY $order");
$mod_url = mfp_create_link_url();

foreach ($my_posts as $entry){
    echo get_the_post_thumbnail($entry->ID, 'thumbnail');
    $fav_post .= $entry_before."<a href='".get_permalink($entry->ID)."' title='".$entry->post_title."' class='".$endvar['link_class']."'>".$entry->post_title."</a>".$entry_after;
    echo $fav_post;
    echo pippin_excerpt_by_id($entry);
} 
```

这显示；

```
<thumbnail-1>
   <title-1>
     <excerpt-1>
<thumbnail-2>
   **<title-1>**
   <title-2>
     <excerpt-2> 
```

我不明白为什么它显示`<title-1>`两次，而其他只显示一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:26:37.450

在您要附加的循环中

```
$fav_post .= 
```

然后回响

```
echo $fav_post; 
```

切勿在循环内将其设置为空白。删除句号或只是回显该行

```
echo $entry_before."<a href='"... 
```

# ios - 显示警报时可以显示键盘吗？

> ID：14236005
> 
> 赞同：0
> 
> 时间：2013-01-09T13:13:59.873
> 
> 标签：ios, objective-c, ipad

我的应用程序显示警报，如果用户没有关闭它，那么应用程序可以在此警报下显示另一个视图。这个新视图包含文本字段，问题是我在这个字段上调用 ​​becomeFirstResponder 但键盘没有显示。我的问题是是否有可能在显示警报时显示键盘？我想在解除警报之前不显示键盘是有道理的——它可能是默认的 iOS SDK 行为来阻止键盘，但这是客户向我报告的一个问题......更有经验的人可以帮助我吗？

注意：这与以下问题不同，因为我在警报中没有文本字段，而是在警报下查看。 [除非重新打开应用程序，否则不会显示 UIAlertView 键盘](https://stackoverflow.com/questions/11563461/uialertview-keyboard-doesnt-get-shown-unless-app-is-re-opened)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:28:02.740

您可以在警报时打开键盘，但为此您必须在 alertview 上添加 testFiled 并使其成为 FirstResponder

# spring - 如何在spring security中同时实现AuthenticationEntryPoint和AuthenticationProvider

> ID：14236014
> 
> 赞同：1
> 
> 时间：2013-01-09T13:14:32.393
> 
> 标签：spring, authentication, spring-security

嗨 Spring Security 专家。

**我的要求。**

我有两组用户界面。一组是登录和注销，需要使用基本身份验证（使用用户名密码凭据）由 spring security 保护。我使用 `HybridAuthenticationProvider`实现`AuthenticationProvider`并实现了它。

第二个和其余的 UI 需要通过在 HTTP Header 中传递令牌来支持。我使用`CustomAuthenticationEntryPoint`实现`AuthenticationEntryPoint`+`GenericFilterBean`并且可以实现它。

现在我想制作单个 spring-security.xml 来实现以上两个功能。最终，我结合了一组 UI 页面，其中我想通过凭据 ( `AuthenticationProvider`) 保护登录/注销页面和我想用令牌 ( `AuthenticationEntryPoint`) 保护的其余 UI。

当我将所有内容放在 spring-security.xml 中（如下所述）时，我得到以下异常。

**例外 ：**

> 例外是 org.springframework.beans.factory.BeanCreationException：创建名为 'org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0' 的 bean 时出错：无法解析对 bean 'org.springframework.security.authentication.ProviderManager#0 的引用' 同时设置 bean 属性 'authenticationManager'; 嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名称为“org.springframework.security.authentication.ProviderManager#0”的 bean 时出错：无法解析匹配的构造函数（提示：为简单参数指定索引/类型/名称参数避免类型歧义）在 org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)

示例 Spring-security.xml

```
<security:http auto-config="true" authentication-manager-ref="hybridAuthenticationProvider">
    <security:intercept-url pattern="/auth/login" access="ROLE_USER" />
</security:http>

<security:http realm="Protected API" use-expressions="true"
    auto-config="false" create-session="stateless" entry-point-ref="CustomAuthenticationEntryPoint">
    <security:custom-filter ref="authenticationTokenProcessingFilter"
        position="FORM_LOGIN_FILTER" />
    <security:intercept-url pattern="/welcome"
        access="isAuthenticated()" />
</security:http>

<bean id="CustomAuthenticationEntryPoint"
    class="com.ckatudia.tutorial.authentrypoint.CustomAuthenticationEntryPoint" />

<bean id="authenticationTokenProcessingFilter"
   class="com.ckatudia.tutorial.authentrypoint.AuthenticationTokenProcessingFilter" />

<bean id="TokenUtils"
    class="com.ckatudia.tutorial.authentrypoint.TokenUtils" />

<bean id="authenticationManager"
    class="com.ckatudia.tutorial.auth.TokenAuthenticationProvider" />

<bean id="hybridAuthenticationProvider"
      class="com.ckatudia.tutorial.auth.HybridAuthenticationProvider">
</bean>  

<security:authentication-manager>
    <security:authentication-provider ref="hybridAuthenticationProvider"/>
</security:authentication-manager> 
```

我删除了 authentication-manager-ref="hybridAuthenticationProvider" 然后我在部署时遇到了以下异常。

**例外 ：**

> org.springframework.beans.factory.BeanCreationException：创建名为“org.springframework.security.filterChainProxy”的bean时出错：调用init方法失败；嵌套异常是 java.lang.IllegalArgumentException：通用匹配模式 ('/**') 在过滤器链中的其他模式之前定义，导致它们被忽略。请检查您的安全性中的顺序：http 命名空间或 FilterChainProxy bean 配置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T18:12:45.517

你有这个例外，因为 http 元素的“模式”属性默认为“/**”。由于您有两个没有特定模式的“http”元素，因此采用默认值，它们每个都覆盖相同的 uis 集。

尝试在两者上添加不同的模式：

```
<http pattern="/foo/**" ... >
  ...
</http>

<http pattern="/bar/**" ... >
  ...
</http> 
```

# c# - Asp MVC 4 创建类似于 Html.BeginForm 的自定义 html 帮助器方法

> ID：14236017
> 
> 赞同：17
> 
> 时间：2013-01-09T13:14:39.710
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-4

我有以下html：

```
<div data-bind="stopBindings">

    <div data-viewId="languageList" data-bind="with: viewModel">
       <table>
              <tr>
                   <td ><label for="availableLanguages">Available Languages:</label></td>
              </tr>
       <table>
    </div>

</div> 
```

我想制作一个自定义的 html 助手并像这样使用它（类似于`Html.BeginForm`）

```
@Html.BeginView()
{
    <table>
        <tr>
            <td ><label for="availableLanguages">Available Languages:</label></td>
        </tr>
    </table>
} 
```

我开始制作我的辅助方法

```
public static class BeginViewHelper
    {
        public static MvcHtmlString BeginView(this HtmlHelper helper, string viewId)
        {

            var parentDiv = new TagBuilder("div");
            parentDiv.MergeAttribute("data-bind", "preventBinding: true");
            return new MvcHtmlString();
        }

    } 
```

我阅读了如何制作基本的 html 助手，但我看到的示例并没有告诉我如何在我的情况下制作它。我对 asp mvc 很陌生，每一个帮助都将不胜感激。

更新 2：

显然我错过了一些东西。在我看来，我这样称呼：

```
@Html.BeginView()
{
    <table>
        <tr>
            <td ><label >test</label></td>
        </tr>
    </table>
} 
```

一切似乎都很好，它甚至有智能感知。但是浏览器中的输出如下：

```
Omega.UI.WebMvc.Helpers.BeginViewHelper+MyView { 

test

 } 
```

这是我的辅助方法：

```
namespace Omega.UI.WebMvc.Helpers
{
    public static class BeginViewHelper
    {
        public static IDisposable BeginView(this HtmlHelper helper)
        {
            helper.ViewContext.Writer.Write("<div data-bind=\"preventBinding: true\">");
            helper.ViewContext.Writer.Write("<div data-viewId=\"test\">");

            return new MyView(helper);
        }

        class MyView : IDisposable
        {
            private HtmlHelper _helper;

            public MyView(HtmlHelper helper)
            {
                this._helper = helper;
            }

            public void Dispose()
            {
                this._helper.ViewContext.Writer.Write("</div>");
                this._helper.ViewContext.Writer.Write("</div>");
            }
        }
    }
} 
```

我已经在 ~/Views/web.config 中注册了命名空间

```
 <add namespace="Omega.UI.WebMvc.Helpers" /> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-09T13:26:10.740

您不能返回 MvcHtmlString。取而代之的是，您应该将 html 写入编写器并返回实现 IDisposable 的类，并且在调用 Dispose 期间将编写 HTML 的关闭部分。

```
public static class BeginViewHelper
{
    public static IDisposable BeginView(this HtmlHelper helper, string viewId)
    {
        helper.ViewContext.Writer.Write(string.Format("<div id='{0}'>", viewId));

        return new MyView(helper);
    }

    class MyView : IDisposable
    {
        private HtmlHelper helper;

        public MyView(HtmlHelper helper)
        {
            this.helper = helper;
        }

        public void Dispose()
        {
            this.helper.ViewContext.Writer.Write("</div>");
        }
    }
} 
```

如果您有更复杂的结构，您可以尝试使用 TagBuilder：

```
TagBuilder tb = new TagBuilder("div");
helper.ViewContext.Writer.Write(tb.ToString(TagRenderMode.StartTag)); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-09T13:52:30.537

[Slawek](https://stackoverflow.com/users/540884/slawek)有[正确的答案](https://stackoverflow.com/a/14236256/298053)，但我想我会用我的经验补充它。

我想创建一个助手来在页面上显示小部件（几乎就像 jQuery 的带有标题栏和内容部分的小部件）。大意是：

```
@using (Html.BeginWidget("Widget Title", 3 /* columnWidth */))
{
    @* Widget Contents *@
} 
```

MVC 源代码使用与 Slawek 发布的内容类似的内容，但我觉得将开始标签放在帮助程序中，将结束标签放在实际对象中并不“整洁”，也没有将问题放在正确的地方。如果我想改变外观，我现在在两个地方这样做，而不是我认为是一个合乎逻辑的地方。所以我想出了以下内容：

```
/// <summary>
/// Widget container
/// </summary>
/// <remarks>
/// We make it IDIsposable so we can use it like Html.BeginForm and when the @using(){} block has ended,
/// the end of the widget's content is output.
/// </remarks>
public class HtmlWidget : IDisposable
{
    #region CTor

    // store some references for ease of use
    private readonly ViewContext viewContext;
    private readonly System.IO.TextWriter textWriter;

    /// <summary>
    /// Initialize the box by passing it the view context (so we can
    /// reference the stream writer) Then call the BeginWidget method
    /// to begin the output of the widget
    /// </summary>
    /// <param name="viewContext">Reference to the viewcontext</param>
    /// <param name="title">Title of the widget</param>
    /// <param name="columnWidth">Width of the widget (column layout)</param>
    public HtmlWidget(ViewContext viewContext, String title, Int32 columnWidth = 6)
    {
        if (viewContext == null)
            throw new ArgumentNullException("viewContext");
        if (String.IsNullOrWhiteSpace(title))
            throw new ArgumentNullException("title");
        if (columnWidth < 1 || columnWidth > 12)
            throw new ArgumentOutOfRangeException("columnWidth", "Value must be from 1-12");

        this.viewContext = viewContext;
        this.textWriter = this.viewContext.Writer;

        this.BeginWidget(title, columnWidth);
    }

    #endregion

    #region Widget rendering

    /// <summary>
    /// Outputs the opening HTML for the widget
    /// </summary>
    /// <param name="title">Title of the widget</param>
    /// <param name="columnWidth">Widget width (columns layout)</param>
    protected virtual void BeginWidget(String title, Int32 columnWidth)
    {
        title = HttpUtility.HtmlDecode(title);

        var html = new System.Text.StringBuilder();

        html.AppendFormat("<div class=\"box grid_{0}\">", columnWidth).AppendLine();
        html.AppendFormat("<div class=\"box-head\">{0}</div>", title).AppendLine();
        html.Append("<div class=\"box-content\">").AppendLine();

        this.textWriter.WriteLine(html.ToString());
    }

    /// <summary>
    /// Outputs the closing HTML for the widget
    /// </summary>
    protected virtual void EndWidget()
    {
        this.textWriter.WriteLine("</div></div>");
    }

    #endregion

    #region IDisposable

    private Boolean isDisposed;

    public void Dispose()
    {
        this.Dispose(true);
        GC.SuppressFinalize(this);
    }

    public virtual void Dispose(Boolean disposing)
    {
        if (!this.isDisposed)
        {
            this.isDisposed = true;
            this.EndWidget();
            this.textWriter.Flush();
        }
    }

    #endregion
} 
```

然后，这使我们的助手更加清晰（并且在两个地方没有 UI 代码）：

```
public static HtmlWidget BeginWidget(this HtmlHelper htmlHelper, String title, Int32 columnWidth = 12)
{
  return new HtmlWidget(htmlHelper.ViewContext, title, columnWidth);
} 
```

然后我们可以像我在这篇文章顶部所做的那样使用它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T13:24:48.180

`BeginForm`asp.net mvc的方法返回该类的一个`IDisposable`实例`MvcForm`。如果您查看[codeplex 上的 asp.net mvc 代码](http://aspnetwebstack.codeplex.com)，您可以查看 asp.net mvc 团队是如何开发此功能的。

看看这些链接：

MvcForm 类（IDisposable） [http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/8b17c2c49f88#src/System.Web.Mvc/Html/MvcForm.cs](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/8b17c2c49f88#src/System.Web.Mvc/Html/MvcForm.cs)

表单扩展（用于 html 助手） [http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/8b17c2c49f88#src/System.Web.Mvc/Html/FormExtensions.cs](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/8b17c2c49f88#src/System.Web.Mvc/Html/FormExtensions.cs)

# c - libcurl 和特殊字符的转换

> ID：14236025
> 
> 赞同：0
> 
> 时间：2013-01-09T13:14:54.233
> 
> 标签：c, http, libcurl

我正在使用 libcurl 提供 HTTP GET 和 PUT 请求，请求包含登录名、密码和一些附加信息。

密码包含@符号 - 1qa@WS#ED 查询创建方式如下

```
snprintf(api_req, sizeof(api_req), "http://%s:%s@%s/export?uuid=%s",\
XEN.user_name,XEN.user_passwd, XEN.host_ip, BACKUP_TASK.vm_uuid)

http://root:1qa@WS#ED@192.168.1.1/export?uuid=4851501f-82d5-cb73-3158-175cffbbf848 
```

当然，此请求将失败，因为 @ 应转换为 %40，也适用于 ':'、点、百分号等，但这是任何操作系统和用户帐户的 OK 密码。处理此类问题的最佳方法是什么？用替换符解析每个符号的字符串符号似乎不是很有效。我正在使用纯 C

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:22:33.137

使用[**curl_easy_escape()**](http://curl.haxx.se/libcurl/c/curl_easy_escape.html)转义密码中的字符。

# c# - 当我通过c#调用vbs时需要禁用cmd弹出

> ID：14236027
> 
> 赞同：0
> 
> 时间：2013-01-09T13:15:14.713
> 
> 标签：c#

我在 vbs 脚本中使用了以下几行，该脚本从 C# 中调用了 .vbs。

```
objShell.Run("net stop msdtc"),1,True
objShell.Run("net start msdtc"),1,True 
```

在 c$ 中，用于调用具有管理权限的 .vbs 的以下代码。即使我将 WindowStyle 设置为隐藏，cmd 弹出窗口也会在运行时打开。我不想打开弹出窗口。请帮我

```
ProcessInfo = new ProcessStartInfo("cmd.exe", "/c " + @"cscript.exe DTCSECURITY.vbs");
ProcessInfo.WindowStyle = ProcessWindowStyle.Hidden;                
ProcessInfo.UserName = @"administrator";
ProcessInfo.Password = StringToSecureString("password12$");
ProcessInfo.WindowStyle = ProcessWindowStyle.Hidden;

process = Process.Start(ProcessInfo);
process.WaitForExit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:18:21.060

```
ProcessInfo.CreateNoWindow = true; 
```

> 创建无窗口：
> 
> 允许您静默运行命令行程序。它不会闪烁控制台窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:19:02.237

您应该指定`CreateNoWindow = true;`（请参阅[此处的文档](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.createnowindow.aspx)）。

`ProcessWindowStyle`指示[窗口](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.windowstyle.aspx)创建后的状态（根据最大化、最小化、可见等）。

# java - 在字节数组中查找特定字符？

> ID：14236029
> 
> 赞同：1
> 
> 时间：2013-01-09T13:15:19.347
> 
> 标签：java, android, arrays, string

我正在使用 android 中的库连接到终端仿真器，它连接到串行设备（开关）并向我显示发送/接收的数据。

但是我只是来回发送字节数组，所以我不知道交换机处于什么状态，是处于启用更多还是配置模式等。这导致我可能以错误的模式输入命令，它们将无法工作. 然后交换机处于不可恢复模式，因为我发送了错误的命令，无法删除它或进入新行。我现在要处理的问题是我不知道开关所处的模式。我知道在发送命令后可以有三种不同的返回提示：

```
switch>
switch#
switch(config)# 
```

所以我在想，如果我阅读收到的最后两个字符，我就可以知道我处于哪种模式。h>、h# 和 )#

我用这种方法取回数据，只要收到数据，就会运行：

```
public void onDataReceived(int id, byte[] data) 
{

    String str = new String(data);
    ((MyBAIsWrapper) bis).renew(data);

    mSession.write(str);
    mSession.notifyUpdate();
    viewHandler.post(updateView);
} 
```

最好的方法是以某种方式搜索字节数组或将其转换为字符串并在字符串中搜索 h>、h# 和 )#，然后我可以根据返回的值设置一个全局变量吗？也许从头向后搜索？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T13:21:00.303

我会搜索`byte[]`并避免转换为`String`.

如果从最后开始搜索性能更高，则取决于您获得的数据。我无法通过您在问题中发布的小例子来判断这一点。

如果只需要看最后两个字符：

```
if(data[data.length-2]=='h' && data[data.length-1]=='>') // "h>"

if(data[data.length-2]=='h' && data[data.length-1]=='#') // "h#" 
```

或者如果不是那么简单，使用循环来迭代数组。

Ps 我假设上面的代码是 ASCII 编码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:20:49.880

你的意思是？

```
if(str.endsWith("h>") || str.endsWith("h#") || str.endsWith(")#")) 
```

或更简单

```
if(str.equals("switch>") || str.equals("switch#") || str.equals("switch(context)#")) 
```

或使用正则表达式

```
final Pattern switched = Pattern.compile("switch(>|#|\\(\\w+\\)#)");

if(str.matcher(switched).matches()) 
```

# jsf - WebSphere 8：el-api.jar（在应用程序中）与 javax.j2ee.el.jar（在 WS 中）冲突

> ID：14236030
> 
> 赞同：3
> 
> 时间：2013-01-09T13:15:22.407
> 
> 标签：jsf, websphere-6.1, websphere-8

简而言之：有没有办法告诉 WebSphere 使用来自应用程序自己的 el-api.jar 的类，而不是来自（内置）javax.j2ee.el.jar 的类？

故事：我知道在将应用程序从 WAS 6.1 迁移到 WAS 8 期间，互联网上有关于此问题的讨论，但他们都没有明确提及这一点：

当 WAS 8 尝试从 el-api.jar（包含在 EAR 中）加载 javax.el.E​​xpressionFactory 时，整个事情就卡住了。但是，此时它已经从 javax.j2ee.el.jar 加载了它。（这在 WAS 6.1 中不存在。）如果您打开详细类加载：

类加载：javax.el.E​​xpressionFactory 来自：file:/C:/Program Files/IBM/WebSphere/AppServer/plugins/javax.j2ee.el.jar（在您安装应用程序之前！）

看来，由于在安装包含 el-api.jar 的应用程序的 EAR 之前已经加载了后一个 jar，因此 WAS 8 偶然发现了类加载冲突，无论您是否指定它使用 PARENT_LAST 类加载策略与否。

我可以在其中使用 javax.j2ee.el.jar 而不是 el-api.jar 来编译和安装应用程序，但一方面我不知道这可能会产生什么长期后果（我没有能够让它以任何一种方式运行），另一方面，最终目标是能够在 WAS 8 服务器上安装原始 EAR（包含其自己的 JSF 库等），并且尽可能少地进行修改。

有没有办法告诉 WAS 8 服务器从 el-api.jar 重新加载应用程序中可能存在冲突的类，或者甚至不首先加载 javax.j2ee.el.jar？（就像我提到的，指定 PARENT_CLASS 对此没有任何影响。）

谢谢。

当 WAS 8 尝试从 el-api.jar 加载 javax.el.E​​xpressionFactory 时抛出的异常（启动已安装的应用程序时）：

（对不起，它是德语，一些谷歌搜索将此错误消息的英语版本标识为：

```
'java.lang.LinkageError: loading constraint violation: loader "com/ibm/ws/classloader/CompoundClassLoader@1ef123a" previously initiated loading for a different type with name "javax/el/ExpressionFactory" defined by loader org/eclipse/osgi/internal/baseadaptor/DefaultClassLoader@1f75d64"')

java.lang.LinkageError: Übertretung der Ladeeinschränkung: Ladeprogramm "com/ibm/ws/classloader/CompoundClassLoader@1ef123a" hat zuvor das Laden für einen anderen Typ mit dem Namen "javax/el/ExpressionFactory", der durch Ladeprogramm "org/eclipse/osgi/internal/baseadaptor/DefaultClassLoader@1f75d64" definiert ist, eingeleitet.
at java.lang.ClassLoader.defineClassImpl(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:262)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:69)
at com.ibm.ws.classloader.CompoundClassLoader._defineClass(CompoundClassLoader.java:829)
at com.ibm.ws.classloader.CompoundClassLoader.localFindClass(CompoundClassLoader.java:744)
at com.ibm.ws.classloader.CompoundClassLoader.loadClass(CompoundClassLoader.java:585)
at java.lang.ClassLoader.loadClass(ClassLoader.java:627)
at java.lang.Class.getDeclaredFieldsImpl(Native Method)
at java.lang.Class.getDeclaredFields(Class.java:546)
at com.ibm.ffdc.util.formatting.Introspector$1.run(Introspector.java:138)
at com.ibm.ffdc.util.formatting.Introspector$1.run(Introspector.java:136)
at java.security.AccessController.doPrivileged(AccessController.java:254)
at com.ibm.ffdc.util.formatting.Introspector.getDeclaredFields(Introspector.java:135)
at com.ibm.ffdc.util.formatting.Introspector.formatTo(Introspector.java:94)
at com.ibm.ffdc.util.provider.IncidentStream$2.writeTo(IncidentStream.java:194)
at com.ibm.ffdc.util.provider.IncidentStream.write(IncidentStream.java:198)
at com.ibm.ffdc.util.provider.IncidentStream.write(IncidentStream.java:129)
at com.ibm.ffdc.util.formatting.JavaUtilFormatter.formatTo(JavaUtilFormatter.java:56)
at com.ibm.ffdc.util.formatting.JavaUtilFormatter.formatTo(JavaUtilFormatter.java:42)
at com.ibm.ffdc.util.provider.IncidentStream$2.writeTo(IncidentStream.java:194)
at com.ibm.ffdc.util.provider.IncidentStream.write(IncidentStream.java:198)
at com.ibm.ffdc.util.provider.IncidentStream.write(IncidentStream.java:129)
at com.ibm.ffdc.util.formatting.Introspector.formatTo(Introspector.java:109)
at com.ibm.ffdc.util.provider.IncidentStream$2.writeTo(IncidentStream.java:194)
at com.ibm.ffdc.util.provider.IncidentStream.write(IncidentStream.java:198)
at com.ibm.ffdc.util.provider.IncidentStream.write(IncidentStream.java:129)
at com.ibm.ws.ffdc.impl.DMAdapter.formatTo(DMAdapter.java:88)
at com.ibm.ffdc.util.provider.IncidentLogger.writeIncidentTo(IncidentLogger.java:63)
at com.ibm.ws.ffdc.impl.FfdcProvider.logIncident(FfdcProvider.java:205)
at com.ibm.ws.ffdc.impl.FfdcProvider.logIncident(FfdcProvider.java:136)
at com.ibm.ffdc.util.provider.FfdcProvider.log(FfdcProvider.java:251)
at com.ibm.ws.ffdc.impl.FfdcProvider.log(FfdcProvider.java:149)
at com.ibm.ffdc.util.provider.IncidentEntry.log(IncidentEntry.java:105)
at com.ibm.ffdc.util.provider.Ffdc.log(Ffdc.java:94)
at com.ibm.ws.ffdc.FFDCFilter.processException(FFDCFilter.java:114)
at com.ibm.wsspi.webcontainer.util.FFDCWrapper.processException(FFDCWrapper.java:6)
at com.ibm.ws.webcontainer.webapp.WebApp.notifyServletContextCreated(WebApp.java:1653)
at com.ibm.ws.webcontainer.webapp.WebAppImpl.initialize(WebAppImpl.java:410)
at com.ibm.ws.webcontainer.webapp.WebGroupImpl.addWebApplication(WebGroupImpl.java:88)
at com.ibm.ws.webcontainer.VirtualHostImpl.addWebApplication(VirtualHostImpl.java:169)
at com.ibm.ws.webcontainer.WSWebContainer.addWebApp(WSWebContainer.java:746)
at com.ibm.ws.webcontainer.WSWebContainer.addWebApplication(WSWebContainer.java:634)
at com.ibm.ws.webcontainer.component.WebContainerImpl.install(WebContainerImpl.java:422)
at com.ibm.ws.webcontainer.component.WebContainerImpl.start(WebContainerImpl.java:714)
at com.ibm.ws.runtime.component.ApplicationMgrImpl.start(ApplicationMgrImpl.java:1160)
at com.ibm.ws.runtime.component.DeployedApplicationImpl.fireDeployedObjectStart(DeployedApplicationImpl.java:1369)
at com.ibm.ws.runtime.component.DeployedModuleImpl.start(DeployedModuleImpl.java:638)
at com.ibm.ws.runtime.component.DeployedApplicationImpl.start(DeployedApplicationImpl.java:967)
at com.ibm.ws.runtime.component.ApplicationMgrImpl.startApplication(ApplicationMgrImpl.java:766)
at com.ibm.ws.runtime.component.ApplicationMgrImpl.startApplicationDynamically(ApplicationMgrImpl.java:1354)
at com.ibm.ws.runtime.component.ApplicationMgrImpl.start(ApplicationMgrImpl.java:2150)
at com.ibm.ws.runtime.component.CompositionUnitMgrImpl.start(CompositionUnitMgrImpl.java:445)
at com.ibm.ws.runtime.component.CompositionUnitImpl.start(CompositionUnitImpl.java:123)
at com.ibm.ws.runtime.component.CompositionUnitMgrImpl.start(CompositionUnitMgrImpl.java:388)
at com.ibm.ws.runtime.component.CompositionUnitMgrImpl.access$500(CompositionUnitMgrImpl.java:116)
at com.ibm.ws.runtime.component.CompositionUnitMgrImpl$1.run(CompositionUnitMgrImpl.java:663)
at com.ibm.ws.security.auth.ContextManagerImpl.runAs(ContextManagerImpl.java:5413)
at com.ibm.ws.security.auth.ContextManagerImpl.runAsSystem(ContextManagerImpl.java:5539)
at com.ibm.ws.security.core.SecurityContext.runAsSystem(SecurityContext.java:255)
at com.ibm.ws.runtime.component.CompositionUnitMgrImpl.startCompositionUnit(CompositionUnitMgrImpl.java:677)
at com.ibm.ws.runtime.component.CompositionUnitMgrImpl.startCompositionUnit(CompositionUnitMgrImpl.java:621)
at com.ibm.ws.runtime.component.ApplicationMgrImpl.startApplication(ApplicationMgrImpl.java:1246)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
at java.lang.reflect.Method.invoke(Method.java:611)
at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:49)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
at java.lang.reflect.Method.invoke(Method.java:611)
at sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:256)
at javax.management.modelmbean.RequiredModelMBean.invokeMethod(RequiredModelMBean.java:1085)
at javax.management.modelmbean.RequiredModelMBean.invoke(RequiredModelMBean.java:966)
at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:848)
at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:773)
at com.ibm.ws.management.AdminServiceImpl$1.run(AdminServiceImpl.java:1335)
at com.ibm.ws.security.util.AccessController.doPrivileged(AccessController.java:118)
at com.ibm.ws.management.AdminServiceImpl.invoke(AdminServiceImpl.java:1228)
at com.ibm.ws.management.commands.AdminServiceCommands$InvokeCmd.execute(AdminServiceCommands.java:251)
at com.ibm.ws.console.core.mbean.MBeanHelper.invoke(MBeanHelper.java:241)
at com.ibm.ws.console.appdeployment.ApplicationDeploymentCollectionAction.execute(ApplicationDeploymentCollectionAction.java:564)
at org.apache.struts.action.RequestProcessor.processActionPerform(Unknown Source)
at org.apache.struts.action.RequestProcessor.process(Unknown Source)
at org.apache.struts.action.ActionServlet.process(Unknown Source)
at org.apache.struts.action.ActionServlet.doPost(Unknown Source)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:595)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1214)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:774)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:456)
at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.invokeTarget(WebAppFilterChain.java:125)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:77)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:926)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1023)
at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.dispatch(WebAppRequestDispatcher.java:1384)
at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.forward(WebAppRequestDispatcher.java:193)
at org.apache.struts.action.RequestProcessor.doForward(Unknown Source)
at org.apache.struts.tiles.TilesRequestProcessor.doForward(Unknown Source)
at org.apache.struts.action.RequestProcessor.processForwardConfig(Unknown Source)
at org.apache.struts.tiles.TilesRequestProcessor.processForwardConfig(Unknown Source)
at org.apache.struts.action.RequestProcessor.process(Unknown Source)
at org.apache.struts.action.ActionServlet.process(Unknown Source)
at org.apache.struts.action.ActionServlet.doPost(Unknown Source)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:595)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1214)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:774)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:456)
at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.invokeTarget(WebAppFilterChain.java:125)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:92)
at com.ibm.ws.console.core.servlet.WSCUrlFilter.setUpCommandAssistance(WSCUrlFilter.java:950)
at com.ibm.ws.console.core.servlet.WSCUrlFilter.continueStoringTaskState(WSCUrlFilter.java:499)
at com.ibm.ws.console.core.servlet.WSCUrlFilter.doFilter(WSCUrlFilter.java:320)
at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:192)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:89)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:926)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1023)
at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:87)
at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:895)
at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1662)
at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83)
at com.ibm.ws.ssl.channel.impl.SSLReadServiceContext$SSLReadCompletedCallback.complete(SSLReadServiceContext.java:1784)
at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1659) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:15:48.927

我没有使用 WAS 8，但在版本 7 中，您可以设置服务器以在从服务器类路径加载类之前从应用程序的类路径加载类。

在管理控制台中：

1.  选择“应用程序 > 应用程序类型 > WebSphere 企业应用程序”
2.  选择您的应用程序。
3.  点击“类加载和更新检测”
4.  在“类加载器顺序”下选择“首先使用本地类加载器加载的类（最后一个父类）”

# asp.net - MessageContract 更改为 DataContract 时 IO.FileStream 失败

> ID：14236036
> 
> 赞同：0
> 
> 时间：2013-01-09T13:15:53.463
> 
> 标签：asp.net, vb.net, wcf, web-services, datacontract

我有一个非常基本的 WCF 服务来接收上传的文档。像这样定义时，它可以完美地工作：

```
<ServiceContract()>
Public Interface ITransferService

    <OperationContract()>
    <FaultContractAttribute(GetType(MyProcessingFault))>
    Function UploadFile(ByVal request As RemoteFileInfo) As MyWebMethodResult

End Interface

<MessageContract()>
Public Class RemoteFileInfo
    Implements IDisposable

    <MessageHeader(MustUnderstand:=True)>
    Public FileName As String

    <MessageHeader(MustUnderstand:=True)>
    Public Length As Long

    <MessageBodyMember()>
    Public FileByteStream As System.IO.Stream

    Public Sub Dispose() Implements IDisposable.Dispose
        If FileByteStream IsNot Nothing Then
            FileByteStream.Close()
            FileByteStream = Nothing
        End If
    End Sub

End Class 
```

但是，我对使用 MessageContractAttribute 有点困惑，大多数作者建议使用 DataContract 来保持简单。然而，当我将上述内容更改为以下内容时，就像这样......

```
<ServiceContract()>
Public Interface ITransferService

    <OperationContract()>
    <FaultContractAttribute(GetType(MyProcessingFault))>
    Function UploadFile(ByVal request As RemoteFileInfo) As MyWebMethodResult

End Interface

<DataContract()>
Public Class RemoteFileInfo
    Implements IDisposable

    <DataMember>
    Public FileName As String

    <DataMember>
    Public Length As Long

    <DataMember()>
    Public FileByteStream As System.IO.Stream

    Public Sub Dispose() Implements IDisposable.Dispose
        If FileByteStream IsNot Nothing Then
            FileByteStream.Close()
            FileByteStream = Nothing
        End If
    End Sub

End Class 
```

当我尝试上传到服务时，我收到以下 WCF 异常：

> **不应使用数据合同名称“FileStream:http://schemas.datacontract.org/2004/07/System.IO”键入“System.IO.FileStream”**

研究这个，我读到流不能被序列化，但是，对于第一个例子来说，这肯定是不正确的吗？是否可以将 FileStream 与 DataContract 一起使用，或者我不应该尝试这种方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T13:26:05.143

`DataContract`消息的序列化方式与`MessageContract`消息不同。`Stream`必须使用 来拥有一个成员（因此允许流式传输） `MessageContract`，然后 wcf 会理解它是用于流式传输的，并且不会尝试执行标准序列化。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ms733742.aspx](http://msdn.microsoft.com/en-us/library/ms733742.aspx)：

> 您不应该在数据协定中使用 System.IO.Stream 派生类型。流数据应该使用流模型进行通信，在下面的“流数据”部分中进行了解释。

# mysql - MySql 常量值

> ID：14236038
> 
> 赞同：9
> 
> 时间：2013-01-09T13:16:08.410
> 
> 标签：mysql, constants

我在我的数据库中做一些数学运算，我想声明在我的所有程序中都知道的 const 值。（例如 PI）

MySql中有这样的东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T13:21:59.850

这里是数学中的 som[函数](http://dev.mysql.com/doc/refman/5.0/en//mathematical-functions.html)

你可以定义这样的常量

```
 SET @myVar = 3; 
```

**在这里编辑**一个例子

```
 set @var1 := 0;
   set @var2 := @var1 := 5;
   select @var1, @var2;
    +--------+--------+
    | @var1 | @var2 |
    +--------+--------+
    | 5      | 5      | 
    +--------+--------+ 
```

这里有[一些例子](http://www.xaprb.com/blog/2006/12/15/advanced-mysql-user-variable-techniques/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-19T17:39:53.973

老问题，但是当我现在自己研究这个问题时，这是我的两分钱：

据我所知，没有用户可定义的常量这样的东西。但是，您可以创建一个函数并让它返回您想要的值：

```
CREATE FUNCTION `kMyConstant` ()
    NO SQL
    DETERMINISTIC
RETURNS TINYINT UNSIGNED
BEGIN
RETURN 0;
END 
```

这显然每次都会返回 0。

我敢肯定，与仅在代码中添加 0 相比，它的效率会非常低，但它仍然会在非常小的几分之一秒内运行（每次）。

请注意，如果输入如下查询：`update myTable set myVariable = kMyConstant();`性能方面有两种可能的结果：

*   通过将 DETERMINISTIC 放入定义中，因为参数不会每行更改，它只会被评估一次。
*   MySQL 优化器不是那么聪明。

除了性能问题之外，至少您可以将 kMyConstant() 分散在整个代码中，并且知道它始终是相同的值，如果您希望更改返回的值，只需更改函数即可。

PS。如果它确实证明过于频繁地重新评估它，那么你总是可以开始你的程序`set @kMyConstant = kMyConstant();`然后使用`@kMyConstant`，但编码开销正在增加，所以我猜你的里程将取决于你使用常量的方式和频率。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-17T16:28:04.493

如果发现以下解决方案令人满意。它基于编译器优化，如果表达式的结果只能返回一行，则用常量替换表，请参阅[MySQL 手册](https://dev.mysql.com/doc/internals/en/optimizer-constants-constant-tables.html)。例如，在指定唯一的非空列的值时就是这种情况。

如果您有一些常量并且不想为每个常量创建一个函数，这将特别有意义。作为奖励，您可以通过使用一些前端方便地编辑常量值（如果它们用于某些配置目的，不一定如果您想更改 pi） - 而不是重新定义函数。传输数据库也可能更容易，因为转储表比转储函数更容易。

```
CREATE TABLE `constant` (
  `id` varchar(45) NOT NULL,
  `double_value` DOUBLE DEFAULT NULL,
  PRIMARY KEY (`id`)
);

INSERT INTO constant VALUE ('pi', 3.1415);

SELECT constant.double_value / 4 FROM constant WHERE constant.id = 'pi';
-- is translated into SELECT 3.1415 / 4 

SELECT table1.field1 / constant.double_value 
  FROM table1, constant 
  WHERE constant.id = 'pi';
-- is translated into SELECT table1.field1 / 3.1415 FROM table1 
```

# java - 更新内容时重新创建 JTable

> ID：14236039
> 
> 赞同：0
> 
> 时间：2013-01-09T13:16:11.797
> 
> 标签：java, swing, jdbc, jtable, tablemodel

我有一个在其中使用 JTable 的应用程序。当我向数据库中添加一些内容时，它会进入数据库，但我无法以某种方式重新创建 JTable。我试图重新绘制（）；创建我的表的方法我已经尝试过 Revalidate(); 但也没有成功

我什至试图回忆这个方法，但也没有帮助。

执行的动作如下：

```
 @Override
public void actionPerformed(ActionEvent e) {

    if(e.getSource() == add) {
        model.insertValue(toDo.getText());
        model.getValue();
        view.createTable();
        toDo.setText("");
    }
} 
```

以及创建 JTable 的方法

```
 public void createTable() {

    JTable table = new JTable();

    DefaultTableModel tableModel = new DefaultTableModel(new Object[][]{},new String[]{"To do","Date added", "Modify"});

    table.setSize(450, 600);

    table.setModel(tableModel);
    JScrollPane scrlPan=new JScrollPane(table);

    for(int i = 0; i < model.getId().size(); i++) {

        tableModel.addRow(new Object[]{
                model.getItem().get(i), 
                model.getDate().get(i), 
                model.getId().get(i)
                });
    }

    add(scrlPan);
    add(table.getTableHeader(), BorderLayout.NORTH);
    add(table, BorderLayout.CENTER);
} 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:21:15.467

`tableModel`作为类的一个字段，并在需要时对其进行更新。不要重新创建`table`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:23:06.053

以下代码直接来自您的代码，对我有用，没有问题：

```
 JTable table = new JTable();
    final DefaultTableModel model = new DefaultTableModel(
            new Object[][] {}, new String[] { "To do", "Date added",
                    "Modify" });
    table.setModel(model);

    JFrame f = new JFrame();
    f.getContentPane().add(table);

    JButton b = new JButton("More ..");
    f.getContentPane().add(b, BorderLayout.NORTH);
    b.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            for (int i = 0; i < 2; i++) {
                model.addRow(new Object[] { "A" + i, "B" + i, "C" + i });
            }
        }
    });
    f.setSize(400, 400);
    f.setVisible(true);
    b.doClick(); 
```

只需检查您是否在做不同的事情。我可能怀疑的最后一件事 - 也许您直接从非 Swing 线程设置新值。使用 SwingUtilities.invokeLater 设置值。

从 AbstractTableModel 派生的模型需要在您的模型上调用继承的方法[fireTableCellUpdated](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/table/AbstractTableModel.html#fireTableCellUpdated%28int,%20int%29)。还有更多触发器可以触发 JTable 注册的内容更改侦听器，因此它可以在模型更改时自行更新。使用适合您的情况。另一种可能对完整内容更改有益的方法是创建和设置全新的 TableModel。但是在您的情况下，这可能与您使用 DefaultTableModel 无关：它已经实现了此功能，它不需要 repaint()、revalidate()、fireTableXYZ。设置新内容后，它必须自己完成所有操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T13:33:49.977

*   不要重新发明轮子，搜索`ResultSetTableModel (few code workarounds)`或[TableFromDatabase](http://tips4java.wordpress.com/2009/03/12/table-from-database/)由`@camickr`

*   我的解决方法是`EDT sensitive`，`JTables`内容等到`ResultSet`返回所有行，`Swing GUI`冻结或不负责`Key & Mouse events`直到长时间和硬`Object`（JDBC）完成，这种逻辑可能适用于小型`ResultSets`from `small DB tables`，没有打开和关闭`Connection to Database`，否则必须使用`SwingWorker`and `Batch logics`(fe update `XxxTableModel with 20rows`)

# android - 单击后保持列表项的颜色

> ID：14236050
> 
> 赞同：1
> 
> 时间：2013-01-09T13:16:38.467
> 
> 标签：android, android-listview, listviewitem

有什么方法可以在单击后保持列表视图项的颜色。项目的颜色应保持或不保持活动开关。

就像蜂窝版本列表视图一样，我们可以显示一个片段，保持列表项的颜色

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-24T04:57:19.793

你可以这样做

```
lv.setSelection(position); 
```

并且对于选定项目的设置颜色

```
lv= (ListView) findViewById(R.id.list);
lv.setSelector( R.drawable.listselector); 
```

否则您可以将 XML 中的属性用作

```
android:listSelector="#00000000" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:23:31.473

```
getListView().setItemChecked(position, true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T13:34:05.950

首先调用`listView.setOnItemClickListener();`方法`onItemClick()`，然后调用`listView.setSelection(position)`，然后选定的项目将保持选定状态。

# installation - 源代码更改时在不同操作系统上同时构建和创建跨平台应用程序的安装包

> ID：14236051
> 
> 赞同：0
> 
> 时间：2013-01-09T13:16:38.643
> 
> 标签：installation, continuous-integration

例如，我的虚拟网络中有几个操作系统，例如：

*   Windows 7的
*   软呢帽 17
*   Ubuntu 12.10
*   Mac OS X

可能还有其他人（将来）。

所有操作系统都可以访问我的跨平台应用程序的 mercurial 存储库（例如用 Qt 编写的）。

当我在任何地方编辑我的源代码并将其推送到 mercurial 时，我希望它开始为所有上述操作系统构建和创建安装包。

在输出中，我想为我的虚拟网络上的每个操作系统安装包。

已经存在哪些解决方案来解决我的问题？

感谢您的关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:30:08.913

您所说的听起来很像[构建自动化](http://en.wikipedia.org/wiki/Build_automation)或可能的[持续集成](http://en.wikipedia.org/wiki/Continuous_integration)。

存在许多产品，它们基本上位于服务器上并监视您的源代码控制存储库，等待更改。当他们找到它们时，他们几乎可以执行任何可以自动化的操作。大多数旨在使诸如构建项目、执行单元测试、将工件推送到 FTP 等任务变得简单。

在您的情况下，您可能希望添加一个自动化步骤以在每次成功构建完成时调用安装包编译器，例如 MSI 或 InnoSetup。

我过去使用过[Jenkins](http://jenkins-ci.org/)，但还有很多其他的。谷歌搜索“构建自动化”可能是你最好的选择。

# c++ - 主应用程序处于 while 循环时，boost 线程未运行

> ID：14236053
> 
> 赞同：0
> 
> 时间：2013-01-09T13:16:41.030
> 
> 标签：c++, multithreading, boost, sleep

我对使用 boost 线程还很陌生。我几乎有一些东西正在运行，但遇到了一个绊脚石：任何帮助将不胜感激。

我有一个 VC++（VS2010 Windows 窗体）应用程序。在不久的将来，这需要移植到 C++ 和 Linux 上，所以我正在使用 boost 库来处理诸如线程之类的事情，以“简化”移植。

我在一个执行一些 i/o 的类中有一个工作函数：

```
void myClass::doIO{

    while (!boolKillthread){

    //do some work

    //sleep thread 
    boost::this_thread::sleep_for(boost::chrono::milliseconds(333));
    }
} 
```

这是在增强线程中启动的：

```
boost::thread m_MyThread;
m_MyThread = boost::thread(boost::bind(&myClass::doIO)); 
```

这工作得很好，正在轮询 i/o 端口，并且正在完美地回调父类。但：

我有另一个函数需要在 doIO 线程上等待才能执行一些工作，所以我有一个函数，其代码如下：

```
while (myClass.IsWorkDone() == true){

    //hang a around a while

    //lines commented out below have been tried, but don't resolve the problem
    //boost::this_thread::yield();
    //boost::this_thread::sleep(boost::posix_time::milliseconds(50));
    //boost::this_thread::sleep_for(boost::chrono::milliseconds(50));

} 
```

问题是，一旦我的代码进入 while 循环，boost 线程 doIO 就会停止 - 几乎就像它没有在自己的线程中运行一样！我已经尝试按照上面注释掉的行插入睡眠和产量，但无济于事。

有任何想法吗？

* * *

感谢大家的回复：是的，（伪代码）“IsWorkDone”只是返回一个变量，所以我理解（并且现在已经尝试过）使用 boost::mutex::scoped_lock 来更新该变量，所以我们有类似的东西

```
bool myWorkIsDone = false;

bool myClass::IsWorkDone{ return myWorkIsDone; }

void myClass::doIO{

    while (!boolKillthread){

    //do some work
    if (SomeCondition){
        boost::mutex::scoped_lock lock(myMutex);
        myWorkIsDone = true;
    }

    //sleep thread 
    boost::this_thread::sleep_for(boost::chrono::milliseconds(333));
    }
} 
```

很好，但关键是（除非我遗漏了一些明显的东西，这很可能）当我的主代码在循环中时，线程似乎没有运行

而（myClass.IsWorkDone（）==真）{

```
 //hang a around a while

} 
```

因为 IDE 通常会在 doIO 中的断点处停止，但在上述 while 循环中执行时不会。

实际上没有更多代码（相关）要添加 - 它应该很简单，但它不起作用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:26:12.273

`IsWorkDone`看起来像什么？它看起来像这样吗：

```
 bool IsWorkDone() const { return workdone_; } 
```

因为如果是这样，那就是你的问题。您需要使用互斥锁来包装对`workdone_`. 那是共享状态，共享状态需要互斥体。编译器可能正在读取循环顶部的变量，并且不再费心再次读取它。毕竟，据它所知，它根本没有理由改变，所以再读一遍也没有意义。

即使它再次读取它，CPU 也有一个很好的缓存行来保存它，它可能永远不会被刷新，所以你只是在读取它。

哦，当你设置它时，它也需要一个互斥锁。

让它成为一个`::std::atomic<bool>`实际上是一个更好的主意，但我猜你还没有。

# java - Solrj 查询两个日期异常

> ID：14236054
> 
> 赞同：0
> 
> 时间：2013-01-09T13:16:41.687
> 
> 标签：java, solr, solrj

我使用`Apache Solr 4`并且我是新的`Solr`，我想添加`last_modified`，`date chooser`但是当我添加一些拥有自己的文档时出现异常`last_modified`。我得到了这个例外。org.apache.solr.common.SolrException：错误请求

我添加了字段`shema.xml` `las_date`，但现在我无法像这样查询范围两个日期 **attr_las_date:[2013-01-00T20:00:00Z TO 2013-01-10T19:59:59Z]** ，因为`schema.xml` *attr_* * 格式是`String`

```
public static void indexFilesSolrCell(String fileName, String solrId,String fileAuthor, String fileDate,String fileDescription, String fileTitle) 
    throws IOException, SolrServerException {

    String urlString = "http://localhost:8983/solr"; 
    SolrServer solr = new CommonsHttpSolrServer(urlString);

    ContentStreamUpdateRequest up 
      = new ContentStreamUpdateRequest("/update/extract"); 
    up.addFile(new File(fileName));
    up.setParam("literal.id", solrId.replaceAll("\\s","").replaceAll("\\(","").replaceAll("\\)", ""));
    up.setParam("literal.url", fileName);
    up.setParam("literal.name", solrId);
    up.setParam("literal.content_type",solrId);
    up.setParam("uprefix", "attr_");
    up.setParam("fmap.content", "content");
    up.setParam("literal.owner",fileAuthor);    
    up.setParam("literal.last_modified", fileDate);
    up.setParam("literal.description", fileDescription);
    up.setParam("literal.title", fileTitle);
    up.setAction(AbstractUpdateRequest.ACTION.COMMIT, true, true);

    solr.request(up);

    QueryResponse rsp = solr.query(new SolrQuery("*:*"));
} 
```

如何将日期添加到文档中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:00:36.647

应该有

```
<field name="las_date" type="date" indexed="true" stored="true"  /> 
```

在你的 schema.xml

# ruby - 将 ajax 与 Sinatra 一起使用来更新表

> ID：14236055
> 
> 赞同：0
> 
> 时间：2013-01-09T13:16:43.137
> 
> 标签：ruby, ajax, sinatra, rack

我确实知道如何将 ajax 与 Sinatra 一起用于琐碎的操作，例如更新一个简单的文本框或类似的东西：我只需要发送一个 ajax 请求并替换我想要的`success`事件内容。这对我来说很清楚。

但是，当我有一个要使用 ajax 更新的表时，我该怎么办？在 .上再次“绘制”表格将非常困难`ajax#success`。当然应该有更简单的方法来实现这一点。

它存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:23:40.457

这不是最有效的方法，但您可以将表格的完整 HTML 部分返回给 Ajax-Request，并使用您返回的结果更新页面上的 Div-Container。在大多数情况下，这是最简单的方法：只需交换 div 的内容。

示例代码

sinatra 主文件中的操作：

```
# some code
post "/path/to/your/action" do
  # get the parameters you need and do the update operation, then:
  @goods = Good.all # if you use activerecord, or use what you want to get the list
  slim :goods_table # or haml or erb or ...
end
# some code 
```

您的视图文件（例如，我将在这里使用 slim）：

```
table
  tr
    th title
    th price
    th weight
    th discount
  - @goods.each do |good|
    th
      td = good.title
      td = good.price
      td = good.weight
      td = good.discount 
```

我假设你的表被放置在一个 id 为“goods-table”的 div 中。所以带有 jquery 的 JS 会是这样的：

```
$.post("path/to/your/action", {parameter1: x, paramater2: y}, function (data) {
  $("#goods-table").html(data);
}); 
```

# php - 分发 2 个用户，而 payemt 在贝宝中成功

> ID：14236056
> 
> 赞同：1
> 
> 时间：2013-01-09T13:16:43.667
> 
> 标签：php, payment-gateway, paypal

支付成功时分配 2 个用户意味着如果用户从我的网站支付 30 美元

所以我想分配 2 位用户意味着任何 paypal 费用，第 1 位用户 10 美元，第 2 位用户 10 美元。

我是怎么做到的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T00:33:28.407

您可以使用[Adaptive Payments](https://www.x.com/sites/default/files/pp_adaptivepayments.pdf)或[Express Checkout](https://www.x.com/developers/paypal/development-and-integration-guides#ec)来做到这一点。

如果您想对付款人隐藏拆分，您需要使用自适应付款，特别是链式付款。这在我链接到的那个 PDF 文档的各个章节中都有介绍。这是通过[Pay API](https://www.x.com/developers/paypal/documentation-tools/api/pay-api-operation)完成的。

如果您不介意付款人看到拆分，您可以使用并行付款，快速结帐和自适应付款均提供此功能。

如果您最终要进行并行支付，我建议您使用 Express Checkout 进行，因为该 API 更成熟并为您提供更多功能。

不过，同样，如果您想对付款人隐藏拆分，以便他们只看到主要收款人，您需要使用链式付款，这只是自适应付款 - 付款的一部分。

# android - android警报对话框中的滚动视图

> ID：14236065
> 
> 赞同：0
> 
> 时间：2013-01-09T13:17:21.570
> 
> 标签：android, checkbox, scrollview, android-alertdialog

我写安卓应用。我有一个按钮，当点击它时，会出现一个警告对话框。此对话框中有 12 个复选框。我的问题是所有复选框都重叠。我的活动是：

```
public class Get_CheckboxActivity extends Activity {

private String result="";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.add_report);

    View checkBoxView = View.inflate(this, R.layout.checkbox, null);
    final CheckBox checkBox = (CheckBox) checkBoxView.findViewById(R.id.checkbox);
    final CheckBox checkBox1 = (CheckBox) checkBoxView.findViewById(R.id.checkbox1);
    final CheckBox checkBox2 = (CheckBox) checkBoxView.findViewById(R.id.checkbox2);
    final CheckBox checkBox3 = (CheckBox) checkBoxView.findViewById(R.id.checkbox3);
    final CheckBox checkBox4 = (CheckBox) checkBoxView.findViewById(R.id.checkbox4);
    final CheckBox checkBox5 = (CheckBox) checkBoxView.findViewById(R.id.checkbox5);
    final CheckBox checkBox6 = (CheckBox) checkBoxView.findViewById(R.id.checkbox6);
    final CheckBox checkBox7 = (CheckBox) checkBoxView.findViewById(R.id.checkbox7);
    final CheckBox checkBox8 = (CheckBox) checkBoxView.findViewById(R.id.checkbox8);
    final CheckBox checkBox9 = (CheckBox) checkBoxView.findViewById(R.id.checkbox9);
    final CheckBox checkBox10 = (CheckBox) checkBoxView.findViewById(R.id.checkbox10);
    final CheckBox checkBox11 = (CheckBox) checkBoxView.findViewById(R.id.checkbox11);

    checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

            result=result.concat(checkBox.getText().toString());
        }
    });
    checkBox1.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

            result=result.concat(checkBox1.getText().toString());
        }
    });
    checkBox2.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

            result=result.concat(checkBox2.getText().toString());
        }
    });
    checkBox3.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

            result=result.concat(checkBox3.getText().toString());
        }
    });
    checkBox4.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

            result=result.concat(checkBox4.getText().toString());
        }
    });
    checkBox5.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

            result=result.concat(checkBox5.getText().toString());
        }
    });
    checkBox6.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

            result=result.concat(checkBox6.getText().toString());
        }
    });
    checkBox7.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

            result=result.concat(checkBox7.getText().toString());
        }
    });
    checkBox8.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

            result=result.concat(checkBox8.getText().toString());
        }
    });
    checkBox9.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

            result=result.concat(checkBox9.getText().toString());
        }
    });
    checkBox10.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

            result=result.concat(checkBox10.getText().toString());
        }
    });
    checkBox11.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

            result=result.concat(checkBox11.getText().toString());
        }
    });

    AlertDialog.Builder builder = new AlertDialog.Builder(this);

        builder.setMessage("title")
               .setView(checkBoxView)
               .setCancelable(false)
               .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       Intent intent = new Intent (Get_CheckboxActivity.this,Add_ReportActivity.class);
                      // intent.putExtra("ckeck_res",result );
                       startActivity(intent);                          }
               })
               .setNegativeButton("No", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                        dialog.cancel();
                   }
               }).show();
}
} 
```

和复选框.xml：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

<CheckBox
    android:id="@+id/checkbox"
    style="?android:attr/textAppearanceMedium"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="c12"
    android:layout_margin="5dp" />
<CheckBox
    android:id="@+id/checkbox1"
    style="?android:attr/textAppearanceMedium"
    android:layout_width="fill_parent"
    android:text="c11"
    android:layout_height="wrap_content"
    android:layout_margin="5dp" />
<CheckBox
    android:id="@+id/checkbox2"
    style="?android:attr/textAppearanceMedium"
    android:layout_width="fill_parent"
    android:text="c10"
    android:layout_height="wrap_content"
    android:layout_margin="5dp" />
<CheckBox
    android:id="@+id/checkbox3"
    style="?android:attr/textAppearanceMedium"
    android:layout_width="fill_parent"
    android:text="c9"
    android:layout_height="wrap_content"
    android:layout_margin="5dp" />
<CheckBox
    android:id="@+id/checkbox4"
    style="?android:attr/textAppearanceMedium"
    android:layout_width="fill_parent"
    android:text="c8"
    android:layout_height="wrap_content"
    android:layout_margin="5dp" />
<CheckBox
    android:id="@+id/checkbox5"
    style="?android:attr/textAppearanceMedium"
    android:layout_width="fill_parent"
    android:text="c7"
    android:layout_height="wrap_content"
    android:layout_margin="5dp" />
<CheckBox
    android:id="@+id/checkbox6"
    style="?android:attr/textAppearanceMedium"
    android:layout_width="fill_parent"
    android:text="c6"
    android:layout_height="wrap_content"
    android:layout_margin="5dp" />
<CheckBox
    android:id="@+id/checkbox7"
    style="?android:attr/textAppearanceMedium"
    android:layout_width="fill_parent"
    android:text="c5"
    android:layout_height="wrap_content"
    android:layout_margin="5dp" />
<CheckBox
    android:id="@+id/checkbox8"
    style="?android:attr/textAppearanceMedium"
    android:layout_width="fill_parent"
    android:text="c4"
    android:layout_height="wrap_content"
    android:layout_margin="5dp" />
<CheckBox
    android:id="@+id/checkbox9"
    style="?android:attr/textAppearanceMedium"
    android:layout_width="fill_parent"
    android:text="c3"
    android:layout_height="wrap_content"
    android:layout_margin="5dp" />
<CheckBox
    android:id="@+id/checkbox10"
    style="?android:attr/textAppearanceMedium"
    android:layout_width="fill_parent"
    android:text="c2"
    android:layout_height="wrap_content"
    android:layout_margin="5dp" />
<CheckBox
    android:id="@+id/checkbox11"
    style="?android:attr/textAppearanceMedium"
    android:layout_width="fill_parent"
    android:text="c1"
    android:layout_height="wrap_content"
    android:layout_margin="5dp" />
</FrameLayout> 
```

当我使用滚动视图时，它停止了！有什么办法吗？

# php - PHP：如何优化多个条件

> ID：14236067
> 
> 赞同：-1
> 
> 时间：2013-01-09T13:17:21.543
> 
> 标签：php

我有一个带有多个条件的循环

```
foreach ($fields as $field_key => $value) {

if ($field_key !== 'a' && $field_key !== 'b' && $field_key !== '10200' && $field_key !== 'z' && $field_key !== 'y') {
 ...
//display $value;

}

} 
```

*如何优化代码以避免 if 子句中的多个条件？*

我正在考虑使用**例如**`{a, b, y, z}`归档一个数组并对其进行搜索以查找在那里找不到的值， **`in_array``search_array`**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:45:36.133

一个不同的选择。

```
ignore = array('a', 'b', '10200', 'z', 'y');
$allowed = array_diff_key($fields, array_combine($ignore, $ignore));
foreach ($allowed as $field_key => $field_value) {
    //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:19:16.380

尝试使用 PHP 原生`in_array()`函数：

```
$vals = array('a', 'b');

foreach ($fields as $field_key => $value) {

    if (!in_array($field_key, $vals)) {
         ...
        //display $value;

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T13:19:25.580

尝试`in_array`：

```
$keys = array('a', 'b', '10200', 'z', 'y');

foreach ($fields as $field_key => $value) {
  if ( !in_array($field_key, $keys) ) {
    //display $value;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T13:20:07.927

```
$array = array('a', 'b', '10200', 'z', 'y');

foreach ($fields as $field_key => $value) {    
    if (!in_array($field_key, $array)) {
    ...
    //display $value;    
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-09T13:23:32.163

您可以创建一个查找表：

```
$exclude = array('a' => true, 'b' => true , '10200' => true , 'z' => true, 'y' => true);

foreach ($fields as $field_key => $value) {
    if (!isset($exclude[$field_key])) {
        //display $value;
    }
} 
```

或者预先过滤掉元素：

```
$filtered_fields = array_diff_keys($fields, $exclude);

foreach($filtered_fields as $field_key => $value) {
    //display $value;
} 
```**

# windows-8 - 什么是 Windows 8 Metro 应用程序上下文中的换行面板

> ID：14236071
> 
> 赞同：0
> 
> 时间：2013-01-09T13:17:33.493
> 
> 标签：windows-8, microsoft-metro, wrappanel

我刚刚在 Windows 8 应用程序中写了一个“hello world”，今天我在博客中阅读了一些关于 wrap panel 的内容。

什么是*包裹面板*？什么时候应该使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:22:59.540

如果您的程序可调整大小以对该面板内的控件进行排序，则使用包装面板。我认为每个项目都根据第一个项目的尺寸获得尺寸。我想如果您的应用程序应该支持快照视图，这将非常有用

# sql-server - 使用 select distinct 插入

> ID：14236075
> 
> 赞同：8
> 
> 时间：2013-01-09T13:17:37.827
> 
> 标签：sql-server, tsql

假设，我有 2 个表 t1 和 t2。

```
create table t1 
{
id int not null,
col1 int null,
col2 int null,
col3 int null
}

create table t2
{
id uniqueidentifier not null,
col1 int null,
col2 int null,
col3 int null
} 
```

我想将下面的结果集插入到表 t2 中。

```
select distinct col1, col2, col3 from t1 
```

如何使用查询来实现这一点？我尝试了以下语句，但我知道它在语法上是错误的。

```
insert into t2
select newid(), distinct col1, col2, col3 from t1 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-09T13:20:36.463

```
insert into t2
select newid(),a.*
from
(Select distinct col1, col2, col3 from t1) a 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:21:21.780

如果它是自动生成的，您可以省略`uniqueidentifier`字段。

```
INSERT INTO t2 (col1, col2, col3)
SELECT DISTINCT col1, col2, col3 FROM t1 
```

更多关于[使用 uniqueidentifier 数据](http://msdn.microsoft.com/en-us/library/ms190215%28v=sql.105%29.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T13:23:35.143

这应该有效。

```
INSERT INTO t2
SELECT NEWID(), col1, col2, col3 
FROM
(
    SELECT DISTINCT col1, col2, col3 
    FROM t1
)DT 
```

# php - 从自定义类调用 Doctrine

> ID：14236077
> 
> 赞同：1
> 
> 时间：2013-01-09T13:17:45.313
> 
> 标签：php, symfony, doctrine, doctrine-orm

/*编辑*/

我有这堂课：

```
namespace Baza\BlogBundle\Form;   
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Doctrine\ORM\EntityManager; 

class filterType extends AbstractType
{

  protected $em;
  public function __construct(EntityManager $em)
 {
     $this->em = $em;
 }
public function buildForm(FormBuilderInterface $builder, array $options)
{

   $this->$em->getDoctrine()->getEntityManager();

   /****
   ****/

 }
} 
```

这是我的服务 yml：

```
services:
 filterType:
    class: Baza\BlogBundle\Form\filterType
    arguments: [doctrine.orm.entity_manager] 
```

当我运行代码时，出现以下异常：

> 可捕获的致命错误：传递给 Baza\BlogBu​​ndle\Form\filterType::__construct() 的参数 1 必须是 Doctrine\ORM\EntityManager 的实例，没有给出

我完全没主意了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:33:05.293

我自己创建了 FormType。这应该有效：

```
<?php
// Baza\BlogBundle\Form\filterType.php

namespace Baza\BlogBundle\Form;  

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Doctrine\ORM\EntityManager;

class filterType extends AbstractType
{
  protected $em;

  public function __construct(EntityManager $em)
  {
     $this->em = $em;
  }

  public function buildForm(FormBuilderInterface $builder, array $options)
  {
    // Do something with your Entity Manager using "$this->em"
  }

  public function getName()
  {
      return 'filter_type';
  }
} 
```

在你的控制器中使用类似的东西

```
<?php
// Baza\BlogBundle\Controller\PageController.php

namespace Baza\BlogBundle\Controller;
use Baza\BlogBundle\Form\filterType;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;

class BaseController extends Controller
{
     public function testEntityManager()
     {
         // assign whatever you need
         $enquiry = null;
         // getEntityManager() is depricated. Use getManager() instead.
         $em = $this->getDoctrine()->getManager();

         $this->createForm(
             new filterType($em),
             $enquiry
         );
     } 
} 
```

**永远不要忘记包含/使用您正在使用的所有类。否则 PHP 将假定该类在您当前使用的命名空间内。**

这就是你得到错误的原因（在 Cerad 的帖子上）

```
Catchable Fatal Error: Argument 1 passed to
Baza\BlogBundle\Form\filterType::__construct()
must be an instance of Baza\BlogBundle\Form\EntityManager [...] 
```

由于您没有包含 EntityManager，PHP 假设它是您当前命名空间中的一个类，即`Baza\BlogBundle\Form`.

* * *

看起来很有趣的 Class`EntityManager50ecb6f979a07_546a8d27f194334ee012bfe64f629947b07e4919\__CG__\Doctrin‌​e\ORM\EntityManager`是一个 Doctrine2 代理类。

从 Symfony 2.1 开始，调用`$this->getDoctrine()->getEntityManager()`no longer 会产生`Doctrine\ORM\EntityManager`一个代理类，它的行为实际上与原始类一样`EntityManager`，可以毫无问题地传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:46:18.560

需要 @ 符号来指示参数是服务。但是，正如您所发现的，@ 会使 yaml 解析器出错。解决方案是使用引号。

```
services:
    filterType:
        class: Baza\BlogBundle\Form\filterType
        arguments: ['@doctrine.orm.entity_manager'] 
```

我记得我也花了几个小时才弄清楚这一点。

# c# - 无法修改数据集

> ID：14236078
> 
> 赞同：1
> 
> 时间：2013-01-09T13:17:46.540
> 
> 标签：c#, asp.net, mysql, datatable, dataset

这是我的一段 c# 代码

```
if (dsResult != null && dsResult.Tables[0].Rows.Count > 0)
{
    foreach (DataRow dr in dsResult.Tables[0].Rows)
    {
        dr["Date"] = Convert.ToDateTime(dr["Date"]).ToString("yyyy-MM-dd");
    }
}
dsResult.Tables[0].AcceptChanges(); 
```

我想要做的是数据集的`Date`格式为 d/m/yyyy，我正在尝试将数据修改为格式化`yyyy-MM-dd`，但我的数据集没有得到更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:48:20.107

**日期**的*存储*方式和*显示*方式是两件截然不同的事情。它显示`1/7/2013 00:00:00 AM`在`DataTable`示例中的原因是因为它显示了`DateTime`基于您的文化设置的默认显示。

然而，这通常不是你想要的显示方式，所以有很多方法可以给这只猫剥皮，但我会给你一些。首先，您可以简单地更改应用程序的文化，使其默认以您想要的方式显示。

```
CultureInfo culture = (CultureInfo)CultureInfo.CurrentCulture.Clone();
culture.DateTimeFormat.ShortDatePattern = "yyyy-MM-dd";
Thread.CurrentThread.CurrentCulture = culture; 
```

现在，当您显示`DateTime`值时，您将在默认情况下获得该文化，例如：

```
var dt = new DateTime();
dt.ToShortDateString(); // here is where the culture is used 
```

您可能还会发现您的应用程序中有一个特定位置需要以某种方式显示它，您可以这样做：

```
var dt = new DateTime();
dt.ToString("dd-MM-yyyy"); // custom formatting on the fly 
```

所以，简而言之，你**不需要**在`DataTable`. 无论它如何*显示*，***值***都是相同的。

# c# - 如何将值放入 C# 函数并获得结果？

> ID：14236080
> 
> 赞同：0
> 
> 时间：2013-01-09T13:17:57.517
> 
> 标签：c#

我敢肯定这会很容易回答，并且可以归因于我对 C# 的“耳后湿”不止一点，但我在调用并将值放入函数之前遇到问题，然后在屏幕上写入响应.

该函数和调用在 PHP 中完美运行（我有更多经验），所以我认为问题更多在于在 C# 中使用正确的语法而不是其他任何东西。也许我还在尝试用我的 PHP 帽子写它？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace postcode
{
  public partial class postcode_finder : System.Web.UI.Page
  {
    protected void Page_Load(object sender, EventArgs e)
    {
        //Example lat/long values entered below

        Response.Write(distance(32.9697, -96.80322, 29.46786, -98.53506, "M"));
    }

    public double distance(double lat1, double lon1, double lat2, double lon2, char unit) {

        double theta = lon1 - lon2;

        double dist = Math.Sin(deg2rad(lat1)) * Math.Sin(deg2rad(lat2)) + Math.Cos(deg2rad(lat1)) * Math.Cos(deg2rad(lat2)) * Math.Cos(deg2rad(theta));

        dist = Math.Acos(dist);
        dist = rad2deg(dist);
        dist = dist * 60 * 1.1515;
        if (unit == 'K')
        {
            dist = dist * 1.609344;
        }
        else if (unit == 'N')
        {
            dist = dist * 0.8684;
        }

        return dist;

    }

    //:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    //::  This function converts decimal degrees to radians             :::
    //:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::

    public double deg2rad(double deg)
    {
        return (deg * Math.PI / 180.0);
    }

    //:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    //::  This function converts radians to decimal degrees             :::
    //:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::

    public double rad2deg(double rad)
    {
        return (rad / Math.PI * 180.0);
    }

  }
} 
```

我得到的错误说'postcode.postcode_finder.distance（double，double，double，double，char）的最佳重载方法匹配'有一些无效的参数'。

我哪里错了？这里希望有更多专业知识的人可以在正确的方向上推动我。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T13:19:08.767

`"M"`在 C# 中是 a `string`，而不是 a `char`; 你需要使用`'M'`.

你得到的错误基本上是说“我找不到一个调用`postcode.postcode_finder.distance`你给它的类型的参数的函数”。

您应该收到第二个编译器错误，说明`Argument 5: cannot convert from 'string' to 'char'`这将进一步缩小问题范围。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T13:21:51.357

错误说明了一切：

> 'postcode.postcode_finder.distance(double, double, double, double, char)' 的最佳重载方法匹配有一些无效参数

换句话说，编译器找不到以`postcode.postcode_finder.distance`您提供的签名命名的方法。

在 C# 中，`char`文字通过将单个字符括在单引号中来表示。文字通过将字符括在双`string`引号中来表示。如果您在代码中更改`"M"`为`'M'`，此错误应该会消失。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T13:20:15.327

您需要使用 'M' 作为最后一个参数——这是在 C# 中指定 char 常量的方式

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-09T13:20:28.423

`"M"`是一个`String`，不是一个`char`。（因为双引号）。

因此编译器不接受您对需要字符的函数距离的调用。

放`'M'`，应该没问题。（`char`单引号之间的 ar）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-09T13:21:12.810

您的方法采用`char`as 参数。
您传递一个字符串（用 标记`"`），用 . 声明字符`'`。
所以它应该是这样的：`distance(32.9697, -96.80322, 29.46786, -98.53506, 'M');`

# vb.net - MVVM 与设计时数据的绑定在设计时正常工作，但在运行时不能正常工作

> ID：14236081
> 
> 赞同：4
> 
> 时间：2013-01-09T13:17:59.590
> 
> 标签：vb.net, mvvm

我有一个带有设计时数据的简单 MVVM 项目，它适用于主数据和带有每个子项的用户控件的列表框。但是，当我在运行时实例化类时，主数据显示但子数据不显示（但列表框具有正确数量的项目，但它们没有任何数据显示在文本框中）。

我注意到 Sport 上的构造函数被调用了很多次，与我预期的相比（例如在运行时，我希望它只被调用两次，但它似乎被调用的次数更多）。

我有类人，和运动。每个人都可以喜欢多种运动并拥有自己喜欢的球队。我有一个从 viewModelBase 继承的 personViewModel 和 sportViewModel。

这是我的 VB.net 代码

```
Imports System.Collections.ObjectModel

Public Class Person
    Public Property Forename As String
    Public Property Surname As String
    Public Sports As New ObservableCollection(Of Sport)
End Class

Public Class Sport
    Public Sub New()
        Debug.WriteLine("test")
    End Sub

    Public Property SportName As String
    Public Property FavouriteProfessionalTeam As String
End Class

Imports System.Collections.ObjectModel

Namespace ViewModel

    Public Class PersonViewModel
        Inherits ViewModel.ViewModelBase

        Public Property Person1 As Person
        Public Property SportViewModels As New ObservableCollection(Of SportViewModel)

        Public Sub New()
            LoadData()
        End Sub

        ''' <summary> 
        ''' Loads the data for the application. 
        ''' </summary> 
        Private Sub LoadData()
            If IsInDesignModeStatic Then
                LoadDesignData()
            Else

            End If
        End Sub

        ''' <summary> 
        ''' Loads temporary data for use in the designer. 
        ''' </summary> 
        Private Sub LoadDesignData()
            Person1 = New Person
            Person1.Forename = "Mickey Run Time"
            Person1.Surname = "Mouse Run Time"

            Person1.Sports.Add(New Sport With {.FavouriteProfessionalTeam = "Man Utd", .SportName = "Soccer"})
            Person1.Sports.Add(New Sport With {.FavouriteProfessionalTeam = "Barcelona", .SportName = "Spanish Soccer"})
            Person1.Sports.Add(New Sport With {.FavouriteProfessionalTeam = "Ulster", .SportName = "Rugby"})

            For Each sport1 In Person1.Sports
                Dim sportVm As New SportViewModel With {.Sport1 = sport1}
                SportViewModels.Add(sportVm)
            Next

        End Sub

    End Class
End Namespace

Namespace ViewModel
    Public Class SportViewModel
        Inherits ViewModel.ViewModelBase

        Public Property Sport1 As New Sport
        Public Property Person1 As Person

        Public Sub New()
            LoadData()
        End Sub

        ''' <summary> 
        ''' Loads the data for the application. 
        ''' </summary> 
        Private Sub LoadData()
            If IsInDesignModeStatic Then
                LoadDesignData()
            Else
                ' Debug.WriteLine(Sport1.SportName)
                ' Load the student data asynchronously 
                'StudentContextInstance = New StudentContext
                'Dim loadop =
                '  StudentContextInstance.Load(StudentContextInstance.
                '             GetStudentsQuery(),
                '             AddressOf OnStudentsLoaded, Nothing)
            End If
        End Sub

        ''' <summary> 
        ''' Loads temporary data for use in the designer. 
        ''' </summary> 
        Private Sub LoadDesignData()
            Sport1 = New Sport With {.SportName = "Design Time Name", .FavouriteProfessionalTeam = "Design Time Team"}
        End Sub

    End Class
End Namespace

Imports System.ComponentModel

Namespace ViewModel

    Public Class ViewModelBase
        Implements INotifyPropertyChanged
        Public Event PropertyChanged(sender As Object, e As PropertyChangedEventArgs) Implements INotifyPropertyChanged.PropertyChanged

        Private Shared _isInDesignMode As Boolean?
        Public Shared ReadOnly Property IsInDesignModeStatic As Boolean
            Get
                If Not _IsInDesignMode.HasValue Then
                    _IsInDesignMode = DesignerProperties.GetIsInDesignMode(New DependencyObject)
                End If
                Return _IsInDesignMode.Value
            End Get
        End Property

        Protected Sub OnPropertyChanged(ByVal propertyName As String)
            ' Send an event notification that the property changed 
            ' This allows the UI to know when one of the items changes 
            If Not String.IsNullOrEmpty(propertyName) Then
                RaiseEvent PropertyChanged(Me,
                                           New PropertyChangedEventArgs(propertyName))
            End If
        End Sub

    End Class
End Namespace 
```

这是我的 wain 窗口背后的代码，它设置 MVVM 以显示 Imports System.Collections.ObjectModel Imports WpfApplicationMVVMTest.ViewModel

```
Class MainWindow
    Public Property Person1 As Person
    Public Property SportViewModels As New ObservableCollection(Of SportViewModel)
    Private Sub Button_Click_1(sender As Object, e As RoutedEventArgs)
        Dim wndPerson As New PersonWindow

        Person1 = New Person
        Person1.Forename = "Donald"
        Person1.Surname = "Duck"

        Person1.Sports.Add(New Sport With {.FavouriteProfessionalTeam = "Man Utd", .SportName = "Soccer"})
        Person1.Sports.Add(New Sport With {.FavouriteProfessionalTeam = "Barcelona", .SportName = "Spanish Soccer"})

        For Each sport1 In Person1.Sports
            Dim sportVm As New SportViewModel With {.Sport1 = sport1}
            SportViewModels.Add(sportVm)
        Next

        Dim vm As New ViewModel.PersonViewModel
        vm.SportViewModels = SportViewModels
        vm.Person1 = Person1
        wndPerson.DataContext = vm
        wndPerson.Show()
    End Sub
End Class 
```

这是 XAML 代码

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:ViewModel="clr-namespace:WpfApplicationMVVMTest.ViewModel"
    xmlns:View="clr-namespace:WpfApplicationMVVMTest" mc:Ignorable="d" x:Class="PersonWindow"
    Title="PersonWindow" Height="1114.8" Width="542">
    <Window.Resources></Window.Resources>
    <Window.DataContext>
        <ViewModel:PersonViewModel />
    </Window.DataContext>

    <Grid>
        <Grid x:Name="Grid1" HorizontalAlignment="Left" Margin="41,39,0,0" VerticalAlignment="Top">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Label Content="Forename:" Grid.Column="0" HorizontalAlignment="Left" Margin="3" Grid.Row="0" VerticalAlignment="Center"/>
            <TextBox x:Name="ForenameTextBox" Grid.Column="1" HorizontalAlignment="Left" Height="23" Margin="3" Grid.Row="0" Text="{Binding Person1.Forename, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" VerticalAlignment="Center" Width="120"/>
            <Label Content="Surname:" Grid.Column="0" HorizontalAlignment="Left" Margin="3" Grid.Row="1" VerticalAlignment="Center"/>
            <TextBox x:Name="SurnameTextBox" Grid.Column="1" HorizontalAlignment="Left" Height="23" Margin="3" Grid.Row="1" Text="{Binding Person1.Surname, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" VerticalAlignment="Center" Width="120"/>
        </Grid>
        <ListBox Margin="41,108,59,753" ItemsSource="{Binding Path=SportViewModels}"  >
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <View:SportUserControl DataContext="{Binding}"  Margin="5"/>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid>
</Window>

<UserControl
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:ViewModel="clr-namespace:WpfApplicationMVVMTest.ViewModel" x:Class="SportUserControl" 
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="600">
    <UserControl.Resources></UserControl.Resources>
    <UserControl.DataContext>
        <ViewModel:SportViewModel />
    </UserControl.DataContext>

    <Grid>
        <Grid x:Name="Grid1" HorizontalAlignment="Left" Margin="31,26,0,0" VerticalAlignment="Top">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Label Content="Favourite Professional Team:" Grid.Column="0" HorizontalAlignment="Left" Margin="3" Grid.Row="0" VerticalAlignment="Center"/>
            <TextBox x:Name="FavouriteProfessionalTeamTextBox" Grid.Column="1" HorizontalAlignment="Left" Height="23" Margin="3" Grid.Row="0" Text="{Binding Sport1.FavouriteProfessionalTeam, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" VerticalAlignment="Center" Width="120"/>
            <Label Content="Sport Name:" Grid.Column="0" HorizontalAlignment="Left" Margin="3" Grid.Row="1" VerticalAlignment="Center"/>
            <TextBox x:Name="SportNameTextBox" Grid.Column="1" HorizontalAlignment="Left" Height="23" Margin="3" Grid.Row="1" Text="{Binding Sport1.SportName, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" VerticalAlignment="Center" Width="120"/>
        </Grid>

    </Grid>
</UserControl> 
```

这是我的设计时间图像，显示了 3 个运动（根据我的加载设计时间数据）。 ![在此处输入图像描述](../Images/601e82ff8b4f483b0d1922e62a840b08.png)

这是我的运行时间窗口，其中显示了 2 项运动（尽管它们没有数据 - 这是问题所在）。 ![在此处输入图像描述](../Images/fb24b935e0992486756aa2c0c7d547d9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:33:27.713

您正在标记和代码中设置数据上下文...删除标记并坚持一种模式

# mercurial - Jenkins mercurial poll SCM 排除文件或其他过滤器

> ID：14236082
> 
> 赞同：4
> 
> 时间：2013-01-09T13:17:59.337
> 
> 标签：mercurial, jenkins

我的 Jenkins 轮询 mercurial SCM 的变化。现在，我们已将构建配置为标记、提交和推送新更改（更新版本、新标记）。

这会导致无限循环。由于提交和标记，Jenkins 将其视为新更改并触发新构建....

是否可以排除 .hgtags 文件？还是根据用户或消息排除？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:37:11.123

你看过[Pathignore 插件](https://wiki.jenkins-ci.org/display/JENKINS/Pathignore+Plugin)吗？

> 如果仅更改了某些路径，此插件允许 SCM 触发的作业忽略构建请求

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T11:06:44.740

看看[这个问题](https://issues.jenkins-ci.org/browse/JENKINS-13174)。看起来只推送标签现在不是问题。但是您的工作会产生额外的提交，无法弄清楚如何阻止詹金斯开始工作..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T16:07:44.540

只是为了分享我目前的解决方案。

我安装了 ScriptTrigger 插件[https://wiki.jenkins-ci.org/display/JENKINS/ScriptTrigger+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/ScriptTrigger+Plugin)

我写了一个脚本来检查最后一个版本不是由詹金斯创建的，如果是，则触发一个新的构建。

# iphone - 在 Xcode 4.5.1 和 ios 6.0 中设置不同的默认视图框架

> ID：14236085
> 
> 赞同：0
> 
> 时间：2013-01-09T13:18:08.680
> 
> 标签：iphone, ios, ios6

在故事板中，视图框架设置为`(0,64; 320,504)`。当我在 viewDidLoad 方法中编写代码时，框架设置为 (0 20; 320 460)

```
 NSLog(@"self.view: %@",self.view); 
```

输出是：`<UIView: 0x1e888c30; frame = (0 20; 320 460); autoresize = RM+BM; layer = <CALayer: 0x1e888c90>>`

为什么会这样显示？实际上我认为设置默认视图框架在任何地方都是相同的。

我不明白请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:25:00.010

添加了自动布局——如果你想禁用它：

- 右键单击​​您的故事板并选择“显示文件检查器”

- 在显示的右侧菜单中，取消选中“使用自动布局”

![在此处输入图像描述](../Images/a7b4d162f7d4f7a16ddf29d7ded0415d.png)

你现在应该恢复正常了

# android - 在 Android 上的应用程序之间切换时会发生什么？

> ID：14236090
> 
> 赞同：1
> 
> 时间：2013-01-09T13:18:24.037
> 
> 标签：android, memory-management

例如，当我从 App **A**切换到 App **B**时，我认为 App **A**将成为“缓存的后台进程”。这是否意味着 App **A**使用的内存被复制到“磁盘（SD卡）”？**A**占用的内存是否可供其他App使用？

此外，当我切换回来时，如何恢复 App **A ？**如果有的话，是什么导致恢复延迟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:53:44.527

只要 Android 将应用 A 留在内存中，它就会一直保留在内存中。如果你想通过这个转换来引导你的应用程序功能，你需要重写 OnPause() 和 OnResume()。例如。

```
 @Override
    protected void onPause(){
    // YOUR CODE HERE
    super.onPause();
    }

    @Override
    protected void onResume(){
    // YOUR CODE HERE
    super.onResume();
    } 
```

当您按下主页按钮、接听电话等时会引发 Onpause。它让您有机会停止线程（告诉您的应用程序停止工作）并在失去焦点之前执行您必须执行的任何操作。现在不是保存数据的好时机，因为这可能需要很长时间，用户会期望应用程序立即消失。

当您再次打开应用程序时会抛出 OnResume，这是您再次启动线程的地方（告诉您的应用程序开始工作）

# javascript - JavaScript：使用 html 表单读取图像并压缩数据

> ID：14236095
> 
> 赞同：0
> 
> 时间：2013-01-09T13:18:45.130
> 
> 标签：javascript, binary, zip

我有一个问题，不知道如何解决它。我正在通过浏览器中的 html 表单读取图像数据。此时，我在输入数组中有二进制数据。现在我必须将此图像发送到服务器。在通过 Internet 传输此图像之前，我想对其进行压缩。你知道有什么办法来处理这个吗？

谢谢， 詹斯

# c# - 使用连接但条件不同的相同 LINQ 查询

> ID：14236104
> 
> 赞同：4
> 
> 时间：2013-01-09T13:19:18.143
> 
> 标签：c#, linq

我有一些非常相似的 LINQ 查询：

```
var city = "Hamburg";

var query1 = 
    from c in DB.Customers
    join address in DB.Addresses on c.ID equals address.CustomerID
    where address.City == city
    select c;

var query2 = 
    from c in DB.Customers
    join address in DB.Addresses on c.ID equals address.CustomerID
    where address.City.StartsWith(city)
    select c;

etc. 
```

我想使用循环来创建查询以减少冗余：

```
var city = "Hamburg";

var expressions = new Expression<Func<string, bool>>[] {
    a => a == city,
    a => a.StartsWith(city)
};

for(int i = 1; i <= 2; i++) {
    queries.Add(
        from c in DB.Customers
        join address in DB.Addresses on c.ID equals address.CustomerID
        where expressions[i](address.City) 
        select c
        );
} 
```

但我现在不知道如何创建表达式数组。任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:26:10.133

您可以`Join`直接使用该方法而不是使用查询语法：

```
public IQueryable<Customer> FindCustomers(Expression<Func<Customer, Address, bool>> predicate)
{
    return DB.Customers.Join(DB.Addresses, c => c.ID, a => d.CustomerID, (c, a) => new { Address = a, Customer = c})
        .Where(pair => predicate(pair.Address))
        .Select(pair => pair.Customer)
} 
```

或者你可以同时通过`Customer`and `Address`：

```
public IQueryable<Customer> FindCustomers(Expression<Func<Customer, Address, bool>> predicate)
{
    return DB.Customers.Join(DB.Addresses, c => c.ID, a => d.CustomerID, (c, a) => new { Address = a, Customer = c})
        .Where(pair => predicate(pair.Customer, pair.Address))
        .Select(pair => pair.Customer)
} 
```

然后您可以将数组创建为：

```
IQueryable<Customer>[] queries = expressions.Select(expr => FindCustomers(expr)).ToArray(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T13:31:57.470

```
var city = "Hamburg";

// predicate should accept Address
var expressions = new Expression<Func<Address, bool>>[] {
    a => a.City == city,
    a => a.City.StartsWith(city)
};

foreach(var predicate in expressions) {
    queries.Add(
        DB.Customers.Join(
           DB.Addresses.Where(predicate), // filtering here
           c => c.ID, 
           a => a.CustomerID, 
           (c, a) => c) // return customer
    ));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T13:25:50.453

您可以在常用查询中保存常用连接部分。

```
var query = from c in DB.Customers
         join address from DB.Addresses on c.ID equals address.CustomerID
         select new {A=a, C=c};
var query1 = query.Where ( item => item.A.temp == item.C.test).Select (item => item.C);
var query2 = query.Where ( item => item.A.temp2 == item.C.test2).Select (item => item.C); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T13:58:05.893

```
var queries=(
    from f in
        new Func<Address, bool>[] { 
            x => x.City==city, 
            x => x.City.StartsWith(city)
            }
    select
        from c in DB.Customers
        join address in DB.Addresses on c.ID equals address.CustomerID
        where f(address)
        select c
    ).ToArray(); 
```

1.  您正在创建一个`expression array`，这意味着您`expression array`毕竟是在产生一个；你不需要让代表成为`expression array`.

2.  你不需要`foreach`

3.  如果您稍后将向 中添加更多表达式`queries`，则更`ToArray()`改为`ToList()`

4.  如果您想`Func<Address, bool>`在生成之前进行修改`queries`，则为其定义一个局部变量，然后替换`Func<Address, bool>[]`

# asp.net-mvc-4 - 如何使用 mvc 4 中的包删除版本生成器的查询标记

> ID：14236105
> 
> 赞同：4
> 
> 时间：2013-01-09T13:19:21.080
> 
> 标签：asp.net-mvc-4, bundling-and-minification

嗨，我正在使用 mvc4 应用程序并使用包来呈现脚本和 css

以下是我创建捆绑包的方式：

```
bundles.Add( new StyleBundle( "~/Content/css" ).Include(
                    "~/Content/bootstrap/css/bootstrap.css",
                    "~/Content/bootstrap/css/bootstrap-responsive.css",
                    "~/Content/site.css" ) ); 
```

现在它像我在浏览器源代码中看到的那样生成这样的包：

```
<link href="/Content/css?v=8HZAB6C8ZnrIPYNFzMQKt0AR4AUsUYBjxPPkbGSRIZo1" rel="stylesheet"> 
```

我想要的是删除链接中版本的“v”查询字符串。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-03T20:29:42.203

我为 mvc-bundling 创建了一个扩展，它使您能够将查询字符串部分移动到 url 内。它可以生成这样的网址

/bundles/css/20130315191550.css

/bundles/css/_NNIf4XxdPCITzjlKPMgZwHMSUsPyxxGaNCIe6mgAkg1

代码可在[http://github.com/unger/Bundling.Extensions](http://github.com/unger/Bundling.Extensions)

也许这可以给你一些关于如何解决它的想法？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-26T14:43:51.833

我最终做了以下事情：

`BundleResolver`首先我用这个实现改变了默认值

```
public class ReplaceQueryStringBundlerResolver : IBundleResolver
        {
            private readonly IBundleResolver _resolver;

            public ReplaceQueryStringBundlerResolver(IBundleResolver resolver)
            {
                _resolver = resolver;
            }

            public IEnumerable<string> GetBundleContents(string virtualPath)
            {
                return _resolver.GetBundleContents(virtualPath);
            }

            //The important part, modifies the generated Url
            public string GetBundleUrl(string virtualPath)
            {
                var bundleUrl = _resolver.GetBundleUrl(virtualPath);
                bundleUrl = bundleUrl.Replace("?v=", "/v/");
                return bundleUrl;
            }

            public bool IsBundleVirtualPath(string virtualPath)
            {
                return _resolver.IsBundleVirtualPath(virtualPath);
            }
        } 
```

这可以像这样在**RegisterBundles**方法中注册。

```
 BundleResolver.Current = new ReplaceQueryStringBundlerResolver(BundleResolver.Current); 
```

这基本上指示当前解析器使用我们需要的**Url**格式。

这个解决方案更好，因为我们不必更改`Styles.Render`或`Scripts.Render`调用调用代码中的任何地方。

由于我们需要将这些新捆绑映射`Urls`到捆绑表，我尝试对当前的 Api 做类似的事情，但我无法让它工作，因此作为临时解决方案，我在 web.config 中添加了重写规则，以便我们可以重写`/v/`为`?v=`. 理想情况下，优化模块应该这样做，因为重写规则限制我们遵循一些命名约定，而我的是所有包虚拟路径都应该以`"~/bundles/"`

```
<rule name="RewriteBundlesWithNoQueryStrings" stopProcessing="true">
  <match url="^bundles/(.*)/v/(.*)" />
  <action type="Rewrite" url="/bundles/{R:1}?v={R:2}" />
</rule>
<rule name="RewriteBundlesWithNoQueryStringsToDefault" stopProcessing="true">
  <match url="^bundles/(.*)/(.*)" />
  <action type="Rewrite" url="/bundles/{R:1}" />
</rule> 
```

如果我可以在处理捆绑请求的类中挂钩某些东西`BundleHandler`，我会提出更新。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T18:53:56.510

不，因为那时浏览器会缓存你的包的陈旧版本，因为该查询字符串是内容更改时的指纹。

我们的积压工作中确实有一个项目可以自定义指纹在 url 中的显示方式，但目前无法将其关闭。

一个简单的解决方法是显式地渲染出你的包的路径，因为如果你不想要查询字符串，这不会改变。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-15T15:00:16.193

只需编写一个像这样的简单扩展：

```
public enum RenderType{Css, Js}
public static class _Extentions
{
    public static string RemoveQueryString(this IHtmlString _HtmlString, RenderType _RenderType){
        string Render = _HtmlString.ToHtmlString().Replace(Environment.NewLine, "").Replace("?v=", "/v/");
        Render = Render.Replace(_RenderType == RenderType.Css ? "\" rel=" : "\"></script>", _RenderType == RenderType.Css ? ".css\"  rel=" : ".js\"></script>");
        return Render;
    }      
} 
```

并像这样使用url重写：

```
<rule name="rewrite css" enabled="true" stopProcessing="true">
<match url="^css/v/(.+).css"/>
<conditions logicalGrouping="MatchAll" trackAllCaptures="false"/>
<action type="Rewrite" url="/css?v={R:1}"/>
</rule> 
<rule name="rewrite js" enabled="true" stopProcessing="true">
<match url="^js/v/(.+).js"/>
<conditions logicalGrouping="MatchAll" trackAllCaptures="false"/>
<action type="Rewrite" url="/js?v={R:1}"/>
</rule> 
```

并以这种方式使用它：

```
<%=Styles.Render("~/css").RemoveQueryString(RenderType.Css)%>
<%=Scripts.Render("~/js").RemoveQueryString(RenderType.Js)%> 
```

请注意，Render 函数中的虚拟路径和 url 重写中的虚拟路径必须匹配：

Scripts.Render("~/ **js** ").RemoveQueryString(RenderType.Js)

匹配 url="^ **js** /v/(.+).js"

# java - 我可以创建一个与 Java 套接字和 Web 套接字通信的 Java 服务器吗

> ID：14236112
> 
> 赞同：0
> 
> 时间：2013-01-09T13:19:38.180
> 
> 标签：java, javascript, android, sockets, websocket

我目前有一个 Java 应用程序，它通过 Java 套接字与 Android 应用程序通信，我希望它以相同的方式与 Web 应用程序通信。两者可以同时实现吗？如果是这样，最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:04:29.757

是的你可以！

套接字只是您的程序访问网络的一种方式，许多编程语言都支持套接字。

您的程序可以同时打开多个套接字，因此它可以打开一个连接与您的 android 手机通信，另一个与 web 应用程序通信。

然而，套接字可能不是最容易使用的东西。由于您在 java 中编程，并且您说您希望您的应用程序与 android 和 web 应用程序通信，我猜测通信将从您编写的应用程序开始。

如果确实如此，您应该检查[java.net.HttpUrlConnection。](http://docs.oracle.com/javase/7/docs/api/java/net/HttpURLConnection.html)这应该可以满足您的需求。

如果您的应用程序更像一个服务器，处理请求本身，您应该检查[java.net.ServerSocket](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/ServerSocket.html)

# ios - 本地通知重复间隔与一小时的特定分钟

> ID：14236114
> 
> 赞同：3
> 
> 时间：2013-01-09T13:19:43.883
> 
> 标签：ios, objective-c, xcode4.5, uilocalnotification, repeatingalarm

我在这里尝试每小时重复一次本地通知。所以我尝试了这个示例代码：

```
UILocalNotification *reminderNote = [[UILocalNotification alloc]init];
    reminderNote.fireDate = [NSDate dateWithTimeIntervalSinceNow:60 * 60];
    reminderNote.repeatInterval = NSDayCalendarUnit;
    reminderNote.alertBody = @"some text";
    reminderNote.alertAction = @"View";
    reminderNote.soundName = @"sound.aif";
    [[UIApplication sharedApplication] scheduleLocalNotification:reminderNote]; 
```

它工作得很好。但是当我尝试在一小时中的特定分钟重复它时，比如说每隔一小时，或者每隔一小时六分钟。我只是想不出办法做到这一点！我试图将SinceNow更改为其他任何东西，但它不起作用！

有没有办法改变它？或我应该处理的任何其他示例代码？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:30:13.560

```
reminderNote.repeatInterval = NSHourCalendarUnit; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:02:31.163

如果第一次和第二次提醒重复之间的重复间隔与其余的间隔不同，则需要使用正确的触发日期定义**新**的本地通知，例如整点后 6 分钟。然后将重复间隔设置为`NSHourCalendarUnit`。

`NSCalendar`您可以使用和指定具有通常模式的间隔`NSDateComponents`。这是有据可查的[here](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDateComponents_Class/Reference/Reference.html)。

# email - 不使用黑莓设备中配置的 EMAIL ID 以编程方式发送电子邮件？

> ID：14236116
> 
> 赞同：1
> 
> 时间：2013-01-09T13:19:55.103
> 
> 标签：email, blackberry

我正在开发一个社交应用程序，我需要在其中**将电子邮件**作为请求发送给其他用户作为应用程序邀请。但是，我的要求是我不想使用设备中配置的 E-mail ID。

我想从我公司的**支持 ID发送电子邮件。**我不想使用用户的电子邮件 ID。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T17:25:57.910

我非常怀疑该设备是否可能实现这一点。如果是这样，那么任何应用程序都可以欺骗来自任何电子邮件地址的邮件。这不会是一件好事。

例如，您的应用程序可以将撰写电子邮件所需的信息发送到您的公司服务器，然后该服务器会将邮件发送出去。

另一种选择是将您的应用程序与 BlackBerry Messenger 集成。邀请下载您的应用程序将花费您很少的精力，并且根本不需要使用您的公司服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T12:04:34.663

我认为这取决于你想做什么。在 BlackBerry 应用程序中发送电子邮件的一种简单方法是[执行以下操作](http://docs.blackberry.com/en/developers/deliverables/11935/Create_new_populated_email_msg_565427_11.jsp)：

```
Message m = new Message();
Address a = new Address("mLi@rim.com", "Ming Li");
Address[] addresses = {a};
m.addRecipients(net.rim.blackberry.api.mail.Message.RecipientType.TO, addresses);
m.setContent("A message for you...");
m.setSubject("Email for you");
Invoke.invokeApplication(Invoke.APP_TYPE_MESSAGES, new MessageArguments(m)); 
```

如果这是您想要做的，那么您将从[API 文档](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/blackberry/api/invoke/MessageArguments.html)中看到该类中没有可用的**FROM**字段`MessageArguments`。因此，[正如 Richard 建议](https://stackoverflow.com/a/14242923/119114)的那样，调用电子邮件应用程序将使用设备配置的电子邮件帐户。

但是，除非我对 BlackBerry 网络基础设施一无所知（比如他们有可以阻止这种情况的过滤器），否则我不明白为什么您不能编写自己的小型电子邮件客户端来连接到目标服务器，并且使用您喜欢的任何电子邮件标题发送消息。一个简单的 J2ME [SMTP](http://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol)客户端可能看起来[像这个示例代码](http://itminds-usefullinks.blogspot.com/2011/12/sending-mail-from-j2me-app-wihtout-web_01.html)。（**注意：**我没有尝试过该代码，但乍一看，它看起来是正确的方法）。当然，它肯定比我上面发布的代码段更多！

我们现有的许多电子邮件基础设施的一大问题是发件人的地址没有经过*身份验证*。所以你可以说[这封电子邮件来自你想要的任何人](http://www.arclab.com/products/amlc/how-to-read-and-analyze-the-email-header-fields-spf-dkim.html)。这就是垃圾邮件和[网络钓鱼](http://en.wikipedia.org/wiki/Phishing)成为如此大问题的原因之一。任何想要的人都可以向您发送一封电子邮件，声称来自您的银行，或者其他人，他们不是。

现在，我不编写垃圾邮件过滤器，每个目标邮件服务器都可以使用不同的算法。您的用户可能会发现他们的垃圾邮件过滤器捕获了您的电子邮件，具体取决于您使用的**FROM**地址，以及您如何将邮件路由到他们的 SMTP 服务器（您使用的 BlackBerry 传输方式）。

所以，这可能不*适合*你。无论如何，我只是想展示如何在 J2ME 应用程序中完成它......您*可能*需要在真正的 IT 论坛上发布这个问题的一部分，看看人们对**垃圾邮件过滤器**问题有什么看法。

[这是关于该主题的讨论](http://forums.xkcd.com/viewtopic.php?f=20&t=67482)

# tomcat - 重新启动时禁用tomcat 6中的临时文件夹生成

> ID：14236122
> 
> 赞同：3
> 
> 时间：2013-01-09T13:20:18.630
> 
> 标签：tomcat, tomcat6

是否可以在重新启动 tomcat 6.0.18 时停止生成临时文件夹？

我刚刚从tomcat中删除了temp文件夹并重新启动了服务器，然后它又自动生成了temp文件夹，我们可以停止生成吗？

# python - 如何知道哪个应用程序运行 python 脚本

> ID：14236130
> 
> 赞同：0
> 
> 时间：2013-01-09T13:20:26.830
> 
> 标签：python

有没有办法知道我从哪个应用程序运行 python 脚本？

我可以从多个来源运行 python，例如 Textmate、Sublime Text 2 或终端（我在 Mac OSX 上）。我怎么知道，究竟是哪个工具启动了当前的 python 应用程序。

我试过研究`os`and`inspect`模块，但找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:33:16.457

您可以使用[psutil](http://code.google.com/p/psutil/)以相当跨平台的方式执行此类操作：

```
import psutil
import os
my_process = psutil.Process(os.getpid())
parent = my_process.parent
print "Parent process name: " + parent.name 
```

从`psutil`文档中：

> 它目前支持 32 位和 64 位的 Linux、Windows、OSX 和 FreeBSD，并使用单一代码库提供从 2.4 到 3.3 的 Python 版本。

除了名称之外，您还可以获得可执行路径（如果您从选项列表中选择，这可能会更有用）以及调用它的完整命令行。您还可以获得运行该过程的用户名。有关参数及其可用平台的详细信息，请参阅[psutil 类文档](http://code.google.com/p/psutil/wiki/Documentation#Classes)。

顺便说一句，如果可能的话，我会构建您的代码，这样您*就不必*根据调用应用程序修改您的行为 - 最好让调用应用程序传入一个修改行为的参数共享代码。但是，我很欣赏有时其他问题优先于代码的清洁度，因此`psutil`应该使您能够按照您的要求进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:38:31.430

如果您乐于保持特定于 unix，那么您可以使用`os.getppid()`. 如果您想将其转换回程序 id，您可以运行一个子进程以使用相关的特定于操作系统的 PID-to-useful-data 工具（赔率 - `ps`）

# javafx-2 - JavaFx TreeView Search on keyevent

> ID：14236132
> 
> 赞同：1
> 
> 时间：2013-01-09T13:20:32.583
> 
> 标签：javafx-2

我有一个 JavaFx 树视图，我需要搜索以字符串开头的项目，每次用户按下一个键时都会获取这个字符串。在按键时搜索并遍历树。请举例说明。谢谢

# android - Android键盘弹出字符问题

> ID：14236135
> 
> 赞同：6
> 
> 时间：2013-01-09T13:20:46.590
> 
> 标签：android, methods, input, keyboard

我正在为 android 开发一个自定义键盘。当按下的笑脸应该弹出时，我正在尝试创建一个按钮。据我了解，android:popupCharacters 负责在键盘上显示弹出窗口以及 android:popupKeyboard。我的问题是，例如，如果我输入 android:popupCharacters=":) :(" 我会在一个按钮上单独显示一个包含每个字符的弹出窗口。它是如何完成的？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-12T02:32:56.090

仔细阅读文档：http: [//developer.android.com/reference/android/inputmethodservice/Keyboard.Key.html#attr_android :popupCharacters](http://developer.android.com/reference/android/inputmethodservice/Keyboard.Key.html#attr_android:popupCharacters)

> *机器人：弹出字符*
> 
> **要在弹出键盘**中显示的字符。
> 
> [...]
> 
> *安卓：弹出键盘*
> 
> 任何弹出式键盘的 XML 键盘布局。

所以 popupcharacters 意味着一种更简单的方法来创建 popupkeyboard。但是 Unicode 可以让您免于创建 XML 和使用图像：[http](http://unicodeemoticons.com/) ://unicodeemoticons.com/试试看！（很久以前试过一次，在2.2模拟器、中兴Blade和T-Mobile Pulse/Huwaei U8220上都显示不错）。

如果您不想要这种解决方法，另一个解决方案是如果您进入 android SDK 源代码，并尝试重新实现整个弹出式键盘（或过度实现，如果可以的话）以使其可供您使用。但无论如何，如果我是用户，我会更喜欢 unicode 或图像，但这只是我的意见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-16T05:25:50.000

为 xml 目录中的弹出窗口创建单独的 xml 布局，如下所示

```
<Keyboard xmlns:android="http://schemas.android.com/apk/res/android"
    android:keyWidth="15%p"
    android:horizontalGap="0px"
    android:verticalGap="0px"
    android:keyHeight="@dimen/key_height"
    >

<Row android:rowEdgeFlags="top">
        <Key android:keyLabel=":-)" android:keyOutputText=":-) "
        <Key android:keyLabel=":-)" android:keyOutputText=":-( "
    </Row>
</Keyboard> 
```

为其他笑脸添加任意数量的行和/或键属性，然后在键盘 xml 中使用它

```
 <Key android:keyOutputText=":-)" android:keylabel=":-)" android:popupKeyboard="@xml/popup"/> 
```

这将创建一个键“:-)”，如果您按下它一次，它将输出字符:-)，并在您长按它时使用弹出 xml 布局。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-15T11:00:29.123

如果您正在制作自己的键盘，请查看以下可用的源代码，这将对您有很大帮助。

[斯堪的纳维亚键盘](https://code.google.com/p/scandinavian-keyboard/source/checkout)

[黑客键盘](https://code.google.com/p/hackerskeyboard/source/checkout)

[安卓表情符号键盘](https://github.com/zeuxisoo/android-emoji-keyboard)

您还想更改键盘的主题，然后检查以下[链接](https://stackoverflow.com/questions/14528178/how-can-i-implement-special-soft-keyboard/14580859#14580859)。它将让您清楚地了解如何制作预览布局和所有内容。特别是如果您想查看笑脸，那么**Android 表情符号键盘**将非常有用。它在键盘和预览中使用笑脸符号。

希望这会帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-16T12:27:59.613

如果我正确理解了您的查询并且您想要实现类似于*Watsapp-smiley-button 的*东西，那么您可以在按钮中使用[PopupWindow](http://developer.android.com/reference/android/widget/PopupWindow.html)`onClick`并向其添加不同的笑脸。

# vim - 删除换页符 ^L 字符

> ID：14236143
> 
> 赞同：9
> 
> 时间：2013-01-09T13:21:11.840
> 
> 标签：vim

如何在 Windows 上删除 GVim 中的所有换页符（由 ^L 表示）？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-09T13:23:00.147

```
:%s/^L//g 
```

会做的。输入`^L`使用`ctrl`- `V` `ctrl`-`L`

[这是](http://www.linux.com/learn/tutorials/8255-vim-tips-the-basics-of-search-and-replace)使用 Vim 进行基本搜索/替换的指南。

# winapi - 即时解密EXE

> ID：14236147
> 
> 赞同：0
> 
> 时间：2013-01-09T13:21:16.630
> 
> 标签：winapi, hook, createprocess

我有一个`XXX.EXE`应用`AES`到原始的结果`.EXE` 我有一个主机进程，它调用 CreateProcess 在`XXX.EXE` 主机进程中有一个解密方法允许解密任何块`.EXE`（这很简单，因为主机进程知道 AES 密钥）。

我想找到一种简单的方法来执行解密`.EXE`，并尽可能避免将整个内容存储`.EXE`在内存中。

我尝试为 ReadFile 安装钩子以使其在被调用时动态解密`CreateProcess`，但这不起作用，因为 CreateProcess 也调用`CreateFileMapping`，它可能使用内核模式函数读取文件，所以我被卡住了。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:25:50.197

您要做的实际上是运行[打包的可执行文件](http://en.wikipedia.org/wiki/Executable_compression)以混淆正在运行的内容。打包程序将允许您正常运行可执行文件，并且将有一小段未混淆/未加密的代码将解压缩二进制文件的其余部分。

一些打包程序不需要一次性解压整个二进制文件，而其他打包程序则需要。然而，这是恶意软件常用的一种使逆向工程更加困难的技术。这反过来又导致反病毒公司将打包软件标记为恶意软件。

可以编写自己的可执行[加载器](http://en.wikipedia.org/wiki/Loader_%28computing%29)来解密其余的可执行文件并加载导入的函数等。 [本文](http://www.cultdeadcow.com/tools/pewrap.html)解释了 Windows 加载器中涉及的步骤。

# php - 如何从字符串中删除所有数字？

> ID：14236148
> 
> 赞同：66
> 
> 时间：2013-01-09T13:21:20.457
> 
> 标签：php, regex

我想从字符串 [0-9] 中删除所有数字。我写了这个有效的代码：

```
$words = preg_replace('/0/', '', $words ); // remove numbers
$words = preg_replace('/1/', '', $words ); // remove numbers
$words = preg_replace('/2/', '', $words ); // remove numbers
$words = preg_replace('/3/', '', $words ); // remove numbers
$words = preg_replace('/4/', '', $words ); // remove numbers
$words = preg_replace('/5/', '', $words ); // remove numbers
$words = preg_replace('/6/', '', $words ); // remove numbers
$words = preg_replace('/7/', '', $words ); // remove numbers
$words = preg_replace('/8/', '', $words ); // remove numbers
$words = preg_replace('/9/', '', $words ); // remove numbers 
```

我想找到一个更优雅的解决方案：1 行代码（IMO 编写好的代码很重要）。

我在 stackoverflow 中找到的其他代码也删除了变音符号 (á,ñ,ž...)。

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2013-01-09T13:22:03.343

对于西方阿拉伯数字 (0-9)：

```
$words = preg_replace('/[0-9]+/', '', $words); 
```

对于所有数字*，包括西方阿拉伯语*（例如[Indian](https://en.wikipedia.org/wiki/Indian_numerals)）：

```
$words = '१३३७';
$words = preg_replace('/\d+/u', '', $words);
var_dump($words); // string(0) "" 
```

*   `\d+`匹配多个数字。
*   修饰符`/u`启用 unicode 字符串处理。此修饰符很重要，否则数字将不匹配。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-01-09T13:22:11.753

尝试使用正则表达式`\d`：

```
$words = preg_replace('/\d/', '', $words ); 
```

`\d`是一个等价物，`[0-9]`它是数字范围从`0`到的等价物`9`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-09T13:23:44.783

使用一些正则表达式，例如`[0-9]`or `\d`：

```
$words = preg_replace('/\d+/', '', $words ); 
```

您可能需要阅读[preg_replace() 文档](http://nl1.php.net/manual/en/function.preg-replace.php)，因为它直接显示在那里。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-12T06:00:17.123

使用预定义的字符范围

`echo $words= preg_replace('/[[:digit:]]/','', $words);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-16T09:46:52.860

正则表达式

```
 $words = preg_replace('#[0-9 ]*#', '', $words); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-19T22:53:35.640

或者，您可以这样做：

```
$words = trim($words, " 1..9"); 
```

# android - 无法在 Google 地图上添加多个标记

> ID：14236152
> 
> 赞同：3
> 
> 时间：2013-01-09T13:21:35.537
> 
> 标签：android, google-maps, google-maps-markers

在我的应用程序中，我使用的是谷歌地图，首先我通过标记显示用户当前位置并通过透明圆圈显示其准确性，现在当我想将另一个标记添加到代表我以前位置的同一点时，相同的代码不起作用对我来说，请有人帮我找出代码有什么问题，我只想在单个地图视图中添加多个标记

这是我显示两个标记的代码：-

```
LocationResult locationResult = new LocationResult(){
        @Override
        public void gotLocation(Location location){
            //Got the location!
            if (location != null) {
                GeoPoint point = new GeoPoint(
                        (int) (location.getLatitude() * 1E6), 
                        (int) (location.getLongitude() * 1E6));

                accuracy = location.getAccuracy();
                cur_lati = location.getLatitude();
                cur_longi = location.getLongitude();

                String address = "";
                Geocoder geoCoder = new Geocoder(
                        getBaseContext(), Locale.getDefault());
                try {
                    List<Address> addresses = geoCoder.getFromLocation(
                            point.getLatitudeE6()  / 1E6, 
                            point.getLongitudeE6() / 1E6, 1);

                    if (addresses.size() > 0) {
                        for (int index = 0; 
                                index < addresses.get(0).getMaxAddressLineIndex(); index++)
                            address += addresses.get(0).getAddressLine(index) + " ";
                    }
                }catch (IOException e) {        
                    e.printStackTrace();
                }   

                Input.setPinPoints(cur_lati,cur_longi,address);                 // sending lat,lon to input class

                Toast.makeText(getBaseContext(),"Latitude: " + location.getLatitude() + " Longitude: " + location.getLongitude() + "accuracy" + location.getAccuracy(),Toast.LENGTH_SHORT).show();
                mc = mapView.getController();
                mc.animateTo(point);
                mc.setZoom(19);

                MapOverlay mapOverlay = new MapOverlay();
                mapOverlay.setPointToDraw(point);
                List<Overlay> listOfOverlays = mapView.getOverlays();
                listOfOverlays.clear();
                listOfOverlays.add(mapOverlay);

                Bundle bundle=getIntent().getExtras();

                if(bundle!=null){

                    int value = bundle.getInt("tab_value");
                    lati = bundle.getDouble("lati");
                    longi = bundle.getDouble("longi");

                    //GeoPoint point1 = new GeoPoint((int) lati, (int) longi);

                    if(value == 1){

                        MapOverlay1 mapOverlay1 = new MapOverlay1();
                        //      mapOverlay1.setPointToDraw(point1);
                        List<Overlay> listOfOverlays1 = mapView.getOverlays();
                        listOfOverlays1.add(mapOverlay1);

                    }

                }

            }
        }
    };
    MyLocation myLocation = new MyLocation();
    myLocation.getLocation(this, locationResult);

    btnimg.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            Intent intent=new Intent(getApplicationContext(),Input.class);
            startActivity(intent);

        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_safe_city, menu);
    return true;
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();

    finish();
}

@Override
public void finish() {
    // TODO Auto-generated method stub
    super.finish();

}

class MapOverlay extends Overlay
{
    private GeoPoint pointToDraw;

    public void setPointToDraw(GeoPoint point) {
        pointToDraw = point;
    }

    public GeoPoint getPointToDraw() {
        return pointToDraw;
    }

    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {
        super.draw(canvas, mapView, shadow);           

        // convert point to pixels
        Point screenPts = new Point();
        Paint mPaintBorder,mPaintFill ;
        mapView.getProjection().toPixels(pointToDraw, screenPts);

        // add marker
        Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.pinimage);
        canvas.drawBitmap(bmp, screenPts.x, screenPts.y - 24, null);   

        mPaintBorder = new Paint();
        mPaintBorder.setStyle(Paint.Style.STROKE);
        mPaintBorder.setAntiAlias(true);
        mPaintBorder.setColor(0xee4D2EFF);
        mPaintFill = new Paint();
        mPaintFill.setStyle(Paint.Style.FILL);
        mPaintFill.setColor(0x154D2EFF);

        int radius = (int) mapView.getProjection().metersToEquatorPixels(accuracy);

        canvas.drawCircle(screenPts.x, screenPts.y, radius, mPaintBorder);

        canvas.drawCircle(screenPts.x, screenPts.y, radius, mPaintFill);

        return true;
    }
} 

class MapOverlay1 extends com.google.android.maps.Overlay
{

    private GeoPoint p1 = new GeoPoint((int)(lati),(int)(longi));

    Projection projection;

    @Override
    public boolean draw(Canvas canvas, MapView mapView,
            boolean shadow, long when)
    {

        super.draw(canvas, mapView, shadow);

        Point screenPts1 = new Point();
        mapView.getProjection().toPixels(p1, screenPts1);
        //---add the marker---
        Bitmap bmp1 = BitmapFactory.decodeResource(getResources(), R.drawable.car);
        canvas.drawBitmap(bmp1, screenPts1.x, screenPts1.y-50, null);

        return true;

    }

} 
```

通过使用 MapOverlay 类，我可以在地图上放置一个显示用户当前位置的图钉，但是当我使用 MapOverlay1 显示第二个标记时，它不起作用....

任何帮助将不胜感激在此先感谢......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:47:44.367

切换到谷歌地图的新 API。使用起来好多了。如果您必须使用旧 API，请使用 MyLocationOverlay 作为您当前的位置。另外，如果我没记错的话，有一对 set/getMarker 方法可以省去你自己在画布上绘制标记的麻烦。

# html - 子子菜单 css

> ID：14236153
> 
> 赞同：2
> 
> 时间：2013-01-09T13:21:37.497
> 
> 标签：html, css

我有一个用 CSS 构建的菜单，它只能显示子页面。我还希望能够显示子子页面。

这是我已经拥有的：

```
#nav {
width:800px;
margin:30px 50px;;
padding: 0;
float:left;
}
#nav li {
 list-style: none;
 float: left; 
 padding:0 10px;
}

/*--temp--*/
#nav ul ul li {
clear:left;
}
#nav ul ul {
position:absolute;
left:14em;
top:0;
}
#nav ul ul li a {
display:block;
padding: 3px 15px;
color: #242424;
text-decoration: none;
font-size:13px;
font-family:"Lato" !important;
}
/*--end temp--*/
#nav li a {
display: block;
padding: 3px 15px;
color: #242424;
text-decoration: none;
font-size:13px; 
font-family:"Lato" !important;
}
 #nav a:hover {
color:#367FB3;
}
#nav a:active {
color:#367FB3;
}
#nav li ul {
display: none; 
width: 14em; /* Width to help Opera out */
background-color:transparent;
z-index:666;
}
#nav li:hover ul, #nav li.hover ul {
display: block;
position: absolute;
margin:0px -10px;
padding:0px; 
}
#nav li:hover li, #nav li.hover li {
float: none; 
line-height:30px;
}
#nav li:hover li a, #nav li.hover li a {
 background-color:#367FB3;
 color:#fff;
 font-size:13px; 
 font-family:"Lato" !important;
}
#nav li li a:hover {
background-color:#52baff; 
color:#fff;
} 
```

源代码html：

```
<!--begin header-->
        <div id="header" >
                <div id="logo">
                </div>
                <div id="top-menu">
                        <ul id="nav">
                                <li><a href="#">Home</a></li>
                                <li><a href="inner.html">Services</a>
                                        <ul>
                                                <li><a href="#">Bedrijfsprofiel</a>
                                                        <ul>
                                                                <li><a href="#">uhuh</a></li>
                                                        </ul>
                                                <li><a href="#">Visie</a></li>
                                                <li><a href="#">Werkwijze</a></li>
                                        </ul>
                                </li>
                                <li><a href="#">Projecten</a></li>
                                <li><a href="#">Nieuws</a></li>
                                <li><a href="#">Contact</a></li>
                        </ul>
                </div>
        </div>
        <!--end header--> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:07:21.077

你的意思是你想隐藏“子子菜单”，并在鼠标悬停时显示，就像子菜单一样？

如果是这样，您可以添加以下 CSS：

```
#nav li:hover ul ul {
  display:none; // hide the unordered list that is inside the unordered list
}
#nav li ul li:hover ul {
  display:block; // display the unordered list in the same way as your sub menu
} 
```

在行动中看到它：http: [//jsfiddle.net/bozdoz/PGDKE/](http://jsfiddle.net/bozdoz/PGDKE/)

# magento - Magento 中的多种货币

> ID：14236159
> 
> 赞同：2
> 
> 时间：2013-01-09T13:21:57.300
> 
> 标签：magento, currency

我已经可以选择更改货币，但还有另一个问题。目前基础货币设置为欧元，这对我来说很好，但客户可能想要改变它。如果我将基础货币更改为 RON，货币转换器下拉菜单就会消失。

我如何使用除欧元以外的其他货币，但仍然可以选择在店内更改货币？警告：magento noob :)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T13:32:42.043

您应该为新的基础货币添加货币汇率。系统 - 管理货币 - 汇率 没有汇率，多种货币将不可用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:31:27.323

您可以更改基础货币。请按照以下步骤操作。

1.  从管理面板中，选择**系统**>**配置**。

2.  从左侧的配置面板的常规下，选择**货币设置**选项卡。

3.  单击以展开**货币选项**部分。然后，执行以下操作： 在**基础货币**列表中，选择用于商店交易的主要货币。在**默认显示货币**列表中，选择用于在您的商店中显示定价的主要货币。在**允许的货币**列表中，选择您的商店接受作为付款的所有货币。

4.  完成后，单击**保存配置**按钮。

要启用多种货币，请通过[http://inhoo.net/ecommerce/magento/how-to-add-currency-selector-to-magentos-header/上的教程](http://inchoo.net/ecommerce/magento/how-to-add-currency-selector-to-magentos-header/)

# vb.net - 如何从实体框架中的detail部分检索主从关系的master部分的字段值

> ID：14236163
> 
> 赞同：0
> 
> 时间：2013-01-09T13:22:03.843
> 
> 标签：vb.net, entity-framework

我在我的实体模型中有一个主细节关系（为了便于理解经典的 Northwind Orders-OrderDetails）最终用户将在网格中输入主零件的详细信息，然后向下移动到较低的网格以输入'相关'的详细信息。

从实体模型本身中，我希望能够在每次创建与该订单相关的新 OrderDetail 记录并使用它来检索一些需要的特定信息时从 Orders 表中检索等效的“CustomerId”值在每个详细记录中。

在实体模型本身中是否有一种简单的方法可以做到这一点。我将在 vb 中执行此操作，但我几乎可以阅读 C#。

用于澄清的附加信息：

Jeric 在他的回答中提出了一个有趣的观点，我感谢他，这表明该表可能没有正确规范化。在任何正常情况下我都会同意，但在这里我受到了我无法控制的约束。Tis 用于记录商业渔民上岸量的应用程序。每次上岸可能包括几种不同的鱼类，所有上岸细节都必须依法报告给政府机构，政府机构反过来将信息传递给科学家，他们使用这些信息来计算鱼类种群，从而计算捕捞配额限制。

为此，鱼被捕获的确切位置很重要，因此每个线细节（着陆细节线）必须记录捕获物品的区域和区域。对于大多数小船来说，这些信息几乎总是相同的（但出海数月的大型船只可以在多个区域和区域捕鱼（因此有要求））。

为了尝试使应用程序的最终用户更容易做到这一点，我认为在船舶记录（相当于 Northwind 客户）中记录默认区域和区域的详细信息是有意义的。在登陆标题表（Northwind Order）中，我引用了vesselId。因此，在输入着陆详细信息行时，我想参考着陆标题并检索船舶 ID，然后将其用作函数中的参数，以检索与该船舶关联的默认区域和区域。

由于我正在使用实体框架来执行此操作，因此我还不知道登陆的最终 ID 是什么（它尚未提交，实体框架的美妙之处在于它使此类数据输入变得容易) 所以我试图从尚未为其创建“官方”ID 的登陆标题中获取船舶 ID。

我希望这对于在大多数情况下（包括我自己）会促使人们认为这是数据库规范化问题的问题更有意义。

我正在尝试做的是在着陆详细信息实体的 On PropertyChanging 事件之一中找到一种方法来检索其关联的着陆标头实体的vesselId，该实体仍将提交到数据库。它在客户端缓存中，但尚未在数据库中。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T06:23:22.120

如果我的问题是正确的，那么您的意思是您的 OrderDetail 实体中有一些属性是根据您的 Customer 实体填充的。我觉得这很奇怪，因为您应该能够通过遍历从 OrderDetail 到 Order 到 Customer 的链接从 OrderDetail 实体查询任何客户详细信息。您不需要在 OrderDetail 表下保留 Customer 属性（例如 Gender）。您可能需要考虑尝试更好地规范您的架构。

无论如何，假设您有以下实体：

```
public class Customer {
    [Key]
    public int Id {get; set;}
    public string Name {get; set;}
    public string Gender {get; set;}
    public virtual ICollection<Order> Orders {get; set;} //<-- I'm also assuming you have a 1 Customer to Many Order relationship
}

public class Order {
    [Key]
    public int Id {get; set;}
    [Required]
    public int CustomerId {get; set;}
    public virtual Customer Customer {get; set;} //<-- assumes a Customer Entity also exists
    public virtual ICollection<OrderDetail> OrderDetails {get; set;} //<-- I'm also assuming you have a 1 Order to Many Order Detail relationship
}

public class OrderDetail {
     [Key]
     public int Id {get;set;}
     [Required]
     public int OrderId {get; set;} //<-- each Order Detail *must* be linked to an order
     public virtual Order Order {get; set;}
     public string CustomerGender {get; set;} //<-- property that gets populated based on the customer that is related to the parent Order of this detail
     //other properties
 } 
```

当您构建 OrderDetail 实例时，您应该知道它链接到的订单，但不一定知道 Customer，如本例所示：

```
var orderDetail = new OrderDetail {OrderId = 1}; 
```

在您的插入方法中，您要确保在插入之前获得客户详细信息并填充 orderDetail 中的相关字段。由于您知道 OrderId，因此您可以使用 LINQ 查询相关的客户详细信息。在此示例中，我们想要获取 Customer.Gender 并将其分配给 OrderDetail.CustomerGender。您可能可以将其写在一个语句中，但为了便于阅读，我将其分解。

```
//step 1, get the Customer object based on the OrderId
var cust = context.Set<Order>().Include(o => o.Customer)
                  .Where(o => o.Id == orderDetail.OrderId)
                  .Select(o => o.Customer).SingleOrDefault();

//step 2, assign the Customer object property to the OrderDetail instance
orderDetail.CustomerGender = customer.Gender;

//step 3, persist the orderDetail entity
context.Set<OrderDetail>().Add(orderDetail);
context.SaveChanges(); 
```

# jsf - 如何仅更新 p:tabView 的活动选项卡？

> ID：14236165
> 
> 赞同：6
> 
> 时间：2013-01-09T13:22:08.250
> 
> 标签：jsf, jsf-2, tabs, primefaces, refresh

我需要在执行操作后刷新 p:tabView（以显示错误消息等）。

要验证的字段位于各个选项卡上。当我更新整个 tabView 时，这当然是错误的行为，因为在 PrimeFaces 中不可见的选项卡不应该被更新（因为编辑字段是不可见的，当它们被刷新时，它们会丢失它们的值，例如 p:autoComplete 是无效）。

所以，我应该只更新活动选项卡，但是如何只使用命令按钮的更新属性来定位活动选项卡，而不是整个 p:tabView？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T13:54:03.927

~~我做了一个简短的例子：~~

 ~~```
<h:form id="form">
    <p:tabView id="tabview">
        <p:tab title="tab 1">
            <p:commandButton value="update" update="@parent" />
        </p:tab>
        <p:tab title="tab 2">
            <p:outputPanel id="tab2">
                <p:commandButton value="update" update=":form:tabview:tab2" />
            </p:outputPanel>
        </p:tab>
    </p:tabView>
</h:form> 
```~~ 

但是，当我`p:tab`通过 ID 或使用`@parent`（就像我在选项卡 1 中所做的那样）更新选项卡（div）时，它会被删除，这很奇怪......一种解决方法是将选项卡的内容包装在一个容器中，就像我在选项卡 2 中所做的那样.

* * *

哈！找到无法直接更新标签的原因：[https ://code.google.com/p/primefaces/issues/detail?id=3518](https://code.google.com/p/primefaces/issues/detail?id=3518)

 ~~tabview 外的按钮示例：

```
<h:form id="form">
    <p:tabView id="tabview" binding="#{tabView}">
        <p:ajax event="tabChange" update=":form:button" />
        <p:tab title="tab 1">
            <p:outputPanel id="tab0">
                <p:panel>text</p:panel>
            </p:outputPanel>
        </p:tab>
        <p:tab title="tab 2">
            <p:outputPanel id="tab1">
                <p:panel>text</p:panel>
            </p:outputPanel>
        </p:tab>
    </p:tabView>
    <p:commandButton id="button" value="update"
        update=":form:tabview:tab#{tabView.activeIndex}" />
</h:form> 
```~~

# java - 找到 JTable 单元格并绘制它

> ID：14236168
> 
> 赞同：2
> 
> 时间：2013-01-09T13:22:12.017
> 
> 标签：java, swing, jtable, cell, tablecellrenderer

我有这些数据：

1.  行号
2.  列号
3.  单元格值

我的问题是：

1.  如何使用这些数据找到单元格？
2.  如何`JTable`在鼠标按下事件时更改单元格的背景并在鼠标释放事件时恢复正常背景？
3.  我可以在没有用户交互的情况下突出显示 JTable，这意味着单击其他一些 JTable 单元格我想通过使用给定的信息突出显示另一个 JTable 单元格，这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T13:34:01.227

假设您的意思是找到单元格的矩形以进行命中检测：

```
 Rectangle cell = table.getCellRect(row, column, false); 
```

对于背景更改，在您的 mouseListener 代码中，设置一个标记哪个单元格被击中，在按下/释放时重新绘制并实现一个自定义渲染器来检查标记。一些伪代码

```
 void mousePressed(MouseEvent ev) {
     // get the row/column from mouse location
     int column = table.columnAtPoint(ev.getPoint());
     int row = table.rowAtPoint(ev.getPoint());
     // set some kind of marker, f.i. as client property
     table.putClientProperty("hitColumn", column);
     table.putClientProperty("hitRow", row);
     // get the rectangle for repainting 
     Rectangle cell = table.getCellRect(column, row, false);
     table.repaint(cell);
 }

 void mouseReleased(MouseEvent ev) {
     // similar to reset the marker
     ....
     table.repaint(cell);
 }

 // custom renderer extends DefaultTableCellRenderer

 JComponent getTableCellRendererComponent(..., row, column ...) {
     Integer hitColumn = table.getClientProperty("hitColumn");
     Integer hitRow = ....
     if (hitColumn != null && column == hitColumn && hitRow ....) {
        setBackground(hitColor);
     } else {
         // force super to handle the background 
         setBackground(null);
     }
     return super.getTableCellRendererComponent(....);
 } 
```

# jquery - 链接到页面时，按钮文本（基于 JSON 调用）未加载

> ID：14236170
> 
> 赞同：0
> 
> 时间：2013-01-09T13:22:14.950
> 
> 标签：jquery, jquery-mobile

我对 jQuery/javascript 非常陌生，并且基于[JSON 和 PHP](http://www.itnewb.com/tutorial/Introduction-to-JSON-and-PHP)的介绍中的一些代码，这些代码最终在我的页面上看起来像这样：

```
$(document).ready(function() { 
    $("#bigButton").button('refresh'); 
    $.get("test.php", function(data){setupPage(data)});
});

function setupPage(data){
    eval("message="+data);     
    $("#bigButton").html(message.text);
    $("#bigButton").button('refresh'); 
} 
```

当我直接加载页面时它工作正常（将所需的文本添加到按钮），但是当我链接到页面时它不会加载。这似乎是 JSON 代码的一个问题，因为当我对按钮的值进行硬编码时（没有调用 JSON）它可以工作。

想知道问题可能是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:06:09.517

使用`pageinit`而不是`document ready`. 删除 eval，这不是您的问题的原因，但它既不是必要的，也不是应该使用的东西。

```
 $(document).bind("pageinit", function() {   }); 
```

[http://jquerymobile.com/demos/1.2.0/docs/api/events.html](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)

# python - python的内置sort()方法

> ID：14236172
> 
> 赞同：2
> 
> 时间：2013-01-09T13:22:24.987
> 
> 标签：python, sorting

> **可能重复：**
> [关于 python 的内置 sort() 方法](https://stackoverflow.com/questions/1517347/about-pythons-built-in-sort-method)

`sort()`该方法使用哪种排序算法对数字列表进行排序？我该如何证明呢？

```
seq = list_of_numbers
seq.sort() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T13:24:06.343

它使用[TimSort](http://en.wikipedia.org/wiki/Timsort)，这是一种由 Tim Peters（Python 成名之禅）为 Python 开发的算法。

它是合并和插入排序的混合体，现在也在 Java 和 Android 中使用。Python 源代码包含[更详细的描述](http://hg.python.org/cpython/file/tip/Objects/listsort.txt)。您将在[`listobject.c`C 源代码](http://hg.python.org/cpython/file/f2353e74b335/Objects/listobject.c#l980)中找到实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:24:33.550

确定排序算法并证明您是正确的最简单方法是查看[源代码](http://hg.python.org)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T13:27:21.803

这可能会启发你。[http://www.daniweb.com/software-development/python/code/216689/sorting-algorithms-in-python](http://www.daniweb.com/software-development/python/code/216689/sorting-algorithms-in-python)

您可以通过显示引擎盖下的 c 代码来证明这一点。

这几乎是你同样的问题。[关于 Python 内置的 sort() 方法](https://stackoverflow.com/questions/1517347/about-pythons-built-in-sort-method)

# google-docs - 以兼容模式上传 .doc 和 .docx - 所有图像都消失了

> ID：14236173
> 
> 赞同：3
> 
> 时间：2013-01-09T13:22:24.727
> 
> 标签：google-docs, google-drive-api

将兼容模式文件中的 .doc 或 .docx 上传（和转换）到 Google Drive 时，文档中的所有图像都会消失。通过浏览器和文档列表 API 进行测试。这似乎是一个相当极端的行为变化（据我所知，直到几天前还在工作），我找不到任何表明任何变化的补丁说明。事实上，我发现的人是这样说[的](http://googleappsupdates.blogspot.ca/2012/09/scheduled-release-track-features-update_26.html)：

注意：将任何格式的 Office 文件导入 Google Docs 的功能仍然受支持，并且将保持不变。

这种行为是故意的吗？

# signalr - SignalR 返回错误 - 但如何找到它的含义 $.connection.hub.error(function (err)

> ID：14236176
> 
> 赞同：1
> 
> 时间：2013-01-09T13:22:28.010
> 
> 标签：signalr

在我的应用程序中触发了以下警报，但 JSON.stringify(err) 始终为“”。有什么方法可以让我了解触发此异常的原因是什么？

```
 $.connection.hub.error(function (err) {
                alert("Error signalR:" + JSON.stringify(err));
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:27:22.693

如果您将内置 SignalR 调试设置为 true，那么它应该会在浏览器控制台中为您提供一些附加信息。

例如

```
$.connection.hub.logging = true; 
```

此外，我会在调试时使用 Google Chrome 或 FireFox，并通过以下方式将错误添加到控制台：

```
$.connection.hub.error(function(err){
    console.log(err);
}); 
```

请注意，虽然这会破坏其他不支持的浏览器中的代码`console.log();`所以您可能希望更进一步并使用自定义日志功能。看看[Paul Irish 的`log()`插件](http://paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/)，它为您提供了跨浏览器日志功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T02:18:52.047

我正在使用 SignalR 2.2.0，并且使用与您相同的代码和 logging = false 没有这个问题。

或者，您可以通过以下方式访问错误消息：

```
$.connection.hub.lastError 
```

# iphone - 单击按钮重新启动应用程序

> ID：14236180
> 
> 赞同：0
> 
> 时间：2013-01-09T13:22:42.600
> 
> 标签：iphone, xcode

我可以在按钮单击时重新启动应用程序。是否可以在应用程序加载完成后调用 viewDidLoad 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:25:31.430

除非您使用的是越狱设备，否则苹果几乎不可能允许您这样做。

Apple 将拒绝您的应用程序。

您可以做的一件事是，显示一条警告消息“请退出并重新启动”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:30:01.403

您可以通过拆除视图控制器并重新初始化它来模拟重新启动。即在你的`appDelegates` `didFinishLaunching`方法中，向自己发送一条消息，就像`[self setupApp]` 在那个`setupApp`方法中，创建你的`rootViewController`等等。

然后当你想模拟重启时，拆掉所有东西并调用`[[UIApplication sharedApplication] ]setupApp]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T13:25:53.690

这是不可能的。

只有您可以通过“exit(0);”关闭您的应用程序。

你不能重新启动它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T13:28:23.523

不可能，但你要么就退出.. 例如使用`exit(-1)`左右

或者

如果这是你需要的，你也许可以假装停止/开始......但它不会帮助你解决记忆问题

# xsd - JAXB/XJC：处理多个命名空间（元素不包含任何子节点）

> ID：14236188
> 
> 赞同：2
> 
> 时间：2013-01-09T13:23:06.990
> 
> 标签：xsd, jaxb, xml-namespaces, xjc

我正在尝试使用 XJC/JAXB 创建一个 XSD 模式来处理以下本体：

[http://archive.geneontology.org/latest-termdb/go_daily-termdb.rdf-xml.gz](http://www.geneontology.org/GO.downloads.ontology.shtml#ont)

（我知道 RDF 没有架构，但这个文件的格式总是相同的）。该文件如下所示：

```
<go:go xmlns:go="http://www.geneontology.org/dtds/go.dtd#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
    <rdf:RDF>
        <go:term rdf:about="http://www.geneontology.org/go#GO:0000001">
            <go:accession>GO:0000001</go:accession>
            <go:name>mitochondrion inheritance</go:name>
            <go:synonym>mitochondrial inheritance</go:synonym>
            <go:definition>The distribution of mitochondria, including the mitochondrial genome, into daughter cells after mitosis or meiosis, mediated by
 interactions between mitochondria and the cytoskeleton.</go:definition>
            <go:is_a rdf:resource="http://www.geneontology.org/go#GO:0048308" />
            <go:is_a rdf:resource="http://www.geneontology.org/go#GO:0048311" />
        </go:term>
        <go:term rdf:about="http://www.geneontology.org/go#GO:0000002">
       (...) 
```

混合两个命名空间“go:”和“rdf:”。

我试图创建一个 XSD 架构。到目前为止，这是我的 xsd：

### 去.xsd

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:go="http://www.geneontology.org/dtds/go.dtd#"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    elementFormDefault="qualified"
    targetNamespace="http://www.geneontology.org/dtds/go.dtd#"
    attributeFormDefault="qualified"
    >

<xs:import namespace="http://www.w3.org/1999/02/22-rdf-syntax-ns#" schemaLocation="rdf.xsd"/>

<xs:group name="is_group">
  <xs:choice>
      <xs:element name="is_a" type="go:IsA" minOccurs="0" maxOccurs="unbounded"/>
      <xs:element name="part_of" type="go:PartOf" minOccurs="0" maxOccurs="unbounded"/>
      <xs:element name="negatively_regulates" type="go:NegativelyRegulates" minOccurs="0" maxOccurs="unbounded"/>
      <xs:element name="positively_regulates" type="go:PositivelyRegulates" minOccurs="0" maxOccurs="unbounded"/>
      <xs:element name="regulates" type="go:Regulates" minOccurs="0" maxOccurs="unbounded"/>
  </xs:choice>
</xs:group>

  <xs:complexType name="Term">
    <xs:sequence>
      <xs:element name="accession" type="xs:string" minOccurs="1" maxOccurs="1"/>
      <xs:element name="name" type="xs:string" minOccurs="1" maxOccurs="1"/>
      <xs:element name="synonym" type="xs:string" minOccurs="0" maxOccurs="unbounded"/>
      <xs:element name="definition" type="xs:string" minOccurs="0" maxOccurs="1"/>
      <xs:element name="comment" type="xs:string" minOccurs="0" maxOccurs="unbounded"/>
      <xs:group ref="go:is_group" minOccurs="0" maxOccurs="unbounded"/>
      <xs:element name="dbxref" type="go:DbXRef" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:attributeGroup ref="rdf:rdfabout"/>
  </xs:complexType>

  <xs:group name="goterm">
    <xs:sequence>
       <xs:element name="term" type="go:Term"  minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
  </xs:group>

  <xs:complexType name="AbstractRelation" abstract="true">
    <xs:attributeGroup ref="rdf:rdfrsrc"/>
  </xs:complexType>

  <xs:complexType name="IsA">
        <xs:complexContent>
        <xs:extension base="go:AbstractRelation">
        </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <xs:complexType name="PartOf">
        <xs:complexContent>
        <xs:extension base="go:AbstractRelation">
        </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <xs:complexType name="NegativelyRegulates">
        <xs:complexContent>
        <xs:extension base="go:AbstractRelation">
        </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <xs:complexType name="PositivelyRegulates">
        <xs:complexContent>
        <xs:extension base="go:AbstractRelation">
        </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <xs:complexType name="Regulates">
        <xs:complexContent>
        <xs:extension base="go:AbstractRelation">
        </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <xs:complexType name="DbXRef">
    <xs:sequence>
      <xs:element name="database_symbol" type="xs:string" minOccurs="1" maxOccurs="1"/>
      <xs:element name="reference" type="xs:string" minOccurs="1" maxOccurs="1"/>
    </xs:sequence>
    <xs:attributeGroup ref="rdf:rdfparsetype"/>
  </xs:complexType>

  <xs:complexType name="Go">
    <xs:sequence>
      <xs:group ref="rdf:rdfroot" />
    </xs:sequence>
  </xs:complexType>

<xs:element name="go" type="go:Go" />

</xs:schema> 
```

### rdf.xsd

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:go="http://www.geneontology.org/dtds/go.dtd#"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    targetNamespace="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    elementFormDefault="qualified"
     attributeFormDefault="qualified"
    >
  <xs:import namespace="http://www.geneontology.org/dtds/go.dtd#" schemaLocation="go.xsd"/>
  <xs:attributeGroup name="rdfabout">
    <xs:attribute name="about" type="xs:string"/>
  </xs:attributeGroup>

  <xs:attributeGroup name="rdfrsrc">
    <xs:attribute name="resource" type="xs:string"/>
  </xs:attributeGroup>

  <xs:attributeGroup name="rdfparsetype">
    <xs:attribute name="parseType" type="xs:string" fixed="Resource" />
  </xs:attributeGroup>

  <xs:complexType name="RDF">
    <xs:sequence>
      <xs:group ref="go:goterm" />
    </xs:sequence>
  </xs:complexType>

<xs:group name="rdfroot">
  <xs:sequence>
      <xs:element name="RDF" type="rdf:RDF" minOccurs="1" maxOccurs="1"/>
  </xs:sequence>
</xs:group>

</xs:schema> 
```

**使用xmllint**针对此架构验证 rdf 文件。

```
$ xmllint  --noout --schema go.xsd go.xml
go.xml validates 
```

但是，在用 XJC 编译 xsd 并运行下面的 java 程序后，我没有得到 go:term 的主体：

```
import java.io.InputStream;
import java.io.StringWriter;
import org.geneontology.dtds.go.*;
import org.w3._1999._02._22_rdf_syntax_ns.*;
import javax.xml.namespace.QName;
import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBElement;
import javax.xml.bind.Unmarshaller;
import javax.xml.bind.Marshaller;
import  javax.xml.transform.stream.StreamSource;

public class TestGo
    {
    public static void main(String[] args) throws Exception
        {
    JAXBContext jaxbCtxt=JAXBContext.newInstance(JAXBContext.newInstance("org.geneontology.dtds.go:org.w3._1999._02._22_rdf_syntax_ns");
    Marshaller marshaller = jaxbCtxt.createMarshaller();
    Unmarshaller unmarshaller=jaxbCtxt.createUnmarshaller();
        marshaller.setProperty("jaxb.formatted.output",true);
        Go go=unmarshaller.unmarshal( new StreamSource(System.in), Go.class).getValue();
        marshaller.marshal(new JAXBElement<Go>(
            new QName("http://www.geneontology.org/dtds/go.dtd#", "go"),
            Go.class,
            go
            ), System.out);
        }
    } 
```

编译&运行：

```
xjc -d tmp ../schemas/bio/go/go.xsd
javac -d tmp -sourcepath tmp:. TestGo.java
java -cp tmp TestGo < go.xml | head -n 20 
```

输出：

```
<ns3:go xmlns:ns2="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:ns3="http://www.geneontology.org/dtds/go.dtd#">
    <ns2:RDF>
        <ns3:term ns2:about="http://www.geneontology.org/go#GO:0000001"/>
        <ns3:term ns2:about="http://www.geneontology.org/go#GO:0000002"/>
        <ns3:term ns2:about="http://www.geneontology.org/go#GO:0000003"/>
        <ns3:term ns2:about="http://www.geneontology.org/go#GO:0000005"/>
        <ns3:term ns2:about="http://www.geneontology.org/go#GO:0042254"/>
        <ns3:term ns2:about="http://www.geneontology.org/go#GO:0044183"/>
        <ns3:term ns2:about="http://www.geneontology.org/go#GO:0051082"/>
        <ns3:term ns2:about="http://www.geneontology.org/go#GO:0000006"/>
        <ns3:term ns2:about="http://www.geneontology.org/go#GO:0000007"/>
        <ns3:term ns2:about="http://www.geneontology.org/go#GO:0000008"/>
        <ns3:term ns2:about="http://www.geneontology.org/go#GO:0003756"/>
        <ns3:term ns2:about="http://www.geneontology.org/go#GO:0015036"/>
        <ns3:term ns2:about="http://www.geneontology.org/go#GO:0000009"/> 
```

怎么了 ？我怎样才能得到 'go:term' 的正文？这是处理组的正确方法吗（例如： xsd:group name="goterm" 对我来说看起来很丑）

编辑：根据 Blaise 的评论更改了 JAXBContext.newInstance。

编辑：Blaise 的第二个 java 代码。

```
import java.io.InputStream;
import java.io.StringWriter;
import org.geneontology.dtds.go.*;
import org.w3._1999._02._22_rdf_syntax_ns.*;
import javax.xml.namespace.QName;
import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBElement;
import javax.xml.bind.Unmarshaller;
import javax.xml.bind.Marshaller;
import  javax.xml.transform.stream.StreamSource;

public class TestGo2
    {
    public static void main(String[] args) throws Exception
        {
        Go go=new Go();
        RDF rdf=new RDF();
        go.setRDF(rdf);
        for(int i=0;i<2;++i)
            {
            Term t=new Term();
            t.setAbout("uri:"+i);
            t.setAccession("Hello"+i);
            rdf.getTerm().add(t);
            }

    JAXBContext jaxbCtxt=JAXBContext.newInstance("org.geneontology.dtds.go:org.w3._1999._02._22_rdf_syntax_ns");
    Marshaller marshaller = jaxbCtxt.createMarshaller();

        marshaller.marshal(new JAXBElement<Go>(
            new QName("http://www.geneontology.org/dtds/go.dtd#", "go"),
            Go.class,
            go
            ), System.out);
        }
    } 
```

输出：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ns3:go xmlns:ns2="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:ns3="http://www.geneontology.org/dtds/go.dtd#">
<ns2:RDF>
<ns3:term ns2:about="uri:0">
 <accession>Hello0</accession>
</ns3:term>
<ns3:term ns2:about="uri:1">
  <accession>Hello1</accession>
</ns3:term>
</ns2:RDF>
</ns3:go> 
```

这是我当前的 Makefile：

```
JAVA_HOME:=$(dir $(shell which java))..
JAVAC=${JAVA_HOME}/bin/javac
JAVA=${JAVA_HOME}/bin/java
XJC?=${JAVA_HOME}/bin/xjc

.PHONY=all go clean
all:go

go: go.xml
    -xmllint  --noout --schema ../schemas/bio/go/go.xsd $<
    mkdir -p tmp
    ${XJC} -d tmp ../schemas/bio/go/go.xsd 
    ${JAVAC} -d tmp -sourcepath tmp:. TestGo.java `find tmp -name "ObjectFactory.java"`
    ${JAVA}  -cp tmp TestGo < $< | head -n 20
    #rm -rf tmp

go.xml:
    curl "http://archive.geneontology.org/latest-termdb/go_daily-termdb.rdf-xml.gz" |\
    gunzip -c | grep -v "<!DOCTYPE " > $@

clean:
    rm -rf tmp go.xml 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:32:50.367

首先要尝试的是在生成的包而不是其中一个类`JAXBContext`的冒号上创建：`String`

```
JAXBContext jc = JAXBContext.newInstance("org.geneontology.dtds.go:org.w3._1999._02._22_rdf_syntax_ns"); 
```

**演示**

```
import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance("org.geneontology.dtds.go:org.w3._1999._02._22_rdf_syntax_ns");

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum14236188/input.xml");
        Object o = unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(o, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<go xmlns="http://www.geneontology.org/dtds/go.dtd#" xmlns:ns2="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
    <ns2:RDF>
        <term ns2:about="http://www.geneontology.org/go#GO:0000001">
            <accession>GO:0000001</accession>
            <name>mitochondrion inheritance</name>
            <synonym>mitochondrial inheritance</synonym>
            <definition>The distribution of mitochondria, including the
                mitochondrial genome, into daughter cells after mitosis or meiosis,
                mediated by
                interactions between mitochondria and the cytoskeleton.
            </definition>
            <is_a ns2:resource="http://www.geneontology.org/go#GO:0048308"/>
            <is_a ns2:resource="http://www.geneontology.org/go#GO:0048311"/>
        </term>
    </ns2:RDF>
</go> 
```

# java - 在休眠中使用继承时如何仅获取一种实体？

> ID：14236191
> 
> 赞同：3
> 
> 时间：2013-01-09T13:23:11.313
> 
> 标签：java, hibernate, jakarta-ee, jpa, orm

我有这两个实现单表继承策略的类：

```
@Entity
@Table(name = "tableA")
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "type")
@DiscriminatorValue("A")
class A {
    ...
}

@Entity
@DiscriminatorColumn(name = "type")
@DiscriminatorValue("B")
class B extends A {
    ...
} 
```

当我创建一个查询来获取所有 A 实体时，它也会给我带来 B 实体。如何仅获取 A 类型的实体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:44:24.477

您可以创建一个通用的抽象基类并使 A 和 B 都扩展基类，例如：

```
@Entity
@Table(name = "tableA")
@DiscriminatorColumn(name="`type`")
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
abstract class Base {
    ...
}

@Entity
@DiscriminatorColumn(name = "type")
@DiscriminatorValue("A")
class A extends Base {
    ...
}

@Entity
@DiscriminatorColumn(name = "type")
@DiscriminatorValue("B")
class B extends Base {
    ...
} 
```

（请注意，SINGLE_TABLE 是默认策略，因此可以省略注释参数）。

或者如果支持 JPA2，您可以使用：

```
SELECT a FROM A a WHERE TYPE(a) = A 
```

# c - 无法在 C 中的 TXT 文件中的单独行中写入

> ID：14236192
> 
> 赞同：1
> 
> 时间：2013-01-09T13:23:13.607
> 
> 标签：c, file, text, lines

好的，所以我有一个客户结构，我试图将客户的每个属性写在文本文件的单独行中。这是代码

```
custFile = fopen ("customers.txt", "w+");
fprintf(custFile, "%s", cust[cust_index].name);
fprintf(custFile, "\n");
fprintf(custFile, "%s", cust[cust_index].sname);
fprintf(custFile, "%s", cust[cust_index].id);
fclose(custFile); 
```

数据是文本文件的形式，在一行中输出

数据很好，它只是打印在一行中。当我给我的朋友我的代码时，它可以正常工作。

Ps 我不知道这是否有什么不同，但我正在 Mac 上编程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:27:12.733

您的代码只为 3 个字段添加了一个换行符。这可能是您遇到的问题的原因吗？如果不是，请注意旧 Mac 上的一些旧应用程序可能需要`\r`行分隔符。

如果您分解出一个函数并使用它来写入所有记录并测试不同的行分隔符，则可以解决这两个问题

```
static void writeCustomer(FILE* fp, const Customer* customer,
                          const char* line_separator)
{
    fprintf(fp, "%s%s%s%s%s%s", customer->name, line_separator,
                                customer->sname, line_separator,
                                customer->id, line_separator);
} 
```

这将被调用

```
writeCustomer(custFile, &cust[cust_index], "\n"); /* unix line endings */
writeCustomer(custFile, &cust[cust_index], "\r\n"); /* Windows line endings */
writeCustomer(custFile, &cust[cust_index], "\r"); /* Mac line endings */ 
```

请注意，某些应用程序不会为其中一些行尾显示换行符。如果您关心在特定编辑器中的显示，请检查它们具有不同行尾的功能。

# android - 在我的 android 地图中指向当前位置

> ID：14236193
> 
> 赞同：0
> 
> 时间：2013-01-09T13:23:17.303
> 
> 标签：android, google-maps

我的 android 地图中有我的纬度和经度。但是当我试图在我当前的位置做一个标记/点时，应用程序在没有显示结果的情况下崩溃了。这是我的代码：

```
 public void onLocationChanged(Location loc)

{
    GeoPoint point = new GeoPoint(
              (int) (loc.getLatitude() * 1E6), 
              (int) (loc.getLongitude() * 1E6));

      String Text = "Latitude = " + loc.getLatitude() + "Longitude = " + loc.getLongitude();
      Toast.makeText( getApplicationContext(),Text,Toast.LENGTH_SHORT).show();

      mapcontroller.animateTo(point);
      mapcontroller.setZoom(16);

      MapOverlay mapOverlay = new MapOverlay();
      mapOverlay.setPointToDraw(point);
      List<Overlay> listOfOverlays = mapView.getOverlays();
      listOfOverlays.clear();
      listOfOverlays.add(mapOverlay);
}

     class MapOverlay extends Overlay
{
  private GeoPoint pointToDraw;

  public void setPointToDraw(GeoPoint point) {
    pointToDraw = point;
  }

  public GeoPoint getPointToDraw() {
    return pointToDraw;
  }

  public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {
        super.draw(canvas, mapView, shadow);           

        // convert point to pixels
        Point screenPts = new Point();
        mapView.getProjection().toPixels(pointToDraw, screenPts);

        // add marker
        Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.icon);
        canvas.drawBitmap(bmp, screenPts.x, screenPts.y - 24, null);    
        return true;
      }
} 
```

我的 Logcat 是：

```
 01-09 19:07:19.209: W/dalvikvm(293): threadid=1: spin on suspend resolved in 1043 msec
    01-09 19:07:19.209: D/dalvikvm(293): Restored policy of 310 to 0
    01-09 19:07:19.209: D/dalvikvm(293): Restored priority on 310 to 19
    01-09 19:07:20.220: W/dalvikvm(293): threadid=1: spin on suspend #1 threadid=7 (pcf=0)
    01-09 19:07:20.220: D/dalvikvm(293): Temporarily moving tid 309 to fg (was 0)
    01-09 19:07:20.220: D/dalvikvm(293): Temporarily raised priority on tid 309 (19 -> 0)
    01-09 19:07:20.259: W/dalvikvm(293): threadid=1: spin on suspend resolved in 1043 msec
    01-09 19:07:20.259: D/dalvikvm(293): Restored policy of 309 to 0
    01-09 19:07:20.259: D/dalvikvm(293): Restored priority on 309 to 19
    01-09 19:07:20.530: D/dalvikvm(293): GC_FOR_MALLOC freed 4877 objects / 301616 bytes in 2364ms
    01-09 19:07:21.530: D/dalvikvm(293): GC_FOR_MALLOC freed 10081 objects / 613024 bytes in 329ms
    01-09 19:07:22.460: D/dalvikvm(293): GC_FOR_MALLOC freed 4747 objects / 311336 bytes in 248ms
    01-09 19:07:23.309: D/dalvikvm(293): GC_FOR_MALLOC freed 6145 objects / 374872 bytes in 233ms
    01-09 19:07:24.340: D/dalvikvm(293): GC_FOR_MALLOC freed 8497 objects / 649704 bytes in 259ms
    01-09 19:07:25.299: D/dalvikvm(293): GC_FOR_MALLOC freed 6086 objects / 370152 bytes in 293ms
    01-09 19:07:25.969: I/MapActivity(293): Handling network change notification:CONNECTED
    01-09 19:07:25.969: E/MapActivity(293): Couldn't get connection factory client
    01-09 19:07:26.550: D/dalvikvm(293): GC_EXTERNAL_ALLOC freed 3698 objects / 326888 bytes in 303ms
    01-09 19:07:26.990: D/dalvikvm(293): GC_FOR_MALLOC freed 270 objects / 112080 bytes in 220ms
    01-09 19:07:27.299: D/dalvikvm(293): GC_FOR_MALLOC freed 3495 objects / 240288 bytes in 227ms
    01-09 19:07:27.769: D/dalvikvm(293): GC_EXTERNAL_ALLOC freed 185 objects / 136920 bytes in 222ms 
```

如果有任何错误，任何人都可以建议我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:43:04.600

第一：切换到新的google API，用起来*好多*了。第二：您可以通过简单的内置命令显示当前位置。如果你*真的*必须使用旧的 api：使用 MyLocationOverview 就可以了：>

# jquery - IE 中的 jquery 对话框在 16 秒后关闭

> ID：14236196
> 
> 赞同：0
> 
> 时间：2013-01-09T13:23:22.923
> 
> 标签：jquery, internet-explorer, dialog, delay

我们有一个模态 jquery 对话框，可以在除我的 IE9 之外的浏览器中正常工作。在所有情况下，对话窗口都会以超过 15 秒的延迟关闭：确认、取消、关闭。我有一个不显示错误的 JSCompanion，一切都很好。

```
$( "#"+status ).dialog({
            resizable: false,
            height:180,
            width:400,
            modal: true,
            title: "ECO confirmation",
            buttons: {
                "Confirm": function() {
                    $.ajax({
                          type: 'GET',
                          url: url,
                          success: function(){
                              $( "#"+status).dialog( "close" );   
                              $('#'+trid+'>td.status').html(status);
                              $('#'+trid+'>td:last').html('');
                          }
                    });

                },
                "Cancel": function() {
                    $( "#"+status  ).dialog( "close" );
                }
            }
        }); 
```

有什么想法、见解、提示吗？会很好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:25:36.060

检查您的 IE9 是否未设置为 IE8 浏览器模式。

# c# - 外部表不是预期格式 Excel 97-2003

> ID：14236197
> 
> 赞同：0
> 
> 时间：2013-01-09T13:23:24.587
> 
> 标签：c#, excel, connection-string, oledbconnection, oledbexception

我尝试打开一个excel文件并读取数据，但它总是抛出一个错误“外部表不是预期的格式”我尝试了所有可能的连接字符串，但它也会引发错误。我的连接字符串是

```
@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + this._filePath + ";Extended Properties=Excel 8.0;HDR=Yes;IMEX=1;" 
```

我也试过

```
@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + this._filePath + ";Extended Properties=Excel 12.0;HDR=Yes;IMEX=1;" 
```

但它失败了

文件扩展名为 .xls

提前致谢

# thunderbird - 将文件夹导入到 Thunderbird

> ID：14236198
> 
> 赞同：1
> 
> 时间：2013-01-09T13:23:25.593
> 
> 标签：thunderbird, thunderbird-addon

我正在尝试将外部 mbox 文件夹导入到 Thunderbird。“http://kb.mozillazine.org/Importing_folders”上的说明告诉我首先安装 ImportExportTool 扩展，然后我应该看到命令：Tools->ImportExportTools->“import mbox file”，但我没有得到这个命令，但安装过程也没有报告任何错误。结果，我无法进一步进行。

我使用的是win8、thunderbird-17.0.2、ImportExportTool-2.8.0.1。我尝试使用以前版本的 ImportExportTool（来自“http://forum.addonsmirror.net/index.php?showtopic=2074”），但它们与 Thunderbird-17 不兼容。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:09:10.960

对不起，不好的问题。问题是“菜单栏”不可见，所以我从“设置”下访问“工具”，它没有显示“工具”下的所有选项。当我启用菜单栏时，所有工具选项都出现了，现在它正在工作。

# c# - 一到无穷正则表达式

> ID：14236213
> 
> 赞同：2
> 
> 时间：2013-01-09T13:23:50.777
> 
> 标签：c#, asp.net, regex, validation

我正在尝试验证我的文本框控件，它应该包含一个介于 1 和无穷大之间的数字（它不能是 0 或负数）。

我想`regularexpressionvalidator`在 c# 中使用 a，因为`rangevalidator`当我不希望有一个时，a 会要求最大数量。

我希望是否有人可以帮助我创建一个正则表达式来检查介于 1 和无穷大之间的数字。

我在网上搜索过，我发现关闭的东西是`{1,}`，但这会导致`parsing "{1,}" - Quantifier {x,y} following nothing`错误。对正则表达式不太了解，但希望有人能帮我找到答案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T13:27:55.303

如果你只需要一个整数，

```
[1-9][0-9]* 
```

应该有你覆盖。那是“一个非零数字，后跟任意数量的数字”。

如果您不想拒绝`04546`，例如

```
0*[1-9][0-9]* 
```

应该这样做。（同上，前面有零个或多个零。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T13:26:09.133

这会做到：

```
[1-9][0-9]* 
```

一位或多位数字，不包括 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T13:26:19.017

您应该[`CompareValidator`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.comparevalidator%28v=vs.100%29.aspx)使用`ValueToCompare=0`和`Operator="GreaterThan"`。

您还可以使用`compareValidator`检查数字是否为整数，使用`Operator="DataTypeCheck"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T13:27:33.897

假设一个整数类似于

[1-9][0-9]*

应该可以

# c# - mvvm wpf tdd ioc prism 多合一教程

> ID：14236216
> 
> 赞同：4
> 
> 时间：2013-01-09T13:24:02.393
> 
> 标签：c#, wpf, mvvm, inversion-of-control

在以难以形容的方式使用 wpf 将近一年之后，我了解到“正确的” wpf 项目涉及 : `mvvm tdd ioc prism`以及更多的东西。

我想知道是否有一本书/教程可以引导您使用 prism 创建测试驱动的 mvvm wpf 应用程序？

**我分别理解每一种技术，但是当试图将它们组合到一个项目中时，我会一团糟。**

我知道线程： [MVVM：从头到尾的教程？](https://stackoverflow.com/questions/1405739/mvvm-tutorial-from-start-to-finish)

它没有给我这样的东西，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:49:38.983

首先，您所说的“正确”方式对于中小型项目来说是一种巨大的浪费时间，除了 MVVM（应该在每个 MVVM 解决方案中使用，并且不需要任何外部的东西）。

话虽如此，您所要求的内容非常具体，因此您不太可能找到任何涵盖它的教程。
相反，你应该寻找大型开源项目，看看他们是如何做到的，你应该在 CodePlex 中找到不少（GitHub 上星号最高的项目是质量低得惊人的 oO）。

我个人使用 MVVM+PRISM+MEF 但没有使用 TDD，唯一真正不可分离的组件是 MVVM。

# html - div 内容没有显示在正确的位置，因为在 div 之前有 position: relative

> ID：14236218
> 
> 赞同：0
> 
> 时间：2013-01-09T13:24:14.470
> 
> 标签：html, css, position

我有这样的代码：

```
<div style="position:relative">
    <div style="float:left; width: 183px; background-color:#c1cba9; color: #000000;"><img border="0" alt="Product categories" title="Product categories" src="graphic/categrieshead.png" width="179" height="43"><br />
        <div style="margin-left: 10;">Links goes here</div><br />
        <img border="0" src="graphic/catbot.png" width="179" height="17"></div>
    <div style="float:left; width: 480px; height:100px; text-align: center;"><img border="0" src="graphic/description.png" width="232" height="81"><br /><div style="text-align: left; margin-left: 10;">asasasas</div></div>
    <div style="float:left; width: 322px; height:100px; text-align: center;">
        <div style="width: 300px; color: #ffffff; background-color:#6b8861; font-size : 34px;">Item title</div>
        <div style="width: 300px; color: #ffffff; background-color:#6b8861;"><div style="width: 296px; margin: 2 2 2 2; background-color:#ffffff;">Item picture</div><div style="width: 300px; height: 2px; background-color:#6b8861; color: #6b8861;"></div></div>
        <div style="width: 300px; color: #801010; font-size : 60px;">Price: 20£</div>
    </div>
</div> 
```

我需要添加 div 哪些内容（文本）将出现在这三个 div 下，但是通过简单地添加它的文本出现在不正确的位置（右侧的边界之外），我怎么能在我提到的部分之后添加 div 它会出现在预览的那部分下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:28:57.770

`clear:both;`在浮动元素之后使用元素：

```
<div style="clear: both;"></div> 
```

在此之后，您可以插入新的内容 div，它将位于其他内容的下方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:30:15.713

如果我理解正确的问题，您必须添加新的 div 的 CSS `clear:both`。

# wcf-client - SSPI：用户主体名称 WCF 客户端

> ID：14236220
> 
> 赞同：12
> 
> 时间：2013-01-09T13:24:15.940
> 
> 标签：wcf-client, sspi

我正在尝试访问 wcf 客户端。我知道人们现在正在从中获取信息，所以我知道它有效。我的问题是我似乎无法克服它。该服务是相互认证的服务。我在本地计算机上的个人商店中有适当的证书。即使这样，我也会遇到以下异常：

```
 A call to SSPI failed, see inner exception 
```

深入研究异常，我看到了这一点：

```
Message : The target principal name is incorrect 
```

我该如何解决这个问题？我是否需要模拟运行应用程序池的用户？我是否需要添加 Identity\ServicePrincipleName 或 Identity\UserPrincipleName？有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-31T19:00:14.877

在此处查看我对类似问题的回答：[netTCP binding Soap Security Negotiation Failed](https://stackoverflow.com/questions/9683182/nettcp-binding-soap-security-negotiation-failed/16848782#16848782)。本指南应适用于其他绑定，而不仅仅是 TCP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-14T16:39:39.357

为了其他人的未来参考，我遇到了这个问题，但现有的答案没有帮助。

我的问题是`userPrincipalName`用于服务参考。

我最近重新注册了服务参考以更新它，但它`userPrincipalName`用我的电子邮件地址覆盖了日志文件中指定的内容：

```
<endpoint address="net.pipe://localhost/XXXX"
  binding="netNamedPipeBinding" bindingConfiguration="NetNamedPipeBinding_IXXX"
  contract="XXXServiceReference.IXXX"
  name="NetNamedPipeBinding_IXXXX">
  <identity>
    <userPrincipalName value="my@emailaddress.com" />
  </identity>
</endpoint> 
```

为了纠正这个问题，我只是将 更改`userPrincipalName`为`localhost`，它是以前的：

```
<userPrincipalName value="localhost" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-15T17:41:18.963

我在 output.config 文件中重新生成了客户端和端点，现在 `<identity> <userPrincipalName value="Serviecname@companyname.com" /> </identity>` 端点标记中有。所以新的端点看起来像 -

```
 <endpoint address="net.tcp://machinename:6001/ReferenceDataService" binding="netTcpBinding" bindingConfiguration="netTcpBindingConf" contract="IReferenceDataService" >
     <identity>
 <userPrincipalName value="Serviecname@companyname.com" /> 
```

这解决了我的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-11T03:22:22.957

对我来说，当我在端点中指定服务器的用户名时，它就起作用了。不是客户的用户名。它是 UPN，而不是 SPN。

```
new EndpointAddress(
    new Uri("net.tcp://server:1234/MyWcf/svc"),
        EndpointIdentity.CreateUpnIdentity("username@domain.local")) 
```

据我了解，客户端验证它正在与预期用户交谈。

# c# - 如何在 viewmodel 中访问 mvvm 模型中的控件？

> ID：14236222
> 
> 赞同：35
> 
> 时间：2013-01-09T13:24:24.720
> 
> 标签：c#, wpf, silverlight, mvvm, devforce

我有一个 WPF 窗口，在那个窗口中我有一个网格。

我使用 MV-VM 模型，我想在代码中动态地将 TextBox 添加到网格中（在 viewmodel 中）

如何访问网格？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-01-09T21:42:06.580

**使用*监督控制器*模式。**

**阅读：**

*此处显示了CaliburnMicro* MVVM 框架的示例实现（对所有其他框架都一样 - 或者如果您自己执行 MVVM，您可以手动执行）：

[http://drc.ideablade.com/devforce-2012/bin/view/Documentation/cocktail-tutorial-talk-to-view](http://drc.ideablade.com/devforce-2012/bin/view/Documentation/cocktail-tutorial-talk-to-view)

**例子：**

1)**定义接口`IView`**，`ViewModel`( `VM`) 将在其中`View`与所需的方法进行对话

```
public interface IView 
{
    void AddTextBoxToGrid();
} 
```

2）**从你的**和实现方法**继承代码`View``IView`**`IView.AddTextboxToGrid()`

```
public partial class View: IView 
{
    public void AddTextBoxToGrid() 
    {  
        // implement here your custom view logic using standard code behind; 
    }
} 
```

3）**将类型的属性添加`IView`到您的`VM`**

```
public class ViewModel 
{
    public IView View { get; set; }
} 
```

4)**将`View`属性`VM``View`**设置为as**的实例，**`IView` 例如在后面的代码中：

```
 DataContext.View = this as IView; 
```

或在 Caliburn 中，您可以使用 IScreen.OnViewAttached 覆盖方法）

```
public partial class View: IView 
{
    public View()
    {
        // access you VM by the strategy of your framework or choice - this example is when you store your VM in View's DataContext
        (DataContext as ViewModel).View = this as IView;
    } 

    public void AddTextBoxToGrid() 
    {  
        // implement here your custom view logic using standard code behind; 
    }
} 
```

5) In your `VM` **call `IView.AddTextboxToGrid()`**

```
public class ViewModel 
{
    public IView View { get; set; }

    public void AddTextBoxToGrid() 
    {
        if (View == null) return;
        View.AddTextBoxToGrid()
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T20:52:25.043

您应该将创建代码移至 View，并且 ViewModel 应该在应该调用它时通知视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T14:31:24.513

您还可以在视图后面的代码中使用视图的 DataContext（即 ViewModel），并将文本框添加到那里的网格中。那会更有意义。

如果您在 XAML 文件中为网格命名，您将能够立即在后面的代码中访问网格。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-10-04T23:49:04.280

If you are using Caliburn Micro, implement following step:

1.  Make the ViewModel inherited from interface `IViewAware`; you are going to implement two methods AttachView and GetView of this interface.

2.  Define a variable with type of View to get the reference to the View

3.  See detail below:

    ```
    private SomeViewClass v;
    public void AttachView(object view, object context = null)
    {
        v = view as BomView;
        if (ViewAttached != null)
             ViewAttached(this,
             new ViewAttachedEventArgs() { Context = context, View = view });
    }

    public object GetView(object context = null)
    {
        return v;
    } 
    ```

Later on you can access a single element on the View through v such as v.txtName="John"; etc...

# vim - 仅挂到该行的第一个实例，并删除所有其他副本

> ID：14236226
> 
> 赞同：1
> 
> 时间：2013-01-09T13:24:34.097
> 
> 标签：vim

我有一个包含一些行的文件*（难以置信，对:)*，需要清理它。我想删除除该行的第一个实例之外的所有内容。是否有 Vim 的插件可以让我选择保留该行的第一个实例的行（可视行选择），并删除所有其他行，无论我是否选择了其他行（因为我可能会错过第一个实例在文件的开头）？

如果您知道如何快速选择行，删除文件中除第一个实例之外的所有实例，那也可以。

欢迎所有关于此的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:41:52.803

我希望你有 awk 可用。如果为真，您可以这样做：

*   在 vim 中打开你的文件
*   输入（一行） `:command! RML exec '%!awk -vl="'.getline(".").'" ''$0==l{if(\!f)print $0;f=1;next;}1'''`

这将创建一个名为`RML`(Remove Line)的命令

*   然后将光标移动到要删除重复项的行，键入已删除重复`:RML<ENTER>`项，并且只保留第一行。

*   这种方式将保持原始文件中的行顺序

*   无论您的重复线路是否继续，这种方式都有效

有关详细信息，您可以查看下面的 gif 截屏视频：

![在此处输入图像描述](../Images/ddf6c06eb6ee11c685c3d76a958f4ad2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:43:50.663

没有 vim 可能更简单：

如果您只想保留 1 次出现的行与正则表达式“aregexp”匹配，

```
grep "$aregexp" file | head -n 1 > /tmp/thatline #first occurence of the line.
all_other_occurences="$(fgrep -n "$(cat /tmp/thatline)" file | head -n +2 | tac)"
   #fgrep string file : search string in file, literrally, without using regexp
   #head -n +2 (or on some machines: head -n +1) skips the 1st line of the input
   #tac : so that we have line numbers in reverse order (allowing to delete them without moving the next ones up!)
#here add a test to see if all_other_occurence is empty : nothing to do then (there was no lines other than the first one)
#otherwise: 
for linetodelete in "$all_other_occurence" ; do
    # either delete line n in file using sed -i,
    #    or     create&concatenate a vim command that later will be used to
    #           delete those lines from inside vim, via script or copy/paste manually...
done 
```

另一种方法（可能更快！）：删除所有行并在正确的位置重新插入第一次出现

```
thelinenumber=$( awk '$0~var{print NR;exit}' var="$aregexp" < file)
   #will exit as soon as it finds the 1st occurence
theline="$(sed -e "${thelinenumber}p" < file)" 
fgrep -v "$theline" file > newfile #delete all occurence
awk -v l="$thelinenumber" -v s="$theline" 'NR == l {print s} {print}' file > file.new 
```

我没有检查那些，但我希望你能看到意图并纠正任何语法问题（并添加双重检查，对于空变量，测试是否只有 1 行出现等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T08:04:52.370

一个快速的方法是

去你想要的线路

```
ma
0y$
:g/\V<ctrl-r>"/m'a
:/\V<ctrl-r>"/d 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-29T15:48:01.017

我的[PatternsOnText 插件](http://www.vim.org/scripts/script.php?script_id=4602)提供了一个

```
:DeleteDuplicateLinesOf . 
```

命令（以及其他相关命令）正是这样做的。

# c# - c#静态Web方法中的用户输入

> ID：14236233
> 
> 赞同：-1
> 
> 时间：2013-01-09T13:25:06.303
> 
> 标签：c#, asp.net, ajax, pagemethods

我的场景是 - 我有一个 Asp.Net 页面，我从中调用 ajax 调用 C# 静态 Web 方法（页面方法）。在这种方法中，我正在做一些功能，并且希望在两者之间向用户显示一个输入框以获取一些用户输入。是否可以从此页面方法调用 JS 函数，该函数将向用户显示模型弹出窗口并获取值并返回页面方法以继续调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:28:49.597

如果我正确理解你可以（从你的问题的高层次的角度来看）：

1.  用户激活 AJAX 请求。
2.  该请求启动一个进程并返回一个带有一些 JavaScript 的中间页面，该页面将立即显示一个弹出请求输入。
3.  然后，JavaScript 将向您的第二个端点发出第二个 AJAX 请求，该请求将继续调用。
4.  第二个端点将您的最终结果返回到页面。

# fullcalendar - fullcalendar 固定行高

> ID：14236235
> 
> 赞同：10
> 
> 时间：2013-01-09T13:25:11.060
> 
> 标签：fullcalendar

如何在全日历中设置行的固定高度？如果事件太多，我想要垂直滚动条。

```
$('#calendar').fullCalendar('option', 'contentHeight', 50); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-01-05T14:03:40.363

对我来说只有这个有效

```
.fc-agendaWeek-view tr {
    height: 40px;
}

.fc-agendaDay-view tr {
    height: 40px;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-09T13:56:34.523

如果要更改每个时隙行的高度，可以覆盖 css 类。

```
.fc-agenda-slots td div {
     height: 40px !important;
} 
```

如果您还有其他意思，请告诉我们。

contentHeight 仅用于计算日历的高度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T06:57:06.263

在我的脚本中，我想让行更小，但您可以使用相同的代码来使它们更大。当使行变小时，我必须合并第一列的每 4 个单元格（以 15 分钟的粒度工作）以使小时指示适合单元格。使用以下代码合并单元格：

```
$(function(){
    // Merge first column, each 4 rows to display time in larger format
    $('table.fc-agenda-slots tbody tr:not(.fc-minor)').each(function(){
        $(this).find("th:first-child").css("font-size", "12px").attr('rowSpan',4); //
        $(this).nextUntil("tr:not(.fc-minor)","tr.fc-minor").find("th:first-child").remove();
    });
}) 
```

然后，使用 CSS 应用正确的行高。请注意，我添加了 line-height 样式，这是与 bootstrap 兼容所需的。我还确保在日历之外拖动时，默认选择行为不适用。

```
 body {
            -moz-user-select: none;
            -khtml-user-select: none;
            -webkit-user-select: none;
            user-select: none;              
        }

        .fc-agenda-slots td div {
            height: 6px;
            line-height: 6px;
        }
        .fc-agenda-axis {
            font-size:1px;
            line-height: 1px;
        } 
```

# c - 我可以调用用另一个函数编写的函数吗？

> ID：14236236
> 
> 赞同：2
> 
> 时间：2013-01-09T13:25:12.120
> 
> 标签：c, function, scope

> **可能重复：**
> [C 中的嵌套函数](https://stackoverflow.com/questions/2608158/nested-function-in-c)

在 C 中，如果我以这种结构编写程序：

```
main ()
{
  int function1(...)
  {
    ....
  }
}

function 2()
{
   function1(...)
} 
```

是否可以从编写在主函数中的函数 2 调用函数 1？还有：在 C 中，所有函数都是全局的？或者在某些情况下存在一些限制，您不能从一个函数调用另一个函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:26:54.593

您不能在 C 中嵌套函数定义。

```
int main(void)
{
  int function1(void)
  {
      /* ... */
  }
} 
```

上述定义`function1`无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:27:17.500

**编辑**

在 GNU C 中可以嵌套函数。我尝试了这个小片段并且它有效

```
#include <stdio.h>

int main()
{
    void printy() { printf("hallo\n"); }

    printy();
} 
```

像 GNU C 页面声称[http://gcc.gnu.org/onlinedocs/gcc/Nested-Functions.html](http://gcc.gnu.org/onlinedocs/gcc/Nested-Functions.html)

**嵌套函数的名称在定义它的块中是本地的**

事实上，如果我将代码更改为

```
#include <stdio.h>

void func2();

int main()
{
    void printy() { printf("hallo\n"); }

    printy();

    func2();
}

void func2()
{
    printy();
} 
```

我明白了

```
gcc test.c
/tmp/ccGhju4n.o: In function `func2':
test.c:(.text+0x3f): undefined reference to `printy'
collect2: ld returned 1 exit status 
```

# c# - Tibco 消息监听器 - 垃圾收集

> ID：14236238
> 
> 赞同：2
> 
> 时间：2013-01-09T13:25:27.390
> 
> 标签：c#, garbage-collection, listener, tibco-rv

我有一个奇怪的问题，让我们从一段代码开始：

```
foreach (var para in paras)
{
    var specificSubject = string.Format(subject, paras);
    _listener = new Listener(Queue.Default, transport, specificSubject, new object());
    _listener.MessageReceived += OnMessage;
} 
```

如您所见，我创建了一个 Tibco 侦听器对象，将其订阅到某个远程守护程序，然后将引用移动到我创建的下一个 Tibco 侦听器对象。

我希望垃圾收集器收集除最后一个之外的所有侦听器对象，因为 _listener 引用它。但是，运行结果表明所有侦听器对象都在工作。

所以为什么？仅仅是因为我没有运行我的应用程序足够长的时间，以至于 GC 没有时间收集侦听器对象，还是有一些固有的东西在引用“应该孤立”的侦听器对象？

请赐教！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:53:09.160

通常，您永远无法确定垃圾收集器何时运行，因此在没有任何其他数据的情况下，最可能的解释是您的第一个猜测，即 GC 尚未收集侦听器。

我的 RV 文档（来自 7.2 版）指出

> 侦听器对象继续侦听消息，直到程序将其销毁。Listener.Destroy 方法显式地销毁侦听器，立即取消对消息的兴趣。您也可以通过删除对它的所有引用来隐式销毁侦听器，但垃圾收集器可能会在销毁对象并取消兴趣之前**引入延迟。**

（突出我的）。所以它证实了你的猜测。

# bash - bash 在特定用户登录时做某事

> ID：14236243
> 
> 赞同：2
> 
> 时间：2013-01-09T13:25:38.543
> 
> 标签：bash, ubuntu

我想在某个用户登录时执行某个 bash 脚本。我想在该用户的初始化文件中调用该脚本，例如`.bashrc`，但这不适用，因为在现实生活中其他人不应该被允许写入用户初始化文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:31:07.317

使用户的 .bashrc 为 root 拥有并拥有 644 权限。使其如下所示：

```
run_specific_command_that_the_user_cannot_bypass
[ -r ~/.bashrc.user] && . ~/.bashrc.user 
```

或使用系统范围的 /etc/profile （或在您的机器上调用的任何内容）。没有其他选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:38:09.787

`/etc/bash.bashrc`在or的尾部添加这样一行`/etc/profile`：

```
if [ $USER == 'jsmith' ]; then do-something-interesting; fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T07:22:58.093

我可以在无限循环中使用 comman 来解决它`finger`，当命令的行输出增加时，这意味着有人登录，然后我可以通过对这个用户做任何我想做的事情来处理它，这里是代码：

```
#! /bin/bash
n=0;
while(true)
do
    if [ $n -gt `finger | awk 'END{print NR}'` ]
    then
        mailx -s "hey you" `awk  'END{print $1}'` < mailBody
    fi 
    n=`finger | awk 'END{print NR}'`;   
done 
```

注意：您可以初始化`n`以`n=${finger | awk 'END{print NR}'}`避免考虑有人在脚本执行开始时登录，或者任何您想要的。

# google-chrome - 是否可以在浏览器中模拟方向？

> ID：14236245
> 
> 赞同：64
> 
> 时间：2013-01-09T13:25:49.057
> 
> 标签：google-chrome, css, firebug, media-queries, developer-tools

作为标题，是否可以在 google chrome 或 firefox 中模拟方向？意味着以某种方式更改浏览器以支持媒体查询（方向=（横向或纵向））

我有一个移动模拟器，但我想拥有来自 chrome 或 firebug 的开发人员工具。

### 更新

Chrome v25 特定...

对于任何人，在**Google Chrome Dev Tool > Overrides > Override Device Orientation**中，您可以更改`alpha`,`beta`和`gamma`. 我认为这是一个开始的地方，但我不知道这些是如何工作的，因此找不到任何东西..

也可以模拟 CSS 媒体，但不是纵向和横向，而是打印、屏幕、电视等。

### 更新 v2

这是一个老问题，Chrome 已经多次更改如何做到这一点。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-28T14:15:28.510

在 Chrome 开发工具中：如果您转到**设置>覆盖>设备指标**

如果您将尺寸交换为屏幕分辨率，则方向将更改，并且将触发orientationchange事件。

**方向取决于 'width' 和 'height' 之间的**关系。如果 'height' 的值高于 'width'，浏览器将处于方向：'portrait'，反之亦然。

高度 > 宽度 = 纵向
高度 < 宽度 = 横向

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-03-23T00:54:26.410

我确信其他人现在已经想出了如何在 Chrome 中模拟方向，但我遇到了这篇文章，并想为仍在寻求帮助的任何人添加说明。

其实很简单。

## 这些说明是最新的

* * *

# **铬稳定版 34.0.1847.131**

* * *

在 Chrome 开发工具中（在 Chrome 中，按 F12 以调出 Chrome 开发工具）转到 Emulation 选项卡。
从下拉列表中选择您要模拟的设备，然后点击*Emulate*。当您进行模拟时，“模拟”选项卡左侧堆叠部分列表中的“屏幕”部分会获得一个复选标记，表示它处于活动状态。选择它。

在屏幕部分，您正在模拟的设备的分辨率将显示在顶部附近的文本输入字段中。它们之间有一个“交换尺寸”按钮，可以用高度切换宽度，这实际上会将您的仿真从纵向切换到横向。

## 您可以在 Chrome 开发工具的模拟器中做一些其他相关的事情

你可以：

*   模拟设备像素比
*   模拟 CSS 媒体类型（盲文、浮雕、手持、打印、投影、屏幕、语音、tty、电视：有关详细信息，请参阅[RFC 2534](http://www.ietf.org/rfc/rfc2534.txt)和相关文档）
*   欺骗用户代理：您可以让 Chrome “冒充”其他浏览器引擎。
*   模拟触摸屏（它并不完美，但触感很好（<= *rimshot*））
*   模拟地理位置坐标（包括“位置不可用”模拟）
*   模拟加速度计

# 我对纵向发展的个人建议

假设你有一个 16:9 的显示器、一个旋转的 VESA 支架和支持改变方向的驱动程序（你可以在 Windows 的屏幕分辨率设置中找到。如果有一个“方向”下拉列表，那么你可以旋转你的视图）

物理旋转您的屏幕，然后在 Windows 中旋转您的显示器（您也可以 [Ctrl][Alt][Left Arrow] 来旋转显示器）。如上所述模拟纵向并将设备像素比设置为 1。这会将您的移动设备模拟器放大到全屏尺寸。如果没有其他帮助，它不会原生触发移动布局，但基于 em 的媒体查询将允许您 [Ctrl][+] 放大 Chrome 的 em 值以触发您的移动布局。

**使用开发工具仿真允许您在没有触摸屏监视器的情况下*近似*触摸屏界面。**

**它还允许您让任何尺寸的 16:9 显示器显示“宽屏”移动布局。自然地，16:10 的显示器可以让您模拟 10:16 的布局，而无需调整浏览器的大小**

我真正希望看到谷歌添加的一个功能是在模拟“双击”自动调整窗口大小时的能力。目前不支持。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-09-25T19:31:07.147

我正在使用控制台并输入此行

```
window.dispatchEvent(new Event('orientationchange')); 
```

它将触发orientationchange 事件并因此触发您在脚本中拥有的任何事件侦听器。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-04-24T02:42:53.190

# 有关 Chrome 最新仿真功能/更新的说明，请参阅[K. Alan Bates 的回答。](https://stackoverflow.com/questions/14236245/is-it-possible-to-emulate-orientation-in-a-browser/22585680#22585680)

[是否可以在浏览器中模拟方向？](https://stackoverflow.com/questions/14236245/is-it-possible-to-emulate-orientation-in-a-browser/22585680#22585680)

**模拟媒体类型**

打开 Chrome Web 工具面板（F12 或您打开它的方式）单击开发者工具窗口右上角的小 sprocket（以前版本的 chrome 的右下角）。在**设置**标题下，单击**覆盖**。接下来，选中**Emulate CSS Media**旁边的复选框，然后从下拉列表中选择要模拟的媒体目标。

![在此处输入图像描述](../Images/112232ee9f550781191b9b81fa6541e6.png)

**模拟方向变化**

看看[这个 jsfiddle](http://jsfiddle.net/CoryDanielson/CuQCB/)并调整输出框架的大小——它将根据浏览器的方向切换背景。

```
body {
    background-position: top center;
}

@media screen and (orientation: portrait) {
    body { background-image: url('http://petapixel.com/assets/uploads/2013/01/vangough.jpg'); }
}
@media screen and (orientation: landscape) {
    body { background-image: url('http://cdn-media.hollywood.com/images/l/BobRoss2_620_102912.jpg'); }
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-03-07T09:46:52.490

正如@MrOggy85 所说，方向由浏览器的高度和宽度定义。**您可以通过Tools > Web Developer > Responsive Design View**在 Firefox 中模拟此功能，这使您可以选择常见的屏幕尺寸并翻转方向。我希望这有帮助？

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-11-20T10:58:14.827

对于最新的 Chrome（版本 62），它完全改变了。

1.  切换开发人员工具。
2.  单击右上角的菜单“自定义和控制 DevTools”。
3.  浏览更多工具 -> 传感器。
4.  根据需要将方向更改为横向左侧或横向右侧。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-05-04T04:12:38.960

这里有很多答案，但我认为 Chrome 可能已经略有发展，这并不太复杂。在 Chrome 中进入**开发者工具 > 仿真。**有 4 个子选项卡：设备、屏幕、用户代理和传感器。在**设备**下，您可以选择您的设备（例如“Apple iPad 1 / 2 / Apple Mini”）。如果您需要模拟交换方向，只需进入“**屏幕**”子选项卡，就会有一个带有左右箭头的小按钮来交换方向。只需按下那个按钮。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-05-20T09:15:52.347

简单的！！！如果您正在模拟设备，默认视图是纵向，（尽管纵向的 css 媒体查询）您可以只处理分辨率，Google 的文档中有这张图片 [https://developer.chrome.com/devtools/docs/mobile-emulation /device_metrics.png](https://developer.chrome.com/devtools/docs/mobile-emulation/device_metrics.png)

只需单击分辨率宽度和高度之间的箭头及其完成！

享受

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-04-13T14:06:31.437

有点晚了，但这也适用于谷歌浏览器。

打开 firebug 并单击电话图标，然后您可以选择要在其中查看应用程序的设备型号。

像这样的东西

![在此处输入图像描述](../Images/c783fc2a3ed99aca3aa65cdd6bc74a34.png)

接下来，转到如上图所示的属性`resolution`。`emulation`（右下角）现在单击同一`resolution`属性中的双箭头图标。你应该看到这样的东西

![在此处输入图像描述](../Images/4110f5d1509df45ddbf64ee2a22ed133.png)

看到高度和宽度已被交换并因此旋转:)

希望有帮助。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-08-12T09:21:36.700

在仿真选项卡中，只需单击左侧的屏幕按钮和 320 和 568 之间的按钮，即可切换分辨率！这将模拟纵向和横向模式。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-10-15T10:09:09.427

可以在 Chrome 中模拟设备方向更改。只需转到“设置”菜单，该菜单可以使用开发人员工具右下角的齿轮图标打开，然后选择“覆盖”选项卡。选择“覆盖设备方向”复选框并在输入框中输入新值。

Alpha 表示设备围绕 z 轴从 0 到 360 度的运动。Beta 表示设备围绕 x 轴从 -180 到 180 度的运动——从前到后的运动。Gamma 表示设备围绕 y 轴从 -90 到 90 的运动——从左到右的运动。更改值将触发 deviceorientation 事件。

希望这会有所帮助。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-10-10T09:41:33.353

只需在设置方向之前更改上下文....

```
driver.context("NATIVE_APP");
driver.rotate(ScreenOrientation.LANDSCAPE);
driver.context("WEBVIEW_1"); 
```

# c++ - 32 位 SetTimer Windows 回调的 64 位兼容性

> ID：14236246
> 
> 赞同：-1
> 
> 时间：2013-01-09T13:25:49.587
> 
> 标签：c++, windows, 64-bit, 32-bit

**以前在 32 位 windows 上工作的32**位 windows c++ 应用程序现在需要在 64 位 windows 机器上使用。使用 VisualStudio2008。呼叫是

`SetTimer(m_hWnd, nTimerID, nElapse, *pReceiver)`

可以在`WinUser.h`.

我在编译时将预处理器定义从更改`WIN32`为。`WIN64`应用程序在 64 位 pc 上编译和运行，但没有触发回调（应用程序行为使这一点很明显）。

有没有办法让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:13:25.380

```
 class DelayedAction
 {

  public:
  DelayedAction( int expirePeriod, boost::function<void()> callback ):
      work( service),
      thread( boost::bind( &DelayedAction::run, this)),
      timer( service),
      m_callback(callback),
      m_expirePeriod(expirePeriod)
  {}

  ~DelayedAction()
  {
      thread.join();
  }

  void startTimer()
  { 
  }

  void on_some_event()
  {
    startAfter(m_expirePeriod);
  }

  void stop()
  {
    timer.cancel();
  }

  void startAfter( const size_t delay)
  {
      // no need to explicitly cancel
      // timer.cancel();
      timer.expires_from_now( boost::posix_time::seconds( delay) );
      timer.async_wait( boost::bind( &DelayedAction::action, this, boost::asio::placeholders::error));
  }

  private:
  void run()
  {
      service.run();
  }

  // ...

  void action(const boost::system::error_code& e) 
  {
      if(e != boost::asio::error::operation_aborted)
          std::cout << "action" << std::endl;
          m_callback();
  }

  int m_expirePeriod;
  boost::function<void()> m_callback;

  boost::asio::io_service         service;
  boost::asio::io_service::work   work;
  boost::thread                   thread;
  boost::asio::deadline_timer     timer;

 }; 
```

# android - 从android中的光标获取值

> ID：14236251
> 
> 赞同：0
> 
> 时间：2013-01-09T13:26:03.147
> 
> 标签：android, sqlite, cursor

我正在从 sqlite 数据库中获取这样的查询：

```
String query = "select distinct(" +MessageCountConstant.To_USER + "), sum(" +MessageCountConstant.SEND_MESSAGE_COUNT + ") , "
            + "sum(" +MessageCountConstant.RECIEVE_MESSAGE_COUNT + ") from " +TABLE_NAME + " where " + MessageCountConstant.DATE  + "= " +date
             + " AND "+ MessageCountConstant.DATE  + " >= "+previousDate + " AND "+ MessageCountConstant.JID + " = '"+ Uname + "'"
                        ;

    SQLiteDatabase db = mOpenHelper.getReadableDatabase();
    cursor = db.rawQuery(query, null); 
```

现在谁能告诉我如何从光标中获取值。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:32:25.817

你可以这样使用它

```
if (cursor.moveToFirst()){

 do{
      String data = cursor.getString(cursor.getColumnIndex("data");

      // do what ever you want here

   }while(cursor.moveToNext());

}

cursor.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:29:29.093

一般来说，您可以通过执行以下操作从光标中获取值：

```
while( cursor.moveToNext() ) {
    String value1 = cursor.getString(cursor.getColumnIndex("column1"));
    String value2 = cursor.getString(cursor.getColumnIndex("column2"));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T13:35:19.260

您可以像这样获取数据：

```
for(cursor.move(0);cursor.moveToNext();cursor.isAfterLast()){
   String first = cursor.getString(cursor.getColumnIndex("string_row"));
   int second cursor.getInt(cursor.getColumgnIndex("int_row"));
} 
```

并且不要忘记在获取数据后关闭光标：`cursor.close();`

# java - Struts 2 文件上传 - 运行中的文件属性为空

> ID：14236259
> 
> 赞同：1
> 
> 时间：2013-01-09T13:26:17.640
> 
> 标签：java, file-upload, struts2

我在 SO 上阅读了有关此问题的所有问题，并仔细遵循了[官方 Struts 2 文件上传文档](http://struts.apache.org/2.x/docs/file-upload.html)，但我仍然遇到问题。动作完成没有错误，但我似乎无法捕捉上传的文件，因为动作中的 3 个文件属性始终为空。就像 fileUploadInterceptor 没有完成它的工作一样。这是我的代码：

动作映射：

```
<action name="merchantSaveOrUpdate" class="merchantSaveOrUpdateAction">
    <interceptor-ref name="fileUpload">
        <param name="allowedTypes">image/jpeg,image/gif,image/png</param>
    </interceptor-ref> 
    <result name="success" type="redirectAction">merchantList</result>
</action> 
```

jsp：

```
<s:form action="merchantSaveOrUpdate" method="POST" enctype="multipart/form-data">
    <label>Merchant Name</label> <input type="text" value="${merchant.name}" name="name"><br />
    <label>Merchant Logo</label> <s:file name="logo" /> <br />
    <s:submit class="btn submit" />
</s:form> 
```

行动：

```
public class MerchantSaveOrUpdateAction extends ActionSupport {

    private File logo;
    private String logoContentType;
    private String logoFileName;
    private String name;

    public File getLogo () {
        return logo;
    }

    public void setLogo ( File logo ) {
        this.logo = logo;
    }

    public String getLogoContentType () {
        return logoContentType;
    }

    public void setLogoContentType ( String logoContentType ) {
        this.logoContentType = logoContentType;
    }

    public String getLogoFileName () {
        return logoFileName;
    }

    public void setLogoFileName ( String logoFileName ) {
        this.logoFileName = logoFileName;
    }

    public String getName () {
        return name;
    }

    public void setName ( String name ) {
        this.name = name;
    }

    public String execute() throws Exception {

        String result = super.execute();

        // the problem is here - name is populated, but the 3 logo properties are null

        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:33:43.580

当你为一个动作定义拦截器时，你必须为那个动作定义*所有的拦截器。*

换句话说，您的操作当前只有一个拦截器正在运行，即文件拦截器。

请注意，链接页面上的所有配置均不包括*文件*拦截器。

包括`defaultStack`文件拦截器。动作可以这样配置：

```
<action name="merchantSaveOrUpdate" class="merchantSaveOrUpdateAction">
    <interceptor-ref name="defaultStack">
        <param name="fileUpload.allowedTypes">image/jpeg,image/gif,image/png</param>
    </interceptor-ref> 
    <result name="success" type="redirectAction">merchantList</result>
</action> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T05:57:58.787

关于您的问题，您可以在 struts.xml 中包含文件 upload.xml。

```
<struts>

    <include file="fileupload.xml"></include>
   <package name="default" extends="struts-default">
        <!-- file upload  -->
        <action name="upload" class="com.action.FileUpload">
    <result  name="success">success.jsp</result>
        <result name="error">error.jsp</result>
        </action>

    </package>
</struts> 
```

此文件 upload.xml 应包含拦截器引用...

```
<struts>
    <package name="fileUploadPackage" extends="struts-default">
        <interceptors>
                      -------------
                      -------------
      <interceptor-ref name="fileUpload">
        <param name="maximumSize">your file size</param>
    <param name="allowedTypes">image/jpeg,image/gif,image/png</param>
    </interceptor-ref>
                     ------------------
                     ------------------
                </interceptors>

    </package>
</struts> 
```

也可以通过其他方式完成，请检查此 url[文件上传](http://viralpatel.net/blogs/struts-2-file-upload-save-tutorial-with-example/)

# java - 带有动画的Android滑入/滑出布局

> ID：14236262
> 
> 赞同：1
> 
> 时间：2013-01-09T13:26:30.337
> 
> 标签：java, android, animation, slidedown

我已经用谷歌搜索了很多关于这个问题的信息。

我有一个带有 3 个线性布局的线性布局。

第一个就像第二个的标题。最后一个只是一些其他内容。

我现在不想向上/向下滑动第二个布局。这段代码可以正常工作：

向下滑动：

```
Animation a = AnimationUtils.loadAnimation(getApplicationContext(), R.anim.show_zeiten); 
                a.setFillAfter(true); 
                zeiten_sonstigeZeiten_Layout.startAnimation(a); 
                zeiten_sonstigeZeiten_Layout.setVisibility(View.VISIBLE); 
```

我的问题是 3 布局在动画开始时立即跳转到他的新位置。我想实现 3\. 布局顺利滑到第二个下方。

我的动画

```
<set xmlns:android="http://schemas.android.com/apk/res/android"  
android:fillEnabled="true"  
android:interpolator="@android:anim/accelerate_interpolator" >  
<translate       
      android:duration="@android:integer/config_mediumAnimTime"    
      android:fromYDelta="-100%"      
         android:toYDelta="0" /> 
```

有没有人提示我如何做出这种行为？

谢谢您的帮助！最好的问候施万迪

编辑：

我试图添加一个animationListener，但没有一个方法被调用：

```
Animation a = AnimationUtils.loadAnimation(context, R.anim.show_zeiten); 
                a.setFillAfter(true); 

                a.setAnimationListener(new AnimationListener() {
                    @Override
                    public void onAnimationStart(Animation animation) {
                        Log.e(TAG,"onAnimationStart");
                                }

                    @Override
                    public void onAnimationRepeat(Animation animation) {
                        Log.e(TAG,"onAnimationRepeat");
                                }

                    @Override
                    public void onAnimationEnd(Animation animation) {

                        Log.e(TAG,"onAnimationEnd");
                        zeiten_sonstigeZeiten_Layout.setVisibility(View.VISIBLE);

                                }
                });

                zeiten_sonstigeZeiten_Layout.startAnimation(a); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:45:27.480

您正在动画开始时进行更改。最好的方法是添加一个`AnimationListener`并在动画结束后更改布局。

```
yourAnimationObject.setAnimationListener(new AnimationListener() {
        @Override
        public void onAnimationStart(Animation animation) {
                    }

        @Override
        public void onAnimationRepeat(Animation animation) {
                    }

        @Override
        public void onAnimationEnd(Animation animation) {
            // setLayoutParams here 
                    }
    }); 
```

# types - 什么时候一个类型应该是一个包含另一种类型的结构，什么时候它应该只是“扩展”（？）那个类型？

> ID：14236263
> 
> 赞同：2
> 
> 时间：2013-01-09T13:26:31.280
> 
> 标签：types, struct, go

我目前正在通过解决[rosalind 问题](http://rosalind.info)（基本上是一堆与生物信息学相关的代码 katas）来学习 Go。

我目前正在代表具有以下类型的 DNA 链：

```
type DNAStrand struct {
    dna byte[]
} 
```

我最初的原因是封装字节切片，所以我知道它只包含代表核苷酸的字节：`'A', 'C', 'G', 'T'`。我意识到这显然没有保证，因为我可以简单地做：

```
DNAStrand{[]byte("foo bar")} 
```

并且不再保证我的 dna 链包含一个字节数组，其中仅包含这四个字节中的元素。

由于我的结构仅包含一个字节数组，这样做是否更好/更符合思想：

```
type DNAStrand []byte 
```

还是让类型包含 dna 链更好？对于何时使用这两种方法中的任何一种，是否有任何经验法则？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T19:05:07.910

以你的具体例子，我可能会做这样的事情：

```
type neucleotide char // unexported type users can't construct their own.

type DNAStrand []neucleotide // because users can't construct their own
                             // nucleotides they also can't construct their
                             // own DNAStrands.

const (
  // These are exported values so they can use these nucleotides to construct a
  // DNAStrand with.
  A nucleotide = 'A'
  C nucleotide = 'C'
  G nudleotide = 'G'
  T nucleotide = 'T'
)

// This function allows them to actually construct a DNAstrand with a list of
//  nucleotides from the constants above.
func New(nts ...nucleotide) DNAStrand {
    return nts
} 
```

由于核苷酸类型未导出，用户无法自己构建。您在导出的 const 中提供了它们唯一允许的实例，因此没有用户可以提供他们自己的新核苷酸。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:39:06.230

零字段的结构很方便。具有许多字段的结构更加方便。仅具有一个字段的结构有点特殊，我想不出一个合理的“好”情况来使用它们——即使它们经常“在野外”看到。我，一方面，不使用它们。

无论如何，如果您真的需要关于`DNAStrand`切片内容的更严格/防弹的安全性 - 那么可以使用单字段结构并为此/此类命名类型定义参数检查设置方法。

在这种情况下，如果稍​​后从其他包中使用该定义，则无法以使用[package unsafe](http://golang.org/pkg/unsafe/)为模来规避检查并获得与您的`DNAStrand{[]byte("foo bar")}`示例等效的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T22:47:48.767

我会使用`type DNAStrand []byte`它，因为它很简单，而且我可以在上面使用正则表达式。我可能会使用一个初始化函数来检查每个字节是否都在 ACGT 中。

```
var validDNAStrandPat = regexp.MustCompile("[ACTG]*")

func DNAStrandForString(s string) DNAStrand {
    if !validDNAStrandPat.Match(s) {
        panic("Invalid DNA Strand.")
    }
    return DNAStrand([]byte(s))
} 
```

# php - Joomla 2.5 自定义搜索页面，显示模块

> ID：14236282
> 
> 赞同：0
> 
> 时间：2013-01-09T13:27:19.953
> 
> 标签：php, joomla, joomla2.5

我确实去过谷歌的第 18 页，无论如何，我需要做的就是创建一个自定义搜索结果页面，您可以在其中为其分配特定模块。

使用 Universal Live Ajax 搜索模块

因为如果模块未设置为“在所有页面上显示”，则它不会显示在搜索结果页面上。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:52:55.450

当您没有设置页面选项时，模块不显示的原因`"display on all pages"`是`specific pages`因为您`itemid`在该特定页面上没有。您可以为组件创建一个菜单，然后将模块分配给此菜单。在 itemid 的搜索表单中创建一个隐藏字段如果它不存在并`itemid`在字段中设置值。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:00:46.767

好吧，在查看了普通搜索和通用实时 Ajax 搜索之后……通用实时 Ajax 搜索缺少一个参数，它将其链接到自定义搜索页面……

标准搜索具有“Itemid”参数，而通用实时 Ajax 搜索没有，所以我暂时在 Ajax 搜索中硬编码了我的隐藏搜索页面项目 ID，方法是添加以下代码行：

```
<input type="hidden" name="Itemid" value="THE ID OF YOUR HIDDEN MENU ITEM HERE" /> 
```

`<input type="hidden" name="option" value="com_search" />`在 joomlasite/modules/mod_universal_ajaxlivesearch/mod_universal_ajaxlivesearch.php 的第 188 行下面

不管怎么说，还是要谢谢你。:)

# java - NetworkOnMainThread 异常

> ID：14236288
> 
> 赞同：0
> 
> 时间：2013-01-09T13:27:26.707
> 
> 标签：java, android, service

我得到这个异常，我不知道为什么，这就是我拥有的类：一个启动一个服务的活动，它启动一个连接到数据库的 ScheduledExecutorService 类（这就是连接的原因）。

当我尝试通过我的服务进行连接时，我明白为什么会出现此异常，但现在我创建了一个新的类/任务来执行此操作，但我仍然遇到此异常。

我没有附加代码，因为它有很多代码，问题可能出在我管理这个系统的方式上，而不是代码本身，如果您想看到其他任何内容，请告诉我。

* * *

请参阅[通过服务管理与 mysql 的连接以](https://stackoverflow.com/questions/14231703/managing-a-connection-to-the-mysql-through-a-service/14232064#comment19744504_14232064)获取有关为什么 a`Thread`在这种情况下不合适的更多信息。

**编辑** 代码附件：这是我向数据库发送详细信息的第三类。

```
public class SendLocation 
{
    private String lastAddress;
    private int id;
    private Connection conn;
    private PreparedStatement stmt;
    private LocationService ls1;
    private final ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);

    public SendLocation(int id,LocationService ls1)
    {
        this.lastAddress = "";
        this.id = id;
        this.conn = null;
        this.sqlConnect();
        this.sqlInsertStatement();
        this.ls1 = ls1;
    }
    public void send()
    {
        final Runnable sender = new Runnable() 
        {
            public void run() 
            { 
                if(!lastAddress.equals(ls1.getAddress()) && !ls1.getAddress().equals(""))
                {
                    lastAddress = ls1.getAddress();
                    try 
                    {
                        stmt.setInt(1, id);
                        stmt.setString(2, lastAddress);
                        stmt.execute();
                    } 
                    catch (SQLException e) {
                        e.printStackTrace();
                    } 
                }
            }
        };

        final ScheduledFuture sendHandle = 
                scheduler.scheduleAtFixedRate(sender, 1, 1, TimeUnit.SECONDS);

        scheduler.schedule(new Runnable()
        {
            public void run() 
            { 
                sendHandle.cancel(true); 
            }
        }, 60 * 60, TimeUnit.SECONDS);
    }

     public boolean sqlConnect()
        {
            try {
                Class.forName(Config.DRIVER).newInstance();
                DriverManager.setLoginTimeout(100);
                this.conn = DriverManager.getConnection(Config.URL+Config.DBNAME,
                        Config.USERNAME,Config.PASSWORD);
                return true;

            }catch (Exception e) {
                e.printStackTrace();
                return false;
            }
        }
     public void sqlInsertStatement()
     {
         try {
             this.stmt = conn.prepareStatement
                     ("INSERT INTO locations(id, location) VALUES (?,?)");
         }catch (SQLException e1) {
             e1.printStackTrace();
         }
     }
} 
```

**编辑**

我将任务更改为线程这里是新代码：

```
public class SendLocation extends Thread
{
    private String lastAddress;
    private int id;
    private Connection conn;
    private PreparedStatement stmt;
    private LocationService ls1;
    private boolean run;

    public SendLocation(int id,LocationService ls1)
    {
        this.lastAddress = "";
        this.id = id;
        this.conn = null;
        this.sqlConnect();
        this.sqlInsertStatement();
        this.ls1 = ls1;
        this.run = true;
    }
    public void run() 
    { 
        while(run)
        {
            if(!lastAddress.equals(ls1.getAddress()) && !ls1.getAddress().equals(""))
            {
                lastAddress = ls1.getAddress();
                try 
                {
                    stmt.setInt(1, id);
                    stmt.setString(2, lastAddress);
                    stmt.execute();
                    sleep(1000);
                } 
                catch (Exception e) {
                    e.printStackTrace();
                } 
            }
        }
    }       
    public void destroy()
    {
        this.run = false;
    }
    public boolean sqlConnect()
    {
        try {
            Class.forName(Config.DRIVER).newInstance();
            DriverManager.setLoginTimeout(100);
            this.conn = DriverManager.getConnection(Config.URL+Config.DBNAME,
                    Config.USERNAME,Config.PASSWORD);
            return true;

        }catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    }
     public void sqlInsertStatement()
     {
         try {
             this.stmt = conn.prepareStatement
                     ("INSERT INTO locations(id, location) VALUES (?,?)");
         }catch (SQLException e1) {
             e1.printStackTrace();
         }
     }
} 
```

我现在怎么会得到 NetworkOnMainThread 异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:28:40.690

异常意味着您正在 UI 线程上执行长期操作，例如网络操作。从 android 3 开始，这些操作是不允许的，并且会抛出异常。因此，为了避免异常，您应该以异步方式执行代码。您不必创建类，但您必须创建一个扩展`Thread`或扩展的类`AsyncTask`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:30:57.253

您可以通过以下指南来解决您的问题。

> ```
>  android.os.NetworkOnMainThreadException 
> ```

**HoneyComb（3.0 或更高版本）**会出现此错误。

 ****如文档所述，您无法在其主线程上执行网络操作。**要解决这个问题，您必须使用处理程序或异步任务。AFAIK 没有其他方法可以做到这一点。

您可以查看此内容以了解更多详细信息[为什么 ICS 会导致您的应用程序崩溃](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

尝试使用下面的代码片段

```
new Thread(){
    public void run(){
        //do your Code Here    
    }
}.start(); 
```**

# python - matplotlib 中的事件连接和子图

> ID：14236290
> 
> 赞同：4
> 
> 时间：2013-01-09T13:27:37.657
> 
> 标签：python, event-handling, matplotlib, color-mapping

我有一个看似简单的任务，但我不知道如何以及从哪里开始。我目前拥有的是在一个图中显示的一系列子图。现在我想在每个子图上添加/连接一个事件处理程序，这样当用户单击其中一个子图时，所选的图将在单独的图形/窗口中打开。
我想知道这是否可能，以及是否有人可以制定一个简单的小代码来说明如何做到这一点。我还应该提到，我正在使用和感兴趣的唯一绘图类型是颜色图（使用`imshow()`）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T04:41:51.980

您应该阅读[本](http://matplotlib.org/users/event_handling.html)教程。

基本上你需要定义一个接受一个论点的函数，`event`然后将它附加到你的图形画布上：

```
def open_new_figure(event):
    if event.inaxes is not None:
        ax = event.inaxes
        # you now have the axes object for that the user clicked on
        # you can use ax.children() to figure out which img artist is in this
        # axes and extract the data from it

cid = fig.canvas.mpl_connect('button_press_event', open_new_figure) 
```

# xpages - 在 XPiNC 中使用 nslXMLHttpRequest.send 失败

> ID：14236291
> 
> 赞同：1
> 
> 时间：2013-01-09T13:27:37.393
> 
> 标签：xpages, xpinc

我有一个 iNotes 列表视图对象，其中列出了我想要的文档以及相关的 REST 组件。在“OnSelectEntry”方法中，我有以下代码。

```
var unid =  items[0]["@unid"];
var myUrl = "test.nsf/main.xsp/docPathInfo/unid/" + unid;

var h;

if (window.XMLHttpRequest){
    h = new XMLHttpRequest();
} else {
    h = new ActiveXObject("Microsoft.XMLHTTP");
}

h.onreadystatechange=function() {
  if (h.readyState == 4 && h.status == 200) {
      var myObject = eval('(' + h.responseText + ')');

      var result = dojo.byId("#{id:inputText1}");
      result.value = myObject.field1 + " " + myObject.field2;

  }
}

h.open("GET",myUrl,false);
h.send(); 
```

如果 NSF 托管在服务器上，则此代码可以完美运行，但如果我将它放在本地，则它会失败并显示以下内容：

```
uncaught exception: [Exception... "Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nslXMLHttpRequest.send]" nsresult: "0x80004005 (NS_ERROR_FAILURE)" location: "JS frame :: http://127.0.0.1:50113/xsp/.ibmxspres/.mini/dojo/.en/@Wc&@Eab&@Eya&@lu.js :: anonymous :: 
```

我需要这个在客户端上工作。这是在客户端回电的正确方法吗？

我也尝试过更改 ACL 访问权限，但似乎没有帮助。我也尝试过使用绝对 URL 而不是相对 URL。

**[更新]**

我尝试更改为 Dojo 调用，如下所示。

```
var x;
var myCallback = function(data, ioArgs)
{
 var myObject = eval('(' + data + ')');

  var result = dojo.byId("#{id:inputText1}");
  result.value = myObject.field1 + " " + myObject.field2;
}
dojo.xhr("Get", {
url: myUrl,
handleAs: "text",
timeout: 10000,
load: myCallback
}); 
```

当我运行此代码时，它在服务器上运行良好，但当我在客户端运行它时，它不起作用。我在 XPages.log 文件中收到以下消息。

```
1/10/13 10:45 AM: Internal warning: Check access being called outside of a request
1/10/13 10:45 AM: Internal warning: Check access being called without a valid session/database 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:54:45.577

好的，我不确定您将如何在客户端上使用 REST，但是您可以进行 XSP.partialRefreshGet() 调用，这应该可以工作。

因此，对于您的代码，您将执行以下操作：

```
var partialRefreshOptions = { 
    "unid" : items[0]["@unid"]
};

// If you want to do any processing client side.
function partialRefreshOnComplete() {}
function partialRefreshOnStart() {};
function partialRefreshOnError() {};

// Make the call. 
XSP.partialRefreshGet("#{id:someDummyField}", {
    params : partialRefreshOptions,
    onStart : partialRefreshOnStart, 
    onError : partialRefreshOnError, 
    onComplete : partialRefreshOnComplete}
); 
```

然后在您的“someDummyField”中将其设置为计算显示并具有如下代码：

```
if(!param.isEmpty()){
    // Do something with the param.unid. Alternatively... 
    return param.unid;

} 
```

有关这方面的推荐阅读，请参阅“ **XPages Portable Command Guide** ”，第 176 页。

只是为了扩展一点，您应该使用 XSP.partialRefreshGet() 而不是 XHR，因为如果没有正确执行 AJAX 调用可能会损坏后端文档。这也记录在同一本书中。

# qt - 如何禁止在Qt中使用带有按钮的键盘上的箭头键

> ID：14236292
> 
> 赞同：3
> 
> 时间：2013-01-09T13:27:36.977
> 
> 标签：qt

我在 Qt 中做一个简单的项目来旋转一个立方体，我遇到了键盘和按钮上的箭头问题。

我有两个按钮，当我单击第一个按钮时，立方体向右旋转，第二个按钮用于向左旋转。

我的键盘上还有两个方向键，向上和向下，它们的功能与按钮相同。当我按下向上箭头时，立方体向右旋转，依此类推。

问题是当我启动应用程序时，箭头而不是控制旋转，选择按钮。所以我需要知道在哪里可以更改此选项，即关闭按钮中箭头键的导航操作。

Projet 是通过继承 QMainWindow 制作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:59:31.387

默认情况下，`QPushButton`（与 的许多其他子类一样`QWidget`）将具有处理键盘焦点的默认方式。在按钮的情况下，箭头键将键盘焦点从一个按钮移动到下一个按钮，以方便在窗口中导航并在没有鼠标的情况下与小部件进行交互。

正如 hank 在评论中所建议的那样，您可以`QPushButton`通过调用它来强制它不接受键盘焦点`setFocusPolicy(Qt::NoFocus)`，但这仅在按钮是您`QMainWindow`中唯一可以窃取焦点的特定情况下才有效。如果您在其中有其他小部件（例如 a `QLineEdit`），当焦点结束时，箭头键仍然无法正常工作，因为它们`QLineEdit`会抓住这些键，并且什么也不做。

解决您的问题的更灵活的方法是在您`QMainWindow`的每个子小部件上安装一个事件过滤器，并让该事件过滤器将箭头键事件转发给旋转立方体的功能（同时让其他所有内容通过以允许由适当的小部件处理的任何其他事件）。

另一种解决方案是让您的立方体小部件使用`QWidget::grabKeyboard()`. 这将确保每个键盘事件都被发送到该小部件，无论键盘焦点在哪里。当您想让其他小部件接收键盘事件时，您需要调用`QWidget::releaseKeyboard()`取消抓取它。

# php - PHP中的异步函数调用

> ID：14236296
> 
> 赞同：99
> 
> 时间：2013-01-09T13:27:43.773
> 
> 标签：php, asynchronous, network-programming

我正在开发一个 PHP Web 应用程序，我需要在请求中执行一些网络操作，例如根据用户的请求从远程服务器获取某人。

考虑到我必须将一些数据传递给函数并且还需要从中输出，是否可以在 PHP 中模拟异步行为。

我的代码是这样的：

```
<?php

     $data1 = processGETandPOST();
     $data2 = processGETandPOST();
     $data3 = processGETandPOST();

     $response1 = makeNetworkCall($data1);
     $response2 = makeNetworkCall($data2);
     $response3 = makeNetworkCall($data3);

     processNetworkResponse($response1);
     processNetworkResponse($response2);
     processNetworkResponse($response3);

     /*HTML and OTHER UI STUFF HERE*/

     exit;
?> 
```

每个网络操作大约需要 5 秒才能完成，给我的应用程序的响应时间增加了 15 秒，因为我提出了 3 个请求。

makeNetworkCall() 函数只是做一个 HTTP POST 请求。

远程服务器是第 3 方 API，所以我无法控制那里。

PS：请不要回答有关AJAX或其他事情的建议。我目前正在寻找是否可以通过 PHP 做到这一点，可能使用 C++ 扩展或类似的东西。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2017-06-03T04:23:09.530

如今，使用[队列](https://laravel.com/docs/5.4/queues)比使用线程更好（对于那些不使用 Laravel 的人来说，还有很多其他[类似](https://devcenter.heroku.com/articles/php-workers)的实现）。

基本思想是，您的原始 PHP 脚本将任务或作业放入队列中。然后，您让队列作业工作者在其他地方运行，将作业从队列中取出并开始独立于原始 PHP 处理它们。

优点是：

1.  可扩展性——您可以添加工作节点来满足需求。这样，任务是并行运行的。
2.  可靠性——现代队列管理器，如 RabbitMQ、ZeroMQ、Redis 等，都非常可靠。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-05T08:05:46.440

我没有直接的答案，但你可能想看看这些事情：

*   反冲项目 - [https://github.com/recoilphp/recoil](https://github.com/recoilphp/recoil)
*   php 的 LibEvent 扩展？[http://www.php.net/manual/en/book.libevent.php](http://www.php.net/manual/en/book.libevent.php)
*   进程分叉[http://www.php.net/manual/en/function.pcntl-fork.php](http://www.php.net/manual/en/function.pcntl-fork.php)
*   消息代理，即您可以启动工作人员进行 HTTP 调用，一旦`job`完成，插入一个描述需要完成的工作的新作业，以便处理缓存的 HTTP 响应正文。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-12-16T12:02:24.690

这个老问题有了新的答案。现在有一些 PHP 的“异步”解决方案（相当于 Python 的多进程，因为它们产生新的独立 PHP 进程，而不是在框架级别管理它）

我见过的两个解决方案是

*   快速简单：[https ://github.com/spatie/async](https://github.com/spatie/async)
*   带并发管理的大坦克：[https ://github.com/amphp/amp](https://github.com/amphp/amp)

试试看！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-09T13:34:38.993

cURL 将是您在这里唯一真正的选择（或者使用非阻塞套接字和一些自定义逻辑）。

[此链接](http://php.net/manual/en/function.curl-multi-exec.php)应该会向您发送正确的方向。PHP 中没有异步处理，但如果您尝试同时发出多个 Web 请求，cURL multi 会为您处理。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-03-19T17:57:46.603

一种方法是`pcntl_fork()`在递归函数中使用。

```
function networkCall(){
  $data = processGETandPOST();
  $response = makeNetworkCall($data);
  processNetworkResponse($response);
  return true;
}

function runAsync($times){
  $pid = pcntl_fork();
  if ($pid == -1) {
    die('could not fork');
  } else if ($pid) {
    // we are the parent
    $times -= 1;
    if($times>0)
      runAsync($times);
    pcntl_wait($status); //Protect against Zombie children
  } else {
    // we are the child
    networkCall();
    posix_kill(getmypid(), SIGKILL);
  }
}

runAsync(3); 
```

一件事`pcntl_fork()`是，当通过 Apache 运行脚本时，它不起作用（Apache 不支持它）。因此，解决该问题的一种方法是使用 php cli 运行脚本，例如：`exec('php fork.php',$output);`从另一个文件。为此，您将拥有两个文件：一个由 Apache 加载，另一个在`exec()`Apache 加载的文件中运行，如下所示：

apacheLoadedFile.php

```
exec('php fork.php',$output); 
```

fork.php

```
function networkCall(){
  $data = processGETandPOST();
  $response = makeNetworkCall($data);
  processNetworkResponse($response);
  return true;
}

function runAsync($times){
  $pid = pcntl_fork();
  if ($pid == -1) {
    die('could not fork');
  } else if ($pid) {
    // we are the parent
    $times -= 1;
    if($times>0)
      runAsync($times);
    pcntl_wait($status); //Protect against Zombie children
  } else {
    // we are the child
    networkCall();
    posix_kill(getmypid(), SIGKILL);
  }
}

runAsync(3); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-09T14:13:13.520

我认为如果 HTML 和其他 UI 内容需要返回的数据，那么就不会有异步它的方法。

我相信在 PHP 中做到这一点的唯一方法是在数据库中记录一个请求并每分钟进行一次 cron 检查，或者使用类似 Gearman 队列处理的东西，或者可能是 exec() 一个命令行进程

与此同时，您的 php 页面必须生成一些 html 或 js，使其每隔几秒钟重新加载一次以检查进度，这并不理想。

为了回避这个问题，您期望有多少不同的请求？你能每隔一小时左右自动下载它们并保存到数据库吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-16T22:38:54.260

还有 http v2，它是 curl 的包装器。可以通过pecl安装。

[http://devel-m6w6.rhcloud.com/mdref/http/](http://devel-m6w6.rhcloud.com/mdref/http/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-12T14:33:40.130

有一种方法可以调用 php 函数异步。

1.  将类、方法和参数序列化到文件中

    $callback = [ 'class' => $class//必须是字符串类名，'method' => $method//必须是字符串方法名，'params' => $params, ]; file_put_contents($file, addlashes(serialize($callback)) . "\n");

    ```
     //call async.php file like
     shell_exec('php async.php >> /tmp/log/async.std &'); 
    ```

2.  制作序列化数据调用者 - 假设名称是 async.php

    $fileContent = file_get_contents($file); $callback = unserialize(stripslashes($serialized_row));

3.  使类方法调用者

    $callback_class = $callback['class']; $callback_method = $callback['方法']; $callback_params = (array)$callback['params'];

    ```
     $reflection = new \ReflectionClass($callback_class);
         $is_static = (new \ReflectionMethod($callback_class, $callback_method))->isStatic();
         if ($is_static) {

             call_user_func_array([$callback_class, $callback_method], $callback_params);
         }
         elseif ($callback_method == '__construct') {

             $reflection->newInstanceArgs($callback_params);
         }
         else {

             $reflectionMethod = new \ReflectionMethod($callback_class, $callback_method);
             $reflectionMethod->invokeArgs(new $callback_class(), $callback_params);
         } 
    ```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-14T13:58:01.993

不能直接通过php进行异步处理，但可以通过系统规划机制间接进行处理。您可以使用 crontab。如果您将进程发送到 crontab，它可以为您安排好它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-06-29T05:39:24.547

我认为这里需要一些关于 cURL 解决方案的代码，所以我将分享我的（它是混合了几个来源作为 PHP 手册和评论编写的）。

它执行一些并行 HTTP 请求（域中的域`$aURLs`），并在每个请求完成后打印响应（并将它们存储起来以`$done`供其他可能的用途）。

由于实时打印部分和过多的注释，代码比需要的要长，但请随时编辑答案以改进它：

```
<?php
/* Strategies to avoid output buffering, ignore the block if you don't want to print the responses before every cURL is completed */
ini_set('output_buffering', 'off'); // Turn off output buffering
ini_set('zlib.output_compression', false); // Turn off PHP output compression       
//Flush (send) the output buffer and turn off output buffering
ob_end_flush(); while (@ob_end_flush());        
apache_setenv('no-gzip', true); //prevent apache from buffering it for deflate/gzip
ini_set('zlib.output_compression', false);
header("Content-type: text/plain"); //Remove to use HTML
ini_set('implicit_flush', true); // Implicitly flush the buffer(s)
ob_implicit_flush(true);
header('Cache-Control: no-cache'); // recommended to prevent caching of event data.
$string=''; for($i=0;$i<1000;++$i){$string.=' ';} output($string); //Safari and Internet Explorer have an internal 1K buffer.
//Here starts the program output

function output($string){
    ob_start();
    echo $string;
    if(ob_get_level()>0) ob_flush();
    ob_end_clean();  // clears buffer and closes buffering
    flush();
}

function multiprint($aCurlHandles,$print=true){
    global $done;
    // iterate through the handles and get your content
    foreach($aCurlHandles as $url=>$ch){
        if(!isset($done[$url])){ //only check for unready responses
            $html = curl_multi_getcontent($ch); //get the content           
            if($html){
                $done[$url]=$html;
                if($print) output("$html".PHP_EOL);
            }           
        }
    }
};

function full_curl_multi_exec($mh, &$still_running) {
    do {
      $rv = curl_multi_exec($mh, $still_running); //execute the handles 
    } while ($rv == CURLM_CALL_MULTI_PERFORM); //CURLM_CALL_MULTI_PERFORM means you should call curl_multi_exec() again because there is still data available for processing
    return $rv;
} 

set_time_limit(60); //Max execution time 1 minute

$aURLs = array("http://domain/script1.php","http://domain/script2.php");  // array of URLs

$done=array();  //Responses of each URL

    //Initialization
    $aCurlHandles = array(); // create an array for the individual curl handles
    $mh = curl_multi_init(); // init the curl Multi and returns a new cURL multi handle
    foreach ($aURLs as $id=>$url) { //add the handles for each url        
        $ch = curl_init(); // init curl, and then setup your options
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER,1); // returns the result - very important
        curl_setopt($ch, CURLOPT_HEADER, 0); // no headers in the output
        $aCurlHandles[$url] = $ch;
        curl_multi_add_handle($mh,$ch);
    }

    //Process
    $active = null; //the number of individual handles it is currently working with
    $mrc=full_curl_multi_exec($mh, $active); 
    //As long as there are active connections and everything looks OK…
    while($active && $mrc == CURLM_OK) { //CURLM_OK means is that there is more data available, but it hasn't arrived yet.  
        // Wait for activity on any curl-connection and if the network socket has some data…
        if($descriptions=curl_multi_select($mh,1) != -1) {//If waiting for activity on any curl_multi connection has no failures (1 second timeout)     
            usleep(500); //Adjust this wait to your needs               
            //Process the data for as long as the system tells us to keep getting it
            $mrc=full_curl_multi_exec($mh, $active);        
            //output("Still active processes: $active".PHP_EOL);        
            //Printing each response once it is ready
            multiprint($aCurlHandles);  
        }
    }

    //Printing all the responses at the end
    //multiprint($aCurlHandles,false);      

    //Finalize
    foreach ($aCurlHandles as $url=>$ch) {
        curl_multi_remove_handle($mh, $ch); // remove the handle (assuming  you are done with it);
    }
    curl_multi_close($mh); // close the curl multi handler
?> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-03T07:43:54.003

如果您不希望它成为后台进程，最简单的解决方案是[**`proc_open()`**](https://www.php.net/manual/en/function.proc-open.php). 它执行终端命令而不等待它们完成。你可以用它来调用你的脚本；像这样的东西：

```
proc_open('start cmd.exe php path-to-script.php', [], $pipes); 
```

您还可以让它使用`-r`标志运行内联 php 代码。阅读 PHP 命令的帮助以查看所有可用的标志。

* * *

另一种方法是向自己发送 HTTP 请求，忽略超时警告！您可以使用 php 简单地实现这个想法[`file_get_contents()`](https://www.php.net/manual/en/function.file-get-contents.php)：

```
$stream_context = stream_context_create(['http'=>['timeout' => 1]]);
file_get_contents('http://localhost/script-to-run-async.php', false, $stream_context);

// Replace "http://localhost/path-to-script.php" with
// a script that should be run asynchronously. 
```

毕竟，您可以使用[此答案](https://stackoverflow.com/a/1241751/4362965)忽略超时返回的警告。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-07-08T13:49:24.563

这是一篇相当老的帖子，但仍然可以帮助使用 Magento 1、Magento 2 和 PHP 的人，这里有几个答案。

如果您使用的是**Magento 1**，则可以通过设置 cron 作业或通过队列管理代码来轻松完成异步运行代码，就像消息队列一样，这又需要 cron 设置。

如果您使用的是**Magento 2**，那么这取决于您使用的是哪个版本的 Magento 2，

1.  **对于早于 2.3.3 的版本，**您可以参考[https://devdocs.magento.com/guides/v2.4/extension-dev-guide/message-queues/async-message-queue-config-files.html](https://devdocs.magento.com/guides/v2.4/extension-dev-guide/message-queues/async-message-queue-config-files.html)
2.  **对于 2.3.3 之后的版本，**您可以参考[https://devdocs.magento.com/guides/v2.4/rest/asynchronous-web-endpoints.html](https://devdocs.magento.com/guides/v2.4/rest/asynchronous-web-endpoints.html)和[https://devdocs.magento.com/guides/v2.4 /extension-dev-guide/async-operations.html](https://devdocs.magento.com/guides/v2.4/extension-dev-guide/async-operations.html)

如果您想使用 PHP，或者上述参考资料都不适合您，或者您觉得需要更简单的方法，那么您可以参考[https://www.php.net/manual/en/function.shell-exec。 php#118495](https://www.php.net/manual/en/function.shell-exec.php#118495)

例子：

```
<?php

namespace Vendor\Module\Controller\ControllerNameFolder;

class YourCustomAsyncAction extends \Magento\Framework\App\Action\Action
{
    /**
     * resultJsonFactory
     *
     * @var \Magento\Framework\Controller\Result\JsonFactory
     */
    protected $resultJsonFactory;    
    /**
     * _urlInterface
     *
     * @var \Magento\Framework\UrlInterface
     */
    protected $_urlInterface;

    /**
     * __construct
     *
     * @param \Magento\Framework\App\Action\Context $context
     * @param \Magento\Framework\Controller\Result\JsonFactory $resultJsonFactory
     * @return void
     */
    public function __construct(
        \Magento\Framework\App\Action\Context $context,
        \Magento\Framework\Controller\Result\JsonFactory $resultJsonFactory,
        \Magento\Framework\UrlInterface $urlInterface
    )
    {
        parent::__construct($context);
        $this->resultJsonFactory = $resultJsonFactory;    
        $this->_urlInterface = $urlInterface;
        $this->location = $location;
    }

    public function execute()
    {
        $result = $this->resultJsonFactory->create();
        $params = $this->getRequest()->getParams();
        /* prepare your URL */    
        $url = $this->_urlInterface->getUrl('module_route/controllername/actionname',$params);
        /* prepare your URL */

        /* async code */
        shell_exec("wget $url>/dev/null >/dev/null &");
        /* async code */

        return $result->setData(['success'=>true]);
    }
} 
```

# internet-explorer - Dart 脚本在任何 IE 版本中都不起作用

> ID：14236299
> 
> 赞同：1
> 
> 时间：2013-01-09T13:27:54.897
> 
> 标签：internet-explorer, dart

这是我非常简单的飞镖脚本：

```
import 'dart:html';

void main() {
  String heightClosed = query('.portlet.card div').style.height;

  // Set up card hover events
  queryAll(".portlet.card").forEach((el) {
    el.on.mouseOver.add((e) {
      el.query('div').style.height = '175px';
    });

    el.on.mouseOut.add((e) {
      el.query('div').style.height = heightClosed;
    });

    el.on.click.add((e) {
      String url = el.query('h1 a').attributes['href'];
      window.location.assign(url);
    });
  });

} 
```

IE9 中的 Javascript 控制台错误

```
SCRIPT438: Object doesn't support property or method 'defineProperty' 
```

将其编译为 javascript 后，在 Chrome 和 Firefox 中一切正常，但在任何版本的 IE 中都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:29:53.567

正在使用旧版本的 dart api。升级并重新编译了javascript，然后一切都按预期工作。

# android - Executors.newSingleThreadScheduledExecutor().schedule 的可靠性

> ID：14236303
> 
> 赞同：3
> 
> 时间：2013-01-09T13:28:20.730
> 
> 标签：android, multithreading, scheduledexecutorservice

这个执行者有一些已知的问题吗？还是我用错了方法？我需要**在单独的线程**中安排上传，并且我希望在当前上传完成后的特定时间后触发下一次上传。

因此，我的服务实现中有一些代码摘录：

```
ScheduledExecutorService periodicUploadExecutor;

@Override
public void onCreate() {
    super.onCreate();

    // some stuff...

    periodicUploadExecutor = Executors.newSingleThreadScheduledExecutor();
    periodicUploadExecutor.schedule(uploadPointsToServer, getCurrentUploadIntervalInMs(), TimeUnit.MILLISECONDS);
}

private Runnable uploadPointsToServer = new Runnable() {
    public void run() {

        Log.d("SOMETAG", "--->>>  UPLOAD runnable started!");

        // upload stuff here...

        Log.d("SOMETAG", " upload runnable scheduling next after "+getCurrentUploadIntervalInMs());
        periodicUploadExecutor.schedule(uploadPointsToServer, getCurrentUploadIntervalInMs(), TimeUnit.MILLISECONDS);

        Log.d("SOMETAG", "<<<---  upload runnable ENDED!");
    }
}

private final int getCurrentActiveSampIntervalInMs() {
    return 300000; // just an example
} 
```

但是当我检查日志时，我看到以下内容：

```
01-08 15:33:42.166 D/SOMETAG ( 4606): --->>>  UPLOAD runnable started!
01-08 15:33:43.166 D/SOMETAG ( 4606):  upload runnable scheduling next after 300000
01-08 15:33:43.166 D/SOMETAG ( 4606): <<<---  upload runnable ENDED!
01-08 15:38:43.166 D/SOMETAG ( 4606): --->>>  UPLOAD runnable started!
01-08 15:38:44.174 D/SOMETAG ( 4606):  upload runnable scheduling next after 300000
01-08 15:38:44.174 D/SOMETAG ( 4606): <<<---  upload runnable ENDED!
01-08 15:43:44.174 D/SOMETAG ( 4606): --->>>  UPLOAD runnable started!
01-08 15:43:45.143 D/SOMETAG ( 4606):  upload runnable scheduling next after 300000
01-08 15:43:45.143 D/SOMETAG ( 4606): <<<---  upload runnable ENDED!
01-08 16:01:38.887 D/SOMETAG ( 4606): --->>>  UPLOAD runnable started! 
```

所以前三个进展顺利，但最后一个在十八分钟后开始，而不是五分钟！该服务还在 15:43 到 16:01 之间获取位置更新，但是位置侦听器在主线程上运行，并且位置更新之间有几秒钟的时间间隔，因此没有什么应该阻止调度的执行器触发......但它**迟到**了超过预定延误的三倍！这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:59:40.390

您需要使用`AlarmManager`而不是 Executor/handler 或使用 Partial [Wakelock](http://developer.android.com/reference/android/os/PowerManager.html)来保持 CPU 开启。

如果 cpu 处于睡眠模式，您的应用将在手机唤醒之前不会运行。
AFAIK 只能`AlarmManager`通过唤醒设备来给您回电。为此，您需要使用其中 之一`ELAPSED_REALTIME_WAKEUP`或`RTC_WAKEUP`类型，其他选项将再次导致延迟。

# c# - Linq Contains() 方法的意外行为

> ID：14236309
> 
> 赞同：0
> 
> 时间：2013-01-09T13:28:31.090
> 
> 标签：c#, linq-to-objects, contains

在客户过滤器中，此语句返回所有客户`selectedIDs`的`CustomerID`.

例如，`selectedIDs`值“1”返回`CustomerID`“1”和“10”...

```
if (!String.IsNullOrEmpty(selectedIDs) && selectedIDs != "*")
{
    query = query.Where(x => selectedIDs.Contains(x.CustomerID.ToString()));
} 
```

我怎样才能让这个查询只返回完整的客户`selectedIDs`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:33:32.480

```
query = query.Where(x => selectedIDs.Split(',')
                              .Contains(x.CustomerID.ToString())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:32:16.480

您在这里没有使用 Linq Contains 方法......您正在使用 string.Contains 方法......您需要使用分隔字符拆分字符串并从那里开始。

```
var trueSelectedIds = selectedIDs.Split(new[] { "," }, StringSplitOptions.RemoveEmptyEntries);
query = query.Where(x => trueSelectedIds.Contains(x.CustomerID.ToString())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T13:35:01.897

假设您`CustomerID`是`int`，请将以下内容放入您的`if`块中：

```
var realSelectedIDs = new HashSet(
    selectedIDs.Split(',').Select(s => int.Parse(s)));
query = query.Where(x => realSelectedIDs.Contains(x.CustomerID)); 
```

A`HashSet`给你一个`O(1)`而不是`O(n)`查找。

（您可能想要使用`TryParse`而不是`Parse`防止错误输入，或者您可能不在乎。您可以像以前一样放弃`int.Parse`and 使用`x.CustomerID.ToString()`。）

# php - 如何删除img链接并替换它

> ID：14236312
> 
> 赞同：-1
> 
> 时间：2013-01-09T13:28:34.073
> 
> 标签：php, wordpress, preg-replace

我想将我所有的 wordpress 帖子图片链接链接到：[http](http://www.simafun.com) ://www.simafun.com除了一些图片。

所以我用找到这个代码：

```
<?php
function wpguy_linked_image($content){

    $searchfor = '/(<img[^>]*\/>)/';
    $replacewith = '<a target="_blank" href="'.get_permalink().'">$1</a>';

    {
        $content = preg_replace($searchfor, $replacewith, $content, -1);
    }
    return $content;
}

add_filter('the_content', 'wpguy_linked_image');
?> 
```

它替换了所有图片链接，但不删除图片的上一个链接。

1.  我首先删除上一个链接。例如：我的图片链接到自己“http://www.up.simafun.com/2013/01/police-tabriz-1.jpg”，然后用我的网站名称（http://www.simafun.com )

2.  我想从更改链接中排除一些图片，例如链接到下载的图片（例如：“http://up.simafun.com/download-simafun.com.gif”）

请原谅我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:36:28.607

就用这个：

```
$html = preg_replace("/<img.*src="(.*?)".*\/?>/",'<img src="http://up.simafun.com/download-simafun.com.gif">',$html ); 
```

# java - 将异常从子类传递到超类

> ID：14236317
> 
> 赞同：0
> 
> 时间：2013-01-09T13:28:49.687
> 
> 标签：java, exception, inheritance

有以下问题：

我有一个带有方法“调用”的抽象类，该方法基本上调用了一些 otherMethod，如果 otherMethod 抛出异常，我尝试通过重新记录并再次调用“调用”方法来修复 catch。

```
public Object call(String methodName, Object[] parameters, Class[] parameterTypes) throws RetryingException, RemoteException {
    while (true) {
        try {
            return callMethod(methodName, parameters, parameterTypes);
        } catch (SomeException e) {
            if (numberOfTriesLeft-- == 0) {
                throw new RetryingException();
            }
            login();
        }
    }
} 
```

现在我有一个此类的子类，它具有可能采用空参数的重写方法调用。基本上，如果发生这种情况，我想从超类调用方法，但不会抛出上面提到的异常，因此，不会重试并且方法会在其他地方失败。有没有办法手动抛出并进一步传递或任何其他方式来修复它？感谢您的帮助！

```
@Override
public Object call(String methodName, Object[] parameters, Class[] parameterTypes) throws RetryingException, RemoteException {
    if (parameters[0] == null){
        // What to do here if I want to throw SomeException here to end up in a catch block from the call method in the superclass? Or how to change it
    }
    // Everything ok. No null params
    ...
    return super.call(methodName, parameters, parameterTypes);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:35:08.133

根据我的经验，您可以做的是拥有这样的父方法：

```
public final Object call(String methodName, Object[] parameters, Class[] parameterTypes) throws RetryingException, RemoteException {
    try {
        callMethod(methodName, parameters, parameterTypes)
    } catch (Exception ex) {
        // Handle any exception here...
    }
}

protected Object callMethod(String methodName, Object[] parameters, Class[] parameterTypes) throws RetryingException, RemoteException {
    // .. your code
} 
```

然后改写`callMethod`(child) 方法：

```
@Override
protected Object callMethod(String methodName, Object[] parameters, Class[] parameterTypes) throws RetryingException, RemoteException {
    // Exception thrown here will now be caught!
    return super.callMethod(methodName, parameters, parameterTypes);
} 
```

因此，这将接口方法与可覆盖方法分开。我在现有的 API 中经常看到这种模式。

几点：

*   `call`现在正在`final`阻止它被覆盖。
*   `callMethod``protected`使其只能从同一个包中覆盖和调用 - 将其从公共 API 中取出。

**更新**：接受@Fildor 提供的观点。

# perl - Perl：模板工具包的替代品

> ID：14236318
> 
> 赞同：15
> 
> 时间：2013-01-09T13:28:54.623
> 
> 标签：perl, templates, template-engine, template-toolkit

3 年多来，我一直在使用模板工具包来扩展现有的特定领域语言（verilog）。虽然总的来说我对此感到满意，但主要的刺激因素是，当出现语法/ undef 错误时，错误消息不包含用于调试错误的正确行号信息。

例如，我会收到一条指示“0 未定义”的消息，因为我将在文件中的多个位置使用 [%x.0%] 和类似的构造来确定哪一行有问题变得困难。

TT3似乎无限期地处于开发中

我对大师的问题是有没有比 TT 更好的选择。我的要求是

1.  支持复杂的数据结构
2.  良好的错误报告和调试功能。
3.  稳定且经过验证（无 alpha/beta 级引擎）
4.  可扩展（插件等）
5.  不应仅限于给定的语言（html 等）
6.  支持 IF/Else、循环（foreach while）、循环索引等。
7.  最好是perl
8.  支持模板中的数据转储器或等效插件是一个加号

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-10T14:46:49.830

我只能在这里推荐[Text::Xslate](https://metacpan.org/module/Text::Xslate)。它在各方面都比 TT 好，并且也击败了大多数竞争对手。最后，它符合您的所有要求。字面上地。他们都是。

它甚至在实践中得到了证明，因为它被全球 100 强网站之一和日本 10 强网站之一使用：[Livedoor](http://www.alexa.com/siteinfo/livedoor.com)

Xslate 与 TT 相比：

*   更快的启动
*   更快的处理
*   默认为严格模​​式
*   更高级的严格模式，不仅可以捕获“var is undef”之外的不一致
*   显示准确模板位置的详细错误
*   自动 HTML 实体转义（XSS 安全）
*   [积极维护](https://github.com/xslate/p5-Text-Xslate/issues)，而不是[任其憔悴](https://rt.cpan.org/Public/Dist/Display.html?Name=Template-Toolkit)
*   语法是直接的和现代的 perl

* * *

对于您的特殊情况需要注意两点：

1.  当您从 TT 移植时，您可能希望传递`syntax => 'TTerse'`给构造函数以获取设计为尽可能接近 TT 的语法。
2.  生成非 HTML 时，您希望传递`type => 'text'`给构造函数以禁用`html_escape`插值。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-09T18:25:02.347

我目前正在试验[Template::Alloy](https://metacpan.org/module/Template::Alloy)，它似乎是 TT 的替代品。 [Template::Alloy::TT](https://metacpan.org/module/Template::Alloy::TT)列出了 TT 和 Alloy 的区别，其中大部分是“This works/is allowed in Alloy, but not in TT”的形式。针对您的具体问题，该列表包括：

> *   合金有更好的线路信息
> 
> 当调试目录打开时，用冒号分隔的不同行上的指令显示它们所在的行，而不是一般的行范围。
> 
> 解析错误实际上知道它们发生在什么行和字符上。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-14T15:08:46.433

[Mojolicious](http://mojolicio.us)带有自己的模板系统[Mojo::Template](http://mojolicio.us/perldoc/Mojo/Template)。它重量轻，甚至可以在 mojolicious 系统之外使用。这是文档中的一个示例：

```
use Mojo::Template;
  my $mt = Mojo::Template->new;

  # Simple
  my $output = $mt->render(<<'EOF');
  % use Time::Piece;
  <!DOCTYPE html>
  <html>
    <head><title>Simple</title></head>
    % my $now = localtime;
    <body>Time: <%= $now->hms %></body>
  </html>
  EOF
  say $output; 
```

和另一个

```
 # More advanced
  my $output = $mt->render(<<'EOF', 23, 'foo bar');
  % my ($number, $text) = @_;
  %= 5 * 5
  <!DOCTYPE html>
  <html>
    <head><title>More advanced</title></head>
    <body>
      test 123
      foo <% my $i = $number + 2; %>
      % for (1 .. 23) {
      * some text <%= $i++ %>
      % }
    </body>
  </html>
  EOF
  say $output; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-09T15:21:29.273

我可以建议 HTML::Template:Compiled （但请注意我是作者 ;-)

它与 HTML::Template 非常兼容，但具有附加功能。

> 支持复杂的数据结构

是的

> 良好的错误报告和调试功能。

您可以调试缓存命中、未命中、自动将模板文件名添加到输出，并且可以对存储中的当前变量（或任何变量）使用过滤器“DUMP”。如果它很容易实现，我会很乐意添加更多有用的调试。

> 稳定且经过验证（无 alpha/beta 级引擎）

我现在认为它很稳定，有记录的限制/错误（例如 query()）

> 可扩展（插件等）

支持转义（过滤器）插件等，尽管后者的文档还没有很好。

> 不应仅限于给定的语言（html 等）

是的

> 支持 IF/Else、循环（foreach while）、循环索引等。

是的

> 最好是perl

是的

> 支持模板中的数据转储器或等效插件是一个加号

如上所述，使用 escape=dump

所有附加功能都列在文档中： [https](https://metacpan.org/release/HTML-Template-Compiled) ://metacpan.org/release/HTML-Template-Compiled at "ADDITIONAL FEATURES"

编辑：关于报告运行时错误：不幸的是，H::T::C 也不会报告在运行时发生的错误的模板行号，因为它将模板编译为 perl 代码（我想我曾经尝试过操纵行号，也许我会再看看）。使用正确的行号报告模板语法错误。

edit2：所以这是一个带有新选项警告和 line_info 的示例：

t/模板/line_info1.html：

```
test
test2
test3
foo:<%= foo %> undef line 4
test4 
```

脚本：

```
use HTML::Template::Compiled;
my $t = HTML::Template::Compiled->new(
    filename => "t/templates/line_info1.html",
    warnings => 1,
    line_info => 1,
);
say $t->output;
__END__
Use of uninitialized value in concatenation (.) or string at t/templates/line_info1.html line 4.
test
test2
test3
foo: undef line 4
test4 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-13T09:07:39.777

看看[Template::Semantic](http://search.cpan.org/~tomita/Template-Semantic/)用于纯模板抽象

# javascript - 有没有办法将列表中的 css 属性随机应用于一堆元素？

> ID：14236319
> 
> 赞同：-1
> 
> 时间：2013-01-09T13:28:54.807
> 
> 标签：javascript, jquery

更确切地说，我可以应用到我拥有的 20 个 div、10 个背景图像，所以有两个具有相同背景的元素吗？
我想重现一个游戏，但我没有开始，因为我不知道这是否可能。我有 20 张牌面朝下。当我单击一个时，它们会翻转并显示它们的图像。但它们是成对的。因此，当您单击第二个并且它们的图像不匹配时，它们会翻转回来。所以你必须牢记他们的位置，直到你匹配他们。如果您第一次翻转而第二次翻转具有相同的背景图像，则它们仍然面朝上。但现在我只想知道这种应用 css 的方式是否可行。想法是在每次重新加载时在不同位置放置背景图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:14:47.487

是的。

创建一个包含 10 个项目的数组，每个项目对应一个背景图像。

```
var bg_array = [
    'img01.jpg',     //replace property here with URL of your image
    // ... repeat
    'img10.jpg'
]; 
```

接下来，创建一个带有循环的数组，该数组将包含您想要的所有实际背景图像，即 20 对，或在本例中为 10 对。

```
var i = bg_array.length,
    tempArray = [];
while (i) {
    i -= 1;
    tempArray.push(bg_array[i]);     // first instance
    tempArray.push(bg_array[i]);     // second instance... makes a pair
} 
```

然后循环遍历您的 div 并从该数组中随机选择以将 URL 分配给`backgroundImage`您的每个 div 的属性，并在执行过程中删除 URL 的实例`tempArray`。

```
var divs = document.getElementsByTagName('div'),    // this will capture all divs on the page; you might want to be more specific
    d,
    r;
for (d in divs) {     // assume the variable divs is a collection of all your divs
    r = Math.floor(Math.random() * tempArray.length);     // randomly select number based on size of array
    if (divs[d].style) {     // check the div has a style to change!
        d.style.backgroundImage = 'url("' + tempArray[r] + '")';     // apply randomly selected background image
        tempArray.splice(r, 1);     // remove image URL from tempArray so this won't be used again (remembering tempArray has 2 of each)
    }
} 
```

希望这样的事情会做你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:18:13.217

html代码将是：

```
<div id="1" class="b1"></div>
<div id="2" class="b1"></div>
<div id="3" class="b2"></div>
<div id="4" class="b2"></div>
<div id="5" class="b3"></div>
<div id="6" class="b3"></div>
<div id="7" class="b4"></div>
<div id="8" class="b4"></div>
<div id="9" class="b5"></div>
<div id="10" class="b5"></div> 
```

和CSS：

```
.b1{background:url(image1.png);}
.b2{background:url(image2.png);}
.b3{background:url(image3.png);}
.b4{background:url(image4.png);}
.b5{background:url(image5.png);} 
```

# javascript - 根据名称的开头获取多个 cookie

> ID：14236322
> 
> 赞同：0
> 
> 时间：2013-01-09T13:29:11.763
> 
> 标签：javascript, cookies, match

我正在尝试将我存储的一堆 cookie 调用回页面。有多个名称如 todo-0、todo-1（你明白了）。因此，我试图找出一种方法来调用名称以“todo-”开头的所有 cookie，然后将该 cookie 的值打印到我的页面中的表格中。

我有点希望它会像这样简单：

```
if (document.cookie.name.match(/^todo-/)) {
    todoTable.insertAdjacentHTML('beforeend', document.cooke.value);
} 
```

但我得到一个错误说`no method 'match'`。

关于通过多个 cookie 获取 root 并从 tod- 开始获取的最佳方法有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:35:25.023

你将不得不做这样的事情：

```
var myCookies = document.cookie.split(";");

for(var i = 0; i < myCookies.length; i++)
{
    var cookie = myCookies[i].trim().split("=");

    if(cookie[0].indexOf("todo-") === 0) {
        todoTable.insertAdjacentHTML('beforeend', decodeURIComponent(cookie[1]));
    }
} 
```

# wordpress - 如何显示 jj nextgen 图像列表的描述字段？

> ID：14236330
> 
> 赞同：1
> 
> 时间：2013-01-09T13:29:28.757
> 
> 标签：wordpress

如何在悬停效果上显示 jj nextgen 图像列表的描述字段？

# objective-c - 用鼠标和 Cocos2d 拖动精灵

> ID：14236331
> 
> 赞同：0
> 
> 时间：2013-01-09T13:29:35.557
> 
> 标签：objective-c, cocos2d-iphone, ccsprite

我写了几行代码，我可以选择精灵，我可以拖动它，但是一旦我拖动它，它就会离开鼠标光标一些像素，之后我可以控制它，但它离我的鼠标还有一些像素cursos .. 我的`CGPoint`转换似乎有问题，或者我不知道，这是我的代码

```
- (void)selectSpriteForTouch:(CGPoint)touchLocation {
    CCSprite * newSprite = nil;
    for (CCSprite *sprite in movableSprites) {
        if (CGRectContainsPoint(sprite.boundingBox, touchLocation)) {
            newSprite = sprite;
            NSLog(@"palieciau");
            break;
        }
    }
    if (newSprite != selSprite) {
        [selSprite stopAllActions];
        [selSprite runAction:[CCRotateTo actionWithDuration:0.1 angle:0]];
        CCRotateTo * rotLeft = [CCRotateBy actionWithDuration:0.1 angle:-4.0];
        CCRotateTo * rotCenter = [CCRotateBy actionWithDuration:0.1 angle:0.0];
        CCRotateTo * rotRight = [CCRotateBy actionWithDuration:0.1 angle:4.0];
        CCSequence * rotSeq = [CCSequence actions:rotLeft, rotCenter, rotRight, rotCenter, nil];
        [newSprite runAction:[CCRepeatForever actionWithAction:rotSeq]];
        selSprite = newSprite;
    }
}

- (BOOL)ccMouseDown:(NSEvent*)event {
    CCSprite * newSprite = nil;
    CGPoint clickLocation = [[CCDirector sharedDirector] convertEventToGL:event];
    for (CCSprite *sprite in movableSprites) {
        if (CGRectContainsPoint(sprite.boundingBox, clickLocation)) {
            newSprite = sprite;
            break;
        }
    }
    if (newSprite != selSprite) {
        [selSprite stopAllActions];
        [selSprite runAction:[CCRotateTo actionWithDuration:0.1 angle:0]];
        CCRotateTo * rotLeft = [CCRotateBy actionWithDuration:0.1 angle:-4.0];
        CCRotateTo * rotCenter = [CCRotateBy actionWithDuration:0.1 angle:0.0];
        CCRotateTo * rotRight = [CCRotateBy actionWithDuration:0.1 angle:4.0];
        CCSequence * rotSeq = [CCSequence actions:rotLeft, rotCenter, rotRight, rotCenter, nil];
        [newSprite runAction:[CCRepeatForever actionWithAction:rotSeq]];
        selSprite = newSprite;
    }
}

- (void)panForTranslation:(CGPoint)translation {
    if (selSprite) {
        CGPoint newPos = ccpAdd(selSprite.position, translation);
        selSprite.position = newPos;
    } else {
    }
}

-(BOOL)ccMouseDragged:(NSEvent *)event {
    CGPoint point = [[CCDirector sharedDirector] convertEventToGL:event];
    CGPoint mouseLocation = [self convertToNodeSpace:point];
    CGPoint translation = ccpSub(point, oldMouseLocation_);
    [self panForTranslation:translation];
    oldMouseLocation_ = point;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:26:36.303

我搞定了，谢谢。

```
- (BOOL)ccMouseDragged:(NSEvent *)event 
{
    CGPoint point = [[CCDirector sharedDirector] convertEventToGL:event];
    CGPoint mouseLocation = [self convertToNodeSpace:point];
    CGPoint translation = (mouseLocation);
    [self panForTranslation:translation];
    return YES;
}

-(void)panForTranslation:(CGPoint)translation 
{
    if (first) 
    {
        NSLog(@"%f, %f",translation.x, translation.y);
        deb1.position = ccp( translation.x, translation.y );
    }
    if (second) 
    {
        NSLog(@"%f, %f",translation.x, translation.y);
        deb2.position = ccp( translation.x, translation.y );
    }
    if (third) 
    {
        NSLog(@"%f, %f",translation.x, translation.y);
        deb3.position = ccp( translation.x, translation.y );
    }
    else 
    {
        NSLog(@"not in sprite's rect");
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:45:46.200

你应该考虑的一些事情：

1.  在开始拖动时，您应该将 oldMouseLocation 设置为开始拖动的点
2.  确保你的精灵被拖离他们的中心。例如，如果您要移动他们的容器，您可以从左下角拖动他们
3.  在您的 ccMouseDown 中，您没有使用 convertToNodeSpace 函数
4.  您可以考虑在鼠标位置上移动拖动的精灵 (selSprite)，而不是使用 [oldMouseLocation - mouseLocation] 距离进行平移。或者，您可以应用在 [开始拖动点 - 拖动的精灵位置] 距离上计算的一些偏移量

# html - 在 Firefox 中检测 getUserMedia

> ID：14236336
> 
> 赞同：4
> 
> 时间：2013-01-09T13:29:54.943
> 
> 标签：html, firefox, getusermedia, browser-feature-detection

我正在编写一个使用 getUserMedia 访问用户的网络摄像头并让他拍摄快照的网络应用程序。

这会优雅地降级以让他们手动上传文件，这在这种用例中更烦人，但至少他们可以将应用程序与其他浏览器一起使用。

我正在做的是：

*   如果浏览器不支持 getUserMedia，我会显示一个标志，上面写着“嘿，去换个更好的浏览器”
*   如果是，我显示“单击允许”，调用 getUserMedia
*   如果 getUserMedia 调用“失败”回调，我会显示“哎呀，这不起作用。您是否单击了允许？”

现在，Firefox*确实*支持 getUserMedia，但您需要在“about:config”中手动打开一个魔术标志。但是，如果该标志关闭（这是默认设置），则 getUserMedia 存在，因此看起来浏览器确实支持它，但调用它不会做*任何事情*（甚至不调用我的失败函数）

这是所有可能性中最糟糕的一种，因为我无法告诉用户任何真正有趣的事情。

有什么好方法可以干净地处理这个问题吗？如果标志关闭，任何让我知道 Firefox*不*支持相机的东西，基本上，没有我添加“如果 Firefox，假设它不受支持，直到我们中的一个人有一天意识到标志现在默认开启”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T07:34:44.353

我在此提交了[https://bugzilla.mozilla.org/show_bug.cgi?id=828839](https://bugzilla.mozilla.org/show_bug.cgi?id=828839)。

除了不进行 UA 嗅探之外，我不确定在此期间会给您什么建议。只需检查一个无前缀的`getUserMedia`（在它存在的任何 UA 中都可以更好地工作），并且不要检查有前缀的，因为它是真正的实验`mozGetUserMedia`。

# c++ - 大范围数字的分类

> ID：14236338
> 
> 赞同：0
> 
> 时间：2013-01-09T13:29:58.833
> 
> 标签：c++, enums

我需要编写一个对大范围数字进行分类的方法。我已经写了标识的枚举。

```
enum op {
  memLoad = 130,
  memStore,
  //etc
} 
```

对于某些标识，我有一个范围，例如，`0-120 - are registers numbers` 我不能将 121 个这样的（注册）标识符一一添加到枚举中。您如何建议处理此类标识符（定义为范围）？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:41:15.760

实现分类的更复杂的方法可能是使用神经网络，如[WEKA 分类](http://wekaclassalgos.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:34:37.377

我不认为 enum 不是您要解决的问题的正确工具。

我建议使用[区间树](https://stackoverflow.com/questions/5407814/c-interval-tree-implementation)来获得富有表现力和快速的代码。

# python - 测试 SSH 可用性的优雅方法

> ID：14236346
> 
> 赞同：17
> 
> 时间：2013-01-09T13:30:18.750
> 
> 标签：python, ssh, paramiko

我需要一个 Python 程序，用于轮询远程服务器的 SSH 连接并通知它何时可用。我目前正在使用 paramiko 执行此操作；尝试连接，如果失败，等待并重试，直到成功或最大重试次数。这行得通，但有点笨拙。paramiko 似乎要么连接要么抛出错误，所以我能看到的唯一方法是使用一个坏、坏、坏的 try/except 块。这是方法：

```
def check_ssh(self, ip, user, key_file, initial_wait=0, interval=0, retries=1):
    ssh = paramiko.SSHClient()
    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())

    sleep(initial_wait)

    for x in range(retries):
        try:
            ssh.connect(ip, username=user, key_filename=key_file)
            return True
        except Exception, e:
            print e
            sleep(interval)
    return False 
```

一定有比这更优雅的解决方案。Paramiko 是我选择的 SSH 库，但我愿意接受任何建议。

澄清一下，我想避免使用 try / except 作为控制正常代码执行流程的一种手段——它应该用于捕获实际错误，例如错误的主机密钥、无效的用户等。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-09T14:05:32.960

正如 frb 的评论中提到的，`try ... except`块是测试特定服务可用性的好方法。但是，您不应该使用“包罗万象”的`except`块，而应将其限制为在服务不可用时发生的特定异常。

根据文档，[`paramiko.SSHClient.connect`](http://paramiko-docs.readthedocs.org/en/1.15/api/client.html#paramiko.client.SSHClient.connect)可能会抛出不同的异常，具体取决于连接时发生的问题。如果您想捕获所有这些，您的`try ... except`块将如下所示：

```
try:
    ssh.connect(ip, username=user, key_filename=key_file)
    return True
except (BadHostKeyException, AuthenticationException, 
        SSHException, socket.error) as e:
    print e
    sleep(interval) 
```

如果这些异常中只有一部分与您的情况相关，则仅将这些异常放入元组 after `except`。

# r - 如何在R中总结5分钟的间隔

> ID：14236349
> 
> 赞同：3
> 
> 时间：2013-01-09T13:30:42.183
> 
> 标签：r, sum, minute

我有一个数据集，其中包含 6 个不同站点的每分钟降水记录。我想对每个站点每 5 分钟进行一次汇总。这些是我的数据集的前 5 行（我总共有 17280 行）：

```
 P_alex P_hvh P_merlijn P_pascal P_thurlede P_tosca                date
    0     0         0        0          0       0 2011-06-27 22:00:00
    0     1         5        2          0       0 2011-06-27 22:01:00
    0     0         0        0          0       0 2011-06-27 22:02:00
    0     6         2        3          0       0 2011-06-27 22:03:00
    0     0         0        0          0       0 2011-06-27 22:04:00 
```

我试图在互联网上寻求帮助，但我找不到对我有帮助的答案。

我还需要每小时总和，为此我使用以下代码，但如果您想进行其他总和，则此代码无用

```
uur_alex = tapply(disdro$P_alex, as.POSIXct(trunc(disdro$date, "hour")), sum) 
```

现在我想要一个代码，我可以用它来进行不同的求和，所以 5 分钟（如问题所示），但也可以用半小时。我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T16:33:02.907

`cut`与日期时间对象配合得非常好，因此可用于创建您希望聚合的 5 分钟间隔。这是一个例子：

首先，一些示例数据：

```
set.seed(1)
mydf <- data.frame(P_alex = sample(0:5, 40, replace = TRUE),
                   P_hvh = sample(0:3, 40, replace = TRUE),
                   date = as.POSIXct("2011-06-27 22:00:00") + 60 * 0:39)
list(head(mydf), tail(mydf))
# [[1]]
#   P_alex P_hvh                date
# 1      1     3 2011-06-27 22:00:00
# 2      2     2 2011-06-27 22:01:00
# 3      3     3 2011-06-27 22:02:00
# 4      5     2 2011-06-27 22:03:00
# 5      1     2 2011-06-27 22:04:00
# 6      5     3 2011-06-27 22:05:00
# 
# [[2]]
#    P_alex P_hvh                date
# 35      4     1 2011-06-27 22:34:00
# 36      4     3 2011-06-27 22:35:00
# 37      4     3 2011-06-27 22:36:00
# 38      0     1 2011-06-27 22:37:00
# 39      4     3 2011-06-27 22:38:00
# 40      2     3 2011-06-27 22:39:00 
```

现在，执行您的聚合。在以下示例中，我们聚合原始数据集中的所有列，但从数据集中删除“日期”变量（使用`mydf[setdiff(names(mydf), "date")]`）。

```
# Aggregate all columns by the intervals created with cut.
# For the dataset, we drop the original date column since
#   it is no longer needed here. Our function is "sum"
aggregate(. ~ cut(mydf$date, "5 min"), 
          mydf[setdiff(names(mydf), "date")], 
          sum)
#   cut(mydf$date, "5 min") P_alex P_hvh
# 1     2011-06-27 22:00:00     12    12
# 2     2011-06-27 22:05:00     16     8
# 3     2011-06-27 22:10:00     12     5
# 4     2011-06-27 22:15:00     17     6
# 5     2011-06-27 22:20:00     10     8
# 6     2011-06-27 22:25:00     11     8
# 7     2011-06-27 22:30:00     12     7
# 8     2011-06-27 22:35:00     14    13 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T14:03:20.953

您可以使用`rollapply`from `zoo`package 来实现这一点。例如，

```
require(zoo)
tester <- data.frame(x=1:100,y=1:100)    
output <- rollapply(tester,5,(sum),by=5,by.column=TRUE,align='right') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T13:55:11.673

一种方法是使用整数除法 ( `%/%`) 将日期映射到 5 分钟块。如果使用日期时间，则基数将是[UNIX 纪元。](http://en.wikipedia.org/wiki/Unix_time)`POSIXct`您可以使用 对这些块求和`aggregate`。

```
x <- data.frame(date=Sys.time()+60*0:10,value1=0:10,value2=rnorm(11))

aggregate(.~as.numeric(date)%/%(5*60),data=x,FUN=sum)
  as.numeric(date)%/%(5 * 60)       date value1     value2
1                     4525797 1357739399      0  0.6209565
2                     4525798 6788697893     15 -1.4342917
3                     4525799 6788699393     40  0.8064627 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T13:58:05.090

如果您熟悉 SQL，则可以轻松创建 SQL 语句以将数据分组为 5 分钟间隔。例如在 postgresql 中你可以使用类似的东西：

```
select Now(), date_trunc('hour',Now()) + interval '1 minute' * trunc(date_part('minute',Now())/5)*5 
```

我使用 sqldf 包进行所有此类转换。

# security - 如何管理项目的 Sitecore 安全访问权限设置（配置）？

> ID：14236352
> 
> 赞同：2
> 
> 时间：2013-01-09T13:30:50.313
> 
> 标签：security, sitecore, tds

正如文档所述，项目的安全设置保存为每个项目的文本定义。

我们有一棵巨大的树，里面有很多物品，另外还有 30 多个角色。我们面临的挑战是如何管理所有项目的安全设置并在环境（Dev、TEST、UAT、Prod）之间提升它们。我们正在使用 TFS 和 TDS（Sitecore 的团队开发），但作为开箱即用的系统，所有安全配置都是项目的一部分。

假设我们要更改选定项目上特定角色的安全访问权限。这意味着我们必须在 TDS 项目中进行更改并将这些项目重新部署到所有环境。这是正确/推荐的方法吗？还有其他方法吗？

更新：

特殊案例。我们有生产中的操作站点，管理员在项目 A 上更改了初始定义的安全配置（引入新的或更改现有的）。其他一些字段也可以更改。我们已准备好在生产中部署新开发的功能。其中一项新更改是项目 A - 为某些新角色 N1 引入了新的访问权限。我们想要的结果是保留项目 A 的所有配置，并为角色 N1 添加新的安全访问权限。如何做到这一点？重新部署整个项目 A 意味着从生产中丢失配置。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:40:42.060

无论您是否使用 TDS，您都必须重新部署这些项目。项目的安全设置在 Sitecore 体系结构中与项目一起存储，这就是为什么如果项目的安全设置发生更改，这实际上意味着项目已更改并且应该重新部署。

为了尽量减少每次必须部署的项目数量，您可以：

*   **尽可能利用“继承”选项**- 因此，只有具有明确“允许”或“拒绝”权限的项目才会受到影响
*   **为角色分配安全性，而不是为用户分配安全性**- 因此，为了为新用户应用权限，您只需将其包含到适当的角色中

# keyboard - 在vmware中模拟鼠标/键盘

> ID：14236358
> 
> 赞同：0
> 
> 时间：2013-01-09T13:31:13.323
> 
> 标签：keyboard, mouse, vmware, simulate

我在 vmware 工作站中运行了几个 Windows 7，我想制作一个在运行游戏时进行一些鼠标点击/按键操作的应用程序。我制作了使用一些 dllimport 进行模拟的 ac# 程序：

```
 [System.Runtime.InteropServices.DllImport("user32.dll")]
    public static extern void mouse_event(int dwFlags, int dx, int dy, int cButtons, int dwExtraInfo);

    [DllImport("user32.dll")]
    public static extern void keybd_event(byte bVk, byte bScan, uint dwFlags, int dwExtraInfo); 
```

这在普通电脑上运行良好，但是当我在 vmware 中运行它并打开游戏时，它不再点击。

我该如何解决这个问题：D

斯特凡。

# android - onItemClickListener 不工作，当我点击时没有收到事件

> ID：14236361
> 
> 赞同：0
> 
> 时间：2013-01-09T13:31:20.373
> 
> 标签：android, android-listview, onitemclicklistener

我使用自定义适配器，`ListView`每次在`ListView`. 在行中，我想要两个可点击的视图，我想要两者的点击事件。设置`OnItemClickListener`为`ListView`，但不起作用，
我希望功能与 callLog 列表视图完全相同（手机中的默认设置）。请解决我的问题，如果你愿意，我也可以在这里粘贴我的代码。

```
package com.example.testsmspopup; 
```

公共类 CallLogActivity 扩展活动 {

```
private ArrayList<CallDetail> callDetailArrayList;
private ListView callDetailListView = null;
private CallDetailListAdapter callDetailListAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    callDetailListView = (ListView) findViewById(R.id.contactListView);
    callDetailListView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            Log.i("MyTag","calling ...........................");
            Toast.makeText(getApplicationContext(), "onItemClick is calling", Toast.LENGTH_SHORT);
        }
    });
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    callDetailArrayList = DB.getInstance(this).getAllCallDetails();
    callDetailListAdapter = new CallDetailListAdapter();
    callDetailListView.setAdapter(callDetailListAdapter);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.call_detail_activity, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    super.onOptionsItemSelected(item);
    if (item.getItemId() == R.id.menu_clear_all) {
        DB.getInstance(this).deleteAllCallDetails();
    }
    return true;
}

private class CallDetailListAdapter extends ArrayAdapter<CallDetail> {
    public CallDetailListAdapter() {
        super(CallLogActivity.this, R.layout.call_log_row, callDetailArrayList);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        CallDetailHolder holder = null;
        if (row == null) {
            LayoutInflater inflater = getLayoutInflater();
            row = inflater.inflate(R.layout.call_log_row, parent, false);
            holder = new CallDetailHolder(row);
            row.setTag(holder);
        } else {
            holder = (CallDetailHolder) row.getTag();
        }
        holder.populateFrom(callDetailArrayList.get(position));
        return (row);
    }
}

private class CallDetailHolder {
    private TextView nameTextView = null;
    private TextView numTextView = null;
    private TextView timeTextView = null;
    private ImageView typeImageView = null;

    public CallDetailHolder(View row) {
        nameTextView = (TextView) row.findViewById(R.id.callDetailName);
        numTextView = (TextView) row.findViewById(R.id.callDetailNumber);
        timeTextView = (TextView) row.findViewById(R.id.callDetailTime);
        typeImageView = (ImageView) row.findViewById(R.id.callDetailType); 
```

// row.findViewById(R.id.callDetail).setOnClickListener(CallLogActivity.this); // row.findViewById(R.id.callBackBtn).setOnClickListener(CallLogActivity.this); }

```
 public void populateFrom(CallDetail detail) {
        String fName = DB.getInstance(CallLogActivity.this).getContact(detail.getCallNumber()).getFirstName();
        String lName = DB.getInstance(CallLogActivity.this).getContact(detail.getCallNumber()).getLastName();
        nameTextView.setText(fName + " " + lName);
        numTextView.setText(detail.getCallNumber());
        timeTextView.setText(AppUtility.parseCallTime(detail.getCallTime()));
        switch (detail.getCallType()) {
        case AppConstants.INCOMING_CALL:
            typeImageView.setImageResource(android.R.drawable.sym_call_incoming);
            break;
        case AppConstants.OUTGOING_CALL:
            typeImageView.setImageResource(android.R.drawable.sym_call_outgoing);
            break;
        case AppConstants.MISS_CALL:
            typeImageView.setImageResource(android.R.drawable.sym_call_missed);
            break;
        default:
            break;
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:55:19.850

用于在 onItemClick() 方法中显示 Toast 写入

```
Toast.makeText(getApplicationContext(), "onItemClick is calling", Toast.LENGTH_SHORT).show(); 
```

反而

```
Toast.makeText(getApplicationContext(), "onItemClick is calling", Toast.LENGTH_SHORT); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:13:07.250

您的列表项中有一个`ImageButton`。它是`focusable`并且它可以防止整个项目发生点击事件。为了获得列表项的单击事件，您必须将其设置`ImageButton`为不可聚焦。请注意，您必须在代码中而不是在`xml`.

只需在您的`CallDetailHolder`构造函数中添加此代码，它应该可以正常工作：

```
ImageButton callBackButton = (ImageButton) row.findViewById(R.id.callBackBtn);
callBackButton.setFocusable(false); 
```

# mongodb - findOne 在 mapreduce mongodb 中的使用

> ID：14236365
> 
> 赞同：0
> 
> 时间：2013-01-09T13:31:26.490
> 
> 标签：mongodb

我想`findOne`在地图减少中使用。我的代码有什么问题？我的错误是：

命令'mapreduce'失败：异常：映射调用失败：JS错误：TypeError：用户没有属性nofile_b：3（响应：{“errmsg”：“异常：映射调用失败：JS错误：TypeError：用户没有属性nofile_b： 3”，“代码”：9014，“确定”：0.0}）

```
string map = @"
function() {
    var movie = this;
    var user = db.users.findOne({UserId : parseInt(movie.UserId)});
    emit( movie.UserId, {Name:user.Name});
}";

string reduce = @"        
function(key, values) {
    var result =values;
    return result;
}";

string finalize = @"
function(key, value){           
  return value;

}"; 
```

c#代码下

```
var collection = database.GetCollection("movies");
var options = new MapReduceOptionsBuilder();
options.SetFinalize(finalize);
options.SetOutput(MapReduceOutput.Inline);
var results = collection.MapReduce(map, reduce, options);
lbResultList.Items.Clear();
foreach (var result in results.GetResults())
{
     lbResultList.Items.Add(result.ToJson());
} 
```

我解决了我的问题地图功能更改

```
function () {

var user = db.users.find({UserId:this.UserId});
var userName ='';
var userSurName ='';
user.forEach(function(u) { 
    userName = u.Name;
    userSurName = u.SurName;
});
emit(
    this._id,                   
    {title: this.Title,category:this.Category,UserName: userName,UserSurName: userSurName}  
); 
```

}

我认为这不合逻辑，就像子查询这样解决。这种情况我能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T23:18:14.420

看起来您正在尝试执行 SQL JOIN。MapReduce 是错误的工具。您实际上只想将其分解为聚合操作以获取 UserID 数组和查询操作以获取用户名：

在 mongo shell 中是这样的：

```
var UserIDArray = [];
movieCollection.aggregate({$group: {_id: "$UserId"}}).forEach(function (v) {
    UserIDArray.push(v._id);
});

UserIDNamePairs = userCollection.find({_id : {$in: UserIdArray}}, {_id: "$name"}).toArray(); 
```

# android - 使用 bringToFront() 方法时遇到问题

> ID：14236367
> 
> 赞同：2
> 
> 时间：2013-01-09T13:31:31.517
> 
> 标签：android, android-layout, android-animation

嗨朋友们，我是 android 新手，在我的项目中，我有一个要求，我需要在同一位置显示两个布局，并且每当按下按钮时都需要应用旋转动画，我通过在同一位置创建两个布局来实现相同的位置和使用 Layout.bringToFront() 方法在它们之间切换，但我不知道为什么在某些情况下它的动画效果正确，但 BringToFront() 方法没有将我的布局带到前面

```
 public void bodyClicked()
 {
     System.out.println("Inside Body Clicked...");
     System.out.println("Enevelope boolean value... "+enevelopefocus);
     System.out.println("Body Boolean Value..."+bodyfocus);
     if(!bodyfocus)
        {
            bodyLayout.startAnimation(AnimationUtils.loadAnimation(AddJobNew.this, R.anim.rotate_right));
            fromToRootLayout.startAnimation(AnimationUtils.loadAnimation(AddJobNew.this,R.anim.rotate_left));
            final Handler handler = new Handler();
            handler.postDelayed(new Runnable() {
                @Override
                public void run() {

                    runOnUiThread(new Runnable() {

                        @Override
                        public void run() {
                            // TODO Auto-generated method stub
                            fromToRootLayout.startAnimation(AnimationUtils.loadAnimation(AddJobNew.this, R.anim.rotate_center_after_left));
                            bodyLayout.startAnimation(AnimationUtils.loadAnimation(AddJobNew.this, R.anim.rotate_right_center));
                            bodyLayout.bringToFront();
                            bodyLayout.invalidate();
                            bodyLayout.requestFocus();
                            bodyfocus=true;
                            enevelopefocus=false;
                            System.out.println("Body CLicked Completed...");
                            System.out.println("Enevelope boolean value... "+enevelopefocus);
                            System.out.println("Body Boolean Value..."+bodyfocus);
                            fromToRootLayout.invalidate();
                        }
                    });

                }
            }, 500);
            headerLayout.setVisibility(View.VISIBLE);

        }
 }
 public void enevlopeCLicked()
 {
     System.out.println("Inside Enevelope Clicked...");
     System.out.println("Enevelope boolean value... "+enevelopefocus);
     System.out.println("Body Boolean Value..."+bodyfocus);
     headerLayout1.setVisibility(View.GONE);
        fromBodyLayout.setVisibility(View.GONE);
        if(fromAddressTExtView.getText().toString().length()>0)
        {
            fromAddressTExtView.setVisibility(View.VISIBLE);
            fromTopEditBtn.setVisibility(View.GONE);
            fromcontactpick.setVisibility(View.GONE);
        }
        else
        {
            fromTopEditBtn.setVisibility(View.VISIBLE);
            fromcontactpick.setVisibility(View.VISIBLE);
            fromAddressTExtView.setVisibility(View.GONE);
        }
        if(toAddressTExtView.getText().toString().length()>0)
        {
            toAddressTExtView.setVisibility(View.VISIBLE);
            toBottomEditBtn.setVisibility(View.GONE);
            toContactPick.setVisibility(View.GONE);
        }
        else
        {
            toBottomEditBtn.setVisibility(View.VISIBLE);
            toContactPick.setVisibility(View.VISIBLE);
            toAddressTExtView.setVisibility(View.GONE);
        }

        if(!enevelopefocus)
        {
            fromToRootLayout.startAnimation(AnimationUtils.loadAnimation(AddJobNew.this, R.anim.rotate_left));
            bodyLayout.startAnimation(AnimationUtils.loadAnimation(AddJobNew.this,R.anim.rotate_right));
            final Handler handler = new Handler();
            handler.postDelayed(new Runnable() {
                @Override
                public void run() {
                    runOnUiThread(new Runnable() {

                        @Override
                        public void run() {
                            // TODO Auto-generated method stub
                            bodyLayout.startAnimation(AnimationUtils.loadAnimation(AddJobNew.this, R.anim.rotate_right_center));
                            fromToRootLayout.startAnimation(AnimationUtils.loadAnimation(AddJobNew.this, R.anim.rotate_center_after_left));
                            fromToRootLayout.bringToFront();
                            fromToRootLayout.invalidate();
                            fromToRootLayout.requestFocus();
                            enevelopefocus=true;
                            bodyfocus=false;
                            System.out.println("Enevelope CLicked Completed...");
                            System.out.println("Enevelope boolean value... "+enevelopefocus);
                            System.out.println("Body Boolean Value..."+bodyfocus);
                            bodyLayout.invalidate();
                        }
                    });

                }
            }, 500);
            headerLayout.setVisibility(View.VISIBLE);

 }
 } 
```

在这里，每当单击该特定按钮时，我都会为 body 和信封使用两个标志 iam 在这里调用 bringToFront() 方法，它正在正确调用并且标志值正在正确更改，但我不知道在某些情况下它会自动进入后台帮我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:22:15.653

现在解决了这个问题，我犯的错误是我写了影响我动画的语句 bodyLayout.setVisisbility(View.GONE) 的代码的其他部分，

# php - 如何在XML中找到具有同级别其他节点值的节点？

> ID：14236368
> 
> 赞同：0
> 
> 时间：2013-01-09T13:31:33.650
> 
> 标签：php, xml

如何在 XML 中找到具有同一级别中其他节点值的节点？XML:

```
<config>
  <module>
    <idJS >001</idJS>
    <addressPLC>41000</addressPLC>
  </module>
  <module>
    <idJS >002</idJS>
    <addressPLC>42000</addressPLC>
  </module> 
</config> 
```

PHP：

```
<?php
$doc = new DOMDocument();
$doc->load( 'file.xml' );
$config = $doc->getElementsByTagName( "module" );

$ids = $doc->getElementsByTagName('idJS');
foreach ($ids as $id) {
  if ($id->nodeValue == '001') {
      echo $addressPLC;
  }
}
?> 
```

如何用“idJS”获取“addressPLC”的nodeValue？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:38:33.403

要获得`addressPLC`，`idJS`您可以获取父级并在父级中查找元素：

```
$addressPLC = $id->parentNode->getElementsByTagName("addressPLC");
echo $addressPLC->nodeValue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:40:11.967

PHP 中没有直接的方法来检索给定节点的所有兄弟节点。您需要通过选择父元素`$node->parentNode`，然后从该父元素开始并使用您已经知道的方法（例如`getElementsByTagName()`）选择所需的元素。

在 php.net 上的 DOM 文档中还有一个用户评论，它有一个实现来查找给定节点的任何兄弟节点：http: [//php.net/dom#60188](http://php.net/dom#60188)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T13:42:48.110

我认为一种更可取的方法是遍历`<module>`节点（而不是 idJS 节点）并从该点检索 idJS 和 addressPLC。

看起来没有一种简单的方法可以按名称获取节点的子元素，但是您可以添加这个方便的函数（从这里开始：[PHP DOMElement::getElementsByTagName - 无论如何只获取直接匹配的子元素？](https://stackoverflow.com/questions/3049648/php-domelementgetelementsbytagname-anyway-to-get-just-the-immediate-matching)）：

```
/**
 * Traverse an elements children and collect those nodes that
 * have the tagname specified in $tagName. Non-recursive
 *
 * @param DOMElement $element
 * @param string $tagName
 * @return array
 */
function getImmediateChildrenByTagName(DOMElement $element, $tagName)
{
    $result = array();
    foreach($element->childNodes as $child)
    {
        if($child instanceof DOMElement && $child->tagName == $tagName)
        {
            $result[] = $child;
        }
    }
    return $result;
} 
```

然后你会有：

```
foreach ($config as $module) {
  $idJS = getImmediateChildrenByTagName($module, "idJS")[0];
  if ($idJS->nodeValue == '001') {
      echo getImmediateChildrenByTagName($module, "addressPLC")[0]->nodeValue;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T22:21:15.343

你真的应该为此使用xpath：

```
$xp = new DOMXpath($doc);
echo $xp->evaluate('string(//module[./idJS[. = "001"]]/addressPLC[1])'); 
```

完毕。它也适用于`getElementsByTagName`. 见[在线演示](http://eval.in/6317)：

```
<?php

$buffer = <<<BUFFER
<config>
  <module>
    <idJS >001</idJS>
    <addressPLC>41000</addressPLC>
  </module>
  <module>
    <idJS >002</idJS>
    <addressPLC>42000</addressPLC>
  </module> 
</config>
BUFFER;

$doc = new DOMDocument();
$doc->loadXML( $buffer );

$modules = $doc->getElementsByTagName( "module" );

var_dump($modules);

foreach ($modules as $module)
{
    $ids = $module->getElementsByTagName('idJS');
    var_dump($ids);

    foreach ($ids as $id) {
        var_dump($id->nodeValue);
        if ($id->nodeValue == '001') {
            # ...
        }
    }
}

$xp = new DOMXpath($doc);
echo $xp->evaluate('string(//module[./idJS[. = "001"]]/addressPLC[1])'); 
```

# python - 大都会黑斯廷斯或蒙特卡洛方法相对于简单网格搜索的优势？

> ID：14236371
> 
> 赞同：1
> 
> 时间：2013-01-09T13:31:38.570
> 
> 标签：python, montecarlo

我有一个相对简单的函数，其中包含三个未知的输入参数，我只知道其上限和下限。我也知道我的所有数据的输出 Y 应该是什么。

到目前为止，我已经在 python 中完成了一个简单的网格搜索，循环遍历所有可能的参数组合并返回那些预测 Y 和观察到的 Y 之间的误差在设定限制内的结果。

然后我查看结果以查看哪组参数对每组样本表现最佳，查看参数之间的权衡，查看异常值如何影响数据等。

所以真的我的问题是 - 虽然我使用的网格搜索方法有点麻烦，但使用蒙特卡洛方法（如大都会黑斯廷斯）有什么优势？

我目前正在研究 MCMC 方法，但在使用它们方面没有任何实际经验，在这种情况下，我不太清楚可能会获得什么。

我非常感谢任何意见或建议

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T13:41:30.420

当底层函数很复杂（有时过于复杂而无法直接计算）和/或在高维空间中时，MCMC 方法往往很有用。当没有其他方法可行或运行良好时，通常会使用它们。由于您有一个简单的低维问题，我不希望 MCMC 方法对您特别有用。

如果您可以在足够短的时间内为您的问题域执行足够精细的网格搜索，那么这可能是一个好方法。

如果您的函数是凸函数，则有许多[众所周知的方法](https://en.wikipedia.org/wiki/Convex_optimization)，例如梯度下降。

如果您的函数具有可以轻松解决的简单函数形式，但您拥有大量异常值的数据，则[RANSAC](https://en.wikipedia.org/wiki/RANSAC)可能会有所帮助。

如果您的函数在未知位置有许多局部最小值，则[模拟退火](https://en.wikipedia.org/wiki/Simulated_annealing)可以很好地工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:39:16.957

当搜索空间变大时，进行穷举搜索变得不可行。所以我们出于必要转向蒙特卡罗方法。

# javascript - 将 YYYYMMDDHHMMSS 格式化为 YYYY/MM/DD HH:MM:SS

> ID：14236374
> 
> 赞同：3
> 
> 时间：2013-01-09T13:32:00.683
> 
> 标签：javascript

有没有一种简单的方法可以将字符串 "YYYYMMDDHHMMSS" 转换为 "YYYY/MM/DD HH:MM:SS" ？

例如我有

```
var date_string = "20121231023350"; 
```

我希望输出为

```
new_date_string = "2012/12/31 02:33:50"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T13:35:23.790

```
"20121231023350".replace(
    /^(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})$/,
    "$1/$2/$3 $4:$5:$6");  // "2012/12/31 02:33:50" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T13:40:40.777

```
function ConvertTime(OldTime)
{
    if(OldTime.length != 14)
        return "Error";

    return OldTime.substring(0,4) + "/" + OldTime.substring(4,6) + "/" + OldTime.substring(6,8) + " " + OldTime.substring(8,10) + ":" + OldTime.substring(10,12) + ":" + OldTime.substring(12,14);
}

ConvertTime("20121231023350"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T13:34:42.877

使用诸如[date.js](http://www.datejs.com/)或[Moment.js 之](http://momentjs.com/)类的库。

这些中的任何一个都应该使日期 Javascript 处理/解析/格式化变得轻而易举。

# qt - OpenGL 缓冲区和 Qt OpenGL 模块

> ID：14236378
> 
> 赞同：0
> 
> 时间：2013-01-09T13:32:07.887
> 
> 标签：qt, opengl, glew

我将使用 QT 作为窗口实用程序编写一个 OpenGL 应用程序。但我有一些问题。当我尝试使用 OpenGL 版本>=2.0 功能（例如着色器和缓冲区对象）时，我的应用程序崩溃了。我使用`QGLWidget`渲染小部件，这是我的代码片段：

```
void RenderingWidget::initializeGL()
{
    GLuint buffer_id;
    glGenBuffers(...)
          .
          .
          .
} 
```

它失败了。另一方面，当我通过类创建缓冲区和着色器时`QGLBuffer`，`QGLShader`缓冲区和着色器被正确创建，但只有片段着色器有效，顶点缓冲区什么也不做。解决办法是什么？`GLEW`如果重要的话，我通过扩展访问 OpenGL 版本>=2.0 功能/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:18:18.357

您说您通过*GLEW*访问高级 OpenGL 功能。那么您是否记得在获取 OpenGL 上下文（很可能作为第一个语句）后调用正确初始化*GLEW*？否则，必要的函数指针将无法正确设置，这确实会导致在调用.`glewInit()``initializeGL()``glGenBuffers`

另一方面，Qt 在内部进行自己的手动扩展管理，而不使用*GLEW*或任何东西，这就是 Qt 用于缓冲区或着色器管理的功能正常工作的原因。

# join - 使用实体连接 Symfony2/Doctrine 中的表

> ID：14236379
> 
> 赞同：0
> 
> 时间：2013-01-09T13:32:15.197
> 
> 标签：join, symfony, orm, doctrine, entity

我正在尝试使用我的用户实体和角色实体类中的注释方法将关系添加到我的数据库，但是当我更新元数据并从命令行运行更新然后转到 phpMyAdmin 时，使用不存在任何关系设计师工具。我正在尝试使用 Symfony2 和 Doctrine 编写所有数据库更改以保持一致。这是我目前拥有的：

```
<?php

namespace XXX\XXXBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
* Role
*
* @ORM\Table(name="role")
* @ORM\Entity
* @ORM\HasLifecycleCallbacks()
*/
class Role
{ 

 /**
 *
 * @ORM\OneToMany(targetEntity="User", mappedBy="role")
 */
private $users; 

}

<?php

namespace XXX\XXXBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
* User
*
* @ORM\Table(name="user",indexes={@ORM\Index(name="role", columns={"role_id"})})
* @ORM\Entity
* @ORM\HasLifecycleCallbacks()
*/
class User
{ 

/**
 * @var integer
 *
 * @ORM\Column(name="role_id", type="integer")
 * @ORM\ManyToOne(targetEntity="Role", inversedBy="users")
 * @ORM\JoinColumn(name="role_id", referencedColumnName="id")
 */
private $role;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:10:33.850

$role 不应包含 @ORM\Column 定义。role_id 列将由 ORM 根据 @JoinColumn 中的 name 参数自动创建。$role 将用于填充关联的角色实体，而不是整数。

# ruby-on-rails - 找不到 gem 'spree_core (~> 2.0.0.beta) ruby

> ID：14236382
> 
> 赞同：0
> 
> 时间：2013-01-09T13:32:40.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, spree

我正在尝试安装 spree，我正在使用 rails 3.2.9。我发现 spree 1.2.2 只与 rails(3.2.9) 兼容。我面临的错误是

在任何来源中都找不到 gem 'spree_gateway (>= 0) ruby​​' 所需的 gem 'spree_core (~> 2.0.0.beta) ruby​​'。

我发现 spree_core (~> 2.0.0.beta) 没有发布任何版本。

有人可以帮帮我吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:43:07.700

尝试

```
gem 'spree_gateway', :github => "spree/spree_gateway", :branch => "1-2-stable" 
```

# sharepoint-2007 - SharePoint 搜索未找到某人和一个人的职位显示不正确

> ID：14236385
> 
> 赞同：1
> 
> 时间：2013-01-09T13:32:44.803
> 
> 标签：sharepoint-2007, mysite

我是一家公司的 SharePoint 管理员。通常我可以很容易地找到解决问题的方法，但这次我被难住了。我有两个问题。其中之一是有人拥有 MySite，但当您使用人员搜索时，她并没有出现。第二个问题是另一个人的工作没有正确显示，当您按工作搜索时，它没有正确显示。职称中少了一个字。为了更新配置文件，我们使用一个数据库来存储信息并在运行特定作业时将其发送到中间数据库。我们使用广告组来确定谁获得了 MySite。

# performance - 性能：QML 窗口重绘自己很慢

> ID：14236386
> 
> 赞同：5
> 
> 时间：2013-01-09T13:32:48.650
> 
> 标签：performance, models, qml

我已经创建了这个 QML 窗口，但是当我用鼠标抓住它的边框并调整它的大小时，窗口内容的重绘速度非常慢。你可以克隆我的[仓库](https://github.com/Kakadu/qml-test-2)并自己测试。任何想法如何提高性能？

```
import QtQuick 2.0
Rectangle {

 id: root
  width: 600
  height: 600
  color: "lightgrey"
  ListView {
    model: mainModel
    spacing: 5

    width: parent.width
    orientation: ListView.Horizontal

    delegate: Rectangle {
        //width: parent.desiredWidth / mainModel.dataLen()//+ " " + model.sort
        width: root.width / mainModel.dataLen() - 10
        //width: 200

        ListView {
            id: lv1
            ScrollBar {
                flickable: lv1
                vertical: true
                hideScrollBarsWhenStopped: false
                scrollbarWidth: 5
            }

            model: homm
            spacing: 5
            width: parent.width
            height: 150
            orientation: ListView.Vertical
            delegate:
                Rectangle {
                    radius: 5
                    anchors.rightMargin: 5
                    anchors.leftMargin: 5
                    width: lv1.width
                    height: 20
                    color: "black"
                    Text { text: model.name 
                        anchors.fill: parent
                        color: "white"
                    }
            }
        }
    }

}
} 
```

在这个 QML 中，我有 listView 的 listView，它可以可视化 ListModel 的 ListModel。`homm`是主模型的属性名称。内部模型的元素有一个名为 的属性`name`。[您可以在此处](https://github.com/Kakadu/qml-test-2/blob/master/MainModel.h)和[此处](https://github.com/Kakadu/qml-test-2/blob/master/minimodel.h)浏览这些类的代码。

# ruby - Ubuntu 12.10、Ruby 1.9.3 上的 Compass gemfile 语法错误

> ID：14236388
> 
> 赞同：0
> 
> 时间：2013-01-09T13:32:52.983
> 
> 标签：ruby, gem, sass, compass-sass

运行了安装 rvm 的标准过程，它还安装了 Ruby 1.9.3，然后为 rake、compass、sass、bundler 和 guard 安装 gems，然后将我的 gems/bin 目录添加到我的路径中，我在运行 compass 时收到以下消息：

```
/home/m1ke/.rvm/gems/ruby-1.9.3-p362/gems/bundler-1.2.3/lib/bundler/dsl.rb:35:in `rescue in eval_gemfile': Gemfile syntax error: (Bundler::GemfileError)
gem "guard", "~> 1.0.1"
                    ^
from /home/m1ke/.rvm/gems/ruby-1.9.3-p362/gems/bundler-1.2.3/lib/bundler/dsl.rb:32:in `eval_gemfile'
from /home/m1ke/.rvm/gems/ruby-1.9.3-p362/gems/bundler-1.2.3/lib/bundler/dsl.rb:7:in     from /home/m1ke/.rvm/gems/ruby-1.9.3-p362/gems/bundler-1.2.3/lib/bundler/definition.rb:18:in `build'
from /home/m1ke/.rvm/gems/ruby-1.9.3-p362/gems/bundler-1.2.3/lib/bundler.rb:144:in `definition'
from /home/m1ke/.rvm/gems/ruby-1.9.3-p362/gems/bundler-1.2.3/lib/bundler.rb:112:in `setup'
from /home/m1ke/.rvm/gems/ruby-1.9.3-p362/gems/bundler-1.2.3/lib/bundler.rb:128:in `require'
from /home/m1ke/.rvm/gems/ruby-1.9.3-p362/gems/compass-0.12.2/bin/compass:26:in `<top (required)>'
from /home/m1ke/.rvm/gems/ruby-1.9.3-p362/bin/compass:19:in `load'
from /home/m1ke/.rvm/gems/ruby-1.9.3-p362/bin/compass:19:in `<main>
from /home/m1ke/.rvm/gems/ruby-1.9.3-p362/bin/ruby_noexec_wrapper:14:in `eval'
from /home/m1ke/.rvm/gems/ruby-1.9.3-p362/bin/ruby_noexec_wrapper:14:in `<main>' 
```

所有 gem 都使用标准`gem install compass`语法安装，我也运行过`gem update --system`

更多信息！

*   相同的 gem 在我的 Windows 安装上运行良好，使用 Windows RubyInstaller 安装。
*   没有任何响应，我尝试删除 gem 并从`apt-get`. 这工作正常，但现在另一个 gem（apt-get 上不可用）报告错误来自两者，但我假设 Compass apt-get 安装`/home/m1ke/.rvm/gems/ruby-1.9.9-p362/`也来自该错误。`/usr/share/ruby-1.9.1/`所以现在我可能有两个 Ruby 版本在战斗......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:28:25.507

[在另一个线程上](https://stackoverflow.com/questions/10610254/cant-install-compass-via-rvm)找到了答案

只需运行`rubygems-bundler-uninstaller`，问题立即得到解决。在这里发布这个而不是仅仅链接，因为当我搜索我的错误时没有出现链接的线程，因为我的错误是语法错误，而链接的帖子有一个“找不到文件”错误。

# c# - ObjectContext 实例已被释放，不能再用于需要连接的操作

> ID：14236389
> 
> 赞同：0
> 
> 时间：2013-01-09T13:32:56.033
> 
> 标签：c#, asp.net, linq, entity-framework

```
public List<User> Getdata()
{
     using (var context =new  huntableEntities())
     {             
         IQueryable<User> userrecords = (context.Users.Where(x => x.RecuiteReferalId == 24));
         userrecords.ToList().ForEach(u =>
                                         {

                                          u.CurrentCompany =
                                                 u.EmploymentHistories.Where(
                                                         e => e.IsCurrent && e.MasterCompany != null).Select(
                                                             e => e.MasterCompany.Description).FirstOrDefault();
                                                 u.CurrentPosition =
                                                     u.EmploymentHistories.Where(
                                                         e => e.IsCurrent && !string.IsNullOrEmpty(e.JobTitle)).
                                                         Select(e => e.JobTitle).FirstOrDefault();
                                         });
        return userrecords.AsEnumerable().ToList();
     }          
} 
```

我收到了`object context disposed`at return 声明

我尝试通过查询和方法`IEnumerable`，但结果是一样的。我还尝试将延迟加载设置为 false。

猜猜我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:43:52.383

调用后，`ToList`您正在执行查询，因此将实体与上下文断开连接 - 您需要在调用ie`ToList` *之前删除调用*`ForEach`

```
userrecords.ForEach(u => ...); 
```

`AsEnumerable`此外，您的返回类型无需调用`List<User>`，只需`ToList`在返回查询之前调用，即

```
return userrecords.ToList(); 
```

这不仅可以解决您的问题，而且由于您现在只访问数据库一次，因此效率更高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:55:17.613

不确定为什么在您`return`列出列表时会处理上下文，但是您的代码中有一个偷偷摸摸的扭曲，无论如何都会产生意想不到的结果。您的`ForEach`声明不会改变任何事情！`userrecords`是一个`IQueryable`，你唯一要做的就是枚举它两次：在语句中`ForEach`和在`ToList()`语句`return`中。

您可以通过在开始时创建一个列表来防止这种情况：

```
List<User> userrecords = context.Users
                        .Include("EmploymentHistories.MasterCompany")
                        .Where(x => x.RecuiteReferalId == 24)
                        .ToList();
userrecords.ForEach(u => ... 
```

这`Include`是为了防止n + 1个查询。已处置的上下文现在不应该成为问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T14:44:58.573

而不是使用扩展方法，您应该只使用常规的 Foreach 循环来获得 @James 所说的好处。另外，您还可以清理 LINQ 查询：

```
foreach (var u in userrecords)
{
  u.CurrentCompany = u.EmploymentHistories
                      .FirstOrDefault(e => e.IsCurrent && e.MasterCompany != null)
                      .MasterCompany.Description;

  u.CurrentPosition = u.EmploymentHistories
                       .FirstOrDefault(e => e.IsCurrent && string.IsNullOrEmpty(e.JobTitle))
                       .JobTitle;
} 
```

并让它返回`userrecords.ToList()`。

不过，还有一点需要注意：如果您在任何时候尝试使用`User`记录上的导航属性，您也可能会遇到相同的异常，因为连接已经关闭，并且它正在尝试延迟加载实体而没有连接（因此失败）。在这种情况下，您可以关闭延迟加载，或者您可以在此方法中实际调用该属性（不更改任何内容，只是为了读取它）以在连接关闭之前加载它。

# wpf - 如何使用 HelixToolkit 或其他工具在 WPF 中创建粗锥？

> ID：14236393
> 
> 赞同：0
> 
> 时间：2013-01-09T13:33:06.643
> 
> 标签：wpf, 3d

如何使用 Helixtoolkit 库创建一个厚锥体（我更喜欢 Helix，但自定义代码也可以），如果我使用不带帽的 MeshBuilder.AddCone 方法，它太薄以至于在某个角度，锥体消失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:43:32.027

我通过设置 BackMaterial 属性实现了消失问题。它还不是一个厚锥​​，但解决了我的问题。

# ssrs-2008 - SSRS - Tablix 超过 page1 空间时的半空白页面

> ID：14236394
> 
> 赞同：2
> 
> 时间：2013-01-09T13:33:07.807
> 
> 标签：ssrs-2008, reporting, reporting-services, ssrs-tablix

我对这个问题的标题可能有点令人困惑，但让我试着解释一下会发生什么。

我们的公司报告模板需要页眉和页脚。页脚显示在每一页上，但页眉应该只显示在第 1 页上。

为此，我们从报表标题中删除了标题内容，并将其放置在 Tablix 上方的报表顶部。这产生了预期的结果，但我们现在遇到了半空白页面的问题。

一些背景：
- 第 1 页的页眉占页面约 5 厘米。
- 页面上没有重叠的控件。
- **InteractiveSize 属性：** 21cm、29.7cm
- **Margins 属性：** 1cm、1cm、0cm、0.5cm
- **PageSize 属性：** 21cm、29.7cm

现在让我们在第 1 页上说，tablix 数据有**X**量的空间（因为标题），但是从第 2 页到最后，tablix 数据有**Y**量的空间。

我们遇到的问题是，当应该渲染的数据总量在**X**和**Y**之间时。然后报表呈现带有页眉的第一页，但除了页眉和页脚之外，该页是空白的。然后在第 2 页上，Tablix 将显示数据。

如果数据量小于**X**或大于**Y**，那么我们没有问题；报告按预期呈现。

谁能指出我正确的方向？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:44:58.653

听起来 tablix 的[KeepTogether](http://msdn.microsoft.com/en-us/library/microsoft.reportingservices.reportrendering.dataregion.keeptogether%28SQL.100%29.aspx)属性设置为`True`这样，当第一页上没有足够的空间但第二页上有整个 tablix 的空间时，它会在第二页上呈现。

设置它`False`

# python - pyserial 的超时值在 Windows 上不起作用

> ID：14236397
> 
> 赞同：1
> 
> 时间：2013-01-09T13:33:11.660
> 
> 标签：python, windows, timeout, pyserial

我在 64 位 Windows 7 机器上运行 Python 2.7.3，并且它（通过 USB->RS232 电缆）连接到运行相同 Python 版本（2.7.3）的 64 位 Ubuntu 机器。

我遇到了一个问题，timeout=None 在 Windows 7 端似乎无法正常工作，我不知道为什么。

这是我在 Win 方面所拥有的：

```
>>> import serial
>>> s = serial.Serial(3)
>>> s.baudrate = 9600
>>> s
Serial<id=0x203a320, open=True>(port='COM4', baudrate=9600, bytesize=8, parity='N',
stopbits=1, timeout=None, xonxoff=False, rtscts=False, dsrdtr=False)
>>> s.read(5)
''                  <--- returns right away
>>> s.timeout = 0
>>> s.read(5)
''                  <--- correctly returns right away
>>> s.timeout = 10
>>> s.read(5)       <--- correctly waits 10s 
```

现在我在[这里](http://pyserial.sourceforge.net/pyserial_api.html#serial.Serial.read)阅读了文档，我知道如果我不给它超时`None`它应该永远等待，并且`0`超时它应该立即返回，但`None`它是默认值并且它没有等待......我想知道是否发生了变化，但是当我在 Linux 端尝试代码时，它可以工作：

```
>>> import serial
>>> s = serial.Serial("/dev/ttyUSB0")
>>> s.baudrate = 9600
>>> s
Serial<id=0x7f325e002b50, open=True>(port='/dev/ttyUSB0', baudrate=9600, bytesize=8, 
parity='N', stopbits=1, timeout=None, xonxoff=False, rtscts=False, dsrdtr=False)
>>> s.read(5)
''                  <--- correctly waits forever
>>> s.timeout = 0
>>> s.read(5)
''                  <--- correctly returns right away
>>> s.timeout = 10
>>> s.read(5)       <--- correctly waits 10s 
```

在 Windows 上进行设置时是否有任何已知的警告？有谁知道为什么我会看到这个问题？关于我可以尝试帮助诊断此故障的其他事情的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:28:38.807

在带有 python 2.7.3 和 pyserial 2.6 的 windows 7 x64 上它工作正常：

```
>>> import serial
>>> s = serial.Serial(1)
>>> Serial<id=0x3ea5518, open=True>(port='COM2', baudrate=9600, bytesize=8, parity='N', stopbits=1, timeout=None, xonxoff=False, rtscts=False, dsrdtr=False)
>>> s.read(5)
# ... after receiving real data ... 
'\xb99\xad\x87\xc2' 
```

你使用什么版本的 PySerial？我已经从 Christoph Gohlke [1](http://www.lfd.uci.edu/~gohlke/pythonlibs/)的 Unofficial Windows Binaries for Python Extension Packages 中编译了二进制文件。也许你应该试试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-08T13:23:38.177

我在 Raspberry Pi 上遇到了同样的问题。值得注意的是 USB-RS232 电缆！这似乎与纯 RS232 接口有不同的行为。当您从端口读取 n 字节时，即使没有可用数据，它也将始终返回 n“0”字节。特别是它会用前面提到的“0”字节填充一个请求超过 in_waiting 承诺的读取请求。解决这个问题的唯一方法是使用 in_waiting 并仅读取属性承诺的字节数。

# javascript - IE8 Jquery scrollTop 总是返回 0

> ID：14236401
> 
> 赞同：0
> 
> 时间：2013-01-09T13:33:28.937
> 
> 标签：javascript, jquery, internet-explorer, internet-explorer-8

我为 jQuery 编写了一个小插件，用于实现简单的视差滚动效果。它适用于除 < ie8 之外的所有浏览器。

```
$.fn.extend({ 
    //plugin name - parallax ( simpel )
    parallax: function(options) {

        var defaults = {
            speed: 3
        };

        var options = $.extend(defaults, options);
        var o = options;
        var obj = $(this);
        var s = $(window).scrollTop() / o.speed;

        if ($.browser.msie && parseInt($.browser.version, 10) <= 8) {
            obj.css({"top" : -s + "px"});
        }else{
            obj.css("-webkit-transform", "translateY(-" + s + "px)");
            obj.css("-moz-transform", "translateY(-" + s + "px)");
            obj.css("-ms-transform", "translateY(-" + s + "px)");
        }                                
    }
}); 
```

在我的主 jQuery 文件中，我使用如下代码：

```
$(window).scroll(function(){
    $('.headMenu').parallax({speed: 6});
    $('.header_img').parallax();
}); 
```

由于某种原因，'s' 始终保持为 0。找不到原因。我认为 $(window).scroll 在 IE8 中不起作用。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-09T13:46:11.863

过去我在 IE 中的 scrollTop() 运气不好，但不知道为什么。如果它符合您的需求，请尝试`window.scrollTo(0, 0);`在所有 IE 中始终使用为我工作 :-)

# latex - CMake 和乳胶

> ID：14236402
> 
> 赞同：8
> 
> 时间：2013-01-09T13:33:30.037
> 
> 标签：latex, cmake

我正在使用[UseLATEX.cmake](http://www.cmake.org/Wiki/images/8/80/UseLATEX.cmake)来编译我的项目文档文件夹。

我的项目组织如下——

```
.
├── CMakeLists.txt
├── bin
├── build
├── cmake
│   ├── CMakeCompilerFlags.cmake
│   ├── CMakeDefaults.cmake
│   ├── MacroEnsureOutOfSourceBuilds.cmake
│   └── UseLATEX.cmake
├── doc
│   ├── Doc.tex
│   ├── CMakeLists.txt
│   └── images
│       ├── img1.png
│       ├── img2.png
│       ├── img3.png
│       └── img4.jpeg
............
└── src
    ├── CMakeLists.txt
    ├── file1.cpp
    ├── file2.cpp
    └── file3.cpp 
```

我的根级 cmake 文件是这样的......

```
cmake_minimum_required(VERSION 2.8 FATAL_ERROR)

# Set path for CMake
set(CMAKE_MODULE_PATH
    "${CMAKE_SOURCE_DIR}/cmake"
    ${CMAKE_MODULE_PATH}
)

# Define project settings
project(proj)
set(APPLICATION_NAME ${PROJECT_NAME})
include(CMakeDefaults)

# Compile Program and Docs
include_directories(inc)
add_subdirectory(src)
add_subdirectory(doc) 
```

而文档文件中的CMakeList文件是——

```
include(UseLATEX)

ADD_LATEX_DOCUMENT(Doc.tex
    #BIBFILES mybib.bib
    IMAGE_DIRS images
    DEFAULT_PDF
) 
```

`build`现在我在文件夹中编译我的项目。有什么办法可以将文件夹`Doc.pdf`中创建的文件复制`build/doc`回我原来的构建文件夹？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T23:07:52.803

由于`ADD_LATEX_DOCUMENT`添加了此处命名的 CMake 目标`pdf`，您应该能够使用[`add_custom_command`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aadd_custom_command). 尝试在通话`/doc/CMakeLists.txt` *后添加以下内容：*`ADD_LATEX_DOCUMENT`

```
add_custom_command(TARGET pdf POST_BUILD
                   COMMAND ${CMAKE_COMMAND} -E copy
                       ${CMAKE_CURRENT_BINARY_DIR}/Doc.pdf
                       ${CMAKE_BINARY_DIR}/Doc.pdf) 
```

每次构建目标时，此自定义命令都会调用 cmake 可执行文件（保存在变量中`${CMAKE_COMMAND}`）以及[`-E copy`参数。](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#opt%3a-E)`pdf`

# powershell - 如何通过 Powershell 启用 Windows 功能

> ID：14236406
> 
> 赞同：28
> 
> 时间：2013-01-09T13:33:36.297
> 
> 标签：powershell

我需要使用 Powershell 启用两个 Windows 功能。但我不知道他们的名字或如何找到他们。

![Windows功能](../Images/a04f398619d7a2c63b459d1636477cdf.png)

到目前为止，我已经设法安装 IIS 并使用[此处](https://gist.github.com/1302170)找到的脚本停止默认应用程序池。

```
function InstallFeature($name) {
    cmd /c "ocsetup $name /passive"
}
InstallFeature IIS-WebServerRole
    InstallFeature IIS-WebServer
        InstallFeature IIS-CommonHttpFeatures
            InstallFeature IIS-DefaultDocument
            InstallFeature IIS-DirectoryBrowsing
            InstallFeature IIS-HttpErrors
            InstallFeature IIS-HttpRedirect
            InstallFeature IIS-StaticContent
        InstallFeature IIS-HealthAndDiagnostics
            InstallFeature IIS-CustomLogging
            InstallFeature IIS-HttpLogging
            InstallFeature IIS-HttpTracing
            InstallFeature IIS-LoggingLibraries
        InstallFeature IIS-Security
            InstallFeature IIS-RequestFiltering
            InstallFeature IIS-WindowsAuthentication
        InstallFeature IIS-ApplicationDevelopment
            InstallFeature IIS-NetFxExtensibility
            InstallFeature IIS-ISAPIExtensions
            InstallFeature IIS-ISAPIFilter
            InstallFeature IIS-ASPNET
    InstallFeature IIS-WebServerManagementTools 
        InstallFeature IIS-ManagementConsole 
        InstallFeature IIS-ManagementScriptingTools

import-module WebAdministration

Stop-WebAppPool DefaultAppPool 
```

**解决方案**

搜索：

```
Get-WindowsFeature *ASP*
Get-WindowsFeature *activation* 
```

安装：

```
Add-WindowsFeature NET-Framework-45-ASPNET
Add-WindowsFeature NET-HTTP-Activation 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2015-12-30T21:05:41.830

对于较新的 Windows 客户端操作系统（Windows 10/8.1/8），您不能使用**Install-WindowsFeature**，因为它仅用于管理服务器上的功能。尝试使用它会导致错误消息：

> Get-WindowsFeature ：指定 cmdlet 的目标不能是基于 Windows 客户端的操作系统。

有一个 DISM Powershell 模块，可用于查找和安装可选功能：

```
gcm -module DISM #List available commands
Get-WindowsOptionalFeature -online | ft #List all features and status
Enable-WindowsOptionalFeature -online -FeatureName NetFx3 -Source e:\Sources\sxs 
```

仅当功能需要引用源文件的安装介质时才需要最后一个命令`-Source e:\Sources\sxs`（通常用于修复错误：0x800f081f 找不到源文件）。.NET Framework 3.5 版似乎是唯一需要客户端操作系统的版本，但服务器操作系统上还有许多其他版本需要引用安装媒体的源代码。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-09T13:39:27.610

如果您在 Windows 2008R2 中，则有一个模块：

`Import-Module servermanager`

此模块导出 3 个 cmdlet `Get-WindowsFeature`:`Add-WindowsFeature`和`remove-WindowsFeature`

因此您可以 `get-windowsfeature *frame*`列出 .net 功能并通过以下命令安装它 `Add-WindowsFeature Net-Framework`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-07-29T13:46:39.897

试试这个来获取名称（短）和显示名称（长描述）：
get-windowsfeature | 格式表 - 属性名称，显示名称 -AutoSize

使用它来安装它们：
Install-WindowsFeature -Name $Name

其中 $Name 是 get 中的 name 属性

PS：Install-WindowsFeature 已经取代了 Add-WindowsFeature

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-19T16:34:28.900

最简单的方法（它对我有用）是：

*   拿一台没有安装必要角色和功能的电脑
*   转到添加服务器角色和功能（在服务器管理器中）
*   使用向导添加必要的角色和功能
*   在最后一个屏幕上，在按下“安装”按钮之前，您会注意到“导出配置设置”链接

[导出配置设置](https://i.stack.imgur.com/XGf2e.png)

保存 XML 文件。

获得 XML 文件后，您可以使用下面列出的 PowerShell 脚本来调用“Install-WindowsFeature”cmdlet（Server 2012、2016）。

注意 1：PowerShell 脚本设计用于 Windows Server 2008、2012 和 2016。对于 Windows Server 2008，cmdlet 是 Add-WindowsFeature。

注意 2：PowerShell 脚本假定 XML 文件位于同一文件夹中，并且它的名称在脚本中列出 - 请参阅第 3 行和第 4 行。

```
Import-Module ServerManager -ErrorAction Stop

$win2k8xml = '.\features-w2k8.xml'
$win2k12xml = '.\RolesAndFeatures.xml'

$minOSVersion = [version] "6.1.7600" # Windows Server 2008 R2 RTM version
$os = Get-WmiObject Win32_OperatingSystem
$currentVersion = [version]$os.Version

if($currentVersion -lt $minOSVersion)
{
    throw "OS version equal or greater than ${minOSVersion} is required to run this script"
}
elseif($currentVersion.ToString().substring(0,3) -eq $minOSVersion.ToString().substring(0,3))
{
If (!(Test-Path $win2k8xml)) {Write-Host "For Windows Server 2008 R2 server make sure that you have Features-W2K8.xml in the current folder" -ForegroundColor Yellow; Pause}
}
elseif($currentVersion -gt $minOSVersion){                                                            

If (!(Test-Path $win2k12xml)) {Write-Host "For Windows Server 2012/2016 make sure that you have RolesAndFeatures.xml in the current folder" -ForegroundColor Yellow; Pause}
}

$OSVersionName = (get-itemproperty -Path "HKLM:\SOFTWARE\Microsoft\Windows NT\CurrentVersion" -Name ProductName).ProductName
Write-Host "Your OS version is:$OSVersionName" -ForegroundColor Green

$defaultComputerName = $env:computername
$ComputerName = Read-Host "Computername (Press Enter for current computer - $defaultComputerName)"

if ([string]::IsNullOrEmpty($ComputerName))
{
    $ComputerName = $defaultComputerName;
}

Write-host "Installation will take place on the following computers: $ComputerName"

function Invoke-WindowsFeatureBatchDeployment {
    param (
        [parameter(mandatory)]
        [string] $ComputerName,
        [parameter(mandatory)]
        [string] $ConfigurationFilePath
    )

    # Deploy the features on multiple computers simultaneously.
    $jobs = @()
    if(Test-Connection -ComputerName $ComputerName -Quiet){
        Write-Host "Connection succeeded to: " $ComputerName

        if ($currentVersion.ToString().substring(0,3) -eq $minOSVersion.ToString().substring(0,3)) {
        $jobs += Start-Job -Command {
        #Add-WindowsFeature -ConfigurationFilePath $using:ConfigurationFilePath -ComputerName $using:ComputerName -Restart
        $import = Import-Clixml $using:ConfigurationFilePath
        $import | Add-WindowsFeature
        } 
        } 
        elseif ($currentVersion -gt $minOSVersion) {
        $jobs += Start-Job -Command {
        Install-WindowsFeature -ConfigurationFilePath $using:ConfigurationFilePath -ComputerName $using:ComputerName -Restart
        } 
        }    

    }
    else{
        Write-Host "Configuration failed for: "+ $ComputerName + "! Check computer name and execute again"
    }

    Receive-Job -Job $jobs -Wait | Select-Object Success, RestartNeeded, ExitCode, FeatureResult
}
if ($currentVersion.ToString().substring(0,3) -eq $minOSVersion.ToString().substring(0,3)) {$FilePath = Resolve-Path $win2k8xml}
elseif ($currentVersion -gt $minOSVersion) {$FilePath = Resolve-Path $win2k12xml}

Invoke-WindowsFeatureBatchDeployment $ComputerName $FilePath 
```

# html - 在 IE9 的 tds 上使用 cols 和 colspan 进行表格渲染

> ID：14236408
> 
> 赞同：1
> 
> 时间：2013-01-09T13:33:41.837
> 
> 标签：html, html-table, internet-explorer-9

我正在制作 HTML 表格来显示数据，并且表格中有不同数量的列，但希望保持相同数量的“背景列”，以保持列的宽度一致。

其原因是特定于我的应用程序并且与问题无关，因为这似乎是一个错误（或者我误解了`col`'s 和`colgroup`'s 应该如何工作？）

在我在这里展示的 HTML 中，我已将实际列数减少到两个。

我使用这样的方法制作表格，并使用 CSS 设置元素`colgroup`的宽度：`col`

**表格1：**

```
<table>
    <colgroup>
        <col />
        <col />
    </colgroup>
    <tbody>
        <tr>
            <td colspan="1">col1</td>
            <td colspan="1">col2</td>
        </tr>
        <tr>
            <td colspan="2">col1</td>
        </tr>
    </tbody>
</table> 
```

**表 2：**

```
<table>
    <colgroup>
        <col />
        <col />
    </colgroup>
    <tbody>
        <tr>
            <td colspan="2">col1</td>
        </tr>
        <tr>
            <td colspan="2">col1</td>
        </tr>
    </tbody>
</table> 
```

**CSS：**

```
col {
    width:100px;                
} 
```

这两个表都可以在 FireFox、Chrome、IE7 和 IE8（其中“IE”代表“Internet Explorer”）中呈现良好。然而，在 IE9 中，**表 2**仅以一列的宽度呈现。

我试过有无`table-layout: fixed`

我已经对这些表以及所有空格都删除的表进行了修改，以说明这与 IE9 中的表渲染错误无关：http: [//jsfiddle.net/ketnp/1/](http://jsfiddle.net/ketnp/1/)

# ms-access - 访问查询，其中一个字段类似于另一个字段

> ID：14236410
> 
> 赞同：1
> 
> 时间：2013-01-09T13:33:45.217
> 
> 标签：ms-access, ms-access-2010

我正在尝试查询一个表中的字段，该字段类似于另一个表中的字段，但无法获得有效结果。

我想找到`Pager_ID`in与in`tbl_Emergin_Current_Device_Listing_20121126`类似的地方。`Pager_ID``tbl_AMCOM_PROD`

一些相关信息：

*   `Pager_ID`in`tbl_Emergin_Current_Device_Listing_20121126`最多 10 个字符并且始终是数字字符（10 个字符 Pager_ID 的示例：3145551212）。
*   但是，`Pager_ID`in`tbl_AMCOM_PROD`可以是字母数字 (3145551212@att.txt.com，这将是同一用户。
*   所有数据都以文本形式存储。

当“ 3145551212 `tbl_Amcom_Prod.Pager_ID`”出现在`tbl_Emergin_Current_Device_Listing_20121126.Pager_ID`. 但是，使用下面的代码，我只能找到完全匹配（EQUAL 而不是 LIKE）。

当前代码：

```
SELECT DISTINCT tbl_emergin_current_device_listing_20121126.userrecno,
            tbl_emergin_current_device_listing_20121126.username,
            tbl_emergin_current_device_listing_20121126.department,
            tbl_emergin_current_device_listing_20121126.carriername,
            tbl_emergin_current_device_listing_20121126.protocol,
            tbl_emergin_current_device_listing_20121126.pin,
            tbl_emergin_current_device_listing_20121126.pager_id,
            Iif([tbl_amcom_group_call_leads_and_id].[amcom listing msg id], 
                [tbl_amcom_group_call_leads_and_id].[amcom msg group id], 
                [tbl_amcom_prod].[messaging_id]) 
                AS [Amcom Messaging or Message Group ID]
FROM   ((tbl_emergin_current_device_listing_20121126
     LEFT JOIN tbl_amcom_prod
            ON tbl_emergin_current_device_listing_20121126.pager_id =
               tbl_amcom_prod.pager_id)
    LEFT JOIN tbl_amcom_group_call_leads_and_id
           ON tbl_emergin_current_device_listing_20121126.pager_id =
              tbl_amcom_group_call_leads_and_id.[ams group call lead])
   LEFT JOIN tbl_deactivated_pager_list
          ON tbl_emergin_current_device_listing_20121126.pager_id =
             tbl_deactivated_pager_list.[pager number]; 
```

样本结果：

```
UserRecNo   UserName    Department  CarrierName Protocol    PIN PAGER_ID    Amcom Messaging or Message Group ID

43  Brown, Lewis    BJH Verizon 0   3145550785  3145550785  3145550785
52  Wyman, Mel  BJH Airtouch (Verizon) (SNPP)   3   3145558597  3145558597  3145558330 
```

我也想看看这条记录，但不是当前的代码：

```
57  Johnson, Mick   BJH AT&T    3   3145551234  3145551234@att.txt.com  3145559876 
```

我应该做出什么改变？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:43:02.990

就像是：

```
 SELECT Pager_ID 
 FROM tbl_Amcom_Prod a
 LEFT JOIN  [tbl_Emergin_Current_Device_Listing_20121126] b
 On a.Pager_ID  & "*" Like b.Pager_ID 
```

这仅适用于 SQL 视图，不适用于设计视图。

您也可以使用 Instr & Mid 的混合物。

```
SELECT IIf(InStr([Pager_ID] & "",".")>0,
           Mid([Pager_ID],1,InStr([Pager_ID],".")-1),[Pager_ID ]) AS PID
FROM [tbl_Amcom_Prod]
WHERE IIf(InStr([Pager_ID] & "",".")>0,
           Mid([Pager_ID],1,InStr([Pager_ID],".")-1),[Pager_ID]) 
           In (SELECT Pager_ID 
               FROM [tbl_Emergin_Current_Device_Listing_20121126]) 
```

# spring - 如何使用自定义注释 @Foo 找到所有 bean？

> ID：14236424
> 
> 赞同：41
> 
> 时间：2013-01-09T13:34:29.807
> 
> 标签：spring, configuration, annotations

我有这个弹簧配置：

```
@Lazy
@Configuration
public class MyAppConfig {
    @Foo @Bean
    public IFooService service1() { return new SpecialFooServiceImpl(); }
} 
```

如何获取所有带有注释的 bean 的列表`@Foo`？

注意：`@Foo`是我定义的自定义注解。它不是“官方”的 Spring 注释之一。

**[编辑]**按照 Avinash T. 的建议，我编写了这个测试用例：

```
import static org.junit.Assert.*;
import java.lang.annotation.ElementType;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

import java.lang.annotation.Retention;
import java.lang.reflect.Method;
import java.util.Map;
import org.junit.Test;
import org.springframework.beans.factory.config.BeanDefinition;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.Lazy;

public class CustomAnnotationsTest {

    @Test
    public void testFindByAnnotation() throws Exception {

        AnnotationConfigApplicationContext appContext = new AnnotationConfigApplicationContext( CustomAnnotationsSpringCfg.class );

        Method m = CustomAnnotationsSpringCfg.class.getMethod( "a" );
        assertNotNull( m );
        assertNotNull( m.getAnnotation( Foo.class ) );

        BeanDefinition bdf = appContext.getBeanFactory().getBeanDefinition( "a" );
        // Is there a way to list all annotations of bdf?

        Map<String, Object> beans = appContext.getBeansWithAnnotation( Foo.class );
        assertEquals( "[a]", beans.keySet().toString() );
    }

    @Retention( RetentionPolicy.RUNTIME )
    @Target( ElementType.METHOD )
    public static @interface Foo {

    }

    public static class Named {
        private final String name;

        public Named( String name ) {
            this.name = name;
        }

        @Override
        public String toString() {
            return name;
        }
    }

    @Lazy
    @Configuration
    public static class CustomAnnotationsSpringCfg {

        @Foo @Bean public Named a() { return new Named( "a" ); }
             @Bean public Named b() { return new Named( "b" ); }
    }
} 
```

但它失败了`org.junit.ComparisonFailure: expected:<[[a]]> but was:<[[]]>`。为什么？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-09T13:43:20.557

使用[getBeansWithAnnotation()](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/ListableBeanFactory.html#getBeansWithAnnotation%28java.lang.Class%29)方法获取带有注释的 bean。

```
Map<String,Object> beans = applicationContext.getBeansWithAnnotation(Foo.class); 
```

[这](https://stackoverflow.com/questions/6257092/find-annotation-in-spring-proxy-bean)是类似的讨论。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2018-02-05T23:15:55.280

**更新：** Spring 5.2[改变了它的行为](https://github.com/spring-projects/spring-framework/commit/e0fe32af05ac525ef5e11c3ac5195a08759bb85e)，`context.getBeansWithAnnotation(...)`现在它可以正确处理通过工厂方法创建的 bean。所以简单地使用它。

原始答案

* * *

虽然接受的答案和[Grzegorz 的答案](https://stackoverflow.com/a/14248490/294657)包含适用于*所有*情况的方法，但我发现了一种更简单的方法，它对最常见的情况同样适用。

1.  元`@Foo`注释`@Qualifier`：

    ```
    @Target({ElementType.FIELD, ElementType.METHOD, ElementType.PARAMETER, ElementType.TYPE, ElementType.ANNOTATION_TYPE})
    @Retention(RetentionPolicy.RUNTIME)
    @Qualifier
    public @interface Foo {
    } 
    ```

2.  `@Foo`如问题中所述，洒在工厂方法上：

    ```
    @Foo
    @Bean
    public IFooService service1() {
        return new SpecialFooServiceImpl();
    } 
    ```

但它也适用于类型级别：

```
@Foo
@Component
public class EvenMoreSpecialFooServiceImpl { ... } 
```

3.  然后，注入所有由 限定的实例`@Foo`，无论它们的类型和创建方法如何：

    ```
    @Autowired
    @Foo
    List<Object> fooBeans; 
    ```

`fooBeans`然后将包含由`@Foo`-annotated 方法产生的所有实例（根据问题的要求），或从发现的带`@Foo`注释的类创建。

如果需要，该列表还可以按类型过滤：

```
@Autowired
@Foo
List<SpecialFooServiceImpl> fooBeans; 
```

好的部分是它不会干扰`@Qualifier`方法上的任何其他（元）注释，也不会干扰`@Component`类型级别的其他注释。它也不会在目标 bean 上强制执行任何特定的名称或类型。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-06-27T12:20:03.010

在几位 Spring 专家的帮助下，我找到了一个解决方案： a 的`source`属性`BeanDefinition`可以是`AnnotatedTypeMetadata`。这个接口有一个方法`getAnnotationAttributes()`，我可以用它来获取 bean 方法的注释：

```
public List<String> getBeansWithAnnotation( Class<? extends Annotation> type, Predicate<Map<String, Object>> attributeFilter ) {

    List<String> result = Lists.newArrayList();

    ConfigurableListableBeanFactory factory = applicationContext.getBeanFactory();
    for( String name : factory.getBeanDefinitionNames() ) {
        BeanDefinition bd = factory.getBeanDefinition( name );

        if( bd.getSource() instanceof AnnotatedTypeMetadata ) {
            AnnotatedTypeMetadata metadata = (AnnotatedTypeMetadata) bd.getSource();

            Map<String, Object> attributes = metadata.getAnnotationAttributes( type.getName() );
            if( null == attributes ) {
                continue;
            }

            if( attributeFilter.apply( attributes ) ) {
                result.add( name );
            }
        }
    }
    return result;
} 
```

[带有帮助类和测试用例的完整代码的要点](https://gist.github.com/digulla/5875990)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-01-09T23:43:48.783

# 短篇故事

仅仅为了让bean`@Foo`用.`a()``a``@Foo`

# 很长的故事

在我开始调试 Spring 代码之前我并没有意识到这一点，一个断点`org.springframework.beans.factory.support.DefaultListableBeanFactory.findAnnotationOnBean(String, Class<A>)`帮助我理解了它。

当然，如果您将注释移至 Named 类：

```
 @Foo
  public static class Named {
  ... 
```

*并修复了测试工作*的一些小细节（注释目标等）。

再三考虑之后，这很自然。当`getBeansWithAnnotation()`被调用时，Spring 拥有的唯一信息是 bean。bean 是对象，对象有类。而且 Spring 似乎不需要存储任何额外的信息，包括。用于创建带有注释的 bean 的工厂方法是什么？

**编辑**有一个要求保留`@Bean`方法注释的问题：[https ://jira.springsource.org/browse/SPR-5611](https://jira.springsource.org/browse/SPR-5611)

它已通过以下解决方法关闭为“无法修复”：

*   雇用一个`BeanPostProcessor`
*   使用提供给 BPP 的方法从封闭`beanName`中查找关联`BeanDefinition``BeanFactory`
*   查询`BeanDefinition`它的`factoryBeanName`（`@Configuration`bean）和`factoryMethodName`（`@Bean`名称）
*   使用反射来获取`Method`源自的 bean
*   使用反射来询问来自该方法的任何自定义注释

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-03T07:45:02.027

这是获取带注释的bean的方法。

```
@Autowired
private ApplicationContext ctx;

public void processAnnotation() {
    // Getting annotated beans with names
    Map<String, Object> allBeansWithNames = ctx.getBeansWithAnnotation(TestDetails.class);
    //If you want the annotated data
    allBeansWithNames.forEach((beanName, bean) -> {
        TestDetails testDetails = (TestDetails) ctx.findAnnotationOnBean(beanName, TestDetails.class);
        LOGGER.info("testDetails: {}", testDetails);
    });
} 
```

# ios - 检测iOS dylib（越狱）

> ID：14236425
> 
> 赞同：1
> 
> 时间：2013-01-09T13:34:30.577
> 
> 标签：ios, objective-c, jailbreak, dylib, dynamic-library

我的应用程序（越狱的 iOS）是否有一种优雅的方式（Objective C 或 C）来检查特定的动态库在 iOS 中是否可用，而不是使用`NSFileManager`或调用检查实际的 dylib 文件是否存在于特定路径中`dlopen`？（例如，一个包含我可以访问的可用动态库信息的对象。）

更新：我知道我也可以在我的项目设置（Xcode）中要求它，但是如果 dylib 不可用，应用程序只会在启动时崩溃，没有任何反馈（如果有办法抓住这个并发出警报在崩溃之前，这也是一个可以接受的解决方案）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:25:02.333

如果您为 dylib 使用弱链接，通过检查特定符号应该很容易检测库是否存在。

假设您`void foo( void );`在该库中有一个函数。

您可以`extern`在自己的代码中声明该原型，并使用`weak_import`属性：

```
extern void foo( void ) __attribute__( ( weak_import ) ); 
```

这样，如果找不到符号（因为它不再在库中，或者因为整个库不可用），链接器会将符号的地址设置为`NULL`.

然后，您可以简单而优雅地检查该符号：

```
if( foo == NULL )
{
    /* Alerts the user */
}
else
{
    /* It's safe to use foo() */
} 
```

进一步阅读：[框架编程指南](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Concepts/WeakLinking.html#//apple_ref/doc/uid/20002378-BBCJICEC)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:56:37.590

我个人认为你的方法是错误的。在安装越狱应用程序时，大多数最终用户将通过 Cydia/Installer/Icy 安装它，它是 APT 的包装器。

当你最终将你的包推送到这些商店时，你可以指定包“依赖项”，这将使你的应用程序在没有安装这些包的情况下根本无法安装，更不用说运行了。

但是，由您决定包含您想要的 dylib 的包。

从 APT 安装后，只有少数极端情况可能导致缺少 dylib，即删除库、弄乱 MobileSubstrate 设置以及有人在 APT 之外下载您的应用程序。

但是，在这种情况下，用户不应该期望您的应用程序能够完美运行，因为他们一直在搞乱他们可能不应该做的开发人员类型的事情。

# python - 使用 Python“请求”库，如何判断 ConnectionError 是客户端还是服务器端？

> ID：14236426
> 
> 赞同：3
> 
> 时间：2013-01-09T13:34:29.590
> 
> 标签：python, python-requests

这是我现在丑陋的小代码片段：

```
for i in range(5):
        try:
            self.startTime=time.time()
            self.rawfeed=requests.get(self.feedurl)
            continue
        except ConnectionError:
            print "Got a connection error.  Retrying", i
            time.sleep(i*i) # giving a bit longer wait each time
            pass
if i == 5: raise
self.ResponseTime=time.time()-self.startTime 
```

这里有两个问题。首先，我的 except 语句似乎没有将“ConnectionError”识别为异常（已解决，谢谢，stackers），而是抱怨它不是全局变量。其次，更重要的是，我真的很想知道错误是我方还是服务器方。

通常我想重试我的错误，但放弃并报告服务器错误。（“我的”错误是指服务器错误以外的任何内容。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:48:48.797

查看`requests`源代码，`ConnectionError`仅在重试最大次数（`MaxRetryError`）时才会引发。

```
except MaxRetryError, e:
    if not self.config.get('safe_mode', False):
        raise ConnectionError(e) 
```

很难说这是由您自己还是服务器引起的，因为双方的很多问题都可能导致这个完全相同的错误。例如，如果服务器的 HTTP 守护程序未运行，您的连接尝试将超时。如果您在路由器中阻止它们或您的路由器由于其他原因断开连接，则会发生完全相同的事情。

但是，您没有发现的Exception`HTTPError`更有可能是您可能会死的服务器错误。`ConnectionError`有点可能，但完全不能保证，成为你自己。

您的第二个问题是您没有正确导入这些类。要么改变你的 except `except requests.ConnectionError`，要么做`from requests import ConnectionError, HTTPError`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:46:19.170

像 Python 中的任何名称一样，您需要先导入`ConnectionError`才能使用它。在这种情况下，它可以通过已经导入的`requests`命名空间使用，因此您可以执行`except requests.ConnectionError:`.

至于您的主要查询，不幸的是，这并没有什么意义。你和服务器之间有整个互联网：在什么时候你会把某事定义为“你的”错误？你的wifi接入点？你的路由器？你的调制解调器？你的网络服务供应商？您和目的地之间的某个上游代理？当然，如果不使用类似`traceroute`.

# c# - 如何在dll中包含源代码？

> ID：14236430
> 
> 赞同：4
> 
> 时间：2013-01-09T13:34:38.823
> 
> 标签：c#, msbuild, visual-studio-2012

**简短版本：** 我希望我的程序能够在运行时（只读）访问它自己的源代码。有没有办法在编译时自动将源代码打包到dll中？

**长版：**

背景是当发生异常时，我想自动创建一个文件，其中包含发生的一些细节。该文件应包括导致问题的函数的源代码。我想通过电子邮件将此文件发送给其他人，而接收者很可能没有（或不想安装）Visual Studio，所以任何使用符号服务器等的东西都是不可能的。它必须是纯文本文件。

理想情况下，我会在某处找到相关的源代码文件，然后复制相关行。您可以放心地假设，只要我有一个包含整个源代码的文件夹，我就能找到我想要的文件和行。

到目前为止我能想到的最好的想法——我没有详细研究它，因为它看起来很混乱——是修改 MSBuild 文件以在编译期间创建源的 .zip，并要求.dll 和 .zip 驻留在同一文件夹中。

我发现的关于 stackoverflow 的大多数听起来相似的问题似乎都涉及*反编译*.dll 文件，这*不是*我想要做的。我*有源*代码，我想以方便的方式将它与 .dll 一起提供。

**更新：真正的长版本**

似乎有些人在认真质疑我*为什么*要这样做，所以这是答案：我的软件的主要目的是测试*其他*一些软件。其他软件有一个 GUI。举个简单的例子，假设其他软件是标准的 Windows 计算器，那么我的测试用例可能看起来像这样：

```
calculator.Open();
calculator.EnterValue(13);
calculator.PressButtonPlus();
calculator.EnterValue(38);
calculator.PressButtonEnter();
int value = calculator.GetDisplayedValue();
Assert.That(value == 51);
calculator.Close(); 
```

这些测试是有意以人类可读的方式编写的。

当出现问题时，我想做的是给计算器的开发人员详细描述如何重现问题，**以一种他可以在没有我的软件的情况下手动重现的方式**。（在这个例子中，他会打开计算器，输入 13，按加号，等等。）

也许另一种选择是让每个函数`calculator.Something()`在日志中写出一条信息行，但这会 a) 做更多的工作，b) 只包括测试运行到它中止的点，c) 承担一些风险在一个函数中忘记了编写该行，从而对所做的事情给出了错误的表示。但我对复制源代码以外的其他解决方案持开放态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:01:30.967

看看这个问题：[C# 中是否存在 __LINE__ __FILE__ 等价物？](https://stackoverflow.com/questions/696218/do-line-file-equivalents-exist-in-c)

C++ 提供了宏（`__LINE__`、`__FILE__`等），它们在编译时替换为表示信息。这意味着如果你写这样的东西：

```
throw new CException(__FILE__); 
```

它会编译成这样的：

```
throw new CException("test.cpp"); 
```

产生一个硬编码的值。C# 编译器不提供这些宏，因此您必须使用反射来获取有关引发异常的位置的信息。上面链接的问题中描述了您可以做到的方式。

如果您无法提供**.pdb**`Exception.ToString()`符号，则(or )的默认行为`StackTrace.ToString()`不会返回行号，而是返回失败操作的 MSIL 偏移量。据我所知，您可以使用 ReSharper 的[Stack Trace Explorer](http://www.jetbrains.com/resharper/webhelp/Reference__Windows__Stack_Trace_Explorer.html)导航到表示代码（不是 100% 确定这一点，但在 stackoverflow 上也有一个问题提到了这个事实）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:49:12.327

您可以包含源文件的副本作为资源。

*   在项目文件夹中，创建一个名为`Resources`. 在那里复制源文件。
*   在项目中创建一个资源文件，然后将您制作的源副本包含在其中。
*   设置预构建事件以将实际源文件复制到`Resources`文件夹，因此您始终拥有更新的副本。在我创建的示例中，效果很好：

    ```
    copy $(ProjectDir)*.cs $(ProjectDir)Resources 
    ```

*   在您的代码中，现在您可以像这样获取文件的内容（我想资源文件的名称是`Resource1.resx`：

    ```
    // Get the source of the Program.cs file.
    string contents = Resource1.Program; 
    ```

该项目最终是这样的：

![项目树](../Images/71fa49042654aae4ca7c8b5b06089ef9.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T14:45:33.503

是的，我还建议在 MSBuild 期间将源文件打包成 .zip 或其他任何文件，并将该 .zip 文件与您的应用程序/dll 一起打包。在运行时，当发生异常时，您会获得 Aschratt 描述的文件和方法名称，从 .zip 中提取文件并在其中找到方法。

# c# - WPF 在选定的 ListItem 内显示按钮

> ID：14236432
> 
> 赞同：1
> 
> 时间：2013-01-09T13:34:45.567
> 
> 标签：c#, wpf, visual-studio-2010, listbox, wpf-controls

我正在使用 WPF 应用程序来管理我们主要软件的版本。这个应用程序有一个`ListBox`，我将 设置`ListBox.DataTemplate`为每个里面`ListBoxItem`都有一个`Label`和 2 。`Buttons`

以下代码显示了我的`ListBox`代码：

```
<ListBox Grid.Row="0" SelectedItem="{Binding Path=SelectedVersion}" ItemsSource="{Binding Path=PatchList, Mode=TwoWay}" d:DataContext="{d:DesignInstance {x:Type ViewModels:MainWindowViewModel}}"
                 SelectionMode="Single" IsSynchronizedWithCurrentItem="True" Margin="1" ScrollViewer.HorizontalScrollBarVisibility="Disabled" SelectedIndex="0">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid HorizontalAlignment="Stretch">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <Label Grid.Column="0" Content="{Binding Path=VersionNumber}" HorizontalAlignment="Left" Foreground="#FFFFFF" FontSize="19" />

                        <Button Grid.Column="1" Width="25" Height="25" Template="{StaticResource OnMouseOverListBoxitem}" ToolTip="Release" Command="{Binding Path=DataContext.ReleaseVersionCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListBox}}}" HorizontalAlignment="Right" d:DataContext="{d:DesignInstance {x:Type ViewModels:MainWindowViewModel}}" CommandParameter="{Binding}">
                            <ContentControl Template="{StaticResource Release}" />
                        </Button>

                        <Button Grid.Column="2" Width="25" Height="25" Template="{StaticResource OnMouseOverListBoxitem}" ToolTip="Trash" Command="{Binding Path=DataContext.DeleteVersionCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListBox}}}" HorizontalAlignment="Right" d:DataContext="{d:DesignInstance {x:Type ViewModels:MainWindowViewModel}}" CommandParameter="{Binding}">
                            <ContentControl Template="{StaticResource Trash}" />
                        </Button>
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

问题是我只想显示标签和**按钮**。`Selected ListBoxItem`

顺便说一句，我正在使用`bindings`，如果您看到一些不同的代码，那是因为我也在使用`MahApp.Metro`Windows8 样式。

有什么建议么？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T13:53:11.860

试试这个。

```
 <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter1" />
    </Window.Resources>
    <Grid>
        <ListBox ItemsSource="{Binding Fnts}" Grid.Row="0" SelectedItem="{Binding Path=SelectedVersion}" 
                 SelectionMode="Single" IsSynchronizedWithCurrentItem="True" Margin="1" ScrollViewer.HorizontalScrollBarVisibility="Disabled" SelectedIndex="0">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <Label Content="{Binding}" />
                        <Button Content=" X " Visibility="{Binding RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}}, Path=IsSelected, Converter={StaticResource BooleanToVisibilityConverter1}}" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid> 
```

# sql-server-2008 - 如何处理 sql server 2008 查询中的动态输入值

> ID：14236433
> 
> 赞同：0
> 
> 时间：2013-01-09T13:34:45.130
> 
> 标签：sql-server-2008

如何处理 sql server 2008 查询中的动态输入值。

我的情况是在下面的查询中，我有两个输入参数从 java 通过 i-batis 传递

```
 1) if i enter stlmtTransId field alone query should execute (paymentTransId  is empty now).
 2) if i enter paymentTransId field alone query should execute(stlmtTransId  is empty now).
 3) if i enter both input values query should execute for matching the two inputs. 
```

在任何上述情况下，我都需要输出。如何处理它。

```
 SELECT
    STLMT_TRANS.SETTLEMENT_TRANSACTION_ID
    ,STLMT_TRANS.PC_TRANSACTION_ID
    ,STLMT_TRANS.TRANSACTION_AMOUNT
    ,STLMT_TRANS.PAYMENT_AGENT_ID
    ,STLMT_TRANS.PAYMENT_AGENCY_ID
    ,STLMT_TRANS.PAYMENT_TRANS_DATE
    FROM
    T_SETTLEMENT_TRANSACTION STLMT_TRANS WITH (NOLOCK)
    WHERE
    STLMT_TRANS.SETTLEMENT_TRANSACTION_ID=#stlmtTransId#
    AND
    STLMT_TRANS.PC_TRANSACTION_ID=#paymentTransId# 
```

注意：我使用 java + I-Batis

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:48:16.473

```
WHERE
(
 (STLMT_TRANS.SETTLEMENT_TRANSACTION_ID=#stlmtTransId#) or (#stlmtTransId# is NULL)
)
AND
(
  (STLMT_TRANS.PC_TRANSACTION_ID=#paymentTransId#) or (#paymentTransId# is NULL)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:02:41.413

```
SELECT
STLMT_TRANS.SETTLEMENT_TRANSACTION_ID
,STLMT_TRANS.PC_TRANSACTION_ID
,STLMT_TRANS.TRANSACTION_AMOUNT
,STLMT_TRANS.PAYMENT_AGENT_ID
,STLMT_TRANS.PAYMENT_AGENCY_ID
,STLMT_TRANS.PAYMENT_TRANS_DATE
FROM
T_SETTLEMENT_TRANSACTION STLMT_TRANS WITH (NOLOCK)
WHERE STLMT_TRANS.SETTLEMENT_TRANSACTION_ID = ISNULL(@stlmtTransId, STLMT_TRANS.SETTLEMENT_TRANSACTION_ID)
AND STLMT_TRANS.PC_TRANSACTION_ID = ISNULL(@paymentTransId, STLMT_TRANS.PC_TRANSACTION_ID) 
```

# .net - 在 WIX 引导程序中嵌入 .Net Framework 安装程序可执行文件

> ID：14236436
> 
> 赞同：2
> 
> 时间：2013-01-09T13:34:50.727
> 
> 标签：.net, frameworks, wix, bootstrapper

有没有办法在我的wix引导程序“Sedtup.exe”中嵌入.Net framework redist exe（dotNetFx40_Full_x86_x64.exe）？

我的功能 MSI 已经嵌入到 Setup.exe 中。如果可能的话，我想部署一个嵌入 .Net 框架的单个安装程序 exe，以便在引导程序旁边提供 .Net 安装程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:19:21.327

在您的引导程序中，使用`Compressed="yes"`如下`ExePackage`：

```
<ExePackage Id="Netfx4Full" Cache="no" Compressed="yes" PerMachine="yes" Permanent="yes" Vital="yes" InstallCommand="/q"
              SourceFile="C:\Program Files\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages\DotNetFX40\dotNetFx40_Full_x86_x64.exe"
              DetectCondition="Netfx4FullVersion AND (NOT VersionNT64 OR Netfx4x64FullVersion)"
              /> 
```

如果你是从网络下载包的引导程序，你需要指定`DownloadUrl`属性（注意包在编译时仍然必须在你的本地机器上）：

```
DownloadUrl="http://go.microsoft.com/fwlink/?LinkId=164193" 
```

# javascript - Scriptmanager 不适用于部分回发 仅在 Firefox 上

> ID：14236437
> 
> 赞同：3
> 
> 时间：2013-01-09T13:34:53.190
> 
> 标签：javascript, asp.net, ajax, updatepanel, scriptmanager

我面临着非常奇怪的问题。我尝试了很多事情，但无法解决。这是场景。

我有`GridView`40 条记录。我在`OnRowDataBound`Event of中注册一个脚本`GridView`。我注册使用`ScriptManager.RegisterStartupScript`. `GridView`在 an 内`UpdatePanel`，`UpdatePanel`一分钟后刷新。

首次加载 Page 时，我的脚本工作正常。但是在 Partial PostBack 之后它停止在 Firefox 上工作。它适用于 Chrome、IE、Safari 和 Opera。只有 Firefox 会产生问题。

我尝试了许多 Internet 上可用的解决方案，但对我没有任何帮助。此外，当页面部分加载时，我不会再次注册脚本，因为它已经注册了。对于 Firefox，我也尝试在部分回发上注册脚本，但没有运气。这就是我注册的方式：

```
ScriptManager scriptManager = ScriptManager.GetCurrent(this);
if (scriptManager != null && !scriptManager.IsInAsyncPostBack)
 {
                    ScriptManager.RegisterStartupScript(this.UpdatePanel5, this.UpdatePanel5.GetType(), e.Row.RowIndex.ToString(), "<script language='javascript' type='text/javascript'>alert('Error Message');</script>", false);
                //
} 
```

我尝试将 RegisterStartupScript 的最后一个参数更改为 True 并删除脚本标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:47:12.337

去掉`IsInAsyncPostBack`勾选，也让你的脚本名更独特。我也倾向于使用`RegisterScriptBlock`，这是一种偏好：

```
ScriptManager scriptManager = ScriptManager.GetCurrent(this);
if (scriptManager != null)
{
      ScriptManager.RegisterScriptBlock(this.UpdatePanel5 + DateTime.Now.Ticks.ToString(), this.UpdatePanel5.GetType(), e.Row.RowIndex.ToString(), "<script language='javascript' type='text/javascript'>alert('Error Message');</script>", false);

} 
```

# ruby-on-rails-3.2 - Rails rspec factorygirl复数测试

> ID：14236438
> 
> 赞同：0
> 
> 时间：2013-01-09T13:34:54.470
> 
> 标签：ruby-on-rails-3.2, rspec2, factory-bot

是否可以在 rspec 中测试复数功能？

```
let(:schedule) { FactoryGirl.create(:schedule) }

Failure/Error: it { should have_selector('h1', text: pluralize(Schedule.count.to_s, "schedule")) }
 NoMethodError:
   undefined method `pluralize' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_1:0xb607068c> 
```

答案：（正如下面 Eric C 所指出的）

```
describe SchedulesHelper do
  describe "pluralize schedule" do
    if(Schedule.count > 0)
        it { pluralize(1, "schedule").should == "1 schedule" }
    else
        it { pluralize(0, "schedule").should == "0 schedules" }
    end    
  end 
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-19T14:16:50.373

我是 RoR 和 RSpec 的新手，我遇到了与启动此线程的伙伴类似的错误：

> 失败：
> 
> ```
>  1) Static Pages Home Page for signed-in users should show the total feeds
>  Failure/Error: expect(page).to have_content(pluralize(user.feed.count, 'micropost'))
>  NoMethodError:
>      undefined method `pluralize' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_1::Nested_2:0x007fade8f35938>
>      # ./spec/requests/static_pages_spec.rb:39:in `block (4 levels) in <top (required)>' 
> ```

我尝试了`view.pluralize`没有运气......我终于在我的集成测试中使用了它：

```
it "should show the total feeds" do
    expect(page).to have_content("micropost".pluralize(user.feed.count))                  
end 
```

我的测试运行良好。

希望这可以帮助别人。

iVieL.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:56:41.813

你的问题的答案是......有点。Rails 提供了使用复数和使用 rspec-rails 的功能，假设这是您正在使用的，让您能够根据需要调用 rails 方法。如果这是一个视图测试，就像它的样子，你可以输入如下内容：

```
it { should have_selector('h1', text: view.pluralize(Schedule.count.to_s, "schedule")) } 
```

这里的关键是您正在添加**视图。**在复数之前。

我想强调的是，在测试时，在看似视图测试的内部测试辅助方法并不是一个好主意。如果你真的想测试复数本身，最好在辅助规范中测试它。做类似的事情：

```
it { pluralize(1, "schedule").should == "1 schedule" }
it { pluralize(0, "schedule").should == "0 schedules" } 
```

这样您就可以确定结果并在其他测试中做出假设，然后测试正确的结果。它实际上将不可避免地使测试变得更好，因为如果像复数这样的助手发生变化，那么你有两个测试会警告这种变化。然后，您可以进行相应的调整。只是一个想法。

# jquery - jQuery ajax 调用未作为 json 调用触发

> ID：14236439
> 
> 赞同：0
> 
> 时间：2013-01-09T13:34:59.793
> 
> 标签：jquery, asp.net-mvc, json

我有一个这样的 jQuery 调用，这给了我很多问题：

```
 $('#submit').click(function () {
        var url = "/home/start";
        var notifyEmail = $("#notify_email").val();
        var receiverPhone = $("#receiver_phone").val();
        var sliderValue = $("#slider").slider("value");

        var dataToSend = '{phoneReceiver:' + receiverPhone + ', emailNotify:' + notifyEmail + ', value:' + sliderValue + '}';
        //var dataToSend = '{"phoneReceiver":"' + receiverPhone + '", "emailNotify":"' + notifyEmail + '", "value:"' + sliderValue + '"}';

        $.ajax({
            type: "POST",
            url: url,
            data: dataToSend,
            dataType: 'json',
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                alert('Awesome destination: ' + data.DestinationAddress);

            },
            error: function (date) {
                alert('An occurred while purchasing. Please try again later');
            }
        });
    }); 
```

我试过摆弄数据格式（你可以看到有两个版本）和有/没有 dataType 和 contentType。还没有运气。

我有以下问题：

*   我收到 500 内部服务器错误，看起来像格式错误
*   在 FireBug 中调用不是作为 json 进行的。选择 json 选项卡时什么都没有，但帖子有

因此，我在 web 服务中的断点永远不会被命中。

数据中的所有参数都很好。

在 FireBug 中，我可以看到我的帖子是：

```
{phoneReceiver:fgsdfg, emailNotify:dgsg, value:19} 
```

或者：

```
{"phoneReceiver":"gfjhfghj", "emailNotify":"fjhfgjhgj", "value:"16"} 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:13:39.480

试试这个...

```
$.ajax({
        type: "POST",
        url: url,
        data: { phoneReceiver: receiverPhone, emailNotify: notifyEmail,  value: sliderValue},
        dataType: 'json',
        contentType: "application/json; charset=utf-8",
        success: function (data) {
            alert('Awesome destination: ' + data.DestinationAddress);

        },
        error: function (date) {
            alert('An occurred while purchasing. Please try again later');
        }
    }); 
```

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:15:47.333

如果您要发回 JSON，请尝试将 dataToSend 对象创建为

```
 var dataToSend = {
           phoneReceiver: $("#receiver_phone").val(),
           emailNotify :$("#notify_email").val()
           value: $("#slider").slider("value")
    }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T14:16:10.913

我能够让您的代码按如下方式工作：

```
 //action
    [HttpPost]
    public void TestAction(string phoneReceiver, string emailNotify, int value)
    {
        //all variables set here
    }

    //in view i have a button id = submit
    $('#submit').click(function () {
            var dataToSend = '{phoneReceiver: "blah", emailNotify:"blah@blah.com", value: 1}';

            $.ajax({
                type: "POST",
                url: '/TestController/TestAction',
                data: dataToSend,
                dataType: 'json',
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    alert('Awesome destination: ' + data.DestinationAddress);

                },
                error: function (date) {
                    alert('An occurred while purchasing. Please try again later');
                }
            });
    }); 
```

# javascript - jQuery mobile .changePage 无法正常工作

> ID：14236448
> 
> 赞同：1
> 
> 时间：2013-01-09T13:35:25.767
> 
> 标签：javascript, jquery, html, jquery-mobile

这是一个用户登录屏幕，当登录成功时我想显示另一个页面，这个“有点”工作但成功登录后我得到了两个页面的混合！这一切都被覆盖了。所以只有当我刷新页面时，我才能正确看到它。我也尝试使用 jQuery 版本 1.6.4 但没有帮助。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="js/custom.js"></script>
<script src="//code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>

<script>
   $.ajax({
   ...
   success: function (data){ 

      $.mobile.changePage('account.html'); 
 },
    });
</script> 
```

**此外**，除了下一页上的覆盖问题外，还有一个 JavaScript 代码在我刷新页面之前不起作用。

```
 $(document).ready(function() {

    $(".infoBasic").click(function() {
     $(this).next('.infoDetails').slideToggle("50");
 });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:02:05.200

这里有几个问题：

jQuery Mobile 1.1 仅适用于核心 jQuery verysions 1.6.4 和 1.7.1，而 Mobile 1.2 适用于核心 1.7.0 和 1.8.2

`$(document).ready()`不支持。改为使用`$(document).bind('pageinit')`。[http://jquerymobile.com/demos/1.2.0/docs/api/events.html](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)

您的脚本引用不应以`//`但开头`http://`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:40:47.503

我认为你可以这样做：

```
$.ajax({
    ...
    success : function(data) {
        $('body').empty();
        $.mobile.changePage('account.html');
    },
}); 
```

对于您的第二个问题，您应该将委托与 .on() 一起使用：

```
$(document).ready(function() {

    $(this).on('click',".infoBasic",function() {
        $(this).next('.infoDetails').slideToggle("50");
    });

}); 
```

# java - 如何使用 Box API 获取上传到 Box 中的文档的作者姓名？

> ID：14236450
> 
> 赞同：0
> 
> 时间：2013-01-09T13:35:34.813
> 
> 标签：java, box-api

我的任务是获取使用 Java 为特定用户上传到**Box中的****文档信息。**我正在使用**Box API for java**来完成这项任务。我可以连接用户的 Box 配置文件并获取文件。但我无法获得文档的作者姓名。这是上传文件的用户的名称。

 ****有人知道如何获取这些信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:54:22.553

我不是 100% 确定您使用的是什么 SDK，但文档的“作者”列在 ` [files 对象](http://developers.box.com/docs/#files-file-object-2)的 created_by 属性中，例如

```
{
    "type": "file",
    "id": "5000948880",
    "sequence_id": "3",
    "etag": "3",
    "sha1": "134b65991ed521fcfe4724b7d814ab8ded5185dc",
    "name": "tigers.jpeg",
    "description": "a picture of tigers",
    "size": 629644,
    "path_collection": {
        "total_count": 2,
        "entries": [
            {
                "type": "folder",
                "id": "0",
                "sequence_id": null,
                "etag": null,
                "name": "All Files"
            },
            {
                "type": "folder",
                "id": "11446498",
                "sequence_id": "1",
                "etag": "1",
                "name": "Pictures"
            }
        ]
    },
    "created_at": "2012-12-12T10:55:30-08:00",
    "modified_at": "2012-12-12T11:04:26-08:00",
    "created_by": {
        "type": "user",
        "id": "17738362",
        "name": "sean rose",
        "login": "sean@box.com"
    },
    "modified_by": {
        "type": "user",
        "id": "17738362",
        "name": "sean rose",
        "login": "sean@box.com"
    },
    "owned_by": {
        "type": "user",
        "id": "17738362",
        "name": "sean rose",
        "login": "sean@box.com"
    },
    "shared_link": {
        "url": "https://www.box.com/s/rh935iit6ewrmw0unyul",
        "download_url": "https://www.box.com/shared/static/rh935iit6ewrmw0unyul.jpeg",
        "vanity_url": null,
        "is_password_enabled": false,
        "unshared_at": null,
        "download_count": 0,
        "preview_count": 0,
        "access": "open",
        "permissions": {
            "can_download": true,
            "can_preview": true
        }
    },
    "parent": {
        "type": "folder",
        "id": "11446498",
        "sequence_id": "1",
        "etag": "1",
        "name": "Pictures"
    },
    "item_status": "active"
} 
```****

# vb6 - 用 VB6 开发无注册 COM 应用程序

> ID：14236452
> 
> 赞同：3
> 
> 时间：2013-01-09T13:35:41.380
> 
> 标签：vb6, regfreecom, winsxs, sxs

我正在维护一个带有许多 COM 组件（DLL 和 OCX）的 VB6 应用程序。为了简化开发和部署，我想使用 reg-free com。开发的问题是应用程序在 VB6.EXE 实例中运行。如何欺骗 VB6 使用我的（未注册的）组件？在分支之间切换时不必通过注册/注销组件对我来说非常重要。为 VB6 生成 .manifest 文件并非不可能，但是否有其他更优化的方法可以在启动 VB6.EXE 时指定 .manifest 文件？

注意：Activation Context API 似乎没有帮助，即使在开发环境中使用也是如此。

我想到的解决方案：

*   从清单激活上下文并将 VB6 作为子进程启动的实用程序应用程序（不起作用；进程不继承激活上下文）
*   在启动时将上下文激活注入 VB6 进程（太复杂；必须破解可执行文件才能执行此操作）
*   在激活正确的上下文后在我自己的进程中托管 VB6（甚至无法确定这是否可能）
*   使用 VB6 加载项或在 VB6 中运行的其他实用程序来激活上下文（尝试过，但似乎不起作用）

**1月16日更新**

正如[wqw](https://stackoverflow.com/users/40691/wqw)所建议的，我使用 VB.exe.manifest 进行了一些测试。VB6.exe.manifest 有效，但有一些注意事项：

*   清单中指定的 SxS dll 不会出现在未实际引用该组件的项目的引用窗口中
*   在确实引用该组件的项目上，它将按照以下顺序显示在目录中：

    1.  项目文件中记录的路径名（如果文件仍然存在）
    2.  路径名，就好像它与项目位于同一文件夹中一样 (vbp)

    如果文件不在这些文件夹中，则项目将无法编译（仅运行代码会导致 VB6 中的内部编译）并显示消息“找不到项目或库”。

显然，VB6 实际上会扫描注册表以查找 COM 组件，并在编译期间验证它们是否存在于它们所说的位置。如果我真的想使用 VB6.exe.manifest 来重定向 COM 组件实例化，我不确定这可能意味着什么。也许在某个预定义的位置拥有虚拟组件文件可能会诱使 VB6 相信一切都是应有的，尽管加载了一组完全不同的组件以供使用。

**进一步更新：**

我对最后一个假设进行了测试，结果证明它是错误的。该组件必须实际存在才能编译项目。它甚至必须正确加载（不接受虚拟的零长度文件！）。现在我什至不确定清单是否有效。这是一个更耗时的测试（需要一个具有两个版本的组件，产生不同的结果，一个用于项目，一个用于清单）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-27T22:12:15.680

我们解决这个问题的方法是编写一个构建辅助程序来注册和取消注册组件，运行 VB6 编译器，甚至在接口更改时使用更新的 GUID 重写项目文件。您将交给它一个 VBG 项目组，然后它会完成剩下的工作。

我想我们也可以添加一个模式，当你切换分支时取消注册组件。

您是否遵循使用“兼容性”二进制文件的做法？您不应该在构建位置使用二进制文件作为兼容性参考 - 您应该将单独的副本提交给版本控制并配置您的项目以考虑“兼容”版本 - 仅在中断接口时更改此文件。

# node.js - 如何访问关于 node.js 护照身份验证的 POST 数据？

> ID：14236455
> 
> 赞同：3
> 
> 时间：2013-01-09T13:35:43.710
> 
> 标签：node.js, express, passport.js

在提交带有护照的登录表单后，我正在尝试访问 POST 参数。我的表格如下：

```
<form method="post">
    <input name="username">
    <input name="password">
    <input type="checkbox" name="remember" value="1">
    <input type="submit">
</form> 
```

（工作）快递路线/回调：

```
app.post(
    '/login', 
    passport.authenticate('local', {
        failureRedirect: '/login', 
        failureFlash: true, 
        badRequestMessage: 'Please enter your account credentials to login.'
    }), 
    function(req, res) {
        console.log(req.param('remember'));
        if(req.isAuthenticated(req, res)) {
            res.redirect('/dashboard');
        } else {
            var errors = req.flash('error');
            if(errors) {
                assign['errors'] = errors;
            }
            res.render('login.html', {errors: errors});
        }
    }
); 
```

登录工作正常，一切都很酷。但是：`req.param('remember')`总是`undefined`。当我删除 passport.authenticate() 部分时，选中我表单中的复选框并正确提交表单控制台 logs `1`。

那么，当我还使用 passport.authenticate() 时，如何访问 POST 参数呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:59:29.613

Haven't used passport so far but here are two things that might cause your problem

**1\. Your form doesn't have an `action` attribute**

Therefore the form doesn't know where to send the data. Try the following

```
<form method="post" action="/login">
  <input name="username">
  <input name="password">
  <input type="checkbox" name="remember" value="1">
  <input type="submit">
</form> 
```

**2\. POST variables in express are attached to the `req.body` object**

So instead of

```
console.log(req.param('remember')); 
```

use

```
console.log(req.body.username); 
```

Make sure you have the [bodyParser](http://www.senchalabs.org/connect/bodyParser.html) in your express config.

`req.param` is used when you want to access dynamic routes

```
app.get('/login/:user', function(req, res) {
  console.log(req.params.user)
})

// GET /login/john => 'john' 
```

# java - java最好的数据库服务器？

> ID：14236456
> 
> 赞同：-2
> 
> 时间：2013-01-09T13:35:58.433
> 
> 标签：java

对于 C#、VB.NET、C++ 等语言，我们拥有最好的数据库服务器作为 SQL Server，我知道我们可以使用 SQL Server 或 Java 中任何其他支持 ODBC 的数据库服务器进行编程，但我不确定什么最适合 java？你能给我一些名字吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-09T13:38:41.043

如果你买得起，那就是甲骨文。如果不使用 MySQL，最流行的 Db。它们都是 Oracle 产品，就像 Java 一样。

# java - (Android) 通过蓝牙向 µController 发送字节

> ID：14236458
> 
> 赞同：0
> 
> 时间：2013-01-09T13:36:04.103
> 
> 标签：java, android, bluetooth

所以，我希望我的 Android 手机 (4.2) 通过蓝牙向我的 µController 发送一个字节数组。为此，我在 SDK 中使用了 Google 提供的蓝牙聊天示例并对其进行了一些修改。我有两段代码。一个在工作，一个不在。为什么代码 1 有效，而代码 2 无效？（澄清一下：使用代码 1，我可以将 byte[] 发送到 µController）

在代码 2 中按下发送按钮时应用程序崩溃。

当然我可以使用代码 1，但我想知道为什么代码 2 不能避免在未来的项目中出现这个错误。

代码的区别如下：

*   当 toggleButton 改变其状态时，代码 1 发送 byte[]
*   代码 2 在按下 SendButton 时发送 byte[]

//代码1

```
private void setup() {
    Log.d(TAG, "setup()");

    final Context context = getApplicationContext();
    final ToggleButton TBut1 = (ToggleButton)findViewById(R.id.toggleButton1);
    final ToggleButton TBut2 = (ToggleButton)findViewById(R.id.toggleButton2);
    final ToggleButton TBut3 = (ToggleButton)findViewById(R.id.toggleButton3);

    final TextView txt1 = (TextView)findViewById(R.id.textView2);

    final byte[] daten = new byte[1];        

    TBut1.setChecked(false);
    TBut2.setChecked(false);
    TBut3.setChecked(false);
    daten[0]=0;
    TBut1.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
            if ((TBut1.isChecked() == true)){                    
                daten[0]= (byte) (daten[0] | 4);
                mService.write(daten);                    
                }else{
                    daten[0]= (byte) (daten[0] & ~4);
                    mService.write(daten);
                }   
        }   
    });

    TBut2.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if ((TBut2.isChecked() == true)){                    
                daten[0]= (byte) (daten[0] | 2);
                mService.write(daten);                    
                }else{
                    daten[0]= (byte) (daten[0] & ~2);
                    mService.write(daten);
                }                   
        }   
    });

    TBut3.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if ((TBut3.isChecked() == true)){                  
                daten[0]= (byte) (daten[0] | 1);
                mService.write(daten);                  
                }else{                  
                    daten[0]= (byte) (daten[0] & ~1);
                    mService.write(daten);
                }                   
        }   
    });

    // Initialize the BluetoothChatService to perform bluetooth connections
    mService = new BTService(this, mHandler);

    // Initialize the buffer for outgoing messages
    mOutStringBuffer = new StringBuffer("");

} 
```

//代码2

```
 private void setup() {
    Log.d(TAG, "setup()"); 

    final ToggleButton TBut1 = (ToggleButton) findViewById(R.id.toggleButton1);
    final ToggleButton TBut2 = (ToggleButton) findViewById(R.id.toggleButton2);
    final ToggleButton TBut3 = (ToggleButton) findViewById(R.id.toggleButton3);

    final Button sendButton = (Button) findViewById(R.id.button1);

    sendButton.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
            daten[0] = 0;
            if(TBut1.isChecked()) {
                daten[0] = (byte) (daten[0] | 1);
            } else {
                daten[0]= (byte) (daten[0] & ~1);
            }
            if(TBut2.isChecked()) {
                daten[0] = (byte) (daten[0] | 2);
            } else {
                daten[0]= (byte) (daten[0] & ~2);
            }
            if(TBut3.isChecked()) {
                daten[0] = (byte) (daten[0] | 4);
            } else {
                daten[0]= (byte) (daten[0] & ~4);
            }

            if (mService.getState() == BTService.STATE_CONNECTED) {
                 mService.write(daten);
            }
        }   
    });

    // Initialize the BluetoothChatService to perform bluetooth connections
    mService = new BTService(this, mHandler);

    // Initialize the buffer for outgoing messages
    mOutStringBuffer = new StringBuffer("");

} 
```

# wordpress - Azure 上 Wordpress 的文件夹权限

> ID：14236459
> 
> 赞同：2
> 
> 时间：2013-01-09T13:36:11.677
> 
> 标签：wordpress, azure

我最近在 azurewebsites.net 上创建了一个新的 Wordpress 站点。初次安装后，我将 PHP 版本更新为 5.4，然后重新启动了站点。

我在创建新文件夹时遇到了麻烦，特别是插件没有像我预期的那样工作。

该插件是 WPTouch 插件。我安装了插件，但每次我尝试将新图像上传到

```
/wp-content/uploads/wptouch/custom-icons 
```

（通过插件，这是最终目的地）我收到错误消息：

似乎出现了错误。请再次尝试上传。

在 Web Matrix 2 中，我无法创建新文件夹（我想我会自己创建文件夹，看看是否能解决问题）。

所以我的问题是 - 文件夹权限是否存在问题，如果是，我该如何解决这个问题以使 Wordpress 插件正常工作。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T17:28:23.207

我遇到过类似的问题（在 Azure 网站上升级 WP 插件），并且发现升级这些的唯一方法是重新启动服务，手动删除插件文件夹中的剩余部分，然后重新安装。

这远非理想，但我现在坚持它..

这里有一些更深入的解释：http: [//social.msdn.microsoft.com/Forums/da-DK/windowsazurewebsitespreview/thread/8c4d17e9-520c-4d89-bc7d-efe923dd1a55](http://social.msdn.microsoft.com/Forums/da-DK/windowsazurewebsitespreview/thread/8c4d17e9-520c-4d89-bc7d-efe923dd1a55)

# python - github api - 根据日期获取组织的所有 repos 的所有提交

> ID：14236461
> 
> 赞同：0
> 
> 时间：2013-01-09T13:36:12.117
> 
> 标签：python, ruby, github, github-api

Assembla 提供了一种简单的方法来获取组织的所有提交，`api.assembla.com/v1/activity.json` 它使用参数来获取和获取允许获取选定日期的提交（来自用户参与的所有空间（repos）。

Github 有没有类似的方法？

我在 Github 上找到了这些：
`/repos/:owner/:repo/commits`
接受自从和直到参数来获取选定日期的提交。但是，由于我想要来自所有 repos 的提交，我必须遍历所有这些 repos 并为每个 repo 获取提交。

`/users/:user/events`
这显示了用户的提交。循环访问组织中的所有用户没有任何问题，但我怎样才能获得特定日期？

`/orgs/:org/events`
这显示了所有 repos 的所有用户的提交，但不知道如何获取特定日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:56:22.177

使用`/users/:user/events`端点的问题是您无法获得`PushEvent`s 并且您将不得不跳过非提交事件并执行更多对 API 的调用。假设您已通过身份验证，只要您的用户没有过度活跃，您就应该是安全的。

因为`/orgs/:org/events`我认为他们不接受任何参数，但我可以咨询 API 设计人员。

万一你不熟悉，这些都是分页的结果。因此，您可以使用 Link 标头返回到开头。我的库 ( [github3.py](https://github.com/sigmavirus24/github3.py) ) 提供了迭代器来自动为您执行此操作。你也可以告诉它你想要多少事件。（与提交等相同）。但是，是的，在与 GitHub 的 API 人员交谈后，我会回来编辑。

**编辑**：[对话](https://twitter.com/sigmavirus24/status/289043207340306432)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T18:17:14.797

您可能想查看 GitHub 存档项目 - [http://www.githubarchive.org/](http://www.githubarchive.org/)，以及使用 Google 的 BigQuery 查询存档的能力。听起来这将是完成这项工作的完美工具——我很确定你可以通过一个查询得到你想要的东西。

另一种选择是调用 GitHub API - 遍历组织的所有事件并过滤掉不满足您的日期范围标准和事件类型标准（提交）的事件。但由于您无法在 API 调用中指定日期范围，您可能会进行大量调用来获取您感兴趣的事件。请注意，您不必遍历从 0 开始的每个页面以找到包含日期范围内第一个结果的页面 - 只需对页码进行（变体）二进制搜索即可找到包含提交的任何页面在日期范围内，然后在两个方向上进行迭代，直到超出日期范围。这应该会减少您进行的 API 调用次数。

# android - Android GridView 元素在行中重叠

> ID：14236462
> 
> 赞同：4
> 
> 时间：2013-01-09T13:36:14.740
> 
> 标签：android, gridview, stretching

我正在学习 GridView。正如您从下面的屏幕截图中看到的那样，我添加了 13 个不同长度字符串的按钮作为它们的文本。无论长文本按钮相互重叠，我尝试过但无法修复它。我想要的是每一行都具有相同的最高元素高度，例如，第 1 行中的所有按钮都应该具有“lorem ipsum dolor sit amet”的高度，并且所有其他行都应该具有最长的元素高度。我怎样才能做到这一点？

如果不可能，或者我可以有以下内容：所有元素都在它们的大小，但是网格实际上不是一个矩形，它可以有以下方案：（实际上没有网格，它只是附加视图列在一起，而不考虑实际网格在哪里。

```
------------------------------------------------|
|              |       2       |                |
|      1       |----------------      3         |
|              |               |----------------|
---------------|       5       |                |
|        4     |               |      6         |
|------------------------------|----------------- 
```

**我的网格视图：**

```
<GridView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gridview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:columnWidth="90dp"
    android:gravity="fill_vertical"
    android:numColumns="3"
    >
</GridView> 
```

**扩展 BaseAdapter 的适配器类的 getView 方法：**

```
 public View getView(int position, View convertView, ViewGroup arg2) {
        Button btn = null;
        if (convertView == null) {
            btn = new Button(mContext);
        } else {
            btn = (Button) convertView;
        }
        btn.setText(txts[position]);
        return btn;
    } 
```

注意：我将有我的自定义视图，我只是用简单的按钮测试它。

![](../Images/64d9b4bf450f54ad9cbc583f26429829.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-05T21:05:59.810

您要问的不是 GridView 的能力。您可能希望在自定义 Gridview 中修改 onMeasure。

另一方面，您想要实现的目标似乎可以通过使用滚动视图和线性布局来完成（因为在您的模拟中，列是对齐的）。

查看这篇文章：[Android 异构 gridview like pinterest](https://stackoverflow.com/questions/11736658/android-heterogeneous-gridview-like-pinterest)

# cuda - Tesla C2075 上的 cudaMemcpy 太慢了

> ID：14236464
> 
> 赞同：-1
> 
> 时间：2013-01-09T13:36:16.547
> 
> 标签：cuda, gpu, nvidia, tesla

我目前正在使用具有 2 个支持 cuda 的 GPU 的服务器：Quadro 400 和 Tesla C2075。我做了一个简单的向量加法测试程序。我的问题是，虽然 Tesla C2075 GPU 应该比 Quadro 400 更强大，但完成这项工作需要更多时间。我发现 cudaMemcpy 占用了大部分执行时间，并且在功能更强大的 gpu 上运行速度较慢。这是来源：

```
void get_matrix(float* arr1,float* arr2,int N1,int N2)
{
  int Nx,Ny;
  int n_blocks,n_threads;
  int dev=0; // 1
  float time;
  size_t size;
  clock_t start,end;
  cudaSetDevice(dev);
  cudaDeviceProp deviceProp;
  start = clock();
  cudaGetDeviceProperties(&deviceProp, dev);
  Nx=N1;
  Ny=N2;
  n_threads=256;
  n_blocks=(Nx*Ny+n_threads-1)/n_threads;
  size=Nx*Ny*sizeof(float);
  cudaMalloc((void**)&d_A,size);
  cudaMalloc((void**)&d_B,size);
  cudaMemcpy(d_A, arr1, size, cudaMemcpyHostToDevice);
  cudaMemcpy(d_B, arr2, size, cudaMemcpyHostToDevice);
  vector_add<<<n_blocks,n_threads>>>(d_A,d_B,size);
  cudaMemcpy(arr1, d_A, size, cudaMemcpyDeviceToHost);
  printf("Running device %s \n",deviceProp.name);
  end = clock();
  time=float(end-start)/float(CLOCKS_PER_SEC);
  printf("time = %e\n",time);
}

int main()
{
int const nx = 20000,ny = nx;
static float a[nx*ny],b[nx*ny];
for(int i=0;i<nx;i++)
  {
  for(int j=0;j<ny;j++)
  {
    a[j+ny*i]=j+10*i;
    b[j+ny*i]=-(j+10*i);
  }
}
get_matrix(a,b,nx,ny);
return 0;
} 
```

输出是：

```
Running device Quadro 400
time = 1.100000e-01

Running device Tesla C2075
time = 1.050000e+00 
```

我的问题是：

*   我应该根据要使用的 GPU 修改代码吗？
*   代码中指定的块数、每个块的线程数与 GPU 上可用的多处理器数、每个多处理器的内核数之间是否存在任何联系？

我正在运行 Linux Open Suse 11.2。源代码使用 nvcc 编译器（4.2 版）编译。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:17:08.977

尝试调用`get_matrix(a,b,nx,ny)`两次并获取第二次计时结果。第一次调用 CUDA API 将创建 cuda 上下文。往往需要很长时间。

有关如何确定块大小和网格大小的信息，请参阅CUDA C 最佳实践指南中的[此部分。](http://docs.nvidia.com/cuda/cuda-c-best-practices-guide/index.html#execution-configuration-optimizations)

# android - phonegap 未捕获的语法错误意外令牌 < (phonegap + wp json api)

> ID：14236471
> 
> 赞同：1
> 
> 时间：2013-01-09T13:36:55.063
> 
> 标签：android, json, api, cordova, jquery-mobile

我试图放置一个带有 WP 服务内容的 Android phonegap 应用程序。而 phonegap 应用程序运行 JQM 框架。我这样做了几次，效果很好。

但是，在我做的这个新应用程序中，我有这个**未捕获的语法错误意外令牌 <**

**我检索 json 的代码**

```
function loadWPCatIndex() {
    $.getJSON("http://www.skywin.my/?json=get_category_index&callback=?", function(data){
        console.log(data);
        plistmenu = $('#product_list');
        $.each(data.categories.reverse(), function(i, item) {
            categoriesID[i] = {wpcatname: item.title, wpcatid: item.id, wpcatparent: item.parent};
        });

        $.each(categoriesID, function(i, item) {
            if (item.wpcatparent == 0) {
                plistmenu.append('<option value ="'+item.wpcatname+'" data-pcatid="'+item.wpcatid+'">'+item.wpcatname+'</option>');
            }        
        });

        $.each(categoriesID, function(i, item) {
            if (item.wpcatparent != 0) {
                $('#product_list option[data-pcatid="'+item.wpcatparent+'"]').after('<option value ="'+item.wpcatname+'" data-pcatid="'+item.wpcatid+'"> - '+item.wpcatname+'</option>');
            }
        });
        plistmenu.children(':first').attr('selected','selected');
        $('#product-page-loader').hide();
        InitMenuEvent();
        $('#product-menu').fadeIn();
    });

} 
```

**浏览器中的 Json 响应**

```
?({"status":"ok","count":4,"categories":[{"id":4,"slug":"accessories","title":"Accessories","description":"","parent":0,"post_count":1},{"id":8,"slug":"handsfree-kit","title":"Handsfree Kit","description":"","parent":4,"post_count":1},{"id":5,"slug":"nokia","title":"Nokia","description":"","parent":3,"post_count":1},{"id":3,"slug":"phones","title":"Phones","description":"","parent":0,"post_count":1}]}) 
```

如果我在浏览器中将它作为 web 应用程序运行，所有这些都可以正常工作。但是当我将它编译到 android 应用程序时，我收到错误**Uncaught syntaxerror: unexpected token <**

完整的错误信息

网页控制台 | Uncaught SyntaxError: Unexpected token < at [http://mydomain.my/?json=get_category_index&callback=jQuery18207101479058610589_1357737767961&_=1357737767978:1](http://mydomain.my/?json=get_category_index&callback=jQuery18207101479058610589_1357737767961&_=1357737767978:1)

*编辑按照**Ninetwozero*的建议添加了屏幕截图链接谢谢 :) [屏幕截图](https://hosted.vinnetwork.com/unexpectedtoken.png) ![https://hosted.vinnetwork.com/unexpectedtoken.png](../Images/22e53780daed2a925c6c70aac28421e8.png)

如果有人真的可以提供帮助，将不胜感激。欣赏。

Ps 我在其他域中为其他应用程序运行类似的代码，但它可以工作。

# c++ - 性能悖论：堆栈与堆分配（C++）

> ID：14236476
> 
> 赞同：-6
> 
> 时间：2013-01-09T13:37:17.717
> 
> 标签：c++, performance, heap-memory, stack-memory

我昨天进行了一些性能测试，以了解堆栈和堆分配在实践中的差异有多大。从这样的测试中可以预期的是堆分配稍微慢一些或与堆栈分配相当。然而，我惊讶地发现相反的情况。我无法解释为什么，以及它在逻辑上是如何可能的，但堆分配总是稍微快一些（我在优化关闭的情况下进行编译）。

这是一个示例输出：

```
ticks (stack): 42698
ticks (stack): 43977
ticks (stack): 44024
ticks (stack): 44070
ticks (stack): 45038

ticks (heap): 42588
ticks (heap): 43525
ticks (heap): 43633
ticks (heap): 43681
ticks (heap): 43071 
```

这是一个很小的差异，但它非常一致，它重现了 100% 的时间，有利于堆分配。

谁能解释为什么我会得到这些奇怪的结果？

这是我运行的代码：

```
#include <vector>
#include <iostream>
#include <string>
#include <windows.h>

using namespace std;

struct JJ
{
    int c[50];
    JJ(int i) { c[5] = 3; c[29] = 4; c[30] = i; c[49] = c[5]; }
};

void fill_direct_stack()
{
    vector<JJ> vec;
    for (int i=0; i<1000; ++i)
        vec.push_back(i);
}

void fill_direct_heap()
{
    vector<JJ>* pVec = new vector<JJ>();
    for (int i=0; i<1000; ++i)
        pVec->push_back(i);
    delete pVec;
}

CRITICAL_SECTION cs_print;

void print(string msg, DWORD val)
{
    EnterCriticalSection(&cs_print);
    cout << msg << val << endl;
    LeaveCriticalSection(&cs_print);
}

DWORD __stdcall threadEntry(void*)
{
    DWORD ticks1,ticks2;

    ticks1 = GetTickCount();
    for (int i=0; i<10000; ++i)
        fill_direct_stack();
    ticks2 = GetTickCount();
    print("ticks (stack): ", ticks2 - ticks1);

    ticks1 = GetTickCount();
    for (int i=0; i<10000; ++i)
        fill_direct_heap();
    ticks2 = GetTickCount();
    print("ticks (heap): ", ticks2 - ticks1);

    return 0;
}

int main()
{
    cout<<"hi"<<endl;

    InitializeCriticalSection(&cs_print);

#define N_THREADS 5

    HANDLE thr[N_THREADS];
    for (int i=0; i<N_THREADS; ++i)
        thr[i] = CreateThread(NULL, 0, &threadEntry, NULL, 0, NULL);

    for (int i=0; i<N_THREADS; ++i)
        WaitForSingleObject(thr[i], INFINITE);

    DeleteCriticalSection(&cs_print);

    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T13:40:25.817

分配

```
vector<JJ>* pVec = new vector<JJ>(); 
```

和

```
vector<JJ> vec; 
```

与推回和内部内存管理相比，这**算不了什么**`vector`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:48:23.800

很难说是什么导致了如此人为的基准测试中如此微小的差异。但我的猜测是这是一个对齐问题。如果你从堆中分配，你会得到一块适合存储任何类型的内存。如果您从堆栈中分配，您将获得一块仅最小对齐的内存，适合您存储的类型。

我的另一个理论是数据缓存命中率。考虑一个线程完成，然后另一个线程在同一内核上运行。使用堆栈分配，分配永远不会分配到同一块内存，因为每个线程都有自己的堆栈。数据缓存将是冷的。使用堆分配，分配可能会获得前一个线程刚刚释放的相同块。这块内存在 CPU 数据缓存中会很热。（不过，这个理论会预测数字的相当多的变化——我认为比你看到的要多。）

但差异是如此之小，它可能是任何东西。

# c++ - Mathematica/CUDA 减少执行时间

> ID：14236478
> 
> 赞同：3
> 
> 时间：2013-01-09T13:37:27.783
> 
> 标签：c++, c, cuda, wolfram-mathematica, montecarlo

我正在为粒子传输编写一个简单的蒙特卡罗模拟。我的方法是为 CUDA 编写内核并将其作为 Mathematica 函数执行。

核心：

```
#include "curand_kernel.h"
#include "math.h"

extern "C" __global__ void monteCarlo(Real_t *transmission, mint seed, mint pathN) {
curandState rngState;

int index = threadIdx.x + blockIdx.x*blockDim.x;

curand_init(seed, index, 0, &rngState);

if (index < pathN) {
    //-------------start one packet run----------------------

    float packetWeight = 1.0;
    int m = 0;

    while(packetWeight > 0.0){

        //MONTE CARLO CODE

        // Test: still in the sample?
            if(z_coordinate > sampleThickness){
                packetWeight = 0;
                z_coordinate = sampleThickness;
                transmission[index]=1;
            }
        }
    }
    //-------------end one packet run------------------------
}
} 
```

数学代码：

```
Needs["CUDALink`"];
cudaBM = CUDAFunctionLoad[code, 
"monteCarlo", {{_Real, "Output"}, _Integer, _Integer}, 256, 
"UnmangleCode" -> False];

pathN = 100000;
result = 0;  (*count for transmitted particles*)
For[j = 0, j < 10, j++,
   buffer = CUDAMemoryAllocate["Float", 100000];
   cudaBM[buffer, 1490, pathN];
   resultOneRun = Total[CUDAMemoryGet[buffer]];
   result = result + resultOneRun;
]; 
```

到目前为止，一切似乎都可以正常工作，但与没有 CUDA 的纯 C 代码相比，速度提升微乎其微。我有两个问题：

1.  curand_init() 函数在每个求和步骤开始时由所有线程执行 -> 我可以为所有线程调用一次此函数吗？
2.  内核返回给 Mathematica 一个非常大的实数数组（100 000）。我知道，CUDA 的瓶颈是 GPU 和 CPU 之间的通道带宽。我只需要列表中所有元素的总和，因此在 GPU 中计算列表元素的总和并只向 CPU 发送一个实数会更有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:45:04.073

1）如果您需要为所有线程执行一次 curand_init() ，您可以在 CPU 中执行此操作并将其作为参数传递给 CUDA 吗？

2) 求和并返回您的值的“ **device** float sumTotal”函数怎么样？您是否将尽可能多的*传输数据复制到共享内存缓冲区中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:44:43.920

根据 CURAND 文档，“对 curand_init() 的调用比对 curand() 或 curand_uniform() 的调用慢。对 curand_init() 的大偏移量比较小的偏移量花费更多时间。保存和恢复随机生成器状态比反复重新计算起始状态。”

[http://docs.nvidia.com/cuda/curand/index.html#topic_1_3_4](http://docs.nvidia.com/cuda/curand/index.html#topic_1_3_4)

另请查看此线程以获取更多详细信息 [CUDA 程序导致 nvidia 驱动程序崩溃](https://stackoverflow.com/questions/6182151/cuda-program-causes-nvidia-driver-to-crash)

# javascript - crypto.pbkdf2 是异步的，如何将其视为同步？

> ID：14236479
> 
> 赞同：6
> 
> 时间：2013-01-09T13:37:36.353
> 
> 标签：javascript, node.js, asynchronous, callback, pbkdf2

我在 node.js 中使用 pbkdf2 来散列密码。

我的问题是我正在响应身份验证请求，并且我正在验证传递的凭据是否正确。我假设 pbkdf2 是异步的，因为它可能需要大量时间（取决于迭代的大小）。然而，将剩余的身份验证逻辑移动到一个单独的方法中以利用回调似乎有点难看。

有没有比使用计时器或将所有连续的身份验证逻辑放入单独的函数更好的方法？我知道大多数人会说我应该使用回调，但在我的用例中这没有任何意义。在将 pbkdf2 应用于传递的密码之前，我无法继续进行身份验证。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T04:23:19.830

根据[Node.js 加密文档](http://nodejs.org/api/crypto.html#crypto_crypto_pbkdf2_password_salt_iterations_keylen_callback)，PBKDF2 函数有异步和同步版本。

> **crypto.pbkdf2（密码、盐、迭代、keylen、回调）**
> 
> 异步 PBKDF2 应用伪随机函数 HMAC-SHA1 从给定的密码、盐和迭代中导出给定长度的密钥。回调有两个参数`(err, derivedKey)`。
> 
> **crypto.pbkdf2Sync（密码，盐，迭代，keylen）**
> 
> 同步 PBKDF2 函数。返回 derivedKey 或抛出错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T13:59:16.827

对于您的问题，我可以看到两种解决方案。

第一个是使用一些库来包装异步调用。您可以尝试[node-sync](https://github.com/0ctave/node-sync)或[node-promise](https://github.com/kriszyp/node-promise)。`node-sync`更适合您想要的。

第二种解决方案是使用[bcrypt](https://github.com/ncb000gt/node.bcrypt.js/)而不是加密：

```
var bcrypt = require('bcrypt');
var salt = bcrypt.genSaltSync(10);
var hash = bcrypt.hashSync(password, salt); 
```

`bcrypt`是 node.js 中用于密码哈希的特殊库。它比内置加密模块更安全，并提供一些有用的方法，如`hashSync`和`compareSync`。

# apache - JKMount 没有选择 .htaccess

> ID：14236480
> 
> 赞同：0
> 
> 时间：2013-01-09T13:37:39.237
> 
> 标签：apache, .htaccess, tomcat

我正在尝试使用 mod_jk 将对我的 webapp 的任何请求传递给 tomcat 容器，在请求 .jsp 和静态文件时一切看起来都很好，但我正在使用 .htaccess 文件来制作友好的 url，由于某种原因它不起作用使用当前配置，这是我拥有的 vhost.conf：

```
DirectoryIndex index.jsp index.htm index.html index.php

<IfModule mod_jk.c>
    JkMount / ajp13
    JkMount /* ajp13
</IfModule>

RewriteLog /etc/httpd/logs/rewrite.log
RewriteLogLevel 3

DocumentRoot /usr/share/tomcat6/psa-webapps/localkicks.com
<Directory /usr/share/tomcat6/psa-webapps/localkicks.com>
    Options Indexes FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory> 
```

有一个基本的重写规则：

```
RewriteEngine on
RewriteRule ^/?editorial_search$ news_search_result.jsp [L] 
```

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T17:29:11.093

您可以使用 JkUnMount。即使这样，您仍然可能遇到 JSESSIONID 的问题。尝试启用 cookie。

**JkUnMount** / ajp13 JkMount /* ajp13

# java - 在 Eclipse 的复制/粘贴中保留格式

> ID：14236481
> 
> 赞同：1
> 
> 时间：2013-01-09T13:37:38.533
> 
> 标签：java, eclipse

有一些生成的代码可以构建地图。放置在 map 中的值是多行字符串。
例子：

```
theMap.put("SOMEKEY", "Line 1 of string.  
               Also line 2 of string.  
               Perhaps more"); 
```

当我尝试将代码复制/粘贴到 Eclipse 时，由于地图中值的格式，出现红色错误。
我用谷歌搜索并发[现在](https://stackoverflow.com/questions/121199/surround-with-quotation-marks/121513#121513)这里 Eclipse 中有一个配置可以保留字符串文字中的格式，但在这种情况下它似乎不起作用。
还有其他配置选项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:40:29.847

如果您只需要保留空间，请使用 \n 字符，如下所示：

```
theMap.put("SOMEKEY", "Line 1 of string.\nAlso line 2 of string.\nPerhaps more"); 
```

或者，如果你想要它多行：

```
theMap.put("SOMEKEY", "Line 1 of string."
               +"\nAlso line 2 of string."
               +"\nPerhaps more"); 
```

如果您仅将字符串值粘贴到空字符串 ( `""`) 中，则需要启用以下设置：window>preferences>java>editor>typing 并检查最后一个选项（粘贴到字符串时转义文本文字）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:40:39.357

```
theMap.put("SOMEKEY", "Line 1 of string.\nAlso line 2 of string.\nPerhaps more"); 
```

拆分为多行：

```
theMap.put("SOMEKEY", "Line 1 of string.\nAlso line 2 of string.\n" +
        "Perhaps more"); 
```

如果要从文件中读取多行：

```
String s, fullString;
while ((s = bufferedReader.readLine()) != null) {
    fullString += s + "\n";
}
bufferedReader.close();
theMap.put("SOMEKEY", fullString); 
```

# linux - IntelliJ-plugin Flex UI 设计器不在 Linux 中启动

> ID：14236483
> 
> 赞同：0
> 
> 时间：2013-01-09T13:37:42.487
> 
> 标签：linux, apache-flex, user-interface, intellij-idea, designer

我正在使用 IntelliJ IDEA Ultimate 11.1 for linux 并安装了 Flex UI Designer 插件。但它不会启动。一条简短可见的消息说：

“启动 Flex UI Designer 需要 AIR 运行时 2.6 或更高版本。请将包含所需 AIR 运行时的 Flex SDK 4.5 或更高版本添加到可用 SDK 列表中。Linux 上可能需要一些额外的步骤。”

“附加步骤”超链接指向未打开的文档，因此我需要您的帮助。

Linux 是 Ubuntu Precise Pengolin。Flex版本是4.6，AIR是全系统安装的，但是在本地安装的Flex SDK目录下也有一个子目录：

```
/runtimes/air/android
/runtimes/air/win
/runtimes/air/mac 
```

我必须为 linux 做的那些“额外步骤”是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:57:24.237

[从http://helpx.adobe.com/air/kb/archived-air-sdk-version.html](http://helpx.adobe.com/air/kb/archived-air-sdk-version.html)下载 Adob​​e AIR 2.6 SDK Linux并在您的 Flex SDK 安装中解压。但我不确定使用 AIR 2.6 的 UI Designer 是否能够显示 Flex 4.6 组件。可能使用 AIR 2.6，您将只能使用 Flex SDK 4.1 或 4.5。如果有帮助请回答。

# jquery - 在 Jquery Mobile 中调整按钮图标的大小

> ID：14236487
> 
> 赞同：2
> 
> 时间：2013-01-09T13:38:13.480
> 
> 标签：jquery, mobile, button, icons, nav

我最近使用 jquery mobile sdk 构建了一个 Web 应用程序。一切都像一个魅力，但现在我想调整一个导航栏按钮的大小，以适应导航栏，它已被调整为 44 像素而不是 32 像素。我使用以下代码来创建按钮。

```
<div data-role="header" data-position="fixed" class="header-custom">
        <a href="#" class="ui-btn-right" data-icon="refresh" data-iconpos="notext" id="refreshButton">Refresh</a>
    </div><!-- /header --> 
```

我的目标是调整按钮（以及图标！:)）的大小以再次适合新的自定义标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:43:22.057

不幸的是，如果你想**保持图标清晰**，你将不得不做**自定义图标**。

**请参阅说明**：http:
//jquerymobile.com/test/docs/buttons/buttons-icons.html

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-12T14:20:48.413

您可以调整图标的大小！查看 jquery.mobile.icons.min.css 文件。有定义为 svg 字符串的图标。复制您想要编辑的类并将其写入您自己的 custom.css 文件中。现在寻找

```
width%3D%2214px%22%20height%3D%2214px 
```

在 svg 字符串中并将 14 更改为您想要的任何内容！在新的 css 类结束时，您可能会在背景图像中添加一个“！important”，以确保覆盖现有的 jquery 类！

如果要从 a 元素调整图标的大小，则必须另外添加一个额外的类。（在这种情况下，将 svg 字符串更改为 50px）

```
.icon50px {     
    height: 50px !important;
    width: 50px !important;
    font-size: 13px !important; }

.icon50px:after {
    height: 50px !important;
    width: 50px !important;
    margin-left: -25px;
    margin-top: -25px; } 
```

玩得开心 ;）

# c++ - 原始函数指针 vs boost::bind 返回值

> ID：14236489
> 
> 赞同：0
> 
> 时间：2013-01-09T13:38:25.693
> 
> 标签：c++, function-pointers, boost-bind

原始函数指针与 boost::bind 指针返回值有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T13:51:28.350

`bind`根本不返回指针。它返回一个包含函数指针和绑定参数的对象，并带有一个`operator()`可用于像函数一样调用它的重载对象。

所以主要区别在于结果`bind`存储了你想要绑定到函数参数的值；原始指针不存储任何内容。

# javascript - javascript样式比较不起作用

> ID：14236496
> 
> 赞同：1
> 
> 时间：2013-01-09T13:38:42.823
> 
> 标签：javascript, html

我正在使用 JavaScript。我面临一个问题，即我想在 div 标签周围动态放置边框。我的代码如下：

```
function myfunction(var1) {
    if (document.getElementById(var1).style.border = "0px") {
        document.getElementById(var1).style.border = "1px solid green";
    } else {
        document.getElementById(var1).style.border = "0px";
    }
} 
```

该代码第一次放置边框，但从未将其删除。即其他部分不起作用。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T13:40:15.753

你的说法不正确。它应该是...

```
function myfunction(var1) {
    if(document.getElementById(var1).style.border == "0px") {
        document.getElementById(var1).style.border = "1px solid green";
    } else {
        document.getElementById(var1).style.border = "0px";
    }
} 
```

在 JavaScript`=`中是赋值运算符。对于比较，您应该使用相等运算符，`==`.

您的语句分配`0px`给元素，然后停止。将`else`永远不会触发，因为任务`true`每次都会评估。

```
Comparison Operator             Example    Result
==  Equal To                    x == y     false
!=  Not Equal To                x != y     true
<   Less Than                   x < y      true
>   Greater Than                x > y      false
<=  Less Than or Equal To       x <= y     true
>=  Greater Than or Equal To    x >= y     false 
```

正如下面评论中提到的，恒等运算符 ( `===`) 实际上会比相等运算符 ( `==`) 更好。标识 (===) 运算符的行为与相等 (==) 运算符相同，只是不进行类型转换，并且类型必须相同才能被视为相等。在这种情况下，一个字符串正在与另一个字符串进行比较，因此`===`可以使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:40:38.087

你的 if 应该包含逻辑运算符：

```
if(document.getElementById(var1).style.border = "0px") 
```

到

```
if(document.getElementById(var1).style.border == "0px") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T13:40:39.377

您的 if 条件始终为真：

```
style.border = "0px" 
```

`=`为您的元素分配`border = 0px`始终正确的样式。您需要使用比较运算符`==`甚至更好的身份运算符`===`：

```
style.border == "0px" 
```

此外，如果第一次检查条件，您必须查看是否设置了属性，因为`style.border`只识别内联样式，因此很可能一开始就没有设置。

干净的方法是：

```
var el = document.getElementById(var1);
if(!el.style.border || el.style.border == "0px")
    el.style.border = "1px solid green";
} else {
    el.style.border = "0px";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T15:30:09.217

每个人都发现了分配错误，但代码有时仍然可能无法正常工作。

边框属性值，当你读到的时候，不一定是你写的，而是浏览器的

它的解释和速记分配通常会继承缺失规范的默认属性。

计算机可能不会将边框的分配视为“0x”，而是视为

'solid black 0px'，或者它可能不存在，除非作为单独的属性 -

无论你如何从字面上设置它。

仔细查看返回值的更具体的检查更可靠：

```
if(parseInt(document.getElementById(var1).style.borderTopWidth)){
    // the element has a non-zero border width
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-01-09T13:40:33.150

你想做

```
if(document.getElementById(var1).style.border == "0px") // note two = signs 
```

不是

```
if(document.getElementById(var1).style.border = "0px") 
```

而且我还以为您想将边框设置为“无”

```
document.getElementById(var1).style.border = "none"; 
```

# android - ContentObserver - 仅观察特定应用程序的变化

> ID：14236497
> 
> 赞同：1
> 
> 时间：2013-01-09T13:39:00.300
> 
> 标签：android, audio, contentobserver

我设置了一个 ContentObserver 来检查服务中的音频更改。我想知道是否有办法将 ContentObserver 的触发限制在某些应用程序上。

比如说，我正在玩一个可以更改音量的游戏，然后我在设置中更改音量。我希望该服务仅在游戏更改音量时触发警报。我该怎么做？

**注意**：该游戏是第 3 方应用程序。

**编辑** 有没有办法接收命令的堆栈顺序？假设一个程序访问设置以更改音量，显然设置会知道哪个程序正在尝试更改音量。有没有办法让设置抛出应用程序的包名？或者有没有办法知道它是否直接在设置中更改。

假设我在应用程序抽屉中并更改音量，这将被归类为直接更改并通过应用程序进行第三方更改。有没有办法找出什么时候是直接变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T04:38:11.480

我找到了一种方法来规避这一点。

使用 ContentObserver 的服务，我添加了这段代码

```
private RunningAppProcessInfo getForegroundApp() {
RunningAppProcessInfo result=null, info=null;

if(mActivityManager==null)
    mActivityManager = (ActivityManager)mContext.getSystemService(Context.ACTIVITY_SERVICE);
List <RunningAppProcessInfo> l = mActivityManager.getRunningAppProcesses();
Iterator <RunningAppProcessInfo> i = l.iterator();
while(i.hasNext()){
    info = i.next();
    if(info.importance == RunningAppProcessInfo.IMPORTANCE_FOREGROUND
            && !isRunningService(info.processName)){
        result=info;
        break;
    }
}
return result;
} 
```

所以，现在我知道了前台应用程序，它触发音量变化的概率非常高。所以我可以将它排除在触发任何响应之外。它并非完美无缺，但它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:51:56.190

您可以制作自己的广播意图并在游戏进行更改时触发它。然后在您的第二个应用程序中接收它。

如果游戏是第三方应用程序，那我猜是不可能的。

# php - 使用 Youtube API V3 和 PHP 将视频上传到 Youtube

> ID：14236502
> 
> 赞同：23
> 
> 时间：2013-01-09T13:39:17.343
> 
> 标签：php, youtube-api, google-api-php-client

我正在尝试使用 PHP 将视频上传到 Youtube。我正在使用 Youtube API v3，并且我正在使用 Google API PHP 客户端库的最新签出源代码。
我正在使用
[https://code.google.com/p/google-api-php-client/](https://code.google.com/p/google-api-php-client/)上给出的示例代码来执行身份验证。身份验证通过正常，但是当我尝试上传视频时，我得到`Google_ServiceException`错误代码 500 和消息为空。

我查看了之前提出的以下问题： [使用 php 客户端库 v3 将视频上传到 youtube](https://stackoverflow.com/questions/13177266/upload-video-to-youtube-using-php-client-library-v3)但是接受的答案没有描述如何指定要上传的文件数据。
我发现另一个类似的问题[Uploading file with Youtube API v3 and PHP](https://stackoverflow.com/questions/13954601/uploading-file-with-youtube-api-v3-and-php)，其中在评论中提到 categoryId 是强制性的，因此我尝试在代码段中设置 categoryId 但它仍然给出了相同的异常。

我还参考了文档站点 ( [https://developers.google.com/youtube/v3/docs/videos/insert](https://developers.google.com/youtube/v3/docs/videos/insert) ) 上的 Python 代码，但在客户端库中找不到函数 next_chunk。但是我尝试放置一个循环（在代码片段中提到）以重试获取错误代码 500，但在所有 10 次迭代中我得到了相同的错误。

以下是我正在尝试的代码片段：

```
$youTubeService = new Google_YoutubeService($client);
if ($client->getAccessToken()) {
    print "Successfully authenticated";
    $snippet = new Google_VideoSnippet();
    $snippet->setTitle = "My Demo title";
    $snippet->setDescription = "My Demo descrition";
    $snippet->setTags = array("tag1","tag2");
    $snippet->setCategoryId(23); // this was added later after refering to another question on stackoverflow

    $status = new Google_VideoStatus();
    $status->privacyStatus = "private";

    $video = new Google_Video();
    $video->setSnippet($snippet);
    $video->setStatus($status);

    $data = file_get_contents("video.mp4"); // This file is present in the same directory as the code
    $mediaUpload = new Google_MediaFileUpload("video/mp4",$data);
    $error = true;
    $i = 0;

    // I added this loop because on the sample python code on the documentation page
    // mentions we should retry if we get error codes 500,502,503,504
    $retryErrorCodes = array(500, 502, 503, 504);
    while($i < 10 && $error) {
        try{
            $ret = $youTubeService->videos->insert("status,snippet", 
                                                   $video, 
                                                   array("data" => $data));

            // tried the following as well, but even this returns error code 500,
            // $ret = $youTubeService->videos->insert("status,snippet", 
            //                                        $video, 
            //                                        array("mediaUpload" => $mediaUpload); 
            $error = false;
        } catch(Google_ServiceException $e) {
            print "Caught Google service Exception ".$e->getCode()
                  . " message is ".$e->getMessage();
            if(!in_array($e->getCode(), $retryErrorCodes)){
                break;
            }
            $i++;
        }
    }
    print "Return value is ".print_r($ret,true);

    // We're not done yet. Remember to update the cached access token.
    // Remember to replace $_SESSION with a real database or memcached.
    $_SESSION['token'] = $client->getAccessToken();
} else {
    $authUrl = $client->createAuthUrl();
    print "<a href='$authUrl'>Connect Me!</a>";
} 
```

我做错了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T20:12:31.090

我能够使用以下代码进行上传：

```
if($client->getAccessToken()) {
    $snippet = new Google_VideoSnippet();
    $snippet->setTitle("Test title");
    $snippet->setDescription("Test descrition");
    $snippet->setTags(array("tag1","tag2"));
    $snippet->setCategoryId("22");

    $status = new Google_VideoStatus();
    $status->privacyStatus = "private";

    $video = new Google_Video();
    $video->setSnippet($snippet);
    $video->setStatus($status);

    $error = true;
    $i = 0;

    try {
        $obj = $youTubeService->videos->insert("status,snippet", $video,
                                         array("data"=>file_get_contents("video.mp4"), 
                                        "mimeType" => "video/mp4"));
    } catch(Google_ServiceException $e) {
        print "Caught Google service Exception ".$e->getCode(). " message is ".$e->getMessage(). " <br>";
        print "Stack trace is ".$e->getTraceAsString();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-02T02:04:36.670

我意识到这很旧，但这是文档中的答案：

```
 // REPLACE this value with the path to the file you are uploading.
    $videoPath = "/path/to/file.mp4";

    $snippet = new Google_Service_YouTube_VideoSnippet();
    $snippet->setTitle("Test title");
    $snippet->setDescription("Test description");
    $snippet->setTags(array("tag1", "tag2"));

    // Numeric video category. See
    // https://developers.google.com/youtube/v3/docs/videoCategories/list 
    $snippet->setCategoryId("22");

    // Set the video's status to "public". Valid statuses are "public",
    // "private" and "unlisted".
    $status = new Google_Service_YouTube_VideoStatus();
    $status->privacyStatus = "public";

    // Associate the snippet and status objects with a new video resource.
    $video = new Google_Service_YouTube_Video();
    $video->setSnippet($snippet);
    $video->setStatus($status);

    // Specify the size of each chunk of data, in bytes. Set a higher value for
    // reliable connection as fewer chunks lead to faster uploads. Set a lower
    // value for better recovery on less reliable connections.
    $chunkSizeBytes = 1 * 1024 * 1024;

    // Setting the defer flag to true tells the client to return a request which can be called
    // with ->execute(); instead of making the API call immediately.
    $client->setDefer(true);

    // Create a request for the API's videos.insert method to create and upload the video.
    $insertRequest = $youtube->videos->insert("status,snippet", $video);

    // Create a MediaFileUpload object for resumable uploads.
    $media = new Google_Http_MediaFileUpload(
        $client,
        $insertRequest,
        'video/*',
        null,
        true,
        $chunkSizeBytes
    );
    $media->setFileSize(filesize($videoPath));

    // Read the media file and upload it chunk by chunk.
    $status = false;
    $handle = fopen($videoPath, "rb");
    while (!$status && !feof($handle)) {
      $chunk = fread($handle, $chunkSizeBytes);
      $status = $media->nextChunk($chunk);
    }

    fclose($handle);

    // If you want to make other calls after the file upload, set setDefer back to false
    $client->setDefer(false); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-08T12:40:59.417

我也意识到这是旧的，**但是**当我从 GitHub 克隆最新版本的 php-client 时，我遇到了`Google_Service_YouTube_Videos_Resource::insert()`-method 的麻烦。

我会传递一个数组`"data" => file_get_contents($pathToVideo)`并将其`"mimeType" => "video/mp4"`设置为 - 方法的参数`insert()`，但我仍然不断得到**(400) BadRequest**作为回报。

调试和阅读我发现的谷歌代码`\Google\Service\Resource.php`有一个针对数组键的检查（在第 179-180 行） `"uploadType"`，它将启动 Google_Http_MediaFielUpload 对象。

```
$part = 'status,snippet';
$optParams = array(
    "data" => file_get_contents($filename),
    "uploadType" => "media",  // This was needed in my case
    "mimeType" => "video/mp4",
);
$response = $youtube->videos->insert($part, $video, $optParams); 
```

如果我没记错的话，PHP-api 的 0.6 版不需要 uploadType 参数。这可能仅适用于*直接*上传样式，而不适用于 Any Day 的答案中显示的*可恢复上传。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-17T20:16:00.260

答案是通过[Google PHP 客户端库](https://github.com/google/google-api-php-client)使用 Google_Http_MediaFileUpload 。

这是示例代码：[https ://github.com/youtube/api-samples/blob/master/php/resumable_upload.php](https://github.com/youtube/api-samples/blob/master/php/resumable_upload.php)

# magento - Magento 1.7 - 在没有小数的网格中显示订单数量

> ID：14236504
> 
> 赞同：2
> 
> 时间：2013-01-09T13:39:23.913
> 
> 标签：magento, magento-1.7

我在网格中为订单项的订购件定义了此列：

```
 $this->addColumn('qty_ordered',
        array(
            'header'=> $this->__('Quantity'),
            'align' =>'right',
            'type=' => 'number',
            'index' => 'qty_ordered'
        )
    ); 
```

[xxx http://img688.imageshack.us/img688/6690/scr031.jpg](http://img688.imageshack.us/img688/6690/scr031.jpg)

如何显示没有小数的数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:50:42.593

一种方法是创建一个自定义模块

```
$this->addColumn('qty_ordered',
    array(
        'header'=> $this->__('Quantity'),
        'align' =>'right',
        'type=' => 'number',
        'index' => 'qty_ordered'
        'renderer' = new MageIgniter_RemoveQtyDecimals_Block_Adminhtml_Renderer_Date()
    )
);

 class MageIgniter_RemoveQtyDecimals_Block_Adminhtml_Renderer_Date extends Mage_Adminhtml_Block_Widget_Grid_Column_Renderer_Action
 {
    public function render(Varien_Object $row)
     {
         return $this->_getValue($row);
     }

     public function _getValue(Varien_Object $row)
     {
         $val = $row->getData($this->getColumn()->getIndex());
         return intval($val);

     } 
 } 
```

见[https://stackoverflow.com/a/12695286/1191288](https://stackoverflow.com/a/12695286/1191288)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-13T02:34:25.553

我修改了 sku 数组定义，而不是创建 qty_ordered。

```
$collection = Mage::getResourceModel($this->_getCollectionClass())
    ->join(
    'sales/order_item',
    '`sales/order_item`.order_id=`main_table`.entity_id',
        array(
            'skus'  => new Zend_Db_Expr('group_concat( `sales/order_item`.sku, "(", floor(`sales/order_item`.qty_ordered), ")" SEPARATOR ", ")'),
        )); 
```

我相信你可以`sales/order_item`在你的 qty_ordered 定义中使用 floor( .qty_ordered) 。

订单网格结果中的 SKU 列类似于：MBA001(2)、MOF004(1)

# ruby-on-rails - Heroku 发布 - 回滚后如何前滚？

> ID：14236505
> 
> 赞同：5
> 
> 时间：2013-01-09T13:39:23.837
> 
> 标签：ruby-on-rails, git, version-control, heroku, rollback

Heroku 有一个“发布”功能，允许您回滚到特定的部署版本。我看过很多关于回滚的信息，但是回滚后如何再次前滚呢？

基本上，我想回滚到某个特定版本，看看它是否是引入了一些错误的版本。我有一种感觉不是，所以我很确定我会尽快恢复（向前滚动）到最新版本。

如果 Heroku 版本不可行，我想它是 Git。也就是说，如果我使用 Git 来执行此操作，我不希望我的本地 Git 存储库的历史被触及。我只希望 Heroku repo 回滚/转发。

又怎样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T17:31:13.390

这对于[heroku 客户端](https://github.com/heroku/heroku)的[toolbelt 来说](https://toolbelt.heroku.com/)似乎非常可行。

```
heroku releases:info 
```

接着

```
heroku rollback v502 
```

到你想要的正版

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:56:38.313

暂时不可能。

这是 Heroku 发布 API：

[https://api-docs.heroku.com/releases](https://api-docs.heroku.com/releases)

选项：

*   列出应用程序的版本
*   获取发布信息
*   回滚到发布

你需要通过 Git 来完成，我认为这通常是更好的方法。

/编辑：

Git方式：

```
git reset --hard <tag/branch/commit id> 
```

# windows-phone-7 - 将图像转换为字节

> ID：14236510
> 
> 赞同：0
> 
> 时间：2013-01-09T13:39:36.490
> 
> 标签：windows-phone-7, windows-phone-7.1

我正在使用以下代码将本地路径中的 png 图像（D:\CURR PROJECT\NewUIChanges\Htmlfile\round1.png）转换为字节。我得到一个空执行，即）img 流为空。请帮帮我。

```
 Stream imgStream;
    imgStream =   Assembly.GetExecutingAssembly().GetManifestResourceStream("NewUIChanges.Htmlfile.round1.png");
    byte[] data = new byte[(int)imgStream.Length];
    int offset = 0;
    while (offset < data.Length)
    {
        int bytesRead = imgStream.Read(data, offset, data.Length - offset);
        if (bytesRead <= 0)
        {
            throw new EndOfStreamException("Stream wasn't as long as it claimed");
        }
        offset += bytesRead;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:01:53.947

这条线产生了问题。imgStream 为空。

```
 imgStream =   Assembly.GetExecutingAssembly().GetManifestResourceStream("NewUIChanges.Htmlfile.round1.png"); 
```

检查您的图像路径。大概是错的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:16:04.350

将图像的构建操作更改为嵌入式资源。

# json - 使用 ListModel 在 selectionlistener 上滚动问题

> ID：14236511
> 
> 赞同：4
> 
> 时间：2013-01-09T13:39:35.800
> 
> 标签：json, codenameone

在 Codenameone 中，我使用列表作为容器渲染器来形成，并在使用 hastable 解析 JSON 数据后，我在列表中的项目上显示了结果。包含 hastable 的列表已被传递`ListModel`，它工作正常。每当我使用`ListModel`时，我只想单击列表项和操作触发器。问题是使用`ListModel`它只有

```
datalist.addSelectionListener(new SelectionListener() {

                public void selectionChanged(int oldSelected, int newSelected) {
                    // TODO Auto-generated method stub

                }
            }); 
```

由于选择任何项目，我将无法滚动整个页面，它会触发操作。有什么选项可以让我在页面上滚动整个结果`onClick`以便触发操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:11:57.407

在列表而不是列表模型中使用动作侦听器。

# php - 如何通过php获取当前时间和日期？

> ID：14236514
> 
> 赞同：-6
> 
> 时间：2013-01-09T13:39:37.130
> 
> 标签：php

> **可能重复：**
> [在 PHP 中获取当前日期和时间](https://stackoverflow.com/questions/470617/get-current-date-and-time-in-php)

> php 中的哪个函数可以返回当前日期？
> 
> > 因此需要时间，应该在用户国家/地区不应该有任何默认时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:44:00.340

[a] **strftime()** : 根据区域设置格式化本地时间/日期

[b] **date** : 格式化本地时间/日期

```
 <?php
    print date('r');
    print "\\n";
    print date('D, d M Y H:i:s T');
    print "\\n";
   ?> 
```

输出：

```
 Mon, 23 Apr 2007 01:29:56 +0530
   Mon, 23 Apr 2007 01:35:14 IST 
```

和

```
 <?php
   print strftime('%c');
  ?> 
```

输出：

```
 Mon Apr 23 01:22:58 2007 
```

[演示日期](http://www.w3schools.com/php/func_date_date.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:40:03.450

你可以试试这个-

```
echo date('Y-m-d h-i-s'); 
```

它会给出类似：“2013-01-09 01-16-26”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T13:47:45.387

首先，您需要使用`date_default_timezone_set()`php 中的函数设置时区，然后您需要使用`date()`函数获取所需的日期。就这样..

```
date_default_timezone_set('Asia/kolkata');
echo date('Y-m-d H:i:s'); 
```

这会给你这样的东西

2013-01-09 19:15:48

# javascript - 我可以限制 JavaScript 中数组的长度吗？

> ID：14236515
> 
> 赞同：84
> 
> 时间：2013-01-09T13:39:52.760
> 
> 标签：javascript, jquery, cookies

我想显示产品浏览历史记录，因此我将产品 ID 存储在浏览器 cookie 中。

因为历史列表限制为 5 项，所以我将 cookie 值转换为数组，然后检查它的长度并削减冗余。

下面的代码是我尝试过的，但它不起作用；数组项没有被删除。

我想问一下如何限制数组长度使其只能存储5个项目？

或者

如何剪切数组索引 4 之后的项目？

```
var id = product_id;
var browseHistory = $.cookie('history');
if (browseHistory != null) {
  var old_cookie = $.cookie('history');
  var new_cookie = '';

  if (old_cookie.indexOf(',') != -1) {
    var arr = old_cookie.split(',');
    if (arr.length >= 5) {
      arr.splice(4, 1)
    }
  }

  new_cookie = id + ',' + old_cookie;
  $.cookie('history', new_cookie, { expires: 7, path: '/' });
} else {
  $.cookie('history', id, { expires: 7, path: '/' });
} 
```

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2013-01-09T13:47:15.400

您没有正确使用拼接：

```
arr.splice(4, 1) 
```

这将删除索引 4 处的 1 项。请参见[此处](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice)

我想你想使用[slice](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice)：

```
arr.slice(0,5) 
```

这将返回位置 0 到 4 中的元素。

这假设您的所有其余代码（cookie 等）都可以正常工作

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2016-03-04T07:39:47.200

[最快](https://jsperf.com/array-splice-vs-array-length-0/2)和最简单的方法是将`.length`属性设置为所需的长度：

```
arr.length = 4; 
```

这也是重置/清空数组的理想方式：

```
arr.length = 0; 
```

* * *

**警告：**设置此属性也可以使数组比它长：如果它的长度为 2，运行`arr.length = 4`将向它添加两个`undefined`项目。也许添加一个条件：

```
if (arr.length > 4) arr.length = 4; 
```

或者：

```
arr.length = Math.min(arr.length, 4); 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2017-02-08T13:45:54.120

```
arr.length = Math.min(arr.length, 5) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-04-10T19:08:31.357

```
var  arrLength = arr.length;
if(arrLength > maxNumber){
    arr.splice( 0, arrLength - maxNumber);
} 
```

此解决方案在动态环境（如`p5js`. 我把它放在绘图调用中，它会动态限制数组的长度。

问题与

```
arr.slice(0,5) 
```

是每个并条框只从阵列中取出固定数量的项目，如果您的用户可以添加多个项目，它将无法保持阵列大小不变。

问题与

```
if (arr.length > 4) arr.length = 4; 
```

是它会从数组的末尾取出项目，因此如果您还使用`push()`.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-12-20T19:19:37.573

我认为你可以这样做：

```
let array = [];
array.length = 2;
Object.defineProperty(array, 'length', {writable:false});

array[0] = 1 // [1, undefined]

array[1] = 2 // [1, 2]

array[2] = 3 // [1, 2] -> doesn't add anything and fails silently

array.push("something"); //but this throws an Uncaught TypeError 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-09T13:47:24.690

从中删除项目后，您需要实际使用缩短的数组。您忽略了缩短的数组。

您将 cookie 转换为数组。你减少了数组的长度，然后你永远不会使用那个缩短的数组。相反，您只需使用旧的 cookie（未缩短的 cookie）。

您应该将缩短的数组转换回字符串，`.join(",")`然后将其用于新的 cookie，而不是使用`old_cookie`未缩短的。

您也可能没有`.splice()`正确使用，但我不知道您缩短阵列的确切目标是什么。您可以阅读`.splice()` [此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)的确切功能。

# twitter-bootstrap - Twitter Bootstrap 轮播幻灯片持续时间

> ID：14236516
> 
> 赞同：4
> 
> 时间：2013-01-09T13:39:57.023
> 
> 标签：twitter-bootstrap, twitter-bootstrap-3, carousel

在 Twitter Bootstrap Carousel 中，如何使特定幻灯片具有与其他幻灯片不同的持续时间？

我可以使用“间隔”参数更改整个滑块的持续时间，但不知道如何为特定幻灯片设置自定义持续时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-25T21:13:48.640

Bootstrap 3.1 轮播不允许每张幻灯片有不同的持续时间，但它提供**了一种方法**和**一个事件**，我们可以使用它来实现这一点。

我们将使用该`slid.bs.carousel`事件来检测轮播何时完成其滑动过渡以及`.carousel('pause')`停止轮播在项目之间循环的选项。

我们将`data-interval="x"`在具有不同持续时间的每个轮播项目上使用此属性，因此我们的 html 将如下所示：

```
<div class="carousel-inner">
    <div class="active item" data-interval="3000">
        <img src="Url 1" />
    </div>
    <div class="item" data-interval="6000">
        <img src="Url 2" />
    </div>
    <div class="item" data-interval="9000">
        <img src="Url 3" />
    </div>
</div> 
```

现在，我们要做的就是：

1.  `slid.bs.carousel` 使用事件检测何时显示新项目
2.  检查他的持续时间
3.  使用暂停轮播`.carousel('pause')`
4.  使用项目的持续时间设置超时，在持续时间完成后，我们应该取消暂停轮播

javascript 代码将如下所示：

```
var t;

var start = $('#myCarousel').find('.active').attr('data-interval');
t = setTimeout("$('#myCarousel').carousel({interval: 1000});", start-1000);

$('#myCarousel').on('slid.bs.carousel', function () {   
     clearTimeout(t);  
     var duration = $(this).find('.active').attr('data-interval');

     $('#myCarousel').carousel('pause');
     t = setTimeout("$('#myCarousel').carousel();", duration-1000);
})

$('.carousel-control.right').on('click', function(){
    clearTimeout(t);   
});

$('.carousel-control.left').on('click', function(){
    clearTimeout(t);   
}); 
```

如您所见，我们在开始时被迫添加一个起始间隔，我将其设置为 1000 毫秒，但每次暂停轮播时我都会将其删除`duration-1000`。我已经使用下面的行来解决第一个项目问题，因为该项目没有被`slid event`.

```
var start = $('#myCarousel').find('.active').attr('data-interval');
t = setTimeout("$('#myCarousel').carousel({interval: 1000});", start-1000); 
```

我还注意到，如果用户按下箭头，超时就会变得疯狂，这就是为什么我每次用户按下左右箭头时都会清除超时。

这是我的实时示例[http://jsfiddle.net/paulalexandru/52KBT/](http://jsfiddle.net/paulalexandru/52KBT/)，希望此回复对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-07T06:28:53.047

您需要将主 div 中的间隔设置为数据间隔标记。所以它工作正常，你可以给不同的幻灯片不同的时间。

```
<!--main div -->
<div data-ride="carousel" class="carousel slide" data-interval="100" id="carousel-example-generic">
  <!-- Indicators -->
  <ol class="carousel-indicators">
    <li data-target="#carousel-example-generic" data-slide-to="0" class=""></li>
  </ol>

  <!-- Wrapper for slides -->
  <div role="listbox" class="carousel-inner">
    <div class="item">
      <a class="carousel-image" href="#">
        <img alt="image" src="image.jpg">
      </a>
    </div>
  </div>
</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-14T04:10:48.710

我根本无法`carousel('pause')`在引导事件处理程序中工作。我不知道为什么 - 可能是由于使用 KnockoutJS 动态渲染幻灯片，或者可能是 Bootstrap 中的错误*（我猜这是我的代码）*。

因此，为了设置独立于轮播中的朋友的单个幻灯片的间隔，我使用了`slid.bs.carousel`Bootstrap 中冒泡的事件以及 using`setTimeout`根据项目的`data-interval`属性设置间隔并手动调用该`carousel('next')`方法。

**JS**

```
// slide event
$('.carousel').on('slid.bs.carousel', function () {
    var carouselData = $(this).data('bs.carousel');
    var currentIndex = carouselData.getActiveIndex();

    window.setTimeout(function() {
        $('.carousel').carousel('next');
    }, $(carouselData.$items[currentIndex]).data('interval'));
});

// init carousel
$('.carousel').carousel({
    interval: false
});

// set initial timeout for active slide data-interval
window.setTimeout(function () {
    $('.carousel').carousel('next');
}, $('.carousel .active').data('interval')); 
```

**HTML**

```
<div class="carousel">
  <div class="carousel-inner">
    <div id="slide1" class="item active" data-interval="5000">{{content}}</div>
    <div id="slide2" class="item" data-interval="10000">{{content}}</div>
    <div id="slide3" class="item" data-interval="10000">{{content}}</div>
  </div>
</div> 
```

在此示例`#slide1`中，将是轮播中的初始幻灯片并显示 5 秒。5 秒后它会滑到`#slide2`。

`#slide2`在滑动到 之前会暂停 10 秒`#slide3`。等等。等等...

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-11-21T12:23:26.383

如果您仍然没有找到解决方案，我已经修改了 Bootstrap **carousel.js**以添加此功能。

1.  将可选属性（**data-interval**）添加到“item”类元素。

    `<div class="active item" data-interval="6000">`

2.  修改**carousel.js**

    *   **添加标志以确定第一个周期**

        ```
        var Carousel = 函数（元素，选项）{
        this.$element = $(element)
        this.$indicators = this.$element.find('.carousel-indicators')
        this.options = 选项
        this.paused =
        this.sliding =
        this.interval =
        this.$active =
        this.$items = null
        //[TODO Kevin] 添加 - BEGIN
        this.isFirstCycle=true
        //[TODO Kevin] 添加 - BEGIN

        this.options.pause == '悬停' && this.$element
        .on('mouseenter', $.proxy(this.pause, this))
        .on('mouseleave', $.proxy(this.cycle, this))
        }

        ```

    *   **修改CYCLE功能**

        ```
         Carousel.prototype.cycle =  function (e) {
         e || (this.paused = false)

         this.interval && clearInterval(this.interval)
         //[TODO Kevin] Modified - BEGIN
         //this.options.interval && !this.paused && (this.interval = setInterval($.proxy(this.next, this), this.options.interval))

         if (this.options.interval && !this.paused) {
           var $active = this.$element.find('.item.active');

           /**CUSTOM ITEM INTERVAL**/
           if ($active.data('interval')) {
             var customInterval;

             /*On First Cycle*/
             if(this.isFirstCycle) {
               //Get ACTIVE ITEM interval
               customInterval = $active.data('interval');
               this.isFirstCycle = false;

             /*On Suceeding Cycles*/
             } else {
               //Get NEXT ITEM interval
               var $next = $active['next']();

               if (!$next.length) {
                 if (!this.options.wrap) return this
                 $next = this.$element.find('.item')['first']()
               }

               customInterval = $next.data('interval');
             }

             this.interval = setInterval($.proxy(this.next, this), customInterval);

           /**DEFAULT INTERVAL**/
           } else {
             this.interval = setInterval($.proxy(this.next, this), this.options.interval);
           }
         }
         //[TODO Kevin] Modified - END

         return this
         } 
        ```

示例：[JS 小提琴](http://jsfiddle.net/Qw4QY/1/ "JS小提琴")

# android - 从android中的contactId获取联系人详细信息？

> ID：14236517
> 
> 赞同：0
> 
> 时间：2013-01-09T13:39:58.233
> 
> 标签：android

我正在使用以下代码使用联系人 ID 在 android 中获取联系人详细信息。但是，该代码仅适用于 android 设备 2.3.5 版而不是 2.3.3 或 3 以上版本。以下是我的代码，其中contactId 是该特定联系人的 id。执行不移动到`if (phone.moveToFirst()) {}`部分是不是查询中有问题？如果是这样，那么为什么它在 2.3.5 版上运行良好？任何帮助将不胜感激..谢谢

```
public String queryAllPhoneNumbersForContact(int contactId) 
{
    String[] projection = new String[] { Phone.NUMBER, Phone.TYPE };

    @SuppressWarnings("deprecation")
    Cursor phone = managedQuery(Phone.CONTENT_URI, 
            projection,
            Data.CONTACT_ID + "=?",
            new String[] { String.valueOf(contactId) }, null);

    if (phone.moveToFirst())
    {
        int contactNumberColumnIndex = phone.getColumnIndex(Phone.NUMBER);
        int contactTypeColumnIndex = phone.getColumnIndex(Phone.TYPE);

        while (!phone.isAfterLast()) 
        {
            String number = phone.getString(contactNumberColumnIndex).trim();
            int type = phone.getInt(contactTypeColumnIndex);

            System.out.println("number" + number);
            System.out.println("Type"   + getString(Phone.getTypeLabelResource(type)));

            phone.moveToNext();
            if ((getString(Phone.getTypeLabelResource(type)).equals("Mobile"))) 
            {
                Log.e("WorkNo. : ", number);
                return number;
            }
        }
    }
    phone.close();
    return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:33:39.710

哪些设备完全不起作用？我建议您使用适用于主要版本和设备的 2.2 版本

# javascript - 在 jQuery 中调用自定义属性

> ID：14236525
> 
> 赞同：0
> 
> 时间：2013-01-09T13:40:16.977
> 
> 标签：javascript, jquery, html

我正在使用一个 jQuery 内容滑块，它为当前可见幻灯片提供了一个类`.swipeview-active`，并且每张幻灯片都有自己的`data-page-index`编号。我有一些变量可以获取窗口高度等，但是如何设置检索`data-page-index`当前活动幻灯片的值以在变量中使用，例如：

```
var h = $(window).height(),
    w = $(window).width(),
    active = $('.swipeview-active'),
    dpi = $('active').data("date-page-index"), 
```

所以每次我调用`dpi`它时都应该输入活动幻灯片的值`data-page-index`，但这不起作用。我哪里错了？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:41:38.093

通过您访问`data-*`属性`data()`时不需要`data-`前缀。试试这个：

```
dpi = $('active').data("page-index") 
```

您还可以访问`data`页面加载时元素上存在的属性`attr()`- 尽管它不是首选方法。此方法将需要`data`前缀。

```
dpi = $('active').attr("data-page-index") 
```

# linux - 如何授予jenkins用户访问Linux上特定目录的权限

> ID：14236532
> 
> 赞同：0
> 
> 时间：2013-01-09T13:40:35.303
> 
> 标签：linux, jenkins, user-permissions

我需要授予 jenkins 用户访问某些特定目录的权限，例如`usr/lib`or`usr/local/include`以便他可以在执行某些 Jenkins 作业期间将一些文件复制到这些目录中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:59:42.833

从 Web 访问的东西可以覆盖系统文件的想法非常可怕（并且不安全），但我认为您需要授予运行 Jenkins 的用户需要在那里写入的权限。

同样，*普通用户没有被授予写入这些目录的权限也是有充分理由的*。您可能需要考虑在[chroot jail](http://en.wikipedia.org/wiki/Chroot)中运行该作业。这样，如果出现问题，您就不会破坏您的系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:12:01.443

对于特定任务，我会说使用`sudo`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-03T10:46:00.027

您提到`usr/lib`或`usr/local/include`目录，如果您的目标是在作业执行期间安装一些工具和包，您可以将其本地安装到您的作业工作区（例如，`.local`目录），然后通过设置环境变量使您的作业使用这些目录像`LD_LIBRARY_PATH`, `CFLAGS`, 等等

# visual-studio-2012 - Web Essentials - 捆绑版本控制

> ID：14236537
> 
> 赞同：15
> 
> 时间：2013-01-09T13:40:45.097
> 
> 标签：visual-studio-2012, bundling-and-minification, web-essentials

我目前正在使用 Visual Studio *Web Essentials*来捆绑和缩小我的 CSS 和 JavaScript 文件。

目前我正在手动创建带有版本号的捆绑包（例如*mybundle-1.0.0.css*），以避免在推出生产时出现缓存问题。每次对源进行更改时，我还必须手动更改捆绑文件的版本号。

**Web Essentials 捆绑中是否有任何我可能忽略的自动版本控制功能？**

理想的工作流程是：

1.  开发人员更新源文件。
2.  Web Essentials 会自动更新捆绑包。
3.  Web Essentials 会自动增加文件名中的版本号。

这可能吗？

如果没有，我很乐意听到有关更好的开发人员工作流程的任何建议。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-09T21:26:41.847

Web Essentials 不支持动态版本控制。相反，我总是使用动态运行时功能来自动将指纹附加到我的 JS 和 CSS 引用中。这对我来说效果更好，因为它完全独立于任何构建过程或工具支持，而是只查看实际文件以进行更改。所以它更健壮。

[我只是在这里](http://madskristensen.net/post/cache-busting-in-aspnet)的一篇博文中写了它

# knockout.js - 关于选择列表的淘汰赛映射

> ID：14236552
> 
> 赞同：-1
> 
> 时间：2013-01-09T13:41:24.437
> 
> 标签：knockout.js, knockout-mapping-plugin

我完全被难住了。我认为这应该是一件容易的事，但它完全避开了我。我试图只创建一个选择列表，但由于某种原因，这没有约束力。我在控制台中没有错误。

这是我的 Javascript

```
var data = {
    "StoreList": [{
    "StoreNo": "02",
    "StoreName": "Store02"
  }, {
    "StoreNo": "03",
    "StoreName": "Store03"
  }, {
    "StoreNo": "14",
    "StoreName": "Store14"
  }, {
    "StoreNo": "15",
    "StoreName": "Store15"
  }]
};

var viewModel = {};
viewModel = ko.mapping.fromJS(data);
ko.applyBindings(viewModel); 
```

这是我的 HTML

```
<select height="20" data-bind="options: viewModel.StoreList, optionsText: 'StoreName'"></select> 
```

我的小提琴[http://jsfiddle.net/S7cqp/3/](http://jsfiddle.net/S7cqp/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:02:40.267

您不应该放入`viewModel`data-bind 属性。它只是存储 VM 的变量的名称。您的绑定应如下所示：

```
<select height="20" data-bind="options: StoreList, optionsText: 'StoreName'"></select> 
```

这是一个工作小提琴：http: [//jsfiddle.net/vyshniakov/S7cqp/8/](http://jsfiddle.net/vyshniakov/S7cqp/8/)

# android - android logcat：如何在命令行上过滤和格式化？

> ID：14236556
> 
> 赞同：1
> 
> 时间：2013-01-09T13:41:37.797
> 
> 标签：android, filter, format, logcat

据我所知，我无法从 cmd 过滤应用程序名称，所以我必须使用标签来代替......

我可以正确过滤，但我无法获得我想要的输出格式......

我正在尝试以下，一切正常......

```
Runtime.getRuntime().exec(new String[] { "logcat", "-d",
    BasicDefinitions.APP_TAG + ":I *:S" }); 
```

如果我更改`-d`为`-d -v long`它不再起作用... -v 参数是有效的参数，如此处所述[http://developer.android.com/tools/debugging/debugging-log.html#outputFormat](http://developer.android.com/tools/debugging/debugging-log.html#outputFormat)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:23:55.307

Since you are using `String[]` type for the parameters you can not combine any of them:

```
Runtime.getRuntime().exec(new String[] { "logcat", "-d", "-v", "long", BasicDefinitions.APP_TAG + ":I", "*:S" }); 
```

# javascript - 从外部调用 UI 按钮

> ID：14236559
> 
> 赞同：3
> 
> 时间：2013-01-09T13:41:46.337
> 
> 标签：javascript, ckeditor

## 回答：

结果可以在这里看到：http: [//apitecture.com/dev/cked/index.2.html](http://apitecture.com/dev/cked/index.2.html)

工作代码摘录：

```
$('a.color').on({
    click : function()
    {
        var self = $(this);

        var editor = self.data('editor-instance') || CKEDITOR.instances['one'];
        var button = self.data('editor-button') || editor.ui.create('TextColor');

        if (!self.data('editor-instance'))
        {
            self.data('editor-instance', editor);
        }

        if (!self.data('editor-button'))
        {
            button._.id = self.attr('id');
            self.data('editor-button', button);
        }

        button.click( editor );
    }
}); 
```

* * *

我正在开发一个丰富的基于 GUI 的内容编辑器。

我得出结论，使用 CKEditor 作为文本样式部分，因为它的第 4 版带有很多自定义和配置选项，而且构建得非常好。

我开始将CK中的一些命令实现到我自己的工具栏上，这些命令与CK无关。显然，我的冒险并不像我想象的那么容易......

[http://apitecture.com/dev/cked/](http://apitecture.com/dev/cked/) <- 这里我部署了一个沙​​盒版本。

在左侧，您可以看到 CK 的精简版和自定义工具栏。

右侧是精确的复制品，但带有 CK 的本机工具栏。

如您所见，简单的命令（如**Link**和**Bold ）由于其简单的性质而正在工作。**

问题出在**文本颜色**按钮上。它没有绑定到 CK 中的*命令*，因此我无法在外部执行它 - 好吧，至少我还没有找到方法。

也许有人对CK足够专业并且可以帮助我解决这个问题？

目标是在我的工具栏按钮上具有与 CK 相同的功能。

我发现，单击**Text Color**后，颜色选择弹出窗口会附加到正文，因此，它不会扩展到 CK 样式，理论上应该独立工作。不过，我似乎找不到将 HTML 附加到正文的代码。

我试图获取 UI 按钮实例：

```
var color = CKEDITOR.instances['one'].ui.create('TextColor');

// and fire click on it
color.click(); 
```

但是，这导致了部分预期的（由于单击不是从工具栏开始）异常：

```
Uncaught TypeError: Cannot read property 'elementMode' of undefined ckeditor.js:552
    CKEDITOR.ui.floatPanel.CKEDITOR.tools.createClass.$ ckeditor.js:552
    CKEDITOR.ui.panelButton.CKEDITOR.tools.createClass.proto.createPanel ckeditor.js:541
    e ckeditor.js:540
    $.on.click cktest.js:59
    v.event.dispatch jquery.min.js:2
    o.handle.u 
```

看到（来自：console.log（color.click））该函数接受一个参数，我认为我可以通过调用向它提供任何DOM元素`color.click( element );`，这也导致了错误：

```
Uncaught TypeError: Cannot read property 'baseFloatZIndex' of undefined ckeditor.js:547
    CKEDITOR.ui.panel.render ckeditor.js:547
    o ckeditor.js:552
    CKEDITOR.ui.floatPanel.CKEDITOR.tools.createClass.$ ckeditor.js:553
    CKEDITOR.ui.panelButton.CKEDITOR.tools.createClass.proto.createPanel ckeditor.js:541
    e ckeditor.js:540
    $.on.click cktest.js:59
    v.event.dispatch jquery.min.js:2
    o.handle.u 
```

这是引入颜色插件及其按钮的源的链接：[https ://github.com/ckeditor/ckeditor-dev/blob/master/plugins/colorbutton/plugin.js](https://github.com/ckeditor/ckeditor-dev/blob/master/plugins/colorbutton/plugin.js)

### 更新：

我认为每个按钮都会发生这种情况，它有下拉菜单而不是对话框。

### 更新 2：

Reinmar 的回答确实在隧道尽头显示了一些亮点：http: [//apitecture.com/dev/cked/index.2.html](http://apitecture.com/dev/cked/index.2.html)

在示例中，可以单击右侧的“颜色”文本链接，并且下拉显示，此外，它的功能完美（除了强制执行阴影）。这里唯一的问题是，它是第一次工作。导致：

```
TypeError: Cannot read property 'title' of undefined
    at CKEDITOR.ui.panel.block.CKEDITOR.tools.createClass.$ (http://apitecture.com/dev/cked/ckeditor/ckeditor.js:549:298)
    at new b (http://apitecture.com/dev/cked/ckeditor/ckeditor.js:26:149)
    at Object.CKEDITOR.ui.panel.addBlock (http://apitecture.com/dev/cked/ckeditor/ckeditor.js:547:503)
    at CKEDITOR.ui.floatPanel.CKEDITOR.tools.createClass.proto.addBlock (http://apitecture.com/dev/cked/ckeditor/ckeditor.js:553:409)
    at CKEDITOR.ui.panelButton.CKEDITOR.tools.createClass.proto.createPanel (http://apitecture.com/dev/cked/ckeditor/ckeditor.js:541:333)
    at e [as click] (http://apitecture.com/dev/cked/ckeditor/ckeditor.js:540:304)
    at HTMLAnchorElement.$.on.click (http://apitecture.com/dev/cked/cktest.2.js:64:24)
    at HTMLAnchorElement.v.event.dispatch (http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js:2:38053)
    at HTMLAnchorElement.o.handle.u (http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js:2:33916) 
```

对于随后的每一次点击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T00:21:31.507

你问了一个核心问题:)。过去一年我是 CKEditor 核心开发人员，我不得不花一个小时研究工具栏、面板和按钮。这部分 CKE 的 API 真的很曲折，而且肯定缺乏文档。但最糟糕的部分是它并不是真正可重用的，因为所有部分都是紧密耦合的。

反正。我尝试重用`colorbutton`，我成功了。在没有插件的编辑器上`toolbar`（这很重要）我能够为指定的元素打开它：

![重用颜色按钮](../Images/1603874a62f936fba18cfc9c1f732e96.png)

它甚至似乎可以工作:)（至少在 Chrome 上）。

我很好奇你`toolbar`用自己的基本实现替换插件会有多难（可能没有 a11y 支持和其他繁重的东西）。目前，您的粗体和链接按钮在 Chrome、FF、Opera 和 IE7-9 上都能正常工作（这实际上证明了 CKE 是多么酷，因为它在后台做了很多事情；）。我希望你不会遇到任何严重的麻烦。

一些技巧：

*   你不需要打电话`editor.getCommand().exec()`。有一种`editor.execCommand()`方法。
*   您可能希望根据上下文（插入符号位置）激活/停用按钮。每个命令都有自己的[状态](http://docs.ckeditor.com/#!/api/CKEDITOR.command-property-state)[`selectionChange`](http://docs.ckeditor.com/#!/api/CKEDITOR.editor-event-selectionChange)，并且会根据事件自动更新。

祝你好运。如果您与我们分享您的想法和工作成果，那将会很酷:)。如果有一天我们决定改进这部分 API，反馈将非常有用。

# mysql - 从 taglist 和直接搜索中获取 MySQL 数据

> ID：14236561
> 
> 赞同：0
> 
> 时间：2013-01-09T13:42:10.763
> 
> 标签：mysql, sql

我正在我的数据库中进行搜索。同时我安装了一个标签系统。并非所有内容都已标记，因此我还需要数据库中的“老式”结果。让我说清楚：

```
Table A
+----+----------------------------+
| ID | description                |
+----+----------------------------+
|  0 | horse going bad            |
|  1 | Older Years of Resolutions |
|  2 | The pirate                 |
|  3 | The Wish list              |
|  4 | list that's no list        |
+----+----------------------------+

table TAGS
+----+------------+
| ID | tag        |
+----+------------+
|  0 | list       |
|  1 | knockknock |
+----+------------+

table TAGLINKS
+-------+--------+
| TAGID | JOKEID |
+-------+--------+
|   0   |    2   |
|   0   |    3   |
+-------+--------+ 
```

当我进行此搜索时：

```
select * from A where locate('list',description) 
```

我将从表 A 中获取 ID 3 和 4，这很棒。

当我进行此搜索时：

```
select * from tags
   join taglinks on tagid=tags.id
   join A on A.id=jokeid
where tag='list' 
```

我从表 A 中得到 ID 2 和 3。

我想要返回的是 ID 2、3 和 4。所以两个结果的连接。我试过这个：

```
select * from tags
   join taglinks on tagid=tags.id
   join A on A.id=jokeid or locate('list',description) 
```

它似乎给了我正确的结果，但它太慢了，它阻塞了服务器（实际上这些表比这里的例子大得多）。我想要一个组合查询的原因是我需要像 ORDER BY 和 LIMIT 这样的函数。因此，我希望从上述两个查询中获得组合结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:59:35.713

正如 Eugen Rieck 和 Raheel Shan 指出的那样，答案是联合：

```
select A.* from tags
  join taglinks on tagid=tags.id
  join A on A.id=jokeid
where tag="list"
UNION
select * from A where locate("list",description) 
```

给我 ID 2、3 和 4

# javascript - 在 javascript Alert 上单击 ok 提交表单

> ID：14236563
> 
> 赞同：1
> 
> 时间：2013-01-09T13:42:25.740
> 
> 标签：javascript, jquery

如果用户添加页面上已经存在的元素，我会向用户显示一个警报。我有一个自动完成功能，如果用户选择的项目我会提醒他们该元素已被添加。但是，当我单击警报的确定时，它会提交我不想要的表单。这只发生在特定情况下。当我在自动完成元素上按 enter 时会发生这种情况，如果该元素存在，我会发出警报。然后，如果我在表单提交的警报上单击确定！我有防止输入提交表单的代码。这是我的代码：

```
$(window).keydown(function(event){
    if(event.keyCode == 13) {
        event.preventDefault();
        return false;
    }
});

$(".autocomp_centers").autocomplete({

    serviceUrl:'/suggest_centers',
        maxHeight:400,
        width:252,
        params: {country: $("#country").val() },
        minChars:2,
        onSelect: function(value, data){
            var ids = [];
            $("#sister-centers-list > li").each(function(index, value){
                ids.push($(value).attr('class'));
            });

            if ($.inArray("center-"+data, ids)  == -1){
                $("#hidden-ids").append('<input type="hidden" name="center_ids[]" value="' + data +'" class="center-' + data + '"/>');
                $('#sister-centers-list').append('<li class="center-' + data + '">' + value + ' <a href="#sister-center" class="remove-center-before-save" id="' + data + '">Remove</a></li>');
            }else{
                alert("Sister center has already been added.");
            }               
            $("#sister-search").val("");
        }
}); 
```

这是导轨形式：

```
 <%= form_for @center, :url => center_update_sister_centers_path(@center) do |f| %>

        <div class="field" style="margin-top:10px;">
            <%= f.submit 'Save', :class => "btn purple-button" %>
        </div> 
```

为什么不应该提交表单，我该如何阻止这种情况发生？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:03:37.737

这是关注哪个元素的问题。您必须将您的 keydown 事件放在有问题的输入字段上。或者您`submit()`在表单中添加一个处理程序并做出相应的反应。

在窗口中阻止它为时已晚，因为它已经在焦点位于表单元素上时触发了提交（并且只有在此之后才会冒泡到窗口对象）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:59:55.840

如果您不希望提交表单，除非“某事”，鉴于您已经在使用 jQuery，请将[.submit()](http://api.jquery.com/submit/)处理程序添加到您的表单

# objective-c - iOS mapview 使用搜索栏查看多个地址

> ID：14236565
> 
> 赞同：0
> 
> 时间：2013-01-09T13:42:48.407
> 
> 标签：objective-c, xcode, mkmapview

我对 iOS 完全陌生`MapView`，我刚刚创建了`mapview`outlets `uisearchbar` **，**如果我在搜索栏中输入一个词，PIN 会显示我使用的确切位置，

```
- (void) searchBarSearchButtonClicked:(UISearchBar *)theSearchBar 
{
    NSMutableString *urlString = [NSMutableString stringWithFormat:@"http://maps.google.com/maps/geo?q=%@?output=json",inAddress];

    [urlString setString:[urlString stringByReplacingOccurrencesOfString:@" " withString:@"+"]];

    NSURL *url = [NSURL URLWithString:urlString];

    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];
    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request  delegate:self];

} 
```

最后是缩放我的地图的功能，现在这应该是一件微不足道的事情。

```
- (void) zoomMapAndCenterAtLatitude:(double) latitude andLongitude:(double) longitude
{
    MKCoordinateRegion region;
    region.center.latitude  = latitude;
    region.center.longitude = longitude;

    MKCoordinateSpan span;
    span.latitudeDelta  = .005;
    span.longitudeDelta = .005;
    region.span = span;

    [mapView setRegion:region animated:YES];
} 
```

但是如果有**多个地方与搜索栏关键字匹配，**则必须显示多个**PIN 码。示例：如果我****在华盛顿输入医院，**则必须显示华盛顿附近的医院。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:06:21.087

您在地图上的哪里添加图钉/注释？您可以使用 MKMapView 的 addAnnotations: 方法在地图视图上添加多个注释。

[http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html)

# php - 如何查看我的 msql 查询的状态？

> ID：14236566
> 
> 赞同：0
> 
> 时间：2013-01-09T13:42:50.987
> 
> 标签：php, mysql

我最近通过 chrome 执行了一个 mysql 查询并将其关闭。浏览器究竟是如何使用停止按钮停止 PHP 脚本的？我认为 PHP 是一种服务器端语言，无法通过客户端进行控制。

*更新*我现在知道了`SHOW PROCESSLIST`，但这只会显示哪些线程正在运行。是否有一个 SQL 命令可以用来查看执行的查询的详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:46:05.167

客户端 (Chrome) 与在服务器上执行脚本 (PHP) 无关，而服务器又无法控制数据库进程（MySQL 查询）。

查看您的服务器进程列表以了解一般情况（Apache 进程）。

甚至更好：`SHOW PROCESSLIST;`在 MySQL 控制台上使用来查找长时间运行的查询。您可以使用 退出它`KILL ###ID_OF_QUERY###;`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:46:11.777

不，您不需要保持打开状态。如果您退出正在行驶的汽车，汽车会熄火吗？不。

对不起，这有点流鼻涕，但也不是故意的。

浏览器（在您的情况下为 Chrome）实际上并未运行实际代码。服务器是。因此，一旦执行了指令，关闭浏览器就不再重要了，因为请求已经发送给了服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T13:46:52.847

两个函数对于执行耗时的 php 脚本是必不可少的。它与浏览器无关（正如其他用户已经指出的那样）

查找[ignore_user_abort](http://php.net/manual/en/function.ignore-user-abort.php)和[set_time_limit](http://php.net/manual/en/function.set-time-limit.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T13:51:21.593

无论浏览器关闭，脚本都会继续执行。您可以通过发送响应并允许 php 进程继续来释放浏览器。

```
ignore_user_abort(true);
$response = "Processing!"; 
header("Connection: close");
header("Content-Length: " . mb_strlen($response));
echo $response;
flush();

// Insert your lengthy query here 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T13:54:47.943

来吧伙计们，这是 PHP 101。引自手册：

> 您可以决定是否希望客户端断开连接导致脚本中止。有时，即使没有远程浏览器接收输出，始终让脚本运行完成也很方便。但是，默认行为是在远程客户端断开连接时中止您的脚本。

连接标志设置为 ABORTED 后，执行将在下一个**可滴答**事件处停止 - 当 PHP 尝试将输出刷新到客户端时将检测到

当前的 MySQL 查询将完成执行（因为 PHP 控制的下一个事件直到查询完成后才会发生），但您的脚本不会超过它，除非您明确设置`ignore_user_abort`. 在编写代码时考虑到这一点总是很重要的。

**有两种方法可以解决这个问题**

1.  设置`ignore_user_abort`为`true`调用您的脚本
2.  在所有处理完成之前不要将任何内容打印回客户端 - 因为在刷新输出之前不会检测到连接关闭状态

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T13:55:27.860

答案是视情况而定，正如其他人提到的，您可以使用 show processlist 检查 mysql 服务器上正在运行的内容；

如果是单个查询需要很长时间，它很可能会在浏览器关闭后继续运行。PHP 将已将请求发送到数据库，实际上将等待它完成，而浏览器将等待网络服务器完成构建该 url 上的页面/资源

所以请求是：浏览器 <-> web 服务器 (<-> php ) <-> mysql 在理想世界中，如果用户取消请求，一切都会很好地自行整理，但根据我的经验，遗憾的是，如果链中的一个决定不等待，它正在等待的进程不一定知道，直到它尝试发回响应并失败

# c# - 如何使用实体框架返回多行，并在多个线程上顺序读取它们

> ID：14236572
> 
> 赞同：0
> 
> 时间：2013-01-09T13:43:11.323
> 
> 标签：c#, sql-server, entity-framework, c#-4.0

我有一个时间序列加载到 SQL Server 中，我需要对其进行查询，然后允许多个任务从我的 SProc 中顺序读取结果。

根据我在 google 上的发现，似乎可以执行 SProc 或 LINQ 查询/语句。我目前不熟悉 LINQ（首选 SProc 方法）。一个比另一个有什么优势吗？

执行 SProc 后如何按顺序访问数据？我假设它 SProc 只会改变我的 ObjectContext。如果是这种情况，我是否需要每个任务来计算它所在的行，然后使用该计数器访问 ObjectContext 的每个参数以获得所需的值？

SProc 代码如下：

```
CREATE PROCEDURE [dbo].[DataRetrieval]
    @StartTime      Time(0)     ='00:00:00',
    @EndTime        Time(0)     ='00:00:00',
    @StartDate      Date        ='2012-01-01',
    @EndDate        Date        ='2012-01-01',
    @Location           nchar(6)    ='Scotland'
AS
/*
Author: Hans
Date: 09-01-2013
Purpose: Used to load a large section of data into memory.
*/
SET NOCOUNT ON;
BEGIN

SELECT *
FROM 
    dbo.Data
WHERE
    LOCATION = @Location
    AND ( Date = @StartDate  AND Time >= @StartTime
               OR Date > @StartDate )
    AND ( Date = @EndDate  AND Time < @EndTime
               OR Date < @EndDate )
ORDER BY
    DATE, TIME
END 
```

为 USR 编辑 ...

```
 using (SqlCommand cmd = new SqlCommand())
            {
                cmd.CommandText = "dbo.Data_GetStoredProcedureList";
                cmd.CommandType = System.Data.CommandType.StoredProcedure;
                cmd.CommandTimeout = 10;
                cmd.Connection = connection;

                try
                {
                    connection.Open();

                    using (SqlDataReader reader = cmd.ExecuteReader())
                    {
                        if (reader != null && reader.HasRows)
                        {
                            cancelTask.ThrowIfCancellationRequested();

                            while (reader.Read())
                            {
                                Entity rowData = new Entity();
                                rowData.RoutineName = reader["Routine_Name"].ToString();
                                rowData.ParameterName = reader["Parameter_Name"].ToString();
                                rowData.DataType = reader["Data_Type"].ToString();

                                sProcListRetrieval.Results.Add(rowData);
                            }
                        }
                    }
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:15:27.577

您可以轻松地在内存中缓冲几百万个对象。在 a 中缓冲 T-SQL 的结果`List`并将该列表传递给您的工作线程。

# php - 使用带轮询的 PHP 进行网络间文件传输

> ID：14236575
> 
> 赞同：3
> 
> 时间：2013-01-09T13:43:20.793
> 
> 标签：php, jquery, file-io, network-programming

我正在设计一个基于 Web 的文件管理系统，可以将其概念化为 3 个不同的服务器：

1.  托管系统界面（内置 PHP）的服务器，用户在其中“上传”和管理文件（这里没有存储实际文件，都是元数据）。
2.  一个单独的登台服务器，用于放置文件以进行处理。
3.  文件不被处理时存储文件的文件存储。

所有 3 台服务器都将基于同一内部网络的 *nix。基于 Windows 的用户将使用 Web 界面为服务器 1 上的文件创建初始条目。该文件将从用户的本地驱动器“上传”到服务器 3（如果该文件当前不存在于网络）或内部网络上的另一个网络驱动器。

我的问题与实现我想做的最佳程序化方法有关，即：

当用户从网络上传文件（通过 Web 表单选择源）时，文件将作为**网络间**传输传输到服务器 3 ，而不是通过用户（我相信如果它是作为标准 HTTP 表单上传发送）。我知道我可以在每台机器上设置 FTP 服务器并尝试在位置之间进行 FXP 文件，但这是否比 PHP 在服务器 1（将具有全球网络访问权限）上执行命令以这种方式执行跨网络传输更可取？

第二个问题是我们正在讨论的这些文件非常大，每个文件至少一两个千兆字节，因此传输不会是即时的。我需要一些**轮询传输状态的方法**，并将其返回到 Web 界面，以便用户知道发生了什么。

或者，可以让这个上传与用户的当前视图异步运行，但我仍然需要一种方法来检查传输的状态以确保它完成。

那么，如果使用 FXP 解决方案，如何实现轮询？如果使用 shell 中的文件移动/复制命令，是否可以进行任何形式的轮询？PHP/JQuery 解决方案将是非常可接受的。

我对这个问题的最后一部分与 Windows 网络驱动器映射有关。用户可以映射一个驱动器（并从中选择一个文件），一个任意指定的映射驱动器。他们的 G:\ 可能与 \server4\some\location\therein 有关，但大概任何通过 Web 表单提供给服务器的驱动器路径都只会发送 G:\ 文件路径。**有没有办法确定映射网络驱动器的“真实路径”？**

在处理文件时，可以使用任何解决方案将文件从服务器 3 暂存到服务器 2 - 重点是这些巨型文件不必首先通过用户的本地计算机。

如果您有意见，请告诉我，如果不清楚，我会尽量使这个问题更加连贯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:05:44.603

据我所知（我可能是错的），没有标准的方法可以从浏览器中确定映射驱动器的 UNC 路径。

做到这一点的唯一方法是在网页中进行某种控制。可能是 ActiveX 或闪存。我见过 ActiveX 这样做，但不是 flash。

过去，在设计需要知道用户映射驱动器的 UNC 路径的基于 Web 的系统时，我必须将驱动器转换为存储在服务器端的 UNC 路径。尽管知道哪个驱动器将映射到哪个 UNC 路径，但我确实很奢侈。如果用户可以设置任意路径，那么这显然是行不通的。

好的，因为我拖延并避免真正的工作，我已经考虑了这一点。

我首先要说，我绝不是 Linux 专家，我要描述的系统只是我脑海中浮现的想法，不是你想要放入任何类型的东西的生产。但是，它可能会帮助您走上正确的道路。

所以，你有 3 个服务器，接口服务器（我假设是 LAMP 堆栈？）你的登台服务器和你的文件存储服务器。您还将拥有客户端计算机和网络共享。出于此设计的目的，您的网络共享托管在您的文件存储可以从中 scp 的 nix 盒子上。

您将创建跟踪和存储有关文件等信息的前端网站。这还将包含有关正在复制哪些文件、哪些文件处于暂存状态等的详细信息。

您还需要在文件存储服务器上运行某种服务。我将其称为文件复制服务。这将负责从托管网络共享的服务器中处理文件。

现在，您仍然对如何确定用户文件的实际路径有疑问。如果您可以阻止用户映射他们自己的驱动器并强制他们使用一致的驱动器号，那么您可以在服务器上保留驱动器号到 UNC 路径的转换。如果你不能，那么我会让你想办法。如果您在 Windows 域中，则可以使用组策略强制驱动器映射。

无论如何，系统的过程会像这样工作。

1.  用户进入系统并选择一个文件
2.  接口服务器获取文件路径并调用文件存储服务器上的文件复制服务
3.  文件复制服务连接到托管文件的服务器并启动复制。如果它们都是 nix 盒子，您可以轻松使用 SCP 之类的东西。现在，我还没有真正研究过如何做到这一点，但如果你在复制时无法从 SCP 中获得完整的运行百分比，我会感到非常惊讶。有了这个运行总数，文件复制服务将更新接口服务器上的数据库以及副本的执行方式，以便用户可以从接口服务器看到这一点。

文件复制服务还可用于将文件从文件存储移动到登台服务器。

正如我所说，非常粗略地考虑了。以上方法可行，但这在很大程度上取决于您的系统设置等。

尽管如此，必须有软件可以做到这一点。你看过吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:19:43.700

如果我是正确的，那么这个架构：

![在此处输入图像描述](../Images/2335b5cd57a36163a06f50c80fdf0af5.png)

[放大图片](http://i45.tinypic.com/30cavbs.png)

1.)

[首先让我们解决“服务器间传输”的问题，我将通过NFS](http://en.wikipedia.org/wiki/Network_File_System)将文件系统从服务器 2 和 3 安装到服务器 1 来解决这个问题。

[https://help.ubuntu.com/8.04/serverguide/network-file-system.html](https://help.ubuntu.com/8.04/serverguide/network-file-system.html)

所以PHP可以直接将文件存储在文件系统上，而不需要知道文件到底在哪个服务器上。

```
/etc/exports
of Server 2 + 3
/directory/with/files 192.168.IPofServer.1 (rw,sync)

exportfs -ra

/etc/fstab 
of Server 1
192.168.IPofServer.2:/var/lib/data/server2/ /directory/with/files  nfs rsize=8192,wsize=8192,timeo=14,intr
192.168.IPofServer.3:/var/lib/data/server3/ /directory/with/files  nfs rsize=8192,wsize=8192,timeo=14,intr

mount -a 
```

2.)

获取真正大文件的上传进度，这里有一些可能为 http 上传提供进度条。但是对于恢复功能，您必须使用 Flash 插件。

[http://fineuploader.com/#demo](http://fineuploader.com/#demo)

[https://github.com/valums/file-uploader](https://github.com/valums/file-uploader)

或者您可以使用 apc 扩展由您自己构建它

[http://www.amwsites.com/blog/2011/01/use-a-combination-of-jquery-php-apc-uploadprogress-to-show-progress-bar-during-an-upload/](http://www.amwsites.com/blog/2011/01/use-a-combination-of-jquery-php-apc-uploadprogress-to-show-progress-bar-during-an-upload/)

3.)

让服务器从网络驱动器加载文件。这我会尝试使用 java 小程序来计算出真实的网络路径并将其发送到服务器，以便服务器可以在后台获取文件。但我以前从未有过这样的想法，也没有进一步的信息。

# sql - 基于单列合并唯一行

> ID：14236577
> 
> 赞同：0
> 
> 时间：2013-01-09T13:43:39.450
> 
> 标签：sql, oracle, plsql, oracle10g

我只是想用 Oracle 做一些艰巨的任务。

我有一个包含 3 列的表

```
 ColA   ColB   ColC  ColD
  ---------------------------
    123     N     null   1
    100     Y     AAAA   1
    123     Y     XXXX   2
    100     Y     YYYY   2 
```

我需要更新**ColB**和**ColC**以显示以下结果集。

```
 ColA   ColB  ColC       ColD
  -------------------------------
    123    Y     XXXX         1
    100    Y     AAAA\YYYY    1
    123    Y     XXXX         2
    100    Y     YYYY         2 
```

如果任何唯一记录包含else ，我需要更新**ColB**。`Y``Y``N`

对于**ColC**，我想更新由 a 分隔的值，`\`其中两行都包含一个值，否则只是该值。

我曾尝试使用更新查询来做到这一点，但天哪…………这似乎是不可能的。

任何人都可以提出一个可能的解决方案或什么？

如果需要，我被告知使用 PL/SQL。会这样吗？

**PS：**我还看到了其他看起来相似但还没有任何解决方案的问题。

**编辑**： 我们只需要更新**ColD**所在的那些行`1`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:53:53.740

查询 colB 和 colC 的外观：

```
select 
   colA, 
   case when count(case when colB='Y' then 1 end) > 0 
     then 'Y' 
     else 'N' 
   end as colB,
   LISTAGG(colC, '\') WITHIN GROUP (ORDER BY colA) AS colC
from your_table
group by colA; 
```

从此，您只需拍摄 MERGE 之类的

```
update your_table  a
using query b
on (a.colA=b.colB and colD=2)
when matched then update 
    a.colB=b.colB, 
    a.colC=b.colC 
```

# r - 在 R 中创建函数时循环不起作用

> ID：14236578
> 
> 赞同：2
> 
> 时间：2013-01-09T13:43:40.447
> 
> 标签：r, function, loops

关于如何创建函数并在 R 中循环它，我有一个非常基本的问题。鉴于我的数据：

```
 #create a test df
    a<-c(1,2,3,4,5,6,7)
    b<-c(1,2,4,4,5,6,7)
    c<-c(1,7,1,7,2,5,4)
    d<-c(1,7,1,7,2,5,4)
    df.abcd<-data.frame(a,b,c,d) 
```

我想自动创建箱线图并保存它们的输出。它像这样工作正常：

```
 # Create Boxplots from all columns
    for (x in 1:length(df.abcd)) {
      windows()#opens a graphics window - necesarry for the plots
      boxplot(df.abcd[,x], 
      main=names(df.abcd)[x])#writes colnames as title
      savePlot(filename=paste("E:\\R\\2_outputs\\boxplot_,deparse(x)), type="tiff")
      dev.off()#disables the graphics window
    } 
```

现在我想让我的过程成为一个函数，这样我就可以将它应用到多个数据帧上，而无需重复我的代码。我想到了类似的东西：

```
 #make the above a function and apply it
    test.function<-function(y){
      for (x in 1:length(y)){
      windows()
      boxplot(y[,x], 
      main=names(y)[x])
      savePlot(filename=paste("E:\\R\\2_outputs\\boxplot_,deparse(x)), type="tiff")
      dev.off()
    }}
    test.function(df.abcd) 
```

所以最后这个函数起作用了，但它不再循环了。只有我的数据框的第一列被创建为输出。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:59:21.970

你的代码中有一些错误。（将 x 更改为 y 并添加 " 作为路径名）。这应该有效：

```
test.function<-function(y){
  for (x in 1:length(y)){
    windows()
    boxplot(y[,x],   main=names(y)[x])
    savePlot(filename=paste("E:\\R\\2_outputs\\boxplot_",deparse(x)), type="tiff")
      dev.off()
    }
} 
```

最好做这样的事情（它与@Joris的答案相同，也许直接在这里使用 tiff 更好）

```
test.function<-function(y){
  for (x in 1:length(y)){
    png(paste("E:\\R\\2_outputs\\boxplot_",deparse(x),'.tiff'))
    pp <- boxplot(y[,x],   main=names(y)[x])
    dev.off()
    }
}

test.function(df.abcd) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T14:01:54.877

除了 agstudy 指出的错误之外，还有一种更好的方法来保存该图（请参阅 参考资料`?tiff`）：

```
test.function<-function(y){
  for (x in seq_along(y)){
    tiff(filename = paste("E:\\R\\2_outputs\\boxplot_",deparse(x))
    boxplot(y[,x],   main=names(y)[x])
    dev.off()
    }
} 
```

实际上，我会使用`pdf`or`png`而不是 tiff。这只是浪费磁盘空间。

# c - realloc 不适用于二维指针数组

> ID：14236579
> 
> 赞同：0
> 
> 时间：2013-01-09T13:43:41.233
> 
> 标签：c, generics, pointers, realloc

在下面的代码中，我要求用户给我一些字符串。我制作了一个二维指针 char 数组，以便使用指针字符串读取输入，该指针字符串指向长度为 50 的字符串的开头。我的问题是我在输入第一个字符串后一直崩溃.. 我假设我的问题与重新分配有关。我不习惯它..你能帮忙弄清楚发生了什么吗？我尝试使用 netbeans 进行调试，但没有看到任何有趣的东西，因为它没有为由 realloc 生成的新地址提供反馈！

这是代码：

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

int main()
{
    char *str,**string,buffer[50],temp[2];
    int i,j,q,size,counter;
    size=10;
    string=(char**) calloc(size,sizeof(char*));
    for (i=0; i<size; i++) string[i]=(char*) malloc(50*sizeof(char));
    printf("\nGimme strings, terminate input with x");
    i=0;
    gets(string[i]);
    temp[0]=120;//x
    temp[1]='\0';
    size=0;
    while(strcmp(string[i],temp)!=0)
    {
        string=realloc(string,size*sizeof(char**));
        i++;
        gets(string[i]);
        size++;
        counter++;
    }
return 0;
} 
```

我想用这个 realloc 使指针表更大。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T13:52:31.077

```
 string=realloc(string,size*sizeof(char**));
    i++;
    gets(string[i]);
    size++; 
```

调用`realloc`放大后`string`，新部分不包含有效指针。因此，当您调用 时`gets`，您将向它传递一个您未能初始化的指针。

而且，这`size=0;`完全被打破了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:50:20.743

realloc 不会用零初始化分配的内存，此外您忘记初始化新分配的字符串指针。

考虑在 while 循环内向`i++`上移动。`size++`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T14:27:19.477

## 代码审查

初始化所有变量

```
 char *str = NULL,**string = NULL,buffer[50] = {0},temp[2] = {0};
  int i = 0,j = 0,q = 0,size = 10,counter = 0; 
```

为清楚起见，尽可能不要转换返回的内容`malloc/calloc`并使用 {}

```
string=calloc(size,sizeof(char*));
for (i=0; i<size; i++) 
{ 
  string[i]=malloc(50*sizeof(char));
} 
```

从键盘读取时不要使用`gets`，使用，`fgets()`因为您可以指定要读取的最大大小。

```
printf("\nGimme strings, terminate input with x");
char input[256];
fgets(input,sizeof(input),stdin); // another varname, will explain below 
```

使用较新的编译器，您可以在需要它们的地方声明变量，而不是在函数顶部声明变量。

```
char temp={'x','\0'}; // 120;//x 
```

在这里设置 size=0 似乎有点奇怪

```
size=0; 
```

最好将用户输入的内容保存在单独的缓冲区（输入）中，然后如果它不是“x”，则将其复制到您的字符串数组中，而不是

```
while(strcmp(string[i],temp)!=0)
{
    string=realloc(string,size*sizeof(char**));
    i++;
    gets(string[i]);
    size++;
    counter++;
} 
```

例如

```
while (fgets(input,sizeof(input),stdin) != NULL && input[0] != 'x')
{
   string[i] = calloc(1,strlen(input)+1); // add a byte for \0
   strncpy(string[i],input,strlen(input)-1); // not copying ending \n
   if ( ++i == size ) // a new chunk needed
   {
     char *newstring = realloc((size + 10)*sizeof(char*), string );
     if ( newstring != NULL )
     {
       string = newstring;
       size += 10;
     }
   }
} 
```

# css - “100% with Div”，左边距自动

> ID：14236587
> 
> 赞同：0
> 
> 时间：2013-01-09T13:44:09.453
> 
> 标签：css

![在此处输入图像描述](../Images/789489a2ffb24dc7d87b0e749e2913f2.png)

我有一个页面中间对齐，`margin: 0 auto;`它是页面内容。我需要我的导航也有`margin-left: auto;`而且还需要一直走到屏幕的末尾，即使用户重新调整大小或缩小页面，这个导航也必须真正走到最后。

现在我有这样的东西：http: [//jsfiddle.net/Dc7XK/](http://jsfiddle.net/Dc7XK/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:32:19.800

我建议使用这样的包含 div：

```
<div id="outter">
  <div id="container">
    <div id="navigation">
      lorem ipsum dolor 
    </div>
  </div>
</div> 
```

和CSS：

```
#outter{
  width:100%;
  background-color:#00ff00;
}
#container{
   width:500px;
   margin:auto;
   margin-top:20px;
   background-color:#ff0000;
   padding:20px;
}

#navigation{
  width: 100%;
  background-color: black;
  height:16px;
  color:#fff;
} 
```

将外部 div 设置为 100%。然后有一个包含 div 的宽度，您希望将页边距设置为 auto 的页面。最后，将您的导航设置为容器的 100% 宽度！繁荣。

[http://jsfiddle.net/Dc7XK/2/](http://jsfiddle.net/Dc7XK/2/)

我希望这就是你所追求的！

# asp.net-mvc - 使用 DotNetOpenAuth 实现 Web 应用程序和 Web API 的登录系统

> ID：14236589
> 
> 赞同：0
> 
> 时间：2013-01-09T13:44:10.953
> 
> 标签：asp.net-mvc, oauth, asp.net-web-api, dotnetopenauth

我正在寻找一些关于人们认为最好使用的技术集的指导。我们正在寻求创建一个门户网站，以允许客户使用标准凭据或其社交帐户（Google、Twitter 等）注册/登录。

一旦他们注册并登录到门户，他们就可以访问我们不同的网络应用程序，这些应用程序将根据令牌知道他们是谁以及他们拥有什么权限。我们还需要使用某种 OAuth 机制来保护一组 Web API，因此用户可能会在 Web 应用程序上创建一个帐户，然后创建一个应用程序，该应用程序将为他们提供从自己的访问 API 所需的密钥应用程序。

我们有一个使用 MVC 4 和 DotNetOpenAuth 的基本门户应用程序，它允许用户创建一个帐户并使用用户名和密码或其 Google、Facebook 帐户等登录。API 将是 MVC 4 Web API

理想情况下，整个设置需要尽可能简单，我曾简要研究过使用 Windows Azure 访问控制 (ACS) 来减少一些繁重的工作，但很难说出它们到底在哪里组合在一起。

目前，我们运行 ADFS 2.0 服务器和 WIF 以允许 Web 登录到我们的应用程序，但在集成社交登录和保护 Web API 时，它似乎不是一个理想的选择

我想这可能是两个完全独立的部分，一旦他们登录到门户，我们将如何向他们访问的其他应用程序提供某种声明令牌，以了解用户是谁以及他们被允许做什么。也许 Web API 身份验证/授权是它自己的实体？

谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:36:12.193

我们最终使用了内置的 MVC 4 登录系统，还添加了 JWT 令牌支持，当用户登录时，包含他们的声明的 JWT 令牌存储为 cookie。然后，浏览器会自动在同一域上的我们的站点周围传递，当从 javascript 调用 Web API 时，它会检查浏览器发送的标头中的令牌，并对其进行验证并返回正确的数据或返回未经授权的响应.

它没有涵盖所有的基础，我们还不能让受信任的第三方访问我们的网络服务

# ember.js - Ember 数据多个存储

> ID：14236594
> 
> 赞同：1
> 
> 时间：2013-01-09T13:44:27.823
> 
> 标签：ember.js

所以我才刚刚开始学习ember js。在应用程序 rest api 的情况下，我有命名空间模型。

例子：`App.GlAccount = DS.Model.extend({})`

我需要它遵循的路线是 /gl/account

我想我可以通过创建另一家商店来解决这个问题 `App.GlStore = DS.Store.create({adapter:DS.RestAdapter({namespace:'gl'})}`

问题是模型使用 App.Store ...无论如何告诉模型使用不同的商店？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:04:48.343

根据您的示例，听起来您实际上并不需要拥有多个数据存储。以下应该是您所需要的：

```
App.GlAccount = DS.Model.extend({});
App.GlAccount.reopenClass({
  url: 'gl/account'
}); 
```

如果您的需求更复杂，则可以为您的数据存储使用每种类型的适配器。有关详细信息，请参阅此要点：[https ://gist.github.com/4004913](https://gist.github.com/4004913)

# java - XSLT 提取所有输入可能的 xpath

> ID：14236595
> 
> 赞同：0
> 
> 时间：2013-01-09T13:44:27.463
> 
> 标签：java, xml, api, xslt

我有非常复杂的 xsl（20 000 行 xsl 文件！）文件，它处理输入文件 XML 并生成输出 XML 文件。我想提取所有可能在 xsl 中处理的输入文件 xpath。因此，我想以某种方式提取 XSL 中涉及的所有（输入）xpath。为此，我想找到能够通过 XSL 文件的单次传递给我这些信息的 java API 或工具。有这样的 API 或工具吗？

问候奥雷尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:25:18.297

从技术上讲，这很容易——每个节点都以某种方式处理。我猜您真正想要的是“由样式表中定义的模板专门处理的内容”。

为此，只需将标识模板添加到样式表的最底部 - 任何尚未处理的内容都将由该模板处理，您可以添加`<xsl:message>`指令以输出您需要的任何内容。我相当确定您会找到有关如何生成上下文节点的 XPath 的示例，这已经被问过几次了。

编辑：我忘了提 - 从技术上讲，这会给你你所要求的相反，它会告诉你哪些节点没有被处理。希望您能够使用它来实现相同的目标。

# asp.net - freetextbox 未正确加载

> ID：14236600
> 
> 赞同：0
> 
> 时间：2013-01-09T13:44:40.793
> 
> 标签：asp.net, freetext, freetextbox

我的 ASP.NET 4.5 Web 表单上有 28`freetexboxes`个，第 29 个 freetexbox 没有正确加载。29 号`freetextbox`没有颜色或边框。有人可以告诉我如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T18:42:45.530

我遇到了同样的问题，但它通过更改 css 文件为我解决了。

据我了解，FreeTextBox 是使用该表开发的。我已经评论了网站中使用的主 css 文件中的 margin-top: 和 padding 元素。发表评论后。它按预期工作。

# java - java：一长串条件，怎么办？

> ID：14236601
> 
> 赞同：7
> 
> 时间：2013-01-09T13:44:42.637
> 
> 标签：java, if-statement, switch-statement, conditional-statements

我需要有关在 Java 中应用条件的正确方法的建议。

我有 100 个条件，我必须根据这些条件更改将显示给用户的字符串变量的值。

一个示例条件：`a<5 && (b>0 && c>8) && d>9 || x!=4`

有更多的条件，但变量或多或少是相同的。

我现在正在这样做：

```
 if(condition1)
    else if(condition2)
    else if(condition3)
    ... 
```

一个 switch case 替代方案显然会嵌套在 if-else 中，即

```
if(condition1)
 switch(x)
  {
   case y:
     blah-blah
   }        
else if(condition2)
switch(x)
  {
   case y:
     blah-blah
   }  
else if(condition3)
... 
```

但是我正在寻找一些更优雅的解决方案，例如使用具有多态支持的接口，我可以做些什么来避免代码行或应该是正确的方法。

> - -编辑 - -

* * *

![在此处输入图像描述](../Images/880964085dd418ee5cb49eff162944b6.png)

**我实际上在 android 设备上需要这个。但它在这里更像是一个 java 构造。**

**这是我所拥有的条件的一个小快照。如果有几个通过/失败，将添加更多。这显然需要更多带有/不带有嵌套的 if-else。在那种情况下，处理会变慢。**

> **我现在将消息存储在一个单独的类中，其中包含我保持静态的各种字符串变量，所以如果条件为真，那么我从唯一的类中选择静态变量并显示那个。存储结果消息是否正确。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T13:52:39.450

`HashMap`根据条件输入的数量，您可以通过将所有输入甚至一些相对简单的复杂条件编码为单个值来使用查找表，甚至是：

```
int key = 0;

key |= a?(1):0;
key |= b?(1<<1):0;
key |= (c.size() > 1)?(1<<2):0;
...

String result = table[key]; // Or result = map.get(key); 
```

这种范式具有恒定时间 ( `O(1)`) 复杂性的额外优势，这在某些情况下可能很重要。根据条件的复杂性，您甚至可能在代码路径中平均拥有更少的分支，而不是完整的`if-then-else`意大利面条代码，这可能会导致性能改进。

如果您在问题中添加更多上下文，我们可能会为您提供更多帮助。条件输入来自哪里？他们像什么？

还有更重要的问题：[您要解决的实际问题是什么？](http://mywiki.wooledge.org/XyProblem)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T13:53:55.690

这有很多可能性。在不了解您的域的情况下，我会创建类似的东西（您可以想到更好的名称：P）

```
 public interface UserFriendlyMessageBuilder {
      boolean meetCondition(FooObjectWithArguments args);

      String transform(String rawMessage);
 } 
```

通过这种方式，您可以创建一个`Set`of`UserFriendlyMessageBuilder`并且只对它们进行迭代，以便第一个满足转换原始消息的条件。

```
public class MessageProcessor {
    private final Set<UserFriendlyMessageBuilder> messageBuilders;

    public MessageProcessor(Set<UserFriendlyMessageBuilder> messageBuilders) {
        this.messageBuilders = messageBuilders;
    }

    public String get(FooWithArguments args, String rawMsg) {

        for (UserFriendlyMessageBuilder msgBuilder : messageBuilders) {
            if (msgBuilder.meetCondition(args)) {
                return msgBuilder.transform(rawMsg);
            }
        }
        return rawMsg;    
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T14:11:00.977

在我看来，“您对模块式产品设计的重视程度很低”，这是使用 OOP 语言的主要因素。

例如：如果您有 100 个条件并且您能够制作 4 个模块，那么理论上要选择任何东西，您都需要 26 个条件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T14:41:34.237

这是另一种可能值得考虑的可能性。

进行每个比较，并计算其真值，然后在真值表中查找结果 boolean[]。有很多现有的工作可以[简化你可以应用的真值表](http://en.wikipedia.org/wiki/Karnaugh_map)。我有一个多年前编写的真值表简化[小程序。](http://www.patriciashanahan.com/simplify/)您可能会发现它的源代码很有用。

这样做的代价是进行所有比较，或者至少是使用简化真值表评估表达式所需的比较。优点是用于管理复杂条件组合的有组织的系统。

即使您不直接在代码中使用真值表，也请考虑将编写和简化作为组织代码的一种方式。

# php - 在 PHP PDO 中将 CSV 数据插入 SQLite - 有没有比逐行插入更快的方法？

> ID：14236605
> 
> 赞同：0
> 
> 时间：2013-01-09T13:45:04.600
> 
> 标签：php, sqlite, insert, pdo, bulk

我正在寻找将 CSV 数据插入远程服务器上的 SQLite 数据库的**有效方法。**

我必须使用 PHP。我使用 SQLite3，所以我必须使用 PDO（sqlite_query 不起作用）。

CSV 在服务器端，它有 100000+ 行（50MB+ 文件大小）。

**问题：有没有比这更快的 PHP 方法？**

```
for (/* each row, 100.000 rows */)
{
    $a = 'something';
    $b = 'something';
    $query = $link->prepare("INSERT INTO user_info (a, b) VALUES (?, ?)");
    $query->bindParam(1, $a);
    $query->bindParam(2, $b);
    $query->execute();
} 
```

我的 SQL 文件位于同一目录中。

我已经阅读了有关`.import`命令的信息，但**我不知道如何将它与 PDO 一起使用**（我应该使用`prepare`吗？文件路径应该是什么样子？）。

我是 PDO 和 SQLite 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:13:45.733

```
$link->beginTransaction();

$query = $link->prepare("INSERT INTO user_info (a, b) VALUES (?, ?)");
for (/* each row, 100.000 rows */)
{
//variable stuff + execute query
}

$link->commit(); 
```

这会将写入保持到循环之后 - 快得多。您需要像这样创建 db 对象： $link = new PDO('sqlite:your.db');

编辑：错字/粘贴更正

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:11:03.693

好吧，我不知道是否有可以通过 PDO 驱动程序使用的 SQLite 批量方法，但是您正在为每个循环重新准备相同的语句。

这可能会更有效：

```
$query = $link->prepare("INSERT INTO user_info (a, b) VALUES (?, ?)");
for (/* each row, 100.000 rows */)
{
    $a = 'something';
    $b = 'something';

    $query->bindParam(1, $a);
    $query->bindParam(2, $b);
    $query->execute();
} 
```

# php - 调用 SimpleXML 之前的 XML 数据清理

> ID：14236607
> 
> 赞同：1
> 
> 时间：2013-01-09T13:45:05.990
> 
> 标签：php, simplexml

这应该很简单，但它一直在逃避我。我们有一个用 PHP 编写的 Web 服务，它解析作为 POST 传入的 XML 有效负载，因此 XML 有效负载包含在 $_POST 变量中。

该服务找到看起来像具有 XML 的 POST var，然后使用 simplexml_load_string 加载它。似乎只要数据中有引号，例如**<element>this is a "test"</element>**或此
**<BuyerItemDesc>Customer's Serial Number</BuyerItemDesc>** ，加载就会失败。

我的问题是在调用 simplexml_load_string() 之前清理 POST 中的数据的最佳方法是什么？我知道 PHP 正在对 $_POST vars 中的引号进行转义：

magic_quotes_gpc 开 开
magic_quotes_runtime 关 关

但是这种方法似乎并不能解决它：

```
trim(stripslashes($xmlFromPost)); 
```

**问题中的 XML 片段**

```
<Item>
<POLineNbr>1</POLineNbr>
<BuyerItemId>CDL-BM01</BuyerItemId>
<BuyerItemDesc>Biscuit Miller's, "Blues with a..."</BuyerItemDesc>
<Qty>1</Qty>
<QtyUOM>EA</QtyUOM>
<UCValue>0.00</UCValue>
<UCCurrencyCode>USD</UCCurrencyCode>
<SupplierItemId></SupplierItemId>
<BarCodeId>884502780246</BarCodeId>
<BarCodeType>GTIN-12</BarCodeType> 
```

**在 $_POST** if(isset($_POST)){

```
foreach($_POST as $k=>$v){

    if(preg_match('/^\<\?xml/',trim($v))){

        $postXMLPayload = trim(stripslashes($v));
        break;
    }

  }
}

libxml_use_internal_errors(true);
$xml = simplexml_load_string($postXMLPayload); 
```

**错误**
标签 BuyerItemDesc 行 79中 的
数据
过早
结束

**更新** 这是由 XML 元素中的未经处理的数据引起的。为了纠正这个问题，我添加了 htmlspecialchars()：

```
$payload = htmlspecialchars(stripslashes(trim($postXMLPayload))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:33:20.227

这是由 XML 元素中未经处理的数据引起的。为了纠正这个问题，我添加了 htmlspecialchars()：

```
$payload = htmlspecialchars(stripslashes(trim($postXMLPayload))); 
```

# android - SupportMapFragment 内存泄漏？

> ID：14236610
> 
> 赞同：0
> 
> 时间：2013-01-09T13:45:18.707
> 
> 标签：android, android-maps-v2

所以我有一个带有以下代码的简单活动：

```
public class MainActivity extends FragmentActivity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            SupportMapFragment fragment = (SupportMapFragment) getSupportFragmentManager().findFragmentByTag("tag");

            if(fragment == null) {
                fragment = new SupportMapFragment();

                getSupportFragmentManager().beginTransaction()
                        .replace(android.R.id.content, fragment, "tag").commit();
            }
        }
    } 
```

当我继续旋转屏幕时，我可以看到 DDMS 中的内存堆正在增加。即使我做了几次 GC，内存也永远不会恢复到正常水平。我做错了什么还是谷歌刚刚发布了他们的新地图 api 并出现了严重的内存泄漏？

在 HTC Desire 上测试 - Android 2.2.2

编辑：也在三星 Galaxy S3 上进行了测试 - Android 4.1.2

编辑：没有给 OOM，但在我在地图上移动之前堆没有倒塌等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:51:05.307

一定是不同的东西。我有一个地图应用程序，但它不这样做 - 但我运行 android 2.3.3 (API 10+)

# mysql - 如何将长名称作为表的字段？

> ID：14236614
> 
> 赞同：0
> 
> 时间：2013-01-09T13:45:33.563
> 
> 标签：mysql

如何在 mysql 中将长文本作为表字段名称？

这是我尝试过的：

```
CREATE TABLE IF NOT EXISTS surveyForm_8(
    surveyForm_8_id INT NOT NULL AUTO_INCREMENT, 
    PRIMARY KEY(surveyForm_8_id), 
    survey_form_id VARCHAR(255), 
    submitted_by VARCHAR(15), 
    submitted_on TIMESTAMP, 
    'How_to_change_the_way_of_road?' VARCHAR(255)
) 
```

但我得到了这个错误：

```
#1059 error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:54:56.370

试试这个，你应该使用`符号作为列名

```
 CREATE TABLE IF NOT EXISTS surveyForm_8(surveyForm_8_id INT NOT NULL AUTO_INCREMENT,
     PRIMARY KEY(surveyForm_8_id), survey_form_id varchar(255) ,submitted_by varchar(15),
     submitted_on timestamp, `How_to_change_the_way_of_road?` varchar(255)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:00:22.080

请参阅[http://dev.mysql.com/doc/refman/5.5/en/identifiers.html](http://dev.mysql.com/doc/refman/5.5/en/identifiers.html)了解有效的表和字段名称。

基本上，双引号仅适用于[ANSI_QUOTES](http://dev.mysql.com/doc/refman/5.5/en/server-sql-mode.html#sqlmode_ansi_quotes)模式。默认是使用 `backticks` 来引用。此外，表/字段名称的最大长度为 64 个字符。

# .net - F# 管道和 LINQ

> ID：14236616
> 
> 赞同：1
> 
> 时间：2013-01-09T13:45:43.460
> 
> 标签：.net, linq, f#, pipeline

我开始学习F#。我发现很难从 OO 编程中改变主意。我想知道 F# 开发人员如何编写以下内容：

**“传统”C#**

```
public List<List<string>> Parse(string csvData){
    var matrix = new List<List<string>>();
    foreach(var line in csvData.Split(Environment.NewLine.ToArray(), StringSplitOptions.None)){
        var currentLine = new List<string>();
        foreach(var cell in line.Split(','){
            currentLine.Add(cell);
        }
        matrix.Add(currentLine);
    }
    return matrix;
} 
```

**“功能”C#**

```
public List<List<string>> Parse(string csvData){
    return csvData.Split(Environment.NewLine.ToArray(), StringSplitOptions.None).Select(x => x.Split(',').ToList()).ToList();
} 
```

问题是：*下面的代码是否正确？*

**F＃**

```
let Parse(csvData:string) = 
    csvData.Split(Environment.NewLine.ToArray(), StringSplitOptions.None).ToList()
    |> Seq.map(fun x -> x.Split(',').ToList()) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T14:10:07.473

你的翻译在我看来不错。在 C# 中使用扩展方法（例如`foo.Select(...)`）大致相当于使用管道和 F# 函数 from或模块`List`，具体取决于您使用的集合类型（例如）。`Seq``Array``foo |> Seq.map (...)`

使用 F# 中的 LINQ 扩展方法并将它们与 F# 结构混合使用是非常好的，但我只会在没有相应的 F# 函数时这样做，所以我可能会避免`ToArray()`并`ToList()`在示例中写：

```
open System

let Parse(csvData:string) = 
    // You can pass the result of `Split` (an array) directly to `Seq.map`
    csvData.Split(Environment.NewLine.ToCharArray(), StringSplitOptions.None)
    // If you do not want to get sequence of arrays (but a sequence of F# lists)
    // you can convert the result using `Seq.toList`, but I think working with
    // arrays will be actually easier when processing CSV data
    |> Seq.map(fun x -> x.Split(',') |> Seq.toList) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T14:11:40.363

您的解决方案中有一些不是很 F# 的东西：

*   mutable在 F# 中`List`被命名为[ResizeArray](http://msdn.microsoft.com/en-us/library/ee353447.aspx)，它们作为内置集合（包括 Array、List、Seq）没有很好的支持。
*   您通常不需要在 F# 中使用 LINQ，Array、List 和 Seq 模块绰绰有余。
*   点 (.) 语法不能很好地与管道运算符配合使用。

将返回类型更改为`string [] []`，您可以使用辅助函数编写更简洁的代码：

```
let split (delim: string) (str: string) =
    str.Split([|delim|], StringSplitOptions.RemoveEmptyEntries)

let parse (csvData: string) = 
    csvData
    |> split Environment.NewLine
    |> Array.map (split ",") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T15:37:19.683

此页面上的各种解决方案之间存在细微差别。例如，您的 C# 解决方案和 pad 的解决方案是急切的，但您的 F# 版本和 Tomas 的解决方案是懒惰的。你的和 pad 在 上拆分`Environment.NewLine`，但 Tomas 在*任何*字符上拆分`NewLine`（我猜你想要后者，因为你调用了接受的重载`StringSplitOptions`）。也许这些很重要；也许不吧。

无论如何，这是对pad解决方案的不同看法。

```
let split (delims: char[]) (str: string) =
  str.Split(delims, StringSplitOptions.RemoveEmptyEntries)

let parse csvData =
  let nl = Environment.NewLine.ToCharArray()
  [ for x in split nl csvData -> split [|','|] x ] 
```

# ffmpeg - 如何为 MacOSX 安装 libtheora (ffmpeg)

> ID：14236617
> 
> 赞同：1
> 
> 时间：2013-01-09T13:45:46.977
> 
> 标签：ffmpeg, ogg-theora

我的 ffmpeg 版本缺少“libtheora”编解码器，我下载了这个版本的“libtheora”以使其工作。[http://www.theora.org/downloads/](http://www.theora.org/downloads/) 问题是解压zip文件后不知道怎么安装。自述文件没有提供很多细节。我只运行make吗？以前有人这样做过吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-12T14:46:21.727

[使用Homebrew](http://brew.sh/ "家酿")非常简单：

```
brew install ffmpeg2theora 
```

但实际上它不允许您在此之后转换为 OGG/OGV 格式。最终真正帮助我将 MP4 转换为 OGV 格式的是编译带有*libtheora*支持的*ffmpeg 。*详细解释可以在这里找到[ffmpeg Mac OSX 编译指南](https://trac.ffmpeg.org/wiki/MacOSXCompilationGuide)。在此之后，我终于能够运行[以下命令](http://trac.ffmpeg.org/wiki/TheoraVorbisEncodingGuide)：

 *```
ffmpeg -i input.mkv -codec:v libtheora -qscale:v 7 -codec:a libvorbis -qscale:a 5 output.ogv 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-31T23:53:17.540

您可以使用 brew 为 ffmpeg 安装 libtheora

```
brew install theora 
```

要在 ffmpeg 中使用它，您应该重新编译 ffmpeg。解决方案来源：[https ://trac.ffmpeg.org/wiki/CompilationGuide/MacOSX](https://trac.ffmpeg.org/wiki/CompilationGuide/MacOSX)

```
brew install automake fdk-aac git lame libass libtool libvorbis libvpx opus sdl shtool texi2html theora wget x264 xvid yasm

git clone git://source.ffmpeg.org/ffmpeg.git ffmpeg
cd ffmpeg
./configure  --prefix=/usr/local --enable-gpl --enable-nonfree --enable-libass --enable-libfdk-aac --enable-libfreetype --enable-libmp3lame --enable-libopus --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libx264 --enable-libxvid
make && sudo make install 
```

至于我，它就像魔术一样工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-12T15:38:26.870

在阅读了长长的邮件列表并因为人们粗鲁而感到难过之后，我终于为我解决了这个问题。似乎有必要用`--extra-ldflags`和指定库路径`--extra-cflags`。所以就我而言，它看起来像这样：

```
./configure  --prefix=/usr/local --enable-gpl --enable-nonfree \
--enable-libass --enable-libfdk-aac --enable-libfreetype \
--enable-libopus --enable-libtheora --enable-libvorbis \
--enable-libvpx --enable-libx264 --enable-libxvid
--extra-ldflags="-L/usr/local/Cellar/lame/3.99.5/lib \
-L/usr/local/Cellar/libogg/1.3.2/lib \
-L/usr/local/Cellar/theora/1.1.1/lib \
-L/usr/local/Cellar/libvorbis/1.3.5/lib \
-L/usr/local/Cellar/xvid/1.3.4/lib" \
--extra-cflags="-I/usr/local/Cellar/lame/3.99.5/include \
-I/usr/local/Cellar/libogg/1.3.2/include \
-I/usr/local/Cellar/theora/1.1.1/include \
-I/usr/local/Cellar/libvorbis/1.3.5/include \
-I/usr/local/Cellar/xvid/1.3.4/include" 
```

根据您所需的库和版本，这当然可能会有所不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T13:51:46.720

您是否尝试过 Macports (http://www.macports.org/) 来安装 ffmped 或 libtheora？如果你没有它...下载安装它。然后进入你的控制台并执行这个：

```
sudo port install libtheora 
```*

# ruby-on-rails - FriendlyId 和参数的问题

> ID：14236618
> 
> 赞同：1
> 
> 时间：2013-01-09T13:45:52.093
> 
> 标签：ruby-on-rails, parameters, friendly-id

我正在尝试将我的网址从whatever.com/users/1 更改为whatever.com/users/jamie.Surname 或whatever.com/users/jamie-Surname

我很想最终更改为whatever.com/jamie.surname 或whatever.com/jamie-surname，但我认为最好从简单开始。

所以我安装了friendly_id gem，从简单的开始我试着让它路由到我的名字；

```
class User < ActiveRecord::Base
      extend FriendlyId
      friendly_id :first_name 
```

**但是，当我尝试访问该网址时，我收到了错误；**

ActiveRecord::RecordNotFound in UsersController#show

找不到没有 ID 的用户

应用程序跟踪 | 框架跟踪 | 完整跟踪 app/controllers/users_controller.rb:22:in `show'

请求参数：{"id"=>"jamie"}

**这一行是我的 users_controller 中抛出错误的方法**

```
def show
    @user = User.find(params[:id])
        respond_to do |format|
        format.html 
        format.json { render json: @user }
    end
end 
```

我似乎无法找到解决此问题的方法。

任何帮助或建议/推动正确方向将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:53:27.050

这个 asciiccast 可以帮助你 -

[http://railscasts.com/episodes/314-pretty-urls-with-friendlyid?view=asciicast](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid?view=asciicast)

另请注意，重要的是要注意您使用的是哪个 FriendlyId 版本。

检查此问题：

[https://github.com/norman/friendly_id/issues/146](https://github.com/norman/friendly_id/issues/146)

# linux - 使用 tee 命令将输出重定向到不存在的目录中的文件

> ID：14236621
> 
> 赞同：13
> 
> 时间：2013-01-09T13:46:04.013
> 
> 标签：linux, shell, unix, tee

我正在尝试使用 tee 命令将输出重定向到文件，并且我希望在尚未创建的目录中创建文件。

```
date | tee new_dir/new_file 
```

当 new_dir 不存在时， tee 命令失败说

> tee: new_dir/new_file: 没有这样的文件或目录

如果我在运行 tee 命令之前创建 new_dir ，那么它可以正常工作，但是由于某种原因我不想手动创建 new_dir ，是否可以使用 tee 命令创建 new_dir ？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-09T13:53:32.773

不，您必须在运行之前创建目录`tee`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-09T13:57:01.287

替换`tee`为为您创建目录的函数：

```
tee() { mkdir -p ${1%/*} && command tee "$@"; } 
```

如果您希望函数在使用简单文件名调用时工作：

```
tee() { if test "$1" != "${1%/*}"; then mkdir -p ${1%/*}; fi &&
   command tee "$1"; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T14:02:08.890

```
mkdir ./new_dir && date | tee ./new_dir/new_file 
```

由于它是`tee`命令，因此它同时向 the`new_file`和 to写入`stdout`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-05T18:33:14.873

嗯……经过一些实验，我发现了一些有趣的东西。

首先，让我们尝试触摸一些文件：

```
touch ~/.lein/profiles.clj 
```

它工作正常。但是让我们在引号中使用相同的东西：

```
touch "~/.lein/profiles.clj" # => touch: cannot touch ‘~/.lein/profiles.clj’: No such file or directory 
```

所以，对于我的 bash 函数：

```
append_to_file() {
  echo $2 | tee -a $1
} 
```

之后我改变了它的电话：

```
append_to_file '~/.lein/projects.clj' '{:user {:plugins [[lein-exec "0.3.1"]]}}' 
```

给它（第一个参数不带引号）：

```
append_to_file ~/.lein/projects.clj '{:users {:plugins [[lein-exec "0.3.1"]]}}' 
```

一切都很好。

更新

这种情况认为`.lein`是现有目录。

# php - 检查 PHP 中的真实数组标识？

> ID：14236626
> 
> 赞同：2
> 
> 时间：2013-01-09T13:46:11.510
> 
> 标签：php, arrays, identity

有没有办法检查表示数组或对象的两个变量的*身份*（即完全相同的对象，在内存中只占一个位置）？（即，当修改由一个变量命名的对象时，可以在另一个变量的值中看到更改，因为它们指向同一个对象/数组）

例如，`===`运算符检查两个数组是否“相同”，因为它们的元素和它们的顺序相等（相反`==`，它不检查数组的顺序，所以 for `$a = [11, 22]; $b = [1 => 22; 0 => 11];`, `$a == $b`is `true`but `$a === $b`is `false`（因为在后一种情况下排序不同，数组是有序映射）。

我想象的`are_identical`函数会像这样工作（有点像`is`Python 中的）：

```
$a = [11, 22];
$b = [11, 22];
are_identical($a, $b); # => false

$x = [11, 22];
$y = &$x;
are_identical($x, $y); # => true 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:48:55.460

你不能用 PHP 中的数组来做到这一点；但是，您可以更改要使用的代码`ArrayObject`并使用运算符进行比较`===`。

在 PHP 中，`===`只有当对象是同一个类的同一个实例（即它们引用内存中的同一个对象）时，运算符才会返回 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:03:55.520

PHP 中的对象可以通过使用三等号来测试它们是否是同一个实例：

```
if($obj1 === $obj2) {....} 
```

但是，数组不是 PHP 中的对象，因此三等号技巧对它们的作用与对对象的作用不同。

也就是说，这个 php 手册页也可能会有所帮助：[Spotting References](http://php.net/manual/en/language.references.spot.php)。注释中有几个函数声称能够检测到相互引用的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:14:37.153

好的，谢谢 Artem L 和 SDC：是的，其他人也问过这个问题，但形式不同，所以我不知道要找什么。

这段代码似乎满足了我的`are_identical`功能的目的（否定）：

```
function is_reference_to(&$a, &$b)
{
    if ($a !== $b) return false;

    $temp = $a;
    $checkval = $a === null ? "" : null;
    $a = $checkval;

    if ($b === $checkval) {
        $a = $temp;
        return true;
    } else {
        $a = $temp;
        return false;
    }        
} 
```

# xml - 如何从 Pentaho Kettle 中的 url 获取文件名？

> ID：14236629
> 
> 赞同：0
> 
> 时间：2013-01-09T13:46:22.413
> 
> 标签：xml, filenames, pentaho

我正在尝试获取 url 上存在的文件名。我正在使用“将文件名添加到结果”。我把网址放在文件/文件夹上：http: [//aaa.ddd.com/bbb/ccc/](http://aaa.ddd.com/bbb/ccc/)和通配符.*xml$。在此文件夹上存在一个文件 20130109-002124.xml 但是当我从结果中获取文件时，文件名参数的值为“ccc”。每天文件都有不同的名称，所以我试图读取 .xml 文件名。我怎样才能读到这些名字？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T00:45:35.957

在 PDI 中，无论何时指定通配符或正则表达式，都必须记住它是**JAVA**正则表达式。

这意味着要指定以 xml 结尾的任何内容，您必须使用类似的表达式`.*\.xml`

这是与 PDI 混淆的常见原因。

我不知道您是否可以仅枚举网站上的文件。从来没有试过。

# maven - Richfaces Maven 依赖 JBoss EAP 6.0

> ID：14236632
> 
> 赞同：0
> 
> 时间：2013-01-09T13:46:43.503
> 
> 标签：maven, jboss, richfaces, pom.xml

在`pom.xml`中，我如何提及我的应用程序需要使用`RichFaces`JBoss EAP 6.0 中提供的实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:42:29.277

RichFaces 捆绑为[WFK](http://gb.redhat.com/products/jbossenterprisemiddleware/web-framework-kit/)产品的一部分，而不是 EAP 的一部分。有关设置 pom.xml 以使用 WFK 存储库的详细信息，请参阅 WFK [Maven_Repository_User_Guide 。](https://access.redhat.com/knowledge/docs/en-US/JBoss_Web_Framework_Kit/2/html/Maven_Repository_User_Guide/)然后，[像往常一样定义您的 RichFaces 依赖](https://community.jboss.org/wiki/HowToAddRichFaces4xToMavenBasedProject)项，但使用 Richfaces 的 WFK 版本：`4.2.3.Final-redhat-1`。

或者，使用[RichFaces kitchensink 原型](http://search.maven.org/#artifactdetails%7Corg.richfaces.archetypes%7Crichfaces-archetype-kitchensink%7C4.2.3.Final-2%7Cmaven-archetype)设置您的项目，指定 enterprise=true。这将设置一个包含所有正确 WFK/EAP 依赖项的 RichFaces maven 项目。

# python - 如何在 Flask 中为 Jinja 设置默认的浮点格式？

> ID：14236633
> 
> 赞同：0
> 
> 时间：2013-01-09T13:46:42.743
> 
> 标签：python, format, flask, jinja2

我在 Flask 中使用 Jinja，我想让所有的浮点数`123.45`在我的所有 html 页面中默认看起来像，而不是在小数点后保留太多数字。我不想在模板文件中一一格式化每个浮点数。我该怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-03-31T13:40:20.447

您可以使用[上下文处理器](https://flask.palletsprojects.com/en/1.1.x/templating/#context-processors)为此创建自定义过滤器。

我有烧瓶官方文档的副本来解决这个问题。

```
@app.context_processor
def utility_processor():
    def format_price(amount):
        return u'{0:.2f}{1}'.format(amount)
    return dict(format_price=format_price) 
```

您可以使用此过滤器传递所有值

```
{{ format_price(0.33) }} 
```

希望回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T17:17:14.317

您还可以考虑使用十进制模块：

[http://docs.python.org/2/library/decimal.html](http://docs.python.org/2/library/decimal.html)

这是从上述文档中获取的一个简单示例：

```
>>> from decimal import *
>>> getcontext().prec = 2
>>> rounded_num = Decimal(1) / Decimal(7)
>>> rounded_num
Decimal('0.14') 
```

通过使用这个模块，应用程序中的所有浮点数都将很好地转换为小数点后两位数。

# oracle - 当条件引用控制时，在 ODBC 错误中查询链接的 Oracle 表

> ID：14236636
> 
> 赞同：1
> 
> 时间：2013-01-09T13:46:56.303
> 
> 标签：oracle, ms-access, odbc

使用硬编码日期作为条件（如`#12/06/2012#`）查询 Oracle 链接表时，查询返回数据的时间不到 1 秒。
当我用 替换日期条件时`Forms!Formx!ctlRunDate`，查询需要很长时间并最终达到 ODBC 超时而没有提供结果。
我尝试使用 CDate() 或在查询参数中键入表达式而没有任何改进。
有什么建议吗？
我正在使用 Oracle ODBC。如果我对 Oracle 的 Microsoft 驱动程序做同样的事情，没问题！

# java - Java 缓冲输出流什么都不做！没有错误！没有消息！怎么了？

> ID：14236637
> 
> 赞同：4
> 
> 时间：2013-01-09T13:46:57.843
> 
> 标签：java

我正在从 Oracle 文档和课程中学习 Java，我到了这一部分（文件 I/O、流等），我这里有一些代码不起作用，我不知道为什么。我没有收到任何错误或警告，什么也没有，`DataOutputStream`根本不会写入文件。

我尝试删除它`BufferedOutputStream`并且它以这种方式工作，所以我猜测问题出在缓冲流上，但我不知道为什么。

也许缺少了什么。我真的被困住了。

```
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.EOFException;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;

public class Principal {

    static final String dataFile = "invoicedata.txt";

    static final double[] prices = { 19.99, 9.99, 15.99, 3.99, 4.99 };
    static final int[] units = { 12, 8, 13, 29, 50 };
    static final String[] descs = {
        "Java T-shirt",
        "Java Mug",
        "Duke Juggling Dolls",
        "Java Pin",
        "Java Key Chain"
    };

    public static void main(String[] args) throws IOException {     
        //DECLARATION
        DataOutputStream out = null;
        DataInputStream in = null;

        try {
            out = new DataOutputStream(new BufferedOutputStream(new FileOutputStream(dataFile)));
            in = new DataInputStream(new BufferedInputStream(new FileInputStream(dataFile)));

            //WRITING???
            for (int i = 0; i < prices.length; i ++) {
                out.writeDouble(prices[i]);
                out.writeInt(units[i]);
                out.writeUTF(descs[i]);
            }

        } catch (Exception e) {
            System.err.println("ERROR!");
            e.printStackTrace();
        }

        double price;
        int unit;
        String desc;
        double total = 0.0;

        //READING
        try {
            while (true) {
                price = in.readDouble();
                unit = in.readInt();
                desc = in.readUTF();
                System.out.format("You ordered %d" + " units of %s at $%.2f%n",
                    unit, desc, price);
                total += unit * price;
            }
        } catch (EOFException e) {
            System.err.println("END OF FILE!");
        }       
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:54:31.907

您需要在代码中添加 out.close() 以在所有内容都写入文件后关闭 DataOutputStream。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:48:52.290

您忘记调用`close()`您的`out`.

```
 try {
        out = new DataOutputStream(new FileOutputStream(dataFile));
        in = new DataInputStream(new FileInputStream(dataFile));

        //WRITING???
        for (int i = 0; i < prices.length; i ++) {
            out.writeDouble(prices[i]);
            out.writeInt(units[i]);
            out.writeUTF(descs[i]);
        }
        out.close();
    } catch (Exception e) {
        System.err.println("ERROR!");
        e.printStackTrace();
    } 
```

您还应该关闭您的`in`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T13:49:11.930

如果你不关闭（）文件，文件的结尾可能会被截断。如果文件足够小，这可能意味着它将是空的。

如果您使用自定义对象而不是数组，则代码可能如下所示

```
public static void main(String... ignored) throws IOException {
    List<Inventory> inventories = new ArrayList<>();
    inventories.add(new Inventory("Java T-shirt", 19.99, 12));
    inventories.add(new Inventory("Java Mug", 9.99, 8));

    String dataFile = "invoice-data.dat";
    DataOutputStream out = new DataOutputStream(new BufferedOutputStream(new FileOutputStream(dataFile)));
    out.writeInt(inventories.size());
    for (Inventory inventory : inventories)
        inventory.write(out);
    out.close();

    DataInputStream in = new DataInputStream(new BufferedInputStream(new FileInputStream(dataFile)));
    int count = in.readInt();
    for (int i = 0; i < count; i++) {
        System.out.println(new Inventory(in));
    }
    in.close();
}

static class Inventory {
    final String name;
    final double price;
    int units;

    Inventory(String name, double price, int units) {
        this.name = name;
        this.price = price;
        this.units = units;
    }

    Inventory(DataInput in) throws IOException {
        this.name = in.readUTF();
        this.price = in.readDouble();
        this.units = in.readInt();
    }

    public void write(DataOutput out) throws IOException {
        out.writeUTF(name);
        out.writeDouble(price);
        out.writeInt(units);
    }

    @Override
    public String toString() {
        return "name='" + name + '\'' +
                ", price=" + price +
                ", units=" + units;
    }
} 
```

印刷

```
name='Java T-shirt', price=19.99, units=12
name='Java Mug', price=9.99, units=8 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T13:49:44.897

当进程终止时，非托管资源将被释放。对于 InputStreams 这很好。对于 OutputStreams，您可能会丢失缓冲数据，因此您应该

> 冲洗（）或关闭（）

退出程序之前的流。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T13:49:07.630

将其添加到写作部分的末尾：

```
 out.close(); 
```

这到阅读部分的结尾；

```
 in.close(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-30T16:39:10.400

也可能发生您想要写入/读取封闭流的情况。Java 根本不会通知您，没有错误，没有消息，什么都没有。因此，请确保您写入/读取打开的流。

# javascript - AJAX：提交表单而不刷新页面只能工作一次

> ID：14236638
> 
> 赞同：1
> 
> 时间：2013-01-09T13:47:00.093
> 
> 标签：javascript, jquery, ajax

我正在使用 AJAX 在后台提交表单，而不刷新页面。我遇到的问题是我只能提交一次表单。提交一次后， on('submit') 功能不再起作用，并且我没有收到任何错误。这完全违背了使用 AJAX 提交表单的目的：/

```
 $(document).on('submit', '#myForm', function(e) {
                $.post('mail.php', $(this).serialize(), function (data) {
                    //SUCCESS
                    $('.successORfail').html(data);
                     setTimeout(function(){
                      $(".successORfail").fadeOut("slow", function () {
                        $(".successORfail").remove();
                      });
                    }, 4500);

                }).error(function() {
                    alert("Fatal Error: mail.php not found!");
                });
                e.preventDefault();
            }); 
```

我想知道是否有人遇到过类似的问题或知道如何解决这个问题？我希望能够多次提交表单，如果需要，在每次提交后更改表单输入值。

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:51:38.293

您确定没有发生 AJAX 请求吗？看起来您正在`.successORfail`从页面中删除元素，因此在后续调用中没有任何内容可以附加。

检查您的控制台，您可能会注意到每次都发生 ajax 调用。

尝试将您的 setTimeout 更改为：

```
var msgEl = $(".successORfail");
setTimeout(function() {
    msgEl.fadeOut("slow", function () {
        msgEl.empty().show();
    });
}, 4500); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:51:42.577

您的成功事件处理程序：

```
$('.successORfail').html(data);
setTimeout(function () {
  $(".successORfail").fadeOut("slow", function () {
    $(".successORfail").remove();
  });
}, 4500); 
```

在元素 ( ) 中设置内容`.successORfail`，然后*删除*该元素。下次您提交表单时，会获得成功的响应，并且执行该功能时，该元素不再存在以设置内容，因此您不会看到任何更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T13:55:38.337

与其删除元素，不如删除`.hide()`它，以便下次可以填充它。你`.show()`每次都需要它。

```
 $(document).on('submit', '#myForm', function(e) {
            $.post('mail.php', $(this).serialize(), function (data) {
                //SUCCESS
                $('.successORfail').html(data).show(); //<-- show

                 setTimeout(function(){
                  $(".successORfail").fadeOut("slow", function () {
                    $(this).hide(); //<-- hide
                  });
                }, 4500);

            }).error(function() {
                alert("Fatal Error: mail.php not found!");
            });
            e.preventDefault();
        }); 
```

同样在`fadeOut()`函数中，您可以访问元素`$(this)`而不是根据类名重新选择它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T13:51:41.177

你能添加一些 HTML 片段吗？如果不了解您的 html 结构，很难提供帮助，因为如果您通过 $('.successORfail').html(data); 替换表单；侦听器不会重新绑定到表单。您还应该返回 FALSE，因为表单数据是通过 javascript 发送的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T13:51:56.207

好吧，您似乎将结果附加到`$('.successORfail').html(data);`并删除它。取出以下内容，它应该可以多次工作......

```
$('.successORfail').remove(); 
```

没有那个元素，就无法做出改变。

# html - 在动力学JS中的层之间交换

> ID：14236639
> 
> 赞同：2
> 
> 时间：2013-01-09T13:47:00.063
> 
> 标签：html, html5-canvas, draw, layer, kineticjs

我试图将图层视为页面 - 即我在一个页面上绘制，然后翻页并在另一个页面上绘制，每次存储前一页以防用户返回它。

在我看来，这可以翻译为：

*   创建`current_layer`全局指针。
*   每次`newPage()`调用，将旧层存储在一个数组中，并覆盖指针

    `layer_array.push(current_layer); //store old layer`

    `current_layer = new Kinetic.Layer(); //overwrite with a new`

*   然后将新对象添加到将`current_layer`它们绑定到图层的对象中，无论它们是否被绘制。（例如`current_layer.add(myCircle)`）

*   检索页面只是简单地更新指向数组中请求层的指针，然后重新绘制页面。附加到图层的所有子节点也将被绘制

    `current_layer = layer_array[num-1]; //num is Page 2 e.g`

    `current_layer.draw()`

然而什么都没有发生！我可以创建新页面并适当地存储它们 - 但我无法再次检索它们......

这是我的完整代码（我的浏览器在使用 jsfiddle 时出现问题）：

```
<html>

  <head>
    <script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.3.0.min.js"></script>
    <script>
      //Global
      var stage; //canvas
      var layer_array = [];
      var current_page; //pointer to current layer

      window.onload = function() {
        stage = new Kinetic.Stage({
          container: 'container',
          width: 400,
          height: 400
        });

        //Add initial page to stage to draw on
        newPage()

      };

      //--- Functions ----//

        function newPage(){
            if(!current_page){
                console.log("current page undefined");

            } else {
                layer_array.push(current_page);
//              stage.remove(current_page); 

                //Nope, not working.
                stage.removeChildren();        
                //Works, but I think it unbinds all objects
                // from their specific layers...
//              stage.draw()

                console.log("Stored layer and removed it from stage");
            }
            current_page = new Kinetic.Layer();
            console.log("Currently on page:"+(layer_array.length+1));

            stage.add(current_page);
            stage.draw();

        }

        function gotoPage(num){
            stage.removeChildren()
            stage.draw()

            num = num-1;
            if(num >= 0) {
                current_page = layer_array[num];
                console.log("Now on page"+(num+1));

                stage.add(current_page);
                stage.draw();
            }

        }

        function addCircletoCurrentPage() 
        {
            var rand = Math.floor(3+(Math.random()*10));

            var obj = new Kinetic.Circle({
                x: rand*16, y: rand*16,
                radius: rand,
                fill: 'red'
            })

            var imagelayer = current_page;
            imagelayer.add(obj);
            imagelayer.draw();
        }
    </script>
  </head>

  <body>
    <div id="container"></div>
    <button onclick="addCircletoCurrentPage()" >click</button>
    <button onclick="newPage()" >new</button>
    <button onclick="gotoPage(1)" >page1</button>
    <button onclick="gotoPage(2)" >page2</button>
    <button onclick="gotoPage(3)" >page3</button>

  </body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:38:47.797

这是一个有趣的问题。我认为这解决了你的麻烦：http: [//jsfiddle.net/LRNHk/3/](http://jsfiddle.net/LRNHk/3/)

基本上，您不应该 remove() 或 removeChildren() ，因为您可能会取消引用它们。

相反，您应该使用：

```
 layer.hide();  and  layer.show(); 
```

这样，您就可以保持一切平等，并获得快速的绘图性能。所以你的转到页面功能应该是这样的：

```
 function gotoPage(num){
       for(var i=0; i<layer_array.length; i++) {
            layer_array[i].hide();
       }
          layer_array[num].show();
          console.log("Currently on page:"+(num));
          console.log("Current layer: " + layer_array[num].getName());
          stage.draw();
    } 
```

我还修改了您的其他功能，您可以在 jsfiddle 中看到这些功能。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T15:13:24.403

Okay I changed my approach and instead of swapping layers (100x easier and makes more sense), I instead opted for serializing the entire stage and loading it back.

It works, but it really shouldn't have to be like this dammit

```
 //Global
  var stage; //canvas
  var layer_array = [];
  var current_page; //pointer to current layer
  var page_num = 0;

  window.onload = function() {
    stage = new Kinetic.Stage({
      container: 'container',
      width: 400,
      height: 400
    });

    //Add initial page to stage to draw on
    newPage()

  };

  //--- Functions ----//

    function newPage(){
        if(!current_page){
            console.log("current page undefined");

        } else {
            savePage(page_num)
            stage.removeChildren()

            console.log("Stored layer and removed it from stage");
        }
        current_page = new Kinetic.Layer();
        console.log("Currently on page:"+(layer_array.length+1));

        stage.add(current_page);
        stage.draw();

        page_num ++;

    }

    function savePage(num){
        if( (num-1) >=0){
            var store = stage.toJSON();
            layer_array[num-1] = store;
            console.log("Stored page:"+num)
        }
    }

    function gotoPage(num){
        savePage(page_num);

        stage.removeChildren()

        if(num-1 >= 0) {
            var load = layer_array[num-1];
            document.getElementById('container').innerHTML = ""; //blank
            stage = Kinetic.Node.create(load, 'container');

            var images = stage.get(".image");

            for(i=0;i<images.length;i++)
            {  
            //function to induce scope
                (function() {
                    var image = images[i];
                    var imageObj = new Image();
                    imageObj.onload = function() {
                        image.setImage(imageObj);
                        current_page.draw();
                    };
                    imageObj.src = image.attrs.src;
                })();
            }
            stage.draw();
            page_num =num //update page

        }
    }

    function addCircletoCurrentPage() 
    {
        var rand = Math.floor(3+(Math.random()*10));

        var obj = new Kinetic.Circle({
            x: rand*16, y: rand*16, name: "image",
            radius: rand,
            fill: 'red'
        })

        var imagelayer = current_page;
        imagelayer.add(obj);
        imagelayer.draw();
    } 
```

# c - fscanf 从文本文件中读取二维双精度数组的问题

> ID：14236642
> 
> 赞同：0
> 
> 时间：2013-01-09T13:47:12.210
> 
> 标签：c, file, matrix, scanf

我在 C 中使用 fscanf 时遇到了一些麻烦。我已经将一个随机矩阵写入一个文件，现在正试图将文本文件中的数据读入另一个矩阵。它似乎可以很好地读取行数和列数，但它为数据值返回零。我完全被卡住了，所以任何帮助将不胜感激！

我的 MATRIX 结构被声明为

```
typedef struct matrep {
      unsigned rows, columns;
      double *data;
      }MATRIX; 
```

我的文件如下所示：

```
rows = 5, columns = 10

  -99.75  12.72  -61.34  61.75  17.00  -4.03  -29.94  79.19  64.57  49.32
  -65.18  71.79  42.10   2.71  -39.20  -97.00  -81.72  -27.11  -70.54  -66.82
  97.71  -10.86  -76.18  -99.07  -98.22  -24.42   6.33  14.24  20.35  21.43
  -66.75  32.61  -9.84  -29.58  -88.59  21.54  56.66  60.52   3.98  -39.61
  75.19  45.34  91.18  85.14   7.87  -71.53  -7.58  -52.93  72.45  -58.08 
```

这是我的`matrix_read`功能：

```
MATRIX matrix_read(char file_name[15])
{
int i,j, m, n;
MATRIX B;
FILE *filep;
double *ptr = NULL;
double x;

if((filep = fopen("matrixA.txt", "r"))==NULL)
{
printf("\nFailed to open File.\n");
        }
if(fscanf(filep, "\n\nrows = %u, columns = %u\n\n", &m, &n) != 2)
{
    printf( "Failed to read dimensions\n");
    B.data = 0;
    B.columns = 0;
    B.rows = 0;
}
B.data = (double *)malloc(B.columns*B.rows*sizeof(double));
if(B.data ==0)
   {
    printf("Failed to allocate memory");
    }

fscanf(filep,"\n\nrows = %u, columns = %u\n\n",&m,&n);
rewind(filep);

ptr = B.data;

for (i = 0; i < m; i++)
{
    for (j = 0; j < n; j++)
    {

        if (fscanf(filep, "  %5.2lf", &x) != 1)
       {
           printf("Failed to read element [ %d,%d ]\n", i, j);
           B.data = 0;
           B.columns = 0;
           B.rows = 0;
        }
        printf("%5.2lf\t", x);
        *ptr++ = x; 
        }
      }

 B.rows=m;
 B.columns=n;
 return B;
 fclose(filep);
 free(ptr);
 } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:35:39.303

您有几个问题，其中一个由@simonc 指出，另一个可能的问题是：您在读取 ​​filep 中的列和行后倒带

`rewind()`将与流关联的位置指示器设置为文件的开头，您正在再次阅读`rows = 5, columns = 10`

最后：

```
B.data = (double *)malloc(B.columns*B.rows*sizeof(double)); /* Don't cast malloc */
if(B.data ==0)
{
  printf("Failed to allocate memory");
  /* You have to return or exit here */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T11:34:55.920

正如[Alter Mann](https://stackoverflow.com/users/1606345/alter-mann)所说，放弃第二个

```
fscanf(filep,"\n\nrows = %u, columns = %u\n\n",&m,&n); 
```

以及

```
rewind(filep); 
```

此外，`" %5.2lf"`不是有效的 scanf 转换规范（您可以阅读有关此的手册） -`"%lf"`改为使用。

# python - MacPorts 没有在 virtualenv 的正确位置安装 Python 模块

> ID：14236644
> 
> 赞同：0
> 
> 时间：2013-01-09T13:47:23.280
> 
> 标签：python, installation, virtualenv, macports

我似乎无法找到我的确切情况，如果有的话，请指给我一份副本。

我正在使用 virtualenv 和 python 并尝试安装一个模块，但无论哪个版本的 python 'which python' 提供了 MacPorts 似乎都将模块安装在默认 macports 的默认 macports python 位置 (/opt/local/share)蟒蛇（/opt/local/bin）。

当 virtualenv 被激活时，'which python' 在 ~/Documents/.../bin/python 中给出了一个 python 版本（它是一个 python 版本 2.7.3），这是正确的。

如果 virtualenv 未激活，我尝试切换到系统 python 版本（Apple 默认安装版本）或默认 macports 版本，即 /opt/local/bin（也是 2.7.3 版本）。

安装后，在python解释器中我可以在virtualenv未激活时成功导入我的模块，但是在virtualenv激活时python找不到模块。

我不能使用 pip 或 easy_install 来安装这个模块 (PyQt4) b/c 有一个已知的错误，它们会出错。

如何让 macports 安装在我的 virtualenv 的正确位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:47:53.940

macports 仅将 python 模块安装在与 python 解释器直接对应的 site-packages 目录中。这样做是为了允许安装多个不同的解释器。

Macports 也安装在 root 用户下，而不是您自己的帐户下。因此，它无法了解由用户环境中的设置控制的 virtualenv 设置。

您需要做的是安装复杂的模块，例如 PyQT4 和 virtualenv，然后从中创建您的 virtualenv，即使用`--system-site-packages`

# c# - 如何在 XmlWriter 上为特定元素节点设置 Indent 属性

> ID：14236649
> 
> 赞同：0
> 
> 时间：2013-01-09T13:47:37.693
> 
> 标签：c#, xmlwriter

抱歉，如果标题令人困惑，这就是我想要实现的目标。我有一个正在创建并传递给方法的 XmlWriter 对象

```
public static void foo(XmlWriter xw)
{
   xw.WriteStartElement("root");
} 
```

此时 XmlWriter 被实例化，并且 Xml 声明已经被写入。现在，在写入根元素之后，我需要将 XmlWriter 上的 Indent 属性设置为 true（在创建 XmlWriter 时将其设置为 false）。像这样的东西

```
public static void foo(XmlWriter xw)
{
   xw.WriteStartElement("root");
   // xw.Settings.Indent = true; - I know this won't work
   // continue writing elements...
} 
```

那时找不到如何设置缩进的方法。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:29:48.403

使用 XmlTextWriter。然后，您可以将 Indentation 属性设置为要缩进的空格数。[http://msdn.microsoft.com/en-us/library/system.xml.xmltextwriter.indentation.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmltextwriter.indentation.aspx)

要使用 Indent 属性，您不能有混合内容 [http://msdn.microsoft.com/en-us/library/system.xml.xmlwritersettings.indent.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlwritersettings.indent.aspx)

“只要元素不包含混合内容，元素就会缩进。一旦调用 WriteString 或 WriteWhitespace 方法写出混合元素内容，XmlWriter 就会停止缩进。一旦混合内容元素关闭，缩进就会恢复。”

# java - Java：为 ThreadPool 中的线程设置超时

> ID：14236654
> 
> 赞同：9
> 
> 时间：2013-01-09T13:47:45.100
> 
> 标签：java, multithreading, timeout

我想为在线程池中执行的线程设置超时。目前我有以下代码：

```
ExecutorService executor = Executors.newFixedThreadPool(8);
for(List<String> l: partition) {            
    Runnable worker = new WorkerThread(l);
    executor.execute(worker);
}       

executor.shutdown();
while (!executor.isTerminated()) {

} 
```

该代码只是将一个大对象列表拆分为子列表，并在单个线程中处理这些子列表。但这不是重点。

我想给线程池中的每个线程一个超时。对于池中只有一个线程，我找到了以下解决方案：

```
Future<?> future = null;

for (List<String> l : partition) {
    Runnable worker = new WorkerThread(l);
    future = executor.submit(worker);
}

try {
    System.out.println("Started..");
    System.out.println(future.get(3, TimeUnit.SECONDS));
    System.out.println("Finished!");
} catch (TimeoutException e) {
    System.out.println("Terminated!");
} 
```

但这不适用于一个以上的线程。也许我必须将每个线程放在一个`List<Future>`列表中并遍历该列表并为每个`future`对象设置超时？

有什么建议么？

使用 CountDownLatch 后编辑：

```
CountDownLatch doneSignal = new CountDownLatch(partition.size());
List<Future<?>> tasks = new ArrayList<Future<?>>();
ExecutorService executor = Executors.newFixedThreadPool(8);
for (List<String> l : partition) {
    Runnable worker = new WorkerThread(l);
    tasks.add(executor.submit(doneSignal, worker));
}

doneSignal.await(1, TimeUnit.SECONDS);
if (doneSignal.getCount() > 0) {
    for (Future<?> fut : tasks) {
    if (!fut.isDone()) {
        System.out.println("Task " + fut + " has not finshed!");
        //fut.cancel(true) Maybe we can interrupt a thread this way?!
    }
    }
} 
```

到目前为止效果很好。

那么下一个问题是如何中断一个超时的线程？我尝试`fut.cancel(true)`在工作线程的一些关键循环中添加以下构造：

```
if(Thread.interrupted()) {
    System.out.println("!!Thread -> " + Thread.currentThread().getName() + " INTERRUPTED!!");
        return;
} 
```

所以工作线程在超时后被“杀死”。这是一个好的解决方案吗？

此外：是否可以获取接口超时的线程名称`Future`？目前我必须在`Thread.interrupted()`构造的 if 条件中打印出名称。

感谢帮助！

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:06:55.680

你见过这个吗？[ExecutorService.invokeAll](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection,long,java.util.concurrent.TimeUnit%29)

这应该正是您想要的：调用一组工作人员，如果花费时间过长，让他们超时。

评论后编辑 - （新想法）：您可以使用[CountDownLatch](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)等待任务完成和超时`await(long timeout, TimeUnit unit)`！然后，您甚至可以执行 shutdownNow 并查看哪些任务花费了太长时间......

编辑2：

为了更清楚：

1.  完成后，让每个 Worker 倒计时一个 CountDownLatch。
2.  `await`在所述锁存器上有超时的主执行线程中。
3.  当该调用返回时，您可以检查锁存器的计数以查看是否有超时命中（如果它>0）。
4.  a) count = 0，所有任务按时完成。b）如果没有，循环 Futures 并检查它们的`isDone`. 您不必在 ExecutorService 上调用 shutdown。
5.  如果您不再需要 Executor，请调用 shutdown。

注意：Worker 可以在超时和调用 Future 的 isDone() 之间完成。

# c# - 垂直包装物品（固定长度和水平位置）

> ID：14236656
> 
> 赞同：2
> 
> 时间：2013-01-09T13:47:54.523
> 
> 标签：c#, algorithm

假设我有一些项目，它们有一个定义的`length`和`horizontal position`（都是常量）：

```
1 : A      
2 :     B
3 :  CC
4 :  DDD   (item 4 start at position 1, length = 3)
5 :    EE  
6 : F 
```

我想将它们垂直包装，从而形成一个高度尽可能小的矩形。

到现在为止，我有一些非常简单的算法，可以循环遍历项目并逐行检查是否可以将它们放置在该行中（这意味着不会与其他东西发生冲突）。有时，它完美地工作（偶然），但有时，它会导致非最佳解决方案。

这是上面示例的内容（逐步）：

```
 A      |  A   B  |  ACC B  |  ACC B  |  ACC B  |  ACC B  | 
                                DDD   |   DDD   |  FDDD   |
                                            EE  |     EE  | 
```

虽然最佳解决方案是：

```
ADDDB 
FCCEE 
```

注意：我发现`length`在应用算法之前先按项目（降序）对项目进行排序，可以得到更好的结果（但仍然不完美）。

有没有什么算法可以在合理的时间内给我最优的解决方案？（尝试所有可能性是不可行的）

* * *

编辑：这是一个使用排序技巧不起作用的示例，并且使用 TylerOhlsen 建议的方法不起作用（除非我不明白他的答案）：

```
1 : AA
2 :    BBB
3 :   CCC 
4 :  DD 
```

会给：

```
AA BBB
  CCC 
 DD 
```

最佳解决方案：

```
 DDBBB
AACCC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:37:49.553

只是吐口水（从我的头上掉下来，只是伪代码）。该算法循环遍历当前行的位置，并尝试找到放置在该位置的最佳项目，然后在该行完成时移动到下一行。当所有项目都被使用时，算法完成。

该算法性能的关键是创建一种有效的方法，在特定位置找到最长的项目。这可以通过创建一个字典（或哈希表）来完成：键=位置，值=在该位置的项目的排序列表（按长度降序排序）。然后在某个位置找到最长的项目就像从该哈希表中按位置查找项目列表并从该列表中弹出顶部项目一样简单。

```
int cursorRow = 0;
int cursorPosition = 0;
int maxRowLength = 5;

List<Item> items = //fill with item list
Item[][] result = new Item[][];

while (items.Count() > 0)
(
    Item item = FindLongestItemAtPosition(cursorPosition);
    if (item != null)
    {
        result[cursorRow][cursorPosition] = item;
        items.Remove(item);
        cursorPosition += item.Length;
    }
    else //No items remain with this position
    {
        cursorPosition++;
    }

    if (cursorPosition == maxRowLength)
    {
        cursorPosition = 0;
        cursorRow++;
    }
} 
```

这应该导致示例 1 的以下步骤（在每个循环的开头）......

```
 Row=0  |  Row=0  |  Row=0  |  Row=1  |  Row=1  |  Row=1  |  Row=2  |
 Pos=0  |  Pos=1  |  Pos=4  |  Pos=0  |  Pos=1  |  Pos=3  |  Pos=0  |

        |  A      |  ADDD   |  ADDDB  |  ADDDB  |  ADDDB  |  ADDDB  | 
                                         F      |  FCC    |  FCCEE  | 
```

这应该导致示例 2 的以下步骤（在每个循环的开头）......

```
 Row=0  |  Row=0   |  Row=0   |  Row=1   |  Row=1   |  Row=1   |  Row=2   |
 Pos=0  |  Pos=2   |  Pos=4   |  Pos=0   |  Pos=1   |  Pos=3   |  Pos=0   |

        |  AA      |  AACCC   |  AACCC   |  AACCC   |  AACCC   |  AACCC   |
                                                         DD    |   DDBBB  | 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-09T13:57:45.013

这是一个经典的背包问题。正如@amit 所说，它是NP-Complete。最有效的解决方案是利用动态规划来解决。

维基百科页面是一个很好的开始。我从来没有实现过任何算法来解决这个问题，但我研究了它与扫雷游戏的关系，这也是 NP-Complete。

[维基百科：背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)

# android - 一个内有多个Arraylist

> ID：14236657
> 
> 赞同：1
> 
> 时间：2013-01-09T13:47:58.703
> 
> 标签：android, database, arraylist, expandablelistview

我在我的应用程序中使用了一个自定义的可扩展列表视图，我在一个问题上停止了。我试图在每个组中插入查询的所有结果，为此我使用了 2 个查询..一个用于父级，另一个用于子级。

所以...父查询的结果返回一个 String[] ，其中包含我通常放在父组列表中的值。

当我尝试查询孩子的itens时..我使用父结果作为获取值的参数。我遇到的问题是仅显示最后一项是子行上的列表。

我试图将 String[parent number] 中的每个结果放在一个 Arraylist 上，我分别放在他的父 Array 上......但只有最后一个查询显示在所有父组中。

我认为查询会覆盖前一个并添加这个而不是全部添加。搜索一些主题我发现了像多维数组这样的东西..那是我必须使用的吗？

这是我停止的部分代码

```
//String[] with the result from the parent query 
String[] teste = consulta.NomeArtista(busca);
//custom array for parent
ArrayList<ItemExpandable> ArrayItem = new ArrayList<ItemExpandable>();
    //custom array for child
    ArrayList<DataAdapter.ItemLista> ArraySubItem = null;
    //using the parent size  for create all the parent group
    for (int i = 0; i < teste.length; i++) {
    //Create a array with all the field belong to parent 
        ArraySubItem = consulta.consultaArtista(teste[i]);
        ItemExpandable itens = new ItemExpandable();
        itens.setTitle(teste[i]);
        itens.setArrayFilhos(ArraySubItem);
        Log.v(String.valueOf(ArraySubItem),"2");
        ArrayItem.add(itens);
    }
    //My custom ExpListview with the 2 arraylist
    listagem.setAdapter(new CustomBaseAdapter(artista.this.getActivity(), ArrayItem, ArraySubItem)); 
```

# php - 我想通过他们的电子邮件地址从 Facebook 获取所有朋友列表？

> ID：14236658
> 
> 赞同：0
> 
> 时间：2013-01-09T13:48:00.493
> 
> 标签：php

> **可能重复：**
> [如何获取 Facebook 好友的电子邮件？](https://stackoverflow.com/questions/4331666/how-to-get-facebook-friends-email)

我想从 facebook 获取所有的朋友列表。谁能告诉我获取 facebook 朋友列表的方法。我正在开发一个网站，我希望有一个选项可以通过他们的电子邮件地址邀请我的 facebook 朋友。

# treeview - 如何获取通过用户在 JavaFx 2 中单击而扩展的当前 TreeItem 引用？

> ID：14236666
> 
> 赞同：5
> 
> 时间：2013-01-09T13:48:30.073
> 
> 标签：treeview, javafx-2

在一个 JavaFx 2 案例中，我有一个 TreeView，它最初在一定深度折叠。我的目标是，当用户单击扩展一个节点时，将发生修改该树项属性/值的操作。

问题是我不确定如何引用该树项。我在每个 treeitem 扩展属性上添加了一个侦听器，但是在那个 ChangeListner 方法中，我只能获取旧/新值，不能引用更改事件起源的 treeitem。

有人可以帮忙吗？非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T15:56:14.727

是的当然。试试这个：

```
treeItem.expandedProperty().addListener(new ChangeListener<Boolean>() {
    @Override
    public void changed(ObservableValue<? extends Boolean> observable, Boolean oldValue, Boolean newValue) {
        System.out.println("newValue = " + newValue);
        BooleanProperty bb = (BooleanProperty) observable;
        System.out.println("bb.getBean() = " + bb.getBean());
        TreeItem t = (TreeItem) bb.getBean();
        // Do whatever with t
    }
}); 
```

# c# - 检查两个列表的最快方法 相等

> ID：14236672
> 
> 赞同：11
> 
> 时间：2013-01-09T13:48:48.123
> 
> 标签：c#, .net

我有两个列表

`ListA<Emp>`两者`ListB<Emp>` 都有 1000 条记录。

`Emp`是员工类的对象。下面是我的`Employee`课

```
public class Employee
{
    int ID = 0;
    string Name = String.Empty;
    string Dept = String.Empty;
    string Address = String.Empty;
    int Age = 0;
    string Email = String.Empty;
} 
```

我想验证两个列表是否相等。Emp 对象可以按不同的顺序放置。此外，可能有几个 Emp 对象在两个列表中具有完全相同的信息。我也必须验证这些。

我尝试对列表进行排序并使用比较`SequenceEqual`

```
Enumerable.SequenceEqual(ListA.OrderBy(s => s), ListB.OrderBy(s => s) 
```

我得到以下错误

```
At least one object must implement IComparable.
Exception Stack trace is as below 

   at System.Collections.Comparer.Compare(Object a, Object b)
   at System.Collections.Generic.ObjectComparer`1.Compare(T x, T y)
   at System.Linq.EnumerableSorter`2.CompareKeys(Int32 index1, Int32 index2)
   at System.Linq.EnumerableSorter`1.QuickSort(Int32[] map, Int32 left, Int32 right)
   at System.Linq.EnumerableSorter`1.Sort(TElement[] elements, Int32 count)
   at System.Linq.OrderedEnumerable`1.<GetEnumerator>d__0.MoveNext()
   at System.Linq.Enumerable.SequenceEqual[TSource](IEnumerable`1 first, IEnumerable`1 second, IEqualityComparer`1 comparer)
   at System.Linq.Enumerable.SequenceEqual[TSource](IEnumerable`1 first, IEnumerable`1 second) 
```

我该如何实现呢？另外，如果你们能提供给我最快的方法会更好，因为 List 中的对象数量可能会增长到 1000 万。谢谢你的帮助 ！

**编辑：**每个员工都必须在两个列表中，顺序无关紧要。但是，如果 ListA 包含 5 次相同的员工对象（这意味着一些重复的条目），而 ListB 包含 4 次员工对象，则 ListA 和 ListB 不相等。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T14:00:10.513

您可以使用`SequenceEqual` 自定义`IEqualityComparer<Employee>`：

```
class EmployeeComparer : IEqualityComparer<Employee>
{
    public bool Equals(Employee x, Employee y)
    {
        if (x == null || y == null) return false;

        bool equals = x.ID==y.ID && x.Name == y.Name && x.Dept == y.Dept 
            && x.Address == y.Address && x.Age == y.Age && x.Email == y.Email;
        return equals;
    }

    public int GetHashCode(Employee obj)
    {
        if (obj == null) return int.MinValue;

        int hash = 19;
        hash = hash + obj.ID.GetHashCode();
        hash = hash + obj.Name.GetHashCode();
        hash = hash + obj.Dept.GetHashCode();
        hash = hash + obj.Address.GetHashCode();
        hash = hash + obj.Age.GetHashCode();
        hash = hash + obj.Email.GetHashCode();
        return hash;
    }
} 
```

现在很简单：

```
listA.SequenceEqual(ListB, new EmployeeComparer()); 
```

如果订单不重要并且您只想知道所有员工是否都在两个列表中，您可以使用`HashSet<Employee>.SetEquals`来确定两个列表是否包含相同的人：

```
var empComparer =  new EmployeeComparer();
bool bothEqual = new HashSet<Employee>(ListA, empComparer)
      .SetEquals(new HashSet<Employee>(ListB, empComparer)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T14:10:42.043

最佳复杂度是 O(N) 以下使用 HashSet 实现：

实现 GetHashCode 和 Equals 的类：

```
public class Employee
{
    public int ID = 0;
    public string Name = String.Empty;
    public string Dept = String.Empty;
    public string Address = String.Empty;
    public int Age = 0;
    public string Email = String.Empty;

    public override int GetHashCode()
    {
        return
            ID.GetHashCode() ^
            (Name ?? String.Empty).GetHashCode() ^
            (Dept ?? String.Empty).GetHashCode() ^
            (Address ?? String.Empty).GetHashCode() ^
            Age.GetHashCode() ^
            (Email ?? String.Empty).GetHashCode()
            ;
    }
    public override bool Equals(object obj)
    {
        Employee other = obj as Employee;
        if (obj == null)
            return false;

        return ID == other.ID &&
                Name == other.Name &&
                Dept == other.Dept &&
                Address == other.Address &&
                Age == other.Age &&
                Email == other.Email;
    }
} 
```

比较列表的功能：

```
public static bool CompareLists(List<Employee> list1, List<Employee> list2)
{
    if (list1 == null || list2 == null)
        return list1 == list2;

    if (list1.Count != list2.Count)
        return false;
    Dictionary<Employee, int> hash = new Dictionary<Employee, int>();
    foreach (Employee employee in list1)
    {
        if (hash.ContainsKey(employee))
        {
            hash[employee]++;
        }
        else
        {
            hash.Add(employee, 1);
        }
    }

    foreach (Employee employee in list2)
    {
        if (!hash.ContainsKey(employee) || hash[employee] == 0)
        {
            return false;
        }
        hash[employee]--;
    }

    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T13:58:15.703

如果列表中的数字将变得巨大（10M），您可能必须考虑并行化查找以获得可接受的查询时间。

考虑使用[PLINQ](http://msdn.microsoft.com/en-us/library/dd460688.aspx)。

更清楚你所说的“平等”是什么意思会很好。等效性检查有多复杂？您是在检查*对象*是否相同或对象*值*是否相同？

另一个考虑因素是这个；如果元素的数量会变得很大，您是否可以考虑将此检查从 .NET 移到您的数据库中 - 也许作为存储过程？您可能会发现它在那里执行效率更高。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T14:07:23.203

将列表简化为标量类型：int、string、....

```
L1.Select(x => x.K).ToArray() 
```

使用 except 方法

```
L1.Select(x => x.K).ToArray().Except(L1.Select(x => x.K).ToArray()) 
```

如果结果集的计数为 0，则列表等于

```
L1.Select(x => x.K).ToArray().Except(L1.Select(x => x.K).ToArray()).Count() 
```

全部一起

```
public class Program {
    public static void Main(String[] args) {
        List<O> L1 = new List<O>{
            new O {K = 1, V = "abcd"},
            new O {K = 2, V = "efgh"}
        };
        List<O> L2 = new List<O>{
            new O {K = 1, V = "abcd"}
        };
        List<O> L3 = new List<O>{
            new O {K = 1, V = "abcd"},
            new O {K = 3, V = "ijkl"}
        };
        List<O> L4 = new List<O>{
            new O {K = 2, V = "efgh"},
            new O {K = 1, V = "abcd"}

        };

        Console.WriteLine(L1.Select(x => x.K).ToArray().Except(L1.Select(x => x.K).ToArray()).Count());
        Console.WriteLine(L1.Select(x => x.K).ToArray().Except(L2.Select(x => x.K).ToArray()).Count());
        Console.WriteLine(L1.Select(x => x.K).ToArray().Except(L3.Select(x => x.K).ToArray()).Count());
        Console.WriteLine(L1.Select(x => x.K).ToArray().Except(L4.Select(x => x.K).ToArray()).Count());

    }
} 

public class O {
    public int K { get; set; }
    public String V { get; set; }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T14:08:32.777

正是它所说的。
在 Employee 类上实现 IComparable
还需要重写 Equals
由于可能有大量对 GetHashCode 的调用将其保存并仅计算更改。
经过测试

[IComparable 接口](http://msdn.microsoft.com/en-us/library/System.IComparable.aspx)

```
public MainWindow()
{
    InitializeComponent();
    List<Person> PLa = new List<Person>();
    List<Person> PLb = new List<Person>();

    PLa.Add(new Person { Age = 3, Name = "Jim"});
    PLa.Add(new Person { Age = 2, Name = "Jimmmy" });
    PLa.Add(new Person { Age = 1, Name = "Jim" });

    PLb.Add(new Person { Age = 1, Name = "Jim" });
    PLb.Add(new Person { Age = 3, Name = "Jim" });
    PLb.Add(new Person { Age = 2, Name = "Jimmmy" });

    System.Diagnostics.Debug.WriteLine(ListSameIgnoreOrder(PLa, PLb));

}

public bool ListSameIgnoreOrder(List<Person> PLa, List<Person> PLb)
{
    if (PLa.Count != PLb.Count) return false;
    //PLa.Sort();
    //PLb.Sort();
    return Enumerable.SequenceEqual(PLa.OrderBy(s => s), PLb.OrderBy(s => s));
    //for (int i = 0; i < PLa.Count; i++)
    //{
    //    System.Diagnostics.Debug.WriteLine(
    //        PLa[i].Age.ToString() + " " + PLb[i].Age.ToString() + " " +
    //        PLa[i].Name + " " + PLb[i].Name);
    //    if (!PLa[i].Equals(PLb[i])) return false;
    //}
    //return true;
}

public class Person : object, IComparable
{
    private int age = 0;
    private string name = string.Empty;
    private int hash;

    public int Age
    {
        get { return age; }
        set 
        {
            if (age == value) return;
            age = value;
            CalcHash();
        }
    }
    public string Name
    {
        get { return name; }
        set 
        { 
            if (name == value) return;
            name = value;
            CalcHash();
        }
    }

    public override bool Equals(Object obj)
    {
        //Check for null and compare run-time types.
        if (obj == null || !(obj is Person)) return false;
        Person f = (Person)obj;
        if (f.Age != this.Age) return false;
        return (string.Compare(f.name, this.name) == 0);
    }

    private void CalcHash()
    {
        hash = Age.GetHashCode() ^
            (Name ?? String.Empty).GetHashCode();
    }

    public override int GetHashCode()
    {
        return hash;
        //return age ^ name.GetHashCode();
    }

    public int CompareTo(object obj)
    {
        if (obj == null) return 1;

        Person otherPerson = obj as Person;
        if (otherPerson != null)
        {
            if (otherPerson.Age > this.Age) return -1;
            if (otherPerson.Age < this.Age) return 1;
            // compare all properties like above
            return string.Compare(otherPerson.name, this.name);
        }
        else
            throw new ArgumentException("Object is not a Person");
    }
    public Person() { CalcHash(); }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-22T07:09:26.480

这行得通。

```
public bool EqualList(Dictionary<int, string> a, Dictionary<int, string> b)
{
    if (a.Count == b.Count)
    {
        bool rs = false;
        foreach (var i in a)
        {
            if (b.ContainsKey(i.Key))
            {
                rs = true;
            }
            else
            {
                rs = false;
                break;
            }
        }
        return rs;
    }
    else
    {
        return false;
    } 
```

用法：

```
if(EqualList(List<A>.ToDictionary(k => k.Key, k => k.Value), List<B>.ToDictionary(k => k.Key, k => k.Value)){

}else{

} 
```

# c# - 使用 C# webdriver 无法单击属于 IFrame 的按钮

> ID：14236674
> 
> 赞同：2
> 
> 时间：2013-01-09T13:48:50.067
> 
> 标签：c#, firefox, selenium-webdriver

我为我的 Visual Studio 2010 配置了 c# webdriver。我想在 iframe 中单击“安装”按钮。我正在编写 c# 代码以单击此 IFrame 中的安装按钮。

这是HTML代码...

```
<html>
<head></head>
<body>
<"pt1:pt2:mvtiframe" class="gradbg af_inlineFrame p_AFFlow" frameborder="0"   onload="AdfDhtmlInlineFramePeer.__iframeLoadHandler(event)" src="some url" style="width:700px; height:360px" _adfloaded="1">
<html>
<tr>
<td style="text-align: left; height: 35px" colspan="3">
<table cellspacing="0" cellpadding="0" border="0">
<tbody>
<tr>
<td>
<p>
<a class="imageButton" onclick="OnNextButtonClick()" target="_blank" href="http://google.com/abc.asp">
<span>Install</span>
</a>
</p>
</td>
</tr>
</html>
</iframe>
</body>
</html> 
```

我正在尝试使用以下代码单击“安装”按钮。但不起作用。它说找不到元素。

```
FirefoxDriver driver = new FirefoxDriver();
driver.SwitchTo().Frame(0);
driver.FindElement(By.Name("Install")).Click(); 
```

尝试使用 Xpath，但我没有得到作为 IFrame 一部分的 Xpath for Install 按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:22:33.030

这里的问题是元素的“名称”不是“安装”安装是按钮的文本。

我会尝试一些这样的 Xpath：`"//a[@class='imageButton']"`

```
driver.FindElement(By.Xpath("//a[@class='imageButton']")).Click(); 
```

如果那是您的页面源，您应该能够使用该类找到元素。这一切都假设您`SwitchTo().Frame`按预期工作。

另外，如果可能的话，我真的建议在该 iFrame 上放置名称或 ID，而不是使用 index.html。如果页面发生变化，从长远来看，它会更可靠。

# c++ - 如何在 Chromium Embedded Framework (CEF) 中获取 JS 对象？

> ID：14236678
> 
> 赞同：2
> 
> 时间：2013-01-09T13:49:02.463
> 
> 标签：c++, chromium, chromium-embedded

是否可以使用 CEF API 获取现有对象引用？

例如我运行一个脚本使用`ExecuteJavaScript()`

```
function foo()
{
    var self = this;
    self.value="some value";
}
var fooObj = new foo; 
```

此脚本创建一个新变量`fooObj`。以后可以在 C++ 代码中获取对这个变量的引用并修改它的值吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T21:08:18.273

您应该能够通过执行以下操作（未经测试）来获得它：

```
 auto context = AppGetBrowser()->GetMainFrame()->GetV8Context();
    CefRefPtr<CefV8Value> p = context->GetGlobal()->GetValue(CefString("fooObj")); 
```

您可能需要进入/退出上下文，具体取决于您在 C++ 中从何处调用它。此外，您可能需要实际将对象显式引用为“window.fooObj”，在这种情况下，您必须获取“window”的值，然后从中获取“fooObj”。

（编辑 - 不小心过早发布）（编辑 2 - 更多）

# javascript - Javascript +数学函数排除某个数字x次

> ID：14236684
> 
> 赞同：-1
> 
> 时间：2013-01-09T13:49:11.113
> 
> 标签：javascript, function, math

> **可能重复：**
> [JavaScript 中的整数除法](https://stackoverflow.com/questions/4228356/integer-division-in-javascript)

可以说我有一个特定的号码。

```
B = 350 
```

而且我有取决于该数字的元素，但它们中都有不同数量的该数字，例如：

```
c = 351,
d = 710,
e = 1100 
```

我想要的是由将c，d，e除以B x倍的剩余部分呈现。IE

```
c = 1,
d = 10,
e = 50 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:52:36.037

使用[`%`（模数）](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators)运算符。

```
var B = 350, c = 351, d = 710, e = 1100;

console.log(c%B);
console.log(d%B);
console.log(e%B); 
```

取自 mdn：

> 模运算符返回第一个操作数模第二个操作数，即前面语句中的 var1 模 var2，其中 var1 和 var2 是变量。模函数是 var1 除以 var2 的整数余数。例如，12 % 5 返回 2。结果将与 var1 具有相同的符号；也就是说，-1 % 2 返回-1。

**[小提琴](http://jsfiddle.net/cskvT/1/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:52:00.620

模[`%`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators#.25_.28Modulus.29)运算符做到这一点：

```
var B = 350,
    c = 351, d = 710, e = 1100;

console.log(c % B, d % B, e % B);  // 1 10 50 
```

# php - joomla/k2 php 模板覆盖

> ID：14236686
> 
> 赞同：1
> 
> 时间：2013-01-09T13:49:15.003
> 
> 标签：php, templates, layout, joomla, joomla-k2

经过数小时的头撞砖墙后，真的需要一些帮助！

基本上我有一个用 K2 组件制作的 Joomla 新闻页面。该页面将有头条新闻，接下来的两个，然后是接下来的四个，然后是接下来的四个，它们都有自己的类，因此它们可以采用不同的样式来强调（就像大多数新闻网站一样）。

所以会有一行一列 - 主要新闻（项目图像和文本在大约 150 个单词后被切断，并带有“阅读更多”）第二行 - 两列 - 接下来的两个新闻片段（项目图像和文本被切断后大约 150 个单词，带有“阅读更多”）第三行 - 四列 - 接下来的四个新闻片段（项目图像和文本在大约 150 个单词带有“阅读更多”后被截断）第四行 - 一列八个链接（无图片只是链接的标题）

这是我要修改的文件：

```
 <?php

// no direct access

defined('_JEXEC') or die;

$selectedFilters=$params->get('extraFieldsSelect'); //get selected fields in module params

?>

<div id="k2ModuleBox<?php echo $module->id; ?> k2FiltrifyContainer" class="k2Filtrify k2ItemsBlock<?php if($params->get('moduleclass_sfx')) echo ' '.$params->get('moduleclass_sfx'); ?>">

    <?php if($params->get('itemPreText')): ?>

    <p class="modulePretext"><?php echo $params->get('itemPreText'); ?></p>

    <?php endif; ?>

    <!--Filtrify Placeholder-->

    <div id="k2FiltrifyPlaceHolder"></div>

    <?php //set placeholder, if LEGEND is the selected callback method

    if($placeholder == 'legend'): ?>

        <!--Filtrify legend placeholder-->

        <div id="legend"><i><?php echo JText::_('K2_VIEWING_ALL'); ?></i></div>

    <?php endif; ?>

    <?php  //set placeholder, if PAGINATION is the selected callback method

    if($placeholder == 'pagination'): ?>

        <!--Filtrify pagination placeholder-->

        <div id="pagination"></div>

    <?php endif; ?>

    <?php if(count($items)): //Filtrify Container?>

      <ul id="k2FiltrifyContainer">

        <p>
          <?php foreach ($items as $keyItem=>$item):    ?>

            <?php

                // Define a CSS class for the last container on each row

                if( (($keyItem+1)%($params->get('num_columns'))==0) || count($items)<$params->get('num_columns') )

                    $lastContainer= ' itemContainerLast';

                else

                    $lastContainer='';

                ?>

          <li class="itemContainer<?php echo $lastContainer; ?>" <?php echo (count($items)==1) ? '' : ' style="width:'.number_format(100/$params->get('num_columns'), 1).'%;"'; ?>

          <?php 

          if( count($item->extra_fields) && $selectedFilters != ''): //check if there are extrafields and selected fields?>

                <?php foreach ($item->extra_fields as $key=>$extraField): //adding extrafields as data parameter?>

                    <?php if(in_array($extraField->id,(array)$selectedFilters, TRUE)) : ?>

                             data-<?php echo preg_replace("/[^A-Za-zA-yA-y0-9а-яА-Яa-zA-Z?-??-?sctzlldSCTZLD]/ui", "_", $extraField->name); ?>="<?php echo $extraField->value; //set the values, and remove special chars?>"

                    <?php endif; ?>

                <?php endforeach; ?>

            <?php endif; ?>

          <?php if($params->get('showCatFilter')==1): //check for param - show category filter?>

                data-<?php echo preg_replace("/[^A-Za-zA-yA-y0-9а-яА-Яá-źÁ-ŹΑ-Ωα-ωščťžľĺďŠČŤŽĹĎ]/ui", "_", JText::_('K2_CATEGORIES')); ?>="<?php echo $item->categoryname;?>"

            <?php endif; ?>

            <?php if($params->get('showTagFilter')==1): //check for param - show tag filter?>

                data-<?php echo preg_replace("/[^A-Za-zA-yA-y0-9а-яА-Яá-źÁ-ŹΑ-Ωα-ωščťžľĺďŠČŤŽĹĎ]/ui", "_", JText::_('K2_TAGS')); ?>="<?php foreach ($item->tags as $tag): ?><?php echo $tag->name; ?>, <?php endforeach; ?>"

            <?php endif; ?>

        >
        </p>
        <p>
          <?php if(isset($item->event->BeforeDisplay)): ?>

          <!-- Plugins: BeforeDisplay -->

          <?php echo $item->event->BeforeDisplay; ?>

          <?php endif; ?>

          <!-- K2 Plugins: K2BeforeDisplay -->

          <?php echo $item->event->K2BeforeDisplay; ?>

          <?php if($params->get('itemAuthorAvatar')): ?>

          <a class="k2Avatar moduleItemAuthorAvatar" rel="author" href="<?php echo $item->authorLink; ?>">

            <img src="<?php echo $item->authorAvatar; ?>" alt="<?php echo K2HelperUtilities::cleanHtml($item->author); ?>" style="width:<?php echo $avatarWidth; ?>px;height:auto;" />

          </a>

          <?php endif; ?>

          <?php if($params->get('itemTitle')): ?>

          <a class="moduleItemTitle" href="<?php echo $item->link; ?>"><?php echo $item->title; ?></a>

          <?php endif; ?>

          <?php if($params->get('itemAuthor')): ?>

        </p>
          <div class="moduleItemAuthor">

              <?php echo K2HelperUtilities::writtenBy($item->authorGender); ?>

                    <?php if(isset($item->authorLink)): ?>

                    <a rel="author" title="<?php echo K2HelperUtilities::cleanHtml($item->author); ?>" href="<?php echo $item->authorLink; ?>"><?php echo $item->author; ?></a>

                    <?php else: ?>

                    <?php echo $item->author; ?>

                    <?php endif; ?>

                    <?php if($params->get('userDescription')): ?>

                    <?php echo $item->authorDescription; ?>

                    <?php endif; ?>

                </div>

                <?php endif; ?>

            <?php if(isset($item->event->AfterDisplayTitle)): ?>

                 <!-- Plugins: AfterDisplayTitle -->

                 <?php echo $item->event->AfterDisplayTitle; ?>

            <?php endif; ?>

          <!-- K2 Plugins: K2AfterDisplayTitle -->

          <?php echo $item->event->K2AfterDisplayTitle; ?>

            <?php if(isset($item->event->BeforeDisplayContent)): ?>

              <!-- Plugins: BeforeDisplayContent -->

                <?php echo $item->event->BeforeDisplayContent; ?>

            <?php endif; ?>

          <!-- K2 Plugins: K2BeforeDisplayContent -->

          <?php echo $item->event->K2BeforeDisplayContent; ?>

          <?php if($params->get('itemImage') || $params->get('itemIntroText')): ?>

          <div class="moduleItemIntrotext">

              <?php if($params->get('itemImage') && isset($item->image)): ?>

              <a class="moduleItemImage" href="<?php echo $item->link; ?>" title="<?php echo JText::_('K2_CONTINUE_READING'); ?> &quot;<?php echo K2HelperUtilities::cleanHtml($item->title); ?>&quot;">

                <img src="<?php echo $item->image; ?>" alt="<?php echo K2HelperUtilities::cleanHtml($item->title); ?>"/>

              </a>

              <?php endif; ?>

            <?php if($params->get('itemIntroText')): ?>

            <?php echo $item->introtext; ?>

            <?php endif; ?>

          </div>

          <?php endif; ?>

          <div class="clr"></div>

          <?php if($params->get('itemExtraFields') && count($item->extra_fields)): ?>

          <div class="moduleItemExtraFields">

              <b><?php echo JText::_('K2_ADDITIONAL_INFO'); ?></b>

              <ul>

                <?php foreach ($item->extra_fields as $extraField): ?>

                        <?php if($extraField->value): ?>

                        <li class="type<?php echo ucfirst($extraField->type); ?> group<?php echo $extraField->group; ?>">

                            <span class="moduleItemExtraFieldsLabel"><?php echo $extraField->name; ?></span>

                            <span class="moduleItemExtraFieldsValue"><?php echo $extraField->value; ?></span>

                            <div class="clr"></div>

                        </li>

                        <?php endif; ?>

                <?php endforeach; ?>

              </ul>

          </div>

          <?php endif; ?>

          <div class="clr"></div>

          <?php if($params->get('itemVideo')): ?>

          <div class="moduleItemVideo">

            <?php echo $item->video ; ?>

            <span class="moduleItemVideoCaption"><?php echo $item->video_caption ; ?></span>

            <span class="moduleItemVideoCredits"><?php echo $item->video_credits ; ?></span>

          </div>

          <?php endif; ?>

          <div class="clr"></div>

            <?php if(isset($item->event->AfterDisplayContent)): ?>

                  <!-- Plugins: AfterDisplayContent -->

                  <?php echo $item->event->AfterDisplayContent; ?>

            <?php endif; ?>

          <!-- K2 Plugins: K2AfterDisplayContent -->

          <?php echo $item->event->K2AfterDisplayContent; ?>

          <?php if($params->get('itemDateCreated')): ?>

          <span class="moduleItemDateCreated"><?php echo JText::_('K2_WRITTEN_ON') ; ?> <?php echo JHTML::_('date', $item->created, JText::_('K2_DATE_FORMAT_LC2')); ?></span>

          <?php endif; ?>

          <?php if($params->get('itemCategory')): ?>

          <?php echo JText::_('K2_IN') ; ?> <a class="moduleItemCategory" href="<?php echo $item->categoryLink; ?>"><?php echo $item->categoryname; ?></a>

          <?php endif; ?>

          <?php if($params->get('itemTags') && count($item->tags)>0): ?>

          <div class="moduleItemTags">

            <b><?php echo JText::_('K2_TAGS'); ?>:</b>

            <?php foreach ($item->tags as $tag): ?>

            <a href="<?php echo $tag->link; ?>"><?php echo $tag->name; ?></a>

            <?php endforeach; ?>

          </div>

          <?php endif; ?>

          <?php if($params->get('itemAttachments') && count($item->attachments)): ?>

                <div class="moduleAttachments">

                    <?php foreach ($item->attachments as $attachment): ?>

                    <a title="<?php echo K2HelperUtilities::cleanHtml($attachment->titleAttribute); ?>" href="<?php echo $attachment->link; ?>"><?php echo $attachment->title; ?></a>

                    <?php endforeach; ?>

                </div>

          <?php endif; ?>

                <?php if($params->get('itemCommentsCounter') && $componentParams->get('comments')): ?>      

                    <?php if(!empty($item->event->K2CommentsCounter)): ?>

                        <!-- K2 Plugins: K2CommentsCounter -->

                        <?php echo $item->event->K2CommentsCounter; ?>

                    <?php else: ?>

                        <?php if($item->numOfComments>0): ?>

                        <a class="moduleItemComments" href="<?php echo $item->link.'#itemCommentsAnchor'; ?>">

                            <?php echo $item->numOfComments; ?> <?php if($item->numOfComments>1) echo JText::_('K2_COMMENTS'); else echo JText::_('K2_COMMENT'); ?>

                        </a>

                        <?php else: ?>

                        <a class="moduleItemComments" href="<?php echo $item->link.'#itemCommentsAnchor'; ?>">

                            <?php echo JText::_('K2_BE_THE_FIRST_TO_COMMENT'); ?>

                        </a>

                        <?php endif; ?>

                    <?php endif; ?>

                <?php endif; ?>

                <?php if($params->get('itemHits')): ?>

                <span class="moduleItemHits">

                    <?php echo JText::_('K2_READ'); ?> <?php echo $item->hits; ?> <?php echo JText::_('K2_TIMES'); ?>

                </span>

                <?php endif; ?>

                <?php if($params->get('itemReadMore') && $item->fulltext): ?>

                <a class="moduleItemReadMore" href="<?php echo $item->link; ?>">

                    <?php echo JText::_('K2_READ_MORE'); ?>

                </a>

                <?php endif; ?>

            <?php if(isset($item->event->AfterDisplay)): ?>

                 <!-- Plugins: AfterDisplayContent -->

                 <?php echo $item->event->AfterDisplay; ?>

            <?php endif; ?>

          <!-- K2 Plugins: K2AfterDisplay -->

          <?php echo $item->event->K2AfterDisplay; ?>

          <div class="clr"></div>

        </li>

        <?php if((($keyItem+1)%($params->get('num_columns'))==0) && (($placeholder != 'pagination'))) : ?>

        <div class="clr"></div>

        <?php endif; ?>

        <?php endforeach; ?>

        <li class="clearList"></li>

      </ul>

  <?php endif; ?>

    <?php if($params->get('itemCustomLink')): ?>

    <a class="moduleCustomLink" href="<?php echo $params->get('itemCustomLinkURL'); ?>" title="<?php echo K2HelperUtilities::cleanHtml($itemCustomLinkTitle); ?>"><?php echo $itemCustomLinkTitle; ?></a>

    <?php endif; ?>

    <?php if($params->get('feed')): ?>

    <div class="k2FeedIcon">

        <a href="<?php echo JRoute::_('index.php?option=com_k2&view=itemlist&format=feed&moduleID='.$module->id); ?>" title="<?php echo JText::_('K2_SUBSCRIBE_TO_THIS_RSS_FEED'); ?>">

            <span><?php echo JText::_('K2_SUBSCRIBE_TO_THIS_RSS_FEED'); ?></span>

        </a>

        <div class="clr"></div>

    </div>

    <?php endif; ?>

</div> 
```

就像我说的那样，我已经尝试并尝试使此模板正常工作，但无济于事！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T13:06:42.910

你用错误的文件试试！该文件属于过滤模块！

你必须：

1.  设置为类别“默认”的模板
2.  编辑 K2 原生类别设置，
3.  编辑 K2 原生类别项目设置，
4.  编辑 K2 原生项目设置，

设置所有原生 K2 参数后，您必须克隆您的默认 k2 模板。这样做：

*   进入组件/com_k2/模板。
*   将您所见的全部复制到本地。
*   然后在您的模板/您的模板/html 文件夹中创建名为 com_k2。
*   将之前从 components/com_k2/templates 获得的内容复制到其中。
*   然后复制名为“default”的文件夹并给他们自己的名字。这将是您的 K2 覆盖模板。

然后进入 K2 管理并将您之前设置的类别模板从默认更改为新名称。刚才您可以从模板覆盖开始，但只能在模板/您的模板/html/com_k2/your-k2-template 内部。您需要覆盖的文件是用于类别视图的 category-item.php 和用于单个项目视图的 item.php。

# node.js - mongoose ODM 是否自动加载模式/模型？

> ID：14236687
> 
> 赞同：0
> 
> 时间：2013-01-09T13:49:15.253
> 
> 标签：node.js, mongodb, model, schema, mongoose

如果我在 mongoose 模式中定义嵌套模型或关系，它是否具有在重新水合实例时自动加载所有内容的机制，还是我只需要确保始终加载适当的模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:15:58.250

嵌套的嵌入式模型文档是自动加载的，但如果它是`ObjectId`基于关系的，那么您需要使用 Mongoose 的[填充](http://mongoosejs.com/docs/populate.html)支持来显式加载相关文档。

Mongoose 根据您的代码定义的模式和模型执行所有这些操作，通常在您的应用程序启动期间。

# ruby-on-rails - 如何在 savon 2.0.2 中使用证书

> ID：14236690
> 
> 赞同：3
> 
> 时间：2013-01-09T13:49:19.637
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, soap, savon

我最近更新了 savon 2.0.2，并使用它通过肥皂发送一些 xml。我必须使用证书，但在更新新 savon 版本的语法后，证书将被忽略。有人可以帮助我使用新语法 - 我可能遗漏了一些东西......我正在运行 ruby​​ 1.9.3 和 rails 3.2.9

旧（工作）版本：

```
client = Savon::Client.new do | wsdl |
  wsdl.endpoint = CONFIG['endpoint']
  wsdl.namespace = CONFIG['namespace']
end

  response = client.request(:ns, :getToken) do

    http.auth.ssl.cert = OpenSSL::X509::Certificate.new(
      File.read(Rails.root + "lib/certs/cert.pem"))
    http.auth.ssl.cert_key_file = Rails.root + "lib/certs/key.pem"
    http.auth.ssl.verify_mode = :none

    soap.body = {

      // body
    }
    soap.header={
      "ns:account"=>{
        :login=>CONFIG['login'],
        :password=>CONFIG['password']
      }      
    }
  end 
```

现在我尝试在 2.0.2 中做同样的事情，但它不起作用 - xml 没问题，但证书被忽略了......

到目前为止，我得到了：

```
 client = Savon.client do
  endpoint CONFIG['endpoint']
  namespace CONFIG['namespace']
  namespace_identifier :ns

  ssl_cert_file OpenSSL::X509::Certificate.new(File.read(Rails.root + "lib/certs/cert.pem"))
  ssl_cert_key_file Rails.root + "lib/certs/key.pem"
  ssl_verify_mode :none

  soap_header(
      "sus:account"=>{
        :login=>CONFIG['login'],
        :password=>CONFIG['password']
      }      
   )

end

response = client.call(:getToken) do

      message(
     // body
        )

end 
```

任何帮助将不胜感激！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:12:09.553

使用`ssl_verify_mode :none`告诉 Savon 关闭 SSL 检查。这就是为什么证书被忽略的原因。正如评论中所指出的，完整的文档可以在[Savon 网站](http://savonrb.com/version2.html#globals-ssl)上找到。

# c# - MVVM 中的模型是做什么用的？

> ID：14236691
> 
> 赞同：7
> 
> 时间：2013-01-09T13:49:26.580
> 
> 标签：c#, mvvm

我已经阅读了几篇关于 MVVM 模式的文章、教程和博客文章。但是有一点我不明白。取三个“层”：

*   模型
*   看法
*   查看模型

据我了解 MVVM 模型包含“原始”数据，例如`Student`类的名称和地址。视图模型向视图公开表示模型数据的属性。

**视图模型中的属性示例**

```
public string Name {
 get { return model.Name; }
 set { model.Name = value; }
} 
```

**模型示例**

```
private string name;

public string Name {
 get { return name; }
 set { name = value; }
} 
```

这听起来可能有点愚蠢，但这不会造成冗余吗？为什么我必须在模型和视图模型中保留名称？为什么不应该完全处理视图模型上的名称？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T13:51:52.623

模型是包含您的业务逻辑的对象图。

这就是你持有行为（验证、计算等）的地方。

ViewModel 是对 UI 及其交互进行建模的东西。

这些是不同的，并且存在不同的原因 - 模式的重点是将您的显示逻辑分离到 VVM（View 和 ViewModel），并将您的业务逻辑完全分离。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T13:52:57.867

在这样一个简单的例子中，这个答案是肯定的（这是不合理的冗余）。但是，据推测，一个页面将不仅仅包含一个 Model 对象。您可能拥有页面状态以及必须跟踪的多个其他模型对象。这是在 ViewModel 中完成的。

例如，您可能会在状态栏中显示有关已登录用户的其他信息，以及正在运行以检测文本文件更改的服务。

您可能还有一个用于编辑学生对象的表单。如果您打算验证这些更改，那么在验证修改之前，您不希望直接编辑 Student 对象。在这种情况下，ViewModel 可以充当临时存储位置。

*上述注意事项：*在模型中发生验证的情况并不少见，但即使这样，您也可能希望用户能够在编辑表单的过程中输入无效值。例如，如果您的模型不允许字段中的零长度值，您仍然希望让您的用户删除该值，移动到另一个字段（例如，复制它）然后返回到该字段并完成编辑（粘贴）。如果您直接绑定到模型，那么您的验证逻辑可能无法按照您的意愿处理这种“中间”、“尚未完成”状态。例如，您可能不希望在用户完成并单击“保存”之前向他们提出验证错误。

您可能还会在 ViewModel 中有 Command 对象来处理按钮单击等。这些将是特定领域的对象，在模型中将无用。

当您需要过滤或以某种方式临时“修改”模型对象以在屏幕上获得有用的东西时，ViewModel 也很有用。例如，您可能希望显示系统中所有用户的列表以及其中前十名执行者的实时列表（每 10 秒更新一次）。或者您可能想要显示报告列表和显示总体使用率的图表等。过滤、排序和自定义数据将在 ViewModel 中进行。

另一方面，模型通常尽可能纯净。理想情况下，您只需要（通常）对持久存储（数据库或您拥有的）中的内容进行精确建模的[POCO 。](http://en.wikipedia.org/wiki/Plain_Old_CLR_Object)如果您的持久存储具有 FirstName 和 LastName 字段，那么您的 Model 也将如此。只有在您的 ViewModel 中，您才会将它们组合起来以获得一个 Name 字段（“First Last”或“Last, First”，具体取决于 View 的需要）。

例如：

```
namespace Model
{
    public class Student
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
    }

    public class Class
    {
        public string Name { get; set; }
        public float Score { get; set; }
    }
}

namespace ViewModel
{
    public class EditStudentRecordViewModel
    {
        private Model.Student _student;
        private IEnumerable<Model.Class> _studentClasses;

        /* Bind your View to these fields: */
        public string FullName
        {
            return _student.LastName + ", " + _student.FirstName;
        }
        public string FirstName { get; set; }
        public string LastName { get; set; }

        public IEnumerable<Model.Class> PassingClasses
        {
            get
            {
                return _studentClasses.Where( c => c.Score >= 78 );
            }
        }

        public IEnumerable<Model.Class> FailingClasses
        {
            get
            {
                return _studentClasses.Where( c => c.Score < 78 );
            }
        }

        public void Save()
        {
            List<string> l_validationErrors = new List<string>();
            if ( string.IsNullOrEmpty( this.FirstName ) )
                l_validationErrors.Add( "First Name must not be empty." );
            if ( string.IsNullOrEmpty( this.LastName ) )
                l_validationErrors.Add( "Last Name must not be empty." );

            if ( l_validationErrors.Any() )
                return;

            _student.FirstName = this.FirstName;
            _student.LastName = this.LastName;
            Model.Utilities.SaveStudent( _student );
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-09T14:02:09.300

视图模型是您跟踪特定于*视图*而不是*模型*所必需的属性的地方。

让我们以您的模型为例，假设它被称为`Person`.

`Person`然后为被调用创建一个视图模型`PersonViewModel`，如下所示：

```
public class PersonViewModel
{
    public Person Person { get; set; }
} 
```

^(（注意，您可能不想直接像这样公开模型，但这是另一回事）)

现在假设您在视图中有一个用于保存`Person`实例的按钮。为了提供更好的用户体验 (UX)，您希望仅在您的模型实际发生更改时才启用该按钮。所以你在类上实现[`INotifyPropertyChanged`接口](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)`Person`：

```
public class Person : INotifyPropertyChanged
{
    ... 
```

现在，您*可以*`HasUnsavedChanges`从您`Person`的属性中公开一个属性`Enabled`，保存按钮上的属性将绑定到该属性，但该逻辑与人*无关*。

这就是视图模型的用武之地。您可以在视图模型上定义这个*特定于视图的属性*，如下所示：

```
public class PersonViewModel
{
    public Person Person { get; set; }

    public bool HasUnsavedChanges { get; set; }
} 
```

然后，您的视图模型将订阅界面的[`PropertyChanged`事件](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.propertychanged.aspx)，`INotifyPropertyChanged`并在视图模型上切换`HasUnsavedChanges`属性。

然后，如果绑定设置正确，当您的模型发生任何更改时，保存按钮将启用/禁用，但您的模型没有任何逻辑将其绑定到视图。

请注意，您还必须`INotifyPropertyChanged`在视图模型上实现，以便您的视图在对其绑定的视图模型进行更改时拾取。

同样，该点充当了桥梁，以包含不属于模型的模型属性和视图属性的组合逻辑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T13:59:25.283

MVVM 中的模型与 MVP 或 Model2 MVC 中的模型完全相同。它是受 MVC 启发的模式的一部分，不受主题变化的影响。

模型是包含存储库、工作单元、域/模型对象、数据映射器、服务和其他一些结构的层。他们结合起来创建了模型层，其中包含特定应用程序的所有领域业务逻辑。

**模型不是任何单个实例。**任何告诉你的人都充满了它。

为 MVVM 设计的特定用例是当您无法修改模型层或视图实例或两者时的情况。

> [**PS**虽然，如果您`ViewModel`按照 ASP.NET MVC 文档使用实例，那么您实际上并没有使用 MVVM。它只是 Model2 MVC，具有不同的事物名称（其中“视图模型”实际上是视图，“视图”是模板）。当他们将类似 Rails 的架构称为“MVC”时，他们有点搞砸了。]

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T14:06:15.933

我一直将模型视为应用程序的“构建块”。它们通常是具有某些属性的自包含类，并且可能仅针对其自身属性进行一些基本的验证或逻辑。

另一方面，视图模型是我在构建和运行应用程序时最终使用“构建块”（模型）的实际应用程序类。他们做一些事情，比如执行高级验证、处理命令、处理事件、任何类型的业务逻辑等。

应该注意的是，您不必*像*在示例代码中那样在 ViewModel 中公开模型的属性。这样做是“MVVM 纯粹主义”方法，因为它将模型层与视图层完全分开，但是将整个模型暴露给视图也是完全可以接受的。这是我在大多数小型项目中通常使用的，因为它简单且没有代码重复。

```
public MyModel CurrentModel
{
    get { return _model; }
    set 
    {
        if (_model != value)
        {
            _model = value;
            RaisePropertyChanged("CurrentModel");
        }
    }
} 
```

但是，如果在某些情况下，视图中只需要模型中的一些属性，或者如果项目足够大，我希望将层完全分开，那么我通过 ViewModel 将模型的属性公开给视图就像您在示例代码中一样。

# extjs - 如何使用 extjs 中的选项卡隐藏选项卡的 html 内容？

> ID：14236692
> 
> 赞同：0
> 
> 时间：2013-01-09T13:49:29.450
> 
> 标签：extjs, tabs, hide, disabled-control

我用两个选项卡创建了这个简单的示例，第一个 tab1 我想让它消失 myTab.child('# tab1').Tab.hide()，但是你的 html 内容不会随着 tab1 消失。当我启用tab2的html内容时，tab1在tab2的html上。为什么？

[请参阅此示例](http://bit.ly/11fvTa4)

感谢高级，克劳迪奥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:49:07.373

您需要使用[`setActiveTab`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.tab.Panel-method-setActiveTab)来切换标签（或`getLayout().setActiveItem()`）。

从帮助：

```
var card1 = Ext.create('Ext.panel.Panel', {itemId: 'card-1'});
var card2 = Ext.create('Ext.panel.Panel', {itemId: 'card-2'});
var panel = Ext.create('Ext.panel.Panel', {
    layout: 'card',
    activeItem: 0,
    items: [card1, card2]
});
// These are all equivalent
panel.getLayout().setActiveItem(card2);
panel.getLayout().setActiveItem('card-2');
panel.getLayout().setActiveItem(1); 
```

# vba - Outlook关闭时如何发送邮件

> ID：14236696
> 
> 赞同：1
> 
> 时间：2013-01-09T13:49:38.057
> 
> 标签：vba, excel

我有以下代码行。打开 Outlook 时它工作正常，但我希望它在 Outlook 关闭时也能工作。我将代码保存在命令按钮单击事件中。

```
Private Sub btnSend_Click()
Dim OutApp As Object
Dim OutMail As Object
Set OutApp = GetObject("", Outlook.Application)
OutApp.Session.Logon
Set OutMail = OutApp.CreateItem(0)
On Error Resume Next
With OutMail
    .To = "adbc@adbc.com"
    .CC = ""
    .BCC = ""
    .Subject = "Test mail from Excel Sheet-OutLook Closed"
    .Body = "This is body of the mail"
    .Display
    .Send
    .ReadReceiptRequested = True
End With
On Error GoTo 0
Set OutMail = Nothing
Set OutApp = Nothing
End Sub 
```

我用 GetObject 和 CreateObject 方法都试过了。如果我在关闭 Outlook 后执行此代码，它不会显示任何错误，但不会发送任何邮件。

以下代码行发送邮件，但它们在 Outlook 的发件箱中排队。当用户打开 Outlook 时，只有他们从发件箱中移出。

```
Private Sub btnSend_Click()
Dim OutApp As Object
Dim OutMail As Object
Set OutApp = CreateObject("Outlook.Application")
Set OutMail = OutApp.CreateItem(0)
On Error Resume Next
With OutMail
    .To = "adbc@adbc.com"
    .CC = ""
    .BCC = ""
    .Subject = "Test mail from Excel Sheet-OutLook Closed"
    .Body = "This is body of the mail"
    .Display
    .Send
    .ReadReceiptRequested = True
End With
On Error GoTo 0
Set OutMail = Nothing
Set OutApp = Nothing
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T07:19:41.630

您可以在发送邮件之前使用 shell 命令实际打开 Outlook。

```
Public Declare Function ShellExecute Lib "shell32.dll" Alias "ShellExecuteA" (ByVal hwnd As Long, ByVal lpOperation As String, ByVal lpFile As String, ByVal lpParameters As String, ByVal lpDirectory As String, ByVal nShowCmd As Long) As Long
Public Sub OpenOutlook()
Dim ret As Long
 On Error GoTo aa
 ret = ShellExecute(Application.hwnd, vbNullString, "Outlook", vbNullString, "C:\", SW_SHOWNORMAL)
 If ret < 3 Then

 MsgBox "Outlook is not found.", vbCritical, "SN's Customised Solutions"
 End If
aa:
End Sub 
```

将其保存在一个单独的模块中，并从您发送邮件的代码中调用该模块。我正在尝试处理的部分是如何隐藏它，以便激活仍然使用 excel

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-15T22:07:03.477

对于 Outlook 2013，这是 Outlook 设置的问题，而不是 VBA 代码的问题。

*   打开展望

*   转到文件 -> 选项 -> 高级

*   滚动到“发送和接收”标题，然后单击“发送/接收...”按钮

*   在“组'所有帐户'的设置”下，确保选中“退出时执行自动发送/接收”

这可确保在 Outlook 关闭时发送 OUTLOOK“发件箱”中的所有项目。这为我解决了这个问题。其他版本的 Outlook 可能类似。

# c# - 与带有 Windows 凭据的 .NET 代码中的 Notes 客户端集成

> ID：14236698
> 
> 赞同：1
> 
> 时间：2013-01-09T13:49:41.613
> 
> 标签：c#, .net, lotus-notes

我的 .NET（WPF 和 C#）应用程序通过 Interop.Domino 成功地与本地 Lotus Notes 客户端集成。它提示用户输入他的 Lotus Notes 用户名/密码（实际上是 Windows 凭据），然后在用户的本地 Lotus Notes 邮箱中创建邮件。我使用下面的代码，它工作正常（不包括创建电子邮件的部分）。但是，客户希望它自动运行，而不提示用户输入密码。Lotus Notes 安装使用 Windows 凭据，但我的应用程序没有。用户在手动打开 Lotus Notes 时不会提示输入密码，所以我认为应该可以。

如何打开与 Notes 的会话并告诉它只使用登录到 Windows 的用户的任何 Windows 凭据？

```
 NotesSession notesSession = new NotesSession();
        notesSession.Initialize();

        // An empty servername means we go to the locally installed Lotus Notes
        string serverName = String.Empty;
        NotesDbDirectory directory = notesSession.GetDbDirectory(serverName);

        NotesDatabase notesDatabase = directory.OpenMailDatabase();

        if (!notesDatabase.IsOpen)
        {
            notesDatabase.Open();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:12:40.320

您可以告诉 Notes 在其他基于 Notes 的程序访问 Notes 数据时（在 Notes 运行时）不要提示输入密码。

有关详细信息，请参阅[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.notes85.help.doc/sec_pass_otherapps_t.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.notes85.help.doc/sec_pass_otherapps_t.html)

# html - PHPStorm / Webstorm jquery 移动数据-属性

> ID：14236701
> 
> 赞同：2
> 
> 时间：2013-01-09T13:49:58.163
> 
> 标签：html, jquery-mobile, phpstorm

我是 phpstorm 用户（版本 5），现在我正在开发一个 jquery 移动项目。由于 jquery mobile 使用自定义 html-data 属性，如果自定义数据属性（如“data-icon='add'”、“data-role='listview'”和很快。

是否有插件或方法可以在 phpstorm/webstorm IDE 中完成此自动完成/代码完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T09:23:38.607

这很容易。这是你做的：

1 - 进入设置

2 - 搜索库

3 - 单击侧面的添加

4 - 添加 jQuery 移动。

添加移动版本时，请确保提供链接并添加 API。就像添加另一个库一样。

[这](http://blog.jetbrains.com/webide/2011/04/jquery-offline-doc/)是有关如何添加文档的演练。

我相信api链接是这样的：

```
http://jquerymobile.com/test/docs/api/ 
```

# arrays - VBA 7.0 中的锯齿状数组 - 语法错误

> ID：14236702
> 
> 赞同：0
> 
> 时间：2013-01-09T13:50:03.213
> 
> 标签：arrays, vba, excel

我正在使用 Excel 2010，我想知道为什么下面的代码对我不起作用？我有`compile error: syntax error`。

```
Sub test()
Dim myStudents(,) As String = _       
   {{"Dick", "Jane", "Tom", "Sam"}, _
   {"Sue", "Bill", "Mary", ""}}    
End Sub 
```

[示例链接](http://visualbasic.about.com/b/2007/05/11/initializing-a-jagged-array.htm)和代码：

```
Sub xyz()
    Dim xyz()()() As Byte
End Sub 
```

这也是`compile error: syntax error`运行时产生的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:06:32.150

这是 VB.net 语法。VB.net 与 Excel 等中使用的 VBA 不同。要在 VBA 中执行此操作，您可以执行以下操作：

```
Public Sub test()
  Dim myStudents() As Variant

  myStudents = Array( _
                 Array("Dick", "Jane", "Tom", "Sam"), _
                 Array("Sue", "Bill", "Mary") _
               )

  Debug.Print myStudents(0)(1) ' Jane
  Debug.Print myStudents(1)(2) ' Mary
End Sub 
```

即，我们创建一个数组数组。

# postgresql - 根据 postgres 的 ColdFusion CFQuery 块

> ID：14236705
> 
> 赞同：0
> 
> 时间：2013-01-09T13:50:13.467
> 
> 标签：postgresql, coldfusion, coldfusion-9, postgresql-9.1

我无法让这个代码块在 ColdFusion 的 CFQuery 中对 postgres 运行我的查询：

```
<cfquery name="uiCustomColumn" datasource="#arguments.dsn#">
    DECLARE resultValue int;
    DECLARE nextId bigint;
    BEGIN
        IF (( select count( udc_id ) from user_defined_column WHERE udc_is_active = true ) >= 10) THEN
            INSERT INTO user_defined_column(udc_id)
            VALUES(<cfqueryparam value="#this.getLabel()#" cfsqltype="cf_sql_varchar" maxlength="25">)
        END IF;
    END;
</cfquery> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:25:17.737

您所拥有的是[`plpgsql`](http://www.postgresql.org/docs/current/interactive/plpgsql.html)语法（默认的 PostgreSQL 过程语言），而不是 SQL。

您需要将其包装在[`DO`](http://www.postgresql.org/docs/current/interactive/sql-do.html)命令中或[`CREATE FUNCTION`](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)使用它。
或者用 SQL 语法重写它。这些方面的东西：

```
INSERT INTO user_defined_column(udc_id)
SELECT <this.getLabel()>
WHERE (
   SELECT count(udc_id) > 9
   FROM   user_defined_column
   WHERE  udc_is_active
   ) 
```

# python - 如何将格式错误的字符串转换为字典？

> ID：14236708
> 
> 赞同：3
> 
> 时间：2013-01-09T13:50:20.280
> 
> 标签：python, string, dictionary

我有一个字符串`s`（注意`a`and`b`没有用引号括起来，所以它不能直接被评估为 a `dict`）：

```
s = '{a:1,b:2}' 
```

我想将此变量转换为`dict`这样的：

```
{'a':1,'b':2} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T13:56:35.797

这将适用于您的示例：

```
import ast
def elem_splitter(s):
    return s.split(':',1)

s = '{a:1,b:2}'
s_no_braces = s.strip()[1:-1] #s.translate(None,'{}') is more elegant, but can fail if you can have strings with '{' or '}' enclosed.
elements = (elem_splitter(ss) for ss in s_no_braces.split(','))
d = dict((k,ast.literal_eval(v)) for k,v in elements) 
```

* * *

请注意，如果您的字符串格式为：

```
'{s:"foo,bar",ss:2}'  #comma in string is a problem for this algorithm 
```

或者：

```
'{s,ss:1,v:2}' 
```

但它会传递一个字符串，如：

```
'{s ss:1,v:2}' #{"s ss":1, "v":2} 
```

* * *

您可能还需要`elem_splitter`稍微修改，具体取决于您的需要：

```
def elem_splitter(s):
    k,v = s.split(':',1)
    return k.strip(),v # maybe `v.strip() also?` 
```

*其他人可能会使用更多`ast`模块来制作更好的示例，但我不太清楚它的内部结构，所以我怀疑我是否有时间做出这个答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:56:54.950

由于您的字符串格式错误为 json 和 Python dict，因此您既不能使用 json.loads 而不是 ast.literal_eval 直接转换数据。

在这种特殊情况下，您必须通过了解输入数据来手动将其转换为 Python 字典

```
>>> foo = '{a:1,b:2}'
>>> dict(e.split(":") for e in foo.translate(None,"{}").split(","))
{'a': '1', 'b': '2'} 
```

正如蒂姆更新的那样，我的目光短浅，我错过了值应该是整数的事实，这是一个替代实现

```
>>> {k: int(v) for e in foo.translate(None,"{}").split(",") 
     for k, v in [e.split(":")]}
{'a': 1, 'b': 2} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T14:20:09.687

```
import re,ast
regex = re.compile('([a-z])')
ast.literal_eval(regex.sub(r'"\1"', s)) 
```

**出去：**

```
{'a': 1, 'b': 2} 
```

*编辑：* 如果您碰巧有`{foo1:1,bar:2}`向正则表达式添加额外的捕获组之类的东西：

```
regex = re.compile('(\w+)(:)')
ast.literal_eval(regex.sub(r'"\1"\2', s)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T14:05:27.467

你可以这样做：

```
s = "{a:1,b:2}"
content = s[s.index("{")+1:s.index("}")]
to_int = lambda x: int(x) if x.isdigit() else x
d = dict((to_int(i) for i in pair.split(":", 1)) for pair in content.split(",")) 
```

为简单起见，如果字符串不包含有效规范，我将省略异常处理，并且此版本不会删除您可能想要的空格。如果您更喜欢的解释是 key 始终是 string 而 value 始终是 an `int`，那么它就更容易了：

```
s = "{a:1,b:2}"
content = s[s.index("{")+1:s.index("}")]
d = dict((int(pair[0]), pair[1].strip()) for pair in content.split(",")) 
```

作为奖励，此版本还从键中去除空格以显示它是多么简单。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-09T13:58:26.377

```
import simplejson
s = '{a:1,b:2}'
a = simplejson.loads(s)
print a 
```

# c++ - 打印不带指数的 gmplib 的 mpf_t 数字

> ID：14236712
> 
> 赞同：1
> 
> 时间：2013-01-09T13:50:31.077
> 
> 标签：c++, printing, gmp

有没有办法使用 gmplib 打印`mpf_t`没有指数的数字？我宁愿不必编写一个读取指数并手动移动小数的函数，因为那样看起来有点矫枉过正。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:12:09.193

我不熟悉 gmplib，但它是否支持[固定](http://www.cplusplus.com/reference/ios/fixed/)格式操纵器？

在标准 C++ 中：

```
#include <iostream>
#include <iomanip>

using namespace std;

int main()
{
   double d = 1.12345e6;

   cout << d << endl;
   cout << fixed << d << endl;
   return 0;
} 
```

产生：

```
$ ./test
1.12345e+06
1123450.000000 
```

您可以使用精度`setprecision(n)`和宽度`setw(n)`来进一步调整结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-08T00:58:36.130

事实上，GMPLib 提供了很好地打印 mpf_t 值的方法。见下文。

```
#include <stdio.h>
#include <gmp.h>

int main(int argc, const char * argv[]) {
    mpf_t f;
    mpf_init_set_str(f, "314.15926", 10);
    gmp_printf("%.5Ff\n", f);
    return 0;
} 
```

如果你运行脚本，控制台会输出：

```
314.15926 
```

这里，最重要的是 GMT 浮点格式标志中的 5 左右：**%.5Ff**，这意味着它将输出 5 位数字的浮点数

# hadoop - 如何为 HBase 0.92.1-cdh4.1.2 添加二级索引？

> ID：14236714
> 
> 赞同：1
> 
> 时间：2013-01-09T13:50:41.860
> 
> 标签：hadoop, mapreduce, hbase

我通过 Map-Reduce 在一个 hbase 表中插入了大约 1500 万行和 32 列。

```
# Key-valued data e.g.
company= ibm ! employee= sw ...

# In hbase it's look like
row =1 column = f1: company time stamp=1123344456 value =ibm .... 
```

当我触发查询时

```
(scan 'sample_names', {COLUMNS=>"f1:company", FILTER=>SingleColumnValueFilter.new(Bytes.toBytes('f1'), Bytes.toBytes('company'), CompareFilter::CompareOp.valueOf('EQUAL'), SubstringComparator.new("ibm")) }) 
```

获取数据 大约需要**360.09秒。****有没有办法提高这个查询的性能？**我们可以通过二级索引来减少这个查询时间吗？如果是，请建议如何为特定列限定符添加索引。

# linux - Linux下numpy中使用Atlas的线程错误

> ID：14236717
> 
> 赞同：5
> 
> 时间：2013-01-09T13:50:52.763
> 
> 标签：linux, numpy, multiprocessing, runtime-error, atlas

我有一个使用在 Linux 机器上运行的多进程模块的多进程（不是多线程！）应用程序。此应用程序使用该`numpy.linalg.solve`功能，如果我尝试创建多个进程，则会收到错误消息：

```
assertion !pthread_create( &(ROOT->pid), ATTR, ROOT->fun, ROOT ) failed, line 84 of file /build/buildd-atlas_3.8.4-9-amd64-jk6dgk/atlas-3.8.4/build/atlas-base/../..//src/pthreads/misc/ATL_thread_tree.c 
```

请注意，在我开始使用 中的函数之前`numpy.linalg`，我没有遇到任何问题。

知道问题可能是什么吗？

**编辑**：我尝试使用`scipy.linalg.solve`，问题是一样的！

**编辑**：通过用 blas 替换 atlas，问题就消失了。所以看起来问题确实在地图集中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T06:05:42.680

恰好 ATLAS 开发人员最近在这里回答了这个问题：http: [//sourceforge.net/p/math-atlas/support-requests/873/](http://sourceforge.net/p/math-atlas/support-requests/873/)

注意：我假设您安装了 ATLAS 3.10。

这个也困扰了我一段时间。如果你和我有同样的问题，那么很可能是：

1.  ATLAS 是在另一台机器上构建的，而不是您运行它的机器
2.  这个构建机器比你的机器有更多的内核
3.  ATLAS 3.10 不知道如何处理少于构建时数量的内核并生成异常。

解决方案是在核心数低于或等于当前机器的机器上构建 ATLAS。

希望这可以帮助，

# c# - Word 加载项：获取用于从 SharePoint 打开文档的用户凭据

> ID：14236718
> 
> 赞同：4
> 
> 时间：2013-01-09T13:50:58.730
> 
> 标签：c#, sharepoint, sharepoint-2010, ms-word, add-in

我们正在 C# 和 WPF 上开发 Word 插件。

这些文档从位于另一个域中的 SharePoint 打开，并使用加载项进行处理。打开文档时，MS Word 会询问 SharePoint 域的凭据。

在 Word 加载项中，我需要检索这些凭据或任何安全令牌，以与 SharePoint 进行互操作。

当我尝试从 C# 使用 CredentialsCache 时，我获得了本地 Windows/域帐户的凭据，但没有获得 Sharepoint 域帐户的凭据。

我了解 Word 存储 SharePoint 的凭据，因为我无需重新输入密码即可签入/签出并保存。

但是，我能否以某种方式从代码中获取这些凭据以访问 SharePoint 服务而无需重新提示密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:41:27.517

如果被调用的 Web 服务使用 Windows 集成安全性，则从当前 WindowsIdentity 创建 NetworkCredential 应该足以允许 Web 服务使用当前用户的 Windows 登录。但是，如果 Web 服务使用不同的安全模型，则无法从当前身份中提取用户密码……这本身就是不安全的，允许开发人员窃取您的用户密码. 您可能需要为您的用户提供某种方式来提供他们的密码，如果您不希望他们重复提供密码，请将其保存在某个安全缓存中。

编辑：要获取当前身份的凭据，请使用以下命令：

```
Uri uri = new Uri("http://tempuri.org/");
ICredentials credentials = CredentialCache.DefaultCredentials;
NetworkCredential credential = credentials.GetCredential(uri, "Basic"); 
```

# c# - App.config 不是由 .net 程序集定位的

> ID：14236720
> 
> 赞同：0
> 
> 时间：2013-01-09T13:51:05.870
> 
> 标签：c#, asp.net, configuration, .net-assembly

我有一个 ASP.NET 应用程序，它在其参考中添加了 .NET 程序集。该程序集是一个私有程序集，它有一个配置文件，其中包含`<AppSettings>`.

现在的问题是当我调试我的 ASP.NET 应用程序时，程序集没有加载 app.config 文件。

我观察到，在引用程序集的属性下，我拥有`Copy Local=true`.

如果我缺少一些基础知识，任何人都可以帮忙或指出吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:57:36.470

您需要将所有相关设置收集到主 ASP.NET 应用程序的 web.config 文件中。只有正在运行的应用程序（无论是 Web 还是桌面）的配置文件会自动加载。

查看一些关于配置文件如何在 .NET 环境中工作的文章，以了解加载和未加载的基础知识，它肯定会帮助您避免将来出现此类问题。

或者，如果您知道程序集配置文件的名称，则可以`file`向元素添加一个属性`<AppSettings>`，如果该文件被复制到与 web.config 所在的目录相同的目录，则指向该文件。

```
<appSettings file="privateassembly.config"> 
```

请注意，在 web.config 中声明的任何具有相同名称的 appsetting 都将被 privateassembly.config 覆盖。另请注意，对 privateassembly.config 的任何更改（在 ASP.NET 应用程序运行时）都不会重置应用程序池，因此不会加载到 AppDomain 中。

# c# - 如何用图像中的其他颜色替换像素颜色？

> ID：14236721
> 
> 赞同：3
> 
> 时间：2013-01-09T13:51:08.737
> 
> 标签：c#, image, image-processing

我有一个图像，我可以使用 Martix 读取它的所有像素颜色...如何更改任何像素的 RGB 如果我想将其转换为最接近的颜色（黑色、红色或白色）

我在矩阵中读取图像的代码是：

```
string sourceimg = @"D:\ProductionTools\Taskes\Image Processing\Test\001.jpg";
//...
Bitmap imageoriginal = new Bitmap(sourceimg);
int height = imageoriginal.Height;
int width = imageoriginal.Width;
Color[][] colormatrix = new Color[width][];
for (int i = 0; i < width; i++) {
    colormatrix[i] = new Color[height];
    for (int j = 0; j < height; j++) {
        colormatrix[i][j] = new Color();
        colormatrix[i][j] = imageoriginal.GetPixel(i, j);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T14:55:54.563

正如您在评论中指出的那样，问题是关于颜色距离，这不是一件小事。它还与您使用的色彩空间有关，因此在这里我将向您展示 RGB、HSV、HLS 和 CIELAB 的示例。此外，要计算距离，您需要一个公式。为简单起见，让我们坚持欧几里德距离，如![在此处输入图像描述](../Images/8d6628cbaed9c0ba779513240d973de5.png)

然后为了简单地回答您的问题，您计算从当前颜色`q`到您拥有的三个目标`pi`（黑色、红色和白色）的距离。最小距离表示您替换的颜色。在领带的情况下，我保留给出最小距离的最早颜色。

现在，色彩空间在这项任务中也非常重要，因为它确定了欧几里德距离的含义。这是一个示例图像：

![在此处输入图像描述](../Images/2de63aa6985e2265b029e43bb48e5f2a.png)

转换为 RGB：

![在此处输入图像描述](../Images/f3802ae87b5f464d85cbbb703e6f4504.png)

在 HLS 中转换（即 RGB 颜色转换为 HLS 并计算距离）：

![在此处输入图像描述](../Images/230d669ee5a3d9c8f2bba3f61704998c.png)

单纯疱疹病毒：

![在此处输入图像描述](../Images/5b5eb0524dda9e7d850e14b756c413ce.png)

CIELAB：

![在此处输入图像描述](../Images/08a0130b8488def8b8750dc338224020.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:46:02.343

正如已经指出的那样，这个问题最难的部分是知道给定的颜色是否“更接近”黑色、白色或红色。我把一些可能对你有用的东西放在一起：

```
Color GetNearestOfBWR(Color c)
{
     float redness = Math.Abs(180 - c.GetHue()) / 180;
     float brightness = c.GetBrightness();
     float saturation = c.GetSaturation(); 
```

你现在有三个值，每个值都在 0 和 1 之间，从 0 增加到 1 意味着你越来越接近红色（粗略地说：更多的红色/更少的绿色和蓝色，更多的颜色/更少的黑色，更多的颜色/更少的灰色）。

您现在必须决定颜色在什么时候构成“红色”，老实说，这是一个判断电话。你可以简单地拥有

```
 double brightColourfulRedness = Math.Sqrt(
         redness*redness + brightness*brightness + saturation*saturation);
     if (brightColourfulRedness > 1)
         return Color.FromArgb(255, 0, 0); // red; 
```

（简单的欧几里得范数），但您可能希望对特定属性的权重比另一个更强 - 或者只是修改`1`阈值。

然后你必须决定什么映射到黑色或白色；这可能很简单

```
 if (brightness > 0.5)
        return Color.FromArgb(255, 255, 255); // white
    return Color.FromArgb(0, 0, 0); // black
} 
```

伟大的！所以现在你有一个函数可以根据口味将颜色映射为红色、白色或黑色。剩下的就是将其应用于位图中的每个像素。如果您很高兴覆盖`Bitmap`从文件中加载的内容，则不需要该数组；你可以这样做：

```
int height = imageoriginal.Height;
int width = imageoriginal.Width;
for (int i = 0; i < width; i++)
{
    for (int j = 0; j < height; j++)
    {
        Color origC = imageoriginal.GetPixel(i, j);
        Color newC = GetNearestOfBWR(origC);
        imageoriginal.SetPixel(i, j, newC);
    }
} 
```

这可能会很慢，因此您也可以使用 DmitryG 的`LockBits`代码，但您需要在`int`它提供给您的`Color`s和`GetNearestOfBWR`. （`FromArgb`并且`ToArgb`这样做，我相信。）

# iphone - 具有双重条目的 NSArray

> ID：14236722
> 
> 赞同：-1
> 
> 时间：2013-01-09T13:51:12.023
> 
> 标签：iphone, xcode, nsarray

我有一个包含很多条目的 NSArray。但其中一些是两次。而且我希望每个条目在数组中只有一次。

有人知道我该怎么做吗？

这就是我尝试过的方式：

```
NSSet *newsSet = [NSSet setWithArray:news];
newsOrte = [newsSet allObject]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T04:09:08.997

试试这个方法

```
NSArray *array=[[NSMutableArray alloc]initWithObjects:@"A",@"B",@"A",@"C",@"A", nil];    
NSMutableArray *arr=[NSMutableArray new];
for(id obj in array){
    if (![arr containsObject:obj]) {
        [arr addObject:obj];
    }
}
array=arr;
NSLog(@"==> %@",array); 
```

你也可以这样做：

```
NSArray *array=[[NSMutableArray alloc]initWithObjects:@"A",@"B",@"A",@"C",@"A", nil];    
NSMutableDictionary *dict=[[NSMutableDictionary alloc]initWithObjects:array forKeys:array];
array=[dict allKeys];

NSLog(@"==> %@",array); 
```

输出 ：

```
==> (
    A,
    B,
    C
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:05:31.103

为了`NSSet`有效地使用被存储的对象，必须符合`NSObject`协议并实现`hash`( [reference](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/hash) ) 和`isEqual:`( [reference](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/isEqual%3a) ) 方法。

请确保您的对象实现了这些方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T13:55:34.543

这是代码

```
NSArray* originalArray = ... // However you fetch it
NSMutableSet* existingNames = [NSMutableSet set];
NSMutableArray* filteredArray = [NSMutableArray array];
for (id object in originalArray) {
   if (![existingNames containsObject:[object name]]) {
      [existingNames addObject:[object name]];
      [filteredArray addObject:object];
   }
}
originalArray = [NSArray arrayWithArray:filteredArray]; 
```

希望对你有帮助。。

# asp.net-web-api - 每个请求的热交换绑定

> ID：14236727
> 
> 赞同：1
> 
> 时间：2013-01-09T13:51:22.807
> 
> 标签：asp.net-web-api, ninject

我们有一个使用 Ninject 进行 DI 的 ASP.NET Web API 应用程序。这非常适合使用。我们正在考虑的改进之一是能够根据某种唯一标识符交换每个请求的部分功能。

例子。两个客户使用我们的 restful api。两者都具有相同的功能。第三个客户已经为我们的 api 的超级版本付费。他提出请求，我们加载超级 dll 并将超级实现绑定到标准接口。

本质上，我希望看到的是我们能否加载一个 DLL 并使用 Web API 和 Ninject 为每个请求换出绑定。

编辑：

因此，对于原始问题，两个答案都是正确的，但我的意图不同，没有正确解释是我的错。我们拥有的是每个人都能获得的基础功能层。最重要的是，我们还能够基于每个客户实现覆盖此功能的自定义逻辑。此逻辑在 Azure Blob 存储中存储为 DLL。

我们想做的是，当客户提出请求时，获取 DLL，绑定所有自定义服务，然后使用这些新绑定为请求提供服务。

热插拔不是最好的方法吗？我们对 ninject 足够新，所以这可能是一个常见的事情，它的实现方式与我们正在考虑的不同。

对某些人来说，我们希望能够为每个客户提供自定义绑定服务。

编辑2：

我们对项目使用条件绑定，如果我们知道我们有替代实现，但在上面的场景中，直到我们获得客户信息并扫描我们不知道是否有替代绑定的 dll。我们甚至不知道是否有dll。

我们希望这样做，以便我们可以将文件放入而不是在项目中引用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:31:17.607

使用条件绑定：

```
Bind<IMyService>().To<MyService>();
Bind<IMyService>().To<MyServiceForVIPs>().When(ctx => CurrentPrincipalIsVIP()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T16:35:22.723

我不介意您可以根据请求换出绑定。但是您可以做的是使用条件绑定。

**示例 - 默认绑定：**

```
protected override Ninject.IKernel CreateKernel()
{
    var kernel = new StandardKernel();

    kernel.Bind<IAuthorizationService>()
        .To<AuthorizationService>()
        .InRequestScope();

    kernel.Bind<IService>()
        .To<BasicService>();

    return kernel;
} 
```

它将为一些基本用户和VIP 用户注入（在`IService`需要的地方） 。`BasicService``ExtraService`

有关条件绑定的各种方式的更多信息，请参阅[Ninject-Contextual binding](https://github.com/ninject/ninject/wiki/Contextual-Binding)。

**编辑**

我认为您仍然可以使用条件绑定。您只需将 传播`IKernel`到要从新 dll 注册组件的位置。例如，我在我`global.asax`的动态加载 dll 模块中有这个 - 它在应用程序启动时运行。

**加载模块：**

```
private void LoadAssemblies(IKernel kernel) {
    foreach (var fileName in Directory.GetFiles(Server.MapPath("~/App_Data"), "*.dll")) {
        Assembly loadedAssembly = Assembly.LoadFile(fileName);
        try {
            var moduleRegistrations = loadedAssembly.GetTypes()
                .Where(t => t.IsClass && t.IsAbstract == false && typeof (IMyModuleRegistration).IsAssignableFrom(t));

            foreach (var moduleRegType in moduleRegistrations ) {
                IMyModuleRegistration moduleReg = (IMyModuleRegistration) Activator.CreateInstance(moduleRegType);
                moduleReg.RegisterComponents(kernel);
            }
        }
        catch (ReflectionTypeLoadException exception) {
            ....
        }
    }
} 
```

**模块定义：**

```
public class MyExtraModule : IMyModuleRegistration
{
     public void RegisterComponents(IKernel kernel)
     {
         kernel.Bind<IService>()
               .To<ExtraService>()
               .When(x => x.ParentContext
                           .Kernel.Get<IAuthorizationService>()
                           .IsVIPUser());
     }
} 
```

`ExtraService`仅在`MyExtraModule`加载 dll with 时使用。

**编辑 2**

您可以从某处下载该 dll。加载它，然后测试它是否实现了您的注册接口。然后调用该注册，您就完成了。我看到的唯一问题是：在哪里存储引用`IKernel`- 可能一些静态属性`HttpApplication`就足够了。您还应该跟踪已加载的 dll。

或者在以后的版本中，`Ninject`我可以建议扩展`NinjectModule`，然后使用`kernel.Load(..)`方法将其加载到内核中。看看这个[模块和内核](https://github.com/ninject/ninject/wiki/Modules-and-the-Kernel)——特别是**动态模块加载**——也许这就是你要找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T07:49:53.280

我假设您知道核心 ninject 模块。您可以将所有核心 ninject 模块加载到内核中。当特殊用户到达时，您可以卸载核心模块并将用户特定模块加载到内核中。

更好的方法是在插件区域有一个特殊的内核。所以实际上每个插件的内核方法加载所需的核心模块并添加用户特定的模块（如果有）。但这可能会对性能产生影响！

# proxy - 常用企业代理服务器

> ID：14236729
> 
> 赞同：1
> 
> 时间：2013-01-09T13:51:29.260
> 
> 标签：proxy

大多数公司/企业常用的代理服务器是什么。一些例子：鱿鱼，温盖特等。

我需要知道前 8-10 种常用代理。

谢谢，

维奈

# html - CSS 菜单项不捕获所有鼠标移动

> ID：14236730
> 
> 赞同：0
> 
> 时间：2013-01-09T13:51:34.760
> 
> 标签：html, css

我不确定如何最好地描述我在这里遇到的问题。我在网上获得了一个 CSS 驱动的菜单，并根据我的需要对其进行了调整。它在所有浏览器中都能完美运行，但在 IE 中，当您从主导航移动到下拉列表中的项目时，它并不总是捕捉到移动然后“关闭”下拉列表。

我怀疑当您移到下拉列表时，项目所在的列表不是块元素，因此它会关闭下拉列表，只有当您没有移到下拉列表并且没有完全覆盖列表的文本时才会发生这种情况物品。

这是链接：[http](http://www.tepgtests.co.za/decorex/2012/new_site/) ://www.tepgtests.co.za/decorex/2012/new_site/ - 如果您从“Shows”移动到“Durban”并且没有将鼠标光标完全移动到单词上而是移动到下拉菜单你会看到它的作用。

先感谢您 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:57:08.323

听起来您的 CSS 正在使用 inline-block 指令，这在 IE 中没有得到很好的支持。

我认为这个答案可能会解决您的问题，而不是重复它：[Inline block doesn't work in internet explorer 7, 6](https://stackoverflow.com/questions/5838454/inline-block-doesnt-work-in-internet-explorer-7-6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:57:15.737

有1px的空白，

悬停该空间会关闭子菜单，因为您不再悬停菜单...

尝试通过移动菜单正下方的子菜单来删除它：

```
.navigation_bar .first_level_menu_block {
      left: 0;
      top: 50px;
} 
```

在 IE9 中测试，它可以工作

# ruby-on-rails - Rails 3.2.9 和子文件夹中的模型

> ID：14236742
> 
> 赞同：5
> 
> 时间：2013-01-09T13:52:00.333
> 
> 标签：ruby-on-rails, loading

从 rails 3.2.9 开始，我无法将模型存储在子文件夹中。在我的应用程序中，我有这棵树：

```
models
 -type_models
 -assets
 -user
 -concerns 
```

在 application.rb 中还有

```
config.autoload_paths += Dir["#{config.root}/app/models/*"] 
```

在rails 3.2.9之前一切都很好。现在我有“未知常量”错误。我不想命名大量模型并修复所有应用程序以使用命名空间模型。

```
Warning: Error loading /var/www/my_app/app/models/type_models/context_type.rb:
uninitialized constant TypeModels::ContextType 
```

文件 context_type.rb：

```
class ContextType ... end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-20T12:32:59.707

在`config/application.rb`：

```
config.autoload_paths += %W(type_models assets user concerns).map { |folder| "#{config.root}/app/models/#{folder}"} 
```

在`models/type_models/context_type.rb`：

```
class TypeModels::ContextType < ActiveRecord::Base
  ...
end 
```

重新启动 Rails，一切就绪！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:55:20.337

尝试使用：

```
config.autoload_paths += Dir["#{config.root}/app/models/**/"] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-20T11:40:54.997

包装你`class ContextType ... end`的模块：

```
module TypeModels
  class ContextType
    # blah blah
  end
end 
```

# java - Java小程序的保存状态

> ID：14236746
> 
> 赞同：2
> 
> 时间：2013-01-09T13:52:21.983
> 
> 标签：java, applet, japplet

我有一个相当复杂的未签名 Java 小程序。它（除其他外）包含用户可以浏览的树。我打算将该小程序捆绑到现有网页中，但是当用户转到我网站的另一个页面时，小程序应该以某种方式保持其状态。所以，我需要你的帮助，因为我不知道是否有办法让未签名的小程序在用户导航到我网站的另一个页面时“休眠”，并在用户返回“小程序页面”时“激活”为用户提供继续它的工作（当他回来时，他留下选择的树节点仍然被选中，等等）。未签名的小程序有可能吗？如果是 - 如何，如果不是，为什么？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:00:25.817

由于小程序未签名，因此您只有两种方法：

1.  在 cookie 中保存状态
2.  在服务器上保存状态

使用来自applet 的cookie 需要您使用“实时连接”，即您将实际调用放置您的applet 的页面的java 脚本来操作cookie。您可以在每次更改时保存状态并在小程序初始化时读取它。

[http://jdk6.java.net/plugin2/liveconnect/](http://jdk6.java.net/plugin2/liveconnect/)

如果你愿意，你可以在服务器端管理状态。例如，您可以在允许保存和检索您的状态的服务器上提供 RESTful API。然后从您的小程序中调用它。

# linux - QMAKE_CXXFLAGS 不起作用

> ID：14236751
> 
> 赞同：0
> 
> 时间：2013-01-09T13:52:34.497
> 
> 标签：linux, compiler-warnings, qt5

我到处都在阅读要向编译器添加标志的内容，我们必须在 .pro 中添加如下命令：

```
QMAKE_CXXFLAGS += -Wimplicit-function-declaration 
```

对，我在 Linux 64bit，Qt5 下，在我的 .pro 中添加它并没有改变任何东西

原来编译行里面看不到flag，生成的**Makefile**里面的CXXFLAGS也不包含我的flag！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:03:45.783

我发现有时 qmake 有点懒惰，即使 .pro 已更改，也不会重新生成 Makefile。尝试重建所有内容，或至少删除 Makefile。

# visual-studio-2010 - 在代码编辑器中拖放时，有没有办法从解决方案资源管理器中打开文件。对比 2010/2012

> ID：14236756
> 
> 赞同：2
> 
> 时间：2013-01-09T13:52:40.830
> 
> 标签：visual-studio-2010, drag-and-drop, visual-studio-2012

**我真的希望能够在将文件从“解决方案资源管理器”**拖放到Visual Studio 的代码编辑器（主）窗口时打开文件。

有没有办法做到这一点 ？不敢相信微软没有想到这一点！

Visual Studio 不是打开文件，而是使用其路径创建指向该文件的链接。知道我可以做同样的事情，只需将文件复制粘贴到代码编辑器中，这是没有用的。

从 Windows 资源管理器拖动到代码编辑器窗口时，可以直接打开文件。我希望与“解决方案资源管理器”相同！

# c# - 尝试创建目录时出现 IOException（“文件或目录已存在”）

> ID：14236757
> 
> 赞同：9
> 
> 时间：2013-01-09T13:52:41.910
> 
> 标签：c#, .net, ironpython

我的 C# 项目中有一个奇怪的问题，它在尝试通过 IronPython 脚本创建目录时发生。这是代码：

```
targetTemplateDirectory = Path.Combine(Data, "Templates\\CheckedReports")

if not Directory.Exists(targetTemplateDirectory):
    Directory.CreateDirectory(targetTemplateDirectory) 
```

问题是`IOException`告诉我无法创建文件夹`"H:\ProductName\Data\Templates\CheckedReports"`，因为已经存在同名的文件或目录。

根据 MSDN，`Directory.CreateDirectory()`当目录已经存在时，该方法不会引发任何异常。

我知道名为“ `CheckedReports`”的文件可能是导致此异常的原因，但客户手动创建该文件的可能性非常非常小。除此之外，没有包含单词“ `CheckedReports`”的代码行（除了提到的脚本）。此外，该应用程序被几千个客户使用，脚本在每台机器上执行，只有一个客户报告了这个问题。

除了同名文件之外，是否有可能发生此异常？也许与权限、可移动媒体或网络驱动器有关？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T14:23:59.970

虽然只为一个用户使用这个有点过分，但应该可以检查是否存在具有该名称的文件。

```
FileInfo myFile = new FileInfo(targetTemplateDirectory);
if (myFile.Exists)
    myFile.Delete();

if (!Directory.Exists(targetTemplateDirectory))
    Directory.CreateDirectory(targetTemplateDirectory); 
```

如果 I/O 异常是由同名文件引起的，这可能会解决问题。如果是因为“网络名称未知”是用户造成的，那我也没有头绪。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-13T13:00:03.057

我们也有同样的情况，在我们的例子中很明显这是一个权限问题。我们期待记录在案的 UnauthorizedAccessException，但这不是我们得到的。

在堆栈中，我们有 Directory.CreateDirectory 调用 Directory.InternalCreateDirectory。

里面有这个注释：

```
 //Note that InternalExists may fail due 
        // to Win32 ACL's preventing us from seeing a directory, and this
        // isn't threadsafe. 
```

有更多关于它的注释，更深入地了解这个事实，代码可能会尝试创建在看不到它时已经存在的目录。

# java - 调用由 winrun4j 制作的 Windows 服务中的方法

> ID：14236760
> 
> 赞同：0
> 
> 时间：2013-01-09T13:52:44.750
> 
> 标签：java, windows-services, winrun4j

我使用 WinRun4J 从 jar 文件创建了一个 Windows 服务，到目前为止它非常基础。

```
package org.boris.winrun4j.test;

import java.io.BufferedWriter;
import java.io.FileWriter;

import org.boris.winrun4j.Service;
import org.boris.winrun4j.ServiceException;

public class ServiceWrite implements Service
{   
private volatile boolean shutdown = false;

public int serviceMain(String[] args) throws ServiceException {
    int count = 0;
    while (!shutdown) {
        try {
            Thread.sleep(6000);
        } catch (InterruptedException e) {

        }
        try {
            FileWriter fstream = new FileWriter("result.txt");
            BufferedWriter out = new BufferedWriter(fstream);
            out.write("Counts: " + count);
            out.close();
        } catch (Exception e){

        }
        count++;
    }
    return 0;
}
public int serviceRequest(int control) throws ServiceException {
    switch (control) {
    case SERVICE_CONTROL_STOP:
    case SERVICE_CONTROL_SHUTDOWN:
        shutdown = true;
        break;
    }
    return 0;
}
} 
```

当服务启动时，它每隔几秒钟就会不断写入位于根文件夹中的 result.txt .. （仅用于尝试 WinRun4J）

现在我的问题是，我可以在服务 jar 中做一个方法吗，像这样

```
public void write(String s){
 //Write some string s to result.txt
} 
```

然后从系统上不同的java文件调用这个方法，即

```
java WriteToFile SomeString 
```

WriteToFile 应该使用一些参数调用 write 。

可能吗？如果是这样，怎么办？

这样做的总体目的是让服务运行，我可以通过 GUI 调用方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:02:37.480

“通过 GUI 调用方法”，你不能用 WinRun4J 来做。一般来说，出于安全原因，Windows 服务不能有 GUI（特殊情况除外）。

但是，还有其他工具可以从 Java 应用程序创建 Windows 服务，使用这些工具可以拥有带有 GUI 的服务并能够与桌面交互。

# linux - nvidia cuda和驱动版本不足

> ID：14236761
> 
> 赞同：1
> 
> 时间：2013-01-09T13:52:44.693
> 
> 标签：linux, cuda, nvidia

我正在尝试使用 CUDA 技术，但有一些问题

```
greymachine ~/NVIDIA_CUDA-5.0_Samples/1_Utilities/deviceQuery $ ./deviceQuery 
./deviceQuery Starting...

 CUDA Device Query (Runtime API) version (CUDART static linking)

cudaGetDeviceCount returned 35
-> CUDA driver version is insufficient for CUDA runtime version

greymachine ~/NVIDIA_CUDA-5.0_Samples/1_Utilities/deviceQuery $ 
```

那是我的问题。

我的配置：

```
$ nvidia-settings -q NvidiaDriverVersion
  Attribute 'NvidiaDriverVersion' (greymachine.localdomain:0.0): 310.19

$ uname -r
3.7.1-un-def-alt2.1

$ nvcc -V
nvcc: NVIDIA (R) Cuda compiler driver
Copyright (c) 2005-2012 NVIDIA Corporation
Built on Fri_Sep_21_17:28:58_PDT_2012
Cuda compilation tools, release 5.0, V0.2.1221 

$ ./deviceQueryDrv 
./deviceQueryDrv Starting...

CUDA Device Query (Driver API) statically linked version 
Detected 1 CUDA Capable device(s)

Device 0: "GeForce GT 430"
  CUDA Driver Version:                           5.0
  CUDA Capability Major/Minor version number:    2.1
  Total amount of global memory:                 1024 MBytes (1073283072 bytes)
  ( 2) Multiprocessors x ( 48) CUDA Cores/MP:    96 CUDA Cores
  GPU Clock rate:                                1400 MHz (1.40 GHz)
  Memory Clock rate:                             800 Mhz
  Memory Bus Width:                              128-bit
  L2 Cache Size:                                 131072 bytes
  Max Texture Dimension Sizes                    1D=(65536) 2D=(65536,65535) 3D=(2048,2048,2048)
  Max Layered Texture Size (dim) x layers        1D=(16384) x 2048, 2D=(16384,16384) x 2048
  Total amount of constant memory:               65536 bytes
  Total amount of shared memory per block:       49152 bytes
  Total number of registers available per block: 32768
  Warp size:                                     32
  Maximum number of threads per multiprocessor:  1536
  Maximum number of threads per block:           1024
  Maximum sizes of each dimension of a block:    1024 x 1024 x 64
  Maximum sizes of each dimension of a grid:     65535 x 65535 x 65535
  Texture alignment:                             512 bytes
  Maximum memory pitch:                          2147483647 bytes
  Concurrent copy and kernel execution:          Yes with 1 copy engine(s)
  Run time limit on kernels:                     Yes
  Integrated GPU sharing Host Memory:            No
  Support host page-locked memory mapping:       Yes
  Concurrent kernel execution:                   Yes
  Alignment requirement for Surfaces:            Yes
  Device has ECC support:                        Disabled
  Device supports Unified Addressing (UVA):      Yes
  Device PCI Bus ID / PCI location ID:           1 / 0
  Compute Mode:
     < Default (multiple host threads can use ::cudaSetDevice() with device simultaneously) > 

$ lsmod | grep nvidia
nvidia               9381500  39 
i2c_core               30993  3 i2c_i801,nvidia,videodev

dmesg:
[   28.548939] NVRM: loading NVIDIA UNIX x86_64 Kernel Module  310.19  Thu Nov  8 00:52:03 PST 2012
[   29.065356] NVRM: GPU at 0000:01:00: GPU-5a5ce500-f7fd-ab9d-64d7-cc0d1fe26ff1
[   29.065360] NVRM: Your system is not currently configured to drive a VGA console
[   29.065361] NVRM: on the primary VGA device. The NVIDIA Linux graphics driver
[   29.065362] NVRM: requires the use of a text-mode VGA console. Use of other console
[   29.065363] NVRM: drivers including, but not limited to, vesafb, may result in
[   29.065364] NVRM: corruption and stability problems, and is not supported.
 1682.331776] NVRM: GPU at 0000:01:00: GPU-5a5ce500-f7fd-ab9d-64d7-cc0d1fe26ff1

$ ldd ./deviceQuery 
        linux-vdso.so.1 (0x00007fffd4dff000)
        libcudart.so.5.0 => /usr/local/cuda-5.0/lib64/libcudart.so.5.0 (0x00007f5e90c26000)
        libstdc++.so.6 => /usr/lib64/libstdc++.so.6 (0x00007f5e90922000)
        libgcc_s.so.1 => /lib64/libgcc_s.so.1 (0x00007f5e9070c000)
        libc.so.6 => /lib64/libc.so.6 (0x00007f5e90362000)
        libpthread.so.0 => /lib64/libpthread.so.0 (0x00007f5e90145000)
        libdl.so.2 => /lib64/libdl.so.2 (0x00007f5e8ff40000)
        librt.so.1 => /lib64/librt.so.1 (0x00007f5e8fd38000)
        libm.so.6 => /lib64/libm.so.6 (0x00007f5e8fa3e000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f5e90eaa000) 
```

我已经安装了从 nvidia 站点下载的 cuda 工具包，我已经从我的发行版（Alt Linux）预编译了驱动程序，但是 libcuda.so 没有附带它们，所以我从原始 nvidia 驱动程序中复制了该库。编译没问题。我还用 304.51 测试了 2.6.32 内核：得到了相同的 msg，但这是可以理解的，cuda 带有 304.54 驱动程序。

AFAIU，如果我有更新的驱动程序，而不是 cuda 工具包，那没关系。但正如你所见，有些事情是错误的。

那么，内核驱动程序可以比原始驱动程序更新（即我使用 cuda 获得的驱动程序）可能我应该自己编译模块吗？但是为了什么，为什么？我的发行版模块运行良好。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-03T08:12:46.007

这似乎是由非常损坏的 CUDA 安装引起的。通常的解决方案是卸载所有内容，安装受支持的主机工具链，然后重新安装驱动程序和工具包。每个工具包都包含详细的安装说明和系统要求。如果您阅读并遵循这些内容，则很少会出现此类问题。

[此答案是从评论中收集的，并添加为社区 wiki 条目，以将其从未回答的问题列表中删除]

# java - SAX 解析：如何获取子节点

> ID：14236767
> 
> 赞同：6
> 
> 时间：2013-01-09T13:52:54.770
> 
> 标签：java, android, xml, sax

我在 android 中使用 SAX 解析。对于以下 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>Game Analysis</title>
        <item>
            <title>GTA</title>
            <description>ABC</description>
            <pubDate>Sat, 21 Feb 2012 05:18:23 GMT</pubDate>
            <enclosure type="audio/mpeg" url="http://URL.mp3" length="6670315"/>
        </item>
        <item>
            <title>CoD</title>
            <description>XYZ</description>
            <pubDate>Sat, 21 Feb 2011 05:18:23 GMT</pubDate>
            <enclosure type="audio/mpeg" url="http://URL.mp3" length="6670315"/>
        </item>
    </channel>
</rss> 
```

我需要获取`<title>`（就在下面）的第一次出现。

然后从每个块中我再次需要提取`<title> & <enclosure>`.

我可以使用以下方法获取第一个`<title>`： public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException { if (qName.equals("title")) ... }

但是，我应该如何获取里面的标签`<item> block`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-06T22:48:58.210

以下是我使用 SAX 的方法。

我修改了一点你的 XML 文件。

*XML 文件*

```
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>Game Analysis</title>
        <item>
            <title>GTA</title>
            <description>ABC</description>
            <pubDate>Sat, 21 Feb 2012 05:18:23 GMT</pubDate>
            <enclosure type="audio/mpeg" url="http://URL.mp3/1" length="6670315"/>
        </item>
        <item>
            <title>CoD</title>
            <description>XYZ</description>
            <pubDate>Sat, 21 Feb 2011 05:45:10 GMT</pubDate>
            <enclosure type="audio/mpeg" url="http://URL.mp3/2" length="6670345"/>
        </item>
        <item>
            <title>AtV</title>
            <description>fgh</description>
            <pubDate>Sat, 21 Feb 2011 06:20:10 GMT</pubDate>
            <enclosure type="audio/mpeg" url="http://URL.mp3/3" length="6670364"/>
        </item>
    </channel>
    <channel>
        <title>Game Analysis 2</title>
        <item>
            <title>GTA 2</title>
            <description>ABC 2</description>
            <pubDate>Sat, 21 Feb 2012 04:18:23 GMT</pubDate>
            <enclosure type="audio/mpeg" url="http://URL.mp3/2/1" length="6670315"/>
        </item>
        <item>
            <title>CoD 2</title>
            <description>XYZ 2</description>
            <pubDate>Sat, 21 Feb 2011 04:45:10 GMT</pubDate>
            <enclosure type="audio/mpeg" url="http://URL.mp3/2/2" length="6670345"/>
        </item>
        <item>
            <title>AtV 2</title>
            <description>fgh</description>
            <pubDate>Sat, 21 Feb 2011 05:20:10 GMT</pubDate>
            <enclosure type="audio/mpeg" url="http://URL.mp3/2/3" length="6670364"/>
        </item>
    </channel>
</rss> 
```

**实体**

*渠道*

```
public class Channel {

    private String title;
    private ArrayList<Item> alItems;

    public Channel(){}

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public ArrayList<Item> getAlItems() {
        return alItems;
    }

    public void setAlItems(ArrayList<Item> alItems) {
        this.alItems = alItems;
    }

} 
```

*外壳*

```
public class Enclosure {

    private String type;
    private URL url;
    private Integer length;

    public Enclosure(){}

    public String getType() {
        return type;
    }

    public void setType(String type) {
        this.type = type;
    }

    public URL getUrl() {
        return url;
    }

    public void setUrl(URL url) {
        this.url = url;
    }

    public Integer getLength() {
        return length;
    }

    public void setLength(Integer length) {
        this.length = length;
    }

} 
```

*物品*

```
public class Item {

    private String title;
    private String description;
    private String pubDate;
    private Enclosure enclosure;

    public Item(){}

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public String getPubDate() {
        return pubDate;
    }

    public void setPubDate(String pubDate) {
        this.pubDate = pubDate;
    }

    public Enclosure getEnclosure() {
        return enclosure;
    }

    public void setEnclosure(Enclosure enclosure) {
        this.enclosure = enclosure;
    }

} 
```

**处理程序**

*通道处理程序*

```
public class ChannelHandler extends DefaultHandler{

    private ArrayList<Channel> alChannels;
    private Channel channel;
    private String reading;
    private ArrayList<Item> alItems;
    private Item item;
    private Enclosure enclosure;

    public ChannelHandler(){
        super();
    }

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {

        if(qName.equals("rss")){
                alChannels = new ArrayList<>();
        }
        else if(qName.equals("channel")){
            channel = new Channel();
        }
        else if(qName.equals("item")){
            item = new Item();
        }
        else if(qName.equals("enclosure")){

            enclosure = new Enclosure();
            enclosure.setType(attributes.getValue("type"));
            try {
                enclosure.setUrl(new URL(attributes.getValue("url")));
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            enclosure.setLength(Integer.parseInt(attributes.getValue("length")));

        }

    }

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {

        if(qName.equals("channel")){
            channel.setAlItems(alItems);
            alChannels.add(channel);
            alItems = null;
        }
        if(qName.equals("title")){

            if(alItems == null){
                channel.setTitle(reading);
                alItems = new ArrayList<>();
            }
            else if(item != null) {
                item.setTitle(reading);
            }

        }
        else if(qName.equals("item")){

            if(alItems != null){
                alItems.add(item);
                item = null;
            }

        }
        else if(qName.equals("description")){
            item.setDescription(reading);
        }
        else if(qName.equals("pubDate")){
            item.setPubDate(reading);
        }
        else if(qName.equals("enclosure")){
            item.setEnclosure(enclosure);
        }

    }

    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        reading = new String(ch, start, length);
    }

    public ArrayList<Channel> getAlChannels() {
        return alChannels;
    }

} 
```

**经理**

*XML管理器*

```
public final class XMLManager {

    public static ArrayList<Channel> getAlChannels(){
        ArrayList<Channel> alChannels = null;
        SAXParserFactory factory = SAXParserFactory.newInstance();
        try {
            SAXParser parser = factory.newSAXParser();
            File file = new File("D:\\Loic_Workspace\\TestSAX2\\res\\test.xml");
            ChannelHandler channelHandler = new ChannelHandler();
            parser.parse(file, channelHandler);
            alChannels = channelHandler.getAlChannels();
        } catch (ParserConfigurationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SAXException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return alChannels;
    }

} 
```

**主要的**

*我的主*

```
public class MyMain {

    /**
     * @param args
     */
    public static void main(String[] args) {

        Enclosure enclosure = null;
        for(Channel channel : XMLManager.getAlChannels()){
            System.out.println("Channel title : "+channel.getTitle());
            System.out.println("------------------------");
            for(Item i:channel.getAlItems()){
                System.out.println(i.getTitle());
                System.out.println(i.getPubDate());
                System.out.println("Enclosure : ");
                enclosure = i.getEnclosure();
                System.out.println(enclosure.getType());
                System.out.println(enclosure.getUrl());
                System.out.println(enclosure.getLength());
                System.out.println("------------------------");
            }
        }

    }

} 
```

**在控制台输出**

```
Channel title : Game Analysis
------------------------
GTA
Sat, 21 Feb 2012 05:18:23 GMT
Enclosure : 
audio/mpeg
http://URL.mp3/1
6670315
------------------------
CoD
Sat, 21 Feb 2011 05:45:10 GMT
Enclosure : 
audio/mpeg
http://URL.mp3/2
6670345
------------------------
AtV
Sat, 21 Feb 2011 06:20:10 GMT
Enclosure : 
audio/mpeg
http://URL.mp3/3
6670364
------------------------
Channel title : Game Analysis 2
------------------------
GTA 2
Sat, 21 Feb 2012 04:18:23 GMT
Enclosure : 
audio/mpeg
http://URL.mp3/2/1
6670315
------------------------
CoD 2
Sat, 21 Feb 2011 04:45:10 GMT
Enclosure : 
audio/mpeg
http://URL.mp3/2/2
6670345
------------------------
AtV 2
Sat, 21 Feb 2011 05:20:10 GMT
Enclosure : 
audio/mpeg
http://URL.mp3/2/3
6670364
------------------------ 
```

所以它有效;）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:08:36.467

SAX 不适合这项工作。使用 DOM 和 XPath 可以轻松解决您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T14:05:57.440

您使用堆栈（或类似的）并记住您需要的任何内容。SAX 是基于事件的，因此您必须自己管理有关您所在位置的信息。考虑这样的事情：

```
public Parser extends ....
    private Item item;
    private StringBuffer buffer;

    startElement(String uri,)...{
        buffer = new StringBuffer();
    }
    characters(...) {
        buffer.append(...); // sorry, coding by memory directly on SO, can't remember correct syntax.
    }
    endElement(String uri, String qName...) {
        if(qName.equals("item") {
            handleOldItem();
            item = new Item();
        } else if(qname.equals("title") {
            item.setTitle(buffer.toString());
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T14:29:07.827

就地 SAX 解析器使用 Dom 解析器，以下是您的完整答案：-

```
DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory
                .newInstance();
        documentBuilderFactory.setCoalescing(true);
        DocumentBuilder documentBuilder = documentBuilderFactory
                .newDocumentBuilder();
        Document document = documentBuilder.parse(new InputSource(is));
            title =   document.getElementsByTagName("title").item(0).getFirstChild().getNodeValue().trim();
        itemList = document.getElementsByTagName("item");
        for (int i = 0; i < itemList .getLength(); i++) {
            if(itemModel == null){
                itemModel = new ItemModel();
            }
            if(arrListItemModel==null){
                arrListItemModel= new ArrayList<ItemModel>();
            }
            itemItem = (Element)itemList .item(i);
            itemModel.setTitle(itemItem                                                                                                                          .getElementsByTagName("title").item(0).getFirstChild().getNodeValue().trim());
            itemModel.setDescription(itemItem .getElementsByTagName("description").item(0).getFirstChild().getNodeValue().trim());
            itemModel.setPubDate(itemItem .getElementsByTagName("pubDate").item(0).getFirstChild().getNodeValue().trim());
            itemModel.setEnclosure(itemItem .getElementsByTagName("enclosure ").item(0).getFirstChild().getNodeValue().trim());
            arrListItemModel.add(tippsModel);
            itemModel =null;
        } 
```

# ruby-on-rails - 将 Rake 任务的时区设置为与 RoR 应用程序中的默认时区相同

> ID：14236771
> 
> 赞同：1
> 
> 时间：2013-01-09T13:53:06.813
> 
> 标签：ruby-on-rails, timezone

我有几个取决于时区的 rake 任务。

Rails 应用程序默认时区是 +5:30 GMT，时区在 rails 应用程序中是正确的，但在 rake 任务中，默认时区是 GMT，我如何更改 rake 任务中的默认时区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:48:48.660

Rails 应用程序自动将 sql 查询转换为

```
WHERE (orders.created_at >= '2013-01-08 18:30:00.000000' AND orders.created_at <= '2013-01-09 18:29:59.999999') 
```

我需要手动编辑查询

# java - TableLayout中textviews和tablerows的布局 - Android

> ID：14236786
> 
> 赞同：0
> 
> 时间：2013-01-09T13:53:54.043
> 
> 标签：java, android, textview, tablelayout, tablerow

我想要实现的是一个简单的 3 列 11 行表。现在所有数据都显示在 1 列和 33 行中。这是输出：

```
Rank
Percentage
Score
1
1234
13453
2
2352435
312413
3
235325
235423

//etc... 
```

我已经搞砸了许多 TableLayouts 的在线示例，但我的所有输出对于所有示例都保持不变。我下面的只是我尝试的最后一个。有什么建议么？

高分main.xml

```
<ScrollView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/scroller"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:fillViewport="true" >"

    <TableLayout
        android:id="@+id/tableLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:stretchColumns="1" >

        <TableRow
            android:id="@+id/rowHeader"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

            <TextView
                android:id="@+id/rank"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1" />

            <TextView
                android:id="@+id/percentage"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1" />

            <TextView
                android:id="@+id/score"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1" />

        <TableRow
            android:id="@+id/row1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

            <TextView
                android:id="@+id/r1r"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

            <TextView
                android:id="@+id/r1p"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

            <TextView
                android:id="@+id/r1s"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

        <TableRow
            android:id="@+id/row2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

            <TextView
                android:id="@+id/r2r"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

            <TextView
                android:id="@+id/r2p"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

            <TextView
                android:id="@+id/r2s"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

       //TableRows 1 through 10 are identical.

        <Button 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="MAIN MENU"
            android:id="@+id/homeBtn" />
    </TableLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:04:50.230

对表中的所有行都这样做

```
 <TableRow
        android:id="@+id/rowHeader"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/rank"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <TextView
            android:id="@+id/percentage"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <TextView
            android:id="@+id/score"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1" />
        </TableRow> 
```

# linux - 启动 Mongodb 作为服务需要对数据目录的权限

> ID：14236788
> 
> 赞同：2
> 
> 时间：2013-01-09T13:54:02.903
> 
> 标签：linux, mongodb

我是 linux 和 mongodb 的新手，所以这可能是一个新问题......

我可以像这样开始 mongo (alt #1)

```
$ mongod --dbpath /mnt/datadrive/data --logpath /mnt/datadrive/data/mongod.log 
```

但是当我开始时是“服务方面的”（替代#2）

```
$ sudo service mongod start 
```

我得到：

```
Starting mongod: can't open /mnt/datadrive/data/mongod.log
for log file: errno:13 Permission denied 
```

（我在 /etc/mongod.conf 中设置了 dbpath 和 logpath）

那么，运行 alt #2 时，mongod 是否以不同的用户启动？那是什么账户？

如果是这样，我如何允许该帐户访问 /mnt/datadrive/data/ ？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:21:39.443

```
chown -R mangodb /mnt/datadrive 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:03:25.850

如果您使用的是 RHEL 发行版，那么在`/etc/init.d/mongod`脚本中您可能有：

```
daemon --user mongodb "$exec --quiet $options run >> $logfile 2>&1 &" 
```

检查 上的权限`/mnt/datadrive/`，用户很可能`mongodb`无法访问该位置。

# javascript - jZebra 与 Zebra TLP2844

> ID：14236794
> 
> 赞同：1
> 
> 时间：2013-01-09T13:54:38.273
> 
> 标签：javascript, asp.net, arabic, zebra-printers

如何使用 jZebra 从客户端使用 javascript 使用 TLP 2844 进行打印。我试图打印阿拉伯文本，但我不能，我试图将编码设置为 UTF-8，但我仍然得到奇怪的符号。是字体的问题吗？如果是这样，请帮我更改字体。

顺便说一句，我正在使用 ASP.NET

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:23:54.160

这是输入到 jZebra 错误跟踪器中的 ESC/P[的类似问题。](http://code.google.com/p/jzebra/issues/detail?id=105&can=1&q=arabic)

在编程手册的[第 113 页](https://support.zebra.com/cpws/docs/eltron/epl2/EPL2_Prog.pdf#Page=113)上，列出了 CodePage 支持。我没有看到那里专门列出了阿拉伯语，因此您可能需要将文本呈现为图形，或者选择一个与阿拉伯语足够接近以便可识别的字符集。

这只是代表我在互联网上所做的研究，没有任何实际操作。

-特雷斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-20T14:29:43.733

这可能是你的答案，虽然我没有使用它的 pdf 方面。

[https://github.com/qzindustries/qz-print](https://github.com/qzindustries/qz-print)

# mysql - MySQL ERROR 1054:UNKNOWN COLUMN 'amount' in field list

> ID：14236795
> 
> 赞同：2
> 
> 时间：2013-01-09T13:54:38.053
> 
> 标签：mysql, triggers, mysql-error-1054

我想创建一个触发器，以便：

1.  如果 AMOUNT 字段 < 100，AMOUNT 字段会自动插入 100。
2.  如果 AMOUNT > 100，则应在 AMOUNT 字段中插入输入的值。

桌子：

```
CREATE TABLE DB_triggers.acc(
    C_ID INT(3) UNIQUE NOT NULL AUTO_INCREMENT ,
    customer_name CHAR(30),amount FLOAT(10,2) UNSIGNED, 
    date_created DATE,PRIMARY KEY(C_ID,customer_name)
) AUTO_INCREMENT=100; 
```

扳机：

```
DELIMITER $$ 
    CREATE TRIGGER trig_acc
    BEFORE INSERT ON acc

    FOR EACH ROW 

    BEGIN
    IF amount <100 THEN

    INSERT INTO acc VALUES(new.c_id,new.customer_name,100,new.now());
    ELSE
    INSERT INTO acc VALUES(new.c_id,new.customer_name,new.amount,new.now());

    END IF;

END $$
DELIMITER ; 
```

但是，当我插入一个值时：

```
INSERT INTO 
    acc(c_id,customer_name,amount,date_created) 
VALUES
    (DEFAULT,'ABC',1000,NOW()); 
```

给出错误 1054

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:57:16.417

**将IF amount <100 THEN**更改为**IF new.amount <100 THEN**那么它将起作用。

尝试这个：

```
DELIMITER $$ 
 CREATE TRIGGER trig_acc
 BEFORE INSERT ON acc
 FOR EACH ROW 

BEGIN
IF new.amount <100 THEN

INSERT INTO acc VALUES(new.c_id,new.customer_name,100,new.now());
ELSE
     INSERT INTO acc VALUES(new.c_id,new.customer_name,new.amount,new.now());

END IF;

END $$
DELIMITER ; 
```

# ios - 我应该在接口中声明变量还是在objective-c arc中使用属性？

> ID：14236799
> 
> 赞同：34
> 
> 时间：2013-01-09T13:54:52.503
> 
> 标签：ios, objective-c, automatic-ref-counting, instance-variables

方法1：

```
@interface MyController : UIViewController {
    UILabel *myText;
}

@property (nonatomic, strong) UILabel *myText; 
```

方法2：

```
@interface MyController : UIViewController
@property (nonatomic, strong) UILabel *myText; 
```

方法3：

```
@interface MyController : UIViewController {
    UILabel *myText;
} 
```

我读过一些关于这类东西的文章，但我仍然没有真正意识到我必须采用哪种方法。

我还发现有人说方法 1 是一种旧方法，所以我想知道使用 ARC 的 ios sdk 6 的最佳实践。

我知道使用属性声明变量是生成 getter 和 setter 的一种简单方法，有人建议使用它。但是，我想问一下，如果一个变量不是由另一个类调用的，那么这个变量是否需要使用属性？并将其设置为接口内的私有变量？或者对于仅在接口内声明的变量更好？我想学习最佳实践，所以如果这是一个愚蠢的问题，请原谅我。

而且，有些开发者这样写@synthesize

```
@synthesize myText=_myText; 
```

但有些人这样写：

```
@synthesize myText; 
```

我也想知道区别，哪一个更可取？

非常感谢你！

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-09T14:01:04.547

最现代的方式¹：

*   尽可能声明属性
*   不要单独声明 iVar ²
*   不要@synthesize ³
*   在您的 .h 文件中找到尽可能少的属性⁴
*   在 .m 文件的类扩展中找到尽可能多的属性⁵

* * *

¹ 从 Xcode 4.5.2 开始。其中大部分适用于 4.4，其中一些无法在 4.2（Snow Leopard 下可用的最后一个版本）上编译。这是预处理器的东西，所以它至少与 iOS5 兼容（我没有在 iOS4 上测试过，但也应该没问题）。

²声明 iVar 和属性是没有意义*的*。我敢肯定，在一些晦涩的情况下，您想声明 iVars*而不是*属性，但我想不出。

³ Xcode 将创建一个与属性同名的 iVar，前面有一个 _underscore。如果您（很少）需要其他类型的行为，您可以手动`@synthesize property = someOtherName`. @vikingosegundo 将我们链接到[这篇关于动态 ivars](http://www.cocoawithlove.com/2010/03/dynamic-ivars-solving-fragile-base.html)的文章，这是`@synthesize`. @RobNapier 评论说，如果您正在为属性创建自己的 getter（只读）和 setter（读/写），您*确实*需要`@synthesize iVar = _iVar`（奇怪地），因为在这种情况下，预处理器不会为您生成 iVar。

⁴界面的一般规则：尽可能保持空白。如果它们是供私人使用的，那么您现在根本不需要声明您的*方法。*如果您可以在没有接口声明的情况下使代码工作，那就是要走的路。

⁵这是 .m 文件中的 @interface 块，位于 @implementation 上方：

```
#TestClass.m

@interface TestClass()

//private property declarations here

@end

@implementation TestClass
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T15:49:13.990

如果您喜欢@synthesized 属性的漂亮目录，您可能还想使用@synthesize，您可以参考和评论以便清晰和组织。

此外，@synthesize 允许您在属性上设置断点并在其值更改时捕获。

当编译器为你做所有事情时，你最终会远离真正发生的事情并且对它一无所知。但是，不必一直自己输入所有内容也很好。

# crontab - 在设置的窗口中每小时运行一次 cron 作业

> ID：14236802
> 
> 赞同：0
> 
> 时间：2013-01-09T13:54:58.547
> 
> 标签：crontab

我的 crontab 文件如下所示：

```
00 07-22 * * * /usr/bin/php /ab/c.php 
```

但它不是从早上 7 点到晚上 10 点运行，而是在午夜运行。我希望它在早上 7 点到晚上 10 点之间每小时严格运行一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:06:35.190

您是否尝试删除前导 0？它们会给你带来麻烦。尝试

```
0 7-22 * * * /usr/bin/php /ab/c.php 
```

除了对我来说听起来很奇怪的 0（我从未使用过它们）之外，其余的似乎都还可以。希望这有帮助。

# vertical-alignment - Force GraphViz 强制节点之间的距离

> ID：14236804
> 
> 赞同：3
> 
> 时间：2013-01-09T13:55:00.817
> 
> 标签：vertical-alignment, nodes, graphviz

我将 GraphViz 与以下点文件一起使用：

```
digraph G
{
    rankdir=LR;
    subgraph commits
    {
        "5c071a6b2c" -> "968bda3251" -> "9754d40473" -> "9e59700d33" -> "2a3242efa4";
    }
    subgraph annotations
    {
        "V1.0" [shape=box];
        "br/HEAD" [shape=box];
        "V1.0" -> "9e59700d33" [weight=0];
        "br/HEAD" -> "2a3242efa4" [weight=0];
    }
} 
```

它给了我类似的东西： ![包东西](../Images/5a7e4cbe1034ba8bf3480d6da3fb7fee.png)

但我想要这样的东西：

> ```
>  V1.0         br/HEAD
>                                           |             |
>                                          \/            \/ 
> ```
> 
> 5c071a6b2c -> 968bda3251 -> 9754d40473 -> 9e59700d33 -> 2a3242efa4

我怎样才能做到这一点？

为了您的帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T15:27:58.097

这将使注释与提交对齐：

```
digraph G
{
    rankdir=LR;
    subgraph commits
    {
        "5c071a6b2c" -> "968bda3251" -> "9754d40473" -> "9e59700d33" -> "2a3242efa4";
    }
    subgraph annotations1
    {
        rank="same";
        "V1.0" [shape=box];
        "V1.0" -> "9e59700d33" [weight=0];
    }
    subgraph annotations2
    {
        rank="same";
        "br/HEAD" [shape=box];
        "br/HEAD" -> "2a3242efa4" [weight=0];
    }
} 
```

由于`rank="same";`影响整个子图，我不得不将注释分成两个不同的子图。

结果是： ![结果](../Images/773a477600ce2c42159e0ceaf46fcc9c.png)

# python - 为什么 Python 中没有 goto 语句？

> ID：14236806
> 
> 赞同：0
> 
> 时间：2013-01-09T13:55:03.990
> 
> 标签：python, goto

python中没有goto，但是python 2.X中goto不可用的原因是什么？

请告诉我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-09T13:56:25.530

从[Python 常见问题解答](http://docs.python.org/2/faq/design.html#why-is-there-no-goto)：

> # 为什么没有goto？
> 
> 您可以使用异常来提供甚至可以跨函数调用工作的“结构化 goto”。许多人认为异常可以方便地模拟 C、Fortran 和其他语言的“go”或“goto”结构的所有合理使用。

换句话说：`goto`当你有异常处理时不需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T15:06:53.320

即使在像 FORTRAN 这样仍然有 GOTO 的语言中，通常也不建议您使用它：

[http://books.google.com/books?id=D0HOaW-5svQC&pg=PA63&lpg=PA63&dq=fortran+scientists+and+engineers+goto&source=bl&ots=NWYj9wa2y3&sig=TH0NEPkqNtNQgprVpBn912WHJAQ&hl=en&sa=X&ei=WoftUKiJDcuv0&AEw-4ADYCQ#vQQQ= onepage&q=fortran%20scientists%20and%20engineers%20goto&f=false](http://books.google.com/books?id=D0HOaW-5svQC&pg=PA63&lpg=PA63&dq=fortran+scientists+and+engineers+goto&source=bl&ots=NWYj9wa2y3&sig=TH0NEPkqNtNQgprVpBn912WHJAQ&hl=en&sa=X&ei=WoftUKiJDcuv0AGM-4DYCQ&ved=0CDQQ6AEwAQ#v=onepage&q=fortran%20scientists%20and%20engineers%20goto&f=false)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T13:59:05.217

`if`您可以使用、和构造来做所有事情`else`，添加意味着非结构化编程。不要在语言中添加任何额外的功能，它只是一个无条件循环。 `while``for``goto``goto`

[**为什么 goto 实践不佳？**](https://stackoverflow.com/questions/443655/why-is-goto-poor-practise)和

[**GOTO 仍然被认为是有害的？**](https://stackoverflow.com/questions/46586/goto-still-considered-harmful)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T14:04:06.997

Python 以他们的方式看到了错误，并添加了[goto](http://entrian.com/goto/download.html)！

**开个玩笑 - 请不要在实际代码中使用**

它作为愚人节笑话发布。

# multithreading - Qt QtConcurrent 进度条更新

> ID：14236808
> 
> 赞同：0
> 
> 时间：2013-01-09T13:55:10.217
> 
> 标签：multithreading, qt, qtableview, qtconcurrent, qprogressbar

我有一个`QTableView`连接到一个`QAbstractTableModel`.
该模型用于`QtConcurrent::map`为应用程序创建线程（复制文件）

我进行了子类化`QStyledItemDelegate`以在其中一个 tableviews 单元格中显示 a `QStyleOptionProgressBar`，其想法是通过模型更新进度条。它有效，但一次从 0% 到 100%，并不顺利。

`QAbstractTableModel::setData()`在我的“复制循环”中被调用，但似乎`QAbstractTableModel::dataChanged()` 只有在循环结束时才会发出。不管我做什么。

这可能是一种错误的方法，但我不知道如何从线程访问表格视图中的给定进度条。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:14:59.740

You need to implement setData() yourself in your table model class that is subclassing `QAbstractTableModel`. The base class implementation does nothing and returns `false`. You're responsible of emitting the `dataChanged()` signal if the data was successfully set.

# iphone - button 的声音使用 [buttonsound prepareToPlay] 使按钮按下“延迟”；

> ID：14236813
> 
> 赞同：0
> 
> 时间：2013-01-09T13:55:29.037
> 
> 标签：iphone, xcode, avaudioplayer, lag

应用程序启动后，我按下启动按钮，它是“滞后”的，但我也将此代码用于 viewdidload 和 viewdidappear：

```
gombhang = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"button4" ofType:@"mp3"]];

gombha = [[AVAudioPlayer alloc] initWithContentsOfURL:gombhang error:nil];
[gombha prepareToPlay];
gombha.delegate = self; 
```

我该如何解决这个滞后？如果我不能修复它，苹果会拒绝它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:56:45.420

据我所知，Audioplayer 需要几秒钟来加载音频文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T09:04:17.670

```
NSString *soundFile = [[NSBundle mainBundle] pathForResource:@"button4" ofType:@"wav"]; NSURL *soundFileURL = [NSURL fileURLWithPath:soundFile]; AudioServicesCreateSystemSoundID((CFURLRef) CFBridgingRetain(soundFileURL), &_MySound); AudioServicesPlaySystemSound(_MySound); 
```

另一种方法：我制作了一个空的/静音的 0.1 秒声音文件，并在 viewdidload 中播放，这个方法在我点击开始按钮之前加载了 avaudioplayer，所以它不再滞后。

# java - 从 Android 应用程序访问 Windows 共享网络文件

> ID：14236817
> 
> 赞同：0
> 
> 时间：2013-01-09T13:55:34.013
> 
> 标签：java, android, file-access, jcifs

我正在尝试从我的应用程序访问共享文件，例如`//172.24.9.13/c/2012xp.mdb`

通过做：

```
new File("//172.24.9.13/c/2012xp.mdb"); 
```

它不起作用。

我找到了 jCIFS 库，并创建

```
new SmbFile("//172.24.9.13/c/2012xp.mdb"); 
```

它有效，但问题是我需要一个`java.io.File`.

我还看到，如果不生根，就无法在 android 设备上挂载 smb。

有没有办法获取`java.io.File`我的共享文件的实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:03:56.653

我认为您无法阅读它，`java.io.File`因为它不是一个。

如果您绝对需要 a `java.io.File`，则可能必须调用`smbFile.getInputStream()`并复制到本地文件，而不是使用该本地文件。

考虑到它是一个`.mdb`文件，您可能想要从数据库中读取数据，并且它可能是一个巨大的文件，您不想复制它。在这种情况下，您唯一的选择是设置一个服务器，使用一个以 JSON 格式回复的 api，您的应用程序将向它发送 GET 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:03:08.643

试试这个代码。我不确定 .mdb 文件格式。但这适用于 PDF 文件。

首先使用您的 smb 文件创建一个 SmbFileInputStream。

```
in = new SmbFileInputStream(sFile); 
```

然后在设备存储（SD卡）中创建一个输出文件

```
outputfile = new File(dir, "todevice.pdf"); 
```

然后创建一个 FileOutputStream (java IO)

```
out = new FileOutputStream(outputfile); 
```

然后读取输入（SMB）并将其写入输出（IO）

```
while ((read = in.read(buffer)) > 0  ) 
{
    try {
           out.write(buffer, 0, read);
    } catch (IOException e) {
    }
} 
```

现在你的 SD 卡上有一个文件

# jquery - 如何选择此可折叠内容并为其制作动画？

> ID：14236820
> 
> 赞同：0
> 
> 时间：2013-01-09T13:55:44.423
> 
> 标签：jquery, jquery-mobile, jquery-selectors, children

我正在使用 jQuery Mobile，我有这个 html：

```
<ul id="thelist" data-corners= "false" >
<div class = "theListItem" data-role="collapsible-set" data-collapsed="false">

<div data-role="collapsible" data-collapsed="false" data-theme="a">
 <h3>$1.48   -  10/31/2012   -   niko Reade #14410  -  Brooklyn Ny</h3>
 <div data-role="controlgroup"  data-type="horizontal">
  <a class= "green" href="categorize.html" data-transition="slide"  data-direction="reverse" data-role="button">Yes</a>
  <a class="red" href="#" data-role="button">No</a>
  <a class= "blue" href="IDontKnow.html" data-transition="slide"data-role="button">I don't know</a>
 </div>
 </div>
</ul> 
```

我正在尝试为下拉菜单设置动画，但我无法选择它。这是我的 JS：

```
$('#transPage, #categorizePage, #IDKPage').live('pageinit', function() {
$('.trans .theListItem h3').click(function() {
     var  $controlGroup = $(this).children('.ui-collapsible-content').css("background-color", "#ff3333");
});
}); 
```

.ui-collapsible-content 在 CSS 中运行良好，但当我尝试将它与 JS 一起使用时不起作用。知道为什么我的选择器错误，以及如何为可折叠内容设置动画吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:38:27.497

1.  您的 HTML 标记不正确。你最后错过了一个`</div>`结束。
2.  `.live`已弃用。见[这里](http://api.jquery.com/live/)。

    > 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。
    > 旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()

3.  `h3`class的元素内部没有子元素`ui-collapsible-content`，实际上元素内部只有文本`h3`。

4.  确保您拥有最新版本，因为对于一些较旧的事件，似乎[存在与该`pageinit`事件相关的一些问题。](https://stackoverflow.com/questions/7544023/how-to-initialize-pages-in-jquery-mobile-pageinit-not-firing)确保事件被执行。

# c# - psexec via Process 提供的退出代码与 psexec via cmd 不同

> ID：14236824
> 
> 赞同：0
> 
> 时间：2013-01-09T13:56:05.640
> 
> 标签：c#, cmd, psexec

我目前正在开发一个应用程序，用于检查 IIS 服务器上是否存在具有特定名称的 APP。我使用 PsExec 来执行这个命令。

当我通过命令行对此进行测试时，我注意到当应用程序不存在时，appcmd 以 ExitCode 1 退出。同样，当应用程序存在时，它以 0 退出。

我也想使用这种行为，所以我不需要进行输出重定向。我只关心APP是否存在。PsExec 使用它调用的命令的退出代码作为它自己的退出代码。我用命令行尝试了这个并检查了结果，`echo %errorlevel%`它工作得很好。

但是我遇到了以下代码的问题。

```
 Process process = new Process();
  process.StartInfo.FileName = @"psexec";

  string appcmd = @"C:\windows\system32\inetsrv\appcmd";
  process.StartInfo.Arguments = String.Format(@"{0} -u {1} -p {2} -S {3} LIST APP ""{4}""",
                                              ip, username, password, appcmd, appname);

  process.Start();
  process.WaitForExit();
  Console.WriteLine(process.ExitCode); 
```

这执行得很好。但它不会返回 PsExec（应该？）给出的退出代码。它总是返回0。所以现在我不能使用我之前发现的技巧来检查一个APP是否存在。

我有一个已知的解决方案吗？有没有类似的解决方案？还是我应该使用输出重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:40:43.693

不是真正解决问题的方法。但是因为 IIS 中的 Web 应用程序必须有一个唯一的名称，所以创建一个已经存在的应用程序会导致错误，但不会有任何改变。

这意味着如果我总是尝试创建一个新的 APP，它可以正常工作。如果它不存在，它将被制造，如果它已经存在，则不会发生任何事情。

# c# - 查找字符串的精确匹配和匹配位置

> ID：14236825
> 
> 赞同：1
> 
> 时间：2013-01-09T13:56:09.707
> 
> 标签：c#, regex

`kw`我想在大长度文本中搜索存储在变量中的关键字，并找到找到关键字的**第一个** **位置**。下面的代码不做**EXACT** keyword match 。

```
if (webData.IndexOf(kw, StringComparison.OrdinalIgnoreCase) != -1)
{
     found = true;
     int pos = webData.IndexOf(kw, StringComparison.OrdinalIgnoreCase); 
} 
```

如何使用正则表达式来做到这一点？

```
Match match = Regex.Match(webData, @"^kw$", RegexOptions.IgnoreCase);

if (match.Success)
{
  int pos = //Matching position
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T14:00:52.530

你可以做

```
Match match = Regex.Match(webData, @"\b"+Regex.Escape(kw)+@"\b", RegexOptions.IgnoreCase);

if (match.Success)
{
  int pos = match.Index;
} 
```

对于完全匹配，您需要使用由表示的边界`\b`

更多信息[在这里](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:00:06.850

将[`Match`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.aspx)有一个`Index`属性做你想做的事：

```
Match match = Regex.Match(webData, pattern, RegexOptions.IgnoreCase);

if (match.Success)
{
  int pos = match.Index;
} 
```

> 索引 - 在原始字符串中找到捕获的子字符串的第一个字符的位置。（继承自 Capture。）

# git - 如何在 Git 中查找特定文件中的特定更改

> ID：14236826
> 
> 赞同：11
> 
> 时间：2013-01-09T13:56:09.650
> 
> 标签：git, git-diff, blame

我在 Git 项目中有一个文件，该文件的特定值在某个时候被某人更改了；我不知道是谁或什么时候。我想找到更改的时间，但我不确定如何在 Git 中跟踪它。

我试过使用`git diff <sha1> <sha2>`，但这显示了整个项目的差异，而我想检查一个特定的文件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-10T12:57:32.020

你可以试试：

```
git log --all -S oldvalue filename 
```

这将列出“旧值”更改（添加或删除）的所有提交

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-09T13:58:55.487

`git blame`应该可以帮助你。`git blame <file>`将`<file>`逐行显示，并在每一行中包含用户上次更改该行的位置，以及在哪个提交中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-09T14:18:13.973

除了`git blame`你还可以使用你拥有的命令，但添加一个文件名：

```
git diff <commit> <commit> <file> 
```

这将向您显示单个文件的两个提交之间的差异。

# android - 使用 MvvmCross 根据模型属性更改 ItemTemplate RelativeLayout 背景颜色

> ID：14236827
> 
> 赞同：0
> 
> 时间：2013-01-09T13:56:10.227
> 
> 标签：android, xamarin.android, android-relativelayout, mvvmcross

我有一个带有 MvxBindableListView 的主视图。项目模板有一个 RelativeLayout 作为容器，里面有 TextViews、ImageView 等。

我需要能够根据绑定到列表的数据来更改 RelativeLayout 的背景颜色。

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:35:59.730

使用 MvxColorConverters（使用 Color 插件）可以很容易地将颜色绑定到 View 属性

例如，假设您有一个从 1 到 10 的分数，您可能会根据该值为文本视图着色：

```
public class ScoreToColorConverter : MvxBaseColorConverter
{
    private static readonly MvxColor RedColor = new MvxColor(0xff, 0x00, 0x00);
    private static readonly MvxColor GreenColor = new MvxColor(0x00, 0xff, 0x00);

    protected override MvxColor Convert(object value, object parameter, CultureInfo culture)
    {
        var intValue = (int)value;

        return (intValue > 5) ? RedColor : GreenColor;
    }
} 
```

然后可以在视图中使用此转换器，例如：

```
 <TextView
          style="?OurTextViewBodyStyle"
          android:textColor="@color/red"
          local:MvxBind="{'Text':{'Path':'Score'},'TextColor':{'Path':'Status','Converter':'ScoreToColor'}}" /> 
```

要设置视图的背景颜色，您可能需要编写一个小的自定义绑定——它访问 SetBackgroundColor() 方法——因为背景属性本身是只读的。

# c# - 循环通过包含对象的字典

> ID：14236829
> 
> 赞同：4
> 
> 时间：2013-01-09T13:56:12.727
> 
> 标签：c#, loops, dictionary

我在字典类型集合上有以下循环

```
foreach(KeyValuePair<Vector2, Object> entry in v_map.map_set)
{

} 
```

我想访问对象属性，但预期的语法不起作用。例如：

```
foreach(KeyValuePair<Vector2, Object> entry in v_map.map_set)
            {
                Object ob = entry.Value;
                ob.property;
            } 
```

失败，因为 C# 找不到想要的属性。那么，如何访问所需的属性？

**解决方案：**

```
 foreach(KeyValuePair<Vector2, Object> entry in v_map.map_set)
            {
                if (entry.Value is warehouse)
                {
                    warehouse ob = (warehouse)entry.Value;

                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:57:50.930

您可以利用 Refection 来获取对象的属性值。

像这样的东西

```
PropertyInfo info2 = object.GetType().GetProperty("prpertyname");
Object val = info2.GetValue(object, null); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:58:36.077

如果您知道 KeyValuePair 中对象的类型，则可以将其强制转换为该类型，您将能够找到所需的属性。

如果您存储了多个不同的对象，您可以使用`is`. 像这样：

```
if(entry.Value is Foo)
{
   Foo lFoo = (Foo)entry.Value;
}
else if(entry.Value is Bar)
{
   Bar lBar = (Bar)entry.Value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T13:58:31.650

问题是您使用的`object`是未键入的。所以你需要像这样使用反射：

```
PropertyInfo pi = ob.GetType().GetProperty("PropertyName");
var val = pi.GetValue(ob, null); 
```

现在，如果该属性不是，`public`那么您将需要使用其他类似的东西：

```
PropertyInfo pi = ob.GetType().GetProperty("PropertyName", BindingFlags.Instance | BindingFlags.NonPublic);
var val = pi.GetValue(ob, null); 
```

现在，如果这实际上是您想要进入的***领域，那么您甚至需要做一些不同的事情：***

```
FieldInfo fi = ob.GetType().GetField("fieldName");
var val = fi.GetValue(ob); 
```

[获取属性方法](http://msdn.microsoft.com/en-us/library/zy0d4103.aspx)

[BindingFlags 枚举](http://msdn.microsoft.com/en-us/library/system.reflection.bindingflags.aspx)

[GetField 方法](http://msdn.microsoft.com/en-us/library/4ek9c21e.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T14:00:16.083

您需要转换`entry.Value`为所需的类型。[Object](http://msdn.microsoft.com/en-us/library/system.object%28v=vs.110%29.aspx)类型本身不会公开您想要的属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T14:02:31.897

如果您只需要访问这些值，并且您知道可以使用的预期类型

```
foreach(ExpectedType value in v_map.map_set.Values.OfType<ExpectedType>())
{
    var property = value.Property;
} 
```

上`Property`的属性在哪里`ExpectedType`。

# python - 隐藏后如何重新显示QDialog？

> ID：14236830
> 
> 赞同：1
> 
> 时间：2013-01-09T13:56:11.737
> 
> 标签：python, pyqt, qdialog

我正在使用 python 和 pyqt。我有一个我想暂时隐藏的对话框。打电话后

```
dlg.hide() 
```

我试着打电话

```
dlg.show() 
```

但什么也没发生。它永远不会重新显示。

我是 pyqt 的新手，因此非常感谢任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:02:22.053

您正在寻找`exec_`使对话框模态的方法，看看它是如何工作的：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtCore, QtGui

class myDialog(QtGui.QDialog):
    def __init__(self, parent=None):
        super(myDialog, self).__init__(parent)

        self.dialog = None

        self.buttonShow = QtGui.QPushButton(self)
        self.buttonShow.setText("Show Dialog")
        self.buttonShow.clicked.connect(self.on_buttonShow_clicked)

        self.buttonHide = QtGui.QPushButton(self)
        self.buttonHide.setText("Close")
        self.buttonHide.clicked.connect(self.on_buttonHide_clicked)

        self.layout = QtGui.QVBoxLayout(self)
        self.layout.addWidget(self.buttonShow)
        self.layout.addWidget(self.buttonHide)

    @QtCore.pyqtSlot()
    def on_buttonHide_clicked(self):
        self.accept()

    @QtCore.pyqtSlot()
    def on_buttonShow_clicked(self):
        self.dialog = myDialog(self)
        self.dialog.exec_()

class myWindow(QtGui.QWidget):  
    def __init__(self, parent=None):
        super(myWindow, self).__init__(parent)

        self.buttonShow = QtGui.QPushButton(self)
        self.buttonShow.setText("Show Dialog")
        self.buttonShow.clicked.connect(self.on_buttonShow_clicked)

        self.layout = QtGui.QVBoxLayout(self)
        self.layout.addWidget(self.buttonShow)

        self.dialog = myDialog(self)

    @QtCore.pyqtSlot()
    def on_buttonHide_clicked(self):
        self.dialog.accept()

    @QtCore.pyqtSlot()
    def on_buttonShow_clicked(self):
        self.dialog.exec_()

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('myWindow')

    main = myWindow()
    main.show()

    sys.exit(app.exec_()) 
```

# ssis - ExecuteSQL 任务中多个参数的一个变量

> ID：14236835
> 
> 赞同：2
> 
> 时间：2013-01-09T13:56:22.487
> 
> 标签：ssis

我的 ExecuteSQL 任务中有多个 UPDATE 语句。每个都依赖于一个变量，例如 MyId

```
UPDATE TABLE_A SET COL_A={Something} WHERE ID=?
UPDATE TABLE_B SET COL_B={SomeTHing} WHERE ID=? 
```

此查询将 MyId 变量作为参数。

我是否需要与我的更新语句一样多的参数或者有一种方法可以`one`在我的 ExecuteSQL 任务中定义共享参数

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T14:34:43.740

试试这个：

```
DECLARE @id int

SELECT @id = ?

UPDATE TABLE_A SET COL_A={Something} WHERE ID=@id
UPDATE TABLE_B SET COL_B={Something} WHERE ID=@id 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T16:18:39.637

另一种选择是将连接管理器从 OLE 更改为 ADO.NET 提供程序类型。ADO.NET 连接管理器使用[命名参数](http://technet.microsoft.com/en-us/library/cc280502.aspx)代替，`?`因此您可以重复使用它们而不是处理映射选项卡中的序数位置。我们经常有 2 个指向同一个数据库，一个用于数据流类型组件的 OLE 和一个用于执行 SQL 任务的 ADO.NET。

```
UPDATE TABLE_A SET COL_A={Something} WHERE ID=@id;
UPDATE TABLE_B SET COL_B={SomeTHing} WHERE ID=@id; 
```

# actionscript-3 - AS3：无论如何，是否可以判断在 FileReference.upload() 期间连接是否丢失？

> ID：14236844
> 
> 赞同：0
> 
> 时间：2013-01-09T13:56:41.803
> 
> 标签：actionscript-3, file-upload, filereference

观察`FileReference.upload()`我注意到，如果我上传大文件（大到足以上传持续一段时间）并在上传过程中切断连接（例如通过拔出 LAN 电缆），Flash 不会报告错误。 . 事实上，它会一直触发 Progress 事件，直到“成功”完成。

这是一个错误吗？不应该抛出异常或触发错误事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:27:33.877

根据有关 FileReference.upload() 的文档，它应该在发生这种情况时调用 IOErrorEvent。

尝试监听 IOErrorEvent

```
yourFilereference.addEventListener(IOErrorEvent.IO_ERROR, error)
function error(e:IOErrorEvent):void
{
    //Do something
} 
```

# r - 如何用曲线和平滑线连接点

> ID：14236848
> 
> 赞同：0
> 
> 时间：2013-01-09T13:57:00.380
> 
> 标签：r, plot, line, smooth

我有`ctlns`列表，我正在尝试对数据进行一些可视化

```
ctlns<-list(structure(list(level = 10, x = c(0.101666666666667, 0.06, 
0.0385714285714286, 0.035, 0.035, 0.035, 0.04, 0.0433333333333333, 
0.05, 0.0516666666666667, 0.06, 0.0606416584402764, 0.0606416584402764, 
0.0766666666666667, 0.0766666666666667, 0.0933333333333333, 0.0933333333333333, 
0.0975, 0.11, 0.110956351152526, 0.110956351152526, 0.135, 0.135
), y = c(0.01, 0.04125, 0.06, 0.11, 0.16, 0.21, 0.26, 0.31, 0.36, 
0.41, 0.458123195380173, 0.46, 0.51, 0.56, 0.61, 0.66, 0.71, 
0.76, 0.808123195380173, 0.81, 0.86, 0.91, 0.96)), .Names = c("level", 
"x", "y"))) 
```

然后我，

```
 plot(ctlns[[1]]$x,ctlns[[1]]$y, xlim=c(0,.21), ylim=c(0,1), lwd=2, type="l", col="darkred" ) 
```

我明白了情节 ![在此处输入图像描述](../Images/4dd6e54376e70ba77441069089bf5360.png)

我想平滑红色曲线的上部（y>0.2），同时保持一些弯曲的结构（y<0.2）

```
lines(lowess(ctlns[[1]]$x,ctlns[[1]]$y,f=2/3), lwd=2, col="darkblue") 
```

前一部分做得很好，但删除了曲线的下部。我有以下问题：

1.  为什么会这样？
2.  如何保持和平滑红色曲线的下部？或者也许结合曲线/平滑线？
3.  忽略红色曲线，如何根据蓝色曲线数据指示 lowess 外推值直到 y=0？

**与 agstudy 讨论后编辑**

由于红线的弯曲性质，我在想我需要的可能**不是**平滑函数，`y~x`而是将点与某种**曲线连接起来的图形函数。**`x, y`这些点应该按照它们出现在它们的向量中的顺序连接（`x[1]`with`y[1]`等等......）

![在此处输入图像描述](../Images/e721fa8f6daaf5131bbf26ee3701cbef.png)

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T18:07:57.887

您可能想要使用该`xspline`功能（或者`grid.xspline`如果使用网格图形）。

```
plot( ctlns[[1]], type='l', col='red' )
xspline( ctlns[[1]], shape=1, border='blue' ) 
```

您可以对数据进行一些预平滑处理，这可能也会有所帮助：

```
tmp.x <- ctlns[[1]]$x
tmp.y <- ctlns[[1]]$y

tmp <- cumsum( c(TRUE, head(tmp.x,-1) != tail(tmp.x,-1) ) )

tmp2.x <- tapply( tmp.x, tmp, mean )
tmp2.y <- tapply( tmp.y, tmp, mean )

xspline( tmp2.x, tmp2.y, shape=1, border='green' ) 
```

或使用黄土进行平滑：

```
fit <- loess( tmp.y ~ tmp.x+tmp )
tmp3.y <- tapply( fitted(fit), tmp, mean )
xspline( tmp2.x, tmp3.y, shape=1, border='orange' ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T14:27:12.867

回答您问题的第 2 部分：

```
lines(lowess(ctlns[[1]]$x[ctlns[[1]]$y<0.2],
            ctlns[[1]]$y[ctlns[[1]]$y<0.2]), lwd=2, col="darkblue") 
```

对于您问题的第一部分，我猜该算法旨在处理函数（术语的数学定义），它删除了 x 上的重复项。

**OP评论后**编辑！****

 **对我来说这很好，至少我以最佳方式使用 LOESS 函数。如果要连接所有部分，请为产生问题的点创建一条小线。

```
 ids <- duplicated(ctlns[[1]]$x) & ctlns[[1]]$y < 0.25
 lines(ctlns[[1]]$x[ids],ctlns[[1]]$y[ids], lwd=4, col="darkblue") 
```

![在此处输入图像描述](../Images/bce8d1265e1f196f9bb31935dc01a683.png)**

# html - 为什么属性“透视”对我不起作用？

> ID：14236849
> 
> 赞同：2
> 
> 时间：2013-01-09T13:57:00.277
> 
> 标签：html, css, webkit, transform

HTML：

```
<div></div> 
```

CSS：

```
div {
    width: 50px;
    height: 50px;
    background: red;
    border: 10px solid yellow;
    -webkit-perspective: 600px;
    -webkit-transform: perspective(600);
    -moz-transform: perspective(600);
    transform: perspective(600);
} 
```

这不起作用，它总是显示一个红色方块......我不明白为什么。我使用 Chrome 23

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T14:11:36.340

透视图需要与另一个变换相结合才能发挥作用。看一下：

[http://jsfiddle.net/TD8Hr/](http://jsfiddle.net/TD8Hr/)

html:

```
<div>
  <div></div>
</div> 
```

CSS：

```
div { padding: 50px; }

div > div {
                width: 50px; 
               height: 50px; 
           background: red;
               border: 10px solid yellow;
  -webkit-perspective: 600px;
    -webkit-transform: perspective(600) rotateY(120deg);
       -moz-transform: perspective(600) rotateY(120deg);
            transform: perspective(600) rotateY(120deg);
                    } 
```

# servlets - 更改 Spring 和 Spring Security 的 servlet 映射

> ID：14236850
> 
> 赞同：2
> 
> 时间：2013-01-09T13:57:00.943
> 
> 标签：servlets, spring-mvc, spring-security, cometd

我目前正在编写一个 Spring MVC 应用程序，由 Spring Security 保护。对于登录，使用了基本表单身份验证，并且由于我没有添加进一步的配置，因此将凭据发布到`http://www.localhost:8080/myWebApp/j_spring_security_check`.

到目前为止一切顺利，但现在我介绍了第二个 servlet (CometD)，它不受 Spring 或 Spring Security 的影响。为此，我尝试更改将`servlet-mappings`Spring 和 Spring Security`/app`分别映射到`/app/*`，并将另一个 Servlet映射到`cometd/*`。我的`web.xml`样子如下：

```
<!-- Spring security -->
<listener>
    <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
</listener>
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/app/*</url-pattern>
</filter-mapping>

<!-- Spring MVC -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/app</url-pattern>
</servlet-mapping>

<!-- CometD -->
<servlet>
    <servlet-name>cometd</servlet-name>
    <servlet-class>org.cometd.server.CometdServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>cometd</servlet-name>
    <url-pattern>/cometd/*</url-pattern>
</servlet-mapping> 
```

问题在于，在此更改之后，我可以再登录。服务器找不到任何请求映射，客户端告诉我 `NetworkError: 404 Not Found - http://localhost:8080/myWebApp/app/j_spring_security_check`。

这个映射有什么问题？如何将 Spring 和 Spring Security 配置为仅处理特定映射的请求，而不是`/`文档`/*`中描述的请求？

提前非常感谢！

最好的，勒内

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:09:01.283

将您的 springSecurityFilterChain 映射到 /。更改您的安全配置：

```
<http use-expressions="true">
    <intercept-url pattern="/cometd/**" access="permitAll" />
    <intercept-url pattern="/**" access="hasRole('ROLE_USER')" />
</http> 
```

# sas - 使用“put”输出数据文件

> ID：14236852
> 
> 赞同：3
> 
> 时间：2013-01-09T13:57:01.540
> 
> 标签：sas

我是 SAS 新手，`put`在分隔数据文件的输出中使用，但有几个问题。

1.  在输出中，分隔符和数据之间会生成一个空格。这个空间可以消除吗？
2.  在我的代码中如何合并`replace`？我试过了，代码错误了。

任何帮助将不胜感激。

谢谢！

```
data _null_; 
set datain_20130108;
file 'C:\data\dataout_20130108.dlm';
put "!" id "|" var1 "|" var2 "|" var3 "|" var4 "|" var5 "|" var6 "~";
run; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:04:55.600

关于空格，请在变量名后使用 +(-1)，如下所示。

```
put "!" id+(-1); 
```

关于更换，我不明白你的问题。请参阅下面的链接以替换文档。 [http://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#a000131176.htm](http://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#a000131176.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T15:19:27.173

为什么不以正常方式输出分隔文件？您必须做一些愚蠢的事情来获取前导/尾随字符（我很好奇它们为什么存在），但这可能比手动分隔文件更简单。

```
data _null_; 
set datain_20130108;
file 'C:\data\dataout_20130108.dlm' dlm='|';
idtemp= cats("!", id);
vartemp=cats(var6,'~');
put  id $ var1 var2 var3 var4 var5 var6 $;
run; 
```

REPLACE 可能来自一些使用 PROC EXPORT 的指令。如果 PROC EXPORT 上没有 REPLACE，它不会覆盖文件。SAS 数据步骤将替换文件而不需要该选项。

```
proc export data=datain_20130108 file='C:\data\dataout_20130108.dlm' dbms=dlm replace;
delimiter='|';
run; 
```

但是，这不会在开头和结尾为您提供额外的字符，我强烈建议不要将 PROC EXPORT 用于分隔文件，除非它只是一次性的 - 它会为您做出各种决定，您最好做出自己（格式化等），实际上并不比 PUT 版本容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T14:20:25.113

如果这是您的意思，您将无法在 PUT 语句中使用 REPLACE。您将需要创建一个新变量（使用您需要的任何函数），然后在您的 PUT 语句中使用该变量。

# jsf - 如何定位具有唯一 ID 的特定 JSF 组件？

> ID：14236855
> 
> 赞同：1
> 
> 时间：2013-01-09T13:57:06.183
> 
> 标签：jsf, jsf-2, primefaces

就我而言，我想用 ID 刷新组件`baseTab`。它本身包含在 form`main`和 tabView`tabs`中。对组件的绝对引用是`main:tabs:baseTab`。这就是我需要在更新属性中引用的内容：

```
 <p:commandButton update="main:tabs:baseTab"/> 
```

这种完整 ID 的问题在于它很长，并且在我更改组件层次结构中的某些内容时可以轻松更改。ID baseTab 本身是唯一的，所以至少在理论上，我应该能够直接引用这个组件。但我怎么能做到呢？

通过唯一 ID 引用组件的语法是什么？我尝试了以下方法：

*   :baseTab
*   基本表
*   主要：baseTab
*   :tabs:baseTab

而且这些都不起作用，每个都导致页面错误，即此类组件不存在....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:38:42.960

我可以看到不进行此引用的价值取决于组件树结构。

*应该*可以为此利用组件绑定，因为[`update`](http://www.primefaces.org/docs/vdl/3.4/primefaces-p/commandButton.html)可以采用[ValueExpression](http://docs.oracle.com/javaee/6/api/javax/el/ValueExpression.html)。

使用（例如）faces-config.xml 在请求范围内定义映射：

```
<managed-bean>
  <managed-bean-name>bind</managed-bean-name>
  <managed-bean-class>java.util.HashMap</managed-bean-class>
  <managed-bean-scope>request</managed-bean-scope>
</managed-bean> 
```

将目标绑定到地图：

```
<h:foo binding="#{bind.someIdForBinding}" /> 
```

在您的按钮中引用此控件的客户端标识符：

```
<p:commandButton update=":#{bind.someIdForBinding.clientId}"/> 
```

创建/恢复树时，目标组件将被放入绑定映射中。

请注意，此代码未经测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:28:13.577

除非您的组件在同一个父级中，否则不要认为这是可能的。

# macos - 自动转换滑块值

> ID：14236866
> 
> 赞同：1
> 
> 时间：2013-01-09T13:57:35.530
> 
> 标签：macos, cocoa, cocoa-bindings, nstextfield, nsslider

我有一个滑块，将它与文本字段绑定。可以自动将值转换为这种格式：示例 01 02 03 04 05 06 .. 13 14 15 ..? 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:28:18.397

[阿努普](https://stackoverflow.com/users/1395941/anoop-vaidya)是对的。创建一个 NSNumberFormatter，并将它的 minimumIntegerDigits 设置为 2 将为一位数添加前导零。

```
// Create an NSNumberFormatter that will add a leading 0 to single-digit numbers.
NSNumberFormatter* leadingZeroNumberFormatter = [NSNumberFormatter new] ;
leadingZeroNumberFormatter.minimumIntegerDigits = 2 ;
// Attach the NSNumberFormatter to your NSTextField
textField.formatter = leadingZeroNumberFormatter ; 
```

上面的例子将取`6.27`并返回`06`。如果您想查看`.27`，请查看`fractionDigits`NSNumberFormatter 类参考中的方法。

# sql - Sql 查询通过将其转换为通用基本单位来求和总面积

> ID：14236870
> 
> 赞同：-1
> 
> 时间：2013-01-09T13:57:48.993
> 
> 标签：sql

我想创建一个存储过程，在其中我想从表中求和总面积（列名），但必须从单位表（其他表）中检查其单位，如果单位不是基本单位，则应将其转换为基本单位首先计算总和。单位表是

![在此处输入图像描述](../Images/18cfbb48837e34cdef4ee14257e38b6b.png)

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:27:48.280

您要做的是加入单位表。但是，由于可能没有匹配项，请使用左外连接，然后使用该`coalesce()`函数检查 NULL 值。我认为它应该是这样的：

```
select sum(t.area) * coalesce(u.Converting_unit, 1.0)/coalesce(u.Base_unit, 1.0) as TotalArea
from t left outer join
     units u
     on t.unit_code = u.unit_code 
```

老实说，我对这种方法有点警惕，因为它需要转换为单位的一致性。就像是：

```
select sum(t.area) * coalesce(u.Converting_unit, 1.0)/coalesce(u.Base_unit, 1.0) as TotalArea,
       u.base_unitcode
from t left outer join
     units u
     on t.unit_code = u.unit_code
group by u.base_unitcode 
```

似乎更安全。

我也不明白您如何将英尺和米等线性度量转换为公顷等面积度量。这表明您选择的单位存在问题。

# javascript - 禁用输入中的空格，并允许返回箭头？

> ID：14236873
> 
> 赞同：25
> 
> 时间：2013-01-09T13:57:55.423
> 
> 标签：javascript, jquery, html, input

我正在尝试禁用用户名文本字段中的空格，但是我的代码也禁用了使用后退箭头。有什么办法也可以允许后退箭头吗？

```
 $(function() {
         var txt = $("input#UserName");
         var func = function() {
                      txt.val(txt.val().replace(/\s/g, ''));
                   }
         txt.keyup(func).blur(func);
    }); 
```

小提琴：http: [//jsfiddle.net/EJFbt/](http://jsfiddle.net/EJFbt/)

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-01-09T14:02:16.110

您可以添加`keydown`处理程序并阻止空格键的默认操作（即`32`）：

```
$("input#UserName").on({
  keydown: function(e) {
    if (e.which === 32)
      return false;
  },
  change: function() {
    this.value = this.value.replace(/\s/g, "");
  }
}); 
```

**演示：http:** [//jsfiddle.net/EJFbt/1/](http://jsfiddle.net/EJFbt/1/)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2020-04-24T18:02:53.923

这似乎对我有用：

```
<input type="text" onkeypress="return event.charCode != 32"> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-09T14:00:55.293

它不会“禁用”后退箭头——每当您按下一个键时，您的代码都会彻底替换所有文本，并且每次发生这种情况时，插入符号的位置都会丢失。

不要那样做。

使用更好的机制来禁止空格，例如[当按下的键为时从 onkeydown 处理程序](https://stackoverflow.com/a/11268278/560648)[返回`false``space`](https://stackoverflow.com/a/11268278/560648)：

```
$(function() {
    $("input#Username").on("keydown", function (e) {
        return e.which !== 32;
    });​​​​​
}); 
```

这样，您的文本框首先被禁止接收空格，并且您不需要替换任何文本。因此插入符号将不受影响。

* * *

### 更新

[*@VisioN*的改编代码](https://stackoverflow.com/a/14236954/560648)还将这种空间禁止支持添加到复制粘贴操作，同时仍然避免文本替换`keyup`处理程序会影响您的文本框值，而您的插入符号仍处于活动状态。

所以这是最终的代码：

```
$(function() {

    // "Ban" spaces in username field
    $("input#Username").on({

       // When a new character was typed in
       keydown: function(e) {

          // 32 - ASCII for Space;
          // `return false` cancels the keypress
          if (e.which === 32)
             return false;
       },

       // When spaces managed to "sneak in" via copy/paste
       change: function() {
          // Regex-remove all spaces in the final value
          this.value = this.value.replace(/\s/g, "");
       }

       // Notice: value replacement only in events
       //  that already involve the textbox losing
       //  losing focus, else caret position gets
       //  mangled.
    });​​​​​
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T14:02:25.460

尝试在您的函数中检查正确的键代码：

```
$(function(){
    var txt = $("input#UserName");
    var func = function(e) {
      if(e.keyCode === 32){
        txt.val(txt.val().replace(/\s/g, ''));
      }
    }
    txt.keyup(func).blur(func);
}); 
```

这样只有`keyCode`of `32`（空格）调用替换函数。这将允许其他`keypress`事件通过。根据 IE 中的可比性，您可能需要检查是否`e`存在、使用`e.which`或可能使用全局 window.event 对象。不过，这里有很多问题涵盖了这些主题。

如果您不确定某个，请`keyCode`尝试这个有用的[网站](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)。

# groovy - 使用 int-groovy:script 标签时解析异常

> ID：14236878
> 
> 赞同：0
> 
> 时间：2013-01-09T13:58:12.063
> 
> 标签：groovy, xml-parsing, xsd, spring-integration

我正在开发一个 Spring Integration 项目并使用 Groovy 编写一个示例转换器。下面给出的是来自 Spring 配置文件的示例——

```
<int:transformer input-channel="channel8" output-channel="channel9">
   <int-groovy:script>
        <![CDATA[
        if (!payload.equals('hello')) {
            throw new RuntimeException('invalid payload')
        }
        payload
         ]]>

    </int-groovy:script>    

</int:transformer> 
```

我已经导入了以下命名空间，并且 Eclipse 编辑器中的 xml Spring 配置文件也没有显示错误。

xmlns:int-groovy="http://www.springframework.org/schema/integration/groovy"

但是在运行我的程序时，我看到以下错误 -

```
Caused by: org.xml.sax.SAXParseException; lineNumber: 60; columnNumber: 24; cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'int-groovy:script'.
  at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198)
  at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:134)
  at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorRep‌​orter.java:437) 
```

我不确定我在这里缺少什么。对此的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:15:25.553

我认为您缺少运行时路径中的“spring-integration-groovy-xxxRELEASE.jar”文件

# java - 升级数据库

> ID：14236880
> 
> 赞同：0
> 
> 时间：2013-01-09T13:58:16.493
> 
> 标签：java, android, eclipse

我已经在谷歌商店有一个应用程序。我正在使用一个有 3 个表的内置数据库，并在第一次启动应用程序时复制它。现在我想升级到应用程序并添加另一个表。下面是我的代码。

```
public DataBaseHelper(Context context) 
{
    super(context, DB_NAME, null, 1);
    DB_PATH = "/data/data/" + context.getPackageName() + "/databases/";
    this.mContext = context;
}   

public void createDataBase() throws IOException
{
    //If database not exists copy it from the assets

    boolean mDataBaseExist = checkDataBase();
    if(!mDataBaseExist)
    {
        this.getReadableDatabase();
        this.close();
        try 
        {
            //Copy the database from assests
            copyDataBase();
            Log.e(TAG, "createDatabase database created");
        } 
        catch (IOException mIOException) 
        {
            throw new Error("ErrorCopyingDataBase");
        }
    }
}
    //Check that the database exists here: /data/data/your package/databases/Da Name
    private boolean checkDataBase()
    {
        File dbFile = new File(DB_PATH + DB_NAME);
        return dbFile.exists();
    }

    //Copy the database from assets
    private void copyDataBase() throws IOException
    {
        InputStream mInput = mContext.getAssets().open(DB_NAME);
        String outFileName = DB_PATH + DB_NAME;
        OutputStream mOutput = new FileOutputStream(outFileName);
        byte[] mBuffer = new byte[1024];
        int mLength;
        while ((mLength = mInput.read(mBuffer))>0)
        {
            mOutput.write(mBuffer, 0, mLength);
        }
        mOutput.flush();
        mOutput.close();
        mInput.close();
    }

    //Open the database, so we can query it
    public boolean openDataBase() throws SQLException
    {
        String mPath = DB_PATH + DB_NAME;
        //Log.v("mPath", mPath);
        mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.CREATE_IF_NECESSARY);
        //mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS);
        return mDataBase != null;
    }

    @Override
    public synchronized void close() 
    {
        if(mDataBase != null)
            mDataBase.close();
        super.close();
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
    {
        Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
        String sql = "CREATE TABLE IF NOT EXISTS CKRecordings (" +
                "_id INTEGER PRIMARY KEY AUTOINCREMENT, " + 
                "name TEXT , filepath TEXT , creationDate TEXT)";
        db.execSQL(sql);
        db.execSQL("DROP TABLE IF EXISTS data");
        onCreate(db);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

    } 
```

我想问几个问题。上面的代码没有升级。

现在，如果我是该应用程序的新用户，我是否必须编辑旧数据库并制作另一个 CKRecording 表并将其替换为放置在资产或以上代码中的当前数据库也适用于新用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:03:08.253

```
super(context, DB_NAME, null, 1); 
```

在此语句中，最后一个参数是数据库版本。为新更新的 APK**将其设置为 2 。**因此现有用户可以有新添加的表或列。

在更新的 apk onUpgrade 将调用。在那里你可以从资产中复制数据库。但是现有用户会丢失数据..所以最好的选择是在数据库中动态添加表。

# login - 支持和反对将 iframe 用于单点登录系统的论据

> ID：14236883
> 
> 赞同：3
> 
> 时间：2013-01-09T13:58:26.590
> 
> 标签：login, single-sign-on

我目前正在评估将多个站点集成到单点登录系统的最佳选择。我们的目标是拥有一个统一的标头，其中包含跨站点的共享资产。目前，它作为一个单独的登录页面运行，用户被重定向回他们之前所在的页面，类似于 Google 帐户。

有一个 iframe 或弹出 iframe 的提议。

这样做的好处似乎完全是针对用户的，因此用户不必离开他们所在的页面。我对这种方法的担忧是

*   如果我们对登录页面本身进行更改，我们将需要对 iframe 进行更改，这可能需要同时重新部署所有站点
*   对常规 iframe 的建议对设计来说很复杂，并且会在浏览器之间产生问题
*   弹出 iframe 在移动设备上存在问题
*   如果用户禁用了脚本，他们将无法登录
*   用户可能有一个弹出窗口阻止程序

是否有人支持或反对将 iframe 用于 SSO 系统？对我已经提出的观点的任何批评也非常感谢。

谢谢！

# c# - 从 HTML 文本中提取标题文本

> ID：14236888
> 
> 赞同：1
> 
> 时间：2013-01-09T13:58:44.907
> 
> 标签：c#, asp.net, html

我有一个`textarea`带有`tinyMCE`文本编辑器的RichTextEditor。我想提取所有没有样式和格式的标题（H1、H2 等）文本。
假设这`txtEditor.InnerText`给了我如下价值：

```
<p><span style="font-family: comic sans ms,sans-serif; color: #993366; font-size: large; background-color: #33cccc;">This is before heading one</span></p>
<h1><span style="font-family: comic sans ms,sans-serif; color: #993366;">Hello This is Headone</span></h1>
<p>this is before heading2</p>
<h2>This is heading2</h2> 
```

我只想获取标题标签文本的列表？任何形式的建议和指导将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:26:48.303

使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)，然后很容易：

```
 var doc = new HtmlDocument();
  doc.LoadHtml(txtEditor.InnerText);
  var h1Elements = doc.DocumentNode.Descendants("h1").Select(nd => nd.InnerText);
  string h1Text = string.Join(" ", h1Elements); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:29:56.057

引用[正则表达式以读取 HTML 中的标签](https://stackoverflow.com/questions/6225670/regular-expression-to-read-tags-in-a-html)
我相信这与您正在寻找的内容很接近：

```
String h1Regex = "<h[1-5][^>]*?>(?<TagText>.*?)</h[1-5]>";

MatchCollection mc = Regex.Matches(html, h1Regex); 
```

# php - 模块从 joomla 1.5 升级到 2.5

> ID：14236889
> 
> 赞同：0
> 
> 时间：2013-01-09T13:58:46.173
> 
> 标签：php, joomla

我有一个包含 nivo 滑块的模块...在 joomla 1.5 中制作，我必须在 joomla 2.5 中升级。我试过但总是有错误信息

```
 Failed loading XML file
    C:\xampp\htdocs\testjoomlasite\tmp\install_50ed4ca94978c\mod_PlimunNivoSlider/mod_PlimunNivoSlider.xml
    XML: Opening and ending tag mismatch: fields line 34 and config
    JInstaller: :Install: Cannot find Joomla XML setup file 
```

有人可以告诉我升级需要进行哪些更改吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:43:20.460

请更改模块的**xml**设置文件，如下例所示：

```
<?xml version="1.0" encoding="utf-8"?>
<extension type="module" version="2.5" client="site" method="upgrade">
    <name>Module Title</name>
    .
    .
    <version>2.5</version>
    <description>Module description</description>
    <files>
        <filename module="mod_test">mod_test.php</filename>
        <filename>index.html</filename>
    </files>
</extension> 
```

因为`Joomla 1.6`组件设置格式已更改。`<install>`您可以使用`<extension>`上面描述的标签，而不是使用标签。

# iphone - facebook graph api教程出现错误

> ID：14236892
> 
> 赞同：0
> 
> 时间：2013-01-09T13:59:01.647
> 
> 标签：iphone, objective-c

我正在使用这些教程在 iphone 中实现 facebook graph api [http://www.raywenderlich.com/1488/how-to-use-facebooks-new-graph-api-from-your-iphone-app](http://www.raywenderlich.com/1488/how-to-use-facebooks-new-graph-api-from-your-iphone-app) 但是当我点击 facebook 登录像这样在 nslog 文件上出现错误

```
2013-01-09 18:50:54.509 FBFun[3279:11303] *** WebKit discarded an uncaught exception in the webView:decidePolicyForNavigationAction:request:frame:decisionListener: delegate: <NSInvalidArgumentException> Application tried to present modally an active controller <ViewController: 0x75446a0>. 
```

我尝试通过此链接上发布的答案来解决问题
[iOS 5 中的新错误：WebKit 丢弃了未捕获的异常](https://stackoverflow.com/questions/7812061/new-error-in-ios-5-webkit-discarded-an-uncaught-exception) 这是链接上的答案

```
-(void)checkLoginRequired:(NSString *)urlString {
    NSLog(@"Url: %@",urlString);
    if ([urlString rangeOfString:@"login.php"].location != NSNotFound && [urlString rangeOfString:@"refid"].location == NSNotFound) {
            [_delegate displayRequired];
    } else if ([urlString rangeOfString:@"user_denied"].location != NSNotFound) {
         [_delegate closeTapped];
    }
} 
```

但我没有成功，有人对这篇文章有答案，请与我分享

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:47:42.360

离开那个教程：

使用这个，对您来说很容易，并且是分步骤的：

从这里下载 Facebook 新 SDK，您不需要像之前在 ray 教程中所做的那样单独调用：

```
https://developers.facebook.com/ios/ 
```

初学者从 facebook 的 SDK 使用和访问 Graph API/FQL 等的最简单的教程：

```
https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/ 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:15:34.820

嘿，我在使用 [RayWenderLich 教程](http://www.raywenderlich.com/1488/how-to-use-facebooks-new-graph-api-from-your-iphone-app)实现 Graph Api 的代码中遇到了相同的问题， 但经过数小时的研究和一些代码调试后解决了这个问题。

为了方便起见，我更改了代码。

*   (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {

    NSString *urlString = request.URL.absoluteString;

    [self checkForAccessToken:urlString];

    如果（self.isViewLoaded && self.view.window）{

    ```
     // viewController is visible

       return TRUE; 
    ```

    }

    [self checkLoginRequired:urlString];

    返回真；

}

-(void)checkLoginRequired:(NSString *)urlString {

```
 NSLog(@"Url: %@",urlString);

    if ([urlString rangeOfString:@"login.php"].location != NSNotFound && [urlString rangeOfString:@"refid"].location == NSNotFound) {
        NSLog(@"Login Required");
        [_delegate displayRequired];

    } else if ([urlString rangeOfString:@"login_success"].location != NSNotFound) {
        NSLog(@"login_success");

       //any thing you want to do after log in success.
    } 
```

# c++ - for循环的问题

> ID：14236893
> 
> 赞同：0
> 
> 时间：2013-01-09T13:59:02.533
> 
> 标签：c++, loops, for-loop

我的程序有问题，我需要写入文件每个玩家在 5 天内玩了多少游戏，这是我的 txt 文件：第一行的第一个数字是他们玩了多少天，第 2 行到第 5 行的第一个数字是他们玩了多少天，每行中的其他数字是他们这些天玩了多少游戏：

```
5
5 3 2 3 1 2
3 6 2 4
4 2 2 1 2
3 3 3 3
2 3 4 
```

这是我的程序：

```
 #include <iostream>
 #include <fstream>
 using namespace std;
 int main()
 {
     int programuotojai,programos;
     ifstream fin ("duomenys.txt");
     fin >> programuotojai; //players

     for(int i = 1; i <= 6; i++){
     fin >> programos; //games played
     cout << programos;
 } 
 } 
```

你能帮我把这个程序写到最后吗，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:03:10.260

读完玩过的游戏数后，你需要自己读游戏。就像是：

```
#include <iostream>
#include <fstream>
using namespace std;
int main()
{
    int programuotojai,programos;
    ifstream fin ("duomenys.txt");
    fin >> programuotojai; //players

    for(int i = 1; i <= programuotojai; i++){
    fin >> programos; //games played
     cout << programos;
    for (int j=0;j<programos;++j) {
      int day;
      fin>>day;
      // ..... do some fancy stuff
    }
 } 
 } 
```

也使用`programuotojai`而不是常量 6（如果我正确获取代码）。

我不会编写完整的程序，但在我看来，您必须对每一行的数字求和。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:54:22.827

我认为这可能是您正在寻找的：

```
#include <iostream>
#include <fstream>

using namespace std;

int main()
{
    int players, daysPlayed, totalPlayed; 

    ifstream fin ("duomenys.txt");
    fin >> players; //  number of players.

    for( int playerCount = 1; playerCount <= players; playerCount++ ) {
        totalPlayed = 0;
        fin >> daysPlayed; //   number of days a player played games.

        for ( int dayCount = 1; dayCount <= daysPlayed; dayCount++ ) {
            int daysGameCount;
            fin >> daysGameCount; // amount of games a player played on each day.
            totalPlayed += daysGameCount;
        }
        cout << totalPlayed << endl;
        //  ... do whatever you want with the result
    }
} 
```

# android - 在不同平台之间共享对象

> ID：14236896
> 
> 赞同：0
> 
> 时间：2013-01-09T13:59:04.623
> 
> 标签：android, .net, ios, xml, json

我在 VB.NET 中编写了服务器和所有 Windows 客户端，并且我使用 XML 序列化在它们之间共享对象。

我们需要让 Android 和 iOS 设备连接到服务器，但我无法让 XML 序列化以它在 .NET 中的方式工作，所以我查看了所有这三种协议都实现的其他协议。我能够让 Android 将对象转换为 JSON 以通过套接字流发送，所以如果我能让 iOS 做同样的事情，我可能最终会走这条路并重新实现 JSON 而不是 XML。Microsoft 只是使将对象序列化/反序列化为 XML 变得如此容易。

使用套接字时，除了 XML 或 JSON 之外，还有没有更好的方法在不同平台之间传输对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:04:42.970

如果你想在 iOS 中实现 JSON，你可以看看这个教程：

[Ray Wenderlich*在 iOS 5 教程中使用 JSON*](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)。

从教程的第一行开始：

> iOS 5 有一些新的内置 API，让 JSON 的读写变得非常容易。

因此，如果您的目标是 iOS 5+ 设备（可能是当今最合理的选择），那么您最好使用 JSON（我在一个项目中使用它，真的很容易快速上手）。

# zend-form - 以zend形式创建依赖下拉列表

> ID：14236906
> 
> 赞同：0
> 
> 时间：2013-01-09T13:59:42.580
> 
> 标签：zend-form, zend-form-select

有人知道如何在 Zend Form 中创建依赖下拉列表（选择）吗？即两个下拉菜单，国家和城市。只有在选择国家/地区时才会填充城市。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:53:15.667

在 zend 元素（国家）中，您必须添加一个属性

```
'onchange' => 'fillCityBox(this.value)' 
```

此函数 ( `fillCityBox`) 使用 ajax 填充城市下拉列表。

# sql - 在关于日期的 SQL 查询中添加条件

> ID：14236912
> 
> 赞同：0
> 
> 时间：2013-01-09T14:00:00.840
> 
> 标签：sql

我有这个查询，它可以帮助我只显示启动日等于今天的记录..

我有一个昨天的变量..我需要像这样访问：

```
$strSQL = "SELECT forma.*, SMS_MONTIME.IDTICKET, SMS_MONTIME.MBYLLUR,SMS_MONTIME.time_added
FROM forma 
LEFT JOIN SMS_MONTIME ON forma.ID = SMS_MONTIME.IDTICKET WHERE forma.data_fillim = '$today'  ORDER BY forma.id DESC"; 
```

我需要将其修改为：

```
$strSQL = "SELECT forma.*, SMS_MONTIME.IDTICKET, SMS_MONTIME.MBYLLUR,SMS_MONTIME.time_added
FROM forma 
LEFT JOIN SMS_MONTIME ON forma.ID = SMS_MONTIME.IDTICKET WHERE forma.data_fillim = '$today' AND forma.data_fillim = '$yesterday'  ORDER BY forma.id DESC"; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:02:16.490

日期函数因您使用的数据库而异。

如果是 Oracle，您可以使用“date - 1”，它会减去一天，在 sqlserver 和 mysql 上，我不确定那个“快捷方式”，但我确定他们有 dateadd() 或 adddate() 之类的。

如果您的数据库可以将字符串 '$today' 实时解释为日期，它也会有所不同，以便您可以在日期函数中使用它

```
WHERE forma.data_fillim = '$today' OR forma.data_fillim = '$today' - 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:19:20.773

在黑暗中拍摄，但是将 AND 更改为 OR 怎么样？如果您已经有与 $today 格式相同的 $yesterday 但只是它是不同的日期，那么您可以使用 OR。或者，您可以使用：

```
forma.data_fillim in ('$today', '$yesterday') 
```

这也取决于你真正想要做什么。如果您期望包含 $yesterday 和 $today 的项目的结果，那么您可以使用：

```
(forma.data_fillim >= '$yesterday') and (forma.data_fillim <= '$today') 
```

如果您期望 $yesterday 或 $today 项目的结果，那么您可以使用上面的前一个片段（带有 IN 语句的片段）或使用这个

```
(forma.data_fillim = '$yesterday') or (forma.data_fillim = '$today') 
```

您可以使用适用于 MySQL 和 MSSQL 的 BETWEEN 语法。我不确定甲骨文：

*   MySQL：[http ://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between)
*   MSSQL： http: [//msdn.microsoft.com/en-us/library/ms187922 (v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms187922(v=sql.100).aspx)

我希望这有帮助

# c++ - 在 Eclipse/StatET 中编写包含 C++ 代码的 R 包

> ID：14236916
> 
> 赞同：2
> 
> 时间：2013-01-09T14:00:12.757
> 
> 标签：c++, eclipse, r, statet

我试图弄清楚如何设置 Eclipse，以便我可以编写包含 C++ 代码的 R 项目和包。

当然，我可以制作单独的 R 和 C++ 项目，编译 C++ 代码，将 .dll 复制到 R 项目并使用 dyn.load 函数在 R 中使用它，但是如果我想构建一个包含 C++ 源代码的 R 包怎么办？我可以再次拥有单独的 C++ 和 R 项目，将 C++ 代码复制到我的 R 包的 src 文件夹中，我想在 StatET 透视图中使用 R 包生成器会正常工作吗？但我想知道我是否可以只制作一个 R 包项目并将 C++ 代码嵌入到该项目中，以便我获得 C++ 视角的好处，即。代码的颜色编码等？

我知道有人会提到 Rcpp，但这不是一个选项。我正在尝试学习 C++ 以及如何首先将它与 R 结合起来。

我正在使用Linux和Windows。

编辑：澄清一下，我想知道如何设置 Eclipse，以便它同时理解 R 和 C++ 代码，即。两个代码都有颜色编码等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:15:27.927

我和其他人一样喜欢编辑战争，但你误解了。拿你写的：

> 我正在尝试学习 C++ 以及如何首先将它与 R 结合起来。

因此，请仔细阅读“编写 R 扩展”，并重做示例。在命令行上。然后学习如何使用 Makefile。

它是关于*代码*和*编译器调用*的。如果您不了解如何调用编译器或如何编写代码，您是否使用 vi、Emacs 或 Eclipse 编写代码并不重要。所以你的意图是对的：学习这些基础知识。

一旦你理解了所有这些，你就可以将适当的声明插入到你的 Eclipse/StatET 配置中了。

（如果你想作弊，我可以向你指出 RInside 包中贡献的 cmake 文件。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T09:11:50.357

好吧，看来我安装不好的 Eclipse 导致了一些问题。我的问题的答案是，我可以在 StatET 角度工作，如果文件扩展名的格式为 .c 或 .cpp，它会自动理解 C++ 代码。然后，如果代码是某个包的一部分，我可以使用 R CMD SHLIB 或 R CMD INSTALL 编译代码。

# python - Gtk Notebook 大小动态变化

> ID：14236918
> 
> 赞同：0
> 
> 时间：2013-01-09T14:00:16.153
> 
> 标签：python, gtk

我有一个笔记本窗口。我想动态改变大小。我确实动态扩展，但我无法缩小它。我用于`win.set_size_request(w,h)`扩展。如何动态收缩？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:33:16.647

您的页面上可能有阻止它们缩小的小部件。您可能需要将页面内容放在 ViewPort 或 ScrolledWindow 中以获得您正在查看的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:00:12.760

您不能通过`GtkNotebook`使用它的 API 来强制 a 缩小。还有其他方法可以做到这一点。如果 Notebook 内的小部件缩小，则 Notebook 将缩小，尽管您可能需要考虑其他页面中的小部件，我不确定这是否有效。您可以将您的 GtkNotebook 包装在一个自定义容器中，以强制在笔记本上收缩。

而且......我想不出更多的方法来做到这一点。 [gtk_widget_set_size_request](http://developer.gnome.org/gtk3/stable/GtkWidget.html#gtk-widget-set-size-request)将仅设置小部件的最小尺寸，覆盖其自然尺寸。

# java - 如何验证 UTF-8 字符串是否包含错误编码的字符

> ID：14236923
> 
> 赞同：19
> 
> 时间：2013-01-09T14:00:25.483
> 
> 标签：java, utf-8, character-encoding

在一个大型数据集中，我有一些看起来像这样的数据：

```
"guide (but, yeah, itâ€™s okay to share it with â€˜em)." 
```

我已经在十六进制编辑器中打开了该文件，并通过字符编码检测算法 ( [http://code.google.com/p/juniversalchardet/](http://code.google.com/p/juniversalchardet/) ) 运行原始字节数据，并且它被肯定地检测为 UTF-8。

在我看来，数据源错误地解释了原始字符集并将有效的 UTF-8 作为我收到的输出写入。

我想尽我所能验证数据。是否有任何启发式/算法可以帮助我进行验证？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-09T14:04:05.203

一旦你有了字符串，你就不能这样做，你必须在你仍然有原始输入的时候这样做。`â€™`一旦你有了字符串，如果没有一些非常脆弱的测试，就无法自动判断是否是实际预期的输入。例如：

```
public static boolean isUTF8MisInterpreted( String input ) {
          //convenience overload for the most common UTF-8 misinterpretation
          //which is also the case in your question
      return isUTF8MisInterpreted( input, "Windows-1252");  
}

public static boolean isUTF8MisInterpreted( String input, String encoding) {

    CharsetDecoder decoder = Charset.forName("UTF-8").newDecoder();
    CharsetEncoder encoder = Charset.forName(encoding).newEncoder();
    ByteBuffer tmp;
    try {
        tmp = encoder.encode(CharBuffer.wrap(input));
    }

    catch(CharacterCodingException e) {
        return false;
    }

    try {
        decoder.decode(tmp);
        return true;
    }
    catch(CharacterCodingException e){
        return false;
    }       
}

public static void main(String args[]) {
    String test = "guide (but, yeah, itâ€™s okay to share it with â€˜em).";
    String test2 = "guide (but, yeah, it’s okay to share it with ‘em).";
    System.out.println( isUTF8MisInterpreted(test)); //true
    System.out.println( isUTF8MisInterpreted(test2)); //false

} 
```

如果您仍然可以访问原始输入，则可以使用以下命令查看字节数组是否等于完全有效的 utf-8 字节序列：

```
public static boolean isValidUTF8( byte[] input ) {

    CharsetDecoder cs = Charset.forName("UTF-8").newDecoder();

    try {
        cs.decode(ByteBuffer.wrap(input));
        return true;
    }
    catch(CharacterCodingException e){
        return false;
    }       
} 
```

您还可以将 CharsetDecoder 与流一起使用，默认情况下，一旦在给定编码中看到无效字节，它就会抛出异常。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2015-12-15T05:58:09.943

如果您使用的是 HTML5，那么只需在 `<meta charset="UTF-8">`里面添加`<head>`

对于 HTML4`<meta http-equiv="Content-type" content="text/html;charset=UTF-8">`

# javascript - 在 html div 标签中显示执行的脚本结果

> ID：14236930
> 
> 赞同：0
> 
> 时间：2013-01-09T14:01:02.930
> 
> 标签：javascript, ajax, jquery

我在一个简单的 html 文件中有一个按钮，onClick 调用下一个脚本：

```
function onShowTest() {
    $('div#content').html('<script>alert("Hello")</script>');
}; 
```

所以基本上当我单击按钮时，我只会收到警报。

我实际上想要实现的是，在 div 标签 ( `content`) 中，我将看到一个绘制某些东西的脚本的结果（不仅仅是示例中的警报，它与 div 标签中显示的结果无关） .

此外，该函数位于名为**utils.js 的其他文件中。**

我尝试使用`jQuery.getScript()`，但我无法让它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:04:26.547

要在适当的位置生成 HTML，您需要使用类似的东西`document.write`，但这仅在解析时有效。HTML 文档完成后，调用它将启动一个新文档并清除现有内容。

如果你想在某处生成 HTML，那么你需要使用 DOM 操作来完成它，而你不能根据脚本元素出现的位置来完成它。

如果你想*画画*一些东西，那么你需要使用 SVG、Canvas 或其他 API 来创建图像。SVG 只是更多的 DOM 操作。Canvas 首先需要 DOM 操作来创建一个 canvas 元素，然后在该元素上调用 canvas api 方法。

如果您希望代码来自其他地方，但从“这里”获取目标，那么您应该编写一个*函数*来执行操作并向它传递一个参数，告诉它在哪里执行操作。

# mysql - 在表格中选择最小、最大年份并定义其余年份

> ID：14236934
> 
> 赞同：-2
> 
> 时间：2013-01-09T14:01:15.083
> 
> 标签：mysql, select, range, max, min

我必须选择列的最小和最大年份并定义剩余年份。这可以使用 sql 查询本身来完成。我不想使用 php 代码（这将是最后一个选项）

```
 Give the range from (select min(Tax filing), max(Tax filing) from tax);

 //Simply writing "Define the range from(nested query)".. please give some query tags which apply.. 
```

![在此处输入图像描述](../Images/8e5920488740ca257ba727aa4dfe82d1.png)

所以它应该自动定义范围。可以使用任何查询来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:48:10.913

```
select somegunk from sometable    
   where somedate between 
       (select max(year(someotherdate)) from sometable) 
   and (select min(year(someotherdate)) from sometable); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:16:39.403

您可以创建一个序列表，在其中插入所有可能的值：

```
create table sequence (id integer not null auto_increment primary key) auto_increment=1900;

insert into  sequence values(null); -- x times 
```

并使用此查询：

```
select * from sequence where id between (select min(Tax_filing) from tax) and (select max(Tax_filing) from tax); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:09:17.017

如果您想列出最小年份和最大年份之间的所有年份，则应执行以下操作：

```
SELECT yearCol
 from yourTable
 where yearCol between
   (select min(yearCol) from yourTable)
 and
  (select max(yearCol)FROM yourTable); 
```

您需要在 yourTable 中保存所有年份之间的记录。

# asp.net - 无权访问用户个人资料

> ID：14236935
> 
> 赞同：1
> 
> 时间：2013-01-09T14:01:23.933
> 
> 标签：asp.net, profile

我将 mySQL 用作 ny db，并且所有 asp 成员资格配置都已到位。我在我的 web.comfig 文件中设置了额外的配置文件属性，如下所示；

```
 <profile defaultProvider="MySQLProfileProvider">
  <providers>
    <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
    <remove name="MySQLProfileProvider" />
    <add name="MySQLProfileProvider" type="MySql.Web.Profile.MySQLProfileProvider, MySql.Web, Version=6.6.3.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" applicationName="/" description="" connectionStringName="LocalMySqlServer" writeExceptionsToEventLog="False" autogenerateschema="True" enableExpireCallback="False" />
  </providers>
  <properties>
    <add name="AccountConfirmationId" type="System.String" />
    <add name="FullName" type="System.String" />
    <add name="CompanyName" type="System.String" />
    <add name="CompanyLocationName" type="System.String" />
  </properties>
</profile> 
```

我的第一个问题是配置文件值实际存储在哪里？我的会员资料表中没有创建其他列。

其次，我使用下面概述的方法将注册过程中输入的值存储到配置文件中，来自“下一步”按钮单击事件。

```
 Protected Sub RegisterUser_NextButtonClick(sender As Object, e As WizardNavigationEventArgs) Handles RegisterUser.NextButtonClick
    'set Profile object and give it its property values
    Dim userProfile As ProfileCommon = TryCast(ProfileCommon.Create(RegisterUser.UserName), ProfileCommon)
    userProfile.AccountConfirmationId = Guid.NewGuid().ToString()
    userProfile.SetPropertyValue("FullName", FullName.Text)
    userProfile.SetPropertyValue("FullName", CompanyName.Text)
    userProfile.SetPropertyValue("FullName", CompanyLocationName.Text)
    userProfile.Save()

    Session("rolerequest") = ddlRegisterAs.SelectedItem.ToString()
    Session("acctconfid") = userProfile.AccountConfirmationId
    Session("completename") = FullName.Text
    Session("compname") = CompanyName.Text
    Session("compnamelocation") = CompanyLocationName.Text

End Sub 
```

我尝试使用以下方法在我的管理员用户管理页面上检索配置文件值（由下拉列表中的用户名选择触发）

```
Protected Sub ddlSiteUsers_SelectedIndexChanged(sender As Object, e As EventArgs) Handles ddlSiteUsers.SelectedIndexChanged

    Try
        Dim userProfile As ProfileCommon = Profile.GetProfile(ddlSiteUsers.SelectedItem.ToString())

        tbProfileUserFullname.Text = userProfile.GetPropertyValue("FullName").ToString()
        tbProfileCompany.Text = userProfile.GetPropertyValue("CompanyName").ToString()
        tbProfileCompLoc.Text = userProfile.GetPropertyValue("CompanyLocationName").ToString()
    Catch ex As Exception
        lblSiteUserErrMessage.Text = "User profile not found...   " & ex.Message.ToString()
        lblSiteUserErrMessage.Visible = True
    End Try

End Sub 
```

所有值都作为空字符串出现。任何帮助表示赞赏。我使用的是网站项目而不是 Web 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:57:45.370

为了回答您的第一个问题，属性名称和值被序列化并存储在现有表列中。有关更多详细信息，请参阅此博客文章： [如何使用 Sql Profile Provider 在数据库中序列化 ASP.NET 配置文件属性](http://weblogs.asp.net/andrewrea/archive/2008/03/04/how-asp-net-profile-properties-are-serialized-in-the-database-using-sql-profile-provider.aspx)
这些是我的 Web 应用程序的配置文件表中的（自动生成的）列：

```
[UserId] [uniqueidentifier] NOT NULL,
[PropertyNames] [nvarchar](4000) NOT NULL,
[PropertyValueStrings] [nvarchar](4000) NOT NULL,
[PropertyValueBinary] [image] NOT NULL,
[LastUpdatedDate] [datetime] NOT NULL, 
```

简而言之，不能直接访问配置文件属性以在配置文件提供程序之外进行查询。出于这个原因，我看到了一些不使用默认配置文件提供程序的建议，而是将用户详细信息存储在单独的`UserDetails`表中。我最终将列直接添加到用户表中，到目前为止这对我来说效果很好，但可能不是某些应用程序的最佳选择。

# database - 如何在每次点击时重新填充 GXT ComboBox？

> ID：14236937
> 
> 赞同：1
> 
> 时间：2013-01-09T14:01:24.783
> 
> 标签：database, gwt, asynchronous, collections, gxt

我在 GXT 中使用了一个简单的 ComboBox，它从数据库中获取它的值。

我想要的是，每次用户单击（展开）组合框时，它都会检查并使用数据库中的最新条目重新填充它（以防它们已更改）。

现在我正在做类似的事情：

```
ProtocolProperties protocolProperties = GWT.create(ProtocolProperties.class);
final ListStore<ProtocolDto> protocolStore = new ListStore<ProtocolDto>(protocolProperties.id());

protocol = new ComboBox<ProtocolDto>(protocolStore, protocolProperties.name());

    protocol.addExpandHandler(new ExpandHandler() {
                @Override
                public void onExpand(ExpandEvent event) {
                    protocolStore.clear();

                    ProtocolDto emptyDto = new ProtocolDto();
                    emptyDto.setId(-1);
                    emptyDto.setName("None");
                    protocolStore.add(emptyDto);

                    AppEntryPoint.getLogbookdataservice().getAllProtocols(new AsyncCallback<List<ProtocolDto>>() {

                        @Override
                        public void onSuccess(List<ProtocolDto> result) {               
                            protocolStore.addAll(result);
                        }

                        @Override
                        public void onFailure(Throwable caught) {
                            // TODO Auto-generated method stub

                        }
                    });
                }
            }); 
```

感谢任何花时间回答这个问题的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:03:15.367

您应该查看 Combobox 中的异步支持，而不是重新发明方轮。

Sencha 演示 - [http://www.sencha.com/examples/#ExamplePlace:advancedcombobox](http://www.sencha.com/examples/#ExamplePlace:advancedcombobox)

Stackoverflow - 也是这里讨论的一种方法 - [GXT 中的动态自动建议组合框](https://stackoverflow.com/questions/4025268/dynamic-autosuggest-combobox-in-gxt)

GXT 论坛 - [http://www.sencha.com/forum/showthread.php?185967-ComboBox-doQuery-method-seems-not-working-with-Remote-Loader](http://www.sencha.com/forum/showthread.php?185967-ComboBox-doQuery-method-seems-not-working-with-Remote-Loader)

# vb.net - 表单vb.net中控件组上的按键事件

> ID：14236941
> 
> 赞同：0
> 
> 时间：2013-01-09T14:01:34.407
> 
> 标签：vb.net, background-color, keypress

当我按下提交按钮时，我将控件的背景颜色设置为红色，而必填字段中没有任何数据。但我需要在这些缺失的必填字段中重新输入数据。当我开始重新输入数据时，背景红色变为白色。是否有机会将所有其他必填字段颜色更改为白色？

```
Private Sub TXTEMPID_KeyPress(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles TXTEMPID.KeyPress
    UncheckMyControls()
    If Asc(e.KeyChar) <> 8 Then
        If Asc(e.KeyChar) < 48 Or Asc(e.KeyChar) > 57 Then
            e.Handled = True
        End If
    End If
End Sub

Private Sub UncheckMyControls()
    Dim txt, cmb, mtxt, rtxt As Control
    For Each cmb In EMPGBDATA.Controls
        If TypeOf cmb Is ComboBox Then
            If cmb.BackColor = Color.Red Then
                cmb.BackColor = Color.White
            End If
        End If
    Next
    For Each rtxt In EMPGBDATA.Controls
        If TypeOf rtxt Is RichTextBox Then
            If rtxt.BackColor = Color.Red Then
                rtxt.BackColor = Color.White
            End If
        End If
    Next
    For Each mtxt In EMPGBDATA.Controls
        If TypeOf mtxt Is MaskedTextBox Then
            If mtxt.BackColor = Color.Red Then
                mtxt.BackColor = Color.White
            End If
        End If
    Next
    For Each txt In EMPGBDATA.Controls
        If TypeOf txt Is TextBox Then
            If txt.BackColor = Color.Red Then
                txt.BackColor = Color.White
            End If
        End If
    Next
End Sub 
```

这是我的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:19:05.323

正如 SolarBear 建议的那样：

```
 For Each cnt In EMPGBDATA.Controls
        If cnt.BackColor = Color.Red Then
            cnt.BackColor = Color.White
        End If
      Next 
```

现在你能准确描述你的问题吗？

因此，在您发表评论后：您说您可以检查必填字段是否为空白，如果是，您将其背景色设置为红色。你弹出消息。在用户第一次尝试在任何文本框中键入内容以将颜色重置为白色的消息之后：

```
 Private Sub txt_KeyPress(sender As System.Object, e As System.EventArgs) Handles TextBox1.KeyPress,TextBox2.KeyPress,TextBox3.KeyPress,TextBox4.KeyPress
 'After the Handles you put all the textboxes,richtexboxes that you want
 'THis way you handle the same event for a lot of controls in the same Sub
     UncheckMyControls()
   End Sub 
```

因此，在您发表评论后2：

```
 Private Sub control_KeyPress(sender As System.Object, e As System.EventArgs) Handles TextBox1.KeyPress,TextBox2.KeyPress,TextBox3.KeyPress,ComboBox1.KeyPress,ComboBox2.KeyPress
 'After the Handles you put all the textboxes,richtexboxes,comboboxes that you want
 'THis way you handle the same event for a lot of controls in the same Sub
     UncheckMyControls()
   End Sub 
```

# web-services - Spring WS 在特定地址显示 WSDL 定义

> ID：14236943
> 
> 赞同：0
> 
> 时间：2013-01-09T14:01:36.463
> 
> 标签：web-services, spring, wsdl

我在显示我的 WSDL 时遇到问题。我找到了一种从我的`XSD`模式中动态读取它的方法，现在我正在这样做：

```
<sws:dynamic-wsdl id="test"                                                           
    portTypeName="testPort"                                                         
    locationUri="/"                                                       
    targetNamespace="http://testnamespace">                               
  <sws:xsd location="/WEB-INF/test.xsd"/>                                                  
</sws:dynamic-wsdl> 
```

这样我就得到了地址：`localhost:localport/applicationname/id.wsdl`WSDL，在我的情况下是：`localhost:8080/MyApp/test.wsdl`。
我想要实现的是`WSDL`在执行另一个请求后显示这个：`localhost:8080/MyApp/test.aspx?WSDL`

我如何编辑我的代码来做到这一点？如果有描述，任何人都可以将我重定向到某个地方吗？我想过创建一个`wsdl`文件而不是创建一个文件，`xsd`但是有人有一个示例如何在特定地址`wsdl`文件下显示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:59:56.407

根据我的经验，我建议您修改`proxy_ajp`配置文件添加：

```
ProxyPass /MyApp/test.aspx?WSDL ajp://localhost:8080/MyApp/test.wsdl 
```

然后重新启动你的`httpd`. 在此操作之后，所有请求`localhost:8080/MyApp/test.aspx?WSDL`都会给出`localhost:8080/MyApp/test.wsdl`结果

# c# - 在业务逻辑层实现通用实用程序类以与 DAL 通信

> ID：14236944
> 
> 赞同：1
> 
> 时间：2013-01-09T14:01:42.117
> 
> 标签：c#, sql-server, entity-framework, n-tier-architecture

以下是我的数据库表的片段：

帐户
--------------
     Account_Id
     Account_Types
     Customer_Id
     Row_Guid

客户
--------------
     Customer_Id
     First_Name
     Last_Name
     Balance
     Row_Guid

订单
--------------
     Order_Id
     Customer_id
     Row_Guid

我已经使用实体框架生成了这些类。之后，我开始在业务逻辑层编写一个实用程序类，该类将与表示层通信以执行添加删除等。例如，当用户单击表单中的“添加”按钮时，事件将调用此方法实用程序类。

由于所有表的功能都相似，但我可以创建一个通用接口，然后让每个表特定的实用程序类实现它。

我有以下内容： `BillingDBEntities`是包含所有“域对象”的实体框架生成的类。此类具有内部对象，例如：ACCOUNT、CUSTOMER、..，它们代表数据库表。

这是我的实用程序界面：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.Objects.DataClasses;
using DataAccessLayer;
namespace BusinessLogicLayer.Implementations
{
    public interface IUtility<T> where T : EntityObject
    {
        void AddEntity(BillingDBEntities billingEntity, T item);
        void AddEntity(BillingDBEntities billingEntity, object[] items, Type[] types);

        void RemoveEntity(BillingDBEntities billingEntity, T item);
        void RemoveEntity(BillingDBEntities billingEntity, object[] items, Type[] types);

        void UpdateEntity(BillingDBEntities billingEntity, object[] items, Type[] types);
     }
} 
```

对于像 void `AddEntity(BillingDBEntities billingEntity, T item);`T 这样的方法，将简单地替换为 ACCOUNT、ORDER、CUSTOMER 等。但是对于像 void 这样的方法

```
AddEntity(BillingDBEntities billingEntity, object[] items, Type[] types); 
```

items 数组包含该类型的组件。对于 Account，它将包含 (Account_id, Customer_id, Account_type, Row_guid)，并且 types 数组包含组件的类型，例如它将是 (long, long,long,Guid) 的帐户。

```
public class Utility : IUtility<ACCOUNT>
    {
        public void AddEntity(BillingDBEntities billingEntity, ACCOUNT item)
        {
            billingEntity.ACCOUNTS.AddObject(item);
        }
        public void AddEntity(BillingDBEntities billingEntity, object[] items, Type[] types)
        {
            //What should I write here????
        }
..
.
.
.
} 
```

问题：如何实现该方法？怎么`BillingDBEntities`会在方法里面调用来设置对象变量呢？有没有一种方法可以代替创建 Utility、Utility ......我只能创建一个类？

如果我的界面设计有误，或者是否有众所周知的方法来实现此类任务，请告诉我。

先感谢您

# java - 在单个文本文件中进行多次搜索

> ID：14236949
> 
> 赞同：1
> 
> 时间：2013-01-09T14:01:57.940
> 
> 标签：java, arrays, algorithm, sorting, binary-search

到目前为止，我已经制作了一个可以在文本文件中搜索单个字符串的程序。它确实给出了我搜索的字符串的索引。但是，如何在单个文本文件中搜索多个字符串？

到目前为止，如果我使用扫描仪输入“Alice”，我的输出将是：

```
Got a match at line 17

Got a match at line 19

Got a match at line 20

Got a match at line 21 
```

但是，如果可能的话，我如何在我的扫描仪中搜索 Alice、John、Steven 作为我的输入，我的输出如下：

```
Got a match for Alice at line 17

Got a match at John at line 19

Got a match at Steven at line 20

Got a match at Steven at line 21 
```

.

```
public static void main(String[]args) throws IOException{

    int nnames;
    String[] names;
    String stringSearch = null;

    Scanner scan = new Scanner(System.in);
    //for(int i=1;i<=3;i++){
    stringSearch = scan.nextLine();

    ArrayList<String> words = new ArrayList<String>();
    BufferedReader reader = new BufferedReader(new FileReader("File1.txt"));

    String line;

    while ((line = reader.readLine()) != null) {                
        words.add(line);
    }reader.close();

    Collections.sort(words);
     System.out.println("ArrayList elements after sorting in ascending order : ");
     System.out.println("");
        for(int i=0; i<words.size(); i++)
          System.out.println(words.get(i));

    for(String sLine : words) 
    {
        if (sLine.contains(stringSearch)) 
        {
            int index = words.indexOf(sLine);
            System.out.println("");
            System.out.println("Got a match at line " + index);

        }
     }

    System.out.println(words.size());
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:07:38.040

`if`用你正在寻找的所有字符串的循环替换你的-block

```
for(String sLine : words) 
{
    for(String searchWord: searchWords)
    {
        if (sLine.contains(searchWord)) 
        {
            int index = words.indexOf(sLine);
            System.out.println("");
            System.out.println("Got a match of "+searchWord+" at line " + index);
        }
    }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:15:46.733

试试这个

```
import java.util.Scanner;
import java.util.ArrayList;
import java.util.*;
import java.io.*;
class x{
public static void main(String[]args) throws IOException{

    int nnames;
    String[] names;
    String stringSearch[] = new String[2];

 //   Scanner scan = new Scanner(System.in);
    //for(int i=1;i<=3;i++){
 //   stringSearch = scan.nextLine();

    stringSearch[0]="hello";   //list of words to search
    stringSearch[1]="world";
    ArrayList<String> words = new ArrayList<String>();
    BufferedReader reader = new BufferedReader(new FileReader("File1.txt"));

    String line;

    while ((line = reader.readLine()) != null) {                
        words.add(line);
    }reader.close();

    Collections.sort(words);
//     System.out.println("ArrayList elements after sorting in ascending order : ");
//     System.out.println("");
        // for(int i=0; i<words.size(); i++)
          // System.out.println(words.get(i));

for(int i=0;i<2;i++){
    for(String sLine : words) 
    {
        if (sLine.contains(stringSearch[i])) 
        {
            int index = words.indexOf(sLine);
            System.out.println("");
            System.out.println("Got a match of "+stringSearch[i] +" at line " + index);

        }
     }}

    System.out.println(words.size());
    }
    } 
```

如果你想从输入中获取所有搜索字符串，那么试试这个

```
searchString=item to search seperated by ','
String[] splits = searchString.split(","); 
```

# phpfox - 如何在 PHPFox 中通过 Ajax 获取任何 DOM 元素

> ID：14236962
> 
> 赞同：0
> 
> 时间：2013-01-09T14:02:35.397
> 
> 标签：phpfox

我以为我可以用

```
$this->get('element_id') 
```

获取 Ajax-Function 中每个 DOM-Element 的值。但这不起作用。只有后元素我可以这样，对吧？但是我如何获得其他元素？

谢谢你的帮助...

这是我的 Ajax 类：

```
class Name_Component_Ajax_Folder_Ajax extends Phpfox_Ajax
{
public function test(){

    $iChildItemId = $this->get('element_id');
    var_dump($iChildItemId);
    $this->html('#testdiv', $this->getContent());
}
} 
```

通过单击链接，我调用此函数（ test() ）并且我想获取输入字段的值（elemnt_id）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:54:14.667

基本上，您有 2 种常见的解决方案来传递 Web 浏览（Firefox、Chrome 等）发送到服务器的 AJAX 请求中的值。

如果您使用 POST 请求，则应将您的预期值指定为隐藏输入`<input type='hidden' id='val1' value='value_you_want_to_pass_to_sever'>`。

如果您使用 GET 请求，您可以使用 URL 参数传递它，例如：www.youserver.com?val1=value_you_want_to_pass。

您可以使用 JQuery 获取您想要传递的值。

然后您可以使用 $this->get('val1') 在服务器端获取您的价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T12:46:48.760

这应该可以设置一个元素：

```
$this->call('$(\'#js_photo_category_' . $aCategory['parent_id'] . '\').attr(\'selected\', true);'); 
```

同样可以用来获取值

```
$elementVal = $this->call('$(\'#js_photo_category_' . $aCategory['parent_id'] . '\').val();'); 
```

最好的方法是在客户端使用javascript来使用foreach获取id，将它们保存在数组/json中并在请求中发送它们，然后在完成后执行一些操作：

```
$.ajaxCall('module.function_name', 'arrayData='+myArray).done(function(data) {
        javascript_function(data);
    }); 
```

希望这可以帮助

# xpages - Lotus Notes - @Transform - 可用于 XPages 的解决方法？

> ID：14236967
> 
> 赞同：0
> 
> 时间：2013-01-09T14:02:53.713
> 
> 标签：xpages, lotus

我目前正在将 Lotus Notes 应用程序迁移到 XPages。该应用程序包含几个使用“@Transform”的公式，并且由于没有与“@Transform”等效的 SSJS，我想知道如何最好地在 XPages 中对这些公式进行编码。目前我正在尝试使用 session.evaluate。这是最好的选择还是有人可以推荐另一种方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:28:38.497

`session.evaluate`如果您有现有的@Formula 代码，则很方便。在 SSJS 中，您可以使用：

```
for (var i in array_variable) {
  print(array_variable[i]);
} 
```

或者

```
for (var element in vector_or_list) {
  print(element);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:28:12.017

我建议您使用 session.evaluate() ，就像您目前尝试做的那样。

既然你写了“尝试”——你有什么问题吗？如果您在多个地方使用此功能，我建议您创建一个自定义 Java 类来处理评估（并确保正确输入）。它可以很容易地从您的 SSJS 中调用 - 它会成为 XSnippet 或扩展库扩展的理想候选者；-)

/约翰

# ios - iOS 在启动时打开应用程序

> ID：14236969
> 
> 赞同：-3
> 
> 时间：2013-01-09T14:02:58.133
> 
> 标签：ios

我有一个 ipad 安全应用程序，我需要在启动时启动这个应用程序（即在启动后立即启动）。我不知道这是否可能。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:04:38.277

不，这在 iOS 上是不可能的。

正如[David Rönnqvist](https://stackoverflow.com/users/608157/david-ronnqvist)在越狱设备上所说，这是可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:38:11.693

如果这是内部应用程序，则可以在企业帐户下执行某些操作；但你必须问苹果。对于 App Store，没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T14:40:12.690

要启动应用程序，在启动任何设备时，您应该有权访问内核，您可以在其中相应地对其进行自定义。您只能在 Linux 操作系统上访问内核级别，因为它是开源的。在您的情况下，您将无法获得访问权限，因为 iOS 是专有的，除非您进行一些破解并且如果您成功了，Apple 也不会接受您的应用程序。因此，最好重新考虑您要实现的目标。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T14:05:22.237

仅当您可以控制将运行该应用程序的设备并使其越狱时才有可能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T14:06:58.200

您将无法在启动时运行应用程序。

根据您尝试执行的操作，您可能能够使用配置文件实现您的“安全”目标。

继承人他们可以做什么：http: [//developer.apple.com/library/ios/#featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html](http://developer.apple.com/library/ios/#featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html)

您可以使用 Apple Configurator 管理它们 [https://itunes.apple.com/us/app/apple-configurator/id434433123?mt=12](https://itunes.apple.com/us/app/apple-configurator/id434433123?mt=12)

# resharper - 如何更改 resharper 上的警告样式？（想去掉卷曲下划线）

> ID：14236971
> 
> 赞同：0
> 
> 时间：2013-01-09T14:03:08.043
> 
> 标签：resharper, resharper-7.0, resharper-7.1

每当我打开不符合我的 stylecop 设置的遗留代码或第三方代码时，我都会收到大量蓝色下划线（警告）。这使得阅读代码变得非常困难，因为它会增加大量的线路噪音。

有没有办法在 resharper 中更改这种用于警告（或禁用它）的卷曲下划线样式，而无需切换整个代码分析？

我正在运行 resharper 7.1.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:24:26.427

我只有 Resharper 5.1 在工作，但在 7.1.1 中应该是类似的

导航：

ReSharper->选项...->代码检查->检查严重性

并改变：

StyleCop - 默认值（需要 VS 重新启动）-> 默认违规严重性

'显示为提示'

然后重启VS。

![在此处输入图像描述](../Images/d82a473b0aee47844d875a2a6603c6cc.png)

或者，您可以使用`CTRL`+ `SHIFT`+ `ALT`+ `8`（默认 VS 键盘映射）临时关闭/打开代码分析。

此外，您可以为每个项目创建单独的“Settings.StyleCop”设置文件，这样您就可以为旧项目创建一个以忽略所有内容。

# struts - 在标签 struts 中设置请求变量

> ID：14236977
> 
> 赞同：0
> 
> 时间：2013-01-09T14:03:25.640
> 
> 标签：struts

在我的行动中：

```
.....
String status = "add";
servletRequest.setAttribute("button", status);
.... 
```

在我的 JSP 中：

```
<c:if test='${button == "add"}'>
  <c:set var="edittype" value="add" />
</c:if>
<c:if test='${button == "update"}'>
  <c:set var="edittype" value="update" />
</c:if> 
```

我努力了：

```
<html:hidden property ="" value="edittype" /> 
```

和

```
<html:hidden property ="" value="${button}" /> 
```

也没有工作。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:16:34.943

尝试这个 ：

两种方式

1>

```
 <html:hidden property ="reqButtonValue" value="${param.button}" /> 

    <c:if test="${reqButtonValue=='add'}">
  <c:set var="edittype" value="add" />
</c:if> 
```

2>

```
<c:if test="${param.button=='add'}">
      <c:set var="edittype" value="add" />
</c:if> 
```

# c# - 如何捕获 IE 事件

> ID：14236978
> 
> 赞同：1
> 
> 时间：2013-01-09T14:03:25.930
> 
> 标签：c#, asp.net, process

我在我的程序中使用此代码...

```
 System.Diagnostics.Process.Start("www.something.com"); 
```

它在 IE 中打开该 url。用户在页面中输入一些详细信息并单击提交按钮。浏览器将这些详细信息导航到其他页面我想在导航页面时执行一些操作...

如何捕获浏览器导航事件...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:05:52.637

您应该考虑使用 Web Browser 控件，而不是启动单独的浏览器进程。您可以导航到您想要的任何页面，捕获事件，并且通常控制整个浏览过程。

* * *

如果您尝试从 ASP.NET 或其他一些非交互式上下文中执行此操作，那么答案将**非常不同**。

如果表单不是很复杂，那么您可以尝试使用 WebClient 发布到 URL 并阅读结果。如果事情有点复杂，请使用 WebRequest。

如果表单确实需要在浏览器中运行（可能需要 JavaScript），那么您必须在浏览器中运行它。您将无法访问在单独进程中运行的浏览器中发生的事件。而且您将无法在 ASP.NET 中运行 WebBrowser 控件。这意味着您需要做一些更复杂的事情。

我建议您按照我最初的建议编写一个简单的 Windows 窗体应用程序来托管 WebBrowser 控件。该应用程序将能够捕获事件并执行与 IE 交互所需的任何其他操作。为了使该程序与 ASP.NET 交互，我建议您让它自托管 WCF 服务。您的 ASP.NET 应用程序将使用该服务与 Winforms 应用程序进行通信，而 Winforms 应用程序又会与浏览器进行交互。

您必须强制 WCF 服务一次只处理一个请求，因为只有一个 WebBrowser 控件。如果您需要一次处理多个请求，那么您将需要创建多个 winforms 应用程序实例。

# c# - wpf用户控件清理

> ID：14236988
> 
> 赞同：1
> 
> 时间：2013-01-09T14:03:57.330
> 
> 标签：c#, wpf, user-controls

我有一个使用 WPF 和 UserControl 编码的应用程序。我已将父窗口与程序启动时加载的用户控制选项卡链接在一起。

从那里我可以选择一个选项卡，该选项卡将打开相应的用户控件。一些 UserControls 有带线程的后台工作线程，一些线程纯粹用于数据捕获，而另一些则用于数据输出或生成报告。当使用我们创建的类关闭每个选项卡时，`ClossableItems`它允许您选择关闭按钮以及在我们的 MainWindow 上显示选项卡。

我们遇到的问题是，当 UserControl 关闭时，没有任何资源被释放回系统。后台工作人员和显示 UserControl 所需的资源。我用谷歌搜索了强制关闭我的 UserControl 的方法，但无济于事。我尝试过的事情：

```
Background worker:
bwDataCollector.WorkerSupportsCancellation = true;
bwDataCollector.CancellationPending;
bwDataCollector.CancelAsync();

User Control:
this.Dispatcher.ShutdownStarted += Dispatcher_ShutdownStarted
private void Dispatcher_ShutdownStarted(object sender, EventArgs e)
        {
        } 
```

所以基本上我要问的是，如果有人知道关闭这个从 onDestroy 等方法调用的 UserControls 的方法，它也会释放资源？

还有一种方法可以让我使用同样的方法来关闭我的后台工人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:59:22.517

您需要向后台工作人员发出停止信号，并且后台工作人员需要确保它负责处理信号。可以使用各种模式来实现信令，最简单的是：

从包含名为`CloseControl`. 在该`CloseControl`方法中，设置一个标志，指示后台工作人员停止。

在关闭包含用户控件的窗口之前，调用`CloseControl`每个控件的方法。

# c - for循环中的malloc

> ID：14236991
> 
> 赞同：2
> 
> 时间：2013-01-09T14:04:05.083
> 
> 标签：c, memory-management

我有一个问题......可以说我有以下部分代码：

```
int *a,*a1,*a2;
for (i=1; i<=2; i++) {
    a=malloc(sizeof(int));
    if (i==1) a1=a;
    else if (i==2) a2=a;
}
*a1=5;
*a2=4; 
```

所以我的问题是，如果我使用 printf 打印 a1 和 a2 变量 a1 的值将是 5 而 a2 的值是 4 ？因此，如果我使用 malloc 分配内存和该内存空间中的 a 点，然后再次使用 malloc 分配内存，那么 a 指向内存的不同部分，但内存的第一部分仍然存在？或者如果我再次使用 malloc ，它将擦除内存的第一部分，并将写入内存的新部分

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T14:07:16.507

每次调用`malloc`都会返回一个指向不同内存的指针，直到您调用`free`以释放该内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T14:10:07.243

> 如果我使用 printf 打印 a1 和 a2 变量 a1 将具有值 5 而 a2 将具有值 4 ？

嗯……不。

`a1`（类型为`int *`，即*指向**整数*的指针）将包含第一次调用`malloc()`.

`a2`(和`a`)，也是指针类型，将包含*第二次*调用产生的*地址*。*`malloc()`*

 *中的*地址*`a1`将指向一个整数，您为其分配了值 5。

(and )中的*地址*将指向一个整数，您为其分配了值 4。`a2``a`

`free()`这两个整数都将保持分配状态，直到您通过调用它们的地址来释放它们。**注意**：调用 eg 后`free( a2 )`，不再分配整数。`free()`在同一个地址上再次调用（例如通过`free( a )`，或通过`free( a2 )`第二次调用）将导致未定义的行为（即，如果你很幸运，你的程序会崩溃）。

指针是*地址值*。看来这就是您的困惑的来源：它与它所指向的事物不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T14:07:32.513

我相信你的问题的答案是肯定的。Malloc'ing 将为您提供具有（至少）指定大小（如果可用）的内存位置。它不会释放任何内存，只会给你更多（用于`free()`释放 malloc 的内存）。

您正在使用一些临时变量这一事实`a`没有意义。在这个循环结束时`a == a2 != a1`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T14:12:18.233

> 如果我使用 printf 打印 a1 和 a2 变量 a1 将具有值 5 而 a2 将具有值 4 ？

是的，你是对的。不过，这是一个有点奇怪的问题，因为试看比问更容易。

> 因此，如果我使用 malloc 分配内存和该内存空间中的 a 点，然后再次使用 malloc 分配内存，那么 a 指向内存的不同部分，但内存的第一部分仍然存在？

那是对的。`malloc()`分配“存在”的内存，直到您使用释放它`free()`，或者执行`realloc()`可能将您的数据移动到不同内存并释放旧内存位置的内存。我建议您阅读一些有关它的文档。至少[手册页](http://www.kernel.org/doc/man-pages/online/pages/man3/malloc.3.html)。

此外，您的代码有错误。您使用赋值而不是比较并且`i`未定义变量。这是一个更正的版本，带有`printf()`：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int *a,*a1,*a2;
    int i;

    for (i=1; i<=2; i++) {
        a = malloc(sizeof(int));
        if (i==1)
            a1 = a;
        else if (i==2)
            a2 = a;
    }
    *a1=5;
    *a2=4;

    printf("a1=%d, a2=%d\n", *a1, *a2);

    free(a1);
    free(a2);

    return EXIT_SUCCESS;
} 
```

希望能帮助到你。祝你好运！*

# c# - 我的消息不会显示在我的文本框中？

> ID：14236994
> 
> 赞同：0
> 
> 时间：2013-01-09T14:04:08.603
> 
> 标签：c#

我正在尝试填写表格（电影信息，例如标题、年份和类型），然后将其显示在文本框中（启用 = 假）。我有 2 个类和一个表单（带有 2 个文本框（用于用户输入）、2 个按钮、1 个用于注册电影信息，1 个用于在第三个文本框（禁用的那个）中显示信息。

```
class Movies
    {
        public string Title { get; set; }
        public int Year { get; set; }

        public string ReturnMovie()
        {
            return Title + " (" + Year.ToString() + ")";
        }
    }

class Genres
    {
        public string Genre { get; set; }

        public string ReturnGenre()
        {
            return Genre;
        }
    } 
```

**主窗体：**

```
 bool btnRegisterClicked = false;

        Movies m1 = new Movies();
        Genres g1 = new Genres();

        private void btnRegister_Click(object sender, EventArgs e)
        {
            btnRegisterClicked = true;

            if (btnRegisterClicked == true)
            {
                if (txtTitle.Text.Length == 0)
                {
                    MessageBox.Show("Enter a title for the movie.");

                    btnRegisterClicked = false;
                }

                else if (txtYear.Text.Length < 4)
                {
                    MessageBox.Show("Enter a valid year.");

                    btnRegisterClicked = false;
                }

                else if (chkGenre.SelectedIndex == -1)
                {
                    MessageBox.Show("Select the genre(s) of the movie.");

                    btnRegisterClicked = false;
                }

                else
                {
                    txtTitle.Text = m1.Title;
                    txtYear.Text = m1.Year.ToString();
                    chkGenre.Text = g1.Genre;
                }

                txtTitle.Clear();
                txtYear.Clear();
                chkGenre.ClearSelected();
            }
        }

        private void btnShow_Click(object sender, EventArgs e)
        {
            txtShow.Text = m1.ReturnMovie() + g1.ReturnGenre();
        }
    } 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T14:10:46.827

`else`您块中的分配是向后的。您将 设置为and`TextBox`的未初始化内容，然后立即将它们删除。 `m1``g1``.Clear()`

```
else
{
    m1.Title = txtTitle.Text;
    m1.Year = int.Parse(txtYear.Text);
    g1.Genre = chkGenre.Text
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T14:11:01.570

您需要将值分配给变量而不是控件...，更改以下

```
 else
        {
            txtTitle.Text = m1.Title;
            txtYear.Text = m1.Year.ToString();
            chkGenre.Text = g1.Genre;
        } 
```

至

```
 else
        {
            m1.Title = txtTitle.Text;
            m1.Year = int.Parse(txtYear.Text);
            g1.Genre = chkGenre.Text;
        } 
```

# java - java的UTF-8字符串类

> ID：14236996
> 
> 赞同：7
> 
> 时间：2013-01-09T14:04:14.797
> 
> 标签：java, string, performance, memory

我需要在内存中保存大量字符串对象（数百 MB），并且我想以 UTF-8 格式保存它们，因为在大多数情况下，它需要默认实现使用的一半内存。
默认 String 类需要 12 个字符的字符串 60 个字节（请参阅[http://blog.griddynamics.com/2010/01/java-tricks-reducing-memory-consumption.html](http://blog.griddynamics.com/2010/01/java-tricks-reducing-memory-consumption.html)）。
我的大部分字符串都是 10-20 个字符长。
我想知道是否有一些开源库为此类字符串提供包装器？
我知道如何将 String 转换为 UTF-8 字节数组，但我正在寻找一个包装类，它将提供所有需要的实用程序函数（Hash、Equal、toString、fromString 等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:13:39.467

Apache Avro 有一个实现的[UTF8 包装类](http://avro.apache.org/docs/1.6.1/api/java/org/apache/avro/util/Utf8.html)`CharSequence`，但我不知道这些对象的内存消耗

Hadoop 有[Text 类](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/io/Text.html)，它有你想要的那种界面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:48:15.317

如果您希望每个字符串都有一个不同的对象，并且希望它们尽可能紧凑，请使用字节数组。这将是每个字符 1 个字节与 2 个字节，并且您不会有 String 标头的开销（每个对象可能增加 32 个字节）。

当然，如果不先转换为 String，您将无法在这些上使用任何 String 方法。

但是，如果您真的想节省空间，请将字符串背靠背存储在几个较大的数组中，并使用“涂料向量”来定位各个字符串。

# actionscript-3 - 在 flex 中调用 URLLoader.load 之前显示进度对话框？

> ID：14236999
> 
> 赞同：0
> 
> 时间：2013-01-09T14:04:29.133
> 
> 标签：actionscript-3, apache-flex, popup, urlloader

我正在开发一个 flex 应用程序（在 Web 浏览器中运行），它允许用户加载许多文件，然后在一个单一的 multipart/form-data 请求中将它们全部发送到服务器。

**我的问题是：**
出于安全原因，flash 要求用户通过单击按钮来启动 URLLoader.load 操作。没关系，用户单击应用程序中的保存按钮，然后我们就走了。
不幸的是，请求的上传部分似乎不是异步的，而只是下载部分。数据可以是任意大小，因为用户可以添加任意数量的文件，因此上传可能需要一段时间才能完成。

在一个理想的世界里，我会在保存按钮的点击处理程序中做这样的事情：

```
PopupManager.createPopup(this, ProgressDialog, true);
doUpload(); 
```

不幸的是，这将导致在上传完成后显示进度对话框。那么，我可以像这样将上传开始推迟到弹出窗口显示之前吗？

```
PopupManager.createPopup(this, ProgressDialog, true);
setTimeout(doUpload, 100); 
```

结果我也不能这样做，因为上面提到的安全原因。这将引发 SecurityError：错误 #2176。

基本上问题是

1.  在当前帧中的代码完成之前，弹出窗口将不可见
2.  URLLoader.load 阻塞，直到请求的上传部分完成
3.  弹出窗口来得太晚了，因为耗时的部分已经结束。
4.  我等不及弹出窗口了，因为加载操作必须由用户单击启动。

**有什么办法可以解决这个限制吗？**

这是一个说明问题的小应用程序。按钮二和三将抛出 SecurityError。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
               width="419" height="250">

    <fx:Script>
        <![CDATA[
            import mx.core.IFlexDisplayObject;
            import mx.managers.PopUpManager;

            private var urlLoader:URLLoader;
            private var popup:IFlexDisplayObject;

            protected function sendNowButton_clickHandler(event:MouseEvent):void {
                trace(">> URLLoaderSendTest.sendNowButton_clickHandler(event)");
                popup = PopUpManager.createPopUp(this, ProgressDialog, true);
                doLoad();
                trace("<< URLLoaderSendTest.sendNowButton_clickHandler(event)");
            }

            protected function sendWithSetTimeoutButton_clickHandler(event:MouseEvent):void {
                trace(">> URLLoaderSendTest.sendLaterButton_clickHandler(event)");
                popup = PopUpManager.createPopUp(this, ProgressDialog, true);
                setTimeout(doLoad, 200);
                trace("<< URLLoaderSendTest.sendLaterButton_clickHandler(event)");
            }

            protected function sendWithCallLaterButton_clickHandler(event:MouseEvent):void {
                trace(">> URLLoaderSendTest.sendWithCallLaterButton_clickHandler(event)");
                popup = PopUpManager.createPopUp(this, ProgressDialog, true);
                callLater(doLoad);
                trace("<< URLLoaderSendTest.sendWithCallLaterButton_clickHandler(event)");
            }

            private function doLoad():void {
                trace(">> URLLoaderSendTest.doLoad()");

                var bytes:ByteArray = new ByteArray();
                bytes.writeInt(1);

                var request:URLRequest = new URLRequest("http://localhost/test/");
                request.method = URLRequestMethod.POST;
                request.contentType = "multipart/form-data";
                request.data = bytes;

                urlLoader = new URLLoader();
                urlLoader.addEventListener(Event.COMPLETE, loaderComplete);

                urlLoader.load(request);

                trace("<< URLLoaderSendTest.doLoad()");
            }

            protected function loaderComplete(event:Event):void {
                trace(">> URLLoaderSendTest.loaderComplete(event)");
                PopUpManager.removePopUp(popup);
            }
        ]]>
    </fx:Script>

    <s:Button id="sendNowButton" x="10" y="10"
              label="Send now" 
              click="sendNowButton_clickHandler(event)"/>
    <s:Button id="sendWithsetTimeoutButton" x="10" y="40" 
              label="Send with setTimeout" 
              click="sendWithSetTimeoutButton_clickHandler(event)"/>
    <s:Button id="sendWithCallLaterButton" x="10" y="70" 
              label="Send with callLater" 
              click="sendWithCallLaterButton_clickHandler(event)"/>
</s:Application> 
```