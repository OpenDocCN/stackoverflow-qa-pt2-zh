# StackOverflow 问答 15230000-15230999

# c++ - c ++映射的奇怪行为

> ID：15230003
> 
> 赞同：-4
> 
> 时间：2013-03-05T17:13:00.690
> 
> 标签：c++, map, g++

这是代码

```
next = friendchain.begin()->first;
while(true) {
    start = next;
    next = friendchain[next];

    if(next!=0) {
        friendchain.erase(start);
        groupcount++;
        size = friendchain.size();
        printf("size=%i\n", size);
        //size = 0
    }

    if (next==0) {
        size = friendchain.size();
        printf("size=%i\n", size);
        //size = 1!!!

        if (friendchain.empty())
        {
            break;
            //should go out of the loop here
        } else {
            next = friendchain.begin()->first;
            // next has value of 3   
        }
    }
} 
```

我的朋友链地图的内容是：
1 -> 2 和
2 -> 3
我不明白为什么 else 部分被执行。
如果您需要更多代码，请告诉我。
问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:25:24.270

我删除了一些不需要的 if 语句，并且您没有正确处理擦除。

```
auto itr = friendchain.begin();
while (itr != friendchain.end()) {
    if (itr->first != 0) {
        friendchain.erase(itr++);
        groupcount++;
    } else {
        ++itr;
    }

    std::size_t size = friendchain.size();
    printf("size=%i\n", size);
} 
```

# wpf - 调度员困境 - 如何正确调度？

> ID：15230005
> 
> 赞同：2
> 
> 时间：2013-03-05T17:13:05.540
> 
> 标签：wpf

我已经阅读了 WPF 中有关 Dispatcher 的文章，但没有一篇文章能很好地解释 Dispatcher 的行为。所以我对你们的问题是，除了保留任务队列并按优先级执行它们之外，Dispatcher 究竟做了什么？队列看起来像什么？如果我按优先级“正常”依次放置 3 个任务，然后依次放置一个优先级“发送”的任务。哪个会先执行？优先级为 normal 的 3 个任务将按什么顺序执行？是否有一些关于 Dispatcher 的非常好的教程或一些你们想分享的概念证明？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:18:40.203

这`Dispatcher`实际上只是 WPF 应用程序的消息泵。

与传统的 Windows 消息泵不同，它确实具有内置的优先级，因此它的作用类似于[优先级队列](http://en.wikipedia.org/wiki/Priority_queue)，而不是传统的（先进先出）队列。

如果你发送一个优先级为 的消息`Send`，它将在其他优先级的操作之前得到处理，例如`Normal`. 您可以在帮助中查看优先级列表及其值[`DispatcherPriority`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherpriority.aspx)。较高优先级的消息总是在较低优先级的消息（尚未被处理）之前处理。

至于你的具体问题：

> 所以我对你们的问题是，除了保留任务队列并按优先级执行它们之外，Dispatcher 究竟做了什么？

它处理和处理 Windows 消息，就像传统 Win32 或 Windows 窗体应用程序中的普通 Windows 消息泵一样。优先队列的构建是为了处理除了标准 Windows 消息之外的用户消息，并具有内置的优先级。

> 队列看起来像什么？

它实际上是一个优先级队列。

> 如果我按优先级“正常”依次放置 3 个任务，然后依次放置一个优先级“发送”的任务。哪个会先执行？

这取决于。如果当时有其他工作发生，`Send`任务将首先处理。如果没有其他工作发生，则`Normal`任务可能会在您提交`Send`任务之前执行，在这种情况下，顺序将发生变化。但是，该`Send`任务将尽快执行。

> 优先级为 normal 的 3 个任务将按什么顺序执行？

这些将按照它们被调度的顺序执行。

# c# - IBiLookup 和 Bilookup：键和值“字典”查找

> ID：15230008
> 
> 赞同：0
> 
> 时间：2013-03-05T17:13:09.197
> 
> 标签：c#, .net, dictionary

我需要一个更强大的类字典结构来获得：

*   通过提供键值（默认字典行为）；
*   通过提供一个值（不是那么微不足道）。

另外，我想扩展这个类字典结构的功能，以便一个键可以与**多个值**相关联。

通过[这个](https://stackoverflow.com/questions/255341/getting-key-of-value-of-a-generic-dictionary/255630#255630 "获取通用字典的价值键？")讨论，[这个](https://stackoverflow.com/a/255638/1643883 "乔恩斯基特")答案和[另一个](https://stackoverflow.com/a/255630/1643883 "米奇小麦 + 乔恩斯基特")答案提供了实现它的工具。我决定从 BiDictionary（Jon Skeet 的回答）中删除“按索引访问”，因为歧义会比我想要的更频繁地发生（例如，将字符串映射到字符串时）。我想出的类似字典的“结构”是：

```
using System.Collections.Generic;

public interface IBiLookup<TLeft, TRight>
{
    IDictionary<TLeft, ICollection<TRight>> LeftToRight { get; }
    IDictionary<TRight, ICollection<TLeft>> RightToLeft { get; }

    bool TryGetByLeft(TLeft left, out ICollection<TRight> rights);
    bool TryGetByRight(TRight right, out ICollection<TLeft> lefts);

    void Add(TLeft left, TRight right);
} 
```

```
public class BiLookup<TLeft, TRight> : IBiLookup<TLeft, TRight>
{
    public IDictionary<TLeft, ICollection<TRight>> LeftToRight
    {
        get { return this.leftToRight; }
    }
    public IDictionary<TRight, ICollection<TLeft>> RightToLeft
    {
        get { return this.rightToLeft; }
    }

    public bool TryGetByLeft(TLeft left, out ICollection<TRight> rights)
    {
        return LeftToRight.TryGetValue(left, out rights);
    }
    public bool TryGetByRight(TRight right, out ICollection<TLeft> lefts)
    {
        return RightToLeft.TryGetValue(right, out lefts);
    }

    public void Add(TLeft left, TRight right)
    {
        AddLeftToRight(left, right);
        AddRightToLeft(right, left);
    }

    private void AddLeftToRight(TLeft left, TRight right)
    {
        ICollection<TRight> rights;

        // 1) Is there an entry associated with the "left" value?
        // 2) If so, is the "right" value already associated?
        if (!TryGetByLeft(left, out rights))
        {
            // Then we have to add an entry in the leftToRight dictionary.
            rights = new List<TRight> { right };                
        }
        else
        {
            // So there are entries associated with the "left" value.
            // We must verify if the "right" value itself is not there.
            if (((List<TRight>)rights).FindIndex(element => element.Equals(right)) < 0)
            {
                // We don't have that association yet.
                rights.Add(right);
            }
            else
            {
                // The value is already in the list: do nothing.
                return;
            }
        }

        LeftToRight[left] = rights;
    }
    private void AddRightToLeft(TRight right, TLeft left)
    {
        ICollection<TLeft> lefts;

        // 1) Is there an entry associated with the "right" value?
        // 2) If so, is the "left" value already associated?
        if (!TryGetByRight(right, out lefts))
        {
            // Then we have to add an entry in the leftToRight dictionary.
            lefts = new List<TLeft> { left };
        }
        else
        {
            // So there are entries associated with the "right" value.
            // We must verify if the "right" value itself is not there.
            if (((List<TLeft>)lefts).FindIndex(element => element.Equals(left)) < 0)
            {
                // We don't have that association yet.
                lefts.Add(left);
            }
            else
            {
                // The value is already in the list: do nothing.
                return;
            }
        }

        RightToLeft[right] = lefts;
    }

    #region Fields

    private IDictionary<TLeft, ICollection<TRight>> leftToRight = new Dictionary<TLeft, ICollection<TRight>>();
    private IDictionary<TRight, ICollection<TLeft>> rightToLeft = new Dictionary<TRight, ICollection<TLeft>>();

    #endregion
} 
```

我担心将 Add(...) 方法拆分为两个更具体的方法是否是一个很好的实现，因为 BiLookup 类将被广泛使用并且需要牢记性能。此外，**这个线程的目的**是讨论接口和类实现是否尽可能好，或者可以改进它们。

如果我将接口和“默认”实现都保存到类库项目中，那么设计是否足以重复使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:29:58.267

如果不实际使用它，就无法查看“设计是否足够好，可以重复使用”。您需要尝试以*几种*不同的方式使用您的代码（所有单元测试都算作一种），看看它是否有意义并鼓励编写可读的代码。

如果您没有任何特定要求（性能或其他），而只是确保代码的单元测试覆盖率良好，则所有测试都已通过并且您的预期使用场景已被测试覆盖。

代码注释：强制转换（即`((List<TLeft>)lefts)`）*看起来*没有必要。`FindIndex`调用（使用 O(number_of_items) 进行线性搜索）在性能敏感代码中看不到家。

# jquery - jQuery zClip 不适用于我的附加表。会不会是版本冲突？

> ID：15230011
> 
> 赞同：1
> 
> 时间：2013-03-05T17:13:14.420
> 
> 标签：jquery, zclip

我尝试将其实现到我的项目[jsFiddle zClip 中并附加表](http://jsfiddle.net/f4gZA/)

```
var appendTable = new String();

appendTable = '<table>';

appendTable += '<tr><th id="header">Header 1</th>';
appendTable += '<td><div id="row1">Row 1</div></td></tr>';
appendTable += '<tr><th id="header">Header 2</th><td id="row2">Row 2</td></tr>';
appendTable += '<tr><th id="header">Header 3</th><td><div>';
appendTable += '<div id="row3">This will be copied!</div>';
appendTable += '<button id="copyRow3">Copy</button>';
appendTable += '</div></td></tr>';

appendTable += '</table>';

$('#appendTable').append(appendTable);

$("#copyRow3").zclip({
   path: "http://www.steamdev.com/zclip/js/ZeroClipboard.swf",
   copy: function() { return $('#row3').text(); }
}); 
```

这个小提琴应该可以工作，但是在实施时，它根本不起作用。它从不复制指定的 div。

jquery-1.4.1.min.js 是我与 jquery.zclip.min.js 一起使用的 jquery 文件。这会是 zClip 不起作用的原因吗？

另外，我试图在 html 中包含一个复制按钮，当点击它时，我的浏览器似乎冻结了。

# javascript - 避免具有绝对位置的 HTML 元素之间的重叠

> ID：15230016
> 
> 赞同：1
> 
> 时间：2013-03-05T17:13:21.300
> 
> 标签：javascript, jquery, html, css

我正在尝试创建一个产品列表，其中每个产品都定义为具有绝对位置的 div（如 pinterest pin 页面）。不幸的是，所有产品都相互重叠。

注意：我正在使用 WordPress 主题添加产品，因此我无法为每个 div 添加左侧和顶部位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:19:11.250

如果您使用绝对位置，那么几乎添加顶部和左侧将是解决方案。有没有办法通过Javascript添加左上角坐标？计算宽度+一点边距。

无论如何，您为什么要设置绝对位置？有没有机会将其更改为相对或静态？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:28:06.367

我已经通过使用 jQuery Masonry 函数解决了这个问题，我不知道它已经在 WordPress 中

# css - jquery ui 可拖动 + 可排序助手样式

> ID：15230018
> 
> 赞同：6
> 
> 时间：2013-03-05T17:13:48.140
> 
> 标签：css, jquery-ui, draggable, jquery-ui-sortable, helper

我正在使用 jquery ui 插件来实现链接到可排序列表元素的拖放。当我移动可拖动元素时，会创建一个具有自定义宽度和高度的助手。当我的元素位于可排序区域上方时，会创建一个内联样式并影响我的自定义宽度和高度。助手不再具有正确的尺寸，并且占用了可排序区域宽度的 100%。您可以在此处查看有关 jquery ui 示例的示例[http://jqueryui.com/draggable/](http://jqueryui.com/draggable/) # sortable 我的目标是防止在帮助器的高度和宽度中插入内联样式。那可能吗？

我尝试了可排序的 forcehelpersize 参数，但没有成功。

编辑：我注意到，当我在可排序区域上时，助手采用可拖动的初始元素的尺寸。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-19T17:38:15.797

不幸的是，设置助手宽度的 ui.sortable 代码没有考虑指定的类的宽度。我正在使用 jQuery 1.8.x 并偶然发现了同样的行为。查看源代码，我看到 ui.sortable 正在检查是否在元素上指定了宽度样式，如果没有，将其设置为可排序元素中第一个元素的宽度。我的解决方案是使用可拖动助手选项的函数形式显式设置助手的宽度和高度。

```
$('#draggable').draggable({
    helper: function() {
        var helper = $(this).clone(); // Untested - I create my helper using other means...
        // jquery.ui.sortable will override width of class unless we set the style explicitly.
        helper.css({'width': '462px', 'height': '300px'});
        return helper;
    }
}); 
```

这些值不必进行硬编码。例如，您可以从另一个元素复制它们。但它们*确实*需要在辅助元素本身上设置（不是继承的）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-03T08:59:51.363

老问题，谷歌不介意。因此，这可能对某些人仍然有用。**我在可排序对象**上使用事件如下：

```
$('#element').sortable({
    receive: function(event, ui) {
        ui.helper.first().removeAttr('style'); // undo styling set by jqueryUI
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-13T15:37:55.463

在 .ready 函数的顶部，将宽度初始化为实际宽度。如果只有一个元素，请使用：

```
$('#myDraggable').css({
    'width' : $('#myDraggable').width()
}); 
```

如果有多个元素，您可以循环使用：

```
$( "#myDraggable > div" ).each(function( index ) {
    $(this).css({
        'width':$(this).width()
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-12T14:48:00.050

您还可以获取克隆元素的宽度和高度，并使用它们来设置克隆本身的宽度和高度。

```
helper: function() {
  var helper = $(this).clone(); // Untested - I create my helper using other means...
  // jquery.ui.sortable will override width of class unless we set the style explicitly.
  helper.css({'width': $(this).width(), 'height': $(this).height()});
  return helper;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-23T09:26:30.007

请试试这个：

```
$('#draggable-id').draggable({
    stop: function ( event, ui ) {
         $(ui.helper[0]).attr('style', '');
         //your css
         //$(ui.helper[0]).css({});
    },
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-05T08:10:36.613

**为什么不使用helper 功能提供的`event`and `ui`vars** 而不是使用 jQuery 搜索 helper 呢？

例如，我在元素周围添加了一个带有`prepend`/的表格，以在移动它时`append`保持我的风格。`tr`

```
helper: function(event, ui) {
    ui.prepend('<table class="sorting table table-striped table-hover table-bordered"><tbody>')
      .append('</tbody></table>');
    ui.addClass('my-helper');
    return ui;
}, 
```

您还可以使用现有的 .ui-sortable-helper 类：

```
.ui-sortable-helper {
    background-color: #ccc !important;  
}
.ui-sortable-helper td {
    padding: 0px 5px;
} 
```

在`stop`功能上，您可以像这样轻松删除不再需要的元素：

```
stop: function(e, ui) {
    $('.sorting').replaceWith(function() {
        return $('tr', this);
    });
}, 
```

# linux - 如何使用 sed 将文件中的字符串替换为 shell 变量

> ID：15230020
> 
> 赞同：3
> 
> 时间：2013-03-05T17:13:55.187
> 
> 标签：linux, shell, sed

天哪，我尝试了 MAN 页面，以及这里的几个帖子。我想我只是愚蠢，因为我不明白。

我有一个包含 {VERSION} 和 {DISTRO} 的 javascript 文件，其中的变量字符串值应该像这样替换。

```
var MyObject = {

    /**
     * @property {string} VERSION Holds the current version of the framework
     */
    VERSION:    '{VERSION}',
    /**
     * @property {string} DISTRO Holds the distrobution tag of the framework
     */
    DISTRO:     '{DISTRO}'
}; 
```

这个命令为我的 shell 运行。无论我做什么，它都不起作用或我得到错误。

```
VERSION="0.9.0"
DISTRO="Developer"
OUT_CAT=$OUT_CAT_DEBUG

${OUT_CAT} | sed -i "s/{VERSION}/\$VERSION/" -e "s/{DISTRO}/\$DISTRO/" ${OUT_CAT}
#sed -i "s/{VERSION}/$VERSION/" -e "s/{DISTRO}/$DISTRO/" ${OUT_CAT} 
```

那么我在哪方面是迟到的呢？似乎它应该非常简单和直接。

[编辑] 这是脚本的简化版本，因此您可以知道我在做什么以及变量来自哪里。

```
#!/bin/bash
VERSION="0.9.0"

DEV_DIR=../lib
DIST_DIR=../dist
WEB_DIR=/d/Android_Dev/GitHUB/WEB/h5c3/dist

OUT_CAT_DEBUG=h5c3.debug.cat
OUT_MIN_DEBUG=h5c3.debug.min
OUT_ZIP_DEBUG=$DIST_DIR/h5c3.debug.gz

OUT_CAT_RELEASE=$DIST_DIR/h5c3.release.cat
OUT_MIN_RELEASE=h5c3.release.min
OUT_ZIP_RELEASE=$DIST_DIR/h5c3.release.gz

echo Building Version "$1"...

if [ "$1" == debug ]; then
    DISTRO="Developer"
    OUT_CAT=$OUT_CAT_DEBUG
    OUT_MIN=$OUT_MIN_DEBUG
    OUT_ZIP=$OUT_ZIP_DEBUG
    # empty it out
    > ${OUT_CAT}
    cat $DEV_DIR/packed.js >> ${OUT_CAT}
    #Development support
    cat $DEV_DIR/h5c3_debug.js >> ${OUT_CAT}
elif [ "$1" == release ]; then
    DISTRO="Production"
    OUT_CAT=$OUT_CAT_RELEASE
    OUT_MIN=$OUT_MIN_RELEASE
    OUT_ZIP=$OUT_ZIP_RELEASE
    # empty it out
    > ${OUT_CAT}
    cat $DEV_DIR/packed.js >> ${OUT_CAT}
    cat $DEV_DIR/h5c3_release.js >> ${OUT_CAT}
else
    #publish.sh debug
    #publish.sh release
    exit 2
fi

#Build Game Core
cat $DEV_DIR/core/stacktrace.js >> ${OUT_CAT}

#Build Externals
cat $DEV_DIR/ext/base64.js >> ${OUT_CAT}

#Build Engine
cat $DEV_DIR/engine/boot.js >> ${OUT_CAT} 

#Build Internal Components
cat $DEV_DIR/components/component.js >> ${OUT_CAT}

#Build Systems
cat $DEV_DIR/systems/system.js >> ${OUT_CAT}

#Build Framework
cat $DEV_DIR/framework/page.js >> ${OUT_CAT} 

#Build Web App
cat $DEV_DIR/webapp/game.js >> ${OUT_CAT}

if [ "$1" == debug ]; then
    #Development support
    cat $DEV_DIR/debugger/profiler.js >> ${OUT_CAT}
    cat $DEV_DIR/debugger/console.js >> ${OUT_CAT}
    cat $DEV_DIR/debugger/debug.js >> ${OUT_CAT}
    cat $DEV_DIR/debugger/developer.js >> ${OUT_CAT}
fi

if [ "$1" == release ]; then
    echo Removing any debug calls from ${OUT_CAT}
    sed -i '/this.debug/d' ${OUT_CAT}
fi

echo "Inserting distribution & version in ${OUT_CAT}"
${OUT_CAT} | sed -i "s/{VERSION}/\$VERSION/" -e "s/{DISTRO}/\$DISTRO/" ${OUT_CAT}

echo Minimizing...[${OUT_CAT} to ${OUT_MIN}]
> ${OUT_MIN}
java -jar yuicompressor-2.4.7.jar ${OUT_CAT} -o ${OUT_MIN}

#echo Compressing...[${OUT_MIN} to ${OUT_ZIP}]
#gzip --best --force ${OUT_MIN}

echo Copying to WEB Folder...
cp --update ${OUT_MIN} ${WEB_DIR}

echo Complete.
exit 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T17:22:03.047

似乎您正在尝试将管道连接到 sed 和使用文件的组合。以下将完全正常，

```
sed -i -e "s/{VERSION}/${VERSION}/" -e "s/{DISTRO}/${DISTRO}/" ${OUT_CAT} 
```

您无需转义`$`, 也无需通过管道输入`sed`，因为您使用`-i`的是就地修改文件。`-e`当它们不止一个时，您还需要为每个表达式使用。

*编辑：*这是 sed 手册页中的一点，它给出了`-e`选项问题的指示（强调我的），

> 如果没有给出 -e、--expression、-f 或 --file 选项，则将第一个非选项参数作为要解释的 sed 脚本。**所有剩余的参数都是输入文件的名称**；如果没有指定输入文件，则读取标准输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:22:29.293

你不需要逃避`$`：

```
$ DISTRO="Developer"

$ VERSION="0.9.0"

$ sed -e "s/{VERSION}/$VERSION/" -e "s/{DISTRO}/$DISTRO/"  file
var MyObject = {

    /**
     * @property {string} VERSION Holds the current version of the framework
     */
    VERSION:    '0.9.0',
    /**
     * @property {string} DISTRO Holds the distrobution tag of the framework
     */
    DISTRO:     'Developer'
}; 
```

你在吹什么`$OUT_CAT_DEBUG`？

# sql - INSERT INTO EXCEL（链接服务器）只读

> ID：15230022
> 
> 赞同：1
> 
> 时间：2013-03-05T17:13:57.053
> 
> 标签：sql, sql-server, export-to-excel

我正在尝试将结果集插入指向 Excel 文件的链接服务器。

这是我的脚本：

```
exec sp_addlinkedserver 
@server = N'ExcelTEST',
@srvproduct = N'Excel 12.0',
@provider = N'Microsoft.ACE.OLEDB.12.0',
@datasrc = N'\\MyServer\MyPath\MyFile.xlsx',
@provstr = N'Excel 12.0;HDR=No,IMEX=1'                    
 --
exec sp_addlinkedsrvlogin
    @rmtsrvname = N'ExcelTEST',
    @useself = N'False',
    @locallogin = NULL,
    @rmtuser = NULL,
    @rmtpassword = NULL 
GO
--
INSERT INTO ExcelTEST...[Sheet2$] 
SELECT TOP 10 *
FROM dbo.myTable
GO

sp_dropserver N'ExcelTEST', 'droplogins'
GO 
```

然后我收到以下错误：

> 链接服务器“ExcelTEST”的 OLE DB 提供程序“Microsoft.ACE.OLEDB.12.0”返回消息“无法更新。数据库或对象是只读的。”。
> 
> 消息 7399，级别 16，状态 1，第 6 行链接服务器“ExcelTEST”的 OLE DB 提供程序“Microsoft.ACE.OLEDB.12.0”报告错误。提供者表示用户没有执行该操作的权限。
> 
> 消息 7343，级别 16，状态 2，第 6 行链接服务器“ExcelTEST”的 OLE DB 提供程序“Microsoft.ACE.OLEDB.12.0”无法插入表“[ExcelTEST]...[Sheet2$]”。

如何以读写方式连接到 Excel 文件？

# actionscript-3 - AS3 ScrollPane 鼠标滚轮事件在 IE 外部不起作用

> ID：15230028
> 
> 赞同：0
> 
> 时间：2013-03-05T17:14:09.610
> 
> 标签：actionscript-3, flash, internet-explorer, browser, scrollpane

我的项目中有几个 ScrollPane 实例，并且在本地测试时 - 只需运行 swf - 滚动鼠标滚轮，同时滚动内容。但是，当我在 Google Chrome 或 FireFox 中运行它时，即使我先单击内容，鼠标滚轮也不会做任何事情。虽然我可以用鼠标滚轮滚动内容，但在 IE 中进行测试。我似乎无法在网上找到像这样的另一个问题，但我希望有人可能知道可能出了什么问题？

谢谢，希瑟

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:14:23.910

实际上，这个问题并不是 ScrollPane 所特有的，而是与鼠标滚轮事件被浏览器截获而没有到达 swf 有关。

我设法在 index.html 文件中通过设置 wmode = "window"（以前它是 "opaque"）嵌入 swf 时解决了这个问题 - wmode 属性“设置 SWF 文件的窗口模式属性以实现透明度、分层、在浏览器中定位和渲染” [http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html](http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html)

# wordpress - 更改 WordPress 回复按钮以包含海报名称

> ID：15230029
> 
> 赞同：1
> 
> 时间：2013-03-05T17:14:16.017
> 
> 标签：wordpress, button, reply

我有一个使用服装主题的 WordPress 博客，我想做的是更改博客帖子下方每条评论末尾的回复文本，以便它包含评论发布者的名称。

例如，如果评论用户的名称为“max”，则回复按钮会说“回复 max”，而不仅仅是回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:20:57.353

我想到了

```
<?php
$author = get_comment_author( $comment_ID );
comment_reply_link( array_merge( $args, array( 'reply_text' => __( 'Reply to '.$author.'<span>&uarr;</span>', 'twentyeleven' ), 'depth' => $depth, 'max_depth' => $args['max_depth'] ) ) ); 
?> 
```

# javascript - 固定位置的元素重叠页脚

> ID：15230035
> 
> 赞同：3
> 
> 时间：2013-03-05T17:14:30.043
> 
> 标签：javascript, jquery, css

我有侧边栏块，它的位置是固定的。
当我滚动浏览器的窗口时，我需要通过这个侧边栏修复页脚的重叠。

我试图将侧边栏的位置更改为`absolute`，计算移动条件并将其移动到窗口的滚动事件中，但是当我快速滚动时它无法正常工作。

我该如何解决这个问题，快速滚动窗口时出现问题，或者建议是否有一个 js 插件？

**更新：**

小提琴：http: [//jsfiddle.net/c863E/1/](http://jsfiddle.net/c863E/1/)

（页脚不应与侧边栏重叠）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:20:52.687

我之前使用过以下插件来完成这个确切的任务：http: [//www.profilepicture.co.uk/sticky-sidebar-jquery-plugin/](http://www.profilepicture.co.uk/sticky-sidebar-jquery-plugin/)

它工作得很好。

这里还有 GitHub 项目：[https ://github.com/pmp/jQuery-Stickybox](https://github.com/p-m-p/jQuery-Stickybox)

您需要的解决方案的通用术语是粘性侧边栏。有各种 jQuery 插件和教程使用不同的技术来实现这种效果。谷歌搜索“jquery sticky sidebar”会发现很多。

# lotus - Lotus Notes：将脚本添加到右键菜单

> ID：15230043
> 
> 赞同：1
> 
> 时间：2013-03-05T17:14:42.307
> 
> 标签：lotus, agent

我有一个现有的 Lotus Notes 脚本/代理，可以对我的邮件中的消息执行某些操作（删除附件）。该脚本显示在“操作”菜单中。

我想将相同的脚本添加到右键菜单中。我怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:28:21.993

您必须在 ($Inbox)- 文件夹中创建一个操作。动作的代码是：

```
@Command([RunAgent]; "YourAgent" ) 
```

在动作属性中，您可以启用“包含在鼠标右键菜单中”选项并为动作命名。如果您想在“所有文档”-视图和“已发送”-视图中使用此操作，最好将其创建为“共享”-操作，然后您可以在任何需要的地方重复使用它（在您的邮件数据库）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:15:49.917

据我所知，没有办法。

为什么要通过右键单击来执行此操作？也许，我们可以找到另一个解决方案。

# php - Laravel 验证错误不是视图中的对象

> ID：15230045
> 
> 赞同：0
> 
> 时间：2013-03-05T17:14:46.737
> 
> 标签：php, arrays, validation, object, laravel

我对 Laravel 有一个奇怪的问题。

我正在做一些表单验证，并且在视图`$errors`中是一个数组而不是对象，因此当我这样做时给了我一个 PHP 错误`$errors->has()`

这是我的控制器代码

```
$v = Validator::make($new_comment, $rules);

    if ($v->fails())
    {
        return Redirect::to_route('named_route', [ $event->slug])->with_errors($v)->with_input();
    } 
```

在控制器`$v`中是一个对象，但在我看来，它是一个具有以下内容的数组

```
array(2) { ["messages"]=> array(1) { ["comment"]=> array(1) { [0]=> string(43) "The comment must be at least 10 characters." } } ["format"]=> string(8) ":message" } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:22:07.057

我发现了这个问题。

这是我用于 laravel 的 MongoDB 会话驱动程序。

它将其存储为数组而不是验证器对象。

我将不得不使用不同的会话驱动程序或扩展 MongoDB 会话驱动程序以使其正确运行。

# javascript - 滚动到时更改项目类别

> ID：15230047
> 
> 赞同：3
> 
> 时间：2013-03-05T17:14:48.047
> 
> 标签：javascript, jquery, css, scroll

我有一个导航设置，当单击链接时，页面会向下滚动到列表中的相应项目，当到达项目时更改链接的类。

```
<nav> 
<a href="#one" class="anchorLink">one</a> 
<a href="#two" class="anchorLink">two</a> </nav>

 <ul>
  <li id="one"></li>
  <li id="two"></li> 
 </ul> 
```

这是一个相当粗略的例子

[http://jsfiddle.net/FSk5Q/1/](http://jsfiddle.net/FSk5Q/1/)

我还想更改项目的背景颜色（最好淡化为新颜色），然后在滚动到另一个项目时恢复它的原始类，然后更改下一个项目的类。

我需要在单击并滚动到时发生这种情况，因此 :target 选项并不是很理想。

非常感谢您的建议。在js部门不太好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:22:59.630

希望这至少可以让你开始。我所做的是检查偏移顶部是否小于文档的滚动顶部（如果它在 X 个像素内，您也可以执行类似操作）。

褪色可以通过 CSS3 过渡来完成。

```
$(document).on('scroll', function () {
    $("li").each(function () {
        if ($(this).offset().top <= $(document).scrollTop()) {
            $("li").removeClass('highlight');
            $(this).addClass('highlight');
        }
        else {
            $(this).removeClass('highlight');
        }
    });
}); 
```

[http://jsfiddle.net/FSk5Q/6/](http://jsfiddle.net/FSk5Q/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:58:56.200

我做了一个基于*Explosion Pills*的固定版本。希望这是你想要的。

```
$(document).on('scroll', function ()
{
    $("nav a").removeClass('highlight'); // reset all menu items
    temp = $();
    $("li").each(function (i) // for each content blcok (you schould give them a class)
    { 
        if ($(this).offset().top <= $(document).scrollTop()) // if it's position is above/at the page top
        {
            temp = $("nav a:nth-child("+(i+1)+")");
        }
    });
    temp.addClass('highlight');
}); 
```

[http://jsfiddle.net/maxmeuten/FSk5Q/8/](http://jsfiddle.net/maxmeuten/FSk5Q/8/)

# vbscript - 将字符串转换为 UTF-8

> ID：15230048
> 
> 赞同：3
> 
> 时间：2013-03-05T17:14:53.553
> 
> 标签：vbscript

我有一个分配给编码为 ansi 的变量的字符串，例如`str = "Пирг"`
如何将其编码为 UTF-8？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:29:58.287

你的意思是当它写入文件时？像这样：

```
Set stream = CreateObject("ADODB.Stream")
stream.Open
stream.Type     = 2 'text
stream.Position = 0
stream.Charset  = "utf-8"
stream.WriteText str
stream.SaveToFile filename, 2
stream.Close 
```

**编辑：**如果您希望 UTF-8 字符串进入另一个变量，您可以这样做：

```
Set stream = CreateObject("ADODB.Stream")
stream.Open
stream.Type     = 2 'text
stream.Position = 0
stream.Charset  = "utf-8"
stream.WriteText str
stream.Flush
stream.Position = 0
stream.Type     = 1 'binary
stream.Read(3)      'skip BOM
utfStr = stream.Read
stream.Close 
```

# c++ - 可以在 Hippo Mocks 中将 mock 用于具有不同返回值的多个预期调用吗？

> ID：15230050
> 
> 赞同：1
> 
> 时间：2013-03-05T17:14:59.437
> 
> 标签：c++, visual-studio-2010, mocking, hippomocks

我使用 Hippo Mocks 取得了巨大的成功，但我有一种情况，我不太清楚如何正确设置。被测代码看起来像这样：

```
auto firstName = record.at("firstName").getValue();
auto lastName = record.at("lastName").getValue(); 
```

Where`IRecord::at()`返回 a `IColumn&`，它有一个纯虚`getValue()`方法。我正在尝试使用和的模拟版本测试我的`Irecord`代码`IColumn`：

```
auto mockRec = mocks.InterfaceMock<IRecord>();
auto mockCol = mocks.InterfaceMock<IColumn>(); 
```

我可以很好地设定期望`firstName`：

```
mocks.OnCall(mockRec, IRecord::at).With("firstName").Return(std::ref(*mockCol));
mocks.OnCall(mockCol, IColumn::getValue).Return(std::string("John"))); 
```

但我想将`IColumn`模拟重用于下一个期望`lastName`。

```
mocks.OnCall(mockRec, IRecord::at).With("lastName").Return(std::ref(*mockCol));
mocks.OnCall(mockCol, IColumn::getValue).Return(std::string("Doe"))); 
```

`getValue()`但是当我运行它时，Hippo Mocks 会为这两个调用返回“John” 。

按照[教程](https://www.assembla.com/spaces/hippomocks/wiki/Tutorial_3_0)，我尝试限制“firstName”和“lastName”调用的顺序：

```
auto& firstCall = mocks.OnCall(mockRec, IRecord::at).With("firstName").Return(std::ref(*mockCol));
mocks.OnCall(mockCol, IColumn::getValue).After(firstCall).Return(std::string("John")));

auto& lastCall = mocks.OnCall(mockRec, IRecord::at).With("lastName").Return(std::ref(*mockCol));
mocks.OnCall(mockCol, IColumn::getValue).After(lastCall).Return(std::string("Doe"))); 
```

`getValue()`但是两个电话我仍然得到“约翰” 。

**问：**是否可以重用`IColumn`接口并告诉 Hippo Mocks 在每次调用时返回不同的值，`getValue()`就像我需要的那样，或者我是否坚持`IColumn`为每个参数创建单独的模拟？注意：我的实际实现将有两个以上的参数，因此重用`IColumn`模拟减少了每个单元测试的大量设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T17:47:26.380

我不确定您的情况是什么问题，但是当我使用[git repository 的版本运行以下代码时](https://github.com/dascandy/hippomocks)

```
struct IColumn {
    virtual std::string getValue() = 0;
}; 

struct IRecord {
    virtual IColumn& at( std::string ) = 0;
};

void main()
{
    MockRepository mocks;

    auto mockRec = mocks.Mock<IRecord>();
    auto mockCol = mocks.Mock<IColumn>();

    auto& firstCall = mocks.OnCall(mockRec, IRecord::at).With("firstName").Return(std::ref(*mockCol));
    mocks.OnCall(mockCol, IColumn::getValue).After(firstCall).Return(std::string("John"));

    auto& lastCall = mocks.OnCall(mockRec, IRecord::at).With("lastName").Return(std::ref(*mockCol));
    mocks.OnCall(mockCol, IColumn::getValue).After(lastCall).Return(std::string("Doe"));

    std::cout << mockRec->at("firstName").getValue() << " " 
              << mockRec->at("lastName").getValue() << "\n";
} 
```

我得到正确的输出。

```
John Doe 
```

我发现我几乎总是使用

```
mocks.autoExpect = false; 
```

但在这种情况下，它没有任何区别。

**编辑：**

如果您需要更大的灵活性，可以执行以下操作：

```
std::vector<IColumn*> cols;

cols.push_back( mocks.Mock<IColumn>() );
cols.push_back( mocks.Mock<IColumn>() );

mocks.OnCall(mockRec, IRecord::at).With("firstName")
     .Return(std::ref(*cols[0]));
mocks.OnCall(mockRec, IRecord::at).With("lastName")
     .Return(std::ref(*cols[1]));

mocks.OnCall(cols[0], IColumn::getValue)
     .Return(std::string("John"));
mocks.OnCall(cols[1], IColumn::getValue)
     .Return(std::string("Doe")); 
```

这将按任何调用顺序工作。或者，您也可以使用`Do`

```
std::map<std::string, IColumn*> map;

map["firstName"] = mocks.Mock<IColumn>();
map["lastName"] = mocks.Mock<IColumn>();

mocks.OnCall(mockRec, IRecord::at)
     .Do( [&map]( std::string& key){ return std::ref(*map[key]); } );

mocks.OnCall(map["firstName"], IColumn::getValue)
     .Return(std::string("John"));
mocks.OnCall(map["lastName"], IColumn::getValue)
     .Return(std::string("Doe")); 
```

# vbscript - 用于打开 .exe 文件并执行 4 个活动的 VB 脚本

> ID：15230057
> 
> 赞同：0
> 
> 时间：2013-03-05T17:15:21.450
> 
> 标签：vbscript

我有一个基于.net 的工具。我需要一个 vb 脚本来打开这个工具（.exe 文件），然后选择 3 个单选按钮，单击一个按钮以浏览存储在同一文件夹中的 xml 文件，然后单击调用按钮。这可能吗？我是一个完全新鲜的人，只是想着这个自动化的想法。这是必需的，因为我必须每天执行相同的步骤。

我可以找到这段代码：

```
CreateObject("WScript.Shell").Run("""C:\Users\abc\Desktop\folder\Tool.exe""") 
```

这是我完美打开 .exe 文件的任务。有人可以帮助/指导我完成进一步的步骤吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:36:06.203

您最好通过命令行使您的工具工作并让它接受参数。

这样，您可以使用 .bat 文件来调用您的“工具”，并传入它需要的参数，然后就可以走了。

这些应该让你开始你的追求。

*   [使用 VisualBasic.NET 创建 HelloWorld 控制台应用程序](http://voices.yahoo.com/creating-helloworld-console-application-using-visualbasicnet-344987.html?cat=59)
*   [如何解析命令行参数？](http://www.vbdotnetforums.com/console-application/5177-how-parse-command-line-parameters.html)
*   [什么是bat文件](http://pcsupport.about.com/od/fileextensions/f/batfile.htm)

# delphi - 是否有任何实现基本 IDE 结构的 Delphi 开源项目？

> ID：15230058
> 
> 赞同：1
> 
> 时间：2013-03-05T17:15:27.540
> 
> 标签：delphi, ide

我已经为 Android 和 Windows 编写了一个框架，并获得了一些工具来绘制在这两种环境中运行的表单和脚本。就像成千上万的另一种解决方案。

我现在想做的是使用 Delphi（在我的例子中是 Xe2）来编写像 Delphi 本身这样的 IDE。我可以管理项目中的源文件并拥有表格。我已经在 DevExpress 组件上有了很多。但我想知道是否有什么可以重复使用而不是再次发明轮子。

当然，对于我的特殊情况，绘图表单应该是必要的，但是它能够使用按钮、文本以及我们在大多数平台中找到的那些常见控件来绘制表单。

现在我正在使用 Balsamiq Mockup 绘制 xml 并将其导出到我的编译器以集成到框架上，这很好，因为它是一个很棒的绘图产品，但是需要集成所有 IDE 属性并且需要放置每个控件上的事件，因为 IDE 多合一解决方案更好。

[TMS Scripter](http://www.tmssoftware.com/site/scriptstudiopro.asp) -> 我找到了这个商业包，它基本上包含我需要的一切，脚本（我需要 VB，但有不同的风格，我相信它可以改变），表单设计器，项目管理等......非常确实不错。但是我想听听开源解决方案

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T18:03:18.433

拉撒路呢？我认为这是免费的，而且它肯定有一个广泛的 IDE。 [http://www.lazarus.freepascal.org/](http://www.lazarus.freepascal.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T05:37:28.963

它不是 Delphi 开源 IDE，但我认为它可以免费使用且功能丰富：
[MS Visual Studio Shell](http://msdn.microsoft.com/en-us/library/vstudio/bb685691.aspx)
[what-is-the-visual-studio-shell-standalone-shell-good-for](https://stackoverflow.com/questions/939841/what-is-the-visual-studio-shell-standalone-shell-good-for)

RemObject 将它用于那里的工具。所以它也适合德尔福。

# clojure - 无法使用原始初始化程序键入提示本地

> ID：15230061
> 
> 赞同：8
> 
> 时间：2013-03-05T17:15:35.810
> 
> 标签：clojure, type-hinting

有人可以向我解释这个错误：

```
user> (let [^int i 3] i)
CompilerException java.lang.UnsupportedOperationException: Can't type hint a local with a primitive initializer, compiling:(NO_SOURCE_PATH:1) 
```

我不明白，

*   究竟是什么我不能输入提示，为什么？

*   为什么我可以在相同的情况下使用数组类型提示？

    ```
    user> (let [^ints ii (int-array 1)] ii)
    #<int[] [I@334a123f> 
    ```

*   如何键入提示局部整数变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T05:04:15.570

[编译器从这](https://github.com/clojure/clojure/blob/653b8465845a78ef7543e0a250078eea2d56b659/src/jvm/clojure/lang/Compiler.java#L5967)一行抛出此异常。基本上，如果您使用作为原始常量的表达式或可以在编译时评估为原始常量的表达式，例如：`(+ 1 10)`，编译器可以检测对象本身的类型并且不需要类型提示。检查先前链接指向的同一类中的`getJavaClass`和方法。`hasJavaClass`这些方法检查表达式是否是原始的，然后从表达式本身获取类，否则使用类型提示（如果提供）。

# bash - 从文件中删除特定行

> ID：15230062
> 
> 赞同：1
> 
> 时间：2013-03-05T17:15:36.643
> 
> 标签：bash, shell, awk, unique

我有一个包含大量文本文件的目录（通常命名为 rt??????.MON）。每个文件包含格式的结果

```
#        HEADER INFO
#        ...
#
# --- TIME SERIES ---
#       TIME     Var1     Var 2     ...
#        [s]     [kg]     [kg]      ...
#          1       2        3       ...  
  0.0000E+00  1.0000E+00  1.0000E+00  ...
  6.4619E+00  2.0000E+00  2.0000E+00  ...
  6.4619E+00  2.5000E+00  2.5000E+00  ...
  8.9690E+00  3.0000E+00  3.0000E+00 ...
  ... 
```

我正在尝试编写一个 BASH 脚本，该脚本将读取每个文件并删除重复时间的行（这是由舍入引起的）。因此，对于上面的示例，输出将是

```
#        HEADER INFO
#        ...
#
# --- TIME SERIES ---
#       TIME     Var1     Var 2     ...
#        [s]     [kg]     [kg]      ...
#          1       2        3       ...  
  0.0000E+00  1.0000E+00  1.0000E+00  ...
  6.4619E+00  2.0000E+00  2.0000E+00  ...
  8.9690E+00  3.0000E+00  3.0000E+00 ... 
```

BASH 的新手，因此将不胜感激地收到任何指点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:42:33.293

如果相同的时间是相邻的（即在以下几行中），您可以只使用`uniq`. `uniq`有参数来指定从哪里开始与前一行进行比较，以及您必须检查多少个字符（至少是 GNU 一个）。在这种情况下，数字以固定字符开始和结束，您可以编写如下内容：

```
uniq --skip-chars=2 --check-chars=10 infile > outfile 
```

`outfile`从这组字符开始，将包含不同的行。

正如 sudo_O 评论的那样，此解决方案可能会干扰文件的标题部分。我通常更喜欢只包含数据的文件，然后添加标题，或者在使用或其他工具之前过滤文件`grep`以仅获取数据行，然后添加标题部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:53:56.400

试试这个单行：

```
awk '$1!~/^#/&&$1 in a{next;}{a[$1]}1' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:43:39.113

awk 非常适合：

```
$ awk '$1~/^[0-9].[0-9]{4}E[+-][0-9]{2}$/{if(!a[$1]++)print;next}1' file
#        HEADER INFO
#        ...
#
# --- TIME SERIES ---
#       TIME     Var1     Var 2     ...
#        [s]     [kg]     [kg]      ...
#          1       2        3       ...
  0.0000E+00  1.0000E+00  1.0000E+00  ...
  6.4619E+00  2.0000E+00  2.0000E+00  ...
  8.9690E+00  3.0000E+00  3.0000E+00 ...
  ... 
```

像这样使用严格的正则表达式比较将确保只删除您想要的重复项，`awk`并且重复时间不必像 with 那样相邻`uniq`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T19:52:05.717

您可以尝试另一个：

```
awk '/^#/ || !A[$1]++' file 
```

# magento - Magento 搜索不返回所有结果

> ID：15230063
> 
> 赞同：2
> 
> 时间：2013-03-05T17:15:41.037
> 
> 标签：magento, search

我们遇到了 Magento 搜索的问题，它只返回了它应该返回的众多结果中的一小部分。我有一个搜索词，它返回 2 个结果，但在表 catalogsearch_result 中，搜索词有 44 条记录。

我不确定在哪里可以解决这个问题。有没有其他人以前看过这个问题或知道去哪里看？

我已禁用缓存并已清除并重新索引搜索索引。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-03T17:51:07.560

我们已经确定这个问题是 Magento 中的一个错误。

如果您的产品属于多个类别，并且其中一个类别的权限设置为不向用户组显示，则该产品将不会显示在任何搜索结果中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:02:50.533

尝试更改`Search Type`管理员 -> 系统 -> 配置 -> 目录 -> 目录搜索。尝试将其更改为`Like`to`Fulltext`或反之亦然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:46:47.563

高级搜索怎么样，是否返回相同数量的结果？如果是这样，这是配置/索引/缓存问题。如果没有，您应该检查已安装的模块，以防其中一个模块劫持了搜索功能。

# javascript - 获取新谷歌地图的外部标记

> ID：15230068
> 
> 赞同：1
> 
> 时间：2013-03-05T17:16:12.807
> 
> 标签：javascript, google-maps, google-maps-api-3

我需要创建一个使用来自外部谷歌地图的标记的谷歌地图实例。更具体地说，我需要从“源地图”中获取所有标记，运行一些算法和过滤，然后将它们添加到我新创建的谷歌地图中。

我已经尝试在 Google Maps API 和论坛中搜索线索，但其中大多数是关于从当前地图获取标记，而不是从外部获取标记。

我是否需要以某种方式使用 KML 源？

提前致谢！

# node.js - Express 可以更改传入的请求并在更改后重定向到不同的方法吗？

> ID：15230072
> 
> 赞同：1
> 
> 时间：2013-03-05T17:16:29.580
> 
> 标签：node.js, express, response.redirect

我有一个 Express (v3) 应用程序，其中（在理想情况下）用户在输入字段中键入字符串，等待自动完成函数返回与字符串匹配的列表，然后从该列表中进行选择，从而添加一个“id”隐藏字段的值。当他们单击“开始”时，他们的请求将通过他们的查询路由到此端点：

```
app.get('/predict', function(req, res) {

  // req.query should be something like
  // { name: "wat", id: 123 }

  res.render('predictions');
} 
```

我想稍微改变一下这个功能，这样如果 req.query.id 为空（即用户没有等待自动完成），我不必将它们重定向回来说“请等待自动完成”。

在我看来，我想扩展上述端点来做类似的事情

```
app.get('/predict', function(req, res) {

  // req.query is { name: 'wat', id: '' }

  if(req.query.id=='') {
    // then the user didn't wait for the autocomplete, so
    // guess the id ourselves
  } else {
    // ... some code
    res.render('predictions');
  }
} 
```

在为自己猜测 ID 时，我使用的外部 API 与用于自动完成功能的 API 相同，该 API 根据查询参数返回具有置信度值的结果数组，即它认为结果是我想要的结果的可能性有多大。

现在我们来回答这个问题。我可以做这样的事情吗？

```
app.get('/predict', function(req, res) {

  // req.query is { name: 'wat', id: '' }

  if (req.query.id=='') {

    makeRequestToAPIWithQuery(req.query.name, function(err, suggestions) {

      // suggestions[0] should contain my 'best match'
      var bestMatchName = suggestions[0].name;
      var bestMatchId   = suggestions[0].id;

      // I want to redirect back to *this* endpoint, but with different query parameters
      res.redirect('/predict?name='+bestMatchName+'&id='+bestMatchId);
    }
  } else {
    // some code
    res.render('predictions');
  }
} 
```

如果 req.query.id 为空，我希望服务器向自身发出不同的请求。所以在重定向之后，req.query.id 不应该为空，并且 res 将根据需要呈现我的“预测”视图。

这可能/明智/安全吗？我错过了什么吗？

提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:23:22.407

express 路由器接受多个处理程序作为中间件。

您可以测试`id`第一个处理程序中是否存在并相应地填充您的请求对象，然后在原始处理程序中没有发生任何事情。

```
function validatePredictForm(req, res, next) {
  if(!req.query.id) {
    req.query.id = 'there goes what your want the default value to be';
    return next();
  }
  else {
    // everything looks good
    return next();
  }
}

app.get('/predict', validatePredictForm, function(req, res) {

  // req.query should be something like
  // { name: "wat", id: 123 }

  res.render('predictions');
}); 
```

# html - 内联块元素对齐问题

> ID：15230074
> 
> 赞同：0
> 
> 时间：2013-03-05T17:16:34.130
> 
> 标签：html, css, jsfiddle

[http://jsfiddle.net/z3Jue/20/](http://jsfiddle.net/z3Jue/20/)

我无法让我的所有（内联块）元素与它们的容器 div 的顶部对齐。

我已经在列表中尝试了这些项目，向左浮动（但不能居中）和许多其他随机的东西，但似乎没有任何效果。

任何帮助表示赞赏！

**CSS**

```
#buttons{
    margin: 0 auto;
    padding:0px;
    border:1px dotted black;
    height:60px;
}

 .block img{

    display:inline-block;
    *display: inline;
    zoom: 1;
    height:60px;
    width:40px;
    border:0;

 } 

.block{
    display:inline-block;
    *display: inline;
    zoom: 1;
    border:1px solid red;
    height:60px;
    width:40px;
    margin:0px;
    padding:0px;
 }

 #search {
    display:inline-block;
    *display: inline;
    zoom: 1;
    height:60px;
    width:240px;
    border:1px solid red;
    margin:0px;
    padding:0px;
 }

#searchTextForm{
    font-size:16px;
    width: 185px;
    color:#333;
    margin-top:3px;
    border:1px dotted blue;
    margin-top:15px;
 } 
```

**HTML**

```
<div id="buttons" align="center">
<div id="search" >
    <form method="get" name="tipue" action="search/results.html" target="toolbarlongTOC" title="search">
    <input type="text" id="searchTextForm" name="d" class="field" size="25" >
    </form>
</div>
<div class="block">1</div>
<div class="block">2</div>
<div class="block">3</div>
<div class="block">

    <a href="#" id="bookmarks">
        <img src="http://i.imgur.com/cbb92jF.jpg">
    </a>

    </div>
<div class="block">3</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:19:05.383

设置`.block {vertical-align: top}`。完毕。

[http://jsfiddle.net/z3Jue/22/](http://jsfiddle.net/z3Jue/22/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:21:14.013

而不是`height`你的父母`div`，你可以使用`line-height`和使用`vertical-align`子块。看这个演示：http: [//jsfiddle.net/z3Jue/25/](http://jsfiddle.net/z3Jue/25/)

# javascript - 动态 JSON 函数

> ID：15230075
> 
> 赞同：-1
> 
> 时间：2013-03-05T17:16:35.847
> 
> 标签：javascript, jquery, ajax, database, json

我正在使用 getJSON 方法通过 for 循环将我在数据库中的数据发布到 HTML 页面中。但我希望函数根据 for 循环当前所在的整数调用数据库中的不同表，如下所示：

```
for (var r = 0; r < 8; r++){
     $.getJSON("PHP-PAGE.php?jsoncallback=?", function(table+r) {
          //function stuff here
     });
} 
```

但是当我尝试这样做时，“table+r”正在标记语法错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:18:49.583

您正在**定义**一个函数，而不是调用它。在`(`和之间，`)`您必须放置*标识符*（变量名）而不是表达式。

要在此处传递数据，您需要使用比函数范围更广的变量。由于变量将要更改（并且函数被异步调用），因此您必须使用闭包来执行此操作。

```
function mkCallback(table) {
    var foo = "table" + table;
    return function () {
        // function stuff that uses foo here
        // foo from the time mkCallback was called to make this function
        //    will still be in scope
    };
}

for (var r = 0; r < 8; r++){
     $.getJSON("PHP-PAGE.php?jsoncallback=?", mkCallback(table+r));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:22:00.553

我想你可能想要的是

```
for (var r = 0; r < 8; r++){  //outer loop

     function(tablenum){  //closure function
         tablename = table+tablenum // saved reference to "table+r"
         $.getJSON("PHP-PAGE.php?jsoncallback=?", function() {
           //function stuff here, using tablename as the param
         });
     }(r)
} 
```

这会创建一个闭包来维护迭代值的值。您可以在回调函数中引用表名，这将引用相当于 table+r 的值

您原始示例的问题

1.  您将 table+r 作为您正在定义的函数的参数，而不是您正在调用的函数的参数
2.  您试图让回调引用 r。但是回调直到循环执行后才会运行，因此所有回调函数的 r 将为 8。
3.  如果您试图引用“table1”、“table2”，那么您想要“table”+r。否则，我假设您引用的`table`变量超出了您向我们展示的代码范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:22:36.580

`function(table+r) {`尝试创建一个`table+r`作为参数的函数，但`+`在变量名中无效。我认为你想要这样的东西：

```
for (var r = 0; r < 8; r++){
     $.getJSON("PHP-PAGE.php?jsoncallback=?", 
     (function(currentR){
         return function() {
               var someVariable=table+currentR; // No idea where table came from...
               //function stuff here
         }
     })(r));
} 
```

正如@Quentin 在调用回调时提到的那样，`r`它将达到其最终值，因此[有趣的closure](https://stackoverflow.com/questions/1466097/problem-with-javascript-closure)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-05T17:19:50.067

您可以直接`r`在回调中引用该变量。不确定是什么`table`- JSON 调用的返回数据？尝试以下操作：

```
for (var r = 0; r < 8; r++){
     $.getJSON("PHP-PAGE.php?jsoncallback=?", function(jsonReturnData) {
          //function stuff here
          alert(r);
     });
} 
```

# java - Scala 的 Java 侦听器接口

> ID：15230076
> 
> 赞同：1
> 
> 时间：2013-03-05T17:16:35.537
> 
> 标签：java, scala, interface

我有这种带有监听器的 Java 源代码。

```
public static class FragmentA extends ListFragment {
    OnArticleSelectedListener mListener;
    ...
    // Container Activity must implement this interface
    public interface OnArticleSelectedListener {
        public void onArticleSelected(int position);
    }
    ...
    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        try {
            mListener = (OnArticleSelectedListener) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(
                "Activity must implement OnArticleSelectedListener");
        }
    }
    ...
    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        // Send the event to the host activity
        mListener.onArticleSelected(position);
    }
} 
```

我以这种方式实现它：

```
public class MyActivity implements FragmentA.OnArticleSelectedListener {
    ...
    @Override
    public void onArticleSelected(int pos) {
        // do something
    }
} 
```

所以，现在我想把它转换成 Scala。我想，我应该使用特质。[已解决：在这堂课中，我得到了错误`onAttach`] `not found: value OnArticleSelectedListener`：

```
class FragmentA extends ListFragment {
    var mListener: OnArticleSelectedListener = null
    ...
    trait OnArticleSelectedListener {
        def onArticleSelected(position: Int)
    }
    ...
    override def onAttach(activity: Activity) {
        super.onAttach(activity)
        mListener = (OnArticleSelectedListener) activity;
    }
    ...
    override def onListItemClick(l: ListView, v: View, position: Int, id: Long) {
        // Send the event to the host activity
        mListener.onArticleSelected(position);
    }
} 
```

在活动中，我不知道如何“实现”特征。我知道关键字是“with”，但`extends ... with FragmentA.OnArticleSelectedListener`会`extends ... with OnArticleSelectedListener`显示错误`not found: type FragmentA`或`not found: type OnArticleSelectedListener`.

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:30:53.833

在 Scala 中，您可以使用`asInstanceOf[Foo]`. 在这种情况下，Scala 编译器认为您指的是一个被调用的值`OnArticleSelectedListener`但找不到它，因为它不是一个值而是一个类型。要`activity`转换为`OnArticleSelectedListener`，您可以使用以下代码：

```
activity.asInstanceOf[OnArticleSelectedListener] 
```

[但是，首选方法是使用此处](https://stackoverflow.com/questions/931463/scala-how-do-i-cast-a-variable)描述的模式匹配。如果你采用这种方法，你可以写：

```
mListener = activity match {
    case myActivity: OnArticleSelectedListener => activity
    case _ => throw new ClassCastException 
} 
```

在这种情况下我会坚持使用`asInstanceOf`，因为语义完全相同并且更简洁。

如果您将定义移到类`OnArticleSelectedListener`之外`FragmentA`，您应该能够像这样扩展它：

```
 trait OnArticleSelectedListener { def onArticleSelected(position: Int) }
 class MyActivity extends OnArticleSelectedListener {
   def onArticleSelected(position: Int) { ... }
 } 
```

# mysql - 在多个表行之间创建关系/链接

> ID：15230078
> 
> 赞同：0
> 
> 时间：2013-03-05T17:16:48.750
> 
> 标签：mysql, sql

例如，我有一个表`positions`，我想在其中创建多个表行之间的关系。如果需要“链接”在一起的行数未知，那么使用单独的表来链接 id 最有意义的是什么？

是不是最好...

*   创建一个`links`包含许多列的单独表（即：linked_id1 [...] linked_id[n]），其中linked_ids 是每行的`links.id`id，列是链接的id。逻辑是我们可以创建比我们认为需要的更多的列。

或者

*   创建一个`links`包含两列的单独表，`id`其中`linked_ids`是`linked_ids`逗号分隔的“链接”行数组`positions`。

或者

*   执行上述用 JSON 数据替换数组。

每行只能链接到一个组，这有望简化事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:31:36.757

如果每一行都可以包含在多个链接组中，那么您可以创建`LINKS`具有两个字段的表：`ID1`，`ID2`它将存储每个单独的链接。

如果每一行只能在一个链接组中，那么您可以将`GROUP_ID`字段添加到`positions`表本身。

如果以上内容不能回答您的问题，请说明您的要求。

# .net - sqlserver express连接错误无法连接到只读数据库windows starter edition

> ID：15230079
> 
> 赞同：0
> 
> 时间：2013-03-05T17:16:49.703
> 
> 标签：.net, connection, runtime-error, sql-server-express

嗨，我正在使用 Visual Studio 2010 框架 4 C# 桌面应用程序开发应用程序，sqlserver express 2008 版由于某种原因我无法安装 sqlserver management studio 我必须通过提供完整的 mdf 文件路径来使用 express 数据库。我在 app.config 中添加了连接字符串 我在 Windows 入门版中的应用程序出现以下错误

```
System.Data.SqlClient.SqlException (0x80131904): Failed to update database "C:\PROGRAM FILES\DIGIPLY\CMS\DB\DatabaseName.MDF" because the database is read-only. 
```

在开发人员计算机上运行良好，我在 windows xp 和 windows 7 中尝试过，但在 windows 7 入门版中它给出了

```
<add key="dbconnection" value="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\DB\DatabaseName.mdf;Integrated Security=True;Connect Timeout=30;User Instance=False"/> 
```

# ruby-on-rails - 卡在已采取的电子邮件的验证错误上

> ID：15230080
> 
> 赞同：0
> 
> 时间：2013-03-05T17:16:51.200
> 
> 标签：ruby-on-rails, factory-bot

我正在关注 railscast #275 测试忘记密码。我无法通过电子邮件已被采取错误。使用我按照教程进行的编码，我想收到此错误，“没有标题或文本“密码”链接的错误。相反，这是我得到的，“验证失败：电子邮件已被使用（ActiveRecord： :记录无效)"

我已经进行了搜索，无法找到解决方案。

这是password_resets_spec.rb：

```
require 'spec_helper'

describe "PasswordResets" do
  it "emails user when requesting password reset"
    user = FactoryGirl.create(:user)
    visit login_path
    click_link "password"
    fill_in "Email", :with => user.email
    click_button "Reset Password"
  end 
```

工厂.rb：

```
FactoryGirl.define do
  factory :user do
    sequence :email do |n| "test#{n}@example.com"
    end
    password "secret"
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T04:09:54.367

当我终于注意到它开始工作时，这就是我所做的。我安装了数据库清理器。然后我做了命令：

rake db:reset rake db:migrate rake db:test:prepare

之后我注意到我必须在“请求密码重置时向用户发送电子邮件”的末尾添加一个“do”。

现在我没有错误，我可以继续我的测试冒险了。感谢那些试图提供帮助的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:36:18.443

工厂定义似乎没问题。

在运行规范之前，我首先要确保您的测试数据库是空的。可能存在现有用户记录“test1@example.com”挥之不去。另外，您是否尝试仅运行该示例？它有什么不同吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:39:07.980

看起来在运行您的测试用例时，创建的工厂没有回滚/删除记录。

在示例执行之前添加一个`before(:each)`删除以前的记录

```
before(:each) do
User.delete_all
end 
```

# authentication - 使用 2 个加密字符串进行身份验证

> ID：15230088
> 
> 赞同：0
> 
> 时间：2013-03-05T17:17:12.087
> 
> 标签：authentication, cookies, encryption, redis

所以基本上我正在尝试使用cookie登录用户并且不查询数据库以提高性能

这是一个简短的想法：

1.  通过 SSL 传输所有内容
2.  设置全局密钥 A 和密钥 B
3.  在注册和密码更改时生成随机验证字符串
4.  用A加密验证字符串，存入cookie
5.  用B加密验证字符串，存入cookie
6.  当用户尝试登录时，我用 A 和 B 解密每个字符串，比较它们是否匹配

我想知道如果它是一个好主意：

我怎样才能在 Java 中使用 bouncycastle ASE-256、Digest 或其他方式进行加密？

与通过将会话变量存储在 Redis 等超快速数据库中的身份验证相比，此加密/解密过程对性能的影响有多大

如果不是：我该怎么办..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:36:48.160

当您解密验证数据是否存在于身份验证令牌（cookie）中时，您可以简单地将已知值与身份验证数据一起加密。无需使用两个键。

与数据库的速度差异取决于数据库配置以及执行的加密。我宁愿先选择一个经过验证的方案，然后再发明自己的方案，如果性能让你别无选择。

[在http://security.stackexchange.com](http://security.stackexchange.com)上更好地验证了方案。

# node.js - Grunt 中的类似 Nodemon 的任务：执行节点进程并观察

> ID：15230090
> 
> 赞同：28
> 
> 时间：2013-03-05T17:17:16.770
> 
> 标签：node.js, gruntjs, watch, spawn

我觉得我错过了什么。

这是我想要实现的目标：

有一个执行我的任务并并行`server.js`运行`watch`任务。我觉得这正是 grunt 设计的任务之一，但我无法实现这种配置。

其中，我读过这篇文章： [Running Node app through Grunt](https://stackoverflow.com/questions/15044026/running-node-app-through-grunt) but I still can't make it。

这是我的 Gruntfile.js ：

```
module.exports = function(grunt) {

  // Project configuration.
  grunt.initConfig({
    watch: {
      scripts: {
        files: ['*.js'],
        tasks: ['start'],
        options: {
          nospawn: true
        }
      }
    }
  });

  grunt.loadNpmTasks('grunt-contrib-watch');

  grunt.registerTask('start', function() {
    grunt.util.spawn({
      cmd: 'node',
      args: ['server.js']
    });
    grunt.task.run('watch');
  });

  grunt.registerTask('default', 'start');
}; 
```

我有`"grunt-contrib-watch": "~0.3.1"`哪个版本应该比`grunt-contrib-watch@0.3.0`前面提到的帖子更高。

如果您能帮助我实现正确的配置，我将不胜感激。但更一般地说，我不明白为什么没有官方`grunt-contrib-nodemon-like`包和任务，因为我觉得这将是使用 grunt 的另一个重要原因（我真的很喜欢它作为一个工具！）

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-10T07:30:15.713

### 编辑：[咕噜-nodemon](https://github.com/ChrisWren/grunt-nodemon)

自从写了这篇文章，一个好人开发了它。

* * *

我在使用 grunt.util.spawn 启动新进程时遇到了很多麻烦。他们会跑，但他们不会给我任何输出。也许您可以弄清楚我在这些文档中无法解决的问题。[http://gruntjs.com/api/grunt.util#grunt.util.spawn](http://gruntjs.com/api/grunt.util#grunt.util.spawn)

# 我看到你所拥有的两个问题：

*   我认为 grunt.registerTask() 在使用回调函数运行任务时必须接受三个参数。
*   我认为您不能`node server.js`在每次文件更改时一遍又一遍地调用。它会在第一次工作，要真正工作，您必须将服务器作为子进程进行管理，在后续文件更改时杀死并重新启动它。

对于 registerTask 参数，试试这个，看看你是否可以在你当前的实现中得到一些东西。

[http://gruntjs.com/api/grunt.task#grunt.task.registertask](http://gruntjs.com/api/grunt.task#grunt.task.registertask)

它需要`(taskName, description, taskFunction)`这样：

```
grunt.registerTask('start', 'My start task description', function() {
  grunt.util.spawn({
    cmd: 'node',
    args: ['server.js']
  });
  grunt.task.run('watch');
}); 
```

这至少可以让您在第一次文件更改时 `watch`运行。 这就是我会做的。`node server.js`

`$ nodemon server.js`要么按原样使用 nodemon

或者...

# **阅读源代码并使用[grunt-develop](https://github.com/edwardhotchkiss/grunt-develop)**

他将服务器作为子进程进行管理，这可能是您正在寻找的。

或者...

获取[grunt-shell](https://github.com/sindresorhus/grunt-shell)
`npm install grunt-shell --save-dev`

并使用它为您运行 nodemon：

```
module.exports = function(grunt) {

  // Project configuration.
  grunt.initConfig({
    serverFile: 'server.js',
    shell: {
      nodemon: {
        command: 'nodemon <%= serverFile %>',
        options: {
          stdout: true,
          stderr: true
        }
      }
    },
    watch: { /* nothing to do in watch anymore */ }
  });

  grunt.loadNpmTasks('grunt-contrib-watch');
  grunt.loadNpmTasks('grunt-shell');

  grunt.registerTask('default', 'shell:nodemon');
}; 
```

`$ grunt shell:nodemon`

我真诚地希望这会有所帮助。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-26T13:21:23.407

嗨，我也遇到了这个问题，这是我的解决方案（基于 nackjicholson 的回答）。这在[衍生进程中使用了](http://gruntjs.com/api/grunt.util#grunt.util.spawn)[grunt-nodemon](https://github.com/ChrisWren/grunt-nodemon)。所以我可以：

*   重新加载nodejs
*   注意对例如 .less 文件的更改
*   获取两个任务的输出

    ```
    grunt.loadNpmTasks('grunt-nodemon');
    grunt.initConfig({
        nodemon: {
            dev: {
                options: {
                    file: 'server.js',
                    nodeArgs: ['--debug'],
                    env: {
                        PORT: '8282'
                    }
                }
            }
        },
    });

    grunt.registerTask('server', function (target) {
        // Running nodejs in a different process and displaying output on the main console
        var nodemon = grunt.util.spawn({
             cmd: 'grunt',
             grunt: true,
             args: 'nodemon'
        });
        nodemon.stdout.pipe(process.stdout);
        nodemon.stderr.pipe(process.stderr);

        // here you can run other tasks e.g. 
        // grunt.task.run([ 'watch' ]);

    }); 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-18T22:20:08.863

# 使用 grunt 并发

问题是像 watch 和 nodemon 这样的任务永远不会终止，所以 grunt 永远不会到达它们。您需要生成一个新进程。

您可以使用 grunt-concurrent 轻松完成此操作：

[https://github.com/sindresorhus/grunt-concurrent](https://github.com/sindresorhus/grunt-concurrent)

例如：

```
module.exports = function(grunt) {
  grunt.initConfig({

    ...

    concurrent: {
      dev: {
        tasks: ['nodemon', 'watch'],
        options: {
          logConcurrentOutput: true
        }
      }
    }
  });
}; 
```

现在，两人将愉快地并肩奔跑。

# ruby-on-rails - 运行 RVM 要求，跳过 brew 更新

> ID：15230092
> 
> 赞同：1
> 
> 时间：2013-03-05T17:17:22.883
> 
> 标签：ruby-on-rails, rvm, homebrew

当我运行命令 rvm requirements 时，我得到 Skipping `brew update`。为什么在 Mac 10.8 上会发生这种情况

```
rvm requirements
Installing requirements for osx/10.8/x86_64, might require sudo password
Skipping `brew update` make sure your formulas are up to date.
Doing /usr/local/etc/openssl 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T20:11:46.103

尝试：

```
rvm install 2.0.0 --autolibs=enable 
```

您收到此消息是因为默认情况下 RVM（此时为 head）仅检测可用包（只读模式），Homebrew 开发人员要求 RVM 不会自动使用 Homebrew 安装库，我们 (RVM) 正在努力制作所有输出清洁器，因此很容易更改为适当的集成模式。您可以访问[http://bit.ly/rvm-autolibs](http://bit.ly/rvm-autolibs)以获取更多详细信息，该数字的含义以及计划中的选项。

# python - 有没有一种pythonic方法可以在可迭代中获取相同值的集群的开始和结束索引？

> ID：15230093
> 
> 赞同：2
> 
> 时间：2013-03-05T17:17:24.947
> 
> 标签：python, numpy, pandas, indexing, iterable

以下问题可以通过循环轻松解决，但我怀疑可能有一种更 Pythonic 的方式来实现这一点。

本质上，我有一个可迭代的布尔值，它们倾向于聚集成组。这是一个说明性示例：

`[True, True, True, True, False, False, False, True, True, True, True, True]`

我想为每个集群选择开始索引和结束索引`True`。使用循环，这很容易——每次我的迭代器是 a`True`时，我只需要检查我是否已经在一个`True`集群中。如果不是，我将`in_true_cluster`变量设置为 true 并存储索引。一旦我找到 a `False`，我将 index - 1 存储为终点。

有没有更蟒蛇的方式来做到这一点？请注意，我也在使用 PANDAS 和 NumPy，因此使用逻辑索引的解决方案是可以接受的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:23:58.123

实际上，这是一种 numpy 方式，它应该比使用`itertools`或手动循环更快：

```
>>> a = np.array([True, True, True, True, False, False, False, True, True, True, True, True])
>>> np.diff(a)
array([False, False, False,  True, False, False,  True, False, False,
       False, False], dtype=bool)
>>> _.nonzero()
(array([3, 6]),) 
```

正如您在评论中提到的那样，熊猫[`groupby`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.Series.groupby.html)也可以。

* * *

说服@poke 这是值得的时机：

```
>>> %%timeit a = np.random.randint(2, size=1000000)
... np.diff(a).nonzero()
...
100 loops, best of 3: 12.2 ms per loop
>>> def cluster_changes(array):
...     changes = []
...     last = None
...     for i, elt in enumerate(array):
...         if elt != last:
...             last = elt
...             changes.append(i)
...     return changes
...
>>> %%timeit a = np.random.randint(2, size=1000000)
cluster_changes(a)
...
1 loops, best of 3: 348 ms per loop 
```

与 7 行手动功能相比，使用单行的该阵列是 30 倍。（当然，这里的数据比 OP 的数据有更多的集群变化，但这并不能弥补这么大的差异。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T17:27:59.300

怎么样：

```
In [25]: l = [True, True, True, True, False, False, False, True, True, True, True, True]

In [26]: d = np.diff(np.array([False] + l + [False], dtype=np.int))

In [28]: zip(np.where(d == 1)[0], np.where(d == -1)[0] - 1)
Out[28]: [(0, 3), (7, 11)] 
```

在这里，两次运行在索引`[0; 3]`和`[7; 11]`。

# ms-access - 不显示对应的字段项

> ID：15230097
> 
> 赞同：0
> 
> 时间：2013-03-05T17:17:33.240
> 
> 标签：ms-access

我想运行一个查询，最终只显示没有相应值的项目。

例如：假设 table1 有 5 个项目，而 table2 有相同的 5 个项目，但还有另外 2 个项目。如何使查询仅显示 2 个附加项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:43:50.223

您将希望`LEFT JOIN`在表之间使用 a 来返回不在两个表中的行：

```
select table2.id
from table2 
left join table1
    on table2.id = table1.id
where table1.id is null 
```

如果您需要帮助学习`JOIN`语法，这里有一个很好的参考：

*   [SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

查看[SQL Fiddle 演示](http://sqlfiddle.com/#!3/ac1ff/1)（注意：演示是 sql server，但语法相同）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:38:01.327

```
SELECT table2.id
FROM table1 INNER JOIN table2 ON table1.id = table2.id
WHERE (((table1.id) Is Null)); 
```

# python - 通用 Python 编程 2.7 数据验证

> ID：15230099
> 
> 赞同：2
> 
> 时间：2013-03-05T17:17:47.220
> 
> 标签：python, validation

我想知道我应该为这个 def 函数使用什么函数，以便用户只能输入字符串而不是整数 -

```
def GetTextFromUser():

    TextFromUser = raw_input('Please enter the text to use: ')

    return TextFromUser 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T17:19:38.853

`raw_input()`总是返回一个字符串。但是，如果你用字符串表示只允许使用字母，那么你可以使用：`str.isalpha()`

```
S.isalpha() -> bool

Return True if all characters in S are alphabetic
and there is at least one character in S, False otherwise. 
```

例子：

```
In [9]: 'foo'.isalpha()
Out[9]: True

In [10]: 'foo23'.isalpha()
Out[10]: False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:21:12.397

根据[文档](http://docs.python.org/2/library/functions.html#raw_input)， raw_input 总是返回一个字符串。如果您从不希望它返回整数，我会尝试将其转换为整数，`int()`并在失败时捕获异常。如果它没有失败，则立即返回该值。这遵循 Pythonic 风格的“请求宽恕比请求许可更好”。

# java - 检验等式的充分方法

> ID：15230101
> 
> 赞同：0
> 
> 时间：2013-03-05T17:17:52.343
> 
> 标签：java

我想为`equals()`我拥有的一个类实现一个自定义方法，`Board`. 该方法比较每个板的数组，定义为`private int[] board`，如果数组相等则返回 true，否则返回 false。我知道在测试相等性时有一些“陷阱”，所以我想知道以下代码是否是最佳的并且足以真正测试相等性：

```
public boolean equals(Object y) {
    if (this.getClass() != y.getClass()) return false; //must be same class -- duh
    Board that = (Board) y; //y cast as Board
    int[] thisBoardCopy = this.getBoard(); //copy of current board
    int[] thatBoardCopy = that.getBoard(); //copy of y's board
    return Arrays.equals(thisBoardCopy, thatBoardCopy);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:25:41.143

`.equals`在 java 中编写方法的惯用语是这样的：

```
public boolean equals(Object y) {
    if(y == this) return true;
    if(!(y instanceof Board.class)) return false;
    final Board that = (Board) y; //y cast as Board
    return Arrays.equals(getBoard(), that.getBoard());
} 
```

如果相同，第一个测试只会加快速度`Board`，第二个测试有两个功能：

1.  它返回`false`if `y`is `null`- 这会稍微减少代码量
2.  它会检查您是否`y`属于正确的类别。

**编辑**

我不确定您在评论中所说的“复制”是什么意思，我假设您的意思是“参考”。如果您在将这些数组传递给之前复制这些数组，我建议您不要这样做，因为如果该对象找到进入 a或`equals`的方式，则可以多次调用此方法。`Map``Set`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:19:51.883

你最好这样做

```
if (!this.getClass().equals (y.getClass())) return false; 
```

否则会出现 NullPointerException in case `y`is `null`。

不，这仍然会引发 NPE。应该：

```
if (y == null || !this.getClass().equals (y.getClass())) return false; 
```

# c# - HtmlAgilityPack td.innertext 错误？

> ID：15230104
> 
> 赞同：0
> 
> 时间：2013-03-05T17:18:00.267
> 
> 标签：c#, visual-studio-2010, html-agility-pack

我正在根据我们数据库中的数据构建一些表。它来自很多国际资源，所以我遇到了编码问题，我想我已经把它们都弄清楚了。但现在我看到一些奇怪的输出，不知道为什么。

这是 VS2010 中的 C# 应用程序。在 Debug 中运行，我看到类中的字符串开始：

```
Animal and vegetable oils  1 < 5 MW <br>5-50 MW  30 <br> 
```

但是当我分配时：

```
td = htmlDoc.CreateElement("td");
td.Attributes.Add("rowspan", "5");
td.Attributes.Add("valign", "top");
td.InnerHtml = this.DRGuideNote.ToString(); 
```

td.InnerHtml 显示

```
Animal and vegetable oils  1 < 5=\"\" mw=\"\"><br>5-50 MW  30 <br> 
```

为什么将等号和转义引号放入该文本中？？？它不会对所有数据执行此操作，仅对几个文件执行此操作。有任何想法吗？（PS。没有显示的字符串中有html中断，我如何发布它忽略html？尝试了“缩进4个空格但似乎没有用？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:30:50.700

HTML Agility Pack 的 HTML 解析器将`<`视为 HTML 标记的开始字符。因此，当它解析 5 和 MW 时，它认为它在标签内，因此将它们视为标签属性。一旦遇到`<br>`迫使它关闭标签的处理，这种处理就会停止。

它在浏览器中工作的原因是浏览器通常遵循 HTML5 规范来处理无效的 HTML。该规范有很多关于如何处理无效 HTML 的规则，目的是了解意图是什么。在这种情况下，规范说后跟空格的克拉应该被视为文本。HAP 的解析器不处理这种特殊的边缘情况。所以我不会说这是一个错误，而是 HAP 的原生 HTML 解析器的限制。

HAP 的替代方案是[CsQuery](https://github.com/jamietre/csquery) ( [nuget](http://www.nuget.org/packages/CsQuery/) )，它使用完整的 HTML5 解析器（实际上与 Firefox 相同的 HTML 解析器），并且可以处理这种标记。

# java - 关于Java初学者的问题

> ID：15230112
> 
> 赞同：-5
> 
> 时间：2013-03-05T17:18:35.363
> 
> 标签：java

```
class Employee {
    public String toString() {
        reuturn getClass().getName()
          + "[name="  + name
          + ",salary"  + salary
          + ",hireDay"  + hireDay +"]";
    }  
}  

class Manager extends Employee {
    public String toString() {
         return super.toString()
           + "[bouns=" + bouns 
           + "]"; 
    }            
} 
```

****问题：*** *现在，如何打印 Manager[name=...,salary=...,hireDay=...,][bouns=...] ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:20:43.297

您将需要一个可以调用`toString`方法的类的实例：

```
Manager m = new Manager();
...

Set the value

....
System.out.println(m.toString());

// or simply

System.out.println(m);
//this will indeed equal to call m.toString 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:21:11.830

这应该适合你：

```
Manager mgr = new Manager(); 
```

像这样使用`System.out.println()`：

```
System.out.println("Contents of Manager's toString() --> " + mgr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:22:22.983

您需要为 Manager 和 Employee 设置初始化 name、salary、hireDay 和 bouns 变量的构造函数。

然后您需要创建一个 Manager 并通过构造函数或 setter 方法设置这些变量。

然后您可以简单地执行`System.out.println(manager.toString());`where manager 是您创建的 Manager 变量的名称。

# java - 如何从我的客户端使用 Web 服务？

> ID：15230114
> 
> 赞同：0
> 
> 时间：2013-03-05T17:18:36.803
> 
> 标签：java, web-services, apache, service, wsdl

我创建了 5 种不同类型的服务。A、B、C、D、E。使用 Apache 轴

从单个 java 客户端，我将调用所有这 5 个服务，并为每个服务提供 3 个参数。

我创建了客户端。像这样对吗？

```
import javax.xml.namespace.QName;
import org.apache.axis.client.Call;
import org.apache.axis.client.Service;

public class ServicesCaller 
{

    String A="";
    String B="";
    String C="";

    public void services(String start,String end,String comfort)
    {
         try 
         {
            String endpoint1="http://localhost:8080/callser/services/A1";
            String endpoint2="http://localhost:8080/callser/services/A2";
            String endpoint3="http://localhost:8080/callser/services/A3";
            String endpoint4="http://localhost:8080/callser/services/A4";
            String endpoint5="http://localhost:8080/callser/services/A5";

            Service service=new Service();

            Call call=(Call)service.createCall();

            call.setTargetEndpointAddress(new java.net.URL(endpoint1));
            call.setTargetEndpointAddress(new java.net.URL(endpoint2));
            call.setTargetEndpointAddress(new java.net.URL(endpoint3));
            call.setTargetEndpointAddress(new java.net.URL(endpoint4));
            call.setTargetEndpointAddress(new java.net.URL(endpoint5));

            call.setOperationName(new QName("http://service.com","firstReturn"));

            String ret = (String) call.invoke( new Object[] {start,end,comfort} );

         }

         catch(Exception e)
         {
             System.out.println(e);
         }
    }
} 
```

这是对的吗？当我从我的 jsp 运行时，我得到了这个异常

```
org.xml.sax.SAXException: Deserializing parameter 'arg0':  could not find deserializer for type {http://schemas.xmlsoap.org/soap/encoding/}string 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:59:08.657

首先，使用 IDE 为每个 Web 服务 WSDL 创建 subs。有了存根之后，只需调用它们的虚拟方法即可。这为您节省了很多时间和精力。

其次使用下面的代码逻辑，根据您的代码，您将无法调用所有 WS，而只能调用最后一个。

如果您没有 IDE，则下载 Net Beans 或 oracle Jdev，它们都是免费软件，如果您不能这样做，则不需要许可证，即使 WSImport 是您拥有的最佳选择。

```
public class ServicesCaller 
{

    String A="";
    String B="";
    String C="";

    public void services(String start,String end,String comfort)
    {
         try 
         {
            String endpoint1="http://localhost:8080/callser/services/A1";
            String endpoint2="http://localhost:8080/callser/services/A2";
            String endpoint3="http://localhost:8080/callser/services/A3";
            String endpoint4="http://localhost:8080/callser/services/A4";
            String endpoint5="http://localhost:8080/callser/services/A5";

            Service service=new Service();

            Call call=(Call)service.createCall();

            String ret ="";
            call.setOperationName(new QName("http://service.com","allepyReturn"));

            call.setTargetEndpointAddress(new java.net.URL(endpoint1));
            ret = (String) call.invoke( new Object[] {start,end,comfort} );

            call.setTargetEndpointAddress(new java.net.URL(endpoint2));
            ret = (String) call.invoke( new Object[] {start,end,comfort} );

            call.setTargetEndpointAddress(new java.net.URL(endpoint3));
            ret = (String) call.invoke( new Object[] {start,end,comfort} );

            call.setTargetEndpointAddress(new java.net.URL(endpoint4));
            ret = (String) call.invoke( new Object[] {start,end,comfort} );

            call.setTargetEndpointAddress(new java.net.URL(endpoint5));
            ret = (String) call.invoke( new Object[] {start,end,comfort} );

         }

         catch(Exception e)
         {
             System.out.println(e);
         }
    } 
```

# ember.js - Ember JS - linkTo 内的参考视图

> ID：15230115
> 
> 赞同：1
> 
> 时间：2013-03-05T17:18:39.887
> 
> 标签：ember.js, handlebars.js

我有一个 Ember JS 困惑。首先，我必须承认我有点像 Ember 新手，如果这很明显，我深表歉意。

我有以下模板：

```
<script type="text/x-handlebars" data-template-name="threadListItem">
    {{#linkTo show thread.receiverLogin}}
        <h4>{{thread.receiver.login}}</h4>
        <span>{{view.prettyTime}}</span>
    {{/linkTo}}
</script> 
```

基本上有一个 linkTo 助手，里面有一些元素。

奇怪的是 {{view.prettyTime}} 在 linkTo 中时不显示任何内容。

但是，如果我将 span 移到 linkTo 之外，它会发现视图变量 ok 并且可以正常工作。

无论如何可以访问linkTo中的视图对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T03:55:50.950

Christopher 是正确的，您可以通过以下方式访问 prettyTime 属性：

```
{{view.parentView.prettyTime}} 
```

由于您是 ember 新手，因此可能值得一提的是，在大多数情况下，最好避免访问视图的属性。相反，请考虑将`prettyTime`属性添加到您的控制器。控制器将是子视图的默认上下文，例如由 linkTo 助手创建的子视图，因此您只需

```
{{prettyTime}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:31:37.423

linkTo 创建自己的视图，因此您要访问的视图是视图的父视图。

```
{{view.parentView.prettyTime}} 
```

# sql - “找不到指定的模块。（MS 可视化数据库工具）”

> ID：15230117
> 
> 赞同：1
> 
> 时间：2013-03-05T17:18:43.167
> 
> 标签：sql, sql-server, sql-server-2008

我安装`SQL SERVER 2008`然后创建一个数据库。然后我创建了一个数据库图并收到以下错误：

`Specified Module cannot be Found. (MS Visual Database Tools)`

![在此处输入图像描述](../Images/f126a44ad59b660bd0c22ece2adcb59d.png)

如何解决错误以便创建数据库图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-30T11:41:31.920

您需要删除位于此文件夹中的所有文件：

```
[x64] C:\Program Files (x86)\Common Files\microsoft shared\MSDesigners8

[x86] C:\Program Files\Common Files\microsoft shared\MSDesigners8 
```

并替换为具有 sql server 且没有问题的某个服务器，或者从该 sql server 没有问题的某个位置复制。

based on：[找不到指定的模块。（MS 可视化数据库工具）](http://harshgupta71.blogspot.com/2013/02/the-specified-module-could-not-be-found.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-29T04:13:58.830

您可以通过以下步骤解决此问题：

1）删除该位置的所有文件。

```
[x64] C:\Program Files (x86)\Common Files\microsoft shared\MSDesigners8

[x86] C:\Program Files\Common Files\microsoft shared\MSDesigners8Hi 
```

2) 将以下链接复制并粘贴到浏览器中，然后下载文件。

3）提取文件并将其粘贴到以前的位置。

链接：->harggupta71.blogspot.in/2013/02/the-specified-module-could-not-be-found.html

# java - 自定义 ANT 任务：标记所需的属性/嵌套元素

> ID：15230119
> 
> 赞同：1
> 
> 时间：2013-03-05T17:18:52.010
> 
> 标签：java, ant

有没有办法为自定义 ANT 任务和类型标记必需和可选的属性/嵌套元素？

我正在考虑 Spring IOC 中的 @Required 注释之类的东西。至少对于任务而言，在实际执行任务之前验证是否已设置所有必需的属性应该相当容易。

提前致谢。

**编辑：** 我知道在 execute() 中手动验证属性并抛出 BuildExceptions 的可能性，但我认为基于注释进行自动验证会更方便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T02:48:54.847

目前 Ant 没有提供一种方法来“标记”一个属性以进行验证。您需要手动检查它们。

> 至少对于任务而言，在实际执行任务之前验证是否已设置所有必需的属性应该相当容易。

不会。在 Ant 中，可以在运行期间生成许多属性——一个任务输出一个属性，另一个任务使用它。任务以这种`<condition>`方式工作——您设置输出属性的名称，任务将设置值。

尽管某些工具/IDE 可以静态解析构建文件并在尚未设置任何属性时警告您，但它们无法仅通过检查 XML 来知道任务是否会输出属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T20:34:16.607

在您的自定义任务的 execute() 方法的主体中，您可以验证您需要的属性。您可以抛出异常以报告验证失败。[这篇文章](http://www.java2s.com/Code/Java/Ant/CreateyourownAnttask.htm)展示了一个完整的例子。

# .net - 用于匹配不同 URL 样式中的关键字的正则表达式

> ID：15230124
> 
> 赞同：1
> 
> 时间：2013-03-05T17:19:14.923
> 
> 标签：.net, regex, url, regular-language

```
http://mywebsite/index.aspx?db=DAYTON#id%3D7304%3Bpage%3D1%3Bview%3Dpages

http://mywebsite/#id%3D3D7304%3Bpage%3D1%3Bview%3Dpages 
```

上面的两个 URL 指向完全相同的位置，但样式不同。我正在尝试编写一个单行表达式，无论向其抛出哪种样式的 URL，它都会创建一个匹配项。我主要关注“mywebsite/”之后的所有内容

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:08:50.030

这是一个*沉重*的单线正则表达式：

`^http:\/\/mywebsite\/(index\.aspx\?db=[A-Z]+)?#((id%\w+(%3B)?)|(view%\w+(%3B)?)|(page%\w+(%3B)?))*$`

它将接受您的网站，其中包含可选的`index.aspx?db=`（设置为某个大写值）和您使用的 3 个变量的任意顺序`id`：`view`和`page`.

多彩的解释演示在这里：[http ://regex101.com/r/jB2jS3](http://regex101.com/r/jB2jS3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:32:12.183

首先，解码 URL 以使事情变得更容易：

```
http://mywebsite/index.aspx?db=DAYTON#id=7304;page=1;view=pages
http://mywebsite/#id=3D7304;page=1;view=pages 
```

现在您可以编写两个正则表达式来匹配每个表达式`path`并将它们与`|`运算符（[Demo](http://regexr.com?340u1)）结合起来：

```
http://mywebsite/(index.aspx\?db=(\w+)#id=(\d+);page=(\d+);view=(\w+)|#id=3D7304;page=1;view=pages) 
```

如果您的编程语言支持[命名组](http://www.regular-expressions.info/named.html)，您也可以使用它们。

* * *

请注意，如果参数顺序发生变化，上面的正则表达式将不会匹配 URL。

如果可以，我建议您使用 URL 解析器。

# login - 如何覆盖 sfDoctrineGuard 验证器以允许基于凭据登录

> ID：15230125
> 
> 赞同：0
> 
> 时间：2013-03-05T17:19:16.273
> 
> 标签：login, symfony1, symfony-1.4, sfguard

正如标题所说，我需要修改 sfDoctrineGuard 验证器以允许基于凭据登录。我有这个用户和凭据：

```
username           credential
administrator      super admin
user1              public_access
user2              
user3              public_access 
```

我还有两个应用程序：管理员和站点。因此，基于这些数据，我需要实现这一点：

*   user1 和 user3 可以登录站点应用程序，但不能登录管理员
*   user2 无法登录网站和管理员
*   管理员可以登录 admin 但不能登录站点

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T11:31:48.980

`sfGuardValidatorUser`首先，您应该将类​​复制`plugins/sfDoctrineGuardPlugin/lib/validator`到`lib/validator`并清除缓存。

比修改它的`doClean`方法来检查用户是否具有所需的权限。

```
class sfGuardValidatorUser extends sfValidatorBase
{
  // ...

  protected function doClean($values)
  {
    $username = isset($values[$this->getOption('username_field')]) ? $values[$this->getOption('username_field')] : '';
    $password = isset($values[$this->getOption('password_field')]) ? $values[$this->getOption('password_field')] : '';

    $callable = sfConfig::get('app_sf_guard_plugin_retrieve_by_username_callable');

    if ($username && $callable)
    {
      $user = call_user_func_array($callable, array($username));
    }
    elseif ($username)
    {
      $user = $this->getTable()->retrieveByUsername($username);
    }
    else
    {
      $user = false;
    }

    /** @var $user sfGuardUser */
    if ($user && $user->isAllowedToLogIn(sfConfig::get('sf_app'), $password))
    {
      return array_merge($values, array('user' => $user));
    }

    if ($this->getOption('throw_global_error'))
    {
      throw new sfValidatorError($this, 'invalid');
    }

    throw new sfValidatorErrorSchema($this, array($this->getOption('username_field') => new sfValidatorError($this, 'invalid')));
  }

  // ...
} 
```

比向类添加`isAllowedToLogIn`方法`sfGuardUser`：

```
public function isAllowedToLogIn($app, $password)
{
  if ('admin' == $app)
  {
    $hasPermission = $this->getIsSuperAdmin() || $this->hasPermission('admin');
  }
  elseif ('site' == $app)
  {
    $hasPermission = $this->hasPermission('public_access');
  }
  else
  {
    $hasPermission = true;
  }

  return $this->getIsActive() && $this->checkPassword($password) && $hasPermission;
} 
```

如果需要，修改权限检查部分。

我建议添加一个管理员组和权限，如果你不能使用该`is_super_admin`标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T08:40:46.660

您在这里混合了两件事 - 用户的身份验证和授权。

身份验证意味着您的用户可以登录网站，并且您确认这是正确的人。

授权过滤哪些内容对哪些用户可用（是否经过身份验证）。

因此，您在这里寻找的是阻止访问不应看到该`admin`应用程序的用户，而不是阻止登录。

如果您阻止登录部分（使用验证器、您自己的签名操作或其他），您只会阻止想要查看您的`admin`应用的匿名用户。当他们尝试登录时，他们将被拒绝，因为他们不是管理员。但是，如果用户登录到`site`应用程序然后去，`admin`则不需要额外的登录，并且用户将被授予访问权限（除非您设置了正确的授权）。

因此，您需要使用以下内容`security.yml`将文件添加到您的`apps/admin/config`文件夹中：

```
all:
  is_secure: true
  credentials: super_admin 
```

如果“普通”用户登录并尝试导航到`admin`应用程序，他将被拒绝访问。

# ruby-on-rails - 在rails的方法中传递参数哈希

> ID：15230126
> 
> 赞同：0
> 
> 时间：2013-03-05T17:19:16.790
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我在控制器中有以下代码

```
def show 

    client = GameAccounts::GameAccountsClient.new 

    ..

    json = client.get_accounts( ..)
    ..
    end 
```

我在 GameAccountsClient 中有以下代码

```
def get_accounts(..)
      response = query_account(CGI.escape(params[:name])
      JSON.parse(response.body)
    end 
```

我有上面的代码，但我不确定在控制器中调用 get_accounts 方法时如何传递 params[:name]。任何人都可以帮助我在 rails 中传递哈希方法吗？。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:27:03.790

如果我理解正确，您只需将其传递`params[:name]`给您的模型方法。

```
def show
  client = GameAccounts::GameAccountsClient.new
  json = client.get_accounts(params[:name])
end

def get_accounts(name)
  response = query_account(CGI.escape(name)
  JSON.parse(response.body)
end 
```

# actionscript-3 - 如何检测 AS3 中的可选静态文本字段？

> ID：15230129
> 
> 赞同：2
> 
> 时间：2013-03-05T17:19:25.983
> 
> 标签：actionscript-3

我的 Flash 项目中有可选的静态文本字段，我需要将它们检测为`MOUSE_MOVE`事件的目标。我知道检测`StaticText`类可能很困难，但如果静态文本字段是`selectable`，它就会变成`TextField`类。动态文本，也是 TextField 类，很容易检测到，但是当涉及到可选择的静态文本时，我无法正常工作。当我尝试跟踪事件时，如果我将鼠标悬停在可选择的静态文本字段上，它不会跟踪任何内容（如果它是动态文本字段，我会得到 [object TextField]）`event.target`。`MOUSE_MOVE`为什么同一个类的动态文本和可选静态文本的行为如此不同？以及如何检测可选择的静态文本`MOUSE_MOVE`或`MOUSE_OVER`事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:21:00.483

为什么不能动态设置？静态和动态都扩展了 TextField。但是属性设置不同。在这种情况下，动态文本将 mouseEnabled 设置为 true，而静态文本将其设置为 false。并且一般不听mouseEvents。

[编辑：您可以在动态 TextField -> htmlText](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#htmlText)中键入 html 文本

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T18:19:35.050

正如您在 StaticText 类的参考中看到的那样：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/StaticText.html#eventSummary](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/StaticText.html#eventSummary)它不调度任何`MouseEvent`事件，因此它无法监听`MOUSE_MOVE`静态文本字段上的事件。您可以做的是遵循您上次提出此问题时提出的建议之一：[如何在 AS3 中检测 StaticText？](https://stackoverflow.com/questions/15226432/how-can-i-detect-statictext-in-as3)

# symfony - Elastica 搜索添加第二个过滤器

> ID：15230131
> 
> 赞同：1
> 
> 时间：2013-03-05T17:19:30.197
> 
> 标签：symfony, elasticsearch, elastica

我开始在我的 Symfony 应用程序中使用 Elastica，但我坚持要添加一个过滤器。以下代码运行良好，它按名称、段塞、聚集进行搜索，然后添加 geoloc 过滤器。我想添加一个“专业”过滤器来删除所有与该过滤器不对应/具有该专业的结果，但我不知道该怎么做。

```
 $nameQuery = new \Elastica_Query_Text();
        $nameQuery->setFieldQuery('name', $name);

        $slugQuery = new \Elastica_Query_Text();
        $slugQuery->setFieldQuery('slug', $name);

        $agglomerationQuery = new \Elastica_Query_Text();
        $agglomerationQuery->setFieldQuery('agglomeration', $agglomeration);

        $boolQuery = new \Elastica_Query_Bool();
        $boolQuery->addShould($nameQuery);
        $boolQuery->addShould($slugQuery);
        $boolQuery->addShould($agglomerationQuery);

        //todo add filter by speciality

        if($latitude != null) {                
            $geoFilter = new \Elastica_Filter_GeoDistance('location', $latitude, $longitude, '3km');
            $boolQuery = new \Elastica_Query_Filtered($boolQuery, $geoFilter);
        }
        return $this->find($boolQuery); 
```

# javascript - 如果未加载，则加载 jQuery - 失败的方法

> ID：15230132
> 
> 赞同：1
> 
> 时间：2013-03-05T17:19:34.530
> 
> 标签：javascript, jquery, html

这就是我所拥有的：

```
<script src="myscript.js" type="text/javascript"></script>
<script type="text/javascript">testfunction("hello");</script> 
```

在 myscript.js 中：

```
if(!window.jQuery)
{
  var script = document.createElement('script');
  script.type = "text/javascript";
  script.src = 'jquery-1.9.0.min.js';
  document.getElementsByTagName('head')[0].appendChild(script);
}

function testfunction(str) {
    $(document).ready(function () {
      alert(str);
    });
} 
```

当然，当前的 testfunction 不需要 jQuery，但它会是必需的。*使用这种方法，当调用 testfunction() ( Uncaught ReferenceError: $ is not defined* )时，jQuery 被下载但没有加载到浏览器中。

我可以做的是在加载我的 JS 之前在不同的脚本中加载 jQuery。在这种情况下，它会起作用，但我会拥有三个不同的脚本，老实说，这似乎并不优雅。

有没有其他方法可以实现这一目标？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:25:41.990

您可能想尝试查看此[答案](https://stackoverflow.com/a/5577954/2121319)。它可能不会等到 jQuery 完全加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:46:03.963

使用您的代码，脚本将异步加载。您需要在脚本标记中添加一个 onload 事件，该事件将触发依赖于 jQuery 的部分。

如果您希望以同步方式加载脚本，请使用`document.write`：

```
window.jQuery||document.write(unescape("%3Cscript src='"+jQueryURL+"' type='text/javascript'%3E%3C/script%3E")); 
```

该`document.write`技术非常常见，请记住在文档加载后您不能使用它（否则它将覆盖整个页面）。

如果您想在更大范围内使用动态加载，请查看现有的加载程序或 AMD 库。

# ruby-on-rails - 获取 prepend_view_path "app/views/ 当前命名空间

> ID：15230133
> 
> 赞同：0
> 
> 时间：2013-03-05T17:19:35.940
> 
> 标签：ruby-on-rails, namespaces

在我的 ApplicationController 我有这个：

```
def prepend_view_paths
      prepend_view_path "app/views/#{request.subdomain}_subdomain" if request.subdomain.present?
    end 
```

我想要这样的东西：

```
def prepend_view_paths
      prepend_view_path "app/views/#{current namespace }_namespace" if there is a current namespace
    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:00:37.637

所以一个更好的解决方案就是让你的局部路径更加明确。因此，在我的示例中，在我的应用程序布局文件中，我更改了部分路径：

```
<%= render "menu" %> 
```

对此：

```
<%= render "account/base/menu" %> 
```

这是有效的，因为 rails 在常规位置查找部分，但找不到它并引发错误。在将部分放入 HTML 时准确指定可以找到部分的位置可以解决 Rails 或任何宝石不知道您的部分在哪里的问题。

# c# - 使用 Facebook C# 登录

> ID：15230134
> 
> 赞同：0
> 
> 时间：2013-03-05T17:19:35.770
> 
> 标签：c#, javascript, asp.net, facebook, facebook-javascript-sdk

当我尝试在我的网站上使用 facebook 登录时，我有一个无限循环的刷新，我
在 body 标签之后声明了一个脚本

```
 <script>
                window.fbAsyncInit = function () {
                    FB.init({
                        appId: '337323336385***', // App ID
                        status: true, // check login status
                        cookie: true, // enable cookies to allow the server to access the session
                        xfbml: true  // parse XFBML
                    });

                    // Additional initialization code here
                    FB.Event.subscribe('auth.authResponseChange', function (response) {
                        if (response.status === 'connected') {
                            // the user is logged in and has authenticated your
                            // app, and response.authResponse supplies
                            // the user's ID, a valid access token, a signed
                            // request, and the time the access token 
                            // and signed request each expire
                            var uid = response.authResponse.userID;
                            var accessToken = response.authResponse.accessToken;

                            // TODO: Handle the access token
                            //alert("check");
                            // Do a post to the server to finish the logon
                            // This is a form post since we don't want to use AJAX
                            var form = document.createElement("form");
                            form.setAttribute("method", 'post');
                            form.setAttribute("action", '/FacebookLogin.ashx');

                            var field = document.createElement("input");
                            field.setAttribute("type", "hidden");
                            field.setAttribute("name", 'accessToken');
                            field.setAttribute("value", accessToken);
                            form.appendChild(field);

                            document.body.appendChild(form);
                            form.submit();
                        } else if (response.status === 'not_authorized') {
                            // the user is logged in to Facebook, 
                            // but has not authenticated your app
                            //alert("Please ");
                        } else {
                            // the user isn't logged in to Facebook.
                            //alert("jj");
                            alert("Please Sign into your account to access the site");
                        }
                    });
                };

                // Load the SDK Asynchronously
                (function (d) {
                    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
                    if (d.getElementById(id)) { return; }
                    js = d.createElement('script'); js.id = id; js.async = true;
                    js.src = "//connect.facebook.net/en_US/all.js";
                    ref.parentNode.insertBefore(js, ref);
                }(document));
            </script> 
```

如您所见，此函数正在调用 FacebookLogin.ashx 文件中的 C# 函数，此函数负责创建包含用户数据的 Session 变量

```
 public void ProcessRequest(HttpContext context)
 {

  var accessToken = context.Request["accessToken"];
  context.Session["AccessToken"] = accessToken;

  HttpCookie cookie = new HttpCookie("FB");

  string accessToken2 = context.Session["AccessToken"].ToString();
  Facebook.FacebookClient client = new Facebook.FacebookClient(accessToken2);
  dynamic result = client.Get("me", new { fields = "name,id,link,gender" });

  cookie["FBID"] = result.id;
  context.Response.Cookies.Add(cookie);

  context.Response.Redirect("/login.aspx");
} 
```

之后在页面加载中我检查这个会话变量的存在

```
 string accessToken;
                FacebookClient client;
                dynamic result;
                if (Session["AccessToken"] != null)
                {
                    accessToken = Session["AccessToken"].ToString();
                    client = new FacebookClient(accessToken);
                    result = client.Get("me", new { fields = "name,id,link,gender" });

                    if (gb.CheckExistanceByFBID(result.id))
                    {
                        string FBID = result.id;
                        var userDetails = context.Users.Where(x => x.FBID == FBID).Select(x => x).First();

                        HttpCookie cookie = new HttpCookie("userData", userDetails.UserName);
                        cookie.Expires = DateTime.Now.AddMonths(2);

                        cookie["UserName"] = userDetails.UserName;
                        cookie["UserID"] = userDetails.UserID.ToString();
                        cookie["Password"] = userDetails.Password;
                        cookie["isAdmin"] = userDetails.Admin.ToString();
                        cookie["Name"] = userDetails.DisplayName;
                        cookie["FBID"] = userDetails.FBID;
                        Response.Cookies.Add(cookie);
                        System.Web.Security.FormsAuthentication.SetAuthCookie(userDetails.UserName, true);
                        System.Web.Security.FormsAuthentication.Timeout.Add(new TimeSpan(40, 0, 0, 0));
                        Response.Redirect("/Default.aspx");
                    }
                    else
                    {
                        //var accessToken = Session["AccessToken"].ToString();
                        //var client = new FacebookClient(accessToken);
                        //dynamic result = client.Get("me", new { fields = "name,id,link,gender" });

                        accessToken = Session["AccessToken"].ToString();
                        client = new FacebookClient(accessToken);
                        result = client.Get("me", new { fields = "name,id,link,gender" });

                        FBRegisterPanel.Visible = false;
                        MainRegisterPanel.Visible = true;
                        txtUserName.Text = result.name;
                    }
                } 
```

单击 facebook 登录按钮后出现无限循环刷新的问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T10:47:31.353

我有同样的问题。

当 login.aspx 加载时，JS 被执行，将表单发布到 FacebookLogin.ashx，FacebookLogin.ashx 重定向到 login.aspx，这意味着 JS 再次运行，循环继续。

（希望）通过执行以下操作，如果存储了 OAuth 令牌，则 if 语句为 false，因此永远不会执行将表单提交到 FacebookLogin.ashx 的脚本。

```
FB.Event.subscribe('auth.authResponseChange', function (response) {
    if (response.status === 'connected' && "<%= Session["AccessToken"].ToString() %>" == "") { ... } 
```

注意：确保 Session["AccessToken"] 包含一个空字符串，即使没有要存储的访问令牌，因为：

*   JS 在 Session["AccessToken"] 中寻找一个空字符串以使 if 语句为真。
*   如果留空，我认为 <%= Session["AccessToken"].ToString() %> 将抛出空引用异常。

您可以通过在 Page_Init 上执行此操作来做到这一点：

```
if (Session["AccessToken"] == null)
{
   Session["AccessToken"] = string.Empty;
} 
```

# javascript - 在弹出窗口中隐藏栏地址（ chrome ）

> ID：15230137
> 
> 赞同：19
> 
> 时间：2013-03-05T17:19:40.483
> 
> 标签：javascript, popup

我正在寻找这个，但我没有找到解决方案。

我正在使用以下方法打开一个弹出窗口：

```
window.open(url, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=yes, copyhistory=no, width=w, height=h, top=top, left=left'); 
```

一切都很好，但它不起作用，至少在 chrome 中，我需要它工作。我找到了**location=no**之类的解决方案（但它不起作用）并使用 jquery-ui 或其他库......但我需要纯 javascript......

有人知道吗？

**编辑**

在此之后，我需要隐藏最大化和最小化的按钮。提前感谢您的帮助。

**编辑 2**

那么最小化和最大化按钮呢？可以在弹出窗口中删除它们吗？

非常感谢，丹尼尔

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-05T17:21:49.387

大多数浏览器不再允许您隐藏页面地址。这是出于安全原因，否则网络钓鱼站点可能会放在您面前而您根本不知道。

# javascript - 函数中的 image.onload - 为什么它不起作用？

> ID：15230138
> 
> 赞同：1
> 
> 时间：2013-03-05T17:19:49.467
> 
> 标签：javascript, image, onload

我是使用 JS 的新手。我想将有关对象的所有信息保存在一个地方。所以我做了这个功能：

```
function Obiekt(img) {
this.img = img;
this.ready = false;
this.image = new Image();
this.image.src = this.img;
this.image.onload = function() {
    ready = true;
};
this.x = 0;
this.y = 0;
this.rotation = 0;
} 
```

然后我制作了我的对象，命名为 hero。

```
var hero = new Obiekt("images/hero.png"); 
```

问题是， hero.ready 总是错误的，我不能画这个。

```
if (hero.ready) {
     ctx.drawImage(hero.image, 0, 0);
} 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:20:41.200

两个问题：

*   `ready`找不到
*   如果您的图像被缓存（取决于浏览器），则您使用的顺序无法正常工作，因为在您设置回调后不会加载图像。

这是一个解决方案：

```
var _this = this;
this.image.onload = function() {
    _this.ready = true;
};
this.image.src = this.img; 
```

（我要补充一点，命名不是很好：我更`imgsrc`喜欢`img`）

# c++ - Stringstream 将值读入 double 失败？

> ID：15230144
> 
> 赞同：0
> 
> 时间：2013-03-05T17:20:00.960
> 
> 标签：c++, stringstream

**新问题**

`boost::tokenizer<> token(line);`标记小数点！我怎样才能阻止这种情况发生？

**下面以前的问题现在已经解决了。**

我正在尝试将字符串流中的值抓取到双精度向量中。

```
std::ifstream filestream;
filestream.open("data.data");
if(filestream.is_open()){
    filestream.seekg(0, std::ios::beg);

    std::string line;
    std::vector<double> particle_state;
    particle_state.resize(6);
    while(filestream >> line){

        boost::tokenizer<> token(line);

        int i = -1;
        for(boost::tokenizer<>::iterator it=token.begin(); it!=token.end(); ++it){
            std::cout << *it << std::endl; // This prints the correct values from the file.

            if(i == -1){
                // Ommitted code
            }

            else{
                std::stringstream ss(*it);
                ss >> particle_state.at(i); // Offending code here?
            }
            i ++;
        }
        turbovector3 iPos(particle_state.at(0), particle_state.at(1), particle_state.at(2));
        turbovector3 iVel(particle_state.at(3), particle_state.at(4), particle_state.at(5));
        // AT THIS POINT: cout produces "(0,0,0)"
        std::cout << "ADDING: P=" << iPos << " V=" << iVel << std::endl;

    }

    filestream.close();
} 
```

输入文件内容：

```
electron(0,0,0,0,0,0);
proton(1,0,0,0,0,0);
proton(0,1,0,0,0,0); 
```

有关 turbovector3 的更多信息：

`turbovector3`是一个数学向量类。（重要的是它可以工作 - 本质上它是一个包含 3 个项目的向量。它使用带有三个双精度的构造函数进行初始化。）

提前感谢您的帮助！

**编辑**代码修改：

```
std::stringstream ss(*it);
if(ss.fail()){
  std::cout << "FAIL!!!" << std::endl; // never happens
}
else{
  std::cout << ss.str() << std::endl; // correct value pops out
}
double me;
ss >> me;
std::cout << "double:" << me << std::endl; // correct value pops out again
particle_state.at(i) = me; // This doesn't work - why? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:32:21.107

您是否`i`在省略的代码中增加？如果不是，您的`else`子句永远不会被调用。尝试输出`stringstream`缓冲区内容：

```
 std::cerr << ss.str(); 
```

还要检查读取是否`ss`实际失败：

```
 if (ss.fail())
      std::cerr << "Error reading from string stream\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:05:27.083

解决方案！我侥幸找到了这个网站：[链接](http://comments.gmane.org/gmane.comp.lib.boost.devel/58386)

解决方案是将标记器更改为：

```
boost::char_delimiters_separator<char> sep(false,"(),;");
boost::tokenizer<> token(line,sep); 
```

现在它起作用了！

# db2 - IBM DB2 SQL PL 中“set”和“select into”之间的差异

> ID：15230146
> 
> 赞同：2
> 
> 时间：2013-03-05T17:20:01.663
> 
> 标签：db2, sql-pl

在 SQL PL 中开发时，'set' 和 'select into' 有什么区别？

```
set var = (select count(1) from emp);

select count(1) into var from emp; 
```

它们完全等效吗？我在哪里可以找到关于它们的文档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-22T11:51:34.233

发出选择时，它不返回任何值：

*   选择进入抛出异常
*   set 得到一个空值

您可以检查这两个存储过程的区别：

使用集合：

```
create or replace procedure test1 (
in name varchar(128)
)
begin
 declare val varchar(128);

 set val = (select schemaname
   from syscat.schemata where schemaname = name);
end @ 
```

使用选择进入

```
create or replace procedure test2 (
in name varchar(128)
)
begin
 declare val varchar(128);

 select schemaname into val
   from syscat.schemata where schemaname = name;
end @ 
```

调用集

```
$ db2 "call test1('nada')"

  Return Status = 0 
```

调用 select into

```
$ db2 "call test2('nada')"

  Return Status = 0

SQL0100W  No row was found for FETCH, UPDATE or DELETE; or the result of a 
query is an empty table.  SQLSTATE=02000 
```

这是两者的区别。使用 select into 时，您必须处理处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:52:30.020

They are, to the best of my knowledge

In some cases, you would do one technique over the other ..

eg. You cannot use WITH UR in SET

SET var1=(selct....from t with ur)

but can do

```
select a into var1 from t with ur 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-05T22:11:38.180

声明的`SELECT INTO`作品`SELECT`。

您可以直接分配函数的结果、`SET`进行计算或分配不同的变量。例如

```
SET var = var + 1;
SET var1 = var; 
```

# couchbase - Couchbase 视图的本地测试

> ID：15230147
> 
> 赞同：2
> 
> 时间：2013-03-05T17:20:05.670
> 
> 标签：couchbase, couchbase-view

我正在开发 Couchbase 视图并且使用控制台受到限制，因为输出行被截断并且不显示 JavaScript 错误。有没有一种方便的方法可以使用 Node.js 之类的引擎在本地测试视图？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:02:24.423

那么沙发节点呢？

[https://github.com/couchbase/couchnode](https://github.com/couchbase/couchnode) [https://github.com/couchbase/couchnode/blob/master/tests/08-views.js](https://github.com/couchbase/couchnode/blob/master/tests/08-views.js)

此外，由于基本上视图查询是 HTTP 请求，您可以使用任何 Web/HTTP/REST 客户端或库进行调试。但显然官方 SDK 似乎是更方便的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-02T01:31:37.573

还，

如果您在 nodejs SDK 中使用 couchbase mock() 函数，当您进行单元测试时，会显示视图中的错误和 console.log()。

# node.js - Docpad 重定向到没有 cleanurl 插件的干净 url

> ID：15230151
> 
> 赞同：0
> 
> 时间：2013-03-05T17:20:32.470
> 
> 标签：node.js, clean-urls, docpad

当我运行`docpad run`时，docpad 服务器将链接重定向到带有`.html`干净 url 扩展名的文件。此时，我没有安装 cleanurls 插件，但我在开发过程的早期使用它。

例如`localhost:9778/de.html`重定向到`localhost:9778/de`返回“未找到”。

我正在处理的 repo 是[odl.docpad](http://github.com/fwd-io/odl.docpad)。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:50:36.620

也许当你使用 cleanurls 插件时，你做了一个静态环境生成/运行？在这种情况下，您将在输出目录中放置许多别名 html 文件。如果是这种情况，运行`docpad clean`或然后执行另一个生成/运行应该可以解决问题。`rm -Rf out`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:25:50.747

问题自己解决了。我完全不知道这是否只是一些随机的怪癖，或者我是否更改了一些修复它的东西。无论如何感谢您的帮助。

编辑：显然问题是浏览器缓存 301 重定向（感谢超立方体指出它）。更多信息在这里：[http](http://www.electrictoolbox.com/google-chrome-clear-301-redirect/) ://www.electrictoolbox.com/google-chrome-clear-301-redirect/ 。

# mysql - mySQL 数据库中的图像

> ID：15230158
> 
> 赞同：0
> 
> 时间：2013-03-05T17:20:46.987
> 
> 标签：mysql, storage

我正在为我兄弟的网络漫画制作一个网站，该网站以前托管在 Tumblr 上。存储图片的最有效/合乎逻辑的选项是什么？

1.  下载并将路径放入 Db
2.  将它们存储在数据库中，base64 编码
3.  直接链接到 Tumblr 上的图片

做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:28:16.977

如果 tumblr 网站要保持活跃，我会倾向于使用 Tumblr API 来获取照片。然后，您可以编写一些 javascript/jquery 函数来显示您想要的图像。

过去我在 Google Picasa 相册中做过类似的事情，而且效果很好。

[http://www.tumblr.com/docs/en/api/v2#photo-posts](http://www.tumblr.com/docs/en/api/v2#photo-posts)

只是一些额外的信息，在过去我发现使用 jquery 插件有时会使获取我正在寻找的数据变得更加简单。从来没有特别使用过这个，只是快速搜索了一下，发现这是一个可能有用的例子。

[https://github.com/Iaaan/jQuery-plugin-for-Tumblr-API](https://github.com/Iaaan/jQuery-plugin-for-Tumblr-API)

# python - 如何基于 ylim 缩放颜色条

> ID：15230159
> 
> 赞同：3
> 
> 时间：2013-03-05T17:20:48.173
> 
> 标签：python, matplotlib, range

我正在使用 matplotlib 的 specgram 函数绘制我的数据的频谱图。

```
Pxx, freqs, bins= mlab.specgram(my_data,NFFT=nFFT,Fs=Fs,detrend=mlab.detrend_linear,noverlap=n_overlap,pad_to=p_to,scale_by_freq=True) 
```

对于 ref，上面的“freqs”、“bins”（即次）和“Pxx”的形状分别为 (1025,)、(45510,) 和 (1025,45510)。

其中，我已经定义了函数参数

```
Fs = 10E6      # Sampling Rate
w_length= 256      # window length
nFFT=2 * w_length
n_overlap=np.fix(w_length/2)
p_to = 8 *w_length 
```

该图的频率范围（y 轴）为 0 到 5E6 Hz。当我绘制它时，我有兴趣查看不同的频率范围，例如 100E3 Hz 到 1E6。如果我更改绘图的 ylim，颜色条限制不会改变，即不会更新以反映这个“新”频率范围内的信号值。有没有办法可以做到这一点，以便通过更改绘制的 y 轴范围，即频率范围限制，颜色条将相应地更新/更改？

```
interp='nearest'
cmap=seismic
fig = plt.figure()
ax1=fig.add_subplot(111)
img1=ax1.imshow(Pxx, interpolation=interp, aspect='auto',extent=extent,cmap=cmap)
ax1.autoscale(enable=True,axis='x',tight=True)
ax1.autoscale(enable=True,axis='y',tight=True)
ax1.set_autoscaley_on(False)
ax1.set_ylim([100E3,1E6])
fig.colorbar(img1)
plt.show() 
```

我想，如果我能以某种方式找到 Pxx 的最大值和最小值分别在感兴趣的频率范围内的上限和下限，我可以使用这些值来设置颜色条限制，例如

```
img1.set_clim(min_val, max_val) 
```

我通常可以找到 Pxx 的最大值和最小值，并使用返回它们的索引

```
import numpy as np
>>> np.unravel_index(Pxx.argmax(),Pxx.shape)
(20, 31805)
>>> np.unravel_index(Pxx.argmin(),Pxx.shape)
(1024, 31347) 
```

如何找到与感兴趣的频率范围相对应的 Pxx 值？

我可以做类似下面的事情来粗略地找到例如在“freqs”100E3 和 1E6 中的位置。使用（并从每个中获取第一个（或最后一个）值）...

```
 fmin_index= [i for i,x in enumerate(freqs) if x >= 100E3][0]
   fmax_index= [i for i,x in enumerate(freqs) if x >= 1000E3][0] 
```

或者

```
 fmin_index= [i for i,x in enumerate(freqs) if x <= 100E3][-1]
   fmax_index= [i for i,x in enumerate(freqs) if x <= 1000E3][-1] 
```

那么可能

```
min_val = np.min(Pxx[fmin_index,:])
max_val = np.min(Pxx[fmax_index,:]) 
```

最后

```
img1.set_clim(min_val, max_val) 
```

不幸的是，这似乎不起作用，因为颜色栏上的值范围看起来不正确。必须有更好/更容易/更准确的方法来完成上述操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:04:07.503

与其更改图表中的限制，一个可能的解决方案是更改您绘制的数据并让其`colorbar`完成。环境中的最小工作示例`pylab`：

```
#some random data
my_data = np.random.random(2048)

#### Your Code
Fs = 10E6      # Sampling Rate
w_length= 256      # window length
nFFT=2 * w_length
n_overlap=np.fix(w_length/2)
p_to = 8 *w_length

Pxx, freqs, bins= mlab.specgram(my_data,NFFT=nFFT,Fs=Fs,
                                detrend=mlab.detrend_linear,
                                noverlap=n_overlap,
                                pad_to=p_to,scale_by_freq=True)

#find a maximum frequency index
maxfreq = 1E5 #replace by your maximum freq
if maxfreq:
    lastfreq = freqs.searchsorted(maxfreq)
    if lastfreq > len(freqs):
        lastfreq = len(freqs)-1

Pxx = np.flipud(Pxx) #flipping image in the y-axis

interp='nearest'
seismic = plt.get_cmap('seismic')
cmap=seismic
fig = plt.figure()
ax1=fig.add_subplot(111)
extent = 0,4,freqs[0],freqs[lastfreq] # new extent
#plot reduced range
img1=ax1.imshow(Pxx[-lastfreq:], interpolation=interp, aspect='auto',
                extent=extent ,cmap=cmap)
ax1.set_autoscaley_on(False)
fig.colorbar(img1)
plt.show() 
```

我的示例只设置了一个最大频率，但通过一些小的调整，您可以设置一个最小值。

# javascript - JSON 数组中的动态复选框

> ID：15230175
> 
> 赞同：4
> 
> 时间：2013-03-05T17:21:56.557
> 
> 标签：javascript, jquery

我是 JavaScript / JQuery 的新手，我不确定我该怎么做。也许每个部分的一个小例子会有所帮助。

说我有`<div id="checkboxes"></div>`

当页面加载时，我将进行一个将返回 JSON 数组的 ajax 调用。这个我知道该怎么做。

对象将如下所示：

```
[
  {
    name: "Item 1",
    id: "27",
    checked: "true"
  }
  ...
] 
```

我需要以某种方式获取该 JSON 响应并将一些复选框注入到该 div 中，该 div 也将存储 ID。复选框文本将是“名称”。

然后，我需要知道如何在选中任何这些复选框时附加一个函数，此时我需要获取“id”，因为当任何选中的更改发生时我将进行 ajax 调用。

任何使用 JQuery 做这类事情的例子都会非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T17:27:17.940

第 1 部分（创建框）：

```
$.each(json, function () {
    $("#checkboxes").append($("<label>").text(this.name).prepend(
        $("<input>").attr('type', 'checkbox').val(this.id)
           .prop('checked', this.checked)
    ));
}); 
```

第 2 部分（动态获取 ID）：

```
$("#checkboxes").on('change', '[type=checkbox]', function () {
   //this is now the checkbox; this.value is the id.
}); 
```

[http://jsfiddle.net/g2zaR/](http://jsfiddle.net/g2zaR/)

# redirect - 如何设置代理服务器以根据请求的域重定向请求

> ID：15230177
> 
> 赞同：0
> 
> 时间：2013-03-05T17:22:01.030
> 
> 标签：redirect, proxy, squid

我需要设置一个代理服务器，以便“真实”服务器只接收来自代理的请求，而没有其他人。

基本上，是这样的：

1.  client1 请求 someServer1.myproxy.tld
2.  myproxy.tld 转发和维护通信来回转发到 someServer1.tld

    ```
    Client1    Client2    Client3

       \          |          /
        \         |         /
         \        |        /

            ---------------
            | myproxy.tld |
            ---------------

         /        |        \
        /         |         \
       /          |          \
    Server1    Server2     Server3 
    ```

鱿鱼有可能吗？如果是，有人可以指出我正确的方向吗？如果不是，哪种工具最适合？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:20:32.397

是的，这是可能的。您需要 cache_peer 和 cache_peer_access 指令。

看看[这个链接](http://wiki.squid-cache.org/ConfigExamples/Reverse/MultipleWebservers)

# matlab - 如何获取 numpy 数组的线性索引（sub2ind）

> ID：15230179
> 
> 赞同：18
> 
> 时间：2013-03-05T17:22:05.537
> 
> 标签：matlab, numpy

Matlab 提供了[`sub2ind`](http://www.mathworks.de/de/help/matlab/ref/sub2ind.html)“将线性索引等价物返回到行和列下标......对于矩阵......”的功能。

我需要这个`sub2ind`函数或类似的东西，但我没有找到任何类似的 Python 或 Numpy 函数。我怎样才能获得这个功能？

这是[matlab 文档](http://www.mathworks.de/de/help/matlab/ref/sub2ind.html#sub2ind_example1)中的一个示例（与上述相同的页面）：

```
Example 1

This example converts the subscripts (2, 1, 2) for three-dimensional array A 
to a single linear index. Start by creating a 3-by-4-by-2 array A:

rng(0,'twister');   % Initialize random number generator.
A = rand(3, 4, 2)

A(:,:,1) =
    0.8147    0.9134    0.2785    0.9649
    0.9058    0.6324    0.5469    0.1576
    0.1270    0.0975    0.9575    0.9706
A(:,:,2) =
    0.9572    0.1419    0.7922    0.0357
    0.4854    0.4218    0.9595    0.8491
    0.8003    0.9157    0.6557    0.9340

Find the linear index corresponding to (2, 1, 2):

linearInd = sub2ind(size(A), 2, 1, 2)
linearInd =
    14
Make sure that these agree:

A(2, 1, 2)            A(14)
ans =                 and =
     0.4854               0.4854 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-05T17:52:08.457

我想你想用[`np.ravel_multi_index`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ravel_multi_index.html). 使用 numpy 的基于零的索引，并考虑到 matlab 数组是 Fortran 风格，相当于您的 matlab 示例是：

```
>>> np.ravel_multi_index((1, 0, 1), dims=(3, 4, 2), order='F')
13 
```

为了让您了解发生了什么，您可以使用索引的点积和数组的步幅获得相同的结果：

```
>>> a = np.random.rand(3, 4, 2)
>>> np.dot((1, 0, 1), a.strides) / a.itemsize
9.0
>>> np.ravel_multi_index((1, 0, 1), dims=(3, 4, 2), order='C')
9
>>> a[1, 0, 1]
0.26735433071594039
>>> a.ravel()[9]
0.26735433071594039 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T17:22:05.537

这就是我为我解决问题的方法，重写为类似于上面给出的示例。

`arange`主要思想是使用和创建一个具有索引的辅助数组`reshape`。

```
In [1]: import numpy as np

In [2]: A = np.random.rand(3,4,2)

In [3]: A
Out[3]: 
array([[[ 0.79341698,  0.55131024],
        [ 0.29294586,  0.22209375],
        [ 0.11514749,  0.15150307],
        [ 0.71399288,  0.11229617]],

       [[ 0.74384776,  0.96777714],
        [ 0.1122338 ,  0.23915265],
        [ 0.28324322,  0.7536933 ],
        [ 0.29788946,  0.54770654]],

       [[ 0.13496253,  0.24959013],
        [ 0.36350264,  0.00438861],
        [ 0.77178808,  0.66411135],
        [ 0.26756112,  0.54042292]]])

In [4]: helper = np.arange(3*4*2)

In [5]: helper
Out[5]: 
array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16,
       17, 18, 19, 20, 21, 22, 23])

In [6]: helper = helper.reshape([3,4,2])

In [7]: helper
Out[7]: 
array([[[ 0,  1],
        [ 2,  3],
        [ 4,  5],
        [ 6,  7]],

       [[ 8,  9],
        [10, 11],
        [12, 13],
        [14, 15]],

       [[16, 17],
        [18, 19],
        [20, 21],
        [22, 23]]])

In [8]: linear_index = helper[1,0,1]

In [9]: linear_index
Out[9]: 9 
```

注意：

*   关于 Matlab，行和列在 Numpy 中切换。
*   Matlab 以 1 开始索引，Python 和 Numpy 以 0 开始。

# r - 过滤掉R中的列

> ID：15230182
> 
> 赞同：-3
> 
> 时间：2013-03-05T17:22:09.687
> 
> 标签：r

参考 Post# [Filtering out columns in R](https://stackoverflow.com/questions/15229777/filtering-out-columns-in-r)，所有 1 和 0 的列已成功从 training_data 中消除。但是，分类算法仍然抱怨除了 1 或 2 之外的大多数值为 0 的列（列中的所有值都是 0，除了 1 或 2 个值）。

我正在使用 penalizedSVM R 包来执行特征选择。更仔细地查看数据集，函数 svm.fs 抱怨除了一或二之外大多数值为 0 的列。

如何修改（或添加）以下代码以实现结果。

```
lambda1.scad<-c(seq(0.01, 0.05, .01), seq(0.1, 0.5, 0.2), 1)
lambda1.scad<-lambda1.scad[2:3]
seed <- 123 

f0 <- function(x) any(x!=1) & any(x!=0) & is.numeric(x)
trainingdata <- lapply(trainingdata, function(data) cbind(label=data$label, 
                            colwise(identity, f0)(data)))

datax <- trainingdata[[1]]
levels(datax$label) <- c(-1, 1)
train_x<-datax[, -1]
train_x<-data.matrix(train_x)
trainy<-datax[, 1]

idx <- is.na(train_x) | is.infinite(train_x)
train_x[idx] <- 0

tryCatch(scad.fix<-svm.fs(train_x, y=trainy, fs.method="scad",
                          cross.outer=0, grid.search="discrete",
                          lambda1.set=lambda1.scad, parms.coding="none",
                          show="none", maxIter=1000, inner.val.method="cv",
                          cross.inner=5, seed=seed, verbose=FALSE), error=function(e) e) 
```

或者有人可能会提出一个完全不同的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:27:59.067

使用布尔值可以求和的事实并定义一些零容差：

```
sum(x == 0) / length(x) >= tolerance 
```

这成为你放弃的条件。然而，通常零不仅是有效数据，而且对正在研究的现象至关重要。在继续使用这种方法之前，您应该仔细考虑您的算法选择和删除列的决定。

# r - 将带有 inf 的行移动到 R 中的新矩阵

> ID：15230183
> 
> 赞同：1
> 
> 时间：2013-03-05T17:22:10.667
> 
> 标签：r, row

所以我有一个 NxN 矩阵，其中一些行的值具有 inf。我想要做的是将它们移动到自己单独的矩阵中。这是一个例子

```
 Matrix A
 1    3    9
 4    5    2
inf   6    7 
 0   inf   8 
```

使用 inf 删除行

```
 Matrix A
 1    3    9
 4    5    2

 Inf Matrix
inf   6    7 
 0   inf   8 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:24:50.253

您可以使用标准子集和函数来做到这一点`is.infinite`：

```
##First create some data
m = matrix(1:12, ncol=3)
m[3,1] = Inf; m[4,2] = Inf 
```

然后我们计算子集的条件：

```
cond = apply(m, 1, function(i) any(is.infinite(i))) 
```

然后像往常一样子集：

```
m[!cond,]
m[cond,] 
```

另一种方法（但对我来说似乎有点 hacky）是使用行总和：

```
m[is.finitie(rowSums(m)),]
m[!is.finite(rowSums(m)),] 
```

并不是说如果您的矩阵有`NA`，那么这些方法会给出不同的结果！

```
m[2,2] = NA
m[!is.finite(rowSums(m)),]
m[cond,] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:13:59.103

因为你正在处理一个数字矩阵，`abs()`并且`==`会很快。

```
 # Logical Vector
 InfRows <- 0!=rowSums(abs(A) == Inf, na.rm=TRUE)

 InfMat  <- A[InfRows,  ]
 A.clean <- A[!InfRows, ] 
```

* * *

### 编辑：如果您需要允许 NA，只需使用`na.rm`参数`rowSums()`

```
# same as above, but using na.rm
InfRows <- 0 != rowSums(abs(A) == Inf, na.rm=TRUE) 
```

例子：

```
 A[2:3, 2] <- NA
  A  
     # [,1] [,2] [,3]
# [1,]    1    3    9
# [2,]    4   NA    2
# [3,]  Inf   NA    7
# [4,]    0  Inf    8

InfRows <- 0 != rowSums(abs(A) == Inf, na.rm=TRUE)

InfMat  <- A[InfRows,  ]
A.clean <- A[!InfRows, ] 

InfMat
#      [,1] [,2] [,3]
# [1,]  Inf   NA    7
# [2,]    0  Inf    8

A.clean
#      [,1] [,2] [,3]
# [1,]    1    3    9
# [2,]    4   NA    2 
```

# java - java.lang.OutOfMemoryError：Java 堆空间 - blobstoreService

> ID：15230184
> 
> 赞同：0
> 
> 时间：2013-03-05T17:22:11.767
> 
> 标签：java, google-app-engine, google-cloud-storage

我正在尝试从存储在 Google Cloud Storage 上的文件中读取字节并将其发送到 HTTP POST 请求中，但我对**较大的文件**进行此异常处理，**代码正在处理小文件**：

在这一行抛出异常：

```
writer.write(blobstoreService.fetchData(new BlobKey(video.getBlobkey()), start, end)); 
```

这是我的代码：

```
 URLConnection connection = new URL("http://myurl.com/").openConnection();
    //set time out to infinite
    connection.setConnectTimeout(0);
    connection.setDoOutput(true);
    connection.setRequestProperty("Content-Type", "multipart/form-data; boundary=" + boundary);
    BufferedOutputStream writer = null;
    OutputStream output = connection.getOutputStream();
    writer = new BufferedOutputStream(output); // true = autoFlush, important!

    //........

    BlobInfoFactory blobInfoFactory = new BlobInfoFactory();
    BlobInfo blobInfo = blobInfoFactory.loadBlobInfo(new BlobKey(video.getBlobkey()));
    Long blobSize = blobInfo.getSize();
    //max read on fetch
    long maxReadFetch = 1015807;
    //read the file in one time temporary
    long i = 0;
    long start = 0;
    long end = 0;
    while(i < blobSize) {
        start = i;
        end = i + maxReadFetch;
        //determine end
        if(end > blobSize) {
            end = blobSize;
        } else {
            end--;
        }
        writer.write(blobstoreService.fetchData(new BlobKey(video.getBlobkey()), start, end));

        i += maxReadFetch;
    }
    writer.flush(); // Important! Output cannot be closed. Close of writer will close output as well.
} finally {
    if (input != null) try { input.close(); } catch (IOException logOrIgnore) {}
} 
```

堆栈跟踪：

> servlet java.lang.OutOfMemoryError 未捕获的异常：com.google.apphosting 的 java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:111) 的 java.util.Arrays.copyOf(Arrays.java:2961) 的 Java 堆空间。 utils.security.urlfetch.URLFetchServiceStreamHandler$Connection$BufferingOutputStream.write(URLFetchServiceStreamHandler.java:460) at java.io.BufferedOutputStream.write(BufferedOutputStream.java:122) at java.io.FilterOutputStream.write(FilterOutputStream.java:97)在 controller.CtrlWistia.upload(CtrlWistia.java:200) 在 controller.CtrlWistia.add(CtrlWistia.java:126) 在 controller.CtrlWistia.ajax(CtrlWistia.java:79) 在 controller.CtrlAjax.main(CtrlAjax.java: 66) 在 vi​​daao.AjaxServlet.doPost(AjaxServlet.java:37) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:637) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 在 org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain .doFilter(ServletHandler.java:1166) 在 org.tukey.web.filters.urlrewrite.RuleChain.handleRewrite(RuleChain.java:176) 在 org.tukey.web.filters.urlrewrite.RuleChain.doRules(RuleChain.java:145) ) 在 org.mortbay.jetty 的 org.tukey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:394) 的 org.tukey.web.filters.urlrewrite.UrlRewriter.processRequest(UrlRewriter.java:92)。 servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:125) 在 org.mortbay.jetty.servlet。ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler. java:1157) 在 com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 org.mortbay .jetty.servlet.ServletHandler.handle(ServletHandler.java:388) 在 org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216) 在 org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java :182) 在 org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765) 在 org.mortbay.jetty.webapp.WebAppContext。com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266) 上的句柄(WebAppContext.java:418) org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:10:07.740

请注意，即使您一次读取的数据少于 1MB，您也会将该数据写入 OutputStream，该数据将保存在内存中，直到您提交请求。

根据[文档](https://developers.google.com/appengine/docs/java/urlfetch/usingjavanet#Using_HttpURLConnection)：

> App Engine 的 URLConnection 实现不保持与远程主机的持久连接。当应用设置请求数据或写入输出流时，请求数据会保存在内存中。当应用程序访问有关响应的任何数据时，例如获取输入流（或调用 connect() 方法），App Engine 使用请求数据调用 URL Fetch 服务，获取响应，关闭连接并返回响应数据.

# c# - 通用按钮

> ID：15230188
> 
> 赞同：0
> 
> 时间：2013-03-05T17:22:27.873
> 
> 标签：c#, winforms

我正在开发一个应用程序，我想包含一些全局功能，例如适用于应用程序包含的每个表单的几个按钮。

它是一个包含四个子窗体的 MDI 应用程序，每个窗体执行不同的任务，每个窗体都有自己的控件。我在每个表单上都有一个清除和搜索按钮，我想做的是创建两个全局按钮，为当前处于活动状态的表单执行这些操作。

例如，Form1 是 MDI 父级，Form2 是 Form1 的子级。我从 Form1 中的 ToolStripMenuItem 调用 Form2，我在 Form2 中有一个按钮，用于清除其中的所有文本框。我想要实现的是将此按钮中的代码移动到放置在 Form1（MDI 父级）的常规栏中的按钮，以便不仅清除 Form2 的文本框，而且清除我的应用程序中的所有表单。

这是我到目前为止所得到的：

```
//Form1 code
public partial class FrmPrincipal : Form
{
    public FrmPrincipal()
    {
        InitializeComponent();
    }
    private void manageUsersToolStripMenuItem_Click(object sender, EventArgs e) //Calling Form2
    {
        FrmUserManager frmusers = new FrmUserManager();
        frmusers.MdiParent = this;
        frmusers.Show();

    }
}

//Form2 code
public partial class FrmUserManager : Form
{   
    public FrmUserManager()
    {
        InitializeComponent();
    }
}

private void BtnClear_Click(object sender, EventArgs e)
{
    Clear(this);
}

private void Clear(Control all)
{
    foreach (Control all in all.Controls)
    {
        if (all is TextBox) ((TextBox)all).Text = string.Empty;
        if (all is CheckBox) ((CheckBox)all).Checked = false;
        if (all is DataGridView) ((DataGridView)all).DataSource = null;
        if (all.Controls.Count > 0) Clear(all);
    }
} 
```

所以，基本上我想要的是将此代码移动到 Form1 中的一个按钮，以便从 Form2 外部执行此操作。如果我能做到，我将能够摆脱四个子表单（搜索和清除）中的按钮，并且应用程序将更易于使用。

我想到的唯一方法是将Form2中每个控件上的属性“Modifiers”更改为“public”，以尝试从Form1访问它们，执行以下操作：

```
Form2 frm2 = new Form2();
if(frm2.Active == true) Clear(this); 
```

在这种情况下，我会实例化每个表单并验证它是否处于活动状态。

它没有显示任何错误，但仍然无法正常工作。我想我知道为什么，为调用 Form2 而创建的对象与此处创建的对象完全不同，因此当前显示的 Form2 与此处引用的对象不同。

有谁明白我想要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:55:51.743

这些是我为解决此问题而采取的步骤。

**1\. 创建继承自 Form 并具有公共 ClearData() 方法的类。**

```
public class ClearableForm : Form
{
    public void ClearData()
    {
        Action<Control> traverseControls = null;

        traverseControls = (c) =>
        {
            if (c is TextBox) ((TextBox)c).Text = string.Empty;
            if (c is CheckBox) ((CheckBox)c).Checked = false;
            if (c is DataGridView) ((DataGridView)c).DataSource = null;
            c.Controls.Cast<Control>().ToList<Control>().ForEach(traverseControls);
        };

        traverseControls(this);
    }
} 
```

**2\. 使您的 FrmUserManager 继承自 ClearableForm。**

```
public partial class FrmUserManager : ClearableForm
{
    public FrmUserManager()
    {
        InitializeComponent();
    }
} 
```

**3\. 使用以下代码将“Clear” ToolStripMenuItem 添加到 FrmPrincipal 表单上的 MenuStrip。**

```
private void clearToolStripMenuItem_Click(object sender, EventArgs e)
{
    foreach (Form mdi_child in this.MdiChildren)
    {
        if (mdi_child is ClearableForm)
            mdi_child.ClearData();
    }
} 
```

我希望它能解决你的问题。队友的欢呼声！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:27:42.497

创建子表单时，您必须跟踪它。你可能想做这样的事情：

```
// In the MDI form    
List<Form> mChildForms = new List<Form>();

void ToolStripButton_Click(object sender, EventArgs args)
{
   Form myForm = new FrmUserManager();
   ...
   mChildForms.Add(myForm);
}

void BtnClear_Click(object sender, EventArgs args)
{
   foreach (Form f in mChildForms)
      if (f.Active)
         Clear(f);
} 
```

可能不准确，我现在没有 Visual Studio。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:31:36.297

你为什么不公开设置你的`Clear`功能`Form2`，然后做：

```
if(frm2.Active == true) frm2.Clear(frm2); 
```

或者，如果您想对任何表单使用此功能，清除活动表单，只需将`Clear`功能移动到`Form1`，然后执行以下操作：

```
if(this.ActiveMDIChild != null)
   Clear(this.ActiveMDIChild); 
```

# php - 在php中打印特定的xml节点值

> ID：15230190
> 
> 赞同：0
> 
> 时间：2013-03-05T17:22:35.023
> 
> 标签：php, xml

我有以下 XML 文件

```
 <study>
   <participant name="Jone" gender="male" nationality="Canadian" job="web developer" country="Canada" years="2"/>
   <scenario_1>
      <s1_first name="drieseng">Scenario 1 first developer</s1_first>
      <s1_second name="Scott Hernandez">Scenario 1 2nd developer</s1_second>
      <s1_third name="Ryan Boggs">Scenario 1 3rd developer</s1_third>
      <s1_forth name="Ian MacLean">Scenario 1 4th developer</s1_forth>
      <s1_fifth name="Michael C. Two">Scenario 1 5th developer</s1_fifth>
   </scenario_1>
   <scenario_2>
      <s2_first name="Charles Chan">Scenario 2 1st developer</s2_first>
      <s2_second name="Charles Chan">Scenario 2 2nd developer</s2_second>
      <s2_third name="drieseng">Scenario 2 3rd developer</s2_third>
      <s2_forth name="claytonharbour">Scenario 2 4th developer</s2_forth>
      <s2_fifth name="Hala Dajani">Scenario 2 4th developer</s2_fifth>
   </scenario_2>
   <scenario_3>
      <s3_first name="Michael C. Two">Scenario 3 1st developer</s3_first>
      <s3_second name="Giuseppe Greco">Scenario 3 2nd developer</s3_second>
      <s3_third name="Ian MacLean">Scenario 3 3rd developer</s3_third>
      <s3_forth name="Gregory Goltsov">Scenario 3 4th developer</s3_forth>
      <s3_fifth name="Michael C. Two">Scenario 3 5th developer</s3_fifth>
   </scenario_3>
</study> 
```

而且，我正在使用以下 PHP 代码打印“scenario_2”的孩子的名称和值

```
$xml_temp = simplexml_load_file("db/temp.xml");

$scenarios = $xml_temp -> children();

foreach( $scenarios[2] -> children() as $scenario_2_developer){

   echo $scenario_2_developer['name']. ": " .  $scenario_2_developer -> nodeValue; 
```

它完美地打印属性，但不是值。我该如何修复它，所以它也会打印节点的 VALUE ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T05:13:32.867

你非常接近，但是使用 SimpleXML 没有`->nodeValue`属性，只需将元素对象转换为字符串就可以了：

```
echo $scenario_2_developer['name'], ": ", $scenario_2_developer, "\n";
                                                   ^
                                                   |
                                   echo casts this object to string 
```

但我真的很想知道是谁创建了这样一个 XML，以这种方式对元素名称进行编号似乎适得其反。应该修复 XML 以便更好地使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:24:46.017

每个 SimpleXMLElement 都有一个属性`innerNode`。将其转换为字符串，它将是您要查找的值。

# java - 字段的特定 MessageBodyWriter

> ID：15230192
> 
> 赞同：5
> 
> 时间：2013-03-05T17:22:44.047
> 
> 标签：java, jackson, jax-rs, resteasy

假设我在 JAX-RS 1 环境（带有 Jackson 提供程序的 RestEasy 2）中有一个数据类，如下所示：

```
class Foo {
   int id;
   String name;
   Bar bar;

   ...
} 
```

是`Bar`：

```
class Bar {
   int one;
   String two;
} 
```

现在我想以`Bar`一种特殊的方式进行序列化（可能取决于所请求的媒体类型（或取决于月相），我会写一个`MessageBodyWriter<Bar>`

```
@Provider
@Produces("application/json")
public class BarWriter implements MessageBodyWriter<Bar> {
   ...
} 
```

如果`Bar`像在

```
@GET @Path("bar")  
public Bar getBar() { return new Bar(...); } 
```

但是当我请求`Foo`时

```
@GET @Path("foo")  
public Foo getFoo() { return new Foo(...); } 
```

消息正文作者被忽略。

现在我想要的是`MessageBodyWriter`当我返回`Foo`或`List<Bar>`

我认为后者可以通过`MessageBodyWriter`为`List`案例编写自定义来实现，但对于前一种情况，我无法为包含`Bar`字段的所有应用程序类编写消息正文编写器。

关于如何解决这个问题的任何想法？我还尝试在`Bar`实例上使用杰克逊序列化程序，但看起来这甚至没有被 RestEasy 注册（然后，我认为这种方式无论如何都太脆弱了）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T18:36:55.667

不幸的是，这不是消息正文作者的工作方式。JAX-RS 实现将根据从资源方法返回的类型定位要在序列化中使用的编写器。因此，在您的情况下，使用为 定义的自定义编写器`Bar`，使用此资源方法：

```
@GET @Path("bar")  
public Bar getBar() { return new Bar(...); } 
```

JAX-RS 提供程序将`Bar`使用您的自定义编写器进行序列化。但是对于此资源方法：

```
@GET @Path("foo")  
public Foo getFoo() { return new Foo(...); } 
```

您没有定义自定义编写器，序列化将由第一个匹配（默认）提供程序处理，该提供程序可以处理返回类和内容类型的组合。要记住的关键一点是，与典型的 JSON 和 XML 序列化库不同，JAX-RS 实体提供程序***不是***递归的。Aka，对于`A`在资源方法中返回的给定对象，提供者将尝试*仅为*定位自定义编写器`A`，而不是为包含在`A`变量中的任何类型。

既然您使用的是 Jackson，为什么不为您的`Bar`类定义一个自定义序列化程序呢？这将处理您描述的几乎所有场景：

```
public class BarSerializer extends JsonSerializer<Bar> {

    @Override
    public void serialize(final Bar value, final JsonGenerator jgen,
            final SerializerProvider provider) throws IOException,
            JsonProcessingException {

        jgen.writeStartObject();
        jgen.writeFieldName("myBar");
        jgen.writeString(value.getTwo());
        jgen.writeEndObject();
    }
} 
```

你告诉杰克逊使用这个自定义序列化程序：

```
@JsonSerialize(using=BarSerializer.class)
class Bar {
   int one;
   String two;
} 
```

最后，不要忘记，如果您希望以与序列化相同的形式返回 JSON，您还需要一个自定义的[`JsonDeserializer`](http://jackson.codehaus.org/1.9.9/javadoc/org/codehaus/jackson/map/JsonDeserializer.html).

为了让它工作，你需要在你的类路径中的`jackson-mapper`和`jackson-jaxrs`罐子（可能也是那个`jackson-core`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T18:36:43.220

JAX-RS 运行时只会为资源方法返回的对象查找一个`MessageBodyWriter`（请参阅规范中的“4.2.2 消息体编写器”一节），然后该单个`MessageBodyWriter`对整个对象图的序列化具有完全控制权返回给客户。

为了实现你想要的行为，你需要一个自定义的`MessageBodyWriter`每个媒体类型，当它在图中遇到特定类型时，它愿意将对象图的一部分的序列化委托给另一个写入器，然后恢复它自己的逻辑。获取特定类型的委托编写器不会是一个大问题（注入 a `javax.ws.rs.ext.Providers`和 call `getMessageBodyWriter()`），但我不认为现有的 xml/json/etc 序列化程序是在考虑到这种扩展的情况下实现的，所以我猜你不能只转发他们。仅仅为此重新实现 xml 编组器也不是一个有吸引力的选择。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-22T11:35:28.703

请参阅下面的帖子，为您的 Java 对象的序列化编写自定义消息正文编写器。

[http://h2labz.blogspot.in/2014/12/marshalling-java-to-json-in-jax-rs.html](http://h2labz.blogspot.in/2014/12/marshalling-java-to-json-in-jax-rs.html)

# session - 授权用户访问我网站上不同页面的最有效方式？

> ID：15230194
> 
> 赞同：0
> 
> 时间：2013-03-05T17:22:57.720
> 
> 标签：session, authorization

我过去只制作过单页网络应用程序；有了这些，一旦用户连接，我就会读取存储在他们的 cookie 中的密码哈希，并将其与存储在我的数据库中的值相匹配，以确定用户是否已经登录。

我现在想创建一个包含多个网页的网站，我刚刚意识到*每次*用户进入新页面时都需要查询数据库；这对我来说似乎效率极低。有没有更好的方法来保持与客户端的持续会话而不会在此过程中使我的数据库/服务器紧张？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:39:12.590

看看使用会话对象，例如 HttpContext.Session["UserAuth"] = true;

当您在第一页（例如登录）上对用户进行身份验证时，您可以像上面的示例一样创建一个会话。然后，一旦您重定向到下一页，只需检查会话是否确实存在并且有效。

检查会话：

> ```
>  if(HttpContext.Session["UserAuth"] != null)
>    {
>      if(HttpContxt.Session["UserAuth"].toString() == "true")
>      {
>         //Session is valid and user is logged in.
>      }
>      else{
>        //Session is invalid and user is not logged in.
>          }
>    } 
> ```

因此，您要检查用户是否有效的每个页面都可以进行上述检查。只要您在数据库身份验证时在第一页上创建了会话。

请注意，上面的代码只是为了让您了解如何执行此操作。

* * *

“UserAuth”只是您为要存储的会话提供的名称。它绝对可以是任何东西。在这种情况下，您在 Session 中存储的值是“true”。

因此，当您检索 Session 的值时，您只需得到“true”，这意味着用户已登录。

例如，当您注销用户时，您可以以与最初创建会话相同的方式将会话“UserAuth”的值更改为 false。

例如

> HttpContext.Session["UserAuth"] = false;

# php - 在一个页面上生成总价，多个产品

> ID：15230197
> 
> 赞同：0
> 
> 时间：2013-03-05T17:22:59.633
> 
> 标签：php, jquery

我正在尝试在单页商店中生成总价。

我在同一页面上有不同的产品，在 foreach 中布局如下：

```
<input type="hidden" name="price_<?=$product_id?>" value="<?=$product_price?>" />
<input type="text" name="<?=$product_id?>" value="" onchange="calculateTotal();" /> 
```

因此，第一个输入是隐藏的，包含产品的价格。第二个输入包含数量，名称设置为 product_id。唯一的问题是一页上可以有多个输入。

最好的方法是什么？要么使用 Javascript 计算价格，要么使用 Ajax 帖子并使用 PHP 进行计算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:57:17.747

为什么不使用新`data`属性并跳过隐藏的价格字段？像这样的东西：

```
<input class='quantity' type="number" data-price="1.5"  name="prod1" value="" />
<div class='subtotal'>0.00</div>

<input class='quantity' type="number" data-price="7"  name="prod2" value="" />
<div class='subtotal'>0.00</div>

<div id='total'>0.00</div> 
```

有了这个：

```
$('.quantity').on('change', function(){
    var sub = $(this).val() * $(this).data('price');
    $(this).next('div.subtotal').html(sub).data('sub',sub);
    var tot=0;
    $('.subtotal').each(function(){
            tot+= $(this).data('sub');
        });
    $('div#total').html(tot);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:25:42.420

注意到使用 HTML 存储价格变量*通常是*不好的礼仪，为什么不保留所有价格的总和呢？就像是

```
$running_total = $running_total+$product_price; 
```

这将输出已循环通过的所有产品的总数。如果我误解了你的问题，我很抱歉。

将价格存储为要通过 POST 或 GET 传递的 HTML 实体会使变量处于开放状态，以供最终用户操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:25:42.823

随心所欲地去做。只要您在结帐时（再次？）**在服务器上**执行计算。

# putty - 通过 PuTTY 或 .... 编写脚本？

> ID：15230199
> 
> 赞同：0
> 
> 时间：2013-03-05T17:23:07.267
> 
> 标签：putty

很久以前，我在 Windows 中使用了一个名为 Procomm Plus 的程序来编写脚本/自动与调制解调器等交互。现在我正在使用 PuTTY/ssh 来处理类似的事情，比如处理 Juniper Networks NetOS 设备。现在我几乎坚持粘贴不允许循环的文本。我可以想到一些变化： - 使用 PuTTY 以外的东西......但是什么？- 通过 PuTTY 启动一个脚本......但是如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:29:18.887

你可以试试

```
-m, which will "read a remote command or script from a file" 
```

看看[Putty 文档](http://the.earth.li/~sgtatham/putty/0.53b/htmldoc/Chapter3.html#3.7)- 特别是第 3.7 节。

编辑：

我现在记得 - 我正在`plink`为此使用：

```
plink user@machine -m local_script.sh 
```

plink 包含在 Putty 中。

# php - 在 PHP 中给图像随机命名

> ID：15230205
> 
> 赞同：1
> 
> 时间：2013-03-05T17:23:27.930
> 
> 标签：php, random

这样我使用 php 加载图像：

```
header("Content-type: image/jpeg");
$image=imagecreatefromjpeg("http://i.imgur.com/zWaQJNCb.jpg");
imagejpeg($image); 
```

但问题是，如果我想将图像从我的网络浏览器手动保存到我的桌面，那么所有图像都具有相同的名称，如`ix.jpeg`[这里文件名是：ix.php] 但我不明白配置的方式是`header`什么图像将具有随机名称..就像`25xc.jpeg, 36s5a2f.jpeg...`将其保存在桌面上时..有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:57:48.057

这是会做的工作！

```
$dt = date(time());
header("Content-type: image/jpeg");
header('Content-Disposition: inline; filename="'. $dt .'.jpg"');
$image=imagecreatefromjpeg("http://i.imgur.com/knNxDFnb.jpg");
imagejpeg($image); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T17:26:53.323

在您的通话 中使用该`filename`值。[参见示例 1](http://www.php.net/manual/en/function.header.php)。`header`

```
<?php
// We'll be outputting a PDF
header('Content-type: application/pdf');

// It will be called downloaded.pdf
header('Content-Disposition: attachment; filename="downloaded.pdf"');

// The PDF source is in original.pdf
readfile('original.pdf');
?> 
```

我将把“生成随机字符串”部分留给你。我建议基于文件的校验和，但这只是我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T17:39:48.143

如果您想为您的用户生成唯一名称，这就是您需要做的，您需要做的就是使用实际时间戳并在标题中使用文件名参数，您可以像下面那样做（如果您使用随机生成在极少数情况下您会两次获得相同的名称）：

```
$dt = date(time());

header("Content-type: image/jpeg");
header('Content-Disposition: attachment; filename="'. $dt .'.jpg"'); 
```

以上将生成唯一的图像名称，如下所示：

> 1362504465.jpg

我希望这有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T17:37:05.993

有几十种甚至上百种方法可以做到这一点。

1.  附加`time()`在文件名之后。这样，所有文件名都将有一个（唯一的）编号。
2.  使用散列函数，例如`md5()`.
3.  使用此代码-

    ```
    function generateRandomName(len) {
            $out = '';
            for($i=0; $i<len; $i++) {
                $out.=chr(rand(65,122));
            }
            return $out;
        } 
    ```

4.  只需在您的文件名后附加`rand`函数（但文件名的长度将不相等）。

5.  谷歌是你的朋友。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T17:30:04.037

这将使字母 az 的 8 个字符长名称，但您可以做一些魔术和/或使用[http://www.asciitable.com/](http://www.asciitable.com/)

```
function randChar() {
    return char(rand(97, 122); 

    // Then you could either do a random number from 97 to 122 for a-z or just make an array of all the characters you would like in the filename. 
}

$filename = '';
$amountOfChars = 8;

for($i = 0; $i < $amountOfChars; $i++; ) $filename .= randChar(); 
```

希望这可以帮助

# animation - 动画原点无法正常工作 Monogame 3.0

> ID：15230207
> 
> 赞同：1
> 
> 时间：2013-03-05T17:23:41.860
> 
> 标签：animation, xna, monogame, sprite-sheet

我一直在制作一个新游戏，我刚刚制作了我的第一个动画，一个爆炸。

问题是这样的。爆炸精灵表为 1200x100，由 12 个 100x100 帧组成。爆炸动画很好，除了起源表现奇怪。我希望爆炸居中，所以我指定 50、50，就像我在过去的游戏中所做的那样。它以 Y 方向为中心，但在 X 方向上仅略微移动。

经过一番摆弄后，我注意到如果我将原点设置为 600、50（精灵表宽度的一半），它会正确居中。这是没有意义的。我以前使用过这个动画代码，从来没有遇到过这个问题。我已经确保所有值都被正确传递，并且目标和源矩形看起来是正确的......我被难住了！

我测试了 Monogame，在 XNA 和 monogame 之间发生了一些事情。我已经为任何有兴趣自己下载和检查的人制作了这个示例。正如您将看到的，在 XNA 版本中，黑点应该在中间，但在单机游戏版本中，它偏离了中心。

不确定是什么原因造成的。矩形或 spritebatch.draw 的区别？或者也许是使用monogame内容项目处理纹理的方式。任何帮助是极大的赞赏！！！

要运行它，您需要安装 xna 4.0 以及 monogame 3.0 [http://www.filedropper.com/testanimation](http://www.filedropper.com/testanimation)

[http://monogame.codeplex.com/releases/view/102870](http://monogame.codeplex.com/releases/view/102870)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:13:42.637

好吧，我已经想通了！

似乎这是 3.0 单游戏版本中内容构建器的问题。今天3.0.1版本出来了，所以我卸载了3.0，安装了3.0.1。

然后我运行了这个项目，问题仍然存在。所以我打开了我的内容项目，重建了我所有的内容，复制了文件并再次尝试，问题解决了！！！:D

TY Asik 博士激励我朝着正确的方向前进！:)

# filesystems - 文件系统检测和数据提取

> ID：15230209
> 
> 赞同：0
> 
> 时间：2013-03-05T17:23:50.327
> 
> 标签：filesystems, data-recovery

我有一个旧的 DVR 系统，我正在录制我的闭路电视摄像机

用它。产品是： http: [//www.adk-security.com/lx-zeus-8-h264-channel-lite-silent-](http://www.adk-security.com/lx-zeus-8-h264-channel-lite-silent-)

with-mobile-login--usb-1240-p.asp

或者实际上 [http://www.qvissecurity.com/Catalogue/CE​​ARANCE-BARGAINS/Analog-](http://www.qvissecurity.com/Catalogue/CEARANCE-BARGAINS/Analog-)

硬盘录像机/专业硬盘录像机/APOLLO-PROLITE-LX/8-CHANNEL/LX-PRO-LITE-8-

Chn-1TB-LXAPOPROLITE-8-1TB

现在我找到了我的闭路电视磁盘，它是普通的 1TB 硬盘。我想看RAW

在此 HDD 中从闭路电视录制的视频。文件系统不是

由 FindAndMount、Partition Magic、Recover My Files 等检测到。

Windows 说它是 RAW 磁盘。

我无法访问视频，但是当我打开磁盘映像并读取扇区时

按部门，我在那里看到数据。如何正确阅读和提取

来自这个磁盘的数据？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:59:58.433

这些存储在 xfs 或本机上的 linux 文件系统中，

去 pendrivelinux.com 并获得一个 windows 安装程序来制作一个可启动的 pendrive。

我更喜欢 ubuntu 或 debian，选择两者之一，然后在新的 U 盘上制作 U 盘。

在计算机上启动它，在大多数地方通过 USB-ide/SATA 转换器（约 14 美元）插入 dvr 驱动器。

您应该会看到磁盘挂载，并且可以查看文件。

然后，您可以插入 NTFS 格式的硬盘并将它们复制到外部驱动器并在 Windows videolan.org 的 VLC 播放器中查看它们

# focus - 年/月/日输入

> ID：15230210
> 
> 赞同：0
> 
> 时间：2013-03-05T17:23:53.577
> 
> 标签：focus

我正在寻找一些简单的代码

<input type="text" name="year" maxlength="4">

<input type="text" name="月" maxlength="2">

<input type="text" name="day" maxlength="2">

所以当我完成输入年份时，它会专注于月和日并停止。

我似乎无法在 Google 中找到正确的搜索词。我确信这是由 1000 人完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:51:24.817

试试这个代码；我使用jQuery来完成这个。您需要将 jquery 包含在同一目录中，并将“id”属性添加到您的每个输入中。

```
<script src='jquery.js' type="text/javascript"></script>

<input type="text" name="year" id="year" maxlength="4">

<input type="text" name="month" id="month" maxlength="2">

<input type="text" name="day" id="day" maxlength="2">

<script type="text/javascript">
    $("#year").bind( 'keypress', function(e) {
        if( $("#year").val().length >= 4 ) 
            $("#month").focus();
    });
    $("#month").bind( 'keypress', function(e) {
        if( $("#month").val().length >= 2 ) 
            $("#day").focus();
    });
</script> 
```

# azure - Azure VM 阻止来自特定 ip 的页面请求

> ID：15230211
> 
> 赞同：1
> 
> 时间：2013-03-05T17:23:55.307
> 
> 标签：azure, virtual-machine

我们在 Azure 上有一个具有以下 DNS 的 VM：

erpone-jsl.cloudapp.net

此 VM 上的默认网站经常无法访问，并显示错误消息“无法显示此网页”。然而，这只发生在那些在印度西部使用特定互联网服务提供商的用户身上。如果此特定 ISP 重置其服务器，则该站点将变得可访问。

或者，如果我们重新启动这个特定的虚拟机，该站点就可以访问了。

但问题在几个小时或几天后再次出现。

我们注意到，当 Windows 2012（数据中心）在 VM 上更新自身时，该问题再次出现 - 但我们还不确定这一点。

出现此问题的 IP 池为 116.199.168.0 到 116.199.168.21

这个 ISP 告诉我们他们的 IP 被 Azure VM 防火墙阻止，但我们没有阻止或限制来自我们的 VM 或 IIS 的任何 IP。

有人能解释一下这个奇怪的现象吗？

仅来自此 IP 范围的页面请求无法访问该网站，但在 VM 重新启动或 ISP 的服务器重新启动时会暂时解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:07:58.430

不确定在这种特殊情况下发生了什么，但是... Windows Azure 不提供提供 IP 阻止的每云服务防火墙。这是在 VM 级别（您的 VM）完成的。

[也就是说：您是否尝试过从无法访问erpone-jsl.cloudapp.net](http://erpone-jsl.cloudapp.net)的那些 IP 地址访问任何其他 Windows Azure 云服务？这将是一个很好的测试，在与 erpone-jsl 相同的数据中心以及另一个数据中心中*测试Web 应用程序。*你也可以尝试在 Azure 网站中建立一个测试网站，免费层，它可以让你在几分钟内部署一些东西，而无需任何费用，用于测试目的。您可以使用 ftp 从网站下载诊断日志。

您可以做的一件事是检查 IIS 日志（虚拟机，或云服务的 web/worker 角色），看看有问题的 IP 地址是否出现在日志中（我建议检查*测试*网站的日志cloudapp.net 也是如此）。

如果所有其他方法都失败了，您可以打开支持票证，看看 Azure 支持是否对此有任何启示。

# .net - .net compact framework 应用程序是否可以在 windows 8 上运行

> ID：15230218
> 
> 赞同：0
> 
> 时间：2013-03-05T17:24:12.823
> 
> 标签：.net, mobile, windows-mobile

我可以安装在 .NET compact framework (windows Mobile 6.5) 或 Windows CE 中开发的应用程序以在最新的 windows 8 手机或平板电脑上运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:25:34.443

不会。Windows 8 和 Windows Phone 8 都有自己的运行时和 API。如果您希望您的应用程序在 Windows Phone 8 或 Windows 8 RT 上运行，您将需要专门针对这些平台进行开发。

幸运的是，它们确实支持比 .NET CF 更丰富的编程模型，因此应用程序逻辑部分的移植应该相当流畅。UI 使用完全不同的模型，因为它现在完全基于 XAML，并且可能需要完全重写。

# c++ - 自动顶点属性分配是否保证顺序正确？

> ID：15230222
> 
> 赞同：2
> 
> 时间：2013-03-05T17:24:25.023
> 
> 标签：c++, opengl, glsl, shader, vertex-attributes

当使用在着色器代码中指定顶点属性位置时，`layout(location = ...)`我不需要`glGetAttribLocation`在我的 C++ 程序中使用获取位置。

如果我既没有使用布局限定符在着色器中定义位置，也没有在我的 C++ 程序中获取它们，它们会被自动分配。问题是关于这个自动分配。顺序是否等于着色器代码中的定义顺序？

例如，在第一个着色器代码中，位置是否保证与第二个着色器代码中的位置相同？

```
// first shader code
#version 330

in vec3 position;
in vec3 normal;
in vec2 texcoord;

// second shader code
#version 330

layout(location = 0) in vec3 position;
layout(location = 1) in vec3 normal;
layout(location = 2) in vec2 texcoord; 
```

此外，相同的规则是否适用于片段着色器输出？现在我`glBindFragDataLocation`用来取它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:57:59.510

自动属性分配是任意的；他们遵循实现为他们选择的任何算法。

如果您没有分配属性位置，那么您就不能假设*它*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T17:44:58.153

不——至少有一个我知道的驱动程序将属性按字母顺序排序，然后再分配位置给它们，如果它们没有明确的`layout`指令。此外，程序中未使用的任何属性几乎肯定会被忽略并且不会分配位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T18:01:45.087

您可以使用调试器找出分配给您的属性的值：

```
positionAttribute = glGetAttribLocation(shaderProgram, "position"); 
```

# css - CSS：字体在 Chrome 上不起作用

> ID：15230223
> 
> 赞同：2
> 
> 时间：2013-03-05T17:24:26.740
> 
> 标签：css, fonts, font-face, truetype

我怎么知道为什么没有显示字体？

我在 Chrome - 所以 .ttf 应该可以工作。我检查了我是否可以使用我的 URL 栏导航到该文件，并且我可以下载它，所以权限很好。

我有一个声明@font-face 的页面：

```
@font-face {
  font-family: 'entypo';
  src: url('/css/fonts/entypo.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

p { font-family: 'entypo'; } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:34:06.153

@font-face 不能在一个块内。通常的做法是将它放在 CSS 文件的顶部。

您的来源：

```
#lookgram {
  @font-face {
    font-family: 'entypo';
    src: url("/entypo.eot");
    src: url("/entypo.eot?#iefix") format("embedded-opentype"), url("/entypo.woff") format("woff"), url("/entypo.ttf") format("truetype"), url("/entypo.svg#entypo") format("svg");
    font-weight: normal;
    font-style: normal;
  }

  @font-face {
    font-family: 'entypo_social';
    font-style: normal;
    font-weight: 400;
    src: url("/css/fonts/entypo-social.woff") format("woff");
  }

  margin: 0;
  font-family: "Helvetica Neue", Helvetica, Arial, "lucida grande", tahoma, verdana, arial, sans-serif;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T21:59:10.323

chrome 有一个与 web-font 相关的已知错误，因为我有类似的问题。值得注意的是[https://stackoverflow.com/questions/21984543/google-chrome-bug-website-not-displaying-text](https://stackoverflow.com/questions/21984543/google-chrome-bug-website-not-displaying-text)上的文章。这篇文章给出了一些想法，说明这个错误是如何发生的，而不是为什么发生 - 有时是相当随机的！

希望这可以帮助

# api - 如何检查 vimeo 视频是否是工作人员选择的？

> ID：15230226
> 
> 赞同：0
> 
> 时间：2013-03-05T17:24:34.887
> 
> 标签：api, vimeo

如何检查 vimeo 用户视频是否为员工选择。

示例：名称：Cristóbal Vila URL：http: [//vimeo.com/eterea](http://vimeo.com/eterea)

他有 34 个视频。其中一个视频是员工挑选的（视频 id= 57125220） [http://vimeo.com/57125220](http://vimeo.com/57125220)

我们如何检查特定用户的视频是否是staffpick？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:03:11.850

您需要向`Vimeo.videos.getAll`Vimeo Advanced API 的方法发送一个详细的经过身份验证的调用。

[https://developer.vimeo.com/apis/advanced/methods/vimeo.videos.getAll/playground](https://developer.vimeo.com/apis/advanced/methods/vimeo.videos.getAll/playground)

这将返回用户的视频，每个视频都包含一个标志，表明该视频是否为员工精选。

# c# - 是否可以绕过“指定的视觉对象已经是另一个视觉对象的子对象或 CompositionTarget 的根”异常？

> ID：15230229
> 
> 赞同：0
> 
> 时间：2013-03-05T17:24:49.877
> 
> 标签：c#, wpf, image, grid

我想在图像网格中移动图像（我的英雄）。当我删除它移动到的走廊并将英雄图像放置在那里时，代码执行得很好（英雄是网格中唯一的唯一图像）。但是当我在英雄之前的位置放置一个走廊图像时，我收到了上面提到的错误。我知道这是因为我喜欢 50 个其他走廊图像作为网格中的孩子，名称为“corridorImg”。

```
int newTileIndex = Image_Grid2.Children.IndexOf(heroImg) + map.mapWidth - 1;
int currentTileIndex = Image_Grid2.Children.IndexOf(heroImg);

Image_Grid2.Children.RemoveAt(currentTileIndex);
Image_Grid2.Children.RemoveAt(newTileIndex);

// Tried to solve issue by creating new Image by using clone of the corridor Image, but same exception
Image oldTileImage = new Image();
oldTileImage = corridorImg;             

Image_Grid2.Children.Insert(currentTileIndex, oldTileImage);
Image_Grid2.Children.Insert(newTileIndex, heroImg); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:06:20.013

我同意@HighCore，您应该为此使用 MVVM。

不过，您的具体问题是您实际上并没有克隆图像，您只是制作了一个新图像，然后覆盖了分配给它的变量。在倒数第二行中，您重新插入了原始的走廊Img，您只是将其称为oldTileImage。要真正克隆图像，您需要将其属性复制过来。如果您使用的是图像源，则如下所示：

```
Image corridorImgClone = new Image();
corridorImgClone.Source = corridorImg.Source; 
```

# excel - 循环几个列表框 vba

> ID：15230230
> 
> 赞同：0
> 
> 时间：2013-03-05T17:24:50.083
> 
> 标签：excel, for-loop, listbox, vba

我有以下代码，当然它不起作用，但我希望它表明我的意图。

```
Dim lItem As Long
Dim input_sh As Worksheet
Dim lb As ListBox
Set input_sh = ActiveWorkbook.Sheets("Input")
    For i = 1 To 4
        lb = "ListBox" & i
        For lItem = 0 To lb.ListCount - 1
            If lb.Selected(lItem) = True Then
                input_sh.Cells(1, 14 + i) = lb.List(lItem)
                lb.Selected(lItem) = False
            End If
        Next lItem
    Next i 
```

基本上我在用户窗体中有 4 个列表框，并且会使用 for 循环来获取所选项目，而不是为每个列表框设置一个 for 循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:17:16.623

这个问题在评论中得到了回答，但只是为了使它成为堆栈中少一个未回答的问题（最终在*接近投票*堆栈中）：

```
Dim input_sh As Worksheet
Dim lb As ListBox

Set input_sh = ActiveWorkbook.Sheets("Input")
For i = 1 To 4

    Set lb = Controls("ListBox" & i)

    ' object "lb" now contains a reference to the appropriate ListBox control.
    ' (do something with lb)

Next i 
```

这是 VB6 和 VBA 之间的区别之一：在 VBA 中不能有*控件数组*。在 VB6 中，您可以命名所有 ListBox，例如`MyListBox`，并给它们一个介于 1 和 4 之间的*索引*，使代码如下所示：

```
Dim lb As ListBox

For i = 1 To 4

    Set lb = MyListBox(i)

    ' object "lb" now contains a reference to the appropriate ListBox control.
    ' (do something with lb)

Next i 
```

# php - php 在函数中测试isset() 和empty()

> ID：15230233
> 
> 赞同：2
> 
> 时间：2013-03-05T17:24:55.483
> 
> 标签：php, isset

我正在尝试将 isset() 和 empty() 封装在一个函数中。

它在我的家庭开发服务器（Apache 2.4.3，WinXP 下的 PHP 5.2.17）上运行良好。当我将它移植到运行 Fedora 的大学 Linux 机器上时，我收到了关于未定义索引的通知。

我在家用电脑上检查了我的 php.ini，错误报告设置为全部。我把 error_reporting(E_ALL); 在我的 PHP 脚本中尝试复制错误。它没有发生。

问题 1：为什么我的家庭开发计算机上没有收到通知？

这是我的功能：

```
<?php
function there($s) {
    if (! isset($s)) {
        return false;
        }
    if (empty($s)) {
        return false;
        }
    return true;
}
?> 
```

这里我测试一个会话变量是否存在：

```
if (! there($_SESSION['u'])) {
    $_SESSION['u'] = new User();
    } 
```

我切换了我的函数，以便在测试 isset() 之前测试 empty() 认为这将避免收到通知。我还没有机会在学校测试这个。

问题 2：如果变量未定义或未设置，empty() 通常会避免发出通知吗？

问题 3：我可以使用 there() 函数来执行此操作，还是仅通过传递 undefined 或 unset 参数就能得到通知？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:27:48.157

`isset`并且`empty`不是函数，它们是语言结构。因此，他们可以摆脱诸如读取文字变量名之类的事情，而不是尝试访问该值。您定义的任何功能都无法做到这一点。

考虑到这一点，无需对两者进行测试。`empty`是 的超集`isset`，因此您只需要检查`empty`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T17:28:20.813

您的功能几乎等同于`!empty`：

```
if (empty($_SESSION['u'])) {
    $_SESSION['u'] = new User();
} 
```

唯一的区别是：如果你的包装函数传递了一个不存在的变量，你的包装函数会报错——而*语言结构* [`empty`](http://www.php.net/manual/en/function.empty.php)不会（也不会[`isset`](http://www.php.net/manual/en/function.isset.php)）。

## 您的子问题

> 为什么我的家庭开发计算机上没有收到通知？

可能是因为您关闭了[错误报告。](http://php.net/manual/en/function.error-reporting.php)

> 如果变量未定义或未设置，empty() 通常会避免发出通知吗？

是的。

> 我可以使用 there() 函数来执行此操作，还是仅通过传递 undefined 或 unset 参数来获得通知？

您将收到有关未定义变量的通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T18:16:03.697

作为证明@Kolink 的好回复的一种方式，这是我没有意识到的......

```
echo '<form action="" method=POST>
<input type=text value="" name="string" />
<input type=text value=0 name="int" />
<input type=submit />
</form>';

if( empty($_POST['string'] ) ){ 
var_dump( $_POST['string']) ;
}
if( empty($_POST['int'] ) ){ 
var_dump( $_POST['int']) ;
}
if( empty($_POST['something'] ) ){ 
echo 'something was not set, but you cannot var_dump it without a warning';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-08T12:00:41.243

我意识到这是一个旧线程，它已经有一个公认的答案。所以，我在这里不再回答这些问题。但为了完整起见，并希望它可以帮助其他人，我正在分享我使用的东西。看看下面的代码：

```
<?php
echo var_dump($_SESSION['something']); 
```

这会给你：

> PHP 注意：未定义变量：_SESSION in - on line 2
> 
> 空值

但如果你这样做：

```
<?php
echo var_dump(mycheck($_SESSION['something']));

function mycheck( &$var ){ // Note the & so we are passing by reference
    return $var;
} 
```

你会得到：

> 空值

这是因为在内部 $var 变量将在函数被调用的那一刻被创建。但是由于 $_SESSION['something'] 不存在，因此 $var 被设置为 null 然后返回。瞧，通知不见了。但请注意，变量 $_SESSION['something'] 现在已在内部创建，即使 isset($_SESSION['something']) 仍将返回 false，因为 isset 确定“是否设置了变量并且不是**NULL** ”。

isset 的 PHP 手册：http://php.net/manual/en/function.isset.php

# php - MySQL查询拉一行并显示结果的第一个字母

> ID：15230235
> 
> 赞同：1
> 
> 时间：2013-03-05T17:25:07.003
> 
> 标签：php, mysql

我想我需要一个基本的 PHP / MYSQL 刷新，因为没有什么对我有用。

我的 MYSQL 表有两行信息。

```
 $results = mysql_query("SELECT Name, Description FROM products");
 $results = mysql_fetch_assoc($results);
 print_r($results); 
```

打印时，我得到的只是一个结果。`Array ( [Name] => Banana [Description] => It's a lovely banana )`. 表中肯定有两个结果。为什么会这样？

其次，这个循环只返回每个结果的第一个字母，不知道为什么！

```
foreach($results as $res) {
?>
    Name : <?php echo $res['Name']; ?><br />
    Description : <?php echo $res['Description']; ?><br />

<?php } ?> 
```

今天我的大脑被严重扰乱了:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:27:27.080

```
while($res = mysql_fetch_assoc($results)){
?>
    Name : <?php echo $res['Name']; ?><br />
    Description : <?php echo $res['Description']; ?><br />

<?php } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:39:09.267

MySQL 已被弃用，您应该迁移到 PDO 或 MySQLi。要回答后者的问题，您应该使用准备好的语句（尽管在这种情况下它并不重要，因为您不需要清理查询）

```
$connection = new mysqli('localhost','root','pw','db');// start mysqli connection
$results = $connection ->prepare('SELECT Name, Description FROM products');// create the statement you want to work with
(object)array('Name'=>'','Description'=>'');// set up the variables you want to put retrieved data in
$results ->bind_result($res ->Name, $res ->Description);// attach the variables to the prepared statement
while($results ->fetch()){// execute the prepared statement
    // perform actions with $res->Name and $res ->Description
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:30:52.670

要回答您的第一个问题，这是因为`mysql_fetch_assoc()`一次只能从结果集中获取一行数据。通常，使用 while 循环来收集所有结果，如下所示：

```
$results = mysql_query("SELECT Name, Description FROM products");
$result_array = array(); // don't name this array the same as your result set ($results) or you will overwrite it.
while($row = mysql_fetch_assoc($results)) {
    $result_array[] = $row;
} 
```

老实说，我不知道为什么您只会回显每个字段的第一个字母。它只是在屏幕上出现这种方式对您的 HTML 结构有问题吗？换句话说，如果您查看 HTML 源代码，它是否正确显示？

# html - 删除附加到 URL 的额外部分

> ID：15230244
> 
> 赞同：-3
> 
> 时间：2013-03-05T17:25:32.277
> 
> 标签：html, anythingslider

我正在更新一个网站，我使用了一个插件，现在看来 url 有附加部分：`"#&panel1-1"`. 有没有办法删除这个哈希部分？

我的网站网址是：

```
http://www.auburn.edu/student_info/nsa/index.html#&panel1-1 
```

我想将该网址更改为

```
http://www.auburn.edu/student_info/nsa/index.html 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:36:30.003

根据插件的[演示页面](http://css-tricks.com/examples/AnythingSlider/)，您可以通过初始化它来摆脱 URL 中的哈希：

```
$('#slider').anythingSlider({{hashTags: false}); 
```

# android - 移除系统栏上方的蓝线

> ID：15230247
> 
> 赞同：0
> 
> 时间：2013-03-05T17:25:41.560
> 
> 标签：android, android-theme

在我的应用程序和系统栏之间出现一条细蓝线（我猜来自 Holo 主题），因此基本上在系统栏上方。

我该如何隐藏它？

PS：我说的是系统栏（带有主页和返回按钮），而不是操作或状态栏。

**编辑**

这发生在装有 Android 4.0.3 的三星 Galaxy Tab 2 10'' 上。

![蓝线截图](../Images/4bc7e821fd6b8a3b29d22a4b2cbf9ef3.png)

# python - 多个出口是否可以展平长 Python 函数？

> ID：15230252
> 
> 赞同：4
> 
> 时间：2013-03-05T17:25:57.957
> 
> 标签：python, coding-style

我有一个很长的那个结构的 Python 函数：

```
def the_function(lots, of, arguments):

    return_value = None

    if some_important_condition:

        # a lot of stuff here

        return_value = "some value"

    else:

        # even more stuff here

        return_value = "some other value"

    return return_value 
```

一个问题是 the`if`和`else`block 都包含不止一屏的代码。很容易忘记缩进，或者不得不向上滚动查看我们目前处于什么状态。

改进这一点的一个想法是将其拆分为几个功能：

```
def case_true(lots, of, arguments):

    # a lot of stuff here

    return "some value"

def case_false(lots, of, arguments):

    # even more stuff here

    return "some other value"

def the_function(lots, of, arguments):

    return_value = None

    if some_important_condition:

        return_value = case_true(lots, of, arguments)

    else:

        return_value = case_false(lots, of, arguments)

    return return_value 
```

但考虑到争论的杂耍，我不确定这是否能解决问题。

另一个想法是使用多个退出点：

```
def the_function(lots, of, arguments):

    if some_important_condition:

        # a lot of stuff here

        return "some value"

    # even more stuff here

    return "some other value" 
```

但是有几种编码风格建议不要使用多个退出点，尤其是当它们隔着屏幕时。

问题是：使原始结构更具可读性和可维护性的首选pythonic方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T17:27:56.120

在一个函数中有多个出口点是非常好的，只有一个出口点的要求是一个古老的约定，可以追溯到编程语言没有异常处理的时代，只有一个出口点是有意义的集中错误处理。例外的存在使旧的约定过时了。

在某些情况下，*即使*在执行单个函数退出点策略时，也可以选择多个退出点 - 例如，函数顶部的[保护子句](http://c2.com/cgi/wiki?GuardClause)需要从函数快速返回“如果参数错误，或者大部分函数显然是不合适的”，在这种情况下，“在完成任何有意义的工作之前从顶部退出是很有意义的。否则，您将需要覆盖大部分函数的大量 if 语句，给出你又是另一个级别的缩进”。

为了完整起见，这里有一个扩展我的观点的[解释。](http://c2.com/cgi/wiki?SingleFunctionExitPoint)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T18:40:07.697

黄金法则是：一个函数可以有多个返回点，但**只要提高可读性**，如果你的代码如此庞大，返回和复制到一个变量中恐怕没有任何区别回来。

我认为您的问题更多是关于您的例程的设计、抽象级别和语义。

这些问题可能会对您有所帮助：

*   例程是否具有功能凝聚力？即：它只做一件事。不像计算收入，打印它们，将它们发送到服务器并与狗一起散步。

*   该函数是否有超过 7 个参数？如果是这样，很可能您的例程的抽象级别不合适。

如果你发布更多关于你的例程细节的信息（它做什么，它返回什么，什么参数），这将会有所帮助。这可能是你最好使用两个类......

但是，作为一般性答案，我会说您最好分析各个操作，将它们分解为具有良好内聚力的小函数，然后将您的函数变成这些小函数的顺序调用者，而不是让它完成工作。并且只有 case_true 和 case_false 两个函数的方法可能是错误的，因为很可能您在两个函数中都有相似的操作（对于 true 和 false）并且您对它们进行了两次编码。

# asp.net-mvc-4 - 在 mvc4 中查看属性

> ID：15230253
> 
> 赞同：0
> 
> 时间：2013-03-05T17:26:01.110
> 
> 标签：asp.net-mvc-4

我有一个 mvc4 c# razor web 应用程序。是否可以添加可以从视图中获得的属性？

像 System.Security.Principal 的“用户”。我可以开始在视图代码中编写以下内容：

```
@if(User.Identity) ... bla bla bla 
```

我有一堂课：

```
public class UserModel
{
   public int UserId { get; set; }
   public int CustomerId { get; set; }
   public string UserName { get; set; }
} 
```

现在我在 BaseController 类中有一个名为“UserInfo”的属性，所有控制器都从该属性继承。编码 ：

```
public UserModel UserInfo
{
    get {
        if (_userInfo == null)
        {
          ...fill user info
        }
        return _userInfo;
    }
} 
```

我不想将它作为@model 传递，但仍然可以在视图@UserInfo 上使用它我该怎么做？

# html - Html5 视频在两个选项卡中不起作用

> ID：15230254
> 
> 赞同：1
> 
> 时间：2013-03-05T17:26:03.213
> 
> 标签：html, google-chrome, html5-video

我试图在我的浏览器（chrome）中查看 2 个 html5 视频，但我只能在一个标签中播放。有什么解决办法吗？这是一个类似的问题，但它没有给我正确的答案[创建两个具有相同来源的 HTML5 视频元素不起作用](https://stackoverflow.com/questions/10445748/creating-two-html5-video-elements-with-the-same-source-not-working)。

如果您不理解我的问题，请尝试在两个选项卡中打开此链接，您会看到第一个播放但第二个不播放。 [http://videos.mozilla.org/serv/webmademovies/aboutmozilla640x360.mp4](http://videos.mozilla.org/serv/webmademovies/aboutmozilla640x360.mp4)

# compass-sass - 在 Sass 中包含使用变量作为名称的 mixins

> ID：15230256
> 
> 赞同：7
> 
> 时间：2013-03-05T17:26:21.783
> 
> 标签：compass-sass, sass, mixins, css-animations

我正在尝试使用变量作为名称来调用 mixin，如下所示：

`@include $mixin-name;`

## 好像没那么难...

我在网上看到一些人提到想要这样做。这张票（[http://dev.vaadin.com/ticket/9546](http://dev.vaadin.com/ticket/9546)）说“已修复”，我认为这意味着在 Sass 3.2 中这是可能的，但来自 Google Groups 上的 Sass 小组的评论似乎另有说明：[http ://goo.gl/HtdHu](http://goo.gl/HtdHu)

我明白他们在说什么，似乎很多提出问题的人可以很容易地以另一种方式解决他们的问题。

不过，我想不出另一种方法来解决我的问题，所以让我解释一下，也许有人可能有一两个想法？

## CSS动画

我创建了一个 mixin，`@keyframes`以便我可以调用`@include animation();`并获取前缀和官方的完整列表`@keyframes`

```
@include keyframes(reveal) {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
} 
```

给我：

```
@-webkit-keyframes reveal {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@-moz-keyframes reveal {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@-ms-keyframes reveal {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@-o-keyframes reveal {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes reveal {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
} 
```

太棒了！`transform`但是，如果我在关键帧状态之一中使用 Compass ：

```
@include keyframes(round) {
    from {
        @include transform(rotateZ(-145deg));
        opacity: 1;
    }
    to {
        @include transform(rotateZ(-45deg));
        opacity: 0.5;
    }
} 
```

然后我最终得到类似的东西：

```
@-webkit-keyframes round {
    from {
        -webkit-transform: rotateZ(-145deg);
        -moz-transform: rotateZ(-145deg);
        -ms-transform: rotateZ(-145deg);
        -o-transform: rotateZ(-145deg);
        transform: rotateZ(-145deg);
        opacity: 1;
    }
    to {
        -webkit-transform: rotateZ(-45deg);
        -moz-transform: rotateZ(-45deg);
        -ms-transform: rotateZ(-45deg);
        -o-transform: rotateZ(-45deg);
        transform: rotateZ(-45deg);
        opacity: 0.5;
    }
} 
```

ETC...

## 前缀内的前缀

所以，我知道这是迂腐的，但是我声明真的很烦人`-webkit-animation`，但是当我想要做的只是声明与关键帧和官方相同的前缀时，我必须在里面声明所有前缀，例如：

```
@-webkit-keyframes round {
    from {
        -webkit-transform: rotateZ(-145deg);
        transform: rotateZ(-145deg);
        opacity: 1;
    }
    to {
        -webkit-transform: rotateZ(-45deg);
        transform: rotateZ(-45deg);
        opacity: 0.5;
    }
}

@-moz-keyframes round {
    from {
        -moz-transform: rotateZ(-145deg);
        transform: rotateZ(-145deg);
        opacity: 1;
    }
    to {
        -moz-transform: rotateZ(-45deg);
        transform: rotateZ(-45deg);
        opacity: 0.5;
    }
} 
```

ETC...

## 混合问题

所以，我用`@include experimental-value`.

```
@function browser-is-prefix($browser, $prefix) {
    @if $browser == $prefix {
        @return true;
    } @else {
        @return false;
    }
}

@mixin transform-prefix($transform, $browser) {
    @include experimental-value(transform, $transform,
        browser-is-prefix($browser, -moz),
        browser-is-prefix($browser, -webkit),
        browser-is-prefix($browser, -o),
        browser-is-prefix($browser, -ms),
        false, true);
}

@mixin animation-name($browser) {
    from {
        @include transform-prefix(transform(translate(-25px,200px) scale(0.5)), $browser);
        opacity: 0;
    }
    to {
        @include transform-prefix(transform(translate(0,0) scale(0.5)), $browser);
        opacity: 1;
    }
} 
```

打电话`@include animation-name(-webkit)`会很好，给我们：

```
@-webkit-keyframes animation-name {
    from {
        -webkit-transform: translate(-25px,200px) scale(0.5);
        transform: translate(-25px,200px) scale(0.5);
        opacity: 0;
    }
    to {
        -webkit-transform: translate(0,0) scale(0.5);
        transform: translate(0,0) scale(0.5);
        opacity: 1;
    }
} 
```

## 但我不能自动化它！

为了自动化这个过程，我希望能够调用一个 mixin，类似于上面的mixin 所做的事情，除了盲目地包含 the 之外，它将包含 mixin`@include prekeyframes(animation-name);`并且只使用它应该基于什么的前缀@keyframes 的前缀有：`prekeyframes``keyframes``@content`

```
@mixin prekeyframes($name) {
    $prefixes : -webkit-, -moz-, -o-, -ms-, '';
    @each $prefix in $prefixes {
        @include $name($prefix);
    }
} 
```

当然，这会引发错误。如果我插入`$name`( `@include #{$name}($prefix)`)，它仍然是一个问题。

所以，我可以忍受额外的`transform`值，或者我可以手动完成，但我一直对 Sass 的灵活性印象深刻，这似乎真的限制了我......

## 总结一下：

*   我想在一个地方定义一次动画。
*   我希望能够`@include transform`在那个动画中。
*   我希望在正确前缀`transform`内正确添加前缀`@keyframes`

我现在已经花了几个小时，我会继续摆弄......但如果有人有类似的经历或问题，我很想知道......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:00:45.257

查看[Bourbon](http://bourbon.io/)（相关[代码](https://github.com/thoughtbot/bourbon/blob/master/app/assets/stylesheets/css3/_keyframes.scss)和[文档](http://bourbon.io/docs/#keyframes)），这太棒了。

# c# - MouseLeave 未触发 C# WinForms

> ID：15230257
> 
> 赞同：2
> 
> 时间：2013-03-05T17:26:35.773
> 
> 标签：c#, winforms, events, mouseleave

我有一个带有 2 个按钮的用户控件，只有当鼠标在控件区域内时才应该可见。

我正在显示这样的按钮：

```
private void Node_MouseEnter(object sender, EventArgs e)
{           
    btn1.Show();
    btn2.Show();
} 
```

并像这样隐藏：

```
protected override void OnMouseLeave(EventArgs e)
{
    if (this.ClientRectangle.Contains(this.PointToClient(Control.MousePosition)))
        return;
    else base.OnMouseLeave(e);
}

private void Node_MouseLeave(object sender, EventArgs e)
{  
    btn1.Hide();
    btn2.Hide();
} 
```

问题是有时（随机情况）`MouseLeave`事件不会被触发，并且按钮保持可见，即使鼠标在控件之外。

是否有可能多个事件发生冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:05:47.220

正如此链接所述[：](https://stackoverflow.com/questions/4561267/can-we-change-event-routing-strategy-in-windows)

> *鼠标移动消息不够准确，它们不能保证报告每个遍历的像素。当您有一个靠近其父窗口边缘的子窗口时，当您移动鼠标足够快时，很容易无法为父窗口获取 MouseEnter。*

所以，解决方案是只监听`MouseEnter`事件，当这个事件被触发时，我向其他控件发送通知，以隐藏其按钮。

不是最优雅的解决方案，但它按预期工作。

# excel-formula - 2013 年医疗保险税公式

> ID：15230259
> 
> 赞同：0
> 
> 时间：2013-03-05T17:26:38.190
> 
> 标签：excel-formula

我正在尝试创建一个 Excel 公式，该公式将在特定单元格中输入一个数字（为了便于参考，我将使用 B6），并执行以下操作：

> 如果 B6 小于或等于 $200,000，则 B6 * 1.45% AND 如果 B6 大于 $200,000，则 (($200,000*1.45%)+(每超过 $200,000 * 2.35%))

例如，如果 B6 = 225,000 美元，那么前 200,000 美元将乘以 1.45%，剩余的 25,000 美元将乘以 2.35%。（将两个计算加在一起）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:49:38.807

```
=IF(B6<=200000, B6*0.0145, (200000*0.0145) + ((B6-200000)*0.0235)) 
```

公式的结构`IF`基本上是`IF(condition, trueResult, falseResult)`

您也可以将 替换`(200000*0.0145)`为常数`2900`，但我包括了完整的计算以进行说明。

# internet-explorer - TYPO3：在使用自定义样式期间，RTE htmlArea 在 IE 中移动光标

> ID：15230260
> 
> 赞同：1
> 
> 时间：2013-03-05T17:26:39.423
> 
> 标签：internet-explorer, html-lists, typo3, rte

我在基于 TYPO3 的网站上有一个奇怪的行为。当我登录到站点的后端并尝试编辑文本部分的某个块元素时，Internet Explorer 会在鼠标悬停时显示移动光标。在这种情况下，它是一个 li 元素，以前使用自定义样式设置样式。一旦父 ul - 元素获得它的特殊类（这通过在下拉列表中选择适当的块样式来实现），IE 就会让自己发疯。

我已经尝试通过激活各种 TSConfig 属性来摆脱这种情况。但到目前为止，似乎没有任何帮助。

设置

```
disableAlignmentFieldsetInTableOperations = 1
disableSpacingFieldsetInTableOperations = 1
disableColorFieldsetInTableOperations = 1
disableLayoutFieldsetInTableOperations = 1
disableBordersFieldsetInTableOperations = 1
## Show borders on table creation
buttons.toggleborders.setOnTableCreation = 1 
```

到目前为止没有帮助。

有没有人有相同或类似的问题？你是怎么摆脱它的？

非常感谢。
西奥帕萨斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:17:48.983

我不知道这是否是您的情况，但由于 htmlArea 加载的 CSS 文件中的某些属性，可能会发生这种行为：`RTE.default.contentCSS`

我无法告诉您在哪些版本的 IE 中会发生这种情况（我可以在 IE 7 中重现它），而且我不知道可能导致这种情况的所有属性，但我知道例如`min-height`可能会触发这种情况。

因此，首先通过删除属性来调试 CSS。**确保浏览器在每次更改后和再次打开 RTE 内容之前加载文件的新版本！**（在新选项卡中打开文件以检查浏览器使用的内容）

# html - 使用 inline-table 或 inline 块时的 5px 额外边距

> ID：15230262
> 
> 赞同：0
> 
> 时间：2013-03-05T17:26:50.890
> 
> 标签：html, css

[http://jsfiddle.net/xarq5/](http://jsfiddle.net/xarq5/)

```
 <div id="hello">
      <ul>
          <li>Hello</li>
          <li>Hello</li>
      </ul>
 </div> 
```

和上面 html 的 css

```
 #hello{
     margin:0px;
     padding:0px;
     border:1px solid black;
     float:left;
  }
  #hello ul{
      position:relative;
      display: inline-block;
      list-style:none;
      margin:0px;
      padding:0px;
  } 
  #hello li{
       float:left;
  } 
```

对于上面的 html 和 css，我总是为 ul 元素获得额外的 5px 边距。

在逐行仔细检查我的代码中的每个 css 语句并编写上面的示例之后，我能够发现问题是由于

```
 display:inline-block;
    or
    display:inline-table; 
```

克服这个问题的正确方法是什么？

其他一些论坛建议使用

“设置字体大小：0；用于父容器和字体大小：your_size；用于子容器。”

是否有任何其他解决方案可以防止这种情况，以便我的 0 字体大小不会级联到孩子。

谢谢斯里坎特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T17:32:04.637

添加`vertical-align: middle;`到`#hello ul`将摆脱底部不受欢迎的“填充”。

[http://jsfiddle.net/xarq5/1/](http://jsfiddle.net/xarq5/1/)

默认的垂直对齐通常是`baseline`，它指的是没有下降线的字母的底部边缘（“a”或“B”没有下降线，但“y”或“g”有）。下面的小提琴使不受欢迎的“填充”的来源更加明显。它根本不是填充，而是为文本的下行保留空间。

[http://jsfiddle.net/xarq5/11/](http://jsfiddle.net/xarq5/11/)

```
p {
    border: 1px solid;
}

p.aligned img {
    vertical-align: text-bottom;
}

<p>Something texty <img src="http://placehold.it/50x50" /></p>

<p class="aligned">Something texty <img src="http://placehold.it/50x50" /></p> 
```

* * *

如果问题是inline-block/inline-table 元素*之间*发生了不希望的间距，并且您不希望您的源代码看起来像一个巨大的连续句子，那么您可以使用注释。

```
<ul>
    <li>a</li><!--
    --><li>b</li>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:38:01.100

试试[http://jsfiddle.net/xarq5/10/](http://jsfiddle.net/xarq5/10/)

```
#hello{
    float: left;
} 
```

和

```
#hello ul {
    float: left
} 
```

**解释：**每当你有一个包含其他浮动元素的 html 元素时，包含元素不会完全“包含”浮动元素，除非它本身是浮动的。

**注意：**与[此](https://stackoverflow.com/a/15230353/766570)答案不同，您可以保持 html 原样缩进（即不必担心间距或缺少间距）：

```
<body>   
    <div id="hello">
        <ul>
            <li>Hello</li>
            <li>Hello</li>
        </ul>
    </div>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:33:48.433

`li`如果您不想要任何空间，请确保您还将 设置为没有边距或填充。尝试将其设置为`inline`仅。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T06:15:33.923

您还可以`display: block;`将`ul`元素设置`display: inline-block;`为`li`元素。

# c# - AjaxControlToolit HTMLEditorExtender 不会在最终提交的文本中添加粗体、斜体、下标和上标标签

> ID：15230265
> 
> 赞同：0
> 
> 时间：2013-03-05T17:26:53.327
> 
> 标签：c#, asp.net, ajax, ajaxcontroltoolkit, htmleditorextender

我在我的网站中使用 AjaxControlToolkit 的 HTMLEditorExtender 作为：

```
<asp:TextBox ID="TextBox2" runat="server" Width="90%" Rows="20" 
 TextMode="MultiLine" Wrap="False" BorderStyle="Solid" BorderWidth="2px" 
 Font-Names="Arial" Font-Size="Medium" ></asp:TextBox>

<asp:HtmlEditorExtender ID="TextBox2_HtmlEditorExtender" runat="server" Enabled="True" TargetControlID="TextBox2">
                   <Toolbar>
                   <asp:Undo />
                   <asp:Redo />
                   <asp:Bold />
                   <asp:Italic />
                   <asp:Underline />
                   <asp:StrikeThrough />
                   <asp:Subscript />
                   <asp:Superscript />
                   <asp:InsertOrderedList />
                   <asp:InsertUnorderedList />
                   <asp:RemoveFormat />
                   <asp:SelectAll />
                   <asp:UnSelect />
                   <asp:Delete />
                   <asp:Cut />
                   <asp:Copy />
                   <asp:Paste />
                   <asp:Indent />
                   <asp:Outdent />
                   <asp:FontNameSelector />
                   </Toolbar>
</asp:HtmlEditorExtender> 
```

但问题是，每当我在文本框中写入文本并将某些字符标记为粗体、斜体、下标或上标时，它会删除它们并在没有这些标签的情况下存储在数据库中。因此，当我获取要在页面上显示的数据时，除了这四个之外，所有标签都可以正常工作。请告诉我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-06T12:36:13.493

确保您从扩展器中获取文本，而不是文本框。使用此文本保存到数据库：

```
Dim myHTMLText as string 
myHTMLText =TextBox2_HtmlEditorExtender.text 
```

如果您已经在这样做，请发布您的代码隐藏以便我们查看。

# assembly - 获取 EAX 寄存器的上半部分

> ID：15230268
> 
> 赞同：6
> 
> 时间：2013-03-05T17:27:00.760
> 
> 标签：assembly, x86

在x86汇编语言中，有没有办法获取`EAX`寄存器的上半部分？我知道`AX`寄存器已经包含寄存器的下半部分`EAX`，但我还不知道有什么方法可以获得上半部分。

我知道这`mov bx, ax`会将下半部分`eax`移入`bx`，但我也想知道如何将上半部分`eax`移入`bx`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T18:26:45.747

*如果*要保留 EAX 和 EBX 的上半部分：

```
rol eax, 16
mov bx, ax
rol eax, 16 
```

如果有可用的暂存寄存器，则效率更高（并且不会为以后读取 EAX 的指令引入额外的延迟）：

```
mov ecx, eax
shr ecx, 16
mov  bx, cx 
```

* * *

如果您不需要其中任何一个，`mov ebx, eax`/`shr ebx, 16`是显而易见的方法，可以避免任何[部分注册停滞或错误依赖](https://stackoverflow.com/questions/41573502/why-doesnt-gcc-use-partial-registers)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-05T19:58:35.520

如果您不介意将`bx`( 的低 16 位`ebx`) 的原始值移动到 的高 16 位`ebx`，则只需要 1 条指令：

```
shld ebx,eax,16 
```

这不会修改`eax`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-05T18:12:34.410

我会这样做：

```
mov ebx,eax
shr ebx, 16 
```

ebx 现在包含 eax 的前 16 位

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-15T14:30:37.643

对于 16 位模式，这是最小（不是最快）的代码：只有 4 个字节。

```
push eax  ; 2 bytes: prefix + opcode 
pop ax    ; 1 byte: opcode
pop bx    ; 1 byte: opcode 
```

`shld ebx,eax,16`它甚至比占用 5 个字节内存的单指令更紧凑。

# c++ - 有没有办法加快对以下表达式的评估？

> ID：15230270
> 
> 赞同：0
> 
> 时间：2013-03-05T17:27:06.880
> 
> 标签：c++, math, optimization, math.h

我已经分析了我的程序，它花费了 20% 的 CPU 时间，基本上评估以下表达式：

```
abs(x) > abs(y) 
```

其中 x,y 是双精度浮点变量。

有没有办法将表达式重构为更快的变体？

以下行（在两个不同的地方调用）在每行占用接近 10% 的 CPU 时间：

（这是 Image_3::TestGradientAtPoint 函数的片段）

```
 if (abs(maxx[ch]) < abs(a)) maxx[ch] = a; 
01187AC9  mov         eax,dword ptr [ch]  
01187ACC  sub         esp,8  
01187ACF  fld         qword ptr [ebp+eax*8-68h]  
01187AD3  fstp        qword ptr [esp]  
01187AD6  call        abs (11305F9h)  
01187ADB  fld         qword ptr [ebp-70h]  
01187ADE  fstp        qword ptr [esp]  
01187AE1  fstp        qword ptr [ebp-0F8h]  
01187AE7  call        abs (11305F9h)  
01187AEC  add         esp,8  
01187AEF  fcomp       qword ptr [ebp-0F8h]  
01187AF5  fnstsw      ax  
01187AF7  test        ah,41h  
01187AFA  jne         Image_3::TestGradientAtPoint+176h (1187B06h)
01187AFC  mov         eax,dword ptr [ch]  
01187AFF  fld         qword ptr [ebp-70h]  
01187B02  fstp        qword ptr [ebp+eax*8-68h] 
```

分析器表示对 abs() 的调用占用了 20% 的 CPU 时间。我以 10^8 次迭代的顺序调用该方法 - 我正在处理大图像。

## 编辑

我忘了说，但代码是在调试模式下运行的，我需要在这里对其进行一些优化，因为我希望仍然能够在合理的时间内使用 MSVC 调试器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T18:06:13.927

这可能不会更快，但如果算术表达式的计算速度更快：

```
if ((x - y) * (-x - y) < 0)
    // then abs(x) > abs(y) 
```

我相信这将表达式的数量固定为 3（​​2 算术表达式和比较为零）而不是来自 abs 方法的 3 表达式（每个 abs 检查是否为负，反转符号，否则只返回值然后比较每个 abs）

编辑：

正如安德烈所说，你总是可以明确地平方浮动。回想起来更有意义。

```
if (x * x > y * y)
    // then abs(x) > abs(y) 
```

因为 (xy)(-xy) = y^2-x^2

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T17:56:49.977

告诉你的编译器进行优化。在 GCC 或 clang 中，您可以使用`-O2`or`-O3`标志来执行此操作——后者更具侵略性。在 MSVC 中，您可以使用`/O2`or`/Ox`标志（IIRC；我很少使用该编译器）。如果不启用优化，您不能指望 100000000 次迭代能够快速运行。

如果您想在不开启优化的情况下进行调试，但仍在合理的时间范围内，请尝试使用较小的数据集；或者正如 Mysticial 提到的，在打开优化的情况下进行调试，并在调试器中接受随机变化的值和其他神秘的观察结果。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-05T17:42:36.890

好吧，如果它的顺序`maxx[]`不重要，您可以对其进行排序，我认为它会更快。

另一件事是，如果“a”对于`maxx[]`你所能做的一切都是一样的`a= abs(a);`，然后直接与 a 进行比较。

我需要查看更多代码以尝试为您提供更多帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T17:50:32.403

这可能不会更快，但另一个合乎逻辑的版本是：

```
// logical replacement for abs(x) > abs(y)
x >= 0 ? 
    y >= 0 && x > y :
    y <= 0 && x < y ; 
```

由于它只使用比较器和分支，它*可能*会更快，但不能保证......

如果没有，请尝试使用，`fabs`因为它是为浮点数设计的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-05T17:52:14.973

首先要检查的是您实际上是在启用优化。如果不是，那么您的编译器可能没有内联调用，从而导致您注意到它的足够开销。

如果我怀疑您实际上启用了优化，那么您将不得不采用算法方法。我想不出你能做些什么`abs`来让它更快。

因此，您需要考虑以下事项：

*   您是否关心原始的负数，或者您可以预先过滤数据以确认`abs`它？
*   你在乎订单吗？你能对数据进行排序以改进你的算法吗
*   您是否`abs`在循环中多次计算不变值？

# twitter-bootstrap - Twitter Bootstrap 字形图标

> ID：15230275
> 
> 赞同：0
> 
> 时间：2013-03-05T17:27:20.960
> 
> 标签：twitter-bootstrap, glyphicons

我相信我有正确的文件路径，但我仍然无法让字形图标出现。我已经分享了该网站的链接和其他信息。

文件路径`../assets/img/glyphicons-halflings.png`

*   assets 包含 css 文件和 JS 文件
*   我更改了给定引导 css 文件中的文件路径以匹配（添加资产）。

这是标记

```
<h2 class="centeralign">
    <a class="large" href="mailto:t.grass@computer.org">
        <i class="icon-envelope"></i>Email Me: t.grass@computer.org
    </a>
</h2>
<h2 class="visible-phone centeralign">
    <a href="tel:4192330955">
        <i class="icon-phone"></i> 
        Call Me: 419.233.0955
    </a>
</h2>
<h2 class="hidden-phone centeralign">
    <i class="icon-phone"></i> Call Me: 419.233.0955
</h2>  
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:39:39.360

> ../assets/img/glyphicons-halflings.png *assets 包含 css 文件和 JS 文件 *

如果 bootstrap 的 css 文件在`assets`文件夹中，那么您是在不必要地遍历目录。只需删除`../assets/`.

```
img/glyphicons-halflings.png 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-05T13:40:03.837

更改默认文件夹层次结构通常会导致此类问题。字体和引导文件夹应该在同一级别的文件夹中。查看另一个类似的问题： [Bootstrap loading wrong glyphicon](https://stackoverflow.com/questions/22583025/bootstrap-loading-wrong-glyphicon)

# api - YouTube iframe API - onReady 和 onStateChanged 事件未在 IE9 中触发

> ID：15230279
> 
> 赞同：3
> 
> 时间：2013-03-05T17:27:40.603
> 
> 标签：api, events, iframe, youtube, internet-explorer-9

几个小时以来，我一直在排除故障并寻找答案，但无济于事。正在逐字使用 API 文档中的示例代码。其他人发布并说适用于 IE9 的示例代码不适合我。我已经确认在 html 中正确设置了 doctype，我没有在 CSS 中使用 display=none 隐藏 iframe，浏览器模式是 IE9，文档模式是 IE9 标准。我的安全设置配置为中高。甚至 google 的示例页面在我的 IE9 浏览器中也不适合我。

[https://developers.google.com/youtube/youtube_player_demo](https://developers.google.com/youtube/youtube_player_demo)

当我单击“播放”尝试播放电影时（在上面的链接中），我在 IE 的脚本调试控制台中收到各种错误。第一个错误如下所示：

SCRIPT5009：“视频”未定义

请帮忙！我的示例代码如下。电影加载，我看到“API 准备就绪”警报，但在 IE9 中不会触发任何其他事件。我只是不知道我错过了什么！如果我不能很快解决这个问题，我将不得不放弃在我的项目中使用 YouTube 播放 html5 视频。

```
<!DOCTYPE html>
<html>
  <head><title></title></head>
  <body>
    <!-- 1\. The <iframe> (and video player) will replace this <div> tag. -->
    <div id="player"></div>

    <script type="text/javascript">
        // 2\. This code loads the IFrame Player API code asynchronously.
        var tag = document.createElement('script');

        // This is a protocol-relative URL as described here:
        //     http://paulirish.com/2010/the-protocol-relative-url/
        // If you're testing a local page accessed via a file:/// URL, please set tag.src to
        //     "https://www.youtube.com/iframe_api" instead.
        //tag.src = "//www.youtube.com/iframe_api";
        tag.src = "https://www.youtube.com/iframe_api";
        //tag.src = "http://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        // 3\. This function creates an <iframe> (and YouTube player)
        //    after the API code downloads.
        var player;
        function onYouTubeIframeAPIReady() {
            alert("API is ready!");
            player = new YT.Player('player', {
                height: '450',
                width: '800',
                videoId: 'mU7aJgvh9K8',
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        // 4\. The API will call this function when the video player is ready.
        function onPlayerReady(event) {
            event.target.playVideo();
            alert("Player is ready!");
        }

        // 5\. The API calls this function when the player's state changes.
        //    The function indicates that when playing a video (state=1),
        //    the player should play for six seconds and then stop.
        var done = false;
        function onPlayerStateChange(event) {
            alert("State changed!");
            if (event.data == YT.PlayerState.PLAYING && !done) {
                setTimeout(stopVideo, 6000);
                done = true;
            }
        }
        function stopVideo() {
            player.stopVideo();
        }
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T14:53:19.833

好吧，在同事的机器上测试并意识到问题是特定于我系统上的 IE 之后，我开始再次查看浏览器设置。一时兴起，我禁用了我的 Flash 播放器（在 Internet 选项、程序、管理加载项下）和 viola，视频代码就像一个魅力。我还注意到我的 Flash 播放器已经过时（9.0.45.0），安装最新版本的播放器后它仍然可以工作。

不知道为什么旧的 Flash 播放器会干扰 YouTube API 和事件 - 但显然这是罪魁祸首。

# google-maps - 使 Infowindow 表现得像模态窗口（Google Maps API v3）

> ID：15230281
> 
> 赞同：1
> 
> 时间：2013-03-05T17:27:43.980
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers, google-maps-mobile

有没有办法让 Google Maps InfoWindow 的行为更像一个模态窗口？这是我的目标：

*   占据屏幕的全部或大部分宽度和高度
*   单击标记时不要自动移动地图

如果有人能指出我实现这些目标的正确方向，将不胜感激。谢谢！

谷歌地图 API v3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:12:25.603

根据它的声音，您将不得不制作自定义模式而不是使用信息窗口。

我建议你看看使用 Bootstrap 来实现这一点。在文档中，他们通过示例很好地解释了如何使用模态。它的样式也非常漂亮。

尽管如果您希望它占据大部分屏幕空间，则可能需要完全自定义构建您的模态。

然后，您可以在单击事件上隐藏（）/显示（）您的自定义模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T21:20:01.433

其实很简单。忽略地图信息框，只需在 html 中放置一个额外的 div，固定位置为 0,0，宽度和高度为 100%。

将其隐藏在您的 CSS 中，然后使用您的标记“点击”事件功能，显示 div 并将您的内容插入其中。

全屏完成。

# delphi - 是否有保留字体文本纵横比的缩放 Delphi FireMonkey 布局策略？

> ID：15230284
> 
> 赞同：2
> 
> 时间：2013-03-05T17:27:49.753
> 
> 标签：delphi, layout, scaling, firemonkey

多年来，我一直使用 VCL 表单应用程序布局策略来自动调整主表单上的表单控件的大小。用户可以使用与按钮布局、图表等相同的一般外观和感觉随意最大化或调整应用程序的大小。为此，我编写了代码来根据表单的 FormResize 事件来操作子控件的 BoundsRect，并且这种简单的技术保留了文本字体大小和纵横比（例如按钮）。我还有更简单的代码来提高和降低字体大小以跟踪主控件的扩展和缩小按钮/标签大小，但是当应用程序最小化时，许多控件（例如 TChart）留下了可读的小字体——我很高兴有了这个。

我想迁移我的布局以使用具有 TScaledLayout 的 FireMonkey，当您将其对齐 alClient 时，它会整齐地调整其所有包含的控件的大小。不幸的是，调整大小也扩展到所有文本字体，这确实是不可取的。将 TScaledLayout 设置为 alFit 会保持内容的原始纵横比，但可能会导致顶部或侧面的空白填充以实现此目的。

有什么方法可以在 TScaledLayout 操作下“关闭”所有字体的大小调整？我已经探索了[FireMonkey Layouts Strategies](http://docwiki.embarcadero.com/RADStudio/XE3/en/FireMonkey_Layouts_Strategies)中的信息，并且还尝试了每个大大增加的“对齐”设置，但均未成功。在各种显示设备之间移动时使用全屏肯定需要这种能力吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-26T14:28:05.410

想想像投影仪上的透明层（还记得那些吗？）。将文本标签放在表单上的面板上。将 scaledlayout 放在面板上。将控件放在 scaledlayout 上。现在，当窗体调整大小时，控件也会这样做，但标签不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-26T10:52:35.703

可以尝试以下策略：

*   使用 ScaledLayout 并将其 Align 属性设置为 Fit。我想您还必须在其子项上使用 Align := None 和 no Anchors。
*   将它放在面板内并将其设置为 Align:=Client。
*   将面板放置在表单中

* * *

就我而言，我想在 TScrollBox 布局内制作一个可缩放面板（保留纵横比），因此我在该面板上使用 Align:=Center 并以编程方式设置其缩放比例以进行缩放。

请注意，Embarcadero 的 ScaledLayout 示例在这种情况下具有误导性，因为它设置了 ScaledLayout 的比例（这与 ScaledLayout 在调整大小时的子级缩放功能无关 - 他们可以在 TPanel 或任何其他容器上设置 Scale）

另一个令人困惑的方面是 Align := Scale at controls 与 Scaling 无关，而是在父调整大小时保持其相对位置和相对大小（即它们不缩放显示，它们实际上调整大小）时调整子控件的大小。

更新：

我发现当使用上述策略放大/缩小时，滚动条的行为与预期相反。我意识到它与未调整大小的外部面板有关，而只是设置了它的比例（请注意，由于它在我的情况下位于滚动框中，因此我将其设置为 Align:=Center，而不是 Align:=Client 就像您在表单）

因此，我使用了另一个 TScaleLayout 而不是外部面板，因为它具有额外有用的属性 OriginalWidth/OriginalHeight 可以保持控件的原始大小。这是基于在放大/缩小时应用的新比例计算新大小所必需的（不使用它的 Scale 属性，因为 Embarcadero 的示例误导性地暗示，除了 Unit/-Unit 轴比例值以支持负比例 [aka轴翻转]）：

```
procedure TForm2.FormCreate(Sender: TObject);
begin
  BeginUpdate;
  Zoomer.Align := TAlignLayout.Center; //at design mode we have it set to TAlignLayout.Client
  UpdateZoomFromTrackbars;
  EndUpdate;
end;

procedure TForm2.SetZoom(const Value: Single);
begin
  SetZoom(Value, Value);
end;

procedure TForm2.SetZoom(const ValueX, ValueY: Single);
begin
  if (ValueX <> 0) and (ValueY <>0) then //FMX has bug where Scale won't work anymore if set to 0
    begin
    BeginUpdate;

    //update track bars
    trackZoomX.BeginUpdate; trackZoomX.ValueRange.Value := ValueX; trackZoomX.EndUpdate;
    trackZoomY.BeginUpdate; trackZoomY.ValueRange.Value := ValueY; trackZoomY.EndUpdate;

    with Zoomer do
    begin
      Size.Size := TSizeF.Create(OriginalWidth * abs(ValueX), OriginalHeight * abs(ValueY)); //don't use Scale to resize (won't work well here), ScaledLayout scales its contents automatically
      Scale.Point := TPointF.Create(sign(ValueX), sign(ValueY));
    end;
    //ScrollBox.InvalidateContentSize;

    EndUpdate;
    end;
end;

procedure TForm2.UpdateZoomFromTrackbars;
begin
  SetZoom(trackZoomX.Value, trackZoomY.Value);
end;

procedure TForm2.ScrollBoxResize(Sender: TObject);
begin
  var scrollBoxSize := ScrollBox.Size.Size;
  if not scrollBoxSize.IsZero then
    begin
    BeginUpdate;
    Zoomer.Size.Size := scrollBoxSize;
    with Zoomer do
    begin
      OriginalWidth := Width;
      OriginalHeight := Height;
    end;
    UpdateZoomFromTrackbars;
    //ScrollBox.InvalidateContentSize;
    EndUpdate;
    end;
end;

procedure TForm2.trackZoomXTracking(Sender: TObject);
begin
  if trackZoomX.IsUpdating then exit;

  BeginUpdate;
  if switchSyncAxes.IsChecked then
    trackZoomY.Value := trackZoomX.Value;

  UpdateZoomFromTrackbars;
  EndUpdate;
end;

procedure TForm2.trackZoomYTracking(Sender: TObject);
begin
  if trackZoomY.IsUpdating then exit;

  BeginUpdate;
  if switchSyncAxes.IsChecked then
    trackZoomX.Value := trackZoomY.Value;

  UpdateZoomFromTrackbars;
  EndUpdate;
end; 
```

# bash - 在流水线读取循环中读取键盘输入

> ID：15230289
> 
> 赞同：0
> 
> 时间：2013-03-05T17:28:00.107
> 
> 标签：bash, unix, sh

在脚本中，我想逐行读取流程输出，并得到用户的确认。到目前为止，我已经这样做了：

```
mycommand-outputpiped | while (read line)
do
   read line
   #dostuff

   read confirm #oops -> this read the next item from the pipe, not the keyboard
done 
```

所以我尝试添加：

```
read confirm < /dev/stdin 
```

但它并没有改变事情，它仍然从管道中读取下一行......我应该如何处理这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T17:35:44.387

这两个`read`命令都从从`while`循环继承的标准输入流中读取。以下*应该*有效；您的第二次读取需要直接从终端读取，而不是`/dev/stdin`（这是管道）。

```
mycommand-outputpiped | while read line
do
    # do stuff
    read confirm < /dev/tty
done 
```

请注意，条件中只有一个`read`,`while`并且它*没有*括在括号中（这将创建一个子外壳，并且`line`只能在该子外壳中使用，而不是循环体）。

# magento - Magento：500 内部服务器错误 :: 后端 >> 系统 >> 工具 >> 备份

> ID：15230293
> 
> 赞同：5
> 
> 时间：2013-03-05T17:28:16.207
> 
> 标签：magento

我们无法从 magento 1.5 版上的“后端 >> 系统 >> 工具 >> 备份”菜单创建 magento 备份。当我们在 15 到 20 分钟后尝试创建备份时，系统返回错误消息：

* * *

> ```
> Internal Server Error 
> The server encountered an internal error or misconfiguration and was unable
> to complete your request.
> 
> Please contact the server administrator, webmaster@choosemadeinusa.com and     
> inform them of the time the error
> occurred, and anything you might have done that may have caused the
> error.
> 
> More information about this error may be available in the server error
> log. 
> ```

此外，在尝试使用 ErrorDocument 处理请求时遇到 500 Internal Server Error 错误。

> Apache/2.2.23 (Unix) mod_ssl/2.2.23 OpenSSL/0.9.8e-fips-rhel5 mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/5.0.2.2635 服务器位于 www.choosemadeinusa.com 端口 443

* * *

我们已经应用了我们在 magento 论坛上找到的几乎所有解决方案，因为很多人以前都遇到过这个问题。我们应用的解决方案是：

*   将“var”文件夹的权限更改为 777。
*   使“var/backups”文件夹为空。
*   将 ROOT index.php 文件的权限更改为 755。
*   增加了 PHP 中执行的 MAX TIME。
*   增加了内存限制。
*   用 index.php.sample 替换 index.php 文件作为临时基础。
*   启用“日志设置”以查看系统正在生成什么错误。检查附加的“system.log”以查看与 maganto 备份相关的任何错误？
*   将文件“app/code/local/MageWorx/LinkExchange/Controller/Router.php”中的“split”替换为“explode”php函数</li>

但是，没有运气发现我们真的不清楚出了什么问题。我们计划将 magento 版本从 1.5 升级到 1.7，我们无法启动该过程 b/c 我们无法完成备份过程。

最糟糕的部分是当系统返回错误消息“500 internal server error”，然后我们重新加载后端的 Dashboard 页面并以绿色显示您的“备份过程已完成”消息，它还显示列表系统创建的备份。但是，我们确定这不是完整的备份，还是应该假设备份已经完成？

```
2013-02-07T16:54:15+00:00 ERR (3): Deprecated functionality: Function split() is deprecated  in /home/choosema/public_html/app/code/local/MageWorx/LinkExchange/Controller/Router.php on line 56
2013-02-07T16:54:15+00:00 ERR (3): Strict Notice: Declaration of MageWorx_SeoSuite_Block_Catalog_Navigation::_renderCategoryMenuItemHtml() should be compatible with that of Mage_Catalog_Block_Navigation::_renderCategoryMenuItemHtml()  in /home/choosema/public_html/app/code/local/MageWorx/SeoSuite/Block/Catalog/Navigation.php on line 38
2013-02-07T16:54:25+00:00 ERR (3): Strict Notice: Declaration of MageWorx_SeoSuite_Block_Catalog_Navigation::_renderCategoryMenuItemHtml() should be compatible with that of Mage_Catalog_Block_Navigation::_renderCategoryMenuItemHtml()  in /home/choosema/public_html/app/code/local/MageWorx/SeoSuite/Block/Catalog/Navigation.php on line 38
2013-02-07T16:54:29+00:00 ERR (3): Strict Notice: Declaration of MageWorx_SeoSuite_Block_Catalog_Navigation::_renderCategoryMenuItemHtml() should be compatible with that of Mage_Catalog_Block_Navigation::_renderCategoryMenuItemHtml()  in /home/choosema/public_html/app/code/local/MageWorx/SeoSuite/Block/Catalog/Navigation.php on line 38
2013-02-07T16:55:08+00:00 ERR (3): Strict Notice: Declaration of MageWorx_SeoSuite_Block_Catalog_Navigation::_renderCategoryMenuItemHtml() should be compatible with that of Mage_Catalog_Block_Navigation::_renderCategoryMenuItemHtml()  in /home/choosema/public_html/app/code/local/MageWorx/SeoSuite/Block/Catalog/Navigation.php on line 38
2013-02-07T16:55:17+00:00 ERR (3): Strict Notice: Declaration of MageWorx_SeoSuite_Block_Catalog_Navigation::_renderCategoryMenuItemHtml() should be compatible with that of Mage_Catalog_Block_Navigation::_renderCategoryMenuItemHtml()  in /home/choosema/public_html/app/code/local/MageWorx/SeoSuite/Block/Catalog/Navigation.php on line 38 
```

我们从“system.log”文件中得到的上述错误“Router.php”和“Navigation.php”有错误，是URL重写有问题吗？根据我们的理解，如果路由不正确，也会返回“500 internal server error”。

任何人都可以让我们知道并帮助我们解决问题，因为我们几乎尝试了所有方法。另外，请检查附加的“system.log”文件，可能有人可以找到magento备份系统问题的线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:17:03.993

首先，测量准确的时间对于确定问题出在哪里非常有帮助，在一分钟内得到它可能会导致准确的超时。

可能`wait_timeout`在 MySQL 的配置 /etc/my.cnf

其次，备份过程没有什么神奇之处。听起来您具有工作知识并可以访问您的服务器。您可以使用`zip`压缩整个 magento Web 根目录，并用于`mysqldump`获取数据库的副本。这就是重建 PHP/MySQL 应用程序真正需要的全部内容。

此外，听起来您几乎正计划尝试在实时生产服务器上升级 Magento 1.5->1.7。这几乎可以肯定是一个错误，许多功能会发生变化，扩展可能会也可能不会与新版本很好地配合。我强烈建议按照上述方式进行备份，并部署到某种测试环境中，您可以在其中进行升级并记录发生的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-25T13:22:26.413

要找出错误是什么，您可以取消注释该行

# ini_set('display_errors', 1);

该行位于 index.php 文件中。

然后您将看到究竟是什么触发了上述错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-26T10:53:12.697

在 magento 1.9.1 中，当您收到 500 内部服务器错误时，只需将 index.php 的权限更改为 644，同时删除根文件夹中的所有 maintenance-flag.php。然后您应该能够登录到管理面板！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-09T09:30:31.273

使用 Godaddy 服务器，更改根文件夹中 644 的“index.php”文件权限。

# windows-7 - 我正在使用 Windows 7 桌面小工具，但无法将其显示在边栏中

> ID：15230298
> 
> 赞同：2
> 
> 时间：2013-03-05T17:28:29.310
> 
> 标签：windows-7, windows-desktop-gadgets

我为 Windows 7 创建了一个桌面小工具。我将 .gadget 文件放在 Program Files/Windows Sidebar/Gadgets 文件夹中。我在 .gadget 文件中放置了必要的 xml 和 html 文件。如何让它显示在小工具侧边栏中？我已按照 Windows 网站上的说明进行操作，但无处可去。

# heroku - 自定义 Heroku 域无法正确解析

> ID：15230301
> 
> 赞同：5
> 
> 时间：2013-03-05T17:28:43.503
> 
> 标签：heroku, dns

我正在尝试为 Heroku 应用程序使用自定义域。我的域名在 Dynadot.com 上注册。下面是我的 DNS 配置的屏幕截图。现在我的域转到 Heroku 中的“没有这样的应用程序”，并添加 www。只是在任何地方都无法解决。

![发电机](../Images/f9e119b58accfd3e6d9cb70e8849a573.png)

我试图避免使用插件进行自定义 DNS 管理。对于静态生成的免费 heroku 应用程序来说，这不应该那么复杂。

是的，我确实阅读了 Stackoverflow 上的所有文档以及几乎所有 Heroku 自定义域问题。我按照说明进行操作，但仍然无法正常工作。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T18:10:57.180

Heroku 建议将您的顶级域转发到`www`子域（或类似域），然后将该子域转发`CNAME`到您的`app-name.herokuapp.com`. 看起来你倒退了，你的顶点指向，`app-name.herokuapp.com`而你的`www`指向`reef-inc.com`（我假设是你的顶点？）。

您还需要确保您的应用添加了正确的域`$ heroku domains:add expected-domain.com`

*   [Heroku 上的自定义域](https://devcenter.heroku.com/articles/custom-domains)

# c++ - 当我调用 pIBidiSpl2::SendRecvXMLString 时出现错误

> ID：15230303
> 
> 赞同：1
> 
> 时间：2013-03-05T17:28:51.237
> 
> 标签：c++, printing, windows-8

我正在尝试使用该`IBidispl2->SendRecvXML`功能，但一直收到未处理的异常错误。

我是第一个承认我在 C++ 方面非常薄弱的​​人，但我知道如何阅读，并试图找到 I BiDiSpl2 函数的示例或更好的解释，但我已经走到了死胡同。

当我尝试调试时出现此错误

> V4BiDiTest.exe 中 0x69D82C10 (bidispl.dll) 处的未处理异常：0xC0000005：访问冲突读取位置 0xCCCCCCD0。

这是我正在使用的代码：

```
#include "stdafx.h"
#include "BiDiSpl.h"
#include "comutil.h"

#include <iostream>
#include <vector>
#include <comdef.h>
#include <stdio.h>

using namespace std;

int main(int argc, char* argv[])
{
    // verify atleast 3 args ( prog.exe <printername> query1....)
    if(argc < 3)
    {
         cout << "ERROR: invalid usage, not enough arguments"<< endl << 
            "USAGE: V4BiDiTest.exe <printername> \"query1\" [\"query2\"] ... "     << endl <<
            "Please rerun the application";
         return 1;
    }

    // set the first arg after the exe to the printer name 
    string printer = argv[1];
    std::wstring stemp = std::wstring(printer.begin(), printer.end()); 
    LPCWSTR pPrinter = stemp.c_str();

    HRESULT hr;
    DWORD dwAccess;
    IBidiSpl2 *pIBidiSpl2 = NULL;
    dwAccess = BIDI_ACCESS_USER;

    // build the request schema with all other args after argv[1] 
    char* getSch = "<bidi:Get     xmlns:bidi=\"http://schemas.microsoft.com/windows/2005/03/printing/bidi\">";
    _bstr_t bstrt(getSch);

    for (int i = 2; i < argc; i++)
    {
        bstrt+="<Query schema=\'";
        char *argStr =argv[i];
        bstrt+=argStr;
        bstrt+="\'/>";
    } 
    bstrt+="</bidi:Get>";

    hr = CoInitializeEx (NULL, COINIT_MULTITHREADED) ;
    hr = CoCreateInstance(CLSID_BidiSpl,
            NULL, 
            CLSCTX_INPROC_SERVER,
            IID_IBidiSpl, 
            (void**)&pIBidiSpl2) ;

    if (pIBidiSpl2 == NULL)
    { 
        cerr << "CoCreateInstance failed" << endl; 
        return 1; 
    }

    hr = pIBidiSpl2->BindDevice(pPrinter,dwAccess);
    //Test hr here
    if (hr!=0){ cout << "failed on bind" <<endl; return 1;}

    BSTR responce;
    BSTR test1 = ::SysAllocString(L"<bidi:Get xmlns:bidi=\"http://schemas.microsoft.com/windows/2005/03/printing/bidi\"><Query schema='\\Printer'/></bidi:Get>");

    // I get the error when the following line executes
    hr = pIBidiSpl2->SendRecvXMLString(test1, &responce);
    //Test hr here
    if (hr!=0){cout << "failed on send" <<endl;return 1;}
    cout << responce << endl;
    ::SysFreeString(test1);
    ::SysFreeString(responce);

    hr = pIBidiSpl2->UnbindDevice();
    // test hr here
    if (hr!=0){cout << "failed on unbind" <<endl;return 1;}
    cout << "Successfully unbound device" << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:31:12.787

尝试改变

```
hr = CoCreateInstance(CLSID_BidiSpl,
        NULL, 
        CLSCTX_INPROC_SERVER,
        **IID_IBidiSpl,**
        (void**)&pIBidiSpl2) ; 
```

至

```
hr = CoCreateInstance(CLSID_BidiSpl,
        NULL, 
        CLSCTX_INPROC_SERVER,
        **IID_IBidiSpl2,** 
        (void**)&pIBidiSpl2) ; 
```

# sharepoint - 从网络中的多个 SharePoint 服务器获取数据

> ID：15230305
> 
> 赞同：1
> 
> 时间：2013-03-05T17:28:59.927
> 
> 标签：sharepoint, sharepoint-2010

SharePoint 命令行管理程序（2010 或更高版本）是否具有从网络中的多个服务器获取数据的功能？例如，在网络中，我有 2 个 SP 服务器。我可以在其中一台服务器（或不是任何 SP 服务器的另一台服务器）上运行 Get-SPSite 以获取两台 SP 服务器的所有网站集吗？

我知道 Exchange 命令行管理程序有这个功能，SP 也有吗？或者它会在 SP 2013 中具有此功能吗？

或者，将不得不远程到每台服务器？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:07:23.773

如果只有一个场，则该场中的所有站点、Web 应用程序和 Web 都可以通过命令行管理程序访问。如果有多个场，您将不得不使用 powershell 远程处理来访问其他场。

# java - 谁能解释为什么这适用于 java 7 而不是 java 6？

> ID：15230306
> 
> 赞同：2
> 
> 时间：2013-03-05T17:29:11.980
> 
> 标签：java

我正在使用这段代码：

```
public static void printMap(Map<Integer, String> obj) {
        for (Map.Entry e : obj.entrySet()) {
            if (e.getKey() == 3) {
                System.out.println("OK!");
            }
        }
    } 
```

它在 Java 7 中工作。但在 Java 6 中，它给出了一个错误：

```
if (e.getKey() == 3) { 
```

谁能向我解释为什么我会收到这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:32:25.217

在 java 6 中，您需要指定`Map.Entry`变量的类型

```
Map.Entry<Integer, String> e : obj.entrySet() 
```

在比较此类`Entry`. 否则编译器认为你在​​做

```
if (<object of type Object> == 3) 
```

这对它没有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:32:46.167

大概您需要为您的 分配一个类型`Entry`：

```
public static void printMap(Map<Integer, String> obj) {
    for (Map.Entry<Integer, String> e : obj.entrySet()) {
        if (e.getKey() == 3) {
            System.out.println("OK!");
        }
    }
} 
```

Java 7 对泛型框架进行了更改。我不确定该代码是否会如您所建议的那样在 Java 7 中工作，但我可以说您需要指定泛型类型`Entry`才能使其在 Java 6 中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:35:10.090

我认为它是 Java 6 中的模板问题。

这修复了它：

> 公共静态无效打印地图（地图对象）{
> 
> ```
>  for (Map.Entry<Integer, String> e : obj.entrySet()) {
>         if (e.getKey() == 3) {
>             System.out.println("OK!");
>         }
>     }
> } 
> ```

Java 6 不会自动将参数从 Map 传递给 Map.Entry

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-05T17:34:19.597

试试这个

```
if (e.getKey().toString().equals("3")) 
```

我认为`e.getKey()`返回一个对象，并且您将它与整数进行比较。将其转换为整数并进行比较或转换为字符串并进行比较

# ios - 带有两个视图的标签栏旋转问题

> ID：15230308
> 
> 赞同：1
> 
> 时间：2013-03-05T17:29:14.367
> 
> 标签：ios, xcode, rotation, screen, uitabbar

我有两个相似的视图，每个人都有一个底部工具栏，里面有一个按钮和一个文本字段。（在工具栏中自动调整大小、自动布局和 co. 不起作用...）在每个控制器中都有方法：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    if (toInterfaceOrientation == UIDeviceOrientationPortrait || toInterfaceOrientation == UIDeviceOrientationPortraitUpsideDown) {
        CGRect frameRect = _totaleTF.frame;
        frameRect.size.width = 230;
        _totaleTF.frame = frameRect;

        CGRect roundRect = _calcolaButton.frame;
        roundRect.size.width = 86;
        _calcolaButton.frame = roundRect;

    } else {
        CGRect screenBounds = [[UIScreen mainScreen] bounds];
        if (screenBounds.size.height == 568)
        {
            CGRect frameRect = _totaleTF.frame;
            frameRect.size.width = 561; 
            _totaleTF.frame = frameRect;

            CGRect roundRect = _calcolaButton.frame;
            roundRect.size.width = 168;
            _calcolaButton.frame = roundRect;

        } else if(screenBounds.size.height==480) {
            CGRect frameRect = _totaleTF.frame;
            frameRect.size.width = 442;
            _totaleTF.frame = frameRect;

            CGRect roundRect = _calcolaButton.frame;
            roundRect.size.width = 141;
            _calcolaButton.frame = roundRect;
        }
    }
} 
```

根据屏幕方向调整按钮和文本字段的大小，它们可以工作！（呜！！！！）但是方法只对他的观点有效；所以，如果我在 view1 中旋转屏幕，view2 的工具栏将保持以前的大小；我该如何解决？非常感谢！

# orm - 尝试编写 UDF 以从 ORM 对象创建 valuelist

> ID：15230309
> 
> 赞同：0
> 
> 时间：2013-03-05T17:29:17.520
> 
> 标签：orm, coldfusion, coldfusion-10

我正在尝试编写一个函数，它将像 cfquery 的 valuelist() 函数一样运行。这是我的代码：

```
 links = entityload('press_releases_lnk',{prp_pr_id=article.getpr_id()});

function ormvaluelist(object,colname){
    retrnstr = '';
    for(mynum=1;mynum<=arraylen(object);mynum++){
        myvalue = object[mynum].getcolname();
        retrnstr = retrnstr&myvalue&',';
    }
    return retrnstr;
}

catlist=ormvaluelist(links,'prp_product_cat'); 
```

问题是让“getcolname”使用我传入的变量作为列名。我确定我只是缺少一些简单的东西。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:57:20.273

你能逃脱使用`ormExecuteQuery("select #column# from #entityName#")`吗？它将返回一个数组，您可以使用`arrayToList()`.

请注意，这`colname`实际上应该是实体中的属性名称。如果您真的是指 db 中的列名，请使用旧的`<cfquery>`, 和`valueList()`.

CF10：

```
myvalue = invoke(object[mynum], "get#colname#"); 
```

如果必须使用 cfscript，请使用 CF9 或以下版本：

```
myvalue = evaluate("object[mynum].get#colname#()"); 
```

@PeterBoughton 的想法，我以前用过它，它可能对你有用，或者不，试试吧：

```
getterFunction = object[mynum]['get#colname#'];
myvalue = getterFunction(); 
```

否则，使用 CFML：

```
<cfinvoke component="#object[mynum]#" method="get#colname#"
          returnVariable="myvalue"> 
```

不要忘记有`listAppend()`，因此您不必担心`,`退货清单末尾的额外内容。和 var 作用域你的变量。

# html - 如何使用帖子值刷新页面

> ID：15230313
> 
> 赞同：0
> 
> 时间：2013-03-05T17:29:28.237
> 
> 标签：html, reload

我的页面包含 div (class=result) 所以 div(result) 包含另一个 div (class=update) div(update) 包含插入表单当数据插入另一个页面 (succed.php) 时在 div(update) 中打开并使用 $ _POST['compet'] value 如何在 succed.php 打开并接收 $_POST['compet'] 后让 div(result) 刷新

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T06:31:52.080

我自己用ajax解决了这个问题

```
<script type="text/javascript">

  $(document).ready( function (){
         $.ajax({
      url: 'insert.php',
      type: 'POST',
      data: { compet: $('#compet').val() },
      success: function(data){
        $(".myresult").html(data);
      }
    })
    })
</script> 
```

# c# - SQL Server Compact 3.5 SP2 版本的数据备份和恢复？

> ID：15230314
> 
> 赞同：0
> 
> 时间：2013-03-05T17:29:29.203
> 
> 标签：c#, sql, desktop, sql-server-ce-3.5

SQL Server Compact 3.5 SP2 版本是否支持数据备份和恢复功能？

我已经开发并安装了一个运行良好的 C# 桌面应用程序。我的应用程序可以存储和操作数据。

现在我想备份存储在嵌入到我的应用程序中的 SQL Server Compact 3.5 SP2 中的数据。我还想从已经存储的数据中生成报告。

谁能说：

有可能吗？如果可能的话，请给我一个链接，让我一步一步地做到这一点。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:34:17.950

根据 MSDN，您只需复制文件即可进行备份，并进行还原。您可以[在此处查看文档](http://msdn.microsoft.com/en-us/library/ms172411%28v=sql.90%29.aspx)。它位于页面的最底部。

代码真的很简单：

```
System.IO.File.Copy(sourceFileName, destFileName); 
```

[这是关于此主题的另一篇 SO 帖子](https://stackoverflow.com/questions/2294656/take-backup-of-sql-server-compact-database)，它将告诉您备份/复制时必须不使用 .sdf 文件，否则它将被锁定。

祝你好运！

# ios - 在导航控制器下的 UIView 中隐藏 UINavigationBar？

> ID：15230315
> 
> 赞同：0
> 
> 时间：2013-03-05T17:29:29.857
> 
> 标签：ios, xcode, ios6, xcode4.6

运行 XCode 4.6，我正在使用 Storyboard。我对 iOS 相当陌生（从 4.5 开始）。

我的故事板中有一个导航控制器，通向几个 UITableViewController，这些控制器通向一个 UIView(Controller)。

我想隐藏/披露从导航控制器自动添加到 UIView 的 UINavigationBar - 如果可能的话？

当我有一个 IBOutlet UINavigationBar 出口时，我知道该怎么做，例如 navBar.hidden = true;

UIView 中导航栏的连接检查器显示我只有 UINavigationItem 而没有 UINavigationBar 可供参考。

1) 使用带有 UIView 的导航控制器时是否可以隐藏 UINavigationBar？2）我如何以编程方式执行此操作（或者更确切地说，我应该从任何导航控制器控制的子视图中引用自动添加的 UINavigationBar ？）

# ios - 在自动更新过程中取消后的应用内购买

> ID：15230316
> 
> 赞同：3
> 
> 时间：2013-03-05T17:29:36.767
> 
> 标签：ios, in-app-purchase

我正在寻找构建一个 ios 应用程序，该应用程序将在年度偏差上使用自动续订订阅。我的问题是，当用户在 IOS 中取消订阅时，我们如何得到通知，以便我们可以取消用户功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-29T04:14:22.630

抱歉，如果我复制了回复：

如果收据状态是`21006`并且有一个名为 的键`cancellation_date`，那么它是一个取消，您可以在该键中找到新的到期日期，但它是一个格式化的日期，如果您需要一个更好的值来解析检查是否`receipt['latest_expired_receipt_info']['cancellation_date_ms']`与`expires_date`

有人知道如何在不发送验证请求的情况下被苹果通知吗？仅在产品到期时检查而不是每次都查询所有产品是合理的，因为可能会取消

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:25:10.873

第一件事。如果您的应用程序不像杂志那样是期刊，那么您应该远离 ARS（自动更新订阅）。Apple 可能会拒绝它并坚持您使用 NRS（非续订订阅）。

这里的代码比我实际粘贴的要多，但请按照 Apple 的本指南[验证应用内购买收据](http://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/StoreKitGuide/RenewableSubscriptions/RenewableSubscriptions.html#//apple_ref/doc/uid/TP40008267-CH4-SW2)。

基本上，您将把收据和您的秘密放在一个 JSON 对象中并将其发送给 Apple。最好从您的服务器而不是应用程序执行此操作。[这是使用 PHP 和 cURL 验证商店收据](http://phpriot.com/articles/verifying-app-store-receipts-php-curl)的一个很好的指南

JSON 对象将如下所示：

```
{
"receipt-data" : "(receipt bytes here)",
"password"     : "(shared secret bytes here)"
} 
```

Apple 将使用另一个包含过期日期等信息的 JSON 对象进行响应。

# twitter-bootstrap - 自定义 twitter bootstrap 弹出箭头

> ID：15230317
> 
> 赞同：15
> 
> 时间：2013-03-05T17:29:41.393
> 
> 标签：twitter-bootstrap, popover

我找不到任何相关信息，但我很难接受这是不可行的。

如何自定义弹出框的箭头？我已经做了，但改变了类 .arrow 等，但是弹出框的位置被搞砸了。

那么，这样做的正确方法是什么？我找不到任何文档。

以下是我一直在使用的类，到目前为止箭头看起来是错误的：

```
.popover {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 1010;
    display: none;
    padding: 5px;
}

    .popover.top {
        margin-top: -5px;
    }

    .popover.right {
        margin-left: 5px;
    }

    .popover.bottom {
        margin-top: 5px;
    }

    .popover.left {
        margin-left: -5px;
    }

    .popover.top .arrow {
        bottom: 0;
        left: 50%;
        margin-left: -5px;
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-top: 5px solid #000000;
    }

    .popover.right .arrow {
        top: 50%;
        left: 0;
        margin-top: -5px;
        border-top: 5px solid transparent;
        border-bottom: 5px solid transparent;
        border-right: 5px solid #000000;
    }

    .popover.bottom .arrow {
        top: 0px;
        left: 50%;
        margin-left: -5px;
        border-left: 9px solid transparent;
        border-right: 9px solid transparent;
        border-bottom: 19px solid #000000;
    }

    .popover.left .arrow {
        top: 50%;
        right: 0;
        margin-top: -5px;
        border-top: 5px solid transparent;
        border-bottom: 5px solid transparent;
        border-left: 5px solid #000000;
    }

    .popover .arrow {
        position: absolute;
        width: 0;
        height: 0;
    }

.popover-inner {
    padding: 3px;
    width: auto;
    overflow: hidden;
    background: #000000;
    background: rgba(0, 0, 0, 0.8);
    -webkit-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
    -moz-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
    box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
}

.popover-title {
    padding: 9px 15px;
    line-height: 1;
    background-color: #252525;
    -webkit-border-radius: 3px 3px 0 0;
    -moz-border-radius: 3px 3px 0 0;
    border-radius: 3px 3px 0 0;
    background-color: rgba(37, 37, 37, 0.7);
    font-size: 14px;
    color: #7e7e7e;
}

.popover-content {
    padding: 14px;
    background-color: #252525;
    -webkit-border-radius: 0 0 3px 3px;
    -moz-border-radius: 0 0 3px 3px;
    border-radius: 0 0 3px 3px;
    -webkit-background-clip: padding-box;
    -moz-background-clip: padding-box;
    background-clip: padding-box;
    background-color: rgba(37, 37, 37, 0.7);
}

    .popover-content p, .popover-content ul, .popover-content ol {
        margin-bottom: 0;
    }

    .popover-content table {
        background: transparent;
    }

        .popover-content table td {
            border: 0px;
            background: transparent;
            color: #7e7e7e;
        } 
```

箭头应该指向红色方块 ![箭头应该指向红色方块](../Images/24fdf18c41da948d451408fb430dba58.png)

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-10-31T15:27:23.143

对于使用自定义 style.css 来简单地覆盖引导程序而不重新编译 LESS 的任何人，您正在寻找的 css 规则是`.popover.top > .arrow:after { border-top-color: yourColorHere; }`仅更改箭头的颜色。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T16:20:14.463

Twitter Bootstrap 基于[Less](http://lesscss.org/)。

如果要更改其箭头的外观，请使用[bootstrap less 变量](https://github.com/twitter/bootstrap/blob/master/less/variables.less#L250-L264)来执行此操作。

```
// Tooltips and popovers
// -------------------------
@tooltipColor:            #fff;
@tooltipBackground:       #000;
@tooltipArrowWidth:       5px;
@tooltipArrowColor:       @tooltipBackground;

@popoverBackground:       #fff;
@popoverArrowWidth:       10px;
@popoverArrowColor:       #fff;
@popoverTitleBackground:  darken(@popoverBackground, 3%);

// Special enhancement for popovers
@popoverArrowOuterWidth:  @popoverArrowWidth + 1;
@popoverArrowOuterColor:  rgba(0,0,0,.25); 
```

如果您使用 Sass，请对[Sass 变量](https://github.com/jlong/sass-twitter-bootstrap/blob/master/lib/_variables.scss)执行相同操作。

遗憾的是，[TB-Customizer](http://twitter.github.com/bootstrap/customize.html)没有所有变量，因此您可能必须自己编译它。

**编辑：**

好消息是，新的[Bootstrap 3 定制器](http://getbootstrap.com/customize/)现在提供了这些选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-26T13:58:58.303

使用这些变量来自定义工具提示：

```
@tooltip-max-width:       200px;
@tooltip-color:           #FFF;
@tooltip-bg:              #000;
@tooltip-opacity:         .9;
@tooltip-arrow-width:     5px;
@tooltip-arrow-color:     #000; 
```

在此处查看文档：http: [//getbootstrap.com/customize/#tooltips](http://getbootstrap.com/customize/#tooltips)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-02T16:37:52.343

我在调整弹出框边框厚度时遇到问题。为了调整这一点，我将@popoverBorderThickness 添加到popovers.less，只有这些行被更改。我包括了整个文件的上下文。

```
//
// Popovers
// --------------------------------------------------

.popover {
  position: absolute;
  top: 0;
  left: 0;
  z-index: @zindexPopover;
  display: none;
  max-width: 276px;
  padding: 1px;
  text-align: left; // Reset given new insertion method
  background-color: @popoverBackground;
  -webkit-background-clip: padding-box;
     -moz-background-clip: padding;
          background-clip: padding-box;
  border: @popoverBorderThickness solid @popoverOuterColor;
  .border-radius(6px);
  .box-shadow(0 5px 10px rgba(0,0,0,.2));

  // Overrides for proper insertion
  white-space: normal;

  // Offset the popover to account for the popover arrow
  &.top     { margin-top: -10px; }
  &.right   { margin-left: 10px; }
  &.bottom  { margin-top: 10px; }
  &.left    { margin-left: -10px; }
}

.popover-title {
  margin: 0; // reset heading margin
  padding: 8px 14px;
  font-size: 14px;
  font-weight: normal;
  line-height: 18px;
  background-color: @popoverTitleBackground;
  border-bottom: 1px solid darken(@popoverTitleBackground, 5%);
  .border-radius(5px 5px 0 0);

  &:empty {
    display: none;
  }
}

.popover-content {
  padding: 9px 14px;
}

// Arrows
//
// .arrow is outer, .arrow:after is inner

.popover .arrow,
.popover .arrow:after {
  position: absolute;
  display: block;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
}
.popover .arrow {
  border-width: @popoverArrowOuterWidth;
}
.popover .arrow:after {
  border-width: @popoverArrowWidth;
  content: "";
}

.popover {
  &.top .arrow {
    left: 50%;
    margin-left: -@popoverArrowOuterWidth;
    border-bottom-width: 0;
    border-top-color: #999; // IE8 fallback
    border-top-color: @popoverArrowOuterColor;
    bottom: -@popoverArrowOuterWidth;
    &:after {
      bottom: @popoverBorderThickness * 1.414;// longer line gets thinner use Pythagorean theorem to correct
      margin-left: -@popoverArrowWidth;
      border-bottom-width: 0;
      border-top-color: @popoverArrowColor;
    }
  }
  &.right .arrow {
    top: 50%;
    left: -@popoverArrowOuterWidth;
    margin-top: -@popoverArrowOuterWidth;
    border-left-width: 0;
    border-right-color: #999; // IE8 fallback
    border-right-color: @popoverArrowOuterColor;
    &:after {
      left: @popoverBorderThickness * 1.414;// longer line gets thinner use Pythagorean theorem to correct
      bottom: -@popoverArrowWidth;
      border-left-width: 0;
      border-right-color: @popoverArrowColor;
    }
  }
  &.bottom .arrow {
    left: 50%;
    margin-left: -@popoverArrowOuterWidth;
    border-top-width: 0;
    border-bottom-color: #999; // IE8 fallback
    border-bottom-color: @popoverArrowOuterColor;
    top: -@popoverArrowOuterWidth;
    &:after {
      top: @popoverBorderThickness * 1.414;// longer line gets thinner use Pythagorean theorem to correct
      margin-left: -@popoverArrowWidth;
      border-top-width: 0;
      border-bottom-color: @popoverArrowColor;
    }
  }

  &.left .arrow {
    top: 50%;
    right: -@popoverArrowOuterWidth;
    margin-top: -@popoverArrowOuterWidth;
    border-right-width: 0;
    border-left-color: #999; // IE8 fallback
    border-left-color: @popoverArrowOuterColor;
    &:after {
      right: @popoverBorderThickness * 1.414;// longer line gets thinner use Pythagorean theorem to correct
      border-right-width: 0;
      border-left-color: @popoverArrowColor;
      bottom: -@popoverArrowWidth;
    }
  }

} 
```

# python - “或”在 Python 中似乎没有发挥应有的作用

> ID：15230318
> 
> 赞同：2
> 
> 时间：2013-03-05T17:29:48.923
> 
> 标签：python

我正在尝试学习 Python，并且在为自己的学习目的编写“测验”时偶然发现了这种令人难以置信的奇怪异常。布尔“或”函数有点奇怪。这是一段代码：

```
def answercheck(answer):
    solved = 0
    while solved == 0:
        useranswer = raw_input("> ")
        if useranswer == answer:
            solved = 1
            correct()
        elif useranswer == "A" or "B" or "C" or "D":
            solved = 1
            incorrect()
        else:
            print "False input. Try again." 
```

这就是发生的事情。在为测验参赛者打印出测验问题后，以真实答案作为参数调用 answercheck 函数。然后提示用户回答。因为我希望唯一有效的答案是“A”、“B”、“C”或“D”，所以我把它放在了一个“while”循环中。

所以，我怀疑，如果有人通过 raw_input 将 'useranswer' 变成了像 'lol' 这样无用的东西，它会再次提示用户，直到插入“A”、“B”、“C”或“D”作为答案。但是，它不会，并且将任何不是“答案”的答案都视为不正确。

所以我稍微改写了这个东西，当我这样做时它似乎起作用了：

```
def answercheck(answer):
    solved = 0
    while solved == 0:
        useranswer = raw_input("> ")
        if useranswer == answer:
            solved = 1
            correct()
        elif useranswer == "A":
            solved = 1
            incorrect()
        elif useranswer == "B":
            solved = 1
            incorrect()
        elif useranswer == "C":
            solved = 1
            incorrect()
        elif useranswer == "D":
            solved = 1
            incorrect()
        else:
            print "False input. Try again." 
```

这对我来说似乎有点多余。第一个脚本出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:30:55.697

的正确语法*`useranswer`是`"A"`、或`"B"`中`"C"``"D"`*的任何一个：

```
elif useranswer in ("A", "B", "C", "D"): 
```

或（如果您的 Python 版本足够新以支持集合文字）：

```
elif useranswer in {"A", "B", "C", "D"}: 
```

您现在拥有的在语法上是有效的，但具有完全不同的含义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T17:32:16.847

`or`对两个布尔变量进行操作；它不会创建一组替代选择。尝试这个：

```
useranswer == "A" or useranswer == "B" or useranswer == "C" or useranswer == "D" 
```

或者，更方便：

```
useranswer in ("A", "B", "C", "D") 
```

甚至

```
useranswer in "ABCD" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T17:31:09.140

`useranswer == "A" or "B" or "C" or "D"`方法

```
(((useranswer == "A") or "B") or "C") or "D" 
```

这就是为什么它不能像你喜欢的那样工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T17:32:58.893

运算符优先级 - 它评估`useranswer == 'A'`为任何值，然后 "B"、"C"、"D" 始终评估为 "True"

你需要做这样的事情”

```
if useranswer in ['A', 'B', 'C', 'D']:
    ... 
```

# android - Android：从另一个应用程序访问内容提供程序

> ID：15230321
> 
> 赞同：0
> 
> 时间：2013-03-05T17:30:01.087
> 
> 标签：android

我尝试搜索 stackoverflow.com 并尝试了所有答案，但没有一个有效。

我有一个内容提供者，当内容提供者的用户在同一个应用程序中时它正在工作。但是，从另一个应用程序访问时出现 Permission Denial 错误。

日志猫

```
Caused by: java.lang.SecurityException: Permission Denial: opening provider com.abc.contentprovidersbooks.BooksProvider from ProcessRecord{4174b338 18673:com.abc.contentprovidersuserbooks/u0a10112} (pid=18673, uid=10112) requires com.abc.contentprovidersbooks.READ_DATABASE or com.abc.contentprovidersbooks.WRITE_DATABASE 
```

内容提供者 AndroidManifest:-

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.abc.contentprovidersbooks"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme">

    <activity
        android:name="com.abc.contentprovidersbooks.ContentProvidersBook"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <provider android:name="BooksProvider"
        android:authorities="com.abc.contentprovidersbooks.Books"
        android:readPermission="com.abc.contentprovidersbooks.READ_DATABASE"
        android:writePermission="com.abc.contentprovidersbooks.WRITE_DATABASE"
        android:exported="true">

    </provider>            
</application> 
```

内容提供者用户应用程序 AndroidManifest:-

```
<?xml version="1.0" encoding="utf-8"?><manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.tshouse.contentprovidersuserbooks"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="17" />
<uses-permission android:name="com.tshouse.contentprovidersbooks.READ_DATABASE"/>
<uses-permission android:name="com.tshouse.contentprovidersbooks.WRITE_DATABASE"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" 
    android:readPermission="com.tshouse.contentprovidersbooks.READ_DATABASE"
    android:writePermission="com.tshouse.contentprovidersbooks.WRITE_DATABASE"
    >
    <activity
        android:name="com.tshouse.contentprovidersbooks.ContentProvidersUserBooks"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

请告知如何声明许可。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:32:54.553

如果我不得不猜测，您在提供者应用程序之前安装了消费者应用程序，这不会像您编写的那样工作。

如果您将`<permission>`元素放在*两个*应用程序中，那么安装顺序将无关紧要。

此外，您不能像在消费者清单中那样使用`android:readPermission`and `android:writePermission`on 。`<application>`只需删除那些。

# jquery - 鼠标悬停时左右展开图像

> ID：15230322
> 
> 赞同：1
> 
> 时间：2013-03-05T17:30:01.197
> 
> 标签：jquery, css

我正在尝试在鼠标悬停时左右为图像设置动画，并且在鼠标悬停时它将恢复到以前的状态。

例如，如果图像的原始宽度为 120 像素，则在页面加载时它将显示 100 像素，鼠标悬停时它将向左和向右扩展。因此，它会向左多出 10 像素，向右多出 10 像素。

```
<img src="http://st.depositphotos.com/1742172/2000/v/110/depositphotos_20007761-Old-scroll-banner-cartoon.jpg" id="expandimg" /> 
```

**演示** [http://jsfiddle.net/squidraj/9FtBY/5/](http://jsfiddle.net/squidraj/9FtBY/5/)

但现在它只在右侧扩展。请任何建议都会很棒。

刚刚发现css3中有一个叫clip的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:40:29.913

好吧，基本上你的代码是正确的。动画看起来会向右扩展，因为图像是左对齐的。

如果你将它包裹在一个 div 中并让它居中对齐，它看起来会“很好”。

```
<div class="wrapper"><img src="http://st.depositphotos.com/1742172/2000/v/110/depositphotos_20007761-Old-scroll-banner-cartoon.jpg" id="expandimg" /></div> 
```

[http://jsfiddle.net/GVdmF/](http://jsfiddle.net/GVdmF/)

* * *

引号中的“好”，因为图像被拉伸。您最好使用使用背景图像的解决方案。如果你稍等片刻，我可能会看到我能做什么。

* * *

编辑：我们又来了：http: [//jsfiddle.net/GVdmF/2/](http://jsfiddle.net/GVdmF/2/)

*   我将您的图片分成 3 个部分：left.png、center.png 和 right.png。
*   我将 center.png 添加到 div
*   我添加了伪类 :before 和 :after，使它们成为块元素并添加了高度/宽度以及相应的背景图像 left.png 和 right.png

您的 JS 几乎保持不变。希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:40:32.360

我会结合使用相对于父容器的绝对定位`max-width`并将`max-height`它们重置为`none`悬停：

```
.img:hover img {
    position: absolute;
    max-width: none;
    max-height: none;
    left: -25%;
    top: -25%;
} 
```

[http://jsfiddle.net/xv9dh/](http://jsfiddle.net/xv9dh/)

UPD。没有看到你的演示，所以我的回答可能不相关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:42:18.723

它可以通过纯 CSS 以两种方式完成（至少！）：

[http://jsfiddle.net/9FtBY/10/](http://jsfiddle.net/9FtBY/10/)

```
#expandimg {
    height: 100px;
    width: 100px;
    margin-left: 10px;
    -webkit-transition: 0.3s;
    transition: 0.3s;
    -moz-transition: 0.3s;
}

#expandimg:hover {
    width: 120px;
    margin-left: 0px;    
} 
```

或第二个，与`position: absolute;`

[http://jsfiddle.net/9FtBY/7/](http://jsfiddle.net/9FtBY/7/)

```
#expandimg {
    height: 100px;
    width: 100px;
    left: 10px;
    position: absolute;
    -webkit-transition: 0.3s;
    transition: 0.3s;
    -moz-transition: 0.3s;
}

#expandimg:hover {
    width: 120px;
    left: 0px;    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T17:56:23.067

它是一个简单的`animation`概念，

如果您要`animate`通过增加元素来获取元素`width`，并且您需要将其显示为拉伸效果。就用这个，

```
Left = Left - (incrementedWidth/2) 
```

要还原它，

```
Left = Left + (incrementedWidth/2) 
```

**代码：**

```
$(document).ready(function () {
    $("#expandimg").mouseover(function () {
        $(this).stop().animate({
            //Decrement Left in pixel = 20/2 [20 increment in width]
            left: "-=10", 
            width: '120px'
        }, "fast"); 
    });
    $("#expandimg").mouseout(function () {
        $(this).stop().animate({
            //Increment Left in pixel = 20/2 [20 decrement in width]
            width: '100px',
            left: "+=10"
        }, "fast"); 
    });
}); 
```

[注意：如果您使用的是 property `left`，那么您必须设置一个类似`absolute`, 的位置才能访问它。]

## [演示](http://jsfiddle.net/9FtBY/11/)

# tfs - 从 TFS 获取最新信息时的时间戳，这有关系吗？

> ID：15230328
> 
> 赞同：17
> 
> 时间：2013-03-05T17:30:30.983
> 
> 标签：tfs, version-control, msbuild

我不确定为什么我以前从未注意到这一点，但是当我从 TFS “获取最新”时，我本地工作文件夹中文件的日期和时间设置为当前日期和时间。这适用于创建和修改日期，即使没有进行任何更改（就像我刚刚做了“获取最新”一样，仅此而已）。

我是否应该担心文件的日期和时间不反映文件创建和随后修改的真实日期和时间？我在 TFS 中有修订历史，所以我并不过分担心，但我必须承认这感觉不对。*从技术上讲*，一切都有效，但我想知道发生了什么。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-05T17:41:45.670

正如您所注意到的，Team Foundation Server 中的默认行为是将文件时间写入“当前”时间（当您检索文件时）。这是大多数版本控制工具的默认行为，通常被认为是安全的。

在许多情况下，将时间设置为远程时间可能会产生负面影响。例如，`make`将扫描比上次构建时间更新的文件。将文件时间设置为服务器时间会影响确定自上次构建以来哪些文件已更改的能力。

但是，如果您确实更喜欢这种行为并且至少使用 TFS 2012 和 Visual Studio 2012，您可以通过将“文件时间”设置为“签入”来在每个工作区的基础上启用它：

![在此处输入图像描述](../Images/cab929dde140a21b13231e52f6c19322.png)

[来自 Microsoft 的](https://www.visualstudio.com/en-us/docs/tfvc/create-work-workspaces#q-how-do-i-choose-advanced-workspace-options)其他详细信息：

> **文件时间：**
> 
> *   如果您希望每个文件的日期和时间戳与工作区中版本变更集的时间戳大致匹配，请选择签入**。**一些问题和例外是：
>     
>     
>     *   当您修改本地文件时，日期和时间戳将与您修改文件时的日期和时间相匹配。
>         
>         
>     *   仅当您使用 Visual Studio 2012 或更高版本以及 Visual Studio Team Foundation Server 2012 或更高版本时，此功能才可用。
>         
>         
>     *   该设置不适用于文件夹，除非对该文件夹包含的文件有挂起的添加或删除操作。
>         
>         
>     *   您可能无法逐步构建代码项目。相反，您将不得不重建）。
>         
>         
> *   如果您希望日期和时间戳与您上次修改本地文件的日期和时间相匹配，请选择**当前。**例如，一名团队成员在周一签入了对文件的最新更改。在星期二，您执行 get 操作来更新文件。日期和时间戳设置为星期二。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-21T16:27:20.033

如前所述，这是 TFS 的默认行为。这是我在默认设置下使用的第一个版本控制系统。当开发人员获得最新版本时，对文件使用当前时间的问题在于，您只能通过对每个文件进行文件比较来判断您是否拥有最新版本。同一项目中的三个不同开发人员对于同一版本的文件将具有 3 个不同的日期时间值。无论哪种方式，在创建构建之前总是做一个项目清理。为什么？因为您可能已经调整了一两个文件，然后在测试后恢复到最新的签入版本。根据我的经验，使用签到时间总是更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-19T16:46:21.313

TFS 不应修改源代码控制处理中的原始文件属性。它的构建功能应​​该使用它们自己的属性来控制最新签入的版本和构建控制。从 TFS 获取文件应将原始文件放回系统上，且其原始属性未修改。TFS 因自身目的而劫持原始文件的属性而被破坏。最初的 Microsoft VSS 工具提供了此选项 - TFS 团队感到羞耻。

# ruby-on-rails - 将图像直接上传到 Cloudinary

> ID：15230336
> 
> 赞同：2
> 
> 时间：2013-03-05T17:30:56.353
> 
> 标签：ruby-on-rails, image, cloudinary

我正在尝试从我的 Rails 应用程序将图像直接上传到 Cloudinary，因为我在 Heroku 上并且不能将服务器用作中介。他们使用 jQuery 对此提供支持，但是当我按照他们的指示进行操作时，我收到以下错误 jquery.fileupload-fp.js：

```
Uncaught TypeError: Cannot read property 'fileupload' of undefined.
$.widget('blueimp.fileupload', $.blueimp.fileupload, {
```

Cloudinary 回复了一封电子邮件，说我应该以正确的顺序包含 js 文件，但它们都包含在正确的顺序中。我再次问他们，但他们可能需要一段时间才能回复我，这有点时间敏感。

谢谢！

# c# - 代表多个集合的数据结构是什么？

> ID：15230338
> 
> 赞同：2
> 
> 时间：2013-03-05T17:30:58.257
> 
> 标签：c#, .net

我有一个现有的应用程序，其中包含这样的对象。

```
class MyObject{
    public MyCollection  TypeOnes;
    public MyCollection  TypeTwos;
    public MyCollection  TypeThrees;

    public MyCollection  All;
}

class MyCollection : Collection{
    public boolean IsLoaded;
} 
```

它是这样加载的。

```
//using bool array for flag simplicity in example
public void Load(ref MyObject obj, bool[] flags){
    if(flags[0]){
        obj.TypeOnes = LoadOnes();
        obj.TypeOnes.IsLoaded = true;
    }else{
        obj.TypeOnes = new MyCollection();
    }

    if(flags[1]){
        obj.TypeTwos = LoadTwos();
        obj.TypeTwos.IsLoaded = true;
    }else{
        obj.TypeTwos= new MyCollection();
    }

    if(flags[2]){
        obj.TypeThrees = LoadThrees();
        obj.TypeThrees.IsLoaded = true;
    } else {
        obj.TypeThrees = new MyCollection();
    }

    if(flags[3]){
        obj.All = obj.TypeOnes.Clone().AddRange(obj.TypeTwos.Clone()).AddRange(obj.TypeThrees.Clone());
        obj.All.IsLoaded = true;
    } else {
        obj.All = new MyCollection();
    }
} 
```

正如您可以清楚地看到`All`应该代表所有类型的集合将不同步，除非所有类型都与`All`集合一起加载。

我要做的是制作一个标志来加载所有类型集合，但是，我想保留该`All`集合用于一次访问所有类型集合并使它们同步以限制我将不得不做的重构量。我希望它是读/写的，这样如果我对`TypeOnes`集合进行更改，它将反映在`All`集合中，反之亦然。

是否有可以用于此的现有 DataType？
如果不是，我希望构建什么样的数据结构？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:37:36.677

除非您有特定原因要在三个包含的集合中创建对象的克隆，否则为什么不实现`All`为`IEnumerable<T>`（或 IEnumerable，如果您使用的是 pre-generic .NET），例如：

```
// Option: Preserve duplicates between collections
public IEnumerable<T> All()
{
    // Ensure child collections are loaded
    return TypeOnes.Concat(TypeTwos).Concat(TypeThrees);
}

// Option remove duplicates between collections
public IEnumerable<T> All()
{
    // Ensure child collections are loaded
    return TypeOnes.Union(TypeTwos).Union(TypeThrees);
} 
```

这样，用于向包含的集合添加内容的现有代码合同得以维护，并确保您`All`永远不会过时或与这些集合不同步。

请注意，旧代码合同`All`在初始化后与包含的集合不同步（因为对子项的更新未反映到`All`. 这是一种行为变化，可能会也可能不会被接受。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T17:37:28.947

这样的事情怎么样？`Concat`将合并集合并立即返回所有集合。

```
class MyObject
{
    public MyCollection  TypeOnes;
    public MyCollection  TypeTwos;
    public MyCollection  TypeThrees;

    public IEnumerable<T> All
    {
        get { return TypeOnes.Concat(TypeTwos.Concat(TypeThrees));}
        // You can use Union() to handle duplicates as well, but it's slower.
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T17:37:50.447

可能的方法 - 公开“全部”`IEnumerable<Base_type_for_items_in_other_collections>`并通过连接其他集合按需创建它。即，如果您有一个小的集合列表，则基本[Enumerable.Concat](http://msdn.microsoft.com/en-us/library/bb302894.aspx)会起作用：

```
public IEnumerabe<MyObject> All {get
{
   return TypeOnes.Concat(TypeTwos.Concat(TypeThrees));
}} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T17:45:10.450

由于可能有很多项目，您可以考虑`yield return`返回项目，以便调用者可以在达到适当限制/找到项目时停止访问项目。

```
public class MyObject
{
    public MyCollection  TypeOnes { get; set;} 
    public MyCollection  TypeTwos { get; set;} 
    public MyCollection  TypeThrees { get; set;} 

    public IEnumerable<string> All
    {
        get
        {
            foreach (var item in TypeOnes.Union(TypeTwos).Union(TypeThrees))
            {
                yield return item;
            }
        }
    }
}

public class MyCollection : Collection<string>
{
    public bool IsLoaded { get; set; }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T17:48:44.937

您真正需要的只是一个 ICollection 接口或 IEnumerable 接口，它涵盖了联合中的所有其他集合，对吗？我假设您在加载完所有内容后不会将项目添加到 All 集合中。如果是这种情况，请尝试：

对于 All 的声明：

```
public IEnumerable<MyBaseType>  All; 
```

全部设置：

```
obj.All = System.Linq.Enumerable.Concat<MyBaseType>(
          obj.TypeOnes, obj.TypeTwos).Concat(obj.TypeThrees); 
```

这应该允许 All 反映其他集合中的更改，即使它不允许您直接向其中添加项目。

# java - Collat or 比较奇怪的字符串

> ID：15230339
> 
> 赞同：6
> 
> 时间：2013-03-05T17:31:04.370
> 
> 标签：java, sorting

我有一组字符串，需要对其进行排序。我正在使用整理器。但是输出很奇怪。

```
final Collator collator = Collator.getInstance(Locale.US);

List<String> data = new ArrayList<String>();

data.add("1Z5800701_AB");
data.add("1Z5800701_AC");
data.add("1Z5800701-A");
data.add("1Z5800701 A");
data.add("1Z5800701B");
data.add("1Z5800701A");
data.add("1Z5800701 - A");

Collections.sort(data, new Comparator<String>() {

    @Override
    public int compare(String o1, String o2) {
        return collator.compare(o1, o2);
    }
});

for (String s : data) {
    System.out.println(s);
} 
```

输出是：

```
1Z5800701_AB
1Z5800701_AC
1Z5800701A
1Z5800701 A
1Z5800701 - A
1Z5800701-A
1Z5800701B 
```

最后一个字符串“1Z5800701B”应该在“1Z5800701A”之后。我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T18:00:50.760

这是使用的语言环境的问题，您可以在 bash shell 中使用`LC_ALL=en_US sort`. 关键是“单词分隔符”在此语言环境中与“单词字符”的处理方式不同（即，您不能总是说字符 X 在字符 B 之前或之后排序 - 这取决于上下文）。结果是，如果您有`1Z5800701 <optional separators> A`，它会排在 之前`1Z5800701 <optional separators> B`，这就是为什么`1Z5800701B`在所有组合`A`之后出现在数字之后的所有组合，可选地用“分隔符”分隔。[您还可以在此 Wikipedia 文章](http://en.wikipedia.org/wiki/Alphabetical_order)中看到更多“不明显”排序的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:31:28.710

这不是一个错误，这是一个功能 ：）

`java.text.Collator`只有一个默认实现；`RuleBasedCollator`，并且它忽略了空格。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/text/RuleBasedCollat​​or.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/RuleBasedCollator.html)

只需检查您的 Collat​​or 的类

```
final Collator collator = Collator.getInstance(Locale.US);
System.out.println(collator.getClass().getName()); 
```

# javascript - SoundCloud JS SDK - SC.get 在 IE9 上根本不起作用

> ID：15230349
> 
> 赞同：0
> 
> 时间：2013-03-05T17:31:43.883
> 
> 标签：javascript, ajax, api, sdk, soundcloud

我正在尝试获取有关轨道的信息，如下所示：

```
SC.get('/tracks/15158492', {limit: 1}, function(track) { console.log(track); }); 
```

这适用于所有真正的网络浏览器，但 Internet Explorer 不会让步。我怀疑这个问题与 ajax 调用有关，根据 IE dev-tools 中的 Network 选项卡，没有任何问题（如果你相信它所说的任何内容）。

我在 Google 网上论坛上只找到了一篇相关的帖子，有点老（且未解决）：[https ://groups.google.com/forum/?fromgroups=#!topic/soundcloudapi/GuiKpbxHIWU](https://groups.google.com/forum/?fromgroups=#!topic/soundcloudapi/GuiKpbxHIWU)

另外，我知道我可以使用自己的 ajax 请求直接访问 API，但我正在寻找一种更简单的解决方案，或者至少了解为什么 SDK 不能工作，它只是我还是它需要由 SoundCloud 修复的错误。

任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T09:31:26.487

有没有可能开启兼容模式？

以下代码适用于 Windows 7 上的 IE9

```
<script src="//connect.soundcloud.com/sdk.js"></script>
<script>
  SC.initialize({
    client_id: "YOUR_CLIENT_ID",
    redirect_uri: "http://example.com/callback.html",
  });
  SC.get("/groups/55517/tracks", {limit: 1}, function(tracks){
    alert("Latest track: " + tracks[0].title);
  });
</script> 
```

这是一个示例代码 - [http://jsbin.com/erokoz/3/edit](http://jsbin.com/erokoz/3/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:27:16.683

是我的错误导致了这个问题。前段时间我遇到了一个不同的问题，有时在 IE 上，一个 div ( `#recorderFlashContainer`) 会无缘无故地出现在屏幕中间。我知道这是在 IE 极端条件下进行的通信的一部分，但这是一个有问题的 UI 错误。为了解决这个问题，我在元素上添加了一个 CSS 规则声明`display: none`，从而导致 IE 无法在其中加载`object`元素，这导致 SDK 的一些功能失败。

我使用另一个 CSS 规则修复了它，声明：

```
/* SoundCloud Fix for IE9 */
#recorderFlashContainer {
    position: absolute;
    top: -9999px!important;
    left: -9999px!important;
} 
```

因此，非常感谢您的帮助，让我意识到这是我正在做的事情导致了这个问题。

同样的问题，为什么会发生原来的错误？为什么有时（但不是一直）`#recorderFlashContainer`会卡在屏幕中间？有什么可以在你身边做的事情来防止它发生吗？

非常感谢！

# sql - 如何将两个查询的结果合并到一个数据集中

> ID：15230350
> 
> 赞同：45
> 
> 时间：2013-03-05T17:31:55.340
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有两个查询：查询简化不包括联接

```
Query 1 : select ProductName,NumberofProducts (in inventory) from Table1.....;
Query 2 : select ProductName, NumberofProductssold from Table2......; 
```

我想知道如何获得输出：

```
ProductName NumberofProducts(in inventory)  ProductName NumberofProductsSold 
```

用于获取每个查询的输出的关系是不同的。我的 SSRS 报告需要以这种方式输出。

（我尝试了 union 语句，但它不适用于我想看到的输出。）

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-03-05T17:44:03.893

这是一个在两个完全不相关的表之间进行联合的示例：学生表和产品表。它生成一个 4 列的输出：

```
select
        FirstName as Column1,
        LastName as Column2,
        email as Column3,
        null as Column4
    from
        Student
union
select
        ProductName as Column1,
        QuantityPerUnit as Column2,
        null as Column3,
        UnitsInStock as Column4
    from
        Products 
```

显然，您会针对自己的环境进行调整...

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-03-05T17:50:09.463

我认为您正在追求这样的东西；（使用`row_number()`并`CTE`执行 a `FULL OUTER JOIN`）

[小提琴示例](http://sqlfiddle.com/#!3/0ac9b/4)

```
;with t1 as (
  select col1,col2, row_number() over (order by col1) rn
  from table1 
),
t2 as (
  select col3,col4, row_number() over (order by col3) rn
  from table2
)
select col1,col2,col3,col4
from t1 full outer join t2 on t1.rn = t2.rn 
```

表格和数据：

```
create table table1 (col1 int, col2 int)
create table table2 (col3 int, col4 int)

insert into table1 values
(1,2),(3,4)

insert into table2 values
(10,11),(30,40),(50,60) 
```

结果 ：

```
|   COL1 |   COL2 | COL3 | COL4 |
---------------------------------
|      1 |      2 |   10 |   11 |
|      3 |      4 |   30 |   40 |
| (null) | (null) |   50 |   60 | 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-05T17:44:44.570

怎么样，

```
select
        col1, 
        col2, 
        null col3, 
        null col4 
    from Table1
union all
select 
        null col1, 
        null col2,
        col4 col3, 
        col5 col4 
    from Table2; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-05T17:44:50.163

问题是，除非您的表是相关的，否则您无法确定如何加入它们，因此您必须任意加入它们，从而产生笛卡尔积：

```
select Table1.col1, Table1.col2, Table2.col3, Table2.col4
from Table1
cross join Table2 
```

例如，如果您有以下数据：

```
col1  col2
a     1
b     2

col3  col4
y     98
z     99 
```

你最终会得到以下结果：

```
col1  col2  col3  col4
a     1     y     98
a     1     z     99
b     2     y     98
b     2     z     99 
```

这是你要找的吗？如果没有，并且您有一些关联表格的方法，那么您需要将其包含在将两个表格连接在一起时，例如：

```
select Table1.col1, Table1.col2, Table2.col3, Table2.col4
from Table1
inner join Table2
on Table1.JoiningField = Table2.JoiningField 
```

无论数据是相关的，这都会为您整合所有内容，从而为您提供结果。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-05T17:33:50.937

如果您的意思是两个`ProductName`字段都具有相同的值，那么：

```
SELECT a.ProductName,a.NumberofProducts,b.ProductName,b.NumberofProductsSold FROM Table1 a, Table2 b WHERE a.ProductName=b.ProductName; 
```

或者，如果您希望该`ProductName`列仅显示一次，

```
SELECT a.ProductName,a.NumberofProducts,b.NumberofProductsSold FROM Table1 a, Table2 b WHERE a.ProductName=b.ProductName; 
```

否则，如果 Table1 的任何行可以与 Table2 中的任何行相关联（尽管我真的很想知道为什么有人想要这样做），你可以看看[这个](https://stackoverflow.com/questions/8916118/how-to-join-two-tables-without-any-condition)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-02-18T09:55:12.627

老问题，但是其他人使用 JOIN 将不相关的查询组合到一个表中的行，这是我将不相关的查询组合到一行的解决方案，例如：

```
select 
  (select count(*) c from v$session where program = 'w3wp.exe') w3wp,
  (select count(*) c from v$session) total,
  sysdate
from dual; 
```

给出以下单行输出：

```
W3WP   TOTAL  SYSDATE
-----  -----  -------------------
   14    290  2020/02/18 10:45:07 
```

（这告诉我，我们的 Web 服务器当前使用 290 个会话中的 14 个 Oracle 会话；我在每隔几分钟运行一次的 sqlplus 脚本中记录这个没有标题的输出）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T17:50:15.077

> 这是你可以做的。假设您的`ProductName`列具有共同值。

```
SELECT 
     Table1.ProductName, 
     Table1.NumberofProducts, 
     Table2.ProductName, 
     Table2.NumberofProductssold
FROM Table1
INNER JOIN Table2
ON Table1.ProductName= Table2.ProductName 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-05T17:45:14.407

尝试这个：

```
SELECT ProductName,NumberofProducts ,NumberofProductssold
   FROM table1 
     JOIN table2
     ON table1.ProductName = table2.ProductName 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-05T17:45:21.310

将每个查询加载到数据表中：

[http://www.dotnetcurry.com/ShowArticle.aspx?ID=143](http://www.dotnetcurry.com/ShowArticle.aspx?ID=143)

将两个数据表加载到数据集中：

[http://msdn.microsoft.com/en-us/library/aeskbwf7%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/aeskbwf7%28v=vs.80%29.aspx)

* * *

## 回答 #10

> 赞同：-5
> 
> 时间：2017-03-07T13:05:19.737

**尝试这个：**

*获取 CURRENT_MONTH、LAST_MONTH 和 ALL_TIME 的记录并将它们合并到单个数组中*

```
$analyticsData = $this->user->getMemberInfoCurrentMonth($userId);
$analyticsData1 = $this->user->getMemberInfoLastMonth($userId);
$analyticsData2 = $this->user->getMemberInfAllTime($userId);                        

    foreach ($analyticsData2 as $arr) {                
        foreach ($analyticsData1 as $arr1) {
            if ($arr->fullname == $arr1->fullname) {
                $arr->last_send_count = $arr1->last_send_count;
                break;
            }else{
                $arr->last_send_count = 0;
            }
        }
        foreach ($analyticsData as $arr2) {
            if ($arr->fullname == $arr2->fullname) {
                $arr->current_send_count = $arr2->current_send_count;
                break;
            }else{
                $arr->current_send_count = 0;
            }
        }
    }
    echo "<pre>";
    print_r($analyticsData2);die; 
```

# google-chrome - Chrome HEAD 请求？

> ID：15230351
> 
> 赞同：4
> 
> 时间：2013-03-05T17:31:57.113
> 
> 标签：google-chrome, logging

为什么 Chrome 会发送 HEAD 请求？日志中的示例：

```
2013-03-04 07:43:51 W3SVC7 NS1 GET /page.html 80 - *.*.*.* HTTP/1.1 Mozilla/5.0+(Windows+NT+6.1;+WOW64)+AppleWebKit/537.22+(KHTML,+like+Gecko)+Chrome/25.0.1364.97+Safari/537.22

2013-03-04 07:43:51 W3SVC7 NS1 HEAD / - 80 - *.*.*.* HTTP/1.1 Mozilla/5.0+(Windows+NT+6.1;+WOW64)+AppleWebKit/537.22+(KHTML,+like+Gecko)+Chrome/25.0.1364.97+Safari/537.22 
```

我有一个禁止系统，这个头部请求真的很烦人，它的发生与 GET 请求完全相同。

它的性质是什么？任何帮助表示赞赏。

ps：我注意到头部请求都只针对我的主页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:48:10.427

[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616)规定：

```
9.4 HEAD

The HEAD method is identical to GET except that the server MUST NOT
return a message-body in the response. The metainformation contained
in the HTTP headers in response to a HEAD request SHOULD be identical
to the information sent in response to a GET request. This method can
be used for obtaining metainformation about the entity implied by the
request without transferring the entity-body itself. This method is
often used for testing hypertext links for validity, accessibility,
and recent modification.

The response to a HEAD request MAY be cacheable in the sense that the
information contained in the response MAY be used to update a
previously cached entity from that resource. If the new field values
indicate that the cached entity differs from the current entity (as
would be indicated by a change in Content-Length, Content-MD5, ETag
or Last-Modified), then the cache MUST treat the cache entry as
stale. 
```

很可能它正在尝试验证客户端 cookie/会话对服务器有效。

# php - CI - 钻到单个柱子/线程

> ID：15230354
> 
> 赞同：0
> 
> 时间：2013-03-05T17:32:05.100
> 
> 标签：php, codeigniter

有人可以告诉我我做错了什么 - 我目前正在关注一个网络 tuts+ 视频，该视频经历了列出一系列帖子的过程，然后能够点击一个帖子，以显示细节。

我正在为我自己的解决方案/Web 应用程序调整上述方法，但我不知道为什么我的数组是空白的。

我正在使用这条线创建到下一个控制器的链接/锚点

```
<a href="<?php echo base_url(); ?>Search/site/<?php echo $site->siteID; ?>"><?php echo $site->site_title; ?> 
```

我已经突出显示了我认为我会错过的代码，

谢谢

**控制器**

```
 class Search extends CI_Controller {

    public function display($sort_by = 'site_title', $sort_order = 'asc', $offset = 0)
    {
    $limit = 20;
    $data['columns'] = array(
        'site_title' => 'Site Name',
        'site_uprn' => 'Unique Property Reference'
    );
    $this->load->model('search_model');
        $results = $this->search_model->search_sites($limit, $offset, $sort_by, $sort_order);

        $data['sites'] = $results['rows'];
        $data['num_results'] = $results['num_rows'];

        //pagination

        $this->load->library('pagination');
        $config = array ();
        $config['base_url'] = site_url("Search/display/$sort_by/$sort_order");
        $config['total_rows'] = $data['num_results'];
        $config['per_page'] = $limit;
        $config['uri_segment'] = 5;
        $this->pagination->initialize($config);
        $data['pagination'] = $this->pagination->create_links();

        $data['sort_by'] = $sort_by;
        $data['sort_order'] = $sort_order;

        $this->load->view('search', $data);
    }

    **function site($siteID){
    $this->load->model('search_model');
        $data['site_detail']=$this->search_model->site_detail($siteID);

        //$this->load->view('site', $data); 
        }   
}** 
```

**模型**

```
 <?php
class Search_model extends CI_Model {

    function search_sites($limit, $offset, $sort_by, $sort_order){

        $sort_order = ($sort_order == 'desc') ? 'desc' : 'asc';
        $sort_columns = array('site_title', 'site_uprn');
        $sort_by = (in_array($sort_by, $sort_columns)) ? $sort_by : 'site_title';

     //site table
     $q = $this->db->select('siteID, site_title, site_uprn')
        ->from('sites')
        ->limit($limit, $offset)
        ->order_by($sort_by, $sort_order);

    $ret['rows'] = $q->get()->result();

     //count query

    $q = $this->db->select('COUNT(*) as count', FALSE)
        ->from('sites');

    $tmp = $q->get()->result();

    $ret['num_rows'] = $tmp[0]->count;

    return $ret;
    }

    **//sites details
    function site_detail($siteID){

    $this->db->select()->from('sites')->where('siteID', $siteID);
    $query = $this->db->get();
    return $query->first_row('array');
    }
}** 
```

**看法**

```
 <div id="right">
         <h5>Site Details</h5>
         <ul>
         <li><?php $site_detail['siteID']?></li>
          <li><?php $site_detail['site_title']?></li>
         </div> 
```

# php - mongodb文档结构和mvc模型结构

> ID：15230366
> 
> 赞同：3
> 
> 时间：2013-03-05T17:32:39.427
> 
> 标签：php, mongodb

我从 CodeIgniter/MySQL 来到 Laravel/MongoDB 应用程序。

我的应用程序结构是：

用户（型号）

*   ID
*   名
*   姓
*   年龄
*   性别
*   facebook_id
*   facebook_data
*   google_id
*   谷歌数据

测试（模型）

*   用户身份
*   类型
*   标题
*   地位
*   结果

在 MongoDB 中，我应该有一个包含许多 TESTS 的 USER 集合，还是将 TESTS 放在 USER 集合之外？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:10:48.987

## 数据建模注意事项

这在[mongoDB 文档](http://docs.mongodb.org/manual/core/data-modeling/)中有一些详细介绍- 尽管它不是 mongoDB 特定的问题。

没有全局正确或错误的答案，但作为一项规则，如果您正在考虑创建嵌入式文档*数组，例如：*

```
db.posts.findOne();
{
    title: "Some Post",
    comments: [
        {
            _id: ObjectId("x"),
            author_id: ObjectId("y"),
            body: "z",
            created: Date()
        },
        {
            _id: ObjectId("a"),
            author_id: ObjectId("b"),
            body: "c",
            created: Date()
        },
    ]
} 
```

...这会很好，只有少量的数据。对于非平凡的数据量，它可能非常限制/有问题。例如，如果每个帖子有数百条评论 - 很难有效地对它们进行分页。因此，如果您希望嵌入文档的数量很大，请不要创建嵌入文档的数组 - 而是使用单独的集合。

## 问题中数据的示例架构

您可以为您的数据考虑以下架构：

用户：

```
_id: objectId
firstname
lastname
age
gender
facebook: {
    id: longint/string
    locale:
    ...
}
google: {
    id: string
    age:
    ...
} 
```

测试

```
_id: objectId
user_id: objectId
type
title
status
result 
```

facebook 和 google 对象持有问题中所写的“数据” - 但除此之外，您有一个普通用户有很多测试，测试属于用户数据关系。这允许进行任意数量的测试，并且考虑到问题中的信息，并没有任何真正的缺点。

# c# - 防止 Entity Framework 5 查询 Information_Schema_Tables

> ID：15230367
> 
> 赞同：3
> 
> 时间：2013-03-05T17:32:44.490
> 
> 标签：c#, entity-framework, entity-framework-5

在 EF 4.1 中，您曾经删除 IncludeMetadataConvention 以防止 EF 在每次查询时查询数据库元数据。

在 EF 5 中，我收到有关 IncludeMetadataConvention 已过时的警告，在 LinqPad 中，我可以看到 EF 现在正在查询每次使用的迁移历史记录。我正在开发一个数据库优先项目（但使用 POCO 和 DbContext）。我不想要这些额外查询的开销。如何关闭它们？

**更新** 我发现我可以通过调用在每个 dbContext 的基础上禁用它

```
System.Data.Entity.Database.SetInitializer<theDbContext>(null); 
```

但是，我希望能够全局禁用初始化（想象一个大型应用程序，我们希望确保在将其部署到生产环境时不会运行这些查询（并且绝对不会尝试创建数据库）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:54:26.153

如果您需要为大型应用程序中的每个上下文类型执行此操作，您可以创建一些代码，这些代码将遍历您的所有程序集，找到所有派生自的类型，`DbContext`并通过反射为每个找到的类型调用该调用。

顺便提一句。从 EF 4.3 开始，您还可以[从配置中更改初始化程序，](http://msdn.microsoft.com/en-us/data/jj556606.aspx)但它仍然基于上下文，因为人们通常没有超过一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T19:23:09.420

为什么不将代码放在 DbContext 类的构造函数中？

我这样做并设置了一个参数来禁用 AutoDetectChangesEnabled、LazyLoading 和 Proxy CreationEnabled。

# php - 将表单数据插入 MySQL？

> ID：15230371
> 
> 赞同：4
> 
> 时间：2013-03-05T17:32:48.940
> 
> 标签：php, html, mysql

我正在使用 jQuery 表单来收集用户数据，并且我正在尝试将表单值插入到表中`ptb_registrations`。

我收到错误“更新数据库错误”

有人可以告诉我哪里出错了，这应该很简单。

HTML：

```
<form action="process_registration.php" method="post" id="reg_form">

    <!-- #first_step -->
    <div id="first_step">
        <h1>SIGN UP FOR A FREE <span>ACTION-TIME.COM</span> ACCOUNT</h1>
        <div class="form">
            <input type="text" name="username" id="username" value="username" />
            <label for="username">At least 4 characters. Uppercase letters, lowercase letters and numbers only.</label>

            <input type="password" name="password" id="password" value="password" />
            <label for="password">At least 4 characters. Use a mix of upper and lowercase for a strong password.</label>

            <input type="password" name="cpassword" id="cpassword" value="password" />
            <label for="cpassword">If your passwords aren’t equal, you won’t be able to continue with signup.</label>
        </div>      <!-- clearfix --><div class="clear"></div><!-- /clearfix -->
        <input class="submit" type="submit" name="submit_first" id="submit_first" value="" />
    </div>      <!-- clearfix --><div class="clear"></div><!-- /clearfix -->

    <!-- #second_step -->
    <div id="second_step">
        <h1>SIGN UP FOR A FREE <span>WEBEXP18</span> ACCOUNT</h1>

        <div class="form">
            <input type="text" name="firstname" id="firstname" value="first name" />
            <label for="firstname">Your First Name. </label>
            <input type="text" name="lastname" id="lastname" value="last name" />
            <label for="lastname">Your Last Name. </label>
            <input type="text" name="email" id="email" value="email address" />
            <label for="email">Your email address. We send important administration notices to this address. </label>                    
        </div>      <!-- clearfix --><div class="clear"></div><!-- /clearfix -->
        <input class="submit" type="submit" name="submit_second" id="submit_second" value="" />
    </div>      <!-- clearfix --><div class="clear"></div><!-- /clearfix -->

    <!-- #third_step -->
    <div id="third_step">
        <h1>SIGN UP FOR A FREE <span>WEBEXP18</span> ACCOUNT</h1>

        <div class="form">
            <select id="age" name="age">
                <option> 0 - 17</option>
                <option>18 - 25</option>
                <option>26 - 40</option>
                <option>40+</option>
            </select>
            <label for="age">Your age range. </label> <!-- clearfix --><div class="clear"></div><!-- /clearfix -->

            <select id="gender" name="gender">
                <option>Male</option>
                <option>Female</option>
            </select>
            <label for="gender">Your Gender. </label> <!-- clearfix --><div class="clear"></div><!-- /clearfix -->

            <select id="country" name="country">
                <option>United States</option>
                <option>United Kingdom</option>
                <option>Canada</option>
                <option>Serbia</option>
                <option>Italy</option>
            </select>
            <label for="country">Your country. </label> <!-- clearfix --><div class="clear"></div><!-- /clearfix -->

        </div>      <!-- clearfix --><div class="clear"></div><!-- /clearfix -->
        <input class="submit" type="submit" name="submit_third" id="submit_third" value="" />

    </div>      <!-- clearfix --><div class="clear"></div><!-- /clearfix -->

    <!-- #fourth_step -->
    <div id="fourth_step">
        <h1>SIGN UP FOR A FREE <span>WEBEXP18</span> ACCOUNT</h1>

        <div class="form">
            <h2>Summary</h2>

            <table>
                <tr><td>Username</td><td></td></tr>
                <tr><td>Password</td><td></td></tr>
                <tr><td>Email</td><td></td></tr>
                <tr><td>Name</td><td></td></tr>
                <tr><td>Age</td><td></td></tr>
                <tr><td>Gender</td><td></td></tr>
                <tr><td>Country</td><td></td></tr>
            </table>
        </div>      <!-- clearfix --><div class="clear"></div><!-- /clearfix -->
        <input class="send submit" type="submit" name="submit_fourth" id="submit_fourth" value="" />            
    </div>

</form> 
```

PHP/MYSQL：

```
<?php ob_start(); 

include '../includes/_config/connection.php'; 

$query="INSERT INTO ptb_registrations (ID,
     username,
     password,
     firstname,
     lastname,
     email,
     age,
     gender,
     country
 )
VALUES('NULL',
     '".$username."',
     '".$password."',
     '".$firstname."',
     '".$lastname."',
     '".$email."',
     '".$age."',
     '".$gender."',
     '".$country."'
)";
mysql_query($query) or die ('Error updating database');
?>

<?php include ('includes/send_email/reg_email.php'); ?>

<? ob_flush(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:39:58.783

如果它的自动增量，你不必指定 id 值

尝试这个

```
 $query="INSERT INTO ptb_registrations (
 username,
 password,
 firstname,
 lastname,
 email,
 age,
 gender,
 country

 )
VALUES(
'".mysql_real_escape_string($username)."',
'".mysql_real_escape_string($password)."',
'".mysql_real_escape_string($firstname)."',
'".mysql_real_escape_string($lastname)."',
'".mysql_real_escape_string($email)."',
'".mysql_real_escape_string($age)."',
'".mysql_real_escape_string($gender)."',
'".mysql_real_escape_string($country)."'
)"; 
```

你应该逃避你的价值观`mysql_real_escape_string()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:48:11.623

如果**ID**是主键和自动增量，那么您不需要传入查询并使用此查询：

```
$query = " INSERT INTO ptb_registrations SET
username = '".mysql_real_escape_string($username)."',
password = '".mysql_real_escape_string($password)."',
firstname = '".mysql_real_escape_string($firstname)."',
lastname = '".mysql_real_escape_string($lastname)."',
email = '".mysql_real_escape_string($email)."',
age = '".mysql_real_escape_string($email)."',
gender = '".mysql_real_escape_string($gender)."',
country = '".mysql_real_escape_string($country)."'"; 
```

希望对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:49:43.590

只需从 null 中删除单引号并使用不带引号的方法，例如 null

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T07:41:46.487

删除列名并尝试，它可以工作。尝试这样的事情

```
INSERT INTO table_name values(NULL, column_name); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-20T07:57:09.680

试试这个查询：

```
$query="INSERT INTO ptb_registrations(username,password,firstname,lastname,email,age,    gender,country) VALUES('".$username."','".$password."','".$firstname."',     '".$lastname."','".$email."','".$age."','".$gender."','".$country."')"; 
```

# ruby-on-rails - heroku/rails 部署

> ID：15230376
> 
> 赞同：0
> 
> 时间：2013-03-05T17:33:02.940
> 
> 标签：ruby-on-rails, heroku

我正在关注 Hartl 的教程，并且在第 5 章之后无法推送到 heroku。我收到错误“我们很抱歉，出了点问题。我已经阅读了 10-15 个关于它的其他 stackoverflow 问题，但他们的解决方案都没有帮助我。 我跑了

```
RAILS_ENV=production bundle exec rake assets:precompile 
```

和

```
heroku run rake db:migrate 
```

我在下面包含了我的 heroku 日志错误和 Gemfile。谢谢！

```
 2013-03-05T16:02:17+00:00 heroku[run.7311]: Starting process with command `bundle exec            rake db:migrate`
    2013-03-05T16:02:17+00:00 heroku[run.7311]: Awaiting client
    2013-03-05T16:02:17+00:00 heroku[run.7311]: State changed from starting to up
    2013-03-05T16:02:21+00:00 heroku[run.7311]: Client connection closed. Sending SIGHUP to all processes
    2013-03-05T16:02:22+00:00 heroku[run.7311]: Process exited with status 0
    2013-03-05T16:02:22+00:00 heroku[run.7311]: State changed from up to complete
    .
    .
    .
    2013-03-05T16:15:23+00:00 heroku[run.8755]: Awaiting client
    2013-03-05T16:15:23+00:00 heroku[run.8755]: Starting process with command `bundle exec rake db:drop`
    2013-03-05T16:15:23+00:00 heroku[run.8755]: State changed from starting to up
    2013-03-05T16:15:25+00:00 heroku[run.8755]: Client connection closed. Sending SIGHUP to all processes
    2013-03-05T16:15:27+00:00 heroku[run.8755]: State changed from up to complete
    2013-03-05T16:15:27+00:00 heroku[run.8755]: Process exited with status 0
    2013-03-05T16:16:01+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by zyskowski.rob@gmail.com
    2013-03-05T16:16:03+00:00 heroku[run.8187]: Awaiting client
    2013-03-05T16:16:03+00:00 heroku[run.8187]: Starting process with command `bundle exec rake db:migrate`
    2013-03-05T16:16:03+00:00 heroku[run.8187]: State changed from starting to up
    2013-03-05T16:16:09+00:00 heroku[run.8187]: Process exited with status 0
    2013-03-05T16:16:09+00:00 heroku[run.8187]: State changed from up to complete 
```

宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.12'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :production, :staging do
  gem "pg"
end

group :development, :test do
  gem "sqlite3-ruby", :require => "sqlite3"
end

group :development do
    gem 'rspec-rails'
end

group :test do
    gem 'rspec'
    gem 'webrat'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

# See https://github.com/sstephenson/execjs#readme for more supported runtimes
# gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

如上所述更新我的 Gemfile 后，我的 heroku 日志看起来更好，但我仍然遇到同样的问题。这是我最近的heroku日志：

```
 2013-03-05T16:21:24+00:00 heroku[web.1]: Stopping all processes with SIGTERM
    2013-03-05T16:21:25+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:90:in `select'
    2013-03-05T16:21:25+00:00 app[web.1]: [2013-03-05 16:21:25] ERROR SignalException: SIGTERM
    2013-03-05T16:21:32+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
    2013-03-05T16:21:32+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
    2013-03-05T16:21:35+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
    2013-03-05T16:21:35+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
    2013-03-05T16:21:37+00:00 heroku[web.1]: Process exited with status 137
    2013-03-05T16:21:39+00:00 app[web.1]: [2013-03-05 16:21:39] INFO  WEBrick 1.3.1
    2013-03-05T16:21:39+00:00 app[web.1]: [2013-03-05 16:21:39] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
    2013-03-05T16:21:39+00:00 app[web.1]: [2013-03-05 16:21:39] INFO  WEBrick::HTTPServer#start: pid=2 port=28050
    2013-03-05T16:21:40+00:00 heroku[web.1]: State changed from starting to up
    2013-03-05T16:23:08+00:00 app[web.1]: => Booting WEBrick
    2013-03-05T16:23:08+00:00 app[web.1]: => Rails 3.2.12 application starting in production on http://0.0.0.0:28050
    2013-03-05T16:23:08+00:00 app[web.1]: Started GET "/" for 173.28.201.119 at 2013-03-05 16:23:08 +0000
    2013-03-05T16:23:08+00:00 app[web.1]: => Call with -d to detach
    2013-03-05T16:23:08+00:00 app[web.1]: => Ctrl-C to shutdown server
    2013-03-05T16:23:09+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
    2013-03-05T16:23:09+00:00 app[web.1]: Processing by PagesController#home as HTML
    2013-03-05T16:23:09+00:00 app[web.1]:   Rendered pages/home.html.erb within layouts/application (7.7ms)
    2013-03-05T16:23:09+00:00 app[web.1]: Completed 500 Internal Server Error in 82ms
    2013-03-05T16:23:09+00:00 app[web.1]: 
    2013-03-05T16:23:09+00:00 app[web.1]:   Rendered layouts/_stylesheets.html.erb (15.1ms)
    2013-03-05T16:23:09+00:00 app[web.1]: ActionView::Template::Error (blueprint/screen.css isn't precompiled):
    2013-03-05T16:23:09+00:00 app[web.1]:     2: <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>     
    2013-03-05T16:23:09+00:00 app[web.1]:     1: <!--[if lt IE 9]-->
    2013-03-05T16:23:09+00:00 app[web.1]:     3: <!--[endif]-->
    2013-03-05T16:23:09+00:00 app[web.1]:     4: <%= stylesheet_link_tag 'blueprint/screen', :media => 'screen' %>
    2013-03-05T16:23:09+00:00 app[web.1]:     5: <%= stylesheet_link_tag 'blueprint/print',  :media => 'print' %>
    2013-03-05T16:23:09+00:00 app[web.1]:     6: <!--[if lt IE 8]><%= stylesheet_link_tag 'blueprint/ie' %><![endif]-->
    2013-03-05T16:23:09+00:00 app[web.1]:   app/views/layouts/_stylesheets.html.erb:4:in `_app_views_layouts__stylesheets_html_erb___2240892464821239054_34301780'
    2013-03-05T16:23:09+00:00 app[web.1]:     7: <%= stylesheet_link_tag 'custom', :media => 'screen' %>
    2013-03-05T16:23:09+00:00 app[web.1]:   app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb__3847180770533719708_34372820'
    2013-03-05T16:23:09+00:00 app[web.1]: 
    2013-03-05T16:23:09+00:00 app[web.1]: 
    2013-03-05T16:23:09+00:00 heroku[router]: at=info method=GET path=/ host=stark-mesa-9938.herokuapp.com fwd="173.28.201.119" dyno=web.1 queue=0 wait=0ms connect=1ms service=823ms status=500 bytes=643
    2013-03-05T16:23:10+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=stark-mesa-9938.herokuapp.com fwd="173.28.201.119" dyno=web.1 queue=0 wait=5ms connect=17ms service=20ms status=200 bytes=0
    2013-03-05T16:25:55+00:00 app[web.1]: Started GET "/" for 173.28.201.119 at 2013-03-05 16:25:55 +0000
    2013-03-05T16:25:55+00:00 app[web.1]: Processing by PagesController#home as HTML
    2013-03-05T16:25:56+00:00 app[web.1]:   Rendered pages/home.html.erb within layouts/application (2.7ms)
    2013-03-05T16:25:56+00:00 app[web.1]: Completed 500 Internal Server Error in 5ms
    2013-03-05T16:25:56+00:00 app[web.1]: ActionView::Template::Error (blueprint/screen.css isn't precompiled):
    2013-03-05T16:25:56+00:00 app[web.1]:   Rendered layouts/_stylesheets.html.erb (0.7ms)
    2013-03-05T16:25:56+00:00 app[web.1]: 
    2013-03-05T16:25:56+00:00 app[web.1]:     1: <!--[if lt IE 9]-->
    2013-03-05T16:25:56+00:00 app[web.1]:     2: <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>     
    2013-03-05T16:25:56+00:00 app[web.1]:     3: <!--[endif]-->
    2013-03-05T16:25:56+00:00 app[web.1]:     5: <%= stylesheet_link_tag 'blueprint/print',  :media => 'print' %>
    2013-03-05T16:25:56+00:00 app[web.1]:     4: <%= stylesheet_link_tag 'blueprint/screen', :media => 'screen' %>
    2013-03-05T16:25:56+00:00 app[web.1]:     6: <!--[if lt IE 8]><%= stylesheet_link_tag 'blueprint/ie' %><![endif]-->
    2013-03-05T16:25:56+00:00 app[web.1]:     7: <%= stylesheet_link_tag 'custom', :media => 'screen' %>
    2013-03-05T16:25:56+00:00 app[web.1]: 
    2013-03-05T16:25:56+00:00 app[web.1]: 
    2013-03-05T16:25:56+00:00 app[web.1]:   app/views/layouts/_stylesheets.html.erb:4:in `_app_views_layouts__stylesheets_html_erb___2240892464821239054_34301780'
    2013-03-05T16:25:56+00:00 app[web.1]:   app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb__3847180770533719708_34372820'
    2013-03-05T16:25:56+00:00 heroku[router]: at=info method=GET path=/ host=stark-mesa-9938.herokuapp.com fwd="173.28.201.119" dyno=web.1 queue=0 wait=0ms connect=6ms service=19ms status=500 bytes=643
    2013-03-05T16:25:56+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=stark-mesa-9938.herokuapp.com fwd="173.28.201.119" dyno=web.1 queue=0 wait=0ms connect=1ms service=7ms status=304 bytes=0
    2013-03-05T17:30:26+00:00 heroku[web.1]: Stopping all processes with SIGTERM
    2013-03-05T17:30:27+00:00 app[web.1]: [2013-03-05 17:30:27] ERROR SignalException: SIGTERM
    2013-03-05T17:30:27+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:90:in `select'
    2013-03-05T17:30:36+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
    2013-03-05T17:30:36+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
    2013-03-05T17:30:38+00:00 heroku[web.1]: Process exited with status 137
    2013-03-05T17:30:38+00:00 heroku[web.1]: State changed from up to down
    2013-03-05T18:07:49+00:00 heroku[slugc]: Slug compilation started
    2013-03-05T18:09:15+00:00 heroku[api]: Release v14 created by zyskowski.rob@gmail.com
    2013-03-05T18:09:15+00:00 heroku[api]: Deploy b3805c8 by zyskowski.rob@gmail.com
    2013-03-05T18:09:15+00:00 heroku[web.1]: State changed from down to starting
    2013-03-05T18:09:16+00:00 heroku[slugc]: Slug compilation finished
    2013-03-05T18:09:18+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 14406`
    2013-03-05T18:09:23+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
    2013-03-05T18:09:23+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
    2013-03-05T18:09:31+00:00 app[web.1]: [2013-03-05 18:09:31] INFO  WEBrick 1.3.1
    2013-03-05T18:09:31+00:00 app[web.1]: [2013-03-05 18:09:31] INFO  WEBrick::HTTPServer#start: pid=2 port=14406
    2013-03-05T18:09:31+00:00 app[web.1]: [2013-03-05 18:09:31] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
    2013-03-05T18:09:35+00:00 heroku[web.1]: State changed from starting to up
    2013-03-05T18:09:38+00:00 app[web.1]: Started GET "/" for 129.255.225.74 at 2013-03-05 18:09:38 +0000
    2013-03-05T18:09:38+00:00 app[web.1]: => Booting WEBrick
    2013-03-05T18:09:38+00:00 app[web.1]: => Rails 3.2.12 application starting in production on http://0.0.0.0:14406
    2013-03-05T18:09:38+00:00 app[web.1]: => Ctrl-C to shutdown server
    2013-03-05T18:09:38+00:00 app[web.1]: => Call with -d to detach
    2013-03-05T18:09:39+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
    2013-03-05T18:09:40+00:00 app[web.1]: Processing by PagesController#home as HTML
    2013-03-05T18:09:40+00:00 app[web.1]:   Rendered pages/home.html.erb within layouts/application (10.3ms)
    2013-03-05T18:09:40+00:00 app[web.1]:   Rendered layouts/_stylesheets.html.erb (17.1ms)
    2013-03-05T18:09:40+00:00 app[web.1]: Completed 500 Internal Server Error in 135ms
    2013-03-05T18:09:40+00:00 app[web.1]: ActionView::Template::Error (blueprint/screen.css isn't precompiled):
    2013-03-05T18:09:40+00:00 app[web.1]:     1: <!--[if lt IE 9]-->
    2013-03-05T18:09:40+00:00 app[web.1]:     2: <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>     
    2013-03-05T18:09:40+00:00 app[web.1]:     3: <!--[endif]-->
    2013-03-05T18:09:40+00:00 app[web.1]:     4: <%= stylesheet_link_tag 'blueprint/screen', :media => 'screen' %>
    2013-03-05T18:09:40+00:00 app[web.1]: 
    2013-03-05T18:09:40+00:00 app[web.1]:     5: <%= stylesheet_link_tag 'blueprint/print',  :media => 'print' %>
    2013-03-05T18:09:40+00:00 heroku[router]: at=info method=GET path=/ host=stark-mesa-9938.herokuapp.com fwd="129.255.225.74" dyno=web.1 queue=0 wait=0ms connect=4ms service=4384ms status=500 bytes=643
    2013-03-05T18:09:40+00:00 app[web.1]:     6: <!--[if lt IE 8]><%= stylesheet_link_tag 'blueprint/ie' %><![endif]-->
    2013-03-05T18:09:40+00:00 app[web.1]:     7: <%= stylesheet_link_tag 'custom', :media => 'screen' %>
    2013-03-05T18:09:40+00:00 app[web.1]:   app/views/layouts/_stylesheets.html.erb:4:in `_app_views_layouts__stylesheets_html_erb___158571620836036303_35162880'
    2013-03-05T18:09:40+00:00 app[web.1]:   app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb___3114180369605444575_34223240'
    2013-03-05T18:09:40+00:00 app[web.1]: 
    2013-03-05T18:09:40+00:00 app[web.1]: 
    2013-03-05T18:09:42+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=stark-mesa-9938.herokuapp.com fwd="129.255.225.74" dyno=web.1 queue=0 wait=10ms connect=46ms service=1187ms status=200 bytes=0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T11:09:54.873

这是资产预编译问题，所以请在本地预编译资产并更改环境设置以检查预编译然后部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:41:40.590

你用的是教程的第二版吗？如果你是，这是我在第 7 章之前的 Gemfile，完全符合教程的建议。可能有不兼容？

```
source 'https://rubygems.org'

gem 'rails', '3.2.12'
gem 'bootstrap-sass', '2.1'
gem 'bcrypt-ruby', '3.0.1'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'childprocess', '0.3.6'

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.11.0'
  gem 'guard-rspec', '1.2.1'
  gem 'guard-spork', '1.2.0'
  gem 'spork', '0.9.2'
end

group :development do
  gem 'annotate', '2.5.0'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'coffee-rails', '3.2.2'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.2.3'
end

gem 'jquery-rails', '2.0.2'

group :test do
  gem 'capybara', '1.1.2'
  gem 'rb-fsevent', '0.9.1', :require => false
  gem 'growl', '1.0.3'
  gem 'factory_girl_rails', '4.1.0'
end

group :production do
  gem 'pg', '0.12.2'
end

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:11:28.997

我无法对您的问题添加评论，所以我在这里问。

你在关注这本书的最新版本吗？

```
2013-03-05T18:09:23+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-03-05T18:09:23+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5) 
```

提示您正在使用供应商插件。当前版本不包括供应商插件的使用（至少第 7 章）。如果您使用的是旧版本，则语法可能会发生细微的变化，从而导致不兼容问题。

请在继续之前检查书籍版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T06:15:01.997

看起来它缺少预编译的资产。`git add .`如果您在本地运行该命令，则需要`git commit`将资产放入 repo，然后`git push heroku`再一次。

此外，Heroku 的默认构建包会在部署期间尝试预编译资产，因此您可以尝试找出失败的原因。

您*不需要*添加 Procfile。Heroku 将使用合理的默认值。

# php - 为 SQL 记录中的每个日期添加 JSON 编码

> ID：15230378
> 
> 赞同：-1
> 
> 时间：2013-03-05T17:33:20.220
> 
> 标签：php, mysql, arrays, json

我在 mysql 中有一个表，它有一个开始日期和结束日期。

1 行的示例是：

```
startdate -> 20121224
endate -> 20121226
title -> name 
```

这将返回**（输出！！！）**：

```
[{"user":"378","date":"UNIX_TIMESTAMP(startdate)","title":"name","description":"6 Days","url":"UNIX_TIMESTAMP(enddate)","bmanager":"manager name","academic_year":"20120801","division":"division name","manager_id":"3"}] 
```

由于此记录跨越 3 天，我希望 JSON 为每个日期输出一个（唯一的区别是日期，请参见下文）**我想要这个**

```
[{"user":"378","date":"UNIX_TIMESTAMP(1st date)","title":"name","description":"6 Days","url":"UNIX_TIMESTAMP(1st date)","bmanager":"manager name","academic_year":"20120801","division":"division name","manager_id":"3"},
{"user":"378","date":"UNIX_TIMESTAMP(2nd date)","title":"name","description":"6 Days","url":"UNIX_TIMESTAMP(2nd date)","bmanager":"manager name","academic_year":"20120801","division":"division name","manager_id":"3"},
{"user":"378","date":"UNIX_TIMESTAMP(3rd date)","title":"name","description":"6 Days","url":"UNIX_TIMESTAMP(3rd date)","bmanager":"manager name","academic_year":"20120801","division":"division name","manager_id":"3"},] 
```

**这是我正在使用的脚本：**

```
$sqldata = mysql_query('
SELECT
datediff(requests.end_date, requests.start_date) as numdays,
requests.user,
UNIX_TIMESTAMP(requests.start_date) AS date,
requests.employee AS title, 
requests.days AS description,
UNIX_TIMESTAMP(requests.end_date) AS url,
business.line_manager AS bmanager,
requests.academic_year,
business.academic_year,
business.division,
line_managers.userid AS manager_id
FROM requests 
INNER JOIN holiday_entitlement_business_manual AS business ON requests.user=business.userid AND requests.academic_year=business.academic_year
INNER JOIN line_managers ON business.line_manager=line_managers.name
WHERE requests.approved = 1
');

$posts = array();

while($row = mysql_fetch_assoc($sqldata))
{
    $row['date'] = $row['date'].'000';
    $row['url'] = $row['url'].'000';
    $posts[] = $row;
}
mysql_free_result($sqldata);
die(json_encode($posts)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:54:39.167

尝试用以下代码替换您的代码：

```
$sqldata = mysql_query('
SELECT
requests.start_date as startdate,
datediff(requests.end_date, requests.start_date) as numdays,
requests.user,
UNIX_TIMESTAMP(requests.start_date) AS date,
requests.employee AS title, 
requests.days AS description,
UNIX_TIMESTAMP(requests.end_date) AS url,
business.line_manager AS bmanager,
requests.academic_year,
business.academic_year,
business.division,
line_managers.userid AS manager_id
FROM requests 
INNER JOIN holiday_entitlement_business_manual AS business ON requests.user=business.userid AND requests.academic_year=business.academic_year
INNER JOIN line_managers ON business.line_manager=line_managers.name
WHERE requests.approved = 1
');

$posts = array();

while($row = mysql_fetch_assoc($sqldata))
{
   $startDate = $row['startdate'];
   unset($array['startdate']);
   $dayDiff = $row['numdays'];
   $row['date'] = $row['date'].'000';
   $row['url'] = $row['url'].'000';
   for($i = 0; $i <= $dayDiff; $i++)
   {
      $row['date'] = ...; // Do here the date parsing and add $i to the days
      $posts[] = $row;
   }

}
mysql_free_result($sqldata);
die(json_encode($posts)); 
```

这些函数[dateparse()](http://www.php.net/manual/en/function.date-parse.php)和[mktime()](http://www.php.net/manual/en/function.mktime.php)可能会帮助您进行日期操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:56:17.060

不知道我是否明白你的意思。这可以给你一个起点。基本上，您需要获取所有行，然后为您希望考虑的每一天创建一条记录。

```
 $sqldata = mysql_query('
    SELECT
    datediff(requests.end_date, requests.start_date) as numdays,
    requests.user,
    UNIX_TIMESTAMP(requests.start_date) AS date,
    requests.employee AS title, 
    requests.days AS description,
    UNIX_TIMESTAMP(requests.end_date) AS url,
    business.line_manager AS bmanager,
    requests.academic_year,
    business.academic_year,
    business.division,
    line_managers.userid AS manager_id
    FROM requests 
    INNER JOIN holiday_entitlement_business_manual AS business ON requests.user=business.userid AND requests.academic_year=business.academic_year
    INNER JOIN line_managers ON business.line_manager=line_managers.name
    WHERE requests.approved = 1
    ');

$posts = array();

while($row = mysql_fetch_assoc($sqldata))
{
    $row['date'] = $row['date'];
    $row['url'] = $row['url'];
    for($x = $row['date']; $x < $row['url']; $x+= 86400) {
          // where 86400 makes you advancing by a day in secs
          $row['date'] = $x;
          $row['url'] = $x;
          $posts[] = $row;
    }
    $posts[] = $row;
}
mysql_free_result($sqldata);
die(json_encode($posts)); 
```

# wordpress - 什么会使 wordpress 中的 the_date 函数只显示在随机帖子上

> ID：15230379
> 
> 赞同：0
> 
> 时间：2013-03-05T17:33:21.897
> 
> 标签：wordpress

我正在为客户开发一个网站，我特别需要修改给定的 wordpress 模板。模板使用 get_template_part 函数调用内容。因此，对于索引页面上的循环，它应该在标题下显示 the_date，但由于某种原因，它显示在某些帖子上，而不是全部。

索引.php

```
<?php get_header(); ?>
<!-- Content -->
    <div class="container contentarea">
        <div class="row">
            <div class="column-content">
                <div id="content" role="main">
                    <?php if ( have_posts() ) : ?>

                    <?php while ( have_posts() ) : the_post(); ?>
                        <!-- Call content.php -->
                        <?php get_template_part( 'content' ); ?>
                    <?php endwhile; ?>

                    <div class="clearfix"></div>

                    <div class="paging">
                        <?php     if(function_exists('lugada_kriesi_pagination')) : lugada_kriesi_pagination(); else:  ?>
                        <?php global $wp_query; $total_pages =     $wp_query->max_num_pages; if ( $total_pages > 1 ) { ?>
                            <div id="nav-below" class="navigation">
                                <div class="nav-previous"><?php next_posts_link(__( '<span class="meta-nav">&laquo;</span> Older posts', 'newzeo' )) ?></div>    
                                <div class="nav-next"><?php previous_posts_link(__( 'Newer posts <span class="meta-nav">&raquo;</span>', 'newzeo' )) ?></div>    
                            </div>
                        <?php } endif; ?>
                    </div>

                    <?php else : ?>

                        <article id="post-0" class="post no-results not-found">
                            <header class="entry-header">
                                <h1 class="entry-title">Nothing Found</h1>
                            </header>
                            <div class="entry-content">
                                <p>Sorry, we can't find post you request. Please try search for a related post.</p>

                                </div>
                            </article>

                        <?php endif; ?>

                </div> <!-- #content -->
            </div> <!-- .column-content -->
            <div class="column-sidebar nomargin">
                <?php get_sidebar(); ?>
            </div>

        </div>
    </div>

<?php get_footer(); ?> 
```

内容.php

```
<div class="content-box bucket">

    <div id="post-<?php the_ID(); ?>" <?php post_class(); ?> itemscope itemtype="http://schema.org/Article" >

            <h2 class="entry-header">

                <div class="entry-meta clearfix" >

                    <!-- Sticky post -->
                    <?php if (is_sticky()) : ?>
                    <div class="sticky-label"></div>
                <?php endif; ?>

                <!-- Post title -->
                        <a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>" itemprop="name"><?php the_title(); ?></a>

                </div> <!-- .entry-meta -->

            </h2> <!-- .header -->

            <!-- Content -->
            <div class="entry-content clearfix" itemprop="description">
                <?php the_date('','<p><strong>','</strong></p>',true); ?> 
                <?php the_content('Continue reading'); ?>
                <div class="clearfix"></div>
                <?php wp_link_pages( array('before' => '<div class="page-link"> <span> Pages: </span>', 'after' => '</div>')); ?>   
            </div>

            <div class="entry-meta footerbox" >
                <!-- Category -->
                <span class="cat-links">
                    <span>Posted in</span>
                    <?php echo get_the_category_list(', '); ?>
                </span>

                <!-- If single & have tag -->
                <!-- Tag -->
                <?php if ( is_single() ): if (has_tag()) : ?>
                <span class="sep"> | </span>
                <span class="tag-links">
                    <span>Tagged</span>
                    <?php echo get_the_tag_list('',', ',''); ?>
                </span>
                <?php endif; ?>
                <?php edit_post_link('Edit', '<span class="edit-link"><span class="sep"> | </span>', '</span>'); ?>
                <div class="socialshareboxsingle clearfix">
                    Share this post, let the world know <?php lugada_social_button();?>
                </div>
                <?php endif; ?>
            </div> <!-- .footer -->

        </div> <!-- article  -->

</div>
<hr class="post-shadow"/>

<!-- If its single, a user has filled out their description and this is a multi-author blog, show a bio on their entries -->
<?php if ( is_single() ) : ?>
<?php if ( get_the_author_meta( 'description' ) && ( ! function_exists( 'is_multi_author' ) || is_multi_author() ) ) :  ?>
<div class="content-box">   
    <div id="author-info">

        <div id="author-avatar">
            <?php echo get_avatar( get_the_author_meta( 'user_email' ), 80 ); ?>
        </div>

        <div id="author-description">
            <h2 >About <?php echo get_the_author(); ?></h2>
            <?php the_author_meta( 'description' ); ?>
        </div>  

        <div id="author-link" class="clearfix">
            <?php if ( get_the_author_meta( 'user_url' )) : ?>
            <span>Add my circles on Google+ : </span>
            <span itemprop="author"><a href="<?php the_author_meta( 'user_url' ); ?>?rel=author" rel="me"><?php echo get_the_author(); ?></a></span>
            <br/>
            <?php endif; ?>
            <a href="<?php echo get_author_posts_url( get_the_author_meta( 'ID' ) ); ?>">
            View all posts by <?php echo get_the_author(); ?><span class="meta-nav">&rarr;</span>
            </a>
        </div>
    </div>
</div>
<hr class="post-shadow"/>
<?php endif; endif; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:08:53.247

它们不是随机的帖子。阅读[法典](http://codex.wordpress.org/Function_Reference/the_date)：

> 当同一天发布的页面上有多个帖子时，the_date() 仅显示第一个帖子的日期（即 the_date() 的第一个实例）。要为同一天发布的帖子重复日期，您应该使用带有[特定日期格式字符串的模板标签](http://codex.wordpress.org/Formatting_Date_and_Time)[the_time()](http://codex.wordpress.org/Template_Tags/the_time)或[get_the_date()](http://codex.wordpress.org/Template_Tags/get_the_date)（自 3.0 起）。

改变：

```
<?php the_date('','<p><strong>','</strong></p>',true); ?> 
```

到：

```
<p><strong><?php the_time('F j, Y'); ?></strong></p> 
```

# c - CCured在哪里下载？

> ID：15230380
> 
> 赞同：7
> 
> 时间：2013-03-05T17:33:23.190
> 
> 标签：c, formal-verification

在阅读了许多论文之后，我试图找到**CCured**源（甚至是二进制文件）来尝试在我的 C 源代码中使用它。

但是，所有链接似乎都已失效。经过一些谷歌搜索，我在这里问。如果您的硬盘上有一个压缩包，有人可以上传它们（来源、文档等）吗？

编辑：我还给其中一位作者发了电子邮件，但还没有得到回复。一段时间后将尝试给其他人发送电子邮件。

（引自论文）

> CCured 一个程序转换系统，为现有的 C 程序添加类型安全保证。CCured 尝试静态验证内存错误不会发生，并在静态验证不足的地方插入运行时检查。CCured 通过根据使用情况分离指针类型扩展了 C 的类型系统，它使用了一种非常简单的类型推断算法，能够推断现有 C 程序的适当指针类型。CCured 使用物理子类型在编译时识别和验证大量类型转换。使用运行时类型信息验证其他类型转换。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T20:42:37.327

更好地搜索该领域的其他项目，正如评论所言，这主要是作为论文开发的原型，然后被放弃。可能有一些在实际使用中，也许最接近您正在寻找的是基于[LLVM](http://llvm.org)的工具。或类似[夹板](http://splint.org)的东西。甚至是像[valgrind](http://valgrind.org)这样的仪表工具。

# latex - 如何在 doxygen 中禁用打字机文本的连字符？

> ID：15230386
> 
> 赞同：2
> 
> 时间：2013-03-05T17:33:54.333
> 
> 标签：latex, doxygen

我发现，在输出“\c”命令的文本时，doxygen 会为乳胶添加连字符提示，例如：

```
 {\ttfamily on\-Ready\-State\-Change\-Listener} 
```

我想禁用这种行为（所以 onReadyStateChangeListener 不会被连字符）。这可能吗？怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:57:00.167

不，这是不可能的。如果没有连字符提示，LaTeX 通常会将长标识符从页面运行到页边距，这就是引入它们的原因。

如果您真的想摆脱它，请查看函数`filterLatexString()`in并在函数末尾的默认情况下`src/utils.cpp`删除。`if`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-13T22:21:21.810

我发现这在 Doxygen 1.8.9.1 中是可能的，使用一个小的解决方法。

1.  创建用于 Doxygen 的自定义 header.tex 文件。（[说明](https://sites.google.com/site/opensourceconstriubtions/ettl-martin-1/tutorials/how-to-customize-header-and-footer-for-latex-output-of-doxygen "指示")）
2.  在 header.tex 文件中找到以`\newcommand{\+}`. 如果您没有找到该文本，请在文档顶部插入一个空行。
3.  将该行替换为以下文本：

    `\newcommand{\+}{}`

4.  使用带有 Doxygen 输出的 header.tex 文件（[说明](https://sites.google.com/site/opensourceconstriubtions/ettl-martin-1/tutorials/how-to-customize-header-and-footer-for-latex-output-of-doxygen "指示")）

这有效地禁用了 Doxygen 添加到单词中的所有断字标记。

**注意：**这是用于`\+`添加（例如`D\+O\+X\+Y\+G\+E\+N`）的单词。`\-`如果您只是将减号替换为上述步骤，它可能会起作用，但我尚未验证。

我发现一些标识符在应用这个之后仍然是连字符的，但是在更合理的地方。

另外，如@doxygen 所指出的，请注意进入页边距的文本。

# visual-studio - 如何使用 FluentMigrator 创建回滚到特定版本的命令行参数

> ID：15230388
> 
> 赞同：0
> 
> 时间：2013-03-05T17:34:03.473
> 
> 标签：visual-studio, github, fluent-migrator

我在 Visual Studios 的一个项目中添加了几个表。但是，我想使用 FluentMigrator 回滚到以前的版本。但是，在指定用于回滚多个版本的命令时，Git 网站并不是很有帮助：[https ://github.com/schambers/fluentmigrator/wiki/Command-Line-Runner-Options](https://github.com/schambers/fluentmigrator/wiki/Command-Line-Runner-Options)

如果我做这个命令行争论，它会恢复我添加的最后两个文件吗？我添加了命令：“rollback:toversion -- version 2”，但我不完全确定我是否使用了这个权利。

```
--conn "MyProject" --provider sqlserver --a "MyProject.DBMigrations\bin\Debug\MyProject.DBMigrations.dll" --task rollback:toversion --version 2  --verbose true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:31:41.930

如果要回滚 2 个步骤，请将任务设置为`rollback`并使用`steps`开关。

```
--conn "MyProject" --provider sqlserver --a "MyProject.DBMigrations\bin\Debug\MyProject.DBMigrations.dll" --task rollback --steps 2  --verbose true 
```

如果要回滚到特定版本，请使用`rollback:toversion`带有`version`开关的任务。然后，您将 this 引用的版本设置为迁移中迁移属性中的唯一 id。就我而言，我使用日期时间格式进行迁移，因此今天的日期和时间将为 201303062126。

```
 [Migration(201303062126)]
    public class CreateInitialDB : Migration
    {
        public override void Up()
        {
         ... 
```

如果我想回滚到那个特定版本，它看起来像这样：

```
--conn "MyProject" --provider sqlserver --a "MyProject.DBMigrations\bin\Debug\MyProject.DBMigrations.dll" --task rollback:toversion --version 201303062126 
```

将会发生的情况是，所有比此迁移更新的迁移都将被回滚，但迁移 201303062126 不会被回滚。

我将更新 wiki 以使下一个人更清楚。

# php - 查询死了，但完成了工作

> ID：15230391
> 
> 赞同：0
> 
> 时间：2013-03-05T17:34:08.087
> 
> 标签：php

我的查询将数据插入到记录中，但它也显示查询失败。它将记录插入数据库，但不是重定向到日历页面，而是显示查询失败。

```
//Create INSERT query
$qry = "INSERT INTO `customer`(`login_id`,`firstname`, `lastname`, `ad1`, `ad2`, `ad3`, `postcode`, `phone`, `email`) VALUES ('{$_SESSION['SESS_LOGIN_ID']}','{$_SESSION['SESS_FIRST_NAME']}','{$_SESSION['SESS_LAST_NAME']}', '$ad1', '$ad2', '$ad3', '$postcode', '$phone', '{$_SESSION['email']}');";   
$result = @mysql_query($qry);

//Check whether the query was successful or not
if($result) {
    //Create query
    $qry="SELECT user.login_id, customer.customer_id, customer.email FROM user, customer
    WHERE user.login_id = customer.login_id  AND customer.login_id= .'{$_SESSION['SESS_LOGIN_ID']}'.";
    $result=mysql_query($qry);

    //Check whether the query was successful or not
    if($result) {
        if(mysql_num_rows($result) == 1) {

            //Login Successful
            session_regenerate_id();
            $login = mysql_fetch_assoc($result);
            $_SESSION['SESS_CUSTOMER_ID']= $login['customer_id'];
            $_SESSION['SESS_CUSTOMER_EMAIL']= $login['email'];
            session_write_close();

            header("location: calendar.php");
            exit();
        }
    } else {
        die("Query failed");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:38:19.253

您的 INSERT 查询成功，但随后的 SELECT 失败，因为它有语法错误。在字符串中使用`{}`语法时，不要使用连接`.`字符。

改成

```
$qry="SELECT user.login_id, customer.customer_id, customer.email FROM user, customer WHERE user.login_id = customer.login_id  AND customer.login_id= '{$_SESSION['SESS_LOGIN_ID']}'"; 
```

或者不使用`{}`语法连接：

```
$qry="SELECT user.login_id, customer.customer_id, customer.email FROM user, customer WHERE user.login_id = customer.login_id  AND customer.login_id= '" . $_SESSION['SESS_LOGIN_ID'] . "'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:38:32.810

如果此查询失败：

```
$result=mysql_query($qry); 
```

然后是下一行：

```
if($result) { 
```

将导致该`else`位被使用，即

```
die("Query failed"); 
```

因此，请检查您的`SELECT`陈述中的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:39:22.807

您的第二个查询中有一个额外的点：

```
 Here
                                                                |
                                                                |
                                                                v
WHERE user.login_id = customer.login_id  AND customer.login_id= .'{$_SESSION['SESS_LOGIN_ID']}'."; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T17:41:49.397

这里需要指出几点：

*   您不应该使用`mysql_*`已弃用的函数。你应该看看使用 mysqli 或 PDO
*   您的第二个 SELECT 查询根本没有理由。您已经将所有这些信息插入到表中。你唯一的新东西是 login_id，我假设它是一个自动增量字段。您可以在第一次查询后通过简单地调用`mysql_insert_id()`
*   你原来的问题是你很可能在这里得到一个 SQL 语法错误：

`$qry="SELECT user.login_id, customer.customer_id, customer.email FROM user, customer WHERE user.login_id = customer.login_id AND customer.login_id= .'{$_SESSION['SESS_LOGIN_ID']}'.";`

请注意，您的句点和单引号将按字面意思包含在字符串中。你应该使用：

```
$qry="SELECT user.login_id, customer.customer_id, customer.email FROM user, customer
   WHERE user.login_id = customer.login_id  AND customer.login_id = {$_SESSION['SESS_LOGIN_ID']}"; 
```

# python - Python：'For'loop 只运行一次，Project Euler

> ID：15230393
> 
> 赞同：2
> 
> 时间：2013-03-05T17:34:11.867
> 
> 标签：python, primes

我一直在学习 Python 并使用 Project Euler 来修复我的一些数学技能。我遇到了[问题 35](http://projecteuler.net/problem=35)的问题。我已经生成了 100 万以下的所有素数，消除了包含任何偶数的素数，现在我只是尝试用剩余的约 3k 素数进行最后一次检查。

该功能应该：

1.  列出约 3k 个素数。
2.  返回一个新列表，该列表由原始列表中每个项目的所有旋转列表组成。

这就是我所拥有的，以及我对每一行的理解：

```
def rotations(lst):
    newlist = []
    for i in lst:                                              # Take each int item in list. 
        s = [int(j) for j in str(i)]                           # Turn each item into a list of digit strings
        num = ([s[k:]+s[:-len(s)+k] for k in range(len(s))])   # Generate list of rotations of strings 
        tmplst = [] 
        for l in num:                                          # For each string rotation
            tmplst.append(int(''.join(map(str,l))))            # Turn it into an integer, add that int to tmplst
        newlist.append(tmplst)                                 # Add each tmplist to 'newlist'
    return newlist 
```

仅输入`rotations([123,456])`产生：

```
[[123, 231, 312]] 
```

当我期待

```
[[123, 231, 312],[456,564,645]] 
```

任何可能出现问题的线索？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T17:43:04.887

每当有人拥有其他人（包括我自己）无法重现其奇怪行为的代码时，我立即想到：空格错误。并查看您的代码：

```
'    def rotations(lst):'
'            newlist = []'
'            for i in lst:                                              # Take each int item in list. '
'            \t    s = [int(j) for j in str(i)]                           # Turn each item into a list of digit strings'
'            \t    num = ([s[k:]+s[:-len(s)+k] for k in range(len(s))])   # Generate list of rotations of strings '
'            \t    tmplst = [] '
'            \t    for l in num:                                          # For each string rotation'
"                \t        tmplst.append(int(''.join(map(str,l))))            # Turn it into an integer, add that int to tmplst"
"                \t    newlist.append(tmplst)                                 # Add each tmplist to 'newlist'"
'                    return newlist'
'        ' 
```

在我看来，您可能正在混合制表符和空格。这可能会导致非常神秘的行为，因为某些行的缩进并不像您想象的那样多。运行你的程序

```
python -tt your_program_name.py 
```

确认，如果是这样，切换到使用四个空格缩进（我的意思是“制表符”，它由四个空格组成，而不是`\t`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:28:51.850

上一个答案中提到的空白错误解决了直接的问题——在 的第一遍结束时返回结果`for i in lst:`，而不是在循环完成后返回结果——但简化代码也很有意义，因此它和错误更少更容易被发现。这是一个示例（将函数重命名为 from`rotations`以`rotor`进行区分）。

```
def rotor(lst):
    out = []
    for i in lst:
        s = str(i)
        out.append([int(s[k:]+s[:k]) for k in range(len(s))])
    return out 
```

鉴于上述情况，`rotor([456, 1789, 25887])`返回

```
[[456, 564, 645],
 [1789, 7891, 8917, 9178],
 [25887, 58872, 88725, 87258, 72588]] 
```

# iphone - 在 iOS 中更改 kCTLigatureAttributeName 的值

> ID：15230399
> 
> 赞同：1
> 
> 时间：2013-03-05T17:34:24.277
> 
> 标签：iphone, ios, core-text

我正在尝试在我的 iOS 应用程序中使用连字字体，其他答案告诉我，为了做到这一点，我需要设置 kCTLigatureAttributeName = 2 （[在 iPhone 应用程序中嵌入连字字体](https://stackoverflow.com/questions/5550548/embedding-ligature-font-in-an-iphone-app/5553888)）。

但是，我对 iOS 比较陌生，并不真正了解如何做到这一点。kCTLigatureAttributeName 被声明为常量 - 我该如何更改它的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:30:27.307

您可以通过以下方式在属性文本上设置属性：

```
NSMutableAttributedString *string = [[NSMutableAttributedString alloc]
    initWithString:@"This is my String"];

[string setAttributes:@{(NSString *)kCTLigatureAttributeName:[NSNumber numberWithInt:2]}
    range:NSMakeRange(0, string.length)];

textView.attributedText = string; 
```

不要忘记将 CoreText 框架链接到您的项目中，并将 CoreText 标头导入您的代码中。

# ios - 核心数据：获取抽象实体并通过继承实体关系过滤

> ID：15230400
> 
> 赞同：4
> 
> 时间：2013-03-05T17:34:26.040
> 
> 标签：ios, objective-c, core-data, nspredicate, abstract

我有数据模型，有 4 个实体： 1\. 抽象实体“Term” 2\. 从“Term”继承的两个实体 - “Section”和“Type”，定义了与“Seminar”实体的关系

这是我的模型（由于声誉低，无法在此处附加图片）：[核心数据模型](http://d.pr/i/XqYR)

我正在获取实体“Term”，一切都很好。如何编写谓词来获取继承实体中设置“研讨会”计数> 0 的实体？[NSPredicate preditcateWithFormat:@"seminars.@count > 0"] 当然不起作用，因为现在在抽象“术语”中定义了这种关系。

我已经尝试将关系“研讨会”移动到抽象的“术语”，但我不知道如何定义从“研讨会”实体到“类型”结束“部分”的关系。

顺便说一句，我以这种方式使用 fetchedResultController 来实现 UITableView 单元格/部分/更新/通知魔术。我可以以编程方式过滤结果并自己填充控制器模型，但如果有任何方法可以保持*核心数据*范式，那就太好了。

在某些时候，Xcode 变得疯狂并崩溃，直到我放弃了对模型的所有更改。

我的代码很简单：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

NSEntityDescription *entity = [NSEntityDescription entityForName:@"Term" inManagedObjectContext:self.managedObjectContext];
fetchRequest.entity = entity;

fetchRequest.fetchBatchSize = 20;

NSArray *sortDescriptors = @[[[NSSortDescriptor alloc] initWithKey:@"vid" ascending:NO],
                             [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)]];

fetchRequest.sortDescriptors = sortDescriptors;

NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"vid" cacheName:CACHE_NAME]; 
```

感谢帮助。

# java - Java多线程对多线程的关系

> ID：15230403
> 
> 赞同：0
> 
> 时间：2013-03-05T17:34:46.773
> 
> 标签：java, multithreading, synchronization, thread-safety, gateway

我有一项服务可以从许多客户端获取请求，并在经过一些处理后向客户端发送响应。我使用 ThreadPoolExecutor (threadExecuterClient) 来处理客户端请求并将它们放在 BlockingQueue (requestQueue) 中。许多客户端可以发送并发请求。我有另一个 ThreadPoolExecutor (threadExecuterServer) 处理 requestQueue 中的请求。此处理基本上包括将该请求发送到服务器并获得响应。处理后，我需要将该响应发送给发出该请求的客户端。我很难跟踪哪个客户提出了哪个请求。我基本上需要找到一种将客户端请求映射到处理结果的方法。该服务就像一个网关。

任何处理此问题的想法表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:59:31.503

I assume your service accepts requests via HTTP ? Accept the request from your service and send back a [HTTP 202](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html) response. This response means that the request was accepted for processing. When you send the response, send the **Location** header to tell the client which URL to invoke to ascertain the status of your request. The client can poll this URL for status and a result.

The URL should contain a unique ID for each request. Your server can track that and populate a response when it is ready.

# java - 使用 NetBeans 模块以编程方式控制 NetBeans

> ID：15230413
> 
> 赞同：2
> 
> 时间：2013-03-05T17:35:49.487
> 
> 标签：java, netbeans, module

*我知道我可能应该使用 Eclipse，但无论如何......*

通常在我参加的计算机科学竞赛中，我们会获得一些问题的样本数据集，例如“prob01.in、PizzaProblem.text 等”。我正在编写一个 NetBeans 模块来创建一个项目，然后在指定位置用输入文件的 java 文件填充项目。

**所以，关于我的问题。有没有办法“控制”NetBeans，并用它来创建和打开项目和文件？**

我做了一个 breif google 搜索，没有发现任何有用的东西。

谢谢，-EpicDavi

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:48:31.420

[http://wiki.netbeans.org/OpenProjectsProgramaticallyInNetBeansIDE#Tutorial_.7C_Open_Projects_Programatically_in_NetBeans](http://wiki.netbeans.org/OpenProjectsProgramaticallyInNetBeansIDE#Tutorial_.7C_Open_Projects_Programatically_in_NetBeans)

此页面仅告诉您如何在 Netbeans 模块中以编程方式打开项目，但它应该让您走上正确的道路。不幸的是，我并不精通 NetBeans，因此我没有太多其他见解可以提供。

# ios - iOS 静态库依赖于其他静态库

> ID：15230417
> 
> 赞同：0
> 
> 时间：2013-03-05T17:35:55.713
> 
> 标签：ios, compiler-errors, static-libraries, socketrocket

我使用本[教程](http://www.galloway.me.uk/tutorials/ios-library-with-resources/)创建了一个静态 iOS 库。库本身依赖于`SocketRocket`库。

SocketRocket 包含在`#import <SocketRocket/SRWebSocket.h>`.

当我建立图书馆时，一切正常。但是，如果我将我的库集成到我的示例项目中，则会引发以下错误。

> 词法或预处理器问题
> 
> 找不到“SocketRocket/SRWebSocket.h”文件

**库如何构建，但后来在示例项目中找不到文件？**

**更新**

Library 的 Header Search Path 设置为`"$(SRCROOT)/Vendor/SocketRocket/"`，示例项目的 Header Search Path 设置为`"$(SRCROOT)/Vendor/MyLibrary/"`。如果我将它设置为`"$(SRCROOT)/Vendor/MyLibrary/**"`它会成功找到`SRWebSocket.h`并构建。但是，这也包括示例项目中的所有 SocketRocket 标头，我不希望这样。

**更新 2**

我把它缩小到以下

*   在静态库中，一个 .h 文件用于`#import <SocketRocket/SRWebSocket.h>`导入 SocketRocket。
*   如果我将库添加到我的示例项目中，则找不到 SRWebSocket.h 文件。
*   如何让示例项目识别此文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:25:26.900

您是否让用户设置标题搜索路径的“第 9 步：应用程序项目的最终设置”实际上指向了头文件的位置？

# java - 无效的转义序列（有效的是 \b \t \n \f \r \” \' \\ ）”语法错误

> ID：15230420
> 
> 赞同：1
> 
> 时间：2013-03-05T17:36:07.257
> 
> 标签：java, string, variables, ascii

```
print(" $$$$$$\           $$$$$\        $$$$$$\        $$\   $$\ "+newline+
      "$$  __$$\          \__$$ |      $$  __$$\       $$ |  $$ |"+newline+
      "$$ /  $$ |            $$ |      $$ /  $$ |      \$$\ $$  |"+newline+
      "$$$$$$$$ |            $$ |      $$$$$$$$ |       \$$$$  /"+newline+
      "$$  __$$ |      $$\   $$ |      $$  __$$ |       $$  $$< "+newline+
      "$$ |  $$ |      $$ |  $$ |      $$ |  $$ |      $$  /\$$\"+newline+
      "$$ |  $$ |      \$$$$$$  |      $$ |  $$ |      $$ /  $$ |"+newline+
      "\__|  \__|       \______/       \__|  \__|      \__|  \__|"+newline); 
```

大家好 ！我只是想将 ascii 艺术添加到我的游戏 gui 中，但出现此错误？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T17:38:25.213

反斜杠字符`\`是 Java 中的[转义字符](http://docs.oracle.com/javase/tutorial/java/data/characters.html)。编译器认为您正在尝试转义下一个字符，并且`\_`是无效的转义序列。您需要转义反斜杠本身。将每个替换`\`为`\\`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T17:41:49.927

要打印`\`您需要`\\`在字符串文字中指定的内容。

你不需要手动输入它们。您的 IDE 可能有一个很酷的功能，可以让您在粘贴到字符串文字时转义所有需要转义的字符。

对于日食，它位于：

窗口 > 首选项 > java > 编辑器 > 键入

然后检查`Escape text when pasting to a string literal`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:37:12.390

您需要将每个反斜杠加倍，即将每个反斜杠替换`\`为`\\`.

反斜杠字符在 Java 字符串文字中具有特殊含义。它表示所谓的[转义序列](http://docs.oracle.com/javase/tutorial/java/data/characters.html)的开始。例如，`\n`代表“新行”。

转义序列`\\`代表单个反斜杠字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T17:37:23.910

逃避反斜杠，基本上用你的所有反斜杠替换`\\`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T17:37:45.103

你所有的反斜杠都需要用双反斜杠转义：例如

```
print(" $$$$$\\"); 
```

# javascript - 只要对象属性不是 NaN，就将对象推送到数组

> ID：15230423
> 
> 赞同：0
> 
> 时间：2013-03-05T17:36:17.787
> 
> 标签：javascript, arrays, object

我知道我可以使用 .filter 来实现这一点，但是我不确定如何实现它。

我在数组中有如下对象

```
item {
  title : g.attributes.title,
  category : g.attributes.categoryid,
  possible: g.attributes.possible
} 
```

但是，数组中的某些项目可能具有 NaN 属性。

**我需要确保只有可能属性不是 NaN 的项目才会被推入数组。**

这是我完整代码的摘录：

```
function load(id){
   itemPath = lev1.lev2.lev3;
   items = [];
   for (var i = 0; i<itemPath.length; i++) {
      if(itemPath[i].attributes.id==id) {
         return itemPath[i].attributes.grades.models.map(function(g) {
            items.push(
               {
                  title : g.attributes.title,
                  category : g.attributes.categoryid,
                  possible: g.attributes.possible
               });
         });
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:40:03.853

```
function load(id){
   itemPath = lev1.lev2.lev3;
   items = [];
   for (var i = 0; i<itemPath.length; i++) {
      if(itemPath[i].attributes.id==id) {
         return itemPath[i].attributes.grades.models.map(function(g) {
            if(g.attributes.possible !== g.attributes.possible){
               return;
            }

            items.push(
               {
                  title : g.attributes.title,
                  category : g.attributes.categoryid,
                  possible: g.attributes.possible
               });
         });
      }
   }
} 
```

NaN 是 javascript 中唯一不等于自身的属性。只需遍历属性并检查它们，或者按照其他地方的建议在循环中使用内置的 NaN() 函数。

### 更新

由于您只担心可能的属性，因此只需使用`===`self 或 isNaN()将其作为 if 语句的一部分进行检查

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:41:14.023

只需将您的测试线从

```
if(itemPath[i].attributes.id==id) 
```

在要检查的属性上使用[`isNaN`功能](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/isNaN)

```
var attr = itemPath[i].attributes;
if (attr.id==id && !isNaN(attr.title) && !isNaN(attr.categoryid) && !isNaN(attr.possible)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:39:30.950

您可以`isNaN()`在添加之前使用并测试它...

```
function load(id){
   itemPath = lev1.lev2.lev3;
   items = [];
   for (var i = 0; i<itemPath.length; i++) {
      if(itemPath[i].attributes.id==id) {
         return itemPath[i].attributes.grades.models.map(function(g) {
            if( isNaN(g.attributes.title) || isNaN(g.attributes.categoryid) || isNaN(g.attributes.possible)  ){
            items.push(
               {
                  title : g.attributes.title,
                  category : g.attributes.categoryid,
                  possible: g.attributes.possible
               });
            }
         });
      }
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T18:28:43.930

你的代码有点混乱

```
function load(id){
   itemPath = lev1.lev2.lev3;
   items = [];
   for (var i = 0; i<itemPath.length; i++) {
      if(itemPath[i].attributes.id==id) {
         return itemPath[i].attributes.grades.models.map(function(g) {
            items.push(
               {
                  title : g.attributes.title,
                  category : g.attributes.categoryid,
                  possible: g.attributes.possible
               });
         });
      }
   }
} 
```

看起来您没有正确使用地图。Map 的工作方式类似于列表压缩，因为它遍历一个序列以对每个元素执行某种操作并返回一个新序列

```
var arr = [1,2,3];
var complexMagic = arr.map( function(n) { return n + 10; } );
// complexMagic === [11,12,13] 
```

仅供参考，这就是过滤器的工作原理。过滤器接受一个谓词函数（又名布尔函数）来构建一个新序列。如果谓词返回 true，则元素将存储在新序列中。

```
var arr = [1, 123, 42, 1001, 1100];
var oddNumbers = arr.filter( function(n) {
    return 1 === (n & (-n) );
} );

// oddNumbers === [1, 123, 1001] );
// Bit hacks are fun ;P 
```

看起来您不需要 items 数组，甚至不需要将新元素推送到它上面。

```
function load(id){
   itemPath = lev1.lev2.lev3;
   items = [];
   for (var i = 0; i<itemPath.length; i++) {
      if(itemPath[i].attributes.id==id) {
         return itemPath[i].attributes.grades.models.map(function(g) {

            // You don't have to return anything.
            // This might be an ok place for the NaN check.

            return ({
                  title : g.attributes.title,
                  category : g.attributes.categoryid,
                  possible: g.attributes.possible
               });
         });
      }
   }
} 
```

我很懒，没有测试我的任何代码，所以读者要小心。如果可能，也要避免使用 push 方法。将新元素附加到数组上可能是一种低效的方法。

# autocomplete - 增量更新 Kendo UI 自动完成

> ID：15230424
> 
> 赞同：1
> 
> 时间：2013-03-05T17:36:18.163
> 
> 标签：autocomplete, knockout.js, kendo-ui

我有一个绑定到远程传输的 Kendo UI 自动完成功能，我需要调整它的工作方式并且出现空白。

目前，我在服务器上执行一堆搜索并将结果集成到 JSON 响应中，然后将其返回到数据源以进行自动完成。问题是这可能需要很长时间，而且我们的应用程序对时间很敏感。

我们已经确定了哪些搜索是最重要的，并发现 1 个搜索占所选结果的 95%。但是，我仍然需要提供来自其他搜索的数据。我正在考虑在服务器上启动单独的数据请求，并在它们返回时添加自动完成功能。我们的主要搜索返回非常快，并且将是添加到列表中的第一个项目。然后当其他搜索返回时，我希望它们动态添加到列表中。

我们的应用程序使用了 knockout.js，我曾考虑让数据源成为我们视图模型的一部分，但是环顾四周，Kendo 不会根据您对 observables 的更改进行更新。

我现在很困惑，任何建议都会受到欢迎。

编辑：

我一直在试验，并在使用以下数据源模拟我想要的东西时取得了一些成功：

```
var dataSource = new kendo.data.DataSource({
transport: {
    read: {
        url: window.performLookupUrl,
        data: function () {
            return {
                param1: $("#Input").val()
            };
        }
    },
    parameterMap: function (options) {
        return {
            param1: options.param1
        };
    }
},
serverFiltering: true,
serverPaging: true,
requestEnd: function (e) {
    if (e.type == "read") {
        window.setTimeout(function() {
            dataSource.add({ Name: "testin1234", Id: "X1234" })
        }, 2000);
    }
}
}); 
```

如果第一次搜索返回结果，那么 2 秒后，一个新项目会弹出到列表中。但是，如果第一次搜索失败，则什么也不会发生。像这样使用（滥用？？） requestEnd 是否合适？我的最终目标是从此功能开始其余的搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:58:26.180

我联系了 Telerik，他们给了我以下 jsbin，我可以对其进行修改以满足我的需要。

[http://jsbin.com/ezucuk/5/edit](http://jsbin.com/ezucuk/5/edit)

# objective-c - Objective-C：我应该为只读 BOOL 属性实现哪个 getter 方法？

> ID：15230428
> 
> 赞同：0
> 
> 时间：2013-03-05T17:36:31.703
> 
> 标签：objective-c, properties

我正在为 UITextRange 类编写一个子类，它具有以下属性：

```
 @property(nonatomic, readonly, getter=isEmpty) BOOL empty 
```

`empty`我应该为子类中的方法或方法编写实现`isEmpty`吗？我应该为两者编写实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:39:32.643

`getter=isEmpty`表示`- (BOOL)isEmpty`在你写的时候调用了名为的getter方法`someVariable = obj.empty`。所以你应该实现这个`isEmpty`方法。

# html - 删除图像和 div 之间的额外空间

> ID：15230436
> 
> 赞同：1
> 
> 时间：2013-03-05T17:36:51.663
> 
> 标签：html, css

如何删除导航横幅与其下方的主横幅图像之间的额外空间？

我删除了填充和边距，但没有任何效果。

我的代码如下。

我不想设置职位。谁能告诉我问题是什么？

```
<div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar collapsed" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#" style="padding-top: 0px;">
            <img alt="change" class="defieLogo" src="http://www.defie.co/designerImages/defie_logo_only.png">
          </a>
          <div class="nav-collapse collapse" style="height: 0px;">
            <ul class="nav">
              <li class="active"><a href="http://v2.defie.co/product.html">Product</a></li>
              <li><a href="http://v2.defie.co/solution.html">Solutions</a></li>
              <li><a href="/docs/examples/service.html">Services</a></li>
              <li class="iphonePartnerLink"><a href="/docs/examples/partner.html">Partners</a></li>
              <li class="iphoneContactLink"><a href="/docs/examples/contact.html">Contact</a></li>
            </ul>

            <ul class="nav" id="navSecond">
              <li class=""><a href="/docs/examples/partners.html">Partners</a></li>
              <li><a href="/docs/examples/contact.html">Contact</a></li>
            </ul>
            <form class="navbar-form pull-right">
              <input class="span2" type="text" placeholder="Email">
              <input class="span2" type="password" placeholder="Password">
              <button type="submit" class="btn">Sign in</button>
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

<div class="container">
      <header class="hero-unit-product">
        <h1>
            Defie Cloud Business Solutions
            <small>.. changing the way businesses operate.</small>
        </h1>
        <p><a class="btn btn-green btn-large" href="/signup/" data-link="modal" data-target="#signup-modal">Register</a></p>
      </header>
      </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:40:46.183

主要问题与`<article class="container">`元素有关 - 它具有`margin-top: 30px;`.

您还必须更改`padding-top`选择`.home`器。它设置为`55px`现在，但必须`47px`改为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T17:41:07.100

空间来自：

```
.home article.container {
    margin-top: 30px;
} 
```

将其更改为：

```
.home article.container {
    margin-top: 0;
} 
```

# ruby-on-rails-3.2 - 带有蓝色主机的 Rail Actionmailer 配置

> ID：15230437
> 
> 赞同：3
> 
> 时间：2013-03-05T17:36:52.593
> 
> 标签：ruby-on-rails-3.2, actionmailer, bluehost

我正在使用 rails 3.2.11 并使用蓝色主机作为我的电子邮件服务器来发送电子邮件。

以下是我在 development.rb 中的配置信息

```
 config.action_mailer.smtp_settings = {

    :address              => "box75112.bluehost.com",

    :port                 => "465",
    :domain               => "bluehost.com",

    :enable_starttls_auto => true,
    :authentication       => :login,
    :user_name            => "support@buddy.io",
    :password             => "93utitrpppJvZ,[#4rl4" 
```

}

这些是我的蓝色主机信息

```
 Mail Server Username: support+buddy.io
      Incoming Mail Server: mail.buddy.io
      Incoming Mail Server: (SSL) box75112.bluehost.com
      Outgoing Mail Server: mail.buddy.io (server requires authentication) port 26
      Outgoing Mail Server: (SSL) box75112.bluehost.com (server requires authentication) port 465

      Supported Incoming Mail Protocols: POP3, POP3S (SSL/TLS), IMAP, IMAPS (SSL/TLS)
      Supported Outgoing Mail Protocols: SMTP, SMTPS (SSL/TLS) 
```

但电子邮件没有发出，也没有错误

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-07T03:44:25.533

我已经成功使用 ActionMailer 与 BlueHost SMTP 服务器建立了非加密连接：

```
config.action_mailer.smtp_settings = {
    address:              => "mail.buddy.io",
    port:                 => 26,
    enable_starttls_auto: => false,
    authentication:       => "plain",
    user_name:            => "support+buddy.io",
    password:             => "password"
} 
```

请注意，`user_name`与电子邮件地址不同。并且`domain`不需要该参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-30T05:02:46.990

如果仍然派上用场。您可以使用 ssl，尝试以下操作：

```
 config.action_mailer.delivery_method = :smtp
  config.action_mailer.default_url_options = { :host => 'example.com' }
  config.action_mailer.raise_delivery_errors = true
  # Send email in development mode?
  config.action_mailer.perform_deliveries = true

  config.action_mailer.smtp_settings = {
      address: "server.example.com",
      port: 465,
      enable_starttls_auto: true,
      ssl: true,
      domain: 'example.com',
      user_name: 'user@example.com',
      password: 'MyPassWorD',
      authentication: :plain
  } 
```

在 Bluehost 上为我工作。

# xslt - XSL 舍入问题

> ID：15230441
> 
> 赞同：2
> 
> 时间：2013-03-05T17:37:07.820
> 
> 标签：xslt, xsl-fo

我有一个 XSL 样式表，我正在使用`format-number(xpath,"#,##0")`它来舍入该值。在我的本地计算机上，值 1006.5 舍入为 1007。但是，服务器上的相同样式表将 1006.5 舍入为 1006。

知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T21:40:56.323

在 XSLT 1.0 中，未指定 format-number() 的舍入规则。（事实上​​，它们是通过参考 JDK 1.1 规范来定义的，现在很难找到，但我记得很清楚，它的规范非常低）。

因此，不同的 XSLT 1.0 处理器可能表现不同。

XSLT 2.0 定义了舍入规则（尽管我完全忘记了它们是什么）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:11:58.563

我认为这可能是由于不同的 XSLT 1.0 处理器使用不同的舍入方法（半向上与舍入到偶数/银行家的舍入）。这也可能是由于浮点数在不同机器上的表示方式不同。

我对[这个问题](https://stackoverflow.com/questions/3805248/xsl-rounding-format-number-problem/14853343#14853343)的回答可能会提供更多详细信息，并让您开始寻找解决方案（解决方案是四舍五入到小数点后两位，但也许您可以看到如何更普遍地应用它）。

# spring - 显示使用 Tomcat7 Maven 插件但未使用独立 Tomcat 的主页

> ID：15230443
> 
> 赞同：2
> 
> 时间：2013-03-05T17:37:13.950
> 
> 标签：spring, model-view-controller, maven, tomcat

我有这个正在开发的 Spring MVC 应用程序，在我尝试部署在登台服务器上之前，情况看起来非常好——然后我遇到了这个问题。

事实：

1.  当我使用具有以下配置的 Tomcat 7 Maven 插件时，使用`http://localhost:8080`.

```
<plugin>
  <groupId>org.apache.tomcat.maven</groupId>
  <artifactId>tomcat7-maven-plugin</artifactId>
  <version>2.0</version>
  <configuration>
     <warSourceDirectory>${webappDirectory}</warSourceDirectory>
     <path>/</path>
     <port>${httpPort}</port>
     <httpsPort>${httpsPort}</httpsPort>
     <keystoreFile>${webappDirectory}/WEB-INF/some.keystore</keystoreFile>
     <keystorePass>broadleaf</keystorePass>
     <password>broadleaf</password>
  </configuration>
</plugin> 
```

但是，当我在使用端口 8080 服务的独立 Tomcat 上部署相同的代码时`ROOT.war`- 我尝试使用`http://localhost:8080`- 我收到 404 错误。但是当我指向`http://localhost:8080/somepage`我得到我需要的东西时。

这是一个 Spring MVC 应用程序，它没有在 中声明欢迎页面`web.xml`，而是声明了一个 servlet：

```
<servlet>
  <servlet-name>myservelet</servlet-name>
  <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
  <init-param>
    <param-name>contextConfigLocation</param-name>
      <param-value>classpath:/applicationContext-servlet-cms-contentClient.xml/WEB-INF/applicationContext-servlet.xml</param-value>
  </init-param>
  <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
  <servlet-name>myservelet</servlet-name>
  <url-pattern>/</url-pattern>
</servlet-mapping> 
```

我还需要对 Tomcat 独立做些什么才能让它工作吗？除主页外，所有其他页面均正确提供。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:46:59.293

从 tomcat-maven-plugin 的文档中-看起来我是对的。在使用插件时，它使用插件定义中的变量来定义初始上下文。

您可以修改路径`<path>/MotaNginya</path>`，这将是您的新主页。

不使用插件时，您必须自己定义主页或“/”网址。

为方便起见，请参阅[tomcat-maven-plugin](http://tomcat.apache.org/maven-plugin-2.0/tomcat7-maven-plugin/usage.html)文档。在页面上搜索“ `Using a different context path"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T21:44:09.497

Tomcat 7 将在 ROOT 上下文中托管一个默认应用程序。如果你想在那里部署一些东西，你需要先卸载它。另请注意，您的应用程序应命名为 ROOT.war 或类似名称。

# apache-flex - 在 Flex 中带时间的 DatePicker

> ID：15230444
> 
> 赞同：0
> 
> 时间：2013-03-05T17:37:15.043
> 
> 标签：apache-flex, flex4

我在 flex 中使用了 datepicker 对象来选择日期。我想知道是否有人知道任何允许从同一对象中提取时间的组件。

例如类似于![在此处输入图像描述](../Images/0beb5639ce9f0ff77c6abad3c9b37cf8.png)

来自[http://jdevadf.oracle.com/adf-richclient-demo/docs/tagdoc/af_inputDate.html](http://jdevadf.oracle.com/adf-richclient-demo/docs/tagdoc/af_inputDate.html)

我的 UI 中有一些空间问题，这真的很有帮助。有谁知道这种组件的库

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:25:56.110

我不知道任何可以满足您需求的自定义组件。通过遵循 UIComponent 生命周期，您可以在 Flex 中开发自己的自定义组件。请参阅任何现有组件，例如 Panel 以更好地理解它。（您可以在 flex sdk 文件夹中找到组件的来源）

# r - 值出现的累积序列

> ID：15230446
> 
> 赞同：14
> 
> 时间：2013-03-05T17:37:16.120
> 
> 标签：r, sequence

我有一个看起来像这样的数据集，其中一列可以有四个不同的值：

```
dataset <- data.frame(out = c("a","b","c","a","d","b","c","a","d","b","c","a")) 
```

在 R 中，我想创建第二列，按顺序记录包含特定值的累积行数。因此输出列将如下所示：

```
out
1
1
1
2
1
2
2
3
2
3
3
4 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-05T17:39:46.553

试试这个：

```
dataset <- data.frame(out = c("a","b","c","a","d","b","c","a","d","b","c","a"))
with(dataset, ave(as.character(out), out, FUN = seq_along))
# [1] "1" "1" "1" "2" "1" "2" "2" "3" "2" "3" "3" "4" 
```

当然，您可以`data.frame`使用类似的方法将输出分配给您的列`out$asNumbers <- with(dataset, ave(as.character(out), out, FUN = seq_along))`

### 更新

“dplyr”方法也很不错。逻辑与“data.table”方法非常相似。一个优点是您不需要包装上述方法`as.numeric`所需的输出`ave`。

```
dataset %>% group_by(out) %>% mutate(count = sequence(n()))
# Source: local data frame [12 x 2]
# Groups: out
# 
#    out count
# 1    a     1
# 2    b     1
# 3    c     1
# 4    a     2
# 5    d     1
# 6    b     2
# 7    c     2
# 8    a     3
# 9    d     2
# 10   b     3
# 11   c     3
# 12   a     4 
```

* * *

第三种选择是`getanID`从我的“splitstackshape”包中使用。对于这个特定示例，您只需要指定`data.frame`名称（因为它是单个列），但是，通常，您会更具体并提及当前用作“ids”的列，并且该函数将检查是否它们是唯一的，或者是否需要累积序列才能使它们唯一。

```
library(splitstackshape)
# getanID(dataset, "out")  ## Example of being specific about column to use
getanID(dataset)
#     out .id
#  1:   a   1
#  2:   b   1
#  3:   c   1
#  4:   a   2
#  5:   d   1
#  6:   b   2
#  7:   c   2
#  8:   a   3
#  9:   d   2
# 10:   b   3
# 11:   c   3
# 12:   a   4 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-05T18:05:21.803

## 更新：

正如阿南达指出的那样，您可以使用更简单的：

```
 DT[, counts := sequence(.N), by = "V1"] 
```

（其中`DT`如下）

* * *

您可以创建一个“计数”列，初始化为 1，然后按因子计算累积总和。下面是一个快速实现`data.table`

```
# Called the column V1
dataset<-data.frame(V1=c("a","b","c","a","d","b","c","a","d","b","c","a"))

library(data.table)

DT <- data.table(dataset)

DT[, counts := 1L]
DT[, counts := cumsum(counts), by=V1]; DT

#     V1 counts
#  1:  a      1
#  2:  b      1
#  3:  c      1
#  4:  a      2
#  5:  d      1
#  6:  b      2
#  7:  c      2
#  8:  a      3
#  9:  d      2
# 10:  b      3
# 11:  c      3
# 12:  a      4 
```

# java - Java 堆栈比较

> ID：15230450
> 
> 赞同：7
> 
> 时间：2013-03-05T17:37:27.163
> 
> 标签：java, stack

我想知道如何做到这一点：

1.  比较两个 Stack 对象
2.  递归执行此操作
3.  完成此操作的方法完成后，堆栈保持原样（即相同的顺序，相同的项目）。

只有`push`,`pop`和`isEmpty`方法`Stack`可用。

我正在寻找更多的理论帮助而不是编码帮助，但任何见解都会受到赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T17:40:52.883

如果两个堆栈的顶层元素相同，则两个堆栈相同，并且其余堆栈相同（即递归条件）。

现在，想想在从方法调用返回之前要做什么，以便让堆栈保持与调用时相同的方式。

- -编辑 - -

工作 Java 代码（源自**Markus A.**解决方案，但有趣地使用了“finally”和泛型）：

```
static <T> boolean compareStacks(Stack<T> a, Stack<T> b) {
    if (a.isEmpty() != b.isEmpty()) return false; 
    if (a.isEmpty() && b.isEmpty()) return true; 
    T element_a = a.pop(); 
    T element_b = b.pop();
    try {
        if (((element_a==null) && (element_b!=null)) || (!element_a.equals(element_b)))
            return false;
        return compareStacks(a, b); 
    } finally { // restore elements
        a.push(element_a); 
        b.push(element_b);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T17:52:37.480

在伪代码中，您可以执行以下操作：

```
boolean compareStacks(a, b) {
  if (a.isEmpty() != b.isEmpty()) return false; // check if one is empty
  if (a.isEmpty() && b.isEmpty()) return true; // check if both are empty
  element_a = a.pop(); // grab elements and compare them
  element_b = b.pop();
  if (((element_a==null) && (element_b!=null)) || !element_a.equals(element_b)) {
    a.push(element_a); // if they are not equal, restore them and return false
    b.push(element_b);
    return false;
  }
  result = compareStacks(a, b); // compare shortened stacks recursively
  a.push(element_a); // restore elements
  b.push(element_b);
  return result; // return result from recursive call
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:55:58.980

对于递归，将其视为两部分总是有帮助的，一个“设置”和一个递归函数。您的设置将创建适当的情况（创建两个堆栈，将它们传入等），然后调用递归方法，当递归方法完成时，报告结果。

在您的情况下，您可能希望此签名用于“递归”方法：

```
public boolean compareStacks(Stack one, Stack two) 
```

如果该方法弹出并比较堆栈的顶部两个元素，则它可以立即返回 false （说它们不比较）。如果是这样，您现在有两个堆栈，每个堆栈都比以前短。您已经知道如何比较这两个堆栈，对（您刚刚编写了这样做的方法！）。

最后，您可以将一个元素“推”回每个堆栈，以在返回之前恢复其先前的状态。

在它们不比较的情况下恢复堆栈会有一些技巧，并确保如果您调用的 compareStack 失败，它会正确地将其传递到先前的状态，即使“当前”compareStack 成功，但那些是实现细节——只是想我会提到那些，所以你不要忽视它们。

Try/finally 有一个可爱的解决方案（没有捕获，从 try 中返回并在 finally 中推回堆栈），这将使代码非常流畅，但没有它也很容易。

# java - 访问 DownloadProvider 时避免 SecurityException

> ID：15230453
> 
> 赞同：7
> 
> 时间：2013-03-05T17:37:33.153
> 
> 标签：java, android, intentfilter, securityexception

我有一个`android.intent.action.SEND`带有图片 mime 类型的意图过滤器的活动。

一旦用户与我的活动（UploadActivity）分享图片（**特别是来自下载管理器**），活动将检查用户是否登录。如果没有，它将存储原始意图（带有`EXTRA_STREAM`）并将用户发送到 LoginActivity . 一旦该用户登录，他将被带回 UploadActivity 并使用原始保存的意图。

现在，即使在恢复了原始意图之后，我也得到了一个`java.lang.SecurityException: Permission Denial: reading com.android.providers.downloads.DownloadProvider uri...`.

我明白我为什么会得到这个。因为我没有原意的临时权限。

编辑：**LogCat**

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example/com.example.UploadActivity}: java.lang.SecurityException: Permission Denial: reading com.android.providers.downloads.DownloadProvider uri content://downloads/all_downloads/1145 from pid=16585, uid=10086 requires android.permission.ACCESS_ALL_DOWNLOADS, or grantUriPermission()
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
    at android.app.ActivityThread.access$600(ActivityThread.java:141)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5041)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.SecurityException: Permission Denial: reading com.android.providers.downloads.DownloadProvider uri content://downloads/all_downloads/1145 from pid=16585, uid=10086 requires android.permission.ACCESS_ALL_DOWNLOADS, or grantUriPermission()
    at android.os.Parcel.readException(Parcel.java:1425)
    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:185)
    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:137)
    at android.content.ContentProviderProxy.query(ContentProviderNative.java:366)
    at android.content.ContentResolver.query(ContentResolver.java:372)
    at android.content.ContentResolver.query(ContentResolver.java:315)
    at com.example.UploadActivity.getFileFromContentUri(UploadActivity.java:304)
    at com.example.UploadActivity.onCreate(UploadActivity.java:195)
    at android.app.Activity.performCreate(Activity.java:5104)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T12:34:30.333

请发布您查询 ContentProvider 的完整代码。我有一个类似的问题。调用游标时：

```
c=MyApplication.getAppContext().getContentResolver().query(uri,null,null,null,null); 
```

但是，当我将投影设置为

```
String[] proj=new String[] {
                MediaStore.MediaColumns.DATA,
                MediaStore.MediaColumns.DISPLAY_NAME,
        }; 
c=MyApplication.getAppContext().getContentResolver().query(uri,proj,null,null,null); 
```

有用。一旦我添加`MediaStore.MediaColumns.MIME_TYPE`到投影中，它就会再次失败。在我看来，提供者不授予访问此（可能还有其他）列的权限。

# javascript - “对象不是函数”错误？

> ID：15230458
> 
> 赞同：0
> 
> 时间：2013-03-05T17:37:46.663
> 
> 标签：javascript, node.js, coffeescript

我有一个 node.js 应用程序，它使用[async](https://github.com/caolan/async#waterfall)一个接一个地调用方法。出于某种原因，当我尝试进入瀑布的第二层时，我的应用程序抛出以下错误：

> TypeError：对象不是函数

我有以下代码是咖啡脚本（如果有人想要，我可以得到 javascript）：

```
async.waterfall([
    (callback) =>
        console.log 'call getSurveyTitle'
        @getSurveyTitle (surveyTitle) =>
            fileName = 'Results_' + surveyTitle + '_' + dateString + '.csv'
            filePath = path.resolve process.env.PWD, 'static', @tempDir, fileName
            csv.to(fs.createWriteStream(filePath))
            callback(null, null)
    ,
    (callback) =>
        @createHeaderRow (headerRow) =>
            headerText = _.map headerRow, (row) =>
                row.text
            csv.write headerText
            console.log 'before' #gets here and then throws error
            callback(null,headerRow)
    ,
    (headerRow, callback) =>
        console.log 'after'
        @createRows headerRow, (callback) =>
            callback(null,null)
    ], (err, result) =>
        console.log "waterfall done!"
    ) 
```

我对节点和异步相当陌生，所以我觉得我只是忽略了一些明显的东西。谁能看到我在做什么可能会导致此错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:40:42.517

对于`waterfall`，第一个之后的任何`callback`参数`error`都将传递给下一个任务，包括`null`s：

```
async.waterfall([
    (callback) =>
        callback(null, null, null)
    ,
    (callback) =>
        console.log callback  # null
        console.log arguments # { 0: null, 1: null, 2: [Function], length: 3 }
]) 
```

如果您不希望将任何值传递给下一个任务，只需`callback`使用`error`参数调用：

```
callback(null) 
```

Or set a name for the 1st argument so `callback` is 2nd:

```
(_, callback) =>
    @createHeaderRow (headerRow) =>
        # ... 
```

# algorithm - 计算大 n 的快速算法！模 2³²

> ID：15230464
> 
> 赞同：3
> 
> 时间：2013-03-05T17:38:06.943
> 
> 标签：algorithm, biginteger, modulo, factorial

我想计算N的确切值！模 2 ^(32)。N 最大为 2 ^(31)

任何语言都可以，但我希望能详细解释算法。时间限制 < 1 秒

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-05T17:44:26.717

在蟒蛇中：

```
if n > 33:
  return 0
else
  return reduce(lambda x, y: x*y, range(1, n+1)) % 2**32 
```

理由：

我们知道34！可被 2 ^(32)整除，因为在序列中：

```
1 * 2 * 3 * 4 * ... * 34 
```

有：

```
17 multiples of 2
 8 multiples of 4
 4 multiples of 8
 2 multiples of 16
 1 multiple  of 32
--
32 multiplications by 2 
```

它是每个较大阶乘的因数，所以所有较大的阶乘都是 0 mod 2 ^(32)

对于较小的 N 值，如果您没有可用的 bignum 算术，您可以进行单独的乘法 mod 2 ^(32)，和/或您可以在阶乘中预先考虑 2 的幂，这很容易计算（见上文）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T17:43:38.123

正常计算阶乘（乘以数字 1,2,3,...），在每次乘法后执行模运算。这将为您提供较小值的结果`N`。

对于较大的 值`N`，执行相同操作。很快，您的中间结果将是`0`，然后您可以立即停止循环并返回`0`。您停止的点将相对较快：因为`N == 64`结果已经是`0`因为 的乘积`1..64`包含 32 个偶数，因此可以被 整除`2^32`。您获得 0的实际最小值`N`将小于 64。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-18T00:58:52.843

当乘以 2 个任意长度的数字时，低位**总是准确的**，因为它不依赖于高位。基本上**a×b *mod* m = [(a *mod* m)×(b *mod* m)] *mod* m**所以要做*N！mod m*只是做

```
1×2×...×N mod m = (...(((1×2 mod m)×3 mod m)×4 mod m)...)×N mod m 
```

Modulo 2 ^n是一种特殊情况，因为通过操作获得模数相当容易`AND`。模 2 ^(32)更加特殊，因为 C 和大多数类 C 语言中的所有无符号运算都减少了 32 位无符号类型的模 2 ^(32)

因此，您只需**将数字乘以两倍宽的类型**，然后再乘以`AND`2 ^(32) - 1 即可获得模数

```
uint64_t p = 1;
for (uint32_t i = 1; i <= n; i++)
    p = p*i & 0xFFFFFFFFU;
return p; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T20:52:55.600

通常，您可以使用大多数编程语言中可用的整数类型（int、long）来实现算法以 2 的小幂为模，而无需使用 bignums 或模约简。对于模 2 ^(32)，您将使用 32 位整数。[“整数溢出”负责模运算。](http://jonisalonen.com/2013/mathematical-foundations-of-computer-integers/)

在这种情况下，由于只有 34 个不同的结果，因此查找表可能比计算阶乘更快，假设阶乘的使用频率足够高，以至于表被加载到 CPU 缓存中。执行时间将以微秒为单位。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-05T20:05:50.793

计算模是一种非常快速的运算，尤其是 2 的幂的模。相比之下，乘法的成本非常高。

最快的算法会分解质数中的阶乘因子（由于数字小于 33，所以速度非常快）。并通过将它们全部相乘，通过在每个乘法之间取模，并从大数开始来获得结果。

例如：计算 10！mod 2 ^(32) : 使用 de Polignac 公式，得到 10 的质因数！这给了你：

> 10！= 7 * 5 * 5 * 3 * 3 * 3 * 3 * 2 ...

这将比基本算法更快，因为计算 (29! mod 2 ^(32) ) X 30 比乘以 5、3 和 2 并在每次之间取模要困难得多。

# label - VB.NET中的标签背景闪烁

> ID：15230465
> 
> 赞同：1
> 
> 时间：2013-03-05T17:38:09.050
> 
> 标签：label, flicker

所以我在表单上使用了大约 50 个不同的标签，并且在我做任何事情（最小化、最大化、在表单上运行任何命令）时它都会闪烁，我需要一种更有效的方法来做到这一点。

我已经搜索并看到有人说要绘制文本，但是还有其他方法吗？如果您建议绘制文本，那么绘制 50 个不同项目的好方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:06:29.107

2个问题：

1) 表单上的 DoubleBuffered 属性是否设置为 true？如果没有，请尝试一下，看看是否有帮助。

2）您是否覆盖 OnPaint / OnPaintBackground 事件？如果是这样，您可以在其中发布您的代码吗？

# dependencies - 如何配置脚本编辑器来解析 AMD 模块路径

> ID：15230466
> 
> 赞同：0
> 
> 时间：2013-03-05T17:38:16.040
> 
> 标签：dependencies, amd, springsource

我正在尝试[编写脚本](https://github.com/scripted-editor/scripted "脚本化的")，但我不知道如何告诉编辑器我的 AMD 模块在哪里。与当前正在编辑的文件相关的模块似乎可以很好地解析，但是当我从一个依赖于另一个包的包中编辑一个文件时，编辑器根本找不到它们：

我有一个结构如下的 dojo 项目： - web - index.php - js/src - dojo - dijit - dojox - mymodule - myWidget.js

如果我将“dojo/dom”作为 myWidget.js 的依赖项，编辑器会抱怨它找不到 dojo/dom 模块。

有任何想法吗 ？

谢谢。

菲利普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:37:11.443

Scripted 将尝试通过使用某些模式查看 html 文件来“发现”您的 AMD 配置。

发现算法寻找某些模式。但是该算法有点脆弱，如果您的项目与我们实现的模式之一不匹配，它将无法找到配置。

这很可能是您的项目正在发生的事情。

你能提供更多关于你的项目结构的细节吗？

具体来说，Scripted 将从加载 requirejs 的 html 文件开始发现。因此，为了提供有关它在您的项目中失败的原因的更具体信息，我们需要知道该 html 文件在您的项目中的位置以及它如何加载 requirejs 并对其进行配置。

如果您想查看一些有效的结构示例。Scripted code-base test-resources中有一些。例如，这是一个非常基本的。

[https://github.com/scripted-editor/scripted/tree/master/tests/server/test-resources/nested-web-with-scripts-folder/web-app](https://github.com/scripted-editor/scripted/tree/master/tests/server/test-resources/nested-web-with-scripts-folder/web-app)

它有一个名为 'page.html' 的 html 文件，通过脚本标签中的 'datamain' 属性加载一个 'main.js' 脚本。

如果您的项目看起来像这样，它应该可以工作，如果不是，那是一个错误。如果它看起来不同，那么在不知道您如何在项目中使用 requirejs 的情况下很难说更多。

# php - 为什么我的 CSV 输出每列包含两次？

> ID：15230470
> 
> 赞同：0
> 
> 时间：2013-03-05T17:38:23.113
> 
> 标签：php, csv

我有以下内容：

```
$name = 'registrations.csv';
header('Content-Type: text/csv');
header('Content-Disposition: attachment; filename='. $name);
header('Pragma: no-cache');
header("Expires: 0");
$outstream = fopen("php://output", "w");
$results = mysql_query("select * from registrations");
while( $result = mysql_fetch_array($results) )
{
  fputcsv($outstream, $result);
}
fclose($outstream); 
```

这很好用，除了它给每列两个。例如，我在表中有一个 given_name 列和一个 surname 列。生成的 csv 文件将每列显示两次。为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T17:39:40.970

更改`mysql_fetch_array()`为`mysql_fetch_assoc()`。`mysql_fetch_array()`获取数据库结果的数字和关联数组。

```
while( $result = mysql_fetch_assoc$results) )
{
  fputcsv($outstream, $result);
} 
```

# javascript - 使用 if 运算符 && || 在相同的条件下

> ID：15230473
> 
> 赞同：0
> 
> 时间：2013-03-05T17:38:28.440
> 
> 标签：javascript, if-statement, input, operators, conditional-statements

我有这个表格

```
<form class="form" method="post">
<input type="text" id="input_what" holder="what" />
<input type="text" id="input_where" holder="where" />
<input type="submit" value="submit" />
</form> 
```

这个脚本可以防止提交表单

```
$('.form').submit(function(e) {
var what = $('#input_what').val();
var where = $('#input_where').val()
if ( what == "what" || what ==""  &&  where == "where" || where == "") {
   e.preventDefault();
   console.log('prevented empty search');
   return false;
}     
}); 
```

我知道我的情况不起作用，但我需要它像这样工作

```
 IF (what == "what" OR what == "") AND (where == "where" OR where == "") 
```

看看这个小提琴，了解为什么 [http://jsfiddle.net/pK35e/](http://jsfiddle.net/pK35e/)

我正在使用的占位符脚本，需要我不提交上述情况的表格，这`placeholder="attribute"`对我来说没有解决方案，所以谁能给我一个提示如何设置这个 if 条件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:40:19.110

就像在您所做的文字描述中一样使用括号：

```
if (( what == "what" || what =="")  &&  (where == "where" || where == "")) { 
```

旁注：您可能会对将来的版本感兴趣，因为 IE9-不支持它，[占位符属性](http://diveintohtml5.info/forms.html)将使这更简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T17:40:17.117

尝试这个

```
if ( (what == "what" || what =="")  &&  (where == "where" || where == "")) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T17:41:01.940

```
IF ((what == "what" ||what == "") &&(where == "where" ||where == "")) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T17:42:07.983

我相信你需要一些括号才能得到你想要的：

```
if ( (what == "what" || what =="")  &&  (where == "where" || where == "")) 
```

这意味着两者

```
(what == "what" || what =="") 
```

和

```
(where == "where" || where == "") 
```

必须返回 true 才能执行 if 语句中的代码。这实际上与您的文本示例非常接近。

--

只是为了了解这一切。您的旧代码看起来像这样带括号：

```
if ( (what == "what") || (what ==""  &&  where == "where") || (where == "")) { 
```

再一次，其中只有一个必须返回 true。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-05T17:42:37.327

使用括号。运算符的`&&`优先级高于`||`运算符。

```
if ((what == "what" || what =="") && (where == "where" || where == "")) 
```

[http://en.m.wikipedia.org/wiki/Order_of_operations](http://en.m.wikipedia.org/wiki/Order_of_operations)

# sqlite - 是否可以将sqlite中的'0'字符保存为文本

> ID：15230477
> 
> 赞同：6
> 
> 时间：2013-03-05T17:38:55.587
> 
> 标签：sqlite, system.data.sqlite

我在 sqlite 表中有一个带有 \0 字符和文本字段的 UTF 字符串。
当我尝试将字符串插入表格文本字段然后从数据库中读取它时，我注意到字符串值在 \0 字符之后被截断。

**问题：**是否可以在 sqlite 中保存/恢复此类字符串而不会在**\0**之后丢失数据？

代码片段：

```
 public static void IssueWith0Character()
    {
        const string sql = "DROP TABLE IF EXISTS SomeTable;" +
                           "CREATE TABLE SomeTable (SomeField TEXT not null);"
                           + "INSERT INTO SomeTable (SomeField) Values ( :value )";

        var csb = new SQLiteConnectionStringBuilder
                      {DataSource = "stringWithNull.db", Version = 3};

        // string with '0' character
        const string stringWithNull = "beforeNull\0afterNull";

        using (var c = new SQLiteConnection(csb.ConnectionString))
        {
            c.Open();

            using (var cmd = c.CreateCommand())
            {
                var p = new SQLiteParameter(":value", DbType.String) {Value = stringWithNull};
                cmd.CommandText = sql;
                cmd.Parameters.Add(p);
                cmd.ExecuteNonQuery();
            }

            using (var cmd = c.CreateCommand())
            {
                cmd.CommandText = "SELECT SomeField FROM SomeTable;";
                var restoredValue = (string) cmd.ExecuteScalar();
                Debug.Assert(stringWithNull == restoredValue);
            }
        }
    } 
```

**更新#1**看起来问题出在阅读阶段。数据库文件中至少存在字符串的“afterNull”部分。

**更新 #2**这被认为是 System.Data.SQLite 错误（<1.04.84）。[http://system.data.sqlite.org/index.html/tktview/3567020edf12d438cb7cf757b774ff3a04dc381e](http://system.data.sqlite.org/index.html/tktview/3567020edf12d438cb7cf757b774ff3a04dc381e)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-05T18:04:56.003

在 SQLite 中，\0 字符被认为是无效的。

虽然可以将此类字符串放入数据库（使用各种函数的指针+长度形式），但许多对字符串进行操作的函数在遇到 \0 时会停止。因此，[文档](http://www.sqlite.org/c3ref/bind_blob.html)说：

> 涉及带有嵌入 NUL 的字符串的表达式的结果是未定义的。

如果您确实需要使用空字节存储数据，则应将其存储为 blob ( `DbType.Binary`)。

# sugarcrm - SugarCRM API 查询 - 访问被拒绝？

> ID：15230481
> 
> 赞同：0
> 
> 时间：2013-03-05T17:39:09.627
> 
> 标签：sugarcrm

我正在运行 SugarCRM 6.5.x 并使用 SOAP API。我想要实现的是通过使用公司注册号检查自定义字段的值来查找帐户，如下所示：

```
get_entry_list(...

accounts.id in (select id_c from accounts_cstm join accounts on accounts_cstm.id_c = accounts.id where accounts_cstm.company_number__c = '12345678')

... ) 
```

我不断收到拒绝访问错误，我不明白为什么？如果我在 phpmyadmin 中运行查询，它可以正常工作吗？我怎样才能使这项工作为 SugarCRM 工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:08:16.217

从 Sugar 6.4 开始，我们的 Web 服务 API 中对子查询的支持已被删除，但有一些例外；有关更多详细信息，请参阅此帖子...

[http://developer.sugarcrm.com/2012/03/19/howto-avoiding-subqueries-with-our-web-services/](http://developer.sugarcrm.com/2012/03/19/howto-avoiding-subqueries-with-our-web-services/)

对于这个，您不需要执行子查询，因为 cstm 会自动加入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T09:25:34.843

你确定你打开了一个会话并发送了正确的参数吗？

```
get_entry_list($session, $module_name, $query, $order_by,$offset, $select_fields, $link_name_to_fields_array, $max_results, $deleted ) 
```

查看[API 描述](http://developers.sugarcrm.com/docs/OS/6.4/Developer_Guides/-docs-Developer_Guides-Sugar_Developer_Guide_6.4.0-Sugar_Developer_Guide_640.html#9000493)并搜索“Call: get_entry_list()”。它适用于 6.4，但不应该有任何区别。

# hadoop - 序列化中带有 Avro NullPointerException 的 MRUnit

> ID：15230482
> 
> 赞同：4
> 
> 时间：2013-03-05T17:39:09.487
> 
> 标签：hadoop, mapreduce, avro, mrunit

我正在尝试使用 MRUnit 测试 Hadoop .mapreduce Avro 作业。我收到如下所示的 NullPointerException。我附上了一部分 pom 和源代码。任何援助将不胜感激。

谢谢

我得到的错误是：

```
java.lang.NullPointerException
at org.apache.hadoop.mrunit.internal.io.Serialization.copy(Serialization.java:73)
at org.apache.hadoop.mrunit.internal.io.Serialization.copy(Serialization.java:91)
at org.apache.hadoop.mrunit.internal.io.Serialization.copyWithConf(Serialization.java:104)
at org.apache.hadoop.mrunit.TestDriver.copy(TestDriver.java:608)
at org.apache.hadoop.mrunit.MapDriverBase.setInputKey(MapDriverBase.java:64)
at org.apache.hadoop.mrunit.MapDriverBase.setInput(MapDriverBase.java:104)
at org.apache.hadoop.mrunit.MapDriverBase.withInput(MapDriverBase.java:218)
at org.lab41.project.mapreduce.ParseMetadataAsTextIntoAvroTest.testMap(ParseMetadataAsTextIntoAvroTest.java:115)
..... 
```

pom片段：

```
<dependency>
    <groupId>org.apache.mrunit</groupId>
    <artifactId>mrunit</artifactId>
    <version>0.9.0-incubating</version>
    <classifier>hadoop2</classifier>
    <scope>test</scope>
</dependency>

<avro.version>1.7.4</avro.version>
<hadoop.version>2.0.0-mr1-cdh4.1.3</hadoop.version>

<dependency>
    <groupId>org.apache.avro</groupId>
    <artifactId>avro</artifactId>
    <version>${avro.version}</version>
</dependency>

<dependency>
    <groupId>org.apache.hadoop</groupId>
    <artifactId>hadoop-client</artifactId>
    <version>${hadoop.version}</version>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>org.apache.hadoop</groupId>
    <artifactId>hadoop-core</artifactId>
    <version>${hadoop.version}</version>
    <scope>provided</scope>
 </dependency>
 <dependency>
    <groupId>org.apache.avro</groupId>
    <artifactId>avro-mapred</artifactId>
    <version>${avro.version}</version>
    <classifier>hadoop2</classifier>
 </dependency> 
```

这是测试的摘录：

```
import static org.junit.Assert.*;

import java.io.IOException;
import java.nio.ByteBuffer;
import java.nio.CharBuffer;
import java.nio.charset.Charset;
import java.nio.charset.CharsetEncoder;
import java.text.ParseException;
import java.text.SimpleDateFormat;

import org.apache.avro.mapred.AvroKey;
import org.apache.avro.hadoop.io.AvroSerialization;
import org.apache.avro.mapred.AvroValue;
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mrunit.mapreduce.MapDriver;
import org.apache.hadoop.mrunit.types.Pair;
import org.junit.After;
import org.junit.AfterClass;
import org.junit.Before;
import org.junit.BeforeClass;
import org.junit.Test;
import org.lab41.project.domain.DataRecord;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class ParseMetadataAsTextIntoAvroTest {

    Logger logger = LoggerFactory
            .getLogger(ParseMetadataAsTextIntoAvroTest.class);
    private MapDriver<LongWritable, Text, AvroKey<Long>, AvroValue<DataRecord>> mapDriver;

    @BeforeClass
    public static void setUpClass() {
    }

    @AfterClass
    public static void tearDownClass() {
    }

    @Before
    public void setUp() throws IOException {
        ParseMetadataAsTextIntoAvroMapper mapper = new ParseMetadataAsTextIntoAvroMapper();

        mapDriver = new MapDriver<LongWritable, Text, AvroKey<Long>, AvroValue<DataRecord>>();
        mapDriver.setMapper(mapper);
        mapDriver.getConfiguration().setStrings("io.serializations", new String[]{  
            AvroSerialization.class.getName()
        });
    }

    @Test
    public void testMap() throws ParseException, IOException {
        Text testInputText = new Text(test0);

        DataRecord record = new DataRecord();
       ….

        AvroKey<Long> expectedPivot = new AvroKey<Long>(1L);
        AvroValue<DataRecord> expectedRecord = new AvroValue<DataRecord>(record);

        mapDriver.withInput(new Pair<LongWritable, Text>(new LongWritable(1), testInputText));
        mapDriver.withOutput(new Pair<AvroKey<Long>, AvroValue<DataRecord>>(expectedPivot, expectedRecord));
        mapDriver.runTest();

    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T23:12:03.177

为了使其正常工作，您已将其添加`AvroSerializatio`到默认序列化中。您还必须配置`AvroSerializationn`.

```
 @Before
public void setUp() throws IOException {
    ParseMetadataAsTextIntoAvroMapper mapper = new ParseMetadataAsTextIntoAvroMapper();
    mapDriver = new MapDriver<LongWritable, Text, AvroKey<Long>, AvroValue<NetworkRecord>>();
    mapDriver.setMapper(mapper);

    //Copy over the default io.serializations. If you don't do this then you will 
    //not be able to deserialize the inputs to the mapper
    String[] strings = mapDriver.getConfiguration().getStrings("io.serializations");
    String[] newStrings = new String[strings.length +1];
    System.arraycopy( strings, 0, newStrings, 0, strings.length );
    newStrings[newStrings.length-1] = AvroSerialization.class.getName();

    //Now you have to configure AvroSerialization by sepecifying the key
    //writer Schema and the value writer schema.
    mapDriver.getConfiguration().setStrings("io.serializations", newStrings);
    mapDriver.getConfiguration().setStrings("avro.serialization.key.writer.schema", Schema.create(Schema.Type.LONG).toString(true));
    mapDriver.getConfiguration().setStrings("avro.serialization.value.writer.schema", NetworkRecord.SCHEMA$.toString(true));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-28T14:05:51.560

这也解决了这个问题，优点是代码更短更清晰。

```
 MapDriver driver = MapDriver.newMapDriver(your mapper);

        Configuration conf = driver.getConfiguration();
        AvroSerialization.addToConfiguration(conf);
        AvroSerialization.setKeyWriterSchema(conf, your schema);
        AvroSerialization.setKeyReaderSchema(conf, your schema);
        Job job = new Job(conf);
        job.set... your job settings;
        AvroJob.set... your avro job settings; 
```

这可能是 mrunit 的错误，没有正确设置 io.serializations 而我认为它应该由 job.setInputFormatClass(AvroKeyInputFormat.class) 设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-19T00:59:43.600

您必须添加`AvroSerialization`到默认序列化并配置`AvroSerialization`.

```
@Before
public void setUp() throws IOException {
    ParseMetadataAsTextIntoAvroMapper mapper = new ParseMetadataAsTextIntoAvroMapper();
    mapDriver = new MapDriver<LongWritable, Text, AvroKey<Long>, AvroValue<NetworkRecord>>();
    mapDriver.setMapper(mapper);
    Configuration configuration = mapDriver.getConfiguration();

    // Add AvroSerialization to the configuration
    // (copy over the default serializations for deserializing the mapper inputs)
    String[] serializations = configuration.getStrings(CommonConfigurationKeysPublic.IO_SERIALIZATIONS_KEY);
    String[] newSerializations = Arrays.copyOf(serializations, serializations.length + 1);
    newSerializations[serializations.length] = AvroSerialization.class.getName();
    configuration.setStrings(CommonConfigurationKeysPublic.IO_SERIALIZATIONS_KEY, newSerializations);

    //Configure AvroSerialization by specifying the key writer and value writer schemas
    AvroSerialization.setKeyWriterSchema(configuration, Schema.create(Schema.Type.LONG));
    AvroSerialization.setValueWriterSchema(configuration, NetworkRecord.SCHEMA$)
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-12-17T16:22:19.947

在这里回答：[https](https://issues.apache.org/jira/browse/MRUNIT-181) ://issues.apache.org/jira/browse/MRUNIT-181特别是：[https ://cwiki.apache.org/confluence/display/MRUNIT/MRUnit+with+Avro](https://cwiki.apache.org/confluence/display/MRUNIT/MRUnit+with+Avro)

# java - “表 * 没有名为 * 的列”错误，SQLite

> ID：15230499
> 
> 赞同：0
> 
> 时间：2013-03-05T17:40:00.223
> 
> 标签：java, android, sqlite

我正在尝试学习 SQLite，尝试基本的东西并且（如预期的那样）它并没有真正起作用。

我试图创建另一个数据库（不同的文件），但错误仍然存​​在。

```
03-05 17:20:18.989: D/myLogs(1323): --- Insert in mytable: ---
03-05 17:20:18.999: E/SQLiteLog(1323): (1) table mytable has no column named date
03-05 17:20:19.199: E/SQLiteDatabase(1323): Error inserting time=asd date=asd glucose=adf
03-05 17:20:19.199: E/SQLiteDatabase(1323): android.database.sqlite.SQLiteException: table mytable has no column named date (code 1): , while compiling: INSERT INTO mytable(time,date,glucose) VALUES (?,?,?) 
```

这里是 LogCat 输出：[http](http://s15.postimage.org/soak9ifbf/androidlog.png) ://s15.postimage.org/soak9ifbf/androidlog.png （不能添加图片，必须给你一个链接）

基本上，它说，没有名为“日期”的列

这是代码：

```
package com.example.prototype2;

import android.os.Bundle;
import android.app.Activity;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
 import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.support.v4.app.NavUtils;

 public class AddGlucose extends Activity implements OnClickListener {

final String LOG_TAG = "myLogs";

Button btnAdd, btnRead, btnClear;
  EditText etGlucose, etTime, etDate;

  DBHelper dbHelper;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_add_glucose);
    // Show the Up button in the action bar.
    setupActionBar();

    btnAdd = (Button) findViewById(R.id.btnAdd);
    btnAdd.setOnClickListener(this);

    btnRead = (Button) findViewById(R.id.btnRead);
    btnRead.setOnClickListener(this);

    btnClear = (Button) findViewById(R.id.btnClear);
    btnClear.setOnClickListener(this);

    etGlucose = (EditText) findViewById(R.id.etGlucose);
    etTime = (EditText) findViewById(R.id.etTime);
    etDate = (EditText) findViewById(R.id.etDate);
    dbHelper = new DBHelper(this);
}

/**
 * Set up the {@link android.app.ActionBar}.
 */
private void setupActionBar() {

    getActionBar().setDisplayHomeAsUpEnabled(true);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.add_glucose, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        // This ID represents the Home or Up button. In the case of this
        // activity, the Up button is shown. Use NavUtils to allow users
        // to navigate up one level in the application structure. For
        // more details, see the Navigation pattern on Android Design:
        //
        // http://developer.android.com/design/patterns/navigation.html#up-vs-back
        //
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    ContentValues cv = new ContentValues();
    String glucose = etGlucose.getText().toString();
    String time = etTime.getText().toString();
    String date = etDate.getText().toString();

    SQLiteDatabase db = dbHelper.getWritableDatabase();

    switch (v.getId()) {
    case R.id.btnAdd:
      Log.d(LOG_TAG, "--- Insert in mytable: ---");

      cv.put("glucose", glucose);
      cv.put("time", time);
      cv.put("date", date);
    long rowID = db.insert("mytable", null, cv);
      Log.d(LOG_TAG, "row inserted, ID = " + rowID);
      break;

    case R.id.btnRead:
        Log.d(LOG_TAG, "--- Rows in mytable: ---");
        Cursor c = db.query("mytable", null, null, null, null, null, null, null);
        if (c.moveToFirst()) {
            int idColIndex = c.getColumnIndex("id");
            int glucoseColIndex = c.getColumnIndex("glucose");
            int timeColIndex = c.getColumnIndex("time");
            int dateColIndex = c.getColumnIndex("date");

            do {    

                Log.d(LOG_TAG,
                        "ID = " + c.getInt(idColIndex) + 
                        ", glucose = " + c.getString(glucoseColIndex) +
                        ", time = " + c.getString(timeColIndex) + ", date = " + c.getString(dateColIndex));
            } while (c.moveToNext());
        } else
            Log.d(LOG_TAG, "0 rows");
        c.close();
        break;

case R.id.btnClear:
      Log.d(LOG_TAG, "--- Clear mytable: ---");

      int clearCount = db.delete("mytable", null, null);
      Log.d(LOG_TAG, "deleted rows count = " + clearCount);
      break;
    }
    dbHelper.close();
  }

 class DBHelper extends SQLiteOpenHelper {

        public DBHelper(Context context) {

          super(context, "mytable", null, 1);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
          Log.d(LOG_TAG, "--- onCreate database ---");
          // создаем таблицу с полями
          db.execSQL("create table mytable ("
              + "id integer primary key autoincrement," 
              + "glucose text,"
              + "time text" + "date text" + ");");
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

        }
      }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T17:54:44.487

错误只是说，该表`mytable`不包含请求的列`date`。除此之外没有魔法。

您应该再次删除并创建表，并确保它具有正确的列。请注意，您的`onCreate`方法包含错误。之后`,`缺少A。`time text`所以基本上你的数据库表甚至没有用这种方法创建，因为 SQL 是无效的。

尝试`onCreate()`使用以下代码创建表：

```
 db.execSQL("create table mytable ("
          + "id integer primary key autoincrement," 
          + "glucose text,"
          + "time text," // added a ','
          + "date text" + ");"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T23:39:29.817

只有添加 a`,`才能解决问题`create table`sql 无法创建表，因此它使用的是以前版本的表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-28T21:37:10.403

当我 100% 确定我的表包含该列时，我遇到了这个错误。经过数小时的尝试后，我检查了表，发现它仍然有我在更改代码和这些列名时更改的旧列名与我的代码中的列名不匹配。我卸载了设备上的应用程序并重新安装，问题得到解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-07T06:42:40.517

检查您的列是否与拼写匹配并插入到查询中。还要检查您的查询冒号和逗号 (,) 和 (") 是否正确插入。

# java - 如何打印在另一个类中创建的对象数组

> ID：15230501
> 
> 赞同：-1
> 
> 时间：2013-03-05T17:40:03.900
> 
> 标签：java, arrays, object

我想向您寻求帮助。我想打印由 FIELD 类中的构造函数创建的对象数组。我想在 update() 方法中的 ConsoleUI 类中打印它。

这是构造函数

```
public Field(int rowCount, int columnCount, int mineCount) {
    this.rowCount = rowCount;
    this.columnCount = columnCount;
    this.mineCount = mineCount;
    tiles = new Tile[rowCount][columnCount];
    generate();
} 
```

这是更新方法。这可能是错的。我想我需要以某种方式将 Field 改写为 Tile。

```
public void update() {  
    int row, column;
    System.out.println("   0 1 2 3 4 5 6 7 8");   
    for (row=0; row < field.getRowCount(); row++) {
        switch(row){  
           case 0:System.out.print("A ");break;
           case 1:System.out.print("B ");break;
           case 2:System.out.print("C ");break;
           case 3:System.out.print("D ");break;
           case 4:System.out.print("E ");break;
           case 5:System.out.print("F ");break;
           case 6:System.out.print("G ");break;
           case 7:System.out.print("H ");break;
           case 8:System.out.print("I ");break;
        }
        for (column=0; column < field.getColumnCount() ; column++) {
            System.out.print(" ");
          int r;
          int c;
            Tile t = (Tile) field[r][c];
            for (Field field : t.getState());
            System.out.print(field[row][column]);
        }
        System.out.println();
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:47:52.733

如果我正确理解您的问题，请在您的 Field 类中创建一个 get 方法。

```
public Tile getTile(int row, int col)
{
    return tiles[row][col];
} 
```

然后在你的类中使用更新方法，创建一个 Field 对象

```
Field field = new Field(); 
```

并打电话

```
field.getTile(row,col); 
```

每当您需要瓷砖时。

那就是如果我明白你在问什么。

# jaxb - JAXB - schemaBindings 定制不与任何模式元素相关联

> ID：15230503
> 
> 赞同：6
> 
> 时间：2013-03-05T17:40:14.447
> 
> 标签：jaxb, xjc, maven-jaxb2-plugin

我正在尝试使用带有自定义绑定的 Maven XJC 插件从一组 XSD 文件中生成 Java 类。自定义添加到[前缀 JAXB 生成的类](https://stackoverflow.com/questions/892298/prefixing-jaxb-generated-classes#answer-903629)。但是，当 maven 构建运行时，XJC 插件似乎无法识别该`schemaBindings`元素并抛出异常如下。

```
[ERROR] Error while parsing schema(s).Location [ file:/C:/blah/bindings.xjb{5,25}].
com.sun.istack.SAXParseException2: The "jaxb:schemaBindings" customization is no
t associated with any schema element.
        at com.sun.tools.xjc.reader.internalizer.Internalizer.reportError(Intern
alizer.java:632)
        at com.sun.tools.xjc.reader.internalizer.Internalizer.reportError(Intern
alizer.java:626)
        at com.sun.tools.xjc.reader.internalizer.Internalizer.move(Internalizer.
java:451)
        at com.sun.tools.xjc.reader.internalizer.Internalizer.transform(Internal
izer.java:160)
        at com.sun.tools.xjc.reader.internalizer.Internalizer.transform(Internal
izer.java:109)
        at com.sun.tools.xjc.reader.internalizer.DOMForest.transform(DOMForest.j
ava:449)
        at com.sun.tools.xjc.ModelLoader.buildDOMForest(ModelLoader.java:345)
        at com.sun.tools.xjc.ModelLoader.loadXMLSchema(ModelLoader.java:377)
        at com.sun.tools.xjc.ModelLoader.load(ModelLoader.java:174)
        at com.sun.tools.xjc.ModelLoader.load(ModelLoader.java:119)
        at org.jvnet.mjiip.v_2_2.XJC22Mojo.loadModel(XJC22Mojo.java:45)
        at org.jvnet.mjiip.v_2_2.XJC22Mojo.doExecute(XJC22Mojo.java:35)
        at org.jvnet.mjiip.v_2_2.XJC22Mojo.doExecute(XJC22Mojo.java:22)
        at org.jvnet.jaxb2.maven2.RawXJC2Mojo.doExecute(RawXJC2Mojo.java:282)
        at org.jvnet.jaxb2.maven2.RawXJC2Mojo.execute(RawXJC2Mojo.java:147)
        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPlugi
nManager.java:490)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(Defa
ultLifecycleExecutor.java:694)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLi
fecycle(DefaultLifecycleExecutor.java:556)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(Defau
ltLifecycleExecutor.java:535)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHan
dleFailures(DefaultLifecycleExecutor.java:387)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegmen
ts(DefaultLifecycleExecutor.java:348)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLi
fecycleExecutor.java:180)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
        at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:6
0)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)

        at org.codehaus.classworlds.Launcher.main(Launcher.java:375) 
```

bindings.jxb 如下。

```
<jaxb:bindings xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
           xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
           jaxb:version="2.1" schemaLocation="blah.xsd">      
    <jaxb:schemaBindings>
        <jaxb:nameXmlTransform>
              <jaxb:elementName suffix="Type"/>
        </jaxb:nameXmlTransform> 
    </jaxb:schemaBindings>
</jaxb:bindings> 
```

以下插件用于生成 Java 类。在此处粘贴相关`mvn`代码段。

```
<plugin>   

    <groupId>org.jvnet.jaxb2.maven2</groupId>

    <artifactId>maven-jaxb2-plugin</artifactId>

    <version>0.8.0</version>

        <executions>

            <execution>

                <goals>

                    <goal>generate</goal>

                </goals>
            </execution>

        </executions>

        <dependencies>

            <dependency>

                <groupId>com.sun.xml.bind</groupId>

                <artifactId>jaxb-xjc</artifactId>

                <version>2.2.6</version>

            </dependency>

            <dependency>

                <groupId>com.sun.xml.bind</groupId>

                <artifactId>jaxb-impl</artifactId>

                <version>2.2.6</version>

            </dependency>

        </dependencies>
    <configuration>

                               <schemaDirectory>./src/main/resources</schemaDirectory>

                    <includeBindings>
                        <includeBinding>**/*.xjb</includeBinding>
                    </includeBindings>
                    <extension>true</extension>

                </configuration>

            </plugin> 
```

我能找到的关于这个问题的[唯一其他讨论围绕着](http://www.java.net/node/660051)我不使用的 JAX-WS，因为这里没有涉及 WSDL 文件。这里都是 XSD 文件。

我不明白为什么必须发生此错误，因为 JAXB 的`binding.xsd`文件确实定义了`schemaBindings`如下所示的元素。

```
<xs:element name="schemaBindings" substitutionGroup="jaxb:declaration">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" ref="jaxb:package"/>
        <xs:element minOccurs="0" ref="jaxb:nameXmlTransform"/>
      </xs:sequence>
      <xs:attribute name="map" type="xs:boolean" />
    </xs:complexType>
</xs:element> 
```

非常感谢有关此问题的任何提示。如果需要更多输入，请告诉我。谢谢！

编辑：互联网上的很多人似乎都使用 schemaBindings 没有任何问题。这可能是问题中提到的依赖项的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T19:36:25.377

您`jaxb:schemaBindings`必须将绑定与某个模式架构相关联。通过模式位置或 scd。请参阅[http://jaxb.java.net/guide/Customizing_Java_packages.html](http://jaxb.java.net/guide/Customizing_Java_packages.html)

# sencha-touch-2 - 是否可以将 EXT 组件插入到 XTemplate 中？

> ID：15230517
> 
> 赞同：2
> 
> 时间：2013-03-05T17:40:47.273
> 
> 标签：sencha-touch-2

我有一个 XTemplate，我想在模板中添加一些实际的 EXT 小部件，以便在小部件的上方和下方呈现模板代码。假设我有一个定义了以下 itemTpl 的“数据视图”：

```
 itemTpl: [
        '<tpl for=".">',
        '<div class="song-page-header">',
        '   <div class="artwork"><img src="{artwork}"/></div>',
        '   <h1>{title}</h1>',
        '   <h2>{artist}</h2>',
        '   <h3>Genre: {genre}</h3>',
        '   <p>{copyright}</p>',
        '</div>',

        /* Ext.Button should go here */

        '<tpl for="offers">',
        '   <p>{offer_id}: {offer_type}, {price}</p>',
        '</tpl>',
        '</tpl>'
    ] 
```

是否可以在那里定义一个真正的 Ext.Button（而不仅仅是一些近似于 Ext.Button 行为的 HTML）？我不在乎它是否必须在事后应用，但我似乎无法找到正确的事件处理程序来使用能够在那里插入按钮。Sencha 文档很烂，因此我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-19T23:14:07.227

实际上你可以做到这一点，你只需要有点创意。

在这里查看我的博客文章：http: [//jakes-hackerblog.herokuapp.com/blog/2013/05/23/a-fresh-rails-blog/](http://jakes-hackerblog.herokuapp.com/blog/2013/05/23/a-fresh-rails-blog/)

本质上，您在模板中放置了一些动态 div 元素

```
 '<div id="box-holder">' +
                    '<div id="box-{schoolpersonid}"></div>'+
                '</div>'+ 
```

然后在按钮配置中使用“renderTo”，在刷新函数中调用它：

```
 listeners: {

        'refresh': function(records) {

            var storeRecords = records._store._data.items;

            for(var i = 0; i < storeRecords.length; i++){

                var data = storeRecords[i].data;
                var renderTo = this.element.select('#box-' + data.schoolpersonid).elements[0];

                var button1 = new Ext.Button({
                    action:             'doPresent',
                    xtype:              'button',
                    align:              'right',
                    text:               'Present',
                    ui:                 'present',
                    renderTo:            renderTo,
                    schoolpersonid:      data.schoolpersonid
                });
            }
        }
    }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:29:13.453

由于 Sencha Touch 框架的管理和性能，我认为 XTemplate 不支持此功能。

其次，你不能那样做，因为基本上你试图在你的`itemTpl`当 sencha 模板只允许 html 结构时合并 HTML 和 javascript。

为了解决这种情况，您可以查看[Component Dataview](http://docs.sencha.com/touch/2-1/#!/guide/dataview)

# math - 中缀前缀后缀

> ID：15230519
> 
> 赞同：-7
> 
> 时间：2013-03-05T17:40:52.873
> 
> 标签：math

我在一些脑筋急转弯问题库中遇到了这个问题。

```
What should be the answer of this?
( (3+1) / 3) * 6

I thought it is 7 but the correct answer is 8\. 
```

只有当它是 (3+1) * (6/3) 时才会发生这种情况。既然表达式中有括号，我怎么能得到 8？我试图仔细检查，答案是正确的。

有人可以帮助我理解这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T17:44:09.677

使用整数：

```
 ((3 + 1) / 3) * 6 
= (4 / 3) * 6 
= 1 * 6 
= 6 
```

使用浮点数：

```
 ((3 + 1) / 3) * 6 
= (4 / 3) * 6
= (4 / 3) * (6 / 1) 
```

作为[分数](http://en.wikipedia.org/wiki/Fraction_%28mathematics%29)：

```
= (6 * 4) / (3 * 1) 
= 24 / 3 
= 8 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T17:42:52.583

这只是简单的算术 - 与编程无关，也与中缀、前缀和后缀符号之间的区别无关：

```
((3+1) / 3) * 6 = (4 / 3) * 6
                = 1.333... * 6
                = 8 
```

这个脑筋急转弯题库显然希望您使用通常的数学规则 - 毕竟它不是 C 脑筋急转弯题库。即使您改用整数除法（where`4 / 3`会给出`1`），答案也会是 6。

[在 Wolfram Alpha 上](http://www.wolframalpha.com/input/?i=%28+%283%2B1%29+%2F+3%29+%2a+6)查看结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T17:43:26.070

听上去，这是基本的算术，与编程没有任何关系：

```
(3 + 1) / 3 * 6 = 
4 / 3 * 6 =
(4 * 6) / 3 =
24 / 3 =
8 
```

# sql - ROLLBACK TRAN 会回滚所有内容吗？

> ID：15230524
> 
> 赞同：3
> 
> 时间：2013-03-05T17:41:11.290
> 
> 标签：sql, sql-server, tsql

会`ROLLBACK TRAN`回滚我的 SP 中的所有内容吗？（包括对另一个 SP 的调用）

例子：

```
BEGIN TRAN

  INSERT INTO (table1)
  VALUES (1,'abc')

  EXEC InsertTable2

  INSERT INTO (table3)
  VALUES (1,'abc')

ROLLBACK TRAN 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T17:43:24.580

来自 msdn

将显式或隐式事务回滚到事务的开头，或事务内的保存点。您可以使用 ROLLBACK TRANSACTION 擦除从事务开始或保存点所做的所有数据修改。它还释放事务持有的资源。

所以是的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T18:01:57.253

在不知道不可能的定义的`InsertTable2`情况下肯定地说。这是一个没有的例子。

```
CREATE TABLE table1
(
Num int,
String char(3)
)
GO

CREATE PROC InsertTable2
AS
COMMIT;
BEGIN TRAN;

GO

BEGIN TRAN

  INSERT INTO table1
  VALUES (1,'abc')

  EXEC InsertTable2

  INSERT INTO table1
  VALUES (1,'abc')

ROLLBACK TRAN

GO

SELECT *
FROM table1

GO

DROP TABLE table1

DROP PROC InsertTable2 
```

但假设一个理智的定义，答案是“是”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:55:36.887

是的。它将包含您上面提到 `ROLLBACK`的所有内容。`Store Procedure`

更多关于[回滚交易](http://msdn.microsoft.com/en-in/library/ms181299%28v=sql.100%29.aspx)

# javascript - 不断请求图像直到找到

> ID：15230527
> 
> 赞同：0
> 
> 时间：2013-03-05T17:41:25.880
> 
> 标签：javascript, ajax, http, interface, upload

我正在开发一个允许异步上传图像的界面，并且该过程按预期工作。该进程将图像提交给后端进程，该进程管理将图像调整为不同大小并将它们存储在云中。我生成 url，最终图像被上传（通常在 10 秒内）到适当的调整大小。

图片上传后，界面中没有显示该图片的缩略图，很明显，因为它还没有调整大小。

我想做的是，在创建图像并提交给后端服务以调整大小之后，客户端上的一个进程附加到每个上传尝试（我正在考虑使用 setinterval ）以继续寻找该图像直到它解决，一旦解决，使用该图像更新缩略图占位符。

一旦图像确实按请求解析，我如何提供它来更新界面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:56:11.627

根据您确定那里没有图像的方式（404 错误，某种 API 返回带有 URL 的 JSON？），您可以使用 jQuery.ajax() 根据 HTTP 状态代码很容易地采取行动。

```
function waitforimage(imageURL) {
    $.ajax(url, { 
        statusCode: {
            // on 404 wait and do it again later
            404: function() {
                setTimeout(function(){
                    waitforimage(imageURL);
                }, 3000);
            },
            // on success, load the image
            200: function() {
                loadimage(imageURL);
            }
        }
    });
}

function loadimage(imageURL) {
     $('#myimageID').attr('src', imageURL);
} 
```

当然，你可以不使用 jQuery 来完成它，但是要让它工作起来会更麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:19:10.123

使用`setTimeout`,`onerror`和`onload`事件的[纯 JavaScript ：](http://jsfiddle.net/kTr77/)

```
var img,
    attempt = 2;

checkForImage("https://ssl.gstatic.com/apps/cpanel/resources/img/apps_logo_new.png3",
             document.getElementById("message"));

function checkForImage(location, loadto) {    
    img = document.createElement("img")

    img.onerror = function () {
        setTimeout(function() {
            checkForImage(location, loadto);
            loadto.innerText = "Finding Picture... Attempt: " + attempt++;
        }, 5000); 
    }

    img.src = location;

    img.onload = function () {
        loadto.innerHTML = "<img src='" + location + "' />";
    }
} 
```

删除链接`3`末尾的`image`将显示一个成功的示例。

# sql-server - 从表中检索统一的数据样本

> ID：15230539
> 
> 赞同：1
> 
> 时间：2013-03-05T17:42:11.563
> 
> 标签：sql-server, tsql

我正在尝试对存储在外部应用程序的 SQL 表中的数据进行一些分析。但是，检索所有相关行的数据太多了。

我试图通过只获取一个小的、统一的数据样本来解决这个问题。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:50:41.000

您可以使用[TABLESAMPLE](http://msdn.microsoft.com/en-us/library/ms189108%28v=sql.105%29.aspx)，例如

```
select * from [yourtable] tablesample(10 percent) 
```

# jquery - .outerHeight 不考虑填充

> ID：15230540
> 
> 赞同：3
> 
> 时间：2013-03-05T17:42:11.720
> 
> 标签：jquery, css

更新小提琴：http: [//jsfiddle.net/KG3H8/4/](http://jsfiddle.net/KG3H8/4/)

我有 jquery 扩展我的高度`.content`，它有一个基于 % 的填充。

如果我删除填充它完美的工作。

我已经更新了 jsfiddle，除了 之外`.outerHeight()`的所有东西`$(window)`，因为它无论如何都不会在那里工作。我还添加了高度的打印输出。我仍然找不到问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:49:32.047

[`outerHeight()`](http://api.jquery.com/outerHeight/)`true`如果您作为第一个参数发送，则应该包括填充...和边框以及边距。

> 获取匹配元素集中第一个元素的当前计算高度，包括填充、边框和可选的边距。如果在一组空元素上调用，则返回值的整数（不带“px”）表示形式或 null。

如果那不是您想要的，那么您可能想要[`innerHeight()`](http://api.jquery.com/innerHeight/)。

# facebook - 如何为网页上的视频添加 Facebook 分享按钮

> ID：15230541
> 
> 赞同：1
> 
> 时间：2013-03-05T17:42:14.740
> 
> 标签：facebook, youtube, facebook-sharer, share-button

我的网站上有一个 YouTube 视频，想添加分享按钮，然后用户可以在 Facebook 上分享该视频。（仅视频而非整个网站）

这是我的代码，它似乎不起作用：

```
<a name="fb_share" type="box_count" href="http://www.youtube.com/watch?v=5Fgsi9nw_ME" rel="nofollow" alt="Share">Share</a>
<script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" type="text/javascript"></script> 
```

任何想法？或任何其他方法在网站上添加此按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:44:26.600

您是否按照[Facebook API 页面上](http://developers.facebook.com/docs/reference/plugins/send/)的说明进行操作？只需按照那里的说明进行操作，您就会得到干净整洁的代码，可用于共享视频 URL 等等。

编辑：更新了发送按钮，而不是按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:45:46.417

为您的 fb 分享创建一个按钮，例如

```
 $('ID OF YOUR BUTTON').click(function(e){
                e.preventDefault();
                FB.ui({
                    method: 'feed',
                    name: 'NAME OF YOUR VIDEO',
                    link: 'LINK OF YOUR VIDEO FROM YOUTUBE',
                    caption: 'YOUR CAPTION',
                    description: 'YOUR DESCRIPTION',
                });
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:54:08.987

请参考[这里](https://developers.facebook.com/docs/guides/web/)。

首先参考该链接及其给出的副本，然后通过一些代码。

# asp.net - 使用 TextMode = Password 将数据库中的值分配给文本框

> ID：15230542
> 
> 赞同：1
> 
> 时间：2013-03-05T17:42:15.877
> 
> 标签：asp.net, textbox

我有一个`asp:TextBox`with `TextMode = "Password"`，当我需要输入它时它工作正常。我的文本框：

```
<asp:TextBox ID="Txt_NovaSenha" runat="server"  TextMode="Password" Width="170px"></asp:TextBox> 
```

但现在我需要从数据库中获取密码并将其分配给 TextBox.Text，例如：

```
DataSet ds = forza.BuscaDadosCadastrais(Session["login"].ToString());

   foreach (DataRow row in ds.Tables[0].Rows)
     {
        TxtNome.Text = row["nome"].ToString();
        TxtEmail.Text = row["email"].ToString();
        TxtLogin.Text = row["login"].ToString();
        string aux = crip.DescriptografaString(row["senha"].ToString());
        Txt_SenhaAtual.Text = aux;
        Txt_SenhaAtual.TextMode = TextBoxMode.Password;
     } 
```

但是当它与`TextMode = Password`. 文本框变空。
当我删除这部分时，它工作正常......
有没有办法解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-12T16:07:08.183

您不必将数据库中的密码值分配给“编辑注册数据”表单中的密码文本框，用户无法以任何方式看到密码文本，为什么要显示它？

当用户编辑他们的数据时，您的编辑表单中的密码和确认密码文本框应该显示为空。

如果用户想编辑/更改他们现有的密码，他们只需输入并确认并保存即可；在保存 IF 用户输入密码时，您将用新密码替换现有密码。

如果用户不想编辑/更改他们的密码，他们不要输入一个，并且您在保存时不要替换现有密码。

您可以从数据库中获取用户可以从数据库中真正看到的所有其他数据，密码除外。

您应该/可以从代码中删除这些行：

```
string aux = crip.DescriptografaString(row["senha"].ToString());
Txt_SenhaAtual.Text = aux;
Txt_SenhaAtual.TextMode = TextBoxMode.Password; 
```

供您参考，下面的答案解释了为什么带有 TextMode="Password" 的 ASP.NET 文本框在回发时为空，以及如何强制将文本值发送回浏览器：

[ASP:TextBox 值仅在密码时才会在回发中消失](https://stackoverflow.com/q/2169568/463478)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T07:02:17.003

您根本不必显示密码。在您的编辑用户页面上，您可以向他们显示这样的虚拟密码***（不要用实际密码替换星号，因为如果您在浏览器中查看页面源代码可以看到它们）***

```
Txt_SenhaAtual.Attributes.Add(value,"******"); 
```

`Set the textmode of the textbox as "Password".`当用户输入/更新他们的密码时，他们仍然会看到“*”。您可以包含确认密码文本框并比较更新时的 2 个值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T17:47:06.573

您必须以编程方式更改 textMode，如下所示：

```
Me.Txt_NovaSenha.TextMode = TextBoxMode.SingleLine
Me.Txt_NovaSenha.Text = "test" 
```

但是，当然，这违背了密码模式的目的。从安全的角度来看，您的密码应该经过哈希处理且不可恢复。想想您使用的电子邮件网站是如何工作的。如果您忘记密码，他们不会给您，他们会让您重置密码。那是因为密码是散列的，不能（不应该）不散列。

如果你只是想有一个水印，你可以使用 ajaxcontrol 工具包。

```
 <ajax:TextBoxWatermarkExtender ID="TextBoxWatermarkExtender1" runat="server" TargetControlID="Txt_NovaSenha" WatermarkText="****">
    </ajax:TextBoxWatermarkExtender>
<asp:TextBox ID="Txt_NovaSenha" runat="server"  TextMode="Password" Width="170px"></asp:TextBox> 
```

只要确保您下载并包含工具包 dll ( [http://ajaxcontroltoolkit.codeplex.com/](http://ajaxcontroltoolkit.codeplex.com/) )

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T17:47:44.547

根据场景...

```
// don't use an asp textbox
<input type="password" value="<asp:Literal id="passwordText" runat="server" />" /> 
```

或者，作为更复杂的解决方案，解析您的出站 html 以查找输入元素并将空字符串替换为实际密码。

# javascript - jqPlot水平条形图点标签挑战

> ID：15230543
> 
> 赞同：0
> 
> 时间：2013-03-05T17:42:16.660
> 
> 标签：javascript, jquery, jqplot

jqPlot 的新手，正在为水平图表的数据和标签而苦苦挣扎。

这是问题所在。我想要的图表应该是这样的：

[http://www.ifthen.biz/DesiredChart.png](http://www.ifthen.biz/DesiredChart.png)

然而，我的实际图表如下所示：

[http://www.ifthen.biz/ActualChart.png](http://www.ifthen.biz/ActualChart.png)

似乎无法获得与每个问题的数据相对应的点标签（在本例中为“是”和“否”）。

每个问题都有一个是或否的答案。对于每个是或否，我都会计算答案，以便获得所需的图表。

请参阅下面的代码：

```
 <script>
        $(document).ready(function() {
            var q1 = [20, 58];
            var q2 = [5, 21];
            var plot1 = $.jqplot('quickStatsChart', [q1,q2], {
                seriesDefaults: {
                    renderer: $.jqplot.BarRenderer,
                    shadowAngle: 60,
                    showMarker: false,
                    rendererOptions: {
                        barDirection: 'horizontal'
                    },
                    pointLabels:{
                        show: true,
                        location: 'e',
                        labels: ['Yes','No']
                    }
                },
                axes: {
                    yaxis: {
                        renderer: $.jqplot.CategoryAxisRenderer,
                        ticks: ['Question 1', 'Question 2']
                    }
                }
            });
        });
    </script> 
```

有什么想法可以让我完成这项工作吗？

++发送

这是我尝试的新代码：

```
 <script>
        $(document).ready(function() {
            // [ tally question 1, tally question 2]
            var sX = [[[2,'q1'], [4,'q2']],  //  Yes'
                      [[5,'q1'], [1,'q2']]]; //  No's
            var plot1 = $.jqplot('quickStatsChart', sX, {
                seriesDefaults: {
                    renderer: $.jqplot.BarRenderer,
                    shadowAngle: 60,
                    showMarker: false,
                    rendererOptions: {
                        barDirection: 'horizontal'
                    },
                    pointLabels:{
                        show: true,
                        location: 'e',
                        labels: ['Yes','No']
                    }
                },
                axes: {
                    yaxis: {
                        renderer: $.jqplot.CategoryAxisRenderer
                    }
                }
            });
        });
    </script> 
```

结果与上面的实际图表相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:21:43.027

检查此[链接](http://www.jqplot.com/tests/bar-charts.php)如您所见，变量的第二个数字是 yaxis 的名称

```
$(document).ready(function(){
    var plot2 = $.jqplot('chart2', [
        [[2,1], [4,2], [6,3], [3,4]],
        [[5,1], [1,2], [3,3], [4,4]],
        [[4,1], [7,2], [1,3], [2,4]]], {
        seriesDefaults: {
            renderer:$.jqplot.BarRenderer,
            pointLabels: { show: true, location: 'e', edgeTolerance: -15 },
            shadowAngle: 135,
            rendererOptions: {
                barDirection: 'horizontal'
            }
        },
        axes: {
            yaxis: {
                renderer: $.jqplot.CategoryAxisRenderer
            }
        }
    });
}); 
```

尝试删除它是唯一的区别。如果工程将 q1 更改为 Yes，将 q2 更改为 No

```
pointLabels:{
    show: true,
    location: 'e',
    labels: ['Yes','No']
} 
```

# svg - d3.js keep zoomable y-axis from going below zero

> ID：15230545
> 
> 赞同：4
> 
> 时间：2013-03-05T17:42:21.120
> 
> 标签：svg, d3.js, zooming, scale

I have a graph with zoom features. My main observation was that the x-axis updated its scale based on my current zoom level. I wanted the y-axis to do this too, so enabled `zoom.y(y)` , the undesired side affect being that now the user can zoom out in all directions, even into negative values "below" the graph.

[http://jsfiddle.net/ericps/xJ3Ke/5/](http://jsfiddle.net/ericps/xJ3Ke/5/)

`var zoom = d3.behavior.zoom().scaleExtent([0.2, 5]) .on("zoom", draw);` doesn't seem to really take the y-axis into account. And the user can still drag the chart anywhere in any direction to infinity.

One idea I thought of was independent of having zoom.y(y) enabled, and simply requires redrawing the y-axis based on what it is in the currently visible range. Like some kind of redraw based on the position of the X axis only. I don't want up and down scrolling at all now, only left and right

aside from commenting out `//zoom.y(y)` how would this be done? Insight appreciated.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T19:03:46.107

All you need to do is update the y scale domain in your draw method.

The zoom function will modify the associated scales and set their domain to simulate a zoom. So you can get your x visible data bounds by doing x.invert(0) and x.invert(width), for example. If you converted your data to use Date's instead of strings then this is what I would suggest you use to filter, it woudl probably be more efficient.

As it is though, you can still use the x scale to filter to your visible data, find the y-axis extents of those values, and set your y scales domain to match accordingly. And in fact you can do all this in just a few lines (in your zoom update callback):

```
var yExtent = d3.extent(data.filter(function(d) { 
    var dt = x(d.date);
    return dt > 0 && dt < width;
}), function(d) { return d.value; });
y.domain(yExtent).nice(); 
```

You can try it out [here](http://jsfiddle.net/superboggly/6WdQU/)

To better explain what is going on:

The zoom behaviour listens to mouse events and modifies the range of the associated scales.

The scales are used by the axes which draw them as lines with ticks, and the scales are also used by the data associated with your paths and areas as you've set them up in callbacks.

So when the zoom changes it fires a callback and the basic method is what you had:

```
svg.select("g.x.axis").call(xAxis);
svg.select("g.y.axis").call(yAxis);
svg.select("path.area").attr("d", area);
svg.select("path.line").attr("d", line); 
```

we redraw the x- and y- axes with the newly updated domains and we redraw (recompute) the area and the line - also with the newly domained x- and y- scales.

So to get the behaviour you wanted we take away the default zoom behaviour on the y scale and instead we will modify the y scales domain ourselves whenever we get a zoom or pan: conveniently we already have a callback for those actions because of the zoom behaviour.

The first step to compute our y scale's domain is to figure out which data values are visible. The x axis has been configured to output to a range of 0 to width and the zoom behaviour has updated the x scale's domain so that only a subset of the original domain outputs to this range. So we use the javascript array's filter method to pull out only those data objects whose mapping puts them in our visible range:

```
data.filter(function(d) { 
    var dt = x(d.date);
    return dt > 0 && dt < width;
} 
```

Then we use the handy d3 extent method to return the min and max values in an array. But because our array is all objects we need an accessor function so that the extents method has some numbers to actually compare (this is a common pattern in D3)

```
d3.extents(filteredData, function(d) { return d.value; }); 
```

So now we know the min and max values for all the data points that are drawn given our current x scale. The last bit is then just to set the y scale's domain and continue as normal!

```
y.domain(yExtent).nice(); 
```

The nice method I found in the [api](https://github.com/mbostock/d3/wiki/API-Reference) because it's the kind of thing you want a scale to do and d3 often does things for you that you want to do.

A great tutorial for figuring out some of this stuff is: [http://alignedleft.com/tutorials/](http://alignedleft.com/tutorials/) It is worth stepping through even the parts you think you know already.

# javascript - HTML5 使用画布将图像分解为图块

> ID：15230557
> 
> 赞同：0
> 
> 时间：2013-03-05T17:43:04.730
> 
> 标签：javascript, html, canvas

我有一个大图像，我想使用 html5 画布将其分解为 10x10 平铺图像。我可以轻松地将大图像绘制到画布上，然后使用 getImageData 获取特定区域的像素数据。

有没有一种简单的方法可以将该图像数据（这是一个像素数组）放入图像 html 元素中，还是我必须创建一个新的画布，将 ImageData 放入像素数组，然后调用 toDataURL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:55:03.410

为什么要在画布上经历所有这些麻烦？使用图像作为背景，并通过定位显示您想要的部分。

**HTML**

```
<div class="myImage section1"></div>
<div class="myImage section2"></div>
<div class="myImage section3"></div>
<div class="myImage section4"></div> 
```

**CSS**

```
div.myImage {
    width: 100px;
    height: 100px;
    background-image:url('myImage.png');
    background-position: 0 0;
}

.section2 {
    background-position: 100px 0;
}

.section3 {
    background-position: 0 100px;
}

.section4 {
    background-position: 100px 100px;
} 
```

# html - 单选按钮和文本在从右到左 (rtl) HTML 区域内的顺序是否正确？

> ID：15230560
> 
> 赞同：2
> 
> 时间：2013-03-05T17:43:11.447
> 
> 标签：html, radio-button, right-to-left, bidi

在 HTML 的同一行上使用基于从右到左的单选按钮时，我注意到了一个问题。如我所料，单选“按钮”与相关文本不一致；第 1 组的收音机在第 4 组的标签旁边，但其他按钮似乎按我的预期排列。这发生在多个浏览器上。

这是预期的行为吗？一个从右到左的语言人会理解这一点吗？

你可以在这里玩代码：http: [//jsfiddle.net/6U9fw/](http://jsfiddle.net/6U9fw/)

```
<div dir="rtl">
<input name="group" id="group1" type="radio" value="group1" />
<label for="group1">group1</label>
<input name="group" id="group2" type="radio" value="group2" />
<label for="group2">group2</label>
<input name="group" id="group3" type="radio" value="group3" />
<label for="group3">group3</label>
<input name="group" id="group4" type="radio" value="group4" />
<label for="group4">group4</label>
</div>
<input type="button" onclick="alert($('input[type=radio]:checked').val())" value="click" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:58:16.483

我不相信您的代码正常运行`rtl`。

看看[这个 jsfiddle](http://jsfiddle.net/6U9fw/7/)。我`&rlm;`在每个`input`标签及其相关文本之间添加。这是[此错误](https://bugzilla.mozilla.org/show_bug.cgi?id=237931)的解决方法，结果产生了我认为是预期的输出。

```
<div dir="rtl">
<input name="group" id="group1" type="radio" value="group1" />&rlm;
<label for="group1">group1</label>
<input name="group" id="group2" type="radio" value="group2" />&rlm;
<label for="group2">group2</label>
<input name="group" id="group3" type="radio" value="group3" />&rlm;
<label for="group3">group3</label>
<input name="group" id="group4" type="radio" value="group4" />&rlm;
<label for="group4">group4</label>
</div>
<input type="button" onclick="alert($('input[type=radio]:checked').val())" value="click" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T18:21:55.810

它的行为不正确，因为您的 div 是 rtl，但您的标签是英文的，这是一种 ltr 语言。在诸如希伯来语之类的 RTL 语言中使用标签也可以自然地解决问题，并且在 RTL div 中，您可能无论如何都需要 RTL 语言中的标签。

这是一个例子：

```
<div dir="rtl">
<input name="group" id="group1" type="radio" value="group1" />
<label for="group1">קבוצה א</label>
<input name="group" id="group2" type="radio" value="group2" />
<label for="group2">קבוצה ב</label>
<input name="group" id="group3" type="radio" value="group3" />
<label for="group3">קבוצה ג</label>
<input name="group" id="group4" type="radio" value="group4" />
<label for="group4">קבוצה ד</label>
</div>
<input type="button" onclick="alert($('input[type=radio]:checked').val())" value="click" /> 
```

如果你需要一个带有非 RTL 标签的 RTL div，你也可以使用双向隔离：

```
<div dir="rtl">
<input name="group" id="group1" type="radio" value="group1" />
<label for="group1" style="unicode-bidi: -moz-isolate; unicode-bidi: -webkit-isolate; unicode-bidi: isolate;">group1</label>
<input name="group" id="group2" type="radio" value="group2" />
<label for="group2" style="unicode-bidi: -moz-isolate; unicode-bidi: -webkit-isolate; unicode-bidi: isolate;">group2</label>
<input name="group" id="group3" type="radio" value="group3" />
<label for="group3" style="unicode-bidi: -moz-isolate; unicode-bidi: -webkit-isolate; unicode-bidi: isolate;">group3</label>
<input name="group" id="group4" type="radio" value="group4" />
<label for="group4" style="unicode-bidi: -moz-isolate; unicode-bidi: -webkit-isolate; unicode-bidi: isolate;">group4</label>
</div>
<input type="button" onclick="alert($('input[type=radio]:checked').val())" value="click" /> 
```

注意样式规范。

这个解决方案比添加 ‏ 更优雅，但不幸的是它在 Microsoft Internet Explorer 中不起作用。

# ruby-on-rails - 如何使 Active Record 加入返回唯一对象？

> ID：15230568
> 
> 赞同：49
> 
> 时间：2013-03-05T17:43:40.400
> 
> 标签：ruby-on-rails, activerecord

我有一个简单的查询需求：查找自 2013 年 1 月 1 日以来下订单的用户列表。

在 SQL 中，这是一个非常简单的查询。

但我正在使用 Rails 和 Active Record。

所以我写道：`User.joins(:orders).where("orders.created_at >= '2013-01-01 00:00:00'")`

在我们的数据库中，自 2013 年 1 月 1 日以来，我们有 75 个用户发出的 100 个订单。（有些用户显然下了不止一份订单。）

但是，上面的表达式返回 100 个用户。（必须有重复。）

我试过了`User.joins(:orders).where("orders.created_at >= '2013-01-01 00:00:00'").uniq`

那也行不通。

如何获取自 2013 年 1 月 1 日起下订单的 75 位用户？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2014-04-25T21:05:06.800

@dbjohn 有正确的想法，但我假设您想避免创建额外的对象。这是他的解决方案的一个小变种，让数据库为您执行唯一操作：

```
date = "2013-01-01 00:00:00"
User.joins(:orders).where("orders.created_at >= ?", date).distinct 
```

请注意，您可以重新排列方法的顺序以适合您认为最符合语义的任何内容，ActiveRecord 将为您编写相同的 SQL。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-08-07T20:59:05.150

```
User.joins(:orders).
    where("orders.created_at >= '2013-01-01 00:00:00'").
    group('users.id') 
```

`group`方法将链接到查询并为您提供唯一记录列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-11T17:31:11.457

您可以像这样编写嵌套查询：

`User.where(id: User.joins(:orders).where("orders.created_at >= '2013-01-01 00:00:00'").ids)`

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2015-11-10T11:55:16.980

Rails`uniq`从 3.2.1 版开始添加，所以现在你可以使用`uniq`

[http://apidock.com/rails/ActiveRecord/QueryMethods/uniq](http://apidock.com/rails/ActiveRecord/QueryMethods/uniq)

# c - 在这个 C 练习中纠正我的想法

> ID：15230569
> 
> 赞同：-2
> 
> 时间：2013-03-05T17:43:48.633
> 
> 标签：c, algorithm

该练习要求找出从 1 到 500 的数字中的哪一个，即数字特定数字的总和，提高到三次方等于该特定数字。

例如 1^3=1 和 371 使得 3^3+7^3+1^3 = 371

我是如何解决这个问题的：

我在想如果我可以拥有一个包含 500 个插槽的字符串数组，每个插槽包含一个字符串转换后的数字，那么我可以对每个插槽的字符串进行数学运算。如果他们符合我将应用的标准，那么将打印该插槽。

我尝试了函数 sprintf 但没有多大成功。在一个循环中，它只是初始化字符串（或者它是数组？3 小时后我很困惑）[0] 插槽，而所有其他插槽保持不变。

我不想让你解决这个练习，而不是用我的逻辑来指导我。如果您愿意，请让我添加我所做的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:48:44.117

始终从明确定义您的算法开始，这样您就知道自己在做什么。将其拆分为简单的步骤。像这样的东西：

```
For each integer i in the interval 1 to 500:
  Check if the condition holds for this i
  If it holds:
    Print i
  else:
    Do nothing 
```

现在您需要定义“*检查条件是否适用于此 i* ”。我会使用一些模数和除法运算来提取数字，但我把细节留给你。

请注意，我没有谈论 C 或任何其他编程语言。只有当你知道你的算法时，你才应该开始考虑实现。

（实际上可能存在与上面给出的算法略有不同的算法，其中每个嵌套在彼此内部的数字都有一个循环。该解决方案可能对您来说是可以接受的，但它不会那么通用）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T17:50:21.607

```
for(i=1;i<=500;i++)
{
   //loop for checking each number i
   int sum=0; // to store the sum of cube of digits
   int n=i; //copy of i
   //The below while loops does the task. It extracts a digit from the number and adds its cube to the sum
   // last digit from the number can be seen by taking its remainder by 10 . For eg 35%10=5
   //once we have used this digit make the number shorter by dividing by 10\. For eg 35/10 becomes 3 (because of integer divisions)
   while(n>0)
   {
       int rem=n%10; //extract the last digit
       sum+=cube(rem); //cube function raises a number to its cube
       n/=10;  //remove the digit we had extracted earlier from the number
    }
    if(sum==i) //we got the number we wanted
        printf("%d\n",i);

} 
```

# service - 远程重启多台服务器上的服务

> ID：15230572
> 
> 赞同：0
> 
> 时间：2013-03-05T17:43:53.090
> 
> 标签：service, restart

我有大约 1000 台服务器，需要在其上重新启动 SNMP 服务，有没有通过脚本或批处理文件简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T08:44:07.497

你应该看看[Ansible](http://www.ansibleworks.com/ "Ansible")配置工具。

步骤应该是这样的：

*   安装 Ansible：（`sudo apt-get install ansible`在 ubuntu 上）
*   在以下位置定义您的服务器组`/etc/ansible/hosts`

    ```
    [snmpservers]
    myhostnames[01:10000].example.com 
    ```

*   重启所有服务器上的服务

    ```
    ansible snmpservers -m service -a "name=snmp state=restarted" 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:52:34.460

你有任何类型的 IP 和 root 用户和密码（或 SSH 密钥）的集合吗？

如果是这样，您可以使用 for 循环遍历它们（实现取决于它们的存储方式），并使用正则表达式过滤或按字段选择选择用户名和密码，并使用 expect 为其提供密码。

如果您没有这样的集合，似乎您必须为它们构建一个数据库，手动操作可能会更容易，但无论如何创建数据库可能是值得的，以防万一您需要再次这样做。

# css - IE8 - 在缩放的 div 内，闪烁的插入符号显示与文本输入的偏移量

> ID：15230573
> 
> 赞同：0
> 
> 时间：2013-03-05T17:43:55.207
> 
> 标签：css, internet-explorer-8, textinput

我正在使用 MS Matrix 来缩放包含文本输入的 div。一切都在视觉上正确缩放，但闪烁的插入符号显示偏移。输入的文本仍然出现在正确的位置。

偏移量似乎与应用于包装器 div 的缩放量成正比。

css

```
#wrapper {
        width: 800px;
        height: 600px;
        filter: progid:DXImageTransform.Microsoft.Matrix(M11=0.86, M12=0, M21=0, M22=0.86, Dx=71.68, Dy=53.7599999999);    
        -ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=0.86, M12=0, M21=0, M22=0.86, Dx=71.68, Dy=53.7599999999)";
    } 
```

html

```
<div id="wrapper">
    <input type="text" >
</div> 
```

# javascript - d3 使用退出删除数据

> ID：15230574
> 
> 赞同：6
> 
> 时间：2013-03-05T17:43:57.913
> 
> 标签：javascript, d3.js

我准备了一个小小提琴来说明[这里的问题](http://jsfiddle.net/zhFbn/)

我在使用 d3 的退出函数从 dom 中删除元素时遇到问题。

假设我有一个包含 10 个元素的数组：

```
var data = [1 ,4, 5, 6, 24, 8, 12, 1, 1, 20] 
```

我使用这些数据使用 d3 创建一个简单的水平条形图

```
d3.selectAll('rect') 
.data(data) 
.enter() 
.attr("class", "rectangle")
.attr("stroke", "black")
.attr("stroke-width","1px")
.attr("fill","none")
.attr("x", 0)
.attr("y", function(d, i) { return 25 * i; } )
.attr("width", function(d) { return 22 * d; } )
.attr("height", "20"); 
```

现在经过短暂的延迟，我想修剪我的数据集，所以我剩下的就是

```
var truncatedData = [4,5]

d3.selectAll('rect')
    .data(truncatedData )   
    .exit()
    .transition()
    .delay(3000)
    .remove(); 
```

数据已成功删除，但仍显示前两个元素 1,4 而不是 4,5。

如何从 dom 中删除除 [4,5] 之外的所有内容？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-05T17:54:15.970

默认情况下，d3 匹配`.data()`由索引而不是值给出的元素。也就是说，在第二次调用中给它一个双元素数组意味着保留第一次调用的前两个元素（索引 0 和 1）。

要在您的情况下解决此问题，请提供一个函数以将元素与第二次调用相匹配`.data()`，即

```
.data([5, 6], function(d) { return(d); }) 
```

[在这里](http://jsfiddle.net/zhFbn/2/)修复了 jsfiddle 。

# c# - 是否可以通过远程 PC 访问托管在本地计算机（不是服务器，而是普通笔记本电脑）上的 asp.net Web 应用程序？

> ID：15230578
> 
> 赞同：-3
> 
> 时间：2013-03-05T17:44:10.180
> 
> 标签：c#, asp.net, visual-studio-2010, iis, deployment

我创建了一个

> ASP.NET 以 c# 作为后端代码的 web 应用程序，v4.0 框架

是否可以在我的本地桌面机器上托管并从远程机器访问[通过互联网]。我想让我的台式机作为托管 ASP.NET Web 应用程序的服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:56:11.570

如果您运行的是 Windows，则可以启用 IIS 并将应用程序发布到在本地计算机上运行的 IIS。

如果您的远程 PC 在您的网络中，那么您可以将浏览器指向您的主机 PC 的 IP 地址或计算机名称。如果您的远程 PC 在您的网络之外，您需要确保您的防火墙允许端口 80（或 443 用于 https）上的连接。您将需要一个静态 IP 地址或类似于[dyn.com](http://dyn.com)提供的服务，将您的动态 IP 指向一个域名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:47:38.190

您是否尝试过使用 MS Deploy [http://www.iis.net/downloads/microsoft/web-deploy](http://www.iis.net/downloads/microsoft/web-deploy)

# c# - EnableRaisingEvents 每 100 毫秒？

> ID：15230579
> 
> 赞同：1
> 
> 时间：2013-03-05T17:44:10.967
> 
> 标签：c#, events, filesystemwatcher

我只是想知道是否有每 100 毫秒打开和关闭 EnableRaisingEvents 的方法？例如，最初，EnableRaisingEvents 设置为 true。当有事件进入时，EnableRaisingEvents 设置为 false。100 毫秒后，EnableRaisingEvents 再次设置为 true。在文件观察者收到另一个事件之前，EnableRaisingEvents 再次设置为 false。在 EnableRaisingEvents 关闭（设置为 false）期间错过事件是可以的。所以我只是想知道我应该如何在代码中实现这个逻辑。让我感到困惑的是，无论如何该事件都会被触发，我是否应该使用勾号来决定是否接受这个事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:58:43.033

您可以尝试这样的事情（根据 Austin Salonen 的建议进行编辑）：

```
private static Timer _myTimer = new Timer();
// ...
private static void OnTick(Object obj, EventArgs args)
{
    fileSystemWatcher.EnableRaisingEvents ^= true;
}

// ...

_myTimer.Tick += OnTick;
_myTimer.Interval = 100;
_myTimer.Start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:52:05.393

使用 Timer（线程一）并将计时器的经过时间间隔设置为 100 毫秒，如果在 UI 线程上创建 FS wather，您可能需要序列化调用。

# elasticsearch - 使用嵌套对象突出显示 Elasticsearch

> ID：15230580
> 
> 赞同：7
> 
> 时间：2013-03-05T17:44:12.820
> 
> 标签：elasticsearch, tire

我有一个关于突出嵌套对象字段的问题。

考虑这样的记录：

```
_source: {

    id: 286
    translations: [
        {
            id: 568
            language: lang1
            value: foo1 bar1
        }
        {
            id: 569
            language: lang2
            value: foo2 bar2
        }
    ]

} 
```

如果 translations.value 具有 ngram 过滤器，是否可以突出显示嵌套对象中的匹配项，例如这个？以及高亮查询的样子。

非常感谢您的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:05:00.817

这里同样的问题。似乎现在有办法在弹性搜索中做到这一点，而且不会在不久的将来。

[开发人员 Shay Banon 写道](http://www.searchworkings.org/forum/-/message_boards/view_message/150176%29)：

> 为了基于嵌套查询进行突出显示，还需要提取嵌套文档以突出显示它，这会带来更多问题（并且性能较差）。

[还有](http://elasticsearch-users.115913.n3.nabble.com/Highlighting-on-nested-documents-if-include-in-parent-is-set-to-true-td4021717.html)：

> 他的解释是，这需要大量的记忆，因为可能有大量的孩子。对我来说它看起来很真实，因为添加此功能将违反一次仅处理 N 个提要的基本概念。

因此，唯一的方法是在您自己的程序中手动处理查询结果以添加亮点。

**更新**

我不知道轮胎或 ngram 过滤器，但我找到了一种通过使用嵌套构面和构面过滤器来检索所有过滤器匹配嵌套文档的方法。您需要一个单独的查询来突出显示，但至少在我的情况下它比浏览_source 快得多。

```
{"query":
    {"match_all":{}},
    "facets":{
        "matching_translations":{
            "nested":"translations",
            "terms":{"field":"translations.value"},
            "facet_filter":{
                "bool":{"must":[{"terms":{"translations.value":["foo1"]}}]}
            }
        }
    }
} 
```

您可以使用生成的方面术语在程序中突出显示。

例如：我想突出显示嵌套文档的链接（在 jquery 中）：

```
 setHighlights = function(sdata){
        var highlightDocs = [];
        if(sdata['facets'] && sdata['facets']['docIDs'] && sdata['facets']['doctIDs']['terms'] && sdata['facets']['docIDs']['terms'].length >0){
            for(var i in sdata['facets']['docIDs']['terms']){
                highlightDocs.push(sdata['facets']['docIDs']['terms'][i]['term'])
            }
        }
        $('li.document_link').each(function(){
            if($.inArray($(this).attr('id'),highlightDocs) != -1) {
                $(this).addClass('document_selected');
            }
        }); 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-29T23:46:28.410

您可以在字段中使用 force_source" : true 以在连接嵌套字段后突出显示文档。

# sql-server - 无法让 SQL Server 启动或通过 SSMS 连接到我的本地数据库引擎

> ID：15230581
> 
> 赞同：13
> 
> 时间：2013-03-05T17:44:12.717
> 
> 标签：sql-server, ssl-certificate, sql-server-2012, ssms

SQL Server 一直运行良好，但自周五以来，我无法连接到 SSMS 中的数据库引擎。这恰逢我在 Windows 更新期间不得不关闭笔记本电脑，因为它似乎挂起（我不知道这两者是否相关）。

从那以后我有：

*   在更新失败之前回到还原点
*   从我的机器上删除了 SQL Server 2008
*   将 SQL Server 2012 安装到我的机器上。这在加载过程中失败
*   从我的机器上删除了所有标记为 SQL Server 的内容
*   重做失败的 Windows 更新
*   安装的 SQL Server 2012 再次加载失败
*   创建了一个自签名证书（[http://technet.microsoft.com/en-us/library/cc753127(v=WS.10).aspx](http://technet.microsoft.com/en-us/library/cc753127(v=WS.10).aspx)）
*   尝试从服务和 SSCM 启动 SQL Server，但没有成功
*   尝试了 SQL Server 的各种登录选项 - 在本地系统下，服务将启动，但我仍然无法连接到 SSMS 中的数据库引擎
*   阅读无尽的帖子和文章

谁能帮我在我的机器上启动 SQL Server，然后使用 SSMS 连接到数据库引擎？

安装失败日志提供了以下信息：

```
2013-03-05 12:17:37.34 Server  Microsoft SQL Server 2012 (SP1) - 11.0.3128.0 (X64)  Dec 28   2012 20:23:12  Copyright (c) Microsoft Corporation  Enterprise Edition (64-bit) on Windows NT 6.1 <X64> (Build 7601: Service Pack 1)  
2013-03-05 12:17:37.34 Server  (c) Microsoft Corporation.  
2013-03-05 12:17:37.34 Server  All rights reserved.  
2013-03-05 12:17:37.34 Server  Server process ID is 5116\.  
2013-03-05 12:17:37.34 Server  System Manufacturer: 'SAMSUNG ELECTRONICS CO., LTD.', System Model: 'RV411/RV511/E3511/S3511/RV711'.  
2013-03-05 12:17:37.34 Server  Authentication mode is WINDOWS-ONLY.
2013-03-05 12:17:37.34 Server  Logging SQL Server messages in file 'C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\Log\ERRORLOG'.  
2013-03-05 12:17:37.34 Server  The service account is 'NT Service\MSSQLSERVER'. This is an informational message; no user action is required.  
2013-03-05 12:17:37.35 Server  Registry startup parameters:   
 -d C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\master.mdf    
 -e C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\Log\ERRORLOG    
 -l C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\mastlog.ldf  
2013-03-05 12:17:37.35 Server  Command Line Startup Parameters:    
 -s "MSSQLSERVER"
 -m "SqlSetup"
 -Q
 -q "Latin1_General_CI_AS"
 -T 4022
 -T 4010
 -T 3659
 -T 3610
 -T 8015
 -T 902
2013-03-05 12:17:37.69 Server  SQL Server detected 1 sockets with 2 cores per socket and 4 logical processors per socket, 4 total logical processors; using 4 logical processors based on SQL Server licensing.  This is an informational message; no user action is required.  
2013-03-05 12:17:37.69 Server  SQL Server is starting at normal priority base (=7). This is an informational message only. No user action is required.  
2013-03-05 12:17:37.69 Server  Detected 6004 MB of RAM. This is an informational message; no user action is required.  
2013-03-05 12:17:37.69 Server  Using conventional memory in the memory manager.  
2013-03-05 12:17:38.02 Server  Perfmon counters for resource governor pools and groups failed to initialize and are disabled.  
2013-03-05 12:17:38.73 Server  Node configuration: node 0: CPU mask: 0x000000000000000f:0 Active CPU mask: 0x000000000000000f:0\. This message provides a description of the NUMA configuration for this computer. This is an informational message only. No user action is required.  
2013-03-05 12:17:38.75 Server  Using dynamic lock allocation.  Initial allocation of 2500 Lock blocks and 5000 Lock Owner blocks per node.  This is an informational message only.  No user action is required.  
2013-03-05 12:17:38.75 Server  Database Mirroring Transport is disabled in the endpoint configuration.  
2013-03-05 12:17:38.76 Server  Software Usage Metrics is disabled.  
2013-03-05 12:17:38.92 spid4s  Warning
 ******************  
2013-03-05 12:17:38.92 spid4s  SQL Server started in single-user mode. This an informational message only. No user action is required.
2013-03-05 12:17:39.07 spid4s  Starting up database 'master'.  
2013-03-05 12:17:39.66 Server  CLR version v4.0.30319 loaded.  
2013-03-05 12:17:40.35 spid4s  SQL Server Audit is starting the audits. This is an informational message. No user action is required.  
2013-03-05 12:17:40.38 spid4s  SQL Server Audit has started the audits. This is an informational message.  No user action is required.  
2013-03-05 12:17:41.33 spid4s  SQL Trace ID 1 was started by login "sa".  
2013-03-05 12:17:41.60 spid4s  Server name is 'E2E-LAPTOP'. This is an informational message only. No user action is required.  
2013-03-05 12:17:41.82 spid12s Password policy update was successful.  
2013-03-05 12:17:41.87 spid12s Error: 17190, Severity: 16, State: 1\.  
2013-03-05 12:17:41.87 spid12s Initializing the FallBack certificate failed with error code: 1, state: 20, error number: 0\.  
2013-03-05 12:17:41.87 spid12s Unable to initialize SSL encryption because a valid certificate could not be found, and it is not possible to create a self-signed certificate.  
2013-03-05 12:17:42.00 spid12s Error: 17182, Severity: 16, State: 1\.  
2013-03-05 12:17:42.00 spid12s TDSSNIClient initialization failed with error 0x80092004, status code 0x80\. Reason: Unable to initialize SSL support. Cannot find object or property.  
2013-03-05 12:17:42.00 spid12s Error: 17182, Severity: 16, State: 1\.  
2013-03-05 12:17:42.00 spid12s TDSSNIClient initialization failed with error 0x80092004, status code 0x1\. Reason: Initialization failed with an infrastructure error. Check for previous errors. Cannot find object or property.  
2013-03-05 12:17:42.00 spid12s Error: 17826, Severity: 18, State: 3\.  
2013-03-05 12:17:42.00 spid12s Could not start the network library because of an internal error in the network library. To determine the cause, review the errors immediately preceding this one in the error log.  
2013-03-05 12:17:42.00 spid12s Error: 17120, Severity: 16, State: 1.
2013-03-05 12:17:42.00 spid12s SQL Server could not spawn FRunCommunicationsManager thread. Check the SQL Server error log and the Windows event logs for information about possible related problems. 
```

2013 年 3 月 7 日：我现在通过在一台闪亮的新 Windows 8 笔记本电脑上安装 SQL Server 解决了这个问题（使用与我在错误机器上尝试的完全相同的过程）。当我有精力时，我会回来看看我是否可以在我的另一台机器上解决这个问题。如果我有任何成功，我会更新这篇文章。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-12-15T15:00:09.433

一位同事遇到了类似的问题 - 错误日志几乎相同。结果发现根本原因是他试图使用系统帐户在域控制器上安装 SQL 服务器。如果您必须在域控制器上安装 SQL Server，请让 SQL Server 服务在网络帐户下运行。 [https://support.microsoft.com/en-us/kb/2032911](https://support.microsoft.com/en-us/kb/2032911)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:03:44.983

您的错误似乎与您安装的证书有关。

本文建议更改 SQL 服务器将登录的服务，您可以在安装时执行此操作，或通过表面配置管理工具执行此操作。

[http://social.msdn.microsoft.com/Forums/en-US/sqlsecurity/thread/56f14665-3f00-41ff-b002-bb5e86b3f219/](http://social.msdn.microsoft.com/Forums/en-US/sqlsecurity/thread/56f14665-3f00-41ff-b002-bb5e86b3f219/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-30T14:58:13.920

我知道现在帮助原始海报可能为时已晚，但我们遇到了同样的问题，但我们没有尝试解决这个问题。最后，我们向微软发起了一个技术事件，这是我们提供的解决方案：

*   备份以下注册表项。

HKLM\SOFTWARE\Microsoft\Cryptography\MachineGuid 这个键最好有机器的 GUID 没有花括号，所以 {xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx} 变成 xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

*   然后删除大括号。
*   尝试重新启动并启动 SQL 服务。如果服务未启动，则卸载并重新安装 SQL。

上述解决方案适用于出现此问题的两台独立机器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T17:54:45.890

# ***备份您的注册表***

* * *

***这只是一种选择——通常是最后的手段——你自己权衡后果***

***不要接受这个建议，因为我已经看到了您的注册表并且知道您机器的确切状态***

* * *

简而言之，您看到的第一个错误：

> 2013-03-05 12:17:41.87 spid12s 错误：17190，严重性：16，状态：1。
> 
> 2013-03-05 12:17:41.87 spid12s 初始化后备证书失败，错误代码：1，状态：20，错误号：0。

围绕[注册表中已存在的键的](http://blogs.msdn.com/b/karthick_pk/archive/2011/03/05/initializing-the-fallback-certificate-failed-with-error-code-1-state-1-error-number-2146893788.aspx)问题。所以，先照我说的做，***备份你的注册表***，然后删除密钥：

> HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server

然后尝试重新安装 Microsoft SQL Server 2012。如果这不起作用 - 您可能需要备份您的机器数据并重建它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-02T19:58:36.500

刚刚看到这篇文章，简而言之，您需要应用服务包和累积更新才能使其工作，在较新的操作系统上，SSL 证书正在更改为禁用 SSL2、SSL3 等。使用较新的 TLS1.2 和SQL Server 不支持它，您需要应用补丁来启用它的支持，它会再次工作。

# php - 减少多个上传的图像大小

> ID：15230582
> 
> 赞同：0
> 
> 时间：2013-03-05T17:44:13.537
> 
> 标签：php

我想要一个用户可以一次上传多张图片的网站，如何减少单个用户上传的多张图片的大小。
我的代码中的 DS 是在初始化文件中定义的 DIRECTORY_SEPARATOR。

```
 if(isset($_POST['submitImage'])){       
        $file = $_FILES['upload'];
        $errors = array();

        if(empty($file)){
            $errors[] = ' The file could not be empty ';
        }else{  

            foreach( $file['name'] as $key => $value ){
                $extensions = array("jpeg","jpg","png"); 
                $file_ext=explode('.',$file['name'][$key])  ;
                $file_ext=end($file_ext);

                if(in_array($file_ext,$extensions ) === false){
                    $errors[]="extension not allowed";
                }else{

                    $filetmp = $file['tmp_name'][$key];
                    $terget_path = SITE_ROOT.'j2reimage'.DS;
                    $dat = strftime("%Y-%m-%d %H:%M:%S", time());

                    if(file_exists($terget_path)){
                        move_uploaded_file( $filetmp, $terget_path.$file['name'][$key]);                
                        mysql_query("insert into 4j2memberimage values ('', $memmem->id,'{$file['name'][$key]}', '$dat')"); 

                    //end of if file_exists     
                    }else{
                        $errors[] = ' Upload extention could not be locate';            
                    }
                }
                    //redirect_to('inb.php');                   
            }
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:47:03.007

来自 PHP.net 最初在评论中发布，但在解决了 OPs 问题后才开始回答。

```
<?php
// The file
$filename = 'test.jpg';
$percent = 0.5;

// Content type
header('Content-Type: image/jpeg');

// Get new dimensions
list($width, $height) = getimagesize($filename);
$new_width = $width * $percent;
$new_height = $height * $percent;

// Resample
$image_p = imagecreatetruecolor($new_width, $new_height);
$image = imagecreatefromjpeg($filename);
imagecopyresampled($image_p, $image, 0, 0, 0, 0, $new_width, $new_height, $width, $height);

// Output
imagejpeg($image_p, null, 100);
?> 
```

# flash - Flash 对象上的链接在 Google Chrome 或 IE 中不起作用

> ID：15230583
> 
> 赞同：1
> 
> 时间：2013-03-05T17:44:15.587
> 
> 标签：flash, google-chrome, hyperlink, anchor, rollover

我遇到的基本问题是我的 Flash 视频链接到另一个页面，由于某种原因，该链接在 Chrome 或 Internet Explorer 中没有响应。它在 Firefox 和 safari 中运行良好。当您将鼠标悬停在页面底部时，您甚至可以看到它应该链接的 URL。更奇怪的是，如果您在 Chrome 中右键单击链接，然后在不移动鼠标的情况下立即左键单击，则链接似乎在 Chrome 中有效。

flash 对象本身就是一部电影，具有在翻转时播放的动作。我读过一些论坛，建议在对象本身内使用 Onload 方法，而不是在对象外使用锚点，此外还向 flash 对象添加操作，但 Chrome 都不尊重这两种方法。因此，锚点在哪里似乎不是问题，而更多的是与 Chrome 找到焦点以单击链接的能力有关。只是一个。感谢你们可以给我的任何反馈，因为我已经搜索了大量的论坛，但我没有找到一个答案。

以下是网站网址，如果您尝试单击 Chrome 中的链接，问题就很明显了。

[http://www.heatherdenny.com/](http://www.heatherdenny.com/)

# android - 带有 Android Appcelerator Titanium 的答录机

> ID：15230584
> 
> 赞同：0
> 
> 时间：2013-03-05T17:44:24.983
> 
> 标签：android, titanium, appcelerator, phone-call

是否可以在 Andorid 上使用 Titanium 创建答录机？如果是，是否有即使应用程序关闭也可以检测来电的模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:49:14.487

不，从技术上讲，为 Android 制作电话答录机[是不可能](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/yBE9inbf1Z4)的，因为操作系统不允许应用程序访问通话中的音频流。

# javascript - 在下拉选择中显示引导模式

> ID：15230587
> 
> 赞同：2
> 
> 时间：2013-03-05T17:44:27.810
> 
> 标签：javascript, jquery, twitter-bootstrap, modal-dialog

所以我有一个应用程序，用户可以从下拉列表中选择一个类别。如果他们愿意，我想为他们提供创建新类别的选项，因此下拉列表中的最后一个选项是“创建您自己的”

我可以使用以下方法获得他们选择最后一个的事件：

```
 $("#category").change(function () {
            selection = $(this).val();
            if (selection == -1) {
                alert("create new one");
            }
        }); 
```

这按预期工作，没有问题。但是，当我尝试替换`alert("create new one");`时`$("#myModal").modal('show');`出现以下错误：

```
Uncaught TypeError: Object [object Object] has no method 'modal' 
```

我在标题中链接了引导 javascript 文件和 jquery：

```
 <script type="text/javascript" src="http@(Request.IsSecureConnection == true ? "s" : "")://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="@Url.Content("~/Scripts/bootstrap-modal.js")"></script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T18:33:22.910

避免多次加载 JQuery 文件，或者加载 bootstrap.js 或 bootstrap.min.js 以及 bootstrap-modal.js，因为这可能会导致问题...

# ruby-on-rails - 设计登录时去除密码周围的空格

> ID：15230590
> 
> 赞同：0
> 
> 时间：2013-03-05T17:44:35.487
> 
> 标签：ruby-on-rails, login, devise, whitespace, strip

我想让设计去除用户密码周围的前导和尾随空格。所以我改变了 devise.rb

```
config.strip_whitespace_keys = [ :email ] 
```

至

```
config.strip_whitespace_keys = [ :email, :password ] 
```

正如文档所建议的那样。

我重新启动了服务器，但只删除了电子邮件。

即使我从该配置中删除 :email ，电子邮件仍然会被删除，但密码不会。

rails 是 3.2.12，devise 是 2.1.3

提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T12:29:47.120

在用户模型中添加：

```
alias :orig_valid_password? :valid_password?
def valid_password?(password)
  orig_valid_password?(password.strip)
end 
```

# python - 使用 file.write 接口上传文件

> ID：15230595
> 
> 赞同：2
> 
> 时间：2013-03-05T17:44:58.647
> 
> 标签：python

我从未在 Python 中看到过这种情况，我很感兴趣是否有任何东西可以让您使用写入接口发送文件（例如 HTTP PUT 或 POST）？我只见过一个读取接口，您可以在其中传递文件名或`file`对象（urllib、请求等）

当然，我可能从来没有见过这个，我也很想知道。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-05T18:32:43.433

虽然它看起来在高层次上是有意义的，但让我们尝试将文件接口映射到 HTTP 动词：

```
file interface   http
------------------------
read             GET
                 HEAD
------------------------
write            POST
                 PUT
                 PATCH
------------------------
?                DELETE
                 OPTIONS 
```

如您所见，文件接口与任何 RESTful 接口所需的 HTTP 动词集之间没有明确的映射关系。当然，您可能会一起破解仅使用`GET`（读取）和`POST`（写入）的实现，但这会破坏您需要扩展它以支持任何其他 HTTP 动词的第二次。

**根据评论编辑：**

我自己没有尝试过，但它似乎在深处（http/client.py），如果 data implements `read`，它会这样读取它：

```
 while 1:
            datablock = data.read(blocksize)
            if not datablock:
                break
            if encode:
                datablock = datablock.encode("iso-8859-1")
            self.sock.sendall(datablock) 
```

请注意这样做可能会影响性能：

```
# If msg and message_body are sent in a single send() call,
# it will avoid performance problems caused by the interaction
# between delayed ack and the Nagle algorithm. However,
# there is no performance gain if the message is larger
# than MSS (and there is a memory penalty for the message
# copy). 
```

所以是的，您*应该*能够将文件对象作为`data`参数传递。

# amazon-web-services - 使用 AWS Elastic Beanstalk 部署 rails 应用程序时管理迁移

> ID：15230604
> 
> 赞同：1
> 
> 时间：2013-03-05T17:45:16.733
> 
> 标签：amazon-web-services, amazon-ec2, amazon-elastic-beanstalk

AWS Elastic Beanstalk 易于用于在 Amazon EC2 上部署 rails 应用程序。通过将 RAILS_SKIP_MIGRATIONS 设置为 true，eb 将不会自行运行迁移，因此我可以自己管理迁移。

但是，SSH 到 Beanstalk 创建的 EC2 实例，我在主目录中找不到部署的 rails 应用程序。然后我不知道在哪里手动 rake 迁移。

我想知道为什么在 EC2 实例上找不到 rails 应用程序，因为该实例是托管应用程序的 Web 服务器。它隐藏在某个地方吗？我应该如何手动进行迁移？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:28:46.573

试试看`/var/app/current`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T19:20:26.460

我认为你找不到 rake，因为弹性 beanstalk 在虚拟环境 - rvm 中运行 ruby​​ 环境。尝试在为当前终端设置 ruby​​ 环境的目录 /opt 环境变量中查找。我不确定 ruby​​，但对于 python，你应该这样做：source /opt/python/current/env。

# android - 如何在不使用 onSaveInstanceState 的情况下保存按钮的状态

> ID：15230605
> 
> 赞同：1
> 
> 时间：2013-03-05T17:45:20.460
> 
> 标签：android, android-button, android-orientation

我有一个布局，其中有一个按钮。这个按钮有 2 个我感兴趣的属性：文本和颜色。

现在我知道，如果我们`android:configChanges="keyboardHidden|orientation|screenSize"`在此活动的清单中提及，我们就是在告诉“我们将手动处理它”。

现在我不想在清单中添加它并让 Android 自动处理它。

问题：在这里，当用户单击按钮时，我正在更改颜色和文本。现在当屏幕方向改变时，按钮颜色会改变。我该如何处理？

由于某些原因和要求，我不想使用`onSaveInstanceState`. 我对搜索栏也有同样的问题。

有没有办法做到这一点？

# twitter-bootstrap - 平滑滚动和引导选项卡冲突

> ID：15230608
> 
> 赞同：3
> 
> 时间：2013-03-05T17:45:37.743
> 
> 标签：twitter-bootstrap, tabs, smooth-scrolling

我正在为我的中小企业开发一个网站。我正在为单页网站使用带有平滑滚动脚本的引导程序。

问题是，我需要一个包含各个服务信息的选项卡式窗格，但这与平滑滚动脚本冲突，这意味着当我单击选项卡时，浏览器会出现问题。当我禁用平滑滚动脚本时，选项卡工作得很好。有没有办法让我同时拥有这两种功能？

现在使用的平滑滚动脚本是这个......取自 CSS-tricks.com

```
<script>
$(function() {

    function filterPath(string) {
        return string
        .replace(/^\//,'')
        .replace(/(index|default).[a-zA-Z]{3,4}$/,'')
        .replace(/\/$/,'');
    }

    var locationPath = filterPath(location.pathname);
    var scrollElem = scrollableElement('html', 'body');

    // Any links with hash tags in them (can't do ^= because of fully qualified URL potential)
    $('a[href*=#]').each(function() {

        // Ensure it's a same-page link
        var thisPath = filterPath(this.pathname) || locationPath;
        if (  locationPath == thisPath
            && (location.hostname == this.hostname || !this.hostname)
            && this.hash.replace(/#/,'') ) {

                // Ensure target exists
                var $target = $(this.hash), target = this.hash;
                if (target) {

                    // Find location of target
                    var targetOffset = $target.offset().top;
                    $(this).click(function(event) {

                        // Prevent jump-down
                        event.preventDefault();

                        // Animate to target
                        $(scrollElem).animate({scrollTop: targetOffset}, 400, function() {

                            // Set hash in URL after animation successful
                            location.hash = target;

                        });
                    });
                }
        }

    });

    // Use the first element that is "scrollable"  (cross-browser fix?)
    function scrollableElement(els) {
        for (var i = 0, argLength = arguments.length; i <argLength; i++) {
            var el = arguments[i],
            $scrollElement = $(el);
            if ($scrollElement.scrollTop()> 0) {
                return el;
            } else {
                $scrollElement.scrollTop(1);
                var isScrollable = $scrollElement.scrollTop()> 0;
                $scrollElement.scrollTop(0);
                if (isScrollable) {
                    return el;
                }
            }
        }
        return [];
    }

});
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-09T14:32:55.293

这一行：

```
$('a[href*=#]').each(function() { 
```

尝试替换为：

```
$('a[href*=#]:not([data-toggle="tab"])').each(function() { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-27T16:11:55.223

我`data-toggle="pill"`用于选项卡式菜单，所以我替换

```
$('a[href*=#]').each(function() { 
```

和

```
$('a[href*=#]:not([data-toggle="pill"])').each(function() { 
```

这很好用。

# iphone - 如何使用具有低分辨率预览配置文件的 AVCaptureVideoDataOutput 并以高分辨率拍摄照片（预览时）

> ID：15230611
> 
> 赞同：6
> 
> 时间：2013-03-05T17:46:01.020
> 
> 标签：iphone, objective-c, avfoundation, video-capture, avcapturesession

我想使用`AVFoundation Famework`预览和拍摄照片。我创建了一个`AVCaptureSession`并添加了`AVCaptureVideoDataOutput`,`AVCaptureStillImageOutput`到这个会话中。我将预设设置为`AVCaptureSessionPresetLow`.

**现在我想以全分辨率**拍照。但在`captureStillImageAsynchronouslyFromConnection`决议中与我的预览代表相同。

**这是我的代码：**

```
AVCaptureSession* cameraSession = [[AVCaptureSession alloc] init];
cameraSession.sessionPreset = AVCaptureSessionPresetLow;

AVCaptureVideoDataOutput* output = [[AVCaptureVideoDataOutput alloc] init];
[cameraSession addOutput:output];

AVCaptureStillImageOutput* cameraStillImage = [[AVCaptureStillImageOutput alloc] init];
[cameraSession addOutput:cameraStillImage];

// delegation
dispatch_queue_t queue = dispatch_queue_create("MyQueue", NULL);
[output setSampleBufferDelegate:self queue:queue];
dispatch_release(queue);

[cameraSession startRunning]; 
```

**拍照：**

```
//[cameraSession beginConfiguration];
//[cameraSession setSessionPreset:AVCaptureSessionPresetPhoto];  <-- slow
//[cameraSession commitConfiguration];
[cameraStillImage captureStillImageAsynchronouslyFromConnection:photoConnection completionHandler:^(CMSampleBufferRef imageDataSampleBuffer, NSError *error)
{
    ...
}]; 
```

我尝试通过在捕捉图像之前将预设更改为照片。但这很慢（更改预设需要 2-3 秒）。我不想有这么大的延迟。

我怎样才能做到这一点？谢谢。

# ios - 点击 UIImageView 以显示按钮（拍照/从相册中选择）

> ID：15230613
> 
> 赞同：0
> 
> 时间：2013-03-05T17:46:05.007
> 
> 标签：ios, cocoa-touch

我有多个`UIImageView`s。

当用户点击这些`UIImageView`项目中的任何一个时，我希望按钮向上滚动（拍照，选择现有图片并取消）。

我该怎么做呢？

我不希望这些按钮一直被看到。仅当用户触摸或点击 UIImageView 时。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:03:05.973

在文档中查找[UITapGestureRecognizer](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITapGestureRecognizer_Class/Reference/Reference.html)。您可以将它附加到图像视图，当用户点击 imageView 时将调用您的方法。然后您可以简单地切换控件的可见性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:25:13.047

这是一个例子：

```
 UIGestureRecognizer *tapGestureRecognizer = [[UIGestureRecognizer alloc] initWithTarget:self action:@selector(tappedImage:)];
    [myImage addGestureRecognizer:tapGestureRecognizer];
    myImage.userInteractionEnabled = YES; // default is no for UIImageView 
```

动作看起来像这样：

```
- (void)tappedImage:(UIGestureRecognizer *)gestureRecognizer {
    UIImageView *myImage = (UIImageView *)gestureRecognizer.view;
    // do stuff;
} 
```

# facebook - 如何回溯帖子

> ID：15230625
> 
> 赞同：1
> 
> 时间：2013-03-05T17:47:15.793
> 
> 标签：facebook, facebook-graph-api

我试图在过去的时间轴上发布一条消息，但我收到以下错误：“Facebook.FacebookOAuthException : (OAuthException - #100) (#100) 您无法在已发布的帖子上指定预定的发布时间”我试过输入当前日期、过去日期或未来日期；结果是一样的。

我认为这可能是我获取 unix 时间戳的方式的问题。

这是代码：

```
public void PostPostsOnTestUserTimeline()
    {

        string userId = "[TEST_USER_ID]"; 

        var client = new FacebookClient(accessToken);
        dynamic parameters = new ExpandoObject();
        parameters.message = "Check out this funny article - 39";

        parameters.scheduled_publish_time = GetUnixTimestamp(DateTime.Now.AddMinutes(20));

        client.Post(string.Format("{0}/feed", userId), parameters);

    }

    private long GetUnixTimestamp(DateTime dateTime)
    {
        double secondsDouble = (dateTime - new DateTime(1970, 1, 1).ToLocalTime()).TotalSeconds;
        return Convert.ToInt64(secondsDouble);
    } 
```

知道为什么会崩溃吗？我正在写在“created_time”创建的测试用户的时间线上：“2013-03-05T12:34:15+0000”。如果我不指定 schedule_publish_time，它可以正常工作。

谢谢你，尤利亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:51:40.780

无法在用户时间轴上回溯提要帖子 - 此功能仅适用于 Pages 或 Open Graph 发布

# asp.net - 无类型到强类型数据表

> ID：15230626
> 
> 赞同：2
> 
> 时间：2013-03-05T17:47:21.267
> 
> 标签：asp.net, datatable, strongly-typed-dataset

我今天试着做一些实验。我有一个使用无类型数据表作为模型实体的应用程序。它们都是这样制作的：

```
Imports System.Data
Imports System.Runtime.Serialization
Imports System.ComponentModel

<DesignerCategory("Code"), system.Serializable()>
Partial Public Class SomeTable1
    Inherits DataTable

#Region
    Public Const TABLE_NAME As String = "SomeTable1"

    Public Const FIELD_SomeField1 As String = "SomeField1"
    Public Const FIELD_SomeField2 As String = "SomeField2"
#End Region

    Protected Sub New(ByVal info As SerializationInfo, ByVal context As StreamingContext)
        MyBase.New(info, context)
    End Sub

    Public Sub New()
        MyBase.New()

        With Columns
            .Add(FIELD_SomeField1, GetType(System.String)).DefaultValue = String.Empty
            .Add(FIELD_SomeField2, GetType(System.Double)).DefaultValue = 0
        End With

        Dim keys(1) As DataColumn
        keys(0) = Columns(FIELD_SomeField1)
        TableName = TABLE_NAME
        PrimaryKey = keys
    End Sub
End Class 
```

我目前正在使用 EF，所以在我的眼花缭乱中，我写了这样的东西（是的，它是 vb）：

```
Partial Public Class SomeTable1
    Inherits DataTable

    <Key()>
    Friend Property SomePK1 As DataColumn

    <Required(ErrorMessage:="SomeField1 is required.")>
    <DataType(DataType.Text)>
    Friend Property SomeField1 As DataColumn

    <Required()>
    <DataType(DataType.DateTime)>
    Friend Property SomeField2 As DataColumn
    ...

    Protected Sub New(ByVal info As SerializationInfo, ByVal context As StreamingContext)
        MyBase.New(info, context)
    End Sub

    Public Sub New()
        MyBase.New()

        SomeField2 = Date.Now
    End Sub
End Class 
```

我梦想做一些与以前的 dt 等效的东西，并与当前的数据引擎完全兼容。

然后类型转换错误（系统日期到数据列）打破了我的希望。我必须承认这是一个艰难的周末:)

因此，在我完全放弃更改之前，是否有任何方法可以编写类型化数据表，使其等同于上面的代码，但有一些新的好东西？这是一种非常古老的编程方式，我在网上找不到任何东西。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:58:05.850

不确定我是否完全遵循，但看起来您将 FIELD_SomeField2 定义为双精度

（第一个片段中的这一行）

```
.Add(FIELD_SomeField2, GetType(System.Double)).DefaultValue = 0 
```

但是后来我看到您在第二个片段中将 SomeField2 定义为 DateTime 。

```
<Required()>
<DataType(DataType.DateTime)>
Friend Property SomeField2 As DataColumn 
```

所以也许只是类型不匹配......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T17:28:03.743

我找到了如何做我想做的事。也许涉及一些工作，但它确实有效。知道这是一种过时的做事方式，我在那里发帖，以便像我这样被迫维护旧程序的其他人可以受益。

执行类型化数据表的模板如下：

```
Imports System.Data
Imports System.ComponentModel
Imports System.Runtime.Serialization
Imports System.Diagnostics

'''<summary>
'''Represents the strongly named DataTable class.
'''</summary>
<Global.System.Serializable(), _
 Global.System.Xml.Serialization.XmlSchemaProviderAttribute("GetTypedTableSchema")> _
Partial Public Class tblMyTable
    Inherits TypedTableBase(Of tblMyTableRow)

    'Those are the StoredProcs names for (MANUAL) CRUD operations that the DBContext wrapper uses. (yuck! I hate thousands of them)
    'Public Const COMMAND_SAVE As String = "sp_MyTable_Save"
    'Public Const COMMAND_DELETE As String = "sp_MyTable_Delete"
    'Public Const COMMAND_LOADBY_ID As String = "sp_MyTable_LoadBy_Id"

    'Those are constants I maintain for untyped (but somewhat strong) compatibility
    Public Const FIELD_pID As String = "pID"
    Public Const FIELD_SomeOther As String = "SomeOtherField"

    'Basic CRUD, uses company data as the app hot swapps DBs (one for company)
    'Public Function Save(ByVal company As DataRow) As Short
    '    Return New Base(company).Update(Me, COMMAND_SAVE, COMMAND_DELETE)
    'End Function

    'Public Sub LoadByID(ByVal company As DataRow, Id As Integer)
    '    Me.Rows.Clear()
    '    Me.Merge(New Base(company).FillDataTable(Of tblMyTable)(COMMAND_LOADBY_ID, Id))
    'End Sub

    <DebuggerNonUserCodeAttribute()>
    Private Sub InitClass()
        Me.columnpID = New DataColumn(FIELD_pID, GetType(Integer), Nothing, MappingType.Element) With
                   {.AllowDBNull = False, .ReadOnly = True, .Unique = True,
                    .AutoIncrement = True, .AutoIncrementSeed = -1, .AutoIncrementStep = -1}
        MyBase.Columns.Add(Me.columnpID)
        Me.columnSomeOtherField = New DataColumn(FIELD_SomeOther, GetType(String), Nothing, MappingType.Element) With
                           {.MaxLength = 5, .AllowDBNull = False, .DefaultValue = String.Empty}
        MyBase.Columns.Add(Me.columnSomeOtherField)
    End Sub

    Private columnpID As DataColumn
    Private columnSomeOtherField As DataColumn

    <DebuggerNonUserCodeAttribute()>
    Public Sub New()
        MyBase.New()
        Me.TableName = "tblMyTable"
        Me.BeginInit()
        Me.InitClass()
        Me.EndInit()
    End Sub

    <DebuggerNonUserCodeAttribute()>
    Friend Sub New(ByVal table As DataTable)
        MyBase.New()
        Me.TableName = table.TableName
        If (table.CaseSensitive <> table.DataSet.CaseSensitive) Then
            Me.CaseSensitive = table.CaseSensitive
        End If
        If (table.Locale.ToString <> table.DataSet.Locale.ToString) Then
            Me.Locale = table.Locale
        End If
        If (table.Namespace <> table.DataSet.Namespace) Then
            Me.Namespace = table.Namespace
        End If
        Me.Prefix = table.Prefix
        Me.MinimumCapacity = table.MinimumCapacity
    End Sub

    <DebuggerNonUserCodeAttribute()>
    Protected Sub New(ByVal info As Global.System.Runtime.Serialization.SerializationInfo, ByVal context As Global.System.Runtime.Serialization.StreamingContext)
        MyBase.New(info, context)
        Me.InitVars()
    End Sub

    <DebuggerNonUserCodeAttribute()>
    Public ReadOnly Property pIDColumn() As DataColumn
        Get
            Return Me.columnpID
        End Get
    End Property

    <DebuggerNonUserCodeAttribute()>
    Public ReadOnly Property SomeOtherFieldColumn() As DataColumn
        Get
            Return Me.columnSomeOtherField
        End Get
    End Property

    <DebuggerNonUserCodeAttribute(), Browsable(False)>
    Public ReadOnly Property Count() As Integer
        Get
            Return Me.Rows.Count
        End Get
    End Property

    <DebuggerNonUserCodeAttribute()>
    Default Public ReadOnly Property Item(ByVal index As Integer) As tblMyTableRow
        Get
            Return CType(Me.Rows(index), tblMyTableRow)
        End Get
    End Property

    <DebuggerNonUserCodeAttribute()>
    Public Overrides Function Clone() As DataTable
        Dim cln As tblMyTable = CType(MyBase.Clone, tblMyTable)
        cln.InitVars()
        Return cln
    End Function

    <DebuggerNonUserCodeAttribute()>
    Protected Overrides Function CreateInstance() As DataTable
        Return New tblMyTable()
    End Function

    <DebuggerNonUserCodeAttribute()>
    Friend Sub InitVars()
        Me.columnpID = MyBase.Columns(FIELD_pID)
        Me.columnSomeOtherField = MyBase.Columns(FIELD_SomeOther)
    End Sub

    <DebuggerNonUserCodeAttribute()>
    Public Function NewtblMyTableRow() As tblMyTableRow
        Return CType(Me.NewRow, tblMyTableRow)
    End Function

    <DebuggerNonUserCodeAttribute()>
    Protected Overrides Function NewRowFromBuilder(ByVal builder As DataRowBuilder) As DataRow
        Return New tblMyTableRow(builder)
    End Function

    <DebuggerNonUserCodeAttribute()>
    Protected Overrides Function GetRowType() As Global.System.Type
        Return GetType(tblMyTableRow)
    End Function

    <DebuggerNonUserCodeAttribute()>
    Public Sub RemovetblMyTableRow(ByVal row As tblMyTableRow)
        Me.Rows.Remove(row)
    End Sub

End Class

'''<summary>
'''Represents strongly named DataRow class.
'''</summary>
Partial Public Class tblMyTableRow
    Inherits DataRow

    Private tabletblMyTable As tblMyTable

    <DebuggerNonUserCodeAttribute()>
    Friend Sub New(ByVal rb As DataRowBuilder)
        MyBase.New(rb)
        Me.tabletblMyTable = CType(Me.Table, tblMyTable)
    End Sub

    <DebuggerNonUserCodeAttribute()>
    Public Property pID() As Integer
        Get
            Return CType(Me(Me.tabletblMyTable.pIDColumn), Integer)
        End Get
        Set(value As Integer)
            Me(Me.tabletblMyTable.pIDColumn) = value
        End Set
    End Property

    <DebuggerNonUserCodeAttribute()>
    Public Property SomeOtherField() As String
        Get
            Return CType(Me(Me.tabletblMyTable.SomeOtherFieldColumn), String)
        End Get
        Set(value As String)
            Me(Me.tabletblMyTable.SomeOtherFieldColumn) = value
        End Set
    End Property
End Class 
```

这就是你所需要的。也许可以减少它，但是数据集函数将无法按预期工作。

如果您想要由 ID (VS2010) 为您自动生成的代码，您必须按照以下步骤操作：

1.  在服务器资源管理器上，创建与您喜欢的数据库的连接
2.  右键单击项目顶部并选择添加新元素。
3.  只需选择数据集对象模板，名称无关紧要。它将在设计器视图中打开。
4.  从数据库中选择表并拖动到数据集设计器。
5.  然后...查看顶部的类选择器。
6.  展开并找到 [yourTableName] 数据表。点击它。
7.  它将跳转到 DataSet1.designer.vb (cs) 文件中的上述类。
8.  下一个类是行定义。只需将它们复制粘贴到一个新的类文件中。
9.  如果您想要一个更完整的数据表对象，则行类下面的下一个类定义事件，而委托它就在表定义的上方。

很简单，我测试它与使用无类型的剩余程序一起工作。也许这就像打磨粪便，但我想在某处添加数据注释以进行一些客户端验证，例如在 EF 中。并且可能为它们替换列构造函数参数。（但我不能）

祝你好运。

# django - 未使用 jquery .ajax() 将数据发送到 Django 视图

> ID：15230627
> 
> 赞同：2
> 
> 时间：2013-03-05T17:47:37.473
> 
> 标签：django, jquery, django-views

我正在尝试创建一个 ajax 调用。ajax 调用被发送到服务器，但是我发送的数据在视图的请求对象中不可用。当我打印`request.post`时，它给出了`<QueryDict: {}>`. 没有数据发送到服务器。我知道浏览器正在发送数据，因为我可以在 chrome 的请求有效负载中查看它。

**脚本：**

```
$("#chatform").submit(function(e) {
    e.preventDefault();
    //serialText = $(this).serialize();
    var userText = $("#usertext").val();
    var xmlRequest = $.ajax({
            type: "POST",
            url: "/sendmessage/",
            data: {'tosend': userText},

            //dataType: 'json',
            contentType: "application/json; charset=utf-8",
            success: function(data){
                appendMessageSent(data.messagesent);
            }
    });
}); 
```

**视图.py：**

```
def send_message(request):
    if request.is_ajax():
        message = "The hell with the world"

        print request.POST
        json = simplejson.dumps(
            {'messagesent' : request.POST['tosend']+"This is how we do it"}
        )
        return HttpResponse(json, mimetype='application/javascript') 
```

**html**

```
<form id="chatform" action="" method="POST" >
        <input type='hidden' name='csrfmiddlewaretoken' value='8idtqZb4Ovy6eshUtrAiYwtUBboW0PpZ' />
        <input type="text" name="chatarea" id="usertext"/>
        <input type="submit" value="Send">
</form> 
```

我收到一条错误消息，说在dict`tosend`中找不到密钥。`request.post`

`MultiValueDictKeyError: "Key 'tosend' not found in <QueryDict: {}>`

谁能告诉我为什么没有将数据发送到服务器和/或为什么我无法在我的视图中访问它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T17:49:45.400

要使表单数据出现在其中`request.POST`，请使用`contentType: "application/x-www-form-urlencoded"`.

如果使用`application/json`，则必须自己解析原始数据（`request.raw_post_data`在 django <1.4 中，`request.body`在 django >=1.4 中）：

```
def send_message(request):
    if request.is_ajax():
        message = "The hell with the world"

        data = json.loads(request.body)
        result = json.dumps({'messagesent' : data['tosend'] + "This is how we do it"})
        return HttpResponse(result, mimetype='application/javascript') 
```

# image - 调用特定文件夹时，IIS 可以修改 URI 吗？

> ID：15230633
> 
> 赞同：0
> 
> 时间：2013-03-05T17:48:05.170
> 
> 标签：image, iis, mod-rewrite, redirect, uri

我有一个 .NET 应用程序，其中包含文件夹 /images/ 中的 500 多个图像。在我的表示层中，我使用相对路径引用这些图像。

```
<img src="/images/testimage.png" /> 
```

我现在想移动这些图像以从 Azure blob 存储容器提供服务。所以我的新路径需要明确定义资源的完整 URI。

```
<img src="https://myarea.blob.core.windows.net/images/testimage.png" /> 
```

当我想到我可以使用 IIS 重新路由这些请求时，我正要进行站点范围的查找替换。所以我的问题是 IIS 是否可以在提供文件之前拦截对 /images 文件夹的请求并为新 URI 添加前缀？如果是这样，除了从新位置获取图像所花费的时间之外，这会给应用程序带来什么类型的延迟？我的大多数图像文件是 .png、.gif 和 .jpeg，通常为 5-20kb，用于模板、按钮和一般格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:50:16.267

使用[URL 重写](http://www.iis.net/downloads/microsoft/url-rewrite)，您可以做到这一点。

匹配 /images/* 并重定向到[https://myarea.blob.core.windows.net/images/](https://myarea.blob.core.windows.net/images/) ...

```
<system.webServer>
    <rewrite>
        <rules>
            <rule name="images to azure" stopProcessing="true">
                <match url="/images/(.*)" />
                <action type="Redirect" url="https://myarea.blob.core.windows.net/images/{R:1}" />
            </rule>
        </rules>
    </rewrite>
</system.webServer> 
```

# python - 删除具有 South 依赖关系的 Django 应用程序

> ID：15230638
> 
> 赞同：3
> 
> 时间：2013-03-05T17:48:13.827
> 
> 标签：python, django, django-south

假设我们在一个项目中有两个应用程序：`app1`和`app2`. 两者都有南迁移，在这种特殊情况下，迁移`app1.0002_something`取决于`app2.0001_initial`. 一切都很好，直到你决定它`app2`已经过时并且应该被删除（因为它的实用程序已经投入使用`app3`并且`app4`很久以前）。

这就是问题所在：`app2`从`INSTALLED_APPS` `./manage.py migrate`退货中删除之后`south.exceptions.DependsOnUnmigratedApplication: Migration 'app1:0002_something' depends on unmigrated application 'app2'`。

在这种情况下，我可能会“重置”迁移`app1`并继续编码，但是，如果根本不使用依赖项，我不知道将来如何避免这种情况。所以问题是：

1.  我怎样才能比“重置”迁移历史更优雅地解决这种情况？
2.  如何防止这种情况发生并且仍然能够删除过时的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:50:47.977

您可以在迁移文件中检查 app1 的行，如下所示：

```
depends_on = (
    ("app2", "some_migration.py"),
) 
```

然后删除它

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-05T17:54:36.877

1.  没有什么好办法。这就是为什么我不惜一切代价避免依赖南方的原因。
2.  不要使用依赖项。

# css - 带有嵌入式样式表的 SVG 到 PNG

> ID：15230647
> 
> 赞同：4
> 
> 时间：2013-03-05T17:49:02.260
> 
> 标签：css, html, canvas, svg, d3.js

我对从 SVG 创建 PNG 感兴趣。我遵循了以下代码：

[https://developer.mozilla.org/en-US/docs/HTML/Canvas/Drawing_DOM_objects_into_a_canvas](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Drawing_DOM_objects_into_a_canvas)

但是由于 CSS 的样式，图像无法正确显示。我创建了一个本地 CSS 文件并导入到 SVG，如下所述：

[如何将样式应用于嵌入式 SVG？](https://stackoverflow.com/questions/4906148/how-to-apply-a-style-to-an-embedded-svg)

但它似乎没有使用样式表。任何想法为什么我会有这个错误？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T21:43:34.567

看看[PhantomJS](http://phantomjs.org/) - 您需要安装它，然后编写自己的脚本或按照以下方式运行：

```
phantomjs rasterize.js http://ariya.github.com/svg/tiger.svg tiger.png 
```

您还可以保存为 PDF、设置缩放设置等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-11T18:45:34.310

您可以使用[html2canvas](http://html2canvas.hertzen.com/)从任何 dom 元素（包括 svg 元素）生成画布。

但是，样式表中定义的 svg 元素的样式定义不会应用于生成的画布。这可以通过在调用 html2canvas 之前向 svg 元素添加样式定义来修补。

受[这篇文章](http://spin.atomicobject.com/2014/01/21/convert-svg-to-png/)的启发，我创建了这个：

```
function generateStyleDefs(svgDomElement) {
  var styleDefs = "";
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    var rules = sheets[i].cssRules;
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      if (rule.style) {
        var selectorText = rule.selectorText;
        var elems = svgDomElement.querySelectorAll(selectorText);

        if (elems.length) {
          styleDefs += selectorText + " { " + rule.style.cssText + " }\n";
        }
      }
    }
  }

  var s = document.createElement('style');
  s.setAttribute('type', 'text/css');
  s.innerHTML = "<![CDATA[\n" + styleDefs + "\n]]>";
  //somehow cdata section doesn't always work; you could use this instead:
  //s.innerHTML = styleDefs;

  var defs = document.createElement('defs');
  defs.appendChild(s);
  svgDomElement.insertBefore(defs, svgDomElement.firstChild);
}

// generate style definitions on the svg element(s)
generateStyleDefs(document.getElementById('svgElementId'));

// after generating the style defintions, call html2canvas
html2canvas(document.getElementById('idOfElement')).then(function(canvas) {
  document.body.appendChild(canvas);
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-05T20:40:07.207

示例位于

“如何将样式应用于嵌入式 SVG？” 正如你提到的应该工作。测试时需要在这行代码中定义youObjectElement。

var svgDoc = yourObjectElement.contentDocument;

再试一次。

# mysql - 我想在 sql server 中找到包含系列 A100012345 的最大数量

> ID：15230661
> 
> 赞同：-2
> 
> 时间：2013-03-05T17:49:36.043
> 
> 标签：mysql, sql

我有一个包含 id 和类型的表。

```
 id           type
A1000123451     a
B1000123450     b
B1000123451     b
B1000123452     b
B1000123453     b
A1000123452     a
A1000123453     a 
```

我想找到类型只有 b 的最大 id

意味着最大 id 是`B1000123454`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:52:40.410

```
SELECT `id` FROM `myTable` WHERE `type` = 'b' ORDER BY `id` DESC LIMIT 0,1 
```

# javascript - noscript 标记或 javascript

> ID：15230662
> 
> 赞同：2
> 
> 时间：2013-03-05T17:49:37.750
> 
> 标签：javascript, noscript

我想在访问者的浏览器中显示启用或禁用 JavaScript 的信息。但我在两种方式中感到困惑。

方法一：

```
<noscript>Please enable JavaScript</noscript> 
```

方法二：

```
<div id='jsInfo'>Please enable JavaScript</div>
<script type="text/javascript">
   document.getElementById('jsInfo').style.display='none';
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:52:16.100

无论哪种方式都有效。我个人更喜欢第一个，因为它更干净并最大限度地提高了兼容性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:52:25.067

该`<noscript>`方法是在禁用 JavaScript 时打印消息的*传统*方法，许多人已经使用了很多年......

后者只会在**启用**JavaScript 的情况*下*`<div>`隐藏消息，因此完成同样的事情。

 ***这是做同一件事的两种方式——还有更多。当要求很简单时，我总是喜欢简单，所以在我看来，最好的选择是最好的......*如果这就是你要问的*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:52:44.233

后者为您提供更细粒度的控制。关于SEO，前者是更好的解决方案。***

# php - PHP：标记系统 JOIN 语句

> ID：15230665
> 
> 赞同：0
> 
> 时间：2013-03-05T17:49:42.127
> 
> 标签：php, mysql

我已经为我的漫画网站实现了一个 SO 风格的标记系统。

每个漫画可以有 1 个或多个标签。

我目前设置的方式是：有一个漫画表、标签表和一个关系漫画标签表。查询将检查是否有匹配的漫画 ID 和标签 ID...

```
$sql = 
 "SELECT c.*, t.* 
 FROM comics c 
 INNER JOIN comictags ct ON (c.id = ct.comicID)
 INNER JOIN tags t ON (t.tagid = ct.tagID)
 WHERE ct.tagID IN ('" . implode(', ', $_SESSION['tagids']). "')
". $catquery ." " . $order; 
```

![在此处输入图像描述](../Images/d231521ede0376994ac7270846828a57.png)

这样做的问题是，每次我想向漫画 ID 添加新标签时，它都会迫使我向漫画标签表添加一个新条目。

是否有可能拥有更多这种模式：？

`comicid_1: tagid_1, tagid_2, tagid_3, etc...`

意思是，我为每个漫画 ID 创建 1 个条目，并在`tagid`字段中为我想要关联的每个标签添加一个逗号分隔的标签 ID。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:59:35.277

你目前的做法非常好。你打算做的不是。它违反了[第一范式](http://en.wikipedia.org/wiki/First_normal_form)：每个属性只能包含原子值。

当然，这是可能的。例如，通过对 tagid 列使用字符串类型。但这会使很多查询复杂化，并且可能对性能不利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:59:22.147

我不知道像这样更简单的 sql 表达式：

```
INSERT INTO ComicsTags VALUES (1, 10), (1,20), (1,30); 
```

对于脚本语言级别，您可以为该表编写模型方法，让您可以更简单地执行此操作：

```
$comicsTags = new ComicsTags();
$tags = array(10, 20,30);
$comicsTags->add(1, $tags); 
```

# jakarta-ee - Java-EE-6 / Glassfish：如何从自定义审计模块访问实体管理器？

> ID：15230670
> 
> 赞同：0
> 
> 时间：2013-03-05T17:49:55.703
> 
> 标签：jakarta-ee, glassfish, glassfish-3, audit, auditing

我正在使用 Glassfish 3.1.2.2，我想收集身份验证信息并将其存储到连接到 Glassfish 应用程序服务器的 MySQL 数据库中。到目前为止，我成功实现了一个定制的审计模块，并将其放入我的 ejb 项目中。到目前为止，这没有问题。

现在我想在登录尝试失败时设置一些标志和计数器。为此，我尝试将 EntityManager 实例注入到 AuditModule 类/对象中，但这总是会引发空指针异常，因为注入失败。

我已经尝试添加 @Stateless 注释（为了告诉这个类应该是容器管理的），但没有成功。实体管理器实例“em”仍然为空。

这是我定制的审计模块：

```
@Stateless
public class CustomAuditModule extends AuditModule {

    @PersistenceContext(unitName = "MyPersistenceUnit-ejbPU")
    private EntityManager em;

    @Override
    public void init(Properties props) {
        this.props = props;
    }

    @Override
    public void authentication(String username, String realm, boolean success) {
        if(success) {
            try {
                User user = em.createQuery("SELECT u FROM User u WHERE u.name='"+username+"'", User.class).getSingleResult();
                user.setLastLoginFail(new Long(-1L));
                user.setLoginFails(0);
                em.merge(user);
                em.flush();
            } catch(NoResultException ex) {
                Logger.getLogger(CustomAuditModule.class.getName()).log(Level.WARNING, "User "+username+" does not exist.");
            }
        } else {
            try {
                User user = em.createQuery("SELECT u FROM User u WHERE u.name='"+username+"'", User.class).getSingleResult();
                user.setLastLoginFail(System.currentTimeMillis());
                int fails = user.getLoginFails().intValue();
                fails++;
                user.setLoginFails(fails);
                em.merge(user);
                em.flush();
            } catch(NoResultException ex) {
                Logger.getLogger(CustomAuditModule.class.getName()).log(Level.WARNING, "User "+username+" does not exist.");
            }
        }
    }

    @Override
    public void ejbInvocation(String user, String ejb, String method, boolean success) {
        Logger.getLogger(CustomAuditModule.class.getName()).log(Level.INFO, "EJB Invocation.");
    }

    @Override
    public void serverStarted() {
        Logger.getLogger(CustomAuditModule.class.getName()).log(Level.INFO, "Server Started.");
    }

    @Override
    public void serverShutdown() {
        Logger.getLogger(CustomAuditModule.class.getName()).log(Level.INFO, "Server Shutdown.");
    }

} 
```

有人知道如何访问 jdbc 资源/正确注入 EntityManager 实例吗？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:12:18.030

我没有经验`AuditModule`。但是我怀疑你的`@Stateless`注解没有任何作用，因为EJB应该是通过`@EJB`注解注入的，我怀疑是这样的。

我会以Java SE 方式[创建 EntityManagerFactory ：](http://docs.oracle.com/javaee/6/api/javax/persistence/Persistence.html#createEntityManagerFactory%28java.lang.String%29)

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("MyPersistenceUnit-ejbPU");
EntityManager em = emf.createEntityManager(); 
```

请注意，第一行是一项昂贵的操作，因此建议在应用程序启动时仅调用一次。

# php - PHP 中的 JSON 解码使用 CURL 失败

> ID：15230674
> 
> 赞同：0
> 
> 时间：2013-03-05T17:50:07.787
> 
> 标签：php, json, curl

```
$ch = curl_init('http://www.somesite.com/project/User?id=1&&user=MYUSER');   
$result = curl_exec($ch);   
print $result;   
curl_close($ch);   
$json=json_decode($result,true);

print "-->".$json;   

print "------>".$json['PASSWORD'];` 
```

我得到的输出是：

```
-->1   
------> 
```

最后附加的“1”是什么？我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T17:54:20.887

`$result = curl_exec($ch);`=> `$result = true`，你忘了：

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:55:07.187

我的猜测是你错误地使用了 curl 。您应该将**CURLOPT_RETURNTRANSFER**选项设置为**true**：

```
$ch = curl_init('http://www.somesite.com/project/User?id=1&&user=MYUSER');
curl_setopt( CURLOPT_RETURNTRANSFER, true );
$result = curl_exec($ch);   
print $result;   
curl_close($ch);   
$json=json_decode($result,true); 
```

否则，您只是将所有内容打印到标准输出中。

# android - 无法销毁活动 java.lang.NullPointerException

> ID：15230677
> 
> 赞同：3
> 
> 时间：2013-03-05T17:50:13.027
> 
> 标签：android, android-fragments

我在我的活动中使用了一个动态片段，这是我的 onCreate：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_utente);           
        if(findViewById(R.id.framelayout2) != null){
            mDualFragments=true;
            ListUtente lu = new ListUtente();
            FragmentTransaction transaction = getSupportFragmentManager()
                    .beginTransaction();
            transaction.add(R.id.framelayout1, lu);
            transaction.commit();
            DettUtente du = new DettUtente();
            FragmentTransaction transaction1 = getSupportFragmentManager()
                    .beginTransaction();
            transaction1.add(R.id.framelayout2, du);
            transaction1.commit();           
        } else{         
                ListUtente lu = new ListUtente();
                lu.setArguments(getIntent().getExtras());
                getSupportFragmentManager().beginTransaction()
                .add(R.id.framelayout1, lu).commit();                       
        }               
} 
```

我的问题是当我旋转我的设备时：

```
03-05 18:26:47.223: E/AndroidRuntime(14216): FATAL EXCEPTION: main
03-05 18:26:47.223: E/AndroidRuntime(14216): java.lang.RuntimeException: Unable to destroy activity {com.unipg.utente/com.unipg.utente.ActivityUtente}: java.lang.NullPointerException
03-05 18:26:47.223: E/AndroidRuntime(14216):    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3401)
03-05 18:26:47.223: E/AndroidRuntime(14216):    at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3419)
03-05 18:26:47.223: E/AndroidRuntime(14216):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3617)
03-05 18:26:47.223: E/AndroidRuntime(14216):    at android.app.ActivityThread.access$700(ActivityThread.java:144)
03-05 18:26:47.223: E/AndroidRuntime(14216):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1216)
03-05 18:26:47.223: E/AndroidRuntime(14216):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-05 18:26:47.223: E/AndroidRuntime(14216):    at android.os.Looper.loop(Looper.java:137)
03-05 18:26:47.223: E/AndroidRuntime(14216):    at android.app.ActivityThread.main(ActivityThread.java:4966)
03-05 18:26:47.223: E/AndroidRuntime(14216):    at java.lang.reflect.Method.invokeNative(Native Method)
03-05 18:26:47.223: E/AndroidRuntime(14216):    at java.lang.reflect.Method.invoke(Method.java:511)
03-05 18:26:47.223: E/AndroidRuntime(14216):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
03-05 18:26:47.223: E/AndroidRuntime(14216):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
03-05 18:26:47.223: E/AndroidRuntime(14216):    at dalvik.system.NativeStart.main(Native Method)
03-05 18:26:47.223: E/AndroidRuntime(14216): Caused by: java.lang.NullPointerException
03-05 18:26:47.223: E/AndroidRuntime(14216):    at com.unipg.utente.ListUtente.onDestroy(ListUtente.java:111)
03-05 18:26:47.223: E/AndroidRuntime(14216):    at android.support.v4.app.Fragment.performDestroy(Fragment.java:1680)
03-05 18:26:47.223: E/AndroidRuntime(14216):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1040)
03-05 18:26:47.223: E/AndroidRuntime(14216):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
03-05 18:26:47.223: E/AndroidRuntime(14216):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1070)
03-05 18:26:47.223: E/AndroidRuntime(14216):    at android.support.v4.app.FragmentManagerImpl.dispatchDestroy(FragmentManager.java:1898)
03-05 18:26:47.223: E/AndroidRuntime(14216):    at android.support.v4.app.FragmentActivity.onDestroy(FragmentActivity.java:324)
03-05 18:26:47.223: E/AndroidRuntime(14216):    at android.app.Activity.performDestroy(Activity.java:5172)
03-05 18:26:47.223: E/AndroidRuntime(14216):    at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1109)
03-05 18:26:47.223: E/AndroidRuntime(14216):    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3388)
03-05 18:26:47.223: E/AndroidRuntime(14216):    ... 12 more
03-05 18:30:31.543: E/Trace(14605): error opening trace file: No such file or directory (2) 
```

如果我改变我的设备，我想动态修改我的片段。如果我写这个我没有最后一个错误（我破坏了 savedInstanceState）：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    if (savedInstanceState != null) {
        savedInstanceState.remove("android:support:fragments");
    } 
```

更新这是我的 listFragment 销毁..

```
@Override
public void onDestroyView(){
    super.onDestroyView();
    // libera l'adapter e chiudo il thread
    setListAdapter(null);
    threadutenti.cancel(true);
} 
```

没关系，但在我的应用程序中，我必须始终让我的 savedInstanceState 不为空。我该怎么办？

# c# - 需要防止数据在控制器中不为空

> ID：15230686
> 
> 赞同：1
> 
> 时间：2013-03-05T17:50:20.053
> 
> 标签：c#, asp.net-mvc

我从第 3 方获取了一个带有 List 的对象，因此我无法设置构造函数。我有两个 ActionResult 一个从第 3 方获取对象，另一个用于 jquery 自动完成。

我想不出一种方法来设置列表并防止它在下一个 ActionResult 中不为空......

```
public class MyController : Controller
{
  public List<T> myList;

  public ActionResult CallToGetThirdPartList(ThirdPartyObject obj)
  {
    list = obj.SpecialList;
    return View(obj); //important 
  }
  public ActionResult Search(ThirdPartyObject obj) //gets called from jquery 
  {
     var results = from m in myListist   //this is null
                   where m.Title.StartsWith(term)  
                   select new { label = m.Summary, m.id };  

            return Json(results, JsonRequestBehavior.AllowGet)
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:52:27.767

对于每个 HTTP 请求，都会创建一个全新的控制器实例。这意味着如果您`myList`在一个请求中初始化，您将获得一个全新的实例，`MyController`用于下一个`myList`未初始化的请求。

如果您需要在请求之间存储数据，请使用[Session](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.session.aspx)（用于用户特定的数据）或[Cache](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.cache.aspx)（用于站点范围的数据，例如查找列表）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:09:47.827

您需要稍微更改代码。

```
public class MyController : Controller
{
public List<T> myList;

 public ActionResult CallToGetThirdPartList(ThirdPartyObject obj)
 {
   list = obj.SpecialList;
   Session["list"] = list;
   return View(obj); //important 
 }
 public ActionResult Search(ThirdPartyObject obj) //gets called from jquery 
 {
   var listFromSession = Session["list"] as List<T>;
   var results = from m in listFromSession   //this is null
               where m.Title.StartsWith(term)  
               select new { label = m.Summary, m.id };  
        Session["result"]=results ;
        return Json(results, JsonRequestBehavior.AllowGet)
 }
 } 
```

我希望这会有所帮助。

问候帕明德

# android - 应用程序仅在三星 Galaxy s3 下运行时失败

> ID：15230689
> 
> 赞同：1
> 
> 时间：2013-03-05T17:50:23.260
> 
> 标签：android, galaxy

在我运行我的应用程序的每台 SGS3 设备上崩溃的原因似乎是什么？这是唯一无法运行的设备（操作系统版本为 4.1.2）。我试过：LG 擎天柱一号+黑色、N4、HTC HD2、SGS 1+2..等等...

在清单文件中，我做了：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="10" /> 
```

这些是最相关的行。Manifest.xml（针对我的问题）。

创建方法：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Getting reference to MapView
        mapView = (MapView) findViewById(R.id.map_view);
        tvLocation = (TextView)findViewById(R.id.tv_location);
        mapView.setKeepScreenOn(true);

        // Setting Zoom Controls on MapView
        mapView.setBuiltInZoomControls(true);
        mapView.setTraffic(true);
        mapView.setSatellite(false);

        ImageButton settings = (ImageButton)findViewById(R.id.settingsButton);
        settings.setOnClickListener(this);

        Button helpme = (Button)findViewById(R.id.helpMeButton);    //find Button and gives a name: 'help'
        ToggleButton mapExchangeToggleButton = (ToggleButton)findViewById(R.id.mapExchangeToggleButton);    
        helpme.setOnClickListener(this);    //register Button as an OnClicklistener
        mapExchangeToggleButton.setOnClickListener(this);

        // Getting LocationManager object from System Service LOCATION_SERVICE
        LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);

        // Creating a criteria object to retrieve provider
        Criteria criteria = new Criteria();

        // Getting the name of the best provider
        String provider = locationManager.getBestProvider(criteria, true);

        // Getting Current Location
        Location location = locationManager.getLastKnownLocation(provider);

        if(location!=null){
            onLocationChanged(location);
        } 
```

onResume 方法：

```
public void onResume(){
        super.onResume();

        SharedPreferences pre = getSharedPreferences(PREFS_NAME,MODE_PRIVATE);
        phoneNumber = pre.getString("phone","" );
    } 
```

LogCat 是：

```
03-05 20:39:49.910: D/dalvikvm(27589): GC_CONCURRENT freed 173K, 9% free 12425K/13511K, paused 3ms+1ms, total 18ms
03-05 20:39:49.910: D/dalvikvm(27589): WAIT_FOR_CONCURRENT_GC blocked 6ms
03-05 20:39:49.910: W/CursorWrapperInner(27589): Cursor finalized without prior close()
03-05 20:39:49.965: D/dalvikvm(27589): GC_FOR_ALLOC freed 6K, 8% free 12814K/13895K, paused 14ms, total 14ms
03-05 20:39:49.990: W/System.err(27589): java.io.IOException: Service not Available
03-05 20:39:49.995: W/System.err(27589):    at android.location.Geocoder.getFromLocation(Geocoder.java:136)
03-05 20:39:49.995: W/System.err(27589):    at in.wptrafficanalyzer.locationingooglemap.MainActivity.onLocationChanged(MainActivity.java:122)
03-05 20:39:49.995: W/System.err(27589):    at in.wptrafficanalyzer.locationingooglemap.MainActivity.onCreate(MainActivity.java:83)
03-05 20:39:49.995: W/System.err(27589):    at android.app.Activity.performCreate(Activity.java:5206)
03-05 20:39:49.995: W/System.err(27589):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
03-05 20:39:49.995: W/System.err(27589):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
03-05 20:39:49.995: W/System.err(27589):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
03-05 20:39:49.995: W/System.err(27589):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
03-05 20:39:49.995: W/System.err(27589):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
03-05 20:39:49.995: W/System.err(27589):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-05 20:39:49.995: W/System.err(27589):    at android.os.Looper.loop(Looper.java:137)
03-05 20:39:49.995: W/System.err(27589):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-05 20:39:49.995: W/System.err(27589):    at java.lang.reflect.Method.invokeNative(Native Method)
03-05 20:39:49.995: W/System.err(27589):    at java.lang.reflect.Method.invoke(Method.java:511)
03-05 20:39:49.995: W/System.err(27589):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-05 20:39:49.995: W/System.err(27589):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-05 20:39:50.000: W/System.err(27589):    at dalvik.system.NativeStart.main(Native Method)
03-05 20:39:50.000: D/AndroidRuntime(27589): Shutting down VM
03-05 20:39:50.000: W/dalvikvm(27589): threadid=1: thread exiting with uncaught exception (group=0x419242a0)
03-05 20:39:50.000: E/AndroidRuntime(27589): FATAL EXCEPTION: main
03-05 20:39:50.000: E/AndroidRuntime(27589): java.lang.RuntimeException: Unable to start activity ComponentInfo{in.wptrafficanalyzer.locationingooglemap/in.wptrafficanalyzer.locationingooglemap.MainActivity}: java.lang.NullPointerException
03-05 20:39:50.000: E/AndroidRuntime(27589):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
03-05 20:39:50.000: E/AndroidRuntime(27589):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
03-05 20:39:50.000: E/AndroidRuntime(27589):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
03-05 20:39:50.000: E/AndroidRuntime(27589):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
03-05 20:39:50.000: E/AndroidRuntime(27589):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-05 20:39:50.000: E/AndroidRuntime(27589):    at android.os.Looper.loop(Looper.java:137)
03-05 20:39:50.000: E/AndroidRuntime(27589):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-05 20:39:50.000: E/AndroidRuntime(27589):    at java.lang.reflect.Method.invokeNative(Native Method)
03-05 20:39:50.000: E/AndroidRuntime(27589):    at java.lang.reflect.Method.invoke(Method.java:511)
03-05 20:39:50.000: E/AndroidRuntime(27589):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-05 20:39:50.000: E/AndroidRuntime(27589):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-05 20:39:50.000: E/AndroidRuntime(27589):    at dalvik.system.NativeStart.main(Native Method)
03-05 20:39:50.000: E/AndroidRuntime(27589): Caused by: java.lang.NullPointerException
03-05 20:39:50.000: E/AndroidRuntime(27589):    at in.wptrafficanalyzer.locationingooglemap.MainActivity.onLocationChanged(MainActivity.java:128)
03-05 20:39:50.000: E/AndroidRuntime(27589):    at in.wptrafficanalyzer.locationingooglemap.MainActivity.onCreate(MainActivity.java:83)
03-05 20:39:50.000: E/AndroidRuntime(27589):    at android.app.Activity.performCreate(Activity.java:5206)
03-05 20:39:50.000: E/AndroidRuntime(27589):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
03-05 20:39:50.000: E/AndroidRuntime(27589):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
03-05 20:39:50.000: E/AndroidRuntime(27589):    ... 11 more 
```

onLocationChanged():

```
public void onLocationChanged(Location location) {

        double latitude = location.getLatitude();

        double longitude = location.getLongitude();

         );

        Geocoder geocoder;
        List<Address> addresses = null;

        geocoder = new Geocoder(this, Locale.getDefault());
        try {
            addresses = geocoder.getFromLocation(latitude, longitude, 1);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        address = addresses.get(0).getAddressLine(0);
        city = addresses.get(0).getAddressLine(1);
        country = addresses.get(0).getAddressLine(2);

        tvLocation.setText("Street Address: " +  address+ "\nCity: "+city +"\nCountry: " +country);

        GeoPoint point = new GeoPoint((int)(latitude * 1E6), (int)(longitude*1E6));

        MapController mapController = mapView.getController();

        mapController.animateTo(point);

        mapController.setZoom(15);

        mapView.invalidate();

        List<Overlay> mapOverlays = mapView.getOverlays();

        Drawable drawable = this.getResources().getDrawable(R.drawable.cur_position);

        CurrentLocationOverlay currentLocationOverlay = new CurrentLocationOverlay(drawable);

        OverlayItem currentLocation = new OverlayItem(point, "Current Location", "Latitude : " + latitude + ", Longitude:" + longitude);

        currentLocationOverlay.addOverlay(currentLocation);

        mapOverlays.clear();

        mapOverlays.add(currentLocationOverlay);        

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T18:19:39.677

你正在捕捉和打印：

```
java.io.IOException: Service not Available 
```

这意味着地址永远不会被设置并且为空：

```
List<Address> addresses = null; 
```

因此，当您尝试访问该列表中的项目时，您可能会收到 NullPointerException：

```
address = addresses.get(0).getAddressLine(0); 
```

看起来 android.location.Geocoder 在该特定设备上不可用。我会检查诸如权限之类的事情，以及 GPS 是否已打开/启用。

# c++ - tbb::concurrent_queue 容器中的 std::deque 等价物？

> ID：15230694
> 
> 赞同：1
> 
> 时间：2013-03-05T17:50:44.977
> 
> 标签：c++, multithreading, visual-studio-2010, tbb

我**在**函数中使用 std::deque 来访问元素而不从队列中弹出，因为我在不同的迭代中使用相同的队列。我的解决方案是基于粗粒度的多线程。现在我想让它成为细粒度的多线程解决方案。为此，我正在使用 tbb::concurrent_queue。但是我在 tbb::concurrent_queue 中的操作中**需要**std::deque 的等效功能吗？

***编辑*** 这就是我使用 std::deque 实现的方式（粗粒度多线程）请记住 dq 是静态队列（即在不同的迭代中多次使用）

```
vertext_found = true;
std::deque<T> dq;
while ( i < dq->size())
{
    EnterCriticalSection(&h);
    if( i < dq.size() ) 
    {
          v = dq.at(i);      // accessing element of queue without popping
          i++;
          vertext_found = true;
    }
    LeaveCriticalSection(&h);
    if (vertext_found && (i < dq.size()) && v != NULL)
    {
          **operation on 'v'
          vertext_found = false;
    }
} 
```

我想用 tbb::concurrent_queue 达到同样的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T22:32:10.110

如果您的算法具有填充队列或消耗队列的单独通道，请考虑使用 tbb::concurrent_vector。它有一个可用于填充通道的 push_back 方法和一个用于消耗通道的 at() 方法。如果线程争用消费过程中的弹出元素，请考虑使用 tbb::atomic 计数器为 at() 生成索引。

如果没有将填充和消费完全分开，使用 at() 可能会产生比它解决的问题更多的问题，即使它存在，因为它会与消费者竞争。

如果消费过程只需要并行循环 concurrent_vector，请考虑使用 tbb::parallel_for 进行循环。tbb::concurrent_vector 有一个 range() 方法支持这个习惯用法。

```
void consume( tbb::concurrent_vector<T>& vec ) {
    tbb::parallel_for( vec.range(), [&]( const tbb::concurrent_vector<T>::range_type& r ) {
        for( auto i=r.begin(); i!=r.end(); ++i ) {
            T value = *i;
            ...process value...;
        }
    });
} 
```

如果消费通行证不能使用 tbb:parallel_for，请考虑使用 TBB 原子计数器来生成索引。将计数器初始化为零并使用 ++ 将其递增。这是一个例子：

```
tbb::atomic<size_t> head;
tbb::concurrent_vector<T> vec;

bool pop_one( T& result ) { // Try to grab next item from vec
    size_t i = head++;      // Fetch-and-increment must be single atomic operation
    if( i<vec.size() ) {
        result = vec[i];
        return true;
    } else {
        return false;       // Failed
    }
} 
```

一般来说，这个解决方案的可扩展性不如使用 tbb::parallel_for，因为计数器“头”在内存系统中引入了一个争用点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:58:14.233

According to the Doxygen docs in the TBB site ([TBB Doxy docs](http://threadingbuildingblocks.org/docs/doxygen/)) there's no operation `at` in the queue. You can `push` and `try_pop` elements with a `tbb::strict_ppl::concurrent_queue`.

If you're using a `tbb::deprecated::concurrent_queue` (older versions of TBB), there are available the `push_if_not_full` and `pop_if_present` operations.

In both queues, "multiple threads may each push and pop concurrently" as stated down in the brief section.

# autoconf - 构建包含/不包含库的最佳实践

> ID：15230696
> 
> 赞同：0
> 
> 时间：2013-03-05T17:50:49.767
> 
> 标签：autoconf

项目附带 library 的副本，`foo`文件系统布局如下：

```
myproject/
myproject/src/ # sources of my project
myproject/libfoo/ # import of "foo" library 
```

标准（基于自动工具的）构建系统构建 libfoo，然后构建动态链接到`libfoo`. `libfoo`基本上没有修改（有一些小的修改以正确适应构建系统）。`libfoo`使用 autotools 本身，所以我通常使用`AC_CONFIG_SUBDIRS`.

但是，`libfoo`已经为各种发行版打包，所以我想避免在这些系统上构建导入库，而是使用系统范围的安装 - 这样我可以获得更好维护的 libfoo 版本的好处（更少的错误，安全问题，...）。otoh，我想将 libfoo 保留在我的源代码树中，这样我就可以在不提供该库的系统上进行构建（无需用户单独获取源代码并自己构建库）。

我可以想到一些我可以引入的配置标志，因此用户可以选择是否要使用系统安装、本地或不使用库来构建项目。（这是一个可选的依赖项）。禁用“本地 foo”，应该完全禁用 libfoo 的构建（并且可能还配置 foo）

例如：

```
./configure --enable-foo=no    # aka "--disable-foo": build without foo
./configure --enable-foo       # use system-wide foo
./configure --enable-foo=local # use local copy of foo 
```

或者：

```
./configure --disable-foo
./configure --enable-foo  --disable-local-foo
./configure --enable-foo  --enable-local-foo 
```

但我想以符合标准的方式做到这一点。

通过 autoconf 选择的最佳实践是使用本地副本还是库、系统范围的副本还是根本不使用库？

非常欢迎使用这种机制的项目的指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T07:30:51.210

我的项目中有一个类似的地方，当（1）该库尚未安装，或（2）它已安装但不必与我期望的接口，或（3）时，我使用 BuDDy 库的包含`configure`版本运行`--with-included-buddy`。

你可以在[这里](https://gitlab.lrde.epita.fr/spot/spot/blob/1bb5cbd90c886cacea77df65583e439ad9f3dc4f/m4/buddy.m4)`configure`看到宏。之后我只在s中使用和，而[顶层](https://gitlab.lrde.epita.fr/spot/spot/blob/1bb5cbd90c886cacea77df65583e439ad9f3dc4f/Makefile.am#L23-25)仅在 . 中有条件地包含目录。`$(BUDDY_CPPFLAGS)``$(BUDDY_LDFLAGS)``Makefile.am`[`Makefile.am`](https://gitlab.lrde.epita.fr/spot/spot/blob/1bb5cbd90c886cacea77df65583e439ad9f3dc4f/Makefile.am#L23-25)`buddy``SUBDIRS`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:38:29.207

在处理[外部软件](http://www.gnu.org/software/autoconf/manual/autoconf.html#External-Software)时我更喜欢`--with-`*foo*，但这只是一种偏好。链接中的示例和文档可能会帮助您决定如何操作。我将使用您的第一个示例，该示例仅使用一个标志，而不是第二个使用两个标志以便于文档/维护的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T21:38:34.033

# 我真的不认为你想这样做

您将使构建机器变得更加复杂，并且大多数人已经将自动工具视为黑魔法。对于开发人员来说，这会让事情变得更加复杂，对于潜在的发行版打包者来说会更加复杂，对于最终用户来说会变得更加容易。

如果您有条件地进行配置，那么您会使构建分发 tarball ( `make dist`/ `make distcheck`) 的过程更加脆弱。

[这是你可能造成的麻烦。](http://blog.flameeyes.eu/2012/11/multi-level-bundling-with-a-twist)

# 但如果你必须...

您也许可以在[我最近的回答](https://stackoverflow.com/questions/15136267/how-to-get-shell-script-output-into-makefile-am-at-make-time/15216931#15216931)中调整代码。

# c# - 用逗号格式化数字字符串

> ID：15230699
> 
> 赞同：0
> 
> 时间：2013-03-05T17:51:06.793
> 
> 标签：c#

我有一个字符串编号，我想将其格式化为逗号。

例如字符串 12345 需要显示为 12,345

我该如何做到这一点？

这是嵌入在html中的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T17:54:33.463

规范的[MSDN 文章](http://msdn.microsoft.com/en-gb/library/0c899ak8.aspx)

```
Group separator specifier:
2147483647.ToString("##,#", en-US) -> 2,147,483,647
2147483647.ToString("##,#", es-ES) -> 2.147.483.647

Scaling specifier:
2147483647.ToString("#,#,,", en-US) -> 2,147
2147483647.ToString("#,#,,", es-ES) -> 2.147 
```

或者，为了更轻松，请参阅[多年前的这篇精彩文章](http://blog.stevex.net/string-formatting-in-csharp/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T17:53:59.450

查看[文档](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

```
value = 1234567890;
Console.WriteLine(value.ToString("0,0", CultureInfo.InvariantCulture)); 
// Displays 1,234,567,890 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T18:03:00.000

```
string str = string.Format("{0:n2}", 12345);
Console.WriteLine(str);
Console.Read(); 
```

注意：我在 string.Format 中使用了 n2 ，这意味着您需要小数点后最多 2 位数字。如果您不想要小数点后的任何数字，您可以将 2 设置为 0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T17:55:25.707

要显示带有格式的数字，您需要使用 ToString() 函数进行格式设置。

例子：

```
int value = 123456;
value.ToString("N0")  // Displays: 123,4556 as a string. 
```

更多信息可以在这里找到：http: [//msdn.microsoft.com/en-us/library/dwhawy9k.aspx](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T17:54:54.520

```
int answer = 12345;
Console.WriteLine(String.Format("{0:n0}", answer)); 
```

使用`Console.WriteLine`' 内置格式化程序：

```
int answer = 12345;
Console.WriteLine("{0:n0}", answer); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T17:54:56.797

请参阅[标准数字格式](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)。

```
int number = 12345;
number.ToString("N0"); 
```

# clearcase - 在 Clearcase 中确定每个版本上的二进制文件数量

> ID：15230701
> 
> 赞同：1
> 
> 时间：2013-03-05T17:51:09.563
> 
> 标签：clearcase, clearcase-ucm, clearcase-automation

我们正在使用 CC UCM 环境。我想确定每次加载/发布时的二进制文件数量，并确保我们正确打包了加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:17:38.273

在处理多个生成各自二进制文件的源组件时，最佳实践是使用**[复合基线](https://stackoverflow.com/questions/9613911/what-is-composite-baseline-in-ucm-and-when-it-will-be-used/9613986#9613986)**。
你可以有复合材料的复合材料。

![合成的](../Images/694a5eb10b838483b6e36ddf60b3a424.png)

每个复合基线都记录了在直接相关组件上创建的基线，这使您可以：

*   记住给定版本的基线关联
*   列出每个依赖项，即确定涉及的组件数量。

请注意，这是针对*源*组件的（您不应将二进制文件存储在ClearCase 等*源代码*控制系统中）

# linux - 如何从根控制台以用户权限运行应用程序

> ID：15230702
> 
> 赞同：1
> 
> 时间：2013-03-05T17:51:15.117
> 
> 标签：linux, console, privileges

我从 Linux 根控制台运行 bash 脚本。所以这个脚本运行一个具有 root 权限的应用程序。

但我需要一个应用程序作为用户调用。

这种情况可以按我的预期工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:55:01.420

您可以使用特权`sudo -u username`运行程序。`username`像这样：

```
sudo -u youruser yourscript.sh 
```

如果你不能使用`sudo`，你可以尝试使用以下命令，正如@Torrius 建议的那样：

```
su - youruser -c "yourscript.sh" 
```

如果您甚至无法使用后一种解决方案，您可以编写一个小型 c 程序，以 parametrized 的权限运行可执行文件`user and group id`。

看这个概念代码：

```
#include <stdio.h>
#include <unistd.h>

int main(int argc, char *argv[]) {

    if (argc < 3)
    {
        printf("Usage: ./this [uid] [gid]\n");
        return 1;
    }

    setuid(atol(argv[1]));
    setgid(atol(argv[2]));

    execl("/usr/bin/whoami", "whoami", 0, 0);

    return 0;
} 
```

要测试它：

```
myshell:~ root$ ./a.out 501 501
davide

myshell:~ root$ ./a.out -2 -2
nobody

myshell:~ root$ ./a.out 1 1
daemon 
```

# database - 在 Access 中附加 tabledef 时出现错误 3045 或 3356

> ID：15230704
> 
> 赞同：1
> 
> 时间：2013-03-05T17:51:18.410
> 
> 标签：database, vba, ms-access, vb6, ms-access-2003

我正在使用 MS Access 2003（没有其他可用）为快照样式数据库构建临时后端，这涉及将一些链接的 tabledef 添加到临时后端。该代码已经工作了大约 3 周，但截至今天下午早些时候，开始抛出 3356（即机器 Y 上的用户 X 已经以独占模式打开了数据库......）或 3045（大致，无法打开数据库在独占模式下），这取决于我是否已经在 Access 中建立了连接。

错误代码大致（略微修剪）：

```
Private Sub AddTabledefToDb(dbC As DAO.Database, dbTarget As DAO.Database, strLinkedName As String)
    Dim strPath As String, tdfLinked As DAO.TableDef
    strPath = strGetPathFromConnect(tdfLinked.Connect)

    Set tdfLinked = dbC.TableDefs(strLinkedName)

    ' With the lines below, error thrown is 3356; without 3045 '
    Dim dbLinkedTableIn As DAO.Database
    Set dbLinkedTableIn = Application.DBEngine.Workspaces(0).OpenDatabase(strPath, False, True, tdfLinked.Connect)

    Dim tdfNew as DAO.TableDef
    Set tdfNew = dbTarget.CreateTableDef(Attributes:=dbAttachedTable)
    tdfNew.Name = tdfLinked.Name
    tdfNew.SourceTableName = tdfLinked.SourceTableName
    tdfNew.Connect = tdfLinked.Connect
    dbTarget.TableDefs.Append tdfNew ' Throws 3045 without the lines above or 3356 with them ' 

    ' If needed... ' 
    dbLinkedTableIn.Close
    Set dbLinkedTableIn = Nothing

End Sub 
```

我怀疑其原因可能与我打开包含我直接链接到的表的数据库时显示的消息有关，即它仅在只读模式下可用（我相当确定不是以前的情况）。但是，我不清楚为什么我的代码需要的不仅仅是只读访问权限，而且我无法弄清楚它为什么要尝试获取它（尤其是当我事先以只读模式显式打开数据库时）。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:32:02.547

想我已经找到了答案：不要使用 DAO，而是使用 ADO。大致见下文。目前，我还没有将该`Mode`属性设置为读取，但初步测试表明它至少可以在不这样做的情况下运行。

```
Dim cn As ADODB.Connection
Dim tbl as ADOX.Table
Dim cat as ADOX.Catalog

Set cn = New ADODB.Connection
cn.Provider = "Microsoft.Jet.OLEDB.4.0"
cn.Open dbTarget.Name ' Path of the db the linked table needs to end up in'

Set cat = New ADOX.Catalog
cat.ActiveConnection = cn

Set tbl = New ADOX.Table
Set tbl.ParentCatalog = cat

tbl.Name = tdfLinked.Name
tbl.Properties("Jet OLEDB:Link Datasource") = strGetPathFromConnectString(tdfLinked.Connect)
tbl.Properties("Jet OLEDB:Link Provider String") = "MS Access"  ' If Password protected, details go here ' 
tbl.Properties("Jet OLEDB:Remote Table Name") = tdfLinked.SourceTableName
tbl.Properties("Jet OLEDB:Create Link") = True

cat.Tables.Append tbl

cn.Close
Set tbl = Nothing
Set cat = Nothing
Set cn = Nothing 
```

粗略地说，看起来 ADO 很乐意创建链接表而无需在 Code 中获取读/写访问权限，而 DAO 则不然。

# graph - 按月划分 PowerBuilder 条形图

> ID：15230712
> 
> 赞同：1
> 
> 时间：2013-03-05T17:51:45.873
> 
> 标签：graph, powerbuilder

我有一个条形图。用有日期时间的支出来加载它并不难，但我想按月整理这些数据。

我想我已经读过自动缩放“舍入”功能不适用于此，我认为我需要创建主要部门。但是，这是灰色的。（自动缩放也奇怪地变灰）

如果我找不到更好的解决方案，我可能只需要查看这个图表，这有点蹩脚。非常感谢任何帮助。

谢谢，德雷南

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T21:02:48.053

好吧，您可能已经解决了这个问题，但我会为下一个人回答。

我个人会简单地创建另一列，它可以是数据库中的一个虚拟列，也可以是数据对象客户端上的一个，它获取数据的“月份”部分。我以前做过这样的报告，如果你不知道你的范围，因为你不知道设计报告时会有多少不同的桶，这有点臭。

有时我会创建一个存储过程并在后端将数据展平，但更简单但不太灵活的方法是获取数据的月份部分，例如：

```
select sum(col1), max(col2), to_char(expenditure_date, 'MONTH') as exp_month
from your_table
where you are happy
group by to_char(expenditure_date, 'MONTH)

or

select col1, col2, mid(to_char(exp_date, 'mm/dd/yyyy')1,2) as month_mm
from your_table
where everyone is happy

// then group on the month dummy col and you can do collating/summing on the client report as well. 
```

# iphone - iOS5 中的实时核心图像过滤

> ID：15230713
> 
> 赞同：1
> 
> 时间：2013-03-05T17:51:48.657
> 
> 标签：iphone, ios, cocoa-touch, core-image

在其文档中，Apple 对使用 CoreImage 进行实时过滤进行了以下说明：

如果您的应用支持实时图像处理，您应该从 EAGL 上下文创建 CIContext 对象，而不是使用 contextWithOptions: 并指定 GPU。优点是渲染图像保留在 GPU 上，永远不会被复制回 CPU 内存。首先，您需要创建一个 EAGL 上下文：

我能够使用以下实现在 iOS6 / iPhone5 中完成此操作：

```
self.eaglContext = [[[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2] autorelease];
self.ciContext = [[CIContext contextWithEAGLContext:_eaglContext options:[[[NSMutableDictionary alloc] initWithObjectsAndKeys:[NSNull null], kCIContextWorkingColorSpace, nil] autorelease]] autorelease];
self.filteredImage = [[CIImage imageWithCGImage:_image.CGImage] autorelease];

    GLKView *glkView = [[GLKView alloc] initWithFrame:self.imageView.bounds context:self.eaglContext];
    self.glkView = glkView;
    [self.glkView bindDrawable];
    [self.mainView addSubview:self.glkView];
    [glkView release];

    CGRect filterViewBounds = CGRectZero;
    filterViewBounds.size.width = self.glkView.drawableWidth;
    filterViewBounds.size.height = self.glkView.drawableHeight;
    self.filterViewBounds = filterViewBounds;

    [self.context drawImage:self.filteredImage inRect:self.filterViewBounds fromRect:[self.filteredImage extent]];
    [self.glkView display]; 
```

然后按以下方式应用过滤器：

```
CIImage *filteredImage = [[CIImage alloc] initWithCGImage:self.image.CGImage options:nil];

for (Filter *filter in self.filters)
{
    if ([filter apply])
    {
        [filter.filter setValue:filteredImage forKey:kCIInputImageKey];
        [filteredImage release];
        filteredImage = [[filter.filter outputImage] retain];
    }
}

    [self.glkView bindDrawable];
    [self.ciContext drawImage:filteredImage inRect:self.filterViewBounds fromRect:[filteredImage extent]];
    [self.glkView display]; 
```

但是，在 iOS5 / iPhone4 上，当我应用过滤器时，我得到：

```
CoreImage: EAGLContext framebuffer or renderbuffer incorrectly configured! 
```

在此之后过滤确实起作用，但是性能仍然非常糟糕，几乎类似于我将过滤后的图像保存回 CPU。还有一个事实是，当我退出这个特定的视图控制器，然后尝试回到它时，它会崩溃。

任何人都可以提供任何帮助吗？

# ruby-on-rails - 解析 CSV 文件

> ID：15230715
> 
> 赞同：0
> 
> 时间：2013-03-05T17:51:52.320
> 
> 标签：ruby-on-rails, ruby

如何解析以下格式的大型 csv 文件：

`A,1,X:1,X:1,X:1,X:1...`

我需要保存`A`和所有`1`的。我想将`1`'s 保存为逗号分隔：

`A` `1,1,1,1,1,1...`

数据示例：

```
4217,23,4217:0.1304,11045842:0.0870,11027563:0.0435,15055960:0.0435,12556773:0.0435,10317812:0.0435,21268053:0.0435,14982717:0.0435,12560416:0.0435,21684075:0.0435,12177392:0.0435,878710:0.0435,21777845:0.0435,11045966:0.0435,17109375:0.0435,15701596:0.0435,10312162:0.0435,11045878:0.0435 
```

我的期望：

`4217` `4217,11045842,11027563,15055960,12556773,10317812,21268053,14982717,12560416,21684075,12177392,878710,21777845,11045966,17109375,15701596,10312162,11045878`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:00:43.067

假设您将输入作为变量中的字符串，例如`row`，

```
#Filename: test.rb

row = "4217,23,4217:0.1304,11045842:0.0870,11027563:0.0435,15055960:0.0435,12556773:0.0435,10317812:0.0435,21268053:0.0435,14982717:0.0435,12560416:0.0435,21684075:0.0435,12177392:0.0435,878710:0.0435,21777845:0.0435,11045966:0.0435,17109375:0.0435,15701596:0.0435,10312162:0.0435,11045878:0.0435";

row=row.split(',').map do |x|
        if(x.index(':')!=nil)
            x[0..(x.index(':')-1)]
        else
            x
        end
    end

keyElement = row[0];
arrayElement = row[2..-1];

puts keyElement;
for i in 0..arrayElement.length-1
    print(arrayElement[i] + ", ");
end
puts arrayElement[-1]; 
```

这里`keyElement`将包含“A”并将`arrayElement`逗号分隔值作为数组包含。

对于您的示例数据，它给出：

```
>>ruby test.rb
4217
4217, 11045842, 11027563, 15055960, 12556773, 10317812, 21268053, 14982717, 12560416, 21684075, 12177392, 878710, 21777845, 11045966, 17109375, 15701596, 10312162, 11045878, 11045878 
```

但是，我会推荐一个哈希，假设您需要将数组与值“A”相关联：

```
#row is mapped as before

hashElement = Hash.new();
hashElement[row[0]] = row[2..-1]; 
```

# c# - 带有边界错误错误请求的 Http Post 请求

> ID：15230717
> 
> 赞同：0
> 
> 时间：2013-03-05T17:51:57.500
> 
> 标签：c#, http-post

嗨，我正在尝试执行 Http Post 请求，但收到错误请求的错误，如果有人可以帮助我，我认为我在请求中做错了什么。

**这是请求**

```
 POST /uapi/faxes/@me/0003*210 HTTP/1.1
     HOST uapi.voipnow.com
     Content-Length:469
     Content-Type: multipart/form-data; boundary=------------325343636
     ------------325343636-------- 
     Content-Disposition:form-data; name="files"; filename="/path/to/file/fax.txt"
     Content-Type;application/octet-stream

     This is my fax
     ------------325343636
     Content-Disposition:form-data; name="request";
     {
       "recipients":["7778888"]
     }
     ------------3253436360 
```

**这是我的这个请求的代码**

```
 try
           {
             String Token = "mytoken";
            ServicePointManager.ServerCertificateValidationCallback = new RemoteCertificateValidationCallback(delegate { return true; });
            HttpWebRequest httpWReq2 = (HttpWebRequest)WebRequest.Create("https://domainname/uapi/faxes/@me/0014*100/?accessRequestToken=" + Token);

            ASCIIEncoding encoding2 = new ASCIIEncoding();
            string postData2 =
            "------------325343636" + Environment.NewLine +
            "Content-Disposition:form-data; name=\"files\";filename=\"/path/to/file/fax.txt\";" + Environment.NewLine +
            "Content-Type:application/octet-stream;" + Environment.NewLine +
            "This is my fax" + Environment.NewLine +
            "------------325343636" + Environment.NewLine +
            "Content-Disposition:form-data; name=\"request\";" + Environment.NewLine +
            "{" + Environment.NewLine +
            "\"recipients\":[\"111111\"];" + Environment.NewLine +
            "}" + Environment.NewLine +
            "------------325343636";

            byte[] data2 = encoding2.GetBytes(postData2);
            httpWReq2.Method = "POST";
            httpWReq2.ContentType = "multipart/form-data; boundary=------------325343636";
            httpWReq2.KeepAlive = true;
            httpWReq2.UserAgent = "Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17";
            httpWReq2.ContentLength =data2.Length;
            httpWReq2.Host = "hostname";
            string result2 = "";

            Stream dataStream2 = httpWReq2.GetRequestStream();
            dataStream2.Write(data2, 0, data2.Length);
            dataStream2.Close();
            WebResponse response2 = httpWReq2.GetResponse();
            HttpWebResponse responce3 = (HttpWebResponse)httpWReq2.GetResponse();
            dataStream2 = response2.GetResponseStream();
            // Open the stream using a StreamReader for easy access.
            StreamReader reader2 = new StreamReader(dataStream2);
            // Read the content.
            string responseFromServer2 = reader2.ReadToEnd();
           }

            catch (Exception ex)
        {
            WebException ex2 = (WebException)ex;
            if (ex2.Status == WebExceptionStatus.ProtocolError)
            {
                WebResponse resp = ex2.Response;
                using (Stream respstream = resp.GetResponseStream())
                {
                    StreamReader reader = new StreamReader(respstream);
                    String finalerror = reader.ReadToEnd();
                }
            }

        } 
```

**错误**

> 收件人参数中提供的值丢失或无效。该参数必须引用任何电话号码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:13:41.123

哦，我看到了一个潜在的问题。看起来您正在发送 JSON 对象而不是表单编码值。

```
 ------------325343636
 Content-Disposition:form-data; name="request";
 recipients=7778888
 ------------3253436360 
```

沿着这些思路尝试一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-26T17:55:50.207

你的界限不匹配。

```
 POST /uapi/faxes/@me/0003*210 HTTP/1.1
 HOST uapi.voipnow.com
 Content-Length:469
 Content-Type: multipart/form-data; boundary=------------325343636
 --------------325343636
 Content-Disposition:form-data; name="files"; filename="/path/to/file/fax.txt"
 Content-Type;application/octet-stream

 This is my fax
 --------------325343636
 Content-Disposition:form-data; name="request";
 {
   "recipients":["7778888"]
 }
 --------------325343636-- 
```

你的边界应该是-（两个连字符）+你的边界。最后一个边界应遵循相同的公式，并在末尾添加 -- （两个连字符）。

在您的示例中，您的结束边界不同，并且边界前面没有额外的两个连字符。

为了进一步澄清，如果您的边界是“边界”，它看起来像这样：

```
 POST /uapi/faxes/@me/0003*210 HTTP/1.1
 HOST uapi.voipnow.com
 Content-Length:469
 Content-Type: multipart/form-data; boundary=a boundary
 --a boundary
 Content-Disposition:form-data; name="files"; filename="/path/to/file/fax.txt"
 Content-Type;application/octet-stream

 This is my fax
 --a boundary
 Content-Disposition:form-data; name="request";
 {
   "recipients":["7778888"]
 }
 --a boundary-- 
```

# maven - 数据库连接 Tomcat Struts2 应用程序

> ID：15230725
> 
> 赞同：1
> 
> 时间：2013-03-05T17:52:17.547
> 
> 标签：maven, tomcat, web-applications, struts2

我有一个应用程序，该应用程序当前使用 Maven 配置文件部署在多个位置，该配置文件根据配置文件选择不同的属性文件，然后使用 cargo 插件将应用程序部署到相关的 tomcat 实例。

我听说过 JNDI 并将数据库设置与 webapp 本身完全分离，但是我不确定从哪里开始寻找最佳解决方案。

问题：

*   Maven Struts2 项目根据环境部署到具有不同数据库的多个 Tomcat 实例。

管理数据库连接和不同环境的任何其他差异的最佳方法是什么？（如 Struts2 `devMode`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:02:29.483

The best way IMHO use the data source and apply database settings to it. Then you need to adjust the configuration each time you build for different environment. Other option is to use embedded database, however.

# gnuplot - Gnuplot：在 3d 表面周围绘制边界框

> ID：15230727
> 
> 赞同：3
> 
> 时间：2013-03-05T17:52:24.390
> 
> 标签：gnuplot

在使用 Google 不错的绘图工具进行了一些实验之后，我正在使用 Gnuplot 绘制几个 3D 图形。我喜欢 Google 工具的一件事是它围绕表面绘制的“边界框”，这让我更容易看到大小。

有没有办法在 Gnuplot 中绘制这个边界框？

例如，这个函数：`z = (15 - x*y) / (100 - x)`

用谷歌绘制：[https ://www.google.es/search?q=z+%3D+(15+-+x y *)%2F(100-x)&aq=f&oq=z+%3D+(15+-+x* y )%2F(100-x)](https://www.google.es/search?q=z%20=%20%2815%20-%20x*y%29/%28100-x%29&aq=f&oq=z%20=%20%2815%20-%20x*y%29/%28100-x%29)

![使用 Google 绘制 3D 曲面图](../Images/6cf1d1f483d9293fd32ea848b1b0f706.png)

Gnuplot 的等效脚本：

```
    设置网格
    设置 xrange [-10:10]
    设置 yrange [-10:10]
    设置 zrange [-0.7:1]
    设置 isosamples 100
    设置 pm3d
    设置 hidden3d
    设置 ticslevel 0.0
    设置视图 60, 100
    splot (15 - x*y) / (100 - x)

```

产生以下情节：

![使用 Gnuplot 绘制 3D 曲面图](../Images/fc4d447c46d447885f642e9c2a3f0cf4.png)

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T18:26:51.570

是的，你可以使用命令打开边界

```
set border 4095 
```

（`help set border`有关该数字的解释：简而言之，每个边界边缘有一位，而立方体上有 12 条边缘。）

不过，Gnuplot 不会在每条边界线上绘制抽动。

# maven - 如何在多模块 maven 项目中选择性地将工件上传到 nexus 存储库

> ID：15230739
> 
> 赞同：2
> 
> 时间：2013-03-05T17:52:53.163
> 
> 标签：maven, nexus

我有一个构建战争、罐子等的多模块项目。

项目A
|
|
---------子项目-A1
| |
| --------pom.xml
---------子项目-A2
！|
| --------pom.xml
---------子项目-A3
| |
| --------pom.xml
---------子项目-A4
| |
| --------pom.xml
---------子项目-A5
| |
| --------pom.xml
---------pom.xml

这将使用 mvn clean deploy 构建（项目 A 是一个多模块项目）。问题是在上传（部署）时，只需要将 proj-A2 和 proj-A3 上传到 nexus repo。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T18:27:15.280

确保在您的项目中定义了模块。例如。父母 pom 你会放类似的东西

```
<modules>
<module>sub-proj-A1</module>
.. n entries
<module>sub-proj-An</module>
</modules> 
```

然后，当您想运行部署时，您可以运行 mvn deploy -pl proj-A2 proj-A3

来源：Maven 模块：[http ://maven.apache.org/guides/mini/guide-multiple-modules.html](http://maven.apache.org/guides/mini/guide-multiple-modules.html)

可以在 struts2 pom 中看到一个工作示例：[https ://github.com/apache/struts/blob/master/pom.xml](https://github.com/apache/struts/blob/master/pom.xml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:21:31.460

您可以使用 Deploy 插件的[跳过](http://maven.apache.org/plugins/maven-deploy-plugin/faq.html#skip)功能。

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-deploy-plugin</artifactId>
  <version>X.Y</version>
  <configuration>
    <skip>true</skip>
  </configuration>
</plugin> 
```

# php - MySQL 查询为 NULL 时的操作

> ID：15230743
> 
> 赞同：0
> 
> 时间：2013-03-05T17:53:17.423
> 
> 标签：php

我要做的是在查询为空或代码名称错误时将访问者发送到错误页面？我当前的脚本与以下内容相呼应：“此网站不会被黑客入侵！”，但这一切都发生在发送原始查询的同一页面上。

目标是将访问者发送到我的自定义错误页面，该页面位于第一页所在的同一文件夹内。

```
http://www.example.com/download/file.php 

http://www.example.com/download/error.php 
```

我当前的脚本是

```
 <?php
$host = 'localhost';
$db_name = 'My_DB_Name';
$db_user = 'MY_User_Name';
$db_pass = '******';
$path_to_file_directory = 'download/files/';
mysql_connect( $host, $db_user, $db_pass);
mysql_select_db( $db_name ) or die(mysql_error());

$file_code = filter_input( INPUT_GET, 'urlid' );

# Query for file info
$res = mysql_query("SELECT * FROM `Files` WHERE `urlID`='".$file_code."'") or die ( mysql_error() );

# If query is empty, there is a bad code name
# This catches possible hacking attempt.
if( mysql_num_rows($res) == 0 )
{
echo 'There will be no hacking on this website! ';
exit();
} 

# Save file info into an array called "$info"
$info = mysql_fetch_assoc($res); 

# File path is below
$file_path = $path_to_file_directory.$info['file_name'];

# Now push the download through the browser
# There is more than 1 way to do this.
if (file_exists($file_path)) {
echo '<p>if it does not: <a href="'.$file_path.'">click here to try again</a>.</p>';
exit;
}

?> 
```

我知道我必须将 echo 更改为其他内容，但我不知道我必须使用什么，因为只需将指向错误页面的链接放在 echo 中只会在我的 file.php 页面上回显它

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:00:49.970

我猜你需要的是重定向到另一个页面。您可以使用该`header`功能。

```
<?php
if( mysql_num_rows($res) == 0 )
{
  header('Location: /nohacking.php');
  exit();
} 
?> 
```

这会将您的浏览器重定向到 nohacking.php 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:00:37.667

只要您还没有发送任何标题（即，基本上，这是在任何 HTML 之前）：

```
if(mysql_num_rows($res) == 0)
{
die(header("Location: error.php"));
} 
```

header() 函数将重定向页面，而 die() 函数将停止处理 PHP 的其余部分。

# android - Android 的 HTTP GET 请求不起作用

> ID：15230745
> 
> 赞同：0
> 
> 时间：2013-03-05T17:53:24.720
> 
> 标签：android, httpwebrequest

我正在尝试访问 RESTfull 网络服务器。链接是[Railyatri](http://railyatri.in/l/ajax/location.json?t=16518&s=2013-03-05)。当我通过我的 android 应用程序访问它时，我得到空的响应。当我通过我的 PC 浏览器做同样的事情时，我得到了所需的数据 (JSON)。

这就是我在android中发出http请求的方式

```
 HttpClient stageClient = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet(url);
    try
    {
    HttpResponse response = stageClient.execute(httpGet);
    StatusLine statusLine = response.getStatusLine();
    int statusCode = statusLine.getStatusCode();
    if(statusCode == 200)
    {
        HttpEntity entity = response.getEntity();
        InputStream inputStream = entity.getContent();
        BufferedReader bufferedReader = new BufferedReader(new  InputStreamReader(inputStream));
        String line;
        while ((line = bufferedReader.readLine()) != null)
        {
            data.append(line);
            isSuccess = true;
        }               
    }
    else
    {
        isSuccess = false;
    }
    }
    catch (ClientProtocolException clientProtocolException) {
    }
    catch (IOException ioException) {  
    } 
```

我得到的状态代码为 200。有人能指出我在做什么错误。

# jquery - 如何在 html/jquery 中存储值

> ID：15230746
> 
> 赞同：3
> 
> 时间：2013-03-05T17:53:25.460
> 
> 标签：jquery, html

我需要在临时变量中存储一些元素，所以当我回到那个 pahe 时，我可以在页面加载时显示它们

我有关于`8 li element`但让我点击`5 li`，所以我想在`5 li`某处存储 id

```
$("#divPopup").on("click", "li", function () {
            ...
                var newId = $this.attr('Id').replace("Left", "Right")

                // here i want to store newID, each time user click on event, it should be unique values  , i want to store in $('#hdnValueProjectBtn').val(newId);
            }
            else {
                var newId = $this.attr('Id').replace("Left", "Right")
                $('#' + newId).hide();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:17:00.473

您可以`localStorage`在支持的浏览器中使用并回退到`Cookies`旧的浏览器中，这是一个示例：

```
// store value
if (window.localStorage !== undefined) {
    window.localStorage.setItem("li_id", id);
} else {
    // WARNING: the following will overwrite current document cookie.
    document.cookie = ["li_id", "=", id, "; domain=.", window.location.host, "; path=" + window.location.pathname + ";"].join("");

}

// get value
var savedValue;
if (window.localStorage !== undefined) {
    savedValue = window.localStorage.getItem("li_id");
} else {
    savedValue = document.cookie.split(";")[0].split("=")[1];
}

alert(savedValue); 
```

请注意，`id`在上面的代码段中是您要存储的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:22:25.187

您使用数据将数据存储在 jQuery 中的 DOM 节点上，变量存储在节点对象中。这是为了容纳复杂的对象和引用，因为将节点元素上的数据存储为属性只会容纳字符串值。

```
$('#foo').data('foo', 'baz');

console.log( $('#foo').attr('data-foo') );
//outputs "bar" as the attribute was never changed

console.log( $('#foo').data('foo') );
//outputs "baz" as the value has been updated on the object 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T18:17:23.750

JimJimmy 所说的是正确的。您是否使用任何服务器端脚本？

*   如果您只使用客户端脚本，那么您可以完成任务的唯一方法是 1) Cookie 2) LocalStorage 3) SessionStorage - 仅用于该会话

# java - JSP - Apache FileUpload 的基本示例

> ID：15230749
> 
> 赞同：0
> 
> 时间：2013-03-05T17:53:43.457
> 
> 标签：java, apache, jsp, file-upload

我正在寻找一个使用 Apache FileUploader 的非常基本的示例——它实际上对组件进行了解释。我在谷歌上能找到的所有东西似乎都直接潜入了代码中，没有任何理解。

库已经安装，我已经尝试过了，但我只是不理解代码，我讨厌成为一个复制编码器。

用于从 HTML 表单上传单个文件。不需要多个文件（大多数教程也关注）。

任何帮助或链接都会很有用，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:28:46.333

[http://www.tutorialspoint.com/jsp/jsp_file_uploading.htm](http://www.tutorialspoint.com/jsp/jsp_file_uploading.htm)对文件上传有必要的评论和解释。

您还可以查看[如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:46:48.820

```
 <form name="form1" action="forward.jsp" method="post" >
      File Upload:<input type="file" name="upload" size="100"/>
                  <input type="submit" value="submit" size="100"/>

   </form> 
```

**在 forward.jsp 中**

`out.println(request.getparameter(upload));//returns filename only rather than whole path`

# ejbql - EJBQL - 如何按 LEFT JOIN 中的字段对查询结果进行排序

> ID：15230750
> 
> 赞同：0
> 
> 时间：2013-03-05T17:53:45.523
> 
> 标签：ejbql

我有以下类（为清楚起见进行了简化）：

```
Class Top {
  InternationalStringType name;
}

Class InternationalStringType {
  List<LocalizedStringType> localizedString; 
}

Class LocalizedStringType {
  String value;
} 
```

以下 EJBQL 查询成功检索了 Top 的所有实例，并填充了它们的子对象：

```
SELECT DISTINCT Object(t) FROM Top t LEFT OUTER JOIN t.name nm LEFT OUTER JOIN nm.localizedString nm_ls 
```

我想修改上面的查询，使结果按 Top.name.localizedString.value 排序

执行此操作的正确语法是什么？我尝试了以下查询，但得到“错误：对于 SELECT DISTINCT，ORDER BY 表达式必须出现在选择列表中”

```
SELECT DISTINCT Object(t) FROM Top t LEFT OUTER JOIN t.name nm LEFT OUTER JOIN nm.localizedString nm_ls ORDER BY nm_ls.value ASC 
```

我不清楚在 ORDER BY 子句的选择列表中放置什么。

无论我在逗号后面放什么，在 Object(t) 之后给出“，”的错误：

```
SELECT DISTINCT Object(t), Object(nm_ls) FROM Top t LEFT OUTER JOIN t.name nm LEFT OUTER JOIN nm.localizedString nm_ls ORDER BY nm_ls.value ASC 
```

如果它相关，我的 JPA 实现是休眠 3.6.4.Final。TIA 为您提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T05:52:28.630

ORDER BY 子句中使用的字段必须是 CMP 字段，不能是实体标识符或 CMR 字段。此外，您必须注意您在 ORDER BY 子句中指定的 CMP 字段。如果查询选择实体集合，则 ORDER BY 子句只能与所选实体类型的 CMP 字段一起使用。例如以下查询是非法的，因为 ORDER BY 子句中使用的 CMP 字段不是所选实体类型的字段。

按 c.address.city 的 c 订单从客户中选择对象（c）

因为 city CMP 字段不是 Customer EJB 的直接 CMP 字段，所以不能在 ORDER BY 子句中使用它。您可以在 ORDER BY 子句中使用的唯一 CMP 字段是所选实体类型的直接 CMP 字段。这是一个不合理的限制。

类似的限制适用于 CMP 结果。ORDER BY 子句中使用的 CMP 字段必须与 SELECT 子句中标识的 CMP 字段相同。例如，以下查询是非法的，因为 SELECT 子句中标识的 CMP 与 ORDER BY 子句中使用的不同。

从客户中选择 c.address.city 作为 c ORDER BY c.address.state

在上面的查询中，我们想要一个按州排序的所有城市的列表。不幸的是，这是非法的。如果您选择使用城市 CMP 字段，则不能按州 CMP 字段进行排序。

我听说第二个限制可能是由于主要 RDBS 系统之一的限制而强加给我们的，该系统无法按 select 子句中不存在的任何列进行排序 - 请记住 EJB QL 被编译成本机查询语言，在 RDBS 中是 SQL。主要供应商的限制将是创建任何抽象的一个因素——最小公分母将占上风。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:47:30.167

通过简单地删除 SELECT 子句中的 DISTINCT 限定符，我能够使 ORDER BY 子句与我的查询一起使用。我不确定我是否理解其中的要点，但以下修改后的查询效果很好！

```
SELECT t FROM Top t LEFT JOIN t.name nm LEFT JOIN nm.localizedString nm_ls ORDER BY nm_ls.value ASC 
```

我现在得到一个结果集，其中包含按我希望的 Top.name.localizedString.value 属性排序的 Top 实例。

现在，如果有人能解释为什么 DISTINCT 不起作用，那就太好了。谢谢。

# php - MongoDB 和 MVC 模型变量

> ID：15230765
> 
> 赞同：0
> 
> 时间：2013-03-05T17:54:23.730
> 
> 标签：php, mongodb, nosql

我从 CodeIgniter/MySQL 来到 Laravel/MongoDB。

例如，按平台具有不同变量的 User 类：

我的网站使用变量：

*   ID
*   姓名
*   browser_kind

在移动应用程序中使用变量：

*   ID
*   姓名
*   ios_version

考虑到这种情况，在我的模型中我应该有两个变量吗？

```
<?php
    class user{
        public $id;
        public $name;
        public $browser_kind;
        public $ios_version;
    }
?> 
```

不需要预定义结构的 NoSQL 优势呢？如何在模型中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:09:23.430

仅仅因为 Mongo 不需要模式，您仍然需要对模型进行建模。最大的好处之一是您可以更改数据模型而无需 Mongo 挂断您的电话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:22:10.643

就我个人而言，我只会将其中`null`一个`browser_kind`或两个存储`ios_version`在同一个文档中。这样做的原因是为了未来的扩展。IOS 确实支持 Firefox 和 Opera Mini 等，因此考虑到这一点，我建议您将整个架构存储在一起。

但是，由于您似乎在这里有两种静态模式，我建议您考虑不要将`browser_kind`和存储`ios_version`在同一个文档中作为一个或另一个 being `null`。

由于这两个模式永远不会重叠（根据我们对您的场景的了解），您将只使用相当多的宝贵空间，具体取决于集合中有多少文档。这是因为 MongoDB 目前不压缩其文件。

似乎这些字段永远不会出现`null`在需要它们的地方，即`browser_kind`所有其他字段永远不会出现`null`在非移动用户需要它们的文档中。

因此，我会按照你得到的方式保留模型，但我会使用一个函数，比如`array_filter`删除你不想保存的字段。

当然，这是一个问题，您正在使用一个框架，它将所有这些逻辑抽象到一个您可能无法到达的地方，除非您自己做很多事情。考虑到这一点，您可以从一个类中抽象出两个类`user`，一个定义一个定义`browser_kind`，一个定义，`ios_version`但这开始增加应用程序的权重。

因此，这为您提供了一些选择和需要考虑的事情。

# java - 我的通用 EnumSet 方法 - 无法访问 Enum.values()

> ID：15230771
> 
> 赞同：0
> 
> 时间：2013-03-05T17:54:38.780
> 
> 标签：java, generics, enumset

我正在尝试编写一个通用方法来从包含位掩码的整数初始化 EnumSet 值。我收到一个我不明白的编译器错误。这是我的代码：

```
 private <E extends Enum<E>> void setEnumSet( EnumSet<E> es, int iEnum ) {   
      es.clear(); 
      for (E e : E.values()) {   
         if (0 != (iEnum & (1<<e.ordinal()))) {
            es.add(e); 
         }
      }               
   } 
```

编译器错误：

```
1>Javac...
1>.\wdqapi.java:266: error: cannot find symbol
1>      for (E e : E.values()) { 
1>                  ^
1>  symbol:   method values()
1>  location: class Enum<E>
1>  where E is a type-variable:
1>    E extends Enum<E> declared in method <E>_setEnumSet(EnumSet<E>,int) 
```

是否有一些特殊的语法可以访问 E 的 values() 方法？（我是 Java 菜鸟。）有人可以帮我解决这个编译器错误吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T18:00:43.313

You cannot do operations on generic types directly because at runtime type-erasure replaces all these with `Object`. Hence, the above code would be doing `Object.values()` which obviously doesn't work.

The way to do this is to use [Class.getEnumConstants()](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getEnumConstants%28%29)

To do this you need an instance of `E` of the `Class` object of `E`. Again, remember that at runtime type-erasure will remove all references to the generic type.

Try something like:

```
private <E extends Enum<E>> void setEnumSet(E[] values,
      EnumSet<E> es, int iEnum ) 
```

or

```
private <E extends Enum<E>> void setEnumSet(Class<E> type, 
      EnumSet<E> es, int iEnum ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T14:41:20.503

作为传入值数组的替代方法，您可以`Class<E>`从`EnumSet`. 如果集合不为空，请使用`set.iterator().next().getDeclaringClass()`; 如果集合为空，则`EnumSet.complementOf(set)`用于获取非空集合，然后像以前一样获取元素并获取其类。（奇怪的是，EnumSet 没有提供直接获取枚举类的方法，尽管必须存储它`complementOf`才能工作。）

拥有 Class 对象后，请[`Class.getEnumConstants`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getEnumConstants%28%29)按照 John B 的答案中所述使用。

# php - lighttpd上传进度无响应

> ID：15230772
> 
> 赞同：0
> 
> 时间：2013-03-05T17:54:39.760
> 
> 标签：php, upload, xmlhttprequest, lighttpd, progress

我正在尝试让 lighttpd 1.5 的上传进度模块工作，但我遇到了一个奇怪的问题：

当我开始上传时，“/response”每秒都会被调用，并设置了 X-Progress-ID 标头，但我没有得到任何响应。GET 调用只是加载和加载，但没有得到响应。如果手动调用它（localhost/response?X-Progress-ID=someID），它似乎是正确的，received 和 total 的值是正确的并已设置。然后当我取消上传进度（通过浏览器中的“X”按钮）时，/response 不断被调用，但现在它将返回状态 200，但是，当然，没有设置正确的值。

这是我的代码：

**Javascript：**

```
 interval = null;

   function openProgressBar(uuid) {

        /* call the progress-updater every 1000ms */

        interval = window.setInterval(
             function () {
                 fetch(uuid);
              },
              1000
        );
    }

    function fetch(uuid) {
      req = new XMLHttpRequest();
      req.open("GET", "/progress", 1);
      req.setRequestHeader("X-Progress-ID", uuid);
      req.onreadystatechange = function () {
      if (req.readyState == 4) {
        if (req.status == 200) {
            /* poor-man JSON parser */
            var upload = eval(req.responseText);

            document.getElementById('tp').innerHTML = upload.state;

            /* change the width if the inner progress-bar */
            if (upload.state == 'done' || upload.state == 'uploading') {
                bar = document.getElementById('progressbar');
                w = 400 * upload.received / upload.size;
                bar.style.width = w + 'px';
            }
            /* we are done, stop the interval */
            if (upload.state == 'done') {
                window.clearTimeout(interval);
            }
        }
      }
     }
     req.send(null);
    } 
```

**还有我的 HTML：**

```
 <form id="upload" enctype="multipart/form-data" 
     action="index.php?X-Progress-ID={{tracking_id}}" 
     method="post" 
     onsubmit="openProgressBar('{{tracking_id}}'); return true;">

     <input name="video" type="file" />
     <input type="submit" class="button orange medium" value="Upload" />

 </form>

 <div>
   <div id="progress">
   <div id="progressbar"></div>
   </div>
   <div id="tp">(progress)</div>
 </div> 
```

编辑：忘了提... {{tracking_id}} 正在php控制器中生成并用Twig打印。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:45:08.900

这似乎是 Chrome 的一个老错误：

[https://code.google.com/p/chromium/issues/detail?id=45196](https://code.google.com/p/chromium/issues/detail?id=45196)

同样的问题..用Firefox对其进行了测试，效果很好。可悲的是，这个错误确实存在 2-3 年了，所以在不久的将来修复的希望不大。

让它通过 XMLHTTPRequest 上传文件。

# android - 不同标记的不同信息窗口

> ID：15230784
> 
> 赞同：2
> 
> 时间：2013-03-05T17:55:13.567
> 
> 标签：android, infowindow, google-maps-android-api-2

我正在使用 Google Maps v2 API 并在地图上放置标记。标记代表不同的东西，所以我想为每类标记有一个自定义的 InfoWindow 布局。问题是每次选择标记时都会调用的覆盖`getInfoContents`and将为每个标记提供相同的布局。`getInfoWindow`

有没有不同的方法可以做到这一点，以便我可以为不同的标记组充气不同的布局？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:59:49.960

> 问题是每次选择标记时都会调用的覆盖 getInfoContents 和 getInfoWindow 将为每个标记提供相同的布局。

他们当然不必这样做。您被`Marker`作为参数传递给每个方法，因此可以根据`Marker`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:02:52.343

但是你可以。在为标记充气之前进行检查，`InfoWindow`并根据您的检查充气不同的布局。

当您`Marker`在 `public View getInfoContents(Marker args)`方法中收到 时，创建一个 if 语句，该语句将测试此标记是否与您想要的类型相对应，并基于此扩展相关布局。

例如，您可以通过运行检查标记的位置坐标是什么

`clickMarkerLatLng = args.getPosition();`

并基于此确定`InfoWindow`应该呈现的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-04T11:12:12.840

它非常简单 map.setInfoWindowAdapter(new InfoWindowAdapter() {

```
 @Override
            public View getInfoWindow(Marker marker) {
                // TODO Auto-generated method stub
                View v;
                LayoutInflater inflator=(LayoutInflater)getSystemService(LAYOUT_INFLATER_SERVICE);
                v=inflator.inflate(R.layout.info_inflator, null);
                TextView text=(TextView)v.findViewById(R.id.title);
                Button ok_button=(Button) v.findViewById(R.id.ok_button);
                text.setText(marker.getTitle());
                ok_button.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub

                    }
                });

                return v;
            }

            @Override
            public View getInfoContents(Marker marker) {
                // TODO Auto-generated method stub
                return null;
            }
        }); 
```

# paypal - 使用 Paypal SandBox 测试付款

> ID：15230790
> 
> 赞同：0
> 
> 时间：2013-03-05T17:55:35.860
> 
> 标签：paypal, paypal-ipn, paypal-sandbox

我刚刚注册了一个 Paypal SandBox 帐户，但我不知道在哪里可以找到发送付款的沙盒 URL？我唯一能确定的是，您可以从贝宝网站将 IPN 发送到您的 IPN 脚本，但不能从您的网站到贝宝沙箱进行实际的真实支付模拟！？

有人可以在这里告诉我在哪里可以找到 URL 和/或我是否可以做我想做的事！？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:50:47.963

重定向到`https://www.sandbox.paypal.com/cgi-bin/webscr`您可以在以下文档中找到更多信息：

[https://www.x.com/sites/default/files/pp_sandbox_userguide.pdf](https://www.x.com/sites/default/files/pp_sandbox_userguide.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T20:23:19.053

下面是一张包含所有 PayPal 其他端点的图片。上面提供的沙盒用户指南也非常有用。如果您在使用特定产品时遇到问题，请告诉我，我可以提供更多信息。

![API 端点](../Images/70dfb2eccd240aa3608e533f9ae65590.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T09:35:37.967

是的，您可以使用 Paypal SandBox 测试您的网站，然后连接到实际的 Paypal 帐户。Paypal SandBox 的工作方式与实际的 Paypal 相同。

为此，您必须调用以下 API

1.  SetExpressCheckout API
2.  如果操作成功，则使用此链接发送令牌。[https://www.sandbox.paypal.com/cgi-binwebscr?cmd=_express-checkout&token=EC-1NK66318YB717835M](https://www.sandbox.paypal.com/cgi-binwebscr?cmd=_express-checkout&token=EC-1NK66318YB717835M)
3.  获取ExpressCheckoutDetails API
4.  DoExpressCheckoutPayment API

下面的链接为您提供了关于此的分步说明：

[测试 PayPal Express Checkout](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECTesting)

希望这可以帮助

# mysql - 另一个变量mysql中的变量名

> ID：15230791
> 
> 赞同：0
> 
> 时间：2013-03-05T17:55:36.327
> 
> 标签：mysql, variables, loops, cursor, session-variables

情况是我有一个 mysql 存储过程，它有一些变量，我想根据 SELECT 使用它们的值，我在循环中获取我真正需要的变量列表：

```
MyTable(varId, varName, typeId)  
(0,var1,1)  
(1,var2,2)

MyValues(MyVar1,MyVar2)
(1,2) 
```

这是我想做的：

```
DECLARE var1 ;  
DECLARE var2 ;  

SELECT MyVar1,MyVar2 INTO var1,var2 FROM MyValues; 
CURSOR curs FOR  
SELECT varName FROM Mytable WHERE typeId = 1;

LOOP  
FETCH curs INTO varName;  
  SELECT sqrt(varName.value);  //Should be 1 because var1 =1;
END LOOP; 
```

除非我使用会话变量，否则似乎不可能使用准备好的函数来做到这一点，但实际上我动态地（在 curs 中）接收`var1`and`var2`并且我无法将其提取到会话变量中。

谁能给我一些想法来解决这个问题？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:02:44.637

首先，为什么要将变量存储在 SESSION 中？如果您可以在过程中获取它们，您也可以在过程中使用它们。

同样，如果您需要返回它们，您可以在您的过程中返回一个结果集，并在您的 Web 编程或应用程序中捕获它们。像：

```
SELECT @var1, @var2 
```

还有一件事，我不确定我是否正确，但是如果您想要来自外部（您的 Web 应用程序）的变量，您也可以将它们作为参数传递。像：

```
$mysqli->query("CALL procedure_name($parameter1, $parameter2)"); 
```

**问题编辑后：** 我不明白这个..

```
CURSOR curs FOR  
SELECT varName FROM Mytable WHERE typeId = 1;

LOOP 
```

为什么在这里使用光标只是为了选择？无论如何，我认为，你想在下一行使用' *varName '。*您可以将其存储在另一个变量中，例如：

```
DECLARE a_variable VARCHAR(50);
SELECT varName INTO a_variable FROM Mytable WHERE typeId = 1; 
```

在这里你得到 *a_variable* 里面的值 使用它：

```
SELECT sqrt(a_variable);//NOT like varName.value 
```

这回答了你的问题了吗？请告诉我。

**编辑＃3：** 我在这里弄错了你的问题：

> //应该是 1 因为 var1 =1;

这是您需要使用的代码：

```
SET @query = CONCAT('select SQRT(@', var_name, ') as square_root');
     -- SELECT @query;
    PREPARE stmt FROM @query;
    EXECUTE stmt; 
```

***这是我尝试过的完整过程：***

```
DELIMITER $$

CREATE PROCEDURE `test_var`(
)
BEGIN
    DECLARE var1 int;  
    DECLARE var2 int; 
    DECLARE var_name varchar(50);

    SELECT MyVar1,MyVar2 INTO @var1,@var2 FROM MyValues;
    SELECT varName INTO var_name FROM Mytable WHERE typeId = 1;

    SET @query = CONCAT('select SQRT(@', var_name, ') as square_root');
     -- SELECT @query;
    PREPARE stmt FROM @query;
    EXECUTE stmt;

END 
```

希望这可以帮助。请告诉我。

问候马尤赫

# c# - 添加额外字段以插入查询

> ID：15230794
> 
> 赞同：0
> 
> 时间：2013-03-05T17:55:37.543
> 
> 标签：c#, wpf, dbcontext

我有一个不是我制作的应用程序。这个应用程序有一个表单，它使用`MySQL`并将`DbContext`数据存储到我的数据库中。我正在尝试添加一个额外的字段，但我面临的问题是，即使使用表单值生成的模型包含我的新值，`DbContext`也不会将这个额外的字段生成到 中`query`，因此不会保存这个额外的值.

这是实际将数据保存到表中的方法：

```
public virtual int Insert(T source)
{
    using (var context = new EyebusEntities())
    {
        context.Set<T>().Add(source);
        context.SaveChanges();

        return source.Id;
    }
} 
```

观察：

*   `source`有需要保存的值。
*   使用 MySQL 的常规日志监控查询，我可以确认查询中缺少该字段。

究竟是如何`DbContext`生成查询的？我怎样才能实现我的目标？

实体：

```
public partial class Ocorrencia : IEntity
    {
        public Ocorrencia()
        {
            this.OcorrenciaVideos = new HashSet<OcorrenciaVideo>();
        }

        public int Id { get; set; }
        public int IdOcorrenciaTipo { get; set; }
        public System.DateTime DataInicio { get; set; }
        public System.DateTime DataFim { get; set; }
        public string Operador { get; set; }
        public string Motorista { get; set; }
        public string Cobrador { get; set; }
        public string Terceiros { get; set; }
        public string Descricao { get; set; }
        public byte[] Imagem { get; set; }
        public string EmailsEnviados { get; set; }
        public string TipoOcorrenciaOutro { get; set; }
        public string Onibus { get; set; }     //field which don't get saved

        public virtual ICollection<OcorrenciaVideo> OcorrenciaVideos { get; set; }
        public virtual OcorrenciaTipo Tipo { get; set; }
    }
} 
```

# ember.js - Ember 数据：来自 API 的具有默认值的新记录

> ID：15230795
> 
> 赞同：0
> 
> 时间：2013-03-05T17:55:53.380
> 
> 标签：ember.js, ember-data

我可以`App.Model.createRecord()`用来获得*新*的记录。

我需要的是用来自远程 API 的值填充这个新记录的属性和关系：API`GET /models/new`用对应于新记录的 json 响应（它没有 ID）。

任何人都知道我该怎么做？

# css - 覆盖链接的主题滚轮样式

> ID：15230796
> 
> 赞同：1
> 
> 时间：2013-03-05T17:55:57.373
> 
> 标签：css, jquery-mobile, css-selectors, anchor

我正在尝试为特定链接覆盖 themeroller 的主题。

所有链接的代码是：

```
.ui-body-c .ui-link:link {
    color:      #000000      /*{c-body-link-color}*/;
    text-decoration: none !important;
}

.ui-body-c .ui-link:visited {
    color:      #000000      /*{c-body-link-visited}*/;
    text-decoration: none !important;
}

.ui-body-c .ui-link:active {
    color:      #000000      /*{c-body-link-active}*/;
    text-decoration: none !important;
}

.ui-body-c .ui-link:hover {
    color:      #00b2ef !important     /*{c-body-link-hover}*/;
    text-decoration: underline !important;
} 
```

我创建了一个新链接，并希望它的 :link 颜色与其他链接不同。我添加了 .newlink 类，它是：

```
.newlink:link{
    color: #00b2ef
} 
```

无论我将这个类放在哪里，或者如果我添加选择器（上面的其他 2 个类以及 .newlink 选择器或此链接的唯一 id），该链接仍然继承 themeroller 样式。当我使用 firebug 查看继承的样式时，我添加的任何样式总是被划掉。我认为将额外的类添加到选择器（.ui-body-c .ui-link .newlink:link{...}）会增加链接的此规则权重，但这不起作用。我会很感激任何帮助。谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:59:07.887

关于增加权重，您走在正确的道路上，您只需要删除 .ui-body-c .ui-link.newlink:link{...} 之间的空格即可说出具有 newlink 类的 ui-link。 ..

它必须在下面添加以覆盖上面的代码。（用户界面链接）

```
.ui-body-c .ui-link.newlink:link {
    color:      #000000      /*{c-body-link-color}*/;
    text-decoration: none;
} 
```

除非您打算删除 ui-link 类...然后您需要重写 css...也许是这样的：

```
.ui-body-c a.newlink:link {
    color:      #000000      /*{c-body-link-color}*/;
    text-decoration: none !important;
}

.ui-body-c a.newlink:visited {
    color:      #000000      /*{c-body-link-visited}*/;
    text-decoration: none !important;
}

.ui-body-c a.newlink:active {
    color:      #000000      /*{c-body-link-active}*/;
    text-decoration: none !important;
}

.ui-body-c a.newlink:hover {
    color:      #00b2ef !important;     /*{c-body-link-hover}*/
    text-decoration: underline !important;
} 
```

# .net - DebugView 不显示来自 VB.NET 程序的调试输出

> ID：15230808
> 
> 赞同：0
> 
> 时间：2013-03-05T17:56:41.553
> 
> 标签：.net, vb.net, visual-studio, debugging

我在 VB.NET 程序中使用 Debug.WriteLine()。我可以在 Visual Studio 的“输出”窗口中看到调试语句，但在 DebugView 中看不到。

我什至尝试了以下方法：

[将 DebugView 与 .NET 一起使用教程](http://weblogs.asp.net/gunnarpeipman/archive/2011/05/20/using-debugview-to-catch-debug-output-of-net-program.aspx)

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:02:12.783

如果您使用的是 .Net Framework 4.0 或更高版本，那么这是设计使然。调试应用程序时，输出`Debug.WriteLine`将发送到调试器，但不会发送到 DebugView 应用程序。

由于 Visual Studio 调试器的一些体系结构细节，这在 4.0 中发生了变化。它变成了真正的原生调试器，调试视图无法通过原生调试器拦截消息

# java - 在Executor Service的ThreadPool中添加线程

> ID：15230810
> 
> 赞同：5
> 
> 时间：2013-03-05T17:56:52.443
> 
> 标签：java, multithreading, threadpool, executorservice

我正在开发一个多线程程序，我试图确保每个线程都在运行`30 minutes`。假设如果我们有`10 threads`那么每个线程`10`应该运行`30 minutes`。

下面是我的代码-

```
class ThreadTask implements Runnable {
    private final long endTime;

    public ThreadTask(long endTime) {
        this.endTime = endTime;
    }

    @Override
    public void run() {

        while (System.currentTimeMillis() <= endTime) {

            // do something meaningful

        }   
    }
}

public class TestPool {

    public static void main(String[] args) {

        // create thread pool with given size
        ExecutorService service = Executors.newFixedThreadPool(1000); 

        long startTime = System.currentTimeMillis();
        long endTime = startTime + (30 * 60 * 1000);

        for (int i = 0; i < threads; i++) {
            service.submit(new ThreadTask(endTime));
        }

        // wait for termination        
        service.shutdown();
        service.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS); 
    }
} 
```

**现在我的问题是——**

上面的代码是否保证每个线程同时启动并运行`30 minutes`？我不确定**将线程放入 Thread Pool 需要多少时间**。但看起来有些线程可能会启动得有点晚，并且它们不会完全运行`30 minutes`，可能不到 30 分钟。

> 我正在寻找每个线程应该同时启动并且它们应该准确地运行`30 minutes`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:15:43.080

**简短回答**：不，所有线程不会同时开始（取决于您的容差，它可能“相当”可以忽略不计）。并且取决于有意义的事情，每个线程运行恰好 30 分钟的可能性很小（再次在这里，您的时间粒度可能会使此断言错误）。

**线索**：

*   为确保最大限度地提高所有线程开始时彼此尽可能靠近的机会，请先创建线程，然后将其提交给执行程序。与其他语言一样，在 Java 中创建线程是一项昂贵的操作。
*   为了使线程精确运行 30 分钟，我建议每个线程自己计算其终止时间，因为您当前传递给构造函数的参数可能已经影响了您的精度（由于线程创建时间）。
*   通常不建议（除非您在怪物机器或微积分网格上运行 java）创建具有 1000 个线程的线程池。请记住，如果物理机的内核数不如线程数，那么每次 JVM 决定应该运行哪个线程时都会发生上下文切换。

**编辑**：

```
public class TestPool {

    public static void main(String[] args) {

        // create thread pool with given size
        ExecutorService service = Executors.newFixedThreadPool(10); 

        long startTime = System.currentTimeMillis();
        long endTime = startTime + (30 * 60 * 1000);

        ThreadTask[] threadTasks = new ThreadTask[threads];
        for (int i = 0; i < threads; i++) {
            threadTasks[i] = new ThreadTask(endTime);
        }

        for (ThreadTask tt : threadTasks) {
            service.submit(tt);
        }

        // wait for termination        
        service.shutdown();
        service.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS); 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T21:02:53.333

乍一看，这看起来像是一个有点不切实际的多线程练习项目。但是你说*我正在研究一个多线程程序*，这表明它有一个真实的应用程序背景。

如果是这样：不要仅仅因为可以就创建 1000 个线程。相反，说出你真正想要实现的目标。

关于您的要求：要以最小延迟几乎同时启动所有线程，您可以`prestartAllCoreThreads`使用`ThreadPoolExecutor`. 提交`// do something meaningful`在其 run 方法中具有的 Runnables。要将运行时间限制为 30 分钟，请安排一个 TimerTask，在 30 分钟后使用 shutdownNow 关闭 ThreadPoolExecutor。在创建 ThreadPoolExecutor 时，您可以使用一个固定大小的 BlockingQueue，其大小按照您想要的线程数的顺序排列，以避免提交过多的作业。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T04:43:52.407

考虑使用倒计时锁存器来实现最大并行度。基本上，您可以创建总计数为 1 的单例/静态 countdownLatch 并让多个线程等待相同的倒计时。检查下面我做了什么

指示线程开始时间的主线程。

```
package mylab.threads;

import java.util.TimerTask;
import java.util.concurrent.CountDownLatch;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class MainThread extends TimerTask {

    private static CountDownLatch countDown = new CountDownLatch(1);

    private ExecutorService es = Executors.newCachedThreadPool();

    @Override
    public void run() {

    try {

        Thread1 thread1 = new Thread1();
        thread1.setDoneSignal(countDown);
        es.submit(thread1);

        Thread2 thread2 = new Thread2();
        thread2.setDoneSignal(countDown);
        es.submit(thread2);

        System.out.println("waiting main.. ");
        synchronized(this) {
        this.wait(2000);
        }
        System.out.println("kick off threads..");
        countDown.countDown();

    } catch (InterruptedException e) {
        e.printStackTrace();
    }

    }

} 
```

定义要并行运行的线程

```
package mylab.threads;

import java.util.Date;
import java.util.TimerTask;
import java.util.concurrent.CountDownLatch;

public class Thread1 extends TimerTask{

    private CountDownLatch doneSignal = null;

    /**
     * @return the doneSignal
     */
    public CountDownLatch getDoneSignal() {
        return doneSignal;
    }

    /**
     * @param doneSignal the doneSignal to set
     */
    public void setDoneSignal(CountDownLatch doneSignal) {
        this.doneSignal = doneSignal;
    }

    @Override
    public void run() {

    try {
        this.doneSignal.await();
        System.out.println("get going thread 1 -"+new Date().getTime());
        synchronized(this) {
        this.wait(3000);
        }
        System.out.println("Exiting thread 1 - "+new Date().getTime());
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    }

}

package mylab.threads;

import java.util.Date;
import java.util.TimerTask;
import java.util.concurrent.CountDownLatch;

public class Thread2 extends TimerTask{

    private CountDownLatch doneSignal = null;

    /**
     * @return the doneSignal
     */
    public CountDownLatch getDoneSignal() {
        return doneSignal;
    }

    /**
     * @param doneSignal the doneSignal to set
     */
    public void setDoneSignal(CountDownLatch doneSignal) {
        this.doneSignal = doneSignal;
    }

    @Override
    public void run() {

    try {
        this.doneSignal.await();
        System.out.println("get going thread 2 -"+new Date().getTime());
        synchronized(this) {
        this.wait(3000);
        }
        System.out.println("Exiting thread 2 - "+new Date().getTime());
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    }
} 
```

最后运行主线程。

```
package mylab.threads;

public class ThreadTest {

    /**
     * @param args
     */
    public static void main(String[] args) {

    MainThread mt = new MainThread();
    mt.run();

    }

} 
```

这是输出

```
waiting main.. 
kick off threads..
get going thread 1 -1387513662107
get going thread 2 -1387513662107
Exiting thread 1 - 1387513665108
Exiting thread 2 - 1387513665108 
```

# ruby - 在 Windows 上安装 RubyInstaller 和 DevKit 后无法安装 rdiscount gem

> ID：15230814
> 
> 赞同：3
> 
> 时间：2013-03-05T17:57:11.083
> 
> 标签：ruby, rubygems

我在尝试在我的 Windows 7 机器上设置 RoR 时遇到了一些错误。我使用 RubyInstaller 和 DevKit 安装了 Ruby。在他们的指示中，它说要执行`gem install rdiscount --platform=ruby`以确保正确安装。我收到以下错误：

```
C:\Windows\system32>cd ../../DevKit

C:\DevKit>gem install rdiscount --platform=ruby
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing rdiscount:
        ERROR: Failed to build gem native extension.

    C:/Ruby200-x64/bin/ruby.exe extconf.rb
checking for random()... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of necessary
libraries and/or headers.  Check the mkmf.log file for more details.  You may
need configuration options.

Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=C:/Ruby200-x64/bin/ruby
        --with-rdiscount-dir
        --without-rdiscount-dir
        --with-rdiscount-include
        --without-rdiscount-include=${rdiscount-dir}/include
        --with-rdiscount-lib
        --without-rdiscount-lib=${rdiscount-dir}/
C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:431:in `try_do': The compiler failed to ge
nerate an executable file. (RuntimeError)
You have to install development tools first.
        from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:516:in `try_link0'
        from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:531:in `try_link'
        from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:717:in `try_func'
        from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:1001:in `block in have_func'
        from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:892:in `block in checking_for
'
        from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:337:in `block (2 levels) in p
ostpone'
        from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:307:in `open'
        from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:337:in `block in postpone'
        from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:307:in `open'
        from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:333:in `postpone'
        from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:891:in `checking_for'
        from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:1000:in `have_func'
        from extconf.rb:5:in `<main>'

Gem files will remain installed in C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rdisc
ount-2.0.7.1 for inspection.
Results logged to C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rdiscount-2.0.7.1/ext/
gem_make.out 
```

我已经尝试过[这个建议](https://github.com/oneclick/rubyinstaller/wiki/Troubleshooting#wiki-devkit_dll_conflict)，并删除了一个重复的`libiconv-2.dll`文件，但问题仍然存在。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T11:36:54.570

此时，RDiscount 在 Windows 上已损坏，请参阅[GitHub 上的问题 #74](https://github.com/rtomayko/rdiscount/issues/74)

如果您已经安装了 Ruby 和 DevKit，那么您可以安装其他 gem，例如`json`或`RedCloth`验证它是否正确编译：

```
gem install json --platform=ruby
gem install RedCloth --platform=ruby 
```

希望有帮助。

# ios - UIDocument 和 NSFileWrapper - 大文件需要很长时间才能保存，尽管有增量更改

> ID：15230818
> 
> 赞同：10
> 
> 时间：2013-03-05T17:57:31.537
> 
> 标签：ios, save, uidocument, nsfilewrapper

我有一个`UIDocument`基于 s 的应用程序`NSFileWrapper`来存储数据。“主”文件包装器包含许多附加的目录文件包装器，每一个都代表文档的不同页面。

当保存一个只修改了一小部分页面的大型文档`UIDocument`时，会在后台花费很长时间来编写更改（在 中`writeContents:andAttributes:safelyToURL:forSaveOperation:error:`）。当然，它应该只写出对文件包装器的这一小改动……什么花了这么长时间？

我的`contentsForType:error:`覆盖返回一个新的目录文件包装器，其中包含主文件包装器的内容（à la [WWDC 2012 Session 218 - Using iCloud with UIDocument](http://adcdownload.apple.com//wwdc_2012/wwdc_2012_session_pdfs/session_218__using_icloud_with_uidocument.pdf)）：

```
- (id)contentsForType:(NSString *)typeName error:(NSError *__autoreleasing *)outError
{
    if (!_fileWrapper) {
        [self setupEmptyDocument];
    }
    return [[NSFileWrapper alloc] initDirectoryWithFileWrappers:[_fileWrapper fileWrappers]];
} 
```

这是来自 Time Profiler 的堆栈跟踪的可爱图片：

![UIDocument 慢写堆栈跟踪](../Images/b9b8e05a6a278145d2815166c2b0a570.png)

顺便说一句，它说要在该工作线程中保存约 1.6 秒 - 在实际运行时间中，这相当于大约 8 秒。

* * *

**编辑：**

有什么方法可以检查文件包装器是否需要写入磁盘？只是这样我可以确认我没有做一些奇怪的事情，比如当我做一个小改动时更新每个子文件包装器（尽管我确定我不是......）。

* * *

**编辑：**

我进一步玩了 CloudNotes 示例应用程序，似乎`NSFileWrapper` *确实*实现了增量保存，至少在这种情况下是这样！我通过初始化一个包含 100 个注释的文档来测试它，每个注释包含大约 5MB 的数据。我在这里和那里做了一个小编辑（文本视图的单个字符更改将文档标记为需要保存），并大致记录了每次保存所用的时间。测试比较粗糙（在模拟器上运行），但结果是这样的：

*   第一次写入：~8000ms
*   第二次写入：~4000ms
*   第三次写入：~300ms
*   所有后续写入：~40ms

显然有很多因素会影响它所花费的时间，特别是因为它在后台线程中使用文件协调来节省，但总的来说，趋势似乎总是这种指数衰减，直到所有写入都变得非常快。

但我仍在试图弄清楚为什么这不会在我的应用程序中发生。对于一个大的多页文档（很大，但仍然比我上面执行的 CloudNotes 测试的文档小很多倍），用户可能要等待很多秒才能关闭文档。我不想为应该几乎是即时的事情设置一个微调器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T02:46:53.047

`NSFileWrapper`实际上是将整个文档加载到内存中。所以对于 a `UIDocument`，使用 an`NSFileWrapper`实际上并不适合大型文档。该文档使您认为它可以进行增量保存，但在我的情况下，它似乎没有这样做。

`UIDocument`不仅限于`NSFileWrapper`or `NSData`。你可以使用你自己的自定义类，你只需要重写某些方法。我最终编写了自己的文件包装器类，它仅引用磁盘上的文件并按需读取/写入单个文件。

这是我的`UIDocument`类使用自定义文件包装器的样子：

```
@implementation LSDocument

- (BOOL)writeContents:(LSFileWrapper *)contents
        andAttributes:(NSDictionary *)additionalFileAttributes
          safelyToURL:(NSURL *)url
     forSaveOperation:(UIDocumentSaveOperation)saveOperation
                error:(NSError *__autoreleasing *)outError
{
    return [contents writeUpdatesToURL:self.fileURL error:outError];
}

- (BOOL)readFromURL:(NSURL *)url error:(NSError *__autoreleasing *)outError
{
    __block LSFileWrapper *wrapper = [[LSFileWrapper alloc] initWithURL:url isDirectory:NO];
    __block BOOL result;
    dispatch_sync(dispatch_get_main_queue(), ^(void) {
        result = [self loadFromContents:wrapper
                                 ofType:self.fileType
                                  error:outError];
    });
    [wrapper loadCache];
    return result;
}

@end 
```

我将其用作基类并将其子类化用于其他项目。它应该让您了解如何集成自定义文件包装器类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-10-16T03:06:58.450

我知道这是一个非常古老的线程，但为了帮助未来的旅行者：在我的例子中，我有一个子目录 NSFileWrapper，它没有增量保存。

我发现，如果您制作 NSFileWrapper 的副本，则需要将副本的文件名、文件属性（可能还有首选文件名）设置为原始文件名，以便增量保存。复制完这些后，子文件夹的内容将逐步保存（即仅在替换为新的 NSFileWrappers 时才写入）。

苹果注意：说真的，整个 NSFileWrapper API 是一团糟，应该清理干净。

# html - 垂直对齐复选框标签？

> ID：15230820
> 
> 赞同：30
> 
> 时间：2013-03-05T17:57:54.547
> 
> 标签：html, css

我有这样的复选框：

```
<label class="checkbox-label"><input type="checkbox" value="115">Administrators</label> 
```

但我无法弄清楚如何将标签设置为与复选框居中对齐。

我尝试添加`vertical-align:middle;`

谢谢

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-03-05T18:12:20.763

这就是我对你的代码所做的。

**html**

```
<label class="checkbox-label"><input type="checkbox" value="115">-middle</label> 
```

**css**

```
label.checkbox-label input[type=checkbox]{
    position: relative;
    vertical-align: middle;
    bottom: 1px;
} 
```

[小提琴](http://jsfiddle.net/576wT/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T18:01:15.340

Try using:

```
vertical-align: text-bottom; 
```

## [jsFiddle](http://jsfiddle.net/kYyD4/)

**Edit:**

```
 <input id="checkbox" type="checkbox" value="115">
 <label class="checkbox-label" for="checkbox">Administrators</label> 
```

## [jsFiddle](http://jsfiddle.net/kYyD4/1/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-05T18:12:13.570

调整标签的行高。

# java - 获取内部类 Spring/Hibernate 的访问权限

> ID：15230821
> 
> 赞同：0
> 
> 时间：2013-03-05T17:57:55.267
> 
> 标签：java, spring, hibernate, inner-classes

我想要做的是调用一个内部类中的方法，当我尝试从其他类调用它时问题就开始了。假设我有一个 DlgSendSAP 类，它有一个名为 LongTask 的内部类，其中我有另一个名为 ActualTask​​ 的内部类，它有我想要调用的方法。这里有什么问题？我已经阅读了很多 Hibernate 和 Spring，并且我知道基础知识，但这让我发疯，我不知道是否是 IoC 的问题。任何帮助将不胜感激。

DlgSendSAP 类

```
public class DlgSendSAP {
  ...
  dlgCargarTxt = ((DlgCargarTxt) SpringContext.getContext().getBean(DlgCargarTxt.class));
                    try {
                        dlgCargarTxt.ejecutarTask();
                    } catch (Exception ex) {
                        ex.printStackTrace();
                    }
} 
```

DlgCargarTxt 类

```
public class DlgCargarTxt {
  private LongTask.ActualTask actualTask;
  ...
     public void ejecutarTask() throws FileNotFoundException, IOException {
      actualTask = ((LongTask.ActualTask) SpringContext.getContext().getBean(LongTask.ActualTask.class));
      actualTask.executeTask();
    } 
  class LongTask {
  ...
    class ActualTask {
      ...
      public void executeTask() {
      ...
      }
    }
  }
} 
```

当调用内部类 ActualTask​​ 中的 bean 时出现错误。

```
org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [dunosusa.pos.view.LongTask] is defined: expected single bean but found 0: 
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:271)
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1083)
    at dunosusa.pos.view.DlgCargarTxt.ejecutarTask(DlgCargarTxt.java:135)
    at dunosusa.pos.view.admin.DlgSendSAP.escogerArchivos(DlgSendSAP.java:63)
    at dunosusa.pos.view.admin.DlgSendSAP.<init>(DlgSendSAP.java:49)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:126)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:74)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:958)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:911)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:196)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:265)
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1083)
    at dunosusa.pos.controller.AccionController$ActionPerformed.actionPerformed(AccionController.java:392)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.AbstractButton.doClick(AbstractButton.java:357)
    at javax.swing.plaf.basic.BasicMenuItemUI.doClick(BasicMenuItemUI.java:1223)
    at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased(BasicMenuItemUI.java:1264)
    at java.awt.Component.processMouseEvent(Component.java:6263)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
    at java.awt.Component.processEvent(Component.java:6028)
    at java.awt.Container.processEvent(Container.java:2041)
    at java.awt.Component.dispatchEventImpl(Component.java:4630)
    at java.awt.Container.dispatchEventImpl(Container.java:2099)
    at java.awt.Component.dispatchEvent(Component.java:4460)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4574)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4238)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)
    at java.awt.Container.dispatchEventImpl(Container.java:2085)
    at java.awt.Window.dispatchEventImpl(Window.java:2478)
    at java.awt.Component.dispatchEvent(Component.java:4460)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:19:29.723

通过使用 SpringContext.getContext().getBean() - 您正在搜索 Spring 的 bean 池以获取您正在寻找的类。为了使 bean 在 Spring 的 bean 池中，您还必须将内部类定义为 bean。

我看到您正在使用 XML 进行配置。你应该像这样配置你的内部类：

```
<bean id="inner" class="innerbeans.Outer$Inner"> 
```

但是，同样，这不是很好的做法。为什么不直接提取类并使其成为自己的？

# cakephp - Cakephp - 找不到控制器

> ID：15230822
> 
> 赞同：5
> 
> 时间：2013-03-05T17:57:59.267
> 
> 标签：cakephp, cakephp-2.0

我不断收到此错误...想知道这意味着什么

```
Error: [MissingControllerException] Controller class CssController could not be found. 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T18:44:28.300

您似乎缺少 webroot 中的“css”目录或配置错误的 mod_rewrite；

默认的 CakePHP mod_rewrite 配置会将不存在的目录/文件“路由”到控制器和操作，例如

```
/some/path 
```

将被路由到

```
SomeController::path() 
```

如果您的 webroot 中*没有*“css”目录，那么；

```
/css/ 
```

将被路由到：

```
CssController::index() 
```

但是，由于您的应用程序中没有这样的控制器，因此会出现此错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-29T20:03:50.993

给那些调试这个问题的小提示。

thaJeztah 关于为什么会出现该错误是绝对正确的，但是出于调试目的，很难知道导致此错误的有问题的 css 路径在哪里。

如果您使用`$this->Html->css('path')`加载您的 css 文件（显然使用正确的路径），并且您在 webroot 中有您的 css 文件夹，如另一个答案中所述，那么请检查您的 css 文件。

在我的情况下，我用 firebug 进行了调试，但是我所有的 .css 加载时，没有红色错误表明无法加载 css 文件（这可能是导致此问题的原因）。所以我检查了我的css文件和指向不存在文件夹的背景网址

例子：

```
//Webroot folder dist
-- css
-- extras
   --img

mydiv {
    background: #626262 url(../img/web_top_bg.png);
} 
```

很明显，图像没有加载，但我没有注意到，因为它不是经常实例化的元素。解决该 url() 引用消除了 CssController 错误（并且，相关的，消除了有关仅在某些浏览器中对同一页面的[多个请求的](http://icanhascode.com/2008/06/the-mystery-of-the-multiple-requests/)[其他烦人的错误](https://stackoverflow.com/questions/2016784/pages-load-twice-on-firefox)（当您必须调试这些东西时，这不是很好。 ..））。

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-25T16:00:59.177

这有点太晚了，但我刚刚遇到了这个。@thajeztah 已通过详细解释正确回答了这个问题。

但是，在这里找到错误似乎是最大的问题，这些是我重现问题所采取的步骤。

1.  像创建任何其他控制器一样创建任何缺少的控制器。在这种情况下，我们创建 CssController
2.  创建第一个函数索引并编写一个简单的脚本来为您提供请求的完整路径。只是因为我很懒，我创建的脚本向我发送了一封电子邮件，其中包含请求的完整路径。

    ```
    class CssController extends AppController{
        public function beforeFilter(){
             $this->Auth->allow('index');
        }

        public function index(){
            $this->autoRender = false;
            $this->sendMail('myemail@address.com', 'Path', Router::url($this->here, true), array($this->adminEmail => $this->siteTitle));
        }
    } 
    ```

3.  现在打开终端并导航到 cake 错误日志文件夹，`app/tmp/logs/`然后执行`tail -100 error.log`或`use grep CssController error.log | grep 2019-11-25`获取 CssController 在日期 2019-11-25 的错误日志，将日期替换为当前日期以限制错误日志。

4.  您现在将获得所有缺少的所谓必需的操作，您将像上面的索引函数一样创建这些操作，然后记录原始请求的路径或使用该路径向您自己发送电子邮件。

5.  这应该可以帮助您从 css 中找到所有未正确路由的文件。

**就我而言，我们已经下载了很棒的字体图标并将它们包含在我们的模板中。然而，Font Awesome 需要其他文件，这些文件不在我们的服务器上，这导致了错误。请看下面**

```
@font-face {
    font-family: "Font Awesome 5 Brands";
    font-style: normal;
    font-weight: normal;
    font-display: auto;
    src: url(../webfonts/fa-brands-400.eot);
    src: url(../webfonts/fa-brands-400.eot?#iefix) format("embedded-opentype"), url(../webfonts/fa-brands-400.woff2) format("woff2"), url(../webfonts/fa-brands-400.woff) format("woff"), url(../webfonts/fa-brands-400.ttf) format("truetype"), url(../webfonts/fa-brands-400.svg#fontawesome) format("svg")
} 
```

如上所示，我们正在尝试加载`src: url(../webfonts/fa-brands-400.eot);` 不在我们服务器上的内容。

干杯!

# javascript - 使用 jquery 动态选择多选列表框中的所有项目

> ID：15230824
> 
> 赞同：3
> 
> 时间：2013-03-05T17:58:03.063
> 
> 标签：javascript, jquery, asp.net

我对使用 Javascript/Jquery 非常陌生，因此感谢您的阅读和您对可能是一个简单问题的耐心。这是一个多层次的问题，所以让我解释一下。

我有几个数据绑定的 ASP 列表框。我还有几个复选框，每个列表框一个。我使用 Javascript 连接了复选框，以在单击时选择或取消选择所有列表框项目。

我的目标是构建一个方法，将复选框及其相应的列表框传递给 javascript 方法，然后选择或取消选择列表框中的所有内容。我可以在 C# 中非常简单地做到这一点，但我们不能使用回发，因为页面已经很慢而且很复杂。

所以这已经在 J​​avascript 中工作了（我将在下面发布我的代码），但我遇到的问题是，当我们有一个更长的列表框（即 20 多个列表项）时，IE 基本上会让你看着它滚动浏览所有这些并选择它们。Chrome 没有这个问题，而 Firefox 至少要快很多，但 IE 是我们 75% 以上的客户使用的浏览器。

ASP：

```
<asp:ListBox ID="StatusListBx" runat="server" DataSourceID="StatusLds" 
    DataTextField="Status" DataValueField="StatusID"  Width="140px" Height="55px" AppendDataBoundItems="true"
    SelectionMode="Multiple"/> 
<asp:LinqDataSource ID="StatusLds" runat="server" 
    ContextTypeName="ElementDataConnector.ElementDBDataContext" 
    Select="new (StatusID, Status)" Where="StatusID < 4" TableName="Lookup_Status" >
</asp:LinqDataSource>
<br />
<asp:CheckBox id="SelectAllProjectStatusChkbx" runat="server" Text="Select All" /> 
```

C＃：

```
protected void Page_Load(object sender, EventArgs e)
{
    SelectAllProjectStatusChkbx.Attributes.Add("onclick", "selectDeselect(" + StatusListBx.ClientID + ",this)");
} 
```

Javascript：

```
function selectDeselect(listbox, checkbox) {
    if (checkbox.checked) {
        var multi = document.getElementById(listbox.id);
        for (var i = 0; i < multi.options.length; i++) {
            multi.options[i].selected = true;
        }
    } else {
        var multi = document.getElementById(listbox.id);
        multi.selectedIndex = -1;
    }
} 
```

（我已经为每个适用的列表框/复选框组合复制了这个 - 这是一个可扩展的任务）

所以对于实际问题：

1.  如果我使用 JQuery 而不是 Javascript 来实现这个功能，我能避免整个“滚动/选择”效果吗？

2.  如果我可以避免这种滚动效果，我如何动态地将列表框传递给 JQuery，而不必为每个列表框/复选框组合编写自定义方法？

感谢您阅读并感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-03T16:57:02.340

看看这篇文章：

[http://www.craiglotter.co.za/2010/02/26/jquery-select-all-options-in-a-multiple-select-listbox/](http://www.craiglotter.co.za/2010/02/26/jquery-select-all-options-in-a-multiple-select-listbox/)

jQuery：选择多选列表框中的所有选项

```
$("#multipleselect option").prop("selected",true); 
```

一个多选列表框，其中已经为您选择了所有内容！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T20:00:26.127

我手头没有 IE 来检查您所指的滚动效果，但它应该很容易让您测试。你可以保留你的 selectDeselect 函数，但它可能会变成这样（假设 jQuery ~ 1.7.2+）：

```
function selectDeselect(listbox, checkbox) {
    var select_all = $(checkbox).prop('checked') ? true : false;
    var select = $(listbox);
    $('option', select).prop('selected', select_all);
} 
```

我希望非 jQuery 代码更快，但试一试......

**编辑：**以上在 IE 中也很慢。

我不喜欢这种方法，但您可以尝试在选择下拉列表中替换实际的 HTML。就像是：

```
function selectDeselect(listbox, checkbox) {
    var select_all = $(checkbox).prop('checked') ? true : false;        
    var select = $(listbox);    
    if (select_all) {
        var clone = select.clone();
        $('option', clone).attr('selected', select_all);
        var html = clone.html();
        select.html(html);
    }
    else $('option', select).removeAttr('selected');    
} 
```

它似乎在 IE9 中工作：[jsfiddle](http://jsfiddle.net/eNJMK/4/)

# css - 水平滚动ie9问题

> ID：15230826
> 
> 赞同：0
> 
> 时间：2013-03-05T17:58:12.393
> 
> 标签：css, internet-explorer

我在 div 中有内容需要能够水平滚动，但在 IE9 中不起作用（总是 IE ！！！）

`position: relative;`我用谷歌搜索了这个问题，在 CSS 中应用时似乎是个问题

问题是，我需要使用这个 CSS 规则确保在溢出时隐藏这个 DIV 中的所有内容（这是由于我正在使用的 jsPlumb 插件上的 z-indoex）

这是我应用于 DIV 的 CSS：

```
#workflowMain
{
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    vertical-align: middle;
    clear: both;
    padding-top: 12px;
    overflow: auto;
    position: relative;
} 
```

如果我取消相对位置，滚动工作正常，但是 div 内的一些元素出现在 div 之外。

是否有针对 IE 中的溢出和相对位置的修复或实现此目的的不同方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:44:48.663

*问题*：问题是，当内容溢出时，我需要使用此 CSS 规则确保此 DIV 中的所有内容都隐藏。

*解决方案*：始终放置宽度和高度，而`%`不是始终使用定义的`px`值

```
#workflowMain
{
width: 200px;
height:100px;
margin-left: auto;
margin-right: auto;
vertical-align: middle;
clear: both;
padding-top: 12px;
overflow: auto;
position: relative;
} 
```

# design-patterns - MVC 向导应用程序的模式

> ID：15230827
> 
> 赞同：2
> 
> 时间：2013-03-05T17:58:13.313
> 
> 标签：design-patterns, asp.net-mvc-4

在一个 ASP.NET MVC 应用程序中，我正在为一个分步信息收集序列创建一个向导，该序列由每个屏幕/视图/页面中的许多不同字段组成。

我打算在后台异步保存信息。

什么是模式推荐：

1.基于向导的序列本身？

2.信息的增量保存？

在 ASP.NET MVC 中是否有针对典型向导（如此类应用程序）的推荐/模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T10:00:43.313

我是一个 Java 人，但我想我会分享我最近采用的一种可能有用的向导类型流程的方法。

首先，流程中的某些页面仅适用于其他页面的输入，并且整个事情严重依赖可能更改的后端数据（例如，用户启动流程，将其保存为草稿并返回到它，但现在后端数据发生了变化，现在需要一些以前不需要的用户输入）。

为了处理所有这些，我将后端代码与页面流分离——后端代码（也称为服务层）不知道用户在哪个页面上，不知道哪些页面上有哪些字段，也不知道哪个页面将用户发送到下一个。它所做的只是通过向导验证用户正在填充的整个数据结构（不管用户是否已经访问了数据结构的一部分）。每个未通过验证的数据元素都附加了一个错误。前端代码（即控制器层）只是查找这些错误并确定页面序列中可以解决任何错误的第一页并将用户发送到该页面。如果用户刚刚发布了该页面（并且服务层已将错误添加到由该页面上的字段表示的数据元素），

这种方法的缺点是服务层正在运行甚至不适用的验证（因为它不知道用户在过程中的位置）但它有一个巨大的优势 - 字段可以在页面之间移动，重新排序的页面，您命名它，并且不必触及服务层。唯一需要改变的是控制器层中错误之间的映射以及用于解决错误的页面。

在经历了对该向导进行了重大更改的项目的多个版本之后，该设计具有令人难以置信的弹性（抱歉，我对此感到有点自豪）。

我对你问题的另一部分没有任何建议，因为我从来没有大规模做过，但我相信你知道，你只想 AJAX 在字段时将字段值发送到服务器失去焦点（或根据控件进行单击）并更新您的模型。如果我要使其适合我的设计，我将只执行域验证（例如，它是否可解析为日期）并将其写入数据库而不经过服务层验证，然后只有当它们点击继续时才执行我运行我的服务层验证（此时他们可能会看到错误，例如“您输入的日期必须早于今天”）。我有一个类似的要求 - 他们可以随时保存他们的工作，只要我可以将他们的数据写入数据库（我不能将“abc”存储到日期字段中），

# javascript - 计时器后的jQuery动画只工作一次

> ID：15230828
> 
> 赞同：0
> 
> 时间：2013-03-05T17:58:14.123
> 
> 标签：javascript, jquery, animation

我正在做一个基于网络的测验，我希望每次我的计时器栏宽度设置为 0 时触发 leftScroll jQuery 动画。但是它只在第一次工作。我知道这是因为它总是针对第一个`.qAnswers a`我如何让它每次都触发下一个？

链接： http: [//www.carlpapworth.com/friday-quiz/#](http://www.carlpapworth.com/friday-quiz/#)

JS：

```
timesUp();

function timesUp(){
            $('#timerBar').animate({'width':'0px'}, 1500, function(){
                nextQuestion(function(){
                    resetTimer();
                }); 
            });                 
}

function nextQuestion(event){
    var $anchor = $('.qAnswers a');
     $('#qWrap').stop(true, true).animate({
        scrollLeft: $($anchor.attr('href')).position().left
        }, 2000, function(){
            nextCount();
            $anchor = $anchor.next('.qContainer a');
        });  

}

function resetTimer(){
    $('#timerBar').css('width', '99%');
    timesUp();
} 
```

单击“答案”时，我正在使用此 JS 来触发动画：

```
$('.qAnswers li a').bind('click',function(event){
                    $(this).parent().addClass('selected');
                        var $anchor = $(this);
                        $('#qWrap').stop(true, true).delay(800).animate({
                            scrollLeft: $($anchor.attr('href')).position().left
                        }, 2000, function(){
                nextCount();
                        });
                        stopTimer();
                        event.preventDefault();
                    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:21:46.297

[试试这个简化的小提琴](http://jsfiddle.net/FwB4g/1/)

问题在这里：

```
nextQuestion(function(){
    resetTimer();
 }); 
```

您不能将回调函数传递给 nextQuestion。我猜你想在显示下一个问题时重置计时器。

如果是这种情况，只需将`resetTimer()`调用函数放入`animate()`

这是代码，您需要对其进行调整。

```
timesUp();

function timesUp() {
    $('#timerBar').animate({
        'width': '0px'
    }, 5000, function () {
        nextQuestion();

    });
}

function nextQuestion(event) {
    resetTimer();
    /*
    var $anchor = $('.qAnswers a');
    $('#qWrap').stop(true, true).animate({
        scrollLeft: $($anchor.attr('href')).position().left
    }, 2000, function () {
        nextCount();
        resetTimer();
        $anchor = $anchor.next('.qContainer a');
    });
    */

}

function resetTimer() {
    $('#timerBar').css('width', '100%');
    timesUp();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:25:06.313

您可以添加一个计数器以了解选择哪个锚点：

```
var counter = 0;
function nextQuestion(event){
    var $anchor = $('.qAnswers a');

    // try to see the good anchor
    console.log($anchor[counter]);

     $('#qWrap').stop(true, true).animate({
        scrollLeft: $($anchor.attr('href')).position().left
        }, 2000, function(){
            nextCount();
            $anchor = $anchor.next('.qContainer a');
        }); 
     counter ++; 
} 
```

# ajax - stop propagation of an ajax action-link in asp .net mvc

> ID：15230830
> 
> 赞同：4
> 
> 时间：2013-03-05T17:58:15.500
> 
> 标签：ajax, asp.net-mvc, partial-views, actionlink, stoppropagation

I have a table in my code with action links to make updates and deletes of some data. And this table is inside a div that has to change when i make the updates or deletes.

The problem is: when i click those actionlinks, i have some ajax propagation. I tried to stop that propagation linking the click event with the jquery method stopPropagation. And it works, but when the page loads, it loads only with the elements of the partial view. So i have no order in the elements, and it does not use the layout. Even, the url changes into the one specified in the ajax options of the actionlink. When i do not use the stop propagation, it works well and all the elements loads well, using the layout, but the propagation exists (the more i use the page, it gets slower, so is a problem)

View Page:

```
<div id="divToUpdate">
 @using (Ajax.BeginForm("LanguageSkills", "Employee",
                            new AjaxOptions
                            {
                                OnFailure = "searchFailed",
                                HttpMethod = "POST",
                                UpdateTargetId = "divtoUpdate",
                                OnBegin = "validateForm",
                            }))
{ 
    Html.RenderPartial("PartialViewButtons");
    Html.RenderPartial("PartialViewLanguageSkillsForm", Model);
}
 @if (ViewBag.Languages == 1)
    { Html.RenderPartial("PartialViewLanguageTable"); }
</div> 
```

Partial View with the table:

```
<table id="LanguageTable">
    <tr>
        <th align="center">Language</th>
        <th align="center">Skill 1</th>
        <th align="center">Skill 2</th>
        <th align="center">Skill 3</th>
        <th align="center">Skill 4</th>
    </tr>

 @foreach (var item in  (List<Project.Models.Language>)ViewBag.LanguageSkills)
 {
    <tr>
        <td align="center">
            @Html.DisplayFor(modelItem => item.Language.Language1)
        </td>
        <td align="center">@Html.DisplayFor(modelItem => item.Skill1)</td>
        <td align="center">@Html.DisplayFor(modelItem => item.Skill2)</td>
        <td align="center">@Html.DisplayFor(modelItem => item.Skill3)</td>
        <td align="center">@Html.DisplayFor(modelItem => item.Skill4)</td>
    </tr>

        @Ajax.ActionLink("Modify", "ModifyLanguage", "Employee", new { id = item.LanguageId},  
                            new AjaxOptions {
                                UpdateTargetId = "divtoUpdate",
                                OnBegin = "validateForm",
                               HttpMethod="GET"
                            }, new {@class = "ModifyLink"})

         @Ajax.ActionLink("Delete", "DeleteLanguage", "Employee", new { id = item.LanguageId },
                            new AjaxOptions {
                               HttpMethod="POST",
                            }, new { @class = "DeleteLink" })
        </td>
    </tr>
}
</table> 
```

And Finally the javascript in the Partial View:

```
$($('.ModifyLink')).load(function (event) {
        event.stopImmediatePropagation();
    }); 
```

# c# - 序列化结构列表并将结果放入数据表有什么问题吗？

> ID：15230832
> 
> 赞同：0
> 
> 时间：2013-03-05T17:58:19.523
> 
> 标签：c#, serialization, datatable

序列化结构列表并将结果放入数据表有什么问题吗？DataTable 最终将被转换为 XML 并用于存储。DataTable 是遗留的，不能用其他东西代替。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:35:25.467

据我所知，它没有任何问题。我无法通过 MSDN 或其他地方找到任何大小限制。但是，根据列表和结构的大小，您可能希望将它的每个对象写入流，这样您就不必在内存中一次处理整个事情。

# django - 连接mysql和python3.3

> ID：15230835
> 
> 赞同：0
> 
> 时间：2013-03-05T17:58:34.420
> 
> 标签：django, python-3.x, mysql-python

我是 django 的新手，使用了 usind django 1.5 和 python 3.3。有什么方法可以在 python 3.3 上安装 mysqlDB（或）有没有其他方法可以连接它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:05:46.630

[PyMySQL](https://github.com/petehunt/PyMySQL)是一个纯 python 客户端库，不依赖于标准 mysql 客户端库，通过构建脚本支持 Python 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T18:16:29.863

你试过这个吗？ [http://dev.mysql.com/downloads/connector/python/](http://dev.mysql.com/downloads/connector/python/) 用于安装 mysql 连接器的 windows msi 包没有任何问题，并且似乎适用于 1.0.10（在 windows 2008 R2 和 python 3.3 上）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-05T18:00:53.103

您可以使用[https://github.com/PyMySQL/PyMySQL](https://github.com/PyMySQL/PyMySQL)或 [http://dev.mysql.com/doc/connector-python/en/connector-python-versions.html](http://dev.mysql.com/doc/connector-python/en/connector-python-versions.html)

第二个连接器不支持旧的 MySQL Server 身份验证方法，这意味着 4.1 之前的 MySQL 版本将无法工作。

# c# - 如何正确地将对象添加到上下文处理重复项？

> ID：15230839
> 
> 赞同：0
> 
> 时间：2013-03-05T17:58:53.300
> 
> 标签：c#, entity-framework, entity-framework-4

我正在使用 Entity Framework 4.4，并且我有一个像这样的一对多关系模型：

```
class A { 
   public int Id { get; set; }
   public virtual B { get; set; }
   public int BId;
}
class B {
   public Id { get; set; }
   private ICollection<A> _As;
   public virtual ICollection<A> As
   {
      get { return _As ?? (_As = new HashSet<A>()); }
      protected set { _As = value; }
   }
} 
```

现在，假设我有 2 个 A 实例，都具有相同的 B 实例。然后我会有这样的东西（JSON表示）：

```
A: { Id: 1, BId: 1, B: { Id: 1, As: [ 1, 2 ] } }
A: { Id: 2, BId: 1, B: { Id: 1, As: [ 1, 2 ] } } 
```

然后我想循环浏览我当前的 A 实例列表并将其添加到数据库上下文中：

```
foreach (var a in LocalAList)
{ 
   dbContext.Add(a);
   dbContext.SaveChanges();
} 
```

问题是我收到异常通知我插入了重复的对象。我环顾四周，发现处理实体修改和附件的事情，但我对 EF 还是很陌生。我想这是一个典型的事情，并且有一个习惯用法来处理对象已经存在的对象插入。

如何在避免添加重复项的同时有效地将新对象添加到上下文中？我应该只捕获重复的异常并忽略它吗？有没有更好的检查方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:00:46.880

您可以做一个简单的测试来查看数据库中是否已经存在，最简单的测试是查看 Id 是否为 0。这是因为一旦将 A 添加到数据库中，就会为您的实体提供一个 Id。此时，您应该重新附加它而不是重新添加它

例子：

```
foreach (var a in LocalAList)
{ 
  if (a.Id == 0)
    dbContext.Add(a);
   else 
    dbContext.As.Attach(a)

   dbContext.SaveChanges();
} 
```

# git - git 分支工作流

> ID：15230842
> 
> 赞同：3
> 
> 时间：2013-03-05T17:59:05.043
> 
> 标签：git, branch, branching-and-merging

我无法弄清楚如何管理我的项目中的分支。我一直在研究一个功能分支“loads”，它是从“dev”分支出来的。自从分支以来，“dev”已经向前推进了一些提交。现在，另一位开发人员从最新的“开发”提交开始了一个新的功能分支“工作”。问题是“工作”中的功能取决于“负载”中的功能。“loads”中的这个功能已经完成，但是“loads”分支作为一个整体还没有“完成”。

基本上，我想做的是使“负载”中的最新更改可用于“工作”，而不会结束“负载”分支的生命周期。

这是树现在的样子：

```
 (loads:A) -> (loads:B)
      /
(dev:A) -> (dev:B) -> (dev:C)
                            \
                             (work:A) 
```

这是我*认为*我需要做的

```
 (loads:A)  ->  (loads:B)  -> (loads:C) //continue work on "loads"
      /                         \
(dev:A) -> (dev:B) -> (dev:C) -> (dev:D)
                            \            \
                             (work:A) -> (work:B) //use "loads" features in "work" 
```

我只是有点不确定合并的确切顺序以及如何完成此操作。上次我试图合并分支时，我把事情搞砸了，花了一整天的时间来恢复，我真的不想再经历一次了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:15:01.737

```
git checkout loads
//after making code changes
git commit -am "latest changes on loads"

//This will replay your current changes on top of the existing dev
git rebase origin/dev

//Possible merge conflicts might have to address them

//after resolving conflicts
git push origin dev 
```

其他开发人员可以提交他的更改，如果他已经在工作中进行了更改并将它们重新定位到 dev，或者他可以从 dev 中提取您的更改并创建一个新的功能分支并从那时起继续。

# perl - 使用 Forks::Super 将在孙子进程中执行的进程的值返回给子进程

> ID：15230850
> 
> 赞同：1
> 
> 时间：2013-03-05T17:59:34.697
> 
> 标签：perl, fork

我正在寻找一种解决方案来运行创建自己的子进程的异步子进程。

孙子进程通常运行一个 shell 命令，子进程需要其结果。

我想使用[`Forks::Super`](https://metacpan.org/module/Forks%3a%3aSuper)，因为它包含其他有趣的功能。

下面的代码有效，但有警告说无法删除子临时文件。

我做错了什么？

```
use Forks::Super ':all';
$Forks::Super::CHILD_FORK_OK = 1;
use Proc::ProcessTable;

my %result;
for (;;) {
    $cnt++;
    if (($cnt %= 5) eq 0) {    #Start child if modulo 5 eq 0 (demo trigger)
        $child_pid = fork { sub => \&startChild };
        $result{$child_pid} = undef;     # We use only the hash key as identifier, the value is reserved for later usage
    }
    for my $pnt (sort keys %result) {    #maintain our internal process hash
        if (!&checkProcess($pnt)) {      #check our running childs
            print "PID $pnt has gone\n";
            delete $result{$pnt};
        }
    }
    sleep 1;
}    #endless

sub startChild {
    print "Starting Child $$\n";
    tie my @output, 'Forks::Super::bg_qx', qq["date"];
    sleep 2 + rand 7;
    print "Result was $output[0]\n";
    print "End  Child $$\n";
}

sub checkProcess {
    $tobj = new Proc::ProcessTable;
    $proctable = $tobj->table();
    for (@$proctable) {
        if ($_->pid eq $_[0]) {
            print "Found Child with PID $_[0]\n";
            return 1;
        }
    }
    return undef;
} 
```

输出对于评论字段来说太长了，这是最近的错误行：

```
Child 2767 had temp files!
    /usr/local/dev/threading/.fhfork2767/README.txt
    /usr/local/dev/threading/.fhfork2767/.fh_001
    /usr/local/dev/threading/.fhfork2767/.fh_002.signal
    /usr/local/dev/threading/.fhfork2767/.fh_003
    /usr/local/dev/threading/.fhfork2767/.fh_004.signal
    at /usr/local/share/perl/5.10.1/Forks/Super/Job/Ipc.pm line 3115

Forks::Super::Job::Ipc::deinit_child() called
    at /usr/local/share/perl/5.10.1/Forks/Super/Job.pm line 1857 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:18:48.757

这些只是警告消息，如果你设置它们是多余的`$Forks::Super::CHILD_FORK_OK > 0`。

如果他们打扰您，请删除该行（第 3115 行`Forks/Super/Job/Ipc.pm`）或将其更改为类似

```
Carp::cluck("Child $$ had temp files! @IPC_FILES\n")
unless $Forks::Super::CHILD_FORK_OK >= 0; 
```

`Forks::Super`我会在下一个版本中清理它。

# javascript - AngularJS 为所有条目切换 ngShow

> ID：15230851
> 
> 赞同：2
> 
> 时间：2013-03-05T17:59:34.670
> 
> 标签：javascript, angularjs, coffeescript, angularjs-scope

对于每个“条目中的条目”，我都有一个将 ng-show 切换为 true 的按钮，并显示有关条目的详细信息。目前，此代码将每个条目切换为 ng-show=true。我希望每个按钮仅切换其所在条目的详细信息。

我的观点：

```
<h1>Listing Projects</h1>
<ul class="unstyled">
    <li ng-repeat="entry in entries" ng-init="entryClass=isClass(entry.isProject)">
        <ul class="unstyled">
            <li>
                <div class="alert" ng-class="entryClass">
                    <h3>{{entry.title}}</h3>
                    <button ng-click="toggleShow()">Details</button>
                    <div style="background-color:#000000; min-width:100px; min-height:100px;" ng-show="showThis">
                    </div>
                </div>
            </li>
        </ul>
    </li>
</ul> 
```

AngularJS：

```
app = angular.module("Resume", ["ngResource"])

app.factory "Entry", ["$resource", ($resource) ->
  $resource("/entries")
]

@EntryCtrl = ["$scope", "Entry", ($scope, Entry) ->
  $scope.entries = Entry.query()
  $scope.showThis = false

  $scope.isClass = (isProject) ->
    if isProject == true
      $scope.myVar = "project alert-info"
    else
      $scope.myVar = "tech alert-success"

  $scope.toggleShow = ->
    if $scope.showThis == false
      $scope.showThis = true
    else
      $scope.showThis = false
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:31:32.610

将条目传递给您的函数：

```
$scope.toggleShow = (entry) ->
    entry.showThis = !entry.showThis 
```

```
<button ng-click="toggleShow(entry)">Details</button>
<div ng-show="entry.showThis">stuff here</div> 
```

* * *

或者，您*可以*在标记中处理整个事情：

```
<button ng-click="entry.showThis = !entry.showThis">Details</button>
<div ng-show="entry.showThis">stuff here</div> 
```

* * *

*或者*，您可以使用`$index`一个单独的对象：

```
$scope.showEntry = {}

$scope.toggleShow = (index) ->
    $scope.showEntry[index] = !$scope.showEntry[index] 
```

```
<button ng-click="toggleShow($index)">Details</button>
<div ng-show="showEntry[$index]">stuff here</div> 
```

因此，您有几个选择。快乐编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:46:07.677

您的 $scope.showThis 变量用作所有条目的参考。因此，当您为一个条目更改它时，所有其他条目也会更改。

您的`isClass`功能也没有做太多，因为您实际上并没有在`myVar`任何地方使用。那个“myVar”变量告诉我你正在尝试遵循[ng-class 文档](http://docs.angularjs.org/api/ng.directive%3angClass)，但我担心你会偏离轨道。

这可能是您希望 HTML 的样子：

```
<h1>Listing Projects</h1>
<ul class="unstyled">
  <li ng-repeat="entry in entries">
    <ul class="unstyled">
      <li>
       <div class="alert" ng-class="{true: 'project alert-info', false: 'tech alert-success'}[entry.isProject]">
          <h3>{{entry.title}}</h3>
          <button ng-click="toggleShow($index)">Details</button>
          <div style="background-color:#000000; min-width:100px; min-height:100px;" ng-show="shouldShow($index)">
          </div>
        </div>
      </li>
    </ul>
  </li>
</ul> 
```

这是上面 HTML 的匹配控制器：

```
app.controller('AppController',
  [
    '$scope',
    function($scope) {
      $scope.entries = [
        {isProject: false, title: 'Entry1'}, 
        {isProject: true, title: 'Entry2'}
      ];
      var visible = [];

      $scope.toggleShow = function(index){
        position = visible.indexOf(index);
        if(position===-1) {
          visible.push(index);
          return;
        }
        visible.splice(position, 1);
      };

      $scope.shouldShow = function(index){
        return visible.indexOf(index) != -1;
      };

    }
  ]
); 
```

[普朗克](http://plnkr.co/edit/4uuFACyFt1ShEfeOnk4s)

# .net - SerialPort DataReceivedHandler 事件与 BytesToRead 不匹配

> ID：15230856
> 
> 赞同：1
> 
> 时间：2013-03-05T17:59:56.200
> 
> 标签：.net, vb.net, serial-port

使用以下代码时：

```
 Private Sub DataReceivedHandler(ByVal sender As Object, ByVal e As SerialDataReceivedEventArgs)

    Dim sp As SerialPort = CType(sender, SerialPort)

    Debug.WriteLine("DataReceivedHandler() - Data Received! number of bytes=" & sp.BytesToRead)
    Dim indata As String = sp.ReadExisting()

    Debug.WriteLine("DataReceivedHandler() - indata=" & TTSHelperFunctions.StringToHex(indata))

End Sub 
```

什么可能导致`sp.BytesToRead`指示的字节数比`indata`在调试输出中显示变量时少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:18:42.963

Debug.WriteLine() 非常慢。串行端口在执行时将继续接收字节。因此，之后获得更多字节是一种明显的可能性。

# java - 在java中获取没有时间戳的日期

> ID：15230857
> 
> 赞同：-2
> 
> 时间：2013-03-05T18:00:01.207
> 
> 标签：java, mysql

java - 如何在java中获取没有时间戳的日期实例？例如：2013-05-23（日期实例）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:06:01.683

创建一个 Calendar 对象来存储日期，清除时间字段，然后获取结果日期：

```
Calendar cal = Calendar.getInstance();
cal.setTime(dateYouWantToTruncate);
cal.clear(Calendar.HOUR);
cal.clear(Calendar.MINUTE);
cal.clear(Calendar.SECOND);
cal.clear(Calendar.MILLISECOND);
Date dateOnly = cal.getTime(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T18:11:58.920

如果您只想打印日期，请使用：

```
 DateFormat.getDateInstance().format(new Date()); 
```

或者

```
 DateFormat.getDateInstance(DateFormat.SHORT).format(new Date()); 
```

# actionscript-3 - Getting a null object reference error when navigating back to another frame

> ID：15230858
> 
> 赞同：-3
> 
> 时间：2013-03-05T18:00:04.340
> 
> 标签：actionscript-3, flash, drag-and-drop

I really need help, I've been stuck on this problem for the pass 2 days. I keep getting this error when navigating back to another frame!

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at product_fla::MainTimeline/frog_mcRelease() 
```

the frog_mc keeps going onto another frame!! don't know whats wrong.

thanks

my code:

```
import flash.events.Event;

right_mc.visible=false; 
wrong_mc.visible=false;

var orig1X:Number=frog_mc.x;  
var orig1Y:Number=frog_mc.y;
var orig2X:Number=queen_mc.x;
var orig2Y:Number=queen_mc.y;
var orig3X:Number=apple_mc.x;
var orig3Y:Number=apple_mc.y; 

stage.removeEventListener(Event.ENTER_FRAME, frog_mcRelease);

frog_mc.addEventListener(MouseEvent.MOUSE_DOWN, dragTheObject);
frog_mc.addEventListener(MouseEvent.MOUSE_UP, frog_mcRelease);
queen_mc.addEventListener(MouseEvent.MOUSE_DOWN, dragTheObject);   
queen_mc.addEventListener(MouseEvent.MOUSE_UP, queen_mcRelease);   
apple_mc.addEventListener(MouseEvent.MOUSE_DOWN, dragTheObject);    
apple_mc.addEventListener(MouseEvent.MOUSE_UP, apple_mcRelease);    

done_btn.addEventListener(MouseEvent.CLICK, checkAnswers);    
reset_btn.addEventListener(MouseEvent.CLICK, reset);

frog_mc.buttonMode=true;    
queen_mc.buttonMode=true;    
apple_mc.buttonMode=true;

function dragTheObject(event:MouseEvent):void { 
    var item:MovieClip=MovieClip(event.target); 
    item.startDrag(); 
    var topPos:uint=this.numChildren-1; 
    this.setChildIndex(item, topPos);   
}  

function frog_mcRelease(event:MouseEvent):void { 
    var item:MovieClip=MovieClip(event.target); 
    item.stopDrag();       
    if (drop_frog.hitTestPoint(item.x,item.y)) { 
        item.x=drop_frog.x; 
        item.y=drop_frog.y; 
    } else { 
       item.x=orig1X; 
       item.y=orig1Y; 
    } 
};    

function queen_mcRelease(event:MouseEvent):void { 
    var item:MovieClip=MovieClip(event.target); 
    item.stopDrag();   
    if (drop_queen.hitTestPoint(item.x,item.y)) { 
        item.x=drop_queen.x; 
        item.y=drop_queen.y; 
    } else { 
        item.x=orig2X; 
        item.y=orig2Y; 
    } 
};    

function apple_mcRelease(event:MouseEvent):void { 
    var item:MovieClip=MovieClip(event.target); 
    item.stopDrag();   
    if (drop_apple.hitTestPoint(item.x,item.y)) { 
        item.x=drop_apple.x; 
        item.y=drop_apple.y; 
    } else { 
        item.x=orig3X; 
        item.y=orig3Y; 
    } 
};  

function checkAnswers(event:MouseEvent):void { 
    if (drop_frog.hitTestPoint(frog_mc.x,frog_mc.y) && 
            drop_queen.hitTestPoint(queen_mc.x,queen_mc.y) && 
            drop_apple.hitTestPoint(apple_mc.x,apple_mc.y)) {
        wrong_mc.visible = false;
        right_mc.visible = true;
    } else {
        wrong_mc.visible = true;
        right_mc.visible = false;
    }
}

function reset(event:MouseEvent):void { 
    frog_mc.x=orig1X; 
    frog_mc.y=orig1Y;     
    queen_mc.x=orig2X; 
    queen_mc.y=orig2Y;
    apple_mc.x=orig3X; 
    apple_mc.y=orig3Y; 

    right_mc.visible=false; 
    wrong_mc.visible=false; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:06:41.357

var item:MovieClip=MovieClip(event.target);

我认为您应该首先像这样创建对 MovieClip 的新引用

var item:MovieClip = new MovieClip();

我认为这应该可以解决问题

# c - C：错误：在 ';' 之前应为 ')' 令牌

> ID：15230860
> 
> 赞同：16
> 
> 时间：2013-03-05T18:00:07.277
> 
> 标签：c

这似乎是最简单的代码，但我不知道为什么它不会编译：

```
 switch(choice) {
        case 0:
            printf("%d", LOOP_LIMIT); /* this line gives the error */
            break;
        case 1: 
```

当我注释掉它编译好的行

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-05T18:03:15.827

你的代码是这样的：

```
#define LOOP_LIMIT 10;
                     ^
                    Remove this semicolon. 
```

# php - 分层导航系统php

> ID：15230861
> 
> 赞同：0
> 
> 时间：2013-03-05T18:00:15.493
> 
> 标签：php, navigation, layered

我一直在尝试为网站创建一个基本的导航系统。

我有一个 .txt 文件，我试图将整个站点导航放入其中，然后我逐行循环并创建嵌套的 s。这工作正常，但我有两个问题：

1-我在不同的 div 中有一个单独的导航，所以它没有嵌套，我不知道如何填充它，因为它不会发生在第一个循环中。

2-我不知道如何在不使用 JQuery 或手动向每个页面添加 $parent 变量的情况下更改父导航链接的类。

这是我的代码：

导航.txt

```
index.php:Home
products.php:Products:2
    ace.php:Ace Blade
    electrodes.php:Electrodes
    megasoft.php:Mega Soft
    lletz.php:Lletz Loops
    megapower.php:Mega Power:-2
samples.php:Samples
gogreen.php:Go Green:2
    wastecalculator.php:Waste Calculator
    environmental.php:Environmental Considerations:-2
about.php:About Us 
```

我的导航功能：

```
<?php 

function  main_navigation()
{    

$active_page = basename($_SERVER['PHP_SELF']);

?>

<div class="main_nav">
    <ul>

        <?php
            $nav = fopen("template/nav.txt", "r") or exit("Unable to open file!");
            //Output a line of the file until the end is reached        
            while(!feof($nav)){ 
                $line = fgets($nav);
                list($url, $name, $layer) = explode(":", $line);

                echo "<li>";
                if ($active_page == $url) {
                        echo "<div class='active'>".$name."</div>";
                    }else{
                        echo "<a href='".$url."'>".$name."</a>";
                    };
                if ($layer == 2){
                    echo "<ul>";
                }elseif($layer == -2){
                    echo "</ul>";
                }else{
                    echo "</li>";
                };

            };
            fclose($nav);
        ?>
    </ul>
</div>
<?
};

?> 
```

所以，这里也没有显示，但我正在尝试添加第三个“层”，但它没有嵌套在 this 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:02:35.730

如果您希望在一堆代码之外进行导航，您可以使用类似以下的内容。这将允许分层但仍然是简单的编码。而且我认为当您在一年左右检查此代码然后使用`-2`和时更容易理解`2`

```
menu.php

<?php
function AddMenuItem($url, $name)
{
  $active_page = basename($_SERVER['PHP_SELF']);

  if ($active_page == $url)
    echo "<div class='active'>".$name."</div>";
  else
    echo "<a href='".$url."'>".$name."</a>";
}
?>

<ul>
  <li>
    <?php echo AddMenuItem("index.php", "Home"); ?>
  </li>
  <li>
    <?php echo AddMenuItem("products.php", "Products"); ?>
    <ul>
      <li>
        <?php echo AddMenuItem("ace.php", "Ace Blade"); ?>
      </li>
      <li>
        <?php echo AddMenuItem("electrodes.php", "Electrodes"); ?>
      </li>
      <li>
        <?php echo AddMenuItem("megasoft.php", "Mega Soft"); ?>
      </li>
    </ul>
  </li>
  <li>
    <?php echo AddMenuItem("samples.php", "Samples"); ?>
  </li>
</ul>

index.php, products.php, ace.php, etc.

<?php require_once("menu.php"); ?> 
```

# cassandra - 在创建列族之前可以使用 pycassaShell 转储 DDL 吗？

> ID：15230864
> 
> 赞同：1
> 
> 时间：2013-03-05T18:00:23.987
> 
> 标签：cassandra, pycassa

PycassaShell 使用 SYSTEM_MANAGER.create_column_family() 在 Cassandra 中创建列族。

有没有办法在 Cassandra 中提交之前转储 DDL？我必须修改 pycassaShell 内部吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:54:52.807

Pycassa 使用 Thrift RPC 调用来创建列族，因此实际上并没有使用 DDL 语句（因为它没有使用查询语言）。如果您正在谈论转储 CfDef 对象，是的，您需要修改内部结构才能实现这一点，但值得注意的是，CfDef 将有一些被忽略的字段，并且大多数字段的默认值将填充服务器-进行 RPC 调用后的一侧。

# bash - 替换所有文件中的字符串 - Unix

> ID：15230865
> 
> 赞同：8
> 
> 时间：2013-03-05T18:00:30.430
> 
> 标签：bash, file, unix, terminal, replace

我正在尝试用一批 txtfiles 中的所有行替换一个字符串`:::`（`::`它可以被视为一个单词，因为它的前面和后面总是有一个空格。

**我可以用下面的 python 来做到这一点，但是通过 unix 终端是否有一种不那么“过度杀戮”/复杂的方式来做到这一点？**（允许许多管道）

```
indir = "./td/"
outdir =  './od/'
for infile in glob.glob(os.path.join(indir,"*")):
  _,FILENAME = os.path.split()
  for l in codecs.open(infile,'r','utf8').readlines():
    l = l.replace(":::","::").strip()
    outfile = codecs.open(os.path.join(outdir,FILENAME),'a+','utf8')
    print>>outfile, l 
```

然后我将所有文件从 od 移动到 td`mv ./od/* ./td/*`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-05T18:06:19.683

```
find . -name "./td/*.c" -exec sed -i "s/:::/::/g" '{}' \; 
```

`od/`根本不需要。

**编辑：**

一个稍微简单的变体：

```
ls td/*.c | xargs sed -i '' "s/:::/::/g" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T18:04:23.083

一个简单的循环来处理每个文件`sed`就足够了。

```
for inp in ./td/*; do
    fname=${inp##*/}
    sed 's/:::/::/g' "$inp" > ./od/"$fname"
done 
```

# javascript - JavaScript - 类似于单选按钮功能的复选框

> ID：15230869
> 
> 赞同：0
> 
> 时间：2013-03-05T18:00:39.470
> 
> 标签：javascript, asp.net

我如何编写单选按钮等复选框的功能，下面是我的快速代码，但它似乎并不那么完美。

```
<asp:checkbox id="chkA" runat="server" onClick="SetCheck(this)"/>
<asp:checkbox id="chkB" runat="server" onClick="SetCheck(this)"/>

<Javascript>
function SetCheck(chk)
{
Switch(chk.id)
{
case "chkA" :
chkB.checked=false;
break;
Case "chkB" :
chkA.checked=false;
break;
}
}
</Javascript> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:25:19.113

**HTML**

```
<input type="checkbox" id="a" onclick="flip(this)" />
<input type="checkbox" id="b" onclick="flip(this)" /> 
```

**JavaScript：翻转到其他**

```
function flip(cb){
    var other = cb.id==="a" ? "b" : "a";
    document.getElementById(other).checked = !cb.checked;
} 
```

[例子](http://jsfiddle.net/k9mDx/)

**JavaScript" 允许取消选择**

```
function flip(cb){
    if (cb.checked) {
        var other = cb.id==="a" ? "b" : "a";
        document.getElementById(other).checked = false;
    }
} 
```

[例子](http://jsfiddle.net/k9mDx/1/)

# c# - Programatically renaming or excluding C# classes and methods

> ID：15230877
> 
> 赞同：0
> 
> 时间：2013-03-05T18:00:51.010
> 
> 标签：c#, code-generation

I'm writing an HTML parser using [SharpKit](http://sharpkit.net), which outputs to Javascript; but would also like to run the same code on occasion in [CsQuery](https://github.com/jamietre/CsQuery), which outputs a binary.

The code that I have for SharpKit *almost* can be directly used in CsQuery, but not quite, as:

*   The namespaces have to be changed, and function/class names changed accordingly.
*   I also have a couple of classes that emulate .NET classes in Sharpkit that I don't need in the CsQuery code at all.

I'd like to be able to do is keep my code synchronized by performing these changes programatically. Is this possible? The solutions [here](https://stackoverflow.com/questions/1514169/how-to-programmatically-parse-and-modify-c-sharp-code) are too old to work with C# 4.0, but I feel like Rosalyn should be able to do this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:15:33.553

您可以使用 JsMethodAttribute 重命名 SharpKit 中的方法：

```
[JsMethod(Name="doSomething")]
public void DoSomething(){} 
```

您可以通过设置 Export=false 以相同的方式排除方法：

```
[JsMethod(Export=false)]
public void DoSomething(){} 
```

如果您使用 Clr 模式（需要 jsclr.js 库），您应该能够使用完全相同的代码。或者通过使用原生 Js 和 .NET 方法，同时扩展 JavaScript 中缺少的任何方法，例如，如果 JavaScript 没有 String.StartsWith 方法，您可以将其路由到不同的方法，或者使用扩展方法自行实现.

如需更广泛的帮助和代码示例，请尝试 SharpKit 论坛： [https ://groups.google.com/forum/#!forum/sharpkit](https://groups.google.com/forum/#!forum/sharpkit)

# c - 使用函数的 C 科学计算器

> ID：15230880
> 
> 赞同：2
> 
> 时间：2013-03-05T18:01:04.390
> 
> 标签：c, logic, calculator

我编写了一个程序，它使用了大多数 math.h 库函数来创建一种科学计算器。但是，我没有得到想要的输出。我总是在输出结束时得到 0.000000。请帮我找出我的错误，谢谢。

```
#include <stdio.h>
#include <math.h>
#define PI 3.14159265
float sine(float  x);
float cosine(float x);
float tangent(float x);
float sineh(float x);
float cosineh(float x);
float tangenth(float x);
float logten(float x);
float squareroot(float x);
float exponent(float x);
float power(float x,float y);
int main()
{
    int x,y,n,answer;
    printf("What do you want to do?\n");
    printf("1.sin 2.cos 3\. tan 4\. sinh 5.cosh 6.tanh 7.1og10 8\. square root. 9.exponent 10.power.");
    scanf ("%d",&n);
    if (n<9 && n>0)
    {
        printf("\n What is x? ");
        scanf("%f",&x);
        switch (n)
        {
            case 1: answer = sine(x);       break;
            case 2: answer = cosine(x);     break;
            case 3: answer = tangent(x);    break;
            case 4: answer = sineh(x);      break;
            case 5: answer = cosineh(x);    break;
            case 6: answer = tangenth(x);   break;
            case 7: answer = logten(x);     break;
            case 8: answer = squareroot(x); break;
            case 9: answer = exponent(x);   break;
        }
    }
    if (n==10)
    {
        printf("What is x and y?\n");
        scanf("%f%f",&x,&y);
        answer = power(x,y);
    }
    if (n>0 && n<11)
        printf("%f",answer);
    else
        printf("Wrong input.\n");
    return 0;
}
float sine(float x)
{
    return (sin (x*PI/180));
}
float cosine(float x)
{
    return (cos (x*PI/180));
}
float tangent(float x)
{
    return (tan(x*PI/180));
}
float sineh(float x)
{
    return (sinh(x));
}
float cosineh(float x)
{
    return (sinh(x));
}
float tangenth(float x)
{
    return (sinh(x));
}
float logten(float x)
{
    return (log10(x));
}
float squareroot(float x)
{
    return (sqrt(x));
}
float exponent(float x)
{
    return(exp(x));
}
float power(float x, float y)
{
    return (pow(x,y));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T18:04:22.777

您已将这四个变量声明为整数：

```
int x,y,n,answer; 
```

但是`n`是唯一一个您实际上将其视为整数的值。声明`x`,`y`并`answer`作为`float`:

```
int n;
float x, y, answer; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T17:02:47.063

```
#include <stdio.h>
#include <math.h>
#include<conio.h>
#define PI 3.14159265

float sine(float x)
{
return (sin (x*PI/180));
}
float cosine(float x)
 {
return (cos (x*PI/180));
}
float tangent(float x)
{
return (tan(x));
}
float sineh(float x)
{
return (sinh(x));
}
float cosineh(float x)
{
return (sinh(x));
}
 float tangenth(float x)
 {
return (sinh(x));
}
 float logten(float x)
{
return (log10(x));
}
 float squareroot(float x)
 {
return (sqrt(x));
}
float exponent(float x)
   {
  return(exp(x));
}
float power(float x, float y)
{
return (pow(x,y));
}
 int main(void)
  {
  int n;
    float x,y,answer;
   printf("What do you want to do?\n");
  printf("1.sin 2.cos 3\. tan 4\. sinh 5.cosh 6.tanh 7.1og10 8\. square root. 

  9.exponent   10.power.");
    scanf ("%d",&n);
    if (n<9 && n>0)
    {
    printf("\n What is x? ");
    scanf("%f",&x);
    switch (n)
    {
        case 1: answer = sine(x);       break;
        case 2: answer = cosine(x);     break;
        case 3: answer = tangent(x);    break;
        case 4: answer = sineh(x);      break;
        case 5: answer = cosineh(x);    break;
        case 6: answer = tangenth(x);   break;
        case 7: answer = logten(x);     break;
        case 8: answer = squareroot(x); break;
        case 9: answer = exponent(x);   break;
    }
}
if (n==10)
{
    printf("What is x and y?\n");
    scanf("%f%f",&x,&y);
    answer = power(x,y);
}
if (n>0 && n<11)
    printf("%f",answer);
else
    printf("Wrong input.\n");
    getch();
return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T18:07:14.337

如果我启用 -Wall 和 -Wconversion，我会看到以下警告，如果您解决了这些警告，将解决您的问题：

```
foo.c:23:14: warning: format specifies type 'float *' but the argument has type 'int *' [-Wformat]
                scanf("%f",&x);
                       ~~  ^~
                       %d
foo.c:26:21: warning: implicit conversion turns floating-point number into integer: 'float' to 'int' [-Wconversion]
                        case 1: answer = sine(x);       break;
                                       ~ ^~~~~~~
foo.c:27:21: warning: implicit conversion turns floating-point number into integer: 'float' to 'int' [-Wconversion]
                        case 2: answer = cosine(x);     break;
                                       ~ ^~~~~~~~~
foo.c:28:21: warning: implicit conversion turns floating-point number into integer: 'float' to 'int' [-Wconversion]
                        case 3: answer = tangent(x);    break;
                                       ~ ^~~~~~~~~~
foo.c:29:21: warning: implicit conversion turns floating-point number into integer: 'float' to 'int' [-Wconversion]
                        case 4: answer = sineh(x);      break;
                                       ~ ^~~~~~~~
foo.c:30:21: warning: implicit conversion turns floating-point number into integer: 'float' to 'int' [-Wconversion]
                        case 5: answer = cosineh(x);    break;
                                       ~ ^~~~~~~~~~
foo.c:31:21: warning: implicit conversion turns floating-point number into integer: 'float' to 'int' [-Wconversion]
                        case 6: answer = tangenth(x);   break;
                                       ~ ^~~~~~~~~~~
foo.c:32:21: warning: implicit conversion turns floating-point number into integer: 'float' to 'int' [-Wconversion]
                        case 7: answer = logten(x);     break;
                                       ~ ^~~~~~~~~
foo.c:33:21: warning: implicit conversion turns floating-point number into integer: 'float' to 'int' [-Wconversion]
                        case 8: answer = squareroot(x); break;
                                       ~ ^~~~~~~~~~~~~
foo.c:34:21: warning: implicit conversion turns floating-point number into integer: 'float' to 'int' [-Wconversion]
                        case 9: answer = exponent(x);   break;
                                       ~ ^~~~~~~~~~~
foo.c:40:16: warning: format specifies type 'float *' but the argument has type 'int *' [-Wformat]
                scanf("%f%f",&x,&y);
                       ~~    ^~
                       %d
foo.c:40:19: warning: format specifies type 'float *' but the argument has type 'int *' [-Wformat]
                scanf("%f%f",&x,&y);
                         ~~     ^~
                         %d
foo.c:41:12: warning: implicit conversion turns floating-point number into integer: 'float' to 'int' [-Wconversion]
                answer = power(x,y);
                       ~ ^~~~~~~~~~
foo.c:44:15: warning: format specifies type 'double' but the argument has type 'int' [-Wformat]
                printf("%f",answer);
                        ~~  ^~~~~~
                        %d
foo.c:51:10: warning: implicit conversion loses floating-point precision: 'double' to 'float' [-Wconversion]
        return (sin (x*PI/180));
        ~~~~~~  ^~~~~~~~~~~~~~
foo.c:55:10: warning: implicit conversion loses floating-point precision: 'double' to 'float' [-Wconversion]
        return (cos (x*PI/180));
        ~~~~~~  ^~~~~~~~~~~~~~
foo.c:59:10: warning: implicit conversion loses floating-point precision: 'double' to 'float' [-Wconversion]
        return (tan(x*PI/180));
        ~~~~~~  ^~~~~~~~~~~~~
foo.c:63:10: warning: implicit conversion loses floating-point precision: 'double' to 'float' [-Wconversion]
        return (sinh(x));
        ~~~~~~  ^~~~~~~
foo.c:67:10: warning: implicit conversion loses floating-point precision: 'double' to 'float' [-Wconversion]
        return (sinh(x));
        ~~~~~~  ^~~~~~~
foo.c:71:10: warning: implicit conversion loses floating-point precision: 'double' to 'float' [-Wconversion]
        return (sinh(x));
        ~~~~~~  ^~~~~~~
foo.c:75:10: warning: implicit conversion loses floating-point precision: 'double' to 'float' [-Wconversion]
        return (log10(x));
        ~~~~~~  ^~~~~~~~
foo.c:79:10: warning: implicit conversion loses floating-point precision: 'double' to 'float' [-Wconversion]
        return (sqrt(x));
        ~~~~~~  ^~~~~~~
foo.c:83:9: warning: implicit conversion loses floating-point precision: 'double' to 'float' [-Wconversion]
        return(exp(x));
        ~~~~~~ ^~~~~~
foo.c:87:10: warning: implicit conversion loses floating-point precision: 'double' to 'float' [-Wconversion]
        return (pow(x,y));
        ~~~~~~  ^~~~~~~~
24 warnings generated. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T18:09:07.817

您将`x`其他变量声明为`int`. 尝试声明`float`为

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-30T04:11:25.800

问题是格式说明符错误。将声明中的所有更改`%f`为。`%d``scanf`

# c# - Modify Urls in aspx page

> ID：15230881
> 
> 赞同：0
> 
> 时间：2013-03-05T18:01:14.487
> 
> 标签：c#, asp.net, url, url-rewriting, webforms

Is there a way to modify all the links to js and css files in my webforms aspx pages without making a call to a helper function?

I want to write a url:
**FROM** ...../Scripts/file.js
**TO** ...../Scripts/634969723944992444/file.js

I can do this:

> ```
> <script type="text/javascript" src="<%=Url.Helper(@"Scripts/file.js")%>"></script> 
> ```

where the helper function will include the last modified time of the file as ticks in the url.

Is there an easy way I can modify the urls on all my pages with out using such helper function?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:56:45.870

老实说，我认为你最好的选择是放弃你的努力，只使用[Bundling 和 Minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)。

除了捆绑（减少 HTTP 请求的数量）和缩小（减少文件大小）之外，它还会自动对您的捆绑包进行版本控制（使用查询字符串），确保浏览器在您的脚本或样式表之一发生更改时始终获得最新版本。

如果您使用的是 ASP.NET 4.5，则您已经可以访问此功能。对于旧版本，您可以通过[NuGet](http://nuget.org/packages/Microsoft.AspNet.Web.Optimization/1.0.0)安装。

其他有用的链接： [向 Web 表单添加捆绑和缩小](http://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T21:39:27.693

您可以编写一个 HTTPModule 来执行此操作。您也可以改为在路径中放置时间，只需使用查询字符串来标记更新

file.js?v=1 file.js?v=2 file.js?v=3 等

# php - 如何覆盖内置的 PHP 函数？

> ID：15230883
> 
> 赞同：15
> 
> 时间：2013-03-05T18:01:24.467
> 
> 标签：php, built-in, overriding

我想覆盖，让我们说`mysql_num_rows`让我们说以下：

```
$dataset = array(array('id' => 1, 'name' => 'Zlatan', 'onSOF' => 1), array('id' => 1, 'name' => 'Guest', 'onSOF' => 0));

function mysql_num_rows($dataset) {
    return sizeof($dataset);
} 
```

PHP 是否支持内置函数覆盖？

* * *

***扩展***

我想创建一个 OpenSource 解决方案，它将覆盖所有现有的`mysql_*`函数，它的函数体我将使用 PDO 实例和方法以及属性。

这意味着已经使用`mysql_*`并且很难完全迁移到 PDO 的用户应该只包含这个函数覆盖，并且所有属性、函数调用、函数返回值、参数值等都应该保持不变。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-05T18:31:35.297

我认为可以这样做：

```
//First rename existing function
rename_function('strlen', 'new_strlen');
//Override function with another
override_function('strlen', '$string', 'return override_strlen($string);');

//Create the other function
function override_strlen($string){
        return new_strlen($string);  
} 
```

[在这里找到](http://www.php.net/manual/en/function.override-function.php#50821)

请注意，每个主机都必须在服务器上安装[http://php.net/manual/en/book.apd.php 。](http://php.net/manual/en/book.apd.php)

## 编辑

另一种方法是使用命名空间

```
<?php
    namespace mysql2pdo;
    use PDO;
    function mysql_connect() {
       return new PDO();
    }
    echo mysql_connect(); // Causes error because we don't have the parameters
?> 
```

[在这里测试](http://codepad.viper-7.com/NDHokN)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T18:02:53.013

安装[`runkit`](http://www.php.net/manual/en/book.runkit.php)和使用[runkit_function_redefine](http://www.php.net/manual/en/function.runkit-function-redefine.php)。仅在开发/测试服务器上执行，从不在生产中执行。

# html - 如何仅在单个块元素中以不同颜色为文本加下划线？

> ID：15230888
> 
> 赞同：1
> 
> 时间：2013-03-05T18:01:37.607
> 
> 标签：html, css

我想用一个元素产生以下结果：

```
<style type="text/css">
    div { background-color: #000; color: #fff; }
    span { border-bottom: 1px solid #f00; }
</style>
<div><span>White text, red underline, black background</span></div> 
```

jFiddle：http: [//jsfiddle.net/ARbmG/](http://jsfiddle.net/ARbmG/)

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:06:04.327

相关：[CSS 文本装饰下划线颜色](https://stackoverflow.com/questions/12804419/css-text-decoration-underline-color) 和 [更改下划线颜色](https://stackoverflow.com/questions/12557707/changing-underline-color)

**不，您还不能**以跨平台、跨浏览器的方式更改文本装饰下划线颜色。

*   [非工作解决方案](https://developer.mozilla.org/fr/docs/CSS/text-decoration-color) 或 [jsFiddle 工作解决方案](http://jsfiddle.net/ARbmG/3/)
*   [W3C 信息](http://www.w3.org/TR/2010/WD-css3-text-20101005/#text-decoration-color) 或 [/css-text-decor-3](http://www.w3.org/TR/css-text-decor-3/#text-decoration-color)
*   [MSDN 信息](http://msdn.microsoft.com/en-us/library/gg721748%28v=expression.40%29.aspx)

Mozilla 解决方案：

```
span {
    color:#fff;
    text-decoration: underline;
    -moz-text-decoration-color: red;
    /* you'll have to search for other -proprietary selectors */
} 
```

否则，将内联元素置于边框底部：您刚刚做到了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T18:23:27.510

我尝试了几件事，我想出了这个奇怪的小东西。我可能不推荐这样做，但它非常接近您只使用一个 HTML 标记想要的效果：

**HTML**

```
<span>White text, red underline, black background</span> 
```

**CSS**

```
span {
    color: white;
    background: black;
    border-bottom: 2px solid red;
}

span:after {
    content: '_';
    position: absolute;
    width: 100%;
    background: black;
    color: black;
} 
```

**演示**

[http://jsfiddle.net/uWGx5/](http://jsfiddle.net/uWGx5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T02:51:30.657

我找到了一个更好的解决方案。

我的例子——白色文本、红色下划线、黑色背景——不是 100% 准确的。它必须是“块”元素，但背景可以是透明的。

这是一个新的：http: [//jsfiddle.net/gpNZX/2/](http://jsfiddle.net/gpNZX/2/)

神奇的是 :before 和 :after '\A'，这是一个转义的 ASCII 换行符。我也尝试使用 { content:' '; 显示：块；但它似乎并非在所有浏览器中都能 100% 工作。

```
span {
    ...
    display: inline;
    ...
}
span:before {
    content: '\A';
    white-space: pre;
}
span:after {
    content: '\A';
    white-space: pre;
} 
```

# java - Java - Reading in Image (IIOException: Can't Create an ImageInputStream)

> ID：15230890
> 
> 赞同：1
> 
> 时间：2013-03-05T18:01:46.793
> 
> 标签：java, inputstream, javax.imageio

I'm writing a simple game using a data driven design in which I read in the images for the various elements of the game. As such I've written a parser to read-in the files, confirm that they're an acceptable image format, and create a new Sprite (class I've written) using the files.

I read in the files using ImageIO.read() as seen in the example below.

```
toAdd = new Sprite(ImageIO.read(targetFile)); 
```

The stack trace for the exception is as follows:

```
javax.imageio.IIOException: Can't create an ImageInputStream!
    at javax.imageio.ImageIO.read(ImageIO.java:1280)
    at edu.moravian.utilities.dataParsers.GraphicsDataParser.readInSprites(GraphicsDataParser.java:53) 
```

I've got no idea what's causing this. The application isn't multi-threaded, the images are in the correct directory and are confirmed to exist, and I have the permissions necessary to access the images.

What might I be missing?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-11T00:27:10.460

一个可能的原因可能是您正在阅读使用 CMYK 颜色模型的 jpeg。ImageIO 默认不支持这些。

不过，有可能添加该功能。例如看看这个答案：[https ://stackoverflow.com/a/16149142/6276704](https://stackoverflow.com/a/16149142/6276704)

# ruby - ChromeDriver Ruby 禁用图像

> ID：15230894
> 
> 赞同：3
> 
> 时间：2013-03-05T18:01:57.347
> 
> 标签：ruby, image, webdriver, watir, selenium-chromedriver

有没有办法用 ruby​​ 禁用 Chromedriver 中的图像？有一个类似的问题，但它涉及 C#，我不确定如何将它移植到 ruby​​。

[在 Selenium ChromeDriver 中禁用图像](https://stackoverflow.com/questions/9433109/disable-images-in-selenium-chromedriver)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-11-28T18:07:40.670

对于遇到此问题并使用 chrome headless 的任何人，以下是禁用图像的方法。

```
options = Selenium::WebDriver::Chrome::Options.new(args: ['headless', '--blink-settings=imagesEnabled=false'])
@driver = Selenium::WebDriver.for(:chrome, options: options) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T13:27:36.187

看起来它需要将哈希发送到“profile.default_content_settings”Chrome 配置文件设置。我会尝试这样的事情：

```
profile = Selenium::WebDriver::Chrome::Profile.new
profile["profile.default_content_settings"] = { :images => '2' }

@driver = Selenium::WebDriver.for(:chrome, :profile => profile) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-19T01:23:09.370

自从@bbbco 添加他的答案以来，要设置的标志已经改变。正确的标志是：`"profile.managed_default_content_settings.images"`制作工作代码：

```
profile = Selenium::WebDriver::Chrome::Profile.new
profile["profile.managed_default_content_settings.images"] = 2

@driver = Selenium::WebDriver.for(:chrome, :profile => profile) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-19T19:43:40.510

禁用通知和图像：

```
Capybara.register_driver :selenium_chrome do |app|
  prefs = { "profile.managed_default_content_settings.notifications" => 2 }

  caps = Selenium::WebDriver::Remote::Capabilities.chrome(chrome_options: { prefs: prefs })

  profile = Selenium::WebDriver::Chrome::Profile.new
  profile["profile.default_content_settings"] = { :images => '2' }

  options = Selenium::WebDriver::Chrome::Options.new(args: ['headless', '--blink-settings=imagesEnabled=false'])

  Capybara::Selenium::Driver.new(
    app,
    browser: :chrome,
    desired_capabilities: caps,
    profile: profile,
    options: options
  )
end 
```

# css - Rails Twitter Bootstrap Carousel

> ID：15230895
> 
> 赞同：0
> 
> 时间：2013-03-05T18:02:02.467
> 
> 标签：css, ruby-on-rails, twitter-bootstrap

I am using Rails 3.2.12, Ruby 2.0, with Twitter Bootstrap Gem, and I am trying to implement Carousel div to my App, but it is looking horrible at the moment, only two big buttons are shown, one at left part of the screen, other on the right.

Is there are any successful examples of how to correctly implement Carousel? Should I add additional div's to my code?

I got no custom css in my bootstrap_and_overrides.css.less file except this one:

> body { padding-top: 60px;}

```
</head>
<body>

<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="<%= root_path %>">ProjectX</a>
      <div class="container nav-collapse">
       <ul class="nav">
         <% if current_user %>
            <li class="nav-header"><%= current_user.email %></li>
            <li><%= link_to "Log out", logout_path %></li>
          </ul>
        <% else %>
        <ul class="nav">
          <li><%= link_to "Log In", login_path  %></li>
          <li><%= link_to "Sign Up", signup_path %></li>
          <li><%= link_to "Forum", "/path3"  %></li>
        </ul>
        <% end %>
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div>

<div id="myCarousel" class="carousel">
  <ol class="carousel-indicators">
    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
    <li data-target="#myCarousel" data-slide-to="1"></li>
    <li data-target="#myCarousel" data-slide-to="2"></li>
  </ol>
   Carousel items
  <div class="carousel-inner">
    <div class="active item"></div>
    <div class="item">...</div>
    <div class="item">...</div>
  </div>
  <!-- Carousel nav -->
  <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
  <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div>

<div class="container">
    <div class="row">
      <div class="span9">
        <%= bootstrap_flash %>
        <%= yield %>
      </div>
      <div class="span3">
        <div class="well sidebar-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Sidebar</li>
            <li><%= link_to "News", "/path1"  %></li>
            <li><%= link_to "Recent", "/path2"  %></li>
            <li><%= link_to "Hot Topics", "/path3"  %></li>
          </ul>
        </div><!--/.well -->
      </div><!--/span-->
    </div><!--/row-->

  <footer>
    <p>&copy;Iron Man</p>
  </footer>

</div> <!-- /container -->

<!-- Javascripts
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<%= javascript_include_tag "application" %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:22:22.077

专注于`<div class="carousel-inner"`。在其中，您会注意到三个带有`class="item"`. 这些嵌套类中的每一个都需要引用一个图像才能让您的轮播工作。

您目前在这些 div 标签之间没有任何内容：

```
<div class="carousel-inner">  
  <div class="active item"></div> 
  <div class="item">...</div>  
  <div class="item">...</div> 
</div> 
```

这是您要执行的操作的示例：

```
<div class="carousel-inner">  
  <div class="active item"><img src='https://dev.twitter.com/sites/default/files/images_platform_object/arctic-blue-bird.jpg?1334604325'></div> 
  <div class="item"><img src='https://dev.twitter.com/sites/default/files/images_platform_object/missouri_meadow_lark.jpg?1334604578'></div>  
  <div class="item"><img src='https://dev.twitter.com/sites/default/files/images_platform_object/yellow_flycatcher.jpg?1334605975'></div> 
</div> 
```

我包含的图像来自 Twitter，它们指定了绝对路径。换句话说，您可以将此代码剪切并粘贴到轮播模板的其余部分以查看图像。

# scala - 从控制器中重构业务逻辑的好习惯方法

> ID：15230896
> 
> 赞同：11
> 
> 时间：2013-03-05T18:02:08.473
> 
> 标签：scala, playframework, playframework-2.1

我是 Scala 和 Play 的新手；我编写了一个包含业务和表示逻辑的“全部”控制器。我想从控制器中重构业务逻辑。

这是我的 Scala/Play 的样子。用干净的界面重构出这个控制器的业务逻辑的好/惯用的方法是什么？

```
object NodeRender extends Controller {
...
def deleteNode(nodeId: Long) = Action { request =>
    //business logic
    val commitDocument = Json.toJson(
    Map(
        "delete" -> Seq( Map( "id" -> toJson( nodeId)))  
    ))
    val commitSend   = Json.stringify( commitDocument)
    val commitParams = Map( "commit" -> "true", "wt" -> "json")
    val headers = Map( "Content-type" -> "application/json")

    val sol = host( "127.0.0.1", 8080)
    val updateReq  = sol / "solr-store" / "collection1" / "update" / "json" <<?
        commitParams <:< headers << commitSend

    val commitResponse = Http( updateReq)()

    //presentation logic
    Redirect( routes.NodeRender.listNodes)
} 
```

* * *

在 Python/Django 中，我编写了两个类`XApiHandler`，`XBackend`并在它们之间使用了一个干净的接口。

```
xb = XBackend( user).do_stuff()
if not xb:
  return a_404_error
else:
  return the_right_stuff( xb.content) #please dont assume its a view! 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T21:25:39.327

几个假设：

1）你的倒数第二行块上的 HTTP 调用

2）您没有说重定向是否需要等待来自 Http 调用的响应，但我认为确实如此。

阻塞调用应该移到另一个线程，这样你就不会阻塞处理请求的线程。播放文档对此非常具体。该`Akka.future`功能与`Async`帮助相结合。

控制器代码：

```
1 def deleteNode(nodeId: Long) = Action { request =>
2     Async{
3         val response = Akka.future( BusinessService.businessLogic(nodeId) )
4 
5         response.map { result =>
6             result map {
7                 Redirect( routes.NodeRender.listNodes)
8             } recover {
9                 InternalServerError("Failed due to ...")
10            } get 
11        }
12    }
13} 
```

这比你的 PHP 多一点，但它是多线程的。

传递到`Akka.future`第 3 行的代码将在未来某个时间使用不同的线程调用。但是调用会`Akka.future`立即返回 a `Future[Try]`（业务方法的返回类型见下文）。这意味着变量`response`具有类型`Future[Try]`。第 5 行对`map`方法的调用不会调用 map 块内的代码，而是将该代码（第 6-10 行）注册为回调。该线程不会在第 5 行阻塞并返回`Future`到该`Async`块。该`Async`块`AsyncResult`向 Play 返回 a ，并告诉 Play 在未来完成时为回调注册自己。

同时，其他一些线程将调用`BusinessService`第 3 行，一旦您对后端系统进行的 HTTP 调用返回，第`response`3 行的变量“已完成”，这意味着第 6-10 行的回调被调用。 `result`具有抽象类型`Try`，并且只有两个子类：`Success`和`Failure`. 如果`result`成功，则该`map`方法调用第 7 行并将其包装在一个新的`Success`. 如果`result`是失败，则 map 方法返回失败。第`recover`8 行的方法正好相反。如果 map 方法的结果是成功，则返回成功，否则调用第 9 行并将其包装在 a `Success`（不是 a `Failure`！）中。对`get`第 10 行的方法将重定向或错误排除在外，`Success`并且该值用于完成`AsyncResult`Play 所保留的。Play 然后会收到一个回调，表明响应已准备好并且可以呈现和发送。

使用此解决方案，服务传入请求的线程不会被阻塞。这很重要，因为例如在 4 核机器上，Play 只有 8 个线程能够处理传入请求。它不会产生任何新的，至少在使用默认配置时不会。

这是来自业务服务对象的代码（几乎复制了您的代码）：

```
def businessLogic(nodeId: Long): Future[Try] {

    val commitDocument = Json.toJson(
    Map(
       "delete" -> Seq( Map( "id" -> toJson( nodeId)))  
    ))
    val commitSend   = Json.stringify( commitDocument)
    val commitParams = Map( "commit" -> "true", "wt" -> "json")
    val headers = Map( "Content-type" -> "application/json")

    val sol = host( "127.0.0.1", 8080)
    val updateReq  = sol / "solr-store" / "collection1" / "update" / "json" <<?
        commitParams <:< headers << commitSend

    val commitResponse = Http( updateReq)()

    Success(commitResponse) //return the response or null, doesnt really matter so long as its wrapped in a successful Try 
} 
```

表示逻辑和业务逻辑现在完全解耦了。

有关更多信息，请参阅[https://speakerdeck.com/heathermiller/futures-and-promises-in-scala-2-dot-10](https://speakerdeck.com/heathermiller/futures-and-promises-in-scala-2-dot-10)和[http://docs.scala-lang.org/overviews/core/futures.html](http://docs.scala-lang.org/overviews/core/futures.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T22:32:24.103

我可能会这样做

```
object NodeRenderer extends Controller {

  def listNodes = Action { request =>
    Ok("list")
  }

  def deleteNode(nodeId: Long)(
    implicit nodeService: NodeService = NodeService) = Action { request =>

    Async {
      Future {
        val response = nodeService.deleteNode(nodeId)

        response.apply.fold(
          error => BadRequest(error.message),
          success => Redirect(routes.NodeRenderer.listNodes))
      }
    }
  }
} 
```

节点服务文件看起来像这样

```
trait NodeService {
  def deleteNode(nodeId: Long): Promise[Either[Error, Success]]
}

object NodeService extends NodeService {

  val deleteDocument =
    (__ \ "delete").write(
      Writes.seq(
        (__ \ "id").write[Long]))

  val commitParams = Map("commit" -> "true", "wt" -> "json")
  val headers = Map("Content-type" -> "application/json")

  def sol = host("127.0.0.1", 8080)
  def baseReq = sol / "solr-store" / "collection1" / "update" / "json" <<?
    commitParams <:< headers

  def deleteNode(nodeId: Long): Promise[Either[Error, Success]] = {

    //business logic
    val commitDocument =
      deleteDocument
        .writes(Seq(nodeId))
        .toString

    val updateReq = baseReq << commitDocument

    Http(updateReq).either.map(
      _.left.map(e => Error(e.getMessage))
        .right.map(r => Success))
  }
} 
```

我在哪里定义`Error`并`Success`喜欢这个

```
case class Error(message: String)
trait Success
case object Success extends Success 
```

这将您的 http 部分和业务逻辑分开，允许您为同一服务创建其他类型的前端。同时，它允许您测试您的 http 处理，同时提供`NodeService`.

如果您需要将不同类型的`NodeService`绑定到同一个控制器，您可以将其转换`NodeRenderer`为类并使用构造函数将其传递。[这个例子](https://github.com/guillaumebort/play20-spring-demo)向你展示了如何做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T17:10:02.657

我不是专家，但我很高兴将连贯的逻辑块分解为混合特征。

```
abstract class CommonBase {
    def deleteNode(): Unit
}

trait Logic extends CommonBase{
  this: NodeRender =>

  override def deleteNode(): Unit = {
    println("Logic Here")
    println(CoolString)
    }
}

class NodeRender extends CommonBase
    with Logic
{
    val CoolString = "Hello World"

}

object test {
    def main(args: Array[String]) {
      println("starting ...")
      (new NodeRender()).deleteNode()
    }
} 
```

印刷

```
starting ...
Logic Here
Hello World 
```

# android - 哪个是活动启动模式、清单或意图标志的更好方法

> ID：15230902
> 
> 赞同：1
> 
> 时间：2013-03-05T18:02:33.443
> 
> 标签：android, android-intent, android-manifest

活动启动模式哪种方式更好？清单或意图标志？哪个比其他更好？为什么？我在这里问的是性能。我目前正在关注 android 开发者网站[教程](http://developer.android.com/guide/components/tasks-and-back-stack.html)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T18:30:38.187

两者在性能方面是相同的，但用于不同的目的。

如果您*总是*希望 Activity 显示特定类型的行为（我们以被排除在最近的任务中为例），那么您将`<activity>`在清单中与该 Activity 对应的元素中设置属性。

但是，如果您只想在某些条件下将其从最近的任务中排除，例如通过通知或 AlarmManager 从待处理的 Intent 启动它时，则设置标志以将其从 Intent 中的最近任务中排除，而不是清单中，以便它在其他情况下仍然存在于最近的任务中，例如从应用程序内导航到。

# c++ - How to add CProgressCtrl to a CListCtrl

> ID：15230904
> 
> 赞同：0
> 
> 时间：2013-03-05T18:02:39.923
> 
> 标签：c++, mfc, drawing, clistctrl

I'm looking to add a progress bar to an index in a list control. I know there isn't a simple command to do this and requires a type of drawing but I can't find any good explanations on how to go about accomplishing this. I have a mediocre understanding of MFC so this might be a little advanced but I was hoping someone could give me a good example of how to do this or point me to a link that explains something similar to this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:20:35.727

你的问题有点不清楚 - 你想要一个`CProgressCtrl`或`CListCtrl`多个？

[无论如何，您可能会从CodeProject](http://www.codeproject.com/Articles/6813/List-Control-Extended-for-Progress-Control)中找到感兴趣的这篇文章，因为它包含一个现成的控件。不能保证控件的质量，但它至少应该让你开始。

# ruby-on-rails - Rails - 将常量插入字符串 - 如何？

> ID：15230913
> 
> 赞同：0
> 
> 时间：2013-03-05T18:02:55.670
> 
> 标签：ruby-on-rails

我有一个常量 MY_CONSTANT。尝试将其放入字符串数组中：

```
query << 'SELECT #{MY_CONSTANT} ' 
```

但它不起作用。我错过了什么？

# web-services - 如何在客户端中设置 https Web 服务的用户名和密码？

> ID：15230921
> 
> 赞同：0
> 
> 时间：2013-03-05T18:03:19.270
> 
> 标签：web-services, https, cxf, credentials

我使用soapUI 和apache-cxf-2.7.2 创建了https Web 服务的客户端代码。有一个名为 MYService_BasicEndpoint_Client.java 的类包含此方法：

```
public static void main(String args[]) throws java.lang.Exception {
    URL wsdlURL = MYServiceWcf.WSDL_LOCATION;
    if (args.length > 0 && args[0] != null && !"".equals(args[0])) { 
        File wsdlFile = new File(args[0]);
        try {
            if (wsdlFile.exists()) {
                wsdlURL = wsdlFile.toURI().toURL();
            } else {
                wsdlURL = new URL(args[0]);
            }
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }
}
    MYServiceWcf ss = new MYServiceWcf(wsdlURL, SERVICE_NAME);
    IMYService port = ss.getBasicEndpoint();
    port.webserviceMethod();
} 
```

但是当我运行它时，结果是 http 响应 401（未经授权），因为没有任何选项可以设置 https 网络服务的用户名和密码。但我可以在soapUI 中运行此服务的测试用例，因为可以选择为端点设置用户名和密码。如何在上面由 soapUI 和 apache-cxf-2.7.2 创建的代码中设置它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:45:39.213

您是否与 SOAPUI 绑定？如果没有，那么我会推荐 Jersey Client API。这里有一个很好的例子，说明如何在 REST 客户端上构建 SOAP ( [http://aruld.info/soap-over-resty-client/](http://aruld.info/soap-over-resty-client/) )

这允许您使用 Apache HTTPClient 来设置您的请求（用户名、密码、端口和方案），然后创建 Jersey WebResource 最终将发送请求

示例配置可能类似于：

```
 DefaultHttpClient httpClient = connector.getHTTPClient(argUsername, argPassword, 
                    argScheme, argDomain);

  ClientConfig config = new DefaultClientConfig();
  config.getClasses().add(SoapProvider.class);
  HttpClientJerseyHandler clientHandler = new HttpClientJerseyHandler(httpClient, null, false);
  HttpClientJerseyClient jerseyClient = new HttpClientJerseyClient(clientHandler, config);
  return jerseyClient.resource(someWSDLURL); 
```

# c++ - Keepalive 时间 - 在 C++ 中不能减少到一分钟以下

> ID：15230922
> 
> 赞同：2
> 
> 时间：2013-03-05T18:03:26.640
> 
> 标签：c++, tcp, keep-alive

我在通过下面的代码写入 TCP 端口的 C++ 应用程序中实现了保活时间。它没有显示，但我实际上检查了有效的返回状态以验证设置选项是否有效。

```
int option = 1;
int keepalive_intvl = 1;
int keepalive_count = 1;
int keepalive_idle = 1;

setsockopt(the_socket, SOL_SOCKET, SO_KEEPALIVE, &option, sizeof (int) );
setsockopt(the_socket, SOL_TCP, TCP_KEEPINTVL, &keepalive_intvl, sizeof(int));
setsockopt(the_socket, SOL_TCP, TCP_KEEPCNT, &keepalive_count, sizeof(int));
setsockopt(the_socket, SOL_TCP, TCP_KEEPIDLE, &keepalive_idle, sizeof(int)); 
```

我的应用程序正在写入 TCP 端口，并且每秒尝试写入几次。

```
// write null packet to determine if connection is still good
return ( send( GetDescriptor(),(char*)NULL, 0, 0 ) != -1 ); 
```

每当我关闭另一个输入连接时，根据上面的测试，我的应用程序需要一分钟来报告连接已关闭。如果我有一个`SIGPIPE`处理函数，它也需要一分钟才能被调用。

我看到的每个文档都表明 keepalive 参数以秒为单位，而不是分钟。但是我无法在一分钟以下检测到断开的连接。

我还尝试更改[tldp.org](http://tldp.org/HOWTO/TCP-Keepalive-HOWTO/usingkeepalive.html)上讨论的与 keepalive 相关的系统变量，但无济于事。

```
echo 1 > /proc/sys/net/ipv4/tcp_keepalive_time
echo 1 > /proc/sys/net/ipv4/tcp_keepalive_intvl
echo 1 > /proc/sys/net/ipv4/tcp_keepalive_probes 
```

这种行为是否由另一个系统参数控制？与某些文档相反，keepalive 参数实际上是在几分钟内吗？我应该在代码中寻找可能影响此超时参数的某个函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:50:05.693

你最好的选择是应用层保持活动；也就是说，每 X 秒发送一个无操作 (NOP) 消息，并期望一个相当快的 NOP 确认 (NOP-ACK)。此外，如果您的远程连接关闭是“优雅的”，那么您`send`应该几乎立即解除阻塞。如果它不是优雅的（例如网络元素失败），那么您的应用层保持活动将在您下次 X+（预期响应时间）时检测到丢失...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:59:45.097

> TCP_KEEPCNT（自 Linux 2.4 起） TCP 在断开连接之前应发送的最大保活探测数。此选项不应在旨在可移植的代码中使用。

也许这就是原因。你可以在你的应用程序中实现你自己的保持活动，这应该很容易。如果没有应用程序数据或保持活动的“心跳”来，就开始戳另一端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T18:46:01.443

我可以通过该`TCP_LINGER2`值更改整体保活时间。

每当我关闭输入 tcp 进程时，我`netstat -an`都会使用以下行。

```
tcp        1      0 127.0.0.1:32962         127.0.0.1:7780          CLOSE_WAIT  
tcp        0      0 127.0.0.1:7780          127.0.0.1:32962         FIN_WAIT2 
```

我可以用`FIN_WAIT2`两种不同的方式改变这个时间。

在系统级别，根据此[链接](https://cs.uwaterloo.ca/~brecht/servers/tcp.html)，我可以通过修改系统文件来更改它，如下所示：

```
% cat /proc/sys/net/ipv4/tcp_fin_timeout
60

[To change this to 3 seconds]
# echo "3" > /proc/sys/net/ipv4/tcp_fin_timeout 
```

我的输出 TCP 应用程序表明连接在大约 4 秒内断开（我想 3 表示等待时间，1 表示保持活动空闲）。

我也可以在代码中的单个套接字级别上更改它。在文件`/usr/include/netinet/tcp.h`中，我看到以下内容

```
#define TCP_LINGER2  8  /* Life time of orphaned FIN-WAIT-2 state */ 
```

因此，在我的代码中添加以下内容，

```
int wait_time = 3;
setsockopt(the_socket, SOL_TCP, TCP_LINGER2, &wait_time,sizeof(int)); 
```

将具有与改变系统参数相同的效果。

我确实同意应用程序级保活确实是要走的路中的其他答案。[而且，正如这里](http://blog.stephencleary.com/2009/05/detection-of-half-open-dropped.html)提到的，

> RFC 1122，第 4.2.3.6 节指出路由器可能无法可靠地传输没有数据的 TCP keepalive 确认；这可能会导致有效连接被丢弃。此外，TCP/IP 堆栈根本不需要支持 keepalive（许多嵌入式堆栈不支持），因此该解决方案可能无法转换为其他平台。

但是，在非测试环境中，我无法访问 TCP 输入，我可以在其中实现应用程序级保活的另一端，因此 TCP 保活可能是我唯一的选择。

# orm - ORM 映射错误

> ID：15230924
> 
> 赞同：1
> 
> 时间：2013-03-05T18:03:35.443
> 
> 标签：orm, coldfusion, coldfusion-9, cfml, coldbox

我有一组 ORM 对象，可以在我的 CF9 & 10 本地工作站和我的一个 CF9 服务器（我们会说 INT & EXT ）上工作，但不是另一个。一切似乎都设置正确，但是当我调用 prc.app.save()（应用程序实体的一个实例）时，我收到以下消息。

```
Detail:  Either the mapping for this component is missing or the application must be restarted to generate the mapping.
Message  Mapping for component dot.path.to.model.app not found. 
```

他们的系统管理员说两台服务器 A 和 B 的设置相同。

这是导致 model/app.cfc 文件中问题的属性。

```
component entityName="app" extends="coldbox.system.orm.hibernate.ActiveEntity" table="real_table_name"  schema="real_schema" persistent="true"{     
....
property name="applicants" 
    fieldtype="one-to-many" 
    column="app_id" 
    cfc="applicant" 
    fkcolumn="app_id" type="array" 
    singularname="applicant" 
    lazy="false" 
    cascade="save-update" 
    orderby="app_num"; 
```

model/applicant.cfc 看起来像这样

```
component entityName="applicant" extends="coldbox.system.orm.hibernate.ActiveEntity" table="real_table_name"  schema="real_schema" persistent="true"{   
property name="applicant_id" 
    fieldtype="id" 
    generator="sequence" 
    sequence="real_sequence";
property name="app_id" ormtype="integer";
property name="app_num" ormtype="integer"; 
```

我相信我的 ORM 设置设置正确。

```
<cfset this.ormSettings = {
        cflocation              = "model",
        logSQL                  = true,
        flushAtRequestEnd       = false,
        autoManageSession       = false,
        eventHandling           = true,
        eventHandler            = "coldbox.system.orm.hibernate.WBEventHandler"
        }> 
```

这是在 ColdBox 3.5 框架内。

我正在寻找任何建议来帮助我追查此错误。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:26:30.233

好的。现在我觉得很笨。orderby="app_num" 属性是如何在 app_id 属性中设置的。它是申请实体而不是应用实体中的列。

# c - 迭代字符串输入

> ID：15230926
> 
> 赞同：2
> 
> 时间：2013-03-05T18:03:36.907
> 
> 标签：c, validation, input, integer, fgets

我正在尝试遍历字符串以查看输入是否为整数。

这是代码：

```
 for (int i = 1; i < strlen(buffer); i++) //Checking that each character of the string is numeric
    {
        if (!isdigit(buffer[i]))
        {
            valid = false;
            break;
        }
    }

    if(valid == false)
    {
        printf("Invalid input!");
    }

    else
    {
        num = atoi(buffer);
        printf("The number entered is %d", num);
    } 
```

问题是即使输入是正确的，让我们说 2，输出消息仍然是“无效输入！”。

我现在非常沮丧。我尝试使用 atoi 函数、strtol 函数和其他方法，以便我可以验证一个数字并确保：

1) 不是字母 2) 是整数

请帮我。我已经尝试解决这个问题超过 2 小时。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T18:05:42.170

由于`fgets`读取一行，a `'\n'`（不是数字）可能会保留在字符串的末尾。您可以删除它：

```
#include <string.h>

char *pend = strrchr (buffer, '\n');

if (pend != NULL) *pend = '\0'; 
```

# go - HTML5 的流媒体容器 标签

> ID：15230929
> 
> 赞同：7
> 
> 时间：2013-03-05T18:03:43.923
> 
> 标签：go, audio-streaming, html5-audio

我有一个 Go 应用程序，我想在其中将实时未压缩音频流式传输到浏览器。我希望通过让浏览器打开与流对应的 URL 来通过 HTTP 流式传输，然后将该连接与音频数据一起提供。

我计划使用 WAV 发送未压缩的数据，但是 WAV 文件格式要求在标题中预定义文件大小。是否有更好的容器格式来进行这种流式传输，我可以在 Go 中轻松使用？

我知道一种方法是使用适当的流媒体服务器并通过它对我的音频进行转码，但如果我自己实现这一点，是否有一种相当简单的方法可以起步？也许一个 Go 库可以让这更容易？

谢谢

**编辑**我已经通过 ffmpeg 解决了这个问题，如下面的回答中所述

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T09:02:29.473

如果您仍在考虑使用未压缩的 WAV 以获得最终质量，那么我认为您有两种选择

1.  位于标题中 - 说 WAV 很长（说是 2GB）
2.  将额外的块添加到 RIFF 容器中

第一个选择很容易实现，但意味着天真的浏览器会尝试下载 2GB 文件而不是流式传输。我希望任何实现 HTML5 的东西都不会那么天真，但我认为你需要尝试一下。

第二种选择，添加额外的块似乎受到[RIFF 规范](http://en.wikipedia.org/wiki/Resource_Interchange_File_Format)的支持，其中[WAV 文件是一个子集](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)。然后，您可以编写一个 WAV 文件，其中包含多个较短的声音数据块。这应该被 WAV 播放器支持，但可能不是因为 WAV 文件从来没有特别好的标准化，而且很多[播放器只是寻找](http://www.topherlee.com/software/pcm-tut-wavformat.html)不太符合 RIFF 的 44 字节标题！

如果我是你，我会先尝试第一个选项，看看效果如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:00:32.970

好的，这就是我最终要做的事情，我的 Go 代码通过 ffmpeg 进程将原始 PCM 数据通过管道传输，该进程将其转换为 mp3。我假设`packets`是我的音频数据出现的通道，并且`response`是 http.ResponseWriter

```
cmd := exec.Command("ffmpeg", "-v", "verbose", "-f", "u16le", "-ar", "44100", "-ac", "1", "-i", "-", "-f", "mp3", "-")
audioIn, err := cmd.StdinPipe()
if err != nil {
    log.Println("Failed to create stdin pipe")
}
audioOut, err := cmd.StdoutPipe()
if err != nil {
    log.Println("Failed to create stdout pipe")
}
err = cmd.Start()
if err != nil {
    log.Println("Failed to start ffmpeg command, error: ", err)
}
go func() {
    for {
        packet := <-packets
        audioIn.Write(packet.Payload)
    }
}
go func() {
    amount, err := io.Copy(response, audioOut)
    if err != nil {
        log.Println("io copy terminated with an error", err)
    }
    log.Printf("Done copying audio data: %d bytes\n", amount)
}()
err = cmd.Wait()
if err != nil {
    log.Println("ffmpeg command terminated incorrectly", err)
} 
```

# c# - 从上下文菜单打开 winform 应用程序时获取文件路径。

> ID：15230931
> 
> 赞同：2
> 
> 时间：2013-03-05T18:03:46.630
> 
> 标签：c#

从右键菜单中使用我的 winform 应用程序打开文件时，我似乎无法获得正确的文件路径。我希望能够右键单击一个文本文件，运行我的程序（regedit.exe 中的 c:\MyApp %1）并在程序打开之前让文件路径出现在消息框中。现在我似乎得到的只是我实际程序的文件路径。这就是我到目前为止所拥有的。

```
public partial class Form1 : Form
{
    public Form1()
    {   
       string[] args = Environment.GetCommandLineArgs(); 
       foreach (string arg in args)
       {
          MessageBox.Show(arg);
       }
       InitializeComponent();
    } 
```

任何帮助将不胜感激。我知道这可能是一个简单的解决方法，但我对此很陌生，可能会遗漏一些明显的东西。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T22:58:41.527

不确定此信息是否有帮助，因为听起来您已经检查了所有这些，但我刚才运行了这个快速测试并且它有效：
首先，注册表设置应该如下所示。如果 %1 周围没有引号，并且它是一个长文件名，例如“New Text Document.txt”，则每个单词都将成为一个单独的参数，因此请务必在“%1”周围加上引号。 ![注册表设置](../Images/1575fa086eb9c79aee49e6dfb7340330.png)

假设注册表设置正确，您现在应该在右键单击文本文件时看到新命令：
![右键菜单](../Images/dc06b373176544fbe177c2983fda14dc.png)

当您的程序运行时，数组中的第一项，即 args[0]，将是 EXE 的路径. 第二项，即 args[1]，应该是文件的名称。

如果您添加了
MessageBox.Show(args[1])
当您通过右键单击运行时，您应该会看到整个文件的名称。如果你得到一个错误说“索引超出了数组的范围”，那么它肯定没有得到参数。

测试程序是否正常工作的一种方法是打开 DOS 提示符并像这样键入程序的路径并按回车键：

c:\MyApp.exe “应出现此行”

这会绕过注册表并直接测试程序. 如果这可行，那么您就知道问题不在于程序本身，而在于注册表设置。如果这不起作用，那么 C# 代码仍然存在一些问题。

# css - 没有填充/边距的文本后的间距

> ID：15230932
> 
> 赞同：1
> 
> 时间：2013-03-05T18:03:51.780
> 
> 标签：css, html

我正在寻找如何在段落中的文本后添加间距。

HTML：

```
<h1>abc</h1> 
```

CSS：

```
h1 {
    float: left;
    background: red;
    color: white;
    text-indent: 15px;
}

h1:after {
    content: '';
    margin-left: 15px;
} 
```

但是：只能在现代浏览器中工作？如何在没有填充和边距的旧浏览器的文本后添加空格？

工作演示：http: [//jsfiddle.net/YS2MQ/1/](http://jsfiddle.net/YS2MQ/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:06:25.823

您可以考虑将`&nbsp;`实体添加到 html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:11:33.860

使用填充：

```
h1 {
    padding: 0 15px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:12:59.790

我能想到的一些方法在这个小提琴中：http: [//jsfiddle.net/YS2MQ/3/](http://jsfiddle.net/YS2MQ/3/)我在这个答案的末尾添加了一个完全不同的解决方法。

**HTML：**

```
<h1 class="ie8plus">abc</h1>

<h1 class="border">abc</h1>

<h1 class="cc">abc<!--[if lte IE 7]> <span>I'm IE7-, let me die please</span><![endif]--><!--[if gt IE 8]><!--> not IE7- here<!--<![endif]--></h1>

<h1 class="textindent"><span>abc</span></h1>

<h1>.after<span class="after"> </span></h1> 
```

**CSS：**

```
body {
    margin: 10px;
}

h1 {
    float: left;
    clear: left;
    margin-bottom: 5px;
    background: red;
    color: white;
    text-indent: 15px;
}

.ie8plus:after {
    content: '';
    margin-left: 15px;
}

.border {
    border-right: 20px solid blue; /* you want red obviously. 'transparent' won't work in IE7- so you must have a solid background under h1 */
}
.textindent {
    text-indent: 35px; /* already 15px and we add 20px */
}
.textindent span {
    position: relative;
    left: -20px;
}
.cc span { /* HTML conditional content only interpreted by IE7-. Messy on so many levels... Let's keep the use of conditional comments to conditional stylesheets and conditional classes! */
    background-color: yellow;
    color: black;
}
h1 .after {
    display: inline; zoom: 1; /* that's inline-block for IE7-... and inline isn't required as span is already inline */
    width: 20px;
    height: 1px;
    vertical-align: middle;
    background-color: darkred;
} 
```

**用一句话来说：**

*   您可以添加右边框，
*   您可以滥用条件注释来强制 IE7- 看到其他浏览器看不到的 HTML 内容（注意：每页多次使用它，这将无法管理），
*   您可以将文本包含在 a`span`中并使用`text-indent`和相对定位，
*   您可以添加一个空`span.after`来模仿伪 `:after （我在小提琴中留了一个空格，但我认为没有必要）。是的，这是额外的代码和*等等等等*，但是如果你被迫支持旧浏览器的约束和他们不支持的方法，那么剩下的选择不多了！;)

**或者：**

我在您的一条评论中看到您对`width`. **[使用 CSS 属性box-sizing](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)** （带有适当的供应商前缀）可以解决您的问题，其中填充和边框可以考虑到整个宽度，不再添加：

```
* { box-sizing: border-box } 
```

但这仅受 IE8+ 支持。这是 IE7-... 没有 doctype 的默认行为。*哦，讽刺！*
但一切都没有丢失，存在一个 polyfill：**[boxsizing.htc](https://github.com/Schepp/box-sizing-polyfill)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T19:19:13.777

[这是两个画布之间的空白](https://stackoverflow.com/questions/5078239/how-to-remove-the-space-between-inline-block-elements)（在本例中为换行符）

或者，您可以保留空白，并在 CSS 中将 float:left 添加到画布。如果你

[清除你的花车。](http://www.quirksmode.org/css/clearing.html)

# java - 将自定义 css 类附加到 SmartGWT 中 FormItem 的默认类

> ID：15230934
> 
> 赞同：1
> 
> 时间：2013-03-05T18:03:59.703
> 
> 标签：java, css, gwt, smartgwt, smartclient

如果我们没有显式设置类，SmartGWT 将默认设置某些 FormItem 的 css 类。例如，一个 TextItem 将如下所示：

```
<input ... class="textItem" ...> 
```

SmartGWT 中有一个方法可以显式地为某些 FormItem 设置一个 css 类：

```
textItem.setTextBoxStyle("foo"); 
```

但是此方法删除了所有以前的 css 类，包括默认类。有没有办法不删除而是将一些自定义类附加（或插入）到 FormItem？我想得到以下结果：

```
<input ... class="textItem foo" ...> or 
```

SmartGWT 将根据触发的事件在用户交互期间更改最后一个 css 类。所以我会在默认类之前插入我的自定义类，以保持 FormItem 看起来相同：

```
<input ... class="foo textItem" ...>
<input ... class="foo textItemFocused" ...>
<input ... class="foo textItemDisabled" ...> ect. 
```

有可能这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:59:42.463

我从未使用过 SmartGWT，所以也许这不是最好的解决方案。

您可以使用`getTextBoxStyle`( [Javadoc](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/form/fields/FormItem.html#getTextBoxStyle%28%29) ) 获取类字符串，然后将其添加到您自己的类中并再次设置它。

如果您打算稍后删除该类，您只需要“保存”您的 css 类。

# hadoop - hdfs 局域网ip地址主机名解析

> ID：15230946
> 
> 赞同：2
> 
> 时间：2013-03-05T18:05:01.683
> 
> 标签：hadoop, hdfs

我正在我的 LAN 上设置 2 个从属设备的 hdfs 集群。

每当我给他们的IP地址。HDFS 尝试从中获取主机名。

它只能在非主机名上的 IP 地址上工作吗？

是否有一个设置来告诉工作只使用 IP 地址而不是主机名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:54:04.513

似乎它不能单独处理 IP 地址。

> 为了使集群正常运行，字符串的一部分必须是主机名（例如*mynamenode*）而不是 IP 地址。

[在这里](https://ccp.cloudera.com/display/CDH4DOC/Deploying+HDFS+on+a+Cluster)阅读更多。

同样从[这里](http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/hdfs-default.xml)引用，对配置的解释`dfs.datanode.dns.nameserver`如下：

> 名称服务器 (DNS) 的主机名或 IP 地址，DataNode 应使用它来确定**NameNode 用于通信和显示目的的主机名**。

所以看起来 HDFS 使用主机名只是为了它的所有通信和显示目的。

# ios - 如果按下 UIButton，手势不会触发

> ID：15230947
> 
> 赞同：1
> 
> 时间：2013-03-05T18:05:04.783
> 
> 标签：ios, objective-c, cocoa-touch, cocoa

我有一个大按钮，在它上面上下滑动会使用简单的手势触发一些方法。单击它会触发`TouchUpInside`带有 的事件`largestButtonSingleTap`。我的问题是，如果我点击 largeButton 并按住它，然后向上滑动一秒钟后，滑动手势将不起作用。试图找出原因。我在该按钮上还有一些其他事件，例如 DragInside 、 TouchDown 、 DragExit 、 TouchCancel 。我取消了所有这些并保留了一个空方法（注释掉了 largeButtonSingleTap 中的所有内容）但是，如果按下按钮 > 小暂停 > swipeUp > 将不会触发。谢谢

```
UISwipeGestureRecognizer *upRecognizer;
upRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeUp:)];
[upRecognizer setDirection: UISwipeGestureRecognizerDirectionUp];
[_largestButton addGestureRecognizer:upRecognizer]; 
```

* * *

```
 - (IBAction)largestButtonSingleTap:(UIButton *)sender
    { //some more code here

        [UIView animateWithDuration:0.4 animations:^() {
    ...
        }completion:^(BOOL finished){}];
    ...

} 
```

## -

**编辑：** 阅读此处建议的答案后，我开始了一个新项目，认为我的代码有问题，但仍然无法正常工作。这是新项目 [http://pastebin.com/yz7NaqUD](http://pastebin.com/yz7NaqUD)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:14:32.950

UISwipeGestureRecognizer 是离散手势，所以你不能这样做。

[https://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizer_basics/GestureRecognizer_basics.html](https://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizer_basics/GestureRecognizer_basics.html)

Touchdown 可以与其他连续手势一起使用，例如平移、捏合、旋转。

尝试另一种方式，继承 UIButton 并实现 touchesMove。

参考：[iOS 自定义手势识别器测量长按的长度](https://stackoverflow.com/questions/11669212/ios-custom-gesture-recognizer-measure-length-of-longpress)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:28:00.383

动画块可能会阻止用户交互。尝试在您的 largeButtonSingleTap: 方法中使用 allowUserInteraction 动画选项。

```
[UIView animateWithDuration:0.4 delay:0.0f options:UIViewAnimationOptionAllowUserInteraction animations:^{
    //
} completion:^(BOOL finished) {
    //
}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T18:42:00.890

尝试将代理设置为您的手势识别器并实现：

```
- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer {
    return YES;
} 
```

# html - 全高 - Web 响应式 - Twitter Bootstrap

> ID：15230949
> 
> 赞同：4
> 
> 时间：2013-03-05T18:05:07.743
> 
> 标签：html, css, twitter-bootstrap, responsive-design

有人知道如何在 Twitter Bootstrap 中设置 div 在所有分辨率下始终处于全高（屏幕高度的 100%）？

我会非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T20:28:07.460

基本上，DIV 的任何父容器也需要为 100%——这包括 BODY、HTML 等。您可以在“bootstrap.css”之后添加一些 CSS 来覆盖 Bootstrap CSS，如下所示：

```
html,body{height:100%;}

.container {
    height:100%;
}

.fill{
    width:100%;
    height:100%;
    min-height:100%;
    background-color:#990000;
    padding:10px;
    color:#efefef;
} 
```

[http://jsfiddle.net/skelly/zrBGw/](http://jsfiddle.net/skelly/zrBGw/)

# php - 来自变量的php变量

> ID：15230957
> 
> 赞同：-4
> 
> 时间：2013-03-05T18:05:42.317
> 
> 标签：php

我有一个变量，我想用它创建一个变量。我从数据库中获取变量并将其与一些文本放在一起，然后我想要另一个变量。

例如

```
$a = $ . "txt" . $d; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T18:07:11.130

试试这个。它将从另一个变量创建一个变量。

`$a = ${'txt'.$d}`

Ps 这是一个被问过几次的问题。您可能只需在 google 上搜索问题即可找到答案。

# url - 如何从java中的相对url获取绝对url

> ID：15230959
> 
> 赞同：1
> 
> 时间：2013-03-05T18:05:43.500
> 
> 标签：url, web-crawler, relative-url

我有一个类似 mypage.com/a/b/somePage.html 的页面，其中一个锚点 href 属性类似于“a/b/anotherPage.html”。

当我尝试通过创建具有页面 url 和 href 值的新 url 对象来获取绝对 url 时，我得到的绝对 url 为 mypage.com/a/b/a/b/anotherPage.html。

这给我带来了问题，但是浏览器如何正确处理这个问题。

任何开箱即用的东西都可以解决这个问题。（我总是可以在代码中添加一个异常来以不同的方式处理这个问题，但我不想这样做。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:09:23.457

使用 java.net.URL

```
URL baseUrl = new URL("http:www.google.com/someFolder/");
URL url = new URL( baseURL , "../test.html"); 
```

# email - NLog 限制在设定的时间段内记录相同错误的次数

> ID：15230962
> 
> 赞同：5
> 
> 时间：2013-03-05T18:05:47.420
> 
> 标签：email, logging, log4net, nlog

每当发生“严重”错误时，我们都会使用 NLog 发送电子邮件。在某些情况下，它可能会经常发生，生成太多消息。

有没有办法让 NLog 限制它在设定的时间内发送一个特定或任何错误的消息数量？

log4net 或任何其他流行的日志库中是否有类似的机制？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-05T09:09:25.603

配置文件更改：

```
 <target name="SystemErrorLog" xsi:type="TokenTimeThrottler" EntryExpirationPeriodSec="300">
    <target xsi:type="AsyncWrapper" queueLimit="5000" overflowAction="Discard">
      <target xsi:type="Mail" ... />
    </target>   </target> 
```

目标类别：

```
[Target("TokenTimeThrottler", IsCompound = true)]
public class ThrottlingLogTarget : CompoundTargetBase
{
    private ITokenTimeThrottler _tokenTimeThrottler;

    public ThrottlingLogTarget()
        : this(new Target[0])
    {
    }

    public ThrottlingLogTarget(params Target[] targets)
        : base(targets)
    {
    }

    [Required]
    public int EntryExpirationPeriodSec { get; set; }

    protected override void InitializeTarget()
    {
        base.InitializeTarget();

        _tokenTimeThrottler = new TokenTimeThrottler(EntryExpirationPeriodSec > 0 ? EntryExpirationPeriodSec : 0);
    }

    protected override void Write(AsyncLogEventInfo logEvent)
    {
        if (this.Targets.Count == 0)
        {
            logEvent.Continuation(null);
            return;
        }

        var token = string.Format("{0},{1},{2}", logEvent.LogEvent.LoggerName, logEvent.LogEvent.Level, logEvent.LogEvent.FormattedMessage);

        if (_tokenTimeThrottler.CheckAllow(token))
        {
            foreach (var target in Targets)
            {
                target.WriteAsyncLogEvent(logEvent);
            }
        }
    }
}

public class TokenTimeThrottler : ITokenTimeThrottler
{
    private readonly ConcurrentDictionary<string, DateTime> _entriesLastTimes;
    private readonly int _expirationPeriodSec;

    public TokenTimeThrottler(int entryExpirationPeriodSec)
    {
        _entriesLastTimes = new ConcurrentDictionary<string, DateTime>();

        _expirationPeriodSec = entryExpirationPeriodSec;
    }

    public bool CheckAllow(string token)
    {
        DateTime lastLoggedTime;

        if (_entriesLastTimes.TryGetValue(token, out lastLoggedTime))
        {
            DateTime? updatedTime = null;

            if (lastLoggedTime.AddSeconds(_expirationPeriodSec) < DateTime.Now)
            {
                updatedTime = DateTime.Now;
            }

            _entriesLastTimes.AddOrUpdate(token, k => updatedTime ?? lastLoggedTime,
                                            (k, v) => updatedTime ?? v);

            return updatedTime.HasValue;
        }

        _entriesLastTimes.AddOrUpdate(token, k => DateTime.Now, (k, v) => v);

        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T15:50:49.577

您可以在此处查看我对类似 log4net 问题的回答：

[log4net - 任何仅记录第 N 条消息的过滤器？](https://stackoverflow.com/questions/1208541/log4net-any-filter-for-logging-only-the-nth-message/4308493#4308493)

在那个答案中，我提出了一个自定义 log4net 过滤器实现，它允许在可配置的时间段内限制重复的消息。

对于 NLog，最简单的方法可能是编写自定义 Wrapper[目标](https://github.com/nlog/nlog/wiki/Targets)。自定义 Wrapper 目标实现将检查传入的日志消息，如果当前消息与最新消息不同（或者可能已经过了一定时间），则转发。然后，您可以使用此自定义包装器包装任何现有目标。

请注意，我实际上并没有编写 Wrapper 目标，否则我会尝试提供更多信息。

# python - \distutils\dist.py:267：用户警告：未知分发选项：'use_2to3'

> ID：15230963
> 
> 赞同：0
> 
> 时间：2013-03-05T18:05:50.320
> 
> 标签：python, django

我遇到了一个 github 项目，我正在尝试安装并运行它，但遇到了一些问题（[https://github.com/andrewschoen/django-cms-demo](https://github.com/andrewschoen/django-cms-demo)）。我也将此作为一个问题提出[https://github.com/andrewschoen/django-cms-demo/issues/2](https://github.com/andrewschoen/django-cms-demo/issues/2)。整个 pip 日志在那里可用。

如果我理解正确，问题似乎围绕着 disutil：

```
f:\python27\Lib\distutils\dist.py:267: UserWarning: Unknown distribution option: 'use_2to3'
 warnings.warn(msg)
 error: Unable to find vcvarsall.bat 
```

我刚从 python 和 django 开始，来自 php。我正在尝试将此项目设置在 USB 驱动器上，并且正在使用 win7。

提前感谢您的想法，

账单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:21:25.650

> 错误：无法找到 vcvarsall.bat

您的系统中没有有效的 Visual C++ 安装。[Visual C++ Express Edition](http://www.microsoft.com/visualstudio/eng#products/visual-studio-express-products)是免费的，您可以下载并安装它。

如果安装了 Visual C++ 但您仍然遇到问题，请检查以下环境变量

VS100COMNTOOLS

VS110COMNTOOLS

确定它们是否已设置并定位到有效的 Common7\Tools 位置

# c# - 非英文windows下转换十进制

> ID：15230964
> 
> 赞同：3
> 
> 时间：2013-03-05T18:05:50.463
> 
> 标签：c#, .net, parsing, invariantculture

我已经在西班牙 MS Windows Server 下安装了 C# 应用程序。

所以这段代码以错误的方式工作。

```
decimal? top = 80.0m;
double convertedTop = (double)decimal.Parse(top.ToString(), CultureInfo.InvariantCulture); 
```

**convertTop 是 80000 但它应该是 80.0**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T18:07:45.620

## 不要那样做。

您的代码效率极低。

你应该把它改成

```
double convertedTop = Convert.ToDouble(top); 
```

如果编译时类型`top`是`decimal`or `decimal?`（相对于`object`or `IConvertible`or `ValueType`），您可以使用更高效的编译时强制转换：

```
double convertedTop = (double)top; 
```

* * *

要回答这个问题，`top.ToString()`是文化敏感的。
你也需要经过`CultureInfo.InvariantCulture`那里。
`Nullable<T>`不会提升`ToString(IFormatProvider)`，因此您需要执行此操作`Value`并`null`明确处理。

# php - 使用 CURRENT_TIMESTAMP 时将表单数据插入 mysql 失败？

> ID：15230965
> 
> 赞同：0
> 
> 时间：2013-03-05T18:05:52.617
> 
> 标签：php, html, mysql

我正在尝试将表单中的数据插入到 mysql 中，这工作正常，但是当我添加带有 TimeStamp 和 CURRENT_TIMESTAMP 的“date_created”列时，它会导致 sql 查询失败吗？

谁能告诉我这是为什么？

这是我的mysql函数：

```
<?php ob_start(); 

// CONNECT TO THE DATABASE
    require('../includes/_config/connection.php');
// LOAD FUNCTIONS
    require('../includes/functions.php');

$username = $_POST['username'];
$password = $_POST['password'];
$firstname = $_POST['firstname'];
$lastname = $_POST['lastname'];
$email = $_POST['email'];
$age = $_POST['age'];
$gender = $_POST['gender'];
$country = $_POST['country'];

$query="INSERT INTO ptb_registrations (ID,
username,
password,
firstname,
lastname,
email,
age,
gender,
country

 )
VALUES('NULL',
'".$username."',
'".$password."',
'".$firstname."',
'".$lastname."',
'".$email."',
'".$age."',
'".$gender."',
'".$country."'
)";
mysql_query($query) or die ('Error updating database');
?>

<?php include ('send_email/reg_email.php'); ?>

<? ob_flush(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:22:47.453

如果您的列不是时间戳，那么像这样更改您的表

```
 ALTER TABLE table_name ADD DEFAULT (CURRENT_TIMESTAMP) FOR [Cold2] 
```

或者还有其他情况，如果您可以添加curent_date by `CURDATE()`or`NOW()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:16:10.537

您可以尝试将日期/时间列添加到您的表格中。然后再次尝试插入查询并查看它是否有效：

```
 ALTER TABLE table_name ADD timeanddate_colname TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP; 
```

# android - 将视图背景设置为渐变时出现空指针异常

> ID：15230975
> 
> 赞同：0
> 
> 时间：2013-03-05T18:06:11.013
> 
> 标签：android, nullpointerexception

我一直面临一个非常奇怪的问题。我看不到我设计的 UI 的预览。我正在尝试将视图的背景设置为定义的渐变。我不知道是什么导致了问题。这是 UI xml 和 Gradient xml 的代码。

渐变 XML，vertical_fade.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape
    android:shape="line" xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient 
        android:startColor="#ffffff"
        android:centerColor="#000000"
        android:endColor="#ffffff"
        android:angle="270"/>
</shape> 
```

和 UI xml 的代码，这个 xml 是列表行的布局。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:fadingEdgeLength="5dp"
    android:gravity="center_vertical"
    android:orientation="horizontal"
    android:paddingRight="?android:attr/scrollbarSize" >

    <ImageView 
        android:id="@+id/contact_type_icon"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:src="@drawable/call"
        android:layout_margin="2dp" 
        />

    <View
        android:id="@+id/type_divider"
        android:layout_width="3dp"
        android:layout_height="fill_parent"
        android:background="@drawable/vertical_fade"
        android:layout_marginLeft="3dp" />

    <LinearLayout 
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:paddingLeft="4dp"
        android:layout_weight="6">

        <TextView 
            android:id="@+id/detail_type"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textSize="20sp"
            android:text="Detail_Type" />

        <TextView
            android:id="@+id/detail_detail"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textSize="16sp"
            android:text="Detail_Detail" />
    </LinearLayout>

    <LinearLayout 
        android:gravity="right"
        android:orientation="horizontal"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1">

    <View 
        android:id="@+id/type_divider_secondary"
        android:layout_width="3dp"
        android:layout_height="fill_parent"
        android:background="@drawable/vertical_fade"
        android:layout_marginRight="3dp"
        />

    <ImageView
        android:id="@+id/second_action"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:src="@drawable/sms" 
        android:layout_gravity="right"
        android:layout_margin="2dp" />
    </LinearLayout>
</LinearLayout> 
```

在 UI 中，使用的两个视图是我收到错误的点。

好吧，LogCat 说

```
 03-05 23:47:42.886: E/AndroidRuntime(717): java.lang.NullPointerException
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.graphics.Canvas.drawLine(Canvas.java:809)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.graphics.drawable.GradientDrawable.draw(GradientDrawable.java:349)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.view.View.draw(View.java:6865)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.widget.AbsListView.dispatchDraw(AbsListView.java:1480)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.widget.ListView.dispatchDraw(ListView.java:3138)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.view.View.draw(View.java:6986)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.widget.AbsListView.draw(AbsListView.java:2584)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.view.View.draw(View.java:6883)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.view.View.draw(View.java:6883)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
03-05 23:47:42.886: E/AndroidRuntime(717):  at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1862)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.view.ViewRoot.draw(ViewRoot.java:1522)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1258)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.os.Looper.loop(Looper.java:123)
03-05 23:47:42.886: E/AndroidRuntime(717):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-05 23:47:42.886: E/AndroidRuntime(717):  at java.lang.reflect.Method.invokeNative(Native Method)
03-05 23:47:42.886: E/AndroidRuntime(717):  at java.lang.reflect.Method.invoke(Method.java:507)
03-05 23:47:42.886: E/AndroidRuntime(717):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-05 23:47:42.886: E/AndroidRuntime(717):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-05 23:47:42.886: E/AndroidRuntime(717):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T18:30:37.897

错误在于 shape="line"。

将此代码用于渐变背景：

```
 <?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item>
    <shape>
        <gradient
            android:angle="90"
            android:startColor="#ffffff"
            android:centerColor="#000000"
            android:endColor="#ffffff"
            android:type="linear" />
    </shape>
</item>
</selector> 
```

# algorithm - 迭代函数 - 分治函数

> ID：15230983
> 
> 赞同：1
> 
> 时间：2013-03-05T18:06:28.313
> 
> 标签：algorithm

我刚开始学习算法分析与设计课程？我只想知道：迭代函数和分治函数有什么区别？它们是一样的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:14:12.123

分而治之来自[维基百科](http://en.wikipedia.org/wiki/Divide_and_conquer_algorithm)：

> 分而治之的算法通过递归地将问题分解为两个或多个相同（或相关）类型的子问题来工作，直到这些子问题变得简单到可以直接解决。

[来自维基百科](http://en.wikipedia.org/wiki/Iterated_function)的迭代函数：

> 在这个过程中，从某个初始数字开始，应用给定函数的结果作为输入再次输入到函数中，并重复这个过程。

所以他们不一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:09:44.737

分而治之的算法会将问题分成更小的部分，你解决更小的部分，然后聚合以获得最终解决方案。

迭代算法是您尝试通过遍历整个问题来解决整个问题。

这绝不是权威的答复。

感谢黑熊的建议。

斐波那契数列的迭代示例是这样的

[http://en.literateprograms.org/Fibonacci_numbers_(Scala)](http://en.literateprograms.org/Fibonacci_numbers_(Scala))

分而治之的方法是这样的

```
def fibo(n:Int):Int = { if(n==1 || n==0) 1 else fibo(n-1) + fibo(n-2)} 
```

希望这些例子增加更多的清晰度

# regex - 有人可以解释这个正则表达式吗？

> ID：15230996
> 
> 赞同：1
> 
> 时间：2013-03-05T18:07:16.947
> 
> 标签：regex, qt, syntax

我正在阅读 Qt 示例以了解语法突出显示。我无法理解这一点：

```
QRegExp exp("//[^\n]*"); 
```

请解释一下。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T18:08:42.203

两个斜杠，然后是零个或多个字符，除了换行符之外的任何字符。这看起来像一个匹配评论的正则表达式，例如：

```
// this is a comment 
```

*   `//`仅表示两个斜杠的文字序列。
*   方括号内的东西是一个组。如果以它开头，`^`则表示“不在此组中”。`\n`表示换行符，因此`[^\n]`表示“除换行符之外的任何字符”。
*   星号，`*`大致意思是“零个或多个前面的字符或组”。

[QRegExp 文档](http://qt-project.org/doc/qt-4.8/qregexp.html)有相当不错的文章。只要有条不紊，从左到右按自己的方式工作，以了解模式的含义。

# c - 了解 isdigit() 在 C 中的工作原理

> ID：15230998
> 
> 赞同：0
> 
> 时间：2013-03-05T18:07:21.253
> 
> 标签：c, string, int

我正在尝试检查从文件中读取的某些变量是否不是整数，如果它们没有忽略它们并继续打印错误消息。所以我使用 isdigit() 来查看变量是否为整数，并且它在某种意义上继续“向后”工作。

```
int parseStudent(struct student *person, char *data){

char *ptr;
int temp;

int i = 0;

ptr = strtok(data, DELIM);

temp = atoi(ptr);

if(isdigit(temp)){printf("Invalid TERM integer!\n");}

//if(!isdigit(temp)){printf("Invalid TERM integer!\n");}

//person[i].term = temp;

ptr = strtok(NULL, DELIM);

person[i].id = atoi(ptr);

ptr = strtok(NULL, DELIM);

strcpy(person[i].lastname, ptr);

ptr = strtok(NULL, DELIM);

strcpy(person[i].firstname, ptr);

ptr = strtok(NULL, DELIM);

strcpy(person[i].subjectname, ptr);

ptr = strtok(NULL, DELIM);

person[i].catalog = atoi(ptr);

ptr = strtok(NULL, DELIM);

strcpy(person[i].section, ptr);

} 
```

现在，正如您在我的第一次检查中看到的那样，我的意图是查看第一个 temp int（假设保存一个 int，它确实是“1301”）是否实际上是一个整数。当我使用未注释的行时，它不符合条件并且没有打印任何内容。当我使用注释行时，它会打印我的错误消息。这不是倒退吗！？我如何检查这些整数和字符串实际上是整数和字符串并在脸上报告错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:10:47.517

`isdigit`属于*字符*分类功能。所以这个函数会将返回的值解释`atoi`为一个字符（使用你的字符集，比如 ASCII）。这不会是你所期望的。如果你想处理错误，你可以阅读[这个答案](https://stackoverflow.com/a/15229434/1126268)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T18:11:42.743

isdigit - 检查文档 - 它应该用于字符变量，而不是整数值变量。

看看这个：

```
char digit = '1';
char notDigit = 'a';
char notEvenCloseADigit = 1;
int digitIsDigit = isdigit(digit);
int notDigitIsDigit = isdigit(notDigit);
int notEvenCloseADigitIsDigit= isdigit(notEvenCloseADigit); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T18:11:39.747

这不是倒退。如果它是一个数字，isDigit 返回 true，你说你使用了“1301”。因此，您未注释的行返回 true。然而，后者采用 !true 或 false。