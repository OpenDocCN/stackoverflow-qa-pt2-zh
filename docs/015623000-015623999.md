# StackOverflow 问答 15623000-15623999

# regex - 正则表达式和变量

> ID：15623004
> 
> 赞同：1
> 
> 时间：2013-03-25T19:22:03.600
> 
> 标签：regex

我是使用正则表达式的新手。虽然我了解大部分基础知识，但我对从正则表达式中提取变量的方法感到好奇。我试过用谷歌搜索它，但每次都做不到。

我想做的是从一行正则表达式中解析出任意数量的字符串单词。我的解析器未定义长度或通用语法。每个单词之间的分隔符也是未知的。Linux Bash 脚本使用 ${variablename}

示例：用户定义的正则表达式：“ *[a-zA-Z0-9]* ${variable1} *.** ${variable2} *...* ([0-9]+)_${variable3}”

我希望用户定义我要解析的字符串的正则表达式。我希望他们设置哪些项目是我关心的变量。稍后我可以验证输入字符串是否与此正则表达式匹配，然后将标记为 ${} 的任何内容作为变量提取出来。稍后，一旦我的程序收到上面用户定义的正则表达式，它将开始接受字符串输入：

“_hello12_world_randomjunk12345$#!_wide_123_96584_web”这个输入将匹配正则表达式，我将能够拉出：world as variable1 wide as variable2 web as variable3

我的实际问题：正则表达式是否有一个通用语法来处理正则表达式中的变量，而不是我上面写的 ${}？${} 是一个 bash 脚本，如果需要，我可以在我的程序中创建它，我只是想确保我没有重新发明轮子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:24:03.000

在 RegEx 中，您要提取的部分称为组，并通过用括号将表达式的适当部分括起来来标识。

从那里，您提取和使用这些值的方式将完全取决于您的语言/库，但搜索组应该会给您您所追求的。

# django - Django：为不同的组显示不同的菜单

> ID：15623007
> 
> 赞同：0
> 
> 时间：2013-03-25T19:22:16.140
> 
> 标签：django, menu

我们的网站有一个主要区域，每个人都可以访问并显示特定菜单。我们还有第二组（受密码保护），在访问该部分时会看到自己的菜单。最近，我们决定增加第三组。这个也受密码保护，在访问该部分时需要查看其自己的菜单。

这是当前代码，它似乎会根据访问该站点的组来更改菜单：

```
{% menu_item as page_item %}
{% ifequal page_item.menu.name "council" %}
{% show_menu "council" "main-menu" %}
{% else %}
{% show_menu "main" "main-menu" %}
{% endifequal %} 
```

我尝试为第三组插入另一个 ifequal 以查看其自己的菜单，但该语法显然不正确。我确信答案很简单，但这超出了我的范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:53:07.380

你可以试试

```
{% if page_item.menu.name == "council" %}
    {% show_menu "council" "main-menu" %}
{% elif page_item.menu.name == "the other group name" %}
    {% show_menu "the other group name" "main-menu" %}
{% else %}
    {% show_menu "main" "main-menu" %}
{% endif %} 
```

# c# - 如何将 XML 从数据集更改为 HTML UL

> ID：15623015
> 
> 赞同：0
> 
> 时间：2013-03-25T19:22:44.847
> 
> 标签：c#, html, xml, xslt

我正在开发一个 C# webforms 应用程序，并且有一个数据层，它根据客户编号和订单类型收集有关客户可以看到的菜单的信息。

我一直在使用 ASP.NET 菜单控件，直到 qa 部门要求更改菜单以在单击时展开而不是悬停。那时，我决定尝试使用更简单的 css/html/jquery 方法来制作菜单，但我遇到了麻烦。

我的数据层中有以下方法，它获取菜单信息并将其作为 XML 返回。我坚持的是如何获取正在收集的 XML，当我使用菜单控件并希望将其重新格式化为 UL 以便在我想做的 html/css 方法中使用时。

```
public static string BuildMenu(string cprcstnm, string docType)
    {
        DataSet ds = new DataSet();
        string connStr = ConfigurationManager.ConnectionStrings["DynamicsConnectionString"].ConnectionString;
        using (SqlConnection conn = new SqlConnection(connStr))
        {
            string sql = "usp_SelectItemMenuByCustomer";
            SqlDataAdapter da = new SqlDataAdapter(sql, conn);
            da.SelectCommand.CommandType = CommandType.StoredProcedure;
            da.SelectCommand.Parameters.Add("@CPRCSTNM", SqlDbType.VarChar).Value = cprcstnm;
            da.SelectCommand.Parameters.Add("@DOCID", SqlDbType.VarChar).Value = docType;
            da.Fill(ds);
            da.Dispose();
        }
        ds.DataSetName = "Menus";
        ds.Tables[0].TableName = "Menu";
        DataRelation relation = new DataRelation("ParentChild",
                                                 ds.Tables["Menu"].Columns["MenuID"],
                                                 ds.Tables["Menu"].Columns["ParentID"],
                                                 false);

        relation.Nested = true;
        ds.Relations.Add(relation);

        return ds.GetXml();
    } 
```

输出的 XMl 样本如下：

```
<Menus>
- <Menu>
  <MenuID>23</MenuID> 
  <ITEMNMBR>0</ITEMNMBR> 
  <Text>ACC</Text> 
  <Description>ACC</Description> 
  <ParentID>0</ParentID> 
- <Menu>
  <MenuID>34</MenuID> 
  <ITEMNMBR>1</ITEMNMBR> 
  <Text>BASE</Text> 
  <Description>BASE</Description> 
  <ParentID>23</ParentID> 
- <Menu>
  <MenuID>516</MenuID> 
  <ITEMNMBR>2</ITEMNMBR> 
  <Text>HYP</Text> 
  <Description>HYP</Description> 
  <ParentID>34</ParentID> 
```

我需要将其转换为以下内容：

```
<ul class="dropdown">
    <li><a href="#">ACC</a>
        <ul class="sub_menu">
           <li>
          <a href="#">BASE</a>
              <ul>
            <li>
              <a href="#">HYP</a>
              <ul>
            <li><a href="#">Terminal 1</a></li>
            <li><a href="#">Terminal 1</a></li>
               </ul>    
        </li>
    </ul>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:31:12.160

您将从以下 MSDN 链接中获得一些想法，该链接说明了使用 xslt 从数据集中编写 html

[http://msdn.microsoft.com/en-us/library/8fd7xytc(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/8fd7xytc(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T19:33:49.897

没有通用的方法可以做到这一点。或者某种 GUI 工具可以为您制作。

您将不得不操作您的 XML 并将其转换为等效的（根据您的需要）html。

*   首先我建议您，如果您只想处理点击效果`MenuItems`和 CSS 相关问题，请不要更改它。您可以非常轻松地将 jQuery 函数绑定到您的`ASP Menu`项目。你可以很容易地做到这一点。只需添加一个`css class`并`asp:menuItem`使用 jQuery 抓取它，如下所示：

    ```
    <asp:Menu ID="myMenu" runat="server">
    ..
    <asp:MenuItem NavigateUrl="" CssClass="menuItem" Text="Menu1" Value="Menu1"/> 
    ```

    并抓住它

    ```
     $('.menuItem').click(function(){
             $(this).css({'width':'100px'});
      }); 
    ```

*   如果您真的要丢弃 ASP 菜单控件，而不是 XML 数据源`menus`，那么请准备好进行一些严重的字符串操作。像这样做。

    ```
    XmlDocument doc = new XmlDocument(xml);
    XmlNodeList menus = doc.SelectNodes("//Menus/Menu");

    string html ="<ul>";
    foreach(XmlNode menu in menus)
    {
       html += "<li><a href='#' >";
       html += menu.SelectSingleNode("Text").InnerText + "</a></li>";
    }
    html +="</ul>"; 
    ```

# vb.net - Linq 帮助 - Where 不在 where 子句中

> ID：15623028
> 
> 赞同：1
> 
> 时间：2013-03-25T19:23:39.773
> 
> 标签：vb.net, linq

我的 Linq 查询有这个问题。我是Linq的新手。我已经搜索了网络，但我没有解决这个问题。

本质上我希望查询运行但只返回其中一个字段中没有“5”的结果（我最初没有设计这个程序）

这就是我所拥有的，这给了我一个错误

```
Dim distinctRow = (From dr In (From _
                               row In _AcademicChoices.AsEnumerable() _
                               Select New With {.ID = row("AC_Academic_Choice_ID"), .Marketing = row("AC_Marketing_Desc"), .Program = row("AC_Program_Code"), .Track = row("AC_Track"), .DisplayRestrictedOn = row("DisplayRestrictedOn")} _
                             ) _
                   Where !dr.DisplayRestrictedOn.ToString().Contains("5")
                   Select dr.ID, dr.Marketing, dr.Program, dr.DisplayRestrictedOn, dr.Track Distinct) 
```

错误在于 Where 语句。我收到一条错误消息，上面写着“领先”。或者 '！' 只能出现在 'With' 语句中。”

任何有关如何进行的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:37:17.770

`!dr.DisplayRestrictedOn.ToString().Contains("5")`不是该上下文中的有效表达式。不像在 C#（或其他类似语言）中那样在 VB 中表示`!`逻辑。`Not`

那行应该是：

```
Where Not dr.DisplayRestrictedOn.ToString().Contains("5") 
```

# java - WebSphere 服务器未启动，抛出异常

> ID：15623029
> 
> 赞同：1
> 
> 时间：2013-03-25T19:23:44.973
> 
> 标签：java, spring, struts2, websphere-8

在 websphere 中启动 Web 应用程序时出现异常。Web 应用程序包含 spring ans struct jars

```
FFDC Exception:org.apache.struts2.StrutsException SourceId:com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.init ProbeId:111 Reporter:com.ibm.ws.webcontainer.filter.FilterInstanceWrapper@8f07691
Class: com.opensymphony.xwork2.spring.SpringObjectFactory
File: SpringObjectFactory.java
Method: getClassInstance
Line: 220 - com/opensymphony/xwork2/spring/SpringObjectFactory.java:220:-1
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:437)
    at org.apache.struts2.dispatcher.FilterDispatcher.init(FilterDispatcher.java:195)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.init(FilterInstanceWrapper.java:145)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager._loadFilter(WebAppFilterManager.java:568)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.loadFilter(WebAppFilterManager.java:475)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.getFilterInstanceWrapper(WebAppFilterManager.java:308)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.getFilterChain(WebAppFilterManager.java:380)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:892)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1025)
    at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3748)
    at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:304)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:962)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1662)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:459)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:526)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:312)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:283)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1814)
Caused by: java.lang.NullPointerException
    at com.opensymphony.xwork2.spring.SpringObjectFactory.getClassInstance(SpringObjectFactory.java:220)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.verifyResultType(XmlConfigurationProvider.java:530)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addResultTypes(XmlConfigurationProvider.java:501)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addPackage(XmlConfigurationProvider.java:457)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadPackages(XmlConfigurationProvider.java:275)
    at org.apache.struts2.config.StrutsXmlConfigurationProvider.loadPackages(StrutsXmlConfigurationProvider.java:111)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:204)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:66)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:380)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:424)
    ... 27 more 
```

# c# - 如何在 C# 中通过 SQL 数据读取器读取 SQL 函数值

> ID：15623031
> 
> 赞同：0
> 
> 时间：2013-03-25T19:23:54.080
> 
> 标签：c#, sql, ado.net

嗨，我有一个`tblRegistration`包含三个字段的表

```
Member_ID(int)  Left_Placement(Int) Right_Placement(int) 
```

和一个功能

```
CREATE FUNCTION [dbo].[fnGetChildCount](
@ParentId INT
)
RETURNS INT
BEGIN
 DECLARE @ChildCount INT
 DECLARE @Left INT
DECLARE @Right INT

SET @ChildCount = 0
 IF NOT @ParentId IS NULL AND @ParentId <> 0
 BEGIN
 SET @ChildCount = 1
 SELECT @Left = Left_Placement, @Right = Right_Placement FROM tblRegistration WHERE Member_ID = @ParentId
SELECT @ChildCount = @ChildCount + [dbo].[fnGetChildCount](@Left)
 SELECT @ChildCount = @ChildCount + [dbo].[fnGetChildCount](@Right)
 END
 RETURN @ChildCount
END; 
```

现在我使用此代码

```
 SqlCommand cmd = new SqlCommand("SELECT Member_ID, dbo.fnGetChildCount(Left_Placement) AS [Left Count], dbo.fnGetChildCount(Right_Placement) AS [Right Count] FROM tblRegistration", con);
    dr = cmd.ExecuteReader();
    if (dr.HasRows)
    {
        while (dr.Read())
        {
            string member = dr["dbo.fnGetChildCount(Left_Placement)"].ToString();

        }
    } 
```

然后读取不是表列的左计数和右计数

我如何阅读`LEFT COUNT(dbo.fnGetChildCount(Left_Placement) AS [Left Count]) AND RIGHT COUNT(dbo.fnGetChildCount(Right_Placement) AS [Right Count])`

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:28:58.480

使用列别名来检索计算的列值。

```
string leftCount = dr["Left Count"].ToString();
string rightCount = dr["Right Count"].ToString(); 
```

# visual-studio-2012 - Chutzpah 测试适配器未发现测试

> ID：15623032
> 
> 赞同：2
> 
> 时间：2013-03-25T19:23:57.313
> 
> 标签：visual-studio-2012, chutzpah

最近我安装了 Chutzpah 测试适配器扩展，用于在 VS2012 的测试资源管理器中运行我的 jasmine 测试，它开箱即用地运行良好。但是，在第二台机器上重复该过程后，我无法让测试显示在测试资源管理器中，而且我无法诊断原因。

我已将场景简化为创建一个新的空 ASP.NET Web 项目，添加 jasmine.js NuGet 包，然后添加一个包含单个测试的简单 test.js 文件。在第一台机器上，它几乎立即出现在测试资源管理器中；在第二个它根本没有。此外，在第一台机器上，我看到 Chutzpah 为 jasmine.js 而不是为 test.js 创建了一个 HTML 脚本运行程序文件；在第二台机器上（失败的地方）我看到它为两者创建了 HTML 脚本运行程序文件。手动打开 test.js 的脚本运行器页面实际上确实正确地调用了 jasmine 并且一切正常，我似乎无法获得测试资源管理器的集成。我尝试修改“测试模式”设置无济于事。有人对我还能研究什么有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:45:43.250

好的，我想通了；原来这是NVIDIA 驱动程序的[这个已知问题](http://chutzpah.codeplex.com/discussions/432612)导致 PhantomJS 挂起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-23T17:36:26.650

对于那些因为标题而导航到这个问题的人（挣扎于相同的表现形式）：如果您使用 requireJs 或其他异步方式加载测试脚本，也会发生这种情况。PhantomJs 不会因为图形驱动程序而挂起，而是因为模块加载超时，或者因为未解决的模块依赖关系。

因此，为了防止这种情况发生，在创建异步 chutzpah 测试时需要格外小心依赖解析。

# machine-learning - 需要陷入神经网络中的局部最优

> ID：15623040
> 
> 赞同：5
> 
> 时间：2013-03-25T19:24:21.317
> 
> 标签：machine-learning, neural-network

我需要陷入前馈神经网络中的局部最优。我需要一个示例和权重初始化，使用最陡梯度下降将陷入局部最优（在每个维度的特定边界权重内）。我找不到这样的例子，至少看起来如此，因此无法测试新算法。

谁能指出一些文件、资源，或者给我一个如何陷入局部最优的例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T22:30:09.873

让我们分析一下“陷入局部最优”是什么意思。看看[SARPROP 论文](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.47.8197&rep=rep1&type=pdf)。SARPROP 是一种前馈神经网络的学习算法，其目标是避免陷入局部最优。查看链接文档第 3 页上的图 1。**它显示了关于单个重量**的误差表面**. 在训练的早期阶段，这个误差面会迅速改变。但是一旦算法接近收敛，这个关于一个权重的误差面就会稳定下来。现在，如果您的学习算法无法将权重“推”过“山丘”以达到更好的最优值，那么您就陷入了某个权重的局部最优。SARPROP 试图通过向原始 RPROP 中涉及的权重更新添加正噪声来解决这个问题。所以算法有机会被推出这样的“山谷”。**

 **现在，为了构建局部最优的收敛，您应该计算一组随机权重，这些权重在下面保持固定。现在使用一种已知可以快速收敛到局部最优的学习算法，例如 RPROP。然后使用相同的权重初始化并应用 SARPROP 或您的新算法。然后在网络收敛后立即比较训练数据上的均方根误差。使用数百个权重初始化并应用统计信息来执行此操作。**

# php - foreach 只带回数组中的最后一项

> ID：15623041
> 
> 赞同：2
> 
> 时间：2013-03-25T19:24:22.117
> 
> 标签：php, arrays, database, foreach, rotten-tomatoes

我正在尝试根据来自两个不同表的信息从 API 中提取数据，然后再循环通过 foreach 并将这些数据解析到查询中。我已经构建了一系列查询，可以得到我正在寻找的确切数据（数组中第一部电影的名称和海报），但是当将此数据解析到返回一系列电影列表的 foreach 中时，我预定义的变量只被带回数组中的最终列表，而不是像预期的那样循环遍历它们。

这是我到目前为止所得到的：

**加工：**

```
// Get a user's Watchlists from the watchlists table
    $query = "SELECT * FROM watchlists WHERE user_id = " . $profile_info['id']; 
    $watchlist_result = mysql_query($query);
    $watchlists = array();
    while(($row = mysql_fetch_assoc($watchlist_result))) {
        $watchlists[] = $row;
    }

    // Count how many Watchlists a user has
    $watchlist_count = count($watchlists);

    // Echo details of each Watchlist
    echo "<pre>";
    print_r($watchlists);
    echo "</pre>";

    // For each Watchlist, select all of the films it contains and echo them out
    foreach ($watchlists as $key => $films) {
        // Get each Watchlist's ID from the watchlists table
        $watchlist_id = $films['watchlist_id'];
        echo "<pre>";
        print_r($watchlist_id);
        echo "</pre>";

        // Extract films from the watchlist_films table for each Watchlist, based on its unique ID and put them into an array
        $watchlist_film_query = "SELECT * FROM watchlist_films WHERE watchlist_id = " . $watchlist_id;
        $watchlist_film_result = mysql_query($watchlist_film_query);
        $watchlist_films = array();
        while(($row = mysql_fetch_assoc($watchlist_film_result))) {
            $watchlist_films[] = $row;
        }

        // Echo the new array
        echo "<pre>";
        print_r($watchlist_films);
        echo "</pre>";

        // Get the ID of the first film in each Watchlist
        $rt_id = $watchlist_films[0]['film_id'];

        // Echo the ID
        echo "<pre>";
        print_r($rt_id);
        echo "</pre>";

        // Initialise Rotten Tomates API
        include_once('/api/RottenTomatoes.php');

        /* Rotten Tomatoes */
        $rottenTomatoes = new RottenTomatoes('2b2cqfxyazbbmj55bq4uhebs', 10, 'uk');

        // Search Rotten Tomatoes for details on the first film in the array
        $rottenTomatoes->movieSearch($rt_id);

        //echo "<pre>";
        try {
            $result = $rottenTomatoes->getMovieInfo($rt_id);
            //print_r($result);
        } catch (Exception $e) {
            //print_r($e);
        }
        //echo "</pre>";

        // Get poster and name of first movie in array
        $thumbnail = $result['posters']['thumbnail'];
        $first_film_name = $result['title'];

        echo "<pre>";
        print_r($thumbnail);
        echo "</pre>";

        echo "<pre>";
        print_r($first_film_name);
        echo "</pre>";
    } 
```

现在，我想将此信息解析为实际页面，并打印出用户拥有的每个监视列表的所有信息。

**输出：**

```
if ($watchlist_count != 0) {?>
                        <ul class="unstyled"><?php
                            foreach($watchlists as $key => $watchlist_item) {?>
                                <li class="well list-item clearfix"><?php

                                    echo "<pre>";
                                    print_r($watchlist_item);
                                    echo "</pre>";

                                    echo "<pre>";
                                    print_r($watchlist_films);
                                    echo "</pre>";

                                    echo "<pre>";
                                    print_r($watchlist_id);
                                    echo "</pre>";

                                    echo "<pre>";
                                    print_r($thumbnail);
                                    echo "</pre>";

                                    echo "<pre>";
                                    print_r($first_film_name);
                                    echo "</pre>";?>

                                    <div class="row-fluid">
                                        <a href="watchlist.php?id=<?php echo $watchlist_item['watchlist_id']; ?>" title="<?php echo $watchlist_item['name']; ?> Watchlist">
                                            <img src="<?php echo $thumbnail; ?>" class="span1 pull-left" alt="<?php echo $first_film_name; ?> poster" title="<?php echo $first_film_name; ?> poster" />
                                        </a>

                                        <div class="span11 movie-info">
                                            <p class="search-title"><a href="watchlist.php?id=<?php echo $watchlist_item['watchlist_id']; ?>" title="<?php echo $watchlist_item['name']; ?> Watchlist"><?php echo $watchlist_item['name']; ?></a></p>

                                            <p class="search-synopsis"><?php echo $watchlist_item['description']; ?></p>
                                        </div>
                                    </div>

                                </li><?php
                            }?>
                        </ul><?php
                    } else {?>
                        <div class="well list-item">
                            You haven't created any Watchlists yet! Why not visit a movie page now and build your first?
                        </div><?php
                    }?> 
```

我遇到的问题是，虽然处理部分得到了我想要的东西（即每个监视列表中第一部电影的名称和缩略图），但当我将此信息解析到输出中时，**只有名称和海报显示最后一个 Watchlist 中的第一部电影**，如下所示：

![结果](../Images/3531366c23fe4ea760e33c67559fbfe3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:34:52.447

在处理过程中覆盖`$watchlist_films`，`$thumbnail`并且`$first_film_name`在 foreach 的每个循环中，您只能获取最后一次运行的数据。

您应该将数据添加回主数组，例如在 foreach 循环结束时，例如：

```
$films['watchlist_films']=$watchlist_films;
$films['thumbnail']=$thumbnail;
$films['first_film_name']=$first_film_name; 
```

然后，您可以在输出中访问数据，例如：

```
$watchlist_item['thumbnail'];
$watchlist_item['first_film_name']; 
```

所以你的处理可能看起来像这样（缩短）：

```
$query = "SELECT * FROM watchlists WHERE user_id = " . $profile_info['id']; 
$watchlist_result = mysql_query($query);
$watchlists = array();
while(($row = mysql_fetch_assoc($watchlist_result))) {
    $watchlists[] = $row;
}

// For each Watchlist, select all of the films it contains and echo them out
foreach ($watchlists as $key => $films) {
    $watchlist_film_query = "SELECT * FROM watchlist_films WHERE watchlist_id = " . $films['watchlist_id'];
    $watchlist_film_result = mysql_query($watchlist_film_query);
    $watchlist_films = array();

    //You don't need to load all data if you only want the first one:)
    $row = mysql_fetch_assoc($watchlist_film_result)
    $rt_id = $row['film_id'];

    // Initialise Rotten Tomates API
    include_once('/api/RottenTomatoes.php');

    /////Rotten Tomato Call /////
    //===> Rotten Tomatoe API call code goes here <=== //

    //You don't really need the whole films list
    //$films['watchlist_films']=$watchlist_films;
    $films['thumbnail']=$result['posters']['thumbnail'];
    $films['first_film_name']=$result['title'];
} 
```

和输出：

```
if (count($watchlists)> 0) {?>
                    <ul class="unstyled"><?php
                        foreach($watchlists as $key => $watchlist_item) {?>
                            <li class="well list-item clearfix"><?php

                                <div class="row-fluid">
                                    <a href="watchlist.php?id=<?php echo $watchlist_item['watchlist_id']; ?>" title="<?php echo $watchlist_item['name']; ?> Watchlist">
                                        <img src="<?php echo $watchlist_item['thumbnail']; ?>" class="span1 pull-left" alt="<?php echo $first_film_name; ?> poster" title="<?php echo $watchlist_item['first_film_name']; ?> poster" />
                                    </a>

                                    <div class="span11 movie-info">
                                        <p class="search-title"><a href="watchlist.php?id=<?php echo $watchlist_item['watchlist_id']; ?>" title="<?php echo $watchlist_item['name']; ?> Watchlist"><?php echo $watchlist_item['name']; ?></a></p>

                                        <p class="search-synopsis"><?php echo $watchlist_item['description']; ?></p>
                                    </div>
                                </div>

                            </li><?php
                        }?>
                    </ul><?php
                } else {?>
                    <div class="well list-item">
                        You haven't created any Watchlists yet! Why not visit a movie page now and build your first?
                    </div><?php
                }?> 
```

所有未测试;-)

# regex - 在perl中插入字符串中线

> ID：15623042
> 
> 赞同：-1
> 
> 时间：2013-03-25T19:24:22.290
> 
> 标签：regex, perl

所以我试图弄清楚如何将一个字符串附加到一个字符串的末尾，该字符串出现在文件的中线，并且在两者之间有一个变量。实现这一目标的最佳方法是什么？

示例字符串

```
depends = object_OBJA object_OBJB place_PLACEA place_PLACEB 
```

我想退货

```
depends = object_OBJA object_OBJB place_PLACEA[RANGE] place_PLACEB[RANGE] 
```

我试过使用正则表达式，但我似乎无法让它跳过 PLACEA 部分。

我试过的东西的例子。如果不直接更换，我似乎无法弄清楚如何保存 PLACEA。理想情况下，我可以让它找到该位置，跳过 _PLACEA 并在之后附加 [RANGE]，但它似乎只是替换了整个字符串。

```
perl -p -e 's/place.+?/[$"RANGE"]/ge' test.ctl 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T19:48:30.520

正`\K`则表达式运算符可能对您来说很有趣：它“忘记”它与之前的模式匹配。这对于替换非常有用，因为我们可以断言某个模式匹配，但实际上并不替换匹配的文本。这比环视断言更方便。

这将使您的替换：

```
s{ place_\w+ \K }
 {[RANGE]}xg; 
```

一个测试：

```
my $string   = "depends = object_OBJA object_OBJB place_PLACEA place_PLACEB";
my $expected = "depends = object_OBJA object_OBJB place_PLACEA[RANGE] place_PLACEB[RANGE]";

use Test::More;
(my $altered = $string) =~ s{ place_\w+ \K }{[RANGE]}xg;
ok $altered eq $expected, "correct substitution"; 
```

笔记：

*   我用来匹配单词`\w+`的其余部分。`place_`这可能会或可能不会做你想要的。您必须考虑插入的*确切位置。*`[RANGE]`
*   使用`\K`可能比使用捕获更高效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T19:28:36.583

也许是这样的：

```
$line =~ s/^(depends = object_OBJA object_OBJB place_PLACEA) (place_PLACEB)$/$1\[RANGE] $2\[RANGE]/ 
```

假设您想匹配上面放置的文字字符串。

*未经测试*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T20:32:47.003

```
#!/usr/bin/env perl

use 5.012;
use strict;
use warnings;

my $s = 'depends = object_OBJA object_OBJB place_PLACEA place_PLACEB';
$s =~ s/(place_PLACE.)/${1}[RANGE]/g;

say $s; 
```

输出：

```
依赖 = object_OBJA object_OBJB place_PLACEA[RANGE] place_PLACEB[RANGE]
```

# python - 请对我的示例 Python 程序进行代码审查

> ID：15623045
> 
> 赞同：7
> 
> 时间：2013-03-25T19:25:01.917
> 
> 标签：python, loops, while-loop

我仍在学习 Python，因为我想向 11 岁的孩子（我是一名教师）教授该语言的基本概念。我们在基础方面做了一些工作，因此他们了解编程和将任务分解成块等的要点。随着新课程的推出，Python 是一种将在英国各地教授的语言，我不想教孩子们坏习惯。下面是我编写的一个小程序，是的，我知道这很糟糕，但任何关于改进的建议都将非常感激。

我仍在学习该语言的教程，所以请保持温柔！:o)

```
# This sets the condition of x for later use
x=0
# This is the main part of the program
def numtest():
    print ("I am the multiplication machine")
    print ("I can do amazing things!")
    c = input ("Give me a number, a really big number!")
    c=float(c)
    print ("The number", int(c), "multiplied by itself equals",(int(c*c)))
    print("I am Python 3\. I am really cool at maths!")
    if (c*c)>10000:
        print ("Wow, you really did give me a big number!")
    else:
         print ("The number you gave me was a bit small though. I like bigger stuff than that!")

# This is the part of the program that causes it to run over and over again.
while x==0:
    numtest()
    again=input("Run again? y/n >>>")
    if x=="y":
        print("")
        numtest()
    else:
        print("Goodbye") 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T19:31:29.483

你似乎不需要这个变量`x`

```
while True:
    numtest()
    again = input("Run again? y/n >>>")
    if again == "y":       # test "again", not "x"
        print("")
    else:
        print("Goodbye")
        break              # This will exit the while loop 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T19:39:29.507

既然你想教好的风格：

1.  `x`除非您正在创建图形，否则不要使用变量名称。有关命名约定和样式，请参阅 PEP008。

2.  与您的空间保持一致：

    ```
    c = input ("Give me a number, a really big number!")

    c=float(c) 
    ```

不一致。哪种风格更好？

如果你真的想要一个无限循环，那么：

```
    而真：
        数测试（）

        再次 = input("再次运行？是/否 >>>")

        如果再次.lower().startswith("n"):
            打印（“再见”）
            休息

```

再说一次，有些人认为使用`break`是不好的风格，你同意吗？您将如何重写循环以便不使用 break？给你的学生做个练习吧？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T19:37:55.770

你必须打破循环

你的时间应该是

再次=='y'：

从而

```
again = 'y'

def numtest():
    print ("I am the multiplication machine")
    print ("I can do amazing things!")
    c = input("Give me a number, a really big number!")
    c = float(c)
    print ("The number", int(c), "multiplied by itself equals", (int(c * c)))
    print("I am Python 3\. I am really cool at maths!")
    if (c * c) > 10000:
        print ("Wow, you really did give me a big number!")
    else:
        print ("The number you gave me was a bit small though. I like bigger stuff than that!")

# This is the part of the program that causes it to run over and over again.
while again == 'y':
    numtest()
    again = input("Run again? y/n >>>")
    if again != "y":
        print("Goodbye") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T19:39:11.890

一些希望有用的评论：

### 使用文档字符串而不是注释来描述您的函数

```
def numtest():
    """Use a docstring. This is the main part of the program. Explain what a function is and why you want to use it. (Because it gives you scope and lets you simplify a complex set of procedures into a single operation.)""" 
```

### 为您的代码使用一致的样式，并尝试让您的学生也遵循它。

如果您不确定要遵循哪种风格，请使用[PEP-8](http://www.python.org/dev/peps/pep-0008/)。（在您的情况下，您在不同行的同一操作中处理空格的方式有所不同。）

```
print ("The number", int(c), "multiplied by itself equals",(int(c*c)))
print("I am Python 3\. I am really cool at maths!") 
```

### 为什么在这里做一个浮点数，然后再做一个整数？

教授计算机如何以不同于整数运算的方式处理浮点运算可能很有用，但这里并没有真正说明。

```
c = float(c)
print("The number", int(c), "multiplied by itself equals", (int(c*c))) 
```

### `numtest`你在循环中调用了两次

试试这个：

```
again = "y"
while again == "y":
    numtest()
    again = input("Run again? y/n >>>")
    print("")

# Take this out of the loop.
print("Goodbye") 
```

# asp.net - 列出从数据库中选择的记录。

> ID：15623053
> 
> 赞同：0
> 
> 时间：2013-03-25T19:25:32.963
> 
> 标签：asp.net, drop-down-menu, sqldatasource

在我的数据库中有 id、name、surname、city 字段。

假设有 30 个人有相同的名字。我想这样做；

从下拉列表 1 中选择名称后，下拉列表 2 仅根据所选名称显示城市名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:47:59.610

[在SelectedIndexChanged](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedindexchanged.aspx)事件上`dropdownlist2`从过滤器`DataSource`（只有过滤器数据）绑定`dropdownlist1`

在这里，我给出了一些想法，如何使用第一个下拉值作为第二个数据源的参数。

```
<asp:SqlDataSource ID="sqlDataSource2" runat="server"
    ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
    SelectCommand="SELECT * FROM Test WHERE Param = @param;"
    CancelSelectOnNullParameter="true">
    <SelectParameters>
        <asp:ControlParameter ControlID="dropDown1" Name="param"
            PropertyName="SelectedValue"
            ConvertEmptyStringToNull="true" />
    </SelectParameters>
</asp:SqlDataSource> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T19:58:50.127

您所要做的就是在您的第二个 DDL 数据源中使用第一个 ddl 值作为参数。如果您在第一个 DDL 上将 autopostback 设置为 true，则第二个 DDL 将在回发时填充。

# scala - Scala 重载构造函数和 super

> ID：15623059
> 
> 赞同：4
> 
> 时间：2013-03-25T19:25:52.343
> 
> 标签：scala, constructor, super, constructor-overloading

我无法理解如何在 Java 上开发类似于以下内容的 Scala 代码：

```
public abstract class A {
   protected A() { ... }
   protected A(int a) { ... }
}

public abstract class B {
   protected B() { super(); }
   protected B(int a) { super(a); }
}

public class C extends B {
   public C() { super(3); }
} 
```

虽然很清楚如何开发C类，但我不知道如何接收B。请帮助。

PS我正在尝试创建自己的从wicket WebPage 派生的BaseWebPage，这是Java 的常见做法

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T19:31:26.500

你的意思是这样的：

```
abstract class A protected (val slot: Int) {
    protected def this() = this(0)
}

abstract class B protected (value: Int) extends A(value) {
    protected def this() = this(0)
}

class C extends B(3) {
} 
```

AFAIK，没有办法从一种辅助形式绕过主要构造函数，即以下内容不起作用：

```
abstract class B protected (value: Int) extends A(value) {
    protected def this() = super()
} 
```

所有辅助构造函数形式都必须调用主构造函数。从[语言规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)（5.3.1 构造函数定义）：

> 除了主构造函数之外，一个类可能还有其他构造函数。它们由 def this(ps1)...(psn) = e 形式的构造函数定义。这样的定义为封闭类引入了一个额外的构造函数，其参数在形式参数列表 ps1、...、psn 中给出，其求值由构造函数表达式 e 定义。每个形式参数的范围是后续参数部分和构造函数表达式 e。**构造函数表达式是自构造函数调用 this(args1)...(argsn) 或以自构造函数调用开头的块**

（强调我的）。

# .htaccess - 如何为子域创建 htaccess

> ID：15623067
> 
> 赞同：0
> 
> 时间：2013-03-25T19:26:19.530
> 
> 标签：.htaccess, codeigniter

我在 domain.com 中有 subdomain.domain.com，当我在浏览器中键入 subdomain.domain.com 时，URL 写为[http://subdomain.domain.com/%20//subdomain.domain.com](http://subdomain.domain.com/%20//subdomain.domain.com)并且我有 .像这样的htaccess：

```
 RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ www.jubelmart.com/index.php/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

我可以得到帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:26:54.483

`enter code here`我会试试这个：

```
RewriteEngine On
RewriteBase /%20//subdomain.domain.com
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /%20//subdomain.domain.com/index.php/$1 [L] 
```

确定`/20%//`uri 段是正确的？我真的不认为使用双斜杠是一个好习惯`//`

# c# - 必须声明标量变量“@campusVisitDate”

> ID：15623068
> 
> 赞同：2
> 
> 时间：2013-03-25T19:26:20.240
> 
> 标签：c#, asp.net, sql

我在使用 C# 插入 SQL 数据库时遇到问题。我得到的错误是

必须声明标量变量“@campusVisitDate”。

@campusVisitDate 是我给一个值然后添加到数据库中的参数。
这是给我带来问题的代码

```
conn2.Open();
SqlCommand cmd = conn2.CreateCommand();
DateTime date = DateTime.Now;
date.ToString("yyyy-MM-dd", System.Globalization.CultureInfo.GetCultureInfo("en-US"));
cmd.CommandText = "INSERT INTO TableName (DateRequested, OnCampus, OnCampusVisitDate, Name, Title, Email, Phone, Fax, MinCumGPA, Keywords, EmployerNotes, ThirdParty, JobFair, CompanyURL) VALUES (@date,@onCampus,@campusVisitDate,@name,@title,@email,@phone,@fax,@mcgpa,@keywords,@empnotes,@tp,@jobfair,@compurl)";
cmd.Parameters.AddWithValue("@date",date);

if (campusvisit == 1)
{
    cmd.Parameters.AddWithValue("@onCampus", 1);
    cmd.Parameters.AddWithValue("@campusVisitDate",campusVisitDate);   
}
else
{
    cmd.Parameters.AddWithValue("@onCampus", 0);
} 
```

OnCampusVisitDate 列的类型为 DateTime，变量 CampusVisitDate 也已格式化为 DateTime 类型。

无论出于何种原因，这是唯一给我带来问题的专栏，所有其他专栏都很好，甚至 DateRequested 也是 DateTime 类型。

也许我只是错过了一些小东西，但我已经解决这个问题一段时间了，希望得到一些帮助。

（如果您需要更多代码，请询问，我会发布）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T19:29:50.457

```
 else
    {
        cmd.Parameters.AddWithValue("@onCampus", 0);
        cmd.Parameters.AddWithValue("@campusVisitDate",null);  
    } 
```

# c#-4.0 - SQL Server RMO - 创建发布时出错

> ID：15623070
> 
> 赞同：1
> 
> 时间：2013-03-25T19:26:28.987
> 
> 标签：c#-4.0, sql-server-2008-r2, database-replication, rmo

我有以下情况：分发作为分发数据库，​​production1 作为发布数据库，production2 作为订阅者。当我尝试通过 C# RMO 创建发布时，会出现以下错误：

> 无法将值 NULL 插入列“pubid”、表“production1.dbo.IHpublications”；列不允许空值。INSERT 失败。\r\n无法创建发布。\r\n已将数据库上下文更改为“production1”。\r\n语句已终止。

代码附在下面 - 取自 MSDN：

```
 // Set the Publisher, publication database, and publication names.
        string publicationName = "productionTran";
        string publicationDbName = "production1";
        string publisherName = "OSKAR-KOMPUTER";

        ReplicationDatabase publicationDb;
        TransPublication publication;

        // Create a connection to the Publisher using Windows Authentication.
        ServerConnection conn;
        conn = new ServerConnection(publisherName);

        try
        {
            // Connect to the Publisher.
            conn.Connect();

            // Enable the AdventureWorks database for transactional publishing.
            publicationDb = new ReplicationDatabase(publicationDbName, conn);

            // If the database exists and is not already enabled, 
            // enable it for transactional publishing.
            if (publicationDb.LoadProperties())
            {
                if (!publicationDb.EnabledTransPublishing)
                {
                    publicationDb.EnabledTransPublishing = true;
                }

                // If the Log Reader Agent does not exist, create it.
                if (!publicationDb.LogReaderAgentExists)
                {
                    // Specify the Windows account under which the agent job runs.
                    // This account will be used for the local connection to the 
                    // Distributor and all agent connections that use Windows Authentication.
                    //publicationDb.LogReaderAgentProcessSecurity.Login = winLogin;
                    //publicationDb.LogReaderAgentProcessSecurity.Password = winPassword;

                    // Explicitly set authentication mode for the Publisher connection
                    // to the default value of Windows Authentication.
                    publicationDb.LogReaderAgentPublisherSecurity.WindowsAuthentication = true;

                    // Create the Log Reader Agent job.
                    publicationDb.CreateLogReaderAgent();
                }
            }
            else
            {
                throw new ApplicationException(String.Format(
                    "The {0} database does not exist at {1}.",
                    publicationDb, publisherName));
            }

            // Set the required properties for the transactional publication.
            publication = new TransPublication();
            publication.ConnectionContext = conn;
            publication.Name = publicationName;
            publication.DatabaseName = publicationDbName;

            // Specify a transactional publication (the default).
            publication.Type = PublicationType.Transactional;

            // Activate the publication so that we can add subscriptions.
            publication.Status = State.Active;

            // Enable push and pull subscriptions and independent Distribition Agents.
            publication.Attributes |= PublicationAttributes.AllowPull;
            publication.Attributes |= PublicationAttributes.AllowPush;
            publication.Attributes |= PublicationAttributes.IndependentAgent;

            // Specify the Windows account under which the Snapshot Agent job runs.
            // This account will be used for the local connection to the 
            // Distributor and all agent connections that use Windows Authentication.
           // publication.SnapshotGenerationAgentProcessSecurity.Login = winLogin;
          //  publication.SnapshotGenerationAgentProcessSecurity.Password = winPassword;

            // Explicitly set the security mode for the Publisher connection
            // Windows Authentication (the default).
            publication.SnapshotGenerationAgentPublisherSecurity.WindowsAuthentication = true;

            if (!publication.IsExistingObject)
            {
                // Create the transactional publication.
                publication.Create();

                // Create a Snapshot Agent job for the publication.
                publication.CreateSnapshotAgent();
            }
            else
            {
                throw new ApplicationException(String.Format(
                    "The {0} publication already exists.", publicationName));
            }
        }

        catch (Exception ex)
        {
            // Implement custom application error handling here.
            throw new ApplicationException(String.Format(
                "The publication {0} could not be created.", publicationName), ex);
        }
        finally
        {
            conn.Disconnect();
        } 
```

我可以告诉更多的是，已安装发行商和发行商。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2019-04-03T21:05:05.723

我遇到过同样的问题。在我想发布的数据库上运行以下内容对我有用。

```
DROP TABLE dbo.iharticles;
DROP TABLE dbo.ihcolumns;
DROP TABLE dbo.ihconstrainttypes;
DROP TABLE dbo.ihindextypes;
DROP TABLE dbo.ihpublications;
DROP TABLE dbo.ihpublishercolumnconstraints;
DROP TABLE dbo.ihpublishercolumnindexes;
DROP TABLE dbo.ihpublishercolumns;
DROP TABLE dbo.ihpublisherconstraints;
DROP TABLE dbo.ihpublisherindexes;
DROP TABLE dbo.ihpublishers;
DROP TABLE dbo.ihpublishertables;
DROP TABLE dbo.ihsubscriptions;
DROP TABLE dbo.syssubscriptions
DROP VIEW dbo.syspublications;
DROP VIEW dbo.sysarticlecolumns;
DROP VIEW dbo.syssubscriptions;
DROP VIEW dbo.sysextendedarticlesview;
DROP VIEW dbo.ihextendedarticleview;
DROP VIEW dbo.ihextendedsubscriptionview; 
```

然后，我使用向导禁用发布，然后使用向导重新启用它并能够创建发布。

# iis - iframe 不会使内容保持最新吗？

> ID：15623072
> 
> 赞同：0
> 
> 时间：2013-03-25T19:26:35.813
> 
> 标签：iis, iframe, reporting-services

我有一个ssrs报告..

它用作页面上的 iframe。

如果我通过转到直接访问`http://myreportserver/reportserver/report`报告，则打开的报告是最新的。

但是，如果我通过访问作为 iframe 嵌入的页面打开报告，它将显示为旧版本。

这是预期的行为`iframes`吗？如何强制 iframe 加载最新版本？

# kinect - 向上/向下滑动

> ID：15623079
> 
> 赞同：1
> 
> 时间：2013-03-25T19:27:16.020
> 
> 标签：kinect, kinect-sdk, kinect.toolbox

我正在尝试使用与左右滑动相同的逻辑来检测向上和向下滑动。这就是我想出的。

```
// Upward Swipe
        if (ScanPositions((p1, p2) => Math.Abs(p2.Y - p1.Y) > 0.4f,  // Height
            (p1, p2) => p2.Y - p1.Y > -0.01f, // Progression Upwards
            (p1, p2) => Math.Abs(p2.X - p1.X) < 0.2f, // Length
            SwipeMininalDuration, SwipeMaximalDuration))// Duration
        {
                RaiseGestureDetected("Upward Swipe Gesture Detected");
            return;
        }

        // Downward Swipe
        if (ScanPositions((p1, p2) => Math.Abs(p2.Y - p1.Y) > 0.4f,  // Height
            (p1, p2) => p2.Y - p1.Y < 0.01f, // Progression Downwards
            (p1, p2) => Math.Abs(p2.X - p1.X) < 0.2f, // Length
            SwipeMininalDuration, SwipeMaximalDuration))// Duration
        {
                RaiseGestureDetected("Downward Swipe Gesture Detected");
            return;
        } 
```

使用与向左/向右滑动类似的逻辑，对于 heightFuntion，我已经说过 y 轴上 p2 和 p1 之间的差异应该大于 40 等等（从代码中可以看出）。我非常有信心这会起作用，但在我测试时它仍然没有给我准确的手势输出。有时它会给出“检测到向下滑动”的输出，而实际上它是向上的。有时它会在向左滑动和向上滑动之间出错。你能告诉我我在哪里犯错了吗？我刚刚发布的算法是否包含错误？或者我需要在 Kinect 工具箱的其他地方进行修改？我希望能够在同一个应用程序中检测向上、向下、向左和向右滑动。谢谢

# css - webkit 上的 flex-pack

> ID：15623080
> 
> 赞同：1
> 
> 时间：2013-03-25T19:27:18.927
> 
> 标签：css, webkit, flexbox

网上存在有关CSS3`box`和. 据我了解，这是目前的*草案*方法。所以在 webkit 上我们使用, ...`flexbox``flex``flex`*`display: -webkit-flex``-webkit-flex: 1 auto`*

 *但我的问题是：我如何使用类似`box-pack: start`on 的东西`flex`？

看看[**这个例子**](http://jsfiddle.net/Fzsav/)（仅限 webkit）。我需要把它打包到顶部，但它正在蔓延。它将类似于[**这个 hackish 示例**](http://jsfiddle.net/cKStN/)（但对我的情况不利，难以维护）。我该如何解决？

# 需要修复

**HTML**

```
<div class="body">
    <h1>Test</h1>
    <div class="box" style="width: 80%"></div>
    <div class="box" style="width: 20%"></div>
    <div class="box" style="width: 20%"></div>
    <div class="box" style="width: 20%"></div>
    <!-- (NEED TO FIX) EMPTY SPACE -->
</div> 
```

**CSS**

```
h1 {
    -webkit-flex: 1 100%;
}

.body {
    display: -webkit-flex;
    -webkit-flex-direction: row;
    -webkit-flex-wrap: wrap;
    height: 400px;
} 
```

所以请注意，需要使用*第 1 行*、第 2 行和第 3行`h1`的所有空间将转到第 3*行的第 2 行*、第 4 行和第 5*行*，我*需要*（大于内容，*高度*）在底部有一个空白空间。*`.box`*`.box`**`.body`****

 ***# HACKISH解决方案:-(

**HTML**

```
<div class="body">
    <h1 style="height: 40px;">Test</h1>
    <div class="box" style="width: 80%; height: 20px;"></div>
    <div class="box" style="width: 20%; height: 20px;"></div>
    <div class="box" style="width: 20%; height: 20px;"></div>
    <div class="box" style="width: 20%; height: 20px;"></div>
    <div class="hackish"></div>
    <!-- NOTE THIS .hackish :-( -->
</div> 
```

**CSS**

```
.hackish {
    width: 100%;
    height: 100%;
} 
```

那么，有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T19:33:53.233

*写完所有并在这里创建示例后，我在 5 秒后找到了解决方案。呃……*

我可以简单地使用`-webkit-align-content: flex-start`（`.body`W3 [*Flexbox - Align Content*](http://www.w3.org/TR/css3-flexbox/#align-content)）。所以这是解决方案：

```
.body {
    display: -webkit-flex;
    -webkit-flex-direction: row;
    -webkit-flex-wrap: wrap;
    height: 400px;

    -webkit-align-content: flex-start;
} 
```

看到[**这个工作**](http://jsfiddle.net/Fzsav/1/)。****

# java - 如何将对象值从 servlet 发送到 jsp 页面

> ID：15623081
> 
> 赞同：0
> 
> 时间：2013-03-25T19:27:19.893
> 
> 标签：java, jsp

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
         BufferedReader br = new BufferedReader(new FileReader("src/suraj.txt"));
         String everything="rahul";

                StringBuilder sb = new StringBuilder();
                String line = br.readLine();

                while (line != null)
                {
                    sb.append(line);
                    sb.append("\n");
                    line = br.readLine();
                     everything = sb.toString();

                }

                request.setAttribute("date",everything);
                RequsetDispatcher rd= Requ//here i got stuck how to forward the request to a jsp file           } 

    } 
```

我想将作为所有内容的字符串变量的值发送到 jsp 文件，以便可以在浏览器上显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:30:13.733

您将请求转发到 jsp 文件并在 jsp 文件中使用 request.getattribute .... 更好地学习基本教程并了解其工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T19:34:57.040

在 JSP 中，要接收一个属性，请尝试执行以下操作：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<%@page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>

<% 
    String everything = (String) request.getAttribute("date");
    System.out.println(everything);
%> 
```

**更新：**
此外，如果要将值设置为 Java Script 变量：

```
<script language="JavaScript" type="text/JavaScript">
   var strEverything= '<%=everything%>';
</script> 
```

**更新操作：**

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
            // TODO Auto-generated method stub
             BufferedReader br = new BufferedReader(new FileReader("src/suraj.txt"));
             String everything="rahul";

                    StringBuilder sb = new StringBuilder();
                    String line = br.readLine();

                    while (line != null)
                    {
                        sb.append(line);
                        sb.append("\n");
                        line = br.readLine();
                         everything = sb.toString();

                    }

                    request.setAttribute("date",everything);
                    RequestDispatcher requestDispatcher ; 
                    requestDispatcher = request.getRequestDispatcher("/thankYou.jsp" ) ;
                    requestDispatcher.forward( request, response ) ;          

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T19:39:58.333

在 JSP 中你需要像 String data=request.getAttribute("date")+""; 然后你会在jsp中得到值确保你的响应应该是那个jsp然后只有你得到了请求范围。其他明智的把 session.setAttribute("date",everthing); 在jsp session.getAttribute("date"); 然后你会得到任何地方。

# node.js - Mongoose，在文档数组中查找项目

> ID：15623083
> 
> 赞同：4
> 
> 时间：2013-03-25T19:27:22.053
> 
> 标签：node.js, mongoose

所以我从mongoose通过id查询了一个特定的文档。该文档有一系列项目。此列表将始终非常小（少于 10 项）。我想知道是否有办法从数组中获取特定项目。

示例文档：

```
{
    _id: 1,
    name: 'some name,
    items: [{
        id: 23,
        name: 'item name 23'
    },{
        id: 24,
        name: 'item name 24'
    }]
} 
```

从 mongoose 文档我可以得到 items 数组：

```
doc.get('items') 
```

从那里我可以遍历数组并找到我想要的，这没什么大不了的。如果框架中提供了这一点，只是不想重新发明轮子。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-05-10T06:32:39.593

我认为它会起作用。

```
Document.findById({docId, 'items.id': 'yourId'}, {'items.$': 1}, function(err, item){

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-28T12:46:13.173

有一个 id 方法可以做到这一点。

```
doc.items.id(23) 
```

[http://mongoosejs.com/docs/subdocs.html](http://mongoosejs.com/docs/subdocs.html)

使用 find 或 findOne 的解决方案将起作用，但涉及更多代码并且更难理解。

# google-apps-script - ScriptDB 查询整个 DB 并输出到 HTML 表

> ID：15623085
> 
> 赞同：2
> 
> 时间：2013-03-25T19:27:33.193
> 
> 标签：google-apps-script

首先，我是一名新手开发人员。我正在尝试创建一个基本的 Google Apps 脚本应用程序，它将使用 HTML 服务，获取表单数据并将其存储在 ScriptDB 中，并能够查询数据库并将其显示在表格中。表单工作正常，因为日志显示正在存储的对象。但是，当我尝试查询整个数据库时，我只会返回一个结果。这是html：

> 函数查询响应（响应对象）{
> 
> > ```
> >  $.each(responseObj, function(key, value) {
> >    $("#records").append(key + ': ' + value + "<br>");
> > }); 
> > ```
> > 
> > }

这是脚本：

> 函数转储数据（）{
> 
> > ```
> > var results = db.query({});
> >  while (results.hasNext()) {
> >  var result = results.next();
> >  }
> >  Logger.log(result);
> >  return result; 
> > ```
> > 
> > }

我的第二个问题是，一旦查询了整个数据库，是否可以在表格中显示？任何信息，将不胜感激。亲切的问候，马克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T19:52:13.283

为了回答您的第一个问题，您的应用程序脚本功能正在遍历您的所有内容`ScriptDB`并将每个值写入单个`result`. 当循环完成时，最终结果 - 即返回的 LAST 对象`db.query({})`- 得到返回。只有一个。

这是一个修改后的版本，它返回一个`Array`包含所有对象的。

```
function dumpData() {

  var results = db.query({});
  var result = [];
  while (results.hasNext()) {
    result.push (results.next());
  }
  Logger.log(result);
  return result;
} 
```

## 建立一个表

现在，关于第二个问题。

查看[构建图表仪表板](https://developers.google.com/apps-script/articles/charts_dashboard)教程，了解图表服务的良好介绍。您可能对完整的仪表板（具有相同基础数据的多个图表）不感兴趣，而是希望创建一个单独的 TableChart，但本教程涵盖了这一点。

如果您使用的是应用程序脚本，您将创建一个 UiApp，其中包含一个`doGet()`构建 TableChart 的函数。要填充您的数据源，您将创建一个`newDataTable()`，根据您的“键”及其类型添加列标题，然后添加具有相关“值”的行。之后，就是创建图表、将数据绑定到图表并将其附加到 UiApp 的问题。

没有对您的实际数据的任何描述，这就是我能提供的所有指导。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:51:36.657

当您要求 HTMLService 解决方案而不是 UiApp 时，Mogsdad 使用 UiApp 的方法将无济于事。您可以使用模板文件直接生成表格（按照我上面的评论）。但是，如果您想在更大的应用程序中使用表格（选择行、排序等），请考虑使用 jQuery DataTable。[此处](http://davethinkingaloud.blogspot.co.nz/2013/03/jsonp-and-google-apps-script.html)显示了一个简单的示例

# scala - 将光滑与升降机相结合

> ID：15623093
> 
> 赞同：3
> 
> 时间：2013-03-25T19:27:57.120
> 
> 标签：scala, lift, slick

我正在为一个网络应用程序使用电梯（这太棒了！）并且很困惑使用什么 - 光滑或映射器。我以前使用过带有应用程序的映射器。它运作良好，但我发现了一个问题。假设我想基于多个过滤器查询数据库，这些过滤器可能存在也可能不存在，但我想不出办法。例如。

```
class Gig extends LongKeyedMapper[Gig]{
  def primaryKeyField = id
  def getSingleton = Gig

  object id extends MappedLongIndex(this) {
    override def dbColumnName = "id"
    override def dbIndexed_? = true
  }

  object slug extends MappedString(this, 250) {
    override def dbColumnName = "slug"
    override def dbNotNull_? = true
  }

  object status extends MappedEnum(this, GigStatus) {
    override def dbColumnName = "status"
    override def dbIndexed_? = true
    override def targetSQLType(field: String) = Types.TINYINT
  }

  object title extends MappedString(this, 150) {
    override def dbColumnName = "title"
    override def uniqueFieldId = Full("gig_title")
    override def dbNotNull_? = true
    override def validations = valMinLen(5, "Please add a proper title.") _ :: valMaxLen(150, "Title can not exceed 150 characters") _ ::  super.validations
  }

  object description extends MappedText(this) with StringValidators{
    override def dbColumnName = "description"
    override def uniqueFieldId = Full("gig_desc")
    override def dbNotNull_? = true

    protected def valueTypeToBoxString(in: String): Box[String] = {
      Full(this.is)
    }

    protected def boxStrToValType(in: Box[String]): String = {
      in openOr null
    }

    def maxLen = 200
    override def validations = valMinLen(30, "Please add a proper description.") _ :: Nil
  }

  object locked extends MappedBoolean(this) {
    override def dbColumnName = "locked"
  }

  object amount extends MappedDouble(this) {
    override def dbColumnName = "amount"
    override def uniqueFieldId = Full("gig_amount")
    override def dbNotNull_? = true
  }

  object category extends MappedLongForeignKey(this, Category) {
    override def dbColumnName = "category"
    override def uniqueFieldId = Full("gig_category")
    override def dbNotNull_? = true

    override def validations = categoryExists _ :: super.validations

    def categoryExists(id: Long): List[FieldError] = {
      Category.findByKey(id) match {
        case Full(cat) => Nil
        case _ => List(FieldError(this, "Invalid category selected"))
      }
    }
  }

  object createdOn extends MappedDateTime(this) {
    override def dbColumnName = "created_on"
  }

  object updatedOn extends MappedDateTime(this) {
    override def dbColumnName = "updated_on"
  }

  object createdBy extends MappedLongForeignKey(this, User) {
    override def dbColumnName = "created_by"
  }

  object updatedBy extends MappedLongForeignKey(this, User) {
    override def dbColumnName = "updated_by"
  }

  def canApply: Boolean = {
    User.currentUser.map(user => user.provider_? && !user.id.is.equals(createdBy.is)) openOr false
  }

  def myUrl = "/gigs/"+id.is+"/"+slug.is

  def editUrl = "/gigs/"+id.is+"/edit"

  def unlockUrl = "/payment?id="+this.id.is+"&type=gig&action=unlock"

  def hasAnyBidsByUser(user: User): Boolean = {
    Bid.get(this, user).size match {
      case 0 => false
      case _  => true
    }
  }

  def locked_? = this.locked.is

  def bidsCount = Bid.getBidsCount(this)

  def isOwner(user: User): Boolean = user.id.is.equals(this.createdBy.is)
} 
```

假设我想查询数量 = 10 且标题 = 'Sample' 的演出。其中任何一个都可能存在或都不存在。当我早些时候在java中工作时使用hibernate时，我曾经根据条件添加到条件 if amount!=null 将金额添加到条件，如果 title!=null 将标题添加到条件。我在映射器中使用本机 sql 做到了这一点，`findAllByInsecureSql`我不知道这是否是最好的方法。

目前我正在尝试用电梯滑滑。我找不到任何有关如何使其工作的资源。有人可以指出我应该使用什么的正确方向。Mapper 或 Slick 以及任何将 slick 与 Lift 集成的好资源。

# string - 在arduino上数字读取到字符串

> ID：15623095
> 
> 赞同：1
> 
> 时间：2013-03-25T19:28:10.177
> 
> 标签：string, serial-port, arduino

我正在用 2 Arduinos Leonardo 做一个通信系统。为了传输，我必须将字符串转换为位并通过 PWM 引脚发送它们。问题是，我该如何做接收器？

我的想法是在数字引脚中接收数据，因此我可以将 LOW/HIGH 转换为“0”和“1”，将 8 位放入字符串中，转换为 char，然后我就有了最终的字符串。

任何帮助/建议将不胜感激。

编辑：

*   我使用 PWM 是因为我想实现 FSK 调制，逐位发送；
*   我有一些硬件可以让通信系统正常工作；
*   我的物理通信渠道是串行（通过 Arduino 引脚）；
*   在接收器硬件会为我提供 TTL 信号，所以我会有 0V/5V。这就是为什么我认为 digitalRead() 应该起作用的原因；
*   数据通过 PWM 发送，并以两级信号接收；
*   我将不得不做一些协议来发送/接收数据，仍然不知道如何.. ;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:48:33.213

你没有说你的物理沟通渠道是什么。这个很重要。在 Arduino 上，您的主要选择是：

*   串行（通过真正的串行引脚或[软件串行库](http://arduino.cc/en/Reference/SoftwareSerial)）
*   [SPI](http://arduino.cc/en/Reference/SPI)
*   [I2C](http://www.arduino.cc/en/Reference/Wire)
*   [单线](http://playground.arduino.cc/Learning/OneWire)

您还可以通过向/从数字引脚写入和读取数据来实现自己的协议，尽管这很可能看起来像 SPI。**除非您想**发送字符串，否则这些方法都不需要将任何内容转换为字符串。我有点不知所措你是如何通过 PWM 发送数据的：这似乎是一个毫无根据的黑客攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:45:03.700

使用 PWM 是在设备之间进行二进制数据通信的硬方法，它可以代替其他更容易获得的外设，但也是可行的。基本上是 PCM 或脉冲编码调制。最简单的方法是引脚被断言的时间长度，代表数据。例如，伺服系统会发生什么。其中 PWM 重复表示已知位置的相同时间长度，并且伺服的接收器将脉冲的长度转换回位置或数据。

对于 Arduino 用户来说，PWM 的接收并不典型，但 AVR micro 的能力远不止于此。有两种可能的方法来捕捉这种脉冲持续时间。Arduion 的第一个和共同点是[PulseIn()](http://arduino.cc/en/Reference/PulseIn)函数。此功能不是实时的。它只是对脉冲之间的周期进行时间戳记，并且仅限于几微秒的持续时间。我相信还有其他变化可能会更长。这可以很好地工作。但可能与其他中断有关，例如串行函数和定时器。

另一种方法称为输入捕捉中断。以下 GISTHUB [INputCapture.ino](https://gist.github.com/mpflaga/4404996)是我从另一个来源抢救的此类代码的示例。不是典型的，代码不是作为 Arduino 库编写的。但确实非常准确地捕获了脉冲的长度。简而言之，输入捕获引脚硬件在触发时锁定系统时钟，然后在某个潜在时间可以读取它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T12:02:25.860

嗯，这是我写的代码：

```
void setup() {
  Serial.begin(9600);
  while (!Serial) {;}
}
void loop() {
  char bitPosition = 0;
  String inMessage = 0;
  while (Serial.available() > 0) {
    char outChar;
    boolean digValue = digitalRead(inPin);
    for(bitPosition = 7; bitPosition >= 0;  ){
      if(digValue == LOW){
        bitWrite(outChar, bitPosition, 0);
      }
      if(digValue == HIGH){
        bitWrite(outChar, bitPosition, 1);
      }
    bitPosition--;
    }
  inMessage.concat(outChar);
  if(inMessage != 0){
    Serial.println("Received:  " + inMessage);
  }
 }
} 
```

这不是我所期望的。第一个 digValue 始终为 0。建议？

# excel - 检测到不明确的名称

> ID：15623100
> 
> 赞同：0
> 
> 时间：2013-03-25T19:28:37.430
> 
> 标签：excel, vba

我的代码无法正常工作，并出现一条错误消息，指出检测到不明确的名称：WOS 下面是我的代码。如何使此代码正常工作？

```
Sub WOS()

Function WOS(BOP, StartPosn As Range)
Set myRange = Range(StartPosn, StartPosn.End(xlToRight))
Dim lupvals()
ReDim lupvals(1 To myRange.Cells.Count)
i = 1
For Each cll In myRange.Cells
lupvals(i) = Application.Sum(Range(StartPosn, cll))
i = i + 1
Next cll
xx = Application.Match(BOP, lupvals)
If IsError(xx) And lupvals(1) >= BOP Then
WOS = BOP / lupvals(1)
Else
If xx = UBound(lupvals) And (BOP - lupvals(xx)) > 0 Then
WOS = "n/a"
Else
WOS = xx + (BOP - lupvals(xx)) / myRange(xx + 1)
End If
End If
End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T19:31:13.053

您定义了 Sub WOS 和功能。只留下其中之一。尝试漫游第一行 Sub WOS()

# c# - 在预期运行重复值时压缩列表，同时保持索引查找

> ID：15623101
> 
> 赞同：1
> 
> 时间：2013-03-25T19:28:39.620
> 
> 标签：c#, algorithm, list, optimization, data-structures

精简版：

我有一个 List 对象，其中包含许多重复值（双精度值），这些重复值存在于重复值的运行中，其中穿插着不断变化的值。我想在不损害索引和值之间的关联的情况下减少此 List 对象占用的内存空间。我还想使用索引作为查找，尽可能保持接近 O(1) 的算法查找时间。例如，如果您有一个包含元素 {0, 0.1, 0.1, 0.1, 0.2} 的列表，那么如果给定索引 1,2 或 3，新对象/实体将始终返回 0.1。我希望我需要创建我自己的对象（可能实现 IList），或使用现有的对象。我对如何实现这一点有一个想法，这将使算法成为 O(log(m))，其中 m 是相同值的运行次数（在我的示例中，只会有 1 次运行）。但是，如果可能的话，我宁愿不自己动手。

**C# 是否存在这样的对象，还是我需要自己动手？**

动机/长版：

我有一个桌面应用程序正在做一些繁重的科学计算。计算会生成大量数据，并且这些数据是根据时间组织的。也就是说，对于时间 50，存在变量 x、y 和 z 的值。对于时间 51，变量 x、y 和 z 有另一个值。我有一个列表，其中包含计算运行的所有时间。每个变量都有一个 List，其索引与时间 List 的索引相同。也就是说，如果您查看时间数组的索引 234，您可能会得到时间 46（秒）。然后将在该变量的列表的索引 234 处找到每个变量在时间 46（秒）的计算。

大约有 100,000 个这样的变量（因此有 100,000 个列表），但只有一个列表。我还希望添加更多变量。这显然是一个内存问题。（目前至少有大约 200 MB 的原始空间 :-)）。这也应该可以解释为什么我要使用索引作为在某个时间找到某个变量的值的方法。

一个变量在前 x 个插槽中只有 0 是相当典型的。或者在索引 y 之后，变量保持不变直到结束。我想说，值恒定的周期数的最坏情况可能是单个列表中的 30 左右，但更通常在 2 到 5 之间。每个数组中的总值的数量通常可能在 250 左右。

编辑：

请注意，我希望添加比 100,000 更多的变量，所以这是比 200 MB 更大的问题。为了解释这样做的更多动机，我的应用程序目前以大约 1+ GB 的速度运行，我认为 200 MB 是减少内存使用量的唾手可得的成果。

编辑2：

我意识到对我的解释进行了非常重要的编辑-我在上面进行了编辑并在此处进行了解释。列表可能在其中运行，但它们也有值从索引更改为索引的部分。因此，我可能拥有的一个更好的列表示例如下：

0 0 0 0 0 0 ....（50 个重复的 0）...0.1 0.2 0.4 0.5 0.6 ...（50 个变化值）... 200.45 200.45 200.45 200.55 ...（50 个重复值）.. .. ETC。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T19:35:11.427

我假设您的 O(log(m)) 想法基本上是创建一个二叉搜索树，使用索引范围对结果进行排序。

我绝对会选择那个解决方案。如果每个列表最多只有大约 30 次运行，你真的不需要担心它的扩展方式`m`，因为`m`它从来都不是特别大......你可能会发现任何恒定时间解决方案实际上在任何情况下都更糟糕实际案例比您的搜索树方法。

事实上，我*最初*可能会选择一个简单的运行列表（其中每个运行是一个索引范围和一个值）和一个 O(m) 查找......如果你的*典型*大小是 2-5，那么它不会不会特别糟糕，实现起来会更简单。一旦你有一个简单的方法工作，*那么*你就可以优化。

事实上，我什至根本不做这个“运行”版本就开始了。除非你需要在特别有限的手机上运行这个，否则 200MB 左右的数据集真的不算太大。应用程序实际运行在哪些机器上？您是否有理由相信他们无法为您的应用程序支付 0.5 GB 的空间？

还值得记住的是，二叉搜索树或运行列表的开销很可能意味着您无论如何都不会像预期的那样节省。

基本上，我会按以下顺序实施：

*   数组
*   运行列表
*   二叉搜索树

对每一步的性能（时间和空间）进行基准测试，并确保你有关于什么是足够好的具体目标。

编辑：使用编辑后的版本，您可能希望有某种界面`IPortion`：

```
int MinIndexInclusive { get; }
int MaxIndexExclusive { get; }
double FindValue(int index); 
```

有两个实现：`ArrayPortion`和`TreePortion`. 的每个节点`TreePortion`都有一个左侧和一个右侧，每个节点都是另一个`IPortion`- 例如，这可以让您在 a 中`ArrayPortion`嵌入一个`TreePortion`。

或者更简单一些，你可以保持它平坦，并且有一个`List<IPortion>`where each`IPortion`要么是 an`ArrayPortion`要么 a `RunPortion`where the `RunPortion`only know about a single value and its index bounds。然后，您可以对列表进行二分搜索以找到正确的部分，并在索引处询问它的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:28:50.403

在我看来，你可以用一个`List<T>`和一个二进制搜索来做到这一点。您不需要存储运行列表。您真正需要存储的只是时间变化时的索引和值。

所以，有一个简单的结构：

```
struct ValueChange
{
    public int TimeIndex;  // or whatever type you use for the index
    public double Value;
    // Add constructor here
} 
```

（是的，我知道结构中的可变值很糟糕。为了简洁起见，我这样编码。在实际代码中，这些将是具有私有支持字段的只读属性。）

然后你有一个`List<ValueChange>`. 每当值更改时，您将其中一个附加到列表中。您可以判断该值是否足够容易地更改：

```
if (currentValue != theList[theList.Count-1].Value)
{
    theList.Add(new ValueChange(timeIndex, currentValue));
} 
```

当您想查找特定时间索引处的值时，您可以对时间索引进行二进制搜索。如果您要查找的索引不存在，则返回值`List.BinarySearch`将告诉您包含您要查找的值的项目的索引。

当然，任何类型的运行长度压缩的缺点是短期运行会将其变成数据扩展器而不是压缩器。在这种特殊情况下，您需要 2 的总体运行长度平均值才能实现收支平衡。也就是说，如果你想表示 N 个时间段的值，你不能有超过 N/2 的值变化，因为`ValueChange`结构是你的`double`.

# html - Z轴重排卡

> ID：15623103
> 
> 赞同：0
> 
> 时间：2013-03-25T19:28:42.010
> 
> 标签：html, css

我正在处理我的[投资组合](http://patrykponichtera.com/android.php)，我在其中放了一些翻转卡来显示我的 android 应用程序，当有人将鼠标悬停在它们上方时，它们会翻转并放大并显示简短描述。

我遇到的问题是下卡在悬停时与上面的卡重叠，我尝试使用 z-index 没有成功

这是卡片的 CSS

```
/* Card */
    .card-wrapper {
        -webkit-perspective: 1000;
        -moz-perspective: 1000;
        perspective: 1000;

        border: 1px solid #ccc;

        margin: 50px;
        display: inline-block;
        visibility:hidden;
        width:400px;
        height:540px;
        z-index: 2;

    }

        .card-wrapper:hover .flipper, .card-wrapper.hover .flipper {
            -webkit-transform: rotateY(180deg) scale(1.5,1.5) translate(10%, 10%);
            -moz-transform: rotateY(180deg) scale(2,2);
            transform: rotateY(180deg) scale(2,2);
            position: relative;

        }

    .card-wrapper, .front, .back {

    }

    .flipper {
        -webkit-transition: 0.6s;
        -webkit-transform-style: preserve-3d;

        -moz-transition: 0.6s;
        -moz-transform-style: preserve-3d;

        transition: 0.6s;
        transform-style: preserve-3d;
        background-color:#ffffff;
        height:540px;

        position: relative;
        z-index: 2;
    }

    .front, .back {
        -webkit-backface-visibility: hidden;
        -moz-backface-visibility: hidden;
        backface-visibility: hidden;
        visibility:visible;

        position: absolute;
        top: 0;
        left: 0;
    }

    .front {
        z-index: 2;
    }

    .back {
        -webkit-transform: rotateY(180deg);
        -moz-transform: rotateY(180deg);
        transform: rotateY(180deg);
        z-index: 200000000000000000;

    } 
```

这是HTML

```
<div class="card-wrapper" ontouchstart="this.classList.toggle('hover');">
                <div class="flipper">
                    <div class="front">
                        <!-- front content -->
                        <div class="card">
                            <img src="images/wakey-feature.png" alt="Wakey" width="400px" height="450px">
                            <h2 class="app-title">Wakey</h2>
                        </div>

                    </div>
                    <div class="back">
                        <!-- back content -->
                        <div class="card">
                        </div>
                    </div>
                </div>

                <div class="play-store-card">
                    <a href="https://play.google.com/store/apps/details?id=com.doublep.wakey" target="_blank">
                        <div class="dashed-line">
                            <button class="play-store-button" type="button" style="margin: 0px 0px 0px 0px;">
                                <img src="images/play-store.png">
                            </button>

                        </div>
                    </a>

                </div>
            </div> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:49:21.173

z-index 不会帮助您，它不会使 div 显示在其他 div 前面。

你需要做的是*真正*把它们放在前面。由于您已经在悬停中进行了翻译，因此一种可能性是更改它以使 div 更靠近您：

代替

```
.card-wrapper:hover .flipper, .card-wrapper.hover .flipper {
       -webkit-transform: rotateY(180deg) scale(1.5,1.5) translate(10%, 10%); 
```

它应该是

```
.card-wrapper:hover .flipper, .card-wrapper.hover .flipper {
  -webkit-transform: rotateY(180deg) scale(1.5,1.5) translate3d(10%, 10%, -100px); 
```

并且您需要在所有元素中设置保留 3d。我这样做了：

```
div {
-webkit-transform-style: preserve-3d;
} 
```

但可能你想要更精确。无论如何，通过这 2 个更改，我认为它可以正常工作。（在 webkit 中）

顺便说一句，我会给你一个有史以来最高 z-index 的价格:-)

# ruby-on-rails - 如何在解析的 JSON 响应中保存这些嵌套值

> ID：15623106
> 
> 赞同：0
> 
> 时间：2013-03-25T19:28:49.963
> 
> 标签：ruby-on-rails, ruby, json, omniauth

使用 Omniauth，我在使用 oauth2 的自定义策略中有以下内容，但只是`uid`被拾取并稍后保存在用户记录中。信息块中的`email`and`name`出现为零，尽管有值 我的信息块有什么问题？

**Omniauth 策略.rb**

```
 uid do
    raw_info["user"]["uid"]
  end

  info do
    {
      email: raw_info["user"]["email"],
      name: raw_info["user"]["name"]
    }
  end

  def raw_info
    @raw_info ||= access_token.get('/api/v1/user').parsed
  end 
```

**JSON响应：**

```
{
   user: {
      uid: 1,
      email: "testusera1@example.net",
      name: null
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:26:22.173

没关系，这似乎有效。

# sql - sql server 2008 无法使用在 PROCEDURE 中使用动态 sql 创建的 VIEW

> ID：15623109
> 
> 赞同：0
> 
> 时间：2013-03-25T19:29:01.947
> 
> 标签：sql, sql-server-2008, sql-server-2005

下面的过程将在 SQL Server 2005 中运行正常，但在 2008 年失败了...`Invalid object name 'vTemp'`

```
Create PROCEDURE [dbo].[bulksaverecord]
as
begin

if exists (select * from sysobjects where id=object_id('vTemp')) 
begin
drop view vTemp
end

declare @sql nvarchar(max)
set @sql='CREATE VIEW vTemp AS SELECT top 0 FromType,TypeID,AssessUser, 
          TypeTimeType,AssessTime,ItemRoleKey,UserName,SourceKey,  
          PartID,PartName,PositionName,ItemID,ItemName,ItemType,ItemScript,
          ItemDataSourceName,ItemField,ItemKPI,ItemFun,ItemFunLimit,ItemKill,
          AllKill,ItemMark,ItemPower,MarkScript,PowerScript,FromKey 
          FROM AssessMark'
exec sp_executesql @sql
if exists (select * from sysobjects where id=object_id('vTemp')) 
begin
    exec ('SELECT * FROM vTemp')
    SELECT * FROM vTemp -- throws the error here
end

end 
```

似乎在 PROCEDURE 中使用动态 sql 创建的 VIEW 将在 DYNAMIC SQL 中具有范围，即使实际上创建了 VIEW。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:34:59.753

这个测试脚本对我重复工作：

```
if object_id('TestProc') is not null
    drop procedure TestProc
if object_id('TestView') is not null
    drop view TestView
go
create proc TestProc
as
exec ('create view TestView as select 1 as a')
select * from TestView
go
exec TestProc 
```

就像 Gordon Linoff 回答的那样，仔细检查您的视图定义？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T19:35:47.043

当我将视图定义修改为：

```
select * from information_schema.tables 
```

我怀疑您的视图定义有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:27:21.960

谢谢！我找到了原因。

我改：create view 创建dbo.view，问题就没有了。所以

# java - 如何在 Android 中创建防火墙应用程序？

> ID：15623110
> 
> 赞同：1
> 
> 时间：2013-03-25T19:29:17.967
> 
> 标签：java, android, firewall

我正在构建一个阻止访问某些网站的家长控制应用程序 - 也就是一个简单的 Android 防火墙。你认为最简单的方法是什么？

我已经看到其他应用程序使用 VpnService 来监控流量 - 但我正在寻找与此主题相关的任何和所有建议、方法和想法。

到目前为止，我已经为应用程序构建了 UI - 它存储了每个用户配置文件所需的所有用户数据 - 现在是时候让它发挥作用并阻止一些流量（例如 - 当一个孩子在午夜后登录色情网站时！ )

非常感谢任何和所有想法/输入！

（当然 - 实现越简单：越好！）

菜鸟忍者

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T19:31:36.927

> 我开始对开发一个简单的防火墙进行一些研究，该防火墙将通过广播接收器和 ActivityManager 类的组合来监控浏览器流量。

幸运的是，出于明显的隐私和安全原因，这是不可能的。您不能使用“广播接收器和 ActivityManager 类”单方面监视其他应用程序的流量。

有问题的应用程序使用的是[伪装`VpnService`](http://developer.android.com/reference/android/net/VpnService.html)成 VPN 连接，并以此方式监视其他应用程序的流量。这需要用户将应用程序实际设置为 VPN 提供商并将其用于 VPN 连接。

# java - 需要优化的程序逻辑。单词问题1 Sweet1

> ID：15623119
> 
> 赞同：0
> 
> 时间：2013-03-25T19:29:47.733
> 
> 标签：java, android, algorithm, logic

所以我正在为我的男女混合垒球队创建一个名册应用程序。联盟规则规定，如果两个男人连续击球，则必须有一个女孩跟随。如果男女比例不平衡，这会导致问题，例如，如果有 4 个女孩和 14 个男孩，则至少有一个女孩必须在同一击球顺序中击球两次才能满足“男”女孩的规则，然后她必须排在女孩队列的后面，所以下一次通过第二个女孩移动到第一个女孩的位置，第三个到第二个，依此类推。所以第三个或第四局我们在收据或其他东西的背面疯狂地写下修改后的击球顺序，因为我们试图跟踪谁在什么时候击球。

那么，我正在创建的应用程序的目的是允许用户输入击球顺序，按下一个按钮，然后查看该击球顺序外推，比如说，通过顺序四次（obv 用户可以决定多少)，相应地移动阵容中的女孩。

到目前为止，该应用程序允许您添加玩家、设置他们的性别并按所需的顺序排列他们。这一切都在数据库中进行跟踪。现在我要“按下一个按钮，查看订单的 x 次”。我有什么工作，假设订单严格是“男男女”。但它无法处理其中的任何变化，例如，初始顺序是“guy girl guy guy”或“girl guy guy”。我编写的逻辑只是忽略了这一点，并将其更改为“男男女”。

我可以使用什么逻辑来正确处理任何初始击球顺序？

这是我的代码：

```
//pos == numerical position in the roster
public void computeKickingOrder() {
    String TAG = "cKO";
    // instantiate dbhandler
    DatabaseHandler db = new DatabaseHandler(this);

    // get all tasks
    List<Player> players = db.getAllPlayers();
    List<Player> guys = new ArrayList<Player>();
    List<Player> girls = new ArrayList<Player>();
    List<Player> theRoster = new ArrayList<Player>();

    int pCount = players.size();
    int cycles = 4;
    Log.d(TAG, "Total Players: " + pCount);

    Log.d(TAG, "Generating " + cycles + " runs through the order.");

    //one cycle = guycount + guycount/2

    //Iterator<Player> itr = players.iterator();
    Iterator<Player> itr;

    // first cycle through the whole roster and separate out guys and girls
    // use cycles + 5 to ensure that there are plenty of players available in each list 
    for (int i = 0 ; i < cycles + 5 ; i++) {
        itr = players.iterator();
        while(itr.hasNext()) {
            Player p = itr.next();
            if(p.getGender().equals("M")) { guys.add(p); }
            else { girls.add(p); }
        }
    }

    Log.d(TAG, "guys.size(): " + guys.size());
    Log.d(TAG, "girls.size(): " + girls.size());

    //below code automatically creates guy guy girl order IGNORES that a girl might be first or second
    int girlSpot = 0;
    int guyKicks = 1;
    int pos = 1;
    for(int i=0; i<guys.size(); i++) {
        if(guyKicks<3) {
            Player p = guys.get(i);
            p.setPos(pos);
            theRoster.add(p);
            guyKicks++;
            Log.d(TAG, pos + " | " + p.getGender() + " | " + p.getName());

        }

        else {
            guyKicks = 1;
            Player p = girls.get(girlSpot);
            p.setPos(pos);
            theRoster.add(p);
            girlSpot++;
            Log.d(TAG, pos + " | " + p.getGender() + " | " + p.getName());
        }

        pos++;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:54:33.570

您可以创建一个简单的状态机。看看起始顺序的前两项，就知道自己处于什么状态了。也就是说，如果你有三种状态：

```
state 1: guy
state 2: guy
state 3: girl 
```

程序流程从状态 1 到状态 2，然后从 2 到 3，然后从 3 返回到 1。

现在，如果您查看起始顺序中的前两项，您就会知道您开始时所处的状态：

```
[guy, guy]:  starting state 1
[guy, girl]: starting state 2
[girl, guy]: starting state 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:16:13.667

保留两个队列：男生和女生。生成没有特定名称的“旋转模板”，只有 gal 或 gal 表示。所以你说，

```
1: guy
2: guy
3: gal
4: guy
5: gal
6: guy
7: guy
8: gal
9: gal 
```

或其他任何东西，只要它满足男-男-女规则。您通过处理旋转模板生成初始旋转。对于每个位置，你从他们各自的队列中拉出一个男人或女孩。

每次有人从队列中拉出并插入到轮换中时，他们都会被重新插入队列中。当他们面前的所有男人或女孩都用尽时，他们将再次投入战斗。

```
Queue<String> guys = new LinkedList<String>();
Queue<String> gals = new LinkedList<String>();

guys.add("John");
guys.add("Jeff");
guys.add("Bill");
guys.add("Frank");

gals.add("Mary");
gals.add("Tricia");

enum Gender { GUY, GAL };

Gender[] template = new Gender[] { GUY, GUY, GAL, GUY, GUY, GAL, GUY, GAL, GAL };

String[] getRotation() {
  String[] rotation = new String[9];
  for (int i = 0; i < template.length; i++) {
    String batter;
    if (template[i] == GUY) {
      batter = guys.poll();
      guys.offer(batter);
    } else {
      batter = gals.poll();
      gals.offer(batter);
    }
    rotation[i] = batter;
  }  
  return rotation;
} 
```

# jquery - jQuery Event-Handler 一键改变 CSS-Class

> ID：15623126
> 
> 赞同：0
> 
> 时间：2013-03-25T19:30:24.467
> 
> 标签：jquery, removeclass

我使用 jQuery 的 Click-Function 有一些奇怪的行为。我还用 on-EventHandler 进行了尝试。Twitter 的 Bootstrap Navbar 中有一些简单的标记，我正在尝试更改 li-tag 的 CSS-Class。在这种情况下，我想删除活动的 CSS-Class 并将其添加到当前单击的 li-tag 中。但是只需单击一下即可应用更改。因此，当例如“预览”是当前可视活动元素并且我单击“文档”时，CSS 类似乎没有改变。当我随后单击“幻灯片”时，视觉活动元素是“文档”，这不是预期的行为。下一步单击“预览”，现在“幻灯片”是视觉活动元素。我做错了什么？我尝试使用 remove 和 add 以及 toggleClass，但这没关系。这是我的代码和标记。JS 被包装成一个 Dom-Ready-Function。

```
<div class="navbar">
  <div class="navbar-inner">
    <ul class="nav">
      <li class="active"><a href="#!document_defaultview">Document</a></li>
      <li><a href="#!document_slidecast">Slidecast</a></li>
      <li><a href="#!document_preview">Preview</a></li>
      <li><a href="#!document_notes">Notes</a></li>
      <li><a href="#!document_questions">Questions</a></li>
      <li><a href="#!document_activities">Activities</a></li>
    </ul>
  </div>
</div> 
```

JS

```
$("#document_navbar a").on('click', function(e) {

    // Hide all content, display the one related to hash-tag    
    $(".document_view").toggle(false);
    $(app_locationToId($(this).attr("href"))).toggle(true);

    // Here is the part that does not work:     
    //$("#document_navbar li.active").removeClass("active");
    //$("a[href='" + window.location.hash + "']").parent().addClass('active');

            // Another try ... same result as described above!  
    $("#document_navbar li.active").toggleClass("active", false);
    $("a[href='" + window.location.hash + "']").parent().toggleClass("active", true);
}); 
```

好的，根据您的回答，这是我用来处理该问题的代码：

```
$("#document_navbar a").on('click', function(e) {

    new_location = app_locationToId($(this).attr("href"));

    // Hide all content, display the one related to hash-tag    
    $(".document_view").toggle(false);
    $(new_location).toggle(true);
    // Change visual active li-tag
    $("#document_navbar li.active").toggleClass("active", false);
    $("a[href='" + app_IdToLocation(new_location) + "']").parent().toggleClass("active", true);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T19:42:52.013

您可以处理窗口对象上的 hashchange 事件，以添加您的“活动”类：

```
$(".navbar li a").on('click', function(e) {
    // Hide all content, display the one related to hash-tag    
    $(".document_view").toggle(false);    
    $('.navbar li').removeClass("active", false);
});

$(window).on('hashchange', function() {
    $("a[href='" + window.location.hash + "']").parent().addClass("active", true);
}); 
```

[jsfiddle](http://jsfiddle.net/h4fEE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T19:41:49.407

我最好的猜测是`window.location.hash`点击处理程序完成后会更新。因此，您将始终在单击处理程序中获得“旧”位置。之后位置会更新，但在下一次单击之前您不会使用它......因此您总是单击一下。

为了测试这一点，我会在类切换的执行上放一个短暂的延迟：

```
$("#document_navbar a").on('click', function(e) {

    // Hide all content, display the one related to hash-tag    
    $(".document_view").toggle(false);
    $(app_locationToId($(this).attr("href"))).toggle(true);

    setTimeout(function() {
        $("#document_navbar li.active").toggleClass("active", false);
        $("a[href='" + window.location.hash + "']").parent().toggleClass("active", true);
    }, 1000);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T19:36:31.390

当点击功能被触发时，这`window.location.hash`是实际页面之一。因此，您必须确保哈希已更改，然后使用它并切换类。

在我的东西上搜索代码片段并尽快为您编辑/发布。:)

编辑：

所以在这里，这是我开始使用 history.js 类之前的一个旧项目的片段：

```
$(function () {
    "use strict";
    var hashListener = null, hashValue = '', hashQuery;

    function checkIfHashChanged() {
        var hashQuery = window.location.hash;
        if (hashQuery === hashValue) { return; }
        hashValue = hashQuery;

        //Do the toggle
        $("#document_navbar li.active").toggleClass("active", false);
        $("a[href='" + hashQuery + "']").parent().toggleClass("active", true);
    }

    function startHashListener() {
        setInterval(checkIfHashChanged, 100);
    }

    function stopHashListener() {
        if (hashListener !== null) { clearInterval(hashListener); }
        hashListener = null;
    }

    startHashListener();

}); 
```

此代码在您的 click 函数之外运行，仅在间隔 hashlistener 期间侦听 hashchange。

# c++ - OpenCV 的 calcOpticalFlowPyrLK 抛出异常

> ID：15623128
> 
> 赞同：4
> 
> 时间：2013-03-25T19:30:29.250
> 
> 标签：c++, opencv, assertions, opticalflow

一段时间以来，我一直在尝试用 OpenCV 构建一个小的光流示例。除了函数调用 calcOpticalFlowPyrLK 之外，一切正常，它在控制台窗口中打印以下失败的断言：

> OpenCV 错误：断言失败 (mytype == typ0 || (CV_MAT_CN(mytype) == CV_MAT_CV(type0) && ((1 << type0) & fixedDepthMask) != 0)) 在未知函数中，文件...... \src\opencv\modules\core\src\matrix.cpp，第 1421 行

我正在解析的视频分为 300 张图像，分别标记为“caml00000.jpeg”、“caml00001.jpeg”、...、“caml00299.jpeg”。这是我写的代码：

```
#include <cv.h>
#include "opencv2/highgui/highgui.hpp"

using namespace cv;
using namespace std;

int main( int argc, char** argv ){

    char buff[100];
    int numFrames=300;
    char fileFormat[]="images/caml%05d.jpeg";

    string winname="Test Window";

    vector<Mat> imgVec(numFrames);

    auto itrImg=begin(imgVec);
    auto itrEnd=end(imgVec);
    vector<Point2f> featuresPrevious;
    vector<Point2f> featuresCurrent;

    namedWindow( winname, CV_WINDOW_AUTOSIZE );
    int fileNum=0;
    while(itrImg!=itrEnd){
        Mat& imgRef=*itrImg; //get this frame's Mat from the vector iterator

        //Calculate the name of the file;
        sprintf(buff,fileFormat,fileNum);
        string fileName=buff;
        //string fileName="kitty.jpg"; //attempted using a static picture as well
        cout << fileName << endl;

        Mat cImage=imread(fileName, CV_LOAD_IMAGE_GRAYSCALE);
        cImage.convertTo(imgRef, CV_8U); //also tried CV_8UC1
        featuresPrevious=std::move(featuresCurrent);
        goodFeaturesToTrack(imgRef,featuresCurrent,30, 0.01, 30); //calculate the features for use in next iteration
        if(!imgRef.data){ //this never executes, so there isn't a problem reading the files
            cout << "File I/O Problem!" << endl;
            getchar();
            return 1;
        }

        if(fileNum>0){
            Mat& lastImgRef=*(itrImg-1); //get the last frame's image
            vector<Point2f> featuresNextPos;
            vector<char> featuresFound;
            vector<int> err;
            calcOpticalFlowPyrLK(lastImgRef,imgRef,featuresPrevious,featuresNextPos,featuresFound,err); //problem line 
            //Draw lines connecting previous position and current position
            for(size_t i=0; i<featuresNextPos.size(); i++){
                if(featuresFound[i]){
                    line(imgRef,featuresPrevious[i],featuresNextPos[i],Scalar(0,0,255));
                }
            }
        }

        imshow(winname, imgRef);

        waitKey(1000/60); //not perfect, but it'll do

        ++itrImg;
        ++fileNum;
    }

    waitKey(0);
    return 0;
} 
```

我读到的关于这个异常的唯一一件事是它是在 Mats 采用不同格式时引起的，但是我尝试读取静态图像（参见上面关于“kitty.jpg”的代码），我仍然得到相同的失败断言. 有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T11:02:52.543

换行`vector<char> featuresFound;`到`vector<uchar> featuresFound;`和`vector<int> err;`到`Mat err;`

我无法解释为什么，但必须这样做。

编辑：正如@Sluki 在评论中所说 - 错误向量必须存储在浮点精度 std::vector 或 cv::Mat 中。

# c# - 数据集的简单线性回归

> ID：15623129
> 
> 赞同：5
> 
> 时间：2013-03-25T19:30:35.827
> 
> 标签：c#, .net, statistics, linear-algebra, linear-regression

我希望在 C# 中为一组数据创建一个趋势函数，似乎使用大型数学库对我的需求来说有点矫枉过正。

给定一个值列表，例如 6,13,7,9,12,4,2,2,1。我想得到简单线性回归的斜率（看看它是减少还是增加）和下一个估计值。我知道那里有大量的图书馆可以做到这一点，但我想要一种更简单的方法。

我对统计数据并不感兴趣，所以如果有人能以某种方式引导我做到这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-07-17T11:24:57.873

我自己的未来预测代码（例如从第一天开始的第 15 天）

```
 static void Main(string[] args)
    {
        double[] xVal = new double[9]
        {

    ...

           };
        double[] yVal = new double[9]  {
     ...

        };
        double rsquared;
        double yintercept;
        double slope;
        LinearRegression(xVal, yVal,0,9, out rsquared, out yintercept, out slope);
        Console.WriteLine( yintercept + (slope*15));//15 is xvalue of future(no of day from 1)

        Console.ReadKey();
    }
    public static void LinearRegression(double[] xVals, double[] yVals,
                                        int inclusiveStart, int exclusiveEnd,
                                        out double rsquared, out double yintercept,
                                        out double slope)
    {
        Debug.Assert(xVals.Length == yVals.Length);
        double sumOfX = 0;
        double sumOfY = 0;
        double sumOfXSq = 0;
        double sumOfYSq = 0;
        double ssX = 0;
        double ssY = 0;
        double sumCodeviates = 0;
        double sCo = 0;
        double count = exclusiveEnd - inclusiveStart;

        for (int ctr = inclusiveStart; ctr < exclusiveEnd; ctr++)
        {
            double x = xVals[ctr];
            double y = yVals[ctr];
            sumCodeviates += x * y;
            sumOfX += x;
            sumOfY += y;
            sumOfXSq += x * x;
            sumOfYSq += y * y;
        }
        ssX = sumOfXSq - ((sumOfX * sumOfX) / count);
        ssY = sumOfYSq - ((sumOfY * sumOfY) / count);
        double RNumerator = (count * sumCodeviates) - (sumOfX * sumOfY);
        double RDenom = (count * sumOfXSq - (sumOfX * sumOfX))
         * (count * sumOfYSq - (sumOfY * sumOfY));
        sCo = sumCodeviates - ((sumOfX * sumOfY) / count);

        double meanX = sumOfX / count;
        double meanY = sumOfY / count;
        double dblR = RNumerator / Math.Sqrt(RDenom);
        rsquared = dblR * dblR;
        yintercept = meanY - ((sCo / ssX) * meanX);
        slope = sCo / ssX;
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T19:34:18.280

你不需要庞大的图书馆。公式比较简单。

给定 x 和 y 数据的一对数组，您将像[这样计算最小二乘拟合系数](http://mathworld.wolfram.com/LeastSquaresFitting.html)

公式（27）和（28）是你想要的两个。编码只涉及输入数组值的总和和平方和。

下面是一个 Java 类和它的 JUnit 测试类，供那些需要更多细节的人使用：

```
import java.util.Arrays;

/**
 * Simple linear regression example using Wolfram Alpha formulas.
 * User: mduffy
 * Date: 10/22/2018
 * Time: 10:56 AM
 * @link https://stackoverflow.com/questions/15623129/simple-linear-regression-for-data-set/15623183?noredirect=1#comment92773017_15623183
 */
public class SimpleLinearRegressionExample {

    public static double slope(double [] x, double [] y) {
        double slope = 0.0;
        if ((x != null) && (y != null) && (x.length == y.length) && (x.length > 0)) {
            slope = correlation(x, y)/sumOfSquares(x);
        }
        return slope;
    }

    public static double intercept(double [] x, double [] y) {
        double intercept = 0.0;
        if ((x != null) && (y != null) && (x.length == y.length) && (x.length > 0)) {
            double xave = average(x);
            double yave = average(y);
            intercept = yave-slope(x, y)*xave;
        }
        return intercept;
    }

    public static double average(double [] values) {
        double average = 0.0;
        if ((values != null) && (values.length > 0)) {
            average = Arrays.stream(values).average().orElse(0.0);
        }
        return average;
    }

    public static double sumOfSquares(double [] values) {
        double sumOfSquares = 0.0;
        if ((values != null) && (values.length > 0)) {
            sumOfSquares = Arrays.stream(values).map(v -> v*v).sum();
            double average = average(values);
            sumOfSquares -= average*average*values.length;
        }
        return sumOfSquares;
    }

    public static double correlation(double [] x, double [] y) {
        double correlation = 0.0;
        if ((x != null) && (y != null) && (x.length == y.length) && (x.length > 0)) {
            for (int i = 0; i < x.length; ++i) {
                correlation += x[i]*y[i];
            }
            double xave = average(x);
            double yave = average(y);
            correlation -= xave*yave*x.length;
        }
        return correlation;
    }
} 
```

JUnit 测试类：

```
import org.junit.Assert;
import org.junit.Test;

/**
 * JUnit tests for simple linear regression example.
 * User: mduffy
 * Date: 10/22/2018
 * Time: 11:53 AM
 * @link https://stackoverflow.com/questions/15623129/simple-linear-regression-for-data-set/15623183?noredirect=1#comment92773017_15623183
 */
public class SimpleLinearRegressionExampleTest {

    public static double tolerance = 1.0e-6;

    @Test
    public void testAverage_NullArray() {
        // setup
        double [] x = null;
        double expected = 0.0;
        // exercise
        double actual = SimpleLinearRegressionExample.average(x);
        // assert
        Assert.assertEquals(expected, actual, tolerance);
    }

    @Test
    public void testAverage_EmptyArray() {
        // setup
        double [] x = {};
        double expected = 0.0;
        // exercise
        double actual = SimpleLinearRegressionExample.average(x);
        // assert
        Assert.assertEquals(expected, actual, tolerance);
    }

    @Test
    public void testAverage_Success() {
        // setup
        double [] x = { 1.0, 2.0, 2.0, 3.0, 4.0, 7.0, 9.0 };
        double expected = 4.0;
        // exercise
        double actual = SimpleLinearRegressionExample.average(x);
        // assert
        Assert.assertEquals(expected, actual, tolerance);
    }

    @Test
    public void testSumOfSquares_NullArray() {
        // setup
        double [] x = null;
        double expected = 0.0;
        // exercise
        double actual = SimpleLinearRegressionExample.sumOfSquares(x);
        // assert
        Assert.assertEquals(expected, actual, tolerance);
    }

    @Test
    public void testSumOfSquares_EmptyArray() {
        // setup
        double [] x = {};
        double expected = 0.0;
        // exercise
        double actual = SimpleLinearRegressionExample.sumOfSquares(x);
        // assert
        Assert.assertEquals(expected, actual, tolerance);
    }

    @Test
    public void testSumOfSquares_Success() {
        // setup
        double [] x = { 1.0, 2.0, 2.0, 3.0, 4.0, 7.0, 9.0 };
        double expected = 52.0;
        // exercise
        double actual = SimpleLinearRegressionExample.sumOfSquares(x);
        // assert
        Assert.assertEquals(expected, actual, tolerance);
    }

    @Test
    public void testCorrelation_NullX_NullY() {
        // setup
        double [] x = null;
        double [] y = null;
        double expected = 0.0;
        // exercise
        double actual = SimpleLinearRegressionExample.correlation(x, y);
        // assert
        Assert.assertEquals(expected, actual, tolerance);
    }

    @Test
    public void testCorrelation_DifferentLengths() {
        // setup
        double [] x = { 1.0, 2.0, 3.0, 5.0, 8.0 };
        double [] y = { 0.11, 0.12, 0.13, 0.15, 0.18, 0.20 };
        double expected = 0.0;
        // exercise
        double actual = SimpleLinearRegressionExample.correlation(x, y);
        // assert
        Assert.assertEquals(expected, actual, tolerance);
    }

    @Test
    public void testCorrelation_Success() {
        // setup
        double [] x = { 1.0, 2.0, 3.0, 5.0, 8.0 };
        double [] y = { 0.11, 0.12, 0.13, 0.15, 0.18 };
        double expected = 0.308;
        // exercise
        double actual = SimpleLinearRegressionExample.correlation(x, y);
        // assert
        Assert.assertEquals(expected, actual, tolerance);
    }

    @Test
    public void testSlope() {
        // setup
        double [] x = { 1.0, 2.0, 3.0, 4.0 };
        double [] y = { 6.0, 5.0, 7.0, 10.0 };
        double expected = 1.4;
        // exercise
        double actual = SimpleLinearRegressionExample.slope(x, y);
        // assert
        Assert.assertEquals(expected, actual, tolerance);
    }

    @Test
    public void testIntercept() {
        // setup
        double [] x = { 1.0, 2.0, 3.0, 4.0 };
        double [] y = { 6.0, 5.0, 7.0, 10.0 };
        double expected = 3.5;
        // exercise
        double actual = SimpleLinearRegressionExample.intercept(x, y);
        // assert
        Assert.assertEquals(expected, actual, tolerance);
    }
} 
```

# facebook - 为什么这两个问题得到不同的结果？

> ID：15623130
> 
> 赞同：0
> 
> 时间：2013-03-25T19:30:39.320
> 
> 标签：facebook, facebook-graph-api

通过：[https](https://developers.facebook.com/tools/explorer) ://developers.facebook.com/tools/explorer如果我使用图形 api 询问：

```
get: ?ids=http://localhost/gbi-bieganie.pl/2013/03/20/kolacja-po-wieczornym-bieganiu-tak-czy-nie/ 
```

对于相同的 url，我得到不同的结果，而不是使用 fql 查询：

```
SELECT url, normalized_url, share_count, like_count, comment_count, total_count, commentsbox_count, comments_fbid, click_count 
FROM link_stat 
WHERE url = "http://localhost/gbi-bieganie.pl/2013/03/20/kolacja-po-wieczornym-bieganiu-tak-czy-nie/"; 
```

谁能解释我为什么这些查询不同，我应该如何做一个查询来获得正确的 url 喜欢数量、评论数量和分享数量？

# javascript - 补间图像，然后是文本 Greensock 和 JS 动画

> ID：15623132
> 
> 赞同：2
> 
> 时间：2013-03-25T19:30:52.660
> 
> 标签：javascript, animation, tween, gsap

我正在尝试补间图像，然后让文字飞进来。我已经有图像飞了，但我似乎无法弄清楚如何在图像进入后让文本进入......另外，我想为整个 div 放置一个背景，但由于某种原因一切我试过没有出现，也没有任何循环。帮助？-- 图片是我自己在 Illustrator 上制作的，所以我无法上传图片，但如果有人可以帮我解决这个问题，我将不胜感激！

这是我的 HTML：

```
 <script src="js/TweenMax.min.js"></script>
<div class="container">
    <div class="row">
    <div class="twelvecol last">
    <div id="box">
        <img src="images/cartoon-illustration.png" alt="cartoon" width="150" height="277">
        </div>
        </div>
        </div>
        </div> 
```

这是我的 Javascript：

```
function init() {
            var b = document.getElementById("box");
            b.style.left = -500 + "px";
            TweenMax.to(b, 1.5, {css:{left:200}, ease:Expo.easeOut})
        }
window.onload = init; 
```

这是我的CSS：

```
#box {
            width: 400px;
            height: 400px;
            position: absolute;
            padding: 25px;
                        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:34:30.393

如果您需要链接两个，也许是三个动画，使用 zpipe07 指示的 onComplete 很好。对于多个动画，其中一些并行运行，一些相互链接，它很快就会变得难以管理。

您应该使用 TimelineLite。然后您的代码将如下所示：

```
function myFunction() {console.log('All done!')}

//create a TimelineLite instance. By default, it starts playing immediately, 
//but we indicated that we want it to wait until our signal. 
//We also want it to launch a function after all animations are complete.
var tl = new TimelineLite({paused:true, onComplete:myFunction})

//append a to() tween
tl.to(b, 1.5, {css:{left:200}, ease:Expo.easeOut)

//add another sequenced tween (by default, tweens are added to the end 
//of the timeline, which makes sequencing simple)
tl.to(textElement, 1.5, {css:{left:200}, ease:Expo.easeOut})

tl.play() 
```

您可以随时将补间添加到时间轴上的开头、结尾或任意位置。您可以暂停、重复、减速、快进或倒退时间线。您可以分配标签并跳转到它们、嵌套时间线等。

更多信息在这里：[http ://www.greensock.com/get-started-js/#sequencing](http://www.greensock.com/get-started-js/#sequencing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T19:58:23.150

要在图像补间完成后制作一些文本动画，可以使用 onComplete 属性。正如预期的那样，onComplete 允许您在补间完成后立即执行功能。例如：

```
 function init() {
                var b = document.getElementById("box"),
                    textElement = document.getElementById("yourText");

                b.style.left = -500 + "px";
                textElement.style.left = -500 + "px";

                TweenMax.to(b, 1.5, {css:{left:200}, ease:Expo.easeOut}, onComplete: function() {
                    TweenMax.to(textElement, 1.5, {css:{left:200}, ease:Expo.easeOut});
                });
            };
    window.onload = init; 
```

参考：[http ://www.greensock.com/get-started-js/](http://www.greensock.com/get-started-js/)

# javascript - Jasmine：在调用函数之前测试变量状态

> ID：15623135
> 
> 赞同：0
> 
> 时间：2013-03-25T19:31:11.273
> 
> 标签：javascript, unit-testing, jasmine, sinon

我正在调用一个依赖于全局窗口对象的函数，该对象定义了几个变量，然后才能通过注入第 3 方脚本成功运行。IE。

```
window.foo = 1;
function calledAfter() {
    // inject 3rd party script that depends on
    // window.foo !== undefined
} 
```

使用 Jasmine 和 Sinon.js，我将如何测试以确保在调用`window.foo`之前设置？`calledAfter`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:29:37.930

你不会的。这正是为什么全局存储状态是一个非常糟糕的主意的原因之一。如果函数依赖于特定的配置集，则应将其注入该集，或者 - 不太理想 - 有一种方法来请求该集。一般来说，依赖管理不是单元测试的，这就是集成测试的目的。

# android - 如何动态设置偏好值？

> ID：15623140
> 
> 赞同：3
> 
> 时间：2013-03-25T19:31:21.477
> 
> 标签：android, android-preferences

我使用了一个特殊的preferenceActivity实现，它允许使用标头并且也与旧的android版本兼容。我想要完成的是我想在a未选中但无论何时或被调用时重置a`ListPreference`的值，我得到。这是我的代码：`CheckBoxPreference``setValue()``setEntries()``null pointer Exception`

```
import java.util.List;
import android.annotation.SuppressLint;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.OnSharedPreferenceChangeListener;
import android.os.Build;
import android.os.Bundle;
import android.preference.CheckBoxPreference;
import android.preference.ListPreference;
import android.preference.PreferenceManager;
import android.util.Log;
import com.actionbarsherlock.app.SherlockPreferenceActivity;

public class FragmentPreferences extends SherlockPreferenceActivity implements
    OnSharedPreferenceChangeListener {
private static final String TAG = "FragmentPreferences";
private boolean themeIsDirty = false;
private ListPreference prefDspProfile;

@SuppressLint("NewApi")
@SuppressWarnings("deprecation")
@Override
protected void onCreate(Bundle savedInstanceState) {
    setTheme(ActivityOriginal.THEME);
    super.onCreate(savedInstanceState);

    // Load the preferences from an XML resource
    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB) {
        addPreferencesFromResource(R.xml.preference_general);
        addPreferencesFromResource(R.xml.preference_layout);
        addPreferencesFromResource(R.xml.preference_audio);
        addPreferencesFromResource(R.xml.preference_dsp);
        addPreferencesFromResource(R.xml.preference_error);
    }
    // turn off unaccessible dsp effects based on android version
    if (Build.VERSION.SDK_INT > Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) {
        if (!android.media.audiofx.AcousticEchoCanceler.isAvailable()) {
            setEchoCancelerAsIncompatible();
        }
        if (!android.media.audiofx.NoiseSuppressor.isAvailable()) {
            setNoiseSuppressorAsIncompatible();
        }
        if (!android.media.audiofx.AutomaticGainControl.isAvailable()) {
            setGainControlAsIncompatible();
        }
    } else {
        setEchoCancelerAsIncompatible();
        setNoiseSuppressorAsIncompatible();
        setGainControlAsIncompatible();

    }

}

private void setGainControlAsIncompatible() {
    CheckBoxPreference prefDspAutomaticGainControl = (CheckBoxPreference) getPreferenceScreen()
            .findPreference("pref_dsp_automatic_gain_control");
    prefDspAutomaticGainControl.setChecked(false);
    prefDspAutomaticGainControl
            .setSummaryOff(R.string.pref_dsp_automatic_gain_control_incompatible);
    prefDspAutomaticGainControl.setEnabled(false);
}

private void setNoiseSuppressorAsIncompatible() {
    CheckBoxPreference prefDspNoiseSuppressor = (CheckBoxPreference) getPreferenceScreen()
            .findPreference("pref_dsp_noise_suppressor");
    prefDspNoiseSuppressor.setChecked(false);
    prefDspNoiseSuppressor
            .setSummaryOff(R.string.pref_dsp_noise_suppressor_incompatible);
    prefDspNoiseSuppressor.setEnabled(false);

}

private void setEchoCancelerAsIncompatible() {
    CheckBoxPreference prefDspEchoCanceler = (CheckBoxPreference) getPreferenceScreen()
            .findPreference("pref_dsp_echo_canceler");
    prefDspEchoCanceler.setChecked(false);
    prefDspEchoCanceler
            .setSummaryOff(R.string.pref_dsp_echo_canceler_incompatible);
    prefDspEchoCanceler.setEnabled(false);

}

@SuppressLint("NewApi")
@Override
public void onBuildHeaders(List<Header> target) {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        loadHeadersFromResource(R.xml.preference_headers, target);

        for (Header header : target) {
            switch (header.titleRes) {
            case R.string.prefs_header1_title:
                header.iconRes = ActivityOriginal.getIcon(
                        getSupportActionBar().getThemedContext(),
                        "ic_menu_pref_general");
                break;
            case R.string.prefs_header2_title:
                header.iconRes = ActivityOriginal.getIcon(
                        getApplicationContext(), "ic_menu_pref_layout");
                break;
            case R.string.prefs_header3_title:
                header.iconRes = ActivityOriginal.getIcon(
                        getApplicationContext(), "ic_menu_pref_sound");
                break;
            case R.string.prefs_header4_title:
                header.iconRes = ActivityOriginal.getIcon(
                        getApplicationContext(), "ic_menu_pref_error");
                break;
            case R.string.prefs_header5_title:
                header.iconRes = ActivityOriginal.getIcon(
                        getApplicationContext(), "ic_menu_pref_dsp");
                break;
            }
        }
    }
}

@Override
public void onStop() {

    /*
     * Toast.makeText(this.getApplicationContext(),
     * getString(R.string.reset_to_make_changes), Toast.LENGTH_LONG).show();
     */

    super.onStop();
}

@Override
public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,
        String key) {
    Log.i(TAG, "changed key is : " + key);
    SharedPreferences prefs = PreferenceManager
            .getDefaultSharedPreferences(this);
    if ("pref_dsp_bass_boost".equals(key)
            || "pref_dsp_low_pass_filter".equals(key)) {
        initPrefsDsp();
        if (prefs.getBoolean("pref_dsp_bass_boost", true)
                && prefs.getBoolean("pref_dsp_low_pass_filter", true)) {
            prefDspProfile.setValue("0");
            prefDspProfile = null;
            Log.i(TAG, "set the pref_dsp_profile to 0 ");

        } else {
            prefDspProfile.setValue("1");
            prefDspProfile = null;
            Log.i(TAG, "set the pref_dsp_profile to 1 ");
        }
    }
    if ("pref_dsp_profile".equals(key)) {
        initPrefsDsp();
        if ("0".equals(prefDspProfile.getValue())) {
            CheckBoxPreference prefDspBassBoost = (CheckBoxPreference) findPreference("pref_dsp_low_pass_filter");
            prefDspBassBoost.setChecked(true);

            CheckBoxPreference prefDspLowPassFilter = (CheckBoxPreference) findPreference("pref_dsp_bass_boost");
            prefDspLowPassFilter.setChecked(true);
        }
    }
    if ("theme_preference".equals(key)) {
        Log.i(this.getClass().getName(), "themeIsDirty");
        themeIsDirty = true;
        Intent in = new Intent();
        in.putExtra("themeIsDirty", themeIsDirty);
        setResult(RESULT_OK, in);
        PreferenceManager.getDefaultSharedPreferences(this)
                .unregisterOnSharedPreferenceChangeListener(this);

    }

}

private void initPrefsDsp() {
    /*
     * CharSequence[] dspEntries = getResources().getStringArray(
     * R.array.prefs_dsp_entries); CharSequence[] dspValues =
     * getResources().getStringArray( R.array.prefs_dsp_values);
     */
    CharSequence[] dspEntries = { "Dark grey", "Light grey" };
    CharSequence[] dspValues = { "0", "1" };
    prefDspProfile = (ListPreference) findPreference("pref_dsp_profile");
    if (prefDspProfile == null) {
        Log.i(TAG, "prefDspProfile is null");
        return;
    }
    prefDspProfile.setEntries(dspEntries);
    prefDspProfile.setEntryValues(dspValues);

}

@Override
protected void onResume() {
    super.onResume();
    PreferenceManager.getDefaultSharedPreferences(this)
            .registerOnSharedPreferenceChangeListener(this);
    /*
     * getPreferenceScreen().getSharedPreferences()
     * .registerOnSharedPreferenceChangeListener(this);
     */

}

@Override
public void onBackPressed() {
    // the following block will warn user after back button is pressed
    PreferenceManager.getDefaultSharedPreferences(this)
            .unregisterOnSharedPreferenceChangeListener(this);
    /*
     * getPreferenceScreen().getSharedPreferences()
     * .unregisterOnSharedPreferenceChangeListener(this);
     */
    Intent in = new Intent();
    in.putExtra("themeIsDirty", themeIsDirty);
    setResult(RESULT_OK, in);
    super.onBackPressed();
}

@Override
protected void onPause() {
    super.onPause();

}

  } 
```

偏好_dsp.xml

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<ListPreference
    android:defaultValue="0"
    android:dialogTitle="@string/pref_dsp_title_dialog"
    android:entries="@array/prefs_dsp_entries"
    android:entryValues="@array/prefs_dsp_values"
    android:key="pref_dsp_profile"
    android:summary="@string/pref_dsp_summary"
    android:title="@string/pref_dsp_title" />

<CheckBoxPreference
    android:defaultValue="true"
    android:key="pref_dsp_low_pass_filter"
    android:summaryOff="@string/pref_dsp_low_pass_filter_disabled"
    android:summaryOn="@string/pref_dsp_low_pass_filter_enabled"
    android:title="@string/pref_dsp_low_pass_filter_title" />
<CheckBoxPreference
    android:defaultValue="true"
    android:key="pref_dsp_bass_boost"
    android:summaryOff="@string/pref_dsp_bass_boost_disabled"
    android:summaryOn="@string/pref_dsp_bass_boost_enabled"
    android:title="@string/pref_dsp_bass_boost_title" />
<CheckBoxPreference
    android:defaultValue="true"
    android:key="pref_dsp_echo_canceler"
    android:summaryOff="@string/pref_dsp_echo_canceler_disabled"
    android:summaryOn="@string/pref_dsp_echo_canceler_enabled"
    android:title="@string/pref_dsp_echo_canceler_title" />
<CheckBoxPreference
    android:defaultValue="true"
    android:key="pref_dsp_noise_suppressor"
    android:summaryOff="@string/pref_dsp_noise_suppressor_disabled"
    android:summaryOn="@string/pref_dsp_noise_suppressor_enabled"
    android:title="@string/pref_dsp_noise_suppressor_title" />
<CheckBoxPreference
    android:defaultValue="false"
    android:key="pref_dsp_automatic_gain_control"
    android:summaryOff="@string/pref_dsp_automatic_gain_control_disabled"
    android:summaryOn="@string/pref_dsp_automatic_gain_control_enabled"
    android:title="@string/pref_dsp_automatic_gain_control_title" />
<ListPreference
    android:defaultValue="2.0f"
    android:dialogTitle="@string/prefs_dsp_sound_gain_dialog_title"
    android:entries="@array/prefs_dsp_sound_gain_entries"
    android:entryValues="@array/prefs_dsp_sound_gain_values"
    android:key="prefs_dsp_sound_gain"
    android:summary="@string/prefs_dsp_sound_gain_summary"
    android:title="@string/prefs_dsp_sound_gain_title" /> 
```

我在网上找不到关于如何`preference`动态修改值的完整示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T19:57:19.373

尝试（例如布尔）：

```
SharedPreferences.Editor prefs = PreferenceManager.getDefaultSharedPreferences(this).edit();
prefs.putBoolean("your_pref", false);
prefs.commit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:03:42.160

`findPreference("pref_dsp_profile")`正在回归`null`。由于到目前为止您共享的代码不明显的原因，没有名为`pref_dsp_profile`可访问的首选项。也许您的条件不成立 ( `Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB`)，或者该偏好可能不在这些文件中。

# java - 什么可能导致 MessageQueue 增长失控

> ID：15623141
> 
> 赞同：0
> 
> 时间：2013-03-25T19:31:21.750
> 
> 标签：java, android, memory

我实现了一个适配器视图，其中有一个非常大的数据集（2000 多个对象）排列在一个列表中。滚动太快会导致内存增长，在使用 eclipse 的 MAT 分析后，所有增长都被绑定在 MessageQueue 中。以下是具体消息：

```
One instance of "android.os.MessageQueue" loaded by "<system class loader>" occupies 57,300,528 (77.75%) bytes. The memory is accumulated in one instance of "android.os.Message" loaded by "<system class loader>". 
```

有哪些事情可能会导致这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:44:13.370

这是由于每个对象产生一个异步任务来抓取图像并在视图被回收时取消。当列表移动得足够快时，这些任务以真正可怕的速度被创建和取消，导致消息无处不在。

# javascript - 有没有办法将 javascript 用于独立的桌面应用程序

> ID：15623147
> 
> 赞同：1
> 
> 时间：2013-03-25T19:31:39.397
> 
> 标签：javascript

有没有办法将 JavaScript 用于独立的桌面应用程序，我的意思是没有任何浏览器交互。

# bit-manipulation - 哪个快？

> ID：15623151
> 
> 赞同：0
> 
> 时间：2013-03-25T19:31:58.403
> 
> 标签：bit-manipulation, bitwise-operators, bitwise-xor

我尝试了这些操作：

> `(7 xor 5)` *和* `(7 - 5)`

我得到相同的答案。我想知道哪个操作快？谁能给我解释一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T19:34:41.827

# 两个都。

您应该编写**清楚地表达您尝试执行的操作的**代码。

编译器 / JITter 将负责使其快速。

# sql - 经典 ASP 中的存储过程

> ID：15623153
> 
> 赞同：0
> 
> 时间：2013-03-25T19:32:15.710
> 
> 标签：sql, stored-procedures, asp-classic

我正在尝试从经典的 asp 页面执行存储过程，但我遇到了几个关于它如何插入的问题。我正在尝试将发布的表单数据映射到存储过程中的参数，这似乎不起作用。我必须将所有内容都转换为 varchar 才能完成插入，并且不知何故有“。” 被插入到某些字段的末尾。我已经看了几个小时，似乎找不到问题。

```
ALTER PROCEDURE [dbo].[insertLicenseFee]

    -- Add the parameters for the stored procedure here
    @uid VARCHAR(255),
    @phoneNumber VARCHAR(255),
    @accountNumber VARCHAR(255), 
    @fedID VARCHAR(255), 
    @dateEnd VARCHAR(255), 
    @dateDue VARCHAR(255), 
    @nature NVARCHAR(255), 
    @dateStarted VARCHAR(255), 
    @dateDisc VARCHAR(255),
    @saleName NVARCHAR(255), 
    @saleAdd NVARCHAR(255), 
    @empCounty NVARCHAR(255),
    @basisReturn NVARCHAR(255),
    @bType NVARCHAR(255),
    @bTypeOther NVARCHAR(255),
    @grossFedReturn VARCHAR(255),
    @busiDeduction VARCHAR(255), 
    @netBusiness VARCHAR(255), 
    @notDeductable VARCHAR(255),
    @total VARCHAR(255), 
    @deductItems VARCHAR(255), 
    @adjustedNet VARCHAR(255), 
    @netProfits VARCHAR(255),
    @licenseFee VARCHAR(255),
    @interest VARCHAR(255), 
    @penalty VARCHAR(255), 
    @finalTotal VARCHAR(255), 
    @lessCredits VARCHAR(255), 
    @lessCreditRadio NVARCHAR(255), 
    @balanceDue VARCHAR(255), 
    @stateTax VARCHAR(255), 
    @capitalGain VARCHAR(255), 
    @operatingLoss VARCHAR(255), 
    @partnerSalary VARCHAR(255), 
    @otherItems VARCHAR(255), 
    @royalties VARCHAR(255), 
    @dividends VARCHAR(255), 
    @capLoss VARCHAR(255), 
    @otherNotSub VARCHAR(255), 
    @totalDeductions VARCHAR(255), 
    @countyWages VARCHAR(255), 
    @totalWages VARCHAR(255), 
    @signature NVARCHAR(255), 
    @title NVARCHAR(255), 
    @subDate VARCHAR(255)  
AS
BEGIN
    SET NOCOUNT ON;
    SET @subDate = GETDATE();
    INSERT INTO  dbo.LicenseFeeForm
            ( userID ,
              phoneNumber ,
              accountNumber ,
              fedID ,
              dateEnd ,
              dateDue ,
              nature ,
              dateStarted ,
              dateDisc ,
              saleName ,
              saleAdd ,
              empCounty ,
              basisReturn ,
              bType ,
              bTypeOther ,
              grossFedReturn ,
              busiDeductions ,
              netBusiness ,
              notDeductable ,
              total ,
              deductItems ,
              adjustedNed ,
              netProfits ,
              licenseFee ,
              intrest ,
              penalty ,
              finalTotal ,
              lessCredits ,
              lessCreditRadio ,
              balanceDue ,
              stateTax ,
              capitalGain ,
              operatingLoss ,
              partnerSalary ,
              otherItems ,
              royalties ,
              dividends ,
              capLoss ,
              otherNotSub ,
              totalDeductions ,
              countyWages ,
              totalWages ,
              signature ,
              title ,
              subDate
            )
    VALUES  ( @uid , -- userID - VARCHAR(255)
              @phoneNumber , -- phoneNumber - VARCHAR(255)
              @accountNumber , -- accountNumber - VARCHAR(255)
              @fedID , -- fedID - VARCHAR(255)
              @dateEnd , -- dateEnd - date
              @dateDue , -- dateDue - date
              @nature , -- nature - nvarchar(255)
              @dateStarted , -- dateStarted - date
              @dateDisc , -- dateDisc - date
              @saleName , -- saleName - nvarchar(255)
              @saleAdd , -- saleAdd - nvarchar(255)
              @empCounty , -- empCounty - nvarchar(255)
              @basisReturn , -- basisReturn - nvarchar(255)
              @bType, -- bType - nvarchar(255)
              @bTypeOther, -- bTypeOther - nvarchar(255)
              @grossFedReturn , -- grossFedReturn - VARCHAR(255)
              @busiDeduction , -- busiDeductions - VARCHAR(255)
              @netBusiness , -- netBusiness - VARCHAR(255)
              @notDeductable , -- notDeductable - VARCHAR(255)
              @total , -- total - VARCHAR(255)
              @deductItems , -- deductItems - VARCHAR(255)
              @adjustedNet , -- adjustedNed - VARCHAR(255)
              @netProfits , -- netProfits - VARCHAR(255)
              @licenseFee , -- licenseFee - VARCHAR(255)
              @interest , -- VARCHAR(255)rest - VARCHAR(255)
              @penalty , -- penalty - VARCHAR(255)
              @finalTotal , -- finalTotal - VARCHAR(255)
              @lessCredits , -- lessCredits - VARCHAR(255)
              @lessCreditRadio , -- lessCreditRadio - nvarchar(255)
              @balanceDue , -- balanceDue - VARCHAR(255)
              @stateTax , -- stateTax - VARCHAR(255)
              @capitalGain , -- capitalGain - VARCHAR(255)
              @operatingLoss , -- operatingLoss - VARCHAR(255)
              @partnerSalary , -- partnerSalary - VARCHAR(255)
              @otherItems , -- otherItems - VARCHAR(255)
              @royalties , -- royalties - VARCHAR(255)
              @dividends , -- dividends - VARCHAR(255)
              @capLoss , -- capLoss - VARCHAR(255)
              @otherNotSub , -- otherNotSub - VARCHAR(255)
              @totalDeductions , -- totalDeductions - VARCHAR(255)
              @countyWages , -- countyWages - VARCHAR(255)
              @totalWages , -- totalWages - VARCHAR(255)
              @signature , -- signature - nvarchar(255)
              @title , -- title - nvarchar(255)
              GETDATE()  -- subDate - date
            )
END 
```

执行和参数构建的 HTML 如下：

```
 Set cmdInsert = Server.CreateObject("ADODB.Command")
        Set cmdInsert.ActiveConnection = Conn
        cmdInsert.CommandText = "insertLicenseFee"
        cmdInsert.CommandType=adCmdStoredProc
        cmdInsert.Parameters.Append cmdInsert.createParameter("@userID", adInteger, adParamInput, 255, cint(Session("uid")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@phoneNumber", adVarChar, adParamInput, 255, (Request.Form("phoneNumber")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@accountNumber", adVarChar, adParamInput,255 ,Request.Form("accountNumber"))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@fedID", adVarChar, adParamInput,255 , (Request.Form("fedID")))
        IF Request.Form("dateEnd") <> "" THEN   
            cmdInsert.Parameters.Append cmdInsert.createParameter("@dateEnd", adVarChar, adParamInput, 255, (Request.Form("dateEnd")))
        Else
            cmdInsert.Parameters.Append cmdInsert.createParameter("@dateEnd", adVarChar, adParamInput,255 , "-")
        End If

        If Request.Form("dateDue") <> "" THEN
            cmdInsert.Parameters.Append cmdInsert.createParameter("@dateDue", adVarChar, adParamInput, 255, (Request.Form("dateDue")))
        ELSE
            cmdInsert.Parameters.Append cmdInsert.createParameter("@dateDue", adVarChar, adParamInput,255 , "-")
        End If 

        cmdInsert.Parameters.Append cmdInsert.createParameter("@nature", adVarChar, adParamInput, 255, (Request.Form("nature")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@dateStarted", adVarChar, adParamInput, 255, (Request.Form("dateStarted")))
        If Request.Form("dateDisc") <> "" THEN
            cmdInsert.Parameters.Append cmdInsert.createParameter("@dateDisc", adVarChar, adParamInput,255 , (Request.Form("dateDisc")))
        Else 
            cmdInsert.Parameters.Append cmdInsert.createParameter("@dateDisc", adVarChar, adParamInput, 255, "-")
        End If

        If Request.Form("saleName") <> "" THEN
            cmdInsert.Parameters.Append cmdInsert.createParameter("@saleName", adVarChar, adParamInput, 255, (Request.Form("saleName")))
        ELSE
            cmdInsert.Parameters.Append cmdInsert.createParameter("@saleName", adVarChar, adParamInput, 255, "-")
        End If

        If Request.Form("saleAdd") <> "" THEN
            cmdInsert.Parameters.Append cmdInsert.createParameter("@saleAdd", adVarChar, adParamInput, 255, Request.Form("saleAdd"))
        ELSE
            cmdInsert.Parameters.Append cmdInsert.createParameter("@saleAdd", adVarChar, adParamInput, 255, "-")
        End If

        cmdInsert.Parameters.Append cmdInsert.createParameter("@empCounty", adVarChar, adParamInput, 255,Request.Form("empCounty"))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@basisReturn", adVarChar, adParamInput,255 , Request.Form("basisReturn"))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@bType", adVarChar, adParamInput,255, Request.Form("bType"))
        If Request.Form("bTypeOther") <> "" THEN
            cmdInsert.Parameters.Append cmdInsert.createParameter("@bTypeOther", adVarChar, adParamInput,255 , Request.Form("bTypeOther"))
        Else
            cmdInsert.Parameters.Append cmdInsert.createParameter("@bTypeOther", adVarChar, adParamInput, 255, "-")
        End If

        cmdInsert.Parameters.Append cmdInsert.createParameter("@grossFedReturn", adVarChar, adParamInput,255 , (Request.Form("grossFedReturn")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@busiDeductions", adVarChar, adParamInput,255 , (Request.Form("busiDeductions")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@netBusiness", adVarChar, adParamInput,255 , (Request.Form("netBusiness")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@notDeductable", adVarChar, adParamInput, 255,(Request.Form("notDeductable")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@total", adVarChar, adParamInput,255 , (Request.Form("total")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@deductItems", adVarChar, adParamInput,255 , (Request.Form("deductItems")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@adjustedNet", adVarChar, adParamInput,255 , (Request.Form("adjustedNet")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@netProfits", adVarChar, adParamInput,255 , (Request.Form("netProfits")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@licenseFee", adVarChar,adParamInput,255 , (Request.Form("licenseFee")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@interest", adVarChar, adParamInput,255 , (Request.Form("interest")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@penalty", adVarChar, adParamInput,255 , (Request.Form("penalty")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@finalTotal", adVarChar, adParamInput,255 , (Request.Form("finalTotal")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@lessCredits", adVarChar, adParamInput,255 , (Request.Form("lessCredits")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@lessCreditRadio", adVarChar, adParamInput, 255, Request.Form("lessCreditRadio"))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@balanceDue", adVarChar, adParamInput,255 , (Request.Form("balanceDue")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@stateTax" , adVarChar, adParamInput,255 , (Request.Form("stateTax")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@capitalGain", adVarChar, adParamInput,255 , (Request.Form("capitalGain")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@operatingLoss", adVarChar, adParamInput,255 , (Request.Form("operatingLoss")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@partnerSalary", adVarChar, adParamInput,255 , (Request.Form("partnerSalary")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@otherItems", adVarChar, adParamInput,255 , (Request.Form("otherItems")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@royalties", adVarChar, adParamInput,255 , (Request.Form("royalties")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@dividends", adVarChar, adParamInput,255 , (Request.Form("dividends")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@capLoss", adVarChar, adParamInput,255 , (Request.Form("capLoss")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@otherNotSub", adVarChar, adParamInput,255 , (Request.Form("otherNotSub")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@totalDeductions", adVarChar, adParamInput,255 , (Request.Form("totalDeductions")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@countyWages", adVarChar, adParamInput,255 , (Request.Form("countyWages")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@totalWages", adVarChar, adParamInput,255 , (Request.Form("totalWages")))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@signature", adVarChar, adParamInput,255 , Request.Form("signature"))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@title", adVarChar, adParamInput, 255, Request.Form("title"))
        cmdInsert.Parameters.Append cmdInsert.createParameter("@title", adVarChar, adParamInput, 255, Request.Form("title")) 
```

如果我取出出现两次的 @title 的附加信息，我会收到一条错误消息，指出“过程或函数 'insertLicenseFee' 需要参数 '@subDate'，但未提供”。

我只是迷失了这里可能出现的错误。在我发疯之前，有人能帮帮我吗？我知道所有表单数据都被正确传递，因为我可以看到所有元素和正确的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:43:51.167

你的第二个`createParameter("@title"`被作为参数传递到 SP `@subDate`- 如果你删除它，那么你将丢失一个参数 - 因此出现错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:15:10.353

您可以尝试将命令对象的 NamedParameters 属性设置为`True`.

```
cmdInsert.NamedParameters = True 
```

# apache - xampp中的Apache失败

> ID：15623163
> 
> 赞同：1
> 
> 时间：2013-03-25T19:33:05.737
> 
> 标签：apache, xampp

所以我试图在我的新 Windows 7 机器上安装 XAMPP。它失败并显示以下错误消息。我已启用调试以供参考。

我检查了netstat，没有端口冲突。此外，我已确保安装了 VS 2008 redist（x64，这对我的系统是正确的）。我不知道从这里去哪里。

正在尝试启动 Apache 应用程序... 正在执行“c:\xampp\apache\bin\httpd.exe” 返回代码：0 检测到状态变化：正在运行 检测到状态变化：停止 Apache] 错误：Apache 意外关闭。Apache] 这可能是由于端口被阻塞、缺少依赖项、权限不正确、崩溃或被其他方法关闭造成的。检查“/xampp/apache/logs/error.log”文件和 Windows 事件查看器以获取更多线索

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-21T11:36:58.857

在我自己的情况下，这是因为安装后，windows 自动打开了一个“cmd”控制台，关闭该控制台使 apache 工作正常。

# sas - SAS Prompt Manager - 数据库（即大型机、db2、oracle、sqlsvr）不接受密码屏蔽

> ID：15623176
> 
> 赞同：1
> 
> 时间：2013-03-25T19:33:57.010
> 
> 标签：sas, password-protection, enterprise-guide

工具：SAS EG5.1 环境：SAS GRID (linux)

任务：我正在尝试通过提示管理器创建一个提示，它将向用于访问 DB2/ORACLE/SQLSVR 上的表的 libname 语句提供一个屏蔽密码；我也在尝试将相同的信息传递给大型机连接脚本。没有一个系统会接受这些信息，它们只接受未屏蔽的密码。有没有办法以蒙面的方式传递这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:30:11.997

如果您在 EG 中使用提示，请确保在“编码屏蔽文本的方法”下选择“SAS 专有加密”（并且您选择了“屏蔽单行”文本提示类型）。

如果您使用的是代码：

```
Proc Pwencode in="PASSWORD";
run; 
```

将以这样的方式掩盖 PASSWORD 一词，以使 SAS 提供的用于远程连接到大型机的脚本可以正常工作。

发布更多代码，包括用于连接数据库的内容和远程连接脚本信息（如果需要更多信息）...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T20:18:05.933

I'm not sure whether this is relevant if you're using EG as I don't use that myself, but the method I'm most familiar with is to use %window and %display statements to construct a prompt that people can use to enter a masked password. The inputs from the fields in such a prompt can be made available as macro variables.

# android - Android Maven TaskStackBuilder 找不到符号

> ID：15623178
> 
> 赞同：0
> 
> 时间：2013-03-25T19:33:59.663
> 
> 标签：android, maven

*我正在尝试使用TaskStackBuilder*类解决此错误：“找不到符号” 。我使用 Travis-ci 并且也有这个问题：[https://travis-ci.org/melchor629/Musicote-Melchor629](https://travis-ci.org/melchor629/Musicote-Melchor629) 并且针对 maven 的代码错误是：

```
 int mID = 1;

    NotificationCompat.Builder notification = new NotificationCompat.Builder(this)
            .setSmallIcon(R.drawable.altavoz)
            .setContentTitle("Musicote")
            .setContentText("Reproduciendo "+titulo+" de "+artista)
            ;//TODO poner que sea fijo

    Intent resultIntent = new Intent(this, MainActivity.class);

    TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);
    stackBuilder.addParentStack(MainActivity.class);
    stackBuilder.addNextIntent(resultIntent);
    PendingIntent resultPendingIntent = stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT);
    notification.setContentIntent(resultPendingIntent);
    nm = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
    nm.notify(mID, notification.build()); 
```

而且我不知道要解决这个问题，我尝试了所有我知道的：S 我正在使用“android.support.v4.TaskStackBuilder”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:39:43.037

您使用的是 v4 支持库吗？如果是这样，您是否导入了正确的 TaskStackBuilder ( android.support.v4.app.TaskStackBuilder)？

# javascript - 如何仅更改 DOM 元素中的文本而不替换任何子元素

> ID：15623180
> 
> 赞同：10
> 
> 时间：2013-03-25T19:34:07.960
> 
> 标签：javascript, jquery, html

嗨，我有一个简单的 html 结构

```
<h1>Title text <span>inner text</span></h1> 
```

我想要的是只替换文本（标题文本）而不干扰`<span>`文本。这可能吗？

我不想添加任何其他 dom 元素，我想保留该结构。我当然一直在这样做。

```
$("h1").text("new text"); 
```

但你可以猜到......也会替换所有的内部文本和`span`文本元素。

可能的解决方案：我正在考虑在变量中复制跨度的文本，然后将其与新`<h1>`文本连接起来，但我认为可能存在一种更好、更干净的方法来做到这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T19:39:24.310

使用[**jQuery.contents()**](http://api.jquery.com/contents/)你可以替换`nodeValue`类似这样的：

```
$("h1").contents()[0].nodeValue = "new text "; 
```

* * *

[](http://jsfiddle.net/kCnD8/)**用于`jQuery.contents()`替换文本节点的[**DEMO**](http://jsfiddle.net/kCnD8/)**

 *** * *

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T19:38:13.430

```
$("h1").each(function() {
    var textNode = document.createTextNode("new text");
    this.replaceChild(textNode, this.firstChild);
}); 
```

**演示：http:** [//jsfiddle.net/FvbJa/](http://jsfiddle.net/FvbJa/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T20:22:19.270

另一个简短的 jQuery 解决方案：

```
$("h1").contents().first().replaceWith("new text"); 
```

**演示：http:** [//jsfiddle.net/FvbJa/1/](http://jsfiddle.net/FvbJa/1/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-12T06:56:36.027

这将在没有 jquery 的情况下工作：

```
$title = documento.querySelector('your h1 element');
$title.firstChild.nodeValue = 'New Title text'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T19:45:47.663

我发现这个[问题](https://stackoverflow.com/questions/10567709/javascript-get-child-element)可能有用。

您可以通过以下方式获取子元素：

```
var h1_elt = document.getElementById(h1_elt_id);
var span = h1_elt.getElementsByTagName("span"); 
```

然后，您可以使用 spans innerHTML 作为 h1 元素 innerHTML 的一部分，即： h1_elt.innerHTML = "new text "+span.innerHTML+""

您唯一需要更改 HTML 的就是给 h1 元素一个 id 属性，然后用它来代替 h1_elt_id。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T19:47:33.377

以下将起作用。

```
var h1 = document.getElementById("h1"),
    children = Array.prototype.slice.call(h1.children),
    newText = document.createTextNode("Hello. ");

h1.innerHTML = "";
h1.appendChild(newText);

while(children) {
    h1.appendChild(children.shift());
} 
```

[http://jsfiddle.net/TFYmv/](http://jsfiddle.net/TFYmv/)

基本上，您所做的是拍摄特定元素中所有子元素的照片，完全更改元素，然后使用我们拍摄的照片将所有先前的子元素重新附加到父元素上。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-01-26T21:01:21.660

```
const ChgBtn = document.querySelector('#change-title')
const title = document.querySelector('#page-title')

ChgBtn.addEventListener('click', (event) => {
  if (title.innerHTML === 'job') {
    title.innerHTML = 'better job'
    event.target.innerHTML = 'Change title back'
  }
  else if (title.innerHTML === 'better job') {
    title.innerHTML = 'job'
    event.target.innerHTML = 'Change Title'
  }
  else {
    console.error('Wrong')
  }
}) 
```**

# apache - 我无法运行 apache

> ID：15623181
> 
> 赞同：0
> 
> 时间：2013-03-25T19:34:08.303
> 
> 标签：apache, xampp

我安装了 xamp 1.8.1，当我在控制面板中启动 Apache 时，我按下了启动，2 秒后它停止运行。控制面板这样说：

09:42:54 م [Apache] 错误：Apache 意外关闭。09:42:54 [Apache] 这可能是由于端口被阻塞、缺少依赖项、09:42:54 [Apache] 权限不正确、崩溃或被其他方法关闭。09:42:54 [Apache] 检查“/xampp/apache/logs/error.log”文件 09:42:54 [Apache] 和 Windows 事件查看器以获取更多线索

谁能告诉我如何解决这个问题？我尝试搜索“/xampp/apache/logs/error.log”文件，但找不到。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T21:33:00.407

我发现这个问题是由监听 443 的 vmware hostd.exe 引起的

在任务管理器中结束了该过程，它开始正常

检查任务管理器性能>资源监视器>侦听80或443端口

它可能是 Skype 或其他一些网络 ssl 服务，例如 vmware listener 或类似服务。

现在可能需要看看那个 vmware hostd.exe 是什么！！但至少可以完成一些工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T19:41:08.067

Apache 使用端口 80。在运行之前确认端口 80 未被任何其他程序使用。如果您在安装了 sql server 的 Windows 上运行 apache。转到服务并停止 sql 服务并尝试启动 apache。

# ruby-on-rails - 子域中的 Rails url 助手 - 删除子域

> ID：15623182
> 
> 赞同：7
> 
> 时间：2013-03-25T19:34:12.637
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我网站上的用户可以有一个子域。例如，他们的页面网址是

```
name.example.com 
```

登录的用户可以查看更多用户信息，因此在用户的显示页面上，我有一个使用以下代码生成的链接：

```
user_url(@user, :subdomain => false) 
```

此链接应生成以下 url（其中@user 的 ID 为 19）

```
example.com/users/19 
```

当我将鼠标悬停在链接上时，一切看起来都很好（即，在浏览器窗口的底部，Safari 和 FF 都正确显示了链接。）

问题是当我单击该链接时，该网站会引发 404 并且网址是：

```
example.com/users/19 
```

任何人都知道 com 和 users 之间的斜线发生了什么，我该如何取回它？

顺便说一句，Rails 3.2 和一切都在开发中。这个问题只在生产中出现。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-25T20:35:09.860

第一个建议是使用路径助手而不是用户助手，但是编辑它，因为我认为这没有帮助。

您是否尝试过 root_url(:host => request.domain) 丢失子域，而不是您的方法？我从这里得到的：[https ://github.com/rails/rails/issues/2025](https://github.com/rails/rails/issues/2025)

# gnuplot - 在 gnuplot 中绘制 3D 热图

> ID：15623188
> 
> 赞同：0
> 
> 时间：2013-03-25T19:34:45.533
> 
> 标签：gnuplot, heatmap

我有一个 4D 数据。第四列需要表示为颜色强度。其他三列将代表三个不同的轴。我想使用 gnuplot 生成 3D 热图。我怎样才能做到这一点？

数据样本：

0 0 0 16

0 0 1 25

0 1 0 27

0 1 1 29

1 0 0 8

1 0 1 44

1 1 0 50

1 1 1 27

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:52:12.263

在 gnuplot 中生成 3D 热图与生成 2D 热图相同，只是您在`using`. 换句话说，数据文件列出了一系列“扫描”，相邻的“扫描”用四边形连接。例如

```
x1 y1 z11 c11
x1 y2 z12 c12
x1 y3 z13 c13
...
x1 yN z1N c1N
                 #blank line here
x2 y1 z21 c21
x2 y2 z22 c22
...
x2 yN z2N c2N
                 #blank line here
.
.
.
                 #blank line here
xN y1 zN1 cN1
xN y2 zN2 cN2
...
xN yN zNN cNN 
```

现在您可以使用`splot 'datafile' u 1:2:3:4 w pm3d`.

*请注意，沿特定“扫描”的 x 值不需要保持不变——起初以这种方式可视化它更容易。

作为一个非常简单的例子，我们可以使用`++`特殊文件：

```
set xrange [0:2*pi]
set yrange [0:2*pi]
splot '++' using 1:2:2:(sin($1)*sin($2)) with pm3d 
```

您可以通过以下伪代码制作相同的数据文件：

```
do iy=0, ny
   y = (2*pi/ny)*iy
   do ix=0, nx
      x = (2*pi/nx)*ix
      z = y
      write x,y,z,sin(x)*sin(y)
   enddo
   write blank space
enddo 
```

# c# - 如何在 Windows Phone 8 上使用 Windows.Storage 正确读取和写入文件

> ID：15623189
> 
> 赞同：4
> 
> 时间：2013-03-25T19:34:45.917
> 
> 标签：c#, file-io, windows-runtime, windows-phone-8

我只需要使用 Windows.Storage API 简单地写入文件并读取 Windows Phone 8 中的文件。使用旧的 IsolatedStorage 方法相对容易，但使用新的 WinRT API 则要困难得多。

我一直在尝试写它，但似乎有所有这些奇怪的东西，比如 IBuffer。等等。使用完整版的 WinRT，使用似乎存在的 Windows.Storage.FileIO 非常容易，以防止像我这样的开发人员发疯。但是，它没有在电话版本中实现。另外，我观看了一个[Channel9](http://channel9.msdn.com/Series/Building-Apps-for-Windows-Phone-8-Jump-Start/Building-Apps-for-Windows-Phone-8-Jump-Start-04-Files-and-Storage-on-Windows-Phone-8)视频，其中显示了一些代码示例，但他们犯了一个错误，因为他们使用了标记为 Security Critical 的方法来获取常规流。显然不允许获得常规流。

那么，有人可以为我提供一个简洁而正确的片段，说明如何将文件读入字符串以及如何将字符串写入文件，以及正确的使用和处理技术吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T22:04:02.923

这是一个简单的例子：

```
public async Task WriteDataToFileAsync(string fileName, string content)
{
    byte[] data = Encoding.Unicode.GetBytes(content);

    var folder = ApplicationData.Current.LocalFolder;
    var file = await folder.CreateFileAsync(fileName, CreationCollisionOption.ReplaceExisting);

    using (var s = await file.OpenStreamForWriteAsync())
    {
        await s.WriteAsync(data, 0, data.Length);
    }
}

public async Task<string> ReadFileContentsAsync(string fileName)
{
    var folder = ApplicationData.Current.LocalFolder;

    try
    {
        var file = await folder.OpenStreamForReadAsync(fileName);

        using (var streamReader = new StreamReader(file))
        {
            return streamReader.ReadToEnd();
        }
    }
    catch (Exception)
    {
        return string.Empty;
    }
} 
```

像这样使用它们：

```
await this.WriteDataToFileAsync("afile.txt", "some text to save in a file");

var contents = await this.ReadFileContentsAsync("afile.txt"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T20:45:21.417

我还没有在 Windows Phone 8 上尝试过，但是WinRT XAML Toolkit 为 Windows 8 提供了可以工作[的东西。](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/9c814f6c67c5#WinRTXamlToolkit/IO/Extensions/StringIOExtensions.cs)

﻿</p>

```
using System;
using System.Threading.Tasks;
using Windows.Storage;
using Windows.Storage.Streams;

namespace WinRTXamlToolkit.IO.Extensions
{
    /// <summary>
    /// Extensions for simple writing and reading of strings to/from files.
    /// </summary>
    /// <remarks>
    /// Note that these were created before FileIO class existed in WinRT, but they still serve a purpose.
    /// </remarks>
    public static class StringIOExtensions
    {
        /// <summary>
        /// Reads a string from a text file.
        /// </summary>
        /// <param name="fileName">Name of the file.</param>
        /// <param name="folder">The folder.</param>
        /// <returns></returns>
        public static async Task<string> ReadFromFile(
            string fileName,
            StorageFolder folder = null)
        {
            folder = folder ?? ApplicationData.Current.LocalFolder;
            var file = await folder.GetFileAsync(fileName);

            using (var fs = await file.OpenAsync(FileAccessMode.Read))
            {
                using (var inStream = fs.GetInputStreamAt(0))
                {
                    using (var reader = new DataReader(inStream))
                    {
                        await reader.LoadAsync((uint)fs.Size);
                        string data = reader.ReadString((uint)fs.Size);
                        reader.DetachStream();

                        return data;
                    }
                }
            }
        }

        /// <summary>
        /// Writes a string to a text file.
        /// </summary>
        /// <param name="text">The text to write.</param>
        /// <param name="fileName">Name of the file.</param>
        /// <param name="folder">The folder.</param>
        /// <param name="options">
        /// The enum value that determines how responds if the fileName is the same
        /// as the name of an existing file in the current folder. Defaults to ReplaceExisting.
        /// </param>
        /// <returns></returns>
        public static async Task WriteToFile(
            this string text,
            string fileName,
            StorageFolder folder = null,
            CreationCollisionOption options = CreationCollisionOption.ReplaceExisting)
        {
            folder = folder ?? ApplicationData.Current.LocalFolder;
            var file = await folder.CreateFileAsync(
                fileName,
                options);
            using (var fs = await file.OpenAsync(FileAccessMode.ReadWrite))
            {
                using (var outStream = fs.GetOutputStreamAt(0))
                {
                    using (var dataWriter = new DataWriter(outStream))
                    {
                        if (text != null)
                            dataWriter.WriteString(text);

                        await dataWriter.StoreAsync();
                        dataWriter.DetachStream();
                    }

                    await outStream.FlushAsync();
                }
            }
        }
    }
} 
```

# javascript - 通过 JSON 订阅用户 - DISQUS API

> ID：15623192
> 
> 赞同：1
> 
> 时间：2013-03-25T19:34:55.443
> 
> 标签：javascript, jquery, forum, disqus, subscribe

我想创建一个为用户订阅 disqus 线程的按钮。

我需要一些关于我已经玩过很多次的 DISQUS API 的帮助，还通过 DISQUS 控制台[http://disqus.com/api/console/#!/](http://disqus.com/api/console/#!/)进行了尝试- 没有任何效果。

```
$.ajax({
  type: "POST",
  url: "https://disqus.com/api/3.0/threads/subscribe.json",
  data: {
    "email": "mail@abc.com", 
    "thread": "ident:blog_post_123", 
    "forum": "myforum"
  },
  success: function(data){alert(data);},
  dataType: "jsonp"
}); 
```

结果总是

```
{
  "code": 2,
  "response": "Invalid argument, 'forum'"
} 
```

我究竟做错了什么？我找不到任何能帮助我的东西...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:03:57.703

文档是错误的，因为您实际上不能使用 ident: 或 link: 因为 'forum' 不是一个可接受的参数。

相反，您需要进行另一次查找以首先获取线程 ID 以用于 subscribe 调用。将此端点与您的标识符和论坛短名称一起使用，然后从响应中获取“id”值：http: [//disqus.com/api/docs/threads/set/](http://disqus.com/api/docs/threads/set/)

# ruby-on-rails - Rails 3 中未显示应用程序布局

> ID：15623194
> 
> 赞同：1
> 
> 时间：2013-03-25T19:34:59.357
> 
> 标签：ruby-on-rails, twitter-bootstrap

我查看了我的基本起始代码，以确保我没有拼写错误。你可能会看到我做的一些事情。我无法让我的 application.html.erb 出现。我的基本应用程序只有一个模型。我还没有安装控制器并首先通过 TDD 查看工作模型。我安装了“twitter-bootstrap-rails”并按照安装程序进行操作。在安装引导程序之前我没有测试视图。我的 ruby​​ 是 1.9.3，我的 rails 应用程序是 3.2.11 这是我的 routes.rb

```
 root :to => 'weather#index'
 resources :weather 
```

这是我适用的 Gemfile

```
 group :assets do
   gem 'sass-rails', '~> 3.2'
   #gem 'bootstrap-sass', '~> 2.3.1.0' bailed when it seemed to conflict
   gem 'coffee-rails', '~> 3.2.1'
   gem 'uglifier', '>= 1.0.3'
 end 
```

这是我的控制器：

```
 class WeatherController < ActionController::Base
   def index
   end
 end 
```

这是我的观点/天气/index.html.erb：

```
 test 
```

我的views/layouts/application.html.erb 的twitter-bootstrap-rails 布局带有 <%= yield %>

我知道我的控制器没有以 Rails 方式命名。当我将其更改为所有适当位置的天气时，结果是相同的。我得到了没有应用程序 html 代码的单词测试。结果的来源只是没有 html 标头或输出的“测试”。如果我将 layout: 'application' 放在 index 操作中，我会看到它，但不会显示 index.html.erb 的内容。我看过 SO，但它们似乎并不适用或工作。在这方面是新手是一个障碍。我确定我忽略了一些愚蠢的事情。谢谢你看，山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:15:00.890

你的控制器应该继承自 ApplicationController 而不是 ActionController::Base

只是在一段时间前提到我自己关于完全相同问题的问题：[在我的 Rails 3 应用程序的控制器操作中必须显式渲染：layout => 'application'](https://stackoverflow.com/questions/3994327/having-to-explicitly-render-layout-application-in-controller-actions-in-my)

改变对几个人有用。

# xmlrpcclient - 如何使用 XmlRpc-Client 自定义 xml 请求

> ID：15623197
> 
> 赞同：0
> 
> 时间：2013-03-25T19:35:09.507
> 
> 标签：xmlrpcclient

我遇到了这个问题：我正在尝试使用 Apache 的 XmlRpc-Client 发送自定义 xml 请求。我有一个 XmlRpcClient 的实例，它包含一些名为“execute”的方法，如下所示：

```
public class RPCClient {
    public static void main(String[] args) {
        try {
            XmlRpcClientConfigImpl config = new XmlRpcClientConfigImpl();
            config.setServerURL(new URL("http://localhost:8888/SOAP"));

            XmlRpcClient client = new XmlRpcClient();
            client.setConfig(config);

            Object[] params = new Object[]{new Integer(4), new Integer(3)};
            String myResponse = (String) client.execute("A_Method", params);

            System.out.println("Suc " + myResponse);

        } catch (Exception e) {
            System.out.println("Err " + e.getMessage());
        }
    }
} 
```

它正在发送这个：

```
POST /SOAP HTTP/1.1
Content-Type: text/xml
User-Agent: Apache XML RPC 3.1.3 (Sun HTTP Transport)
Cache-Control: no-cache
Pragma: no-cache
Host: ***********
Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
Connection: keep-alive
Content-Length: 200

<?xml version="1.0" encoding="UTF-8"?>
   <methodCall>
      <methodName>A_Method</methodName>
      <params>
         <param>
            <value>
               <i4>4</i4>
            </value>
         </param>
         <param>
            <value>3</value>
         </param>
      </params>
   </methodCall> 
```

简而言之，这个客户端没有“执行”方法来接收简单的字符串或类似的东西。所以我的问题是如何发送我的自定义 xml，应该如下所示：

```
<soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"xmlns:xsd="http://www.w3.org/2001/XMLSchema"xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"xmlns:rp="http://www.abcdef.com/GH"xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">   
   <soapenv:Header>   </soapenv:Header>   
   <soapenv:Body>      
      <rp:A_Methodsoapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">         
         <package xsi:type="xsd:string">string1</package>         
         <event xsi:type="xsd:string">string2</event>         
         <fields xsi:type="rp:ArrayOfKeyValuePair" soapenc:arrayType="rp:KeyValuePair[]">        
            <item xsi:type="rp:KeyValuePair">                       
               <key xsi:type="xsd:string">string3</key>                         
               <value xsi:type="xsd:string">123</value>        
            </item>        
         </fields>      
      </rp:A_Method>   
   </soapenv:Body></soapenv:Envelope> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T19:07:05.057

[Apache XML-RPC](https://ws.apache.org/xmlrpc/index.html)用于与XML [-RPC](https://en.wikipedia.org/wiki/XML-RPC)协议进行通信。您尝试发送的消息是[SOAP](https://en.wikipedia.org/wiki/SOAP)，一种不同的协议（请参阅问题[“XML-RPC 和 SOAP 之间有什么区别？”](https://stackoverflow.com/questions/80112/whats-the-difference-between-xml-rpc-and-soap)）。

要发送此消息，您可以使用常规 HTTP 客户端将其作为纯文本（如果它只是一条简单消息）发送，或者使用完整的 SOAP 库。

# c++ - 如何调整结构元素数组的大小

> ID：15623198
> 
> 赞同：0
> 
> 时间：2013-03-25T19:35:09.720
> 
> 标签：c++, arrays, pointers, dynamic-memory-allocation, dynamic-arrays

我正在编写一个程序，我有一个类，在该类内部（或外部，希望没关系）我有结构。在那个类中，我需要创建一个结构元素数组（我知道我可以使用向量，例如，但在程序中只允许使用简单的动态数组）。

我将一个数组声明为`T * arr[SIZE]`，`T`我的结构在哪里。唯一的问题是我不知道数组的确切大小，如有必要需要增加它的大小。所以我写了函数来调整它的大小：

```
if( some cond ){
    T * tmpArr[newSIZE];
    memcpy( tmp, db, newSIZE*sizeof(T));
    delete [] arr;
    arr = tmpArr;
} 
```

但是我遇到了一个与我猜想的表达`MyClass::T[....]`方式不兼容的错误。`MyClass::T*[SIZE]``arr = tmpArr`

你能告诉我我做错了什么吗？在这种情况下，如何更好地声明`T * arr[size]`或`T * arr = new T[size]`如何调整数组的大小（并从旧数组中释放内存）？

更新：

感谢您的回答，我在我的程序中做了相应的操作：

```
 T * tmp = new T[newSIZE];
    memcpy( tmp, db, newSIZE*sizeof(T) );
    delete [] db;
    db = tmp; 
```

现在我得到了奇怪的东西，在删除 db 并分配`db`给`tmp`我尝试打印包含在 db （或 tmp ）中的所有数据之后，我得到了奇怪的东西：

```
 Smith2 Michigan ave▒ ACME, Ltd. One ACME roa▒
   Smit▒ Michigan ave` ACME, Ltd. One ACME roa "

   One ACME road#@"▒▒▒▒Michigan ave`▒▒▒▒Smit▒"

   ▒▒ ▒8 Ltd.#Michigan avenuemith4▒aF▒ 
```

如果我在删除和分配之前打印相同的数据，我会得到我想要的普通文本。在程序中之后（因为我以前没有，也许这是我的代码的问题，我得到分段错误）。顺便说一句，我在我的 Windows 中使用`struct`了 of`std::string`和 cygwin。你知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T19:50:39.343

`T* tmpArr[newSIZE];`声明一个可变长度的*指针数组*`T`。请注意，可变长度数组不是标准 C++ 的一部分（它们是 C99 的一部分，但在 C++ 中只能作为 GCC 的扩展......因此，此代码无法使用不同的编译器编译）。

完全合理的解决方案是使用`std::vector`，但既然你自己写了不允许使用它，那么这就是你可以做的。

1.  更改`T* tmpArr[newSIZE];`为`T* arr = new T[size];`
2.  现在调整这个数组的大小：
    1.  分配新数组：`T* newArr = new T[newSize]`
    2.  从旧数组复制元素：`memcpy(newArr, arr, size * sizeof(T))`
    3.  使用以下方法释放旧数组`delete[]`：`delete[] arr`
    4.  由于`delete`不会更改指针本身，因此在第 3 步之后您的指针无效（*悬空*），因此将指向新数组第一个元素的指针分配给旧数组：`arr = newArr`
3.  跟踪您正在使用的数组的大小

请注意，`T* arr = new T[size]`分配足够大的内存以容纳`size`类型的`T`对象，并使用`T`. 然后分配第一个元素的地址，`arr`使其指向这些元素所在的连续内存块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T19:41:14.817

```
T arr[N]; 
```

这种形式的声明为您提供了一个`N`具有自动存储持续时间的大小数组。这是固定的。您无法更改此数组的大小。大小`N`必须是编译时常量。

```
T* arr = new T[N]; 
```

这个声明定义了一个`T*`带有自动存储的持续时间。但是，它还创建了一个`N`具有*动态存储持续时间*的大小数组。在这里，大小`N`不需要是编译时常量。

但是，这对您没有帮助。您仍然无法*调整*动态数组的大小。您必须`delete[] arr`销毁旧数组，然后`new T[NewSize]`以某种方式复制数据。

这肯定会变得一团糟，事实上确实如此。在您的代码中，您混合了两种不同类型的分配。`delete[] arr`即使`arr`没有动态存储持续时间，您也正在尝试这样做。你根本无法做到这一点。您也不能将一个数组分配给另一个数组，如`arr = tmpArr;`.

相反，C++ 标准库提供了许多称为容器的类型。这些使得动态调整大小的元素序列变得非常容易。例如，您最好使用`std::vector<T>`.

```
std::vector<T> arr; 
```

A`std::vector`开头没有元素。您可以通过简单地添加元素`arr.push_back(value)`。您还可以通过执行非常轻松地一次性调整矢量大小`arr.resize(newSize)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T19:40:58.567

我猜您正在尝试删除您创建的数组，如下所示：

```
T array[size]; 
```

但是您不应该对此调用 delete 。当超出范围时，该数组将被删除。如果要创建一个数组并在之后释放它，则必须`new`在声明数组时使用运算符。如果您想释放它，请使用`delete`.

但无论如何，您可能想使用`std::vector`而不是尝试自己做。如果你有兴趣了解这些东西，这里有一个来自 Microsoft 的频道 9 视频系列，作者是 Stephen T. Lavavej：

[http://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Standard-Template-Library-STL-/C9-Lectures-Introduction-to-STL-with-Stephan-T-Lavavej](http://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Standard-Template-Library-STL-/C9-Lectures-Introduction-to-STL-with-Stephan-T-Lavavej)这是一颗真正的宝石。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T19:41:45.487

简单的解决方案不是重新发明方轮，而是使用`std::vector<Type>`标准库中已经圆形和抛光的模板。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T20:10:20.467

我会假设您实际上想要存储指向`T`. 你需要：

*   添加一个缺失的`*`，因为您正在分配一个指针数组`T`，
*   删除大小`tmpArr`和`arr`

所以：

```
// arr definition
 T **arr;;

// arr resizing code
if( some cond ){
    T **tmpArr;
    memcpy( tmp, db, newSIZE*sizeof(T *));
    delete [] arr;
    arr = tmpArr;
} 
```

您的数组存储*指向`T`*、 not的指针`T`，并且`tmpArr`在编译时不知道大小，因此您无法在其类型中指定它。

*警告*：如果新大小小于当前大小，您将丢失数组末尾的指针。你应该在上面添加一个测试，并删除这些额外的`T`（如果你的容器拥有它们），或者只是抛出一个异常，因为代码只应该增加数组的大小。

# iphone - 记录私人 iPhone 方法

> ID：15623205
> 
> 赞同：-2
> 
> 时间：2013-03-25T19:35:44.950
> 
> 标签：iphone, ios, xcode, logging

有没有办法通过 Xcode 记录私有方法等？示例是：

用户按下按钮。控制台记录用户按下按钮时发生的所有事情的信息。我在思考如何将 SQL 输出记录到调试器并查看正在发生的一切。

原因是我正在尝试使用一些私有框架，特别是控制发送电子邮件的框架。如果有某种方法可以查看在调用 MFMailComposeViewController、用户按下发送和关闭它之间调用的内容，这将很有帮助。如果有某种方法可以准确地知道正在使用什么，那么对私有标头进行排序会更容易一些。

....希望能澄清我的问题。

编辑：

甚至像这样简单的事情：

```
NSLog(@"%s", __PRETTY_FUNCTION__); 
```

但这可以应用于私有框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T03:07:56.947

我能想到的最接近的是以下之一：

```
NSLog( @"%@", [NSThread callStackSymbols] )
NSLog( @"%@", [NSThread callStackReturnAddresses] ) 
```

**但是**，由于您进入越狱领域，因此您最终可能找不到您想要的东西。请记住这一点，具体取决于您打算在哪里发布应用程序。

您**可能会**[在此处](https://github.com/kennytm/iphone-private-frameworks)找到有关私有 API 的更多信息，但我无法保证它们的实用性或最新性。大量关于私有 API 的搜索也导致了一个名为[class-dump](http://stevenygard.com/projects/class-dump/)的程序。

**更新**：

出于好奇，该`MFMailComposerDelegate`方法`mailComposeController:didFinishWithResult:error:`是否没有提供足够的信息？[调用时，您会在发送邮件失败（源](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewControllerDelegate_protocol/Reference/Reference.html#//apple_ref/occ/intf/MFMailComposeViewControllerDelegate)）事件中获得结果（失败、取消、保存、发送）和错误对象（可能包含更多详细信息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:05:01.607

也许您可以在函数上设置一个符号断点`objc_msgSend`，这将捕获每个objective-c方法调用。

# ios - 以编程方式从 UITableViewController 将 UIImage 设置为 UITableView 的背景

> ID：15623208
> 
> 赞同：0
> 
> 时间：2013-03-25T19:35:59.233
> 
> 标签：ios, uiimage, uitableview

我有一个 MyTableViewController ，它是`UITableViewController`. 我没有`.xib`。我想`UIImage`从 MyTableViewController 中设置一个作为 tableView 的背景。我试图添加我的`ViewDidLoad`：`self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"background_img"]];`

但是id没有用。覆盖的 img 看起来像这样：

![在此处输入图像描述](../Images/2ed1b451054b7330c33e9acfa0183996.png)

通过做：

```
UIImageView *bgImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"background_img"]];
bgImageView.frame = self.view.bounds;
[self.view addSubview:bgImageView];
[self.view sendSubviewToBack:bgImageView]; 
```

它看起来像这样：

![在此处输入图像描述](../Images/b55997cd64622a5bb4077607480d0b1a.png)

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:04:30.573

你可以这样做：

在 tableView 中设置背景图片`viewDidLoad`：

```
UIImageView *bgImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:<image>]];
bgImageView.frame = <tableView>.frame;
[<tableView> setBackgroundView:bgImageView]; 
```

然后将单元格的颜色设置为清除`tableView:willDisplayCell:forRowAtIndexPath:`：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    cell.backgroundColor = [UIColor clearColor];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T19:40:10.103

您需要使表格视图背景透明：

```
self.tableView.backgroundColor = [UIColor clearColor];
self.tableView.opaque = NO; 
```

然后设置视图的背景：

```
self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"background_img"]]; 
```

设置背景图像的更好方法是：

```
UIImageView *bgImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"background_img"]];
bgImageView.frame = self.view.bounds;
[self.view addSubview:bgImageView];
[self.view sendSubviewToBack:bgImageView]; 
```

# apache - mod_rewrite 从 apache 迁移到 lighttpd

> ID：15623211
> 
> 赞同：0
> 
> 时间：2013-03-25T19:36:17.073
> 
> 标签：apache, mod-rewrite, rewrite, lighttpd

如何用 lighttpd 描述同样的事情？

我的.htaccess：

```
RewriteEngine On
RewriteBase /
RewriteCond $1 !^(index\.php|style\.css|image|image-small|robots\.txt|sitemap\.xml|favicon\.ico)
RewriteRule ^(.*) index.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:50:58.687

未测试：

```
server.modules = (
    "mod_rewrite"
)

$HTTP["host"] == "web.com" {

    server.document-root = "/var/www/web.com/public_html/"

    url.rewrite-once = ( 
      "^(?!index\.php|style\.css|image|image-small|robots\.txt|sitemap\.xml|favicon\.ico)" => "$0"
      "^(.*)" => "index.php"
    )

} 
```

更多信息[在这里](http://redmine.lighttpd.net/projects/1/wiki/MigratingFromApache)

# android - Android： long => SQLiteDatabase => long ，精度丢失

> ID：15623213
> 
> 赞同：1
> 
> 时间：2013-03-25T19:36:30.487
> 
> 标签：android, sqlite, precision, long-integer, sqliteopenhelper

我正在创建一个应用程序，其中包含存储在 SQLite 数据库中的数据。我使用一个 long as 主键（生成购买 java.util.UUID 的有效位）。我使用扩展的 SQLiteOpenHelper 处理数据库连接。查询：

```
INSERT INTO Categorys VALUES('-7311183930966261019', 'Mat', 'Matkonto', '#FFFFFF', '#F23341', '0', '231451', '0', '0', ''); 
```

顺利通过，但是当我检索值时，第一个值 -7311183930966261019 中的很多精度都丢失了。查询

```
SELECT * FROM Categorys WHERE _id='-7311183930966261019'; 
```

返回空值；

我在 sqlite3 和命令行中尝试了相同的查询，但没有遇到同样的问题，所以我得出的结论是，问题要么与 android 相关，要么与我的处理方式有关。

更新：更正查询后，我现在有：

```
INSERT INTO Categorys VALUES(-6645129292311215613, 'Sparande', 'Pengar som sparas inför framtiden', '#FFFFFF', '#F23341', '0', '231451', '0', 0, ''); 
```

从数据库中我得到（toString() from my class）：

```
Category: name: Sparande; description: Pengar som sparas inför framtiden; colorLight: #FFFFFF; colorDark: #F23341 _id: -6645129292311215104 
```

检索数据的代码：

```
public static List<Category> readCategorys(Context context){
    TransactionSQLOH helper = new TransactionSQLOH(context, DATABASE_NAME);
    SQLiteDatabase db = helper.getReadableDatabase();
    Cursor cursor = db.query(CategorySQLOH.TABLE_NAME, CategorySQLOH.COLUMNS, null, null, null, null, null);
    List<Category> result = CategorySQLOH.cursorToCategory(cursor);
    helper.close();
    return result;
}
public static List<Category> cursorToCategory(Cursor cursor){
    List<Category> result = new Vector<Category>();
    if (cursor == null || cursor.getCount() == 0){
        return result;
    }
    cursor.moveToFirst();
    Category c;
    do{
        long _id = cursor.getLong(cursor.getColumnIndex(CategorySQLOH.COLUMNS[0]));
        String name = cursor.getString(cursor.getColumnIndex(CategorySQLOH.COLUMNS[1]));
        String description= cursor.getString(cursor.getColumnIndex(CategorySQLOH.COLUMNS[2]));
        String colorLight = cursor.getString(cursor.getColumnIndex(CategorySQLOH.COLUMNS[3]));
        String colorDark = cursor.getString(cursor.getColumnIndex(CategorySQLOH.COLUMNS[4]));
        int destribution = cursor.getInt(cursor.getColumnIndex(CategorySQLOH.COLUMNS[5]));
        long categoryGroup =  cursor.getLong(cursor.getColumnIndex(CategorySQLOH.COLUMNS[6]));
        int intData =  cursor.getInt(cursor.getColumnIndex(CategorySQLOH.COLUMNS[7]));
        long longData  = cursor.getLong(cursor.getColumnIndex(CategorySQLOH.COLUMNS[8]));
        String strData = cursor.getString(cursor.getColumnIndex(CategorySQLOH.COLUMNS[9]));
        c = new Category(_id, name, description, colorLight, colorDark, destribution, categoryGroup, intData, longData, strData);
        result.add(c);
    }while(cursor.moveToNext());
    return result;
} 
```

更新：

SELECT * FROM 类别的结果；在提取的数据库上：

```
sqlite> SELECT * FROM Categorys;
-6.64512929231122e+18|Sparande|Pengar som sparas inf├Âr framtiden|#FFFFFF|#F2334
1|0|231451.0|0|0.0| 
```

更新：

.schema 在拉取数据库上的结果。

```
CREATE TABLE Categorys ( _id REAL PRIMARY KEY, name TEXT NOT NULL, description T
EXT , colorLight TEXT , colorDark TEXT , destribution INTEGER , categoryGroup RE
AL , intData INTEGER , longData REAL , strData TEXT );
CREATE TABLE android_metadata (locale TEXT); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:53:21.687

> Android： long => SQLiteDatabase => long ，精度丢失

我猜是因为您将其定义为`LONG`我认为您需要删除单引号，因为使用引号，SQLite 将其解释为几个字符而不是数字。

```
INSERT INTO Categorys VALUES(-7311183930966261019, 'Mat', ...);
SELECT * FROM Categorys WHERE _id = -7311183930966261019; 
```

我自己测试过，一切正常。

# wpf - 绑定到 observableCollection 的 WPF DataGrid 中的分组、过滤和导航

> ID：15623218
> 
> 赞同：0
> 
> 时间：2013-03-25T19:36:45.350
> 
> 标签：wpf, mvvm, datagrid

如果我将我的 WPF DataGrid 绑定到 ViewModel 中的 ObservableCollection（这是一项要求），我如何实现分组、过滤和导航，如果 DataGrid 绑定到 CollectionView 可以直接完成。是否有可能同时获得两种类型的集合的好处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:07:28.750

您可以使用`CollectionViewSource.GetDefaultView`ViewModel 内部的方法，以便您可以访问 Collection View 的 SortDescription、GroupDescription 和 Filter 属性

用法

```
 var cv = (ListCollectionView)CollectionViewSource.GetDefaultView(this.Customers); 
```

# javascript - 处理事件时避免样板代码（Backbone、CoffeeScript）

> ID：15623223
> 
> 赞同：0
> 
> 时间：2013-03-25T19:36:56.410
> 
> 标签：javascript, backbone.js, refactoring, coffeescript

考虑以下示例[http://jsfiddle.net/YmWW2/](http://jsfiddle.net/YmWW2/)。

如何避免像`execFoo`,这样的冗余方法`execBar`，`execBaz`并将字符串`"foo"`直接传递给`exec`方法？

```
events:
    "click a#foo" : "execFoo"
    "click a#bar" : "execBar"
    "click a#baz" : "execBaz"

execFoo: -> @exec "foo"
execBar: -> @exec "bar"
execBaz: -> @exec "baz"

exec: (x) -> alert x 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:56:35.713

如果我正确理解了您的问题，您可以通过检查jquery 传递给单击处理程序的[事件对象来获取“foo”、“bar”信息。](http://api.jquery.com/category/events/event-object/)

例如，下面的代码片段应该提醒任何被点击的链接的 id 属性。

```
events:
  'click a' : 'exec'

exec: (event) ->
  clickedLink = $(event.target)
  alert(clickedLink.id()) 
```

# python - Python 中推荐的缩进大小是多少？

> ID：15623229
> 
> 赞同：14
> 
> 时间：2013-03-25T19:37:14.297
> 
> 标签：python, indentation

关于 Python 代码应该如何缩进，是否有任何**官方规则/建议？**

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-25T19:37:56.113

来自[PEP 8](http://www.python.org/dev/peps/pep-0008/#indentation)（Python 的官方风格指南）：

> 每个缩进级别使用 4 个空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-24T15:49:53.150

4 个空格，或按一次 Tab 键。但是，请尽量避免使用选项卡按钮。有时即使你正确缩进它也会给你缩进错误。

# php - isset 似乎返回了错误的值

> ID：15623233
> 
> 赞同：0
> 
> 时间：2013-03-25T19:37:18.763
> 
> 标签：php

我目前一直在尝试将我的 PHP 和 HTML 分开。我试图在我的 HTML 文件中只使用内联 PHP。有时我会想检查数组中的变量是否在我之前设置`echo`。

下面是这个问题的一个小测试：

```
<?
class test
{
    private $args;
    public function __construct($args = array())
    {
        $this->args = $args;
    }
    public function __get($name)
    {
        return $this->args[$name];
    }
    function test_i()
    {
        echo isset($this->i) ? "yes " : "no ";
    }
}

$test = new test(array('i' => 'testing'));

//test i while inside the class using $this (returns no)
$test->test_i();

//test i outside of the class using $test (returns no)
echo isset($test->i) ? "yes " : "no ";

//set i to another variable (returns yes)
$ii = $test->i;
echo isset($ii) ? "yes " : "no ";

//returns testing
echo $test->i;

//prints: no no yes testing
?> 
```

我最终想要在我的 HTML 文件中做的是：

```
<?=isset($this->var) ? $this->var : ''?> 
```

`''`每次都会返回。如果我`echo $this->var`之后直接显示 var 的正确值。

为什么这总是返回假？
它与魔术getter方法有关吗？
是因为`i`变量没有直接设置`private i;`吗？

**更新**：这是[这个问题](https://stackoverflow.com/questions/2306979/will-isset-trigger-get-and-why)的副本。添加魔法 isset 方法修复了它：

```
public function __isset($name)
{
    return $this->args[$name];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:41:28.483

这是因为`__get`ter 仅在您尝试*从类外部*访问不存在的属性时才被调用。在类内部，它不会自动调用，因为您的类应该知道它自己的属性。

# objective-c - 如何为可拖动对象设置边界？

> ID：15623234
> 
> 赞同：0
> 
> 时间：2013-03-25T19:37:20.093
> 
> 标签：objective-c, uibutton, geometry

我希望黑色按钮不要移出三角形（请参阅 Flickr 链接），如果它越过三角形的边缘，则该按钮将返回到三角形中。

我怎么做？

[http://www.flickr.com/photos/92202376@N08/8590549046/in/photostream](http://www.flickr.com/photos/92202376@N08/8590549046/in/photostream)

```
#import "DraggableViewController.h"

@interface DraggableViewController ()

@end

@implementation DraggableViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    // create a new button
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setBackgroundImage:[UIImage imageNamed:@"Scale9Image.png"]
                      forState:UIControlStateNormal];

    // add drag listener
    [button addTarget:self action:@selector(wasDragged:withEvent:)
     forControlEvents:UIControlEventTouchDragInside];

    // center and size
    button.frame = CGRectMake((self.view.bounds.size.width - 100)/1.6,
                              (self.view.bounds.size.height - 50)/1.9,
                              40, 40);
    button.frame.origin.y;

    [self.view addSubview:button];

}

- (void)wasDragged:(UIButton *)button withEvent:(UIEvent *)event
{
    // get the touch
    UITouch *touch = [[event touchesForView:button] anyObject];

    // get delta
    CGPoint previousLocation = [touch previousLocationInView:button];
    CGPoint location = [touch locationInView:button];
    CGFloat delta_x = location.x - previousLocation.x;
    CGFloat delta_y = location.y - previousLocation.y;

    // move button
    button.center = CGPointMake(button.center.x + delta_x,
                                button.center.y + delta_y);
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:22:36.457

看到你移动按钮的那条线了`-wasDragged`吗？

```
button.center = CGPointMake(button.center.x + delta_x,
                            button.center.y + delta_y); 
```

您可以通过测试新点来防止按钮离开三角形，以确保在移动按钮之前它位于三角形内。更好的是，您可以简单地计算三角形内最接近新点的点并使用它，因此当触摸移动到三角形外时按钮仍会移动，但它将被限制在三角形内：

```
CGPoint newPoint = CGPointMake(button.center.x + delta_x,
                                button.center.y + delta_y);
button.center = [self buttonPositionNearestToPoint:newPoint]; 
```

当然，您需要实现该`-buttonPositionNearestToPoint:`方法。你需要一点计算几何来做到这一点。查看[Point in triangle test](http://www.blackpawn.com/texts/pointinpoly/)以获得温和的介绍。[3d 三角形上的重心坐标钳制](https://stackoverflow.com/q/14467296/643383)也可能很有帮助，即使它是 3D 而不是 2D。

# jquery - 如何使用 jquery load() 作为非阻塞事件？

> ID：15623235
> 
> 赞同：0
> 
> 时间：2013-03-25T19:37:20.503
> 
> 标签：jquery, ajax, load, httpwebrequest, nonblocking

我有这个简单的`load`要求：

```
$('#test').load('/sidebar/test/format/html').css("display","block"); 
```

问题是 chrome 显示请求有 1.2 秒闪烁。

我正在考虑使用`$.when`：

```
var test = $('#test');
$.when(test.load('/sidebar/test/format/html')).done(function(){
    test.css("display","block");
}); 
```

但这似乎不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T19:41:26.137

我相信您想要的只是使用[文档](http://api.jquery.com/load/)中定义的回调：

```
var test = $('#test');
test.load('/sidebar/test/format/html', function(){
    test.css('display','block');
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T19:39:47.563

无论出于何种原因`.load`，都没有实现 Deferred，因此您不能将`.done`方法链接到它。不过，您不需要`.load`在这种情况下使用。

```
$.get('/sidebar/test/format/html').done(function (html) {
    $("#test").html(html).show();
}); 
```

# scheme - 初学者方案：如何使二进制算术表达式成为字符串。

> ID：15623237
> 
> 赞同：0
> 
> 时间：2013-03-25T19:37:25.480
> 
> 标签：scheme, racket

我想将二进制算术表达式更改为字符串，但我遇到了递归部分的问题。到目前为止，我只能做基本的两个。

```
(define-struct bae (fn arg1 arg2))
;; A binary arithmetic expression (binexp) is either
;; a number, or 
;; a structure (make-bae f a1 a2), where
;;   f is a symbol in the set'*,'+,'-,and'/,
;;   a1 is a binexp, and 
;;   a2 is a binexp.

(define (binexp->string b)
  (cond 
    [(number? b) (number->string b)]
    [else (string-append "(" (number->string (bae-arg1 b)) (symbol->string(bae-fn b))
              (number->string (bae-arg2 b))
              ")")]))

(check-expect (binexp->string 5) "5")
(check-expect (binexp->string (make-bae '* 3 4)) "(3*4)")
(check-expect (binexp->string ((make-bae '+
(make-bae '* (make-bae '+ 4 1)
(make-bae '+ 5 2))
(make-bae '- 6 3))) "(((4+1)*(5+2))+(6-3))") 
```

最后的检查期望是我不知道该怎么做。任何帮助都会有所帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:46:13.703

你很亲密。您必须使用`binexp->string`on`arg1`和`arg2`as 进行递归：

```
(define (binexp->string b)
  (if (number? b)
      (number->string b)
      (string-append "("
                     (binexp->string (bae-arg1 b))
                     (symbol->string (bae-fn   b))
                     (binexp->string (bae-arg2 b))
                     ")"))) 
```

# jquery - Jquery自定义验证未触发

> ID：15623253
> 
> 赞同：0
> 
> 时间：2013-03-25T19:38:27.690
> 
> 标签：jquery, asp.net-mvc, jquery-validate, unobtrusive-validation

使用 MVC Razor 视图引擎；我有一个模型，该模型具有属性上的标准必需属性和一个通过 ajax 回调呈现的局部视图。主视图包含表单，部分视图仅包含显示模板等，为了在客户端触发数据注释，我必须执行以下操作；

```
$('#MyButton').click(function () {
        $('#MyContainer').load("MY_ACTION_URL", function () {
            var form = $("#ReserveForm");
            form.removeData('validator');
            form.removeData('unobtrusiveValidation');
            $.validator.unobtrusive.parse(form);                
        });
}); 
```

上面的效果很好，它重新绑定了我的客户端验证，它们完美地触发了。问题是我有一些没有触发的自定义 Jquery 验证。例如;

```
$('#ReserveForm').validate({
        ignoreTitle: true,
        errorLabelContainer: '#errorContainer',
        errorClass: 'ClientSide-Validation-errors'
    });

    $.validator.addMethod('myCustomValidation',
        function (value, element, param) {
            return $(element).val() == '' && param == true;
        }, 'my message');

    $('#MYINPUT').rules("add",
        {
            myCustomValidation: true
        }); 
```

上面的自定义验证是在文档准备好呈现的部分时声明的，但没有运气。

PS，如果我在页面加载时渲染部分内容（例如在 RenderAction 中），那么自定义验证会正常触发。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:45:26.067

我相信这是重复的。您不希望在局部视图中有脚本。您应该提取脚本并在部分的父视图中声明它们。

[MVC4部分视图javascript捆绑问题](https://stackoverflow.com/questions/11257940/mvc4-partial-view-javascript-bundling-issue)

# mysql - Doctrine 2 DQL MySQL 等效于 ROUND()？

> ID：15623257
> 
> 赞同：8
> 
> 时间：2013-03-25T19:38:50.840
> 
> 标签：mysql, doctrine-orm

我从以下文档中知道： [http](http://docs.doctrine-project.org/en/2.1/reference/dql-doctrine-query-language.html#dql-functions) ://docs.doctrine-project.org/en/2.1/reference/dql-doctrine-query-language.html#dql-functions 没有 ROUND 函数，但有一个简单的方法在不编写我自己的 DQL 类函数的情况下做到这一点？

**编辑：** 如果可以进行平均并返回整数，我不需要完全匹配。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-03-30T07:20:56.700

更简洁的方法是使用稍加修改的@Ocramius 代码。

将这段代码作为文件名放在：`src/YourNamespace/YourMainBundle/DoctrineFunctions/`目录中：`Round.php`

```
<?php
namespace YourApp\YourMainBundle\DoctrineFunctions;

use Doctrine\ORM\Query\AST\Functions\FunctionNode,
    Doctrine\ORM\Query\Lexer;

class Round extends FunctionNode
{
    private $arithmeticExpression;

    public function parse(\Doctrine\ORM\Query\Parser $parser)
    {

        $lexer = $parser->getLexer();

        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);

        $this->arithmeticExpression = $parser->SimpleArithmeticExpression();

        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }

    public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker)
    {
        return 'ROUND(' . $sqlWalker->walkSimpleArithmeticExpression($this->arithmeticExpression) . ')';
    }
} 
```

然后把它放在你的`app/config/config.yml`：

```
doctrine:
    dql:
        numeric_functions:
            round: YourApp\YourMainBundle\DoctrineFunctions\Round 
```

这将允许您`ROUND()`直接在 DQL SELECT 查询中使用该函数；无论是使用 QueryBuilder 还是直接通过`createQuery()`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-26T05:48:44.363

您需要为此实现[自定义 DQL 函数](http://www.doctrine-project.org/blog/doctrine2-custom-dql-udfs.html)。

[DoctrineExtensions](https://github.com/beberlei/DoctrineExtensions/tree/master/lib/DoctrineExtensions/Query/Mysql)中有一些例子。

你可以像下面这样实现它：

```
<?php

namespace MyApp\DQL;

use Doctrine\ORM\Query\AST\Functions\FunctionNode;
use Doctrine\ORM\Query\Lexer;
use Doctrine\ORM\Query\SqlWalker;

class Round extends FunctionNode
{
    private $arithmeticExpression;

    public function getSql(SqlWalker $sqlWalker)
    {

        return 'ROUND(' . $sqlWalker->walkSimpleArithmeticExpression(
            $this->arithmeticExpression
        ) . ')';
    }

    public function parse(\Doctrine\ORM\Query\Parser $parser)
    {

        $lexer = $parser->getLexer();

        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);

        $this->arithmeticExpression = $parser->SimpleArithmeticExpression();

        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }
} 
```

然后，您可以在引导 ORM 时将其注册到配置中：

```
$config = new \Doctrine\ORM\Configuration();

$config->addCustomNumericFunction('ROUND', 'MyApp\DQL\Round'); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-22T08:01:21.233

如果您希望能够指定舍入精度，可以使用[此处](https://github.com/mapado/MysqlDoctrineFunctions/blob/master/DQL/MysqlRound.php)提供的类。如果您使用的是 symfony，请安装该软件包，因为您还将获得额外的标准 mysql 功能。

链接资源的代码也可以在下面找到：

```
<?php
namespace Mapado\MysqlDoctrineFunctions\DQL;
use \Doctrine\ORM\Query\AST\Functions\FunctionNode;
use \Doctrine\ORM\Query\Lexer;
/**
 * MysqlRound
 *
 * @uses FunctionNode
 * @author Julien DENIAU <julien.deniau@mapado.com>
 */
class MysqlRound extends FunctionNode
{
    /**
     * simpleArithmeticExpression
     *
     * @var mixed
     * @access public
     */
    public $simpleArithmeticExpression;
    /**
     * roundPrecision
     *
     * @var mixed
     * @access public
     */
    public $roundPrecision;
    /**
     * getSql
     *
     * @param \Doctrine\ORM\Query\SqlWalker $sqlWalker
     * @access public
     * @return string
     */
    public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker)
    {
        return 'ROUND(' .
                $sqlWalker->walkSimpleArithmeticExpression($this->simpleArithmeticExpression) .','.
                $sqlWalker->walkStringPrimary($this->roundPrecision) .
        ')';
    }
    /**
     * parse
     *
     * @param \Doctrine\ORM\Query\Parser $parser
     * @access public
     * @return void
     */
    public function parse(\Doctrine\ORM\Query\Parser $parser)
    {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);
        $this->simpleArithmeticExpression = $parser->SimpleArithmeticExpression();
        $parser->match(Lexer::T_COMMA);
        $this->roundPrecision = $parser->ArithmeticExpression();
        if ($this->roundPrecision == null) {
            $this->roundPrecision = 0;
        }
        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }
} 
```

# extjs4 - Extjs 按钮点击默认调用 menuitem

> ID：15623260
> 
> 赞同：0
> 
> 时间：2013-03-25T19:39:10.320
> 
> 标签：extjs4

菜单选项之一被认为是“典型的”。就像大多数人会点击第一个菜单项一样。但是对于那些外部情况，还有第二种选择。因此，我想要一个按钮菜单，对于那些不想为“典型”选项单击两次的人来说，它有一个默认选项。我在想按钮的处理程序会：

*   停止显示菜单（我试过`event.stopEvent()`但没有成功。）
*   调用菜单项之一的处理程序。

但是，如果您单击按钮旁边出现的下拉图标，您仍然可以访问该菜单。

[在这里](http://jsfiddle.net/Litote0707/kNbTE/)拉小提琴。

```
Ext.create('Ext.button.Button', {
    text: 'Pick One',
    menu: {
        items: [{
            text: 'Thing 1!',
            handler: function () {
                alert('foo');
            }
        }, {
            text: 'Thing 2!',
            handler: function () {
                alert('bar');
            }
        }]
    },
    handler: function (theButton, event) {
        //stop the menu from showing
        //event.stopEvent(); //try to stop showing menu, but no luck

        //invoke the handler for menu item 1
        //try to get at handler for menuitem programmatically
        //theButton.menu.items.getAt(0).??? 

        //i'd settle for hard-coding the function
        //alert('foo'); 
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:35:27.243

在这种情况下，您应该使用拆分按钮：

[http://docs.sencha.com/ext-js/4-2/extjs-build/examples/build/KitchenSink/ext-theme-neptune/#split-buttons](http://docs.sencha.com/ext-js/4-2/extjs-build/examples/build/KitchenSink/ext-theme-neptune/#split-buttons)

仅当您单击箭头部分时才会显示菜单。当您单击按钮部分时，它将触发按钮处理程序并且不显示菜单。

# java - 使用 GridBagLayout 定位

> ID：15623263
> 
> 赞同：0
> 
> 时间：2013-03-25T19:39:29.380
> 
> 标签：java, swing, user-interface, layout, gridbaglayout

正如您在下面的输出中看到的那样，标签显示在我的“下一块”网格的顶部。我知道为什么会发生这种情况（因为我的网格包约束位于同一位置）但是如果我增加这些约束的 y 分量，我的“下一块”网格将移动到较大网格之后的 y 坐标。我想有一个“下一块”网格，它的标签就在它上面。

有什么建议么？

![在此处输入图像描述](../Images/fe9f74b56c30a65a6b00cb86162bbb5e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T19:47:02.127

任何一个

1.  使用复合布局（将左侧的两个组件放在自己的容器中，然后将其添加到主容器中）或
2.  看一下（对于问题区域右侧的其他两个组件）的`gridheight`属性`GridBagConstraints`

# linux - 通过 shell 脚本获取网站的 Url

> ID：15623265
> 
> 赞同：1
> 
> 时间：2013-03-25T19:39:33.420
> 
> 标签：linux, shell, ubuntu, wget

我正在尝试构建一个 shell 脚本，该脚本在执行时可以将网站的 url 提取到文本文件中，以便我可以使用该文本文件作为 wget 的输入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:18:48.173

这是 Firefox 的简单解决方案：

Firefox 会在您每次访问旧的或新的 url 时更新[places.sqlite](http://kb.mozillazine.org/Places.sqlite)数据库，即每次您的一个选项卡的位置栏之一发生变化时。

通过 SQL 查询这个数据库非常容易。这是一个监视文件并将任何更改打印到控制台的小脚本：

```
#!/usr/bin/env bash
places=$(find $HOME/.mozilla -name places.sqlite)

lastDate=0

warn(){
    echo "$*" > /dev/stderr
}

fail() {
    warn "$*"; exit 1
}

[ -f "$places" ] || fail "places.sqlite not found"

warn "starting to watch $places at time: $lastDate"

while sleep 1; do
    count=$(sqlite3 $places "select count(*) from moz_places where last_visit_date > '$lastDate'")
    if [ $count -gt 0 ]; then
        sqlite3 $places "select url from moz_places where last_visit_date > '$lastDate'"
        lastDate=$(echo "$(date +%s%N) / 1000" | bc)
    fi
done 
```

如果您愿意，可以将输出重定向到文件：`sh watchscript.sh > myfile.txt`

# javascript - HTML 表单第一个下拉菜单自动更改第二个下拉选项（续）

> ID：15623266
> 
> 赞同：0
> 
> 时间：2013-03-25T19:39:41.207
> 
> 标签：javascript, jquery, html, css

2小时前我问了一个问题并解决了：[上一个问题已解决](https://stackoverflow.com/questions/15620283/html-form-first-dropdown-auto-change-the-second-dropdown-options)

但是现在在我的代码上实现它并不能像这样工作：http: [//jsfiddle.net/7YeL6/5/](http://jsfiddle.net/7YeL6/5/)

相反，例如，当我选择“卡车”时，只会出现带有车辆的下拉菜单，而不是带有颜色的第二个下拉菜单。

所以我想这是我实现它的方式，所以如果有人能找出我出错的地方，这是我的代码：

**网页**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <link href='http://fonts.googleapis.com/css?family=Droid+Sans' rel='stylesheet' type='text/css'>
    <meta charset="utf-8">
    <title>Add Item</title>
    <link rel="shortcut icon" href="../style/kk-a.png" type="image/x-icon">
    <link rel="stylesheet" href="style_copy.css" type="text/css" media="screen" />
    <link href="style_menu/h_menu_style.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="style_menu/h_menu_iconic.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="style_menu/main_color_dropdown.css" media="screen" rel="stylesheet" type="text/css" />
        <script src="style_menu/h_menu_prefix-free.js"></script>
        <script src="subcategory_auto_dropdown.js"></script>
</head>

<body>
<div align="center" id="mainWrapper">
  <?php include_once("includes_admin/header_admin_template.php");?>
  <div id="pageContent"><br />
    <div align="left" style="margin-left:30px;"><a href="inventory_list.php"> « Go to Inventory List</a></div>
    <br />
    <br />
    <div align="left" style="margin-left:24px;">    
    <form action="inventory_list.php" enctype="multipart/form-data" name="myForm" id="myform" method="post">
    <table width="100%" border="0" cellspacing="0">
        <tr>
        <td width="32%" colspan="1" align="left"><img src="../style/add_item.png" width="200" /></td>
        <td width="33%" align="left">&nbsp;</td>
        <td width="35%" align="left">&nbsp;</td>
        </tr>

        <tr>
          <td colspan="3" align="left"><hr style="color:#616161"; /></td>
        </tr>

        <tr>
        <td colspan="1" align="left">&nbsp;</td>
        <td align="left"><span style="padding-bottom:10px">Category</span></td>
        <td align="left"><span style="padding-bottom:10px">Category 2</span></td>
        </tr>

        <tr>
          <td colspan="1" align="left" style="padding-bottom:10px">&nbsp;</td>
          <td align="left" style="padding-bottom:10px">
                  <select name="category" id="category">
                      <option selected value="Please Select">Please Select</option>           
                      <option value="Cars">Cars</option>
                      <option value="Trucks">Trucks</option>
                      <option value="Motorcycles">Motorcycles</option>
                      <option value="Boats">Boats</option>
                   </select>
          </td>
          <td align="left" style="padding-bottom:10px">
                  <select name="category2" id="truck" class="second">
                      <option value="white">white</option>
                      <option value="black">black</option>            
                  </select>

                  <select name="category2" id="car" class="second">
                      <option value="red">red</option>
                      <option value="green">green</option>
                      <option value="blue">blue</option>           
                  </select>
          </td>      
        </tr>
      <tr>
        <td colspan="3" align="left"><input type="submit" name="button" id="button" value="Submit +ADD"/></td>
      </tr>
      </table>
    </form>
    </div>
    <br />
  <br />
  </div>
  <?php include_once("includes_admin/footer_admin_template.php");?>
</div>
</body>
</html> 
```

**subcategory_auto_dropdown.js**

```
$("#category").change(function () {
  var str = "";
str =  $("select#category option:selected").text();
    if(str == "Trucks"){
        $("select.second").not("#truck").hide();
        $("#truck").show();
        $("#truck").fadeIn(1000);
    }
    else if(str == "Cars"){
        $("select.second").not("#car").hide();
        $("#car").show();
        $("#car").fadeIn(1000);
    }

}) 
```

**style_copy.css**

```
/* SUBCATEGORY DROPDOWN AUTO CHANGE OPTION  */
#category2{
    display: none;
}
.second{
    display: none;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:53:04.800

我在您的代码中没有看到包含 jQuery 库。因此，在任何其他`script`标记之前添加此行：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

然后，您在**subcategory_auto_dropdown.js**中的代码应如下所示：

```
 $(document).ready(function(){
    //js code you already have
 }); 
```

这部分代码在页面加载时启动您的 jquery 代码。否则，代码不起作用。

# c# - 实体框架 5 - 0..1 到许多关系无法保存新实体

> ID：15623273
> 
> 赞同：2
> 
> 时间：2013-03-25T19:39:53.827
> 
> 标签：c#, asp.net, sql, asp.net-mvc, entity-framework

我正在使用 ASP.NET MVC 4 和 Entity Framework 5。我使用模型优先方法来生成数据库。在我的应用程序中，我有一个运行日志表和一个鞋子表。用户可以拥有与跑步日志条目相关联的 0 或 1 双鞋。所以这似乎是一个 0..1 对多的关系，这就是我在模型中设置它的方式。当我`context.SaveChanges()`添加一个没有任何关联鞋子的新条目时，我收到此错误：

`The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_ShoeLogEntry\".`

一旦我为日志条目选择一双鞋，它就可以正常工作。那么如何正确设置关系，以便日志条目可以为鞋子提供空值？我在这里粘贴了下面的代码：

**我用来添加新条目的代码**

```
le.ActivityType = ctx.ActivityTypes.Find(le.ActivityTypesId);
le.User = ctx.Users.Find(le.UserUserId);
le.Shoe = ctx.Shoes.Find(le.ShoeShoeId); //ShoeShoeId is null if nothing picked
ctx.LogEntries.Add(le);
ctx.SaveChanges(); 
```

我曾尝试检查`ctx.Shoes.Find(le.ShoeShoeId)`返回 null 和设置`le.Shoe`to`null`和`le.ShoeShoeId`to `null`，`-1`但没有奏效。

我试图在下面粘贴相关代码，但这对我来说很新。所以如果有必要我可以添加更多。我真的很感激任何帮助！

**外键设置**

```
-- Creating foreign key on [ShoeShoeId] in table 'LogEntries'
ALTER TABLE [dbo].[LogEntries]
ADD CONSTRAINT [FK_ShoeLogEntry]
FOREIGN KEY ([ShoeShoeId])
REFERENCES [dbo].[Shoes]
    ([ShoeId])
ON DELETE NO ACTION ON UPDATE NO ACTION;

-- Creating non-clustered index for FOREIGN KEY 'FK_ShoeLogEntry'
CREATE INDEX [IX_FK_ShoeLogEntry]
ON [dbo].[LogEntries]
   ([ShoeShoeId]);
GO 
```

**主键设置**

```
-- Creating primary key on [ShoeId] in table 'Shoes'
ALTER TABLE [dbo].[Shoes]
ADD CONSTRAINT [PK_Shoes]
   PRIMARY KEY CLUSTERED ([ShoeId] ASC);
GO

-- Creating primary key on [LogId] in table 'LogEntries'
ALTER TABLE [dbo].[LogEntries]
ADD CONSTRAINT [PK_LogEntries]
   PRIMARY KEY CLUSTERED ([LogId] ASC);
GO 
```

**模型生成的日志条目类**

```
public partial class LogEntry
{
    public int LogId { get; set; }
    public string ActivityName { get; set; }
    public System.DateTime StartTime { get; set; }
    public string TimeZone { get; set; }
    public int Duration { get; set; }
    public decimal Distance { get; set; }
    public Nullable<int> Calories { get; set; }
    public string Description { get; set; }
    public string Tags { get; set; }
    public int UserUserId { get; set; }
    public Nullable<int> ShoeShoeId { get; set; }
    public int ActivityTypesId { get; set; }

    public virtual User User { get; set; }
    public virtual Shoe Shoe { get; set; }
    public virtual ActivityTypes ActivityType { get; set; }
} 
```

**模型生成的鞋类**

```
public partial class Shoe
{
    public Shoe()
    {
        this.ShoeDistance = 0m;
        this.LogEntries = new HashSet<LogEntry>();
    }

    public int ShoeId { get; set; }
    public string ShoeName { get; set; }
    public decimal ShoeDistance { get; set; }
    public int ShoeUserId { get; set; }
    public string ShoeBrand { get; set; }
    public string ShoeModel { get; set; }
    public System.DateTime PurchaseDate { get; set; }
    public int UserUserId { get; set; }

    public virtual User User { get; set; }
    public virtual ICollection<LogEntry> LogEntries { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T19:49:08.267

如果您想要 0 到多个，那么您的外键必须可以为空，即：

```
public int? ShoeId { get; set; } 
```

正如你现在所拥有的，你已经告诉 EF`ShoeId`不能为空，所以你只有一个 1 到多个。

**编辑**

抱歉，我看错了课程，但我会把它留给其他可能需要它的人。但是，这里的情况仍然几乎相同。发生的事情是您没有遵循 FK 命名 ( `ShoeShoeId`) 的 EF 约定。对于虚拟的类似`Shoe`，EF 寻找一个属性`ShoeId`。如果找到一个，那将是 FK 字段，如果没有，EF 将在您的数据库中自动为 FK*添加*一个字段。`Shoe_ShoeId`这个自动添加的字段将是不可为空的，这就是这里发生的事情。

如果你坚持你的 FK 是`ShoeShoeId`，只需明确告诉 EF 这是 FK `Shoe`：

```
[ForeignKey("Shoe")]
public int? ShoeShoeId { get; set; } 
```

# ruby-on-rails - 一个控制器中的更多功能 /something/something

> ID：15623275
> 
> 赞同：0
> 
> 时间：2013-03-25T19:40:04.610
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

目前在添加控制器时，它具有 ex。/dashboard/index 我如何实施 /dashboard/editaccount ex？我如何为此（视图）“渲染”模板？

```
class DashboardController < ApplicationController
  def index
     u = Users.find(session[:id])
     @username = u[:username]
  end

  def editaccount
     ##Some code??
  end
end 
```

我对 ruby​​ on rails 完全陌生，所以希望你能回答我初学者的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:44:29.960

```
class DashboardsController < ApplicationController
  def index
     user = Users.find(session[:id])
     @username = user[:username]
  end

  def edit_account
    # Your code
    # automatically renders the 'edit_account' template
  end
end

# config/routes.rb
resource :dashboard do
  get 'edit_account', on: :collection
end 
```

[在 Rails 指南中](http://guides.rubyonrails.org/routing.html)了解有关[**路由**](http://guides.rubyonrails.org/routing.html)的更多信息。

请注意，我将您的命名更改`DashboardController`为`DashboardsController`. Rails 中的控制器通常以复数形式命名，即使在使用单数路由时也是如此（请参阅上面的 Rails 指南链接并搜索**单数资源**）。

# android - 无法使用 ksoap 在嵌套对象内发送数组

> ID：15623277
> 
> 赞同：1
> 
> 时间：2013-03-25T19:40:17.310
> 
> 标签：android, ksoap

我希望生成一个肥皂请求，例如：

```
<soapenv:Body>
    -
    <Perform xmlns="eras.in">
        -
        <request>
            <ActionName>Connect</ActionName>
            -
            <Input xmlns:ns1="eras.in" xsi:type="ns1:Record">
                <ns1:EntityName>Credential</ns1:EntityName>
                -
                <ns1:Fields>
                    -
                    <ns1:Field>
                        <ns1:Key>DomainName</ns1:Key>
                        <ns1:Value xsi:type="ns2:guid"
                            xmlns:ns2="http://schemas.microsoft.com/2003/10/Serialization/">Check2</ns1:Value>
                    </ns1:Field>
                    -
                    <ns1:Field>
                        <ns1:Key>UserName</ns1:Key>
                        <ns1:Value xsi:type="ns3:guid"
                            xmlns:ns3="http://schemas.microsoft.com/2003/10/Serialization/">utsav</ns1:Value>
                    </ns1:Field>
                    -
                    <ns1:Field>
                        <ns1:Key>Password</ns1:Key>
                        <ns1:Value xsi:type="ns4:guid"
                            xmlns:ns4="http://schemas.microsoft.com/2003/10/Serialization/">xxxxx</ns1:Value>
                    </ns1:Field>
                </ns1:Fields>
            </Input>
        </request>
    </Perform>
</soapenv:Body> 
```

但我能够生成类似的东西：

```
<v:Body>
    <Perform xmlns="eras.in">
        <request i:type="n0:ActionRequest" xmlns:n0="eras.in">
            <ActionName i:type="d:string">Connect</ActionName>
            <sessionId i:null="true" />
            <Input i:type="n0:Record">
                <EntityName i:type="d:string">Credential</EntityName>
                <RecordId i:null="true" />
                <Fields i:type="n0:Fields">
                    <Field i:type="n0:Field">
                        <Key i:type="d:string">DomainName</Key>
                        <Value i:type="d:string">Check2</Value>
                    </Field>
                    <Field i:type="n0:Field">
                        <Key i:type="d:string">UserName</Key>
                        <Value i:type="d:string">utsav</Value>
                    </Field>
                    <Field i:type="n0:Field">
                        <Key i:type="d:string">Password</Key>
                        <Value i:type="d:string">xxx</Value>
                    </Field>
                </Fields>
            </Input>
        </request>
    </Perform>
</v:Body> 
```

在服务器上，当我检查时，我看到 Fields 数组是一个空对象。

有人可以帮忙吗？

我怀疑在服务器端对象中有一个名为 Fields 的字段类型数组。而我发送一个名为 Fields 的矢量对象。这会导致问题吗？

还是因为字段标签缺少命名空间前缀？

谢谢并恭祝安康。

我的Java代码是：

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
       SoapSerializationEnvelope envelope = new        SoapSerializationEnvelope(SoapEnvelope.VER11);
      ActionRequest ERequest = new ActionRequest();
      ERequest.setActionName("Connect");
      Record r = new Record();
      r.setEntityName("Credential");
      Fields fs = new Fields();
      fs.add(new Field("DomainName","Check2"));
      fs.add(new Field("UserName","utsav"));
      fs.add(new Field("Password","xxxx"));
      r.setFields(fs);
      ERequest.setInput(r);
      request.addProperty("request",ERequest);
      envelope.setOutputSoapObject(request);
  envelope.dotNet = true;
  envelope.setAddAdornments(false);
  envelope.implicitTypes = true;
  envelope.addMapping(NAMESPACE, "ActionRequest", new ActionRequest().getClass());
  envelope.addMapping(NAMESPACE, "Record", new Record().getClass());
  envelope.addMapping(NAMESPACE, "Field", new Field().getClass()); 
```

ActionRequest.java：

```
 package com.example.eat;

        import java.util.Hashtable;
        import org.ksoap2.serialization.KvmSerializable;
        import org.ksoap2.serialization.PropertyInfo;

     public class ActionRequest  implements KvmSerializable  {

private java.lang.String ActionName;

    private java.lang.Object input;

    private java.lang.String sessionId;

     public java.lang.String getActionName() {
    return ActionName;
}

public void setActionName(java.lang.String actionName) {
    this.ActionName = actionName;
}

public java.lang.Object getInput() {
    return input;
}

public void setInput(java.lang.Object input) {
    this.input = input;
}

public java.lang.String getSessionId() {
    return sessionId;
}

public void setSessionId(java.lang.String sessionId) {
    this.sessionId = sessionId;
}

public ActionRequest() {
}

@Override
public Object getProperty(int arg0) {
    // TODO Auto-generated method stub
    switch (arg0) {
    case 0:
        return ActionName;
    case 1:
         return sessionId;
    case 2: 
         return input;
    default:
        break;
    }
    return null;
}

@Override
public int getPropertyCount() {
    // TODO Auto-generated method stub
    return 3;
}

@Override
public void getPropertyInfo(int arg0, Hashtable arg1, PropertyInfo info) {
    // TODO Auto-generated method stub
     switch (arg0) {
        case 0:
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "ActionName";
            break;
        case 1:
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "sessionId";
            break;
        case 2:
            info.type = Object.class;
            info.name = "Input";
            break;
        default:
            break;
        }

}

@Override
public void setProperty(int index, Object value) {
    // TODO Auto-generated method stub
    switch (index) {
    case 0:
        this.ActionName =value.toString();
        break;
    case 1:
        this.sessionId = value.toString();
        break;
    case 2:
        this.input =  value;
    default:
        break;
    }       
} 
```

}

记录.Java：

```
package com.example.eat;

import java.util.Hashtable;

import org.ksoap2.serialization.KvmSerializable;
import org.ksoap2.serialization.PropertyInfo;

public class Record  implements KvmSerializable {
    private java.lang.String EntityName;
    private java.lang.String RecordId;
    private Fields Fields1 = new Fields();
    //Field[] fs = new Field[0];

    public  com.example.eat.Fields getFields() {
        return Fields1;
    }

    public void setFields(Fields f) {
        this.Fields1 = f;
    }

    public java.lang.String getEntityName() {
        return EntityName;
    }

    public void setEntityName(java.lang.String entityName) {
        this.EntityName = entityName;
    }

    public java.lang.String getRecordId() {
        return RecordId;
    }

    public void setRecordId(java.lang.String recordId) {
        this.RecordId = recordId;
    }

    public Record() {
    }

    public Record(
           java.lang.String entityName,
           Fields fields,
           java.lang.String recordId) {
           this.EntityName = entityName;
           this.Fields1 = fields;
           this.RecordId = recordId;
    }

    @Override
    public Object getProperty(int arg0) {
        // TODO Auto-generated method stub
         switch (arg0) {
            case 0:
                return EntityName;
            case 1:
                return RecordId;
            case 2: 
                return Fields1;
            default:
                break;
            }
            return null;

    }

    @Override
    public int getPropertyCount() {
        // TODO Auto-generated method stub
        return 3;
    }

    @Override
    public void getPropertyInfo(int index, Hashtable arg1, PropertyInfo info) {
        // TODO Auto-generated method stub
        switch (index) {
        case 0:
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "EntityName";
            break;
        case 1:
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "RecordId";
            break;
        case 2:
            info.type = this.Fields1.getClass();
            info.name = "Fields";
            break;
        default:
            break;
        }
    }

    @Override
    public void setProperty(int index, Object value) {
        // TODO Auto-generated method stub

        if(null == value)
            value = "";
        switch (index) {
        case 0:
            EntityName = value.toString();
            break;
        case 1:
            RecordId= value.toString();
            break;
        case 2:
            Fields1= (Fields) value;
            break;

    }

    }

} 
```

字段.java

```
package com.example.eat;

import java.util.Hashtable;
import java.util.Vector;

import org.ksoap2.serialization.KvmSerializable;
import org.ksoap2.serialization.PropertyInfo;

public class Fields extends Vector <Field> implements KvmSerializable{

    @Override
    public Object getProperty(int arg0) {
        // TODO Auto-generated method stub
         return this.get(arg0);
    }

    @Override
    public int getPropertyCount() {
        // TODO Auto-generated method stub
        return this.size();
    }

    @Override
    public void getPropertyInfo(int arg0, Hashtable arg1, PropertyInfo arg2) {
        // TODO Auto-generated method stub
        arg2.name = "Field";
       // arg2.type = PropertyInfo.STRING_CLASS;
         arg2.type = new Field().getClass();

    }

    @Override
    public void setProperty(int arg0, Object arg1) {
        // TODO Auto-generated method stub
         this.add((Field)arg1);
    }

} 
```

字段.java：

```
package com.example.eat;

import java.util.Hashtable;
import java.util.Vector;

import org.ksoap2.serialization.KvmSerializable;
import org.ksoap2.serialization.PropertyInfo;

/**
 * Field.java
 *
 * This file was auto-generated from WSDL
 * by the Apache Axis 1.4 Apr 22, 2006 (06:55:48 PDT) WSDL2Java emitter.
 */

public class Field   implements KvmSerializable {
    private java.lang.String key;

    private java.lang.Object value;

    public Field(String key, String value) {
        // TODO Auto-generated constructor stub
        this.key=key;
        this.value=value;
    }

    public Field() {
        // TODO Auto-generated constructor stub
    }

    @Override
    public Object getProperty(int arg0) {
        // TODO Auto-generated method stub
        switch (arg0){
        case 0:
            return key;
        case 1:
            return value;
        default:
            return null;
        }
    }

    @Override
    public int getPropertyCount() {
        // TODO Auto-generated method stub
        return 2;
    }

    @Override
    public void getPropertyInfo(int index, Hashtable arg1, PropertyInfo info) {
        // TODO Auto-generated method stub

        switch (index) {
        case 0:
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "Key";
            break;
        case 1:
            info.type = Object.class;
            info.name = "Value";
            break;

        default:
            break;
        }

    }

    @Override
    public void setProperty(int index, Object value) {
        // TODO Auto-generated method stub
        if(null == value)
            value = "";
        switch (index) {
        case 0:
            key = value.toString();
            break;
        case 1:
            this.value = value;
            break;

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T09:54:46.180

在 ksoap 中对数组使用 SoapObject 要容易得多，因为您可以更好地控制命名空间。Eras 服务连接请求的示例如下所示...

```
private static final String NAMESPACE = "eras.in" ;
private static final String URL = "https://eras.in/Host/";
private static final String SOAP_ACTION = "eras.in/IActionService/Perform";
private static final String METHOD_NAME = "Perform";

public static void main(String[] args) {

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    SoapObject actionRequest = new SoapObject(NAMESPACE, "ActionRequest");

    request.addProperty("request", actionRequest);
    actionRequest.addProperty("ActionName", "Connect");

    SoapObject record = new SoapObject(NAMESPACE, "Record");
    actionRequest.addProperty("Input", record);

    record.addProperty("EntityName", "Credential");

    SoapObject fields = new SoapObject(NAMESPACE, "ArrayOfField");
    record.addProperty("Fields", fields);

    SoapObject domain = new SoapObject(NAMESPACE, "Field");
    domain.addProperty("Key", "DomainName");
    domain.addProperty("Value", "<your domain name>");
    fields.addSoapObject(domain);

    SoapObject user = new SoapObject(NAMESPACE, "Field");
    user.addProperty("Key", "UserName");
    user.addProperty("Value", "<your username>");
    fields.addSoapObject(user);

    SoapObject pwd = new SoapObject(NAMESPACE, "Field");
    pwd.addProperty("Key", "Password");
    pwd.addProperty("Value", "<your password>");
    fields.addSoapObject(pwd);

    envelope.setOutputSoapObject(request);
    envelope.dotNet = true;

    HttpTransportSE httpTransport = new HttpTransportSE(URL);
    try
    {
        httpTransport.call(SOAP_ACTION, envelope);
        SoapObject response = (SoapObject)envelope.getResponse();
        System.out.println(response.toString());
    }
    catch(Exception e)
    {   
        e.printStackTrace();
    }
} 
```

注意线

```
SoapObject fields = new SoapObject(NAMESPACE, "ArrayOfField");
record.addProperty("Fields", fields); 
```

其中Fields是Record类的属性，该属性的类型是一个Field数组，即：

```
class Record
{
    Field[] Fields;
    ...
} 
```

# html - 给菜单一个 ID

> ID：15623281
> 
> 赞同：0
> 
> 时间：2013-03-25T19:40:38.057
> 
> 标签：html, wordpress, css

目前在 Wordpress 工作。我有一个与 Wordpress 中内置的管理栏冲突的菜单。为了解决这个问题，我的菜单需要有一个单独的标识。我尝试为 css 提供各种 ID 和类，但我无法让它工作。我可以尝试任何想法吗？

```
<style>
    ul {
        text-align: left;
        display: inline;
        margin: 0;
        padding: 15px 4px 17px 0;
        list-style: none;
    }

    ul li {
        font: bold 12px/18px sans-serif;
        display: inline-block;
        margin-right: -4px;
        position: relative;
        padding: 7px 20px 10px 20px;
        background: #14325c;
        color: #fff;
        cursor: pointer;
        -webkit-transition: all 0.2s;
        -moz-transition: all 0.2s;
        -ms-transition: all 0.2s;
        -o-transition: all 0.2s;
        transition: all 0.2s;
    }

    ul li:hover {
        text-decoration: underline;
        background: #555;
        color: #fff;
    }

    ul li ul {  
        padding: 0;
        position: absolute;
        top: 35px;
        left: 0;
        width: 150px;
        -webkit-box-shadow: none;
        -moz-box-shadow: none;
        box-shadow: none;
        display: none;
        opacity: 0;
        visibility: hidden;
        -webkit-transiton: opacity 0.2s;
        -moz-transition: opacity 0.2s;
        -ms-transition: opacity 0.2s;
        -o-transition: opacity 0.2s;
        -transition: opacity 0.2s;
    }

    ul li ul li { 
        background: #555; 
        display: block; 
        color: #fff;
        text-shadow: 0 -1px 0 #000;
    }

    ul li ul li:hover { background: #666; }

    ul li:hover ul {
        display: block;
        opacity: 1;
        visibility: visible;
    }
</style>

<ul>
    <li>ADMISSIONS
        <ul>
            <li>Apply Now</li>
            <li>Programs of Study</li>
            <li>Registrar</li>
            <li>FYE Orientation</li>
        </ul>
    </li>
    <li>RESOURCES
        <ul>
            <li>Academics</li>
            <li>Student Services</li>
            <li>Student Life</li>
            <li>Career Services</li>
            <li>Business Office</li>
        </ul>
    </li>
    <li>FINANCIAL AID
        <ul>
            <li>My FAO</li>
            <li>Types of Financial Aid</li>
            <li>Scholarships</li>
            <li>Net Price Calculator</li>
            <li>Forms</li>
        </ul>
    </li>
    <li>CONTACT US
        <ul>
            <li>Schedule a Visit</li>
            <li>Request Information</li>
            <li>Locations</li>
            <li>Employee Directory</li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:28:15.740

弄清楚了。

我刚刚添加了一个 id围绕我的 html的`nav`元素。`nav-menu`然后，我添加`#nav-menu`到每个 css 条目的开头。

现在一切正常，谢谢@Terry！

# java - 布尔方法麻烦

> ID：15623283
> 
> 赞同：3
> 
> 时间：2013-03-25T19:40:43.127
> 
> 标签：java

我试图实现一种方法来返回布尔值 true 或 false。该方法根据 if 和 else 语句将布尔 isMatch 初始化为 true 或 false。

```
public class BooleanTest {
   int num;
   boolean isMatch;

   public BooleanTest() {
     num = 10;
   }

   public boolean isMatch() { //variable is already initialize to 10 from constructor
     if (num == 10)
       isMatch = true;
     else
       isMatch = false;
     return isMatch;
   }

   public static void main(String[] arg) {
     BooleanTest s = new BooleanTest();

     System.out.println(s.isMatch);
   }
} 
```

isMatch 的输出应该是真的，但我得到输出 isMatch 是假的。我的布尔方法是否错误，我该如何解决？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T19:42:33.510

首先，您的整个`isMatch`方法最好折叠为：

```
public boolean isMatch() {
    return num == 10;
} 
```

其次，你现有的代码真的*可以*工作，除非你改变`num`. 您应该查看用于将输出显示为的任何诊断程序`false`……我怀疑它们会误导您。您是否有可能打印出被调用字段的值而*不是*`isMatch`调用该方法？这样就可以解释了。这就是为什么使用与字段同名的方法是个坏主意的原因之一。此外，我建议将您的字段设为私有。

简短但完整的示例显示了工作方法调用和“失败”字段访问（工作正常，但没有做你想做的事）：

```
public class BooleanTest {
    private int num;
    private boolean isMatch;

    public BooleanTest() {
        num = 10;
    }

    public boolean isMatch() {
        return num == 10;
    }

    public static void main(String[] args) {
        BooleanTest test = new BooleanTest();
        System.out.println(test.isMatch()); // true
        System.out.println(test.isMatch); // false
    }
} 
```

老实说，目前还不清楚为什么你有这个领域 - 我会删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T19:47:42.870

你必须这样称呼它

```
b.isMatch() 
```

不喜欢

```
b.isMatch 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T19:44:35.103

你做过这样的事情吗？：

```
public class BooleanTest {
   int num;
   boolean isMatch;

   public BooleanTest() {
     num = 10;
   }

   public boolean isMatch() { //variable is already initialize to 10 from constructor
     if (num == 10)
       isMatch = true;
     else
       isMatch = false;
     return isMatch;
   }
   public static void main(String st[])//test your code in main..
    {
      BooleanTest bt = new BooleanTest();//constructor of BooleanTest is called 
      System.out.println(bt.isMatch());//Check the value returned by isMatch()
    }
} 
```

**编辑**
您编辑的帖子显示`main`您正在打印`isMatch`，而不是`isMatch()`默认`false` 情况下。..你应该`isMatch()`改用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T19:47:16.753

确保您在执行时`isMatch()`使用大括号调用该方法，否则您将引用该字段`isMatch`。应该如下：

```
BooleanTest bt = new BooleanTest();
bt.isMatch(); // include () and not bt.isMatch 
```

改变

```
System.out.println(s.isMatch); 
```

至

```
System.out.println(s.isMatch()); 
```

# javascript - 单击行后 JQuery / JavaScript 从表中获取值

> ID：15623285
> 
> 赞同：1
> 
> 时间：2013-03-25T19:40:49.623
> 
> 标签：javascript, jquery

使用 JQuery 或 JavaScript，我如何获得 a`<td>`中的值，`<table>`如下所示 -

```
<table class="MyTable">
   <tr>
      <td>John</td>
      <td class="MyClass">5</td>
   </tr>
   <tr>
      <td>Sally</td>
      <td class="MyClass">9</td>
   </tr>
</table> 
```

如果用户单击“John's row”，则捕获的值应为“5”。如果用户单击“Sally's row”，则捕获的值应为“9”。

我在以下 JQuery 中捕获了该行 -

```
$('table.myTable tbody tr').on('click', function () {

   //I want to capture <td class="MyClass"> value here, something like this -
   var myValue = $("this.td#MyClass").val() //DOESN'T WORK!

} 
```

我不确定我的`$(this).`陈述应该是什么样子，我已经尝试了几件事，比如 - `$("this.td#MyClass").val()`，但它返回“未定义”。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T19:42:56.310

```
var myValue = $(this).find('.MyClass').text(); 
```

`.val()`当您从 HTML 控件（例如`<select>`元素）中检索值时使用。在这里你得到文本所以使用`.text()`

# java - 如何始终滚动到文本区域的底部？

> ID：15623287
> 
> 赞同：2
> 
> 时间：2013-03-25T19:40:53.973
> 
> 标签：java, swing, scroll, jtextarea, caret

如何使滚动窗格始终位于正在写入新数据的滚动窗格的底部？我看不到新文本的写入。

```
JTextArea itTextArea = new JTextArea(10,80);
new JScrollPane(itTextArea);
xmlTextArea.setEditable(true); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T19:58:02.067

这就是我使用的：

```
DefaultCaret caret = (DefaultCaret) textArea.getCaret();
caret.setUpdatePolicy(DefaultCaret.ALWAYS_UPDATE); 
```

下面是你如何实现它：

```
public class Test
{
    public static void createFrame()
    {
        EventQueue.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                try 
                {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception e) {
                    e.printStackTrace();
                }
                JPanel panel = new JPanel();
                panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));
                panel.setOpaque(true);
                JTextArea textArea = new JTextArea(15, 50);
                textArea.setWrapStyleWord(true);
                textArea.setEditable(false);
                textArea.setFont(Font.getFont(Font.SANS_SERIF));
                JScrollPane scroller = new JScrollPane(textArea);
                scroller.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
                scroller.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
                JPanel inputpanel = new JPanel();
                inputpanel.setLayout(new FlowLayout());
                JTextField input = new JTextField(20);
                JButton button = new JButton("Enter");
                DefaultCaret caret = (DefaultCaret) textArea.getCaret();
                caret.setUpdatePolicy(DefaultCaret.ALWAYS_UPDATE);
                panel.add(scroller);
                inputpanel.add(input);
                inputpanel.add(button);
                panel.add(inputpanel);
                frame.getContentPane().add(BorderLayout.CENTER, panel);
                frame.pack();
                frame.setLocationByPlatform(true);
                frame.setVisible(true);
                frame.setResizable(false);
                input.requestFocus();
            }
        });
    }

    public static void main(String... args)
    {
        createFrame();
    }
} 
```

那应该是什么样子：

![在此处输入图像描述](../Images/214516b2c37e2a137056097a1efde798.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T21:04:59.670

对于更高级的解决方案，您可以使用[Smart Scrolling](http://tips4java.wordpress.com/2013/03/03/smart-scrolling/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T19:48:54.747

```
itTextArea.setCaretPosition(itTextArea.getText().length()); 
```

查看[JTextComponent#setCaretPosition](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#setCaretPosition(int))了解更多详情

# php - Foreach 循环不回显任何内容

> ID：15623291
> 
> 赞同：0
> 
> 时间：2013-03-25T19:41:07.313
> 
> 标签：php, mysql, loops, foreach

我正在做我的项目。我有赛车手（ID、姓名、姓氏等）的表格，并将其存储在一个数组中。然后我使用 foreach 循环来回显这些数据，但没有任何显示。这是我的代码：

```
$zavodnici_array = array();
while(false !== ($row = mysql_fetch_assoc($result))) {
$zavodnici_array[] = $row;
}  
foreach($zavodnici_array as $key) {
  echo $zavodnici_array[$key][id] ."<br>";
  echo $zavodnici_array[$key][jmeno] ."<br>";
  echo $zavodnici_array[$key][prijmeni] ."<br>";
} 
```

有谁能够帮我？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T19:43:26.403

您的示例有一些问题。

当使用`foreach as $key`键是数组中每个项目的值而不是键

假设您的`mysql`查询获取了结果

```
foreach($zavodnici_array as $key => $value) {
  echo $zavodnici_array[$key]['id'] ."<br>";
  echo $zavodnici_array[$key]['jmeno'] ."<br>";
  echo $zavodnici_array[$key]['prijmeni'] ."<br>";
} 
```

或者

```
foreach($zavodnici_array as $value) {
      echo $value['id'] ."<br>";
      echo $value['jmeno'] ."<br>";
      echo $value['prijmeni'] ."<br>";
    } 
```

php 中的键是字符串或整数`$value[id]`无效。我以为您正在尝试键入索引`id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T19:48:34.057

由于您正在为数组定义自己的值，因此您必须使用它：

foreach ($array as $key => $value)

# jsf - ocpsoft.org PrettyTime：找不到任何已注册的转换器类

> ID：15623295
> 
> 赞同：2
> 
> 时间：2013-03-25T19:41:19.393
> 
> 标签：jsf, jakarta-ee, myfaces, prettyfaces, apache-tomee

我发现了一个相当令人难以置信的 JSF 日期转换库，名为 Pretty Time。我已将 maven 坐标包含在我的 pom.xml 中：

```
 <dependency>
        <groupId>org.ocpsoft.prettytime</groupId>
        <artifactId>prettytime-integration-jsf</artifactId>
        <version>2.1.3.Final</version>
        <scope>runtime</scope>
    </dependency> 
```

这是我页面的相关部分：

```
<h:column>
    <f:facet name="header">Last Updated</f:facet>
    <h:outputText value="#{item.lastUpdated}">
        <f:converter converterId="org.ocpsoft.PrettyTimeConverter" />
    </h:outputText>
</h:column> 
```

我正在部署到 TomEE v1.5.1+。我得到了这个例外。我错过了一步吗？我确实注意到该类`org.ocpsoft.PrettyTimeConverter`没有标有`@FacesConverter`注释。这会是个问题吗？

```
Mar 25, 2013 2:31:56 PM org.apache.catalina.core.ApplicationDispatcher invoke
SEVERE: Servlet.service() for servlet FacesServlet threw exception
javax.faces.FacesException: Could not find any registered converter-class by converterId : prettyTimeConverter
    at org.apache.myfaces.application.ApplicationImpl.createConverter(ApplicationImpl.java:1511)
    at javax.faces.application.ApplicationWrapper.createConverter(ApplicationWrapper.java:164)
    at org.apache.myfaces.view.facelets.tag.jsf.ValueHolderRule$LiteralConverterMetadata.applyMetadata(ValueHolderRule.java:50)
    at org.apache.myfaces.view.facelets.tag.MetadataImpl.applyMetadata(MetadataImpl.java:45)
    at javax.faces.view.facelets.MetaTagHandler.setAttributes(MetaTagHandler.java:66)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.setAttributes(DelegatingMetaTagHandler.java:93)
    at org.apache.myfaces.view.facelets.tag.jsf.ComponentTagHandlerDelegate.apply(ComponentTagHandlerDelegate.java:237)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:53)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:49)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:58)
    at org.apache.myfaces.view.facelets.tag.jsf.ComponentTagHandlerDelegate.apply(ComponentTagHandlerDelegate.java:294)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:53)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:49)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:58)
    at org.apache.myfaces.view.facelets.tag.jsf.ComponentTagHandlerDelegate.apply(ComponentTagHandlerDelegate.java:294)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:53)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:49)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:58)
    at org.apache.myfaces.view.facelets.tag.jsf.ComponentTagHandlerDelegate.apply(ComponentTagHandlerDelegate.java:294)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:53)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:49)
    at org.apache.myfaces.view.facelets.tag.ui.DefineHandler.applyDefinition(DefineHandler.java:86)
    at org.apache.myfaces.view.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:175)
    at org.apache.myfaces.view.facelets.impl.TemplateContextImpl$TemplateManagerImpl.apply(TemplateContextImpl.java:186)
    at org.apache.myfaces.view.facelets.impl.TemplateContextImpl.includeDefinition(TemplateContextImpl.java:131)
    at org.apache.myfaces.view.facelets.impl.DefaultFaceletContext.includeDefinition(DefaultFaceletContext.java:460)
    at org.apache.myfaces.view.facelets.tag.ui.InsertHandler.apply(InsertHandler.java:94)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:49)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:58)
    at org.apache.myfaces.view.facelets.tag.jsf.ComponentTagHandlerDelegate.apply(ComponentTagHandlerDelegate.java:294)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:53)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:49)
    at org.apache.myfaces.view.facelets.tag.jsf.core.ViewHandler.apply(ViewHandler.java:156)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:49)
    at org.apache.myfaces.view.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:57)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:49)
    at org.apache.myfaces.view.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:48)
    at org.apache.myfaces.view.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:394)
    at org.apache.myfaces.view.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:448)
    at org.apache.myfaces.view.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:426)
    at org.apache.myfaces.view.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:244)
    at org.apache.myfaces.view.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:148)
    at org.apache.myfaces.view.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:57)
    at org.apache.myfaces.view.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:48)
    at org.apache.myfaces.view.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:179)
    at org.apache.myfaces.view.facelets.FaceletViewDeclarationLanguage.buildView(FaceletViewDeclarationLanguage.java:452)
    at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:78)
    at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:241)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:199)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:145)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:137)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at fm.thehub.security.SecurityFilter.doFilter(SecurityFilter.java:113)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.tomee.catalina.OpenEJBValve.invoke(OpenEJBValve.java:45)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1822)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722) 
```

编辑：我倾向于 TomEE/MyFaces 错误......或功能。不管你想怎么称呼它：

我的项目的 faces-config 使用 2.1 命名空间：

```
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd"
    version="2.1"> 
```

而 prettytime 使用已弃用的：

```
<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_1_2.xsd"
   version="1.2"> 
```

将转换器添加到我的项目的 faces 配置中会使一切正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T13:55:00.313

转换器在捆绑的 faces-config.XML 中定义 - [https://github.com/ocpsoft/prettytime/blob/master/jsf/src/main/resources/META-INF/faces-config.xml](https://github.com/ocpsoft/prettytime/blob/master/jsf/src/main/resources/META-INF/faces-config.xml)

我会确保您拥有所需的所有依赖项。核心 jar 和 jsf 集成。

您可能在 tomee 中发现了某种错误，但我认为这极不可能。我会试着在几个小时内仔细看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:57:11.763

您的 JSF 实现抱怨它找不到带有 id 的转换器`prettyTimeConverter`。但是在您发布的代码中，您正在引用`org.ocpsoft.PrettyTimeConverter`（这是正确的）。您应该再次检查转换器 ID。我想这只是一个错字。

# javascript - SCRIPT5：在 IE9 上访问被拒绝

> ID：15623296
> 
> 赞同：0
> 
> 时间：2013-03-25T19:41:22.700
> 
> 标签：javascript, internet-explorer, internet-explorer-9

我无法在 IE9 上使用此脚本访问 URL。在 Chrome 和 Firefox 上它工作正常。`F12`当我在 IE9 上调试 ( ) 时，我收到：

`SCRIPT5: ACCESS DENIED.`

我的功能：

```
function NewPage2() {
    var xmlHttp;
    if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlHttp = new XMLHttpRequest();

    } else { // code for IE6, IE5
        xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlHttp.open("GET", "https://graph.facebook.com/oauth/access_token?client_id=" +
        '<%=ConfigurationManager.AppSettings["clientId"].ToString() %>' + 
        '&redirect_uri=' + <%=ConfigurationManager.AppSettings["redirectUrl"].ToString() %>' +
        '&state=' + document.getElementById('text').value + 
        '&client_secret=' + '<%=ConfigurationManager.AppSettings["client_secret"].ToString() %>' +
        '&code=' + getUrlVars2()["code"], false);
    xmlHttp.send(null);
    end(xmlHttp.responseText + "&userId=" + getUrlVars2()["state"]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:50:25.603

当您尝试从不同的域访问 ajax 请求到您的主页时，就会发生这种情况。（在这种情况下，您从 Facebook 访问 URL）。

如果您需要访问来自不同域的 URL，则称为跨站点请求。由于安全隐患，这些默认情况下被阻止，但仍然可以通过更多工作来完成它们。

使用 jQuery 很容易做到。

奇怪的是，尽管您在问题的标签中包含了 jQuery，但您的实际代码根本没有使用 jQuery——事实上，您提供的整个代码将是 jQuery 中的一行，加上它可以处理跨站点请求。

您需要使用称为 JSONP 的 Ajax 技术，您可以在此处的 jQuery 站点上找到该技术的文档：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

代码看起来像这样：

```
$.ajax({
  dataType: 'jsonp',
  jsonp: 'jsonp_callback',
  url: 'https://graph.facebook.com/......',
  success: function () {
    // do stuff
  },
}); 
```

希望有帮助。

# c++ - 将字符串拆分/拆分/提取成部分

> ID：15623300
> 
> 赞同：-1
> 
> 时间：2013-03-25T19:41:30.640
> 
> 标签：c++, string

我有一个似乎很简单的问题，但我似乎无法解决这个问题......

我有一个字符串，可以调用它`"HELLOWORLD"`，并且我有一个从我所做的其他工作中生成的数字，可以说它是`4`

如何返回第一个 ( `"HELL"`) 并保持第二个 ( `"OWORLD"`) 继续工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T19:47:24.083

如果您已经有了要拆分的索引，那么最简单的方法是使用带有两个迭代器的字符串构造函数：

```
std::string original = "HELLOWORLD";

std::size_t index = 4;
std::string::iterator it = original.begin();

std::string part1(it, it + index);
std::string part2(it + index, original.end()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T19:46:59.330

你试过了吗：

```
#include <string>
...

string thing = "HELLOWORLD";

thing.substr(0, 4);    // => "HELL" 
```

该`substr`方法（来自`string`库）将字符串从第一个索引返回到（但不包括）传递给它的第二个索引。

**更新**

我在理解你想要做的事情时遇到了一些麻烦。如果要获取字符串的*结尾*（即`"OWORLD"`），可以执行以下操作：

```
thing.substr(4, thing.length())   // => "OWORLD" 
```

这从第 4 个索引（包括）到第 N 个索引（不包括）。

# ember.js - 来自 findAll() 的单个模型？

> ID：15623301
> 
> 赞同：0
> 
> 时间：2013-03-25T19:41:34.533
> 
> 标签：ember.js

我想使用我的模板和视图来编辑一条记录。服务器返回一个可能会或可能不会被填充的数组。Controller 是 ObjectController，我目前通过 findAll(1) 填充它。如何使用 findAll() 并返回返回数组或空对象中的第一项？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:41:30.203

我要做的是`ArrayController`保存`findAll`调用的结果，然后像这样绑定到它：

```
App.RecordsController = Ember.ArrayController.extend();

App.RecordController = Ember.ObjectController.extend({
    needs: 'records',
    contentBinding: 'controllers.records.firstObject'
}); 
```

在您的路线中，您可以执行以下操作：

```
setupController: function () {
    this.controllerFor('records').set('content', Blah.findAll());
} 
```

# matlab - 从 MATLAB 中的另一个文件加载数据

> ID：15623302
> 
> 赞同：0
> 
> 时间：2013-03-25T19:41:42.373
> 
> 标签：matlab, plot, load-data-infile

我正在 MATLAB 中对来自特定细胞（生物）类型的数据进行一些计算，并在其末尾获得一些图。我通过运行相同的程序，使用相同的变量，但在不同的文件（文件有数据）上对来自另一种细胞类型的数据进行类似的计算。我想在同一图中绘制从一种细胞类型获得的线条与来自第二种细胞类型的线条来比较行为。有没有办法可以将之前获得的波形保存到向量中，然后加载向量并使用它在同一图形上绘制来自两个单元格的波形？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:06:04.560

我认为您可能正在寻找以下`hold on`功能：

```
>> A=1:0.1:5;
>> B=A.*A;
>> figure(1);
>> hold on;
>> plot(A,A,'bo');
>> plot(A,B,'rd');
>> hold off; 
```

这给出了：

![在此处输入图像描述](../Images/eca61079d230beb4c968911acbe65763.png)

# javascript - 设置端点不工作？

> ID：15623303
> 
> 赞同：2
> 
> 时间：2013-03-25T19:41:42.467
> 
> 标签：javascript, jquery, fine-uploader

我正在尝试使用[好的上传者的](http://fineuploader.com/) [setEndpoint 函数](http://docs.fineuploader.com/api/fineuploaderbasic.html)，但是每次我尝试调用它时都会引发以下错误：

```
Uncaught TypeError: Object [object Object] has no method 'setEndpoint' 
(anonymous function) 
b.event.dispatch 
v.handle 
```

我进入我的 jquery.fineuploader-3.2.min.js 文件并找到以下代码：

```
setEndpoint:function(a,b){null==b?th.... 
```

所以看起来功能在那里。下面是我的代码的精简版：

```
$(function(){
    var postUrl = "http://myurl.com/posthere";
    var uploader = $("#upload").fineUploader({
            request: {
                endpoint: postUrl
            },
            template: uploadTemplate
    });

    $("#useSSL").change(function () { 
           //Blows up here
           uploader.setEndpoint(postUrl);
    });
}); 
```

谁能看到我在这里做错了什么？我检查了`uploader`对象，它不为空。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T23:07:16.030

您没有正确使用 jQuery 插件。与所有 jQuery 插件一样，在您的情况下，返回的对象`uploader`是 jQuery 对象。正如文档所述，以及一般 jQuery 插件的标准做法，您必须调用 API 函数，如下所示：

`uploader.fineUploader('setEndpoint', postUrl);`

请阅读[Fine Uploader jQuery 插件文档](http://docs.fineuploader.com/integrating/modes/using-jquery-plugin.html)，了解使用插件时所需的更多具体信息。

# c# - Windows Azure 存储从 1.7 迁移到 2.0 的错误处理

> ID：15623306
> 
> 赞同：0
> 
> 时间：2013-03-25T19:41:47.377
> 
> 标签：c#, azure-storage

我将以下代码更改为：

```
try
{
    blob.FetchAttributes();
}
catch (StorageClientException e)
{
    if (e.ErrorCode == StorageErrorCode.ResourceNotFound)
        ....
} 
```

至：

```
try
{
    blob.FetchAttributes();
}
catch (StorageException e)
{
    if (e.RequestInformation.ExtendedErrorInformation.ErrorCode == StorageErrorCodeStrings.ResourceNotFound)
        ....
} 
```

在我运行它之后，它给了我一个 NullException 因为：

e.RequestInformation.ExtendedErrorInformation = NULL，

但

e.RequestInformation.HTTPStatusMessage = "指定的 blob 不存在。"

和

e.RequestInformation.HTTPStatusCode = 404

我正在考虑测试 HttpStatusMessage，但我觉得这样做并不安全，因为消息可能会随着时间而改变，如果我想保持我原来的逻辑行为，任何人都可以帮助我在这种情况下我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:59:52.043

[旧库中的ErrorCode](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storageclient.storageexception.errorcode.aspx)实际上与新库中的[ErrorCode不同。](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storage.storageextendederrorinformation.errorcode.aspx)旧库尝试根据异常类型、HTTP 状态码以及服务器返回的错误码（如果有）对错误进行分类。[在某些情况下，这会导致更多的混乱，因为不同的错误被映射到StorageErrorCode](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storageclient.storageerrorcode.aspx)的单个值。

因此，在 Azure 存储客户端库 2.0 中，旧的[StorageErrorCode](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storageclient.storageerrorcode.aspx)枚举不再存在。相反，我们要求用户直接检查 HTTP 状态代码。如果服务器返回响应正文，则可以包含更多信息，如[状态和错误代码](http://msdn.microsoft.com/en-us/library/windowsazure/dd179382.aspx)文章中所述。当此数据存在时，将相应地填充[ErrorCode 。](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storage.storageextendederrorinformation.errorcode.aspx)

在您的示例中，[FetchAttributes](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storage.blob.icloudblob.fetchattributes.aspx)发出一个[Get Blob Properties](http://msdn.microsoft.com/en-us/library/windowsazure/dd179394.aspx)请求，该请求不返回响应正文。这就是[ExtendedErrorInformation](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storage.requestresult.extendederrorinformation.aspx)为空的原因。

# mysql - 复杂的 MySQL 选择

> ID：15623308
> 
> 赞同：0
> 
> 时间：2013-03-25T19:41:50.157
> 
> 标签：mysql

好吧伙计们，我在 MySQL 方面不是很好，但我可以做基础知识......所以现在我需要一些帮助。我有两个表 - 问题（存储一些问题和可用答案）和日志（存储先前回答问题的日志）

问题-

```
questionId,     question,                answer1...balbalba
1              'question balba'         'Avaliable answer1'
2              'question2 blaba'        'Other answer' 
```

日志-

```
id, questionId, userId
1   1           123456 
```

这里存储的是在1`userId`上回答的`questionId`

所以我需要一个查询，从“问题”中找到用户“123456”没有得到回答的随机问题。我希望你能帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:57:50.330

```
SELECT q.questionId
FROM questions AS q
LEFT OUTER JOIN log AS l ON q.questionId = l.questionId AND l.userId = 123456
WHERE l.id IS NULL 
```

这为您提供了用户 123456 尚未回答的问题。

要随机选择其中之一，请附加

```
ORDER BY RAND()
LIMIT 1 
```

到查询。

问题`ORDER BY RAND()`是，它不能很好地扩展。但是，连接条件已经很好地减少了结果集的大小（每个问题最多为您提供一个结果）。如果问题数量很少（大约 100 个），我不会担心`ORDER BY RAND()`. 如果您有很多问题，请查看问题[如何优化 MySQL 的 ORDER BY RAND() 函数？](https://stackoverflow.com/questions/1244555/)为替代品。

# css - 没有表格的 CSS 对齐 - 如果未指定边距，为什么两个 div 重叠？

> ID：15623310
> 
> 赞同：0
> 
> 时间：2013-03-25T19:41:53.863
> 
> 标签：css

在下面的示例中： [http ://www.w3schools.com/css/tryit.asp?filename=trycss_float6](http://www.w3schools.com/css/tryit.asp?filename=trycss_float6)

```
<head>
<style>
div.container
{
    width:100%;
    margin:0px;
    border:1px solid gray;
    line-height:150%;
}
div.header,div.footer
{
    padding:0.5em;
    color:white;
    background-color:gray;
    clear:left;
}
h1.header
{
    padding:0;
    margin:0;
}
div.left
{
    float:left;
    width:160px;
    margin:0;
    padding:1em;
}
div.content
{
    margin-left:190px;
    border-left:1px solid gray;
    padding:1em;
}
</style>
</head>
<body>

<div class="container">
<div class="header"><h1 class="header">W3Schools.com</h1></div>
<div class="left"><p>"Never increase, beyond what is necessary, the number of entities required to explain anything." William of Ockham (1285-1349)</p></div>
<div class="content">
<h2>Free Web Building Tutorials</h2>
<p>At W3Schools you will find all the Web-building tutorials you need,
 from basic HTML and XHTML to advanced XML, XSL, Multimedia and WAP.</p>
<p>W3Schools - The Largest Web Developers Site On The Net!</p></div>
<div class="footer">Copyright 1999-2005 by Refsnes Data.</div>
</div> 
```

如果我从 div.content 中删除边距，则 div.content 的边框与容器的边框重叠。这意味着 div.content 与 div.left 重叠 - 尽管 div.content 中的文本遵循 div.left 的文本。那么问题是为什么会有这样的行为？文本不重叠，但边距重叠。如果我们提到几个 div 的浮动，那么它们会相互跟随，而不必提及与页面的最左边缘相距多少边距。如何区分这两种情况？

非常感谢您对理解的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:56:02.267

浮动最初并不打算用于布局渲染 - 它的主要目的是将文本包裹在图像（或其他元素）周围。这是您看到的行为。

当您浮动元素时，它们不再被视为“块”元素，并且它们的宽度“收缩包装”到可能包含元素的最小尺寸。这就是为什么当您将多个元素彼此相邻浮动时，前面的元素不会与前面的元素重叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:08:55.853

当您从 content-div 中删除边距时，容器和 content-div 的边距不会合并，而是 left-div 的宽度（不可见）充当 content-div 的边距。但是，当 content-div 的数据增加到超过指定给 left-div 的高度时，它会溢出并从 left-div 获取边距。

# ios - iOS 游戏中心 GameKit 程序化邀请对接会

> ID：15623311
> 
> 赞同：8
> 
> 时间：2013-03-25T19:41:55.470
> 
> 标签：ios, objective-c, game-center, gamekit, gkmatchmaker

我正在尝试使用自定义 UI（没有 GKMatchMakerViewController）来实现实时多人游戏。我正在使用 startBrowsingForNearbyPlayersWithReachableHandler: ^(NSString *playerID, BOOL reachable) 来查找本地玩家，然后使用 GKMatchmaker 单例（我已经启动）发起匹配请求。

这就是我遇到麻烦的地方。当我发送请求时，完成处理程序几乎立即触发，没有错误，并且它返回的匹配项的预期玩家计数为零。同时，对方玩家肯定没有回应请求

相关代码：

```
- (void) findMatch {
  GKMatchRequest *request = [[GKMatchRequest alloc] init];
  request.minPlayers = NUM_PLAYERS_PER_MATCH; //2
  request.maxPlayers = NUM_PLAYERS_PER_MATCH; //2
  if (nil != self.playersToInvite) {
    // we always successfully get in this if-statement
    request.playersToInvite = self.playersToInvite;
    request.inviteeResponseHandler = ^(NSString *playerID, GKInviteeResponse response) {
      [self.delegate updateUIForPlayer: playerID accepted: (response == GKInviteeResponseAccepted)];
  };
}
request.inviteMessage = @"Let's Play!";

[self.matchmaker findMatchForRequest:request withCompletionHandler:^(GKMatch *match, NSError *error) {
  if (error) {
    // Print the error
    NSLog(@"%@", error.localizedDescription);
  } else 
    if (match != nil) {
      self.currentMatch = match;
      self.currentMatch.delegate = self;

      // All players are connected
      if (match.expectedPlayerCount == 0) {
        // start match
        [self startMatch];
      }
        [self stopLookingForPlayers];
      }
  }];
} 
```

我从上一个问题（[iOS Gamecenter Programmatic Matchmaking](https://stackoverflow.com/questions/14492171/ios-gamecenter-programmatic-matchmaking)）中知道我需要包含以下内容：

```
- (void)matchForInvite:(GKInvite *)invite completionHandler:(void (^)(GKMatch *match, NSError *error))completionHandler 
```

在上面的代码中，但我不知道应该包含在哪里。我已经尝试过 GKMatchRequest 的受邀者响应处理程序和媒人 finMatchForRequest:withCompletionHandler 都无济于事。发生的行为是匹配器立即返回匹配（甚至在被邀请者被邀请之前），并且即使在被邀请者点击匹配邀请之后，也永远不会调用 matchRequest 的受邀者响应处理程序。

有人可以就此提供建议吗？谢谢你。

...吉姆

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-11T02:51:11.693

我今晚刚刚在我的游戏中使用了这个。您需要进行更多协商才能设置通信通道。返回给邀请者的初始比赛正在等待被邀请者响应......这是我只有两个玩家的过程。以下是我的通信启动正在执行的所有步骤。显然，这里没有包含真正的错误处理：

首先，验证您的播放器

二、认证后立即设置inviteHandler。像这样的东西：

```
[GKMatchmaker sharedMatchmaker].inviteHandler = ^(GKInvite* acceptedInvite, NSArray *playersToInvite)
{
    if(acceptedInvite != nil)
    {
        // Get a match for the invite we obtained...
        [[GKMatchmaker sharedMatchmaker] matchForInvite:acceptedInvite completionHandler:^(GKMatch *match, NSError *error)
        {
            if(match != nil)
            {
                [self disconnectMatch];
                // Record the new match...
                self.MM_gameCenterCurrentMatch = match;
                self.MM_gameCenterCurrentMatch.delegate = self;
             }
            else if(error != nil)
            {
                NSLog(@"ERROR: From matchForInvite: %@", [error description]);
            }
            else 
            {
                NSLog(@"ERROR: Unexpected return from matchForInvite...");
            }
         }];
    }
}; 
```

第三，获取您的好友 playerIds 列表（不是别名）。

第四，设置你的 GKMatchRequest 像这样......我只邀请一个朋友：

```
// Initialize the match request - Just targeting iOS 6 for now...
GKMatchRequest* request = [[GKMatchRequest alloc] init];
request.minPlayers = 2;
request.maxPlayers = 2;
request.playersToInvite = [NSArray arrayWithObject:player.playerID];
request.inviteMessage = @"Let's play!";
// This gets called when somebody accepts
request.inviteeResponseHandler = ^(NSString *playerID, GKInviteeResponse response)
{
    if (response == GKInviteeResponseAccepted)
    {
        //NSLog(@"DEBUG: Player Accepted: %@", playerID);
        // Tell the infrastructure we are don matching and will start using the match
        [[GKMatchmaker sharedMatchmaker] finishMatchmakingForMatch:self.MM_gameCenterCurrentMatch];
     }
}; 
```

五、使用请求调用 findMatchForRequest:withCompletionHandler: 类似这样的...

```
 [[GKMatchmaker sharedMatchmaker] findMatchForRequest:request withCompletionHandler:^(GKMatch* match, NSError *error) {
    if (error)
    {
        NSLog(@"ERROR: Error makeMatch: %@", [error description] );
        [self disconnectMatch];
    }
    else if (match != nil)
    {
        // Record the new match and set me up as the delegate...
        self.MM_gameCenterCurrentMatch = match;
        self.MM_gameCenterCurrentMatch.delegate = self;
        // There will be no players until the players accept...
    }
}]; 
```

第六，这会将请求发送给其他玩家，如果他们接受来自第二步的“inviteHandler”，则会被调用。

第七，第二步的“inviteHandler”得到GKInvite的匹配！

第八，第四步中的“inviteeResponseHandler”被调用，从而完成了比赛！

第九，从 GKMatchDelegate 创建一个 didChangeState 来处理比赛的结束。像这样的东西：

```
- (void)match:(GKMatch *)match player:(NSString *)playerID didChangeState:(GKPlayerConnectionState)state{
switch (state)
{
    case GKPlayerStateConnected:
        // Handle a new player connection.
        break;
    case GKPlayerStateDisconnected:
        // A player just disconnected.
        break;
}
if (!self.matchStarted && match.expectedPlayerCount == 0)
{
    self.matchStarted = YES;
    // Handle initial match negotiation.
    if (self.iAmHost && !self.sentInitialResponse)
    {
        self.sentInitialResponse = true;
        // Send a hello log entry
        [self sendMessage: [NSString stringWithFormat:@"Message from friend, 'Hello, thanks for accepting, you have connected with %@'", self.MM_gameCenterLocalPlayer.alias] toPlayersInMatch: [NSArray arrayWithObject:playerID]];
    }
}} 
```

第十，这是我的sendMessage：

```
- (void) sendMessage:(NSString*)action toPlayersInMatch:(NSArray*) playerIds{   
NSError* err = nil;
if (![self.MM_gameCenterCurrentMatch sendData:[action dataUsingEncoding:NSUTF8StringEncoding] toPlayers:playerIds withDataMode:GKMatchSendDataReliable error:&err])
{
    if (err != nil)
    {
        NSLog(@"ERROR: Could not send action to players (%@): %@ (%d) - '%@'" ,[playersInMatch componentsJoinedByString:@","],[err localizedDescription],[err code], action);
    }
    else
    {
        NSLog(@"ERROR: Could not send action to players (%@): null error - '%@'",[playersInMatch componentsJoinedByString:@","], action);
    }
}
else
{
    NSLog(@"DEBUG: Message sent to players (%@) - '%@'",[playersInMatch componentsJoinedByString:@","], action);
}} 
```

第十一，从 GKMatchDelegate 创建一个 didReceiveData，如下所示：

```
- (void)match:(GKMatch *)match didReceiveData:(NSData *)data fromPlayer:(NSString *)playerID{
NSString* actionString = [[[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding] autorelease];
// Send the initial response after we got the initial send from the
// invitee...
if (!self.iAmHost &&!self.sentInitialResponse)
{
    self.sentInitialResponse = true;
    // Send a hello log entry
    [self sendMessage: [NSString stringWithFormat:@"Message from friend, 'Hello, thanks for inviting, you have connected with %@'", self.MM_gameCenterLocalPlayer.alias] toPlayersInMatch: [NSArray arrayWithObject:playerID]];
}
// Execute the action we were sent...
NSLog(actionString);} 
```

第十二……嗯，现在你已经建立并运行了沟通渠道……做任何你想做的事……

# ruby-on-rails - ruby on rails 实例变量和 if elsif

> ID：15623315
> 
> 赞同：0
> 
> 时间：2013-03-25T19:42:13.113
> 
> 标签：ruby-on-rails, if-statement, instance-variables

在我的显示视图中，我有：

```
 <div class="reviews" >
  <% @reviews.each do |review| %>
  <%= review_block review %>
  <% end %>
  </div> 
```

在我的控制器中，我有：

```
 def show    
  @review = Review.new
  @reviews = @user.reviews
  end 
```

这个想法是，如果已经写了评论，它们会显示在当前存在的 div 下方的页面上——这部分工作正常。

但是，如果没有写评论，我只会在当前存在的 div 下得到任何信息。我怎么能显示一些文字，比如“没有写评论，对不起！”

理想情况下，我想显示部分内容，因为我将显示更多文本/图像。

我正在做这样的事情：

```
 <div class="reviews" >
  <% @reviews.each do |review| %>
  <%= review_block review if review>0 %>
  <%= else render :partial => 'layouts/no_reviews' %>
  <% end %> 
```

但它不起作用。谢谢你的帮助！

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:46:53.220

```
<div class="reviews" >
<% if @reviews && @reviews.present? %>
  <% @reviews.each do |review| %>
  <%= review_block review %>
<% end %>
<%= else render :partial => 'layouts/no_reviews' %>
<% end %> 
```

例如

```
1.9.3-p327 :012 > if @abc
1.9.3-p327 :013?>   puts 'yes'
1.9.3-p327 :014?>   end
 => nil # We get noting
1.9.3-p327 :015 > @abc='lolololo'
 => "lolololo" 
1.9.3-p327 :016 > if @abc
1.9.3-p327 :017?>   puts 'yes'
1.9.3-p327 :018?>   end
yes # We get yes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T19:46:11.443

尝试这个，

```
<div class="reviews" >
  <% if @reviews.any? %>
    <% @reviews.each do |review| %>
      <%= review_block review %>
    <% end %>
  <% else %>
    <%= render :partial => 'layouts/no_reviews' %>
  <% end %>
</div> 
```

# git - Windows 上的 Git (msysgit) 克隆给出错误

> ID：15623319
> 
> 赞同：1
> 
> 时间：2013-03-25T19:42:31.693
> 
> 标签：git

第一次尝试在 Windows 上使用 msysgit 进行 git clone 并收到此错误。

```
fatal: read error: early EOF
fatal: read error: Invalid argument
fatal: recursion detected in die handler

git did not exit cleanly (exit code 128) 
```

设置：

*   git init 在我的服务器上使用

    ```
    git init --bare 
    ```

*   git 守护进程服务

    ```
    git daemon --verbose --export-all --enable=upload-pack --enable=receive-pack --base-path=<my_path> 
    ```

*   最后

    ```
    git clone git://<ip_address>/reponame 
    ```

这给出了上面的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-01T10:25:59.110

我得到了同样的错误克隆：

`git clone git@domain.tld:user/repository.git`

要解决它，我只需更改协议：

`git clone https://user@domaine.tld/user/repository.git`

将其检查到您的 git 服务器（如 github、bitbucket 等）中以获取正确的 URL，如果您在执行 git pull 时遇到相同的错误，那也可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:23:18.713

你的克隆命令在我看来是错误的。您应该添加您的仓库的名称。

```
git clone git://<ip_address>/reponame 
```

如果这不起作用，则有[许多替代方式自托管](http://git-scm.com/book/en/Git-on-the-Server)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T19:47:06.260

听起来像是网络/连接问题。

1.  再试一次
2.  尝试使用具有不同[传输协议](http://git-scm.com/book/en/Git-Internals-Transfer-Protocols)（ssh://、http://、git://）的 url 进行克隆

# java - eclipse中的Java最大文字数

> ID：15623321
> 
> 赞同：5
> 
> 时间：2013-03-25T19:42:42.303
> 
> 标签：java

我有一条看起来像的线

```
if(numb2 < 10000000000000 & numb2 > 100000000000){ 
```

所以在 Eclipse 中，它说 10000000000000 和 100000000000 都超出了整数文字范围。具体来说

int 类型的文字 10000000000000 超出范围和 int 类型的文字 1000000000000 超出范围

我改变了这条线，所以它看起来像

```
if(numb2 < 1000000000*10000 & numb2 > 100000000*1000){ 
```

但如果你在那个范围内输入一个数字，它只是说

```
Exception in thread "main" java.lang.NumberFormatException: For input string: "5555555555555"
    at java.lang.NumberFormatException.forInputString(Unknown Source)
    at java.lang.Integer.parseInt(Unknown Source)
    at java.lang.Integer.parseInt(Unknown Source)
    at twothousandthirteen.LuckyNumber.main(LuckyNumber.java:12) 
```

我想知道是否有办法扩展文字数字范围或采取任何措施来解决问题。

谢谢 KMehta

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T19:57:19.397

这些数字大于`int`最大值，即 2 ^(31) -1 或 2147483647，可用作常量[`Integer.MAX_VALUE`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#MAX_VALUE)。

您能够将其编码的原因`1000000000*10000`是因为虽然每个被乘数都在最大值范围内`int`，但结果不在，java 通过[溢出](http://en.wikipedia.org/wiki/Arithmetic_overflow)结果来处理它，因此它落在有效范围内。

要解决这个问题，如果数字（java 中的默认数字类型是 ），也可以通过在末尾附加来使变量`long`（64 位）和常量变长，并且您应该使用它来满足输入中较大的值。`L``int`[`Long.parseLong()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Long.html#parseLong%28java.lang.String%29)

请注意，与 一样`int`， 的范围`long`也受到限制：2 ^(63) -1 或 9223372036854775807，可用作常数[`Long.MAX_VALUE`](http://docs.oracle.com/javase/6/docs/api/java/lang/Long.html#MAX_VALUE)。

对于任意大的数字，请使用`BigInteger`该类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T19:45:03.393

您必须指定一个`long`文字：

```
if(numb2 < 10000000000000L && numb2 > 100000000000L){ 
```

... 和 Long.parseLong 解析`int`范围之外的整数，范围在 -2,147,483,648 和 2,147,483,647 之间。

```
Long.parseLong(input) 
```

当然，这两种文字都旨在远高于该`int`范围，因此如果`numb2`是`int`，那么测试该范围没有意义。

另外，对于布尔值，不要使用`&`，使用`&&`. `&`是按位与运算符，而且肯定不是您要执行的操作；`&&`是逻辑“和”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T19:45:27.580

要了解 Java 中原始值的范围，请查看[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)。

它们也可用作相应包装类的静态变量。例如，[整数.MAX_VALUE](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#MAX_VALUE)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T19:46:20.723

的数据类型是`numb2`什么？是`int`吗？如果是这样，您无需检查 -`int`无论如何都无法存储超过 ~2,000,000,000 的数字。条件始终为真。

`long`另一方面，如果它是，那么您只需要`long`文字。那会是这样的：

```
if(numb2 < 10000000000000L & numb2 > 100000000000L){ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T19:48:01.230

如果要使用 int 范围之外的数字，则必须使用不同的类型。eclipse 中的整数值只能达到 2^31-1（有符号）。如果你想使用更大的值，long 可以达到 2^63-1。

如果您需要一个更大的数字，则 double 可能会变得非常大但精度非常差，因此如果您需要精度，则不应使用。巨大值的另一种方法是使用[`BigInteger`](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html)类，但这会创建可能难以处理的对象。

# c# - 从流中打开 Excel 文档

> ID：15623327
> 
> 赞同：2
> 
> 时间：2013-03-25T19:42:58.523
> 
> 标签：c#, excel, visual-studio-2010

我将我的 excel 文档作为字节 [] (blob) 获取，而不是将其写入磁盘，然后打开它，我正在寻找一种直接从流中打开的方法。谷歌搜索给我带来了几个结果，比如[http://msdn.microsoft.com/en-us/library/office/ff478410(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/office/ff478410(v=office.14).aspx)，因为我们在目标机器上安装了 Office 2010，所以这是正确的。

我要做的第一件事是添加对 DocumentFormat 的引用，但它没有列出？我是否必须浏览到二进制文件才能添加它？

但说真的 Msoft 只提供了一个采用字符串路径的开放方法？我必须做错事，因为他们至少不会有流的重载是没有意义的？？？

这是我的代码，我看到的只是一个采用字符串路径的 Open 选项？

```
if(!initialized)
 Init();
workbooks =application.Workbooks;
workbook = workbooks.Open("string file path"); 
```

所以我真的对 DocumentFormat 不感兴趣，除非我必须这样做。我想要做的是从流中打开而不写入磁盘......除非我真的必须这样做？

# javascript - 如何缓存 DOM 元素？

> ID：15623330
> 
> 赞同：2
> 
> 时间：2013-03-25T19:43:05.147
> 
> 标签：javascript, jquery

我知道`$('#Counter')`一遍又一遍地引用是一个坏主意，因为您“每次都跳入 DOM”。

但这更好吗？

```
Counter = $('#Counter'); 
```

然后在循环内：

```
Counter.val()++ 
```

**编辑：**

更正上面的代码段，应该是：

```
Counter.val(Counter.val()+1); 
```

还是在做同样的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T19:44:10.903

对于您描述的情况，最好在进入迭代语句之前将 jQuery 对象保存在一个变量中，您可以在其中重复使用该对象。它将防止在每次迭代时遍历 DOM 树。此外，通过 ID 搜索可能是不明智的，但是通过类名或使用复合选择器进行查询可能会大大降低性能。

```
var $Counter = $("#Counter");
for (...) {
    $Counter.val(function(i, val) { return +val + 1; });
    ...
} 
```

注意`val()`在这种情况下使用函数作为参数更合理。

# amazon-rds - Nimbus 是否支持 Amazon-RDS？

> ID：15623332
> 
> 赞同：0
> 
> 时间：2013-03-25T19:43:14.273
> 
> 标签：amazon-rds, nimbus, cumulus

我正在考虑将 Nimbus 用于云应用程序。我知道 Nimbus 使用[Cumulus](http://www.nimbusproject.org/docs/2.6/faq.html#cumulus)，但我不知道它是否支持[Amazon-RDS](http://aws.amazon.com/rds/)服务（它必须，因为这是一项要求）。

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:28:57.173

我向 Nimbus 支持发送了一封电子邮件，对问题的答复如下：

> 嗨佩德罗，
> 
> 抱歉，Nimbus 不支持 Amazon-RDS。

我想指出，Nimbus 的支持非常友好。我希望 Nimbus 项目好运，我希望这个答案可以为你们中的许多人省去一些麻烦。

# php - htaccess 在 Windows 7 上的 wamp 服务器下不起作用

> ID：15623334
> 
> 赞同：0
> 
> 时间：2013-03-25T19:43:16.760
> 
> 标签：php, .htaccess, mod-rewrite, wamp

我知道关于这个主题有几个问题，我已经阅读了它们，但它们似乎都没有帮助。一些常见的建议：

*   你启用了 rewrite_module

是的，我做到了，当我查看可以从 wamp 服务器图标弹出的 apache 模块列表时，它已被检查。

*   您是否在其中一项规范中添加了“AllowOverride All”。

我做到了。有不止一个，我已经尝试了几个。我不知道将它添加到哪个目录。是的，我已将它添加到目录规范中，该目录是应用程序的根目录并包含 .htaccess 文件。

据我所知，.htaccess 文件甚至从未被查看过。应该重写为存在的东西的 URL 通常返回 404，除了偶尔当我设法让整个应用程序拒绝对我的浏览器的权限 (403)

一些可能的并发症：我正在使用虚拟主机。它位于 c:/wamp/vhosts/myapp 而不是 c:\wamp\www\myapp。我的虚拟主机定义在 C:\wamp\bin\apache\apache2.2.22\conf\extra\httpd-vhosts.conf 而不是 httpd.conf。此外，我已经将我的应用程序配置为也运行 python，但是我还没有使用它。

这是周五的全新安装。我知道这是可能的，因为我以前做过。我只是不知道这次我错了哪个魔法咒语。

# sql - 无法将文件附加为数据库。SQL Azure

> ID：15623335
> 
> 赞同：-1
> 
> 时间：2013-03-25T19:43:17.207
> 
> 标签：sql, asp.net-mvc, azure, foreign-keys

我在学习SQL Azure时按照这个教程顺利完成了： [Windows Azure教程](http://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/)

我想创建一个类似的应用程序，但使用代码优先方法实现一个更复杂的数据库，并在键入“update-database”命令时收到以下错误：

```
Cannot attach the file 'c:\users\dadler\documents\visual studio 2012\Projects\EliteTrainingAzure\EliteTrainingAzure\App_Data\EliteTrainingAzure.Models.EliteTrainingDB.mdf' as database 'EliteTrainingAzure.Models.EliteTrainingDB'. 
```

这是我的连接字符串：

```
 <add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-EliteTrainingAzure-20130325095843;User Intance = True;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-EliteTrainingAzure-20130325095843.mdf" providerName="System.Data.SqlClient"/> 
```

最后，这是我如何处理外键创建的示例：

```
namespace EliteTrainingAzure.Models 
```

{ public class Client { [Key] public int ClientID { get; 放; }

```
 public int GoalID { get; set; }
    [ForeignKey("GoalID")]
    public Goal Goal { get; set; }

    public int TrainerID { get; set; }
    [ForeignKey("TrainerID")]
    public Trainer Trainer { get; set; }

    public string ClientName {get; set;}
    public string ClientAddress { get; set; }
    public string ClientCity { get; set; }
    public string ClientState { get; set; }
    public string ClientZip { get; set; } 
```

如果有人能指出我如何解决这个错误的正确方向，那就太好了。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:45:54.667

我在本地项目中不时遇到同样的问题。

虽然我还没有确定原因，但这似乎是一种解决方法：

将 Initial Catalog 和 .mdf 文件重命名为新值并再次运行 Update-Database。

例如：

```
...Initial Catalog=aspnet-EliteTrainingAzure-20130325095843;... 
```

至

```
...Initial Catalog=aspnet-EliteTrainingAzure-xxx;... 
```

和

```
...AttachDBFilename=|DataDirectory|\aspnet-EliteTrainingAzure-20130325095843.mdf" 
```

至

```
...AttachDBFilename=|DataDirectory|\aspnet-EliteTrainingAzure-xxx.mdf" 
```

似乎也可以将连接字符串恢复为原始命名，并重命名实际的 .mdf 文件。

注意：我不知道这是否意味着底层数据库系统或数据迁移模型数据库被“孤立的”数据库引用弄乱了。*Update-Database 进程在处理新*名称时似乎没有问题。

注意：请记住，这是一种解决方法，而不是解决方案。:)

西居尔

# core-data - 在 UITableView 中限制 NSFetchedResultsController 的结果

> ID：15623339
> 
> 赞同：1
> 
> 时间：2013-03-25T19:43:26.303
> 
> 标签：core-data, uitableview, nsfetchedresultscontroller, nsfetchrequest

这可能看起来很愚蠢，但我无法弄清楚如何设置 NSFetchedResultsController 的限制。即使设置了 fetchLimit 我仍然得到所有记录。我想将限制设置为 1，以便在“免费增值”模式下只有一个选项，但是当应用程序解锁时，你会得到完整的表

```
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Poem"];
fetchRequest.returnsObjectsAsFaults = NO;
fetchRequest.resultType = NSManagedObjectResultType;
fetchRequest.sortDescriptors = @[[NSSortDescriptor sortDescriptorWithKey:@"createdAt" ascending:NO selector:nil]];
fetchRequest.fetchLimit = 1;
// setup my predicate
_fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:kDataContext sectionNameKeyPath:nil cacheName:nil];
_fetchedResultsController.delegate = self; 
```

我还有一种获取数据的方法。此方法旨在在加载时以及用户解锁应用程序的完整版本时运行。

```
- (void)refetchData {
    NSError *error = nil;
    [_fetchedResultsController performFetch:&error];
    // handle error

    [self.documentsTable reloadData];
} 
```

我已经尝试将 UITableView numberOfRowsInSection 设置为返回 1，但随后我收到了警告日志。另外，我觉得这是作弊。我想保持应用程序数据驱动。

编辑：我还可以补充一点，我正在使用 AFIncrementalStore 将我的数据与 Web 服务同步。我不确定这是否会导致任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:48:39.420

如果需要，我最终硬编码 -numberOfRowsInSection 以返回 1。它仍然获取所有内容，真的不知道我能做些什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:55:26.610

奇怪的是 fetchLimit 在这里不起作用。您可以尝试在设置 fetchLimit 的同时将 fetchBatchSize 设置为 1，这应该可以。

# jquery - setRequestHeader 在 jQuery .ajax() 中不起作用

> ID：15623341
> 
> 赞同：6
> 
> 时间：2013-03-25T19:43:28.060
> 
> 标签：jquery, ajax, node.js, cache-control

使用下面的 jQuery ajax() 调用不起作用。如果我删除`beforeSend`参数它工作正常。根据 Chrome 网络检查器，它在不工作时的状态是“加载取消”。使用 jQuery 1.7.2 和 1.9.1 以及 Chrome、Safari 和 Firefox 进行测试。无论我输入什么参数都会失败`setRequestHeader`（例如 "test" ， "true" 也会失败）。当我`beforeSend`在请求标头中包含以下内容时：`Access-Control-Request-Headers:accept, cache-control, origin`。如果重要，`api_url`则位于不同的子域上，但我们在服务器上设置了 CORS，因此它在所有其他情况下都可以正常工作。我需要设置 Cache-Control 标头，因此不能在发送之前删除。

```
$.ajax({
    url: api_url, 
    beforeSend : function (xhr){xhr.setRequestHeader('Cache-Control', "public");} , 
    dataType: "json", 
    success: successCallback, 
    error: APIError 
}); 
```

更新：它似乎正在到达 node.js 服务器，因为它以 200 作为状态响应。问题是否可能是服务器如何响应标头？同样，无论我使用什么键/值参数，它都会这样做，因此它不会与缓存相关。

update2：在我的控制台中，我收到“Access-Control-Allow-Headers 不允许请求标头字段 Cache-Control”。我试过用谷歌搜索，但离答案更近了。似乎不接受任何请求标头字段。这是否意味着必须将 node.js 配置为接受标头？

# c - 使用 CPU 计数器与 gettimeofday？

> ID：15623343
> 
> 赞同：2
> 
> 时间：2013-03-25T19:43:30.690
> 
> 标签：c, linux, profiling

我想使用 Linux 分析 C 中的一些代码。我通常只做通常的`gettimeofday()`功能，它们易于安装、易于理解和便携。有人问我为什么不使用 CPU 计数器或 RDTSC 来分析代码，但尽管我知道 RDTSC 可能更精确，但我不能赞成或反对其中一个。所以，我的问题是：在其他条件相同的情况下，人们会使用通常的时间函数或 RDTSC 来分析代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:11:32.520

对于大多数目的，我会使用`clock_gettime`. 正如其他人所说，`gettimeofday`它已经过时并且其分辨率太低，无法测量低于 10000 个周期范围内的时间。请注意，您所采用的差异`clock_gettime` *可能会*反映出系统调用开销（内核进入/退出成本），但在现代 x86_64 Linux 系统上，`clock_gettime`实际上完全在用户空间中运行并在后台使用`rdtsc`，因此它最终只是一个更便携、更干净的抽象版本`rdtsc`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T20:15:43.727

CPU 计数器和挂钟是用于不同目的的不同工具。

**何时使用挂钟：**

当您想以标准时间单位（例如秒）测量时间时。如果您想测量 X 任务需要多长时间，请使用挂钟。

例子：

*   `clock()`
*   `gettimeofday()`
*   `clock_gettime(2)`
*   ETC...

**何时使用 RDTSC：**

如果您希望以尽可能高的精度测量两个不同任务的*相对时间，那么 RDTSC 可能是合适的。*

RDTSC 测量自 CPU 启动以来经过的伪周期数。通常（但不总是），这等于处理器的 CPU 时钟速度。但是，如果不根据挂钟实际测量它，就很难确定“每秒滴答声”的确切数量。

但是，RDTSC 的开销与时间函数的开销一样低。*因此，当您将一种实现与另一种实现进行比较以确定哪个更快*时，它非常适合微优化。（相对于它需要多少绝对时间）

* * *

其他需要注意的事项：

*   在大多数情况下，使用挂钟可以很好地完成大多数基准测试目的。所以 RDTSC 的使用非常有限。尽可能坚持使用标准化功能。
*   高精度挂钟通常在 RDTSC 之上实现。因此，如果您尝试使用 RDTSC 获得对挂时的高精度测量，您将只是在重新发明轮子。

[附带说明一下，我使用 RDTSC 既可以查看 RNG，也可以作为我的超频基准测试的反作弊措施。]

# android - 是否有 isListening() 方法或... 如何实现 isListening()

> ID：15623344
> 
> 赞同：3
> 
> 时间：2013-03-25T19:43:39.383
> 
> 标签：android, speech-recognition

SpeechRecognizer类包括[isRecognitionAvailable](http://developer.android.com/reference/android/speech/SpeechRecognizer.html) ()、startListening() 和 stopListening() 等方法，但没有检查当前是否*正在*侦听的方法。

我也检查了[RecognitionListener](http://developer.android.com/reference/android/speech/RecognitionListener.html)类，它也没有这样的“isListening()”方法。

知道**为什么吗？**（例如，它无用/无意义，应用程序员太容易实现等）

如果确实没有 SDK API 提供此功能，那么实现这种“isListening()”方法的最佳方法是什么？

是否像在 onReadyForSpeech() 中设置一个布尔值并在 onEndOfSpeech() 中清除它一样简单？

还是我需要更复杂的东西，比如计数器……甚至是[原子](http://developer.android.com/reference/java/util/concurrent/atomic/AtomicInteger.html)计数器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T21:07:29.337

首先，定义“听”。它是否从您开始：

*   称为 startListening() ？
*   收到 onReadyForSpeech() 了吗？

我相信这两个（有效和有用的）场景之间的区别是将实现留给 API 用户的原因。

然后，正如@HoanNguyen 所说，在 RecognitionListener 中声明一个布尔数据成员：

*   *在*您调用 startListening() 或输入 onReadyForSpeech()后立即设置它。是你的电话...
*   在 onResults()、onError()**和** 调用 SpeechRecognizer.cancel()*之后立即重置它。*

注意：正如@HoanNguyen 正确指出的那样，在您调用 stopListening() 后立即重置该布尔值是不正确的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T19:49:34.443

你知道你什么时候打过电话`startListening()`，你也知道你什么时候打过电话`stopListening()`。为什么需要听众？

只需设置一个标志来告诉自己您处于什么状态（听或不听）。

# javascript - 无法获取我在 javascript 中设置的标签的值

> ID：15623346
> 
> 赞同：2
> 
> 时间：2013-03-25T19:43:45.483
> 
> 标签：javascript, vb.net

我正在使用 javascript 设置两个标签的值。当我设置两个标签的文本时，我的代码工作正常。但是，我想在单击按钮时使用标签文本，但我无法获取标签的值。

我的javascript是这样的：

```
<script type="text/javascript" language="javascript">
    function getIndex(index, x,fid) {
    // alert('You have Selected Flight Number:' + index);

    if (x == "a") {
       document.getElementById('lblAmount').innerHTML = index;
       document.getElementById('lblFlight1').innerHTML = fid;
    }
    if (x == "b") {
       document.getElementById('lblAmount1').innerHTML = index;
       document.getElementById('lblFlight2').innerHTML = fid;
    }

    var am1, am2, amount;
    am1 = document.getElementById('lblAmount').innerHTML;
    am2 = document.getElementById('lblAmount1').innerHTML;
    amount = parseFloat(am1) + parseFloat(am2);

    document.getElementById('Amount').innerHTML = amount.toString();
}
</script> 
```

我的两个标签是：

```
<asp:Label ID="lblFlight1" runat="server" Text=""></asp:Label>
<asp:Label ID="lblFlight2" runat="server" Text=""></asp:Label 
```

我获取标签值的代码：

```
Dim f1 As String = lblFlight1.Text
Dim f2 As String = lblFlight2.Text
Response.Redirect("AirPrice.aspx?Flight1=" & f1 & "&Flight2=" & f2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:13:58.903

如果我错了，有人会纠正我，但标签不保持视图状态，即。如果您在客户端更改它，它不会发回服务器，服务器只知道原始值。

然而，隐藏字段确实保持视图状态，因此您可以将文本放入隐藏字段。

在 jQuery 中设置值

```
$("#hiddenfieldid").val("value in here"); 
```

然后VB

```
Dim f1 As String = hiddenfield1.value
Dim f2 As String = hiddenfield2.value
Response.Redirect("AirPrice.aspx?Flight1=" & f1 & "&Flight2=" & f2) 
```

# delphi - 如何动态创建与顶部对齐但在其他对齐控件之后的控件？

> ID：15623347
> 
> 赞同：8
> 
> 时间：2013-03-25T19:43:49.320
> 
> 标签：delphi, controls, alignment, delphi-xe2

在这种特殊情况下，我使用[PowerPDF](http://www.est.hi-ho.ne.jp/takeshi_kanno/powerpdf/)库来动态构建 PDF 文档，但这同样适用于在父控件内按顺序动态对齐控件的一般概念。在这个库中，`TPRPage`是包含所有元素控件的基本控件，在这种情况下，是`TPRLayoutPanel`.

动态添加控件时我会做什么：

1.  创建控件 ( `TPRLayoutPanel`)
2.  设置控件的父级 ( `TPRPage`)
3.  将控件顶部对齐 ( `PRLayoutPanel.Align:= alTop;`)

问题是它被强制到页面的最开始（顶部）而不是最后（底部）。

我试过设置它的顺序`PRLayoutPanel.SendToBack;`，`PRLayoutPanel.BringToFront`但没有运气。

如何在父控件中按顺序动态创建和对齐多个控件？我目前唯一的解决方法是以相反的顺序（从头到尾）添加控件，这是非常不必要的。

这是我的通用函数，它在此父项中创建对齐控件的每个新实例：

```
function TfrmReport.InsertPanel: TPRLayoutPanel;
begin
  Result:= TPRLayoutPanel.Create(PRPage);
  Result.Parent:= PRPage;
  Result.Align:= alTop;
  Result.Height:= 40; //Default, may change later
end; 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-25T22:04:14.413

再一次，[`DisableAlign`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Controls.TWinControl.DisableAlign)为了[`EnableAlign`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Controls.TWinControl.EnableAlign)救援：

```
procedure TForm1.FormCreate(Sender: TObject);
var
  I: Integer;
  P: TPanel;
begin
  DisableAlign;
  try
    for I := 0 to 4 do
    begin
      P := TPanel.Create(Self);
      P.Caption := IntToStr(I);
      P.Align := alTop;
      P.Parent := Self;
    end;
  finally
    EnableAlign;
  end;
end; 
```

### 解释：

**启用**对齐后，每次向容器添加控件（在此特定情况下为表单本身）都将重新评估该容器内所有其他控件的所有对齐（和锚点）设置。如果该控件没有`Top`设置特定属性，`Top`则为`0`. 当已经有另一个控件与顶部对齐时，则有两个带有 的控件`Top = 0`，即将插入的控件获胜。我（目前）对此没有深入的解释，但确实如此，并且位置顺序确实与创建顺序相反。

现在，当容器的对齐被**禁用**时，只需插入连续添加的控件，而它们的所有定位属性都不会改变。`Controls`当再次启用对齐时，所有这些控件都以相同的方式重新评估，不同之处在于它按照数组中索引的顺序在一个循环中进行；即它们的创建顺序。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-25T19:48:16.653

您需要将该`Top`属性设置为上一个面板的底部。例如，像这样：

```
PanelTop := 0;
for i := 0 to 5 do
begin
  Panel[i] := TPanel.Create(Self);
  Panel[i].Parent := Self;
  Panel[i].Height := PanelHeight;
  Panel[i].Align := alTop;
  Panel[i].Top := PanelTop;
  inc(PanelTop, PanelHeight);
end; 
```

要将其放入您的代码中，您必须跟踪最近添加的面板的位置。也许您可以在函数`var`中添加一个参数`InsertPanel`：

```
function TfrmReport.InsertPanel(var PanelTop: Integer): TPRLayoutPanel;
begin
  Result:= TPRLayoutPanel.Create(PRPage);
  Result.Parent:= PRPage;
  Result.Top:= PanelTop;
  Result.Height:= 40;
  Result.Align:= alTop;
  inc(PanelTop, Result.Height);
end; 
```

我相信你明白了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T20:11:16.330

您可以使用 alCustom 对齐类型并通过 CustomAlignPosition 方法控制所有面板位置（您需要在父控件中覆盖它）。这将为您提供更大的灵活性和控制力。

# jquery-ui - jquery-ui 连接可排序：如何隐藏/显示第一项？

> ID：15623349
> 
> 赞同：0
> 
> 时间：2013-03-25T19:43:51.793
> 
> 标签：jquery-ui, jquery-ui-sortable

我有这个 html 标记：

```
<ul id="sortable1" class="connectedSortable">
    <li class="ui-state-default">Item 1</li>
    <li class="ui-state-default">Item 2</li>
    <li class="ui-state-default">Item 3</li>
    <li class="ui-state-default">Item 4</li>
    <li class="ui-state-default">Item 5</li>
</ul>

<ul id="sortable2" class="connectedSortable">
    <li class="ui-state-highlight">Drop item here</li>
</ul> 
```

当至少一个项目从#sortable1 删除到#sortable2 时，我想将“隐藏”类添加到：

```
<li class="ui-state-highlight">Drop item here</li> 
```

只是为了......隐藏它，因为这个“占位符”现在没有用了，所以它变成：

```
<ul id="sortable2" class="connectedSortable">
    <li class="ui-state-highlight hide">Drop item here</li>
</ul> 
```

然后，如果所有项目都从#sortable2 退回到#sortable1，`hide`则应再次删除该类，以显示“占位符”

请问有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:12:16.457

好的，我知道了...

```
<ul id="sortable2" class="connectedSortable">
    <li class="ui-state-highlight placeholder">Drop item here</li>
</ul>

...

$('#sortable2').sortable({
    items: 'li:not(.placeholder)',
    connectWith: '.connectedSortable',
    update: function(){
        var placeholder = $(this).children('.placeholder');
        ($(this).children().length > 1) ? placeholder.hide() : placeholder.show();
    }
}).disableSelection(); 
```

# mysql - 从 MySQL 中的一组类似名称的表中选择

> ID：15623351
> 
> 赞同：0
> 
> 时间：2013-03-25T19:43:55.527
> 
> 标签：mysql, sql

我有多个表的表名以“事件”字尾结尾——如“TcpEvent”、“RdpEvent”、“WebEvent”等。表模式很少有常见的列，如“ID”、“名称”、“日期”。

是否有任何通用 SQL，以便我可以使用简单的 SINGLE 选择获取所有常用列内容？我尝试使用以下 SQL - 但它不起作用。

```
SELECT ID, Name FROM (SELECT TABLE_NAME FROM ( 
    SELECT DISTINCT TABLE_NAME FROM INFORMATION_SCHEMA.COLUMNS 
      WHERE TABLE_NAME LIKE '%Event') AS T) AS T; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:46:52.813

根据这些表和它们共有的列创建一个视图：

```
create v_events as 
    select id, name, date, 'tcp' as eventtype from tcpEvent union all
    select id, name, date, 'rdp' as eventtype from rdpEvent union all
    select id, name, date, 'web' as eventtype from webEvent; 
```

另一种方法是使用动态 SQL（通过`prepare`staetment）。拥有一个共同的观点可能是最简单、最可维护的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:19:16.813

您可以使用动态 SQL 来实现这一点，示例如下：（可能会给您提示）

```
 declare @str varchar(max)
declare @str1 varchar(100)
set @str = 'select ID,Name from '
set @str1 = 'select ID,Name from '
select @str = @str +  TABLE_NAME + ' UNION ALL ' + @str1 FROM (SELECT Distinct TABLE_NAME FROM INFORMATION_SCHEMA.COLUMNS 
      WHERE TABLE_NAME LIKE '%Event') A
IF CHARINDEX('UNION ALL',@str, 0) > 0
    SET @str = SUBSTRING(@str,0, len(@str)-len('UNION ALL select ID,Name from '))
print @str 
```

# django - django查询select_related跨度关系

> ID：15623352
> 
> 赞同：0
> 
> 时间：2013-03-25T19:43:57.103
> 
> 标签：django, join

嗯，有一个复杂的查询。假设我们有 3 张桌子。

```
class Logs:
    user = ForeignKey(User)
    ...

class User:
    name = CharField()
    ...

class User_Info:
    user = ForeignKey(User)
    address = CharField()
    ... 
```

我想要做的是通过用户关联表 Logs 和 User_Info。基本上，我想做一个连接，以获取一个新表，该表将包含来自日志、用户和来自 User_Info 的地址的所有字段。我知道 select_related。但它只能结合日志和用户。

如何让 User_Info 参与其中？我想最小化数据库调用。所以理想的答案应该是一个数据库命中。

编辑：我很欣赏下面的回答。我只想为这个问题提供我的最终解决方案。

如果您确实有一些复杂的查询，只需使用 objects.raw()。它将解决您的大部分问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:58:01.307

**模型.py**

```
class User:
    name = CharField()

    def logs(self):
        return Logs.objects.filter(user=self)

    def info(self):
        return User_Info.objects.filter(user=self) 
```

**视图.py**

```
users = User.objects.filter() 
```

**模板**

```
{% for user in users %}
    {{ name }}

    {% for log in user.logs %}
        //log fields
    {% endfor %}

    {% for info in user.info %}
        //info fields
    {% endfor %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T19:54:43.290

首先，数据库调用的数量不一定与代码行数有关——Queryset API 中的许多方法都是惰性的。

看起来您实际上在`User`and之间存在一对一的关系`User_Info`。在这种情况下，您可以使用 a`OneToOneField`而不是 a `ForeignKey`。然后，您可以直接从`User`模型访问您的信息。请参阅 [https://docs.djangoproject.com/en/dev/topics/db/examples/one_to_one/](https://docs.djangoproject.com/en/dev/topics/db/examples/one_to_one/)

# java - 调用 sqlite onUpgrade 问题

> ID：15623353
> 
> 赞同：1
> 
> 时间：2013-03-25T19:44:01.997
> 
> 标签：java, android, sqlite

我有 2 个数据库。1 是一个 MySQL，我使用游戏 API 来收集有关游戏的最新信息。我拥有的另一个数据库是我在我的应用程序中创建的 sqlite 数据库（两者都有相同的表和列）。我希望它如何工作是，应用程序启动然后将检查 MySQL 版本（每当我玩的游戏有更新时更新）我检查 MySQL 版本是否与 sqlite 版本匹配并在需要时更新。

我遇到的困惑是我不希望用户在发生较小的 MySQL DB 更改时更新整个应用程序（更改项目统计信息、添加项目、添加角色或能力统计字符被调整）因为我在这里和 Vogella 教程中看到的是我似乎需要手动更改：

```
private static final int DATABASE_VERSION = 1;  //<<<<<Manually change this
...

public MySQLiteHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
} 
```

这违背了我试图实现的目的。

1）有没有办法更新 DATABASE_VERSION 而无需在代码中手动更改它？

2）我可以直接调用 onUpgrade(db, oldVersion, newVersion) 并输入我想要的参数，还是这是一个非常糟糕的主意，应该通过它来处理`getWritableDatabase()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T19:48:58.067

仅当表结构发生变化时，即添加或删除表或当某些列发生更改、添加或删除时，才会更改数据库版本。在这种情况下并且安装了新版本的应用程序时，Android 会检测到新的数据库版本并调用`onUpgrade`.

如果只是更新表中的数据，表结构没有变化，因此不需要增加数据库版本号。

在您的情况下，您可以在其中一列中添加一些序列号或时间戳，以标识当前数据版本并将其与存储在相应 SQLite 数据库表中的版本或时间戳进行比较。

当这些不同时，您可以更新 MySQL 数据库中的数据。

**更新**：

当您更新应用程序但表结构未更改时，数据库版本应保持不变，并且数据库及其数据保持不变。

当您更新应用程序并且表结构发生更改时，您会增加数据库版本号。Android 比较当前版本和新版本并调用`onUpgrade`. 现在，您可以执行必要的步骤来升级数据库、更改数据库布局、填充新表或列，无论需要做什么。您甚至可以销毁所有内容并从头开始构建新数据库。

当您的应用程序运行并从主服务器数据库中提取当前数据时，所有这些都独立于日常更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T19:58:52.867

听起来您正在从中央 MySQL 数据库中读取您的模式，并且只是在 Android 设备上保留一个本地副本。当您更改中央数据库的架构时，是的，手动更改本地副本很愚蠢。

> 1）有没有办法更新 DATABASE_VERSION 而无需在代码中手动更改它？

`DATABASE_VERSION`就像任何其他变量一样，如果你想从外部控制它的值，你可以。老实说，你甚至不需要这个变量，它只在 SQLiteOpenHelper 的[构造函数](https://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#SQLiteOpenHelper%28android.content.Context,%20java.lang.String,%20android.database.sqlite.SQLiteDatabase.CursorFactory,%20int%29)中使用：

```
SQLiteOpenHelper(Context context, String name, 
        SQLiteDatabase.CursorFactory factory, int version) 
```

SQLiteDatabase 维护它自己的私有版本号。

> 2) 我可以直接调用 onUpgrade(db, oldVersion, newVersion) ...吗？

我不建议这样做，因为您不会更改内部版本号并跳过 SQLiteOpenHelper 使用的其他内部检查。
是的，您可以手动执行其中的许多检查，但是对于您创建的每个解决方法，您都在降低 SQLiteOpenHelper 的用处。在某些时候，您最好[`Context#openOrCreateDatabase()`](https://developer.android.com/reference/android/content/Context.html#openOrCreateDatabase%28java.lang.String,%20int,%20android.database.sqlite.SQLiteDatabase.CursorFactory%29)直接调用，因为您将创建自己的版本控制代码。

# css - 如何创建对角线文本以在所有现代浏览器中正确显示

> ID：15623356
> 
> 赞同：0
> 
> 时间：2013-03-25T19:44:06.897
> 
> 标签：css, cross-browser

我在网格的顶部水平条上有以下带有对角线文本的网格：

[http://jsfiddle.net/franco13/KjQbV/1/](http://jsfiddle.net/franco13/KjQbV/1/)

它在 Firefox、Chrome 和 Safari 中正确显示

我无法让它在 IE9+ 和 Opera 中正确显示。

感谢您的帮助。

**我的 HTML：**

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta content="IE=9" http-equiv="X-UA-Compatible">
</head>
<table>
<tr id="userGroups">
<th class="no-rotate">List Items</th>
<th class="rotate"><div class="intact">Column 1</div></th>
<th class="rotate"><div class="intact">Column 2</div></th>
<th class="rotate"><div class="intact">Column 3</div></th>
<th class="rotate"><div class="intact">Column 4</div></th>
<th class="rotate"><div class="intact">Column 5</div></th>
<th class="rotate"><div class="intact"></div></th>
</tr>
<tr>
<td class="menuItems no-indent">Row 1</td>
<td class="rights">x</td>
<td class="rights">x</td>
<td class="rights">x</td>
<td class="rights">x</td>
<td class="rights">x</td>
</tr>
<tr class="rowhighlight">
<td class="menuItems indent">Row 2</td>
<td class="rights">x</td>
<td class="rights">x</td>
<td class="rights">x</td>
<td class="rights">x</td>
<td class="rights">x</td>
</tr>
</table> 
```

**我的 CSS：**

```
table {
  margin-bottom: 20px;
}
tr#userGroups {
  border-bottom: solid 1px #999;
}
th.no-rotate {
  text-align: left;
  vertical-align: bottom;
}
th.rotate {
  -o-transform-origin: 325% 50%; /*Opera*/
  -moz-transform-origin: 325% 50%; /*Firefox*/
  -ms-transform-origin: 325% 50%; /*IE*/
  -webkit-transform-origin: 325% 50%; /*Safari*/
  transform-origin: 325% 50%;
  -o-transform: rotate(300deg); /*Opera*/
  -moz-transform: rotate(300deg); /*Firefox*/
  -ms-transform: rotate(-120deg); /*IE*/
  -webkit-transform: rotate(300deg); /*Safari*/
  transform: rotate(300deg);
  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1); /*Internet Explorer*/
  -ms-writing-mode: bt-lr;
  writing-mode: bt-lr;
  position: relative; /* must have this whenever z-index is used */
  white-space: nowrap;
  z-index: 1; /* positioned under z-index:2 */
}
div.intact {
  display: inline-block;
  height: 150px;
  width: 30px;
}
tr.rowhighlight {
  background-color: #dedede;
}
td.menuItems {
  width: 220px; /* only place that controls width of the UGAR left column */
}
td.no-indent {
  font-weight: bold;
}
td.indent {
  padding-left: 12px;
}
td.rights {
  position: relative; /* must have this whenever z-index is used */
  width: 36px;
  z-index: 2; /* positioned over z-index:1 */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:16:12.953

Transform 是 css3 标准的一部分。旧浏览器不支持。

在以下链接中，您可以看到浏览器如何支持旋转的概述：

[http://caniuse.com/#feat=transforms2d](http://caniuse.com/#feat=transforms2d)

如您所见，每个浏览器在转换之前仍然需要一个前缀，并且不支持 IE8 或更低版本。一个特定的 IE 解决方法是应用 filter: 标签。

您可以通过以下链接找到翻译： [http ://www.useragentman.com/IETransformsTranslator/](http://www.useragentman.com/IETransformsTranslator/)

# php - 如何区分两个同名的多选列表

> ID：15623357
> 
> 赞同：4
> 
> 时间：2013-03-25T19:44:07.220
> 
> 标签：php, html, forms, post

对于我正在构建的系统，我需要查看第一个列表中的哪些选项（带有 POST 请求）以及第二个列表中的哪些选项。

```
<form method="post">
    <select name="cars[]" multiple>
        <option selected>test</option>
        <option selected>test2</option>
        <option>test3</option>
        <option>test4</option>
    </select>
    <select name="cars[]" multiple>
        <option>hai</option>
        <option>hai2</option>
        <option selected>hai3</option>
        <option selected>hai4</option>
    </select>
    <input type="submit">
</form> 
```

现在他们是这样进来的：

```
Array
(
    [cars] => Array
        (
            [0] => test
            [1] => test2
            [2] => hai3
            [3] => hai4
        )
) 
```

实际上，我想检索除“haiX”选项之外的“testX”选项。现在我看不出哪个来自第一个列表，哪个来自第二个。当然，我知道我也可以使第二个列表的名称与第一个列表的名称不同，但我想这样做是有充分理由的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:58:27.057

这可以通过为每个选择列表使用隐藏字段（输入）来完成。您可以根据需要命名它们，这就是如何知道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:07:26.047

通过创建以下形式的多维数组来划分类别：

```
<form method="post">
    <select name="cars[0][]" multiple>
        <option selected>test</option>
        <option selected>test2</option>
        <option>test3</option>
        <option>test4</option>
    </select>
    <select name="cars[1][]" multiple>
        <option>hai</option>
        <option>hai2</option>
        <option selected>hai3</option>
        <option selected>hai4</option>
    </select>
    <input type="submit">
</form> 
```

然后像这样阅读：第一组 $_POST['cars'][0] 和第二组 $_POST['cars'][1]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T20:05:59.590

我做的：

```
<?php

    if (isset($_POST['cars']))
    {
      $test = array();
      $hai = array();

      $lista = $_POST['cars'];
      foreach ($lista as $key ) {
          if (substr($key,0,1)=="t")
          {
            $test[] = $key;
          }
          else
          {
            $hai[] = $key;
          }
      }
    }
    var_dump($test);
    var_dump($hai);
    ?>

    <form method="post">
        <select name="cars[]" multiple>
            <option selected>test</option>
            <option selected>test2</option>
            <option>test3</option>
            <option>test4</option>
        </select>
        <select name="cars[]" multiple>
            <option>hai</option>
            <option>hai2</option>
            <option selected>hai3</option>
            <option selected>hai4</option>
        </select>
        <input type="submit">
    </form> 
```

在本地主机上测试。

萨卢多斯 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T19:49:12.840

您应该能够像这样检索它们：

`$_POST['cars'][0]`指的是“测试”集

`$_POST['cars'][1]`指“hai”集

# apache-flex - 如何测试项目渲染器的性能？

> ID：15623359
> 
> 赞同：0
> 
> 时间：2013-03-25T19:44:14.263
> 
> 标签：apache-flex, flex-spark

我刚刚观看了[有关 Flex 和 Flash 开发的性能提示和技巧的](http://tv.adobe.com/watch/max-2010-develop/performance-tips-and-tricks-for-flex-and-flash-development-/)视频，它列出了在使用和创建 Flex 时要衡量的 3 件事。

*   创建
*   验证
*   渲染

我如何在我自己的项目中测量这些项目？就我而言，更具体地说，对于这个问题，我如何测试创建我的项目渲染器、验证它并渲染它需要多长时间？

所有这些事件的总和是我在测试项目渲染器性能时应该使用的总时间吗？我的意思是一旦它被创建，那么重要的是渲染和验证是否正确？

我的意思是，如果我有一个项目渲染器，我认为我可以使用以下代码找出创建时间：

```
 <itemrenderer initialize="trace('initialized at='+getTimer())" creationComplete="trace('created at='+getTimer())" /> 
```

不确定这是否正确。但是验证和渲染呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:33:26.243

你在正确的轨道上。

要点是从 getTimer 获取两个值并使用差值来确定操作花费了多长时间。

理想情况下，您首先 getTimer() 将在构造函数中。如果您正在处理 MXML 组件；没有构造函数，所以我会使用 preinitialize 事件。我们可以称这个数字为 timer1。

组件初始化完成时会触发 creationComplete 事件。这包括第一个“渲染”事件。我们可以称它为 nnumber timer2。

履行：

```
timer2-timer1 
```

跟踪 Flex 组件生命周期的创建部分。这也将包括第一个渲染过程。

出于 Flex 组件的目的；我会说 Render 是运行 commitProperties()、measure() 和 updateDisplayList() 的过程。跟踪这个的技巧是你不知道哪个——如果有的话——会被调用，因为它取决于什么是无效的。

验证是组件运行时的一个持续过程；这会导致组件被重新渲染。

我可能会听[渲染](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#event%3arender)事件来启动你的计时器；以及用于跟踪组件渲染何时完成 的[updateComplete事件。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/UIComponent.html#event%3aupdateComplete)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:21:00.813

这是我到目前为止所得到的：

```
timeLabel.text += "\nAbstractDataGridItemRenderer: " + testGridItemRenderer(AbstractDataGridItemRenderer, data, 50); 
```

和功能：

```
 public function testItemRenderer(renderer:Class, data:Object, iterations:int = 1000, resetTime:Boolean = false):int {
            var layoutManager:LayoutManager = LayoutManager.getInstance();
            var time:int = getTimer();
            var itemRenderer:IItemRenderer;

            for (var i:int;i<iterations;i++) {
                itemRenderer = new renderer();
                itemRenderer.data = data.name + i;
                itemRenderer.width = 300;
                itemRenderer.height = 30;
                itemRenderer.y = i * 30;
                itemRenderer.label = LabelUtil.itemToLabel(data, "label");
                addElement(itemRenderer);
                //trace("initialized = " + ILayoutManagerClient(itemRenderer).initialized);
                layoutManager.validateClient(ILayoutManagerClient(itemRenderer), false);
                //trace("initialized = " + ILayoutManagerClient(itemRenderer).initialized);
            }

            if (resetTime) {
                time = getTimer();
                for (i=0;i<iterations;i++) {
                    itemRenderer.data = data.name + i;
                    itemRenderer.label = LabelUtil.itemToLabel(data, "label");
                    //addElement(itemRenderer);
                    //trace("initialized = " + ILayoutManagerClient(itemRenderer).initialized);
                    layoutManager.validateClient(ILayoutManagerClient(itemRenderer), false);
                    //trace("initialized = " + ILayoutManagerClient(itemRenderer).initialized);
                }
                return getTimer() - time;
            }

            return getTimer() - time;
        } 
```

我不知道这是否正确，但它给了我一些可以使用的数字。我宁愿不把它添加到舞台上，但似乎我必须这样做才能让它初始化。

> [当对象经历了布局的所有三个阶段时，初始化](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/UIComponent.html#initialized)为真：承诺、测量和布局。

更新。我添加了一个重置​​阶段。这离开了渲染阶段。

# unix - 如何修改 Amazon Machine Image 文件权限？

> ID：15623360
> 
> 赞同：1
> 
> 时间：2013-03-25T19:44:14.867
> 
> 标签：unix, permissions, amazon-ec2, file-permissions, amazon-ami

我有一个不错且稳定的 Ubuntu 12.04 [Amazon 机器映像 (AMI)](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html) ，我正在使用 pem 文件 ( )登录我的[Amazon EC2](https://aws.amazon.com/ec2/)`ssh -i dev.pem ubuntu@<instance_name>.compute-1.amazonaws.com`实例。有一天`/ubuntu`文件夹的权限发生了变化，我不再能够连接到 EC2 实例，SSH 错误是`Permission denied (publickey)`.

有什么办法可以重置该文件夹的权限吗？

感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:03:55.603

[失去对Amazon EC2](http://aws.amazon.com/ec2/)实例的访问权是一种常见的情况 - 在 Eric Hammond 的出色总结解决方案中解决了当您不知道原因时如何处理这种情况[：“我无法连接到我在 Amazon EC2 上的服务器”](http://alestic.com/2009/08/ec2-connectivity)。但是，由于您现在已经知道是什么原因导致了这种情况，您可以立即应用他[在 EC2 实例的根 EBS 卷上修复文件](http://alestic.com/2011/02/ec2-fix-ebs-root)的相应说明。

*   **注意**：这仅适用于具有基于[Amazon EBS](http://aws.amazon.com/ebs/)的[根设备存储](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/RootDeviceStorage.html)的实例，因为只有这些实例可以在不丢失根卷的情况下停止，因此请注意不要终止您的实例！

有了这个，这个过程归结为：

*   启动另一个 EC2 实例
*   停止（*不终止！*）您无法再访问的 EC2 实例
*   从停止的实例中分离 EBS 卷
*   将 EBS 卷附加到正在运行的实例
*   SSH 进入正在运行的实例
*   在正在运行的实例中挂载 EBS 卷
*   执行任何必要的修复，即根据`/ubuntu`您的情况调整权限

有关如何从命令行执行此操作的详细信息，请参阅 Eric 的说明；[显然，您也可以通过AWS 管理控制台](http://aws.amazon.com/console/)实现 SSH 访问的所有步骤，无需安装[Amazon EC2 API 工具](http://aws.amazon.com/developertools/351)，以防它们尚不可用。

# matlab - MATLAB 绘图标签/标题中的扩展 ASCII 字符

> ID：15623362
> 
> 赞同：3
> 
> 时间：2013-03-25T19:44:25.773
> 
> 标签：matlab, character-encoding, plot, extended-ascii

我需要在绘图上加上“naïve”一词，并将其保存为 PNG 和 PDF。有时它在标题或刻度标签中。无论我尝试过什么，我总是得到右箭头符号（png）或空格（pdf）而不是`ï`字符。

我研究了函数 native2unicode 和 unicode2native，但它们似乎只用于文件输入/输出。

我不敢相信这个任务在 MATLAB 中如此困难。

我在 Windows 7 下使用 MATLAB 2012b。

* * *

该符号`ï`具有 ascii 代码`0239`或十六进制`0xEF`。如果使用 输入，MATLAB 会在控制台中显示它`Alt-0239`，但显示为空方块。

![disp(ï) 例子](../Images/b34ae717ec3fbb82bb22e3a2a36f2c11.png)

MATLAB 返回 26 作为字符代码：

```
>> int32('Naïve')
ans =
          78          97          26         118         101 
```

[MATLAB 的TeX 字符序列表](http://www.mathworks.com/help/matlab/ref/text_props.html#String)中不存在此符号。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T21:31:41.887

这必须有效：

```
X=rand(10,1)
Y=rand(10,1)
plot(X,Y)
title('na\"{i}ve','interpreter','latex'); 
```

如果需要，您还可以更改字体和大小等。

顺便看看

[http://en.wikibooks.org/wiki/LaTeX/Special_Characters](http://en.wikibooks.org/wiki/LaTeX/Special_Characters)

# c# - 如何从方法访问表单标签

> ID：15623363
> 
> 赞同：-2
> 
> 时间：2013-03-25T19:44:28.497
> 
> 标签：c#, winforms

以下代码是主要问题的想法。我想要做的是，当有人按下 button1 时，会启用一个计时器来连续更改 label1 的值。现在主要问题是我需要从 TimerEventProcessor() 访问标签、文本框等表单元素，但我不能这样做。我尝试使用 Form1 formmm = new Form1(); 但仍然无法正常工作。什么都没有显示，我也没有收到任何错误。

```
 static Timer mytimer = new Timer();
    static int counter= 1;

private static void TimerEventProcessor(Object myObject, EventArgs myEventArgs)
{   mytimer.Enabled = true;
    Form1 formm = new Form1();            
    formm.label1.Text = counter;
    counter++;
}

private void button1_Click(object sender, EventArgs e)
{
   myTimer.Tick += new EventHandler(TimerEventProcessor);

   myTimer.Interval = 1000;
   myTimer.Start(); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T19:47:56.660

您需要`TimerEventProcessor`与`Timer`and`counter`字段一起使用非静态并使用`this`而不是创建新实例。也不必`myTimer.Enabled`每次都设置属性。

```
Timer mytimer = new Timer();
int counter= 1;

private void TimerEventProcessor(object sender, EventArgs e)
{  
    this.label1.Text = counter;
    counter++;
} 
```

# .htaccess - .htaccess 点域到子域

> ID：15623366
> 
> 赞同：1
> 
> 时间：2013-03-25T19:44:32.523
> 
> 标签：.htaccess, subdomain

我有一个域和一个子域。我需要临时将域中的文件夹指向子域中的同一文件夹。

示例： http: [//www.domain.com/api/](http://www.domain.com/api/) -> [http://dev.domain.com/api/](http://dev.domain.com/api/)

有没有办法用 htaccess 重写规则来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:17:20.483

将这些指令添加到您的 .htaccess （或虚拟主机配置）

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?domain.com$
RewriteRule ^api/(.*)$ http://dev.domain.com/api/$1 [R=302,NC ] 
```

# google-app-engine - 在单个请求中获取大量实体

> ID：15623369
> 
> 赞同：2
> 
> 时间：2013-03-25T19:44:38.513
> 
> 标签：google-app-engine, google-cloud-datastore

如果我想获得 50,000 个实体的属性（无过滤）并将它们全部显示在一个页面上，那么最有效的方法是什么？

我应该 fetch() 然后一次 1000 块还是使用查询迭代器？

实体本身很小，有一个或两个 StringProperty（未索引，因为不需要过滤），它们小于 50 字节。

PS：我想一次显示所有 50k（即不需要“下一个”链接）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:48:54.720

如果您定期加载 50k 个实体，最好将它们全部连接在一起并保存到 中`BlobStore`，这样您就可以轻松地一次性获取（或服务）它们。我认为将它们存储到数据库没有任何意义，尤其是因为您没有进行任何过滤或排序。

# java - 缓冲编写器 Java 限制/问题

> ID：15623374
> 
> 赞同：0
> 
> 时间：2013-03-25T19:44:56.087
> 
> 标签：java, text, bufferedwriter, writer

我有一个正在写入文本文件的缓冲写入器。由于某种原因，作者在写到一半时停止写长字符串。在 java 中使用缓冲 Writer 是否有任何已知问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T19:46:42.563

你要关闭作者吗？

```
writer.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T15:30:50.877

在将大文本写入文件之前，请使用 obj_BufferedWriter.flush()。

# search - 如何在 Joomla 3 中使用 Bootstrap 的输入附加样式搜索字段样式？

> ID：15623379
> 
> 赞同：2
> 
> 时间：2013-03-25T19:45:08.597
> 
> 标签：search, twitter-bootstrap, joomla

我正在使用 Bootstrap 在 Joomla 3 中构建一个站点。内置的搜索模块为您提供了一个搜索字段，旁边有一个提交按钮；如何将其更改为将提交按钮附加到搜索字段的“输入附加”样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:53:20.397

这是我的代码`/templates/[mytemplate]/html/mod_search/default.php`：

```
<?php

defined('_JEXEC') or die;
?>
<form action="<?php echo JRoute::_('index.php');?>" method="post" class="form-inline search<?php echo $moduleclass_sfx ?>">
    <label class="element-invisible"><?php echo $label ?></label>
    <div class="input-append">
        <input name="searchword" maxlength="<?php echo $maxlength ?>" class="inputbox<?php echo $moduleclass_sfx ?>  input-medium" type="text" size="<?php echo $width ?>" value="" placeholder="<?php echo $text ?>" />
        <button type="submit" class="button<?php echo $moduleclass_sfx ?> btn"><?php echo $text?></button>
    </div>

    <input type="hidden" name="task" value="search" />
    <input type="hidden" name="option" value="com_search" />
    <input type="hidden" name="Itemid" value="<?php echo $mitemid; ?>" />
</form> 
```

某些模块选项不会像搜索按钮的位置等那样工作。我还添加了本机占位符，而不是无论如何都不起作用的 javascript 函数。

# exit - AutoHotkey：完成后不按任何键退出脚本

> ID：15623381
> 
> 赞同：1
> 
> 时间：2013-03-25T19:45:14.113
> 
> 标签：exit, autohotkey, quit

```
Run "C:\Program Files (x86)\Total CMA Pack\totalcmd.exe"    
^!F1::    
ExitApp 
```

到目前为止，我的脚本工作，但完成后它并没有退出。我只想启动总指挥官并发送一个热键组合然后退出。在这种情况下，ExitApp 对我不起作用...:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:47:32.543

如果您想运行 TotalCommander 并发送命令，我会将其更改为：

```
SetTitleMatchMode, 2    
Run C:\Program Files (x86)\Total CMA Pack\totalcmd.exe
WinWait, TotalCommander
Send, ^!{F1}
ExitApp 
```

您的 ^!F1::ExitApp 将热键 ^!{F1} 定义为运行 Exit App 的热键。
通过将热键更改为发送命令，您将组合键发送给您的 Total Commander。

# autohotkey - 一个热字串是另一个热字串的一部分——问题

> ID：15623382
> 
> 赞同：0
> 
> 时间：2013-03-25T19:45:15.497
> 
> 标签：autohotkey

我想将 em-dash 分配给 ---，将 en-dash 分配给 --，但我永远无法制作 em-dash——它只会产生一个破折号和一个连字符；有谁知道如何正确地做到这一点？

```
:*?:---::—
:*?:--::– 
```

蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:59:36.087

您将不得不`*`在第二个主机环上省略。

```
:*?:---::—    ; this hotstring works as before
:?:--::–      ; this one now requires a EndChar to start 
```

[EndChar](http://www.autohotkey.com/docs/commands/_Hotstring.htm)是一个特殊的键，按下它可以让脚本知道您结束了热字串，并且可以更改。

# ruby-on-rails - 图形数据库——把公司押在上面？

> ID：15623384
> 
> 赞同：35
> 
> 时间：2013-03-25T19:45:16.517
> 
> 标签：ruby-on-rails, graph, neo4j, social-networking

看着 Neo4j，320 亿的关系限制让我担心（想象一下上传 500 张照片、有 500 个朋友、发表 500 条评论等的 4000 万用户，不知不觉中你已经超过 320 亿）。所以我有些担心和必须确保我对使用哪个数据库做出了最佳选择。

**不在**这里寻找主观答案或辩论 - 即。哪个更好等等 - 相反，因为*我将创业公司的未来押在使用什么图形数据库上*，所以我需要知道不同数据库存在的风险，例如 Neo4j 的关系不超过 320 亿。

现在，有几家公司将他们的图数据库称为“领先的图数据库”。但让我们**看看炒作**——哪一个拥有最多的资金支持？哪个数据库享有大型社区支持？哪一个背后有坚实的公司提供商业支持？

**哪一个最有可能足够成熟，所以如果您愿意，您可以轻松创建 Facebook？**

选择一个关于技术特性或熟悉度的图形数据库很容易——但我正在寻找的不止这些——我想确保离公司还有几年的时间。我想确保我不会基于炒作和它目前（暂时？）的势头选择使用 Neo4j……

还有什么其他图表可以与 Neo4gj 抗衡以创建一个类似于 facebook 的完整社交网络（再次，**不是在寻找更好的**，只是在寻找可靠的竞争对手）。

请不要让这变成主观的 Neo 与 Dex 辩论——请提供事实和可靠的答案。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-25T23:31:28.267

免责声明：我为 Neo4j 工作/与 Neo4j 一起工作

这里只谈成熟度（不是技术细节）—— [Neo Technology](http://neotechnology.com)作为一家拥有[50 多名员工、2500 万美元资金](http://www.crunchbase.com/company/neo-technology)和蓬勃发展的用户群（下载量达 50 万次）、每月运行 3 万个新数据库和活跃的社区的公司不会离开。您还可以查看[SO 问题](https://stackoverflow.com/tags/neo4j)以查看社区活动。

我们在许多领域拥有健康的[客户群](http://neotechnology.com/customers)，从 Adob​​e（在 Neo4j 上运行创意云）、思科（Org-Management、MDM）、Viadeo 等社交网络和许多求职公司（GlassDoor 等）到初创公司，如五十三在 iOS 上发布了流行的“Paper”应用程序。

我们的社区网站 neo4j.org 应该是一个不错的起点，您可以在那里找到[介绍性内容](http://neo4j.org/learn)以及有关[编程语言](http://neo4j.org/develop)、[驱动程序](http://neo4j.org/drivers)和[部署](http://neo4j.org/cloud)的信息，这些信息可以帮助您入门。

Emil、Ian 和 Jim 与 O'Reilly 一起编写了一本关于“图形数据库”的介绍性书籍，目前可[免费下载电子书](http://graphdatabases.com)。

所以你看到我们不仅关心我们自己的产品，还关心更大的图生态系统，还有许多[会议演讲](http://www.neo4j.org/participate/events/conferences)、[聚会小组](http://www.neo4j.org/participate/events/meetups)（全球 41 个）和对开源生态系统的支持。

希望能帮助你做出决定。

[PS关于您的担忧：今年将增加](http://blog.neo4j.org/2013/01/2013-whats-coming-next-in-neo4j.html)尺寸限制（无论如何都是人为的）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-25T19:56:34.273

因此，去年我已经测试并使用了图形数据库。我认为只有你足够了解你的数据，才能对你是否会有任何需要超过 320 亿个关系的节点做出有根据的猜测。我认为对于大多数人来说，这是一个限制的用例并不多。但这不是绝对的。

Neo4j 是一款出色的产品。有据可查，并且像 maxdemarzi 这样的人撰写了出色的博客文章 - 例如：[http](http://maxdemarzi.com/) ://maxdemarzi.com/ - 这将让任何人快速了解 Neo4j 的强大功能和复杂性。（另外他是个好人，如果你有问题，他会回答你的问题）

如果规模是一个问题，我还建议您看看 Titan - [http://thinkaurelius.github.com/titan/](http://thinkaurelius.github.com/titan/)。这背后的人很聪明，它的目的是大规模的。它不像 neo4j 那样在市场上成熟，但它具有强大的功能，并通过让您在 Cassandra、Hbase 和 BerkeleyDB 之间进行选择来进行底层存储，从而为您在优先级上提供一些灵活性。

Neo4j 是一家资金雄厚、资金雄厚、收入丰厚的公司。它不会去任何地方。泰坦较小，但我认为它处于快速上升的曲线上。

事实是，虽然这都是一个新的空间。你没有得到像 Postgres、MySql 或 Oracle 的企业实力那样成熟的东西。我们不要自欺欺人。

然而，图形数据库社区相对较小，友好且乐于助人。它举办了很棒的活动——我参加了 Neo4j 的 GraphCon 活动，这很棒，而且我参加了一些很棒的 Titan 家伙的演讲。最终，如果你想成为 Facebook，无论你从什么开始，你最终都会建立自己的基础设施。有规模，然后有你需要拥有的数据中心——小国家规模的规模。

最后一个想法。4000 万用户的问题和您的底层基础架构挑战对于一家资金雄厚的成熟公司来说是一个问题。您不会获得 4000 万用户，也不会吸引资金或产生必要的收入来资助建设自己的基础设施。你现在绝对可以计划当你有 4000 万用户时。去吧。这就是初创公司早期阶段的乐趣所在。但你更大的问题是达到你的第一个一百万或一千万。对于这种用途，无论哪种数据库都能让您以可靠的产品最快地进入市场。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-25T23:49:30.700

Michael 击败了我，但让我补充一下，回答 Neo4j，并让其他人回应其他技术。

下面的链接包含有关 Neo4j 社区状态、产品采用和产品背后公司的各种事实：

[http://blog.neo4j.org/2013/01/2012-year-in-review-happy-2013-it-looks.html](http://blog.neo4j.org/2013/01/2012-year-in-review-happy-2013-it-looks.html)

下面的链接讲述了今年的路线图，其中包括取消当前的规模限制。限制只是一种空间性能优化，当性价比略有不同时选择回来。今年我们将努力增加一些指针大小，并在接下来的几个月内发布一个没有实际上限的版本：

[http://blog.neo4j.org/2013/01/2013-whats-coming-next-in-neo4j.html](http://blog.neo4j.org/2013/01/2013-whats-coming-next-in-neo4j.html)

Neo4j 集群中有一半 Facebook 社交图的生产安装，位于高度活跃的网站背后。我所知道的唯一跨区域 Amazon 数据库集群（对于任何数据库管理系统）是在 Neo4j 上运行的：10 个实例分布在美国、亚洲和欧洲之间。世界上最大的包裹递送服务之一使用 Neo4j 完成所有包裹路由，峰值时每秒路由 2000 多个包裹。当包裹从滑槽滑下时，决定是实时做出的。他们于去年秋天上线，圣诞节能够为数以千万计的人举行。还有很多。这是一个采样。

欢迎来到令人敬畏的图表世界！无论您最终选择哪种解决方案，我们都很高兴您成为图形数据库社区的一员。

菲利普

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-05-02T14:45:12.223

[我的建议是在Blueprints](https://github.com/tinkerpop/blueprints/wiki)等标准 API 上构建您的应用程序。主蓝图页面列出了各种可用的实现。这样，您就不会被锁定，可以根据您的需求（大小、速度、价格）和当时的市场状况选择最佳实施方案。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-03-25T22:57:03.263

自 2010 年以来，我们一直在与 Neo4j 合作，不仅将我们的公司押在上面，而且还在一个开源项目上投入了大量时间 ( [http://www.ohloh.net/p/structr](http://www.ohloh.net/p/structr) )。有一篇 2012 年 2 月的博客文章，您可以在其中阅读详细信息：

[http://structr.org/blog/the-story-behind-structr](http://structr.org/blog/the-story-behind-structr)

诚然，我们公司很小。但是我们已经并且正在使用 Neo4j 完成大约十几个项目，并且对结果非常满意。

Neo4j 背后的社区充满活力、开放且总是非常支持。你应该去参加一个聚会活动来了解一下。:-)

正如理查德所说，财务事实是毫无疑问的。我觉得最令人印象深刻的是，Neo Technology 的人们尽管是一家必须产生收入的商业公司，但他们真的是了解并热爱他们所做的事情的狂热者，并且真正致力于开源模式。

所以，是的，我有偏见，但并非没有理由。:-)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-20T05:41:59.530

为了增加出色的响应，您还需要考虑许可。如果你的项目是完全开源的并且满足 GPLv3 的要求，那么像 neo4j 这样的东西是一个很好的选择。但是，如果您在专有系统中使用它，则需要购买 neo4j 企业许可证或使用许可证限制较少的其他数据库（MIT 或 Apache 2 许可证），例如 Titan。

这是查看许可证的绝佳资源：[http ://en.wikipedia.org/wiki/Graph_database](http://en.wikipedia.org/wiki/Graph_database)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-22T03:39:51.367

你所要求的和你应该关注的是两件不同的事情。

尽管以下内容不能回答您的问题，但我希望它可以帮助您和其他开发人员考虑这里真正起作用的内容：

*   要求和目标并不总是很明确——这没关系。事情发生了变化，您的产品应该能够随着这些变化而滚动。这就是初创企业的本质。因此，我建议：*专注于产品，而不是实施*。换句话说，构建到数据库实现的抽象（例如 Blueprint - Neo4j 实现），而不是实际的实现，这样您就不会被锁定或被许可问题拖累。如果需要，您将能够轻松切换数据库实现。将来，您将更清楚地了解您最初决定的正确性。最重要的是准备好在需要时进行更改。

# sql - vertica中的连接列不起作用

> ID：15623385
> 
> 赞同：-1
> 
> 时间：2013-03-25T19:45:24.540
> 
> 标签：sql, netezza, vertica

我正在尝试从 vertica 数据库表中获取插入语句导出。我正在尝试创建一个生成插入语句的查询，但我遇到了语法问题。如何在 Vertica 中执行以下操作？

```
select "insert into owner.target_tbl values ( "  ||"'"||a.Head_id||"',"||"'"||a.creation_dt||"',"||"'"||a.section"'"||");" as Query_column
from source_tbl a 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T08:57:22.157

如果您用双引号引用名称，Vertica 会认为它是一列，在您的情况下会导致错误。

解决方案将是：

*   在字符串周围使用单引号
*   如果您需要在单引号字符串中使用单引号，只需将其加倍（单引号的两倍，而不是双引号）：

    ```
    select 'insert into owner.target_tbl values (' ||'''' || 'a string' ||''', ' || 2 ||');' as Query_column;

                         Query_column                     
    ------------------------------------------------------
    insert into owner.target_tbl values ('a string', 2);
    (1 row) 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T02:20:58.953

使用单引号而不是双引号：

```
=> 选择“富”|| 来自双重的“酒吧”；
错误：列“foo”不存在
=> 选择“富”|| 来自双重的“酒吧”；
 ？柱子？
----------
 富吧
(1 行)

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T11:50:39.607

建议：确保添加案例以包装可能的空值 - 如果连接序列的参数之一为空 - 你的结果将为空。

# python - 使用 selenium 和 python 来提取 javascript 生成的 HTML？萤火虫？

> ID：15623388
> 
> 赞同：0
> 
> 时间：2013-03-25T19:45:28.017
> 
> 标签：python, selenium, firebug, web-scraping, selenium-webdriver

Python noobie 在这里。

我有一个数据收集问题。我在这个网站上，当我使用 Firebug 检查我想要的元素时，它会显示包含我需要的信息的源。但是，常规源代码（没有 Firebug）没有给我这个信息。这意味着我也无法通过普通的 selenium HTML 抓取来获取数据。

我想知道 selenium 是否可以像 Firebug 那样获取这些数据——我猜这是在页面加载 javascript 或 jquery 后生成的 HTML。

这是一张图片：http: [//i.imgur.com/CXLOHYx.png](http://i.imgur.com/CXLOHYx.png)

您可以看到我想要的信息是“灰色的”，与那里的大多数其他 HTML 不同。也许这是一个很好的线索，可以了解真正的数据类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:16:55.147

尝试使用以下代码，看看它是否有效。

```
import selenium.webdriver.support.ui

element = WebDriverWait(driver, 10).until(
        lambda driver : driver.find_element_by_xpath("fImageMap > area:nth-child(2)")
) 
```

# ios - 消失的箭头和样式iOS 上 Safari 中的元素我发现当我设置元素样式（特别是背景：透明）时，iOS 上的 Safari 中缺少箭头。你们中的任何人都经历过这种情况或知道为什么它隐藏了浏览器 chrome 吗？我可以使用条件语句为 iOS 上的 Safari 应用 CSS（没有 JS）吗？设备运行 iOS 6.1.2。这是 iOS (iPad2) 上 Safari 的屏幕截图： 这是 Safari 上的屏幕截图（桌面，Windows 7，所有其他桌面浏览器相同）： CSS: select

> ID：15623389
> 
> 赞同：3
> 
> 时间：2013-03-25T19:45:31.690
> 
> 标签：ios, css, ipad, safari

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T20:33:02.563

如果您告诉 webkit 删除所有默认样式，它会删除它，也将删除箭头（在 iOS 中）。您必须创建一个箭头并将其移到选择字段上。

我制作了[这支笔](http://codepen.io/loredonut/pen/xvtHG)，包含所有内容`.dblarrow`（CSS 和 HTML），并添加了标记为`/*Important*/`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-10T12:50:04.467

一个很晚的答案，但对人们来说是一个小技巧。

下面的代码在桌面上保持选择透明，但在 iOS 上保留默认选择样式。

```
select {
  background: rgba(0, 0, 0, 0.005);
} 
```

# windows - 由于 MSVCR110.dll，MS Visual Studio 2012 终极版无法启动

> ID：15623395
> 
> 赞同：5
> 
> 时间：2013-03-25T19:46:03.920
> 
> 标签：windows, dll, visual-studio-2012, crt

当我尝试运行 MVS 2012 时，我总是遇到错误 - 在库 DLL MSVCR110.dll 中找不到过程 _crtCreateSymbolicLinkW 的入口点。我已经从我的另一台计算机上复制了这个 dll 文件，但它没有帮助0_o。操作系统 - Windows 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T19:49:36.640

此时最好的选择是尝试修复 Visual Studio 安装

*   控制面板
*   添加/删除程序
*   选择 Visual Studio 并选择“修复”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-09T02:14:47.280

当前计算机上缺少 Microsoft Visual C++ Redistributable 从此处下载它[http://www.microsoft.com/en-us/download/details.aspx?id=30679](http://www.microsoft.com/en-us/download/details.aspx?id=30679)

# xml - VB 2010 - 读取 xls、显示、编辑和保存。使用 DataGridView

> ID：15623397
> 
> 赞同：0
> 
> 时间：2013-03-25T19:46:04.193
> 
> 标签：xml, vb.net, visual-studio-2010, excel, datagridview

我在 vb 中设置了一个 DataGridView，以显示产品 ID 和描述的列表。

每次我加载此表单时，dgv 都是空的。我可以通过直接输入单元格或使用我设置的文本框和按钮来添加它。

现在我可以将它保存为 .xls 文件，但是当该页面打开时，我很难将它读回程序中。

我应该更好地使用 xml 文件还是？我又糊涂了，啊啊啊！:)

干杯，罗比。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:25:11.080

你可以使用任何一个。您导出到的文件是否要编辑？如果只是为了保存值，为什么不使用文本文件/xml。您可以将其存储为一个简单的 char 分隔字符串，并且一旦您将其读回 .split 即可。一个简单的循环将从您拆分的数组中填充网格。

# azure - 使用的天蓝色表存储空间

> ID：15623398
> 
> 赞同：4
> 
> 时间：2013-03-25T19:46:08.257
> 
> 标签：azure

如何查看我的表存储帐户中有多少数据？我有免费试用版，当我启用监控时，它有各种主要与错误相关的指标，但我似乎找不到存储大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T19:54:18.673

目前没有用于查找计费和使用信息的 Azure API，因此，没有应用程序可以为您提供确切的计费数字。有一个针对这个问题的开放[功能请求。](http://www.mygreatwindowsazureidea.com/forums/170031-sdk/suggestions/1143971-billing-usage-api)可用于 Blob 存储的信息有限，但我没有发现任何用于表存储的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T20:21:02.747

您可以从帐户订阅页面下载您的使用详情。它不会告诉您每个单独的服务使用了多少存储空间，只会告诉您本地或地理冗余的总数。

转到控制台，单击右上角的您的姓名，然后单击“查看我的账单”。从这里您可以查看您的订阅使用数据并下载详细信息的 CSV。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T21:11:18.407

Azure 存储大小由所有 3 项服务（Blob、队列和表）组成，但目前无法计算每个单独服务的大小。计费数据还显示了 Azure 存储服务的累积存储大小，包括所有三个。记录了一些工作项以分离 Windows Azure 存储中每个单独服务的大小数据，但是没有关于这方面的更多信息。

# java - 应用正确的活动生命周期方法

> ID：15623401
> 
> 赞同：0
> 
> 时间：2013-03-25T19:46:16.290
> 
> 标签：java, android

更新

这是我的列表视图应用程序：

![在此处输入图像描述](../Images/9a05437b53dc44e02939978b67dca435.png)

我单击启动意图并加载我的电子邮件活动的电子邮件选项：

![在此处输入图像描述](../Images/1f5fe3982be5065a137645ad35ba9a28.png)

如果用户单击“返回”，则列表视图为空白：

![在此处输入图像描述](../Images/530d0f8898b6797cb5cc967117dc1ec3.png)

这是我设置列表视图的方法：

```
 public class view extends ListActivity {

ImageButton searchButton;
EditText searchName;
ListView searchedListResults;
long idToPass;
String numReturned;
String email;
SimpleCursorAdapter cursorAdapter;
DBHandler getCons;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.search);

    searchedListResults = (ListView) findViewById(android.R.id.list);

    list();

    searchName = (EditText) findViewById(R.id.inputName);

    searchedListResults.setTextFilterEnabled(true);

    searchName.addTextChangedListener(new TextWatcher() {

        @Override
        public void afterTextChanged(Editable s) {

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {

        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {

            cursorAdapter.getFilter().filter(s.toString());

            searchedListResults.refreshDrawableState();

        }

    });

    getCons = new DBHandler(this, null, null);

    cursorAdapter.setFilterQueryProvider(new FilterQueryProvider() {
        public Cursor runQuery(CharSequence constraint) {

            getCons.open();
            return getCons.getChanges(constraint.toString());

        }

    });
    searchedListResults.setAdapter(cursorAdapter);
}

private void list() {
    DBHandler DBsearchRef = new DBHandler(this, null, null);

    DBHandler search = new DBHandler(this, null, null);

    search.open();
    Cursor cursor = search.getData();
    search.close();
    startManagingCursor(cursor);

    String[] from = new String[] { DBsearchRef.KEY_NAME,
            DBsearchRef.KEY_TEL, DBsearchRef.KEY_EMAIL,
            DBsearchRef.KEY_COMMENTS };
    int[] to = new int[] { R.id.txtNameSet, R.id.txtContactSet,
            R.id.txtEmailSet, R.id.txtCommentSet };

    cursorAdapter = new SimpleCursorAdapter(this, R.layout.searchagain,
            cursor, from, to);
    searchedListResults.setAdapter(cursorAdapter);

}

@Override
protected void onResume() {
    super.onResume();

    list();

    searchName = (EditText) findViewById(R.id.inputName);

    searchedListResults.setTextFilterEnabled(true);

    searchName.addTextChangedListener(new TextWatcher() {

        @Override
        public void afterTextChanged(Editable s) {

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {

        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {

            cursorAdapter.getFilter().filter(s.toString());

            searchedListResults.refreshDrawableState();

        }

    });

    getCons = new DBHandler(this, null, null);

    cursorAdapter.setFilterQueryProvider(new FilterQueryProvider() {
        public Cursor runQuery(CharSequence constraint) {

            getCons.open();
            return getCons.getChanges(constraint.toString());

        }

    });
    searchedListResults.setAdapter(cursorAdapter);
}

@Override
public void onListItemClick(ListView list, View v, int list_posistion,
        long item_id) {
    idToPass = item_id;

    idToPass = item_id;

    DBHandler num = new DBHandler(this, null, null);

    num.open();
    numReturned = num.getNum(idToPass);

    email = num.getEmail(idToPass);
    num.close();

    final CharSequence[] items = { "Call Contact", "Email Contact",
            "Edit Contact", "Add Appointment" };

    Builder alertDialogBuilder = new AlertDialog.Builder(view.this);

    alertDialogBuilder.setTitle("Contact Options:");

    alertDialogBuilder.setItems(items,
            new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int item) {

                    if (items[item].equals("Call Contact")) {

                        Intent makeCall = new Intent(Intent.ACTION_DIAL,
                                Uri.parse("tel:" + numReturned));
                        startActivity(makeCall);
                    }

                    else if (items[item].equals("Email Contact")) {

                        Intent emailIntent = new Intent(
                                "com.example.flybaseapp.ContactsEmail");
                        emailIntent.putExtra("passedEmailAdd", email);
                        startActivity(emailIntent);
                    } else if (items[item].equals("Edit Contact")) {

                        Intent Edit = new Intent(
                                "com.example.flybaseapp.viewEdit");
                        Edit.putExtra("passedID", idToPass);
                        startActivity(Edit);

                    }

                    else if (items[item].equals("Add Appointment")) {

                        Intent conAdd = new Intent(
                                "com.example.flybaseapp.AddAppointmentContact");
                        conAdd.putExtra("newpassedID", idToPass);
                        startActivity(conAdd);

                    }
                }

            });

    alertDialogBuilder.show();

} 
```

是否在覆盖的 onResume 方法中设置它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:07:13.453

Android Activity 生命周期可以在这里找到：

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

![在此处输入图像描述](../Images/0a5937b1fe6a5810bffe3b04235d6e1e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:23:43.897

The activity **[lifecycle](http://developer.android.com/training/basics/activity-lifecycle/starting.html)** is already implementing all the stages for your Activity. Except the onCreate() which you need to define by yourself.

You call other stages in this lifecycle **ONLY** if you need to do something specific at those stages.

Let's take a LoginActivity as an example.

**You create the Activity like this(I know... nothing new here):**

```
public class LoginActivity extends Activity {

    public EditText usr;
    public EditText pass;
    final Context context = this;
    private TextView loginButton;
    private Boolean justCreated = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login_activity);

        initLoginButton();

        initEditTexts();

        addSwipeGesture();

        justCreated = true;
    } 
```

Now let's assume that the login was validated successfully and the Activity get's to the next step in it's brief but intense lifecycle. That would be the **onPause() stage**. This means that the Activity will be in the "background".

What happens to the Strings that the user set as Username and Password?.. Well, if you do not save them somewhere then they'll get lost if the user navigates back to the Login screen(this means that the Activity is recreated).

In this case you'll need to @Override the onPause() method and do something about those Strings. For simplicity's sake I will use a created, public class called SavedValues where I'll save those Strings.

**The SavedValues class:**

```
public class SavedValues {

    private static String loginUser = "";
    private static String loginPassword = "";

    public static String getLoginUser() {
        return loginUser;
    }

    public static void setLoginUser(String loginUser) {
        SavedValues.loginUser = loginUser;
    }

    public static String getLoginPassword() {
        return loginPassword;
    }

    public static void setLoginPassword(String loginPassword) {
        SavedValues.loginPassword = loginPassword;
    }
} 
```

**Now... the onPause() method included in the Activity:**

```
public class LoginActivity extends Activity {

    public EditText usr;
    public EditText pass;
    final Context context = this;
    private TextView loginButton;
    private Boolean justCreated = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login_activity);

        initLoginButton();

        initEditTexts();

        addSwipeGesture();

        justCreated = true;
    }

@Override
public void onPause() {
    super.onPause();

    SavedValues.setLoginUser(usr.getText().toString());
    SavedValues.setLoginPassword(pass.getText().toString());

    justCreated = false;
} 
```

Everything fine and dandy up to this point. Now, when the user navigates back to the LoginActivity then it will enter the onResume() stage of it's lifecycle. If we do nothing about it then our saved values will not be set.

**So, we will override the onResume() method in order to retreive those values when the LoginActivity wakes up from it's slumber:**

```
public class LoginActivity extends Activity {

    public EditText usr;
    public EditText pass;
    final Context context = this;
    private TextView loginButton;
    private Boolean justCreated = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login_activity);

        initLoginButton();

        initEditTexts();

        addSwipeGesture();

        justCreated = true;
    }

@Override
public void onPause() {
    super.onPause();

    SavedValues.setLoginUser(usr.getText().toString());
    SavedValues.setLoginPassword(pass.getText().toString());

    justCreated = false;
}

@Override
public void onResume() {
    super.onResume();

    if (justCreated == true) //if the user recreated the activity, restore the login values from the previous instance
    {
        usr.setText(SavedValues.getLoginUser(), TextView.BufferType.EDITABLE);
        pass.setText(SavedValues.getLoginPassword(), TextView.BufferType.EDITABLE);

        usr.setSelection(usr.getText().length());
    }
    else //if the user only left the activity clear the login values
    {
        usr.setText("", TextView.BufferType.EDITABLE);
        pass.setText("", TextView.BufferType.EDITABLE);
    }
} 
```

So this is how you would use some of the stages in the Activity's lifecycle to your advantage. Of course, there's more to this but I think this should get you started. Please read more on the [**Android Dev. Site**](http://developer.android.com/guide/components/activities.html). They have a decent documentation, albeit non-linear in a confusing sort of way.

**UPDATE**

To answer your updated question:

You can use my SavedValues example and put into it something like this:

```
private static ArrayList<Custom> yourList;

public static ArrayList<Custom> getyourList() {
        return yourList;
}

public static void setyourList(ArrayList<Custom> yourList) {
        SavedValues.yourList = yourList;
} 
```

Then in your `onPause()` method you write this:

```
@Override
public void onPause() {

    SavedValues.setyourList(getyourList()); // save the selected item list
    super.onPause();
    } 
```

Now if you press the back button and return to your Activity the data should be there.

I have used an almost identical approach by using an Array adapter populated from a Oracle DB. Works like a charm.

Cheers and good luck!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T20:25:09.120

[Android 生命周期](http://developer.android.com/reference/android/app/Activity.html)将在适当的时候运行必要的方法，即使它们不是在您的代码中编写的。`onCreate()`是您唯一需要的`override`。所有其他方法都将根据`state`您`Activity`的情况运行。但是，`override`如果需要，您可以使用任何或所有这些方法。

例如，由于`onResume()`每次`Activity`可见时都会运行但`onCreate()`仅在`Actviity`首次创建时运行，因此您可以选择放入代码`onResume()`以确保每次`Activity`可见时运行。或者也许你想在`Activity`被销毁时保存一个变量

```
@Override
public void finish()
{
    super.finish();
    // save variable to sharedprefs or wherever here
} 
```

# c# - 异步等待的请求节流

> ID：15623403
> 
> 赞同：1
> 
> 时间：2013-03-25T19:46:18.843
> 
> 标签：c#, asynchronous, throttling

我在我的应用程序中实现了一些请求限制。它基于使用 MemoryCache 和根据限制过期的项目。基本上我尝试检索一个缓存项目，如果它不存在我继续发出请求，如果是他们我检查最后一个请求并锻炼下一个可用时间我可以发出请求。我的问题在于我必须等待提出请求。

```
//This is a shortened version of what im doing, but the includes the required code

public void ThrottleRequest(string webservice)
{
    if (cache.TryGet(webservice))
    {
          var timeToWait = GetTimeToWaitFromSomewhere(); 
          Wait(timeToWait);
    }
}

public async void Wait(TimeSpan timeToWait)
{
     await Task.Delay(timeToWait); //This doesnt work
     Thread.Sleep(timeToWait); //This works
} 
```

问题在于等待方法。如果我使用 thread.sleep 数字匹配并且请求被正确限制（即每秒 1 个请求），但我永远不想在生产环境中使用它。那么在这里异步等待的正确方法是什么？我是在滥用 API 还是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T19:48:34.857

问题是你的`Wait`方法有一个返回类型`void`——你基本上是在说，“开始等待，我会继续前进，忽略等待！”

你通常有它：

```
public async Task ThrottleRequest(string webservice)
{
    if (cache.TryGet(webservice))
    {
        var timeToWait = GetTimeToWaitFromSomewhere(); 
        await Wait(timeToWait);
    }
}

public async Task Wait(TimeSpan timeToWait)
{
     await Task.Delay(timeToWait);
} 
```

虽然在这一点上，你的`Wait`方法是没有意义的，你最好写：

```
public async Task ThrottleRequest(string webservice)
{
    if (cache.TryGet(webservice))
    {
        var timeToWait = GetTimeToWaitFromSomewhere(); 
        await Task.Delay(timeToWait);
    }
} 
```

请注意，我已将您的`ThrottleRequest`方法更改为异步并返回`Task`。目前尚不清楚您希望调用`Wait`自行实现什么，但如果您尝试引入异步，您需要非常清楚自己在做什么 - 通常*调用*异步方法的方法*也*将是异步。

如果您*真的*只是想暂停当前正在执行的线程`ThrottleRequest`，那么您根本不应该使用异步方法 - 您想要*同步*延迟，这正是这样`Thread.Sleep`做的。

我强烈怀疑您目前对您的代码在同步或异步方面的用途并不完全清楚。我会从代码本身退后一步，弄清楚你实际期望它如何工作（例如，想想你希望线程模型是什么），*然后*回到键盘。

还要考虑在延迟发生后，您不会再次检查缓存 - 这意味着如果 20 个不同的线程每个都同时进入您的方法，它们最终都会*访问*Web 服务，而不是只有其中一个在做所以其余的使用缓存的结果。

# python - 在 Python 中加密/解密动画 gif，而不将最终副本存储到 HD

> ID：15623417
> 
> 赞同：3
> 
> 时间：2013-03-25T19:47:14.050
> 
> 标签：python, encryption, pycrypto, in-memory

好的，让我们再试一次。

我正在尝试使用 PyCrypto 加密动画 gif 以发送给某人。接收者得到它后，他们应该能够运行我的 pycrypto 脚本并查看动画图像 - 无需将未加密的文件存储到硬盘驱动器。本质上，我试图将未加密的文件保存在内存中，以便另一个库可以访问它而无需将其保存到磁盘。

对于我一直在使用的加密

```
import os, random, struct
from Crypto.Cipher import AES

def encrypt_file(key='8c57d066796428d5a8f4b012155dad90', in_filename='tile.png', out_filename=None, chunksize=8192):
    """ Encrypts a file using AES (CBC mode) with the
        given key.

        key:
            The encryption key - a string that must be
            either 16, 24 or 32 bytes long. Longer keys
            are more secure.

        in_filename:
            Name of the input file

        out_filename:
            If None, '<in_filename>.enc' will be used.

        chunksize:
            Sets the size of the chunk which the function
            uses to read and encrypt the file. Larger chunk
            sizes can be faster for some files and machines.
            chunksize must be divisible by 16.
    """
    if not out_filename:
        out_filename = in_filename + '.enc'

    iv = ''.join(chr(random.randint(0, 0xFF)) for i in range(16))
    encryptor = AES.new(key, AES.MODE_CBC, iv)
    filesize = os.path.getsize(in_filename)

    with open(in_filename, 'r') as infile:
        with open(out_filename, 'w') as outfile:
            outfile.write(struct.pack('<Q', filesize))
            outfile.write(iv)

            while True:
                chunk = infile.read(chunksize)
                if len(chunk) == 0:
                    break
                elif len(chunk) % 16 != 0:
                    chunk += ' ' * (16 - len(chunk) % 16)

                outfile.write(encryptor.encrypt(chunk)) 
```

，但这似乎根本没有做任何事情。我什至不知道从哪里开始解密部分，因为我需要能够访问解密文件而不将其存储到硬盘驱动器。

多谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T19:52:33.653

使用[StringIO](http://docs.python.org/2/library/stringio.html)而不是一个名为 的实际磁盘文件`out_filename`怎么样？

只需使用具有相同结构的虚拟光盘即可。

例子：

```
import StringIO

f=StringIO.StringIO()

for line in ['line {}\n'.format(i) for i in range(25)]:
    f.write(line)

f.seek(0)

for line in f:
    print line.strip() 
```

所以你需要`with open(out_filename, 'w') as outfile: ...`用一个电话替换，`outfile=StringIO.StringIO()`其余的应该是一样的。

像这样：

```
with open(in_filename, 'r') as infile:
    outfile=StringIO.StringIO()
    outfile.write(struct.pack('<Q', filesize))
    outfile.write(iv)

    while True:
        chunk = infile.read(chunksize)
        if len(chunk) == 0:
            break
        elif len(chunk) % 16 != 0:
            chunk += ' ' * (16 - len(chunk) % 16)

        outfile.write(encryptor.encrypt(chunk)) 
```

# multithreading - mod_fcgid：现在还是计划中的多线程 FastCGI？

> ID：15623422
> 
> 赞同：9
> 
> 时间：2013-03-25T19:47:22.337
> 
> 标签：multithreading, apache, fastcgi, mod-fcgid, fcgid

# 到目前为止的事实

根据“<a href="http://www.apachelounge.com/viewtopic.php?t=4385">mod_fcgi 不是 mod_fastcgi 的替代品”和“<a href="http://mail-archives. apache.org/mod_mbox/httpd-users/201008.mbox/%3C4C7C286B.6020703@codexterous.com%3E">mod_fcgid 和多线程 FastCGI 应用程序的问题”，`mod_fcgid`并非旨在期望 FastCGI 服务器能够处理一次多个请求，即没有设计为期望 FastCGI 服务器是多线程的。

前者说：

> 它们都支持已发布的“FastCGI”协议，但它们控制 FastCGI 服务器的方式有很大不同。mod_fcgid 快速消除 FastCGI 服务器并启动新的服务器。

后者说：

> 似乎 mod_fcgid 不知道我的服务器是多线程的并且能够处理多个请求。

这只是其中的两个引用，其他地方还有一些。

# 连续的问题

线程不仅是为了节省 CPU 和内存，避免创建新进程的开销（众所周知，创建线程比创建进程更轻），而且可以通过硬件或操作系统性能来缓解；这也是一个逻辑问题，不太容易缓解：线程属于同一个进程，这不仅是性能，也是逻辑，例如。进程无法共享线程可以共享的内容，因为进程是独立运行的（以 IPC 为模，但不一样）。

至少出于这个逻辑原因，多线程 FastCGI 服务器的问题可能会被提出。FastCGI 服务器可能包含一个上下文（在进程之间共享可能很大且成本很高），当它被设计为多线程服务器时，它对所有请求处理程序都是全局的。为每个并发请求派生一个新进程不再允许确保公共上下文。

# 问题

上述两个报价是否仍然正确（一个是 2011 年，另一个是 2010 年）？我在网上搜索了该主题，但找不到任何相关内容。如果它仍然是正确的，那么它是否总是正确的，或者是否有预期的计划`mod_fcgid`来了解多线程 FastCGI 服务器并接受这些可能旨在处理多个并发请求的服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-10T05:42:22.207

我无法回答您关于 mod_fcgid 的确切问题，但是 Apache 已经继续前进，现在 Apache 2.4 中的首选方法是使用 mod_proxy_fcgi，[http://httpd.apache.org/docs/trunk/mod/mod_proxy_fcgi.html](http://httpd.apache.org/docs/trunk/mod/mod_proxy_fcgi.html)。

它确实处理多个并发请求。通常，您可能会将请求传递给 php-fpm 处理程序。

# matlab - Matlab，获取向量中的峰值，这不起作用：max_locations = find(A==max(A))

> ID：15623427
> 
> 赞同：-5
> 
> 时间：2013-03-25T19:47:40.770
> 
> 标签：matlab, matrix

在 Matlab 中，我有以下矩阵：

```
A = [0,0,0,0,0,0,0,0,0,0,8,32,52,36,12,0,1,2,0,0,0,0,0,0,0,0,0,1,2,1,163,60,
21,31,34,35,38,38,40,38,38,40,34,37,39,34,32,32,33,31,39,40,37,36,24,39,162,
23,23,22,22,29,25,23,24,25,24,24,29,23,26,27,24,20,27,25,27,26,24,23,21,24,
162,20,24,29,30,28,25,31,28,30,32,35,29,31,32,30,29,30,30,31,31,30,30,29,25,
20,162,63,18,22,23,21,22,23,24,21,22,24,21,24,22,24,19,18,21,19,18,20,20,18,
20,13,162,162,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0] 
```

我的命令是：

```
max_locations = find(A==max(A)) 
```

它返回 31，这是第 31 个元素（163）的索引，它是列表中的最大值。

我正在寻找的答案是 max_locations = [31 57 83 109 135]，即 PEAKS。

为什么它没有把所有的峰都还给我，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T19:52:56.940

因为其他位置的值不是最大值：162 而不是 163。

```
>> L([31 57 83 109 135])
ans =
   163   162   162   162   162 
```

如果您想找到一些极端的选择，您可以尝试；

```
>> pick_location = find(L>160)
pick_location =
    31    57    83   109   135   136 
```

要真正找到峰值，请尝试从[FileExchange](http://www.mathworks.com/matlabcentral/fileexchange/25500-peakfinder)提交 PEAKFINDER。

# linux - 如何确定与 uinput 设备对应的文件？

> ID：15623442
> 
> 赞同：4
> 
> 时间：2013-03-25T19:48:33.820
> 
> 标签：linux, file, linux-device-driver

在 linux 中，当创建 uinput 设备时，会在文件系统中创建与该设备对应的一个或多个事件文件。（例如，如果我创建了一个 uinput 鼠标，则会创建文件 /dev/input/mouseN。）但是我如何确定为给定的 uinput 设备创建了*哪些文件？*uinput 内核模块似乎没有提供任何 ioctl 来获取该信息。一种可能的方法是在创建 uinput 设备后立即轮询文件系统以查看出现的文件，但该方法不起作用，因为与其他设备（真实和 uinput）竞争，这些设备也大约在同一时间插入或创建. 我是否忽略了某些东西，或者我必须破解内核才能获取此信息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T12:38:23.370

如果您查看*sysfs*，您可以找到您的信息。创建 uinput 设备后，请执行以下操作：

```
$ ls /sys/class/input/
event0 event1 ... eventN
input0 input2 ... input19 ... inputN
mouse0 mouse1 ... mouseN
mice

$ ls /sys/devices/virtual/input/
input19 mice 
```

请注意，您可以在不同的路径中找到虚拟设备。在这种情况下，input19 是我的 uinput 设备。对应的字符设备是哪个？

```
$ ls /sys/devices/virtual/input/input19/
event14 name id ... 
```

我的字符设备是`/dev/input/event14`. 我知道那`input19`是我的 uinput 设备，因为我是唯一创建 uinput 设备的用户。如果你想确定，你必须阅读它的 sysfs 属性*名称*并验证它确实是你的设备

```
$ cat /sys/devices/virtual/input/input19/name
foo-keyboard-201303261446 
```

您可以通过阅读内核消息来检索有关新 uinput 设备的信息：

```
$ dmesg | tail -n 7
input: foo-keyboard-201303261445 as /devices/virtual/input/input14
input: foo-keyboard-201303261445 as /devices/virtual/input/input15
input: foo-keyboard-201303261445 as /devices/virtual/input/input16
input: foo-keyboard-201303261445 as /devices/virtual/input/input17
input: foo-keyboard-201303261446 as /devices/virtual/input/input18
input: foo-keyboard-201303261446 as /devices/virtual/input/input19
input: foo-keyboard-201303261446 as /devices/virtual/input/input20 
```

从您的程序中，您可以读取`/dev/kmsg`并捕获您的事件。也许你可以打开设备`/dev/kmsg`，刷新它，等到`select()`你收到 uinput 通知。

另一种方法是使用*libudev*来检索您的 uinput 设备。看看下面的链接：[libudev 教程](http://www.signal11.us/oss/udev/)

**更新**：感谢您的问题，我改进了 github 上的 libuinput 库：[libuinput by Federico](https://github.com/FedericoVaga/libuinput)。我实现了使用 hte *kmsg*设备的解决方案。

**更新**：2014 年，Linux`uinput`驱动程序得到了改进（git SHA1 e3480a61fc）。现在可以`uinput`使用以下`ioctl`命令直接从驱动程序获取 sysfs 路径：

```
/**
 * UI_GET_SYSNAME - get the sysfs name of the created uinput device
 *
 * @return the sysfs name of the created virtual input device.
 * The complete sysfs path is then /sys/devices/virtual/input/--NAME--
 * Usually, it is in the form "inputN"
 */
#define UI_GET_SYSNAME(len)    _IOC(_IOC_READ, UINPUT_IOCTL_BASE, 300, len) 
```

因此，如果您有可能使用比 3.13 更新的 Linux 内核，您可以使用上述`ioctl`方法来改进使用 uinput 的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-25T20:54:15.050

这是迄今为止我找到的最好的方法，结合这里给出的答案，我会做类似的事情：

[如何获取 uinput 创建设备的名称（路径）](https://stackoverflow.com/questions/34064047/how-to-get-name-path-of-uinput-created-device/35438499#comment65648531_35438499)

```
char sysfs_device_name[16];
ioctl(uinput_fd_after_create, UI_GET_SYSNAME(sizeof(sysfs_device_name)), sysfs_device_name);
printf("/sys/devices/virtual/input/%s\n", sysfs_device_name);
//Now retrieve all files in that folder and grep for event* then
send_input_to_fd = open("the_event[n]", O_WRONLY | O_NDELAY); 
```

现在 send_input_to_fd 应该是发送事件的正确 FD。

# symfony - 将一对多连接结果作为对象中的数组返回

> ID：15623446
> 
> 赞同：3
> 
> 时间：2013-03-25T19:48:37.370
> 
> 标签：symfony, doctrine, one-to-many, dql

我有一个用于帖子的表格和另一个带有回复帖子的表格。我在教义中正确映射了一个（帖子）到多个（回复帖子）的关系。我可以加入两者并得到我所期望的，每个回复的数组数组，但原始帖子的内容是相同的。是否可以为每个帖子返回一个数组/对象，并将回复内容放在一个数组中？

这是我现在得到的（如预期的那样）：

```
array (size=2)
  0 => 
    array (size=2)
      'content' => string 'Test homework post' (length=18)
      'replyContent' => string 'this is a reply' (length=15)
  1 => 
    array (size=2)
      'content' => string 'Test homework post' (length=18)
      'replyContent' => string 'second reply' (length=12) 
```

我想要这样的东西：

```
array (size=1)
  0 => 
    array (size=2)
      'content' => string 'Test homework post' (length=18)
      'replyContent' => 
                   array (size = 2)
                       0 => 'replyContent' => string 'this is a reply' (length=15)
                       1 => 'replyContent' => string 'second reply' (length=12) 
```

我已经做了最好的研究，但只遇到了关于返回数组而不是对象的结果。也许这是不可能的，但我认为它可能正在考虑 php 类定义中的一对多关系映射：

```
$this->[name for protected variable] = new ArrayCollection(); 
```

非常感谢您的帮助！

编辑：这是我的学说查询：

```
 SELECT
            homeworkPost.content,
            homeworkPostReplies.content AS replyContent
        FROM AcmeMainBundle:HomeworkPost homeworkPost
        LEFT JOIN homeworkPost.homeworkPostReplies homeworkPostReplies 
        WHERE homeworkPost.course = :course 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-15T16:20:41.643

我遇到了同样的问题并找到了解决方案，所以我将其作为参考：我正在使用的代码片段

```
 $query = $this->em->createQueryBuilder();
    $query->select("partial venue.{id,name,description,state,city,street,postalCode,lon,lat},partial r.{id}")
    ->from("CoreBundle:ServiceProvider","venue")
    ->join("venue.reviews","r","with","IDENTITY(r.serviceProvider) = venue.id")
    ->andWhere("venue.city = :city_name")
    ->andWhere("IDENTITY(venue.venueStatus) != 1")
    ->andWhere("IDENTITY(venue.venueStatus) != 3")
    ->setParameter("city_name",$cityName)
    ->orderBy("venue.points" ,"DESC")
    ->addOrderBy("venue.name" ,"ASC"); 
```

使用 partial 将解决此问题参考[14\. Doctrine Query Language — Doctrine 2 ORM 2 文档 - 14.2.4.1。部分对象语法](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#partial-object-syntax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:40:57.037

**现在更新**DQL 已发布。

做这个：

```
SELECT
    homeworkPost.content,
    homeworkPostReply.content
FROM AcmeMainBundle:HomeworkPost homeworkPost
LEFT JOIN AcmeMainBundle:HomeworkPostReply homeworkPostReply 
WHERE homeworkPost.course = :course 
```

您需要加入 HomeworkPostReply 实体

* * *

如果您的教义结果是正确的，那么

```
$qb->getQuery()->getArrayResult(); 
```

应该可以解决您的问题。

您还可以处理结果数据后查询：

```
$result = array();

$formatResult = function($post, $k) use (&$result)
{
    $found = false;
    for($i = 0, $count = count($result); $i < $count; $i++)
    {
        if($result[$i]['content'] == $post['content'])
        {
            $found = true;
            if(!isset($result[$i]['replyContent']))
            {
                $result[$i]['replyContent'] = array();
            }
            $result[$i]['replyContent'][]= $post['replyContent'];
            break;
        }
    }
    if(!$found){
        $result[] = array('content'=>$post['content'],
                'replyContent'=>array($post['replyContent']));
    }
};

array_walk($originalResult, $formatResult);

print_r($result); 
```

# maven - 执行目标 org.apache.maven.plugins 失败：指定的 web.xml 文件 'D:\WEB-INF\web.xml' 不存在

> ID：15623455
> 
> 赞同：2
> 
> 时间：2013-03-25T19:49:08.650
> 
> 标签：maven, intellij-idea, maven-3, web.xml

> [错误] 无法
> 在项目 CRPS 上执行目标 org.apache.maven.plugins:maven-war-plugins:2.1.1:war (default-war)：指定的 web.xml 文件
> 'D:\WEB-INF\web .xml' 不存在-> [Help 1]
> [ERROR]
> [ERROR] 要查看错误的完整堆栈跟踪，请使用 -e > 开关重新运行 Maven。
> [错误] 使用 -X 开关重新运行 Maven 以启用完整的调试日志记录。[ERROR]
> [ERROR] 有关错误和可能的解决方案的更多信息，请阅读以下文章： [ERROR] [Help 1]

[http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException](http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException)

**注意：**我的项目在`D:\MAVEN\`
项目文件夹下是：`D:\MAVEN\CRPS`

当我在 intellij 想法中单击安装时，会生成此错误。为什么会发生？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T02:16:43.533

如您所见，该插件正在 D:\WEB-INF 路径中查找进行战争打包所需的 web.xml，这显然是错误的查找位置。您需要通过在终端上运行时传递 -Dmaven.war.webxml=..../WEB-INF/web.xml 参数来明确指定，或者您可以通过添加将配置放入您的 pom

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.3</version>
    <executions>
      <execution>
         <phase>package</phase>
         <configuration>
           <webXml>..../WEB-INF/web.xml</webXml>
         </configuration>
      </execution>
    </executions>
  </plugin> 
```

请注意：您不需要声明绝对路径，项目 pom 的相对路径就足够了。**用正确的路径替换这些点**。

我猜您没有使用默认的 Maven 战争项目布局，这就是您收到此错误的原因。如果你是，插件将默认从 src/main/webapp/WEB-INF/web.xml 获取 web.xml，如下例所示。

*   pom.xml
*   源代码
    *   主要的
        *   爪哇
        *   资源
        *   网络应用
            *   网络信息
                *   **web.xml**

# ruby - 根据另一个数组排序数组，然后按日期排序

> ID：15623458
> 
> 赞同：0
> 
> 时间：2013-03-25T19:49:17.060
> 
> 标签：ruby

我想知道，我有一系列“电影”对象，它们具有制作工作室和发布日期等属性。

我想首先根据制作工作室的排名，然后根据每部电影的日期对对象数组进行排序。

例如：

```
studio_ratings = [Studio1, Studio2, Studio3, Studio4, Studio5]

array_of_objects = [Object1, Object2, Object3, Object4, Object5, Object6, Object7, Object8, Object9] 
```

每个对象都有它的日期，所以我可以这样`Object1.date_published`和`Object1.production_studio`，例如。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:34:30.307

我假设您的意思`studio_ratings`是您希望工作室排名的顺序。在这种情况下，您可以执行以下操作：

```
array_of_objects.sort_by {|obj| [studio_ratings.index(obj.production_studio), obj.date_published]} 
```

但是如果你做了很多这些，或者工作室列表很长，你最好构造一个哈希而不是`.index`一遍又一遍地做。例如：

```
>> studio_rankings = ['Universal', 'Global', 'Local', 'Wolverine']
=> ["Universal", "Global", "Local", "Wolverine"]
>> class Film
>>   attr_accessor :studio, :date
>>   def initialize(studio, date)
>>     @studio = studio
>>     @date = date
>>   end
>> end
=> nil
>> films = [Film.new('Global', '2012-01-01'), Film.new('Universal', '2013-04-12'), Film.new('Global', '2011-10-10'), Film.new('Wolverine', '2008-01-01')]
=> [#<Film:0x101b101a0 @date="2012-01-01", @studio="Global">, #<Film:0x101b10128 @date="2013-04-12", @studio="Universal">, #<Film:0x101b100b0 @date="2011-10-10", @studio="Global">, #<Film:0x101b10038 @date="2008-01-01", @studio="Wolverine">]
>> films.sort_by {|f| [studio_rankings.index(f.studio), f.date]}
=> [#<Film:0x101b10128 @date="2013-04-12", @studio="Universal">, #<Film:0x101b100b0 @date="2011-10-10", @studio="Global">, #<Film:0x101b101a0 @date="2012-01-01", @studio="Global">, #<Film:0x101b10038 @date="2008-01-01", @studio="Wolverine">]
>> studio_index = {}
=> {}
>> studio_rankings.each_with_index {|studio, i| studio_index[studio] = i}
=> ["Universal", "Global", "Local", "Wolverine"]
>> studio_index
=> {"Local"=>2, "Wolverine"=>3, "Global"=>1, "Universal"=>0}
>> films.sort_by {|f| [studio_index[f.studio], f.date]}
=> [#<Film:0x101b10128 @date="2013-04-12", @studio="Universal">, #<Film:0x101b100b0 @date="2011-10-10", @studio="Global">, #<Film:0x101b101a0 @date="2012-01-01", @studio="Global">, #<Film:0x101b10038 @date="2008-01-01", @studio="Wolverine">] 
```

# c# - 将 PictureBoxes 添加到 TableLayoutPanel 非常慢

> ID：15623461
> 
> 赞同：0
> 
> 时间：2013-03-25T19:49:23.447
> 
> 标签：c#, winforms, tablelayoutpanel

大家好，我正在添加`PictureBoxes`到`TableLayoutPanel`单元格中，但是对于 10x10 网格，它需要 10 秒，这太长了。我的代码看起来像这样，你能告诉我如何改进它，所以`PictureBoxes`会立即添加吗？这是我的做法：

```
 private void x10ToolStripMenuItem_Click(object sender, EventArgs e)
        {
            tableLayoutPanel1.Controls.Clear();
            tableLayoutPanel1.ColumnStyles.Clear();
            tableLayoutPanel1.RowStyles.Clear();
            tableLayoutPanel1.ColumnCount = 10;
            tableLayoutPanel1.RowCount = 10;
            int sliderval = trackBar1.Value;
            //tableLayoutPanel1.Controls.Add(new PictureBox(),2,1);
            for (int i = 0; i < tableLayoutPanel1.RowCount; i++)
            {
                tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Percent, (100 / tableLayoutPanel1.RowCount)));
                for (int j = 0; j < tableLayoutPanel1.ColumnCount; j++)
                {
                    tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, (100 / tableLayoutPanel1.ColumnCount)));

                    PictureBox picture = new PictureBox
                    {
                        Name = "pictureBox" + i,
                        Size = new Size(49, 35),
                        Visible = true,

                        Anchor = ((System.Windows.Forms.AnchorStyles)((((System.Windows.Forms.AnchorStyles.Top | System.Windows.Forms.AnchorStyles.Bottom)
                | System.Windows.Forms.AnchorStyles.Left)
                | System.Windows.Forms.AnchorStyles.Right))),
                        BackColor = colors[random.Next(0, sliderval)],
                        TabIndex = 0,
                        TabStop = false
                    };
                    tableLayoutPanel1.Controls.Add(picture, j, i);
                    picture.Dock = DockStyle.Fill;
                    // picture.Margin = new Thickness(40, 16, 0, 0);
                    // picture.Padding = new Padding(0);         
                    picture.SizeMode = PictureBoxSizeMode.Normal;
                    picture.Margin = new Padding(0);
                }

            }
            AssignClickEvent();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:55:30.610

看看这个网址。可能是您的表格需要重新粉刷 alm 并将其拖慢。而是暂停绘画。进行所有更改，然后恢复。少画画。[http://www.c-sharpcorner.com/Forums/Thread/52/](http://www.c-sharpcorner.com/Forums/Thread/52/)

# javascript - 查询字符串的正则表达式

> ID：15623466
> 
> 赞同：1
> 
> 时间：2013-03-25T19:49:36.580
> 
> 标签：javascript, regex, node.js

我有一个正则表达式函数，我认为它可以用于删除查询字符串中的页面变量。现在，如果变量不是第一个变量，它可以正常工作，但是如果变量是第一个变量，它不会捕获 ?search=。

# 工作案例：

```
http://blahblah.com/stuff/pages/things?search=somethingURIEncoded&page=2 
```

变成

```
console.log( req.url.replace(/&page(\=[^&]*)?(?=&|$)|^page(\=[^&]*)?(&|$)/, '') )
http://blahblah.com/stuff/pages/things?search=somethingURIEncoded 
```

# 非工作案例：

```
http://blahblah.com/stuff/pages/things?page=2&search=somethingURIEncoded 
```

变成

```
console.log( req.url.replace(/&page(\=[^&]*)?(?=&|$)|^page(\=[^&]*)?(&|$)/, '') )
http://blahblah.com/stuff/pages/things?page=2&search=somethingURIEncoded 
```

有人知道如何修复我正在使用的这个正则表达式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T19:51:06.753

如果要解析整个 url，node.js 有一个内置[`url`](http://nodejs.org/api/url.html)模块。

它有一个 parse 方法，似乎可以满足您的需要：

```
url.parse(urlStr, [parseQueryString], [slashesDenoteHost]) 
```

如果您愿意，[此问题回答了如何将其重新构建为 URL，并显示了一个使用示例。](https://stackoverflow.com/questions/7517332/node-js-url-parse-result-back-to-string)

您还有一个内置[`querystring`](http://nodejs.org/api/querystring.html)模块。

您可以使用`querystring.parse`

```
querystring.parse('foo=bar&baz=qux&baz=quux&corge')
// returns
{ foo: 'bar', baz: ['qux', 'quux'], corge: '' } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T19:53:06.327

而不是`^page`应该是`\?page`，但当然你必须更换`?`背部。您可以使用 捕获它并使所有其他分组不被捕获`?:`。

# php - 用 Mysql 中的数组元素更新整个列

> ID：15623468
> 
> 赞同：2
> 
> 时间：2013-03-25T19:49:52.723
> 
> 标签：php, mysql

我有一个这样的表 userx：

```
id----------text---------num          
1-----------foo-----------0  
2-----------bar-----------0  
3-----------widget--------0  
4-----------widget--------0  
5-----------widget--------0  
6-----------widget--------0  
7-----------widget--------0  
8-----------widget--------0 
```

我有一个这样的数组：

```
$numeros = array(30, 50, 60, 70, 90, 110, 130, 150); 
```

所以我想做一个查询，从 $numeros 获取每个结果并更新到我的列（从 id=1 开始）“num”，如下所示：

```
id----------text--------------num          
1-----------foo--------------30  
2-----------bar--------------50  
3-----------widget-----------60  
4-----------widget-----------70  
5-----------widget-----------90  
6-----------widget-----------110  
7-----------widget-----------130  
8-----------widget-----------150 
```

是否可以为此更新单个更新（或循环内的多个）查询？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:56:05.890

你可以尝试这样的事情：

```
$query = "UPDATE userx SET num=? WHERE id=?";
for($j = 0, $j < sizeof(numeros); $j++)
{
    $index = $j+1;        
    $stmt = $db->prepare($query);
    $stmt->bind_param('ii', $numeros[$j], $index);
    $stmt->execute();
} 
```

所以虽然它在技术上不是一个查询，但你只写一次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-19T23:09:33.147

您可以尝试使用一个函数通过 for 循环调用另一个函数来更新每个元素。IE

```
#CODE TO CONNECT TO Mysql database
#then call function to update these column elements
updateColumns();
function updateColumns(){
    $query = "SELECT column FROM table";
    $result = mysql_query($query);

    if(!$result){
        echo "Error message you want.</br>";
        echo mysql_error();
    }
    else{
        $count = mysql_num_rows($result);
        if($count){
            # There are rows. now check if there is a match
            while($row=mysql_fetch_array($result)){
                #cycle through each row of the $result column
                foreach($row as $key => $value){
                    if($key){
                        updateThisColumnsValue($value);
                    }
                }
            }
        }
    }
}
function updateThisColumnsValue($value){
    $query = "UPDATE table SET columnToCHange='newValue' WHERE referenceColumnName = '$value'";
    $result = mysql_query($query);
    if(!result){
        error message
    }# that should be it. 
} 
```

另外这里是 sql 更新函数[w3school.sql](http://www.w3schools.com/sql/sql_update.asp)的链接， 希望对您有所帮助。

# c++ - 没有 cbegin()/cend() 的 std::initializer_list

> ID：15623472
> 
> 赞同：23
> 
> 时间：2013-03-25T19:50:02.917
> 
> 标签：c++, c++11, iterator, initializer-list

如果元素`std::initializer_list`总是 const 值，为什么我们有模板方法 like`begin()/end()`和 not `cbegin()/cend()`？这个名称（按照惯例，与 eg 相比`std::vector`）可能表明这两种`std::initializer_list`方法都可以 return `iterator`，而它们总是 return `const_iterator`。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-25T20:10:59.410

虽然我无法解释为什么`cbegin()`and`cend()`不是*除了*and`std::initializer_list`的接口的一部分的原因，但肯定有充分的理由说明最后两个成员函数应该在那里。 *`begin()``end()`*

 *一个原因是，例如，基于范围的`for`循环是由 C++11 标准根据函数`begin()`和精确定义的`end()`（第 6.5.4/1 段）。因此，为了使它可以与初始化列表一起使用，`std::initializer_list`必须提供`begin()`和`end()`成员函数：

```
#include <utility>
#include <iostream>

int main()
{
    auto l = { 1, 2, 3, 4, 5 };
    for (int x : l) // Works because std::initializer_list provides
                    // the member functions begin() and end().
    {
        std::cout << x << " ";
    }
} 
```

`cbegin()`此外，考虑成员函数并且`cend()`在 C++11 之前不存在是有意义的：因此，在 的接口上具有`begin()`和允许使旧的泛型算法根据初始值设定项列表编写和工作，而不需要它们是重写。`end()``std::initializer_list``begin()``end()`

你写：

> 这些名称（按照惯例，与 eg 相比`std::vector`）可能表明这两种`std::initializer_list`方法都可以 return `iterator`，而它们总是 return `const_iterator`。

其实这个比喻不太恰当。`std::vector`的函数`begin()`，例如，`iterator`在非`const`实例`std::vector`（即可变实例，其元素可以修改、添加和删除）上`const_iterator`调用时返回一个，在实例上调用时返回一个`const`（即不可变实例，其内容不能更改）：

```
#include <vector>
#include <type_traits>

int main()
{
    // A non-const vector...
    std::vector<int> v = { 1, 2, 3, 4, 5 };

    auto i = v.begin();
    static_assert(
        std::is_same<decltype(i), decltype(v)::iterator>::value, 
        //                                     ^^^^^^^^
        //                                     ...non-const iterator!
        "What?");

    // A const vector...
    std::vector<int> const vc = { 1, 2, 3, 4, 5 };
    auto ic = vc.begin();
    static_assert(
        std::is_same<decltype(ic), decltype(vc)::const_iterator>::value,
        //                                       ^^^^^^^^^^^^^^
        //                                       ...const iterator!
        "What?");
} 
```

根据定义，初始化列表是不可变的集合。根据 C++11 标准的第 18.9/2 段：

> 类型对象`initializer_list<E>`提供对类型对象数组的访问`const E`。[...]

由于初始值设定项列表是`const`元素的集合，`cbegin()`and函数实际上会做与and`cend()`完全相同的事情。`begin()``end()`

实际上，`iterator`and`const_iterator`都被定义为指向初始化器列表值类型的常量元素的指针，因此有争议的是，`begin()`and`end()`总是 return `const_iterator`（如你所假设），或者它们是否总是 return `iterator`。

这就是 C++11 标准第 18.9/1 段定义`initializer_list`类模板的方式：

```
namespace std {
    template<class E> class initializer_list {
    public:
        typedef E value_type;
        // ...
        typedef const E* iterator;
        typedef const E* const_iterator;
        // ...
        constexpr const E* begin() const noexcept; // first element
        constexpr const E* end() const noexcept; // one past the last element
    };

    // ...
} 
```*

# jquery - 添加到 DOM 后保持状态

> ID：15623473
> 
> 赞同：1
> 
> 时间：2013-03-25T19:50:10.353
> 
> 标签：jquery

我正在通过 API 调用将图像和图像标题加载到 DOM，例如

```
var html = '';
var i=0, length=data.length, image;
for(; i<length; i++) {
html += '<li>';
html += '<div class="holder">';
html += '<div class="image"><img src="/path/to/image.jpg"></div>';
html += '<div class="imgTitle">Image title</div>';
html += '</div>';
html += '</li>';
}

$('#images').append(html); 
```

我将此限制为 10，然后单击按钮加载下一个 10。标准的东西。

现在，点击一个不同的按钮，我想隐藏文本并只显示图像，或者再次点击，比如

```
$('#txtHide').click(function() {
    $('.imgTitle').toggle();
}); 
```

哪个对第一组图像很有用，但我需要为所有未来附加到 DOM 的状态保留状态，这可能吗？

因此，接下来的 10 个图像被加载并且 DOM 知道当前状态，例如类`.imgTitle`是否隐藏，并且所有未来的切换按钮点击都会影响 DOM 中的所有 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:08:45.343

您可以添加一个类`#images`并在该类存在时使用 CSS 隐藏其中的所有`.imgTitle`s，而不是切换单个图像。

然后，您可以简单地调用`.toggleClass()`.

# php - Codeigniter REST file_get_contents 不工作

> ID：15623476
> 
> 赞同：1
> 
> 时间：2013-03-25T19:50:20.897
> 
> 标签：php, json, api, codeigniter, rest

我对 Codeigniter 中的 REST API 有疑问。当我将 url 放入 Firefox 中时，我得到了所需的响应，所以我知道 url 是正确的。使用下面的代码，我得到一个超时。我不知道是什么原因造成的。任何帮助将不胜感激。

```
$json = file_get_contents('http://localhost/q3n/index.php/api/action_count/status/2');

print_r(json_decode($json)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:42:32.713

如果你的 codeigniter 中有 curl 库，你可以起诉它，也可以像下面这样执行此操作。如果你没有 curl 库，你可以在这个[链接](http://philsturgeon.co.uk/code/codeigniter-curl)中找到 codeigniter 的 curl 库，你也可以找到小的教程。

```
$url_path = "http://localhost/q3n/index.php/api/action_count/status/2";

 $res = $this->curl->simple_get($url_path);

 $result = json_decode($res, true); 
```

# cocoa - 未调用 WebUIDelegate 方法

> ID：15623477
> 
> 赞同：1
> 
> 时间：2013-03-25T19:50:24.703
> 
> 标签：cocoa, webview, delegates, webkit

出于某种原因，永远不会调用以下 webview UI 委托方法。尝试打开、单击、与 webview 交互以触发委托调用，但没有任何效果。

```
- (void)webViewFocus:(WebView *)sender {
    NSLog(@"focusing %@", sender);
}

- (void)webViewUnfocus:(WebView *)sender {
    NSLog(@"unfocusing %@", sender);
}

- (BOOL)webViewIsStatusBarVisible:(WebView *)sender {
    return YES;
}

- (void)webView:(WebView *)sender setStatusBarVisible:(BOOL)visible {
    NSLog(@"%@  %d", sender, visible);
} 
```

我确保代理已正确连接，并且可以确认当用户想要打开一个新窗口时，`- (WebView *)webView:(WebView *)sender createWebViewWithRequest:(NSURLRequest *)request`正确调用了 WebUIDelegate 方法。有任何想法吗？

# java - JNI 返回 Signal 7 函数试图从 C++ 调用 Java

> ID：15623478
> 
> 赞同：5
> 
> 时间：2013-03-25T19:50:28.387
> 
> 标签：java, c++, java-native-interface, signals, cocos2d-x

我想从 C++ 调用 Java。我尝试调用一个不带参数的返回布尔值的函数。

这是我的 C++ 代码

```
/**
 * Check if Internet Connection is ONLINE
 */
bool InterfaceJNI::isInternetConnected()
{
    JavaVM* jvm = JniHelper::getJavaVM();
    int status;
    JNIEnv *env;
    jmethodID mid;

    bool isAttached = false;
    // jboolean o bool?
    bool returnValue = false;

    CCLog("Static isInternetConnected");

    // Get Status
    status = jvm->GetEnv((void **) &env, JNI_VERSION_1_6);

    if(status < 0)
    {
        //LOGE("callback_handler: failed to get JNI environment, " // "assuming native thread");
        status = jvm->AttachCurrentThread(&env, NULL);
        CCLog("isInternetConnected Status 2: %d", status);
        if(status < 0)
        {
            // LOGE("callback_handler: failed to attach " // "current thread");
            return false;
        }
        isAttached = true;
        CCLog("isInternetConnected Status isAttached: %d", isAttached);
    }

    CCLog("isInternetConnected Status: %d", status);

    jclass mClass = env->FindClass("org/example/SocialNetwork/InternetConnection");

    // Get Static bool isInternetConnection()
    mid = env->GetStaticMethodID(mClass, "isInternetConnection", "()Z");
    if (mid == 0)
    {
        CCLog("isInternetConnected FAIL GET METHOD STATIC");
        return false;
    }
    // Call Static bool isInternetConnection()
    returnValue = env->CallStaticBooleanMethod(mClass, mid);
    CCLog("isInternetConnected Done ");

            //-----------------------------------------------------------
    CCLog("Finish");
    if(isAttached)
        jvm->DetachCurrentThread();

    // Change for return value
    return returnValue;
} 
```

还有我的 Java 代码：

```
public class InternetConnection 
{
    /**
     * Check if is working your hello world from C++
     */
    public static void helloWorld()
    {
        Log.v("InternetConnection", "HELLO WORLD");
    }
    /**
     * Check Internet Connection
     * @return true is Online
     */
    public static Boolean isInternetConnection()
    {
        Log.v("InternetConnection", "isInternetConnection Start");

        Context ctx = CCSocialNetwork.getAppContext();
        ConnectivityManager conMgr =  (ConnectivityManager)ctx.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo i = conMgr.getActiveNetworkInfo();

        if (i == null)
        {
            Log.v("InternetConnection", "isInternetConnection NULL :S");
            return false;
        }

        if (!i.isConnected())
        {
            Log.v("InternetConnection", "isInternetConnection is not connected");
            return false;
        }

        if (!i.isAvailable())
        {
            Log.v("InternetConnection", "isInternetConnection is not available");
            return false;
        }
        Log.v("InternetConnection", "isInternetConnection DONE!");
        return true;
    }
} 
```

但我得到：

```
 Fatal signal 7 (SIGBUS) at 0x00000000 (code=128) 
```

而且我有如果我能正确获得返回值，我也无法发送参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:13:08.767

您正在返回一个实际上是一个对象的布尔值。尝试返回一个布尔原始类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:16:43.033

Are you sure the FindClass didn't return NULL ? You're not checking for it

# jquery - 修改此查找函数以容纳多个值

> ID：15623483
> 
> 赞同：2
> 
> 时间：2013-03-25T19:50:43.043
> 
> 标签：jquery, find

此功能允许用户按颜色过滤产品（使用`data-attributes`）。如何修改它以容纳多个值？

我希望该函数返回与任何数据属性值匹配的所有项目，并在删除其中一个过滤器时恢复为其余过滤器的更严格标准（通过取消选中特定值或所有颜色值）。我在这里发布了一个简单的函数示例：http: [//jsfiddle.net/chayacooper/WZpMh/21/](http://jsfiddle.net/chayacooper/WZpMh/21/)。小提琴目前有`data-attributes`内部`<li>`标签，但我想使用复选框以允许多项选择。

**编辑 -产品在数据颜色***（即黑色、白色）*中可以有多个值，表明它有两种颜色可供选择，并且可以是多色的*（即黑色和白色）*。

我假设*`$(this).data('color')`*我应该使用类似的东西而不是*`$('input:checkbox:checked').data('color')`*，但我不确定如何构造它。

```
$(document).ready(function () {
    $('#attributes-Colors *').click(function () {
        var attrColor = $(this).data('color');
        $('#attributes-Colors').removeClass('active');
        $(this).parent().addClass('active');
        if (attrColor == 'All') {
            $('#content').find('*').show();
        } else {
            $('#content').find('li:not([data-color="' + attrColor + '"])').hide();
            $('#content').find('[data-color ~="' + attrColor + '"]').show();
        }
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:52:59.387

这是一种方法：

[http://jsfiddle.net/WZpMh/20/](http://jsfiddle.net/WZpMh/20/)

我没有为“所有颜色”链接添加任何处理，但这应该很容易做到

```
 var selected = [];
    $('#attributes-Colors *').click(function () {
        var attrColor = $(this).data('color');
        var $this = $(this);
        if ($this.parent().hasClass("active")) {
            $this.parent().removeClass("active");
            selected.splice(selected.indexOf(attrColor), 1);
        } else {
            $this.parent().addClass("active");
            selected.push(attrColor);
        }
        $("#content").find("*").hide();
        $.each(selected, function (index, item) {
            $('#content').find('[data-color ~="' + item + '"]').show();
        });
        return false;
    }); 
```

基本思想是保留所选颜色的数组，每次单击颜色按钮时，您将隐藏所有项目，然后重新显示与`selected`数组中所有颜色匹配的项目。

对于`all colors`你可以简单地添加一些额外的逻辑来空白所有其他的并使你所有的项目可见。

# javascript - JSHint 无法识别变量的“预期范围”

> ID：15623490
> 
> 赞同：0
> 
> 时间：2013-03-25T19:51:13.147
> 
> 标签：javascript, coding-style, jshint

根据其[文档](http://www.jshint.com/docs/)`funcscope`中对该选项的描述， JSHint 似乎认识到在“预期范围”中声明的变量的效用，例如控制结构等（即使实际上在 JS 中的函数内只有一个范围）。

那么，为什么它会引发以下错误，说它`i`被多次声明？

```
if (condition) {
    var i = 1;
    //
}
else {
    var i = 2;
    //
} 
```

设置`funcscope`为 true 或 false 无济于事。有没有办法抑制这个错误？

（我喜欢有“逻辑/预期”的变量范围，并且“定义”变量尽可能接近它们需要的位置。在需要移动代码块时帮助我。

编辑：我知道变量提升。但我不同意 Douglas Crockford 关于`var`在函数顶部声明所有 s 的观点。这使得代码更难阅读，并且当您必须移动代码片段时更难重构。如果您阅读`funcscope`JSHint 主页上的文档，它还谈到了*预期范围*，这也正是我所指的。我在这种情况下问我的问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:55:32.217

你这样做是不对的。您的代码相当于编写：

```
var i;
var i; // duplicate!

if (condition) {
    i = 1;
} else {
    i = 2;
} 
```

如您所见，您定义`i`了两次。我不相信有一面旗帜可以压制它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-07T14:19:14.760

如果你不想和道格拉斯一起去，那怎么样

```
if (condition) {
    var i = 1;
    //
}
else {
    i = 2;
    //
} 
```

只需删除第二个 var，因为您已经贴上了 var。你真的不需要两次声明 var 。

# java - 如何使用 mongoDb java 异步驱动程序插入 mongoDb 集合后获取 _id

> ID：15623492
> 
> 赞同：4
> 
> 时间：2013-03-25T19:51:18.673
> 
> 标签：java, mongodb, asynchronous, save, driver

如何使用 mongoDb java 异步驱动程序插入 mongoDb 集合后获取 _id

```
package test;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

import com.allanbank.mongodb.MongoClient;
import com.allanbank.mongodb.MongoClientConfiguration;
import com.allanbank.mongodb.MongoCollection;
import com.allanbank.mongodb.MongoDatabase;
import com.allanbank.mongodb.MongoFactory;
import com.allanbank.mongodb.bson.Document;
import com.allanbank.mongodb.bson.builder.BuilderFactory;
import com.allanbank.mongodb.bson.builder.DocumentBuilder;
import com.allanbank.mongodb.builder.Aggregate;
import com.xxxx.dto.FeedMongoDTO;

/**
* @author abhi
* 
*/
public class MongoTestService {

public static transient Log log = LogFactory.getLog(FeedMongoOperations.class);

private MongoClient mongo;
private MongoDatabase db;
private MongoCollection collection;

public boolean openDbConnection() {
    try {
        MongoClientConfiguration config = new MongoClientConfiguration();
        config.addServer("localhost:27017");
        config.setMaxConnectionCount(10);

        mongo = MongoFactory.createClient(config);

        db = mongo.getDatabase("feedDatabase");

        return true;
    } catch (Exception e) {
        return false;
    }
}

public boolean closeDbConnection() {
    try {
        mongo.close();
        return true;
    } catch (Exception e) {
        return false;
    }
}

public String save(FeedMongoDTO feed, String collectionName) {
    try {

        collection = db.getCollection(collectionName);
        DocumentBuilder b = BuilderFactory.start();
        Document d1 = b.add("url", feed.getUrl()).addLong("mongoTimeStamp", feed.getMongoTimestamp())
                .add("feedJsonArray", feed.getFeedJsonArray()).build();

        collection.insert(d1);

        return d1.get("id").toString();
    } catch (Exception ex) {
        return null;
    }
}

public FeedMongoDTO getFeed(String mongoId, String collectionName) {

    FeedMongoDTO feedMongoDTO = null;

    try {
        return feedMongoDTO;
    } catch (Exception ex) {
        return null;
    }
}
} 
```

哪里`FeedMongoDTO`有下面给出的结构

```
public class FeedMongoDTO {

    private String id;
    private String url;
    private Long mongoTimeStamp;
    private JSONArray feedJsonArray;

    //  Getters 
    public String getId() {
        return id;
    }

    public String getUrl() {
        return url;
    }

    public Long getMongoTimestamp() {
        return mongoTimeStamp;
    }

    public JSONArray getFeedJsonArray() {
        return feedJsonArray;
    }

    //  Setters 
    public void setId(String id) {
        this.id = id;
    }

    public void setUrl(String url) {
        this.url = url;
    }

    public void setMongoTimestamp(Long mongoTimestamp) {
        this.mongoTimeStamp = mongoTimestamp;
    }

    public void setFeedJsonArray(JSONArray feedJsonArray) {
        this.feedJsonArray = feedJsonArray;
    }

} 
```

我需要获取 _id 的值，但这`d1.get("id").toString()`是导致`NullPointerException`

还有一件事我很困惑我是否正确地执行了 Save() 方法。使用通常的 mongodb 驱动程序要容易得多。

```
public String save(FeedMongoDTO feed, String collectionName) {
    try {
        mongoTemplate.save(feed, collectionName);
        return feed.getId();
    } catch (Exception ex) {
        return null;
    } 
} 
```

提前致谢

阿比拉什 :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-30T01:30:12.773

如果这是您需要经常做的事情，为什么不自己设置_id。您可以使用 0-arg 构造函数轻松构造一个新的[ObjectId](http://www.allanbank.com/mongodb-async-driver/apidocs/index.html)，然后在插入之前将其添加到您的文档中。

```
ObjectId id = new ObjectId();
documentBuilder.add("_id", id);
collection.insert(documentBuilder); 
```

运行单独的查询只是为了检索 id 似乎很愚蠢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:03:07.233

在我看来，异步 java 驱动程序提供了进行同步查询的方法，例如使用正常的[findOne](http://www.allanbank.com/mongodb-async-driver/apidocs/index.html?com/allanbank/mongodb/MongoCollection.html)调用。这对您的需求有意义吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-15T01:51:42.593

使用异步节点应用程序在目录中创建新名称时，我自己遇到了这个问题。我想通过它的 ID 将用户带到新创建的名称，而不会将用户扔回目录列表。allTwentyQuestions 得到了这样的权利，虽然对 Node 来说并不完全正确，并引导我走上这条道路：

```
addName: function(nameDB, newName, callback){
  nameID = new require('mongodb').ObjectID();
  nameDB.collection('nameList').insert({"_id" : nameID, 'Name' : newName, 'type' : '', 'active' : 'no', 'modifiedDate' : ''}, function(err, result) {
    if (!err) {
        // success
        callback(null, nameID);
    } else {
        // error
        callback('error', err);
    }
  });
} 
```

然后我会从我的应用程序中调用该函数：

```
mongo.addName(nameDB, newName, function(err, result) {
  if (!err){
    // success
    // direct the user to the proper page with this new ObjectID found in the var 'result'
  } else {
    // error
    console.log('There was an error adding the name: '+ result);
  }
}); 
```

# mysql - SQL优化多个连接结果中的重复记录

> ID：15623493
> 
> 赞同：0
> 
> 时间：2013-03-25T19:51:29.053
> 
> 标签：mysql, sql, database, join, duplicates

例如，我有 3 个表：首先是“用户”，其中每个用户都存储了他的名字。第二 - “位置”，存储用户地址的位置 - 通常 1 个地址对应 1 个用户。第三个 - “消息” - 每个用户通常都有一堆记录。

当加入这三个表时 - 比如

```
SELECT Users.name, Location.address, Messages.message FROM Users
LEFT JOIN Location ON Location.user_id = Users.id
LEFT JOIN Messages ON Messages.user_id = Users.id
WHERE blah blah 
```

结果将包含许多重复记录，因为表“消息”对于每个用户都有许多记录。这些重复项会减慢获取速度。所以我正在寻找解决方案，如何优化它。例如，我尝试`GROUP_CONCAT()`使用`GROUP BY User.id`- 但是当结果`GROUP_CONCAT()`变得相对较长时，`GROUP_CONCAT()`开始返回`NULL`. 而且我无法掌握它，我试图设置`group_concat_max_len`和`max_allowed_packet`设置高值 - 所有这些都没有运气。

那么，有人对此有任何想法吗？

ps 可能需要注意的是，在我的真实案例中，我有很多列，而不是只有一列“消息”，并且有许多不同的行。我的“消息”表看起来像“消息”、“时间”、“收件人”、“已删除”、“中等”等，而我的 GROUP_CONCAT() 包含所有这些字段。

UPD：`GROUP_CONCAT()`如果只有一条记录似乎是，似乎会丢弃所有结果`NULL`。例如，如果使用`GROUP_CONCAT(Messages.message, Messages.time)`, 并且偶尔一行中的时间是`NULL`，它将返回 NULL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:53:41.113

在这种情况下，您实际上可能会受益于像 Mongo 这样的文档存储数据库，用于存储消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:05:04.987

> 结果将包含许多重复记录，因为表“消息”对于每个用户都有许多记录。

通过“重复”，是否意味着对于每条*唯一*消息都会有一行，并且该行将包含其他行中存在的用户名和位置的值？您是否在寻求一种将所有消息合并为一个的方法，以便每个用户+位置只有一行？为了*速度*？？

如果这是一个性能问题，我很想听听如何衡量，以及什么足够快。我还想知道，如果你成功了，你将如何区分消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T19:54:40.870

你可能想要`group_concat(distinct)`：

```
SELECT Users.name, group_concat(distinct Location.address) as locations,
       group_concat(distinct Messages.message) as messages
FROM Users
LEFT JOIN Location ON Location.user_id = Users.id
LEFT JOIN Messages ON Messages.user_id = Users.id
WHERE blah blah
group by users.name 
```

# mysql - 将十进制值转换为前 10

> ID：15623494
> 
> 赞同：0
> 
> 时间：2013-03-25T19:51:35.833
> 
> 标签：mysql, valueconverter

今天早些时候我得到了一些很大的帮助，但是当我应该在查询中实现它时比我想象的要困难得多。我的真实查询包括几个左连接。

我想添加两列，T3MOutput 和 T1GOutput，显示基于 T3M 和 T1G 列的 10-1 排名。在排名尺度中，最重要的值应该得到 10，最低（负值）应该得到 1。注意！一场赛马在开始时可以少于 15 匹马。在十个最佳值获得 10-1 之后，其余的也应该获得值 1。

小提琴：[http ://sqlfiddle.com/#!2/9c5fc/4](http://sqlfiddle.com/#!2/9c5fc/4)

我应该在哪里实现这行代码或其他解决方案？我只得到值 1 整个..

```
(SELECT @row:=11 r) rows 
```

以下是所有代码：

```
SELECT

base.number as NR,
rank.rpo AS RPO,
rank.rsp AS RSP,
rank.rsv AS RSV,
timer.t3m AS T3M, CASE WHEN @row>1 THEN @row:=@row-1 ELSE 1 END T3MOutput,
timer.t1g AS T1G, CASE WHEN @row>1 THEN @row:=@row-1 ELSE 1 END T1GOutput

FROM round
LEFT JOIN base 
ON round.id = base.round_id 

LEFT JOIN rank 
ON  round.id = rank.round_id AND rank.number = base.number

LEFT JOIN timer    
ON round.id = timer.round_id AND timer.number = base.number

ORDER BY nr 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:15:40.293

第一的

```
SELECT MIN(timer.t3m) AS MinT3M, MAX(timer.t3m) AS MaxT3M,
  MIN(timer.t1g) AS MinT1G, MAX(timer.t1g) AS MaxT1G
  FROM round INNER JOIN timer ON round.id = timer.round_id
  WHERE round.round_date = '2013-03-22' 
    AND round.gameform = 'V65'
    AND round.gameform_info = 'V65-1'
    AND round.gameform not like "OSPEC"; 
```

然后你可以使用我打字时理查德提出的计算。

[请参阅此处](http://sqlfiddle.com/#!2/9c5fc/66)使用您的数据的 SQL Fiddle 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:29:03.183

这有点棘手，也许这就是你要找的东西？

```
SELECT
  q2.*,
  CASE WHEN @row>1 AND T1G is not NULL THEN @row:=@row-1 ELSE 1 END T1GOutput
FROM (

SELECT
  q1.*,
  CASE WHEN @row>1 AND T3M is not NULL THEN @row:=@row-1 ELSE 1 END T3MOutput
FROM (
SELECT
  base.number as NR,
  rank.rpo as RPO,
  rank.rsp as RSP,
  rank.rsv as RSV,
  timer.t3m as T3M,
  timer.t1g AS T1G
FROM

  round LEFT JOIN base 
  ON round.id = base.round_id 

  LEFT JOIN rank 
  ON round.id = rank.round_id and rank.number = base.number

  LEFT JOIN timer    
  ON round.id = timer.round_id and timer.number = base.number

order by T3M DESC
  ) q1, (SELECT @row:=11) rows
) q2,  (SELECT @row:=11) rows
ORDER BY
  T1G 
```

请[在此处](http://sqlfiddle.com/#!2/9c5fc/84)查看小提琴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T20:12:18.040

假设您正在尝试对这些值进行排名，一种可能的方法是首先确定 T3M 和 T1G 的最小值和最大值，然后使用以下内容：

```
SELECT ...,
       ((T3M-@T3M_Min)/(@T3M_Max-@T3M_Min))*9+1 as T3MOutput,
       ((T1G-@T1G_Min)/(@T1G_Max-@T1G_Min))*9+1 as T1GOutput 
```

可能必须转换为整数值

# python - setuptools：找不到文件 dynamic_dynamodb.py（用于模块 dynamic_dynamodb）

> ID：15623495
> 
> 赞同：1
> 
> 时间：2013-03-25T19:51:40.000
> 
> 标签：python, setuptools

我正在尝试构建我相当简单的 Python 项目，以便：

*   `dynamic-dynamodb`安装了系统范围的命令
*   该命令指向`dynamic_dynamodb.main:main`

我的项目如下所示：

```
.
├── LICENSE
├── MANIFEST.in
├── Makefile
├── README -> README.md
├── README.md
├── dynamic_dynamodb
│   ├── __init__.py
│   ├── dynamic_dynamodb.py
│   └── main.py
├── example-dynamic-dynamodb.conf
├── requirements.txt
└── setup.py 
```

当我在根文件夹中只有一个 Python 文件时，它就可以正常工作了。但是当项目增长时，我不得不拆分代码并将其放入一个模块（即文件夹`dynamic_dynamodb`）中。现在我的`setup.py`样子是这样的：

```
""" Setup script for PyPI """
from setuptools import setup, find_packages

setup(name='dynamic-dynamodb',
    version='0.3.0-SNAPSHOT',
    license='Apache License, Version 2.0',
    description='Automatic provisioning for AWS DynamoDB tables',
    author='Sebastian Dahlgren',
    author_email='sebastian.dahlgren@gmail.com',
    url='http://sebdah.github.com/dynamic-dynamodb/',
    keywords="dynamodb aws provisioning amazon web services",
    platforms=['Any'],
    py_modules=['dynamic_dynamodb'],
    packages=find_packages('dynamic_dynamodb'),
    include_package_data=True,
    zip_safe=False,
    install_requires=[
        'boto >= 2.6.0'
    ],
    classifiers=[
        'Development Status :: 4 - Beta',
        'Environment :: Console',
        'License :: OSI Approved :: Apache Software License',
        'Operating System :: OS Independent',
        'Programming Language :: Python'
    ],
    entry_points={
        'console_scripts': [
            'dynamic-dynamodb = dynamic_dynamodb.main:main',
        ]
    }
) 
```

问题是，当我使用构建时，`python setup.py sdist`我看到以下错误：

```
file dynamic_dynamodb.py (for module dynamic_dynamodb) not found 
```

有没有人有任何指示可以将我踢向正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:19:08.697

我按照本指南解决了这个问题：[http ://wiki.python.org/moin/Distutils/Tutorial](http://wiki.python.org/moin/Distutils/Tutorial)

弹跳点是：

*   在根目录中创建一个新脚本（这将是站点范围内可访问的脚本）
*   无需`py_modules`在`setup.py`. 只需使用软件包。
*   现在使用`distutils`，因为我不需要任何`setuptools`功能

我的新`setup.py`：

```
""" Setup script for PyPI """
from distutils.core import setup

setup(name='dynamic-dynamodb',
    version='0.3.0-SNAPSHOT',
    license='Apache License, Version 2.0',
    description='Automatic provisioning for AWS DynamoDB tables',
    author='Sebastian Dahlgren',
    author_email='sebastian.dahlgren@gmail.com',
    url='http://sebdah.github.com/dynamic-dynamodb/',
    keywords="dynamodb aws provisioning amazon web services",
    platforms=['Any'],
    packages=['dynamic_dynamodb'],
    scripts=['dynamic-dynamodb'],
    include_package_data=True,
    zip_safe=False,
    install_requires=[
        'boto >= 2.6.0'
    ],
    classifiers=[
        'Development Status :: 4 - Beta',
        'Environment :: Console',
        'License :: OSI Approved :: Apache Software License',
        'Operating System :: OS Independent',
        'Programming Language :: Python'
    ]
) 
```

# javascript - 调整浏览器大小时使用javascript移动放置div层但不应该

> ID：15623496
> 
> 赞同：0
> 
> 时间：2013-03-25T19:51:43.617
> 
> 标签：javascript, css

我正在开发一个小型应用程序来学习 Web 开发中的 Python/Flask，但我遇到的问题与 CSS / javascript 有关，我无法弄清楚。让我们看看它的实际效果：

1.  访问[http://sareon.pythonanywhere.com/](http://sareon.pythonanywhere.com/)
2.  输入游戏ID“20234”
3.  在左侧的图像上单击几次以创建一些新的 div 层/图像
4.  调整浏览器的大小并观察新创建的图像不会停留在您单击它们的位置。

我不知道如何解决这个问题。

我认为这是因为 .puck CSS 的位置是绝对的。将其更改为相对，并且事情与您单击的位置不匹配，但是当您调整浏览器大小时它们不会移动。无论您单击何处，静态都会使所有内容都沿图像的一侧排列。固定与绝对做同样的事情。

所以我不确定如何解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T19:55:41.550

试着把它们放在一个`position: relative`容器里，然后每个冰球应该是静止`position: absolute`的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:08:02.473

您正在“绝对”定位每个 .puck 元素。原点（左：0；上：0）值必须来自 .puck 的父元素之一。由于 .puck 的所有父元素都没有明确定义的“位置”属性，因此它将默认位于浏览器窗口的左上角。

修复？向#hockeyRinkHome 元素添加“位置：相对”。这样，当 .puck 元素被定位时，它只会向上遍历一个 div 到 #hockeyRinkHome 元素，并决定将其绝对位置作为该元素的基础。它的左上角变成了新的（左：0；上：0）。

您必须重新调整计算以放置每个 .puck。然而，它现在将始终保持稳定和恒定。

# scala - 显示类线性化的便捷方法？

> ID：15623498
> 
> 赞同：6
> 
> 时间：2013-03-25T19:51:47.040
> 
> 标签：scala, read-eval-print-loop

我敢打赌，有一些时髦的方法可以通过新的反射库和/或 repl 电源模式在 repl 中显示线性化。这些是什么？

在我的特殊情况下，我试图了解 ArrayBuffer 实例的线性化。
（我正在尝试创建一个类似的类，即 Buffer 和 IndexedSeqOptimized，并且我发现编译器抱怨重写方法 seq 具有不兼容的类型）

scala 类的线性化规则在[scala 规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)第 5.1.2 节中描述。据我了解，方法覆盖以线性化顺序进行，而初始化以反向线性化顺序进行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T20:54:39.930

`baseClasses`Scala 反射 API上有一个方法`Type`，`ClassSymbol`根据它的 scaladoc，它返回：

> 此类型的所有基类（包括它自己的 typeSymbol）的列表，以反向线性化顺序排列，从类本身开始，到类 Any 结束。

这个怎么用？`scala.collection.immutable.List`这是一个以反向线性化顺序打印所有超类的示例：

```
import scala.reflect.runtime.universe._
val tpe = typeOf[scala.collection.immutable.List[_]]
tpe.baseClasses foreach { s => println(s.fullName) } 
```

输出：

```
scala.collection.immutable.List
scala.collection.LinearSeqOptimized
scala.Product
scala.collection.immutable.LinearSeq
scala.collection.LinearSeq
scala.collection.LinearSeqLike
scala.collection.immutable.Seq
scala.collection.immutable.Iterable
scala.collection.immutable.Traversable
scala.Immutable
scala.collection.AbstractSeq
scala.collection.Seq
scala.collection.SeqLike
scala.collection.GenSeq
scala.collection.GenSeqLike
scala.PartialFunction
scala.Function1
scala.collection.AbstractIterable
scala.collection.Iterable
scala.collection.IterableLike
scala.Equals
scala.collection.GenIterable
scala.collection.GenIterableLike
scala.collection.AbstractTraversable
scala.collection.Traversable
scala.collection.GenTraversable
scala.collection.generic.GenericTraversableTemplate
scala.collection.TraversableLike
scala.collection.GenTraversableLike
scala.collection.Parallelizable
scala.collection.TraversableOnce
scala.collection.GenTraversableOnce
scala.collection.generic.FilterMonadic
scala.collection.generic.HasNewBuilder
java.lang.Object
scala.Any 
```

# python - Python：为书面报告创建带有路线的地图 png 的最佳方法是什么？

> ID：15623509
> 
> 赞同：2
> 
> 时间：2013-03-25T19:52:45.137
> 
> 标签：python, google-maps, map, png, openstreetmap

我正在寻找一种在 python 脚本中制作地图的 png 文件的方法，该文件显示旅行为线（我的坐标已经为纬度、经度和海拔高度）。据我所知，使用“离线”或打印的谷歌地图是不合法的，所以我的目标是 OpenStreet 地图。

你能给我推荐一种方法吗？任何可以帮助我的模块？甚至是一个例子？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T20:55:23.937

对于此类任务，我无法高度推荐[tilemill 。](http://mapbox.com/tilemill/)它可以让您从大量选择中选择一个基本地图，或者从 OSM 数据中导入您自己的地图并设置其样式。它还对像您的路线这样的数据层有很好的支持。最重要的是它有很棒的文档和[教程](http://mapbox.com/tilemill/docs/crashcourse/introduction/)。

如果你想完全留在 python 中，那么我推荐使用[Mapnik](http://mapnik.org/)库。

您将需要一个数据文件，例如[此处](http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/110m/physical/ne_110m_coastline.zip)的 shapefile ：

`ne_110m_admin_0_countries.shp`

一个 xml 样式文件：

```
<Map background-color="black" srs="+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs">
  <Style name="My Style">
    <Rule>
      <PolygonSymbolizer fill="#f2eff9" />
      <LineSymbolizer stroke="rgb(50%,50%,50%)" stroke-width="5.0" />
    </Rule>
  </Style>
  <Layer name="world" srs="+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs">
    <StyleName>My Style</StyleName>
    <Datasource>
      <Parameter name="type">shape</Parameter>
      <Parameter name="file">ne_110m_admin_0_countries.shp</Parameter>
    </Datasource>
  </Layer>
</Map> 
```

和一个python脚本：

```
import mapnik
stylesheet = 'world_style.xml'
image = 'world_style.png'
m = mapnik.Map(2000, 1500)
mapnik.load_map(m, stylesheet)
m.zoom_all() 
mapnik.render_to_file(m, image)
print "rendered image to '%s'" % image 
```

# ios - 基于 SQLite 的核心数据：删除索引以减小大小并在以后重新创建它们

> ID：15623515
> 
> 赞同：0
> 
> 时间：2013-03-25T19:53:06.493
> 
> 标签：ios, objective-c, sqlite, core-data

是否可以删除 Core Data 底层 SQLite 数据库中的索引以节省空间并在以后自动重新创建索引？

有哪些额外的可能性可以将数据库的大小减少到最小并压缩/压缩它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:05:17.467

Core Data API 级别不支持该功能。但是您应该查看`NSSQLitePragmasOption`传递给的选项字典中的选项`-addPersistentStoreWithType:configuration:URL:options:error:`。

我经常在字典中添加`NSSQLiteAnalyzeOption`和`NSSQLiteManualVacuumOption`。

如果你真的想压缩空间，你总是可以手动操作 .sqlite 文件，在 Core Data 堆栈不活动时进行压缩和解压缩。我自己从来没有理由这样做。我总是受限于速度，而不是大小。

# objective-c - NSSplitView：如何不使用窗口调整大小，而只能以“手动”方式调整？

> ID：15623518
> 
> 赞同：7
> 
> 时间：2013-03-25T19:53:16.403
> 
> 标签：objective-c, nssplitview

我有一个简单的垂直`NSSplitView`，当我调整窗口大小时我不想保持他的大小，但我希望`NSSplitView`在拖动分隔两个视图的垂直条时允许手动调整大小。

编辑。这是我添加的代码，由于某种原因，一切都出错了：左窗格（sourceView）在调整窗口大小时保持相同的大小，但右窗格具有正确的自动布局约束（在不实现以下方法的情况下运行良好） . NSSrollView 是左窗格，我不想保持在同一位置，其他视图可能会随窗口调整大小。

```
- (BOOL)splitView:(NSSplitView *)splitView shouldAdjustSizeOfSubview:(NSView *)subview
{
    if ([subview class] == [NSScrollView class])
        return NO;

    return YES;

} 
```

有人知道这样做的快速解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T20:47:26.110

在 Xcode 4.6 中，垂直拆分视图的左侧自定义视图**不是 NSScrollView**。

```
@synthesize leftView;

- (BOOL)splitView:(NSSplitView *)splitView shouldAdjustSizeOfSubview:(NSView *)subview {
    if (subview == leftView) return NO;
    else return YES;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-15T04:35:39.213

尝试将拆分视图项目的行为设置为侧边栏

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T23:36:38.480

您需要实施`NSSplitViewDelegate`. 特别是，您需要确保返回`NO`for `-splitView:shouldAdjustSizeOfSubview:`，这将阻止自动调整大小。

由于您在每个 splitView 中至少有 2 个子视图，因此您需要确定您不想移动哪个子视图，因此`NO`只为它和`YES`您要更改的视图返回。因此，例如，如果您有一个源列表，并且您希望它保持不变，除非是手动操作，`NO`请返回源列表和`YES`另一侧。

# sed - 运行“sed”命令时如何修复“没有以前的正则表达式”错误？

> ID：15623520
> 
> 赞同：11
> 
> 时间：2013-03-25T19:53:21.393
> 
> 标签：sed

我正在尝试在脚本中运行以下表达式以查找设备并更改 HTML 文件中与设备关联的字段之一。

```
sed -e "s/$OLDTEST/$TESTING/" -e "s/$CURRENTVALU/$NEWSTATUS---$DATE/" -e "s/$PASSORFAIL/$PASSORFAILNEW/" -e "s/$BGCOLOR/$BGCOLORNEW/$POSITION"  -e "s/$OLDNOTE/$NOTE/"  >> //sysadm/shared/file.tmp 
```

我似乎不断收到“没有以前的正则表达式”。有任何想法吗？

调试日志输出：

```
sed -e s//Yes/ -e s//Resolved---03-25-13/ -e s//Pass/ -e s//#348017/1 -e s///

sed: -e expression #5, char 0: no previous regular expression 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-25T21:11:08.103

你的调试日志告诉你整个故事;-)

```
sed -e s//Yes/ -e s//Resolved---03-25-13/ -e s//Pass/ -e s//#348017/1 -e s///
 #------^-- empty regular expression 
```

因此错误消息`"no previous regular expression".`

不清楚你的经验，所以有2个解决方案。回想一下，在基于 unix/linux 的 shell 中，将评估 dbl-quotes 内的字符串以进行变量替换，并且您的代码`"s/$OLDTEST/$TESTING/"`看起来像需要变量替换的字符串。

你可能需要做

```
export OLDTEST="something old"
export TESTING="something new" 
```

使该代码正常工作。

如果您真的希望将文字字符串 '$OLDTEST' 替换为文字字符串 '$TESTING'，那么您必须从 shell 处理中“隐藏”变量。我们在 unix/linux 中使用单引号字符来执行此操作.，那么你的命令将是

```
sed 's/$OLDTEST/$TESTING/
     s/$CURRENTVALU/$NEWSTATUS---$DATE/
     s/$PASSORFAIL/$PASSORFAILNEW/
     s/$BGCOLOR/$BGCOLORNEW/$POSITION
     s/$OLDNOTE/$NOTE/'  >> //sysadm/shared/file.tmp 
```

但是..我在这里看不到输入文件。

所以它真的

```
sed 's/ ...../..../ ; s/../..../; etc; s/.../../' inputFile >> //sysadm/shared/file.tmp 
```

而且您可能真的不想将具有 tmp 扩展名的内容附加到现有文件中，所以...

```
sed 's/ ...../..../ ; s/../..../; etc; s/.../../' inputFile > //sysadm/shared/file.tmp
#-----------------------------------------------only one > -^------- 
```

使用`>>`手段作为您的测试来增强您的 sed 脚本，您将每次运行的结果附加到同一个文件中。你会得到很多重复的信息。

我使用了 sed 速记，省略了该`-e`选项。正如我在这里展示的那样，Sed 可以将整个 cmd 组作为一个参数来处理。您也可以将所有这些命令放入一个单独的文件中，然后像这样调用它

```
 sed -f fixer.sed inputFile > //sysadmin/shared/file.tmp 
```

最后，如果您`sed`支持该`-i`选项，您可以“在线”您的更改并且只需

```
sed -i -f fixer.sed inputFile 
```

sed 将用更改覆盖旧文件。我建议不要这样做，直到您确定所有更改您的尝试工作并且不会造成任何意外后果。一旦您的原始文件消失了，就无法找回它，因此保存到 .tmp 是一个很好的安全带:-)

IHTH

# php - 使用两个过滤器时 SQL 查询不起作用

> ID：15623525
> 
> 赞同：1
> 
> 时间：2013-03-25T19:53:37.657
> 
> 标签：php, sql, sql-server, sql-server-2008

我正在开发一个 SQL 查询，该查询将在我的网站中实现以显示表格。这个特定的查询只会用它计数的数字填充一个表格单元格。

目前，由于下面的最终 INNER JOIN，它仅在表 5 中找到主键（column1）少于 3 次时才计算行数。到目前为止，查询工作正常。

```
SELECT COUNT (a.column1) AS test
    FROM Table1 a
    INNER JOIN Table2 b ON […]
    INNER JOIN Table3 c ON […]
    INNER JOIN Table4 d ON […]
    INNER JOIN (SELECT column1 FROM Table 5 GROUP BY column1 HAVING COUNT (column1)<3) e ON e.column1=a.column1
    WHERE a.column2 IS NULL 
```

问题是我还想计算未出现在 Table5 中（但存在于 Table1 中）的行。目前我让它工作的唯一方法是添加以下代码

```
AND a.column1 NOT IN (SELECT f.column1 FROM Table5 f) 
```

但是，它仅在不包含最终 INNER JOIN 时才有效，我无法让它同时处理这两个约束。基本上，总而言之，如果主键（column1）在 table5 中出现的次数少于 3 次，或者它根本不在 table5 中，我希望对行进行计数。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T19:59:50.983

您需要执行 a`LEFT JOIN`并在 上添加`<3`和不存在条件`WHERE`：

```
SELECT COUNT (a.column1) AS test
FROM Table1 a
INNER JOIN Table2 b 
    ON […]
INNER JOIN Table3 c 
    ON […]
INNER JOIN Table4 d 
    ON […]
LEFT JOIN ( SELECT column1 , COUNT(column1) N
            FROM Table5 
            GROUP BY column1) e 
    ON e.column1=a.column1
WHERE a.column2 IS NULL
AND (e.N<3 OR e.column1 IS NULL) 
```

# game-engine - 如何实现游戏保存，以便开发人员可以避免创建上帝类/对象？

> ID：15623527
> 
> 赞同：0
> 
> 时间：2013-03-25T19:53:39.513
> 
> 标签：game-engine, software-design, god-object

昨天在玩电子游戏的时候突然想到一个问题，游戏保存机制是怎么实现的？

大多数情况下，保存需要游戏的所有数据。在这种情况下，程序员不是必须制作一个引用每一个游戏数据的上帝对象吗？

我在这里发布问题而不是游戏开发，因为我想要基于软件设计而不是游戏开发本身的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:59:57.323

您应该记住的一件事是您只需要存储重要的数据。例如，这可能包括库存内容（可能是 ID 和数量的列表）、玩家位置和关键任务位（您是否已经从被禁止的冰箱中获得了魔法芹菜？）。这可以用类似[Memento](http://en.wikipedia.org/wiki/Memento_pattern)模式的东西来实现，尽管在实践中它通常只是一个序列化到磁盘的结构（或等价物）。

您不需要保存整个世界状态，因为关卡加载器通常会负责项目/实体在世界中的放置。如果你仔细看，你会发现恢复存档并不一定要恢复世界上所有事物的准确状态——只有重要的部分。这是一种在游戏中经常使用的心理技巧。

保存文件的其他一些注意事项可能包括用于检测保存文件篡改的哈希或校验和，或存储运行时[RNG](http://en.wikipedia.org/wiki/Random_number_generation)将用于在游戏加载后创建相同系列事件/实体的种子值。

基本上，您实际上并不需要保存世界状态的每一点 - 只是玩家可能关心的部分:-)

# javascript - Knokout：如何先加载查找数据，然后加载主数据？

> ID：15623531
> 
> 赞同：0
> 
> 时间：2013-03-25T19:53:57.103
> 
> 标签：javascript, knockout.js

在我的网页上，我有 4 个查找表（职位、教育等）和有关所选人员的数据。我正在使用 Knockout 以及我从服务器异步加载的所有数据。

目前在viewmodel中，首先我调用了加载查找表的函数（函数getPositions、getEducation等），然后我加载了主要数据，但有时一些查找数据不会出现。我的猜测是该人的数据首先加载一些查找数据。

我加载数据的方式

```
this.getEducation = (function () {
    getEducation(function (data) {
       this.education = data;
    },
    function (msg) {
    });
}); 
```

如何先加载查找数据，然后再加载人员数据？

# python - 延迟特定请求的 Django HttpResponse

> ID：15623532
> 
> 赞同：1
> 
> 时间：2013-03-25T19:53:58.647
> 
> 标签：python, django

我正在为蛮力登录尝试编写一个简单的解决方案。如果有很多失败的尝试，我需要在发送响应之前添加延迟。你们建议为个人请求增加延迟是什么？它必须是每个请求，以便为特定资源提供服务的线程不应该受到下一个请求的影响。

谢谢。

编辑：根据[this question](https://stackoverflow.com/questions/15084367/django-sleep-pauses-all-processes-but-only-if-no-get-parameter) when running on Apache on Webfaction time.sleep 将延迟对同一资源的下一个请求。

那么在这种情况下，什么可以替代 time.sleep 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:52:22.373

如果您在线程服务器中延迟响应，您的服务将容易受到 DOS 攻击。攻击者可能一次发送可能的请求，并且您的所有线程将立即休眠...

如果来自同一 IP 的尝试次数过多，您最好询问 CAPTCHA。

**Upd**：我会使用 Twisted（*或 Tornado*，但我从未使用过）和 nginx（不是 Apache）作为前端。您甚至可以同时使用 Twisted 和 Django，但是您必须编写模仿 Django 身份验证和会话与 Twisted 的代码，将适当的数据写入数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T19:56:52.463

如果我错了，请投反对票，但我认为每个线程一次只处理一个请求。因此，如果您想要一个缓慢的请求，只需`time.sleep`在该线程中执行一个，服务器将花费更长的时间来处理它，而不会影响其他并发请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T20:07:42.360

Http 是一种无状态协议。连接请求的唯一方法是将会话信息存储在客户端的某处。由于您无法控制客户端行为，因此最好的机会是在服务器端记录失败的登录尝试并延迟这些帐户的登录例程。

# javascript - setInterval 和 json

> ID：15623533
> 
> 赞同：0
> 
> 时间：2013-03-25T19:54:03.123
> 
> 标签：javascript, jquery, json

我有一个简单的 html 表单。（一个输入（文本）和一个提交按钮。）。当我输入任何单词并按下提交按钮时，会显示最近的 10 条推文。并且推文列表必须每 15 秒刷新一次。我已经使用 javascript 和 json 成功访问了 twitters 数据库（仅限公共推文）。但刷新部分不能正常工作。
这是我的javascript代码：

```
function f()
{
    var words = document.getElementsByTagName("input");
    words = words[0].value;

    json(words);
    setInterval(function(){
        json(words);
    }, 15000);
}

function json(words)
{
    $.getJSON("http://search.twitter.com/search.json?q="+words+"&rpp=10&callback=?", function(data){
        var results = data.results; 
        var tweet ='<div>';

        for(i=0; i<results.length; i++){
            var nickname = results[i].from_user;
            var text = results[i].text;

                tweet+='<b><p>'+nickname+'</p></b><br/>';
                tweet+='<p>'+text+'</p>';
        }
        tweet +='</div>';

        $('#tweets').html(tweet);
    });
} 
```

当我按下提交按钮时，会触发 f 函数并调用 json 函数。我的问题是：例如，当我输入“chelsea”并按下提交按钮时，项目会显示结果并每 15 秒刷新一次。然后，如果我输入“曼彻斯特”并按下提交按钮，项目必须仅显示“曼彻斯特”的结果。但它显示有关“曼彻斯特”和“切尔西”的结果。它拥有旧值。我怎样才能避免它们，有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:59:29.067

您需要清除以前的 setInterval

你可以这样做：

```
var intv;
    function f()
    {
        clearInterval(intv);
        var words = document.getElementsByTagName("input");
        words = words[0].value;

        json(words);
        intv= setInterval(function(){
            json(words);
        }, 15000);
    } 
```

# ios - Facebook SDK 收集用户信息和好友

> ID：15623536
> 
> 赞同：4
> 
> 时间：2013-03-25T19:54:23.223
> 
> 标签：ios, objective-c, facebook-graph-api, facebook-ios-sdk

我正在尝试使用 Facebook SDK 来收集用户信息和朋友。理想情况下，我想使用 FBRequest 而不是 FBConnectionRequest。正如 Facebook 开发者页面上所详述的那样，它说将 FBRequest 用于多个信息请求，而 Connection 仅用于一个。

> 可以重用 FBRequest 对象来向 Facebook 发出多个连接。然而，每个 FBRequestConnection 实例将管理一个连接。

[资源](https://developers.facebook.com/docs/reference/ios/3.2/class/FBRequest)

我目前已经设置了一个 FBRequestConnection ，它工作正常：

```
[FBRequestConnection startForMeWithCompletionHandler:^(FBRequestConnection *connection, id<FBGraphUser> user, NSError *error) 
```

我想要实现的是收集用户信息，例如姓名、用户名和电子邮件地址等（这与上述内容很好，我已经处理了会话/具有此权限。

现在我需要将连接更改为 FBRequest，这样我可以使用以下委托方法：

```
- (void)request:(FBRequest *)request didLoad:(id)result { 
```

然后在委托方法中，我将调用第二个 requestForMyFriends 并在一个方法中处理这两个大量信息。我的请求创建在我的登录块中完成，就是这样：

```
 FBRequest *request = [FBRequest requestForGraphPath:@"me/?fields=name,picture"];
    [request startWithCompletionHandler:NULL]; 
```

首先，这是解决这个问题的正确方法吗？

其次，当它到达 FBRequest 时我收到一个错误，所以这里肯定有问题，但我不确定什么是不正确的。我在 Facebook 上找不到更多信息，但如果有人可以使用这种方法为我指出正确的教程方向，那也会有所帮助。

编辑——错误 ![在此处输入图像描述](../Images/fb735d5153fd072979558ffe1794e255.png)

编辑 2——附加代码示例

```
// TODO : logging can be turned off/removed
[FBSettings setLoggingBehavior:[NSSet setWithObjects:FBLoggingBehaviorFBRequests, nil]];

NSDictionary *params = @{ @"fields" : @[ @"name", @"picture" ] };
FBRequest *request = [FBRequest requestWithGraphPath:@"me"
                                          parameters:params
                                          HTTPMethod:nil]; //nil will default on GET
[request startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {}]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T18:23:54.923

`EXC_BAD_ACCESS`由于您无法将空的完成处理程序块传递给该方法，因此您收到错误消息。

下面的代码经过测试，可以按预期工作。

```
FBRequest *request = [FBRequest requestForGraphPath:@"me/?fields=name,picture"];
[request startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    NSLog(@"%@", result);
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-17T23:23:11.597

仅获得具有**READ 访问权限的用户权限**

```
 let permissionsDesired = ["email", "public_profile", "user_friends"]

    let facebookLogin = FBSDKLoginManager()
    facebookLogin.logInWithReadPermissions(permissionsDesired,
                                        fromViewController: sender)
        { (facebookLogin:FBSDKLoginManagerLoginResult!, facebookError:NSError!) -> Void in

            if facebookError != nil
            {
                print("Facebook login. Error: \(facebookError.localizedDescription)")

                self.delegate?.permissionResults(false)
            }
            else
            {
                   // access granted, you can start 
                   //requesting user data now
                   self.requestUserInfo()
            }
    } 
```

以下是在获得用户授予权限**后**如何获取用户数据

```
func requestUserInfo( )
{

    let graphPath:String            = "me"
    let httpMethod:String           = "GET"
    var listOfrequest:String = String("about")
    listOfrequest = listOfrequest .stringByAppendingString(",age_range")
    listOfrequest = listOfrequest .stringByAppendingString(",bio")
    listOfrequest = listOfrequest .stringByAppendingString(",birthday")
    listOfrequest = listOfrequest .stringByAppendingString(",context")
    listOfrequest = listOfrequest .stringByAppendingString(",cover")
    listOfrequest = listOfrequest .stringByAppendingString(",currency")
    listOfrequest = listOfrequest .stringByAppendingString(",devices")
    listOfrequest = listOfrequest .stringByAppendingString(",education")
    listOfrequest = listOfrequest .stringByAppendingString(",email")
    listOfrequest = listOfrequest .stringByAppendingString(",favorite_athletes")
    listOfrequest = listOfrequest .stringByAppendingString(",favorite_teams")
    listOfrequest = listOfrequest .stringByAppendingString(",first_name")
    listOfrequest = listOfrequest .stringByAppendingString(",gender")
    listOfrequest = listOfrequest .stringByAppendingString(",hometown")
    listOfrequest = listOfrequest .stringByAppendingString(",id")
    listOfrequest = listOfrequest .stringByAppendingString(",inspirational_people")
    listOfrequest = listOfrequest .stringByAppendingString(",installed")
    listOfrequest = listOfrequest .stringByAppendingString(",install_type")
    listOfrequest = listOfrequest .stringByAppendingString(",is_shared_login")
    listOfrequest = listOfrequest .stringByAppendingString(",is_verified")
    listOfrequest = listOfrequest .stringByAppendingString(",languages")
    listOfrequest = listOfrequest .stringByAppendingString(",last_name")
    listOfrequest = listOfrequest .stringByAppendingString(",link")
    listOfrequest = listOfrequest .stringByAppendingString(",locale")
    listOfrequest = listOfrequest .stringByAppendingString(",location")
    listOfrequest = listOfrequest .stringByAppendingString(",meeting_for")
    listOfrequest = listOfrequest .stringByAppendingString(",middle_name")
    listOfrequest = listOfrequest .stringByAppendingString(",name")
    listOfrequest = listOfrequest .stringByAppendingString(",name_format")
    listOfrequest = listOfrequest .stringByAppendingString(",payment_pricepoints")
    listOfrequest = listOfrequest .stringByAppendingString(",picture")
    listOfrequest = listOfrequest .stringByAppendingString(",political")
    listOfrequest = listOfrequest .stringByAppendingString(",public_key")
    listOfrequest = listOfrequest .stringByAppendingString(",quotes")
    listOfrequest = listOfrequest .stringByAppendingString(",relationship_status")
    listOfrequest = listOfrequest .stringByAppendingString(",religion")
    listOfrequest = listOfrequest .stringByAppendingString(",security_settings")
    listOfrequest = listOfrequest .stringByAppendingString(",shared_login_upgrade_required_by")
    listOfrequest = listOfrequest .stringByAppendingString(",significant_other")
    listOfrequest = listOfrequest .stringByAppendingString(",sports")
    listOfrequest = listOfrequest .stringByAppendingString(",test_group")
    listOfrequest = listOfrequest .stringByAppendingString(",third_party_id")
    listOfrequest = listOfrequest .stringByAppendingString(",timezone")
    listOfrequest = listOfrequest .stringByAppendingString(",updated_time")
    listOfrequest = listOfrequest .stringByAppendingString(",verified")
    listOfrequest = listOfrequest .stringByAppendingString(",video_upload_limits")
    listOfrequest = listOfrequest .stringByAppendingString(",viewer_can_send_gift")
    listOfrequest = listOfrequest .stringByAppendingString(",website")
    listOfrequest = listOfrequest .stringByAppendingString(",work")

    let params:[NSObject:AnyObject] =  ["fields": listOfrequest ]

    let graphRequest : FBSDKGraphRequest = FBSDKGraphRequest(graphPath: graphPath,
                                                            parameters: params,
                                                            HTTPMethod: httpMethod)

    graphRequest.startWithCompletionHandler(
        { (connection:FBSDKGraphRequestConnection!, userData:AnyObject!, error:NSError!) -> Void in

            if (error == nil)
            {
               print(userData) 
            }
            else
            {
                print("Error: \(error.localizedDescription)")
                //Handle error here
            }
    })

}//eom 
```

# extjs - 一次发送主详细信息表

> ID：15623539
> 
> 赞同：0
> 
> 时间：2013-03-25T19:54:34.087
> 
> 标签：extjs, extjs4

我的应用程序有一个表单，用户在其中插入主记录（医疗处方）并插入一些细节（药物）。

我需要通过一次调用将这一切发送到服务器（现在我正在使用 rails）。

如何使用 extjs 4 做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:59:39.930

我解决了这个问题，构建了一个包含所有子记录内容的字符串。在服务器中，我在这个字符串中创建了一个“eval”以保存为一个数组。

前任。：

```
[{drug_id:1, morning: "1", night: "2"}, {drug_id:2, morning: "0", night: "1"},...] 
```

# ffmpeg - 在没有 FFmpeg 的情况下流式传输到 FFServer

> ID：15623545
> 
> 赞同：1
> 
> 时间：2013-03-25T19:54:48.747
> 
> 标签：ffmpeg, video-streaming, ffserver

我刚刚开始探索和开发流媒体应用程序以将媒体流式传输到**FFServer** ...

基本格式是使用**FFmpeg**或将媒体流式`command line`传输`JNI`到**FFServer** ...

但是是否可以使用**Android** / **WP8** / **iOS**`ffserver`平台或任何其他平台上可用`native api`的可用流媒体，而不是使用传统方式...？******`ffmpeg`******

 ******谢谢...******

# ios - 用相同的数字得到不同的结果

> ID：15623546
> 
> 赞同：1
> 
> 时间：2013-03-25T19:54:56.473
> 
> 标签：ios, objective-c, preprocessor-directive

我已经定义了预处理器指令：

```
#define PTM_RATIO 32
#define PTM_RATIO_2 isIPad?64:32 
```

然后在一个方法中，我使用上述指令，如下所示：

```
NSLog(@"PTM_RATIO %d",PTM_RATIO);
NSLog(@"PTM_RATIO_2 %d",PTM_RATIO_2);

float32 test=100*PTM_RATIO;
float32 test2=100*PTM_RATIO_2;

NSLog(@"Test %f",test);
NSLog(@"Test2 %f",test2); 
```

这是上面代码的输出：

```
2013-03-25 23:43:57.011 Box2d[3625:15203] PTM_RATIO 32
2013-03-25 23:43:57.019 Box2d[3625:15203] PTM_RATIO_2 32
2013-03-25 23:43:57.020 Box2d[3625:15203] Test 3200.000000
2013-03-25 23:43:57.021 Box2d[3625:15203] Test2 32.000000 
```

如您所见，PTM_RATIO 和 PTM_RATIO_2 都是 32。那为什么当 100 乘以 PTM_RATIO 时得到 3200.000000，而乘以 PTM_RATIO_2 时得到 32.000000？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T19:58:00.913

预处理器宏主要是文本替换。改变：

```
#define PTM_RATIO_2 isIPad?64:32 
```

至：

```
#define PTM_RATIO_2 (isIPad?64:32) 
```

没有它，您的源代码：

```
100*PTM_RATIO_2 
```

扩展为：

```
100*isIPad?64:32 
```

然后将其解析为：

```
(100*isIPAD) ? 64 : 32 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T19:59:28.127

PTM_RATIO_2 在实际代码中的评估如下

```
float32 test2 = (100*isIPad)?64:32; 
```

您假设 MACRO 将在实时代码计算之前进行评估。

# javascript - 使用测试框架时如何启动节点服务器？

> ID：15623547
> 
> 赞同：3
> 
> 时间：2013-03-25T19:54:58.630
> 
> 标签：javascript, node.js, express, cucumber, gruntjs

只是一个快速的背景。我正在尝试使用 Cucumber.js 在 express/node 应用程序中执行 BDD。它在 Rails 中运行得非常好，所以我想保持相同的框架。不过我的问题是，要运行任何测试，我都需要手动启动服务器。

例如，在我的测试/场景中，我使用了僵尸模块的浏览器对象来访问一个页面：`this.browser.visit(path, function(){ ... });`

为了让它工作，我总是必须在运行**cucumber.js**之前运行**npm start**或**node app.js**。我希望服务器在我从命令行调用 cucumber.js 以运行测试时启动，而不是在运行测试之前手动启动它。

 **我失败的尝试：

带有 Cucumber + Makefile 的示例 Express 应用程序

1.  上面的链接是一个示例 repo，它使用 Makefile 启动 Node.js 服务器并运行测试。我尝试复制和编辑该文件以在我自己的项目中使用，但我不断收到错误消息：

    `{ [Error: connect ECONNREFUSED] code: 'ECONNREFUSED', errno: 'ECONNREFUSED', syscall: 'connect' }`

    如果我手动运行服务器然后运行 ​​Makefile，测试就可以工作。

2.  Grunt.js

理想情况下，我想使用 Grunt 来管理我的测试，但我遇到了同样的问题。我已经开始使用 grunt-cucumber，但它没有在运行测试之前启动服务器的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:39:42.107

将 grunt.js 与 grunt-cucumber 一起使用，并使用[grunt-connect](https://npmjs.org/package/grunt-connect)在当前目录中启动服务器。

然后你可以定义一些别名任务，它首先启动连接服务器，然后运行你的黄瓜测试：

```
grunt.registerTask("your-task-name", ["connect", "cucumber"]); 
```**

# java - Java 准备语句与 mysql 给出错误

> ID：15623548
> 
> 赞同：0
> 
> 时间：2013-03-25T19:55:03.077
> 
> 标签：java, mysql

我正在尝试运行 jdbc 查询。这是我的代码

```
 Timestamp timeStamp = new Timestamp(svnLog.getTime().getTime());

 String query = "Insert into transaction (RevisionId, AuthorId, LogMessage, Time) values (?,?,?,?) ";

    System.out.println("The query is " + query + svnLog.getRevisionId() + "," + svnLog.getAuthorId() + "," + svnLog.getLogMessage() + "," + timeStamp);

    try {

        PreparedStatement stmt = connManager.getConnection().prepareStatement(query);
        stmt.setLong(1, svnLog.getRevisionId());
        stmt.setString(2, svnLog.getAuthorId());
        stmt.setString(3, svnLog.getLogMessage());
        stmt.setTimestamp(4, timeStamp);

        System.out.println("After binding " + stmt.toString()); 
```

这会引发以下异常。

```
 After binding com.mysql.jdbc.PreparedStatement@478e4327: Insert into transaction   (RevisionId, AuthorId, LogMessage, Time) values (214,'mknauer','Initial import.','2007-03-01 06:39:21.128') 
   com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '?,?,?,?)' at line 1
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:936)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2985)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1631)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1723)
at com.mysql.jdbc.Connection.execSQL(Connection.java:3277)
at com.mysql.jdbc.Statement.executeUpdate(Statement.java:1402)
at com.mysql.jdbc.Statement.executeUpdate(Statement.java:1317)
at dataminer.db.Transactiondb.addTransaction(Transactiondb.java:40)
at dataminer.svn.download.SVNLogManager.processTransaction(SVNLogManager.java:45)
at dataminer.svn.download.SVNLogManager.processSvnLog(SVNLogManager.java:26)
at dataminer.svn.download.SVNHistoryDownloadMgr.main(SVNHistoryDownloadMgr.java:160) 
```

绑定后我已经打印了准备好的声明。当我在命令行上运行时，打印的查询工作正常。我在其他一些帖子中看到了这个错误，解决方案是更改 my.cnf 文件以进行字符编码。我将这两行添加到此文件中

```
character_set_server=utf8
collation_server=utf8_general_ci 
```

它没有解决错误。

# unix - 如何在没有修改日期的情况下在 Unix 中列出文件

> ID：15623551
> 
> 赞同：12
> 
> 时间：2013-03-25T19:55:11.920
> 
> 标签：unix, ls

我正在尝试创建一个 zip 文件，该文件将在多个服务器上运行以比较服务器的内容。由于许多原因，我比较的最简单和最好的信息是目录列表的文本文件......但我需要没有修改日期，因为它们使比较显示在这种情况下无关紧要的差异。

因此，如果我运行命令`ls -la`来创建文本输出以进行比较，我会得到如下信息：

```
drwxr-xr-x.  6 root   root       4096 Mar 20 14:59 .
dr-xr-xr-x. 22 root   root       4096 Feb 18 03:20 ..
drwxr-xr-x.  9  web   ad         4096 Oct 30 14:35 apache-tomcat-6.0.18
drwxr-xr-x.  9  web   ad         4096 Mar 24 03:00 apache-tomcat-6.0.36
lrwxrwxrwx.  1 root   root          5 Oct 30 14:06 java -> java6
lrwxrwxrwx.  1 root   root         16 Oct 30 14:05 java6 -> jdk/jdk1.6.0_37/
lrwxrwxrwx.  1 root   root         16 Mar 20 14:59 java7 -> jdk/jdk1.7.0_17/
drwxr-xr-x.  4 root   root       4096 Mar 20 15:02 jdk
lrwxrwxrwx.  1 root   root         21 Nov  6 15:09 tomcat -> apache-tomcat-6.0.36/ 
```

我想要使​​用的是`ls -la | cut -c 1-31`，但这只需要一个列表（字符 1-31），我真的想要日期之后的数据。我对 Unix 很陌生，并且很好奇是否有人知道如何生成一个看起来像这样的列表：

```
drwxr-xr-x.  6 root   root       4096 .
dr-xr-xr-x. 22 root   root       4096 ..
drwxr-xr-x.  9  web   ad         4096 apache-tomcat-6.0.18
drwxr-xr-x.  9  web   ad         4096 apache-tomcat-6.0.36
lrwxrwxrwx.  1 root   root          5 java -> java6
lrwxrwxrwx.  1 root   root         16 java6 -> jdk/jdk1.6.0_37/
lrwxrwxrwx.  1 root   root         16 java7 -> jdk/jdk1.7.0_17/
drwxr-xr-x.  4 root   root       4096 jdk
lrwxrwxrwx.  1 root   root         21 tomcat -> apache-tomcat-6.0.36/ 
```

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2017-01-06T21:08:01.523

发布替代解决方案，因为接受的解决方案将在带有空格的文件名上失败。

在 Linux 和其他支持它的系统（不是 Mac OS）上使用 --time-style 和空格式

```
[root@preg junk]# ls -lah
total 12K
drwxr-xr-x 2 root root 4.0K Jan  6 16:12 .
drwxr-xr-x 4 root root 4.0K Jan  6 15:38 ..
-rw-r--r-- 1 root root    0 Jan  6 12:42 '$#%bad'
-rw-r--r-- 1 root root    2 Jan  6 16:12 'moar bad;'
-rw-r--r-- 1 root root    0 Jan  6 12:40 'quote"file'
-rw-r--r-- 1 root root    0 Jan  6 12:41 'single'\''quote'\''file'

[root@preg junk]# ls -lah  --time-style='+'  .
total 12K
drwxr-xr-x 2 root root 4.0K  .
drwxr-xr-x 4 root root 4.0K  ..
-rw-r--r-- 1 root root    0  '$#%bad'
-rw-r--r-- 1 root root    2  'moar bad;'
-rw-r--r-- 1 root root    0  'quote"file'
-rw-r--r-- 1 root root    0  'single'\''quote'\''file'
[root@preg junk]# 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-25T20:12:48.290

我认为解决您的问题的最佳方法是使用 awk。

```
ls -la | awk '{print $1, $2, $3, $4, $5, $9}' 
```

所以你得到这样的输出：

```
drwxr-xr-x. 6 root root 4096 .
dr-xr-xr-x. 22 root root 4096 ..
drwx------+ 5 user staff 170 Desktop
drwx------+ 16 user staff 544 Documents
drwx------+ 6 user staff 204 Downloads 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-05-28T13:08:36.587

`cut`让您指定范围，[比 awk 更容易](https://stackoverflow.com/questions/1602035/how-to-print-third-column-to-last-column)。
结合使用它`tr -s ' '`来修剪重复的空格。

```
$ ls -la /etc/ |tr -s ' ' |cut -d' ' -f1,2,3,4,5,9-
drwxr-xr-x 2 root root 4096 opt
lrwxrwxrwx 1 root root 21 os-release -> ../usr/lib/os-release
-rw-r--r-- 1 root root 6920 overlayroot.conf
drwxr-xr-x 4 root root 4096 vmware-tools
lrwxrwxrwx 1 root root 23 vtrgb -> /etc/alternatives/vtrgb 
```

这很有用，例如，当使用并行 shell 并且您想要检查多个主机上的文件时，这些文件是在不同时间创建的。

# regex - 用于 HTML 搜索和替换的正则表达式

> ID：15623552
> 
> 赞同：1
> 
> 时间：2013-03-25T19:55:18.917
> 
> 标签：regex, vim, vi

我正在 vim 中执行一个简单的搜索和替换命令，我正在尝试转义`<>`and`/`字符，以便可以在我的搜索表达式中使用它们。我意识到有更优雅的方式来查找 HTML 标签，但我真正在寻找的是一个本地化的搜索和替换命令，它将替换`<h1>UNKNOWN MISSION</h2>`为`<h2>UNKNOWN MISSION</h2>`. 这是我尝试转义特殊字符的命令：

```
:%s/\<h1\>UNKNOWN MISSION\<\/h2\>/\<h2\>UNKNOWN MISSION\<\/h2\>/ 
```

模式不匹配。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:02:17.970

`:%s/<h1>UNKNOWN MISSION<\/h2>/<h2>UNKNOWN MISSION<\/h2>/g`

似乎为我工作。您只需要转义反斜杠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:01:59.830

您不需要转义`<>`字符，请尝试以下操作：

```
:%s/<h1>UNKNOWN MISSION<\/h2>/<h2>UNKNOWN MISSION<\/h2>/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T20:39:17.947

我会做以下事情……</p>

1.  将光标放在 with 的第一个实例上`UNKNOWN MISSION`：

    ```
    /<h1<CR> 
    ```

2.  猛拉直到`2`：

    ```
    yt2 
    ```

3.  使用以下方法进行替换：

    ```
    :%s+<C-r>"2>+<C-r>"1> 
    ```

    where`<C-r>"`用于在命令行中插入默认寄存器的内容，并`+`用作替代分隔符以避免转义斜杠。插入后，整个命令如下所示：

    ```
    %s+<h1>UNKNOWN MISSION</h2>+<h1>UNKNOWN MISSION</h1> 
    ```

`/g`如果需要，请添加标志。

# xcode - 在 WebView 中显示 HTML 代码

> ID：15623554
> 
> 赞同：0
> 
> 时间：2013-03-25T19:55:29.993
> 
> 标签：xcode, cocoa, webview

如果我有一个WebView，我可以让它显示一行HTML代码或从“支持文件”文件夹中读取一个HTML文档然后显示它？

重要的是它不需要文件位于其他位置（应用程序需要是独立的）。

谢谢 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T19:59:52.767

是的！退房[`loadHTMLString:baseURL:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006950-CH3-SW10)。学习的技巧是 baseURL 可以以`file://`;-)

使用“本地”baseURL，您的标记和 CSS（事物图像资源等）中的所有相对 URL 都将相对于该目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T19:59:46.373

是的你可以。我用于 webView 的代码如下：

```
NSString *fullURL = [[NSBundle mainBundle] pathForResource:@"webpage" ofType:@"html"];
NSURL *url = [NSURL fileURLWithPath:fullURL];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[webView loadRequest:requestObj]; 
```

您只需将 html 页面放在应用程序的主包中。祝你好运。

# ruby-on-rails - 两种不同的注册表单

> ID：15623558
> 
> 赞同：2
> 
> 时间：2013-03-25T19:55:41.690
> 
> 标签：ruby-on-rails, devise

我正在使用 Devise 制作一个应用程序，普通的乔公民可以在其中提出问题，希望能得到某种医疗专业人员的回答。在我的主页上，我想要两个这样的注册链接

```
<li><%= link_to "Sign up", new_user_registration_path %></li>
<li><%= link_to "Are you a Medical Professional?", new_user_registration_path %></li> 
```

但我希望他们明显显示不同的注册表单，这需要我假设的不同路线。

User 模型的唯一区别是，对于 Medical Professional，Medical Professional 的布尔属性将为“真”，而对于普通乔则为假。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:40:27.257

**方法 1：将选择保留在隐藏字段中**

```
<li><%= link_to "Sign up", new_user_registration_path %></li>
<li><%= link_to "Are you a Medical Professional?", new_user_registration_path(medical: true) %></li> 
```

您可以使用路由中的参数来快速解决问题：`new_user_registrations_path(medical: true)`将生成带有附加`?medical=true`) 的路由。

在您的注册表单中，您可以检查参数是否已设置，然后设置一个隐藏字段以记住该设置。

```
# Remember the medical user setting
<%= f.check_box :medical, checked: params[:medical].true?, hidden: true %> 
```

我不确定 check_box 标签是否会这样工作，如果您发现语法不同，请随时编辑。希望能帮助到你。

**方法 2：覆盖设计注册控制器**

这是完全可能的，只需查看文档即可。但是，这样做时我会感到有些疲倦，因为 Devise 控制器的内部结构可能会发生变化，并且您需要手动保持这些更改同步。

**方法 3：根据要求：显示不同的注册表单**

使用该参数，您可能会**在视图**中决定要呈现哪种形式（不好，不时尚，但可以工作:-D）。

```
<% if params[:medical] %>
   <%= render 'medical_signup_form' %>
<% else %>
   <%= render 'regular_signup_form' %>
<% end %> 
```

两种形式都需要携带所有相关的注册属性。这当然是一些代码重复，但在我看来，不必覆盖可能需要在您不注意的情况下更改的 Device 控制器操作。

# c++ - 在同一行读取字符串和整数

> ID：15623566
> 
> 赞同：0
> 
> 时间：2013-03-25T19:56:04.817
> 
> 标签：c++, io

我有一个要读取的数据文件，它有这样的东西

约翰 1 2 3 4

我想读取这些数据并执行一些功能，只是想确保我做对了。

```
while(myIn.peek()!=EOF)
{
getline(myIn, name, '/n');
myIn>>a>>b>>c>>d;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:59:09.130

如果下一个字符不是文件结尾但提取失败，您的代码将搞砸。这通常发生在文件末尾，在结尾之前有额外内容`\n`。

您对 的调用也有问题`getline`。`/n`是一个多字节字符。大概您的意思是，但即便如此，行中的“john”之后`\n`也没有。`\n`相反，只需使用`myIn >> name`.

无论如何，使用您的提取作为`while`条件更为惯用。尝试这个：

```
while (myIn >> name >> a >> b >> c >> d) {
  // Do something with them
} 
```

如果任何提取失败，循环体`while`就不会执行。这意味着您可以在造成更多伤害之前迅速脱身。但是，这里我们实际上并不关心每组值是否在单独的行上。它很乐意接受：

```
john 1 2 3 4 mary 5 6 7 8 
```

另一种方法是先读取整行，`std::getline`然后您可以解析该行：

```
std::string line;
while (std::getline(myIn, line)) {
  std::stringstream line_stream(line);
  if (line_stream >> name >> a >> b >> c >> d) {
    // Do something with this line
  }
} 
```

现在，即使一行格式错误，您仍然会继续下一行，而不是一起放弃。

# ruby-on-rails - rails 分页重复条目

> ID：15623569
> 
> 赞同：6
> 
> 时间：2013-03-25T19:56:11.243
> 
> 标签：ruby-on-rails, ruby-on-rails-3, pagination, will-paginate

我在分页调用中收到重复的条目。

代码如下：

@reviews = @user.reviews.paginate(:page => params[:page], :per_page => 5)

当我在终端中运行它时，它会返回重复的条目。这是一个例子：

第 1 页：

```
1.9.3p327 :040 > me.reviews.paginate(:page => 1, :per_page => 5)
  Review Load (2.1ms)  SELECT "reviews".* FROM "reviews" WHERE "reviews"."user_id" = 43 ORDER BY rating DESC LIMIT 5 OFFSET 0
   (1.0ms)  SELECT COUNT(*) FROM "reviews" WHERE "reviews"."user_id" = 43
 => [#<Review id: 319>, #<Review id: 322>, #<Review id: 318>, #<Review id: 323>, #<Review id: 313>] 
```

第2页：

```
1.9.3p327 :045 > me.reviews.paginate(:page => 2, :per_page => 5)
  Review Load (1.3ms)  SELECT "reviews".* FROM "reviews" WHERE "reviews"."user_id" = 43 ORDER BY rating DESC LIMIT 5 OFFSET 5
   (0.7ms)  SELECT COUNT(*) FROM "reviews" WHERE "reviews"."user_id" = 43
 => [#<Review id: 313>, #<Review id: 324>, #<Review id: 315>, #<Review id: 310>, #<Review id: 312>] 
```

请注意，评论 #313 两次都发生。

但是，当我运行 me.reviews 时，每个 id 只出现一次。

我整天都在为此工作，因此可以快速响应更新您可能需要的任何信息。我很困惑。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-26T02:27:35.667

您的评论中有重复的评分（例如：4、4、4、4、3、3、3、3 等）。在平局的情况下，不能保证 2 个不同查询的结果排序相同。您可以通过在 上添加辅助排序来解决此问题`id`。这将保证整个查询的排序顺序，并且您不会在不同的页面上有重复：

```
me.reviews.order(:rating, :id).paginate(...) 
```

# php - 需要确切知道这段代码中发生了什么

> ID：15623571
> 
> 赞同：0
> 
> 时间：2013-03-25T19:56:18.337
> 
> 标签：php, assignment-operator

我对这段代码有点困惑

```
$name = $formData["name"] = stripslashes($mechanic_buy_name); 
```

我发现这些代码用于从互联网下载的脚本之一。我需要知道这到底是怎么回事？

$name 和 $formData'["name"] 也将具有相同的值，并且带有stripslashes。

例如，如果 $mechanic_buy_name 的值 = "SomeValue'WithQuote's";

在这种情况下，将分配给 $name 和 $formData'["name"] 什么？

很想知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:01:19.650

您将两个变量设置为相同的值：

```
$name = $formData["name"] = stripslashes($mechanic_buy_name); 
```

与以下内容相同：

```
$name = stripslashes($mechanic_buy_name);
$formData["name"] = stripslashes($mechanic_buy_name); 
```

不同之处在于它自己向后工作：

`stripslashes($mechanic_buy_name)`设置为`$formData["name"]`并`$formData["name"]`设置为`$name`。

它们是两个自变量。如果你改变一个，它不会影响另一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:01:13.227

```
$name = $formData["name"] = stripslashes($mechanic_buy_name); 
```

和

```
$formData['name'] = stripslashes($mechanic_buy_name);
$name = $formData['name']; 
```

解释：

`$name`等于 的值`$formData['name']`其中 的值`$formData['name']`等于 的值`$mechanic_buy_name`

所以在你的例子中，如果：

```
$mechanic_buy_name = "SomeValue'WithQuote's";
$name = $formData["name"] = stripslashes($mechanic_buy_name);

echo $name . "\n" . $formData["name"]; 
```

将打印以下内容：

```
SomeValue'WithQuote's
SomeValue'WithQuote's 
```

# c++ - 检查字符串是否具有唯一字符

> ID：15623573
> 
> 赞同：3
> 
> 时间：2013-03-25T19:56:27.883
> 
> 标签：c++, algorithm

我知道如何检查字符串是否具有唯一字符，但我想显示 NOT UNIQUE 即使它们是不同的情况

例如 - 我的算法

字符串 = "dhAra" => 唯一

我认为更好的是它显示 NOT UNIQUE 因为它有两次“a”

```
#include<iostream>

int main()
{
string str = "dhAra";
bool arr[128] = {0};

for (unsigned int i = 0; i < str.length() ; i++)
{
 int val = str[i];  //i think something needs to change here 
 cout << val << endl; 

 if(arr[val])
 { 
  cout << " not unique" ; 
  return 0; 
 }
 else
 { arr[val] = 1;} 
}
cout << "unique" ; 
return 0 ; 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T19:58:35.577

您可以在所有字符上使用`toupper`or`tolower`以确保捕获仅在大小写不同的重复项：

```
int val = toupper(str[i]); // tolower would be fine as well 
```

作为旁注，在 C++中分配`true`给 a的规范方法是`bool`

```
arr[val] = true; // rather than arr[val] = 1 
```

尽管两种方式都可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T12:19:25.460

/* * 要更改此模板，请选择工具 | 模板 * 并在编辑器中打开模板。*/ 包 geeksforgeeks;

/** * * */ 导入 java.util.* ;

公共类 unique_char {

```
/**
 * @param args the command line arguments
 */
public static void quicksort(char array[], int p, int r)
{
    System.out.println("hello");
    if(r - p < 1)
          return;
    int pivot = p;
    int i = p + 1;
    int j = r;

    while(i < j)
    {
        while(array[i] > array[p] && i < r)
            i++;
        while(array[j] > array[p] && j > p)
            j--;

        if(i < j)
            swap(array,i,j);
    }
    swap(array,pivot,j);

    quicksort(array,p,j-1);
    quicksort(array,j+1,r);

}
public static void main(String[] args) 
{
    Scanner sc = new Scanner(System.in);
    char line[] = sc.nextLine().toCharArray();
    quicksort(line,0,line.length-1);

    //System.out.print(line);

    for(int i=0; i<line.length-1; i++)
    {
          if(line[i] == line[i+1])
               System.out.println("string dont have all char unique");
               break;
    }

}

private static void swap(char[] array, int pivot, int j)
{
    char t = array[pivot];
    array[pivot] = array[j];
    array[j] = t;
    //throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T20:18:09.663

这是我想要做的正确方法之一，

```
// find if the string contains unique characters 
// uses extra space 

#include<iostream>

int main()
{
string str = "dhAr guptqwe fsklm";
bool arr[128] = {false};

for (unsigned int i = 0; i < str.length() ; i++)
{
 int val = toupper(str[i]);

 if(val == 32)
 continue; 

 if(arr[val])
 { 
  cout << " not unique" ; 
  return 0; 
 }
 else
 { arr[val] = true;} 
}
cout << "unique" ; 
return 0 ; 
} 
```

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-11T18:52:13.350

我对这个问题的解决方案如下：

```
#include<iostream>
#include<string>
using namespace std;

//Method signature to determing if the string are unique
bool hasUniqueCharacters(string str);

int main(void){
    string str;
    getline(cin, str);
    if(hasUniqueCharacters(str)){
        cout<< " The Input string has all unique character" ;
    }
    else{
        cout<< " The input string does not have unique characters";
    }
    return 0;
}

/// <summary>
///     Implements the method hasUniqueCharacters to check if the input string has unique characters
/// </summary>
/// <Assumption>
///     This method assumes that all the characters in the input string are ASCII characters and the method uses a boolean array and makes the index of the ASCII equivalent field true. and traverses the whole string to veirfy if there are no duplicates.
/// </Assumption>
/// <param name="str">
///    This is the input string which needs to be checked.
/// </param>
/// <return datatype = boolean>
///     This method would return true if all the characters are unique in the input string.
/// </return datatype>

bool hasUniqueCharacters(string str){
    int strLength = str.size();
    bool characters[256];
    //Initializing all the index values in characters array to false.
    for(int i=0;i<256;i++){
        characters[i] = false;
    }
    //We are verifying if the character is already present in the array else making it true and perform this operation untill the string is complete.
    for(int i=0;i<strLength-1;i++){
        if(characters[int(str[i])])
            return false;
        else 
            characters[int(str[i])] = true;
    }
    return true;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-15T03:13:21.180

Dharag 发布的最新答案非常有效，除了给出最终答案的小改动。

```
#include<iostream>
#include<conio.h>
using namespace std;

int main(){

int counter = 0;
string str = "dhAr guptqwe fsklm";
bool arr[128] = { false };

for (unsigned int i = 0; i < str.length(); i++)
{
    int val = toupper(str[i]);

    if (val == 32)
        continue;

    if (arr[val])
    {
        cout << "not unique\n";
        counter++;
        break;
        //return 0;
    }
    else
    {
        arr[val] = true;
    }
}

if (counter < 1) {
    cout << "unique\n";
}
return 0;
} 
```

我使用了一个计数器变量，并在找到匹配的字符时递增。检查 counter 的值以检查整个字符串是否唯一。此外，一旦在字符串中找到匹配项，我们就可以退出其余过程以提高效率。

# ios - IOS 半透明 NavigationController 修复

> ID：15623574
> 
> 赞同：0
> 
> 时间：2013-03-25T19:56:33.157
> 
> 标签：ios, objective-c, xcode

我在我的 ios 应用程序中使用半透明导航控制器。

问题是我的 CollectionViewcontroller 在半透明的 NavigationController 下移动。但是当我将其更改为 blacknavigationController 时，它会得到纠正。

我希望 translucentNavigationController 表现得像 blackNavigationController？我不知道如何实现这一目标？

谢谢你。 ![在此处输入图像描述](../Images/75839d7d7271d987a796266773a95045.png)

![在此处输入图像描述](../Images/57ec219daab5a600b9bb699b108bbeaa.png)

我已经尝试将部分标题添加到集合视图，但问题在于设备旋转时标题的大小保持不变。

**我的旋转处理代码**@j_mcnally

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{

    UIInterfaceOrientation interfaceOrientation = [[UIApplication sharedApplication]  statusBarOrientation];
    if (UIInterfaceOrientationIsPortrait(interfaceOrientation))
    {
        NSLog(@"Is in portrait Mode");
        self.collectionView.contentInset=UIEdgeInsetsMake(44.0f, 0.0f, 0.0f, 0.0f);
        self.collectionView.scrollIndicatorInsets=UIEdgeInsetsMake(45.0f, 0.0f, 0.0f,  0.0f);
    }
    else{
        NSLog(@"Is in landscape Mode");

        self.collectionView.contentInset=UIEdgeInsetsMake(32.0f, 0.0f, 0.0f, 0.0f);
        self.collectionView.scrollIndicatorInsets=UIEdgeInsetsMake(33.0f, 0.0f, 0.0f,  0.0f);
} 
```

}

通过旋转处理，问题似乎得到解决，除非我先向左旋转然后向右旋转。那么结果是这样的 ![在此处输入图像描述](../Images/6bc9135b07f998b43a48c94e9c0761a5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:04:34.913

这里的问题是滚动视图的框架。当 UINavigationBar 是半透明的时，布局不会计算导航栏的高度，因此滚动视图的框架从 0,0 而不是 0,44 开始。解决方案是执行您已经执行的操作，但更改内容插图以偏移您的网格。

![在此处输入图像描述](../Images/1f6edfc3dd6745537cc9c5fb87705101.png)

更改顶部内容插图以反映导航栏的大小。这将允许您的内容在导航栏下滚动，而不是从导航栏下开始。您可能需要关闭视图上的自动布局才能获得此菜单选项。我个人不使用自动布局，因为它破坏了 5.x 兼容性。

如果这给旋转留下了太多空间，你应该调整你的 shouldAutorotate 函数中的插图，或者你可以订阅 NSNotificationCenter 中的旋转事件。

根据您的新问题，似乎即使您增加了偏移量，您的视图也已从顶部移至 32.0f，当您旋转并将插图更改为 44.0f 时，它不会重置滚动视图内容偏移量。所以你在 12.0f，即使向下滚动会将你移动到正确的位置 0.0f。

因此，您可以让它在每次旋转时将 contentoffset 重置为 0.0，或者仅当视图仅在视图下方部分滚动时（如示例中所示）。因此，如果 contentOffset < 44.0f 则只需将其设置为 0.0，如果它更大则不要管它。或者，您可以在每次将视图旋转回纵向时重新计算新的偏移量 +12.0f，反之亦然，以补偿插入的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:01:10.107

> 我已经尝试将部分标题添加到集合视图，但问题在于设备旋转时标题的大小保持不变。

您可以[检查当前设备方向](https://stackoverflow.com/questions/634745/iphone-orientation)并`tableView:heightForHeaderInSection:`根据当前方向返回不同的高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T20:03:26.130

您也许可以采用黑色并调整 alpha 属性。

```
self.navigationController.navigationBar.tintColor = [UIColor blackColor];
self.navigationController.navigationBar.alpha = 0.2f; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-25T20:01:31.383

我会做一个视图控制器并向它添加一个集合表。然后，您可以根据需要调整大小。您可能使用了 collectionViewController 模板，因此现在您的控制权减少了。

完成此操作后，将收集表放在导航栏下方。

# javascript - 在全局变量中存储 mousemove 事件参数可能会导致性能问题？

> ID：15623576
> 
> 赞同：2
> 
> 时间：2013-03-25T19:56:34.453
> 
> 标签：javascript, events, dom

我将 mousemove 事件参数存储在变量中，会导致性能问题吗？

```
window.document.addEventListener('mousemove', function(e){
    window.mouse = e;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:32:06.507

它没有任何理由。每次鼠标移动时，您都在进行函数调用并为变量赋值，但在我能想到的任何情况下，这些都非常便宜。如果您发现性能问题，您可以使用大多数浏览器内置的性能工具来确定问题发生的位置。

# extjs - 当我通过选择语言单选按钮在语言之间切换时，字段标签未刷新

> ID：15623580
> 
> 赞同：1
> 
> 时间：2013-03-25T19:56:50.963
> 
> 标签：extjs, extjs4, extjs4.1

嗨，我对 stackoverflow 和 extjs4.1 也很陌生。我们的应用程序以下列方式工作。有manageNrc.js，它在index.html中有条目，在加载时（managenrc.js）它创建组件managenrcgrid .js（EXt gridpanel）和managenrcform.js（Ext form panel）。到目前为止一切都很好。但是当用户切换页面顶部的单选按钮时。应用程序将他带到登录页面。这次预计将重新加载组件并以用户选择的法语显示组件的所有字段标签。我在 json 文件 nrclabels.json 中使用两个数组实现了本地化。

```
var nrcLABELS = {
    "EN": {
        "user_id": "User ID"
    }
    "FR": {
        "user_id": "ID utilisateur"
    }
} 
```

单选按钮给出了选择的值，如 EN 或 FR，以便从 json 中选择适当的键/值并为 fieldlabels 显示。但事实并非如此。

# javascript - 图像 .onerror 调用的范围内有哪些变量？

> ID：15623584
> 
> 赞同：1
> 
> 时间：2013-03-25T19:56:59.970
> 
> 标签：javascript, jquery, onerror

我正在从事的项目中具有以下功能：

```
var makePreviewSimulationDiv = function(){
    var errorFlag = false;

    imgError = function(image){
        errorFlag = true;
    };

    var that = this, proxy = new IAProxy(),
        //imageSource = real_image_source,
        imageSource = "",
        image = that.append('<img class="foo" onerror="imgError(this);
                            "src=' + imageSource + '></img>')
                    .children('.sim-ui-preview-sim-image'),
        container = image.run(encapsulateImg),
        iconsDiv = that.append('<div class="bar"></div>')
                       .children('.bar');

    if (!errorFlag){
        image.load(function(){
            container.run(zoomMaxWidth)
                .run(makeDraggable)
                .run(makeZoomable);
        });
    } else{
        alert('image load error!');
    }

    return that;
}; 
```

目前，我将图像 src 设置为`""`尝试调试函数的行为，如果它得到一个错误的图像 src 或没有图像 src，以使其优雅地失败。目前，我的代码正确捕获错误并抛出`alert('image load error!');`. 但是，如果我在本地限定我的`imgError`函数，即将代码更改为以下内容：

```
 var imgError = function(image){
        errorFlag = true;
    }; 
```

`imgError``onerror`在图像加载时触发时无法再找到。in 调用的函数的范围是什么`onerror`，我可以`imgError`在不全局声明的情况下进入它的范围并且仍然能够`errorFlag`从内部访问`imgError`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:21:29.737

创建图像

```
var img = new Image() 
```

绑定到它的错误和加载处理程序并将其设置为 src

```
$(img).on("load",loadHandler).on("error",errorHandler)[0].src = imageSource; 
```

现在，在上述两个处理程序中，您可以访问`this`并且所述处理程序的第一个参数将是`event object`.

```
function errorHandler(event) {
    console.log(event);
}
function loadHandler(event) {
    console.log(event);
    $(this).appendTo("#imgHolder");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:23:35.187

Figured it out with the help of Kevin B's comment. This was my solution:

```
var makePreviewSimulationDiv = function(){
    var errorFlag = false;

    var that = this, proxy = new IAProxy(),
        image = that.append('<img class="foo"></img>').children('.foo'),
        imageSource = ""; //a source that should cause an error

    var imgError = function(image){
        errorFlag = true;
    };

    image.on("error",imgError)[0].src = imageSource

    var container = image.run(encapsulateImg),
        iconsDiv = that.append('<div class="bar"></div>').children('.bar');

    if (!errorFlag){
        image.load(function(){
            container.run(zoomMaxWidth)
                .run(makeDraggable)
                .run(makeZoomable);
        });
    } else{
        alert('image load error!');
    }

    return that;
}; 
```

# scala - 为什么 List 是 Semigroup 而 Seq 不是？

> ID：15623585
> 
> 赞同：24
> 
> 时间：2013-03-25T19:57:02.097
> 
> 标签：scala, functional-programming, scalaz, scalaz7

我对 scalaz 相当陌生，我试图弄清楚为什么以下代码有效：

```
import scalaz._
import Scalaz._
scala> Map[String,List[String]]() |+| Map[String,List[String]]()
res3: scala.collection.immutable.Map[String,List[String]] = Map() 
```

但这并不...

```
import scalaz._
import Scalaz._
scala> Map[String,Seq[String]]() |+| Map[String,Seq[String]]()
<console>:14: error: value |+| is not a member of      scala.collection.immutable.Map[String,Seq[String]]
          Map[String,Seq[String]]() |+| Map[String,Seq[String]]() 
```

我看到 Semigroup 的 Map 隐含，但我没有看到 List 或 Seq 的映射。

几个问题：

1.  ListSemigroup 的隐含在哪里？
2.  为什么 Seq 没有​​一个？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-25T21:07:42.093

因此，在 Scalaz 7 中，有一个[隐含`List`的 `Monoid`函数](https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/std/List.scala#L83)可以返回一个`Monoid[List[A]]`. `Monoid`扩展`SemiGroup`所以我们已经涵盖了列表。

`Seq`没有得到这种特殊待遇。没有从`Seq`to`Monoid`或的隐式转换`Semigroup`。有一个[隐含`IndexedSeq`的 to`Monoid`](https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/std/IndexedSeq.scala#L35)，但这对我们没有帮助。

为什么 Seq 没有​​一个？我不知道。也许 Seq 违反了幺半群/半群的一些定律，所以没有转换。Scalaz 6 中的 Seq 似乎存在问题，因此他们删除了一些功能： [https ://groups.google.com/forum/?fromgroups=#!searchin/scalaz/Seq/scalaz/Deaec1H11W4/gYFSquXjTzYJ](https://groups.google.com/forum/?fromgroups=#!searchin/scalaz/Seq/scalaz/Deaec1H11W4/gYFSquXjTzYJ)

**更新**

查看 scala 文档，更清楚为什么 scalaz 人会这样。[List](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.List)继承 LinearSeq，LinearSeq 继承 Seq。[IndexedSeq](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.IndexedSeq)继承 Seq。如果他们要为 Seq 提供一个半群，它可能会覆盖 IndexedSeq 或 LinearSeq 上的任何其他半群，并且两者之间的性能优势会松散。如果您查看附加的 scalaz 签名，您会发现它们利用了这些性能差异：

[https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/std/List.scala](https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/std/List.scala)

```
 implicit def listMonoid[A]: Monoid[List[A]] = new Monoid[List[A]] {
    def append(f1: List[A], f2: => List[A]) = f1 ::: f2
    def zero: List[A] = Nil
  } 
```

[https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/std/IndexedSeq.scala](https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/std/IndexedSeq.scala)

```
implicit def ixSqMonoid[A]: Monoid[IxSq[A]] = new Monoid[IxSq[A]] {
    def append(f1: IxSq[A], f2: => IxSq[A]) = f1 ++ f2
    def zero: IxSq[A] = empty
  } 
```

如果我们深入挖掘，我们会发现 Seq 只实现了[++](https://github.com/scala/scala/blob/2.12.x/src/library/scala/collection/TraversableLike.scala#L144)，它在列表上的性能比[:::](https://github.com/scala/scala/blob/2.12.x/src/library/scala/collection/immutable/List.scala#L124)用于追加操作更差。所以，回答你的第二个问题，性能。如果 scalaz 为 Seq 实现了 semigroup，它很可能会导致性能不明确，因为您只能针对索引进行优化。可迭代有同样的问题。

# android - 是否有必要修改我的 SQLite 数据库以在 android 应用程序中使用？

> ID：15623587
> 
> 赞同：0
> 
> 时间：2013-03-25T19:57:03.870
> 
> 标签：android, sqlite

我得到了我的 sqlite 数据库，其中有一些数据，但我在这个博客（[http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)）中读到表必须有一个名为 _id 的行，以便 android 可以绑定该字段（不确定这意味着什么）但我发现这很麻烦，因为它的数据库有点复杂，所以我想知道我是否真的必须修改我的数据库或者还有其他方法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:59:30.047

如果您使用`CursorAdapter`或其任何子类，`Cursor`则必须有一个`_id`整数列，最好是唯一的。

您的选择是：

1.  添加`_id`（例如，作为`AUTOINCREMENT`列）到您的表中并将其包含在您的查询中

2.  `ROWID`重命名查询中表中的某些列，例如 SQLite's （例如`SELECT ROWID AS _id, ... FROM table WHERE ...`），因为重要的是`Cursor`

3.  `_id`尝试为（例如， ）返回一个固定值`SELECT _id=0, ... FROM table WHERE ...`，尽管我从未尝试过，也不知道它是否有效

4.  不要使用`CursorAdapter`或其任何子类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:01:59.337

不，您绝对可以继续使用您的数据库。

至于“_id”字段，在许多适配器中使用它来找到放置项目的正确位置（例如在列表和微调器中），但也有解决方法可以解决它的缺失，而且它们只需要访问您的数据。

缺少 _id 的常见解决方案，顺便说一句，使用如下查询重命名行的索引（如果它存在且不称为“_id”）：

```
SELECT index AS _id IN table; 
```

希望这可以帮助。

# c# - 使用 C# 为 LoginStatus 和 LogoutStatus 编写代码

> ID：15623588
> 
> 赞同：0
> 
> 时间：2013-03-25T19:57:04.347
> 
> 标签：c#, asp.net, session, login, loginstatus

我的登录页面控件代码是：

```
<table class="auto-style9">
   <tr>
       <td class="auto-style12" colspan="2" style="font-family: 
         Georgia; font-size: medium; font-weight: bold; 
         text-transform: uppercase; color: #000000">Login
       </td>
   </tr>
   <tr>
       <td class="auto-style15">User name</td>
       <td class="auto-style15">
         <asp:TextBox ID="UserNameTextBox" runat="server"></asp:TextBox>
       </td>
   </tr>
   <tr>
       <td class="auto-style15">Password </td>
       <td class="auto-style15">
         <asp:TextBox ID="PasswordTextBox" runat="server" TextMode="Password">            
         </asp:TextBox>
       </td>
   </tr>
   <tr>
       <td class="auto-style15">&nbsp;</td>
       <td class="auto-style15">
         <asp:Button ID="ButtonLogin" runat="server" 
          CommandName="Login" Text="Login!" 
          OnClick="ButtonLogin_Click" BackColor="Black" 
          ForeColor="Yellow" />
       </td>
   </tr>
 </table> 
```

我的按钮登录点击事件是：

```
protected void ButtonLogin_Click(object sender, EventArgs e)
{
    using(BerouDataContext Data = new BerouDataContext())
    {
      var UsernameCheck = UserNameTextBox.Text;
      var PasswordCheck = PasswordTextBox.Text;
      var UserExist = Data.Memberships.Single(s => s.Username == UsernameCheck);
      if (UserExist == null || UserExist.Password != PasswordCheck)
      {
        LabelLoginValidity.Text = "Login Details are incorrect.";
      }
      else
      {
        LabelLoginValidity.Text = "Login Successfull!";
      }
   }
} 
```

我的问题是如何制作cookie，如何在c#中为loginStatus编写代码，请帮助一些代码来实现，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:13:01.230

所以基本上，您要确定用户是否已登录。

您可以使用`Session`变量或`Cookie`变量

在你`ButtonLogin_Click`的 else 部分中，当你成功登录时，添加这些行

```
 else
  {
     LabelLoginValidity.Text = "Login Successfull!";
     Session["loggedIn"]=true;
     //or you can create cookie like this

      HttpCookie myCookie = new HttpCookie("myCookie");

      //Add key-values in the cookie
      myCookie.Values.Add("userid", objUser.id.ToString());

      //set cookie expiry date-time. Made it to last for next 30 minutes.
      myCookie.Expires = DateTime.Now.AddMinutes(30);

      //Most important, write the cookie to client.
      Response.Cookies.Add(myCookie);
  } 
```

现在这个 Session 或 Cookie 变量，您可以检查内页。类似于主页内的内容

```
 protected void Page_load(object sender, EventArgs e)
 {
       if(Session["loggedIn"]==null)
       {
          //Session doesn't exist, redirect the user to login page
          Response.Redirect("Login.aspx");
       }
 } 
```

并且您必须在注销按钮单击时销毁 Session 或 Cookie 变量，即

```
protected void btnLogout_Click(object sender, EventArgs e)
{
   Session.Abandon();
   //or
   //Session.Remove("loggedIn");
} 
```

所以基本上，`Session`并且`Cookie`是状态管理技术。

在此处阅读[有关它们的更多信息](http://www.codeproject.com/Articles/331962/A-Beginner-s-Tutorial-on-ASP-NET-State-Management)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:36:36.893

请不要重新发明轮子；而是使用 ASP.Net 的[FormsAuthentication](http://msdn.microsoft.com/en-us/library/ff647070.aspx)。

它比编写自己的登录逻辑更安全。

```
protected void ButtonLogin_Click(object sender, EventArgs e)
{
    using(BerouDataContext Data = new BerouDataContext())
    {
      var UsernameCheck = UserNameTextBox.Text;
      var PasswordCheck = PasswordTextBox.Text;
      var UserExist = Data.Memberships.Single(s => s.Username == UsernameCheck);
      if (UserExist == null || UserExist.Password != PasswordCheck)
      {
        LabelLoginValidity.Text = "Login Details are incorrect.";
      }
      else
      {
        FormsAuthentication.SetAuthCookie(UserNameTextBox.Text, false);
        LabelLoginValidity.Text = "Login Successfull!";
      }
   }
} 
```

这是[注销](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.signout.aspx)。

# loadrunner - Loadrunner siebel

> ID：15623589
> 
> 赞同：-2
> 
> 时间：2013-03-25T19:57:07.033
> 
> 标签：loadrunner, siebel

我在网上对 loadrunner 有很多了解，而且我经常遇到 Siebel。人们说他们使用 Siebel 来记录 ie 但是 Siebel 是否也用于常规 Web 应用程序？不是正在测试的 Oracle Siebel 产品？这个 Siebel 是不是也适用于其他平台的某种神奇协议？和西贝尔有什么关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:20:03.470

您经常会看到与 Siebel 相关的问题，因为它是一个相关性非常强的协议，并且 LoadRunner 的绝大多数用户在这一核心基础机械工具技能、动态数据的收集和返回到脚本中的演示方面都很薄弱。

Siebel 使用一种称为 Siebel 星形数组的结构，它的大小很大并且需要相关性才能正确处理 Seibel Web 客户端。Siebel 提供了一个相关库，可以处理大部分星阵挑战，但在此之上仍需要手动技能来管理星阵结构之外的动态元素。据我了解，Siebel 对该库的使用收费，因此，如果您在技术上能够胜任相关性，那么您应该能够构建自己的相关性规则来处理重复的 Siebel 脚本开发活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:20:05.520

Siebel-Web 是 LoadRunner 中的一个协议，可能是为了处理使用[Siebel CRM 平台](http://www.oracle.com/us/products/applications/siebel/overview/index.html)创建的 Web 服务/页面而创建的。

Siebel-Web 是基于 HTTP 的，但是在看到来自 Siebel CRM 服务的 HTML 响应后，我强烈建议使用 Siebel-Web 协议而不是 HTML/HTTP 协议...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-03T17:32:45.977

Siebel-Web 是一种专有协议，不能在 Oracle Siebel CRM 环境之外使用。因此，将其用于不同的网站不会有任何好处，只会使您的 LoadRunner 方法复杂化。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-08-31T07:17:13.470

性能测试 Siebel CRM 应用程序绝对不是简单的，因为它是一个复杂的 Web 应用程序，它使用 Internet Explorer 的高交互性框架，并且交换的数据需要大量的解析。

Oracle 提供了一个关联库 (ssdtcorr.dll) 以及 Siebel 安装，以处理 Siebel 协议的 LR vugen 脚本的关联。[点击这里了解更多信息](https://docs.oracle.com/cd/E05553_01/books/TestGuide/TestGuide_AutoPerformTest6.html)。但这并不总是有帮助。

可以在[此处找到其他最佳实践。](https://docs.oracle.com/cd/B31104_02/books/TestGuide/TestGuide_DevelopTests11.html#wp131105)

# email - 自动下载电子邮件

> ID：15623590
> 
> 赞同：0
> 
> 时间：2013-03-25T19:57:11.050
> 
> 标签：email, raspberry-pi

我最近得到了一个树莓派，想知道是否可以对其进行编程以自动接收新电子邮件，然后下载并将其保存为文本文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:10:20.797

查看 python [imaplib](http://docs.python.org/2/library/imaplib.html)从 IMAP 服务器下载邮件或使用 pop3 协议下载的[poplib](http://docs.python.org/2/library/poplib.html)，通常两者都可用。请参阅两页上的示例。扩展这些以将邮件导出[到文本文件](http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files)应该很容易！如果您有任何问题，请发布一个新问题并粘贴您已有的代码！祝你好运！

# python - QInputDialog 不只返回文本

> ID：15623595
> 
> 赞同：1
> 
> 时间：2013-03-25T19:57:22.227
> 
> 标签：python, pyqt

这是我的代码：

```
itemnum = QInputDialog.getText(self, "Recall - Item", "Item No.", QLineEdit.Normal, "")
print itemnum 
```

它返回`(PyQt4.QtCore.QString(u'aa'), True)`。我怎样才能得到文字`"aa"`？是操纵字符串的唯一解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:01:03.523

```
>>> from PyQt4.QtCore import QString
>>> s = QString('Test')
>>> s
    PyQt4.QtCore.QString(u'Test')
>>> str(s)
    'Test' 
```

# javascript - iOS 设备上的 mailto 链接保持 URL 编码

> ID：15623596
> 
> 赞同：0
> 
> 时间：2013-03-25T19:57:22.217
> 
> 标签：javascript, html, ios

我`mailto`在包含 url 编码主题的网页上有一个链接。该链接会打开像 Gmail 这样的默认邮件客户端并正确解码字符串，但是当我在 iPhone 上单击相同的链接时，它会打开邮件应用程序，但内容仍然是 url 编码的。

例如

`<a href="mailto:test@test.com?subject=hello+there">Email me</a>`

在 Gmail 中，主题是：**“hello there”**，但在 iPhone 上的 Mail 应用程序中，主题是**“hello+there”**。

有没有办法解决？也许通过JS？

谢谢，

G

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:47:47.503

您使用的编码不是传统形式的 URL。Gmail 可能支持它，但 ios 不会。这里的解决方案是使用“真实”的 URL 编码方法，用于`%HEX_ASCII_CODE`对字符进行编码。在这种情况下，空格的十六进制 ASCII 码是 0x20，因此空格 '%20' 的值是正确的。

# ruby-on-rails - 在一个规划良好的 Rails 应用程序中进行嵌套查询，不知道如何优化查询

> ID：15623599
> 
> 赞同：0
> 
> 时间：2013-03-25T19:57:43.827
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有一个用户模型。对于给定的用户，我想知道该用户是否解决了管理员的一个问题（管理员也是用户，我始终将管理员用户作为 admin_user）。

解决方案 belongs_to 问题。问题属于_to 用户。用户 has_many 解决方案。

对于给定的用户，我想知道是否

```
Solution[0].question.user.id = admin_user.id or
Solution[1].question.user.id = admin_user.id or
...
Solution[Solution.all.size - 1].question.user.id = admin_user.id 
```

即当前用户是否解决了 admin_user 发布的任何问题。

我可以做一个嵌套包含，但是在我获得给定用户的所有解决方案 + 相关数据之后，我觉得我将做一个非常昂贵的循环来确定用户是否为 admin_user 解决了任何问题。

关于如何最好地编写此查询的任何想法？

谢谢！林戈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:07:21.813

我认为这样的事情可以更有效地解决您的问题。

```
admin_question_ids = admin_user.questions.map(&:id)
question_ids_answered_by_user = current_user.solutions.map(&:question_id)

has_answered_admin_question = question_ids_answered_by_user.any? do |question_id|
    admin_question_ids.include?(question_id)
end 
```

# javascript - 是否曾经回收过超时/间隔 ID？

> ID：15623607
> 
> 赞同：4
> 
> 时间：2013-03-25T19:58:06.637
> 
> 标签：javascript, settimeout, setinterval

ID 是否在完成（或已被清除）后被退回并被回收`setTimeout`？`setInterval`还是所有 ID 在会话期间都是唯一的？

调用`clearTimeout`或`clearInterval`使用旧 ID 会导致清除无关的超时/间隔吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T20:01:24.860

[从规格](http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#timers)

> 每个实现 WindowTimers 接口的对象都有一个活动定时器列表。此列表中的每个条目都由一个数字标识，在实现 WindowTimers 接口的对象的生命周期内，该数字在列表中必须是唯一的。

# android - 包括 curl 到 android AOSP

> ID：15623609
> 
> 赞同：0
> 
> 时间：2013-03-25T19:58:09.863
> 
> 标签：android, curl, android-source, android-build

我已经下载了 curl 库源代码，并将其提取到 android 源的外部文件夹中，我使用以下配置命令生成了 curl_config.h

```
./configure --host=arm-linux --disable-tftp --disable-sspi --disable-ipv6 --disable-ldaps --disable-ldap --disable-telnet --disable-pop3 --disable-ftp --without-ssl --disable-imap --disable-smtp --disable-pop3 --disable-rtsp --disable-ares --without-ca-bundle --disable-warnings --disable-manual --without-nss --enable-shared --without-zlib --without-random --without-libidn 
```

但是当我做一个 mm 来构建 curl 模块时，我得到以下错误：

```
external/curl/lib/connect.c:579: error: invalid 'asm': invalid operand for code 'w' 
```

有谁知道如何解决这个错误？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:22:22.990

您可能会因为一些错误的包含而收到此错误。发生这种情况的最常见原因之一是因为您正在`cURL`使用*主机进行编译，包括*.

检查您的*Makefile*不包含对*/usr/include*或任何其他包含路径的硬编码引用。当人们尝试在 x86 上为 ARM 进行交叉编译时，这显然是一个常见错误。您的编译器很困惑，因为他试图将汇编网络指令（例如`rorw`（“rotate word right”）x86 指令解析为`ror`（“rotate right”）ARM 指令。

一些 C 函数，例如`htons`提供网络字节顺序转换（例如确保没有*字节顺序*问题），被实现为包含内联汇编的预处理器宏。并且 ARM 编译器无法理解 x86 指令，这就是您收到此错误的原因。这类网络翻译功能在 中被大量使用`cURL`，因此这很可能是您的问题。

这是一篇[很好的文章](http://thesoftwarerogue.blogspot.fr/2010/05/porting-of-libcurl-to-android-os-using.html)，可以帮助您在 Android 上移植 cURL。这家伙没有`cURL`用 Android 编译，而是通过`JNI`.

# javascript - Push Woosh 和 PhoneGap 2.5.0 实现

> ID：15623610
> 
> 赞同：1
> 
> 时间：2013-03-25T19:58:12.150
> 
> 标签：javascript, cordova, apple-push-notifications

我已经尝试了各种方式来暗示这里的代码：

[http://www.pushwoosh.com/programming-push-notification/push-notification-sdk-integration-for-phonegap/](http://www.pushwoosh.com/programming-push-notification/push-notification-sdk-integration-for-phonegap/)

我失败了。我在后端启用了它，我尽我所能遵循所有这些指令......我的个人资料在应用程序开发人员门户网站中启用，但对于我的生活我失败了......我想我失败了这里：

```
function initPushwoosh() {
var pushNotification = window.plugins.pushNotification;
pushNotification.onDeviceReady();

pushNotification.registerDevice({alert:true, badge:true, sound:true, pw_appid:"PUSHWOOSH_APP_ID", appname:"APP_NAME"},
    function(status) {
        var deviceToken = status['deviceToken'];
        console.warn('registerDevice: ' + deviceToken);
    },
    function(status) {
        console.warn('failed to register : ' + JSON.stringify(status));
        navigator.notification.alert(JSON.stringify(['failed to register ', status]));
    }
);

pushNotification.setApplicationIconBadgeNumber(0);

document.addEventListener('push-notification', function(event) {
    var notification = event.notification;
    navigator.notification.alert(notification.aps.alert);
    pushNotification.setApplicationIconBadgeNumber(0);
}); 
```

}

我确保我把它放在我的 index.js 中，并确保我输入了我的应用程序代码和应用程​​序名称以匹配 pooshwoosh 后端门户，但我仍然失败了......任何网站都会令人惊叹！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:39:53.307

您在 XCode 控制台日志中看到了什么？您是否收到推送通知令牌？您还在控制面板中看到任何订阅者吗？

首先要检查的是您的移动配置文件是否已启用推送。在其中查找“aps-environment”字符串。另请注意，Pushwoosh 控制面板中的网关设置必须与配置文件匹配：“沙盒”用于“开发”配置文件，“生产”用于 Ah-Hoc 和 AppStore 构建。

开始的好地方是这里的示例项目： [https ://github.com/shaders/push-notifications-sdk/tree/master/SDK%20Sample%20Projects/iPhone-Phonegap](https://github.com/shaders/push-notifications-sdk/tree/master/SDK%20Sample%20Projects/iPhone-Phonegap)

# ios - 当我为我的 iOS 应用程序运行代码时，它会停止，好像我设置了一个断点（没有错误）并且不会继续运行

> ID：15623612
> 
> 赞同：0
> 
> 时间：2013-03-25T19:58:20.867
> 
> 标签：ios, objective-c, xcode, ios5, ios6

在我点击 Run 后，它运行了一会儿，完成了我的应用程序所做的所有启动工作（将文章下载到应用程序并将它们呈现在 UITableView 中）但是在文章出现一段时间后它就停止了，让我回到 Xcode 并调出 Debug Navigator 侧边栏，并在代码窗口中显示：

![](../Images/f5020d09ee062b92df982fb1d0957b07.png)

捣碎“继续程序执行”按钮对应用程序的进展没有任何帮助，而且我没有设置任何断点（它会奇怪地调出 lldb 和控制台以进行输入），并且无论如何我都按了 command-Y 来禁用任何断点。

为什么要这样做？没有明显的错误要修复，所以我不知道该怎么办。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T20:01:34.287

错误是`EXC_ARITHMETIC`，这意味着您将一个数字除以零。

所以你需要做的是

```
if ([self.body length] == 0) return @(0);    // make sure it is not zero
_progress = // your code... 
```

# wpf - 列表框的 DataTemplate 中 TextBlock 的条件格式

> ID：15623615
> 
> 赞同：1
> 
> 时间：2013-03-25T19:58:23.837
> 
> 标签：wpf, xaml

这是我的第一个 wcf，我遇到了一些似乎是基本 XAML 概念的问题。

不知何故，“PriorityStyle”中的 DataTrigger / Binding 不起作用。我想这是因为上下文问题，但环顾四周，我还没有找到答案。

```
<UserControl … >

<UserControl.Resources>

    <Style x:Key="PriorityStyle" TargetType="TextBlock" >
        <Style.Triggers>
            <DataTrigger Binding="{Binding Priority}" Value="High">
                <Setter Property="Foreground" Value="Red"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>

    <DataTemplate x:Key="ItemTemplate">
        <StackPanel Margin="3">
            ...
            <DockPanel>
                <TextBlock Name="Priority" Text="{Binding Priority}" Foreground ="#014f7c" Style="{StaticResource PriorityStyle}"/>
            </DockPanel>
        </StackPanel>
    </DataTemplate>

    <DataTemplate x:Key="SelectedTemplate">
        ...
    </DataTemplate>

    <Style TargetType="{x:Type ListBoxItem}" x:Key="ContainerStyle">
        <Setter Property="ContentTemplate" Value="{StaticResource ItemTemplate}" />
        <Style.Triggers>
            <Trigger Property="IsSelected" Value="True">
                <Setter Property="ContentTemplate" Value="{StaticResource SelectedTemplate}" />
            </Trigger>

            <!-- DataBinding work in this Context, But in Style I cannot use a TargetName -->
            <DataTrigger Binding="{Binding Priority}" Value="High">
                <Setter Property="Background" Value="DarkOrange"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>

</UserControl.Resources>

<ListBox x:Name="ListBox" ItemContainerStyle="{StaticResource ContainerStyle}" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:42:17.420

正如@HighCore 提到的不确定您在哪里设置 Source 为您的`ListBox`，但如果您的绑定工作在 Style 中，`ListBoxItem`您可以尝试**解决方法**

```
<Style x:Key="PriorityStyle" TargetType="TextBlock" >
    <Setter Property="Foreground"
          Value="Black" />
    <Style.Triggers>
        <DataTrigger Binding="{Binding DataContext.Priority, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListBoxItem}}}" Value="High">
            <Setter Property="Foreground" Value="Red"/>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

但无论如何，您的绑定`Priority`属性也必须`Text`在`TextBlock`with中。`PriorityStyle`所以你也可以这样做：

```
<Style x:Key="PriorityStyle"
       TargetType="TextBlock">
  <Setter Property="Foreground"
          Value="Black" />
  <Style.Triggers>
    <Trigger Property="Text"
             Value="High">
      <Setter Property="Foreground"
              Value="Red" />
    </Trigger>
  </Style.Triggers>
</Style> 
```

这样，您甚至不需要遍历元素树的绑定

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:33:25.000

我发现了我的问题的真正问题。这实际上不是一个约束性问题，而是一个风格问题。

我没有将它包含在原始 XAML 中，因为我做了一些错误的清理以使其更清晰。我在我的文本块中包含了一个“前景”属性，最后一个属性确实覆盖了我的样式属性。删除它并在样式设置器中包含“默认前景”值就是答案。初学者误区。

因此，感谢 Viv 指出了正确的方向以及出色的“RelativeSource”示例。再次为我的坏问题感到抱歉，这是一个教训。

```
 <Style x:Key="PriorityStyle" TargetType="TextBlock" >
        <Setter Property="Foreground" Value="#6c6d6f" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding Priority}" Value="Critical">
                <Setter Property="Foreground" Value="Red"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>

    <TextBlock Name="Summary" Text="{Binding _Summary}" Style="{StaticResource PriorityStyle}" /> 
```

# charts - 由谷歌条形图形成的甘特图：每个条形图的颜色不同

> ID：15623617
> 
> 赞同：0
> 
> 时间：2013-03-25T19:58:33.570
> 
> 标签：charts, bar-chart, google-visualization, gantt-chart

我使用 Google Charts 编码了以下类型的甘特图，但我想为每个条形分配不同的颜色。现在就我而言，因为我为 spacer 分配了透明颜色，所以我不明白如何为每个剩余的条分配不同的颜色。

这可能归结为在不同的条形图中分配相同的系列不同的颜色。

有人可以帮我解决这个问题吗？

[http://jsfiddle.net/bootkick/hp2yr/](http://jsfiddle.net/bootkick/hp2yr/)

```
 google.load('visualization', '1', {
    packages: ['corechart']
});
google.setOnLoadCallback(drawChart);

function drawChart() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Name');
    data.addColumn('timeofday', 'spacer');
    data.addColumn('timeofday', 'Runtume');
    data.addRows([
        ['PIPE', [5, 0, 0, 0],
            [7, 30, 0, 0]
        ],
        ['CNI', [6, 0, 0, 0],
            [12, 30, 0, 0]
        ],
        ['PEVC', [11, 0, 0, 0],
            [17, 30, 0, 0]
        ]
    ]);

    var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
    chart.draw(data, {
        isStacked: true,
        width: 900,
        height: data.getNumberOfRows() * 80,
        title: 'Host Runtimes',
        vAxis: {
            title: 'Content',
            titleTextStyle: {
                color: 'black'
            }
        },
        series: {
            0: {
                visibleInLegend: false,
                color: 'transparent'
            }
        }
    });

    /*chart.draw(data, {isStacked: true,

                      series: [
                               {color: 'blue', visibleInLegend: false},
                               {color: 'red', visibleInLegend: false}
                              ]
                             });*/
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:51:32.940

这是一种令人讨厌的做法。希望他们制作一个谷歌甘特图

```
google.load('visualization', '1', {
packages: ['corechart']
});
google.setOnLoadCallback(drawChart);

function drawChart() {
var data = new google.visualization.DataTable();
data.addColumn('string', 'Name');
data.addColumn('timeofday', 'spacer');
data.addColumn('timeofday', 'Runtime');
data.addColumn('timeofday', 'Runtime');
data.addColumn('timeofday', 'Runtime');
data.addColumn('timeofday', 'Runtime');

data.addRow(['PIPE', [3, 0, 0],
    [4, 30, 0],
    [0, 0, 0],
             [0, 0, 0],
    [0, 0, 0]
]);
data.addRow(['CNI', [1, 0, 0],
    [0, 0, 0],
    [7, 30, 0],
             [0, 0, 0],
    [0, 0, 0]
]);
data.addRow(['PEVC', [7, 0, 0],
    [0, 0, 0],
    [0, 0, 0],
    [1, 0, 0],
    [0, 0, 0]
]);

data.addRow(['MA', [7, 0, 0],
    [0, 0, 0],
    [0, 0, 0],
             [0, 0, 0],
    [1, 0, 0]
]);

var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
chart.draw(data, {
    isStacked: true,
    width: 900,
    height: data.getNumberOfRows() * 60,
    title: 'Host Runtimes',
    vAxis: {
        title: 'Content',
        titleTextStyle: {
            color: 'black'
        }
    },
    series: {
        0: {
            visibleInLegend: false,
            color: 'transparent'
        },
        1: {
            visibleInLegend: false,
            color: 'red'
        },
        2: {
            visibleInLegend: false,
            color: 'green'
        },
        3: {
            visibleInLegend: false,
            color: 'blue'
        },
        4: {
            visibleInLegend: false,
            color: 'yellow'
        },
        5: {
            visibleInLegend: false,
            color: 'cyan'
        },
        6: {
            visibleInLegend: false,
            color: 'pink'
        },
        7: {
            visibleInLegend: false,
            color: 'silver'
        }
    }
});

} 
```

在这里查看它的实际效果-：http: [//jsfiddle.net/bootkick/hp2yr/9/](http://jsfiddle.net/bootkick/hp2yr/9/)

# node.js - NodeJS找不到资产

> ID：15623622
> 
> 赞同：0
> 
> 时间：2013-03-25T19:58:46.543
> 
> 标签：node.js, assets

我试图让我的节点应用程序在最初崩溃后再次在我的服务器上运行。我整理了文件并运行了应用程序，但没有找到所有资产。在我的控制台中。它显示了这些错误（以及更多）

```
GET http://mvmdesign.org:8080/css/style.css  mvmdesign.org/:1
GET http://mvmdesign.org:8080/css/colorpicker.css  mvmdesign.org/:1 
```

从我看到的情况来看，它似乎没有找到公用文件夹。这是我的 app.configure 自从上次工作以来我没有碰过

```
app.configure ->
  @.set "port", process.env.PORT or 8080
  @.set "views", __dirname + "/views"
  @.set "view engine", "jade"
  @.use express.favicon()
  @.use express.logger("dev")
  @.use express.bodyParser()
  @.use express.methodOverride()
  @.use app.router
  @.use require("connect-assets")()
  @.use require("stylus").middleware(
    src: __dirname + "/public"
    compress: true
  )
  @.use express.static path.join(__dirname, "public") 
```

不要认为它应该有所作为，但是这些文件位于 mvmdesign.org 的子域文件夹中，当我 console.d __dirname 时，它​​显示了正确的路径，所以我对发生了什么一无所知。

如果有帮助，我现在会尝试让它在 mvmdesign.org:8080 上运行

# ios - 多种产品的证书和配置文件组织

> ID：15623626
> 
> 赞同：5
> 
> 时间：2013-03-25T19:58:51.690
> 
> 标签：ios, xcode, provisioning-profile

在我的工作场所，我们已经完成了一个 iOS 应用程序的开发，并且即将开始第二个应用程序。

在这样做之前，我想澄清一些关于证书和配置文件以及构建环境的事情：

Q1：我认为Apple帐户只能拥有一个分发证书，因此这将在两个应用程序中使用，这是否正确？（通过它出现在配置文件中，我将创建一组新的配置文件，其中包含新应用程序的新应用程序 ID）。

Q2：因为它是证书而不是安装到钥匙串中的配置文件，我假设新应用程序应该只在当前为当前应用程序设置的构建机器上构建。

Q3：与 Q2 相关，我想知道是否有必要或一个好主意，通过将当前应用程序和新应用程序的构建分开放置在不同的物理构建机器上（或将构建机器划分为虚拟机） . 如果这两个应用程序使用不同的证书，我认为这是必要的（或者至少对钥匙串进行分区）。我担心会出现证书和钥匙串问题。但是，如果 Q1 的答案是只有一个分发证书，那么理论上应该不需要为每个应用程序分别构建机器吗？

Q4：两个应用程序都使用推送通知，是否可以为两者使用相同的推送证书（当然在不同的配置文件中）？

TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T19:46:52.250

证书和配置可能是一个棘手的话题，所以在无意中给自己带来一些痛苦之前先问清楚当然是个好主意！

**Q1: 每个账户只有 1 个分发证书？**

是的，个人和公司帐户在每个会员年度仅限于一个有效的分发证书，但是如果个人或公司认为有必要，可以随时撤销和重新颁发此证书（泄露的公钥/私钥，终止员工可以访问私钥等）。我最近回答了一个问题[“什么是代码签名身份？”](https://stackoverflow.com/questions/15996468/what-are-code-signing-identities/16070915#16070915) 这可能有助于提供有关编码到配置文件中的信息以及 Xcode 在执行设备构建时如何查找此信息的其他上下文。请记住，根据所使用的配置文件的类型（开发与分发）将改变在配置文件中编码的证书和测试设备的数量和类型。

您也绝对正确，因为您将使用一组全新的配置文件重用现有分发证书，这些配置文件使用您准备/正在编写的第二个应用程序的 App Id / Bundle Id 进行编码。

**Q2：证书而不是配置文件是在钥匙串中安装的吗？构建机器将如何受到影响？**

是的，这是正确的。您的开发证书和分发证书都安装到钥匙串中，而配置文件安装到 Xcode 中的一个特殊目录中，用于代码签名操作。

假设您已经设置好构建机器并为您的第一个应用程序工作，那么您已经完成了很多艰苦的工作。您仍然需要做的事情的高级列表：

*   使用现有证书为新 AppId 生成一组配置文件
*   在构建环境中安装供应配置文件
*   确保 Xcode 项目的“代码签名身份”构建设置配置为使用新创建的供应配置文件，或者如果您的项目配置允许，更理想地使用“自动配置文件选择器”。
*   配置您的构建系统以实际制作新应用程序。

这些高级任务的特定 HOWTO 将在一定程度上取决于您如何设置项目和构建系统，但通常应该遵循与构建第一个应用程序时使用的相同的工作流程。

**Q3：将构建环境分区到单独的机器上是否有必要/好主意？**

至于这个问题的“必要”部分，不，不需要您物理或虚拟分离构建环境才能并排构建这些应用程序，但是如果您的业务*可以*选择这样做需求是这样的，您需要基于每个应用程序的专用构建环境。

从技术角度来看，Provisioning Profiles 提供了能够并行构建所需的 99% 的分区。唯一会遇到可能需要物理或虚拟分区的情况是，如果您是两个或多个 iOS 开发计划的成员，并且每个团队颁发的证书上的“通用名称”匹配（例如。 “iPhone Distribution: MyCompany”是 Team1 证书的通用名称，与 Team2 颁发的证书完全相同）。如果是这种情况，您会在 Xcode 中看到如下警告和错误：

> 代码签名错误：证书身份“iPhone Distribution: MyName”在钥匙串中出现多次。协同设计工具只需要一个。

在所有其他情况下，假设您同时安装了证书和配置文件并且正确设置了代码签名身份值，那么代码签名可以自行处理。

**Q4：两个应用可以复用同一个推送证书吗？**

这是一个可靠的“不”。每个 App Id 都有自己的一组配置文件，这些配置文件伴随着一组权利，其中一个是推送通知。在构建具有推送通知权利的新供应配置文件时，系统会要求您生成新的推送证书——没有机会向 Apple 提供您现有的证书。这样做是为了确保推送通知“提供者”（创建发送到 Apple 推送网关的推送通知有效负载的服务器）以类似于 iOS 生态系统中的方式进行沙盒化——每个 AppId 一个提供者...一个每个 AppId 的沙箱。

从安全的角度来看，这可以防止攻击者通过在 Apple 的 Push Gateway 处提供有效的 Push 令牌和有效负载来向您的用户发送垃圾邮件推送通知。设置提供程序代码的第二个实例并使用在制作新的配置文件时生成的推送证书，或者更新现有的提供程序以跟踪每个应用程序级别的推送通知令牌，并在发送推送通知有效负载时使用正确的证书给苹果。不幸的是，只有您（或您的同事）才能做出此决定，因为该决定将取决于您现有提供商的技术能力以及您/您的公司愿意在同一提供商实例上采取统一推送通知的风险程度。

其他人可能会在这里提出一些关于他们如何设置自己的提供程序的额外见解，但我已经使用完全独立的实例来防止一个应用程序的推送通知的更新可能会破坏一个完全不同的应用程序的推送通知的情况。

# ember.js - 检测 Ember.Data 请求何时失败

> ID：15623628
> 
> 赞同：1
> 
> 时间：2013-03-25T19:58:54.197
> 
> 标签：ember.js, ember-data

我有一个允许用户向 Twitter 提交帖子的应用程序。它使用 Ember.Data 和 Django Rest Framework 后端。用户发布一条消息，该消息进入服务器，然后提交到 Twitter，然后将响应返回给客户端。这部分一切正常，但我想构建代码来管理请求失败的时间，无论是在我们的服务器上还是在对 Twitter 的请求上。

我找到了有关模型的[isError 状态](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/model/states.js#L224)的文档，但我不确定这是否是我正在寻找的正确属性。

这是我目前正在实施的代码：

```
saveMessage: function(text, postingWindow){
    var acct = Social.Account.find(this.get("id")),
        msg = Social.store.createRecord(
                  Social.Message,
                  {
                      text: text,
                      account: acct,
                      created: new Date()
                  }
              );

    acct.get("messages").addObject(msg);
    Social.store.commit();
} 
```

基本上我想要完成的是推迟在 UI 中显示消息，直到我知道我从用户那里获得了成功。但另一方面，如果我能立即获得错误状态，我不想永远等待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:27:13.923

在此处查看我的答案：[使用 Ember.js 数据 RESTAdapter 时应如何处理错误？](https://stackoverflow.com/questions/12968829/how-should-errors-be-handled-when-using-the-ember-js-data-restadapter/13845348#13845348)

基本上，您可以覆盖回调`becameError`和`becameInvalid`DS.Model 子类。还有其他可以挂钩的模型生命周期回调。见这里：[http ://emberjs.com/guides/models/model-lifecycle/](http://emberjs.com/guides/models/model-lifecycle/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-22T17:06:34.360

我使用这样的东西：

```
AdminApp.ApplicationAdapter = DS.RESTAdapter.extend({
    namespace: '',
    host: 'http://localhost/myroomplan_wp/index.php/wp-json',
    ajaxError: function(jqXHR) {
        alert(jqXHR.responseText);
    }
}); 
```

# javascript - A* 算法：封闭列表包含太多元素/太大

> ID：15623630
> 
> 赞同：5
> 
> 时间：2013-03-25T19:59:06.013
> 
> 标签：javascript, path-finding, a-star

我目前正在 JavaScript 中实现 A* 算法。但是，我遇到了一个问题：我的 closedList 似乎太大了。这是输出的屏幕截图：

![JS 中的 A* 实现](../Images/b0444a65ba610e34f0c23bb4b0ca6627.png)

什么可能导致这个问题？我的启发式计算错了吗？

```
Node.prototype.getHeuristic = function(pos0, pos1)
{
    // Manhatten Distance
    var horizontalDistance = Math.abs(pos1.x - pos0.x);
    var verticalDistance = Math.abs(pos1.y - pos0.y);
    return horizontalDistance + verticalDistance;
} 
```

还是我在这种方法中理解/实施了错误？：

```
PathFinder.prototype.findPath = function() 
{
var start = new Date().getTime();
var openList = [];
var closedList = [];

var startNode = this.startNode;
var grid = this.grid;
var endNode = this.finishNode;

openList.push(startNode);

while (openList.length > 0)
{
    var lowInd = 0;
    for(var i = 0; i < openList.length; i++) {
        if (openList[i].f < openList[lowInd].f) 
        {
            lowInd = i; 
        }
    }
    var currentNode = openList[lowInd];

    if (currentNode.x == endNode.x && currentNode.y == endNode.y)
    {
        var curr = currentNode;
        var ret = [];
        while (curr.parent)
        {
            ret.push(curr);
            curr.type = NODES.PATH;
            curr = curr.parent;
        }   

        this.finishNode.type = NODES.FINISH;
        this.printGrid();   
        console.log("Total Operations: " + this.operations);

        var end = new Date().getTime();
        var time = end - start;
        console.log('Execution time: ' + time + "ms");

        return true;
    }

    openList.splice(lowInd, 1);
    closedList.push(currentNode);
    if (currentNode.type != NODES.START) 
    {
        currentNode.type = NODES.CLOSED;
    }

    var neighbors = currentNode.getNeighbors(this.grid);

 for (var indexNeighbors = 0; indexNeighbors < neighbors.length; indexNeighbors++)
    {
        var neighbor = neighbors[indexNeighbors];

        if (this.findNodeInArray(closedList, neighbor) || neighbor.isWall())
        {
            continue;
        }

        var gValue = currentNode.g + 1;
        var isGvalueLowest = false;

        if (!this.findNodeInArray(openList, neighbor))
        {
            isGvalueLowest = true;
            neighbor.h = neighbor.getHeuristic(neighbor, endNode);
            openList.push(neighbor);
        } 
        else if (gValue < neighbor.g) 
        {
            isGvalueLowest = true;
        }

        if (isGvalueLowest) 
        {
            neighbor.parent = currentNode;
            neighbor.g = gValue;
            neighbor.f = neighbor.g + neighbor.h;   
            neighbor.type = NODES.MARKED;

            console.log(neighbor);
            this.operations++;
        }
    }

}
} 
```

如果您想查看更多代码部分，请告诉我。我很感激任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T20:21:44.750

您需要[打破与端点的联系](http://theory.stanford.edu/~amitp/GameProgramming/Heuristics.html#breaking-ties)。

![在不中断与端点的联系的情况下](../Images/a8146025c2c6ac3a3064d0b06bcbb850.png)
*（不打破对端点的联系）*

![与端点断绝关系](../Images/545ae3cf32a491fde9dde5ff46829432.png)
*（与端点断绝关系）*

![有障碍物的例子](../Images/e4426ea741f7191c8a1858a6df919ae0.png)
*（有障碍物的例子）*

# c - 从文本文件自动输入到 ac 程序

> ID：15623633
> 
> 赞同：-1
> 
> 时间：2013-03-25T19:59:21.923
> 
> 标签：c, io

是否可以在 C 中自动从文本文件输入数据。如果不是在 C 中，那么是否可以在其他语言中。例如：我正在构建一棵树，树的每个节点都应该包含 1000 个最流行的英语单词。现在我不提供手动输入，而是想知道是否可以通过将所有单词粘贴到文本文件中来自动完成然后使用一些操作将它们一一存储到每个节点中。我只想知道这是否可能，如果是，我会解决其余的问题。如果不是在 C 中，那么是否可以在任何其他语言中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:04:32.150

# 是的你可以

事实是，它（大部分）是编译成机器代码的 C 语言代码，用于处理您的硬盘、操作系统、内存和您在桌面上看到的所有虚拟文件。

标头`stdio.h`包含用于读取和写入文件的函数。

一些 API 函数和结构是：

`FILE`, `fopen()`, `fclose()`, `freopen()`, `fwrite()`, `fread()`, `rewind()`, `fseek()`, `ftell()`, `fgets()`, `fputs()`, `fprintf()`, `fscanf()`- 谷歌他们和他们的用途/用法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:13:44.757

当然可以做到这一点，[C](http://www.cprogramming.com/tutorial/cfileio.html) [确实](http://www.cs.bu.edu/teaching/c/file-io/intro/) [文件 I/O](http://en.wikipedia.org/wiki/C_file_input/output)，这就是你的全部要求。您需要做的是打开存储单词的文本文件，从文件中循环读取 1000 次。由于您知道树中的节点数，您可以静态分配 1000 个节点，或者您可以在读取 ( `malloc`) 时动态分配，但请确保在完成后记得释放它。

网上有几十个例子，但这里有一个 2 秒的概述：

```
char word[100]; // longest word you have in the file +1
FILE * fp = fopen("words.txt", "r"); // you'll need to open the file for reading

for(int count = 0; count < 1000; count++){
    fgets(word, 100, fp); // read each word in
    // do whatever to populate a node
}

fclose(fp); // you shold close it when you're done 
```

# ms-access - 从 Access 2007 中的数据透视图图例中删除“总和”

> ID：15623637
> 
> 赞同：0
> 
> 时间：2013-03-25T19:59:30.503
> 
> 标签：ms-access

我创建了一个基于查询的数据透视图，除了图例之外，一切似乎都在工作。图例总是显示“等待时间总和”、“应用程序计数”等。我似乎无法删除“总和”。这里有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:04:07.553

经过一些实验，我认为您正试图在一个用于显示数据透视表的相对不灵活的工具中显示一个简单的图表。

图表上方的框包含要对下方类别和右侧数据系列的交集执行的计算。如果您正在处理原始数据，这可能很有用，但如果您已经计算了查询中的总和，则不会。

最好将数据导出到 Excel。

# ember.js - ContainerView 中的“分组”子视图

> ID：15623640
> 
> 赞同：1
> 
> 时间：2013-03-25T19:59:33.297
> 
> 标签：ember.js

我正在创建一个动态仪表板，目前正在尝试使用 ContainerView 和小部件的 childViews 来实现这一点。我现在想要做的是分组，或者更确切地说，将一个 div 包裹在一个子集的子集上。举个恰当的例子：假设我创建了 4 个子视图

```
App.IndexView = Ember.ContainerView.extend({
    classNames: ['dashboard'],
    childViews: ['LinechartView', 'TableView', 'BarchartView', 'TabletwoView'],
    ... 
```

这样就可以正常工作，正如预期的那样，它只是在每个周围创建了 4 个 div。但是我现在想做的是在前两个和后两个周围放置一个 div，这样我就可以将它们放在同一个“行”中（使用引导程序）。我是否认为我必须为每一行创建一个子视图，即另一个容器视图，每个元素或列都是它的子视图？或者有没有更简单的方法？

澄清一下，目前我的 DOM 结构如下所示：

```
<div id="ember308" class="ember-view dashboard">
    <div id="ember311" class="ember-view">LinechartView</div>
    <div id="ember314" class="ember-view">TableView</div>
    <div id="ember317" class="ember-view">BarChartView</div>
    <div id="ember320" class="ember-view">TabletwoView</div>    
</div> 
```

我希望我的 DOM 结构是这样的：

```
<div id="ember308" class="ember-view dashboard">
    <div class="row">
        <div id="ember311" class="ember-view span6">LinechartView</div>
        <div id="ember314" class="ember-view span6">TableView</div>
    </div>
    <div class="row">
        <div id="ember317" class="ember-view span6">BarChartView</div>
        <div id="ember320" class="ember-view span6">TabletwoView</div>
    </div>
</div> 
```

它更多的是围绕视图而不是额外的 span6 类包装行。任何更多的帮助真的很感激。干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:22:32.767

**更新**：嵌套`containerview`很快就会变得复杂——假设你有一个 3x2 网格，然后用户调整窗口大小，现在你想在第一行显示 4，在第二行显示 2——如果这样做很痛苦您对行使用嵌套的容器视图。

如果您希望仪表板的内容根据用户的需要动态更改（即，有些有 3 个小部件，有些有 15 个，可以拖放重新排序），我认为坚持一层最有意义`containerview`，然后使用 CSS 将它们设置为网格。您可以“模拟”一个方形网格，而您的底层 DOM 实际上是一个 div 列表：这是一个示例：http: [//yaleclassroulette.com/](http://yaleclassroulette.com/)。这使用同位素库：http: [//isotope.metafizzy.co/index.html](http://isotope.metafizzy.co/index.html)。

**原文**：虽然您的解决方案（创建嵌套`containerviews`的行的内部）会起作用，但我很好奇您为什么需要容器视图。

您是否考虑过放弃容器视图，而是在模板中进行布局？因此，从模板更改`App.IndexView`为由`ContainerView`模板支持的视图，您可以根据自己的喜好对其进行构建，并使用`{{outlet}}`或填充其子视图`{{view}}`。

例子：

index_view.js：

```
 App.IndexView = Ember.View.extend({
   templateName: "index.hbs" 
```

索引.hbs：

```
 <div class="row1">
     {{view App.LinechartView stuffBinding="whatever.you.need.for.initialization"}}
     {{view App.TableView stuffBinding="whatever"}}
 </div>
 <div class="row2">
     {{view App.BarchartView stuffBinding="whatever"}}
     {{view App.TabletwoView stuffBinding="whatever"}}
 </div> 
```

如果您想更好地控制显示的内容，您可以用插座替换视图。通常，`ContainerView`如果您希望以编程方式控制视图并且不太关心结构，则使用它——在这种情况下您会这样做吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:36:36.720

每当您希望将辅助模板包裹在主模板周围时，都可以使用 layout 属性。

[http://emberjs.com/api/classes/Ember.View.html](http://emberjs.com/api/classes/Ember.View.html)，然后去布局查看API。

使用 layoutName 属性使其由模板支持。

# joomla - joomla 三级菜单 2.5

> ID：15623647
> 
> 赞同：0
> 
> 时间：2013-03-25T19:59:49.223
> 
> 标签：joomla, joomla2.5

我在一个 joomla 网站上工作，似乎有 2.5 的错误。

我想在菜单中保持适当的层次结构，所以我在“搜索”下有标签，就像这样

```
parent - main page for area "static"
 search - search page for advanced search
       tag - tag page
       tag - tag page 
```

*我使用 k2 作为标签

我有这样的菜单设置，但是当我制作一个从第三级显示的模块时，什么都没有显示。但是，当我将其更改为带有子项目的第二级时，将显示第三级。

我们尝试了不同的菜单插件，以及删除和重新制作菜单项，似乎没有什么可以解决这个问题。我会说它是 joomla 2.5 的一个错误，但是当它“应该”在新版本中修复时，我们不想破解它才能工作。有没有其他人有类似的问题并让它工作？或者这个错误对我们来说或多或少是孤立的（joomla 安装）？

如果需要更多详细信息，我将很乐意尝试并提供更多信息，这种情况让我们感到困惑，因为 joomla 本身允许多达十级菜单。

更新：搜索我们最终放弃了这个，它似乎需要某种插件，并且想要避免使用更多的插件然后需要如此简单的东西，我们正在制作一个静态菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:53:12.323

在当前的 joomla 结构中似乎是不可能的。我们改变了如何解决这个问题的想法，最终采用了静态解决方案。

# math - 用Scheme中的莱布尼茨公式编写程序来近似pi？

> ID：15623655
> 
> 赞同：1
> 
> 时间：2013-03-25T20:00:15.240
> 
> 标签：math, scheme, pi

我试图弄清楚如何编写一个程序来用莱布尼茨公式逼近 pi。该函数接受一个误差 E，并以某种方式给出 pi 近似值。

我完全不确定该怎么做。我开始编写一个辅助函数，但不知道该放什么。有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:52:43.700

除非使用某种收敛加速技术，否则莱布尼茨公式是计算 π 的一种相当低效的方法。根据[维基百科](http://bit.ly/10GyF6y)，使用级数的直接求和计算 π 到 10 个正确的小数位需要大约 5,000,000,000 个术语！

无论如何，这是公式的直接翻译 - 进行了一些小的优化，包括删除了幂运算，这使得它比 @GoZoner 的实现略快：

```
(define (leibniz err)
  (let loop ((n 0)
             (prev +nan.0)
             (curr 0.0))
    (if (<= (abs (- curr prev)) err)
        (* 4 curr)
        (loop (add1 n)
              curr
              ((if (even? n) + -) curr (/ 1 (add1 (+ n n)))))))) 
```

该过程不断迭代，直到系列的当前值与前一个值之间的差小于或等于提供的误差。错误应该是一个很小的数字，比如说`1e-6`。例如：

```
(leibniz 1e-6)
=> 3.1415946535856922 
```

作为参考，在[这个](https://stackoverflow.com/questions/407518/code-golf-leibniz-formula-for-pi)问题中，莱布尼茨公式有几个非常简短的实现——包括[Scheme](https://stackoverflow.com/a/410564/201359)中的一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:15:52.310

PI的[莱布尼茨公式](https://en.m.wikipedia.org/wiki/Leibniz_formula_for_%CF%80)是一个求和。该函数将递增 n，直到 n 的和小于 E。

```
(define (leibniz err)
  (define (summand n)
    (/ (expt -1 n) (+ (* 2.0 n) 1)))
  (let summing ((result 0) (n 0))
    (let ((increment (summand n)))
      (if (< (abs increment) err)
          (* 4 (+ result increment))
          (summing (+ result increment) (+ n 1)))))) 
```

# c# - 在项目 C# Windows Store 应用程序之外添加图像

> ID：15623656
> 
> 赞同：2
> 
> 时间：2013-03-25T20:00:16.573
> 
> 标签：c#, windows-8, windows-runtime, fileopenpicker

在我的 xaml 文件中，我有一个名为 OutputImg 的图像。我还有一个名为 OutputTB 的文本块，用于显示图像的名称，还有一个按钮可以让我从“图片”文件夹中选择图像。

后面的代码：

```
private async void Button_Click_1(object sender, RoutedEventArgs e)
{
    FileOpenPicker openPicker = new FileOpenPicker();
    openPicker.ViewMode = Picker.ViewMode.List;
    openPicker.SuggestedStartLocation = PickerLocationId.PicutresLiibrary;
    openPicker.FileTypeFilter.Add(".png");
    StorageFile.file = await openPicker.PickSingleFileAsync();
    OutputTB.text = file.Name;

    BitmapImage image = new BitmapImage(new Uri(file.path));
    OutputImg.Source = image;
} 
```

问题是即使我没有收到任何错误，我的图片也不会显示。它将图片的名称写到 OutputTB.text 但 Image 只是保持为空。如何使我选择的图像出现在 OutputImg 图像框中。

我知道我在这里可能缺少一个非常基本的东西，但这只是一个学习项目

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T20:45:01.867

您不能使用为位图`file.path`创建`Uri`对象，因为`file.path`它提供了旧样式路径（例如`c:\users\...\foo.png`）。位图需要新样式的 uri 路径（例如`ms-appdata:///local/path..to..file.../foo.png`）。

但是，据我所知，没有任何方法可以为图片库指定新的样式 uri 路径。因此，您必须使用一个简单的解决方法：

由于您有对该文件的引用，您可以改为访问文件的流，然后将流设置为位图的源：

```
StorageFile file = await openPicker.PickSingleFileAsync();
OutputTB.text = file.Name;

// Open a stream for the selected file.
var fileStream =
    await file.OpenAsync(Windows.Storage.FileAccessMode.Read);

// Set the image source to the selected bitmap.
BitmapImage image = new BitmapImage();
image.SetSource(fileStream);

OutputImg.Source = image; 
```

# java - topcoder 竞技场编辑器保存路径？

> ID：15623659
> 
> 赞同：-1
> 
> 时间：2013-03-25T20:00:23.220
> 
> 标签：java, editor

我[`kawigiedit`](http://www.topcoder.com/contest/classes/KawigiEdit/KawigiEdit.html)在 topcoder arena 中使用，但我想将源代码保存到我的工作路径中。
我没有在 kawigiedit 中找到配置选项`the path to save the code`。
有没有办法指定它或其他编辑器来配置路径？
（我不想使用 Ctrl-C + Ctrl-V）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T12:47:08.967

点击配置

![在此处输入图像描述](../Images/b50ad47add53b11f6c560a23cea70741.png)

在第一个选项卡中，在常规下并浏览以选择您的文件夹

![在此处输入图像描述](../Images/06244dab36f614b8258a28d0d7e1a125.png)

瞧！您的代码将自动同步到您想要的文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:40:12.940

我在谷歌搜索中努力工作并找到了一个，虽然不完美但很有用：[Greed Edit](https://github.com/shivawu/topcoder-greed)
但我看到有人在视频记录的竞技场中使用**了刚刚命名为“editor”的东西。**
一些更好的建议？

PS：[看这里](http://apps.topcoder.com/forums/;jsessionid=F741DFF9CDB52F130930D383942B87D0?module=Thread&threadID=597911&start=0&mc=74#992265)

# ios - 如何检测是否有任何外部库正在调用 [UIDevice currentDevice] uniqueIdentifier]？

> ID：15623660
> 
> 赞同：9
> 
> 时间：2013-03-25T20:00:26.317
> 
> 标签：ios, uniqueidentifier, udid, uidevice

因此，[由于 Apple 现在拒绝访问 UDID 的应用程序，](http://thenextweb.com/apple/2013/03/21/after-a-year-of-warnings-apple-will-no-longer-accept-any-apps-that-use-udids-as-of-may-1st/)因此在我们公司当前的项目中，我们需要消除所有调用此属性的 API：

```
[[UIDevice currentDevice] uniqueIdentifier] 
```

我们已经消除了我们自己代码中的所有调用，但需要确保我们使用的许多外部库没有调用此属性。

确定库是否正在调用此属性的最可靠方法是什么？

先感谢您！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-25T23:57:05.803

除了使用`otx`（这似乎变得不稳定）之外，一个选择是在该方法上设置一个符号断点，然后运行应用程序一段时间，看看你是否点击它。

为该方法配置符号断点如下所示：

![在此处输入图像描述](../Images/6d1ccda3b6cbf678ef60194451a58764.png)

如果你遇到了那个断点，你可以通过打开调试器控制台并输入来找出是谁调用了它`bt`。在这种情况下，电话来自我的`application:didFinishLaunchingWithOptions:`，但无论是谁打电话都有效：

```
(lldb) bt
* thread #1: tid = 0x1c03, 0x001f4690 UIKit`-[UIDevice uniqueIdentifier], stop reason = breakpoint 1.1
frame #0: 0x001f4690 UIKit`-[UIDevice uniqueIdentifier]
frame #1: 0x0000212e MyApp`-[AppDelegate application:didFinishLaunchingWithOptions:](self=0x0747fcb0, _cmd=0x005aec21, application=0x08366300, launchOptions=0x00000000) + 702 at AppDelegate.m:37
frame #2: 0x00015157 UIKit`-[UIApplication _handleDelegateCallbacksWithOptions:isSuspended:restoreState:] + 266
frame #3: 0x00015747 UIKit`-[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1248
frame #4: 0x0001694b UIKit`-[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 805
frame #5: 0x00027cb5 UIKit`-[UIApplication handleEvent:withNewEvent:] + 1022
frame #6: 0x00028beb UIKit`-[UIApplication sendEvent:] + 85
frame #7: 0x0001a698 UIKit`_UIApplicationHandleEvent + 9874
frame #8: 0x01f01df9 GraphicsServices`_PurpleEventCallback + 339
frame #9: 0x01f01ad0 GraphicsServices`PurpleEventCallback + 46
frame #10: 0x01f1bbf5 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
frame #11: 0x01f1b962 CoreFoundation`__CFRunLoopDoSource1 + 146
frame #12: 0x01f4cbb6 CoreFoundation`__CFRunLoopRun + 2118
frame #13: 0x01f4bf44 CoreFoundation`CFRunLoopRunSpecific + 276
frame #14: 0x01f4be1b CoreFoundation`CFRunLoopRunInMode + 123
frame #15: 0x0001617a UIKit`-[UIApplication _run] + 774
frame #16: 0x00017ffc UIKit`UIApplicationMain + 1211
frame #17: 0x00001d42 MyApp`main(argc=1, argv=0xbffff3f8) + 130 at main.m:16 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-15T21:26:38.543

扩展奎因的答案：

*   `strings`列出编译对象或库中的所有符号，按每个类第一次出现的顺序。如果您`uniqueIdentifier`在输出中看到，他们可能正在使用该名称调用其他方法。但是，如果您`currentDevice`在输出中看到紧随其后的是`uniqueIdentifier`，那么他们几乎肯定是在调用`[[UIDevice currentDevice] uniqueIdentifier]`。`currentDevice`如果库在文件中较早地调用，则这两行可能不是连续的。
*   `otool -ov`列出库中的所有类、方法和导入。如果它列出了`uniqueIdentifier`，则可能意味着该库正在使用该名称定义自己的方法。在上下文中查看参考。在每个类的底部，您会看到一个`Contents of (__DATA,__objc_classrefs) section`列出导入的部分。如果`_OBJC_CLASS_$_UIDevice`在您发现引用的类的导入中列出`uniqueIdentifier`，那么该类很可能正在调用`-[UIDevice uniqueIdentifier]`。
*   的输出`nm`类似于`otool`此目的。具体来说，它不会向您显示对 的调用`uniqueIdentifier`，但会向您显示导入的类`UIDevice`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-15T13:20:23.677

很难可靠地确定闭源库是否真的在调用方法，但有一些方法可以查看它们*是否可能*是：

*   使用[字符串](http://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/strings.1.html)查看“uniqueIdentifier”是否出现在库中，无论它是如何使用的：

    `$ strings libFoo.a | grep uniqueIdentifier`

*   使用[nm](http://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/nm.1.html)或[otool](http://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/otool.1.html)（请参阅[此答案](https://stackoverflow.com/a/16514820/120292)）

*   使用[otx](http://otx.osxninja.com)（请参阅[此答案](https://stackoverflow.com/a/9894190/120292)）

这些方法可以帮助发现设置断点可能会错过的潜在调用。

# javascript - 使用沙盒的 PayPal 按钮未显示

> ID：15623665
> 
> 赞同：0
> 
> 时间：2013-03-25T20:00:38.423
> 
> 标签：javascript, paypal

我试图让一个简单的“立即购买”按钮出现在我的页面上，但我无法让它出现，这是我的代码：

```
<script>
    data-amount="3.00" 
    data-name="MyActivity" 
    data-button="buynow" src="paypal-button.min.js?merchant=MERCHANT_ID"
</script>
<form class="paypal-button" method="post" action="https://www.paypal.com/cgi-bin/webscr" target="_top" style="opacity: 1;">
<input type="button" value="buy">
</form> 
```

在我的代码中，商家 ID 就在那里，我刚刚为此取出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T00:44:46.897

这些都应该是脚本标签的属性，而不是标签内的代码......就像这样......

```
<script src="paypal-button.min.js?merchant=MERCHANT_ID"
    data-amount="3.00" 
    data-name="MyActivity" 
    data-button="buynow">
</script> 
```

您需要下载 js 文件并将其保存在您的服务器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:06:33.737

您是否有可以提供的指向您设置了此设置的页面的链接？验证，您保存代码并将其发布到您的页面，您的编辑器没有删除一些代码。转到网页并查看页面的源代码并确保它与您输入的内容相同。当我在 HTML 页面上使用您的代码时，我看到了一个按钮。

# c# - 绑定到通用属性

> ID：15623666
> 
> 赞同：3
> 
> 时间：2013-03-25T20:00:56.913
> 
> 标签：c#, silverlight, xaml, generics, binding

我正在尝试将 ListBox 绑定到我的 ViewModel 中的属性。我想做的是能够随时将该属性换出到另一个具有相同字段的列表。所以目前我有这个：

```
public List<City> Cities
{
    get { return GetCities(); }
} 
```

当我使用通常的绑定它时

```
ItemsSource="{Binding Cities}" 
```

它工作正常。我还有另一个名为 Rivers 的密封类和相同的公共财产（名称）。

```
public List<River> Rivers
{
    get { return GetRivers(); }
} 
```

它们都有一个共同的属性“名称”，这是列表框显示的内容。在河流、城市和其他职业之间交换的最佳方式是什么？从理论上讲，我想要一个通用 List 属性，它可以绑定并将其值设置为 Rivers 或 Cities 等。但我认为创建通用 List 属性是不可能的。所有类都是密封的，我无法修改它们。

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T20:06:40.117

如果您无法更改原始类，您最好为 River 和 City 创建两个[适配器](http://en.wikipedia.org/wiki/Adapter_pattern)类，每个都实现一个带有 Name 属性的公共接口。

这样，您可以只使用一个列表来表示它们中的每一个，并随意在两者之间进行交换。

例如

```
public interface INamed
{
   string Name { get; }
}

public class RiverAdapter : INamed
{
  private River _river;
  public string Name { get { return _river.Name; } }
}
public class CityAdapter : INamed
{
  private River _city;
  public string Name { get { return _city.Name; } }
} 
```

因此您的列表声明将变为：

```
public IEnumerable<INamed> Items { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:20:24.960

您可以使用`dynamic`绑定到您的列表`ListBox`并根据您需要显示的内容进行填充，您可以使用它来`DisplayMemberPath`显示`Name``ListBox`

工作示例：

代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private ObservableCollection<dynamic> _listBoxItems = new ObservableCollection<dynamic>();
    public ObservableCollection<dynamic> ListBoxItems
    {
        get { return _listBoxItems; }
        set { _listBoxItems = value; }
    }

    public List<River> Rivers
    {
        get
        { 
            return new List<River>
            { 
               new River { Name = "River1" } ,
               new River { Name = "River2"}
            };  
        }
    }

    public List<City> Cities
    {
        get
        {
            return new List<City>
            { 
               new City { Name = "City1" } ,
               new City { Name = "City2"}
            };  
        }
    }

    private void button_City_Click(object sender, RoutedEventArgs e)
    {
        ListBoxItems.Clear();
        Cities.ForEach(i => ListBoxItems.Add(i));
    }

    private void button_River_Click(object sender, RoutedEventArgs e)
    {
        ListBoxItems.Clear();
        Rivers.ForEach(i => ListBoxItems.Add(i));
    }
}

public sealed class City
{
    public string Name { get; set; }
}

public sealed class River
{
    public string Name { get; set; }
} 
```

xml:

```
<Window x:Class="WpfApplication10.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="199" Width="191" Name="UI">
    <Grid DataContext="{Binding ElementName=UI}" >
        <ListBox ItemsSource="{Binding ListBoxItems}" DisplayMemberPath="Name" Margin="0,0,0,29" />
        <Button Content="City" Height="23" HorizontalAlignment="Left" Name="button1" VerticalAlignment="Bottom" Width="75" Click="button_City_Click"/>
        <Button Content="River" Height="23" HorizontalAlignment="Right" Name="button2" VerticalAlignment="Bottom" Width="75" Click="button_River_Click"/>
    </Grid>
</Window> 
```

结果：

![在此处输入图像描述](../Images/9fb2151cc21effc15f71dee6d0c4ba8f.png)

# tfs - TFS 构建失败，甚至在项目中也没有文件的“无法复制文件”

> ID：15623667
> 
> 赞同：6
> 
> 时间：2013-03-25T20:01:01.683
> 
> 标签：tfs, msbuild, tfsbuild

我已经设置了 TFS Build，直到昨天都运行良好。从那时起，我从一个项目中得到以下错误：

> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\WebApplications\Microsoft.WebApplication.targets (182)：无法复制文件“Content\themes\base\images\ui-bg_flat_0_aaaaaa_40x100.png”因为没有找到。
> 
> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\WebApplications\Microsoft.WebApplication.targets (182)：无法复制文件“Content\themes\base\images\ui-bg_flat_75_ffffff_40x100.png”因为没有找到。C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\WebApplications\Microsoft.WebApplication.targets (182)：无法复制文件“Content\themes\base\images\ui-bg_glass_55_fbf9ee_1x400.png”因为没有找到。
> 
> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\WebApplications\Microsoft.WebApplication.targets (182)：无法复制文件“Content\themes\base\images\ui-bg_glass_65_ffffff_1x400.png”因为没有找到。C:\程序文件
> 
> ......还有大约10个......

错误提到的文件无处可寻，不在项目中，也不在项目的任何文件夹中。

**有谁知道如何摆脱这个错误？**

在 .target 文件的 Ln 182 处如下：

```
<Copy SourceFiles="@(Content)" Condition="'%(Content.Link)' == ''"
DestinationFolder="$(WebProjectOutputDir)\%(Content.RelativeDir)" 
SkipUnchangedFiles="true" 
Retries="$(CopyRetryCount)"
RetryDelayMilliseconds="$(CopyRetryDelayMilliseconds)" /> 
```

我在解决方案中还有第二个项目，它几乎相同并且构建良好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T22:49:10.447

Grep/在整个源代码树中搜索这些文件名 - 必须引用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-16T10:07:01.610

将丢失的文件添加到源代码控制解决了我的问题。

# php - 如何使用 PHP for iOS 创建 web 服务？

> ID：15623669
> 
> 赞同：0
> 
> 时间：2013-03-25T20:01:07.540
> 
> 标签：php, android, ios, web-services

我有一个网站，用 PHP 和 MySQL 数据库编写。为了学习如何编写 iPhone 和 Android 应用程序，我想创建一个可供 iOS 和 Android 应用程序使用的 Web 服务。

我该如何继续？访问 MySQL 数据库的功能已经到位，因为它们现在已用于该站点 - 但是接下来的步骤是什么使这些功能/类可用于我的 Web 服务并因此可用于应用程序？我有哪些选择？认证？节点.js？有人知道很棒的教程吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:10:38.157

对于从设备向您网站的 API 请求信息，我建议使用 GET 或 POST：

**得到**

```
http://www.example.com/api/v1/getUsers?username=User* 
```

**邮政**

```
http://www.example.com/api/v1/getUsers

Post the following information to the above URL:
  username = User* 
```

关于来自 Web 服务器的响应，我建议以 JSON 或 XML 格式输出信息。Android 和 iOS 都有内置的 XML 解析库，也有 3rd-party 库来解析 JSON。这些天它们甚至可能是内置的。

我的建议是同时支持 JSON 和 XML，因此您可以使用最适合您正在使用的开发环境约束的任何方法：

**JSON**

```
{
  'success':True,
  'users': [
    {'id': 1, 'username': 'User1'},
    {'id': 2, 'username': 'User2'},
    {'id': 3, 'username': 'User3'}
  ]
} 
```

**XML（利用属性）**

```
<response>
  <success>1</success>
  <users>
    <user id="1" username="User1" />
    <user id="2" username="User2" />
    <user id="3" username="User3" />
  </users>
</response> 
```

**XML（仅使用标签）**

```
<response>
  <success>1</success>
  <users>
    <user>
      <id>1</id>
      <username>User1</username>
    </user>
    <user>
      <id>2</id>
      <username>User2</username>
    </user>
    <user>
      <id>3</id>
      <username>User3</username>
    </user>
  </users>
</response> 
```

在 PHP 中，您可以通过以下方式输出 JSON：

```
<?php

$response = array(
  'success': True,
  'users': array(
    array('id' => 1, 'username' => 'User1'),
    array('id' => 2, 'username' => 'User2'),
    array('id' => 3, 'username' => 'User3')
  )
)

print json_encode($response); 
```

根据您是否要使用标签属性，输出 XML 会稍微复杂一些...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:11:41.640

您需要的是您的应用程序可以访问的 API。你可以用任何你喜欢的方式定义它们，但有些方式比其他方式更常见，例如 RESTful 实现。

使用 rest，您可以使用 4 个动词为域上的数据定义访问点：GET、POST、UPDATE 和 DELETE。您可能认识其中两个。

使用诸如 Slim Framework for php 之类的库，您可以定义访问点，如下所示：

```
 self::$Slim->post('/document', '\MyApp\DocumentController::newDocument');
    // Get all documents for authenticated user
    self::$Slim->get('/document', '\MyApp\DocumentController::getAllDocuments'); 
```

在此示例中，Web 服务将接受对 /document 的 post 或 get 请求，其中 get 表示“获取所有文档”，而 post 表示“创建新文件”。这些函数是静态的，因此您不必为任何给定情况实例化所有控制器。

无论哪种情况，结果都是使用 JSON 发出的。iOS 和 Android 都可以使用内置函数或第三方库来解释 JSON。我个人喜欢 AFNetworking for iOS。

简而言之，创建 www.yourdomain.com/api，并使用 Slim 框架添加 /api/document 之类的入口点，并让这些入口点执行您的逻辑。使用 JSON 响应，例如在 php.ini 中使用 json_encode()。在应用端使用 AFNetworking 发出请求并解释 JSON 数据。

同样，这些是我的偏好，还有其他方法。

祝你好运！

# php - preg_match 每边几个特殊字符之间的字符串

> ID：15623679
> 
> 赞同：2
> 
> 时间：2013-03-25T20:01:31.540
> 
> 标签：php, regex

我正在尝试删除 MathJax 分隔符之间包含的所有文本，例如`$str1 = blah blah \( 2*(2+2) = 8\) blah blah \[ \int_0^1 f = [F]_0^1 \]`.

正如您可能已经想到的那样，分隔符是`\(...\)`and`\[...\]`并且该`...`部分可能包含任何字符`()[]\`。

仅考虑这种`\[...\]`情况，我已经尝试过

```
$text = preg_replace("/\\\[.*\\\]/","",$text); 
```

但由于某种原因它与我的表达不匹配，而

```
$text = preg_replace("/.\[.*\\\]/","",$text); 
```

确实符合我的表达方式（但也有一些不需要的表达方式，比如`a[...\]`.

所以我的问题有两个：

1.  有什么问题`\\\[`？
2.  我可以做一些比中间的 .* 更好的事情，它会说“可以有 a`\`或 a `]`，但是没有`\]`？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:36:05.527

1.  你必须使用

    `preg_replace("/\\\\\\[.*\\\\\\]/", "", $str1);`

    函数的模式参数`preg_replace`是一个普通的 PHP 字符串，因此`\\`被替换`\`为以下正则表达式模式：

    `/\\\[.*\\\]/`

    前两个反斜杠`\\`匹配主题中的一个反斜杠，其余的`\[`分别`\]`匹配`[`和`]`。

2.  是的，您可以使用所谓的负前瞻零宽度断言。有关详细信息，请查看 [http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)。在你的情况下，我会尝试类似：

    `preg_replace("/\\\\\\[(?:(?!\\\\\\]).)*\\\\\\]/","",$str1);`

    `?!\\\\\\]`一旦`\]`遇到就停止匹配。`?:`防止外部括号被捕获。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:34:37.253

这是一个匹配任一分隔符的正则表达式：

```
preg_replace('/\\[\[\(].*?\\[\]\)]/', '', $data); 
```

# r - 将边缘值转换为 R 中的网络对象后保留在图中的边缘值

> ID：15623681
> 
> 赞同：0
> 
> 时间：2013-03-25T20:01:44.897
> 
> 标签：r, graph, social-networking, adjacency-matrix, sna

注 1：我使用的是 R 包“network”和“sna”

注意 2：我的原始数据是 .csv 文件中的 edgelist 格式。

我一直在寻找将边缘列表数据读入 R 的最佳方法。乍一看，这很简单。

```
data <- read.csv("file.CSV", header=F)
network <- network(data, matrix.type="edgelist", directed=F) #convert data to network object
val<-data[,3] #here are the values for my edges
set.edge.value(network, "val", val, e=1:length(network$mel)) 
```

当我要求网络返回边缘值 (get.edge.values) 时，它会返回正确的值。

但是，当我询问时`summary(network)`，它只返回一个邻接矩阵，其中所有值都设置为 1（对角线除外）。即使它们的值为零，它们的值也是 1。

此外，试图获得像 degree(network) 这样的东西会返回错误的结果。

我一直在寻找这几天。一个可能的解决方案是使用`network2<-as.matrix.network(netwerk1, matrix.type="adjacency", attrname="val")`. 这行得通。然而，问题是它不再是一个网络对象，而是一个矩阵类。结果，我无法向网络添加顶点属性。再次将 network2 转换回网络对象会丢失网络中的边缘值。

一些帮助将不胜感激。

最好的，弗雷德里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:08:19.190

看起来您回答了自己的问题：将网络对象转换为矩阵时，您需要包含`attrname`参数以告知`as.matrix.network`将哪个属性用于权重。如果它已经是一个网络对象，你能解释一下为什么需要将它转换回网络对象吗？

中的`degree`函数`sna`没有参数来告诉它要使用哪个边缘属性，因此您必须向它传递一个具有权重的矩阵。

```
> library(network)
> library(sna)
> net<-network.initialize(3)
> add.edges(net,c(1,2,3),c(2,3,1))
> set.edge.attribute(net,'weight',c(5,6,7))
> as.matrix(net,matrix.type='adjacency',attrname='weight')
  1 2 3
1 0 5 0
2 0 0 6
3 7 0 0
> netmat<-as.matrix(net,matrix.type='adjacency',attrname='weight')
> degree(net)
[1] 2 2 2
> degree(netmat)
[1] 12 11 13 
```

所以在你的情况下，

```
degree(network2) 
```

应该管用。

# html - 在 jquery mobile 中导航时出现白色闪烁

> ID：15623682
> 
> 赞同：1
> 
> 时间：2013-03-25T20:01:46.540
> 
> 标签：html, jquery, jquery-mobile

我注意到当我在项目中的任何 html 文件之间导航时会出现白色闪烁，除非我导航离开索引文件。我正在使用 JQM，但我没有使用 ajax，因为我正在链接到多页文档。

我已经读到在制作应用程序时使用 JQM 和 Phonegap 的人会发生这种情况，但对于常规桌面网站，我对为什么会发生这种情况感到困惑。任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T20:13:05.857

尝试这个..

`data-position="fixed"`如果您正在使用它，请删除页眉和页脚。

然后，将以下 CSS 样式应用于您的页眉、内容和页脚：

```
.header {
    position : fixed;
    z-index  : 10;
    top      : 0;
    width    : 100%
}
.content {
    padding : 45px 15px
}
.footer {
    position : fixed;
    z-index  : 10;
    bottom   : 0;
    width    : 100%
} 
```

[这个想法/片段是从这个问题](https://stackoverflow.com/questions/10903433/ios5-jquery-mobile-transition-blinks)中 Jasper 的答案（不是 OP 接受的答案）中借来的。我在单页 jQuery Mobile v1.1.0 + Phonegap 应用程序上遇到了闪烁问题，这为我解决了这个问题。也许同样的解决方法也适用于 v1.3 上的多页应用程序。

# com - Trizetto Facets 扩展的扩展错误

> ID：15623686
> 
> 赞同：0
> 
> 时间：2013-03-25T20:02:00.140
> 
> 标签：com, add-in

![Trizetto Facets 扩展的扩展错误。](../Images/7849725c19f0d6e64490d5c6e4c7b28f.png)

大家好，我不知道这里是否有人可以提供帮助，但我们无能为力。我们使用 Trizetto 的 Facets 产品，我继承了一个在生产中运行良好的扩展。我所更改的只是一种方法中的一个 URL 及其过载，现在我们都无法在 Windows 7 或 XP SP3 中运行它。调试它或运行已安装的扩展会给出显示的错误。扩展指南（就像 Trizetto 发布的大部分内容一样）毫无用处，而且它们没有在线支持链接或知识库。有没有人遇到过这种事情，你能引导我找到任何可能的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T15:03:26.993

Trizetto 对于扩展来说是相当直接的。在这种情况下，您的自定义代码在 Facets 尝试调用它时会返回错误。你能在 Facets 之外运行你的代码，看看会发生什么吗？测试台在这里有帮助。

# java - SharedPreference ClassCastException 问题 Android

> ID：15623687
> 
> 赞同：1
> 
> 时间：2013-03-25T20:02:04.733
> 
> 标签：java, android

第一次发帖，如有错误请见谅。也是Android的新手，我在试图找出共享偏好问题时遇到了问题。我声明我的常量如下

```
 private static SharedPreferences mSharedPreferences;
    static final String TWEET = null;

    static final String MEAL_ID = null; 
```

我的共同偏好如下

```
 mSharedPreferences = getApplicationContext().getSharedPreferences(
            "MyPref", 0); 
```

我的简单测试代码如下：

```
 String msgTemp = "testing";
long iDTest = 234;
Editor e = mSharedPreferences.edit();
e.putLong(MEAL_ID, iDTest);
e.putString(TWEET, msgTemp);
e.commit();
String tempMsg = mSharedPreferences.getString(TWEET, "");
long tempId = mSharedPreferences.getLong(MEAL_ID, 0);
    Toast.makeText(getApplicationContext(),
    "Msg: " + tempMsg + " " + "ID: " + tempId, Toast.LENGTH_LONG).show(); 
```

返回以下错误：

```
 03-25 15:47:41.386: E/AndroidRuntime(28321): java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Long03-25 15:47:41.386: E/AndroidRuntime(28321):    at android.app.SharedPreferencesImpl.getLong(SharedPreferencesImpl.java:228) 
```

但是，如果我像这样切换代码中的 2 个“放置”行：

```
 String msgTemp = "testing";
long iDTest = 234;
Editor e = mSharedPreferences.edit();
e.putString(TWEET, msgTemp);
e.putLong(MEAL_ID, iDTest);
e.commit();
String tempMsg = mSharedPreferences.getString(TWEET, "");
long tempId = mSharedPreferences.getLong(MEAL_ID, 0);
    Toast.makeText(getApplicationContext(),
    "Msg: " + tempMsg + " " + "ID: " + tempId, Toast.LENGTH_LONG).show(); 
```

我收到以下错误：

```
 03-25 15:50:16.551: E/AndroidRuntime(28838): java.lang.ClassCastException:  java.lang.Long cannot be cast to java.lang.String 03-25 15:50:16.551: E/AndroidRuntime(28838):  at android.app.SharedPreferencesImpl.getString(SharedPreferencesImpl.java:205) 
```

所以在我看来，这些值以错误的顺序输入到偏好中，但我不知道为什么。我尝试在输入新值之前清除这些值，如下所示：

```
 String msgTemp = "testing";
long iDTest = 234;
Editor e = mSharedPreferences.edit();
e.remove(MEAL_ID);
e.remove(TWEET);
e.putLong(MEAL_ID, iDTest);
e.putString(TWEET, msgTemp);
e.commit();
String tempMsg = mSharedPreferences.getString(TWEET, "");
long tempId = mSharedPreferences.getLong(MEAL_ID, 0);
    Toast.makeText(getApplicationContext(),
    "Msg: " + tempMsg + " " + "ID: " + tempId, Toast.LENGTH_LONG).show(); 
```

但这也无济于事。任何人都可以为我阐明这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T20:04:55.397

给你的常量值：

MEAL_ID = "meal_id"

# php - 从字符串中获取参数并转换为数组 php

> ID：15623688
> 
> 赞同：1
> 
> 时间：2013-03-25T20:02:14.300
> 
> 标签：php, regex

我有来自用户的输入字符串。用户的这种输入是不可预测的。这意味着用户可以随意输入任何字符串。我想过滤匹配以下模式的输入并将其作为数组返回

以下这些字符串模式应该有效：

```
product=bag, product=tshirt, product=shoes 
```

* * *

```
product=bag status=sold, product=jeans, product=shoes 
```

* * *

```
product=all 
```

我希望输出为数组，如下所示：

```
Array(
 [0] => Array
  (
    [product] => bag
    [status]  => sold
  )

 [1] => Array
  (
    [product] => jeans
  )

 [2] => Array
  (
    [product] => shoes
  )
) 
```

我想它可以通过在explode 旁边使用preg_match_all() 来实现。任何人都可以使用 preg_match_all 给我举个例子吗？或任何其他方法对我来说都可以，只要最好的方法。

```
$string = 'product=bag status=sold, product=tshirt, product=shoes';
$m = preg_match_all('/needregexrulehere/', $string, $matches); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:18:22.660

你不需要正则表达式，你可以这样做：

```
$return = array();
foreach( str_getcsv( $string) as $line) {
    parse_str( str_replace( ' ' , '&', $line), $temp);
    $return[] = $temp;
} 
```

这[将输出](http://viper-7.com/qTClqt)：

```
Array
(
    [0] => Array
        (
            [product] => bag
            [status] => sold
        )

    [1] => Array
        (
            [product] => tshirt
        )

    [2] => Array
        (
            [product] => shoes
        )

) 
```

我将把错误检查/输入卫生留给 OP。

# oop - 向/从文件写入/读取类对象，D-Lang

> ID：15623691
> 
> 赞同：1
> 
> 时间：2013-03-25T20:02:21.657
> 
> 标签：oop, class, io, d

我正在尝试从/向文件写入/读取类对象。
我是 D 的新手，我只是想玩一下它。

是否有一个类/函数可以将对象写入文件/从文件读取对象？
我正在寻找类似于`ObjectOutputStream`Java 中的类的东西。

还是我必须将对象的变量序列化（连接）为文件中的字符串？

我有一个`Movie`类和一个`MovieManager`类，其中包含一个动态电影数组。

一个`Movie`对象只包含几个字符串和整数值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:02:24.957

扩展答案，在评论中提供，值得明确指出，D 没有提供从文件读取/写入对象的“一种真正的方式”，因为不可能有一个最佳的方式。关于速度、生成的文件格式、处理引用和类似极端情况的不同考虑可能会导致不同的序列化策略。

话虽如此，很可能需要适当的序列化库，并且幸运的是，目前正在审查最成熟的 D 解决方案之一（Jacob Carlborg [https://github.com/jacob-carlborg/orange](https://github.com/jacob-carlborg/orange)的“Orange”）作为包含在标准库中的候选`std.serialization`：[新闻组线程](http://forum.dlang.org/thread/kinpnv%24ven%241@digitalmars.com)。这可能是你最好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T18:02:48.443

[Unmanaged](https://github.com/BBasile/Unmanaged)库提供了一个序列化系统。您还拥有限制较少的[Orange](https://github.com/jacob-carlborg/orange) ，因为非托管序列化仅在要序列化的对象是框架基类之一的祖先时才有效。但是......非托管根据“访问器”原则工作。序列化的数据是通过一个方法获取的，反序列化的数据是通过一个方法设置的，它允许在反序列化器调用时更新一些东西，例如......

# jquery-ui - 如何使用 jqueryui 取消自动完成？

> ID：15623692
> 
> 赞同：3
> 
> 时间：2013-03-25T20:02:21.560
> 
> 标签：jquery-ui, autocomplete, jquery-ui-autocomplete

我有一个输入字段，它附加了一个 ajax 数据源自动完成功能。

我有一个用于输入字段的 keyup 处理程序，它查找按下回车键的人，当他们这样做时会触发对搜索按钮的单击，该按钮将 ajax 加载到另一个 div 中的一些数据。

问题是，如果这个人很快并且键入并按下回车，自动完成仍然会弹出。

我尝试了以下方法：

*   添加`$('#autocomplete').autocomplete('close')`. 这不起作用，大概是因为自动完成功能尚未打开。如果我输入，请等待自动完成功能出现，然后按回车键，它会正确关闭它。

*   添加`$('#autocomplete').autocomplete('destroy')`. 这行得通，但是如果我回到现场尝试另一个搜索，自动完成不再起作用。

所以我想要的是一种取消任何未决请求并在自动完成功能打开时关闭它的方法，但不会禁用或破坏它。

编辑：代码示例（不是我的真实代码，只是用于演示问题的存根）。文件名是scratch.php

```
<?php
// Stub for search results
if ($_GET['search'])
{
    print "Search results for ".$_GET['search']." here";
    exit();
}

// Simulated DB search
if ($_GET['term'])
{
    print '[{"label":"A 1"},{"label":"A 2"},{"label":"A 3"},{"label":"A 4"}]';
    exit();
}
?>
<html>
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
    <link type="text/css" href="http://code.jquery.com/ui/1.10.1/themes/redmond/jquery-ui.css" rel="stylesheet" />
    <script language='javascript'>
    $(document).ready(function() {
        $('#searchfor').on('keyup',function(e) {
            if (e.which == 13) $('#search').trigger('click');
        });
        $('#searchfor').autocomplete({
            source: "/scratch.php",
            minLength: 2,
            select: function( event, ui ) {
                $('#searchfor').val(ui.item.value);
                $('#search').trigger('click');
            }
        });
        $('#search').on('click',function() {
            try
            {
                // Cancel any pending autocompletes without destroying the autocomplete completely here.
                // This currently doesn't work
                $('#searchfor').autocomplete("close");
            }
            catch(e)
            {
                // Do nothing except prevent an error
            }
            $('#results').load('scratch?search='+encodeURIComponent($('#searchfor').val()));
        });
    });
    </script>
</head>
<input id='searchfor' /> <input id='search' type='button' value='search' />
<div id='results'></div>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T21:41:18.790

解决这个问题的一种方法是让`input`注意力不集中。您可以使用[`.blur()`](http://api.jquery.com/blur/). 做这样的事情怎么样：

JAVASCRIPT：

```
$(document).ready(function() {
        $('#searchfor').on('keyup',function(e) {
            if (e.which == 13) $('#search').trigger('click');
               $('#searchfor').blur();
        });
        $('#searchfor').autocomplete({
            source: "/scratch.php",
            minLength: 2,
            select: function( event, ui ) {
                $('#searchfor').val(ui.item.value);
                $('#search').trigger('click');
            }
        });
        $('#search').on('click',function() {
            $('#results').load('scratch?search='+encodeURIComponent($('#searchfor').val()));
        });
    }); 
```

演示：http: [//jsfiddle.net/dirtyd77/dMjRb/3/](http://jsfiddle.net/dirtyd77/dMjRb/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-06T18:12:17.063

在当前版本的 jQuery UI 中，您可以在向数据源发出请求之前使用搜索事件进行一些检查

[https://api.jqueryui.com/autocomplete/#event-search](https://api.jqueryui.com/autocomplete/#event-search)

```
 let autocompleteData = [
      "ActionScript",
      "AppleScript",
      "Asp",
      "BASIC",
      "C",
      "C++",
      "Clojure",
      "COBOL",
      "ColdFusion",
      "Erlang",
      "Fortran",
      "Groovy",
      "Haskell",
      "Java",
      "JavaScript",
      "Lisp",
      "Perl",
      "PHP",
      333333,
      222222,
      111111,
      123456
    ];

    $('input').autocomplete({
		source: autocompleteData,
		search:function(e,u){
			let value = e.target.value;
      // stops the event from continuing if value integer.
			if( Number.isInteger(parseInt(value)) ){
				e.preventDefault();
			}
		},
	});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<input type="text">
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-07T11:49:11.627

假设您有一个单页应用程序。

1.  你可以用

```
<form onsubmit="return false;">...<form>
```

这将捕获回车键或任何将触发提交的事件。

2.  然后，您可以自己绑定提交事件并执行以下操作：

```
 $('input').blur().focus();
do something with $('input').val();
```

# android - Android 应用程序不应该崩溃 [ACRA]

> ID：15623694
> 
> 赞同：1
> 
> 时间：2013-03-25T20:02:27.393
> 
> 标签：android, toast, crash-reports, acra

大家好，

我正在使用（目前正在尝试）[ACRA](http://acra.ch/)进行错误报告。场景是：

*   我打开应用程序：ACRA 输出`ACRA is enabled for mypackage, intializing...`
*   我输入设置（我准备了 NullpointerException）
*   应用程序冻结并通过 toast 输出*准备崩溃对话框*
*   该应用程序**没有**关闭，而是一次又一次地输出相同的吐司（所有视图都消失了）
*   当我关闭应用程序时，几秒钟后（我猜是收集数据）崩溃对话框打开

我的 Application 子类前面有以下注释：

```
@ReportsCrashes(formKey = "iwontshowyoumyformkey", customReportContent = {
    REPORT_ID, APP_VERSION_CODE, ANDROID_VERSION, PHONE_MODEL, BRAND,
    STACK_TRACE }, 
    mode = ReportingInteractionMode.DIALOG, 
    resToastText = R.string.acra_toast_text, 
    resDialogText = R.string.acra_dialog_text, 
    resDialogTitle = R.string.acra_dialog_title,
    resDialogCommentPrompt = R.string.acra_dialog_comment_prompt,
    resDialogOkToast = R.string.acra_dialog_ok_toast,
    forceCloseDialogAfterToast=true) 
```

根据 Logcat 的说法，一个值得注意的细节是错误一次又一次地发生。这让我认为活动一直在重新启动，并且错误在 onCreate...
**但是标签是***ACRA*的事实让我不确定它是否不是 ACRA，重新输出错误。

* * *

**问题**：应用程序应该崩溃并关闭，以便对话框可以出现，但不是。
**问题**：我将如何调试/解决这个问题？一个解决方案会更好......

提前谢谢你，直到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:08:31.997

它没有解决，但我决定不再花时间在上面，放弃 ACRA。
[Crittercism](http://www.crittercism.com)已被证明是无痛的。

# ios - OCUnit的测试用例类中是否需要在公共接口中定义测试方法

> ID：15623695
> 
> 赞同：0
> 
> 时间：2013-03-25T20:02:31.137
> 
> 标签：ios, objective-c, ocunit

使用 OCUnit 编写单元测试时，可以省略公共接口 (.h) 中的测试方法定义。但是关于公共接口中的测试方法定义，OCUnit 的最佳实践是什么？

ModelTest.h（未定义测试方法）

```
@interface ModelTest : SenTestCase

@end 
```

模型测试.m

```
@implementation ModelTest : SenTestCase
    - (void) testCreation {
        ...
    }
@end 
```

ModelTest.h（带有测试方法定义）

```
@interface ModelTest : SenTestCase
    - (void) testCreation;
@end 
```

个人认为，在公共接口中反映公共测试方法定义会更好。但最佳实践是什么？是否存在无法避免在公共接口中声明这些方法的情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:09:16.337

非测试类很少依赖测试类；没有人会#include 你的 ModelTest 声明。因此，封装或公开测试方法并没有太多好处。无论如何，测试运行者都会看到它们。

如果您从标头生成文档，则在 .h 文件中声明它们可能很有用。

有时，您可能会定义一个 SenTestCase 的子类，为您的测试添加特殊的辅助方法。如果你这样做，你可能不想在超类上公开测试方法。但是，最好从超类中完全删除测试用例，将超类视为仅包含辅助方法的抽象接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:56:17.913

我不使用单独的 .h 和 .m 进行 OCUnit 测试；一切都进入.m

在接口中放一些东西的唯一原因是让另一个类可以发现它。但是测试是通过反射找到的，而不是通过引用特定测试用例名称的代码。

有关我使用的模板以及原因，请参阅[https://qualitycoding.org/unit-test-template/ 。](https://qualitycoding.org/unit-test-template/)

# javascript - Javascript getElementsByClass HTML

> ID：15623696
> 
> 赞同：0
> 
> 时间：2013-03-25T20:02:43.060
> 
> 标签：javascript, html

我在使用简单的“getElementsByClass”函数循环表单上的元素时遇到问题。我必须使用这个标题：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

我也必须使用IE8。

如果我删除标题，该功能可以正常工作。我意识到错误的标签不在正确的位置，但是如果我删除它们，该功能也可以正常工作。该页面还有更多内容，但这里是精简版：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

<script type="text/javascript">
    function getElementsByClass(node,searchClass,tag) {    
        var classElements = new Array();
        var els = node.getElementsByTagName(tag); // use "*" for all elements
        var elsLen = els.length;
            alert("elsLen: " + elsLen);        
        var pattern = new RegExp("\\b"+searchClass+"\\b");
        for (i = 0, j = 0; i < elsLen; i++) {          
         if ( pattern.test(els[i].className) ) {
     classElements[j] = els[i];
     j++;
     }
    }
    alert("getElementsByClass: classElements.length: " + classElements.length);
    return classElements;
    }
</script>
</head>
<body>
<table>
  <form name="formOne"> 
      <input type="button" value="click" onclick="getElementsByClass(document.formOne,'popupElement','*');" />          
      <input type="text" class="popupElement">
   </form>        

  <form name="formTwo"> 
        <table>                
        <input type="text"  class="popupElement">
        <input type="text" class="popupElement"> 
        <input type="button" value="click2" onclick="getElementsByClass(document.formTwo,'popupElement','*');" />
  </form> 
```

formOne 上对 getElementsByClass() 的第一次调用正确触发并在警报框上显示正确的值。但是在调用 formTwo 时，该函数没有在表单上找到任何元素。

我只是想弄清楚为什么会发生这种情况，以便我可以制定解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:39:26.627

首先，我无法在 IE8 上复制它，这似乎是 IE9 的问题。

问题在于您提供的 HTML。由于某种原因，IE DOM 解析器在结束标记所在的位置混淆了，因此创建了一个空标记 (<>)。在您的情况下，表单最终是一个空标签，导致以下输出。

```
LOG: elsLen: 0 
LOG: getElementsByClass: classElements.length: 0 
```

试试这个标记。

```
<html>
<body>
<table>
<tbody>
    <tr>
        <td>
            <form name="formOne"> 
                <input type="button" value="click" onclick="getElementsByClass(document.formOne,'popupElement','*');" />          
                <input type="text" class="popupElement" />
            </form> 
        </td>
    </tr>
    <tr>
        <td>
            <form name="formTwo"> 
                <table>
                    <tbody>
                        <tr>
                            <td>
                                <input type="text"  class="popupElement"/>
                                <input type="text" class="popupElement"/> 
                                <input type="button" value="click2" onclick="getElementsByClass(document.formTwo,'popupElement','*');" />
                            </td>
                        </tr>
                    </tbody>
                </table>
            </form>
        </td>
    </tr>
</tbody>
</table>
</body>
</html> 
```

主要是我刚刚关闭了所有标签并遵循了[HTML 4.01 表模式](http://www.w3.org/TR/html401/struct/tables.html#h-11.2)。

# angularjs - AngularJS中带有ng-repeat范围的指令隔离范围

> ID：15623698
> 
> 赞同：95
> 
> 时间：2013-03-25T20:02:44.083
> 
> 标签：angularjs, angularjs-directive, angularjs-scope, angularjs-ng-repeat

我有一个带有隔离范围的指令（以便我可以在其他地方重用该指令），当我将此指令与 一起使用时`ng-repeat`，它无法工作。

我已阅读有关此主题的所有文档和 Stack Overflow 答案并了解这些问题。我相信我已经避免了所有常见的陷阱。

所以我知道我的代码由于`ng-repeat`指令创建的范围而失败。我自己的指令创建了一个隔离作用域，并对父作用域中的对象进行双向数据绑定。我的指令将为这个绑定变量分配一个新的对象值，并且当我的指令不使用`ng-repeat`（父变量正确更新）时，这可以完美地工作。但是，使用`ng-repeat`时，赋值会在`ng-repeat`范围内创建一个新变量，而父变量看不到更改。根据我所阅读的内容，所有这些都符合预期。

我还读到，当给定元素上有多个指令时，只会创建一个范围。并且`priority`可以在每个指令中设置 a 来定义指令的应用顺序；指令按优先级排序，然后调用它们的编译函数（在[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)搜索单词优先级）。

所以我希望我可以使用优先级来确保我的指令首先运行并最终创建一个隔离范围，并且在`ng-repeat`运行时，它重新使用隔离范围，而不是创建一个原型继承自父范围的范围。`ng-repeat`文档声明该指令以优先级运行`1000`。不清楚`1`是更高的优先级还是更低的优先级。当我在指令中使用优先级`1`时，它没有任何区别，所以我尝试了`2000`. 但这让事情变得更糟：我的双向绑定变成`undefined`了，我的指令不显示任何东西。

我创建[了一个小提琴来展示我的问题](http://jsfiddle.net/BWybB/7/)。`priority`我已经在我的指令中注释掉了设置。我有一个名称对象列表和一个名为的指令，该指令`name-row`显示名称对象中的名字和姓氏字段。单击显示的名称时，我希望它`selected`在主范围内设置一个变量。名称数组、`selected`变量`name-row`使用双向数据绑定传递给指令。

我知道如何通过在主范围内调用函数来使其工作。我也知道，如果`selected`在另一个对象内部，并且我绑定到外部对象，事情就会起作用。但我目前对这些解决方案不感兴趣。

相反，我的问题是：

*   如何防止`ng-repeat`创建原型从父范围继承的范围，而是让它使用我的指令的隔离范围？
*   为什么`2000`我的指令中的优先级不起作用？
*   使用 Batarang，是否有可能知道正在使用什么类型的范围？

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2013-03-26T19:06:14.937

好的，通过上面的很多评论，我发现了混乱。首先，澄清几点：

*   ngRepeat 不会影响您选择的隔离范围
*   传递给 ngRepeat 以用于指令属性的参数*确实*使用原型继承的范围
*   您的指令不起作用的原因与隔离范围无关

这是相同代码的示例，但删除了指令：

```
<li ng-repeat="name in names"
    ng-class="{ active: $index == selected }"
    ng-click="selected = $index">
    {{$index}}: {{name.first}} {{name.last}}
</li> 
```

这是一个[JSFiddle](http://jsfiddle.net/BWybB/10/)证明它不起作用。您会得到与指令中完全相同的结果。

为什么它不起作用？因为 AngularJS 中的作用域使用原型继承。`selected`您的父范围的值是一个**原始**的。在 JavaScript 中，这意味着当孩子设置相同的值时，它将被覆盖。在 AngularJS 作用域中有一条黄金法则：模型值应该*始终*包含`.`在其中。也就是说，它们不应该是原语。有关更多信息，请参阅[此 SO 答案](https://stackoverflow.com/a/14049482/259038)。

* * *

这是示波器最初的样子的图片。

![在此处输入图像描述](../Images/dca8f640de52bc4a8121d57b836b2816.png)

单击第一项后，范围现在如下所示：

![在此处输入图像描述](../Images/7d213db3d3cda37b69fc21e2acdd7662.png)

`selected`请注意，在 ngRepeat 范围内创建了一个新属性。控制器范围 003 未更改。

当我们点击第二项时，您可能会猜到会发生什么：

![在此处输入图像描述](../Images/b518065f07cbe5742f00896be8f8dc86.png)

* * *

因此，您的问题实际上根本不是由 ngRepeat 引起的 - 它是由违反 AngularJS 中的黄金法则引起的。修复它的方法是简单地使用对象属性：

```
$scope.state = { selected: undefined }; 
```

```
<li ng-repeat="name in names"
    ng-class="{ active: $index == state.selected }"
    ng-click="state.selected = $index">
    {{$index}}: {{name.first}} {{name.last}}
</li> 
```

这是[第二个 JSFiddle](http://jsfiddle.net/BWybB/9/)，也显示了这个作品。

这是范围最初的样子：

![在此处输入图像描述](../Images/478ae312ff07d66245a34415818074a3.png)

点击第一项后：

![在此处输入图像描述](../Images/377afe73b464e9cd562f0b691e06d260.png)

在这里，控制器范围会根据需要受到影响。

此外，为了证明这仍然适用于具有隔离范围的指令（因为同样，这与您的问题无关），这里也是一个[JSFiddle](http://jsfiddle.net/BWybB/38/)，视图必须反映对象。您会注意到，唯一必要的更改是使用*object*而不是*原语*。

最初的范围：

![在此处输入图像描述](../Images/574f110574cb9cda0029f49507ee860c.png)

单击第一项后的范围：

## ![在此处输入图像描述](../Images/fd7b3d90ea196cf40a193fa831172d4d.png)

总结：再一次，您的问题不在于隔离范围，也不在于 ngRepeat 的工作方式。您的问题是您违反了已知会导致此问题的规则。AngularJS 中的模型应该总是有一个`.`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-25T20:34:26.170

不要直接试图避免回答你的问题，而是看看下面的小提琴：

[http://jsfiddle.net/dVPLM/](http://jsfiddle.net/dVPLM/)

关键点是，与其试图对抗和改变 Angular 的传统行为，不如构建你的指令来使用`ng-repeat`，而不是试图覆盖它。

在您的模板中：

```
 <name-row 
        in-names-list="names"
        io-selected="selected">
    </name-row> 
```

在您的指令中：

```
 template:
'        <ul>' +      
'            <li ng-repeat="name in inNamesList" ng-class="activeClass($index)" >' +
'                <a ng-click="setSelected($index)">' +
'                    {{$index}} - {{name.first}} {{name.last}}' +
'                </a>' +
'            </li>' +
'        </ul>' 
```

针对您的问题：

*   `ng-repeat`将创建一个范围，你真的不应该试图改变它。
*   指令中的优先级不仅仅是执行顺序 - 请参阅：[AngularJS：HTML 编译器如何安排编译顺序？](https://stackoverflow.com/q/14988631/317180)
*   在 Batarang 中，如果您检查性能选项卡，您可以看到为每个范围绑定的表达式，并检查这是否符合您的期望。

# css - css3滑块自动旋转

> ID：15623703
> 
> 赞同：0
> 
> 时间：2013-03-25T20:02:58.293
> 
> 标签：css

我有一个手风琴滑块。使用 CSS3 是他们使滑块自动旋转而不使用 jquery 但仅使用纯 css3 动画的一种方法？ [这是我网站的网址。](http://pep-perspectives.com/734-2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T09:59:10.403

像这样？

[http://jsfiddle.net/coma/bXDHE/30/](http://jsfiddle.net/coma/bXDHE/30/)

**HTML**

```
<div class="neat">
    <div>
        <img src="http://www.menucool.com/slider/prod/image-slider-4.jpg"/>
        <img src="http://blogs.mathworks.com/pick/files/zebrainpastelfield.png"/>
        <img src="http://www.freewarepocketpc.net/wp7/img/image-effecter-free.png"/>
        <img src="http://www.poyraz.gen.tr/wp-content/uploads/images_4781_1.jpg"/>
    </div>
</div> 
```

**CSS**

```
div.neat {
    font-size: 500px;
    width: 1em;
    height: 200px;
    overflow: hidden;
}

div.neat > div {
    position: relative;
    left: 0;
    width: 4em;
    -webkit-animation: loop 10s infinite;
    -moz-animation: loop 10s infinite;
}

div.neat > div > img {
    width: 1em;
    display: block;
    float: left;
}

@-webkit-keyframes loop {
    0% { left: 0; }
    20% { left: 0; }
    25% { left: -1em; }
    45% { left: -1em; }
    50% { left: -2em; }
    70% { left: -2em; }
    75% { left: -3em; }
    95% { left: -3em; }
}

@-moz-keyframes loop {
    0% { left: 0; }
    20% { left: 0; }
    25% { left: -1em; }
    45% { left: -1em; }
    50% { left: -2em; }
    70% { left: -2em; }
    75% { left: -3em; }
    95% { left: -3em; }
} 
```

# android - 是否可以在 ActionBar 前面显示视图？

> ID：15623705
> 
> 赞同：1
> 
> 时间：2013-03-25T20:03:08.563
> 
> 标签：android, android-actionbar

我有两个片段。一个显示我的一般内容（片段 A）。另一个片段 B 显示在片段 A 的顶部。我希望我的操作栏在这两个布局的中间有一个 z 顺序。也就是说，片段 B 将显示在操作栏的前面。

我的问题是，是否可以在操作栏前显示视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:09:38.570

有可能的。

毕竟，应用程序已经可以全屏显示，而不是随操作栏全屏显示。您可以在 Java 中以编程方式自行设置。

```
import android.app.ActionBar;

...
// Show action bar
ActionBar actionBar = getActionBar();
actionBar.show();

...
// Hide action bar
ActionBar actionBar = getActionBar();
actionBar.hide(); 
```

只需确保有充分的理由在 Android 上替换这种常见的 UI 约定即可。

# php - bind_result 中的数字会破坏数组 php

> ID：15623709
> 
> 赞同：0
> 
> 时间：2013-03-25T20:03:30.850
> 
> 标签：php, mysql, arrays

这是我检索信息并发送回 ajax 的代码：

```
else if(isset($_POST['act']) && $_POST['act']=='getbook'){
$book = normalize_str(htmlentities(preg_replace('/\s+/',' ', $_POST['book']), ENT_QUOTES,'UTF-8'));
$filecat = '../books/'.$book.'/'.$book.'.txt';
$catlist = file($filecat, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);

$mysqli = new mysqli($Hostname, $Username, $Password, $DatabaseName);
$stmt = $mysqli->stmt_init();

$query = "SELECT `id`,`title`,`price`,`image`,`description`,`category`,`enablerating`,`rating` FROM ".$PapierTableName." WHERE book = ? ORDER BY position ASC, title ASC;";
$prepared = $stmt->prepare($query);

if($prepared){
    $stmt->bind_param('s', $book);
    $stmt->execute();
    $result = $stmt->bind_result($iden, $title, $price, $image, $description, $category, $enrat, $rating);
    if($result)
    {
        $rit = array();
        while($stmt->fetch())
        {
            $rit[] = array(

                invert_str(html_entity_decode($title, ENT_QUOTES, 'UTF-8')),
                $price,
                invert_str(html_entity_decode($image, ENT_QUOTES, 'UTF-8')),
                invert_str(html_entity_decode($description, ENT_QUOTES, 'UTF-8')),
                invert_str(html_entity_decode($category, ENT_QUOTES, 'UTF-8')),
                $enrat,
                $rating,
                $iden
            );
        }
        $stmt->close();
        $count = count($catlist);
        $ret = array();
        for($i = 0; $i < $count ; $i++)
            $ret= array_merge($ret, search($rit, 4, $catlist[$i]));
        file_put_contents('tre.txt',print_r($ret,true));
        echo json_encode($ret);
    }
    else
        file_put_contents('binderror.txt', $stmt->error);
}
else
    file_put_contents('connecterror.txt',$stmt->error);
} 
```

我的问题是，如果我添加`$iden`到数组中它不再起作用，我的意思是我没有数组，如果我用 print_r 打印它我没有输出。我也尝试过使用`(string)$iden`

我可以连接到数据库，并且所有信息都已检查（值和存在） 没有
**附加信息**。

`$iden`

```
Array
(
[0] => Array
    (
        [0] => DB9
        [1] => 200031
        [2] => //localhost/css/images/objectimg/Aston Martin/db9.jpg
        [3] => some html
        [4] => DB9
        [5] => 1
        [6] => 0
    )

[1] => Array
    (
        [0] => Rapid S
        [1] => 200000
        [2] => //localhost/css/images/objectimg/Aston Martin/vanq.jpg
        [3] => some html
        [4] => Rapid S
        [5] => 1
        [6] => 0
    ) 
```

)

和`$iden`

```
Array
(
) 
```

最后`$iden`：

```
Array
(
[0] => Array
    (
        [0] => DB9
        [1] => 200031
        [2] => //localhost/css/images/objectimg/Aston Martin/db9.jpg
        [3] => some html
        [4] => DB9
        [5] => 1
        [6] => 0
        [7] => 42
    )

[1] => Array
    (
        [0] => Rapid S
        [1] => 200000
        [2] => //localhost/css/images/objectimg/Aston Martin/vanq.jpg
        [3] => some html
        [4] => Rapid S
        [5] => 1
        [6] => 0
        [7] => 45
    ) 
```

)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:37:37.237

让我们直截了当，您不会通过在一行中创建多个变量来节省任何时间（或使代码更漂亮），一旦您扔掉分号，就真的是时候点击“输入”按钮了。

没有人费心给你一个正确答案的原因是，你的代码真的很难阅读。

首先，您应该从更好地构建代码开始，也应该考虑这样的事情：

*   实际上确保发布了某些内容，不要假设 $_POST['book'] 存在。
*   请向我们展示您在寻求帮助时使用的所有变量和函数，向我们展示 $Hostname,$Username,$Password,$DatabaseName 的值可能实际上会有所帮助。
*   $PapierTableName? 只需在查询中定义它，或者将名称也绑定到查询中。
*   将查询构造为字符串，然后准备保存查询的字符串。
*   您在查询中缺少分号。
*   使用 $rit[$i] 是没有意义的，使用 $rit[] = 将与将数据附加到数组一样好。
*   看看 utf8_encode，我认为你的代码过于复杂。
*   $ret = array_merge($ret, search($rit, 4, $catlist[$i])) 正在覆盖你所做的一切，你必须这样做 $ret[] = array_merge($ret, search($rit, 4, $catlist[$i]));

如此结合，这样的事情将更加结构化：

```
<?php
$postedBook = isset($_POST['book']) ? $_POST['book'] : false;

if($postedBook != false)
{
    $Hostname = 'localhost';
    $Username = 'root';
    $Password = '';
    $DatabaseName = 'dbName';

    $book = normalize_str(htmlentities(preg_replace('/\s+/',' ', $postedBook), ENT_QUOTES,'UTF-8'));
    $filecat = '../books/'.$book.'/'.$book.'.txt';
    $catlist = file($filecat, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);

    $mysqli = new mysqli($Hostname, $Username, $Password, $DatabaseName);
    $stmt = $mysqli->stmt_init();

    $query = "SELECT * FROM PapierTable WHERE book = ? ORDER BY position ASC, title ASC;";
    $prepared = $stmt->prepare($query);

    if($prepared)
    {
        $stmt->bind_param('s', $book);
        $stmt->execute();
        $result = $stmt->bind_result($iden, $title, $price, $image, $description, $category, $enrat, $rating);
        if($result)
        {
            $rit = array();
            while($stmt->fetch())
            {
                $rit[] = array(
                    invert_str(html_entity_decode($title, ENT_QUOTES, 'UTF-8')),
                    $price,
                    invert_str(html_entity_decode($image, ENT_QUOTES, 'UTF-8')),
                    invert_str(html_entity_decode($description, ENT_QUOTES, 'UTF-8')),
                    invert_str(html_entity_decode($category, ENT_QUOTES, 'UTF-8')),
                    $enrat,
                    $rating
                );
            }
            $stmt->close();
            $count = count($catlist);
            $ret = array();
            for($i = 0; $i < $count ; $i++)
            {
                $ret[] = array_merge($ret, search($rit, 4, $catlist[$i]))
            }
            echo json_encode($ret);
        }
        else
        {
            file_put_contents('binderror.txt', $stmt->error);
        }
    }
    else
    {
        file_put_contents('connecterror.txt',$stmt->error);
    }
}
?> 
```

我不确定这是否会解决您的问题，但如果没有，那么至少应该更容易让您找出问题所在。

发生的大多数错误都是非常常见和基本的，但非结构化代码使它们很难找到。

# javascript - 没有jquery的ajax请求头

> ID：15623712
> 
> 赞同：0
> 
> 时间：2013-03-25T20:03:43.677
> 
> 标签：javascript, jquery, ajax

我创建了以下 JavaScript 函数来加载车辆的图像，或者加载备用图像（如果它不可用）。问题是这个页面是 1kb，同时它必须为这个功能加载整个 85+kb 的 jquery 库。所以我的问题是，有没有什么方法可以在不加载 jQuery 库的情况下完成同样的任务？

```
function GetImages() {
var Query = location.search;
//If query exists
if ((Query != "") && (Query != "?")){
var chunks = Query.split("=");
//If passed the right parameter
if (chunks[0] == "?unit") {
    var Unit = chunks[1];
    for (var i=1; i<11; i++) {
        var unitimageURL = "/pics/"+Unit+"-"+i+".png";
        $.ajax({
            type: 'HEAD',
            url: unitimageURL,
            async: false,

            success: function() {
                $('.pictures').append("<img src="+unitimageURL+" width=150 height=90 alt='Unit "+Unit+" Picture "+i+"'>&nbsp;");
                if ((i == 4) || (i ==8)) {
                $('.pictures').append("<br>");
                }

            },
            error: function() {

                $('.pictures').append("<img src=nopic2.png width=150 height=90 alt='Unit "+Unit+" Picture "+i+"'>&nbsp;");
                if ((i == 4) || (i ==8)) {
                $('.pictures').append("<br>");
                }
            }
        });
    }

}
}
else {
alert("No query");
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:14:06.513

是的，有一种方法——古老的好`var oRequest = new XMLHttpRequest();`方法！不要忘记设置所有需要的回调，检查响应状态，一切都会好起来的。要创建 HEAD 请求，只需将“HEAD”指定为`.open()`方法的参数。

您还需要`document.createElement()`将结果附加到您的页面（或者您也可以使用`.innerHTML`属性。

此外，像[http://www.tutorialspoint.com/ajax/what_is_xmlhttprequest.htm](http://www.tutorialspoint.com/ajax/what_is_xmlhttprequest.htm)这样的文档可能会很方便。

# c# - 将 c++ CString.Format 语法转换为 .NET 字符串语法（可变前导宽度和小数位）

> ID：15623713
> 
> 赞同：0
> 
> 时间：2013-03-25T20:03:53.537
> 
> 标签：c#, c++, string

如何将以下 C++ CString 代码转换为 C# .NET 等效代码？

```
CString str;
int leading_width  = 5;
int decimal_places = 2;
int val            = 53.4789;

str.Format("%*.*d", leading_width, decimal_places, val); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:06:42.657

要获得可变的小数位数，请使用 转换`val`为字符串`val.ToString`，然后使用 填充值`String.PadLeft`。

```
int leading_width  = 5;
int decimal_places = 2;
int val            = 53.4789;

string str = val.ToString("N" + decimal_places);
str = str.PadLeft(leading_width); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:15:36.043

如果代码的目的是将整数或其他数字转换为字符串......

```
string NumString = val.ToString(); 
```

托管代码（c# 是）具有这个漂亮的 ToString 方法，代码中的每个对象都从`object`该类继承。

有各种各样的格式规则可以应用于关于规则和填充的最终结果。

有关详细信息，请参阅此页面：http: [//msdn.microsoft.com/en-us/library/dwhawy9k.aspx](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

**编辑**

这段代码怎么样

```
String.Format("%{0," + String.Format("{0}:D{1}", leading_width, decimal_places) + "}", val); 
```

或者您可以省略“%”并使用“P”而不是“D”

# actionscript-3 - Flash AS3 IF 语句

> ID：15623715
> 
> 赞同：0
> 
> 时间：2013-03-25T20:03:58.110
> 
> 标签：actionscript-3, flash, loops

我制作了一个 Flash 应用程序，您需要在其中匹配一个对象。所以在下面，我将对象（船，obj1，obj2，obj3）设置为目标（t1，t2，t3，t4）。然后我将分数设置为 0。

```
private function onAddedToStage(e:Event):void
    {
        stage.addEventListener(MouseEvent.MOUSE_UP, _check);
        removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
        addEventListener(Event.REMOVED_FROM_STAGE, onRemovedFromStage);

        ship.setTarget(t1,shipObject);

        obj1.setTarget(t2,1Object);

        obj2.setTarget(t3,2Object);

        obj3.setTarget(t4,3Object);

        score = 0;
                    scorecounter.text =" SCORE:" + score.toString();

    } 
```

接下来，我创建了一个函数来确定对象（在本例中为船）是否已到达目标。

```
function _check(event:TimerEvent):void 
    {
        if(ship.done)
           {     
              score += 1;
              scorecounter.text =" SCORE:" + score.toString();
           }

            } 
```

这可以正常工作，因为一旦用户将船拖到目标，它会在分数上加 1，但随后会出现问题。我有不止一个对象/目标。这意味着当用户完成将船移动到目标时，任何其他被移动的对象都会立即给分数+1，因为对象船仍然在目标处。

有人知道如何解决这个问题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:23:04.113

嗯......如果没有完整的代码，有点难以捕捉正在发生的事情，但这里有一个镜头：

我注意到你的“ship”对象有一个属性“done”，所以我猜你在对象上创建了一个名为“done”的变量/属性，这让我觉得你可以向船添加另一个属性，比如“scored”

所以你的代码可能看起来像这样：

```
if ((ship.done) && (ship.scored == false)){
  ship.scored = true;
  score += 1;
  scorecounter.text = "SCORE:" + score.toString();
} 
```

这对你来说可能吗？

# android - 动画在某些设备上崩溃

> ID：15623720
> 
> 赞同：0
> 
> 时间：2013-03-25T20:04:12.020
> 
> 标签：android, transition, rom

我的问题是我构建了一个在我所有设备上都运行良好的应用程序。但在我朋友的手机上，不仅应用程序的动画似乎崩溃了，甚至他的整个手机都重启了。我还尝试将动画放在 try 块中，但到目前为止还没有运气..

```
Intent openDaily = new Intent("nl.plplpl.ccs.DailyActivity");
        startActivity(openDaily);
        try{
            overridePendingTransition(R.animator.flip_in, R.animator.flip_out);
        }catch(Exception e){
            e.printStackTrace();
        }
        break; 
```

我也认为它可能是手机，因为他运行的是 CM10.1 的 Alpha 版本，但尝试了另一个 ROM，结果相同（也许与驱动程序有关？）。

无论如何准备好帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:16:00.600

> 我也认为它可能是手机，因为他运行的是 CM10.1 的 Alpha 版本，但尝试了另一个 ROM，结果相同（也许与驱动程序有关？）。

是的，如果您设法重新启动/使整个设备崩溃，则通常与驱动程序/内核/ ..相关。

无论您的应用程序做什么，设备都不应作为一个整体崩溃。如果您的应用程序出现问题，您应该会收到一条不错的错误消息并返回主屏幕。

只有当系统内的某些事情（因此不在您的责任范围内）出现严重错误时，才会重新启动。例如，图形驱动程序进入某种损坏状态并且无法恢复。没有办法解决`catch`这些类型的错误。如果它只是一个 Java `Exception`，它不会崩溃。

您有时可以在 logcat（未针对您的应用程序过滤）中看到发生了什么。

# php - CodeIgniter - 转义 SQL

> ID：15623722
> 
> 赞同：0
> 
> 时间：2013-03-25T20:04:16.380
> 
> 标签：php, mysql, sql, codeigniter

我正在尝试更新我的数据库。其中一个列值包含撇号等。我`$this->db->escape`在 CodeIgniter 中使用了可能包含此类字符的字符串，但我仍然收到以下错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'O\'Keeffe, O\'Keefe'' WHERE `survey_id` = 188' at line 1

UPDATE `survey` SET `firstname_confidence_score` = 100, `firstname_rhymes` = '''', `lastname_confidence_score` = 85, `lastname_rhymes` = ''O\'Keeffe, O\'Keefe'' WHERE `survey_id` = 188; 
```

我该如何解决？

更新：

```
$sql = "UPDATE `$table_name` SET `firstname_confidence_score` = $firstname_confidence_score, `firstname_rhymes` = '" . $this->db->escape($firstname_rhymes) . "', `lastname_confidence_score` = $lastname_confidence_score, `lastname_rhymes` =  '" . $this->db->escape($lastname_rhymes) . "' WHERE `$primary_id` = $id;";
$result = $this->db->query($sql); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:21:19.137

由于您使用的是`$this->db->escape()`，因此您会自动在数据周围添加单引号。

您的查询只需：

```
 $sql = "UPDATE `$table_name` 
         SET `firstname_confidence_score` = $firstname_confidence_score,  
             `firstname_rhymes` = " . $this->db->escape($firstname_rhymes) . ",  
             `lastname_confidence_score` = $lastname_confidence_score, 
             `lastname_rhymes` =  " . $this->db->escape($lastname_rhymes) . 
        "WHERE `$primary_id` = $id;"; 
```

您不需要单引号`$this->db->escape($firstname_rhymes)`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:06:27.780

```
UPDATE `survey` SET `firstname_confidence_score` = 100, `firstname_rhymes` = '''', `lastname_confidence_score` = 85, `lastname_rhymes` = 'O\'Keeffe, O\'Keefe' WHERE `survey_id` = 188; 
```

您在 lastname_rhymes 值周围有双撇号。

# asp.net - SQL Server 2012 - ASP.NET - VB.NET - 将数据插入数据库

> ID：15623724
> 
> 赞同：0
> 
> 时间：2013-03-25T20:04:25.333
> 
> 标签：asp.net, sql-server, vb.net, insert

我正在尝试使用带有 VB.NET 的 SQL 语句将数据插入到数据库表中。

这是我的代码：

注册.aspx：

```
Imports dbConnect
Imports System.Data.SqlClient

Partial Class Registration
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load

    End Sub

    Protected Sub btnRegister_Click(sender As Object, e As EventArgs) Handles btnRegister.Click

        register()

    End Sub

    Public Sub register()

        Dim Username As String = txtUsername.ToString
        Dim Surname As String = txtSurname.ToString
        Dim Password As String = txtPassword.ToString
        Dim Name As String = txtName.ToString
        Dim Address1 As String = txtAddress1.ToString
        Dim Address2 As String = txtAddress2.ToString
        Dim City As String = txtCity.ToString
        Dim Email As String = txtEmail.ToString
        Dim Country As String = drpCountry.ToString
        Dim DOB As Date = calDOB.SelectedDate
        Dim Occupation As String = txtOccupation.ToString
        Dim WorkLocation As String = txtWorkLocation.ToString
        Dim Age As Integer = "20"

        Dim ProjectManager As String = "test"
        Dim TeamLeader As String = "test"
        Dim TeamLeaderID As Integer = 1
        Dim ProjectManagerID As Integer = 1

        Dim RegistrationDate As Date = Today
        Dim ContractType As String = "test"
        Dim ContractDuration As Integer = 6
        Dim Department As String = "test"
        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
        Dim registerSQL As SqlCommand
        Dim sqlComm As String

        sqlComm = "INSERT INTO users(Username, Password, Name, Surname, Address1, Address2, City, Country, date_of_birth, age, Occupation, department, work_location, project_manager,team_leader, team_leader_id, project_manager_id, date_registration, contract_type, contract_duration) VALUES('" + Username + "','" + Password + "','" + Name + "','" + Surname + "','" + Address1 + "','" + Address2 + "','" + City + "','" + Country + "','" + DOB + "','" + Age + "','" + Occupation + "','" + Department + "','" + WorkLocation + "','" + ProjectManager + "','" + TeamLeader + "','" + TeamLeaderID + "','" + ProjectManager + "','" + RegistrationDate + "','" + ContractType + "','" + ContractDuration + "')"

        conn.Open()

        registerSQL = New SqlCommand(sqlComm, conn)

        registerSQL.ExecuteNonQuery()
        conn.Close()

    End Sub

End Class 
```

这是我的数据库“用户”表：

![用户表](../Images/7f99ff4a87fec20faadb514ebb40749f.png)

我收到此错误消息：

```
Error   1   Operator '+' is not defined for types 'Double' and 'Date'.  C:\Users\Brian\Documents\Visual Studio 2012\WebSites\WebSite1\Registration.aspx.vb  51  19  WebSite1(1) 
```

谁能告诉我发生了什么事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:07:59.317

正如 Lloyd 指出的，[参数化您的查询](http://msdn.microsoft.com/en-us/library/yy6y35y8.aspx)。例如（为便于阅读而缩短）

```
sqlComm = "INSERT INTO users(Username, Password, Name) VALUES(@Username, @Password, @Name)"
registerSQL = New SqlCommand(sqlComm, conn)
registerSQL.Parameters.AddWithValue("@Username", Username)
registerSQL.Parameters.AddWithValue("@Password", Password)
registerSQL.Parameters.AddWithValue("@Name", Name) 
```

但要回答您的问题，请使用`&`而不是`+`连接字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:10:52.153

只是给你一个起点

```
 sqlComm = "INSERT INTO users(Username, Password, Name, Surname, Address1, Address2, " + 
            "City, Country, date_of_birth, age, Occupation, department, work_location, " + 
            "project_manager,team_leader, team_leader_id, project_manager_id, " + 
            "date_registration, contract_type, contract_duration) " + 
            "VALUES(@p1, @p2,@p3,@p4,@p5,@p6,@p7,@p8,@p9,@p10,@p11,@p12,@p13,@p14,@p15," +
            "@p16,@p17,@p18,@p19,@p20)"
    conn.Open()
    registerSQL = New SqlCommand(sqlComm, conn)
    registerSQL.Parameters.AddWithValue("@p1", Username)
    ..... 
    registerSQL.ExecuteNonQuery() 
```

当传递给 AddWithValue 方法的值不是字符串时，尝试转换为数据库字段所期望的正确数据类型。

```
 registerSQL.Parameters.AddWithValue("@p9", Convert.ToDateTime(DOB)) 
```

这样你就不用担心用双引号解析字符串或者自动将字符串转换为日期，而且你也不会有Sql Injection攻击的问题

# objective-c - 基于单元格的 NSTableView 和基于视图的 NSTableView 有什么区别？

> ID：15623731
> 
> 赞同：20
> 
> 时间：2013-03-25T20:04:47.337
> 
> 标签：objective-c, nstableview

如果我的理解没有错的话，基于单元格的 NSTableView 和基于视图的 NSTableView 是同一类型的实例。那么，cpu如何区分cell-based和view-based呢？

据我所知，委托方法在基于单元格和基于视图之间是不同的。基于单元格的 NSTableView 需求`tableView:objectValueForTableColumn:row:`和基于视图的 NSTableView 需求`tableView:viewForTableColumn:row:`。有什么东西可以决定 NSTableView 的实例是基于单元格还是基于视图？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-25T22:38:41.073

除了以下描述，我建议您浏览 [http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/TableView/Introduction/Introduction.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/TableView/Introduction/Introduction.html)

在 OS X 版本 10.6 和更早版本中，表格视图中的每个单独的单元格都必须是 NSCell 的子类。这种方法在设计复杂的自定义单元时造成了限制，通常需要开发人员编写自己的 NSCell 子类。此外，提供动画（例如进度视图）非常困难。

在 OS X 10.7 版中，表格视图已经过重新设计，现在支持将视图用作单个单元格。这些被称为基于视图的表视图。基于视图的表格视图允许您在 Xcode 4.0 的 Interface Builder 部分中设计自定义单元格。它允许简单的设计时布局以及使更改动画和自定义绘图变得容易。与基于单元格的表视图一样，基于视图的表视图支持选择、列拖动和其他用户期望的表视图行为。唯一的区别是开发人员在设计和实现方面被赋予了更大的灵活性。

在 Interface Builder 中创建基于视图和基于单元格的表视图以及添加列使用相同的技术。在提供单个单元格、填充表格视图的内容和自定义表格视图外观时，应用程序代码中会出现差异。同样，两种实现之间的 Cocoa 绑定技术完全不同。

# connection-string - 如何强制 Entity Framework 5 DbContext 从 app.config 重新读取连接字符串？

> ID：15623732
> 
> 赞同：0
> 
> 时间：2013-03-25T20:04:54.433
> 
> 标签：connection-string, entity-framework-5

我试图允许用户在对话框中输入数据源，然后我将其写入应用程序的 app.config。我遇到问题的场景是这样的：

1）用户在我的对话框中输入数据源，对话框添加或更新连接字符串。在这种情况下，用户第一次输入了错误的数据源。

2）然后用户打开包含 EF 代码（初始化连接字符串的东西）的对话框，并且 EF 抛出无法连接的异常。

3) 用户回到原来的对话框，输入正确的数据源名称，app.config 再次更新。

4) 用户再次打开触发 EF 代码的对话框，EF 中仍然有旧数据源，尽管它现在在 app.config 中是正确的。

我已经尝试过 ConfigurationManager.RefreshSection("connectionStrings")。

我也尝试过运行 MyEFContainer.Database.Initialize() 。

两者似乎都不起作用。我需要做什么才能让 EF 在不强制用户关闭并重新打开应用程序的情况下刷新连接字符串数据？如果他们这样做，那么它会起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-21T07:06:53.547

目前，我认为强制 EF 重新加载 app.config 。在我们更改 app.config 之后

```
 ConfigurationManager.RefreshSection("xxx") 
```

不适用于 EF，因此您必须重新启动应用程序。

解决问题的最佳方法：app.config 中没有连接字符串。

[使用自动迁移和使用相同上下文的 2 个数据库。真正的运行时提供的连接。方法](https://stackoverflow.com/questions/15504465/entityframework-code-first-custom-connection-string-and-migrations/16133150#16133150)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:19:44.447

我总是使用内存中的连接字符串。将其保存在例如上下文工厂中。最初您从配置文件中读取它，但它可能会被新的替换。您将新的存储在 app.config 中（当它有效时）以供下一次运行应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T20:34:25.427

您是否在更正连接字符串后实例化 DbContext 类的新实例？重用最初失败的 DbContext 实例将是问题所在。

# ruby-on-rails - 如何在 Heroku 上为选定的一天安排工作？

> ID：15623734
> 
> 赞同：2
> 
> 时间：2013-03-25T20:04:57.523
> 
> 标签：ruby-on-rails, heroku, scheduled-tasks

我在 Heroku 上部署了一个带有 Heroku 调度程序插件的 Rails 应用程序，并点击以下链接：[Heroku Scheduler](https://devcenter.heroku.com/articles/scheduler#dynohour-costs)。我正在尝试做的是将以下内容设置为`index`在每个月的 18 日运行。我的`index`方法如下所示：

```
def index 
    @hospital_bookings = HospitalBooking.scoped
    hospital_booking = @hospital_bookings
    @user = current_user

    if params[:format] == "pdf"
      @hospital_bookings = @hospital_bookings.where(:day => Date.today.beginning_of_month..Date.today.end_of_month)
    end

    respond_to do |format|
      format.html
      format.pdf do
        render :pdf => "#{Date.today.strftime("%B")} Overtime Report",
               :header => {:html => {:template => 'layouts/pdf.html.erb'}}
        OvertimeMailer.overtime_pdf(@user, hospital_booking).deliver
      end
    end
  end 
```

因此，当 rake 任务在每个月的 18 日运行时，这将触发我的 OvertimeMailer 并向用户发送电子邮件。我目前在我的`scheduler.rake`

```
task :overtime_report => :environment do
  if Date.today.??? # Date.today.wday == 5
  HospitalBooking.index
  end
end 
```

我知道上面的 rake 任务是错误的。但我试图在这些方面取得一些成就

更新

```
class OvertimeMailer < ActionMailer::Base

  default :from => DEFAULT_FROM

 def overtime_pdf(user, hospital_booking)
  @hospital_bookings = hospital_booking
  @user = user
  mail(:subject => "Overtime", :to => user.email) do |format|
    format.text # renders overtime_pdf.text.erb for body of email
    format.pdf do
      attachments["hospital_bookings.pdf"] = WickedPdf.new.pdf_from_string(
        render_to_string(:pdf => "overtime",:template => 'hospital_bookings/index.pdf.erb', :layouts => "pdf.html")
      )
    end
  end
end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:14:37.667

像这样简单的东西；

```
task :overtime_report => :environment do
  if Date.today.day == 18
    HospitalBooking.index
  end
end 
```

然后每天运行你的调度程序。

但是你不想从你的 rake 任务中调用你的控制器索引方法。HospitalBooking 将是模型，而不是您期望的控制器。您最好的选择是将您的电子邮件/生成 PDF 作为模型中的可调用方法，然后从您的任务中调用它。

# python - 使用 XPath、etree 和 python 提取值

> ID：15623738
> 
> 赞同：0
> 
> 时间：2013-03-25T20:05:19.323
> 
> 标签：python, xpath, lxml, elementtree

我尝试使用 XPath、Python 和 etree 提取值。我对收到的 .xml 文件没有影响，我认为它似乎在某种程度上无效。

我的方法已经提取了我要检查的文本节点对象。

```
# This is the tag.
textTag = lastExportTree.xpath("//TEXT_NODE[@PROPERTY = '%s']/TEXT[@ID = '%s']" % (key, id[1]))

# This is a part of the xml. I already have the text node I want to examine.
<TEXT ID="1001" STATE="5" LOCKED="false"><SYSTEMMESSAGE>CALBUY</SYSTEMMESSAGE>Hiho</TEXT>
<TEXT ID="1002" STATE="1" LOCKED="false"/>
<TEXT ID="1003" STATE="5" LOCKED="false">Stack</TEXT>
<TEXT ID="1004" STATE="1" LOCKED="false">Overflow</TEXT> 
```

如果我想访问 ID="1003" 的内容，我只需要输入：

```
print(textTag.text); # Will print 'Stack' 
```

但是 ID="1001" 的标签还包括 SYSTEMMESSAGE 标签。如何访问内容“HiHo”？（textTag.text 不起作用！）这是我收到的无效 xml 吗？

非常感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:35:19.143

我以前也遇到过这个问题，这就是我们最终的结果。在我们的例子中，我们感兴趣的是在一个元素的所有非脚本和非样式子元素中查找文本。

```
# Just to pre-compile our XPath. This will get all the text from this element from
# each of the child elements that aren't 'script' or 'style'
textXpath = etree.XPath(
    '(.|.//*[not(name()="script")][not(name()="style")])/text()')

# If instead you don't want to include the current element:
# textXpath = etree.XPath(
#   './/*[not(name()="script")][not(name()="style")]/text()')

results = ''.join(textXpath(textTag)) 
```

它可能不是最漂亮的代码块，但它是我们所采用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:34:41.570

假设您正在向我们展示 lastExportTree 下的节点，应该这样做：

```
lastExportTree.xpath('TEXT[@STATE="5" and @LOCKED="false" and SYSTEMMESSAGE]/text()')[0] 
```

也就是说要查找所有名为 TEXT 且具有给定 STATE 和 LOCKED 属性以及 SYSTEMMESSAGE 子元素的子节点。

# javascript - AngularJs ngResource 用于具有不同端点的嵌套 api 资源

> ID：15623739
> 
> 赞同：9
> 
> 时间：2013-03-25T20:05:27.773
> 
> 标签：javascript, rest, angularjs, angular-resource

我有这个端点

```
/clients/:id
/bills/:id
/clients/:id/bills 
```

我正在尝试使用 angular-resource 创建一些资源来代表我的 API。

### 客户和账单资源

我为客户创建了一个资源，

```
.factory('Clients', function($resource){
   return $resource('/clients/:id')
})
.factory('Bills', function($resource){
   return $resource('/bills/:id')
}); 
```

那些工作得很好。

### 问题

我的问题是当我想定义一个资源来表示调用端点的客户端的账单时`/client/:id/bills`

我认为这应该是一个带有方法或类似方法的**Bills**`getFromClient()`资源，因为它会从客户端返回一个 Bills 数组。但我已经使用了 Bills 的名称。并且端点与已经定义的端点不同。

知道如何构造这个吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-06-07T12:31:41.273

我想我一直在寻找的是现在在 Anguar 1.1

```
.factory('Bills', function($resource){
  return $resource('/bills/:id',{}, {
    get: {
      method: 'GET',
      params:{
        clientId: '@clientId'
      }
    },
    'getFromClient': {
      method:'GET',
      params: {
        clientId: '@clientId'
      },
      url: host + "/clients/:clientId/bills",
      isArray: true
     }
   })
}); 
```

现在您可以在方法声明中添加一个 url 属性来覆盖主 url。

如果您想使用一个能够解决这个问题和许多其他问题的库，您可以尝试[https://github.com/platanus/angular-restmod](https://github.com/platanus/angular-restmod)

这是一个例子：

```
.factory('Client', function(restmod){
    return restmod.model('clients', {
        bills: { hasMany: 'Bill' }
    });
}

.factory('Bill', function(restmod){
    return restmod.model('bills');
}

.controller('myController', function(Client){
    $scope.client = Client.$find(1);
    $scope.client.bills.$search();
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T05:50:18.987

检查 ngResource 文档...向下滚动到第一个示例标题： [http ://docs.angularjs.org/api/ngResource.$resource](http://docs.angularjs.org/api/ngResource.%24resource)

这有点令人困惑，因为他们在示例中做得不对……哈哈

我相信它看起来像：

```
.factory('Clients', function($resource){
   return $resource('/clients/:id', {id:'@id'})
})
.factory('ClientBills', function($resource){
   return $resource('/clients/:clientId/bills/:id', {clientId:'@clientId', id:'@id'})
}); 
```

我没有测试过这个，但我认为这是正确的。=)

**更新**

然后您可以像这样访问它们：

```
.controller('MyCtrl', function ($scope, $routeParams, Clients, Bills) {
    $scope.client = Clients.get({id:$routeParams.clientId})
    $scope.bills = ClientBills.get({clientId:$routeParams.clientId})
}) 
```

我还将服务的名称更改为“ClientBills”，因为它更特定于任务，您可能想要一个不需要客户端 ID 的“Bills”服务......

# ios - 我何时可以重新验证 Apple 的自动续订订阅？

> ID：15623740
> 
> 赞同：1
> 
> 时间：2013-03-25T20:05:29.720
> 
> 标签：ios, app-store, subscriptions, auto-renewing

假设用户购买了一个月的自动续订订阅。我什么时候可以重新验证我将获得续订订阅的新收据的收据。从购买之日起我必须等待 31 天吗？还是30天就够了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-24T15:44:08.667

您可以随时随地进行验证。如果是在续订之后，您将在回复中收到新的收据。否则，您只会收到现有期间的收据。

# wcf - WCF - 通信对象不能用于通信

> ID：15623743
> 
> 赞同：0
> 
> 时间：2013-03-25T20:05:36.543
> 
> 标签：wcf

我是这个 WCF 的新手，我需要让涉及 WCF 的项目开始工作。因此，我通过使用 NetTcpBinding 硬编码 IP 地址来创建一个非常简单的 wcf 来测试水以简化配置，但我无法让它工作。请看一下，看看是否有什么让你兴奋的地方，如果你能指出我做错了什么，我将不胜感激。我有一个 WCFLib、WCFHost 和 WCFClient。如果一切都在同一台机器上，那就很好了，而且客户端和主机运行良好，结果是正确的。但是，如果主机在一台机器上，而客户端在同一子网中的另一台机器上，没有防火墙（客户端可以成功 ping 主机）并且我尝试运行客户端然后单击应用程序中的“=”按钮，我得到这个错误：

```
See the end of this message for details on invoking 
just-in-time (JIT) debugging instead of this dialog box.

************** Exception Text **************
System.ServiceModel.CommunicationObjectFaultedException: The communication object, System.ServiceModel.Channels.ServiceChannel, cannot be used for communication because it is in the Faulted state.

Server stack trace: 
   at System.ServiceModel.Channels.CommunicationObject.ThrowIfDisposedOrNotOpen()
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at WCFLib.ICalculator.Add(Int32 arg1, Int32 arg2)
   at WCFClient.CalculatorClient.bResult_Click(Object sender, EventArgs e) in c:\Frank\Testing\WCFClient\CalculatorClient.cs:line 37
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.18033 built by: FX45RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/mscorlib.dll
----------------------------------------
WCFClient
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file:///C:/xxx/WCFClient/bin/Debug/WCFClient.exe
----------------------------------------
System.Windows.Forms
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.18037 built by: FX45RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Windows.Forms/v4.0_4.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System.Drawing
    Assembly Version: 4.0.0.0 
```

以下是我的 WCFClient、WCFHost 和 WCFLib 代码： 当主机和客户端在同一台机器上时，代码编译并运行成功。仅当它们位于同一子网上的不同机器上时才会发生错误，其中一台机器可以 ping 另一台机器。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.ServiceModel;
using WCFLib;

namespace WCFHost
{
    class Program
    {
        static void Main(string[] args)
        {
            ServiceHost host = new ServiceHost(typeof(Calculator));
            host.AddServiceEndpoint(typeof(ICalculator), new NetTcpBinding(), "net.tcp://xxx.xxx.xxx.xxx:9000");
            host.Open();
            Console.ReadLine();
            host.Close();
        }
    }
}
--------------------------------------------------------------------
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;

namespace WCFLib
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the interface name "IService1" in both code and config file together.
    [ServiceContract(Namespace = "http://www.mywebsite.com/WCFLib")]
    public interface ICalculator
    {
        [OperationContract(Name="AddInt")]
        int Add(int arg1, int arg2);
        [OperationContract(Name = "AddDouble")]
        Double Add(Double arg1, Double arg2);

        [OperationContract]
        CompositeType GetDataUsingDataContract(CompositeType composite);

        // TODO: Add your service operations here
    }

    // Use a data contract as illustrated in the sample below to add composite types to service operations.
    // You can add XSD files into the project. After building the project, you can directly use the data types defined there, with the namespace "WCFLib.ContractType".
    [DataContract]
    public class CompositeType
    {
        bool boolValue = true;
        string stringValue = "Hello ";

        [DataMember]
        public bool BoolValue
        {
            get { return boolValue; }
            set { boolValue = value; }
        }

        [DataMember]
        public string StringValue
        {
            get { return stringValue; }
            set { stringValue = value; }
        }
    }
}
----------------------------------------------------------------
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;

namespace WCFLib
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "Service1" in both code and config file together.
    public class Calculator : ICalculator
    {
        public int Add(int arg1, int arg2)
        {
            return arg1+arg2;
        }
        public Double Add(Double arg1, Double arg2)
        {
            return arg1 + arg2;
        }

        public CompositeType GetDataUsingDataContract(CompositeType composite)
        {
            if (composite == null)
            {
                throw new ArgumentNullException("composite");
            }
            if (composite.BoolValue)
            {
                composite.StringValue += "Suffix";
            }
            return composite;
        }
    }
}
-------------------------------------------------------------------------
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.ServiceModel;
using WCFLib;

namespace WCFClient
{

    public partial class CalculatorClient : Form
    {
        public ICalculator proxy;
         public CalculatorClient()
        {
            InitializeComponent();
            ChannelFactory<ICalculator> ch;
            ch = new ChannelFactory<ICalculator>(new NetTcpBinding(), "net.tcp://xxx.xxx.xxx.xxx:9000");
            proxy = ch.CreateChannel();

        }

         private void bAdd_Click(object sender, EventArgs e)
         {

         }

         private void bResult_Click(object sender, EventArgs e)
         {
             tboxResult.Text=proxy.Add(12, 45).ToString();
         }

     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:30:56.717

尝试在托管和连接时添加 URL 路径：

例如：“net.tcp://xxx.xxx.xxx.xxx:9000/CalcService”

# javascript - 将 JSON 数组拆分为每行四个项目（同时保持一切可观察）

> ID：15623747
> 
> 赞同：0
> 
> 时间：2013-03-25T20:05:49.120
> 
> 标签：javascript, json, twitter-bootstrap, knockout.js

当我调用我的 GET api/home API 端点时，我得到了一个特定的数据结构 - 有两个数组：一个用于书籍，一个用于杂志。我想在每行四个项目的网格中显示项目，但我不知道该怎么做。我还需要保持这些项目（淘汰赛）可观察 - 在我的 viewModel 中，我有：

```
var mapping = {
        create: function(options) {
            //customize at the root level.  
            var innerModel = ko.mapping.fromJS(options.data);

            return innerModel;
        }
    };

    var homeViewModel = ko.mapping.fromJS(homeData, mapping);
    //debugger;
    return homeViewModel; 
```

在我看来，我有：

```
<div class="row-fluid">
        <!-- ko foreach: books -->
        <div class="span3">
        </div>
        <!-- /ko -->

        <!-- ko foreach: magazines -->
        <div class="span3">
        </div>
        <!-- /ko -->
</div> 
```

但是我需要为每一行设置一个“行流体”，其中包含四个项目，除非它是最后一行，它可能包含少于四个项目（书籍或杂志）。现在它只是一个包含所有内容的“行流体”，所以布局都搞砸了。

我在想我可以使用元素的 $id 来确定是否应该创建一个新的行流体（$id%4 == 0），但是如果我这样做，我不确定如何保持一切可观察，或者如何重构我的 viewModel。任何提示将不胜感激！

homeData 定义如下：

```
 var homeData = {
        "$id": "1",
        "totalBooks": 40,
        "totalMagazines": 20,
        "books": [
            {
                "$id": "2",
                "bookId": 1,
                "title": "Test Title"                
            },
            {
                "$id": "3",
                "bookId": 2,
                "title": "Test Title"                
            },
            {
                "$id": "4",
                "bookId": 3,
                "title": "Test Title"                
            },
            {
                "$id": "5",
                "bookId": 4,
                "title": "Test Title"                
            },
            {
                "$id": "6",
                "bookId": 5,
                "title": "Test Title"                
            },
            {
                "$id": "7",
                "bookId": 6,
                "title": "Test Title"                
            },
            {
                "$id": "8",
                "bookId": 7,
                "title": "Test Title"                
            },
            {
                "$id": "9",
                "bookId": 8,
                "title": "Test Title"                
            }
        ],
        "magazines": [
            {
                "$id": "9",
                "magazineId": 1,
                "title": "test magazine 0",
            },
            {
                "$id": "10",
                "magazineId": 2,
                "title": "test magazine 0",
            },
            {
                "$id": "11",
                "magazineId": 3,
                "title": "test magazine 0",
            },
            {
                "$id": "12",
                "magazineId": 4,
                "title": "test magazine 0",
            },
            {
                "$id": "13",
                "magazineId": 5,
                "title": "test magazine 0",
            }]}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:29:32.903

我为这个用例所做的是创建一个计算的 observable，它是一个数组数组，第一级是行，第二级是列。

```
var groupObsArray = function(itemsPerGroup,observableArray) {
    return ko.computed(function() {
        var obsArrData = observableArray();
        var groupedItems = [];
        var aGroup = [];
        for (var i=0;i<obsArrData.length;i++)
        { 
            aGroup.push(obsArrData[i])
            if(i%itemsPerGroup === 0) {
                groupedItems.push(aGroup);
                aGroup = [];
            }
        }
        return groupedItems;
    });
}
var mapping = {
    create: function(options) {
        //customize at the root level.  
        var innerModel = ko.mapping.fromJS(options.data);

        return innerModel;
    }
};

var homeViewModel = ko.mapping.fromJS(homeData, mapping);

homeViewModel.MagazineRows = groupObsArray(4,homeViewModel.magazines);
homeViewModel.BookRows = groupObsArray(4,homeViewModel.books); 
```

标记

```
<div class="readingMaterials magazines" data-bind="foreach:MagazineRows">
    <div class="row-fluid" data-bind="foreach:$data">
        <div class="span3" data-bind="text:title">
        </div>
    </div>
</div> 
```

# c# - 如何最小化日志记录的影响

> ID：15623749
> 
> 赞同：0
> 
> 时间：2013-03-25T20:05:54.620
> 
> 标签：c#, performance, logging

已经有一个关于这个[**问题**](https://stackoverflow.com/questions/2684961/minimize-performance-impact-of-event-logging)的问题，但它并没有告诉我我需要知道什么：假设我有一个 Web 应用程序，并且每次往返都有很多日志记录。我不想就*为什么*有这么多的日志记录，或者我怎样才能做更少的登录操作展开辩论。我想知道为了使这个日志记录问题变得高效和干净，我**有**什么**可能性**。

到目前为止，我已经实现了声明性（基于属性）和命令式日志记录，这似乎是一种很酷且干净的方式......现在，**我可以对性能做些什么**，假设我可以预期这些日志需要更多时间超出预期。**可以打开一个线程并将该工作留给它吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:27:07.267

我会考虑的事情：

*   使用有效的文件格式来最小化要写入的数据量（例如，XML 和文本格式易于阅读，但通常效率极低 - 相同的信息可以以二进制格式存储在更小的空间中）。但是不要花费大量 CPU 时间来尝试“优化”打包数据。只需选择一种紧凑但编写速度快的简单格式。

*   测试对日志的压缩使用。快速 SSD 可能不是这种情况，但在大多数 I/O 情况下，压缩数据的开销小于 I/O 开销，因此压缩会带来净收益（尽管这是一种折衷方案——提高 CPU 使用率以降低 I/O /O 用法）。

*   只记录有用的信息。无论您认为一切有多重要，您都可能会找到一些可以删减的内容。

*   消除重复数据。例如，您是否重复记录客户端的 IP 地址或域名？这些可以在一个会话中报告一次，然后不再重复吗？或者您可以将它们存储在地图文件中，并在需要引用它们时使用紧凑的索引值？ETC

*   测试在 RAM 中缓冲记录的数据是否有助于提高性能（例如，写入一千个 20 字节的日志记录将意味着 1,000 次函数调用，并可能导致大量磁盘查找和其他写入开销，而一次写入单个 20,000 字节块仅意味着一个函数调用，可以显着提高性能并最大限度地提高您从磁盘中获取的突发速率）。通常写入大小为（4k、16k、32、64k）的数据块效果很好，因为它倾向于适合磁盘和 I/O 架构（但请检查您的特定架构以了解哪些大小可能会提高效率的线索）。RAM 缓冲区的缺点是，如果停电，您将丢失更多数据。因此，您可能必须在性能与稳健性之间取得平衡。

*   （特别是如果您正在缓冲......）将信息转储到内存数据结构并将其传递给另一个线程以将其流式传输到磁盘。这将有助于阻止您的主线程被日志 I/O 阻塞。但请注意线程 - 例如，您可能必须考虑如何处理创建数据的速度快于短时间突发记录的时间 - 您是否需要实现队列等？

*   您是否正在记录多个流？可以将这些多路复用到单个日志中以可能减少磁盘查找和打开文件的数量吗？

*   是否有一种硬件解决方案可以物超所值？例如，您是否使用过 SSD 或 RAID 磁盘？将数据转储到不同的服务器会帮助还是阻碍？如果您可以花费 500 美元来简单地升级磁盘，那么花费 10,000 美元的开发人员时间来改进性能可能并不总是很有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T10:10:09.497

我使用下面的代码来记录。它是一个接受 Logging 并将每条消息放入并发队列的单例。每两秒钟它会将所有进入磁盘的内容写入磁盘。您的应用程序现在只会延迟将每条消息放入列表所需的时间。这是我自己的代码，请随意使用。

```
using System;
using System.Collections.Concurrent;
using System.Collections.Generic;
using System.Linq;
using System.Threading;
using System.Windows.Forms;

namespace FastLibrary
{
    public enum Severity : byte
    {
        Info = 0,
        Error = 1,
        Debug = 2
    }

    public class Log
    {
        private struct LogMsg
        {
            public DateTime ReportedOn;
            public string Message;
            public Severity Seriousness;
        }

        // Nice and Threadsafe Singleton Instance
        private static Log _instance;

        public static Log File
        {
            get { return _instance; }
        }

        static Log()
        {
            _instance = new Log();
            _instance.Message("Started");
            _instance.Start("");
        }

         ~Log()
        {
            Exit();
        }

        public static void Exit()
        {
            if (_instance != null)
            {
                _instance.Message("Stopped");
                _instance.Stop();
                _instance = null;
            }
        }

        private ConcurrentQueue<LogMsg> _queue = new ConcurrentQueue<LogMsg>();
        private Thread _thread;
        private string _logFileName;
        private volatile bool _isRunning;

        public void Message(string msg)
        {
            _queue.Enqueue(new LogMsg { ReportedOn = DateTime.Now, Message = msg, Seriousness = Severity.Info });
        }

        public void Message(DateTime time, string msg)
        {
            _queue.Enqueue(new LogMsg { ReportedOn = time, Message = msg, Seriousness = Severity.Info });
        }

        public void Message(Severity seriousness, string msg)
        {
            _queue.Enqueue(new LogMsg { ReportedOn = DateTime.Now, Message = msg, Seriousness = seriousness });
        }

        public void Message(DateTime time, Severity seriousness, string msg)
        {
            _queue.Enqueue(new LogMsg { ReportedOn = time, Message = msg, Seriousness = seriousness });
        }

        private void Start(string fileName = "", bool oneLogPerProcess = false)
        {
            _isRunning = true;
            // Unique FileName with date in it. And ProcessId so the same process running twice will log to different files
            string lp = oneLogPerProcess ? "_" + System.Diagnostics.Process.GetCurrentProcess().Id : "";
            _logFileName = fileName == ""
                               ? DateTime.Now.Year.ToString("0000") + DateTime.Now.Month.ToString("00") +
                                 DateTime.Now.Day.ToString("00") + lp + "_" +
                                 System.IO.Path.GetFileNameWithoutExtension(Application.ExecutablePath) + ".log"
                               : fileName;
            _thread = new Thread(LogProcessor);
            _thread.IsBackground = true;
            _thread.Start();
        }

        public void Flush()
        {
            EmptyQueue();
        }

        private void EmptyQueue()
        {
            while (_queue.Any())
            {
                var strList = new List<string>();
                //
                try
                {
                    // Block concurrent writing to file due to flush commands from other context
                    lock (_queue)
                    {
                        LogMsg l;
                        while (_queue.TryDequeue(out l)) strList.Add(l.ReportedOn.ToLongTimeString() + "|" + l.Seriousness + "|" + l.Message);
                        if (strList.Count > 0)
                        {
                            System.IO.File.AppendAllLines(_logFileName, strList);
                            strList.Clear();
                        }
                    }
                }
                catch
                {
                    //ignore errors on errorlogging ;-)
                }
            }
        }

        public void LogProcessor()
        {
            while (_isRunning)
            {
                EmptyQueue();
                // Sleep while running so we write in efficient blocks
                if (_isRunning) Thread.Sleep(2000);
                else break;
            }
        }

        private void Stop()
        {
            // This is never called in the singleton.
            // But we made it a background thread so all will be killed anyway
            _isRunning = false;
            if (_thread != null)
            {
                _thread.Join(5000);
                _thread.Abort();
                _thread = null;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-17T12:01:15.940

在调用 logger.debug 之前检查记录器是否已启用调试，这意味着您的代码在关闭调试时不必评估消息字符串。

```
if (_logger.IsDebugEnabled) _logger.Debug($"slow old string {this.foo} {this.bar}"); 
```

# javascript - 如何在嵌入我网页的全屏 youtube 视频上显示信息？

> ID：15623751
> 
> 赞同：0
> 
> 时间：2013-03-25T20:05:59.607
> 
> 标签：javascript, html, youtube-javascript-api

我正在开发一个 Web 应用程序，其中我的一个网页中嵌入了一个 youtube 视频播放器。我正在尝试在播放视频的顶部（全屏）呈现额外的信息。额外信息是指带有一些文本或图像的消息。嵌入式播放器的代码与此类似：

```
<div id="player" align="center"></div>

  <noscript>This feature requires Javascript, please turn it on</noscript>

  <script>
    // 2\. This code loads the IFrame Player API code asynchronously.
    var tag = document.createElement('script');

    var uid;
    var firstStatus = 1;
    var firstTimeStamp = 0;
    // Current state of the player
    var state = -1;

    tag.src = "//www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // 3\. This function creates an <iframe> (and YouTube player)
    //    after the API code downloads.
    var player;
    var show = getVarsFromUrl()['showId'];
    function onYouTubeIframeAPIReady() {
      player = new YT.Player('player', {
        height: '390',
        width: '640',
        videoId: show,//'a8u_a9q978M',//'u1zgFlCw8Aw',
        events: {
          'onReady': onPlayerReady,
          'onStateChange': onPlayerStateChange
        }
      });
    } 
```

我打算在播放视频的顶部展示额外的信息。我希望我足够清楚。谢谢！

额外代码：样式（CSS）：

```
<style>
  body {
    padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
    background-color: #222222;
    color: #C0C0C0;
  }
  img {
    position:relative;
    left:500px;
    top:500px;
    z-index:5;
  }
  iframe {
    position:absolute;
    left:500px;
    top:500px;
    z-index:-1;
  }
</style> 
```

和图像：

```
<img src="smiley.png" alt="Smiley face" height="42" width="42"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:12:54.650

添加`?wmode=opaque`到 url 的末尾以启用`z-index`. 然后`z-index`在您的 CSS 中使用相应地对样式进行分层。

# achartengine - 具有多个 Y 刻度和轴的 AChartEngine 时间图

> ID：15623752
> 
> 赞同：1
> 
> 时间：2013-03-25T20:06:00.060
> 
> 标签：achartengine

如何使用 AChartEngine 创建具有多个 Y 刻度和轴的时间图表？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:02:36.647

您将必须构建一个`CombinedXYChart`折线图并使用自定义标签而不是默认标签。

`TimeChart`中不支持`CombinedXYChart`。

**更新**：请参阅[此](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/MultipleTemperatureChart.java)示例，只需创建一个时间图而不是三次折线图。

# iphone - 相机叠加图片

> ID：15623754
> 
> 赞同：7
> 
> 时间：2013-03-25T20:06:11.063
> 
> 标签：iphone, ios, xcode, uiimagepickercontroller

**编辑 3**

好消息和坏消息。好消息是，在 Connections Inspector 中，通过断开覆盖 UIToolbar 并连接 UIImageview，我看到了`theKing`，但是 - 坏消息 - 我没有看到我也需要的 UIToolbar。所以现在的问题是，当他/她在这里完成后，用户如何才能回到调用的 VC？工具栏和图像如何成为覆盖的一部分，或者“返回按钮”工具栏可以在非覆盖视图上，还是什么？或者我怎样才能在 OverlayViewController 上同时显示工具栏和图像？

**编辑 3**

**编辑 2**

`setupImagePicker`在`OverlayViewController.m`.

```
- (void)setupImagePicker:(UIImagePickerControllerSourceType)sourceType
{
    self.imagePickerController.sourceType = sourceType;

    if (sourceType == UIImagePickerControllerSourceTypeCamera)
    {
        // user wants to use the camera interface
        //
        self.imagePickerController.showsCameraControls = NO;

        if ([[self.imagePickerController.cameraOverlayView subviews] count] == 0)
        {
            // setup our custom overlay view for the camera
            //
            // ensure that our custom view's frame fits within the parent frame
            CGRect overlayViewFrame = self.imagePickerController.cameraOverlayView.frame;
            CGRect newFrame = CGRectMake(0.0,
                                         CGRectGetHeight(overlayViewFrame) -
                                         self.view.frame.size.height - 10.0,
                                         CGRectGetWidth(overlayViewFrame),
                                         self.view.frame.size.height + 10.0);
            self.view.frame = newFrame;
            [self.imagePickerController.cameraOverlayView addSubview:self.view];
        }
    }
} 
```

**编辑 2**

**编辑 1**

[这是 PhotoPicker 示例代码链接](http://developer.apple.com/library/ios/samplecode/PhotoPicker/PhotoPicker.zip)。

**编辑 1**

**编辑 0**

有没有人在 iPhone 而不是 iPad 上试过这个？我没有 iPhone，但我今天正在阅读 Matt Neuburg 的书，他说 UIImagePicker 在这两种设备上的工作方式不同。

**编辑 0**

我在 UIImagePicker 中看不到我试图覆盖在相机视图中的图像。无论我如何添加 IBOutlet，作为属性，图像都不会显示，但覆盖的工具栏显示正常。为什么？

带有 IBOutlet 的 OverlayViewController.h`theKing`添加到 Apple 的示例代码中，然后暂时注释掉。

```
#import <UIKit/UIKit.h>
#import <AudioToolbox/AudioServices.h>

@protocol OverlayViewControllerDelegate;

@interface OverlayViewController : UIViewController <UINavigationControllerDelegate, UIImagePickerControllerDelegate>
{
    // IBOutlet UIImageView* theKing;   ******** temporarily commented out
    id <OverlayViewControllerDelegate> delegate;
}    

@property (nonatomic, assign) id <OverlayViewControllerDelegate> delegate;
@property (nonatomic, retain) UIImagePickerController *imagePickerController;

- (void)setupImagePicker:(UIImagePickerControllerSourceType)sourceType;

@end

@protocol OverlayViewControllerDelegate
- (void)didTakePicture:(UIImage *)picture;
- (void)didFinishWithCamera;
@end 
```

`property`在 Apple 的示例代码中添加了用于`theKing`IBOutlet 的OverlayViewController.m 。

```
#import "OverlayViewController.h"

enum
{
    kOneShot,       // user wants to take a delayed single shot
    kRepeatingShot  // user wants to take repeating shots
};

@interface OverlayViewController ( )

@property (assign) SystemSoundID tickSound;

@property (nonatomic, retain) IBOutlet UIImageView* theKing;  // added *********
@property (nonatomic, retain) IBOutlet UIBarButtonItem *takePictureButton;
@property (nonatomic, retain) IBOutlet UIBarButtonItem *startStopButton;
@property (nonatomic, retain) IBOutlet UIBarButtonItem *timedButton;
@property (nonatomic, retain) IBOutlet UIBarButtonItem *cancelButton;

@property (nonatomic, retain) NSTimer *tickTimer;
@property (nonatomic, retain) NSTimer *cameraTimer; 
```

`theKing`在 iPhone 上执行代码时看不到图像。下面是我添加的笔尖视图，显示了一些连接。没有抛出错误，但我看不到图像，只有 UIToolbar 已经添加。

![覆盖控制器的笔尖](../Images/0455cf13487ba89583ae2e4bbd64b28c.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T17:14:19.563

## 更新

我现在已经更新了它，并试图复制你在你的问题中所做的事情。我已经包含了 .h/.m 和 .h 的完整来源`theKing@2x.png`。创建一个新项目并将源代码粘贴到文件中并添加`theKing@2x.png`. 一切都以编程方式完成 - 除了将视图嵌入导航控制器之外，您无需在界面构建器中进行任何设置。

这是-http `theKing@2x.png`: [//i.imgur.com/0DrM7si.png](https://i.imgur.com/0DrM7si.png)

### 视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIImagePickerControllerDelegate, UINavigationControllerDelegate> 

@end 
```

### 视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    // assign action to button
    UIButton *myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    myButton.frame = CGRectMake(0, 0, 200, 60);
    myButton.center = self.view.center;
    [myButton addTarget:self action:@selector(buttonPress:) forControlEvents:UIControlEventTouchUpInside];
    [myButton setTitle:@"Image Picker" forState:UIControlStateNormal];

    [self.view addSubview:myButton];
}

- (void)buttonPress:(id)sender {
    if (![UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {

        // alert the user that the camera can't be accessed
        UIAlertView *noCameraAlert = [[UIAlertView alloc] initWithTitle:@"No Camera" message:@"Unable to access the camera!" delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil, nil];
        [noCameraAlert show];

    } else {

        // prepare imagePicker view
        UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
        imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
        imagePicker.delegate = self;
        imagePicker.allowsEditing = NO;
        imagePicker.showsCameraControls = NO;

        // create view for overlay
        CGRect overlayRect = CGRectMake(0, 0, imagePicker.view.frame.size.width, imagePicker.view.frame.size.height);
        UIView *overlayView = [[UIView alloc] initWithFrame:overlayRect];

        // prepare the image to overlay
        UIImageView *overlayImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"theKing"]];
        overlayImage.center = overlayView.center;
        overlayImage.alpha = 0.5;

        // prepare toolbar for overlay
        UIToolbar *overlayToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 600, overlayView.frame.size.width, 40)];
        overlayToolbar.center = CGPointMake(overlayView.center.x, overlayView.frame.size.height - 20);
        overlayToolbar.barStyle = UIBarStyleBlack;

        UIBarButtonItem *takePictureButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCamera target:self action:@selector(takePictureButtonPressed:)];
        UIBarButtonItem *flexibleBarSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
        flexibleBarSpace.width = 1000;
        UIBarButtonItem *startStopButton = [[UIBarButtonItem alloc] initWithTitle:@"Snap" style:UIBarButtonItemStyleBordered target:self action:@selector(startStopButtonPressed:)];
        UIBarButtonItem *timedButton = [[UIBarButtonItem alloc]initWithTitle:@"Timed" style:UIBarButtonItemStyleBordered target:self action: @selector(timedButtonPressed:)];
        UIBarButtonItem *cancelButton = [[UIBarButtonItem alloc]initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target:self action: @selector(cancelButtonPressed:)];

        overlayToolbar.items = [NSArray arrayWithObjects:takePictureButton, flexibleBarSpace, startStopButton, timedButton, cancelButton, nil];

        [overlayView addSubview:overlayImage];
        [overlayView addSubview:overlayToolbar];

        // add the image as the overlay
        [imagePicker setCameraOverlayView:overlayView];

        // display imagePicker
        [self.navigationController presentViewController:imagePicker animated:YES completion:nil];
    }
}

#pragma mark - UIBarButton Selectors

- (void)takePictureButtonPressed:(id)sender {
    NSLog(@"takePictureButtonPressed...");
    // TODO: take picture!
}

- (void)startStopButtonPressed:(id)sender {
    NSLog(@"startStopButtonPressed...");
    // TODO: make this do something
}

- (void)timedButtonPressed:(id)sender {
    NSLog(@"timedButtonPressed...");
    // TODO: implement timer before calling takePictureButtonPressed
}

- (void)cancelButtonPressed:(id)sender {
    NSLog(@"cancelButtonPressed");
    [self.navigationController dismissViewControllerAnimated:YES completion:nil];
}

#pragma mark - UIImagePickerController Delegate Methods

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)editingInfo {

    // determine if the user selected or took a new photo
    UIImage *selectedImage;
    if ([editingInfo objectForKey:UIImagePickerControllerOriginalImage]) selectedImage = (UIImage *)[editingInfo objectForKey:UIImagePickerControllerOriginalImage];
    else if ([editingInfo objectForKey:UIImagePickerControllerEditedImage]) selectedImage = (UIImage *)[editingInfo objectForKey:UIImagePickerControllerEditedImage];

    // TODO: Do something with selectedImage (put it in a UIImageView

    // dismiss the imagePicker
    [picker.presentingViewController dismissViewControllerAnimated:YES completion:nil];
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

### 截屏

这是我运行它时的样子。 ![截屏](../Images/2dc00bc7726155e1540b89e658e7355b.png)

这是否满足您的应用程序要求？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T16:58:29.620

我找到的一个答案是将图像放在一个巨大的按钮上，该按钮具有 action `Done:`。我必须想办法告诉我的用户这样做，但至少这会关闭图像视图并完成我的设置模式。我真的很想要一个更干净的选择，所以如果你有答案，请添加答案。感谢所有考虑过我问题的人。

# python - 辅助伪随机函数？

> ID：15623756
> 
> 赞同：0
> 
> 时间：2013-03-25T20:06:20.637
> 
> 标签：python, python-2.7

我目前正在做一个加密项目，我在我的程序中正确地实现了一个剖腹产功能，但我需要实现另一种加密方法。

*说明：我们将使用一个名为 Pseudo-random offset 的修改版本。我们不需要预先分发小册子，只需要一个密码，而且这些密码更短，不需要写下来。然后使用该密码来播种 python 随机数生成器，如上所述。您应该从 Caesarian 代码开始，但不要在函数开头创建一个偏移量，而是为每个字符创建一个新偏移量。*

以下是我的剖腹产代码。任何人都可以为代码中的一个字符提供一个示例，以便我可以了解正在发生的事情吗？我是 python 新手，还在学习。

```
def Caesarian(fin, fout, encrypt_or_decrypt_choice, alphabet):
    # Determine the offset by generating a random number in the correct range.
    # This will be the same random number, if the password sent to random.seed is the same.
    offset = random.randrange(1,len(alphabet))
    if encrypt_or_decrypt_choice=='d':
        offset = -offset
    print "Using the secret offset of", offset

    # Read every line of the input file.
    for line1 in fin:
        # Alter each character of the line1, putting the result into line2.
        line2 = ""
        for c in line1:
            if c in alphabet:
                pos1 = alphabet.find(c)
                pos2 = (pos1+offset)%len(alphabet)
                line2 += alphabet[pos2]
        # Write each resulting line2 to the output file.
        fout.write(line2) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:22:51.167

在停止密码中，您将每个字符移动一个恒定的固定量。

[Vigenère 密码](https://en.wikipedia.org/wiki/Vigenere_cipher)是对它的改进，它通过将一个小组中的每个字母移动一个固定的数量。例如，一个密钥`123`可能意味着“移动一，然后移动二，然后移动三，然后重复”，因此消息“aaaaaa”将被加密为“bcdbcd”。

Vigenère 密码与 Ceaser 密码有共同的弱点 - 可以计算最常见字母模式的统计数据，并使用它们来优化对密钥的暴力搜索。

您正在构建的内容稍微复杂一些 - 一个简单的流密码。这里的目标是以不同的数量加密每个字符 - 所以它*几乎*是一次性的，但没有传输非常大的密钥的开销。

现在看一下 Python 的`random`模块：

```
>>> import random
>>> random.choice(range(100))
42
>>> random.choice(range(100))
46
>>> random.choice(range(100))
92 
```

如您所见，每个值都是不同的。如果我们要重新运行 Python，我们会得到一系列不同的数字。如果这些数字真的是随机的，那么它们对于这种加密方法将毫无用处，因为接收者将无法重新创建相同的流。

播种伪随机数生成器允许我们修复初始状态，以便结果是可预测的：

```
>>> random.seed(5)
>>> random.choice(range(100))
62
>>> random.choice(range(100))
74 
```

现在，如果我重新播种，我们将得到相同的确切数字：

```
>>> random.seed(5)
>>> random.choice(range(100))
62
>>> random.choice(range(100))
74 
```

要迁移原始代码，您需要将初始计算更改`offset`为设置种子，然后更新每个字符的偏移量。

（这是我更新粘贴代码的尝试）：

```
def streamCipher(fin, fout, encrypt_or_decrypt_choice, alphabet, seed):
    # Seed random with the shared secret
    random.seed(seed)

    # Read every line of the input file.
    for line1 in fin:
        # Alter each character of the line1, putting the result into line2.
        line2 = ""
        for c in line1:
            if c in alphabet:
                # Determine the offset by generating a random number in the correct range.
                # This will return the same sequence of random numbers, if the seed is the same.
                offset = random.randrange(1,len(alphabet))
                if encrypt_or_decrypt_choice=='d':
                    offset = -offset
                pos1 = alphabet.find(c)
                pos2 = (pos1+offset)%len(alphabet)
                line2 += alphabet[pos2]
        # Write each resulting line2 to the output file.
        fout.write(line2) 
```

# ms-access - ACCESS (2010) 使用嵌套 SELECT 插入（查询输入必须包含至少一个表或查询）

> ID：15623758
> 
> 赞同：0
> 
> 时间：2013-03-25T20:06:30.350
> 
> 标签：ms-access

我不熟悉 SQL 或 Access。

我正在使用 Access (2010) 版本的 SQL 编写 INSERT INTO 查询。

我收到以下错误（*查询输入必须包含至少一个表或查询*）

这是我的代码

```
 INSERT INTO TABLE ( AsOf, Portfolio, [String A], [Number A] ) VALUES 
    (#DATE#, 
           (SELECT P.Portfolio FROM tb_data_Portfolio P  
                 WHERE IIF  ( EXISTS 
                    (SELECT Portfolio FROM tb_data_Portfolio p2 WHERE p2.Portfolio = 'Some String'), 
                    (P.Portfolio = 'Some String'), 
                    (P.Id = (SELECT px.Portfolio_Id FROM tb_sys_Portfolio_xRef px WHERE px.ext_Portfolio = 'Some String'))
             )
)    
,'String a', 'Number a'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:24:04.403

Your query should start like this (you can't mix values and SELECT in an INSERT)

```
INSERT INTO TABLE ( AsOf, Portfolio, [String A], [Number A] ) 
  SELECT DATE, P.Portfolio FROM tb_data_Portfolio P  
    WHERE ...; 
```

I don't understand what you're trying to do in the WHERE clause, but I don't think you can use a subquery inside IIF(). Please explain your objectives and I'll edit my answer.

# c# - 什么时候发生错误迁移（实体框架）

> ID：15623760
> 
> 赞同：2
> 
> 时间：2013-03-25T20:06:34.733
> 
> 标签：c#, entity-framework

我收到此错误：

```
The model backing the 'database' context has changed since the database was created. Consider using Code First Migrations to update the database (http://go.microsoft.com/fwlink/?LinkId=238269). 
```

**但**问题是我的实体与数据库中的相同：相同的最大长度，如果为空，相同的数据类型。

当我更新我的模型时会发生错误，因为数据库和模型的属性不同。但我的问题是。还有其他可能发生此错误的情况吗？它说错误在此代码中：

```
int UserId = (from d in db.Tbl_Users
                         where d.dbUserID == userName && d.dbPassWord == pass
                         select d.dbUser).SingleOrDefault(); 
```

一切正常，表属性完全相同（数据库和模型），但是当我运行应用程序时，错误触发。所以，请重复这个问题，**错误迁移何时发生？是否还有其他导致错误触发的场景？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:17:08.093

这必须是您第一次使用 DbContext 类（即连接到数据库），因此这是构建内部数据模型并与数据库模式进行比较的时候。

编辑：如果您不使用迁移并且想快速查看它是否解决了问题，您可以删除 dbo.__MigrationHistory 的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:50:40.913

它在那里给您错误，因为这是您第一次在应用程序中使用 DbContext 来调用数据库。每当您第一次在应用程序中请求数据库记录时，Entity Framework 将自动检查 DbContext 生成的模型是否与数据库中已经找到的模型相同。不是数据库表本身，而是存储在数据库中的*模型。*当它注意到它们不同时，它会自动抛出该异常。

为了避免这种情况，您需要设置某种初始化程序来告诉实体框架如果模型不匹配该怎么办。如果您正在使用迁移，它可能看起来像这样（在您第一次调用上下文之前执行此操作）：

```
Database.SetInitializer(new MigrateDatabaseToLatestVersion<MyDbContext, Configuration>()); 
```

还有其他初始化程序可以使用，例如 DropCreateDatabaseAlways 和 DropCreateDatabaseIfModelChanges，但我更喜欢迁移的初始化程序。

# javascript - 从 iphone 布局中删除红色边框颜色

> ID：15623762
> 
> 赞同：-2
> 
> 时间：2013-03-25T20:06:39.647
> 
> 标签：javascript, jquery, css, html

当您缩小浏览器窗口时，您会看到红色边框颜色。我正在尝试删除 div 周围的红色边框。我尝试删除边框颜色，但它不去....如何解决它提供我的代码如下...

[http://jsfiddle.net/CAARt/embedded/result/](http://jsfiddle.net/CAARt/embedded/result/)

```
@media (max-width: 767px)
#gallery {
display: inherit !important;
border: 1px solid red;
width: 417px;
}

<div id="gallery">
            <div class="pagination-centered" style="font-size: 16px; font-weight: bold;">Main Menu</div>

            <div id="slider" style="overflow: hidden; padding-top: 0px; padding-bottom: 0px;">
                <ul style="list-style: none; margin: 0px; width: 1440px; -webkit-transition: 300ms; "> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:16:39.293

删除以下内容，在萤火虫中尝试过并且有效

```
border: 1px solid red; 
```

# sql - 给定 M 个模型得到 N 个相关模型

> ID：15623765
> 
> 赞同：1
> 
> 时间：2013-03-25T20:07:02.377
> 
> 标签：sql, django, django-orm

给定两个模型：

```
class Post(models.Model):
   ...

class Comment(models.Model):
   post = models.ForeignKey(Post)
   ... 
```

有没有一种好方法可以获取一组帖子的最后 3 条评论（即在一次往返数据库中而不是每个帖子一次）？一个天真的实现来说明我的意思：

```
for post in Post.objects.filter(id__in=some_post_ids):
  post.latest_comments = list(Comment.objects.filter(post=post).order_by('-id')[:3]) 
```

给定`some_post_ids == [1, 2]`，以上将导致3个查询：

```
[{'sql': 'SELECT "myapp_post"."id" FROM "myapp_post" WHERE "myapp_post"."id" IN (1, 2)', 'time': '0.001'},

{'sql': 'SELECT "myapp_comment"."id", "myapp_comment"."post_id" FROM "myapp_comment" WHERE "myapp_comment"."post_id" = 1  LIMIT 3', 'time': '0.001'},

{'sql': 'SELECT "myapp_comment"."id", "myapp_comment"."post_id" FROM "myapp_comment" WHERE "myapp_comment"."post_id" = 2  LIMIT 3', 'time': '0.001'}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:10:47.100

来自[Django 的文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/)：

> 切片。如限制查询集中所述，可以使用 Python 的数组切片语法对查询集进行切片。对未计算的 QuerySet 进行切片通常会返回另一个未计算的 QuerySet，但如果您使用切片语法的“step”参数，Django 将执行数据库查询，并返回一个列表。对已评估（部分或全部）的 QuerySet 进行切片也会返回一个列表。

您的幼稚实现是正确的，应该只进行一次数据库查询。但是，不要调用`list`它，我相信这会导致数据库立即被击中（尽管它应该仍然只是一个查询）。查询集已经是可迭代的，真的不需要调用`list`. `list`有关从同一文档页面调用的更多信息：

> 列表（）。通过在其上调用 list() 来强制评估 QuerySet。例如： `entry_list = list(Entry.objects.all())` 但是请注意，这可能会产生很大的内存开销，因为 Django 会将列表的每个元素加载到内存中。相反，迭代 QuerySet 将利用您的数据库来加载数据并仅在需要时实例化对象。

**更新**：

通过您添加的解释，我相信以下内容应该有效（但是，它未经测试，因此请报告！）：

```
post.latest_comments = Comment.objects.filter(post__in=some_post_ids).order_by('-id') 
```

诚然，它没有限制每篇文章 3 条评论，我确信这是可能的，但我想不出我脑海中的语法。另外，请记住，您始终可以对任何模型进行手动查询以获得更好的优化，因此您可以运行`Comment.query("Select ...;")`

鉴于[此处](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)有关“从组中选择前 N 个”问题的信息，如果您的`IN`子句将是少量帖子，那么 a) 执行多个查询或 b) 选择帖子的所有评论可能会更便宜然后在 Python 中过滤。我建议使用 a 如果它是有很多评论的少量帖子，如果每个帖子的评论相对较少，我建议使用 b。

# multithreading - MATLAB 上的进程间通信

> ID：15623766
> 
> 赞同：2
> 
> 时间：2013-03-25T20:07:07.307
> 
> 标签：multithreading, matlab, inter-process-communicat

我想创建一个 MATLAB 程序来模拟某些代理的行为。这些代理中的每一个都能够相互通信并决定下一个状态。我可以实现的程序是我熟悉的传统语言，如 java、python 或 C++，并使用线程来模拟每个代理。

现在我想尝试在 MATLAB 上实现以利用 MATLAB 绘图函数及其数学工具。是否有可能在 MATLAB 中创建这样的模拟，或者更好的是直截了当？我知道并行工具箱，但我不确定 MATLAB 是否适合此类应用程序。我也可以使模拟不并行，但这并不有趣。这是作业的一部分，我想知道在 MATLAB 上开始这样的模拟以更加熟悉它是否是个好主意。如果它不是直截了当的，我可以轻松切换到 python。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:38:35.833

这是我要做的：

1.  在 matlab 中编写一个代理类，其中包含您需要的参数、设置和获取的方法（或编写 subsref-methods）以及“决策”的方法
2.  用类的实例填充数组
3.  要么创建一个包含实例索引的数组，然后是其前辈，即如果代理 4 跟随代理 1、2 和 3，代理 5 跟随代理 1、2 和 4，则向量将如下所示： [4 1 2 3 5 1 2 4] 等等。或者做一个父子矩阵。您还可以添加一个参数来存储实例中的前置任务。如果每个代理都相互连接，您甚至不需要此功能。
4.  现在您将按顺序运行。所有代理更新他们的输入，所有代理计算他们的响应并设置他们的输出。

如您所见，这不是并行的，而是顺序的。但是，我在这里看不到并行处理的优势。该工具箱没有任何帮助，因为它只允许“工人”，具体取决于您拥有多少核心。基本上，即使您使用并行处理工具箱，也不会有太多优势，因为它旨在并行化循环。例如，在遗传算法中，您可以独立计算每个池成员的成本函数，因此您可以使用工具箱。在一个循环执行依赖于前一个循环执行的计算的算法中，您不能使用该工具箱。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:48:03.520

如前所述，您在 matlab 中不能真正拥有多个进程。

但是对于代理，如果它们的类继承自句柄，则可以制作它们。然后你可以给他们一个接收消息的方法。

但请记住，它们不会并行运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:40:35.190

Matlab 按顺序解释代码。因此，为了解决您的问题，您将需要一个循环来迭代每个采样时间并以预定义的顺序评估所有代理的状态。

```
TimeMax  = 10;
TimeStep = 0.1;
time_counter = 0;
while time_counter<TimeMax  
  time_counter = time_counter + TimeStep; 
  % Update all the agents sequentially
end 
```

这不是很有效。因此，我建议您使用 Simulink，它更自然地支持并行计算。然后，您可以将结果导出到 Matlab 并绘制您想要的所有精美图。

# php - 如果我重复输入，如何禁用写入数据库，并在警报框中显示警告？

> ID：15623768
> 
> 赞同：0
> 
> 时间：2013-03-25T20:07:15.203
> 
> 标签：php, javascript

我对php有点新，所以我需要帮助。在一个页面上，我有一个带有名字和姓氏字段的小表格。在提交时，我将其发送到外部 .php 脚本，我想在其中检查数据库中是否已经存在同名的人。如果数据库中已经有输入姓名的人，我想取消写入数据库，并返回html页面。我已经这样做了，但是我想显示 JS 消息框“具有此名称的人已经存在于 db 中！”，并且如果取消了对基础的写入，我希望我的输入字段显示最后写入的值。我读了很多文学作品，我迷路了。无论如何感谢您的帮助:)

这是我的表格：

```
<form name="form" action="write.php" method="post" onSubmit="return Validate()">
Firstname: <input type="text" name="firstname">
Lastname: <input type="text" name="lastname">
<input type="submit">
</form> 
```

我的PHP代码：

```
<?php
$con=mysqli_connect("localhost","root","","phptest");
// Check connection
if (mysqli_connect_errno())
{
echo "Failed to connect to MySQL: " . mysqli_connect_error();
}
if (isset($_POST['firstname'])) { 
$firstname = $_POST['firstname'];
}
if (isset($_POST['lastname'])) { 
$lastname = $_POST['lastname'];
}
$duplicate=mysqli_query($con,"SELECT * FROM persons WHERE FirstName='$firstname'");
if(mysqli_num_rows($duplicate)>0)
{
die('Name already exists' );//I want that this message shows in html file, as alert
}
else{
$sql="INSERT INTO Persons (FirstName, LastName)
VALUES('$firstname','$lastname')";
$result=mysqli_query($con,$sql);
if (!$result)
{
die('Error: ' . mysqli_error());
}
}
header( 'Location://localhost/ivanda.php' ) ;
mysqli_close($con);

?> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-25T20:10:34.047

这一行：

```
if(mysqli_num_rows($duplicate)>0)
{
die('Name already exists' );//I want that this message shows in html file, as alert
} 
```

将其更改为此代码：

```
if(mysqli_num_rows($duplicate)>0)
{
echo "<script>alert('Name already exist!!!'); </script>";
echo "<script>window.location.assign('ivanda.php'); </script>"; //add this line instead of header

} 
```

-------------------------已编辑------------------------ ----------

试试这个：

```
 $duplicate=mysqli_query($con,"SELECT * FROM Persons WHERE FirstName='$firstname' limit 1");
    if(mysqli_num_rows($duplicate)>0)
    {

    $row = mysqli_fetch_assoc($duplicate);

    echo "<script>alert('Name already exist!!!'); </script>";
    echo "<script>window.location.assign('ivanda.php?firsName=".$row['FirstName']."&lastName=".$row['LastName']."'); </script>"; //add this line instead of header

    }
    else{
    $sql="INSERT INTO Persons (FirstName, LastName)
    VALUES('$firstname','$lastname')";
    $result=mysqli_query($con,$sql);
    if (!$result)
    {
    die('Error: ' . mysqli_error());
    }
    } 
```

有了这个，您将通过 GET 在 url 上发送 var ...然后在您的表单中，您应该有如下内容：

```
<form name="form" action="write.php" method="post" onSubmit="return Validate()">
Firstname: <input type="text" name="firstname" value="<?php if(isset($_GET['firsName'])){echo $_GET['firsName'];} ?>">
Lastname: <input type="text" name="lastname" value="<?php if(isset($_GET['lastName'])) {echo $_GET['lastName'];} ?>">
<input type="submit">
</form> 
```

PS：去 mysqli o PDO，记住它...mysql 扩展很快就会被弃用

萨卢多斯。

# javascript - 通过 JavaScript 订阅 YouTube 频道

> ID：15623769
> 
> 赞同：0
> 
> 时间：2013-03-25T20:07:15.983
> 
> 标签：javascript, xml, youtube-api

所以我真的很沮丧，因为我试图将它发布到 YouTube api。但是，当我使用 Ajax 时，我得到了语法意外 t 变量错误。

这是代码：

```
$.ajax({
url:"gdata.youtube.com/feeds/api/users/default/subscriptions",
type:"POST",
data:"<?xml version='1.0' encoding='UTF-8'?>
<entry xmlns='http://www.w3.org/2005/Atom'          xmlns:yt='http://gdata.youtube.com/schemas/2007'>
<category scheme='http://gdata.youtube.com/schemas/2007/subscriptiontypes.cat'
term='channel'/>
<yt:username>GoogleDevelopers</yt:username>
</entry>",
Authorization: token,
GData-Version: '2',
X-GData-Key:     'key=MYDEVKEY',
contentType:"application/atom+xml",
dataType:"xml",
success: function(){
alert('subscribd');
}
}); 
```

通过一些研究，我发现代码的第一行导致了错误。有没有办法将该数据发布到 api。哦，文档 a 位于[https://developers.google.com/youtube/2.0/developers_guide_protocol_subscriptions#Adding_a_subscription](https://developers.google.com/youtube/2.0/developers_guide_protocol_subscriptions#Adding_a_subscription)。请问我可以就如何发布这些数据提供一些帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:51:18.973

我的建议是避免使用 YouTUbe GData API v2 执行此操作。虽然当然可以让它工作，但它依赖于在支持[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)的浏览器中运行的 JavaScript ，这排除了除了最新版本的 Internet Explorer 之外的所有内容。

如果您确实想使用 GData API v2 执行此操作，您可能会发现使用 JSON 正文而不是 XML 正文进行 POST 并包含`alt=json`在 POST URL 中更容易。[这里](https://code.google.com/p/youtube-direct-lite/source/browse/static/js/ytdl/utils.js?spec=svnd80933123179ecf600b74220b15f8bb42c606aa5&r=d80933123179ecf600b74220b15f8bb42c606aa5#342)有一个使用 JSON 主体针对 v2 发出 POST 请求的示例，以及其他浮动示例。

不过，我真正推荐的是使用 YouTube Data API v3，它有一个用于添加订阅的[subscriptions.insert()](https://developers.google.com/youtube/v3/docs/subscriptions/insert)方法。您可以使用一个很棒的 JavaScript[客户端库](https://code.google.com/p/google-api-javascript-client/)，它将为您处理 OAuth 2，并以适用于各种浏览器的方式发出 API 请求。

# objective-c - 当调试器摘要显示文本时，为什么这个 NSString 长度为零？

> ID：15623772
> 
> 赞同：0
> 
> 时间：2013-03-25T20:07:21.890
> 
> 标签：objective-c, c, xcode, nsstring

非零、非空 NSStrings 返回零长度的奇怪之处。这是我设置字符串的方式。

```
// property is declared like so in .h
@property (strong, nonatomic) NSString *myStringValue;

// synthesized like so in .m
@synthesize myStringValue;

// most times property is set directly like so (.m)<br />
// ...
self.myStringValue = @"Some Value";
// ...

// property is (sometimes) set like so (.m)<br />
// copied from another vc
// ...
self.myStringValue = anotherObj.myStringValue;
// ... 
```

**零长度**
当通过从另一个对象（*后一种情况*）分配属性来设置属性并稍后在代码中的某个点使用时，`[self.myStringValue length]`即使鼠标悬停使用调试器将摘要文本正确显示为“某些值”，也会返回 0。

**NSString 优化？**
[这篇博客](http://www.cocoanetics.com/2012/03/beware-of-nsstring-optimizations/)讨论了当内存中存在多个包含相同字符串的 NSString 对象时可能发生的 NSString 优化。我想知道这是否与它有关。由于 NSString 是作为类集群实现的，并且 NSString 对象可以在后台转换为任意数量的相关私有类（*__NSCFString，__NSCFStringConstant*）以进行优化，如果其中任何一个，也许这就是导致我的问题的原因对于长度消息，类碰巧返回零......

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:18:31.537

你为什么不尝试使用

```
 @property (copy, nonatomic) NSString *myStringValue; 
```

# javascript - 如果不是标签的一部分，如何替换字符串？

> ID：15623773
> 
> 赞同：0
> 
> 时间：2013-03-25T20:07:22.877
> 
> 标签：javascript, regex, replace

在有人在我的网站上搜索某些内容后，我会在结果列表中突出显示搜索的词。

例如，如果您搜索“Lorem”，您将获得标题为“Lorem ipsum dolor sit amet”的文章作为结果之一，其中“Lorem”将突出显示，因为这是您搜索的词，而其他词将使用正常字体。

我的功能目前是这样的：

```
function highlightSearchedTerm(term) {
      var regex = new RegExp('('+term+')', 'gi');
      $('.markable').each(function(){
         var content = $(this).html();
         var replaced = content.replace(regex, "<span class=\"highlight\">$1</span>");
         $(this).html(replaced);
      });
   } 
```

问题是在文章的文本中可能有一些 HTML 代码，如链接、图像等，所以如果有人搜索“click”，那么链接的 onclick 属性将被替换，我会在链接中得到一个 span。

喜欢

```
<a href="http://www.example.com" onclick="window.open(this.href);return false;">link</a> 
```

会被替换，我会得到

```
<a href="http://www.example.com" on<span class="highlight">click</span>="window.open(this.href);return false;">link</a> 
```

这很糟糕。

我该如何避免呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T20:08:40.287

而不是使用`.html()`，[迭代（并替换文本）文本节点。](https://stackoverflow.com/q/15415231/139010)

# r - 如何在ggplot中手动分配超过14种颜色？

> ID：15623775
> 
> 赞同：0
> 
> 时间：2013-03-25T20:07:27.107
> 
> 标签：r, colors, ggplot2

我正在尝试绘制显示在两种情况下由颜色指示的值变化的图表。我在论坛上看了几个帖子，但无法完全弄清楚。到目前为止我尝试过的一些方法

```
ggplot(regime_shift_part1, aes(x = TStep, y = KgBiomass, **colour=factor(Ecoregion)**)) + 
 geom_point(size=2.2)+
 scale_x_discrete(name="Time Step", breaks=(0:6)*50, labels=c("2000", "2050", "2100", "2150", "2200", "2250", "2300"))+
 labs(title="Maximum Biomass Producing Region") + 
 theme(text = element_text(size=12),axis.text.x = element_text(vjust=1))+
 scale_y_continuous(name=expression(paste("Maximum Biomass (Kg m"^"-2",")")))+
 geom_line(data=regime_shift_part1, aes(x=TStep, y=KgBiomass, lty=factor(Scenario)))+
 facet_wrap(~Species) 
```

这段代码完成了我想要的部分工作，但是当它从一组更改为另一组时，线路会断开连接。例如，在“abiebals”中看到蓝色和绿色之间的差距，在“Acerrubr”中看到绿色和橙色之间的差距等等。

“对不起，我不能发布图片，所以你可能必须使用代码来显示”

我需要线条流畅。所以，我尝试了另一种方法。我在代码中所做的唯一编辑以粗体突出显示。编辑后的代码现在如下所示：

```
ggplot(regime_shift_part1, aes(x = TStep, y = KgBiomass)) + 
 **geom_point(aes(color = factor(Ecoregion)**), size=2.2)+
 scale_x_discrete(name="Time Step", breaks=(0:6)*50, labels=c("2000", "2050", "2100", "2150", "2200", "2250", "2300"))+
 labs(title="Maximum Biomass Producing Region") + 
 theme(text = element_text(size=12),axis.text.x = element_text(vjust=1))+
 scale_y_continuous(name=expression(paste("Maximum Biomass (Kg m"^"-2",")")))+
 geom_line(data=regime_shift_part1, aes(x=TStep, y=KgBiomass, lty=factor(Scenario)))+
 facet_wrap(~Species) 
```

“请使用代码查看图像。我无法发布它”

此代码使线条连续，但线条颜色现在为黑色。如果您能提出用不同颜色使线条连续的方法，我将不胜感激。另外，我想手动为不同的生态区分配颜色。很难区分生态区 6-7、8-9、13-14。我尝试了几种方法，但都没有奏效。

我的数据是：

```
dput(regime_shift_part1)
structure(list(Ecoregion = c(9L, 9L, 13L, 13L, 9L, 13L, 9L, 9L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 
11L, 11L, 11L, 11L, 11L, 11L, 7L, 11L, 7L, 12L, 12L, 12L, 12L, 
12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 9L, 
9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 13L, 
13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 
8L, 8L, 14L, 14L, 14L, 14L, 14L, 14L, 14L, 14L, 14L, 14L, 14L, 
14L, 14L, 14L, 14L, 14L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 
12L, 12L, 12L, 12L, 12L, 12L, 12L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 8L, 8L, 8L, 14L, 14L, 14L, 14L, 
14L, 14L, 14L, 14L, 14L, 14L, 14L, 14L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 12L, 12L, 12L, 12L, 12L, 
12L, 5L, 5L, 5L, 8L, 8L, 8L, 8L, 14L, 14L, 14L, 14L, 8L, 8L, 
8L, 8L, 7L, 7L, 7L, 9L, 8L, 8L, 8L, 8L, 8L, 8L, 13L, 13L, 13L, 
13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 
13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 
13L, 13L, 6L, 6L, 6L, 6L, 6L, 6L, 14L, 14L, 14L, 14L, 14L, 14L, 
14L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 
11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 3L, 3L, 3L, 3L, 3L, 3L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 
9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 13L, 
13L, 13L, 13L, 13L, 2L, 2L, 1L, 14L, 14L, 14L, 14L, 14L, 14L, 
14L, 14L, 14L, 14L, 14L, 14L, 14L, 14L, 14L, 14L, 14L, 14L, 14L, 
14L, 14L, 14L, 14L, 14L, 14L, 14L, 14L, 14L, 14L, 14L, 14L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 8L, 8L, 
8L, 14L, 14L, 14L, 14L, 14L, 14L, 14L, 14L, 14L, 14L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
2L, 2L, 12L, 12L, 12L, 12L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 
9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L
), Species = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 
8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 
8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 9L, 
9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 
9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 7L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 
8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 
8L, 8L, 8L, 8L, 8L, 8L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 
9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 
9L, 9L, 9L, 9L, 9L), .Label = c("abiebals", "acerrubr", "acersacc", 
"betualle", "betupapy", "carycord", "fagugran", "fraxamer", "fraxnigr", 
"fraxpenn", "piceglau", "picemari", "pinubank", "pinuresi", "pinustro", 
"popubals", "popugran", "poputrem", "prunsero", "queralba", "querelli", 
"quermacr", "querrubr", "quervelu", "thujocci", "tiliamer", "tsugcana"
), class = "factor"), TStep = c(0L, 10L, 20L, 30L, 40L, 50L, 
60L, 70L, 80L, 90L, 100L, 110L, 120L, 130L, 140L, 150L, 160L, 
170L, 180L, 190L, 200L, 210L, 220L, 230L, 240L, 250L, 260L, 270L, 
280L, 290L, 300L, 0L, 10L, 20L, 30L, 40L, 50L, 60L, 70L, 80L, 
90L, 100L, 110L, 120L, 130L, 140L, 150L, 160L, 170L, 180L, 190L, 
200L, 210L, 220L, 230L, 240L, 250L, 260L, 270L, 280L, 290L, 300L, 
0L, 10L, 20L, 30L, 40L, 50L, 60L, 70L, 80L, 90L, 100L, 110L, 
120L, 130L, 140L, 150L, 160L, 170L, 180L, 190L, 200L, 210L, 220L, 
230L, 240L, 250L, 260L, 270L, 280L, 290L, 300L, 0L, 10L, 20L, 
30L, 40L, 50L, 60L, 70L, 80L, 90L, 100L, 110L, 120L, 130L, 140L, 
150L, 160L, 170L, 180L, 190L, 200L, 210L, 220L, 230L, 240L, 250L, 
260L, 270L, 280L, 290L, 300L, 0L, 10L, 20L, 30L, 40L, 50L, 60L, 
70L, 80L, 90L, 100L, 110L, 120L, 130L, 140L, 150L, 160L, 170L, 
180L, 190L, 200L, 210L, 220L, 230L, 240L, 250L, 260L, 270L, 280L, 
290L, 300L, 0L, 10L, 20L, 30L, 40L, 50L, 60L, 70L, 80L, 90L, 
100L, 110L, 120L, 130L, 140L, 150L, 160L, 170L, 180L, 190L, 200L, 
210L, 220L, 230L, 240L, 250L, 260L, 270L, 280L, 290L, 300L, 0L, 
10L, 20L, 30L, 40L, 50L, 60L, 70L, 80L, 90L, 100L, 110L, 120L, 
130L, 140L, 150L, 160L, 170L, 180L, 190L, 200L, 210L, 220L, 230L, 
240L, 250L, 260L, 270L, 280L, 290L, 300L, 0L, 10L, 20L, 30L, 
40L, 50L, 60L, 70L, 80L, 90L, 100L, 110L, 120L, 130L, 140L, 150L, 
160L, 170L, 180L, 190L, 200L, 210L, 220L, 230L, 240L, 250L, 260L, 
270L, 280L, 290L, 300L, 0L, 10L, 20L, 30L, 40L, 50L, 60L, 70L, 
80L, 90L, 100L, 110L, 120L, 130L, 140L, 150L, 160L, 170L, 180L, 
190L, 200L, 210L, 220L, 230L, 240L, 250L, 260L, 270L, 280L, 290L, 
300L, 0L, 10L, 20L, 30L, 40L, 50L, 60L, 70L, 80L, 90L, 100L, 
110L, 120L, 130L, 140L, 150L, 160L, 170L, 180L, 190L, 200L, 210L, 
220L, 230L, 240L, 250L, 260L, 270L, 280L, 290L, 300L, 0L, 10L, 
20L, 30L, 40L, 50L, 60L, 70L, 80L, 90L, 100L, 110L, 120L, 130L, 
140L, 150L, 160L, 170L, 180L, 190L, 200L, 210L, 220L, 230L, 240L, 
250L, 260L, 270L, 280L, 290L, 300L, 0L, 10L, 20L, 30L, 40L, 50L, 
60L, 70L, 80L, 90L, 100L, 110L, 120L, 130L, 140L, 150L, 160L, 
170L, 180L, 190L, 200L, 210L, 220L, 230L, 240L, 250L, 260L, 270L, 
280L, 290L, 300L, 0L, 10L, 20L, 30L, 40L, 50L, 60L, 70L, 80L, 
90L, 100L, 110L, 120L, 130L, 140L, 150L, 160L, 170L, 180L, 190L, 
200L, 210L, 220L, 230L, 240L, 250L, 260L, 270L, 280L, 290L, 300L, 
0L, 10L, 20L, 30L, 40L, 50L, 60L, 70L, 80L, 90L, 100L, 110L, 
120L, 130L, 140L, 150L, 160L, 170L, 180L, 190L, 200L, 210L, 220L, 
230L, 240L, 250L, 260L, 270L, 280L, 290L, 300L, 0L, 10L, 20L, 
30L, 40L, 50L, 60L, 70L, 80L, 90L, 100L, 110L, 120L, 130L, 140L, 
150L, 160L, 170L, 180L, 190L, 200L, 210L, 220L, 230L, 240L, 250L, 
260L, 270L, 280L, 290L, 300L, 0L, 10L, 20L, 30L, 40L, 50L, 60L, 
70L, 80L, 90L, 100L, 110L, 120L, 130L, 140L, 150L, 160L, 170L, 
180L, 190L, 200L, 210L, 220L, 230L, 240L, 250L, 260L, 270L, 280L, 
290L, 300L, 0L, 10L, 20L, 30L, 40L, 50L, 60L, 70L, 80L, 90L, 
100L, 110L, 120L, 130L, 140L, 150L, 160L, 170L, 180L, 190L, 200L, 
210L, 220L, 230L, 240L, 250L, 260L, 270L, 280L, 290L, 300L, 0L, 
10L, 20L, 30L, 40L, 50L, 60L, 70L, 80L, 90L, 100L, 110L, 120L, 
130L, 140L, 150L, 160L, 170L, 180L, 190L, 200L, 210L, 220L, 230L, 
240L, 250L, 260L, 270L, 280L, 290L, 300L), Spnum = c(1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 7L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 
8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 
8L, 8L, 8L, 8L, 8L, 8L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 
9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 
9L, 9L, 9L, 9L, 9L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 8L, 8L, 
8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 
8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 9L, 9L, 9L, 
9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 
9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L), Scenario = structure(c(1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c("BAU", 
"GFDL_A1fi"), class = "factor"), KgBiomass = c(1.5531, 1.7151, 
1.8749, 2.0402, 2.2104, 2.379, 2.6025, 2.8299, 3.1307, 3.5236, 
3.9801, 4.6243, 5.2637, 6.0671, 6.9228, 7.6249, 8.3212, 8.7372, 
9.0633, 9.3077, 9.3587, 9.3707, 9.3207, 9.211, 9.2828, 9.3028, 
9.3942, 9.2435, 9.1243, 9.2784, 9.2439, 5.0689, 5.0771, 5.09, 
4.9926, 4.8535, 4.8401, 4.717, 4.573, 4.2985, 3.9545, 3.5446, 
3.0536, 2.7713, 2.5378, 2.2779, 2.0237, 1.7753, 1.578, 1.4553, 
1.3934, 1.381, 1.3822, 1.392, 1.4187, 1.4356, 1.4571, 1.4912, 
1.4921, 1.4781, 1.3755, 1.31, 9.218, 9.4652, 9.4584, 9.5645, 
9.773, 9.9784, 9.8208, 9.8178, 10.1043, 10.293, 10.8209, 11.3321, 
11.7042, 12.2588, 12.9198, 13.288, 14.036, 14.9031, 15.725, 16.1998, 
16.6214, 16.9101, 17.1422, 17.2767, 17.4555, 17.6199, 17.5614, 
17.7563, 17.6413, 17.7908, 17.8249, 2.4078, 2.3768, 2.371, 2.3227, 
2.2606, 2.2555, 2.1939, 2.1402, 2.0406, 1.9384, 1.8373, 1.7111, 
1.5859, 1.4751, 1.4032, 1.327, 1.2602, 1.1885, 1.1452, 1.1336, 
1.1565, 1.2179, 1.3024, 1.3954, 1.4924, 1.572, 1.6506, 1.7287, 
1.8076, 1.871, 1.8792, 2.0129, 2.1072, 2.2432, 2.3797, 2.4395, 
2.4376, 2.4098, 2.3166, 2.1962, 2.0202, 1.8732, 1.6444, 1.4815, 
1.2857, 1.0847, 0.8942, 0.7205, 0.6031, 0.5231, 0.465, 0.421, 
0.3895, 0.3814, 0.3711, 0.3692, 0.3734, 0.3781, 0.3805, 0.3834, 
0.404, 0.4218, 0.3286, 0.3419, 0.3501, 0.3561, 0.3558, 0.3588, 
0.3652, 0.3694, 0.3716, 0.3731, 0.3698, 0.3575, 0.3416, 0.3129, 
0.2738, 0.2259, 0.1927, 0.1586, 0.1243, 0.1045, 0.0913, 0.0843, 
0.0813, 0.0844, 0.0879, 0.0905, 0.0929, 0.0946, 0.0947, 0.0931, 
0.0912, 0.045, 0.0493, 0.0556, 0.0618, 0.0699, 0.0797, 0.0905, 
0.1028, 0.1175, 0.1342, 0.1562, 0.1837, 0.2195, 0.2615, 0.3142, 
0.3705, 0.4169, 0.4557, 0.4927, 0.5289, 0.5647, 0.6016, 0.6313, 
0.663, 0.6813, 0.6988, 0.7338, 0.762, 0.7931, 0.8182, 0.8325, 
0.3546, 0.3558, 0.3642, 0.3728, 0.3708, 0.373, 0.3617, 0.3409, 
0.3146, 0.2955, 0.2765, 0.2705, 0.2696, 0.2707, 0.2667, 0.2695, 
0.2977, 0.3219, 0.3445, 0.366, 0.3838, 0.3962, 0.4006, 0.4019, 
0.3889, 0.3765, 0.3685, 0.3572, 0.3497, 0.3448, 0.336, 0.5913, 
0.6196, 0.6679, 0.6906, 0.6966, 0.6929, 0.6738, 0.6553, 0.6173, 
0.5868, 0.5531, 0.5175, 0.4779, 0.4365, 0.3909, 0.3385, 0.2914, 
0.2422, 0.1949, 0.1512, 0.1126, 0.096, 0.0886, 0.0818, 0.0722, 
0.0708, 0.0749, 0.0795, 0.084, 0.0884, 0.0916, 1.7225, 1.9116, 
2.0701, 2.2643, 2.3661, 2.4276, 2.4563, 2.4979, 2.5428, 2.5349, 
2.5297, 2.4619, 2.3602, 2.2084, 2.036, 1.8794, 1.6888, 1.4636, 
1.2234, 0.9425, 0.6853, 0.4694, 0.2897, 0.1764, 0.1071, 0.0755, 
0.059, 0.0482, 0.0426, 0.0388, 0.0361, 4.5689, 4.5308, 4.5132, 
4.5107, 4.5039, 4.4862, 4.5083, 4.5585, 4.5235, 4.3895, 4.2981, 
4.156, 3.9117, 3.7771, 3.671, 3.5786, 3.5541, 3.5463, 3.5859, 
3.556, 3.5479, 3.5365, 3.5967, 3.7016, 3.7099, 3.8148, 3.9268, 
4.0046, 4.0296, 3.9728, 3.9141, 7.0826, 7.1996, 7.3625, 7.529, 
7.6878, 7.9937, 8.1965, 8.6984, 9.3071, 9.9103, 10.936, 11.8715, 
12.9045, 13.5709, 14.6169, 15.4318, 16.0884, 16.6487, 16.9708, 
17.0343, 17.2035, 16.9599, 16.8804, 16.5998, 16.9403, 17.0379, 
16.551, 16.5844, 16.4058, 16.4294, 16.6504, 2.2918, 2.2735, 2.2641, 
2.275, 2.2696, 2.2673, 2.2362, 2.2028, 2.1566, 2.1272, 2.0136, 
1.9496, 1.8169, 1.7454, 1.5744, 1.3721, 1.1806, 1.0561, 0.9277, 
0.8247, 0.8209, 0.886, 0.9396, 0.9964, 1.0496, 1.0703, 1.1155, 
1.1545, 1.1761, 1.1896, 1.1758, 2.2673, 2.3979, 2.5272, 2.5888, 
2.6485, 2.5902, 2.5422, 2.4076, 2.1818, 1.9597, 1.68, 1.4059, 
1.1581, 0.8921, 0.6965, 0.5331, 0.3875, 0.2485, 0.1643, 0.1037, 
0.0613, 0.0316, 0.0166, 0.0085, 0.0054, 0.0031, 0.0015, 5e-04, 
2e-04, 1e-04, 0, 0.2281, 0.2319, 0.2431, 0.2573, 0.2708, 0.2835, 
0.2953, 0.3084, 0.3218, 0.3303, 0.3486, 0.3595, 0.3703, 0.3814, 
0.3905, 0.4093, 0.4247, 0.457, 0.5003, 0.5475, 0.6024, 0.6748, 
0.7713, 0.8899, 1.0086, 1.1211, 1.224, 1.3282, 1.4284, 1.5409, 
1.638, 0.053, 0.0587, 0.0682, 0.0823, 0.1014, 0.1373, 0.1856, 
0.2564, 0.3446, 0.4744, 0.6597, 0.9041, 1.2193, 1.6114, 2.0252, 
2.5264, 3.0744, 3.588, 4.1038, 4.5957, 5.0674, 5.5739, 6.0489, 
6.4466, 6.8976, 7.1861, 7.5265, 7.8668, 8.0832, 8.3965, 8.6394, 
0.4436, 0.4583, 0.478, 0.5078, 0.5288, 0.5403, 0.5301, 0.5092, 
0.4734, 0.4298, 0.3994, 0.3737, 0.3495, 0.3526, 0.4004, 0.477, 
0.5702, 0.6644, 0.7582, 0.8512, 0.9291, 1.0014, 1.0422, 1.0965, 
1.148, 1.1433, 1.157, 1.1468, 1.0928, 1.066, 1.0166, 0.7116, 
0.7522, 0.8112, 0.8562, 0.8681, 0.8774, 0.9048, 0.9367, 0.939, 
0.983, 0.9863, 0.9787, 0.966, 0.8786, 0.8127, 0.7215, 0.6064, 
0.4709, 0.3694, 0.2835, 0.2197, 0.1813, 0.1529, 0.1301, 0.1141, 
0.0956, 0.0818, 0.0735, 0.0608, 0.049, 0.0383)), .Names = c("Ecoregion", 
"Species", "TStep", "Spnum", "Scenario", "KgBiomass"), row.names = c(1L, 
2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L, 
16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 
29L, 30L, 31L, 32L, 33L, 34L, 35L, 36L, 37L, 38L, 39L, 40L, 41L, 
42L, 43L, 44L, 45L, 46L, 47L, 48L, 49L, 50L, 51L, 52L, 53L, 54L, 
55L, 56L, 57L, 58L, 59L, 60L, 61L, 62L, 63L, 64L, 65L, 66L, 67L, 
68L, 69L, 70L, 71L, 72L, 73L, 74L, 75L, 76L, 77L, 78L, 79L, 80L, 
81L, 82L, 83L, 84L, 85L, 86L, 87L, 88L, 89L, 90L, 91L, 92L, 93L, 
94L, 95L, 96L, 97L, 98L, 99L, 100L, 101L, 102L, 103L, 104L, 105L, 
106L, 107L, 108L, 109L, 110L, 111L, 112L, 113L, 114L, 115L, 116L, 
117L, 118L, 119L, 120L, 121L, 122L, 123L, 124L, 125L, 126L, 127L, 
128L, 129L, 130L, 131L, 132L, 133L, 134L, 135L, 136L, 137L, 138L, 
139L, 140L, 141L, 142L, 143L, 144L, 145L, 146L, 147L, 148L, 149L, 
150L, 151L, 152L, 153L, 154L, 155L, 156L, 157L, 158L, 159L, 160L, 
161L, 162L, 163L, 164L, 165L, 166L, 167L, 168L, 169L, 170L, 171L, 
172L, 173L, 174L, 175L, 176L, 177L, 178L, 179L, 180L, 181L, 182L, 
183L, 184L, 185L, 186L, 187L, 188L, 189L, 190L, 191L, 192L, 193L, 
194L, 195L, 196L, 197L, 198L, 199L, 200L, 201L, 202L, 203L, 204L, 
205L, 206L, 207L, 208L, 209L, 210L, 211L, 212L, 213L, 214L, 215L, 
216L, 217L, 218L, 219L, 220L, 221L, 222L, 223L, 224L, 225L, 226L, 
227L, 228L, 229L, 230L, 231L, 232L, 233L, 234L, 235L, 236L, 237L, 
238L, 239L, 240L, 241L, 242L, 243L, 244L, 245L, 246L, 247L, 248L, 
249L, 250L, 251L, 252L, 253L, 254L, 255L, 256L, 257L, 258L, 259L, 
260L, 261L, 262L, 263L, 264L, 265L, 266L, 267L, 268L, 269L, 270L, 
271L, 272L, 273L, 274L, 275L, 276L, 277L, 278L, 279L, 838L, 839L, 
840L, 841L, 842L, 843L, 844L, 845L, 846L, 847L, 848L, 849L, 850L, 
851L, 852L, 853L, 854L, 855L, 856L, 857L, 858L, 859L, 860L, 861L, 
862L, 863L, 864L, 865L, 866L, 867L, 868L, 869L, 870L, 871L, 872L, 
873L, 874L, 875L, 876L, 877L, 878L, 879L, 880L, 881L, 882L, 883L, 
884L, 885L, 886L, 887L, 888L, 889L, 890L, 891L, 892L, 893L, 894L, 
895L, 896L, 897L, 898L, 899L, 900L, 901L, 902L, 903L, 904L, 905L, 
906L, 907L, 908L, 909L, 910L, 911L, 912L, 913L, 914L, 915L, 916L, 
917L, 918L, 919L, 920L, 921L, 922L, 923L, 924L, 925L, 926L, 927L, 
928L, 929L, 930L, 931L, 932L, 933L, 934L, 935L, 936L, 937L, 938L, 
939L, 940L, 941L, 942L, 943L, 944L, 945L, 946L, 947L, 948L, 949L, 
950L, 951L, 952L, 953L, 954L, 955L, 956L, 957L, 958L, 959L, 960L, 
961L, 962L, 963L, 964L, 965L, 966L, 967L, 968L, 969L, 970L, 971L, 
972L, 973L, 974L, 975L, 976L, 977L, 978L, 979L, 980L, 981L, 982L, 
983L, 984L, 985L, 986L, 987L, 988L, 989L, 990L, 991L, 992L, 993L, 
994L, 995L, 996L, 997L, 998L, 999L, 1000L, 1001L, 1002L, 1003L, 
1004L, 1005L, 1006L, 1007L, 1008L, 1009L, 1010L, 1011L, 1012L, 
1013L, 1014L, 1015L, 1016L, 1017L, 1018L, 1019L, 1020L, 1021L, 
1022L, 1023L, 1024L, 1025L, 1026L, 1027L, 1028L, 1029L, 1030L, 
1031L, 1032L, 1033L, 1034L, 1035L, 1036L, 1037L, 1038L, 1039L, 
1040L, 1041L, 1042L, 1043L, 1044L, 1045L, 1046L, 1047L, 1048L, 
1049L, 1050L, 1051L, 1052L, 1053L, 1054L, 1055L, 1056L, 1057L, 
1058L, 1059L, 1060L, 1061L, 1062L, 1063L, 1064L, 1065L, 1066L, 
1067L, 1068L, 1069L, 1070L, 1071L, 1072L, 1073L, 1074L, 1075L, 
1076L, 1077L, 1078L, 1079L, 1080L, 1081L, 1082L, 1083L, 1084L, 
1085L, 1086L, 1087L, 1088L, 1089L, 1090L, 1091L, 1092L, 1093L, 
1094L, 1095L, 1096L, 1097L, 1098L, 1099L, 1100L, 1101L, 1102L, 
1103L, 1104L, 1105L, 1106L, 1107L, 1108L, 1109L, 1110L, 1111L, 
1112L, 1113L, 1114L, 1115L, 1116L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:15:15.250

您似乎想要从一种离散颜色连续转换到另一种颜色`geom_line()`，但这不会在 ggplot2 中发生。您将不得不忍受颜色之间的空间，因为调色板是离散的，并且您只能使用离散的调色板在同一行上获得不同的颜色。我能想到的弥合颜色之间差距的唯一方法是增加 TStep 的数量。由于您在其中一个场景中使用了虚线型，我不太明白为什么您“需要”有平滑的线条。

为了增加可用于 Ecoregion 的颜色数量，我使用了`rainbow()`基本图形中的定性调色板，但您也可以使用`colorspace`包来定义调色板，其中有多种选择。

选定的调色板：

```
# Function taken from example(colorspace::rainbow_hcl)
wheel <- function(col, radius = 1, ...)
   pie(rep(1, length(col)), col = col, radius = radius, ...)
wheel(rainbow(13)) 
```

这是我根据您提供的数据（13 个独特的生态区）得出的图形代码：

```
ggplot(regime_shift_part1, 
       aes(x = TStep, y = KgBiomass, colour=factor(Ecoregion))) + 
  # geom_point(size=2.2) +
   theme_bw() +
   scale_x_discrete(name="Time Step", breaks=(0:2)*100 + 50, 
                    labels=seq(2050, 2250, by = 100))+
   labs(title="Maximum Biomass Producing Region",
        colour = "Ecoregion", linetype = "Scenario") + 
   theme(text = element_text(size=12), axis.text.x = element_text(vjust=1)) +
   scale_y_continuous(name=expression(paste("Maximum Biomass (Kg m"^"-2",")"))) +
   geom_line(aes(linetype = factor(Scenario)), size = 1.5)+
   facet_wrap(~ Species) +
   scale_colour_manual(breaks = levels(factor(regime_shift_part1$Ecoregion)),
                       values = rainbow(13)) 
```

如果您尝试为 Ecoregion 创建连续的颜色渐变，您会收到来自以下的错误消息`geom_line()`：

```
Error: geom_path: If you are using dotted or dashed lines, colour, size and linetype must be constant over the line 
```

# java - parse.com 的 parse.initialize 错误

> ID：15623777
> 
> 赞同：0
> 
> 时间：2013-03-25T20:07:33.487
> 
> 标签：java, android, oncreate, parse-platform

这应该很容易解决。但我是一个新程序员。我在任何地方都找不到答案。我刚刚开始构建我的应用程序，（第二次。我的电脑被盗了，所以我以前的所有工作都丢失了。）我正在使用 Pasre.com。还没有写任何代码，只有`parse.initialize`. 我已经在这条线上遇到了错误

```
public void onCreate() {
          Parse.initialize(this, "xxxx", "xxxxx"); 
        } 
```

我的错误说明了这一点

`Multiple markers at this line - Syntax error on token(s), misplaced construct(s) - Syntax error on token "void", @ expected`

就像我说的，我正在重建一个我以前开始的应用程序，那时我没有这个问题。但这是 eclipse 的最新版本，我还没有用它编写任何东西。（希望一切都正确安装）我正在运行 Linux，不确定这是否重要。我是一个新程序员，所以如果需要解释，请彻底。谢谢各位看官。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:37:07.663

好的，这是一个简单的答案。我导入了 parse-1.2.2 javadoc。但这不是您需要做的全部。我想您应该下载他们的[空白项目](https://parse.com/apps/quickstart#android/blank)并导入它。以此为基础构建应用程序。

# java - 尝试在 Eclipse 中使用 opencms 模块插件时出现类加载器异常

> ID：15623780
> 
> 赞同：1
> 
> 时间：2013-03-25T20:07:52.450
> 
> 标签：java, eclipse, plugins, classloader, opencms

我正在尝试将 opencms 模块插件 v 0.0.9( [http://sourceforge.net/projects/opencmsmoddev/files/](http://sourceforge.net/projects/opencmsmoddev/files/) ) 与基于 eclipse v. 3.7.2 的 spring 源工具一起使用

opencms 模块似乎正在工作，因为我可以在 eclipse 首选项中配置它。但是当我尝试创建新模块时，出现以下异常：

```
 java.lang.LinkageError: loader constraint violation: when resolving method "info.rsdev.eclipse.opencms.module.developer.compatibility.CmsCompatibilityHelper.initCmsSystemInfo(Lorg/opencms/main/CmsSystemInfo;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V" the class loader (instance of info/rsdev/eclipse/opencms/module/developer/loader/OpenCmsClassLoader) of the current class, org/opencms/main/Communicator, and the class loader (instance of org/eclipse/osgi/internal/baseadaptor/DefaultClassLoader) for resolved class, info/rsdev/eclipse/opencms/module/developer/compatibility/CmsCompatibilityHelper, have different Class objects for the type org/opencms/main/CmsSystemInfo used in the signature
java.lang.reflect.InvocationTargetException
  java.lang.LinkageError: loader constraint violation: when resolving method "info.rsdev.eclipse.opencms.module.developer.compatibility.CmsCompatibilityHelper.initCmsSystemInfo(Lorg/opencms/main/CmsSystemInfo;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V" the class loader (instance of info/rsdev/eclipse/opencms/module/developer/loader/OpenCmsClassLoader) of the current class, org/opencms/main/Communicator, and the class loader (instance of org/eclipse/osgi/internal/baseadaptor/DefaultClassLoader) for resolved class, info/rsdev/eclipse/opencms/module/developer/compatibility/CmsCompatibilityHelper, have different Class objects for the type org/opencms/main/CmsSystemInfo used in the signature
  loader constraint violation: when resolving method "info.rsdev.eclipse.opencms.module.developer.compatibility.CmsCompatibilityHelper.initCmsSystemInfo(Lorg/opencms/main/CmsSystemInfo;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V" the class loader (instance of info/rsdev/eclipse/opencms/module/developer/loader/OpenCmsClassLoader) of the current class, org/opencms/main/Communicator, and the class loader (instance of org/eclipse/osgi/internal/baseadaptor/DefaultClassLoader) for resolved class, info/rsdev/eclipse/opencms/module/developer/compatibility/CmsCompatibilityHelper, have different Class objects for the type org/opencms/main/CmsSystemInfo used in the signature 
```

似乎 eclipse osgi 无法为 info/rsdev/eclipse/opencms/module/developer/compatibility/CmsCompatibilityHelper 找到合适的类加载器，并尝试使用默认的类加载器。有人遇到同样的问题吗？

谢谢 ：）

# c# - 类中的方法分离

> ID：15623789
> 
> 赞同：-6
> 
> 时间：2013-03-25T20:08:41.333
> 
> 标签：c#, class, methods

我不太确定这叫什么，但我想知道如何执行以下操作：

```
Bank.Items
Bank.Money 
```

然后会有类似的方法

```
Bank.Money.getMoney();
Bank.Money.setMoney(500); 
```

如果有人至少可以告诉我要查找的内容会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:10:41.313

您可以简单地创建`Money`一个属性`Bank`并免费获取 getter 和 setter。

例如：

```
public class Bank { 
  public decimal Money { get; set; }
} 
```

但这是一家银行，您可能需要更复杂的东西，在这种情况下，您可以在 getter 和 setter 的主体中执行逻辑，但您需要管理存储：

```
private decimal money;
public decimal Money {
  get {
    // do something here
    return money;
  }
  set {
    // and or here
    money = value;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:15:25.943

也许你想要的是创建一个 Money 类？

```
class MoneyClass
{
    private decimal MoneyValue;

    public decimal getmoney()
    { return MoneyValue; }

    public setmoney(decimal Value)
    { MoneyValue = Value; }
}

class Bank
{
    public MoneyClass Money;
} 
```

或者您可以将钱作为财产存入银行：

```
class Bank
{
    public Money {get; set;}
} 
```

# php - 直接从数组返回函数（php）引用数组元素

> ID：15623791
> 
> 赞同：2
> 
> 时间：2013-03-25T20:08:50.603
> 
> 标签：php, arrays

```
return array(
    'client_id' => $client[0]->getId(),
    'client secret' =>  $client[0]->getSecret(),
    'redirect_uri' =>  ($client[0]->GetClientEndpoints())[0]->getRedirectUri(),
    'name' =>  $client[0]->getName()); 
```

特别是片段：

```
($client[0]->GetClientEndpoints())[0]->getRedirectUri() 
```

有没有办法我可以做到这一点而不必这样做：

```
 $endpoints = $client[0]->GetClientEndpoints();
 return array(
    'client_id' => $client[0]->getId(),
    'client secret' =>  $client[0]->getSecret(),
    'redirect_uri' =>  $endpoints[0]->getRedirectUri(),
    'name' =>  $client[0]->getName()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:11:50.470

`$client[0]->GetClientEndpoints()[0]->getRedirectUri()`应该在 PHP 5.4 中工作。还没有5.4？你需要更新。

虽然它非常难看，而且不更具可读性。我会：

```
$client = $client[0];
$endpoint = $client->GetClientEndpoints()[0];
return array(.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:13:32.630

我不确定它是否会起作用，但也许你可以试试

[http://www.php.net/manual/en/function.array-shift.php](http://www.php.net/manual/en/function.array-shift.php)

```
return array(
    'client_id' => $client[0]->getId(),
    'client secret' =>  $client[0]->getSecret(),
    'redirect_uri' =>  array_shift($client[0]->GetClientEndpoints())->getRedirectUri(),
    'name' =>  $client[0]->getName()); 
```

至少这个片段没有任何错误：

```
<?php
error_reporting(E_ALL);

class class1{
    public function getRedirectUri()
    {
        return 'something';
    }
}

$arr1 = array(new class1(), new class1());

$arr = array(
    'client_id' => 'something',
    'client secret' =>  'something',
    'redirect_uri' =>  array_shift($arr1)->getRedirectUri(),
    'name' =>  'something'); 
```

**更新**（感[谢鲁迪](https://stackoverflow.com/users/247372/rudie)）

事实证明，上面的示例与作者的情况不同，因此一个更好的示例（抛出 E_STRICT 因此不应该考虑我的答案）是：

```
<?php
error_reporting(E_ALL);

class class2{
    public function getRedirectUri()
    {
        return 'something';
    }
}

class class1 {
    public function getArrays() {
        return array(new class2(), new class2());
    }
}
$var = new class1 ();

$arr = array(
    'client_id' => 'something',
    'client secret' =>  'something',
    'redirect_uri' =>  array_shift($var->getArrays())->getRedirectUri(),
    'name' =>  'something'); 
```

# java - 单击android后如何使菜单项可单击并显示吐司？

> ID：15623793
> 
> 赞同：0
> 
> 时间：2013-03-25T20:08:56.243
> 
> 标签：java, android

您好，我在尝试让 Eclipse 识别我的菜单图标时遇到问题。我想让图标出现在操作栏中，单击时，我想显示一个 toast。问题是我的保存图标在 eclipse 中没有被识别。这是我的代码：

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.profilemenu, menu);
        return true;
    }
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        super.onOptionsItemSelected(item);
        switch(item.getItemId()) {
        case android.R.id.home:
            finish();
        case android.R.id.save:
            save cannot be resolved or is not a field

        }

        return false;
    } 
```

菜单 ：

```
<?xml version="1.0" encoding="UTF-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/save" android:showAsAction="ifRoom"
        android:title="@string/save_str" android:icon="@drawable/content_save" />
</menu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:13:56.693

您在 switch 语句中使用了不正确的标识符，您应该使用 just `R.id.Save`，如下所示：

```
switch(item.getItemId()) {
    case R.id.home:
        finish();
    case R.id.save:
        Toast.makeText(getContext(), "Toast message", Toast.LENGTH_SHORT).show();

    } 
```

使用`android`标识符意味着您正在尝试查找内置于 android sdk 中的不存在的资源。

# image - 在字符串中搜索某个字符

> ID：15623794
> 
> 赞同：0
> 
> 时间：2013-03-25T20:08:55.787
> 
> 标签：image, matlab

我正在使用 matlab 编写一个用于遥感目的的函数，
用户将在程序中输入一个包含 7 个文件的文件夹，每个文件是一个图像带，它们的名称是：
“b1.dat”
“b2.dat”
“b3 .dat"
"b4.dat"
"b5.dat"
"b6.dat"
"b7.dat"
例如，如果输入 2 作为函数的参数，它将搜索访问中的七个文件名，然后将显示 b2.dat
你建议我如何编写代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:18:19.020

您可以使用[uigetfiles](http://www.mathworks.com/matlabcentral/fileexchange/22805-uigetfiles)来选择目录并`dir`获取文件夹内容的列表。一旦你有了这个列表，`strfind`就会告诉你一个文件包含一个给定的数字。

或者，使用 uigetdir：

```
dirName =  uigetdir('C:\', 'select a directory');
contents = dir(dirName);

for c = contents
    name = c.name;
    if strfind(name,'3')
         fileToOpen = name{1};
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:23:02.143

我使用了这两行代码：
folder = uigetdir('D:\','Select the folder contains band')
filenames = dir(folder)
第一行按我的预期返回文件夹的路径：
folder =

D:\RS\911130 TM 波段
，但第二行没有。我的文件夹中有 7 个文件，它返回一个 9x1 结构
文件名 =

具有字段的 9x1 结构数组：
名称
日期
字节
isdir
datenum
例如文件名（1,1）的内容是：
![在此处输入图像描述](../Images/539ecff57162f71683fb3e51db40f20d.png)

# android - Android磁力计返回非平滑数据

> ID：15623797
> 
> 赞同：0
> 
> 时间：2013-03-25T20:09:01.100
> 
> 标签：android, orientation, accelerometer, magnetometer

我正在构建一个 Android 应用程序，它将设备的罗盘度数记录到一个文件中。有两种方法可以获得这个学位：

**方法一：**

```
SensorManager mSensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
Sensor orientationSensor = mSensorManager.getDefaultSensor(Sensor.TYPE_ORIENTATION);
mSensorManager.registerListener(this, orientationSensor, SensorManager.SENSOR_DELAY_NORMAL);

public void onSensorChanged(SensorEvent event) {
    float azimuthInDegrees = event.values[0]
} 
```

**方法二：**

```
SensorManager mSensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
Sensor accelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
Sensor magnetometer = mSensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);
mSensorManager.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_NORMAL);
mSensorManager.registerListener(this, magnetometer, SensorManager.SENSOR_DELAY_NORMAL);

float[] mGravity;
float[] mGeomagnetic;

public void onSensorChanged(SensorEvent event) {
    if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {
        mGravity = event.values.clone();
    }

    if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD) {
        mGeomagnetic = event.values.clone();
    }

    if (mGravity != null && mGeomagnetic != null) {
        float R[] = new float[9];
        float I[] = new float[9];
        boolean success = SensorManager.getRotationMatrix(R, I, mGravity, mGeomagnetic);
        if (success) {
            float orientation[] = new float[3];
        SensorManager.getOrientation(R, orientation);   

        float azimuthInDegress = ((float) Math.toDegrees(orientation[0]) + 360) % 360;
        }
    }
} 
```

我尝试了这两种方法，将我的设备放在北方方向并做一个完整的顺时针 360 度循环，然后再次在北方方向结束。

![](../Images/5c628cb201258c6b071b405848560ea7.png)

**方法 1**返回以下记录的 JSON 数据：

```
[
   {
      "start time":"25-03-2013 20:42:11.071",
      "direction":"N",
      "end time":"25-03-2013 20:42:14.711"
   },
   {
      "start time":"25-03-2013 20:42:14.781",
      "direction":"NE",
      "end time":"25-03-2013 20:42:18.842"
   },
   {
      "start time":"25-03-2013 20:42:18.912",
      "direction":"E",
      "end time":"25-03-2013 20:42:21.643"
   },
   {
      "start time":"25-03-2013 20:42:21.712",
      "direction":"SE",
      "end time":"25-03-2013 20:42:25.072"
   },
   {
      "start time":"25-03-2013 20:42:25.142",
      "direction":"S",
      "end time":"25-03-2013 20:42:27.524"
   },
   {
      "start time":"25-03-2013 20:42:27.593",
      "direction":"SW",
      "end time":"25-03-2013 20:42:30.113"
   },
   {
      "start time":"25-03-2013 20:42:30.184",
      "direction":"W",
      "end time":"25-03-2013 20:42:32.773"
   },
   {
      "start time":"25-03-2013 20:42:32.843",
      "direction":"NW",
      "end time":"25-03-2013 20:42:34.943"
   },
   {
      "start time":"25-03-2013 20:42:35.013",
      "direction":"N",
      "end time":"25-03-2013 20:42:37.394"
   }
] 
```

**方法 2**返回日志以下 JSON 数据：

```
[
   {
      "start time":"25-03-2013 20:36:07.337",
      "direction":"N",
      "end time":"25-03-2013 20:36:09.728"
   },
   {
      "start time":"25-03-2013 20:36:09.741",
      "direction":"NE",
      "end time":"25-03-2013 20:36:13.832"
   },
   {
      "start time":"25-03-2013 20:36:13.832",
      "direction":"E",
      "end time":"25-03-2013 20:36:16.689"
   },
   {
      "start time":"25-03-2013 20:36:16.754",
      "direction":"SE",
      "end time":"25-03-2013 20:36:16.754"
   },
   {
      "start time":"25-03-2013 20:36:16.819",
      "direction":"E",
      "end time":"25-03-2013 20:36:16.819"
   },
   {
      "start time":"25-03-2013 20:36:16.819",
      "direction":"SE",
      "end time":"25-03-2013 20:36:16.819"
   },
   {
      "start time":"25-03-2013 20:36:16.884",
      "direction":"E",
      "end time":"25-03-2013 20:36:17.014"
   },
   {
      "start time":"25-03-2013 20:36:17.014",
      "direction":"SE",
      "end time":"25-03-2013 20:36:19.546"
   },
   {
      "start time":"25-03-2013 20:36:19.546",
      "direction":"S",
      "end time":"25-03-2013 20:36:22.338"
   },
   {
      "start time":"25-03-2013 20:36:22.338",
      "direction":"SW",
      "end time":"25-03-2013 20:36:25.260"
   },
   {
      "start time":"25-03-2013 20:36:25.324",
      "direction":"W",
      "end time":"25-03-2013 20:36:25.324"
   },
   {
      "start time":"25-03-2013 20:36:25.324",
      "direction":"SW",
      "end time":"25-03-2013 20:36:25.390"
   },
   {
      "start time":"25-03-2013 20:36:25.390",
      "direction":"W",
      "end time":"25-03-2013 20:36:27.987"
   },
   {
      "start time":"25-03-2013 20:36:28.051",
      "direction":"NW",
      "end time":"25-03-2013 20:36:28.128"
   },
   {
      "start time":"25-03-2013 20:36:28.181",
      "direction":"W",
      "end time":"25-03-2013 20:36:28.181"
   },
   {
      "start time":"25-03-2013 20:36:28.181",
      "direction":"NW",
      "end time":"25-03-2013 20:36:28.181"
   },
   {
      "start time":"25-03-2013 20:36:28.246",
      "direction":"W",
      "end time":"25-03-2013 20:36:28.246"
   },
   {
      "start time":"25-03-2013 20:36:28.246",
      "direction":"NW",
      "end time":"25-03-2013 20:36:30.974"
   },
   {
      "start time":"25-03-2013 20:36:31.038",
      "direction":"N",
      "end time":"25-03-2013 20:36:36.233"
   }
] 
```

如您所见，尽管我从北到北直接转了一圈，但第二种方法的结果不如第一种方法顺利。我更喜欢使用第一种方法，但问题是它已被弃用。另一方面，第二种方法不记录平滑数据。在你们看来我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:08:53.673

为了能够计算旋转矩阵，`getRotationMatrix`假设中的重力参数仅为重力加速度。即如果 ( **w_1** , **w_2** , **w_3** ) 是世界基，**w_1**是指向的单位向量`EAST`，**w_2**是指向的单位向量`NORTH`，**w_3是指向****SKY**的单位向量，则假设重力参数是标量倍数w_3**向量**。
结果不平滑的原因是当设备旋转时，设备的加速度现在包括非重力加速度。加速度计值现在不再准确地近似重力。因此，词基不能准确表示。该`getOrientation`方法通过将设备单元**y轴**正交投影到**w_1**、**w_2**平面（东-北平面）上来计算方位角，然后计算得到的向量和**w_2**（北）向量之间的角度。因此，如果**w_1**、**w_2**、**w_3**未准确表示，则您的结果将不准确。
为了提高精度，您需要对加速度计进行滤波，以消除除重力之外的其他加速度。为此，最简单的方法是低通滤波器。
对于 API > 8，`TYPE_GRAVITY`我很确定 android 提供的只是过滤的加速度计值，过滤方法可能是某种 KALMAN 过滤器。使用`TYPE_GRAVITY`可将低通滤波器的结果提高 10 度。
此外，为了消除波动，人们会保留结果的历史记录并对其进行平均。您可以将旋转矩阵保存在列表中然后平均或保存方位角然后平均。如果你平均方位角，你必须小心，因为它们是周期性的。您可以使用以下方法对它们进行平均。

```
public static final float averageAngle(float[] terms, int totalTerm)
{
    float sumSin = 0;
    float sumCos = 0;
    for (int i = 0; i < totalTerm; i++)
    {
        sumSin += Math.sin(terms[i]);
        sumCos += Math.cos(terms[i]);
    }
    return (float) Math.atan2(sumSin / totalTerm, sumCos / totalTerm);
} 
```

注意：我认为原因`TYPE_ORIENTATION`是贬值，因为它仅在设备平坦或接近平坦时才提供正常意义上的方向。它使结果返回`getOrientation`. 现在，如果设备是垂直且旋转的，例如在 POTRAIT 和 LANDSCAPE 之间的中间，则`getRotation`返回方位角作为**y 轴**投影到**w_1**、**w_2**平面所指向的方向。不是后置摄像头指向的方向，是**-z轴的方向**. 人们不理解这一点并在所有情况下都使用，因此 android 贬值了。如果您仍在使用它，您会感到惊讶，因为手机制造商以不同的方式实施它。HTC 和摩托罗拉会给你完全不同的结果。[您可以从我的](https://stackoverflow.com/questions/15547691/magnetic-fields-rotation-matrix-and-global-coordinates/15556771#15556771)[回答](https://stackoverflow.com/questions/15315129/convert-magnetic-field-x-y-z-values-from-device-into-global-reference-frame)中
获得更多信息

# c++ - 如何检测和替换 Qt 中的非 ascii 字符？

> ID：15623800
> 
> 赞同：2
> 
> 时间：2013-03-25T20:09:09.453
> 
> 标签：c++, qt, replace, character

问题是我找不到一种简单的方法来检测和替换`ąčęęėįšž`Qt 中的非 ascii 字符。我从文件中读取了一行喜欢`kažkodėl`并想将字符替换`ž`为和。我会感谢任何帮助。`ė``z``e`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:11:16.860

对于检测，您可能可以使用[`QChar::toAscii()`](http://qt-project.org/doc/qt-4.8/qchar.html#toAscii)并检查结果是否为 0。

查看 的详细信息[`QString::toAscii()`](http://qt-project.org/doc/qt-4.8/qstring.html#toAscii)，您实际上可能正在寻找 toLatin1() 。请注意，QString 的 toLatin1() 似乎使用了“？” 对于替换字符，而不是 QChar 的 toAscii() 的“0”。（我不确定 Qt 是否在这里错误地将 latin1 和 ascii 等同起来......但它似乎声称它在文档中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:31:50.333

由于没有真正的全面解决方案，并且您想用其他某些字符替换某些字符，所以在我看来，您想设置一个 QRegExp 搜索某些字符集，这些字符集被单个字符[替换。](http://doc-snapshot.qt-project.org/4.8/qstring.html#replace-16)

另外，请参阅此链接：[http ://www.qtcentre.org/threads/38898-Accented-Character](http://www.qtcentre.org/threads/38898-Accented-Character)

* * *

**编辑：** QString::normalize() 做你想要的吗？请参阅此链接：[从 QString 中删除重音符号](https://stackoverflow.com/questions/12278448/removing-accents-from-a-qstring)

# java - 3rd 方库的一致 OSGi 导入

> ID：15623803
> 
> 赞同：2
> 
> 时间：2013-03-25T20:09:22.510
> 
> 标签：java, osgi

我一直在开发 OSGi 模块，但到目前为止，当我不得不包装现有的 jar 时遇到了许多问题。这方面的一个例子是使用 Oracle 数据库驱动程序，即使我已将 jar 包装为捆绑包，它也只是拒绝工作（即使存在驱动程序类也找不到）。这只是一个示例，但我在使用其他 3rd 方库时遇到了问题，并且想知道是否有使用 3rd 方库的最佳实践方法每次都有效？

杰洛夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:24:21.400

您的问题是 jdbc 使用 java 运行时中的一个类来查找数据库驱动程序（DriverManager.getConnection）。这不起作用，因为无法从系统类加载器（加载 DriverManager 类）访问数据库驱动程序。

在 OSGi 中工作的一种方法是改用 DataSource： http: [//docs.oracle.com/javase/tutorial/jdbc/basics/sqldatasources.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/sqldatasources.html)。在那里，您只需使用 new 创建数据源，这当然可以。问题是它使您的用户捆绑包依赖于特定的数据库驱动程序。所以最佳实践是集中创建 DataSource 并将其作为服务发布。

您可以在我的 Apache Karaf DB 教程中找到更多详细信息（[http://www.liquid-reality.de/display/liquid/2012/01/13/Apache+Karaf+Tutorial+Part+6+-+Database+Access](http://www.liquid-reality.de/display/liquid/2012/01/13/Apache+Karaf+Tutorial+Part+6+-+Database+Access)）。

顺便提一句。一般来说，这种工厂通常是库在 OSGi 中失败的地方。每个库都发明了另一个不同的工厂系统，其中大多数与 OSGi 的受限类加载器不兼容。幸运的是，如今大多数库都已为 OSGi 做好了准备。大多数情况下，这仅仅意味着您还可以使用可以使用 OSGi 服务检索的具体对象来调用工厂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:34:51.557

我首选的方法不是包装库，而是解压缩它，添加清单，然后重新压缩它。Jars-inside-jars 往往会导致难以调试的问题。Unjar 和 re-jar 可以通过一个简单的 ant 脚本自动化。

另外，我喜欢手动编写 MANIFEST.MF。如果被包装的库很小，那么很容易做到这一点。像 bnd 这样为您生成 MANIFEST.MF 的工具并不总能提供正确的结果，如果您过于依赖它们，您将不知道幕后发生了什么。

# javascript - 尝试渲染数据 d3 crossfilter dc.js BarChart。图表已绘制，但为空

> ID：15623804
> 
> 赞同：1
> 
> 时间：2013-03-25T20:09:24.107
> 
> 标签：javascript, d3.js, data-visualization, crossfilter, dc.js

我一定是在做一些幼稚的事情，但我无法让我的数据在图表中呈现。

这是我的示例数据：

```
var data = [
    {    
       date: '02-12-2013',
       val: 13,
    }
    {    
       date: '02-13-2013',
       val: 6,
    }
    ...
] 
```

这是我的代码：

```
var cf = crossfilter(data);
var dim = cf.dimension(function(d){ return d.val });
var group = dim.group();
var barchart = dc.barChart('#container');

barchart.width(850)
.height(250)
.margins({top: 10, right: 50, bottom: 30, left: 40})
.dimension(dim)
.group(group)
.gap(1)
.x(d3.time.scale()
          .domain([new Date(data[0].date), 
                  new Date(data[data.length-1].date)]))
.xUnits(d3.time.day)
.centerBar(true)
.renderHorizontalGridLines(true)
.renderVerticalGridLines(true)
.render(); 
```

我在这里想念什么？这是图表的屏幕截图：

![这是图表的屏幕截图](../Images/ace6f4a5f0f91e729e75f0ef375b52b7.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T00:53:47.923

尝试`date`用作您的维度：

```
var dim = cf.dimension(function(d){ return d.date }); 
```

对于条形图，您的尺寸通常需要与您的`X`轴刻度相匹配。

# ios - 在情节提要中，我的 UITableView 位于页面顶部，而在应用程序中则不是

> ID：15623805
> 
> 赞同：0
> 
> 时间：2013-03-25T20:09:36.777
> 
> 标签：ios, xcode, uitableview, storyboard

使用 Storyboard，我从 ViewController 的顶部开始绘制 UITableView，并与 VC 一样宽和高。当我运行我的应用程序时，它会将 UITableView 降低大约 75 像素。我试图打开/关闭自动布局和可以想象的每个自动调整大小选项。我尝试将设备切换从 iphone 5 更改为 4。我尝试添加支持以旋转界面只是为了排除这种情况。

我可以让表格留在页面顶部的唯一方法是在我的 viewDidLoad 语句中手动编辑 UITableView 的原始框架。

```
//myTable is the UITableView in question
CGRect newFrame = self.myTable.frame;
newFrame.origin.x = 0;
newFrame.origin.y = 0;
self.myTable.frame = newFrame; 
```

我正在使用 xCode 4.6.1。其他人有这个问题并知道解决方案吗？谢谢！

![这是一个截图来说明我所说的空间](../Images/aafefedfeca422f72e0e327b296c5d09.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:12:32.617

启用自动布局。选择右下角的表。通过界面生成器中的箭头将边框设置为超级视图的顶部（一个看起来像 H 的小按钮）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:33:07.780

确保您的 tableView 大小与我附加的图片中的一致。

```
**//Do your tableView frame size in viewWillAppear**

-(void)viewWillAppear:(BOOL)animated
{
   CGRect newFrame = self.myTable.frame;
   newFrame.origin.x = 0;
   newFrame.origin.y = 0;
   self.myTable.frame = newFrame; 
 } 
```

[示例图像](http://postimage.org/image/7sf36jc0b/b8403950/)

希望它对你有用..:)

# android - 如何在android中制作板子

> ID：15623806
> 
> 赞同：0
> 
> 时间：2013-03-25T20:09:36.810
> 
> 标签：android, gridview

我想知道是否有人可以帮我解决这个问题，我想在 android 中的一个活动上制作 2 个板，每个板的大小应为 10*10（10 行和 10 列），一个板可以点击，另一个可以查看 -只能。我将拥有 2 个模拟器，一个用于播放器 1，另一个用于播放器 2..

我可以在我的模拟器上按下玩家 2 的棋盘，这将在玩家 2 的模拟器上显示他的棋盘在特定单元格上被点击，然后他可以在我的棋盘上按下他的模拟器，只有他可以看到，这将在我的模拟器上显示我的板已在该特定位置单击..

我知道这个问题有点太长了哈哈，但我真的需要你们的帮助，我能够得到它将使用 GridView 的想法，但我面临很多麻烦，我会非常感激如果你能帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:41:26.357

您还可以使用 GridLayout。实际上对于示例代码和示例，我建议在 SDK Manager 中获取示例并导入 APIDemos。它有很多方法可以创建 10x10 网格/表格/布局等。

# powershell - Powershell对csv中的浮点数据进行排序

> ID：15623811
> 
> 赞同：1
> 
> 时间：2013-03-25T20:10:04.743
> 
> 标签：powershell, csv

我使用这个命令：

```
import-csv my.csv | select Date, Balance | sort Balance | select -first 10 
```

Balance 列是浮点数据，但它是按字符串排序的。如何将其排序为数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:13:34.197

尝试：

```
import-csv my.csv | select Date, Balance | sort {[double]$_.Balance} | select -first 10 
```

# c# - 抛出 Db4objects.Db4o.Ext.DatabaseClosedException

> ID：15623815
> 
> 赞同：0
> 
> 时间：2013-03-25T20:10:12.140
> 
> 标签：c#, asp.net-mvc-4, db4o

我是相当新的 c# 和 MVC，今天我一直在玩 DB4o。我已经建立了一个练习网站，该网站通过用户提供的 url 抓取电影。然后将影片存储在 db4o 数据库中。
但是，我现在似乎每次启动站点时都会抛出Db4objects.Db4o.Ext.DatabaseClosedException 。我有一种感觉，我在没有关闭当前连接的情况下对数据库进行了太多调用。

这是我的控制器，我认为问题源于此。

```
 using System;
  using System.Collections.Generic;
  using System.Linq;
  using System.Web;
  using System.Web.Mvc;
  using MvcMovieDatabase.Models;
  using Db4objects.Db4o;
  using Db4objects.Db4o.Linq;

  using System.IO;namespace MvcMovieDatabase.Controllers
  {
      public class HomeController : Controller
      {
           static string YapFileName = Path.Combine(      
           Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData),
                           "moviesDB.yap");

    IObjectContainer db4o = Db4oEmbedded.OpenFile(YapFileName);

    public ActionResult Index()
    {
        ViewBag.Message = "Modify this template to jump-start your ASP.NET MVC application.";

        return View();
    }

    public ActionResult About()
    {
        ViewBag.Message = "Your app description page.";

        return View();
    }

    public ActionResult Contact()
    {
        ViewBag.Message = "Your contact page.";

        return View();
    }

    [HttpGet]
    public ActionResult Create()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Create(string movieURL)
    {
        Movie newMovie = new Movie();
        MovieDirectory dir = new MovieDirectory();

        newMovie = dir.GetMovieData(movieURL);

        db4o.Store(newMovie);

        db4o.Close();

        return RedirectToAction("Index");
    }

    public ActionResult DB4o()
    {

        IEnumerable<Movie> allFilms = from movie in db4o.Query<Movie>()
                                      select movie;

        db4o.Close();

        return View(allFilms);
    }

   }
 } 
```

create 方法接受一个字符串并运行必要的代码来获取数据。db4o 方法只是运行一个查询来从数据库中获取存储的数据。我开始关闭和打开流，只是想看看是否能发现问题，但随后它开始在 db40 方法的视图中为这段代码抛出相同的异常。

```
 @model IEnumerable<MvcMovieDatabase.Models.Movie>

 @{
      ViewBag.Title = "DB4o";
  }

  <h2>DB4o</h2>

  @foreach (var item in Model)
  {
      foreach (var cast in item.MovieCastList)
      {
          <p><img src="@cast.CastImage" /></p>
          <p>@cast.CastRealName | <span>@cast.CastFilmName</span></p>
      }
  } 
```

然而，这可能是我的干预。感谢您对此事的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:18:51.680

问题似乎是您在每次创建后都关闭了连接。db4o ObjectContainer 旨在在您的应用程序运行时始终保持打开状态。查看[此链接](https://stackoverflow.com/questions/2998794/is-it-ok-to-open-a-db4o-file-for-query-insert-update-multiple-times#answer-3001247)以获取更多信息。

如果您仍然愿意在每次更新后打开和关闭连接，那么您应该将以下行放在方法 Create() 的开头

```
IObjectContainer db4o = Db4oEmbedded.OpenFile(YapFileName); 
```

您打开对象容器一次，但在每次事务后关闭它。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:03:55.860

正如 Gonzalo 所述，您不能在应用程序中关闭 db4o 会话。如果您想使用隔离事务，请使用`OpenSession`：

```
IEnumerable allFilms = null;
using (var session = db4o.Ext().OpenSession())
{
    // query
    allFilms = from movie in session.Query()
               select movie;

    // do object activation here or rely on default activation level
    foreach (var movie in allFilms)
    {
        session.Activate(movie, int.MaxValue);
    }
}

return View(allFilms); 
```

# jquery - 拖动项目时jQuery UI可排序闪烁和跳跃 - 连接列表

> ID：15623820
> 
> 赞同：4
> 
> 时间：2013-03-25T20:10:31.833
> 
> 标签：jquery, html, css, jquery-ui

我有两个连接的列表，但是当拖动项目试图放置它们时，可排序的跳跃和闪烁到处都是，使得订购项目变得非常困难。这导致了非常糟糕的用户体验。

有解决方案吗？

我有一个包含以下所有代码的完整演示，只是无法弄清楚如何停止闪烁并使其成为一个很好的流畅体验！

[http://jsfiddle.net/w3vvL/62/](http://jsfiddle.net/w3vvL/62/)

尝试在容器 div 上溢出，但没有这样的运气！

```
overflow:visible; 
```

希望有人可以提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:54:15.477

您需要做的是在网格中的 ADDED AREA 中显示项目并像[这样](http://jqueryui.com/sortable/#display-grid)更新行为。无论其内容如何，​​每个项目都应具有相同的大小。我希望它会有所帮助。

# iphone - 开发 ipad 应用程序是强制性的吗？

> ID：15623828
> 
> 赞同：1
> 
> 时间：2013-03-25T20:10:59.013
> 
> 标签：iphone, app-store

我正在阅读应用商店评论指南，但我对这行有点困惑：

```
iPhone Apps must also run on iPad without modification, at iPhone resolution, and at 2X iPhone 3GS resolution 
```

这意味着什么？我必须为 iphone 和 ipad 开发？我现在想开发仅适用于 iphone 的应用程序...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T20:13:27.780

这意味着您的应用程序也应该在 iPad 上运行，但您不必开发 iPad 应用程序。

在 iPad 模拟器上测试一下，如果可以的话应该没问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T20:17:46.613

关键短语是“在 iPhone 分辨率下”。换句话说，iPhone 应用程序必须在 iPad 上以*iPhone 仿真模式*成功运行。几乎每个 iPhone 应用程序都会自动执行此操作，但它们只是确保您已确定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T20:14:37.950

看起来新的 iOS 应用程序可能需要在两者上运行。

尽管仅仅能够运行而不是针对 iPad 进行优化可能就足够了。

重复： [所有新应用程序是否也必须在 iPad 上运行才能通过应用程序商店的审批流程？](https://stackoverflow.com/questions/3901731/does-all-new-apps-have-also-to-work-on-ipad-to-pass-the-appstore-approval-proces)

# linux - 在 linux 中创建用于分发的二进制包所需的步骤

> ID：15623834
> 
> 赞同：0
> 
> 时间：2013-03-25T20:11:32.623
> 
> 标签：linux, distribution, fedora, packaging, rpm

我对如何使用我刚刚创建的项目（已经编译的二进制文件）中的 rpmbuild 创建一个完整的二进制包有点困惑。

我当前的项目包含与此用户类似的格式（[为 Linux 打包专有软件](https://stackoverflow.com/questions/3545628/packaging-proprietary-software-for-linux)）我有

*   foo（二进制）
*   数据
*   库
*   foo.sh

*libs*将包含项目所需的所有共享库，而*foo.sh*是一个将 LD_LIBRARY_PATH 设置为包含*libs*的脚本。因此，用户将执行*foo.sh*并且程序应该启动。

我正在看这个网站的教程（[rpm 教程](http://docs.fedoraproject.org/en-US/Fedora_Draft_Documentation/0.1/html/RPM_Guide/ch08s02.html)）

我知道创建一个 rpm 我创建一个构建区域使用`rpmdev-setuptree` 我可以创建一个规范文件使用`cd ~/rpmbuild/SPECS; rpmdev-newspec foo`，如果我有一个好的 SOURCES 文件夹，我可以使用它来构建它`rpmbuild -ba foo.spec`

但我不知道如何设置 SOURCES 目录。教程说明（[这里](http://docs.fedoraproject.org/en-US/Fedora_Draft_Documentation/0.1/html/RPM_Guide/ch08s02s02.html)）我应该创建一个 tarball 并将我的所有源文件放在其中并放在 SOURCE 目录中。在我的情况下，源文件是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:27:46.577

您正在尝试从已有的二进制文件创建 RPM？在这种情况下，您可以将整个构建内容留在 SPEC 文件之外，并且您需要一个 SOURCE 目录来保存您拥有的捆绑包，`%prep`下面描述的步骤将从这里获取它们。在我从 zip 文件构建的二进制包中，我做了：

*   标题，名称，版本，由我撰写/抄自原件的描述
*   资料来源：下载 Linux 软件包的原始位置，官方文档，...
*   `%prep`：只需解压不同的部分，删除一些冗余文件，...
*   `%build`： 没事做
*   `%install`：手动创建相关目录`$RPM_BUILD_ROOT`，复制文件`install`，复制/创建配置文件，...
*   `%clean`： 吹走`$RPM_BUILD_ROOT`
*   `%files`：所有已安装文件的详尽列表。

这需要几次迭代才能正确。之后我通过重建我的 RPM 来遵循上游包（方便我将所有东西打包在一个 SRPM 中，其中 Source 部分有点用词不当......）

# php - 希望我的 if($object) 在 count($object) === 0 时评估 false

> ID：15623837
> 
> 赞同：0
> 
> 时间：2013-03-25T20:11:43.623
> 
> 标签：php, arrays, object, interface

我制作了一个对象，它应该代表一个数组，但有一些方法。所以我让它实现了本机接口：`IteratorAggregate`和`Countable`. 这样你就可以`foreach`了`count`。到目前为止，一切都很好。

但现在我希望它也像数组一样评估。因此，如果`count($object)`为零，`if($object)`则应该评估为`false`。有`Comparable`接口之类的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:17:24.207

使用[类型 Juggling](http://php.net/manual/en/language.types.type-juggling.php)。

您可以分配预期的 var 类型。

```
$object = count ( $object );
$object = (array) $object; 
```

同样，如果您想为变量分配其他类型，这里是可能值的列表：

*   `(int)`
*   `(bool)`
*   `(float)`
*   `(string)`
*   `(array)`
*   `(object)`
*   `(unset)`
*   `(binary)`

还要检查 this 这个[Comparable interface](https://wiki.php.net/rfc/comparable)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:24:36.110

The [documentation](http://php.net/manual/en/language.types.boolean.php) shows everything that evaluates to false:

*   the boolean `FALSE` itself
*   the integer `0` (zero)
*   the float `0.0` (zero)
*   the empty string, and the string `"0"`
*   an array with zero elements
*   an object with zero member variables (*PHP 4 only*)
*   the special type `NULL` (including unset variables)
*   SimpleXML objects created from empty tags

As of this list an object will never be considered as `false`. So the only way is to cast the value of `count()` to boolean using `(bool)` if you need to do a strict comparison as pointed out in [Tomi Sebastián Juárez](https://stackoverflow.com/a/15623946/1456376)'s answer.

# ios - 构建基于地图的 iOS 游戏

> ID：15623838
> 
> 赞同：0
> 
> 时间：2013-03-25T20:11:49.480
> 
> 标签：ios, ios6, game-center

我将构建一个关于虚拟地铁系统的基于地图的游戏。但是，我不知道开始使用它的最佳解决方案是什么。

这里有几个细节：

因此，与任何全球地铁网络一样，该地图包含不同线路上的不同车站。如何将此地图集成到数据库中或者我不应该使用数据库？我需要一个结构来告诉我：

X 线有这些车站 - A、B、C 按此顺序 Y 线有这些车站 - B、D、E 按此顺序

那么最好有一个不需要手动构建图表的功能，该功能将允许直接发现从一个站点到另一个站点的路线。因此可以查询从 A 到 E 的路线并给出 AB，BE。

谁能给我任何关于如何开始的提示？将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:06:56.393

要创建基于地图的游戏，您应该尝试 Zwoptex 和它的精灵表系统。

它将地图图块存储在 plist 中，然后您可以导入精灵表并让您的对象与图块交互！

在这里查看：zwoptexapp.com/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:38:28.690

数据结构：你想要一个“图”（如果你想要一些单向的路线，你需要一个“有向图”）。

算法：有*很多*著名的算法用于自动检测路线和给定“图”的“最短路线”。如果您在 Google 上搜索“图最短路径算法”或“DAG 算法”，您应该会找到很多示例。

最简单的实现：

```
@interface GraphNode : NSObject

@property NSMutableArray *adjacentNodes; // array of the links to adjacent nodes

@end

@interface GraphLink : NSObject

@property GraphNode *start, *end; // joins a pair of nodes

@end

@interface GraphRoute : NSObject

@property NSMutableArray *links; // array of GraphLink instances, connecting a string of nodes

@end 
```

# caching - Heroku Dev 上的片段缓存有限制吗？

> ID：15623842
> 
> 赞同：3
> 
> 时间：2013-03-25T20:12:10.883
> 
> 标签：caching, heroku

我正在为我的 rails 应用程序使用 Heroku Dev（免费版）。为了性能，我使用了很多片段缓存。片段缓存的大小是否有限制？

另外，片段缓存存储在哪里？我没有为此设置任何配置。Heroku App 上没有 tmp 目录。

谢谢。

山姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:17:30.580

片段缓存使用与`Rails.cache`应用程序其余部分相同的存储。默认情况下，Rails 使用具有 32mb 限制的内存存储，但如果您设置不同的存储（例如`config.cache_store = :mem_cache_store`），则限制是不同的。值得注意的是，大多数 Memcache 存储的每个键大小为 1MB，因此您不能存储大于该大小的单个片段。

[http://guides.rubyonrails.org/caching_with_rails.html#cache-stores](http://guides.rubyonrails.org/caching_with_rails.html#cache-stores)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T20:29:41.340

您可以在 Heroku 上使用**memcache**进行片段缓存，效果非常好。我推荐使用 25 MB 存储桶的免费[Memcachier计划。](https://addons.heroku.com/memcachier)

```
$ heroku addons:add memcachier:dev 
```

经过一些研究，我在我的 production.rb 中使用了这些设置。

```
# config/production.rb
# Caching
#
# Explicit Requires
require 'memcachier'
require 'dalli'

# Global enable/disable all memcached usage
config.perform_caching = true

# Disable/enable fragment and page caching in ActionController
config.action_controller.perform_caching = true

# Full error reports are disabled
config.consider_all_requests_local = false

# The underlying cache store to use.
config.cache_store = :dalli_store, { :compress => true }

# The session store is completely different from the normal data cache
# config.session_store = :dalli_store # REVIEW: Does this imply infinite sessions?

# HTTP Caching
config.action_dispatch.rack_cache = {
  :metastore    => Dalli::Client.new,
  :entitystore  => 'file:tmp/cache/rack/body',
  :allow_reload => false
}

# Gemfile
group :production do
  # Memcached using Memcachier on Heroku
  gem 'memcachier'
  gem 'dalli'
end 
```

希望这可以帮助。

# c++ - 字符串到字符 - C++

> ID：15623845
> 
> 赞同：1
> 
> 时间：2013-03-25T20:12:18.057
> 
> 标签：c++, string, char, int

如何将字符串转换为字符？

我已经用谷歌搜索了，但我没有找到我所处情况的答案。真的，我正在尝试将 int 转换为 char 但我的编译器不支持 to_string 函数，所以我决定转换为 from int字符串然后字符串到字符。

我正在使用 char[ ][ ] 所以我可以存储整数和字符。

```
stringstream ss;
ss << j; // j is the integer
string s(ss.str());
ascii_text[1][i] = (char)s; 
```

编辑：

我正在使用 ASCII 字符。

这就是我想要做的。整数a = 10；-> 字符串 s = "10"; -> 字符 c = '10';

如果我找到一种将 int 直接转换为 char 的方法，我会很高兴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:15:50.703

> 如何将字符串转换为字符？

好的。如果你的意思是`char*`，那么这个`std::string`类有一个`c_str()`方法：

```
std::string myString = "hello";
const char* myStr = myString.c_str(); 
```

A`char`的大小为 1 个字节，因此您不能在其中放入任何字符串，除非该字符串的长度为 1。但是，您*可以*在字符串中的某个位置获取字符：

```
std::string str = "hi bro";
char c = str[0]; // This will be equal to 'h' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T20:14:56.333

如果我对您的理解正确，那么您要做的就是从整数（0-9）到ascii数字（'0'-'9'）？在那种情况下，`char(j)+'0'`会做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T20:15:02.253

您可以使用 c_str() 方法从字符串中获取字符数组。

[http://www.cplusplus.com/reference/string/string/c_str/](http://www.cplusplus.com/reference/string/string/c_str/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T20:14:22.830

你应该能够做到

```
int j = 3;
char ch;
stringstream ss;
ss << j;
ss >> ch; 
```

# sql-server-2012 - SQL server 2012 不会加载 CLR 4.0 组件

> ID：15623860
> 
> 赞同：4
> 
> 时间：2013-03-25T20:13:28.677
> 
> 标签：sql-server-2012, .net-assembly, clr4.0

我刚刚升级到带有 SP1 的 SQL Server 2012，因为我无法从 .net 4.0 加载 CLR 程序集。现在我的虚拟机上同时运行了 2008 和 2012。我试图将程序集加载到 2012 年，但我仍然得到相同的不受支持的版本错误。当我运行以下查询时，从 sys.dm_clr_properties 中选择 *

我只看到版本 2.0.50727。在升级之前，我安装了 .net 4.0。加载程序集时如何让 SQL 使用 .net 4.0？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T17:24:06.297

检查这个键

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework\OnlyUseLatestCLR 
```

是 0 还是 1

如果它是 0 - 更改为 1 并重新启动您的机器。应该有帮助。

或者

尝试在 SQL2012 上简单地禁用和启用 SQL CLR。或者尝试同时禁用（SQL2008 和 SQl2012），然后仅启用 SQl2012

```
sp_configure 'clr enabled', 0;
GO
RECONFIGURE;
GO

sp_configure 'clr enabled', 1;
GO
RECONFIGURE;
GO 
```

或者

您可以尝试通过在具有下一个配置`sqlservr.exe.config`的文件夹中创建文件来强制 SQL Server 加载 .NET 4.0 运行时`Binn`

```
<configuration>
   <startup>
      <requiredRuntime version="v4.0"/>
   </startup>
</configuration> 
```

# sql - 在与主行相同的事务中插入具有外键关系的行

> ID：15623865
> 
> 赞同：6
> 
> 时间：2013-03-25T20:13:41.553
> 
> 标签：sql, sql-server, ado.net

我有 2 个表，其中一个与另一个有外键关系

```
CREATE TABLE foo (
  id INT NOT NULL PRIMARY KEY IDENTITY,
  value VARCHAR(50) DEFAULT NULL,
);

CREATE TABLE bar (
  id INT NOT NULL PRIMARY KEY IDENTITY,
  foo_key INT NOT NULL
  value VARCHAR(50) DEFAULT NULL,
); 
```

我正在使用参数化的 ADO.NET ExecuteReader 来插入新行。我的泡菜是，如果我想在同一个事务中的不同表中插入 2 行，即在提交之前，我不能在 bar 中插入行，因为我还不知道 foo.id 的值。你会怎么做呢？即我如何确保 bar.foo_key 获得正确的值？尝试选择它什么都没有，因为我猜它实际上还没有。我是否应该使用存储过程来尝试动态生成密钥，或者可能有一个可以使用的内部变量。或者有没有办法让插入返回新的ID？我是否需要外键声明，尽管我不确定这是否有用，因为我仍然不知道要使用什么 id？

我想一次性完成的原因是由于错误处理，我希望能够在发生错误时回滚所有内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T20:15:18.523

您可以使用`scope_identity()`检索新生成的`identity`：

```
begin tran;
insert Foo (value) values ('6*7');
declare @fk int = scope_identity();
insert bar (foo_key, value) values (@fk, '42');
commit tran; 
```

根据 HLGEM 的评论，要将新生成的身份的值返回给客户端，您可以使用`output`：

```
insert Foo (value) output inserted.ID values ('6*7'); 
```

请注意，对于跨越两个会话的事务，您需要一个分布式事务，这非常昂贵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:41:53.657

我发现我可以在插入时返回 scope_identity()

```
INSERT INTO [foo] ([value]) VALUES (@0) SELECT SCOPE_IDENTITY() AS [SCOPE_IDENTITY]; 
```

# python - Python：找出一组gps坐标上最常见的位置

> ID：15623866
> 
> 赞同：0
> 
> 时间：2013-03-25T20:13:42.717
> 
> 标签：python, geolocation, gps

我需要在 python 中分析一组 GPS 坐标。我需要找出最常见的位置。考虑到GPS数据的精度问题，定位精度不是很高。难以解释（以及在谷歌上搜索信息），因此举个例子：

*   我每天从家里开车上班两个月
*   我为每次旅行启动我的 gps 记录器，并在旅行结束时停止
*   偶尔，我会去别的地方

如果我运行脚本，我需要分析驱动器开始和停止的坐标，例如 20m 的位置半径精度，我会发现最常出现的地方是我的家和我的工作（每个半径为 20m ）。我在这个半径内停在哪里并不重要。

python中有没有可以执行此类操作的库？你有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:29:36.670

如果你最感兴趣的是你去的地方，你可以考虑从每个驱动器中取第一个和最后一个点，如果你在那里超过*x*次，则只取中间点。*也许如果您在最后k*个数据点上的平均速度小于某个阈值。这应该使应用一些聚类技术（如[k-means clustering](http://en.wikipedia.org/wiki/K-means_clustering)）变得更加容易。

可能会派上用场的是使用[近似最近邻居](http://www.cs.umd.edu/~mount/ANN/)来为任何给定点找到相对靠近它的点的集合。

要从图形中获取页面，您甚至可以尝试在所有数据点的空间上叠加一个高分辨率网格，并为每个点在该网格上制作一个小半径的 splat。每次添加 splat 时，您都可以累积在该点花费的时间，然后跟踪网格中累积时间最长的点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:25:53.077

为了计算最常见的位置，一种简单的方法是仅使用纬度/经度小数点后的前 3 位数字，或者更好地使用逗号后的 3 位数字。

在赤道：

4 位：11 m
3 位 111m
2 位 1.1km
1 位 11.1km
0 位 111.111 km（两条经线之间的距离）：40 000 000 / 360

然后你可以用作哈希表，乘以例如 1000 以去掉 3 个小数点，并在哈希表中存储为 java.awt.Point。

有更好的解决方案，但这给出了第一个想法。

# shell - 如何在我的 ksh 脚本中 grep 列？

> ID：15623874
> 
> 赞同：-2
> 
> 时间：2013-03-25T20:14:08.060
> 
> 标签：shell, unix, ksh

以下是我的代码：

```
#!/bin/ksh -p
NAME=$1
echo $NAME likes to drink:
grep $NAME ~/practice/database/likes
echo total number of beers $NAME likes to drink:
grep $NAME ~/practice/database/likes | wc -l 
```

以下是我的输出：

```
dave likes to drink:
dave,coors
dave,bud
total number of beers dave likes to drink:
       2 
```

我如何只输出“coors”和“bud”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:20:56.440

你可以尝试这样的事情：

```
grep $NAME ~/practice/database/likes | awk -F, '{ print $2 }' 
```

或者

```
grep $NAME ~/practice/database/likes | cut -d , -f 2 
```

[男人](http://www.manpagez.com/man/1/awk/)

[男人切](http://ss64.com/bash/cut.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:37:41.873

如果您使用`sed`，那么您只需要一个程序：

```
sed 's/'$NAME',//'  ~/practice/database/likes 
```

或者您可以使用`awk`，但不要使用`grep`它，因为它`awk`也可以进行正则表达式：

```
awk -F, '/'$NAME'/{ print $2 }' ~/practice/database/likes 
```

# wxpython - Wxpython 回调

> ID：15623876
> 
> 赞同：1
> 
> 时间：2013-03-25T20:14:09.500
> 
> 标签：wxpython

我的框架中有 3 个控件 -

1.  一个列表框，其中包含员工表中的员工姓名列表。
2.  接受新员工姓名的文本框
3.  单击命令按钮将在员工表中插入一个新名称。

要求：

一旦我在插入新行后按下提交按钮，列表框应该会自动刷新为新名称。

我如何完成这项任务？

我成功地创建了控件并绑定了单击事件并插入了一行。但无法刷新列表框。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:41:40.777

您应该使用 ListBox 的 SetItems 方法：

```
import wx

########################################################################
class MyPanel(wx.Panel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent)

        self.choices = ["George Lucas"]
        self.lbox = wx.ListBox(self, choices=self.choices)
        self.new_emp = wx.TextCtrl(self)
        addBtn = wx.Button(self, label="Add Employee")
        addBtn.Bind(wx.EVT_BUTTON, self.addEmployee)

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(self.lbox, 0, wx.ALL|wx.EXPAND, 5)
        sizer.Add(self.new_emp, 0, wx.ALL|wx.EXPAND, 5)
        sizer.Add(addBtn, 0, wx.ALL, 5)
        self.SetSizer(sizer)

    #----------------------------------------------------------------------
    def addEmployee(self, event):
        """"""
        emp = self.new_emp.GetValue()
        self.choices.append(emp)
        self.lbox.SetItems(self.choices)
        self.new_emp.SetValue("")

########################################################################
class MainFrame(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, title="Employee")
        panel = MyPanel(self)
        self.Show()

#----------------------------------------------------------------------
if __name__ == "__main__":
    app = wx.App(False)
    frame = MainFrame()
    app.MainLoop() 
```

# node.js - 手写笔无法在 Express 上运行

> ID：15623879
> 
> 赞同：2
> 
> 时间：2013-03-25T20:14:17.977
> 
> 标签：node.js, express, coffeescript, nib, stylus

我有一个在 Express 服务器上使用 Nib 和 Stylus 的项目，经过一些更改，从 .styl 到 .css 的编译过程不再起作用，我正在查看 Nib、Stylus 和 Express 的文档，但找不到回答问题，因为我的代码、文件目录和设置似乎没问题。但仍然没有编译。

代码：

```
express = require("express")
coffee = require("coffee-script")
stylus = require("stylus")
jade = require("jade")
nib = require("nib")

app = express.createServer()
port = process.env.PORT || 3000
app.use app.router
app.use express.methodOverride()
app.use express.bodyParser()
app.set "views", __dirname + "/views"
app.set "view engine", "jade"
app.use stylus.middleware(
    src: __dirname + "/src"
    dest: __dirname + "/public"
    compile: (str, path) ->
      stylus(str).set("filename", path).set("warn", true).set("compress", false).set("paths", [ require("stylus-blueprint") ]).use nib()
)  
app.listen port 
```

在查看文档、Github 问题后，我无法理解为了停止工作而进行了哪些更改。所以，我的问题是，我应该如何或寻找什么来尝试解决这个问题？

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:43:24.027

如果您提供错误输出/日志和 cakefile，这将很有用。

此外，您可能想考虑使用[connect-assets](https://github.com/TrevorBurnham/connect-assets)。[express-coffee 模板](https://github.com/twilson63/express-coffee)是一个很好的用法示例。

# xml - sql server 2012 中的 xml 问题

> ID：15623881
> 
> 赞同：0
> 
> 时间：2013-03-25T20:14:26.987
> 
> 标签：xml, sql-server-2012

我希望能够将 SQL 查询的输出用作 SQL Server 2012 中 XML 查询的参数。这是一个示例。

```
Declare @xml = (Select uniqueTaxID, taxName 
                from Taxes 
                where orderGroup = @someNumber 
                for xml path('Tax'), root('Taxes')) 
```

预期输出将为我提供订单的所有适用税款。可能有 1 种税或多种税。

示例输出：

```
<Taxes>
    <Tax>
        <uniqueTaxID>1</uniqueTaxID>
        <taxName>Some Tax</taxName>
    </Tax>
    <Tax>
        <uniqueTaxID>2</uniqueTaxID>
        <taxName>Some Other Tax</taxName>
    </Tax>
</Taxes> 
```

现在我有另一个简单的 SQL 查询

```
Select taxID, someItem, @xml.query('
    for $i in Taxes/Tax/uniqueTaxID
    return Taxes/Tax/taxName
    ') from someGroupOfItems 
```

不幸的是，它的编写方式，我会得到这两个`<taxName>`元素。我需要这是动态的。如果`taxID`是 1，那么我希望我的 XML 查询返回`Some Tax`，如果是 2，那么它会返回`Some Other Tax`。

我试过了：

```
Select taxID, someItem, @xml.query('
    for $i in Taxes/Tax/uniqueTaxID
    where $i = ' + taxID + '
    return $i') 
```

但这给了我错误

> XML 数据类型方法“query”的参数 1 必须是字符串文字。

如果我直接输入数字它可以正常工作，所以我知道它与我连接字符串有关

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:25:59.887

这是 marc_s 建议的一个版本，可以更直接地回答您问题的“使用 SQL 查询的输出”部分。要检索的 UniqueTaxID 的值（1 和 3）在此处的表中。

```
declare @xml XML = N'<Taxes>
    <Tax>
        <uniqueTaxID>1</uniqueTaxID>
        <taxName>Some Tax</taxName>
    </Tax>
    <Tax>
        <uniqueTaxID>2</uniqueTaxID>
        <taxName>Some Other Tax</taxName>
    </Tax>
    <Tax>
        <uniqueTaxID>3</uniqueTaxID>
        <taxName>Third Tax</taxName>
    </Tax>
</Taxes>';

WITH someGroup(taxID) AS (
  SELECT 1 UNION ALL SELECT 3
), Tax(uniqueTaxID,taxName) AS (
  SELECT
    x.value('(uniqueTaxID)[1]', 'int'),
    x.value('(taxName)[1]','nvarchar(max)')
  FROM @xml.nodes('/Taxes/Tax') as X(x) 
)
  SELECT
    g.taxID,
    t.taxName
  FROM Tax AS t
  JOIN someGroup AS g
  ON g.taxID = t.uniqueTaxID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:18:20.323

使用[sql:column()](http://msdn.microsoft.com/en-us/library/ms191214.aspx)从 XQuery 表达式中的表中访问值，您可以使用[value()](http://msdn.microsoft.com/en-us/library/ms178030.aspx)从 XML 中提取单个值。

```
select T.taxID,
       @xml.value('(
                   for $i in /Taxes/Tax
                   where $i/uniqueTaxID = sql:column("T.TaxID")
                   return $i/taxName
                   )[1]', 'nvarchar(50)') as taxName
from someGroupOfItems as T 
```

您也可以在没有 FLOWR 的情况下执行相同的操作。

```
select T.taxID,
       @xml.value('(/Taxes/Tax[uniqueTaxID = sql:column("T.TaxID")]/taxName)[1]', 'nvarchar(50)') as taxName
from someGroupOfItems as T 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:33:08.350

不确定我是否真的了解您要做什么-您`<taxName>`是否要根据给定的值从您拥有的 XML 中提取元素的`taxID`值？

如果是这样 - 然后尝试这样的事情（以您的`@XML`变量作为输入）：

```
DECLARE @TaxID INT = 1

;WITH CTE AS
(
    SELECT
        UniqueTaxID = TaxNode.value('(uniqueTaxID)[1]', 'int'),
        TaxName = TaxNode.value('(taxName)[1]', 'varchar(100)')
    FROM 
        @XML.nodes('/Taxes/Tax') AS XTbl(TaxNode)
)
SELECT TaxName
FROM CTE
WHERE UniqueTaxID = @TaxID 
```

我基本上将 XML“分解”回 CTE（公用表表达式）中的关系数据，然后`TaxName`根据`@TaxID`.

这确实引出了一个问题：如果您想最终从该 XML 中取回关系值，那么您到底为什么要转换为 XML .....似乎完全没有必要绕道....

# javascript - AJAX 请求完成后调用 PartialView 中定义的 JavaScript 函数？

> ID：15623884
> 
> 赞同：0
> 
> 时间：2013-03-25T20:14:37.813
> 
> 标签：javascript, asp.net-mvc, partial-views, ajax.beginform

这是我的部分观点：

```
<script type="text/javascript">
    function onComplete() { .... }
</script>
@using (Ajax.BeginForm( new AjaxOptions { HttpMethod = "POST", OnSuccess = "onComplete" })
{
    ...
    <input type="submit" value="Save"/>
} 
```

当我提交表单并收到响应时，我收到 JavaScript 错误：

```
ReferenceError: onComplete is not defined 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:24:59.147

找到解决方案：将函数声明为

```
window.onComplete(){...} 
```

并称之为

```
window.onComplete 
```

似乎函数有另一个范围。

# python - 我想知道python re lib中正则表达式匹配的最后一个索引

> ID：15623887
> 
> 赞同：1
> 
> 时间：2013-03-25T20:14:39.030
> 
> 标签：python, regex

```
import re
a = re.compile('myregex')
a.search(target_string) 
```

我正在寻找一种方法来获取可能匹配后下一个字符的索引。

我知道你可以得到一个组的最后一个位置，但是如果我的正则表达式包含的不仅仅是一个组，我想得到那个，还是我需要开始计算我的正则表达式字符串字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:17:03.373

`MatchObject`返回的有`.search()`一个[`.end()`方法](http://docs.python.org/2/library/re.html#re.MatchObject.end)；默认情况下，它返回*整个*正则表达式匹配的结束位置。

您还可以将方法传递给一个组以查找该特定组的终点，该`0`组是整个模式。

示范：

```
>>> import re
>>> a = re.compile('(my|your) regex')
>>> match = a.search('Somewhere in this string is my regex; not much different from your regex.')
>>> print match.end()
36
>>> print match.end(1)
30 
```

# c++ - Visual C++ 2010：如果我将“const”添加到一个比较对象，为什么“有符号/无符号不匹配”会消失？

> ID：15623889
> 
> 赞同：13
> 
> 时间：2013-03-25T20:14:48.087
> 
> 标签：c++, visual-studio-2010

我有以下简单的 C++ 代码：

```
#include "stdafx.h"
int main()
{
    int a = -10;
    unsigned int b = 10;
    //  Trivial error is placed here on purpose to trigger a warning.
    if( a < b ) {
        printf( "Error in line above: this will not be printed\n" );
    }
    return 0;
} 
```

使用 Visual Studio 2010（默认 C++ 控制台应用程序）编译，它`warning C4018: '<' : signed/unsigned mismatch" on line 7` **按预期**提供（代码有逻辑错误）。

但是如果我`unsigned int b = 10;`改成`const unsigned int b = 10;`警告就消失了！这种行为有什么已知的原因吗？`gcc`无论`const`.

**更新**

我可以从评论中看到很多人建议“它只是以某种方式进行了优化，所以不需要警告”。不幸的是，需要警告**，**因为我的代码示例有实际的逻辑错误仔细放置以触发警告：该`print`语句**将不会被调用**，无论它`-10`实际上小于`10`. 这个错误是众所周知的，“签名/未签名警告”正是为了找到这样的错误而引发的。

**更新**

我还可以从评论中看到，很多人在我的代码中“发现”了一个有符号/无符号逻辑错误并正在解释它。哪里不需要这样做 - 这个错误纯粹是为了触发警告，是微不足道的（`-10`被`(unsigned int)-10`认为是`0xFFFFFFFF-10`）并且问题与它无关:)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T21:40:43.833

这是一个 Visual Studio 错误，但让我们从不是错误的方面开始。

[当时适用的 C++ 标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf)的第 5 节注 9首先讨论了如果操作数具有不同位宽时该怎么办，然后再讨论如果它们相同但符号不同该怎么办：

> ...否则，如果无符号整数类型的操作数的等级大于或等于另一个操作数类型的等级，则将有符号整数类型的操作数转换为无符号整数类型的操作数的类型。

这是我们了解到比较必须在无符号算术中进行的地方。我们现在需要了解这对值 -10 意味着什么。

4.6 节告诉我们：

> 如果目标类型是无符号的，则结果值是与源整数一致的最小无符号整数（模 2 n 其中 n 是用于表示无符号类型的位数）。[注意：在二进制补码表示中，这种转换是概念性的，位模式没有变化（如果没有截断）。— 尾注] 3 如果目标类型是有符号的，则如果它可以在目标类型（和位域宽度）中表示，则值不变；否则，该值是实现定义的。

正如你所看到的，一个特定的相当高的值（4294967286，或 0xFFFFFFF6，假设`unsigned int`是一个 32 位数字）正在与 10 进行比较，因此标准保证它`printf`实际上永远不会被调用。

现在您可以相信我，在这种情况下，标准中没有要求进行诊断的规则，因此编译器可以自由地不发布任何内容。（事实上​​，有些人写`-1`的目的是产生一个全一的位模式。其他人用于迭代数组，这会导致和`int`之间的有符号/无符号比较。丑陋，但保证编译。）`size_t``int`

现在 Visual Studio 会“自愿”发出一些警告。

这会导致默认设置下已经出现警告（级别 3）：

```
int a = -10;
unsigned int b = 10;
if( a < b ) // C4018
{
    printf( "Error in line above: this will not be printed\n" );
} 
```

以下要求`/W4`获得警告。请注意，警告已重新分类。它从警告[C4018](http://msdn.microsoft.com/en-us/library/y92ktdf2%28v=vs.80%29.aspx)更改为警告[C4245](http://msdn.microsoft.com/en-us/library/e9s7thk1.aspx)。这显然是设计使然。破坏比较的逻辑错误几乎总是比看似适用于正-正比较但因正-负比较而崩溃的逻辑错误要小。

```
const int a = -10;
unsigned int b = 10;
if( a < b ) // C4245
{
    printf( "Error in line above: this will not be printed\n" );
} 
```

但是您的情况却有所不同：

```
int a = -10;
const unsigned int b = 10;
if( a < b ) // no warning
{
    printf( "Error in line above: this will not be printed\n" );
} 
```

而且没有任何警告。（好吧，`-Wall`如果你想确定，你应该重试。）这是一个错误。微软对此[表示](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/4fa4a020-384c-4928-8102-10bcc10b6c09/)：

> 感谢您提交此反馈。这是我们应该发出 C4018 警告的场景。不幸的是，鉴于我们现有的资源，这个特定问题的优先级不够高，无法在下一个版本中修复。

出于好奇，我使用 Visual Studio 2012 SP1 进行了检查，发现缺陷仍然存在 - 没有使用`-Wall`.

# javascript - 项目导入 Chrome+Codio 时不加载库

> ID：15623894
> 
> 赞同：0
> 
> 时间：2013-03-25T20:15:01.153
> 
> 标签：javascript, jquery-mobile, web-ide, codio

我刚刚将一个[工作的 JSfiddle 项目](http://jsfiddle.net/hugolpz/xp5vb/28/show/)迁移到 Chrome+Codio。我做了一个[精确的复制粘贴](https://d.codio.com/hugolpz/Censorship-zh/App/index.html)。它失败并显示错误消息：

```
<p>[blocked] The page at <a href="https://d.codio.com/hugolpz/Censorship-zh/App/index.html">https://d.codio.com/hugolpz/Censorship-zh/App/index.html</a> ran insecure content from <a href="http://maps.google.com/maps/api/js?sensor=false">http://maps.google.com/maps/api/js?sensor=false</a>. 
Uncaught ReferenceError: google is not defined index.html:51 
window.onload</p> 
```

它适用于 JSfiddle（Chrome、Firefox）和带有 Firefox 的 Codio。它确认 JS/HTML/CSS 是有效的。

它不适用于“Chrome + Codio.com”。谷歌地图 API 链接在 fiddle.net 上没问题，但被标记为“不安全”。

这个 Chrome-Codio 故障的根源是什么？

[3]：[汉字地址除外，但现在无所谓]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T20:15:01.153

**说明：**此问题是由 Chrome 引起的。当 Chrome 在安全网站 ( **https://Codio.com** ) 上时，它拒绝调用非安全 ( **http://** ) 外部资源。

* * *

**解决方案/解决方法1：**另外，而不是

```
<script src="http://mysite.org"></script> // which is forbidden by Chrome! 
```

而是使用：

```
<script src="//mysite.org"></script> 
```

* * *

**解决方案/解决方法 2：**我注意到 [1] Codio 项目可以在 https:// 和 http:// 网址上运行。因此，如果您的项目在运行时遇到麻烦：

```
https://d.codio.com/myName/myProject/App/ 
```

切换到非安全网址：

```
http://d.codio.com/myName/myProject/App/ 
```

并且所有外部资源都应该可以正常加载。

[1]：非常感谢 Joel Moss 的解释和提示！

# javascript - Firefox 无法识别已定义的对象（Firefox 扩展开发）

> ID：15623900
> 
> 赞同：0
> 
> 时间：2013-03-25T20:15:17.310
> 
> 标签：javascript, firefox, firefox-addon

我正在开发一个 Firefox 扩展（我是新手，所以请放轻松），我似乎遇到了一个非常烦人的问题，阻碍了我取得任何进展。

我有三个 .js 文件：`main.js`,`hello.js`和`awesome.js`一个 .xul 文件，`awesomeOverlay.xul`. `main.js`是这样的：

```
//main.js

if(typeof(MyExtension) === "undefined") {
    var MyExtension = {};
}

MyExtension.Main = {
    browser : null,

    init : function() {
        if("gBrowser" in window) {
            MyExtension.Main.browser = window.gBrowser;
            MyExtension.Main.browser.addEventListener("DOMContentLoaded", MyExtension.Main.onPageLoad, true);
            window.content.console.log("Yay, recognized the browser!");
    },

    onPageLoad : function(e) {
        var doc = e.originalTarget;
        var regex = /stackoverflow\.com/;
        if(regex.test(doc.location.href)) {
            window.content.console.log("Visiting stackoverflow!");
            alert("Loaded stackoverflow!");
        }

        e.originalTarget.defaultView.addEventListener("unload", function(e){MyExtension.Main.onPageUnload(e), true);
    },

    onPageUnload : function(e) {
        var regex = /stackoverflow\.com/;
        var doc = e.originalTarget;
        if(regex.test(doc.location.href)) {
            alert("Found a solution to your problem, huh? Great!");
        }
    }
}; 
```

在我的另外两个 .js 文件中，我有像`MyExtension.Hello = {...}`和之类的对象`MyExtension.Awesome = {...}`。问题是，当我加载 stackoverflow.com 时，我没有在控制台中收到任何警报或日志。我加载了 Scratchpad，将 Environment 上下文更改为“Browser”，并验证了我定义的对象是否存在`alert(typeof(MyExtension))`，它按预期返回“object”。当我尝试`alert(typeof(MyExtension.Main))`时，我得到“未定义”。事实上，我得到“未定义”的`alert(typeof(MyExtension.Main.*))`.

当我尝试检查其他两个文件（hello.js 和 awesome.js）中对象的类型时，它们被正确识别（即“函数”、“对象”等）。似乎 main.js 文件由于某种原因被忽略了。这就是我的 .xul 文件的定义方式：

```
<?xml version="1.0"?>
<?xml-stylesheet href="chrome://myextension/skin/myextension.css" type="text/css"?>
<overlay id="AwesomeOverlay" xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
    <script type="application/x-javascript" src="chrome://myextension/content/jquery.min.js" />
    <script type="application/x-javascript" src="chrome://myextension/content/main.js" />
    <script type="application/x-javascript" src="chrome://myextension/content/hello.js" />
   <script type="application/x-javascript" src="chrome://myextension/content/awesome.js" />
   <statusbar id="status-bar">
       <statusbarpanel id="myextensionAwesomeStatusBar" context="myextensionSB" class="shown" persist="class">
           <hbox id="myextensionHbox" class="shown" persist="class">
               <image id="awesomeIcon" tooltiptext="Awesome Extension \m/" class="shown" persist="class" />
           </hbox>
       </statusbarpanel>
   </statusbar>
</overlay> 
```

我已经验证 chrome.manifest 中的路径是正确的。这让我发疯，请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:23:09.480

由于`MyExtension.Main`在 中定义`main.js`，您可能想尝试

```
exports.MyExtension = MyExtension; 
```

in `main.js`，在 where`MyExtension.Main`被赋值之后的某个地方，并且

```
main = require("main"); 
```

在您调用的文件中`typeof(MyExtension.Main)`（因为属性`Main`在 中定义`main.js`）并以`typeof(main.MyExtensions.Main)`

这是假设您的所有 .js 文件都在该`lib`文件夹中。我不确定（如果）XUL 会如何影响这一点。我从来没有弄乱过 XUL；我比你自己更喜欢那种特定的技术。

# php - 标头已发送错误我正在使用 cURL php dompdf

> ID：15623906
> 
> 赞同：1
> 
> 时间：2013-03-25T20:15:23.943
> 
> 标签：php, curl, dompdf

我正在构建一些报告，我的代码在本地主机上运行良好，但在服务器上出现错误，我应该如何解决这个问题......

```
Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent (output started at /localhost/prepare.php:1) in /localhost/prepare.php on line 2
Unable to stream pdf: headers already sent 
```

这是prepare.php

```
<?php
session_start();
if(isset($_SESSION['usercode']) && isset($_GET['id']))
{
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, 'http://localhost/report/formats/'.$_GET['id'].'.php?id='.$_SESSION['usercode']);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    $st = curl_getinfo($ch, CURLINFO_HTTP_CODE);  
    $my_html = curl_exec($ch);
    if($st==200)
       $my_html="Oops! Something went wrong...$st";
    curl_close($ch);

    require_once("./domppdf/dompdf_config.inc.php");
    $dompdf = new DOMPDF();
    $dompdf->load_html($my_html);
    $dompdf->render();
    $dompdf->stream("report.pdf", array('Attachment'=>'0'));
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:21:12.437

出现此错误是因为您在开始会话之前已将 ANYTHING 输出到用户客户端（浏览器）。

从您的代码来看，我认为它是一个“字节顺序掩码”（也称为 BOM），通常用于确定多字节符号的第一个字节是 MSB 还是 LSB。

此代码在任何支持它的文本编辑器中都是不可见的，并且在那些不支持它的文本编辑器中将显示为带有问号的菱形。

如果您不知道是否启用了 BOM，请随时使用十六进制编辑器打开源文件并检查第一个字符是否已启用或`<?php`其他内容。

一个好的文本编辑器将允许您选择编码。`UTF8 without BOM`是个不错的选择，`Notepad++`在我看来是个不错的编辑器。

# sql-server - 一次创建登录并映射到所有数据库

> ID：15623908
> 
> 赞同：0
> 
> 时间：2013-03-25T20:15:25.990
> 
> 标签：sql-server, tsql

我正在尝试执行以下 tsql

```
USE [master]
GO
CREATE LOGIN UserTest WITH Password = 'hi'
GO

sp_msforeachdb @command1= "CREATE USER [UserTest] FOR LOGIN [UserTest]" 
```

重复出现以下错误（对于每个数据库）：

```
Msg 15023, Level 16, State 1, Line 1
User, group, or role 'UserTest' already exists in the current database. 
```

我对 sp_msforeachdb 的理解不正确吗？基本上，我正在尝试从现有登录名“UserTest”（用户映射）创建“UserTest”作为每个数据库上的用户，而不必单独为每个数据库编写代码。我是否以错误的方式处理这项任务？

**有点像 TSQL 的初学者。只是想更彻底地理解语言**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:56:10.380

请不要使用 sp_msforeachdb。它没有记录，不受支持，并且有一个我已经多次指出的错误，它实际上可以跳过数据库。我写了两个替代方案：

*   [制作更可靠、更灵活的 sp_MSforeachdb](https://www.mssqltips.com/sqlservertip/2201/making-a-more-reliable-and-flexible-spmsforeachdb/?utm_source=AaronBertrand)
*   [在 SQL Server 中的每个数据库的上下文中执行命令](https://www.mssqltips.com/sqlservertip/5694/execute-a-command-in-the-context-of-each-database-in-sql-server--part-2/?utm_source=AaronBertrand)

您应该做的是使用这些高级替代品之一，或者只是自己创建命令。您还应该检查用户是否已经存在，而不是仅仅在 SQL Server 上抛出一个潜在的错误。

```
DECLARE @sql NVARCHAR(MAX);
SET @sql = N'';

SELECT @sql = @sql + N'
IF NOT EXISTS (SELECT 1 FROM ' 
  + QUOTENAME(name) + '.sys.database_principals
  WHERE name = N''UserTest'')
    EXEC sys.sp_executesql N''USE ' + QUOTENAME(name) 
       + ';CREATE USER UserTest FOR LOGIN UserTest;'';'
FROM sys.databases
WHERE database_id > 4;

PRINT @sql; -- just to debug the first 8K

-- EXEC sys.sp_executesql @sql; 
-- uncomment the above line when you're happy with the output 
```

您还可以在那里添加错误处理，例如

```
DECLARE @sql NVARCHAR(MAX);
SET @sql = N'';

SELECT @sql = @sql + N'
IF NOT EXISTS (SELECT 1 FROM ' 
  + QUOTENAME(name) + '.sys.database_principals
  WHERE name = N''UserTest'')
BEGIN
  BEGIN TRY
    EXEC sys.sp_executesql N''USE ' + QUOTENAME(name) 
    + ';CREATE USER UserTest FOR LOGIN UserTest;'';
  END TRY
  BEGIN CATCH
    PRINT ''Did not work for ' + name + ';''
  END CATCH
END'
FROM sys.databases
WHERE database_id > 4;

PRINT @sql;

-- EXEC sys.sp_executesql @sql; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:49:43.543

该`?`值用作数据库名称的占位符，因此您的示例将是：

```
sp_msforeachdb @command1= 'USE [?]; CREATE USER [UserTest] FOR LOGIN [UserTest];' 
```

使用未记录的存储过程时，请注意[此处](https://sqlblog.org/2020/05/12/bad-habits-to-kick-relying-on-undocumented-behavior)记录的陷阱。

# php - 使用准备好的语句是最佳实践吗？

> ID：15623909
> 
> 赞同：0
> 
> 时间：2013-03-25T20:15:35.453
> 
> 标签：php, pdo, mysqli, prepared-statement

我知道这是防止 sql 注入的最佳方法，但我读到准备好的语句使对数据库的请求加倍。这对性能不利。

那么尽管如此，准备好的陈述是否被认为是最佳实践？还是有更好更安全的方法？

# c - 无法发现 echo 内核模块中的错误

> ID：15623911
> 
> 赞同：0
> 
> 时间：2013-03-25T20:15:40.210
> 
> 标签：c, linux, linux-kernel, driver

我正在尝试编写一个非常简单的 echo Linux 驱动程序。

驱动程序从命令行获取最多 250 个字符，并将其写入虚拟设备“mydev”。这再次从设备读回。前端和驱动代码贴在下面供参考。

问题是我能写但不能读。编译或分段错误没有错误。但是没有打印驱动程序读取的 printk 中的任何消息。我对正在发生的事情感到困惑。我可以在这里得到一些线索吗？

我只是为了更清楚起见共享代码副本：

***mydriver.c ：***

```
 #include <linux/module.h>
    #include <linux/fs.h>
    #include <asm/uaccess.h>

    MODULE_LICENSE("GPL");

    static int major;
    static char kbuf[250];

    static int dv_open(struct inode *inode, struct file *filp)
    {
        return 0; 
    }

    static int dv_close(struct inode *inode, struct file *filp)
    {
        return 0; 
    }

    static ssize_t dv_read(struct file *filp, char __user *buf, 
                    size_t sz, loff_t *fpos)
    {
        int r;
        int L;
        printk("READ:Entering\n");

        L = strlen(kbuf);
        r = copy_to_user(buf, kbuf, L);

        printk("READ:Ends\n");

        return L; 
    }
    static ssize_t dv_write(struct file *filp, const char __user *buf, 
                    size_t sz, loff_t *fpos)
    {
        int r, wr_sz;

        printk("WRITE:Entering\n");
        memset(kbuf,'\0', 250);
        if ( sz <= 250 ) {
           wr_sz = sz;
        } else {
           wr_sz = 250;
        }
        r = copy_from_user(kbuf, buf, wr_sz);

        printk("WRITE:Rx buf = %s\n", kbuf);

        return 0;

    }
    static struct file_operations dv_fops = {
        .open     = dv_open,
        .release  = dv_close,
        .read     = dv_read,
        .write    = dv_write,
        .owner    = THIS_MODULE,
    };

    int init_module(void)
    {
        major = register_chrdev(0, "dvdev", &dv_fops);
        if ( major < 0 ) {
           printk("Error in registering driver\n");
           return -1;
        }
        else printk("Success. major = %d\n", major);
        return 0;
    }

    void cleanup_module(void)
    {
        unregister_chrdev(major, "dvdev");
    } 
```

***myuserapp.c***

```
 #include <stdio.h>
    #include <fcntl.h>
    #include <string.h>

    static char buf[250];
    static char * wbuf;
    int main(int argc, char **argv)
    {
        int fd;
        int option;
        int nbr = 0, len;

        if ( argc != 2 ) {
           printf("usage: front <devName>\n");
           return -1;
        }
        fd = open("mydev", O_RDONLY | O_WRONLY);
        if ( fd < 0 ) {
           printf("Error opening file. %s does not exist\n", argv[1]);
           return -2;
        }

        wbuf = argv[1];
        len = strlen(wbuf);
        nbr = write(fd, wbuf, len); 
        printf("USR: Buf written = %s, nbr = %d\n", wbuf ,nbr);

        nbr = read(fd, buf, 250);
        printf("USR RD: %s", buf);

        close(fd);
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:34:30.110

您的代码至少有一个错误：

```
 fd = open("mydev", O_RDONLY | O_WRONLY); 
```

这是一个不恰当的`open()`调用。
的[手册页`open()`](http://linux.die.net/man/3/open)指定：

> 应用程序应在 oflag 的值中准确指定以下前三个值（文件访问模式）之一：
> 
> O_RDONLY 以只读方式打开。
> O_WRONLY 打开仅用于写入。
> O_RDWR 打开用于读取和写入。如果将此标志应用于 FIFO，则结果未定义。

您有一个包含两个值的表达式，而不是只指定一个。

> 我猜 O_RDONLY 和 O_WRONLY 是单独的位，所以它会像 O_RDONLY | O_WRONLY = 10|01 = 11 。读取位和写入位均已设置。

位值无关紧要，因为不允许组合这些值。
您似乎忽略了排除后缀“ONLY”。
RDONLY 表示“允许读取和禁止写入”。
WRONLY 表示“允许写入和禁止读取”。
“O_RDONLY | O_WRONLY”是一个逻辑矛盾。
如果要允许读写，则必须指定 O_RDWR。

并且 Mark Stevens 提供了正确的值和布尔算法来证明你的不正确的表达式不等同于 O_RDWR。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:56:38.143

锯末给出了正确的答案，但是您的代码中还有另一个问题。

如果您向设备写入 250 个字节，则缓冲区不会以空值终止。那么，在阅读的时候，`strlen`就会越过它，导致意想不到的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T05:34:22.997

对您的 write 函数的每次调用都会导致在缓冲区上调用 memset。这是您无法检索消息的根本原因。

# highcharts - ASP.NET WebRequest 到 Highcharts 导出服务器

> ID：15623919
> 
> 赞同：4
> 
> 时间：2013-03-25T20:16:05.820
> 
> 标签：highcharts, export, webrequest

我需要在 PDF 报告中包含一个 highcharts 图表。但是如何获得 export.highcharts.com 生成的图像/png？这就是我到目前为止所做的：

单击按钮时，将触发此 ajax 请求：

```
$.ajax({
   url: "Home/Teste",
   type: "POST",
   dataType: "html",
   data: { svgParam: myChart.getSVG() },
   success: function (data) {
       doStuff(data);
}}); 
```

在服务器上，我收到请求并按如下方式处理：

```
[HttpPost]
[ValidateInput(false)]
public void Teste(string svgParam)
{
    // Create a request using a URL that can receive a post. 
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://export.highcharts.com/");
    // Set the Method property of the request to POST.
    request.Method = "POST";

    // Create POST data and convert it to a byte array.
    string postData = string.Format("filename={0}&type={1}&width={2}&sgv={3}", "chart", "image/png", 1270, Server.UrlEncode(svgParam));

    byte[] byteArray = Encoding.UTF8.GetBytes(postData);

    // Set the ContentType property of the WebRequest.
    request.ContentType = "application/x-www-form-urlencoded; multipart/form-data";

    //User agent is based in a normal export.js request
    request.UserAgent = @"Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0";

    // Set the ContentLength property of the WebRequest.
    request.ContentLength = byteArray.Length;
    // Get the request stream.
    Stream dataStream = request.GetRequestStream();
    // Write the data to the request stream.
    dataStream.Write(byteArray, 0, byteArray.Length);
    // Close the Stream object.
    dataStream.Close();
    // Get the response.
    WebResponse response = request.GetResponse();

    HttpWebResponse webResponse = (HttpWebResponse)request.GetResponse();
    //This is here just to read the response.
    string msg;
    using (StreamReader sReader = new StreamReader(webResponse.GetResponseStream()))
    {
        msg = sReader.ReadToEnd();
    }
} 
```

svgParam 是一个 html 字符串，内容如下："

我在 asp.net 中得到这个 svgParam 没有问题。但是 export.highcharts.com 的响应总是一样的，就好像 te svg 没有发送一样：

```
<body>
    <div id="top">
        <a href="http://www.highcharts.com" title="Highcharts Home Page"
            id="logo"><img alt="Highcharts Home Page"
            src="resources/Highcharts-icon-160px.png" border="0"></a>
        <h1>Highcharts Export Server</h1>
    </div>
    <div id="wrap">
        <h3>Oops..,</h3>
        <p>The manadatory svg POST parameter is undefined.</p>
    </div>
</body> 
```

为了测试，我在我的应用程序中创建了另一个方法来接收这个 WebRequest，如下所示：

```
[HttpPost]
[ValidateInput(false)]
public void Teste2(string filename, string type, string width, string svg)
{
    string whereIsMySvg = svg;
} 
```

接收文件名、类型和宽度参数。但是 svg 是空的。我尝试编码，不编码，序列化为 json 字符串，更改内容类型......什么都没有，svg 参数永远不会到达目的地。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T05:15:52.357

如果您复制并粘贴了代码，并且这不是印刷错误，则您在发送到导出服务器的请求参数中拼错了“svg”。你有“sgv”。

# highcharts - Highcharts VU Meter Gauge 数字显示消失

> ID：15623922
> 
> 赞同：0
> 
> 时间：2013-03-25T20:16:17.633
> 
> 标签：highcharts

使用 VU 量表样本的一个有趣的小“怪癖”。当我尝试重新定位仪表窗格时，数字显示将消失。如果我保持位置 <= 100%，则显示将显示，任何 > 100% 并且数字显示消失。

我一再试图将显示器强制回到可以看到的位置，但没有运气。有任何想法吗？这是最新的测试小提琴：

[VU 仪表小提琴](http://jsfiddle.net/radi8/Z2s77/11)

调整元素很容易，使用窗格：部分移动显示窗格的整个仪表，使用数据标签：部分移动数字显示。

```
$(function () {
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        type: 'gauge',
        plotBorderWidth: 1,
        plotBackgroundColor: {
            linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
            stops: [
                [0, '#FFF4C6'],
                [0.3, '#FFFFFF'],
                [1, '#FFF4C6']
            ]
        },
        plotBackgroundImage: null,
        height: 200
    },

    title: {
        text: 'Efficiencies'
    },
    /***
       in order to move the gauge up or down in the pane, adjust the 'Y' element in
       the center array. Adjusting this above 100% (to move the gauge DOWN) 
       will cause the numeric display to disappear
    ***/
    pane: [{
        startAngle: -45,
        endAngle: 45,
        background: null,
        center: ['25%', '100%'],
        size: 200
    }, {
        startAngle: -45,
        endAngle: 45,
        background: null,
        center: ['75%', '105%'],
        size: 200
    }],                        

    yAxis: [{
        min: 0,
        max: 110,
        minorTickPosition: 'outside',
        tickPosition: 'outside',
        labels: {
            rotation: 'auto',
            distance: 20
        },
        plotBands: [{
            from: 0,
            to: 70,
            color: '#DF5353', // red
            innerRadius: '100%',
            outerRadius: '105%'
         }, {
            from: 70,
            to: 95,
             color: '#DDDF0D', // yellow
            innerRadius: '100%',
            outerRadius: '105%'
        }, {
            from: 95,
            to: 110,
            color: '#55BF3B', // green
            innerRadius: '100%',
            outerRadius: '105%'
        }],
        pane: 0,
        title: {
            text: '<span style="font-size:10px">OEE %</span><br/><span style="font-size:8px">Machine 001</span>',
            y: -30
        }
    }, {
        min: 0,
        max: 110,
        minorTickPosition: 'outside',
        tickPosition: 'outside',
        labels: {
            rotation: 'auto',
            distance: 20
        },
        plotBands: [{
            from: 0,
            to: 70,
            color: '#DF5353', // red
            innerRadius: '100%',
            outerRadius: '105%'
         }, {
            from: 70,
            to: 95,
             color: '#DDDF0D', // yellow
            innerRadius: '100%',
            outerRadius: '105%'
        }, {
            from: 95,
            to: 110,
            color: '#55BF3B', // green
            innerRadius: '100%',
            outerRadius: '105%'
        }],
        pane: 1,
        title: {
            text: '<span style="font-size:10px">Cycle Eff %</span><br/><span style="font-size:8px">Machine 001</span>',
            y: -30
        }
    }],

    plotOptions: {
        gauge: {
            /***
               Adjusting the position of the numeric display is also easy
               Change the y: component more negative move the display UP, 
               decreasing the value move the display DOWN
            ***/
            dataLabels: {
                enabled: true,
                x: 0,
                y: -120
            },
            dial: {
                radius: '110%'
            }
        }
    },
    series: [{
        data: [80],
        yAxis: 0
    }, {
        data: [80],
        yAxis: 1
    }]

},

// Let the music play
function(chart) {
    setInterval(function() {
        var left = chart.series[0].points[0],
            right = chart.series[1].points[0],
            leftVal, 
            //inc = (Math.random() - 0.5) * 30;
            inc1 = Math.random() * (30) + 70;
            inc2 = Math.random() * (30) + 70;

        leftVal =  left.y + inc1;
        rightVal = right.y + inc2; // / 3;
        if (leftVal < 0 || leftVal > 110) {
            //leftVal = left.y - inc;
            leftVal = 110 - inc1;
        }
        if (rightVal < 0 || rightVal > 110) {
            rightVal = 110 - inc2;
        }

        left.update(parseInt(leftVal),false);
        right.update(parseInt(rightVal), false);//, false);
        chart.redraw();

    }, 1500);

});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:42:24.880

如果您使用 dataLabels.crop = false 选项，它将显示出来。但是根据 API 描述，如果数据标签也在绘图区域之外，它也会显示出来，这可能是您不想要的。虽然 highcharts 的行为很奇怪，因为它查看的是系列是否在绘图区域之外，而不是隐藏标签时数据标签所在的位置，所以我同意这是一个错误。

[http://api.highcharts.com/highcharts#plotOptions.series.dataLabels.crop](http://api.highcharts.com/highcharts#plotOptions.series.dataLabels.crop)

# r - 从R中的文本文件中提取

> ID：15623924
> 
> 赞同：0
> 
> 时间：2013-03-25T20:16:24.027
> 
> 标签：r

我需要将两个具有以下格式的 .txt 文件与 R 进行比较：

file1 中的行：

```
1-11!AIVDM,1,1,,B,11b4N?@P?w<tSF0l4Q@>4?wp1`Oo,0*3D
 1347204643
2-12$GPRMC,153102,A,6300.774,N,05238.627,W,12.9,186,090912,30,W*79
 1347204664 
```

（由于某种原因，时间（1347204643）在单独的行中）

file2 中的行：

```
#1:1347204643:11!AIVDM,1,1,,B,11b4N?@P?w<tSF0l4Q@>4?wp1`Oo,0*3D
#2:1347204664:12$GPRMC,153102,A,6300.774,N,05238.627,W,12.9,186,090912,30,W*79 
```

我只对验证两个文件中是否存在相同的 ID（例如，此处的 1 和 2）感兴趣（如果 file1 中存在的 ID 也存在于 file2 中）。

有人可以帮我弄这个吗？非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:30:30.737

你可以这样做：

首先，您使用读取 2 个两个文件`readLines`

```
ll1 <- readLines(textConnection('#1:1347204643:11!AIVDM,1,1,,B,11b4N?@P?w<tSF0l4Q@>4?wp1`Oo,0*3D
#2:1347204664:12$GPRMC,153102,A,6300.774,N,05238.627,W,12.9,186,090912,30,W*79'))
ll2 <- readLines(textConnection('1-11!AIVDM,1,1,,B,11b4N?@P?w<tSF0l4Q@>4?wp1`Oo,0*3D
 1347204643
2-12$GPRMC,153102,A,6300.774,N,05238.627,W,12.9,186,090912,30,W*79
 1347204664')) 
```

做一些治疗

```
#Remove '#` fom the first files
ll1 <- gsub('#','',ll1)
#Take only the odd lines from the second file
ll2 <- ll2[c(TRUE,FALSE)] 
```

使用提取每行的索引`substr`

```
ll1 <- substr(ll1,1,1)
ll2 <- substr(ll2,1,1) 
```

现在你有这 2 个列表：

```
ll1
[1] "1" "2"
> ll2
[1] "1" "2 
```

要进行比较，您可以使用`match`

```
match(ll1,ll2)
[1] 1 2 
```

# c++ - 在字符串/字符数组中捕获串行输入

> ID：15623925
> 
> 赞同：0
> 
> 时间：2013-03-25T20:16:26.970
> 
> 标签：c++, c, arduino, gsm

我在 Arduino Uno 和 TC35 GSM 模块之间有一个软件串行链接，用于发送和接收 SMS 消息。发送 SMS'/calls 不是问题，因为它是向 GSM 模块发送适当的 AT 命令的问题。但是我希望使用 AT+CMGR=1 命令（检查存储在 SIM 卡上的第一条 SMS）来检查是否有任何消息并将消息存储为 char 数组，以便我可以检查 SMS 是否包含单词“开”或“关”来激活 LED。

AT+CMGR=1 命令应返回以下内容：

```
AT+CMGR=1
+CMGR: "REC READ","+3538xxxxxxxx",,"13/03/23,14:29:37+00"
Set

OK 
```

但是在下面的方法中，当我打印“数据”时，它只会返回：

消息包含：

在

任何指针将不胜感激。

```
void checkMessage() {

    gsmSerial.println("AT+CMGR=1");    //Reads the first SMS

    for (x=0;x < 255;x++){            
        data[x]='\0';                        
    } 
    x=0;
    do{
        while(gsmSerial.available()==0);
        data[x]=gsmSerial.read();  
        x++;           
        if(data[x-1]==0x0D&&data[x-2]=='"'){
            x=0;
        }
    }while(!(data[x-1]=='K'&&data[x-2]=='O'));

    data[x-3]='\0';        //finish the string before the OK

    Serial.println("\r\nMessage contains: \r");
    Serial.println(data);    //shows the message

    delay(1000);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:26:16.967

我不明白你这样做的意图：

```
if(data[x-1]==0x0D&&data[x-2]=='"'){ 
    x=0; 
} 
```

每当您点击包含尾随引号和换行符的行时，您似乎都在丢弃数据并读取新数据。所以对感兴趣的命令的响应被丢弃了。我没有测试过它，但我认为如果你删除这三行它会起作用。

我还应该提到这一点，`[x-1]`并且在缓冲区`[x-2]`之前引用内存。`data`这是一种非常糟糕的做法，可能并且会导致未定义的行为。当计算结果为正值时，您应该只检查索引减去某个值。负数组索引*将*在数组开始之前访问内存。

# c# - 全新安装 Visual Studio 后生成错误

> ID：15623926
> 
> 赞同：3
> 
> 时间：2013-03-25T20:16:30.970
> 
> 标签：c#, visual-studio-2010

我刚刚重新安装了 Visual Studio 2010 Premium，当我加载一个项目时，我收到了这个错误。

> 尝试为 IDE 的进程内编译器设置“References”参数时出现问题。对 COM 组件的调用已返回错误 HRESULT E_FAIL。

当我将它加载到其他人的 Visual Studio 2010 副本上时，他们没有遇到这个问题。任何想法是什么原因造成的？我尝试将 C:Program Files 中的 References 文件夹复制到 C:\Program Files(x86)，但这没有帮助。

# jsf - 我在哪里可以找到每个 JSF 组件如何与页面生命周期交互的解释/文档

> ID：15623933
> 
> 赞同：1
> 
> 时间：2013-03-25T20:16:53.640
> 
> 标签：jsf, page-lifecycle, uicomponents

通常，当使用 JSF 的 UI 组件或它的第 3 方组件库之一时，我很难找到解释这些标记的属性将在生命周期中的哪个位置起作用的文档。

假设我想使用

```
<h:selectOneMenu valueChangeListener="#{myBean.myMethod1}" ... /> 
```

或者

```
<h:commandButton action="#{myBean.myMethod2}" actionListener="#{myBean.myMethod3}" ... /> 
```

我在哪里可以找到有关在 JSF 生命周期中分别调用 、`valueChangeListener`the`action`或 the的信息？`actionListener`

请理解，这些只是示例。当我不知道何时确切调用其方法时，我试图避免为每个组件的每个属性使用 StackOverflow。

如果不存在这样的文档（？？），您建议使用哪些调试技术来逐个解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:43:44.700

关于标准 JSF 属性，您可以在[JSF 规范](http://jcp.org/aboutJava/communityprocess/final/jsr314/index.html)等中找到相关信息。该文档在第 2.5.1.3 章中关于验证的内容如下：

> 转换后的值被推送到组件的 setValue() 方法中，`ValueChangeEvent`如果值发生更改，则触发 a。

*（因此，它在转换/验证结束和设置本地值时触发）*

以及第 7.3 章中关于应用程序操作的以下内容：

> 应用程序操作是某个 Java 类上的应用程序提供的方法，它`ActionEvent`在请求处理生命周期的应用请求值或调用应用程序阶段（取决于 ActionSource 实例的即时属性）发生时执行某些应用程序指定的处理发起事件）。

以下相关问题也可能有助于更好地理解它：

*   [何时使用 valueChangeListener 或 f:ajax 监听器？](https://stackoverflow.com/questions/11879138/when-to-use-valuechangelistener-or-fajax-listener/11883021#11883021)
*   [action 和 actionListener 的区别](https://stackoverflow.com/questions/3909267/differences-between-action-and-actionlistener/3909382#3909382)

至于第 3 方组件库，请查看其标签文档或用户指南。但通常他们不使用自定义事件，而只是标准 JSF 事件或标准 ajax/HTML DOM 事件的抽象（因此需要基本的 ajax/HTML 知识才能开始）。

至于调试，最简单的方法是在被调用的方法中放置一个断点并查看调用堆栈和/或命中顺序。Mojarra 为每个阶段使用了一个非常自我记录的类，就像`ProcessValidationsPhase`它应该清楚地显示在调用堆栈之后的某个地方`FacesServlet#service()`。您还可以记录/打印`FacesContext#getCurrentPhaseId()`甚至调用`Thread#dumpStack()`和读取日志中的堆栈跟踪并手动浏览相关的类。

# java - 在 DatagramSocket 接收时，Android onTouchEvent 将不起作用

> ID：15623939
> 
> 赞同：0
> 
> 时间：2013-03-25T20:17:10.063
> 
> 标签：java, android, adb

我试图让我的用户在屏幕上移动一个块，同时还监听 DatagramSocket 上的连接，这是我的 onTouchEvent

```
public boolean onTouchEvent( MotionEvent event )
{
    if ( event.getAction() == MotionEvent.ACTION_DOWN )
    {
        if( event.getY() > getHeight() - 50 )
        {
            gameState.setRunning( false );
            ((Activity)getContext()).finish();
        }
        else
        {
            touched = true;
            Log.d(TAG, "Coords: x=" + event.getX() + ",y=" + event.getY());
        }
        checkCollisions( event.getX(), event.getY() );
    }

    if ( event.getAction() == MotionEvent.ACTION_MOVE )
    {
        checkCollisions( event.getX(), event.getY() );
    }

    if ( event.getAction() == MotionEvent.ACTION_UP ) 
    {
        touched = false;
    }
    return true;

} 
```

这是我的服务器代码

```
public void run()
{
    Log.d(TAG, "Ip address used:" + getLocalIPAddress() );
    while( true )
    {
        //Receive some data
        byte[] buf = new byte[256];
        DatagramPacket packet = new DatagramPacket( buf, buf.length );
        try 
        {
            socket.receive( packet );
        } 
        catch (IOException e) 
        {
            Log.d(TAG, "Error with receiving data");
            e.printStackTrace();
        }

        String data = new String( buf, 0, packet.getLength() );

        Log.d(TAG, "Data received was :" + data);

    }
} 
```

现在我的服务器工作正常，但是当服务器等待连接时，客户端不能做任何事情，现在我知道可以启动一个线程，但这不会仍然阻塞 onTouchEvent 吗？

帆布

更新

我使用 AsyncTask 将运行实现为 doInBackground，它现在可以正常工作，没有问题，我可以使用我的应用程序并等待客户端连接，这应该可以正常工作，为帮助的人干杯。

帆布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:49:55.463

在Android中，每个[`View`](http://developer.android.com/reference/android/view/View.html)相关的方面都应该在主线程，即UI线程中处理。耗时、繁重的计算或简单的阻塞任务应保留在另一个线程中，以避免用户界面被冻结。

注意保持你的用户界面流畅和响应是很重要的。如果你不这样做，[`ActivityManager`](http://developer.android.com/reference/android/app/ActivityManager.html)最终肯定会弹出一个警告框，询问用户他是否想关闭你的应用程序，因为它没有正确响应他的交互。这称为`ANR`（应用程序未响应）。

您可能想阅读这篇[非常好的文章](http://developer.android.com/training/articles/perf-anr.html)，讨论每个应用程序应保证的*响应能力。*它由 Google Android 团队编写，包含*许多*宝贵的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:31:58.803

我需要比评论更多的空间......

关键点：创建类不会创建线程，除非它们是线程扩展类（`AsyncTask`、`Thread`等）。

通常，对于您的应用程序，服务器将在一个线程中运行，游戏逻辑在另一个线程中运行，图像更新程序在第三个线程中，当被告知有新内容要显示时，UI 线程将从第三个线程中刷新显示。

[http://www.javacodegeeks.com/2011/07/android-game-development-basic-game_05.html](http://www.javacodegeeks.com/2011/07/android-game-development-basic-game_05.html)中给出了类似方法的一个示例。我建议以此为起点，并在类似的基础上添加一个额外的服务器线程，这应该可以让事情顺利进行。

对不起，如果我告诉你一些你已经知道的事情，但安全总比抱歉好。

# android - 如何自动自动对焦Android相机？

> ID：15623944
> 
> 赞同：55
> 
> 时间：2013-03-25T20:17:19.570
> 
> 标签：android, android-camera

我想在相机静止后立即自动对焦 Android 相机。我正在寻找教程或示例如何做到这一点，或者至少是小示例，以显示我可以使用哪些类来挂钩此类事件。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2014-04-24T11:25:20.497

对我来说，这是一种享受：

```
//set camera to continually auto-focus
Camera.Parameters params = c.getParameters();
//*EDIT*//params.setFocusMode("continuous-picture");
//It is better to use defined constraints as opposed to String, thanks to AbdelHady
params.setFocusMode(Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE);
c.setParameters(params); 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2015-02-08T01:03:47.290

尝试使用`Camera.Parameters.FOCUS_MODE_CONTINUOUS_VIDEO`或`Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE`。见下文：

```
Camera.Parameters params = camera.getParameters();
if (params.getSupportedFocusModes().contains(
    Camera.Parameters.FOCUS_MODE_CONTINUOUS_VIDEO)) {
  params.setFocusMode(Camera.Parameters.FOCUS_MODE_CONTINUOUS_VIDEO);
}
camera.setParameters(params); 
```

在尝试使用之前测试手机是否支持您选择的模式很重要，否则`setParameters()`会引发运行时异常。（编辑代码现在可以正常工作）

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-11-30T18:45:14.230

以下代码对我有用。

设置自动对焦（预览类）：

```
Parameters params = camera.getParameters();
params.setFocusMode(Parameters.FOCUS_MODE_AUTO);
//some more settings
camera.setParameters(params); 
```

如果自动对焦准备好（活动类），请调用相机拍摄照片：

```
public void butClick(View v){
    preview.camera.autoFocus(new AutoFocusCallback() {
        public void onAutoFocus(boolean success, Camera camera) {
            if(success){
                camera.takePicture(shutterCallback, rawCallback, jpegCallback);
            }
        }
    });
} 
```

获取图片（活动课）：

```
PictureCallback jpegCallback = new PictureCallback() {
    public void onPictureTaken(byte[] data, Camera camera) {
        //do something
    }
}; 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-25T21:01:04.963

看起来你应该像这里讨论的那样[连续自动对焦。](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#FOCUS_MODE_CONTINUOUS_VIDEO)

这里有个[问题](https://stackoverflow.com/questions/5878042/android-camera-autofocus-on-demand)可以参考。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-06T11:26:47.400

这非常适合预览回调：

```
Camera.Parameters parameters = camera.getParameters();
if (parameters.getSupportedFocusModes().contains(
        Camera.Parameters.FOCUS_MODE_CONTINUOUS_VIDEO)) {
    parameters.setFocusMode(Camera.Parameters.FOCUS_MODE_CONTINUOUS_VIDEO);
}
camera.setParameters(parameters); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-02T11:03:57.387

你可以试试代码：

```
ShutterCallback _pfnShutterCallback = new ShutterCallback() {

        @Override
        public void onShutter() {
            // TODO Auto-generated method stub

        }

    };

    PictureCallback _pfnRawPictureCallback = new PictureCallback() {

        @Override
        public void onPictureTaken(byte[] data, Camera camera) {
            // TODO Auto-generated method stub

        }
    };

    private AutoFocusCallback _pfnAutoFocusCallback = new AutoFocusCallback() {

        @Override
        public void onAutoFocus(boolean success, Camera camera) {
            // TODO Auto-generated method stub
            camera.autoFocus(null);
            camera.takePicture(_pfnShutterCallback, _pfnRawPictureCallback,
                    mPicture);

        }
    };
    private PictureCallback mPicture = new PictureCallback() {

        public void onPictureTaken(byte[] data, Camera camera) {
            new SavePhotoTask().execute(data);
            camera.startPreview();

        }
    };
class SavePhotoTask extends AsyncTask<byte[], String, String> {
// Process save file image
} 
```

通话捕捉：`mCamera.autoFocus(autoFocusCallback);`

您可以参考： [http ://android-er.blogspot.com/2011/01/start-camera-auto-focusing-autofocus.html](http://android-er.blogspot.com/2011/01/start-camera-auto-focusing-autofocus.html)

# php - session_set_cookie_params() 指向错误的域

> ID：15623949
> 
> 赞同：0
> 
> 时间：2013-03-25T20:17:31.990
> 
> 标签：php, session

当我想设置会话 cookie 时，我遇到了一些非常奇怪的错误。

如果我使用以下规则：

```
session_set_cookie_params(0, '/', $_SERVER['HTTP_HOST'], false, true);
//$_SERVER['HTTP_HOST'] resolves into "jscripting.nl" 
```

它总是会放一个“。” 在 url 前面，它将始终使我的 session_id 可以在我的所有子域上访问，这是一个问题，因为我在我的一个子域上开发并且 session_id 可能会相互干扰。

是我做错了什么还是我的服务器设置有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:49:34.070

`$_SERVER['HTTP_HOST']`与服务器设置无关，它来自客户端发出的请求的 Host 标头。

如果要使用在服务器端配置的服务器名称，通常的方法是使用`$_SERVER['SERVER_NAME']`，但在[某些情况下](https://stackoverflow.com/questions/1459739/php-serverhttp-host-vs-serverserver-name-am-i-understanding-the-ma/1461430#1461430)也会受到主机头的影响。

编辑：显然，域的任何值都将默认附加一个点，因此它将包括任何子域，并且使其仅应用于当前域的唯一有效方法是不设置参数或使用原始标头设置 cookie . [在这个线程](https://stackoverflow.com/questions/348282/php-cookie-domain-subdomain-control)的主题上查看更多信息。

`null`您可以通过设置域名参数使cookie httponly 仍然在您的情况下工作。

# mysql - NOW 函数在我的查询中不起作用

> ID：15623950
> 
> 赞同：0
> 
> 时间：2013-03-25T20:17:33.360
> 
> 标签：mysql

我的 NOW 功能没有按我想要的方式工作。我只想简单地查找超过今天日期的日期。

这是我的查询。

```
SELECT * 
FROM   `trade_show_inventory` 
       LEFT JOIN `trade_show_reserved` 
              ON `trade_show_inventory`.`id` = `trade_show_reserved`.`productid` 
WHERE  `trade_show_inventory`.`quantity` > 0 
        OR `trade_show_reserved`.`datereserved` 
           + INTERVAL 5 day <= '2013-03-31' 
           AND `trade_show_reserved`.`datereserved` > Now() 
```

编辑：

我将查询更改为此，但它仍然无法正常工作。还在努力。。

```
 $date = date('Y-m-d');
    $sql = "SELECT * FROM `trade_show_inventory` LEFT JOIN `trade_show_reserved`
    ON `trade_show_inventory`.`ID` = `trade_show_reserved`.`ProductID`
    WHERE (`trade_show_inventory`.`Quantity` > 0)
    or (`trade_show_reserved`.`DateReserved` + INTERVAL 5 DAY <= '$setupStart' and
           `trade_show_reserved`.`DateReserved` > '2013-03-25')"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:19:29.977

好吧，您的`where`子句解析如下：

```
WHERE (`trade_show_inventory`.`Quantity` > 0) or
      (`trade_show_reserved`.`DateReserved` + INTERVAL 5 DAY <= '2013-03-25' and
       `trade_show_reserved`.`DateReserved` > NOW()
      ) 
```

如果日期是 2013-03-25 之前的五天，那么它不可能是未来（至少从今天开始）。

在子句周围加上括号`where`以获得您想要的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:21:37.533

NOW() 不返回日期......这是一个完整的时间戳：

```
mysql> select NOW();
+---------------------+
| NOW()               |
+---------------------+
| 2013-03-25 17:20:06 |
+---------------------+
1 row in set (0.00 sec) 
```

尝试将[DATE 函数](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date)包装在它周围：

```
mysql> select DATE(NOW());
+-------------+
| DATE(NOW()) |
+-------------+
| 2013-03-25  |
+-------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T20:22:55.093

`NOW()`返回当前日期和时间。

您可能希望使用`DATE()`它返回没有时间的日期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T20:23:15.467

NOW() 函数使用时间戳，我认为您应该首先将其转换为您需要的日期格式。

# java - Java：Savitch 书中示例中的空指针异常？

> ID：15623951
> 
> 赞同：-1
> 
> 时间：2013-03-25T20:17:36.033
> 
> 标签：java

是的，我已经阅读了 Stackoverflow 上关于 NPE 的优秀解释，并且我理解了它们的意思。然而，我在该教科书的一个示例练习中发现（我想我发现）了一个关于这个 NPE 的问题，事实上，我很久以前在哈佛使用过。

它是关于引用变量 String line = null; 正如解释所说，没有对象被创建，而它后来被尝试用作这样的对象（所以我认为），更准确地说，当 line = inputStream.nextLine(); 时尝试被访问。这是代码，问题是如何解决这个问题。我曾尝试实例化一个对象，但......没有奏效。

```
package test;

import java.util.Scanner;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.PrintWriter;
import java.io.FileOutputStream;

public class Test
{
    public static void main(String[] args) {
        Scanner inputStream = null;
        PrintWriter outputStream = null;
        try {
            inputStream = new Scanner(new FileInputStream("original.txt"));
            outputStream = new PrintWriter(
            new FileOutputStream("numbered.txt"));
        } catch (FileNotFoundException e) {
            System.out.println("Problem opening files.");
            System.exit(0);
        }
        String line = null;
        int count = 0;
        while (inputStream.hasNextLine()) {
            line = inputStream.nextLine();
            count++;
            outputStream.println(count + " " + line.toString());
        }
        inputStream.close();
        outputStream.close();
    }
} 
```

是的，我试图运行它。我将代码复制并粘贴到 Netbeans 7.3 上新创建的项目中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T20:19:43.320

`line = inputStream.nextLine( );`不尝试访问任何对象`line`：它为变量赋值`line`。因此，它不需要 line 是 not `null`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T20:19:48.730

```
line = inputStream.nextLine( ) 
```

为 赋值`line`。它不会尝试读取 的当前值`line`，特别是通过尝试调用它的方法，所以我没有看到这里发生 NPE。`line`在这一点上很好`null`，因为它的值被赋值覆盖了。

您应该尝试通过实际运行此代码来证明您的怀疑！

# .net - 如何部署现在使用任务并行库 backport 的 .net 3.5 应用程序

> ID：15623954
> 
> 赞同：2
> 
> 时间：2013-03-25T20:17:47.327
> 
> 标签：.net, .net-3.5, task-parallel-library, backport

我正在尝试推出现有 .net 3.5 应用程序的新版本，该应用程序现在使用 .net 3.5 的任务并行库反向端口。我知道我需要将 System.Threading.dll 分发给用户（版本 1.0.2856.102），但我不确定该放在哪里。我以为只要把它放在与可执行文件相同的目录中就可以了，但我仍然遇到异常。我需要在用户的机器上做一些特别的事情来让它识别这个 dll 吗？

这是一个例外：

```
 System.IO.FileNotFoundException Message:Could not load file or assembly 'System.Threading, Version=1.0.2856.102 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:21:08.173

看起来是用户错误。用户让我相信他们将 dll 放在应用程序目录中，但他们没有。将它放在应用程序目录中可以解决此问题。

# c# - 创建创建另一个可以重载的类的类（如 excel - Thisworkbook.Worksheets）

> ID：15623956
> 
> 赞同：1
> 
> 时间：2013-03-25T20:17:56.550
> 
> 标签：c#

在 Excel 对象模型中，“ **Thisworkbook** ”是一个包含“ **Worksheets** ”类的类，可以用索引或工作表名称**重载。**此外，“ **Worksheets** ”类还具有一些属性/方法，可以在调用/不调用构造函数的情况下调用（默认）。

*   例如 MsgBox ThisWorkbook.Worksheets(1).Name **'<-- by (int)**
*   例如 MsgBox ThisWorkbook.Worksheets("Sheet1").Name **'<- by (string)**
*   例如 Msgbox Thisworkbook.Worksheets.Count '<- **'count 属性**

如何在**C#**中创建这样的类，其中包含另一个类并且可以重载？我尝试在第一类中创建第二类的公共变量，但我只能调用默认构造函数（或其他 - 但一次只能调用一个）

```
class A
{
    public B b = new B(); // <-- this is 1st constructor but how to overload ?
}

class B
{
    public B() // Default Constructor
    {
    }
    public B(int i) // Constructor 2
    {
    }
    public B(string s) // Constructor 3
    {
    }
    public int Count // Property
    {
        get { return 0; }
    }
}

//------------------------------------------------------------

class Main()
{

   A a = new A();
   a.b.Count(); // <-- THIS WORKS
   // a.b(1).Name; <-- HOW TO, USING THE SAME CLASS?
   // a.b("A").Name; <-- HOW TO, USING THE SAME CLASS?
} 
```

我知道我没有创建一个对象数组——在这个例子中可以返回 1 或“A”，但我只需要这个概念（你猜对了吗？）。我也见过一些使用 List 的例子，但我真的很想知道如何在 C# 中实现这样的对象层次结构......（如果这是一个错误的问题，请原谅）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:20:19.333

你误解了运营商。

您看到的是在类上定义的**索引运算符**`Worksheets`。
在 C# 中，这将被称为`a.b[1]`or `a.b["2"]`。

你这样定义它：

```
public SomeType this[int index] { get { ... } }
public SomeType this[string index] { get { ... } } 
```

# ios - UITabBarController 第一眼就偏移内容

> ID：15623958
> 
> 赞同：1
> 
> 时间：2013-03-25T20:18:02.357
> 
> 标签：ios, objective-c, xcode, cocoa-touch, uitabbarcontroller

我遇到了问题，`UITabBarController`因为我对第一个视图的第一个视图`UIViewController`与底部偏移了大约 20 个像素。每当我切换和/或返回第一个视图控制器（相同的实例，未释放）时，它都很好。这只是第一次见面。

**我的步骤：**

1.  我正在分配和初始化一个`UITabBarController`
2.  我正在分配和初始化 3 个实例`UIViewController`
3.  我将`viewControllers`属性设置为上述 3 项的数组

**我的代码：**

```
- (void)viewDidLoad {
    [super viewDidLoad];
    // Allocate and initialize view controllers
    self.debtsViewController = [[DebtsViewController alloc] init];
    self.debtsViewController.title = NSLocalizedString(@"Debts", nil);
    self.debtsViewController.tabBarController = self;
    self.conclusionsViewController = [[ConclusionsViewController alloc] init];
    self.conclusionsViewController.title = NSLocalizedString(@"Entries", nil);
    self.conclusionsViewController.tabBarController = self;
    self.settingsViewController = [[SettingsViewController alloc] init];
    self.settingsViewController.title = NSLocalizedString(@"Settings", nil);
    // Assign to tabBarController
    self.viewControllers = [NSArray arrayWithObjects:self.debtsViewController, self.conclusionsViewController, self.settingsViewController, nil];
} 
```

有任何想法吗？

截图：[http](http://cl.ly/image/2E0S001d0Q2x) ://cl.ly/image/2E0S001d0Q2x （注意上方的黑色空间`UITableViewController`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T09:22:37.930

我解决了这个问题。

```

```
[tab setSelectedIndex:1];
[tab setSelectedIndex:0]; 
```

```

您可以在 tabbarcontroller 初始化后通过切换标签栏手动重置偏移量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:34:59.300

看了一眼你的截图让我想到，实际上你应该`UINavigationControllers`在`UITabBarViewController`. 他们的导航栏将（几乎）看起来相似，但它将是 3 个单独的实例。“设置”与“债务”有什么共同点？为什么他们会共享相同的导航？

使用的重点`UITabBarViewController`是拥有应用程序的独立部分。我强烈推荐你[苹果的指南。](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Introduction.html#//apple_ref/doc/uid/TP40011313)

# ios - 从Objective-C中的文件读取数据，如何？

> ID：15623959
> 
> 赞同：0
> 
> 时间：2013-03-25T20:18:04.753
> 
> 标签：ios, objective-c, file-io

我正在尝试开发一个 iOS 应用程序，它允许用户输入一个单词然后按下按钮来获取单词的定义

实际上我有一个文件，其中包含单词及其定义，例如

```
Apple , the definition 
orange , the definition 
```

我写了代码，但我不知道为什么它不起作用

```
#import "ViewController.h"

NSString *readLineAsNSString(FILE *file);

@interface ViewController ()

@end

@implementation ViewController
@synthesize text;
@synthesize lab;
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)butt:(id)sender {
    FILE *file = fopen("1.txt", "r");
    NSString *a = text.text ;
    bool found =FALSE;

    while(!feof(file)|| !found )
    {
      NSString *line = readLineAsNSString(file);
        if ((a= [[line componentsSeparatedByString:@","] objectAtIndex:1])) {
            lab.text = [[line componentsSeparatedByString:@","] objectAtIndex:0];
        }

    fclose(file);
    }
}

@end 
```

谁能帮我找出问题所在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:24:42.907

恕我直言，实现此目的的一种简单方法是通过 plist。

在这里，一个小例子来实现你想要的。

**1）创建您的 plist 文件。**

在您的项目中，转到“添加新文件”。在左列中，在 iOS（例如）下，选择“资源”。在主面板中选择“属性列表”文件。使用“Defs”之类的名称保存。

您的 plist 应如下所示。

![在此处输入图像描述](../Images/ad7fcf4e6d0b09b5ec9f821213f80604.png)

**2）读取plist文件**（代码中的注释）

```
- (void)readDefinitionsFile
{
    // grab the path where the plist is located, this plist ships with the main app bundle
    NSString* plistPath = [[NSBundle mainBundle] pathForResource:@"Defs" ofType:@"plist"];

    // create a dictionary starting from the plist you retrieved
    NSDictionary* definitions = [NSDictionary dictionaryWithContentsOfFile:plistPath];

    // JUST FOR TEST PURPOSES, read the keys and the values associated with that dictionary
    for (NSString* key in [definitions allKeys]) {
        NSLog(@"definition for key \"%@\" is \"%@\"", key, [definitions objectForKey:key]);
    }
} 
```

**一些笔记**

上面一个简单的例子说明了如何使用 plist。它没有提供一个完整的例子来实现你想要的。基于此，您将能够实现您的目标。

您应该需要一个属性来引用您检索到的字典。因此，例如，在您的 .m 中。

```
@interface ViewController ()

@property (nonatomic, strong) NSDictionary* definitions;

@end

@implementation ViewController

// other code here

// within readDefinitionsFile method
self.definitions = [NSDictionary dictionaryWithContentsOfFile:plistPath]; 
```

用于`definitions`检索您感兴趣的定义。

```
NSString* definition = [self.definitions objectForKey:@"aKeyYouWillRetrieveFromSomewhere"];
if(definition) {
    NSLog(@"definition is %@ for key %@", definition, @"aKeyYouWillRetrieveFromSomewhere");
} else {
    NSLog(@"no definition for key %@", @"aKeyYouWillRetrieveFromSomewhere");
} 
```

希望有帮助。

# java - 以前工作的功能的不满意链接

> ID：15623960
> 
> 赞同：0
> 
> 时间：2013-03-25T20:18:06.987
> 
> 标签：java, c, java-native-interface

我有一个以前工作的 JNI 库，由于某种原因（我不知道有任何更改）我不能再使用它，因为我收到以下错误：

> 线程“main”中的异常 java.lang.UnsatisfiedLinkError: de.ifi.lmu.sommerd.ftsserver.jni.IndexJNI.loadIndex(Ljava/lang/String;)V at de.ifi.lmu.sommerd.ftsserver.jni.IndexJNI .loadIndex（本机方法）

所以这是我的测试设置：

```
package de.ifi.lmu.sommerd.ftsserver.jni;

public class IndexJNI {

    static {
        System.load("/home/XXX/workspace/IndexJNI/resources/newLib.so");
        System.out.println("Loading library worked");
        IndexJNI.loadIndex("");
    }

    public static native void loadIndex(String indexName);
} 
```

这里是 .h 和 .c 文件的相关部分：

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class de_ifi_lmu_sommerd_ftsserver_jni_IndexJNI */

#ifndef _Included_de_ifi_lmu_sommerd_ftsserver_jni_IndexJNI
#define _Included_de_ifi_lmu_sommerd_ftsserver_jni_IndexJNI
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     de_ifi_lmu_sommerd_ftsserver_jni_IndexJNI
 * Method:    loadIndex
 * Signature: (Ljava/lang/String;)V
 */
JNIEXPORT void JNICALL Java_de_ifi_lmu_sommerd_ftsserver_jni_IndexJNI_loadIndex
  (JNIEnv *, jobject, jstring);

#ifdef __cplusplus
}
#endif
#endif 
```

.c 文件

```
JNIEXPORT void JNICALL Java_de_ifi_lmu_sommerd_ftsserver_jni_IndexJNI_loadIndex
  (JNIEnv * env, jclass jc, jstring indexName) {
...
} 
```

这是我的makefile：

```
test_gcc_lib: run_queries.o
    g++ -shared -fPIC run_queries.o SSA.a -o newLib.so 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:39:58.703

所以问题是我已经将调用更改为静态，所以现在签名不再正确。我只需要将 jobject 更改为 jclass。

# android - Activity 作为对话框使用 HoloEverywhere 切断布局

> ID：15623965
> 
> 赞同：0
> 
> 时间：2013-03-25T20:18:28.960
> 
> 标签：android, android-activity, android-holo-everywhere

我在我的 Android 应用程序中使用 HoloEverywhere 库来确保所有受支持设备的主题一致。但是，我在使用 Holo.Theme.Dialog 的活动时遇到了麻烦：在我的 Android 2.2 模拟器上它可以正确显示，但在我的 Android 4 设备（它具有实际的 Holo 主题）上，布局会切断右侧的项目对话框的边缘。

我的问题是，**如何强制具有股票 Holo 主题的设备使用它而不是 HoleEverywhere**？或者，**我如何修改 HoloEverywhere 以使样式为对话框的活动在 Android 4+ 设备上正确显示**？

截图：

[Android 4+ 中的对话框](https://docs.google.com/file/d/0B21y6wBV8hPGRjF3NW0zX0pkaW8/edit?usp=sharing)

[Android 2.2 中的对话框](https://docs.google.com/file/d/0B21y6wBV8hPGdmF5N2VkUkhldlU/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:00:15.020

我不确定这个错误是否已在 HoloEverywhere 中修复，但我的解决方案是将我的所有对话框活动类更改为 AlertDialogs。这需要一些代码更改，但现在我可以确定我的对话框将按预期显示和运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:59:31.463

这是您需要做的：

1.  在您的 values 文件夹中，在 styles.xml 文件中创建一个样式，将 Holo.Theme 引用为父级。就我而言，我使用了 AppBaseTheme

    ```
    <style name="AppBaseTheme" parent="Holo.Theme.Light"></style> 
    ```

2.  在您的清单中，确保您在活动和应用程序标签中引用了这种样式。

    ```
    <application
      ...
      android:theme="@style/AppBaseTheme" > 
    ```

3.  在 res 文件夹中创建一个名为 values-11 的文件夹（如果还没有的话）

4.  创建另一个styles.xml 文件。

5.  复制之前在 values 文件夹中放置的相同样式，但引用 4.0 中包含的内置 Holo 主题

    ```
    <style name="AppBaseTheme" parent="android:Theme.Holo.Light"></style> 
    ```

# php - 如何处理来自php的json响应？

> ID：15623966
> 
> 赞同：0
> 
> 时间：2013-03-25T20:18:36.657
> 
> 标签：php, ajax, jquery

我正在发送一个 ajax 请求来更新数据库记录，它使用 html 表单对其进行测试，它工作正常，但是当我尝试发送 ajax 请求时它的工作，但我收到的响应始终为空。在 html 表单上，它显示正确的响应。我在 Windows 操作系统上使用 xampp。请引导我正确的方向。

```
<?php
    header('Content-type: application/json');
    $prov= $_POST['prov'];
    $dsn = 'mysql:dbname=db;host=localhost';
    $myPDO = new PDO($dsn, 'admin', '1234');

    $selectSql = "SELECT abcd FROM xyz WHERE prov='".mysql_real_escape_string($prov)."'";
    $selectResult = $myPDO->query($selectSql);

    $row = $selectResult->fetch();
    $incr=intval($row['votecount'])+1;

    $updateSql = "UPDATE vote SET lmno='".$incr."' WHERE prov='".mysql_real_escape_string($prov)."'";
    $updateResult = $myPDO->query($updateSql);

    if($updateResult !== False) 
    {
    echo json_encode("Done!");
    } 
    else 
    {
    echo json_encode("Try Again!");
    }
    ?>

function increase(id)
    {
         $.ajax({
            type: 'POST',
            url: 'test.php',
            data: { prov: id },
            success: function (response) {

            },
            complete: function (response) {
                var obj = jQuery.parseJSON(response);
                alert(obj);
            }
        });
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:26:10.550

```
$.ajax({
            type: 'POST',
            url: 'test.php',
            data: { prov: id },
            dataType: 'json',
            success: function (response) {
                // you should recieve your responce data here
                var obj = jQuery.parseJSON(response);
                alert(obj);
            },
            complete: function (response) {
                //complete() is called always when the request is complete, no matter the outcome so you should avoid to recieve data in this function
                var obj = jQuery.parseJSON(response.responseText);
                alert(obj);
            }
        }); 
```

`complete`和`success`函数获取不同的数据传入。`success`只获取数据，完成整体`XMLHttpRequest`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:23:35.503

First off, in your ajax request, you'll want to set `dataType` to `json` to ensure jQuery understands it is receiving json.

Secondly, `complete` is not passed the data from the ajax request, only `success` is.

Here is a full working example I put together, which I *know* works:

**test.php** (call this page in your web browser)

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript">
  // Define the javascript function
  function increase(id) {
    var post_data = {
      'prov': id
    }

    $.ajax({
      'type': 'POST',
      'url': 'ajax.php',
      'data': post_data,
      'dataType': 'json',
      'success': function (response, status, jQueryXmlHttpRequest) {
        alert('success called for ID ' + id + ', here is the response:');
        alert(response);
      },
      'complete': function(jQueryXmlHttpRequest, status) {
        alert('complete called');
      }
    });
  }

  // Call the function
  increase(1); // Simulate an id which exists
  increase(2); // Simulate an id which doesn't exist
</script> 
```

**ajax.php**

```
<?php
$id = $_REQUEST['prov'];

if($id == '1') { 
  $response = 'Done!';
} else {
  $response = 'Try again!';
}

print json_encode($response); 
```

# php - 我应该将 AngularJS 与 PHP 框架混合使用吗？

> ID：15623967
> 
> 赞同：164
> 
> 时间：2013-03-25T20:18:42.297
> 
> 标签：php, web-applications, angularjs

AngularJS 在交互式 HTML5 和模型绑定方面非常强大。另一方面，像 Yii 这样的 PHP 框架支持快速、结构良好、安全和强大的 Web 应用程序开发。这两种技术都为数据访问、迭代和页面布局提供了复杂的方法。

混合这两种方法（客户端和服务器端“页面设置”）是好还是坏的做法，还是这与交互式、无缝的 HTML5 AJAX Web 应用程序的含义相反？

我不是在谈论使用 PHP 生成 JS（[参见这个问题](https://stackoverflow.com/questions/549506/should-php-frameworks-generate-javascript/)）——我说的是生成一个将使用 AngularJS 的视图。

我也知道 AngularJS 页面应该（或可以）通过 REST 服务与服务器通信以获取数据（[参见这个问题](https://stackoverflow.com/questions/13067607/angularjs-client-mvc-pattern/)），而不是直接从例如 PHP 变量中检索数据。但对我来说，在 PHP 中为整个 Web 应用程序单独设计“框架”似乎更方便（例如构建主菜单或处理授权/会话等）

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2013-03-25T22:06:45.003

看起来你可能更喜欢用 PHP 进行开发，但你让这阻碍了你充分利用 Web 应用程序的潜力。

确实有可能让 PHP 呈现部分视图和整个视图，但我不推荐它。

为了充分利用 HTML 和 javascript 的可能性来制作一个 Web 应用程序，即一个更像应用程序并严重依赖客户端渲染的网页，您应该考虑让客户端承担管理状态和呈现的所有责任。这将更容易维护，并且对用户更友好。

我建议您以更加以 API 为中心的方法来更自在地思考。与其让 PHP 输出一个预渲染的视图，并使用 angular 来进行 DOM 操作，不如考虑让 PHP 后端输出应该对 RESTFully 进行操作的数据，并让 Angular 呈现它。

使用 PHP 渲染视图：

`/user/account`

```
if($loggedIn)
{
    echo "<p>Logged in as ".$user."</p>";
}
else
{
    echo "Please log in.";
} 
```

如何通过以 API 为中心的方法通过输出 JSON 来解决相同的问题：

`api/auth/`

```
{
  authorized:true,
  user: {
      username: 'Joe', 
      securityToken: 'secret'
  }
} 
```

在 Angular 中，您可以进行获取并处理响应客户端。

```
$http.post("http://example.com/api/auth", {})
.success(function(data) {
    $scope.isLoggedIn = data.authorized;
}); 
```

以您提议的方式混合客户端和服务器端可能适合维护不重要且您是单一作者的小型项目，但我更倾向于以 API 为中心的方式，因为这将更正确地分离 conserns 并且将更容易维护。

# python - 仅在发生异常时才重新引发异常的更好语法？

> ID：15623971
> 
> 赞同：2
> 
> 时间：2013-03-25T20:19:16.933
> 
> 标签：python, exception

当我想捕获异常时，我发现自己会这样做，总是运行一些特定的代码，然后重新引发原始异常：

```
try:
    error = False
    # do something that *might* raise an exception
except Exception:
    error = True
finally:
    # something I *always* want to run
    if error:
        raise 
```

我正在使用该标志，因为在`raise`没有先前异常的情况下调用会引发`TypeError`. 没有标志是否有更 Pythonic 的方式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T20:21:00.743

在 except 处理程序中引发异常：

```
try:
    # do something that *might* raise an exception
except Exception:
    raise
finally:
    # something I *always* want to run 
```

无论您是否重新引发异常，套件总是会被`finally`执行*。*

从[文档](http://docs.python.org/3/reference/compound_stmts.html#the-try-statement)中：

> 如果`finally`存在，它指定一个“清理”处理程序。该`try`子句被执行，包括任何`except`和`else`子句。如果任一子句发生异常且未处理，则暂时保存该异常。`finally`子句被执行。`finally`如果存在已保存的异常，则会在子句末尾重新引发。

请注意，如果`finally`套件使用`break`or`return`语句，则保存的异常*将被*丢弃：

> 如果`finally`子句执行 return 或 break 语句，则丢弃保存的异常：
> 
> ```
> def f():
>     try:
>         1/0
>     finally:
>         return 42
> 
> >>> f()
> 42 
> ```

但如果您发出`break`,`continue`或`return`在`try`套件中，`finally`套件仍会执行：

> 当`return`, `break`or`continue`语句在...语句`try`套件中执行时，该子句也将在“退出时”执行。</p> `try``finally``finally`

请注意，在 Python 2.5 之前，您甚至不能在同一语句中组合`except`和套件；参见[PEP 341：统一 try/except/finally](http://docs.python.org/2/whatsnew/2.5.html#pep-341-unified-try-except-finally)。相反，您应该嵌套语句：`finally``try``try`

```
try:
    try:
        # some code that could raise an exception
    except SomeException:
        # exception handler
finally:
    # cleanup code, always executed 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T20:21:03.030

`finally`将*始终*执行，无论 or 块中发生什么`try`，`except`或者该`except`块是否存在。

这两个都可以工作：

```
try:
    # do something that *might* raise an exception
finally:
    # something I *always* want to run 
```

```
try:
    # do something that *might* raise an exception
except Exception:
    raise
finally:
    # something I *always* want to run 
```

# git - 将本地 svn 存储库转换为 git

> ID：15623973
> 
> 赞同：1
> 
> 时间：2013-03-25T20:19:17.930
> 
> 标签：git, svn

我有一个 svn repo。在我电脑的本地文件夹中。我不知道这是否可能，但我想将其转换为仅使用 git。我不再可以访问 svn 服务器，并且 .svn 文件夹中的所有内容都是

```
all-wcprops
entries
format
prop-base
props
text-base
tmp 
```

我已经尝试过，`svn log`但它开始要求提供凭据。我还尝试通过执行类似的操作来验证它是否是一个 svn 存储库，`svnadmin verify /folder`但它所说的只是`svnadmin: Can't open file 'format': No such file or directory`. 我需要的只是提交历史。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:45:19.717

如果这是*存储库*（不是本地工作区），请使用`git svn clone`将其添加到新创建的 git 存储库中。通过周日检查结果的 5 种方式，将 SVN 丢弃到漂亮、舒适的 CD/DVD 以妥善保管。

请注意，这`git svn clone`可能需要*很*长时间，因为它顺序要求 SVN 重新创建曾经存在的每个单一修订，然后将其集成为提交。SVN 在挖掘旧东西时效率低下，而且处理方式`git svn`也不是很出色。对于一个不太大的远程 SVN 存储库，它可能需要一两天的时间。由于连接中断，我不得不重新启动几次。我不记得正确的咒语是否`git svn clone`又是 or `git svn rebase`，或者其他什么（是的，看到一个空的克隆存储库很可怕，但是下载的东西在那里）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:41:14.313

如果您不介意丢失历史记录（正如我在评论中提到的，如果您无权访问中央服务器，则您无权访问历史记录），您可以在同一文件夹中初始化一个 git repo，添加一个`.gitignore`文件，其中包含您通常在 SVN 中忽略的所有文件/文件夹以及行`.svn/`，以忽略 .svn 文件夹，然后添加/提交所有内容。

使用命令行 git，它看起来像：

```
cd path/to/repo
git init
touch .gitignore
#EDIT THE .gitignore FILE HERE
git add .
git commit -m "Initial commit" 
```

如果您想稍后清除 .svn 文件夹，您可以使用 werd 答案中的链接或[将 repo 克隆到另一个文件夹](https://stackoverflow.com/questions/2519933/git-clone-repo-across-local-file-system)。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-03-25T20:23:29.583

1) Remove .svn/ folders - [http://www.anyexample.com/linux_bsd/bash/recursively_delete__svn_directories.xml](http://www.anyexample.com/linux_bsd/bash/recursively_delete__svn_directories.xml)

2) Add it to GIT repo

# jquery - jquery 会删除 css 样式吗？

> ID：15623982
> 
> 赞同：0
> 
> 时间：2013-03-25T20:19:55.357
> 
> 标签：jquery, css, twitter-bootstrap

我正在解决我的css问题。我有以下 div 标签：

```
<div class="span1" id="progress-indicator" style="text-align:left; border:2px solid #000;">&nbsp;</div> 
```

稍后在代码的脚本部分中，我执行以下操作：

```
 $('#progress-indicator').html("saving changes...."); 
```

当您使用 html() 方法时，它只是改变了开始/结束 div 标签之间的空间还是改变了 div 标签的属性？我问是因为一旦调用了这个 jquery，div 的大小似乎比 span1 div 应该大。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:56:39.703

jQuery 文档只提到内容受到影响： [http ://api.jquery.com/html/](http://api.jquery.com/html/)

我引用：“描述：设置匹配元素集中每个元素的 HTML 内容。”

jquery 文档的示例：

```
$('div.demo-container')
    .html('<p>All new content. <em>You bet!</em></p>'); 
```

那行代码将替换里面的所有内容：

```
<div class="demo-container">
  <p>All new content. <em>You bet!</em></p>
</div> 
```

我设置了一个例子：http: [//jsfiddle.net/caZtd/](http://jsfiddle.net/caZtd/)

现在，如果您单击进度指示器 div 并在单击之前和之后检查元素（使用 chrome 开发人员工具的 firefox 中的 firebug），您将看到 html 标记没有任何区别。

# php - 尝试以开放图形测试用户身份登录时，hybridauth 返回无效用户

> ID：15623994
> 
> 赞同：0
> 
> 时间：2013-03-25T20:20:49.233
> 
> 标签：php, facebook-graph-api, drupal-7, hybridauth

如果我使用开发人员或测试角色登录，我正在使用 hybridauth 创建一个开放图形操作及其工作，但是当我尝试以开放图形测试用户身份登录时，我收到以下错误。

```
Exception: Authentication failed! Facebook returned an invalid user id. in Hybrid_Auth::initialize() (line 147 of /var/www/sites/all/libraries/hybridauth/Hybrid/Auth.php). 
```

有什么解决方法吗？我的开放图`news.reads`操作已被拒绝，因为开放图测试用户不起作用，我无法将“操作”发布到时间线（使用开放图测试用户）。

我正在使用 drupal hybridauth 模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:13:50.300

使用最新的 7.x-2.x-dev 版本和最新的 HybridAuth 库

# c - C char * 函数问题

> ID：15623996
> 
> 赞同：0
> 
> 时间：2013-03-25T20:20:49.407
> 
> 标签：c, char

我需要帮助，我只是在学习 C，不知道出了什么问题：

我在这里调用`set_opts`函数：

```
char * tmploc ;
tmploc=set_opts("windir","\\temp.rte");
printf(tmploc); 
```

（我知道， printf 没有格式化，只是用于测试目的）

函数如下所示：

```
char * set_opts(char * env,char * path){
    char * opt;
    opt=malloc(strlen(env)+strlen(path)+1);
    strcpy(opt,getenv(env));
    strcat(opt,path);
    return opt;
} 
```

一切都很好，但是当我再次尝试调用它时：

```
char * tmploc2 ;
tmploc2=set_opts("windir","\\temp.rte");
printf(tmploc2); 
```

...程序刚刚终止

请告诉我我做错了什么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T20:27:15.803

您使用 分配字符串的长度`env`，然后用 填充它`getenv(env)`。如果`getenv(env)`长于`env`那么你很有可能发生段错误。你的意思是使用`strlen(getenv(env))`？

你真的应该在你的代码中添加一些错误检查：

```
char *set_opts(char *env, char *path)
{
    char *opt;
    char *value;

    value = getenv(env);
    if (value == NULL)
      ... handle error
    opt = malloc(strlen(value)+strlen(path)+1);
    if (opt == NULL)
      ... handle error
    strcpy(opt,value);
    strcat(opt,path);
    return opt;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T20:25:45.940

小心你在做什么[`getenv()`](http://linux.die.net/man/3/getenv)，因为：

> getenv() 函数返回一个指向环境中值的指针，如果不匹配，则返回 NULL。

因此，如果您传递的名称与现有环境变量不对应，那么您将返回 NULL，这将杀死您的`strcpy(opt,getenv(env));`

我推荐：

1.  检查`malloc()`返回的内容并确保它不为空。
2.  检查`getenv()`返回的内容并确保它不为空。
3.  正如您所指出的，在您的 printf 中使用格式字符串并使用`-Wall`.
4.  使用调试器单步执行您的代码，以确保它在您看到输出之前不会终止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T20:33:43.850

你确定： getenv(env) 将适合 "opt" 吗？我不这么认为。如果它不适合，那么 strcpy 可能会杀死你的程序。

更正： char * set_opts(char * env,char * path){ char * opt; 字符 * 值 = getenv(env); 选择=malloc（strlen（值）+strlen（路径）+1）；strcpy（选择，值）；strcat（选择，路径）；返回选择；}

这样，您确定您有足够的空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T20:27:47.790

尝试摆脱`getenv(env)`. 放`strcpy(opt,env);`. `getenv()`大概是回来了`NULL`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T20:24:43.780

One possible reason: malloc returns `NULL` and you never check for it. Same for getenv(). And it must be

```
 malloc(strlen(getenv(env))+strlen(path)+1); 
```

If the actual contents of getenv("windir") is longer than 6 characters, you write past the malloced buffer, which invokes *undefined behavior*.

# php - 使用 jQuery Ajax 删除 mySQL 表行

> ID：15623997
> 
> 赞同：2
> 
> 时间：2013-03-25T20:20:53.697
> 
> 标签：php, jquery, ajax, post, mysqli

我正在尝试做到这一点，所以当我单击跨度图标时，它会将 article_id 发送到我的 php sql 页面，该页面会删除我的文章，我正在使用 jQuery Ajax 发送 id，id 在 jQuery 端发送正常但之后http post请求已完成，我的表格行仍然存在，任何人都可以查看我的代码是否有问题，在此先感谢！

```
 <?php
        $sql_categories = "SELECT art_id, art_title, art_company, art_cat_id, art_sta_id, art_date, art_rating, art_price, cat_id, cat_name, sta_id, sta_name
                FROM app_articles LEFT JOIN app_categories
                ON app_articles.art_cat_id = app_categories.cat_id
                LEFT JOIN app_status
                ON app_articles.art_sta_id = app_status.sta_id
                ORDER BY art_order ASC"; 

            if($result = query($sql_categories)){
                $list = array();

                while($data = mysqli_fetch_assoc($result)){
                    array_push($list, $data);
                }

                foreach($list as $i => $row){ 
                ?>
                    <div class="row" id="page_<?php echo $row['art_id']; ?>">
                        <div class="column one">
                            <span class="icon-small move"></span>
                            <a href="edit-article.php?art_id=<?php echo $row['art_id']; ?>"><span class="icon-small edit"></span></a>
                            <span id="<?php echo $row['art_id']; ?>" class="icon-small trash"></span>
                        </div>
                        <div class="column two"><p><?php echo $row['art_title']; ?></p></div>
                        <div class="column two"><p><?php echo $row['art_company']; ?></p></div>
                        <div class="column two"><p><?php echo $row['cat_name']; ?></p></div>
                        <div class="column one"><p><?php echo $row['art_date']; ?></p></div>
                        <div class="column one"><p><?php echo $row['art_rating']; ?></p></div>
                        <div class="column one"><p><?php echo $row['art_price']; ?></p></div>
                        <div class="column one"><p><?php echo $row['sta_name']; ?></p></div>
                        <div class="column one"><a href=""><span class="icon-small star"></span></a></div>
                    </div>
                <?php
                }
            }
            else {
                echo "FAIL";
            }
        ?>

jQuery

        $(document).ready(function(){

                $(".trash").click(function(){

            var del_id = $(this).attr('id');

            $.ajax({
                type:'POST',
                url:'ajax-delete.php',
                data: 'delete_id='+del_id,
                success:function(data) {
                    if(data) {

                    } 
                    else {

                    }   
                }

            }); 
        });

    });

PHP mySQL Statement

    if(isset($_POST['delete_id'])) {

        $sql_articles = "DELETE FROM app_articles WHERE art_id = ".$_POST['delete_id'];

        if(query($sql_articles)) {
            echo "YES";
        }
        else {
            echo "NO";
        }
    }
else {
    echo "FAIL";
}

?> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T20:25:50.050

您的行仍然存在的原因是因为 AJAX 调用不会刷新页面。如果您希望删除您的行，您必须执行以下操作：

假设您的跨度点击事件在行内

```
 $(".trash").click(function(){
   var del_id = $(this).attr('id');
   var rowElement = $(this).parent().parent(); //grab the row

   $.ajax({
            type:'POST',
            url:'ajax-delete.php',
            data: {delete_id : del_id},
            success:function(data) {
                if(data == "YES") {
                   rowElement.fadeOut(500).remove();
                } 
                else {

                }   
            }
    }); 
```

代替：

```
 data: 'delete_id='+del_id, 
```

和：

```
 data: delete_id : del_id, 
```