# StackOverflow 问答 13118000-13118999

# android - Android背景图片内存使用情况

> ID：13118005
> 
> 赞同：59
> 
> 时间：2012-10-29T08:17:29.390
> 
> 标签：android, memory, background

我正在进行的项目使用了几个“高分辨率”背景（注意引号）。只是为了了解情况，其中之一是 640x935 1.19M PNG 文件。据我所知，即使 Android 将图像作为原始数据解压缩到内存中，这也应该是：

640 x 935 x 4 字节 = 2.39M

我的项目存在记忆问题，我无法真正理解，我希望有人能对此事有所了解。我将命名我正在开发的两个设备以及一些结果。

为了确保这不是次要问题，我让一个活动在首次创建时不加载背景，然后，当用户按下按钮时，它所做的只是：

```
findViewById(R.id.completed_block_background).setBackgroundResource(R.drawable.blockbackgroundbottom1); 
```

然后，在进程上使用带有“更新堆”的 DDMS（并首先强制 GC 以确保这不会成为问题），我得到以下内存结果：

Nexus S：从 18M 到 26M（8M 差异）

Galaxy Nexus：从 28M 到 39M（相差 11M）

因此，如您所见，将理论上 2.39M 的未压缩图像放入背景实际上会增加 8M 和 11M 的内存使用量。有人可以解释为什么会这样以及是否有任何解决方案？

我能找到的唯一解决方案是使用位图将分辨率减半或降低通道格式（到目前为止，这就是我所做的，将它们切换到 565 RGB，但这会产生一些我无法接受的条带问题）。

如果没有什么可以做的，我也会接受解释为什么会发生这种情况。提前致谢。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-10-29T11:42:38.647

> 这就是它使图像如此之大的原因吗？

好吧，正在发生的事情是，这`setBackgroundResource(R.drawable.blockbackgroundbottom1)`将导致 Android 首先执行`BitmapFactory.decodeResource()`您尝试过的事情，然后让渲染逻辑缩放图像以将其应用为背景。因此，例如，Galaxy Nexus 和 Nexus S 之间的 3MB 差异可能反映了`LinearLayout`.

可能还会根据屏幕密度进行一些重新采样，具体取决于您将此图像存储在资源树中的位置。

> 有没有办法让它以任何方式保持原始图像大小？

袖手旁观，我会首先尝试将其放入`res/drawable-nodpi/`（以防止任何基于密度的自动重采样），然后手动获取`Bitmap`via 的版本`BitmapFactory.decodeResource()`，`BitmapFactory.Options`这样您就可以在读取时对其进行缩放。如果确实如此似乎没有多大帮助，您可能需要将 PNG 从可绘制资源中移到原始资源或资产中，因为 Android 可能仍会尝试保留图像的未缩放副本。如果你直接使用自己，我认为它不会`BitmapFactory.decodeResource()`，但我不能排除它。

# iphone - UIButton 禁用点击声音

> ID：13118008
> 
> 赞同：-1
> 
> 时间：2012-10-29T08:17:39.053
> 
> 标签：iphone, ios, audio, uibutton, click

我为 UINavigationBar 使用自定义按钮。并且点击的声音播放0-2次。

据我了解，解决此问题的最简单方法是禁用每个按钮的单击声音？所以请帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T09:00:28.973

您可以通过代码参考播放声音[点击这里](http://www.roseindia.net/tutorial/iphone/examples/iphone-button-sound.html)

是的，您可以在禁用按钮声音后将其标签设置为 111，然后在操作方法之后检查

```
-(IBAction)buttonAction:(UIButton*)sender{

 if(sender.tag == 111){
return;
}

//here is logic for sound play 
```

}

# sql - 必须在子选择 SQL 中声明标量变量错误

> ID：13118012
> 
> 赞同：3
> 
> 时间：2012-10-29T08:18:22.503
> 
> 标签：sql, subquery, declare, scalar

我正在尝试创建一个 SQL 脚本，该脚本将创建一个易于更新的脚本，其中另一个人只需要更新所涉及的常量然后运行查询，但是在子选择中使用声明的变量时我遇到了麻烦。

我知道这是因为声明的变量不在子选择的范围内，但似乎无法找到解决方法。

这是当前的代码：

```
DECLARE @_logdb varchar(30) = 'nb_tablename';
DECLARE @_sitedb varchar(30) = 'nb_tablename_site';
DECLARE @_backtodate varchar(30) = '2012-10-10';
DECLARE @_sitename varchar(50) = 'bikehaven';

UPDATE
    [@_sitedb].[dbo].[bike] 
SET [bikeStatus] = 'active' 
WHERE bikeID in (
    SELECT 
substring(
    [event], 
    CHARINDEX('bike ID' , [event]) + LEN('bike ID '),
    CHARINDEX(
        ')', 
        [event],
        CHARINDEX('bike ID' , [event])
    ) - (CHARINDEX('bike ID' , [event]) + LEN('bike ID '))
) as 'ID'
from [@_logdb].[dbo].[logs] 
where 
    user_name = 'john' AND 
    event_type = 'Deleted bike' AND 
    CHARINDEX('bike ID' , [event]) > 0 AND 
    date_time > @_backtodate AND 
    siteID = (
        SELECT id 
        from [@_logdb].[dbo].[sites] 
        WHERE site_name = @_sitename
    )
) 
```

实际上造成麻烦的两个变量是`@_backtodate`& `@_sitename`，但我也知道如果我用真正的字符串替换这些变量，我会得到错误，说这`[@_sitedb].[dbo].[bike]`也是一个问题。

我做了一些谷歌搜索，尝试使用临时表进行子查询以及将 SQL 定义为变量本身，然后`EXEC`在其上运行命令，但无济于事。

**编辑：我已经按照**[Andomar](https://stackoverflow.com/users/50552/andomar)的指示应用了更改，方法是将查询本身拉出到声明变量中，然后运行它，这确实是对其中一个错误的修复，但是即使有了这个修复，我仍然得到 Must define scalar `@_back to date`&的变量错误`@_sitename`。

**解决方案：**[Alexander Fedorenko](https://stackoverflow.com/users/1085940/alexander-fedorenko) 建议的更改最终给了我最后一点难题。在动态 SQL 中，不能通过参数将表名用作显式替换，因为这些参数非常适合*实际*变量值。

简而言之： - 使查询成为字符串变量。- 任何需要发生的表名替换，您可以通过字符串连接添加（意味着输出字符串需要是一个有效的查询） - 将任何变量参数传递给存储过程以进行替换`SP_executesql`

最终的工作代码由[Alexander Fedorenko](https://stackoverflow.com/users/1085940/alexander-fedorenko)指定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T08:22:03.087

您不能将变量用作表名。所以这行不通：

```
from [@_logdb].[dbo].[logs] 
```

如果你真的想要变量表名，唯一的选择是动态 SQL。使用 SQL创建一个`nvarchar(max)`变量，并使用`sp_executesql`or运行它`exec`。

```
declare @sql nvarchar(max)
set @sql = 'select * from ' + @tablename
exec (@sql) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T09:42:15.943

过程 sp_executesql 允许使用参数。[使用 sp_executesql](http://msdn.microsoft.com/en-us/library/ms175170%28v=sql.105%29.aspx)

```
DECLARE @_logdb varchar(30) = 'nb_tablename';
DECLARE @_sitedb varchar(30) = 'nb_tablename_site';
DECLARE @_backtodate varchar(30) = '2012-10-10';
DECLARE @_sitename varchar(50) = 'bikehaven';

DECLARE @_SQL nvarchar(max)
SET @_SQL = '
UPDATE
    ' + @_sitedb + '.[dbo].[bike] 
SET [bikeStatus] = ''active'' 
WHERE bikeID in (
    SELECT 
substring(
  [event],
CHARINDEX(''bike ID'' , [event]) + LEN(''bike ID ''),
CHARINDEX(
'')'', 
[event],
CHARINDEX(''bike ID'' , [event])
) - (CHARINDEX(''bike ID'' , [event]) + LEN(''bike ID ''))
) as ''ID''
from ' + @_logdb + '.[dbo].[logs]
where 
user_name = ''john'' AND 
event_type = ''Deleted bike'' AND
CHARINDEX(''bike ID'' , [event]) > 0 AND
date_time > @_backtodate AND
siteID = (
SELECT id 
from ' + @_logdb + '.[dbo].[sites]
WHERE site_name = @_sitename
    )
)'
EXEC sp_executesql @_SQL, N'@_backtodate varchar(30), @_sitename varchar(50)', @_backtodate, @_sitename 
```

# c# - C# 字典映射

> ID：13118013
> 
> 赞同：2
> 
> 时间：2012-10-29T08:18:24.230
> 
> 标签：c#, linq, dictionary

我有一本字典：

```
 Dictionary<ICD_Map2, string> maps = new Dictionary<ICD_Map2, string>();

    public class ICD_Map2
    {
        public string call_type {get; set; }
        public string destination{get; set;} 

    }

maps.Add(new ICD_Map2() {call_type = "Mobile SMS", destination = "Australia"},"Local Text");
maps.Add(new ICD_Map2() {call_type = "Mobile SMS", destination = "International"},"International Text"); 
```

所以我想要的是，当我传递两个变量时：

> 案例 1 variable1 = "Mobile SMS" && variable2 = "Australia" 我想要一个函数返回 "Local Text"
> 
> 案例 2“国际文本”取决于我的输入变量匹配 ICD_Map2 定义“移动短信”和“国际”。`

如何构造此映射函数以从一组结果中返回集合中的第一个（如果有多个结果）？这是一个非常简化的示例，我有超过 100 个映射。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T08:26:12.860

虽然有很多方法可以实现这一点，但我个人使用的最快和最简单的 LINQ 是`FirstOrDefault`这样的：

```
string var1 = "Mobile SMS";
string var2 = "Australia";

var item = maps.FirstOrDefault(e => e.Key.call_type == var1 && e.Key.destination == var2);
string result = (item == null) ? "No value" : item.Value; 
```

在这种情况下，如果没有相应的匹配项，您最终会`result`为 null。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T08:27:43.167

要使用字典，键需要支持相等操作。例如：

```
public class ICD_Map2 : IEquatable<ICD_Map2>
{
    public ICD_Map2(string callType, string destination) {
        CallType = callType;
        Destination = destination;
    }
    public override int GetHashCode() {
        int result = 17;
        result = -13 * result +
            (CallType == null ? 0 : CallType.GetHashCode());
        result = -13 * result +
            (Destination == null ? 0 : Destination.GetHashCode());
        return result;
    }
    public override bool Equals(object other) {
        return Equals(other as ICD_Map2);
    }
    public bool Equals(ICD_Map2 other) {
        if(other == null) return false;
        if(other == this) return true;
        return CallType == other.CallType && Destination == other.Destination;
    }
    public string CallType {get; private set; }
    public string Destination{get; private set;} 
} 
```

注意将其设为只读是有意的：可变键会导致巨大的问题 - 避免这种情况。

现在您可以将其用作键，例如：

```
var key = new ICD_Map2("Mobile SMS", "Australia");
string result;
if(maps.TryGetValue(key, out result)) {
    Console.WriteLine("found: " + result);
} 
```

反向查找是有问题的，除非您有第二个字典，否则无法优化。一个简单的操作（性能 O(n)）将是：

```
string result = "International Text";
var key = (from pair in maps
           where pair.Value == result
           select pair.Key).FirstOrDefault();
if(key != null) {
    Console.WriteLine("found: " + key);
} 
```

把它们放在一起：

```
static void Main()
{
    Dictionary<ICD_Map2, string> maps = new Dictionary<ICD_Map2, string> {
        {new ICD_Map2 ("Mobile SMS", "Australia"),"Local Text"},
        {new ICD_Map2 ("Mobile SMS", "International"),"International Text"}
    };

    // try forwards lookup
    var key = new ICD_Map2("Mobile SMS", "Australia");
    string result;
    if (maps.TryGetValue(key, out result))
    {
        Console.WriteLine("found: " + result);
    }

    // try reverse lookup (less efficient)
    result = "International Text";
    key = (from pair in maps
               where pair.Value == result
               select pair.Key).FirstOrDefault();
    if (key != null)
    {
        Console.WriteLine("found: " + key);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T08:27:59.483

构建自定义比较器：

```
public class CusComparer: IEqualityComparer<ICD_Map2>
{
    public bool Equals(ICD_Map2 x, ICD_Map2 y)
    {
        return x.call_type.Equals(y.call_type) 
              && x.destination.Equals(y.destination);
    }

    public int GetHashCode(ICD_Map2 obj)
    {
        return obj.call_type.GetHashCode() 
                 ^ obj.destination.GetHashCode();
    }
} 
```

请记住，`Dictionary`还有另一个带有 accepting 的重载构造函数`IEqualityComparer`：

```
var maps = new Dictionary<ICD_Map2, string>(new CusComparer());

maps.Add(new ICD_Map2() {
              call_type = "Mobile SMS", 
              destination = "Australia"},
         "Local Text");

maps.Add(new ICD_Map2() {
            call_type = "Mobile SMS", 
            destination = "International"},
         "International Text"); 
```

所以你可以得到：

```
 var local = maps[new ICD_Map2() {
                     call_type = "Mobile SMS", 
                     destination = "Australia"}]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T08:22:58.710

我认为这应该可行，将在几秒钟内仔细检查：

```
maps.Where(a => (String.IsNullOrEmpty(var1) || String.Compare(a.Key.call_type, var1) == 0) 
             && (String.IsNullOrEmpty(var2) || String.Compare(a.Key.destination, var2) == 0))
    .FirstOrDefault().Value` 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T08:24:40.463

您必须在 ICD_Map2 上实现 IEquitable 接口并覆盖 GetHashCode 函数（最好也覆盖 Equals(object) ，因为 Dictionary 使用通用 IEquitable 接口来查找密钥不是必需的）

# jquery - 在母版页中调用 jquery 对话框

> ID：13118014
> 
> 赞同：0
> 
> 时间：2012-10-29T08:18:27.040
> 
> 标签：jquery, html, asp.net-mvc

我使用 MVCHaack.ajax 通过 javascript 调用控制器函数。在调用该函数之前，我会显示一个 jquery 对话框。当我在视图中使用它时，一切都很完美，但是当我调用母版页时，对话框显示为文本块而不是对话框。这是我的母版页代码：

```
 <script src="/json/RequestVIP?json"></script>
<script src="@Url.Content("~/Scripts/RequestVIP.js")" type="text/javascript"></script>

<script type="text/javascript">
    $(function () {
        $('#vipdel').click(function () {
            $("#messagec").replaceWith("<span id=messagec>آیا از حذف عضویت ویژه مطمئن هستید؟</span>");
            $("#dialog-confirm").dialog({
                buttons: {
                    "بلی": function () {
                        $mvc.RequestVIP.Delete({ customerId: $("#hdnId").val() }).success(function (data) {
                            $("#messagec").replaceWith("<span id=messagec>" + data.message + "</span>");
                            $("#dialog-confirm").dialog({
                                buttons: {

                                    "تایید": function () {
                                        $(this).dialog("close");
                                    }
                                }
                            });

                            $("#dialog-confirm").dialog("open");
                        });
                    },
                    "خیر": function () {
                        $(this).dialog("close");
                    }
                }
            });

            $("#dialog-confirm").dialog("open");

            // alert(data.message);

        });
    });
</script>

 <div class="section">
                                <h2 class="title">• عضویت ویژه</h2>
                                            @Html.Hidden("hdnId", @User.Identity.Name.Trim())
                                <button style="width:150px;vertical-align:middle" id="vipreq"><img src="@Url.Content("~/images/join.png")"/>درخواست عضویت ویژه</button><br/>
                                <button style="width:150px;vertical-align:middle" id="vipdel"><img src="@Url.Content("~/images/deljoin.png")"/>حذف عضویت ویژه</button><br/>
                                <button style="width:150px;vertical-align:middle" id="viprev"><img src="@Url.Content("~/images/rejoin.png")"/>تمدید عضویت ویژه</button><br/>
                            </div>

   <div id="dialog-confirm" title="عضویت ویژه">
        <p>
            <span class="ui-icon ui-icon-alert" style="font-family: Tahoma; float: right; margin: 0 7px 20px 0;">
            </span><span id="messagec"></span>
        </p>
    </div> 
```

# maven - Maven：命令“mvn install”相关问题

> ID：13118015
> 
> 赞同：1
> 
> 时间：2012-10-29T08:18:41.937
> 
> 标签：maven

我发现'mvn install' 有时会在目标目录中生成一个 .class 文件，有时却不会，这非常令人着迷。谁能告诉我为什么会这样？如何确保每次都能获得目录？

这是一个简单的 Maven 模块，作为父文件夹的一部分添加。当我在这个模块上执行“mvn install”时，我得到一个 target/test-classes 文件夹，但没有 target/classes 文件夹。这在某些情况下会发生..让我把它分解得更清楚......

我创建了一个最初具有 src/test/java 和 src/test/resources 的模块。所以我添加了一个名为 src/main/java 和 src/main/resources 的源文件夹。现在我安装了模块，我可以看到目标内的 test-classes 文件夹，并且没有 classes 文件夹。希望你明白了。

# java - 尝试播放 AudioClip 时出现 NullPointerException

> ID：13118018
> 
> 赞同：0
> 
> 时间：2012-10-29T08:19:03.103
> 
> 标签：java, audio

我制作了下面给出的类来实现游戏的“绘图”并在其中播放声音。执行时出现以下错误：

```
java.lang.NullPointerException
    at sun.applet.AppletAudioClip.<init>(AppletAudioClip.java:65)
    at java.applet.Applet.newAudioClip(Applet.java:311)
    at AllPanels.Sound.<init>(Sound.java:20)
    at AllPanels.Sound.<clinit>(Sound.java:15)
    at AllPanels.BailoutGame.mousePressed(BailoutGame.java:124)
    at java.awt.Component.processMouseEvent(Component.java:6502)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Window.processEvent(Window.java:2022)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:696)
    at java.awt.EventQueue$4.run(EventQueue.java:694)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

请有人告诉我为什么我会收到这个错误以及如何解决它！

//声音类

```
package AllPanels;

import java.applet.Applet;
import java.applet.AudioClip;

public class Sound {
    public static final Sound fire = new Sound("/home/vivek/Projects/Java/SniperGame/src/Sounds/50 Cal.wav");
    private AudioClip clip;

    public Sound(String fileName){
        try{
            clip = Applet.newAudioClip(Sound.class.getResource(fileName));
        }catch(Exception e) { 
            System.out.println(e); 
            e.printStackTrace();
        }
    }

    public void play() {
        try{
            new Thread(){
                public void Run(){
                    clip.play();
                }
            }.start();
        }catch(Exception e) { 
            System.out.println(e); 
            e.printStackTrace();
        }
    }
} 
```

//Game Class - 绘制游戏

```
package AllPanels;

import java.awt.*;
import java.awt.event.*;
public class BailoutGame extends Core implements MouseListener, MouseMotionListener, KeyListener {

    public static void main(String args[]) {
        (new Thread(new BailoutGame())).start();
    }

    //Variables

    @Override
    public void init(){
        super.init();
        Window w = s.getFullScreenWindow();
        w.addKeyListener(this);
        w.addMouseListener(this);
        w.addMouseMotionListener(this);
    }

    @Override
    public synchronized void draw(Graphics2D g) {
       //some code
    }

    @Override
    public void mouseReleased(MouseEvent e) { }

    @Override
    public void mouseClicked(MouseEvent e) { }

    @Override
    public void mouseEntered(MouseEvent e) { }

    @Override
    public void mouseExited(MouseEvent e) { }

    @Override
    public void mouseDragged(MouseEvent e) { }

    @Override
    public void keyTyped(KeyEvent e) { }

    @Override
    public void keyReleased(KeyEvent e) { }

    @Override
    public void mousePressed(MouseEvent e) { 
        if((e.getButton() == MouseEvent.BUTTON1) && bulletsInClip != 0){
            Sound.fire.play();
            //some Code
        }
        if(e.getButton() == MouseEvent.BUTTON3){
            reload();
        }
    }

    @Override
    public void mouseMoved(MouseEvent e) {
        //some Code
    }

    @Override
    public void keyPressed(KeyEvent e) {
    //some Code
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T08:21:35.517

我强烈怀疑`getResource(filename)`正在回归`null`。

请注意，`Class.getResource`它不采用完整的文件名 - 它采用相对于类或类加载器根的*资源名称。*尝试这个：

```
public static final Sound fire = new Sound("/Sounds/50 Cal.wav"); 
```

假设该目录作为资源根`Sounds`嵌入在资源中，那应该可以工作。`src`

# android - Android：手机返回键

> ID：13118019
> 
> 赞同：1
> 
> 时间：2012-10-29T08:19:04.020
> 
> 标签：android

手机后退按钮让我感到困惑。这个问题被问了很多次，但我没有得到解决方案。所以按照我的要求再次询问。

我有一个主屏幕活动它调用 3 个活动 - 每个活动又调用 2 个活动。

假设我以这种方式导航

Home > Act1 > SubAct1a > SubAct1b > Home（通过 Home 按钮）> Act2 > Home > Act3

现在在 Act3 中，当我按下手机的 BACK 按钮时，我回到了主页。此时我的要求是当我再次按下返回按钮时，它应该退出应用程序。但是会发生什么事情是这样的

Act2 > 主页 > SubAct1b > SubAct1a > Act1 > Home > 退出

因此，用户在退出应用程序之前多次按下 BACK。

按 HOME 键是一个选项，但我希望 BACK 也能正常工作。

我在 HOME 活动中有这段代码 - 但它根本不起作用

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        finish();
        System.exit(0);
    }

    return super.onKeyDown(keyCode, event);
} 
```

它只是返回到之前的活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T08:21:47.573

你应该返回**true**，告诉系统你已经处理了这种情况，

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        finish();
        System.exit(0);
        return true;
    }

    return super.onKeyDown(keyCode, event);
} 
```

当您开始家庭活动时，请尝试设置清除顶部标志...

```
Intent intent = new Intent(this, HomeActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T08:34:03.347

尝试将其添加到您的 onCreate()

```
Intent intent = new Intent(getApplicationContext(), Home.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T08:38:40.660

当您从一个 Activity 转到另一个 Activity 时，请完成上一个 Activity。然后

如果用户按下后退按钮并完成当前活动，那么我认为您的问题将得到解决。

```
Intent intent = new Intent(currentclass.this, Act1.class)
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(i);
finish(); 
```

最后

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        finish();
    }

    return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T08:28:13.637

尝试这个：

```
@Override
public void onBackPressed()
{
    Intent i=new Intent(currentclass.this,Home.class)
    startActivity(i);
    finish();
    super.onBackPressed();
} 
```

# php - 使用 Ajax 和 PHP Include 加载内容

> ID：13118023
> 
> 赞同：0
> 
> 时间：2012-10-29T08:19:26.323
> 
> 标签：php, javascript, jquery, ajax

我有一个带有 div 的 PHP 页面，该 div 有一个 PHP 包含，其中包含此文件：

```
<?php   
    include('mySql.php');
    include('Classes.php');

    $targetPage = "blogOutput.php";
    $noOfPosts = getNumberOfPosts();
    $adjacents = 3;
?>
<link rel="stylesheet" type="text/css" href="Styles/Miniblog.css" />
<script src="Scripts/jQuery.js"></script>
<script type="text/javascript">
    var page = 1;
    $(".Button").click(onClick());
    $(document).ready(onClick());

    function onClick() {
        alert('called');
        $("#posts").load("miniBlog.php", function(response, status, xhr) {
            if (status == "error") {
                var msg = "Error!: ";
                alert(msg);
            }
        });
        page++;
    }

</script>
<div class="PostTitle">
    <h2>What's New!?</h2>
</div>
<div id="posts">
</div>
<a class="BlogButton" href="">Next</a> 
```

我需要调用函数“onclick”而不刷新页面并在javascript中重置“page”变量。到目前为止，我所能做的就是让它运行一次脚本。我认为这也是错误的，因为它没有加载任何内容。这是页面：

```
<?php
    echo "I'm here!";
    if (isset($_POST['offset'])) {
        $offset = $_POST['offset'];

        $posts = getPosts($offset);
    }
?>

<div class="BlogPost">
    <h3><?php echo $posts[0]->Title; ?></h3>
    <p><?php echo $posts[0]->Body; ?></p>
    <p class="Date"><?php echo $posts[0]->Date; ?></p>
</div>
<div id="divider"></div>
<div class="BlogPost">
    <h3><?php echo $posts[1]->Title; ?></h3>
    <p><?php echo $posts[1]->Body; ?></p>
    <p class="Date"><?php echo $posts[1]->Date; ?></p>
</div> 
```

所以，澄清一下：我不确定为什么我的 ajax 调用不起作用，而且我不知道如何只加载 div 内容而不刷新整个页面。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T08:34:05.920

您无法看到 AJAX 加载的内容，因为在您单击锚点后页面正在重新加载。通过使用禁用锚事件`preventDefault()`，这应该可以解决它。

```
<script type="text/javascript">
    var page = 1;
    $(document).on('click','.BlogButton',function(e){

        // stop page from reloading
        e.preventDefault();

        $("#posts").load("miniBlog.php", function(response, status, xhr) {
            if (status == "error") {
                var msg = "Error!: ";
                alert(msg);
            }
        });
        page++;
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T08:22:28.533

不要在`click`方法参数中调用函数。你必须把对处理函数的引用。

```
var handler = function onClick () {...}

$("whatever").click(handler); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T08:24:21.330

将您的代码更改为

```
var page = 1;

$(document).ready(function(){
     $(".Button").click(onClick);
     onClick();
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T08:25:21.937

使用它而不是您的代码

```
var page = 1;
$(document).on('click','.Button',function(){

    $("#posts").load("miniBlog.php", function(response, status, xhr) {
        if (status == "error") {
            var msg = "Error!: ";
            alert(msg);
        }
    });
    page++;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T08:27:02.557

内容看起来不太大。你不能隐藏 div（其中已经存在内容）并在点击时显示它。

# java - 从 XML 文件中提取字数

> ID：13118026
> 
> 赞同：1
> 
> 时间：2012-10-29T08:19:53.073
> 
> 标签：java, dom, jaxb, sax

（这个问题与我之前在stackoverflow上发布的上一个问题有关......这是链接

[使用 XPath、SAX 或 DOM 从 XML 文件中提取值用于此特定场景](https://stackoverflow.com/questions/13107624/extracting-values-from-an-xml-file-either-using-xpath-sax-or-dom-for-this-speci)）

问题是，如果我想获得每个参与者在所有句子中写的单词，而不是获得句子，请记住上述情况。例如。如果“预算”一词总共使用了十次，参与者“Dolske”使用了七次，其他人使用了三次。所以我需要所有单词的列表以及每个参与者写了多少次？还有每回合的单词列表？

实现这一目标的最佳策略是什么？任何示例代码？

XML 附在此处（您也可以在引用的问题中查看）

“（495584）Firefox - 搜索建议传递错误的先前结果以形成历史记录”

```
<Turn>
  <Date>'2009-06-14 18:55:25'</Date>
  <From>'Justin Dolske'</From>
  <Text>
    <Sentence ID = "3.1"> Created an attachment (id=383211) [details] Patch v.2</Sentence>
    <Sentence ID = "3.2"> Ah. So, there's a ._formHistoryResult in the....</Sentence>
    <Sentence ID = "3.3"> The simple fix it to just discard the service's form history result.</Sentence>
    <Sentence ID = "3.4"> Otherwise it's trying to use a old form history result that no longer applies for the search string.</Sentence>
  </Text>
</Turn>

<Turn>
  <Date>'2009-06-19 12:07:34'</Date>
  <From>'Gavin Sharp'</From>
  <Text>
    <Sentence ID = "4.1"> (From update of attachment 383211 [details])</Sentence>
    <Sentence ID = "4.2"> Perhaps we should rename one of them to _fhResult just to reduce confusion?</Sentence>
  </Text>
</Turn>

<Turn>
  <Date>'2009-06-19 13:17:56'</Date>
  <From>'Justin Dolske'</From>
  <Text>
    <Sentence ID = "5.1"> (In reply to comment #3)</Sentence>
    <Sentence ID = "5.2"> &amp;gt; (From update of attachment 383211 [details] [details])</Sentence> 
    <Sentence ID = "5.3"> &amp;gt; Perhaps we should rename one of them to _fhResult just to reduce confusion?</Sentence>
    <Sentence ID = "5.4"> Good point.</Sentence>
    <Sentence ID = "5.5"> I renamed the one in the wrapper to _formHistResult. </Sentence>
    <Sentence ID = "5.6"> fhResult seemed maybe a bit too short.</Sentence>
  </Text>
</Turn> 
```

..... 等等

帮助将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T08:23:28.023

获取所有值，更好地使用 sTax 解析器，这对此类任务很有用。然后将所有句子分成单词并做任何你想做的事情。就像使用 Class Turn 创建模型一样，您可以在其中存储作者和句子，为该类编写服务并继续。:)

要在单词中拆分句子，请使用 split() 或 StringTokenizer，但不推荐使用 tokenizer。要使用拆分，请创建一个临时数组，例如

```
stringArray = sentence.toString().split(" "); 
```

或者像“sentence.getValue()”之类的。

在方法参数中放置正则表达式的位置。在您的情况下，它是一个简单的空格，因为它会拆分句子。然后，您可以检查单词并计算您需要的内容。

如果是 ArrayList，请使用 List.toArray() 在数组视图中获取您的列表。

# wpf - CheckBox 作为 ListBox 中的数据模板在滚动时重置 IsChecked 值

> ID：13118028
> 
> 赞同：0
> 
> 时间：2012-10-29T08:20:07.250
> 
> 标签：wpf, binding, checkbox, listbox, datatemplate

我想在我的项目中开始使用 MVVM，所以我开始研究它。当我在 WPF 上玩了一下时，我遇到了一个错误，我自己和探索互联网时都找不到他的解决方案。

我有类似的东西（我无法粘贴我的完整代码，因为它不在同一个网络中）：

主视图.Xaml

```
<ListBox ItemsSource="{Binding Persons}">
 <ListBox.ItemTemplate>
  <DataTemplate>
   <CheckBox Content="{Binding Name}">
    <i:Interaction.Triggers>
     <i:EventTrigger EventName="Checked">
        <my:AddToInvitation />
     </i:EventTrigger>
     <i:EventTrigger EventName="Unchecked">
        <my:RemoveFromInvitation />
     </i:EventTrigger>
    </i:Interaction.Triggers>
   </CheckBox>
  </DataTemplate>
</ListBox.ItemTemplate> 
```

主视图模型.cs

```
public ObservableCollection<PersonViewModel> Persons { get; set; }

public MainViewModel()
{
  this.Persons = new ObservableCollection<PersonViewModel>();
  for(int i=0;i<1000;i++)
  {
     PersonViewModel personVM = new PersonViewModel (string.Format("Person - {0}",i));
     this.Persons.add(personVM);
  }
} 
```

PersonViewModel.cs

```
private Person PersonObject { get; set; }

public string Name
{
  get
  {
     return this.PersonObject.Name;
  }
}

public PersonViewModel(string personName)
{
  this.PersonObject = new Person(personName);
} 
```

个人.cs

```
public string Name { get; set; }

public Person(string name)
{
   this.Name = name;
} 
```

现在，如果您尝试粘贴并运行它，它看起来会很好。问题是当您尝试以下说明时：

```
1) Check the first 10 persons in the ListBox.
2) Scroll down the ListBox to the bottom of it.
3) Leave the mouse when the list box is scrolled down.
4) Scroll back up to the top of the ListBox.
5) Poof! you'r checking disappeared. 
```

现在我找到的解决方案是将 IsChecked 属性（虽然我并不真正需要它）添加到 PersonViewModel 并将其绑定到 CheckBox IsChecked DependencyProperty，但随后我添加了一个功能，让用户按下按钮它将遍历 ListBox 中的所有人员并将其 IsChecked 属性更改为 true(Button -> Select all)。在消失检查错误之后，我遇到了另一个错误，我认为它以某种方式与消失的检查有关 - 我在发生检查和取消检查时触发的操作只会在您全选时触发某些复选框。

如果你不尝试它有点难以理解这个错误，所以只有当你尝试过时才请在这里评论。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:41:56.890

简单的答案是：你在逆流而上。

绑定是关于更改 ViewModel 中的值并允许您针对简单的视图模型类编写代码，以便您的表示逻辑没有业务逻辑。在您的示例中，执行的决定 `AddToInvitation` `RemoveFromInvitation`在您看来，不应该存在。

你会很好地使用`bool IsInvited{get;set;}`易于绑定到复选框的属性（不需要依赖属性）。这将允许用户更改保留在您的视图模型中。如果您需要一些其他更复杂的逻辑，您应该附加到您的 ViewModel 必须实现的`PropertyChagned`事件表单接口。`INotifyPropertyChanged`然后您可以随意更改简单类中的属性，ui 将相应更新。

# python - 递归删除python中的文件夹

> ID：13118029
> 
> 赞同：284
> 
> 时间：2012-10-29T08:20:09.260
> 
> 标签：python, directory

我在删除空目录时遇到问题。这是我的代码：

```
for dirpath, dirnames, filenames in os.walk(dir_to_search):
    //other codes

    try:
        os.rmdir(dirpath)
    except OSError as ex:
        print(ex) 
```

参数`dir_to_search`是我传递需要完成工作的目录的位置。该目录如下所示：

```
test/20/...
test/22/...
test/25/...
test/26/... 
```

请注意，以上所有文件夹都是空的。当我运行这个脚本时，文件夹`20`，`25`单独被删除！但是这些文件夹`25`并`26`没有被删除，即使它们是空文件夹。

### 编辑：

我得到的例外是：

```
[Errno 39] Directory not empty: '/home/python-user/shell-scripts/s3logs/test'
[Errno 39] Directory not empty: '/home/python-user/shell-scripts/s3logs/test/2012'
[Errno 39] Directory not empty: '/home/python-user/shell-scripts/s3logs/test/2012/10'
[Errno 39] Directory not empty: '/home/python-user/shell-scripts/s3logs/test/2012/10/29'
[Errno 39] Directory not empty: '/home/python-user/shell-scripts/s3logs/test/2012/10/29/tmp'
[Errno 39] Directory not empty: '/home/python-user/shell-scripts/s3logs/test/2012/10/28'
[Errno 39] Directory not empty: '/home/python-user/shell-scripts/s3logs/test/2012/10/28/tmp'
[Errno 39] Directory not empty: '/home/python-user/shell-scripts/s3logs/test/2012/10/26'
[Errno 39] Directory not empty: '/home/python-user/shell-scripts/s3logs/test/2012/10/25'
[Errno 39] Directory not empty: '/home/python-user/shell-scripts/s3logs/test/2012/10/27'
[Errno 39] Directory not empty: '/home/python-user/shell-scripts/s3logs/test/2012/10/27/tmp' 
```

我在哪里犯错？

* * *

## 回答 #1

> 赞同：564
> 
> 时间：2012-10-29T08:27:57.667

尝试[`shutil.rmtree`](https://docs.python.org/library/shutil.html#shutil.rmtree)：

```
import shutil
shutil.rmtree('/path/to/your/dir/') 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-10-29T08:28:13.360

的默认行为[`os.walk()`](https://docs.python.org/3/library/os.html#os.walk)是从根走到叶。`topdown=False`开始从叶子`os.walk()`走到根部。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2018-04-11T18:26:09.077

这是我的纯[`pathlib`](https://docs.python.org/library/pathlib.html)递归目录取消链接器：

```
from pathlib import Path

def rmdir(directory):
    directory = Path(directory)
    for item in directory.iterdir():
        if item.is_dir():
            rmdir(item)
        else:
            item.unlink()
    directory.rmdir()

rmdir(Path("dir/")) 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-10-29T08:29:41.730

从 Python 标准库`rmtree()`中尝试[`shutil`](https://docs.python.org/library/shutil.html#shutil.rmtree)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-07-25T09:44:36.483

最好使用绝对路径并仅导入 rmtree 函数 `from shutil import rmtree` ，因为这是一个大包，上面的行只会导入所需的函数。

```
from shutil import rmtree
rmtree('directory-absolute-path') 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-11-04T13:02:32.210

只是对于下一个搜索 micropython 解决方案的人来说，这完全基于 os (listdir, remove, rmdir)。它既不完整（尤其是在错误处理中）也不花哨，但它在大多数情况下都可以工作。

```
def deltree(target):
    print("deltree", target)
    for d in os.listdir(target):
        try:
            deltree(target + '/' + d)
        except OSError:
            os.remove(target + '/' + d)

    os.rmdir(target) 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-06-17T09:18:52.877

该命令（由 Tomek 给出）**不能删除** 文件，如果它是**只读**的。因此，可以使用 -

```
import os, sys
import stat

def del_evenReadonly(action, name, exc):
    os.chmod(name, stat.S_IWRITE)
    os.remove(name)

if  os.path.exists("test/qt_env"):
    shutil.rmtree('test/qt_env',onerror=del_evenReadonly) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-04-07T22:37:18.730

这是一个递归解决方案：

```
def clear_folder(dir):
    if os.path.exists(dir):
        for the_file in os.listdir(dir):
            file_path = os.path.join(dir, the_file)
            try:
                if os.path.isfile(file_path):
                    os.unlink(file_path)
                else:
                    clear_folder(file_path)
                    os.rmdir(file_path)
            except Exception as e:
                print(e) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-12-02T19:14:24.887

如果您只是在寻找要删除的单个路径，则该命令`os.removedirs`是该作业的工具，例如：

```
os.removedirs("a/b/c/empty1/empty2/empty3") 
```

将删除`empty1/empty2/empty3`，但留下 a/b/c （假设 c 有一些其他内容）。

```
 removedirs(name)
        removedirs(name)

        Super-rmdir; remove a leaf directory and all empty intermediate
        ones.  Works like rmdir except that, if the leaf directory is
        successfully removed, directories corresponding to rightmost path
        segments will be pruned away until either the whole path is
        consumed or an error occurs.  Errors during this latter phase are
        ignored -- they generally mean that a directory was not empty. 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-06-14T12:03:06.060

这是**另一个纯路径库解决方案**，但*没有*递归：

```
from pathlib import Path
from typing import Union

def del_empty_dirs(base: Union[Path, str]):
    base = Path(base)
    for p in sorted(base.glob('**/*'), reverse=True):
        if p.is_dir():
            p.chmod(0o666)
            p.rmdir()
        else:
            raise RuntimeError(f'{p.parent} is not empty!')
    base.rmdir() 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-04-18T22:07:37.887

对于Linux用户，您可以简单地以pythonic方式运行shell命令

```
import os
os.system("rm -r /home/user/folder1  /home/user/folder2  ...") 
```

如果遇到任何问题，请不要`rm -r`使用`rm -rf` ，但请记住*f*将强制删除目录。

where`rm`代表*删除*，*递归*和递归*+*`-r`强制。*`-rf`*

 **注意：目录是否为空都没有关系，它们将被删除。**

# excel - 将 VBA 表单中的复选框添加到 Excel 电子表格中

> ID：13118032
> 
> 赞同：0
> 
> 时间：2012-10-29T08:20:57.183
> 
> 标签：excel, vba

我正在尝试填充大小未知的范围，因为用户可以在第一组中选择多达 15 个项目。这将被插入到某一行。

我有一个带有以下名称/值的复选框：

```
Name         Value
==========   =====
chk_week1    1
chk_week2    2
...          ...
...          ...
chk_week15   15 
```

例如，如果用户选择**chk_week1**、**chk_week2**、**chk_week4**和**chk_week5**，则应将其作为 1、2、4、5 插入到单元格中。

我已经包含了一张图片，以更好地展示它：

![在此处输入图像描述](../Images/f5d8cc2b560f477c688782c4ef542823.png)

每个复选框都有上表中列出的名称和值。这是我到目前为止使用的代码：

```
Private Sub btnSubmit_Click()

Dim ws As Worksheet
Dim rng1 As Range
Set ws = Worksheets("main")

' Copy the data to the database
' Get last empty cell in column A
Set rng1 = ws.Cells(Rows.Count, "a").End(xlUp)

deptCodeSplit = Split(cbo_deptCode.Value, " ")

' Having difficulty adding the code here
' rng1.Offset(1, 6) = weeks

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:21:19.943

已标记复选框的值显示在 Linkedcell 中。两者都可以从复选框属性中分配。

让我们为每个单独的复选框分配从 1 到 15 的值，Linkedcells 在单元格 A1 到 A15 中，对于勾选的复选框具有从 1 到 15 的唯一值，或者对于未选中的复选框为空白。

B列中的相应单元格将用于顺序合并：

B1：

```
=IF(A1<>"",A1,"") 
```

B2 至 Bn：

```
=IF(AND(A2<>"",B1<>""),B1&" ,"&A2,IF(AND(B1="",A2<>""),A2,B1)) 
```

公式可以无限向下复制，所需的字符串将在最后一行。

要在 VBA 中完成相同的操作：

```
Function ValuesFromRange(Rng As range, Optional Delimiter As String)

Dim c As range
Dim txt As String

If Delimiter = "" Then Delimiter = ","
  txt = ""

   For Each c In Rng
     If Len(c.Value) > 0 Then
       If Len(txt) = 0 Then
          txt = c.Value
        Else
          txt = Trim(txt) & Delimiter & c.Value
        End If
     End If
   Next

 ValuesFromRange = txt

End Function 
```

电子表格示例： [http ://www.bumpclub.ee/~jyri_r/Excel/ValuesFromRange.xls](http://www.bumpclub.ee/~jyri_r/Excel/ValuesFromRange.xls)

# salesforce - Salesforce-通过导入 CSV 文件创建联系人和用户并向用户发送通知电子邮件

> ID：13118039
> 
> 赞同：1
> 
> 时间：2012-10-29T08:21:34.270
> 
> 标签：salesforce, apex-code, visualforce

我想通过导入 csv 文件创建与帐户相关的联系人和用户。创建用户后，生成的用户名和密码应发送到相应用户的电子邮件地址。

我打算使用 Vf 页面来接受 csv 文件和**联系人**和**用户**API 来添加联系人和用户。但我不确定通过 API 向用户发送电子邮件通知。

那么任何人都可以为我提供最好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T10:50:07.260

您需要使用`Database.insert()`风味而不是直接`insert users;`

查看[DML 选项帮助主题](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_database_dmloptions.htm#emailheader)，尤其是“emailHeader”属性

这样的事情应该可以解决问题：

```
List<User> users = new List<User>(); // fill in with data from your CSV
Database.DMLOptions dlo = new Database.DMLOptions();
dlo.EmailHeader.triggerUserEmail = true;
database.insert(users, dlo); 
```

请注意，您不能插入非活动用户。您可以在插入后立即停用它们，但它们无法登录，因此您可能希望禁止发送电子邮件，而不是强制执行它。在开始之前，请确保您拥有足够数量的许可证！

最后但并非最不重要的一点 - 您可以通过为他们设置相同的密码来作弊`System.setPassword('user id', 'new password')`:) 虽然不建议将此功能公开给您的最终用户，但一次只能处理 1 个用户并浪费 1 个 DML 语句......

# google-app-engine - 是否有 Google AppEngine ApplicationException 的 applicationError 代码和描述列表？

> ID：13118041
> 
> 赞同：2
> 
> 时间：2012-10-29T08:21:40.480
> 
> 标签：google-app-engine

大家好，感谢您抽出宝贵的时间，

我正在开发一个基于 java 的 GAE Web 应用程序，但有时我会得到 ApiProxy.ApplicationExceptions。

在当前情况下，当我使用（是的，我知道，仍然是实验性的）FileStore API 打开到 blob 的写入通道时，它们随机出现并附带 applicationError 108。虽然 API 仍处于实验状态，但我想正确处理抛出的异常。因此我的问题是：

**我在哪里可以找到可能的应用程序错误列表，包括它们的描述？**

截至目前，我无法确定问题出在哪里，因为抛出的异常不包含消息、提示或原因短语等内容，而仅包含错误 ID 108：

```
Caused by: com.google.apphosting.api.ApiProxy$ApplicationException: ApplicationError: 108: 
    at java.lang.Thread.getStackTrace(Thread.java:1495)
    at com.google.apphosting.runtime.ApiProxyImpl.doSyncCall(ApiProxyImpl.java:240)
    at com.google.apphosting.runtime.ApiProxyImpl.access$000(ApiProxyImpl.java:66)
    at com.google.apphosting.runtime.ApiProxyImpl$1.run(ApiProxyImpl.java:183)
    at com.google.apphosting.runtime.ApiProxyImpl$1.run(ApiProxyImpl.java:180)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.google.apphosting.runtime.ApiProxyImpl.makeSyncCall(ApiProxyImpl.java:180)
    at com.google.apphosting.runtime.ApiProxyImpl.makeSyncCall(ApiProxyImpl.java:66)
    at com.googlecode.objectify.cache.TriggerFutureHook.makeSyncCall(TriggerFutureHook.java:154)
    at com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:107)
    at com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:56)
    at com.google.appengine.api.files.FileServiceImpl.makeSyncCall(FileServiceImpl.java:584)
    ... 65 more 
```

此外，相应的 javadoc 在提供信息方面非常保守：[https ://developers.google.com/appengine/docs/java/javadoc/com/google/apphosting/api/ApiProxy.ApplicationException](https://developers.google.com/appengine/docs/java/javadoc/com/google/apphosting/api/ApiProxy.ApplicationException)

目前我用 500 直接取消了这些请求，但由于我不确定发生了什么，我可能应该做其他/更多的事情。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T04:48:01.093

我能得到的最好信息来自 Python 源代码： [http ://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/api/files/file_service_pb.py](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/api/files/file_service_pb.py)

# typescript - TypeScript 定义文件

> ID：13118051
> 
> 赞同：8
> 
> 时间：2012-10-29T08:22:42.673
> 
> 标签：typescript, definitions

我正在使用 TypesScript，但是当我使用 HTMLCanvasElement 等浏览器类型时编译器会报错。我想我需要这些类型的定义文件。我敢打赌，有一个 DOM 和大多数流行框架的定义文件存储库，但 Google 无法帮助我找到它。

你们知道这样的存储库吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-29T11:18:45.417

除了 @Christoffer 对 DOM 所说的之外，@Boris Yankov 在这里有一个非常有用的存储库：[https ://github.com/borisyankov/DefinitelyTyped](https://github.com/borisyankov/DefinitelyTyped) ~~，其中包含超过~~30、130到**200 个**库的定义文件（并计数！）。

~~现在甚至还有一个类型定义文件的管理器：http: [//definitelytyped.org/tsd/](http://definitelytyped.org/tsd/)~~（**不要关注：链接现在是 NSFW 垃圾邮件**）

**并且**：现在 nuget 上有很多定义文件：[http ://www.nuget.org/packages?q=TypeScript](http://www.nuget.org/packages?q=TypeScript)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-29T08:29:06.057

源代码中包含的内容`lib.d.ts`（[http://typescript.codeplex.com/SourceControl/changeset/view/fe3bc0bfce1f#bin%2flib.d.ts](http://typescript.codeplex.com/SourceControl/changeset/view/fe3bc0bfce1f#bin/lib.d.ts)）包含大多数 DOM 相关内容的定义。如果您使用的是 Visual Studio，则应考虑下载包含`lib.d.ts`捆绑模板的工具。

如果缺少任何内容，我认为您可以使用`declare`语法。

# javascript - 如何使计数变量起作用？

> ID：13118058
> 
> 赞同：0
> 
> 时间：2012-10-29T08:23:26.843
> 
> 标签：javascript, jquery

所以我试图用计数触发一个事件，但我似乎没有让它工作。我想要做的是在点击`#reward`6 个`a.correct`链接时淡入淡出。不知道为什么它不起作用。希望得到一些帮助:)

链接： http: [//www.carlpapworth.com/htmlove/sweet-talk.html](http://www.carlpapworth.com/htmlove/sweet-talk.html)

HTML：

```
 <body>
<header>
    <div id="headerTitle"><a href="index.html">&lt;html<span class="heart">&hearts;</span>ve&gt;</a>
            </div>
            <div id="help">
                <h2>?</h2>
                <div id="helpInfo">
                    <p>The name of the puzzle should lead u to success!</p>
                </div>
            </div>
        </header>
    <div id="reward">
        <div id="rewardContainer">
            <div id="rewardBG" class="heart">&hearts;
            </div>
            <p>OMG, this must be luv<br><a href="index.html" id="exit4" data-key="4" class="exit">x</a></p>
        </div>
    </div>  
    <div id="pageWrap">
        <div id="poem">
        <a href="#">w</a>
        <a href="#">h</a>
        <a href="#">e</a>
        <a href="#">n</a>&nbsp;

        <a href="#">t</a>
        <a href="#">h</a>
        <a href="#">e</a>&nbsp;

        <a href="#">t</a>
        <a href="#" class="correct">h</a>
        <a href="#">u</a>
        <a href="#">m</a>
        <a href="#">p</a>
        <a href="#">i</a>
        <a href="#">n</a>
        <a href="#">g</a>&nbsp;

        <a href="#">g</a>
        <a href="#">r</a>
        <a href="#">o</a>
        <a href="#">w</a>
        <a href="#">s</a>&nbsp;

        <br>
        <a href="#">w</a>
        <a href="#">h</a>
        <a href="#">e</a>
        <a href="#">n</a>&nbsp;

        <a href="#">t</a>
        <a href="#">h</a>
        <a href="#">e</a>&nbsp;
        <a href="#">p</a>
        <a href="#">u</a>
        <a href="#">l</a>
        <a href="#">s</a>
        <a href="#" class="correct">e</a>&nbsp;

        <a href="#">i</a>
    <a href="#">s</a>&nbsp;

    <a href="#">p</a>
    <a href="#">u</a>
    <a href="#">m</a>
    <a href="#">p</a>
    <a href="#">i</a>
    <a href="#">n</a>
    <a href="#">g</a>&nbsp;

    <a href="#">h</a>
    <a href="#">a</a>
    <a href="#">r</a>
    <a href="#">d</a>
    <br>
    </a>
    <a href="#" class="correct">a</a>
    <a href="#">n</a>
    <a href="#">d</a>
    <br>
    <a href="#">e</a>
    <a href="#">v</a>
    <a href="#">e</a>
    <a href="#">r</a>
    <a href="#">y</a>&nbsp;

    <a href="#">s</a>
    <a href="#">e</a>
    <a href="#">n</a>
    <a href="#">s</a>
    <a href="#">e</a>&nbsp;

    <a href="#" class="correct">r</a>
    <a href="#">e</a>
    <a href="#">p</a>
    <a href="#">e</a>
    <a href="#">a</a>
    <a href="#">t</a>
    <a href="#">s</a>&nbsp;

    <a href="#">t</a>
    <a href="#">h</a>
    <a href="#">e</a>&nbsp;

    <a href="#">b</a>
    <a href="#">e</a>
    <a href="#">a</a>
    <a href="#">t</a>
    <br>
    <a href="#">t</a>
    <a href="#">h</a>
    <a href="#">e</a>
    <a href="#">n</a>&nbsp;

    <a href="#">l</a>
    <a href="#">e</a>
    <a href="#">t</a>
    <a href="#" class="correct">t</a>
    <a href="#">i</a>
    <a href="#">n</a>
    <a href="#">g</a>&nbsp;

    <a href="#">g</a>
    <a href="#">o</a>&nbsp;

    <a href="#">i</a>
    <a href="#">s</a>&nbsp;

    <a href="#">a</a>
    <a href="#">l</a>
    <a href="#">l</a>
    <br>
    <a href="#">o</a>
    <a href="#">u</a>
    <a href="#">r</a>&nbsp;

    <a href="#">s</a>
    <a href="#">o</a>
    <a href="#">r</a>
    <a href="#">r</a>
    <a href="#">y</a>&nbsp;

    <a href="#" class="correct">s</a>
    <a href="#">o</a>
    <a href="#">u</a>
    <a href="#">l</a>
    <a href="#">s</a>&nbsp;

    <a href="#">m</a>
    <a href="#">u</a>
    <a href="#">s</a>
    <a href="#">t</a>&nbsp;

        <a href="#">d</a>
    <a href="#">o</a>
    </div>
</div> <!-- END Page Wrap -->
<footer>
    <div class="heartCollection">
        <p>collect us if u need luv:<p>
        <ul>
            <li><a id="collection1" class="notFound">&hearts;</a></li>
            <li><a id="collection2" class="notFound">&hearts;</a></li>
            <li><a id="collection3" class="notFound">&hearts;</a></li>
            <li><a id="collection4" class="notFound">&hearts;</a></li>
            <li><a id="collection5" class="notFound">&hearts;</a></li>
            <li><a id="collection6" class="notFound">&hearts;</a></li>
        </ul>
    </div>
    <div class="credits">with love from Popm0uth ©2012</div>
</footer> 
```

Javascript：

```
var count = 0;
$(document).ready(function() {

    $('a.correct').click(function(){    
                $(this).css('color','#ff63ff');
                count++;
    });
    $('a:not(.correct)').click(function(){
        $('a.correct').css('color','#363636');  
    });
    if (count == 6) {
        $('#reward').fadeIn(1000);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T08:25:21.673

只需将您的淡入淡出条件包含在点击侦听器中，

```
var count = 0;
$(document).ready(function() {

$('a.correct').click(function(){    
            $(this).css('color','#ff63ff');
            count++;
if (count == 6) {
    $('#reward').fadeIn(1000);
}
});
$('a:not(.correct)').click(function(){
    $('a.correct').css('color','#363636');  
}); 
```

});

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T08:27:01.720

你所做的一切都很好，除了你在奖励中淡出的部分。这只会发生在 document.ready 上。我会把它放在计数增量之后：

```
$('a.correct').click(function(){    
            $(this).css('color','#ff63ff');
            count++;
            if (count == 6) {
                $('#reward').fadeIn(1000);
            }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T08:35:42.797

```
var count = 0;

    $(document).ready(function() {

        $('a.correct').click(function(){    

                    $(this).css('color','#ff63ff');
                    count++;
             alert(count);
        });
        $("a:not(class correct) ").click(function(){
            $('a.correct').css('color','#363636');  
           if (count == 6) {
            $('#reward').fadeIn(1000);
            }
        });

    }); 
```

小提琴[演示 jsfiddle](http://jsfiddle.net/ajFsx/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T08:39:13.763

**工作演示** [http://jsfiddle.net/cztSt/](http://jsfiddle.net/cztSt/)

这将有两件事：

*   当计数达到 6 时，我会调用检查函数。
*   如果你想要效果，你的渲染应该隐藏起来`fadeIn`。

休息应该可以满足您的需求`:)`

**代码**

```
$(document).ready(function() {
    count = 0;
    $('a.correct').click(function() {
        $(this).css('color', '#ff63ff');
        count++;
        check();
    });
    $('a:not(.correct)').click(function() {
        $('a.correct').css('color', '#363636');
    });

    function check() {

        if (count == 6) {
            $('#reward').fadeIn(1000);
        }
    }
});​ 
```

# objective-c - MVC：控制器保留模型对象或视图对象的数组？

> ID：13118061
> 
> 赞同：0
> 
> 时间：2012-10-29T08:23:45.530
> 
> 标签：objective-c, ios, model-view-controller, conceptual

我有一个视图控制器`placeViewController`，它拉入一堆`Place`对象，并从这些加载并填充一组匹配的`PlaceView`对象，然后将这些对象显示为其主视图的子视图。

我需要定期更新这些视图，这需要将模型和其他地方的信息推送到视图中

我应该如何正确地构建它？

*   保留一个对象数组`Place`并给模型一个`PlaceView`属性来存储指向视图的指针

*   保留一个对象数组`PlaceView`并为视图提供一个`Place`属性来存储指向位置的指针

*   保留两个数组并使用大量`indexOfObject` `objectAtIndex`在它们之间跳转

*   还有什么办法？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:11:58.240

> 我需要定期更新这些视图，这需要将模型和其他地方的信息推送到视图中

您应该真正关注 ObserverPattern。您的视图注册到“通知”，当进行更改时，您注册的视图会收到通知。

[http://en.wikipedia.org/wiki/Observer_pattern](http://en.wikipedia.org/wiki/Observer_pattern)

您仍然可以使用 NSNotificationCenter，但它不会满足您的需求，因为您需要您的视图对每个 Place 对象进行更新（像字典一样配对）。所以我建议你实现你自己的。它将松散耦合，因为您的控制器只会在观察者和您的视图之间粘合，并且所有“逻辑”都将由观察者处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:36:00.437

好吧，basvk 在他的评论中得到了答案，但没有发布一个实际的答案让我标记为正确。

所以这里是：“我会`NSMutableArray`用`PlaceView`对象创建一个。这个`PlaceView`类拥有一个`@property Place *place`”

# javascript - 将数组转换为 HTML 表的 JSON 对象

> ID：13118068
> 
> 赞同：0
> 
> 时间：2012-10-29T08:24:30.893
> 
> 标签：javascript, jquery

下面的代码是我从 API 收到的 JSON 响应。不幸的是，我无法更改此响应的发送方式，我只能在 Javascript/jQuery 范围内使用此响应。

我的目标是将其转换为 HTML 表格。

我自己已经尝试过这样做；

```
function CreateTableView(objArray, theme, enableHeader) {
    // set optional theme parameter
    if (theme === undefined) {
        theme = 'mediumTable'; //default theme
    }

    if (enableHeader === undefined) {
        enableHeader = true; //default enable headers
    }

    // If the returned data is an object do nothing, else try to parse
    var array = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;

    var str = '<table id="res" class="' + theme + '">';

    // table head
    if (enableHeader) {
        str += '<thead><tr>';
        for (var index in array[0]) {
            str += '<th scope="col">' + index.toUpperCase() + '</th>';
        }
        str += '</tr></thead>';
    }

    // table body
    str += '<tbody>';
    for (var i = 0; i < array.length; i++) {
        str += (i % 2 == 0) ? '<tr class="alt" id="' + array[i]['id'] + '">' : '<tr id="' + array[i]['id'] + '">';
        for (var index in array[i]) {
            str += '<td style="width:15%;">' + htmlspecialchars_decode(array[i][index]) + '</td>';
        }
        str += '<td><a href="#" onClick="editPerson(' + array[i]['id'] + ');">Edit</a></td><td><a href="#" onClick="delPerson(' + array[i]['id'] + ');">Delete</a></td></tr>';
    }
    str += '</tbody>'
    str += '</table>';
    return str;
} 
```

但是我只能让标题显示......但如果 JSON 响应只有一个数组，即返回一行，它会很好地工作。

上面的代码改编自 Stackoverflow 上类似这样的其他几个问题，我在这上面花了几天时间，无法让这些结果显示在表格中......这只是像这个例子一样返回的许多其他例子中的一个，我将需要多次重复使用此解决方案，这对我来说非常重要。

```
"ItemArray":{
        "id":"14"
        ,"0":
            {"id":"1","username":"guest","fname":"Guest","lname":"User","email":"example@domain.com","group":"member","active":"0","url":null,"last_activity":null}
        ,"1":
            {"id":"2","username":"system","fname":"Internal","lname":"System","email":"example@domain.com","group":"member","active":"0","url":null,"last_activity":null}
        ,"2":
            {"id":"3","username":"master","fname":"Super","lname":"Admin","email":"example@domain.com","group":"member","active":"0","url":null,"last_activity":null}
        ,"3":
            {"id":"14","username":"apitest","fname":"API","lname":"Test","email":"user@domain.com","group":"member","active":"0","url":null,"last_activity":"2012-10-29 02:48:43"}
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:18:58.863

你不能使用`array.length`对象，所以你需要：

```
for (var o in array) if (array.hasOwnProperty(o)) {
    var row = array[o];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T08:52:42.200

好的...问题是您的项目数组被解析为一个对象。不是数组。如果你记录这个：

```
 typeof array.length 
```

结果未定义。所以你的循环不会运行。

# c# - 如何在 WPF 中有效地在 Combobox 中添加项目

> ID：13118073
> 
> 赞同：0
> 
> 时间：2012-10-29T08:24:57.507
> 
> 标签：c#, .net, wpf, mvvm, combobox

我是一名 C++ 开发人员，最近开始学习 WPF。我正在开发一个使用 MVVM 的 wpf 应用程序。我有组合框，我需要在其中添加项目。尽管我通常使用 ComboboxPropertyName.Add("") 在其中添加项目，但我正在寻找一种有效的方法来添加项目而无需太多代码长度。这是代码：

**XAML：**

```
<ComboBox Height="23" ItemsSource="{Binding BoardBoxList}" SelectedItem="{Binding SelectedBoardBoxList, Mode=TwoWay}" SelectedIndex="0" Name="comboBox2" /> 
```

**视图模型类：**

```
public ObservableCollection<string> BoardBoxList
    {
        get { return _BoardBoxList; }
        set
        {
            _BoardBoxList = value;
            OnPropertyChanged("BoardBoxList");
        }
    }

    /// <summary>
    /// _SelectedBoardBoxList
    /// </summary>
    private string _SelectedBoardBoxList;
    public string SelectedBoardBoxList
    {
        get { return _SelectedBoardBoxList; }
        set
        {
            _SelectedBoardBoxList = value;
            OnPropertyChanged("SelectedBoardBoxList");
        }
    } 
```

以下是我在 C++ 中的组合框中添加项目的方式：

```
static const signed char boards[][9] = {
{},                                           // left blank to indicate no selection
{ 'S', '1', '0', '1', '0', '0', '1', '2', 0 },   // redhook
{ 'S', '1', '0', '1', '0', '0', '1', '8', 0 },   // bavaria
{ 'S', '1', '0', '1', '0', '0', '2', '0', 0 },   // flying dog
};

m_boardBox = new ComboBox(String::empty);
for(int i = 1; i < 4; i++)
    m_boardBox->addItem(String((char*)(boards[i])), i); 
m_boardBox->setSelectedId(2); // select Bavaria by default
addAndMakeVisible(m_boardBox); 
```

如果您注意到上面，您会发现循环添加项目很容易。这就是我想将项目添加到我的组合框的方式。

如果我使用`_BoardBoxList.Add("....");`我将不得不使用许多 .Adds。它们是一种有效的方式，我可以将项目存储在列表/集合中并以上面的形式将它们添加到组合框中`for loop`吗？

请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T08:29:22.003

您可以使用 ObservableCollection 的构造函数，该构造函数可以使用可枚举作为起始集。

```
new ObservableCollection<string>(boards); 
```

板必须是字符串而不是字符的集合。

编辑：

```
var boards = new[]{ "S1010012" ,   // redhook
                   "S1010018",   // bavaria
                   "S1010020"    // flying dog
                  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T08:28:40.297

应该没有什么可以阻止您在 C# 中使用相同的循环将项目添加到可观察集合中，`ComboBox`它将自动更新。除非你对你的问题更具体，否则没有什么可说的。

该[`ItemsSource`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemssource.aspx)属性的目标是您不必`ComboBox`通过循环强制将项目添加到自身，而只需指定一个集合，控件将处理其余的，如果您的业务项目如何进入集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T08:29:09.257

如果我理解正确，你可以使用类`AddRange`的方法`List`

您可以创建列表（添加使用 AddRange - 用于添加、for 循环等），然后基于该列表创建 Observable Collection。

```
ObservableCollection<string> collection 
                 = new ObservableCollection<string>(myList); 
```

如果你需要它（更新），你可以将 observable 绑定到`ItemSource`，否则你可以绑定列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T08:29:33.970

使用`ComboBox`'`ItemsSource`属性。如果您使用 an`ObservableCollection`作为源，您可能会忘记手动更新项目而只使用视图模型中的列表。

# asp.net - asp.net mvc 3.0 三个应用合二为一

> ID：13118075
> 
> 赞同：0
> 
> 时间：2012-10-29T08:25:08.740
> 
> 标签：asp.net, asp.net-mvc-3

我将三个 MVC3 Web 项目整合到一个解决方案中，例如管理员、UI 和服务（WCF 服务）。

现在我需要将它合并到一个项目中，因为我必须将它托管在网络解决方案的单个 IP 上。请建议我们如何结合所有这些项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:45:54.583

您可以将这三个应用程序托管在服务器上，并将它们绑定到相同的 IP 但不同的端口号。在应用程序绑定中，为应用程序提供不同的端口号。就像 UI 的默认 (80) 和 web 服务的端口 8080 和管理应用程序的端口 8090。

另一种选择是使用相同的 IP 和端口，但要求您的管理员在 DNS 中配置 3 个映射到相同 IP 的主机名。然后在绑定中为每个 Web 应用程序指定每个不同的主机名。

如果上述解决方案在您的情况下不可接受，那么您需要对应用程序进行一些更改并使用 MVC 区域对其进行组织。然后您将拥有一个应用程序和 3 个区域，但是如果这 3 个应用程序不同，您需要注意会话管理、安全性等。这是信息： http: [//msdn.microsoft.com/en-us/library/ee671793 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ee671793%28v=vs.100%29.aspx)

另一个： http: [//www.codeguru.com/csharp/.net/net_asp/mvc/article.php/c20227/Using-Areas-in-ASPNET-MVC-Application.htm](http://www.codeguru.com/csharp/.net/net_asp/mvc/article.php/c20227/Using-Areas-in-ASPNET-MVC-Application.htm)

# oracle - 如何编写具有多个操作（如选择和更新）的过程

> ID：13118077
> 
> 赞同：0
> 
> 时间：2012-10-29T08:25:20.097
> 
> 标签：oracle, plsql, oracle10g, oracle11g, plsqldeveloper

桌子

```
Id
Count 
```

我想编写一个过程以`Count`在表中以' `Id`'为键查找''。得到' `count`'后，我必须将其递增并在表中更新回' `Id`'。如何在不使用游标的情况下使用过程编写此代码。

我想要一个像下面这样的简单程序，但它没有执行。它说程序成功但编译错误。帮帮我。

```
create or replace PROCEDURE newpro( inId IN NUMBER, outcount OUT NUMBER) is
select COUNT into outcount from Table1 WHERE ID= inId ;
BEGIN 
outcount := outcount +1; 
update Table1 set COUNT = outcount WHERE ID = inId ; 
END; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T08:26:43.447

```
UPDATE tableName
SET "Count" = "Count" + 1
WHERE ID = valueHere 
```

*   [***查看 SQLFiddle 演示***](http://sqlfiddle.com/#!4/ef616/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:47:04.430

试试这个

```
create or replace Procedure Newpro
(
  Inid     in number,
  Outcount out number
) is
begin
  select count + 1
    into Outcount
    from Table1
   where Id = Inid;

  update Table1
     set count = Outcount
   where Id = Inid;   
end; 
```

# asp.net - 用于功能手机的 asp.net 移动网络

> ID：13118086
> 
> 赞同：0
> 
> 时间：2012-10-29T08:26:05.837
> 
> 标签：asp.net, mobile

我有一个在 asp.net webforms .net V4 中完成的现有网站。Visual Studio 2010 我想为低端功能手机的网站添加一个简单的移动部分。

我从哪说起呢？我是否只是在检测到移动设备时进行重定向，然后跳转到具有非常简单 UI 的页面？还是我必须使用特殊的框架才能正确呈现？我应该使用 WAP 网站吗？

请注意，这适用于非常低端的手机

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:12:13.127

您可以在检测到他正在使用移动设备时重定向用户，或者使用电话间隙或其他东西制作一些全新的东西。

# php - 使用 in_array 查找名称然后仅回显找到的值？

> ID：13118090
> 
> 赞同：0
> 
> 时间：2012-10-29T08:26:25.770
> 
> 标签：php

我敢肯定我的标题并没有那么有帮助。我想要做的是，我有一个包含名字的数组。我还有一个动态数组，它是使用来自外部 xml 文件的 foreach 生成的。我想要做的是，如果找到一个名称，然后将每个名称都回显出来。我仍在研究我的 PHP 技能，但我不知道该怎么做才能让它按照我想要的方式工作。我已经搜索了几个小时试图找到一些可行但没有的东西。我可能搜索不正确。

这是我正在尝试做的代码。

```
// This just gets how many players ore on the US team
$serverplayer = $gameME_sdk_object->client_api_serverinfo("".$ip."/players/usarmy");
        foreach($serverplayer['serverinfo'][0]['teams'] as $mainserver) {
            if($mainserver['name'] == "usarmy") {
                $dacount = $mainserver['count'];
            }
        }
        if($dacount >= 1)
            // Begins Admin List/Count
            $admins = array("INFIDEL_HARE", "Romania191", "mardog104", "INFIDEL_JIHAD", "stvnsng", "HellKnightFire", "McThump", "INFIDEL_JByrns93", "INFIDEL_ALPHA", "s0ck37", "Zepppster", "xRingmasteressx", "FreeeKillz", "smokert", "Ccls2", "INFIDEL_GRIF", "cuzco2585", "Prophet731", "KittensDrunk", "Rexperience-EF", "Whickerbasket", "InfamousHoole", "Cruz_5326", "-Grimreaperx9-", "JoeyT2");
            foreach($serverplayer['serverinfo'][0]['players'] as $admname) {
                $Alist[] = $admname['name'];
                if(in_array($Alist, $admins)) {
                    $adminlist = $admname['name'];
                    $countAlist = count($adminlist);
                }
            }
            // Ends Admin List/Count
            // Everything below is just the data
            echo '<div class="four-columns six-columns-tablet twelve-columns-mobile">';
            echo '<pre>';
            echo $adminlist;
            echo '</pre>';
            echo "<div class=\"table-header\">US (".$dacount.")</div>";
            echo '<table class="table responsive-table" id="scoreboard">';
            echo '<thead>';
            echo '<tr>';
            echo '<th scope="col" width="2%">Sq</th>
            <th scope="col">Name</th>
            <th scope="col" width="2%">K</th>
            <th scope="col" width="2%">D</th>
            <th scope="col" width="5%" class="hide-on-mobile hide-on-tablet hide-on-mobile-portrait">Cheat Meter</th>';
            echo '</tr></thead>';
            echo '<tbody>';
            foreach($serverplayer['serverinfo'][0]['players'] as $player) {
                echo '<tr>';
                if ($player['team'] == "unassigned" Xor $player['team'] == "None") {            
                    $team = "<small class=\"tag green-gradient glossy\">Joining</small>";
                }
                echo "<td class=\"low-padding\">".ucfirst($player['squad'])."</td>";
                echo "<td class=\"low-padding\"><a href=\"http://battlelog.battlefield.com/bf3/user/".$player['name']."\" target=\"_blank\"><img src=\"./img/battlelog.png\" alt=\"Battlelog Profile\" width=\"16\" height=\"16\"></a>&nbsp;".$player['name']."<span style=\"float: right\">".$team."</span></th>";
                echo '<td>'.$player['kills'].'</td>';
                echo '<td>'.$player['deaths'].'</td>';
                echo "<td><a href=\"http://panel.dev.adkgamers.com/?p=" . $player['name'] . "&id=cheatometer\"target=\"_blank\">Check</a></td>";
                echo '</tr>';
            }
            echo '</tbody>';
            echo '</table>';
            echo '</div>'; 
```

我该怎么做呢？如果有人知道如何或理解我想要做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T08:37:52.297

您需要按照您的代码进行更改

```
 foreach($serverplayer['serverinfo'][0]['players'] as $admname) {
                //$Alist[] = $admname['name']; // there is no need to take this array
                if(in_array($admname['name'], $admins)) {
                    $adminlist[] = $admname['name']; // take this array because may be more than one admins are there
                    $countAlist = count($adminlist);
                }
            }
            // Ends Admin List/Count
            // Everything below is just the data
            echo '<div class="four-columns six-columns-tablet twelve-columns-mobile">';
            echo '<pre>';
            echo implode(",",$adminlist);// you can print all admins as comma separated
            echo '</pre>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T08:34:56.950

我认为你应该这样尝试

```
$admins = array("INFIDEL_HARE", "Romania191", "mardog104", "INFIDEL_JIHAD", "stvnsng", "HellKnightFire", "McThump", "INFIDEL_JByrns93", "INFIDEL_ALPHA", "s0ck37", "Zepppster", "xRingmasteressx", "FreeeKillz", "smokert", "Ccls2", "INFIDEL_GRIF", "cuzco2585", "Prophet731", "KittensDrunk", "Rexperience-EF", "Whickerbasket", "InfamousHoole", "Cruz_5326", "-Grimreaperx9-", "JoeyT2");
            foreach($serverplayer['serverinfo'][0]['players'] as $admname) {
                $Alist = $admname['name'];//No need of saving to array
                if(in_array($Alist, $admins)) {
                   $adminlist[] = $admname['name'];//Save all the matching values to an array
                    $countAlist = count($adminlist);

                }
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T08:39:33.190

```
$Alist[] = $admname['name'];
            if(in_array($Alist, $admins)) {
                $adminlist = $admname['name'];
                $countAlist = count($adminlist);
            } 
```

很奇怪：您正在另一个数组 ($admins) 中寻找一个数组 ($Alist)。

我认为你应该在这里写的是

```
 if(in_array($admname['name'], $admins)) 
```

更重要的是

```
 $adminlist = $admname['name'];
 $countAlist = count($adminlist); 
```

并不意味着一件事：您正在计算一个字符串（名称），而不是一个数组......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T08:40:07.007

听起来像[array_intersect()](http://docs.php.net/function.array-intersect)的工作：

> array_intersect — 计算数组的交集

```
<?php
foreach( array_intersect(playersFromLog(), playersAdmins()) as $admin) {
    echo $admin, "\n";
}

function playersFromLog() { 
    return array( 'A', 'B', 'C', 'E', 'F', 'G', 'H', 'I', 'J', 'X', 'Z' );
}

function playersAdmins() {
    return array( 'D', 'E', 'K', 'X', 'Y', 'Z' );
} 
```

印刷

```
E
X
Z 
```

# loadrunner - 从 web_custom_request 的正文中获取 id

> ID：13118095
> 
> 赞同：0
> 
> 时间：2012-10-29T08:26:43.553
> 
> 标签：loadrunner

我有以下请求，我需要从正文中获取ticketId。有人可以帮帮我吗？

```
web_custom_request("loadMessage.json", 
        "URL=http://someURL/loadMessage.json", 
        "Method=POST", 
        "Resource=1", 
        "Referer=http://someURL/096F516B149EFF0F48DD2D12B8AF2577.cache.html", 
        "Snapshot=t14.inf", 
        "EncType=application/json; charset=UTF-8", 
        "Body={\"ticketId\":\"440684\", \"ticketThread\":\"SERVICE_CREATION\", \"locale\":\"en\"}", 
        LAST); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:00:44.677

您似乎在这里遇到了一个概念问题，即 HTTP 如何以及 LoadRunner 如何与 HTTP 虚拟用户一起工作。您正在查找的数据将作为 web_custom_request() 的一部分传回。您实际上需要从先前请求的响应正文中捕获值。这种从先前请求中捕获数据并将当前请求中的硬编码值替换为捕获的值的过程称为“相关性”。惠普标准 Web 虚拟用户培训课程的 1/3 全部用于该主题，涵盖了处理动态数据的几种技术。这是一种万无一失的技术：

1.  记录您的业务流程两次
2.  使用工具查找请求中的差异。这些将归结为与会话、状态、时间和业务流程数据相关的一些项目。您的工单 ID 属于业务流程数据类别，但它很可能不是唯一需要处理的项目。
3.  确定相关候选后，查看生成日志以找到相关数据的第一个示例。对于您的票证 ID，我将在日志中搜索 440684。
4.  此响应正文与请求相关联。如果您查看脚本生成日志中围绕响应的信息，您应该能够确定脚本中的哪个请求生成了包含响应正文的响应。
5.  使用涉及使用 web_reg_...() 函数的标准技术，将您使用的响应捕获到所谓的相关变量中
6.  替换收集到 web_custom_request() 中的响应的静态值

如果您的管理层没有为您提供培训和担任此职位的导师，您应该考虑他们是对您的成功感兴趣还是只对您的计费能力感兴趣。这种不接受培训或专业发展的模式经常重复，通常会导致经理为不满意的客户牺牲绩效测试人员，而经理却没有对所发生的事情承担任何共同责任，而管理团队的决定主要是对发生的事情负责。如果您发现自己处于这种情况，我建议您找到一种快速退出策略，因为几乎可以肯定，您将不得不为其他与您的培训和职业发展相关的决定付出代价。

# actionscript-3 - 在本地计算机上加载 XML 文件时出现问题（无法加载 url）

> ID：13118100
> 
> 赞同：0
> 
> 时间：2012-10-29T08:27:03.133
> 
> 标签：actionscript-3, flash

我试图让我的 Flash 应用程序解释一个 XML 文件。我的代码如下所示：

```
function onFinish(success_boolean, results_obj, xml)
{
    if (success_boolean)
    {
        play ();
    } // end if
} // End of the function
Stage.align = "MC";
Stage.scaleMode = "noScale";
url = "25358";
_root.cacheKiller = "true";
stop ();
var parsed_obj = {};
var unCash = new Date().getTime();
if (_root.cacheKiller == "true")
{
    fileToLoad = url + "_main.xml?cacheKiller=" + unCash;
    fileToLoad = url + "_main.xml";
}
else
{
    fileToLoad = url + "_main.xml";
} // end else if
gs.dataTransfer.XMLParser.load(fileToLoad, onFinish, parsed_obj);
_root.emp.useHandCursor = 0;
_root.mus = 1;
_root.n = 1;
_root.num = 1; 
```

我得到的输出是：

打开 URL 'file:///C|/try/25358undefined' 时出错

有谁知道为什么我不能访问这个文件？我已验证该 URL 有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:32:24.823

你有一个错误的网址。我的意思是`fileToLoad`包含错误的值。尝试追踪这个变量。

# javascript - 将 jQuery.ajaxSetup 范围限制为仅在特定对象内

> ID：13118101
> 
> 赞同：3
> 
> 时间：2012-10-29T08:27:08.893
> 
> 标签：javascript, jquery, ajax, scope

这可能很奇怪，但我正在寻找的是如何`jQuery.ajaxSetup()`仅在特定对象内部创建范围。让我举个例子，我有两个对象`obj_1`和`obj_2`. 我想以这样一种方式编写 ajaxSetup，即我在一个对象内的所有 ajax 调用都将使用一组参数，而我在第二个对象中的所有调用都将使用另一组参数。

例如

```
var obj_1 = {

    my_func : function(){

        $.ajax({
            success : function(){
                // do something
                // all ajax calls in this object should use one set of params (type,dataType,headers etc)
            }
        })

    }

};

var obj_2 = {

    my_func : function(){

        $.ajax({
            success : function(){
                // do something
                // all ajax calls in this object should use different params (type,dataType,headers etc)
            }
        })

    }

}; 
```

我想这样做，这样我就不必在每个 ajax 调用中编写所有参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T08:30:22.973

最好的办法是创建一个供对象使用的函数，并让它在执行 ajax 调用时设置参数。该对象使用该函数而不是`ajax`直接调用。例如，一个简单的包装函数。

或者，您可以`standardParams`在您重用的每个对象上拥有一个属性，也许混合在特定于调用的参数中。就像是：

```
var obj_x = {
    standardParams: {
        // These are the params that don't vary
        dataType: "json" // Or whatever
    },

    your_func: function() {
        $.ajax($.extend({}, this.standardParams, {
            // These are the params that vary
            success: function() { ... }
        }));
    }
}; 
```

（注意使用`jQuery.extend`来混合每次调用和标准参数。）

或者，当然，您可以使用两者的组合（包装函数，它使用幕后的`standardParams`属性）。

# jsf - JSF 2 等效于 IBM 的 hx:scriptCollector pre-和 postRender

> ID：13118103
> 
> 赞同：4
> 
> 时间：2012-10-29T08:27:17.877
> 
> 标签：jsf, jsf-2, websphere

我正在将旧的 JSF 应用程序从 WebSphere 迁移到 JBoss：旧版本使用 JSF 的 IBM 实现。我的问题涉及以下组件：

```
<hx:scriptCollector id="aScriptCollector"
        preRender="#{aBean.onPageLoadBegin}" postRender="#{aBean.onPageLoadEnd}"> 
```

为了重现 JSF 2 中的 preRender 行为，我使用了表单绑定（s. [here](http://www.coderanch.com/t/211269/JSF/java/Load-every-JSF-Page)）。我的问题：

1) 你知道在 JSF 2 中模拟 postRender 的技巧吗？

2）你认为我在 preRender “干净” 中使用的技巧是什么？

非常感谢你的帮助！再见

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T11:33:12.150

最接近您可以获得**完全相同**的钩子的是

```
<f:view beforePhase="#{bean.beforePhase}" afterPhase="#{bean.afterPhase}"> 
```

和

```
public void beforePhase(PhaseEvent event) {
    if (event.getPhaseId == PhaseId. RENDER_RESPONSE) {
        // ...
    }
}

public void afterPhase(PhaseEvent event) {
    if (event.getPhaseId == PhaseId. RENDER_RESPONSE) {
        // ...
    }
} 
```

* * *

`preRender`可以以更简单的方式实现，将其放在您的视图中的任何位置：

```
<f:event type="preRenderView" listener="#{bean.preRenderView}" /> 
```

和

```
public void preRenderView(ComponentSystemEvent event) {
    // ...
} 
```

*（参数是可选的，如果从不使用可以省略）*

* * *

没有`postRenderView`，但您可以轻松创建自定义事件。例如

```
@NamedEvent(shortName="postRenderView")
public class PostRenderViewEvent extends ComponentSystemEvent {

    public PostRenderViewEvent(UIComponent component) {
        super(component);
    }

} 
```

和

```
public class PostRenderViewListener implements PhaseListener {

    @Override
    public PhaseId getPhaseId() {
        return PhaseId.RENDER_RESPONSE;
    }

    @Override
    public void beforePhase(PhaseEvent event) {
        // NOOP.
    }

    @Override
    public void afterPhase(PhaseEvent event) {
        FacesContext context = FacesContext.getCurrentInstance();
        context.getApplication().publishEvent(context, PostRenderViewEvent.class, context.getViewRoot());
    }

} 
```

您注册`faces-config.xml`为

```
<lifecycle>
    <phase-listener>com.example.PostRenderViewListener</phase-listener>
</lifecycle> 
```

那么你终于可以使用

```
<f:event type="postRenderView" listener="#{bean.postRenderView}" /> 
```

和

```
public void postRenderView(ComponentSystemEvent event) {
    // ...
} 
```

# hibernate - Hibernate 二级缓存更新

> ID：13118106
> 
> 赞同：2
> 
> 时间：2012-10-29T08:27:31.367
> 
> 标签：hibernate, caching, jpa, jboss, second-level-cache

我有以下问题。我使用带有二级缓存的 JBoss 5.1、JPA/Hibernate。我的系统几乎没有映射同一个数据库表的实体。示例：表 FURNITURES 由实体 'Furn' 和 'Furniture' 映射。

这些类不能更改。

现在，当我更改 id 为 1 的“家具”的数据时，id 为 1 的“家具”仍然有旧数据。在“Furn”更新后是否有可能驱逐“Furniture”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T23:12:53.783

当您更新/删除对象时，会向缓存层发送通知以反映这些更改。

缓存键甚至可能被广播到另一个服务器，因此它必须携带足够的有效负载来为远程端提供足够的信息来刷新相关条目。但另一方面，它不能太大，以最大限度地提高吞吐量。

如果您打开调试，您将看到以下结构（它可能会根据您的持久对象类型、标识符 - 复合与否等而有所不同）：

```
cacheKey = {org.hibernate.cache.CacheKey}
|- key = {your.own.serializable.class}
|- type = {org.hibernate.type.ComponentType}
| |- typeScope = {org.hibernate.type.TypeFactory$TypeScopeImpl}
| | |- factory = {org.hibernate.impl.SessionFactoryImpl}
| |- propertyNames = {...}
| |- propertyTypes = {...}
| |- propertyNullability = {...}
| |- propertySpan = 2
| |- cascade = {...}
| |- joinedFetch = {...}
| |- isKey = true
| |- tuplizerMapping = {...}
|- entityOrRoleName = {java.lang.String} "my.Entity"
|- entityMode = {org.hibernate.EntityMode}
|- hashCode = 588688 
```

如您所见，Hibernate 缓存键存储有关类名、id 类型等的信息。如果您有两种不同的类型，它们将被映射到两个不同的缓存键，因此您的问题。

为了修复它，您可以为这两个实体创建 DAO 类，并确保所有持久化这些实体的调用仅通过它们，而不会通过其他任何地方。然后，在两个条目的`update`/`delete`方法中简单地加载和驱逐另一个实体。

另一种选择是使用[拦截器](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/events.html)，它可以帮助实现相同的功能，但在我看来，DAO 路径更干净。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T15:48:11.410

不建议将同一个表映射到两个实体，所以我认为 hibernate 不会自动处理这个问题。

您可以为 Furn 实体实现一个刷新后监听器，然后使用类似下面的代码来驱逐相应的家具对象

```
// This creates a proxy if not already loaded 
// other gives the object
Furniture furniture = session.load(Furniture.class,furn.getId());
// remove from first level cache
session.evict(furniture);
// remove from second level cache
sessionFactory.evict(Furniture.class,furn.getId()); 
```

# android - 未应用主题

> ID：13118109
> 
> 赞同：0
> 
> 时间：2012-10-29T08:27:33.540
> 
> 标签：android, android-layout, android-theme

我只是想更改活动的背景颜色，但没有任何改变。

以下是相关的 XML：

**样式.xml**

```
<resources>
<style name="STBTheme" parent="android:Theme.Light" >
    <item name="android:windowBackground">@color/blue</item>
</style>
</resources> 
```

**AndroidManifest.xml**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.pedro.stb"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/STBTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" 
            android:theme="@style/STBTheme" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

此外，我使用的是 Eclipse，并且通过更改活动 xml 中的主题，它不会在图形布局中更改。

有什么帮助吗？

**编辑** 让它工作。在重新加载布局之前必须清理项目。很烦人...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T08:51:19.003

我检查了你的代码没问题。

尝试 `<item name="android:Background">#ccff33</item>`

而不是你的`<item name="android:windowBackground">@color/blue</item>.`

你也写`android:theme="@style/STBTheme" >`了应用程序和活动。

只需写在应用程序标签中。

希望你现在能得到你的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-13T03:03:23.323

1.  [打开活动的预览，然后单击带圆圈的按钮，如图所示](https://i.stack.imgur.com/nhKGW.png)

2.  [键入您的自定义主题的名称，然后单击“确定”，如图所示](https://i.stack.imgur.com/t05NT.png)

3.  在 Manifest 文件中，将属性 android:theme=".YourTheme" 添加到所需的 Activity

您将更改当前活动的主题。

我不知道为什么 Android Studio 有时表现得像喝醉了一样。我有两个具有相同目标的项目，最小 SDK 处于活动状态。其中一个正确实现了启动屏幕主题，另一个在我找到此解决方法之前不会显示。

# ios - 彩盒联系表在 iOS 中不起作用

> ID：13118114
> 
> 赞同：0
> 
> 时间：2012-10-29T08:27:59.400
> 
> 标签：ios, iframe, colorbox, contact-form

我正在尝试创建一个从 iframe 调用的彩盒联系表单。一切看起来都不错，只是每次我尝试单击文本框时，整个窗口都会移动，并且很难使用。我在另一个论坛上读过它，下面的代码可能是答案，但问题并没有消失。

```
<meta name="viewport" content="height=1000% width=1000%" /> 
```

这是颜色框的已知问题吗？有没有人对此有任何解决方案？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:29:10.083

不应该吗？

```
 <meta name="viewport" content="height=1000% width=1000%" /> 
```

我真的没有任何经验，但我认为 " 应该放在 1000% 的末尾

# jquery - 修复了 jquery mobile 的工具栏问题

> ID：13118118
> 
> 赞同：3
> 
> 时间：2012-10-29T08:28:11.587
> 
> 标签：jquery, mobile, toolbar, fixed

我正在开发一个 PHP 界面，该界面将在平板电脑内的餐厅中用于接受订单。我正在使用 jQuery Mobile。为了最大限度地减少加载时间，我创建了一个包含所有 UI 的页面，页面的内容部分是空白的，只有 div。当我单击一个链接时，我使用 Ajax 将页面加载到空的内容 div 中。我有一个固定的页眉和一个固定的页脚。问题是，当我触摸或单击加载页面的空白区域时，页眉和页脚移动并消失，整个加载页面的顶部和页脚位于顶部，如果我再次单击它们会返回正确的地方。当我单击或触摸内容页面内的 href 链接时，不会发生这种情况。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:30:55.040

我在[这篇文章](https://stackoverflow.com/a/9835204/902025)中找到了解决方案。

只需添加`data-tap-toggle="false"`到固定元素。

# .htaccess - 忽略 htaccess 中不存在的 /virtual subfolder/

> ID：13118121
> 
> 赞同：2
> 
> 时间：2012-10-29T08:28:26.247
> 
> 标签：.htaccess, uri

我有一个多语言网站，我想在 URI 中显示当前语言，如下所示：

网址：

```
www.domain.com/en/
www.domain.com/en/folder1/
www.domain.com/de/
www.domain.com/de/folder2/ 
```

目录：

```
public_html/
public_html/folder1/
public_html/
public_html/folder2/ 
```

然后将 en 或 de 保存在 cookie 中以处理语言代码。有可能做到这些吗？即使没有 en 或 de 的实际文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:49:39.313

您可以使用 mod_rewrite 在内部重写 URI 以删除语言并使用`CO`标志设置 cookie。所以像这样（在文档根目录的 htaccess 文件中）：

```
RewriteEngine On
# first check the the folder/file actually exists:
RewriteCond %{REQUEST_URI} ^/[a-z]{2}/(.*)$
RewriteCond %{DOCUMENT_ROOT}/%1 -f [OR]
RewriteCond %{DOCUMENT_ROOT}/%1 -d
# rewrite and set cookie:
RewriteRule ^/?([a-z]{2})/(.*)$ /$2 [L,CO=lang:$1:domain.com] 
```

这将设置一个名为**lang**的 cookie ，其值等于原始 URI 中的 2 个字母前缀，域为**domain.com**。

# racket - 如何在 Racket 中设置 button% 的背景？

> ID：13118122
> 
> 赞同：1
> 
> 时间：2012-10-29T08:28:33.460
> 
> 标签：racket

我在下面添加了`button%`一个`dialog%`：

```
(new button%
  [label "ok"]
  [parent pop-dialog%]
  [callback
    (lambda (b e)
    (exit))]) 
```

对不起，我的完整代码如下：

```
#lang racket

(require racket/gui)

(define *my-frame* (new frame% 
                      [label "VersionMonitor"]
                      [width 300]
                      [height 200]
                      ))

(define pop-dialog 
  (new dialog% 
       [label "bogga wogga"] 
       [parent *my-frame*]
       [width 200]
       [height 100]
       ))

(new canvas%
     [parent pop-dialog]
     [paint-callback
      (lambda (canvas info-dc)
        (send info-dc clear)
        (send info-dc set-background "white"))])

(new button%
  [label "ok"]
  [parent pop-dialog]
  [callback
    (lambda (b e)
    (exit))])

(send *my-frame* show #t)

(send pop-dialog show #t) 
```

现在您可以看到灰色区域。我真正的问题是如何设置按钮% 区域的背景？

但是`button%`它周围有一个矩形，超出了它本身。背景是灰色的，我想将它的颜色设置为白色，但没有找到办法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:08:56.580

我没有看到您报告的问题。特别是，我正在运行这个程序：

```
#lang racket

(require mred)

(define pop-dialog 
  (new dialog% [label "bogga wogga"]))

(new button%
  [label "ok"]
  [parent pop-dialog]
  [callback
    (lambda (b e)
    (exit))])

(send pop-dialog show #t) 
```

...我没有看到按钮周围的矩形。我不认为我可以在...中附上屏幕截图哦，等等，也许我可以：

![一键小对话框](../Images/2ba404244c0cde6b00479ae298d3ad06.png)

如果这与您所看到的不匹配，请查看您是否可以创建一个说明问题的小程序。

此外，对于此类问题，球拍邮件列表可能会为您提供更及时的回复。

# google-maps - 谷歌静态地图图像未显示在弹出窗口中

> ID：13118124
> 
> 赞同：1
> 
> 时间：2012-10-29T08:28:45.290
> 
> 标签：google-maps, google-maps-api-2, google-static-maps

我在弹出窗口上加载谷歌静态地图并动态设置图像的图像 URL。源代码显示正确的地址，但在页面加载时未显示在页面上。如果我将鼠标悬停在 Image 的源代码中，那么它将被加载到源代码中（Firefox 中的 ei Firebug），如果我重新打开弹出窗口，则 Image 加载成功。请提出为什么它没有第一次加载。

步骤 1 打开我的页面

步骤 2 点击地图。它是空白的

第 3 步如果我们在 Firebug 中查看此静态地图图像的 HTMl 代码，那么

鼠标移到图像源代码上的第 4 步，图像加载但静态图像弹出窗口上仍然没有任何内容 [点击查看图像](http://i.stack.imgur.com/3FqFi.png)

步骤 5 关闭弹出窗口

第 6 步如果我们再次打开地图弹出窗口，图像加载成功。
[点击查看图片](http://i.stack.imgur.com/ZcPzk.png)

图像不会加载，直到我们没有将鼠标悬停在 Firebug 中图像的 HTML 源代码上。请在这个案例中提出建议。

代码源代码：

```
 <tr> 
                        <td width=""114"" height=""22""> 
                            <asp:Localize runat=""server"" ID=""locPickUpLocation"" Text=""Pick-up Location:"" meta:resourcekey=""locPickUpLocationResource1""></asp:Localize>  
                        </td> 
                        <td width=""182""> 
                            <b> 
                                <asp:Literal ID=""ltPick"" runat=""server"" meta:resourcekey=""ltPickResource1""></asp:Literal> <span id=""divPickMapLink"" runat=""server"" class=""CarMapBut apf""><span><asp:Localize runat=""server"" ID=""picklocMap"" Text=""Map"" meta:resourcekey=""picklocMapResource1""></asp:Localize></span></span> 
                            </b> 
                        </td> 
                        <td width=""116"" class=""padlt5""> 
                           <asp:Localize runat=""server"" ID=""locDropOffLocation"" Text=""Drop-off Location:"" meta:resourcekey=""locDropOffLocationResource1""></asp:Localize>   
                        </td> 
                        <td width=""183""> 
                            <b> 
                                <asp:Literal ID=""ltDrop"" runat=""server"" meta:resourcekey=""ltDropResource1""></asp:Literal>  <span id=""divDropMapLink"" runat=""server"" class=""CarMapBut apf""><span><asp:Localize runat=""server"" ID=""droplocMap"" Text=""Map"" meta:resourcekey=""droplocMapResource1""></asp:Localize></span></span> 
                            </b> 
                        </td> 
                    </tr> 
```

后面的代码：

```
 string pickAdd = ltPick.Text.Replace(""<br />"", """");         
            divPickMapLink.Attributes.Add(""onclick"", ""javascript:DisplayMapByAddress('"" + pickAdd + ""');"");         
            ltDrop.Text = carBooking_.GetDropoffLocationDescription("", "");         
            string dropAdd = ltDrop.Text.Replace(""<br />"", """");         
            divDropMapLink.Attributes.Add(""onclick"", ""javascript:DisplayMapByAddress('"" + dropAdd + ""');""); 
```

HTML 页面
GoogleMapStatic.htm

```
<div id=""popup_box"">
<a id=""popupBoxClose"">Close</a>
<div id=""ViewMap"" class=""CarMap"">
<img id=""GoogleStaticImage"" src=""http://maps.googleapis.com/maps/api/staticmap?sensor=false&key=<%= DTIsland.DTCarIslandSettings.CarGoogleMapKey %>&zoom=13&size=600x420&center=New York&markers=color:green%7Clabel:A%7CNew York"" />
</div>
</div>
<div id=""greyBgBkgrnd""></div>

   <script type=""text/javascript"" charset=""utf-8"">   
        $(document).ready(function () {

    $(document).keypress(function (e) {
        if (e.keyCode == 27) { unloadPopupBox(); }
    });

    $('#popupBoxClose').click(function () {
        unloadPopupBox();
    });
});

function unloadPopupBox() { // TO Unload the Popupbox
    $('#popup_box').fadeOut(""slow"");
    $(""#greyBgBkgrnd"").css({ // this is just for style  
        ""opacity"": ""1""
    });
    $('#popup_box').hide();
    CloseGreyBg();
}

function loadPopupBox() {

    // To Load the Popupbox
    $('#popup_box').fadeIn(""slow"");
    $('#popup_box').css({
        ""left"": ""300px"",
        ""top"": ""150px"",
        'zIndex': 400
    });
    $(""#greyBgBkgrnd"").css({ // this is just for style
        ""opacity"": ""0.3""
    });
    DisplayGreyBg();
}

function DisplayGreyBg() {
    var bWidth = ($('body').width()) + 25;
    if ($.browser.msie && $.browser.version == 7) {
        var bWidth = $('body').width();
        $('.filterreg:first').css('z-index', '300');
    }
    var bHeight = $('body').height();
    $('#greyBgBkgrnd').css({ 'width': bWidth + 'px', 'height': bHeight + 'px', 'zIndex': 399, 'background': '#666666', 'opacity': '0.5', 'filter': 'alpha(opacity = 50)', 'position': 'absolute', 'top': '0', 'left': '0' });
    $('#greyBgBkgrnd').fadeIn(""slow"");
    $('body').css('overflow', 'hidden');
    //IE6 Bug with SELECT element always showing up on top
    if ($.browser.msie && $.browser.version < 7) {
        $('select').each(function () {
            $(this).hide();
        });
    }
}

function CloseGreyBg() {
    $('#greyBgBkgrnd').css({ 'width': '0px', 'height': '0px', 'zIndex': -1 });
    $('#greyBgBkgrnd').fadeOut(""slow"");

    if ($.browser.msie && $.browser.version == 7) {
        $('body').css('overflow-y', 'auto');
        $('.filterreg:first').css('z-index', '99998');
    } else {
        $('body').css('overflow', 'auto');
    }
    //IE6 Bug with SELECT element always showing up on top
    if ($.browser.msie && $.browser.version < 7) {
        $('select').each(function () {
            $(this).show();
        });
    }
}

///// Display map on Popup with long, lat
function DisplayMapByLatLong(lat_, long_) {
    loadPopupBox();
    // When map object is created it tries to figure out how big the canvas is and if popup is not fully loaded yet it may get wrong values.
    // So 'loadPopupBox()' function is called before showMap and setTimeout is called to wait till popup is proper loaded
    $('#popupBoxClose').show();
    setTimeout("""", 100);
    var imgsrc = ""http://maps.googleapis.com/maps/api/staticmap?sensor=false&key=<%= DTIsland.DTCarIslandSettings.CarGoogleMapKey %>&zoom=13&size=600x420&center="" + lat_ + "","" + long_ + ""&markers=color:green%7Clabel:A%7C"" + lat_ + "","" + long_;
    $(""#GoogleStaticImage"").attr(""src"", imgsrc);
}

///// Display map on Popup with address
function DisplayMapByAddress(address) {   
    loadPopupBox();
    // When map object is created it tries to figure out how big the canvas is and if popup is not fully loaded yet it may get wrong values.
    // So 'loadPopupBox()' function is called before showMap and setTimeout is called to wait till popup is proper loaded
    $('#popupBoxClose').show();
    setTimeout("""", 100);
    var imgsrc = ""http://maps.googleapis.com/maps/api/staticmap?sensor=false&key=<%= DTIsland.DTCarIslandSettings.CarGoogleMapKey %>&zoom=13&size=600x420&center="" + address + ""&markers=color:green%7Clabel:A%7C"" + address;
    $(""#GoogleStaticImage"").attr(""src"", imgsrc);

  }

</script>                                                                                           

 Problem is with API key for static map. I am using invalid API key. 
```

# git - 过滤 git log 以仅显示带有注释的提交

> ID：13118127
> 
> 赞同：5
> 
> 时间：2012-10-29T08:29:02.993
> 
> 标签：git

如何转储我的提交日志，仅显示带有给定命名空间注释的提交日志？

没有注释的提交，或者不属于给定命名空间的注释应该被过滤掉

在文本转储中，我不仅想要注释，还想要提交信息。

我玩过：show refs/notes/，我相信解决方案可能就在那里，而不是使用“git log”。但是，我仍然遇到一些问题，无法找到显示所有提交的正确命令。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T08:40:37.357

`git notes`会给你每个笔记的 id 以及它适用的对象。所以第二列就是你想要的。

```
$ git notes
f5ac8874676de3029ffc8c31935644ff7c4deae0 07ca160c58cf259fe8bb5e87b9d9a7cbf8845f87
62ecfc95355587d6d1f779fcaca6e4f53d088ccc eb6c60b9dcb56219d9d882759c0bf928f6d6c3fa 
```

使用抓取最后一列`cut`并将它们传递给`git show`.

```
$ [ "$(git notes)" = "" ] || git notes | cut -d' ' -f2 | xargs git show 
```

要选择一个特定的命名空间，添加一个`--ref=namespace`到`git notes`.

```
$ [ "$(git notes --ref=namespace)" = "" ] || git notes --ref=namespace | cut -d' ' -f2 | xargs git show 
```

初始测试 [...] 防止了一个小问题：如果不传递任何参数， git show 将显示当前结帐。因此，如果没有注释，您将获得误导性输出。初始测试没有问题：如果测试失败，即如果没有注释，则不会调用 git show。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-25T15:29:45.507

您可以向 Schwern 答案添加测试：

```
[ "$(git notes)" = "" ] || git notes | cut -d' ' -f2 | xargs git show 
```

或者选择一个特定的命名空间：

```
[ "$(git notes --ref=namespace)" = "" ] || git notes --ref=namespace | cut -d' ' -f2 | xargs git show 
```

然后，如果初始测试 [...] 失败，即如果没有注释，则不会调用***git show 。***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-21T17:20:34.813

如果您想要`git log`仅带有附加注释的提交的 -style 报告，那么您可以使用`--no-walk`参数来告诉`git log`限制报告仅在命令行上列出的提交。

试试这个：

```
git notes list | cut -d' ' -f2 | xargs --no-run-if-empty git log --no-walk=sorted 
```

我添加`--no-walk=sorted`了按提交时间对输出进行排序，而不是按`git notes`.

您当然可以添加任何其他`git log`选项来根据需要格式化输出。

# eclipse - 如何在eclipse中将jdk用于java项目？

> ID：13118136
> 
> 赞同：-2
> 
> 时间：2012-10-29T08:30:11.220
> 
> 标签：eclipse, java

我安装 jre 和 jdk，然后安装 Eclipse，我想创建新的 java 项目并使用 jdk 运行它。对于另一个程序，我需要在 jskd 上重命名 jkd，在 eclipse 的提示 JRE 中我无法选择 jsdk，如何更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:39:19.167

如果您的意思是要为您的项目使用哪个 JRE，在 Eclipse 中，这可以通过转到“项目”菜单 >“属性”>“Java 构建路径”来配置。在“Java 构建路径”中可以定义“JRE 系统库”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T08:37:36.947

真的很难理解你在问什么，但你想在 eclipse 中选择一个 JDK：

> 窗口 -> 首选项 -> Java -> 已安装的 JRE -> 添加 -> 检查您的 JDK

# networking - 如何控制对等端的套接字[TCP打孔]

> ID：13118144
> 
> 赞同：2
> 
> 时间：2012-10-29T08:31:02.173
> 
> 标签：networking, tcp, hole-punching

我有一个使用 TCP 连接进行通信的服务器客户端程序。多个客户端可以同时连接到服务器。我想在这个系统上实现 tcp 打孔。

在客户端，它调用公共服务器来查找我服务器的公共 ip、端口。然后连接到它。

但是在服务器端，它必须打开一个端口来连接公共服务器，并且它还必须在同一端口上接受客户端的连接请求。

我要做的是打开一个套接字并绑定到端口X，然后连接到公共服务器，然后将此套接字更改为侦听状态以接受传入的连接一段时间，然后再次开始与公共服务器的连接，结束和结束。

这是正确的方法吗？

编辑：我有另一个想法。就是打开一个新的端口，连接到公共服务器。主服务器端口照常监听传入连接。当客户端想要连接时，公共服务器将通过新端口告诉我的服务器。它将停止主端口侦听传入连接，而是连接到客户端进行打孔。然后它连接到公共服务器，它将服务器公共IP地址转发给客户端，并像往常一样回去监听传入的连接。然后客户端将使用这个地址连接到已经打开 TCP 漏洞的服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:49:34.310

最好有两个套接字并保持服务器和客户端之间的独立连接。

1.  m_nServerTCPSocket- 用于连接和监听套接字与服务器

2.  m_nPeerPrivateTCPSocket- 与对端连接（公共地址）

3.  m_nPeerPublicTCPSocket- 与对等点连接（如果其他对等点在同一网络中，则为私有地址）

4.  m_nListeningTCPSocket - 在这里用于侦听对等方的套接字，您需要接受来自对等方的连接。
5.  m_nConnectedPeerTCPSocket-> 一旦你与其他对等方连接，你就会得到这个套接字。

    ```
    while(end_client)    
    {

       FD_ZERO(&fdRead);
       FD_ZERO(&fdWrite);
       FD_ZERO(&fdExcept);    

       if (pControlMgr->GetConnectionMgr()->GetListeningTCPSocket()>0)

       {

            FD_SET (pControlMgr->GetConnectionMgr()->GetListeningTCPSocket(),&fdRead);      
            FD_SET (pControlMgr->GetConnectionMgr()->GetListeningTCPSocket(),&fdExcept);
        }

        if (pControlMgr->GetConnectionMgr()->GetServerTCPSocket()>0)
        {

            FD_SET (pControlMgr->GetConnectionMgr()->GetServerTCPSocket(),&fdRead); 
            FD_SET (pControlMgr->GetConnectionMgr()->GetServerTCPSocket(),&fdExcept);
    }
        if (pControlMgr->GetConnectionMgr()->GetConnectedTCPSocket()>0)
    {
        FD_SET (pControlMgr->GetConnectionMgr()->GetConnectedTCPSocket(),&fdRead);      
        FD_SET (pControlMgr->GetConnectionMgr()->GetConnectedTCPSocket(),&fdExcept);        
    }

    timeval tv;
    tv.tv_sec = 2;
    tv.tv_usec = 0;

    nSelectRetVal =  select(NULL,&fdRead,NULL,&fdExcept,&tv);

    if (nSelectRetVal>0)
    {
        int nRecvRetVal = 0;
        /* TCP Server Socket handling */
        if ( FD_ISSET(pControlMgr->GetConnectionMgr()->GetServerTCPSocket(), &fdRead ))
        {           
            try
            {
                pRecvBuffer =  new char[TCP_RECV_SIZE];
                nRecvRetVal = recv(pControlMgr->GetConnectionMgr()->GetServerTCPSocket(),
                    pRecvBuffer,TCP_RECV_SIZE,
                    0);
                int n = WSAGetLastError();
                if (nRecvRetVal>0)
                {
                    int nPeerNameRetVal = getpeername(pControlMgr->GetConnectionMgr()->GetServerTCPSocket(),(sockaddr*)&addrRemotePeer,&nSockAddrLen);
                    if ( pControlMgr->HandlePacket(pRecvBuffer,addrRemotePeer)== -1 )                       
                    {
                        if ( NULL != pRecvBuffer)
                        {
                            delete [] pRecvBuffer;
                            pRecvBuffer = NULL;
                            return 0 ;
                        }
                    }
                }                           
            }           
            catch (...)
            {
                if ( NULL != pRecvBuffer )
                {
                    delete [] pRecvBuffer;
                    pRecvBuffer = NULL;
                }
            }

            if ( NULL != pRecvBuffer)
            {
                delete [] pRecvBuffer;
                pRecvBuffer = NULL;
            }       
        } /* TCP Server Socket handling */      

        int n;
        /* TCP Exception Server Socket handling */
        if ( FD_ISSET(pControlMgr->GetConnectionMgr()->GetServerTCPSocket(), &fdExcept ))
        {
            /*FD_CLR(pControlMgr->GetConnectionMgr().GetServerTCPSocket (),&fdRead);
            FD_CLR(pControlMgr->GetConnectionMgr().GetServerTCPSocket (),&fdExcept);*/
            n = WSAGetLastError();
            //return 0;
        }   
           if (FD_ISSET(pControlMgr->GetConnectionMgr()->GetListeningTCPSocket(),&fdRead))
        {
            sockaddr_in addrConnectedPeer;
            int nAddrLen =sizeof(addrConnectedPeer) ;
            int nConnectedSock = accept( pControlMgr->GetConnectionMgr()->GetListeningTCPSocket(),
                (sockaddr*)&addrConnectedPeer,
                &nAddrLen);
            int n1 = WSAGetLastError();
            if (nConnectedSock>0)
            {
                pControlMgr->GetConnectionMgr()->SetConnectedTCPSocket(nConnectedSock);
                int n = pControlMgr->GetConnectionMgr()->GetConnectedTCPSocket();
                continue;
            }
        }
        /* TCP Exception Listening Socket handling */
        if ( FD_ISSET(pControlMgr->GetConnectionMgr()->GetListeningTCPSocket(), &fdExcept ))
        {
            FD_CLR(pControlMgr->GetConnectionMgr()->GetListeningTCPSocket (),&fdRead);
            FD_CLR(pControlMgr->GetConnectionMgr()->GetListeningTCPSocket (),&fdExcept);
            //return 0;
        }   /* TCP Exception Listening Socket handling */   

        /* Connected Peer TCP Read Socket handling */
        if ( FD_ISSET(pControlMgr->GetConnectionMgr()->GetConnectedTCPSocket(), &fdRead ))
        {           
            try
            {
                pRecvBuffer =  new char[TCP_RECV_SIZE];
                nRecvRetVal = recv (pControlMgr->GetConnectionMgr()->GetConnectedTCPSocket(),
                    pRecvBuffer,TCP_RECV_SIZE,
                    0);
                if (nRecvRetVal>0)
                {
                    int nPeerNameRetVal = getpeername(pControlMgr->GetConnectionMgr()->GetConnectedTCPSocket(),(sockaddr*)&addrRemotePeer,&nSockAddrLen);
                    if ( pControlMgr->HandlePacket(pRecvBuffer,addrRemotePeer)== -1 )                       
                    {
                        if ( NULL != pRecvBuffer)
                        {
                            delete [] pRecvBuffer;
                            pRecvBuffer = NULL;
                            return 0 ;
                        }
                    }
                }                           
            }           
            catch (...)
            {
                if ( NULL != pRecvBuffer )
                {
                    delete [] pRecvBuffer;
                    pRecvBuffer = NULL;
                }
            }
            //FD_CLR(pControlMgr->GetConnectionMgr().GetConnectedTCPSocket(),&fdRead);  
            if ( NULL != pRecvBuffer)
            {
                delete [] pRecvBuffer;
                pRecvBuffer = NULL;
            }       
        } /* Peer TCP Read Socket handling */   
        /* TCP Exception Connected Socket handling */
        if ( FD_ISSET(pControlMgr->GetConnectionMgr()->GetConnectedTCPSocket(), &fdExcept ))
        {
            /*FD_CLR(pControlMgr->GetConnectionMgr()->GetConnectedTCPSocket (),&fdRead);
            FD_CLR(pControlMgr->GetConnectionMgr()->GetConnectedTCPSocket (),&fdExcept);
            return 0;*/
            n = WSAGetLastError();
        } 
    ```

创建套接字的逻辑

```
 int CConnectionMgr::CreateSocket(const int nSockType)
      {
       //TODO: Add code here    
           if (InitWinSock() == -1) 
       {
        return -1;      
       }
       SetLocalIPAddress(); 

       m_nListeningTCPSocket = socket(AF_INET, SOCK_STREAM ,nSockType );                    
       if ( GetListeningTCPSocket() <0 )
        return -1;  
       if (BindSocket(GetListeningTCPSocket())<0)
        return -1;
       int nListenRet = listen(GetListeningTCPSocket(),SOMAXCONN);

        if (nListenRet!=0)
        {
        return -1;
         }      
         m_nPeerPrivateTCPSocket = socket(AF_INET, SOCK_STREAM ,nSockType );
         if (GetPeerPrivateTCPSocket()<0)
         return -1; 
        if (BindSocket(GetPeerPrivateTCPSocket())<0)
         return -1;

         m_nPeerPublicTCPSocket = socket(AF_INET, SOCK_STREAM ,nSockType );
         if ( GetPeerPublicTCPSocket()<0)
           return -1;
          if (BindSocket(GetPeerPublicTCPSocket())<0)
           return -1;

          m_nServerTCPSocket = socket(AF_INET, SOCK_STREAM ,nSockType );
          if (GetServerTCPSocket()<0)
           return -1;
          if (BindSocket(GetServerTCPSocket())<0)
           return -1;
        return 1;
         } 
```

# java - JSON.getString 不返回 null

> ID：13118146
> 
> 赞同：24
> 
> 时间：2012-10-29T08:31:09.690
> 
> 标签：java, json, org.json

我有一个从服务器返回的响应，我期待一个字符串值，所以我写了这个来解析它

```
public String getMessageFromServer(JSONObject response) {
    String msg = response.getString("message");
    return msg;
} 
```

然后，当我在代码中使用它并`null`从服务器获取值时，函数不会返回`null`，而是返回`"null"`。

我已经看到[了这个错误报告](https://github.com/douglascrockford/JSON-java/issues/5)，但我没有看到解决方案。

**编辑：**

我有一个小技巧可以解决这个问题，但它很难看，我正在寻找更好的解决方案：

```
public String getMessageFromServer(JSONObject response) {
    Object msg = response.get("message");
    if(msg == null) {
         return null;
    }
    return (String) msg;
} 
```

**编辑＃2：**

多年后，回到这个问题，我发现我在这里并没有完全错，并且`JSONObject`有一个内置的方法。

从 a 获取可选值的方法`JSONObject`是使用[此方法](https://stleary.github.io/JSON-java/org/json/JSONObject.html#optString-java.lang.String-) `JSONObject.optString("message", DEF_VALUE);`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-29T08:40:01.627

hack 看起来适合您的情况。

另一种选择是使用该方法`boolean isNull(String key)`，然后根据返回的布尔值继续您的选择。就像是：

```
public String getMessageFromServer(JSONObject response) {
    return ((response.has("message") && !response.isNull("message"))) ? response.getString("message") : null;
} 
```

但是，我认为您当前的实现与此之间没有太大区别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-01T00:40:34.490

这在使用 Kotlin 类扩展时很容易解决：

```
fun JSONObject.optNullableString(name: String, fallback: String? = null) : String? {
    return if (this.has(name) && !this.isNull(name)) {
        this.getString(name)
    } else {
        fallback
    }
} 
```

然后 eg`name`将在以下位置为空：

```
val name : String? = JSONObject("""{"id": "foo", "name":null}""").optNullableString("name") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-28T09:14:01.870

Kotlin 中更简单的方法

```
fun JSONObject.getNullableString(name: String) : String? {
    if (has(name) && !isNull(name)) {
        return getString(name)
    }
    return null
} 
```

# windows-8 - 在 Windows 8 Metro 中隐藏虚拟键盘

> ID：13118147
> 
> 赞同：2
> 
> 时间：2012-10-29T08:31:11.280
> 
> 标签：windows-8

现在我正在开发 Windows 8 Metro 应用程序。为此，我有一个带有文本框和确定按钮的弹出窗口。在虚拟键盘上单击“Enter”时，我需要隐藏虚拟键盘。如果我单击弹出键盘上的“确定”按钮会自动隐藏。

我[将此链接](http://nicoploner.blogspot.in/2012/08/windows-8-hide-virtual-keyboard.html)作为很好的参考（使用 HiddenField）。有没有办法在不使用“HiddenField”的情况下完成这项工作。提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:36:52.403

好吧，终于找到了解决这个问题的方法。我只是在弹出窗口中将焦点从文本框更改为按钮。下面是示例代码。

```
public void FocusTextbox(object sender, EventArgs e)
    {
        // set focus to textbox on popup open
        Textbox.Focus(Windows.UI.Xaml.FocusState.Programmatic);
    }

public void Textbox_KeyDown(object sender, KeyRoutedEventArgs e)
    {
        // conforming the "Enter" button click
        if (e.Key == Windows.System.VirtualKey.Enter)
        {
            // change the focus to OK button
            this.OkButton.Focus(Windows.UI.Xaml.FocusState.Pointer);
        }
    } 
```

在关闭弹出窗口之前更改焦点......现在效果很好......
并且将焦点更改为标签或文本块并没有隐藏虚拟键盘......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:44:53.130

我也在寻找这个，但我首先找到[了这种方法](http://blogs.msdn.com/b/eternalcoding/archive/2012/07/09/tips-and-tricks-for-c-metro-developers-handling-the-virtual-keyboard.aspx)

# actionscript-3 - 在 as3 中绘制位图的确切区域

> ID：13118150
> 
> 赞同：0
> 
> 时间：2012-10-29T08:31:53.630
> 
> 标签：actionscript-3, bitmap, bitmapdata

我正在开发一个 Action Script 3.0 应用程序，我将被允许加载图像并使它们可拖动。考虑我正在加载鹿图像并将其设置为可拖动。问题是，如果我单击半透明区域（位图周围的空白区域），我不希望位图可拖动。有没有办法在没有周围空白区域的情况下完全绘制鹿边界区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:30:36.437

您可以使用`BitmapData`方法来获取每个像素的颜色，然后，您可以：

*   在创建时，如果每个像素不是完全透明的（！= 0），您可以绘制一个形状的点，该点将是透明的，并使其可拖动以代替您的位图*（如评论中所述，这将是相当 CPU消耗，所以使用第二种方法）*
*   **单击时，获取相对于位图的单击坐标，检查像素是否透明并仅在不透明时才拖动。**

无论哪种方式，这都将非常消耗 CPU。您也可以考虑将位图转换为矢量图像（Sprite）。这将允许闪存检测真实图像边界。

# php - 刷新 Magento 结帐步骤

> ID：13118153
> 
> 赞同：1
> 
> 时间：2012-10-29T08:32:24.013
> 
> 标签：php, magento, magento-1.7

我在付款方式步骤中添加了与送货地址相关的功能，如果送货地址发生变化，则必须重新加载付款方式 HTML 内容。我尝试将 JavaScript 添加到计费和发货步骤，但我的后端要求保存发货地址才能正常工作。所以如果我在 onclick="shipping.save();" 之后添加自己的 JavaScript 在 shipping.phtml 中，它永远不会被调用。

有没有办法在每次查看步骤时刷新步骤 HTML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:44:15.900

是的，这是可能的，但不是纯 JS（没有 ajax 回调可用于通过单击重新加载步骤）

您需要重载`OnepageController`from `Mage_Checkout`。在本课程中，您将看到每一步 saveAction 都包含刷新/显示下一步的逻辑。

例如，在`saveShippingAction()`你`Mage_Checkout_OnepageController`可以看到：

```
[...]
if (!isset($result['error'])) {
    $result['goto_section'] = 'shipping_method';
    $result['update_section'] = array(
        'name' => 'shipping-method',
        'html' => $this->_getShippingMethodsHtml()
    );
}
[...] 
```

该部分`update_section`是告诉magento强制刷新步骤的部分。

您应该能够根据自己的需要进行调整。

# wpf - Viewmodel 更改触发另一个 viewmodel 更改的设计模式？

> ID：13118155
> 
> 赞同：0
> 
> 时间：2012-10-29T08:32:28.603
> 
> 标签：wpf, mvvm

在我的 WPF 应用程序中，我有几个模型和视图模型。考虑一个例子：

我的`SurfaceCondition`财产发生了`RoadViewmodel`变化。我希望这（异步）触发`Wheel`我的属性的更改`CarViewmodel`。

我可以想到几种解决方案，但我觉得这个特定问题有一个公认的解决方案。使用消息？将 RoadViewmodel 中的引用放入`CarViewmodel`并通过属性触发更新？合并视图模型？那里有WPF高手，请赐教！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:06:22.743

绝对不是您提出的最后两个解决方案，因为它们违反了关注点分离（RoadViewModel 了解 CarViewModel）/DRY 原则（RoadViewModel 必须更新 CarViewModel 或合并两个类）。

另一方面，消息在这里似乎是一个很好的解耦解决方案。有几个可用的实现，例如[Prism](http://compositewpf.codeplex.com/)有 en`EventAggregator`类，[MVVM Toolkit](http://mvvmlight.codeplex.com/)有`MessageBus`等。或者搜索“MVVM 事件总线”之类的术语。现在无论您选择什么，都知道不直接使用这些类而是传递一个接口总是好的。例如，使用 Prism，您可以将视图模型编程为`IEventAggregator`仅使用界面。在实际应用程序中，您向他们传递实际 EventAggregator 的实例，而在单元测试期间，您传递模拟。

# objective-c - 为什么“url 查询”似乎在 iOS 中不起作用？

> ID：13118159
> 
> 赞同：1
> 
> 时间：2012-10-29T08:32:48.887
> 
> 标签：objective-c, nsstring, query-string, nsurl

我正在尝试从 url 启动我的应用程序，并使用查询字符串来获取有关启动应用程序的详细信息的信息。我似乎在使用 [NSURL query] 方法时遇到了问题。

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString*)sourceApplication annotation(id)annotation
NSString *queryString = [url query];
[queryString doSomethingWithIt]; 
```

queryString 无法从 [url query] 方法接收任何内容，尽管调试器建议 url 包含一个包含查询的字符串。如果我使用以下（相当不雅的）解决方法，它似乎有效：

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString*)sourceApplication annotation(id)annotation
NSString *wholeURL = [url absoluteString];
NSString *queryString = [[wholeURL componentsSeparatedByString:@"?"] objectAtIndex:1];
[queryString doSomethingWithIt]; 
```

此错误未在文档中列出。有人对此有任何想法吗？

# php - SOAP UTF-8 编码

> ID：13118160
> 
> 赞同：0
> 
> 时间：2012-10-29T08:33:00.673
> 
> 标签：php, soap, encoding, utf-8

我有一个奇怪的问题。在`PHP`我想用 SOAP 与 Web 服务通信。

```
$soapURL = "http://www.somedomain.com/xyz.asmx?WSDL";
$soapParameters = Array('login' => "123", 'password' => "pwd", 'soap_version' => SOAP_1_2, 'exceptions' => True) ;
$client = new SoapClient($soapURL, $soapParameters); 
```

使用 XAMPP，它可以在本地正常工作。

当我在我的网络服务器上尝试它时，我收到以下错误消息：

```
Fatal error: Uncaught SoapFault exception: [WSDL] SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://www.somedomain.com/xyz.asmx?WSDL' : Input is not proper UTF-8, indicate encoding ! Bytes: 0xFC 0x6C 0x74 0x69 in ... 
```

错误出现在我的代码示例的最后一行。

有任何想法吗？

*   `mb_detect_encoding($soapURL);`表示字符串的格式为 ASCII
*   我尝试使用和 mb_convert_encoding将每个字符串转换为 UTF-8 `utf8_encode`...`iconv`
*   php文件的第一行是：`header('Content-type: text/html; charset=utf-8');`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:24:18.643

我终于解决了。问题是来自 Windows 服务器和 Linux 客户端的通信。我不知道为什么它可以在某些 Linux 机器上运行，但没关系。

我在源中添加了一个本地 wsdl 文件并将其用于 SOAPClient。对于服务器，我使用了 __setLocation 函数。

# ios - iOS：缩小图像并使高度：宽度= 1：1

> ID：13118161
> 
> 赞同：0
> 
> 时间：2012-10-29T08:33:14.707
> 
> 标签：ios, uiimage, uiimagepickercontroller

这是iOS开发者中心的一个相机演示，用于缩小图像的功能在下面。我遇到的问题是图像在宽度<高度时被拉伸。但是，我需要将图像缩放并缩小为正方形（宽度：高度 = 1：1）。有人对此有解决方案吗？谢谢你们提示提前帮助。

```
static UIImage *shrinkImage(UIImage *original, CGSize size) {
    CGFloat scale = [UIScreen mainScreen].scale;
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(NULL, size.width * scale,
                                             size.height * scale, 8, 0, colorSpace,   kCGImageAlphaPremultipliedFirst);
    CGContextDrawImage(context,
                   CGRectMake(0, 0, original.size.width * scale, original.size.width * scale),
                   original.CGImage);
    CGImageRef shrunken = CGBitmapContextCreateImage(context);
    UIImage *final = [UIImage imageWithCGImage:shrunken];

    CGContextRelease(context);
    CGImageRelease(shrunken);   

    return final;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:44:15.580

```
-(UIImage *)imageWithImage:(UIImage*)image scaledToSize:(CGSize)newSize
{
    if(newSize.width > newSize.height)
      newSize = CGSizeMake(newSize.height, newSize.height);
    else
      newSize = CGSizeMake(newSize.width, newSize.width);
    UIGraphicsBeginImageContextWithOptions(newSize, YES, [UIScreen mainScreen].scale);    
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;    
} 
```

如果您不打算保持纵横比，您的图像肯定会看起来被拉伸。

# mysql - 如何获得员工的层次结构

> ID：13118171
> 
> 赞同：1
> 
> 时间：2012-10-29T08:34:05.093
> 
> 标签：mysql

我试图获取经理 id 的员工层次结构。我可以为已知级别做到这一点。但我想要该层次结构中的整个级别关联。我的桌子是这样的。

```
    Super_id EmployeeId

    10 30
    10 28
    10 16
    16 34
    16 45
    45 67
    45 36
    24 69
    24 76

```

我将传递 10 作为参数：输出应该是 30,28,16,34,45,67,36

我不期待单个查询。我也可以使用存储过程/函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:43:01.603

这只能通过在数据库上使用 stod 过程或通过多次查询您的应用程序来实现。如果您有固定数量的层次结构级别，您可以执行那么多自连接，但不可能使用 SQL 仅从父指针获得完整的树。

然而，存在两种常用技术来实现这一点。一种称为[嵌套集模型](http://en.wikipedia.org/wiki/Nested_set_model)，它使用由左右边界定义的每个级别的集合表示。第二个变体是物化路径的变体。使用此变体，您可以为每个元素指定完整路径（然后您必须在其中一个父元素中的每次更改时更新该路径）

每种技术都有其独特的优点和缺点。现在由您决定可以在您的特定区域使用哪一个。

# jquery - 如何将日期选择器的所有值选择到动态选项卡中

> ID：13118172
> 
> 赞同：-1
> 
> 时间：2012-10-29T08:34:05.437
> 
> 标签：jquery, datepicker

在 tabs-1

```
 $(".datepicker").datepicker('getDate') is value 
```

在 tabs-2

```
 $(".datepicker").datepicker('getDate') is null 
```

那么，如何将 datepicker 的所有值选择到动态选项卡中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:40:51.683

您应该选择相对于父级的选择器。考虑到每个选项卡都有一个 ID，您应该这样做：

对于第一个选项卡：

```
 $("#tab1 .datepicker").datepicker('getDate') 
```

对于第二个：

```
 $("#tab2 .datepicker").datepicker('getDate') 
```

# django - 用于数据库驱动网站的 Pinax 或纯 Django

> ID：13118174
> 
> 赞同：0
> 
> 时间：2012-10-29T08:34:11.163
> 
> 标签：django, pinax

我即将开发一个与数据库属性密切合作的网站。它需要根据搜索条件从数据库中获取所需的数据并将它们显示为表格。

我在学习django，感觉已经准备好开始开发过程了。

现在，我需要决定是选择使用 Pinax 还是使用适合我需要的应用程序的纯 Django。

我确实想要一些社交功能，比如向朋友发送通知，然后可能会在网站上创建一个论坛。

你怎么看？我应该使用纯 Django 还是应该尝试 Pinax？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:39:48.957

Pinax 不会在没有 django 的情况下运行，因此无论哪种方式都需要使用 django。如果您想创建带有社交网络功能的sitw，pinax 是一个不错的选择。如果你只需要用户管理，django 已经内置了。

# android - Android内核编译：总线错误（核心转储）

> ID：13118175
> 
> 赞同：1
> 
> 时间：2012-10-29T08:34:18.397
> 
> 标签：android, compilation, virtualbox, core

我使用带有 virtualbox 和 arm-eabi-4.3.3 工具链的 Ubuntu 12.04 在编译我的 android 内核，甚至是来自源代码的内核时，我得到了那个错误：

```
 bus error (core dumped)
make *** [vmlinux] Error 135 
```

任何想法？工具链或整个 ubuntu 有什么问题？

# c# - 为什么用当前时间格式化 DateTime 时会得到 2555 年？

> ID：13118178
> 
> 赞同：1
> 
> 时间：2012-10-29T08:34:44.560
> 
> 标签：c#, .net, datetime, azure, azure-storage

我有执行以下操作的 C# 代码：

```
 DateTime now = DateTime.UtcNow;
 string timeToOutput = now.ToString();
 String pathInStorage = now.ToString("yyyy-MM-dd/HH/");

 CloudBlobClient client = getClient();
 CloudBlobContainer container = client.GetContainerReference(hardcodedContainerName);
 container.GetBlobReference(pathInStorage).UploadText(timeToOutput); 
```

如您所见，我首先获取当前时间，然后使用不同的格式字符串对其进行两次格式化。现在大多数情况下，存储中的路径将匹配到 blob 本身的时间输出。

然而，有时（非常罕见）blob 中的时间将是 2012 年（如 2012 年 10 月 29 日 12:33:00），但路径将包含 2555 年，并且小时-日-月将与 blob 内的时间相匹配（如 2555-10-29-12）。

这怎么可能发生？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T09:19:49.890

2555 年是[泰国阳历](http://en.wikipedia.org/wiki/Thai_solar_calendar)中的 2012 年。不知道你为什么会得到这个，也许执行代码的服务器有泰国语言环境？

要使代码按预期运行，请使用不同的、可识别区域设置的 ToString() 版本。请参阅[DateTime.ToString()](http://msdn.microsoft.com/en-us/library/ht77y576.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:04:15.530

你能通过不变文化做到这一点吗？

就像是：

```
DateTime now = DateTime.UtcNow;
string timeToOutput = now.ToString();
CultureInfo InvC = new CultureInfo("");
String pathInStorage = now.ToString("yyyy-MM-dd/HH/", InvC);
//rest of your logic 
```

# azure - 如何使用站点管理器获取 webrole 实例的域名？

> ID：13118179
> 
> 赞同：1
> 
> 时间：2012-10-29T08:34:53.933
> 
> 标签：azure, azure-web-roles

我正在使用站点管理器获取每个实例中的 iis 日志文件路径，并将它们上传到 blob 存储。

问题来了，在我的项目中，服务有两个版本，一个是debug，一个是online，我只能从服务实例上传iis日志。为了管理项目，我需要检查域名来判断实例是否在在线服务中，这样我就可以使用相同的代码在调试和在线服务中进行更新。

到目前为止，这是我的代码：

```
SiteManager sm = new SiteManager();
foreach (var site in sm.Sites)
{
    string[] logDir = GetIISLogDir(site);
    foreach (string filePath in logDir)
    {
        UploadLogToStorage(filePath);
    }
} 
```

我想我需要从变量站点获取域名，并决定是否上传日志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:30:39.623

您需要为此使用[Get Deployment](http://msdn.microsoft.com/en-us/library/windowsazure/ee460804.aspx)操作（REST API）。

在您的实例中，您可以访问当前部署 ID ( `RoleEnvironment.DeploymentId`)。您可以在调用 Get Deployment 时使用此 id 来获取有关您当前部署的信息，例如部署槽（prod/staging）、url...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:00:20.710

Windows Azure 诊断支持自动为您上传 IIS 日志。您是否考虑过使用它来代替？如果您正在运行诊断插件，则可以远程配置它。如果您只是将 DM 配置为对生产和开发使用不同的存储帐户（最佳实践），那么您将毫无问题地确定哪个是哪个（部署 ID 无论如何都会不同）。除非您不使用 PaaS 模型（例如 IaaS 或 WAWS），否则实际上不需要自己编写代码来上传日志。

# javascript - 使用 javascript 的逐像素动画

> ID：13118194
> 
> 赞同：5
> 
> 时间：2012-10-29T08:36:16.510
> 
> 标签：javascript, image, animation, render, pixel

我正在为像素网格上的精灵制作动画。我有几个选择，每个都有优点和缺点。我有相当多的 javascript 经验（六年），但没有这种经验。问题是我不知道每个选项会有多贵。

精灵需要渲染得非常快，并且足够便宜以在运行碰撞检测时至少同时运行五个。

理想情况下，我想在包装器内使用元素网格，将颜色和 alpha 通道渲染到多维数组中的每个元素。这里的主要优点是我可以运行逐像素碰撞检测并点击精灵的透明部分。对于任何基于图像的精灵，即使我点击透明像素，onClick 事件也会触发（我必须做很多工作才能通过透明像素传递点击，而且可能非常昂贵）。

下一个选项是使用 css sprites。css-tricks.com/css-sprites/ 这很容易，但如前所述，onClicks 不会通过透明像素。我可能可以强制它，但同样，它可能很昂贵，并且需要很多时间来实现。

另一种选择是动画 gif，但它们很大，色彩部门有限，而且很难控制动画。我宁愿不去那里。

然后是 html5 canvas 元素，我不太了解它，如果可能的话，我想远离它。我不知道我的任何代码甚至会如何与 canvas 元素相关，而且我怀疑它是否会长期满足我的需求。

那么哪个性能最好呢？第一个（也是最可取的）是一个可行的选择吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T08:50:56.637

使用今天的浏览器，您可以在台式计算机上使用定位的像素子元素构建精灵*（只要它们不太复杂或太大）*，并且为了安全起见，我将自己限制为大约 10 个活动精灵. 对于移动设备，事情可能会变得有点慢和笨重，但考虑到您似乎正在设计一款需要精确“点击”的游戏，我怀疑这将是一个问题。

您最灵活的选择是使用 HTML5 Canvas，正如您已经制定的那样，但这将涉及更多的 JavaScript 编码。但是这个系统将允许您将许多效果应用于您的精灵，并允许您通过使用来使用像素完美检测`getImageData` *（这允许您在任何像素偏移处读取确切的像素颜色）*。

*   [从 HTML Canvas 获取像素？](https://stackoverflow.com/questions/667045/getpixel-from-html-canvas)

如果您想避免拥有全屏画布系统的技术问题和挑战*（这可能很棘手）*，您实际上可以创建尽可能多的较小的 Canvas 元素并像精灵一样移动它们*（使用 HTML 元素）* ..然后你所要做的就是设计绘制动画帧的代码，并使用上述方法告诉鼠标是否已经击中精灵*（以及点击处理程序和一些代码来计算用户点击的相对位置到您的画布元素位置）*。显然，最好以通用方式执行此操作，以便您的代码可以应用于所有精灵 :)

要在画布上绘制图像，您可以使用问题中提到的 spritesheet，并使用`drawImage()`支持切片模式的相当灵活的方法。这只需要绑定到一个`setInterval`或`requestAnimationFrame`风格的游戏循环。

*   [https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Using_images](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Using_images)
*   [http://www.playmycode.com/blog/2011/08/building-a-game-mainloop-in-javascript/](http://www.playmycode.com/blog/2011/08/building-a-game-mainloop-in-javascript/)

### 更新 - 对于那些希望非常优化的人

如果您希望采取更优化的路线 - 再次涉及更多 - 您可以执行以下操作。如果您有许多完全相同的精灵，只有少数（20 或 30）帧动画，则此方法很有用：

1.  使用您移动背景位置的背景图像精灵表通过普通 DIV 为您的精灵提供动力。这是您可以做到的最佳选择，除了将静态图像保存为精灵之外，因为浏览器会完成所有工作。
2.  **对于每种精灵类型，在隐藏**的画布元素上绘制您的精灵表，该元素足够大以合并您的整个精灵表。
3.  当用户单击您的一个 DIV 精灵时，将背景位置作为坐标，将它们反转，然后您应该知道像素数据在画布元素上的位置*（通过精灵的类型查找） 。*
4.  使用隐藏画布上的 getPixelData 方法来确定用户是否单击了精灵。
5.  以上意味着您只使用了一个画布元素 - 每个精灵类型，浏览器为您处理所有图形，并且您通过点击获得像素完美碰撞。

希望以上内容有意义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:01:12.797

如何将您的图像精神拆分为 30x30 的单元格，并且只有单元格不透明的元素，并在单元格透明的地方留出间隙，以便点击通过。但是，在可以单击单元格的位置上，您会失去一些准确性。

# iphone - 我在尝试通过我的 iphone 应用程序与服务器通信时遇到 SSL 错误

> ID：13118197
> 
> 赞同：1
> 
> 时间：2012-10-29T08:36:31.877
> 
> 标签：iphone, ios, xcode, ssl

我收到错误消息“发生 SSL 错误，无法与服务器建立安全连接”。

与另一台服务器通信时，相同的代码工作正常，我想确定问题是否是由于服务器上的证书所致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T08:56:25.700

这是因为您要访问的服务器是**HTTPS**服务器。它需要 SSL 检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T09:17:54.153

请检查您正在与之通信的服务器的 url，它必须使用 HTTPS，尝试使用 HTTP 服务。

# c# - 在.Net1.1中使用Jquery调用ServerSide方法

> ID：13118200
> 
> 赞同：0
> 
> 时间：2012-10-29T08:36:57.103
> 
> 标签：c#, javascript, jquery, asp.net

我正在使用 .net1.1 并尝试在单击浏览器关闭按钮时使用 Jquery 调用服务器端方法。我的代码不起作用。我在下面发布我的代码。有人会指导我哪里出错了吗？

```
<body MS_POSITIONING="GridLayout" onbeforeunload="javascript:return test()" >

Ceci est une page cachée. Elle est utilisée pour la gestion du multi-fenétrage.

</body>

    function test()
    {
       debugger;
       $(document).ready(function() {
        $.ajax({
        type: "POST",
        url: "HiddenPage.aspx/GetServerTime",
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function(msg) {
            alert("success"); 
        },
        error: function(msg) {
        alert("Error! Try again..."); 
         }
            });

                return false;           
                        })

        } 
```

在后面的代码中

===================

```
[WebMethod()]

public DateTime GetServerTime()
{

return DateTime.Now;
} 
```

}

控件不转到此 Web 方法，我无法调试，在整个块运行后，控件转到“$(document).ready(function()”。它没有显示任何类型的错误，但警报是不显示。如果我使用任何其他返回类型而不是 DateTime，它仍然无法正常工作

**当我在 onload 上调用此方法测试时，它会显示错误条件警报。但是我必须在关闭浏览器时调用它。无论如何它都不会使用 web 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:43:14.480

不幸的是，您无法专门检查浏览器是否关闭。当有人从该页面重定向时，使用`onbeforeunload`也会触发。尝试在 DOM 加载时使用 jQuery 绑定您的事件。

```
$(document).ready(function() {
    $(window).unload(function(e) {
        e.preventDefault();
        test();
    });
}); 
```

我不能确切地说为什么你的代码没有，因为你没有提供任何错误信息。

**从脚本调用 Web 方法**

你需要看看你的网络服务，你需要告诉它你将从脚本中调用它，正如另一个人正确地说的那样，你不能隐式序列化 a`DateTime`所以*最懒惰*的方法是只返回一个字符串反而。

```
[WebMethod]
[System.Web.Script.Services.ScriptMethod]
public string GetServerTime()
{
    return DateTime.Now.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T08:49:56.883

`$(document).ready(function() { ... })`不执行函数，而是注册一个函数，以便在加载文档时执行。
`$(document).ready(function() { ... })`为文档的加载事件注册一个函数。你在 onbeforeunload 事件中注册这个函数，这个函数永远不会被执行。因为当你在 onbeforeunload 事件中注册函数时，文档已经被加载并且正在被卸载。
如果要调用 onbeforeunload 中的方法，只需编写JS代码调用WebMethod，无需`$(document).ready`

```
function test()
{  
    // $(document).ready(function() {  //delete this        
    $.ajax({
    type: "POST",
    url: "HiddenPage.aspx/GetServerTime",
    data: "{}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function(msg) { alert("success");    },
    error: function(msg) { alert("Error! Try again..."); }
    });
    return false; 
} 
```

# android - ListView 刷新

> ID：13118203
> 
> 赞同：1
> 
> 时间：2012-10-29T08:37:16.837
> 
> 标签：android

我有个问题。我的项目中有一个 sqlite 数据库。我在数据库中选择数据并传输自定义列表视图。我的自定义 ListView 有一个删除按钮。当我按下按钮时，我的 CostumListView 类将删除这一行。但是 Listview 是一样的。我想在删除过程后刷新列表视图。

这是我的 LAUNCHER 类（TaskList.java）：

```
package com.nano.tasklist;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;

import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.ContentValues;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ListView;
import android.widget.Toast;

public class TaskList extends Activity {

ArrayList<CategoryInfo> CategoryList;

TaskListDatabase DatabaseActivity;

private CategoryAdapter CategoryAdapter = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_task_list);

    DatabaseActivity = new TaskListDatabase(this);

    CategoryInsert("School","21.02.2012","YES");
    CategoryInsert("House","21.02.2012","NO");
    CategoryInsert("Park","21.02.2012","YES");

    ListView lvCategories = (ListView) findViewById(R.id.lvCategories);

    CategoryList = new ArrayList<CategoryInfo>();

    CategoryAdapter = new CategoryAdapter(this, R.layout.category_row, CategoryList);
    lvCategories.setAdapter(this.CategoryAdapter);

    CategorySelect();
}

public void CategorySelect(){
    String[] Column = {"ID","Category","AddDate","Completed"};

    Cursor Result = null;

    try{
        SQLiteDatabase Database = DatabaseActivity.getReadableDatabase();

        Result = Database.query("Category", Column, null, null, null, null, null);

        startManagingCursor(Result);

        while(Result.moveToNext()){
            CategoryInfo Info = new CategoryInfo();

            CategoryList = new ArrayList<CategoryInfo>();

            Info.setID(Result.getString(Result.getColumnIndex("ID")));
            Info.setCategory(Result.getString(Result.getColumnIndex("Category")));
            Info.setAddDate(Result.getString(Result.getColumnIndex("AddDate")));
            Info.setCompleted(Result.getString(Result.getColumnIndex("Completed")));

            CategoryList.add(Info);

            if(CategoryList != null && CategoryList.size() > 0){
                CategoryAdapter.add(CategoryList.get(0));
                CategoryAdapter.notifyDataSetChanged();
            }
        }
    } catch (SQLiteException Error) {
        Toast.makeText(getApplicationContext(), "Error (CategorySelect) : " + Error.toString(), Toast.LENGTH_LONG).show();

        Result = null;
    }
}

public boolean CategoryInsert(String Category, String AddDate, String Completed){
    boolean Result;

    try{
        SQLiteDatabase Database = DatabaseActivity.getWritableDatabase();

        ContentValues Values = new ContentValues();

        Values.put("Category", Category);
        Values.put("AddDate", AddDate);
        Values.put("Completed", Completed);

        Database.insert("Category", null, Values);

        Result = true;
    } catch (SQLiteException Error) {
        Toast.makeText(getApplicationContext(), "Error (CategoryInsert) : " + Error.toString(), Toast.LENGTH_LONG).show();

        Result = false;
    }

    return Result;
} 
```

这是我的 CustomListAdapter 类（CategoryAdapter.java）

```
package com.nano.tasklist;

import java.util.ArrayList;

import android.app.AlertDialog;
import android.content.ContentValues;
import android.content.Context;
import android.content.DialogInterface;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.Toast;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.TextView;

public class CategoryAdapter extends ArrayAdapter<CategoryInfo>{

private Context ActivityContext = null;
private ArrayList<CategoryInfo> Items = null;

TaskListDatabase DatabaseActivity;

public CategoryAdapter(Context Context, int textViewResourceId, ArrayList<CategoryInfo> Items){
    super(Context,textViewResourceId,Items);

    this.ActivityContext = Context;
    this.Items=Items;

    DatabaseActivity = new TaskListDatabase(Context);
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    View MainView = convertView;

    if (MainView == null) {
        LayoutInflater Layout = (LayoutInflater) ActivityContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        MainView = Layout.inflate(R.layout.category_row, null);
    }

    final CategoryInfo Item = Items.get(position);

    if (Item != null) {

        final CheckBox cbCompleted = (CheckBox) MainView.findViewById(R.id.cbCategoryCompleted);
        final TextView tvCategoryName = (TextView) MainView.findViewById(R.id.tvCategoryName);
        final TextView tvAddDate = (TextView) MainView.findViewById(R.id.tvAddDate);
        final TextView tvDataValue = (TextView) MainView.findViewById(R.id.tvDataValue);
        final Button btnDeleteCategory = (Button) MainView.findViewById(R.id.btnDeleteCategory);

        tvCategoryName.setText(Item.getCategory());
        tvAddDate.setText(Item.getAddDate());
        tvDataValue.setText(Item.getDataValue());

        if(Item.getCompleted().equals("YES")){
            cbCompleted.setChecked(true);

            tvCategoryName.setEnabled(false);
            tvAddDate.setEnabled(false);
            tvDataValue.setEnabled(false);
        } else {
            cbCompleted.setChecked(false);

            tvCategoryName.setEnabled(true);
            tvAddDate.setEnabled(true);
            tvDataValue.setEnabled(true);
        }

        cbCompleted.setOnCheckedChangeListener(new OnCheckedChangeListener(){
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                if(isChecked){
                    CategoryUpdate(Item.getID(),"Completed","YES");

                    tvCategoryName.setEnabled(false);
                    tvAddDate.setEnabled(false);
                    tvDataValue.setEnabled(false);
                } else {
                    CategoryUpdate(Item.getID(),"Completed","NO");

                    tvCategoryName.setEnabled(true);
                    tvAddDate.setEnabled(true);
                    tvDataValue.setEnabled(true);
                }
            }
        });

        btnDeleteCategory.setOnClickListener(new OnClickListener(){
            public void onClick(View v) {
                TaskList Process = new TaskList();
                Process.Delete(btnDeleteCategory, Item.getID());
            }
        });
    }

    return MainView;
}

public boolean CategoryUpdate(String ID, String Key, String Value){
    boolean Result;

    try{
        SQLiteDatabase Database = DatabaseActivity.getWritableDatabase();

        ContentValues Values = new ContentValues();

        Values.put(Key, Value);

        Database.update("Category", Values, "ID = " + ID, null);

        Result = true;
    } catch (SQLiteException Error) {
        Toast.makeText(ActivityContext, "Error (CategoryUpdate) : " + Error.toString(), Toast.LENGTH_LONG).show();

        Result = false;
    }

    return Result;
}

public void CategoryDelete(final String ID){
    try{

        AlertDialog.Builder Builder = new AlertDialog.Builder(ActivityContext);
        Builder.setMessage("If you delete this category, category's tasks will be deleted ! Do you want to delete this category ?")
                .setCancelable(false)
                .setPositiveButton("YES",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                SQLiteDatabase Database = DatabaseActivity.getWritableDatabase();

                                Database.delete("Category", "ID = " + ID, null);
                            }
                        })
                .setNegativeButton("NO",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                dialog.cancel();
                            }
                        });
        AlertDialog Alert = Builder.create();
        Alert.show();
    } catch (SQLiteException Error) {
        Toast.makeText(ActivityContext, "Error (CategoryDelete) : " + Error.toString(), Toast.LENGTH_LONG).show();
    }
}

} 
```

这是我的 DatabaseClass (TaskListDatabase.java)

```
package com.nano.tasklist;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class TaskListDatabase extends SQLiteOpenHelper{

private static final String DatabaseName = "TaskList";
private static final int DatabaseVersion = 1;
private static final String Category = "Category";
private static final String Tasks = "Tasks";

private static final String CreateCategoryTable = "CREATE TABLE " + Category + " (ID INTEGER PRIMARY KEY AUTOINCREMENT, Category TEXT, AddDate TEXT, Completed TEXT);";
private static final String CreateTaskTable = "CREATE TABLE " + Tasks + " (ID INTEGER PRIMARY KEY AUTOINCREMENT, Category TEXT, Task TEXT, AddDate TEXT, StartDate TEXT, FinishDate TEXT, Completed TEXT);";

public TaskListDatabase(Context Context){
    super(Context,DatabaseName,null,DatabaseVersion);
}

@Override
public void onCreate(SQLiteDatabase Database) {
    Database.execSQL(CreateCategoryTable);
    Database.execSQL(CreateTaskTable);
}

@Override
public void onUpgrade(SQLiteDatabase Database, int OldVersion, int NewVersion) {
    Database.execSQL("DROP TABLE IF EXISTS " + DatabaseName);
    onCreate(Database);
}
} 
```

这是我的项目：[https ://rapidshare.com/files/578334898/Task%20List.rar](https://rapidshare.com/files/578334898/Task%20List.rar)

请帮我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T08:39:10.057

删除行后，调用

```
categoryAdapter.notifyDataSetChanged(); 
```

刷新listView的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T08:41:44.637

在删除按钮上：添加行：-

```
 adapter.notifyDataSetChanged();//or
            list.destroyDrawingCache();//both line 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T08:39:28.273

```
btnDeleteCategory.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
            TaskList Process = new TaskList();
            Process.Delete(btnDeleteCategory, Item.getID());
            this.CategoryAdapter.notifyDataSetChanged(); // refresh list view
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T08:47:31.580

您这样做是为了删除记录。

```
btnDeleteCategory.setOnClickListener(new OnClickListener(){
            public void onClick(View v) {
                TaskList Process = new TaskList();
                Process.Delete(btnDeleteCategory, Item.getID());
            }
        }); 
```

**你的错误。**

```
1)TaskList is your launcher Activity and I can't find any Delete() method in this class and call it in listener.
2)May be some code of query for delete in this method Delete()
3)You didn't refresh list using `categoryAdapter.notifyDataSetChanged();` 
```

**解决方案：**

```
1)Make method for delete(delete query) in `TaskListDatabase.java`
2)You display data from `ArrayList<CategoryInfo> Items;` so You also remove that data from this ArrayList.
3)Use `categoryAdapter.notifyDataSetChanged();` for refresh list 
```

试试这个代码...

```
btnDeleteCategory.setOnClickListener(new OnClickListener(){
            public void onClick(View v) {
                TaskListDatabase db = new TaskListDatabase();
                db.delete();
                Items.remove(position);
                notifyDataSetChanged();
            }
        }); 
```

# ws-security - 如何在 WS-Security usernameToken 警察中将用户名和密码设置为硬代码？

> ID：13118207
> 
> 赞同：1
> 
> 时间：2012-10-29T08:37:42.957
> 
> 标签：ws-security

如何在 WS-Security usernameToken 警察中将用户名和密码设置为硬代码？

```
....
<ramp:RampartConfig xmlns:ramp="http://ws.apache.org/rampart/policy">
    <ramp:user>admin</ramp:user>
    <ramp:password......> ???
</ramp:RampartConfig>   
.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:41:06.683

您必须使用`<passwordCallbackClass>`

如果你想硬编码密码，定义一个这样的类。

```
public class MyHardcodedPasswordHandler implements CallbackHandler {
    public void handle(Callback[] callbacks) throws IOException,
            UnsupportedCallbackException {
        for (Callback callback : callbacks) {
            WSPasswordCallback pwcb = (WSPasswordCallback)callback;
            pwcb.setPassword("myPassword");
        }
    }
} 
```

然后在壁垒配置中

```
<passwordCallbackClass>something.something.MyHardcodedPasswordHandler</passwordCallbackClass> 
```

# php - 替代 file_get_contents 从 POST URL 读取 JSON 数据？

> ID：13118208
> 
> 赞同：0
> 
> 时间：2012-10-29T08:37:43.827
> 
> 标签：php, json

我的 POST URL 为“ **http://domain/mycontroller/function/info.json** ”，如何读取“ `info.json`”，我正在使用，`file_get_contents("php://input")`但有什么替代方法可以读取`JSON`数据或“ `info.json`”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:40:01.210

如果它在本地机器上，你可以使用

```
 fopen 
 fclose 
```

[http://php.net/manual/bg/function.fopen.php](http://php.net/manual/bg/function.fopen.php)

如果它在远程机器上，你可以使用

```
 curl 
```

[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T08:43:56.220

加速

你可以使用 fopen 或 curl

速度

```
curl>>>fopen>file_get_contents 
```

# xslt-1.0 - 可以模板匹配值为xml标签的流程参数

> ID：13118211
> 
> 赞同：1
> 
> 时间：2012-10-29T08:38:06.090
> 
> 标签：xslt-1.0

下面的 XSL 将提取“磁焦点的作用”。但现在我必须修改 xsl 以便输入标签必须作为 args 传递。

**输入 XML：**

```
<w:document>
   <w:body>
        <w:p>
            <w:pPr>
              <w:pStyle w:val="articletitle"/>
            </w:pPr>
            <w:r>
                 <w:t>The Role of Magnetic Focus</w:t>
            </w:r>
        </w:p>
        <w:p>
            <w:pPr>
              <w:pStyle w:val="paragraph"/>
            </w:pPr>
            <w:r>
                <w:t>All is well</w:t>
            </w:r>
        </w:p>
        </w:body>
</w:document> 
```

**XSL**：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
 xmlns:ve="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:m="http://schemas.openxmlformats.org/officeDocument/2006/math" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:wp="http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing" xmlns:w10="urn:schemas-microsoft-com:office:word" xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main" xmlns:wne="http://schemas.microsoft.com/office/word/2006/wordml"
>
<xsl:output method="text"/>
<xsl:template match="w:p"/>
<xsl:template match="w:p[w:pPr/w:pStyle/@w:val[matches(., concat('^(articletitle)$'),'i')]]"> 
    <xsl:value-of select="."/><xsl:text>
</xsl:text>
</xsl:template>
</xsl:stylesheet> 
```

我修改了上面的 xsl 如下，但我无法获得所需的输出

```
 <?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
 xmlns:ve="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:m="http://schemas.openxmlformats.org/officeDocument/2006/math" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:wp="http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing" xmlns:w10="urn:schemas-microsoft-com:office:word" xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main" xmlns:wne="http://schemas.microsoft.com/office/word/2006/wordml"
>

<xsl:param name="styleName" select="articletitle"/>
<xsl:param name="para" select="w:p"/>
<xsl:param name="parastyle" select="w:pPr/w:pStyle/@w:val"/>

<xsl:output method="text"/>
<xsl:template match="@* | node()">
    <xsl:copy>
        <xsl:apply-templates select="@* | node()"/>
         <xsl:choose>
            <xsl:when test="name() = $para">
            <xsl:message><xsl:value-of select="name()"/></xsl:message>
                <xsl:value-of select="name()"/>
             </xsl:when>
         </xsl:choose>
    </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

请帮忙.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:59:39.050

**只需更改**：

> ```
> <xsl:param name="para" select="w:p"/> 
> ```

到：

```
<xsl:param name="para" select="'w:p'"/> 
```

# sql-server-2005 - 如何合并两个存储过程数据

> ID：13118217
> 
> 赞同：0
> 
> 时间：2012-10-29T08:38:33.793
> 
> 标签：sql-server-2005

我有 2 个存储过程，每个 SP 返回 2 个具有相同模式的数据集。

数据就像

```
Stored procedure 1 
```

`Table1`

```
ID       Name
1        Apple
2        Sony
3        DELL 
```

`Table2`

```
OrderID  CustomerName
101        AB Stores
202        Sony World
301        PC House 
```

存储过程 2

`Table1`

```
ID       Name
21        HP
32        LG
34        ACCER 
```

`Table2`

```
OrderID  CustomerName
1301        X-PC World
2202        Your PC House
3301        Ajant Stores 
```

现在我想在其他存储过程中合并这样的数据

meargeData1 = SP1.Table1 + SP2.Table1

meargeData2 = SP1.Table2 + SP2.Table2

请建议我热我可以实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:47:41.597

将两个过程的结果收集到一个临时表中，就像有问题的那样。

[将存储过程的结果插入临时表](https://stackoverflow.com/questions/653714/how-to-select-into-temp-table-from-stored-procedure)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T08:58:47.387

像这样的解决方案[`OPENROWSET`](http://msdn.microsoft.com/en-us/library/ms190312.aspx)（如@PreetSangha 所包含的链接问题）不能处理多个结果集——它们只给你第一个结果集。

类似地，使用诸如[`INSERT ... EXEC`](http://msdn.microsoft.com/en-us/library/ms174335.aspx)将处理来自存储过程的多个结果集的构造，但它将所有结果存储在单个表中 - 您将无法将它们分开。（还有其他问题`INSERT ... EXEC`也不值得在这里讨论）

我能看到的唯一方法是在某处用不是 TSQL 的语言编写一些过程代码。这可以在您正在构建的任何客户端应用程序中，也可以在 CLR 存储过程中。无论哪种情况，您都必须手动执行合并。

# c - 如何在 C 中将向量参数传递给 OpenCL 内核？

> ID：13118228
> 
> 赞同：5
> 
> 时间：2012-10-29T08:39:14.213
> 
> 标签：c, vector, parameter-passing, opencl

我无法将向量类型 (uint8) 参数从 C 中的主机代码传递给 OpenCL 内核函数。

在主机中，我有一个数组中的数据：

```
cl_uint dataArr[8] = { 1, 2, 3, 4, 5, 6, 7, 8 }; 
```

（我的真实数据不仅仅是 [1, 8]；这只是为了便于解释。）

然后我将数据传输到缓冲区以传递给内核：

```
cl_mem kernelInputData = clCreateBuffer(context,
    CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR, sizeof(cl_uint)*8, dataArr, NULL); 
```

接下来，我将此缓冲区传递给内核：

```
clSetKernelArg(kernel, 0, sizeof(cl_mem), &kernelInputData); 
```

内核函数的签名看起来像这样：

```
kernel void kernelFunction(constant uint8 *vectorPtr) 
```

但是，内核似乎没有从指向`kernelInputData`. 当我从内核中传回值时，我看到它`vectorPtr`指向具有这种结构的东西：`( 1, 2, 3, 4, 5, ?, ?, ? )`问号*通常* `4293848814`在哪里，但有时是`0`. 无论哪种方式，都不是他们应该的样子。

我究竟做错了什么？

* * *

**编辑：**

我已经从使用数组切换到主机端的 cl_uint8 。我现在有：

`cl_uint8 dataVector = { 1, 2, 3, 4, 5, 6, 7, 8 };`

我将这个向量传递给内核，如下所示：

`clSetKernelArg(kernel, 0, sizeof(cl_uint8), &dataVector);`

内核函数的签名看起来像这样：

`kernel void kernelFunction(constant uint8 *vectorPtr)`

但是，运行此代码会给我一个`CL_INVALID_ARG_SIZE`错误`clSetKernelArg()`。`ARG_SIZE`如果我将参数切换为，则此错误消失，`sizeof(cl_uint8 *)`但随后我`EXC_BAD_ACCESS`在`__dynamic_cast`.`clSetKernelArg()`

我的设备是：

Apple Macbook Pro（2009 年中）
OSX 10.8 Mountain Lion
NVIDIA GeForce 9400M
OpenCL 1.0
CLH 1.0

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T08:58:25.780

您正在定义一个大小为 8 的 cl_uint 数组。 cl_mem 的创建和内核参数的设置是正确的。但是您的内核参数不正确：您尝试读取 cl_uint8 数组而不是 cl_uint。

如果要使用向量数据类型，则必须声明： cl_uint8 dataArr of size 1。或者如果要使用大小为 8 的数组：`kernel void kernelFunction(constant uint *vectorPtr, uint size):`

**编辑：**

内核参数`cl_uint8 dataVector`不是指针。所以，正确的代码是：

```
cl_uint8 dataVector = { 1, 2, 3, 4, 5, 6, 7, 8 };
clSetKernelArg(kernel, 0, sizeof(cl_uint8), &dataVector); 
```

和

```
kernel void kernelFunction(constant uint8 vectorPtr) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-30T21:44:30.987

**最小可运行示例**

`int2`传递给内核。它最初是作为一个数组创建的`cl_int`。

```
#include <assert.h>
#include <stdlib.h>

#include <CL/cl.h>

int main(void) {
    const char *source =
        "__kernel void main(__global int2 *out) {\n"
        "      out[get_global_id(0)]++;\n"
        "}\n";
    cl_command_queue command_queue;
    cl_context context;
    cl_device_id device;
    cl_int input[] = {0, 1, 2, 3};
    const size_t global_work_size = sizeof(input) / sizeof(cl_int2);
    cl_kernel kernel;
    cl_mem buffer;
    cl_platform_id platform;
    cl_program program;

    clGetPlatformIDs(1, &platform, NULL);
    clGetDeviceIDs(platform, CL_DEVICE_TYPE_ALL, 1, &device, NULL);
    context = clCreateContext(NULL, 1, &device, NULL, NULL, NULL);
    command_queue = clCreateCommandQueue(context, device, 0, NULL);
    buffer = clCreateBuffer(context, CL_MEM_READ_WRITE | CL_MEM_COPY_HOST_PTR, sizeof(input), &input, NULL);
    program = clCreateProgramWithSource(context, 1, &source, NULL, NULL);
    clBuildProgram(program, 1, &device, "", NULL, NULL);
    kernel = clCreateKernel(program, "main", NULL);
    clSetKernelArg(kernel, 0, sizeof(cl_mem), &buffer);
    clEnqueueNDRangeKernel(command_queue, kernel, 1, NULL, &global_work_size, NULL, 0, NULL, NULL);
    clFlush(command_queue);
    clFinish(command_queue);
    clEnqueueReadBuffer(command_queue, buffer, CL_TRUE, 0, sizeof(input), &input, 0, NULL, NULL);

    assert(input[0] == 1);
    assert(input[1] == 2);
    assert(input[2] == 3);
    assert(input[3] == 4);
    return EXIT_SUCCESS;
} 
```

在 Ubuntu 15.10 OpenCL 1.2 NVIDIA 352.53 上测试。

# dictionary - 在共享密钥的同时合并两个字典

> ID：13118231
> 
> 赞同：2
> 
> 时间：2012-10-29T08:39:18.130
> 
> 标签：dictionary, merge, python-3.x

我正在尝试构建一个小程序，给定一个包含姓名和地址的字典以及另一个包含姓名和电话号码的字典，输出应该将它们合并（而不是相互覆盖）。最终输出字典应包含姓名、地址（如果可用）和电话（如果可用）。这是一个例子：

```
addr = {'George': 'via Wagner, 23', 'White': 'Piazza Bologna, 1',
    'L. Red': 'via A. Einstein, 12', 'Pete': 'via Pio'}
phone = {'Mark': '347 8987989', 'George': '06 89786765',
     'Mauro B.': '3489878675', 'Pete': '07897878', 'L. Red': '09877887'} 
```

最后的字典：

```
addr_phone(addr, phone) -->
{'George':    {'address': 'via Wagner, 23'},
 'Mark':      {'phone': '347 8987989'},
 'George':    {'phone': '06 89786765'},
 'L. Red':   {'phone': '09877887', 'address': 'via A. Einstein, 12'},
 'Pete':       {'phone': '07897878', 'address': 'via Pio'},
 'Mauro B.':   {'phone': '3489878675'},
 'White': {'address': 'Piazza Bologna, 1'}} 
```

我试着写这个：

```
def addr_phone(addr, phone):
    d3={}
    d3.update(addr)
    d3.update(phone)
    for k,v in phone.items():
        if k not in addr:
            d3[k]=v
    return d3 
```

但是我得到了多个同名的实例，这不是我想要的。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T08:43:54.767

使用[`defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)：

```
from collections import defaultdict

out = defaultdict(dict)
for name, phonenumber in phone.iteritems():
    out[name]['phone'] = phonenumber
for name, address in addr.iteritems():
    out[name]['address'] = address 
```

对于 python 3，只需替换`.iteritems()`为`.items()`：

```
out = defaultdict(dict)
for name, phonenumber in phone.items():
    out[name]['phone'] = phonenumber
for name, address in addr.items():
    out[name]['address'] = address 
```

您确实需要遍历两个输入字典，因为您正在将值移动到每个名称的新字典中。

# linux - 使用 awk 解析 /proc/pid/smaps

> ID：13118235
> 
> 赞同：0
> 
> 时间：2012-10-29T08:39:46.270
> 
> 标签：linux, memory, sed, awk, profiling

我正在寻找一个简短的 awk / sed 脚本来从 proc/smaps 文件中提取 rss 信息，该文件具有以下记录格式：

```
77f73000-77f74000 rw-s 00000000 fd:00 230116     /var/lib/mylib.so
Size:                 4 kB
Rss:                  4 kB
Shared_Clean:         0 kB
Shared_Dirty:         0 kB
Private_Clean:        4 kB
Private_Dirty:        0 kB 
```

我正在寻找的输出是：

```
/var/lib/mylib.so 4 
```

*   如果记录可以按 rss 大小排序（大块优先），则额外奖励

提前致谢，
阿夫纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:54:10.727

不确定您的选择标准，但这仅在列出实际路径时匹配：

```
awk 'NF > 3 { f = $NF } $1 ~ /^Rss/ && f ~ /\// { print f, $2 }' 
```

追加`sort -nr -k2,2`对第二列进行降序排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:05:13.743

Perl 解决方案：

```
perl -ne '
    if (/^Size:\s+([0-9]+)/) {
        $h{$f} = $1
    } elsif (m{\s(/.*)$}) {
        $f = $1
    }
    }{
    print "$_\t$h{$_}\n" for sort { $h{$a} <=> $h{$b} } keys %h
    ' input.txt 
```

工作原理：如果读取以*Size*开头的行，请记住最后提到的文件中的数字。否则，如果提到文件，请记住它。在文件末尾，按数字对记住的对进行排序并打印它们。

# c++ - OpenGL纹理：错误的像素

> ID：13118243
> 
> 赞同：2
> 
> 时间：2012-10-29T08:40:22.627
> 
> 标签：c++, opengl, pixel, textures

我在 OpenGL 中使用纹理时遇到了麻烦（仅 2D）

我想显示一个级别（大小 15x15）并且每个字段都可以有不同的值/图片。
我有大约 100 种不同的字段类型，根据关卡设计，我必须为每种类型显示不同的图像。
如果我为每个可能的字段（100 个文件）使用单个 tga-Image，一切正常，但现在我将所有图像放在一个文件中，并且根据字段类型，我总是显示与图片。

问题：有时图像中的细线不显示~~，在不同的精灵之间，经常有黑色或灰色的线条，使整个图形难看。~~

有没有办法轻松解决这个问题？
（也许我必须将 tga-image 加载到一个 GLuint 中，然后将其拆分为 100 个不同的 GLuint？或者是否有改善渲染的设置？或者我是否必须更改 tga-image 文件本身的分辨率？）

这是我的图像文件的一部分，每个元素的分辨率为 220x220 像素 --> 整个图片：2200x2200 像素 ![精灵图像](../Images/cf5bf2c8b54e38bf90e6c9706083a69e.png)

这就是 OpenGl 输出：
![OpenGL-输出](../Images/838ed2464e4273ec93f2c5d0ca7846ba.png)

我真的不想拥有数百个图像文件。特别是因为加载所有这些文件会消耗大量时间，而且我确信那里有解决方案

**编辑：**

我正在使用以下设置：

```
// Specify filtering and edge actions
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_WRAP_S,GL_CLAMP);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_WRAP_T,GL_CLAMP); 
```

**编辑2：**

现在我将 GL_LINEAR 更改为 GL_NEAREST 并在纹理坐标中添加了半纹素，图像之间不再有线条 :)
但我还有另一个问题：
![像素错误](../Images/95c9d73a516be517569b8f71ccfe51cd.png)
图像中的小元素（线条）显示不正确。
它应该是这样的：
![应该怎么看](../Images/453373c3147bdf465ab49e254a393a66.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:52:23.890

“请记住，OpenGL 在纹素中心采样纹理”

看看这里的答案： [OpenGL ES Texture Coordinates Slightly Off](https://stackoverflow.com/questions/6023400/opengl-es-texture-coordinates-slightly-off)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:44:48.917

您需要向纹理添加填充像素，以避免沿其边缘出现线条。因此，当 OpenGL 从要绘制的纹理中采样像素时（包括 mipmap 级别，如果您以比文件中的尺寸更小的尺寸渲染它们），不会使用错误颜色的像素。

# css - 如何为 Mozilla 和 Chrome 等不同浏览器提供 CSS 属性

> ID：13118247
> 
> 赞同：4
> 
> 时间：2012-10-28T10:08:35.247
> 
> 标签：css, browser

如果我想为不同浏览器的页面（比如 index.html）赋予一个独特的属性。例如：Chrome 的蓝色背景和 Firefox 的红色背景，那么我该如何为这种情况编写 CSS 代码？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-28T15:27:24.703

## 使用 CSS 媒体查询 (Chrome/Safari)

```
@media not all and (-webkit-min-device-pixel-ratio:0)
{  
    #example
    {
        width: 200px;
    }
} 
```

## Chrome/Safari 特定的 css 文件 (Chrome/Safari)

```
<link rel="stylesheet" href="style-sheet_chrome.css" type="text/chrome/safari" /> 
```

## 这是一个 CSS 黑客列表

```
/***** Selector Hacks ******/

/* IE6 and below */
* html #uno  { color: red }

/* IE7 */
*:first-child+html #dos { color: red } 

/* IE7, FF, Saf, Opera  */
html>body #tres { color: red }

/* IE8, FF, Saf, Opera (Everything but IE 6,7) */
html>/**/body #cuatro { color: red }

/* Opera 9.27 and below, safari 2 */
html:first-child #cinco { color: red }

/* Safari 2-3 */
html[xmlns*=""] body:last-child #seis { color: red }

/* safari 3+, chrome 1+, opera9+, ff 3.5+ */
body:nth-of-type(1) #siete { color: red }

/* safari 3+, chrome 1+, opera9+, ff 3.5+ */
body:first-of-type #ocho {  color: red }

/* saf3+, chrome1+ */
@media screen and (-webkit-min-device-pixel-ratio:0) {
 #diez  { color: red  }
}

/* iPhone / mobile webkit */
@media screen and (max-device-width: 480px) {
 #veintiseis { color: red  }
}

/* Safari 2 - 3.1 */
html[xmlns*=""]:root #trece  { color: red  }

/* Safari 2 - 3.1, Opera 9.25 */
*|html[xmlns*=""] #catorce { color: red  }

/* Everything but IE6-8 */
:root *> #quince { color: red  }

/* IE7 */
*+html #dieciocho {  color: red }

/* Firefox only. 1+ */
#veinticuatro,  x:-moz-any-link  { color: red }

/* Firefox 3.0+ */
#veinticinco,  x:-moz-any-link, x:default  { color: red  }

/***** Attribute Hacks ******/

/* IE6 */
#once { _color: blue }

/* IE6, IE7 */
#doce { *color: blue; /* or #color: blue */ }

/* Everything but IE6 */
#diecisiete { color/**/: blue }

/* IE6, IE7, IE8 */
#diecinueve { color: blue\9; }

/* IE7, IE8 */
#veinte { color/*\**/: blue\9; }

/* IE6, IE7 -- acts as an !important */
#veintesiete { color: blue !ie; } /* string after ! can be anything */ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-28T11:29:54.333

首先，浏览器嗅探很糟糕，你几乎肯定会后悔这样做。

但是，如果必须，您可以像这样在服务器端进行：[Browser sniffing with .htaccess](http://v4.thewatchmakerproject.com/blog/no-more-css-hacks-browser-sniffing-with-htaccess/)

理想情况下，坚持最佳实践，即在 HTML 中使用条件注释来处理旧版本的 IE，并编写有意跨浏览器始终如一地工作的 CSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T11:20:28.413

你可以试试这个：

```
<script type="text/javascript">
var browser=navigator.appName;
if browser == "Microsoft Internet Explorer" {
document.write("<link type=\"text/css\" rel=\"stylesheet\" href=\"IE.css\">");
}
else if browser == "Firefox" {
document.write("<link type=\"text/css\" rel=\"stylesheet\" href=\"FF.css\">");
}
else {
document.write("<link type=\"text/css\" rel=\"stylesheet\" href=\"generic.css\">");
}
</script> 
```

来源：[https ://stackoverflow.com/a/1706221/1087653](https://stackoverflow.com/a/1706221/1087653)

或者您可以使用以下命令：

```
<!--[if IE 6]> 
<link rel="stylesheet" type="text/css" href="iespecific.css" />
<![endif]-->

<![if !IE]>
<link rel="stylesheet" type="text/css" href="not-ie.css" />
<![endif]> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-18T20:33:41.753

> `<link rel="stylesheet" href="style-sheet_chrome.css" type="text/chrome/safari">`

这是 WebKit/Blink 中的一个错误，Chrome 计划在版本 50 中修复它，因此它将不再工作。

[http://code.google.com/p/chromium/issues/detail?id=286682](http://code.google.com/p/chromium/issues/detail?id=286682)

[https://groups.google.com/a/chromium.org/forum/m/#!topic/blink-dev/nH1O6WszMgo](https://groups.google.com/a/chromium.org/forum/m/#!topic/blink-dev/nH1O6WszMgo)

# c# - 如何在 datagridviewcell 上绘制自定义控件？

> ID：13118251
> 
> 赞同：2
> 
> 时间：2012-10-29T08:40:46.177
> 
> 标签：c#, winforms, datagridview, custom-controls

我想为`datagridviewcell`.

我唯一的好参考是[http://msdn.microsoft.com/en-us/library/7tas5c80.aspx](http://msdn.microsoft.com/en-us/library/7tas5c80.aspx)

但是，我希望单元格显示我自己的用户控件而不是

```
 public class CustomCell : DataGridViewTextBoxCell
 {   
     protected override void Paint(System.Drawing.Graphics graphics,
       System.Drawing.Rectangle clipBounds, System.Drawing.Rectangle cellBounds,
        int rowIndex, DataGridViewElementStates cellState, object value, object 
          formattedValue, string errorText, DataGridViewCellStyle cellStyle,
            DataGridViewAdvancedBorderStyle advancedBorderStyle, DataGridViewPaintParts paintParts)
     {
          base.Paint(graphics, clipBounds, cellBounds, rowIndex, cellState, value, 
            formattedValue, errorText, cellStyle, advancedBorderStyle, paintParts);               
     }
 } 
```

谁能指导我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T08:57:01.993

为了节省资源，`DataGridView`控件中的单元格大部分时间都处于显示模式，只有当用户使用鼠标或键盘输入单元格时才会更改为编辑模式。您在问题中提到的示例被认为是最佳实践，因为编辑控件（在这种情况下， a `DateTimePicker`，但也可以很容易地成为您自己的自定义用户控件）仅出现在编辑模式下，因此仅适用于一个单元格一次。

`Paint`当单元格不处于编辑模式时，它应该使用您的子类的方法中的逻辑来呈现其值的等效表示`DataGridViewCell`。您可以通过以下几种方式之一执行此操作：

*   只需根据其值将文本或图像绘制到单元格的边界上；不要试图复制编辑控件的外观。
*   `ControlPaint`使用or模拟编辑控件的外观`VisualStyleRenderer`（注意：这涉及很多额外的工作）。
*   将绘画代码从您的自定义用户控件移动到实用程序类中，以便它和单元格可以使用相同的绘画代码。

在大多数情况下，第一个选项就足够了；如果单元格看起来与您的编辑控件完全相同很重要，请仅尝试其他方法之一。

# c# - 使用 HttpWebRequest 将数据发布到表单不起作用

> ID：13118253
> 
> 赞同：0
> 
> 时间：2012-10-29T08:40:56.297
> 
> 标签：c#, post, httpwebrequest

我在这里创建了一个[表单](https://docs.google.com/spreadsheet/ccc?key=0AipeKMUl_c57dDYyM0MxQUYzZnAwTGFfeFA0VG9VVUE)并尝试使用 httpwebrequest 在其中发布数据。数据未提交到此[电子表格](https://docs.google.com/spreadsheet/ccc?key=0AipeKMUl_c57dDYyM0MxQUYzZnAwTGFfeFA0VG9VVUE#gid=0)中，我不知道为什么

```
 private const string PostURI = "https://docs.google.com/spreadsheet/formResponse?formkey=dDYyM0MxQUYzZnAwTGFfeFA0VG9VVUE6MQ&amp;ifq";

    static void Main(string[] args)
    {

        BeginGetRequestExample();            
        Console.Read();
    }

    private static void BeginGetRequestExample()
    {
        var request = (HttpWebRequest)HttpWebRequest.Create(PostURI);
        request.ContentType = "application/x-www-form-urlencoded";
        request.Method = "POST";
        request.BeginGetRequestStream(new AsyncCallback(GetRequestCallback), request);
    }

    private static void GetRequestCallback(IAsyncResult asynchronousResult)
    {
        HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;

        using (var postStream = request.EndGetRequestStream(asynchronousResult))
        {
            string postData = "entry.0.single=testdata";
            byte[] byteArray = Encoding.UTF8.GetBytes(postData);
            postStream.Write(byteArray, 0, postData.Length);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:55:04.733

没有在您的代码中检查以查看异步作业的状态。您可以使用 ResetEvents 确保等待异步工作完成

声明一个`ManualResetEvent`

```
private static ManualResetEvent workCompleted= new ManualResetEvent(false); 
```

将**workCompleted.WaitOne()**添加到您的 BeginGetRequestExample。现在此方法将等待异步方法完成。

```
 request.BeginGetRequestStream(new AsyncCallback(GetRequestCallback), request);
 workCompleted.WaitOne();//This will block the thread. 
```

将**workCompleted.Set()**添加到您的.The `GetRequestCallback`set() 调用将向 BeginGetRequestStream 发出执行完成信号

```
 using (var postStream = request.EndGetRequestStream(asynchronousResult))
            {
                string postData = "entry.0.single=testdata";
                byte[] byteArray = Encoding.UTF8.GetBytes(postData);
                postStream.Write(byteArray, 0, postData.Length);
            }

 workCompleted.Set();//work completed,signal BeginGetRequestExample. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:54:22.493

根据我的经验...我认为您发布的数据可能不正确。

这是原始的 HttpPost

```
POST https://docs.google.com/spreadsheet/formResponse?formkey=dDYyM0MxQUYzZnAwTGFfeFA0VG9VVUE6MQ&ifq HTTP/1.1
Host: docs.google.com
Connection: keep-alive
Content-Length: 62
Cache-Control: max-age=0
Origin: https://docs.google.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4
Content-Type: application/x-www-form-urlencoded
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
X-Chrome-Variations: CPO1yQEIl7bJAQietskBCKS2yQEIp7bJAQiptskBCLW2yQEIsIPKAQ==
Referer: https://docs.google.com/spreadsheet/viewform?formkey=dDYyM0MxQUYzZnAwTGFfeFA0VG9VVUE6MQ&amp;ifq
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8,en-GB;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: PREF=ID=95ae5350cc16c940:U=28fe773a18c2dbe6:LD=en:TM=1345120351:LM=1345194034:GM=1:S=3Cn9QquJ5Czg34G0; __utma=184632636.1591015415.1346839842.1346839842.1346839842.1; __utmz=184632636.1346839842.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); NID=62=1rseSYPhjiIKnlAgPIthlh-KblNw8OVSOJuFL54wW2wX9HmucRXT83vYgz-JAUlgGuFv8BJTQutADeZvxtQnOnnUtOhckpRN6Q39zeRb9yKqCp2p1U-ZB3mhmkPwz4Iz0j3FHeGty9yDqOjlma5rG5GtgRyl6z7YakbICD7ckt11JJm3-jrFemtNg-wH1sqWZWiThPzb4R40Q3RAeohBgvU3-nJ38_VZDG9rA7pTVvQ7jw; HSID=AqYa-X7Si3Broi94c; SSID=AxGpbOiAWCleF5e9z; APISID=8Fgs9inkdycfWieu/AEg1bwhd3Aesfa3XR; SAPISID=G9xcUdWksRD2dzMM/AbmBuqsL_bNcslBTQ; WRITELY_SID=DQAAAGEBAACUg03i_4fbFZEg_gr-iMZ6zg_h5P-tqox77Gw_mLIqgQtDD0OyUGTw0Dn1p5plW1rQnqNuDYrG8XscJCeAyWiL-8p5sM0qtZGUNKX24BgZarvYBWS78x6kEKsoGKibwVKr2r481JBN7Q-nr7gjLw6A6aKD0mezPGP7PHRc7xZ7g1vId50WOyb2_0hqOzJ6nXSu_3y1yce4ursF3aqBfHzbCHnPVN6WNhCjZbkqCGiFNDIcVz-POlyB5QTXxtAYNGUgJdAXpXQPS3ET7MAOLCH4roafbFDi18lQ7qvuvEz1A8QvGNhCi2jnEr_STmkRWfmnVP_0rahkaDpPkFmg2TJd6e8s6xdzu9UL6bxHshacaapu7CEj-pJIL8zq2PVEkJLs7DcvvMIdCDxDOtt9j5Jgmq0uDjto94EvnBnBTcnwWpZZY0-bT9yl6m9Nt3pMgtl4VBYJgwEWjPV46OfYdgJosJKEHXo0wgDs9YomzxHvsQ; S=explorer=gpeJDnKwHily6YMp3ZAyaQ; SS=DQAAAGIBAACUg03i_4fbFZEg_gr-iMZ6cA1_10PYYPfBefa6O8m4JId5S6dOVXANhELN3jPzvZxjjqlGEbGrvah6eNypAvojSKB4X_xdioJLbY3T80h9oBV1doK6KY7-hwrlKj62pjLxQ-ZoHu-pfZc-8WdkowaEPOkg4wS_ZblJfMAykXbufmDMg4u1IPt95A4vI45BBBL71XcT8S4PgI4UfXFkNkX7DqxfOYFUiCnVHyLMaSRE_N9mfdfyLuYAwm_e84G2COiOeEW-0D5dytWlAPznvIgKVbxcdeBosZJsFOc_pgeVVUCCAyQIMLdqaWCv_FE-aO5dV73a2vLOmgETg34VM1fV7fxR0b_hF88njjJpeuQVBu1MgFWWyARsO56ZrJ89QrC7PwyCLNm-lsjf0WXDZz6BbP4zw-U2I_DBxJsQ4XsqXc2663BUK5k9Sg7Yy8ULhjZkxILYzQd016m0yE9cJlHBEx4MMmm6fBDlkzzXs8OIHA; SID=DQAAAF8BAABm0OXzbbbSZWD3Qj4rTcK4dDifbWX0DEgZ3cBs_xxFxCJJj35PBe6ORIspSn-inbK3g4fU6e6OsedvVP11l_Rf9GOA-BucVEYOpL8f7LWSbybhRD9Db9vQWmoCRiterbKY67_4nJYRaaY69djDdpJUXpykAYq5XGCWoX89qQUbkZmixKUZU2dXIPgxdpnEwmSJNcspjuLfJWhRMRnIc4cGhV1osB2W33XriFWZQ-vIfUoIAygrM-a_zpK4-Bw0L4hym8aVdMv2pB9QwEzPFKzNBa7l3PLjs7dHWqu-btHnVNf_j9tZk0GqE3EjrsdSeJpTaRfwW0vBhdemHbPJtIq5DmdAAwNDV3_RM79iS6S1vyszAb_G51ZDWH1-1IR8FjbgTPJT2llGmwYKe9C63LK5_WzqenwoPQnJj5kwUEeBnqqs_9nKOD2cFxDhuVky_Z5AIuhVZAx2sUzgIG8uB1PQ

entry.0.single=abcdefg&pageNumber=0&backupCache=&submit=Submit 
```

这是原始的 http 响应

```
HTTP/1.1 200 OK
Access-Control-Allow-Origin: https://docs.google.com
Content-Type: text/html; charset=utf-8
X-Robots-Tag: noindex, nofollow, nosnippet
Date: Mon, 29 Oct 2012 09:47:43 GMT
Expires: Mon, 29 Oct 2012 09:47:43 GMT
Cache-Control: private, max-age=0
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Server: GSE
Content-Length: 1225

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>Thanks!</title>

<link href='/static/spreadsheets/client/css/627030122-form_response_compiled.css' type='text/css' rel='stylesheet'>
<style type="text/css">
      .ss-logo {background:transparent url("https://ssl.gstatic.com/docs/spreadsheets/forms/sprites_2.png") no-repeat}
    </style></head>
<body><div class="ss-container"><div class="ss-resp-card"><div class="ss-confirmation">TestPost</div>
<div class="ss-custom-resp">เราได้บันทึกคำตอบของคุณไว้แล้ว </div>
<div class="ss-opt-actions">

</div>
<hr class="ss-break">
<div class="ss-footer"><div class="ss-footer-txt"><a class="ss-actions-link" href="https://docs.google.com/spreadsheet/viewform?formkey=dDYyM0MxQUYzZnAwTGFfeFA0VG9VVUE6MQ&amp;ifq">Submit another response</a>
|
<a class="ss-actions-link" href="https://docs.google.com/spreadsheet/newform?ref=submitpage">Create your own form</a></div>
<a class="ss-logo-link" href="https://docs.google.com/"><div class="ss-logo">&nbsp;&nbsp;</div></a></div></div></div></body></html> 
```

您需要做的可能是构造确切的 HttpPost。

# java - 如何更新片段中的 ListView？

> ID：13118254
> 
> 赞同：0
> 
> 时间：2012-10-29T08:40:57.003
> 
> 标签：java, android, listview, android-fragments, android-listfragment

我正在尝试在 Fragment 中更新 ListView，它实际工作的唯一方法是如果我将片段实例化为新的。adpter.notifyDataSetChanged() 不工作？为什么不呢？这里的代码活动和片段：

```
public class TimerList extends Activity{

private DataSource datasource;
TimerListFragment timerfragment;
IntervalListFragment intervalfragment;
public List<TimerObject> values;
public String name;
public String intervals;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.interval_fragment_container);
    datasource = new DataSource(this);
    datasource.open();
    values = datasource.getAllComments();

    if (savedInstanceState == null) {

        Toast.makeText(getApplicationContext(), "MADE NEW FRAGMENTS", Toast.LENGTH_SHORT).show();
         timerfragment = new TimerListFragment();
         intervalfragment = new IntervalListFragment();

    }

}

public void delete(Long position){

    TimerObject timerobject = datasource.getTimerObject(position);
    datasource.deleteComment(timerobject);
    values = datasource.getAllComments();
}

@Override
protected void onStart() {

    FragmentManager fragmentManager = getFragmentManager();
    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
    fragmentTransaction.add(R.id.fragment_container, timerfragment);
    fragmentTransaction.addToBackStack(null);
    fragmentTransaction.commit();

    super.onStart();
} 
```

还有我的片段：

```
public class TimerListFragment extends ListFragment {

List<TimerObject> values ;
Activity a;
ArrayAdapter<TimerObject> adapter;
ListView lv;

@Override
public void onCreate(Bundle savedInstanceState) {

    setHasOptionsMenu(true);
    values = ((TimerList)getActivity()).getValues();
    setBar();
     adapter = new ArrayAdapter<TimerObject>(getActivity(), android.R.layout.simple_list_item_1, values);
     setListAdapter(adapter);
     super.onCreate(savedInstanceState);
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {

    ((TimerList)getActivity()).play(Long.valueOf(position));
    super.onListItemClick(l, v, position, id);
}

public void setBar(){

        ActionBar actionbar = getActivity().getActionBar();
        actionbar.setTitle("Timer List");

}

public void update(){
    setBar();
    Toast.makeText(getActivity(), "UPDATE", Toast.LENGTH_LONG).show();
    values = ((TimerList)getActivity()).getValues();
    adapter.notifyDataSetChanged();

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
         View view = inflater.inflate(R.layout.interval_timer_list,
                 container, false);

    return view;

}

@Override
public void onStart() {
    update();
    lv = getListView();
    lv.setOnItemLongClickListener(new OnItemLongClickListener() {
         public boolean onItemLongClick(AdapterView parent, View view, int position, long id) {

              final TimerObject selected = adapter.getItem(position);
              final Dialog d = new Dialog(getActivity());
              d.setContentView(R.layout.interval_deletetimer_dialog);
              d.setTitle("Delete " + selected.getComment() + "?" );
              ImageButton delete = (ImageButton) d.findViewById(R.id.delete);
              delete.setOnClickListener(new OnClickListener() {
                     @Override
                         public void onClick(View v) {
                        ((TimerList)getActivity()).delete(Long.valueOf(selected.getId()));

                        update();
                        }
                     });

              d.show();

              return true;
              }
            });
    super.onStart();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T00:54:23.950

我尝试做类似的事情，我通过简单地重做片段事务解决了这个问题。

在您的情况下，您可以在您的`onListItemClick()`方法中完成此操作。

你可以复制这个：

```
 FragmentManager fragmentManager = getFragmentManager();
    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
    fragmentTransaction.add(R.id.fragment_container, timerfragment);
    fragmentTransaction.addToBackStack(null);
    fragmentTransaction.commit(); 
```

`onListItemClick()`在你的片段中进入你的方法

这将重置片段。不幸的是，这也会将您的列表设置为空。解决这个问题的一种方法是使`values`列表成为类的`private static`变量`TimerListFragment`。这样，对列表所做的任何更改都将保持“已保存”，并且当您重新加载片段时，它将使用新更新的列表填充。

希望这可以帮助

# image - 排版：覆盖多次

> ID：13118260
> 
> 赞同：1
> 
> 时间：2012-10-29T08:41:30.603
> 
> 标签：image, overriding, typo3, typoscript

我有 3 个图像（内容对象）：

```
tempProjectImage = IMAGE                                                                  
                tempProjectImage {
                    file{
                        #Nur der erste Eintrag.
                        import.listNum = 0

                        #Datei wird aus DAM gelesen
                        import.cObject = USER                               
                        import.cObject {
                            userFunc = tx_dam_tsfe->fetchFileList
                            refField = project_picture
                            refTable = tx_nmshowroom_items
                        }                            
                        width = 298
                        height = 200                            
                    }

                    altText.field = title
                    titleText.field = title
                    params = class="previewImage"                                                                                                       
                }

tempItemImage = IMAGE                                                                  
                tempItemImage {
                    file{
                        #Nur der erste Eintrag.
                        import.listNum = 0

                        #Datei wird aus DAM gelesen
                        import.cObject = USER                               
                        import.cObject {
                            userFunc = tx_dam_tsfe->fetchFileList
                            refField = images
                            refTable = tx_nmshowroom_items
                        }                            
                        width = 298
                        height = 200                            
                    }

                    altText.field = title
                    titleText.field = title
                    params = class="previewImage"                                                                                                       
                }

custImage = IMAGE
                    custImage {
                        file{
                            #Nur der erste Eintrag.
                            import.listNum = 0

                            #Datei wird aus DAM gelesen
                            import.cObject = USER                               
                            import.cObject = USER                               
                            import.cObject {
                                userFunc = tx_dam_tsfe->fetchFileList
                                refField = images
                                refTable = tx_nmshowroom_customers
                                refUid.field = tx_nmshowroom_customers
                            }                        
                            width = 298
                            height = 200                            
                        }

                        altText.field = title
                        titleText.field = title
                        params = class="previewImage"                                                                                                       
                    } 
```

在我的 HTML 模板中，我有

```
###IMAGE### 
```

我想做的是一种多重覆盖：

如果 tempItemImage 为空，则显示 tempProjectImage，如果 tempProjectImage 也为空，则显示 custImage。

我开始：

```
image < .customers.custImage
image.file.import.override.cObject < .tempProjectImage.file.import.cObject 
```

这非常有效。但是当我添加另一个覆盖时：

```
image < .customers.custImage
image.file.import.override.cObject < .tempProjectImage.file.import.cObject
image.file.import.override.cObject < .tempItemImage.file.import.cObject 
```

它不起作用了。tempItemImage（如果存在）永远不会覆盖其他图像。

我究竟做错了什么？

在此先感谢，戴维德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:14:06.817

有一个 stdWrap 函数“ifEmpty”，我想这适合你想做的事情。

（未经测试）

```
# you need only one IMAGE object,
# but you add an ifEmpty statement, two times with
# the fall back USER-Object
tempProjectImage = IMAGE                                                                  
tempProjectImage {
  file{
    import.listNum = 0
    import.cObject = USER                               
    import.cObject {
      # default
    }
    import.ifEmpty.cObject = USER
    import.ifEmpty.cObject {
       # Fallback 
    }
    import.ifEmpty.ifEmpty.cObject = USER
    import.ifEmpty.ifEmpty.cObject {
       # second fallback
    }
  }
} 
```

# php - 将参数绑定到 pdo 函数

> ID：13118261
> 
> 赞同：0
> 
> 时间：2012-10-29T08:41:31.340
> 
> 标签：php, mysql, pdo

我正在尝试编写以下函数来显示 MySQL 表的内容。

```
$q=$_GET["q"];
function risk_allocation($db)  
  {    
    $result = $db->query("select r.risks as risks,r.risktype as risktype,j.job as job from risks r LEFT OUTER JOIN `jobsrisks` j on r.risks = j.risk and j.job=:q"); 
    $result ->bindParam(':q', $q, PDO::PARAM_INT);
    return $result; 
  }
        $allocationlist = risk_allocation($db); 
```

然后我用以下方法调用函数：

```
while($row = $allocationlist->fetch(PDO::FETCH_ASSOC)) 
{
echo $line['risks'];
echo $line['risktype'];
} 
```

我收到错误消息：

```
Fatal error: Call to a member function bindParam() on a non-object in /home/she/public_html/versionfour/getrisksperjob.php on line 11 
```

第 11 行在哪里

```
$result ->bindParam(':q', $q, PDO::PARAM_INT); 
```

我觉得这是一个简单的问题，因为我刚刚被介绍给 pdo，但任何帮助都一如既往地受到赞赏。

**更新**

根据建议的答案，我的代码现在如下执行查询并包含变量 q。但是仍然会发生相同的错误。感谢您迄今为止的帮助，有什么想法吗？

## 致命错误：在第 11 行的 /home/she/public_html/versionfour/getrisksperjob.php 中的非对象上调用成员函数 bindParam()

```
function risk_allocation($db,$q)  
  {    
    $result = $db->query("select r.risks as risks,r.risktype as risktype,j.job as job from risks r LEFT OUTER JOIN `jobsrisks` j on r.risks = j.risk and j.job=:q"); 
    $result ->bindParam(':q', $q, PDO::PARAM_INT);
    $result->execute();
    return $result; 
  }
  $allocationlist = risk_allocation($db,$q); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T08:42:44.317

您忘记[执行](http://php.net/manual/en/pdostatement.execute.php)查询，此外您需要准备而不是调用查询：

```
$result = $db->prepare("select r.risks as risks,r.risktype as risktype,j.job as job from risks r LEFT OUTER JOIN `jobsrisks` j on r.risks = j.risk and j.job=:q"); 
$result->bindParam(':q', $q, PDO::PARAM_INT);
$result->execute(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T08:47:29.147

1.你`forgot to execute query`

```
$result->execute(); 
```

2.`$q`将`outside function so you will never get value of that inside function.`$q 作为函数的第二个参数传递

```
$q=$_GET["q"];
function risk_allocation($db,$q)  
  {    
    $result = $db->prepare("select r.risks as risks,r.risktype as risktype,j.job as job from risks r LEFT OUTER JOIN `jobsrisks` j on r.risks = j.risk and j.job=:q"); 
    $result ->bindParam(':q', $q, PDO::PARAM_INT);
    $result->execute();
    return $result; 
  }
  $allocationlist = risk_allocation($db,$q); 
```

# php - Bind many forms from twig to database Symfony2

> ID：13118266
> 
> 赞同：1
> 
> 时间：2012-10-29T08:42:13.897
> 
> 标签：php, forms, symfony, twig, symfony-2.1

i have problem with binding data from a form to database, I have a form with test name and it's categories, when i want to add values from forms to database it only binds the name of the test and only ONE name of the category, how can i make to bind other categories to database ...: My controller:

```
public function createAction()
{
    $success = 0;
    $name = $this->getRequest()->get('name');

    if( !empty($name) )
    {
        $test = new Test();
        $test->setName($this->getRequest()->get('name'));

        $em = $this->getDoctrine()->getManager();
        $em->persist($test);
        $em->flush();

        $success = 'Test '.$test->getName().' was created';
    }
    else
    {
        $success = 'Test name can not be empty';
    }

    $category = $this->getRequest()->get('category-new');

    if( !empty($category))
    {

        $categoryName = new Category();
        $categoryName->setName($this->getRequest()->get('category-new'));

        $em = $this->getDoctrine()->getManager();
        $em->persist($categoryName);
        $em->flush();

        $success = 'Category '.$categoryName->getName().' was created';
      }

    else
    {
        $success = 'Category name can not be empty';
    }

    return $this->redirect($this->generateUrl('test.new'));
} 
```

My twig file:

```
 extends '::base.html.twig' %}

  {% block stylesheets %}
   {{ parent() }}
  <link rel="stylesheet" href="{{ asset('bundles/ladelaodesktester/css/new.css') }}" 
   type="text/css" media="all">

<link rel="stylesheet" href="{{ asset('bundles/ladelaodesktester/css/colorpicker.css') 
    }}" type="text/css" media="all">
<link rel="stylesheet" href="{{ asset('bundles/ladelaodesktester/css/layout.css') }}" 
  type="text/css" media="all">
  {% endblock %}

    {% block body %}
     <ul id="breadcrumb">
  <li><a href="{{path('homepage')}}" title="Home"><img src="{{ 

  asset('bundles/ladelaodesktester/images/home.png') }}" alt="Home" class="home" /></a>
  </li>
   <li><a href="{{path('test.new')}}" title="New"> New test </a></li>
   <li> Please add data to new test </li>
    </ul>
   {#<div class="wrap">#}
   <div class="new-test">
   <h2>New test </h2>
    <form action="{{ path('test.create') }}" method="post">
        Test name: <input type="text" name="name"/><br>

         Category 1  <input class="color {valueElement:'myValue'}" type="text" 
         name="category-new"><br>
        Category 2  <input class="color {valueElement:'myValue1'}" type="text" 
        name="category-new"><br>
        Category 3  <input class="color {valueElement:'myValue2'}" type="text" 
        name="category-new"><br>
        Category 4  <input class="color {valueElement:'myValue3'}" type="text" 
         name="category-new"><br>
        Category 5  <input class="color {valueElement:'myValue4'}" type="text" 
        name="category-new"><br>

        <input type="submit" value="Add">
        </form>
       </div>
     <table class="test-list">
       <caption></caption>
        <tbody>
      <tr>
          <th>Test name</th>
        <th># questions</th>
        <th># passed</th>
        <th># action</th>
    </tr>
    {% for test in tests %}
    <tr>
        <td>
           {{ test.name }}
        </td>
        <td>
           {{ test.countquestions }}
        </td>
        <td>
            {{ test.countresults }}
        </td>
        <td>
            <a href="{{ path('test.show', { 'slug': test.slug }) }}">analyze</a>|
            <a href="">new result</a> |
            <a href="{{ path('edit.test', { 'slug': test.slug }) }}">edit </a>
        </td>
    </tr>
    {% endfor %}
    </tbody>
  </table>
   {#</div>#}
{% endblock %}
{% block javascripts %}
  {{ parent() }}
  <script src="{{ asset('bundles/ladelaodesktester/js/new.js') }}" 
  type="text/javascript"></script>
<script src="{{ asset('bundles/ladelaodesktester/js/jscolor.js') }}" 
 type="text/javascript"></script>
{% endblock %} 
```

my entity of category:

```
class Category
{
/**
 * @var integer $id
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var string $name
 *
 * @ORM\Column(name="name", type="string", length=255)
 */
private $name;

/**
 * @var string $color
 *
 * @ORM\Column(name="color", type="string", length=255)
 */
private $color;

public function __construct()
{
  $this->color = '255,255,0'; // default color for category
}

/**
 * Get id
 *
 * @return integer
 */
public function getId()
{
    return $this->id;
}

/**
 * Set name
 *
 * @param string $name
 * @return Category
 */
public function setName($name)
{
    $this->name = $name;

    return $this;
}

/**
 * Get name
 *
 * @return string
 */
public function getName()
{
    return $this->name;
}

/**
 * Set color
 *
 * @param string $color
 * @return Category
 */
public function setColor($color)
{
    $this->color = $color;

    return $this;
}

/**
 * Get color
 *
 * @return string
 */
public function getColor()
{
    return $this->color;
 }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T21:58:59.600

Change the input name to: "category-new[]" to make it an array.

in the controller:

```
$categories = $this->getRequest()->get('category-new');
foreach($categories as $category) {
    $categoryName = new Category();
    $categoryName->setName($category);

    $em = $this->getDoctrine()->getManager();
    $em->persist($categoryName);
}
$em->flush(); 
```

# spring - 线程安全休眠 DAO 层

> ID：13118267
> 
> 赞同：0
> 
> 时间：2012-10-29T08:42:18.763
> 
> 标签：spring, hibernate, thread-safety, batch-processing

我有一个 Transaction 对象列表。

```
List<Transaction> transactions; 
```

我需要通过创建一个并发更新事务的线程池来批处理这些事务。这些线程使用相同的 DAO 类（**Spring**单例 bean）更新这些事务以更新事务。我使用**Hibernate**作为**ORM**

我应该考虑什么来确保我的代码是线程安全的？我有点困惑。

这是 DAO 类。`SessionFactory`也被定义为一个 Spring bean，然后自动装配到 DAO 类。

```
@Autowired
SessionFactory sessionFactory;

@Override
public Transaction update(Transaction transaction) {
    Session session = sessionFactory.openSession();
    session.beginTransaction();

    session.update(transaction);

    session.getTransaction().commit();
    return transaction;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T08:54:38.980

[为了在池化数据库连接方面获得更好的性能，有像c3p0](http://sourceforge.net/projects/c3p0/)这样的开源实现，它可以很好地与 spring 和 hibernate 配合使用。这对于批处理尤其重要。

您使用的是休眠实现`SessionFactory`吗？如果是这种情况，那么它确实是线程安全的，所以你应该很好。

另一个建议是查看可能对您的情况有用的[春季批次。](http://static.springsource.org/spring-batch/)

更新：你已经说过你正在使用 Hibernate，所以`SessionFactory`应该很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T11:19:43.967

我认为你的问题比线程安全要大一点，你需要唤起事务管理。会话工厂生成的会话是线程本地的（spring 的 HibernateTransactionManager 和创建 sessuinFactory 的 beanFactory - 例如：AnnotationSessionFactoryBean- 管理所有这些东西）

所以你的代码是安全的；）

# database - 使用整数查询不起作用

> ID：13118268
> 
> 赞同：0
> 
> 时间：2012-10-29T08:42:28.753
> 
> 标签：database, postgresql

我一直在 stackoverflow 和其他来源上搜索，但没有找到解决方案

下面的查询按预期工作，`custinfo.cust_cntct_id`或者`custinfo.cust_corrcntct_id = ''`（空白不是`NULL`）然后我没有得到任何结果。两者都是整数字段，如果两者都有整数值，那么我会得到结果。我仍然希望返回一个值，`cntct_email`或者`corrcntct_email`即使`custinfo.cust_cntct_id`或者`custinfo.cust_corrcntct_id = blank`

有人可以帮我完成这项工作吗？数据库是 PostgreSQL。

```
SELECT 
  cntct.cntct_email AS cntct_email, 
  corrcntct.cntct_email AS corrcntct_email
FROM 
  public.custinfo, 
  public.invchead, 
  public.cntct, 
  public.cntct corrcntct
WHERE 
  invchead.invchead_cust_id = custinfo.cust_id AND
  cntct.cntct_id = custinfo.cust_cntct_id AND
  corrcntct.cntct_id = custinfo.cust_corrcntct_id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T08:48:50.753

PostgreSQL 实际上不会让您测试一个整数字段的空白值（除非您使用的是真正古老的版本 - 8.2 或更早版本），因此您必须使用“有帮助”转换`''`为的查询生成器`NULL`或忽略的工具错误。

在 Pg 9.2 上观察这一点：

```
regress=> CREATE TABLE test ( a integer );
CREATE TABLE
regress=> insert into test (a) values (1),(2),(3);
INSERT 0 3
regress=> SELECT a FROM test WHERE a = '';
ERROR:  invalid input syntax for integer: ""
LINE 1: SELECT a FROM test WHERE a = ''; 
```

如果您试图测试`= NULL`，[这是不正确的](http://www.postgresql.org/docs/current/static/functions-comparison.html)。您必须使用`IS NOT NULL`or`IS DISTINCT FROM NULL`代替。测试`= NULL`always 会导致，这在子句`NULL`中被视为 false 。`WHERE`

例子：

```
regress=> insert into test (a) values (null);
INSERT 0 1

regress=> SELECT a FROM test WHERE a = NULL;
 a 
---
(0 rows)

regress=> SELECT a FROM test WHERE a IS NULL;
 a 
---

(1 row)

regress=> SELECT NULL = NULL as wrong, NULL IS NULL AS right;
 wrong | right 
-------+-------
       | t
(1 row) 
```

* * *

顺便说一句，你真的应该使用 ANSI JOIN 语法。它更具可读性，并且更容易忘记输入条件并意外获得笛卡尔积。我会重写您的查询以获得相同的功能和性能但更好的可读性：

```
SELECT 
  cntct.cntct_email AS cntct_email, 
  corrcntct.cntct_email AS corrcntct_email
FROM 
  public.custinfo ci
  INNER JOIN public.invchead
    ON (invchead.invchead_cust_id = ci.cust_id)
  INNER JOIN public.cntct 
    ON (cntct.cntct_id = ci.cust_cntct_id)
  INNER JOIN public.cntct corrcntct 
    ON (corrcntct.cntct_id = ci.cust_corrcntct_id); 
```

使用表别名通常会使它更干净；`custinfo`在这里，为了简洁起见，我将较长的名称别名`ci`为。

# redis - 增加默认内存和hash，设置redis的key limit

> ID：13118270
> 
> 赞同：0
> 
> 时间：2012-10-29T08:42:39.473
> 
> 标签：redis

我正在编写一个 JAR 文件，该文件从 Oracle 数据库中获取大量数据并存储在 Redis 中。详细信息已正确存储，但我在 jar 中定义的 set key 和 hash key 在 redis db 中受到限制。应该有将近 200 个 Hash 和 300 个集合键。但是，在 redis 中提供密钥 * 时，我只得到 29 个密钥。请帮助了解如何增加 redis 内存或哈希的限制或设置密钥存储大小。

注意：我在 redis.conf 文件中手动更改了 hash-max-zipmap-entries 1024 hash-max-zipmap-value 64。但是，它没有反映。哪里需要改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T10:41:17.107

除了内存大小（检查 maxmemory 和 maxmemory-policy 参数）之外，您可以在 Redis 实例中放置的 set 或 hash 键的数量没有限制。

hash-max-zipmap-entries 参数完全不相关：它只控制内存优化。

我建议使用[MONITOR](http://redis.io/commands/monitor)命令来检查哪些查询被发送到 Redis 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T20:48:31.993

hash-max-zipmap-value 使 redis 中的哈希键值对系统保持优化，因为在这些哈希中搜索键遵循摊销的 N，因此更长的键反过来会增加系统的延迟。

这些设置在 redis.conf 中可用。

如果输入的键多于指定的数量，则散列键值对将在内部转换为基本键值对结构，从而无法提供散列提供的内存优势。

# sql - 有没有办法将 sql server 恢复为默认设置？

> ID：13118273
> 
> 赞同：1
> 
> 时间：2012-10-29T08:42:48.667
> 
> 标签：sql, sql-server, sql-server-2005

基本上我想要所有的约束、规则、键、数据库，我想要的所有东西都删除了，就像我安装它那天一样。我不想重新安装它。简单地删除数据库可能无法解决我遇到的问题

# c - 文件已成功打开，但读取导致“错误文件描述符”错误，并且 stat 显示文件大小为零

> ID：13118274
> 
> 赞同：5
> 
> 时间：2012-10-29T08:42:57.563
> 
> 标签：c, linux

我正在做一个任务，我们应该对一个用糟糕的加密算法加密的 PDF 进行加密分析。

教授提供的代码使用`fd=open(filename, O_CREAT|O_WRONLY, S_IRUSR|S_IWUSR)`.

在我尝试解密的代码中，我使用`fd_in=open(file, O_RDONLY)`.

问题是当我尝试从文件中读取时，我收到“错误的文件描述符”错误。我使用 stat 尝试获取有关文件描述符对已打开文件的“想法”的更多信息，它表明该文件的长度为 0，而实际上它只有几百 KB。

我正在使用的调试代码是：

```
if (0 > (len = read(fd_in, (char*)&read_buff, BITE))) {    // BITE is defined as 8
  printf("Error occured grabbing first bite of %s.\n", file);
  printf("%s.\n", strerror(errno));

  struct stat fileStat;
  int stat = fstat(fd_in, &fileStat);

  printf("fstat returned: %d.\n", stat);      // Consistently printing 0
  printf("Information for %s\n",file);
  printf("---------------------------\n");
  printf("File Size: \t\t%d bytes\n",fileStat.st_size);
  printf("Number of Links: \t%d\n",fileStat.st_nlink);
  printf("File inode: \t\t%d\n",fileStat.st_ino);

  printf("File Permissions: \t");
  printf( (S_ISDIR(fileStat.st_mode)) ? "d" : "-");
  printf( (fileStat.st_mode & S_IRUSR) ? "r" : "-");
  printf( (fileStat.st_mode & S_IWUSR) ? "w" : "-");
  printf( (fileStat.st_mode & S_IXUSR) ? "x" : "-");
  printf( (fileStat.st_mode & S_IRGRP) ? "r" : "-");
  printf( (fileStat.st_mode & S_IWGRP) ? "w" : "-");
  printf( (fileStat.st_mode & S_IXGRP) ? "x" : "-");
  printf( (fileStat.st_mode & S_IROTH) ? "r" : "-");
  printf( (fileStat.st_mode & S_IWOTH) ? "w" : "-");
  printf( (fileStat.st_mode & S_IXOTH) ? "x" : "-");
  printf("\n\n");

  return 1; 
```

}

我得到的结果是：

```
Error occured grabbing first bite of enc.pdf.
Bad file descriptor.
Information for enc.pdf
---------------------------
File Size:      0 bytes
Number of Links:    1
File inode:         16441996
File Permissions:   -rw------- 
```

ls 将文件报告为

```
-rw-------  1 matt  matt   157887 Oct 29 03:01 enc.pdf 
```

* * *

与打开文件相关的代码：

```
int fd_in=open(file, O_RDONLY);
if(fd_in<0) {
   printf("Failed to open the input file %s.\n", file);
   return 1;
} else {
    printf("File open, descriptor is: %d.\n", fd_in);
} 
```

这一直打印出字段描述符的值 3。

有一些关于 read_buff 的问题。加密/解密过程涉及对读取的值进行异或。因此，缓冲区被声明为 a`unsigned long long`并且为了读入它，我获取地址并将其转换为 (char*)。这种策略直接来自于教授创建加密文件的代码。

我什至添加了一个带有 printf 的 else 来验证文件描述符是否有效。目前它似乎始终如一`3`，这绝对不是`-1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:16:01.627

您可能想检查调用`open()`和之间的堆栈是否损坏`read()`，以便更改文件描述符的值`fd_in`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:15:09.247

您忽略了检查各种运算符的结果。`fd_in == -1`在上面列出的代码中，我非常确定。

要使用低级 I/O 打开数据文件，您需要执行以下操作：

```
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>
#include <fcntl.h>
#include <errno.h>

...

    int  fd;

    do {
        fd = open(filename, O_RDONLY | O_NOCTTY);
    } while (fd == -1 && errno == EINTR);
    if (fd == -1) {
        const char *const errmsg = strerror(errno);
        fprintf(stderr, "%s: %s.\n", filename, errmsg);
        exit(1);
    } 
```

这是因为[`open()`](http://www.kernel.org/doc/man-pages/online/pages/man2/open.2.html)总是可以被打断。

[`read()`](http://www.kernel.org/doc/man-pages/online/pages/man2/read.2.html)也可以被打断，但通常它只返回一个简短的计数。

不，您不能只说“*但它通常会读取我所要求的所有内容，如果发生这种情况我会在稍后修复*”，因为它实际上取决于系统详细信息 - 特别是文件恰好驻留在哪个文件系统上. 在不同的系统上运行会产生不同的结果——更不用说它不是文件而是命名管道或字符设备。只有白痴会假设`read()`总是（甚至通常）会阅读您要求的所有内容。

稳健的方法是使用辅助函数，可能类似于

```
#include <unistd.h>
#include <sys/types.h>
#include <sched.h>
#include <errno.h>

/* Read between minimum and maximum bytes (inclusive)
 * from descriptor to buffer. Save the number of bytes
 * read into *bytes if bytes is not NULL.
 * The function returns 0 if successful, errno error otherwise.
 * If there is less input than minimum bytes, the function
 * will return ENOENT.
*/
static inline int readfd(const int descriptor,
                         void *const buffer,
                         const size_t minimum,
                         const size_t maximum,
                         size_t *const bytes)
{
    size_t   have = 0;
    ssize_t  n;

    while (have < minimum) {

        n = read(descriptor, (char *)buffer + have, maximum - have);
        if (n > (ssize_t)0) {
            have += n;
            if (bytes)
                *bytes = have;

        } else
        if (n == (ssize_t)0) {
            /* EOF, and have < minimum. */
            return errno = ENOENT;

        } else
        if (n != (ssize_t)-1) {
            /* A rare I/O error (Linux kernel bug). */
            return errno = EIO;

        } else
        if (errno == EWOULDBLOCK || errno == EAGAIN) {
            /* Nonblocking descriptor; ouch. Busy-loop. */
            sched_yield();

        } else
        if (errno != EINTR)
            return errno;
    }

    return 0;
} 
```

该函数将使用指定的文件读取指定的字节`minimum`和`maximum`字节之间的内容。如果成功，它将返回 0，否则返回非零。如果没有足够的数据来满足最小值，它将返回。`buffer``descriptor``errno``ENOENT`

它甚至可以在非阻塞描述符上工作，通过对非阻塞描述符进行忙循环（每次重试和失败时只产生当前时间片）。这意味着不建议将其与非阻塞描述符一起使用，但如果出于某种奇怪的原因需要，您*可以*. 你只是不应该需要。（事实上​​，我个人放弃了那个位—— `EAGAIN`/`EWOULDBLOCK`检查和`sched_yield()`——所以如果描述符是或必须是非阻塞的，我会注意到并修复我的代码以使用正确的方法。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T11:40:54.250

对不起，这应该是一个评论。无法从这里发表评论。什么是 read_buff？为什么要转换为 char* ？

*如果*read_buff 定义为`char *read_buff;`then`(fd, &read_buff, LEN);`可以执行缓冲区溢出，覆盖您的自动变量。

# android - 为什么不能使用同一个 Span 对象 setSpan 以上两次？

> ID：13118278
> 
> 赞同：4
> 
> 时间：2012-10-29T08:43:13.730
> 
> 标签：android

为什么不能使用同一个 Span 对象 setSpan 以上两次？

SpannableString ss = new SpannableString("aaaaa[1]bbbb[1]cccc[1]");

我需要用图像替换所有 [1]。如果我使用以下代码，则只有最后一个被图像替换：

```
etShow = (EditText) findViewById(R.id.show);
SpannableString ss = new SpannableString("aaaaa[1]bbbb[1]cccc[1]");
int[] starts = new int[3];
int[] ends = new int[3];
int h = 0;
int k = 0;
for (int i = 0; i < ss.length(); i++) {
    if (ss.charAt(i) == '[') {
    starts[h] = i;
    h++;
    } else if (ss.charAt(i) == ']') {
    ends[k] = i;
    k++;
    }
    }

Drawable d = getResources().getDrawable(R.drawable.ic_launcher);
        d.setBounds(0, 0, 50, 50);
        ImageSpan im = new ImageSpan(d);

for(int i=0;i<3;i++){
        ss.setSpan(im, starts[i], ends[i]+1, Spannable.SPAN_INCLUSIVE_EXCLUSIVE);   
        }
etShow.getText().insert(0, ss); 
```

如果改成下面的代码，所有的[1]都被图片替换了。

```
Drawable d = getResources().getDrawable(R.drawable.ic_launcher);
        d.setBounds(0, 0, 50, 50);
        ImageSpan im = new ImageSpan(d);
        ImageSpan im1 = new ImageSpan(d);
        ImageSpan im2 = new ImageSpan(d);
        //for(int i=0;i<3;i++){
//      ss.setSpan(im, starts[i], ends[i]+1, Spannable.SPAN_INCLUSIVE_EXCLUSIVE);
        ss.setSpan(im, starts[0], ends[0]+1, Spannable.SPAN_INCLUSIVE_EXCLUSIVE);
        ss.setSpan(im1, starts[1], ends[1]+1, Spannable.SPAN_INCLUSIVE_EXCLUSIVE);
        ss.setSpan(im2, starts[2], ends[2]+1, Spannable.SPAN_INCLUSIVE_EXCLUSIVE);
    //  } 
```

这怎么解释？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-29T09:49:11.863

我怀疑 span 对象`HashMap`在`Spanned`表示中最终成为 a 的键。因此，重用同一个 span 对象具有用新用途替换其先前用途的效果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-23T04:33:49.850

这几天看了[Spannable](https://developer.android.com/reference/android/text/Spannable.html)的源代码，在 Google 上找到了这个问题，所以想贴一些源代码来回答这个问题。

The SpannableString implement by [SpannableStringInternal](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/text/SpannableStringInternal.java) and setSpan method is as follows.

```
/* package */ void setSpan(Object what, int start, int end, int flags) {
    ...
    int count = mSpanCount;
    Object[] spans = mSpans;
    int[] data = mSpanData;
    for (int i = 0; i < count; i++) {
        if (spans[i] == what) {
            int ostart = data[i * COLUMNS + START];
            int oend = data[i * COLUMNS + END];
            data[i * COLUMNS + START] = start;
            data[i * COLUMNS + END] = end;
            data[i * COLUMNS + FLAGS] = flags;
            sendSpanChanged(what, ostart, oend, nstart, nend);
            return;
        }
    }
    ...
} 
```

When you pass same span by setSpan method, it will check if spans array have same one and replace old start and end value by news.

# xslt - 在使用 XSL-FO 生成的 PDF 中插入换行符

> ID：13118280
> 
> 赞同：2
> 
> 时间：2012-10-29T08:43:24.753
> 
> 标签：xslt, xsl-fo

我正在使用 XSL-FO 和 XML 生成 PDF。在文本框中，用户可以输入“1”之类的数据，然后按 ENTER，然后按“2”、“ENTER”、“3”等。但在 PDF 中，输出为“1234567”。如何保留换行符？我已经尝试过*white-space-collapse*、*linefeed-treatment*和*white-space-treatment*，但这并没有帮助。不过，换行（输入）以 XML 形式出现。

```
<xsl:template match="AddCmt">
<fo:block keep-together="always"> Additional Comments 
    <fo:block-container border-style="solid" height="20mm" width="170mm" space-after="5mm"> 
        <fo:block wrap-option="wrap" linefeed-treatment="preserve" white-space-collapse="false" white-space-treatment="preserve"> 
            <xsl:attribute name="id"> 
                <xsl:value-of select="../CMT_ID"/> 
            </xsl:attribute> 
            <xsl:value-of select="../ANS_CMT"/> 
        </fo:block> 
    </fo:block-container> 
</fo:block> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-28T09:08:12.293

它应该与以下 xml 一起使用（您应该添加所有属性）：

```
<xsl:template match="AddCmt">
    <fo:block keep-together="always"> Additional Comments 
        <fo:block-container border-style="solid" height="20mm" width="170mm" space-after="5mm"> 
            <fo:block wrap-option="wrap" linefeed-treatment="preserve" white-space-collapse="false" white-space-treatment="preserve"> 
                <xsl:attribute name="id"> 
                    <xsl:value-of select="../CMT_ID"/> 
                </xsl:attribute> 
                <xsl:value-of select="../ANS_CMT"/> 
            </fo:block> 
        </fo:block-container> 
    </fo:block> 
</xsl:template> 
```

如果您的 XML 已经没有换行符，那么您的 PDF 就不可能。

# c# - WCF动态端点和配置依赖？

> ID：13118283
> 
> 赞同：2
> 
> 时间：2012-10-29T08:43:43.620
> 
> 标签：c#, .net, wcf, .net-4.0, iis-7.5

我有这个拓扑：（注意WAS）

*每个 Service1 ， service2 ...service-n 在 iis 中位于单独的 appdomain 中。* ![在此处输入图像描述](../Images/fbc4c6fd2cfc5a5dfe0717c6c682f82c.png)

`Service1`需要消费。`Service2`但是他可以`service2's`通过 `nettcp`或端点访问`http`端点。

决定在哪里？（nettcp OT HTTP）

在单独的配置文件中。（在`c:\cfg`文件夹中，当然 service1 会读取 cfg 以确定他应该访问哪个绑定`service2`。）

*`Service2`也应该能够看到文件，因为他也使用其他服务。但是让我们谈谈（现在）`service1` 作为 call `service2`。*

cfg 文件中的典型条目是：

```
key : current_service2_Active_endpoint
val : nettcp 
```

所以这是我的问题：

*   我需要找到一个解决方案，将 CFG 读入缓存或其他东西，以便`service1`从缓存中读取 cfg 条目，而不是通过文件系统。但 Service2 也应该读取它，但缓存不会相同（不同的 appdomain）。我该怎么做？我应该在哪里编写代码（上传到缓存）？我只有这 2 个文件：（*也许*当服务*启动时*- 但它的代码是什么？）

![在此处输入图像描述](../Images/13542dcf47c314b80c81eaa2a70adfd9.png)

*   我希望 CFG 文件中的每次**更改**都将条目重新加载到缓存中。这似乎是一项经典`cache`任务。对文件的缓存依赖似乎是解决方案，但是`[n]`由于 `[n]`appDomains....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:03:01.863

编写一个新的服务，可能称为“CacheService”，它保存缓存怎么样？这应该是一个单实例服务，它只有一个**内部和静态**的并发字典，其中包含来自缓存的键/值对。

它还应该包含一个“FileSystemWatcher”，以便在 CFG 文件更改时收到通知，然后它可以更新其内部映射。

你所有的服务都会调用这个服务，它应该有一个非常简单的接口（'GetConfigSetting(string key)'）。您可以在 IIS 中托管此服务，也可以在 Windows 服务中自行托管它（我会选择第二个选项，因为这样它始终处于运行状态）。

您可以将其视为某种基本的分布式缓存。无论如何，它不应该比这更复杂。协议应该是 net.tcp 或事件 net.pipes，因为您希望延迟尽可能低。

# symfony - 如何注入非默认实体管理器？

> ID：13118288
> 
> 赞同：14
> 
> 时间：2012-10-29T08:44:12.383
> 
> 标签：symfony, doctrine-orm, symfony-2.1

在 Symfony2 中，您可以使用多个实体管理器并使用类似于以下代码的内容：

```
$em = $this->get('doctrine')->getManager();
$em = $this->get('doctrine')->getManager('default');

$customerEm =  $this->get('doctrine')->getManager('customer'); 
```

我们可以使用以下方法将默认管理器注入任何服务：

```
"@doctrine.orm.entity_manager" 
```

如何将非默认实体管理器注入服务？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-29T12:47:04.997

如果您的实体经理配置名称是，`non_default`那么您可以将其引用为`@doctrine.orm.non_default_entity_manager`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-03-21T13:37:05.797

对于使用 Symfony 3+ 的用户，请使用控制台： `php bin/console debug:container`

然后你应该会看到很多以 'doctrine.orm.MY_CUSTOM_ENTITY_MANAGER_xxxxxxxxxx' 开头的行

因此，如果您想要与您的自定义实体管理器对应的实体管理器，请找到以下行：'doctrine.orm.MY_CUSTOM_ENTITY_MANAGER_entity_manager'

您可以将它插入到您的服务参数中。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-29T09:35:53.423

您应该将自定义实体管理器定义为服务：

```
services:  
    name_of_your_custom_manager:
        class: %doctrine.orm.entity_manager.class%
        factory_service:  doctrine
        factory_method:   getEntityManager
        arguments: ["name_of_your_custom_manager"] 
```

然后，您可以像使用每个服务一样注入它：

```
@name_of_your_custom_manager 
```

**编辑**：

请注意，工厂方法可能在 symfony 的版本之间有所不同（可能是`getEntityManager`或`getManager`）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T09:04:45.263

您好，首先创建您的经理，在我的示例中，我为 CoreBundle 中的 Item 类创建了经理：

```
<?php
// src/Sybio/Bundle/CoreBundle/Manager/ItemManager.php:

namespace Sybio\Bundle\CoreBundle\Manager;

use Sybio\Bundle\CoreBundle\Entity\Item;

class ItemManager
{
    /**
     * @var \Doctrine\ORM\EntityManager $em entity manager
     */
    protected $em;

    /**
     * @var \Doctrine\ORM\EntityRepository $em repository
     */
    protected $repository;

    /**
     * @var string $entityName
     */
    protected $entityName;

    /**
     * Constructor
     *
     * @param EntityManager $em
     * @param string $entityName
     * 
     * @return void
     */
    public function __construct(EntityManager $em, $entityName)
    {
        $this->em = $em;
        $this->repository = $em->getRepository($entityName);
        $this->entityName = $entityName;
    }

    /**
     * Save a entity object
     *
     * @param Object $entity
     * 
     * @return Object Entity
     */
    public function save($entity)
    {
        $this->persistAndFlush($entity);

        return $entity;
    }

    /**
     * Remove a entity object
     *
     * @param Object $entity
     * 
     * @return Object Entity
     */
    public function remove($entity)
    {
        return $this->removeAndFlush($entity);
    }

    /**
     * Persist object
     *
     * @param mixed $entity
     * 
     * @return void
     */
    protected function persistAndFlush($entity)
    {
        $this->em->persist($entity);
        $this->em->flush();
    }

    /**
     * Remove object
     *
     * @param mixed $entity entity to remove
     * 
     * @return void
     */
    protected function removeAndFlush($entity)
    {
        $this->em->remove($entity);
        $this->em->flush();
    }

    /**
     * Returns entity repository object
     * 
     * @return EntityRepository
     */
    public function getRepository()
    {
        return $this->repository;
    }

    /**
     * Create a new object
     * 
     * @return mixed
     */
    public function createNewObject()
    {
        return new Item();
    }

    // Create your own methods to manage the object

} 
```

如果管理器结构在多个管理器之间共享，您可以创建一个由所有其他管理器扩展的 BaseManager ！

然后在你的 bundle 的 services.yml（或 xml）文件中注册它：

```
# src/Sybio/Bundle/CoreBundle/Resources/config/services.yml or xml !:

parameters:

    # Managers _________________

    sybio.item_manager.entity: SybioCoreBundle:Item
    sybio.item_manager.class: Sybio\Bundle\CoreBundle\Manager\ItemManager

services:

    # Managers _________________

    sybio.item_manager:
        class:        %sybio.item_manager.class%
        arguments:    [@doctrine.orm.entity_manager, %sybio.item_manager.entity%] 
```

就是这样，你现在可以使用它了：

```
// Controller:

$im =  $this->get('sybio.item_manager');

$item = $im->createNewObject();
$im->save($item); 
```

然后你可以改进你的经理，这里我给我的经理一组配置参数：

```
# src/Sybio/Bundle/CoreBundle/Resources/config/services.yml or xml !:

sybio.item_manager:
        class:        %sybio.item_manager.class%
        arguments:    [@doctrine.orm.entity_manager, %sybio.item_manager.entity%, {'item_removed_state': %item_removed_state%, 'item_unpublished_state': %item_unpublished_state%, 'item_published_state': %item_published_state%}]

// src/Sybio/Bundle/CoreBundle/Manager/ItemManager.php:

public function __construct(EntityManager $em, $entityName, $params = array()) {
    // ...
    $this->params = $params;
} 
```

如果你创建一个 BaseManager，你还可以创建一个有用的泛型方法来初始化一个对象：

```
// src/Sybio/Bundle/CoreBundle/Manager/BaseManager.php:

/**
 * Create a new object
 * 
 * @return mixed
 */
public function createNewObject()
{
    $entityName = explode(":", $this->entityName);
    $entityName = "Sybio\Bundle\CoreBundle\Entity\\".$entityName[1];

    return new $entityName;
} 
```

# java - 使用java从图像中读取用于OCR的表单字段

> ID：13118294
> 
> 赞同：1
> 
> 时间：2012-10-29T08:44:30.867
> 
> 标签：java, image, ocr

我只是从图像中提取文本，但是当我尝试处理表单时，由于表单边界，程序无法用于字符提取。如何从包含边界的表单中提取字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T08:34:03.143

识别表格中的行，将它们的位置收集到一个数组中，然后使用 ImageIO.write 在不考虑数组中的值的情况下写入图像

# shortcuts - 如何在 KDevelop 中复制一行

> ID：13118295
> 
> 赞同：3
> 
> 时间：2012-10-29T08:44:33.543
> 
> 标签：shortcuts, kdevelop

如何在 KDevelop 中克隆一行？是否有任何快捷方式或菜单项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T07:48:13.140

要向上/向下复制行，请使用：

*   `Ctrl`+ `Alt`+`Up`
*   `Ctrl`+ `Alt`+`Down`

要向上/向下移动行，请使用：

*   `Ctrl`+ `Shift`+`Up`
*   `Ctrl`+ `Shift`+`Down`

请参阅*编辑器->工具->脚本*。

这一切都是在 Kate 中使用 JavaScript 实现的，并且可以轻松扩展。

要重新分配快捷方式，请参阅*Settings->Configure Shortcuts*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-03T00:56:29.590

还有`Copy/Cut the current line if no selection`在`Settings`-> `Editor`->中启用的选项`Editing`。

然后你可以`Ctrl+C`和`Ctrl+V`任何线路。

# iphone - 当有 & at 参数时，asp.net webservice 会被终止？

> ID：13118296
> 
> 赞同：0
> 
> 时间：2012-10-29T08:44:35.347
> 
> 标签：iphone, asp.net, json, web-services

我有一个 iPhone 应用程序，通过它我用 json 调用 asp.net webservice。它适用于所有数据。但是当我尝试 & 在任何数据中它会引发服务器错误，如下所示

```
 System.ArgumentException: Unterminated string passed in. (55): {&quot;UserId&quot;:&quot;somebody@somebody.com&quot;,&quot;FirstName&quot;:&quot;somebody
   at ProjectName.ProjectWebService.AuthenticationService.UserRegistration(String jsonText) in C:\Users\mkariya\documents\visual studio 2010\Projects\ProjectName\ProjectNames\MeaNexusWebService\AuthenticationService.asmx.cs:line 555 
```

我传递给这个网络服务的数据如下

> "UserId":"somebody@somebody.com","FirstName":"somebody&fname","City":"Ahmedab​​ad","LastName":"somebodylname","State":"Gujarat","Country":"India ","密码":"admin1!"}

其中**FirstName**具有价值**someone&fname**，因此在那个地方会出现问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T08:51:24.727

你需要逃脱＆符号。使用以下内容代替“&”字符：

```
\u0026 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T08:56:15.263

在服务器端传递变量和 HttpUtility.UrlDecode() 之前尝试使用 javascript 中的 escape() 函数

# spring - 测试中的 Bean 注入

> ID：13118297
> 
> 赞同：0
> 
> 时间：2012-10-29T08:44:45.130
> 
> 标签：spring, selenium, junit

我正在编写 Selenium WebDriver/Junit 测试。我在 Spring bean 中初始化驱动程序。我有一堂课：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration( "/testContext.xml") 

   public class VisibleTestSuite {

private WebDriver driver;

/**
 * @return the driver
 */
public WebDriver getDriver() {
    return driver;
}

/**
 * @param aDriver the driver to set
 */
@Resource(name="firefoxDriver")
public  void setDriver(WebDriver Driver) {
    driver = Driver;
} 
```

}

当我通过在 Netbeans 中选择 Build 来运行所有测试时，这实际上是有效的。但是，当我尝试通过 right/Test (Junit) 运行单个测试类时，我无法加载应用程序上下文非法状态错误。

```
 java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:284)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:88)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
Caused by: org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 11 in XML document from class path resource [testContext.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'root'.
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:243)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadBeanDefinitions(AbstractGenericContextLoader.java:217)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:102)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:57)
    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
Caused by: org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'root'.
    at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
    at org.apache.xerces.util.ErrorHandlerWrapper.error(Unknown Source)
    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
    at org.apache.xerces.impl.xs.XMLSchemaValidator.handleStartElement(Unknown Source)
    at org.apache.xerces.impl.xs.XMLSchemaValidator.startElement(Unknown Source)
    at org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)
    at org.apache.xerces.impl.XMLNSDocumentScannerImpl$NSContentDispatcher.scanRootElementHook(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
    at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
    at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388) 
```

我在 spring 上下文文件中没有根标记，它们仍在工作。为什么在构建时加载驱动程序？

我需要一起和单独运行测试。我认为 bean 与一个类同时加载。有人帮我完成这项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:43:46.647

您的架构声明版本可能与库版本不同。你能交叉检查你的版本号吗？

不过，当您从 netbeans 构建运行它时，我无法解释它是如何运行的。

# eclipse - 如何在eclipse的上下文菜单中禁用运行方式，调试为选项

> ID：13118300
> 
> 赞同：3
> 
> 时间：2012-10-29T08:45:07.153
> 
> 标签：eclipse, eclipse-plugin, eclipse-cdt

我正在开发 Eclipse 中的 C/C++ 插件。根据项目类型，我想从项目上下文菜单中禁用“运行方式”和“调试方式”选项。

有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:00:23.500

您可以检查一下您的插件中是否需要“ `org.eclipse.debug.ui`”和“ `org.eclipse.debug.core`”插件。

看到[这个线程](http://www.eclipsezone.com/eclipse/forums/t112286.html#92243897)：

我找到了原因：
Eclipse 3.4在产品编辑器中点击“”时添加了“ `org.eclipse.debug.ui`”和“ ”。 Eclipse 3.3 没有这样做，所以我确信插件依赖是新版本中的原因。这些插件以某种方式有助于屏幕截图中的 EMF 弹出菜单。 我删除了两者，我的产品继续正常运行`org.eclipse.debug.core``Add Reguired Plugins`

# qt - Qt：QTableView如何添加一行？

> ID：13118307
> 
> 赞同：7
> 
> 时间：2012-10-29T08:45:36.733
> 
> 标签：qt, qtableview

我有一个包含数据的 QTableView。添加行的最简单方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-29T09:09:40.803

当您使用 som YourModel 在 YourTableView (QTableView) 中显示它时，应该这样做：

```
YourModel->insertRow(YourModel->rowCount(QModelIndex()));
// paste some data to new row 
```

模型更新导致视图更新

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-29T08:52:27.203

QTableView 是基于模型的，如果您不知道模型是什么，那么我建议您阅读[此处](http://qt-project.org/doc/qt-5.0/qtwidgets/model-view-programming.html)。

使用 QTableWidget 对初学者来说更容易，您可以像这样添加一行

```
ui->tableWidget->insertRow(0); 
```

# html - .net Web 开发人员如何开发移动应用程序？

> ID：13118309
> 
> 赞同：0
> 
> 时间：2012-10-29T08:45:46.667
> 
> 标签：html, cordova, mobile

我现在是一名 .net 网络开发人员。但是，我想开发一些移动应用程序。

如果没有单声道，还有其他方法可以帮助我做到这一点吗？

html5+css3+jqmobile能用吗？我真的不知道网络应用程序如何在手机上充当客户端。

我得到了一些关于phonegap的信息。这可以使 Web 应用程序作为客户端工作（没有 Java）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:52:20.357

Phonegap 将打包您的 html5+css3+jqmobile 以在移动设备中作为**本机应用程序运行。**要回答您的问题，是的，这将在没有**java**但使用**javascript**的情况下工作。

# d3.js - 在 Crossfilter 中使用过滤器

> ID：13118312
> 
> 赞同：6
> 
> 时间：2012-10-29T08:46:06.390
> 
> 标签：d3.js, crossfilter

我刚刚开始使用 crossfilter 和 d3.js ...我正在尝试 API 参考中给出的一些片段...我有以下数据

```
var payments = crossfilter([
  {date: "2011-11-14T16:17:54Z", quantity: 2, total: 190, tip: 100, type: "tab"},
  {date: "2011-11-14T16:20:19Z", quantity: 2, total: 190, tip: 100, type: "tab"},
  {date: "2011-11-14T16:28:54Z", quantity: 1, total: 300, tip: 200, type: "visa"},
  {date: "2011-11-14T16:30:43Z", quantity: 2, total: 90, tip: 0, type: "tab"},
  {date: "2011-11-14T16:48:46Z", quantity: 2, total: 90, tip: 0, type: "tab"},
  {date: "2011-11-14T16:53:41Z", quantity: 2, total: 90, tip: 0, type: "tab"},
  {date: "2011-11-14T16:54:06Z", quantity: 1, total: 100, tip: 0, type: "cash"},
  {date: "2011-11-14T16:58:03Z", quantity: 2, total: 90, tip: 0, type: "tab"},
  {date: "2011-11-14T17:07:21Z", quantity: 2, total: 90, tip: 0, type: "tab"},
  {date: "2011-11-14T17:22:59Z", quantity: 2, total: 90, tip: 0, type: "tab"},
  {date: "2011-11-14T17:25:45Z", quantity: 2, total: 200, tip: 0, type: "cash"},
  {date: "2011-11-14T17:29:52Z", quantity: 1, total: 200, tip: 100, type: "visa"}
]); 
```

我可以通过类型创建维度

```
var paymentsByTotal = payments.dimension(function(d) { return d.type; }); 
```

我的问题是如何过滤字符串数组。我试过：

```
paymentsByTotal.filterRange(["cash","visa"]); 
```

但是我没有得到预期的结果！

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T09:46:12.950

Crossfilter.js 的 master 分支中的源代码，没有过滤器联合的规定，您必须从[Jason Davies 的联合分支](https://raw.github.com/jasondavies/crossfilter/5e2518fee8a2a48bc120f6d6ff5921659dbad975/crossfilter.js)获取代码。

然后，您应该能够做到`paymentsByTotal.filter("cash","visa");`并获得所需的输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-21T19:16:03.733

似乎 a`filterFunction(function)`自上次响应以来已添加，因此您现在可以使用以下方法执行此操作：

```
paymentsByTotal.filterFunction(function(d) { return d === "visa" || d === "cash" }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-17T11:06:35.167

如果您有一个值数组，并且您不想`d === "visa"`为每个项目指定显式逻辑（即），那么您可以扩展 sai 的`filterFunction`解决方案以检查该值是否包含在您的数组中。如果要过滤的项目数组很大或可能发生变化，这样做只会让事情变得更容易。

```
var items = ['Visa', 'Cash'];
paymentsByTotal.filterFunction(function(d) { return items.indexOf(d) > -1;}); 
```

# android - 点击号码拨打电话

> ID：13118314
> 
> 赞同：0
> 
> 时间：2012-10-29T08:46:17.017
> 
> 标签：android

我需要一点帮助。我在我的应用程序中有一个包含电话号码的 textView，我想在单击该电话号码时拨打电话。我已经做到了：

```
sitePhone.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub

        String number = "tel:" + sitePhone.getText().toString().trim();
        Intent callIntent = new Intent(Intent.ACTION_CALL, Uri.parse(number)); 
        startActivity(callIntent);
    }
}); 
```

现在的问题是，有时我的文本视图中有 2 或 3 个电话号码。类似这样的内容：“07456443345 FAR: 0745456334”。我从数据库中获取电话号码字符串，因此无法更改。关于如何在每个号码点击时拨打电话的任何想法？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:08:26.660

我找到了一个简单的答案： `android:autoLink="phone"` 将诀窍。

# ajax - 如何获取来自不同域的响应中的 cookie？

> ID：13118317
> 
> 赞同：0
> 
> 时间：2012-10-29T08:46:25.237
> 
> 标签：ajax, http, cookies

我正在向另一个域发送 AJAX 请求，它正在向我发送带有 cookie 的响应，但 document.cookie 是空的。我怎样才能让它可见？我需要什么权限？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:47:58.823

您正在尝试的事情无法完成。（这是浏览器安全问题）

只能通过让用户的浏览器向每个域提交请求来解决，然后每个域都会设置自己的 cookie。

# magento - Magento 产品详细信息页面上的自定义变量

> ID：13118321
> 
> 赞同：2
> 
> 时间：2012-10-29T08:46:49.673
> 
> 标签：magento, google-analytics, magento-1.4

**更新：** 希望这是对问题的更好解释：

我正在尝试使用`_setCustomVar`. 我在 Magento 1.4.0.1 上运行，我的 Analytics 异步代码由该`<head>`部分中的默认 GA 模块插入，它看起来像这样：

```
<script type="text/javascript">

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-xxxxxxxx-1']);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

</script> 
```

我尝试添加的自定义变量具有以下语法：

```
_gaq.push(['_setCustomVar',1,'View Product','<?php echo $_helper->productAttribute($_product, $_product->getSku(), 'sku') ?>',3]); 
```

根据分析文档，为了记录自定义变量，`_setCustomVar`必须在 之前调用`_trackPageView`，但默认 GoogleAnalytics 模块不支持此功能。这个问题有2个问题：

1.  如何`_setCustomVar`在默认跟踪代码之前添加我的函数？
2.  如何`_setCustomVar`仅在产品页面上添加我的功能？

* * *

**原帖：**

我正在尝试将访问者正在查看的产品的 SKU 存储在 Analytics 自定义变量中。其语法是`_gaq.push(['_setCustomVar',3,'View Product','SKU12345',2]);`.

显然，这段代码应该只添加到产品详细信息页面，而不是列表、购物车或结帐页面。所以我尝试通过添加以下代码来编辑`view.phtml`文件：`app/design/frontend/default/my_package/template/catalog/product`

```
<script>
_gaq.push(['_setCustomVar',
    1,
    'View Product',
    '<?php echo $_helper->productAttribute($_product, $_product->getSku(), 'sku') ?>', 
    3]);
</script> 
```

问题是我在基本跟踪代码之后添加了这个自定义变量，该代码默认添加在该`<head>`部分中，因此它不会记录在 Analytics 中。

我试图避免使用 中的 Analytics 模块更改核心文件`app/code/core/Mage/GoogleAnalytics/Block/Ga.php`，但我认为解决方案可能就在那里。如何添加设置自定义变量的代码，使其出现在基本跟踪代码 BEFORE 中`_gaq.push(['_trackPageview']);`？

这是 Analytics 提供的我的异步代码：

```
<script type="text/javascript">

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-xxxxxxxx-1']);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

</script> 
```

[从这里开始](http://www.lunametrics.com/blog/2012/08/28/20-ways-use-custom-variables/)的想法

注意：我正在使用 Magento 1.4.0.1 和 Analytics 异步语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:24:08.300

这目前正在我们的一个magento网站上工作，如果您使用的是Magento Admin Google API，那么您可以（1）创建一个自定义模块来扩展它或（2）确保（查看源代码时）`<script>_gaq.push(['_setCustomVar...`javascript低于var _gaq = _gaq || []; 代码块

```
<script type="text/javascript">
  //<![CDATA[
    var _gaq = _gaq || [];

    _gaq.push(['_setAccount', 'UA-xxxxxxx-3']);
    _gaq.push(['_trackPageview']);
    _gaq.push(['_setCustomVar', '1', 'awe2', '<?php echo $_helper->productAttribute($_product, $_product->getSku(), 'sku') ?>', '1']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

 //]]>
</script> 
```

**创建自定义模块**

在 app/code/local/MageIgniter/GoogleAnalytics/etc/config.xml

```
 <config>
    <modules>
        <MageIgniter_GoogleAnalytics>
            <version>0.1.0</version>
        </MageIgniter_GoogleAnalytics>
    </modules>
    <global>
        <blocks>
            <googleanalytics>
                <rewrite>
                    <ga>MageIgniter_GoogleAnalytics_Block_Ga</ga>
                </rewrite>
            </googleanalytics>
        </blocks>
    </global>
  </config> 
```

在 /app/code/local/MageIgniter/GoogleAnalytics/Block/Ga.php 中创建

```
 class MageIgniter_GoogleAnalytics_Block_Ga extends Mage_GoogleAnalytics_Block_Ga
    {

        private $remId = NULL;
        private $conversionId = NULL;
        private $conversionLabel = NULL;

        public function getPageName()
        {
            return $this->_getData('page_name');
        }

        protected function _getPageTrackingCode($accountId)
        {
            $pageName   = trim($this->getPageName());
            $optPageURL = '';
            if ($pageName && preg_match('/^\/.*/i', $pageName)) {
                $optPageURL = ", '{$this->jsQuoteEscape($pageName)}'";
            }
            return "
    _gaq.push(['_setAccount', '{$this->jsQuoteEscape($accountId)}']);
    _gaq.push(['_trackPageview'{$optPageURL}]);
    " . $this->getProductSku();
        }

      ......

        public function getProductSku(){
            if($product = Mage::registry('current_product')){
               return sprintf("_gaq.push(['_setCustomVar', '%s', '%s', '%s', '%s']);",
                    1,
                    'Sku',
                    $product->getSku(),
                    1
                ) . "\n";
            }

            return '';
        }

     ........
 } 
```

有关更多帮助，请参阅 /app/code/core/Mage/GoogleAnalytics/Block/Ga.php

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T20:31:00.220

我设法通过修改默认的 GoogleAnalytics 模块使其工作：

在`app/code/core/Mage/GoogleAnalytics/Block`复制`Ga.php`文件时，导航到`/www/app/code/local/Mage/GoogleAnalytics/Block`并粘贴它（如果它们不存在，则创建必要的文件夹）。

在 new`Ga.php`中，在`_toHtml()`测试是否从 Magento 后端激活 Analytics 后的函数中，测试当前页面是否为产品详细信息页面：

```
$_product = Mage::registry('current_product');  
if($_product) {
        //output code with _setCustom var
    } else {
        //output normal tracking code
    } 
```

带有自定义变量集的代码如下所示：

```
$this->addText('
<!-- BEGIN GOOGLE ANALYTICS CODE -->
<script type=\"text/javascript\">
var _gaq = _gaq || [];
_gaq.push([\'_setAccount\', \'UA-25272379-1\']);
_gaq.push([\'_setCustomVar\', 1, \'Product View\',\''.$_product->getSku().'\', 3]);
_gaq.push([\'_trackPageview\']);

(function() {
    var ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;
    ga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';
    var s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
<!-- END GOOGLE ANALYTICS CODE -->
'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T09:34:42.157

如果你使用谷歌分析的异步插入代码，无论你把这段代码放在哪里，它只会在页面加载完成时应用。`_gaq.push()`因此，只要它们在 HTML 代码中内联（不是异步的），您就可以在之前添加您的之后

异步代码如下所示：

```
(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
})(); 
```

# dynamics-ax-2009 - Dynamics AX 2009 - 区分发票和贷方通知单

> ID：13118322
> 
> 赞同：0
> 
> 时间：2012-10-29T08:46:53.733
> 
> 标签：dynamics-ax-2009

我想知道在使用 Dynamics AX 2009 时是否可以区分发票和贷方通知单？据我了解，除了信用票据包含负值之外，它们的打印方式相同吗？询问的原因是因为我希望使用 AIF 以 XML 格式将它们从系统中取出，但使用不同的 XSLT 文档对它们进行不同的转换

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:33:54.997

你说的对。如果`CustInvoiceJour.InvoiceAmount`（销售分类帐 > 查询 > 日记帐 > 发票 > 发票金额）大于或等于 0 则为发票，如果小于 0 则为贷方票据。

# jquery - jQuery Drop Captions 插件

> ID：13118324
> 
> 赞同：0
> 
> 时间：2012-10-29T08:47:07.543
> 
> 标签：jquery

我正在尝试在这个 jquery 插件[jQuery Drop Captions Plugin](http://www.catchmyfame.com/2009/10/23/jquery-drop-captions-plugin-released/)中实现 html 所以我可以自定义标题文本，默认情况下它只需要 title 属性，但我想从细节 div 中获取文本并将其插入标题中，它有机会吗？谢谢你！

```
<pre>
<img alt="image" title="In ac lectus sit amet lacus suscipit commodo non in nunc!      Phasellus vitae arcu dolor, non luctus felis. 
    Quisque ut mauris eget massa lobortis venenatis et at nibh." src="img1.jpg"    width="300" height="199" class="right blacksheep" />
    <div class="details">
        <div class="bigCaption bookreg">Margiela Lookbook<br>
                    S/S 2012</div>
        <div class="buttonCaption mediumreg">Publication digitale</div>
    </div>
</pre> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:54:57.223

是的，在 dropcaptions.js 中替换第 33 行：

```
var caption = jQuery(obj).attr('title'); 
```

和：

```
var caption = jQuery(obj).next().html(); 
```

这将从相邻的 div 中获取文本（如您发布的示例中所示）

# jquery - 使用 jQuery 添加子菜单背景

> ID：13118326
> 
> 赞同：0
> 
> 时间：2012-10-29T08:47:14.173
> 
> 标签：jquery

我刚开始编写我的 Wordpress 主题。所以我想在我的标题区域创建我的下拉菜单。这是我的 CSS 代码；

```
/*# Menus  #*/
.PozHeader .Menus ul{margin:0px;padding:0px;}
.PozHeader .Menus ul li a{ font-size:14px; color:#fff;display:block; }
.PozHeader .Menus ul ul { width: 220px; visibility: hidden; position: absolute; top: 100%; left: 0;padding-top:10px; }
.PozHeader .Menus ul ul li { font-weight: normal; background: #f6f6f6; color: #000; border-bottom: 1px solid #ccc; float: none; }
.PozHeader .Menus ul ul li a{ border-right: none; width: 100%; display: inline-block; } 
.PozHeader .Menus ul ul ul{ left: 100%; top: 0; }
.PozHeader .Menus ul li:hover > ul{ visibility: visible; }
.PozHeader .Menus ul li a:hover { font-size:14px; color:#fff; }
.PozHeader .Menus ul li {float:left;min-width:50px;text-align:center;position:relative;padding:5px 10px 5px 10px;margin:0px 5px 0px 0px;color:#fff; }
.PozHeader .Menus ul li:hover{color:#000;background:#437DBC;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;}
.PozHeader .Menus ul li.Home { background:#437DBC; -webkit-border-radius:6px; -moz-border-radius:6px; border-radius:6px;}
.PozHeader .Menus ul li.Pink { background:#EA3373; -webkit-border-radius:6px; -moz-border-radius:6px; border-radius:6px;}
.PozHeader .Menus ul li.Dark-Pink { background:#B8027B; -webkit-border-radius:6px; -moz-border-radius:6px; border-radius:6px;}
.PozHeader .Menus ul li.Green { background:#24AF95; -webkit-border-radius:6px; -moz-border-radius:6px; border-radius:6px;}
.PozHeader .Menus ul li.Light-Green { background:#4FB763; -webkit-border-radius:6px; -moz-border-radius:6px; border-radius:6px;}
.PozHeader .Menus ul li.Yellow { background:#FF8201; -webkit-border-radius:6px; -moz-border-radius:6px; border-radius:6px;}
.PozHeader .Menus ul li.Red { background:#DE3F44; -webkit-border-radius:6px; -moz-border-radius:6px; border-radius:6px;}
.PozHeader .Menus ul li.Purple { background:#8F74B9; -webkit-border-radius:6px; -moz-border-radius:6px; border-radius:6px;} 
```

这里也有 Jquery 代码行：

```
$(function(){

    $("ul..PozHeader .Menus li").hover(function(){

        $(this).addClass("hover");
        $('ul:first',this).css('visibility', 'visible');

    }, function(){

        $(this).removeClass("hover");
        $('ul:first',this).css('visibility', 'hidden');

    });

    $("ul.PozHeader .Menus li ul li:has(ul)").find("a:first").append(" &raquo; ");

}); 
```

HTML部分就像;

```
 <div class="Menus">
        <ul>
            <li class="Home"><a href="">ANA SAYFA</a> </li>
            <li class="Pink"><a href="">ELBİSE MODELLERİ</a>
                <ul>
                    <li><a href="">Sub Menu</a></li>
                    <li><a href="">Sub Menu</a></li>
                    <li><a href="">Sub Menu</a></li>
                    <li><a href="">Sub Menu</a></li>
                    <li><a href="">Sub Menu</a></li>
                    <li><a href="">Sub Menu</a></li>
                </ul>
            </li>
            <li class="Dark-Pink"><a href="">MAKYAJ</a>
                <ul>
                    <li><a href="">Sub Menu</a></li>
                    <li><a href="">Sub Menu</a></li>
                    <li><a href="">Sub Menu</a></li>
                    <li><a href="">Sub Menu</a></li>
                    <li><a href="">Sub Menu</a></li>
                    <li><a href="">Sub Menu</a></li>
                </ul>
            </li>
            <li class="Green"><a href="">MODA</a></li>
            <li class="Light-Green"><a href="">İÇ GİYİM</a></li>
            <li class="Yellow"><a href="">AYAKKABI</a></li>
            <li class="Red"><a href="">AKSESUARLAR</a></li>
            <li class="Purple"><a href="">TAKILAR</a></li>
        </ul>
        </div> 
```

关于我的子级菜单的问题。

如何将顶级菜单（第一个 li）的背景添加到子菜单容器（第二个 ul）中？**用jQuery。**

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:51:39.877

所有课程都是这样的：

```
.PozHeader .Menus ul li.purple,
.PozHeader .Menus ul li.purple ul li { 
    background-color: <your-color>
}

.PozHeader .Menus ul li.<class_name>,
.PozHeader .Menus ul li.<class_name> ul li { 
    background-color: <your-color>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:18:53.820

用这个：

```
$("ul.PozHeader .Menus li").hover(function(){ 
     var bg_color=$(this).css("background-color");
     $(this).find("ul").css("background-color",bg_color);
     /*your code*/
}); 
```

# php - 如何在菜单中制作下拉菜单？考拉框架

> ID：13118334
> 
> 赞同：-1
> 
> 时间：2012-10-29T08:47:48.947
> 
> 标签：php, javascript, html, css, koala-framework

我正在使用 Koala-Framework 开发一个网站，我需要在菜单旁边或恰好在菜单中添加一个自定义下拉菜单。

这可能吗？最好的方法是什么？

它应该在悬停在菜单项上时打开，并且菜单项不应该是可点击的......（但如果无法禁用它也没问题......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:24:34.013

有可能 :) （有人亲自告诉我^^）

有（至少）两种方法可以实现这种行为：

*   创建一个盒子并在 Root/Master.tpl 中设置位置
*   在您的菜单组件中实现它

How-Tos 有点复杂，很快就可以在[http://www.koala-framework.org/documentation](http://www.koala-framework.org/documentation)上找到...

# javascript - 从预先输入列表中选择特定项目

> ID：13118336
> 
> 赞同：0
> 
> 时间：2012-10-29T08:48:05.637
> 
> 标签：javascript, jquery, html, twitter-bootstrap

我正在使用 Twitter 引导程序。我有以下代码。当您单击输入前列表中的项目时，将打开一个弹出框。但我想要做的是，当您单击特定项目时，才会打开弹出窗口。

```
$('#nr1').typeahead({
    source: source,
    updater: function(item) {
        $('#nr1').popover({
            placement: 'bottom',
            content: function(e) {
                return $('.addnr').html();
            }
        }).popover('show');
        return item;
    }
}) 
```

我尝试了下面的代码，但它不起作用。

```
$('#nr1').typeahead({
    source: source,
    updater: function(item) {
        $('li').val('').on('click', function(item){
            $('#nr1').popover({
                placement: 'bottom',
                content: function(e) {
                    return $('.addnr').html();
                }
            }).popover('show');
        });
        return item;
    }
}) 
```

如您所见，li 有一个 data-value=''。

# windows-8 - 如何使用 C# 在 Windows 8 应用程序中打开 pdf 文件？

> ID：13118338
> 
> 赞同：1
> 
> 时间：2012-10-29T08:48:32.567
> 
> 标签：windows-8

如何在 windows 8 应用程序中阅读 pdf 文件。在我的 windows 8 应用程序中如何打开 pdf 文件。

在清单文件中，我编写了以下代码。

```
<Extensions>
        <Extension Category="windows.fileTypeAssociation">
          <FileTypeAssociation Name="pdf">
            <SupportedFileTypes>
              <FileType>.pdf</FileType>
            </SupportedFileTypes>
          </FileTypeAssociation>
        </Extension>
      </Extensions> 
```

和后面的代码。

```
string imageFile = @"Images\DX730_EN.pdf";

           var file = await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFileAsync(imageFile);

            if (file != null)
            {
                // Set the option to show the picker
                var options = new Windows.System.LauncherOptions();
                options.DisplayApplicationPicker = true;

                // Launch the retrieved file
                bool success = await Windows.System.Launcher.LaunchFileAsync(file, options);
                if (success)
                {
                    // File launched
                }
                else
                {
                    // File launch failed
                }
            }
            else
            {
                // Could not find file
            } 
```

我无法打开 pdf 文件。请告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:22:54.637

您可以使用 Windows.System.Launcher 类的 LaunchFileAsync 方法。

看看这个：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh701465.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh701465.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T08:57:45.703

Windows 8 自带 windows Reader 来阅读 pdf 文件。

此链接可能对您有所帮助

[http://www.howto-connect.com/how-to-view-pdf-file-in-windows-8-what-is-windows-reader/](http://www.howto-connect.com/how-to-view-pdf-file-in-windows-8-what-is-windows-reader/)

如果这没有帮助，这可能

[http://social.technet.microsoft.com/Forums/en-US/W8ITProPreRel/thread/b19fc6d8-531f-4cf2-8d6d-f1dc9e93a93d/](http://social.technet.microsoft.com/Forums/en-US/W8ITProPreRel/thread/b19fc6d8-531f-4cf2-8d6d-f1dc9e93a93d/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T10:56:51.887

解决方案是，您可以在 Windows.ApplicationModel.Package.Current.InstalledLocation 上打开 pdf 文件...

因此，将 pdf 放在本地文件夹中并从中打开。

```
 StorageFolder localFolder = Windows.Storage.ApplicationData.Current.LocalFolder;
     StorageFile file= await localFolder.GetFileAsync("myFile.pdf");
     if (file != null)
                {
                    // Set the option to show the picker
                    var options = new Windows.System.LauncherOptions();
                    options.DisplayApplicationPicker = true;

                    // Launch the retrieved file
                    bool success = await Windows.System.Launcher.LaunchFileAsync(file, options);
                } 
```

# c# - 我可以将扩展方法更改为属性吗？

> ID：13118339
> 
> 赞同：0
> 
> 时间：2012-10-29T08:48:38.297
> 
> 标签：c#

> **可能重复：**
> [C# 有扩展属性吗？](https://stackoverflow.com/questions/619033/does-c-sharp-have-extension-properties)

我有以下内容：

```
 public static class EnumExt
    {
        public static string D2(this Enum key)
        {
            return Convert.ToInt32(key).ToString("D2");
        }
    } 
```

我这样使用：

```
PageType.ContentBlock.D2() 
```

其中 PageType 是一个枚举。

有没有办法让 D2 成为一个属性而不是一个方法？我总是必须将 () 放在 D2 之后，这对我来说似乎没有多大意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:05:03.853

不，这就是为什么它被称为 Extension *Method*。如果不需要其他参数（如 中），它可能看起来可以转换为属性`var x = y.ExtensionMethod();`，但扩展方法可以采用其他参数。例子：

```
int y = x.Add(3);

public static int Add(this int source, int value)
{
    return source + value;
} 
```

此外，扩展方法只是“语法糖”。编译器将它们转换为普通的方法调用，源对象作为参数传递。

示例（扩展方法在一个类中`ExtensionMethods`）：

```
int y = x.Add(3); 
```

将转换为

```
int y = ExtensionMethods.Add(x, 3); 
```

由编译器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T08:51:20.813

好吧，你有一个参数：`this Enum key`

即使用法“看起来像”一个属性，也要提醒

```
PageType.ContentBlock.D2(); 
```

相当于

```
EnumExt.D2(PageType.ContentBlock); 
```

因此，当您需要参数时，请使用...方法！

[C# 有扩展属性吗？](https://stackoverflow.com/questions/619033/does-c-sharp-have-extension-properties)

# php - PHP：警告：array_map()：参数 #2 应该是一个数组

> ID：13118343
> 
> 赞同：0
> 
> 时间：2012-10-29T08:48:46.770
> 
> 标签：php, linux, ubuntu

我有一个在 ubuntu 中完美运行的脚本，最近我将完全相同的脚本复制到 centos6 服务器，但出现以下错误：

```
PHP Warning:  array_map(): Argument #2 should be an array in /copy_scripts/classes/Vserver.class.php on line 245 
```

编码

```
/**
 * Get an array of open files
 * @param array $aExt
 * @return array of arrays ['views','size','path']
 */
public function getOpenFiles($aExt=array()) {
        $aOpenFiles = self::GetList(self::$sLogOpenFiles);
        $aOpenFiles = array_map( create_function('$v', '
                        $v = trim($v);
                        $aFile = preg_split("#[\t\s]+#",$v);
                        $oFile = new VserverFile($aFile[2]);
                        $oFile->setViews($aFile[0]);
                        return $oFile;'),
                $aOpenFiles
        );
        //echo "<pre>";
        //print_r($aOpenFiles);
        return  $aOpenFiles;
} 
```

可能是php版本之间的区别吗？

分：

```
PHP 5.3.3 (cli) (built: Jul  3 2012 16:53:21) 
```

ubuntu

```
PHP 5.3.10-2 (cli) (built: Feb 20 2012 19:39:00)
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies 
```

到目前为止我已经尝试过：

*   更改 php.ini 中的设置重新启动 php。

完整代码：

```
<?php
/**
 * 
 * Global Video Server class
 * Singleton class
 * Has methods to manipulate files
 * @author kpoxas
 *
 */
class Vserver {
    static protected $oInstance=null;
    static protected $iTimeStart, $iTimeEnd;
    const FILE_NOEXIST  = -2;
    const FILE_ZEROSIZE = -4;
    const FILE_DIFF     = -8;   
    /*
     * Path /var/www/HDD_PATH/
     */
    static public $sHDDPath = null;
    /*
     * Path /var/www/SSD_PATH/
     */
    static public $sSSDPath = null;
    /*
     *  Folder same on every RAID.../FOLDER/...
     */
    static public $sHTTPFolder = null;
    /*
     * Open Files Log
     */
    static public $sLogOpenFiles = null;
    /*
     * Limit of Free space on SSD in percents
     */
    static public $iSSDUsage = 90;
    /*
     * Limit of Free space on SSD in percents (not delete below)
     */ 
    static public $iSSDDeleteUsage = 80;
    /*
     * Limit of Free space on SSD in bytes (not delete below)
     */ 
    static public $iSSDDeleteUsageAbsolute = 5368709120;
    /*
     * Min views count of file to copy
     */
    static public $iMinViews = 2;   
    /*
     * Search within files older than $iDaysToDelete days 
     */
    static public $iDaysToDelete = 1;
    /*
     * Test Mode
     * File manipulations aren't executed
     * Only log mode
     */
    static public $bTest = false;
    /*
     * Store openfiles.txt log  
     */
    static protected $sOpenFiles = null;
    /**
     * Äåñêðèïòîð áëîêèðóþùåãî ôàéëà
     *
     * @var string
     */
    protected $oLockFile=null;      
    /**
     * Singleton Object implementation
     *
     * @return VSERVER
     */
    static public function getInstance() {
        if (isset(self::$oInstance) and (self::$oInstance instanceof self)) {
            return self::$oInstance;
        } else {
            self::$oInstance= new self();
            return self::$oInstance;
        }
    }
    /**
     * Get Log content
     * @param string $sLogPath
     * @return string 
     */
    static public function GetLog($sLogPath) {
        if ($s = @file_get_contents($sLogPath)) {
            $s = trim($s);
            if (!empty($s)) {
                return $s;
            }
        }
        return false;
    }
    /**
     * Get Log content in list mode divided by EOL
     * @param string $sLogPath
     * @return array
     */
    static public function GetList($sLogPath) {
        if ($sList = self::GetLog($sLogPath)) {         
            return explode(PHP_EOL,trim($sList));
        }
    }
    /**
     * Check if directory exists and chmod 775
     * @param $directory
     */
    static public function CheckDirectory($directory) {         
        $directory = rtrim($directory, '/\\');
        if (is_dir($directory)) @chmod($directory, 0775);
        else {
            if (!mkdir($directory, 0755, true)) {
                //self::AddError ('Directory does not exist', $directory);
                return false;
            }
        }       
    }
    /**
     * Check if file exist
     * Check if file has zero size      
     * @param string $filename
     */
    static public function CheckFile($filename) {       
        if (file_exists($filename) && !is_file($filename)) {
            self::log("NO VALID FILEPATH: {$filename}");
            return false;
        } else if(!file_exists($filename)) {
            self::log("FILE DOESN'T EXIST: {$filename}");
            return self::FILE_NOEXIST;          
        } else if(!filesize($filename)) {
            self::log("FILE ZEROSIZE: {$filename}");
            return self::FILE_ZEROSIZE;
        } 
        else return true;
    }
    /**
     * Check if file1 is identical to file2
     * @param string $filename1
     * @param string $filename2
     */
    static public function CheckIdentity($filename1, $filename2) {      
        if (self::CheckFile($filename1)>0 && self::CheckFile($filename2)>0) {
            if (filesize($filename1)===filesize($filename2)) {
                self::log("FILES: {$filename1} AND {$filename2} ARE IDENTICAL");
                return true;
            }
            self::log("FILES: {$filename1} AND {$filename2} ARE DIFFERENT");
            return false;
        }       
    }
    /**
     * Copy file from $source to $dest
     * Make www-data owner
     * Make perms 755
     */
    static public function Copy($source, $dest = null) {
        self::log("COPY {$source} TO {$dest}"); 

        if (self::$bTest) return true;

        self::CheckDirectory(dirname($dest));
        // copy
        $sCmd = "cp -f '{$source}' '{$dest}'";
        self::exec($sCmd);
        // chown        
        $sCmdChown = "chown www-data:www-data '{$dest}'";
        self::exec($sCmdChown);
        // chmod
        $sCmdChmod = "chmod 775 '{$dest}'";
        self::exec($sCmdChmod);
        return true;
    }
    /**
     * Delete file  
     */
    static public function Delete($source) {
        self::log("DELETE {$source}");  
        if (self::$bTest) return true;
        // chmod
        $sCmdChmod = "rm '{$source}'";
        self::exec($sCmdChmod);
    }
    /** 
     * Get free space of catalog or storage in bytes
     * @param string $sDir
     */
    static public function GetFreeSpace($sDir = '') {
        return disk_free_space($sDir);
    }
    /** 
     * Get total space of catalog or storage in bytes
     * @param string $sDir
     */
    static public function GetTotalSpace($sDir = '') {
        return disk_total_space($sDir);
    }
    /** 
     * Get used space of catalog or storage in percents
     * @param string $sDir
     */
    static public function GetUsage($sDir = '') {
        //$sCmd = "df -k {$sDir} | grep -Eo '[0-9]+%'";
        //return intval(self::exec($sCmd));
        return round(1-self::GetFreeSpace($sDir)/self::GetTotalSpace($sDir),4)*100;
    }
    /**
     * Exec command wrapper 
     */
    static public function exec($sCmd = null, &$aVar=null) {
        if (empty($sCmd)) {
            return;
        }       
        self::log($sCmd);
        return exec($sCmd, $aVar);
    }

    static public function log($sStr) {
        echo "{$sStr}<br>\n";   
    }
    /**
     * Get open files log    
     * @return string
     */
    static public function getOpenFilesContent() {      
        if (self::$sOpenFiles === null) {
            self::$sOpenFiles = self::GetLog(self::$sLogOpenFiles);
        }
        return self::$sOpenFiles;
    }
    /**
     * Get an array of open files
     * @param array $aExt
     * @return array of arrays ['views','size','path']
     */
    public function getOpenFiles($aExt=array()) {       
        $aOpenFiles = self::GetList(self::$sLogOpenFiles);
        $aOpenFiles = array_map( create_function('$v', ' 
                $v = trim($v);
                $aFile = preg_split("#[\t\s]+#",$v);
                $oFile = new VserverFile($aFile[2]);
                $oFile->setViews($aFile[0]);                
                return $oFile;'),
            $aOpenFiles
        );
        //echo "<pre>";
        //print_r($aOpenFiles);
        return  $aOpenFiles;
    }

    public function getFileList($sDir=null, $aExt=array('flv','mp4'), $sGrep='') {
        if (!$sDir || empty($aExt)) return;
        $aCmdExt = "\( -name '*."
            .implode("' -o -name '*.",$aExt)
            ."' \)";
        $sCmd = "find {$sDir} {$aCmdExt} -mmin +".self::$iDaysToDelete."";
        // sort by date
        //$sCmd = "find {$sDir} {$aCmdExt} -printf '%T@ %p\n'| sort -k 1n | cut -d' ' -f2-";
        if (!empty($sGrep)) {
            $sCmd.= " | {$sGrep}";
        }
        self::exec($sCmd,$aFiles);  
        return $aFiles;             
    }
    /**
     * 
     * Get list of storages
     */
    public function getStorages() {     
        $sCmd = "df -k | grep -Eo 'storage[0-9]+$'";        
        self::exec($sCmd,$aStorages);       
        return $aStorages;              
    }
    /**
     * 
     * Get list of megastorages
     */
    public function getMegaStorages() {     
        $sCmd = "df -k | sort -k5 -r | grep -Eo 'megastorage[0-9]+$'";      
        self::exec($sCmd,$aStorages);       
        return $aStorages;              
    }
    /**
     * Copy opened files to SSD 
     */
    public function copyToSSD() {       
        $this->setLock(__FUNCTION__.'.lock');           
        if($this->isLock()) {
            self::log("Process has already started.");
            return;
        } 

        $iCopied    = 0;
        $iIgnored   = 0;
        $aOpenedFiles = $this->GetOpenFiles();
        foreach ($aOpenedFiles as $oFile) {
            if (self::GetUsage(self::$sSSDPath) < self::$iSSDUsage) {
                if ($oFile->getViews() >=self::$iMinViews && $oFile->synchronize()) $iCopied++;
                else $iIgnored++;
            } else {
                break;
            }
        }
        self::log("COPIED: {$iCopied}");
        self::log("IGNORED: {$iIgnored}");
        self::log("SSD USAGE: ".self::GetUsage(self::$sSSDPath)."%");
    }
    /**
     * DELETE FROM SSD  
     */
    public function deleteFromSSD() {

        $this->setLock(__FUNCTION__.'.lock');           
        if($this->isLock()) {
            self::log("Process has already started.");
            return;
        } 

        $iDeleted   = 0;
        $iIgnored   = 0;
        /*
         * Get megastorages sorted by usage desc, 
         */
        $aMegaStorages = $this->getMegaStorages();              
        foreach ($aMegaStorages as &$sMegaStorage) {
            /*
             * Get files in current megastorage 
             */
            $aFileList  = $this->getFileList('/'.$sMegaStorage);            
            if (empty($aFileList)) {
                self::log("NO FILES FOUND in {$sMegaStorage}");
                continue;
            }
            $aFileList = array_map(
                create_function('$v', '             
                    $oFile = new VserverFile(trim($v));                             
                    return $oFile;          
                '),
                $aFileList
            );  
            /*
             * Delete files until appropriate usage
             */ 
            $iFreeSpace     = self::GetFreeSpace('/'.$sMegaStorage);
            $iTotalSpace    = self::GetTotalSpace('/'.$sMegaStorage);           
            foreach ($aFileList as &$oFile) {
                $iUsageCurrent = round(1-$iFreeSpace/$iTotalSpace,4)*100;
                self::Log($sMegaStorage." ".$iUsageCurrent."%");                    
                if ($iUsageCurrent > self::$iSSDDeleteUsage) {  
                    if (!$oFile->isOpened()) {
                        $iFreeSpace += $oFile->getSize();
                        $oFile->synchronize();
                        $oFile->deleteFromSSD();
                        $iDeleted++;    
                    } else $iIgnored++;
                } else {
                    break;
                }
            }
        }
        /*
        $aFileList  = $this->getFileList(self::$sSSDPath);
        if (empty($aFileList)) {
            self::log("NO FILES FOUND");
            return;
        }
        $aFileList = array_map(
            create_function('$v', '             
                $oFile = new VserverFile(trim($v));                             
                return $oFile;          
            '),
            $aFileList
        );          

        foreach ($aFileList as $oFile) {
            if (self::GetUsage(self::$sSSDPath) > self::$iSSDDeleteUsage) { 
                if (!$oFile->isOpened()) {
                    $oFile->synchronize();
                    $oFile->deleteFromSSD();
                    $iDeleted++;
                } else $iIgnored++;
            } else {
                break;
            }
        }
        */
        self::log("DELETED: {$iDeleted}");
        self::log("IGNORED: {$iIgnored}");
        self::log("SSD USAGE: ".self::GetUsage(self::$sSSDPath)."%");
    }
    /**
     * DELETE FROM SSD
     * USING ABSOLUTE VALUE of $iSSDDeleteUsageAbsolute
     */
    public function deleteFromSSDAbsolute() {

        $this->setLock(__FUNCTION__.'.lock');           
        if($this->isLock()) {
            self::log("Process has already started.");
            return;
        } 

        $iDeleted   = 0;
        $iIgnored   = 0;
        /*
         * Get megastorages sorted by usage desc, 
         */
        $aMegaStorages = $this->getMegaStorages();              
        foreach ($aMegaStorages as &$sMegaStorage) {
            /*
             * Get files in current megastorage 
             */
            $aFileList  = $this->getFileList('/'.$sMegaStorage);            
            if (empty($aFileList)) {
                self::log("NO FILES FOUND in {$sMegaStorage}");
                continue;
            }
            $aFileList = array_map(
                create_function('$v', '             
                    $oFile = new VserverFile(trim($v));                             
                    return $oFile;          
                '),
                $aFileList
            );  
            /*
             * Delete files until appropriate usage
             */ 
            $iFreeSpace     = self::GetFreeSpace('/'.$sMegaStorage);            
            foreach ($aFileList as &$oFile) {               
                self::Log($sMegaStorage." ".(round($iFreeSpace/1024/1024/1024,2))." G");                    
                if ($iFreeSpace < self::$iSSDDeleteUsageAbsolute) { 
                    if (!$oFile->isOpened()) {
                        $iFreeSpace += $oFile->getSize();
                        $oFile->synchronize();
                        $oFile->deleteFromSSD();
                        $iDeleted++;    
                    } else $iIgnored++;
                } else {
                    break;
                }
            }
        }

        self::log("DELETED: {$iDeleted}");
        self::log("IGNORED: {$iIgnored}");
        self::log("FREE SPACE: ".(round($iFreeSpace/1024/1024/1024,2))." G");       
    }
    /**
     * 
     * Get Identical files on storages 
     */
    public function getIdentical() {
        $this->setLock(__FUNCTION__.'.lock');           
        if($this->isLock()) {
            self::log("Process has already started.");
            return;
        } 

        $aStorages = $this->getStorages();
        foreach ($aStorages as &$sStorage) {
            $sDir = "/{$sStorage}/".self::$sHTTPFolder;
            $aList[$sStorage] = $this->getFileList($sDir,array('flv'), "grep -Eo '".self::$sHTTPFolder.".*$'");
        }
        $iStorages = sizeof($aList);
        for ($i=0; $i<$iStorages; $i++) {
            reset($aList);
            $sPrimaryStorage = key($aList);
            $aPrimaryFiles = array_shift($aList);
            foreach($aList as $sSecondaryStorage=>&$aSecondaryFiles) {  
                self::log("{$sPrimaryStorage} <-- {$sSecondaryStorage}");
                //array of identical files
                $aIdentical = array_intersect($aPrimaryFiles, $aSecondaryFiles);
                if (!empty($aIdentical)) {
                    // get sizes
                    foreach ($aIdentical as $sFile) {
                        $iPrimaryPath = "/{$sPrimaryStorage}/".$sFile;
                        $iPrimarySize = filesize($iPrimaryPath);
                        $iSecondaryPath = "/{$sSecondaryStorage}/".$sFile;
                        $iSecondarySize = filesize($iSecondaryPath);

                        self::log("| {$iPrimaryPath} <-- {$iPrimarySize}");
                        self::log("| {$iSecondaryPath} <-- {$iSecondarySize}");
                        // delete if sizes are identical
                        if ($iPrimarySize == $iSecondarySize) self::Delete($iSecondaryPath);
                        // if any have null size
                        else if ($iPrimarySize * $iSecondarySize) continue;
                        else if (filectime($iPrimarySize)>filectime($iSecondaryPath))   self::Delete($iSecondaryPath);
                        else if (filectime($iSecondaryPath)>filectime($iPrimarySize))   self::Delete($iPrimarySize);        
                    }                   
                }
            }
        }
        //echo "<pre>";
        //print_r(array_intersect($aPrimaryFiles, $aSecondaryFiles));
        //echo "</pre>";

    }   

    /**
     * Ñîçäàåò áëîêèðîâêó íà ïðîöåññ
     */
    public function setLock($sLockFile=null) {      
        if(!empty($sLockFile)) {
            $this->oLockFile=fopen($sLockFile,'a');
        }
    }
    /**
     * Ïðîâåðÿåò óíèêàëüíîñòü ñîçäàâàåìîãî ïðîöåññà
     */
    public function isLock() {      
        return ($this->oLockFile && !flock($this->oLockFile, LOCK_EX|LOCK_NB));
    }
    /**
     * Ñíèìàåò áëîêèðîâêó íà ïîâòîðíûé ïðîöåññ
     */
    public function unsetLock() {
        return ($this->oLockFile && @flock($this->oLockFile, LOCK_UN));
    }

    public function __construct() {
        self::$iTimeStart = microtime(true); 
    }

    public function __destruct() {
        self::$iTimeEnd = microtime(true);
        $iTimeExecution = round(self::$iTimeEnd - self::$iTimeStart,3);
        $iUsageMem = memory_get_usage(true)/1024/1024;      //Mb
        $iUsageMemPeak = memory_get_peak_usage(true)/1024/1024;     //Mb
        self::log("Execution time: {$iTimeExecution} s");
        self::log("Memory Usage: {$iUsageMem} Mb");
        self::log("Memory Peak Usage: {$iUsageMemPeak} Mb");
        $this->unsetLock();
    }

    /**
     * Class autoloader
     *
     * @param unknown_type $sClassName
     */
    public static function autoload($sClassName) {
        require_once("{$sClassName}.class.php");
    }
}
spl_autoload_register(array('Vserver','autoload'));
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T08:53:10.407

由于`array_map`抱怨`$aOpenFiles`不是一个数组，你可能想看看那个变量。

```
public function getOpenFiles($aExt=array()) {
  $aOpenFiles = self::GetList(self::$sLogOpenFiles);
  if ( !is_array($aOpenFiles) ) {
    var_dump($aOpenFiles);
    die('not an array');
  }
  $aOpenFiles = array_map( ... 
```

* * *

引用：

```
static public function GetList($sLogPath) {
  if ($sList = self::GetLog($sLogPath)) {         
    return explode(PHP_EOL,trim($sList));
  }
} 
```

...如果`$sList`计算结果为 false （这很可能发生，因为`GetLog`在某些情况下返回 false ）此函数返回*nothing*。
您必须在某处检查该情况。*哪里*取决于您希望脚本对什么条件做出反应。例如

```
static public function GetList($sLogPath) {
  if ($sList = self::GetLog($sLogPath)) {         
    return explode(PHP_EOL,trim($sList));
  }
  return array();
} 
```

会“修复”错误，但如果可行是另一个问题；它可能只会“隐藏”一个症状 - 而不是根本问题。必须有日志文件吗？必须`GetList(GetLog())`返回一个（非空）数组？等等等等....

# sql-server - 将具有可修改主键的数据库迁移到 MSSQL

> ID：13118350
> 
> 赞同：0
> 
> 时间：2012-10-29T08:49:28.507
> 
> 标签：sql-server, database, migration, firebird

我必须将 Firebird 数据库迁移到 MS SQL，并且原作者以具有可变主键的方式设计数据库。例如，我们有一个表

```
PRODUCTS with primary key (NAME,CATEGORY,SHORTNAME) and some data
PRICE_LISTING (NAME,CATEGORY,SHORTNAME) - foreign key to PRODUCT, and some data like price
PRODUCT_ALTERNATIVES (ORIGINAL_NAME,ORIGINAL_CATEGORY,ORIGINAL_SHORTNAME; REPLACEMENT_NAME,REPLACEMENT_CATEGORY,REPLACEMENT_SHORTNAME) - foreign keys to PRODUCTS 
```

如您所见，每当产品名称更改时，其他表中的大量数据都必须更改。原作者通过外键的级联更新解决了这个问题。由于某些原因，MS SQL 不允许我在外键上使用级联更新，因此无法轻松迁移数据库。

更糟糕的是，该软件有很多编辑屏幕，使用 DataSets、DataGridViews 和 Windows 窗体中的绑定，因此编辑器几乎可以自动运行。例如，editor for`PRODUCTS`是一个简单的 windows 窗体，每当用户重命名产品（更改其`NAME`）时，更改都会通过数据库（通过级联更新）传播到`PRICE_LISTING`表`PRODUCT_ALTERNATIVES`。而且，如果应用程序想要显示价格列表，它很简单`SELECT * FROM PRICE_LISTING`，包括产品名称和价格。

一种方法可能是向`ID`每个表添加代理键 - 标识列，然后将例如`PRICE_LISTING`表修改为 ( `PRODUCT_ID, price`) 等。但是，为了显示价格，我必须定义将

```
SELECT *,PRODUCT.NAME,PRODUCT.CATEGORY,PRODUCT.SHORTNAME FROM PRICE_LISTING join PRODUCT on ... 
```

然后，必须修改自动生成的 DataSets 等以从视图中选择，更新视图。

简而言之，从原作者的角度来看，我们正在破坏程序并使其变得更加复杂。以直接方式移植时唯一不起作用的是级联更新，但我发现数据库设计存在很大缺陷，如果不修复将是维护的噩梦。

该怎么办？

# sql - PostgreSQL 用 sum 分组

> ID：13118356
> 
> 赞同：2
> 
> 时间：2012-10-29T08:50:08.073
> 
> 标签：sql, database, postgresql

我有这个代码：

```
SELECT  m_warehouse_id, qtyonhand 
FROM    adempiere.rv_storage
WHERE   rv_storage.m_product_id=1000412
GROUP BY m_warehouse_id, qtyonhand
ORDER BY m_warehouse_id; 
```

结果如下表：

现在，我想分组，`m_warehouse_id`所以它只会返回 2 行 1000000 和 1000001。qtyonhand 将被汇总并作为总和返回。所以表应该是这样的：

```
m_warehouse_id    |    qtyonhand
------------------+---------------
10000000          |            0
10000001          |           10 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T08:51:10.610

您需要使用*聚合函数* `SUM()`并将它们分组`m_warehouse_id`

```
SELECT  m_warehouse_id, SUM(qtyonhand) totalQuantity
FROM adempiere.rv_storage
WHERE rv_storage.m_product_id=1000412
GROUP BY m_warehouse_id
ORDER BY m_warehouse_id; 
```

# android - 如何在从服务类更新的 Activity 的文本字段中显示值？

> ID：13118359
> 
> 赞同：3
> 
> 时间：2012-10-29T08:50:17.313
> 
> 标签：android, android-intent, android-service

这是我的服务类，它根据时间`i`增加值......`i`

```
 public class BackService extends Service {
    int i=0;
    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }
    @Override
    public void onCreate() {
        pollForUpdates();
        super.onCreate();
    }
    @Override
    public void onStart(Intent intent, int startId) {
        super.onStart(intent, startId);
    }
    private void pollForUpdates() {
        Timer timer=new Timer();
        timer.scheduleAtFixedRate(new TimerTask() {
            @Override
            public void run() {
                    Log.v("Service class called", "service class called "+i);
                    getRunningApps();
                    i++;
            }
        },0,1000);
    }
    private void getRunningApps()
    {

    }

    @Override
    public void onDestroy() {
        super.onDestroy();
    }
} 
```

我想将*i*值附加到`TextView`. 即`TextView`值是根据值动态变化的`i`......

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    startService(new Intent(this, BackService.class));
    TextView tx=(TextView)findViewById(R.id.textView1);

}} 
```

如何将`i`值附加到`tx`...

先感谢您..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T08:54:24.047

您需要注册广播接收器以将数据从服务发送回活动。请参阅这些有用的示例以了解活动与服务之间的通信：

[http://androidexpernz.wordpress.com/2012/02/14/communication-between-service-and-activity-part-1/](http://androidexperinz.wordpress.com/2012/02/14/communication-between-service-and-activity-part-1/)

[http://androidexpernz.wordpress.com/2012/02/21/communication-between-service-and-activity-part-2/](http://androidexperinz.wordpress.com/2012/02/21/communication-between-service-and-activity-part-2/)

[http://blog.philippheckel.com/2012/06/10/android-example-communication-between-activity-and-service-using-messaging/](http://blog.philippheckel.com/2012/06/10/android-example-communication-between-activity-and-service-using-messaging/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T09:11:34.483

用这个

```
public class MainActivity extends Activity {
     TextView tx;
     RefreshBroadcastReciver mBroadCastReciver;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    startService(new Intent(this, BackService.class));
    tx =(TextView)findViewById(R.id.textView1);

}
@Override
protected void onResume() {
    super.onResume();
    mBroadCastReciver = new RefreshBroadcastReciver();
    registerReceiver(mBroadCastReciver, new IntentFilter("sendData"));
}
private class RefreshBroadcastReciver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        tx.setText(intent.getIntExtra("i", 0)+"");

}
}
@Override
protected void onStop() {
    super.onStop();
    if(mBroadCastReciver!=null)
    unregisterReceiver(mBroadCastReciver);
}
} 
```

你的服务就在这里

```
public class BackService extends Service {
int i=0;
Intent intent1;
@Override
public IBinder onBind(Intent arg0) {
    return null;
}
@Override
public void onCreate() {
    pollForUpdates();
    super.onCreate();
}
@Override
public void onStart(Intent intent, int startId) {
    super.onStart(intent, startId);
     intent1=new Intent("sendData");
}
private void pollForUpdates() {
    Timer timer=new Timer();
    timer.scheduleAtFixedRate(new TimerTask() {
        @Override
        public void run() {
                Log.v("Service class called", "service class called "+i);
                getRunningApps();

                i++;
                Message msg=new Message();
                msg.arg1=i;
                handler.sendMessage(msg);
        }
    },0,1000);
}
private void getRunningApps()
{

}

@Override
public void onDestroy() {
    super.onDestroy();
}
protected Handler handler = new Handler() {
    public void handleMessage(android.os.Message msg) {
        intent1.putExtra("i", msg.arg1);
        sendBroadcast(intent1);
    }
};
} 
```

# python - gunicorn - 如果从 shell 脚本执行，则不获取配置文件

> ID：13118362
> 
> 赞同：2
> 
> 时间：2012-10-29T08:50:54.350
> 
> 标签：python, django, bash, shell, gunicorn

这是我的 shell 脚本的代码：

```
#!/bin/bash  
source /path/to/active
gunicorn_django -c /path/to/conf.py -D 
```

上面的 sh 文件在执行时会启动 gunicorn 进程，但它没有使用配置文件。

但是，如果我直接从命令行执行命令，比如

```
gunicorn_django -c path/to/conf.py -D 
```

然后它正在使用配置文件。

此外，在 sh 文件中，如果我直接提供选项，例如 -w 3 -error-logfile 等。那么它正在使用选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:45:50.783

使用这个脚本，为我工作：

```
#!/bin/bash  
source /path/to/active
gunicorn_django -c $(pwd)/path/to/conffilefrom/presentworkingdirectory -D 
```

# backbone.js - Backbone view's "delete" button is deleting all elements from the collection as opposed to the targeted element only

> ID：13118364
> 
> 赞同：0
> 
> 时间：2012-10-29T08:51:08.203
> 
> 标签：backbone.js, backbone-views, backbone-events

EDIT1: I have tried many different strategies for deleting the element including this.model.destroy(), this.collection.remove(this.model), etc. I have also bound the events using the events: syntax and using a direct binding strategy in both initialize and render.

If I change the code to use this.collection.add instead of remove it adds an additional X notes where X is the number of notes currently in the collection.

I am writing a basic list app (to be fleshed out eventually) and I want each element in the list to have a button that will delete it from the list.
I am using

*   require.js
*   backbone
*   lo-dash
*   jquery

My code snippets below show my view code for the Notes View, Note View and some supporting into including the templates being used to render each.

At the moment, the code is not functioning as desired because clicking ANY Note's "hide" button causes all elements in the collection to be removed one at a time. I know that is what is happening because I can insert alerts at the end of the "deletenote" method which allows me to view the deletion piece-wise.

I also know that the parent render method is not the cause of the problem because I can turn off the event callback to re-render the parent NotesView and all Note views are still deleted.

```
<script type="text/template" id="noteslist-template">
    <ul id="noteslist" style="list-style: none;">
    </ul>
</script>

<script type="text/template" id="note-template">
<li>
    <button type="button" class="notesbutton" id="hidenote">hide</button>
    <div id="note"><%= text %></div>
</li>
</script> 
```

NotesView.js

```
define
([  'jquery',
'underscore',
'backbone',
'notes/sample/sampletext',      //included to populate a collection for rendering *REMOVE ONCE DONE TESTING*
'notes/collections/Notes',      //included to create a new instance of the Notes collection during the initialize method of this view
'notes/models/Note',            //included to reference the model when creating NoteView instances for rendering
'notes/views/NoteView'      ],  //included to call render functions on each Note model in the collection
function($,_,Backbone,SampleText,Notes,Note,NoteView)
{
    var NotesView = Backbone.View.extend
    ({
        initialize: function() 
        {
            this.template = _.template($('#noteslist-template').html());
            _.bindAll(this,'render','rendernote');
            this.collection.bind('add',this.render);
            this.collection.bind('remove',this.render);
        },
        render: function() 
        {
            console.log('collection render');
            this.$el.html(this.template({}));       //change to this.notelist = THISLINE
            this.collection.each(this.rendernote);
            //add call to render notelist to DOM
            return this;
        },
        rendernote: function(note)      //add notelist variable
        {
            console.log('collection rendernote');
            var noteview = new NoteView(
                                {   model:note,
                                    collection:this.collection} );
            //add notelist  +=  LINEBELOW
            noteview.setElement(this.$('#noteslist'));
            noteview.render();
            //change noteview.render to NOT write to DOM
        }
    });
    return NotesView;
}
); 
```

NoteView.js

```
define
(   [   'jquery',
    'underscore',
    'backbone',
    'notes/models/Note',    ],  //include the Note model to reference as the model for the collection
function($,_,Backbone,Note)
{
    var NoteView = Backbone.View.extend
    ({
        tagName: "li",
        className: "note",

        events:
        {
            'click #hidenote':'deletenote',

        },

        initialize: function()
        {
            _.bindAll(this,'render','remove','deletenote');
            //this.model.bind('change',this.render);
            this.template = _.template($('#note-template').html());
            this.model.bind('remove', this.remove);
        },
        render: function()
        {
            this.notetorender = this.template(this.model.toJSON());
            this.$el.append(this.notetorender);
            return this;
        },
        deletenote: function()
        {
            this.options.collection.remove(this.model);
        }
    });
    return NoteView;
}
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:20:00.140

`noteview.setElement(this.$('#noteslist'));` causes event delegation. So eventhough you wrote 'click #hideNotes : deleteNode' inside NoteView, after the setElement call it works like that code is present inside NotesListView.

So when you click hide button of single li and expect only that li to be removed from ul however the click event is received by all li's hide button.That's why all items in collection are deleted .

[JsFiddle](http://jsfiddle.net/devendra/QYBRm/) here i do the same thing without using setElement

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:05:32.037

```
var NoteView = Backbone.View.extend({
    events: {'click #hidenote': 'deletenote'},
    initialize: function(){
        this.model.on('destroy', this.$el.remove)
    },
    deletenote: function(){
        this.model.destroy()
    }
}) 
```

# php - 服务器重启后php扩展和apache mods消失/不工作？

> ID：13118377
> 
> 赞同：2
> 
> 时间：2012-10-29T08:51:31.140
> 
> 标签：php, linux, apache, centos

我想知道以前是否有人遇到过这种情况，因为老实说，我很难过，而且我的服务器管理知识不是特别好，所以我不确定甚至可能出了什么问题，更不用说如何解决了.

基本上，

上周星期四，我们服务器上的一切都很好。我星期五进来，一团糟：php 扩展丢失/不工作，apache 模块不见了。（例如 oci_* 完全消失了，odbc_ 不工作但仍然存在，用于单点登录的 apache ntlm_auth 消失了，因此该网站甚至没有在 IE 中加载）。

我正在排除任何故意的事情，因为这非常不可能。

周四和周五之间真正发生的唯一一件事是，周四晚上，一名网络人员在服务器上进行了 RAM 升级并重新启动它。就是这样，没有别的了。

现在我想知道我们几个月前安装的那些扩展和类似的扩展是否以某种方式仅保存在某种本地内存中，并且重新启动是否会清除它们？但是我们都以 root 身份安装了它们，所以我不明白为什么它与安装其他任何东西有什么不同。

这对我来说几乎/没有意义。

为了扩展一个非常错误的例子，php odbc_ 扩展：

它仍然在服务器上，它不会返回未定义的函数或任何东西。但它只是无法再连接到数据源。我已经通过命令行对其进行了测试，它与该数据源和登录详细信息一起工作得非常好，但是突然将它放在 php odbc_connect() 函数中并且它无法连接。（[S1000][unixODBC][FreeTDS][SQL Server]无法连接到数据源。）

但是 unixODBC 设置得很好。就像我说的我已经通过终端测试了它并且它可以连接，我们没有改变任何东西，它只是现在突然无法通过 PHP 函数工作。

有人对可能发生的事情有任何想法吗？

编辑：顺便说一句，这是在 CentOS 上。5.x

干杯。

# c# - 在c#中按类型自动为SQL字段的引号

> ID：13118379
> 
> 赞同：0
> 
> 时间：2012-10-29T08:51:48.167
> 
> 标签：c#, sql, linq, quotes

假设我想通过主键反射动态创建一个 SQL SELECT 语句。我在表中搜索主键，然后做出声明。

问题是，在获取主键之前，我不知道构成主键的字段类型。所以，如果它是一个字符串或日期，我必须添加引号，但如果它是一个 int。

自动取款机，我正在这样做：

```
var type = field.GetType().Name;
if (type.ToLower().StartsWith("string") || type.ToLower().StartsWith("date"))
{
    field = "\"" + field + "\"";
} else if (type.ToLower().StartsWith("char"))
{
    field = "\'" + field + "\'";
} 
```

使用这段代码，我可以处理一些 SQL 类型，但还有更多。

我的问题是它与 LinQ 结合使用。我从上下文中得到了一个 DataContext 对象和一个泛型类型表。而 context.ExecuteQuery 只允许传递的参数有值。我也尝试过 Dynamic LinQ 但我遇到了同样的问题

有谁知道更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T08:54:49.460

这简直是​​编写 SQL 的错误方法。参数化它，所有这些问题都会消失（就像“使用哪种日期格式”等问题一样。当然还有大问题：SQL注入。

然后它就变成了添加`@whatever`到 TSQL 中并使用`cmd.Parameters.AddWithValue("whatever", field)`（或类似）的情况。

* * *

更新（来自评论）：因为你提到你正在使用`DataContext.ExecuteQuery`，这变得更容易：该方法使用约定完全参数化`string.Format`，即

```
object field = ...;
var obj = db.ExecuteQuery<SomeType>(
      "select * from SomeTable where Id = {0}", field).ToList(); // or Single etc 
```

无需进行字符串转换。

（最后一个参数是 a `params object[]`，因此您可以传递多个谨慎的术语，或者`object[]`如果术语的数量在编译时不固定，您可以填充并传递它；数组中的每个术语映射（从零开始）查询中`{0}`, `{1}`, `{2}`... etc 标记的索引）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T09:03:11.410

您是否尝试过使用参数？例如，如果您使用 SQLServer 作为数据库并且想要执行此查询：

```
"SELECT * FROM someTable WHERE id = " + field; 
```

然后你应该使用这样的东西：

```
"SELECT * FROM someTable WHERE id = @field" 
```

并将参数添加到您的命令中：

```
SqlParameter param1 = new SqlParameter("@field", field);
command.Parameters.Add(param1); 
```

编辑：请注意，对于不同的数据库提供程序，SQL 查询的语法是不同的，Access 的语法是相同的

```
"SELECT * FROM someTable WHERE id = ?";
command.Parameters.AddWithValue("field", field); 
```

# redmine - Redmine 插件 - ScreenshotPaste 不适用于 2.0.4

> ID：13118380
> 
> 赞同：0
> 
> 时间：2012-10-29T08:51:49.407
> 
> 标签：redmine, redmine-plugins

我正在尝试安装[http://www.redmine.org/projects/redmine/wiki/PluginScreenshotPaste](http://www.redmine.org/projects/redmine/wiki/PluginScreenshotPaste)或 Redmine 2.0.4，但是，没有运气。

有人知道如何修改插件才能工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:22:18.853

我对插件进行了返工，因为它与 Redmine 2.1.x 不兼容

您可以在我的 github 帐户上查看它：[redmine_screenshot_paste](https://github.com/undx/redmine_screenshot_paste)。

我还没有在分支 2.0.x 上测试过它。请告诉我它是否有效或在 github 上发布问题。

# linux-kernel - Root-NFS：挂载 rootfs 时服务器返回错误 -5

> ID：13118382
> 
> 赞同：0
> 
> 时间：2012-10-29T08:52:02.227
> 
> 标签：linux-kernel, nfs, u-boot

我正在尝试在我的设备上加载嵌入式 linux。

内核命令行：

```
setenv bootcmd 'nfs 10.0.0.1:/home/master/rootfs3/boot/uImage;bootm;'
setenv bootargs console=ttyTX0,57600n8 root=/dev/nfs rw nfsroot=10.0.0.1:/home/master/rootfs3 ip=dhcp init=/sbin/init 
```

系统加载失败：

```
VFP support v0.3: implementor 41 architecture 1 part 10 variant 9 rev 1
rtc-lpc32xx rtc-lpc32xx: setting system clock to 1970-01-06 00:47:10 UTC (434830)
Sending DHCP requests .., OK
IP-Config: Got DHCP answer from 0.0.0.0, my address is 10.0.0.10
IP-Config: Complete:
     device=eth0, addr=10.0.0.10, mask=255.255.255.0, gw=10.0.0.1,
     host=10.0.0.10, domain=, nis-domain=(none),
     bootserver=0.0.0.0, rootserver=10.0.0.1, rootpath=
Waiting 4sec before mounting root device...
Looking up port of RPC 100005/1 on 10.0.0.1
Root-NFS: Unable to get mountd port number from server, using default
Root-NFS: Server returned error -5 while mounting /home/master/rootfs2
VFS: Unable to mount root fs via NFS, trying floppy.
VFS: Cannot open root device "nfs" or unknown-block(2,0)
Please append a correct "root=" boot option; here are the available partitions:
1f00        768 mtdblock0 (driver?)
1f01       2048 mtdblock1 (driver?)
1f02       2048 mtdblock2 (driver?)
1f03      15360 mtdblock3 (driver?)
1f04      87040 mtdblock4 (driver?)
1f05      23808 mtdblock5 (driver?)
Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(2,0) 
```

`Server returned error -5`- 这是什么意思，我在哪里可以知道这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T05:24:37.953

1.在我的 Fedora 18 上禁用防火墙 systemctl stop firewalld systemctl disable firewalld

2.禁用selinux vi /etc/selinux/config

-- 注释 SELINUX=enforcing -- 添加#SELINUX=disabled

重启你的linux。

# android - 缩放控制不适用于地图

> ID：13118383
> 
> 赞同：1
> 
> 时间：2012-10-29T08:52:02.750
> 
> 标签：android, zooming, webviewclient

我在我的应用程序中有 webview，我将动态获取该 webview 的数据，我正在控制该视图的放大。当我得到这个网址[http://content.vaayoo.com/AppsPlatForm/DealsaheadWeb/m_facebooks.aspx?Token=moc.liamg@liahs](http://content.vaayoo.com/AppsPlatForm/DealsaheadWeb/m_facebooks.aspx?Token=moc.liamg@liahs)时，会出现放大控制。但是当我得到以下网址 [https://maps.google.com/?saddr=12.9302,77.5831&daddr=12.928464,77.584258](https://maps.google.com/?saddr=12.9302,77.5831&daddr=12.928464,77.584258)时，没有出现缩放控制。问题出在哪里？任何形式的帮助都非常感谢..下面是我的代码..

```
 protected void applyStyles() {

    // applying the zooming property to webview.
    final FrameLayout.LayoutParams ZOOM_PARAMS = new FrameLayout.LayoutParams(
            ViewGroup.LayoutParams.WRAP_CONTENT,
            ViewGroup.LayoutParams.WRAP_CONTENT, Gravity.TOP);

    View zoom = ((WebView) view).getZoomControls();
    FrameLayout ContentView = (FrameLayout) ((Activity) context)
            .getWindow().getDecorView().findViewById(android.R.id.content);
    ContentView.addView(zoom, ZOOM_PARAMS);
    zoom.setVisibility(View.VISIBLE);
} 
```

下面是我正在为 webview 进行所有设置的代码。

```
if (data != null && webview != null) {
        String webData = data.toString();
        webview.getSettings().setJavaScriptEnabled(true);
        webview.getSettings().setLoadWithOverviewMode(true);
        webview.getSettings().setDefaultZoom(WebSettings.ZoomDensity.MEDIUM);
        webview.getSettings().setUseWideViewPort(false);
        //webview.getSettings().setLayoutAlgorithm(WebSettings.LayoutAlgorithm.NARROW_COLUMNS);
        webview.getSettings().setBuiltInZoomControls(true);
        webview.getSettings().setSupportZoom(true);

        webview.requestFocus(View.FOCUS_DOWN);
        webview.setOnTouchListener(new View.OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {

                switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:

                    case MotionEvent.ACTION_UP:
                        if (!v.hasFocus()) {
                            v.requestFocus();
                        }

                        break;
                }
                return false;
            }
        });
        System.out.println("webdata" +  webData);
        if (webData.startsWith("http")) {
            webview.loadUrl(webData);

        } else {
            webview.loadData(webData, "text/html", "utf-8");
        }           
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:33:12.287

如果您有 webview，那么您必须像这样为 webview 启用缩放的这些属性-

```
webview.getSettings().setSupportZoom(true);
webview.getSettings().setBuiltInZoomControls(true); 
```

在此之后，将向您显示默认缩放功能，我希望此建议对您有所帮助。谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T10:44:14.653

尝试设置`setJavaScriptEnabled`为true。你也可以通过

```
WebSettings webSettings = myWebView.getSettings();
webSettings.setJavaScriptEnabled(true); 
```

还要检查是否`WebView`存在以下属性

```
webSettings.setSupportZoom(true);
webSettings.setBuiltInZoomControls(true); 
```

# mysql - SQL 中的 Count 语句会减慢查询速度

> ID：13118385
> 
> 赞同：2
> 
> 时间：2012-10-29T08:52:04.983
> 
> 标签：mysql, sql, count, query-optimization

`item_tag_map`有两列`item_id`，`tag_id`并且它们都有索引。

这是一个数据示例：

```
item_id     tag_id
1           1
1           3
4           7
1           5
3           1
3           8
6           8
10          4 
```

现在我想获取具有标签 1、2、3、5 的项目 ID，并按所有标签的总数对结果进行排序。

这是一个结果示例：

```
item_id     count(m.tag_id)
1           3
3           1 
```

我尝试的 SQL 是：

```
SELECT m.item_id,count(m.tag_id) from item_tag_map AS m
WHERE tag_id in(1,2,3,5)
GROUP BY m.item_id
ORDER BY count(m.tag_id)
LIMIT 10 
```

该表中有大约 10k 行，查询非常慢。我试图删除所有`count`语句，然后它变得比以前非常快。

为什么会`count`减慢这个查询？如何优化此查询以使其快速？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T09:09:24.167

这是因为`ORDER BY COUNT(m.tag_id)`.
MySQL 需要获取所有行（即进行全表扫描）来计算`item_id`.

在这种情况下，MySQL 无法使用索引。（正如您在查看时可能意识到的那样`EXPLAIN SELECT ..`）

当您`COUNT()`从`ORDER BY`子句中删除时，MySQL 能够使用索引进行排序。

* * *

一种可能的解决方案是创建一个[物化视图](http://en.wikipedia.org/wiki/Materialized_view)，其中 DBMS 将`tag_id`每个值的计数缓存`item_id`在一个单独的表中。

MySQL 本身不支持物化视图，但您可以模拟它们：
您可以使用相关查询 ( `INSERT INTO tag_counts SELECT ...`) 最初创建表一次，然后使用`ON [INSERT | DELETE]`触发器保持更新。[或者，有一个名为FlexViews](http://code.google.com/p/flexviews/)
的第三方软件可以为您自动执行此过程。

这就是我保持每周数百万行统计数据库反应的方式。

# blackberry-10 - 我可以从哪里获得 Blackberry 10 Alpha 开发套件？

> ID：13118396
> 
> 赞同：-3
> 
> 时间：2012-10-29T08:52:50.133
> 
> 标签：blackberry-10

有下载位置和开发指南吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:06:20.983

如果您指的是提供给开发人员的[Dev Alpha 设备](https://developer.blackberry.com/blackberry10devalphas/)，以帮助他们在 BlackBerry 10 上测试他们的应用程序，您将需要参加 BlackBerry Jam（用于开发消费者应用程序）或 Enterprise Jam（用于开发企业应用程序）活动，并有资格获得设备。

*   果酱活动： http: [//www.blackberryjamconference.com/](http://www.blackberryjamconference.com/)
*   Enterprise Jam 活动： http: [//www.blackberryjamenterprise.com/](http://www.blackberryjamenterprise.com/)

# javascript - 你如何用 document.write 写出 JavaScript 代码？

> ID：13118397
> 
> 赞同：0
> 
> 时间：2012-10-29T08:52:54.833
> 
> 标签：javascript, document.write

我搜索了这个，但我一直在寻找关于

```
"<scr" + "ipt>" 
```

我的问题是我想从我的 JavaScript 代码生成一些 JavaScript 代码。

我在下面复制了一个总体思路。怎样才能实现我想要的？是否需要使用外部 .js 文件？

```
document.write("var testprompt = prompt('What zindex page to change?');
var getpage = getElementById('mobileimage'+testprompt);
getpage.style.zIndex = '1000';"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T08:56:15.717

您正在寻找[eval()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval)。但是，我建议不要使用它，因为使用 eval 运行 JavaScript 代码存在许多安全问题。请参阅*[为什么使用 JavaScript eval 函数是个坏主意？](https://stackoverflow.com/questions/86513/why-is-using-the-javascript-eval-function-a-bad-idea)*.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T08:56:00.510

使用 JavaScript 编写 JavaScript 的问题是浏览器只会执行代码的第一次传递。

用 document.write() 编写的 JavaScript 将不会被执行，因此变得毫无用处。为什么不能简单地将要执行的 JavaScript 编写为 JavaScript，而不是通过 document.write() 对其进行抽象？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T09:40:19.847

这对我有用：

```
<html>

<body>
    <script>
        var i = 1;
        document.write(i);
        document.write("<scr" + "ipt> i = 2; document.write(i); </scr" + "ipt>");
        i = 3;
        document.write(i);
    </script>
    123
</body>

</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T08:56:16.313

`getElementById()`仅在加载 DOM 后才起作用，而通过 编写的代码`document.write()`在解析 HTML 文档时立即执行。

您必须将代码封装在回调中，以便在加载 DOM 后执行（我建议使用像 jQuery 这样的库）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T08:58:10.290

在字符串之间不带“\n”的单行中运行它。有用。

```
document.write("var testprompt = prompt('What zindex page to change?'); var getpage = getElementById('mobileimage' + testprompt); getpage.style.zIndex = '1000';"); 
```

# javascript - 动画隐藏表格中的单元格并重新调整行中剩余单元格的大小。

> ID：13118400
> 
> 赞同：1
> 
> 时间：2012-10-29T08:53:17.900
> 
> 标签：javascript, jquery, jquery-animate, html-table

我有一个 100% 宽度和三个单元格的表格。

当我按下一个按钮时，一个单元格被隐藏，并且表格布局会相应调整。

我目前正在使用 .hide() jquery 方法为隐藏设置动画。

**HTML**

```
<table style="border-color:red;width:100%">
    <tr>
        <td>
            <table><tr><td><div>stuff 1 blah blah blah</div></td></tr></table>
        </td>
        <td>
            <table><tr><td><div>stuff 2 blah blah blah</div></td></tr></table>
        </td>
        <td id="tdStuff"> 
             <table><tr><td><div>stuff 3 blah blah blah</div></td></tr></table>           
        </td>
    </tr>
</table>
<button id="btnHide" onclick="hideStuff()" >Hide</button> 
```

**Javascript/jQuery**

```
function hideStuff(){
    $('#tdStuff').hide('slow');
} 
```

但问题是，即使它一开始调整得很顺利，单元格中的文本也会被压扁。而且，如果任何地方都有固定的宽度，它就会停止调整并简单地跳跃。

有没有一种方法可以通过扩展行中剩余的单元格以适应表格的宽度来使动画顺利进行。

相关[的jsfiddle](http://jsfiddle.net/hrMYL/12)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T08:55:48.807

是的，jQuery 有这方面的功能，试试下面的调整：

`$('#tdStuff3').hide('slow');`

有关更多信息，请参阅有关[隐藏](http://api.jquery.com/hide/)的文档。

# facebook - facebook 图表和访问令牌

> ID：13118402
> 
> 赞同：0
> 
> 时间：2012-10-29T08:53:25.577
> 
> 标签：facebook, facebook-graph-api

当我请求获取

```
https://graph.facebook.com/[userid] 
```

我得到了`access_token`所有的基本信息

但是当我这样做时

```
https://graph.facebook.com/me 
```

使用相同的令牌我得到一个错误`message: An active access token must be used to query information about the current user`

我试图了解可能导致这种情况的原因。
我什至尝试标记签名请求附带的令牌

我在经典的 asp 上，使用 JSON 库，如果可能的话，我希望自动成为服务器端。正在`FB.api("/me"`工作，但这不是我真正想要实现的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:13:27.540

我很确定您没有用户访问令牌。你登录用户了吗？当然，即使没有任何访问令牌，您也可以通过第一个链接获得每个用户的公共数据。你甚至可以直接把它放在浏览器中，就会得到结果。但是对于“/me”，您必须授权用户使用您的应用程序。

见这里：[https ://developers.facebook.com/docs/howtos/login/server-side-login/](https://developers.facebook.com/docs/howtos/login/server-side-login/)

这肯定与另一个线程中的问题相同，只是一种不同的编程语言。请记住：如果用户在对话框或重定向中至少没有接受基本权限，则他没有登录，您将永远不会在应用程序中了解他的任何信息（除了标签应用程序中的一些细节，如语言、点赞状态和东西）。

# facebook - 如何将另一个 Facebook 应用程序标签添加到我的粉丝页面

> ID：13118403
> 
> 赞同：0
> 
> 时间：2012-10-29T08:53:36.237
> 
> 标签：facebook, tabs

我在我的网站中使用了一个 facebook 连接应用程序 (A)，并且我拥有另一个应用程序 (B)。他们都有自己的标签。

用户在我的网站（A）中以 facebook 登录，我希望用户将（B）的标签页添加到他们的粉丝页面。怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:08:11.073

这有几种可能性，我更喜欢以下几种：

```
https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=http://www.facebook.com 
```

您可以将该链接提供给任何用户，他将能够将该应用程序添加到他的主页。您也可以更改“下一个”参数，但它必须归应用所有。无论如何都无所谓，它只是成功后的重定向。

它不会打开一个对话框，所以如果你想在你的应用程序中展示它，这个解决方案可能会更好：

[https://developers.facebook.com/docs/reference/dialogs/add_to_page/](https://developers.facebook.com/docs/reference/dialogs/add_to_page/)

但正如您评论的那样，这不适用于其他应用程序。最好的解决方案可能是这个：

[https://developers.facebook.com/blog/post/611/](https://developers.facebook.com/blog/post/611/)

请参阅“将应用程序添加到页面”，它基本上是我发布的链接，但带有 JS 弹出窗口。

编辑：实际上，可能还有另一种选择，请参见此处：

[https://developers.facebook.com/docs/reference/api/page/#tabs](https://developers.facebook.com/docs/reference/api/page/#tabs)

“您可以通过使用页面访问令牌向 PAGE_ID/tabs 发出 HTTP POST 请求，在页面的当前已安装选项卡列表的末尾安装 profile_tab...”

# twitter-bootstrap - 如何使用 Jasny 文件上传获取文件位置

> ID：13118407
> 
> 赞同：1
> 
> 时间：2012-10-29T08:54:04.163
> 
> 标签：twitter-bootstrap, jasny-bootstrap

我想将文件位置传递给我一直`data-bind ="value: x"`在此处的每个元素上使用的控制器，但没有可用的我无法捕获文件位置。

我正在使用 Jasny Bootstrap FileUpload 中的这个脚本

```
<div class="fileupload fileupload-new" data-provides="fileupload">
  <div class="input-append">
    <div class="uneditable-input span3"><i class="icon-file fileupload-exists"></i> 
<span class="fileupload-preview"></span></div><span class="btn btn-file">
<span class="fileupload-new">Select file</span><span class="fileupload-exists">Change</span>
<input type="file" /></span><a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T20:24:50.760

如果您发布了整个表格，将会很有帮助。
起初我一直在努力设置，只是意识到我所要做的就是`:multipart => true`在表格中设置。

```
<%= form_for @item, :html => {:multipart => true} do |f| %> 
```

一旦你这样做了，你应该能够在控制器中获取文件路径。我不确定这是否可以解决您的问题。同样，如果您在提交表单时显示更多代码以及当前在参数中获得的内容，这将有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T23:09:01.070

在不同的帖子上查看相同的问题和一些答案： [jQuery Ajax File Upload](https://stackoverflow.com/questions/2320069/jquery-ajax-file-upload)

@Adeel 的帖子解决了我的需求。

# java - java drawImage不能从事件中工作

> ID：13118409
> 
> 赞同：1
> 
> 时间：2012-10-29T08:54:18.237
> 
> 标签：java, swing, awt, jlabel, java-2d

我有一个扩展 jlabel 并使用paintComponent 在其上绘制的类，如下所示这是paintPhotos.java

```
package myApp;
import java.awt.*;
import javax.swing.*;
/**
*
* @author PAGOLINA
*/
public class paintPhotos extends javax.swing.JLabel {

    public Image img; int w; int h;
public paintPhotos(Image img, int w, int h) {
    this.img = img; this.w = w; this.h = h;
    System.out.println("am paintclass");
 }
@Override
public void paintComponent(Graphics p) {
    System.out.println("am here");
    super.paintComponent(p);
    Graphics2D g2 = (Graphics2D) p;
    p.drawImage(img, 0, 0, w, h, this);
}

} 
```

当我尝试从像这样的另一个类（AddScore.java）的构造函数中绘制时。

```
public AddScore() {
    initComponents();
    setLocationRelativeTo(null);
    removeNotify();
    setUndecorated(true);
    Image imag = new  ImageIcon(this.getClass().getResource("img/top_bg.jpg")).getImage();
    showPix1.setLayout(new BorderLayout());
    showPix1.add(new paintPhotos(imag,40,40), BorderLayout.CENTER);
} 
```

以上工作正常并按指定绘制图像。

但是当我尝试从像这样的另一个类（AddScore.java）的 actionperform 事件中绘制图像时。

```
private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:
    Image imag = new ImageIcon(this.getClass().getResource("img/top_bg.jpg")).getImage();
            showPix1.setLayout(new BorderLayout());
            showPix1.add(new paintPhotos(imag,20,20), BorderLayout.CENTER);
} 
```

上述语句不起作用，因为paintcomponent 不起作用，我做错了什么？

有人可以帮我解决这个问题吗，因为我已经尝试了所有可能的方法来调用我的paintPhotos 类但没有工作，这段代码有什么问题？

```
private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
// TODO add your handling code here:
Image imag = new ImageIcon(this.getClass().getResource("img/top_bg.jpg")).getImage();
        showPix1.setLayout(new BorderLayout());
        showPix1.add(new paintPhotos(imag,20,20), BorderLayout.CENTER);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T09:00:37.243

1.  将`Image`作为[图标 / ImageIcon](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)放入[JLabel](http://docs.oracle.com/javase/tutorial/uiswing/components/label.html)

2.  在这种情况下，不要即时加载图像，将其加载为局部变量

3.  for `Icon`/ `ImageIcon`in`JLabel`正确使用[`LayoutManager`](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

4.  常见问题是`Icon`/`ImageIcon`不返回任何异常，必须测试`null value`

5.  尽快发布[SSCCE以获得更好的帮助](http://sscce.org/)

# asp.net-mvc - MVC ModelState 错误地报告错误

> ID：13118410
> 
> 赞同：0
> 
> 时间：2012-10-29T08:54:21.823
> 
> 标签：asp.net-mvc, validation, modelstate

我从视图中接收模型。
一些值是自动填充的。

但是，需要手动添加一些必需的值，如下所示：

```
[HttpPost]
public ActionResult Foobar(FooModel model, FormCollection collection)
{
    // "timePicker" is a dropdown list containing different times
    var time = collection["timePicker"].Split(':');
    model.Hours = int.Parse(time[0]);
    model.Minutes = int.Parse(time[1]);

    if (ModelState.IsValid)
    {
        ... // Do stuff
    }
} 
```

所以问题来了：

**`ModelState.IsValid`是假的。**
我调试了它，它声称`model.Minutes`并`model.Hours`没有分配给它。
...这不是真的，因为我*刚刚为它们分配*了值！

我考虑使用`ModelState.Clear()`，但我不想手动检查所有其余信息是否有效。

有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T08:58:16.930

好吧，模型绑定，将错误放入`ModelState`，在进入您的操作之前已经完成。

因此，在您在 Hours 和 Minutes 中添加值之前（这使其无效），ModelState 中出现了`Minutes`and错误。`Hours`

您可以通过执行以下操作来删除这些错误（而不是所有错误`Clear()`）：

```
ModelState.Remove("Hours");
ModelState.Remove("Minutes"); 
```

解决此问题的另一种方法是创建（和使用）自定义 ModelBinder。

# javascript - 未捕获的语法错误：意外的令牌非法

> ID：13118412
> 
> 赞同：0
> 
> 时间：2012-10-29T08:54:27.937
> 
> 标签：javascript, google-chrome

我使用 HEADER 中的此脚本在 Google Chrome 中收到此错误。

你能帮我理解什么是错的吗？

```
**Uncaught Syntax Error: Unexpected Token ILLEGAL**

 <script>
        $(document).ready(function () {
            $('#DateTimeStart).datetimepicker();
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T08:56:53.660

首先，您应该指定脚本块的类型，例如

```
<script type='text/javascript'></script> 
```

但实际的问题是你在 DateTimeStart 之后没有第二个撇号，例如

```
$('#DateTimeStart').datetimepicker(); 
```

编辑：删除了我的坏建议:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T08:57:17.623

您缺少结尾报价

```
$(document).ready(function () {
            $('#DateTimeStart').datetimepicker();
        }); 
```

# java - 使用正则表达式模式的困难

> ID：13118414
> 
> 赞同：-9
> 
> 时间：2012-10-29T08:54:39.540
> 
> 标签：java, regex

请考虑以下文本：

```
 String str=
            "<div style=\"text-align:left;\">$#abc#$</div>$#pqr#$"; 
```

我怎样才能得到 abc 和 pqr。

我尝试使用下面的代码

```
String tempStr =
        "$#<div style=\"text-align:left;\">$#Order-CASNo#$</div>$#abc#$";

Pattern p = Pattern.compile("(?<=\\$#)(\\w*)(?=#\\$)");
Matcher m = p.matcher(tempStr);

List<String> tokens = new ArrayList<String>();
while (m.find()) {
    System.out.println("Found a " + m.group() + "."); 
```

但它只给我 abc ..我想要 Order-CASNo 和 abc 的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T08:59:20.040

这是正则表达式：

**编辑：**

```
\b(?<=\$\#)(.*?)(?=\#\$)\b 
```

**[正则表达式演示](http://regexr.com?32kdv)**

# c# - UserControl.InputBindings 处理鼠标事件 - 未选择周围的列表框项

> ID：13118415
> 
> 赞同：1
> 
> 时间：2012-10-29T08:54:42.103
> 
> 标签：c#, wpf

我在我的视图中定义了一个用户控制：

```
<UserControl.InputBindings>
    <MouseBinding Command="{Binding MyCommand}" MouseAction="LeftClick" />
</UserControl.InputBindings> 
```

此 UserControl 在列表框项内呈现。

当我单击我的用户控件时，应该执行该命令，但也应该选择列表框项。我相信这是由于鼠标绑定处理了我的 leftclick 事件，所以列表框永远不会得到它。

有没有办法做到这一点？我不想在我的视图中使用代码。

# prism - 目录目录的模块依赖性 - Microsoft PRISM

> ID：13118416
> 
> 赞同：0
> 
> 时间：2012-10-29T08:54:42.260
> 
> 标签：prism, unity-container, modularity, prism-4, cag

我正在使用 DirectoryModuleCalatog 加载模块。

我想要实现的是所有模块都需要依赖于某个特定的模块。例如，我有一个 MainModule 和几个 orher 模块，我想要的是我的所有模块都依赖于 MainModule。

我们可以通过指定 ModuleDependency 属性来做到这一点，但我的要求是即使模块没有这个属性，也可以通过代码设置依赖关系。

我检查了各种形式，发现如果我直接从代码中填充 ModuleCatalog 就可以实现这一点。我可以通过直接遍历模块位置来实现这一点，但不确定如果模块数量更多（比如 50+ 或 100+）它会如何影响性能。

如果使用 DirectoryModuleCatalog 填充目录，是否可以设置模块依赖项？

# css - CSS背景颜色不起作用

> ID：13118418
> 
> 赞同：14
> 
> 时间：2012-10-29T08:54:55.690
> 
> 标签：css

我将外部 div 的背景颜色设置为蓝色，但未显示。为什么？

它的演示：

```
.question-template {
    width: auto;
    height: auto;
    background-color: blue;
}
.question {
    float: left;
    margin: 10px;
}
.participants {
    background-color: green;
    float: left;
    margin: 10px;
}
```

```
<body>
<div class="question-template">
    <div class="participants">234</div>
    <div class="question">Some lorem ipsum text</div>
</div>
</body>
```

[jsFiddle](http://jsfiddle.net/4zjtp/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T09:01:21.190

试试这样。。

```
.question-template {
    width: auto;
    height: auto;
    background-color: blue;
    overflow:auto;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-29T08:59:01.133

这是因为您的两个子元素都向左浮动。这意味着容器不会拉伸到包含子元素所需的完整高度。

为了解决这个问题，你需要在你的 CSS 中添加一个这样的 clearfix 类：

```
.clearfix:after {
  content: "";
  display: table;
  clear: both;
} 
```

然后像这样将类添加到您的 HTML 中：

```
<div class="question-template clearfix"> 
```

有关更多信息，请参见此处：http: [//css-tricks.com/snippets/css/clear-fix/](http://css-tricks.com/snippets/css/clear-fix/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-29T08:55:52.420

***[现场演示](http://jsfiddle.net/4zjtp/1/)***............嗨，现在定义你的**父 div** `.question-template overflow:hidden;`

```
.question-template{
overflow:hidden;
} 
```

* * *

**方法二**

现在清除你的父母

**CSS**

```
.clr{
clear:both;
} 
```

**HTML**

```
<div class="question-template">
<div class="participants">234</div>
<div class="question">Some lorem ipsum text</div>
    <div class="clr"></div>
</div> 
```

***[现场演示](http://jsfiddle.net/4zjtp/6/)***

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T08:57:52.997

添加`overflow:auto`到`.question-template`

[http://jsfiddle.net/4zjtp/2/](http://jsfiddle.net/4zjtp/2/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T09:01:24.733

您需要在父 div 上应用清除浮动以确保它占据内部元素。您可以`<div style="clear:left;"></div>`在父级关闭之前插入 a 或在父级 div 上应用 clearfix 类。

```
.clearfix:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}

.clearfix {
    display: inline-block;
}

html[xmlns] .clearfix {
    display: block;
}

* html .clearfix {
    height: 1%;
}
​ 
```

然后你只需将 clearfix 类添加到父 div

```
...    
<div class="question-template clearfix">
... 
```

[工作示例](http://jsfiddle.net/4zjtp/8/)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2020-03-18T08:17:45.977

`<div>`对元素使用固定高度。会是这样

```
 .question-template {
    width: auto;
    height: 150px;
    background-color: blue;
 }
 .question {
    float: left;
    margin: 10px;
    color: white;
 }
 .participants {
    background-color: green;
    float: left;
    margin: 10px;
 } 
```

# compilation - 如何在没有 dll 的情况下编译 GNU sed？

> ID：13118422
> 
> 赞同：1
> 
> 时间：2012-10-29T08:55:04.220
> 
> 标签：compilation, sed, mingw, gnu

我用[MinGW+MSYS](http://www.mingw.org/)编译了[GNU sed](http://ftp.gnu.org/gnu/sed/)：

```
./configure
make && make install 
```

它奏效了。

但困扰我的是，没有libintl-8.dll libiconv-2.dll sed.exe 无法运行。

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:25:23.440

```
./configure LDFLAGS=-static
make 
```

[`ref`](http://github.com/svnpenn/a/blob/master/scripts/install-rtmpdump.sh)

# android - 在android中卸载应用程序时如何清除db

> ID：13118427
> 
> 赞同：5
> 
> 时间：2012-10-29T08:55:39.387
> 
> 标签：android, database, android-intent, sms

我使用数据库来存储消息，如果我卸载我的应用程序并再次重新安装同一个应用程序，数据库保持不变，但我想清除我的数据库，如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T09:06:42.887

要收听卸载事件，您必须实现接收到的广播，例如：

```
<application
android:icon="@drawable/ic_launcher"
android:label="@string/app_name" >
<activity
    android:name=".UninstallIntentActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <action android:name="android.intent.action.DELETE" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:scheme="package"  />
    </intent-filter>

</activity>

</application> 
```

然后在您的 UninstallIntentActivity 中，您必须使用下一行来删除您的数据库：

```
context.deleteDatabase(DATABASE_NAME); 
```

您可以在此处查看有关此主题的更多信息[在应用程序卸载之前收听广播](https://stackoverflow.com/questions/8633761/listen-broadcast-before-application-uninstall)

我希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:39:41.220

所有数据，包括存储在内部存储中的数据库、首选项、本地数据文件在卸载时都会被删除。它们只会在应用程序更新时保持不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T09:42:49.423

我认为这不是普通情况，因为当您卸载应用程序时 - 所有数据库都会自动删除。但如果它没有发生 - 尝试清除菜单中的数据 - 管理应用程序 - 您的应用程序 - 卸载前清除数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-10T06:39:45.720

就我而言，我只是忘记在 DatabaseHelper 类的 onUpgrade 方法中添加以下行

```
onCreate(sqLiteDatabase); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-29T08:58:30.147

下面的代码可以帮助您从应用程序中删除数据库

```
/**
     * Re crate database
     * Delete all tables and create them again
     * */
    public void resetTables(){
        SQLiteDatabase db = this.getWritableDatabase();
        // Delete All Rows
        db.delete(TABLE_NAME, null, null);
        db.close();
    } 
```

在处理数据库处理方法的类中创建一种方法。您在哪里创建其他方法，如添加、更新等。

# javascript - 文档准备好时执行 2 个方法的 jQuery 顺序

> ID：13118437
> 
> 赞同：0
> 
> 时间：2012-10-29T08:56:09.107
> 
> 标签：javascript, jquery, methods, each

我有这种情况。

```
$(document).ready(function(){ 
    $.each(elements,do());
}); 
```

我想在`$.each()`完成新方法调用后执行另一个新方法`doOther()`。

例如，我可以在哪里设置我的新方法`doOther();`？我有新的`$.each`内部新方法仅供参考。

**更新**

这是我的脚本

```
$(function(){
    $.each($('.countdown'), function() {
        var _element = '.countdown-'+$(this).attr("id");
        if ($(_element).length > 0) {
            var _expDate = $(_element).attr('data-expiration').split(',');
            _expDate.forEach(function(v,i,a){a[i]=parseInt(a[i]);});
            var _datetime = new Date(_expDate[0],_expDate[1],_expDate[2],_expDate[3],_expDate[4],_expDate[5]);
            init_countdown(_element,_datetime);
        }
    });

    $.each($('.countdown'),function() {
        var ips = $(this).text().split(',');
        $(this).html('<div class="span12">'+ips[0]+'</div>');
    }); 
});

function init_countdown(_element,_datetime){
    $(_element).countdown({
        date: _datetime /*"June 7, 2087 15:03:26"*/
    });
} 
```

似乎`$.each($('.countdown')`etc.. 被第一个覆盖`$.each`，不明白为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T08:58:28.197

如果我明白你的意思，你的代码应该是这样的：

```
$(document).ready(function(){ 
    $.each(elements, do);
    doOther();
}); 
```

如果这不是您的意思，请编辑您的原始问题并添加更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T08:58:51.940

应该这样做，

```
$(document).ready( function(){ 
 $.each(elements,do());
 doOther();
} ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T08:58:12.847

在您的第一个 $.each 块之后立即实施另一种方法

# html-parsing - Jsoup解析链接

> ID：13118443
> 
> 赞同：1
> 
> 时间：2012-10-29T08:56:21.383
> 
> 标签：html-parsing, jsoup, linkparser

 [我想从 html 中提取链接，使用 jsoup

预期输出：绝对链接。

我为此使用“abs:href”。

这有效：

```
Jsoup.parse("<a \n\r\t  href=\"http://www.ibm.com/123/?id=abc\">\nhaha</a>", "http://www.ibm.com"); 
```](www.abc.com) 

[交付：](www.abc.com)[http ://www.ibm.com/123/?id=abc](http://www.ibm.com/123/?id=abc)

这不起作用：

```
Jsoup.parse("<a \n\r\t  href=\"www.ibm.com/123/?id=abc\">\nhaha</a>", "http://www.ibm.com"); 
```

交付：[http ://www.ibm.com/www.ibm.com/123/?id=abc](http://www.ibm.com/www.ibm.com/123/?id=abc)

我知道很难知道“www.ibm.com”是绝对链接还是相对链接。它可能是顶级域，但也可能是文件夹名称。任何经过验证的解决方案？我想到了这个黑客：

```
String domain = url.replace("http://", "");
url.replace(domain + domain, domain); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:52:59.747

您的第二个示例无疑是**相对 URL**。根据定义，绝对 URL 以协议开头（例如 http 或 https）。所有浏览器都会为您的示例提供相同的输出。

您能否提供一个您正在使用的示例 URL？为什么它有这些伪绝对 URL？

# asp.net - asp.net 到 tomcat

> ID：13118446
> 
> 赞同：3
> 
> 时间：2012-10-29T08:56:25.567
> 
> 标签：asp.net, tomcat, deployment, mono, intranet

任何人都有任何示例/教程链接来使用单声道将 asp.net 部署到 tomcat（内联网）？他们给出的指南并不清楚应该如何做。

或者除了使用单声道之外，还有其他方法可以将 asp.net 部署到 tomcat 吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T13:17:02.600

> 任何人都有任何示例/教程链接来使用单声道将 asp.net 部署到 tomcat（内联网）？

由于 Tomcat 主要用于运行基于 Java 的技术，您可能应该研究一下[Grasshopper](http://dev.mainsoft.com/Default.aspx?tabid=130)，尽管到目前为止我还没有看到有人使用 Tomcat 来部署 ASP.NET 应用程序。

> 或者除了使用单声道之外，还有其他方法可以将 asp.net 部署到 tomcat 吗？

如果您的环境是基于 unix 的，那么您唯一的方法就是使用单声道。但是，我建议您将 apache 与[mod_mono](http://www.mono-project.com/Mod_mono)或 nginx 与[FastCGI](http://www.mono-project.com/FastCGI_Nginx)一起使用，因为这些是运行基于 ASP.NET 的 web 应用程序与 mono 的最常用组合。

# mercurial - Mercurial .hgignore 排除指定文件夹的所有子文件夹中所有不是“.txt”的文件

> ID：13118449
> 
> 赞同：0
> 
> 时间：2012-10-29T08:56:36.610
> 
> 标签：mercurial, hgignore

有目录结构

```
foo
 -1.txt
 -1.notxt
 -bar
  -2.txt
  -3.notxt
  -sub
   -1.txt
   -2.txt
another-folders-and-files 
```

想要排除文件夹*foo*及其子文件夹中的所有非“.txt”文件。最相似的是这种模式：

```
^foo/(?!.*\.txt$) 
```

但它不仅排除了*foo中的**1.notxt*文件，还排除了所有子文件夹。我认为，这是因为*bar*与我的排除模式相匹配，但我不明白如何对 hg 说不要忽略*bar*。

 ***有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T21:17:51.487

不幸的是，mercurial 忽略模式不区分文件和目录。因此，如果您忽略*每个*不以 结尾的名称`.txt`，您也会忽略目录。但是由于目录名称通常没有后缀，因此您*可以*忽略所有后缀不是 的名称`.txt`，如下所示：

```
^foo/.*[^/]\.[^/]*$(?<!txt) 
```

分解：

`^foo/.*`foo/ 中的任何路径；其次是

`[^/]\.`以（至少）一个非斜线字符开头的句点；其次是

`[^/]*$`，一个路径结尾的后缀；最后：

`(?<!txt)``txt`检查在行尾之前是否没有。

这允许以句点 ( ) 开头的`.hgignore`名称和根本不包含句点 ( `README`) 的名称通过。如果您有没有后缀的文件，则必须找到另一种排除它们的方法，但这应该可以帮助您完成大部分工作。如果您的目录名称中间带有点，这将抑制它们，您需要更加努力地排除它们 - 或改变您的方法。

（顺便说一句，拥有一长串被忽略的后缀并在必要时添加它可能更安全；该列表很快就会稳定下来，您不会冒险忽略不应该的东西。）***

# android - 无法切换到 Holo Dark 主题

> ID：13118451
> 
> 赞同：4
> 
> 时间：2012-10-29T08:56:46.953
> 
> 标签：android

我正在制作一个使用 Holo Dark 主题看起来很酷的应用程序。我已将 XML 设置为：

```
<style name="AppTheme" parent="android:Theme.Holo" /> 
```

它仍然不起作用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-29T09:07:43.027

确保你在**values-v14/styles.xml中声明了这个**

```
<style name="AppTheme" parent="android:Theme.Holo" /> 
```

# objective-c - 如何比较字符串和整数？

> ID：13118460
> 
> 赞同：-3
> 
> 时间：2012-10-29T08:57:19.143
> 
> 标签：objective-c, ios, cordova

我对目标 c 基本上一无所知，但是我如何做一个 if 语句来查看 SourceTypeString 是等于 1 还是等于 2？

```
 NSString* sourceTypeString = [arguments objectAtIndex:2];
            UIImagePickerControllerSourceType sourceType = UIImagePickerControllerSourceTypeCamera; // default
            NSLog(@"my ns string = %@",sourceTypeString);
  //NEWBIE PART
        if ((sourceTypeString == 1))
            {
            NSLog(@"equals 1");
                sourceType = (UIImagePickerControllerSourceType)[sourceTypeString intValue];
            } else {
            NSLog(@"equals 2");
            sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
        }
   //NEWBIE PART 
```

我的代码崩溃并给了我

```
my ns string = 1
(lldb) 
sourceTypeString    __NSCFNumber *  0x0013bf80 (int)1 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-29T09:01:18.993

```
if ([sourceTypeString intValue] == 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T08:59:28.337

如果可以使用给定的字符串，您可以调用`intValue`an`NSString`以将其值作为 an 来获取。`int`然后你可以比较这些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T09:00:41.770

您不能直接将整数与字符串进行比较。但是，您可以使用 NSString`isEqualToString`来检查第一个字符串值是否等于数字的字符串值。

```
if ([sourceTypeString isEqualToString:@"1"]) {
    //
} 
```

# iphone - 移动根视图控制器的框架，包含一个标签栏

> ID：13118461
> 
> 赞同：1
> 
> 时间：2012-10-29T08:57:21.197
> 
> 标签：iphone, ios, ios5, ios4

该应用程序有一个`Tabbar Controller`作为其`rootViewController`. 现在的要求是单击 中的按钮`navigation bar`，另一个视图应该在没有任何标签栏的情况下进入屏幕的一半，而另一半应该具有包含 的原始视图`tab bar`。这可以创建吗？任何帮助，将不胜感激。

编辑1：

我确实尝试过

```
[UIApplication sharedApplication].keyWindow.rootViewController.view.frame = CGRectMake(); 
```

但问题是，由于整个窗口框架正在移动，因此不会看到另一个视图。

编辑2：

我添加了要求的虚拟图片。![在此处输入图像描述](../Images/c1e7604112f61dea5bb00852b50d10eb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:12:37.073

通过继承 UIView 创建一个自定义视图，并在前半部分在当前视图控制器中显示它。

如果需要，您可以使用 UIKit 动画来为视图设置动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:31:57.437

终于找到了解决办法。单击按钮时，

```
objThird.view.frame = CGRectMake(120, 0, 320, 480);

UIView *windowVIew = [self.tabBarController.view superview];
[windowVIew addSubview:objThird.view];
self.tabBarController.view.frame = CGRectMake(-200, 0, 320, 480); 
```

`objThird`=按下按钮时我想要的新视图对象。 `self.tabBarController.view superview`= 为您提供窗口视图。因此，现在您可以将视图添加到窗口中。

其余的只是玩视图的框架。

# mysql - 随机删除未知数量的记录

> ID：13118466
> 
> 赞同：2
> 
> 时间：2012-10-29T08:57:56.703
> 
> 标签：mysql, random, conditional, sql-delete

我有一张桌子，名为`items`.
结构是： `{name, id, category_id}`

表中有未知数的记录，我需要将每个类别的记录数限制为最大数，例如 20。

### 伪

```
DELETE FROM items
WHERE (SELECT COUNT(category_id) FROM items)> 20
LIMIT (SELECT COUNT(category_id) FROM items) - 20 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T05:42:03.297

```
DELETE FROM items 
WHERE (category_id,id) not in (
  SELECT category_id, id FROM items  a WHERE id IN (
     SELECT id FROM items s 
     WHERE a.category_id = s.category_id
     ORDER BY category_id LIMIT 20) 
  ORDER BY  id) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T05:57:31.570

如果您有一个大表，最有效的方法是重新创建该表：

```
create table items_temp like items;
INSERT into items_temp (id, category_id, ... ) 
  SELECT id, category_id, ... from items orig
  WHERE id in (
     SELECT id from items items_select
     WHERE orig.category_id = items_select.category_id
     ORDER by category_id LIMIT 20
     );
RENAME table items to items_old, items_temp to items; 
```

**编辑：** `TRUNCATE table items_old` 不要删除 - 这是我们试图避免的 - 删除实际上会删除每一行并遵守外部约束，这将需要如此多的 cpu 和 IO，truncate 不会这样做。

否则，您很可能会在删除阶段关闭您的数据库。如果是少量数据，没什么大不了的。

# ruby-on-rails - 处理 Rails 中的复杂 GET 参数

> ID：13118467
> 
> 赞同：1
> 
> 时间：2012-10-29T08:58:06.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3, get, form-for, ransack

我正在尝试通过 GET 将参数传递给使用 ransack 的表单，它通常可以正常工作，只是当我尝试合并它时 params[:q] 会导致问题。

控制器（使用[ransack](https://github.com/ernie/ransack)）

```
 def index
    @search = Record.ransack(params[:q])
    @records = @search.result.page(params[:page])
  end 
```

看法

```
<ul>
  <% Genre.all.each do |genre| %>
    <% category_count = @search.result.joins(:genre).where("genres.id = ?", genre.id).size %>
    <% unless category_count == 0 %>
        <li>
            <%= link_to genre.name, params.merge(:"q[genre_name_eq]" => genre.name) %> (<%= category_count %>)
        </li>
    <% end %>
  <% end %>
</ul> 
```

但我不断重复：

```
q[genre_name_eq]=Rockabilly&q[genre_name_eq]=Rockabilly 
```

如果没有 q[]，它会正确管理参数，覆盖前一个参数。

还尝试`params[:q].merge(:genre_name_eq)`了在没有 q[] 时会导致问题，并且它也不起作用，给我`genre_name_eq=`并且没有 q[]

我还能如何处理 q[] 以便它替换值而不是多次复制它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:14:08.380

**编辑**（编辑后）

`params`是一个哈希，而不是一个简单的查询字符串。如果要更新嵌套值，则必须更新嵌套哈希。

首先确保`params[:q]`存在并且是一个哈希（在控制器中）

```
params[:q] ||= {} 
```

然后只`q`在视图中更新

```
<% params[:q].update :genre_name_eq => genre.name %>
<%= link_to genre.name, params %> 
```

# servlets - spring-flex 1.5.2 JUnit 测试错误 servletContext null

> ID：13118477
> 
> 赞同：1
> 
> 时间：2012-10-29T08:58:40.443
> 
> 标签：servlets, junit4, servletconfig, spring-flex

我的项目 flex 4 + spring-flex 1.5.2 + spring 3.1 + hibernate 3.6(jpa2.0)，可以在浏览器中运行，但不适用于 JUnit4。

**JUnit 错误：**

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name '_messageBrokerDefaultHandlerMapping': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '_messageBroker': Invocation of init method failed; nested exception is org.springframework.beans.factory.BeanInitializationException: MessageBroker initialization failed; nested exception is java.lang.NullPointerException
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:93)
at com.wfm.web.TestDao.testGetBaseDao(TestDao.java:17)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name '_messageBroker': Invocation of init method failed; nested exception is org.springframework.beans.factory.BeanInitializationException: MessageBroker initialization failed; nested exception is java.lang.NullPointerException
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.AbstractBeanFactory.isSingleton(AbstractBeanFactory.java:408)
at org.springframework.context.support.AbstractApplicationContext.isSingleton(AbstractApplicationContext.java:1113)
at org.springframework.web.servlet.handler.AbstractUrlHandlerMapping.registerHandler(AbstractUrlHandlerMapping.java:285)
at org.springframework.web.servlet.handler.SimpleUrlHandlerMapping.registerHandlers(SimpleUrlHandlerMapping.java:129)
at org.springframework.web.servlet.handler.SimpleUrlHandlerMapping.initApplicationContext(SimpleUrlHandlerMapping.java:104)
at org.springframework.context.support.ApplicationObjectSupport.initApplicationContext(ApplicationObjectSupport.java:119)
at org.springframework.web.context.support.WebApplicationObjectSupport.initApplicationContext(WebApplicationObjectSupport.java:72)
at org.springframework.context.support.ApplicationObjectSupport.setApplicationContext(ApplicationObjectSupport.java:73)
at org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:117)
at org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:92)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1448)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
... 33 more
Caused by: org.springframework.beans.factory.BeanInitializationException: MessageBroker initialization failed; nested exception is java.lang.NullPointerException
at org.springframework.flex.core.MessageBrokerFactoryBean.afterPropertiesSet(MessageBrokerFactoryBean.java:207)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
... 52 more
Caused by: java.lang.NullPointerException
at org.springframework.flex.config.FlexConfigurationManager.getMessagingConfiguration(FlexConfigurationManager.java:107)
at org.springframework.flex.core.MessageBrokerFactoryBean.afterPropertiesSet(MessageBrokerFactoryBean.java:141)
... 54 more 
```

![为什么 servletConfig.getServletContext() 为空？](../Images/306c717ec60f03a1eaf63ad4a4ed6869.png)

**我的persistence.xml**

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence 
    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
version="2.0">
<persistence-unit name="welfare" transaction-type="RESOURCE_LOCAL"/> 
```

**我的 applicationContext.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:jdbc="http://www.springframework.org/schema/jdbc" xmlns:context="http://www.springframework.org/schema/context"
xmlns:flex="http://www.springframework.org/schema/flex"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
http://www.springframework.org/schema/flex http://www.springframework.org/schema/flex/spring-flex-1.5.xsd">

<context:annotation-config />

<context:component-scan base-package="com.wfm.web" />

<bean
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:resources.properties</value>
        </list>
    </property>
</bean>

<bean id="dataSource"
    class="org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy">
    <property name="targetDataSource">
        <bean class="org.logicalcobwebs.proxool.ProxoolDataSource">
            <property name="driver" value="${db.driver.class}" />
            <property name="driverUrl" value="${db.url}" />
            <property name="user" value="${db.username}" />
            <property name="password" value="${db.password}" />
            <property name="maximumConnectionCount" value="${proxool.maxConnCount}" />
            <property name="minimumConnectionCount" value="${proxool.minConnCount}" />
            <property name="statistics" value="${proxool.statistics}" />
            <property name="simultaneousBuildThrottle" value="${proxool.simultaneousBuildThrottle}" />
            <property name="trace" value="${proxool.trace}" />
        </bean>
    </property>
</bean>

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="persistenceXmlLocation" value="classpath:META-INF/jpa-persistence.xml" />
    <property name="persistenceUnitName" value="welfare" />
    <property name="persistenceProvider" ref="persistenceProvider" />
    <property name="jpaVendorAdapter" ref="jpaVendorAdapter" />
    <property name="jpaDialect" ref="jpaDialect" />
    <property name="jpaProperties">
        <props>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
            <prop key="javax.persistence.validation.mode">none</prop>
            <prop key="hibernate.temp.use_jdbc_metadata_defaults">false</prop>
        </props>
    </property>
</bean>

<bean id="persistenceProvider" class="org.hibernate.ejb.HibernatePersistence" />
<bean id="jpaDialect" class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />
<bean id="jpaVendorAdapter"
    class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
    <property name="database" value="ORACLE" />
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

<tx:annotation-driven transaction-manager="transactionManager" />

<flex:message-broker />
<bean class="org.springframework.flex.servlet.MessageBrokerHandlerAdapter" /> 
```

**我的配置文件有问题吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:14:40.767

我发表评论`<flex:message-broker />`...它工作正常..它无法找到servletconfig ..

解决方案2：因此将注释添加到您的测试类

@WebAppConfiguration

编辑1：其他方法你可以看看这里的春天人的答案.. [http://forum.springsource.org/showthread.php?74055-Junit4-errors-with-Application-Context-and-BlazeDS](http://forum.springsource.org/showthread.php?74055-Junit4-errors-with-Application-Context-and-BlazeDS)

因此，您需要模拟 Web 请求才能使消息代理初始化成功。

# html - 基于滚动识别iframe中的html内容

> ID：13118478
> 
> 赞同：0
> 
> 时间：2012-10-29T08:58:41.363
> 
> 标签：html, iframe, scroll

我有一个包含 HTML 内容的 Iframe，每个行集都有一个 div。我想根据移动的滚动捕获 Iframe 视图中第一行的 div id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:10:49.007

您可以使用滚动偏移（`document.body.scrollTop`）结合`elementFromPoint(x,y)`

[document.elementFromPoint](https://developer.mozilla.org/en-US/docs/DOM/document.elementFromPoint)

# mysql - 按日期获取 VARCHAR 字段值的总和

> ID：13118483
> 
> 赞同：0
> 
> 时间：2012-10-29T08:59:02.333
> 
> 标签：mysql, select, sum, varchar

我有 2 个具有以下结构的表：

```
CREATE TABLE IF NOT EXISTS `campaigns` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=6 ;

CREATE TABLE IF NOT EXISTS `campaign_stats` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `id_campaign` int(11) NOT NULL,
  `day` int(11) NOT NULL,
  `cost` varchar(255) NOT NULL,
  `conv` int(11) NOT NULL,
  `cost_conv` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1457 ; 
```

现在`cost`and`cost_conv`字段是美元值，例如`12.13`or `143.00`。

该`day`字段包含存储为 INT 的 unix 时间戳。

我要做的是获取昨天的 、 和字段的总和`cost`，`conv`并将`cost_conv`它们输出到 HTML 表中。

这是我的代码：

```
<h2>Yesterday</h2>

<?php

$sql = mysql_query("
                    select c.name,
                    (select sum(conv) from campaign_stats where id_campaign=c.id and day=date(from_unixtime(day) - interval 1 day)) as num_conv,
                    (select sum(cast(cost as float)) from campaign_stats where id_campaign=c.id and day=date(from_unixtime(day) - interval 1 day)) as num_cost,
                    (select sum(cast(cost_conv as float)) from campaign_stats where id_campaign=c.id and day=date(from_unixtime(day) - interval 1 day)) as num_cost_conv
                    from campaigns as c
                    order by c.name
                    ") or die(mysql_error());

if (mysql_num_rows($sql) == 0)
{
    echo '<p>No campaign information to display.</p>';
}
else
{
    echo '<table cellpadding="10" cellspacing="1" border="0" width="100%">';
    echo '<tr>';
    echo '<th>Account</th>';
    echo '<th>Conversions</th>';
    echo '<th>Cost</th>';
    echo '<th>Cost per Conversion</th>';
    echo '</tr>';

    while ($row = mysql_fetch_assoc($sql))
    {
        foreach ($row as $k => $v)
            $$k = htmlspecialchars($v, ENT_QUOTES);

        echo '<tr class="'.(($count % 2) ? 'row1' : 'row2' ).'">';
        echo '<td>'.$name.'</td>';
        echo '<td>'.$num_conv.'</td>';
        echo '<td>'.$num_cost.'</td>';
        echo '<td>'.$num_cost_conv.'</td>';
        echo '</tr>';

        $count++;
    }

    echo '</table>';
}

?> 
```

它给了我以下错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'float)) from campaign_stats where id_campaign=c.id and day=date(from_unixtime(da' at line 2 
```

老实说，我什至不确定我是否正确编写了查询。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:31:20.083

首先，我不喜欢您的查询的编写方式，您可以用单个联接替换子查询。您的查询可能是这样的：

```
select
  campaigns.name,
  sum(campaign_stats.conv) as num_conv,
  sum(cast(campaign_stats.cost as float)) as num_cost,
  sum(cast(campaign_stats.cost_conv as float)) as num_cost_conv
from
  campaigns inner join campaign_stats on campaigns.id=campaign_stats.id_campaign
where
  date(campaign_stats.day) = date_sub(date(now()),interval 1 day)
group by
  campaigns.name
order by
  campaigns.name 
```

# tomcat - Vaadin 应用程序创建导致内存泄漏的线程

> ID：13118484
> 
> 赞同：1
> 
> 时间：2012-10-29T08:59:10.957
> 
> 标签：tomcat, memory-leaks, threadpool, vaadin, catalina

我的 Vaadin 应用程序有问题，它创建了一些线程，Tomcat 说它们可能导致内存泄漏问题。我不会以明确的方式创建线程。

```
SEVERE: The web application [/MyApp] appears to have started a thread named [Timer-0] but has failed to stop it. This is very likely to create a memory leak.
ott 29, 2012 9:52:00 AM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks 
```

和：

```
SEVERE: The web application [/MyApp] created a ThreadLocal with key of type [org.apache.axiom.util.UIDGenerator$1] (value [org.apache.axiom.util.UIDGenerator$1@1f7b22b]) and a value of type [org.apache.axiom.util.UIDGeneratorImpl] (value [org.apache.axiom.util.UIDGeneratorImpl@d25438]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.
ott 29, 2012 9:52:00 AM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [/MyApp] created a ThreadLocal with key of type [org.apache.axiom.util.UIDGenerator$1] (value [org.apache.axiom.util.UIDGenerator$1@1f7b22b]) and a value of type [org.apache.axiom.util.UIDGeneratorImpl] (value [org.apache.axiom.util.UIDGeneratorImpl@975b37]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak. 
```

这让应用程序非常不稳定。

在开发过程中，这是我第一次遇到此错误。

怎样才能避免这些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:22:43.617

这些问题都与 Vaadin 没有任何关系。

您（或您正在使用的库）已创建`java.util.Timer`但尚未取消它。

此外，“Threadlocal”问题似乎是由 Apache Axiom 引起的，并且似乎在 Axiom 1.2.12 中得到了修复（参见[http://ws.apache.org/axiom/](http://ws.apache.org/axiom/)和[http://ws.apache.org /公理/](http://ws.apache.org/axiom/) )

# excel - 同时过滤数据透视表/excel上的数据条目

> ID：13118486
> 
> 赞同：0
> 
> 时间：2012-10-29T08:59:12.297
> 
> 标签：excel, filter, pivot-table, simultaneous

我需要在 excel 中创建一个数据透视表来显示哪些 xml 页面包含哪些变量。

这些页面看起来像：

```
|数据组|变量|值|XmlPageName|
|美国广播公司 | 变量| 22| 第A1页|
|美国广播公司 | 变化| 33| 第A1页|
|美国广播公司 | 变化| 44| 第A2页|
|美国广播公司 | 变量| 80| 第A3页|
|美国广播公司 | 变化| 12| 第A3页|
|美国广播公司 | 变化| 80| 第A4页|

```

首先，我想过滤 Varx = 22 上的数据。此外，我想在 Vary = 33 上应用另一个过滤器，以向我显示同时包含的所有 XmlPageName 条目（VarX = 22 和 VarY = 33）。
在这种情况下，它将是 pageA1。
我无法执行此操作，因为我无法同时应用 2 个过滤器。
我无法通过常规过滤和数据透视表来做到这一点。

我要提一下，excel文件很大，所以“眼球”过滤需要太多时间。

关于如何实现这一目标的任何想法？

非常感谢，

多拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:50:32.250

您正在尝试做的事情似乎很简单：

您可以使用数据过滤器： ![数据过滤器1](../Images/9daaabe22384d305756ce450dcdb96d1.png)

![数据过滤器2](../Images/4c1fe584ec4ed52d780db68416990051.png)

![数据过滤器3](../Images/4caeb027e4e46fa5025921e1dc079c50.png)

尽管我不确定您所说的“眼球”过滤是什么意思。祝你好运。

# php - 在 file_get_contents 中定义变量

> ID：13118487
> 
> 赞同：1
> 
> 时间：2012-10-29T08:59:12.173
> 
> 标签：php

我有这个代码

```
<?php
$a1 = 'http://www.hamooz.com';
$a2 = 'http://www.myegy.com';
$a3 = 'http://www.tech-wd.com/wd';
$num = rand(1,3);

$numb =  '$a'.$num;

echo file_get_contents($numb);
?> 
```

问题看起来像：

> 警告：file_get_contents($a3) [function.file-get-contents]：无法打开流：第 9 行的 C:\xampp\htdocs\ttt\bessah.php 中没有这样的文件或目录

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T09:03:58.443

您需要这样做`$numb = ${'a'.$num};`，但使用数组解决方案作为@Pekka 的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T09:00:58.677

可变变量是一种不好的做法。请改用数组。

```
<?php

$a = array();
$a[] = 'http://www.hamooz.com';
$a[] = 'http://www.myegy.com';
$a[] = 'http://www.tech-wd.com/wd';
$num = rand(0,2);

$numb = $a[$num];

echo file_get_contents($numb);
?> 
```

然而，对于这个特定的任务，还有一个[捷径](http://php.net/array_rand)：

> array_rand ( )
> 
> 从数组中选择一个或多个随机条目，并返回随机条目的键（或多个键）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T09:10:01.533

我同意@Pekka，你会让你的代码复杂化，但如果你绝对想使用动态变量，你可以这样做：

```
<?php
$a1="hello";
$b=1;
echo ${"a$b"};
?> 
```

# spring - 弹簧集成 | FTP - 文件适配器问题

> ID：13118496
> 
> 赞同：1
> 
> 时间：2012-10-29T09:00:01.070
> 
> 标签：spring, integration

我正在处理的应用程序有一个使用 Spring Integration 2.5 构建的集成层，它尝试使用 FTP 适配器从 FTP 服务器中提取一个 CSV 文件，并将其放到由文件适配器轮询的本地服务器上。因此，一旦文件被 ftp 下载，文件适配器就会将其传递给 Splitter，其中 CSV 文件被拆分为单独的记录并发送到下游进行进一步处理。

当拆分器有时看不到 FTP 适配器下载的文件时，会出现此问题。下面是配置详细信息和来自拆分器的那段代码，它试图检查文件是否存在，如果文件不存在则抛出用户定义的异常。

问题是它总是遇到异常。

```
 <ftp:inbound-channel-adapter id="ftpInbound" channel="ftpChannel"
        session-factory="ftpClientFactory"
        filename-regex="${ftp.server.remotefilename}"
        auto-create-local-directory="true" delete-remote-files="false"
        remote-directory="${ftp.server.remotefolder}"
        local-directory="file:${ftp.server.localfolder}">
        <si:poller ref="FTPPoller"></si:poller>
    </ftp:inbound-channel-adapter>
    <si:channel id="ftpChannel">
        <si:queue />
    </si:channel>

    <file:inbound-channel-adapter id="fileInboundAdapter"
        channel="fileIn" directory="file:${ftp.server.localfolder}"
        filename-pattern="${ftp.server.localfilename}"
        auto-create-directory="true" prevent-duplicates="false">
        <si:poller ref="filePoller"></si:poller>
    </file:inbound-channel-adapter>

    <si:channel id="fileIn" />

    <si:splitter input-channel="fileIn" output-channel="csvRowsIn" ref="inboundFileRowSplitter" method="extractRows" /> 
```

* * *

```
public class InboundFileRowSplitter {

    @Splitter
    public Collection<String[]> extractRows( @Headers
    Map<String, Object> headers, File keywordFile ) {

       >>Other Processing<<

        return processKeywordsFile( keywordFile );
    }

    private Collection<String[]> processKeywordsFile( File keywordFile ) {

       try {
            if (keywordFile.exists()) {

             >>Other Processing<<

            } else {
                throw new ResourceLoaderException( "............................" );
            }

        } catch (Exception e) {
            >>Other Processing<<
        } finally {
           >>Other Processing<<
        }

    } 
```

在下面的代码中，它在定义的期望 ResourceLoaderException 下抛出。任何有关如何解决此问题的建议都将不胜感激，它的生产问题和早期响应真的很重要。

# jquery - MSIE7 中的 JSONP 对象错误

> ID：13118498
> 
> 赞同：1
> 
> 时间：2012-10-29T09:00:17.040
> 
> 标签：jquery, internet-explorer, jsonp

我的 JSONP 调用在 MSIE7 中出现对象错误。我已经修复了我得到的 JSON 对象。（它之前没有引号之间的键值）有了这个我认为我已经修复了它，因为它确实可以从静态文件中工作。但是，当我开始工作并再次对其进行测试时，它再次返回了对象错误。

我也尝试使用普通 &.getJSON(url, callback) 并添加了 ?callback=? 到网址，但无济于事

这是调用本身：

```
$.ajax({
  type:'GET',
  url: url,
  error:function (xhr, ajaxOptions, thrownError) {
alert(xhr.statusText);
alert(xhr.responseText);
alert(xhr.status);
alert(ajaxOptions);
alert(url);
alert(thrownError);
  },
  success:successHandler,
  dataType:'jsonp',
  jsonp:'_jsonp',
  jsonpCallback:'jsonpCallback',
  cache:true
}); 
```

和 json-object 的片段

```
jsonpCallback({"positionInfoContainer":[{
"familyId":1,
"filterId":14,
"labels":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157],
"positionInfoType":"TopConserved",
"values":[14.8284314,47.9779412,42.7696078,17.8921569,14.084507,56.4605021,30.6184936,26.2094305,62.1406728,48.2568807,35.79719,21.3064713,23.5365854,16.2606577,17.5790754,18.2260024,23.8095238,26.6826923,22.7354529,18.2963407,35.7271095,26.2843489,27.1479714,42.1334923,39.3452381,27.0833333,26.2938727,25.2825699,45.8753709,22.3606168,12.9300119,26.8683274,58.4469472,45.1096621,54.5346769,89.2772512,84.7748815,21.5047393,48.6390533,89.5266272,62.8622117,98.2321744,19.8823529,29.9059929,95.2996475,25.1465416,42.170088,25.6154748,97.6567077,96.3700234,40.2339181,31.5789474,95.1546994,85.0554583,46.4723032,26.6472303,25.7292882,49.0686845,24.1860465,75.9001161,35.5981417,45.9349593,21.5652174,45.6018519,32.2916667,41.4591778,32.8894036,27.5622467,66.7631731,48.377752,35.718441,19.7674419,48.0232558,35.6020942,46.9565217,47.8235636,31.5299593,29.2952825,22.6031377,39.9186519,23.0679837,22.5,37.8488372,17.5305766,29.5749705,31.3679245,84.9468713,30.7328605,35.262847,47.9031305,59.704142,45.7617072,77.6066351,42.2894425,32.3634204,73.9440809,36.7261905,40.4407385,20.8358571,16.0120846,23.095526,47.9758308,55.4682779,17.9564692,52.6634383,53.7855845,44.4848485,22.1952699,23.1655549,24.211165,15.9684274,49.6660595,90.0609756,25.6253813,14.5731707,47.008547,43.2844933,15.0701647,23.6552567,28.247549,20.5555556,51.0166359,60.2595797,34.6510191,46.3821892,81.5298507,75.4057428,33.7515684,31.1279143,73.6277603,34.0290955,25.3164557,68.504436,79.2116974,25.9070656,37.0772176,34.7826087,18.5137732,33.1410256,28.0128205,18.7902188,50.1295337,25.2111761,46.0286458,31.3559322,18.5016287,21.577575,58.7084149,28.7542088,38.5185185,36.6644159,65.8503401,57.3960464,24.467354,85.4482759,43.8365651,45.0174216]
}]
}); 
```

当我使用静态文件而不是 dataType:"jsonp" - dataType:"text json" 并将 jsonp 和 jsonpCallback 注释掉时，此代码段有效。

此代码在 Opera、Chrome 和 Firefox 中完美运行。（虽然所有最新版本）

# android - 使用 Android 代码删除另一个应用程序的缓存数据

> ID：13118501
> 
> 赞同：1
> 
> 时间：2012-10-29T09:00:24.217
> 
> 标签：android

```
Process p1;
p1=Runtime.getRuntime().exec("rm -rf /sdcard/<any folder>"); 
```

此代码适用于 sdcard，删除所需的文件夹，但不适用于根目录

```
p1=Runtime.getRuntime().exec("rm -rf /data/data/<any folder>"); 
```

这段代码没有任何建议？我植根了我的手机并获得了超级用户访问权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:07:14.067

1.  访问`/sdcard`不受限制。任何进程都可以读取或写入它。对另一端的访问`/data/data/*`仅限于拥有的应用程序。

2.  有根电话并不意味着您的所有应用程序都具有根访问权限。您必须授予对您的应用程序的 root 访问权限，然后才允许它弄乱您的手机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:46:54.507

您必须在删除文件之前明确请求超级用户权限：

```
String command = "rm -rf /";    // your command

Process p = Runtime.getRuntime().exec( "su" );
DataOutputStream os = new DataOutputStream(p.getOutputStream());

os.writeBytes(command + "\n");
os.writeBytes("exit\n");
os.flush(); 
```

将其包装在异常处理程序中以处理各种错误（未安装 SU、错误命令、IOException、InterruptedException 等）也是一个好主意

# iphone - SCardTransmit() 总是返回 6d00

> ID：13118504
> 
> 赞同：0
> 
> 时间：2012-10-29T09:00:32.110
> 
> 标签：iphone, smartcard, smartcard-reader, emv

我正在尝试读取信用卡上的姓名、卡号、有效期等。但总是`6d00`在调用时返回`SCardTransmit`。

我正在使用预定义的 AID，我用谷歌搜索它是有效的（如果我错了，请纠正我）。这是：

```
AID_LIST = { 
  "A0000000421010",
  "A0000000422010",
  "A0000000031010",
  "A0000000032010",
  "A0000000041010",
  "A0000000042010",
  "A00000006900",
  "A0000001850002"
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-31T01:41:26.743

我不熟悉您使用的这个 API，但您必须发送以下 APDU 命令序列：

1.  SELECT PSE（用于联系人卡片），由 EMV 在第 1 册第 11.3 节中指定。一个例子是“00A404000E315041592E5359532E444446303100”
2.  返回 SFI 后，您可以阅读记录以找出支持的 AID。但是，您可以按照第 1 册 12.3.3 中的指南，使用您指定的预定义 AID 并调用 SELECT AID 通过“反复试验”来做到这一点。
3.  您可以调用命令“GET PROCESSING OPTIONS”来查看哪些记录可供读取，或者您可以调用“READ RECORD”命令读取所有可能的记录，以扫描可能的记录。在其中一个记录中，您将拥有您正在寻找的数据。

通常在同一记录中，您将存储持卡人姓名、PAN 和 Track 2 任意数据（其中包含到期日期）。

标签列在第 3 册中。

应用程序主帐号 (PAN) - 5A 持卡人姓名 - 5F20 Track 2 可自由支配数据 - 9F20

关于 Track 2 的有用信息： [http ://en.wikipedia.org/wiki/Magnetic_stripe_card](http://en.wikipedia.org/wiki/Magnetic_stripe_card)

上述序列的示例： [http ://code.google.com/p/javaemvreader/wiki/ExampleOutput](http://code.google.com/p/javaemvreader/wiki/ExampleOutput)

EMV 规格： [http ://www.emvco.com/specifications.aspx?id=223](http://www.emvco.com/specifications.aspx?id=223)

ISO 7816 中列出了可能的返回码，例如 61XX、9000 等。这里有一个很好的概述： http: [//www.cardwerk.com/smartcards/smartcard_standard_ISO7816-4_5_basic_organizations.aspx](http://www.cardwerk.com/smartcards/smartcard_standard_ISO7816-4_5_basic_organizations.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T07:52:18.537

您需要查找/购买 ISO 7816、EMV 规范和您的供应商卡规范，否则您不知道自己在做什么。

# symfony - 如何使用 Symfony 2 Dom Crawler 按 id 过滤？

> ID：13118508
> 
> 赞同：10
> 
> 时间：2012-10-29T09:00:41.500
> 
> 标签：symfony, phpunit, functional-testing

这有效

```
$this->assertEquals(1, $crawler->filter('.elementClass')->count()); // filter by class 
```

但是，这似乎不起作用。

```
$this->assertEquals(1, $crawler->filter('#elementId')->count()); // filter by id 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-29T09:31:07.503

Symfony2 DOM Crawler 过滤器内部使用 DOMXPath，因此您可以在[此线程上找到问题的答案](https://stackoverflow.com/questions/230592/xpath-query-with-php)

过滤器查询应该是这样的（注意下面的代码未经测试，我相信上面的链接会帮助你）

```
//*[@id='elementId'] 
```

# postscript - 提供类似 typekit 的后记大纲

> ID：13118509
> 
> 赞同：3
> 
> 时间：2012-10-29T09:00:46.310
> 
> 标签：postscript, webfonts, typekit

Typekit 现在为其某些字体提供后记大纲。这使得字体在 Windows 上的渲染效果更好。如果我将我托管的 museo500 和 typekit 版本进行比较，他们的版本在我看来要好得多。

[http://blog.typekit.com/2011/09/15/improved-windows-rendering-for-more-typekit-fonts/](http://blog.typekit.com/2011/09/15/improved-windows-rendering-for-more-typekit-fonts/)

有没有人在他们自己的托管字体上复制了这个？我看了一下 font-forge，它看起来好像可以将 Truetype 字体转换为 PostScript，但我想我会先问一下，看看是否有人在提交时间之前有任何建议/建议。- 希望没关系！我会在这里发布我得到的任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-12T07:56:48.047

你问这个问题已经有好几年了，它应该得到一个答案。但我不清楚你在问什么。我会尝试多种解释。

实际上是一个问题的一句话是，“有没有人在他们自己的托管字体上复制了这个？” 我不清楚“这个”指的是哪个概念。

如果您问，“是否有人编写代码以 PostScript 大纲形式向 Windows GDI 计算机提供 OpenType 字体”，我非常有信心很少有人会回答“是”这个问题。以 TypeKit 的方式提供 OpenType 字体非常复杂。我知道，我曾经为编写此类代码的 Adob​​e Systems 部门工作。

如果您要问，“是否有任何内容发布者将使用他们已经为自己服务的 OpenType 字体格式化的内容的质量与使用 TypeKit 提供的可比字体格式化的相同内容的质量进行比较”，我想现在答案是“是的，很多”，但是可以回答的人是内容作者，他们不会在 Stack Overflow 这样的编程网站上闲逛。

如果您要问，“是否有任何字体开发人员目前将其字体设计发布为具有 TrueType 轮廓的 OpenType 字体转换为具有 PostScript 轮廓的 OpenType 字体，并将 TypeKit 提供的字体质量与以其他方式提供的原始字体进行比较”……。同样，答案可能是“是”。Maaaybe 你会在 Stack Overflow 上找到那些字体开发者。他们更有可能出现在以字体为中心的网站上。

我希望其中一种解释与您的实际要求相符。而现在，这个问题不再没有答案。

# eclipse - 在eclipse中导入maven项目-文件夹结构不符合预期

> ID：13118512
> 
> 赞同：8
> 
> 时间：2012-10-29T09:00:58.147
> 
> 标签：eclipse, maven-2, import, m2eclipse

我是 Maven 项目的新手。遵循的步骤：

1.  我尝试通过`File`->在 Eclipse 中导入一个 Maven 项目`Import`。
2.  给出了 svn checkout 项目的根目录的位置。它识别了该`pom.xml`文件。
3.  点击`Finish`。项目导入和所有文件都放在了eclipse的Project Explorer中。

### 问题：

目录结构不是java包的结构，它只是一个普通的文件夹结构。我无法快速浏览代码，即获取声明、对方法的不同调用以及所有代码浏览快捷方式。它给出了一个错误说..项目不在构建路径中。在右键单击项目时，“构建路径”中没有选项。

请让我知道，我在这里做错了什么。如何将 maven 项目正确导入 eclipse 并进行设置？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-29T09:06:47.100

跑 ：

```
mvn eclipse:clean 
```

然后

```
mvn eclipse:eclipse 
```

它应该是它的旧自我，如果不在 Eclipse 中刷新项目，那就应该这样做

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-12-18T06:51:56.843

我遇到过类似的问题。我已经解决了这个问题：

右键单击项目->属性->项目构面->将其转换为构面形式

并且您可以根据需要获取文件夹结构

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T07:06:19.077

我遇到了同样的问题，可以通过以下步骤解决

1.  首先确保您能够进行 Maven 清理或安装。只是为了确保项目设置正常工作。
2.  右键单击项目。
3.  导航到**Maven** >**更新项目配置。**

这应该可以解决问题。希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-26T05:24:33.483

我解决了这个问题：

1.  转到窗口 > 首选项 > 构建路径
2.  在输出和源文件夹下选择项目
3.  删除/备份原始项目并创建/导入相同的项目。

您的问题将得到解决。

# oop - 为什么要在开发应用程序时遵循面向对象编程的原则？从用户的角度来回答

> ID：13118514
> 
> 赞同：-4
> 
> 时间：2012-10-29T09:01:04.843
> 
> 标签：oop, design-patterns

我最近在一次采访中被问到这个问题，想听听各位的回答。我讨论了通过封装和继承可以实现的代码可重用性和安全性，但面试官似乎并不满意。他坚持使用基于 oop 原理开发的应用程序究竟如何使应用程序用户受益。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:08:02.010

依靠。纯粹主义者（和白痴）将对他们生成或遇到的每一个可能的代码位应用抽象。这在一些简单的事情中是完全没有必要的，例如从一小部分 PHP 中直接、简单的 MySQL 调用来记录站点访问。

但是，如果将 OOP 系统地应用于涉及大量信息混洗的大数据（例如在每次访问页面时对数百行数据进行排序），通常可以为您节省大量周期。何时使用 OOP 以及何时只编写程序代码是一个问题。OOP 需要时间和精力，并且可以由经验丰富的程序员维护，但是您需要问问自己，在内部做一件事的一小段代码上是否值得花那么多额外的麻烦。

有很多好文章 (http://berryllium.nl/2011/02/getters-and-setters-evil-or-necessary-evil/) 可以帮助您理解为什么 OOP 有时是不必要的，实际上是有害的.

# cloud-hosting - 谷歌驱动器和类似的云服务

> ID：13118523
> 
> 赞同：1
> 
> 时间：2012-10-29T09:01:31.473
> 
> 标签：cloud-hosting, google-drive-api, mobile-application, file-sharing

我有一个假设性问题。我可以使用一些云驱动器来存储内容并与许多用户共享吗？例如，我有一个谷歌帐户，其中包含一组文件（例如几千兆字节）和一些安装谷歌驱动器并访问它包含的文件的应用程序（例如 iOS 应用程序）。我找不到任何信息，无论它是否受到限制。也许你可以推荐一些其他的解决方案？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:55:42.700

您可以在 Google Drive 上创建共享文件夹，任何用户都可以通过在浏览器中打开 URL 来访问这些文件夹。可以在[此处](http://support.google.com/drive/bin/answer.py?hl=en&answer=2494822)找到有关与 Google Drive 共享文件夹的详细信息。

# c# - 建立 SignalR 连接时可以发送一些初始信息吗？

> ID：13118525
> 
> 赞同：0
> 
> 时间：2012-10-29T09:01:42.467
> 
> 标签：c#, javascript, asp.net-mvc-4, signalr

我知道我可以稍后发送这些数据`$.connection.send(value)`，但是我可以在 SignalR 连接建立期间发送一些初始值吗？

IE：

```
var con = $.connection(url);
con.start(value); 
```

或者也许使用连接字符串？喜欢：

```
var con = $.connection(url + '&data=' + data); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:24:27.050

取自[https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client](https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client)的文档：

```
connection.start(function() {
    console.log("connection started!");
});

connection.stop();

// The callback will be raised again!
connection.start(); 
```

看起来您可以在连接准备好后立即获得对连接的回调，并希望通过**this**对象引用使用它来进行第一次调用：

```
connection.start(function() {
    this.ServerMethodCall(someValue);
}; 
```

**编辑：添加示例代码**

# angularjs - IE9 AngularJs 问题：无法获取属性“nodeName”的值：对象为空或未定义未定义

> ID：13118526
> 
> 赞同：18
> 
> 时间：2012-10-29T09:01:53.017
> 
> 标签：angularjs

在 IE9 中使用 Angular js 加载页面时出现此错误。Chrom/FF 没有问题。

“无法获取属性 'nodeName' 的值：对象为 null 或 undefinedundefined”

任何指针都会有所帮助。我认为这是 Angular js 1.0.1 版本的一部分。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-17T17:52:10.930

当我不小心有以下非法标记时，我在 IE9 中遇到了这个错误。

```
<table>
   <h3>foo</h3>

    ..... blah

</table> 
```

也许运行 html lint 以确保您没有违反任何类似的规则。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-20T13:18:37.917

问题是：

```
<table>
    <tr ng-repeat="p in list">
        <td>{{p.f1}}</td> {{p.f2}}
    </tr>
<table> 
```

请记住，根据 HTML 规范，`<tr>`应该只包含标签而不是任何其他标签或原始文本。`<td>`现代浏览器（包括 IE 10）可以处理该错误，但在 IE 9 中，角度会引发错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-17T02:45:06.683

很可能你搞砸了里面的语法

```
<table> <SOMETHING> </table> 
```

我建议您从浏览器复制 DOM 并检查[https://validator.w3.org/check](https://validator.w3.org/check)。查找错误，例如：**文档类型不允许在此处使用元素“SOMETHING”；缺少“TH”、“TD”开始标签之一**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-25T18:54:37.353

对我来说，问题是 << 在返回超链接之前。我使用了 htmllint 并解决了除了 angular 的所有非法标记错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-21T09:32:00.247

对我来说，罪魁祸首是表格中的一个**thead**标签：

```
 <table>
   <thead>bla</thead>
    ...        
</table> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T15:18:32.920

我在 angular-perf.js 上遇到了这个错误。如果您添加条件注释以排除 IE，它将起作用，但您将无法在 IE 中使用 angular-perf。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-10T17:31:19.793

对我来说，这是在 div 内有一个表格行的情况。删除干预 div 后我就没事了。

```
<table>
  <div>
    <tr></tr>
  </div>
</table> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-11T12:23:24.900

我遇到了同样的问题，这是因为`<table>`我在 a 中放了一些`<h3>`未包裹的`<tr>`and `<td>`，而且，我有一些`<br>`and标签，为了的缘故，`<br/>`最好是。`<br />``XHTML`

# python - 关于多站点的总体思路

> ID：13118528
> 
> 赞同：1
> 
> 时间：2012-10-29T09:02:06.573
> 
> 标签：python, django, multiple-sites

我想在我的项目中实现多个站点的概念，为此我研究了 django 的官方**“[站点框架](https://docs.djangoproject.com/en/dev/ref/contrib/sites/?from=olddocs#module-django.contrib.sites)”**教程和其他教程。

但我有点困惑我应该从哪里开始，因为如文档中给出的那样，使用了多个站点 ID。但我像往常一样有一个。**在某些文档中，在HTTPD.conf**文件中进行了一些编辑

所以我从文档中不明白，我应该从哪里开始？

所以请任何人告诉我实施多站点的步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:51:15.353

这是非常简单的原理。您有 Site 模型，您可以在其中定义站点，然后在模型中引用此模型。假设我们创建了一个博客应用程序，您将拥有：

场地模型：

```
ID | domain             | name
1  | site-a.example.com | John's blog
2  | site-b.example.com | David's blog 
```

博客文章：

```
ID | site_id | title                         | ...
1  | 1       | Some title for John's article | ...
2  | 1       | Another post by John          | ...
3  | 2       | David's blog post             | ... 
```

这将如何部署在 Web 服务器上？您的博客应用程序代码对于每个博客都是相同的，因此您将其放置在 Python 路径中 site-a 和 site-b 安装可以导入它的某个位置（通常您创建一个 virtualenv 并在那里安装您的博客应用程序）。现在您为两个域创建两个虚拟网站 - site-a.example.com 和 site-b.example.com，并为每个站点创建一个单独的 django 项目（这更像是一个站点配置文件而不是常规项目）。现在，你怎么知道哪个项目是针对哪个博客的？您在指向此类博客的站点 ID 的每个项目设置中定义 SITE_ID 常量，并列出给定博客的所有文章，您将当前站点添加到过滤条件。

# objective-c - 错误的“presentingViewController”

> ID：13118529
> 
> 赞同：6
> 
> 时间：2012-10-29T09:02:17.900
> 
> 标签：objective-c, ios, uiviewcontroller

在我的`MainViewController`中，我通过这个展示了另一个视图控制器：

```
MessageViewController *messageController = [[MessageViewController alloc]initWithNibName:nil bundle:nil];

[messageController setModalPresentationStyle:UIModalPresentationFullScreen];
[messageController setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];

[self presentViewController:messageController animated:YES completion:nil];

[messageController release]; 
```

这将正确显示视图控制器。但是，当我尝试返回呈现视图控制器（在这种情况下应该是 ）时`MainViewController`，此代码不起作用：

```
if ([self.presentingViewController isKindOfClass:[MainViewController class]])
    [(MainViewController *)self.presentingViewController setCurrentViewTag:2];

[self dismissModalViewControllerAnimated:YES]; 
```

我删除了“if..”条件以强制它设置当前视图标签。发生错误，告诉我呈现的视图控制器似乎是`UINavigationController`：

```
[UINavigationController setCurrentViewTag:]: unrecognized selector sent to instance 0x8352a50 
```

谁能告诉我为什么会这样？这段代码以前可以工作，我不确定是什么改变使它停止正常工作。

**编辑**

这是更新的代码：

```
ReaderController *readerController = [[ReaderController alloc]initWithNibName:nil bundle:nil];
[readerController loadWhichViewToShow:2];

[self setDefinesPresentationContext:YES];

[readerController setModalPresentationStyle:UIModalPresentationFullScreen];
[readerController setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];

[self presentViewController:readerController animated:YES completion:nil];

[readerController release]; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-29T09:25:11.290

调用`[self presentViewController:messageController animated:YES completion:nil];`不一定使用您调用它的 vc 来呈现另一个 vc。默认情况下，它沿着 vc-hierarchy 向上传播，并在根视图控制器上呈现另一个 vc。这就是为什么在您的情况下，呈现视图控制器是`UINavigationController`.

如果你想强制你的 MainViewController 是呈现的 vc，你可以调用：

```
[self setDefinesPresentationContext:YES]; 
```

在显示 MessageViewController 之前，在 MainViewController 上。

编辑：如果其他人读到这个：`definesPresentationContext`似乎被窃听或文档错误。请参阅下面的评论和[Cocoa Builder](http://www.cocoabuilder.com/archive/cocoa/312150-presentingviewcontroller-docs-patently-false.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-03T19:42:03.287

[我对这个问题](https://stackoverflow.com/questions/8905961/modal-view-controller-not-calling-presenting-view-controllers-dismissmodalviewc/26185639#26185639)的回答的副本

从[Programming iOS 6, by Matt Neuburg](http://www.apeth.com/iOSBook/ch19.html)：

> 在 iPad 上，当呈现的视图控制器的 modalPresentationStyle 是 UIModalPresentationCurrentContext 时，必须决定哪个视图控制器应该是呈现的视图控制器的presentingViewController。这将确定哪个视图将被呈现的视图控制器的视图替换。这个决定涉及另一个 UIViewController 属性，definePresentationContext (a BOOL)。从 presentViewController:animated:completion: 被发送到的视图控制器开始，我们沿着父视图控制器链查找其定义PresentationContext 属性为 YES 的视图控制器。如果我们找到一个，那就是那个；它将是presentingViewController，并且它的视图将被呈现的视图控制器的视图替换。如果我们没有找到，

TL;DR
1\. 将所需设置`definesPresentationContext`为真`presentingViewController`
2\. 设置`modalPresentationStyle`为`UIModalPresentationCurrentContext`所需`presentedViewController`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-30T08:30:37.823

如果您似乎需要在 iOS 11 中设置三件事。

```
controller.modalPresentationStyle = UIModalPresentationCurrentContext;
controller.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
self.definesPresentationContext = YES;
[self presentViewController:controller animated:YES completion:nil]; 
```

# php - 为什么在尝试创建 simplexmlelement 对象时会看到此错误“无法将字符串解析为 XML”？

> ID：13118530
> 
> 赞同：0
> 
> 时间：2012-10-29T09:02:38.583
> 
> 标签：php, xml, apache, xml-parsing, simplexml

我有如下功能并出现错误`String could not be parsed as XML`

```
$category_feed_url = "http://www.news4u.com/blogs/category/articles/feed/";
$file = file_get_contents($category_feed_url);
$xml = new SimpleXMLElement($file);

foreach($xml->channel->item as $feed)
{
  echo $feed->link;
  echo $feed->title;
  ... 
```

为什么会发生此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:11:10.997

URL 指向一个 HTML 文档。

一个文档可能既是 HTML 又是 XML，但这个不是。

它失败了，因为您试图解析非 XML，就好像它是 XML 一样。

请参阅[如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)获取使用 PHP 解析 HTML 的指导。

不过，您似乎期待一个 RSS 提要，并且该文档不像一个或参考一个。该站点看起来相当垃圾，可能该 URI 曾经指向一个 RSS 提要，但该域现在已落入链接农场垃圾邮件发送者之手。如果是这样，您应该为您收集的信息找到替代来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:10:51.733

“字符串无法解析为 XML”，您的链接是一个 html 页面。

# asp.net - 如何限制对文件系统（ASP.NET Web 应用程序目录）中文件的访问？

> ID：13118531
> 
> 赞同：0
> 
> 时间：2012-10-29T09:02:40.470
> 
> 标签：asp.net, .net, file-io, web-applications, file-permissions

我正在开发一个 ASP.Net Web 应用程序。在那个用户可以上传文件，他们可以在需要时查看相同的文件。这些上传保存在文件系统中（路径：- **WebApp/Uploads/Docs**）。仅当用户是文档的所有者或上传时，才会将其提供给用户。

我的问题是：具有此 **WebApp/Uploads/Docs/Doc1.doc**
路径的文件只能由该文档的上传者/所有者访问。

必须限制其他应用程序用户访问此路径。

那么，**在将此文件提供给其他用户之前，我可以进行检查（用户是否为所有者）。？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:05:59.170

我会建议您将文档保留在网站目录之外，因为这会使它们暴露在未经授权的下载中。

至于您需要的检查，您可以为您的文档创建一个通用处理程序 (*.ashx)，该处理程序将验证文档所有者并将内容仅提供给允许的用户。

[HTTP 处理程序和 HTTP 模块概述](http://msdn.microsoft.com/en-us/library/bb398986%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:08:59.267

您可以通过 Web.config 在 web.config 下添加元素来实现这一点。

在元素中，添加配置元素和配置元素。使用 users 属性指定以逗号分隔的用户名列表。您可以使用问号 (?) 作为与任何用户名匹配的通配符。例如，以下代码拒绝除 user1 和 user2 之外的所有用户的访问：

```
<authorization>
    <allow users="user1, user2"/>
    <deny users=”?”/>
</authorization> 
```

# php - PHP 从 IPADDRESS 生成唯一的哈希

> ID：13118541
> 
> 赞同：0
> 
> 时间：2012-10-29T09:03:12.560
> 
> 标签：php, hash, ip, ip-address

我有一个董事会，我想禁用注册，而不是希望用户能够使用基于其 IPAddress 的唯一 ID 自由发布

例如：

如果“Joe”IP 为 200.100.15.117，“Joe”昵称将成为 200.100.15.117 的哈希函数

*如果“Joe”IP 发生变化，他将获得另一个 ID，没关系，我只希望每个 IPAddress 有一个唯一 ID*

还有两件重要的事情：

*   唯一 ID 必须为 8 个字符长
*   哈希应该是安全的，我不希望黑客能够破解我的用户 IP 地址

我想使用 MD5 函数，然后将其修剪为 8 个字符，但这有多独特？有没有更好的办法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:15:21.733

您可以将 ip 地址字符串转换为 LONG（4 字节），然后做任何您想做的事情。

请参阅 php 函数[ip2long](http://php.net/manual/en/function.ip2long.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T09:07:17.977

问题是你不能真正区分同一网络上的两个人，所以如果我在那里发帖，而我的宿舍邻居访问该网站，该网站认为他是我。

您应该考虑使用 cookie，它们很容易变得独一无二，而且 AFAIK 不能被远程黑客入侵。

对于唯一 ID 部分，如果您将“用户”存储在数据库中，您可以只从“用户”表中分配主键并在 cookie 中使用它。

如果它必须是 8 个字符长，您可以在 ID 前添加 0 - 例如 00000001、00000002 .... 至少这样它是独一无二的，并且 8 个字符长 -

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T11:12:32.957

**编辑**根据 OP 对此答案的评论。

下面的代码使用 BC Math 库将 MD5 哈希转换为 Base-90 字符串。这会将 32 个字符的字符串转换为 20 个字符的字符串。这与所需的 8 个字符相去甚远，但它是使用 ASCII 范围的最小字符串长度（可以通过使用字符将基数增加到 Base-94，`'` `"` `\` *`[space]`*但这不会影响字符串长度，而是可能在处理数据时导致问题） .

```
$ip      = '200.100.15.117';
$hash    = md5($ip);
$chars16 = array(
    '0' => 0,  '1' => 1,  '2' => 2,  '3' => 3, '4' => 4,  '5' => 5,
    '6' => 6,  '7' => 7,  '8' => 8,  '9' => 9, 'a' => 10, 'b' => 11,
    'c' => 12, 'd' => 13, 'e' => 14, 'f' => 15
);
$base10 = '0';
for ($i = strlen($hash) - 1; $i > 0; $i--) {
    $base10 = bcadd($base10, bcmul($chars16[$hash[$i]], bcpow(16, $i)));
}
$chars   = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ,;.:-_+*?!$%&@#~^=/<>[](){}`';
$base    = (string)strlen($chars);
$baseX   = '';
while (bccomp($base10, $base) === 1 || bccomp($base10, $base) === 0) {
    $baseX  = substr($chars, bcmod($base10, $base), 1) . $baseX;
    $base10 = preg_replace('/\.\d*$/', '', bcdiv($base10, $base));
}
$baseX = substr($chars, $base10, 1) . $baseX;
echo $baseX; // Shows: 1BS[JdZf/7J$J{ud&r5i 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-10T13:21:43.960

您可以对 IP 地址加盐，例如

```
$salt = "e45re%$#";
$ip = "200.111.123.111";
$hash = md5($ip.$salt);

$hash = substr($hash,0,8); 
```

# iphone - 日期选择器 IOS 的每月重复提醒

> ID：13118545
> 
> 赞同：2
> 
> 时间：2012-10-29T09:03:48.477
> 
> 标签：iphone, ios, reminders

我正在开发一个应用程序，它允许您设置账单的每月提醒，

我查看了 datepickers API，似乎无法找到如何让它每个月重复。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:12:56.090

您需要使用 UILocalNotification API

参考 [http://www.icodeblog.com/2010/07/29/iphone-programming-tutorial-local-notifications/](http://www.icodeblog.com/2010/07/29/iphone-programming-tutorial-local-notifications/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T09:37:23.207

根据您的需要自定义代码。有关详细信息，请参阅[UILocalNotification 类参考](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)

```
 UILocalNotification *localNotification = [[[UILocalNotification alloc] init] autorelease];    
     localNotification.fireDate = date; //The date and time when the system should deliver the notification.     
     localNotification.timeZone = [NSTimeZone defaultTimeZone];
     localNotification.alertBody = alertBody;
     localNotification.alertAction = @"View";
     localNotification.repeatCalendar = [NSCalendar currentCalendar];
     localNotification.repeatInterval = NSMonthCalendarUnit;
     localNotification.soundName = UILocalNotificationDefaultSoundName;        
     localNotification.applicationIconBadgeNumber = 1;    
     [[UIApplication sharedApplication] scheduleLocalNotification:localNotification]; 
```

# .net - .Net dll 参考 - 使用不同版本的 3rd 方 dll 部署到 PC

> ID：13118555
> 
> 赞同：1
> 
> 时间：2012-10-29T09:04:49.143
> 
> 标签：.net, c#-2.0, gac

你能告诉我这种情况的最佳方法吗？我继承了一个新项目，以前没有遇到过这种情况。

我们在 C# Windows 窗体应用程序中引用了用于生成文档的 3rd 方工具。

安装在人们PC上的部署环境中的第三方工具有两个不同的版本——v1.0和v2.0。

我只能构建我们的 Windows 窗体应用程序以使用 3rd 方工具的 v1.0 或 v2.0。为此，我必须在构建之前在我的开发 PC 上安装任一版本。这显然是一种不好的方法，因为我每次都必须卸载/重新安装第 3 方工具。如果我在我的 PC 上使用错误的版本构建用户会收到

```
Could not load file or assembly 'Interop.IManage, Version=1.0.0.0, Culture=neutral,     
PublicKeyToken=141424aa94e741g5' or one of its dependencies. The located assembly's 
manifest definition does not match the assembly reference. 
```

项目中似乎只有一个对 dll 的引用，它使用 GAC 引用。

```
C:\WINDOWS\assembly\GAC\Interop.iManage\1.0.0.0__141424aa94e741g\third.partyTool.dll 
```

我卸载 v1.0 并安装 v2.0 对此有何更改

```
C:\WINDOWS\assembly\GAC\Interop.iManage\2.0.0.0__141424aa94e741g\third.partyTool.dll 
```

在部署我们的应用程序方面，我们对文件进行了简单的 XCOPY，没有安装程序。

有没有办法我可以在我们的应用程序中保存两个引用，然后让它在部署后使用正确的引用？或者有没有我可以用来解决这个问题的部署方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:52:46.643

您可以始终针对 1.0.0 3rd 程序集进行构建，然后执行绑定重定向（在您的应用程序配置中）以使用 2.0.0 版本（如果可用）。

有关详细信息，请参见此处： http: [//msdn.microsoft.com/en-us/library/eftw1fys (v=vs.100).aspx。](http://msdn.microsoft.com/en-us/library/eftw1fys(v=vs.100).aspx)

更多示例：http: [//blogs.msdn.com/b/thottams/archive/2007/01/30/introduction-to-versioning-and-bindingredirect.aspx](http://blogs.msdn.com/b/thottams/archive/2007/01/30/introduction-to-versioning-and-bindingredirect.aspx?Redirected=true) ?Redirected=true 。

一个 SO 帖子还描述了设置绑定重定向时的一个常见问题：[程序集绑定重定向不起作用](https://stackoverflow.com/questions/3490327/assembly-binding-redirect-does-not-work)。

# php - 将特定元素的事件绑定到特定目标

> ID：13118558
> 
> 赞同：2
> 
> 时间：2012-10-29T09:05:01.753
> 
> 标签：php, jquery, html, jquery-selectors

我正在使用while循环输出数据

```
 <p><?php echo $title;?></p></font></a><button id=show>show()</button>               <button id=hide>hide()</button> 
```

我的显示隐藏功能是

```
$("#show").click(function () {
   $("p").show('fast');

});

$("#hide").click(function () {
   $("p").hide('fast');
});

 $("#reset").click(function(){
    location.reload();
}); 
```

现在，当我单击显示隐藏时，只有第一个显示隐藏循环正在工作，它显示/隐藏所有数据，而不仅仅是我单击的数据

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T09:08:02.410

更改要使用的代码`this`，如下所示：

```
$(this).prev('p').show('fast'); 
```

您需要在每个 JQuery .click 部分中执行此操作。

编辑：已经提到的另一个好点，您正在为您的元素使用一个 ID，它不允许它在多个上工作。您的新标记应如下所示：

```
<p><?php echo $title;?></p></font></a><button class="show">show()</button> 
```

和jQuery：

```
$(".show").click(function () {
   $(this).prev('p').show('fast');

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T09:17:16.347

欢迎来到 SO。很高兴看到您已经很好地形成了您的第一个问题。

您可能想要改变的东西很少。

当您通过循环时，请确保在循环内使用计数器并将计数器添加到 id。这将使 id 成为唯一标识符。也将它们包装在一个 div 中。

```
 $counter = 0;
 forloop {

    $counter++;
    <div>
    <p><?php echo $title;?></p></font></a><button id="show<?php echo $counter; ?>">show()</button>
    </div>        

 } 
```

所以现在你的 id 将是唯一的。现在您可以通过以下方式编写您的 jquery。

```
$("button").click(function () {
  $(this).attr('id'); //not required but incase you need the id of the button which was clicked.
  $(this).parent().find("p").show('fast');

});

$("button").click(function () {
   $(this).parent().find("p").hide('fast');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T09:11:23.177

两件事：1.我认为你只能有一个带有一个id的元素，例如#show。如果你想引用更多的按钮，你应该使用一个类，比如：show()（据我了解，按钮是循环输出的，会有更多的）。

第二：在您的 javascript 代码中，您执行 $("p")... - 这引用了所有

页面上的元素。我认为你应该使用 $(this) 并从那里开始，看看这篇文章，它解释了很多：[http ://remysharp.com/2007/04/12/jquerys-this-demystified/](http://remysharp.com/2007/04/12/jquerys-this-demystified/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-29T09:15:24.263

有很多方法可以解决这个问题。这是一个：

首先，将循环编号添加到 ID（假设它是 $i）

```
<p id="TITLE_<?php echo $i; ?>" style="display:none;"><?php echo $title;?></p>
<input type="button" class="show" data-number="<?php echo $i; ?>"/>               
<input type="button" class="hide" data-number="<?php echo $i; ?>" /> 
```

您的功能将是：

```
$(".show").click(function () {
   $("TITLE_" + $(this).data('number')).show('fast');
});

$(".hide").click(function () {
    $("TITLE_" + $(this).data('number')).hide('fast');
}); 
```

当然，有一些方法可以通过 JQUERY 来完成，而无需使用 $i。

**编辑：**拥有

页面加载时隐藏的标签，或者使用我在

上面的标记，或者您可以使用 JQuery，如下所示：

```
$(document).ready( function() {
    $("p[id^=TITLE_]").hide(); 
// this will retrieve all <p> tags with ID that starts                    
// with TITLE_ and hide them
}); 
```

# couchdb - CouchDB reduce函数的键（值）参数的排序顺序保证？

> ID：13118561
> 
> 赞同：4
> 
> 时间：2012-10-29T09:05:14.103
> 
> 标签：couchdb, reduce

如您所知，`reduce`CouchDB 视图中的函数如下所示：

```
function (key, values, rereduce) {
    return sum(values);
} 
```

其中第一个参数的定义如下：

> 当 rereduce 为 时`false`，则：
> 
> 1.  key 将是一个数组，其元素是 [key,id] 形式的数组，其中 key 是 map 函数发出的 key，id 是生成 key 的文档的 key。
> 2.  values 将是为键中的各个元素发出的值的数组。

我的问题是：当 rereduce 是时`false`，是否有关于`key`（或`values`）数组元素的顺序的保证？我的直觉（基于[Reduce vs Rereduce](http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views#Reduce_vs_rereduce)一章）是应该订购键和值，但我没有看到任何直接确认。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-29T14:08:38.780

来自[https://cloudant.com/for-developers/all_docs/](https://cloudant.com/for-developers/all_docs/)

```
Sort Order

All indexes are sorted by their key. The sort order is:

null
false
true
numbers
text, cases sensitive - lower case first
arrays, sorted element by element
objects 
```

完整的规范记录在[CouchDB Wiki](http://wiki.apache.org/couchdb/View_collation#Collation_Specification)中。

# iframe - 无法显示 iframe 的内容

> ID：13118564
> 
> 赞同：0
> 
> 时间：2012-10-29T09:05:44.093
> 
> 标签：iframe

我有一个小问题。我使用“直接链接”连接到我的会员区...例如[http://mydomain.com/?user=AAAA&pass=BBBB](http://mydomain.com/?user=AAAA&pass=BBBB)

当我在直接链接上使用它时，`<a href="...">`它就像一个魅力。脚本重定向我，我有我的内容。

我想将它包含在 iframe 中......但 iFrame 的内容保持空白......没有内容。

[http://mydomain.com/?user=AAAA&pass=BBBB](http://mydomain.com/?user=AAAA&pass=BBBB)重定向到另一个脚本...

这是我的代码：

```
<iframe src="http://mail.expa13.fr/?user=<?php echo $user['mail']?>&pass=<?php echo $user['competences']?>"></iframe>
<a href="http://mail.expa13.fr/?user=<?php echo $user['mail']?>&pass=<?php echo $user['competences']?>" target="_blank">test</a> 
```

如果我单击“链接”，它可以工作。新窗口打开了……但是如果我设置在 iFrame 上……就像没有电话一样……

您可以尝试使用 user=test&pass=123456

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:37:40.693

看来问题不在您的代码中。我认为服务器通过某种方式检测到请求不是针对普通浏览器或 IFRAME 标签发送的。然后服务器拒绝请求。许多服务网站都这样做。例如 google.com

:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:14:05.300

事实上，我使用的网络邮件中有一个选项（圆形立方体）。

在配置文件中有一个 x_frame_origin 的选项，默认为“sameorigine”。我们可以用“false”禁用该选项......它可以工作^^

# spring - STS 中页面之间的导航

> ID：13118566
> 
> 赞同：0
> 
> 时间：2012-10-29T09:05:54.150
> 
> 标签：spring, spring-mvc, navigation

我正在尝试在两个页面之间进行简单导航，但出现错误，我无法解决

第一页是我`home.jsp`在这里我做一个链接

```
<a href="/timecard/NewAccount"><FONT COLOR="#40C0FF">Create New Account</FONT></a> 
```

然后我创建帐户文件夹，我必须保存文件`createAccount.jsp`-这是我的目标页面，并`views.xml`带有此源

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE tiles-definitions PUBLIC "-//Apache Software Foundation//DTD Tiles Configuration 2.1//EN" "http://tiles.apache.org/dtds/tiles-config_2_1.dtd">
<tiles-definitions>
<definition extends="default" name="createNew">
<put-attribute name="body" value="/WEB-INF/views/accounts/createAccount.jsp"/>
</definition>

</tiles-definitions> 
```

和我的`AccountsController`

```
@Controller
@RequestMapping(value="/timecard/newAccounts")
public class AccountsController {

@RequestMapping(method=RequestMethod.GET)
public String accountForm(Model model){

    return "createNew";
}

} 
```

所以当我点击`home.jsp`页面中的链接时找不到，这是消息

`WARN : org.springframework.web.servlet.PageNotFound - No mapping found for HTTP request with URI [/timecard/NewAccount] in DispatcherServlet with name 'appServlet'`

我真的很困惑。你能告诉我我做错了什么吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:21:59.480

您在 href 标签中使用了错误的 url。在您的控制器中，您已映射 url `/timecard/newAccounts`。

因此，您需要将href更改为`${pageContext.servletContext.contextPath}/timecard/newAccounts`然后重试。

希望这对您有所帮助。干杯。

# html - 何时使用 Twitter Bootstrap，何时使用 HTML5 Boilerplate？

> ID：13118568
> 
> 赞同：3
> 
> 时间：2012-10-29T09:06:13.523
> 
> 标签：html, ruby-on-rails-3, twitter-bootstrap, html5boilerplate

我对 CSS 和 HTML5 设计/模板很不好。所以，我四处搜索，发现两个框架从漂亮的布局开始，必要的 js 和 html5 支持。但我不知道该使用哪个。

我会很感激你的回答

1.  除了谷歌分析之外，两者之间的主要区别是什么？

2.  哪一个对轨道更友好？

3.  哪一个最适合电子商务网站，即创建丰富的内容、与用户管理框架集成等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T09:09:13.697

结合它们并同时使用它们 - [http://www.initializr.com/](http://www.initializr.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T09:37:24.603

HTML5 Boilerplate (H5BP) 是一个初始项目模板，旨在适应您的需求。Bootstrap 是一个专门的、模块化的 HTML/CSS/JS 工具包。

样板文件为您提供了最佳实践 HTML5 文档、一些重置 CSS 和许多 javascript 优点，例如modernizer.js；这个 Twitter 工具包为您提供的样式表定义的不仅仅是重置。

与 blueprintcss 和 960 网格系统等 CSS 框架相比，Twitter 工具包更好，并且将自身定位在这两者之间。Twitter bootstrap 具有自己固定的外观和感觉，因此您可以专注于您的内容和逻辑。

签出这个[Quora 主题](http://www.quora.com/Is-Bootstrap-a-complement-OR-an-alternative-to-HTML5-Boilerplate-or-viceversa)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T20:39:50.683

根据您的问题，我认为您误解了这两个项目是什么。“谷歌分析”没有区别。

扩展 @thomas 已经声明的内容，Boilerplate 包含内置最佳实践的入门 HTML 模板，而 Bootstrap 是一个 CSS 和 JS UI 元素库。它们不是相互排斥的。

您可能希望查看 @Zlatan 已经推荐的初始化程序，或[Kickstrap](http://getkickstrap.com)，它是 Twitter Bootstrap 的扩展框架。

# c++ - 循环依赖问题

> ID：13118573
> 
> 赞同：0
> 
> 时间：2012-10-29T09:06:29.550
> 
> 标签：c++, visual-c++

我有一个设计问题。

我有三个单独的类，即 A、B 和 C。A 类有一个 B 类的数组对象。B 类有一个 C 类的对象。

现在，我想从 C 类中的 A 类访问一个函数。

我怎样才能实现它？

这是一些代码：

文件类A.h：

```
#pragma once
#include <classB.h>

class classA
{
    classB objB[10];
    void GetData();
}; 
```

文件类B.h：

```
#pragma once
#include <classC.h>
class classB
{
    classC objC;
} 
```

文件类C.h：

```
#pragma once
#include <classA.h>
class classC
{
    classA objA;
} 
```

上面的代码创建了一个循环，即使我添加了`#pragma once`. 我也尝试在 classC.cpp 中包含 classA.h，但我仍然无法访问 ClassA 中的函数。

非常感谢。

钦坦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T09:31:16.343

正如@jogojapan 所说，这更像是一个[循环依赖](http://en.wikipedia.org/wiki/Circular_dependency)问题。

您可以在类 C 中使用指向类 A 的指针成员并使用前向声明。

```
class classA;
class C{
    classA* objAPtr;
}; 
```

然后在 c.cpp 你可以添加`#include <classA.h>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:15:26.070

不确定你基本上想要什么我可以想到这个：

在类 C 中创建类 A 的对象，并使用类 C 中存在的对象访问类 A 的函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T09:22:49.793

如果你想调用`Class A`with对象的方法，`Class C`那么你不需要实现继承，如果你想调用`Class A`with`Class C's`对象的方法，那么你需要实现继承。

# java - 确定 Groovy 表达式的返回类型

> ID：13118577
> 
> 赞同：1
> 
> 时间：2012-10-29T09:06:47.990
> 
> 标签：java, groovy, abstract-syntax-tree

我有一些带有 Groovy 表达式的字符串。我需要：

1.  执行 java.lang.String 中包含的 Groovy 表达式
2.  将表达式的结果作为对象获取
3.  确定结果对象的类型

是否可以？另外，如果我不使用 Groovy 的动态特性，我是否能够“静态地”确定表达式的类型，即在编译时不执行表达式本身。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:57:00.347

一个非常简单易行的方法是使用[Eval 类](http://groovy.codehaus.org/api/groovy/util/Eval.html)。计算指定的 String 表达式并返回结果。表达式的类型结果是`Object`。

```
def object = Eval.me('1 + 1') 
```

您可以使用该`getClass()`方法或简单地获取对象的类：

```
assert object.class == Integer 
```

在这个例子中，不可能在编译时确定静态类型检查。

```
@groovy.transform.TypeChecked
void test() {
    Integer object = Eval.me('1 + 1')
    assert object.class == Integer
}

[Static type checking] - Cannot assign value of type java.lang.Object to variable of type java.lang.Integer 
```

# sql - 如何使用完全外连接？

> ID：13118578
> 
> 赞同：0
> 
> 时间：2012-10-29T09:06:54.463
> 
> 标签：sql, sql-server, stored-procedures, full-outer-join

我需要使用 join 2 table 显示所有数据。

**考试**

**表接触**

```
numCode | fullName
00001   | Midna 
00002   | Klog
00003   | Porla
00004   | Seka
00005   | Mila 
```

**表日期文件**

```
numCode | dateCurr
00001   | 2012-10-29 00:00:00.000
00002   | 2012-10-29 00:00:00.000
00005   | 2012-10-29 00:00:00.000 
```

**代码 Sql 服务器**

```
SELECT df.numCode as 'numCode', tf.dateCurr as 'dateCurr'
FROM dateFile df Full Outer join Contact ct On ct.numCode = df.numCode
WHERE df.dateCurr = '2012-10-29' 
```

**输出**

```
numCode | dateCurr
00001   | 2012-10-29 00:00:00.000
00002   | 2012-10-29 00:00:00.000
00005   | 2012-10-29 00:00:00.000 
```

**但我需要输出得到：**

```
numCode | dateCurr
00001   | 2012-10-29 00:00:00.000
00002   | 2012-10-29 00:00:00.000
00003   | 2012-10-29 00:00:00.000  (Insert Date from choose datetime)
00004   | 2012-10-29 00:00:00.000  (Insert Date from choose datetime)
00005   | 2012-10-29 00:00:00.000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:10:59.057

尝试：

```
SELECT df.numCode as 'numCode', 
       coalesce(tf.dateCurr, '2012-10-29') as 'dateCurr'
FROM dateFile df Full Outer join Contact ct 
On ct.numCode = df.numCode and df.dateCurr = '2012-10-29' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:44:45.600

尝试这个：

```
select c.numCode,ISNULL(d.dateCurr,'2012-10-29 00:00:00.000') from Contact c left join dateFile d
on c.numCode = d.numCode 
```

# linq - 使用 LINQ 创建 JSON 时出现 JSON.NET 参数异常

> ID：13118580
> 
> 赞同：1
> 
> 时间：2012-10-29T09:06:57.893
> 
> 标签：linq, json.net

我正在使用 JSON.NET Linq to JSON，当我执行以下命令时，我得到以下参数异常：

> 无法将 Newtonsoft.Json.Linq.JValue 添加到 Newtonsoft.Json.Linq.JObject

代码有什么问题

```
string content = new JObject(
            new JObject("auth",
                        new JProperty("user", "anemail@gmail.com"),
                        new JProperty("secret", "somepassword")
                ),
            new JObject("config",
                        new JProperty("template", "1")
                ),
            new JObject("data",
                        new JProperty("email", "body")
                )
            ).ToString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:04:57.160

根据 JSON.NET[文档](http://james.newtonking.com/projects/json/help/index.html?topic=html/CreatingLINQtoJSON.htm)，您需要将 JObjects 自己包装在 JProperties 中：

```
 string content = new JObject(
                   new JProperty("auth",
                     new JObject(
                       new JProperty("user", "anemail@gmail.com"),
                       new JProperty("secret", "somepassword")
                     )
                   ),
                   new JProperty("config",
                     new JObject(
                       new JProperty("template", "1")
                     )
                   ),
                   new JProperty("data",
                     new JObject(
                       new JProperty("email", "body")
                     )
                   )
                 ).ToString();
```

# sql-server - 我可以在 Visual Studio 2012 t-sql 编辑器中定义#regions 吗？

> ID：13118589
> 
> 赞同：6
> 
> 时间：2012-10-29T09:08:14.093
> 
> 标签：sql-server, editor, visual-studio-2012

我想知道是否有一个扩展允许我在编辑用户定义的函数或普通的 t-sql 查询时在 Visual Studio 2012 编辑器中定义区域。

我尝试了以下方法，但似乎没有多大作用：

```
-- #region This is a region with t-sql code
   ...
-- #endregion 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T09:14:37.267

[SQL Visualizer](http://download.cnet.com/SQL-Visualizer/3000-10254_4-10592203.html)允许代码区域。使用它，您可以`--REGION`使用`-- END REGION`.

还有[SSMS 工具包](http://www.ssmstoolspack.com/)。

在本机，您可以选择使用 BEGIN 和 END 语句包装特定块：

[http://msdn.microsoft.com/en-us/library/cc281835.aspx](http://msdn.microsoft.com/en-us/library/cc281835.aspx)

# css - 用我自己的自定义 css 覆盖 Sharepoint 2010 css

> ID：13118590
> 
> 赞同：4
> 
> 时间：2012-10-29T09:08:16.700
> 
> 标签：css, sharepoint-2010

我有一个 Sharepoint 2010 内部网，我正在使用自己的 css 文件设计当前模板。我已将自定义 css 文件添加到样式库中，并在我的标记末尾的母版页中添加了这段代码：

```
<SharePoint:CssRegistration name="<% $SPUrl:~SiteCollection/Style Library/custom/custom.css%>" runat="server"/> 
```

现在我总是需要在我的 css 类中添加 !important 标记，这些标记也用于默认的共享点 css 文件。我不想每次都这样做。是否有一些解决方案可以让我在默认的共享点 css 文件上覆盖我自己的自定义 css？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T12:51:55.037

在浏览器中由 SharePoint 呈现您的页面后，查看源代码。您的 CSS 页面很可能在开箱即用的样式表（如 corev4.css）之前列出。

要重新排列此排序，请尝试：

```
<SharePoint:CssRegistration 
    name="<% $SPUrl:~SiteCollection/Style Library/custom/custom.css%>" 
    after="corev4.css" 
    runat="server"/> 
```

有关 After 属性的更多信息，请参阅：

*   [CssRegistration.After 属性](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.webcontrols.cssregistration.after.aspx)
*   [SharePoint CSSRegistration 或链接？](http://tommdaly.wordpress.com/2012/05/02/sharepoint-cssregistration-or-link/)
*   [SharePoint 2010 中的 CssRegistration 控件的新增功能](http://www.wictorwilen.se/Post/What-is-new-with-the-CssRegistration-control-in-SharePoint-2010.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:29:20.560

这听起来像是一个[CSS 特异性](http://www.w3.org/TR/CSS2/cascade.html)问题。[这篇文章](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)对这个主题有很多有用的解释。

> 如果您在外部样式表中写入了两次相同的规则，则样式表中较低的规则更接近要设置样式的元素，则认为它更具体，因此将被应用。例如，在以下情况下，内边距将设置为 10 像素，而不是 5 像素。

```
#content h1 {
padding: 5px;
}

#content h1 {
padding: 10px;
} 
```

要解决您当前的问题，可以像 Dipaks 建议的那样直接在页面中添加您的 css（因为这将优先于外部 css 文件），或者甚至更好，更简单地说，只需在对 css 文件的引用**之后**添加对您的 css 文件的引用Sharepoint css，在这种情况下，如果它们具有相同的特异性，则将应用您的 css。

# typo3 - 页面模块级别没有权限

> ID：13118592
> 
> 赞同：0
> 
> 时间：2012-10-29T09:08:29.317
> 
> 标签：typo3, rights, templavoila, rights-management

我遇到一个奇怪的错误。在页面模块级别，我不允许创建新的页面元素。如果我通过列表模块执行相同操作，则创建页面元素并且我可以编辑它们（即使在页面模块中）。

此外，如果我创建了一个灵活的内容元素——例如列——（通过列表模块），我可以在灵活的内容元素中创建新元素，即使在页面模块中也是如此。

新元素总是在页面的顶部，这意味着第一个条目，我不能拖放它们。好吧，我可以，但更改不会生效。要对元素进行排序，我必须编辑页面属性，然后对`content`.

用户拥有用户设置赋予的所有权利（！），它是 TYPO3 4.7.4

有谁知道我必须在哪里寻找解决方案？提前致谢！

**编辑 1**

此错误出现在日志中：

`Attempt to insert record on page '[root-level]' (0) where this table, tt_content, is not allowed (msg#1.1.11)`

再次：创建元素是通过`List-Module`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:33:36.097

出现此错误是因为表中的字段`t3ver_swapmode`自`page`TYPO3 4.7 以来已被删除（可能与 TemplaVoila 结合使用）。

我不知道这里到底发生了什么（没有时间找出来），但解决方案很简单。我将我的修复上传到 TYPO 存储库的密钥`swapmodefix` [http://typo3.org/extensions/repository/view/swapmodefix](http://typo3.org/extensions/repository/view/swapmodefix)

扩展将在几个小时后出现，祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:12:55.057

您需要先在页面树中选择一个页面。您不能在根页面上创建内容元素。

可能是选择丢失了，但仍然可见。只需再次单击该页面。

# jquery - Jquery双击jqplot图表

> ID：13118593
> 
> 赞同：0
> 
> 时间：2012-10-29T09:08:32.773
> 
> 标签：jquery, touch, jqplot, tap

我需要在 jqplot 图表上捕获双击事件。我浏览了以下链接。 [http://appcropolis.com/implementing-doubletap-on-iphones-and-ipads/](http://appcropolis.com/implementing-doubletap-on-iphones-and-ipads/) 在 jquery.jqplot.js 中，我插入了以下代码：

```
this.onTouchEnd = function(ev) {

   var now = new Date().getTime();
   var lastTouch = $(this).data('lastTouch') || now + 1 /** the first time this will make delta a negative number */;
   var delta = now - lastTouch;
   clearTimeout(action);
   if(delta<500 && delta>0){
           // the second touchend event happened within half a second. Here is where we invoke the double tap code
           alert("Doubletapped");
   }else{
           // A click/touch action could be invoked here but wee need to wait half a second before doing so.
           alert("notdoubletapped");
   }
   $(this).data('lastTouch', now); 
```

但它没有检测到双击事件。在 jqplot 的情况下，“this”应该指什么？它应该引用 ev.data.plot 吗？ `$(this).data('lastTouch')`

# c# - 为什么当我关闭控件时 Form1 没有回到 CenterScreen 位置？

> ID：13118594
> 
> 赞同：0
> 
> 时间：2012-10-29T09:08:40.900
> 
> 标签：c#

```
private void histogramGraphsToolStripMenuItem_Click(object sender, EventArgs e)
        {
            this.Location = new Point(0, 0);
            HistogramGraphs1 = new Lightnings_Extractor.Histogram_Graphs();
            HistogramGraphs1.Show();
            HistogramGraphs1.FormClosing += new FormClosingEventHandler(HistogramGraphs1_FormClosing);
            histogramGraphsToolStripMenuItem.Enabled = false;

        }

private void HistogramGraphs1_FormClosing(object sender , FormClosingEventArgs e)
    {
        this.StartPosition = FormStartPosition.CenterScreen;
        histogramGraphsToolStripMenuItem.Enabled = true;
    } 
```

第一次我将表单放在位置 0,0 然后在关闭事件中我希望它回到中心屏幕，但表单仍处于 0,0 位置。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:20:16.957

首先防止通过 set 关闭此表单`e.Cancel = true`。然后将窗口移动到屏幕中心：

```
private void HistogramGraphs1_FormClosing(object sender , FormClosingEventArgs e)
{
    histogramGraphsToolStripMenuItem.Enabled = true;
    e.Cancel = true;
    int x = Screen.PrimaryScreen.WorkingArea.Width / 2 - this.Width / 2;
    int y = Screen.PrimaryScreen.WorkingArea.Height / 2 - this.Height / 2;
    this.Location = new Point(x, y);
} 
```

这篇 MSDN 文章可能有用：

*   [设置 Windows 窗体的屏幕位置](http://msdn.microsoft.com/en-us/library/aa984420%28v=VS.71%29.aspx)

解释：

> [**`CancelEventArgs.Cancel`**](http://msdn.microsoft.com/en-us/library/system.componentmodel.canceleventargs.cancel.aspx): 获取或设置一个值，该值指示是否应该取消事件。
> 
> [**`Form.Location Property`**](http://msdn.microsoft.com/en-us/library/ms159414%28v=VS.80%29.aspx): 获取或设置代表窗体左上角屏幕坐标的Point。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:11:41.547

如果您设置 this.StartPosition = FormStartPosition.CenterScreen; 那么您需要重新打开表单。否则不会生效。

# java - 分片环境下如何管理数据库连接池？

> ID：13118595
> 
> 赞同：2
> 
> 时间：2012-10-29T09:08:42.610
> 
> 标签：java, postgresql, jdbc, connection-pooling, sharding

我的 Web 应用程序需要同时支持 Web 和 DB 层的可伸缩性。我有以下组件：

1.  N 个 Web 服务器 (Tomcat)
2.  以用户名作为分片键的 M 个 DB 服务器（PostgreSQL）

我们的分片策略如下：

1.  分片策略是基于查找表的，我们有一个索引表（用户名，shardId），另一个分片表（shardId，connectionString，loading）。

2.  我们会定期监控分片数据库，并更新加载状态字段。

3.  创建新用户时，我们总是选择负载最低的分片，并存储到索引表中。

4.  数据库分片将动态添加或删除。

我必须实现一个 API，比如`getDBConnection(username)`根据分片键（在本例中为登录用户）获得一个 JDBC 连接。

问题是：

1.我怎样才能以一种适用于连接池的方式实现这个 API？假设每个分片支持 500 个连接，我怎么能通过 Java 代码做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:41:56.847

我可能根本不会在应用程序中连接池，我可能只是使用带有`pgpool-II`or的服务器端连接池`pgbouncer`。

如果我要使用应用程序内池，我会创建每个分片的连接池，然后从分片的适当池中选择一个连接。这将适用于任何允许您以编程方式而不是声明方式创建池的连接池实现。每个池都应该非常积极地尝试关闭非活动连接。看起来`org.apache.tomcat.jdbc.pool.DataSource`很适合这个；请参阅[Tomcat JDBC 池文档](http://people.apache.org/~fhanik/jdbc-pool/jdbc-pool.html)。

由于这将导致潜在的大量连接和大量连接/断开连接，因此运行服务器端连接池以限制和共享到每个分片的连接将非常重要。在每个分片上使用类似`pgbouncer`或`pgpool-II`处于事务池模式的东西，以在来自 Web Worker 的大量连接中共享相对少量的真实 PostgreSQL 连接。

我会说你会想要这样的模式：

```
web1 [pool1]-----------------------------[server1-pgbouncer]------[server1-pg]
     [pool2]-------------------------------v         ^
     [pool3]---------v        [server2-pgbouncer]-----------------[server2-pg]
                     |                     ^         |
                    [server3-pgbouncer]---------------------------[server3-pg]
                     |                     |         |
web2 [pool3]---------^                     |         |
     [pool2]-------------------------------|         |
     [pool1]------------------------------------------ 
```

每个应用程序池都连接到与该池对应的分片服务器上的 pgbouncer，并且只有该分片服务器的 pgbouncer 会与分片的 PostgreSQL 实例对话。

# c# - Filling a datatable with a former created datatable using the if else loop method

> ID：13118598
> 
> 赞同：1
> 
> 时间：2012-10-29T09:09:00.983
> 
> 标签：c#

As a newby in c# i am having a problem with getting a datatable being filled from a other datatable that has been build an put in memory. not all columns are needed in the new datatable. Could i get some help here pls.

here's my code so far: where i found a part of my solution. but doen't know how to proceed?

```
using System;
using System.IO;
using System.Text;
using System.Data;
using System.Data.Common;
using System.Data.SqlClient;
using System.Configuration;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.ComponentModel;

public partial class _Planning : System.Web.UI.Page
{
ConnectionStringSettings Leerstoftabel;
SqlConnection connection;
int cursusID = 2;
DataTable LeerstofTabel;
DataTable Planning;

protected void Page_Load(object sender, EventArgs e)
{
    Leerstoftabel = ConfigurationManager.ConnectionStrings["CursusPlanner"];
    connection = new SqlConnection(Leerstoftabel.ConnectionString);

    SqlCommand cmd = connection.CreateCommand();
    cmd.CommandType = CommandType.Text;
    cmd.CommandText = "SELECT cursus.naam AS [Cursus Naam], vak.vaknaam, cursusvak.volgnummer, les.dagnummer, les.hoofdstuknummer, les.naam AS [Les Naam], les.lesomschrijving FROM cursus INNER JOIN cursusvak ON cursus.cursusID = cursusvak.cursusID INNER JOIN vak ON cursusvak.vakID = vak.vakID INNER JOIN les ON vak.vakID = les.vakID WHERE(cursus.cursusID = @cursusID)ORDER BY cursusvak.volgnummer";

    //int cursusID = Convert.ToInt32(DropDownList1.SelectedValue);
    cmd.Parameters.Add("@cursusID", SqlDbType.Int, 0).Value = cursusID;

    connection.Open();

    //het creeëren van een datatabel
    DbDataReader rdr = cmd.ExecuteReader();
    LeerstofTabel = new DataTable();
    LeerstofTabel.Load(rdr);

    connection.Close();
}

protected void Calendar1_DayRender(object sender, DayRenderEventArgs e)
{
    // weekend days can't be selected in calendar
    if (e.Day.IsWeekend)
        e.Day.IsSelectable = false;
}

protected void Button1_Click(object sender, EventArgs e)
{
    //create the DataTable named "Planning"
    Planning = new DataTable ("Planning");

    //Add the DataColumn using defaults
    DataColumn datum = new DataColumn("Datum");
    datum.DataType = typeof(DateTime);
    datum.AllowDBNull = false;
    datum.Caption = "Datum";
    Planning.Columns.Add(datum);

    //Add the DataColumn using defaults
    DataColumn hoofdstuk = new DataColumn("Hoofdstuk");
    hoofdstuk.AllowDBNull = false;
    hoofdstuk.Caption = "Hoofdstuk";
    Planning.Columns.Add(hoofdstuk);

    //Add the DataColumn using defaults
    DataColumn omschrijving = new DataColumn("Omschrijving");
    omschrijving.AllowDBNull = false;
    hoofdstuk.Caption = "Omschrijving";
    Planning.Columns.Add(omschrijving);

    //Add the DataColumn using defaults
    DataColumn lessen = new DataColumn("Lessen");
    lessen.AllowDBNull = false;
    lessen.Caption = "Lessen";
    Planning.Columns.Add(lessen);

    for (int i = 0; i < LeerstofTabel.Rows.Count; i++)
    {
        if (LeerstofTabel ["vaknaam"]).ToString() != vorigvak  // this statement doesn't work
        {
            DataRow newplannning = Planning.NewRow();
            newplannning["Datum"] = "";
            newplannning["Hoofdstuk"] = "*" + LeerstofTabel["vaknaam"];
            newplannning["Omschrijving"] = "";
            newplannning["Lessen"] = "";
            Planning.Rows.Add(newplannning);

        }

        Vorigvak = (LeerstofTabel["vaknaam"])ToString();
    }

    GridView1.DataSource = Planning;
    GridView1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:14:19.097

Use for loop with main Datatable and check which are the columns should be imported to new datatable. Then copy the data.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:36:12.403

If you are interested in copying,you can do this

```
DataTable newTable;
newTable= OldTable.Copy(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T10:01:22.087

One approach using DataTable would be using:

`int index; //the index of column u want to remove
string columnName; // name of the column you want to remove
DataTable dt;
dt= dtMain.Copy();
dt.Columns.RemoveAt(index); //or
dt.Columns.Remove(columnName);`

Using remove or remove at you remove the columns that you do not want.

Other approach would be using list of objects and copying data from a datatable. For example:

`List<SomeClass> info;
foreach (DataRow dr in dt.Rows)
{
info = new SomeClass { para1 = dr["col1"], para2 = dr["col2"], para3 = dr["col3"]};
}` Choose which ever is appropriate for your case.

# sitecore - Sitecore - 如何预览不可发布的项目

> ID：13118604
> 
> 赞同：2
> 
> 时间：2012-10-29T09:09:32.133
> 
> 标签：sitecore, sitecore6

我有一个简单的要求，就是能够提前设置和预览页面。这些页面用于在特定日期发布，并且是一次性出版物。它们在发布前不得可见。

如何在不公开任何内容的情况下在发布之前预览项目？

如果我限制**发布版本**（即版本 1），我仍然会得到一个显示标准值的已发布页面，即项目的版本 0。

如果我限制发布**该项目**，我将无法再预览它。预览功能似乎依赖于可发布的项目。

我在这里错过了一个技巧吗？

**更新**：我对为什么在项目受到限制时无法预览项目特别感兴趣，因为这可能是用户可以使用的最直观的限制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T09:35:48.017

您可以对版本或项目设置日期限制。

然后进入预览模式并使用日期选择器选择不同的日期。

![在此处输入图像描述](../Images/ff7ebea8a055fa404b1f1707ebd36bad.png)

当您选择发布日期范围内的日期时，您的项目将在预览中可见。

**更新：** 因为您对预览受限物品特别感兴趣；如果您设置一个新站点并将其指向`master`数据库而不是通常的`web`数据库，则可以完成。

[Mark Ursino](http://firebreaksice.com/how-to-setup-a-sitecore-preview-site-to-review-content-before-publishing/)在一篇博文中对此进行了解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T11:50:03.583

正如 Rudd 提到的，[我的博客文章](http://firebreaksice.com/how-to-setup-a-sitecore-preview-site-to-review-content-before-publishing/)解释了如何做到这一点。但是，您也可以由 Alex Shyba 设置一个新的工作流提供程序，允许半最终工作流状态，从而允许发布到它们：[发布到预生产 Web 数据库。第2部分。](http://sitecoreblog.alexshyba.com/2010/09/publish-to-pre-production-web-database.html)

# regex - 使正则表达式在 shell 脚本中看起来不错

> ID：13118609
> 
> 赞同：1
> 
> 时间：2012-10-29T09:10:17.247
> 
> 标签：regex, bash, sed

我经常在我的 bash 脚本中使用 grep 和 sed。例如，我使用脚本从模板中删除注释

在此示例中，注释如下所示：

```
/*#  my comments contain text and ascii art:
 *#
 *#  [box1] ------> [box2]o
 *#
#*/ 
```

我删除这些行的 sed 链如下所示：

```
sed '/^\/\*#/d' | sed '/^\s*\*#/d' | sed '/^\s*#\*\//d' 
```

在我的脚本中，我必须转义诸如`\`and之类的字符`/`，这会降低代码的可读性。因此，我的问题是：**如何`sed`在 bash 脚本中编写易于阅读的正则表达式？**

我能想到的一种方法是使用另一个分隔符而不是`/`，就像在 vim 中您可以本机使用`%s#search/text#replace/text#gc`（使用`#`as 分隔符）并因此允许`/`作为未转义字符一样。定义一个替代的转义字符也会有所帮助。我会对你如何解决这个问题感兴趣。`sed`如果您认为这只是一个问题，我也愿意接受替代工具。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T09:12:59.210

您可以指定不同的分隔符，[详见此处](http://www.commandlinefu.com/commands/view/2889/sed-using-colons-as-separators-instead-of-forward-slashes)。

请注意，Perl 也允许您这样做，同时[将您的正则表达式拆分为多行](http://www.perlmonks.org/?node_id=347419)以提高可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T10:26:23.490

我认为尝试使正则表达式（很多时候是一系列符号）易于阅读是非常困难的。

但是，您可以做一些事情：

1.  使用`-r`（或`-E`在某些系统中）这样您就不必转义正则表达式运算符`()`, `{}`, `+`,`?`

2.  使用替代分隔符，例如用于`s`命令

    ```
    sed 's@regex@replacement@' file 
    ```

    对于地址范围（你需要'\'）

    ```
    sed '\@pattern@ d' file 
    ```

3.  在地址范围和命令之间留出空格（`d`如上）。

4.  留下评论来解释正则表达式匹配的内容（您甚至可以包括一个示例）。

3 和 4 更像是一种间接方法，但它们应该有所帮助。

无论如何，您正在做的事情可以在一个 sed 表达式中完成：

```
sed '\:^/\*#:,\:^#\*/: d' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T09:18:14.570

除了使用替代分隔符之外，您还可以在适当的情况下使用[扩展的正则表达式](http://en.wikipedia.org/wiki/Regular_expression#POSIX_Extended_Regular_Expressions)，它们会反转转义规则，因此您必须将方括号写为“\[\]”以赋予它们特殊的含义。

# iphone - SQLite。不能添加超过 1000 行

> ID：13118610
> 
> 赞同：4
> 
> 时间：2012-10-29T09:10:27.410
> 
> 标签：iphone, objective-c, ios, sqlite, fmdb

我正在尝试向我的 SQLite 数据库（使用 fmdb）添加 10k 行，但写入在 1000 行时停止。而且我没有任何错误或警告。我的代码：

```
NSString *queryString = [NSString stringWithFormat:@"insert into histories (storyid, text, date, storyurl) values (%li, ?, ?, ?)",history.storyIndex];
if ([self.db open]) {
    if([self.db executeUpdate:queryString, history.storyText, history.storyDate, history.storyUrl]) {
        NSLog(@"history added");
    } 
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-12T11:30:05.120

对于任何有同样问题的人...确保您的 sqlite 查看器不会将查询的输出限制为 1000 个结果。

只是因为同样的问题浪费了几分钟，答案就这么简单！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T10:58:56.767

将*数据库*放在循环之外打开，以便只调用一次。在 10,000 行的循环内重复调用它可能会导致内存问题。

每次执行更新后检查 db 对象上的 lastErrorCode，如果 lastErrorMessage 不为零，则 NSLog 记录它。

通过增加一个计数器并使用模数运算来间隔提交，例如

```
counter++;
if (mod(counter,500) ){
    [self.db commit];
} 
```

考虑使用 python 在 iOS 项目之外批量加载数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T11:03:38.700

您可以尝试以下代码，看看是否有任何变化：

```
NSString *queryString = @"INSERT INTO histories (storyid, text, date, storyurl) 
VALUES ( ?, ?, ?, ?)";

BOOL executeUpdateStatus = NO;

if ([self.db open]) 
{
    executeUpdateStatus = [self.db executeUpdate:queryString, 
    [NSNumber numberWithLong:history.storyIndex], history.storyText,
    history.storyDate, history.storyUrl];

        if(executeUpdateStatus == YES)   
            NSLog(@"history added");
        else
            NSLog(@"history NOT added");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T09:13:19.550

听起来您需要提交交易。您似乎已达到单个事务中的行数限制。

# asp.net-mvc - “Response.PermanentRedirect”和“在 MVC 中删除动词”之间的区别

> ID：13118612
> 
> 赞同：2
> 
> 时间：2012-10-29T09:10:37.817
> 
> 标签：asp.net-mvc, asp.net-mvc-3

使用“Response.PermanentRedirect”时

它将返回 Http Response Code 301，这意味着永久重定向到不同的位置。这对于使用浏览器的最终用户可能没有任何价值，但对于搜索引擎来说，它将帮助搜索引擎不索引永久重定向的 url。

**问题**-`Delete Verb`在 MVC 中是否执行相同的功能？

* * *

**发布**一个新实体作为 URI 的补充。`Put`替换由 URI 标识的实体。

**问题**- 执行插入/更新时，两种情况下都提交了信息。这是否意味着在插入的情况下`Post verb`应该使用并且在更新的情况下`Put verb`应该使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:18:22.440

*要回答您的第一个问题：*

从 RESTful API 的角度来看，必须使用 DELETE 从其父级中删除资源，该父级通常是集合或存储。一旦针对给定资源处理了 DELETE 请求，客户端就无法再找到该资源。因此，任何将来尝试使用 GET 或 HEAD 检索资源的状态表示，都必须导致 API 返回 404（“未找到”）状态。

DELETE 方法在 HTTP 中具有非常特定的语义，不能被 REST API 的设计重载或拉伸。具体来说，API 不应通过将 DELETE 映射到较小的操作来扭曲 DELETE 的预期含义，从而使资源及其 URI 可供客户端使用。

**204（“无内容”）应用于响应 PUT、POST 或 DELETE 请求**

Response.PermanentRedirect 表明 REST API 的资源模型已经过重大重新设计，并且已将新的永久 URI 分配给客户端请求的资源。REST API 应该在响应的**Location**标头中指定新的 URI。

**301（“Moved Permanently”）应该用于重新定位资源**

*对于 Post 和 Put ：*

PUT 必须用于添加具有客户端指定 URI 的新资源，并且还必须用于更新或替换已存储的资源。PUT 还必须用于更新可变资源，而 POST 必须用于在集合中创建新资源。

# templates - 为插入排序编写类模板代码时遇到“错误 C4430”

> ID：13118616
> 
> 赞同：0
> 
> 时间：2012-10-29T09:10:56.027
> 
> 标签：templates, visual-c++

我正在尝试为插入排序算法编写一个模板类。但是我遇到了错误“错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持 default-int”。但我不确定为什么会出现这个错误。

insert_sort.h 文件如下：

```
 #pragma once
     #include <iostream>
     template <typename T,int SIZE>
     class insertion_sort
     {
           T data[SIZE];
      public:
       insertion_sort(void);
       void set_data();
       void sort_data();
       void show_data();
      ~insertion_sort(void);
     }; 
```

insert_sort.cpp 文件如下：

```
#include <iostream>
#include "insertion_sort.h"
using namespace std;

template <typename T,int SIZE>
insertion_sort<T,SIZE>::insertion_sort(void)
{
    typedef typename int i;
for(i=0;i<SIZE;i++)
   data[i]=NULL;
}
template <typename T,int SIZE>
insertion_sort<T,SIZE>::set_data(void)
{
    typedef typename int i;
    cout<<"ENTER THE DATA"<<endl;
    for(i=0;i<SIZE;i++)
       cin>>data[i];
}
template <typename T,int SIZE>
insertion_sort<T,SIZE>::sort_data()
{
    typedef typename int i,j;
    T key;
    for(i=1;i<SIZE;i++)
    {
          j=i-1;
          key=data[j]
          while(data[j-i]>key)
          {
             data[j]=data[j-1];
             j--;
           };
           data[j+1]=key;
     }
}
 template <typename T,int SIZE>
insertion_sort<T,SIZE>::show_data()
{
typedef typename int i;
for(i=0;i<SIZE;i++)
    cout<<data[i]<<"\t";
}
template <typename T,int SIZE>
insertion_sort<T,SIZE>::~insertion_sort(void)
{
} 
```

main.cpp 文件如下：

```
#include <iostream>
#include "insertion_sort.h"

using namespace std;

int main()
{
    insertion_sort<char,5> S;
    S.set_data();
    S.sort_data();
    S.show_data();
    return 0;
} 
```

当我构建代码时，我收到以下错误：

```
c:\documents and settings\devil_den\my documents\visual studio 2008\projects\sorting_algorithms\sorting_algorithms\insertion_sort.cpp(17)：错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数

c:\documents and settings\devil_den\my documents\visual studio 2008\projects\sorting_algorithms\sorting_algorithms\insertion_sort.cpp(34)：错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数

c:\documents and settings\devil_den\my documents\visual studio 2008\projects\sorting_algorithms\sorting_algorithms\insertion_sort.cpp(41)：错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数

主文件
生成代码...
构建日志保存在“file://c:\Documents and Settings\devil_den\My Documents\Visual Studio 2008\Projects\Sorting_Algorithms\Sorting_Algorithms\Debug\BuildLog.htm”
Sorting_Algorithms - 3 个错误，0 个警告
========== 构建：0 成功，1 失败，0 最新，0 跳过 ==========

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T09:13:03.280

的定义`set_data()`和缺少它们的返回类型。所有都被声明为返回类型，所以只需添加到定义中：`sort_data()``show_data()``void`

```
template <typename T,int SIZE>
void insertion_sort<T,SIZE>::set_data(void)
{
    // snip ...
} 
```

# ios - 应用内购买截图

> ID：13118622
> 
> 赞同：3
> 
> 时间：2012-10-29T09:11:04.430
> 
> 标签：ios, in-app-purchase, app-store-connect

我有一个非常简单的问题。

当我的应用状态为“等待审核”时，我可以更改应用内购买的屏幕截图吗？

PS：当我创建新的应用内购买时，我附上了错误的截图并忘记了它。现在我的应用正在等待审核，我无法更改此屏幕截图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T09:16:15.587

如果您指的是 Apple 要求提交应用内购买的“审查屏幕截图”，请不要担心：它从未被使用过！这是一个糟糕的设计实现，如果像一个标志“好的，你现在可以查看它”。所以不要担心，祝你的应用好运；）

# php - 使用 php 在 ajax 中获取错误或成功状态

> ID：13118624
> 
> 赞同：1
> 
> 时间：2012-10-29T09:11:14.783
> 
> 标签：php, jquery, ajax

我将 jQuery Ajax 与 PHP 一起使用。当我使用带有 jQ​​uery Ajax 的 post 时，它会将请求发送到 PHP（服务器）。在我的 PHP 代码中，我想返回状态成功或错误。如果出错，则发送错误代码和错误消息，否则，它成功返回成功代码和消息。

如何在 jQuery Ajax 中使用 PHP 做到这一点？

编辑：

```
$.post(url, { id: id },
function(data) {
    // success code do here.
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T09:14:03.017

只需返回带有 json 编码的数组...

```
header('Content-Type: application/json');
$array = array("status"=>"success");
echo json_encode($array);
exit(); 
```

出口是为了防止任何进一步的回声。

在你的 ajax ..

```
$.post(url, { id: id },
function(data) {
    alert(data.status);
}, 'json'); 
```

data.status 等于您的 php 数组键状态..

只是捕捉 Ajax 错误......你可以设置简单..

```
header('Content-Type: application/json');
echo "string whithout json_encode";
exit(); 
```

在这种情况下，将您的 ajax 更改为...

```
$.post(url, { id: id },function(data) {}, 'json')
.success(function(data) { alert("success"); })
.error(function(data) { alert("error"); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:40:38.237

用回声返回

```
PHP: 
if($check == 0){ 
    echo 'success';
    exit();
}
else {
    echo 'failed';
    exit();
} 
```

* * *

```
jquery :
$.post(url, { id: id },
function(data) {
    alert(data);
}); 
```

# java - 跨平台产品和信息展示应用

> ID：13118627
> 
> 赞同：1
> 
> 时间：2012-10-29T09:11:23.080
> 
> 标签：java, silverlight, flash, apache-flex, air

想要创建一个简单的应用程序，可以在 PC 或移动设备上本地运行，它显示将从本地文件系统（文档、视频、html 等）加载的各种产品信息。此外，它可以稍后配置。（更改源目录，更改按钮标签。）

请建议什么框架非常适合开发这种应用程序。谢谢。

# android - 解析 JSON 远程调用并将其存储在本地

> ID：13118632
> 
> 赞同：-1
> 
> 时间：2012-10-29T09:11:44.600
> 
> 标签：android, database, json, parsing

我需要解析来自 URL 的远程响应，该 URL 检索一个大的 JSON 对象并将其存储在本地，以便我们可以执行搜索，例如，在 Android 中的一个活动中。我一直在尝试查找它，但我找不到任何关于如何做到这一点的方法。

请问有什么建议/帮助吗？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:17:11.920

您可以使用 Gson 解析从 url 解析 JSON。

对于存储结果，请使用 sqlite 数据库。

这是[GSON 解析的好例子](http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html)

对于 sqlite，请点击此[链接](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T09:22:44.477

检索到的 JSON 响应存储在 BufferReader 中，即

```
urlClientStream = openHttpClientPostConnection(searchURL,
                        urlParams.toString());

                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(urlClientStream), 8192);

                String line = null;
                while ((line = reader.readLine()) != null) {
                    buffer.append(line);
                }

                JSONObject mainObj = new JSONObject(buffer.toString())
                        .getJSONObject("RESPONSE"); 
```

希望这可以帮助你

# asp.net - mvc 4 webgrid 显示

> ID：13118634
> 
> 赞同：0
> 
> 时间：2012-10-29T09:11:49.050
> 
> 标签：asp.net, sql, asp.net-mvc-4

我有一个选择查询结果，在 column1 和 column2 中有重复的值，而 column3 和 column4 的值因给定的 column1 和 column2 值而异。

我的选择查询结果如下

```
 ab ab_ds a 4
  ab ab_ds b 6
  bc bc_ds d 8
  bc bc_ds a 8 
```

如何获得如下的 webgrid？

```
 ab ab_ds a 4 b 6  
  bc bc_ds d 8 a 8 
```

请建议我是否可以在查询或 webgrid 中做某事

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:54:58.470

如果您使用 linq，则可以使用 GroupBy() 方法。

基于比较值为字符串的类的示例

```
 IEnumerable<IGrouping<string, ColumnClass>> groupBy = list.GroupBy(
    y => y.Column1 + " " + y.Column2); 
```

这会给你一个 IEnumerable< IGrouping< string, YourClass >> 然后你可以使用另一个 linq 查询：

```
 groupBy.Select(item => item.Aggregate(
    item.Key, (current, columnClass) => current + (
    " " + columnClass.Column3 + " " + columnClass.Column4))).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:23:51.760

这个问题是笼统的，所以我将给出一个可能对您有所帮助的笼统答案。

我使用 C5 通用集合库，它具有`MultiHashDictionary`, 这是一个通用集合，您可以在那里加载结果并按照您说的方式获取它们。

`MultiHashDictionary<K, V>`类似于，`Dictionary<k,v>`但键不是唯一的，您可以将其分组。它可以帮助我获得像你这样的结果。

[从http://www.itu.dk/research/c5/](http://www.itu.dk/research/c5/)获取 C5 库

# apache - 客户端发送了格式错误的主机头

> ID：13118635
> 
> 赞同：4
> 
> 时间：2012-10-29T09:11:54.603
> 
> 标签：apache, varnish

我在 Apache 的错误日志中不断收到此错误：

```
[client 127.0.0.1] Client sent malformed Host header 
```

正好每 5 分钟一次。这是因为我们在服务器上安装了 Varnish，但我不明白为什么以及如何修复它。我什至尝试将 Apache 的 error_log 详细程度设置为调试，但没有提供其他有用的信息。任何想法？

我们的 Varnish 配置非常基础：

```
backend default {
     .host = "127.0.0.1";
     .port = "9001";
}

sub vcl_recv {
    remove req.http.X-Forwarded-For;
    set req.http.X-Forwarded-For = client.ip;
} 
```

我们有几个在端口 9001 上运行的虚拟主机。

谁能告诉我有关此错误的更多信息以及如何解决或至少对其进行调查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T10:02:12.653

Varnish 对您的后端执行[健康检查](https://www.varnish-cache.org/trac/wiki/BackendPolling)，可能需要更精确地配置以便 Apache 接受它。如果这不能解决您的问题，请尝试在 Apache 中记录 User-Agent 标头以找出是谁发出了格式错误的请求。

# python - MongoKit 的可调用对象没有属性“find_and_modify”

> ID：13118637
> 
> 赞同：0
> 
> 时间：2012-10-29T09:11:57.713
> 
> 标签：python, pymongo, mongokit

我使用 MongoKit 作为 ODM 框架。我有对象用户：

```
class User(Document):
    __collection__ = 'users'
    ... 
```

这里没有`__database__`- 我使用不同的取决于当前配置文件（开发、测试等）我使用这样的查询来访问数据：

```
app.db.User.one({'email_confirmation_token.hex': token_hex}) 
```

它工作正常。现在我需要使用 find_and_modify 命令。根据[文档](http://namlook.github.com/mongokit/update.html#find-and-modify)，我应该从集合调用此方法以获取字典或从对象调用此方法以获取对象。

此调用有效：

```
app.db.users.find_and_modify({'email_confirmation_token.hex': token_hex}, {'$set': {'active': True}}) 
```

但这 - 没有：

```
app.db.User.find_and_modify({'email_confirmation_token.hex': token_hex}, {'$set': {'active': True}}) 
```

错误消息是：**AttributeError: 'CallableUser' object has no attribute 'find_and_modify'**。

为什么它不包含此属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:12:25.373

尽管有文档记录，但源代码中缺少 find_and_modify()。尝试这个：

```
app.db.User.collection.find_and_modify({'email_confirmation_token.hex': token_hex}, {'$set': {'active': True}}) 
```

# c# - 如何将自定义验证规则应用于 MVC3 中的 ViewModel 属性

> ID：13118639
> 
> 赞同：2
> 
> 时间：2012-10-29T09:11:57.720
> 
> 标签：c#, asp.net-mvc-3, datetime, validation

在我的 MVC 应用程序中，我有以下内容`ViewModel`：

```
public class MyViewModel
{
   public int StartYear { get; set; }
   public int? StartMonth { get; set; }
   public int? StartDay { get; set; }

   public int? EndYear { get; set; }
   public int? EndMonth { get; set; }
   public int? EndDay { get; set; }

   [DateStart]
   public DateTime StartDate
   {
       get
       {
           return new DateTime(StartYear, StartMonth ?? 1, StartDay ?? 1);
       }
   }

   [DateEnd(DateStartProperty="StartDate")]
   public DateTime EndDate
   {
       get
       {
           return new DateTime(EndYear ?? DateTime.MaxValue.Year, EndMonth ?? 12, EndDay ?? 31);
       }
   }
 } 
```

我不使用日历助手，因为我需要这种格式的日期（背后有逻辑）。现在我创建了自定义验证规则：

```
 public sealed class DateStartAttribute : ValidationAttribute
    {
        public override bool IsValid(object value)
        {
            DateTime dateStart = (DateTime)value;
            return (dateStart > DateTime.Now);
        }
    }

    public sealed class DateEndAttribute : ValidationAttribute
    {
        public string DateStartProperty { get; set; }
        public override bool IsValid(object value)
        {
            // Get Value of the DateStart property
            string dateStartString = HttpContext.Current.Request[DateStartProperty];
            DateTime dateEnd = (DateTime)value;
            DateTime dateStart = DateTime.Parse(dateStartString);

            // Meeting start time must be before the end time
            return dateStart < dateEnd;
        }
    } 
```

问题是`DateStartProperty`（在这种情况下`StartDate`）不在`Request`对象中，因为它是在表单发布到服务器之后计算的。因此`dateStartString`始终为空。我怎样才能得到 的价值`StartDate`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:21:11.343

您可以使用反射来获取[此答案](https://stackoverflow.com/questions/6075339/mvc-form-validation-on-multiple-fields)中的其他属性（这对我来说似乎有点 hacky），或者为类创建自定义验证属性，而不是[此处](http://forums.asp.net/t/1600450.aspx/1)讨论的单个属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:03:57.227

试试这个插件：[http](http://docs.jquery.com/Plugins/Validation/multiplefields) ://docs.jquery.com/Plugins/Validation/multiplefields 。

希望这会有所帮助~

# java - Java - 继承的 Fluent 方法返回类型以返回事件类的类型，而不是父类的类型

> ID：13118648
> 
> 赞同：5
> 
> 时间：2012-10-29T09:12:53.153
> 
> 标签：java, inheritance, fluent

当您采用流利的方法时，您可能会遇到以下情况：

```
public class Foo<T extends a>{

    public Foo<T> someMethod(){
          System.out.println("foo");
          return this;
    }

}

public class Bar<T extends b> extends Foo<T> {

         public Bar<T> barMethod(){

            System.out.println("bar");
            return this;
         }

}

public class a{}
public class b extends a{} 
```

流畅接口的优点是您可以链接方法调用，但是虽然 Bar 继承了 someMethod()，但返回类型是 Foo 而不是 Bar，这会破坏以下链：

```
new Bar<b>().someMethod().barMethod(); 
```

一个答案可能是为每个继承的方法添加@Overrides，这样 Bar 就有了额外的方法：

```
 @Override
 public Bar<T> someMethod(){
          System.out.println("foo");
          return this;
    } 
```

但是在大类和扩展类层次结构中，这肯定会证明是一团糟？！是否有适当的返回类型赋予流利的方法，从而每个继承它的类都将返回其特定类型的对象（这样我们就可以在没有强制转换的情况下链接方法）？

我试过：

```
 public <U extends Foo<T>> U someMethod(){
          System.out.println("foo");
          return this;
    } 
```

唉，无济于事。我希望有人知道这个问题的简单而优雅的解决方案。该项目很大，因此如果可能，它需要可维护和可扩展。

感谢您在这种情况下提供的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T09:29:42.153

如果您不介意未经检查的演员表，您可以这样做：

```
public class Foo<T, F extends Foo<T, F>> {
  public F someMethod() {
    System.out.println("foo");
    return (F) this; // <--- That's the unchecked cast! Tucked safely away.
  }
  public static void main(String[] args) {
    new Bar<String>().someMethod().barMethod();
  }
}

class Bar<T> extends Foo<T, Bar<T>> {
  public Bar<T> barMethod() {
    System.out.println("bar");
    return this;
  }
} 
```

就个人而言，我为整个项目全局禁用未经检查的强制转换警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T09:21:57.217

你可以做的是定义`barMethod`方法抽象，所以现在你可以在`Foo`类型上调用它。

```
public abstract class Foo<T extends a> {

    public Foo<T> someMethod() {
        System.out.println("foo");
        return this;
    }

    public abstract Foo<T> barMethod();
} 
```

现在您可以轻松调用

```
new Bar<b>().someMethod().barMethod(); 
```

# ruby-on-rails - “create”的未定义方法“stringify_keys”：再次在 ruby on rails 中使用字符串

> ID：13118652
> 
> 赞同：1
> 
> 时间：2012-10-29T09:12:57.377
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我收到一个错误

```
Started POST "/actions" for 127.0.0.1 at 2012-10-29 15:04:01 +0600
Processing by ActionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"lfHYF3EQn1/lMReK3alX3NsGa4wSMejC/0fEeoAFYUY=", "commit"=>"Create Action"}
Completed 500 Internal Server Error in 1ms

NoMethodError (undefined method `stringify_keys' for "create":String):
  app/controllers/actions_controller.rb:43:in `new'
  app/controllers/actions_controller.rb:43:in `create' 
```

此代码完全由 Rails 生成，我不明白为什么它不起作用

这是模型

```
class Action < ActiveRecord::Base
  attr_accessible :name, :user_id
end 
```

这是控制器部分

```
# GET /actions/new
# GET /actions/new.json
def new
  @action = Action.new

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @action }
  end
end

def create
  @action = Action.new(params[:action]) # here we get an error !

  respond_to do |format|
    if @action.save
      format.html { redirect_to @action, notice: 'Action was successfully created.' }
      format.json { render json: @action, status: :created, location: @action }
    else
      format.html { render action: "new" }
      format.json { render json: @action.errors, status: :unprocessable_entity }
    end
  end
end 
```

这是表单代码

```
<%= form_for(@action) do |f| %>
  <% if @action.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@action.errors.count, "error") %> prohibited this action from being saved:</h2>

      <ul>
      <% @action.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :user_id %><br />
    <%= f.number_field :user_id %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

当我按帖子时，萤火虫显示此请求参数

```
utf8:✓
authenticity_token:lfHYF3EQn1/lMReK3alX3NsGa4wSMejC/0fEeoAFYUY=
action[name]:sdf
action[user_id]:23
commit:Create Action 
```

如果我理解正确，这必须有效，并且 Rails 必须将 action[name] 和 action[user_id] 转换为哈希表并将其放入参数 [:action]，然后 Action.new 将此哈希表作为参数。怎么了 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T09:19:24.473

啊，我知道。你有名字冲突。

`action`是保留名称。连同`controller`，`id`也许还有其他人。为您的表单使用另一个名称。

当您发布到 时`/actions/create`，`params[:controller]`应该是“帖子”并且`params[:action]`应该是“创建”。这些参数由 Rails 分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:23:37.690

在您的参数中，您得到 params[:controller] = controller_name 和 params[:action] = action_name
在您的情况下，您是从 action_name 创建 Action abject 而不是对象操作的参数。尝试在参数中为对象参数使用不同的名称。

# php - Icenium/phonegap ios 推送通知和 php 处理

> ID：13118654
> 
> 赞同：2
> 
> 时间：2012-10-29T09:13:01.800
> 
> 标签：php, ios, cordova, push-notification

我正在使用 Icenium 和 Apache Cordova 构建 iOS 应用程序，并且正在研究推送通知。

我已经看到[这个](http://www.pushwoosh.com/)用于phonegap 推送通知的插件，但是我还没有找到一个用于icenium 的插件，还是它与平台无关？或者 Apache Cordova/icenium/Kendo ui/jQ mobile 中有没有办法做到这一点？

我假设 PHP 将处理服务器上某处的请求。我正在寻找的是让我们说..当数据库中列示例的值等于 3（用户定义）时，用户希望得到通知，以便通知他们，例如：

标识示例

1 : 4

2 : 3

3 : 3

4 : 2345

id 2 和 3 将在插入表时发送。我会做一个 SQL 查询并通过 JSON 发送，但是什么会初始化这个过程呢？

这是我第一次正确构建应用程序。如果有任何好的教程，我很乐意看到它们；到目前为止，我还没有找到很多。更多的是导致我出现问题的布局，并对其进行样式设置并使其感觉“正确”。

注意，icenium 和 phonegap 不使用 Objective C，而是使用 javascript、html、css 和 php（在服务器上）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T11:54:19.513

全面披露：我是 Icenium 背后团队的一员。

我们发布了一个新版本，其中包括iOS 和 Android 上的[通用推送通知插件。](https://github.com/bobeast/PushPlugin)[在此处](http://docs.icenium.com/release-notes/v1-3#pushplugin-support)发布说明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T14:28:37.003

这个 icenium 的例子可以帮助你处理通知。[https://github.com/Icenium/sample-notification](https://github.com/Icenium/sample-notification)

@Christian，这不是真的，您不需要使用带有 Icenium 的 mac。Apple dev profile 99 美元，然后进入 iTunes 获取证书，然后进入 Icenium Mist 平台，然后使用 Icenium iTunes 连接部署到应用商店。看看这个如何：[http ://docs.icenium.com/working-with-devices/apple-ios-devices/how-to-create-and-install-your-developer-provisioning-profile-and-certificate](http://docs.icenium.com/working-with-devices/apple-ios-devices/how-to-create-and-install-your-developer-provisioning-profile-and-certificate)

然后这个：[http ://docs.icenium.com/icenium-mobile-app-development/using-icenium-mist/publishing-with-mist](http://docs.icenium.com/icenium-mobile-app-development/using-icenium-mist/publishing-with-mist)

Icenium 还提供了来自应用商店调用 ION 的包装器 - 用于在 iPHone 手机上进行测试，非常酷..

Icenium 是要走的路，后来有 3 个应用程序，我们正在继续将其作为我们选择的平台。

<== ** 更新 ** ==> 尝试新插件 - [https://github.com/Icenium/PushPlugin](https://github.com/Icenium/PushPlugin)

# c# - 如何从某个网页复制所有文本并将其保存到记事本C#

> ID：13118660
> 
> 赞同：5
> 
> 时间：2012-10-29T09:13:24.620
> 
> 标签：c#, winforms, copy, notepad

我有一个基于某些标准启动网页的 C# Windows 窗体应用程序。

现在我希望我的应用程序自动复制该页面中的所有文本（CSV 格式）并将其粘贴并保存在记事本中。

以下是需要复制的数据示例的链接： [http ://www.wunderground.com/history/airport/FAJS/2012/10/28/DailyHistory.html?req_city=Johannesburg&req_state=&req_statename=South+非洲&格式=1](http://www.wunderground.com/history/airport/FAJS/2012/10/28/DailyHistory.html?req_city=Johannesburg&req_state=&req_statename=South+Africa&format=1)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T09:20:20.027

您可以使用 .NET 4.5 中的新玩具[HttpClient](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)，例如如何获取 google 页面：

```
 var httpClient = new HttpClient();
 File.WriteAllText("C:\\google.txt",    
                           httpClient.GetStringAsync("http://www.google.com")
                                     .Result); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T09:17:36.453

[http://msdn.microsoft.com/en-us/library/fhd1f0sw.aspx](http://msdn.microsoft.com/en-us/library/fhd1f0sw.aspx)结合[http://www.dotnetspider.com/resources/21720-Writing-string-content-file.aspx](http://www.dotnetspider.com/resources/21720-Writing-string-content-file.aspx)

```
public static void DownloadString ()
{
    WebClient client = new WebClient();
    string reply = client.DownloadString("http://www.wunderground.com/history/airport/FAJS/2012/10/28/DailyHistory.html?req_city=Johannesburg&req_state=&req_statename=South+Africa&format=1");

    StringBuilder stringData = new StringBuilder();
    stringData = reply;  
    FileStream fs = new FileStream(@"C:\Temp\tmp.txt", FileMode.Create);
    byte[] buffer = new byte[stringData.Length];
    for (int i = 0; i < stringData.Length; i++)
    {
        buffer[i] = (byte)stringData[i];
    }
    fs.Write(buffer, 0, buffer.Length);
    fs.Close();
} 
```

**编辑**Adil 用的`WriteAllText`方法，效果更好。所以你会得到这样的东西：

```
WebClient client = new WebClient();
string reply = client.DownloadString("http://www.wunderground.com/history/airport/FAJS/2012/10/28/DailyHistory.html?req_city=Johannesburg&req_state=&req_statename=South+Africa&format=1");
System.IO.File.WriteAllText (@"C:\Temp\tmp.txt", reply); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-29T09:30:46.053

简单的方法：使用[`WebClient.DownloadFile`](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloadfile.aspx)并保存为`.txt`文件：

```
var webClient = new WebClient();
webClient.DownloadFile("http://www.google.com",@"c:\google.txt"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T09:15:46.760

您需要[**WebRequest**](http://msdn.microsoft.com/en-us/library/system.net.webrequest.aspx)来读取流并将字符串保存到文本文件。您可以使用[**File.WriteAllText**](http://msdn.microsoft.com/en-us/library/system.io.file.writealltext.aspx)将其写入文件。

```
WebRequest request = WebRequest.Create ("http://www.contoso.com/default.html");
                    request.Credentials = CredentialCache.DefaultCredentials;            
HttpWebResponse response = (HttpWebResponse)request.GetResponse ();            
Console.WriteLine (response.StatusDescription);            
Stream dataStream = response.GetResponseStream ();            
StreamReader reader = new StreamReader (dataStream);            
string responseFromServer = reader.ReadToEnd ();
System.IO.File.WriteAllText (@"D:\path.txt", responseFromServer ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T09:16:04.650

您可以使用网络客户端来执行此操作：

```
System.Net.WebClient wc = new System.Net.WebClient();
byte[] raw = wc.DownloadData("http://www.wunderground.com/history/airport/FAJS/2012/10/28/DailyHistory.html?req_city=Johannesburg&req_state=&req_statename=South+Africa&format=1");

string webData = System.Text.Encoding.UTF8.GetString(raw); 
```

然后字符串**webData**包含网页的完整文本

# lucene.net - TermPositions 在 lucene 中是如何工作的？

> ID：13118662
> 
> 赞同：0
> 
> 时间：2012-10-29T09:13:27.847
> 
> 标签：lucene.net, lucene

我有 Lucene .Net 索引（目前正在运行 2.9.2 版，但我将很快升级到新的 3.0.3）。

对于搜索性能问题，我需要创建从 DocId 到 Application Id 的内存映射 - 所以我不需要从索引中获取存储的值（搜索结果可能会返回数千个文档......）。由于我有很多索引迭代，我需要多次更新\重新创建这个映射 - 所以我需要快速完成。

我看到[这篇很棒的文章](http://invertedindex.blogspot.co.il/2009/04/lucene-dociduid-mapping-and-payload.html)试图解决这个问题，并通过使用 Lucene 的`FieldCache`机制检索结果或`TermPositions`在唯一索引字段上使用枚举来比较时间。正如作者所说，确实使用 Lucene 创建映射`TermPositions`要快得多`FieldCache`，但理解为什么对我来说非常重要。有人可以向我解释一下两者`TermPositions`在`FieldCache`幕后做什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:42:56.000

原因很简单。Lucene 将字段值存储为字符串。当您调用`GetInts`并且值不在缓存中时，它需要读取字符串，然后将它们解析为整数。

当您使用有效负载时，您会将整数编码为字节数组，然后再转换回整数。这样，您只需要求 Lucene 在给定位置读取 4 个原始字节，然后将其转换回 int。

字符串读取/解析操作在这里有很大的不同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T03:41:55.907

Lucene 中的 TermPositions 是一项高级功能。我只用过一次（像你一样从 2.9.x 迁移到 3.0.3 RC2 时）。TermPositions 使用 Tuple 非常有效地存储，这使得作为数据结构的访问速度很快，而且它很小，因此检索带有术语“位置”的有效负载也很快。

实际上，我最终浏览了名为“Lucene in Action”的书中的示例……它适用于 Java，但它基于 Lucene 3.0.3，非常适合 Lucene.NET 3.0.3 :)

我提到这一点，因为 FieldCache 在那本书中涉及的很深，如果你想深入了解（深入了解它）......我会先看看那里。

顺便说一句...那篇文章基于 Lucene 2.2，2.3->2.9.x 是一个相当大的飞跃，因为他们添加了“近乎实时的搜索”并使很多方法过时...3.0.3 也改变了这一点，所以他们的数字可能无法反映正在发生的事情。

# webkit - 如何使用弹性框绘制分数的倾斜运算符？

> ID：13118663
> 
> 赞同：2
> 
> 时间：2012-10-29T09:13:28.097
> 
> 标签：webkit

我想为分数绘制倾斜运算符。IE。mfrac 上的斜角运算符。如何使用弹性框绘制它。例如：a/b 代替普通分数。我想要实现前一个的想法。那是使用 c++ 的 a/b 类型。

# c - 仅当首先将所有变量设置为 0 时，代码才有效。UB？

> ID：13118664
> 
> 赞同：6
> 
> 时间：2012-10-29T09:13:30.303
> 
> 标签：c, undefined-behavior

此代码通过正确识别一些数字回文并在其他回文上失败而随机失败。

```
#include <stdio.h>

int main(int argc, char *argv[])
{
   int n, reverse = 0, temp;

   printf("Enter a number to check if it is a palindrome or not\n");
   scanf("%d",&n);

   temp = n;

   while( temp != 0 )
   {
      reverse = reverse * 10;
      reverse = reverse + temp%10;
      temp = temp/10;
   }

   if ( n == reverse )
      printf("%d is a palindrome number.\n", n);
   else
      printf("%d is not a palindrome number.\n", n);

   return 0;
} 
```

例如，上面的代码错误地说“87678”不是数字回文。

检查返回`scanf()`表明它成功并且打印的值`n`对于 87678 的输入是正确的。

然而，代码正确地说“4554”是一个回文。

但是，通过添加：

```
n = reverse = temp = 0; 
```

在第一个`printf()`程序似乎一直正常工作之前。那么第一个版本发生了什么？当变量在使用前未初始化时，这是某种未定义的行为吗？

编辑：稍后将提供无法查看编译器在做什么的编译版本的程序集。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T09:50:24.327

除非`sizeof(int)`小于 4，否则您要么遇到编译器错误，要么您的硬件出现故障，或者您的系统中发生了某种形式的数据损坏。

回答这个问题：不，程序中的任何地方都没有未定义的行为（假设`scanf()`真的没有失败）。

尝试在您的系统上运行 memtest 以排除 RAM 问题：[http ://www.memtest.org](http://www.memtest.org)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T09:56:25.253

这听起来很像你有一个编译器错误，因为这适用于更高版本的 gcc。我很想看看 gcc -S 的输出（请粘贴？），也想知道你正在使用的编译命令。（尤其是优化级别）。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-29T09:20:21.467

与 Java 不同，C 没有 int 的默认值。你可以参考这篇[文章](https://stackoverflow.com/questions/4532871/c-language-define-integer-int-whats-the-default-value)，因为它讨论了这个类似的问题。

# linux - 通过recv C / C ++通过套接字传递结构

> ID：13118670
> 
> 赞同：0
> 
> 时间：2012-10-29T09:13:55.643
> 
> 标签：linux, sockets, struct, timeslots

Helo，我正在尝试像这样通过它

```
typedef struct t_timeSliceRequest{
unsigned int processId;
unsigned int timeRequired;
int priority;
}timeSliceRequest;

struct t_timeSliceRequest request = { 1,2,1 };
sendFlag = send(socketID,(timeSliceRequest *) &request, sin_size ,0); 
```

在服务器端

```
recvFlag = recv(socketID,(timeSliceRequest *) &request,sin_size,0); 
```

但它接收垃圾，甚至recv返回-1，请帮助

这是我完整的康德

```
#include<sys/socket.h>
#include<sys/types.h>
#include<string.h>
#include<stdio.h>
#include<arpa/inet.h>
#include<time.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <netinet/in.h>

enum priority_e{ high, normal, low };

typedef struct t_timeSliceRequest{
    unsigned int processId;
    unsigned int timeRequired;
    int priority;
}timeSliceRequest;

typedef struct t_TimeSliceResponse {
    timeSliceRequest original_req;

    // Unix time stamp of when process was started on server
    unsigned int time_started;

    // Waiting and running time till end of CPU bust
    unsigned int ttl;

} TimeSliceResponse;

int main(int argc, char ** argv){
    int socketID = 0, clientID = 0;
    char sendBuffer[1024], recvBuffer[1024];
    time_t time;
    struct sockaddr_in servAddr, clientAddr;
    struct t_timeSliceRequest request = {1,1,0};

memset(sendBuffer, '0', sizeof(sendBuffer));
memset(recvBuffer, '0', sizeof(recvBuffer));

fprintf(stdout,"\n\n --- Server starting up --- \n\n");
fflush(stdout);

socketID = socket(AF_INET, SOCK_STREAM, 0);
if(socketID == -1){
    fprintf(stderr, " Can't create Socket");
    fflush(stdout);
}

servAddr.sin_family = AF_INET;
servAddr.sin_port = htons(5000);
servAddr.sin_addr.s_addr = htonl(INADDR_ANY);

int bindID, sin_size, recvFlag;
bindID = bind(socketID, (struct sockaddr *)&servAddr, sizeof(servAddr)); // Casting sockaddr_in on sockaddr and binding it with socket id
if(bindID!=-1){
    fprintf(stdout," Bind SucessFull");
    fflush(stdout);
    listen(socketID,5);
    fprintf(stdout, " Server Waiting for connections\n");
    fflush(stdout);
    while(1){
        sin_size = sizeof(struct sockaddr_in);
        clientID = accept(socketID, (struct sockaddr *) &clientAddr, &sin_size);
        fprintf(stdout,"\n I got a connection from (%s , %d)", inet_ntoa(clientAddr.sin_addr), ntohs(clientAddr.sin_port));
        fflush(stdout);
        sin_size = sizeof(request);
        recvFlag = recv(socketID, &request,sin_size,0);
        perror("\n Err: ");
        fprintf(stdout, "\n recvFlag: %d", recvFlag);
        fprintf(stdout, "\n Time Slice request received:\n\tPid: %d \n\tTime Required: %d ", ntohs(request.processId), ntohs(request.timeRequired));
        fflush(stdout);
        snprintf(sendBuffer, sizeof(sendBuffer), "%.24s\n", ctime(&time));
        write(clientID, sendBuffer, strlen(sendBuffer));
        close(clientID);
        sleep(1);
    }
}else{
    fprintf(stdout, " Unable to Bind");
}
close(socketID);
return 0;
} 
```

客户端代码是：

```
#include <sys/socket.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <netdb.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <arpa/inet.h>

enum priority_e{ high = +1, normal = 0, low = -1};

typedef struct t_timeSliceRequest{
    unsigned int processId;
    unsigned int timeRequired;
    int priority;
}timeSliceRequest;

int main(int argc, char *argv[])
{
    int socketID = 0 /*Socket Descriptor*/, n = 0;
    char recvBuffer[1024];
    memset(recvBuffer, '0',sizeof(recvBuffer));
    struct sockaddr_in servAddr;

    struct t_timeSliceRequest request = { 1,2,high };

    if(argc!=2){
        fprintf(stderr,"\n Usage: %s <ip of server> \n",argv[0]);
        return 1;
    }

    socketID = socket(AF_INET, SOCK_STREAM, 0);
    if(socketID == -1){
        fprintf(stderr, "\n Can't create socket \n");
        return 1;
    }

    servAddr.sin_family = AF_INET;
    servAddr.sin_port = htons(5000);

    if(inet_pton(AF_INET, argv[1], &servAddr.sin_addr)==-1){
        fprintf(stderr, "\n Unable to convert given IP to Network Form \n inet_pton Error");
        return 1;
    }

    int connectFlag, sendFlag = 0;
    connectFlag = connect(socketID, (struct sockaddr *)&servAddr, sizeof(servAddr));
    if(connectFlag == -1){
       fprintf(stderr, " Connection Failed\n");
       return 1;
    }

    int sin_size = sizeof(struct t_timeSliceRequest);
    fprintf(stdout, " \n %d \n %d \n %d", request.processId, request.timeRequired, request.priority);
    sendFlag = send(socketID, &request, sin_size ,0);
    fprintf(stdout, "\nSend Flag: %d\n", sendFlag);

    n = read(socketID, recvBuffer, sizeof(recvBuffer)-1);
    recvBuffer[n] = 0;
    fprintf(stdout, "%s",recvBuffer);
    if(n < 0){
        fprintf(stderr, " Read error\n");
    }
    return 0;
} 
```

这是完整的代码，它给出“传输端点未连接”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T09:55:38.373

请记住，通过网络发送这样的结构可能会导致互操作性问题：

1.  如果源和目标具有不同的字节序，您将收到错误的数据（考虑使用`htonl`将数据转换为网络字节序等功能）
2.  你的结构需要被打包，否则不同的编译器可以不同地对齐结构的变量（请参阅[this](http://gcc.gnu.org/onlinedocs/gcc/Variable-Attributes.html)以获得有关对齐变量的想法）

在任何情况下，都`ENOTCONN`表明在两台主机之间建立连接时出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:47:47.953

当您的套接字未绑定到任何（端口，地址）对时，将返回传输端点未连接错误。

如果是服务器端，则应使用`accept`调用返回的套接字描述符。如果是客户端 - 您应该使用成功调用返回的套接字`connect`。

顺便说一句，以你的方式发送结构是非常危险的。编译器可能会在结构成员之间插入填充字节（您的程序不可见，但它们在结构中占用空间）以符合目标平台的一些对齐规则。此外，不同的平台可能有不同的字节序，这可能会完全破坏你的结构。如果您的客户端和服务器是为不同的机器编译的，则结构布局和字节序可能不兼容。为了解决这个问题，您可以使用**打包**结构。将结构声明为打包的方式取决于编译器。对于 GCC，这可以通过向结构添加[特殊属性](http://gcc.gnu.org/onlinedocs/gcc/Type-Attributes.html)来完成。

解决此问题的另一种方法是将结构的每个单独字段手动放入原始字节缓冲区。接收方应该以与最初将数据放入该缓冲区的方式完全相同的方式取出所有这些数据。这种方法可能很棘手，因为在保存多字节值（如 int、long 等）时需要考虑网络字节顺序。为此，有一组特殊的函数，例如`htonl`,等。`htons``ntohs`

**更新**

在您的服务器中：

```
recvFlag = recv(socketID, &request,sin_size,0); 
```

这里应该是

```
recvFlag = recv(clientID, &request,sin_size,0); 
```

`socketID`是一个被动套接字，只能接受连接（不发送任何数据）。

更重要的是，`accept`没有检查 -1 的结果。

# codeigniter - Codeigniter Datamapper - 通过 __construct 添加表名

> ID：13118677
> 
> 赞同：3
> 
> 时间：2012-10-29T09:14:05.917
> 
> 标签：codeigniter, codeigniter-datamapper

在我的 CMS 中，我想通过在数据库中创建一个表来添加模块。但是带有数据映射器的 Codeigniter 有一个强制性规则：在代码中给出表名。我创建了一个 Datamapper 模型，如下所示：

```
class Module_universeel extends DataMapper {

    public $table = 'module_universeel';
    public $has_one = array('page');

    public function __construct($module_table=null) {

        parent::__construct();
        if(isset($module_table)) $this->table = $module_table;

    }
} 
```

这在我创建一个名为“module_universeel”的表时有效。当我将表名更改为“module_news”或其他内容时，它可以工作。但它不会改变我的数据映射器的结构（$this->fields）。

我怎样才能做到这一点？有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:43:56.510

Datamapper 缓存表定义，由配置属性“production_cache”控制。

如果启用缓存，则不会在每次页面加载时都查询该表，但会使用缓存的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:09:42.697

我有解决办法。我将此添加到我的数据映射器模型中：

```
 public function updateTableFields(){
            $this->fields = array();
            $data_fields = $this->db->field_data($this->table);
            foreach ($data_fields as $data_field){
                $this->fields[] = $data_field->name;
                $this->stored->{$data_field->name} = "";
            }

        } 
```

我将它添加到我的构造函数中：

$this->updateTableFields();

现在我成功地改变了结构。谢谢你帮助我！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T09:23:20.133

因为`this->fields`数组被填入了`parent::__construct();`并且此时表名仍然是`module_universeel`

尝试这个：

```
if(isset($module_table)) $this->table = $module_table;
parent::__construct(); 
```

# iphone - 是否可以向系统搜索提供有关我的应用程序的其他信息？

> ID：13118679
> 
> 赞同：3
> 
> 时间：2012-10-29T09:14:15.353
> 
> 标签：iphone, objective-c, ios

iOS 中有一个系统搜索，允许用户通过搜索输入的关键字来搜索应用名称、邮件消息、日历等，从而搜索整个设备。是否可以向系统搜索提供有关我的应用的一些附加信息（内容信息）？我们正在开发一些图形内容丰富的应用程序，那里有各种对象。

客户问我们，是否可以实现这样的用例：用户输入某个对象的名称，系统搜索找到该对象并在结果列表中显示我们的应用程序名称 :) 也许可以创建一些带有信息的“站点地图”关于应用程序内容，将其放入 plist 中并要求系统搜索将其用于搜索索引。我很确定这是不可能的，只是想 100% 确定:)

**更新：**一个想法 - 也许系统搜索也使用来自 iTunes 的应用程序描述文本？如果是这样，那么我们可以在那里放置其他信息并解决该问题:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:34:15.677

对于静态关键字（在构建应用程序时预定义），您可以执行以下操作：[如何让 iPhone 应用程序出现在 Spotlight 中且查询不完全匹配](https://stackoverflow.com/questions/1592375/how-to-get-an-iphone-app-to-appear-in-spotlight-with-a-query-that-doesnt-exactl)

不幸的是，似乎没有任何方法可以动态添加关键字，例如使用您的应用程序创建的对象/文件，就像 Apple 提供的应用程序一样。希望将来的 iOS (7+) 版本能够添加将应用程序内容添加到 Spotlight 的功能。

# xslt-1.0 - if标签中可以使用name()方法吗

> ID：13118681
> 
> 赞同：2
> 
> 时间：2012-10-29T09:14:18.520
> 
> 标签：xslt-1.0

如果注释了 if 条件，我会得到 w:p、w:sec 等的输出，这正是我所需要的。但是对于只允许打印 w:p 的 if 条件并没有发生。任何人都可以解决这个问题...

```
<xsl:param name="para" select="w:p"/>

 <xsl:template match="/">

         <xsl:for-each select="node()/*/*">
            <xsl:if test = "name() = $para">
                <xsl:value-of select="name()"/><xsl:text>
    </xsl:text>
            </xsl:if>
         </xsl:for-each>

    </xsl:template> 
```

**输入 XML：**

```
<w:p>
<w:pPr></w:pPr>
</w:p>
<w:sec>
</w:sec> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:56:52.200

**问题在这里**：

> ```
> <xsl:param name="para" select="w:p"/> 
> ```

这试图选择文档节点的子节点，名为“w:p”而不是字符串“w:p”。

**解决方案**：

将以上内容替换为：

```
<xsl:param name="para" select="'w:p'"/> 
```

# java - 解决以下正则表达式

> ID：13118688
> 
> 赞同：3
> 
> 时间：2012-10-29T09:15:18.647
> 
> 标签：java, regex

请考虑以下文本：

```
 String tempStr =
            "$#<div style=\"text-align:left;\">$#Order-CAS No#$</div>$#abc#$";

    Pattern p = Pattern.compile("(?<=\\$#)(\\w*)(?=#\\$)");
    Matcher m = p.matcher(tempStr);

    List<String> tokens = new ArrayList<String>();
    while (m.find()) {
        System.out.println("Found a " + m.group() + "."); 
```

但它只给我 abc ..我想要 Order-CASNo 和 abc 的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T09:17:01.187

表达式`\\w*`与连字符或空格不匹配。试试`[\\w\\s-]*`吧。

```
Pattern p = Pattern.compile("(?<=\\$#)([\\w\\s-]*)(?=#\\$)"); 
```

在此处阅读有关字符类的更多信息：

*   [字符类或字符集](http://www.regular-expressions.info/charclass.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:31:46.400

终于得到解决方案。

```
Pattern p = Pattern.compile("(?<=\\$#)([\\w-\\s\\w]*)(?=#\\$)"); 
```

# php - 如何从特定的类或属性中选择定义的类型？

> ID：13118690
> 
> 赞同：0
> 
> 时间：2012-10-29T09:15:22.450
> 
> 标签：php, oop, design-patterns

我需要创建一个具有多态对象的系统。

每种类型的对象都应由特定的处理程序处理，因此我需要确定正确处理它的类型。

我想知道最好的设计决定是什么：

*   创建一个类似的抽象基类`ObjectBase`，然后扩展到特定的对象，比如`CustomObjectA`和`CustomObjectB`

*   创建一个通用对象`GenericObject`并使用`$type`传递给构造函数的属性（`type`应该是不可变的）。

请注意，对象没有区别，只是它们的处理方式不同，我的意思是，它们的行为中没有添加属性或方法或任何东西。

有什么反馈吗？

* * *

**编辑：**

第一个解决方案

```
abstract class ObjectBase {}

class CustomObjectA extends ObjectBase {}

class HandlerManager {
     public function process(ObjectBase $object) {
          if ($object instanceof CustomObjectA) {

              $customObjectAHandler->process($object);
          }
     }
} 
```

第二种解决方案

```
class GenericObject {
    protected $type;

    public function __construct($type)
    {
        $this->type = $type;
    }
}

class ObjectTypeAHandler {
    public function process(GenericObject) { 
    }

    public function supportsType(GenericObject $object)
    {
        return 'typeA' === $object->getType();
    }
}

   class HandlerManager {
       public function process(GenericObject $object) {
          if ($customObjectAHandler->supportType($object)) {
               $customObjectAHandler->process($object);
          }
       }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:22:33.937

让所有处理程序共享一个基类。让对象使用在基类上抽象的工厂方法创建正确的处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:23:32.997

我会推荐你​​第一种方式。创建 2 个没有主体的对象并不难，但是如果您想在未来改变它们的行为 - 您将有一些事情可以完成。

# php - 使用 php，填充当前月份的天数

> ID：13118694
> 
> 赞同：7
> 
> 时间：2012-10-29T09:15:30.673
> 
> 标签：php, calendar

> **可能重复：**
> [如何使用 PHP 生成每月的天数？](https://stackoverflow.com/questions/8616197/how-to-generate-monthly-days-with-php)

使用 PHP，以这种格式给出一个月：10 - 10 月，11 - 11 月，我将如何填充一个数组，其中键代表给定月份的每一天。

所以，

例如，对于二月份，您将拥有一个包含 1-28 键的数组。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-29T09:33:51.937

您可以使用此功能：

```
function dates_month($month, $year) {
    $num = cal_days_in_month(CAL_GREGORIAN, $month, $year);
    $dates_month = array();

    for ($i = 1; $i <= $num; $i++) {
        $mktime = mktime(0, 0, 0, $month, $i, $year);
        $date = date("d-M-Y", $mktime);
        $dates_month[$i] = $date;
    }

    return $dates_month;
}

echo"<pre>"; 
print_r(dates_month(2, 2012));
echo"</pre>"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T09:19:23.443

```
$date = '02 February';
$days = array_fill_keys(
    range(1, date('t', gmmktime(0, 0, 0, (integer) $date, 1))),
    NULL
); 
```

假设，今年（否则二月可能是 28 或 29）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T09:19:57.173

**[cal_days_in_month](http://php.net/manual/en/function.cal-days-in-month.php)** — 返回给定年份和日历的一个月中的天数

```
int cal_days_in_month ( int $calendar , int $month , int $year ) 
```

**例如**。

```
$date = '02 February';
list($month, $monthname) = split(' ', $date);
$num = cal_days_in_month(CAL_GREGORIAN, intval($month), 2012); //$num = 29 
```

用正确的数字填充一个数组，从`$num`。

# html - 具有凸起列效果的 HTML 表格

> ID：13118698
> 
> 赞同：1
> 
> 时间：2012-10-29T09:16:01.467
> 
> 标签：html, css

我有一个 HTML 表格的挑战，我们需要有凸起的列。如果您查看随附的图像，您会明白我的意思。 ![凸柱效果 - 表格](../Images/363627aa0a73b0dbb5d696db6053e26f.png) 这些凸起的列的目的是引起用户对它们的注意。

问题是：

1.  要获得列高于其他列的效果，您需要某种元素/高度/边距出现在表格边界之外，这似乎不起作用
2.  底部也一样
3.  要正确显示投影，需要将其应用于列中的所有单元格。

我们确实通过将其拆分为多个表然后将样式应用于应该是凸起列的表来实现这一点。我附上的图像实际上是一个像这样工作的活表。但是，你失去了表的所有其他需要的功能......

1.  如果文本在表 1 中换行但在表 2 中不换行，则行高不匹配。
2.  为了解决行高问题，我们对每个表格的行应用了固定高度，但是您必须强制文本不换行。如果你得到的文本比宽度长，你就会遇到麻烦。

有谁知道如何在不拆分表格的情况下实现这一点？

谢谢，雅克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:49:43.590

尝试在标题行上方的表格中增加一行（您可能必须停止使用任何`th`标签），以便在顶部为您提供上栏。同样对于底部，一个额外的突出显示行。

尽管您必须对表格进行一些妥协才能做到这一点，但在我的书中，这比分成 2 个表格更好，因为这违背了表格标签的所有目的；显示一个表格，并轻松声明该表格。

表格内的效果可能最好使用 jquery 完成，除非突出显示的列的选择完全是静态的，在这种情况下，请考虑通过适当地生成 html 来呈现静态 html 版本。

# c - PC-Lint (by Gimpel) 如何跨多个模块查看？

> ID：13118704
> 
> 赞同：3
> 
> 时间：2012-10-29T09:16:18.523
> 
> 标签：c, static-analysis, lint, pc-lint

我在 C 代码库上使用 Gimpel 的 PC-Lint v8.00，并希望了解它如何遍历模块。PC-lint 手册仅说 PC-Lint “查看多个模块”。它是如何做到的？比如，是不是从一个模块开始，把所有相关的包含文件和源文件组合成一大段代码来分析？为了理解程序流程，它搜索多深？

在第二个相关问题中，我有一个用例，一次从代码库中提取一个 C 模块而不是将长列表中的每个 C 模块提供给 PC-Lint 对我来说是有益的。但是，如果我只提供一个 C 模块，它会自动找到它所依赖的其他 C 模块，并使用这些模块来了解指定 C 模块的程序流程吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T15:27:22.570

PC Lint 在解析源文件时会创建某种运行时数据库，并记录全局变量、外部声明等内容。当它处理完所有编译单元（递归地处理所有包含文件的 C 文件）时，它会做什么链接器确实会生成您的输出，但它不会生成代码，而是报告某些类型的错误，例如：未使用的外部声明，未使用的未实现原型，未使用的全局函数。这些问题并不总是由链接器报告，因为代码生成非常有可能：这些项目从未在任何地方使用过！

搜索深度可以受选项影响`-passes`，这可以以执行时间为代价实现更好的价值跟踪。请参阅 PDF 手册中的第 10.2.2.4 节（适用于版本 9.x）。

对于您的第二个问题，不，如果您在 Lint 命令行上仅提供一个（或几个）源 (C) 文件名，PC Lint 将仅处理该文件 - 并且递归地处理所有使用的包含文件。您可能希望使用`-u`“unit-checkout”选项来告诉 PC Lint 它只处理完整项目的一部分。然后，Lint 将抑制对部分项目无用的某些类型的警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-06T01:07:02.150

我认为原则上您是在询问 LINT 对象模块，请参阅 Lint 手册 PDF 的第 9 章。使用 say`lint -u a1.c -oo`生成 a1.lob，然后再链接在一起使用`lint *.lob`以生成模块间消息。

您还问了一个相关的具体问题（[加速静态分析工具 PC-Lint 的任何提示？使用 .LOB 文件的任何经验？](https://stackoverflow.com/questions/13562541/any-tips-for-speeding-up-static-analysis-tool-pc-lint-any-experiences-using-lo?rq=1)）但我不确定我是否理解您对“您说它对 linting 的影响有多大”的担忧时间？”，因为我会说这取决于。您当前的 lint-time / 速度是多少？您在几年前发布过，那么在一台新机器上运行这项工作怎么样？韩国

# c++ - select() 总是返回 0

> ID：13118705
> 
> 赞同：5
> 
> 时间：2012-10-29T09:16:32.887
> 
> 标签：c++, sockets, select

我似乎有问题`select`。

```
while(!sendqueue.empty())
{                                   
  if(!atms_connection.connected)
  {
    //print error message
    goto RECONNECT;
  }

  //select new
  FD_ZERO(&wfds);
  FD_SET(atms_connection.socket, &wfds);

  tv.tv_sec = 1;
  tv.tv_usec = 0;

  retval = select(atms_connection.socket + 1, NULL, &wfds, NULL, &tv);

  if (retval == -1) {
    printf("Select failed\n");                      
    break;
  }                     
  else if (retval) {
    printf("Sent a Message.\n"); 
  }
  else {
    //printf("retval value is %d\n",retval);
    printf("Server buffer is full, try again...\n");                        
    break;
  }
  n = write(atms_connection.socket, sendqueue.front().c_str(), sendqueue.front().length());
} 
```

该函数属于一个线程，当它获得锁时，它会使用 select() 清理队列并循环写入套接字，直到队列为空。

线程第一次获得锁时它`select()`很好，但第二次获得锁并进入while它总是返回0。

作为记录，它曾经在一段时间前运行良好，从那时起我就没有更改过该代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T09:25:44.697

选择超时时返回 0。以下行将超时指定为 1 秒。

```
tv.tv_sec = 1; 
```

通常一个套接字已准备好写入，并且 select 会立即返回。但是，如果套接字输出缓冲区中没有空间容纳新数据，则 select 不会将此套接字标记为准备好写入。

例如，当连接的另一端没有调用时，可能会发生这种情况`recv/read`。未经确认的数据量增加，缓冲区最终变满。由于超时时间很小，因此 select 经常返回，返回值为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:32:40.177

除了已经提到的之外，select api 本身只告诉描述符是否准备好。根据选择的操作，它可以用于读取或写入。

在您的情况下，“发送的消息”打印似乎给人一种实际写入数据的错觉，但事实并非如此。*您必须对从选择返回的描述符进行写入调用。*

Select 本身不会神奇地读取或写入缓冲区。如果您是侦听服务器，则在选择调用成功返回后调用接受或读取。如果您是客户并打算写作（就像在您的案例中出现的那样），您需要进行显式的 write() 或 send() 调用。

# vb.net - 如何自动更新我的工具

> ID：13118707
> 
> 赞同：0
> 
> 时间：2012-10-29T09:16:36.407
> 
> 标签：vb.net, sharpdevelop

我正在开发一个工具，它被不同的用户使用。我通常将新版本保存在我公司本地网络的一个文件夹中，但这对于外部不灵活，也不灵活，因为我应该向他们发送一条消息告诉他们有一个新版本..我想要的是你的想法，我该如何解决这个问题，并让我自己告诉用户有一个新版本..

非常感谢您的帮助

注意：我在sharpdevelop中为我的设置项目使用了Wix技术，并使用vb.net作为编程语言

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:48:46.083

通常这种问题可以通过编写一个跟踪工具当前版本的 Web 服务来解决（通过 XML 文件或数据库表）。该 Web 服务基本上提供了两种方法。`GetCurrentVersion`并且`DownloadUpdate`，第一个返回给调用者工具的当前版本，第二个返回你当前版本的二进制字节。

在客户端，您的工具有一个选项“启动时自动检查更新”。选中此选项后，您的工具将连接到请求 GetCurrentVersion 方法的 Web 服务。如果返回的版本比客户端更新，请询问您的用户是否要更新，启动 Updater.exe 应用程序并关闭要更新的工具。Updater 连接到 WebService，调用 DownloadUpdate 并写入通过过时工具接收到的字节，最后重新启动工具。

# android - 在 Android 应用程序中集成 SkyDrive？

> ID：13118708
> 
> 赞同：2
> 
> 时间：2012-10-29T09:16:42.477
> 
> 标签：android, onedrive

我需要直接从我的 android 应用程序将文件上传到天空驱动器。天空驱动器如何与我的应用程序集成。我已经看过 Skydrive 提供的文档。但我不知道如何在我的应用程序中使用它。我已经完成了添加 sdk 并在我的 Android 项目中引用了已编译的 Android API 源代码，如文档中所示。欢迎任何建议和示例代码。

# javascript - 创建动态跨度

> ID：13118716
> 
> 赞同：6
> 
> 时间：2012-10-29T09:17:06.990
> 
> 标签：javascript, jquery, html, tags

如何创建动态标签？

```
$("<img />").attr({
    id: "image-1",
    src: "/images/flower.png",
}).appendTo("#" + imgContainer); 
```

它将创建`<img src="/images/flower.png" id="image-1" />`

我想`<span>`围绕标签创建`<img>`标签。

IE`<span><img src="/images/flower.png" id="image-1" /></span>`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T09:18:24.227

您可以使用[`wrap()`](http://api.jquery.com/wrap/)：

```
$("<img />").attr({
    id: "image-1",
    src: "/images/flower.png"
}).appendTo("#" + imgContainer).wrap("<span />") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T09:19:01.860

您可以使用[`wrap()`](http://api.jquery.com/wrap/)将一个元素包装在另一个元素中。例如：

```
$("<img />").attr({
    id: "image-1",
    src: "/images/flower.png",
})
.appendTo("#" + imgContainer)
.wrap("<span />"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T08:03:13.227

DOM 操作非常昂贵；只需准备您要使用的标记，*然后*根据需要附加它！

```
//Before:
$("<img />")                   //#1, create an element outside of the tree
.attr({                        //#2? change its attributes
  id: "image-1",
  src: "/images/flower.png"
})
.appendTo("#" + imgContainer)  //#3, add the element to DOM
.wrap("<span />");             //#4, create and add another element to DOM

//After:
$('<span><img src="/images/flower.png" id="image-1"></span>')  //#1
.appendTo("#" + imgContainer);                                 //#2 
```

这是[一个 jsperf 测试用例](http://jsperf.com/string-vs-dom)，第一种情况的结果约为 5K ops/sec，后者的结果约为 14K（在我相当不错的盒子上）。

这也不是过早的优化。例如，如果您有 ajax 填充的 7x10 表格，并且您单独创建每个单元格......并将它们包装成`<tr>`元素......然后将其添加到表格中，开销就会增加。对字符串进行操作，您的脚本将至少快 80 倍！

要记住的另一个方面是 jsperf 仅显式测量 javascript 性能。如果您正在操作表格，则其内容将更加激进地[重新绘制/重新飞行](http://www-archive.mozilla.org/newlayout/doc/reflow.html)。

# javascript - Javascript 显示/隐藏和 ahref

> ID：13118727
> 
> 赞同：0
> 
> 时间：2012-10-29T09:18:15.477
> 
> 标签：javascript, href

我在主页上的主要内容上有一个显示/隐藏功能，由于某种原因，当单击内部 href 链接时，它会关闭 div 而不是指向定向页面的链接。

任何想法？

[http://www.richardsimon.co/](http://www.richardsimon.co/)

# fonts - 带有实时预览的字体选择，如 dafont.com

> ID：13118731
> 
> 赞同：2
> 
> 时间：2012-10-29T09:18:27.940
> 
> 标签：fonts, live-preview

我想将一个功能集成到我正在处理的网站上的表单中，就像 fonts.com 和 dafont.com 一样，我到处寻找可以想象的每个搜索词，试图找出从哪里开始。这是我想要的：

用户在下拉列表中按名称选择字体。然后，他们可以在表单字段中放置自定义文本，该字段将以真实类型的形式预览，以便他们可以看到他们的字体会是什么样子。

基本上我想复制字体选择网站如何让你选择你的字体..预览它，在我的情况下，将字体选择与表单以及其他表单数据一起提交。

有人至少可以指出我正确的方向。我难住了。我想我想多了，但它是客户迫切需要的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:08:22.530

您可以在[ImageMagick 之](http://php.net/manual/en/class.imagick.php)类的库中渲染字体（在 PHP 安装中广泛使用）：

```
$im = new Imagick();
$im->setFont('YourFont.ttf'); // Set the correct file path here
$im->newPseudoImage(100, 100, 'caption:Hello');
$im->setImageFormat('png');

header('Content-Type: image/png');
echo $im; 
```

然后，您可以将 javascript 事件附加到字体选择下拉列表（和/或示例文本输入），并且每次更改时，将图像的源设置为此 PHP 脚本以实时预览结果。

# java - Java charAt() 字符串索引超出范围：0

> ID：13118732
> 
> 赞同：5
> 
> 时间：2012-10-29T09:18:31.047
> 
> 标签：java

我有这个代码：

```
private void submitPstart() {

    if (tStock.getText().charAt(0)>='A' && tStock.getText().charAt(0)<='Z'){

    }else {
        errorBox ("Uppercase A-Z");
    }

    tStock.setText("");
    tStock.setFocus();
} 
```

这是可行的，但是当我尝试不在文本框上放置任何内容并按下 OK 按钮时，它会崩溃。它说：

`java.lang.StringIndexOutOfBoundsException: String index out of range: 0`

它指出了这一部分：`if (tStock.getText().charAt(0)>='A' && tStock.getText().charAt(0)<='Z')`

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T09:19:42.163

您需要检查是否`getText()`返回 0 长度（即空）字符串。

如果是这样，那么不要试图拉出第一个字符！（通过`charAt()`）

请注意，您的注释检查`length()`应在现有字符检查*之前进行。*

您可能还想检查是否返回了空字符串，具体取决于您的框架/解决方案等。请注意[Apache Commons StringUtils.isEmpty()](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#isEmpty%28java.lang.String%29)方法，该方法简洁地执行此检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T09:21:30.873

您必须检查 null 和长度是否大于 0。

```
 if (tStockPIStart!=null && tStockPIStart.getText().length()>0 && tStockPIStart.getText().charAt(0)>='A' && tStockPIStart.getText().charAt(0)<='Z'){ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T09:21:06.630

尝试

```
if (tStockPIStart.getText().length() > 0 && tStockPIStart.getText().charAt(0)>='A' && tStockPIStart.getText().charAt(0)<='Z') 
```

在您的情况下，如果文本为空，则返回的长度将为 0。因此 charAt(..) 方法将引发异常。因此，您应该首先检查您要比较的文本是否为空。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-29T09:21:09.450

添加

```
if (tStockPIStart!=null && tStockPIStart.length>0) {
    [...]
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T09:28:30.257

在 Java 7 中，您可以使用[isEmpty方法使代码更具表现力](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#isEmpty%28%29)

```
if (tStockPIStart.getText()!=null && !tStockPIStart.getText().isEmpty()) {
    //do stuff
} 
```

这和做的一样，`length != 0`但我个人认为更清楚一点。

# ios - ipad 触控点的准确度如何？

> ID：13118733
> 
> 赞同：-1
> 
> 时间：2012-10-29T09:18:31.560
> 
> 标签：ios, ipad, touch

我想知道是否有人知道可以识别 ipad 上的触摸点有多近。有像 Appmates ( [http://www.appmatestoys.com/](http://www.appmatestoys.com/) ) 这样的产品可以创建电容标记，但是你能走多远/你能创建多复杂的标记？

此外，我读过总共有 10 个，有没有办法绕过这个限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:30:02.600

```
//this code used to find touch point in screen

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{

    UITouch *myTouch = [touches anyObject];
    point = [myTouch locationInView:self.view];
    NSLog(@"%f,%f",point.x, point.y);

} 
```

# hadoop - Oozie 输出事件

> ID：13118735
> 
> 赞同：3
> 
> 时间：2012-10-29T09:18:36.527
> 
> 标签：hadoop, mapreduce, oozie, oozie-coordinator

我不明白 Ozzie 中输出事件的用途是什么。Ozzie 文档指出“协调器操作可以生成一个或多个数据集实例作为输出”，但它没有提供任何实际细节或示例。生成数据集实例作为输出是什么意思？这是否意味着 Ozzie 将通过数据集的 URI 模板创建一个文件夹作为输出？我真的不明白为什么要使用输出事件...

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-13T14:43:35.747

`<output-event>`在您的协调器中指定 s 至少有一种用途。当为某个日期范围重新运行协调器时（使用`oozie job -rerun`命令），所有指定为 s 的相应路径`<output-event>`都将被删除。

有时删除协调器实例生成的所有输出很有用。例如，当您想要启动另一个将这些路径作为`<input-event>`s 的协调器并且您想要确保它将处理重新运行的数据而不是旧数据时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T02:42:04.443

如果您在谈论 Oozie，则输出文件用于连接不同的协调器作业。考虑一个由协调员作业组成的大 DAG，一些作业可能会将其他作业的输出作为其输入。所以数据集是 DAG 中的边。

比如在Oozie配置文件中，如果你指定Coordinator A的输出是DS1，Coordinator B的输出是DS2，Coordinator C的输入是DS1，DS2，那么Oozie会保证你不会执行Coordinator C中的对应动作在 DS1 和 DS2 准备好之前。

# postgresql - Postgresql：可以在 lob 内进行全文搜索吗？

> ID：13118737
> 
> 赞同：9
> 
> 时间：2012-10-29T09:18:43.853
> 
> 标签：postgresql, search, full-text-search

我们想使用 PostgreSQL 来存储文档。由于其中一些可能高达 2 GB，我们必须使用 lob 数据类型，其中大对象存储在一个单独的表 ( `pg_largeobject`) 中，由 OID 引用，根据[大对象的文档](http://www.postgresql.org/docs/current/static/lo-interfaces.html)。

对我们来说，可以搜索这些文档 ( `.pdf`, , ...) 非常重要。`.doc`PostgreSQL自带的[全文搜索](http://www.postgresql.org/docs/current/static/textsearch.html)可以搜索表和列，但是是否也可以搜索`pg_largeobject`表中的大对象呢？

如果没有，我们必须使用 Oracle。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T09:24:40.670

这里至少有两个问题。

1.  全文搜索并不真正适用于存储为`lob`或 oid 引用的大型对象。您不能对 的内容进行全文索引`pg_largeobject`。

2.  全文搜索是文本的索引*系统*。它不能索引 PDF、Microsoft Word 文档或其他随机二进制文件。它没有提供文本提取工具回调等。

您可以：

*   创建一个表格，其中包含使用外部工具从这些文件中提取的文本以及`oid`引用文件自身的表格，然后对提取的文本表格进行全文索引；或者

*   使用更强大、功能更全面的外部搜索系统，如[Solr](http://lucene.apache.org/solr/)（基于[Lucene](http://lucene.apache.org/core/)），旨在应对各种格式、进行自己的文本提取等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T10:14:02.437

在 PostgreSQL 中，全文搜索主要基于一项非常重要的功能`to_tsvector()`。此函数将文本文档转换为`tsvector`数据类型。通常，`tsvector`物理大小约为原始文本的 1%。

`tsvector`所有其他文本搜索方法都基于在计算值或物理值之上创建索引。考虑到这一点，您可以在任何地方（甚至在客户端！）计算必要`tsvector`的值并将其保存在专门创建的列中以用于索引目的。换句话说，您实际上不必将原始文本存储在数据库中 -`tsvector`您只需要告诉哪个文档包含您正在搜索的文本（但它不会告诉您在单个文档中的位置）。很酷的是，索引文档可以是任何东西——甚至是 Word、Excel、PDF 等等，只要您可以获得该文档的文本内容并计算`tsvector`存储和索引所需的内容。

重新计算的一个小缺点`tsvector`（尤其是在客户端）是每次更改原始文档时都必须重新计算它。

# javascript - 你能让换行符 \n 显示为中断 吗？

> ID：13118738
> 
> 赞同：34
> 
> 时间：2012-10-29T09:18:47.160
> 
> 标签：javascript, html, css, formatting

我正在尝试使用 IMAP 显示电子邮件。但是，当电子邮件是文本时，换行符 \n 无法正确显示。我宁愿不将它们转换为中断 < br /> 因为如果用户想要回复该电子邮件，它现在将是 HTML 而不是纯文本。是否有一个javascript函数可以在不更改代码的情况下将其显示为换行符？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-29T09:20:30.250

HTML/CSS 怎么样？如果你把你的文本放在一个`<pre>`标签里，它会完全按照原来的样子显示所有换行符。或者，您可以通过将 CSS 样式`white-space:pre`应用于任何元素来实现相同的效果。

不要忘记仍然对其进行 HTMLencode（`<`to`&lt;`等），否则它将在第一个尖括号处全部分解。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-05-27T15:51:53.240

只需添加此`white-space`css 样式属性即可呈现多行文本：

```
.multiline
{
   white-space: pre-wrap;
} 
```

进而 ：

```
<div class="multiline">
  my
  multiline
  text
</div> 
```

现在**换行符**将像 br 元素一样呈现。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-12-03T12:22:51.327

空白 CSS 工作正常，但用于跨浏览器兼容性

```
.abc {
  word-wrap: break-word;      /* IE 5.5-7 */
  white-space: pre-wrap;      /* Modern browsers */
} 
```

你的 HTML

```
<div class="abc">
 Lorem 
 Ipsum 
 is 
 simply 
 dummy
</div> 
```

[MDN 来源](https://developer.mozilla.org/en-US/docs/Web/CSS/white-space)

# iphone - 修改联系人后，例如从通讯录中删除现有联系人，然后尝试生成 vCard 字符串，应用程序崩溃

> ID：13118742
> 
> 赞同：1
> 
> 时间：2012-10-29T09:19:04.710
> 
> 标签：iphone, objective-c, addressbook, vcf-vcard

我正在使用来自以下 github 的代码。我只是发布部分代码，请获取完整代码这是[一个链接](https://github.com/carlj/ABContactHelper) ，我正在尝试将所有联系人备份到本地数据库中。它工作正常，没有任何问题。但是，当我删除一个联系人或添加一个新的联系人列表时，应用程序在第一个函数中使用 SIGBART 崩溃 - (id) initWithRecord: (ABRecordRef) aRecord WITH THREAD 1 请帮助！！！！

```
#import "ABContact.h"
#import "ABContactsHelper.h"
#import "ABContactStringConstants.h"
#import "Base64.h"

#define CFAutorelease(obj) ({CFTypeRef _obj = (obj); (_obj == NULL) ? NULL : [(id)CFMakeCollectable(_obj) autorelease]; })

@implementation ABContact
@synthesize record;

// Thanks to Quentarez, Ciaran

- (id) initWithRecord: (ABRecordRef) aRecord
{
    if (self = [super init]) record = CFRetain(aRecord);
    return self;
}

+ (id) contactWithRecord: (ABRecordRef) person
{
    return [[[ABContact alloc] initWithRecord:person] autorelease];
}

+ (id) contactWithRecordID: (ABRecordID) recordID
{
    ABAddressBookRef addressBook = CFAutorelease(ABAddressBookCreate());
    ABRecordRef contactrec = ABAddressBookGetPersonWithRecordID(addressBook, recordID);
    ABContact *contact = [self contactWithRecord:contactrec];

    // CFRelease(contactrec); // Thanks Gary Fung
    return contact;
}

// Thanks to Ciaran
+ (id) contact
{
    ABRecordRef person = ABPersonCreate();
    id contact = [ABContact contactWithRecord:person];
    CFRelease(person);
    return contact;
}

- (void) dealloc
{
    if (record) CFRelease(record);
    [super dealloc];
}

#pragma mark utilities
+ (NSString *) localizedPropertyName: (ABPropertyID) aProperty
{
    return [(NSString *)ABPersonCopyLocalizedPropertyName(aProperty) autorelease];
}

+ (ABPropertyType) propertyType: (ABPropertyID) aProperty
{
    return ABPersonGetTypeOfProperty(aProperty);
}

// Thanks to Eridius for suggestions re switch
+ (NSString *) propertyTypeString: (ABPropertyID) aProperty
{
    switch (ABPersonGetTypeOfProperty(aProperty))
    {
        case kABInvalidPropertyType: return @"Invalid Property";
        case kABStringPropertyType: return @"String";
        case kABIntegerPropertyType: return @"Integer";
        case kABRealPropertyType: return @"Float";
        case kABDateTimePropertyType: return DATE_STRING;
        case kABDictionaryPropertyType: return @"Dictionary";
        case kABMultiStringPropertyType: return @"Multi String";
        case kABMultiIntegerPropertyType: return @"Multi Integer";
        case kABMultiRealPropertyType: return @"Multi Float";
        case kABMultiDateTimePropertyType: return @"Multi Date";
        case kABMultiDictionaryPropertyType: return @"Multi Dictionary";
        default: return @"Invalid Property";
    }
}

+ (NSString *) propertyString: (ABPropertyID) aProperty
{
    /* switch (aProperty) // Sorry, this won't compile
    {
        case kABPersonFirstNameProperty: return FIRST_NAME_STRING;
        case kABPersonMiddleNameProperty: return MIDDLE_NAME_STRING;
        case kABPersonLastNameProperty: return LAST_NAME_STRING;

        case kABPersonPrefixProperty: return PREFIX_STRING;
        case kABPersonSuffixProperty: return SUFFIX_STRING;
        case kABPersonNicknameProperty: return NICKNAME_STRING;

        case kABPersonFirstNamePhoneticProperty: return PHONETIC_FIRST_STRING;
        case kABPersonMiddleNamePhoneticProperty: return PHONETIC_MIDDLE_STRING;
        case kABPersonLastNamePhoneticProperty: return PHONETIC_LAST_STRING;

        case kABPersonOrganizationProperty: return ORGANIZATION_STRING;
        case kABPersonJobTitleProperty: return JOBTITLE_STRING;
        case kABPersonDepartmentProperty: return DEPARTMENT_STRING;

        case kABPersonNoteProperty: return NOTE_STRING;

        case kABPersonKindProperty: return KIND_STRING;

        case kABPersonBirthdayProperty: return BIRTHDAY_STRING;
        case kABPersonCreationDateProperty: return CREATION_DATE_STRING;
        case kABPersonModificationDateProperty: return MODIFICATION_DATE_STRING;

        case kABPersonEmailProperty: return EMAIL_STRING;
        case kABPersonAddressProperty: return ADDRESS_STRING;
        case kABPersonDateProperty: return DATE_STRING;
        case kABPersonPhoneProperty: return PHONE_STRING;
        case kABPersonInstantMessageProperty: return SMS_STRING;
        case kABPersonURLProperty: return URL_STRING;
        case kABPersonRelatedNamesProperty: return RELATED_STRING;          
    } */

    if (aProperty == kABPersonFirstNameProperty) return FIRST_NAME_STRING;
    if (aProperty == kABPersonMiddleNameProperty) return MIDDLE_NAME_STRING;
    if (aProperty == kABPersonLastNameProperty) return LAST_NAME_STRING;

    if (aProperty == kABPersonPrefixProperty) return PREFIX_STRING;
    if (aProperty == kABPersonSuffixProperty) return SUFFIX_STRING;
    if (aProperty == kABPersonNicknameProperty) return NICKNAME_STRING;

    if (aProperty == kABPersonFirstNamePhoneticProperty) return PHONETIC_FIRST_STRING;
    if (aProperty == kABPersonMiddleNamePhoneticProperty) return PHONETIC_MIDDLE_STRING;
    if (aProperty == kABPersonLastNamePhoneticProperty) return PHONETIC_LAST_STRING;

    if (aProperty == kABPersonOrganizationProperty) return ORGANIZATION_STRING;
    if (aProperty == kABPersonJobTitleProperty) return JOBTITLE_STRING;
    if (aProperty == kABPersonDepartmentProperty) return DEPARTMENT_STRING;

    if (aProperty == kABPersonNoteProperty) return NOTE_STRING;

    if (aProperty == kABPersonKindProperty) return KIND_STRING;

    if (aProperty == kABPersonBirthdayProperty) return BIRTHDAY_STRING;
    if (aProperty == kABPersonCreationDateProperty) return CREATION_DATE_STRING;
    if (aProperty == kABPersonModificationDateProperty) return MODIFICATION_DATE_STRING;

    if (aProperty == kABPersonEmailProperty) return EMAIL_STRING;
    if (aProperty == kABPersonAddressProperty) return ADDRESS_STRING;
    if (aProperty == kABPersonDateProperty) return DATE_STRING;
    if (aProperty == kABPersonPhoneProperty) return PHONE_STRING;
    if (aProperty == kABPersonInstantMessageProperty) return SMS_STRING;
    if (aProperty == kABPersonURLProperty) return URL_STRING;
    if (aProperty == kABPersonRelatedNamesProperty) return RELATED_STRING;

    if (aProperty == kABPersonSocialProfileProperty) return SOCIAL_STRING;

    return nil;
}

+ (BOOL) propertyIsMultivalue: (ABPropertyID) aProperty;
{
    if (aProperty == kABPersonFirstNameProperty) return NO;
    if (aProperty == kABPersonMiddleNameProperty) return NO;
    if (aProperty == kABPersonLastNameProperty) return NO;

    if (aProperty == kABPersonPrefixProperty) return NO;
    if (aProperty == kABPersonSuffixProperty) return NO;
    if (aProperty == kABPersonNicknameProperty) return NO;

    if (aProperty == kABPersonFirstNamePhoneticProperty) return NO;
    if (aProperty == kABPersonMiddleNamePhoneticProperty) return NO;
    if (aProperty == kABPersonLastNamePhoneticProperty) return NO;

    if (aProperty == kABPersonOrganizationProperty) return NO;
    if (aProperty == kABPersonJobTitleProperty) return NO;
    if (aProperty == kABPersonDepartmentProperty) return NO;

    if (aProperty == kABPersonNoteProperty) return NO;

    if (aProperty == kABPersonKindProperty) return NO;

    if (aProperty == kABPersonBirthdayProperty) return NO;
    if (aProperty == kABPersonCreationDateProperty) return NO;
    if (aProperty == kABPersonModificationDateProperty) return NO;

    return YES;
    /*
    if (aProperty == kABPersonEmailProperty) return YES;
    if (aProperty == kABPersonAddressProperty) return YES;
    if (aProperty == kABPersonDateProperty) return YES;
    if (aProperty == kABPersonPhoneProperty) return YES;
    if (aProperty == kABPersonInstantMessageProperty) return YES;
    if (aProperty == kABPersonURLProperty) return YES;
    if (aProperty == kABPersonRelatedNamesProperty) return YES;
    if (aProperty == kABPersonSocialProfileProperty) return YES;
     */
}

+ (NSArray *) arrayForProperty: (ABPropertyID) anID inRecord: (ABRecordRef) record
{
    // Recover the property for a given record
    CFTypeRef theProperty = ABRecordCopyValue(record, anID);
    NSArray *items = (NSArray *)ABMultiValueCopyArrayOfAllValues(theProperty);
    CFRelease(theProperty);
    return [items autorelease];
}

+ (id) objectForProperty: (ABPropertyID) anID inRecord: (ABRecordRef) record
{
    return [(id) ABRecordCopyValue(record, anID) autorelease];
}

+ (NSDictionary *) dictionaryWithValue: (id) value andLabel: (CFStringRef) label
{
    NSMutableDictionary *dict = [NSMutableDictionary dictionary];
    if (value) [dict setObject:value forKey:@"value"];
    if (label) [dict setObject:(NSString *)label forKey:@"label"];
    return dict;
}

+ (NSDictionary *) addressWithStreet: (NSString *) street withCity: (NSString *) city
                           withState:(NSString *) state withZip: (NSString *) zip
                         withCountry: (NSString *) country withCode: (NSString *) code
{
    NSMutableDictionary *md = [NSMutableDictionary dictionary];
    if (street) [md setObject:street forKey:(NSString *) kABPersonAddressStreetKey];
    if (city) [md setObject:city forKey:(NSString *) kABPersonAddressCityKey];
    if (state) [md setObject:state forKey:(NSString *) kABPersonAddressStateKey];
    if (zip) [md setObject:zip forKey:(NSString *) kABPersonAddressZIPKey];
    if (country) [md setObject:country forKey:(NSString *) kABPersonAddressCountryKey];
    if (code) [md setObject:code forKey:(NSString *) kABPersonAddressCountryCodeKey];
    return md;
}

+ (NSDictionary *) smsWithService: (CFStringRef) service andUser: (NSString *) userName
{
    NSMutableDictionary *sms = [NSMutableDictionary dictionary];
    if (service) [sms setObject:(NSString *) service forKey:(NSString *) kABPersonInstantMessageServiceKey];
    if (userName) [sms setObject:userName forKey:(NSString *) kABPersonInstantMessageUsernameKey];
    return sms;
}

+ (NSDictionary *) socialWithService: (CFStringRef) service andUser: (NSString *) userName andUserIdentifier: (NSString *) userIdentifier
{
    NSMutableDictionary *social = [NSMutableDictionary dictionary];
    if (service) [social setObject:(NSString *) service forKey:(NSString *) kABPersonSocialProfileServiceKey];
    if (userName) [social setObject:userName forKey:(NSString *) kABPersonSocialProfileUsernameKey];
    if (userIdentifier) [social setObject:userIdentifier forKey:(NSString *) kABPersonSocialProfileUserIdentifierKey];
    return social;
}

// Thanks to Eridius for suggestions re: error
- (BOOL) removeSelfFromAddressBook: (NSError **) error
{
    ABAddressBookRef addressBook = CFAutorelease(ABAddressBookCreate());
    if (!ABAddressBookRemoveRecord(addressBook, self.record, (CFErrorRef *) error)) return NO;
    return ABAddressBookSave(addressBook,  (CFErrorRef *) error);
}

#pragma mark Record ID and Type
- (ABRecordID) recordID {return ABRecordGetRecordID(record);}
- (ABRecordType) recordType {return ABRecordGetRecordType(record);}
- (BOOL) isPerson {return self.recordType == kABPersonType;}

#pragma mark Getting Single Value Strings
- (NSString *) getRecordString:(ABPropertyID) anID
{
    return [(NSString *) ABRecordCopyValue(record, anID) autorelease];
}
- (NSString *) firstname {return [self getRecordString:kABPersonFirstNameProperty];}
- (NSString *) middlename {return [self getRecordString:kABPersonMiddleNameProperty];}
- (NSString *) lastname {return [self getRecordString:kABPersonLastNameProperty];}

- (NSString *) prefix {return [self getRecordString:kABPersonPrefixProperty];}
- (NSString *) suffix {return [self getRecordString:kABPersonSuffixProperty];}
- (NSString *) nickname {return [self getRecordString:kABPersonNicknameProperty];}

- (NSString *) firstnamephonetic {return [self getRecordString:kABPersonFirstNamePhoneticProperty];}
- (NSString *) middlenamephonetic {return [self getRecordString:kABPersonMiddleNamePhoneticProperty];}
- (NSString *) lastnamephonetic {return [self getRecordString:kABPersonLastNamePhoneticProperty];}

- (NSString *) organization {return [self getRecordString:kABPersonOrganizationProperty];}
- (NSString *) jobtitle {return [self getRecordString:kABPersonJobTitleProperty];}
- (NSString *) department {return [self getRecordString:kABPersonDepartmentProperty];}
- (NSString *) note {return [self getRecordString:kABPersonNoteProperty];}

#pragma mark Contact Name Utility
- (NSString *) contactName
{
    NSMutableString *string = [NSMutableString string];

    if (self.firstname || self.lastname)
    {
        if (self.prefix) [string appendFormat:@"%@ ", self.prefix];
        if (self.firstname) [string appendFormat:@"%@ ", self.firstname];
        if (self.nickname) [string appendFormat:@"\"%@\" ", self.nickname];
        if (self.lastname) [string appendFormat:@"%@", self.lastname];

        if (self.suffix && string.length)
            [string appendFormat:@", %@ ", self.suffix];
        else
            [string appendFormat:@" "];
    }

    if (self.organization) [string appendString:self.organization];
    return [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
}

- (NSString *) compositeName
{
    NSString *string = (NSString *)ABRecordCopyCompositeName(record);
    return [string autorelease];
}

#pragma mark NUMBER
- (NSNumber *) getRecordNumber: (ABPropertyID) anID
{
    return [(NSNumber *) ABRecordCopyValue(record, anID) autorelease];
}

- (NSNumber *) kind {return [self getRecordNumber:kABPersonKindProperty];}

@end` 
```

# git - 当两个文件相同时，为什么 git 会向我显示这个冲突？

> ID：13118743
> 
> 赞同：2
> 
> 时间：2012-10-29T09:19:06.413
> 
> 标签：git

这是我做`$ git stash pop`
它时遇到的唯一冲突它是文件的最后一行，并且两者都没有任何换行符。

![同一行但仍显示冲突](../Images/eacbacc8eee1e4fa23de101f0e0a69f5.png)

这是我对 git 不了解的事情还是一些错误。
Git 版本 1.7.12

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:19:51.443

它似乎与“ [git：文件末尾的换行符合并冲突](https://stackoverflow.com/questions/7355199/git-merge-conflicts-over-newline-at-end-of-file)”一致，并且通常在设置`core.autocrlf`设置为`false`（我推荐）而不是“ `native`”时。
请注意，合并不会忽略这些 eol 差异（请参阅“ [git-merge 是否可以忽略行尾差异？](https://stackoverflow.com/questions/861995/is-it-possible-for-git-merge-to-ignore-line-ending-differences) ”）。

如果您希望自动为您完成这些 eol 转换，那么您可以考虑一个`.gitattributes`设置，如“[使用代码分发 git 配置](https://stackoverflow.com/a/2354278/6309)”中所述。

# xml - 输入 XML 数据与输出 XML 格式不匹配

> ID：13118744
> 
> 赞同：3
> 
> 时间：2012-10-29T09:19:09.377
> 
> 标签：xml, perl

**输入 XML**

```
<?xml version="1.0" encoding="utf-8"?>
<!--00/00/0000 12:35:25 AM-->
<Physical xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" >
  <Pro managementID="22000020">
    <Identification Type="XXXXX" >          
      <Address>
        <Data>test</Data>        
      </Address>
      <Phone>
        <Number>0000</Number>
      </Phone>
      <Email>test@com</Email>
    </Identification>       
  </Pro>
</Physical> 
```

脚本：

我正在尝试更改标签的值并将其余部分打印到新的输出 xml 文件中

```
use strict;
use warnings;
use XML::Simple;
use Data::Dumper;     

  my $xml = XML::Simple->new(ForceContent => 1,);
  my $xmlData = $xml->XMLin('input.xml') or die$!;     

  print Dumper (\$xmlData);

  foreach my $xmlKey ( keys %{$xmlData} ){
   if ( $xmlKey =~ m/Pro/){
       print ${$xmlData}{$xmlKey}{Identification}{Address}{Data}="hello";
    }
  }

XMLout(
    $xmlData,
    KeepRoot => 1,
    NoAttr => 0,
    OutputFile => $xml_out,
); 
```

**输出 XML：**

```
<opt xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Pro managementID="22000020">
     <Identification Type="XXXXX">
      <Address Data="hello" />
      <Email>test@com</Email>
      <Phone name="Number">0000</Phone>
    </Identification>
  </Pro>
</opt> 
```

我可以更改值，但是当我尝试将数据写入输出时，格式已更改。任何人都可以指导我获取具有更改值的相同输入数据作为输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T09:40:41.640

以这种方式使用 XML::LibXML：

```
#!/usr/bin/perl
use strict;
use warnings;

use XML::LibXML;

my $input;
while(<>) {
    $input .= $_;
}
my $xml_doc = XML::LibXML->load_xml(string => $input);
my $xpath_ctx = new XML::LibXML::XPathContext($xml_doc);
$xpath_ctx->find("/Physical/Pro/Identification/Address/Data")->get_node(0)->firstChild()->setData("hello");
my $xml_data = $xpath_ctx->find("/")->get_node(0)->toString(1);

print $xml_data; 
```

XML::LibXML 速度更快，并且在 XPath 的帮助下，操作`$xml_doc`更容易。

您可以在[这里找到更多信息](http://search.cpan.org/~shlomif/XML-LibXML-2.0008/LibXML.pod)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T11:27:56.797

一个 XML::Twig 版本：

```
#!/usr/bin/perl 

use strict;
use warnings;

use XML::Twig;

XML::Twig->new( twig_roots => { 'Pro/Identification/Address/Data' => sub { $_->set_text( 'hello'); $_->flush; } },
                twig_print_outside_roots => 1,
              )
         ->parsefile( 'input.xml'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T09:34:31.633

使用不同的 XML 处理模块。例如，此脚本使用[XML::XSH2](http://p3rl.org/XML%3a%3aXSH2)，它是[XML::LibXML](http://p3rl.org/XML%3a%3aLibXML)的包装器：

```
#!/usr/bin/perl
use warnings;
use strict;

use XML::XSH2;

xsh << 'END';
    open input.xml ;
    for //*[xsh:matches(name(),'Pro')]/Identification/Address/Data
        set . 'hello' ;
    save :b ;
END 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T17:43:58.130

使用 XML::Rules 的另一种方式

```
use strict;
use warnings;

use XML::Rules;

my @rules = (
  Data => sub { $_[1]{_content} =~ s/test/hello/; return $_[0] => $_[1] },
);
my $xr = XML::Rules->new(
  rules => \@rules,
  style => 'filter',
);

$xr->filterfile('input.xml'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T00:46:28.913

您已将`NoAttr`输出设置为零。

这不是你想要的相反吗？

> 无属性 => 1
> 
> 当与 XMLout() 一起使用时，生成的 XML 将不包含任何属性。所有哈希键/值都将表示为嵌套元素。

NoAttr 将停止

```
<Phone>
    <Number>0000</Number> 
```

转变为

```
 <Phone name="Number"> 
```

# javascript - JavaScript execcommand 是否适用于 textarea？

> ID：13118746
> 
> 赞同：2
> 
> 时间：2012-10-29T09:19:13.740
> 
> 标签：javascript

我想知道 JavaScript execcommand 是否适用于 textarea。在 IFrame 中它可以工作，但在 textarea 中似乎不行......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:25:28.513

如果是为了编辑一些丰富的内容，我认为这是不可能的，因为 textarea 仅支持文本并且不会将 HTML 显示为纯文本以外的任何内容。但是，您可以使用一个`div`元素，并将其应用于该元素。

如果您需要在某处发布 HTML，这就是您要将其放在文本区域的原因，我想您可以使用`div`编辑器，然后将 div 的内容复制到隐藏的输入，只要内容发生变化. 然后，您可以使用隐藏的输入来发布 HTML。

[MDN](https://developer.mozilla.org/en-US/docs/Rich-Text_Editing_in_Mozilla#Executing_Commands)上的文档有一个使用`div`.

# backbone.js - 如何在backbonejs中实现触摸事件？

> ID：13118755
> 
> 赞同：2
> 
> 时间：2012-10-29T09:19:45.630
> 
> 标签：backbone.js, hammer.js

我需要在backbonejs View 中实现基于触摸的事件。我尝试了锤子 jquery 特殊事件，但它对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:42:05.120

尝试使用检查移动设备扩展事件并添加特定事件，例如

```
events: function() {
    return MOBILE ? 
       {
         "touchstart": 'select'
       } : 
       {
         "mousedown": 'select'
       }
  } 
```

[http://jsfiddle.net/dira/Ke2px/2/](http://jsfiddle.net/dira/Ke2px/2/)

正如我们从问题[Backbone.js click event doesn't work with touch中看到的那样](https://stackoverflow.com/questions/7828054/backbone-js-click-event-doesnt-work-with-touch)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:45:27.657

将其用作 jquery 插件，然后通常使用 events 属性对其进行设置并在所需元素上侦听这些事件

```
events: {
    'tap': 'onTap',
    'hold .dragging-handle': 'onHold'
    // etc...
},

onTap: function(e) {
    // do whatever with the event data 
} 
```

# c# - MVC3 (Razor) 单选按钮检查

> ID：13118764
> 
> 赞同：4
> 
> 时间：2012-10-29T09:20:31.570
> 
> 标签：c#, javascript, asp.net-mvc-3, razor, radio-button

首先，我必须在 mvc3 局部视图中创建一些单选按钮。

当我在屏幕上时，我只需要选择一个单选按钮并检索一个特定值。

我该怎么做（例如使用 JS 或 C#）？

```
 <div id="UserDeleteInfosField">
                <p>
                    @Html.RadioButton("HasUserLeave", new { id = "rb1" })
                    @UserAccountResources.UserLeave
                    @Html.HiddenFor(x => x.UserLeave)   
                </p>
                <br />
                <p>
                    @Html.RadioButton("HasUserTransfer", new { id = "rb2" })
                    @UserAccountResources.UserTransfer
                    @Html.HiddenFor(x => x.UserTransfer)   
                </p>
                <br />
                <p>
                    @Html.RadioButton("HasUserDetachment", new { id = "rb3" })
                    @UserAccountResources.UserDetachment
                    @Html.HiddenFor(x => x.UserDetachment)   
                </p>
                <br />
                <p>
                    @Html.RadioButton("HasUserRetirement", new { id = "rb4" })
                    @UserAccountResources.UserRetirement
                    @Html.HiddenFor(x => x.UserRetirement)   
                </p>
                <br />
                <p>
                    @Html.RadioButton("HasUserStatus", new { id = "rb5" })
                    @UserAccountResources.UserStatus
                    @Html.HiddenFor(x => x.UserStatus)   
                </p>
            </div> 
```

提前致谢 ！

Ars_n

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T09:29:55.590

所以你需要一组单选按钮？我为此使用了自定义助手。

助手代码：

```
public static MvcHtmlString RadioButtonForSelectList<TModel, TProperty>(
       this HtmlHelper<TModel> htmlHelper,
       Expression<Func<TModel, TProperty>> expression,
       IEnumerable<SelectListItem> listOfValues)
    {
        var metaData = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);
        var sb = new StringBuilder();

        if (listOfValues != null)
        {
            // Create a radio button for each item in the list 
            foreach (SelectListItem item in listOfValues)
            {
                // Generate an id to be given to the radio button field 
                var id = string.Format("{0}_{1}", metaData.PropertyName, item.Value);

                // Create and populate a radio button using the existing html helpers 
                var label = htmlHelper.Label(id, HttpUtility.HtmlEncode(item.Text));

                var radio = htmlHelper.RadioButtonFor(expression, item.Value, new { id = id }).ToHtmlString();

                if (item.Selected)
                {
                    radio = htmlHelper.RadioButtonFor(expression, item.Value, new { id = id, @checked = "checked", }).ToHtmlString();
                }

                // Create the html string that will be returned to the client 
                // e.g. <input data-val="true" data-val-required="You must select an option" id="TestRadio_1" name="TestRadio" type="radio" value="1" /><label for="TestRadio_1">Line1</label> 
                sb.AppendFormat("<div class=\"RadioButton\">{0}{1}</div>", radio, label);
            }
        }

        return MvcHtmlString.Create(sb.ToString());
    } 
```

现在在您看来，您可以使用：

```
@Html.RadioButtonForSelectList(model => model.yourproperty, Model.listUsedToPopulate) 
```

现在，您当时只能检查其中一个单选按钮。检查的值存储在 model.yourproperty 中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T09:40:25.467

查看示例以了解单选按钮的分组方式：[示例](http://www.echoecho.com/htmlforms10.htm)

您需要相同`name`的属性，如下所示：

```
<input type="radio" name="group2" value="Water" /> Water<br />
<input type="radio" name="group2" value="Beer" /> Beer<br />
<input type="radio" name="group2" value="Wine" checked /> Wine<br /> 
```

你的例子：

```
@Html.RadioButton("SameGroup", "rb1")
@Html.RadioButton("SameGroup", "rb2")
@Html.RadioButton("SameGroup", "rb3")
@Html.RadioButton("SameGroup", "rb4")
@Html.RadioButton("SameGroup", "rb5") 
```

只有检查过的值才会在发布后的控制器操作中收到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T09:32:56.940

我猜你想把它发布到一个控制器方法，所以也许这就是你想要做的：

假设控制器方法接受一个名为 的参数`myParameter`，那么您需要将单选按钮的名称设置为相同以将它们分组，然后将值设置为您需要的任何值：

```
<div id="UserDeleteInfosField">
    <p>
        @Html.RadioButton("myParameter", UserAccountResources.UserLeave)
        @UserAccountResources.UserLeave
        @Html.HiddenFor(x => x.UserLeave)   
    </p>
    <br />
    <p>
        @Html.RadioButton("myParameter", UserAccountResources.UserTransfer)
        @UserAccountResources.UserTransfer
        @Html.HiddenFor(x => x.UserTransfer)   
    </p>
    <br />
    <p>
        @Html.RadioButton("myParameter", UserAccountResources.UserDetachment)
        @UserAccountResources.UserDetachment
        @Html.HiddenFor(x => x.UserDetachment)   
    </p>
    <br />
    <p>
        @Html.RadioButton("myParameter", UserAccountResources.UserRetirement)
        @UserAccountResources.UserRetirement
        @Html.HiddenFor(x => x.UserRetirement)   
    </p>
    <br />
    <p>
        @Html.RadioButton("myParameter", UserAccountResources.UserStatus)
        @UserAccountResources.UserStatus
        @Html.HiddenFor(x => x.UserStatus)   
    </p>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T10:46:12.043

感谢您的回答。

我最终为每个单选按钮创建了一组。我在 rb 对象参数中调用该属性。

```
 <div id="UserDeleteInfosField">
                <p>
                    @Html.RadioButton("RbDeleteGroup", Model.UserLeave)
                    @UserAccountResources.UserLeave
                    @Html.HiddenFor(x => x.UserLeave)   
                </p>
                <br />
                <p>
                    @Html.RadioButton("RbDeleteGroup", Model.UserTransfer)
                    @UserAccountResources.UserTransfer
                    @Html.HiddenFor(x => x.UserTransfer)   
                </p>
                <br />
                <p>
                    @Html.RadioButton("RbDeleteGroup", Model.UserDetachment)
                    @UserAccountResources.UserDetachment
                    @Html.HiddenFor(x => x.UserDetachment)   
                </p>
                <br />
                <p>
                    @Html.RadioButton("RbDeleteGroup", Model.UserRetirement)
                    @UserAccountResources.UserRetirement
                    @Html.HiddenFor(x => x.UserRetirement)   
                </p>
                <br />
                <p>
                    @Html.RadioButton("RbDeleteGroup", Model.UserStatus)
                    @UserAccountResources.UserStatus
                    @Html.HiddenFor(x => x.UserStatus)   
                </p>
            </div> 
```

所以在这种情况下，我只能同时选中一个单选按钮并从相应的 ViewModel 中检索属性值。

```
 [Display(Name = "UserAccountDeleteInfos", ResourceType = typeof(UserAccountResources))]
    public string UserLeave
    {
        get { return UserAccountResources.UserLeave; }
    } 
```

# jquery - 选择div内的所有标签

> ID：13118770
> 
> 赞同：0
> 
> 时间：2012-10-29T09:21:17.447
> 
> 标签：jquery, jquery-selectors

我有下面的标签结构。这在页面上重复 9 次。我希望当我将鼠标悬停在 9 个“itemInfo”div 之一上时，它会将所有文本颜色更改为白色（包括链接）。如何使用 jQuery 选择所有这些？请参阅下面的尝试。

```
<div class="row itemInfo">
    <div class="row">
        <div class="twelve columns itemImage">
            <img src="http://lorempixel.com/250/185/abstract/">
            </div>
        </div>
    </div>

    <div class="row">
        <div class="twelve columns itemDetails"> 
            <h3><a href="#">title</a></h3>
            <p class="quiet">submitted by <a href="#">designer</a></p>                   
        </div>
    </div>
</div> 
```

我的尝试：

```
$(".itemInfo").hover(function() {
    $(this).find('h3 a').addClass('itemInfoActive');
    $(this).find('p').addClass('itemInfoActive');
    $(this).find('p a').addClass('itemInfoActive');
    return false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:29:45.617

看看这个**工作演示** [http://jsfiddle.net/E8uws/](http://jsfiddle.net/E8uws/) **或**使用`mouseout`or `mouseover`=> [http://jsfiddle.net/yUf4Q/](http://jsfiddle.net/yUf4Q/)

如果你想阅读更多：[http ://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

休息应该有助于您的需要`:)` **代码**

```
$(function() {
    $(".itemInfo").hover(function() {
            $(this).parent().find('*').css('color', 'red');
    });
});​ 
```

**额外代码**

```
$(function() {
    $(".itemInfo").mouseover(function() {
        $(this).parent().find('*').css('color', 'red');
    }).mouseout(function() {
        $(this).parent().find('*').css('color', 'black');

    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:25:19.710

```
$(".itemInfo").mouseenter(function() {
    $('a,p,h3',this).addClass('itemInfoActive');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T09:26:57.103

您可以为此使用通用选择器：

```
$(".itemInfo").hover(function() {    
    $(this).find('*').addClass('itemInfoActive');
}); 
```

# c# - 从 C# 调用 C 代码 - 遇到几个问题

> ID：13118771
> 
> 赞同：7
> 
> 时间：2012-10-29T09:21:17.347
> 
> 标签：c#, c

我有一些 C 代码，我试图从 C# 中使用。大部分转换已完成。我有几个问题。

部分“C”代码如下所示。

```
typedef struct r_GetCPL {

  UInt8 Storage;
  UInt8 Key[16];             //(1) 

  UInt8 *Buff;               //(2)
  Array16 *CryptoKeyIDs;     //(3)

} REPLY_GETCPL; 
```

在“C”中定义的别名

```
typedef unsigned char      UInt8;
typedef unsigned short     UInt16;
typedef unsigned long      UInt32;
typedef unsigned long long UInt64;

typedef UInt8   Array8[8];
typedef UInt8   Array16[16];
typedef UInt8   Array32[32];
typedef UInt8   Array64[64];
typedef UInt8   Array128[128]; 
```

我假设我可以用直接结构定义替换 typedef。这样好吗？我定义的等效 C# 结构是，

```
public struct REPLY_GETCPL 
{
  Byte Storage;
  Byte[16] Key;          //(1) Is this right?

  UInt8 *Buff;           //(2)  What is the equivalent?
  Array16 *CryptoKeyIDs; //(3)  What is the equivalent?
} 
```

另外，有几种方法导入我被困在

```
void hex_print(char* data, UInt32 length);
DRMKLVItem *NewDRMKLVItem(UInt32 lenBuff, UInt32 cmdId);
RESULT DRMKLVLengthDecode(const UInt8 *s, UInt32 *pLen); 
```

C＃

```
//I think this one is defined right
[DllImport("DoremiSource.dll")]
public static extern void hex_print([MarshalAs(UnmanagedType.LPStr)]string data, UInt32 length);

//(How to convert the function return type?)
[DllImport("DoremiSource.dll")]
public static extern DRMKLVItem *NewDRMKLVItem(UInt32 lenBuff, UInt32 cmdId);  //(4)

//(How do i convert the function parameters here)
[DllImport("DoremiSource.dll", CharSet = CharSet.Ansi)]
public static extern int DRMKLVLengthDecode(const UInt8 *s, ref UInt32 pLen);  //(5) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:19:57.707

您可以使用复杂类型并在 C 和 C# 之间编组它们，您只需要了解结构的编译选项，然后像下面这样装饰 C# 类型：（来自[MSDN](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute%28v=vs.71%29.aspx)）

```
[StructLayout(LayoutKind.Explicit, Size=16, CharSet=CharSet.Ansi)]
public class MySystemTime 
{
   [FieldOffset(0)]public ushort wYear; 
   [FieldOffset(2)]public ushort wMonth;
   [FieldOffset(4)]public ushort wDayOfWeek; 
   [FieldOffset(6)]public ushort wDay; 
   [FieldOffset(8)]public ushort wHour; 
   [FieldOffset(10)]public ushort wMinute; 
   [FieldOffset(12)]public ushort wSecond; 
   [FieldOffset(14)]public ushort wMilliseconds; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:54:22.607

您的`UInt8 *`参数可以用 C# 中的数组表示，因为它就是这样。也就是说，您对 C 代码的调用应该使用`UInt8[]`类型。

生产代码示例：

```
[DllImport(DllName, CallingConvention = CallingConvention.Cdecl)]
public static extern void CCode(ushort[] data, ushort[] otherData, int width, int height); 
```

`data`并`otherData`映射到`unsigned short *`C 代码中。

关于返回指向已分配`struct`s 的指针的 C 代码，您始终可以将 C# 代码包装在一个`unsafe`区域中，并在 C# 中使用`&`and`*`运算符。如果您构建了`struct`具有相同布局的有效 C#，这将按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T16:57:34.997

在 C# 中使用 C 的一种方法是将 C 代码包装在 C++/CLI 对象中。

C++/CLI 特别适合处理安全和不安全代码。你可以做任何你可以在 C# 和 C 中做的事情。

通过创建一个托管对象来定义一个接口，并用（静态）函数填充它以调用您的非托管 C 代码。在每个函数中，您可以执行将参数和结果从托管代码转换为非托管代码所需的编组，反之亦然。

这样您就可以完全控制界面并拥有一个很好的调试访问点。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-31T14:16:11.030

如果你想使用指针，你需要一个不安全的块。看看这个[网站](http://msdn.microsoft.com/en-us/library/aa288474%28v=vs.71%29.aspx)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-29T09:40:58.867

如果您尝试“转换”为 c#，最好使用类而不是结构。

例如`struct REPLY_GETCPL`，作为一个班级，你会更好，因为我看到你也在尝试使用指针。此外，您可以将某些与结构关联的方法放入一个类中，并在该类的对象中使用组合功能。

# css - CSS textarea 在 Firefox 12 中不隐藏，但在 IE9 和 Chrome 中有效

> ID：13118773
> 
> 赞同：0
> 
> 时间：2012-10-29T09:21:26.763
> 
> 标签：css

我有一个 textarea，它不会使用 Firefox 12 隐藏，但它确实隐藏在 IE9 和 Chrome 中。

textarea 有一个按钮，当我单击此按钮时，它将自动显示 textarea。

这是我的代码。

```
<div id="data">
    <div id="data-inner">
        <i>Loading...</i>
    </div>

    <fieldset id="standalone-data-set">

        <div>
            <textarea id="standalone-data" name="standalone-data"></textarea>
        </div>

        <div class="clearfix"-->
            <input id="save-data" class="data-button" type="button" value="Confirm" />
            <input id="cancel-data" class="data-button" type="button" value="Cancel" />
        </div>

    </fieldset>

    <input id="add-data" class="data-button" type="button" value="Add Data" />
</div> 
```

这是我的 CSS 代码

```
#standalone-data-set {height: 0px; overflow: hidden;}
#standalone-data {margin: 0 !important; height: 200px !important; width: 880px !important;} input.data-button {font: 100%/25px Tahoma, Verdana, Trebuchet MS, Sans-Serif; float: left !important; margin: 15px 20px 0 0 !important; width: auto !important; padding: 0 20px 2px 20px; height: 25px;}
#add-data {float: none !important;}

<script language=javascript>
$('#save-data').click(function() {
var data = $('#standalone-data').val();
$('input[type=submit], input[type=button]').attr('disabled', 'disabled');
$.post($.getAjaxUrl('userAction', 'CreateRequestData', { 'requestDataID' : data.requestDataID }), { 'data' : data }, function(data) {
data = $.parseJSON(data);
if (data.error == true) {
alert(data.response);
} else {
$('#cancel-data').click();
$('#data-inner').getRequestData(data.requestID);
}
$('input[type=submit], input[type=button]').attr('disabled', '');
});
return false;
}); 

$('#cancel-data').click(function() {
if ($.client.os != 'an unknown OS') {
$('#standalone-data-set').animate({
height: '0px'
}, 100, function() {
$('#add-data').show();
});
return false;
} else {
$('textarea#standalone-data').val('');
}
});

$('#add-data').click(function() {
$('#add-data').hide();
$('#standalone-data-set').animate({
height: '290px'
}, 100, function() {
if (data.CEditor == undefined) {
data.CEditor = $('textarea#standalone-data').tinymce(data.EditorsConfig);
}
$('textarea#standalone-data').val('');
});
return false;
});  
</script> 
```

希望任何人都可以解决如何使 textarea 隐藏。多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:39:03.380

您可以尝试将 textarea 包装在 div 中并隐藏该 div。

# python - 如何用无限循环包装现有脚本？

> ID：13118776
> 
> 赞同：0
> 
> 时间：2012-10-29T09:21:37.967
> 
> 标签：python, loops, exit

我有许多 sys.exit() 和 raw_input() 命令的脚本。我想用无限循环包装它。forever.py 正在从 Windows 空闲状态运行。类似于下面的代码，但它不起作用。在一台机器上，python 控制台窗口正在闪烁（无限循环启动过程 python，看起来是合法的），但我没有输出。我还能做些什么更好？

模块 to_be_wrap.py：

```
import sys

def main():
    print('start')
    raw_input('any key')
    sys.exit(0)
    print('end') 
```

模块永远.py：

```
import subprocess as subp
def forever():
    while 1:
        try:
            cmd = ['python', 'to_be_wrap.py']
            print subp.check_output(cmd)
        except Exception as e:
            print e
forever() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:39:02.517

这应该像预期的那样工作。只需纠正以下两点：

1.  如果要打印“结束”，请将其放在`sys.exit(0)`语句之前
2.  模块 to_be_wrap.py中没有调用该函数`main()`。`main()`在文件末尾添加语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:33:10.947

您似乎正在创建类似于 REPL ( read-eval-print loop ) 的东西，尽管您的 main() 方法目前似乎没有做任何有用的事情。

[这篇博文](http://blog.hackthology.com/writing-an-interactive-repl-in-python)描述了一种相当严格的方法。[这个要点](https://gist.github.com/776418)（上述博客文章的一部分）展示了 REPL 的“核心”，但将 read 和 eval 逻辑的实现留给了您。

# c# - 字节数组的内容

> ID：13118782
> 
> 赞同：1
> 
> 时间：2012-10-29T09:22:05.907
> 
> 标签：c#, arrays

我的问题是我像这样发送到外部设备字节数组： `byte[] dataBuffer = new Byte[9] {1, 2, 3, 4, 5, 6, 7, 8, 9};` 但是当我在那里读取这些字节时，当应该有 3 时，我得到例如 2。所以它始终是左值。数组的开头是否可能还有其他内容？空值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T09:23:43.593

字节数组是`zero-indexed`您可能将 dataBuffer[1] 视为第一个元素，但实际上您有 dataBuffer[0] 第一个元素。

# objective-c - 为什么 iOS SDK 和 iOS 操作系统版本会相互影响？或者：什么是 iOS SDK？

> ID：13118783
> 
> 赞同：4
> 
> 时间：2012-10-29T09:22:06.147
> 
> 标签：objective-c, ios, sdk, xamarin.ios

> 编辑：
> 
> 下面来自 H2CO3 的答案让我几乎很高兴。但这并没有解释一件事：为什么在针对 SDK6 构建应用程序时会出现运行时异常（UIPageViewController 在将其添加到父控制器之前需要一个子控制器），但在针对 SDK5 构建应用程序时却没有？Rolf 的回答解释了发生了什么：设备知道构建应用程序所使用的 SDK，并且行为不同以确保最大的兼容性。

在与 iOS SDK 版本、MonoTouch 版本和不同的 iOS 版本作斗争时，我开始想：**到底什么是 iOS SDK**？

我的意思是，我安装 Xcode 4.4 并获得 iOS SDK 5。如果我安装 Xcode 4.5，我将获得 iOS SDK 6。到目前为止没问题。

*   现在假设我构建了一个应用程序`targets iOS 5`并做`not use any iOS 6 specific`一些事情。我只是构建这个应用程序`using iOS SDK 6`。
*   然后我建立`same app`但使用`iOS SDK 5`.

然后我在 iOS 6 设备上运行这两个版本的应用程序。

为什么他们的行为不同？有一些小的差异，例如，如果在将页面视图控制器作为子控制器添加到父控制器之前没有设置子控制器，则 UIPageViewController 会引发异常。

据我了解，回调、功能和一切都来自 iOS 操作系统，而不是来自 SDK。但操作系统在这两种情况下都是相同的。

我完全明白，如果我想使用 iOS 6 的特定功能，我需要使用 iOS SDK 6，因为 UICollectionView 在 SDK 5 中不存在。但是这个视图的 UI 代码显然没有包含在我的应用程序中，否则它也可以在 iOS5 上运行。所以集合视图来自操作系统提供的共享库。

最重要的是，还有 MonoTouch。如果我们假设每个 MonoTouch 版本只不过是绑定的扩展而不修复任何错误，那么我使用的 MT 版本应该无关紧要。

我的问题的简短回顾是：iOS 版本、iOS SDK 版本、MonoTouch 版本和应用程序的目标版本如何协同工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T09:34:25.573

iOS SDK 由两个组件组成：工具链（Clang 和/或 GCC 作为编译器，ld(64) 作为链接器和`cctools`包的其他部分（GNU 人称之为`binutils`）以及库和头文件。

工具链（编译器）版本与 iOS 的版本号没有严格的关系。理论上，任何足够的交叉编译器都可以为任何 iOS 构建代码（尽管在实践中，由于 Apple 在设计编译器时所犯的错误，包括硬编码的库函数名称、类和方法选择器等，存在例外和限制.)。

头文件和库（包括 Apple 特定的“框架”类型的库）本质上是 iOS 上`/usr/include`,`/usr/lib`和目录的副本。`/System/Library/Frameworks`（即使这也不完全正确 - 在 iOS 上，iOS 3 和 iOS 3.1 中的库不存在头文件，因为引入了[dyld 共享缓存](http://www.iphonedevwiki.net/index.php?title=Dyld_shared_cache)）。它们基本上告诉编译器和链接器哪些函数、类和方法可用于特定版本的 iOS。头文件用于编译时验证，库用于链接时验证。基本上，在不需要交叉编译代码的普通非嵌入式系统（即桌面）上，“SDK”基本上意味着**操作系统本身中的相同文件**，并且它不会被称为“SDK”；它宁愿被称为“sysroot”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T12:08:14.567

理论上，您应该能够从 iOS 5 切换到 iOS 6 SDK 并且看不到任何差异。在实践中它*有点*不同。

1.  设备知道您使用的 SDK。这意味着设备本身可以决定采取不同的行为（无论出于何种原因，Apple 认为这是一个好主意）。
2.  您使用的是不同的工具链（gcc 和相关的二进制文件），它们可能会以不同的方式编译东西（尽管这种情况很少见，我还没有看到它实际发生过）。
3.  MonoTouch 本身的行为可能有所不同（现在什么都没有想到，但例如我们可能会为诸如部署目标之类的东西使用不同的默认值（当然，如果您自己没有设置））。

我相信您遇到了第一种情况 - Apple 在 iOS6 中为其 UI 层次结构添加了一些限制，它们仅在您针对 iOS 6 SDK 构建时才会强制执行（我认为不会破坏现有应用程序）。

# java - JDO（Google App Engine）中的持久列表

> ID：13118786
> 
> 赞同：2
> 
> 时间：2012-10-29T09:22:26.273
> 
> 标签：java, database, list, jdo, persistent

我正在使用 Java 中的 Google App Engine 和 JDO 为移动应用程序开发服务器端，并且在数据库中保存对象列表时遇到了一些问题。

我在对话和消息之间有一对多的关系（我正在尝试做一个类似聊天的应用程序）。一个对话有一个消息列表，一个消息属于一个对话。当我进行对话时，如果我得到与 ID 相同的对话，一切都很好，并且列表与消息一起返回。但是，如果我关闭 PersistenceManager 的该实例并尝试以另一种方法获取对话，则对话一切正常（小时、idUser 等属性），但消息列表为空。无论我做什么更改，该列表始终为空。

这是我的代码：

**对话.java：**

```
import java.util.LinkedList;
import javax.jdo.annotations.IdGeneratorStrategy;
import javax.jdo.annotations.IdentityType;
import javax.jdo.annotations.PersistenceCapable;
import javax.jdo.annotations.Persistent;
import javax.jdo.annotations.PrimaryKey;

@PersistenceCapable(identityType = IdentityType.APPLICATION)  
public class Conversation 
{
    @PrimaryKey  
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)  
    private Long id;

    @Persistent
    private Long idUser;

    @Persistent(mappedBy = "conversation")
    private LinkedList<Message> messages;

    public Conversation(Long idUser) 
    {
        this.idUser = idUser;

        messages = new LinkedList<Message>();       
    }

    public Long getId() {
        return id;
    }

    public Long getIdUser() {
        return idUser;
    }

    public LinkedList<Message> getMessages() {
        return messages;
    }
} 
```

**消息.java：**

```
import javax.jdo.annotations.IdGeneratorStrategy;
import javax.jdo.annotations.IdentityType;
import javax.jdo.annotations.PersistenceCapable;
import javax.jdo.annotations.Persistent;
import javax.jdo.annotations.PrimaryKey;
import com.google.appengine.api.datastore.Key;

@PersistenceCapable(identityType = IdentityType.APPLICATION)  
public class Message 
{
    @PrimaryKey  
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)  
    private Key id;

    @Persistent
    private Conversation conversation;

    @Persistent
    private String text;

    @Persistent
    private String hour;

    public Message(String text, String hour)
    {
        this.text = text;
        this.hour = hour;
    }

    public String getText() 
    {
        return text;
    }

    public String getHour() 
    {
        return hour;
    }

    public Key getId() 
    {
        return id;
    }

    public Conversation getConversation() {
        return conversation;
    }
} 
```

此外，我尝试单独获取消息，并且成功获取了它们。消息保存得很好，但会话中的消息列表丢失了。

我希望有人可以帮助我，在此先感谢！

**编辑：**我使用以下代码添加消息后保存对话：

```
final PersistenceManager persistenceManager = PMF.get().getPersistenceManager();      
final Conversation conversation = new Conversation(idUser1, idUser2);

//Add the messages successfully

try 
{
    persistenceManager.makePersistent(conversation);
} finally {
    persistenceManager.close();
} 
```

我得到了与那个人的对话：

```
final PersistenceManager persistenceManager = PMF.get().getPersistenceManager();  
Long idConversation;

//Got the idConversation with a query successfully

Conversation conversation = persistenceManager.getObjectById(Conversation.class, idConversation);
return conversation; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:53:08.973

您没有说明如何从数据存储中检索对象以及访问列表的位置。在交易中？外交易？对象处于什么状态？空洞的？分离？检索拥有对象时，List 是否在当前提取组中？

将列表放入当前提取组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T08:11:59.533

您不应该实例化实体列表成员。在 Jo 的注释工具中完成列表的实例化，反射作为 jpa 实现的一部分。

# sql - SQL检索最大值加上对应的另一列值

> ID：13118793
> 
> 赞同：1
> 
> 时间：2012-10-29T09:23:10.400
> 
> 标签：sql, oracle

假设我的数据库中有下表

```
 A        B          C       D          E
    2009    db1234      12345   1234567     3000
    2010    db1235      34567   1234567     3100
    2011    cn2345      23456   2345678     2800
    2010    db1236      12345   1234567     3100
    2012    db1237      34567   1234567     2800 
```

如果我在表 AI 上执行 max 函数将得到 2012。我希望查询返回 A 和相应的 C 列值，即 34567，在 SQL 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T09:57:02.773

要获取相应列的值以及应用聚合函数的列的值，您需要按该列进行分组。另一种方法是使用其中一个[分析函数](http://docs.oracle.com/database/121/SQLRF/functions004.htm#SQLRF06174)，无论是[row_number()](http://docs.oracle.com/database/121/SQLRF/functions169.htm#SQLRF06100)还是[rank()](http://docs.oracle.com/database/121/SQLRF/functions154.htm#SQLRF00690)，它们的行为不同，但在某些情况下它们可能会产生相同的结果。这里有几个例子：

```
SQL> with t1 (A, B, C, D, E) as(
  2  select  2009, 'db1234', 12345, 1234567, 3000  from dual union all
  3  select  2010, 'db1235', 34567, 1234567, 3100  from dual union all
  4  select  2011, 'cn2345', 23456, 2345678, 2800  from dual union all
  5  select  2010, 'db1236', 12345, 1234567, 3100  from dual union all
  6  select  2012, 'db1237', 34567, 1234567, 2800  from dual
  7  )
  8  select max(a) maxa
  9       , c
 10    from t1
 11  group by c
 12  order by 1
 13  ; 
```

结果：

```
 MAXA          C
---------- ----------
      2010      12345
      2011      23456
      2012      34567 
```

如果您只想返回第一行（排序很重要），您可以使用`rownum`伪列过滤结果：

```
SQL> with t1 (A, B, C, D, E) as(
  2  select  2009, 'db1234', 12345, 1234567, 3000  from dual union all
  3  select  2010, 'db1235', 34567, 1234567, 3100  from dual union all
  4  select  2011, 'cn2345', 23456, 2345678, 2800  from dual union all
  5  select  2010, 'db1236', 12345, 1234567, 3100  from dual union all
  6  select  2012, 'db1237', 34567, 1234567, 2800  from dual
  7  )
  8  select *
  9    from (select max(a) maxa
 10               , c
 11            from t1
 12           group by c
 13           order by 1 desc
 14  )
 15  where rownum = 1
 16  ; 
```

结果：

```
 MAXA          C
---------- ----------
      2012      34567 
```

第二种方法是使用`row_number`解析函数。

```
SQL> with t1 (A, B, C, D, E) as(
  2  select  2009, 'db1234', 12345, 1234567, 3000  from dual union all
  3  select  2010, 'db1235', 34567, 1234567, 3100  from dual union all
  4  select  2011, 'cn2345', 23456, 2345678, 2800  from dual union all
  5  select  2010, 'db1236', 12345, 1234567, 3100  from dual union all
  6  select  2012, 'db1237', 34567, 1234567, 2800  from dual
  7  )
  8  select a
  9       , b
 10       , c
 11       , d
 12       , e
 13    from (select a
 14               , b
 15               , c
 16               , d
 17               , e
 18               , row_number() over(partition by c order by a desc) rn
 19    from t1
 20  )
 21  where rn = 1
 22  ; 
```

结果：

```
 A B               C          D          E
---------- ------ ---------- ---------- ----------
      2010 db1236      12345    1234567       3100
      2011 cn2345      23456    2345678       2800
      2012 db1237      34567    1234567       2800 
```

如果您不想按任何列分组，您可以编写类似的查询（此处`max`使用函数的分析版本）：

```
SQL> with t1 (A, B, C, D, E) as(
  2  select  2009, 'db1234', 12345, 1234567, 3000  from dual union all
  3  select  2010, 'db1235', 34567, 1234567, 3100  from dual union all
  4  select  2011, 'cn2345', 23456, 2345678, 2800  from dual union all
  5  select  2010, 'db1236', 12345, 1234567, 3100  from dual union all
  6  select  2012, 'db1237', 34567, 1234567, 2800  from dual
  7  )
  8  select *
  9     from(select a
 10               , b
 11               , c
 12               , d
 13               , e
 14               , max(a) over() mx
 15           from t1
 16          ) q
 17    where q.a = q.mx
 18  ; 
```

结果：

```
 A B               C          D          E         MX
---------- ------ ---------- ---------- ---------- ----------
      2012 db1237      34567    1234567       2800       2012 
```

# java - 使用 Jackson 反序列化泛型类型

> ID：13118798
> 
> 赞同：7
> 
> 时间：2012-10-29T09:23:23.387
> 
> 标签：java, android, jackson, guice, roboguice

我正在尝试创建一个使用 Jackson 反序列化 POJO 的类。

看起来像这样...

```
public class DeserialiserImp<T> implements Deserialiser<T> {

        protected ObjectMapper objectMapper = new ObjectMapper();

        @Override
        public T get(String content, Class clazz) throws IOException {
            return (T) objectMapper.readValue(content, clazz);
        }

        @Override
        public List<T> getList(String content, Class clazz) throws IOException {
            return objectMapper.readValue(content, TypeFactory.collectionType(ArrayList.class, clazz));
        }

    } 
```

我有两个关于这个实现的问题。

首先是我将类类型传递给方法，以便对象映射器知道应该反序列化的类型。有没有更好的方法使用泛型？

同样在 get 方法中，我将从 objectMapper 返回的对象转换为 T。这似乎特别讨厌这样做，因为我必须在这里转换 T，然后我还必须从调用它的方法转换对象类型。

我在这个项目中使用 Roboguice，所以如果我可以通过注入更改类型，然后注释我需要它返回的通用类型的对象，那就太好了。我阅读了[TypeLiteral](http://google-guice.googlecode.com/git/javadoc/com/google/inject/TypeLiteral.html)并想知道它是否可以解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T09:52:59.313

> 首先是我将类类型传递给方法，以便对象映射器知道应该反序列化的类型。有没有更好的方法使用泛型？

不幸的是，没有，这是因为类型擦除。

> 同样在 get 方法中，我将从 objectMapper 返回的对象转换为 T。这似乎特别讨厌这样做，因为我必须在这里转换 T，然后我还必须从调用它的方法转换对象类型。

改为这样做：

```
@Override
public T get(String content, Class<T> clazz) throws IOException {
    return objectMapper.readValue(content, clazz);
} 
```

> 我在这个项目中使用 Roboguice，所以如果我可以通过注入更改类型，然后注释我需要它返回的通用类型的对象，那就太好了。我阅读了 TypeLiteral 并想知道它是否可以解决这个问题？

我真的不明白你想达到什么目标，但既然你无论如何都需要通过课程，那还有可能吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T12:41:29.687

所以我想我最终想通了。如果您发现我正在做的事情有问题，请发表评论。

接口是这样定义的......

```
public interface Deserialiser<T> {

    T get(String content) throws IOException;

    List<T> getList(String content) throws IOException;
} 
```

接口的实现是这样的……

```
public class DeserialiserImp<T> implements Deserialiser<T> {

    private ObjectMapper objectMapper = new ObjectMapper();
    private final Class<T> klass;

    @Inject
    public DeserialiserImp(TypeLiteral<T> type){
        this.klass = (Class<T>) type.getRawType();
    }

    @Override
    public T get(String content) throws IOException {
        return objectMapper.readValue(content, klass);
    }

    @Override
    public List<T> getList(String content) throws IOException {
        return objectMapper.readValue(content, TypeFactory.collectionType(ArrayList.class, klass));
    }

} 
```

我像这样绑定2..

```
 bind(new TypeLiteral<Deserialiser<User>>(){}).annotatedWith(Names.named("user")).to(new TypeLiteral<DeserialiserImp<User>>(){}); 
```

那么我需要做的就是使用它......

```
@Inject
@Named("user")
private Deserialiser<User> deserialiserImp;

public void test(String userString) {
    User user = deserialiserImp.get(UserString);
} 
```

如果类作为抽象类在 DAO 对象中使用，这种模式也可以很好地工作

[这篇](http://jamolkhon.blogspot.dk/2012/07/generic-typesafe-dao-with-guice-and.html)文章帮助了我

# asp.net - ken ui 日期选择器

> ID：13118799
> 
> 赞同：1
> 
> 时间：2012-10-29T09:23:27.907
> 
> 标签：asp.net, kendo-ui

我有一个 kendo ui datepicker，我希望我选择的日期应该显示在标签中。我想将选定的日期绑定到标签。我必须在我的 .cs 页面中添加哪些代码？

```
 <script type="text/javascript">
           $(document).ready(function() {
                $("#date").kendoDatePicker();
           });
 </script>     
</head>
<body>
<form id="form1" runat="server">
        <div  style="width: 155px;">
            <input id="date" />
        </div>
       <asp:Label ID="lblDate" runat="server" Text="Label"></asp:Label>
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:30:00.277

更改`<input id="date" />`为 asp.net 控件，例如：

```
<asp:TextBox ID="txtDate" runat="server" ></asp:TextBox> 
```

然后获取文本框的渲染ID：

```
$("#<%=txtDate.ClientID%>").kendoDatePicker(); 
```

这`asp:label`在这里没有帮助，意思是不回发您获得的日期值。在后面的代码中，您使用`txtDate.Text`

但是，如果您实际上不想将值放在标签上，则可以[将`change`剑道](http://docs.kendoui.com/api/web/datepicker#change)日期选择器用作：

```
<script type="text/javascript">
   $(document).ready(function() {
        $("#date").kendoDatePicker({
            change: function(e) {
                $("#<%=lblDate.ClientID%>").text($("#date").val());
            }
        });                
   });
 </script> 
```

# jquery - 显示特定 Instagram #tag 的图像总数

> ID：13118803
> 
> 赞同：2
> 
> 时间：2012-10-29T09:23:38.293
> 
> 标签：jquery, json, instagram

**[http://jsfiddle.net/MhhcS/1/](http://jsfiddle.net/MhhcS/1/)**

我正在尝试修改 Instagram 搜索 JS 以仅计算和显示特定标签的标签图像总数。

我在修改后的脚本中得到的唯一响应是`undefined`，此时我一无所知。[**您可以在此处**](https://api.instagram.com/v1/tags/search?q=newyork&access_token=27703032.79547bd.418b75856eb1419f9fc1311a518db229)查看我的请求中的 API 响应。

我在这里做错了什么或根本没有做什么？

任何正确方向的提示都非常感谢......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T09:29:34.327

使用该对象结构，您需要使用以下内容来获取`media_count`：

```
data.data[0].media_count 
```

第一个`data`是您为从请求中返回信息而定义的变量。第二个`data`是一个数组 - 因此`[0]`访问其中的第一个元素 - 包含`media_count`告诉您找到多少图像的参数。

[**示例小提琴**](http://jsfiddle.net/MhhcS/2/)

# android - 在android中的非root设备上自动更新应用程序

> ID：13118807
> 
> 赞同：1
> 
> 时间：2012-10-29T09:23:51.943
> 
> 标签：android, auto-update

我的问题是.. 是否可以在无根设备上静默自动更新应用程序？如果设备已植根，则它会使用超级用户权限更新我的应用程序，否则不会。请回复谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:34:51.043

在无根设备上静默自动更新应用程序是不可能的。Android 安全模型阻止了这种情况（有充分的理由），而且 AFAIR 除了让手机生根之外没有其他解决方法。您可以查看我编写的[自动更新程序源代码](http://code.google.com/p/auto-update-apk-client/)以了解它是如何完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:30:09.237

我想我没有 100% 得到您的问题，但是您是否在 Play 商店中看到了“自动更新此应用程序”？

当您下载应用程序时，您有此复选框，以便用户可以决定。作为开发人员，我认为您不能。

# jquery - 延迟加载不适用于 filtrify 和 Isotope

> ID：13118813
> 
> 赞同：1
> 
> 时间：2012-10-29T09:24:27.807
> 
> 标签：jquery, filter, lazy-loading

```
<script type="text/javascript">
$(function() {

    $("ul#container img").lazyload({ 
        event : "mouseover",
        effect : "fadeIn"
    });

    var container = $("#container");

   container.isotope({
        itemSelector : 'ul#container > li',
        layoutMode : 'masonry'
    });

  var ft =  $.filtrify("container", "placeHolder", {
        block    : "data-original",
        hide     : false,
        close    : true,
        callback : function ( query, match, mismatch ) {
          /*
        Extend jQuery with an "inview" selector to 
        select elements that are in the visible
        part of the page (at least partiacialy) 
    */
    $.extend($.expr[':'],{
        inview: function(el) {
            var e = $(el),
                w = $(window),
                wt = w.scrollTop(),
                wb = wt + w.height(),
                et = e.offset().top,
                eb = et + e.height();

            return ( (eb >= wt) && (et <= wb) );
        }
    });
     $("ul#container img").lazyload({ 
        event : "scroll filter",
        effect : "fadeIn"
    });
    $(match).find("img:inview").trigger("filter");
            container.isotope({ filter : $(match) });
            if ( mismatch.length ) $("div#reset").show();
            else $("div#reset").hide();
             }
    });
    $("div#reset span").click(function() {
        ft.reset();
    });

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:49:07.657

有同样的问题。查看了延迟加载代码。如果“滚动”在事件中的任何位置，它会忽略其他所有内容。最初我做了一个页面滚动触发器。但是我遇到了一个 css 问题，windows 认为图像在它的原始位置。所以它认为它不在页面上。:(

但是我确实注意到延迟加载将始终在事件“出现”时运行。如此变化

```
$(match).find("img:inview").trigger("filter"); 
```

至

```
$(match).find("img:inview").trigger("appear"); 
```

将工作。尽管它会强制所有 $(match) 图像加载，即使它们不可见。不是我知道的最佳解决方案。但...

# powerbuilder - PowerBuilder 12 将数据窗口另存为 Excel

> ID：13118818
> 
> 赞同：2
> 
> 时间：2012-10-29T09:24:49.523
> 
> 标签：powerbuilder

我们的 PowerBuilder 应用程序通过将 DataWindow 打印为 PDF 文件来生成报告。现在我们想修改 PB 以生成 Excel 而不是 PDF。

在我的 PB 代码中，我尝试使用以下函数：

```
public function integer save_dw_to_file (datawindow adw_datawindow, string as_filename, string as_folder);
  string ls_tmp_file_xls
  ls_tmp_file_xls = as_filename+'_temp.xls'
  adw_datawindow.saveas(ls_tmp_file_xls,Excel!,true)
  return 1
end function 
```

注意：adw_datawindow 是我要打印的DataWindow；as_filename 是输出文件名。但是，这似乎不起作用，因为打开文件时出现错误。

你知道怎么做吗？我们的环境：

PB版：PB 12经典版；Excel 版本：MS Excel 2007

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T20:19:06.267

您的代码应该可以工作；您应该检查错误代码，因为它将包含有意义的信息。

可能是权限（文件）问题、文件争用问题、坏文件夹（无效字符）等，现有文件被锁定。先看看文件/文件夹是否存在不会有什么坏处。您可以使用 FileExists(as_filename) 检查文件，也可以通过 DirectoryExists(as_directory) 检查文件夹。

你可以试试Excel8！适用于 Excel 8 或更高版本，但我认为您的 Excel！应该可以正常工作。

```
// Add saveastype as parameter to function
public function integer save_dw_to_file (datawindow adw_datawindow, &
                                         string as_filename, &
                                         string as_folder, &
                                         SaveAsType sat_SaveType)

int li_rc
string ls_tmp_file
ls_tmp_file = as_filename

// add file extension based on saveastype
choose case sat_SaveType
case Excel!, Excel5!, Excel8!
   ls_tmp_file += '_temp.xls'
case PDF!
   ls_tmp_file += '_temp.pdf'
end choose

if FileExists ( ls_tmp_file ) Then  
   if MessageBox('File already exists','Would you like to replace: ' + &
       ls_tmp_file + '?', Question!, YesNo!, 2) = 2 then
      return -1
   end if
end if 

// save type based on parameter to function
li_rc = adw_datawindow.saveas(ls_tmp_file, sat_SaveType, true)
if li_rc = -1 then
    MessageBox('Error saving file','Unable to save file: ' + ls_tmp_file)
end if

return li_rc 
```

# mysql - 按连续天分组

> ID：13118821
> 
> 赞同：0
> 
> 时间：2012-10-29T09:25:10.427
> 
> 标签：mysql, hibernate

我有一个动作表，每个动作都有两个日期，startDate 和 endDate，我想写一个按天分组的请求，**但是以连续的方式**

例子：

```
action ;  startDate ;  endDate

Action1 ; 2012-10-10 ; 2012-10-10

Action2 ; 2012-10-10 ; 2012-10-12

Action3 ; 2012-10-14 ; 2012-10-15 
```

我的要求是

```
SELECT DAY(startDate), COUNT(Name) FROM ActionTable 
WHERE startDate < '2012-10-09' and endDate > '2012-10-15'
GROUP BY DAY(startDate) 
```

这个请求返回给我：

```
10 ; 2

14 ; 1 
```

我需要一个请求才能得到这个结果

```
10 ; 2

11 ; 1

12 ; 1

14 ; 1

15 ; 1 
```

因此，如果三天内需要一项操作，我每天都会获得 +1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:05:27.847

我有个主意

我想为每一天创建一个新的计数，并按名称格式化日期（星期一....）

所以我每天都会得到一个结果列

我的开始日期；endDate 是一周的两个限制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:51:24.473

我认为解决这个问题的唯一方法是在所有日子里都有一个单独的表格：

```
CREATE TABLE `days` (
  `day` date NOT NULL
) 
```

您已经插入了要分组的所有日期（例如，整个月）：

```
INSERT INTO `days` (`day`) VALUES
  ('2012-10-10'),
  ('2012-10-11'),
  ('2012-10-12'),
  ('2012-10-13'),
  etc. 
```

然后运行这个查询：

```
SELECT days.day, count(*) as cnt
FROM
  days LEFT JOIN actions
  ON days.day >= actions.startDate and days.day <= endDate
GROUP BY days.day
HAVING Count(*)>0 
```

# azure - 微软私有云和 Azure 有什么关系？

> ID：13118823
> 
> 赞同：0
> 
> 时间：2012-10-29T09:25:13.740
> 
> 标签：azure

我安装了 Microsoft 2008 R2 和 Microsoft 私有云所需的所有软件。看来我能提供给用户的只是一个门户，他/她可以在其中“租用”虚拟机。我读到的关于“Web-Role”和“Worker-Role”的所有内容在这里都没有任何意义。（？）

我的假设是否正确：我只能创建一个提供 IaaS（？）的私有云。“Azure”是在一些微软私有云上运行并提供 PaaS 的应用程序。（？）“Azure”是我可以使用的 PaaS 服务。但是我无法在自己的私有云上​​启动它，因为我无法获取 Azure 软件（？）对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:48:22.303

Microsoft 上下文中的私有云通常与运行管理程序（例如 hyper-v）的 System Center 相关，并使用 System Center 的内置功能来启动图库图像、黄金模板并允许退款（门户）等。这就是全部在本地而不是在公共云中完成。

Microsoft 已经发布了一种本地“某种”Azure 技术[“Windows Azure 服务到 Windows Server 的托管服务提供商”](http://www.microsoft.com/hosting/en/us/services.aspx)，您也可以运行它，但它意味着托管商大规模运行以在本地提供 Windows Azure 功能（托管）环境，目前支持网站和 IaaS（VM），而不是云服务（Web/Worker Roles），并且不在公共云中运行。

Windows Azure 现在提供 IaaS（WinSrv28R2、WinSrv2012、Linux 等）和 PaaS（Web/Worker 角色）以及在北美、欧洲和亚洲数据中心的公共云中运行的 Windows Azure 网站，允许您在大规模按使用付费模式提供完整的公共云平台来满足您的 IT 需求。

高温高压

# ruby - 返回哈希的前 10 个键值

> ID：13118825
> 
> 赞同：0
> 
> 时间：2012-10-29T09:25:19.587
> 
> 标签：ruby

我正在阅读这样的 JSON：

```
[
  {
    "Low": 8.63,
    "Volume": 14211900,
    "Date": "2012-10-26",
    "High": 8.79,
    "Close": 8.65,
    "Adj Close": 8.65,
    "Open": 8.7
  },
  {
    "Low": 8.65,
    "Volume": 12167500,
    "Date": "2012-10-25",
    "High": 8.81,
    "Close": 8.73,
    "Adj Close": 8.73,
    "Open": 8.76
  },
  {
    "Low": 8.68,
    "Volume": 20239700,
    "Date": "2012-10-24",
    "High": 8.92,
    "Close": 8.7,
    "Adj Close": 8.7,
    "Open": 8.85
  },
  {
    "Low": 8.78,
    "Volume": 23433900,
    "Date": "2012-10-23",
    "High": 8.94,
    "Close": 8.78,
    "Adj Close": 8.78,
    "Open": 8.93
  }
] 
```

使用这个：

```
json = File.read("#{symbols[0]}.json") 
```

然后这样做：

```
result = JSON.parse(json) 
```

然后，当我想为键值“Low”选择第一个值时，我这样做了：

```
puts result[0]['Low'] 
```

这返回 58.75（正确）。

**但我想获得“低”的前三个值。我尝试执行以下操作，但它不起作用（说不能将字符串转换为整数）。为什么？**

```
puts result[0..2]['Low'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:31:08.950

```
results = [
  {"Low"=>58.75, "Volume"=>163200, "Date"=>"1962-02-01", "High"=>59.63, "Close"=>59.38, "Adj Close"=>0.61, "Open"=>59.63},
  {"Low"=>59.63, "Volume"=>134400, "Date"=>"1962-01-31", "High"=>60.0, "Close"=>59.75, "Adj Close"=>0.62, "Open"=>59.88},
  {"Low"=>59.13, "Volume"=>91200, "Date"=>"1962-01-26", "High"=>59.38, "Close"=>59.38, "Adj Close"=>0.61, "Open"=>59.13},
  {"Low"=>59.13, "Volume"=>91200, "Date"=>"1962-01-25", "High"=>59.88, "Close"=>59.13, "Adj Close"=>0.61, "Open"=>59.75},
  {"Low"=>58.5, "Volume"=>110400, "Date"=>"1962-01-24", "High"=>60.13, "Close"=>59.75, "Adj Close"=>0.62, "Open"=>60.13}
]
results[0..2].collect {|element| element['Low']}
>> [58.75, 59.63, 59.13] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:29:07.463

假设您有哈希数组，您可以这样做：

```
results = [
  {"Low"=>58.75, "Volume"=>163200, "Date"=>"1962-02-01", "High"=>59.63, "Close"=>59.38, "Adj Close"=>0.61, "Open"=>59.63},
  {"Low"=>59.63, "Volume"=>134400, "Date"=>"1962-01-31", "High"=>60.0, "Close"=>59.75, "Adj Close"=>0.62, "Open"=>59.88},
  {"Low"=>59.13, "Volume"=>91200, "Date"=>"1962-01-26", "High"=>59.38, "Close"=>59.38, "Adj Close"=>0.61, "Open"=>59.13},
  {"Low"=>59.13, "Volume"=>91200, "Date"=>"1962-01-25", "High"=>59.88, "Close"=>59.13, "Adj Close"=>0.61, "Open"=>59.75},
  {"Low"=>58.5, "Volume"=>110400, "Date"=>"1962-01-24", "High"=>60.13, "Close"=>59.75, "Adj Close"=>0.62, "Open"=>60.13}
]

(0..2).map {|idx| results[idx]['Low']} # => [58.75, 59.63, 59.13] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T09:48:46.113

它不起作用的原因是

*   `results[0]`返回单个哈希（然后您可以使用字符串对其进行索引`['key']`）
*   `results[0..2]`返回另一个（较小的）散列数组（您需要使用整数对其进行索引以获得单个散列）。

使用`map`函数 ( [docs](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-map) ) 可以让您获得所需的值。请注意，它是别名，`collect`因此您可以使用您喜欢的任何内容。在这种情况下，您正在收集一组值，因此这可能是最佳的概念拟合。

```
results[0..2].map {|hash| hash['Low']}
# or equivalently
results[0..2].collect {|hash| hash['Low']} 
```

# android - 向右或向左滑动小部件

> ID：13118826
> 
> 赞同：-1
> 
> 时间：2012-10-29T09:25:25.550
> 
> 标签：android

我的 ListView 有几个 LinearLayout 类型的元素。如何在他们喜欢的联系人上制作幻灯片效果（当联系人在右侧滑动时，有电话，在其他情况下写入消息）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:50:05.960

您可以将视图寻呼机与列表视图一起使用

[http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizo​​ntal-view-paging/](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:03:49.530

那是您谈论的视图寻呼机这是我为您制作的示例

ViewPageExample.java 文件

```
public class ViewPageExample extends Activity {

private ViewPager mViewPager;
private Context mContext;
private MyPageAdatper mAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
mContext = this;

mAdapter = new MyPageAdatper();
mViewPager = (ViewPager) findViewById(R.id.mViewPager);
mViewPager.setAdapter(mAdapter);
}

private class MyPageAdatper extends PagerAdapter{

        @Override
        public int getCount() {
               //Since only contacts messages and call logs were mentioned by you
                return 3;
        }

        @Override
        public Object instantiateItem(View collection, int position) {
            LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View mView = null ;
            switch(position){
                case 0:
                    mView   =   inflater.inflate(R.layout.contacts, null);  
                    Button btn1 = (Button) mView.findViewById(R.id.button1);
                    btn1.setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            Toast.makeText(getApplicationContext(), "Clicked", Toast.LENGTH_SHORT).show();
                        }
                    });
                break;

                case 1:
                    mView   =   inflater.inflate(R.layout.messages, null);   
                break;

                case 2:
                    mView   =   inflater.inflate(R.layout.callogs, null);   
                break;
            }

                ((ViewPager) collection).addView(mView,0);

                return mView;
        }

        @Override
        public void destroyItem(View collection, int position, Object view) {
                ((ViewPager) collection).removeView((View) view);
        }

        @Override
        public boolean isViewFromObject(View view, Object object) {
                return view==((View)object);
        }

        @Override
        public void finishUpdate(View arg0) {}

        @Override
        public void restoreState(Parcelable arg0, ClassLoader arg1) {}

        @Override
        public Parcelable saveState() {
                return null;
        }

        @Override
        public void startUpdate(View arg0) {}

}

} 
```

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#a4c639">
<android.support.v4.view.ViewPager
android:layout_width="fill_parent" 
android:layout_height="fill_parent" 
android:id="@+id/mViewPager"/>
</LinearLayout> 
```

calllogs.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Call Logs"
    android:textAppearance="?android:attr/textAppearanceLarge" />
</LinearLayout> 
```

联系人.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Contacts"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" />

</LinearLayout> 
```

消息.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="SomeMessages"
    android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

# java - 需要在 JSF 中隐藏我的 URL

> ID：13118836
> 
> 赞同：1
> 
> 时间：2012-10-29T09:26:05.300
> 
> 标签：java, jsf, web-applications

我想从 .properties 文件中获取的其他任意 URL 隐藏我的实际 URL。例如：-`https://localhost:8080/<WebApplicationContext>/login.xhtml` 在上面，如果我有 login.xhtml 到 dummy.st 的映射，那么 URl 应该是 `https://localhost:8080/<WebApplicationContext>/dummy.st`

对于我的应用程序中的所有页面，它应该是这样的。

请建议如何实现这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T09:30:44.133

看看[Pretty Faces](http://ocpsoft.org/prettyfaces/)是否能让你做你需要的事。它似乎可以做到

```
<url-mapping id="login">
    <pattern value="/dummy.st" />
    <view-id value="/login.xhtml" />
</url-mapping> 
```

但是我从来没有使用过漂亮的面孔。这是文档中的一个示例。

# c# - WPF页面调整大小

> ID：13118837
> 
> 赞同：2
> 
> 时间：2012-10-29T09:26:06.060
> 
> 标签：c#, wpf, layout, resize

我正在使用 C# 和 WPF 在 Visual Studio 中开发应用程序。我已经制作了带有导航控件的 WPF 页面的基本结构，可以从一个页面移动到另一个页面。我无法使页面在启动时最大化。我想模仿这个窗口行为 - WindowStyle = "None" - 使窗口无边框 - WindowState = "Maximized" - 使窗口全屏 基本上我希望我的页面全屏无边框。我无法调整它们的大小。我使用页面而不是窗口，因为我正在制作一个类似网络的离线桌面应用程序，并且有很多不同的屏幕从一个到另一个，我希望它们显示在一个“窗口”中，而不是让用户打开和关闭窗口从一个屏幕传递到另一个屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:41:01.577

您可以创建一个包含用于页面导航的[框架](http://msdn.microsoft.com/en-us/library/system.windows.controls.frame.aspx)的全屏窗口。

```
<Window x:Class="Pages.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        WindowStyle="None" WindowState="Maximized">
    <Frame Source="Page1.xaml">
    </Frame>
</Window> 
```

[在导航概述](http://msdn.microsoft.com/en-us/library/ms750478.aspx)中获取更多信息。

# parsing - 文本编辑器中的语法分析

> ID：13118840
> 
> 赞同：4
> 
> 时间：2012-10-29T07:04:00.337
> 
> 标签：parsing, vim, editor, textmate

文本编辑器如何执行语法高亮？我知道 vim 使用带有特殊扩展名的简单正则表达式来使它们更强大地区分语法元素，但我也知道其他一些文本编辑器（如 TextMate）允许您定义完整的解析器。TextMate 在大文件上的表现并不好，但 Sublime Text 在大文件上的表现应该比 vim 好，而且还支持传统的 TextMate 语法解析器。它是否使用了一些有趣的技巧来避免对文件执行从上到下的解析，或者它只是使用了一种非常有效的解析算法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-29T11:17:25.187

我曾经写过一个文本编辑器。我以为我可以比别人做得更好。然后我学习了 Vim 并意识到我错了：P 我的高亮引擎的一部分[仍然存在于 GitHub 上](https://github.com/d11wtq/mojibaker-framework)。

几种方法是可能的。您可以编写真正的词法分析（或浅解析）例程，但如果您有效地使用正则表达式并且您不是源解析理论方面的专家，那么它们实际上可能会更快。我使用了两者的混合。

为了获得良好的性能，编辑器*极不可能*突出显示整个文件。相反，只需突出显示文件的*可见区域*，这样您就可以最大限度地减少完成的工作。当然，然后您必须考虑当用户*在中间某处开始编辑时会发生什么*那个可见区域。我的方法是始终在内存中保留词法分析器状态的快照（即所有标记和词法状态的位置），然后从光标开始，向后走一两个标记，使用该点的词法分析器状态（即保持左侧的令牌和状态堆栈，并丢弃右侧的令牌）并从该点重新启动荧光笔，直到可见范围结束。因为所有（我认为）源语言都是从左到右读取的，所以在编辑区域左侧更远的标记的突出显示永远不会改变。

编辑 | 只是重新阅读我的源代码，我在此过程中还做了一些其他的优化。很长的关键字列表（例如内置函数名称）检查起来很昂贵。我将它们构建为具有巨大性能提升的基数树。

# css - 从下到上包裹 HTML 元素

> ID：13118842
> 
> 赞同：5
> 
> 时间：2012-10-29T09:26:24.513
> 
> 标签：css, word-wrap

HTML / CSS是否可以在容器底部显示一行元素，如果容器变小，这些元素会向上包裹？就像我们从页面底部开始写作并继续在已经写好的行之上一样。

元素不需要是内联文本的单词，例如 SPAN 或 DIV 等元素的集合，例如放置文本的 via`float:left;`也可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T09:59:03.753

也许使用 min-height 这样盒子会向上扩展：

```
#container{
     position:relative;
     width: 300px;
     height: 200px;
     background: #f90;  
}      
#text-container{
    position: absolute;
    bottom: 0;
    width: 300px;
    min-height: 10%;
    background: #f00;        
} 
```

[http://jsfiddle.net/grainne/DD7dG/32/](http://jsfiddle.net/grainne/DD7dG/32/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T09:33:22.477

我不这么认为。事实上，仅仅有一些“底部对齐”就已经很重要了。有一些“足够接近”的解决方法，但没有什么是真正的“垂直对齐：底部”。具有此类元素的网站上的示例总是被证明是一堆 JavaScript。

[基本上，许多其他人之前都尝试过处理这个问题。](https://stackoverflow.com/questions/585945/how-to-align-content-of-a-div-to-the-bottom-with-css)

# r - 计算数据框中的计数变量

> ID：13118843
> 
> 赞同：8
> 
> 时间：2012-10-29T09:26:39.737
> 
> 标签：r

我有一个 R 数据框：

```
a <- 1:12  
list <- c(rep("x",3),rep("y",4),rep("z",3),rep("x",2))  
data <- data.frame(a,list)

data  
 a list  
 1    x  
 2    x  
 3    x  
 4    y  
 5    y  
 6    y  
 7    y  
 8    z  
 9    z  
10    z  
11    x  
12    x 
```

我想创建一个新列，每次“list”的值更改时从 1 开始计数，即在此示例中：

```
b <- c(1:3,1:4,1:3,1:2)    
data <- data.frame(a,list,b) 
```

我远不是 R 方面的专家，而且我一生都无法找到一种有效的方法来做到这一点。我的主要问题似乎是“列表”的任何值都可以随时返回，但是对于一个值的块的长度没有规则。有没有人有任何想法？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T09:44:06.347

我会`rle()`用来获取运行长度，`list`然后使用方便的函数从返回的组件`sequence()`生成所需的计数器：`$lengths``rle()`

```
R> sequence(rle(as.character(data$list))$lengths)
 [1] 1 2 3 1 2 3 4 1 2 3 1 2 
```

请注意，我们必须转换`list`为原子向量（在我的情况下为字符向量），因为`rle()`.

要将其放入 中`data`，然后将其包装在一个调用中，例如

```
data <- transform(data, b = sequence(rle(as.character(list))$lengths)) 
```

这使

```
R> data <- transform(data, b = sequence(rle(as.character(list))$lengths))
R> data
    a list b
1   1    x 1
2   2    x 2
3   3    x 3
4   4    y 1
5   5    y 2
6   6    y 3
7   7    y 4
8   8    z 1
9   9    z 2
10 10    z 3
11 11    x 1
12 12    x 2 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T09:41:24.043

关键思想是使用`rle()`（运行长度编码）`data$list`（在将其强制为原子向量之后 - 毕竟，我们对特定条目不感兴趣）。然后我们使用`seq()`创建从 1 开始并以计算的运行长度结束的序列。最后，我们将所有这些序列粘贴在一起：

```
unlist(lapply(rle(as.numeric(data$list))$lengths,FUN=seq,from=1)) 
```

# android - libgdx 中的 ColorMatrixColorFilter equivlanet

> ID：13118845
> 
> 赞同：3
> 
> 时间：2012-10-29T09:26:41.347
> 
> 标签：android, libgdx

我的程序有一个方法应该获取图像和颜色，并将该图像中的所有像素转换为该颜色，同时保持每个像素的透明度。

这可以在 Android 中轻松完成，`ColorMatrixColorFilter`而无需使用嵌套循环来遍历整个图像并单独更改每个像素，这明显慢得多。

但是，我最近决定切换到 libgdx，这意味着我无法使用`ColorMatrixColorFilter`. libgdx 是否有任何类可以做类似的事情，而无需我手动更改每个像素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T02:02:45.293

做到这一点的最好方法是使用只有白色像素的纹理（不同的 alpha），并在绘制它们之前对它们进行着色 - 只是`SpriteBatch.setColor(r,g,b,a)`设置回`Color.WHITE`之后。

除了必须暂停逐像素变换纹理之外，这样做的最大优点是纹理不需要设置在自己的文件中，而是可以与所有其他纹理放在同一个 TextureAtlas 中没有被着色。因为不需要绑定不同颜色的纹理版本，`SpriteBatch`最终会减少渲染调用，这意味着渲染速度更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T09:58:42.507

[http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/Sprite.html#setColor(com.badlogic.gdx.graphics.Color](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/Sprite.html#setColor(com.badlogic.gdx.graphics.Color) 看看 setColor();

实际上，我确实自己操作每个像素，而且还不错。你应该试一试。

# java - Apache poi 无法打开 word 文档：NoSuchMethodError 使用 ooxml-shemas-1.0.jar 但不使用 poi-ooxmlshemas-3.8.jar

> ID：13118848
> 
> 赞同：2
> 
> 时间：2012-10-29T09:26:52.503
> 
> 标签：java, apache-poi, openxml

我正在使用 Apache poi 来操作 word 2007 文档。我正在使用 ooxml-shemas-1.0 但有以下消息：

```
Caused by: java.lang.NoSuchMethodError: org.openxmlformats.schemas.wordprocessingml.x2006.main.CTFootnotes.getFootnoteList()Ljava/util/List;
        at org.apache.poi.xwpf.usermodel.XWPFFootnotes.onDocumentRead(XWPFFootnotes.java:84)
        at org.apache.poi.xwpf.usermodel.XWPFDocument.initFootnotes(XWPFDocument.java:235)
        at org.apache.poi.xwpf.usermodel.XWPFDocument.onDocumentRead(XWPFDocument.java:137)
        at org.apache.poi.POIXMLDocument.load(POIXMLDocument.java:159)
        at org.apache.poi.xwpf.usermodel.XWPFDocument.<init>(XWPFDocument.java:123)
        at com.scientiweb.utils.WordDocumentProcessor.loadFromTemplate(WordDocumentProcessor.java:74) 
```

我在 poi-ooxmlshemas-3.8.jar 中找到了我不再使用的方法，因为我用 ooxml-shemas-1.0.jar (14 mb) 替换了它。在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T11:17:44.620

找到了！我不得不使用 ooxml-schemas-1.1.jar 响应在这里：[http ://poi.apache.org/faq.html#faq-N10025](http://poi.apache.org/faq.html#faq-N10025)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-31T20:42:21.183

由于 POI 3.7 需要 ooxml-schemas-1.1.jar，您可以从这里下载它[http://repo1.maven.org/maven2/org/apache/poi/ooxml-schemas/1.1/ooxml-schemas-1.1-sources 。罐](http://repo1.maven.org/maven2/org/apache/poi/ooxml-schemas/1.1/ooxml-schemas-1.1-sources.jar)

# beanstalkd - 多个 beanstalkd 客户端处理一项工作

> ID：13118850
> 
> 赞同：0
> 
> 时间：2012-10-29T09:27:12.000
> 
> 标签：beanstalkd

beantalkd 是否有可能通过多个客户来处理一项工作？在这种情况下应该如何删除作业？

我想将消息从一台服务器发送到另外 10 台服务器，因此所有这些服务器都将完成工作 - 这是关于更新服务器上的本地数据。

我应该为此类任务选择其他任何 MQ 系统吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:27:16.880

您不能在所有其他十台服务器上运行一项作业，并让它们都承认它已完成。

您可以使用第一条消息然后为每个服务器创建一条消息，可能在单独的管中（例如，名为*worker01* .. *worker10*）。每台服务器都有一个管道，您还可以快速轻松地查看每个管道中有多少工作 - 这样您就可以查看是否有任何服务器没有接收消息。

# java - 以可读格式打开 Java 字节码并进行编辑

> ID：13118851
> 
> 赞同：2
> 
> 时间：2012-10-29T09:27:13.000
> 
> 标签：java, jvm, javac, bytecode, .class-file

我想使用某种编辑器打开由 Java 编译器生成的字节码（Java 二进制文件），它允许我查看字节码（原始，但人类可以理解，采用[此处](http://en.wikipedia.org/wiki/Java_class_file#File_layout_and_structure)定义的格式）并直接在`.class`文件中修改内容。

我已经尝试过该`javap`实用程序。但是通过`javap`，我无法更改我的 .class 文件，而且它似乎也没有显示原始字节码

此外，我还看到过像[JD Decompiler](http://java.decompiler.free.fr/)这样的反编译器，它为我提供了`.class`文件中的代码。但是我对源代码不感兴趣，我想查看字节码。

另外，我尝试过名为[dirtyJOE](http://dirty-joe.com/) & [JBE](http://set.ee/jbe/)的GUI 编辑器。这个编辑器很好，完成了我一半的目的。我可以看到文件中的各个字段`.class`并编辑我的`.class`文件。但这似乎也像一个翻译器，将字节码解码并显示在 UI 上以便于理解。它没有向我显示原始字节码。

甚至可以转到原始字节码吗？

我可能听起来很愚蠢，但我想确认这一点，以正确理解 Java 编译器和 JVM。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T09:33:58.173

可以转储原始字节码，`javap -v`但要以您可以编辑的格式获取类文件中的所有信息，我使用 ASM。您不使用它进行编辑的原因是；

*   它不允许你做很多你在 Java 中做不到的事情。
*   它很难使用。
*   如果你打破它，你不会得到太多反馈。

字节码只是 Java 代码的编译版本，这毫无价值，这就是为什么它们做同样的事情的原因。JVM 可以自由地以多种方式对其进行优化，如果您想了解 JVM 的工作方式或代码的运行方式，那么理解字节码并不是很有用。

* * *

感谢@Antimony 建议使用手动编写的字节码。虽然其中一些是有效的，但它们要么相当先进，要么晦涩难懂，要么具有实现相同目标的替代方法。

一些想法

> 抛出已检查的异常而不声明它们，

```
Thread.currentThread().stop(checkedException); 
```

> 捕获检查的异常而不声明它们，

```
 if (false) throw new CheckedException();
} catch(CheckedException ce) { 
```

> 在 Java 中使用无效的标识符

有这么多有效但不是那么有用的字符可以使用我会使用其中一个

```
if( ⁀ ‿ ⁀ == ⁀ ⁔ ⁀ || ¢ + ￠== ₡) 
```

和

```
for (char c⁯‮h = 0; c⁯‮h < Character.MAX_VALUE; c⁯‮h++)
    if (Character.isJavaIdentifierPart(c⁯‮h) && !Character.isJavaIdentifierStart(c⁯‮h))
        System.out.printf("%04x <%s>%n", (int) c⁯‮h, "" + c⁯‮h); 
```

由于标识符中的不可见字符导致文本向后打印，因此是有效代码。

[http://vanillajava.blogspot.co.uk/2012/09/hidden-code.html](http://vanillajava.blogspot.co.uk/2012/09/hidden-code.html)

[http://vanillajava.blogspot.co.uk/2012/08/uses-for-special-characters-in-java-code.html](http://vanillajava.blogspot.co.uk/2012/08/uses-for-special-characters-in-java-code.html)

> 在构造函数调用之前访问字段

我很确定这会导致VerifyError（或者在我尝试时确实如此）。相反，您可以使用

```
Object o = Unsafe.allocateInstance(clazz); // create without calling a constructor. 
```

> 有条件地调用不同的构造函数

同样，我已经能够在对象创建和实例调用之间放置代码，但可能有一种方法可以让它工作。在Java中你会写

```
MyClass mc = condition ? new MyClass(a) : new MyClass(a, b); 
```

> 对构造函数进行异常处理。

不确定您在这里的意思，因为您可以在构造函数中捕获或抛出异常。

> 多次分配最终字段或根本不分配

您可以改用反射并为最终字段提供默认值。即一个字段不可能没有价值。

> 有一个带有非strictfp 方法的strictfp 构造函数

这是一个有趣的，但不是我曾经需要的。

> 使用更宽松的类型检查

字节码确实允许不同的类型检查规则，但它们很容易与不太有用的 VerifyErrors 发生冲突。你可以做到这一点，但它很难得到正确的恕我直言。

> 从静态初始化程序抛出异常

您已经可以抛出未检查的异常，并且要抛出已检查的异常，您可以使用上面的技巧，但是我通常用 AssertionError 或类似的方法包装。

> 使用调用动态

您可以使用 MethodHandles，但它们在 Java 7 中相当笨重。我希望在 Java 8 中它们会更自然地使用。

> 使用子程序

有趣的是，我还没有尝试过，但我不确定它们比方法调用有什么优势。

> 使用异常控制流

没错，但这更有可能混淆 JIT 优化器，因此代码可能会变慢，因此可能不会给您带来您希望的优势。

> 使用旧的超级调用语义

你可以，但我不确定这有多大用处。

> 使用线程监视器

您可以使用

```
Unsafe.enterMonitor();
Unsafe.exitMonitor();
Unsafe.tryMonitorEnter(); 
```

> 字段的初始值。

我同意编译器并没有像我预期的那样使用这些，但是我再次不确定如果这样做会有什么不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T05:01:01.190

有几个专为字节码操作而设计的库，例如 ASM，但我没有使用过它们，所以我不能对它们的功能或可用性说太多。

还有汇编器，旨在将人类可读的形式转换为二进制类文件（我什至自己写了一个）。据我所知，没有任何工具可以将类文件转换为汇编格式，但如果你有兴趣，我可以写一个。

对于简单的修改，如果您知道自己在做什么，也可以只使用十六进制编辑器。我以前在十六进制编辑器中编辑过几次课程。

# mysql - MySQL 或 MSSQL 作为 Access 数据库的后端？

> ID：13118854
> 
> 赞同：0
> 
> 时间：2012-10-29T09:27:24.980
> 
> 标签：mysql, sql-server, ms-access

一位客户希望我将他的（非常大的）Microsoft Access 数据库迁移到 SQL 服务器，并将 Access 作为前端。他们已经有很多用户，性能问题越来越严重。

现在，哪个 SQL 服务器最合适？

`MySql`: 我有多年的 MySQL 经验，并认为自己是专家，尽管与 Access 无关。由于是免费的，MySQL 对我的客户也很有吸引力。

`MSSQL`: 我曾经对 MSSQL 非常有经验，但那是 12 年前或更长时间了。从那以后发生了很多事情。但作为 Microsoft 产品，我认为将数据迁移到 SQL 服务器并与 Access 一起使用可能会更加简化，这或许可以弥补（最近）对该产品的缺乏经验。

那么，它是如何使用 MySQL 作为 Access 的后端而不是 MSSQL 的呢？我应该指望会大大增加迁移所需时间的主要障碍，还是我在 MySQL 方面的丰富经验足以弥补这些障碍？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:45:03.430

如果成本是一个主要问题，那么有免费版本的 SQL Server 可能更能够处理从 Access 迁移的任何数据库。（即：[SQL Server Express](http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx)）

Access 和 SQL Server 之间的集成确实更加精简，只要你没有太多 MySQL 的坏习惯（例如：省略 group by 元素），那么你缺乏最近的经验应该不会对可能的级别产生太大影响此项目所需的 SQL。

# html - Wordpress 视觉 - 没有被识别的换行符

> ID：13118860
> 
> 赞同：1
> 
> 时间：2012-10-29T09:28:08.820
> 
> 标签：html, css, wordpress

不知道我做错了什么。我创建了一个主题，一切都很好，除了我在可视化编辑器中创建帖子时。对我来说，这很好，但大多数用户不了解 HTML，因此无法真正进入并编辑代码。

在元素检查器（Chrome）中，文章出现如下：

“文本...

更多文字……”

因此，当我在 Wordpress 的可视化编辑器中查看它时，一切看起来都很好，但在页面本身上，它看起来像这样：

“文字……更多文字……”

关于什么 HTML/CSS 可以识别这样的换行符或如何添加的任何想法

在可视化编辑器中自动创建的标签？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:33:52.063

WordPress 有一个令人讨厌的习惯，即删除中断标签。我在所有网站上所做的就是安装插件 TinyMCE 高级[http://wordpress.org/extend/plugins/tinymce-advanced/](http://wordpress.org/extend/plugins/tinymce-advanced/) ，因此我什至不必考虑这个问题。在它的设置中，您将在底部看到一个复选框，上面写着“保存时停止删除`<p>`and`<br />`标签并在 HTML 编辑器中显示它们”。只需确保已检查。这样，当有人在可视化编辑器中并转到下一行时，将创建中断并将始终反映在 HTML 编辑器和实时页面中。

# php - jasperserver - SOAP PHP 示例

> ID：13118871
> 
> 赞同：1
> 
> 时间：2012-10-29T09:29:20.653
> 
> 标签：php, soap, jasperserver

当我运行肥皂示例时，出现以下错误/警告：

```
Warning: DOMDocument::loadXML(): Start tag expected, '<' not found in Entity, line: 1 in /var/www/vtigercrm540/Jasper/client.php on line 300 
```

我可以登录，但每次登录（也使用错误的凭据）时，我都会进入`listReports.php`页面并看到：

```
Warning: DOMDocument::loadXML(): Start tag expected, '<' not found in Entity, line: 1 in /var/www/vtigercrm540/Jasper/client.php on line 300 
```

列出报告：

```
Current Directory: /

[..]

Exit 
```

# node.js - 如何将基于 MongoDB 的分析扩展到每天数百万个事件？

> ID：13118872
> 
> 赞同：1
> 
> 时间：2012-10-29T09:29:29.723
> 
> 标签：node.js, mongodb, analytics

关于我之前的问题（[如何快速构建大规模分析服务器？](https://stackoverflow.com/questions/12401460/how-to-quickly-build-large-scale-analytics-server) ）我现在将我的分析数据提供给 MongoDB - 每个事件（带有一堆元数据）在视图集合中都有自己的文档。

但是，现在我遇到了下一个障碍：既然插入已完成并且分析数据正在流动，那么针对该数据运行阻力最小的路径是什么？这个想法是，一旦数据被分片，特定视图将运行 mapReduces（比如一个月前具有特定 ID 的所有事件）。

所以，我的问题是：由于我对 MongoDB 很陌生，我需要采取哪些步骤才能尽可能快地获得这些 mapReduces？我应该以不同的方式构建原始数据还是每个事件的一个文档正确？在针对每天获得数百万次插入的数据集运行时，我可以采取哪些特定于 Mongo 的技巧来使事情变得更快？

我宁愿让我的技术堆栈尽可能简单（Node.js + MongoDB），所以我更愿意在不引入额外技术的情况下完成事情（比如 Hadoop）。

事件的示例文档：

```
{
    id: 'abc',
    ip: '1.1.1.1',
    type: 'event1',
    timestamp: 1234,
    metadata: {
        client: 'client1'
    }
} 
```

所有主要聚合都将以 ID 为中心，分析所述 ID 中的事件，最常用的是获取上个月具有所述 ID 的所有事件。次要聚合将使用元数据对事物进行分组（使用客户端 1 与客户端 2 的百分比等）。所有聚合都将由系统定义，因此至少此时用户无法自行设置它们。因此，据我了解，分片应该通过 ID 完成，因为大多数聚合将以 ID 为中心？此外，这应该意味着任何给定 ID 上的最新事件始终在内存中，因为 Mongo 将最新内容保存在内存中，并且只会将溢出转储到磁盘。

此外，实时不是必需的。虽然，ofc会很好。:P

编辑：添加示例数据

编辑：标题应该是“...每天”而不是“...每页”+关于聚合集的更多规范

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T06:23:47.740

> 尽可能快地获得 mapreduce 的步骤：

*   优化您的数据，以便您拥有尽可能多的内存。去磁盘“杀死”（让它真的很慢）一切！（请参阅下面关于我为什么不建议使用 mapreduce 的评论！）

> 我应该以不同的方式构建原始数据吗？

*   如果您聚合的维度数量是已知且有限的，那么为什么不在插入时存储和增加聚合呢？而不是查询它？（显然这会在插入时增加更多的负载/处理）[MongoDB 文档关于预聚合模式](http://docs.mongodb.org/manual/use-cases/pre-aggregated-reports/)

> 在针对每天获得数百万次插入的数据集运行时，我可以采取哪些特定于 Mongo 的技巧来使事情变得更快？

*   分片可扩展您的写入。如果加载了单个节点，则添加另一个。选择一个合适的分片键来实现平衡写入（一个分片不会得到所有的写入）

其他需要考虑的事项：

MapReduce 速度慢，不适合在线操作。它是一个批处理框架。它也是单线程的，就像 JS 引擎一样。它在与 JS 之间进行转换也有开销。我使用聚合框架来绕过这些限制，并发现它比使用 mongodb mapreduce 命令更快且更具可扩展性。

如果执行 mapreduce 或聚合框架操作，请尝试在内存中获取尽可能多的活动数据集！去磁盘会杀死两者的性能。[我发现关于右平衡索引](https://www.google.com.au/search?q=right-balanced+index)的 mongodb 注释对于将我们的工作集保存在内存中非常宝贵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T10:26:13.377

MapReduce 不会很快。它使用 JavaScript 引擎做一件事，因此您需要运行的代码越多来查询数据就越慢。您可以越多地利用具有索引的本机数据库引擎越好。你能提供一些你的数据结构可能是什么样子的例子吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T15:28:21.940

用我自己的风格扩展另一个答案；map reduce 是许多处理的可靠选择。毫无疑问，如果您完全做到这一点，map reduce 将成为您分析的重要核心。

最好的 MR 类型是增量式的，它构建某些事件和人员的档案统计信息，以缩小整体数据库大小和提取所有旧数据的工作集大小。

至于实时使用，我发现（从 Google 用户组中 MongoDB 早期关于该主题的许多讨论中）最好的方法是预先聚合您的数据，以便一个简单的线性查询，如：`db.some_preaggregated_data.find({date: {$gt, $lt}})`将得到您的结果。这简化了数据的分片和范围，更不用说你的工作集大小了。总体而言，提供了更高性能的操作。

我会推荐一件事：- 如果您真的希望它能够实时完全扩展，请不要进入聚合框架或复杂查询。它将开始在如此庞大的数据集上创建过多的工作。您将需要完整的锁、工作集等，使用简单的`find()`查询来满足您对大表格式的需求。

# ajax - 必应地图。将比例尺从英制更改为公制？

> ID：13118881
> 
> 赞同：0
> 
> 时间：2012-10-29T09:30:05.803
> 
> 标签：ajax, asp.net-mvc-3, bing-maps

正如标题所说...一直在寻找[Bing Maps API](http://www.microsoft.com/maps/isdk/ajax/)并且找不到任何有关如何将比例尺从英制更改为公制的信息...任何建议任何人？AJAX v6.3

为了让问题更清楚一点......我问是否有某种解决方案以编程方式显示公制比例尺？或者，如果只有一种方法只显示公制比例尺。

我读过的，必应地图会在浏览器中读取您的本地设置，以查看您所在的国家/地区是否使用英制或公制。

而且我也有护目镜：d 它也是...：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:41:13.960

要改变比例尺单位，可以通过具体方法VEMap.SetScaleBarDistanceUnit()来实现，见MSDN：

[http://msdn.microsoft.com/en-us/library/bb412528.aspx](http://msdn.microsoft.com/en-us/library/bb412528.aspx)

这是一个例子：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
   <head>
      <title></title>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

      <script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=6.3"></script>

      <script type="text/javascript">
         var map = null;
         var clickEvent = null;

         function GetMap()
         {  
            map = new VEMap('myMap');            
            map.LoadMap();
            map.SetScaleBarDistanceUnit(VEDistanceUnit.Kilometers);    // Could also be VEDistanceUnit.Miles
         }
      </script>
   </head>
   <body onload="GetMap();" style="font-family: Arial">
      <div id='myMap' style="position: relative; width: 800px; height: 400px;">
      </div>
   </body>
</html> 
```

# datetime - 如何使用基于 Powershell 中当前日期的名称创建文件夹？

> ID：13118883
> 
> 赞同：4
> 
> 时间：2012-10-29T09:30:10.770
> 
> 标签：datetime, powershell, create-directory

每次运行特定逻辑时，我都会新生成大约 50 个 xml 文件。现在我希望将这 50 个文件存储在特定的日期时间文件夹中。无论我为某个特定日期运行该逻辑多少次，xml 文件都应仅针对该特定日期被覆盖（基于 hhmmss）。简单来说，如何使用基于当前日期的名称创建文件夹并根据日期将 xml 文件存储在其中？

例如：有 3 个 xml 文件 file_1.xml、file_2.xml 和 file_3.xml

现在我想以格式创建一个文件夹-

```
**xml_yyyymmdd_hhmmss** 
```

这将容纳其中的所有 xml 文件。

```
For Eg: Xml_20121029_180912 
```

将是为今天创建的文件夹。今天所有的 3 个 xml 文件都将存储在此。

明天的文件夹名称将是：

```
Xml_20121030_170912 
```

我的代码如下所示：

```
$location = New-Item -Path . -ItemType Directory -Name ("XML_$(Get-Date -f dd_MM_yyyy_hhmmss)")
$rptdir = "C:\Test" 
$ rptdir = ($rptdir + '\' + $location.Name)
$outputFile= "$rptdir\File_2.xml"
$row = "\\shared\Data\DevSB\CS\appSomeSystem.dll"   
& /f:$row /o:$outputFile 
```

**输出错误**：找不到路径“C:\test\XML_29_10_2012_091717\File2.xml.

这里的**问题**是 - 文件夹 XML_29_10_2012_091717 是用其中的 File2.xml 创建的，但不在 C:\Test 内，而是在脚本所在的位置。

**我需要在 C:\test 中创建 XML_29_10_2012_091717，其中包含 File2.xml。**

**环境**：Win Xp Professional。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T10:16:07.740

试试这个：

```
New-Item -Path . -ItemType Directory -Name ("XML_$(Get-Date -f ddMMyyyy_hhmmss)") 
```

评论后编辑：

尝试改变这个：

```
$location = New-Item -Path c:\test -ItemType Directory -Name ("XML_$(Get-Date -f dd_MM_yyyy_hhmmss)")
$outputFile= "$($location.fullname)\File_2.xml" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T10:08:17.273

完整版是：

```
New-Item -Path . -ItemType Directory -Name (Get-Date -f dd_MM_yyyy) 
```

您也可以使用 md 或 mkdir

```
md (Get-Date -f dd_MM_yyyy) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:16:54.593

```
$location = New-Item -Path $rptdir -ItemType Directory **-force** -Name ("XML_$(Get-Date -f dd_MM_yyyy_hhmmss)") 
```

在这里添加一个 -force cmd-let 怎么样？

# wordpress - 为什么我无法获取帖子的内容？

> ID：13118899
> 
> 赞同：1
> 
> 时间：2012-10-29T09:31:21.973
> 
> 标签：wordpress

我的代码：

```
<div class="date"><?php the_time('d') ?> <?php the_time('M') ?></div>
<h2 class="titolo" style="min-height:0;"><?php the_title(); ?></h2>                                                                        
<div class="descrizione"><?php the_content(); ?></div> 
```

时间和标题是正确的。但是内容是空的？

事实上，尝试：

```
$pr=get_posts();
print_r($pr); 
```

我在数组中看到了标题和描述。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:33:34.910

试试这个

```
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
<div class="date"><?php the_time('d') ?> <?php the_time('M') ?></div>
<h2 class="titolo" style="min-height:0;"><?php the_title(); ?></h2>                                                                        
<div class="descrizione"><?php the_content(); ?></div>
<?php endwhile; else: ?>
<div class="alert alert-warning"><h4>Warning</h4><p><?php _e('Sorry, no posts matched your criteria.'); ?></p></div>
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:24:12.093

你可以使用 $content = get_the_contnet(); 或 $content = $post->post_content;

然后将 $content 视为普通的 php 变量。

# matlab - 在 MATLAB 中从文本文件中提取字符串

> ID：13118902
> 
> 赞同：1
> 
> 时间：2012-10-29T09:31:52.033
> 
> 标签：matlab, text-files, text-parsing

如何使用文本文件中的值创建一个新变量，而不实际加载所有这些变量？

例如，我有两个文本文件：第一个包含`a**bc**d`在第 18 行。第二个包含`a**cf**d`在同一位置。我正在寻找的结果是：

```
bc 
cf 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T19:10:12.360

不幸的是，您的问题措辞不佳，但该示例为我提供了您想要实现的目标的线索。我希望以下内容有所帮助：

### 跳线

要跳过行，您可以有效地使用[`fgetl`](http://www.mathworks.com/help/matlab/ref/fgetl.html)or[`fgets`](http://www.mathworks.com/help/matlab/ref/fgets.html)并丢弃其结果。这只是将文件指针前进到您想要的行。关于您的简化示例，如果您想跳过前 17 行并阅读第 18 行^，您可以执行以下操作：

```
fid = fopen(somefile, 'r');
for i = 1:17
    fgetl(fid);
end
s = fgets(fid); 
```

或者将每一行读入同一个变量（`s`在我的示例中），覆盖其先前的值：

```
fid = fopen(somefile, 'r');
for i = 1:18
    s = fgetl(fid);
end 
```

一个更短的替代方法是使用`textscan`以下`'HeaderLines'`选项：

```
C = textscan(fid, '%s', 1, 'Delimiter', '\n', 'HeaderLines', 17);
s = C{:}; 
```

### 从字符串中提取子字符串

由于字符串是字符数组（向量），因此您可以使用向量索引来提取所需的任何元素。例如，要从中提取位置 2 和 3`s = 'abcd'`以获得`bc`，可以使用表达式`s([2 3])`，如下所示：

```
result = s([2 3]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T13:28:43.493

我不确定我是否理解您的问题，但您可能想查看 FSEEK 和 FGETL 的文档。布雷特

# openerp - OpenERP中树形视图的点击事件

> ID：13118903
> 
> 赞同：1
> 
> 时间：2012-10-29T09:32:00.743
> 
> 标签：openerp

我在 OpenERP 中创建了一个树视图。它没有“可编辑”属性，并且包含一些 many2one 字段。

当我单击 many2one 字段时，如何使其打开相关对象的表单视图？

例如，此树视图中有一个“销售订单”字段。当我单击此列时，它会打开销售订单的表单视图，因为我单击表单视图中的相同字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:57:40.293

如果您在 OpenERP 6.1 上看到并在所有关系字段上实现了这个东西，我附上了 OpenERP 6.1 和主干的屏幕截图，其中将关系字段显示为 URL，它将您重定向到该关系记录的视图。

*   OpenERP 6.1 销售订单视图，您可以在其中看到合作伙伴和地址 m2o 作为 URL。![OpenERP 6.1 销售表格视图](../Images/d4d55d4d77024525bf842d2071a0136e.png)
*   OpenERO Trunk Opportuniyt Form view yu 可以看到关系字段 Partenr 和 Sales Personas URL：![OpenERP 中继](../Images/216b3716055bcfe92aee86e113dbcde3.png)

谢谢你

# ruby-on-rails - 500 错误页面，production.log 中没有信息

> ID：13118905
> 
> 赞同：1
> 
> 时间：2012-10-29T09:32:11.527
> 
> 标签：ruby-on-rails, ruby, rake, ruby-on-rails-3.2, activeadmin

我目前在 Linode 服务器上部署的 rails 应用程序遇到了几个问题。gemfile 如下所示：

```
source 'https://rubygems.org'

group :assets do
    gem 'sass-rails',   '~> 3.2.3'
    gem 'coffee-rails', '~> 3.2.1'
    # See https://github.com/sstephenson/execjs#readme for more supported runtimes
     # gem 'therubyracer', :platforms => :ruby
    gem 'uglifier', '>= 1.0.3'
end

gem 'rails', '3.2.8'
gem 'mysql2'
gem 'activeadmin',:git => "git@github.com:sadanmasroor/active_admin.git"
gem 'jquery-rails'
gem 'roo'

group :production do
     gem 'unicorn'
end

group :development do 
    gem 'thin'
    gem 'capistrano'
end 
```

显然，一开始 ActiveAdmin 存在一系列问题，主要是 ActiveAdmin 资产，我最终通过调试问题克服了这些问题。现在的问题是资产在开发和生产中都成功预编译（Capistrano Assets Precompile Task）但是即使在访问索引页面时我也会收到 500 错误。

奇怪的是生产日志中没有错误。它只是表明资产预编译成功。我不知道究竟是什么导致了这个问题。我一直试图弄清楚这件事已经将近三天了。从 ActiveAdmin 问题到 stackoverflow 以及所有问题，我已经尽我所能解决它，但没有结果。如果我将代码恢复到最后一个稳定的代码并且部署一切正常。

我将非常感谢任何可以为我指出解决此问题的正确方向的人。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:12:59.640

在花了将近 2 天的时间来解决这个问题后，我使用了旧版本的 ActiveAdmin 而不是最新的最新版本，一切都像一个魅力。

# c++ - 直接继承的替代方案

> ID：13118906
> 
> 赞同：2
> 
> 时间：2012-10-29T09:32:15.923
> 
> 标签：c++, inheritance, virtual-inheritance

我有两个班级**class A**和**class B**。我希望**B****类具有 A 类的**功能加上它自己的更多功能。一种非常简单的方法是从**类 A继承****类 B**。但是由于某些实现特定的原因，我不能这样做。

 **我想到了另一种解决方案，我将在其中创建另一个包含所有虚函数的**类 C。**类**A 和 B**将继承自**类 C**。**类 A**将包含虚函数的实现，**类 B**也可以定义相同的函数集，因此**类 B**将具有**类 A 的**功能。这是最佳解决方案吗？除了直接从**类 A继承****类 B**之外，还有比这更好的解决方案吗？

 *** * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-29T09:35:42.417

您要查找的内容称为[**Composition** (over Inheritance)](http://en.wikipedia.org/wiki/Composition_over_inheritance)。

> 面向对象编程中的组合优于继承（或组合重用原则）是一种技术，通过该技术，类可以通过包含实现所需功能的其他类而不是通过继承来实现多态行为和代码重用。

这意味着您可以包含 的实例，而不是`class B`继承自。这也是避免和之间紧密耦合的**良好编码习惯**。`class A``class B``class A`**`class A``class B`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:40:11.653

您可以通过创建另外两个类`PA`和`PB`where`PB`继承来使用代理类`PA`。这些代理类复制了各自的*接口*，但实际上并没有`A`实现*它们*。相反，他们只是在and的实例中调用函数。`B`*`A``B`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T09:36:48.690

您可以这样做，但是如果您创建`class C`为一个抽象基类并让 A 类和 B 类继承自它，那么您就会意识到这一点，`class A`并且`class B`除了它们从同一个抽象基类继承这一事实之外，它们将是无关的。这意味着您将无法将实例转换为`class B`to`A`等。通常，此类实现取决于用例。

例如：

你`class C`的是`Person`，`class A`是`Teacher`，`class B`是`Student`。那么学生不是老师，老师也不是学生，所以这样的实现是有效的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T09:37:24.500

> A 类将包含虚函数的实现，B 类也可以定义相同的一组函数

这样你就会有代码重复，这不是一件好事。

如果您不想使用继承，请尝试组合。

[我之前在这里](https://stackoverflow.com/questions/12972995/how-a-class-can-extend-with-two-different-classes-while-one-class-is-from-a-exte/12973079#12973079)解释了作文。*******

# objective-c - ViewController 中的 TableViewController

> ID：13118907
> 
> 赞同：1
> 
> 时间：2012-10-29T09:32:32.813
> 
> 标签：objective-c, ios, xcode, uiviewcontroller, uitableview

我有一个 UIViewController (StoreViewController)，它的 .xib 是左边的 UITableView，右边是标准的 UIView。我创建了一个名为 StoreTableController 的 UITableViewController，并希望以某种方式使其成为 StoreView.xib 中表视图的控制器。

不幸的是，我需要将 nib 文件的文件所有者保留为 StoreViewController。我在 StoreTableController 中有一个委托，它已设置为 StoreViewController（这是用于调用某些方法），在 StoreViewController 中有一个 StoreTableController 的实例。

到目前为止，我已经尝试在 StoreViewController 中保留 UITableView 的出口，然后执行以下操作：

```
[self addChildViewController:self.tableController];

[self.tableController setTableView:self.table];

[self.table setDataSource:self.tableController];
[self.table setDelegate:self.tableController]; 
```

其中 self.table 是 outlet，self.tableController 是 StoreTableController 的实例。

但是，我并不完全理解如何使用 UIViewController 包含，所以这显然是不正确的。

我也尝试过这种变化，但真的不知道该怎么做。

我已经避免在这里使用 UISplitViewController 了，因为不仅左视图比右视图大，而且我计划做很多事情，这意味着如果可能的话，这必须在单个 .xib 文件中完成。

很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:43:33.120

*首先，在您的.xib*中放置一个常规`UIView`而不是 UIScrollView 。将其与称为“tableContentView”的连接。*`IBOutlet`*

 *然后，在您的代码中创建一个`UITableViewController`（或您的自定义类，派生自`UITableViewController`）的新实例，并将其添加`UIView`到 tableContentView 中，如下所示：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    //  Add tableView
    UITableViewController *someTableViewController = [[UITableViewController alloc] init];
    someTableViewController.view.frame = self.tableContentView.bounds;
    someTableViewController.view.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
    [self.tableContentView addSubview:someTableViewController.view];        
} 
```*

# c++ - 模态 QMessageBox 的行为不像原生 Windows 对话框

> ID：13118914
> 
> 赞同：4
> 
> 时间：2012-10-29T09:33:10.747
> 
> 标签：c++, qt, modal-dialog, messagebox

我的应用程序有一个对话框，通过询问用户`QMessageBox`是否要放弃他所做的所有更改或继续编辑。我希望这个对话框成为整个应用程序的模态。

我在某处读到这是 a 的标准行为`QMessageBox`，因此我不必使用以下内容明确设置它：

```
mbox.setWindowModality(Qt::ApplicationModal); 
```

我想知道为什么它的行为与操作系统中的其他模式对话框不同（在我的例子中是 Windows 7）。一方面，它发挥应有的作用，即应用程序中的所有其他输入方法都被阻止，直到用户回答对话框。但是，如果用户单击应用程序的任何其他窗口，它不会“闪烁”*。有没有办法让 Qt 表现得像原生 Windows 对话框？

提前致谢！

* * *

**如果您不知道我所说的“闪烁”是什么意思：只需在 Windows 操作系统上打开记事本，输入一些文本并尝试关闭它。弹出一个对话框，要求保存、丢弃或继续编辑。现在单击编辑器窗口上的某处-> 对话框的边框和标题栏闪烁/闪烁几次。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T10:57:44.667

当消息框没有父级时，就会出现问题。这对我来说很好：

```
QMessageBox box(this);
box.setStandardButtons(QMessageBox::Close);
box.exec(); 
```

但这不会：

```
QMessageBox box;
box.setStandardButtons(QMessageBox::Close);
box.exec(); 
```

这是有道理的……消息框不能闪烁，除非它知道它的父级被点击了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T09:44:47.227

我想到了一个简单的解决方案，如果您只想在 Windows 上部署应用程序，您应该`#include <windows.h>`使用**MessageBoxA** API。

除此之外，这在 Windows 和 ubuntu 中对我来说非常有用

```
if (QMessageBox::question(this,"Close?","Close this dialog?",QMessageBox::Yes,QMessageBox::No) == QMessageBox::Yes)
{
    this->close();
} 
```

# virtualhost - Apache 服务器配置虚拟主机

> ID：13118923
> 
> 赞同：0
> 
> 时间：2012-10-29T09:33:48.670
> 
> 标签：virtualhost, apache

有一个简单的问题，但我不明白为什么它不起作用。

我有 apache 2.2，我想使用 2 个端口。例如

[http://site.com:8888](http://site.com:8888)

和

[http://site.com:7777](http://site.com:7777)

有httpd.conf配置

```
Listen 8888
Listen 7777

<VirtualHost *:8888>   
     DocumentRoot "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/htdocs"
</VirtualHost>

<VirtualHost *:7777>
    DocumentRoot "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/htdocs/doc"
</VirtualHost> 
```

8888 有效，但 7777 无效。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:45:36.003

为什么 'VirtualHost *:7777' 字符串以 '/doc' 结尾？你试过没有它吗？

# json - json数据的淘汰模板解析不起作用

> ID：13118924
> 
> 赞同：0
> 
> 时间：2012-10-29T09:33:49.020
> 
> 标签：json, knockout.js

请检查此[链接](http://jsfiddle.net/TribhuwanD/H2EWw/)是否无效，我不知道我的代码有什么问题。我正在尝试创建一个包含标题、描述和评论的博客应用程序，但我没有得到正确的输出。

```
<h4>Title</h4>
<label data-bind="value: title" />
<h4>Description</h4>
<label data-bind="value: description" />
<h4>Comments</h4>
<p data-bind="foreach: comments">
    <label data-bind="value: commenter" /><br>
    <label data-bind="value: comment" /><br>
</p>​

var data = {"title": "blog1",
                "description": "Description1",
                "comments": [{"commenter": "commenter1", "comment": "comment1"},
                             {"commenter": "commenter2", "comment": "comment2"},
                             {"commenter": "commenter3", "comment": "comment3"},
                             {"commenter": "commenter4", "comment": "comment4"}]};
    function Comment(data) {
        this.commenter = ko.observable(data.commenter);
        this.comment = ko.observable(data.comment);
    }
    function BlogViewModel(data) {
        var self = data;
        self.title = data.title;
        self.description = data.description;
        self.comments = ko.observableArray(ko.utils.arrayMap(data.comments, function (com) {
            return new Comment(com.commenter, com.comment);
        }));
    }
    ko.applyBindings(new BlogViewModel(data));
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:04:16.290

您的代码有多个问题，有些与 KnockOut 有关，有些与 KnockOut 无关：

与KO无关的：

*   在变量中不应该包含`BlogViewModel`参数：所以它应该是`self``this``data``var self = this;`
*   您的评论映射错误：`new Comment(com.commenter, com.comment)`应该是`new Comment(com)`

与KO相关的有：

*   `value`绑定用于元素，您有标签，`input`因此您需要使用[文本绑定](http://knockoutjs.com/documentation/text-binding.html)。例如`data-bind="text: title"`
*   KO 需要有效的 html。因为自闭合`label`标签无效，您需要将闭合标签添加到标签中，例如`<label data-bind="text: description"></label>`

这是一个包含所有修复程序的工作[JSFiddle 。](http://jsfiddle.net/nPtmk/)

# ios - 在滚动视图中释放多个视图控制器的内存

> ID：13118926
> 
> 赞同：1
> 
> 时间：2012-10-29T09:33:52.047
> 
> 标签：ios, memory, uiviewcontroller, uitableview, scrollview

我有一个应用程序在滚动视图中加载了许多视图控制器，具体取决于用户在表格视图中拥有的对象数量。因此，当我在 tableview 和滚动视图之间切换时，滚动视图中的视图控制器数量会根据用户在 tableview 中拥有的对象数量而变化。

当然，经过一些修改，我使用 Apple 的 PageControl 示例代码中的代码来构建包含许多视图控制器的滚动视图。

```
- (void)loadScrollViewWithPage:(int)page 
{
   if (page < 0) return;
   if (page >= kNumberOfPages) return;

   // replace the placeholder if necessary
   MainViewController *countdownController = [viewControllers objectAtIndex:page];
   if ((NSNull *)countdownController == [NSNull null]) 
   {

      id occasion = [eventsArray objectAtIndex:page];

      countdownController = [[MainViewController alloc] initWithPageNumber:page];
      [countdownController setOccasion:occasion];

      [viewControllers replaceObjectAtIndex:page withObject:countdownController];

      [countdownController release];

    }

    // add the controller's view to the scroll view
    if (nil == countdownController.view.superview) 
    {
      CGRect frame = scrollView.frame;
      frame.origin.x = frame.size.width * page;
      frame.origin.y = 0;
      countdownController.view.frame = frame;
      [scrollView addSubview:countdownController.view];
    }

} 
```

问题是当我在表格视图和滚动视图（根据 Instruments）之间切换时，活动视图控制器（此处为 MainViewController）的数量不断增加，即使我没有添加任何会导致内存问题的新对象。

我在滚动视图的 viewWillDisappear 中尝试了很多东西，例如：

```
- (void) viewWillDisappear:(BOOL)animated
{

    //test unloading all views
    //Remove all subviews
    [[scrollView subviews] makeObjectsPerformSelector:@selector(removeFromSuperview)];

    //[[scrollView subviews] makeObjectsPerformSelector:@selector(release)];

    //[viewControllers removeAllObjects];
    for (unsigned m = 0; m < [viewControllers count]; m++)
    {
     //[[viewControllers objectAtIndex:m] makeObjectsPerformSelector:@selector(release)];

      [viewControllers removeObjectAtIndex:m];
    }
 } 
```

但它没有用。这是该应用程序如何工作的记录 youtube.com/watch?v=5W8v_smZSog

这是滚动视图的 viewWillAppear 方法：

```
- (void)viewWillAppear:(BOOL)animated
{

    eventsArray = [[NSMutableArray alloc] init];

    kNumberOfPages = [self.dataModel occasionCount];

    //update the eventsArray from the dataModel
    //Fill in the events Array with occasions form the data model
    for (unsigned r = 0; r < kNumberOfPages; r++)
    {
        Occasion* occasion = [self.dataModel occasionAtIndex:r];
        [eventsArray insertObject:occasion atIndex:r];
    }

     // view controllers are created lazily
     // in the meantime, load the array with placeholders which will be replaced on   demand
    NSMutableArray *controllers = [[NSMutableArray alloc] init];
    for (unsigned i = 0; i < kNumberOfPages; i++)
    {
        [controllers addObject:[NSNull null]];
     }

    self.viewControllers = controllers;
    [controllers release];

    // a page is the width of the scroll view
    scrollView.pagingEnabled = YES;
    scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * kNumberOfPages,        scrollView.frame.size.height);
    scrollView.showsHorizontalScrollIndicator = NO;
    scrollView.showsVerticalScrollIndicator = NO;
    scrollView.scrollsToTop = NO;
    scrollView.delegate = self;

    pageControl.numberOfPages = kNumberOfPages;
    pageControl.currentPage = currentPage;

    [self loadScrollViewWithPage:0];
    [self loadScrollViewWithPage:1];
} 
```

更新：仪器视频录制[http://www.youtube.com/watch?v=u1Rd2clvMQE&feature=youtube_gdata_player](http://www.youtube.com/watch?v=u1Rd2clvMQE&feature=youtube_gdata_player)

以及显示负责呼叫者的屏幕截图： ![在此处输入图像描述](../Images/e8ba75335abad2282a5905af567df80f.png)

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:25:46.550

Apple 的 PageControl 示例代码已有 2 年历史，您可以将其视为已弃用，因为 iOS 5 中有一个新的容器视图控制器可以执行所有这些操作：`UIPageViewController`.

您应该真正开始使用`UIPageViewController`，然后您根本不需要那个 loadScrollViewWithPage 方法。这将是更少的代码，更容易。

查看[PhotoScroller](http://developer.apple.com/library/ios/#samplecode/PhotoScroller)示例代码。它已更新以充分利用`UIPageViewController`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T11:02:01.960

如果您不想使用，这是给您的`UIPageViewController`（阅读我的其他答案）。

示例项目设计用于固定数量的页面 ( `kNumberOfPages`)。滚动视图内容大小和视图控制器数组的大小取决于页数。示例代码在仅调用一次的 awakeFromNib 中进行了设置。

因此，为了使这种动态化，您可以在页面数量发生变化时重新创建整个 ContentController。您只需要为页数添加一个属性。

另一种选择是在页数更改时重置滚动视图和视图控制器数组。

我假设您已经为事件定义了一个属性：

```
@property(nonatomic,retain) NSArray* eventsArray; 
```

然后你可以像这样添加一个 setter 方法：

```
-(void)setEventsArray:(NSArray *)eventsArray
{
    if (eventsArray != _eventsArray) {
        [_eventsArray release];
        _eventsArray = [eventsArray retain];
        NSUInteger eventCount = [eventsArray count];
        //reset scrollview contentSize
        scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * eventCount, scrollView.frame.size.height);

        // reset content offset to zero
        scrollView.contentOffset = CGPointZero;

        //remove all subviews
        [[scrollView subviews] makeObjectsPerformSelector:@selector(removeFromSuperview)];

        pageControl.numberOfPages = eventCount;

        // reset viewcontroller array
        NSMutableArray *controllers = [[NSMutableArray alloc] init];
        for (unsigned i = 0; i < eventCount; i++)
        {
            [controllers addObject:[NSNull null]];
        }
        self.viewControllers = controllers;
        [controllers release];

        [self loadScrollViewWithPage:0];
        [self loadScrollViewWithPage:1];
    }
} 
```

当用户切换到滚动视图时，您从表视图控制器调用此方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T22:05:33.367

您似乎没有实施 Apple 的[View Controller Containment](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html#//apple_ref/doc/uid/TP40007457-CH18-SW6)实践。这将使内存管理变得更加容易和安全。

另外，希望它可以为您节省很多未来的麻烦，已经有一个开源项目可以完成您所描述的工作（实现任意数量的视图控制器的自我管理滚动视图）。

您可能想看看它：[RHHorizo​​ntalSwipe](https://github.com/heardrwt/RHHorizontalSwipe)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T14:49:28.533

包含多个 UIViewController 视图的 UIScrollView 的概念充其量听起来很粗略，这种设计听起来一点也不好。

话虽如此，一个潜在的问题可能是这一行：

```
if ((NSNull *)countdownController == [NSNull null]) 
```

使用这样的方法会更好：

```
if (!countdownController || [countdownController isKindOfClass:[NSNull class]]) 
```

此外，您应该调用`[super viewWillDisappear:animated]`您的`viewWillDisappear`方法。

# sql - 来自另一个表的 SQL 新属性连接

> ID：13118928
> 
> 赞同：0
> 
> 时间：2012-10-29T09:34:03.403
> 
> 标签：sql

我有一个这样的 SQL 查询

```
select M.mtitel as Attribute from aRel_adr_Merk R 
inner join vMerkmale M on M.mid=R.mid   
where adrid in(" + listdatenids + ")", utilDB.conn() 
```

我有另一个名为 aAdress 的表。我想从aAdressen 绑定adrID。但是，它们没有共同的属性。我也只想显示adrID。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:40:14.357

你可以试试这个

```
 select adrID, M.mtitel as Attribute from aAdress,aRel_adr_Merk R 
 inner join vMerkmale M on M.mid=R.mid   
 where adrid in(" + listdatenids + ")", utilDB.conn() 
```

# java - 关闭 TCP 线程服务器

> ID：13118930
> 
> 赞同：3
> 
> 时间：2012-10-29T09:34:08.643
> 
> 标签：java, multithreading, tcp, interrupt

我编写了一个小 TCP 线程服务器，它为每个 server.accept() 创建一个新线程。几乎一切都很好，但我在每次中断时杀死所有线程时遇到问题。（我使用 ServiceExecutor 来管理线程。因此我使用 shutdownNow 方法来访问中断方法） Worker 实例使用 BufferedReader 并且它是 readline 方法来接收和计算输入。AFAIK **readline 阻塞**并且*不会对中断做出反应*，但是如何停止呢？

```
while(!isInterrupted()){

   try {
          clientSocket = this.serverSocket.accept();
        } catch(IOException e){
            break;
        }

        this.threadPool.execute(new ThreadWorker(clientSocket));
    }

    threadPool.shutdownNow();

    try{
        serverSocket.close();
    }catch(IOException e){
        //todo
    } 
```

我试图关闭 ServerSocket 以终止输入/输出流，但它没有按预期工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T10:26:15.907

几个选择：

1) 如果您要关闭整个应用程序，并且没有什么重要的要明确关闭，请调用 System.Exit(0)。健康警告 - 这样做会导致一些开发人员中风，并无休止地发布关于“优雅清理”的帖子。

2) 在 accept() 线程中保留所有客户端套接字的线程安全列表。将此列表的引用作为传递给客户端<>服务器线程的客户端上下文的一部分传递。在 accept() 线程中将新连接添加到列表中。当客户端线程检测到断开连接时，从列表中删除其条目。当您想关闭所有客户端时，迭代列表并关闭客户端套接字 - 这将导致 readline 方法在客户端线程中提前返回并出现错误。

# iphone - 存折的权利文件

> ID：13118932
> 
> 赞同：2
> 
> 时间：2012-10-29T09:34:14.383
> 
> 标签：iphone, ios, ios6, entitlements, passbook

我试图在我的应用程序中列出已安装的通行证。我可以很好地添加通行证，但尝试列出我没有在`[passLig passes];`设备上返回的通行证。奇怪的是我确实在模拟器中得到了它们..

我认为这与权利文件有关。如果我的 passtypeid 是“pass.myapp.boardingpass”，权利文件应该是什么样子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:06:09.307

这通过在我们的 APPID 上启用传递后创建一个新的配置文件来解决。以前用的旧的不行，只好用新的来测试。在安装它并重新启动 xcode 之后，我们能够让这部分工作。

![在此处输入图像描述](../Images/0b5f0834327795d2de8f0cfe907dcefd.png)

# ruby-on-rails - rails 验证 - 将值传递给选项

> ID：13118934
> 
> 赞同：0
> 
> 时间：2012-10-29T09:34:21.663
> 
> 标签：ruby-on-rails, validation, option

我的最后一个问题[https://stackoverflow.com/questions/13112897/rails-begginer-validations](https://stackoverflow.com/questions/13112897/rails-begginer-validations)由于过于本地化而被关闭，所以我会尝试更通用。

是否可以将当前记录（或会话）中的值传递给验证选项？

这有效：

```
validates :name, :length => { :minimum => 2 } 
```

但是，如果我的模型中有字段“minlength”，并且想要根据“minlength”字段中的值验证“name”的长度 - 我该怎么做？

这些例子不起作用。

```
validates :name, :length => { :minimum => self.minlength }
validates :name, :length => { :minimum => :minlength }
validates :name, :length => { :minimum => session_variable_with_minlength_value } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:53:13.900

您可以为此通过自定义验证：

**例如**

```
validate:name_length

def name_length
  if self.name.size < self.minlength.to_i 
    errors[:base] << "whatever error message you want to display here"
  end
end 
```

# maven - 无法使用我给它的前缀执行 maven shell 脚本

> ID：13118936
> 
> 赞同：1
> 
> 时间：2012-10-29T09:34:28.637
> 
> 标签：maven

我正在尝试为我的项目制作一个部署后脚本，它将测试有效性。

现在，脚本已经制作完成，我正试图让它在所有子模块之后运行。我能想到的最简单的方法就是使用特定前缀调用 exec-maven-plugin。不过，我需要一个新前缀，因为我已经在其中一个子模块上运行了不同的 exec。

所以，我想把它称为： validate:exec

xml 的相关部分如下所示：

```
<plugin>
                                    <groupId>org.codehaus.mojo</groupId>
                                    <artifactId>exec-maven-plugin</artifactId>
                                    <version>1.2.1</version>
                                    <executions>
                                            <execution>
                                                    <goals>
                                                            <goal>exec</goal>
                                                    </goals>
                                            </execution>
                                    </executions>
                                    <configuration>
                                            <executable>validate.py</executable>
                                            <goalPrefix>validate</goalPrefix>
                                            <arguments>
                                                    <argument>${deploy.host.fe</argument>
                                                    <argument>${deploy.port.fe}/argument>
                                            </arguments>
                                    </configuration>
                            </plugin> 
```

我把它放在我的插件管理或插件标签中（拼写正确），都没有帮助。当我尝试运行时：

mvn 验证：执行

我得到：在当前项目和插件组中找不到前缀“验证”的插件......

提前感谢您的帮助

# javascript - 在 JavaScript (DOM) 中处理 XML 命名空间

> ID：13118938
> 
> 赞同：2
> 
> 时间：2012-10-29T09:34:30.783
> 
> 标签：javascript, dom, xml-namespaces

我正在使用 DOM 构建一棵树（用于 SOAP）。我想在某个节点上阅读以下信息：

*   是否已经将 XML 命名空间“导入”到文档中（使用`xmlns:blah="http://...`） - 知道该`http://...`部分。
*   使用了什么绰号（在上面的示例中`blah`）。

**除了手册之外**还有什么方法：遍历祖先链并迭代属性节点，从`xmlns:`检查值开始找到任何方法，如果匹配则返回属性名称的其余部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T10:00:57.173

除了常用的方法，例如`document.getElementsByTagName`，DOM 提供了它们的命名空间版本：`document.getElementsByTagNameNS`

此类方法将命名空间 URL 作为其第一个参数。

```
document.getElementsByTagNameNS('http://...', 'abc'); 
```

顺便说一句，使用常规方法，元素可能会以......</p>

```
document.getElementsByTagName('xmlns\\:abc'); 
```

即使没有“导入”任何命名空间，这对我来说也适用于 HTML DOM。

**更新：**

OP正在寻找的方法是`document.lookupPrefix('http://...')`

# java - Play 2 Java sbt 不运行所有测试类

> ID：13118942
> 
> 赞同：0
> 
> 时间：2012-10-29T09:34:46.650
> 
> 标签：java, junit, playframework-2.0, sbt

我的 Play 2.0.4 项目有两个 JUnit 测试类。它们确实被编译了，但实际上只有其中一个是通过“播放测试”运行的。执行哪个类似乎是随机的。

输出中没有错误，只是没有执行其他类的测试：

```
[info] Total for test api.ApiTest
[info] Finished in 0.611 seconds
[info] 0 tests, 0 failures, 0 errors 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:53:41.010

事实证明，我在测试设置中犯了一个愚蠢的错误。我将把问题和答案留在这里以供将来参考。不幸的是，日志没有显示启动或停止的任何问题，所以我逐行调试它。

曾是：

```
FakeApplication app = createCustomFakeApplication();
Helpers.start(Helpers.testServer(3333, app));
...
Helpers.stop(app); 
```

固定的：

```
TestServer app = Helpers.testServer(3333, createCustomFakeApplication());
Helpers.start(app);
...
Helpers.stop(app); 
```

# javascript - 从 javascript - 本地网站获取外部 JSON 文件

> ID：13118944
> 
> 赞同：3
> 
> 时间：2012-10-29T09:34:50.700
> 
> 标签：javascript, json

我想知道是否有办法从 javascript 文件中获取多个外部 JSON 文件。

我的网站在本地机器上运行。我在这台机器上有几个 JSON 文件：

文件 1.json ：

```
{ "info1": "foo1", "info2": "foo2", "info3": "foo3", "info4": "foo4"} 
```

文件 2.json ：

```
{ "info5": "foo5", "info6": "foo6", "info7": "foo7", "info8": "foo8"} 
```

ETC..

我想使用 javascript 在我的网站中访问这些文件以进行研究。

你知道这样做的方法吗？

谢谢你的帮助

约翰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T09:38:26.557

您可以为此使用 AJAX：

```
function callback_function(object)
{
    // `object' contains the parsed JSON object
}

var xhr = new XMLHttpRequest();
xhr.open("GET", "/js/file1.json", true);
xhr.onreadystatechange = function() {
    if (xhr.readyState == 4) {
        callback_function(JSON.parse(xhr.responseText));
    }
}
xhr.send(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:39:01.090

您应该从 javascript 向您的服务器发送请求并检索文件的输出。使用 jQuery，您可以执行以下操作：

```
jQuery.getJSON(url, function(data){
   // do something
}); 
```

# visual-studio-2010 - 错误 MSB6006：“cmd.exe”以代码 1 退出

> ID：13118947
> 
> 赞同：34
> 
> 时间：2012-10-29T09:35:18.850
> 
> 标签：visual-studio-2010, build, compiler-errors

当我尝试使用 2010 构建我的 VC++ 代码时，我收到了错误消息

`> C:\Program Files\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets(151,5): error MSB6006: "cmd.exe" exited with code 1.`

请告诉如何克服这个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2018-01-12T12:52:57.453

通过以下方式之一导航`Error List Tab`到 Visual Studios`Output`文件夹：

*   `Output`在底部的标准 VS 视图中选择选项卡
*   单击菜单栏`View > Output`或`Ctrl+Alt+O`

`Show output from <build>`应该选择哪里。

您可以通过分析输出日志了解更多信息。

* * *

就我而言，这是 Cmake 步骤中的错误，见下文。如其他答案中所述，它可以在任何构建步骤中。

```
> -- Build Type is debug 
> CMake Error in CMakeLists.txt:
>     A logical block opening on the line
>     <path_to_file:line_number>    
>     is not closed. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-05T04:58:51.230

`error MSB6006: "cmd.exe"`退出代码`-Solved`

我也面临这个问题。在我的情况下，这是由于`output exe`已经运行。我解决了我的问题，只需在构建之前关闭应用程序实例。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-23T06:53:04.073

我今天有同样的问题，当我将一些 VC6 项目升级到 VC2012 时。

就我而言，这是因为 Custom Built Steps 中的某些操作失败了。在项目属性中，转到自定义构建步骤，您可以在命令行编辑框中看到一些内容。打开 Windows 提示符并将命令粘贴到其中。运行，检查是否有问题并修复它。

如果项目属性自定义构建步骤中没有命令行，也许您应该检查项目的每个文件的属性。

如果命令行有一些宏，请将其替换为实际值。

或者您可以在 VS 输出窗口中回显命令：

*   `cd %(somedir)%`
*   `echo %(somedir)%`

这样你就不会错过了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-03T10:48:08.917

我解决了这个问题。双击此错误会导致行为。

1.  打开项目的 .vcxproj 文件
2.  搜索标签
3.  仔细检查这个标签里面发生了什么，路径是否正确？调试和发布之间的区别，并修复它
4.  清理并重建

对于我的情况。调试和发布模式的错过匹配会杀死我的下午。

```
 <Command Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">copy ..\vc2005\%(Filename)%(Extension) ..\..\cvd\
</Command>
      <Command Condition="'$(Configuration)|$(Platform)'=='Debug|x64'">copy ..\vc2005\%(Filename)%(Extension) ..\..\cvd\
</Command>
      <Outputs Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">..\..\cvd\%(Filename)%(Extension);%(Outputs)</Outputs>
      <Outputs Condition="'$(Configuration)|$(Platform)'=='Debug|x64'">..\..\cvd\%(Filename)%(Extension);%(Outputs)</Outputs>
      <Command Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">copy ..\vc2005\%(Filename)%(Extension) ..\..\cvd\
</Command>
      <Command Condition="'$(Configuration)|$(Platform)'=='Release|x64'">copy %(Filename)%(Extension) ..\..\cvd\
</Command>
      <Outputs Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">..\..\cvd\%(Filename)%(Extension);%(Outputs)</Outputs>
      <Outputs Condition="'$(Configuration)|$(Platform)'=='Release|x64'">..\..\cvd\%(Filename)%(Extension);%(Outputs)</Outputs>
    </CustomBuild> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-01-08T20:09:50.720

实际上只需删除构建（清理它），然后重新启动编译器，再次构建它，问题就解决了。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-09-25T07:26:34.923

我也面临类似的问题。

我的源路径有一个带有“空格”的目录（D:/source 2012）。我通过删除空格（D:/source2012）解决了这个问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-04-03T14:52:43.437

为了未来的读者。我的问题是我指定了一个不兼容的 openssl 库来通过 CMAKE 构建我的程序。项目已生成，但构建开始失败并出现此错误，没有任何其他有用信息或错误。详细的 cmake/编译日志也没有帮助。

**我的经验教训是交叉检查不兼容性，以防您的程序依赖于任何其他第三方库。**

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-11T00:19:55.960

简单而更好的解决方案：%WINDIR%\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe MyProject.sln 我制作了一个像 **%WINDIR%\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe D这样的 bat 文件:\GESTION-SOMECOPA\GestionCommercial\GestionCommercial.sln 暂停**

然后我可以看到所有错误并纠正它们。因为当您更改文件夹名称（如上所示没有空格）时，您将遇到另一个问题。Visual Studio 2015 在此之后工作正常。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-22T10:35:40.037

另一种解决方案可能是，您从项目中删除了一个文件，只需在文件系统中删除它，而不是在项目中删除它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-02-28T12:02:28.923

当使用一个版本控制系统时，所有文件在签出之前都是只读的（如 Perforce），问题可能是您不小心将 VS 文件之一（例如过滤器）提交到此版本控制系统，因此文件在构建期间不能被覆盖。

只需转到您的工作目录并检查与 VS 解决方案相关的文件和临时创建的文件（例如 QT 中的所有 moc_ 和 ui_ 前缀文件）都不是只读的。

# java - 用 poi 在 excel 文件中写入

> ID：13118952
> 
> 赞同：0
> 
> 时间：2012-10-29T09:35:42.020
> 
> 标签：java, apache-poi

我从一个 excel 文件中获取电话号码并使用以下代码写入另一个 excel 文件

```
cellph = row.getCell(3);
Object phone = cellph.getNumericCellValue();
String strphone = phone.toString();
cellfour.setCellType(cellfour.CELL_TYPE_STRING);
cellfour.setCellValue("0"+strphone); 
```

它将电话号码写为 09.8546586。我想把它写成 098546586（没有精度值）。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:25:16.823

你的问题不在于写入。您的问题在于*read*，这就是给您浮点数的原因

从您的代码和描述来看，您的电话号码似乎以数字单元格的形式存储在 Excel 中，并应用了整数格式。这意味着当您检索单元格时，您将获得一个`double`数字和一个单元格格式，该格式会告诉您如何像 Excel 那样对其进行格式化。

我认为您可能想要做的更像是：

```
DataFormatter formatter = new DataFormatter();

cellph = row.getCell(3);
String strphone = "(none available)";

if (cellph.getCellType() == Cell.CELL_TYPE_NUMERIC) {
   // Number with a format
   strphone = "0" + formatter.formatCellValue(cellph);
}
if (cellph.getCellType() == Cell.CELL_TYPE_STRING) {
   // String, eg they typed ' before the number
   strphone = "0" + cellph.getStringCellValue();
}
// For all other types, we'll show the none available message

cellfour.setCellType(cellfour.CELL_TYPE_STRING);
cellfour.setCellValue(strphone); 
```

# opengl - 在没有 glNormal 的片段着色器中计算法线

> ID：13118953
> 
> 赞同：4
> 
> 时间：2012-10-29T09:35:42.537
> 
> 标签：opengl, shader

我想编写一个片段着色器来用闪电渲染一个对象，但不使用 gl_Normal; 所以我必须自己计算法线。

我想我可以使用函数 dFdx 和 dFdy 来找到两个切向量，然后用它们的向量积得到法线。

但我不知道将哪个参数发送给这些函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T19:18:32.700

> 我想我可以使用函数 dFdx 和 dFdy 来找到两个切向量，然后用它们的向量积得到法线。

如果你这样做，你只会得到面部法线。如果你正在做多面渲染，那很好。并且“发送给这些函数的参数”将是片段的位置，无论您在哪个空间中进行照明。所以显然您的顶点着色器需要计算它并将其传递给片段着色器。

对于本文的其余部分，我将假设您*没有*进行多面渲染。您希望平滑法线近似平滑表面。

这种法线的全部意义在于它们代表了多边形网格所*逼近的**实际*表面。因此，如果您有一个球体，则无论您有多少个顶点，每个顶点位置的法线都应始终直接指向远离球体的中心。

 *你不能把这样的法线魔法化为存在；您必须根据实际表面或通过启发式计算它们。启发式方法需要查看当前三角形周围的三角形。并且片段着色器无权访问该信息。

每个人都使用顶点法线；这是标准做法。甚至还有特殊的顶点属性格式来最小化这种法线的大小（`GL_INT_2_10_10_10_REV`最突出）。所以只要做对。*

# binary - 为什么在确定N位可以表示的最大个数时需要减1？

> ID：13118957
> 
> 赞同：0
> 
> 时间：2012-10-29T09:35:57.700
> 
> 标签：binary

因此，在二进制中，要找到给定 N 位数可以表示的最大数，您可以使用：

> 2^N - 1

但是为什么是-1。为了尝试理解它，我创建了一个 3 位系统并尝试了一些示例：

2^1 = (2) - 1

*   0 0 1 --> 1

2^2 = (4) - 1

*   0 1 0 --> 2
*   0 1 1 --> 3

2^3 = (8) - 1

*   1 0 0 --> 4
*   1 0 1 --> 5
*   1 1 0 --> 6
*   1 1 1 --> 7

所以一切都按计划进行，但为什么是-1。这可能听起来像一个愚蠢的问题，但正如你在上面看到的，我已经做了相当多的研究。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:44:44.620

因为你可以表示 0，它总是在所有排列中占据一个位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T09:45:20.407

显示的研究应该已经揭示了答案，但你忘记了零。

三位能够表示`2^3`不同的*值*。*最小值*为零，所以*最大值*一定*是*`2^3-1`。

请注意，如果您使用不同的系统（例如有符号二进制），*最小值*和*最大值*可能会发生变化，但值的*计数*不会发生变化。

# javascript - 从其他页面获取一些值

> ID：13118958
> 
> 赞同：1
> 
> 时间：2012-10-29T09:35:59.010
> 
> 标签：javascript, dart

我完全是飞镖的初学者，

我想从外国页面中获取一些值并在我的页面上显示它们。

国外页面

```
<div id="value1">
   35
</div>
<div id="value2">
   45
</div> 
```

飞镖真的有可能吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:39:10.583

在客户端，Dart 被编译成 javascript，因此使用 javascript（包括 jQuery 等库）可以实现的任何事情都可以通过 Dart 实现。

你想做什么都是可能的。

首先，您需要获取远程页面。如果它在同一个域上，您可以使用 AJAX 从客户端获取它。如果它在另一台服务器上，您将面临同源策略问题，并且应该设置代理。然后，您可以从代理下载页面，这可以使用多种不同的语言实现，包括 php 或 Dart 本身（服务器端）。

一旦你在本地加载了内容，使用 AJAX（也可能是一个代理）然后它是一个简单的 DOM 遍历问题，获取你想要的值，并将它们注入你的本地页面。

# c# - 使用泛型集合为 C# 项目生成 Doxygen

> ID：13118960
> 
> 赞同：14
> 
> 时间：2012-10-29T09:36:12.037
> 
> 标签：c#, list, generics, doxygen

我正在使用 Doxygen 和 GraphViz Dot 为 C# 项目生成一些协作图。`List<>`问题是Doxygen 无法识别通用集合（如）。有人对此有解决方案吗？

我发现[这个评论](http://comments.gmane.org/gmane.text.doxygen.general/5830)似乎不太有希望，但想知道是否有任何解决方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T20:17:31.933

根据[Doxygen 的变更日志](http://www.doxygen.nl/manual/changelog.html#log_1_8_1_1)，C# 中的泛型在 1.8.1.1 版（10 月 6 日发布）之前没有被索引。我没有看到相应的错误，尽管查看以前的版本，它们现在已经被支持了一段时间。

正如我上面的评论所述，我没有看到使用当前版本（1.8.2）的任何问题。如果那是您正在使用的版本，请特别说明什么不起作用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-30T05:30:42.743

泛型和一些第三方控件存在问题。我有同样的问题。如果不支持 List<>，您可以将 List 转换为相应的对象数组。Array 将支持任何控件和产品。

只看例子。

需要将 DataTreeNodeCollection (List) SubNodes 转换为 DataTreeNode[]

```
 DataTreeNode[] subNodesArray = new DataTreeNode[SubNodes.size()];

 foreach (DataTreeNode node in SubNodes)
                {
                    subNodesArray[count] = node;
                    count++;
                } 
```

在这里，我将 List 转换为 Array。

# php - Ajax图片上传和显示

> ID：13118962
> 
> 赞同：0
> 
> 时间：2012-10-29T09:36:12.860
> 
> 标签：php, ajax, file-upload, image-uploading

我正在使用 php mysql 并使用 ajax(jquery) 上传图像。图像已成功上传，但没有立即显示，重新加载它正确显示的页面。

当我使用此代码时，上传和显示正在工作..

```
<?php
// Set the upload folder path
$target_path = "uploads/";
// Set the new path with the file name
$target_path = $target_path . basename( $_FILES['myfile']['name']); 

// Move the file to the upload folder
if(move_uploaded_file($_FILES['myfile']['tmp_name'], $target_path)) {
// print the new image path in the page, and this will recevie the javascripts 'response' variable
echo $target_path;
} else{
// Set default the image path if any error in upload.
echo "default.jpg";
}

?> 
```

但是，我不想使用正在上传的图像的原始名称将图像上传到上传目录，而是想将上传时的名称更改为 image01.jpg，如果存在具有此名称的图像，那么我希望它被替换为新的一个。为此，我使用此代码...

```
<?php
// Set the upload folder path
$place_file="";
$target_path = "1/";
$target_path1 = "1/image01.jpg";
// Set the new path with the file name
$target_path = $target_path ."image01.jpg"; 
// Move the file to the upload folder
$place_file=move_uploaded_file($_FILES['myfile']['tmp_name'], $target_path1);
echo $target_path;
?> 
```

图像上传正常，但没有立即显示，而是在页面刷新时显示。它仅显示以前的图像，我认为替换图像会导致问题。

我是文件上传编码的新手，这就是为什么有问题。

这个js代码上传图片

```
 new AjaxUpload(button,{
    action: 'upload.php', 
    name: 'myfile',
    onSubmit : function(file, ext){
        spinner.css('display', 'block');
        // you can disable upload button
        this.disable();
        },
    onComplete: function(file, response){
        button.stop(false,true).fadeOut(200);
        spinner.css('display', 'none');
        $('#profile_img').attr('src', response);
        // enable upload button
        this.enable();
    }
}); 
```

上面的php代码是upload.php

# node.js - Node js 中的 LDAP 身份验证支持

> ID：13118963
> 
> 赞同：3
> 
> 时间：2012-10-29T09:36:18.657
> 
> 标签：node.js, ldapconnection

我已经安装了 ldapauth`npm install ldapauth`并安装了 ldapjs。我尝试使用以下代码：

```
 var sys   = require('sys'),
ldapauth  = require('./ldapauth');

var scheme    = 'ldap',
    ldap_host = 'abc.com',
    ldap_port = 369,
    username  = 'xxx',
    password  = 'xxx'
    base      = "DC=abc,DC=xyz,DC=com";
    filter    = "(&(objectclass=user)(sAMAccountName= 3025141))";

console.log("Authentication Check");

ldapauth.authenticate(scheme, ldap_host, ldap_port, username, password,
  function(err, result) {
      if (err) {
          console.log(err);
      } else {  
          console.log('Authenticated ! ! ! ! ! : ' + result);
      }
  });

//ldap authentication Search
ldapauth.search(ldap_host, ldap_port, username, password, base, filter,
  function(err, result) {
      if (err) {
        sys.puts(err);
      } else {
        sys.puts('Search: ' + JSON.stringify(result));
      }
  }); 
```

我在mac中尝试过，但`Segmentation fault: 11`出现错误。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T19:41:54.243

```
var ldap = require('ldapjs');
var client = ldap.createClient({
  url: 'ldap://127.0.0.1:1389'
});

client.bind('cn=root', 'secret', function(err) {
  if(err) {
    console.log(err);
  } else {
    console.log('authenticated');
  }
});

client.unbind(function(err) {
}); 
```

我使用 ldapjs 客户端进行身份验证。这应该不是问题。
[这是 ldapjs 客户端文档的链接](http://ldapjs.org/client.html)

# nsdateformatter - 想要将带后缀的 NSDateFormatter 转换为 NSdate

> ID：13118967
> 
> 赞同：1
> 
> 时间：2012-10-29T09:36:50.437
> 
> 标签：nsdateformatter

我有一个日期为 2012 年 6 月 1 日或 2011 年 9 月 22 日或 2011 年 7 月 3 日或 2011 年 10 月 14 日的字符串。我需要将此带有 nd、st、th 和 rd 后缀的日期转换为特定日期，即 dd-mm-yyyy。谁能指导我这个。这种日期的日期格式化程序是什么（2011 年 7 月 22 日）。任何帮助都会很棒。

# api - 从 RallyDev 检索附件

> ID：13118969
> 
> 赞同：4
> 
> 时间：2012-10-29T09:36:56.317
> 
> 标签：api, rally

有没有办法从 Rally 中检索所有附件？Rally 中的所有导出选项似乎只导出数据，而不是附件。我也希望能够导出附件。

API 是否支持检索附件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:02:15.037

您可以通过 Web 服务 api 获取附件。您需要对要循环的工件发出查询，然后检查该工件上的 Attachments 字段 - 它应该是附件工件的集合。这应该记录在 Web 服务 api 文档中（Rally 中的帮助 > 右上角的 Web 服务 API）例如 - 查看缺陷，然后查找附件字段和附件类型以获取更多信息。

希望有帮助。

# xml - XPath 2.0 - 选择 2 个元素之间的所有节点

> ID：13118972
> 
> 赞同：3
> 
> 时间：2012-10-29T09:37:00.983
> 
> 标签：xml, xslt, xpath, xslt-2.0, xpath-2.0

我有以下 XML 文件：

```
<document>
  <article>
    <head>headline 1</head>
    <text>
      <paragraph>foo</paragraph>
      <paragraph>bar</paragraph>
    </text>
    <date>
      <day>10</day>
      <month>05</month>
      <year>2002</year>
    </date>
    <source>some text</source>
    <portal>ABC</portal>
    <ID number="1"/>
  </article>
  <article>
    <head>headline 2</head>
    <text>
      <paragraph>lorem ipsum</paragraph>
    </text>
    <date>
      <day>10</day>
      <month>05</month>
      <year>2002</year>
    </date>
    <source>another source</source>
    <portal>DEF</portal>
    <ID number="2"/>
  </article>
</document> 
```

现在我想返回出现在头节点之后和门户节点之前的每篇文章的所有节点。因此，我正在研究 XPath 2 节点比较（<< 和 >> 运算符）。

到目前为止，我所拥有的是以下内容，它返回空：

```
<xsl:template match="/">
  <xsl:copy-of select="/document/article/head/following-sibling::*[. << ./article/portal]"/>
</xsl:template> 
```

任何想法如何解决该 xpath 查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:46:31.370

一个简单的 XPath 1.0 表达式应该适用于这种情况：

```
/document/article/head/following-sibling::*[following-sibling::portal] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T12:09:31.363

**使用**：

```
/*/*/node()[. >> ../head and ../portal >> .] 
```

**这是一个完整的转换**：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
     <xsl:sequence select="/*/*/node()[. >> ../head and ../portal >> .]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<document>
    <article>
        <head>headline 1</head>
        <text>
            <paragraph>foo</paragraph>
            <paragraph>bar</paragraph>
        </text>
        <date>
            <day>10</day>
            <month>05</month>
            <year>2002</year>
        </date>
        <source>some text</source>
        <portal>ABC</portal>
        <ID number="1"/>
    </article>
    <article>
        <head>headline 2</head>
        <text>
            <paragraph>lorem ipsum</paragraph>
        </text>
        <date>
            <day>10</day>
            <month>05</month>
            <year>2002</year>
        </date>
        <source>another source</source>
        <portal>DEF</portal>
        <ID number="2"/>
    </article>
</document> 
```

**产生了想要的正确结果**：

```
 <text>
        <paragraph>foo</paragraph>
        <paragraph>bar</paragraph>
    </text>
    <date>
        <day>10</day>
        <month>05</month>
        <year>2002</year>
    </date>
    <source>some text</source>

    <text>
        <paragraph>lorem ipsum</paragraph>
    </text>
    <date>
        <day>10</day>
        <month>05</month>
        <year>2002</year>
    </date>
    <source>another source</source> 
```

**更新**：

在评论中，Roman Pekar 指定了一个新要求：他想要获取介于*第一* `head`篇和`portal`每篇文章之间的所有此类节点。

**当然，这很简单**——只需将上面的表达式更改为：

```
/*/*/node()[. >> ../head[1] and ../portal[1] >> .] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T12:22:56.057

我经常在 SQL Server 中使用 xml，所以当我看到 Dimitre Novatchev 的回答时，我已经在 SSMS 中尝试过。它不起作用，因为 SQL Server 中的 XQuery 实现是[一种静态类型语言并进行静态类型检查](http://msdn.microsoft.com/en-us/library/ms190938.aspx)，所以我试图找到这个表达式的 SQL Server 形式的工作。这里是：

```
/document/article/*[. >> ../head[1] and . << ../portal[1]] 
```

完整的查询将是

```
declare @Data xml

select @Data = '
<document>
  <article>
    <head>headline 1</head>
    <text>
      <paragraph>foo</paragraph>
      <paragraph>bar</paragraph>
    </text>
    <date>
      <day>10</day>
      <month>05</month>
      <year>2002</year>
    </date>
    <source>some text</source>
    <portal>ABC</portal>
    <ID number="1"/>
  </article>
  <article>
    <head>headline 2</head>
    <text>
      <paragraph>lorem ipsum</paragraph>
    </text>
    <date>
      <day>10</day>
      <month>05</month>
      <year>2002</year>
    </date>
    <source>another source</source>
    <portal>DEF</portal>
    <ID number="2"/>
  </article>
</document>
'

select @Data.query('/document/article/*[. >> ../head[1] and . << ../portal[1]]') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T11:29:59.510

我认为您有一个很好的建议，根本不使用`<<`，但如果您想使用它，我认为可以`<xsl:copy-of select="/document/article/head/following-sibling::*[. << parent::article/portal]"/>`解决您的尝试。

# svn - SVN 配置

> ID：13118974
> 
> 赞同：0
> 
> 时间：2012-10-29T09:37:02.747
> 
> 标签：svn

我已经在本地机器上安装了 SVN 并在那里创建了一个存储库。现在我正在尝试从同一网络中的其他机器访问该存储库。我尝试了每种类型的 URL 来结帐，但一切都失败了。具有存储库的机器是 linux 机器，另一台是 windows。有没有可以一步一步诊断的链接？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:58:28.777

如果您没有使用 repo 在主机上启动*任何 Subversion 服务器*，则只能使用 file:/// 协议并在共享 SMB 驱动器上拥有存储库。

如果 repo-drive 是共享的，并且您可以从另一端在 Explorer 中看到 repository-folder，则不会询问 usename-password（file:/// 是匿名访问）

如果你得到 auth-requests，你必须在访问存储库之前配置用户和访问权限，在服务器端

**注意：**如果您要显示**真实的命令和输出**，则调试起来会更容易-我们无法读心

# php - XML 到数组，xml2ary 错误

> ID：13118975
> 
> 赞同：0
> 
> 时间：2012-10-29T09:37:06.100
> 
> 标签：php, xml

我正在使用此函数 [http://mysrc.blogspot.it/2007/02/php-xml-to-array-and-backwards.html](http://mysrc.blogspot.it/2007/02/php-xml-to-array-and-backwards.html) 将 XML 解析为数组。非常棒的功能。但奇怪的是，如果我有以下 2 个 xml 文件：

```
<response>
<company prop1=1>
</company>
<company prop1=2>
</company>
</response>

<response>
<company prop1=1>
</company>
</response> 
```

我得到了不同的结果。对于第一种情况，我得到了一个包含两个元素的数组：

```
Array(
  int(0) => _a => Array(...)
  int(1) => _a => Array(...)
) 
```

但对于第二种情况，我得到了

```
 Array (
    _a => Array(...)
  ) 
```

这不是第一种情况下索引的数组。这使解析变得复杂。有人知道如何修改代码吗？问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:37:11.850

假设你做了类似的事情

```
$result = xml2ary($xml); 
```

在调用 xml2ary() 之后尝试添加这一行：

```
$result = is_int(reset(array_keys($result))) ? $result : array($result); 
```

这将检查结果数组的第一个键是否为整数（这意味着该`xml2ary`函数返回了多个结果。如果不是，它会自动将变量包装`$result`在 array() 中，这样即使只有一个 XML 也有相同的响应格式项目被解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:39:15.103

尝试使用 PHP`simplexml`类：

[http://php.net/manual/en/book.simplexml.php](http://php.net/manual/en/book.simplexml.php)

这是用 PHP 解析 XML 的最佳方式

# iphone - popViewController 和 pushController 的问题

> ID：13118976
> 
> 赞同：0
> 
> 时间：2012-10-29T09:37:10.957
> 
> 标签：iphone, ios5, pushviewcontroller, popviewcontroller

我在使用 pop/pushViewControllers 重定向 viewControllers 时遇到问题。我有三个视图控制器，如下图 -

![控制流](../Images/6d71742003e41a7cf172edc5de5fa5e8.png)

在我的第三个视图中，我有一些`ToggleButton`基于`toggleButton`第二个视图中的数据会改变。之后，在第三个视图上更改某些内容并`Done`在我的第三个视图中按下按钮，我刚刚使用`pushViewController`And 启动了我的第二个 ViewController，更改成功发生。

但是，问题是，当我尝试按下第二个视图页面上的后退按钮时，它再次将我重定向到第三个 viewController（因为 pushViewController）

我尝试使用`popViewController`但是，它给出异常开始我的第二个视图。

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Tried to pop to a view controller that doesn't exist. 
```

我用过下面的代码 -

```
SecondViewController *second = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
second.array = resultArray;
second.indexValue = ind;
[self.navigationController popToViewController:second animated:YES]; 
```

我该如何解决这个问题？任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:40:55.010

从 3rd viewcontroller 你只需要调用这个方法来弹出到 2nd viewcontroller ：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

编辑 ：

要通知第二个 vc 进行数据更改，您可以使用委托。按照这个：

在 ThirdViewController.h

```
@protocol DataChangeProtocol;
@interface ThirdViewController : UIViewController

@property(nonatomic,assign) id<DataChangeProtocol> delegate;

@end

@protocol DataChangeProtocol

- (void)thirdViewcontroller:(ThirdViewController*)vc dataChangedto:(NSDictionary *)changedData;

@end 
```

在从 secondVC 推送 thridVC 之前，将 secondVC 指定为 thirdVC 的代表：

```
ThirdViewController *thirdVC = [[ThirdViewController alloc]init..];
thirdVC.delegate = self;
[self.navigationController pushViewController:thirdVC animated:YES]; 
```

并在 SecondViewController.m

```
- (void)thirdViewcontroller:(ThirdViewController*)vc dataChangedto:(NSDictionary *)changedData {
 // Change your values in the UI using the passed value from changedData.

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T09:58:42.257

```
 //it used in first class
     SecondViewController *second = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
second.array = resultArray;
second.indexValue = ind;
    [self.navigationController pushViewController:second animated:YES];
    //it move to second class

    //it used in second class
    [self.navigationController popViewControllerAnimated:YES];
    //it move to firsr class 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T09:42:19.503

如果你想去你当前的前一个视图控制器，那么你必须这样做：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T09:43:14.663

您创建我们的视图控制器：

```
SecondViewController *second = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil]; 
```

然后你想从你的堆栈中弹出它但是这个控制器不在堆栈中，因为你在第三个 viewController 中创建了它。

# c# - EF：多对多字段始终为空

> ID：13118982
> 
> 赞同：0
> 
> 时间：2012-10-29T09:37:26.320
> 
> 标签：c#, asp.net-mvc, entity-framework, razor

当我尝试保存此模型时，该`menu.Roles`字段始终为`null`，并且保存更改方法不会更改该`Roles`字段

表是`Menu`，`RoleMenu`并且`Role`

所以，我有**一对多 2 多**模型：

菜单有一个`Roles`字段
角色有一个`Menus`字段

动作方法：

```
 [HttpPost]
    public ActionResult Edit(Menu menu, IEnumerable<int> RoleIDs)
    {
        if (ModelState.IsValid)
        {
            var roles = _db.UserRoles.Where(rl => RoleIDs.Contains(rl.Id)).ToList();

            menu.Roles = new List<UserRole>();
            menu.Roles.AddRange(roles);

            _db.Entry(menu).State = EntityState.Modified;
            _db.SaveChanges();
            return RedirectToAction("Index");
        }
        ViewBag.ParentMenuId = new SelectList(_db.Menus, "Id", "Name", menu.ParentMenuId);
        ViewBag.RoleIDs = new SelectList(_db.UserRoles.ToList(), "Id", "Name");
        return View(menu);
    } 
```

看法：

```
//...other VS auto generated fields...
<div class="editor-label">
        @Html.LabelFor(model => model.Roles, "Roles")
</div>
<div class="editor-field">
        @Html.ListBox("RoleIDs")
        @Html.ValidationMessageFor(model => model.Roles)
</div>
<p>
        <input type="submit" value="Save" />
</p> 
```

映射：

```
 modelBuilder.Entity<Role>()
             .HasMany(role => role.Menus)
             .WithMany(menu => menu.Roles)
             .Map(m =>
              m.MapLeftKey("RoleId").
                 MapRightKey("MenuId").
                 ToTable("RoleMenu")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:47:12.570

我认为这是因为您将角色添加到菜单中，而菜单没有附加到上下文中。

尝试将代码更改为

```
var roles = _db.UserRoles.Where(rl => RoleIDs.Contains(rl.Id)).ToList();

_db.Attach(menu);

menu.Roles = new List<UserRole>();

menu.Roles.AddRange(roles);

_db.SaveChanges();
return RedirectToAction("Index"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:46:28.823

通过 id 从 db 中检索它。然后问题解决了

但我认为这不是最好的解决方案

```
 [HttpPost]
    public ActionResult Edit(Menu menu, IEnumerable<int> RoleIDs)
    {
        var menuReal = (from m in _db.Menus.Include("Roles")
                        where m.Id == menu.Id
                        select m).FirstOrDefault();

        var roles = _db.UserRoles.Where(rl => RoleIDs.Contains(rl.Id)).ToList();

        menuReal.Roles = roles;

        _db.Entry(menuReal).State = EntityState.Modified;
        _db.SaveChanges();
        return RedirectToAction("Index");
    } 
```

# android - com.google.android.maps.GestureDetector 的 NoSuchMethodError

> ID：13118987
> 
> 赞同：1
> 
> 时间：2012-10-29T09:37:42.737
> 
> 标签：android

我的应用程序是使用谷歌地图。它适用于大多数设备。但在某些未知设备上，它会抛出异常：

```
Caused by: java.lang.NoSuchMethodError: android.view.ViewConfiguration.getScaledDoubleTapTouchSlop
at com.google.android.maps.GestureDetector.init(GestureDetector.java:393)
at com.google.android.maps.GestureDetector.<init>(GestureDetector.java:354)
at com.google.android.maps.GestureDetector.<init>(GestureDetector.java:329)
at com.google.android.maps.MapView.setup(MapView.java:330)
at com.google.android.maps.MapActivity.setupMapView(MapActivity.java:404)
at com.google.android.maps.MapView.<init>(MapView.java:289)
at com.google.android.maps.MapView.<init>(MapView.java:264)
at com.google.android.maps.MapView.<init>(MapView.java:247)
at mypackage.MyClass.<init>(MyClass.java:43)
... 41 more 
```

项目目标是 Google APIs Platform 4.0，API 级别 14。

有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T16:58:15.080

我的一个使用 googlemaps 的应用程序也遇到了同样的问题。它在 AndroVM 和 ADK 模拟器上运行良好，但在使用 Finless ROM 修改的 Nextbook 7 上以相同的缺失方法崩溃。我使用“baksmali”工具进行了进一步调查，发现我的 NextBook 上的 /system/framework/framework.jar 与其他文件不同，该方法实际上丢失了。

所以，也许你设备上的 framework.jar 也是罪魁祸首......

更新：我终于明白了！我从 ADK 模拟器中获取了一个较新的 /system/framework/com.google.android.maps.jar，而不是从 2008 年开始使用 Cyanogen 的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T21:39:45.293

Update : I've finally got it ! I took a newer /system/framework/com.google.android.maps.jar from ADK emulator instead of keeping the one from Cyanogen which was outdated from 2008\.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T10:45:08.143

这可能是因为该应用程序已在旧的 Android 版本（低于 4.0）上运行。因此，当在您的代码中调用该方法时，您会得到一个，`NoSuchMethodError`因为该方法在以前的 API 中不存在。

编辑：应该没问题，因为该方法是从 API 3 开始的，但也许你错过了一些导入？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T09:44:32.977

原因是你用理解它的编译器编译了这个方法。但是JVM在运行时不理解它。（不兼容问题）。

# amazon-ec2 - Amazon 实例中的负载平衡

> ID：13118988
> 
> 赞同：0
> 
> 时间：2012-10-29T09:37:51.160
> 
> 标签：amazon-ec2, amazon, load-balancing

谁能帮助我如何在 Amazon EC2 实例中实现负载平衡？

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T17:28:12.493

取自 Amazon ELB 常见问题页面：

*   启动 AWS 管理控制台
*   从管理控制台的左栏中选择负载均衡器。
*   在右上方窗格中，选择“创建负载均衡器”
*   为负载均衡器创建一个唯一名称。
*   选择要通过负载均衡器管理的协议（HTTP、HTTPS、TCP、SSL 或自定义）
*   为负载均衡器配置运行状况检查。
*   选择您希望放置在负载均衡器后面的实例。
*   由 Elastic Load Balancer 提供的 DNS 名称的流量会自动分布在负载均衡、运行良好的 Amazon EC2 实例中。

可以通过[http://aws.amazon.com/elasticloadbalancing/访问 ELB 页面](http://aws.amazon.com/elasticloadbalancing/)

负载平衡的好处是通过在一组服务器而不是一个服务器之间共享工作来缩短响应时间。它还为您提供冗余 - 如果一台服务器出现故障，仍然会有其他服务器可以弥补这一不足，直到停机的服务器重新联机。

负载平衡确实会带来问题，并且您必须注意一些事情。您有更复杂的管理场景，但最终，负载平衡是扩展过去单一硬件功能以及在很多情况下真正的自动冗余方面的唯一扩展方式

# php - 从 Bash 脚本修改 PHP 文件

> ID：13118989
> 
> 赞同：2
> 
> 时间：2012-10-29T09:38:00.033
> 
> 标签：php, html, regex, bash, parsing

我需要从 Bash 脚本对 PHP 文件（确切地说是 PHTML 文件，但它们仍然是有效的 PHP 文件）进行一些修改。我最初的想法是在正则表达式中使用 sed 或类似的实用程序，但是在这里阅读一些关于其他 HTML 解析问题的回复，似乎可能有更好的解决方案。

我在使用正则表达式时遇到的问题是缺乏对检测我想要匹配的字符串是否的支持：`(src|href|action)=["']/`是否在`<?php ?>`标签中，因此如果匹配在 PHP 标签中，我可以执行字符串连接，或者添加新的PHP标签不应该是。例如：

```
(1) <img id="icon-loader-small" src="/css/images/loader-small.gif" style="vertical-align:middle; display:none;"/>
(2) <li><span class="name"><?php echo $this->loggedInAs()?></span> | <a href="/Login/logout">Logout</a></li>
(3) <?php echo ($watched_dir->getExistsFlag())?"":"<span class='ui-icon-alert'><img src='/css/images/warning-icon.png'></span>"?><span><?php echo $watched_dir->getDirectory();?></span></span><span class="ui-icon ui-icon-close"></span>
(EDIT: 4) <form method="post" action="/Preference/stream-setting" enctype="application/x-www-form-urlencoded" onsubmit="return confirm('<?php echo $this->confirm_pypo_restart_text ?>');"> 
```

在 (1) 中有一个`src="/css`，因为它不在 PHP 标记中，所以我希望它变成`src="<?php echo $baseUrl?>/css`. 在（2）中，有一个 PHP 标签，但它不在 周围`href="/Login`，所以它也变成`href="<?php echo $baseUrl?>/Login`. 不幸的是，(3) 包含*在*`src='/css`PHP 标记内（它是一个回显字符串）。它也在PHP 代码中被引用，因此修改也需要注意这一点。最终结果将类似于：.*`"``src='".$baseUrl."/css`*

 *对我的 HTML 和 PHP 文件的所有其他修改都是使用正则表达式完成的（我知道，我知道......）。如果正则表达式可以支持匹配除特定模式之外的所有内容，`[^(<\?php)(\?>)]*`那么我会飞过这部分。不幸的是，这似乎是第 2 类语法领域。那么 - 我应该使用什么？理想情况下，它需要默认安​​装在 GNU 套件中，但其他工具（如 PHP 本身或其他解释器）也可以，只是不是首选。当然，如果有人可以构造一个适用于上述示例的正则表达式，那就太好了。

编辑：（4）是讨厌的匹配，大多数正则表达式都会失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T18:06:21.347

我解决这个问题的方法是将我的文件分成由 . 该脚本跟踪它当前所在的“上下文”——默认设置为 html，但在遇到这些标签时切换到 php。然后对该部分执行操作（不一定是正则表达式），然后将其附加到输出缓冲区。当文件被完全处理后，输出缓冲区被写回到文件中。

我试图用 sed 来做到这一点，但我遇到了无法控制在哪里打印换行符的问题。基于上下文的逻辑也是硬编码的，这意味着在新的上下文中添加会很乏味，例如 ASP.NET 支持。我目前的解决方案是用 Perl 编写的，可以缓解这两个问题，虽然我在让我的正则表达式实际做某事时遇到了一些麻烦，但这可能只是我错误地编码了我的正则表达式。

脚本如下：

```
#!/usr/bin/perl -w

use strict;

#Prototypes
sub readFile(;\$);
sub writeFile($);

#Constants
my $file;
my $outputBuffer;
my $holdBuffer;
# Regexes should have s and g modifiers
# Pattern is in $_
my %contexts = (
    html => {
        operation => ''
    },
    php => {
        openTag => '<\?php |<\? ', closeTag => '\?>', operation => ''
    },
    js => {
        openTag => '<script>', closeTag => '<\/script>', operation => ''
    }
);
my $currentContext = 'html';
my $combinedOpenTags;

#Initialisation
unshift(@ARGV, '-') unless @ARGV;
foreach my $key (keys %contexts) {
    if($contexts{$key}{openTag}) {
        if($combinedOpenTags) {
            $combinedOpenTags .= "|".$contexts{$key}{openTag};
        } else {
            $combinedOpenTags = $contexts{$key}{openTag};
        }
    }
}

#Main loop
while(readFile($holdBuffer)) {
    $outputBuffer = '';
    while($holdBuffer) {
        $currentContext = "html";
        foreach my $key (keys %contexts) {
            if(!$contexts{$key}{openTag}) {
                next;
            }
            if($holdBuffer =~ /\A($contexts{$key}{openTag})/) {
                $currentContext = $key;
                last;
            }
        }
        if($currentContext eq "html") {
            $holdBuffer =~ s/\A(.*?)($combinedOpenTags|\z)/$2/s;
            $_ = $1;
        } else {
            $holdBuffer =~ s/\A(.*?$contexts{$currentContext}{closeTag}|\z)//s;
            $_ = $1;
        }
        eval($contexts{$currentContext}{operation});
        $outputBuffer .= $_;
    }
    writeFile($outputBuffer);
}

# readFile: read file into $_
sub readFile(;\$) {
    my $argref = @_ ? shift() : \$_;
    return 0 unless @ARGV;
    $file = shift(@ARGV);
    open(WORKFILE, "<$file") || die("$0: can't open $file for reading ($!)\n");
    local $/;
    $$argref = <WORKFILE>;
    close(WORKFILE);
    return 1;
}

# writeFile: write $_[0] to file
sub writeFile($) {
    open(WORKFILE, ">$file") || die("$0: can't open $file for writing ($!)\n");
    print WORKFILE $_[0];
    close(WORKFILE);
} 
```

我希望这可以被其他人使用和修改以满足他们的需要。*

# wpf - 当文本在文本框中输入一些文本时，如何将焦点设置在数据网格上？

> ID：13118991
> 
> 赞同：0
> 
> 时间：2012-10-29T09:38:06.273
> 
> 标签：wpf, mvvm, textbox, wpfdatagrid

> 我有一个文本框和 Datagrid。
> 
> 当我在文本框中输入一些文本时，我的 datagrid itemsource 被过滤，我在 datagrid 中获得了一些值。
> 
> 但是现在我想当我在文本框中输入一些文本时，datagrid 应该获得焦点并使用箭头键我可以更改选定的行以及我想要的同时我也可以在文本框中输入文本。
> 
> 我没有得到我能做什么？

谁能知道？我使用 mvvm 模式..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:16:15.043

您可以通过使用将键盘焦点赋予 DataGrid

```
Keyboard.Focus(myGrid); 
```

请记住，在任何给定时间只有一个控件可以具有键盘焦点，因此使用此方法用户不能在使用箭头键导航网格的同时键入文本框

# java - 将 2 数组值转换为矩阵格式

> ID：13118993
> 
> 赞同：0
> 
> 时间：2012-10-29T09:38:18.680
> 
> 标签：java

我有一个带有矩阵显示值的 2 个数组。我使用 2 个 for 循环和一个字符串生成器来显示这些值。问题是这些值显示在一行中，我希望它以矩阵格式显示.

我的程序我使用字符串 1="bbabb" 和字符串 2="aaabb" 我比较每个值并相应地构建一个矩阵，给我 25 个值...但是当显示在我的文本区域中时，它会显示为“0000000100001000102101013”但我想这样显示

```
0 0 0 0 0 
0 0 1 0 0
0 0 1 0 0
0 1 0 2 1
0 1 0 1 3 
```

我对java很陌生。有人可以解释一下逻辑或给我一个示例代码，我可以将第一个字符串格式更改为第二个。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:40:36.053

您需要在每行之后打印一个换行符并分隔每个元素。例如

```
for (int r = 0; r < rows; r++) {
   for (int c = 0; c < cols; c++) {
      // print your element matrix[r][c]
      System.out.print(" ");
   }
   System.out.println(""); // <-- LINE FEED AT THIS POINT
} 
```

（或附加到您的`StringBuilder`等）。请注意，`println()`打印您的字符串和换行符。`print()`只打印字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:41:08.127

`System.out.println()`在内循环结束后，您可能会丢失 a 。您需要添加它，以便将下一行打印在新行中。

```
for (int i = 0; i < row; i++) {
    for (int j = 0; j < col; j++) {
    }
    System.out.println();
} 
```

由于您使用 a`StringBuilder`来存储输出，因此您可以`newline`在同一位置附加 a （在内循环之后）：-

```
for (int i = 0; i < row; i++) {
    for (int j = 0; j < col; j++) {
    }
    builder.append("\n");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T09:41:53.293

`"\n"`使用 StringBuilder 时，您需要在每行之间添加一个换行符，例如

```
StringBuilder sb = new StringBuilder();
sb.append("row1");
sb.append("\n");
sb.append("row2");
System.out.println(sb.toString()); 
```

显然，调整上述内容以适应您的嵌套`for`循环......

# c# - 检查列是否允许空值，C#？

> ID：13118997
> 
> 赞同：1
> 
> 时间：2012-10-29T09:38:33.483
> 
> 标签：c#, .net, sql, sql-server, null

如何检查指定列是否允许空值？

我正在使用以下代码打印所有列，但如果列允许空值，我也想打印：

```
cnn = new SqlConnection(connetionString);
cnn.Open();

SqlCommand myCommand = new SqlCommand("select * from " + tableName, cnn);
SqlDataAdapter da = new SqlDataAdapter(myCommand);
DataSet ds = new DataSet();

da.Fill(ds, tableName);

foreach (DataColumn dc in ds.Tables[0].Columns)
{
     // Print stuff here, dc.ColumnName is the column name
} 
```

获取预定义表时，DataColumn.allowDBnull 属性似乎不起作用，它始终设置为 true，即使在不允许空值的列中也是如此。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:55:53.757

如果您只关注列数据，我会从系统视图中执行此操作，而不是依赖数据适配器。例如

```
DECLARE @TableName VARCHAR(50) = 'dbo.TableName'

SELECT  Name, Column_ID, Is_Nullable
FROM    SYS.COLUMNS
WHERE   [Object_ID] = OBJECT_ID(@TableName) 
```

这也意味着您可以正确使用参数化查询并避免 [SQL 注入](http://bobby-tables.com/)的风险。所以你的最终代码将是这样的：

```
using (var connection = new SqlConnection(connectionString))
using (var command = new SqlCommand("SELECT Name, Is_Nullable FROM sys.columns WHERE [Object_ID] = OBJECT_ID(@TableName)", connection))
{
    connection.Open();
    command.Parameters.Add("@TableName", SqlDbType.VarChar).Value = tableName;
    using (var reader = command.ExecuteReader())
    {
        while (reader.Read())
        {
            Console.WriteLine("Name: {0}; Allows Null: {1}", reader.GetString(0), reader.GetBoolean(1));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T09:41:08.753

`SqlDataAdapter.Fill()` *添加或刷新行*并且不执行与表模式信息相关的任何操作，该信息知道特定列是否允许为空。但是您可以使用[SqlDataAdapter.FillSchema()](http://msdn.microsoft.com/en-us/library/0te8fa0y.aspx)加载架构信息，然后[AllowsDBNull](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.allowdbnull.aspx)将向您显示列的正确状态。

```
SqlDataAdapter da = new SqlDataAdapter(myCommand);
DataSet ds = new DataSet();
da.FillSchema(ds, SchemaType.Source, tableName);
da.Fill(ds, tableName); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T09:48:40.360

```
da.FillSchema(ds, SchemaType.Source, tableName);//Loads all the constraints and relations of tables 
da.Fill(ds, tableName);//Loads the data 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T09:51:18.867

```
cnn = new SqlConnection(connetionString);
cnn.Open();

SqlCommand myCommand = new SqlCommand("
select name,is_nullable  from sys.columns where object_id=object_id('"+tableName+"')", cnn);
SqlDataAdapter da = new SqlDataAdapter(myCommand);
DataSet ds = new DataSet();

da.Fill(ds, tableName);

foreach (datarow in ds.Tables[0].rows)
{
    if(dr["is_nullable"].ToString()==1)
    //the column is nullable
    else
    //column is not nullable
} 
```

# ios - 此 iOS XML 解析案例的最佳方法

> ID：13118999
> 
> 赞同：0
> 
> 时间：2012-10-29T09:38:34.527
> 
> 标签：ios, xml, nsxmlparser

我想把这个XML：

```
<tennis>
<date>01-01-2013
<tournament>
<location>
<city>London</city>
<venue>Wimbledon</venue>
</location>
<match>
<player>Andy Murray</player>
<player>Roger Federer</player>
</match>
<match>
<player>Rafa Nadal</player>
<player>Andy Roddick</player>
</match>
</tournament>

<date>02-01-2013
<tournament>
<location>... 
```

进入显示日期的表格视图，选择该表格后，将导航到分组的表格视图，其中 Venue 作为部分标题，并在表格行中列出匹配项。

我的问题是最好的方法是什么。目前我正在使用 NSXMLParser 来..

*   创建一个字典，每个 Date 都是 Venues 数组的键。
*   创建 Match 对象，并将每个 Venue 的 Match 数组存储在字典中。

then my first tableview is just displays the keys from the Date dictionary, and when a row is selected it 'passes' the associated array of Venues to the next tableview class..

然后从第二个字典中选择 Match 对象，使用传入的 Venues 数组作为查找的键。

抱歉，如果这令人困惑，当我写出来时是对我的。

*   这是构建数组和字典、设置标志以保持状态等的 NSXMLParser 方法，是像我这样的 XML 推荐的方法吗？

*   我应该使用 DOM 解析器吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:20:59.813

你可以试试这个 xml 解析器：

[SMXML文档](https://github.com/nfarina/xmldocument)

它使 xml 变成漂亮的数组或字典供您使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:31:39.357

我用来`XSXMLparser`从网站解析一些 XML，然后通过以下方式在表中显示键：

```
[myDictionary allKeys]objectAtIndex:indexPath.row; 
```

然后在选择时创建表的一个新实例并通过属性设置重要变量：

```
tableScreen *tableScreenNew = [[tableScreen alloc]init];
            tableScreenNew.currentLevel = 1;
            tableScreenNew.numberOfRows = counter;
            tableScreenNew.parsedData = parsedData;
            [self.navigationController pushViewController:tableScreenNew animated:YES]; 
```

这将使用我需要的数据推送新表，并且`cellForRow:`我只有一个 if：

```
if(currentLevel == 0)
{

}
else if(currentLevel == 1)
{

}
else
{
 NSLog(@"I Messed up");
} 
```

并在 cellForRow 中为您的情况分配一个临时字典：

```
NSDictionary *tempDictionary = [NSDictionary dictionaryWithDictionary:[originalParsedData valueForKey:dateKeyNameFromLastTable]]; 
```

编辑：解析代码

```
NSData *myData = [xmlToParse dataUsingEncoding:NSUTF16StringEncoding];

    NSXMLParser *parser = [[NSXMLParser alloc] initWithData:myData];
    [parser setDelegate:self];

 if([parser parse])
    {
         NSLog(@"Success");
         NSLog(@"****************************** Finished Dictionary ******************************");
         for(int i = 0;i < [parsedData count];i++)
         {
             NSLog(@"%d:%@",i,[parsedData objectAtIndex:i]);
         }
         NSLog(@"*********************************************************************************");
     }
    else
    {
         NSLog(@"Epic Fail");
         NSLog(@"%@",[parser parserError]);
    }

   - (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName
    attributes:(NSDictionary *)attributeDict
{
    NSLog(@"Processing Element: %@", elementName);
    NSLog(@"Processing Attributes: %@", attributeDict);

    //Here you would start adding the key/Dicts to a NSMutableDictionary which you would use to populate tables

[myNSMutableDictionary addObject:attributeDict forKey:elementName];
} 
```