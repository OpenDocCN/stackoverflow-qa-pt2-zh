# StackOverflow 问答 12553000-12553999

# jsf - selectedIndex attribute of panelTabbedPane in JSF not working

> ID：12553001
> 
> 赞同：1
> 
> 时间：2012-09-23T14:07:07.980
> 
> 标签：jsf, tomahawk

JSP code

```
<t:panelTabbedPane align="left"  serverSideTabSwitch="false" styleClass="tabbedPane" 
            activeTabStyleClass="activeTab" inactiveTabStyleClass="inactiveTab" width="100%" cellpadding="0"
            cellspacing="0" tabContentStyleClass="tabContent" style="margin-top:0px;text-align:center"
            selectedIndex="#{myBB.selectedTab}"> 
```

/***************************************************************************/

Backing Bean Code:

```
private int selectedIndex;

    public int getSelectedIndex() {
        System.out.println("getter of selectedIndexis called "+selectedIndex);
        return selectedIndex;
    }

    public void setSelectedIndex(int selectedIndex) {
        System.out.println("Setter of selectedIndexis called "+selectedIndex);
        this.selectedIndex= selectedIndex;
    } 
```

The backing bean is of session scope. When i change panelTab in the screen and click on submit button, always the default panel is being shown. I checked the console to find the sysout from setter of selectedIndex.But in console it is not being printed which means(I suppose) the selectedIndex is not being posted to the server.I'm using JSF version 1.1\. Can any one suggest how to make this work ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T12:01:50.557

根据[文档](http://myfaces.apache.org/tomahawk-project/tomahawk/tagdoc/t_panelTabbedPane.html)，`selectedIndex`是要使用的默认选项卡索引，而不是当前实际选择的选项卡索引。

话虽如此，您可以使用 a[`<t:tabChangeListener>`](http://myfaces.apache.org/tomahawk-project/tomahawk/tagdoc/t_tabChangeListener.html)来选择当前选定的选项卡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-06T12:07:07.620

对于任何可能遇到此问题的人：

您需要设置 serverSideTabSwitch="true" 并使用 tabChangeListener，否则选项卡切换（和已知的选项卡索引）完全在客户端完成。

# opencv - how do you build an open CV c/C++ file using Cmake exactly?

> ID：12553003
> 
> 赞同：0
> 
> 时间：2012-09-23T14:07:29.877
> 
> 标签：opencv, build, build-process

I have attempted to build the "kmeans.cpp" or "kmeans.c" file using gcc/g++ however I'm getting a lot of undefined references to opencv libraries, although I have installed Open CV successfully.

Can someone guide me how to build a simple C/C++ file using CMake?

Do I just do "cmake kmeans.cpp"?

I'm on OS X 10.6.8.

# wpf - WPF, Why manipulation is not reposnsive?

> ID：12553011
> 
> 赞同：1
> 
> 时间：2012-09-23T14:08:24.193
> 
> 标签：wpf, multi-touch

When manipulating a framework element on a canvas, it works fine, but, the manipulation events keeps get fired event after I raise my fingers, as a result the framework element will keep get manipulated ***after*** fingers are raised up from the screen.

It behaves as a stream of events keeps arriving after figures raised up.

Is there any reason that would buffer touch events ?! or is there any performance tips to consider when working with manipulation ?

For example, shall I freeze the framework element before manipulate it ?

p.s: I am not using ManipulationInertiaStarting event

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:42:43.640

没有看到任何代码，很难确定。

我的第一个建议是标记：

```
e.Handled = true; 
```

在您完成对该事件的任何计算之后。

# java - JavaFX 重叠场景

> ID：12553013
> 
> 赞同：0
> 
> 时间：2012-09-23T14:08:33.760
> 
> 标签：java, layout, javafx

我正在创建一个包含 2 个场景的游戏。一个场景包含所有游戏片段，一个场景覆盖第一个以显示 hud 项目。

这是让我的HUD覆盖的糟糕方法吗？
我可以简单地将我的 hud 的窗格添加到第一个场景中并且只使用一个吗？

任何建议都会非常有帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T16:15:19.817

我能够使用以下代码将窗格添加到作为我唯一一个场景的根的组中： `initGroup.getChildren().addAll(fieldBg, hud.getUiPane());`

但是，在尝试实例化创建窗格的对象时，我确实收到了 NullPointerException；我觉得这与这个问题无关。

# c++ - C++ - 联合函数调用是否会导致内存泄漏

> ID：12553014
> 
> 赞同：2
> 
> 时间：2012-09-23T14:08:41.853
> 
> 标签：c++, memory-leaks, function-pointers, stack-overflow, unions

我有一个像 .net 一样管理函数指针的想法，我认为这可能是一个记忆舔我需要的构造。

当我调用`action(5);`函数 Test 中的 5 时会发生什么？在我看来，它永远留在堆栈上，并可能导致 stackoverflow 异常

```
#include <iostream>
union Action
{
    void (*action)();
    void (*action1)(int);

    void operator()(int i)
    {
        this->action1(i);
    }
    void operator=(void (*action)())
    {
        this->action = action;
    }
    void operator=(void (*action)(int))
    {
        this->action1 = action;
    }
};
void Test()
{
    std::cout << "test";
}
int main()
{
    Action action;
    action = Test;

    action(5);

    char c;
    std::cin >> c;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T14:15:38.270

从不是最后一个写入的联合成员中读取会导致未定义的行为。

但是要回答您的问题：这取决于使用的[调用约定](http://en.wikipedia.org/wiki/Calling_convention)。更具体地说，程序的哪一部分负责清理堆栈（调用者与被调用者）。如果调用者清理了堆栈，一切都应该正常工作。另一方面，如果被调用者必须清理堆栈，则在函数返回后，调用者的堆栈帧已损坏。下一次访问堆栈分配的变量可能会使程序崩溃——或者更糟的是，它只会产生难以调试的不稳定行为。

# javascript - 淡出内容

> ID：12553015
> 
> 赞同：2
> 
> 时间：2012-09-23T14:08:43.400
> 
> 标签：javascript, jquery, fadein, fade, fadeout

我有一个大问题，我不知道该怎么做，我找到了类似的解决方案，但不是确切的解决方案，希望有人可以帮助我，拜托。

首先，我想创建一个工作页面，并在四列中显示缩略图，这很容易......我需要发生的是当点击缩略图时，完整的内容消失并被替换为完整的详细信息单击的特定缩略图（即，单击时 thumbnail1 将显示 thumbnail1 内容 div）....带有反向链接，将用户带回缩略图....

我的任务不是转到不同的页面，而是留在页面上......因此我为什么要寻求帮助，因为这会更容易选择......

我真的很想实现以下[http://www.charliegentle.co.uk/](http://www.charliegentle.co.uk/)如果你点击网页设计然后点击缩略图，你可以看到我之后的效果..

我找到的最接近的例子如下，唯一的问题是我不想要菜单栏系统，即使我确实将菜单栏更改为缩略图，缩略图仍会留在屏幕上，这不是我想要的.. .

请帮助...这是可以使用的代码[http://jsfiddle.net/buScL/21/](http://jsfiddle.net/buScL/21/)

HTML

```
<div id="wrapper">
  <ul id="controlls">  
      <li><a href="#" id="one" class="dealer">Dealer</a></li>
      <li><a href="#" id="two" class="advertise">Advertise</a></li>
      <li><a href="#" id="three" class="social">Social Media</a></li>
      <li><a href="#" id="four" class="need">Need</a></li>
  </ul>

    <div id="slider">  

        <div id="dealer">
            <p>If you click on this paragraph
              you'll see it just fade away.
            </p>
        </div>
        <div id="advertise">
            <p>If you click on this paragraph
            you'll see it just fade away.
            </p>
        </div>
        <div id="social">
            <p>If you click on this paragraph
            you'll see it just fade away.
            </p>
        </div>
        <div id="need">
            <p>If you click on this paragraph
            you'll see it just fade away.
            </p>
        </div>
    </div>
</div> 
```

和

Javascript

```
$("#controlls li a").click(function(e) {
    e.preventDefault();
    var id = $(this).attr('class');
    $('#slider div:visible').fadeOut(500, function() {
        $('div#' + id).fadeIn();
    })
}); 
```

和CSS

```
p { font-size:150%; cursor:pointer; }

  #wrapper{
      width: 700px;
      height: 400px;
      background: #a5a5a5;
      margin: 100px auto 0 auto;
  }

  #slider{
      width: 450px;
      overflow: hidden;
  }

  #dealer{
  float: left;
      margin: 0 auto;
      width: 450px;
      height: 200px;
      background: pink;
  }

  #advertise{
    float: left;

  display: none;
      margin: 0 auto;
      width: 450px;
      height: 200px;
      background: lime;
  }
  #social{
    float: left;

    display: none;  
      margin: 0 auto;
      width: 450px;
      height: 200px;
      background: purple;
  }
  #need{
    float: left;

    display: none;
      margin: 0 auto;
      width: 450px;
      height: 200px;
      background: yellow;
  }

  ul#controlls{
  padding: 10px 0;
  height: 60px;
  }

  ul#controlls li{
      display: inline;
      padding: 5px 10px;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T14:57:53.550

试试这个

[http://jsfiddle.net/buScL/32/](http://jsfiddle.net/buScL/32/)

```
 p { font-size:150%; cursor:pointer; }

  #wrapper{
      width: 700px;
      height: 400px;
      background: #a5a5a5;
      margin: 100px auto 0 auto;
  }

  #slider{
      width: 450px;
      overflow: hidden;
  }
  #slider > div {
   display:none;
}
#back {
   display:none;            
}
  #dealer{
  float: left;
      margin: 0 auto;
      width: 450px;
      height: 200px;
      background: pink;
  }

  #advertise{
    float: left;

  display: none;
      margin: 0 auto;
      width: 450px;
      height: 200px;
      background: lime;
  }
  #social{
    float: left;

    display: none;  
      margin: 0 auto;
      width: 450px;
      height: 200px;
      background: purple;
  }
  #need{
    float: left;

    display: none;
      margin: 0 auto;
      width: 450px;
      height: 200px;
      background: yellow;
  }

  ul#controlls{
  padding: 10px 0;
  height: 60px;
  }

  ul#controlls li{
      display: inline;
      padding: 5px 10px;
  }
​

<div id="wrapper">
  <ul id="controlls">  
      <li><a href="#dealer" id="one" class="">Dealer</a></li>
      <li><a href="#advertise" id="two" class="">Advertise</a></li>
      <li><a href="#social" id="three" class="">Social Media</a></li>
      <li><a href="#need" id="four" class="">Need</a></li>
  </ul>
    <div id="back"><a href="#">Back</a></div>

    <div id="slider">  

        <div id="dealer">
            <p>If you click on this paragraph
              you'll see it just fade away.
            </p>
        </div>
        <div id="advertise">
            <p>If you click on this paragraph
            you'll see it just fade away.
            </p>
        </div>
        <div id="social">
            <p>If you click on this paragraph
            you'll see it just fade away.
            </p>
        </div>
        <div id="need">
            <p>If you click on this paragraph
            you'll see it just fade away.
            </p>
        </div>
    </div>
</div>
​

$("#controlls li a").click(function(e) {
    e.preventDefault();
    var id = $(this).attr('href');
        $(id).fadeIn();
        $('#back').show();
        $('#controlls').hide();
});

    $('#back a').click(function() {
        $('#slider div:visible').fadeOut(function () {
            $('#controlls').fadeIn();
            $('#back').hide();
        });
    });

​ 
```

# android - Issue with Asynctasks and running multiple

> ID：12553017
> 
> 赞同：0
> 
> 时间：2012-09-23T14:08:54.163
> 
> 标签：android, service, asynchronous

I am looking to have multiple asynctasks but each one might possible need to be stopped while its running. Whats the most effective way to do this while having limitless running async task?

Right now in my code I would have:

```
ProgressTask task1; 
ProgressTask task2; 
ProgressTask task3; 
```

but its too messy and difficult to manage that all and if I want to have 50 of those I would have to make 50 of them + code it in my app to determine which one to choose. So how can I do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T14:35:44.187

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)通读这个，你的答案就在那里

我个人认为你应该只有一个 Asynctask 然后在 asynctask 中使用多种方法来做你需要的

# java - Java - 按类型/接口获取集合的“视图”

> ID：12553019
> 
> 赞同：0
> 
> 时间：2012-09-23T14:09:06.363
> 
> 标签：java, collections, guava

我需要在一个`Set`. 有时我想遍历 中的*所有内容*，有时我只想遍历`Set`实现特定接口的所有内容。一些对象将实现我想要查看的几个接口。

是否有设计模式或 Guava/Java 类允许在一个`Set`或其他集合上按类型查看？最好以最有效的方式，因为此代码将成为每 17 毫秒调用一次的核心游戏循环的核心。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T14:30:11.693

用番石榴——

```
Sets.filter(set, Predicates.instanceOf(Foo.class)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T14:16:12.380

您是否考虑过将对象保存在哈希表中？

```
Hashtable<String,Set<YourObject>> ht = new Hashtable<String,Set<YourObject>>(); 
```

其中 String 是类型名称。这样您就可以选择要迭代的内容。

# perl - Perl 中具有可选 128/256/512/1024/2048 位大小的 MD5 校验和

> ID：12553020
> 
> 赞同：0
> 
> 时间：2012-09-23T14:09:13.993
> 
> 标签：perl, encryption, md5, rsa, checksum

是否可以使用**MD5**来获取可选大小为 128/256/512/1024/2048 位的校验和？

该`Digest::MD5`模块允许使用 RSA MD5 消息摘要算法，该算法将任意长度的消息作为输入，并生成**128 位指纹**作为输出。

如何使用 MD5 产生**更大的**指纹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T14:15:36.137

[根据定义，](https://www.rfc-editor.org/rfc/rfc1321) MD5只产生一个 128 位的哈希值。

因此，您要么需要使用不同的散列函数（例如，[SHA-2](http://en.wikipedia.org/wiki/SHA-2)系列散列函数输出高达[512 位](http://en.wikipedia.org/wiki/SHA-2#Comparison_of_SHA_functions)的值），要么将数据分成几部分并对它们进行散列，然后再组合散列。

如果您可以提供有关您要实现的目标的更多详细信息，那么它会更容易提供更具体的建议。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T14:54:15.797

您无法创建该大小的 MD5 哈希。通常，安全散列函数是针对特定大小设计的。它们具有一定大小的内部状态。

当然，你可以使用 MD5 创建一个随机的字节流；只需取上一个值并再次散列，并继续附加结果。当然，结果的总体安全性不会比数据上的原始哈希值强。一段时间后，哈希值会变弱，因为每次哈希后都会丢失少量的熵（不过这需要很长时间）。

目前，您可以使用的最佳哈希函数是 SHA-512，尽管它会慢慢被相同大小的 SHA-3 取代（但在撰写本文时尚未标准化）。这些哈希值提供了足够的安全性，因此如果您需要更多数据，您可以简单地使用填充方法。

想到的填充方法是：

*   专有方法简单地添加 X 个已知值的字节；
*   PBKDF2 中使用的函数；
*   the function as used internally for PSS padding (see the public RSA PKCS#1 v2.1 standards).

As said, it depends on the application which one is the best to use. If you don't know what you are doing (such as it seems), *don't use MD5*. It's too broken for general use, and it does not have a big enough state or output.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T14:15:45.243

不它不是。请参阅[cPAN 文档](http://search.cpan.org/~gaas/Digest-MD5/MD5.pm)：

```
 # Functional style
 use Digest::MD5 qw(md5 md5_hex md5_base64);

 $digest = md5($data);
 $digest = md5_hex($data);
 $digest = md5_base64($data); 
```

Digest::MD5 模块允许您在 Perl 程序中使用 RSA Data Security Inc. MD5 Message Digest 算法。该算法将任意长度的消息作为输入，并生成**输入的 128 位“指纹”**或“消息摘要”作为输出。

请注意，MD5 算法不像以前那么强大。自 2005 年以来，很容易生成产生相同 MD5 摘要的不同消息。生成产生给定摘要的消息似乎仍然很困难，但是对于依赖摘要来唯一标识消息的应用程序，转向更强大的算法可能是明智的。

*   您可以考虑改用[RSA](http://search.cpan.org/search?query=rsa&mode=all)。

# javascript - Getting Line Number In Text Area

> ID：12553025
> 
> 赞同：23
> 
> 时间：2012-09-23T14:10:09.337
> 
> 标签：javascript, jquery, html, textarea

> **Possible Duplicate:**
> [Find out the 'line' (row) number of the cursor in a textarea](https://stackoverflow.com/questions/9185630/find-out-the-line-row-number-of-the-cursor-in-a-textarea)

I want to find out the line number that a user's cursor in on in a HTML `textarea` element.

Is this possible using javascript and jquery?

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-23T14:27:25.780

这适用于按钮单击。从[查找文本区域中光标的“行”（行）号中窃取](https://stackoverflow.com/questions/9185630/find-out-the-line-row-number-of-the-cursor-in-a-textarea)

```
​function getline()
{
    var t = $("#t")[0];
    alert(t.value.substr(0, t.selectionStart).split("\n").length);
}​ 
```

HTML

```
​&lt;textarea rows="6" id="t">
there is no
love in the ghetto
so come here
and get it
</textarea>
<input type="button" onclick="getline()" value="get line" />​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T14:16:21.637

You can use the following approach

1.  [Find the caret positio](https://stackoverflow.com/questions/263743/how-to-get-caret-position-in-textarea)n (index).
2.  Find the substring from position 0 to index
3.  Search for number of new lines in the substring obtained in step 2.

// Test

```
$(function() {
    $('#test').keyup(function() {
        var pos = 0;
        if (this.selectionStart) {
            pos = this.selectionStart;
        } else if (document.selection) {
            this.focus();

            var r = document.selection.createRange();
            if (r == null) {
                pos = 0;
            } else {

                var re = this.createTextRange(),
                rc = re.duplicate();
                re.moveToBookmark(r.getBookmark());
                rc.setEndPoint('EndToStart', re);

                pos = rc.text.length;
            }
        }
        $('#c').html(this.value.substr(0, pos).split("\n").length);
    });
});
​ 
```

Here is a working example [http://jsfiddle.net/S2yn3/1/](http://jsfiddle.net/S2yn3/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T14:21:21.670

This can be split up in three steps:

*   [Caret position in textarea, in characters from the start](https://stackoverflow.com/q/263743/1048572)
*   [How to get the number of lines in a textarea?](https://stackoverflow.com/q/2035910/1048572) / [JavaScript: How to add line breaks to an HTML textarea?](https://stackoverflow.com/q/863779/1048572)
*   get the lines before the caret, and count them.

I guess you don't want to consider wrapped text and scrolled content. Assuming you use the function from [this answer](https://stackoverflow.com/a/263796/1048572), it would be like:

```
var el = document.getElementById("inputarea"); // or something

var pos = getCaret(el),
    before = el.value.substr(0, pos),
    lines = before.split(/\r?\n/);
return lines.length; 
```

# debugging - Running xcode 4.5 on iphone ios6 - Breakpoints are not working

> ID：12553026
> 
> 赞同：6
> 
> 时间：2012-09-23T14:10:30.350
> 
> 标签：debugging, ios6, xcode4.5

tried to run on simulator - worked. tried to run on ios 5.1 - worked.

Any idea?

# iphone - iOS6 中的 AudioToolBox 泄漏？

> ID：12553031
> 
> 赞同：4
> 
> 时间：2012-09-23T14:11:44.067
> 
> 标签：iphone, avaudioplayer, ios6

当我使用 AudioToolBox 播放音乐时，内存泄漏严重。

```
AVAudioPlayer *newMusicPlayer = [[AVAudioPlayer alloc] initWithData:data error:&error]; 
```

我使用此代码播放音乐。在 iOS5 和 iOS4 中，它可以正常工作。但是在iOS6中，如果数据大小为5M，则5M全部泄露。而且我在 Instruments 中看不到泄漏信息。

有没有人有同样的问题？任何建议将不胜感激。

我所有的音频代码都在这里（使用 ARC）：

```
@implementation ViewController
{
    AVAudioPlayer *_player;
}

- (void)play
{
    if (_player)
    {
        [_player stop];
        _player = nil;
    }

    NSString *path = [NSHomeDirectory() stringByAppendingPathComponent:@"test.app/1.mp3"];
    NSData *musicData = [[NSData alloc] initWithContentsOfFile:path];
    AVAudioPlayer *player = [[AVAudioPlayer alloc] initWithData:musicData error:nil];
    player.volume = 1;
    if (player)
    {
        _player = player;
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    button.frame = CGRectMake(100, 100, 100, 100);
    [button setTitle:@"play" forState:UIControlStateNormal];
    [button addTarget:self action:@selector(play) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:button];
}

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T05:39:24.530

我正在使用 播放文件中的音频`AVAudioPlayer`，发现 iOS 模拟器一直在泄漏内存，但设备没有。这已使用 Instruments 进行了验证。这是 ARC 代码。

我的播放器是这样声明的：

```
@property (nonatomic, retain) AVAudioPlayer *numberPlayer; 
```

并合成如下：

```
@synthesize numberPlayer = _numberPlayer; 
```

由于我需要播放几种不同的声音，并且`AVAudioPlayer`在创建后无法重置以播放不同的音频文件，因此我每次都创建一个新播放器，如下所示：

```
NSString *audioFilePathName = [NSString stringWithFormat:@"Voices/%@/%03i.m4a", self.voiceName, self.theNumber];
NSURL *url = [NSURL fileURLWithPath:BUNDLE_FULL_PATH(audioFilePathName)];
self.numberPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil];
self.numberPlayer.numberOfLoops = 0;
[self.numberPlayer setCurrentTime:0.0];
[self.numberPlayer setDelegate:self];
[self.numberPlayer prepareToPlay];
[self.numberPlayer play]; 
```

在我的委托中，我将播放器设置为播放`nil`完毕：

```
- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag {
    if (player == self.numberPlayer) {
        _numberPlayer = nil;
    }
} 
```

在模拟器中，两者都`AudioSessionDevice`泄漏`UISoundNewDevice`内存。然而，最大的泄密者实际上是`NSURL`. 这些泄漏都不会在设备上发生。这种行为在 iOS 6 中没有改变，但我确实将我的项目部署设置为 5.0，如果这有什么不同的话。

另请参阅[https://stackoverflow.com/questions/3433487/avaudioplayer-leak-in-simulator](https://stackoverflow.com/questions/3433487/avaudioplayer-leak-in-simulator)和[AudioToolbox 库 AVAudioPlayer 中的内存泄漏](https://stackoverflow.com/questions/4915580/memory-leak-in-audiotoolbox-library-avaudioplayer)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T15:54:33.877

也许你做得比我好，而我前面没有 XCode，但是：

创建对象，创建引用：

```
AVAudioPlayer *newMusicPlayer = [[AVAudioPlayer alloc] initWithData:data error:&error]; 
```

这是分配而不是分配，没有保留：

```
_musicPlayer = newMusicPlayer; 
```

out of function`playMusicWithMusicData`它会释放.`newMusicPlayer`当我使用`_musicPlayer`. 分析器工具非常烦人，因为我做了一个保留，也许也是一个发布。

如果您使用的是 ios4，则不是 ARC 这个项目。

在 if 分支中：

```
 [_musicPlayer stop];
    _musicPlayer = nil; 
```

我会检查`_musicPlayer`不为零，但这不会解决您的问题。

不知道它可能在哪里，如果不在 ios 中，可能会在那里：

如果您更改委托而不是自我，则解决了。

```
 _musicPlayer.delegate = self; 
```

到任何其他班级？

# vim - 如何在 janus，vim 发行版中自定义插件？

> ID：12553032
> 
> 赞同：1
> 
> 时间：2012-09-23T14:11:50.897
> 
> 标签：vim, customization, janus

[Janus](https://github.com/carlhuda/janus)是一个很好的预配置 ViM [及其插件]。有两个不同的钩子*.vimrc.before*在 Janus 加载之前运行，*.vimrc.after*在 Janus 加载之后但在任何插件加载之前运行。

一切似乎都很好，但我找不到添加插件特定配置的方法/位置。例如，我想使用[rails.vim](https://github.com/tpope/vim-rails)的 Rnavcommand 来添加各种导航命令，如“Rpresenter”、“Ruploader”等，

`Rnavcommand presenter app/presenters`

我无法在*.vimrc.after*中执行此操作，因为**rails.vim**在执行此文件时尚未加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T18:55:26.940

Janus 的插件特定设置位于[`janus/vim/tools/janus/after/plugin/`](https://github.com/carlhuda/janus/tree/master/janus/vim/tools/janus/after/plugin). 一旦安装了整个东西，我不知道它们在哪里。

但我觉得有必要说*Drop Janus。*使用自己`~/.vimrc`的插件并自己安装插件并不困难或耗时，其中一个好处是您实际上知道事情在哪里、如何以及为什么会这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T15:00:54.230

当一个插件还没有被加载，但你需要它的功能（例如，基于它定义自定义命令）时，你总是可以显式地获取插件脚本，然后在之后进行定义：

```
:runtime plugin/rails.vim
:Rnavcommand presenter app/presenters 
```

应该包含在所有插件中的规范 include-guard 避免了插件在以后作为常规初始化序列的一部分再次被重新定义时被重新定义。

* * *

或者，*后*目录用于需要在依赖脚本之后运行的东西。我不知道/不推荐使用*Janus*之类的发行版，但假设 Rails 插件位于`~/.janus/rails/plugin/rails.vim`，则对应的*after*位置将是`~/.janus/rails/after/plugin/rails.vim`.

# java - 我想安排一个任务每周使用 Java 代码运行一个批处理文件

> ID：12553034
> 
> 赞同：0
> 
> 时间：2012-09-23T14:12:10.963
> 
> 标签：java

有没有办法为相同的调度程序代码编写java代码来执行批处理文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T14:16:02.100

It is likely your OS supports this already and is a better choice for doing this. In Windows its called Scheduled Tasks and in Unix its cron.

You can use Quartz in Java, but I would try the OS support first.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T14:43:49.247

对于 Win OS 更容易使用“任务计划程序”

br

# c# - 如何将 DataGridView 中的 HeadColumn 保存到 Excel？

> ID：12553039
> 
> 赞同：0
> 
> 时间：2012-09-23T14:12:40.243
> 
> 标签：c#, winforms, datagrid, datagridview, datatable

我将datagridview导出到excel

但 Headcolumn 不显示在 excel 文件中。

**样本**

结果（在 Excel 中）

```
1 | mani | 213/435 | 0-892-342234-09
2 | ware | 1/67    | 053-36-49 
```

**但我需要结果（在 Excel 中）**

```
ID | Name | Address | Tel. >>> **Headcolumn**
1  | mani | 213/435 | 0-892-342234-09
2  | ware | 1/67    | 053-36-49 
```

**代码 C# Windows 窗体**

```
 private void btExport_Click(object sender, EventArgs e)
        {
            string sql = @"SELECT id,fullname,address,tele FROM tablePeople";
            SqlCommand cmd = new SqlCommand(sql, Conn);
            SqlDataAdapter da = new SqlDataAdapter(cmd);
            DataSet ds = new DataSet();
            da.Fill(ds, "data");
            DataTable dt = ds.Tables["data"];

            Excel.Application xlApp;
            Excel.Workbook xlWorkBook;
            Excel.Worksheet xlWorkSheet;
            object misValue = System.Reflection.Missing.Value;

            xlApp = new Excel.Application();
            xlWorkBook = xlApp.Workbooks.Add(misValue);
            xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);
            int r = 0;
            int c = 0;

            // DGV To EXCLE But HeadColumn don't show in excel
            for (r = 0; r <= dataGridView1.RowCount - 1; r++)
            {
                for (c = 0; c <= dataGridView1.ColumnCount - 1; c++)
                {
                    DataGridViewCell cell = dataGridView1[c, r];
                    xlWorkSheet.Cells[r + 1, c + 1] = cell.Value;
                }
            }

            xlWorkBook.SaveAs(@"c:\details.xls", Excel.XlFileFormat.xlWorkbookNormal, misValue, misValue, misValue, misValue, Excel.XlSaveAsAccessMode.xlExclusive, misValue, misValue, misValue, misValue, misValue);
            xlWorkBook.Close(true, misValue, misValue);
            xlApp.Quit();

            releaseObject(xlWorkSheet);
            releaseObject(xlWorkBook);
            releaseObject(xlApp);

            MessageBox.Show("Excel file created");
        } 
```

非常感谢您的宝贵时间：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T14:20:57.423

There is a Columns collection in both `DataGridView` and `DataTable` You can get your column name by iterating over them.

Before you do this:

```
for (r = 0; r <= dataGridView1.RowCount - 1; r++)
{
    for (c = 0; c <= dataGridView1.ColumnCount - 1; c++)
    {
        DataGridViewCell cell = dataGridView1[c, r];
        xlWorkSheet.Cells[r + 1, c + 1] = cell.Value;
    }
} 
```

Add this code:

```
c = 0;
foreach(DataGridViewColumn dataGridViewColumn in dataGridView1.Columns)
{
    xlWorkSheet.Cells[0, c++] = dataGridViewColumn.Name;
} 
```

# vim - How can I make NERDTree always available at left?

> ID：12553051
> 
> 赞同：2
> 
> 时间：2012-09-23T14:14:46.893
> 
> 标签：vim

I want to keep NERDTree always available at left *(since vim starts)*.

NERDTree documentations has nothing relating to this and I don't think it has such inbuilt feature.

Well I tried setting by my own and did this:

```
autocmd VimEnter * NERDTree 
```

But this seems buggy, the annoying things I found are:

1.  At startup the cursor is focused at NERDTree, it should be at editor window instead.
2.  When closing *(with `:q`)* the editor window closes, but the NERDTree is focused *(I want to quit immediately, no wait!)*

Do you have any better idea than this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T15:16:54.707

对于 1.，添加返回上一个窗口的指令：

```
autocmd VimEnter * execute 'NERDTree' | wincmd p 
```

对于 2.，您可以只使用`:qa`; 要自动执行此操作，您必须定义一个 autocmd 来检查最后剩余的窗口是否来自 NERDTree，如下所示（未经测试）：

```
autocmd WinEnter * if winnr('$') == 1 && exists("t:NERDTreeBufName") && bufwinnr(t:NERDTreeBufName) == 1 | quit | endif 
```

# c++ - C++ 类网络编程的分段错误

> ID：12553052
> 
> 赞同：1
> 
> 时间：2012-09-23T14:14:51.887
> 
> 标签：c++, class, networking, pthreads, segmentation-fault

我正在尝试编写一个使用类、启动和侦听网络连接的 c++ 程序，然后为每个新客户端启动一个新线程。

幸运的是，我已经想出了如何从类中生成线程，但是当尝试在类中执行 accept() 时，我遇到了分段错误。我将发布代码，以便更容易地显示我遇到问题的地方。

```
#include <iostream>
#include <string.h> //for memset
#include <pthread>
#include <sys/types.h> //network
#include <sys/socket.h> //network
#include <netinet/in.h> //network

using namespace std;
class network
{
  public:
    void my_listen();
    static void *handleClient(void * in_stream);
};

void* network::handleClient(void * in_stream)
{

  int *stream = reinterpret_cast<int *>(in_stream);
  write(*stream,"Hello Client\n", 12);
}

void network::my_listen()
{
  /*
   * Name: my_listen()
   * Purpose: Listens and accepts new connections. Once accpeted, a new thread
   *          is spun off. 
   * Input: none
   * Output: none
  */

  int *new_socket_desc;
  int port_num = 9876;
  socklen_t client_addr_len;

  int socket_desc = socket(AF_INET,SOCK_STREAM,0);

  sockaddr_in serv_addr, cli_addr;

  if(socket_desc == -1)
  {
    cerr << "Unable to create new sockets\n";
  }

  memset(&serv_addr, 0, sizeof(serv_addr));

  serv_addr.sin_family = AF_INET;
  serv_addr.sin_addr.s_addr = INADDR_ANY;
  serv_addr.sin_port = htons(port_num);

  if(bind(socket_desc, (struct sockaddr *) &serv_addr, sizeof(serv_addr)) < 0)
  {
    cerr << "Error on binding " << port_num << endl;
  }

  listen(socket_desc,5);

  client_addr_len = sizeof(cli_addr);

  pthread_t thread[10];
  int count = 0;

  *new_socket_desc = accept(socket_desc, (struct sockaddr *) &cli_addr, &client_addr_len); //Right here I segment fault

  cout << "Connected client " << " @ " << new_socket_desc << " (" << *new_socket_desc << ")" <<  endl;

  pthread_create(thread[0], handleClient, (void *)new_socket_desc);

  pthread_join(thread[0],NULL);
} 
```

主要不是那么令人兴奋：

```
#include "network.h"
using namespace std;

int main()
{
  network my_network;

  my_network.my_listen();
} 
```

有趣的是，我可以在不使用类的情况下完成所有这些工作。我确定它与范围有关，但我不知道为什么。

顺便说一句，我使用的是 gcc 4.6.2，目标平台为 x86_64

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T14:33:36.910

您将 new_socket_desc 声明为指针，但从未设置它指向的内容。当您尝试将值放在指针的位置（带有您的接受调用的结果）时，它正在写入内存中的某个随机位置，这可能会或可能不会导致立即崩溃（在此版本的代码中，它是导致崩溃）但总是非常糟糕。

让 new_socket_desc 成为你的类的常规 int 成员，在创建线程时使用 & 运算符，否则不要使用 * 运算符，你应该有更好的运气。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T16:09:11.620

```
int *new_socket_desc;
// ....
*new_socket_desc = accept(socket_desc .... 
```

您将 new_socket_desc 声明为一个未初始化的指针，然后将结果分配`accept`给`new_socket_desc`. 所以很明显这会导致 SEGFAULT。你应该做：

```
int new_socket_desc;
// ....
new_socket_desc = accept(socket_desc .... 
```

# django - 如何在 django 中对两个表单进行验证

> ID：12553054
> 
> 赞同：0
> 
> 时间：2012-09-23T14:14:58.713
> 
> 标签：django, forms, validation

在我的 django 应用程序中，我有这些模型

```
class Lesson(models.Model):
    name = models.CharField(max_length=200)
    course = models.ForeignKey(Course)
    ...
class Course(models.Model):
    title = models.CharField(max_length=200)
    ... 
```

我使用两种表单在我的模板中获取/创建一个`Course`实例。在一个中，我使用 a在模板中创建一个。在另一个中，我使用 CharField 提供一个文本字段，用户可以在其中输入课程名称。`Edit_Lesson``choice_form``ModelChoiceField``dropdown list``course_name_form`

我需要对这些进行验证。如果最初没有课程，即`Course.objects.all()`是一个空列表，则下拉列表`choice_form`中将没有任何项目供用户选择。然后，如果用户忘记在文本字段中输入名称的`course_name_form`，不会选择/创建任何课程实例。发生这种情况时，我想向用户显示一条错误消息，要求他输入课程名称。

我想，我将无法在表单中编写验证代码。我应该`error_list=[]`在我的视图中创建一个并将错误放入其中并显示它吗？这意味着，验证发生在视图中。我不确定这是否是正确的方式

请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T14:39:10.140

您可以覆盖模型表单的 clean() 方法来执行需要更广泛范围知识的验证。

在您的情况下，您可能会这样做

```
def clean(self):
   if not Course.objects.count() and not self.cleaned_data['course_name']:
       raise ValidationError(u"Some sensible message")
   return self.cleaned_data 
```

# plugins - 序列滑块 JS 不适用于 Foundation 框架 JS 文件

> ID：12553055
> 
> 赞同：1
> 
> 时间：2012-09-23T14:15:02.490
> 
> 标签：plugins, frameworks, slider, sequence, zurb-foundation

我在我的网站上使用 Foundation 框架，现在我正在实现 Sequence 滑块，它工作得很好，但只有当我在头部注释以下 Foundation JS 文件时：

```
<script src="/plugins/foundation/modernizr.foundation.js" type="text/javascript"></script>
<script src="/plugins/foundation/foundation.min.js" type="text/javascript"></script>
<script src="/plugins/foundation/app.js" type="text/javascript"></script> 
```

但是，对于基础的其他一些功能，我确实需要这些文件。以前有没有其他人遇到过这个问题并找到了解决方案？谁能给我一些关于问题出在哪里的提示？

当我用萤火虫查看它时，我才发现，这就是控制台所说的：

```
$("#sequence").sequence is not a function
var sequence = $("#sequence").sequence(options).data("sequence"); 
```

这是我放在脑海中的 javascript 的一部分，用于启动文档准备好的代码；

```
$(document).ready(function() {

    $("body").css("display", "none");
    $("body").fadeIn(1000);
    $("a.transition").click(function(event){
        event.preventDefault();
        linkLocation = this.href;
        $("body").fadeOut(500, redirectPage);
    });

    var options = {
        autoPlay: false,
        nextButton: true,
        prevButton: true
    }
    var sequence = $("#sequence").sequence(options).data("sequence");

    $('.details, .info-button') .mouseover(function() {
        $('.title').css("visibility", "hidden");
    }) .mouseout (function() {
        $('.title').css("visibility", "visible");
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:22:32.633

由于没有人回答，我自己想出了一个解决方案。

看来问题是在头部调用文件的顺序。

它不起作用的顺序我在基础之前有序列和 jquery。

一旦我按顺序切换了这些，两个插件似乎都可以正常工作..

这是它的工作顺序：

```
<script src="/plugins/foundation/modernizr.foundation.js" type="text/javascript"></script>
<script src="/plugins/foundation/foundation.min.js" type="text/javascript"></script>
<script src="/plugins/foundation/app.js" type="text/javascript"></script>       
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="/js/sequence.jquery.js" type="text/javascript"></script> 
```

# python - 在已安装 Python 2.7 的系统上从源代码编译 Python 2.7.3

> ID：12553057
> 
> 赞同：10
> 
> 时间：2012-09-23T14:15:32.243
> 
> 标签：python, python-2.7, shared-libraries

我希望从源代码编译 Python 2.7.3。操作系统是 OpenSUSE 11.4 x86_64，它已经提供了 Python 2.7。我想使用 2.7.3 来获取最新的安全补丁，但它是一个共享系统，所以我无法修改系统 Python 解释器。

我使用`./configure --prefix=/opt/python --enable-shared`. 没有配置错误，所以我`make`. 再次没有错误。我做了一个`make install`（我认为我不需要`make altinstall`，因为这个安装前缀`/opt/python`尚未使用）。

当我尝试运行新的二进制文件`/opt/python/bin/python`时，Python 宣布其版本为 2.7，而不是 2.7.3。我发现纠正此问题的唯一方法是将系统的`/usr/lib64/libpython2.7.so.1.0`, 并将其符号链接到`/opt/python/lib/python/libpython2.7.so.1.0`. 这有效，Python 宣布它是 2.7.3，但这破坏了系统 Python。

无论如何我可以让两者共存，例如通过`/opt/python`使用它自己的libpython？除了在运行时提供 LD_LIBRARY_PATH。有编译时解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-23T14:44:03.583

为了避免`LD_LIBRARY_PATH`每次启动 Python 时都必须指定运行时库路径，您可以在构建时使用`-rpath`链接器选项指定它：

```
./configure --enable-shared --prefix=/opt/python \
            LDFLAGS=-Wl,-rpath=/opt/python/lib 
```

# performance - 矩阵乘法 > for 循环 > bsxfun - 奇数速度结果

> ID：12553064
> 
> 赞同：4
> 
> 时间：2012-09-23T14:15:55.830
> 
> 标签：performance, matlab, loops, matrix, bsxfun

我有一个 n × n 矩阵 A、一组 n 系数 k（n × 1）和称为行（1 × n）的矩阵。我的目标是从 A 的第 i 行中减去由 k 中的第 i 个系数加权的行。我有三个问题：为什么我的 for 循环比内置矩阵乘法执行得更好，一般来说，是什么解释了每种方法优于下一个，还有比我想出的三个更好的方法吗？

```
% Define row & coefficients used in each method
k = (1:1000).';
row = 1:1000;

% Method 1 (matrix multiply) ~15 seconds
A = magic(1e3);
tic;
for z = 1:1e3
    A = A - k*row;
end
toc;
% Method 2 (for loop) ~11 seconds
B = magic(1e3);
tic;
for z = 1:1e3
    for cr = 1:1000
        B(cr,:) = B(cr,:) - k(cr)*row;
    end
end
toc;
% method 3 (bsxfun) ~ 4 seconds
C = magic(1e3);
tic;
for z = 1:1e3
    C = C - bsxfun(@times, k, row);
end
toc

isequal(A,B)
isequal(A,C) 
```

请注意，我正在算法中进行这些行减法。我稍微简化了代码，创建了这个玩具测试用例，但计算的关键仍然存在。此外，为避免混淆，使用带有 z 的 for 循环来使时间变长。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T18:26:48.523

**简短的回答**：您的代码的更快版本是这样的：

```
tic;
for z = 1:1e3
    for cr = 1:1000
        B(:,cr) = B(:,cr) - k*row(cr);
    end
end
toc; 
```

你可能想看看我之前对[这个问题](https://stackoverflow.com/questions/12522888/arrayfun-can-be-significantly-slower-than-an-explicit-loop-in-matlab-why/12526940#12526940)的回答。简而言之，您的循环对行进行操作，而 MATLAB 是基于列的。这意味着列在内存中是连续的。您的原始循环遍历行，这是低效的。

我的电脑上的执行时间：

```
% A - k*row
Elapsed time is 4.370238 seconds.
% B(cr,:) = B(cr,:) - k(cr)*row;
Elapsed time is 9.537338 seconds.
% C = C - bsxfun(@times, k, row);
Elapsed time is 3.039836 seconds.
B(:,cr) = B(:,cr) - k*row(cr);
Elapsed time is 2.028186 seconds. 
```

**解释**。您的第一个版本不是矩阵乘法，而是两个向量的外积，导致大小为 1000 x 1000 的矩阵。孔计算是 BLAS2 秩 1 更新（A=alpha *x* y'+A 是 GER 函数） . 最有可能的问题是 MATLAB 无法识别它，而是按照它理解的方式运行代码，即显式执行包括 k*row 在内的所有操作。这正是该解决方案的问题所在。外部产品必须分配大小等于矩阵大小的额外内存，这本身需要时间。考虑一下：

*   内存分配 - 由于我们不知道 MATLAB 如何管理内存分配，这可能意味着[**很多开销**](https://stackoverflow.com/questions/12251252/c-memcpy-speed-on-dynamically-allocated-arrays)。
*   读取向量 k，行
*   写入结果矩阵 (KR)
*   读取 KR 以从 A 中减去它
*   A的读写

两个 1000*1000 矩阵是 16 MB - 我怀疑你有这么多缓存。这就是为什么这个版本不是最好的原因，并且实际上可能比“内存效率低”循环慢，具体取决于可用的内存带宽和 CPU 缓存大小。

无需分配 KR 矩阵并将值显式存储在内存中 - 您可以在循环中计算所需的产品。因此，您有效地将内存带宽需求减半并消除了内存分配开销！

*   读取向量 k，行
*   读写A

假设一个向量适合缓存（它确实 - 1000*8 字节并不多），您只从内存中读取 k 和 row 一次。现在，对列进行循环的算法非常有意义（这可能是 BLAS 实现此计算的方式）

*   读取 k 和 row 并将它们保存在缓存中
*   stream A with full memory bandwidth to the CPU, subtract k*row product, stream back to memory

Now the final efficiency considerations. Take my loop structure. In every iteration we read and write A, and read the vectors. That is 16MB of data moved per iteration. 1000 iterations gives 16 GB of data moved in total. Two seconds required to compute the result gives 8GB/s effective memory bandwidth. My system has 16GB/s stream bandwidth when using 2 CPU cores, around 11-12 GB/s when using one. Hence, this sequential loop runs at 60-70% efficiency on one core. Not bad, considering this is a **MATLAB loop** :)

Note also that, at least on my computer, column-based loop version is (a bit more than) twice faster than the A-k*row implementation (2s vs 4.37s). This strongly indicates that k*row is indeed explicitly executed and constructed by MATLAB, and the total memory traffic is two times larger than in the looped version. Hence twice worse performance.

**Edit** You can still try to do it like in the first algorithm by calling directly the corresponding BLAS function. Have a look at [this FEX contribution](http://www.mathworks.com/matlabcentral/fileexchange/16777-lapack). It allows you to call BLAS and LAPACK functions directly from MATLAB. Might be useful..

# plugins - Sublimetext 2 的一个很好的免费 ftp 插件

> ID：12553065
> 
> 赞同：49
> 
> 时间：2012-09-23T14:15:58.387
> 
> 标签：plugins, ftp, sublimetext2

我是 Sublimetext 的新手，想知道有什么好的免费 FTP 插件可以使用它。认为编辑器必须有一些内置的东西。我见过开发人员使用某种 FTP 插件。反馈表示赞赏。

我在 Mac Moutain Lion 上，所以各自的解决方案都很棒。

谢谢。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-12-28T06:12:30.037

我使用的 sftp 包确实有一个永不过期的无限试用版。您将不得不忍受偶尔的唠叨屏幕。除此之外，请尝试包控制中列出的 ftp 包。非常基本和免费，但可以做你想做的事。这是[Github 上 FTPSync](https://github.com/NoxArt/SublimeText2-FTPSync)站点的链接，以便您在安装前阅读它。我在我所属的俱乐部中有一个人使用这个 ftp 代码，这样当他每个月更新一个页面时，它就会自动上传到网站。用户不需要做任何事情，除了打开 Sublime，添加他需要添加的行并保存页面，网站就会更新。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-23T14:40:38.857

我一直在使用[WBond 的 SFTP，对此](http://wbond.net/sublime_packages/sftp)我很满意。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-08-15T09:25:30.973

有一些程序可以让您同步本地和远程目录。我个人使用 WinSCP - 一个非常好的免费 FTP 客户端，具有很多功能。同步就是其中之一，它工作得很好。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-13T19:17:36.930

有一个替代解决方案。我使用[SFTP 网络驱动器](http://sftpnetdrive.com/)在 Windows 上运行良好，（免费版本符合我的需要）然后只需将您的应用程序文件夹安装为任何“普通”文件夹。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-25T20:05:24.387

您可以使用 eq Webdrive，但最好禁用 Sublime 中的索引文件，否则 sublime 将尝试从 ftp 下载/索引/列出所有文件。

* * *

是的，您可以使用其他解决方案，但没有什么比 Notepad++ FTP 更好的了，太难过了

# c# - Instant search asp.net

> ID：12553066
> 
> 赞同：1
> 
> 时间：2012-09-23T14:15:59.060
> 
> 标签：c#, javascript, asp.net, ajax

I want to do an instant search(on key down make the search) for my website and I don't really know any good way to do it. Until now I did my search on 'enter' key.

I have this code:

```
<div id="mainsearch" class="search">
       <input class="text-input" value="SEARCH" style="color:#aaa" type="text" id="searchbox" onkeydown="if (event.keyCode == 13){document.getElementById('searchLink').click();return false;}" maxlength="50" runat="server" />
       &nbsp;&nbsp;
       <asp:LinkButton ID="searchLink" runat="server" onclick="searchLink_Click">Search</asp:LinkButton>

       <div id="results" visible="false" class="ac_results" style="position: absolute; width: 298px;" runat="server">
             <asp:Literal ID="litActiveSearch" runat="server"></asp:Literal>
       </div>
</div> 
```

and on my code behind:

```
 protected void searchLink_Click(object sender, EventArgs e)
    {
        results.Visible = true;
            litActiveSearch.Text = SearchResults(searchbox.Value);
    }

    private string SearchResults(string searchString = "")
    {

        SqlCommand projectCom = new SqlCommand();
      ....
        countCom.CommandText = "SELECT count(ID_PROJECT) FROM PROJECT WHERE TITLE LIKE '%" + searchString + "%' AND DELETE_BIT = 'False' ";

        countCom.CommandType = CommandType.Text;
        //int projectRowCount=0,actorRowCount=0,mediaRowCount = 0;

        int RowCount = 0;
        RowCount = Convert.ToInt32(countCom.ExecuteScalar());

        /*str += "<div class=\"ac_results\" style=\"position: absolute; width: 251px; top: 110.4444465637207px;" +
            "left: 1010.8776870117188px;\">";*/

        str += "<ul>";

        str += " <li class=\"ac_even ac_over\"><a href=\" ../search/search.aspx?q=" + searchString + " \" class=\"startsearch\">St<strong>a</strong>rt <strong>" +
                    "a</strong> full se<strong>a</strong>rch &gt;</a>" +
                "</li>";

        str += " <li class=\"ac_odd\">" +
                    "<span class=\"category\">" +
                        "Projects<a class=\"more\" href=\" ../search/searchProjects.aspx?q=" + searchString + " \" >" + RowCount.ToString() + " results &gt;</a>" +
                    "</span>" +
                "</li>";

    //************ Now show the results ************//
        projectCom.CommandText = "SELECT TOP 3 ID_PROJECT,TITLE,COUNTRY FROM PROJECT WHERE TITLE LIKE '%" + searchString + "%' AND DELETE_BIT = 'False'";
....
} 
```

on `SearchResults()` method I run my query which makes a connection with my database in order to get the results on the screen.

It is my first time doing a website, so I don't really know anything.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T14:40:22.717

这是一个替代方案

```
<asp:UpdatePanel runat="server" id="UpdatePanel2" updatemode="Always">
 <ContentTemplate>
    <asp:TextBox ID="searchbox" OnTextChanged="searchbox_TextChanged" 
         runat="server" AutoPostBack="true"/>          
 </ContentTemplate>
</asp:UpdatePanel> 
```

背后的代码

```
protected void searchbox_TextChanged(object sender, EventArgs e)
{
   litActiveSearch.Text = SearchResults(searchbox.Text);
} 
```

请记住，它`litActiveSearch`也应该在内部`UpdatePanel`以更新其值

**编辑**

如果`litActiveSearch`在另一个里面`UpdatePanel`，你需要`UpdatePanel`像这样配置

```
<asp:UpdatePanel ID="UpdatePanel3" runat="server">
   <ContentTemplate>
       <asp:Literal ID="litActiveSearch " runat="server"></asp:Literal>
   </ContentTemplate>                                
   <Triggers>
        <asp:AsyncPostBackTrigger ControlID="searchbox" EventName="TextChanged">
        </asp:AsyncPostBackTrigger>
   </Triggers>
</asp:UpdatePanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T19:06:09.337

我使用 AJAX 来解决这个问题。我在不同的 .aspx 文件 (searchHelper.aspx) 中使用了我的 SearchResults() 函数，并使用下面的 ajax 代码来调用它：

```
 function getSearchResults(e) {

            var searchString = e.value; //document.getElementById("searchbox").value;

            if (searchString == "") {
                document.getElementById("results").innerHTML = "";
                return;
            }
            var xmlhttp;
            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            else {// code for IE6, IE5
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    document.getElementById("results").innerHTML = xmlhttp.responseText;
                }
            }
            xmlhttp.open("GET", "<%=Page.ResolveUrl("~/template/searchHelper.aspx?searchString=")%>"+searchString, true);

            xmlhttp.setRequestHeader("If-Modified-Since", "Sat, 1 Jan 2000 00:00:00 GMT"); //solve any AJAX caching problem(not refreshing)
            xmlhttp.send();
 } 
```

我的链接是这样的：

```
<input class="text-input idle" value="SEARCH" type="text" id="searchbox" onkeyup="javascript:getSearchResults(this);" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:16:16.727

这是一个完整的工作示例，希望对您有所帮助

**aspx**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <div>
        <asp:TextBox ID="searchbox" OnTextChanged="searchbox_TextChanged" runat="server"
            onkeydown="javascript:setTimeout('__doPostBack(\'searchbox\',\'\')', 0)" />
        <asp:UpdatePanel ID="UpdatePanel3" runat="server">
            <ContentTemplate>
                <asp:Literal ID="litActiveSearch" runat="server"></asp:Literal>
            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="searchbox" EventName="TextChanged"></asp:AsyncPostBackTrigger>
            </Triggers>
        </asp:UpdatePanel>
    </div>
    </form>
</body>
</html> 
```

**aspx.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void searchbox_TextChanged(object sender, EventArgs e)
    {
        litActiveSearch.Text = SearchResults(searchbox.Text);        
    }

    private string SearchResults(string searchString)
    {
        if (string.IsNullOrEmpty(searchString))
            return "";

        var datasource = new[]
        {
            new {IdProject = 1, Title = "abcd"},
            new {IdProject = 2, Title = "aabcd"},
            new {IdProject = 3, Title = "bcde"},
            new {IdProject = 4, Title = "defgh"},
            new {IdProject = 4, Title = "defghi"}
        };

        string str = "";

        var query = from p in datasource
                    where p.Title.StartsWith(searchString)
                    select p;

        str += "<ul>";

        str += " <li class=\"ac_even ac_over\"><a href=\" ../search/search.aspx?q=" + searchString + " \" class=\"startsearch\">St<strong>a</strong>rt <strong>" +
                    "a</strong> full se<strong>a</strong>rch &gt;</a>" +
                "</li>";

        str += " <li class=\"ac_odd\">" +
                    "<span class=\"category\">" +
                        "Projects<a class=\"more\" href=\" ../search/searchProjects.aspx?q=" + searchString + " \" >" + query.Count().ToString() + " results &gt;</a>" +
                    "</span>" +
                "</li>";
        return str;
    }
} 
```

# asp.net-mvc-4 - _AppStart.cshtml, PackageManager, WebMatrix

> ID：12553072
> 
> 赞同：5
> 
> 时间：2012-09-23T14:17:16.027
> 
> 标签：asp.net-mvc-4

I thouht it would be a simple thing to add SimpleMembersihp to an MVC4 web. Not so. The templated code (e.g. C#) is well-suited to supporting it, but web.config is mostly agnostic-- devoid of elements that would configure any particular security mechanism. I was following Scott Allen's MVC4 tutorial on Pluralsight-- that mixed aspnet-Membership with EF stuff. Maybe I missed something, but C# membership-classes were not interacting with aspnet-Membership, they were doing SimpleMembership. So, I removed aspnet-Membership, but now I cannot get PackageManager to 'update-database'. It complains "You must call the WebSecurity.InitializeDatabaseConnection method...". So, I added an _AppStart.cshtml file with the call, but PM seems unaware. _AppStart.cshtml:

```
@using WebMatrix.WebData;
@{
    WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", true);
} 
```

Web.config:

```
 <appSettings>
    <add key="enableSimpleMembership" value="true" />
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>

   <roleManager enabled="true" defaultProvider="simple">
     <providers>
        <clear/>
        <add name="simple" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData" />
      </providers>
    </roleManager>

    <membership defaultProvider="simple">
      <providers>
        <clear/>
        <add name="simple" type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData" />
      </providers>
    </membership 
```

Configuration.cs:

```
protected override void Seed(eManager.Web.Infrastructure.DepartmentDb context)
{
    context.Departments.AddOrUpdate(d => d.Name,
      new Department() { Name = "Engineering" },
      new Department() { Name = "Sales" },
      new Department() { Name = "Shipping" },
      new Department() { Name = "Human Resources" }
      );

    SimpleRoleProvider roles = new WebMatrix.WebData.SimpleRoleProvider();
    SimpleMembershipProvider membership = new SimpleMembershipProvider();
    if (!roles.RoleExists("Admin"))
    {
        roles.CreateRole("Admin");
    }

    //if (membership.GetUser("ej", false) == null)
    //{
        //    membership.CreateUserAndAccount("ej", "FluffyBunny@1", false);
        //    string[] u = { "ej" };
        //    string[] r = { "Admin" };
        //    roles.AddUsersToRoles(u, r);
        //}
} 
```

The role "Admin" is not created.?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-30T11:36:21.980

尝试添加代码

`WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", true);`

到您的应用程序_开始于`global.asax.cs`

`_appStart.cshtml`在 MVC 中不使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T07:40:42.950

可能使用 _AppStart.cshtml 在 MVC4 中通过创建新文件并将其放在根文件夹中

```
@{
 // Initialize WebMail helper
 WebMail.SmtpServer = "your-SMTP-host";
 WebMail.SmtpPort = 25;
 WebMail.UserName = "your-user-name-here";
 WebMail.Password = "your-account-password";
 WebMail.From = "your-email-address-here";
 } 
```

[http://www.asp.net/web-pages/overview/ui,-layouts,-and-themes/18-customizing-site-wide-behavior#configuring_email_settings](http://www.asp.net/web-pages/overview/ui,-layouts,-and-themes/18-customizing-site-wide-behavior#configuring_email_settings)

# entity-framework - Entity Framework Migration cascade delete is always true even WillCascadeOnDelete(false) in configuration

> ID：12553073
> 
> 赞同：5
> 
> 时间：2012-09-23T14:17:17.380
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

Why relations with WillCascadeOnDelete(false) defined in configuration, are always true in generated migration?

**Here is the configuration code**

```
 public class PartySuppliesConfiguration:EntityTypeConfiguration<PartySupplies>
{
    public PartySuppliesConfiguration()
    {
        HasKey(x => x.Id);
        HasRequired(x=>x.Supplier).WithMany().HasForeignKey(x=>x.SupplierId).WillCascadeOnDelete(false);
        HasRequired(x => x.Product).WithMany().HasForeignKey(x => x.ProductId).WillCascadeOnDelete(false);
        HasRequired(x => x.Currency).WithMany().HasForeignKey(x => x.CurrencyId).WillCascadeOnDelete(false);
        HasRequired(x => x.CreatedUser).WithMany().HasForeignKey(x => x.CreatedUserId).WillCascadeOnDelete(false);
        Property(x => x.UnitPrice).HasColumnType("Money");
    }
} 
```

**and here is the generated migration**

```
 public override void Up()
    {
        CreateTable(
            "PartySupplies",
            c => new
                {
                    Id = c.Int(nullable: false, identity: true),
                    SupplierId = c.Int(nullable: false),
                    ProductId = c.Int(nullable: false),
                    UnitPrice = c.Decimal(nullable: false, precision: 18, scale: 2),
                    CurrencyId = c.Int(nullable: false),
                    FromDate = c.DateTime(nullable: false),
                    ThruDate = c.DateTime(),
                    CreatedUserId = c.Int(nullable: false),
                })
            .PrimaryKey(t => t.Id)
            .ForeignKey("Parties", t => t.SupplierId, cascadeDelete: true)
            .ForeignKey("Products", t => t.ProductId, cascadeDelete: true)
            .ForeignKey("Curencies", t => t.CurrencyId, cascadeDelete: true)
            .ForeignKey("Users", t => t.CreatedUserId, cascadeDelete: true)
            .Index(t => t.SupplierId)
            .Index(t => t.ProductId)
            .Index(t => t.CurrencyId)
            .Index(t => t.CreatedUserId);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:25:17.297

这可能是一个愚蠢的问题，但是您是否覆盖了 DbContext 中的 OnModelBuilding 方法并添加了`modelBuilder.Configurations.Add( new PartySuppliesConfiguration( ) );`？是否`PartySuppliers`有任何可能覆盖您的实体配置类的 DataAnnotations？或者它可能是从另一个 cascadeondelete 设置为 true 的类派生的？

# javascript - 为 slideToggle JQuery 选择多个 id

> ID：12553079
> 
> 赞同：2
> 
> 时间：2012-09-23T14:18:35.767
> 
> 标签：javascript, jquery, toggle

我有这样的 slideToggle 功能

```
$(document).ready(function(){
$(".widget-content-box").slideUp(); // $(".widget-content-box").hide()
$("#goal1").click(function(){
    $(this).parent().next().slideToggle("slow");
 });
}) 
```

我在 #goal1 的 id 上执行点击功能，并希望有多个 slideToggles，而不是使用 #goal1、#goal2、#goal3 等我可以使用什么？是id加attr吗？但是我将如何在代码中设置它，或者我在哪里可以找到资源来查找？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T14:26:18.180

如果您无法按照已经建议的方式修改 HTML 添加类，则可以使用“开头为”选择器`^`：

```
$("[id^=goal]").click(function(){
    $(this).parent().next().slideToggle("slow");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T14:20:32.653

给你的元素一个`goal`类，然后：

```
$(".goal").click(function(){
    $(this).parent().next().slideToggle("slow");
}); 
```

# javascript - Javascript regex for splitting by whitespace for accented chars

> ID：12553080
> 
> 赞同：0
> 
> 时间：2012-09-23T14:18:47.813
> 
> 标签：javascript, regex

I am trying to split string in javascript by whitespaces, but ignoring whitespaces enclosed in quotes. So I googled this regular expression :`(/\w+|"[^"]+"/g)` but the problem is, that this isn't working with accented chars like á etc. So please how should I improve my regular expression to make it work?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T14:47:43.793

这匹配不包含引号的非空格，并匹配引号之间的文本：

```
/[^\s"]+|"[^"]+"/g 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T14:34:08.443

那是因为`\w`只有匹配`[A-Za-z0-9_]`。要匹配**重音**`\x81-\xFF`字符，请添加包含 Latin-1 字符*和等*`à`的`ã`unicode块范围：

 *```
(/[\w\x81-\xFF]+|"[^"]+"/g) 
```

还有[这个](http://kourge.net/projects/regexp-unicode-block)站点，它对构建所需的 unicode 块范围非常有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T14:40:15.843

如果要匹配所有非空白字符而不是仅匹配字母数字字符，请替换`\w`为`\S`.*

# wordpress - How we can install a site-wide 301 rel=canonical forward?

> ID：12553082
> 
> 赞同：3
> 
> 时间：2012-09-23T14:19:17.937
> 
> 标签：wordpress, redirect, http-headers, canonical-link

I have a wordpress site for example www.example.com and it has more than 300 pages. I have installed a copy of our entire www.example.com site on a subdomain of the US site. For example the subdomain is [http://abc.tm.org/](http://abc.tm.org/) and this subdomain contain all the contents of example.com

Now is there any way to redirect my whole example.com site to abc.tm.org site? I want to use 301 rel=canonical redirect. Otherwise google may bann my site for duplicate content.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T17:23:59.447

首先， 301 和 rel=canonical 是两个不同的东西。如果您只想复制网站，而不是移动它，只需放置一个规范标签，例如：

```
<link rel="canonical" href="http://www.example.com/original-page-url/"/> 
```

在新的 abc.tm.org 网站上，它可以解决问题并阻止 google 生气。它基本上是在告诉谷歌“那是原始页面，你现在所在的这个 URL 也指向它”。...因此不会对重复内容进行处罚。

如果您想对整个原始站点进行 301 处理以便重定向用户，您需要在 .htaccess / apache 配置中添加一条规则。像这篇文章这样说： [http ://webdesign.about.com/od/mod_rewrite/qt/site_redirects.htm](http://webdesign.about.com/od/mod_rewrite/qt/site_redirects.htm)

希望有帮助！

# caching - CUDA 仅对一个变量禁用 L1 缓存

> ID：12553086
> 
> 赞同：13
> 
> 时间：2012-09-23T14:20:34.767
> 
> 标签：caching, assembly, cuda, cpu-cache, ptx

CUDA 2.0 设备上是否有任何方法可以仅为一个特定变量禁用 L1 缓存？我知道可以在编译时禁用 L1 缓存，为所有内存操作添加`-Xptxas -dlcm=cg`标志`nvcc`。但是，我只想对特定全局变量的内存读取禁用缓存，以便所有其余的内存读取都通过 L1 缓存。

根据我在网络上进行的搜索，可能的解决方案是通过 PTX 汇编代码。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-23T20:39:48.510

如上所述，您可以使用内联 PTX，这是一个示例：

```
__device__ __inline__ double ld_gbl_cg(const double *addr) {
  double return_value;
  asm("ld.global.cg.f64 %0, [%1];" : "=d"(return_value) : "l"(addr));
  return return_value;
} 
```

您可以通过将 .f64 替换为 .f32 (float) 或 .s32 (int) 等来轻松改变这一点，return_value "=d" 的约束为 "=f" (float) 或 "=r" (int)[等](http://docs.nvidia.com/cuda/inline-ptx-assembly/index.html#constraints)。注意 (addr) 之前的最后一个约束 - “l” - 表示 64 位寻址，如果您使用 32 位寻址，它应该是“r”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-23T16:56:22.707

内联 PTX 可用于加载和存储变量。ld.cg 和 st.cg 指令只缓存 L2 中的数据。[缓存操作符在PTX ISA 2.3](http://docs.nvidia.com/cuda/parallel-thread-execution/index.html#cache-operators)文档的 8.7.8.1 缓存操作符部分进行了描述。指令或兴趣是**ld**和**st**。[在 CUDA](http://docs.nvidia.com/cuda/inline-ptx-assembly/index.html#using-inline-ptx-assembly-in-cuda)中使用内联 PTX 程序集中描述了内联 PTX 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T17:59:02.660

如果您将变量声明为`volatile`，那么它将仅缓存在 Fermi GPU 的 L2 缓存中。请注意，某些编译器优化（例如删除重复加载）不会对 volatile 变量执行，因为编译器假定它们可能由另一个线程编写。

# asp.net - 使用 SQL/LINQ 过滤具有特定功能列表的产品

> ID：12553096
> 
> 赞同：0
> 
> 时间：2012-09-23T14:22:07.767
> 
> 标签：asp.net, sql, sql-server, linq

经过数小时的谷歌搜索和 stackoverflow 搜索，我迫切需要您对 Linq 问题的帮助。

想象两个表：

**表 A：产品**

```
ID(int)     | ProductName(varchar(50))
1___________|_______________A
2___________|_______________B
3___________|_______________C
... 
```

**表 B：产品特点**

```
ProductID(int)        | FeatureID(int)                | FeatureValue(smallint)
1_____________________|_________1_____________________|____________1
1_____________________|_________2_____________________|____________1  
1_____________________|_________3_____________________|____________0
2_____________________|_________1_____________________|____________0
2_____________________|_________2_____________________|____________1
3_____________________|_________1_____________________|____________1
3_____________________|_________2_____________________|____________1
... 
```

例如

```
FeatureID = 1 => "has WiFi" 
FeatureValue 1 = Yes / 0 = No. 
```

**表 C：**我还有一个功能描述表

```
FeatureID int, 
FeatureName varchar(50) 
```

在我的 ASP 应用程序中，我有一个面板，其中包含复选框/下拉列表等控件，并允许用户过滤产品列表。

因此，如果有人选择“笔记本电脑”类别，该页面将显示笔记本电脑列表，此外，他可以单击“带 WiFi”复选框等过滤器以缩小结果范围。

我的问题：

首先，过滤器控件填充一个列表，其中包含所请求的 FeatureID：

```
List<int> filters=getFilterPanelList(); 
```

如何从产品表中选择所有产品，其中产品的功能将至少包含过滤器列表？（在 SQL 或 Linq 脚本中）。

例如：如果控件生成列表 (1,3)，则 Linq 查询将仅返回产品 1，因为它至少包含 1 和 3 FeatureID。

我发现类似于下面的 SQL 查询，但“IN”运算符（或 Linq 中的“包含”函数）返回包含 FeatureID 1 或 FeatureID 3 但不是两者的所有产品：

```
SELECT ProductID 
FROM 
    Products P
    JOIN ProductFeatures PF ON PF.ProductID = P.ID
WHERE 
    PF.ProductID IN

SELECT ProductID 
FROM 
    ProductFeatures 
WHERE 
    FeatureID IN @FilterList)" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T15:22:15.873

在 Linq 中：

```
from p in products
where p.ProductFeatures.Count(pf => filters.Contains(pf.FeatureID)) == filters.Count
select p 
```

我假设一种产品没有超过一个相同类型的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T17:10:00.507

在这种情况下，您希望获得具有两种产品功能的产品。所以我的建议是修改你的 sql：

> SELECT distinct PF.ProductID
> FROM Products P
> JOIN ProductFeatures PF ON PF.ProductID = P.ID WHERE PF.ProductID IN
> ( SELECT ProductID
> FROM ProductFeatures
> WHERE FeatureID IN (@FilterList) and FeatureValue=1 --添加此条件将确保所有功能都选择是）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T05:25:59.297

非常感谢您的所有帮助……您的迅速反应和出色的回答对我来说是真正的救星。

我将缓存这些表（使用 SQLDataReader 查询 SQL Server 并使用这两个表加载数据集），每次我从缓存中检索它们时，我都会使用 LINQ To DataSet..

所以我修改了关系除法案例的 SQL 脚本（来自 tc.umn.edu/~hause011/code/SQLexample.txt）并制作了下面的 LINQ To DataSet 脚本：

```
List<int> FilteredProductIDs = 
      (from p1 in Products where !filters.Any(l => !Products.Any(
      p2 => (p2.Field<int>("ProductID") == p1.Field<int>("ProductID"))
                                  && (p2.Field<int>("FeatureID") == l)))
                            select p1.Field<int>("ProductID")).ToList<int>(); 
```

我希望它可能对其他有类似问题的人有用....再次感谢。

# php - MySQL - Can't update multiple columns

> ID：12553105
> 
> 赞同：1
> 
> 时间：2012-09-23T14:23:13.867
> 
> 标签：php, mysql, sql, database

Whenver i try to update my columms in a selected row from PHP, it passed through without error, but it doesn't update in the database.

```
$query = "UPDATE news SET title = '$title', 
                  cover = '$cover', desc = '$newz', category = '$category' 
        WHERE id = $newz_select_id"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T14:24:26.283

`desc` is a **[reserved keyword in MySQL](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)**. Escape it with backtick ( ` ) instead.

```
$query = "UPDATE news SET title = '$title', 
              cover = '$cover', `desc` = '$newz', category = '$category' 
    WHERE id = $newz_select_id"; 
```

by the way, your code is very susceptible to sql injection. in order to avoid it, please study and use PHP PDO or PHP mySQLi Extensions.

[See this Link: Best way to prevent SQL Injection](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

# text - 记事本（Windows默认编辑器）可以存储字体大小吗？

> ID：12553106
> 
> 赞同：0
> 
> 时间：2012-09-23T14:23:16.673
> 
> 标签：text, fonts, font-size, notepad

我很想知道我可以在记事本中显示任何 txt 文件的字体大小，实际上它是写的吗..？

实际上，我渴望**Windows 默认编辑器**记事本可以记住文件的字体大小，例如，我从互联网收到了一个 txt 文件，我想知道它是用哪种字体大小写的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T14:42:26.070

不，纯文本文件不存储任何元数据，只存储文本本身。

# java - Java SOAP - Product Advertising API - Response Empty

> ID：12553107
> 
> 赞同：0
> 
> 时间：2012-09-23T14:23:20.793
> 
> 标签：java, soap, amazon, amazon-product-api

I've created a Search-Request to the amazon product API but it's response is empty. Can you give me a hint what's wrong with my code?

Code:

```
String awsAccessKeyID = "<AWS-KEY>";
String test = "<ASSOCIATE-TAG>"; 

AWSECommerceService service = new AWSECommerceService();
service.setHandlerResolver(new AwsHandlerResolver("<SECRET-KEY>"));

AWSECommerceServicePortType port = service.getAWSECommerceServicePort();

ItemSearch ItemSearch = new ItemSearch();

ItemSearch.setAWSAccessKeyId(awsAccessKeyID);
ItemSearch.setAssociateTag(test);

ItemSearchRequest SearchRequest = new ItemSearchRequest();

java.util.List<ItemSearchRequest> list = ItemSearch.getRequest();

list.add(SearchRequest);

SearchRequest.setSearchIndex("All");

SearchRequest.setKeywords("nas");

ItemSearch.getRequest().add(SearchRequest);
ItemSearch.setMarketplaceDomain("https://ecs.amazonaws.de/onca/xml?Service=AWSECommerceService");

SearchRequest.getResponseGroup().add("Large");

Holder<OperationRequest> operationrequest = new Holder<OperationRequest>();

Holder<java.util.List<Items>> items = new Holder<java.util.List<Items>>();

port.itemSearch(ItemSearch.getMarketplaceDomain(), ItemSearch.getAWSAccessKeyId(), ItemSearch.getAssociateTag(), ItemSearch.getXMLEscaping(), "True", ItemSearch.getShared(), ItemSearch.getRequest(), operationrequest, items);

java.util.List<Items> result = items.value;
System.out.println(result); 
```

The ResultSet is still empty but no errors occured....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:25:22.530

我发现了我犯的错误。

我创建了没有亚马逊 wsdl 所需的 JAXB 绑定条件的源。您需要一个包含以下限制的 binding.xml 文件

```
<jaxws:bindings wsdlLocation="http://webservices.amazon.com/AWSECommerceService/AWSECommerceService.wsdl" xmlns:jaxws="http://java.sun.com/xml/ns/jaxws">
  <jaxws:enableWrapperStyle>false</jaxws:enableWrapperStyle>
</jaxws:bindings> 
```

在 pom.xml 中，我为构建过程创建了以下部分

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>jaxws-maven-plugin</artifactId>
    <version>1.10</version>
    <executions>
<execution>
        <goals>
            <goal>wsimport</goal>
        </goals>
        <configuration>
            <wsdlUrls>
                <wsdlUrl>http://webservices.amazon.com/AWSECommerceService/AWSECommerceService.wsdl</wsdlUrl>
            </wsdlUrls>
            <sourceDestDir>target/generated-sources/apt</sourceDestDir>
            <bindingFiles>
                <bindingFile>../../conf/binding.xml</bindingFile>
            </bindingFiles>
        </configuration>
        <id>wsimport-generate-AWSECommerceService</id>
        <phase>generate-sources</phase>
    </execution>
    </executions>
    <dependencies>
        <dependency>
            <groupId>javax.xml</groupId>
            <artifactId>webservices-api</artifactId>
            <version>1.4</version>
        </dependency>
    </dependencies>
</plugin> 
```

在重新创建资源后，我将请求更改为以下内容：

```
String awsAccessKeyID = "<AWS-ACCESS-KEY>";
String test = "<ASSOCIATE-TAG>"; 

AWSECommerceService service = new AWSECommerceService();
service.setHandlerResolver(new AwsHandlerResolver("<SECRET-KEY>"));

AWSECommerceServicePortType port = service.getAWSECommerceServicePort();

ItemSearchRequest itemRequest = new ItemSearchRequest();

// Fill in the request object:
itemRequest.setSearchIndex("Electronics");
itemRequest.setKeywords("NAS");
itemRequest.getResponseGroup().add("ItemAttributes");
itemRequest.setItemPage(BigInteger.valueOf(1L));

ItemSearch ItemElement = new ItemSearch();
ItemElement.setAWSAccessKeyId(awsAccessKeyID);
ItemElement.setAssociateTag(test);
ItemElement.getRequest().add(itemRequest);

ItemSearchResponse response = port.itemSearch(ItemElement);

for (Items itemList : response.getItems()) {
    for (Item itemObj : itemList.getItem()) {
        System.out.println(itemObj.getItemAttributes().getBrand());
        System.out.println(itemObj.getItemAttributes().getEAN());
    }
} 
```

# entity-framework - 实体框架不生成 JsonIgnoreAttribute

> ID：12553116
> 
> 赞同：1
> 
> 时间：2012-09-23T14:25:06.467
> 
> 标签：entity-framework, entity-framework-4, asp.net-mvc-4, asp.net-web-api, json.net

我正在尝试从实体框架 4 edmx 生成的 MVC 4 web api ApiController 对象返回，并带有 accept:json/application。

问题是 json 格式化程序还返回导航属性，我不想返回（我只想返回原始属性）。

所以我查看了生成的实体框架4代码，在导航属性中，只有XmlIgnoreAttribute和SoapIgnoreAttribute，而我需要JsonIgnoreAttribute。

我无法更改生成的代码，因为它将在 edmx 的下一次更改中被覆盖，那么如何配置将使用 JsonIgnoreAttribute 生成模型生成？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T14:27:53.803

虽然我不知道这是错误还是不受支持的功能，但我建议您定义视图模型并让您的 API 控制器操作返回视图模型而不是 EF 自动生成的域模型。视图模型显然只包含您想要公开的属性。单个视图模型可以表示多个域模型的聚合。所以不要依赖任何 XmlIgnore、SoapIgnore、JsonIgnore、... 属性。依靠您的视图模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T14:56:45.940

好的，我知道该怎么做。我们需要以这种方式使用自定义 DefaultContractResolver：

```
public class ExcludeEntityKeyContractResolver : DefaultContractResolver
{
    private static Type mCollectionType = typeof(System.Data.Objects.DataClasses.RelatedEnd);

    protected override IList<JsonProperty> CreateProperties(Type type, MemberSerialization memberSerialization)
    {
        var members = GetSerializableMembers(type);

        IList<JsonProperty> properties = base.CreateProperties(type, memberSerialization);
        IList<JsonProperty> serializeProperties = new List<JsonProperty>();

        for (int i = 0; i < properties.Count; i++)
        {
            var memberInfo = members.Find(p => p.Name == properties[i].PropertyName);
            if (!memberInfo.GetCustomAttributes(false).Any(a => a is SoapIgnoreAttribute) && properties[i].PropertyType != typeof(System.Data.EntityKey))
            {
                serializeProperties.Add(properties[i]);
            }
        }
        return serializeProperties;
    }
} 
```

在 Global.asax 中：

```
 JsonSerializerSettings serializerSettings = new JsonSerializerSettings();
        serializerSettings.ContractResolver = new ExcludeEntityKeyContractResolver();
        var jsonMediaTypeFormatter = new JsonMediaTypeFormatter();
        jsonMediaTypeFormatter.SerializerSettings = serializerSettings;
        GlobalConfiguration.Configuration.Formatters.Insert(0, jsonMediaTypeFormatter); 
```

并且不用担心性能，因为在整个应用程序持续时间内，每种类型只会调用一次 CreateProperties :)

# python - 如何在scrapy中根据url过滤重复请求

> ID：12553117
> 
> 赞同：42
> 
> 时间：2012-09-23T14:25:06.860
> 
> 标签：python, web-crawler, scrapy

我正在使用带有 CrawlSpider 的 scrapy 为网站编写爬虫。

Scrapy 提供了一个内置的重复请求过滤器，它根据 url 过滤重复请求。此外，我可以使用CrawlSpider 的*规则*成员过滤请求。

我想要做的是过滤请求，例如：

```
http:://www.abc.com/p/xyz.html?id=1234&refer=5678 
```

如果我已经访问过

```
http:://www.abc.com/p/xyz.html?id=1234&refer=4567 
```

> **注意：** refer 是一个不影响我得到的响应的参数，所以我不在乎该参数的值是否发生变化。

现在，如果我有一个累积所有*id*的集合，我可以在我的回调函数*parse_item*（这是我的回调函数）中忽略它来实现这个功能。

但这意味着当我不需要时，我至少仍然在获取该页面。

那么我可以告诉scrapy它不应该根据url发送特定请求的方式是什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-28T13:15:35.627

您可以编写自定义中间件以进行重复删除并将其添加到设置中

```
import os

from scrapy.dupefilter import RFPDupeFilter

class CustomFilter(RFPDupeFilter):
"""A dupe filter that considers specific ids in the url"""

    def __getid(self, url):
        mm = url.split("&refer")[0] #or something like that
        return mm

    def request_seen(self, request):
        fp = self.__getid(request.url)
        if fp in self.fingerprints:
            return True
        self.fingerprints.add(fp)
        if self.file:
            self.file.write(fp + os.linesep) 
```

然后你需要在 settings.py 中设置正确的 DUPFILTER_CLASS

```
DUPEFILTER_CLASS = 'scraper.duplicate_filter.CustomFilter' 
```

它应该在那之后工作

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-15T04:56:43.693

在 ytomar 的带领下，我编写了这个过滤器，它纯粹基于通过检查内存集已经看到的 URL 进行过滤。我是一个 Python 菜鸟，所以如果我搞砸了，请告诉我，但它似乎可以正常工作：

```
from scrapy.dupefilter import RFPDupeFilter

class SeenURLFilter(RFPDupeFilter):
    """A dupe filter that considers the URL"""

    def __init__(self, path=None):
        self.urls_seen = set()
        RFPDupeFilter.__init__(self, path)

    def request_seen(self, request):
        if request.url in self.urls_seen:
            return True
        else:
            self.urls_seen.add(request.url) 
```

正如 ytomar 提到的，请务必将`DUPEFILTER_CLASS`常量添加到`settings.py`：

```
DUPEFILTER_CLASS = 'scraper.custom_filters.SeenURLFilter' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-19T12:45:35.723

[https://github.com/scrapinghub/scrapylib/blob/master/scrapylib/deltafetch.py](https://github.com/scrapinghub/scrapylib/blob/master/scrapylib/deltafetch.py)

该文件可能会对您有所帮助。该文件从 url 创建一个唯一 delta fetch key 的数据库，用户传入一个 scrapy.Reqeust(meta={'deltafetch_key':uniqe_url_key})。这可以让您避免过去已经访问过的重复请求。

使用 deltafetch.py​​ 的示例 mongodb 实现

```
 if isinstance(r, Request):
            key = self._get_key(r)
            key = key+spider.name

            if self.db['your_collection_to_store_deltafetch_key'].find_one({"_id":key}):
                spider.log("Ignoring already visited: %s" % r, level=log.INFO)
                continue
        elif isinstance(r, BaseItem):

            key = self._get_key(response.request)
            key = key+spider.name
            try:
                self.db['your_collection_to_store_deltafetch_key'].insert({"_id":key,"time":datetime.now()})
            except:
                spider.log("Ignoring already visited: %s" % key, level=log.ERROR)
        yield r 
```

例如。id = 345 scrapy.Request(url,meta={deltafetch_key:345},callback=parse)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-29T23:58:36.543

这是我基于scrapy 0.24.6的自定义过滤器。

在这个过滤器中，它只关心 url 中的 id。例如

`http://www.example.com/products/cat1/1000.html?p=1` `http://www.example.com/products/cat2/1000.html?p=2`

被视为相同的网址。但

`http://www.example.com/products/cat2/all.html`

将不会。

```
import re
import os
from scrapy.dupefilter import RFPDupeFilter

class MyCustomURLFilter(RFPDupeFilter):

    def _get_id(self, url):
        m = re.search(r'(\d+)\.html', url)
        return None if m is None else m.group(1)

    def request_fingerprint(self, request):
        style_id = self._get_id(request.url)
        return style_id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-28T13:59:13.507

在最新的scrapy中，我们可以使用默认的重复过滤器或扩展并拥有自定义的过滤器。

在蜘蛛设置中定义以下配置

`DUPEFILTER_CLASS = 'scrapy.dupefilters.BaseDupeFilter'`

# android - Android 自定义视图 onDraw

> ID：12553119
> 
> 赞同：0
> 
> 时间：2012-09-23T14:25:20.010
> 
> 标签：android, canvas, view, custom-controls

我正在尝试制作一个由另一个控件组成的控件。我尝试了很多方法，但似乎都没有效果......你问我为什么需要那个？因为

1.  我面临着不可能创建具有不同颜色阴影和渐变前景的 TextView
2.  我想制作一个卷文本，它将由这个自定义控件呈现

    ```
    public class MainMenuItem extends View {
        private MainMenuItemHelper firstLayerItem;
        private MainMenuItemHelper secondLayerItem;

        ...
        @Override
        protected void onDraw(Canvas canvas) {
            super.onDraw(canvas);
            secondLayerItem.draw(canvas);
            firstLayerItem.draw(canvas);
        }
    }

    public class MainMenuItemHelper extends TextView {
        private List<DrawCommand> commands;

        ...
        @Override
        protected void onDraw(Canvas canvas) {
            for (DrawCommand command : commands) {
                command.draw(canvas, getPaint());
                super.onDraw(canvas);
            }
        }
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:06:40.723

> 由另一个控件组成的控件

您至少需要一个类似的布局，`RelativeLayout`或者`LinearLayout`一个视图不能包含另一个视图。你需要一个`ViewGroup`代替。

我不知道你想在哪里以及如何放置它，但最简单的方法是简单地制作一个包含你的控件的 xml 文件，并像往常一样设置它们的样式。

阴影颜色可以定义`android:shadowColor`为为您的文本设置阴影。

使文本本身成为渐变可能非常棘手。

# c++ - 通过 C++ 和 Qt 访问 Googles Book API

> ID：12553122
> 
> 赞同：0
> 
> 时间：2012-09-23T14:26:13.067
> 
> 标签：c++, json, api, qt, google-books

我喜欢从[Google Books API](https://developers.google.com/books/)获取信息。

因此我需要像这样执行一个http请求：

[https://www.googleapis.com/books/v1/volumes?q=isbn:3826615956](https://www.googleapis.com/books/v1/volumes?q=isbn:3826615956)并检索 JSON 格式的文档。

然后有必要从文档中提取一些变量。所以我的问题是：

1.  Qt 中是否有任何类可以访问 JSON 文档和/或执行 http 请求。
2.  如果没有，我怎样才能用纯 C++ 来管理它？有没有类似的例子可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:29:05.133

这两个部分都由 Qt 支持，或者更确切地说是由 Qt + 第三方库支持：

对于 HTTP 请求，使用[QNetworkAccessManager](http://qt-project.org/doc/qt-4.8/QNetworkAccessManager.html)。该文档提供了一些如何触发请求的简单示例。

对于带有 Qt4 的 Json，您可以使用[QJson](http://qjson.sourceforge.net)，在 LGPL 下可用。（Qt 5 将支持 Json，请参见[此处](http://doc-snapshot.qt-project.org/5.0/json.html)，但 Qt4 中还没有）

# android - 计算 Base64 编码文件的 Post Content-Length 的大小

> ID：12553127
> 
> 赞同：4
> 
> 时间：2012-09-23T14:26:53.037
> 
> 标签：android, base64, http-post

我正在尝试将一些大文件从 Android 设备上传到 .Net Web 服务。此 Web 服务已设置为接受这些文件作为 POST 参数，并且这些文件必须作为 Base64 编码字符串发送。

我已经能够使用Christian d'Heureuse 的[这个](http://www.source-code.biz/base64coder/java/)库将文件转换为 Base64 字符串，以字节为单位计算字符串的大小并将其发送出去，但是我之前使用的方法涉及将整个文件加载到内存中在处理大文件时导致内存不足错误，这并不意外。

我一直在尝试将文件分块转换为Base64，并在转换时通过连接（使用数据输出流对象）流式传输这些数据，因此不需要一次性将整个文件加载到内存中在转换文件之前，我似乎无法准确计算出请求的 Content-Length 的大小——我通常看起来大约是 10 个字节——令人沮丧的是，它偶尔会起作用！

我还发现，在某些情况下，当这确实有效时，服务器会返回以下错误消息“Base64 字符数组的大小无效”。我认为这是填充字符的问题，但是我看不出我的代码有问题，对此问题的一些建议将不胜感激！

这是生成请求并流式传输数据的代码：

```
 try
{

    HttpURLConnection connection = null;

    DataOutputStream outputStream = null;

    DataInputStream inputStream = null;

    //This is the path to the file
    String pathToOurFile = Environment
            .getExternalStorageDirectory().getPath()
            + "/path/to/the/file.zip";

    String urlServer = "https://www.someserver.com/somewebservice/";

    int bytesRead, bytesAvailable, bufferSize;

    byte[] buffer;

    int maxBufferSize = 456;

    //The parameters of the POST request - File Data is the file in question as a Base64 String
    String params = "Username=foo&Password=bar&FileData=";

    File sizeCheck = new File(pathToOurFile);

    Integer zipSize = (int) sizeCheck.length();

    Integer paddingRequired = ((zipSize * 8) / 6) % 3;

    Integer base64ZipSize = ((zipSize * 8) / 6)
            + ((zipSize * 8) / 6) % 3;

    Integer paramLength = params.getBytes().length;

    //Code to work out the number of lines required, assuming we create a new
    //line every 76 characters - this is used t work out the number of
    //extra bytes required for new line characters
    Integer numberOfLines = base64ZipSize / 76;

    Log.i(TAG, "numberOfLines: " + numberOfLines);

    Integer newLineLength = System.getProperty("line.separator")
            .getBytes().length;

    //This works out the total length of the Content
    Integer totalLength = paramLength + base64ZipSize
            + (numberOfLines * newLineLength) + paddingRequired;

    Log.i(TAG, "total Length: " + totalLength);

    FileInputStream fileInputStream = new FileInputStream(new File(
            pathToOurFile));

    URL url = new URL(urlServer);

    connection = (HttpURLConnection) url.openConnection();

    connection.setDoInput(true);

    connection.setDoOutput(true);

    connection.setUseCaches(false);

    connection.setRequestMethod("POST");

    connection.setRequestProperty("Connection", "Keep-Alive");

    connection.setRequestProperty("Content-Type",
            "application/x-www-form-urlencoded;");

    connection.setRequestProperty("Content-Length", ""
            + totalLength); // number of bytes

    outputStream = new DataOutputStream(
            connection.getOutputStream());

    //Write out the parameters to the data output stream
    outputStream.writeBytes(params);

    bytesAvailable = fileInputStream.available();

    bufferSize = Math.min(bytesAvailable, maxBufferSize);

    buffer = new byte[bufferSize];

    bytesRead = fileInputStream.read(buffer, 0, bufferSize);

    Integer totalSent = paramLength;

    Integer enLen = 0;

    //Convert the file to Base64 and Stream the result to the
    //Data output stream
    while (bytesRead > 0)
    {
        String convetedBase64 = Base64Coder.encodeLines(buffer);
        convetedBase64 = convetedBase64.replace("=", "");

        if (totalSent >= (totalLength - 616))
        {
            Log.i(TAG, "about to send last chunk of data");
            convetedBase64 = convetedBase64.substring(0,
                    convetedBase64.length() - 1);
        }

        Log.i(TAG,
                "next data chunk to send: "
                        + convetedBase64.getBytes().length);
        Log.i(TAG, "'" + convetedBase64 + "'");

        enLen = enLen + convetedBase64.length();
        outputStream.writeBytes(convetedBase64);

        totalSent = totalSent + convetedBase64.getBytes().length;

        Log.i(TAG, "total sent " + totalSent);
        Log.i(TAG, "actual size: " + outputStream.size());

        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        buffer = new byte[bufferSize];
        bytesRead = fileInputStream.read(buffer, 0, bufferSize); // read
                                                                    // into
                                                                    // the
                                                                    // buffer
    }

    Log.i(TAG, "enLen: " + enLen);
    Log.i(TAG, "paddingRequired: " + paddingRequired);

    for (int x = 0; x < paddingRequired; x++)
    {
        outputStream.writeBytes("=");
    }

    InputStream is2 = connection.getInputStream();
    String output = IOUtils.toString(is2);
    Log.i(TAG, "Got server response: " + output);
    fileInputStream.close();
    outputStream.flush();
    outputStream.close();
}
catch (Exception ex)
{
    Log.e(TAG, "caught an exception:" + ex.getMessage());
} 
```

如果有人能指出我的代码中可能导致这种情况的任何错误，或者提出一种更好的转换和上传文件的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:21:38.463

太好了......我确实设法找到了一些解决这个问题的方法，以防万一有人偶然发现这个问题，我会把它们留在这里：

第一个是将数据写入一个临时文件，这样我就可以在转换后以字节为单位获得大小 - 一开始似乎是个好主意，但效率低下，在发现其他方法后似乎很愚蠢。

另一种方法是不指定内容长度（我不知道你可以这样做！）。不幸的是，Android 仍然试图为上传分配足够的内存，这导致了问题。

如果您指定使用 ChunkedStreamingMode Android 的连接，则播放良好并缓冲上传，节省使用的 ram（除了 2.2 上的一个奇怪错误）。

代码如下：

```
httppost.setDoInput(true);
httppost.setDoOutput(true);
httppost.setRequestMethod("POST");
httppost.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
httppost.setChunkedStreamingMode(0); //This specifies the size of the chunks - 0 uses the system default

DataOutputStream dos = new DataOutputStream(httppost.getOutputStream());
dos.writeBytes(content); //This code write out the rest of the post body first, for example username or password

try
{
    BufferedInputStream dis = new BufferedInputStream(new FileInputStream("path/to/some/file"), 2048);

    byte[] in = new byte[512];

    while (dis.read(in)) > 0)
    {
        dos.write(Base64.encode(in, Base64.URL_SAFE)); //This writes out the Base64 data
                                                       //I used the web safe base64 to save URL encoding it again
                                                       //However your server must support this
        dos.write(newLine); //this write out a newline character
    }

dos.flush();
dis.close();
dos.close(); 
```

我希望这有帮助！！！

# mysql - 如何仅使用一条 sql 语句创建视图以达到此目标？

> ID：12553132
> 
> 赞同：2
> 
> 时间：2012-09-23T14:27:49.357
> 
> 标签：mysql, sql, sql-view

这是一个表1：

```
+--------------------+
| type | size | code |
+--------------------+
|   A  |  10  |   1  |
|   A  |   8  |   0  |
|   B  |   3  |   1  |
|   B  |   5  |   0  |
|   A  |   9  |   1  |
+--------------------+ 
```

现在我想创建一个视图来实现这些目标：

`1\. Group by "type" column`

`2\. calculate avg(size) for each "type"`

`3\. calculate the percent of "1" in "code" cloumn for "type"`

```
+----------------------------+
| type | avg(size) | percent |
+----------------------------+
|   A  |     9     |   2/3   |
|   B  |     4     |   1/2   |
+----------------------------+ 
```

创建这样的视图的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T14:30:57.477

试试这个，

```
CREATE VIEW viewName 
AS
SELECT `type`, 
       AVG(`size`),
       CONCAT(
              SUM(`code`), 
              '/',
              COUNT(`code`)
             ) percent
FROM table1
GROUP BY `type` 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/5a788/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T14:35:38.813

```
create view myview as
select 
    type,
    avg(size) as avg_size,
    concat(sum(code), '/', count(code)) as percent
from t1
group by type 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T14:34:55.677

假设 CODE 是一个数值：

```
select   
   t1.A as TYPE,   
   avg(SIZE) as AVGSIZE,   
   100 * sum(t1.CODE) / count(*) as PERCENT  
from TABLE1 as t1  
group by T1.TYPE; 
```

如果 CODE 不是数字，则可能需要对其进行转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T14:39:07.087

如果`code`是数字，并且您正在寻找作为浮点数而不是作为人类可读分数的百分比，那么您可以使用

```
SELECT type, AVG(size) AS avgsize, AVG(code) AS percent
  FROM table1
  GROUP BY type 
```

# floating-point - 如何使用 Doubles 模拟单精度舍入？

> ID：12553136
> 
> 赞同：16
> 
> 时间：2012-09-23T14:28:30.013
> 
> 标签：floating-point, double, floating-accuracy, ieee-754

我有一个问题，我试图重建现有系统中使用的公式，一个输入和一个输出的相当简单的公式：

```
y = f(x) 
```

经过一番困惑后，[我们](http://sacredduty.net/2012/09/14/avoidance-diminishing-returns-in-mop-followup/)设法找出了适合我们观察到的数据点的公式：

![在此处输入图像描述](../Images/2ac33418371cb1f91315a9481103946f.png)

正如你所看到的，我们的理论模型非常适合观察到的数据：

![在此处输入图像描述](../Images/492e7d18afc020494e8a291d0ff0388a.png)

除非我们绘制残差（即`y = f(x) - actualY`），否则我们会看到残差中出现一些线：

![在此处输入图像描述](../Images/57b2c6037f33e39112e2dbae6d1ca461.png)

很明显，这些线是在我们的公式中应用了一些中间舍入的结果，但在*哪里*并不明显。最终我们意识到**原来**的系统（我们试图逆向工程的系统）正在将值存储在一种中间**`Decimal`**数据类型中：

*   分数精度为8**位**
*   使用**0.5**舍入舍入模型：

我们可以通过以下方式*模拟*分数中的 8 位精度：

```
multiply by 128 (i.e. 2^8)
apply the round
divide by 128 (i.e. 2^8) 
```

将上面的等式更改为：

![在此处输入图像描述](../Images/b7adc784c51cccaea809cdfcb8f283e8.png)

*这显着*减少了残差：

![在此处输入图像描述](../Images/da7c23126863067f247a8d4f52a83e9c.png)

现在，以上所有内容都与我的问题无关，除了：

1.  表明在计算机中模拟数值表示可以帮助模型
2.  用漂亮的图片和颜色吸引人们的注意力
3.  在我[解释](https://stackoverflow.com/questions/7111618/win32-how-to-validate-credentials-against-active-directory)*为什么*我要问我的问题之前，[拒绝](https://stackoverflow.com/questions/12323303/how-to-inherit-from-control-rather-than-usercontrol)做出[贡献](https://stackoverflow.com/questions/2224220/win32-how-to-make-drop-shadow-honor-non-rectangular-layered-window)的批评者[保持沉默](https://stackoverflow.com/questions/11972829/how-to-call-use-net-rijndaelmanaged-from-native-com)

 ** * *

现在我想在**`Single Precision`**使用浮点数的编程语言（和 Excel）中模拟浮点数**`Double Precision`**。我想这样做是因为*我**认为***这是需要的。

在上面的示例中，我**认为**原始系统使用的是*`Decimal data type with fixed 8-bit fractional precision using 0.5 round-up rules`*. 然后我必须找到一种方法来用`Double`数学模拟该计算模型。现在我*认为*原始系统正在使用`Single`精确数学，我想使用`Double`.

> 如何使用双精度模拟单精度舍入？

在我当前的模型中，我再次有属于常规线性模式的残差 - 这是四舍五入的标志：

![在此处输入图像描述](../Images/76a2a787ed15c7935168fc2787e95154.png)

问题是随着我的输入变量变得更大，错误变得更大，并且只可见。我意识到这可能是由于所有浮点数都归一化为[IEEE 754](http://en.wikipedia.org/wiki/IEEE_floating_point) “科学记数法”这一事实引起的。

即使我错了，我仍然想尝试一下。

即使我不想尝试，我仍然在问这个问题

> 如何`Single`使用 模拟精确舍入`Doubles`？

* * *

在我看来，我仍然可以应用*“在 8 个小数位后舍入”*的概念（尽管`Single`精度浮点是 24 位），只要我可以首先*“规范化”*该值。例如

```
1234567898.76543 
```

需要转换为（类似于）：

```
1.23456789876543 E-09 
```

然后我可以将我的“轮到第 24 位”（即 2^24 = 16,777,216）

```
floor(1.23456789876543E-09 * 16777216 + 0.5) / 16777216; 
```

那么，问题是我可以应用什么组合`sign`, `abs`, `ln`, `exp`（或其他函数），以便我可以“规范化”我的值，将其舍入到第 n 个二进制位置，然后“去规范化”它？

**注意**：我意识到 IEEE 表示将二进制`1`作为最高有效位。我可能不需要复制该行为以获得正确的结果。因此，这不是交易破坏者，也不是暗示整个方法失败的理由。

# 也可以看看

*   [如何在 PHP 中模拟单精度浮点运算？](https://stackoverflow.com/questions/8130688/how-to-emulate-single-precision-float-operations-in-php)
*   [在 Matlab 中模拟单精度算术？](http://www.mathworks.cn/matlabcentral/answers/35085-simulate-single-precision-arithmetic-in-matlab)
*   [IEEE 754 浮点](http://en.wikipedia.org/wiki/IEEE_floating_point)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-23T16:31:17.430

您想使用库函数 frexp 和 ldexp，它们是标准 C99 函数，在 Lua 中可用。

frexp 采用浮点数并将尾数与指数分开。结果尾数为 0 或在 [0.5, 1.0) 或 (-1.0, 0.5] 范围内。然后您可以以明显的方式删除任何额外的位（`floor(mantissa * 2^k)/2^k`例如，对于非负值）。（编辑为add :) 在对 ldexp 的调用中从指数中减去 k 比如图所示进行除法更好，因为我很确定 Lua 不能保证 2^k 是精确的。

ldexp 是 frexp 的倒数；您可以使用它来将截断的数字重新组合在一起。

我不知道如何在 Excel 中执行此操作。检查手册:)（编辑添加:)我想你可以通过将数字除以2到数字的log 2的上限的幂，然后按照上面的指示进行二进制循环，得到大致相同的效果，然后反转该过程以重新创建原始指数。但我怀疑结果偶尔会遇到 Excel 关于算术的特殊想法的特殊性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-24T17:01:39.507

您可以使用以下方法获得舍入到单精度的大部分效果：

```
y = x + x * 0x1p29 - x * 0x1p29; 
```

在大多数情况下，这会在 y 中产生相同的结果，就像 x 已四舍五入为浮点数（32 位二进制 IEEE 754）然后转换回双精度数（64 位）。它的工作原理是添加一个值 (x * 0x1p29)，将 x 的一些位“推”出有效数字，导致第 23 位舍入，然后减去添加的值。（是 2 ^(29) , 536870912`0x1p29`的十六进制浮点数。 ）

在极少数情况下，它会产生略有不同的结果。如果您只是想减少模型中的噪音，这些罕见的情况可能可以忽略不计。如果你想消除它们，那么，你可以找到不大于 x 的 2 的最大幂，而不是加减 2 ^(29 x，然后加减 2) ^(29)倍而不是 2 ^(29) x。（要找到 2 的幂，您可以取以 2 为底的对数并取其底。但是，仍然存在可能需要补偿的舍入问题。此外，如果输入可能为零或负数，则必须避免取对数时发生的错误。）

此外，这不会重现在单精度中低于正常值或在单精度中溢出的数字的行为。

最后，在极少数情况下，计算双精度结果然后四舍五入到单精度产生的结果与最初计算单精度结果略有不同，并且没有任何四舍五入双精度结果的方法可以解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-13T14:36:16.407

使用这样的代码（C）：

```
double x, y;
/ ... y gets a double value somewhere ... /
x = (double)(float)y; 
```

之后，x (double) 将具有一个由 y 舍入产生的值作为单精度浮点数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-09T13:44:27.630

**您可以使用Excel VBA**中的模块创建自定义函数：

```
Function SINGLEFLO(Eingang As Double)
    Dim MySingle As Single
    MySingle = CSng(Eingang)
    SINGLEFLO = CDbl(MySingle)
End Function 
```

然后，您可以`SINGLEFLO()`在所有需要将精度限制为`Single Float`.*

# php - 在什么情况下我们应该将类构造函数设为私有

> ID：12553142
> 
> 赞同：37
> 
> 时间：2012-09-23T14:29:24.523
> 
> 标签：php, oop, constructor

> **可能重复：**
> [在 PHP5 类中，何时调用私有构造函数？](https://stackoverflow.com/questions/26079/in-a-php5-class-when-does-a-private-constructor-get-called)

我最近一直在阅读有关 OOP 的内容，并遇到了这个私有构造函数场景。我进行了谷歌搜索，但找不到与 PHP 相关的任何内容。

在 PHP 中

*   我们什么时候必须定义私有构造函数？
*   使用私有构造函数的目的是什么？
*   使用私有构造函数的优缺点是什么？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-23T14:46:53.717

在几种情况下，您可能希望将构造函数设为私有。常见的原因是在某些情况下，您不希望外部代码直接调用您的构造函数，而是强制它使用另一种方法来获取您的类的实例。

## 单例模式

*你只希望你的类的一个实例存在：*

```
class Singleton
{
    private static $instance = null;

    private function __construct()
    {
    }

    public static function getInstance()
    {
        if (self::$instance === null) {
            self::$instance = new self();
        }

        return self::$instance;
    }
} 
```

## 工厂方法

*您想提供几种方法来创建类的实例，和/或您想控制创建实例的方式，因为需要构造函数的一些内部知识才能正确调用它：*

```
class Decimal
{
    private $value; // constraint: a non-empty string of digits
    private $scale; // constraint: an integer >= 0

    private function __construct($value, $scale = 0)
    {
        // Value and scale are expected to be validated here.
        // Because the constructor is private, it can only be called from within the class,
        // so we can avoid to perform validation at this step, and just trust the caller.

        $this->value = $value;
        $this->scale = $scale;
    }

    public static function zero()
    {
        return new self('0');
    }

    public static function fromString($string)
    {
        // Perform sanity checks on the string, and compute the value & scale

        // ...

        return new self($value, $scale);
    }
} 
```

^([砖/数学的](https://github.com/brick/math)[BigDecimal](https://github.com/brick/math/blob/master/src/BigDecimal.php)实现的简化示例)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-09-23T14:38:11.170

**我们什么时候必须定义私有构造函数？**

```
class smt 
{
    private static $instance;
    private function __construct() {
    }
    public static function get_instance() {
        {
            if (! self::$instance)
                self::$instance = new smt();
            return self::$instance;
        }
    }
} 
```

**使用私有构造函数的目的是什么？**

它确保只能有一个类的一个实例，并为该实例提供一个全局访问点，这在单例模式中很常见。

**使用私有构造函数的优缺点是什么？**

*   [单身人士真的那么糟糕吗？](https://stackoverflow.com/questions/1020312/are-singletons-really-that-bad)

*   [单身人士有什么不好？](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-23T14:33:04.743

私有构造函数主要用于[Singleton 模式](http://en.wikipedia.org/wiki/Singleton_pattern)，您不希望直接实例化您的类，但您希望通过其`getInstance()`方法访问它。

这样你就可以确定没有人可以`__construct()`在课堂之外打电话。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-23T14:35:29.333

私有构造函数在两种情况下使用

1.  使用单例模式时 在这种情况下，只有一个对象，并且该对象通常由`getInstance()`函数创建
2.  当使用工厂函数生成对象时，这种情况下会有多个对象，但是对象会由静态函数创建，例如

    $token = 令牌::generate();

这将生成一个新的 Token 对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-23T14:35:20.027

私有构造函数大部分时间都在这里实现单例模式，或者如果您想强制使用工厂。当您想确保只有一个对象实例时，此模式很有用。它是这样实现的：

```
class SingletonClass{
    private static $instance=null;
    private function __construct(){}

    public static function getInstance(){
        if(self::$instance === null){
            self::$instance = new self; 

        }
        return self::$instance;
} 
```

# asp.net - Scope_Identity 会在不同的应用程序会话中工作吗？

> ID：12553148
> 
> 赞同：0
> 
> 时间：2012-09-23T14:30:28.323
> 
> 标签：asp.net, sql-server, sql-server-2008

我的 ASP.NET 应用程序正在使用 SQL Server 2008 后端。

我有一个 Web 表单，许多用户同时使用它来输入记录。当用户单击 SAVE 按钮时，存储过程将记录插入数据库。成功执行此存储过程后，我想选择此用户的最近记录 ID。也就是说，如果我要插入记录，我只想选择我输入的最后一条记录的 ID，而不是其他用户的 ID。

Scope_Identity 会在这种情况下工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T14:34:12.667

您需要从存储过程本身中调用该函数。退出后，该功能将不起作用。

您可能要考虑改为考虑该`OUTPUT`子句，以避免[在`Scope_Identity`](http://support.microsoft.com/kb/2019779).

# javascript - 如何修复 css 上的闭包编译器错误（{ float: 'left' }）

> ID：12553153
> 
> 赞同：0
> 
> 时间：2012-09-23T14:32:06.737
> 
> 标签：javascript, jqgrid, css-float, google-closure-compiler

> **可能重复：**
> [Google Closure Compiler 解析错误：无效的属性 ID`css({float:&#39;left&#39;})`](https://stackoverflow.com/questions/6611867/google-closure-compiler-parse-error-invalid-property-id-for-cssfloatleft)

我尝试使用闭包编译器

[http://closure-compiler.appspot.com/home](http://closure-compiler.appspot.com/home)

编译代码

```
// ==ClosureCompiler==
// @output_file_name default.js
// @compilation_level ADVANCED_OPTIMIZATIONS
// ==/ClosureCompiler==

css({ float: 'left' }) 
```

但有错误

```
JSC_PARSE_ERROR: Parse error. invalid property id at line 1 character 6
css({ float: 'left' }) 
```

如何解决？此代码用于在 stackoverflow 答案中发布的 Oleg jqGrid createContexMenuFromNavigatorButtons 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T14:34:33.697

`float`很可能会被识别为保留字（[虽然不是](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words)，但它[在 ES3 中](http://bclary.com/2004/11/07/#a-7.5.3)），因此使用起来应该是安全的

```
css({ "float": "left"}) 
```

# c++ - C++中动态分配内存的初始值

> ID：12553154
> 
> 赞同：4
> 
> 时间：2012-09-23T14:32:18.217
> 
> 标签：c++, memory, dynamic

在 C++ 中，当您动态分配 的数组时`int`， s 的值是`int`未定义的还是初始化为 0？

```
 int *array = new int[50]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T14:35:46.033

该术语**未初始化**。但这取决于您如何初始化数组。您可以*对其进行值初始化*：

```
int *array = new int[50](); 
```

并且值为0。

如果你让它未初始化，你就无法知道那里有什么值，因为从它们中读取将是未定义的行为。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-23T15:08:08.850

如果您使用向量而不是数组，您将获得所有元素的初始值 0：

```
std::vector<int> v(50); 
```

如果你想要一个不同的默认值，你可以指定一个：

```
std::vector<int> v(50, 42); 
```

向量的另一个好处是您不必手动释放底层数组。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-23T14:36:10.807

回答你的问题没有。但是有一种方法可以设置默认值。尝试：

```
int *arr = new int[SIZE]() ; 
```

以上是 C++ 标准，但可能不适用于所有编译器。安全的选择是使用循环并将其初始化为您选择的默认值。

```
for(int i=0; i < SIZE; i++)
{
  arr[i] = 1; //1 being my default value
} 
```

编辑：正如其他人指出的更好： [memset](http://www.cplusplus.com/reference/clibrary/cstring/memset/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-23T14:34:15.760

它们将是未定义的。只是垃圾，具体取决于初始化之前这些位置的内容

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-23T14:41:59.123

如果你写

```
int *array = new int[50]; 
```

那么数组中的值可以包含任何东西，但是如果你写

```
int *array = new int[50](); 
```

那么你将调用“默认构造函数”，一切都将是 0。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-23T14:34:02.993

它们更近，它们包含分配之前存在的任何数据。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-23T14:35:13.957

在 C/C++ 中，在内存中分配一个对象意味着简单地为该对象保留一些内存块。初始值基本上是那些块中存在的大部分时间随机值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-23T14:35:35.417

您需要假设它是垃圾，即使它可能经常（尤其是在调试版本中）被初始化为零或其他一些预定义的值指示未初始化的内存（如果不使用零，通常是一些[HexSpeak值）。](http://en.wikipedia.org/wiki/Hexspeak)

例如参见[http://www.nobugs.org/developer/win32/debug_crt_heap.html#table](http://www.nobugs.org/developer/win32/debug_crt_heap.html#table)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-23T14:51:36.187

标准完全未定义它，实际上仅取决于您的操作系统和编译器。在一些编译器中，它只是使用操作系统给你的任何东西，而在一些操作系统中，它会是 0，其他是垃圾，还有一些是其他东西。`memset`或者编译器可以在 a`malloc`或之后自动插入一个不可见的`new`。但无论如何，重点是，永远不要依赖价值。即使您当前版本的编译器将其设为 0，例如，这可能会在未来版本中发生变化，并且在另一个编译器上可能不会如此。

# windows - 将 html5 应用程序作为 Windows 可执行文件运行

> ID：12553155
> 
> 赞同：3
> 
> 时间：2012-09-23T14:32:27.843
> 
> 标签：windows, winforms, html, webkit

我在网上到处寻找这种东西，我发现了很多类似的问题和文章，但没有一个回答这个问题。我有一个大型 HTML 5 应用程序，我想将它作为 Windows 上的可执行文件作为全屏本机应用程序运行。我可以想象你可以稍后在 c++ 中通过 webkit 来做到这一点，但我不知道 c++ 并且没有时间彻底学习它。

谁能建议让我的 html5 应用程序作为全屏 Windows 应用程序运行的最佳方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T14:38:02.757

将文件扩展名重命名为`.hta`

这将使它成为一个[HTML 应用程序](http://en.wikipedia.org/wiki/HTML_Application)

把这个放在你的脑海里。

```
<hta:application
   showintaskbar = "no"
   caption = "no"
   border = "thick"
   contextmenu = "no"
   icon = "path_to_icon.ico"
   innerborder = "no"
   scroll = "no"
   singleinstance = "yes" 
   resizable = "no"
   windowState = "maximize"
> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T10:05:23.463

找到了一个解决方案，我下载了 Chromium 便携版并将应用程序文件放在同一个文件夹中，然后我使用 .bat 文件启动 chromium 便携版，如下所示：

```
@echo off
start %cd%/appdata/ChromiumPortable.exe --kiosk %cd%/appdata/app.html 
```

它告诉它以全屏模式启动并直接进入 app.html 主页，希望对其他人有所帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-04T21:21:20.310

这看起来很有希望：[http ://www.tidesdk.org/](http://www.tidesdk.org/)

您可以使用 HTML5 和 JavaScript 开发应用程序并将它们部署在 windows、linux 甚至 mac 上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T14:41:23.360

您可以使用 HTML5 CSS 和 JavaScript 创建 Windows 8 应用程序：http: [//dev.windows.com](http://dev.windows.com)

# php - 从他们的 IP 获取访问者所在的国家/地区

> ID：12553160
> 
> 赞同：252
> 
> 时间：2012-09-23T14:33:17.040
> 
> 标签：php, geolocation, ip, country-codes

我想通过他们的 IP 获得访问者的国家......现在我正在使用这个（[http://api.hostip.info/country.php?](http://api.hostip.info/country.php?ip=) ip= ......）

这是我的代码：

```
<?php

if (isset($_SERVER['HTTP_CLIENT_IP']))
{
    $real_ip_adress = $_SERVER['HTTP_CLIENT_IP'];
}

if (isset($_SERVER['HTTP_X_FORWARDED_FOR']))
{
    $real_ip_adress = $_SERVER['HTTP_X_FORWARDED_FOR'];
}
else
{
    $real_ip_adress = $_SERVER['REMOTE_ADDR'];
}

$cip = $real_ip_adress;
$iptolocation = 'http://api.hostip.info/country.php?ip=' . $cip;
$creatorlocation = file_get_contents($iptolocation);

?> 
```

好吧，它工作正常，但问题是，它返回的是国家代码，如 US 或 CA.，而不是整个国家名称，如美国或加拿大。

那么，除了 hostip.info 提供这个之外，还有什么好的选择吗？

我知道我可以编写一些代码，最终将这两个字母变成整个国家/地区名称，但是我懒得编写包含所有国家/地区的代码...

PS：出于某种原因，我不想使用任何现成的 CSV 文件或任何可以为我获取此信息的代码，例如 ip2country 现成的代码和 CSV。

* * *

## 回答 #1

> 赞同：563
> 
> 时间：2012-11-28T07:32:25.003

**试试这个简单的 PHP 函数。**

```
<?php

function ip_info($ip = NULL, $purpose = "location", $deep_detect = TRUE) {
    $output = NULL;
    if (filter_var($ip, FILTER_VALIDATE_IP) === FALSE) {
        $ip = $_SERVER["REMOTE_ADDR"];
        if ($deep_detect) {
            if (filter_var(@$_SERVER['HTTP_X_FORWARDED_FOR'], FILTER_VALIDATE_IP))
                $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];
            if (filter_var(@$_SERVER['HTTP_CLIENT_IP'], FILTER_VALIDATE_IP))
                $ip = $_SERVER['HTTP_CLIENT_IP'];
        }
    }
    $purpose    = str_replace(array("name", "\n", "\t", " ", "-", "_"), NULL, strtolower(trim($purpose)));
    $support    = array("country", "countrycode", "state", "region", "city", "location", "address");
    $continents = array(
        "AF" => "Africa",
        "AN" => "Antarctica",
        "AS" => "Asia",
        "EU" => "Europe",
        "OC" => "Australia (Oceania)",
        "NA" => "North America",
        "SA" => "South America"
    );
    if (filter_var($ip, FILTER_VALIDATE_IP) && in_array($purpose, $support)) {
        $ipdat = @json_decode(file_get_contents("http://www.geoplugin.net/json.gp?ip=" . $ip));
        if (@strlen(trim($ipdat->geoplugin_countryCode)) == 2) {
            switch ($purpose) {
                case "location":
                    $output = array(
                        "city"           => @$ipdat->geoplugin_city,
                        "state"          => @$ipdat->geoplugin_regionName,
                        "country"        => @$ipdat->geoplugin_countryName,
                        "country_code"   => @$ipdat->geoplugin_countryCode,
                        "continent"      => @$continents[strtoupper($ipdat->geoplugin_continentCode)],
                        "continent_code" => @$ipdat->geoplugin_continentCode
                    );
                    break;
                case "address":
                    $address = array($ipdat->geoplugin_countryName);
                    if (@strlen($ipdat->geoplugin_regionName) >= 1)
                        $address[] = $ipdat->geoplugin_regionName;
                    if (@strlen($ipdat->geoplugin_city) >= 1)
                        $address[] = $ipdat->geoplugin_city;
                    $output = implode(", ", array_reverse($address));
                    break;
                case "city":
                    $output = @$ipdat->geoplugin_city;
                    break;
                case "state":
                    $output = @$ipdat->geoplugin_regionName;
                    break;
                case "region":
                    $output = @$ipdat->geoplugin_regionName;
                    break;
                case "country":
                    $output = @$ipdat->geoplugin_countryName;
                    break;
                case "countrycode":
                    $output = @$ipdat->geoplugin_countryCode;
                    break;
            }
        }
    }
    return $output;
}

?> 
```

**如何使用：**

*示例 1：获取访问者 IP 地址详细信息*

```
<?php

echo ip_info("Visitor", "Country"); // India
echo ip_info("Visitor", "Country Code"); // IN
echo ip_info("Visitor", "State"); // Andhra Pradesh
echo ip_info("Visitor", "City"); // Proddatur
echo ip_info("Visitor", "Address"); // Proddatur, Andhra Pradesh, India

print_r(ip_info("Visitor", "Location")); // Array ( [city] => Proddatur [state] => Andhra Pradesh [country] => India [country_code] => IN [continent] => Asia [continent_code] => AS )

?> 
```

*示例 2：获取任何 IP 地址的详细信息。【支持IPV4&IPV6】*

```
<?php

echo ip_info("173.252.110.27", "Country"); // United States
echo ip_info("173.252.110.27", "Country Code"); // US
echo ip_info("173.252.110.27", "State"); // California
echo ip_info("173.252.110.27", "City"); // Menlo Park
echo ip_info("173.252.110.27", "Address"); // Menlo Park, California, United States

print_r(ip_info("173.252.110.27", "Location")); // Array ( [city] => Menlo Park [state] => California [country] => United States [country_code] => US [continent] => North America [continent_code] => NA )

?> 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-09-23T14:41:13.170

您可以使用来自[http://www.geoplugin.net/的简单 API](http://www.geoplugin.net/)

```
$xml = simplexml_load_file("http://www.geoplugin.net/xml.gp?ip=".getRealIpAddr());
echo $xml->geoplugin_countryName ;

echo "<pre>";
foreach ($xml as $key => $value)
{
    echo $key , "= " , $value ,  " \n" ;
}
echo "</pre>"; 
```

使用的功能

```
function getRealIpAddr()
{
    if (!empty($_SERVER['HTTP_CLIENT_IP']))   //check ip from share internet
    {
      $ip=$_SERVER['HTTP_CLIENT_IP'];
    }
    elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR']))   //to check ip is pass from proxy
    {
      $ip=$_SERVER['HTTP_X_FORWARDED_FOR'];
    }
    else
    {
      $ip=$_SERVER['REMOTE_ADDR'];
    }
    return $ip;
} 
```

输出

```
United States
geoplugin_city= San Antonio
geoplugin_region= TX
geoplugin_areaCode= 210
geoplugin_dmaCode= 641
geoplugin_countryCode= US
geoplugin_countryName= United States
geoplugin_continentCode= NA
geoplugin_latitude= 29.488899230957
geoplugin_longitude= -98.398696899414
geoplugin_regionCode= TX
geoplugin_regionName= Texas
geoplugin_currencyCode= USD
geoplugin_currencySymbol= $
geoplugin_currencyConverter= 1 
```

它让你有很多可以玩的选择

谢谢

:)

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-02-19T12:46:30.463

我尝试了 Chandra 的回答，但我的服务器配置不允许**file_get_contents()**

`PHP Warning: file_get_contents() URL file-access is disabled in the server configuration`

我修改了 Chandra 的代码，使其也适用于使用 cURL 的服务器：

```
function ip_visitor_country()
{

    $client  = @$_SERVER['HTTP_CLIENT_IP'];
    $forward = @$_SERVER['HTTP_X_FORWARDED_FOR'];
    $remote  = $_SERVER['REMOTE_ADDR'];
    $country  = "Unknown";

    if(filter_var($client, FILTER_VALIDATE_IP))
    {
        $ip = $client;
    }
    elseif(filter_var($forward, FILTER_VALIDATE_IP))
    {
        $ip = $forward;
    }
    else
    {
        $ip = $remote;
    }
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, "http://www.geoplugin.net/json.gp?ip=".$ip);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
    $ip_data_in = curl_exec($ch); // string
    curl_close($ch);

    $ip_data = json_decode($ip_data_in,true);
    $ip_data = str_replace('&quot;', '"', $ip_data); // for PHP 5.2 see stackoverflow.com/questions/3110487/

    if($ip_data && $ip_data['geoplugin_countryName'] != null) {
        $country = $ip_data['geoplugin_countryName'];
    }

    return 'IP: '.$ip.' # Country: '.$country;
}

echo ip_visitor_country(); // output Coutry name

?> 
```

希望有帮助;-)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-09-23T14:39:47.617

使用 MaxMind GeoIP（如果您还没有准备好付款，则使用 GeoIPLite）。

```
$gi = geoip_open('GeoIP.dat', GEOIP_MEMORY_CACHE);
$country = geoip_country_code_by_addr($gi, $_SERVER['REMOTE_ADDR']);
geoip_close($gi); 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-10-05T13:40:01.420

您可以在您的 php 代码中使用来自[http://ip-api.com的网络服务，请执行以下操作：](http://ip-api.com)

```
<?php
$ip = $_REQUEST['REMOTE_ADDR']; // the IP address to query
$query = @unserialize(file_get_contents('http://ip-api.com/php/'.$ip));
if($query && $query['status'] == 'success') {
  echo 'Hello visitor from '.$query['country'].', '.$query['city'].'!';
} else {
  echo 'Unable to get location';
}
?> 
```

查询还有许多其他信息：

```
array (
  'status'      => 'success',
  'country'     => 'COUNTRY',
  'countryCode' => 'COUNTRY CODE',
  'region'      => 'REGION CODE',
  'regionName'  => 'REGION NAME',
  'city'        => 'CITY',
  'zip'         => ZIP CODE,
  'lat'         => LATITUDE,
  'lon'         => LONGITUDE,
  'timezone'    => 'TIME ZONE',
  'isp'         => 'ISP NAME',
  'org'         => 'ORGANIZATION NAME',
  'as'          => 'AS NUMBER / NAME',
  'query'       => 'IP ADDRESS USED FOR QUERY',
) 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2012-09-23T14:38:54.823

实际上，您可以调用[http://api.hostip.info/?ip=123.125.114.144](http://api.hostip.info/?ip=123.125.114.144)来获取以 XML 形式呈现的信息。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2013-11-13T04:15:11.780

从 code.google查看[php-ip-2-country 。](http://code.google.com/p/php-ip-2-country/)他们提供的数据库每天都会更新，因此如果您托管自己的 SQL 服务器，则无需连接到外部服务器来检查。因此，使用代码您只需键入：

```
<?php
$ip = $_SERVER['REMOTE_ADDR'];

if(!empty($ip)){
        require('./phpip2country.class.php');

        /**
         * Newest data (SQL) avaliable on project website
         * @link http://code.google.com/p/php-ip-2-country/
         */
        $dbConfigArray = array(
                'host' => 'localhost', //example host name
                'port' => 3306, //3306 -default mysql port number
                'dbName' => 'ip_to_country', //example db name
                'dbUserName' => 'ip_to_country', //example user name
                'dbUserPassword' => 'QrDB9Y8CKMdLDH8Q', //example user password
                'tableName' => 'ip_to_country', //example table name
        );

        $phpIp2Country = new phpIp2Country($ip,$dbConfigArray);
        $country = $phpIp2Country->getInfo(IP_COUNTRY_NAME);
        echo $country;
?> 
```

**示例代码** *（来自资源）*

```
<?
require('phpip2country.class.php');

$dbConfigArray = array(
        'host' => 'localhost', //example host name
        'port' => 3306, //3306 -default mysql port number
        'dbName' => 'ip_to_country', //example db name
        'dbUserName' => 'ip_to_country', //example user name
        'dbUserPassword' => 'QrDB9Y8CKMdLDH8Q', //example user password
        'tableName' => 'ip_to_country', //example table name
);

$phpIp2Country = new phpIp2Country('213.180.138.148',$dbConfigArray);

print_r($phpIp2Country->getInfo(IP_INFO));
?> 
```

**输出**

```
Array
(
    [IP_FROM] => 3585376256
    [IP_TO] => 3585384447
    [REGISTRY] => RIPE
    [ASSIGNED] => 948758400
    [CTRY] => PL
    [CNTRY] => POL
    [COUNTRY] => POLAND
    [IP_STR] => 213.180.138.148
    [IP_VALUE] => 3585378964
    [IP_FROM_STR] => 127.255.255.255
    [IP_TO_STR] => 127.255.255.255
) 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2014-08-25T14:18:46.283

我们可以使用 geobytes.com 使用用户 IP 地址获取位置

```
$user_ip = getIP();
$meta_tags = get_meta_tags('http://www.geobytes.com/IPLocator.htm?GetLocation&template=php3.txt&IPAddress=' . $user_ip);
echo '<pre>';
print_r($meta_tags); 
```

它会像这样返回数据

```
Array(
    [known] => true
    [locationcode] => USCALANG
    [fips104] => US
    [iso2] => US
    [iso3] => USA
    [ison] => 840
    [internet] => US
    [countryid] => 254
    [country] => United States
    [regionid] => 126
    [region] => California
    [regioncode] => CA
    [adm1code] =>     
    [cityid] => 7275
    [city] => Los Angeles
    [latitude] => 34.0452
    [longitude] => -118.2840
    [timezone] => -08:00
    [certainty] => 53
    [mapbytesremaining] => Free
) 
```

获取用户IP的函数

```
function getIP(){
if (isset($_SERVER["HTTP_X_FORWARDED_FOR"])){
    $pattern = "/^(([1-9]?[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]).){3}([1-9]?[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/";
    if(preg_match($pattern, $_SERVER["HTTP_X_FORWARDED_FOR"])){
            $userIP = $_SERVER["HTTP_X_FORWARDED_FOR"];
    }else{
            $userIP = $_SERVER["REMOTE_ADDR"];
    }
}
else{
  $userIP = $_SERVER["REMOTE_ADDR"];
}
return $userIP;
} 
```

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2012-09-23T14:40:27.127

使用以下服务

1) [http://api.hostip.info/get_html.php?ip=12.215.42.19](http://api.hostip.info/get_html.php?ip=12.215.42.19)

2)

```
$json = file_get_contents('http://freegeoip.appspot.com/json/66.102.13.106');
$expression = json_decode($json);
print_r($expression); 
```

3) [http://ipinfodb.com/ip_location_api.php](http://ipinfodb.com/ip_location_api.php)

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2014-07-22T09:24:40.040

试试这个简单的一行代码，您将从他们的 ip 远程地址获取访问者的国家和城市。

```
$tags = get_meta_tags('http://www.geobytes.com/IpLocator.htm?GetLocation&template=php3.txt&IpAddress=' . $_SERVER['REMOTE_ADDR']);
echo $tags['country'];
echo $tags['city']; 
```

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2014-05-12T10:01:02.480

有一个维护良好的平面文件版本的 ip->country 数据库，由[CPAN的 Perl 社区维护](https://metacpan.org/release/IP-Country)

访问这些文件不需要数据服务器，数据本身大约为 515k

Higemaru 编写了一个 PHP 包装器来处理该数据：[php-ip-country-fast](https://github.com/higemaru/php-ip-country-fast)

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2014-07-09T13:25:21.500

许多不同的方法来做到这一点...

# **解决方案#1：**

您可以使用的一项第三方服务是[http://ipinfodb.com](http://ipinfodb.com)。它们提供主机名、地理位置和其他信息。

在此处注册 API 密钥：http: [//ipinfodb.com/register.php](http://ipinfodb.com/register.php)。这将允许您从他们的服务器检索结果，否则它将无法工作。

复制并粘贴以下 PHP 代码：

```
$ipaddress = $_SERVER['REMOTE_ADDR'];
$api_key = 'YOUR_API_KEY_HERE';

$data = file_get_contents("http://api.ipinfodb.com/v3/ip-city/?key=$api_key&ip=$ipaddress&format=json");
$data = json_decode($data);
$country = $data['Country']; 
```

**缺点：**

引用他们的网站：

> 我们的免费 API 使用的是 IP2Location Lite 版本，它提供了较低的准确性。

# **解决方案#2：**

此函数将使用[http://www.netip.de/](http://www.netip.de/)服务返回国家名称。

```
$ipaddress = $_SERVER['REMOTE_ADDR'];
function geoCheckIP($ip)
{
    $response=@file_get_contents('http://www.netip.de/search?query='.$ip);

    $patterns=array();
    $patterns["country"] = '#Country: (.*?)&nbsp;#i';

    $ipInfo=array();

    foreach ($patterns as $key => $pattern)
    {
        $ipInfo[$key] = preg_match($pattern,$response,$value) && !empty($value[1]) ? $value[1] : 'not found';
    }

        return $ipInfo;
}

print_r(geoCheckIP($ipaddress)); 
```

**输出：**

```
Array ( [country] => DE - Germany )  // Full Country Name 
```

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2017-09-05T17:56:43.767

我的服务[ipdata.co](https://ipdata.co?utm_campaign=stackoverflow-answer-12553160&utm_medium=answer&utm_source=stackoverflow)提供 5 种语言的国家名称！以及来自任何 IPv4 或 IPv6 地址的组织、货币、时区、呼叫代码、标志、移动运营商数据、代理数据和 Tor 出口节点状态数据。

> 此答案使用非常有限的“测试”API 密钥，仅用于测试几个调用。[注册](https://ipdata.co?utm_campaign=stackoverflow-answer-12553160-free-plan-cta&utm_medium=answer&utm_source=stackoverflow)您自己的免费 API 密钥并每天收到多达 1500 个开发请求。

它还具有极强的可扩展性，全球 10 个区域，每个区域每秒能够处理超过 10,000 个请求！

选项包括；英语 (en)、德语 (de)、日语 (ja)、法语 (fr) 和简体中文 (za-CH)

```
$ip = '74.125.230.195';
$details = json_decode(file_get_contents("https://api.ipdata.co/{$ip}?api-key=test"));
echo $details->country_name;
//United States
echo $details->city;
//Mountain View
$details = json_decode(file_get_contents("https://api.ipdata.co/{$ip}?api-key=test/zh-CN"));
echo $details->country_name;
//美国 
```

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2016-06-17T19:37:09.357

不确定这是否是一项新服务，但现在（2016 年）php 中最简单的方法是使用 geoplugin 的 php 网络服务：[http](http://www.geoplugin.net/php.gp) ://www.geoplugin.net/php.gp ：

**基本用法：**

```
// GET IP ADDRESS
if (!empty($_SERVER['HTTP_CLIENT_IP'])) {
    $ip = $_SERVER['HTTP_CLIENT_IP'];
} else if (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])) {
    $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];
} else if (!empty($_SERVER['REMOTE_ADDR'])) {
    $ip = $_SERVER['REMOTE_ADDR'];
} else {
    $ip = false;
}

// CALL THE WEBSERVICE
$ip_info = unserialize(file_get_contents('http://www.geoplugin.net/php.gp?ip='.$ip)); 
```

他们还提供了一个现成的类：[http ://www.geoplugin.com/_media/webservices/geoplugin.class.php.tgz?id=webservices%3Aphp&cache=cache](http://www.geoplugin.com/_media/webservices/geoplugin.class.php.tgz?id=webservices%3Aphp&cache=cache)

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2020-06-21T05:54:02.507

那可以接受吗？纯PHP

```
$country = geoip_country_code_by_name($_SERVER['REMOTE_ADDR']);
print $country; 
```

参考：[https ://www.php.net/manual/en/function.geoip-country-code-by-name.php](https://www.php.net/manual/en/function.geoip-country-code-by-name.php)

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2014-10-02T22:02:54.787

您可以使用 [http://ipinfo.io/](http://ipinfo.io/)获取 ip 地址的详细信息。它易于使用。

```
<?php
    function ip_details($ip)
    {
    $json = file_get_contents("http://ipinfo.io/{$ip}");
    $details = json_decode($json);
    return $details;
    }

    $details = ip_details(YoUR IP ADDRESS); 

    echo $details->city;
    echo "<br>".$details->country; 
    echo "<br>".$details->org; 
    echo "<br>".$details->hostname; /

    ?> 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2018-02-08T04:14:16.653

具有[IP 地址到国家](https://ipapi.co/)/地区API的单班轮

```
echo file_get_contents('https://ipapi.co/8.8.8.8/country_name/');

> United States 
```

例子 ：

[https://ipapi.co/country_name/](https://ipapi.co/country_name/) - 你的国家

[https://ipapi.co/8.8.8.8/country_name/](https://ipapi.co/8.8.8.8/country_name/) - IP 8.8.8.8 的国家

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2014-09-03T07:14:26.607

我正在使用`ipinfodb.com`api 并得到你正在寻找的东西。

它完全免费，您只需向他们注册即可获取您的 api 密钥。您可以通过从他们的网站下载来包含他们的 php 类，或者您可以使用 url 格式来检索信息。

这就是我正在做的事情：

我将他们的 php 类包含在我的脚本中并使用以下代码：

```
$ipLite = new ip2location_lite;
$ipLite->setKey('your_api_key');
if(!$_COOKIE["visitorCity"]){ //I am using cookie to store information
  $visitorCity = $ipLite->getCity($_SERVER['REMOTE_ADDR']);
  if ($visitorCity['statusCode'] == 'OK') {
    $data = base64_encode(serialize($visitorCity));
    setcookie("visitorCity", $data, time()+3600*24*7); //set cookie for 1 week
  }
}
$visitorCity = unserialize(base64_decode($_COOKIE["visitorCity"]));
echo $visitorCity['countryName'].' Region'.$visitorCity['regionName']; 
```

而已。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2014-11-01T12:36:34.103

替换*`127.0.0.1`*为访问者的 IpAddress。

```
$country = geoip_country_name_by_name('127.0.0.1'); 
```

安装说明在[这里](http://php.net/manual/en/geoip.setup.php)，[阅读此内容以了解如何获取城市、州、国家、经度、纬度等...](http://php.net/manual/en/book.geoip.php)

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2016-01-06T13:23:52.367

我有一个简短的答案，我在一个项目中使用过。在我的回答中，我认为您有访客 IP 地址。

```
$ip = "202.142.178.220";
$ipdat = @json_decode(file_get_contents("http://www.geoplugin.net/json.gp?ip=" . $ip));
//get ISO2 country code
if(property_exists($ipdat, 'geoplugin_countryCode')) {
    echo $ipdat->geoplugin_countryCode;
}
//get country full name
if(property_exists($ipdat, 'geoplugin_countryName')) {
    echo $ipdat->geoplugin_countryName;
} 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2019-03-31T20:08:37.560

我知道这很旧，但我在这里尝试了其他一些解决方案，它们似乎已经过时或者只是返回 null。所以我就是这样做的。

使用`http://www.geoplugin.net/json.gp?ip=`它不需要任何类型的注册或支付服务费用。

```
function get_client_ip_server() {
  $ipaddress = '';
if (isset($_SERVER['HTTP_CLIENT_IP']))
  $ipaddress = $_SERVER['HTTP_CLIENT_IP'];
else if(isset($_SERVER['HTTP_X_FORWARDED_FOR']))
  $ipaddress = $_SERVER['HTTP_X_FORWARDED_FOR'];
else if(isset($_SERVER['HTTP_X_FORWARDED']))
  $ipaddress = $_SERVER['HTTP_X_FORWARDED'];
else if(isset($_SERVER['HTTP_FORWARDED_FOR']))
  $ipaddress = $_SERVER['HTTP_FORWARDED_FOR'];
else if(isset($_SERVER['HTTP_FORWARDED']))
  $ipaddress = $_SERVER['HTTP_FORWARDED'];
else if(isset($_SERVER['REMOTE_ADDR']))
  $ipaddress = $_SERVER['REMOTE_ADDR'];
else
  $ipaddress = 'UNKNOWN';

  return $ipaddress;
}

$ipaddress = get_client_ip_server();

function getCountry($ip){
    $curlSession = curl_init();
    curl_setopt($curlSession, CURLOPT_URL, 'http://www.geoplugin.net/json.gp?ip='.$ip);
    curl_setopt($curlSession, CURLOPT_BINARYTRANSFER, true);
    curl_setopt($curlSession, CURLOPT_RETURNTRANSFER, true);

    $jsonData = json_decode(curl_exec($curlSession));
    curl_close($curlSession);

    return $jsonData->geoplugin_countryCode;
}

echo "County: " .getCountry($ipaddress); 
```

如果您想了解有关它的更多信息，这是 Json 的完整返回：

```
{
  "geoplugin_request":"IP_ADDRESS",
  "geoplugin_status":200,
  "geoplugin_delay":"2ms",
  "geoplugin_credit":"Some of the returned data includes GeoLite data created by MaxMind, available from <a href='http:\/\/www.maxmind.com'>http:\/\/www.maxmind.com<\/a>.",
  "geoplugin_city":"Current City",
  "geoplugin_region":"Region",
  "geoplugin_regionCode":"Region Code",
  "geoplugin_regionName":"Region Name",
  "geoplugin_areaCode":"",
  "geoplugin_dmaCode":"650",
  "geoplugin_countryCode":"US",
  "geoplugin_countryName":"United States",
  "geoplugin_inEU":0,
  "geoplugin_euVATrate":false,
  "geoplugin_continentCode":"NA",
  "geoplugin_continentName":"North America",
  "geoplugin_latitude":"37.5563",
  "geoplugin_longitude":"-99.9413",
  "geoplugin_locationAccuracyRadius":"5",
  "geoplugin_timezone":"America\/Chicago",
  "geoplugin_currencyCode":"USD",
  "geoplugin_currencySymbol":"$",
  "geoplugin_currencySymbol_UTF8":"$",
  "geoplugin_currencyConverter":1
} 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2020-03-04T10:32:31.587

我写了一个基于“Chandra Nakka”答案的课程。希望它可以帮助人们将地理插件中的信息保存到会话中，以便在调用信息时加载速度更快。它还将值保存到私有数组中，因此在同一代码中调用是最快的。

```
class Geo {
private $_ip = null;
private $_useSession = true;
private $_sessionNameData = 'GEO_SESSION_DATA';
private $_hasError = false;
private $_geoData = [];

const PURPOSE_SUPPORT = [
    "all", "*", "location",
    "request",
    "latitude", 
    "longitude",
    "accuracy",
    "timezonde",
    "currencycode",
    "currencysymbol",
    "currencysymbolutf8",
    "country", 
    "countrycode", 
    "state", "region", 
    "city", 
    "address",
    "continent", 
    "continentcode"
];
const CONTINENTS = [
    "AF" => "Africa",
    "AN" => "Antarctica",
    "AS" => "Asia",
    "EU" => "Europe",
    "OC" => "Australia (Oceania)",
    "NA" => "North America",
    "SA" => "South America"
];

function __construct($ip = null, $deepDetect = true, $useSession = true)
{
    // define the session useage within this class
    $this->_useSession = $useSession;
    $this->_startSession();

    // define a ip as far as possible
    $this->_ip = $this->_defineIP($ip, $deepDetect);

    // check if the ip was set
    if (!$this->_ip) {
        $this->_hasError = true;
        return $this;
    }

    // define the geoData
    $this->_geoData = $this->_fetchGeoData();

    return $this;
}

function get($purpose)
{
    // making sure its lowercase
    $purpose = strtolower($purpose);

    // makeing sure there are no error and the geodata is not empty
    if ($this->_hasError || !count($this->_geoData) && !in_array($purpose, self::PURPOSE_SUPPORT)) {
        return 'error';
    }

    if (in_array($purpose, ['*', 'all', 'location']))  {
        return $this->_geoData;
    }

    if ($purpose === 'state') $purpose = 'region';

    return (isset($this->_geoData[$purpose]) ? $this->_geoData[$purpose] : 'missing: '.$purpose);
}

private function _fetchGeoData()
{
    // check if geo data was set before
    if (count($this->_geoData)) {
        return $this->_geoData;
    }

    // check possible session
    if ($this->_useSession && ($sessionData = $this->_getSession($this->_sessionNameData))) {
        return $sessionData;
    }

    // making sure we have a valid ip
    if (!$this->_ip || $this->_ip === '127.0.0.1') {
        return [];
    }

    // fetch the information from geoplusing
    $ipdata = @json_decode($this->curl("http://www.geoplugin.net/json.gp?ip=" . $this->_ip));

    // check if the data was fetched
    if (!@strlen(trim($ipdata->geoplugin_countryCode)) === 2) {
        return [];
    }

    // make a address array
    $address = [$ipdata->geoplugin_countryName];
    if (@strlen($ipdata->geoplugin_regionName) >= 1)
        $address[] = $ipdata->geoplugin_regionName;
    if (@strlen($ipdata->geoplugin_city) >= 1)
        $address[] = $ipdata->geoplugin_city;

    // makeing sure the continentCode is upper case
    $continentCode = strtoupper(@$ipdata->geoplugin_continentCode);

    $geoData = [
        'request' => @$ipdata->geoplugin_request,
        'latitude' => @$ipdata->geoplugin_latitude,
        'longitude' => @$ipdata->geoplugin_longitude,
        'accuracy' => @$ipdata->geoplugin_locationAccuracyRadius,
        'timezonde' => @$ipdata->geoplugin_timezone,
        'currencycode' => @$ipdata->geoplugin_currencyCode,
        'currencysymbol' => @$ipdata->geoplugin_currencySymbol,
        'currencysymbolutf8' => @$ipdata->geoplugin_currencySymbol_UTF8,
        'city' => @$ipdata->geoplugin_city,
        'region' => @$ipdata->geoplugin_regionName,
        'country' => @$ipdata->geoplugin_countryName,
        'countrycode' => @$ipdata->geoplugin_countryCode,
        'continent' => self::CONTINENTS[$continentCode],
        'continentcode' => $continentCode,
        'address' => implode(", ", array_reverse($address))
    ];

    if ($this->_useSession) {
        $this->_setSession($this->_sessionNameData, $geoData);
    }

    return $geoData;
}

private function _startSession()
{
    // only start a new session when the status is 'none' and the class
    // requires a session
    if ($this->_useSession && session_status() === PHP_SESSION_NONE) {
        session_start();
    }
}

private function _defineIP($ip, $deepDetect)
{
    // check if the ip was set before
    if ($this->_ip) {
        return $this->_ip;
    }

    // check if the ip given is valid
    if (filter_var($ip, FILTER_VALIDATE_IP)) {
        return $ip;
    }

    // try to get the ip from the REMOTE_ADDR
    $ip = filter_input(INPUT_SERVER, 'REMOTE_ADDR', FILTER_VALIDATE_IP);

    // check if we need to end the search for a IP if the REMOTE_ADDR did not
    // return a valid and the deepDetect is false
    if (!$deepDetect) {
        return $ip;
    }

    // try to get the ip from HTTP_X_FORWARDED_FOR
    if (($ip = filter_input(INPUT_SERVER, 'HTTP_X_FORWARDED_FOR', FILTER_VALIDATE_IP))) {
        return $ip;
    }

    // try to get the ip from the HTTP_CLIENT_IP
    if (($ip = filter_input(INPUT_SERVER, 'HTTP_CLIENT_IP', FILTER_VALIDATE_IP))) {
        return $ip;
    }

    return $ip;
}

private function _hasSession($key, $filter = FILTER_DEFAULT) 
{
    return (isset($_SESSION[$key]) ? (bool)filter_var($_SESSION[$key], $filter) : false);
}

private function _getSession($key, $filter = FILTER_DEFAULT)
{
    if ($this->_hasSession($key, $filter)) {
        $value = filter_var($_SESSION[$key], $filter);

        if (@json_decode($value)) {
            return json_decode($value, true);
        }

        return filter_var($_SESSION[$key], $filter);
    } else {
        return false;
    }
}

private function _setSession($key, $value) 
{
    if (is_array($value)) {
        $value = json_encode($value);
    }

    $_SESSION[$key] = $value;
}

function emptySession($key) {
    if (!$this->_hasSession($key)) {
        return;
    }

    $_SESSION[$key] = null;
    unset($_SESSION[$key]);

}

function curl($url) 
{
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $output = curl_exec($ch);
    curl_close($ch);
    return $output;
}
} 
```

用这门课回答'op'问题，你可以打电话

```
$country = (new \Geo())->get('country'); // United Kingdom 
```

其他可用的属性是：

```
$geo = new \Geo('185.35.50.4');
var_dump($geo->get('*')); // allias all / location
var_dump($geo->get('country'));
var_dump($geo->get('countrycode'));
var_dump($geo->get('state')); // allias region
var_dump($geo->get('city')); 
var_dump($geo->get('address')); 
var_dump($geo->get('continent')); 
var_dump($geo->get('continentcode'));   
var_dump($geo->get('request'));
var_dump($geo->get('latitude'));
var_dump($geo->get('longitude'));
var_dump($geo->get('accuracy'));
var_dump($geo->get('timezonde'));
var_dump($geo->get('currencyCode'));
var_dump($geo->get('currencySymbol'));
var_dump($geo->get('currencySymbolUTF8')); 
```

返回

```
array(15) {
  ["request"]=>
  string(11) "185.35.50.4"
  ["latitude"]=>
  string(7) "51.4439"
  ["longitude"]=>
  string(7) "-0.1854"
  ["accuracy"]=>
  string(2) "50"
  ["timezonde"]=>
  string(13) "Europe/London"
  ["currencycode"]=>
  string(3) "GBP"
  ["currencysymbol"]=>
  string(2) "£"
  ["currencysymbolutf8"]=>
  string(2) "£"
  ["city"]=>
  string(10) "Wandsworth"
  ["region"]=>
  string(10) "Wandsworth"
  ["country"]=>
  string(14) "United Kingdom"
  ["countrycode"]=>
  string(2) "GB"
  ["continent"]=>
  string(6) "Europe"
  ["continentcode"]=>
  string(2) "EU"
  ["address"]=>
  string(38) "Wandsworth, Wandsworth, United Kingdom"
}
string(14) "United Kingdom"
string(2) "GB"
string(10) "Wandsworth"
string(10) "Wandsworth"
string(38) "Wandsworth, Wandsworth, United Kingdom"
string(6) "Europe"
string(2) "EU"
string(11) "185.35.50.4"
string(7) "51.4439"
string(7) "-0.1854"
string(2) "50"
string(13) "Europe/London"
string(3) "GBP"
string(2) "£"
string(2) "£" 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-04-07T21:04:32.330

If you need to get country as fast as possible I would suggest geoip plugin for your web server.

For nginx [here](http://nginx.org/en/docs/http/ngx_http_geoip_module.html);

After you set this up properly, you will get countrycode from `$_SERVER` variable.

I execute this about 500(+-) times per seccond, super fast.

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2022-01-20T23:00:45.773

只需 4 行代码即可实现这一目标！

```
$user_ip = '0.0.0.0';
$user_ip = $_SERVER['REMOTE_ADDR'];
$close_url = stream_context_create(array('http' => array('header'=>'Connection: close\r\n')));
$user_country = json_decode(file_get_contents("https://ipinfo.io/$user_ip/json",false,$close_url));
echo "Yes! we ship to your country: <b>" . $user_country->country . "</b>"; 
```

//输出是的！我们运送到您的国家**美国**

注意： **$close_url**用于在获取内容后尽快结束 file_get_contents，它提高了请求的速度 x5。

如果您想显示完整的国家/地区名称，您可以点击下方查看如何操作。

[在此处输入链接描述](https://ipinfo.io/blog/full-country-names)

//echo "世界和平";

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-04-06T13:00:11.867

尝试

```
 <?php
  //gives you the IP address of the visitors
  if (!empty($_SERVER['HTTP_CLIENT_IP'])) {
      $ip = $_SERVER['HTTP_CLIENT_IP'];}
  else if (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])) {
      $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];
  } else {
      $ip = $_SERVER['REMOTE_ADDR'];
  }

  //return the country code
  $url = "http://api.wipmania.com/$ip";
  $country = file_get_contents($url);
  echo $country;

  ?> 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-12-06T07:04:11.953

截至 2019 年，MaxMind 国家数据库可按如下方式使用：

```
<?php
require_once 'vendor/autoload.php';
use MaxMind\Db\Reader;
$databaseFile = 'GeoIP2-Country.mmdb';
$reader = new Reader($databaseFile);
$cc = $reader->get($_SERVER['REMOTE_ADDR'])['country']['iso_code'] # US/GB...
$reader->close(); 
```

* * *

来源： [https ://github.com/maxmind/MaxMind-DB-Reader-php](https://github.com/maxmind/MaxMind-DB-Reader-php)

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2017-08-10T04:05:07.660

[User Country API](https://usercountry.com)正是您所需要的。这是一个使用 file_get_contents() 的示例代码，就像您最初所做的那样：

```
$result = json_decode(file_get_contents('http://usercountry.com/v1.0/json/'.$cip), true);
$result['country']['name']; // this contains what you need 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-09-23T11:59:15.963

使用 IP 地址获取国家、城市、
大陆等的 PHP 代码

```
 $ip = $_SERVER["REMOTE_ADDR"];

    // Use JSON encoded string and converts 
    // it into a PHP variable 
    $ipdat = @json_decode(file_get_contents( 
        "http://www.geoplugin.net/json.gp?ip=" . $ip)); 

    $country = $ipdat->geoplugin_countryName; 
    $city = $ipdat->geoplugin_city; 
    $continent_name = $ipdat->geoplugin_continentName; 
    $latitude = $ipdat->geoplugin_latitude; 
    $longitude = $ipdat->geoplugin_longitude; 
    $currency_symbol = $ipdat->geoplugin_currencySymbol; 
    $currency_code = $ipdat->geoplugin_currencyCode; 
    $timezone = $ipdat->geoplugin_timezone; 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2019-08-15T22:47:36.847

您可以使用我的服务：[https](https://SmartIP.io) ://SmartIP.io ，它提供了任何 IP 地址的完整国家名称和城市名称。我们还公开了时区、货币、代理检测、TOR 节点检测和加密检测。

您只需要注册并获得一个免费的 API 密钥，该密钥每月允许 250,000 个请求。

使用官方 PHP 库，API 调用变为：

```
$apiKey = "your API key";
$smartIp = new SmartIP($apiKey);
$response = $smartIp->requestIPData("8.8.8.8");

echo "\nstatus code: " . $response->{"status-code"};
echo "\ncountry name: " . $response->country->{"country-name"}; 
```

查看 API 文档以获取更多信息： [https ://smartip.io/docs](https://smartip.io/docs)

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2019-01-12T12:24:02.830

**这只是一个**关于功能的安全说明，`get_client_ip()`这里的大多数答案都包含在`get_geo_info_for_this_ip()`.

不要过分依赖请求标头中的 IP 数据，`Client-IP`或者`X-Forwarded-For`因为它们很容易被欺骗，但是您应该尽可能依赖在我们的服务器和客户端之间实际建立的 TCP 连接的源`$_SERVER['REMOTE_ADDR']`IP [。不要被欺骗](https://stackoverflow.com/questions/4773969/is-it-safe-to-trust-serverremote-addr)

```
$_SERVER['HTTP_CLIENT_IP'] // can be spoofed 
$_SERVER['HTTP_X_FORWARDED_FOR'] // can be spoofed 
$_SERVER['REMOTE_ADDR']// can't be spoofed 
```

获取欺骗 IP 的国家是可以的，但请记住，在任何安全模型中使用此 IP（例如：禁止发送频繁请求的 IP）将破坏整个安全模型。恕我直言，我更喜欢使用实际的客户端 IP，即使它是代理服务器的 IP。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2018-07-13T15:14:00.413

您可以使用 ipstack geo API 获取访问者国家和城市。您需要获取自己的 ipstack API，然后使用以下代码：

```
<?php
 $ip = $_SERVER['REMOTE_ADDR']; 
 $api_key = "YOUR_API_KEY";
 $freegeoipjson = file_get_contents("http://api.ipstack.com/".$ip."?access_key=".$api_key."");
 $jsondata = json_decode($freegeoipjson);
 $countryfromip = $jsondata->country_name;
 echo "Country: ". $countryfromip ."";
?> 
```

来源：**[使用 ipstack API 在 PHP 中获取访问者国家和城市](https://www.codespeedy.com/get-visitors-country-and-city-in-php-using-ipstack-api/)**

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2022-01-27T09:02:28.410

您可以使用此代码片段。

```
 if($a = unserialize(file_get_contents('http://www.geoplugin.net/php.gp?ip='.$_SERVER['REMOTE_ADDR']))){
        $countrycode= $a['geoplugin_countryCode'];
        if ($countrycode=='UK' ){
            header( 'Location: https://www.example.co.uk/' ) ;exit;
        }
    } 
```

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2021-02-07T08:19:23.650

这是使用 guzzle 接受的答案的更简洁和有效的版本：

您可以使用 curl 而不是 guzzle 它只是一个简单的获取请求。

```
 function ip_info($ip = NULL, $purpose = "location", $deep_detect = TRUE) {
        $output = NULL;
        if (filter_var($ip, FILTER_VALIDATE_IP) === FALSE) {
            $ip = $_SERVER["REMOTE_ADDR"];
            if ($deep_detect) {
                if (filter_var(@$_SERVER['HTTP_X_FORWARDED_FOR'], FILTER_VALIDATE_IP))
                    $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];
                if (filter_var(@$_SERVER['HTTP_CLIENT_IP'], FILTER_VALIDATE_IP))
                    $ip = $_SERVER['HTTP_CLIENT_IP'];
            }
        }
        $purpose    = str_replace(array("name", "\n", "\t", " ", "-", "_"), NULL, strtolower(trim($purpose)));
        $support    = array("country", "countrycode", "state", "region", "city", "location", "address");
        $continents = array(
            "AF" => "Africa",
            "AN" => "Antarctica",
            "AS" => "Asia",
            "EU" => "Europe",
            "OC" => "Australia (Oceania)",
            "NA" => "North America",
            "SA" => "South America"
        );
        if (filter_var($ip, FILTER_VALIDATE_IP) && in_array($purpose, $support, true)) {
            $client = New \GuzzleHttp\Client();
            $ipdat = json_decode($client->request('GET','http://www.geoplugin.net/json.gp',$params = [
                'query' => [
                    'ip' => $ip,
                ]
            ])->getBody()->getContents(),true);
            if (strlen(trim($ipdat['geoplugin_countryCode'])) === 2) {
                switch ($purpose) {
                    case "location":
                        $output = array(
                            "city"           => $ipdat['geoplugin_city'],
                            "state"          => $ipdat['geoplugin_regionName'],
                            "country"        => $ipdat['geoplugin_countryName'],
                            "country_code"   => $ipdat['geoplugin_countryCode'],
                            "continent"      => $continents[strtoupper($ipdat['geoplugin_continentCode'])],
                            "continent_code" => $ipdat['geoplugin_continentCode']
                        );
                        break;
                    case "address":
                        $address = array($ipdat['geoplugin_countryName']);
                        if (@strlen($ipdat['geoplugin_regionName']) >= 1)
                            $address[] = $ipdat['geoplugin_regionName'];
                        if (@strlen($ipdat['geoplugin_city']) >= 1)
                            $address[] = $ipdat['geoplugin_city'];
                        $output = implode(", ", array_reverse($address));
                        break;
                    case "city":
                        $output = $ipdat['geoplugin_city'];
                        break;
                    case "region":
                    case "state":
                        $output = $ipdat['geoplugin_regionName'];
                        break;
                    case "country":
                        $output = $ipdat['geoplugin_countryName'];
                        break;
                    case "countrycode":
                        $output = $ipdat['geoplugin_countryCode'];
                        break;
                }
            }
        }
        return $output;
    } 
```

# java - 如何从 dll 中的回调函数调用 java 类？

> ID：12553162
> 
> 赞同：1
> 
> 时间：2012-09-23T14:33:53.010
> 
> 标签：java, dll, java-native-interface

我正在编写一个软件测试自动化工具，并且我在 DLL 中有一个 Journal Record Proc。现在，当 Windows 调用 Proc 时，我想从中调用 Java 类中的方法。这可能吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T14:35:49.357

是的，您可以直接通过 JNI 执行此操作。请参阅[JNI 文档](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/jniTOC.html)。

[有关如何](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/design.html#wp17074)从 Java 类访问字段和方法的信息，请参阅文档的这一部分。如果您从 Java 调用 DLL，则可以将作业对象传递给该方法。

使这更简单的替代方法是商业产品 CodeMesh JunC++ion。

# c++ - 为什么 11==011 返回 false？

> ID：12553173
> 
> 赞同：2
> 
> 时间：2012-09-23T14:34:45.070
> 
> 标签：c++, c, boolean

我对我的程序输出的内容感到困惑：

```
#include<stdio.h>
int main()
{
    if(11==011)
        printf("True");
    else
        printf("False");
} 
```

输出是`"False"`。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-23T14:35:40.620

在 C 中，以 8 开头的数字`0`被认为是[八进制](http://en.wikipedia.org/wiki/Octal)，即以 8`011`为底。实际上也是如此`9`。

> 6.4.4.1
> 
> 十进制常量以非零数字开头，由一系列十进制数字组成。 **八进制常数由前缀 0 组成，** 可选地后跟数字 0 到 7 的序列。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-23T14:38:12.210

以下代码

```
#include <iostream>
using namespace std;

int main()
{
    cout << 11 << endl;
    cout << 011 << endl;
    return 0;
} 
```

产生输出：

```
11
9 
```

这是因为在数字前加上 0 会产生八进制数。

所以，

```
011 (base 8) = 1*8^1 + 1*8^0 = 9 (base 10) 
```

这可以解释为什么您的条件评估为`false`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T14:40:13.713

`011`被视为一个[`octal`](http://en.wikipedia.org/wiki/Octal)数字，而不是[`decimal`](http://en.wikipedia.org/wiki/Decimal). `011`（八进制）到十进制的转换是`9`。所以`11`等于`9`? 不。

**编辑：什么是八进制数？**

八进制数字系统，或简称oct，是`base-8`数字系统，使用数字`0`来表示。八进制`7`数字可以通过将连续的二进制数字分成三个一组（从右开始）由二进制数字组成。例如，十进制的二进制表示`74`是`1001010`，它可以分组为`(00)1 001 010`- 所以八进制表示是`112`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-23T14:37:20.657

这是关于数字基础的。在 C++ 中，一些数字基数用唯一前缀表示，以便更舒适地使用（十进制没有），例如十六进制（16）是 0x：0xFACE8D，八进制（8）有 0：011

[这篇文章](http://www.cplusplus.com/doc/hex/)可以帮助你更好地理解它。

# xuggler - 如何使用 xuggler 从视频中提取音频？

> ID：12553174
> 
> 赞同：4
> 
> 时间：2012-09-23T14:34:44.663
> 
> 标签：xuggler

我正在尝试使用 xuggler*从视频文件（.avi、*.mp4 等）制作音频文件（*.mp3、.wav 等）这是我的代码*

```
Code:
IMediaReader reader = ToolFactory.makeReader("D:/Frames/my.mp4");
IMediaWriter writer = ToolFactory.makeWriter("D:/a.mp3",reader);
int sampleRate = 44100;
int channels = 1;
writer.addAudioStream(0, 0, ICodec.ID.CODEC_ID_MP3, channels, sampleRate);
while (reader.readPacket() == null); 
```

但它不会为我创建音频文件。请指导我哪里做错了。如果您将更正它或为此目的提供一些与我不同的其他代码，那么我将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-03T14:48:09.250

在互联网上搜索了很多关于这个问题后，我发现我可以用 JAVE（Java 音频视频编码器）做同样的工作，所以我尝试了一下，它对我有用..所以我想我在那里发布解决方案，如果有人否则面临同样的问题，然后他/她可以看到我的工作。

它实际上在幕后使用ffmpeg，它将从视频文件中提取音频以及更多用于编码的东西。这里是 JAVE [http://www.sauronsoftware.it/projects/jave/index.php的链接](http://www.sauronsoftware.it/projects/jave/index.php)

还可以在此处查看一个示例，我将其发布在这里也是为了您的方便

```
File source = new File("source.mp4");
File target = new File("target.mp3");
AudioAttributes audio = new AudioAttributes();
audio.setCodec("libmp3lame");
audio.setBitRate(new Integer(128000));
audio.setChannels(new Integer(2));
audio.setSamplingRate(new Integer(44100));
EncodingAttributes attrs = new EncodingAttributes();
attrs.setFormat("mp3");
attrs.setAudioAttributes(audio);
Encoder encoder = new Encoder();
encoder.encode(source, target, attrs); 
```

希望它会帮助你..！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-10T18:21:21.750

这是一篇旧帖子，但是，我希望我的回答对某人有所帮助：

我使用的代码与有问题的代码相同，但由于无法使用该代码转换某些文件，我遇到了麻烦。

在这个答案中，我打开文件，当它包含音频时，我创建文件。否则不会创建文件。这种方式是提取任何文件的音频部分的正确方法。

相同的模式可以应用于视频。我想我认为这段代码也会给出这个想法。

```
package test.video;

import com.xuggle.mediatool.IMediaReader;
import com.xuggle.mediatool.IMediaWriter;
import com.xuggle.mediatool.MediaToolAdapter;
import com.xuggle.mediatool.ToolFactory;
import com.xuggle.mediatool.event.IAudioSamplesEvent;
import com.xuggle.mediatool.event.ICloseEvent;
import com.xuggle.mediatool.event.IOpenCoderEvent;
import com.xuggle.xuggler.IContainer;
import com.xuggle.xuggler.IStreamCoder;

/**
 *
 * @author Pasban
 */
public class separateAudioVideo {

    public static void main(String[] args) throws Exception {
        String file = "pasban/22.mp4";
        String to = "pasban/22.mp3";
        convert(file, to);
    }

    public static void convert(String from, final String to) {
        IMediaReader mediaReader = ToolFactory.makeReader(from);
        final int mySampleRate = 44100;
        final int myChannels = 2;

        mediaReader.addListener(new MediaToolAdapter() {

            private IContainer container;
            private IMediaWriter mediaWriter;

            @Override
            public void onOpenCoder(IOpenCoderEvent event) {
                container = event.getSource().getContainer();
                mediaWriter = null;
            }

            @Override
            public void onAudioSamples(IAudioSamplesEvent event) {
            if (container != null) {
                  if (mediaWriter == null) {
                    mediaWriter = ToolFactory.makeWriter(to);

                    mediaWriter.addListener(new MediaListenerAdapter() {

                          @Override
                          public void onAddStream(IAddStreamEvent event) {
                              IStreamCoder streamCoder = event.getSource().getContainer().getStream(event.getStreamIndex()).getStreamCoder();
                              streamCoder.setFlag(IStreamCoder.Flags.FLAG_QSCALE, false);
                              streamCoder.setBitRate(128);
                              streamCoder.setChannels(myChannels);
                              streamCoder.setSampleRate(mySampleRate);
                              streamCoder.setBitRateTolerance(0);
                          }
                      });

                    mediaWriter.addAudioStream(0, 0, myChannels, mySampleRate);
                }
                    mediaWriter.encodeAudio(0, event.getAudioSamples());
                    //System.out.println(event.getTimeStamp() / 1000);
                }
            }

            @Override
            public void onClose(ICloseEvent event) {
                if (mediaWriter != null) {
                    mediaWriter.close();
                }
            }
        });

        while (mediaReader.readPacket() == null) {
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-09T21:02:33.910

你应该让作者听读者的数据包。

```
reader.addListener(writer); 
```

这就是让它工作所需的一切。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-28T03:25:47.517

在我的代码中，遵循@Kostas Andrianopoulos 的回答。抛出异常：“不允许错误操作，无法将标头写入容器......”。修改后的代码为：

```
 IMediaReader reader = ToolFactory.makeReader("D:\\123.flv");
    IMediaWriter writer = ToolFactory.makeWriter("D:\\output.mp3", reader);
    int sampleRate = 44100;
    int channels = 2;
    writer.setMaskLateStreamExceptions(true);
    writer.addAudioStream(1, 0, ICodec.ID.CODEC_ID_MP3, channels, sampleRate);
    reader.addListener(writer);
    while(reader.readPacket() == null)
        ; 
```

一切都好。但最重要的是：我不知道为什么？addAudioStream 的第一个参数是什么意思（阅读文档后），所以有人能给我一些信息吗，谢谢。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-01-01T12:28:54.437

我认为这是一个改进，它对 n 个音频文件有好处。

```
import com.xuggle.mediatool.IMediaWriter;
import com.xuggle.mediatool.ToolFactory;
import com.xuggle.xuggler.IAudioSamples;
import com.xuggle.xuggler.IContainer;
import com.xuggle.xuggler.IPacket;
import com.xuggle.xuggler.IStreamCoder;

public class Concatenador_Audios {
    public static void main(String[] args) {
        ConcatenarAudios("D:\\out concatenate.mp3", "D:\\in Audio (1).mp3", "D:\\in Audio (2).mp3", "D:\\in Audio (3).mp3");
    }

    public static void ConcatenarAudios(String Ruta_AudioConcatenado,String... ruta_Audio) {
        int n = ruta_Audio.length;
        IMediaWriter mWriter = ToolFactory.makeWriter(Ruta_AudioConcatenado);

        IPacket packet = IPacket.make();
        for (int i = 0; i < n; i++) {
            IContainer container = IContainer.make();
            container.open(ruta_Audio[i], IContainer.Type.READ, null);
            IStreamCoder audio = container.getStream(0).getStreamCoder();
            audio.open(null, null);
            if (i == 0) {
                mWriter.addAudioStream(0, 0, audio.getChannels(), audio.getSampleRate());
            }
            while (container.readNextPacket(packet) >= 0) {
                IAudioSamples samples = IAudioSamples.make(512, audio.getChannels(), IAudioSamples.Format.FMT_S32);
                audio.decodeAudio(samples, packet, 0);
                mWriter.encodeAudio(0, samples);
            }
            container.close();
            audio.close();
            }

            mWriter.close();
        }
    }
} 
```

# validation - CakePHP：在重定向时保留验证数据

> ID：12553192
> 
> 赞同：0
> 
> 时间：2012-09-23T14:35:57.050
> 
> 标签：validation, cakephp, redirect, registration

我已经看到这里提到了很多这个问题，但是我找不到任何令人满意的答案，所以我会尝试用不同的方式来表述它：

我在同一页面上有一个用户登录表单和一个注册表单（我们称之为“首页”）。

每种形式都会导致不同的控制器动作。验证后，cakephp 试图在用户/登录和用户/注册视图中显示验证错误，但我没有，我不想要这些视图，所以我被迫重定向回我的“首页”。但是，在重定向时，验证数据会丢失。

如何保持验证数据显示在我的首页上，而不必为登录和注册功能添加单独的页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T14:53:33.640

Cakephp 将其验证错误保存在

```
$this->ModelName->invalidFields(); 
```

如果你想让它表现得持久，我相信你必须将它保存在会话变量中。即，如果您的重定向丢失了属性值，请尝试将其保存在会话变量中。

更新：

**invalidFields**再次执行整个验证过程，应该使用**$this->ModelName->validationErrors代替。**

# python - 记录混乱 - 字段内容内的分隔符

> ID：12553197
> 
> 赞同：1
> 
> 时间：2012-09-23T14:36:39.700
> 
> 标签：python, perl, language-agnostic

我获得了包含需要加载到 postgres 数据库中的数据的文本文件。

这些文件以记录（每行一个）的形式结构化，字段由波浪号 (~) 分隔。不幸的是，有时字段内容会包含一个波浪号。

由于文件不是整齐的 CSV，并且波浪号没有转义，这会导致记录包含太多字段，从而导致数据库抛出异常并停止加载。

我知道记录应该是什么样子（文本、整数、浮点字段）。

有没有人有关于如何修复超长记录的建议？我用 per 编码，但我对 python、javascript、纯英语的建议感到满意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T18:02:20.583

您可以尝试使用以下内容过滤掉损坏的行：

```
perl -F'~' -lane 'print if @F > 10' input.txt > broken_fields.txt 
```

（假设您的最大字段数为 10）。它会给你一个简短的（er）文件，其中包含你可以手动检查的可疑行。这不是一个万无一失的过滤器，它会例如打印出允许的字段，例如带引号的字符串中的波浪线。如果你想要更精确的东西，你可以使用`Text::CSV`，但是当涉及到损坏的 csv 数据时，这会带来其他困难。

可能有更好的（和自动的）方法来解决这个问题，但是在不知道你的输入是什么样子的情况下，没有办法真正推荐一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T14:37:59.300

如果您知道每个字段应该是什么，也许您可​​以编写一个仅匹配该字段类型的正则表达式（忽略波浪号）并捕获匹配项，然后替换文件中的原始字符串？

# c# - mvc 4 - Jquery mobile - @section 脚本在导航后不起作用

> ID：12553198
> 
> 赞同：4
> 
> 时间：2012-09-23T14:36:45.337
> 
> 标签：c#, asp.net-mvc-4, jquery-ui-map

我是 mvc 4 和 jquery mobile 的新手，我想做的是使用 jquery-ui-map 库显示地图。

这是我所拥有的：

1）在布局页面上，我在“正文结束”标签之前的底部有以下代码

```
@Scripts.Render("~/bundles/jquery","~/bundles/jqueryui")
@Scripts.Render("~/bundles/jquerymobile")
@RenderSection("scripts", required: false) 
```

2）在索引视图上，我有以下操作链接

```
@Html.ActionLink("Display Map","Map", "Home", null, 
        new { data_role = "button", data_theme = "b", data_mini = "true" }) 
```

当我单击上述操作链接时，它将获取用户位置并在谷歌地图上显示标记。

在 MAP 视图页面上，我在底部有以下代码

```
@section scripts{

     <script type="text/javascript" src="http://maps.google.com/maps/apis?sensor=false">
     </script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/map/demo.js")"></script>
    @Scripts.Render("~/Scripts/map/jquery.ui.map.min.js")
    @Scripts.Render("~/Scripts/map/jquery.ui.map.overlays.min.js")
    @Scripts.Render("~/Scripts/map/jquery.ui.map.extensions.js")
    $(function () {
            //code to display the map
        });
 } 
```

这是我遇到的问题....当我单击操作链接时，它将显示地图视图但不显示地图。

如果我刷新页面（f5 或单击浏览器刷新图标），它将调用`$function()`并显示地图。

1.  `@section`我在标签上做错了吗？
2.  如何强制页面重新加载它.. 我试过 do `Ajax.Actionlink`，或者`cacheduration`在 Controller Action 方法中设置为零，仍然不行。

我已经尝试了该论坛中所有可用的问题和答案，但仍然无法正常工作。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:20:57.573

发誓！！我花了大部分时间才弄清楚这个……我已经升级了 nuget 包，以获得最新的 Web.Optimization 和其他 dll，但直到现在它仍然不行。

最后，我看到了[Scott Hanselman 的 Create a great mobile site 的](http://www.hanselman.com/blog/CreateAGreatMobileExperienceForYourWebsiteTodayPlease.aspx)这篇文章。

在阅读这篇文章时，我偶然发现了这个脚本并将其放在我的 _Layout 页面中。现在我的网站按预期工作....

```
<script type="text/javascript">
 $(document).bind("mobileinit", function () {
     // jQuery Mobile's Ajax navigation does not work in all cases (e.g.,
     // when navigating from a mobile to a non-mobile page), especially when going    back, hence disabling it.
     $.mobile.ajaxEnabled = false;
  });
    </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:33:32.760

如果你想保留 ajax 功能，你也可以移动 @RenderSection("scripts", required: false) 在你里面 data-role="page" div

# c# - 在 Flash 窗口上使用带有 C# 的 user32.dll 模拟鼠标悬停

> ID：12553203
> 
> 赞同：1
> 
> 时间：2012-09-23T14:37:23.833
> 
> 标签：c#, .net

我需要在不移动实际鼠标的情况下将鼠标悬停消息发送到窗口中的特定点（窗口是 Flash 程序）。

我正在使用 mouse_event 进行左键单击。

目前我正在将实际鼠标移动到我想在窗口上模拟悬停事件的位置上）但是我不再控制我的鼠标并且做像停止程序这样的事情非常困难，因为程序有所有控制鼠标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T15:51:51.633

我写了一些我之前获得光标位置并在点击后恢复它的东西。似乎正在工作。

我不知道我是否可以完全避免光标移动，因为那将是绝对的解决方案。

```
public static void LeftClick(Point position)
    {
        Point cursorPosition;
        GetCursorPos(out cursorPosition);

        MoveMouseTo(position.X, position.Y);
        mouse_event((int)(MouseEventFlags.LEFTDOWN | MouseEventFlags.LEFTUP | MouseEventFlags.ABSOLUTE), position.X, position.Y, 0, IntPtr.Zero);

        SetCursorPos(cursorPosition.X, cursorPosition.Y);
    } 
```

# c++ - Linux中线程函数中的局部变量？

> ID：12553210
> 
> 赞同：0
> 
> 时间：2012-09-23T14:37:56.633
> 
> 标签：c++, linux, multithreading

```
struct node
{
public:
    char *s;
    int up;
    node()
    {
        up = 0;
        s = new char[1000];
        memset (s, 0, sizeof(char) * 1000);
    }
    ~node()
    {
        delete [] s;
    }
    void insert()
    {
        s[up++] = 'a';
    }
};

void* test_thread(void *arg)
{
    pthread_mutex_lock( &mutex1 );
    node n;
    n.insert();
    printf ("%s\n", n.s);
    printf ("%x\n", &n);
    pthread_mutex_unlock( &mutex1 );
    pthread_exit(0);
    //return 0;
} 
```

假设这个函数将由

```
pthread_create(&id1, NULL, test_thread, NULL);
pthread_create(&id2, NULL, test_thread, NULL); 
```

它是由

```
g++ test_thread.cpp -o main -lpthread -g 
```

它的结果是

```
a
40a001a0
a
40a001a0 
```

在我的 Linux 算子中，两个线程中节点 n 的地址是一样的！

我想知道为什么线程包含的节点n的地址是一样的？

任何答案都非常感谢~~~

谢谢~~~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T14:59:08.903

对象“节点 n”是堆栈本地的，因此两个线程中的每一个都有自己的“节点”。这就解释了为什么每次你只看到一个“a”而不是其中的两个。

当第二个线程启动时，第一个线程可能已经完成，包括释放内存，以便第二个线程再次获得相同的内存块，这解释了相同的地址。

如果您希望两个线程都在同一个“节点”上工作，则需要将其设为全局变量，或者分配一个并将指针作为第四个参数传递给 pthread_create()，以便将其传递给 test_thread()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:59:57.240

`sleep(1)`在退出线程之前添加。现在您应该看到两个不同的地址，但输出相同`'a'`。（虽然你需要`pthread_join`）。

现在，如果要打印，`'aa'`则可能必须在全局空间中定义节点或在 main 中定义它。

使用您当前的代码，`lock`/`unlock`没有任何用处，但是一旦您使用共享内存，第二个线程在第一个线程完成之前无法写入。

# python - Django：如何隐藏所有表单字段？

> ID：12553212
> 
> 赞同：0
> 
> 时间：2012-09-23T14:37:58.107
> 
> 标签：python, html, django, forms, django-forms

我有一个大约 8 个字段的 Django 表单类。如何动态地将**所有**这些表单字段隐藏在我的一个视图中？

样本：

```
class FormName(forms.Form):
    first_name = forms.CharField(max_length=20, widget=forms.TextInput(attrs="class":"validate[required,first_name]","tabindex":"4"}), required=True)
    middle_name = forms.CharField(max_length=20, widget=forms.TextInput(attrs="class":"validate[middle_name]","tabindex":"5"}), required=False)
    last_name = forms.CharField(max_length=40, widget=forms.TextInput(attrs="class":"validate[required,last_name]","tabindex":"6"}), required=True) 
```

我想这样做的原因是因为我将在其中一个注册页面中使用相同的表单，然后在其他地方再次使用类似的表单，我希望这些表单字段被隐藏。我不想创建一个单独的类，用“widget=forms.HiddenInput()”复制相同的字段。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T14:55:28.217

如果您需要一个带有隐藏输入的表单，您可以通过将附加变量传递给`__init__`方法来通知您的表单，例如：`form = FormName(is_hidden=True)`. 您的表格可能如下所示：

```
class FormName(forms.Form):
    first_name = forms.CharField(max_length=20, widget=forms.TextInput(attrs="class":"validate[required,first_name]","tabindex":"4"}), required=True)
    middle_name = forms.CharField(max_length=20, widget=forms.TextInput(attrs="class":"validate[middle_name]","tabindex":"5"}), required=False)
    last_name = forms.CharField(max_length=40, widget=forms.TextInput(attrs="class":"validate[required,last_name]","tabindex":"6"}), required=True)

    def __init__(self, *args, **kwargs):
        is_hidden = kwargs.pop('is_hidden', None)
        super(FormName, self).__init__(*args, **kwargs)
        if is_hidden:
            self.fields['first_name'].widget = forms.HiddenInput()
            self.fields['middle_name'].widget = forms.HiddenInput()
            self.fields['last_name'].widget = forms.HiddenInput() 
```

在所有其他情况下，您可以像往常一样使用您的表单，而无需传递`is_hidden`变量，它将使用您定义的默认小部件。

此外，您可以遍历`self.fields`字典，并隐藏所有字段小部件，而无需手动覆盖每个小部件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T15:41:09.490

我建议使用基于类的视图，如果你认为你会一遍又一遍地使用某些东西，例如：表单。您的视图应如下所示：

视图.py：

```
class BaseView(object):

    def __init__(self, request = None , form  = None, <#define anything you want here, like model = None or template = None>):
        if form:
            self.form = form
        else:
            self.form = FormName

        if #AnythingIWant:
            self.anythingiwant = anythingiwant
        else:
            self.anythingiwant = defaultofanythingiwant

    def __call__(self, request):
        self.request = request
        if self.request.method == 'POST':
            return self.POST_handler()
        else:
            return self.GET_handler()

    def POST_handler(self):
        #method to handle post request

    def GET_handler(self):
        #method to handle get request
        #because u want specific form reusable just add:
        # context = {'form' : self.form()}
        # then render a template with the context above

    def extra_context(self):
        return {} 
```

稍后如果您想使用该表单，只需继承`BaseView`，例如：

```
class IndexView(BaseView):
    #blahblahblah 
```

如果你想在你的`GET_handler()`使用中添加一些东西`extra_context`，例如如果你想添加另一个表单：

视图.py：

```
class ProfileView(BaseView):

    def extra_context(self):
        form = MyCustomForm()
        context = {'custom_form' : form}
        return context 
```

至于 urls.py：

`url(r'^$', ProfileView(), name='profile_view'),`

如果您想更改默认表单，只需像这样覆盖它：

`url(r'^$', ProfileView(form = MyCustomCustomForm), name='profile_view'),`

现在您可以`MyCustomCustomForm`在每个继承的视图中使用`BaseView`. 使用基于类的视图的好处是你可以对所有东西都这样做，而不仅仅是表单，也许你想一遍又一遍地使用一些模型

# c# - 在 C# 中使用接口作为“out”参数

> ID：12553214
> 
> 赞同：5
> 
> 时间：2012-09-23T14:38:04.387
> 
> 标签：c#, interface, polymorphism, abstract-class

如何在另一个接口的方法中使用接口或抽象类作为“out”参数？我不应该能够将一个接口用作另一个接口中的输出参数，然后在我实际调用该方法时让它接受任何实现该接口的类吗？

我需要一个事务接口，它有一个返回布尔值并填充“响应”对象的方法，但该响应对象是事务接口的每个不同实现的不同派生对象。提前致谢。

```
namespace csharpsandbox
{
class Program
{
    static void Main(string[] args)
    {
        TransactionDerived t = new TransactionDerived();
        t.Execute();
    }
}

public interface ITransaction
{
    bool Validate(out IResponse theResponse);
}

public interface IResponse { }

public class ResponseDerived : IResponse
{
    public string message { get; set; }

}

public class TransactionDerived : ITransaction
{
    public bool Validate(out IResponse theResponse) {

        theResponse = new ResponseDerived();
        theResponse.message = "My message";
        return true;
    }

    public void Execute()
    {
        ResponseDerived myResponse = new ResponseDerived();

        if (Validate(out myResponse))
            Console.WriteLine(myResponse.message);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T14:47:14.623

只要您适当地进行转换，您当前的实现就可以工作：

```
public class TransactionDerived : ITransaction
{
    public bool Validate(out IResponse theResponse)
    {    
        theResponse = new ResponseDerived();
        ((ResponseDerived)theResponse).message = "My message";

        return true;
    }

    public void Execute()
    {
        IResponse myResponse;

        if (Validate(out myResponse))
            Console.WriteLine(((ResponseDerived)myResponse).message);
    }
} 
```

然而，这很混乱。您可以通过使用通用接口来避免强制转换：

```
public interface ITransaction<T> where T : IResponse
{
    bool Validate(out T theResponse);
}

public class TransactionDerived : ITransaction<ResponseDerived>
{
    public bool Validate(out ResponseDerived theResponse)
    {    
        theResponse = new ResponseDerived();
        theResponse.message = "My message";

        return true;
    }

    public void Execute()
    {
        ResponseDerived myResponse;

        if (Validate(out myResponse))
            Console.WriteLine(myResponse.message);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T14:43:23.077

空的接口定义是没有意义的（见[这里](http://msdn.microsoft.com/en-us/library/ms182128%28v=vs.100%29.aspx)）。相反，尝试这样的事情：

```
public interface ITransaction
{
    bool Validate(out object theResponse);
} 
```

然后适当地投射你的对象。

# c# - C#在执行前检查Lua脚本

> ID：12553215
> 
> 赞同：-1
> 
> 时间：2012-09-23T14:38:05.053
> 
> 标签：c#, lua

我最近在我的项目中实现了lua脚本，用户可以在游戏编辑器中输入他们的自定义脚本，但问题是……他们很容易输入一些随机的东西，程序会异常死亡……

所以我的问题是：是否可以在执行之前*检查lua 脚本？*并且最好指向输入脚本不正确的确切位置。

我知道我可以添加“尝试”块，但这不是 imo 的最佳解决方案。

更新：按照评论中的要求：我正在为 NET 4 使用“LuaInterface”构建。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T16:17:58.383

请参阅手册中的[错误处理](http://www.lua.org/manual/5.2/manual.html#2.3)，特别是[`lua_load`](http://www.lua.org/manual/5.2/manual.html#lua_load). 这将捕获编译时错误。然后看看[`lua_pcall`](http://www.lua.org/manual/5.2/manual.html#lua_pcall)，也许是[`luaL_traceback`](http://www.lua.org/manual/5.2/manual.html#luaL_traceback)为了处理运行时错误。

# objective-c - 为什么这个 if 语句不起作用？Xcode

> ID：12553216
> 
> 赞同：-2
> 
> 时间：2012-09-23T14:38:09.843
> 
> 标签：objective-c, xcode, string

```
@implementation ViewController
-(IBAction)changelabel {
NSString *string1 =entername.text;
NSString *string2 =@"Alan Shearer";
NSString *string3 =@"Alan Shearer 260 Goals";

if([string1 isEqualToString:string2])

{label.text=string3;}
} 
```

我想要这样，当用户在文本字段中输入“Alan Shearer”时，它会将标签更改为 Alan Shearer

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T14:41:35.067

将发件人添加到您的方法

```
-(IBAction)changeLabel:(id)sender 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T14:41:38.793

写什么`NSLog(@"%@", string1)`？您的 NSString 比较方法是正确的。

# sql - 休眠版本控制对象

> ID：12553231
> 
> 赞同：0
> 
> 时间：2012-09-23T14:40:15.593
> 
> 标签：sql, database, hibernate, version

如果我们连续更新任何值，版本列将更新 +1 值..，这是实际概念。

我的问题是，如果我们用相同的值更新对象..，那么版本列会增加 +1 还是会保持原样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T14:51:05.563

当 Hibernate 从数据库加载对象时，它会将对象的快照存储在内存中。刷新完成后，它将对象的状态与加载时存储的快照进行比较。如果状态没有改变，则该对象不是脏的，并且不会对此对象进行更新，因此也不会增加版本。

# java - Java 输入字符串

> ID：12553237
> 
> 赞同：4
> 
> 时间：2012-09-23T14:40:52.493
> 
> 标签：java

我在返回用户输入字符串时遇到了困难。如果我有代码：

```
System.out.println("please enter a digit: ");
number1 = in.nextInt();
System.out.println("enter another digit: ");
number2 = in.nextInt();
System.out.println("enter a string: ");
string = in.nextLine();
//calculations

System.out.println(number1);
System.out.println(number2);
System.out.println(string); 
```

它打印出数字而不是字符串。我觉得解决方案很简单，但我现在脑子里放了个屁。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T14:46:20.243

`in.nextLine()`在调用`in.nextLine()`读取字符串之前，您需要调用一个额外的。它是消耗额外的换行符。

至于解释，让我们以这个输入为例：

```
23[Enter]
43[Enter]
Somestring[Enter] 
```

（23 和 43 可以是任意数字，**重要的是换行**）

您需要调用`in.nextLine()`以使用上一个新行`in.nextInt()`，特别是上面示例中的新行字符`43`。

`nextInt()`将消耗尽可能多的数字并在下一个字符是非数字时停止，因此新行就在那里。`nextLine()`将读取所有内容，直到遇到新行。这就是为什么您需要额外的内容`nextLine()`来删除 之后的新行`43`，以便您可以继续阅读`Somestring`下一行的内容。

例如，如果您的输入是这样的：

```
23 43 Somestring[Enter] 
```

您不按 Enter 并继续键入，然后您当前的代码将显示字符串（将是` Somestring`，注意空格），因为在 之后没有新行阻碍`43`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-23T14:45:38.763

线

```
int number2 = in.nextInt(); 
```

将字符串传递给语句

```
string = in.nextLine(); 
```

当您键入数字并按 ENTER 键时。`Scanner.nextLine()`在尝试读取另一个字符串之前使用此字符串将解决问题：

```
...
number2 = in.nextInt();
in.nextLine();
System.out.println("enter a string: ");
string = in.nextLine();
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T14:50:32.147

在您的情况下`in.next()`，如果两者之间没有空格，则足以读取字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T14:51:22.407

字符串 xxx;

扫描仪编号 1 = 新扫描仪（System.in）

xxx = number1.nextLine();

# algorithm - 快速排序：迭代或递归

> ID：12553238
> 
> 赞同：22
> 
> 时间：2012-09-23T14:41:01.043
> 
> 标签：algorithm, recursion, quicksort, iteration

我了解了快速排序以及如何在递归和迭代方法中实现它。
在迭代方法中：

1.  将范围 (0...n) 推入堆栈
2.  使用枢轴对给定数组进行分区
3.  弹出顶部元素。
4.  如果范围有多个元素，则将分区（索引范围）推入堆栈
5.  做以上3步，直到栈为空

递归版本是wiki中定义的正常版本。

我了解到递归算法总是比迭代算法慢。
那么，就时间复杂度而言，哪种方法更受欢迎（内存不是问题）？
哪一个速度足够快，可以在编程比赛中使用？
c++ STL sort() 是否使用递归方法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-23T14:48:56.657

**就（渐近）时间复杂度而言 - 它们都是相同的。**

“递归比迭代要慢”——这句话背后的原因是递归堆栈的开销（保存和恢复调用之间的环境）。
但是 - 这些是固定数量的操作，而不改变“迭代”的数量。

递归和迭代快速排序都是`O(nlogn)` *平均情况*和`O(n^2)` *最坏情况*。

* * *

**编辑：**

只是为了好玩，我运行了一个带有附加到帖子的（java）代码的基准测试，然后我运行了[wilcoxon 统计测试](http://en.wikipedia.org/wiki/Wilcoxon_signed-rank_test)，以检查运行时间确实不同的概率是多少

结果可能是决定性的（P_VALUE=2.6e-34, [https://en.wikipedia.org/wiki/P-value](https://en.wikipedia.org/wiki/P-value)。请记住，P_VALUE 是 P(T >= t | H) 其中 T 是检验统计量， H 是原假设）。但答案不是你所期望的。
迭代求解的平均值为 408.86 ms，递归求解的平均值为 236.81 ms

（注意 - 我使用`Integer`而不是`int`作为参数`recursiveQsort()`- 否则递归会取得更好的效果，因为它不必将很多整数装箱，这也很耗时 - 我这样做是因为迭代解决方案别无选择，但这样做。

因此 - 您的假设不正确，递归解决方案比 P_VALUE=2.6e-34 的迭代解决方案更快（对于我的机器和 java 来说）。

```
public static void recursiveQsort(int[] arr,Integer start, Integer end) { 
    if (end - start < 2) return; //stop clause
    int p = start + ((end-start)/2);
    p = partition(arr,p,start,end);
    recursiveQsort(arr, start, p);
    recursiveQsort(arr, p+1, end);

}

public static void iterativeQsort(int[] arr) { 
    Stack<Integer> stack = new Stack<Integer>();
    stack.push(0);
    stack.push(arr.length);
    while (!stack.isEmpty()) {
        int end = stack.pop();
        int start = stack.pop();
        if (end - start < 2) continue;
        int p = start + ((end-start)/2);
        p = partition(arr,p,start,end);

        stack.push(p+1);
        stack.push(end);

        stack.push(start);
        stack.push(p);

    }
}

private static int partition(int[] arr, int p, int start, int end) {
    int l = start;
    int h = end - 2;
    int piv = arr[p];
    swap(arr,p,end-1);

    while (l < h) {
        if (arr[l] < piv) {
            l++;
        } else if (arr[h] >= piv) { 
            h--;
        } else { 
            swap(arr,l,h);
        }
    }
    int idx = h;
    if (arr[h] < piv) idx++;
    swap(arr,end-1,idx);
    return idx;
}
private static void swap(int[] arr, int i, int j) { 
    int temp = arr[i];
    arr[i] = arr[j];
    arr[j] = temp;
}

public static void main(String... args) throws Exception {
    Random r = new Random(1);
    int SIZE = 1000000;
    int N = 100;
    int[] arr = new int[SIZE];
    int[] millisRecursive = new int[N];
    int[] millisIterative = new int[N];
    for (int t = 0; t < N; t++) { 
        for (int i = 0; i < SIZE; i++) { 
            arr[i] = r.nextInt(SIZE);
        }
        int[] tempArr = Arrays.copyOf(arr, arr.length);

        long start = System.currentTimeMillis();
        iterativeQsort(tempArr);
        millisIterative[t] = (int)(System.currentTimeMillis()-start);

        tempArr = Arrays.copyOf(arr, arr.length);

        start = System.currentTimeMillis();
        recursvieQsort(tempArr,0,arr.length);
        millisRecursive[t] = (int)(System.currentTimeMillis()-start);
    }
    int sum = 0;
    for (int x : millisRecursive) {
        System.out.println(x);
        sum += x;
    }
    System.out.println("end of recursive. AVG = " + ((double)sum)/millisRecursive.length);
    sum = 0;
    for (int x : millisIterative) {
        System.out.println(x);
        sum += x;
    }
    System.out.println("end of iterative. AVG = " + ((double)sum)/millisIterative.length);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-23T14:47:38.883

递归并不总是比迭代慢。快速排序就是一个很好的例子。以迭代方式执行此操作的唯一方法是创建堆栈结构。因此，如果我们使用递归，则以其他方式与编译器执行相同的操作，并且您可能会比编译器做得更糟。如果您不使用递归（将值弹出并将值推送到堆栈），也会有更多的跳转。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-12T19:10:19.323

这就是我在 Javascript 中提出的解决方案。我认为它有效。

 `````
function qs_iter(items) {
    if (!items || items.length <= 1) {
        return items
    }
    var stack = []
    var low = 0
    var high = items.length - 1
    stack.push([low, high])
    while (stack.length) {
        var range = stack.pop()
        low = range[0]
        high = range[1]
        if (low < high) {
            var pivot = Math.floor((low + high) / 2)
            stack.push([low, pivot])
            stack.push([pivot+1, high])
            while (low < high) {
                while (low < pivot && items[low] <= items[pivot]) low++
                while (high > pivot && items[high] > items[pivot]) high--
                if (low < high) {
                    var tmp = items[low]
                    items[low] = items[high]
                    items[high] = tmp
                }
            }
        }
    }
    return items
} 
````  `如果您发现错误，请告诉我:)``

# java - 在 web 应用程序 maven 中包含 jar 文件

> ID：12553250
> 
> 赞同：0
> 
> 时间：2012-09-23T14:42:10.137
> 
> 标签：java, tomcat, maven

我是 Java 开发的新手，问题是：我已经生成了 Web 应用程序
`mvn archetype:generate -DgroupId=com.mycompany.app -DartifactId=webapp -DarchetypeArtifactId=maven-archetype-webapp`
，然后我添加`java.com.mycompany.app`了包含简单`App.java`文件的文件夹。通过我的 localhost:8080/manager 中的命令`mvn package tomcat:deploy`，我可以看到我的网络应用程序，但是如何在其中添加我的 jar 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T14:55:17.280

*   在 中添加类时`src/main/java`，Maven 会对其进行编译并确保将其复制到您的`WEB-INF/classes`目录中——因此无需执行任何操作。所以你的类`com.mycompany.app.App`应该已经被 Maven 拾取，编译并复制到`WEB-INF/classes`（你应该能够在`target/`文件夹中验证这一点）。
*   如果您想将另一个 jar 文件添加到您的 war 文件中，您需要[将此 jar 作为 Maven 依赖项添加](https://stackoverflow.com/questions/396245/add-a-dependency-in-maven)到您的`pom.xml`文件中。

# c# - 文件存在时未找到文件

> ID：12553253
> 
> 赞同：0
> 
> 时间：2012-09-23T14:42:21.853
> 
> 标签：c#, file, windows-8

我正在使用 Visual Studio 2012 在 Windows 8 RTM（禁用 UAC）上的 .NET 4.0 中开发 Windows 窗体应用程序。我当前的问题是，当我使用 WebClient 下载文件并在完成下载后尝试访问它时，File.Exists 显示为 false . 如果我打开 Windows 资源管理器，该文件存在并且超过 10MB。例如，它是一个视频文件，如果我尝试通过 ffmpeg 转换它，ffmpeg 显示它找不到文件 C:\.... 但是如果我复制该路径并将其粘贴到资源管理器中，它会打开视频. 出了什么问题？“以管理员身份运行”没有帮助。这是代码。

```
String video = Path.Combine(Environment.CurrentDirectory, "tempVideo.mp4");
WebClient downloader = new WebClient();
downloader.DownloadFile(new Uri("http://someurl/somevideo.mp4"), video); //download is successfull
FileInfo dlVideo = new FileInfo(video);
if(dlVideo.Exists) //always false, File.Exists(video) also false
{
//Some other actions on file
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T15:50:50.370

最后我发现了问题，非常愚蠢和尴尬。代码示例非常简单，因为我的整个抽象类都会解决这个问题。在我的抽象基类的某个地方，扩展被添加了两次，所以输出文件是 tempVideo.mp4.mp4 。Windows 资源管理器似乎忽略了扩展名，因此它是打开文件的唯一程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T15:23:10.023

在 Windows 7 中，从 Web 下载的文件默认被阻止，必须解除阻止才能通过外部程序访问它们：

![](../Images/e71a311062ad5cb7db3e2e94cb064c96.png)

在 Windows 8 中可能是相同的。至于通过代码解除阻止：
[Unblock File from within .net 4 c#](https://stackoverflow.com/questions/6374673/unblock-file-from-within-net-4-c-sharp)

# android - 有什么方法可以在 Eclipse 上添加我的签名，以便我可以从 Eclipse 运行我的代码？

> ID：12553258
> 
> 赞同：0
> 
> 时间：2012-09-23T14:42:54.380
> 
> 标签：android, eclipse, code-signing, robotium

我是Robotium的新手。每次，如果我更改代码，我需要创建 apk，然后我需要在模拟器中安装，并且必须通过运行 shell 命令继续测试。

有什么方法可以在 Eclipse 上添加我的签名，以便我可以从 Eclipse 运行？

我已经尝试过偏好设置，它有客户密钥库，但我没有得到任何输入密码的字段。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:17:32.173

如果您使用的是未创建的不同 apk 并看到“签名不匹配”，那么您需要更改该 apk 的签名，

1)-`META-INF`从 TestApp.apk 中删除 " " 文件夹

2)-`jarsigner -sigalg MD5withRSA -digestalg SHA1 -keystore debug.keystore -storepass android -keypass android TestApp.apk androiddebugkey`

如果您已正确安装 eclipse 和 Android SDK ，您会发现“ `debug.keystore`” 。`C:\Users\YourUserName\\.android\`

3)-`zipalign 4 TestApp.apk SignedTestApp.apk`

4)-`jarsigner -verify SignedTestApp.apk`

5)- 安装`SignedTestApp.apk`并再次测试您的自动化。

例如，您想为 gmail 应用程序进行自动化，然后 TestApp.apk = Gmail.apk

您可以从此[链接](http://developer.android.com/tools/publishing/app-signing.html)找到信息。我希望这能解决您的“ `signature mismatch`”问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T15:21:09.587

这比这容易得多。如果**eclipse**和**Android SDK**配置正确，您只需单击一下即可在真机或模拟器上运行您的应用程序。在这种情况下，eclipse 会使用 a`debug key`来签署应用程序。

当你想发布**最终的 apk**时，你应该右键单击 project 和 from `Android tools`，选择`Export signed Application...`然后制作你的**密钥库**或使用以前的密钥库来签署发布包。

# c# - SqlDataAdapter 返回空数据集

> ID：12553259
> 
> 赞同：2
> 
> 时间：2012-09-23T14:43:00.573
> 
> 标签：c#, asp.net, sql-server-2012

我有个问题。我整天都试图解决它，但我真的被困住了。我正在使用 VS2010 和 SQL Server 2012（相当糟糕的组合），我正在尝试执行一段相当简单的 C# 和 ASP.net 代码，如下所示：

```
string conn = ConfigurationManager.ConnectionStrings["BazaConnectionString"].ConnectionString;

SqlConnection connect = new SqlConnection(conn);

SqlDataAdapter sqlAdapter = new SqlDataAdapter();
SqlCommand cmd = new SqlCommand("SELECT * FROM  Seminar", connect);
sqlAdapter.SelectCommand = cmd;

DataTable tablica = new DataTable();
sqlAdapter.Fill(tablica);

GridView1.DataSource = tablica;
GridView1.DataBind(); 
```

问题是我的 gridview 总是空的。我在表中有数据，`SELECT *`应该选择所有数据，但我返回了一个空表。我一直在尝试 Dataset 和 DataTable 但似乎没有任何效果。任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T14:47:51.147

我有一种预感，你可能会遇到异常——可能是超时——而你没有正确处理这个问题......

尝试这样的事情：

```
string conn = ConfigurationManager.ConnectionStrings["BazaConnectionString"].ConnectionString;

using (SqlConnection connect = new SqlConnection(conn))
using (SqlCommand cmd = new SqlCommand("SELECT * FROM  Seminar", connect))
using (SqlDataAdapter sqlAdapter = new SqlDataAdapter(cmd))
{
   try
   {
      DataTable tablica = new DataTable();
      sqlAdapter.Fill(tablica);

      GridView1.DataSource = tablica;
      GridView1.DataBind();
   }
   catch(Exception exc)
   {
       string msg = exc.GetType().FullName + ": " + exc.Message;
   }
} 
```

如果您执行此代码 - 您是否碰巧陷入困境`catch`？如果是这样：有什么例外？它告诉你什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T14:47:49.337

```
SqlConnection connect = new SqlConnection(conn);
connect.Open(); 
```

# javascript - 将原始图像绘制到画布中

> ID：12553265
> 
> 赞同：1
> 
> 时间：2012-09-23T14:43:50.893
> 
> 标签：javascript, html, canvas, image

我想将上传的图像放入画布并使用它。

HTML：

```
<h2>Upload:</h2>
<input type="file" id="take-picture" accept="image/*">

<h2>Preview:</h2>
<p>
    <canvas id="show-picture" style="background-color: aqua; height: 100px; width: 100px;" />
</p> 
```

这是我上传后处理图片的javascript：

```
 takePicture.onchange = function (event) {
        var files = event.target.files,
            file;
        if (files && files.length > 0) {
            file = files[0];
            processImage(file);
        }
    }; 
```

现在在 processImage 方法中，图片应该存储在画布中。

```
function processImage(file) {
    // showImage(showPicture, file); //loading into a regular img-tag

    var canvas = document.getElementById('show-picture');
    var context = canvas.getContext('2d');
    context.drawImage(file, 100, 100);
} 
```

我能够将此文件放入 img-tag 中，但我不能简单地绘制它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T14:58:09.617

drawImage 函数将 img 元素作为输入，而不是文件。

因此，您需要从文件中创建一个 img 元素（但您不需要将其附加到文档中）。当图像完成加载（有一个 onload 事件）时，您可以在画布上绘制它。

**编辑：**在将其设置为图像 src 之前，您还需要将文件的内容作为数据 url 读取。

```
var reader = new FileReader();
reader.readAsDataUrl(file)
reader.onload = function(e) {
    var img = new Image();
    img.onload = function() {
       context.drawImage(img, 100,100)
    }
    img.src = e.target.result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-15T15:19:10.823

必须自己解决这样的问题，这就是我的做法

读取与 Philippe Mongeau 所做的相同的原始图像数据

```
var reader = new FileReader();
reader.readAsDataURL(dataURItoBlob(rawImageData));
reader.onload = function (e)
{
    // load the data as an image to draw it into the canvas
    var img    = new Image();
    img.onload = function ()
    {
        ctx.drawImage(img, 0, 0);
    };
    img.src    = e.target.result;
};

function dataURItoBlob (dataURL)
{
    var onlyData = dataURL.substring(dataURL.indexOf(',') + 1);
    var decoded  = atob(onlyData);
    var dl       = decoded.length;
    var buffer   = new Uint8Array(dl);

    for (var i = 0; i < dl; i++) buffer[i] = decoded.charCodeAt(i);

    return new Blob([buffer], {type: 'image/png'});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-16T12:35:08.753

您不需要 FileReader + Image 导致两个回调。
将其读取为 DataURL (base64) 会占用更多内存/cpu，并且会减慢速度。

只需创建一个 ObjectURL 就足够了

```
var img = new Image
img.onload = function() {
   context.drawImage(img, 100,100)
}
img.src = URL.createObjectURL(file) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-23T14:59:21.987

试试这个

```
function loadImage() {
            var ctx = getCanvas('testCanvas').getContext('2d'); // get Canvas context
            var img = new Image();
            img.src = 'imgs/test.png';
            img.onload = function(){
                ctx.drawImage(img, 200, 200, 300, 200); // x, y, width, height
            }
        } 
```

# mysql - 如何使用 ADODB 环境从 VB（旧版 ASP）设置 SQL_BIG_SELECTS = 1？

> ID：12553267
> 
> 赞同：0
> 
> 时间：2012-09-23T14:43:57.053
> 
> 标签：mysql, asp-classic, adodb

我遇到

> SELECT 将检查超过 MAX_JOIN_SIZE 行；检查您的 WHERE 并使用 SET SQL_BIG_SELECTS=1 或 SET SQL_MAX_JOIN_SIZE=# 如果 SELECT 没问题

**我的ASP**代码出错。ASP 代码具有与 MySQL 的**服务器端 ADODB 连接**，并且连接似乎无法执行多个查询。如何在我的代码中实现**SQL_BIG_SELECTS = 1 ？**

```
Set obj_db = Server.CreateObject("ADODB.Connection")
Session("ConnectionString") =  "dsn=dsn1016189_mysql;uid=apns;pwd=mypassword;DATABASE=mydb;APP=ASP Script;STMT=SET CHARACTER SET SJIS"
obj_db.Open Session("ConnectionString")
Set obj_ret = Server.CreateObject("ADODB.Recordset")
obj_ret.CursorLocation = 3 
```

并执行 SQL...

```
SQL_BIG_SELECTS = 1; SELECT pu.login_id, pu.p_login_id, pu.first_name, pu.last_name, pu.sex, pu.is_admin, pu.attendance, pu.invited, pu.reason, qaa1.answer AS qaa1_answer, COUNT(pu2.p_login_id) AS companion
FROM party_user pu
LEFT OUTER JOIN party_user pu2
ON pu2.p_login_id = pu.login_id
LEFT OUTER JOIN qa_answer qaa1
ON qaa1.login_id = pu.login_id AND qaa1.party_id = pu.party_id AND qaa1.sort_num = '1' WHERE pu.party_id = '92' AND pu.p_login_id = '' GROUP BY pu.login_id, pu.p_login_id, pu.first_name, pu.last_name, pu.sex, pu.is_admin, pu.attendance, pu.reason, qaa1.answer, pu.invited ORDER BY pu.login_id ASC; 
```

我无法执行多个查询，上面的查询变成错误。

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SELECT pu.login_id, pu.p_login_id, pu.first_name, pu.last_name, pu.sex, pu.is_ad' at line 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T15:36:53.040

对不起，我错过了理解和编码。执行两次 SET 命令和 SQL 查询就足够了。

谢谢

# iphone - 在主视图控制器背景上启动图像拉伸

> ID：12553269
> 
> 赞同：0
> 
> 时间：2012-09-23T14:44:04.213
> 
> 标签：iphone

我想在我的主视图控制器上显示我的应用程序的启动图像（640x960）。我将 UIImageView 添加到视图并将图像设置为启动图像。但是，图像被拉伸。

我希望能够使图像的顶部 40px 位于状态栏下方，这样就不需要拉伸。换句话说，我想让图像填满整个 iphone 屏幕，并且状态栏将简单地位于图像顶部。（我认为这是在应用程序启动时最初显示启动图像时发生的情况。）

如何才能做到这一点？

另一种选择是使用Photoshop创建图像，将图像的高度剪掉40个像素，所以它将是640x920，然后不会有任何问题，但我不想创建另一个图像，因为我认为应该有一种方法可以从代码中做到这一点。

编辑：找到解决方案，在下面阅读我的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T14:48:29.420

使用视图属性既不是填充也不是适合；并将 UIImageView 的尺寸设置为图像的确切尺寸。

此外，您的框架应为 0、20、320、460，因为状态栏的高度为 20 像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T18:25:05.263

找到了解决方案。

首先，正如我所想，当应用程序启动时，会显示启动的图像，而状态栏会裁剪图像的顶部 20pt。

为了在您的视图控制器中实现这一点，只需：

1.  添加 UIImageView 并选择你想要的图像
2.  在 Attributes 检查器中选择 Mode: Scale to Fill
3.  在尺寸检查器中，X=0，Y=-20，宽度=320，高度=480

还有沃利亚，给你！

享受。

# wpf - 带有其他控件的 WPF 主菜单

> ID：12553270
> 
> 赞同：1
> 
> 时间：2012-09-23T14:44:06.937
> 
> 标签：wpf, menu

我对 WPF 很陌生，这可能是一个微不足道的问题。我想要的是有一个主菜单，例如文件、编辑、视图等，并在窗口中有几个控件，例如几个文本框、按钮、列表框等。我应该如何构建我的 XAML？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T18:24:26.247

```
 <Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <!--
        MENU
    -->
    <Menu>
        <MenuItem Header="File"/>
        <MenuItem Header="Edit"/>
        <MenuItem Header="Help"/>
    </Menu>

    <!--
          APP CONTENT
    -->
    <Grid Grid.Row="1" Margin="20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <TextBox Text="Enter text here" Height="20"/>
        <Button Content="Click me" Height="20" Grid.Column="1"/>
    </Grid>
</Grid> 
```

见[http://wpftutorial.net/GridLayout.html](http://wpftutorial.net/GridLayout.html)

# java - 将各种数据类型的值写入文本文件以进行查询

> ID：12553271
> 
> 赞同：0
> 
> 时间：2012-09-23T14:44:18.170
> 
> 标签：java, text

对于旨在从文本文件中查询字符串行作为数据库的程序来说，理想的构造/设计是什么？我的主要问题是如何将一个包含不同数据类型（UUID、字符串、字符串、双精度、双精度、整数）值的对象作为单个包写入到文本文件中，这些数据也将被查询。我正在为这些值考虑一个类似数组的容器，以便在查询时，输出将打印出该包中的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T14:50:15.610

想要保存到文本文件并从文本文件中查询的原因是什么？是为了避免设置数据库守护进程吗？

您有几个选择，具体取决于您要实现的目标以及这样做的原因。

1.  您可以将您的数据结构序列化为文本文件，然后稍后将其直接反序列化为原始数据类型。

2.  您还可以使用非 SQL 解决方案，例如 MongoDB，它也可以将您的数据保存到文本文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T14:50:31.600

假设您不需要**有效**的查询，我认为最适合您的是使用[JSON](http://www.json.org/)格式。看看[Gson](http://code.google.com/p/google-gson/)库。它对对象映射和序列化做了很好的 JSON。

[在这里](http://www.mkyong.com/java/how-do-convert-java-object-to-from-json-format-gson-api/)，您可以找到一个不错的 2 分钟指南和示例。

# javascript - 根据属性获取数组元素的索引

> ID：12553274
> 
> 赞同：34
> 
> 时间：2012-09-23T14:44:29.510
> 
> 标签：javascript, arrays, object

我有一个 JavaScript 对象数组，如下所示：

```
var myArray = [{...}, {...}, {...}]; 
```

每个对象`id`在其他属性中都具有独特性：

```
{ 
  id: 4,
  property1: 'something',
  property2: 'something'
} 
```

如果我只知道它的属性，如何获得该数组中特定对象的索引`id`？所以如果我知道，`myArray[x].id == 4`我怎么能找到`x`？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-09-23T15:00:49.340

```
var index = myArray.map(function(el) {
  return el.id;
}).indexOf(4); 
```

对于 IE 9 以下，[map](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)需要补丁，或者只使用循环。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-12-31T15:34:24.993

或者使用 ES6 语法：

```
let index = myArray.map( el => el.id ).indexOf(4) 
```

或者

```
let index = myArray.findIndex( el => el.id === 4 ) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-23T14:46:03.090

为什么不简单地做一个循环？

```
function indexOfId(array, id) {
    for (var i=0; i<array.length; i++) {
       if (array[i].id==id) return i;
    }
    return -1;
} 
```

js（或 js 库）中有许多设施这一事实并不意味着您有时不必编写循环。这既快速又简单。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-31T06:41:46.617

[ES6 Array.findIndex](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex)

```
const myArray = [{id:1}, {id:2}, {id3}];
const foundIndex = myArray.findIndex((el) => (el.id === 3)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T14:58:18.217

您可以使用`.reduce()`，它可以让您将 Array 缩减为单个值。

```
var obj_idx = myArray.reduce(function(idx, item, i) {
  return item.id === 4 ? i : idx;
}, -1); 
```

`-1`如果未找到匹配项，则为默认值。

* * *

如果您对此有多种用途，则可能需要创建一个函数工厂。

```
function idxForID(target) {
    return function(idx, item, i) {
      return item.id === target ? i : idx;
    };
} 
```

然后像这样使用它。

```
var obj_idx = myArray.reduce(idxForID(4), -1); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-23T15:02:10.600

如果每个 id 都是唯一的，你可以这样做：

```
o1 = {id:1}
o2 = {id:2}
o3 = {id:3}
o4 = {id:4}
a = [o1,o2,o3,o4]
a.indexOf( a.filter( function(i){return i.id==4} )[0] ); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-23T15:03:20.103

您也可以尝试递归函数，尽管@xdazz 看起来很有吸引力。

```
var indexOfId = function(arr, id, index) {
    if (!index) { index = 0; }
    if (arr[index].id == id) {
      return index;
    }
    return ((index += 1) >= arr.length) ? -1 : indexOfId(arr, id, index);
}; 
```

# wcf - 获取“找不到与绑定 WSHttpBinding 的端点的方案 http 匹配的基地址。注册的基地址方案是 []”

> ID：12553275
> 
> 赞同：9
> 
> 时间：2012-09-23T14:44:30.290
> 
> 标签：wcf, wshttpbinding

我已经通过 Stack Overflow 并遵循了 SSL 和 WebHttpBinding[的在线教程](http://taciturndiscourse.com/services/ssl-for-webhttpbinding/)。

我得到了与那里提到的相同的错误。我已恢复到旧的 Web 配置，如下所示。我的 https 站点运行良好，我将 WCF 添加为站点的一部分以避免必须打开新端口。

当我收到错误时，我现在正试图达到这样的效果：

> `https://localhost/_vti_bin/TestingSQL/sample.svc/mex`

```
<?xml version="1.0"?>
<configuration>
  <system.serviceModel>
<services>
  <service name="SharePointBits.Samples.WCFService.SampleService" behaviorConfiguration="SharePointBits.Samples.WCFService.SampleServiceBehavior">
<host> 
<baseAddresses> 
            <add baseAddress="https://testsite/_vti_bin/TestingSQL/Sample.svc"/> 
        </baseAddresses> 
    </host>

    <endpoint address="https://localhost/_vti_bin/TestingSQL/Sample.svc" binding="wsHttpBinding" contract="SharePointBits.Samples.WCFService.ISampleService" 
bindingConfiguration="wsHttpBindingEndpointBinding">
          <identity>
            <dns value="localhost"/>
      </identity>
  </endpoint>
  <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange"/>
  </service>
</services>
<bindings>
  <wsHttpBinding>
    <binding name="wsHttpBinding">
      <security mode="Transport">
        <transport clientCredentialType="None"/>
      </security>
    </binding>
  </wsHttpBinding>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name="SharePointBits.Samples.WCFService.SampleServiceBehavior">
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpsGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
    <!--<behavior name="">-->
      <!--<serviceMetadata httpGetEnabled="true" />-->
    <!--</behavior>-->
  </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration>' 
```

添加我的网址后，出现一个新错误：

> 找不到与绑定 MetadataExchangeHttpsBinding 的终结点的方案 https 匹配的基地址。注册的基地址方案是 []。

我尝试了两种方法，但都有错误。

添加一个绝对地址给`metadatabinding`我这个错误：

> ServiceMetadataBehavior 的 HttpsGetEnabled 属性设置为 true，HttpsGetUrl 属性是相对地址，但没有 https 基地址。提供 https 基地址或将 HttpsGetUrl 设置为绝对地址。

使用基地址我得到这个错误：

> 找不到与绑定 MetadataExchangeHttpsBinding 的终结点的方案 https 匹配的基地址。注册的基地址方案是 []。

**注意**：我已经使用基地址更改了上面的代码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-23T15:45:23.873

您有一个 MEX 端点，其地址使 WCF 认为它是相对的，但您没有提供基地址。例如，将 MEX 端点更改为：

```
<endpoint address="https://testsite/_vti_bin/TestingSQL/mex" 
          binding="mexHttpsBinding" 
          contract="IMetadataExchange"/> 
```

Either that, or specify a [BaseAddress](http://msdn.microsoft.com/en-us/library/ms788982.aspx) and use that on your endpoints.

In addition, you may want to tweak the [serviceMetaData](http://msdn.microsoft.com/en-us/library/ms731317.aspx) element, specifically the httpsGetUrl.

# php - 如何在不使用php的情况下进行sql查询检查是否为空

> ID：12553276
> 
> 赞同：0
> 
> 时间：2012-09-23T14:44:32.647
> 
> 标签：php, mysql, sql

在这个 SQL 查询中，我在会话中设置了按 id 选择，但在某些情况下，没有找到与表中的字段匹配的任何 id，因此我将`if/else`语句与`mysql_num_rows`函数一起放置以避免错误消息...

`mysql_num_rows`所以我的问题是：是否有任何 SQL 代码可以在不使用函数的情况下检查是否存在价值？

```
SELECT *
     , d_articles.ar_id
     , d_articles.ar_article_title
     , d_articles.ar_article_desc
     , d_articles.ar_created
     , d_articles.ar_link_img
     , d_articles.ar_img
FROM
     d_articles
WHERE
     d_articles.ar_hide = 1 AND 
     d_articles.ar_category_id ='" . $this->session->userdata('branch_id') . "'
ORDER BY 
    ar_created desc limit 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T14:47:08.347

```
<?php
$result = mysql_query('SELECT * WHERE 1=1');
if (!$result) {
    die('Invalid query: ' . mysql_error());
}

?> 
```

对于 SQL 查询：

```
$tsql = "SELECT ProductID, Name, Color, Size, ListPrice

           FROM Production.Product

           WHERE Name LIKE '%' + ? + '%' AND ListPrice > 0.0";

  $params = array( $_REQUEST['query'] );

  $getProducts = sqlsrv_query( $conn, $tsql, $params);

  if ( $getProducts === false)

        { die( FormatErrors( sqlsrv_errors() ) ); } 
```

[阅读更多](http://msdn.microsoft.com/en-us/library/cc793139%28v=sql.90%29.aspx)

# c# - 使用 HttpClient 允许不受信任的 SSL 证书

> ID：12553277
> 
> 赞同：155
> 
> 时间：2012-09-23T14:45:00.563
> 
> 标签：c#, .net, windows-8, windows-runtime

我正在努力让我的 Windows 8 应用程序通过 SSL 与我的测试 Web API 进行通信。

似乎 HttpClient/HttpClientHandler 没有提供忽略不受信任的证书的选项，如 WebRequest 使您能够（尽管以“hacky”方式使用`ServerCertificateValidationCallback`）。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2013-08-14T12:39:25.617

一个快速而肮脏的解决方案是使用[`ServicePointManager.ServerCertificateValidationCallback`](https://docs.microsoft.com/en-us/dotnet/api/system.net.servicepointmanager.servercertificatevalidationcallback)委托。这允许您提供自己的证书验证。验证在整个应用程序域中全局应用。

```
ServicePointManager.ServerCertificateValidationCallback +=
    (sender, cert, chain, sslPolicyErrors) => true; 
```

我主要将其用于单元测试，在我想针对正在托管的端点运行并尝试使用[WCF 客户端](https://docs.microsoft.com/en-us/dotnet/framework/wcf/wcf-client-overview)或[`HttpClient`](https://docs.microsoft.com/en-us/dotnet/api/system.net.http.httpclient).

对于生产代码，您可能需要更细粒度的控制，最好使用 the[`WebRequestHandler`](https://docs.microsoft.com/en-us/dotnet/api/system.net.http.webrequesthandler)及其[`ServerCertificateValidationCallback`](https://docs.microsoft.com/en-us/dotnet/api/system.net.http.webrequesthandler.servercertificatevalidationcallback)委托属性（请参阅[下面的 dtb 答案](https://stackoverflow.com/a/12553854/227200)）。或ctacke[使用](https://stackoverflow.com/a/46626858/227200). [`HttpClientHandler`](https://docs.microsoft.com/en-us/dotnet/api/system.net.http.httpclienthandler)我现在更喜欢这两个中的任何一个，即使我的集成​​测试胜过我过去的做法，除非我找不到任何其他钩子。

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2017-10-08T01:59:40.833

如果您尝试在 .NET Standard 库中执行此操作，这里有一个简单的解决方案，其中存在仅`true`在处理程序中返回的所有风险。我把安全留给你。

```
var handler = new HttpClientHandler();
handler.ClientCertificateOptions = ClientCertificateOption.Manual;
handler.ServerCertificateCustomValidationCallback = 
    (httpRequestMessage, cert, cetChain, policyErrors) =>
{
    return true;
};

var client = new HttpClient(handler); 
```

* * *

## 回答 #3

> 赞同：100
> 
> 时间：2012-09-23T16:04:52.390

查看[WebRequestHandler 类](http://msdn.microsoft.com/en-us/library/system.net.http.webrequesthandler.aspx)及其[ServerCertificateValidationCallback 属性](http://msdn.microsoft.com/en-us/library/system.net.http.webrequesthandler.servercertificatevalidationcallback.aspx)：

```
using (var handler = new WebRequestHandler())
{
    handler.ServerCertificateValidationCallback = ...

    using (var client = new HttpClient(handler))
    {
        ...
    }
} 
```

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2019-10-29T10:41:00.567

如果您使用的是`System.Net.Http.HttpClient`我相信正确的模式是

```
var handler = new HttpClientHandler() 
{ 
    ServerCertificateCustomValidationCallback = HttpClientHandler.DangerousAcceptAnyServerCertificateValidator
};

var http = new HttpClient(handler);
var res = http.GetAsync(url); 
```

[链接到官方文档](https://docs.microsoft.com/en-us/dotnet/api/system.net.http.httpclienthandler.dangerousacceptanyservercertificatevalidator?view=net-6.0)

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2015-02-27T10:39:54.003

或者您可以在命名空间中使用**HttpClient**`Windows.Web.Http`：

```
var filter = new HttpBaseProtocolFilter();
#if DEBUG
    filter.IgnorableServerCertificateErrors.Add(ChainValidationResult.Expired);
    filter.IgnorableServerCertificateErrors.Add(ChainValidationResult.Untrusted);
    filter.IgnorableServerCertificateErrors.Add(ChainValidationResult.InvalidName);
#endif
using (var httpClient = new HttpClient(filter)) {
    ...
} 
```

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2019-02-15T10:20:48.217

这里的大多数答案都建议使用典型模式：

```
using (var httpClient = new HttpClient())
{
 // do something
} 
```

因为 IDisposable 接口。**请不要！**

微软告诉你原因：

*   [不正确的实例化反模式](https://docs.microsoft.com/en-us/azure/architecture/antipatterns/improper-instantiation)
*   [HttpClient、HttpClientHandler 和 WebRequestHandler 解释](https://blogs.msdn.microsoft.com/henrikn/2012/08/07/httpclient-httpclienthandler-and-webrequesthandler-explained/)

在这里您可以找到幕后发生的详细分析： [您使用 HttpClient 错误，它正在破坏您的软件](https://aspnetmonsters.com/2016/08/2016-08-27-httpclientwrong/)

微软官方链接：[HttpClient](https://docs.microsoft.com/en-us/dotnet/api/system.net.http.httpclient)

> **HttpClient 旨在被实例化一次并在应用程序的整个生命周期中重复使用。为每个请求实例化一个 HttpClient 类将耗尽重负载下可用的套接字数量。这将导致 SocketException 错误。**

关于您的 SSL 问题并基于[不正确的实例化反模式 # 如何解决问题](https://docs.microsoft.com/en-us/azure/architecture/antipatterns/improper-instantiation/#how-to-fix-the-problem)

**这是你的模式：**

```
class HttpInterface
{
 // https://docs.microsoft.com/en-us/azure/architecture/antipatterns/improper-instantiation/#how-to-fix-the-problem
 // https://docs.microsoft.com/en-us/dotnet/api/system.net.http.httpclient#remarks
 private static readonly HttpClient client;

 // static initialize
 static HttpInterface()
 {
  // choose one of these depending on your framework

  // HttpClientHandler is an HttpMessageHandler with a common set of properties
  var handler = new HttpClientHandler()
  {
      ServerCertificateCustomValidationCallback = delegate { return true; },
  };
  // derives from HttpClientHandler but adds properties that generally only are available on full .NET
  var handler = new WebRequestHandler()
  {
      ServerCertificateValidationCallback = delegate { return true; },
      ServerCertificateCustomValidationCallback = delegate { return true; },
  };

  client = new HttpClient(handler);
 }

 .....

 // in your code use the static client to do your stuff
 var jsonEncoded = new StringContent(someJsonString, Encoding.UTF8, "application/json");

 // here in sync
 using (HttpResponseMessage resultMsg = client.PostAsync(someRequestUrl, jsonEncoded).Result)
 {
  using (HttpContent respContent = resultMsg.Content)
  {
   return respContent.ReadAsStringAsync().Result;
  }
 }
} 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2013-09-23T02:15:07.643

在 Windows 8.1 中，您现在可以信任无效的 SSL 证书。您必须使用 Windows.Web.HttpClient，或者如果您想使用 System.Net.Http.HttpClient，您可以使用我写的消息处理程序适配器： [http ://www.nuget.org/packages/WinRtHttpClientHandler](http://www.nuget.org/packages/WinRtHttpClientHandler)

文档在 GitHub 上： [https ://github.com/onovotny/WinRtHttpClientHandler](https://github.com/onovotny/WinRtHttpClientHandler)

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2013-01-04T23:36:21.410

如果这是针对 Windows 运行时应用程序，则必须将自签名证书添加到项目并在 appxmanifest 中引用它。

文档在这里：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh465031.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465031.aspx)

如果它来自不受信任的 CA（例如机器本身不信任的私有 CA），则同样如此——您需要获取 CA 的公共证书，将其作为内容添加到应用程序中，然后将其添加到清单中。

完成后，应用程序会将其视为正确签名的证书。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2019-05-09T10:48:41.240

[我在这个Kubernetes 客户端](https://github.com/kubernetes-client/csharp/pull/174)中找到了一个示例，他们使用[X509VerificationFlags.AllowUnknownCertificateAuthority](https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.x509certificates.x509verificationflags)信任自签名自签名根证书。我稍微修改了他们的示例以使用我们自己的 PEM 编码根证书。希望这可以帮助某人。

```
namespace Utils
{
  using System;
  using System.Collections.Generic;
  using System.Linq;
  using System.Net.Security;
  using System.Security.Cryptography.X509Certificates;

  /// <summary>
  /// Verifies that specific self signed root certificates are trusted.
  /// </summary>
  public class HttpClientHandler : System.Net.Http.HttpClientHandler
  {
    /// <summary>
    /// Initializes a new instance of the <see cref="HttpClientHandler"/> class.
    /// </summary>
    /// <param name="pemRootCerts">The PEM encoded root certificates to trust.</param>
    public HttpClientHandler(IEnumerable<string> pemRootCerts)
    {
      foreach (var pemRootCert in pemRootCerts)
      {
        var text = pemRootCert.Trim();
        text = text.Replace("-----BEGIN CERTIFICATE-----", string.Empty);
        text = text.Replace("-----END CERTIFICATE-----", string.Empty);
        this.rootCerts.Add(new X509Certificate2(Convert.FromBase64String(text)));
      }

      this.ServerCertificateCustomValidationCallback = this.VerifyServerCertificate;
    }

    private bool VerifyServerCertificate(
      object sender,
      X509Certificate certificate,
      X509Chain chain,
      SslPolicyErrors sslPolicyErrors)
    {
      // If the certificate is a valid, signed certificate, return true.
      if (sslPolicyErrors == SslPolicyErrors.None)
      {
        return true;
      }

      // If there are errors in the certificate chain, look at each error to determine the cause.
      if ((sslPolicyErrors & SslPolicyErrors.RemoteCertificateChainErrors) != 0)
      {
        chain.ChainPolicy.RevocationMode = X509RevocationMode.NoCheck;

        // add all your extra certificate chain
        foreach (var rootCert in this.rootCerts)
        {
          chain.ChainPolicy.ExtraStore.Add(rootCert);
        }

        chain.ChainPolicy.VerificationFlags = X509VerificationFlags.AllowUnknownCertificateAuthority;
        var isValid = chain.Build((X509Certificate2)certificate);

        var rootCertActual = chain.ChainElements[chain.ChainElements.Count - 1].Certificate;
        var rootCertExpected = this.rootCerts[this.rootCerts.Count - 1];
        isValid = isValid && rootCertActual.RawData.SequenceEqual(rootCertExpected.RawData);

        return isValid;
      }

      // In all other cases, return false.
      return false;
    }

    private readonly IList<X509Certificate2> rootCerts = new List<X509Certificate2>();
  }
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-02-04T23:38:36.850

我没有答案，但我有一个选择。

如果您使用[Fiddler2](http://www.fiddler2.com)监控流量并启用 HTTPS 解密，您的开发环境不会抱怨。这不适用于 WinRT 设备，例如 Microsoft Surface，因为您无法在它们上安装标准应用程序。但是你开发的Win8电脑就可以了。

要在 Fiddler2 中启用 HTTPS 加密，请转到**Tools > Fiddler Options > HTTPS (Tab) > Check "Decrypt HTTPS Traffic"**。

我将密切关注这个线程，希望有人能有一个优雅的解决方案。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-02-24T22:13:55.723

我在网上找到了一个似乎效果很好的例子：

首先你创建一个新的[ICertificatePolicy](https://msdn.microsoft.com/en-us/library/system.net.icertificatepolicy(v=vs.110).aspx)

```
using System.Security.Cryptography.X509Certificates;
using System.Net;

public class MyPolicy : ICertificatePolicy
{
  public bool CheckValidationResult(ServicePoint srvPoint, X509Certificate certificate, WebRequest request, 
int certificateProblem)
  {
    //Return True to force the certificate to be accepted.
    return true;
  }
} 
```

然后在发送您的 http 请求之前使用它，如下所示：

```
System.Net.ServicePointManager.CertificatePolicy = new MyPolicy(); 
```

[http://www.terminally-incoherent.com/blog/2008/05/05/send-a-https-post-request-with-c/](http://www.terminally-incoherent.com/blog/2008/05/05/send-a-https-post-request-with-c/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-12-14T06:14:37.830

对于 Xamarin Android，这是唯一对我有用的解决方案：[另一个堆栈溢出帖子](https://stackoverflow.com/a/54318410/8360201)

如果您正在使用`AndroidClientHandler`，则需要提供一个和一个禁用所有检查`SSLSocketFactory`的自定义实现。`HostnameVerifier`为此，您需要继承`AndroidClientHandler`并覆盖适当的方法。

```
internal class BypassHostnameVerifier : Java.Lang.Object, IHostnameVerifier
{
    public bool Verify(string hostname, ISSLSession session)
    {
        return true;
    }
}

internal class InsecureAndroidClientHandler : AndroidClientHandler
{
    protected override SSLSocketFactory ConfigureCustomSSLSocketFactory(HttpsURLConnection connection)
    {
        return SSLCertificateSocketFactory.GetInsecure(1000, null);
    }

    protected override IHostnameVerifier GetSSLHostnameVerifier(HttpsURLConnection connection)
    {
        return new BypassHostnameVerifier();
    }
} 
```

进而

```
var httpClient = new System.Net.Http.HttpClient(new InsecureAndroidClientHandler()); 
```

# dojo - Dojo 中的撤消功能

> ID：12553282
> 
> 赞同：1
> 
> 时间：2012-09-23T14:45:39.037
> 
> 标签：dojo, undo, dojox.grid

我在 Dojo 中使用了增强的网格，我想实现“撤消”功能。例如，在编辑单元格后，添加/删除一行用户应该能够恢复该操作。

任何指示如何开始？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:13:54.337

好吧，也许你可以从这个命令历史模式中获得灵感：[https ://gist.github.com/c210c0344ca4d4bdfacb](https://gist.github.com/c210c0344ca4d4bdfacb)

关于 DataGrid 上的操作，我假设您知道该怎么做，并且您只是在询问一些“撤消机制”:)

我希望这将有所帮助。我已经使用了一段时间并且效果很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:57:50.737

在编辑之前获取网格存储并将其保存在某个变量中。单击撤消按钮/链接后，将网格存储设置为保存的旧存储。

# php - PHP中的变量引用错误

> ID：12553284
> 
> 赞同：0
> 
> 时间：2012-09-23T14:46:00.117
> 
> 标签：php

我已将 PHP 从 v5.3 升级到 v5.4，现在出现以下错误：

> 严格的标准：只能通过引用传递变量

代码：

```
$filename = array_pop(explode("/", $_SERVER['SCRIPT_FILENAME'])); 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T14:49:09.943

将代码分开将解决错误

```
$filename = explode("/", $_SERVER['SCRIPT_FILENAME']);
$filename = array_pop($filename);

echo $filename ; 
```

[演示分开](http://codepad.org/O4YgP9bt)

# javascript - jquery UI 1.9 Datepicker在选择器之间移动时显示空div

> ID：12553288
> 
> 赞同：0
> 
> 时间：2012-09-23T14:46:50.187
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-datepicker

jquery ui 1.9 rc 与 jquery 1.8

我在页面上有 2 个日期选择器，当我按下一个时它可以工作，但是当我按下另一个时，它显示一个空白的小 div，而不是按页面上任何位置的日期选择器将释放并且日历将显示

是 jquery ui 错误还是我做错了什么？

```
<input type="text" id="datepicker">
<input type="text" id="datepicker2">
<link rel="stylesheet" href="../../themes/base/jquery.ui.all.css">
<script src="../../jquery-1.8.0.js"></script>
<script src="../../ui/jquery.ui.core.js"></script>
<script src="../../ui/jquery.ui.widget.js"></script>
<script src="../../ui/jquery.ui.datepicker.js"></script>
<script>
$(function() {
    $( "#datepicker" ).datepicker();
    $( "#datepicker2" ).datepicker();
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:37:00.337

尝试在 datepicker 之前创建 datepicker2。如果 datepicker2 有效而 datepicker 无效，您可以从那里继续调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-26T13:39:06.560

将此 css 添加到您的页面以隐藏 div ui-datepicker-div ：

```
<!--  datepicker  -->
<style>
    #ui-datepicker-div {
        display: none;
    }
</style>
```

# asp.net - 当用户单击 UpdatePanel 内的按钮时触发刷新 DataView

> ID：12553293
> 
> 赞同：0
> 
> 时间：2012-09-23T14:47:16.383
> 
> 标签：asp.net, vb.net, gridview, triggers, updatepanel

我们在 UpdatePanel 中有以下代码。

```
 <asp:UpdatePanel 
    ID="UpdatePanelSearch" 
    runat="server" 
    UpdateMode="Conditional">

    <ContentTemplate> 
        <p>Parent Search:
            <asp:TextBox ID="TextBoxSearch" runat="server" Width="207px"></asp:TextBox>
            <asp:Button ID="ButtonSearch" runat="server" Text="Search" />
        </p>
    </ContentTemplate>
 </asp:UpdatePanel> 
```

VB 文件中的代码看起来像这样处理单击“搜索”按钮，因此 GridView 将根据输入到 TextBox 中的值显示数据。

GridView 也在一个单独的 UpdatePanel 中：

```
Protected Sub ButtonSearch_Click(sender As Object, e As EventArgs) Handles ButtonSearch.Click

    GridViewParentsSummary.DataSource = theTableAdapter.GetData(strSearchText)
End Sub 
```

如果这是正确的做法，我们想创建一个触发器来更新 GridView。

这是网格视图：

```
 <ContentTemplate> 
        <asp:GridView
            ID="GridViewParentsSummary" 
            runat="server" 
            AllowPaging="True" 
            AllowSorting="True" 
            AutoGenerateColumns="False" 
            DataKeyNames="ID" 
            PageSize="3"
            >

            <Columns>

                <asp:BoundField 
                    DataField="FatherName" 
                    HeaderText="Father's Name" 
                    SortExpression="FatherName" />

                <asp:BoundField 
                    DataField="MotherName" 
                    HeaderText="Mother's Name" 
                    SortExpression="MotherName" />

                <asp:ButtonField 
                    ButtonType="Button" 
                    CommandName="Select" 
                    Text="Select This Parent" />
            </Columns>
        </asp:GridView>
    </ContentTemplate>
</asp:UpdatePanel> 
```

您能否展示制作正确的触发器以刷新 GridView 所需的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T14:59:14.127

如果`GridView`在另一个中`UpdatePanel`，它也应该在另一个更新时`UpdatePanel`更新。默认情况下，该`UpdatePanel.UpdateMode`属性设置为`Always`，这将导致所有`UpdatePanel`页面刷新。

但是，这并不总是所需的行为，因此您多次将其更改为`Conditional`这意味着`UpdatePanel`只有在触发其触发器之一时才会刷新。在这种情况下，您需要在`ButtonSearch_Click`方法中添加这一行：

```
gridUpdatePanel.Update() 'assuming gridUpdatePanel is the UpdatePanel with the grid 
```

有关该`UpdateMode`属性的更多信息，请参见此处：http: [//msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.updatemode.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.updatemode.aspx)

# sql - Oracle 数据库中的减号和排序

> ID：12553295
> 
> 赞同：2
> 
> 时间：2012-09-23T14:47:31.810
> 
> 标签：sql, database, oracle, sql-order-by

我想对 Oracle DB 中的两个表进行减号操作。第一个表是 Chart_Year，其中包含 trackPosition、trackArtist、trackName、previewLink。另一个表是 Recommendation，其中只有 trackArtist、trackName、previewLink。我希望按 trackPosition 订购决赛桌。我这样做的方式是通过 trackArtist 订购：

```
SELECT trackartist, trackname, previewlink 
FROM 
    (
        SELECT 
            trackposition, trackartist, trackname, previewlink 
        FROM 
            chart_year 
        WHERE 
            chartsYear between 2004 and 2008 
        ORDER BY trackposition ASC
    )

MINUS 

SELECT 
    trackartist, trackname, previewlink 
FROM 
    recommendation 
WHERE 
    user = 'bla' 
```

也许我可以做类似的事情

```
SELECT 
    1 as trackPosition, trackartist, trackname, previewlink 
FROM 
    recommendation... 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T14:55:36.247

而不是`MINUS`，您可以使用`EXISTS`：

```
SELECT trackartist, trackname, previewlink
  FROM chart_year cy
 WHERE chartsYear BETWEEN 2004 AND 2008
   AND NOT EXISTS
        ( SELECT 1
            FROM recommendation r
           WHERE r.user = 'bla'
             AND r.trackartist = cy.trackartist
             AND r.trackname = cy.trackname
             AND r.previewlink = cy.previewlink
        )
 ORDER
    BY trackposition ASC
; 
```

或`LEFT OUTER JOIN`：

```
SELECT cy.trackartist, cy.trackname, cy.previewlink
  FROM chart_year cy
  LEFT
 OUTER
  JOIN recommendation r
    ON r.user = 'bla'
   AND r.trackartist = cy.trackartist
   AND r.trackname = cy.trackname
   AND r.previewlink = cy.previewlink
 WHERE cy.chartsYear BETWEEN 2004 AND 2008
   AND r.user IS NULL -- i.e., where the join failed
 ORDER
    BY cy.trackposition ASC
; 
```

# facebook - Graph API 发送的 Facebook 私人消息的最大数量（每天）

> ID：12553300
> 
> 赞同：0
> 
> 时间：2012-09-23T14:47:45.550
> 
> 标签：facebook, facebook-graph-api

我正在使用 Graph API 发送私人消息，如本文档所示

[https://developers.facebook.com/docs/reference/api/message/](https://developers.facebook.com/docs/reference/api/message/)

现在，我想问一下Graph API发送的Facebook私人消息的最大数量（每天）

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:19:02.267

[Facebook 聊天 API](https://developers.facebook.com/docs/chat/)与私人消息相同。

一个简单的测试方法是，安装[Pidgin](http://www.pidgin.im)并使用 pidgin 登录 Facebook Chat。尝试向其他朋友发送一些消息并浏览 Facebook 网站中的“消息”部分。您会发现通过 Pidgin 发送的所有消息都会出现在 Facebook 消息中。我们还可以使用 Graph API 的 me/inbox 或 me/outbox 连接来检索通过 Pidgin 发送的那些消息。

据我所知，这是向朋友发送消息的唯一方法。白名单中没有特殊的 API 密钥，无法通过 Graph API 发送私信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T14:49:55.700

值得庆幸的是，应用程序不能通过 API（或任何其他方法）发送私人消息。

您正在查看的是用于**阅读收件箱**的文档。

# python - 如何在 Emacs 的分隔符内设置语法颜色？

> ID：12553303
> 
> 赞同：3
> 
> 时间：2012-09-23T14:47:58.697
> 
> 标签：python, html, emacs, web2py

我有一个 HTML 文件，我在花括号（web2py 模板）中使用 python 代码，比如

```
{{for i in range something:}}
{{=i.name}}
{{pass}} 
```

在带有 .html 扩展名的文件的正文中。

我的问题是，如何更改`{{}}`分隔符内代码的颜色？分隔符与彩虹分隔符有不同的颜色，我也有自动配对，但我真正想要的是 .html 文件中分隔符内的 python 代码的自定义颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T23:07:35.490

这是一个常见的要求。不幸的是，在 Emacs 中做到这一点并不容易。在这里寻找一些选项[Emacs Wiki 上的多种模式](http://emacswiki.org/emacs/MultipleModes)。顺便说一句，如果您从未看过它，那么 Emacs Wiki 有很多有用的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-14T14:09:09.193

[web-mode.el](http://web-mode.org)现在与 web2py 兼容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T04:56:29.657

几个月后，我不得不感谢@sean perry 的提示，最后我找到了我需要的东西，我不是 emacs 专家，但这是我的解决方案：

首次下载[多网络模式](http://github.com/fgallina/multi-web-mode)

然后按照设置步骤将其添加到我的 init.el 中：

```
(require 'multi-web-mode)
(setq mweb-default-major-mode 'html-mode)
(setq mweb-tags '((php-mode "<\\?php\\|<\\? \\|<\\?=" "\\?>")
              (js-mode "<script +\\(type=\"text/javascript\"\\|language=\"javascript\"\\)[^>]*>" "</script>")
              (css-mode "<style +type=\"text/css\"[^>]*>" "</style>")))
(setq mweb-filename-extensions '("php" "htm" "html" "ctp" "phtml" "php4" "php5"))
(multi-web-global-mode 1) 
```

最后在 css-mode 添加这一行之后：

```
(python-mode "{{" "}}") 
```

现在 web2py 模板中 {{ }} 之间的 python 代码已正确突出显示。

# android - 列表视图不显示

> ID：12553305
> 
> 赞同：0
> 
> 时间：2012-09-23T14:48:06.893
> 
> 标签：android

我想知道为什么这个简单的列表视图没有出现。错误说（简而言之）-您的内容必须具有 ID 为“android.R.id.list”的 LisView...

```
public class MyListView extends ListActivity {
    static final String[] PENS = new String[]{
        "MONT Blanc",
        "Gucci",
        "Parker",
        "Sailor",
        "Porsche Design",
        "Rotring",
        "Sheaffer",
        "Waterman"
        };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_list_view);

        ArrayAdapter<String> adapter=new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, PENS);

        setListAdapter(adapter);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:04:26.810

在您的 XML 中，将您的 ID 属性更改为`ListView`以下内容：

```
android:id="@android:id/list" 
```

由于您使用的是 a `ListActivity`，Android 期望您的 Layout 包含`ListView`具有特定 ID 的 a 。如果它不存在，您将获得一个`RuntimeException`.

# c# - 如何以编程方式控制外部 FototCamera

> ID：12553306
> 
> 赞同：0
> 
> 时间：2012-09-23T14:48:19.260
> 
> 标签：c#, .net, dll, com, activex

我需要直接通过代码从一个连接到电脑的外部照片设备（不是网络摄像头）获取照片，比如紧凑型相机或类似的东西（我需要控制设备）。有人知道是否有一些dll或配备.dll的相机来做到这一点？

谭奎

皮尔卡洛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T08:24:16.753

您可以查看以下链接：http: [//developer.olympus.com/cameras.html](http://developer.olympus.com/cameras.html) [http://www.usa.canon.com/cusa/consumer/standard_display/sdk_homepage](http://www.usa.canon.com/cusa/consumer/standard_display/sdk_homepage)

# jquery - jquery在提交之前验证文件类型和文件大小

> ID：12553307
> 
> 赞同：0
> 
> 时间：2012-09-23T14:48:20.827
> 
> 标签：jquery

> **可能重复：**
> [使用 jQuery，在上传之前限制文件大小](https://stackoverflow.com/questions/307679/using-jquery-restricting-file-size-before-uploading)

在将文件上传到服务器之前，是否有一个好的 jquery 脚本或其他方法可以验证文件大小和文件类型？我试过四处寻找，但从来没有发现任何事情可以做这样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T14:54:46.043

取自这里：[如何异步上传文件？](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)

我不确定它是否适用于旧浏览器（比如 IE6/7（呃，到底谁还在使用那些）），但您可以尝试一下。它应该适用于所有现代浏览器。试试看：

```
<form enctype="multipart/form-data">
<input name="file" type="file" />
<input type="submit" value="Upload" />
</form>
$(':file').change(function(){
    var file = this.files[0];
    name = file.name;
    size = file.size;
    type = file.type;
    //your validation
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T14:56:08.053

我建议如下：

```
$('input:file').change(
    function(e) {
        var files = e.originalEvent.target.files;
        for (var i=0, len=files.length; i<len; i++){
            console.log(files[i].fileName, files[i].type, files[i].fileSize);
        }
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/eHNJg/)。

由于 JavaScript 无法从选定`fileList`对象中删除文件，因此您必须对文件属性执行检查并提示用户取消选择由于文件类型或文件大小而被视为无效的文件（并且，显然，防止提交的表格）：

```
$('input:file').change(
    function(e) {
        var files = e.originalEvent.target.files;
        for (var i=0, len=files.length; i<len; i++){
            var n = files[i].name,
                s = files[i].size,
                t = files[i].type;

            if (s > 100) {
                console.log('Please deselect this file: "' + n + '," it\'s larger than the maximum filesize allowed. Sorry!');
            }
        }
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/eHNJg/4/)。

（最后一段代码在 Chromium 19 和 Firefox 15 中测试并运行，都在 Ubuntu 11.04 上。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T14:56:14.353

有[jQuery File Upload 插件](http://blueimp.github.com/jQuery-File-Upload/)，无需重新发明轮子。它有一个`acceptFileTypes`选项允许您提供一个正则表达式来匹配给定的文件类型，以及一个`maxFileSize`选项，例如：

```
{
  fileTypes: /^(gif|jpeg|png)$/,
  maxFileSize: 20000000 // 20MB
} 
```

但是请注意，这仅适用于支持**[File API](https://developer.mozilla.org/en-US/docs/DOM/File)**的 Web 浏览器。否则，您必须在服务器端验证文件类型。

# asp.net - Gzip 搞砸了 AjaxControlToolKit

> ID：12553308
> 
> 赞同：0
> 
> 时间：2012-09-23T14:48:24.373
> 
> 标签：asp.net, gzip, ajaxcontroltoolkit, gzipstream

有一个表单，其中包含来自 ajaxcontroltoolkit 的 tabcontainer 和水印控件。出现 java 错误：使用以下 gzip 过程时**未定义 Sys.Extended 。**以下代码来自 Global.asax 文件：

```
void Application_PreRequestHandlerExecute(object sender, EventArgs e)
    {
        HttpApplication app = sender as HttpApplication;
        string acceptEncoding = app.Request.Headers["Accept-Encoding"];
        Stream prevUncompressedStream = app.Response.Filter;

        if (!(app.Context.CurrentHandler is Page ||
            app.Context.CurrentHandler.GetType().Name == "SyncSessionlessHandler") ||
            app.Request["HTTP_X_MICROSOFTAJAX"] != null)
            return;

        if (acceptEncoding == null || acceptEncoding.Length == 0)
            return;

        acceptEncoding = acceptEncoding.ToLower();

        if (acceptEncoding.Contains("deflate") || acceptEncoding == "*")
        {
            // defalte
            app.Response.Filter = new DeflateStream(prevUncompressedStream,
                CompressionMode.Compress);
            app.Response.AppendHeader("Content-Encoding", "deflate");
        }
        else if (acceptEncoding.Contains("gzip"))
        {
            // gzip
            app.Response.Filter = new GZipStream(prevUncompressedStream,
                CompressionMode.Compress);
            app.Response.AppendHeader("Content-Encoding", "gzip");
        }
    } 
```

当我删除上面的代码时，错误消失了，一切正常。

这是来自 web.config 的控制标签：

```
<controls>
    <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add tagPrefix="ajaxToolkit" namespace="AjaxControlToolkit" assembly="AjaxControlToolkit"/>
    <add tagPrefix="HTMLEditor" namespace="AjaxControlToolkit.HTMLEditor" assembly="AjaxControlToolkit"/>
</controls> 
```

当我运行 alert(Sys.Extended.UI.TabPanel); 在萤火虫控制台中，我收到错误“Sys.Extended 未定义”。但是当我只运行 alert(Sys.Extended); 是给出消息“未定义”而不是错误。这有意义吗？而且我还想提一下，当我从浏览器保存页面时，我给出了一条消息“无法保存 default.js，因为无法读取源文件”并且我没有在页面中找到页面的 .js 文件default_files 文件夹。但是当我从 global.asax 文件中删除 gzip 代码时，我在 default_files 文件夹中找到了 default.js 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T21:24:16.310

您在使用 ToolKitScriptManager 吗？如果是这样，请检查复合脚本的顺序是否正确：

```
<compositescript>
    <scripts>
        <asp:scriptreference name="WebForms.js" assembly="System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" scriptmode="Release"></asp:scriptreference>    
        <asp:scriptreference name="WebUIValidation.js" assembly="System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" scriptmode="Release"></asp:scriptreference>    
        <asp:scriptreference name="MicrosoftAjax.js" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" scriptmode="Release"></asp:scriptreference>    
        <asp:scriptreference name="MicrosoftAjaxWebForms.js" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" scriptmode="Release"></asp:scriptreference>
    </scripts>
</compositescript> 
```

Sys中提到的更多可能性[未定义](https://stackoverflow.com/q/75322/139917)

# android - SmartWatch 呼叫处理（从另一个分机启动一个分机）

> ID：12553312
> 
> 赞同：0
> 
> 时间：2012-09-23T14:48:36.160
> 
> 标签：android, sony, sony-smartwatch

有没有一种方法可以从我自己的触发呼叫的扩展程序启动 Sony 的“呼叫处理”扩展程序？

为了让自己清楚，我只想：

1）以编程方式关闭（关闭）我的分机和 2）​​以编程方式打开“呼叫处理”分机

这正是电话簿扩展所做的 - 当它发起呼叫时，“呼叫处理”扩展被启动。我的分机也发起了呼叫，我只是不知道如何将控制权转移到“呼叫处理”。

所以，这是可能的，但如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:27:24.453

抱歉，“呼叫处理”扩展没有公共 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T20:18:25.573

好吧，这是可能的，尽管 Jerker 的回答（=索尼的支持）。也许我不知道如何正确地问。没关系，解决方法如下：

1）关闭我的扩展：

```
sendToHostApp(new Intent(Control.Intents.CONTROL_STOP_REQUEST_INTENT)); 
```

2) 启动不同的扩展 - 按照此处给出的说明：[我应该如何从程序代码启动 SmartWatch 扩展？](https://stackoverflow.com/questions/10971674/how-should-i-do-to-start-smartwatch-extension-from-the-program-code)

# windows-phone-7 - 调试 Windows Phone 应用程序崩溃

> ID：12553316
> 
> 赞同：1
> 
> 时间：2012-09-23T14:49:24.703
> 
> 标签：windows-phone-7

我为未处理的异常设置了处理程序。它不会被解雇并且应用程序会崩溃。我使用 XDE 模拟器启用了控制台日志记录。我只能看到控制台日志中的此错误消息

```
PID:0E9200B2 TID:0F31015E Exception 'Access Violation' (0xe): Thread-Id=0f31015e (pth=c05208a4), Proc-Id=0e9200b2(pprc=c0558b68) 'TaskHost.exe', VM-active=0e9200b2(pprc=c0558b68) 'TaskHost.exe' 
PID:0E9200B2 TID:0F31015E PC=424c6356(agcore.dll+0x00136356) RA=424c6b16(agcore.dll+0x00136b16) SP=02d6ed58, BVA=000000e6 
```

我怀疑这可能是因为来自非 ui 线程的绑定更新。我关闭了所有非 ui 线程。但是当我连续单击列表框中的图像按钮时，我仍然很少看到此异常。

有没有办法启用详细日志记录。上面的异常消息几乎没有要调试的信息。

# entity-framework - 实体框架中具有连接数据的存储过程

> ID：12553319
> 
> 赞同：3
> 
> 时间：2012-09-23T14:49:56.487
> 
> 标签：entity-framework, stored-procedures, join

我们目前有一个具有相当大数据库的系统，并且存储过程用于 CUD 和查询。数据集用于从 SP 查询中检索结果。

现在我们正在研究使用实体框架针对同一数据库开发另一个项目。在查询数据库时，存储过程通常会执行大量的连接，以收集一些不在目标表中的字段，而是来自连接表中的数据，这些数据是客户端以某种方式需要的。使用 DataSet 时，SP 返回的所有字段都包含在 DataTable 中。所以 DataTable 实际上并不匹配目标数据库表。

在 EF 中处理这种情况的正确方法是什么？创建我的模型时，实体被映射到每个表，如上所述，这些表有时仅与 SP 的结果匹配。我可以将 SP 查询结果的“附加”字段作为属性添加到实体类中，并让它们由查询填充，但在涉及特定实体类型的 CUD 时排除这些属性？似乎 EF 方式，如果通过 LINQ to Entities 而不是 SP 进行查询，将拥有与连接实体具有关系属性的实体实例，以便通过导航关系属性来使用这些“附加”属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T14:58:37.127

您可以定义任意*复杂类型*（只是为您生成的一个类，以匹配存储过程返回的列和数据类型）作为实体框架中存储过程的返回类型（从版本 4 和更新版本开始） - 没问题这里。

有关[在 Entity Framework](http://msdn.microsoft.com/en-us/data/gg699321.aspx)中使用存储过程的所有内容的详细说明，请参阅实体框架中的存储过程。

# jquery - slideToggle 功能移动所有

> ID：12553330
> 
> 赞同：0
> 
> 时间：2012-09-23T14:51:08.147
> 
> 标签：jquery

我有一个像这样的 slideToggle 功能

```
$(document).ready(function(){
    $(".widget-content-box").slideUp(); // $(".widget-content-box").hide()
    $("[id^=goal]").click(function(){
        $(this).parent().next().slideToggle("slow");
    });
}) 
```

我有目标 id，当您单击其中任何一个时，它们都会下拉，尽管内容仅显示在我单击的那个上，这很好，但是有没有办法让 slideToggle 下拉列表仅用于选定的一个和不要删除所有具有目标 ID 的 div

编辑

该项目的 HTML

```
 <div class="span4">
  <div class="widget">
    <div class="widget-header">
      <i class="icon-info-sign icon-large"></i>
       <h3 id="goal1" class="clickme">Core</h3>
    </div><!--/widgetheader-->
     <div class="widget-content-box">
      <p>Hello</p>

     </div><!--/widget content-->
    </div><!--widget-->
  </div><!--span4-->

  <div class="span4">
  <div class="widget">
    <div class="widget-header">
      <i class="icon-info-sign icon-large"></i>
       <h3 id="goal2" class="clickme">Marathon Runners</h3>
    </div><!--/widgetheader-->
     <div class="widget-content-box">
      <p>test</p>

     </div><!--/widget content-->
    </div><!--widget-->
  </div><!--span4-->

  <div class="span4">
  <div class="widget">
    <div class="widget-header">
      <i class="icon-info-sign icon-large"></i>
       <h3 id="goal3" class="clickme">Biceps</h3>
    </div><!--/widgetheader-->
     <div class="widget-content-box">
      <p>content</p>

     </div><!--/widget content-->
     </div><!--widget-->
    </div><!--span4-->
    </div>
   </div> 
```

谢谢

任何帮助表示赞赏

编辑

我的页面是这样设置的

```
DIV1      DIV2      DIV3
DIV4      DIV5      DIV6 
```

因此，例如，当您单击 div1 时，所有内容都会向下移动，而不仅仅是 div1 和 div4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T15:13:49.437

```
 $("[id^=goal]").click(function(){
    $(this).slideToggle("slow");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:02:45.527

我在[**这里创建了 jsfiddle**](http://jsfiddle.net/sahil_kapoor/hXmmH/)我希望它是你正在寻找的。

我已经更改了您的 html，因此每个 'div class="span4"' 都有两个 'div class="widget"（Div1-Div4、Div2-Div5 等），就像这样。

```
<div class="span4">
    <div class="widget">
        <div class="widget-header">
            <i class="icon-info-sign icon-large"></i>
            <h3 id="goal1" class="clickme">Core</h3>
        </div><!--/widgetheader-->
        <div class="widget-content-box">
            <p>Hello</p>
        </div><!--/widget content-->
    </div><!--widget-->
    <div class="widget">
        <div class="widget-header">
            <i class="icon-info-sign icon-large"></i>
            <h3 id="goal1" class="clickme">Core</h3>
        </div><!--/widgetheader-->
        <div class="widget-content-box">
            <p>Hello</p>
        </div><!--/widget content-->
    </div><!--widget-->
</div><!--span4--> 
```

我已将以下 css 添加到类“span4”中

```
.span4{
    float:left;
    margin : 20px;
    width:70px;
} 
```

您的 jquery 代码的其余部分是相同的。看看小提琴，我希望这会有所帮助。

# ios - FBRequestConnection 不提供 UI 而 FBDialog 提供

> ID：12553331
> 
> 赞同：1
> 
> 时间：2012-09-23T14:51:10.083
> 
> 标签：ios, facebook, facebook-graph-api, user-interface

我正在使用 FBRequestConnetion 在墙上发布[仅文本]。但是，最新的 FacebookSDK 中存在已弃用的类，即 FBDialog。

那么，最新的FacebookSDK中是否还有其他UIComponent，通过它我可以实现FBDialog Behavior贴在墙上。

或者我必须设计自己的 UI 并使用 FBRequestConnection。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:34:37.180

我也对此感到困惑。查看 SDK 中的*HelloFacebookSample*示例，这就是我所理解的：

*   在之前的 SDK 中，我们可以显示一个对话框，用户可以在其中自定义消息，并选择发布或取消。我认为这不需要任何特殊的 Facebook 权限。

*   现在*iOS6*有一个不错的原生对话框，但*iOS5*的回退是直接使用**FBRequestConnection 发布**——它只是直接发布而没有任何对话框，并且还需要“publish_action”权限。

我想我得出了同样的结论，如果我们想在*iOS5*上进行一个漂亮的对话，我们必须：

*   自己创建 UI（可能模仿 IOS6 弹出窗口）并请求新权限
*   或使用 SDK 文件夹中已弃用的标头（不确定我会去那里...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:18:20.437

看看刚刚发布的 SDK + 这个链接用于构建在 iOS6 之上的原生 UI： [https ://developers.facebook.com/docs/howtos/ios-6/](https://developers.facebook.com/docs/howtos/ios-6/)

您还可以查看 SDK 中包含的更新后的示例 HelloFacebookSample，该示例展示了如何为用户发布状态更新。

# google-maps - 将我的标记拖到它google map api v3时需要找到矩形标题

> ID：12553335
> 
> 赞同：0
> 
> 时间：2012-09-23T14:51:29.480
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我有一张带有 5 个标记和 25 个矩形的地图。然后我将标记拖到一个我想知道矩形标题的矩形上。

现在我有一个矩形的监听器，只是为了看到它们被正确命名并且这工作正常

```
google.maps.event.addListener(partialRectangle, 'click', function() {
  console.log(this.title);
}); 
```

我也有一个标记的监听器来获取一些信息然后拖动它们，这也很好

```
google.maps.event.addListener(marker, 'dragend', function() {
    console.log(marker.getPosition());
    console.log(this.title);

}); 
```

知道如何获取有关我在哪个矩形中放置标记的信息吗？

这段代码解决了我的问题

```
google.maps.event.addListener(marker, 'dragend', function() {
for(var i = 0; i < 25; i++){ // looping through rectangles
    if(partialRectangles[i].bounds.contains(marker.getPosition()))
        console.log(partialRectangles[i].title);
} 
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T16:56:58.263

在每个标记的`dragend`侦听器中，循环遍历所有矩形`LatLngBounds`并使用该`contains(latLng:LatLng)`函数来确定新标记的位置是否在该矩形的`LatLngBounds`.

伪代码：

```
google.maps.event.addListener(marker, 'dragend', function() {
    for (var i = 0; i < rectangles.length; i++) {

         if(rectangles[i].getBounds().contains(marker.getPosition())) {
               console.log(rectangles[i].title);
         }
    }

}); 
```

# php - Ajax POST 无法使用 Jquery 和 PHP

> ID：12553338
> 
> 赞同：0
> 
> 时间：2012-09-23T14:51:36.047
> 
> 标签：php, ajax, jquery, post

我是 Jquery 的新手。我正在尝试使用 Jquery Post 将表单发布到 php 文件中，我在 php 文件中做了一个 var_dump($_POST) 但我只能看到一个空数组（使用 firebug net 看到），但我又回到了成功jQuery的功能。可能是我在做一些愚蠢的事情。除了这个问题之外，所有的 Javascript 行为都按预期工作。有人请帮忙

```
$(document).ready(function() {

    //if submit button is clicked
    $('#submit').click(function () {       

        //show the loading sign
        $('#example').modal('show') ; 

        //start the ajax
        $.ajax({
            //this is the php file that processes the data 
            url: "mvc/process_form.php",

            //GET method is used
            type: "POST",

            //Do not cache the page
            cache: false,

            //success
            success: function (html) {             
                //if process_form.php returned 1/true (process success)

                if (html==1) {                 
                    //hide the form
                    $('.form').fadeOut('slow');                

                    //show the success message
                    $('.done').fadeIn('slow');

                //if process.php returned 0/false (send mail failed)
                } else alert('Sorry, unexpected error. Please try again later.');              
            }      
        });

        //cancel the submit button default behaviours
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T14:55:14.197

您没有`data`在 ajax 函数中传递任何 $_POST 。[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T14:56:21.997

您需要将表单数据作为序列化传递。现在您没有将表单数据传递到您的 ajax 函数中。

干得好：

```
$(document).ready(function() {

    //if submit button is clicked
    $('#submit').click(function () {       

        //show the loading sign
        $('#example').modal('show') ; 

        //start the ajax
        $.ajax({
            //this is the php file that processes the data 
            url: "mvc/process_form.php",

            //GET method is used
            type: "POST",
            data: $("#testform").serialize(),

            //Do not cache the page
            cache: false,

            //success
            success: function (html) {             
                //if process_form.php returned 1/true (process success)

                if (html==1) {                 
                    //hide the form
                    $('.form').fadeOut('slow');                

                    //show the success message
                    $('.done').fadeIn('slow');

                //if process.php returned 0/false (send mail failed)
                } else alert('Sorry, unexpected error. Please try again later.');              
            }      
        });

        //cancel the submit button default behaviours
        return false;
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T14:56:43.890

也试试这个：

```
var url = "mvc/process_form.php", 
   data = {hello: hello}; 
$.post(url,data, 
      function (status)
      {
         alert(status);
      }
 ); 
```

# javascript - 扑克，询问我的卡是否已经在使用中

> ID：12553341
> 
> 赞同：0
> 
> 时间：2012-09-23T14:52:05.410
> 
> 标签：javascript

我是一个 JavaScript 菜鸟，想知道是否有更好的方法来询问我的脚本生成的卡是否已在使用中。

现在，我正在使用一堆**Or**运算符，但是，必须有一种不那么冗余的方法来做到这一点。如果你们中的任何一个人能回答我的问题，从长远来看，这将真正帮助我。谢谢

```
var cards = ['Ace of heart','Ace of club','Ace of diamond','Ace of spade',
                 'Two of heart','Two of club','Two of diamond','Two of spade',
                 'Three of heart','Three of club','Three of diamond','Three of spade',
                 'Four of heart','Four of club','Four of diamond','Four of spade',
                 'Five of heart','Five of club','Five of diamond','Five of spade'];

    // Distributed Cards //
    var pre_flop = [1];
    var flop = [2];
    var turn = [0];
    var river = [0];

    // Cards value //
    var your_card;
    var indexed_cards = [6];

    var total_card = 0;
    var deck_size = cards.length;       

    function generate_card(){

        // Assign value to first card //
        if(total_card === 0){
            your_card = Math.floor(Math.random() * deck_size);
            indexed_cards [total_card] = your_card;
            total_card++;
        }else{
            your_card = Math.floor(Math.random() * deck_size);
            // Makes sure the cards are different //
            while(1){
                if(your_card === indexed_cards [0] || your_card === indexed_cards [1] || your_card === indexed_cards [2] || your_card === indexed_cards [3] || your_card === indexed_cards [4] || your_card === indexed_cards [5] || your_card === indexed_cards [6]){
                    your_card = Math.floor(Math.random() * deck_size);
                }else {
                    indexed_cards [total_card] = your_card;
                    break;
                }
            }
            total_card++;           
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:03:22.800

要回答有关替换 OR 的具体问题：

您可以使用 array.indexOf(..) 来找出某个东西是否在数组中。

```
var myarray = [1, 3, 77, 12, 9];

console.log('index of 77 ' + myarray.indexOf(77));    // 2
console.log('index of 4 ' + myarray.indexOf(4))    // -1 
```

如果未找到项，则 indexOf 返回 -1，否则返回该项在数组中的位置。您可能还见过这种方法用于字符串，用于查找字符串中字符的位置或存在；同样的原则也适用于此。

代码可能存在其他问题，但您应该能够替换

```
if(your_card === indexed_cards [0] || your_card === indexed_cards [1] || your_card === indexed_cards [2] || your_card === indexed_cards [3] || your_card === indexed_cards [4] || your_card === indexed_cards [5] || your_card === indexed_cards [6]){ 
```

和

```
if (indexed_cards.indexOf(your_card) !== -1) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T14:57:31.413

基本上就是这样，如果你想让它看起来更漂亮，你可以使用 jquery array.contains 或 indexOf 检查。

我假设 6 是 indexed_cards 数组的最大长度。

# php - 将文本存储在数据内容中并使用 bootstrap-popover.js 的兼容性如何？

> ID：12553343
> 
> 赞同：0
> 
> 时间：2012-09-23T14:52:39.070
> 
> 标签：php, javascript, html, css, twitter-bootstrap

我想使用[http://twitter.github.com/bootstrap/javascript.html#popovers](http://twitter.github.com/bootstrap/javascript.html#popovers)在弹出窗口中显示一些 html 。将文本存储在数据内容中的兼容性如何？它适用于所有浏览器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:14:57.577

您可以在 data 属性中使用 html，但请注意不要包含某些引号。您当然可以`&quot;`在文本中使用，但需要根据标签的引号使用单引号或双引号。

数据属性应该在大多数浏览器中工作：[HTML5 自定义数据属性是否在 IE 6 中“工作”？](https://stackoverflow.com/questions/2412947/do-html5-custom-data-attributes-work-in-ie-6/)

```
<a data-original-title="<em class='tooltip-title'>bar</em>" href="#" rel="tooltip">foo</a>
<a data-original-title='<em class="tooltip-title">bar</em>' href="#" rel="tooltip">foo</a> 
```

它适用于工具提示，弹出框不应该有所不同。

# ubuntu - Ubuntu 颠覆 ANT 构建问题

> ID：12553344
> 
> 赞同：0
> 
> 时间：2012-09-23T14:52:47.367
> 
> 标签：ubuntu, ant, svnant

大家好，我正在尝试运行一个简单的 ant 构建。我正在使用 ubuntu 12.04。我不确定为什么我不断收到错误引用

> 在 org.tigris.subversion.svnclientadapter

有人可以看看我的帮助我建立这个蚂蚁。

我的 build.xml 有。

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="AppBuilder" default="war" basedir="..">

    <property name="project.name" value="DIS" />

    <property name="checkout.dir" value="home/mark/Desktop/checkout" />
    <property name="build.dir" value="home/mark/Desktop/build" />
    <property name="server.dir" 
    value="Oracle/Middleware/user_projects/domains/test1/servers/AdminServer/upload"/>

    <property name="repo.url" value="svn://127.0.0.1:3690/eHRMS_Project" />
    <property name="repo.usr" value="mark" />
    <property name="repo.pwd" value="java" />

    <property name="ant.dir" value="apps/apache-ant-1.8.2"/>

<!-- SET THE SVNANT CLASSPATH -->
<path id ="svnant.classpath">
    <fileset dir="${ant.dir}/lib/svnant" includes="**/svn*.jar"/>
</path>
<typedef resource="org/tigris/subversion/svnant/svnantlib.xml"
    classpathref="svnant.classpath"/>

<!--REMOVE OLD BUILD -->
<target name="clean">
    <echo>Cleaning directories</echo>
    <delete dir="${build.dir}"/>
    <delete dir="${checkout.dir}"/>
</target>

<!-- CREATE NEW DIRECTORIES-->
 <target name="init" depends="clean">
    <echo>Creating the directories</echo>
    <mkdir dir="${build.dir}/WEB-INF/classes" />
    <mkdir dir="${build.dir}/WEB-INF/lib"/>
    <mkdir dir="${checkout.dir}"/>
</target>

<!--
CHECKOUT THE LATEST CODE FROM THE SVN REPOSITORY.
AN SVN CLIENT MUST BE INSTALLED ON YOUR MACHINE.
-->
<target name="checkoutLatest" depends="init">
  <echo>Checking out the project</echo> 
  <svn  svnkit="false"
    javahl="false"
    username="${repo.usr}" 
    password="${repo.pwd}"> 
      <checkout url="${repo.url}/${project.name}" destPath="${checkout.dir}"/> 
  </svn>
</target>

<!--COMPILE THE JAVA CLASSES-->
<target name="compile" depends="checkoutLatest">
    <echo>Compile the source files</echo>

<javac  srcdir="${checkout.dir}/src"
    destdir="${build.dir}/WEB-INF/classes"
    includeAntRuntime="no">

    <!--ALL THE POSSIBLE LOCATIONS OF FILES NEEDED FOR COMPILATION-->        
    <classpath>
        <fileset dir="${checkout.dir}/WebContent/WEB-INF/lib">
        <include name="*.jar" />
        </fileset>

        <fileset dir="home/mark/Oracle/Middleware/modules">
        <include name="*.jar" />
        </fileset>

        <fileset dir="home/mark/Oracle/Middleware/wlserver_10.3/server/lib">
        <include name="*.jar" />
        </fileset>
    </classpath>

</javac>

</target>

<!--TRANSFER WEBCONTENT AND CONFIG FILES FROM CHECKOUT FOLDER TO BUILD FOLDER-->
<target name="copy" depends="compile">
    <echo>Transferring WebContent and config files</echo>

    <!--COPY THE CONFIG/RESOURCE FILES-->
    <copy todir="${build.dir}/WEB-INF/classes">
            <fileset dir="${checkout.dir}/src" excludes="com/**"/>
    </copy>

    <!--COPY THE HBM FILES FOR EHRMS-->
    <copy todir="${build.dir}/WEB-INF/classes/com/multivision/ehrms/business">
            <fileset dir="${checkout.dir}/src/com/multivision/ehrms/business" excludes="*.java"/>
    </copy>

    <!--COPY THE HBM FILES FOR DIS-->
    <copy todir="${build.dir}/WEB-INF/classes/com/multivision/dis/businesses">
            <fileset dir="${checkout.dir}/src/com/multivision/dis/businesses" excludes="*.java"/>
    </copy>

    <!--COPY THE WEBCONTENT FILES AND SUBDIRECTORIES-->
    <copy todir="${build.dir}">
        <fileset dir="${checkout.dir}/WebContent"/>
    </copy>

</target>

<!-- CREATE THE WAR-->
<target name="war" depends="copy">
    <echo>Building WAR file</echo>
    <war destfile="${server.dir}/${project.name}.war" 
        webxml="${build.dir}/WEB-INF/web.xml">
        <fileset dir="${build.dir}"/>
    </war>
</target> 
```

当我运行我的 ant 构建时，我的控制台会显示这个

```
 BUILD FAILED
    /home/mark/Desktop/build.xml:52: java.lang.NoSuchFieldError: notifylisteners
        at org.tigris.subversion.svnclientadapter.commandline.CmdLineNotificationHandler.logException(Unknown Source)
        at org.tigris.subversion.svnclientadapter.commandline.CommandLine.execString(Unknown Source)
        at org.tigris.subversion.svnclientadapter.commandline.SvnCommandLine.checkout(Unknown Source)
        at org.tigris.subversion.svnclientadapter.commandline.CmdLineClientAdapter.checkout(Unknown Source)
        at org.tigris.subversion.svnant.commands.Checkout.execute(Unknown Source)
        at org.tigris.subversion.svnant.commands.SvnCommand.executeCommand(Unknown Source)
        at org.tigris.subversion.svnant.SvnTask.execute(Unknown Source)
        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
        at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
        at org.apache.tools.ant.Task.perform(Task.java:348)
        at org.apache.tools.ant.Target.execute(Target.java:390)
        at org.apache.tools.ant.Target.performTasks(Target.java:411)
        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
        at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
        at     org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
        at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
        at org.apache.tools.ant.Main.runBuild(Main.java:809)
        at org.apache.tools.ant.Main.startAnt(Main.java:217)
        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)

    Total time: 2 seconds 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T15:49:22.637

编译 svnant 时使用的 svnclientadapter 版本与 `svn.classpath`. 由于您没有说明您使用的是哪个版本的 svnant，因此无法告诉您正确的版本。

当您发现它是什么时，将相应的 JAR 更改为`{ant.dir}/lib/svn`

# tomcat - 在 catalina.bat 文件中增加堆大小的最佳方法

> ID：12553350
> 
> 赞同：10
> 
> 时间：2012-09-23T14:53:41.493
> 
> 标签：tomcat, memory, memory-leaks, tomcat6, heap-size

我在windows xp上有tomcat 6服务器，我通过控制台启动tomcat，即使用startup.bat。

AFAIK`catalina.bat`文件适用于 Windows，因此我正在更改 bat 文件以进行内存管理。我没有 tomcat 配置窗口。

现在我想增加它的堆大小所以我的问题是我应该扩展`JAVA_OPTS`catalina.bat 文件中的现有文件，即

```
set JAVA_OPTS=%JAVA_OPTS% -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.util.logging.config.file="%CATALINA_BASE%\conf\logging.properties" -Xms1024m -Xmx1024m -XX:PermSize=256m  -XX:MaxPermSize=128m 
```

或者我应该在 catalina.bat 文件中创建新的环境变量，即

```
set JAVA_OPTS=-Xms1024m -Xmx1024m -XX:PermSize=256m  -XX:MaxPermSize=128m 
```

这是正确的方法吗？

请指导。

我可以在 Probe 中看到当前堆大小，但看不到现有的 perm 大小，那么 perm 大小的默认值是多少？

编辑：

以下参数有帮助吗？

```
-XX:+UseConcMarkSweepGC -XX:+CMSPermGenSweepingEnabled -XX:+CMSClassUnloadingEnabled 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-23T16:09:45.270

如果您查看安装的 bin 目录，您将看到 catalina.sh 或 .bat 脚本。如果您查看这些，您将看到它们分别运行 setenv.sh 或 setenv.bat 脚本（如果存在）来设置环境变量。catalina.sh/bat 顶部的注释中描述了相关的环境变量。例如，要使用它们，请创建一个包含内容的文件 $CATALINA_HOME/bin/setenv.sh

```
export JAVA_OPTS="-server -Xmx512m" 
```

对于 Windows，您将需要在 setenv.bat 中类似

```
set JAVA_OPTS=-server -Xmx768m 
```

原始答案[在这里](https://stackoverflow.com/questions/286007/how-to-tune-tomcat-5-5-jvm-memory-settings-without-using-the-configuration-progr)

运行后`startup.bat`，您可以轻松确认已应用正确的设置，前提是您已`@echo`在文件中的某处打开`catatlina.bat`（一个好位置可能是紧随其后`echo Using CLASSPATH: "%CLASSPATH%"`）：

![在此处输入图像描述](../Images/bfa882cc4fd1857725e5d56019f3e432.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-06T13:23:32.593

为窗口增加 tomcat 的堆大小将此文件添加到 apache-tomcat-7.0.42\bin

![在此处输入图像描述](../Images/56f6e3d5dadaa5ab9d23ea7599267085.png)

堆大小可以根据需求进行更改。

```
 set JAVA_OPTS=-Dfile.encoding=UTF-8 -Xms128m -Xmx1024m -XX:PermSize=64m -XX:MaxPermSize=256m 
```

# android - 在 LEFT JOIN 查询中重新调整了错误的 cursor.getColumnIndex

> ID：12553351
> 
> 赞同：0
> 
> 时间：2012-09-23T14:53:50.780
> 
> 标签：android, android-contentprovider, android-sqlite

我的查询语句中有`LEFT JOIN`一个`ContentProvider`

左表是帖子，它有一个 post_id 列，右表是标记它也有一个 post_id 列，我正在做`posts left join taggings on posts.post_id=taggings.post_id`

查询时`ContentProvider`，如果 taggings 表中没有匹配的行，则由于某种原因 from 的返回值`cursor.getColumnIndex("post_id")`是错误的，并且 id 的 int 值始终为 0。

如果标记中有匹配的行，则一切都按预期工作。

我在这里想念什么？

内容提供者查询：

```
case POSTS:
        qb.setTables(MetaData.TABLE_POSTS

                + " LEFT JOIN " + MetaData.TABLE_TAGGINGS + " ON "
                + MetaData.TABLE_POSTS + "." + MetaData.COLUMN_POST_ID
                + "=" + MetaData.TABLE_TAGGINGS + "." + MetaData.COLUMN_POST_ID
                );
        break; 
```

游标查询语句：

```
Cursor cursor = context.getContentResolver().query(MetaData.POSTS_URI, 
            null, null, 
            null, MetaData.TABLE_POSTS + "." + MetaData.COLUMN_POST_ID + " DESC"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:46:14.020

我通过使用`setProjectionMap()`映射`MetaData.COLUMN_POST_ID`到`MetaData.TABLE_POSTS + "," + MetaData.COLUMN_POST_ID`

# c# - 在 C# 中使用括号验证布尔表达式

> ID：12553353
> 
> 赞同：8
> 
> 时间：2012-09-23T14:54:08.727
> 
> 标签：c#, regex, parsing, boolean, boolean-logic

我想验证 C# 中包含带括号的布尔表达式的字符串。该字符串应仅包含数字 1-9、圆括号、“OR”、“AND”。

好字符串的例子：

“1 和 2”

“2 或 4”

“4 与（3 或 5）”

“2”

等等...

我不确定正则表达式是否足够灵活来完成这项任务。在 C# 中是否有一个很好的捷径来实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T17:35:51.253

使用简单的解析器可能更简单。但是您[可以使用 .NET 正则表达式来做到这一点](http://ideone.com/wzDZq)，方法是使用[平衡组](http://msdn.microsoft.com/en-us/library/bs2twtah.aspx#balancing_group_definition)并意识到如果从字符串中删除括号，您总是有一个与简单表达式匹配的字符串，例如`^\d+(?:\s+(?:AND|OR)\s+\d+)*\z`.

所以你所要做的就是使用平衡组来确保括号是平衡的（并且在正确的位置以正确的形式）。

稍微改写一下上面的表达式：

```
(?x)^
OPENING
\d+
CLOSING
(?:
    \s+(?:AND|OR)\s+
    OPENING
    \d+
    CLOSING
)*
BALANCED
\z 
```

（`(?x)`使正则表达式引擎忽略模式中的所有空格和注释，因此可以使其更具可读性。）

匹配`OPENING`任意数量（包括 0）的左括号：

```
\s* (?: (?<open> \( ) \s* )* 
```

`CLOSING`匹配任意数量的右括号也确保平衡组是平衡的：

```
\s* (?: (?<-open> \) ) \s* )* 
```

并`BALANCED`执行平衡检查，如果有更多的开放括号然后关闭则失败：

```
(?(open)(?!)) 
```

给出表达式：

```
(?x)^
\s* (?: (?<open> \( ) \s* )*
\d+
\s* (?: (?<-open> \) ) \s* )*
(?:
    \s+(?:AND|OR)\s+
    \s* (?: (?<open> \( ) \s* )*
    \d+
    \s* (?: (?<-open> \) ) \s* )*
)*
(?(open)(?!))
\z 
```

如果您不想让随机空格删除每个`\s*`.

# 例子

请参阅[IdeOne](http://ideone.com/wzDZq)上的演示。输出：

```
matched: '2'
matched: '1 AND 2'
matched: '12 OR 234'
matched: '(1) AND (2)'
matched: '(((1)) AND (2))'
matched: '1 AND 2 AND 3'
matched: '1 AND (2 OR (3 AND 4))'
matched: '1 AND (2 OR 3) AND 4'
matched: ' ( 1    AND ( 2 OR  ( 3 AND    4 )  )'
matched: '((1 AND 7) OR 6) AND ((2 AND 5) OR (3 AND 4))'
matched: '(1)'
matched: '(((1)))'
failed:  '1 2'
failed:  '1(2)'
failed:  '(1)(2)'
failed:  'AND'
failed:  '1 AND'
failed:  '(1 AND 2'
failed:  '1 AND 2)'
failed:  '1 (AND) 2'
failed:  '(1 AND 2))'
failed:  '(1) AND 2)'
failed:  '(1)() AND (2)'
failed:  '((1 AND 7) OR 6) AND (2 AND 5) OR (3 AND 4))'
failed:  '((1 AND 7) OR 6) AND ((2 AND 5 OR (3 AND 4))'
failed:  '' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T17:12:05.560

如果您只想验证输入字符串，您可以编写一个简单的解析器。每个方法都使用某种输入（数字、括号、运算符）并在匹配后返回剩余的字符串。如果无法进行匹配，则会引发异常。

```
public class ParseException : Exception { }

public static class ExprValidator
{
    public static bool Validate(string str)
    {
        try
        {
            string term = Term(str);
            string stripTrailing = Whitespace(term);

            return stripTrailing.Length == 0;
        }
        catch(ParseException) { return false; }
    }

    static string Term(string str)
    {
        if(str == string.Empty) return str;
        char current = str[0];

        if(current == '(')
        {
            string term = LBracket(str);
            string rBracket = Term(term);
            string temp = Whitespace(rBracket);
            return RBracket(temp);
        }
        else if(Char.IsDigit(current))
        {
            string rest = Digit(str);
            try
            {
                //possibly match op term
                string op = Op(rest);
                return Term(op);
            }
            catch(ParseException) { return rest; }
        }
        else if(Char.IsWhiteSpace(current))
        {
            string temp = Whitespace(str);
            return Term(temp);
        }
        else throw new ParseException();
    }

    static string Op(string str)
    {
        string t1 = Whitespace_(str);
        string op = MatchOp(t1);
        return Whitespace_(op);
    }

    static string MatchOp(string str)
    {
        if(str.StartsWith("AND")) return str.Substring(3);
        else if(str.StartsWith("OR")) return str.Substring(2);
        else throw new ParseException();
    }

    static string LBracket(string str)
    {
        return MatchChar('(')(str);
    }

    static string RBracket(string str)
    {
        return MatchChar(')')(str);
    }

    static string Digit(string str)
    {
        return MatchChar(Char.IsDigit)(str);
    }

    static string Whitespace(string str)
    {
        if(str == string.Empty) return str;

        int i = 0;
        while(i < str.Length && Char.IsWhiteSpace(str[i])) { i++; }

        return str.Substring(i);
    }

    //match at least one whitespace character
    static string Whitespace_(string str)
    {
        string stripFirst = MatchChar(Char.IsWhiteSpace)(str);
        return Whitespace(stripFirst);
    }

    static Func<string, string> MatchChar(char c)
    {
        return MatchChar(chr => chr == c);
    }

    static Func<string, string> MatchChar(Func<char, bool> pred)
    {
        return input => {
            if(input == string.Empty) throw new ParseException();
            else if(pred(input[0])) return input.Substring(1);
            else throw new ParseException();
        };
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-08T12:53:42.363

如果您认为布尔表达式是由**正式语法**生成的，那么编写**解析器**会更容易。

我制作了一个开源库来解释简单的布尔表达式。您可以在[GitHub 上](https://github.com/FrancescoBonizzi/Boolli)查看它，特别是查看`AstParser`类和`Lexer`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T15:05:09.757

[ANTLR](http://www.antlr.org/)解析器生成器？

> 在 C# 中实现此目的的一种简短方法

虽然如果它只是数字和 OR + AND

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T15:30:22.910

很简单：

在第一阶段，您必须通过简单的字符串比较来确定词法（数字、括号或运算符）。

在第二阶段，您必须定义闭括号计数变量（bracketPairs），可以通过以下算法为每个词法计算：

如果当前词法是'('，则括号对++；

如果当前词法是')'，那么括号对--。

否则不要修改bracketPairs。

最后，如果所有词法都已知且括号对 == 0，则输入表达式有效。

如果需要构建 AST，任务会稍微复杂一些。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-23T16:34:40.757

你想要的是“平衡组”，有了它们你可以得到所有的括号定义，那么你只需要一个简单的字符串解析

[http://blog.stevenlevithan.com/archives/balancing-groups](http://blog.stevenlevithan.com/archives/balancing-groups)

[http://msdn.microsoft.com/en-us/library/bs2twtah.aspx#balancing_group_definition](http://msdn.microsoft.com/en-us/library/bs2twtah.aspx#balancing_group_definition)

# mysql - MySQL，将文件中的数据加载到表中

> ID：12553357
> 
> 赞同：0
> 
> 时间：2012-09-23T14:54:19.053
> 
> 标签：mysql, insert, load-data-infile

我的基本任务是尽可能快地将单个文件中的部分数据导入几个不同的表中。

`LOAD DATA`我目前每个表都有一个文件，并且我设法使用语法将每个文件导入到相关表中。

我们的产品收到客户的新要求，他不再有兴趣向我们发送多个文件，而是希望向我们发送包含所有原始记录的单个文件，而不是维护多个此类文件。

我想到了几个建议：

1.  我可能会要求客户在文件中的每批行之前写一个原始文件，描述他希望将其加载到的表以及需要导入的前行数。例如

    ```
    Table2,500 
    ...
    Table3,400 
    ```

    然后我可以尝试`LOAD DATA`为每个这样的行块申请丢弃表和行号描述。**可行吗？**

2.  我可能要求每条记录都包含表名作为附加属性，然后我需要迭代每条记录并插入它，尽管我确信它比`LOAD DATA`.

3.  我也可以使用例如 Java 预处理这个文件并`LOAD DATA`在 for 循环中执行 as 语句。

我可能需要几乎任何我想要的格式更改，但它必须是一个文件并且导入必须快速。（我不得不说，我所说的表描述是什么意思，它实际上是一个特性的不同名称，我决定所有与这个特性相关的文件都应该保存在不同的表名中——它对客户端是透明的）

什么听起来是最好的解决方案？他们还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:31:10.337

这取决于您的数据文件。我们正在做类似的事情，并制作了一个小的 perl 脚本来逐行读取数据文件。如果该行包含我们需要的内容（例如以 table1 开头），我们知道它应该在表 1 中，因此我们打印该行。

然后，您可以将该输出保存到文件或命名管道，并将其与 LOAD DATA 一起使用。

将其加载到临时表中并从那里加载到新表中可能会有更好的性能。

perl 脚本（但您可以用任何语言编写）可以非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T15:11:16.360

您可能还有另一种选择，即定义一个表并将所有数据加载到该表中，然后使用 select-insert-delete 将该表中的数据传输到您的目标表。根据列的总数，这可能会也可能不会。但是，如果可能的话，您不需要编写外部 java 程序，并且可以完全依赖数据库来加载数据，这也可以为您提供更清洁和更优化的工作方式。您很可能需要一个额外的标记列，它可以是目标表的名称。如果是这样，这可以被视为上述选项 2 的变体。

# c++ - C++11 类型推断如何决定浮点数或双精度数？

> ID：12553359
> 
> 赞同：10
> 
> 时间：2012-09-23T14:54:56.883
> 
> 标签：c++, c++11, type-inference

考虑这个类型推断的例子：

```
auto var = 1.0 ; 
```

在 C++11 类型推断下，这是否计算为浮点数或双精度数？，可以控制这种行为吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-23T15:00:30.383

它将被评估为 a `double`，是的，您可以控制它。

在标准**ISO-14882:2011** *2.14.4 Floating literals*中，第 1 点：

> 除非由后缀明确指定，否则浮动文字的类型是 double。后缀 f 和 F 指定 float，后缀 l 和 L 指定 long double。如果缩放值不在其类型的可表示值范围内，则程序格式错误。

# ruby-on-rails - Rails 中的范围和嵌套查询

> ID：12553369
> 
> 赞同：0
> 
> 时间：2012-09-23T14:56:02.267
> 
> 标签：ruby-on-rails, ruby

> **可能重复：**
> [无法在 Rails 中加入自联接表](https://stackoverflow.com/questions/12554579/unable-to-join-self-joins-tables-in-rails)

我有多级类别

```
class Category < ActiveRecord::Base
  belongs_to :parent, :class_name => "Category", :foreign_key => "parent_id"
  has_many :children,  :class_name => "Category"
  has_many :products
  attr_accessible :description, :title, :parent

end 
```

这是一个模型`Product`

```
class Product < ActiveRecord::Base
  belongs_to :category
end 
```

我需要定义范围`Product`以便能够按父类别名称查找所有产品

```
class Product < ActiveRecord::Base
 #.....
 #scope :of_tea, lambda{ where(:category.parent.name => "tea") } # not working
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:27:00.897

使用哈希指定 where 条件：

```
where(:category => { :parents => { :title => "tea" } } ) 
```

# iphone - 在应用程序启动时添加启动画面（即使是多任务处理）？

> ID：12553374
> 
> 赞同：0
> 
> 时间：2012-09-23T14:56:26.583
> 
> 标签：iphone, objective-c, ipad, splash-screen, multitasking

我需要在我的应用程序中添加一个简短的闪屏，即使从多任务启动应用程序也会出现。

我设法做到了，`- (void)applicationWillEnterForeground:(UIApplication *)application`在我的应用程序委托中弹出一个 UIImageView 并在几秒钟后将其淡出。

然而，当从多任务启动时，虽然它看起来和工作得相当好，但有时在图像弹出之前会有短暂的延迟，因此您会短暂地看到它背后的视图。

我该如何克服呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:44:35.787

如果我理解正确，您只是想创建一个启动图像，对吗？因此，在这种情况下，您只需进入 Supporting Files 中的 info-plist，然后突出显示其中一项并按“+”图标。从下拉菜单中选择“启动图像”，然后在“启动图像”旁边的文本框中输入图像的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T15:23:10.490

好的，现在我明白了——

那么你可以尝试使用

```
 - (void)applicationDidBecomeActive:(UIApplication *)application 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T15:16:02.447

尝试这个。

创建对视图的引用（如果使用 ARC，则为强引用），以便您持有它。然后在程序中的任何地方创建视图（我猜一开始会很好）。然后，当您从多任务返回时，您不需要创建新视图（这可能需要时间），您只需推送您已经在内存中设置的视图。

假设您还没有这样做，它应该会显着缩短（或消除）您看到的延迟。

另外，不要忘记设置`animated:`为`NO`

# django - 更改 django 扩展模板以根据我的设计提供所有模板

> ID：12553377
> 
> 赞同：1
> 
> 时间：2012-09-23T14:56:45.683
> 
> 标签：django, django-templates, django-1.4

为了使用 django 自己提供的模板，例如忘记密码、更改密码等模板和视图功能，我制作了自己的登录模板等但一段时间后我发现已经存在许多视图和模板，只需提供权限即可使用URL 但唯一的问题是这些模板正在扩展 django 自己的模板。所以我想知道有没有办法只设置我自己选择的扩展模板，即我网站的主模板，这样我只需提供忘记密码或更改密码等相关页面的 URL，django 通过扩展我的主模板来呈现模板模板而不是 django 自己的模板。我不确定管理面板是否扩展了与其他页面相同的模板。

请告诉我该怎么做，也请告诉我这样做是否有任何问题。

## 更多详情：

我知道继承和扩展我们的模板文件，但我如何设置我自己的模板，让它们自动继承我的模板。例如，对于忘记密码，我必须制作一个模板文件，并且需要粘贴表单元素和我写的顶部，`{%extends main.html%}`但我不希望这样，我知道默认的忘记密码模板是从我想要的一些默认 django 模板继承的设置一些，以便在这种情况下它总是从我的模板继承。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:24:39.283

简短的回答：您必须编写自己的模板。

更长的答案：

Django 确实包含一些模板，但这些模板都是专门用于管理应用程序的。auth 视图默认使用“registration/some_template.html”，并且这些模板都存在于管理应用程序中（请参阅[https://github.com/django/django/tree/master/django/contrib/admin/templates/registration](https://github.com/django/django/tree/master/django/contrib/admin/templates/registration)）。auth 视图都支持`template`您可以在 URLConf 中提供的关键字参数，以便您可以指定要使用自己的模板。

将管理模板视为您在编写自己的模板时可以使用的参考，而不是您打算直接使用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:22:56.383

尝试了解模板继承。我认为您可以使用模板继承来实现您想要的。[这](http://www.webmonkey.com/2010/02/use_templates_in_django/#Inheritance)是一篇介绍该主题的好帖子。

# sql - 执行 Oracle 查询时出错

> ID：12553380
> 
> 赞同：1
> 
> 时间：2012-09-23T14:57:12.627
> 
> 标签：sql, oracle

我对 Oracle 很陌生，我正在为我的项目开发一个查询。对我来说，似乎一切正常，但是在执行查询时，oracle 给出了错误“ORA-00905：缺少关键字”。

她是我的疑问::

```
SELECT DISTINCT ba.uuid AS uuid
     , COUNT(*) over() AS rowcount 
FROM basicaddress ba 
WHERE ba.postalcode='143456' 
   OR ba.lastname LIKE '%143456%' 
   OR ba.city LIKE '%143456%'
GROUP BY CASE WHEN ba.postalcode='143456' THEN ba.postalcode, ba.uuid END
       , CASE WHEN ba.lastname LIKE '%143456%' THEN ba.lastname, ba.uuid END
       , CASE WHEN ba.city LIKE '%143456%' THEN ba.city, ba.uuid 
                                           ELSE ba.postalcode,ba.uuid END 
ORDER BY CASE WHEN ba.postalcode='143456' THEN ba.postalcode END DESC
       , CASE WHEN ba.lastname LIKE '%143456%' THEN ba.lastname END ASC
       , CASE WHEN ba.city LIKE '%143456%' THEN ba.city ASC 
                                           ELSE ba.postalcode END DESC 
```

我缺少什么关键字？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T15:26:27.110

错误在您的`CASE`陈述中

```
CASE 
  WHEN ba.postalcode='143456' 
  THEN ba.postalcode, ba.uuid  <-- here. You can return value of only one column
END; 
```

`ba.postalcode`您必须在和 之间做出决定`ba.uuid`。或者，如果您想查看最终结果集中两列的值，请使用[||将它们连接起来。](http://docs.oracle.com/cd/E11882_01/server.112/e26088/operators003.htm#i997789)使用隐式或显式类型转换的运算符或[CONCAT函数。](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions033.htm#i77004)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:01:09.250

我怀疑你打算`ELSE`在你的表达中使用一个子句`CASE`，可能是这样的：

```
SELECT DISTINCT ba.uuid AS uuid
     , COUNT(*) AS rowcount
FROM basicaddress ba  
WHERE ba.postalcode='143456'
   OR ba.lastname LIKE '%143456%'
   OR ba.city LIKE '%143456%' 
GROUP BY CASE WHEN ba.postalcode='143456' 
              THEN ba.postalcode
              ELSE ba.uuid END
       , CASE WHEN ba.lastname LIKE '%143456%' 
              THEN ba.lastname
              ELSE ba.uuid END
       , CASE WHEN ba.city LIKE '%143456%' 
              THEN ba.city
              ELSE ba.postalcode,ba.uuid END
ORDER BY CASE WHEN ba.postalcode='143456'
              THEN ba.postalcode END DESC
       , CASE WHEN ba.lastname LIKE '%143456%' 
              THEN ba.lastname END ASC
       , CASE WHEN ba.city LIKE '%143456%'
              THEN ba.city ASC
              ELSE ba.postalcode END DESC 
```

您也不需要函数`over()`上的子句。`COUNT()`此外，我以一种希望使语法更易于理解的方式重新编写了您的查询，并纠正了我认为您的一个`CASE`表达式中的语法错误。请注意，为了安全起见，您应该始终提供`ELSE`条件。我会把那部分留给你。

# iphone - 将 xml 数据解析为 NSMutable 数组列表

> ID：12553383
> 
> 赞同：0
> 
> 时间：2012-09-23T14:57:35.063
> 
> 标签：iphone, objective-c, cocoa-touch, ios5, xcode4.2

我正在向服务器发送查询并使用此代码获得响应

```
 NSString *urlString = @"myPHPQuery";
 NSURL *parserUrl = [[[NSURL alloc] initWithString:urlString] autorelease];
        NSXMLParser *parser = [[[NSXMLParser alloc] initWithContentsOfURL:parserUrl] autorelease];
        [parser setDelegate:self];
        [parser parse]; 
```

我可以得到这种类型的回应

```
<users>
                            <username>nothan</username>
                            <score>1000</score>                         
                            </users>
<users>
                            <username>nothan</username>
                            <score>1000</score>                         
                            </users> 
```

我正在使用此代码来解析可变数组中的数据

```
int arrayCount = 0;

NSString *elementname;
NSInteger * count;

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict 
{    
    elementname = elementName;
}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{

    if([elementname isEqualToString:@"username"])
    {
        if ( count == 0 )
        { 
            NSLog(@"%@" , string);
            [self.playerNames replaceObjectAtIndex:arrayCount withObject:string];
            arrayCount = arrayCount + 1;
            count = count + 1 ;
        }
        else
            count = 0;

    }
    else if([elementname isEqualToString:@"score"])
    {
        if ( count == 0 )
        {
            NSLog(@"%@" , string);

            [self.scores replaceObjectAtIndex:arrayCount withObject:string];
            count = count + 1 ;
        }
        else
            count = 0; 
    }
}

- (void)parserDidEndDocument:(NSXMLParser *)parser 
{

    for (int i = 0 ; i <10 ; i++)
    {
        NSLog(@"%d - %@" , i,[playerNames objectAtIndex:i]);
    }
} 
```

这段代码的问题是，它只检索一个

`<users> .... </users>`如何更改此代码以使其检索更多用户。

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:26:56.947

对于您在上面发布的示例 XML，解析器运行正确。

[可扩展标记语言 (XML) 1.0（第五版）§2.1 格式良好的 XML 文档](http://www.w3.org/TR/2008/REC-xml-20081126/#sec-well-formed)

> 只有一个元素，称为根或文档元素

解析第一个`<users>…&lt;/users>`元素后，文档完成，解析器停止。

要在 XML 文档中列出内容，您必须将它们包装在外部元素中。

```
<allusers>
  <users>
    <username>nothan</username>
    <score>1000</score>                         
  </users>
  <users>
    <username>nothan</username>
    <score>1000</score>                         
  </users>
</allusers> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T15:26:47.900

当调用解析器 foundCharacters 方法时，会检查 int 计数。如果它为零，则替换数组中的第一个条目，并增加计数。在下一次调用此方法时，count 不为零，因此不会替换任何内容，然后将 count 设置回零。对于此方法的下一次调用，计数为零......等等。

还要记住，当从网上检索到的数据大到足以被 tcp/ip 分成块时，initWithContentsOfURL 可能不会全部返回。最好使用 NSURLConnection 将接收到的数据构建为 NSData 对象，然后将其传递给解析器。此外，对于给定元素，可能会多次调用 foundCharacters，因此应该构建接收到的元素，并且应该在委托的 didEndElement 方法中将其放入数组中。

# internationalization - Sonar 以不同于 Sonar 默认区域设置的其他语言显示违规消息

> ID：12553385
> 
> 赞同：0
> 
> 时间：2012-09-23T14:57:51.960
> 
> 标签：internationalization, sonarqube, locale

将 Sonar 2.10 升级到 Sonar 3.2 后，某些违规消息会以 Sonar 默认区域设置以外的其他语言显示。

就我而言，Sonar 默认语言环境在常规配置设置中设置为“en”。我还在 Sonar System Info 面板中检查了 Java 系统属性“user.language”也设置为“en”。我也没有安装 Sonar French Pack。默认只安装英文包。但是有些消息仍然以法语显示？！？！

请注意，声纳指标是由 Jenkins 中配置的作业触发的。我也应该强迫詹金斯做任何事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:44:48.123

您必须确保 Jenkins 服务器上的默认语言环境也是英语。

# javascript - 使用 jQuery 增加元素的类名之一

> ID：12553395
> 
> 赞同：1
> 
> 时间：2012-09-23T14:58:52.027
> 
> 标签：javascript, jquery

我有许多 div 元素，每个元素都有三个类名。每个里面都有一个图像。它们`i1, i2, i3`通过类名连续编号（...）。类名类似于`"img small i14"`. 我需要为每个元素增加这些类名的数量。

所以：对于这些 div 元素中的每一个，我需要更改以**i**开头的类- 加 1 或从中减去 1。希望有一种有效的方法来做到这一点。

整个事情的目标是创建一个旋转的图片库。我非常感谢帮助，无论是通过代码帮助还是提供解决问题的更好方法。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T15:04:21.643

我认为没有任何 jQuery 工具可以让这变得更容易。我只需使用纯 JavaScript 即可：

```
function updateIndex( className ) {
  return className.replace(/\bi(\d+)\b/, function(_, n) {
    return 'i' + ((+n) + 1);
  });
} 
```

然后您可以将元素的“className”属性传递给它，并将“className”更新为返回值：

```
element.className = updateIndex( element.className ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:29:04.297

如果你将 Pointy 的 regExp 与 undefined 的 jQuery 属性设置器结合起来，你会得到：

```
$(a selector).attr('class', function (index, attrValue) {
    return attrValue.replace(/\bi(\d+)\b/, function (match, $1) { 
        return 'i' + (Number($1) + 1);
    });
}); 
```

哪个工作正常（我想是跨浏览器），因为该类是一个 html 属性。

编辑：要检查它是否是最后一张图像，您必须知道该容器中有多少张图像，因此您必须有一个 jquery 选择器，它只匹配其中一个容器中的图像。代码如下所示：

```
var number_of_elements = $(the selector).length;

$(the selector).attr('class', function (index, attrValue) {
    return attrValue.replace(/\bi(\d+)\b/, function (match, $1) { 
        var number = Number($1);
        if (number === number_of_elements) {
            return 1
        } else {
            return 'i' + (number + 1);
        }
    });
}); 
```

# objective-c - Objective-c [Xcode] CCAnimation 不工作，cocos2d

> ID：12553397
> 
> 赞同：0
> 
> 时间：2012-09-23T14:58:59.787
> 
> 标签：objective-c, xcode, cocos2d-iphone

我在播放器类中声明了两个动画，然后我想从另一个类运行，但我不能这是我的代码（如果你不能在这里阅读它在 pastebin 上：http: [//pastebin.com/iy0eFMWL](http://pastebin.com/iy0eFMWL)） : 播放器.h

```
 @interface Player : CCSprite {
    CCAnimate *animationOllie;
    CCRepeatForever *repeatNormal;
    } 
```

播放器.m：

```
 @implementation Player

    -(id)initWithFile:(NSString *)filename
    {
if (self = [super initWithFile:filename]) {
    self.velocity = ccp(0.0, 0.0);

    CCAnimation *ollie = [CCAnimation animation];
    [ollie setDelayPerUnit:0.05f];
    [ollie addSpriteFrameWithFilename:@"ollie1.png"];
    [ollie addSpriteFrameWithFilename:@"ollie2.png"];

    animationOllie = [CCAnimate actionWithAnimation:ollie];

    CCAnimation *normal = [CCAnimation animation];
    [normal setDelayPerUnit:0.05f];
    [normal addSpriteFrameWithFilename:@"normal1.png"];
    [normal addSpriteFrameWithFilename:@"normal2.png"];
    CCAnimate *animationNormal = [CCAnimate actionWithAnimation:normal];

    repeatNormal = [CCRepeatForever actionWithAction:animationNormal];

    [self runAction:repeatNormal];

        }
        return self;
    }
    -(void)animateThePlayer {
        [self stopAction:repeatNormal];
        [self runAction:animationOllie];
    } 
```

在 GameScene 类中：GameScene.h：

```
 @interface GamePlayLayer : CCLayerColor {
        float yVel;
    } 
```

游戏场景.m：

```
 #import "Player.h"

    @interface GamePlayLayer()
    {
        Player *player;
     }

    @end

    @implementation GamePlayLayer

    -(id) init
    {
        if( (self=[super initWithColor:ccc4(255,255,255,255)] )) {

    player = [[Player alloc] initWithFile:@"normal1.png"];

    [self addChild:player];

    self.isTouchEnabled = YES;

    player.position = ccp(85,70);

    [self schedule:@selector(update:)];

        }
        return self;
    }

    -(void)update:(ccTime)dt {

        if (player.position.y > 70) {
            yVel -= 0.1;
        }
else {
    if (yVel != 5.5) {
        yVel = 0;
        player.position = ccp(player.position.x, 70);
    }
}
player.position = ccp(player.position.x, player.position.y + yVel);

    }

    - (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    yVel = 5.5;
        [player animateThePlayer];
    } 
```

就是这样，它构建得很好，一切正常，但是当我单击该层时它崩溃了，我收到了这条消息：

> 0x1df609b: movl 8(%edx), %edi 线程 1: EXC_BAD_ACCESS (code=2, address=0xf

我能做些什么？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:48:22.390

第一件事 - 你尝试使用自动释放的对象。`animationOllie`将在您的 init 方法之后释放。

第二个错误是你不能重用动作。当您需要运行操作时，您必须重新创建它。

# c++ - 在哪里可以在 MFC 应用程序中定义全局变量？

> ID：12553406
> 
> 赞同：0
> 
> 时间：2012-09-23T15:00:39.980
> 
> 标签：c++, visual-studio-2008, mfc

我想在 MFC 应用程序中声明一个全局变量，以便应用程序中的每个操作都可以看到该变量并对其进行操作，但我不知道我可以在哪里声明该变量。在这段代码中，我有很多按钮操作，我需要声明一个在这些操作之间共享的字符串变量。

```
// CalculatorDlg.cpp : implementation file
//

#include "stdafx.h"
#include "Calculator.h"
#include "CalculatorDlg.h"

#ifdef _DEBUG
#define new DEBUG_NEW
#endif

// CAboutDlg dialog used for App About

class CAboutDlg : public CDialog
{
 public:
CAboutDlg();

 // Dialog Data
enum { IDD = IDD_ABOUTBOX };
public:
static CString myValue;

protected:
virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support

  // Implementation
protected:
DECLARE_MESSAGE_MAP()
};

CAboutDlg::CAboutDlg() : CDialog(CAboutDlg::IDD) {}

void CAboutDlg::DoDataExchange(CDataExchange* pDX){
CDialog::DoDataExchange(pDX);
}

BEGIN_MESSAGE_MAP(CAboutDlg, CDialog)
END_MESSAGE_MAP()

// CCalculatorDlg dialog

CCalculatorDlg::CCalculatorDlg(CWnd* pParent /*=NULL*/)
: CDialog(CCalculatorDlg::IDD, pParent)
{
m_hIcon = AfxGetApp()->LoadIcon(IDR_MAINFRAME);
}

void CCalculatorDlg::DoDataExchange(CDataExchange* pDX)
{
CDialog::DoDataExchange(pDX);
}

BEGIN_MESSAGE_MAP(CCalculatorDlg, CDialog)
ON_WM_SYSCOMMAND()
ON_WM_PAINT()
ON_WM_QUERYDRAGICON()
//}}AFX_MSG_MAP
ON_BN_CLICKED(IDC_BUTTON1, &CCalculatorDlg::OnBnClickedButton1)
ON_BN_CLICKED(IDC_BUTTON3, &CCalculatorDlg::OnBnClickedButton3)
ON_BN_CLICKED(IDC_BUTTON2, &CCalculatorDlg::OnBnClickedButton2)
ON_BN_CLICKED(IDC_BUTTON6, &CCalculatorDlg::OnBnClickedButton6)
ON_BN_CLICKED(IDC_BUTTON5, &CCalculatorDlg::OnBnClickedButton5)
ON_BN_CLICKED(IDC_BUTTON4, &CCalculatorDlg::OnBnClickedButton4)
ON_BN_CLICKED(IDC_BUTTON9, &CCalculatorDlg::OnBnClickedButton9)
ON_BN_CLICKED(IDC_BUTTON8, &CCalculatorDlg::OnBnClickedButton8)
ON_BN_CLICKED(IDC_BUTTON7, &CCalculatorDlg::OnBnClickedButton7)
 END_MESSAGE_MAP()
 // CCalculatorDlg message handlers

     BOOL CCalculatorDlg::OnInitDialog()
    {
CDialog::OnInitDialog();

// Add "About..." menu item to system menu.

// IDM_ABOUTBOX must be in the system command range.
ASSERT((IDM_ABOUTBOX & 0xFFF0) == IDM_ABOUTBOX);
ASSERT(IDM_ABOUTBOX < 0xF000);

CMenu* pSysMenu = GetSystemMenu(FALSE);
if (pSysMenu != NULL)
{
    CString strAboutMenu;
    strAboutMenu.LoadString(IDS_ABOUTBOX);
    if (!strAboutMenu.IsEmpty())
    {
        pSysMenu->AppendMenu(MF_SEPARATOR);
        pSysMenu->AppendMenu(MF_STRING, IDM_ABOUTBOX, strAboutMenu);
    }
}

// Set the icon for this dialog.  The framework does this automatically
//  when the application's main window is not a dialog
SetIcon(m_hIcon, TRUE);         // Set big icon
SetIcon(m_hIcon, FALSE);        // Set small icon

// TODO: Add extra initialization here

return TRUE;  // return TRUE  unless you set the focus to a control
 }

 void CCalculatorDlg::OnSysCommand(UINT nID, LPARAM lParam)
 {
if ((nID & 0xFFF0) == IDM_ABOUTBOX)
{
    CAboutDlg dlgAbout;
    dlgAbout.DoModal();
}
else
{
    CDialog::OnSysCommand(nID, lParam);
}
 }

 // If you add a minimize button to your dialog, you will need the code below
 //  to draw the icon.  For MFC applications using the document/view model,
 //  this is automatically done for you by the framework.

void CCalculatorDlg::OnPaint()
{
if (IsIconic())
{
    CPaintDC dc(this); // device context for painting

    SendMessage(WM_ICONERASEBKGND, reinterpret_cast<WPARAM>(dc.GetSafeHdc()), 0);

    // Center icon in client rectangle
    int cxIcon = GetSystemMetrics(SM_CXICON);
    int cyIcon = GetSystemMetrics(SM_CYICON);
    CRect rect;
    GetClientRect(&rect);
    int x = (rect.Width() - cxIcon + 1) / 2;
    int y = (rect.Height() - cyIcon + 1) / 2;

    // Draw the icon
    dc.DrawIcon(x, y, m_hIcon);
}
else
{
    CDialog::OnPaint();
}
  }

 // The system calls this function to obtain the cursor to display while the user drags
 //  the minimized window.
 HCURSOR CCalculatorDlg::OnQueryDragIcon()
 {
return static_cast<HCURSOR>(m_hIcon);
  }

 void CCalculatorDlg::OnBnClickedButton1()
{
/*
CString s="ABC";
    LPCTSTR str_name = _T("Hello ")*/;
    SetDlgItemText(IDC_EDIT1,_T"9");
/*CAboutDlg::myValue="9";*/
}

void CCalculatorDlg::OnBnClickedButton3(){}

void CCalculatorDlg::OnBnClickedButton2(){}

void CCalculatorDlg::OnBnClickedButton6(){}

void CCalculatorDlg::OnBnClickedButton5(){}

void CCalculatorDlg::OnBnClickedButton4(){}

void CCalculatorDlg::OnBnClickedButton9(){}

void CCalculatorDlg::OnBnClickedButton8(){}

void CCalculatorDlg::OnBnClickedButton7(){} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T16:08:30.937

如果您的项目使用预编译头文件（有 99.9999% 的可能性将其用作默认 MFC 项目设置），您可以在预编译头文件中*声明*此变量，通常其名称为`stdafx.h`并将其*定义*`.cpp`在任何适当翻译单元（文件）的全局范围内。通常，这可能是`YourProjectName.cpp`包含从`CWinApp`.

```
// stdafx.h
extern int globalVar; // Global variable declaration, note extern keyword

// YourProjectName.cpp - global scope
int globalVar = 42; // Global variable definition 
```

预编译的头文件`stdafx.h`首先包含在项目的每个`.cpp`文件中，因此`globalVar`在您的项目代码中随处可见。

还要提一下，不建议使用全局对象，这被认为是[糟糕的设计和反模式](https://stackoverflow.com/questions/484635/are-global-variables-bad)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T15:08:24.883

将全局变量放在头文件中并将其添加到[Name Forced Include File](http://msdn.microsoft.com/en-us/library/8c5ztk84%28v=vs.71%29.aspx)。

# apache - CGI 进程失效的原因

> ID：12553415
> 
> 赞同：2
> 
> 时间：2012-09-23T15:01:45.520
> 
> 标签：apache, cgi, defunct

我想检查是否可以通过任何 apache 日志跟踪 CGI 程序何时被调用或结束。

如果我使用 javascript 每 2 秒重新加载一个 CGI 程序，并且在该 CGI 程序中，它会检查并执行一系列与 SQL 的连接，我希望在我的 SQL API 尝试时确定 CGI 进程是否已经结束向该 CGI 进程返回 SQL 状态，从而导致进程失效？

我能否追踪 CGI 进程结束的时间？什么时候通过任何 apache 日志调用 CGI 进程？

需要大家的建议。

谢谢。

# objective-c - GTMOAuth 的 FatSecret REST KIT 问题

> ID：12553419
> 
> 赞同：0
> 
> 时间：2012-09-23T15:02:33.987
> 
> 标签：objective-c, ios, rest, oauth, restkit

我正在尝试使用 FatSecret Rest API 和 GTMOAuth，但我不知道出了什么问题。有没有经验的人可以告诉我我做错了什么？

我是 Objective-C 的新手，所以请耐心等待。

```
- (void)sendRequests4
{
    NSString *consumerKey = @"my consumer key";
    NSString *sharedSecret = @"my shared secret key";

    RKClient *client = [RKClient sharedClient];

    GTMOAuthAuthentication *auth = [[GTMOAuthAuthentication alloc]
                                    initWithSignatureMethod:kGTMOAuthSignatureMethodHMAC_SHA1
                                    consumerKey:client.OAuth1ConsumerKey
                                    privateKey:client.OAuth1ConsumerSecret];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:client.baseURL];

    auth.shouldUseParamsToAuthorize = YES;
    [auth addAuthorizeTokenParamsToRequest:request];
    [auth addAuthorizeTokenHeaderToRequest:request];

    // Perform a simple HTTP GET and call me back with the results
    NSMutableDictionary* params = [NSMutableDictionary dictionary];
    [params setValue:consumerKey forKey:@"oauth_consumer_key"];
    [params setValue:kGTMOAuthSignatureMethodHMAC_SHA1 forKey:@"oauth_signature_method"];
    [params setValue:auth.timestamp forKey:@"oauth_timestamp"];
    [params setValue:auth.nonce forKey:@"oauth_nonce"];
    [params setValue:@"1.0" forKey:@"oauth_version"];
    [params setValue:@"??????" forKey:@"oauth_signature"];
    [params setValue:@"foods.get_most_eaten" forKey:@"method"];
    [params setValue:@"??????" forKey:@"oauth_token"];

    NSURL *url = [NSURL URLWithString:@"http://platform.fatsecret.com/rest/server.api"];

    NSString *sigSecret = [NSString stringWithFormat:@"%@&", sharedSecret];

    NSString *sig = [OAHMAC_SHA1SignatureProvider signature:params
                                                     AndURL:url
                                              AndHTTPMethod:@"POST"
                                         AndSignatureSecret:sigSecret];

    NSString *encodedSignature = [sig urlEncodeUsingEncoding:NSUTF8StringEncoding];

    [params setValue:encodedSignature forKey:@"oauth_signature"];

    [client post:@"foods.get_most_eaten" params:params delegate:self];
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T17:06:14.630

这似乎是两个独立的 OAuth 1 库 OAuthConsumer 和 GTM OAuth 的随机混合，它们不打算一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:14:47.083

OAuth 协商很难运行，所以如果您有兴趣，我开源了我们公司的解决方案。

[https://github.com/mysterioustrousers/FatSecretKit](https://github.com/mysterioustrousers/FatSecretKit)

# python - Python：gtk.ComboBox 追加框

> ID：12553425
> 
> 赞同：1
> 
> 时间：2012-09-23T15:03:33.893
> 
> 标签：python, combobox, gtk, append, vbox

情况如下：我想将多个 gtk.VBox()'es 附加到 gtk.ComboBox。还没有找到方法，但搜索了很长时间。

提前致谢

编辑：我想要达到的主要目的是在 ComboBox 中获取除文本之外的图像。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:40:47.057

您可以像在 TreeView 中一样将 CellRendererPixbuf 添加到 ComboBox：

```
model = gtk.ListStore(gtk.gdk.Pixbuf, str)
model.append([gtk.gdk.pixbuf_new_from_file('image.png'), 'Foo'])

cb = gtk.ComboBox(model)

pb_cell = gtk.CellRendererPixbuf()
cb.pack_start(pb_cell, False)
cb.add_attribute(pb_cell, 'pixbuf', 0)

txt_cell = gtk.CellRendererText()
cb.pack_start(txt_cell, True)
cb.add_attribute(txt_cell, 'text', 1) 
```

# c - 这个 k&r 第 2 章的例子错了吗？

> ID：12553427
> 
> 赞同：0
> 
> 时间：2012-09-23T15:03:45.827
> 
> 标签：c, segmentation-fault

```
/* squeeze: delete all c from s */
void squeeze(char s[], int c)
{
  int i, j;
  for (i = j = 0; s[i] != '\0'; i++)
    if (s[i] != c)
      s[j++] = s[i];
  s[j] = '\0';
}

int main(void)
{
  squeeze("squeeze", 'z');
  return 0;
} 
```

我用 gcc 编译并运行它，结果出现了分段错误。这个例子有什么问题吗？

感谢男人，我刚刚犯了一个常见的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T15:05:18.417

您的示例表明您正在尝试应用于`squeeze()`字符串文字 ( `"squueze"`)。这是不正确的，因为字符串文字并不总是可修改的，因此尝试修改它们是无效的。您需要使用字符数组调用它：

```
#include <stdlib.h>

int main(void)
{
   char test[] = "squeeze";

   squeeze(test, 'z');
   return EXIT_SUCCESS;
} 
```

# python - 为什么我无法安装 django，我应该多次运行 pip install 吗？

> ID：12553428
> 
> 赞同：0
> 
> 时间：2012-09-23T15:03:53.217
> 
> 标签：python, django, python-2.7, pip

```
(py) D:\python>pip install django
Downloading/unpacking django
  Downloading Django-1.4.1.tar.gz (7.7MB): 491kB downloaded
Exception:
Traceback (most recent call last):
  File "D:\python\py\lib\site-packages\pip-1.2.1-py2.7.egg\pip\basecommand.py",
line 107, in main
    status = self.run(options, args)
  File "D:\python\py\lib\site-packages\pip-1.2.1-py2.7.egg\pip\commands\install.
py", line 256, in run
    requirement_set.prepare_files(finder, force_root_egg_info=self.bundle, bundl
e=self.bundle)
  File "D:\python\py\lib\site-packages\pip-1.2.1-py2.7.egg\pip\req.py", line 101
8, in prepare_files
    self.unpack_url(url, location, self.is_download)
  File "D:\python\py\lib\site-packages\pip-1.2.1-py2.7.egg\pip\req.py", line 114
2, in unpack_url
    retval = unpack_http_url(link, location, self.download_cache, self.download_
dir)
  File "D:\python\py\lib\site-packages\pip-1.2.1-py2.7.egg\pip\download.py", lin
e 463, in unpack_http_url
    download_hash = _download_url(resp, link, temp_location)
  File "D:\python\py\lib\site-packages\pip-1.2.1-py2.7.egg\pip\download.py", lin
e 380, in _download_url
    chunk = resp.read(4096)
  File "C:\Python27\Lib\socket.py", line 378, in read
    data = self._sock.recv(left)
  File "C:\Python27\Lib\httplib.py", line 552, in read
    s = self.fp.read(amt)
  File "C:\Python27\Lib\socket.py", line 378, in read
    data = self._sock.recv(left)
timeout: timed out

Storing complete log in C:\Users\bigmeow\pip\pip.log 
```

下载时 pip 将 Django-1.4.1.tar.gz 存储在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T15:15:45.393

下载阶段安装失败。您应该回答以下问题：

1.  你连接到互联网了吗？
2.  您是否使用代理进行 Internet 连接？如果你这样做，添加一个环境变量`http_proxy=http://user:pass@my.site:port/`

# c# - 如何从控制台应用程序中基于 DataTable 绘制图表？

> ID：12553435
> 
> 赞同：13
> 
> 时间：2012-09-23T15:04:45.157
> 
> 标签：c#, windows, charts

如何在控制台应用程序中使用 System.Windows.Forms.DataVisualization.Charting.Chart 绘制图形并将其保存到文件？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-23T15:12:56.053

```
 //populate dataset with some demo data..
        DataSet dataSet = new DataSet();
        DataTable dt = new DataTable();
        dt.Columns.Add("Name", typeof(string));
        dt.Columns.Add("Counter", typeof(int));
        DataRow r1 = dt.NewRow();
        r1[0] = "Demo";
        r1[1] = 8;
        dt.Rows.Add(r1);
        DataRow r2 = dt.NewRow();
        r2[0] = "Second";
        r2[1] = 15;
        dt.Rows.Add(r2);
        dataSet.Tables.Add(dt);

        //prepare chart control...
        Chart chart = new Chart();
        chart.DataSource = dataSet.Tables[0];
        chart.Width = 600;
        chart.Height = 350;
        //create serie...
        Series serie1 = new Series();
        serie1.Name = "Serie1";
        serie1.Color = Color.FromArgb(112, 255, 200);
        serie1.BorderColor = Color.FromArgb(164, 164, 164);
        serie1.ChartType = SeriesChartType.Column;
        serie1.BorderDashStyle = ChartDashStyle.Solid;
        serie1.BorderWidth = 1;
        serie1.ShadowColor = Color.FromArgb(128, 128, 128);
        serie1.ShadowOffset = 1;
        serie1.IsValueShownAsLabel = true;
        serie1.XValueMember = "Name";
        serie1.YValueMembers = "Counter";
        serie1.Font = new Font("Tahoma", 8.0f);
        serie1.BackSecondaryColor = Color.FromArgb(0, 102, 153);
        serie1.LabelForeColor = Color.FromArgb(100, 100, 100);
        chart.Series.Add(serie1);
        //create chartareas...
        ChartArea ca = new ChartArea();
        ca.Name = "ChartArea1";
        ca.BackColor = Color.White;
        ca.BorderColor = Color.FromArgb(26, 59, 105);
        ca.BorderWidth = 0;
        ca.BorderDashStyle = ChartDashStyle.Solid;
        ca.AxisX = new Axis();
        ca.AxisY = new Axis();
        chart.ChartAreas.Add(ca);
        //databind...
        chart.DataBind();
        //save result...
        chart.SaveImage(@"c:\myChart.png", ChartImageFormat.Png); 
```

在您的班级顶部添加此声明：

```
 using System.Windows.Forms.DataVisualization.Charting; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-20T11:49:21.297

在 0 和 2pi 之间绘制 sin(x)。

您必须将“System.Windows.Forms.DataVisualization.dll”和“System.Drawing.dll”添加到您的项目中。

祝你好运 ：）

```
 // 
        // chart
        //
        System.Windows.Forms.DataVisualization.Charting.Chart chart = new System.Windows.Forms.DataVisualization.Charting.Chart(); 
        chart.Size = new System.Drawing.Size(640, 320);
        chart.ChartAreas.Add("ChartArea1");
        chart.Legends.Add("legend1");

        // Plot {sin(x), 0, 2pi} 
        chart.Series.Add("sin");
        chart.Series["sin"].LegendText = "Sin(x)";
        chart.Series["sin"].ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.Spline;

        for (double x = 0; x < 2 * Math.PI; x += 0.01)
        {
            chart.Series["sin"].Points.AddXY(x, Math.Sin(x));
        }

        // Save sin_0_2pi.png image file
        chart.SaveImage("sin_0_2pi.png", System.Drawing.Imaging.ImageFormat.Png); 
```

# image-processing - 如何在 HSI 颜色空间中获取图像的伽玛

> ID：12553443
> 
> 赞同：1
> 
> 时间：2012-09-23T15:06:03.497
> 
> 标签：image-processing, computer-vision, gamma

我需要使用 HSI 色彩空间更改照片的 Gamma。我将 RGB 更改为 HSI 颜色空间，并且知道我需要使用 Gamma 值更改强度。但我不知道如何找到图像的伽马值，因为 HSI 只是色调、饱和度和强度。有谁知道我怎么能找到伽玛值？我在网上几乎找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:09:34.613

没有“图像的伽马值”之类的东西。`gamma`由于历史原因，您需要更改色调映射的曲线，这通常称为。

为了做到这一点，请使用某种单调上升的曲线，该曲线应用于`I`通道，或`R`，`G`并`B`一起使用。最常用的例子是使用幂函数 -> `y=x^(p)`，其中`p`是一个参数。（为了使事情更混乱，`p`通常也被称为`gamma`。）

# eclipse - PyDev 和 Eclipse Juno

> ID：12553447
> 
> 赞同：0
> 
> 时间：2012-09-23T15:06:44.720
> 
> 标签：eclipse, pydev

我正在运行 Eclipse 4.2，PyDev 可以正常工作，直到最近它停止工作（不再有 PyDev 视图），如果我尝试更新 pydev，我会收到此错误：

```
Cannot complete the install because one or more required items could not be found.
  Software currently installed: Eclipse SDK 4.2.0.I20120608-1400 (org.eclipse.sdk.ide 4.2.0.I20120608-1400)
  Missing requirement for filter properties ~= $0: Eclipse Product Configuration 1.0.0.I20120608-1400 (org.eclipse.rcp.configuration.feature.group 1.0.0.I20120608-1400) requires 'org.eclipse.rcp.configuration_root.gtk.linux.x86 [1.0.0.I20120608-1400]' but it could not be found
  Cannot satisfy dependency:
    From: Eclipse SDK 4.2.0.I20120608-1400 (org.eclipse.sdk.ide 4.2.0.I20120608-1400)
    To: org.eclipse.rcp.configuration.feature.group [1.0.0.I20120608-1400] 
```

我才意识到它说：`org.eclipse.rcp.configuration_root.gtk.linux.x86`。我最近将我的系统从 32 位升级到 64 位，可能是这个原因，如果是这个原因，我该如何修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:03:50.270

删除`~/.eclipse`并重新安装所有插件解决了这个问题。

# android - Activity 的生命周期是什么？

> ID：12553449
> 
> 赞同：0
> 
> 时间：2012-09-23T15:06:46.747
> 
> 标签：android, android-activity, geolocation, ip-geolocation

我不太清楚该程序如何在 Android 中运行。过去两个月我开始在 Android 上工作，而且我还是 Java 的初学者。所以，我正在尽我所能去发展和学习。这是我实现的一段代码，我不太清楚它是如何按照我的要求工作的。

```
 activity{
    onCreate(){
          /* here i am using google maps api and trying to plot the current location*/                 
      OverlayItem overlayItem1 = new OverlayItem(ourLocation,"Our Location","Position");
         CustomPinpoint custom1 = new CustomPinpoint(d, Activity.this);
            custom1.insertPinpoint(overlayItem1);
            overlayList.add(custom1);               
                controller.animateTo(ourLocation);
        }
    private class TouchOverlay extends com.google.android.maps.Overlay{
          public boolean onTouchEvent(MotionEvent event, MapView map){
              onZoom();
         }
        }
    public boolean onCreateOptionsMenu(Menu menu){}
    public boolean onOptionsItemSelected(MenuItem item){
       case.X:
        getGPSPoints();//Here i will be getting some gps points from stored database 
         // and I would like to plot them all on the map. 
        TouchOverlay touchOverlay = new TouchOverlay();
    overlayList.add(touchOverlay);
    }
    onPause(){
            super.onPause();
    lm.removeUpdates(this);
    }
    onResume(){
            super.onResume();
    lm.requestLocationUpdates(towers, 500, (float) 0.5, this);
    }
    onLocationChanged(Location l) {
    // TODO Auto-generated method stub
    clearmap();
    lat = (int) (l.getLatitude()*1E6);
    longi = (int) (l.getLongitude()*1E6);
    GeoPoint ourLocation = new GeoPoint(lat, longi);
    CustomPinpoint custom = new CustomPinpoint(d, TrafficMapActivity.this);
            OverlayItem overlayItem = new OverlayItem(ourLocation,"Our location","Position");
            custom.insertPinpoint(overlayItem);
            overlayList.add(custom);
        }
       } 
```

我的问题是何时`onLocationChanged`调用方法以及 onTouchEvent 方法？

我创建了一个方法`getGPSPoints()`，我想在地图上绘制获得的点。我的意图是它像谷歌地图交通层。当我们拖动屏幕或放大/缩小时，我应该连续绘图。为此，我在类的方法中使用相同的`getGPSPoints`方法。`onZoom()``TouchOverlay`

但是当我第一次选择该选项并进行第一次放大/缩小操作时，它只是绘制一次。如果我需要绘制剩余的部分，我必须根据当前的实现再次单击该选项。这项活动如何运作，我应该拥有它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:31:08.163

`onCreate`每当 Android 操作系统必须“创建”您的 Activity 时，都会调用您的方法。

这将在您的 Activity 的初始加载时发生，并且在操作系统自愿销毁您的 Activity 或您调用 Activity 的`finish()`方法时也会发生。

该`onCreate`方法之后是另一个名为 Activity 的方法`onStart`。

这将在 Activity 现在对用户可见时被调用。

关于`onLocationChanged`和`onTouchEvent`实现，这两种类型的方法由设置为对象的侦听器执行。

例如，`onLocationChanged`每次您的地图侦听器确定位置已更改时都会执行。

`onTouchEvent`只要您的视图收到用户的触摸事件，就会执行。

你的`onPause`和`onResume`方法是 Activity 类的一部分，这些方法类似于`onCreate`，尽管它们在不同的时间被调用。

具体来说，`onPause`只要您的 Activity 不是前面的焦点视图，就会调用它。

该`onResume`方法是相反的`onPause`- 当您的 Activity 的视图现在是屏幕上的焦点视图时，它将被调用。

[http://developer.android.com/training/basics/activity-lifecycle/pausing.html](http://developer.android.com/training/basics/activity-lifecycle/pausing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T15:47:05.620

这一切都在下图中（可在开发网站等其他地方找到）：

![安卓生命周期](../Images/205ed65ccdbdb86d6058e42f80045094.png)

# php - 使用复选框从表中删除记录

> ID：12553452
> 
> 赞同：-6
> 
> 时间：2012-09-23T15:07:49.583
> 
> 标签：php, mysql, sql, checkbox, sql-delete

> **可能的重复：**
> [使用复选框、PHP 和 MySQL 删除多行](https://stackoverflow.com/questions/10145717/deleing-multiple-rows-using-checkboxes-php-and-mysql)

我想知道是否有人可以帮助我。

我正在尝试编写一个脚本，该脚本创建一个表单，使用户能够通过选择复选框删除记录，然后按下“提交”按钮。

通过阅读许多文章，我整理了以下脚本，该脚本是构建表格、复选框和提交按钮的代码部分。

```
 <?php

$query = "SELECT  l.*, COUNT(f.locationid) totalfinds FROM detectinglocations l LEFT JOIN finds f ON f.locationid = l.locationid WHERE l.userid = '$idnum' GROUP BY l.locationname";

$result=mysql_query($query);

$count=mysql_num_rows($result);
?>

<table width="400" border="0" cellspacing="1" cellpadding="0">
<tr>
<td><form name="del" id="del" action="deletelocation.php" method="post">
<table width="400" border="0" cellpadding="3" cellspacing="1" bgcolor="#CCCCCC">
<tr>
<td bgcolor="#FFFFFF">&nbsp;</td>
<td colspan="4" bgcolor="#FFFFFF"><strong>Delete multiple rows in mysql</strong> </td>
</tr>
<tr>
<td align="center" bgcolor="#FFFFFF">#</td>
<td align="center" bgcolor="#FFFFFF"><strong>Id</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Name</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Lastname</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Email</strong></td>
</tr>

<?php
while($rows=mysql_fetch_array($result)){
?>

<tr>
<td align="center" bgcolor="#FFFFFF"><input name="checkbox[]" type="checkbox" id="checkbox[]" value="<? echo $rows['locationid']; ?>"></td>
<td bgcolor="#FFFFFF"><? echo $rows['locationid']; ?></td>
<td bgcolor="#FFFFFF"><? echo $rows['locationname']; ?></td>
<td bgcolor="#FFFFFF"><? echo $rows['returnedaddress']; ?></td>
<td bgcolor="#FFFFFF"><? echo $rows['totalfinds']; ?></td>
</tr>

<?php
}
?>

<tr>
<td colspan="5" align="center" bgcolor="#FFFFFF"><input type="submit" value="Delete" /></td>
</tr>
</table>
</form>
</td>
</tr>
</table> 
```

下面的代码，然后处理记录的删除。

```
<?php

$del_id = $_POST['checkbox']; 

for($i=0;$i<$count;$i++){
$del_id = $checkbox[$i];
$sql = "DELETE FROM $detectinglocations WHERE locationid='$del_id'";
$result = mysql_query($sql);
}

?> 
```

正确的信息被检索并显示在表单表中，但我遇到的问题是我无法删除记录。我已经通过 JavaScript 控制台运行了这个，但不幸的是，我没有收到可以帮助我解决问题的错误消息。

我只是想知道是否有人可以看看这个，让我知道我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T15:13:39.470

如下更改您的 PHP 代码

```
$del_id = $_POST['checkbox']; 
$detectinglocations = 'your database table name';

foreach($del_id as $value){
   $sql = "DELETE FROM ".$detectinglocations." WHERE id='".$value."'";
   $result = mysql_query($sql);
} 
```

# objective-c - 为什么我的 Xcode 将可选委托方法识别为无法识别的选择器？

> ID：12553455
> 
> 赞同：-4
> 
> 时间：2012-09-23T15:08:43.637
> 
> 标签：objective-c, crash, selector, ios6

这是我的崩溃日志。

```
2012-09-24 00:06:16.711 DMJ[10021:c07] -[DMJAppDelegate application:supportedInterfaceOrientationsForWindow:]: unrecognized selector sent to instance 0x84abe70
2012-09-24 00:06:16.713 DMJ[10021:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[DMJAppDelegate application:supportedInterfaceOrientationsForWindow:]: unrecognized selector sent to instance 0x84abe70'
*** First throw call stack:
(0x2553012 0x1e04e7e 0x25de4bd 0x1e187ea 0x2542cf9 0x254294e 0x82a332 0x91266d 0x90d046 0x90d246 0x85601f 0x476e8e 0x4769b7 0x875573 0x4a1428 0xa420cc 0x1e18663 0x254e45a 0xa40bcf 0xa4298d 0x824ceb 0x825002 0x823ed6 0x835315 0x83624b 0x827cf8 0x2c88df9 0x2c88ad0 0x24c8bf5 0x24c8962 0x24f9bb6 0x24f8f44 0x24f8e1b 0x8237da 0x82565c 0x2ded 0x2d25 0x1)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T15:31:03.360

协议上下文中的可选意味着您不需要实现该方法。但是你也必须注意不要调用这些方法，否则你会得到一个异常。通常在调用可选协议方法之前，您会执行以下操作：

```
if ([object respondsToSelector:@selector(application:supportedInterfaceOrientationsForWindow:)])
    result = [object application:myApp supportedInterfaceOritentationsForWindow:myWin]; 
```

如前所述，该方法可能会被调用，因为您的 info.plist 不包含正确的键（UIInterfaceOrientation）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T15:21:45.943

你确定你的 Delegate 类符合 UIApplicationDelegate 协议了吗？

你`DMJAppDelegate.h`应该有

```
@interface DMJAppDelegate : NSObject <UIApplicationDelegate> 
```

也如关于 UIApplicationDelegate 的[Apple Developer Documentation](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006786)中所述，如果您的应用程序 Info.plist 没有`UIInterfaceOrientation`指定有效方向的键，那么它将调用`supportedInterfaceOrientationsForWindow`委托（因此在这种情况下不是可选的），因此您需要确保您'如果你没有实现委托方法，你已经在你的 Info.plist 中指定了方向

当您打开 Info.plist 时，它应该在 Xcode 中指定（如果您正在开发通用应用程序，则为 iPhone 和 iPad 分开）

![Xcode Info.plist 方向](../Images/f1691d8ffdc1ff1cf631edc9c68c85c2.png)

或者，您可以通过在项目摘要中选择目标来查看支持的界面方向

![Xcode 项目总结](../Images/0a06247718b821a6e75bc7eb31f3f937.png)

# jquery - jquery datepicker 只有月份和年份

> ID：12553456
> 
> 赞同：0
> 
> 时间：2012-09-23T15:09:02.213
> 
> 标签：jquery, asp.net-mvc-3, datepicker

我有两个问题：

1.  按钮“今天”不起作用，因为日历未使用所选值初始化，并初始化当前月份。

2.  我需要为按钮“完成”覆盖 onclick - 怎么做？

脚本：

```
$('.datefield_month').datepicker({
            changeMonth: true,
            changeYear: true,
            showButtonPanel: true,
            dateFormat: 'MM, yy',
            onClose: function (dateText, inst) {
                var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
                var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
                $(this).val($.datepicker.formatDate('MM, yy', new Date(year, month, 1)));
            }
        }); 
```

看法：

```
<input name = "Month" class = "datefield_month" value="@Model.Month.ToString("Y", Session["culture"] as CultureInfo)" type="text" id ="Month" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T23:16:21.277

这个博客[http://jquerybyexample.blogspot.co.uk/2012/06/show-only-month-and-year-in-jquery-ui.html?m=1](http://jquerybyexample.blogspot.co.uk/2012/06/show-only-month-and-year-in-jquery-ui.html?m=1) 讨论了如何实现类似的。我们在一些项目中使用了技术

# asp.net - 通过创建脚本将数据库恢复到服务器

> ID：12553463
> 
> 赞同：0
> 
> 时间：2012-09-23T15:10:34.087
> 
> 标签：asp.net, sql, plesk

我已经在 plesk 控制面板中创建了我的数据库，然后从本地生成脚本以在查询中运行它以恢复数据库，所有工作完成，成功连接到数据库，现在它在我运行查询时找不到我的表和存储过程。上传我的数据库的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:26:00.470

对于 MySQL 数据库，Plesk 内置了对 phpMyAdmin 的支持。只需打开它并在顶部菜单中选择导入数据库。您可能需要在本地安装 phpMyAdmin 才能将本地数据库导出到文件中。或者，我认为您可以使用`mysqlbackup`工具或阅读 phpMyAdmin 文档以获取有关导入文件格式的更多详细信息。

# android - 在 android 上的 EditText 字段上访问电话号码建议

> ID：12553465
> 
> 赞同：0
> 
> 时间：2012-09-23T15:11:13.330
> 
> 标签：android, phone-number

[我使用此处](http://mobiforge.com/developing/story/sms-messaging-android)的说明编写了一个短信发送应用程序。现在我想在根据保存在电话簿中的号码键入号码或姓名时添加电话号码建议，例如当我们输入号码呼叫它时建议一个号码（在键入时动态）。

有没有可能做或不做？如果可能的话，我该怎么做？我使用了 API 级别 2.2。

**编辑：我已经在 Question** [Here](https://stackoverflow.com/questions/4758107/android-autocomplete-textview-and-cursoradapter)的帮助下做到了这一点，但是当我点击电话簿中的姓名时，它会将姓名放在文本框中，但我需要发送短信的号码。

**问题**：我怎样才能得到号码，以便我可以向所选名称发送消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T17:09:03.847

是的，有可能。您可以使用[ContactsContract](http://developer.android.com/reference/android/provider/ContactsContract.html)更改获取手机中的现有号码，将您的电话号码 EditText 更改为[AutoCompleteTextView](http://developer.android.com/guide/topics/ui/controls/text.html#AutoComplete)，并使用[SimpleCursorAdapter](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html)将联系人中的号码绑定到 AutoCompleteTextView。

* * *

**另外**
如果您想将联系人姓名转换为电话号码，您可以在“提交”按钮的`onClick()`方法中尝试：

```
Cursor cursor = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
        new String[] { ContactsContract.CommonDataKinds.Phone.NUMBER }, 
        ContactsContract.Contacts.DISPLAY_NAME + " = '" + autoComplete.getText() + "'", 
        null, null);
if(cursor.moveToFirst()) 
    phoneNo = cursor.getString(0); 
```

了解这只会从第一个联系人中获取与您的 AutoCompleteTextView 中的名称匹配的第一个号码。您必须辨别一种方法来区分具有相同姓名的联系人和具有多个号码的联系人。

# javascript - 通过 jStorage 库遍历存储在 localStorage 中的一组键

> ID：12553469
> 
> 赞同：2
> 
> 时间：2012-09-23T15:12:06.283
> 
> 标签：javascript, local-storage, jstorage

`jStorage`如何使用API迭代存储在 localStorage 中的密钥集合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:34:56.873

```
$.jStorage.index() 
```

以数组形式返回当前使用的所有键。

```
var index = $.jStorage.index();
console.log(index); // ["key1","key2","key3"] 
```

# java - 主方法中的 ArrayIndexOutOfBounds 异常

> ID：12553470
> 
> 赞同：1
> 
> 时间：2012-09-23T15:12:14.917
> 
> 标签：java

我收到数组绑定错误，但在我看来，数组从 0 开始，那么这段代码有什么问题？

```
public class Quadratic {

    public static void main(String[] args) {
        double b = Double.parseDouble(args[0]);
        double c = Double.parseDouble(args[1]);

        double discriminant = b*b - 4.0*c;
        double sqroot = Math.sqrt(discriminant);

        double root1 = (-b + sqroot)/ 2.0;
        double root2 = (-b - sqroot)/ 2.0;

        System.out.println(root1);
        System.out.println(root2);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T15:15:14.113

保护自己：保持防御。

```
 public class Quadratic {

    public static void main(String[] args) {

        if (args.length> 1) {
            double b = ((args.length > 0) ? Double.parseDouble(args[0]) : 0.0);
            double c = ((args.length > 1) ? Double.parseDouble(args[1]) : 0.0);

            double discriminant = b*b - 4.0*c;
            double sqroot = Math.sqrt(discriminant);

            double root1 = (-b + sqroot)/ 2.0;
            double root2 = (-b - sqroot)/ 2.0;

            System.out.println(root1);
            System.out.println(root2);
        } else {
            System.out.println("two arguments are required: b and c, please");
        }
    }
} 
```

如果判别式是否定的会发生什么？如果是零怎么办？

你为什么将自己限制在 a = 1 的情况下？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T15:14:36.543

您在 args[0] 和/或 args[1] 中没有项目。您需要检查数组中是否有足够的参数。

```
double b = args.length>=1?Double.parseDouble(args[0]):0.0;
double c = args.length>=2?Double.parseDouble(args[1]):0.0; 
```

如果数组中没有参数，则意味着您没有将参数传递到程序中，或者您没有传递足够的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T15:17:05.253

尝试并调试它。使用 打印 args 的大小`System.out.println(args.length);`。如果大小小于 2，则您没有将参数传递给您的主类。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-23T15:22:15.900

当您尝试在数组中的错误位置提取变量时，会发生[ArrayIndexOutOfBounds异常。](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ArrayIndexOutOfBoundsException.html)

当您在编译 ex 后在 java 中运行程序，`javac hello`然后按 执行类文件时，在这种情况下`java hello`，第 0 位`args[0]`将是文件名 ie `hello`。

为了成功提取在运行时发出的参数，您必须在数组中使用 n+1 位置。例如。如果我正在运行我的程序，如果`java hello argument`我`args[1]`希望`argument`在运行时使用发布的变量等等来提取关联的文本。

如果你不确定你的语句是否会产生异常，使用`try & catch`block 总是安全的。Read -[异常处理](http://docs.oracle.com/javase/tutorial/essential/exceptions/)

# javascript - 复选框 - 在 Javascript 中

> ID：12553472
> 
> 赞同：0
> 
> 时间：2012-09-23T15:12:35.963
> 
> 标签：javascript, html, dom

我正在编辑屏幕上，我正在从数据库中提取值以检查复选框是否被选中。

如果*未选中*，则应取消选中该复选框和该复选框的其他控件。在我的情况下，js 工作得很好。也就是说，如果我之前的屏幕未选中复选框，则编辑屏幕会禁用此复选框的所有值。但它仍然显示该复选框已在 UI 中被选中（尽管它实际上已被选中）。我的 html 代码有问题。

如果我的复选框未选中，有人可以告诉我应该在哪里/如何修改以显示吗？

```
<%chkStatus=list.getCheckbox();
         if (chkStatus == null) { chkStatus = ""; }
 %>

   <input id="chkbox" type="checkbox" name="chkbox" checked="<%=chkStatus%>"  
                                onchange="javascript:enableDisableTextBox();"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T15:21:58.720

除了输入标签外，您的 html 看起来不错，

```
<%chkStatus=list.getCheckbox();
         if (chkStatus == null) { chkStatus = ""; }
 %>

   <input id="chkbox" type="checkbox" name="chkbox" checked="<%=chkStatus%>"  
                                onchange="javascript:enableDisableTextBox();"> 
```

这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T15:24:51.103

checked 是一个布尔属性，所以你应该有：

```
<input id="chkbox" type="checkbox" checked /> 
```

对于检查状态和

```
<input id="chkbox" type="checkbox" /> 
```

对于未选中的状态。（`selected`in`<select><option/> </select>`是另一个布尔属性的示例）。

# c# - C# TextBox NewLine 在 KeyDownEvent 上模拟 Ctrl+Enter

> ID：12553473
> 
> 赞同：2
> 
> 时间：2012-09-23T15:12:51.933
> 
> 标签：c#, winforms, .net-3.5, textbox, newline

我有一个`TextBox`（多行），如果我按下`Ctrl+Enter`它只会换行。但我也想在`Shift+Enter`. 我试过了：

```
messageTextBox_KeyDown(null, new KeyEventArgs(Keys.Control | Keys.Enter)); 
```

但这不起作用。

我认为我可以这样做：

```
int lastSelectionStart = messageTextBox.SelectionStart;
messageTextBox.Text = messageTextBox.Text.Insert(messageTextBox.SelectionStart, Environment.NewLine);
messageTextBox.SelectionStart = lastSelectionStart; 
```

但我不喜欢这个。

如何使 Shift+Enter 与 Ctrl+Enter 相同？

我当前的代码：

按键事件

```
if (e.KeyCode == Keys.Enter)
{
    e.Handled = true;
    if (e.Shift)
    {

    }
    else if (!e.Control)
    {
        sendButton_Click(null, null);
    }
} 
```

在 KeyPress 事件中：

```
if (e.KeyChar == (char)13)
{
    e.Handled = true;
    return;
} 
```

这是因为我想单独使用 Enter 键作为发送按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T16:45:20.623

在我看来，您要解决的真正问题是表单的 AcceptButton 属性。您无法使用 KeyDown 事件处理程序来解决此问题，击键在到达事件*之前已被处理。*

这可以通过覆盖表单的 ProcessCmdKey() 方法来解决，但最简洁的方法是创建您自己的 TextBox 派生控件。你可以重写它的 IsInputKey() 方法来告诉 Winforms 你想看到 Ctrl+Enter 键。向您的项目添加一个新类并粘贴如下所示的代码。编译。从工具箱顶部删除新控件。请注意如何根据您的方便更改类，使其更擅长成为聊天输入框。

使用系统；使用 System.Windows.Forms；

```
class ChatBox : TextBox {
    public ChatBox() {
        this.Multiline = true;
    }
    protected override bool IsInputKey(Keys keyData) {
        if (keyData == (Keys.Shift | Keys.Enter)) return true;
        return base.IsInputKey(keyData);
    }
    protected override void OnKeyDown(KeyEventArgs e) {
        if (e.KeyData == (Keys.Shift | Keys.Enter)) {
            int pos = this.SelectionStart;
            this.SelectedText = Environment.NewLine;
            this.SelectionStart = pos;
            e.Handled = e.SuppressKeyPress = true;
            return;
        }
        base.OnKeyDown(e);
    }
} 
```

# android - Android获取wifi活动

> ID：12553475
> 
> 赞同：0
> 
> 时间：2012-09-23T15:12:59.783
> 
> 标签：android, wifi

我正在尝试从我的应用程序中找出当前是否正在使用 wifi；不仅是连接，而且目前正在下载或上传某些内容。Android (4.0+) 似乎意识到了这一点，因为传输数据时 wifi 图标会发生变化。我有什么方法可以访问这些信息？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T17:57:12.000

经过更多研究后，我发现了 TrafficStats 类。不知道这有多可靠，但这是我的代码：

```
boolean isWifiInUse;
long lastTx,lastRx;
Runnable TestWifi = new Runnable() {

    public void run() {
        long cRx = TrafficStats.getTotalRxBytes() - TrafficStats.getMobileRxBytes();
        long cTx = TrafficStats.getTotalTxBytes() - TrafficStats.getMobileTxBytes();
        if (cTx - lastTx != 0 || cRx - lastRx != 0)
        {
            if (!isWifiInUse)
                isWifiInUse = true;

        }
        else if (isWifiInUse)
        {
            isWifiInUse = false;
            //ShowToast("Data no longer in use");
        }
        lastRx = cRx;
        lastTx = cTx;
        hand.postDelayed(this, 1000);
    }
}; 
```

希望这可以帮助某人。

# ios - 在表格视图部分交换单元格

> ID：12553476
> 
> 赞同：0
> 
> 时间：2012-09-23T15:13:00.997
> 
> 标签：ios, uitableview

我有一个带有两个自定义单元格的表格视图部分。当触发其他一些操作时，我想交换该部分中的单元格。

![在此处输入图像描述](../Images/35e9aa194cd02070256f4ffb579e32e1.png)

顶部单元格应滑动到底部，底部单元格应滑动到顶部。

我当前的代码导致空白单元格区域

![在此处输入图像描述](../Images/c014261f55c394eb602ed603e360b0b9.png)

返回时`cellForRowAtIndexPath`：

```
 // flag is set to YES when reloadSections is called 
    if (flag) {             

        if (self.currentAddressingMode == AddressingModeToSelf) {

                if (indexPath.row == 0) {
                    return self.outNumberCell;
                }
                else if (indexPath.row == 1) {
                    return self.inNumberCell;
                }

            }
            else if (self.currentAddressingMode == AddressingModeToCounterpart) {

                if (indexPath.row == 0) {
                    return self.inNumberCell;
                }
                else if (indexPath.row == 1) {
                    return self.outNumberCell;
                }
            }
        } 
```

有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T08:44:16.847

我通过在`cellForRowAtIndexPath:`方法中创建自定义单元格（通过向它们添加子视图）而不是子类化来解决了这个问题。对于动画单元格交换，我使用了`UITableView`'s`moveRowAtIndexPath:toIndexPath:`方法（iOS 5 SDK）。其他相关方法也可以正常工作（这取决于您需要的交换动画）。我发布到这个问题的代码块保持完全不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T15:15:02.637

您可以返回所需的单元格，`(UICell*) cellForRowAtIndexPath`然后`reloadSections`根据需要设置动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T15:21:16.130

为此，您需要自己更改数据源中数据的顺序。然后你可以这样做 reloadData 像这样：

[_tableView reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationFade];

# vba - VBA - 在 X 轴上显示时间

> ID：12553484
> 
> 赞同：0
> 
> 时间：2012-09-23T15:14:17.473
> 
> 标签：vba, excel, charts

我需要创建一个图表 xlXYScatter。我知道 Excel 在秒列中将此数字视为天。如何以时间格式 mm:ss: 00:00 00:10 00:20 等将此秒放在 X 轴上。我试过这个：.Axes(xlCategory, xlPrimary).TickLabels.NumberFormat = "[m]:mm:ss"。但是 Excel 将这些以秒为单位的数字视为天数，X 轴上显示的值有缺陷。

这是我的示例数据：

```
秒 DEV1 DEV2 DEV3
  0 0 0 0
 10 6162 769 753
 20 6160 771 753
 30 6162 766 748
 40 6139 765 740
 50 6141 762 740
 60 6126 761 742
 70 6119 764 745
 80 6114 766 740
 90 6103 763 745
100 6098 768 745
110 6095 767 748
120 6095 768 737
130 6093 763 732
140 6093 764 729
150 6082 765 726
160 6078 764 729
170 6072 762 729
180 6074 760 726
190 6067 766 721
200 6067 762 724
210 6072 760 724
220 6070 756 729
230 6069 757 732
240 6063 757 734
250 6067 749 750
260 6063 751 753
270 6056 756 753
280 6057 758 753
290 6059 760 750
300 6064 761 753
310 6087 765 734
```

这是我的 VBA 代码：

```
Sub NewChart()

Sheets(1).Select 'Select the active Sheet

ActiveSheet.Shapes.AddChart.Select
ActiveChart.ChartType = xlXYScatter

LastLine = Sheets(2).Range("A" & Rows.Count).End(xlUp).Row

Dim MaxScale As Integer
Dim MTotal As Integer
Dim Aprox As Integer
Dim vName As String
vName = Sheets(2).Range("B3")

Dim Qx As Integer
Qx = LastLine - 1
Dim Rangg As Integer
Rangg = (LastLine * 10) - 60
MTotal = Rangg
MaxScale = Rangg + 20

    With ActiveChart
    .ChartType = xlXYScatter
    'Set data source range.
    .SetSourceData Source:=Sheets(2).Range("A5:A" & Qx & ",B5:B" & Qx & ",E5:E" & Qx & ",H5:H" & Qx & ", K5:K" & Qx & ", N5:N" & Qx & ", Q5:Q" & Qx) ', 'PlotBy:=xlRows
    .HasTitle = True
    .ChartTitle.Text = vName '"2-7µm"

    'The Parent property is used to set properties of the Chart.
    With .Parent
      .Top = 2
      .Left = 2
      .Width = 540
      .Height = 252
      .Name = "2micron"
    End With

ActiveChart.Legend.Select
        With Selection.Format.TextFrame2.TextRange.Font
            .NameComplexScript = "Tahoma"
            .NameFarEast = "Tahoma"
            .Name = "Tahoma"
        End With

    .Axes(xlCategory).MajorTickMark = xlInside
    .Axes(xlCategory).MinorTickMark = xlInside
    .Axes(xlCategory, xlPrimary).Select
    .Axes(xlCategory, xlPrimary).TickLabels.Font.Size = 5
    .Axes(xlCategory, xlPrimary).TickLabels.Font.Name = "Tahoma"
    .Axes(xlCategory, xlPrimary).TickLabels.Font.Bold = msoTrue
    .Axes(xlCategory, xlPrimary).TickLabels.NumberFormat = "[m]:mm:ss"
    .Axes(xlCategory, xlPrimary).HasTitle = True
    .Axes(xlCategory, xlPrimary).AxisTitle.Characters.Text = "Time (seconds)"
    .Axes(xlCategory, xlPrimary).AxisTitle.Font.Size = 11
    .Axes(xlCategory, xlPrimary).AxisTitle.Font.Bold = msoTrue
    .Axes(xlCategory, xlPrimary).AxisTitle.Font.Name = "Tahoma"
    .Axes(xlCategory, xlPrimary).MinorUnitIsAuto = False
    .Axes(xlCategory, xlPrimary).MajorUnit = 300
    .Axes(xlCategory, xlPrimary).MinorUnit = 60
    .Axes(xlCategory, xlPrimary).MaximumScale = MaxScale
    .Axes(xlCategory, xlPrimary).MinimumScale = 0
    .Axes(xlCategory, xlPrimary).HasMajorGridlines = False
    .Axes(xlCategory, xlPrimary).HasMinorGridlines = False
    .Axes(xlCategory).Format.Line.ForeColor.RGB = RGB(0, 0, 0)

    .Axes(xlValue).MajorTickMark = xlInside
    .Axes(xlValue).MinorTickMark = xlInside
    .Axes(xlValue, xlPrimary).Select
    .Axes(xlValue, xlPrimary).HasMajorGridlines = True
    .Axes(xlValue, xlPrimary).HasMinorGridlines = True
    .Axes(xlValue, xlPrimary).TickLabels.Font.Size = 11
    .Axes(xlValue, xlPrimary).TickLabels.Font.Name = "Tahoma"
    .Axes(xlValue, xlPrimary).TickLabels.Font.Bold = msoTrue
    .Axes(xlValue, xlPrimary).HasTitle = True
    .Axes(xlValue, xlPrimary).AxisTitle.Characters.Text = "Y axis Legend"
    .Axes(xlValue, xlPrimary).AxisTitle.Font.Size = 11
    .Axes(xlValue, xlPrimary).AxisTitle.Font.Name = "Tahoma"
    .Axes(xlValue, xlPrimary).AxisTitle.Font.Bold = msoTrue
    .Axes(xlValue).Format.Line.ForeColor.RGB = RGB(0, 0, 0)

    .Legend.IncludeInLayout = False
    .Legend.Select
    Selection.Position = xlTop
    Selection.Font.Size = 11
    Selection.Font.Name = "Tahoma"
    Selection.Font.Bold = msoTrue

    ActiveSheet.Shapes("2micron").ScaleWidth 1, msoFalse, _
        msoScaleFromTopLeft

    ActiveChart.SetElement (msoElementChartTitleAboveChart)
    ActiveChart.ChartTitle.Select
    Selection.Left = 2
    Selection.Top = 2
    Selection.Format.TextFrame2.TextRange.Font.Size = 13.2
    Selection.Format.TextFrame2.TextRange.Font.Name = "Tahoma"
    Selection.Format.TextFrame2.TextRange.Font.Bold = msoTrue
    ActiveChart.Legend.Select
    Selection.Left = 180
    Selection.Top = 2
        With Selection.Format.Line
            .Visible = msoTrue
            .ForeColor.ObjectThemeColor = msoThemeColorAccent1
            .ForeColor.TintAndShade = 0
            .ForeColor.Brightness = 0
        End With
    ActiveChart.PlotArea.Select
    Selection.Top = 22
    Selection.Left = 20
    Selection.Height = 207
    Selection.Width = 540
    Selection.Border.LineStyle = xlSolid
    Selection.Border.Color = vbBlack
    Selection.Interior.Color = vbWhite
    End With

Call f_l2m1(1, 8, RGB(0, 176, 240))
Call f_l2m1(2, 3, RGB(255, 0, 0))
Call f_l2m1(3, 1, RGB(255, 0, 255))
Call f_l2m1(4, 2, RGB(153, 0, 255))
Call f_l2m1(5, 4, RGB(153, 0, 255))
Call f_l2m1(6, 9, RGB(146, 208, 80))

Range("a22").Select
End Sub

Sub f_l2m1(LineNo, MStyle, vRGB)

With ActiveSheet.ChartObjects("2micron").Chart

                ActiveChart.SeriesCollection(LineNo).Select
                With Selection
                    .MarkerStyle = MStyle
                    .MarkerSize = 7
                    .MarkerForegroundColor = vRGB
                End With
                Selection.Format.Fill.Visible = msoFalse
                Selection.Format.Line.Visible = msoFalse
                Selection.Format.Line.ForeColor.RGB = vRGB
End With
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:04:04.187

Excel 和 VBA 将日期和时间值处理为具有整数部分和小数部分的数字 - 例如 41176.0828。整个部分 - 41176 - 代表日期（2012 年 9 月 24 日），小数部分 - .0828 - 代表时间（01:59:12）

Seconds 列中的值在 Excel 中看起来像日期值，因为它们具有整数部分。通过除以 86400 (24 * 60 * 60) 将它们转换为秒，您的图形轴标签应该正确显示。如果需要，划分的值可以在隐藏列中，以免弄乱值表的显示

* * *

编辑：以下更改使图表在 Excel 2003 中为我工作。我无法测试很多格式化命令，因为它们是在 Excel 2007 中引入的，但实际数据绘制正常：

*取消注释`PlotBy`参数并将其设置为`xlColumns`：*

老的：

```
.SetSourceData Source:=Sheets(2).Range("A5:A" & Qx & ",B5:B" & Qx & ",E5:E" & Qx & ",H5:H" & Qx & ", K5:K" & Qx & ", N5:N" & Qx & ", Q5:Q" & Qx) ', 'PlotBy:=xlRows 
```

新的：

```
.SetSourceData Source:=Sheets(2).Range("A5:A" & Qx & ",B5:B" & Qx & ",E5:E" & Qx & ",H5:H" & Qx & ", K5:K" & Qx & ", N5:N" & Qx & ", Q5:Q" & Qx), PlotBy:=xlColumns 
```

*通过将当前值除以 86400 创建以秒为单位的列，确保这是图表数据源中的第一列，注释掉该`NumberFormat`行，将`NumberFormatLinked`属性设置为`True`*

老的：

```
.Axes(xlCategory, xlPrimary).TickLabels.NumberFormat = "[m]:mm:ss" 
```

新的：

```
'.Axes(xlCategory, xlPrimary).TickLabels.NumberFormat = "[m]:mm:ss"
.Axes(xlCategory, xlPrimary).TickLabels.NumberFormatLinked = True 
```

*注释掉设置`MinorUnitIsAuto`,`MinorUnit`和`MajorUnit`值的行*

老的：

```
.Axes(xlCategory, xlPrimary).MinorUnitIsAuto = False
.Axes(xlCategory, xlPrimary).MajorUnit = 300
.Axes(xlCategory, xlPrimary).MinorUnit = 60 
```

新的：

```
'.Axes(xlCategory, xlPrimary).MinorUnitIsAuto = False
'.Axes(xlCategory, xlPrimary).MajorUnit = 300
'.Axes(xlCategory, xlPrimary).MinorUnit = 60 
```

*将该`MaximumScale`值除以 86400，使其以秒为单位表示值：*

老的：

```
.Axes(xlCategory, xlPrimary).MaximumScale = MaxScale 
```

新的：

```
.Axes(xlCategory, xlPrimary).MaximumScale = (MaxScale / 86400) 
```

# configuration - 有没有办法在 Windows Store 应用程序的 ApplicationSettings 中存储自己的类的实例？

> ID：12553485
> 
> 赞同：3
> 
> 时间：2012-09-23T15:14:22.710
> 
> 标签：configuration, windows-8, windows-runtime, windows-store-apps

根据文档，在 Windows 应用商店应用程序中，我只能将 WinRT 类型存储在 ApplicationSettings 中。对于应该保持在一起的漫游设置，我可以使用 ApplicationDataCompositeValue。尝试存储自己的类或结构的实例会导致异常，并显示消息“WinRT 信息：尝试序列化要写入应用程序数据存储的值时出错。附加信息：不支持这种类型的数据”。术语“试图序列化”表示必须有某种方式来序列化应用程序数据 API 的类型。

有谁知道我怎么能做到这一点？

我尝试了 DataContract 序列化，但它不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T20:17:10.957

我认为不支持自定义/自己的类型。

请参阅[http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx)：“应用程序设置支持 Windows 运行时数据类型。”

但是您可以将对象序列化为 XML 并保存为字符串...（请参见下面的代码）

```
public static string Serialize(object obj)
{
    using (var sw = new StringWriter()) 
    {
        var serializer = new XmlSerializer(obj.GetType());
        serializer.Serialize(sw, obj);
        return sw.ToString();
    }
}

public static T Deserialize<T>(string xml)
{
    using (var sw = new StringReader(xml))
    {
        var serializer = new XmlSerializer(typeof(T));
        return (T)serializer.Deserialize(sw);
    }
} 
```

[https://github.com/MyToolkit/MyToolkit/blob/master/src/MyToolkit/Serialization/XmlSerialization.cs](https://github.com/MyToolkit/MyToolkit/blob/master/src/MyToolkit/Serialization/XmlSerialization.cs)

也看看这个类：

[https://github.com/MyToolkit/MyToolkit/wiki/XmlSerialization](https://github.com/MyToolkit/MyToolkit/wiki/XmlSerialization)

**免责声明：以上链接来自我的项目**

# opencv - 在哪里可以找到以 icv 开头的内部 OpenCV 函数的手册？

> ID：12553490
> 
> 赞同：0
> 
> 时间：2012-09-23T15:14:46.423
> 
> 标签：opencv

我想在 OpenCV 库中添加一些函数供我自己使用。这里涉及到一些以icv开头的内部函数，例如icvGetQuadrangleSubPix_8u32f_C1R。我猜想我应该看看它对 GetQuadrangleSubPix() 的描述。但是还有一些额外的参数在用户可访问的功能中没有提到。

我的问题是在哪里可以找到此功能的手册或说明？或者我应该做的是追溯该函数中的参数。

欣赏每一个答案。非常感谢。

# java - HttpServletResponse#addHeader 有什么问题？

> ID：12553491
> 
> 赞同：0
> 
> 时间：2012-09-23T15:14:53.973
> 
> 标签：java, servlets, spring-security, servlet-filters

我正在我的网络应用程序过滤器中运行，该过滤器从有关用户的外部源信息中接收，无论他是否登录。这是我的过滤器：

```
@Override
public void doFilter( ServletRequest request, ServletResponse response,
                      FilterChain chain ) throws IOException, ServletException
{
    HttpServletRequest httpRequest = (HttpServletRequest) request;
    HttpServletResponse httpResponse = (HttpServletResponse) response;

    String loginBean = httpRequest.getHeader( CommonVariables.LOGIN_BEAN );
    if ( loginBean == null )
    {
        System.out.println( "FILTER-----------" );
        try
        {
            String login;
            String domain;
            //Here i'm getting login and domain string
            loginBean = domain + "\\" + login;
            httpResponse.addHeader( "LoginBean", loginBean );
            System.out.println( login + " " + domain );
        } catch ( Exception e )
        {
            e.printStackTrace();
            //redirect to login page
            httpResponse.sendRedirect( "..." );
            return;
        }
    }
    chain.doFilter( request, response );
} 
```

不是我认为这些标题将被传递到下一个过滤器中。因此我实现了 Spring Security PRE_AUTH_FILTER：

**Spring 安全上下文**

```
<http use-expressions="true" auto-config="false" entry-point-ref="http403EntryPoint">
    <!-- Additional http configuration omitted -->
    <custom-filter position="PRE_AUTH_FILTER" ref="siteminderFilter" />
</http>

<beans:bean id="siteminderFilter" class=
        "org.springframework.security.web.authentication.preauth.RequestHeaderAuthenticationFilter">
    <beans:property name="principalRequestHeader" value="LoginBean"/>
    <beans:property name="authenticationManager" ref="authenticationManager" />
</beans:bean>

<beans:bean id="preauthAuthProvider"
      class="org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationProvider">
    <beans:property name="preAuthenticatedUserDetailsService">
        <beans:bean id="userDetailsServiceWrapper"
              class="org.springframework.security.core.userdetails.UserDetailsByNameServiceWrapper">
            <beans:property name="userDetailsService" ref="userDetailsService"/>
        </beans:bean>
    </beans:property>
</beans:bean>

<beans:bean id="http403EntryPoint" class="org.springframework.security.web.authentication.Http403ForbiddenEntryPoint"/>
<beans:bean id="userDetailsService" class="com.execon.security.CustomUserDetailsService"/>

<authentication-manager alias="authenticationManager">
    <authentication-provider ref="preauthAuthProvider" />
</authentication-manager> 
```

然后我尝试在我的 CustoUserDetailsS​​ervice 中解析 loginBean 字符串并接收实际的用户对象。但它没有被解雇，应用程序因此失败：

```
org.springframework.security.web.authentication.preauth.PreAuthenticatedCredentialsNotFoundException: LoginBean header not found in request. 
```

所以这意味着标题设置错误？还是根本没有设置？可能有什么问题？

过滤器设置 LoginBean 是第一个被触发的，然后是 Spring SEcurity。标准输出可以正常工作，因为我有：

```
17:12:15,669 INFO  [stdout] (http--127.0.0.1-8080-2) FILTER-----------
17:12:15,669 INFO  [stdout] (http--127.0.0.1-8080-2) LOGIN DOMAIN 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T15:24:28.300

您`response`正在`request`.

您可以修改传入的唯一方法`HttpServletRequest`是装饰它。您应该首先定义一个类，如下所示：

```
public class AuthHttpServletRequest extends HttpServletRequestWrapper
{
    private String loginBean;

    public AuthHttpServletRequest(HttpServletRequest aRequest, String loginBean)
    {
        super(aRequest);
        this.loginBean = loginBean;
    }

    @Override
    public String getHeader(String headerName)
    {
        if(CommonVariables.LOGIN_BEAN.equals(headerName)) {
            return this.loginBean;
        }
        return super.getHeader(headerName);
    }
} 
```

然后，替换过滤器中的以下行：

```
httpResponse.addHeader( "LoginBean", loginBean ); 
```

有了这个：

```
request = new AuthHttpServletequest(httpRequest, loginBean); 
```

然后，您`chain.doFilter`将获得可以按照您的预期将 loginBean 返回到 Spring 的身份验证过滤器类的请求，该请求位于过滤器链中。

# kinect - 是否可以模拟 Kinect（用于调试代码）？

> ID：12553493
> 
> 赞同：1
> 
> 时间：2012-09-23T15:14:57.630
> 
> 标签：kinect

我正在使用官方 SDK 1.5 版开发 Kinect 程序。我想知道是否可以与模拟的 kinect 设备交谈？这将允许更快的编码和调试，因为我不必插入设备但可以重放一些数据。

那可能吗？如果是这样，我该如何开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T23:00:43.133

我只用了几天的官方 Kinect SDK，但建议看看 Kinect Studio。[在 msdn 上有一篇关于使用 Kinect Studio](http://msdn.microsoft.com/en-us/magazine/jj650892.aspx)入门的好文章。

# java - 如何在 Java6 中禁用约束检查（Netscape 证书类型）？

> ID：12553494
> 
> 赞同：5
> 
> 时间：2012-09-23T15:14:58.310
> 
> 标签：java, ssl, certificate, x509, jsse

我正在尝试使用内置类 com.sun.net.httpserver.HttpsServer 在 Java (6) 中构建自定义 HTTPS 服务器。在我需要客户端身份验证之前它工作正常。此时，它在服务器上的 SSL 调试中失败并出现以下异常。

**sun.security.validator.ValidatorException：Netscape 证书类型不允许用于 SSL 客户端**

我正在使用我们内部 CA 颁发的证书，该证书用于我们内部的所有应用程序。我检查了证书详细信息，发现类型是“SSL 服务器”（下面引用了详细信息）。由于我们的政策是对所有内部应用程序使用“SSL 服务器”类型，因此很难更改证书。由于我想为客户端使用服务器证书，我不认为这是一个安全问题。

我正在寻找的是一种在 Java 中禁用此约束检查的方法。有没有人遇到过这个并解决了这个？非常感谢任何帮助。

最好的问候，阿伦

```
Owner: CN=myapp, OU=mygroup, O=mycompany

Issuer: O=MYCA

Serial number: 4cc8c1da

Valid from: Mon Jan 10 13:46:34 EST 2011 until: Thu Jan 10 14:16:34 EST 2013

Certificate fingerprints:
         MD5:  8C:84:7F:7A:40:23:F1:B5:81:CD:F9:0C:27:16:69:5E
         SHA1: 9B:39:0B:2F:61:83:52:93:D5:58:E5:43:13:7A:8F:E1:FD:AC:98:A4
         Signature algorithm name: SHA1withRSA
         Version: 3

Extensions:

[1]: ObjectId: 2.5.29.16 Criticality=false
PrivateKeyUsage: [
From: Mon Jan 10 13:46:34 EST 2011, To: Wed Jul 11 21:16:34 EDT 2012]

[2]: ObjectId: 2.5.29.15 Criticality=false
KeyUsage [
  DigitalSignature
  Key_Encipherment
]

[3]: ObjectId: 2.5.29.14 Criticality=false
SubjectKeyIdentifier [
KeyIdentifier [
0000: D3 47 35 9B B4 B7 03 18   C6 53 2C B0 FE FD 49 D8  .G5......S,...I.
0010: D0 FB EE 15                                        ....
]
]

[4]: ObjectId: 1.2.840.113533.7.65.0 Criticality=false

[5]: ObjectId: 2.5.29.31 Criticality=false
CRLDistributionPoints [
  [DistributionPoint:
     [CN=CRL413, O=SWIFT]
]]

[6]: ObjectId: 2.5.29.19 Criticality=false
BasicConstraints:[
  CA:false
  PathLen: undefined
]

****[7]: ObjectId: 2.16.840.1.113730.1.1 Criticality=false
NetscapeCertType [
   SSL server
]****

[8]: ObjectId: 2.5.29.35 Criticality=false
AuthorityKeyIdentifier [
KeyIdentifier [
0000: 8F AF 56 BC 80 77 A3 FD   9E D2 89 83 98 FE 98 C7  ..V..w..........
0010: 20 65 23 CC                                         e#.
]

] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T18:54:23.367

您可以包装默认信任管理器并捕获此特定异常。这将是这样的：

```
class IgnoreClientUsageTrustManager extends X509TrustManager {
    private final X509TrustManager origTrustManager;
    public class IgnoreClientUsageTrustManager(X509TrustManager origTrustManager) {
        this.origTrustManager = origTrustManager;
    }

    public checkClientTrusted(X509Certificate[] chain, String authType
        throws IllegalArgumentException, CertificateException {
        try {
            this.origTrustManager.checkClientTrusted(chain, authType);
        } catch (ValidatorException e) {
             // Check it's that very exception, otherwise, re-throw.
        }
    }

    // delegate the other methods to the origTrustManager
} 
```

然后，使用该信任管理器创建一个`SSLContext`并将其与您的服务器一起使用。

```
TrustManagerFactory tmf = TrustManagerFactory.getInstance(
    TrustManagerFactory.getDefaultAlgorithm());
tmf.init((KeyStore)null);
TrustManager[] trustManagers = tmf.getTrustManagers();

for (int i = 0; i < trustManagers.length; i++) {
    if (trustManagers[i] instanceof X509TrustManager) {
       trustManagers[i] = IgnoreClientUsageTrustManager(trustManagers[i]);
    }
}

SSLContext sslContext = SSLContext.getInstance("TLS");
sslContext.init(... you keymanagers ..., trustManagers, null); 
```

您应该从您的服务器密钥库中初始化您的密钥管理器（正常）。然后，您应该能够使用`HttpsServer`'s`HttpsConfigurator`来设置`SSLContext`（参见文档中的示例）。

不过，这种技术并不理想。

*   首先，`ValidatorException`位于`sun.*`不属于公共 API 的包中：此代码将特定于 Oracle/OpenJDK JRE。
*   其次，它依赖于这样一个事实，即检查的最终实体（验证密钥使用扩展）[发生在信任验证的其余部分之后](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/security/validator/Validator.java#Validator.validate%28java.security.cert.X509Certificate%5b%5d%2Cjava.util.Collection%2Cjava.lang.Object%29)（这使得忽略该异常是可以接受的，因为您不会以这种方式忽略其他更基本的检查）。

您当然可以使用 Java 证书路径 API 重新实现您自己的验证，并为此目的仅忽略密钥用法。这需要更多的代码。

更一般地说，如果您想在没有正确扩展名的情况下使用 SSL/TLS 证书作为客户端证书，则无论如何您都在尝试绕过规范。解决此问题的最佳方法是修改您的 CA 策略，如果它是内部 CA，这应该是可行的。服务器证书也设置 TLS 客户端扩展密钥使用是很常见的，即使是大型 CA。

# php - Javascript将文本从db转换为超链接

> ID：12553498
> 
> 赞同：3
> 
> 时间：2012-09-23T15:15:14.453
> 
> 标签：php, javascript, ajax

我开始探索ajax，不知何故我对它很好，不是太难也不容易，只是正常的。无论如何，我在这个项目上遇到了困难。涉及到ajax、php、js、mysql。我实际上是在尝试复制 Facebook 的标记风格。当您在帖子中标记某人时，全名会变成指向标记用户个人资料的超链接。我觉得这只是一个小问题，只是我也是 JS 的新手。我已经完成了其余的工作，但是在将文本转换为带有 js 的超链接时遇到了问题。我希望它在 putin_livesearch() 代码中。

这是我的代码。

**索引.html**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>FB TAG</title>

<style>

.namesearch {
    cursor:pointer;

}

</style>

<script type="text/javascript">

function putin_livesearch(fname, lname) 
{

//document.getElementById('searchbar').value = (fname + " " +lname);

//document.location.href='#'+ window.document.getElementById('searchbar').value = (fname);

window.document.location.href="#"+window.document.getElementById('searchbar').value;

}

function showResult(str)
{
if (str.length==0)
  {
  document.getElementById("livesearch").innerHTML="";
  document.getElementById("livesearch").style.border="0px";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("livesearch").innerHTML=xmlhttp.responseText;
    document.getElementById("livesearch").style.border="1px solid #A5ACB2";

    }
  }
xmlhttp.open("GET","getuser.php?q="+str,true);
xmlhttp.send();
}
</script>
</head>

<body>
<form>
  <input id ="searchbar" name="wallpost" type="text" onkeyup="showResult(this.value)"  />
  <div id="livesearch"></div>
</form>
</body>
</html> 
```

**获取用户.php**

```
<?php
$q=$_GET["q"];

$con = mysql_connect('localhost', 'root', '');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("place_main", $con);

$sql=" SELECT * FROM profiles WHERE firstname like '".$q."%' ";

$result = mysql_query($sql);

while($row = mysql_fetch_array($result))
  {
  $fname = $row['firstname'];
  $lname = $row['lastname'];

  echo '<span class ="namesearch" onclick="putin_livesearch(\''.$fname.'\',\''.$lname.'\'  )"> '. $fname ." ". $lname .' </span><br />';

  //echo "<span class ='namesearch' onclick='putin_livesearch(" .$fname. ", " .$lname. " )'> " . $fname . " " . $lname . "</span><br />";
  }

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T15:23:48.063

在你的 php 上，做这样的事情

```
echo "<a href='your-url-for-the-user'><span class ="namesearch" onclick="putin_livesearch(\''.$fname.'\',\''.$lname.'\'  )"> '. $fname ." ". $lname .' </span></a><br />"; 
```

只需在 PHP 中操作它，我很确定它会在您的前端输出相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T17:17:28.203

好吧，我想我想做什么是不可能的。在测试中，我实际上尝试在带有标签的文本区域中添加一个值。它不会将其转换为链接。实际上在 fb 中进行了一些检查，同时在wallpost 中用@ 标记了一个朋友并没有把它放到一个链接中，但是在发布它之后。

# magento - 如何测试 Magento 块

> ID：12553499
> 
> 赞同：1
> 
> 时间：2012-09-23T15:15:26.013
> 
> 标签：magento, singleton, phpunit

我想测试一个 Magento 块功能。我不知道，如何在`.phtml`文件外调用函数。有人知道像`getModel()`块这样的功能吗？

我发现

> getBlockSingleton()

但是，它已被弃用，我无法让它工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T19:48:49.370

假设您的 Magento 根是您的网络根。在您的 Magento 根目录中，创建一个*test.php*文件。您可以通过 http:// **base_url** /test.php 访问它。

```
ini_set('display_errors',true); //PHP has such friendly errors, show them!

include 'app/Mage.php';         //include the helper class/bootstrap file
Mage::setIsDeveloperMode(true); //flag to render Magento's traces

Mage::app();
/**
   Instantiate the app. Note that this is different from Mage::run()! This can
   be skipped given the Mage::app() call below.
*/

//block "type"
$class = 'core/bar';

//block instance
$block = Mage::app()->getLayout()->createBlock($class);

if (is_object($block)) die("Okay! ".get_class($block));

/**
 * If script execution reaches this point, there is one of
 * two problems:
 *
 * 1) bad/missing config
 * 2) bad path based on filename
 */

//the xpath which is used
$xpath = 'global/blocks/'.strstr($class,'/',true).'/class';

//a node from config XML (we hope)
$node = Mage::getConfig()->getNode($xpath);

//error condition 1:
if (!$node) die("Bad xpath, check configuration: ".$xpath);

//error condition 2:
$name = uc_words((string) $node . '_' . substr(strrchr($class, '/'), 1));
$file = str_replace('_', DIRECTORY_SEPARATOR, $name.'.php');
$issue = '<br /><br />';

if (!is_readable($file)) {
    //no file matching classname
    $issue .= "No file found for $file, tried:<pre> - ";
    $issue .= str_replace(PATH_SEPARATOR,'/'.$file.'<br /> - ',get_include_path()).$xpath.'</pre>';
} else {
    $issue .= "Wrong class name in $file";
}

echo sprintf('Xpath ok, looking for class <span style="font-family: Courier New">%s</span>%s',$name,$issue); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-09T09:57:55.370

如果您只需要块实例本身来测试方法，则可以使用以下函数：

```
/**
 * Create block instance for given block classAlias.
 *
 * @param string $classAlias Magento class alias for this block, e.g. 'catalog/product_price'
 *
 * @return Mage_Core_Block_Abstract
 */
public static function getBlockInstance($classAlias)
{
    $className = Mage::getConfig()->getBlockClassName($classAlias);
    $result = new $className;
    return $result;
} 
```

# c# - 可以简化此 XAML 代码吗？(MultiDataTrigger, DependencyProperty)

> ID：12553500
> 
> 赞同：0
> 
> 时间：2012-09-23T15:15:37.153
> 
> 标签：c#, wpf, xaml, binding, triggers

最后我得到了我的自定义按钮，几乎就像我想要它一样。
问题是代码：D（`IsChecked`是a `DependencyProperty`）

```
<ControlTemplate.Triggers>
            <!-- EventTriggers for LMBUp/LMBDown/MouseEnter/MouseLeave -->
            <MultiDataTrigger>
                <MultiDataTrigger.Conditions>
                    <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsMouseOver}" Value="True"/>
                    <Condition Binding="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsChecked}" Value="False"/>
                </MultiDataTrigger.Conditions>
                <MultiDataTrigger.EnterActions>
                    <BeginStoryboard Storyboard="{StaticResource MouseEnter}"/>
                </MultiDataTrigger.EnterActions>
                <MultiDataTrigger.ExitActions>
                    <BeginStoryboard Storyboard="{StaticResource MouseLeave}"/>
                </MultiDataTrigger.ExitActions>
            </MultiDataTrigger>                
            <MultiDataTrigger>
                <MultiDataTrigger.Conditions>
                    <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsMouseOver}" Value="True"/>
                    <Condition Binding="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsChecked}" Value="True"/>
                </MultiDataTrigger.Conditions>
                <Setter TargetName="LayoutRoot" Property="Background" Value="Red"/>
            </MultiDataTrigger>
            <MultiDataTrigger>
                <MultiDataTrigger.Conditions>
                    <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsMouseOver}" Value="False"/>
                    <Condition Binding="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsChecked}" Value="True"/>
                </MultiDataTrigger.Conditions>
                <Setter TargetName="LayoutRoot" Property="Background" Value="Red"/>
            </MultiDataTrigger>
        </ControlTemplate.Triggers> 
```

我认为它有点“肮脏”，并且没有完全像预期的那样。每次用户单击按钮`IsChecked`时，都会从 切换`true`到`false`，反之亦然。现在如果发生以下情况

*   IsChecked == 真
*   用户单击将 IsChecked 切换为 false
*   鼠标一直在按钮上

那么我希望按钮变成 $MouseOverColor$ 而不是 $ButtonNormalBackground$ 因为第一个`MultiDataTrigger`.

我的问题是是否可以简化代码并纠正最后一个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T18:12:24.220

您可能有“价值解决策略”问题。`DependencyProperty`有一套如何解决价值的策略，[请参见此处](http://www.wpftutorial.net/DependencyProperties.html)。

如果您的动画设置了 的值，`Background`那么`LayoutRoot`在您停止动画之前，其他设置器不会产生影响（在这种情况下，设置器被视为“本地值”）。

您可以使用第二个和第三个触发器`<StopStoryboard>`中的元素。`EnterActions`请注意，如果在激活触发器时情节提要已经停止，这将在输出窗口中写入警告。

- 或者 -

您可以`FillBehavior="Stop"`在情节提要中使用。

# php - 将不可读的字符转换为 Unicode 字符

> ID：12553504
> 
> 赞同：1
> 
> 时间：2012-09-23T15:16:01.323
> 
> 标签：php, javascript

当我从 opengraph 调用一些 facebook 信息时，我得到一些看起来像这样的名字。

**\u0d94\u0db1\u0dca\u0dbd\u0dd2 \u0dc3\u0dd2\u0db1\u0dca\u0d9c\u0dca\u0dbd\u0dd2\u0dc2\u0dca**

有没有办法使用 PHP 或 Javascript 将它们转换为可读的 unicode 字符？**PHP是更优选的。**谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T15:22:19.883

使用`json_decode()`：

```
$str = '\u0d94\u0db1\u0dca\u0dbd\u0dd2';
echo json_decode('"'.$str.'"'); // ඔන්ලි 
```

[键盘示例](http://codepad.org/08rJtfJb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T17:00:12.043

以下代码允许您解码字符以及在必要时重新编码它们

## **代码**：

```
if (!function_exists('codepoint_encode')) {

    function codepoint_encode($str) {
        return substr(json_encode($str), 1, -1);
    }

}

if (!function_exists('codepoint_decode')) {

    function codepoint_decode($str) {
        return json_decode(sprintf('"%s"', $str));
    }

} 
```

## **如何使用**：

```
header('Content-Type: text/html; charset=utf-8'); 

var_dump(codepoint_encode('ඔන්ලි'));
var_dump(codepoint_encode('සින්ග්ලිෂ්'));

var_dump(codepoint_decode('\u0d94\u0db1\u0dca\u0dbd\u0dd2'));
var_dump(codepoint_decode('\u0dc3\u0dd2\u0db1\u0dca\u0d9c\u0dca\u0dbd\u0dd2\u0dc2\u0dca')); 
```

## **输出**：

```
string(30) "\u0d94\u0db1\u0dca\u0dbd\u0dd2"
string(60) "\u0dc3\u0dd2\u0db1\u0dca\u0d9c\u0dca\u0dbd\u0dd2\u0dc2\u0dca"
string(15) "ඔන්ලි"
string(30) "සින්ග්ලිෂ්" 
```

# python - Python 3：处理文件

> ID：12553506
> 
> 赞同：0
> 
> 时间：2012-09-23T15:16:08.263
> 
> 标签：python, file-io, python-3.x

我在我的教科书中读到一个文件对象有一个 readlines 方法，它将整个文件加载到一个字符串列表中：

```
>>> f = open('script1.py')
>>> lines = f.readlines()
>>> lines 
```

**结果**：

```
['import sys\n', 'print(sys path)\n', 'x = 2\n', 'print(2**33)\n'] 
```

当我分析我阅读的内容时，我总是喜欢查阅文档。但是我遇到了我的滑铁卢，试图在文档中找到这个？你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T16:40:41.923

`help(f)`或者只是`help(f.readlines)`会帮助你。但是，`readlines()`几乎不推荐使用且不推荐使用，尤其是当文件很大时。

如果要遍历文件，可以使用：

```
for line in f: process(line) 
```

如果要处理整个文件，只需使用：

```
all_the_text = open('script1.py').read() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T15:37:52.347

[open()](http://docs.python.org/dev/library/functions.html#open)的文档描述了哪些值以及在哪些条件下它可能会返回其文档的链接。具体`.readlines()`方法在[通用基类 io.IOBase](http://docs.python.org/dev/library/io.html)的文档中进行了描述。

我使用 google 或[文档中的搜索字段](http://docs.python.org/dev/)或`help(f.readlines)`（或类似的，例如 bpython 中的自动工具提示）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T15:21:41.983

在此处查看官方文档：

[http://docs.python.org/py3k/tutorial/inputoutput.html#reading-and-writing-files](http://docs.python.org/py3k/tutorial/inputoutput.html#reading-and-writing-files)

# c# - Mongodb C#驱动程序按嵌套属性排序

> ID：12553513
> 
> 赞同：2
> 
> 时间：2012-09-23T15:17:07.933
> 
> 标签：c#, mongodb, mapreduce, mongodb-.net-driver

如何使用 C# 驱动程序按嵌套对象排序（来自 mapreduce 查询）

```
{"_id": { "date" : "02/01/2001"} }"

SortBy.Descending("_id")  'Sorts by "_id" descending
SortBy.Descending("???")  'Sorts by "date" descending 
```

但我不知道要付出什么代价才能实现这一目标

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T01:05:30.810

在您给出的情况下，没有必要指定嵌套对象，因为按`_id`字段排序将在功能上按该字段中包含的日期排序。

但是，您可以在需要时使用[点符号](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29)访问嵌套对象。这看起来像：

```
SortBy.Descending("_id.date") 
```

# opencv - 如何计算每个对象的时刻和位置而不是对象之间的平均值？

> ID：12553516
> 
> 赞同：2
> 
> 时间：2012-09-23T15:17:26.443
> 
> 标签：opencv

我正在使用以下代码使用 opencv 计算对象的矩和位置：

```
// calc object moments
CvMoments *moments = (CvMoments*) malloc(sizeof(CvMoments));
cvMoments(threshy, moments, 1);

// get the moment values
double moment10 = cvGetSpatialMoment(moments, 1, 0);
double moment01 = cvGetSpatialMoment(moments, 0, 1);
double area = cvGetCentralMoment(moments, 0, 0);

// save the X and Y position from previous iteration.
int lastX = currentX;
int lastY = currentY;

// calculate the new X and Y positions.
currentX = moment10/area;
currentY = moment01/area; 
```

这很好用，只要场景中只有一个对象。然而，如果有多个对象，`currentX`并且`currentY`将导致所有对象的中点。

有没有办法计算每个物体的力矩（和坐标）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:18:13.023

你将不得不为此使用countours。对于 C++ api，您有一个名为 cv::findContours 的函数，您可以在其中传递阈值图像，然后计算每个计数/对象的矩。[在OpenCV 文档](http://opencv.willowgarage.com/documentation/cpp/structural_analysis_and_shape_descriptors.html#cv-findcontours)中查找更多详细信息。

# ios - iOS 6 + phonegap -- 启动画面无需交互即可旋转

> ID：12553517
> 
> 赞同：2
> 
> 时间：2012-09-23T15:17:29.477
> 
> 标签：ios, cordova

所以，我有一个在 iOS 5 上运行良好的 phonegap 应用程序，但是当 iOS 6 首次推出时，应用程序中引入的唯一问题是现在在 iPad 上，只有当我以横向方向运行我的应用程序时，现在会加载启动画面向上并正确显示，然后应用程序闪烁并且启动屏幕顺时针旋转 90 度，并且显然向左移动了 20-30 像素。

似乎它正在尝试使用面向纵向的启动屏幕，而不是横向启动屏幕，但所有文件都是正确的，所以我已经没有关于在哪里查看的想法了。

任何和所有的帮助将不胜感激，因为最后一件小事是唯一阻止我推送更新的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:26:30.993

看[这里](http://xdumaine.com/2012/09/21/phonegap-in-ios-6/)

或更新到**phonegap 2.1**

# iphone - Obj-C，如何在所有 iPhone 尺寸上缩放子视图的高度？

> ID：12553521
> 
> 赞同：0
> 
> 时间：2012-09-23T15:18:35.170
> 
> 标签：iphone, objective-c, ios, xcode

我在适应新的 iPhone 5 屏幕高度时遇到了一些问题，我需要调整表格视图的大小以显示广告。

直到iOS6我都没有问题，我使用了以下功能，但它没有使用规模。老实说，我很惊讶它的工作原理。

```
+ (CGRect)setTableBoundsByHeight:(int)lHeight:(UITableView*)tbl {
    CGRect tableFrame = tbl.frame;
    return CGRectMake(tableFrame.origin.x,
                      tableFrame.origin.y,
                      tableFrame.size.width,
                      lHeight);
} 
```

这是代码，我将表格视图的高度硬编码为 367，减去导航控制器和标签栏的高度。50是广告的高度。

```
if (!productPurchased) {
#ifdef VER_FREE  
    [[LARSAdController sharedManager] 
           addAdContainerToView:self.view withParentViewController:self];
    [[LARSAdController sharedManager] 
           setGoogleAdPublisherId:@"number"];
    [reportTableView setFrame:[General 
           setTableBoundsByHeight:(367-50):reportTableView]];
#endif
} else {
    [reportTableView setFrame:[General 
           setTableBoundsByHeight:367:reportTableView]];
} 
```

我发现了一些可扩展的代码，但我不确定如何实现它。

```
CGFloat scale = [UIScreen mainScreen].scale;
result = CGSizeMake(result.width * scale, result.height * scale); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T16:17:47.550

使用硬编码值（又名“幻数”）是一个错误的习惯，你现在明白为什么了。总是更喜欢使用常量或运行时计算的值。此外，它使代码更易于阅读，因为通过使用常量，您将知道数字对应的是什么，而不是从无处获得的“神奇数字”。

因此，对于您的问题，请使用下面的这种代码在运行时计算高度值。

```
// simply use the height of the current viewController's `view`
// which is probably the view of the `navigationController`'s `topViewController`
// and is already at the correct size, namely 367 in iPhone 3.5" and 455 in iPhone 4".
CGFloat screenHeight = self.view.height;
if (!productPurchased)
{
  static CGFloat advertHeight = 50;
#ifdef VER_FREE  
  [[LARSAdController sharedManager] 
       addAdContainerToView:self.view withParentViewController:self];
  [[LARSAdController sharedManager] 
       setGoogleAdPublisherId:@"number"];
  [reportTableView setFrame:[General 
       setTableBoundsByHeight:(screenHeight-advertHeight):reportTableView]];
#endif
} else {
  [reportTableView setFrame:[General 
       setTableBoundsByHeight:screenHeight:reportTableView]];
} 
```

请注意，您不需要自己做任何减法，因为`UIViewControllers`根据可用空间调整视图大小，因此如果您有例如 a`UITabBarController`包含 a`UINavigationController`本身`UIViewController`在其堆栈顶部显示 a ，则最后一个的高度viewController`view`将是屏幕的高度减去 tabBar、statusBar 和 navBar 的高度。

因此，不要获取`[UIScreen mainScreen].applicationFrame`例如，并减去 tabBar（如果有）和 navBar 高度以获得 367pt 的值，只需直接使用`viewController`'s的高度，`view`您应该直接获得正确的值。

* * *

附加说明：你应该给你的第二个参数一个前缀，因此命名你的方法`setTableBoundsByHeight:tableView:`而不是`setTableBoundsByHeight::`第二个参数没有任何前缀。（参见@MrMage 的回答，也暗示了这一点）。

例如，更好地命名您的方法甚至可以更好地`setHeight:forTableView:`适应 Apple 命名约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:00:06.767

如果此代码在您的视图控制器内，请使用`self.view.bounds.height`而不是 367。

顺便说一句：你真的应该重命名

```
+ (CGRect)setTableBoundsByHeight:(int)lHeight:(UITableView*)tbl 
```

类似于

```
+ (CGRect)setTableBoundsByHeight:(int)lHeight tableView:(UITableView *)tbl 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T15:47:58.937

忽略比例，它会自动缩放。只需检查 iPhone 5 并设置不同的高度，但您使用 iphone5 像素数/2，因为它会将其缩放到自身的 2 倍。

# asp.net-mvc-3 - 将 ASP.Net 站点部署到 windows 服务器

> ID：12553522
> 
> 赞同：0
> 
> 时间：2012-09-23T15:18:48.447
> 
> 标签：asp.net-mvc-3, amazon-web-services

我一直在开发一个几乎完成的 ASP 应用程序。它访问 AWS 上 Windows 服务器上的 SQL 数据库。不过，我想将我的应用程序部署到 AWS。

有人对我应该如何做到这一点有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T16:40:45.167

请参阅[部署 asp.net 应用程序](https://forums.aws.amazon.com/thread.jspa?messageID=359297)线程，其中包含有关如何完成此任务的所有必要信息和分步说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:11:44.903

如果您正在部署 MVC 应用程序，请检查托管服务提供商是否提供对 MVC 托管的支持。只需右键单击解决方案并选择发布。然后将文件复制到托管空间。

# r - 排除交叉表中的值

> ID：12553523
> 
> 赞同：-1
> 
> 时间：2012-09-23T15:18:49.447
> 
> 标签：r, dataset, chi-squared

> **可能重复：**
> [R 过滤掉一个子集](https://stackoverflow.com/questions/10367120/r-filtering-out-a-subset)

我有一个**R**数据集。在这个数据集中，我希望使用包`gmodels`为两个分类变量创建一个交叉表，然后`chisq.test`在它们上运行。这两个变量是`witness`和`agegroup`。`witness`由值为 1,2 和 9 的观测值`agegroup`组成。由值 1,2 组成。我希望排除值 if `witness=9`, or/and a 3rd variable `EMS=2`from the table 但我不确定如何继续。

```
library(gmodels)
CrossTable (mydata$witness, mydata$agegroup)
chisq.test (mydata$witness, mydata$agegroup) 
```

...所以我的问题是，我怎样才能在条件`witness!=9`和`EMS!=2`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T17:31:23.610

我希望这个问题会被关闭，因为它看起来真的是重复的。但正如[蔡斯](https://stackoverflow.com/users/415635/chase)和[我](https://stackoverflow.com/users/1317221/user1317221-g)所建议的那样，我认为某种形式的子集化是解决这个问题的最简单方法，例如

```
mydata[mydata$witness !=9 & mydata$EMS !=2,] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T16:43:01.410

```
 data:
    witness agegroup EMS
    1 1 2
    2 2 2
    1 1 2
    2 1 2
    9 2 2
    2 2 2
    1 2 2
    9 2 2
    2 1 2
 #save the data in your current working directory

 data <- read.table("data", header=TRUE, sep = " ")

 data$witness[data$witness == "9"] <- NA

 mydata <- data[!is.na(data$witness),]

 library("gmodels")

 CrossTable(mydata$witness, mydata$agegroup, chisq=TRUE) 
```

您可以将变量“EMS”留在“mydata”中。它不会损害您的分析！高温高压

# xml - 使用 vb.net 将 XmlTextWriter 输出导出到字符串

> ID：12553527
> 
> 赞同：0
> 
> 时间：2012-09-23T15:19:42.117
> 
> 标签：xml, vb.net, string, xmltextwriter

我想将 XmlTextWriter 输出数据导出（转换）为字符串变量。

我的代码如下：

```
 '' write data as xml
        Dim objX As New XmlTextWriter(Response.OutputStream, Encoding.UTF8)
        objX.WriteStartDocument()
        objX.WriteStartElement("Transaction")
        objX.WriteAttributeString("version", "1.0")
        objX.WriteElementString("id", "12")
        objX.WriteElementString("token", "4534gfdgdfhfst")

        objX.WriteEndElement()

        objX.WriteEndDocument()

        objX.Flush()

        objX.Close()
        Response.End() 
```

现在得到的 xml 输出是这样的：`38824e4760a1b72f9bd95723a3bdffbd02280010.50en3475990rapids1 month rapidshare0.46587748175.136.184.1539/14/2012d7a1ff2200f9fe7b8b89d12fdc8be8f36293‌​712eS. how to make it as xml tags`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T15:21:47.860

您已将 配置`XmlTextWriter`为直接写入`Response.OutputStream`. 如果您想将其导出到字符串变量，您可以使用`StringWriter`将写入到`StringBuilder`.

```
Dim sb As New StringBuilder()
Using sw As New StringWriter(sb)
    Using writer = XmlWriter.Create(sw)
        ' write the XML to the writer here
    End Using
End Using
' At this stage the StringBuilder will contain the generated XML. 
```

作为替代方案，您可以写信给`MemoryStream`：

```
Using stream As New MemoryStream()
    Using writer = XmlWriter.Create(stream)
        ' write the XML to the writer here

        Dim xml As String = Encoding.UTF8.GetString(stream.ToArray())
        ' TODO: do something with the generated XML
    End Using
End Using 
```

# javascript - 如果 div 在视口之外，我如何将它们设置为“可见性：隐藏”

> ID：12553528
> 
> 赞同：8
> 
> 时间：2012-09-23T15:19:51.027
> 
> 标签：javascript, jquery, ios, css, web

我正在开发移动网络应用程序。但是，iOS 5.1 或更低版本中的 safari 内存有限。当我使用 css3 转换时，我需要最小化内存使用量。我发现如果我使用 css 样式“显示：无/可见性：隐藏”，应用程序不会因内存问题而崩溃。因此，当它们真正隐藏时，我想将它们“隐藏”。我的英语不好。图片可以显示我想要的：

上传图片**：**

![图片费用](../Images/fdaae17ea8458c60380f7b00b7ab3715.png)

另一个例子是网站使用 css “visibility: hidden” 属性来隐藏不在屏幕上的每个会话：

[示例网站：电通网络](http://dentsunetwork.com/#/projects)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T15:41:02.897

有一个[jQuery 插件提供 viewport selectors](http://www.appelsiini.net/projects/viewport)。

您可以将所有内容设置为`visibility:hidden;`，然后仅在视口中显示项目。用户滚动后，您可以重新抓取视口元素并显示它们。

```
 $(":in-viewport").css("visibility", "visible") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T15:38:46.070

您应该能够计算视口`document.body.scrollTop`和窗口的大小。

假设 scrollTop 为 100px，则用户向下滚动了 100px。现在你可能想要隐藏一个占据屏幕顶部 100px 的 div 并显示一个从 101px 开始并延伸到屏幕大小（高度）的 div

# wordpress - WordPress 类别链接

> ID：12553534
> 
> 赞同：0
> 
> 时间：2012-09-23T15:20:26.650
> 
> 标签：wordpress, categories

我正在尝试从头开始创建一个带有类别和产品页面的在线商店。因为是我的第一家[WordPress](http://wordpress.org/)商店，所以我被困在这个小问题上，这让我停了下来。[永久链接](http://codex.wordpress.org/Using_Permalinks)设置为月份和名称只是为了了解设置。

我创建了几个类别，我想在其中插入未来的产品。

当我尝试访问某个类别链接时出现问题`www.mysite.com/category/books/`- 它显示错误页面。

如果我访问`www.mysite.com/category/`它，它会显示在管理面板中创建的类别页面的内容。

我要做的就是在访问者点击时显示所有书籍`www.mysite.com/category/books/`等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:30:17.930

很简单。转到 wp-admin/options-permalink.php 并进行自己的设置：`/%category%/%postname%/`

并在下面的字段中添加前缀：`category`或任何您想要的

阅读[此处](http://codex.wordpress.org/Using_Permalinks)了解更多选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T15:49:49.140

实际上我通过修改 category.php 页面以另一种方式解决了它。我在那里插入了这段代码：

```
$uri = $_SERVER['REQUEST_URI'];

$elms = explode('/', $uri) ;

$catName = $elms[4] ; 
```

它做了我需要的事情。

# assembly - 编译汇编代码的方法

> ID：12553539
> 
> 赞同：1
> 
> 时间：2012-09-23T15:21:22.067
> 
> 标签：assembly, compiler-construction, 16-bit, windows64

刚开始在学校学习Assembler，想问下这段代码怎么编译：

```
stek Segment Stack
DB 256 DUP(?)
stek ENDS

CR EQU 13
EF EQU 10

Duom SEGMENT
pranesimas DB 'Hello Word', CR,EF
           DB 'Made By Edgar' $
Duom ENDS

prog SEGMENT

ASSUME CS:programa,ds:Duomenis,ss:stekas

START:
        MOV ax,duomenis
        MOV ds,ax

        MOV ah,09
        LEA dx,Pranesimas
        INT 21h

        MOV ah,4ch
Prog ENDS

END START 
```

在 Windows 7 x64 上

因为在学校我们有 Xp x32，所以我们在学校编译的方式在 x64 窗口上不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:41:15.683

较新版本的 Windows 已经放弃了 XP 中曾经存在的 16 位支持，因此要编译程序（一个 16 位 DOS 程序），您需要安装[DOSBox](http://www.dosbox.com/information.php?page=0)、[Bochs](http://bochs.sourceforge.net/)或类似的模拟器。

它们将模拟 16 位环境，因此您应该能够在 64 位 Windows（或 Mac/Linux 机器）上使用汇编程序和生成的代码运行 DOS

# iphone - 如何让 MPMusicPlayerController 在播放列表中注册更改？

> ID：12553545
> 
> 赞同：1
> 
> 时间：2012-09-23T15:22:02.807
> 
> 标签：iphone, ios, xcode, mpmusicplayercontroller

我正在尝试在 xcode 中构建音乐播放器应用程序，但是在更改播放列表（又名音乐播放器队列）时遇到问题。每当我更改播放列表中的某些内容时（即添加歌曲或更改歌曲顺序，或按下“下一步”按钮等时），我似乎总是必须执行以下两行代码：

```
[self.musicplayer play];
[self.musicplayer pause]; 
```

显然，音乐播放器只有在我向它发送“播放”命令时才真正注册更改；不久之后，我必须发送它“暂停”，这样歌曲就不会真正开始播放。

如果没有这些代码行，我将遇到以下问题（除其他外）：例如，我将拥有 6 首歌曲，命名为“1”到“6”。歌曲 1 正在播放，但我暂停了。然后我按了“下一步按钮”3 次，它执行了以下代码（3 次）：

```
[self.musicPlayer skipToNextItem]; 
```

因此，按照我的逻辑，音乐播放器应该将第 4 首歌曲作为当前播放的歌曲；但是当我按下播放时，第一首歌曲会开始播放，就好像它没有注意到我按下了“下一步”一样。

如上所述，我只能通过告诉它播放和暂停来解决问题，但至少可以说这是一个非常丑陋的解决方案。此外，在某些情况下，ipod 会播放歌曲的前几秒钟，然后处理它必须立即暂停，这非常糟糕：p

有谁知道我应该这样做的正确方法？

我正在使用 Xcode 4.2.5 预览版，并在带有 ios 6 的 iphone 4s 上对其进行测试。

# objective-c - 在循环中创建对象，但 ivar / 实例变量不保持状态

> ID：12553551
> 
> 赞同：3
> 
> 时间：2012-09-23T15:22:48.050
> 
> 标签：objective-c, pointers, nsdictionary

`NSJSONSerialization`我有一个从类创建字典的方法。然后我枚举 json，并创建对象来存储每个实例的状态。

```
- (void)fetchedData:(NSData *)responseData {

    NSError* error;
    NSDictionary *json = [NSJSONSerialization
                          JSONObjectWithData:responseData
                          options:kNilOptions
                          error:&error];

    NSArray *moviesJson = [json objectForKey:@"movies"];

    for(NSDictionary *element in moviesJson)
    {
         RABMovie *myMovie = [[RABMovie alloc] initWithJson:element];
       // RABMovie *myMovie = [RABMovie new];
       // myMovie.json = element;

        [_myMovieNames addObject: myMovie];
        myMovie = nil;

    }

    [self.movieTableView reloadData]; 
} 
```

**问题：**我想通过传入`element`分配器来创建我的对象，但是当我这样做时，我的`UITTableView`行都包含**相同的电影数据**。它*始终是最后一项*，让我相信我只使用一个内存地址，并且最后一次更新会影响整个集合。

如果我取消注释代码以将其`json`用作属性而不是分配参数，则我不再遇到问题并且一切正常。我也尝试`NSDictionary`通过深层副本创建一个全新的`element`但无济于事。

有人知道为什么会这样吗？顺便说一句，我正在使用 ARC。-谢谢你的时间。

编辑：添加了更多代码。我已经包含了一个属性`movieName`来说明我如何使用 ivar `_json`。

```
@implementation RABMovie

NSDictionary *_json;
- (id) initWithJson: (NSDictionary*) jsonAsDictionary
{
    if (self = [super init])
    {

        _json =  jsonAsDictionary;
    }

    return self;
}

- (NSString*) movieName
{
    return [_json objectForKey:@"title"];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T20:10:43.230

我认为您的意思是声明`_json`为实例变量。相反，它是一个全局可见的（至少在该类中）变量 - 不是 100% 确定范围规则，但无论如何，它不是实例变量 - 它是所有实例共享的单个变量！试试这个：

```
@implementation RABMovie {
    NSDictionary *_json;
}

/* ...rest of class */

@end 
```

在 @implementation 指令之后将它放在花括号内使其成为实例变量。希望这可以帮助！

编辑：您是否已经`json`在 RABMovie 上有一个属性？然后你可以完全跳过实例声明，编译器会为你生成一个实例变量。这可能实际上已经发生了，这就是为什么当您通过该属性时它会起作用 - 它正在访问 ivar 而不是“全局”。

# vb.net - MS Access中的VB.Net Select-Like查询不起作用

> ID：12553561
> 
> 赞同：1
> 
> 时间：2012-09-23T15:23:57.840
> 
> 标签：vb.net, ms-access, select, sql-like

我需要从表单上的文本框“Purchaser”中输入的文本开始显示“Purchaser”列中的数据。我正在使用 MS Access 2003 数据库。为此，我使用以下...

```
 Dim query = "SELECT * FROM Details WHERE [Purchaser] LIKE '" & Purchaser.Text & "*'"
            Dim dc = New OleDbCommand(query, cn)
            Dim rows = dc.ExecuteNonQuery
            cn.Close()

            If rows = 0 Then
                'Show a form for new entry
            Else

                Dim oleadap = New OleDbDataAdapter(query, cn)
                Dim dset As DataSet = Nothing
                oleadap.Fill(dset, "Details")

                For i = 0 To rows
                    Dim purName = dset.Tables("Details").Rows(i).Item("Purchaser").ToString
                    Dim purAddr = dset.Tables("Details").Rows(i).Item("Address").ToString

                    'Populate a list

                Next

            End If 
```

即使我在数据库中检查以 A 开头的购买者，变量“行”总是为零。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T15:26:22.790

那应该是：

```
Dim query = "SELECT * FROM Details WHERE [Purchaser] LIKE '" _
          & Purchaser.Text & "%'" 
```

在 MS Access 中，通配符是星号 (*)，在它之外，通配符是百分比 (%)

此外，您有 ExecuteNonQuery，但事实并非如此。您正在执行查询，这里有一些测试说明。

```
Dim query = "SELECT * FROM Details WHERE [Purchaser] LIKE '" _
          & Purchaser.Text & "%'"
Dim dc = New OleDbCommand(query, cn)
Dim rows As OleDb.OleDbDataReader
rows = dc.ExecuteReader

If rows.HasRows Then
    Do While rows.Read()
        Console.WriteLine(rows("Purchaser"))
    Loop
End If
Console.ReadLine() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T15:27:24.480

可以用`%`代替吗`*`？还有一个，使用参数。

```
Dim query = "SELECT * FROM Details WHERE [Purchaser] LIKE @purc & '%' "
Dim dc = New OleDbCommand(query, cn)
dc.Parameters.AddWithValue("@purc", Purchaser.Text)
Dim rows = dc.ExecuteNonQuery 
```

# c++ - 我是否错误地使用了 ncurses 库中的 getch() 函数？

> ID：12553562
> 
> 赞同：3
> 
> 时间：2012-09-23T15:24:04.613
> 
> 标签：c++, ncurses

我正在使用 ncurses 库在 c++ 中编写 Pacman 游戏，但我无法正确移动 Pacman。我曾经`getch()`将它向上、向下、向左和向右移动，但是当我按下任何其他键时，它只会向右移动而不会移动到其他任何地方。

这是向上移动的代码片段。我已经编写了类似的代码，并相应地改变了一些条件来向左、向右和向下移动。

```
int ch = getch(); 
if (ch == KEY_RIGHT)
{
  int i,row,column;
  //getting position of cursor by getyx function
  for (i=column; i<=last_column; i+=2)
  {
    //time interval of 1 sec

    mvprintw(row,b,"<");   //print < in given (b,row) coordinates

    //time interval of 1 sec

    mvprintw(row,(b+1),"O");  //print "O" next to "<"
    int h = getch();   //to give the option for pressing another key 
    if (h != KEY_RIGHT)  //break current loop if another key is pressed
    {
      break;
    }
  }
}
if (condition)
{
  //code to move left
} 
```

我是在使用 getch() 错误，还是我需要做其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:30:49.333

键盘上的许多“特殊”键——上、下、左、右、Home、End、Function 键等实际上将两个扫描码从键盘控制器返回给 CPU。“标准”键都返回一个。所以如果你想检查特殊键，你需要调用 getch() 两次。

例如向上箭头首先是 224，然后是 72。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-14T17:04:19.270

`261`与`KEY_RIGHT`(八进制`0405`in `curses.h`) 一致。这至少告诉我们这`keypad`是用来允许`getch`读取特殊键的。

显示的片段没有提供有关它如何被纳入程序其余部分的线索。但是，`getch`在循环中使用 of 可能会造成混淆，因为在退出循环时该值将被丢弃。如果您希望做一些不同的事情（从`KEY_RIGHT`），您可以使用`ungetch`在循环中保存（否则丢弃）值，例如，

```
if (h != KEY_RIGHT)  //break current loop if another key is pressed
{
  ungetch(h);     //added
  break;
} 
```

这样做将允许*下一次*调用`getch`返回退出循环的键。

# macos - 如何将 GLUT 与 libdispatch 一起使用？

> ID：12553563
> 
> 赞同：2
> 
> 时间：2012-09-23T15:24:07.770
> 
> 标签：macos, opengl, glut, libdispatch

GLUT 和 libdispatch 都有自己的事件处理循环，它们分别使用永不返回的函数调用： `glutMainLoop();`和`dispatch_main();`。

我试过了：

```
dispatch_queue_t q = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(q, ^{
    glutMainLoop();
});

dispatch_main(); 
```

...并且窗口显示，但在初始调用指定的函数后不响应任何事件或重绘`glutDisplayFunc()`。

我怎样才能让 GLUT 和 libdispatch 一起玩得很好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T18:30:35.743

你不能。他们俩都想拥有消息处理循环。而且由于只有一个这样的循环，他们不能同时拥有它。

如果您使用[过 FreeGLUT](http://freeglut.sourceforge.net/)，您可以找到一种方法来完成这项工作。但更好的选择是只使用[GLFW](http://www.glfw.org/)。

# matlab - 如何截断数据集图

> ID：12553565
> 
> 赞同：1
> 
> 时间：2012-09-23T15:24:36.153
> 
> 标签：matlab, matrix, plot

假设我有一个包含 2 列 (x,y) 的数据集绘图向量但是，我不想绘制整个集合，而是将绘图从 x1 截断到 x2，即我知道的一些集合 x 值。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:36:15.577

我能想到的两个选项，如果你知道范围的索引，那么：

```
plot(x(x1:x2),y(x1:x2)); % here x1 and x2 are indices, not values 
```

否则，您始终可以：

```
range=find(x>x1 & x<x2); % here x1 and x2 are actual values, you can use any other condition needed...
plot(x(range),y(range)) 
```

# jquery - jQuery - 如何使用 jQuery 命令使对话框背景消失？

> ID：12553567
> 
> 赞同：0
> 
> 时间：2012-09-23T15:25:08.267
> 
> 标签：jquery

我正在做这样的事情来使对话框出现，并显示一个 .gif 图像，它基本上是一个微调器，指示用户等待。

```
$("#loading").dialog({
                height: 140,
                width:160,
                modal: true,
                resizable : true,
                draggable : true,
                closeOnEscape: false
           });

$(".ui-dialog-titlebar").hide();   //No title bar
$(".ui-dialog").css("padding","0px");  //Remove extra spacing 
```

此代码显示微调器，隐藏标题栏但没有摆脱背景图像，因此看起来很尴尬。有没有办法使用jQuery摆脱背景？

我不想过多地弄乱 css，因为我希望其他对话框看起来很标准。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T15:30:48.557

我不确定哪个元素有背景图像，这是摆脱背景图像的常用方法

```
$(SELECTOR).css('background', 'none'); 
```

或者

```
$(SELECTOR).css('background-image', 'none'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T15:27:30.853

您可以使用

```
.dialog( "close" ) 
```

参考：

[http://jqueryui.com/demos/dialog/#method-close](http://jqueryui.com/demos/dialog/#method-close)

编辑：

除非你希望它仍然显示，这意味着我误解了这个问题（对不起）。你可以做一些事情来获得没有背景：

[jQuery UI 对话框覆盖](https://stackoverflow.com/questions/1886678/jquery-ui-dialog-overlay)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T00:35:33.623

这对我有用：

**jQuery 用户界面：**

```
$("#div_loading").dialog({
  autoOpen:      false,
  modal:         true,
  dialogClass:   "no-close",
  draggable:     false,
  resizable:     false,
  closeOnEscape: false,
  width:         "auto",
  height:        "auto"
});

//This removes the title bar
$(".ui-widget-header").css("background", "none");
$(".ui-widget-header").css("border", "none");

//This removes the background
$(".ui-widget-content").css("background", "none");
$(".ui-widget-content").css("border", "none"); 
```

## 注意：我使用`autoOpen: false`是因为对话框仅在单击按钮时打开。

**HTML：**

```
<div id="div_loading" >
  <img alt="" src="ajax-loader.gif">
</div> 
```

# apache - htaccess 更改网址

> ID：12553569
> 
> 赞同：2
> 
> 时间：2012-09-23T15:25:46.357
> 
> 标签：apache, .htaccess, mod-rewrite, permissions

我的 .htacess 中有以下代码，但它不能正常工作。是不是因为 mod-rewrite 没有“开启”，如果是这样，我该如何检查？

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^(.*)\$ $1.php [nc] 
```

我想重命名我的地址，例如：

[http://www.abc.com](http://www.abc.com) -> [http://www.abc.com](http://www.abc.com)

[http://abc.com](http://abc.com) -> [http://www.abc.com](http://www.abc.com)

[http://www.abc.com/123.html](http://www.abc.com/123.html) -> [http://www.abc.com/123](http://www.abc.com/123)

[http://www.abc.com/12-12-12.html](http://www.abc.com/12-12-12.html) -> [http://www.abc.com/12-12-12](http://www.abc.com/12-12-12)

[http://subdomain.abc.com/123.html](http://subdomain.abc.com/123.html) -> [http://subdomain.abc.com/123](http://subdomain.abc.com/123)

基本上删除扩展名并确保其 www 完好无损。

编辑：

它被改写成

```
Options +FollowSymlinks
RewriteEngine on
RewriteCond % ^example.com [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301]
RewriteRule ^(.*).php $1 
```

但仍然无法正常工作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T05:12:30.510

## 第1步。

更改所有链接以`.html`从链接中删除。确保您已`Multiviews`关闭：

```
Options -Multiviews 
```

## 第2步。

当主机名中缺少 www 时，您需要规则来*重定向浏览器：*

```
RewriteCond %{HTTP_HOST} ^example\.com$ [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301] 
```

## 步骤 3。

当请求带有或已删除扩展名的 URL 时，您需要规则来*重定向浏览器：*`.html``.php`

```
RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /([^\ ]+)\.(php|html?)
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ /%2 [L,R=301] 
```

## 第4步。

如果请求实际上是针对 php 或 html 文件，则需要规则来*内部重写URI：*

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ /$1.php [L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.htm -f
RewriteRule ^(.*)$ /$1.htm [L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.*)$ /$1.html [L] 
```

## .htaccess

所以总而言之，你应该在你的 htaccess 中有这些规则（放弃你可能已经尝试解决这个问题的任何规则）：

```
# Make sure Multiviews is off
Options -Multiviews

# turn on rewrite engine
RewriteEngine On

# Redirect requests that are missing www and not a subdomain
RewriteCond %{HTTP_HOST} ^example\.com$ [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301]

# Redirect if requests is for a .htm, .html, or .php
RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /([^\ ]+)\.(php|html?)
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ /%2 [L,R=301]

# rewrite to the proper extension if such a file exists
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ /$1.php [L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.htm -f
RewriteRule ^(.*)$ /$1.htm [L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.*)$ /$1.html [L] 
```

总而言之：

*   如果浏览器 URL 地址栏显示：**http** ://example.com/index.html它将被重定向到*http://www.example.com/index*
*   如果浏览器 URL 地址栏显示：**http** ://www.example.com/index它将显示*http://www.example.com/index.html*的内容（或者`index.php`如果存在）。地址栏保持不变。
*   如果浏览器 URL 地址栏显示：**http://foo.example.com/images/image.png**您将在`/images/image.png`. 地址栏保持不变。
*   如果浏览器 URL 地址栏显示：http: **//foo.example.com/path/foo/bar.php**它将被重定向到*http://foo.example.com/path/foo/bar*
*   如果浏览器 URL 地址栏显示：**http://foo.example.com/path/foo/bar**它将显示在*http://foo.example.com/path/foo/bar.php*的内容。地址栏保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T15:31:39.223

删除*.html*：

```
RewriteRule ^(.*).html $1 [L,QSA] 
```

添加*万维网。*：

```
RewriteCond % ^example.com [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T09:27:50.267

您的网站位于哪个主机上？您确定启用了 mod-rewrite 吗？如果未激活，您是否联系过您的主机安装它？

之前由 androbin ( [https://stackoverflow.com/a/12553613/1713771](https://stackoverflow.com/a/12553613/1713771) ) 发布的解决方案是正确的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T19:26:02.047

我使用的`.htaccess`文件：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{HTTPS} !=on
    RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
    RewriteRule ^(.*)$ http://%1/$1 [R=301,L]
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME}\.html -f
    RewriteRule ^(.*)$ $1.html
</IfModule> 
```

这将删除`.html`文件扩展名并强制`www`.

# java - 抛出 RestClientException 时如何检索 HTTP 状态代码和响应正文？

> ID：12553570
> 
> 赞同：39
> 
> 时间：2012-09-23T15:25:50.263
> 
> 标签：java, resttemplate

throw`RestTemplate`等方法。我想从 catch 块中的异常对象中提取 HTTP 状态代码和响应正文。我怎样才能做到这一点？`postForEntity()``RestClientException`

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-10-18T20:45:24.960

与其抓`RestClientException`，不如抓特`HttpClientErrorException`。

这是一个例子：

```
try {
    Link dataCenterLink = serviceInstance.getLink("dataCenter");
    String dataCenterUrl = dataCenterLink.getHref();
    DataCenterResource dataCenter =
        restTemplate.getForObject(dataCenterUrl, DataCenterResource.class);
    serviceInstance.setDataCenter(dataCenter);
} catch (HttpClientErrorException e) {
    HttpStatus status = e.getStatusCode();
    if (status != HttpStatus.NOT_FOUND) { throw e; }
} 
```

[`HttpClientErrorException`](http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/HttpClientErrorException.html)分别提供[`getStatusCode`](http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/HttpStatusCodeException.html#getStatusCode--)和[`getResponseBodyAsByteArray`](http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestClientResponseException.html#getResponseBodyAsByteArray--)获取状态码和正文。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-08-14T06:20:43.547

`RestClientResponseException`而是抓住。它更通用。

来自[文档](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/client/RestClientResponseException.html)：包含实际 HTTP 响应数据的异常的通用基类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-04T15:52:45.257

在某些情况下，不会抛出**HttpClientErrorException 。**例如下面的方法**restTemplate.exchange**调用：

```
ResponseEntity<Employee[]> employees =  restTemplate.exchange(url, HttpMethod.GET, entity, Employee[].class); 
```

获取 http 正文并将其编组到实体。如果远程资源返回一个罕见的错误，则内部编组不起作用，只会抛出**RestClientException**。

# restTemplate.setErrorHandler

在这种情况下，或者如果您想处理**restTemplate**操作中的任何错误，您可以使用**setErrorHandler**。此方法接收带有有用方法的基本**ResponseErrorHandler 。**

这个方法**hasError**允许我获取远程 http 正文并帮助我检测调用错误或远程 http 远程资源中的错误：

```
restTemplate.setErrorHandler(new ResponseErrorHandler() {

  @Override
  public boolean hasError(ClientHttpResponse arg0) throws IOException {

    System.out.println("StatusCode from remote http resource:"+arg0.getStatusCode());
    System.out.println("RawStatusCode from remote http resource:"+arg0.getRawStatusCode());
    System.out.println("StatusText from remote http resource:"+arg0.getStatusText());

    String body = new BufferedReader(new InputStreamReader(arg0.getBody()))
          .lines().collect(Collectors.joining("\n"));

    System.out.println("Error body from remote http resource:"+body);
    return false;
  }

  @Override
  public void handleError(ClientHttpResponse arg0) throws IOException {
    // do something
  }
}); 
```

此外，您可以手动评估正文或状态并返回 true 或 false 以标记为错误与否。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-11-13T21:17:31.147

```
private void sendActivity(StatsActivity statsActivity) throws InterruptedException 
{
    LibraryConnectorXapiEditView libraryConnectorXapiEditView = (LibraryConnectorXapiEditView) workerBundle.getConnector();

    RestTemplate restTemplate = new RestTemplate();
    restTemplate.getMessageConverters().add(new MappingJackson2HttpMessageConverter());
    Statement statement = libraryConnectorConverter.convertActivityToStatement(statsActivity, workerBundle);
    HttpEntity<Statement> request = new HttpEntity<>(statement, headers);

    try
    {
       String lrsEndPoint = libraryConnectorXapiEditView.getLrsEndPoint() + "/statements";
       ResponseEntity<String> response = restTemplate.exchange(lrsEndPoint, HttpMethod.POST, request, String.class);
       ocnCompletionEventDao.save(this.convertToOcnCompletionEvent(statsActivity, response.getBody(), response.getStatusCodeValue()));
    }
    catch (HttpClientErrorException ex)
    {
      ocnCompletionEventDao.save(this.convertToOcnCompletionEvent(statsActivity, ex.getResponseBodyAsString(), ex.getStatusCode().value()));
      checkResponse(ex, libraryConnectorXapiEditView);  
      if(failedAttempts<3) 
      { 
          sendActivity(statsActivity);
          failedAttempts++;
      }
    }   
}

private void checkResponse(HttpClientErrorException ex, LibraryConnectorXapiEditView libraryConnectorXapiEditView) throws InterruptedException 
{
    int statusCode = ex.getStatusCode().value();
    int retryAfterSeconds = retryAfter(ex.getResponseHeaders());

    switch (statusCode)
    {
    case 401: 
        headers = xApiAuthorizationUtils.getHeaders(libraryConnectorXapiEditView);
    case 429:
        if(retryAfterSeconds!=0)
            Thread.sleep(retryAfterSeconds);
    case 422: 
        failedAttempts=3;
    }
 } 
```

# java - 如何在IE8的jsp页面中截取div

> ID：12553577
> 
> 赞同：3
> 
> 时间：2012-09-23T15:26:52.970
> 
> 标签：java, javascript, jquery, jsp, screenshot

我想知道**如何在适用于 IE8 的 jsp 页面中创建 div 的屏幕截图（显示 Google 图表）**。我已经浏览了适用于 IE9 或其他升级浏览器的选项。但我需要它专门在 IE8 中工作。欢迎使用任何脚本语言或使用 JAVA 的任何解决方案。如果有人能给我提供一个工作示例，那将是最好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T15:59:03.830

为什么你不使用这样的东西：[http](http://www.battlehorse.net/page/topics/charts/save_google_charts_as_image.html) ://www.battlehorse.net/page/topics/charts/save_google_charts_as_image.html ？

（发现那里[可以将谷歌图表保存为图像吗？](https://stackoverflow.com/questions/5466157/save-google-chart-as-image)）

# linq - 没有 ORM 或 DB 引擎的对象持久性

> ID：12553580
> 
> 赞同：1
> 
> 时间：2012-09-23T15:26:58.540
> 
> 标签：linq, nosql, persistence

我学会了喜欢 LINQ 如何对集合启用集合操作。我并不是说我打算避开传统的 RDMBS，因为我确实需要它来进行报告。那里有 NoSQL 替代品，但它们似乎都需要启动单独的服务。

我要寻找的是本地的东西，DLL 可以在其中创建数据库并在其上执行 CRUD。如前所述，我不会报告这个，只是内部数据存储。将使用它的主要应用程序是 C#。

我希望有人可以给我一个领导。如果没有，如果有人愿意，我们可以为它启动一个开源项目。我对商业产品不感兴趣。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:47:25.780

您可以在 .NET 应用程序[中以嵌入式模式运行 RavenDB](http://ravendb.net/docs/server/deployment/embedded) - 无需外部服务或任何东西。

并且 RavenDB 支持 Linq....

# javascript - Three.js：如何为多个实体重用几何/材质？

> ID：12553582
> 
> 赞同：2
> 
> 时间：2012-09-23T15:27:17.257
> 
> 标签：javascript, loading, three.js, assets

我有一个多人游戏，我想为每个玩家渲染一个玩家实体，所有这些都使用相同的几何和材质。理想情况下，当我创建一个新的播放器对象（保存播放器的状态等）时，我想在场景中添加一个播放器混搭。

这些玩家对象如何重用相同的几何体/材质？我最大的问题是几何图形通过回调异步加载，所以我不能在初始化玩家之前将它分配给一个变量并使用它来创建混搭（这基本上是我对纹理所做的，看起来）。

我可以使用某种“全球”资产管理器吗？甚至可以在开始游戏逻辑/创建场景之前预加载我需要的所有资产？

# python - Django - make_random_password 方法，它真的是随机的吗？

> ID：12553586
> 
> 赞同：4
> 
> 时间：2012-09-23T15:28:07.077
> 
> 标签：python, django, random

作为预订过程的一部分，我正在使用以下方法为用户创建随机代码：

```
 User.objects.make_random_password() 
```

当用户出现在会场时，他们将出示密码。

假设两个人最终不会使用相同的代码是否安全？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T15:34:39.957

不，假设两个人不能拥有相同的代码是不安全的。随机并不意味着唯一。这可能不太可能而且很少见，具体取决于您指定的长度和您正在处理的用户数量。但是你不能依赖它的独特性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-23T16:38:39.780

这取决于您现在拥有的用户数量，以及您选择的密码长度，以及您如何使用`User.objects.make_random_password()`默认情况下，机会基本上为零，IMO；

此方法是使用[`get_random_string()`](https://github.com/django/django/blob/3174b5f2f5bb0b0a6b775a1a50464b6bf2a4b067/django/utils/crypto.py). 来自 django github 仓库：

```
def get_random_string(length=12,
                      allowed_chars='abcdefghijklmnopqrstuvwxyz'
                                    'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'):
    """
Returns a securely generated random string.

The default length of 12 with the a-z, A-Z, 0-9 character set returns
a 71-bit value. log_2((26+26+10)^12) =~ 71 bits
"""
    if not using_sysrandom:
        # This is ugly, and a hack, but it makes things better than
        # the alternative of predictability. This re-seeds the PRNG
        # using a value that is hard for an attacker to predict, every
        # time a random string is required. This may change the
        # properties of the chosen random sequence slightly, but this
        # is better than absolute predictability.
        random.seed(
            hashlib.sha256(
                "%s%s%s" % (
                    random.getstate(),
                    time.time(),
                    settings.SECRET_KEY)
                ).digest())
    return ''.join([random.choice(allowed_chars) for i in range(length)]) 
```

根据 github，当前代码默认使用 62 个字符（大小写字母和数字）的字符串中的 12 个字符的密码。这使得 62**12 或 3226266762397899821056 (3.22e21) 可能有不同的密码。这比目前的世界人口（大约 7e9）*要大得多。*

该`random.choice()`函数从这个字符列表中挑选字母。`random.choice()`现在的问题变成了重复调用两次返回相同序列的可能性有多大？

从 的实现中可以看出`get_random_string()`，代码努力避免可预测性。当不使用操作系统的伪随机值生成器（在 Linux 和 *BSD 上从以太网数据包或按键到达的时间收集真正的随机性）时，它会在每次调用时重新播种[`random`](http://docs.python.org/library/random.html)模块的[Mersenne Twister](http://en.wikipedia.org/wiki/Mersenne_twister)可预测 PRNG，并结合当前随机状态、当前时间和（可能是常数）密钥。

因此，要生成两个相同的密码，随机生成器的状态（在 python 中约为 8 kiB）和生成它们的时间（根据 epoch 以秒为单位测量`time.time()`）必须相同。如果系统的时间维护得很好，并且您正在运行密码生成程序的一个实例，那么发生这种情况的机会基本上为零。如果您在*完全相同*的时间使用*完全相同*的 PRNG 种子启动此密码生成程序的两个或多个实例，并结合它们的输出，人们会期望某些密码会出现不止一次。

# c - How can I call a `callable` zval in php extension dev?

> ID：12553589
> 
> 赞同：2
> 
> 时间：2012-09-23T15:28:25.857
> 
> 标签：c, php-extension

If a zval is a callable object, how can I run it in my extension c code ?

or how to convert a `zval` to a `zend_fcall_info`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T16:55:38.720

after search for the `zend_is_callable` and dive into the php src code, I know how to call a callable zval:

```
zval ret;

zval* params[] = { param }; // param is zval* too

if (SUCCESS == call_user_function(CG(function_table), NULL, callable, &retval, 1, params TSRMLS_CC)) {
    // callable is a zval*
    // you can do something with the retval now
} 
```

# php - PHP 脚本可以一直在我的服务器上运行吗？

> ID：12553590
> 
> 赞同：3
> 
> 时间：2012-09-23T15:28:43.483
> 
> 标签：php

我对 PHP 很陌生，但我想创建一个网站正常运行时间检查器，每当我的网站出现故障时，它都会给我发电子邮件。

这意味着脚本应该不间断地运行。这可以在 PHP 中完成吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:30:01.967

您可以使用 a[`cron task`](http://www.thegeekstuff.com/2011/07/php-cron-job/)来安排您的脚本定期运行。或者，如果您在 Windows 上托管，请使用 Windows 调度程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T15:30:16.053

否。您想改为以设定的时间间隔运行脚本。Cron 就是你想要的。

这是一个入门教程。[http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/](http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T15:30:23.703

通常有一个[执行时间](http://php.net/manual/en/function.set-time-limit.php)限制会阻止脚本运行超过指定时间。更好的解决方案是设置一个定期执行脚本的[cron 作业。](http://en.wikipedia.org/wiki/Cron)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T15:31:39.813

您可以通过 cron 作业（用于检查您的网站的脚本）来完成它并使其定期运行。

# c# - 如何使用 MySql 和 Umbraco 4.7.1 为波斯尼亚语（或克罗地亚语或斯洛文尼亚语）字符集设置编码

> ID：12553593
> 
> 赞同：5
> 
> 时间：2012-09-23T15:29:33.683
> 
> 标签：c#, asp.net, mysql, character-encoding, umbraco

当我在 Umbraco 4.7.1 中将其作为文本字符串数据类型插入时，我在前端显示字符 š 和 ž 时遇到问题。Umbraco 使用 MySql 数据库。

我注意到当我使用富文本编辑器保存这些字符时，这不是问题。我查看了数据库，所有富文本编辑器值都存储在 CDATA 内的 XML 中，但文本字符串数据类型不在 CDATA 内。

所有其他波斯尼亚特定字符 (čćđ) 的 html 编码为 čćđ 但 š 和 ž 保存为 s 和 z。

当我尝试将 textstring 数据库数据类型更改为 ntext 而不是 varchar 时，它可以工作（因为它存储在 CDATA 中）但我不能这样做，因为那样我将丢失所有现有数据。

我的 HTML 编码字符集是 iso-8859-1。

在这里做什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T10:52:01.860

有趣的是，我最近正在和某人讨论克罗地亚字母表（在非计算环境中），他们给了我一个链接的宝石，其中就克罗地亚字母表说明了以下内容：

> 8 位 ISO 8859-2 (Latin-2) 标准由 ISO 开发。¹

`ISO 8859-1` ²仅部分支持使用相似字符集的语言，
而`ISO 8859-2` ³则完全支持波斯尼亚语、克罗地亚语和许多其他语言。

更改编码应该可以解决问题。

¹ [http://en.wikipedia.org/wiki/Gaj%27s_Latin_alphabet#Computing](http://en.wikipedia.org/wiki/Gaj%27s_Latin_alphabet#Computing)

² [http://en.wikipedia.org/wiki/ISO_8859-1](http://en.wikipedia.org/wiki/ISO_8859-1)

³ [http://en.wikipedia.org/wiki/ISO_8859-2](http://en.wikipedia.org/wiki/ISO_8859-2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T00:31:37.913

过了一会儿，我发现我可以使用默认编码（UTF8），但我必须更改数据库排序规则。因此，我更改了每个具有 varchar 或 ntext 的表**列**的排序规则，现在它可以完全正常工作，这是我迄今为止找到的最佳解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T08:27:01.787

实际上 windows-1251 有帮助。它对想要的字符进行编码。

# python - 2012年重建旧（2010）django项目

> ID：12553598
> 
> 赞同：-1
> 
> 时间：2012-09-23T15:30:10.393
> 
> 标签：python, django, python-2.7, ubuntu-12.04, sorl-thumbnail

我试图让一个旧的 Django 项目再次运行。

更新 #1：我删除了参数 extra_thumbnails 和 size 以便服务器正在运行。但是现在我没有正确的图片缩略图......

```
 image = ImageWithThumbnailsField(
    upload_to='images',
    thumbnail={'size': (120, 120)},
    extra_thumbnails={
        'icon': {'size': (32, 32), 'options': ['crop', 'upscale']},
        'large': {'size': (640, 640)},
    } 
```

现在看起来只有：

```
 image = ImageField(
    upload_to='images') 
```

--

在似乎解决了旧 sorl.thumbnail 版本和不推荐使用的表达式的问题之后，我现在在运行时收到此错误

```
python manage.py runserver 
```

我还尝试将我的旧文件复制并粘贴到一个新的 Django 项目中并得到完全相同的错误。也许这里有人知道问题出在哪里？

```
Unhandled exception in thread started by <bound method Command.inner_run of <django.contrib.staticfiles.management.commands.runserver.Command object at 0x2a80510>>
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/django/core/management/commands/runserver.py", line 88, in inner_run
    self.validate(display_num_errors=True)
  File "/usr/lib/python2.7/dist-packages/django/core/management/base.py", line 249, in validate
    num_errors = get_validation_errors(s, app)
  File "/usr/lib/python2.7/dist-packages/django/core/management/validation.py", line 35, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File "/usr/lib/python2.7/dist-packages/django/db/models/loading.py", line 146, in get_app_errors
    self._populate()
  File "/usr/lib/python2.7/dist-packages/django/db/models/loading.py", line 61, in _populate
    self.load_app(app_name, True)
  File "/usr/lib/python2.7/dist-packages/django/db/models/loading.py", line 78, in load_app
    models = import_module('.models', app_name)
  File "/usr/lib/python2.7/dist-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/home/me/Documents/wdws/wdws/../wdws/cityofwindows/models.py", line 73, in <module>
    class Image(models.Model):
  File "/home/me/Documents/wdws/wdws/../wdws/cityofwindows/models.py", line 83, in Image
    'large': {'size': (640, 640)},
  File "/usr/lib/python2.7/dist-packages/django/db/models/fields/files.py", line 233, in __init__
    super(FileField, self).__init__(verbose_name, name, **kwargs)
TypeError: __init__() got an unexpected keyword argument 'extra_thumbnails' 
```

我需要为本地的可视化文档重新构建项目......所以任何关于如何快速重新运行过时的 django-projects 的提示都非常受欢迎！

非常感谢！

（使用 Ubuntu 12.04）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T16:18:10.007

黑暗中的猜测：删除文件`extra_thumbnails`中字段定义中的关键字参数`FileField``cityofwindows/models.py`

如果这不能解决问题，请发布 cityofwindows/models.py 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:21:19.037

您可能使用另一个版本的 Django。安装 Django 1.0 (https://www.djangoproject.com/download/1.0.4/tarball/) 是最简单的，但不是最好的。您最好使用 1.3 版的标准更新您的项目（参见 1.4）

# python - 使用模型在 Django 中创建 JSON 响应

> ID：12553599
> 
> 赞同：15
> 
> 时间：2012-09-23T15:30:14.420
> 
> 标签：python, django, json, django-models, django-serializer

我在这里遇到了一些问题。我正在尝试返回由消息和模型实例组成的 JSON 响应：

```
 class MachineModel(models.Model):
       name = models.CharField(max_length=64, blank=False)
       description = models.CharField(max_length=64, blank=False)
       manufacturer = models.ForeignKey(Manufacturer)
       added_by = models.ForeignKey(User, related_name='%(app_label)s_%(class)s_added_by')
       creation_date = models.DateTimeField(auto_now_add=True)
       last_modified = models.DateTimeField(auto_now=True)

    machine_model_model = form.save(commit=False)
    r_user = request.user.userprofile
    machine_model_model.manufacturer_id = manuf_id
    machine_model_model.added_by_id = request.user.id
    machine_model_model.save()
    alert_message = " The'%s' model " % machine_model_model.name
    alert_message += ("for '%s' " % machine_model_model.manufacturer)
    alert_message += "was was successfully created!"
    test = simplejson.dumps(list(machine_model_model))
    data = [{'message': alert_message, 'model': test}]
    response = JSONResponse(data, {}, 'application/json')

class JSONResponse(HttpResponse):
"""JSON response class."""
    def __init__(self, obj='', json_opts={}, mimetype="application/json", *args, **kwargs):
        content = simplejson.dumps(obj, **json_opts)
        super(JSONResponse,self).__init__(content, mimetype, *args, **kwargs) 
```

但我不断得到：

```
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/encoder.py", line 178, in default
raise TypeError(repr(o) + " is not JSON serializable")

TypeError: <MachineModel: "Test12"> is not JSON serializable 
```

这是为什么？我以前见过：

```
models = Model.objects.filter(manufacturer_id=m_id)
json = simplejson.dumps(models) 
```

这有效......有什么区别？！

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-23T16:16:39.737

您应该使用[django 序列化程序](https://docs.djangoproject.com/en/dev/topics/serialization/)而不是`simplejson`：

例如，这会返回正确的序列化数据：

```
from django.core import serializers
# serialize queryset
serialized_queryset = serializers.serialize('json', some_queryset)
# serialize object
serialized_object = serializers.serialize('json', [some_object,]) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2019-05-07T14:30:49.130

# 方法一：使用 Django 的`python`序列化器

我认为[这个答案](https://stackoverflow.com/a/12553956/8283848)不会返回 JSON 或 Python dict/list 对象。所以，使用格式**`python`**而不是**`json`**

```
from django.core import serializers
# serialize queryset
serialized_queryset = serializers.serialize(**'python'**, some_queryset)
# serialize object
serialized_object = serializers.serialize(**'python'**, [some_object,])
```

* * *

### Django 外壳响应

```
In [2]: from django.core import serializers                                                                                                                             

In [3]: qs = SomeModel.objects.all()                                                                                                                                    

In [4]: json_res = serializers.serialize('json',qs)                                                                                                                     

In [5]: type(json_res)                                                                                                                                                  
Out[5]: str

In [6]: python_res = serializers.serialize('python',qs)                                                                                                                 

In [7]: type(python_res)                                                                                                                                                
Out[7]: list 
```

```
#views.py
from django.core import serializers
from django.http.response import JsonResponse

def some_view(request):
    some_queryset = SomeModel.objects.all()
    serialized_queryset = serializers.serialize('python', some_queryset)
    return JsonResponse(serialized_queryset, safe=False)
```

* * *

# 方法二：使用Django的[`values()`](https://docs.djangoproject.com/en/2.2/ref/models/querysets/#values)方法

直接使用**`values()`**方法会抛出**`TypeError`**异常，所以转换成`QuerySet`python**`list`**如下，

```
from django.http.response import JsonResponse

def sample_view(request):
    return JsonResponse(**list(SomeModel.objects.all().values())**, safe=False)
```

# c# - 类型继承自接口的扩展方法

> ID：12553602
> 
> 赞同：-4
> 
> 时间：2012-09-23T15:30:18.417
> 
> 标签：c#, interface, extension-methods

我有界面：

```
public interface IBag
{
    public string BagName { get; }
} 
```

和类从它继承：

```
 public class CacheBag : IBag
    {
        private Dictionary<string, object> cache;

        public Dictionary<string, object> Cache
        {
            get
            {
                return this.cache;
            }

            private set
            {
                this.cache = value;
            }
        }

        public string BagName
        {
            get { return "CacheBag"; }
        }
    } 
```

我尝试为从接口继承的类创建扩展方法：

```
 public static object Retrieve(this IBag bag)
    {
        Type objType = bag.GetType();
        IBag obj = null;
        try
        {
            IsolatedStorageFile appStore = IsolatedStorageFile.GetUserStoreForApplication();
            string fileName = string.Format(CultureInfo.InvariantCulture, "{0}.xml", bag.BagName);
            if (appStore.FileExists(fileName))
            {
                using (IsolatedStorageFileStream isoStream = new IsolatedStorageFileStream(fileName, FileMode.Open, appStore))
                {
                    using (StreamReader sr = new StreamReader(isoStream))
                    {
                        System.Xml.Serialization.XmlSerializer x = new System.Xml.Serialization.XmlSerializer(objType);
                        obj = (IBag)x.Deserialize(sr);
                    }
                }
            }
        }
        catch (Exception ex)
        {
            log.Error(ex.Message);
        }

        return obj;
    }
} 
```

但现在它起作用了：

```
UserBag users = new UserBag();
                    users.Retrieve(); 
```

我可以像这样调用扩展：

```
 CacheBag.Retrieve(); 
```

我应该如何改变我的实现来实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T15:34:14.463

您应该能够在类的实例上调用扩展方法：

```
CacheBag bag = new CacheBag();
object result = bag.Retrieve(); 
```

您需要一个类的实例才能调用扩展方法。作为快捷方式，您可以编写：

```
object result = new CacheBag().Retrieve(); 
```

但是，如果您不想创建实例，则不需要扩展方法。您必须定义一个普通的静态方法。

# php - PHP中的防洪DDoS

> ID：12553606
> 
> 赞同：1
> 
> 时间：2012-09-23T15:30:44.323
> 
> 标签：php, ddos

```
<?php
if (!isset($_SESSION)) {
        session_start();
}
// anti flood protection
if($_SESSION['last_session_request'] > time() - 2){
        // users will be redirected to this page if it makes requests faster than 2 seconds
        header("location: http://www.example.com/403.html");
        exit;
}
$_SESSION['last_session_request'] = time();
?> 
```

我已经测试了这个脚本，因为你第二个它会继续重定向到`http://www.example.com/403.html`没有任何理由。

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T16:01:34.840

让我们从逻辑上考虑一下……

攻击者的请求已经被发送到 Web 服务器并通过 PHP 脚本。导致 DDoS 攻击失败的瓶颈是 Web 服务器。

DDoS 攻击背后的想法就是 - 导致拒绝服务，其中网站/服务器无法处理任何新请求。所以从本质上讲，这种做法是不合理的。您需要爬上请求处理的阶梯。

如果您有一台服务器供您使用，那就*更容易*了。您可以简单地在内核防火墙/iptables 上实现速率限制规则。但是假设您无法访问它，Apache 仍然可以使用 - 尽管效率不高。

在 .htaccess 中实现规则是一个*更好*的解决方案，但仍然不完美。但是根据 DDoS 攻击，开发人员没有真正的解决方案可以阻止它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-24T00:07:39.490

我正在使用一个很好的防洪脚本，它不需要 cookie（非常适合 web 服务）。它对高级 DDOS 攻击并不完美，但足以防止初学者攻击和自动多个请求。

为了使用它，在需要创建“flood”文件夹之前，里面有一个“ctrl”文件和一个“lock”子文件夹。还需要设置正确的权限。

已经被我测试过了。

```
define("SCRIPT_ROOT", dirname(__FILE__));

// number of allowed page requests for the user
define("CONTROL_MAX_REQUESTS", 3);
// time interval to start counting page requests (seconds)
define("CONTROL_REQ_TIMEOUT", 2);
// seconds to punish the user who has exceeded in doing requests
define("CONTROL_BAN_TIME", 5);
// writable directory to keep script data 
define("SCRIPT_TMP_DIR", SCRIPT_ROOT."/flood");
// you don't need to edit below this line
define("USER_IP", $_SERVER["REMOTE_ADDR"]);
define("CONTROL_DB", SCRIPT_TMP_DIR."/ctrl");
define("CONTROL_LOCK_DIR", SCRIPT_TMP_DIR."/lock");
define("CONTROL_LOCK_FILE", CONTROL_LOCK_DIR."/".md5(USER_IP));
@mkdir(CONTROL_LOCK_DIR);
@mkdir(SCRIPT_TMP_DIR);

if (file_exists(CONTROL_LOCK_FILE)) {
    if (time()-filemtime(CONTROL_LOCK_FILE) > CONTROL_BAN_TIME) {
        // this user has complete his punishment
        unlink(CONTROL_LOCK_FILE);
    } else {
        // too many requests
        echo "<h1>DENIED</h1>";
        echo "Please try later.";
        touch(CONTROL_LOCK_FILE);
        die;
    }
}

function antiflood_countaccess() {
    // counting requests and last access time
    $control = Array();

    if (file_exists(CONTROL_DB)) {
        $fh = fopen(CONTROL_DB, "r");
        $control = array_merge($control, unserialize(fread($fh, filesize(CONTROL_DB))));
        fclose($fh);
    }

    if (isset($control[USER_IP])) {
        if (time()-$control[USER_IP]["t"] < CONTROL_REQ_TIMEOUT) {
            $control[USER_IP]["c"]++;
        } else {
            $control[USER_IP]["c"] = 1;
        }
    } else {
        $control[USER_IP]["c"] = 1;
    }
    $control[USER_IP]["t"] = time();

    if ($control[USER_IP]["c"] >= CONTROL_MAX_REQUESTS) {
        // this user did too many requests within a very short period of time
        $fh = fopen(CONTROL_LOCK_FILE, "w");
        fwrite($fh, USER_IP);
        fclose($fh);
    }
    // writing updated control table
    $fh = fopen(CONTROL_DB, "w");
    fwrite($fh, serialize($control));
    fclose($fh);
} 
```

取自这里： [https ://github.com/damog/planetalinux/blob/master/www/principal/suscripcion/lib/antiflood.hack.php](https://github.com/damog/planetalinux/blob/master/www/principal/suscripcion/lib/antiflood.hack.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-16T15:20:11.977

有一个名为[IOSec](http://technoturbine.com/how-to-prevent-dosflood-attacks-using-php/)的脚本，它已经很老了，但它可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-19T16:12:56.170

对于停止 DDos，为该 ip 添加一个空路由，如下所示：

```
route add -host ???.???.???.??? reject 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T16:37:55.357

spudinksi 所说的仍然适用，但这是您要寻找的内容：

```
 <?php

 if (!isset($_SESSION)) {
         session_start();
 }

 if($_SESSION['last_session_request'] > (time() - 5)){
    if(empty($_SESSION['last_request_count'])){
        $_SESSION['last_request_count'] = 1;
    }elseif($_SESSION['last_request_count'] < 5){
        $_SESSION['last_request_count'] = $_SESSION['last_request_count'] + 1;
    }elseif($_SESSION['last_request_count'] >= 5){
            header("location: http://www.example.com/403.html");
            exit;
         }
 }else{
    $_SESSION['last_request_count'] = 1;
 }

 $_SESSION['last_session_request'] = time();

 ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-23T15:44:28.087

只需更改`>`为`<`：

```
<?php        

if (!isset($_SESSION)) {
        session_start();
}
// anti flood protection
if($_SESSION['last_session_request'] < time() - 2){
        // users will be redirected to this page if it makes requests faster than 2 seconds
        header("location: http://www.example.com/403.html");
        exit;
}
$_SESSION['last_session_request'] = time();
?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-10T16:38:03.437

这将计算页面重新加载并在 3 秒后节省时间..如果它给新手带来问题或容易绕过然后发表评论..

```
if(empty($_SESSION['AFsys_time']) || $_SESSION['AFsys_time'] == '0') {
    $tGoal = time() + 3; // Pluss Seconds
    $_SESSION['AFsys_time'] = $tGoal;
}

if(empty($_SESSION['AFsys_pReloads']) || $_SESSION['AFsys_pReloads'] == 0 ) { $_SESSION['AFsys_pReloads'] = 1; } else { $_SESSION['AFsys_pReloads']++; };

if($_SESSION['AFsys_time'] < time()){
    $_SESSION['AFsys_time'] = 0; // Session Reset
    $_SESSION['AFsys_pReloads'] = 0; // Session Reset
}

if($_SESSION['AFsys_pReloads'] > '5' && $_SESSION['AFsys_time'] > time()){
    $_SESSION['AFsys_time'] = 0; // Session Reset
    $_SESSION['AFsys_pReloads'] = 0; // Session Reset
    header("location: http://www.example.com/403.html");
    exit; 
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-11-14T18:43:27.567

此代码不适用于这样的 curl 循环。session 将在每个 curl exec 上再次创建；

```
for ($i=0;$i<999999999999999;$i++){

    /**/
    $c=curl_init();
    curl_setopt($c,CURLOPT_URL,"URL YOU WANT ATTACK");
    curl_setopt($c,CURLOPT_DNS_USE_GLOBAL_CACHE,TRUE);//dns
    curl_setopt($c,CURLOPT_HEADER,0);//get the header
    curl_setopt($c,CURLOPT_CONNECTTIMEOUT ,10);//get the header
    curl_setopt($c,CURLOPT_NOBODY,0);//and *only* get the header
    curl_setopt($c,CURLOPT_RETURNTRANSFER,1);//get the response as a string from curl_exec(), rather than echoing it
    curl_setopt($c,CURLOPT_FRESH_CONNECT,1);//don't use a cached version of the url
    curl_setopt($c, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:11.0) Gecko Firefox/11.0');
    curl_setopt($c, CURLOPT_HTTPHEADER, array('Content-type: application/x-www-form-urlencoded;charset=UTF-8' ));

    echo "\n $i";

} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-07-11T17:16:54.000

会话可能不起作用，因为我们还没有会话 cookie。

我推荐这样的

```
$load = sys_getloadavg();
if ($load[0] > 20) {
    header('HTTP/1.1 503 Too busy, try again later');
    die('Server too busy. Please try again later.');
} 
```

或者你可以

```
shell_exec('/sbin/iptables -I INPUT -j DROP -s ' . $ip); 
```

用于加药 $ip

# python - 如何测试该变量不等于多个事物？

> ID：12553609
> 
> 赞同：19
> 
> 时间：2012-09-23T15:30:57.557
> 
> 标签：python

这是我的一段代码：

```
choice = ""

while choice != "1" and choice != "2" and choice != "3": 
    choice = raw_input("pick 1, 2 or 3")

    if choice == "1":
        print "1 it is!"

    elif choice == "2":
        print "2 it is!"

    elif choice == "3":
        print "3 it is!"

    else:
        print "You should choose 1, 2 or 3" 
```

虽然它有效，但我觉得它真的很笨拙，特别是 while 子句。如果我有更多可接受的选择怎么办？有没有更好的方法来制定条款？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-23T15:34:16.740

`while`通过检查元素是否在这样的选择列表中，可以稍微重构该位以使其更清洁

```
while choice not in [1, 2, 3]: 
```

这是检查选择的值是否不是该列表中的元素

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-23T15:33:01.730

您可以将逻辑推入循环，并替换

```
while choice != "1" and choice != "2" and choice != "3": 
```

和

```
while True: 
```

然后初始行`choice = ""`是不必要的。然后，在每个分支中，一旦你完成了你想做的事情，你就可以`break`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-23T15:44:12.423

我认为这样的事情会更好

```
possilities = {"1":"1 it is!", "2":"2 it is!", "3":"3 it is!"} 
choice = ""

while True:
    choice = raw_input("pick 1, 2 or 3")
    if choice in possilities:
        print possilities[choice]
        break
    else:
        print "You should use 1, 2 or 3" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T15:36:26.407

您可以使用字典将 1 映射到当 1 是值时要执行的代码，依此类推...这样您就可以摆脱 ifs 并且您的代码将来可以通过简单地更新字典来支持其他值. 至于 while 中的条件，您只需检查键是否在字典中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-23T15:49:20.030

我建议有[一个函数](http://docs.python.org/tutorial/controlflow.html#defining-functions)，它只循环直到选择了一个有效的选项，然后返回选择的值。

这意味着您的其余代码不打算在 内部`while`，保持一切都很好和平坦（[“平坦比嵌套更好”](http://www.python.org/dev/peps/pep-0020/)）

```
def get_choice(options):
    """Given a list of options, makes the user select one.

    The options must be strings, or they will never match (because raw_input returns a string)

    >>> yn_choices = ['y', 'n']
    >>> a = get_choice(options = yn_choices)
    """
    prompt_string = "Pick " + ", ".join(options)
    while True:
        choice = raw_input(prompt_string)
        if choice in options:
            return choice
        else:
            print "Invalid choice"

# Prompt user for selection
choice = get_choice(["1", "2", "3"])

# Do stuff with choice...
if choice == "1":
    print "1 it is!"

elif choice == "2":
    print "2 it is!"

elif choice == "3":
    print "3 it is!"

else:
    print "You should choose 1, 2 or 3" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-23T15:35:33.673

我认为您可以使用包含所有可能选择的集合，并使用“in”表达式来判断 while 部分。

至于 if-else 部分， print (choice, " it is!") 就可以了。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-23T15:34:38.053

`while str(choice) not in "123"` ......

# php - 从mysql数据库中的所有表中删除一条记录

> ID：12553615
> 
> 赞同：0
> 
> 时间：2012-09-23T15:31:48.693
> 
> 标签：php, mysql

我不是mysql专家。我有一个包含 500 多个表的数据库，我想知道是否有办法在每个表中搜索某个记录并从表中删除它（如果存在）。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:37:16.090

查看您可以创建的以下存储过程：

```
CREATE PROCEDURE procDeleteAllTables()

BEGIN
        DECLARE table_name VARCHAR(255);
        DECLARE end_of_tables INT DEFAULT 0;

        DECLARE cur CURSOR FOR 
            SELECT t.table_name 
            FROM information_schema.tables t 
            WHERE t.table_schema = DATABASE() AND t.table_type='BASE TABLE';
        DECLARE CONTINUE HANDLER FOR NOT FOUND SET end_of_tables = 1;

        SET FOREIGN_KEY_CHECKS = 0;
        OPEN cur;

        tables_loop: LOOP
            FETCH cur INTO table_name;

            IF end_of_tables = 1 THEN
                LEAVE tables_loop;
            END IF;

            SET @s =  CONCAT('DELETE FROM ' , table_name);
            PREPARE stmt FROM @s;
            EXECUTE stmt;

        END LOOP;

        CLOSE cur;
        SET FOREIGN_KEY_CHECKS = 1;
    END 
```

如果您需要为特定记录插入检查，可以通过以下方式添加 WHERE 子句：

```
SET @s =  CONCAT(CONCAT('DELETE FROM ' , table_name), ' WHERE somefield = 1'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T15:40:09.493

类似的东西。根据您的需要进行更改。

```
 $tables = mysql_query('show tables', $conn);
         foreach( $acc_array as $acc)
           foreach( $tables as $v) {
           $result1 = mysql_fetch_assoc(mysql_query("select account_num from $v where account_num = '$acc'" , $conn));
          if( !empty($result1) )
            $result2 = mysql_query("delete from $v where account_num = '$acc'" , $conn);
         } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T17:24:28.573

```
$sql = "SHOW TABLES FROM dbname";
    $result = mysql_query($sql);

    if (!$result) {
        echo "DB Error, could not list tables\n";
        echo 'MySQL Error: ' . mysql_error();
        exit;
    }

    while ($row = mysql_fetch_row($result)) {

        echo "Table: {$row[0]}\n";
        $tablename=$row[0];
        $sql="DELETE FROM $tablename WHERE name='ddddd'";
        echo "Table: {$sql}\n";
        $res=mysql_query($sql);

    } 
```

# sql-server-2005 - 将比较运算符传递给 WHERE 子句

> ID：12553616
> 
> 赞同：3
> 
> 时间：2012-09-23T15:31:56.947
> 
> 标签：sql-server-2005, case, where-clause

我想使用一个包含比较运算符（如`'='`, ）的参数`'>'`，`'>='`并将其用于带有“case when then”或 if 语句的 where 子句中，如下所示：

```
WHERE  
case @Operator
 when '=' then (@Amount is null) or (@Amount = 0 ) or (Amount= @Amount)  
 when '>' then (@Amount is null) or (@Amount = 0 ) or (Amount> @Amount)  
 when '>=' then (@Amount is null) or (@Amount = 0 ) or (Amount>= @Amount)      
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T16:04:47.803

我相信这会成功：

```
WHERE 
  @Amount IS NULL
  OR @Amount = 0
  OR Amount =  CASE @Operator WHEN '='  THEN @Amount END
  OR Amount >  CASE @Operator WHEN '>'  THEN @Amount END
  OR Amount >= CASE @Operator WHEN '>=' THEN @Amount END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:28:45.187

```
where isnull(@Amount, 0) = 0
   or ( Amount = @Amount and @Operator = '=')
   or ( Amount > @Amount and @Operator = '>')
   or ( Amount >= @Amount and @Operator = '>=') 
```

# angularjs - 如何在 AngularJS 中设置动态模型名称？

> ID：12553617
> 
> 赞同：91
> 
> 时间：2012-09-23T15:32:10.867
> 
> 标签：angularjs

我想用一些动态问题填充一个表单（[在这里](http://jsfiddle.net/2AwLM/19/)小提琴）：

```
<div ng-app ng-controller="QuestionController">
    <ul ng-repeat="question in Questions">
        <li>
            <div>{{question.Text}}</div>
            <select ng-model="Answers['{{question.Name}}']" ng-options="option for option in question.Options">
            </select>
        </li>
    </ul>

    <a ng-click="ShowAnswers()">Submit</a>
</div>
​
function QuestionController($scope) {
    $scope.Answers = {};

    $scope.Questions = [
    {
        "Text": "Gender?",
        "Name": "GenderQuestion",
        "Options": ["Male", "Female"]},
    {
        "Text": "Favorite color?",
        "Name": "ColorQuestion",
        "Options": ["Red", "Blue", "Green"]}
    ];

    $scope.ShowAnswers = function()
    {
        alert($scope.Answers["GenderQuestion"]);
        alert($scope.Answers["{{question.Name}}"]);
    };
}​ 
```

一切正常，除了模型实际上是 Answers["{{question.Name}}"]，而不是评估的 Answers["GenderQuestion"]。如何动态设置该模型名称？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-09-23T21:55:17.787

[http://jsfiddle.net/DrQ77/](http://jsfiddle.net/DrQ77/)

您可以简单地将 javascript 表达式放入`ng-model`.

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-08-19T13:03:51.253

您可以使用类似的东西`scopeValue[field]`，但如果您的字段在另一个对象中，您将需要另一个解决方案。

要解决各种情况，您可以使用此指令：

```
this.app.directive('dynamicModel', ['$compile', '$parse', function ($compile, $parse) {
    return {
        restrict: 'A',
        terminal: true,
        priority: 100000,
        link: function (scope, elem) {
            var name = $parse(elem.attr('dynamic-model'))(scope);
            elem.removeAttr('dynamic-model');
            elem.attr('ng-model', name);
            $compile(elem)(scope);
        }
    };
}]); 
```

html示例：

```
<input dynamic-model="'scopeValue.' + field" type="text"> 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-12T18:43:22.083

我最终做的是这样的：

在控制器中：

```
link: function($scope, $element, $attr) {
  $scope.scope = $scope;  // or $scope.$parent, as needed
  $scope.field = $attr.field = '_suffix';
  $scope.subfield = $attr.sub_node;
  ... 
```

所以在模板中我可以使用完全动态的名称，而不仅仅是在某个硬编码元素下（比如在你的“答案”案例中）：

```
<textarea ng-model="scope[field][subfield]"></textarea> 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-28T23:40:19.703

为了使@abourget 提供的答案更完整，以下代码行中的 scopeValue[field] 的值可能是未定义的。这会在设置子字段时导致错误：

```
<textarea ng-model="scopeValue[field][subfield]"></textarea> 
```

解决此问题的一种方法是添加属性 ng-focus="nullSafe(field)"，因此您的代码如下所示：

```
<textarea ng-focus="nullSafe(field)" ng-model="scopeValue[field][subfield]"></textarea> 
```

然后在控制器中定义 nullSafe(field)，如下所示：

```
$scope.nullSafe = function ( field ) {
  if ( !$scope.scopeValue[field] ) {
    $scope.scopeValue[field] = {};
  }
}; 
```

这将保证在将任何值设置为 scopeValue[field][subfield] 之前没有未定义 scopeValue[field]。

注意：您不能使用 ng-change="nullSafe(field)" 来获得相同的结果，因为 ng-change 发生在 ng-model 更改之后，如果 scopeValue[field] 未定义，则会引发错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-13T00:00:11.827

或者你可以使用

```
<select [(ngModel)]="Answers[''+question.Name+'']" ng-options="option for option in question.Options">
        </select> 
```

# c# - 从 ICollectionView 获取结果视图？

> ID：12553618
> 
> 赞同：2
> 
> 时间：2012-09-23T15:32:24.890
> 
> 标签：c#, wpf

是否可以从 ICollectionView 获取“结果视图”？如果是这样，怎么做？

我不想要“SourceCollection”，而是“结果视图”。

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-03T15:06:47.593

有几种方法可以以编程方式评估过滤结果：

1.  检查是否有任何结果：

    ```
    yourCollectionViewSource.View.IsEmpty
    ```

2.  获取过滤结果的列表：

    ```
    yourCollectionViewSource.View.OfType().ToList()
    ```

3.  计算结果中有多少项目：

    ```
    yourCollectionViewSource.View.OfType().Count()
    ```

*.OfType* 是一种 Linq 扩展方法，因此请务必将 Link 添加到您的 Using 语句中。

获得 OfType 结果后，您可以使用 Linq 执行任何其他查询。

# ios - 从应用程序委托加载 UIStoryboard

> ID：12553621
> 
> 赞同：14
> 
> 时间：2012-09-23T15:32:43.247
> 
> 标签：ios, objective-c, uistoryboard

我正在尝试以这种方式从应用程序委托 .m 加载 UIStoryboard：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{    
    UIStoryboard *storybord = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:[NSBundle mainBundle]];
    UIViewController *vc =[storybord instantiateInitialViewController];
    [self.window addSubview:vc.view];

    return YES;
} 
```

这段代码有什么问题？？任何想法？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-23T16:02:57.587

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

   UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:[NSBundle mainBundle]];
   UIViewController *vc =[storyboard instantiateInitialViewController];

   // Set root view controller and make windows visible
   self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
   self.window.rootViewController = vc;
   [self.window makeKeyAndVisible];

   return YES;
} 
```

尝试这个。我认为缺少设置根视图控制器并使窗口可见。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-08-16T09:30:40.223

对于 Swift 4.2 及更高版本。

```
func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {
    window = UIWindow(frame: UIScreen.main.bounds)
    let storyboard = UIStoryboard(name: "YourStoryboardName", bundle: Bundle.main)
    let viewController = storyboard.instantiateInitialViewController()
    window?.rootViewController = viewController
    window?.makeKeyAndVisible()
    return true
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T04:06:06.757

从您的代码中，我看到 UIWindow 对象未初始化。

如果您没有在`App-Info.plist`.

此外，使 Window 键可见。请更改您的代码，如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window=[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    UIStoryboard *storybord = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:[NSBundle mainBundle]];
    UIViewController *vc =[storybord instantiateInitialViewController];
    [self.window addSubview:vc.view];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-23T15:35:40.620

现在这种方式行不通了。

在构建设置 plist 中，为 Main Storyboard（或类似的东西）添加了一个条目。您在 applicationDidFinishLoading 中需要的只是返回 YES；

如果您开始一个新项目并勾选了情节提要，您可以看到确切的条目。

当它在那里时，您不需要加载初始视图，因为它从情节提要文件中获取它（是初始视图标志）。

高温高压

# java - JAVA：从带有文件 ID 的 http url 获取文件名

> ID：12553625
> 
> 赞同：0
> 
> 时间：2012-09-23T15:33:01.923
> 
> 标签：java, php

要获得与文件的直接链接（使用**NAME**和**EXTENSION**）的**HTTP**链接，可以使用****`http://website.com/file.avi`****

 ****```
URL FileLocation = new URL("string");
String Name = FileLocation.getFile(); 
```

这将返回**NAME**与**EXTENSION** (/filename.ext)

但是如何获取具有 php ID的**URL的文件名，例如**

```
http:///website.com/download.php?d=9594 
```

我只想在 JAVA 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T15:40:31.247

您想`Content-Disposition`在 HTTP 响应的标头中查找字段，例如

```
Content-Disposition: attachment; filename="fname.ext" 
```

由于它位于 HTTP 标头中，因此您需要先开始下载消息，然后才能获取文件名。这是一个[如何使用 URLConnection 以及如何获取标头字段的示例](http://www.exampledepot.com/egs/java.net/GetHeaders.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T15:40:49.803

```
 File file=new File("C:/work/chandan/deepak.txt");
  URL url=null;
 ....
 ....

url=file.toURL(); //file:/C:/work/chandan/deepak.txt
System.out.println("The url is" + url); 
```****

# php - 正则表达式替换单词

> ID：12553626
> 
> 赞同：1
> 
> 时间：2012-09-23T15:33:10.153
> 
> 标签：php, regex, replace, expression

我有一个`$str`这样定义的字符串：

> `$str = "Horosho byt' tihoney 23 Sen 2012 14:00 | 20:20 | 00:30 24 Sen 2012 09:30 | 14:00 Obitel' zla: Vozmezdie 3D 23 Sen 2012 16:10 | 20:25 | 22:25 Osobo opasny 23 Sen 2012 18:00 24 Sen 2012 11:30 | 18:00 25 Sen 2012 11:30 | 18:00 26 Sen 2012 11:30 | 18:00 Patrul' 23 Sen 2012 20:10 | 22:20 24 Sen 2012 11:50 | 20:10"`

我想用`<br>`标签包围单词；例如，`Horosho byt' tihoney`会变成`<br>Horosho byt' tihoney<br>`，并且`Obitel' zla: Vozmezdie 3D`会变成`<br>Obitel' zla: Vozmezdie 3D<br>`。

到目前为止我所拥有的：

```
preg_replace("/(?<=\s)([\p{L}*?]{3,})(?=\s[0-9]{2}\s)/u", "<br>$1<br>", $str); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T17:55:27.963

Alright, so here is my solution. It's not exactly what you specified, but it solves your problem. The dates and times seem much more regular than the names (because the latter might contain digits, apostrophes and colons... and who know what more). So I figured, enclosing the dates and times in `<br/>` would be just as good (of course you have to add another `<br/>` right at the start and remove one from the end, but that's less of a problem, I guess. So here is the regex that finds strings of dates and times and encloses them (and their surrounding spaces) in `<br/>`:

```
$newStr = preg_replace("/(\s\d{1,2}\s[A-Z][a-z][a-z]\s\d{4}|\s\d{2}:\d{2}|\s\|)+\s?/", "<br/>$0<br/>", $str); 
```

I assumed that the day of your dates might have 1 or 2 digits (couldn't tell from the example string) and that all your months are 1 upper-case and 2 lower-case characters.

**EDIT:** I added a `?` at the end to make it work with the last time in the string.

# responsive-design - 具有响应式设计的 Foundation Orbit 滑块

> ID：12553628
> 
> 赞同：1
> 
> 时间：2012-09-23T15:33:35.223
> 
> 标签：responsive-design, zurb-foundation, orbit

我已经开始使用 zurb 的 Foundation 3，但我的滑块在左侧有带有文本的幻灯片，在右侧有一个图像（而不仅仅是图像和顶部的标签）。

当我减小浏览器窗口的大小时，除了滑块的高度之外，它都适合。

我们需要的是在小型浏览器上使滑块更高（它需要是相同的滑块 - 不是替代品）。

我知道流体滑块中有流体选项，我怀疑如果我改变它，就足以解决这个问题。

我该如何做到这一点？

以下是我的滑块 HTML 代码：

```
<div class="row">
  <div class="twelve columns">
    <div id="slider">
        <!-- *** This is the slider that needs to fit smaller browsers ***-->
        <div class="row" style="background-color:White;">
            <div class="six columns">
                <h2>Title</h2>
                <div class="summary">
                    This is the summary is the summary is the summary is the summary is the summary is the summary is the summary.
                    <a href="javascript:void(0);">Learn more</a>
                </div>
                <div class="some-thumbnails">
                    <img src="http://placehold.it/100x100&text=[thumbnail]" />
                    <img src="http://placehold.it/100x100&text=[thumbnail]" />
                    <img src="http://placehold.it/100x100&text=[thumbnail]" />
                </div>
            </div>
            <div class="six columns">
                <img src="http://placehold.it/550x250&text=[img 1]" />
            </div>
        </div>
        <img src="http://placehold.it/1000x400&text=[img 1]" />
    </div>
</div>

<hr /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:52:03.123

轨道由轨道插件使用的某个插件生成的图像控制。我所做的是更改插件以获取最高幻灯片的左右部分的高度（更改为手机视图时），然后将 data-src 设置为“holder.js/[width]x[height]”并调用 Holder.run() 方法。

# knockout.js - 使用 Cassette V2 编译模板 jsRender 和 KnockoutJS 模板

> ID：12553631
> 
> 赞同：3
> 
> 时间：2012-09-23T15:34:10.703
> 
> 标签：knockout.js, asp.net-mvc-4, jsrender, cassette, precompiled-templates

我正在迁移到 Cassette 的第 2 版。

但是我在网上找不到任何东西可以帮助我配置我的 Cassette 以编译 HTML 模板。

## 模板

**一些模板 jQuery 模板为：**

```
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="header" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="header">${header}</h3>
    </div>
    <div class="modal-body">
        {{html body}}
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal">${CancelText}</button>
        <button class="btn ${ClassBtn}">${ConfirText}</button>
    </div>
</div> 
```

> 我会尽快修改它们以使用 jsRender！

**其他作为 KnockoutJS**

```
<div class="span2">
    <div class="data-block">
        <h4 data-bind="text: Total"></h4>
        <h6>
            <span data-bind="text: Passo.Nome"></span>
            <small class="muted" data-bind="text: Passo.Responsavel">Riderman de Sousa</small>
        </h6>
    </div>
</div> 
```

## `IConfiguration<BundleCollection>`班级

```
bundles.AddPerSubDirectory<HtmlTemplateBundle>("HtmlTemplates", b => b.Pipeline = ??? ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:12:22.250

我实际上找到了答案，v2 一切都是分开的。因此，如果您使用 Less，则必须获取 Cassette.Less nuget 包。与 tmpl 项目相同。

1）获取Nuget包：[http ://nuget.org/packages/Cassette.KnockoutJQueryTmpl/2.0.0](http://nuget.org/packages/Cassette.KnockoutJQueryTmpl/2.0.0)

2）配置：

```
public class CassetteConfiguration : IConfiguration<BundleCollection>
{
    readonly KnockoutJQueryTmplPipeline pipeline;

    public CassetteConfiguration(KnockoutJQueryTmplPipeline pipeline)
    {
        this.pipeline = pipeline;
    }

    public void Configure(BundleCollection bundles)
    {
        bundles.Add<StylesheetBundle>("Content", new FileSearch { Pattern = "*.css;*.less", SearchOption = System.IO.SearchOption.AllDirectories });
        bundles.Add<ScriptBundle>("Scripts");
        bundles.AddPerIndividualFile<ScriptBundle>("Content/js");

        bundles.Add<HtmlTemplateBundle>("HtmlTemplates", new FileSearch { Pattern = "*.htm" }, b => b.Pipeline = pipeline);
    }
} 
```

3 ) 在您的视图中引用捆绑包

```
Bundles.Reference("HtmlTemplates"); 
```

# java - BufferedImage 用不同的颜色调整大小

> ID：12553634
> 
> 赞同：0
> 
> 时间：2012-09-23T15:34:22.637
> 
> 标签：java, image-resizing, argb

我正在使用 Apache Sanselan 调整许多 jpeg 图像的大小，它也处理 CMYK 颜色。我在尝试转换具有 alpha 通道的 jpeg 图像时遇到问题......当这样做时，结果是一个具有不同颜色的图像，我猜 java 以某种方式将这些类型的图像处理为不同的颜色格式。正如我所说，RGB 调整大小和 CMYK 一样好。ARGB 图像呈现出不同的颜色。

一个例子： ![调整大小之前](../Images/87a5a78e536770f52cc6705aeef0f29f.png)

![调整大小后](../Images/c7aefc4723539b537df90b6b6cbcdd83.png)

有什么建议么？我可以强制以某种方式忽略 alpha 通道并将图像作为 RGB 图像处理吗？或将其转换为 RGB 图像而不会丢失真实颜色？

处理此图像的代码是：

```
 ImageInputStream stream = ImageIO.createImageInputStream(file);
    Iterator<ImageReader> iter = ImageIO.getImageReaders(stream);
    while (iter.hasNext()) {
        ImageReader reader = iter.next();
        reader.setInput(stream);

        BufferedImage image = null;
        ICC_Profile profile = null;
        try {
            image = reader.read(0);

        } catch (IIOException e) {
            ... (CMYK conversion if needed)
        }

        return image;
    }
    return null; 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:21:54.983

我在这里找到了一个很好的解决方案（第一个解决方案效果很好）：

[使用 ImageIO.write jpg 文件的问题](https://stackoverflow.com/questions/4386446/problem-using-imageio-write-jpg-file)

**编辑：** 有一个支持 CMYK 处理的新开源库。您需要做的就是将依赖项添加到您的项目中，一个新的阅读器将被添加到阅读器列表中（而已知的 JPEGImageReader 无法处理 CMYK）。您可能想要遍历这些阅读器并使用第一个不会引发异常的阅读器来阅读图像。这个包是一个候选版本，但我正在使用它，它解决了一个我们很难处理的大问题。

[http://mvnrepository.com/artifact/com.twelvemonkeys.imageio/imageio-jpeg/3.0-rc5](http://mvnrepository.com/artifact/com.twelvemonkeys.imageio/imageio-jpeg/3.0-rc5)

您可以通过这种方式进行迭代以获取 BufferedImage，在您获得之后，剩下的就很容易了（您可以使用任何现有的图像转换包将其保存为另一种格式）：

```
try (ImageInputStream input = ImageIO.createImageInputStream(source)) {

        // Find potential readers
        Iterator<ImageReader> readers = ImageIO.getImageReaders(input);

        // For each reader: try to read
        while (readers != null && readers.hasNext()) {
            ImageReader reader = readers.next();
            try {
                reader.setInput(input);
                BufferedImage image = reader.read(0);
                return image;
            } catch (IIOException e) {
                // Try next reader, ignore.
            } catch (Exception e) {
                // Unexpected exception. do not continue
                throw e;
            } finally {
                // Close reader resources
                reader.dispose();
            }
        }

        // Couldn't resize with any of the readers
        throw new IIOException("Unable to resize image");
    } 
```

# php - 如果在主页上，则尝试切换标题图像

> ID：12553636
> 
> 赞同：0
> 
> 时间：2012-09-23T15:34:37.647
> 
> 标签：php, html, wordpress

PHP 新手，想知道这段代码有什么问题，因为它肯定不会切换标题 img。

这是过去的样子：

```
<a href="http://www.finegra.in"><img id="logo" alt="fine grain Logo"    src="http://www.finegra.in/wp-content/uploads/2012/04/fineGRAINlogoGOOD-WEB.png"> 
```

这就是我将其更改为：

```
<?php if (is_home()) { ?> <a href="http://www.finegra.in"><img id="logo" alt="fine grain Logo"  src="http://www.finegra.in/wp-content/uploads/2012/09/finegrain-logo-sept.png">
</a> 
<?php }
else { ?>
<a href="http://www.finegra.in"><img id="logo" alt="fine grain Logo"    src="http://www.finegra.in/wp-content/uploads/2012/04/fineGRAINlogoGOOD-WEB.png">
</a>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T15:55:07.420

尝试这样的事情：

```
<?php if (is_home()) : ?> <a href="http://www.finegra.in"><img id="logo" alt="fine grain Logo"  src="http://www.finegra.in/wp-content/uploads/2012/09/finegrain-logo-sept.png">
</a> 
<?php else : ?>
<a href="http://www.finegra.in"><img id="logo" alt="fine grain Logo"    src="http://www.finegra.in/wp-content/uploads/2012/04/fineGRAINlogoGOOD-WEB.png">
</a>
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:43:08.377

我查看了wordpress codex，几个版本前他们切换了功能，因此如果您使用静态页面作为主页，is_home() 指的是您的帖子页面，如果您想要静态页面，则必须使用 is_front_page()主页。

# entity-framework - EF CodeFirst：获取 DbContext 的所有 POCO 类型

> ID：12553639
> 
> 赞同：7
> 
> 时间：2012-09-23T15:34:53.767
> 
> 标签：entity-framework, ef-code-first, poco, dbcontext

有没有办法从指定的 DbContext 实例中获取 POCO 的类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T15:48:59.613

您需要访问[MetadataWorkspace](http://msdn.microsoft.com/en-us/library/system.data.metadata.edm.metadataworkspace.aspx)

```
public class MyContext : DbContext
{

    public void Test()
    {            
        var objectContext = ((IObjectContextAdapter)this).ObjectContext;

        var mdw = objectContext.MetadataWorkspace;

        var items = mdw.GetItems<EntityType>(DataSpace.CSpace);
        foreach (var i in items)
        {
            Console.WriteLine("Class Name: {0}", i.Name);
        }
 } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-06-23T09:52:15.110

不幸的是，我无法编辑接受的答案 - 您只需要更改使用的数据空间，如下所示

```
var items = mdw.GetItems<EntityType>(DataSpace.OSpace); 
```

获取您的 POCO 类而不是 EF 代理。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-02T07:53:44.147

@Lei Yang：您可以使用它来将所有类型放入列表中。

```
var objectContext = ((IObjectContextAdapter) dbContext).ObjectContext;
var mdw = objectContext.MetadataWorkspace;
var items = mdw.GetItems<EntityType>(DataSpace.CSpace);

var dbContextAssembly = dbContext.GetType().Assembly;

var entityTypes = new List<Type>();
foreach (var i in items) {
    entityTypes.Add(dbContextAssembly.GetType(i.FullName));
} 
```

# c++ - C++11 类型推断期间管理优先级的规则是什么？

> ID：12553646
> 
> 赞同：3
> 
> 时间：2012-09-23T15:35:54.930
> 
> 标签：c++, c++11, type-inference

控制浮点/双精度类型的 C++11 类型推断中的优先级的规则是什么，例如，当从包含多种类型的表达式进行推断时，如下所示：

```
auto var = float(1) * double(1); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T15:38:40.287

结果将是一个`double`. 这被称为`floating point promotion`。

从标准来看，ISO **14882:2011** *4.6 浮点提升*：

> 1 float 类型的纯右值可以转换为 double 类型的纯右值。值不变。
> 2 这种转换称为浮点提升。

* * *

正如@sftrabbit 所指出的，在*5\. Expressions*中，新标准的第 9 段：

> 许多期望算术或枚举类型的操作数的二元运算符会以类似的方式导致转换和产生结果类型。目的是产生一个通用类型，这也是结果的类型。
> 
> 这种模式称为通常的算术转换，其定义如下：
> 
> — 如果任一操作数是范围枚举类型（7.2），则不执行任何转换；如果另一个操作数的类型不同，则表达式格式错误。
> — 如果任一操作数是 long double 类型，则另一个应转换为 long double。
> — 否则，如果任一操作数为双精度，则另一个应转换为双精度。
> — 否则，如果任一操作数为浮点数，则另一个应转换为浮点数。
> — 否则，应在两个操作数上执行积分提升 (4.5)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T15:38:53.927

类型推断不会添加任何新内容，“=”右侧的表达式一如既往地被评估，然后它的类型被用于“自动”。

当您查看 'auto var' 和 'auto & var' 之间的差异以及类似内容时，会稍微有趣一些，但这不是您的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T15:39:03.300

答案取决于所讨论的类型。在您的具体示例中，标准保证`sizeof(double) >= sizeof(float)`因此结果类型 of`double * float`将始终为`double`. （这是从 C 语言继承的规则，在许多其他从 C 派生的语言中通常是相同的）

使用`auto`关键字初始化变量时，会确定初始化表达式的结果类型 - 无论是来自函数返回、计算还是 decltype 等。类型取决于您所使用的类型可用的隐式和显式转换重新使用。

# android - Eclipse 中的 Logcat 查看器烦人地闪烁

> ID：12553650
> 
> 赞同：5
> 
> 时间：2012-09-23T15:36:02.513
> 
> 标签：android, eclipse, logcat

在 Eclipse 的 logcat 查看器中，如果将其设置为过滤来自我当前正在调试的应用程序的消息，则列表会令人讨厌地闪烁。我的猜测是每次从我的设备收到日志消息时它都会重新加载列表，即使由于过滤器而没有显示它也是如此。但是，它使阅读日志消息变得非常困难。

有没有办法对付这个错误？或者是否有适用于 Android 的备用 logcat 查看器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T12:46:04.607

当它在我身上闪烁时，我使用 Logcat 窗口上的 Scroll Lock 选项。您可以通过其他按钮（例如保存日志等）在右上角找到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T11:20:47.933

根据您运行的操作系统，有几种选择。

如果您想在 Eclipse 中本地执行此操作，我不确定您想要做什么，但这里有一些在 Eclipse 之外执行此操作的方法。

对于所有操作系统，您可以使用 adb 的内置过滤，但您只能过滤掉进程，例如您的应用程序进程或系统进程（来自 cmd、xterm 等系统终端）

```
adb logcat PackageManager:V com.myapp.package:V *:S 
```

*:S 表示“使所有其他包静音”， :V 表示 Verbose 日志及以上。

对于 Linux、MacOS 等（任何基于 *IX 的操作系统）和安装了 GnuWin32 的 Windows，您可以使用

```
adb logcat | grep "Some search term" 
```

如果您想使用多个搜索词，您可以使用 regexp

```
adb logcat | grep -E "SearchTerm1|SearchTerm2" 
```

如果您想将输出通过管道传输到文件（在 *IX 系统上）但仍想读取输出，您可以使用

```
adb logcat | grep "Some term" | tee myfile.txt 
```

它将同时打印和记录到文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T11:25:28.460

我相信有两个 logcat 查看器，或者至少有一次。新的表现出您所描述的行为，而旧的则按预期工作。我相信这已在更高版本的 Android SDK/Eclipse 工具中得到修复。

# java - 如何全局访问 Java Bean 类？

> ID：12553658
> 
> 赞同：-2
> 
> 时间：2012-09-23T15:37:02.453
> 
> 标签：java

我在解析中有一个java bean类集值。我要求全局访问这个类，但是在使用它的实例静态并在其中赋值时给出空指针异常。代码如下：-

```
private String Responce;
private String Error;
private String Url;
private SIPModle objsip;
private VMModle objvmmodle;
private ArrayList<CustompadModle> objcmodlelist = new ArrayList<CustompadModle>();
private SettingModle objsettingmodle;
private WifiModle objwifimodle;

public String getResponce() {
    return Responce;
}
public void setResponce(String responce) {
    Responce = responce;
}
public String getError() {
    return Error;
}
public void setError(String error) {
    Error = error;
}
public ArrayList<CustompadModle> getObjcmodlelist() {
    return objcmodlelist;
}
public void setObjcmodlelist(CustompadModle objcmodlelist) {
    this.objcmodlelist.add(objcmodlelist);
}
public String getUrl() {
    return Url;
}
public void setUrl(String url) {
    Url = url;
}
public SIPModle getObjsip() {
    return objsip;
}
public void setObjsip(SIPModle objsip) {
    this.objsip = objsip;
}
public VMModle getObjvmmodle() {
    return objvmmodle;
}
public void setObjvmmodle(VMModle objvmmodle) {
    this.objvmmodle = objvmmodle;
}

public SettingModle getObjsettingmodle() {
    return objsettingmodle;
}
public void setObjsettingmodle(SettingModle objsettingmodle) {
    this.objsettingmodle = objsettingmodle;
}
public WifiModle getObjwifimodle() {
    return objwifimodle;
}
public void setObjwifimodle(WifiModle objwifimodle) {
    this.objwifimodle = objwifimodle;
} 
```

我的要求是全局访问这个bean类。任何人都建议我

我在 doinbackground 中获取此对象并在该类的静态对象中分配为：AsyncTask {

```
 ProgressDialog objprogress = new ProgressDialog(
            UserSettingConfiguration.this);
    ApplicationRequestHandler objhandler = new ApplicationRequestHandler();

    @Override
    protected void onPreExecute() {
        this.objprogress.setMessage("Please Wait While Loading...");
        this.objprogress.isShowing();
    }

    @Override
    protected ConfigurationSttingModle doInBackground(String... params) {
        objconfigsetting = objhandler.getConfigurationSetting(params[0],
                params[1], params[2], params[3]);
        return objconfigsetting;
    }

    @Override
    protected void onPostExecute(ConfigurationSttingModle result) {
        if (this.objprogress.isShowing()) {
            this.objprogress.dismiss();
        }

    }
} 
```

并在高级课程中使用；-

```
private static HashMap<String, String> SUMMARIES = new HashMap<String, String>() {

    private static final long serialVersionUID = 3055562364235868653L;

    {
        String server = UserSettingConfiguration.objconfigsetting.getObjsip().getServer();
        String displayname1 = UserSettingConfiguration.objconfigsetting.getObjsip().getUser();
        String user = UserSettingConfiguration.objconfigsetting.getObjsip().getUser();
        String password= UserSettingConfiguration.objconfigsetting.getObjsip().getPassword();

        put(FIELD_DISPLAY_NAME,displayname1);// "90901");
        put(FIELD_CALLER_ID,displayname1); //"90901");
        put(FIELD_SERVER,server);
        put(FIELD_USERNAME,user);
        put(FIELD_AUTH_ID, "207");
        put(FIELD_PASSWORD,password);
        put(FIELD_PROXY, null);
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:56:04.997

我认为单例模式将符合您的要求。

您必须添加以下代码：

```
private static MyJavaBeanClass = null;

public static MyJavaBeanClass getInstance(){
  if(null == instance){
    instance = new MyJavaBeanClass();
  }
  return instance;
} 
```

您必须将 MyJavaBeanClass 更改为您的类的名称，然后您可以像这样在任何地方调用它：

```
MyJavaBeanClass.getInstance().setError("Testing"); 
```

# jquery - Jquery Form 验证不能与 Ajax Submit 一起使用

> ID：12553662
> 
> 赞同：0
> 
> 时间：2012-09-23T15:37:41.420
> 
> 标签：jquery, ajax, forms, jquery-validate, jquery-post

我面临一个问题。
我已经编写了用于验证我的输入字段的代码，对其进行了测试并且工作正常。然后我使用 Jquery Ajax post 实现了表单提交。现在我的问题是，当我单击提交按钮时，我之前实现的验证功能不再被调用。未经验证。它正在提交表单。以下是我的 JS 代码。谢谢您的帮助

```
 $(document).ready(function(){

        $('#incForm input').mouseover(function()
        {
            $(this).popover('show')
        });
        $('#incForm input').mouseout(function() {
        $(this).popover('hide')
    });         

    $('form').validate({
      rules: {
        problemId: {
          required: true
        },
        problemType: {
          required: true
        }
      },

      showErrors: function(errorMap, errorList) {

          $.each( this.successList , function(index, value) {
              $(value).popover('hide');
              $(value).parents('.control-group').removeClass('error');
                  $(value).parents('.control-group').addClass('success');
          });

          $.each( errorList , function(index, value) { 
               var _popover = $(value.element).popover({
                    trigger: 'manual',
                    placement: 'top',
                    content: value.message,
                    template: '<div class="popover"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"><p></p></div></div></div>'
                });

               _popover.data('popover').options.content = value.message;
               $(value.element).parents('.control-group').addClass('error');
               $(value.element).popover('show');

          });
      }

    });         
    //if submit button is clicked
    $('#submit').click(function () {       

        //show the loading sign
        $('#btSpModal').modal('show') ; 
        $('.loading').show();

        //start the ajax
        $.ajax({
            //this is the php file that processes the data and send mail
            url: "/~xrenpill/mvc/process_form.php",

            //GET method is used
            type: "POST",

            data: $("#incForm").serialize(),
            //Do not cache the page
            cache: false,

            //success
            success: function (html) {             
                //if process.php returned 1/true (send mail success)
                $('#btdpModal').modal('hide') ; 
                $('.loading').hide();
                if (html==1) {                 
                    //hide the form
                    $('.form').fadeOut('slow');                

                    //show the success message
                    $('.done').fadeIn('slow');

                //if process.php returned 0/false (send mail failed)
                } else alert('Sorry, unexpected error. Please try again later.');              
            }      
        });

        //cancel the submit button default behaviours
        return false;
    });         
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T15:53:49.480

看看这个在验证插件中使用 Ajax 的例子。检查页面来源，

[http://jquery.bassistance.de/validate/demo/ajaxSubmit-intergration-demo.html](http://jquery.bassistance.de/validate/demo/ajaxSubmit-intergration-demo.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T15:48:40.893

使用这样的东西：

```
$('#submit').click(function (e){   
   e.preventDefault();
   if(!$("form").valid()) return;

   ...
}); 
```

# python - Python：从列表转换为字符串

> ID：12553668
> 
> 赞同：1
> 
> 时间：2012-09-23T15:38:25.187
> 
> 标签：python, string, list

我有一个家庭作业问题。

> “编写一个函数 to_str(a)，它接受一个数组 a，将它的每个元素转换为一个字符串（使用 str(a[i])）并将所有这些字符串附加在一起。”

这就是我所拥有的

```
def to_str(a):
    for i in a: a.append([i])
    return str(a[i]) 
```

我不知道如何使用 str(a[i])，我想知道是否有人可以指出正确的方向

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-23T15:43:53.530

从文档：

> str(对象) -> 字符串
> 
> 返回对象的一个​​很好的字符串表示。如果参数是字符串，则返回值是同一个对象。

所以`str(a[i])`将返回一个字符串表示`a[i]`，即转换`a[i]`为字符串。然后，您需要连接所有`i`.

至于你的代码，我有以下评论：

*   `i`是 的一个元素`a`，而不是您可能想的索引；
*   `a`您正在附加to的元素`a`（恐怕是无休止地）；
*   `a[i]`可能会导致异常，因为就像我说的，`i`是一个元素，而不是一个索引；
*   您需要返回一系列字符串，而不是来自一个元素的字符串。

此外，如果 using`str(a[i])`不是严格强制的，我建议将其作为 unpythonic 跳过。为此，您根本不需要索引。例子：

```
''.join(str(element) for element in a) 
```

或者

```
''.join(map(str, a)) 
```

会返回你需要的。在这两种情况下`str`都适用于 的所有元素`a`。

不使用索引的最容易理解（“初学者”）的方法是

```
s = ''
for element in a:
    s += str(element)
return s 
```

它的效率有点低，尽管它有效地做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T15:51:15.770

将每个元素转换为字符串最容易使用列表推导：

```
[ str(i) for i in a ]
# equivalent to
[ str(a[i]) for i in range(len(a)) ]
# equivalent to
map(str, a) # most concise, use if you want to feel incredibly clever... 
```

所以你可以编写函数：

```
def to_str2(a):
    ''.join([str(i) for i in a]) # concatenates the list as a list of strings 
```

.

您的代码*几乎*可以做到这一点：

```
def to_str(a):
    new_a = [] # rather than use the same a!
    for i in a:
        new_a.append(str(i)) #convert i to string before appending
    return new_a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T15:42:09.833

满足所有任务标准的代码类似于：

```
def to_str(a):
    return reduce(lambda x, y: x + str(y), a, '') 
```

它完全按照上面提到的方式做事：首先将它们转换为字符串，然后添加到由已经处理的元素组成的字符串（一开始只是空字符串）。

**编辑**：更清晰（并受 Python 3 支持）的方法是使用显式循环元素。它的作用完全相同，同时阐明了 reduce() 的工作原理：

```
def to_str(a):
    result = ''  # third argument of reduce()
    for item in a:
        result += str(item)  # does what reduce() lambda argument was doing
    return result 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-23T15:49:15.597

最简单的方法是：

```
[str(i) for i in a] 
```

如果你想要一个功能：

```
def to_str(a):
    return [str(i) for i in a] 
```

# python - 从 Django 中设置的 HTML 字段中获取输入名称和值的列表

> ID：12553671
> 
> 赞同：0
> 
> 时间：2012-09-23T15:38:50.250
> 
> 标签：python, html, django, web-applications

使用 Django，我正在寻找一种从模板 HTML 中获取 type=hidden 的输入值和名称的好方法。我了解 request.POST.getlist 方法将返回具有相同名称值的所有输入的列表。但我实际上需要获取所有名称和值。IE，

HTML 代码：

```
 <fieldset class="submit">
    <input type="hidden" name="testName" value="0" id="processed-input" />
    <input type="submit" name="submit" value="Rotate" class="submit" />
</fieldset> 
```

我需要获取相关名称和值的列表。对于这种情况，testName:0。

任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T15:40:10.580

这`request.POST`就是：所有名称到值的映射。

# python - Python/PyQT 检查 Aero 是否启用

> ID：12553675
> 
> 赞同：0
> 
> 时间：2012-09-23T15:39:38.130
> 
> 标签：python, winapi, pyqt4, aero

正如这里所说的[Qt: Erase background (Windows Aero Glass)](https://stackoverflow.com/questions/453069/qt-erase-background-windows-aero-glass)，我`WA_TranslucentBackground`曾经在我的 QMainWindow 上有一个玻璃背景：在 Windows 7（启用 Aero）上它运行良好，但在 Linux（KDE4）上我得到一个黑色背景，我还没有在禁用 Aero 的 PC 上尝试过，或者可能比 Vista 更老。

有没有办法检查 Aero 是否可用和启用，所以我只能在启用时设置 WA_TranslucentBackground，并在没有 Aero 的情况下在 Linux 和 Windows 上保持标准背景？

似乎 Windows API`DwmIsCompositionEnabled`可以完成这项工作，但我找不到如何从 Python 调用它，同时考虑到它可能不存在于 Vista 之前的版本中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T16:59:37.377

您可以尝试以下方法。它应该处理在非 Windows 平台上运行，以及缺少该`DwmIsCompositionEnabled`功能：

```
import ctypes

def is_aero_enabled():
    try:
        b = ctypes.c_bool()
        retcode = ctypes.windll.dwmapi.DwmIsCompositionEnabled(ctypes.byref(b))
        return (retcode == 0 and b.value)
    except AttributeError:
        # No windll, no dwmapi or no DwmIsCompositionEnabled function.
        return False 
```

在我的 Windows 7 机器上，这将返回`True`.

# java - 即使会话设置为 false，也会创建 JSession id

> ID：12553677
> 
> 赞同：0
> 
> 时间：2012-09-23T15:40:06.033
> 
> 标签：java, jsp

我知道jsp会自动创建一个会话，但是当使用页面导入设置为false时，它不会创建。但是当我尝试打印会话ID cookie时，即使会话已设置为false，我也没有得到空值。相反，我得到一个长的 SessionId 值。

我想知道这怎么可能。

# vb.net - 检查移动浏览器是否正在访问站点

> ID：12553683
> 
> 赞同：0
> 
> 时间：2012-09-23T15:40:36.010
> 
> 标签：vb.net, asp.net-mvc-3

我想检查什么浏览器（基本上是否移动）正在访问我的应用程序（VB 中的 ASP.net），因为我想将它们发送到不同的主布局页面？关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T16:22:56.353

[检查我如何检测请求是否来自我的 asp.net MVC 3](https://stackoverflow.com/questions/7034697/how-can-i-detect-if-the-request-is-coming-from-a-mobile-browser-in-my-asp-net-mv)线程中的移动浏览器中建议的不同选项。

有一个可用的内置[Request.Browser.IsMobileDevice](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpcapabilitiesbase.ismobiledevice.aspx)属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T15:42:50.503

请查看[以下文章](http://www.hanselman.com/blog/NuGetPackageOfTheWeek10NewMobileViewEnginesForASPNETMVC3SpeccompatibleWithASPNETMVC4.aspx)，其中 Scott Hanselman 提供了一个不错的 NuGet ( [MobileViewEngines](http://nuget.org/packages/MobileViewEngines) )，可让您实现这一目标。NuGet 与 ASP.NET MVC 4 规范兼容，它支持开箱即用的此功能，因此当您升级到 ASP.NET MVC 4 时，您所要做的就是删除此包。

# embedded - 使用 Fritzing 运行 Arduino 草图

> ID：12553697
> 
> 赞同：5
> 
> 时间：2012-09-23T15:42:17.020
> 
> 标签：embedded, arduino, avr-gcc

我正在尝试学习硬件编程，并为此订购了[Arduino](http://en.wikipedia.org/wiki/Arduino)。当我等待它交付时，我开始四处寻找并遇到了[Fritzing](http://fritzing.org/)。我可以将 LED 连接到微控制器。我的问题是这样的：

Fritzing 附带一个 IDE，可用于为 Arduino 和[PICAXE](http://en.wikipedia.org/wiki/PICAXE)微控制器编写代码。编写了使 Arduino 上的 LED 闪烁的代码后，我无法编译它并将其附加到我制作的原理图上。我怎么做？页面*[实验程序窗口](http://fritzing.org/news/experimental-program-window/)*并没有真正的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T03:18:14.097

我在 Fritzing 团队工作。Picaxe 编程确实可以在 Fritzing 中工作，但目前 Arduino 编程不能——长话短说，没有简单的 shell 命令来启动 Arduino 编译器和上传器。

您可以在 Fritzing 中为 Arduino 编辑程序，但要运行它们，您仍然必须使用 Arduino IDE。我们应该更清楚地说明 Arduino 编程在 Fritzing 中不完整。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T19:05:55.323

目前无法使用`Fritzing`. 也没有任何模拟 Arduino 的计划。

检查此链接： http: [//fritzing.org/forum/thread/3/](http://fritzing.org/forum/thread/3/)

# c# - 如何形成 JSON 对象

> ID：12553702
> 
> 赞同：0
> 
> 时间：2012-09-23T15:43:01.957
> 
> 标签：c#, asp.net, vb.net, json

我有一个类别表，它`Hierarchical Data`以以下格式存储

`NodeID`---> `ParentID`--->`NodeName`

我想以以下方式选择需要以`JSON Object`预定义格式返回 a 的类别。

**JSON 格式**

```
"Option 1": {"Suboption":200},
"Option 2": {"Suboption 2": {"Subsub 1":201, "Subsub 2":202},
             "Suboption 3": {"Subsub 3":203, "Subsub 4":204, "Subsub 5":205}
            } 
```

![在此处输入图像描述](../Images/c325fb80afc57259c96285e62dd2f674.png)

我如何`JSON`从分层数据库中以这种格式返回？我的意思是我该如何接近？请给我一个方向。

**笔记：**

[单击此处查看我正在使用的 (jQuery) 插件](http://code.google.com/p/jquery-option-tree/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T18:24:17.167

如果您在 ASP.Net 中，则可以使用内置函数对其进行迭代：

```
System.Web.Script.Serialization.JavaScriptSerializer oSerializer = 
         new System.Web.Script.Serialization.JavaScriptSerializer();
string sJSON = oSerializer.Serialize(oList); 
```

您也可以使用循环执行迭代：

```
var productsJObject = JObject.Parse(result.Content.ReadAsStringAsync().Result);

foreach (var category in categories)
{
    foreach (var category2 in category.Value)
    {
        foreach (var category3 in category2.Value)
        {
            var olist = new MyList { Id = version.SelectToken("id").ToString()
                      };
        }
    }
} 
```

如果您有一组定义的级别，这可能很难看，但可以使用，如果您正在执行第 N 维转换，它会很快变得非常复杂。

你可以在这里寻找一个想法：

[Java - 从多个多维数组创建 JSON 对象](https://stackoverflow.com/questions/7382351/java-create-json-object-from-multiple-multidimensional-arrays)

# vb.net - 在 VB.net 中从用户获取布尔输入

> ID：12553704
> 
> 赞同：2
> 
> 时间：2012-09-23T15:43:21.300
> 
> 标签：vb.net

我有一个布尔数据类型的变量，并使用 Windows 控制台我希望在其中存储使用输入。我知道如何使用 if 语句和数据验证来做到这一点，但我想看看 vb 是否有一种方法可以自然地处理这个问题？

为了显示一些代码：

```
Dim tOrF As Boolean
tOrF = Console.ReadLine 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T15:47:25.260

您可以使用**[`TryParse`](http://msdn.microsoft.com/en-us/library/system.boolean.tryparse.aspx#Y500)**方法检查输入的值是否为有效的布尔值，否则将引发异常，

> 尝试将逻辑值的指定字符串表示形式转换为其等效的布尔值。返回值指示转换是成功还是失败。

```
 Dim flag As Boolean 
     Dim value as String = Console.ReadLine()
     If Boolean.TryParse(value, flag) Then
        Console.WriteLine("'{0}' --> {1}", value, flag)
     Else
        Console.WriteLine("Unable to parse '{0}'.", 
                          If(value Is Nothing, "<null>", value))
     End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T15:44:21.673

你可以打电话`Boolean.Parse(Console.ReadLine())`。

如果用户不键入`True`或，这将引发异常`False`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T02:03:02.637

回到 VB6，当我们想要满足人们调整注册表项的需求时，我创建了`CRegBool`（注意这是来自一个`Option Compare Text`模块）：

```
'----------------------------------------------------------------------
' Function: CRegBool
'
' Purpose:
'   Converts settings value that could have been 'adjusted' by a human to a Boolean.
'
' Arguments:
'   Variant     Value to convert to Boolean.
'   Boolean(Opt)Default value.
'
' Returns:
'   Boolean     True if the value represents an 'affirmative' or non-zero value.
'               False if the value represents a 'negative' or zero value.
'               Otherwise returns default value.
'
' Errors:
'   Only those thrown by CStr (or LCase$).
'
' Notes:
'   Default value should probably never be False unless the Else Case is expanded
' to catch Val(rv) <> 0 -> True; Nevertheless, it is False rather a lot...
'
'   Use LCase$ if Option Compare Binary in operation.
'
' Revision History:
'   070615 MEH Moved from MsgU:modMsgUI.
'   070907 MEH Added commentary.
'   070928 MEH Updated commentary to highlight LCase$ is needed if not Option Compare Text.
'----------------------------------------------------------------------
Public Function CRegBool(ByVal RegValue As Variant, Optional ByVal DefaultValue As Boolean = True) As Boolean

  Select Case CStr(RegValue) 'LCase$(CStr(RegValue)) '
  Case "0", "00", "0x0", "&h0", "false", "no", "off", "n"
    CRegBool = False
  Case "1", "01", "0x1", "&h1", "true", "yes", "on", "-1", "y"
    CRegBool = True
  Case Else
    CRegBool = DefaultValue
  End Select

End Function 
```

一个快速的 VB.NET 转换，使用我最新的已知问题（特别是 UPPERCASE 比较好）：

```
'''----------------------------------------------------------------------
''' Function: CRegBool
'''
''' <summary>
'''   Converts settings value that could have been 'adjusted' by a human to a Boolean.
''' </summary>
'''
''' <parameter name="">Value to convert to Boolean.</parameter>
''' <parameter name="">Default value.</parameter>
'''
''' <returns>
'''   True if the value represents an 'affirmative' or non-zero value.
'''   False if the value represents a 'negative' or zero value.
'''   Otherwise returns default value.
''' </returns>
'''
''' <remarks>
'''   Default value should probably never be False unless the Else Case is expanded
'''  to catch Val(rv) <> 0 -> True; Nevertheless, it is False rather a lot...
'''
'''   Use UCase if Option Compare Binary in operation.
''' </remarks>
'''
''' <revisionhistory>
'''   070615 MEH Moved from MsgU:modMsgUI.
'''   070907 MEH Added commentary.
'''   070928 MEH Updated commentary to highlight UCase is needed if not Option Compare Text.
'''   120924 MEH Converted to VB.NET in the SO text box without testing...
''' </revisionhistory>
'''----------------------------------------------------------------------
Public Function CRegBool(ByVal RegValue As Object, Optional ByVal DefaultValue As Boolean = True) As Boolean

  Select Case CStr(RegValue) 'UCase(CStr(RegValue)) '
  Case "0", "00", "0X0", "&H0", "FALSE", "NO", "OFF", "N"
    CRegBool = False
  Case "1", "01", "0X1", "&H1", "TRUE", "YES", "ON", "-1", "Y"
    CRegBool = True
  Case Else
    CRegBool = DefaultValue
  End Select

End Function 
```

# c# - 在 Visual Studio 中添加 VB6 引用会给出“类型库导入器在类型验证期间遇到错误”

> ID：12553705
> 
> 赞同：9
> 
> 时间：2012-09-23T15:43:29.513
> 
> 标签：c#, vb.net, visual-studio-2010, vb6, tlbimp

我正在将一个用 VB6 编写的相当大的项目转换为 C#。鉴于正在迁移的项目的规模，它将在 18 个月的过程中分阶段完成。我在将 VB6 ActiveX dll 的引用添加到 .Net 项目时遇到了问题。

如果您完全按照这些步骤操作，您也应该能够重现问题。

我在 .Net 中编写了一个 COM 可见的接口：

```
<ComVisible(True)>
Public Interface ITestInterface
    Property A As String
    Function TestMethod() As String
End Interface 
```

通过在项目属性的 Compile 选项卡中选择“Register for COM interop”，您将获得一个 TLB 文件。

我创建了一个引用此 TLB 的 VB6 项目和一个实现公开接口的类。

```
Implements ITestInterface

Private mA As String

Public Property Get ITestInterface_A() As String
    ITestInterface_A = mA
End Property

Public Property Let ITestInterface_A(ByVal value As String)
    mA = value
End Property

Public Function ITestInterface_TestMethod() As String
    ITestInterface_TestMethod = "From VB6"
End Function 
```

如果我在 VB6 中将项目属性的“组件”选项卡设置为使用“远程服务器文件”，则编译时会自动创建 TLB。我可以在 OleView 中查看 TLB 并看到以下内容（除了在 .Net 项目中定义的接口在 VB6 中完成的具体实现的详细信息）：

```
// typelib filename: TestVB6Interface.dll

[
  uuid(**EF005573-BFC7-436D-A382-F906CA09F94A**),
  version(3.0)
]

// ... some other stuff

// TLib :     // TLib :  : {79EC733A-0267-4506-8D38-C4D4655E0755}
importlib("SimpleDotNetLibrary.tlb"); 
```

现在，我创建了一个全新的 .Net 项目。如果我添加对 VB6 dll 的引用，则会收到以下错误：

无法解析 COM 引用“ **ef005573-bfc7-436d-a382-f906ca09f94a** ”版本 3.0。类型库导入器在类型验证期间遇到错误。尝试在没有类成员的情况下导入。

但是，如果我启动 Visual Studio 命令提示符并运行以下命令：

```
tlbimp TestVB6Interface.tlb /out:TestVB6Interface.MyInterop.dll 
```

然后我可以将该 dll 作为参考添加到我的 .Net 解决方案中，它工作得非常好。

我的问题。当我直接添加引用时，tlbimp 在命令行上做了什么而没有完成？当 Visual Studio 中的消息显示“尝试在没有类成员的情况下导入”时，我该如何在 Visual Studio 中执行此操作？我知道如何在 tlbimp 中做到这一点。

我为文字墙道歉，但我想尽可能地描述情况，保留我认为相关的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T04:41:57.103

在为 COM 互操作注册 DLL 时，Visual Studio IDE 肯定会采用不同的路径，而不是在从命令提示符运行命令行工具时。

我怀疑微软是否已经在任何地方记录了这一点。但是，我多年的经验证明确实如此。我曾经遇到过 .NET 2.0 框架中的“regsvcs”命令实际上会导致无限循环的情况。如果你谷歌它，你可能会发现其他人遇到过这个问题。通过使用 VS IDE 执行 .NET 服务组件的 COM 注册，我能够更进一步。然而，它不可避免地以错误告终。该错误是无限循环的一步。无论哪种方式，它都向我证明了 VS IDE 在处理 COM 互操作和注册表项时采用了不同的代码路径/业务逻辑。

# sql - 如何根据特定设置创建访问不同表的“物化事物”

> ID：12553711
> 
> 赞同：2
> 
> 时间：2012-09-23T15:44:39.070
> 
> 标签：sql, sql-server, sql-server-2008, view

我想要一个程序来访问表/视图/存储过程等（**物化的东西，我们称之为 X**）抽象三个基本表中包含的数据的真实位置（这些表在所有位置都有相同的定义）。

我希望**X**从某个地方（可能是一个表）获取服务器名称、目录名称和表名称，并访问特定的三个基本表。**X**的调用者不知道正在调用哪些特定的表。

如何在 SQL Server (2008) 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T15:58:44.950

像函数一样，视图不能使用动态 SQL - 它不能在某处找到一些元数据引用并进行相应调整。

我认为最接近你想要的是[同义词](http://msdn.microsoft.com/en-us/library/ms177544.aspx)。假设您有三个不同的数据库`A`，`B`和`C`。在`A`表中，您希望视图引用的是`dbo.foo`、 in `B`it is`dbo.bar`和 in `C`it is `dbo.splunge`。那么你可以在每个数据库中创建一个这样的同义词：

```
USE A;
GO
CREATE SYNONYM dbo.YourCommonViewName FOR dbo.foo;
GO

USE B;
GO
CREATE SYNONYM dbo.YourCommonViewName FOR dbo.bar;
GO

USE C;
GO
CREATE SYNONYM dbo.YourCommonViewName FOR dbo.splunge;
GO 
```

现在这在技术上不是一个视图，但在每个数据库中你可以说......

```
SELECT <cols> FROM dbo.YourCommonViewName; 
```

...它将从特定于数据库的表中返回数据。

* * *

在存储过程中执行此操作会简单得多。假设您将服务器、数据库和表名存储在某个表中，例如`dbo.lookup`：

```
CREATE TABLE dbo.lookup
(
  id INT PRIMARY KEY,
  [server]   SYSNAME,
  [database] SYSNAME,
  [table]    SYSNAME,
  active BIT NOT NULL DEFAULT (0)
);

-- you may want a constraint or trigger to ensure
-- only one row can be active at any one time.

INSERT dbo.lookup(id, [server], [database], [table])
  SELECT 1,N'serverA',N'databaseA',N'tableA'
  UNION ALL SELECT 2,N'serverB',N'databaseB',N'tableB'; 
```

现在你的程序可以说：

```
UPDATE dbo.lookup SET active = 1 WHERE ... ? 
```

您的存储过程可以是：

```
CREATE PROCEDURE dbo.whatever
AS
BEGIN
  SET NOCOUNT ON;

  DECLARE @sql NVARCHAR(MAX);

  SELECT @sql = N'SELECT <cols> FROM ' + QUOTENAME([server]) 
    + '.' + QUOTENAME([database]) + '.dbo.' + QUOTENAME([table])
    FROM dbo.lookup WHERE active = 1;

  EXEC sp_executesql @sql;
END
GO 
```

我仍然不明白这一点，并且我不知道当两个不同的用户希望同时调用您的程序时您打算做什么，并且他们每个人都应该从不同的位置获得结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T16:02:22.767

同意 Aaron 关于视图和函数不能使用动态 sql 的事实。

您仍然可以做的是构建一个 clr 表值函数。在那里，您可以使用 .net 代码并查询您想要的任何内容。并相应地构建您的数据并输出您需要的内容。

所以而不是像查询数据

```
select * from myview 
```

你可以查询它

```
select * from dbo.clr_mymockupview() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T16:11:46.973

1.  为您的远程服务器创建同义词。
2.  使用 UNION ALL 创建您的视图以将您的位置连接在一起。

既然您说“表”，请在 UNION ALL 之前加入您的表，并希望 MS 将远程执行 JOIN。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T16:15:56.973

使用带有数据库、服务器和目录参数的联合查询：

```
Select col1, col2, <etc.>, 'table1' as tablename, 'server1' as servername, 'catalog1' as catname from server1.catalog1.table1
Union Select col1, col2, <etc.>, 'table2' as tablename, 'server2' as servername, 'catalog2' as catname from server2.catalog2.table2
Union Select col1, col2, <etc.>, 'table3' as tablename, 'server3' as servername, 'catalog3' as catname from server3.catalog3.table3 
```

然后根据您的 3 个标准进行过滤。这可能不会很快，但会与 std. SQL。

# c# - CryptographicException：数据在启用 WIF 的 MVC 4 中无效

> ID：12553712
> 
> 赞同：4
> 
> 时间：2012-09-23T15:44:42.547
> 
> 标签：c#, security, .net-4.0, wif, windows-identity

我创建了一个 MVC 4 项目并将其设置为 Azure ACS。它与 System.Identity 一起使用。我将其更改为使用 Microsoft.Identity 来启用 WIF，我的配置文件现在如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    <section name="microsoft.identityModel"
             type="Microsoft.IdentityModel.Configuration.MicrosoftIdentityModelSection, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </configSections>
  <connectionStrings>

    <add name="DefaultConnection"  />
  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
    <add key="ida:FederationMetadataLocation" value="https://traffictheory.accesscontrol.windows.net/FederationMetadata/2007-06/FederationMetadata.xml" />
    <add key="ida:ProviderSelection" value="ACS" />
  </appSettings>
  <location path="FederationMetadata">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>
  <system.web>
    <!--<authorization>
      <deny users="?" />
    </authorization>-->
    <authentication mode="None" />
    <compilation debug="true" targetFramework="4.0" />
    <!--Commented out by Identity and Access VS Package-->
    <!--<authentication mode="Forms"><forms loginUrl="~/Account/Login" timeout="2880" /></authentication>-->
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <httpRuntime requestValidationMode="4.5" />
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true">
        <add name="WSFederationAuthenticationModule"
       type="Microsoft.IdentityModel.Web.WSFederationAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
      <add name="SessionAuthenticationModule"
           type="Microsoft.IdentityModel.Web.SessionAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
      <add name="ClaimsAuthorizationModule"
           type="Microsoft.IdentityModel.Web.ClaimsAuthorizationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />

    </modules>
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
  <microsoft.identityModel>
    <service>
      <audienceUris>
        <add value="http://localhost:48451/" />
      </audienceUris>

    <issuerNameRegistry type="Microsoft.IdentityModel.Tokens.ConfigurationBasedIssuerNameRegistry, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
      <trustedIssuers>
        <add thumbprint="033F53598E4ED92E51C07238E36BBFF4E67ABAD2" name="https://traffictheory.accesscontrol.windows.net/" />
      </trustedIssuers>
    </issuerNameRegistry>

    <federatedAuthentication>
      <cookieHandler requireSsl="false" />
      <wsFederation passiveRedirectEnabled="true"
                    issuer="https://traffictheory.accesscontrol.windows.net/v2/wsfederation"
                    realm="http://localhost:48451/" reply="http://localhost:48451/"
                    requireHttps="false" />
    </federatedAuthentication>
      <certificateValidation certificateValidationMode="None" />
      </service>
  </microsoft.identityModel>

</configuration> 
```

我的问题是当我运行我得到的网站时：

```
[CryptographicException: The data is invalid.
]
   System.Security.Cryptography.ProtectedData.Unprotect(Byte[] encryptedData, Byte[] optionalEntropy, DataProtectionScope scope) +318
   Microsoft.IdentityModel.Web.ProtectedDataCookieTransform.Decode(Byte[] encoded) +203

[InvalidOperationException: ID1073: A CryptographicException occurred when attempting to decrypt the cookie using the ProtectedData API (see inner exception for details). If you are using IIS 7.5, this could be due to the loadUserProfile setting on the Application Pool being set to false. ]
   Microsoft.IdentityModel.Web.ProtectedDataCookieTransform.Decode(Byte[] encoded) +319
   Microsoft.IdentityModel.Tokens.SessionSecurityTokenHandler.ApplyTransforms(Byte[] cookie, Boolean outbound) +217
   Microsoft.IdentityModel.Tokens.SessionSecurityTokenHandler.ReadToken(XmlReader reader, SecurityTokenResolver tokenResolver) +1951
   Microsoft.IdentityModel.Tokens.SessionSecurityTokenHandler.ReadToken(Byte[] token, SecurityTokenResolver tokenResolver) +149
   Microsoft.IdentityModel.Web.SessionAuthenticationModule.ReadSessionTokenFromCookie(Byte[] sessionCookie) +598
   Microsoft.IdentityModel.Web.SessionAuthenticationModule.TryReadSessionTokenFromCookie(SessionSecurityToken& sessionToken) +120
   Microsoft.IdentityModel.Web.SessionAuthenticationModule.OnAuthenticateRequest(Object sender, EventArgs eventArgs) +113
   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +136
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +69 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T18:15:08.490

WIF 中的默认保护是使用 DPAPI，如果配置文件尚未加载（通常在云托管中失败），则该 API 会失败。您可以使用 MachineKey 保护，而不是依赖于 ASP.NET 机器密钥

[http://leastprivilege.com/2012/07/12/machinekey-based-session-protection-for-wif/](http://leastprivilege.com/2012/07/12/machinekey-based-session-protection-for-wif/)

另一方面，如果您使用的是内置的 NET 4.5 和 System.IdentityModel。您不再需要 WIF，并且机器密钥保护已在核心程序集中可用。此外，您必须参考 System.IdentityModel.Services dll（其中包含 http 模块）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-13T01:43:15.760

当访问者只看到此异常时，您不一定要求访问者清除他们的 cookie。

我的回答是通过联合身份验证帮助其他因“数据无效” CryptographicException 而被拉扯头发的人。我们尝试了很多东西，但都没有奏效，除了我发现提到更改 cookie 的名称，因为从 WIF 3.5 移动到版本 4.0，它看起来可能已经留下了不兼容的 cookie。我们仍然不清楚为什么。但是，在我们的例子中，我们有两个虚拟应用程序文件夹，每个文件夹都具有联合身份验证，看起来它们可能一直在共享 cookie。因此，我们在联合身份验证中为每个 cookieHandler 指定了一个唯一的 cookie 名称，并且我们还指定了 asp.net 会话 cookie 为每个都有一个唯一的名称。如果这个提示对任何人都有帮助，那就太好了。

# eclipse - 没有标题的 Eclipse GEF 图形编辑器

> ID：12553714
> 
> 赞同：0
> 
> 时间：2012-09-23T15:45:08.553
> 
> 标签：eclipse, eclipse-rcp, eclipse-gef

我正在使用 GEF 框架开发 RCP 插件。
我创建了基本的图形编辑器（GraphicalEditor 和 IEditorInput）

```
IWorkbenchPage page = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage();
page.openEditor(new TEditorInput("T"), TGraphicalEditor.ID,false); 
```

当我运行应用程序时，我得到一个带有标题的编辑器，其中包含带有编辑器名称的选项卡和用于最大化和最小化编辑器的控制按钮。

我需要的是只显示编辑器，没有标题。

可以做到吗？

![在此处输入图像描述](../Images/95ead650f4d85fed89c61da51ccd55f1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T21:29:24.247

据我所知，不可能只隐藏编辑器的选项卡。

但是，您可以尝试两种**解决方法**：

*   让您的 GEF 编辑器显示在 Eclipse 视图中而不是编辑器中，并以独立视图的形式打开这样的视图。如何在视图中打开 GEF 图的示例可以在[GEF 的有向图示例](http://www.eclipse.org/gef/reference/digraph1.php)中找到。可以在[Eclipse RCP 官方教程](http://www.eclipse.org/articles/Article-RCP-3/tutorial3.html)中找到如何以独立方式打开视图的示例。

*   扩展*演示工厂* 扩展点以控制工作台部件的显示方式（包括对部件堆栈选项卡的控制）。

我建议你尝试第一种方法，因为对我来说它似乎更容易实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:12:14.620

编辑器的想法是您可以为不同的编辑器输入实例化它们。我不知道有什么方法可以将打开的编辑器的数量限制为一个（好吧，如果这对你有帮助的话，[你可以在 Eclipse 4.2](http://wiki.eclipse.org/Eclipse4/CSS)中使用）

对于视图，您可以通过在视图上将透视设置为固定并将扩展设置`showTitle`为`org.eclipse.ui.perspectiveExtensions`false 来完成您想要的操作。也许您可以使用视图而不是编辑器并自己控制编辑器输入？

（例如，使用编辑器，默认的 Open 操作会实例化一个新的编辑器，而您可能想替换您唯一的编辑器中的内容，对吧？）

# django - Django - 如何为 django 字段编写这样的小部件/字段？

> ID：12553719
> 
> 赞同：0
> 
> 时间：2012-09-23T15:46:16.777
> 
> 标签：django, forms, list, widget, field

嗨，我想创建一个新字段，呈现如下：

![在此处输入图像描述](../Images/45a7222299ce76619c75234499b11940.png)

```
<table>
    <tr><td colspan="3">
    <select id="item_id" size="6" style="width: 100%;">
      <option>Apple</option>
      <option>Pear</option>
      <option>Banana</option>
      <option>Orange</option>
    </select>
    </td></tr>
    <tr><td>
        <input type="text" id="item_id_add" />
    </td><td>
        <button type="button" onclick="addElement('item_id')">Add</button>
    </td><td>
        <button type="button" onclick="removeElement('item_id')">Remove</button>
    </td></tr>
</table> 
```

用户可以在哪里添加和删除选项，并且所有这些选项都将被提交（我希望允许用户定义自己的列表）。我知道如何在 HTML / JS 中做到这一点，但我不知道如何让 django 呈现一个看起来像我想要的字段。

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T22:06:16.070

有3个主要步骤：

1-> 创建一个包含这些字段和所有者/用户字段的模型（以连接到 Django-User 模型[）](https://docs.djangoproject.com/en/dev/ref/models/)

2->创建一个[表单](https://docs.djangoproject.com/en/dev/ref/forms/)（我更喜欢[ModelForm](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/) [让表单可编辑]）

3-> 创建一个与您的表单相关的[视图。](https://docs.djangoproject.com/en/dev/topics/http/views/)

4->（我知道我说过 3 个步骤 :)）创建一个模板文件，在您的视图中告诉它以基本 HTML 文件呈现该表单（使用[django 模板语言](https://docs.djangoproject.com/en/dev/ref/templates/api/)）

编码那个简单的形式；实际上，您需要获得 django - 基础知识。所以你可以从这里开始：

[Django 项目](http://www.djangoproject.com)

# ios - UISearchDisplayController、UITableView 和核心数据

> ID：12553722
> 
> 赞同：3
> 
> 时间：2012-09-23T15:46:31.283
> 
> 标签：ios, uitableview, core-data, uisearchdisplaycontroller

我对 iOS 编程很陌生。我已经使用 NSFetchedResultsController 实现了一个使用 CoreData 填充的 UITableView。这部分工作得很好。然后我添加了一个 UISearchDisplayController 来搜索表格。搜索本身工作正常，但似乎我在重新加载视图时泄漏了我的 CoreData 对象。应用程序不会崩溃，但每次我执行搜索或关闭 SearchView 时，Instrument 都会报告对象在 CoreData 框架中泄漏。

我已经实现了这样的搜索功能：

```
- (void)filterContentForSearchText:(NSString*)searchText
                             scope:(NSString*)scope
{
    if (searchText && searchText.length) {
        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name contains %@", searchText];
        [self.fetchedResultsController.fetchRequest setPredicate:predicate];
    }

    NSError *error = nil;
    if (![[self fetchedResultsController] performFetch:&error]) {
        // Handle error
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        exit(-1);  // Fail
    }

} 
```

当我关闭 SearchBar 时，我会这样做：

```
- (void)searchBarTextDidEndEditing:(UISearchBar *)searchBar
{
    NSLog(@"searchBarTextDidEndEditing: Reset fetchedResultsController predicate" );
    self.fetchedResultsController.fetchRequest.predicate = nil;
    NSError *error = nil;
    if (![[self fetchedResultsController] performFetch:&error]) {
        NSLog(@"Unresolved error %@, %@",error,[error userInfo]);
        abort();
    }
} 
```

谁能看到我做错了什么？

谢谢凸轮

更新：我关注了这篇文章[How to filter NSFetchedResultsController (CoreData) with UISearchDisplayController/UISearchBar](https://stackoverflow.com/questions/4471289/how-to-filter-nsfetchedresultscontroller-coredata-with-uisearchdisplaycontroll)并以相同的方式实现了getter，但是当我在搜索栏中“键入”一些字母时，我仍然在泄漏核心数据对象，所以问题似乎是当我获取新数据时不会关闭视图。

代码如下所示：

1）当我在搜索栏中输入时，我设置为 nil self.searchBarFetchedResultsController

```
(void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{
    self.searchBarFetchedResultsController.delegate = nil;
    self.searchBarFetchedResultsController = nil;
} 
```

2）当再次调用 getter 时，我按照示例分配一个新的 FRC。

```
- (NSFetchedResultsController *)searchBarFetchedResultsController
{
    if (_searchBarFetchedResultsController != nil)
    {
        return _searchBarFetchedResultsController;
    }
    _searchBarFetchedResultsController = [self newFetchedResultsControllerWithSearch:self.searchDisplayController.searchBar.text];
return _searchBarFetchedResultsController;
}

- (NSFetchedResultsController *)newFetchedResultsControllerWithSearch:(NSString *)searchString
{
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Beers"];
    request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)]];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name contains %@", searchString];
    if(searchString.length)
    {
        [request setPredicate:predicate];
    }
    [request setFetchBatchSize:20];
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                                                managedObjectContext:self.beerDB2.managedObjectContext
                                                                                                  sectionNameKeyPath:nil
                                                                                                           cacheName:nil];
    aFetchedResultsController.delegate = self;
   NSError *error = nil;
    if (![aFetchedResultsController performFetch:&error])
    }
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return aFetchedResultsController;
} 
```

然后，当我从代表方法访问 FRC 时，我正在使用此方法来获取正确的方法。

```
- (NSFetchedResultsController *)fetchedResultsControllerForTableView:(UITableView *)tableView
{

  return tableView == self.favTab ? self.fetchedResultsController : self.searchBarFetchedResultsController;

} 
```

除了 Inspector 告诉我我正在泄漏数百个核心数据对象之外，所有工作都完美无缺任何后续搜索都会触发泄漏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-08T20:26:54.030

在“viewdidload”上，获取全局声明数组中的所有详细信息……并在搜索功能中，使用“NSPredicate”过滤数组

# ajax - 将 json 数据插入文本输入

> ID：12553723
> 
> 赞同：0
> 
> 时间：2012-09-23T15:46:40.457
> 
> 标签：ajax, json

我有一个函数可以将新患者添加到数据库，获取 json 数据，然后将新患者添加到选择菜单中。这很好用。我需要将该数据添加到相应的文本输入中，即 input#patient_id、input#patient_firstname 等，这应该在 .ajax 完成中出现，但没有任何反应。

将不胜感激任何帮助！

阿贾克斯

```
$('#newpatient').click(function() {
var patientadd = $('#patientaddform').serializeArray();
  $.ajax({
      url:      'adam.php',
      type:     "POST",
      data:     patientadd,
      dataType: 'json',
      success:  function(data){
                    var html = '';
                    var len  = data.length;
                    for (var i = 0; i< len; i++) {
                    html += '<option selected="selected" value="' + data[i].patient_id + '">' + data[i].patient_firstname + ' ' + data[i].patient_lastname + ' : ' + data[i].patient_dob + '</option>';
                    }
                    alert(html);
                    $('#patientselect').prepend(html);
                    $('#patientselect').selectmenu('refresh', true);
                }, 
      complete: function (data) {
                   for(var id in data) {        
                          $('input#' + id).val( data[id] );
                   }
                }     

  }); 
```

});

返回的json数据

```
[{"patient_id":"22","patient_firstname":"","patient_lastname":"","patient_dob":"0000-00-00"}] 
```

相应的文本输入字段是 input#patient_id、input#patient_firstname 等，这就是为什么我尝试将“input#”添加到 ajax 完成中的 id，然后将该 val 添加到文本输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:51:51.823

`complete`回调的参数是`jqXHR`和`textStatus`。不是`data`。请参阅[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)的正确定义`complete(jqXHR, textStatus)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T15:51:39.540

您的 json 数据是一个对象数组，因此您必须像这样添加数组的第一个元素：

```
for(var id in data[0]) {        
  $('input#' + id).val( data[0][id] );
} 
```

或者您必须调整服务器响应。

还要考虑@techfoobar 的回答：

> 完整回调的参数是 jqXHR 和 textStatus。不是数据。有关完整的正确定义，请参见[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/) (jqXHR, textStatus)

# android - 更改 TextView 字体？

> ID：12553727
> 
> 赞同：2
> 
> 时间：2012-09-23T15:47:15.277
> 
> 标签：android

如何更改 Android TextView 中的字体类型？

```
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Welcome!"
    android:textSize="20sp"  /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T15:49:34.653

您可以使用该[`android:typeface`](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3atypeface)属性。例如：

```
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Welcome!"
    android:typeface="sans"
    android:textSize="20sp"  /> 
```

XML 属性只允许值`normal`、`sans`、`serif`和`monospace`。如果您想使用不同的`Typeface`（可能是您的应用程序附带的自定义），您必须在[`setTypeface()`](http://developer.android.com/reference/android/widget/TextView.html#setTypeface%28android.graphics.Typeface%29)加载 TextView 后调用视图来在代码中执行此操作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-23T16:04:35.987

要添加到*Ted Hopp 的*答案，如果您正在查看您的自定义字体，请`TextView`在`Activity`您引用的地方`TextView`使用此代码示例：

```
Typeface blockFonts = Typeface.createFromAsset(getAssets(),"ROBOTO-MEDIUM_0.TTF");
TextView txtSampleTxt = (TextView) findViewById(R.id.your_textview_id);
txtSampleTxt.setTypeface(blockFonts); 
```

虽然，在您使用它之前，您需要将您选择的字体复制到`assets`文件夹中。

您还可以查看我在 SO 上的一个[答案](https://stackoverflow.com/a/10680119/450534)，其中有几个网站可以用来下载字体。他们是：

[http://www.google.com/webfonts](http://www.google.com/webfonts)

[http://www.fontsquirrel.com/](http://www.fontsquirrel.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-24T07:53:03.683

您可以通过将字体文件（example.tff）样式放在 Assets/fonts 中以编程方式设置所需字体，然后将您自己的字符串放入 fontpath 变量

```
 String fontPath="fonts/Unkempt-Regular.ttf";
    TextView aboutus=(TextView)findViewById(R.id.aboutus);
    Typeface type=Typeface.createFromAsset(getAssets(), fontPath);
    aboutus.setTypeface(type); 
```

# mysql - SQL 查询时间复杂度

> ID：12553728
> 
> 赞同：8
> 
> 时间：2012-09-23T15:47:24.010
> 
> 标签：mysql, sql, database, time-complexity

像下面这样的简单 SQL 语句的时间复杂度是多少？

```
INSERT into table (col1, col2, col3) values ("a", "b", "c") 
```

它如何取决于以下内容：

1.  桌子的大小
2.  col1, col2 的数据类型
3.  表中的列数，即。col1、col2、col3 等

这是否取决于我使用的是 MyISAM 还是 InnoDB？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T16:50:54.963

[MySQL 5.0 文档有一个关于这个主题](http://dev.mysql.com/doc/refman/5.0/en/insert-speed.html)的不错的页面。

本文提供了插入任务中涉及的每个子任务的大致比例成本。

> 插入一行所需的时间由以下因素决定，其中数字表示近似比例：
> 
> 连接：（3）
> 
> 向服务器发送查询：(2)
> 
> 解析查询：（2）
> 
> 插入行：（1×行大小）
> 
> 插入索引：（1 × 索引数）
> 
> 结束： (1)
> 
> 这没有考虑打开表的初始开销，每个并发运行的查询都会执行一次。
> 
> 假设 B-tree 索引，表的大小会减慢 log N 的索引插入速度。

文章的其余部分提供了加快插入速度的技术，如果插入速度成为应用程序的瓶颈，这很有用。

# asp.net - 在 DataSource 上的 vb.net 文件后面的代码中使用参数来防止注入攻击

> ID：12553731
> 
> 赞同：0
> 
> 时间：2012-09-23T15:47:45.153
> 
> 标签：asp.net, vb.net, parameters

我们想更改以下代码，以便使用参数来防止注入攻击。

以下是公共类区域中的代码：

```
Public Class Parents1
Inherits System.Web.UI.Page

Dim theTableAdapter As New DataSetParentsSummaryTableAdapters.ParentsSummaryTableAdapter 
```

这是我们在 page_load 中的内容：

```
Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load

    GridViewParentsSummary.DataSource = theTableAdapter.GetData("ALL")
End Sub 
```

这是用于加载 GridView 的代码，其中包含来自搜索按钮单击的数据：

```
Protected Sub ButtonSearch_Click(sender As Object, e As EventArgs) Handles ButtonSearch.Click

    GridViewParentsSummary.DataSource = theTableAdapter.GetData(TextBoxSearch.Text)
End Sub 
```

你能显示使用参数所需的代码吗？

# algorithm - 有没有办法只使用堆栈来实现列表？

> ID：12553733
> 
> 赞同：0
> 
> 时间：2012-09-23T15:48:11.513
> 
> 标签：algorithm

我想知道是否有一种方法可以仅使用堆栈来实现列表。在那儿？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T15:53:05.923

您可以使用两个堆栈制作一个（低效的）列表。当您需要插入或检索项目时，只需将项目从一个堆栈移动到另一个堆栈，直到获得正确的索引。

这是 JavaScript 中的一个示例：

```
function List() {
    this.stack1 = [];
    this.stack2 = [];

    Object.defineProperty(this, 'length', {
        get: function() { return this.stack1.length + this.stack2.length; }
    });
}

List.prototype.item = function(index) {
    if(index < this.stack1.length) {
        while(index < this.stack1.length - 1) {
            this.stack2.push(this.stack1.pop());
        }

        return this.stack1[this.stack1.length - 1];
    }

    while(index > this.stack1.length) {
        this.stack1.push(this.stack2.pop());
    }

    return this.stack2[this.stack2.length - 1];
};

List.prototype.insert = function(item, index) {
    this.item(index - 1);
    this.stack1.push(item);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T17:22:42.397

列表，你的意思是队列吗？因为我看不到堆栈和列表之间的任何连接......

如果是这样，您可以使用两个堆栈： s1 san s2 ，想象它们是从下到下的。s1 是列表的头部，s2 是尾部。此列表的功能：

1.  插入（ele）：只需使用 s2.push_back（ele）
2.  pop():如果 s1 不为空，s1.pop();否则从 s2 中弹出每个元素并推入 s1，然后 s1.pop()
3.  尺寸():s1.size()+s2.size()
4.  ...

# ios - 崩溃日志 - 需要帮助才能找到崩溃

> ID：12553734
> 
> 赞同：1
> 
> 时间：2012-09-23T15:48:27.753
> 
> 标签：ios, crash, uiimageview

我收到以下崩溃日志，但我找不到让应用变现的原因。

```
Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x3790e29e __exceptionPreprocess + 158
1   libobjc.A.dylib                 0x3540e97a objc_exception_throw + 26
2   CoreFoundation                  0x3790dd80 __NSFastEnumerationMutationHandler + 124
3   UIKit                           0x373d2a50 -[UIViewController _traverseViewControllerHierarchyFromLevel:withBlock:] + 152
4   UIKit                           0x373d286c +[UIViewController _traverseViewControllerHierarchyWithDelayedReleaseArray:block:] + 464
5   UIKit                           0x373d263c +[UIViewController _traverseViewControllerHierarchyWithDelayedRelease:] + 120
6   UIKit                           0x373d225c -[UIApplication _performMemoryWarning] + 148
7   libdispatch.dylib               0x339084b2 _dispatch_client_callout + 18
8   libdispatch.dylib               0x33908f88 _dispatch_source_invoke$VARIANT$up + 244
9   libdispatch.dylib               0x33909d88 _dispatch_main_queue_callback_4CF$VARIANT$up + 160
10  CoreFoundation                  0x378e1f36 __CFRunLoopRun + 1286
11  CoreFoundation                  0x37854eb8 CFRunLoopRunSpecific + 352
12  CoreFoundation                  0x37854d44 CFRunLoopRunInMode + 100
13  GraphicsServices                0x3550a2e6 GSEventRunModal + 70
14  UIKit                           0x372cc2fc UIApplicationMain + 1116
15  MixMe                           0x000cd120 main (main.m:16)
16  MixMe                           0x000cd0bc start + 36

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x32c07350 __pthread_kill + 8
1   libsystem_c.dylib               0x333e011e pthread_kill + 54
2   libsystem_c.dylib               0x3341c96e abort + 90
3   libc++abi.dylib                 0x360a3d4a abort_message + 70
4   libc++abi.dylib                 0x360a0ff4 _ZL17default_terminatev + 20
5   libobjc.A.dylib                 0x3540ea74 _ZL15_objc_terminatev + 144
6   libc++abi.dylib                 0x360a1078 _ZL19safe_handler_callerPFvvE + 76
7   libc++abi.dylib                 0x360a1110 std::terminate() + 16
8   libc++abi.dylib                 0x360a250e __cxa_throw + 118
9   libobjc.A.dylib                 0x3540e9ba objc_exception_throw + 90
10  CoreFoundation                  0x3790dd80 __NSFastEnumerationMutationHandler + 124
11  UIKit                           0x373d2a50 -[UIViewController _traverseViewControllerHierarchyFromLevel:withBlock:] + 152
12  UIKit                           0x373d286c +[UIViewController _traverseViewControllerHierarchyWithDelayedReleaseArray:block:] + 464
13  UIKit                           0x373d263c +[UIViewController _traverseViewControllerHierarchyWithDelayedRelease:] + 120
14  UIKit                           0x373d225c -[UIApplication _performMemoryWarning] + 148
15  libdispatch.dylib               0x339084b4 _dispatch_client_callout + 20
16  libdispatch.dylib               0x33908f88 _dispatch_source_invoke$VARIANT$up + 244
17  libdispatch.dylib               0x33909d8a _dispatch_main_queue_callback_4CF$VARIANT$up + 162
18  CoreFoundation                  0x378e1f36 __CFRunLoopRun + 1286
19  CoreFoundation                  0x37854eb8 CFRunLoopRunSpecific + 352
20  CoreFoundation                  0x37854d44 CFRunLoopRunInMode + 100
21  GraphicsServices                0x3550a2e6 GSEventRunModal + 70
22  UIKit                           0x372cc2fc UIApplicationMain + 1116
23  MixMe                           0x000cd120 main (main.m:16)
24  MixMe                           0x000cd0bc start + 36

Thread 1:
0   libsystem_kernel.dylib          0x32c07d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x333b7cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x333b7a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x333b78a0 start_wqthread + 4

Thread 2 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 2:
0   libsystem_kernel.dylib          0x32bf7648 kevent64 + 24
1   libdispatch.dylib               0x339184ec _dispatch_mgr_invoke + 792
2   libdispatch.dylib               0x3390adf4 _dispatch_mgr_thread$VARIANT$up + 32

Thread 3 name:  WebThread
Thread 3:
0   libsystem_kernel.dylib          0x32bf6eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x32bf7048 mach_msg + 36
2   CoreFoundation                  0x378e3040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x378e1d9e __CFRunLoopRun + 878
4   CoreFoundation                  0x37854eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x37854d44 CFRunLoopRunInMode + 100
6   WebCore                         0x33e9da70 _ZL12RunWebThreadPv + 440
7   libsystem_c.dylib               0x333c230e _pthread_start + 306
8   libsystem_c.dylib               0x333c21d4 thread_start + 4

Thread 4:
0   libsystem_kernel.dylib          0x32c07d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x333b7cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x333b7a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x333b78a0 start_wqthread + 4

Thread 5:
0   libsystem_kernel.dylib          0x32c07d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x333b7cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x333b7a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x333b78a0 start_wqthread + 4

Thread 0 crashed with ARM Thread State (32-bit):
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000000      r3: 0x3bf46534
    r4: 0x00000006    r5: 0x3bf46b88      r6: 0x1d5daa34      r7: 0x2fd33ae4
    r8: 0x1d5daa10    r9: 0x00000300     r10: 0x00000001     r11: 0x1d59f5d0
    ip: 0x00000148    sp: 0x2fd33ad8      lr: 0x333e0123      pc: 0x32c07350
  cpsr: 0x00000010

Binary Images:
   0x24000 -    0x36fff +MixMe armv7  <8782835ae4a33cbd9087976f2121601c> /var/mobile/Applications/F275D02E-5A9B-496E-ACEF-0630D800A949/MixMe.app/MixMe
0x2fec9000 - 0x2fee9fff  dyld armv7  <75594988728831d98e1f7c4c7b7ca29d> /usr/lib/dyld
0x31ced000 - 0x31da0fff  EventKit armv7  <8dbff0bfcf833661827a76b9adb64d70> /System/Library/Frameworks/EventKit.framework/EventKit
0x31da1000 - 0x31da1fff  libunwind.dylib armv7  <85e7546accc23ae1a973da4758512b7f> /usr/lib/system/libunwind.dylib
0x31db3000 - 0x31db3fff  libsystem_blocks.dylib armv7  <993c9bfe8bf031548b9ddba63cc17015> /usr/lib/system/libsystem_blocks.dylib
0x31dd8000 - 0x31e06fff  Security armv7  <be87724ccad837479efd45ca9f2c6b2c> /System/Library/Frameworks/Security.framework/Security
0x31e07000 - 0x31e1dfff  libsystem_kernel.dylib armv7  <f167dacec44b3a86a8eee73400ff7a83> /usr/lib/system/libsystem_kernel.dylib
0x31e3c000 - 0x32014fff  ImageIO armv7  <fdfa8aa6307235b29435e5c8f6bc9819> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x3201d000 - 0x32430fff  FaceCoreLight armv7  <0cb7a12beb3d32c1abd1834be8328b7c> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x3243f000 - 0x32509fff  Celestial armv7  <1a048f93218d3551984b2d07e884694c> /System/Library/PrivateFrameworks/Celestial.framework/Celestial
0x32516000 - 0x3251bfff  CrashReporterSupport armv7  <7bde3532f2953f3894eb725379575926> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x325bf000 - 0x325c1fff  libCoreVMClient.dylib armv7  <e57152bacb36350e8a023e0c1b540a0c> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x325c2000 - 0x32648fff  libsystem_c.dylib armv7  <d45dc8901531343caf9b7e703d3eba50> /usr/lib/system/libsystem_c.dylib
0x32649000 - 0x32736fff  libiconv.2.dylib armv7  <faa5abb937e3306ab87c7f7c38315839> /usr/lib/libiconv.2.dylib
0x3273b000 - 0x32792fff  SAObjects armv7  <93fe8149b03538edb4b78bd374050a00> /System/Library/PrivateFrameworks/SAObjects.framework/SAObjects
0x32862000 - 0x32885fff  MobileSync armv7  <986186369add34f1be231f5a47d2fd2c> /System/Library/PrivateFrameworks/MobileSync.framework/MobileSync
0x32886000 - 0x32899fff  MediaStream armv7  <5a61a18eb84c3c45b5fe72c0d4ed0da8> /System/Library/PrivateFrameworks/MediaStream.framework/MediaStream
0x328a2000 - 0x32927fff  MessageUI armv7  <acd711b4e9cb3bdba768a884c4d6976a> /System/Library/Frameworks/MessageUI.framework/MessageUI
0x32928000 - 0x3292dfff  Marco armv7  <755b00548c863f939bf1409f03f2b3ad> /System/Library/PrivateFrameworks/Marco.framework/Marco
0x3292e000 - 0x329abfff  HomeSharing armv7  <9126a007a413357b8c0275cc505cb197> /System/Library/PrivateFrameworks/HomeSharing.framework/HomeSharing
0x32ab8000 - 0x32adefff  libtidy.A.dylib armv7  <134c41c587fb33dca014bd525f68a0c7> /usr/lib/libtidy.A.dylib
0x32adf000 - 0x32b17fff  Preferences armv7  <7f5abc69d8773b78a90953d4702337d5> /System/Library/PrivateFrameworks/Preferences.framework/Preferences
0x32b18000 - 0x32b35fff  libdispatch.dylib armv7  <4abccf75caf33fa5a0c6037b2e1c5f41> /usr/lib/system/libdispatch.dylib
0x32b4c000 - 0x32b55fff  libbz2.1.0.dylib armv7  <5258dce78afc3fd7934a5674b92ad785> /usr/lib/libbz2.1.0.dylib
0x32b56000 - 0x32cfcfff  JavaScriptCore armv7  <6b14c224c0e0306aa9084679ec6a99d2> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x32cff000 - 0x32d49fff  libc++.1.dylib armv7  <a361a382693032b9bdfb2860033b3024> /usr/lib/libc++.1.dylib
0x32d4a000 - 0x32deafff  UIFoundation armv7  <795a2f216cc3379c95eb645c633cc527> /System/Library/PrivateFrameworks/UIFoundation.framework/UIFoundation
0x32e55000 - 0x32f3cfff  CoreMediaStream armv7  <f73b3cbd58613a6d849055e49e04b8a1> /System/Library/PrivateFrameworks/CoreMediaStream.framework/CoreMediaStream
0x32f3d000 - 0x32f44fff  MobileIcons armv7  <c7b5eb7ec2283f0b9611448ddccdd352> /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
0x32f87000 - 0x32fd0fff  IOKit armv7  <c4786e65ac913839b1bb3b85a9c951fa> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x330a4000 - 0x339d3fff  WebCore armv7  <cd34aedf72653d1dbef6b14fdfd0c053> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x33b80000 - 0x33b85fff  libcopyfile.dylib armv7  <15aa2c3c8d523273913d4fc6717d3b7c> /usr/lib/system/libcopyfile.dylib
0x33bdd000 - 0x33d1bfff  vImage armv7  <a7fd7fcd7041356db2ca297402ab6e8c> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x340dc000 - 0x3410afff  ToneLibrary armv7  <eccac0a42bbf3705aa5871a98f5dcad8> /System/Library/PrivateFrameworks/ToneLibrary.framework/ToneLibrary
0x3411e000 - 0x3412ffff  libvMisc.dylib armv7  <a3d025234d1a3880a0e5f87879633ee0> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x34130000 - 0x34135fff  IOMobileFramebuffer armv7  <3a351ca1d4ae3146a787f3e13564294b> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x34136000 - 0x34138fff  OAuth armv7  <d3e2bc9ae64b31f0a89c52dc1c2797fc> /System/Library/PrivateFrameworks/OAuth.framework/OAuth
0x34146000 - 0x34149fff  MobileInstallation armv7  <e6b6ae9d4f5f3831a40fcc370afc1429> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x34151000 - 0x3420afff  Message armv7  <c854843dec583b33a72a9fe047d20f0c> /System/Library/PrivateFrameworks/Message.framework/Message
0x3421d000 - 0x3421dfff  vecLib armv7  <66204595f7653ef29e5e26cb8629177a> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x3421e000 - 0x3422afff  AccountSettings armv7  <0b7524e9a8ef36bf9e9f6a5c445478af> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x342c5000 - 0x342c6fff  libsystem_sandbox.dylib armv7  <46cd200d99323aebbf6d81e5fb16424f> /usr/lib/system/libsystem_sandbox.dylib
0x342ed000 - 0x34330fff  ImageCapture armv7  <d6bb733655eb36a983e1d583cd5a5301> /System/Library/PrivateFrameworks/ImageCapture.framework/ImageCapture
0x34331000 - 0x3436bfff  iTunesStore armv7  <4ff9158eb0583316b34506904b21a4f3> /System/Library/PrivateFrameworks/iTunesStore.framework/iTunesStore
0x34378000 - 0x344c6fff  MusicLibrary armv7  <262f509dae9f3c128f25163a7029685b> /System/Library/PrivateFrameworks/MusicLibrary.framework/MusicLibrary
0x344c7000 - 0x344e4fff  TelephonyUI armv7  <d8c2944a65033ea0a0662ca6ca52b221> /System/Library/PrivateFrameworks/TelephonyUI.framework/TelephonyUI
0x34500000 - 0x34501fff  libremovefile.dylib armv7  <6a0dd04f0710329b9c1722db2235f5c3> /usr/lib/system/libremovefile.dylib
0x34502000 - 0x34502fff  liblangid.dylib armv7  <a04b639c18593885bd81bfa623a6f07c> /usr/lib/liblangid.dylib
0x345c5000 - 0x345ccfff  OpenGLES armv7  <e035b741746c316dba8f1e59a568bf17> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x345e0000 - 0x34616fff  MIME armv7  <32427c81a9933c4796d1a37a88a3ac44> /System/Library/PrivateFrameworks/MIME.framework/MIME
0x34617000 - 0x34715fff  libobjc.A.dylib armv7  <5224e803eca737a4b2c6451d136b3d28> /usr/lib/libobjc.A.dylib
0x34716000 - 0x34721fff  GraphicsServices armv7  <c5879083e8693aba827c78a32abe2391> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x34722000 - 0x3472cfff  IAP armv7  <6703a23c7d263f33992f15c7f407b50a> /System/Library/PrivateFrameworks/IAP.framework/IAP
0x34894000 - 0x3489bfff  libsystem_notify.dylib armv7  <6e39f8511ecc3c3489829714eb6fde12> /usr/lib/system/libsystem_notify.dylib
0x3489c000 - 0x34a51fff  CoreData armv7  <a42aa4f0f01833c390bc8c6c394dda1c> /System/Library/Frameworks/CoreData.framework/CoreData
0x34a52000 - 0x34a57fff  liblaunch.dylib armv7  <021ff140d6003f3281dfa29b79fa9e6e> /usr/lib/system/liblaunch.dylib
0x34a58000 - 0x34b46fff  GeoServices armv7  <6af26ce81030330b97122ba8c1deaaa2> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x34b7b000 - 0x34c90fff  QuartzCore armv7  <d96571a6986c3012b315cb860f4d65ca> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x34cb5000 - 0x34d32fff  Social armv7  <e723e791cd6434ab8be83c52f3ad2180> /System/Library/Frameworks/Social.framework/Social
0x352b1000 - 0x352c4fff  libc++abi.dylib armv7  <c5a5f03138353747b539e620ef2bb5c0> /usr/lib/libc++abi.dylib
0x352ce000 - 0x3530bfff  FTServices armv7  <aa7fe75a69d538b2a80efa63e3484b2a> /System/Library/PrivateFrameworks/FTServices.framework/FTServices
0x3530c000 - 0x353b9fff  libxml2.2.dylib armv7  <ef245c0afc113f54b6f30921671edab2> /usr/lib/libxml2.2.dylib
0x353ba000 - 0x353bbfff  libdyld.dylib armv7  <3a149b4730663b1ea84e4a0a68ccc689> /usr/lib/system/libdyld.dylib
0x35481000 - 0x35481fff  Accelerate armv7  <22bee3e96cbc3538bfc50ca5be618cc0> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x354cf000 - 0x354d1fff  MessageSupport armv7  <44d449b4959a33b99d4ab4a9cd161ee6> /System/Library/PrivateFrameworks/MessageSupport.framework/MessageSupport
0x354d3000 - 0x3551ffff  QuickLook armv7  <ac70bd1a745e3402b9bcd484f34c4203> /System/Library/Frameworks/QuickLook.framework/QuickLook
0x35520000 - 0x35548fff  PrintKit armv7  <a8ef6136b9773d42ac20f7eb54279039> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x35549000 - 0x35578fff  BulletinBoard armv7  <9c82497b35e5351cbf696f30de01d81e> /System/Library/PrivateFrameworks/BulletinBoard.framework/BulletinBoard
0x35584000 - 0x355ddfff  libvDSP.dylib armv7  <ad4c53081a263f0d96f63b9a80f2ae91> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x35633000 - 0x35642fff  CoreVideo armv7  <092f3aa965803a1aaea69af2ac5143f5> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x35674000 - 0x3568afff  libCRFSuite.dylib armv7  <9b3fd56781103f209be2c43e48c1efc9> /usr/lib/libCRFSuite.dylib
0x35698000 - 0x356fafff  CoreText armv7  <4a0bece315e9316fa1aa1b5923740f55> /System/Library/Frameworks/CoreText.framework/CoreText
0x356fb000 - 0x35730fff  libcorecrypto.dylib armv7  <ebd023957d853fa8bd35309592e92dac> /usr/lib/system/libcorecrypto.dylib
0x35d60000 - 0x36015fff  libLAPACK.dylib armv7  <dd6f3958c3d536d6be90836682d2ffee> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x360f9000 - 0x3637efff  MediaToolbox armv7  <a1df6dd0733233d3b1cba9cddf3991f6> /System/Library/Frameworks/MediaToolbox.framework/MediaToolbox
0x3637f000 - 0x36444fff  CFNetwork armv7  <3e973794a4d13428bb974edcb2027139> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x36457000 - 0x3646ffff  EAP8021X armv7  <034c653573c233f08edf67e516d66097> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x36486000 - 0x369d9fff  UIKit armv7  <98789fe7c21b3fe0bf5c0bb36648147f> /System/Library/Frameworks/UIKit.framework/UIKit
0x369da000 - 0x36a52fff  IMCore armv7  <552805a4634630bbaad2bc9d862d7196> /System/Library/PrivateFrameworks/IMCore.framework/IMCore
0x36a58000 - 0x36a5cfff  libGFXShared.dylib armv7  <6a8f59f89218372d9f24c4193a179008> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x36a5d000 - 0x36b8ffff  CoreFoundation armv7  <e30fc309df7b3c9f8ac57f0f6047d65f> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x36baf000 - 0x36bb1fff  TCC armv7  <f641dd0500fa3f0087d93da665ea84b8> /System/Library/PrivateFrameworks/TCC.framework/TCC
0x36bb2000 - 0x36bc0fff  libsystem_network.dylib armv7  <d0fb0eda6cb53a4da859d598c59e7522> /usr/lib/system/libsystem_network.dylib
0x36bc1000 - 0x36c26fff  CoreMedia armv7  <d227864b757e3a7ea5d7d96dcbb948fe> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x36c27000 - 0x36c28fff  DataMigration armv7  <25f8874067393208acc083124bc3eb86> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x36c29000 - 0x36c35fff  libz.1.dylib armv7  <a3bba3842596315a81aa171a8bbda7b5> /usr/lib/libz.1.dylib
0x36e24000 - 0x36e3ffff  libRIP.A.dylib armv7  <6e5f3b4c18e137e0a464fe13095b7dab> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x36e40000 - 0x36e49fff  MobileWiFi armv7  <43de6d03af0838f2a1eeec10d4149e9d> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x36e4a000 - 0x36e5cfff  DataAccessExpress armv7  <131d8cf4df333df3b8487ef93438e27c> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x36e5d000 - 0x36e61fff  IOSurface armv7  <1f598a3806073bdaa906c51dccc9429e> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x36e62000 - 0x36e68fff  libcommonCrypto.dylib armv7  <690aaa493b5c3f9582499f174adf4964> /usr/lib/system/libcommonCrypto.dylib
0x36e69000 - 0x36eddfff  ProofReader armv7  <cc89a352199a393ba0e46af69e670ef9> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x36ede000 - 0x36fb6fff  StoreServices armv7  <9da3466c9cf13402a9f0412065f0ada7> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x37039000 - 0x371d1fff  MediaPlayer armv7  <45ee55956c693d8cb16dc4c4e85075e4> /System/Library/Frameworks/MediaPlayer.framework/MediaPlayer
0x37258000 - 0x3725bfff  AggregateDictionary armv7  <20bde7d58a573f2fbd5d6458d4e50ef8> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x3725c000 - 0x3726dfff  Accounts armv7  <07b95faa96e73ffeb52694cbad7f3528> /System/Library/Frameworks/Accounts.framework/Accounts
0x3726e000 - 0x37275fff  XPCObjects armv7  <5bc4f7282e9d3945a6c1885217670667> /System/Library/PrivateFrameworks/XPCObjects.framework/XPCObjects
0x37276000 - 0x37321fff  MediaControlSender armv7  <fba51e235adc368b8132db578723a8fa> /System/Library/PrivateFrameworks/MediaControlSender.framework/MediaControlSender
0x37337000 - 0x37354fff  CoreServicesInternal armv7  <0162575a2e8b35d2915faee400c2bf30> /System/Library/PrivateFrameworks/CoreServicesInternal.framework/CoreServicesInternal
0x3739f000 - 0x373f5fff  CoreAudio armv7  <a3a2eb3a29443b42a23aa8ecb1232846> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x3741a000 - 0x3741dfff  libmacho.dylib armv7  <2a9fe0b48f473d0f8fe2bf076cd12753> /usr/lib/system/libmacho.dylib
0x3743a000 - 0x37458fff  WebBookmarks armv7  <012ed1a1f54a3d6d836e2836781d4f73> /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks
0x376f1000 - 0x377abfff  AddressBookUI armv7  <5c030d99a0113ceda2ae375d348e4cdb> /System/Library/Frameworks/AddressBookUI.framework/AddressBookUI
0x377fa000 - 0x377fefff  CoreTime armv7  <64b6ebc5f456385499036668607d6546> /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime
0x377ff000 - 0x37816fff  BackBoardServices armv7  <e3eb5191f83339a1abad4c332c1b9d83> /System/Library/PrivateFrameworks/BackBoardServices.framework/BackBoardServices
0x37817000 - 0x37830fff  DictionaryServices armv7  <e1f8d258d02c344cb0d17cec31818d3f> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x37831000 - 0x37837fff  XPCKit armv7  <f5f6cb3e6f353b42ae56f748811ab2c5> /System/Library/PrivateFrameworks/XPCKit.framework/XPCKit
0x37859000 - 0x3786efff  libxpc.dylib armv7  <9fbb123276823c2383fc34b7a55404d7> /usr/lib/system/libxpc.dylib
0x378d5000 - 0x3792afff  CoreTelephony armv7  <54708e241c5c3e2297c2fca0d685497d> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x3794f000 - 0x37955fff  libsystem_dnssd.dylib armv7  <6c1c1aaf9a3537d7ada4b519d14da7ab> /usr/lib/system/libsystem_dnssd.dylib
0x37956000 - 0x379ddfff  CoreMotion armv7  <537e5776244f3ef5a355f8fd14a72a22> /System/Library/Frameworks/CoreMotion.framework/CoreMotion
0x379de000 - 0x37a37fff  MobileCoreServices armv7  <d831f1f9285535acac5035a29d84aaaf> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x37a38000 - 0x37a58fff  libxslt.1.dylib armv7  <7f6f63b31f333c41952f685fdd54a6cb> /usr/lib/libxslt.1.dylib
0x37a7d000 - 0x37a99fff  libsystem_m.dylib armv7  <7b2a25c750063de480f6a691f716b9d7> /usr/lib/system/libsystem_m.dylib
0x37aa3000 - 0x37aa3fff  libCVMSPluginSupport.dylib armv7  <1fd63e8305ab3ca190b1ef6ab2555f9d> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x37bd9000 - 0x37e5ffff  AudioToolbox armv7  <6a4804d0e35e362dbad6f047c25227ca> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x37e80000 - 0x37e8ffff  MobileDeviceLink armv7  <5c91ef875c5931a1a26e227ddfd7262d> /System/Library/PrivateFrameworks/MobileDeviceLink.framework/MobileDeviceLink
0x37f0f000 - 0x37f1cfff  ApplePushService armv7  <60dbc7ab243435e099e19bdd3fa83dbb> /System/Library/PrivateFrameworks/ApplePushService.framework/ApplePushService
0x37f1d000 - 0x37f68fff  libstdc++.6.dylib armv7  <55a7612b28c43cfcad7089b688591b80> /usr/lib/libstdc++.6.dylib
0x37f69000 - 0x37fa6fff  libGLImage.dylib armv7  <7db25f3d55b93f31868e37326fba1e57> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x37fb9000 - 0x37fc0fff  CaptiveNetwork armv7  <c1a469c6ca4a3718bef325ec0f4e1885> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x37fc1000 - 0x37fc9fff  ProtocolBuffer armv7  <359ccc7700c93d58adbbd74ecfda80d9> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x37feb000 - 0x37ff5fff  MailServices armv7  <f31a7844317a3f2484cffe092e9fd7c2> /System/Library/PrivateFrameworks/MailServices.framework/MailServices
0x38293000 - 0x3829cfff  AssetsLibraryServices armv7  <e51cbfefefbc30b6b47d99739123033e> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x3829d000 - 0x382a3fff  MobileKeyBag armv7  <a81d768a49cf37a1a111594d39cea3fe> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x382aa000 - 0x382d7fff  MobileAsset armv7  <23e6b8ea85dd3dea84d8c295b4777753> /System/Library/PrivateFrameworks/MobileAsset.framework/MobileAsset
0x382d8000 - 0x382f5fff  PersistentConnection armv7  <8e4d21f987d4334e927222c28ff1130b> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x3833e000 - 0x3841afff  WebKit armv7  <73fa195f63bc32c29060ac0fecabdca6> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x3859c000 - 0x385b1fff  libresolv.9.dylib armv7  <e79b59a3406f34d9b37f8085955115ce> /usr/lib/libresolv.9.dylib
0x385e9000 - 0x385e9fff  libkeymgr.dylib armv7  <8a2e3a8fdf9335e2867a33e2d1a9baf8> /usr/lib/system/libkeymgr.dylib
0x385ff000 - 0x3863afff  AppSupport armv7  <74ed50d2f7d23ce696b029dd817749c0> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x3863b000 - 0x3863ffff  FTClientServices armv7  <13aa63aa5e2e348ea289e0fd16585890> /System/Library/PrivateFrameworks/FTClientServices.framework/FTClientServices
0x38640000 - 0x38778fff  CoreGraphics armv7  <903960bfcfe93adb943752851f88491e> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x3877a000 - 0x3877afff  libSystem.B.dylib armv7  <f2cad3bd15f63f448a9c5be732c65819> /usr/lib/libSystem.B.dylib
0x3877b000 - 0x3877cfff  CoreSurface armv7  <b3f9d4e8dd803a48b88c58a0663d92a3> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x38a5e000 - 0x38b44fff  AVFoundation armv7  <23a8a62a06b03cbcbe7659918951c9f3> /System/Library/Frameworks/AVFoundation.framework/AVFoundation
0x38b45000 - 0x38d08fff  Foundation armv7  <2e1ac190c4f837e2a1059043dd7b1c63> /System/Library/Frameworks/Foundation.framework/Foundation
0x38df2000 - 0x38dfbfff  MediaRemote armv7  <dbc251adcad43e72a31427f836a060cd> /System/Library/PrivateFrameworks/MediaRemote.framework/MediaRemote
0x38e00000 - 0x38e06fff  libAccessibility.dylib armv7  <9e8bfe02e370375ea8439ab895528982> /usr/lib/libAccessibility.dylib
0x38e07000 - 0x38e2bfff  Bom armv7  <c76b4156e0463ecb922608d44c126d86> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x38e2c000 - 0x39249fff  TextInput armv7  <ee57be9a7f723604afa6f27f85ea8b1d> /System/Library/PrivateFrameworks/TextInput.framework/TextInput
0x39278000 - 0x39290fff  AssistantServices armv7  <a1444bc3ce433abb8dad2010d43cb41d> /System/Library/PrivateFrameworks/AssistantServices.framework/AssistantServices
0x39291000 - 0x3929dfff  libbsm.0.dylib armv7  <e98708fbfa683df2a91d45dc765071a7> /usr/lib/libbsm.0.dylib
0x392cf000 - 0x39418fff  libicucore.A.dylib armv7  <0253932c1b9038a0849ef73c38e076ca> /usr/lib/libicucore.A.dylib
0x39421000 - 0x39432fff  SpringBoardServices armv7  <22255260ec6436d19176696422441c40> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x39435000 - 0x3948dfff  ManagedConfiguration armv7  <9d006173bfcc3001b45c44b8e78833ed> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x3948e000 - 0x394a1fff  AirTraffic armv7  <b588b9fdc83d369db76f1ad5ebf2a4fa> /System/Library/PrivateFrameworks/AirTraffic.framework/AirTraffic
0x394a2000 - 0x394ddfff  iCalendar armv7  <d5f593ead35b38a98d6cfd4a243e0172> /System/Library/PrivateFrameworks/iCalendar.framework/iCalendar
0x3955e000 - 0x3959afff  DataAccess armv7  <bd40f7ec5a9c3df7b4a575fffc25c14f> /System/Library/PrivateFrameworks/DataAccess.framework/DataAccess
0x395d7000 - 0x395effff  libsystem_info.dylib armv7  <be3d5625aed733ffb2d53400655fe110> /usr/lib/system/libsystem_info.dylib
0x39607000 - 0x3963afff  AppleAccount armv7  <2af09d814a5a382192613b68b9327d49> /System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount
0x39640000 - 0x39661fff  libarchive.2.dylib armv7  <7f34860fb038355c8b54b6098be55b46> /usr/lib/libarchive.2.dylib
0x39664000 - 0x3969afff  MMCS armv7  <4cbc5fa9369231f392390328d492488a> /System/Library/PrivateFrameworks/MMCS.framework/MMCS
0x3969b000 - 0x3969bfff  TextInput_he armv7  <eaf52ca9fcb33378b1488dd98b287de2> /System/Library/TextInput/TextInput_he.bundle/TextInput_he
0x3969f000 - 0x396ddfff  VideoToolbox armv7  <bfc75ceef01e366e8335949abf037d4b> /System/Library/Frameworks/VideoToolbox.framework/VideoToolbox
0x39713000 - 0x39743fff  ContentIndex armv7  <25cc27c7fdac34e6ae5e057c048a3e21> /System/Library/PrivateFrameworks/ContentIndex.framework/ContentIndex
0x3974d000 - 0x39754fff  liblockdown.dylib armv7  <257ecb171a363e4298a63f72d7fffea2> /usr/lib/liblockdown.dylib
0x39b23000 - 0x39b38fff  libmis.dylib armv7  <3afeeea531013420af75315d8d6dd332> /usr/lib/libmis.dylib 
```

这个应用程序处理许多图像和 3 个滚动视图，形成一个 plist 文件。而且我在崩溃日志中找不到什么问题，以及导致应用程序崩溃的对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T15:56:32.493

堆栈跟踪表明您似乎正在对集合进行快速枚举，同时更改它 (__NSFastEnumerationMutationHandler) 作为对内存不足通知 (_performMemoryWarning) 的响应。

换句话说，在您的低内存处理程序中，您可能正在迭代 [something] 的集合并在循环时更改集合。也许您正在循环某种缓存并尝试从循环中的缓存中删除键？

# c - 为什么 gtk_show_uri 修剪我的网址？

> ID：12553735
> 
> 赞同：0
> 
> 时间：2012-09-23T15:48:40.260
> 
> 标签：c, gtk

我正在尝试重新编译 gtk 应用程序，而不是启动`g:help`浏览器，我想在我的文件系统上启动默认浏览器和 html 文件。我将源代码修改为：

```
#define APP_HELP "file://usr/local/share/doc/APP/APP.html"

    /*ret = gtk_show_uri (gtk_widget_get_screen (GTK_WIDGET (parent)),
                        link, 
                GDK_CURRENT_TIME, 
                &error);*/
    ret = gtk_show_uri (gtk_widget_get_screen (GTK_WIDGET (parent)),
                        APP_HELP, 
                GDK_CURRENT_TIME, 
                &error); 
```

但是当我启动帮助时，我看到以下错误：

![在此处输入图像描述](../Images/51689ca6365cc13ba28dab8adbcfa1c9.png)

怎么了`/usr`？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:03:19.553

在 Kwariz 有用的评论之后结束这个问题：

```
because the URI should begin with file:///usr/.... 
```

# windows-phone-7 - wp7 - stringformat 更改文本块 stringformat 的英制和公制

> ID：12553738
> 
> 赞同：0
> 
> 时间：2012-09-23T15:48:54.957
> 
> 标签：windows-phone-7, string-formatting, metric

大家好，我做了一些不太好的事情，我应该说。现在，当我的应用程序处于最后阶段并且接近完成时，我需要有一个设置页面，我可以在其中设置度量单位是英制还是公制。

我现在遇到的问题是我有 20 个文本块绑定到不同的滑块，如下所示：

```
<TextBlock x:Name="spring" Text="Spring" />
<TextBlock Text="{Binding Path=Value, Mode=TwoWay,StringFormat='0.00 inch', ElementName=springslider}" Margin="300,-21,0,0" x:Name="springData" />
<Slider Name="springslider" Background="{StaticResource PhoneAccentBrush}" Maximum="1" Minimum="0" SmallChange="5" /> 
```

在文本块文本绑定中，我将 StringFormat 设置为 0.00 英寸，如果我选择公制，我希望它将 stringformat 更改为 0.0 mm。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T18:21:17.273

编写一个字符串转换器类，该类将根据您设置的设置属性获取值并返回不同的值 - 类似于以下内容：

```
public class StringFormatConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {
        if (Settings.FormatSetting == FormatSettings.Metric)
            return (string)value + " mm";
        else return (string)value + " inch";
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        return value;
    }
} 
```

然后将转换器添加到您的资源字典之一：

```
<common:StringFormatConverter x:Key="StringFormatConverter" /> 
```

然后在像这样绑定时使用它：

```
<TextBlock Text="{Binding Path=Value, Mode=TwoWay, Converter={StaticResource StringFormatConverter}, ElementName=springslider}" Margin="300,-21,0,0" x:Name="springData" /> 
```

# objective-c - 关于只读属性目标c的3个问题

> ID：12553740
> 
> 赞同：-2
> 
> 时间：2012-09-23T15:49:04.990
> 
> 标签：objective-c

我一直在尝试围绕 readonly 属性进行思考，我可以对我编写的一些代码进行一些澄清。我的标题中有一个`@property (nonatomic, readonly) BOOL test;`，我在我的 .m 中写了这个

```
-(BOOL)test{
    test = (a == b) && (b < c);
    return test;
}

if (self.test) {
    NSLog(@"a is less than c");
}
else {
    NSLog(@"a is equal or greater than c")
} 
```

所以我有几个基于此的问题。当我编译它时，它已经知道什么`test`是正确的？我不必写或`[self test]`对吗？为什么在声明中它必须是而不只是测试。在测试方法中，我可以返回更多而不是测试吗？就像我可以返回测试然后在它下面写返回然后返回，如果它们都是布尔的？`viewDidLoad``init``if``self.test``test1``test 2`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T16:10:46.020

```
-(BOOL)test{
    test = (a == b) && (b < c);
    return test;
} 
```

在这种情况下`test`，它只是一个局部变量，用于保存您正在计算的值。它不在函数之外使用，调用什么也没关系。您可以在方法中替换`test`为`foo`，它仍然可以工作。

```
if (self.test) {
    NSLog(@"a is less than c");
}
else {
    NSLog(@"a is equal or greater than c")
} 
```

在这种情况下，您之所以调用它，是`self.test`因为`test`它不是类中的变量，而是一个属性，其值由方法返回。这就是为什么你调用属性而不是仅仅`test`因为没有`test`变量，只是一个属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:10:50.393

> 当我编译它时，它已经知道什么测试是正确的？

好吧，编译器会知道你声明了一个属性`test`。

> 我不必在 viewDidLoad 或 init 中写 [self test] 对吗？

不。

> 为什么在 if 语句中它必须是 self.test 而不仅仅是测试？

这是因为您声明了一个 property `test`。要访问底层 ivar `_test`，您必须使用它的访问器，或者`_test`直接访问，假设您已经合成了它，或者您正在使用能够自动合成的 Xcode 版本。

> 在测试方法中，我可以返回更多而不是测试吗？

你可以在 getter 方法中返回任何你喜欢的东西`test`。当然，按照惯例，您将返回该属性的支持 ivar。

> 就像我可以返回 test 然后在它下面写 [sic] 返回 test1 然后返回 test 2（如果它们都是 BOOL 的话）？

不，getter 方法需要返回与声明的属性相同的类型。

我认为您最好阅读声明的属性、它们的使用方式以及它们与实例变量的关系。

# jquery - 如何在 AJAX 调用后使 jQuery 可用

> ID：12553741
> 
> 赞同：0
> 
> 时间：2012-09-23T15:49:05.867
> 
> 标签：jquery, ajax, codeigniter-2

```
jQuery(function ($) {
    $('input.adud').on('click', function() {
        var thisdiv = $(this).parents('div').attr("id");
        var thisform = $(this).parents('form').attr("id");
        var thistable = $(this).parents('form').attr("class");
        var thisbutton = $(this).attr("id");
        var stuff = new Array();
        stuff = $("#"+thisform+" :input");
        stuff.push({name:"table", value:thistable});
        stuff.push({name:"button", value:thisbutton});

        $.ajax({
            url: "<?php echo site_url('clients/ajax/modifyclients');?>",
            type: 'POST',
            data: stuff,
            success: function(msg) {
                $('#'+thisdiv).html(msg);
            }
        });

        return false;
    });
}); 
```

我有一个包含多组表单的页面。每个集合都由一个唯一的`div id`.

每组都有一个用于在顶部输入数据的表单，下面是填充了相关现有数据的表单。

我使用 jQuery 和 AJAX 将数据输入或更新到数据库中。php AJAX 文件返回已操作的完整 html 表单集。

问题是返回的 html 上的按钮不起作用，换句话说，无法进行第二次 AJAX 调用。

我相信我必须使用`.on()`来解决这个问题，但我无法完全掌握它是如何完成的/或如何设置 jQuery 函数。

我知道这个问题已经被问了 100 次，但我想找到适合您特定问题的答案是关键:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T15:50:32.557

最简单的 ：

```
$(document).on('click', 'input.adud', function() { 
```

更好的 ：

找到一个持久元素，其中所有动态添加的输入都在其中并执行

```
$(thisElement).on('click', 'input.adud', function() { 
```

使用[on 时](http://api.jquery.com/on/)，您必须将其应用于尚未存在且稍后仍将存在的集合，并提供可以单击的元素（可能稍后出现）的选择器。

# java - 无法解析 JSON

> ID：12553742
> 
> 赞同：0
> 
> 时间：2012-09-23T15:49:10.830
> 
> 标签：java, android, json

我正在尝试解析一些 JSON，但遇到了一些麻烦。

这是我已经尝试过的：

```
ContentValues categories = new ContentValues();     
JSONObject json = new JSONObject(improvedInputStreamAsString);
Iterator keys = json.keys();

while(keys.hasNext()) {
        Object newObj = keys.next();
        String jsonString = newObj.toString();
        if(jsonString == "children") {
            JSONObject newJsn = new JSONObject(jsonString);
            if(newJsn.has("name")) {
                String category = newJsn.getString("name");
                categories.put("categories", category);
            }
        }
    } 
```

我只是想从 中获取类别，`JSONObject`但由于某种原因`jsonString`从未评估为`children`.

这是结构，抱歉，我粘贴了这么多部分，我发现 JSON 真的很混乱，很难在保持其完整性的同时尝试将其削减，请记住我只是想获得该`name`字段：

```
{
  "position": "0",
  "children": [
{
  "position": "1",
  "children": [
    {
      "position": "1",
      "children": [
        {
          "position": "3",
          "children": [

          ],
          "category_id": "9",
          "level": "3",
          "is_active": "1",
          "name": "Exfoliants",
          "parent_id": "4"
        },
        {
          "position": "4",
          "children": [

          ],
          "category_id": "10",
          "level": "3",
          "is_active": "1",
          "name": "Moisturisers",
          "parent_id": "4"
        },
        {
          "position": "5",
          "children": [

          ],
          "category_id": "11",
          "level": "3",
          "is_active": "1",
          "name": "Treatments",
          "parent_id": "4"
        },
        {
          "position": "6",
          "children": [

          ],
          "category_id": "12",
          "level": "3",
          "is_active": "1",
          "name": "Cleansers",
          "parent_id": "4"
        },
        {
          "position": "7",
          "children": [

          ],
          "category_id": "13",
          "level": "3",
          "is_active": "1",
          "name": "Skin Toners",
          "parent_id": "4"
        },
        {
          "position": "9",
          "children": [

          ],
          "category_id": "15",
          "level": "3",
          "is_active": "1",
          "name": "Serums",
          "parent_id": "4"
        },
        {
          "position": "10",
          "children": [

          ],
          "category_id": "36",
          "level": "3",
          "is_active": "1",
          "name": "Acne and Blemish Treatments",
          "parent_id": "4"
        },
        {
          "position": "11",
          "children": [

          ],
          "category_id": "40",
          "level": "3",
          "is_active": "1",
          "name": "Oils",
          "parent_id": "4"
        }
      ],
      "category_id": "4",
      "level": "2",
      "is_active": "1",
      "name": "Skincare",
      "parent_id": "2"
    },
    {
      "position": "2",
      "children": [
        {
          "position": "1",
          "children": [

          ],
          "category_id": "16",
          "level": "3",
          "is_active": "1",
          "name": "Sunscreen",
          "parent_id": "5"
        },
        {
          "position": "2",
          "children": [

          ],
          "category_id": "31",
          "level": "3",
          "is_active": "1",
          "name": "Insect Repellent & After Bite",
          "parent_id": "5"
        },
        {
          "position": "3",
          "children": [

          ],
          "category_id": "32",
          "level": "3",
          "is_active": "1",
          "name": "After Sun Lotions",
          "parent_id": "5"
        },
        {
          "position": "4",
          "children": [

          ],
          "category_id": "33",
          "level": "3",
          "is_active": "1",
          "name": "Self Tanning Lotions",
          "parent_id": "5"
        }
      ],
      "category_id": "5",
      "level": "2",
      "is_active": "1",
      "name": "Suncare",
      "parent_id": "2"
    },
    {
      "position": "3",
      "children": [
        {
          "position": "1",
          "children": [

          ],
          "category_id": "17",
          "level": "3",
          "is_active": "1",
          "name": "Shampoo",
          "parent_id": "6"
        },
        {
          "position": "2",
          "children": [

          ],
          "category_id": "18",
          "level": "3",
          "is_active": "1",
          "name": "Conditioner",
          "parent_id": "6"
        },
        {
          "position": "3",
          "children": [

          ],
          "category_id": "19",
          "level": "3",
          "is_active": "1",
          "name": "Treatments",
          "parent_id": "6"
        },
        {
          "position": "4",
          "children": [

          ],
          "category_id": "20",
          "level": "3",
          "is_active": "1",
          "name": "Toner",
          "parent_id": "6"
        },
        {
          "position": "6",
          "children": [

          ],
          "category_id": "34",
          "level": "3",
          "is_active": "1",
          "name": "Styling",
          "parent_id": "6"
        },
        {
          "position": "7",
          "children": [

          ],
          "category_id": "39",
          "level": "3",
          "is_active": "1",
          "name": "Serum",
          "parent_id": "6"
        }
      ],
      "category_id": "6",
      "level": "2",
      "is_active": "1",
      "name": "Hair",
      "parent_id": "2"
    },

{
  "position": "0",
  "children": [
    {
      "position": "1",
      "children": [
        {
      "position": "1",
      "children": [
        {
          "position": "3",
          "children": [                
          ],
          "category_id": "9",
          "level": "3",
          "is_active": "1",
          "name": "Exfoliants",
          "parent_id": "4"
        },            
        {
          "position": "6",
          "children": [

          ],
          "category_id": "12",
          "level": "3",
          "is_active": "1",
          "name": "Cleansers",
          "parent_id": "4"
        },
     ],
      "category_id": "4",
      "level": "2",
      "is_active": "1",
      "name": "Skincare",
      "parent_id": "2"
    },
    {
      "position": "2",
      "children": [
        {
          "position": "1",
          "children": [

          ],
          "category_id": "16",
          "level": "3",
          "is_active": "1",
          "name": "Sunscreen",
          "parent_id": "5"
        }, 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-23T16:38:15.010

您需要使用 String.equals() 来比较字符串：

```
if(jsonString.equals("children")) { ... } 
```

jsonString == "children" 比较对象引用，而不是字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T13:35:30.907

***children***是一个包含 JSON 数组的 JSON 对象。

您可以通过以下方式调用从 JSON 对象中提取***子对象：***

```
 JSONObject json=new JSONObject(improvedInputStreamAsString);
    JSONObject json1=json.getJSONObject("children"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T15:27:57.120

我会为此推荐两个库，一个已经在上面提到过，但为了清楚起见。

**杰克逊**

[http://jackson.codehaus.org/](http://jackson.codehaus.org/)

**GSON**

[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-23T17:29:32.733

我觉得问题是

`keys.next()`不会按预期返回对象，而是返回迭代器的下一个键。因此尝试以下

```
while(keys.hasNext()) {
    String key = keys.next();
    if(key.equals("children")) {
        //this might throw exception, surround with try catch block
        JSONObject newJsn = new JSONObject(json.get(key));
        if(newJsn.has("name")) {
            String category = newJsn.getString("name");
            categories.put("categories", category);
        }
    }
} 
```

由于 JSON 字符串似乎在重复一种格式，因此最好编写一个递归函数来完成您的任务。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-23T16:53:24.337

它更好地`Jackson`用于解析`JSON`。

**请参阅此链接：**

[http://jackson.codehaus.org/](http://jackson.codehaus.org/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T15:23:09.220

首先使您的 Json 有效

```
String str="{   \"position\": \"0\",    \"children\": [        {            \"position\": \"1\",            \"children\": [                {                    \"position\": \"1\",                    \"children\": [                        {                            \"position\": \"3\",                            \"children\": [],                            \"category_id\": \"9\",                            \"level\": \"3\",                            \"is_active\": \"1\",                            \"name\": \"Exfoliants\",                            \"parent_id\": \"4\"                        },                        {                            \"position\": \"4\",                            \"children\": [],                            \"category_id\": \"10\",                            \"level\": \"3\",                            \"is_active\": \"1\",                            \"name\": \"Moisturisers\",                            \"parent_id\": \"4\"                        },                        {                            \"position\": \"5\",                            \"children\": [],                            \"category_id\": \"11\",                            \"level\": \"3\",                            \"is_active\": \"1\",                            \"name\": \"Treatments\",                            \"parent_id\": \"4\"                        },                        {                            \"position\": \"6\",                            \"children\": [],                            \"category_id\": \"12\",                            \"level\": \"3\",                            \"is_active\": \"1\",                            \"name\": \"Cleansers\",                            \"parent_id\": \"4\"                        },                        {                            \"position\": \"7\",                            \"children\": [],                            \"category_id\": \"13\",                            \"level\": \"3\",                            \"is_active\": \"1\",                            \"name\": \"Skin Toners\",                            \"parent_id\": \"4\"                        },                        {                            \"position\": \"9\",                            \"children\": [],                            \"category_id\": \"15\",                            \"level\": \"3\",                            \"is_active\": \"1\",                            \"name\": \"Serums\",                            \"parent_id\": \"4\"                        },                        {                            \"position\": \"10\",                            \"children\": [],                            \"category_id\": \"36\",                            \"level\": \"3\",                            \"is_active\": \"1\",                            \"name\": \"Acne and Blemish Treatments\",                            \"parent_id\": \"4\"                        },                        {                            \"position\": \"11\",                            \"children\": [],                            \"category_id\": \"40\",                            \"level\": \"3\",                            \"is_active\": \"1\",                            \"name\": \"Oils\",                            \"parent_id\": \"4\"                        }                    ],                    \"category_id\": \"4\",                    \"level\": \"2\",                    \"is_active\": \"1\",                    \"name\": \"Skincare\",                    \"parent_id\": \"2\"                },                {                    \"position\": \"2\",                    \"children\": [                        {                            \"position\": \"1\",                            \"children\": [],                            \"category_id\": \"16\",                            \"level\": \"3\",                            \"is_active\": \"1\",                            \"name\": \"Sunscreen\",                            \"parent_id\": \"5\"                        },                        {                            \"position\": \"2\",                            \"children\": [],                            \"category_id\": \"31\",                            \"level\": \"3\",                            \"is_active\": \"1\",                            \"name\": \"Insect Repellent & After Bite\",                            \"parent_id\": \"5\"                        },                        {                            \"position\": \"3\",                            \"children\": [],                            \"category_id\": \"32\",                            \"level\": \"3\",                            \"is_active\": \"1\",                            \"name\": \"After Sun Lotions\",                            \"parent_id\": \"5\"                        },                        {                            \"position\": \"4\",                            \"children\": [],                            \"category_id\": \"33\",                            \"level\": \"3\",                            \"is_active\": \"1\",                            \"name\": \"Self Tanning Lotions\",                            \"parent_id\": \"5\"                        }                    ],                    \"category_id\": \"5\",                    \"level\": \"2\",                    \"is_active\": \"1\",                    \"name\": \"Suncare\",                    \"parent_id\": \"2\"                },                {                    \"position\": \"3\",                    \"children\": [                        {                            \"position\": \"1\",                            \"children\": [],                            \"category_id\": \"17\",                            \"level\": \"3\",                            \"is_active\": \"1\",                            \"name\": \"Shampoo\",                            \"parent_id\": \"6\"                        },                        {                            \"position\": \"2\",                            \"children\": [],                            \"category_id\": \"18\",                            \"level\": \"3\",                            \"is_active\": \"1\",                            \"name\": \"Conditioner\",                            \"parent_id\": \"6\"                        },                        {                            \"position\": \"3\",                            \"children\": [],                            \"category_id\": \"19\",                            \"level\": \"3\",                            \"is_active\": \"1\",                            \"name\": \"Treatments\",                            \"parent_id\": \"6\"                        },                        {                            \"position\": \"4\",                            \"children\": [],                            \"category_id\": \"20\",                            \"level\": \"3\",                            \"is_active\": \"1\",                            \"name\": \"Toner\",                            \"parent_id\": \"6\"                        },                        {                            \"position\": \"6\",                            \"children\": [],                            \"category_id\": \"34\",                            \"level\": \"3\",                            \"is_active\": \"1\",                            \"name\": \"Styling\",                            \"parent_id\": \"6\"                        },                        {                            \"position\": \"7\",                            \"children\": [],                            \"category_id\": \"39\",                            \"level\": \"3\",                            \"is_active\": \"1\",                            \"name\": \"Serum\",                            \"parent_id\": \"6\"                        }                    ],                    \"category_id\": \"6\",                    \"level\": \"2\",                    \"is_active\": \"1\",                    \"name\": \"Hair\",                    \"parent_id\": \"2\"                }            ]        }    ]}"; 
```

现在在您的 json 中，您在 JSONArray 中有 JSONArray，它位于另一个 JSONArray 中。所以你必须使用 3 for 循环作为

```
try 
    {

        JSONObject job1=new JSONObject(str);
        JSONArray jarr1=job1.getJSONArray("children");

        for(int i=0;i<jarr1.length();i++)
        {

            JSONObject job2=new JSONObject(jarr1.getString(i));
            JSONArray jarr2=job2.getJSONArray("children");

            for(int j=0;j<jarr2.length();j++)
            {
                JSONObject job3=new JSONObject(jarr2.getString(j));
                System.out.println("job3........"+job3);

                JSONArray jarr3=job3.getJSONArray("children");
                for(int k=0;k<jarr3.length();k++)
                {
                    JSONObject job4=new JSONObject(jarr3.getString(k));
                    System.out.println("name.........."+job4.getString("name"));
                }

            }

        }

    } 
    catch (Exception e) {
        System.out.println("ex..................."+e);
        e.printStackTrace();
    } 
```

它将为您提供所需的名称字段。只需尝试此代码。

# http - 如何使用 Jetty Http 客户端记录 HTTP 请求和响应

> ID：12553743
> 
> 赞同：3
> 
> 时间：2012-09-23T15:49:10.103
> 
> 标签：http, jetty-8

我正在使用 Jetty 的 HttpClient 发送请求。寻找一种在 Trace 中记录请求和响应的方法 - 启用以进行故障排除。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:16:18.163

实际上这类似于其他人询问的关于容器生命周期的问题，这是我的回答：

特别是 RequestLog 是你想要的，因为你可以拦截任何东西并处理它。

LifeCycle 界面相当基本，因为您可以使用它来注册启动、停止、失败等，但据我所知，这并不是真正的请求/响应。

我做了一项研究，发现这可能是最适合你的

[请求日志接口](https://www.eclipse.org/jetty/javadoc/9.4.19.v20190610/org/eclipse/jetty/server/RequestLog.html)

它的超级接口是 LifeCycle。

如果您仍然需要使用 AbstractLifecycle ，只需“实现”它 :) 并覆盖方法并监视基于字符串的事件（STOPPED 等），这一切都在 java doc 中。

干得好

[AbstractLifeCycle - java 文档](https://www.eclipse.org/jetty/javadoc/9.4.19.v20190610/org/eclipse/jetty/util/component/AbstractLifeCycle.html)

# css - 如何将 twitter bootstrap 中的图标颜色更改为深色？

> ID：12553748
> 
> 赞同：1
> 
> 时间：2012-09-23T15:49:20.607
> 
> 标签：css, twitter-bootstrap, icons

问题是当我的菜单选项卡项处于活动状态时（就像这里的第一个选项卡一样） - 图标会自动变为白色并且不可见。如何将图标的颜色更改为黑色？有等级可以使它变白`icon-white`，但没有等级可以使它变暗。

```
<ul class="nav nav-tabs">
<li class="active">
    <a href="#">
        <i class="icon-fire"></i> Newest</a>
</li>
<li>
    <a href="#">
        <i class="icon-star"></i> Most popular</a>
</li>
<li>
    <a href="#">
        <i class="icon-heart"></i> Etc.</a>
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T16:28:06.793

您可以尝试`.active`通过将其添加到您的图标来覆盖样式：（`background-image: url("../img/glyphicons-halflings.png") !important;`您可能需要调整路径，但可能不需要）。

只有两种可用的颜色；默认的深灰色一种，白色的一种。您不能将颜色更改为这两个以外的颜色，因为它们是从静态 sprited中获取的`png`。

要更好地控制此类*图标*的大小及其颜色，请查看[Font Awesome](http://fortawesome.github.com/Font-Awesome/)，它与[Bootstrap](http://twitter.github.com/bootstrap/)集成。它使您可以完全控制，因为图标以矢量格式保存为字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T08:28:57.790

确实有一种改变颜色的方法：

只需转到 **bootstrap.min.css**

并搜索 **.bs-glyphicons li:hover**

并将“**颜色：#fff** ”更改为“**颜色：#000** ”（或您想要的任何颜色）

我为我的一个项目测试了它，它运行良好。希望这对您也有帮助。

# java - java.lang.NoClassDefFoundError: org/springframework/orm/hibernate3/support/HibernateDaoSupport

> ID：12553750
> 
> 赞同：4
> 
> 时间：2012-09-23T15:49:31.783
> 
> 标签：java, spring, hibernate, web

我正在从事Java web开发，使用spring3.1.1+hibernate3.6.0+tomcat7.0.29 + mysql5.5，但是在我的服务器上运行后，Eclipse提示

```
 HTTP Status 500 - Handler processing failed; nested exception is java.lang.NoClassDefFoundError:       org/springframework/orm/hibernate3/support/HibernateDaoSupport 
```

并详细如下，输入异常报告

```
message Handler processing failed; nested exception is java.lang.NoClassDefFoundError:            org/springframework/orm/hibernate3/support/HibernateDaoSupport

description The server encountered an internal error (Handler processing failed; nested exception is java.lang.NoClassDefFoundError:     org/springframework/orm/hibernate3/support/HibernateDaoSupport) that prevented it from fulfilling this request. 
```

例外

```
org.springframework.web.util.NestedServletException: Handler processing failed; nested exception is java.lang.NoClassDefFoundError:       org/springframework/orm/hibernate3/support/HibernateDaoSupport

org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:972)

org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852) 
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778) 
javax.servlet.http.HttpServlet.service(HttpServlet.java:621) 
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
root cause 

java.lang.NoClassDefFoundError:   org/springframework/orm/hibernate3/support/HibernateDaoSupport 
java.lang.ClassLoader.defineClass1(Native Method) 
java.lang.ClassLoader.defineClass(ClassLoader.java:791) 
java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) 
 org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2901)
org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1170) 
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678) 
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556) 
cc.fanbang.api.manager.DBManager.addUser(DBManager.java:139) 
 cc.fanbang.api.controller.TestController.handleDBManagerTestRequest(TestController.java:42)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 
java.lang.reflect.Method.invoke(Method.java:601) 
 org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
  org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
  org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923) 
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852) 
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778) 
javax.servlet.http.HttpServlet.service(HttpServlet.java:621) 
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
root cause 

java.lang.ClassNotFoundException:      org.springframework.orm.hibernate3.support.HibernateDaoSupport 
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711) 
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556) 
java.lang.ClassLoader.defineClass1(Native Method) 
java.lang.ClassLoader.defineClass(ClassLoader.java:791) 
java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) 
org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2901)
org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1170) 
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678) 
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556) 
cc.fanbang.api.manager.DBManager.addUser(DBManager.java:139) 
     cc.fanbang.api.controller.TestController.handleDBManagerTestRequest(TestController.java:42)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 
java.lang.reflect.Method.invoke(Method.java:601) 
   org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
   org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
  org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923) 
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852) 
 org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778) 
javax.servlet.http.HttpServlet.service(HttpServlet.java:621) 
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

我不明白为什么它告诉我没有hibernatedaosupport，我已经将它导入到项目中引用的库和web-inf/lib中。我导入的包如下，

```
 commons-beanutils-1.8.3.jar 
    commons-coder-1.4.jar 
    commons-io-2.3.jar 
    commons-lang-2.6.jar 
    commons-logging-1.1.1.jar 
    ezorph-1.0.6.jar 
    json-lib-2.4-jdk15.jar 
    jstl-1.2.jar 
    org.springframework.asm-3.1.1.release.jar 
    org.springframework.beans-3.1.1.release.jar 
    org.springframework.context-3.1.1.release.jar 
    org.springframework.core-3.1.1.release.jar 
    org.springframework.expression-3.1.1.release.jar 
    org.springframework.web.servlet-3.1.1.release.jar 
    org.springframework.web-3.1.1.release.jar 
    servlet-api.jar 
    antlr-2.7.6 
    c3p0-0.9.1.jar 
    commons-collections-3.1.jar 
    dom4j-1.6.1.jar 
    ehcache-1.5.0.jar 
    hibernate-jpa-2.0-api-1.0.1.final.jar 
    hibernate3.jar 
    javassist-3.12.0.ga.jar 
    jta-1.1.jar 
    mysql-connector-java-5.1.12-bin.jar 
    org.springframework.orm-3.1.1.release.jar 
    org.springframework.jdbc-3.1.1.release.jar 
    org.springframework.aop-3.1.1.release.jar 
    org.springframework.transaction-3.1.1.release.jar 
    slf4j-api-1.6.1.jar 
    slf4j-nop-1.6.1.jar 
```

applicationContext.xml中与事务处理相关的部分内容如下，

```
<bean id="transactionManager"           class="org.springframework.orm.hibernate3.HibernateTransactionManager"> 
    <property name="sessionFactory" ref="sessionFactory" />  
</bean> 

<tx:advice id="txAdvice" transaction-manager="transactionManager"> 
    <tx:attributes> 
        <tx:method name="get*" read-only="true" /> 
        <tx:method name="*" /> 
    </tx:attributes> 
</tx:advice> 

<aop:config> 
    <aop:pointcut id="fbPointcut" expression="bean(dbManager)" /> 
    <aop:advisor advice-ref="txAdvice" pointcut-ref="fbPointcut" /> 
</aop:config> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T16:15:41.137

`NoClassDefFoundError`意味着类加载器找不到`org.springframework.orm.hibernate3.support.HibernateDaoSupport`依赖的类。并不是说它`HibernateDaoSupport`本身就不见了。查找缺少哪个依赖项的最佳方法是查看[`HibernateDaoSupport`](http://kickjava.com/src/org/springframework/orm/hibernate3/support/HibernateDaoSupport.java.htm)

您的类路径中似乎缺少`org.springframework.dao`库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T02:35:39.593

我认为这是因为你`spring-orm`的库中有一个不同版本的 jar，它有这个`org.springframework.orm.hibernate3.support.HibernateDaoSupport`类。

将[spring-orm 3.1 jar](http://search.maven.org/#artifactdetails%7Corg.springframework%7Cspring-orm%7C3.1.1.RELEASE%7Cjar)添加到您的库中。您可以在底部找到 jar 下载链接。

一般来说，如果你得到一个`NoClassDefFoundError`, google 为有类的 jar。[Maven 中央存储库](http://search.maven.org/)是这样做的好地方。

您的 spring aop、jdbc 和事务 jar 也有不同的版本（3.0.7 而不是 3.1.1）。始终使用相同版本的罐子。如果您使用不同版本的 jar，应用程序可能会抛出一些错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T14:34:03.783

> 14.3 Hibernate
> 
> We will start with a coverage of Hibernate 3 in a Spring environment, using it to demonstrate the approach that Spring takes towards integrating O/R mappers. This section will cover many issues in detail and show different variations of DAO implementations and transaction demarcation. Most of these patterns can be directly translated to all other supported ORM tools. The following sections in this chapter will then cover the other ORM technologies, showing briefer examples there.
> 
> Note: **As of Spring 3.0, Spring requires Hibernate 3.2 or later**.

Source: [http://static.springsource.org/spring/docs/current/spring-framework-reference/html/orm.html#orm-hibernate](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/orm.html#orm-hibernate)

Your Hibernate Version is too old.

On re-reading your question, you say you are using Hibernate 3.6, yet you list `hibernate3.jar` among your dependencies. Which is it?

# mysql - 如何有效地计算用户在一个月内执行的操作数？

> ID：12553752
> 
> 赞同：1
> 
> 时间：2012-09-23T15:49:40.803
> 
> 标签：mysql

我有一个包含两个表的数据库：一个表列出了几个用户，另一个表列出了这些用户所做的每个操作、进行操作的用户的 ID 和操作的日期。

我正在尝试计算每个用户每月执行的操作数。我不确定如何有效地做到这一点：有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T15:52:06.207

用于从 and[`MONTH()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_month)中提取月份`DATE`，然后从 and`GROUP BY`中`MONTH`提取月份`USER_ID`：

```
SELECT u.user_id, MONTH(a.date), COUNT(*) number_of_actions
FROM users u INNER JOIN actions a ON (u.user_id = a.user_id)
GROUP BY u.user_id, MONTH(a.date) 
```

此外，如果用户操作跨越多年，并且您希望*2011 年 1 月*和*2012*年 1 月有不同的计数，请按*两者* `YEAR`分组，而`MONTH`不是：

```
SELECT u.user_id, YEAR(a.date), MONTH(a.date), COUNT(*) number_of_actions
FROM users u INNER JOIN actions a ON (u.user_id = a.user_id)
GROUP BY u.user_id, YEAR(a.date), MONTH(a.date) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:54:52.080

如果@Joao Silva 的回答太慢，您可以使用触发器或存储过程进行更新来维护计数，因为操作发生在单独表中的单独表中。如果基于磁盘的表太慢，您可以使用内存表并在服务器重新启动时重建它，或者使用 Redis 实例来保留此信息。

# iphone - iOS 6 自动旋转问题 - 不支持supportedInterfaceOrientations 返回值

> ID：12553754
> 
> 赞同：10
> 
> 时间：2012-09-23T15:50:04.087
> 
> 标签：iphone, objective-c, ipad, ios6, autorotate

我有一个应用程序，其中有一个`UINavigationController`子类作为我的`rootViewController`. 我有一个`UITableViewController`可以让用户编辑一些设置，它应该始终处于纵向模式。在我将 MoviePlayer 组件推送到导航控制器后，我的应用程序还需要支持所有其他方向。

`UITableViewController`子类具有supportedInterfaceOrientations的这种实现：

```
- (NSUInteger)supportedInterfaceOrientations {
    LLog();
    return UIInterfaceOrientationMaskPortrait;
} 
```

日志记录命令告诉我这实际上是被调用的。

问题是不尊重返回值，即当我转动设备时屏幕变为横向。

我该怎么做才能使设置视图始终以纵向显示但允许视频查看器的方向更改？

更多信息：我的`UINavigationController`子类不会覆盖 shouldAutorotate 或supportedInterfaceOrientations。我没有实施

```
 - (NSUInteger)application:(UIApplication *)application 

supportedInterfaceOrientationsForWindow:(UIWindow *)window 
```

我的**AppDelegate**中的方法，并且我已启用目标摘要中的所有方向。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-23T21:31:54.570

我遇到的问题是`ViewControllers`导航堆栈中的一些支持所有方向，一些只支持纵向，但是`UINavigation`控制器正在返回所有应用程序支持的方向，这个小技巧帮助了我。

```
@implementation UINavigationController (iOS6OrientationFix)

-(NSUInteger) supportedInterfaceOrientations {
    return [self.topViewController supportedInterfaceOrientations];
}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T19:27:02.940

您还需要添加：

```
- (BOOL)shouldAutorotate {
    return NO;
} 
```

并将app plist 文件中**根**视图控制器支持的旋转设置为 only `portrait`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T15:04:41.700

`UINavigationController`不适合我的类别。我不知道为什么。我用以下类别解决了我的问题`UIViewController`：

```
@implementation UIViewController (Orientation)

- (BOOL) shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    NSUInteger orientations = UIInterfaceOrientationMaskPortrait;

    if ([self isKindOfClass:[PlayerViewController class]])
    {

        orientations |= UIInterfaceOrientationMaskLandscapeLeft;
        orientations |= UIInterfaceOrientationMaskLandscapeRight;

    }

    return orientations;
}

@end 
```

# ruby-on-rails-3 - 如何使用 Prawn 从 HTML UL 和 OL HTML 标签在 PDF 中创建列表？

> ID：12553755
> 
> 赞同：0
> 
> 时间：2012-09-23T15:50:19.393
> 
> 标签：ruby-on-rails-3, pdf, html-lists, prawn

我正在使用[Prawn](https://github.com/prawnpdf/prawn)从 HTML 源生成我的 PDF 文件。该 HTML 仅包含一些基本格式，例如粗体、斜体、下划线、有序列表和无序列表。对于前三个，Prawn 将负责`:inline_format => true`在`text`命令中使用。

我如何告诉 Prawn 理解`ul`和`ol`标记并将它们转换为 PDF 文件中的列表？我知道我应该使用一些帮手。有人遇到过这种情况吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T17:02:54.210

因此，Prawn 不提供内置的 HTML 解析，因此它不知道`ul`and`li`标签的含义。[大虾的文本框](http://rdoc.info/github/sandal/prawn/master/Prawn/Text/Box)可能是最接近的选择。

编辑：

--

为此，这里有一个小而可行的实现：

说html字符串是`<ul><li>First line</li><li>Second line</li></ul>`

使用任何 Ruby HTML 解析器，您都可以解析这些行。在这里，我使用了 Nokogiri。

```
require 'nokogiri'
require 'prawn'

Prawn::Document.generate "result.pdf" do |pdf|
  Nokogiri::HTML("html_string_above").xpath('//li').each do |node|
    pdf.text_box "#{node.inner_html}"
  end
end 
```

--

使用 html 到 pdf 转换 gem 来实现这一点会容易得多。看看[WickedPDF](https://github.com/mileszs/wicked_pdf)项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T01:25:04.240

我最终自己构建了一个小助手，它可能不是很干净，但似乎与整洁的 HTML 配合得很好

```
def parse_lists(body)
  # add a bullet for each line in a list.
  body = body.gsub(/<li>/, "<li>#{Prawn::Text::NBSP * 3}<font size='20'>  •  </font>")
  # add a line break for any list element, since li, ol and ul will be later removed.
  body.gsub(/<\/ul>/, "</ul><br>").gsub(/<\/li>/, "</li><br>").gsub(/<\/ol>/, "</ol><br>")
end 
```

后来我将其与一些 HTML 清理一起使用，并从`text parse_lists(body), :inline_format => true`Prawn 命令中调用。

我将 Kashyap 的答案标记为正确，因为它可能更加一致，但也留下了这个工作的狙击手，以防它帮助其他人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-25T15:46:11.343

一个好的方法是提供一种使用 Nokogiri**预处理**HTML 字符串的方法，只在文本中保留 Prawn 可以使用“inline_format”选项管理的基本标签：

```
def self.render_html_text(instr)
   # Replacing <p> tag
   outstr = instr.gsub('<p>',"\n")
   outstr.gsub!('</p>',"\n")
   # Replacing <ul> & <li> tags
   doc = Nokogiri::HTML(outstr)
   doc.search('//ul').each do |ul|
     content = Nokogiri::HTML(ul.inner_html).xpath('//li').map{|n| "• #{n.inner_html}\n"}.join
     ul.replace(content)
   end
   #removing some <html><body> tags inserted by Nokogiri
   doc.at_xpath('//body').inner_html
end 
```

# javascript - HTML5 iOS volumechange 事件未触发

> ID：12553757
> 
> 赞同：6
> 
> 时间：2012-09-23T15:50:41.160
> 
> 标签：javascript, html, ios5

我正在尝试`volumechange`在 iPad 上捕获事件，但它没有被触发，尽管我绑定的其他事件是；*如`play`、`pause`、`webkitbegin`、`endfullscreen`等。*

该`volume`值也固定为`1`。当我在 Linux 上使用 Google Chrome 时，我可以看到该`volumechange`事件，并更新了正确的卷。

Apple 声明[`volumechange`](http://developer.apple.com/library/safari/#samplecode/HTML5VideoEventFlow/Listings/events_js.html#//apple_ref/doc/uid/DTS40010085-events_js-DontLinkElementID_5)可以使用该事件。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-05-31T08:26:42.113

[来自Apple Developer](https://developer.apple.com/library/archive/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html#//apple_ref/doc/uid/TP40009523-CH5-SW1)官方文档：

> 在 iOS 设备上，音频电平始终在用户的物理控制之下。音量属性在 JavaScript 中不可设置。读取 volume 属性总是返回 1。

换句话说，我们**无法**以任何方式控制**iOS 上**的音量。

# jquery - 向现有 Jquery/AJAX 网站添加后退/前进/书签支持的最简单方法是什么？

> ID：12553759
> 
> 赞同：1
> 
> 时间：2012-09-23T15:50:51.143
> 
> 标签：jquery, ajax

我是 JavaScript 和 JQuery 的新手，但我可以使用导航。我已经阅读了几个关于实现历史和书签的教程和线程，但它们都高估了我对 JS 的了解。有没有更基本的方法来实现它，不涉及 iframe 和 php 的页面？我正在努力学习而不是在我的头上潜水。

html:

```
<ul id="navigation">        
<li> <a class="nbutton" href="12.html"> a </a> </li>
<li> <a class="nbutton" href="23.html"> b </a> </li>
<li> <a class="nbutton" href="34.html"> c </a> </li>
<li> <a class="nbutton" href="45.html"> d </a> </li>
<li> <a class="nbutton" href="56.html"> e </a> </li>
</ul> 
```

js：

```
<script type="text/javascript">        
$.ajaxSetup 
({ cache: false });

$(document).ready(function(){       
    $(".nbutton").click(function(){
        $("#content").load($(this).attr("href"));
        return false;
    });
});         
</script> 
```

# php - PHP安装\构建

> ID：12553770
> 
> 赞同：0
> 
> 时间：2012-09-23T15:52:07.657
> 
> 标签：php, centos, version, centos6

我已遵循本指南：[http ://www.phamviet.net/2012/06/03/centos-6-2-compile-php-5-4-2-from-source/](http://www.phamviet.net/2012/06/03/centos-6-2-compile-php-5-4-2-from-source/)

一切正常，但是当我完成并在“php --version”之后键入“service httpd restart”时，它仍然显示旧的 5.1.6 PHP 版本。

这是'uname -a'：Linux xxxxxx.com 2.6.32-042stab061.2 #1 SMP Fri Aug 24 09:07:21 MSK 2012 i686 i686 i386 GNU/Linux

这是一个托管在我的主要专用服务器 (OpenVZ) 中的 VPS。

不知道还能说什么，但我感谢任何帮助:)

操作系统：CentOS 6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T16:06:36.843

您是否删除了旧版本的php？`sudo yum remove php`或者（php5，我不记得这个包的名字是如何的）

删除运行`sudo updatedb`并`sudo locate php`删除任何剩余部分（例如/etc/php、/usr/local/php 等）后。注意不要从其他应用程序或包管理器中删除文件。当您的系统干净并且没有旧版本的痕迹时，安装新版本：在完成指南运行的配置步骤之后`make`，然后`sudo make install`

# php - 在从 MySQL 选择添加之前，将对象添加到 PHP 数组

> ID：12553771
> 
> 赞同：-1
> 
> 时间：2012-09-23T15:52:07.663
> 
> 标签：php, arrays, json

我有一个 PHP 页面将 MySQL 选择编码为 JSON。我想添加一个“状态值”作为我数组的第一个对象。

PHP 代码

```
{
//CREATE USER UNKNOWN ARRAY RESULT
$Statusresult = mysql_query("SELECT TEXT_KEY, TEXT_VALUE FROM T_TEXTS WHERE TEXT_KEY = 'USER_FAILED' ") or die(mysql_error());
$Statusrows = array();
while($s = mysql_fetch_assoc($Statusresult)) 
{
    $Statusrows[] = $s;
}
print json_encode($Statusrows); 
```

}

这个结果是：

```
{
"TEXT_KEY" = "USER_FAILED";
"TEXT_VALUE" = "UNKNOWN USER"; 
```

}

我想添加第一个对象手册，以使结果如下所示：

```
 {
    "STATUS" = "1";
    "TEXT_KEY" = "USER_FAILED";
    "TEXT_VALUE" = "UNKNOWN USER";
} 
```

我怎样才能做到这一点 ？

我已经尝试过这种方法，但不知何故有一个错误......

```
{
    //CREATE USER UNKNOWN ARRAY RESULT
    $Statusresult = mysql_query("SELECT TEXT_KEY, TEXT_VALUE FROM T_TEXTS WHERE TEXT_KEY = 'USER_FAILED' ") or die(mysql_error());
    $Statusrows = array();
    $Statusrows = { "STATUS" => "1" };
    while($s = mysql_fetch_assoc($Statusresult)) 
    {
    //  $Statusrows[] = $s;
        array_push($Statusrows, $s);    
    }
    print json_encode($Statusrows);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T15:55:19.947

在其上添加一个***虚拟列***，

```
SELECT '"1"' AS `STATUS`, TEXT_KEY, TEXT_VALUE 
FROM T_TEXTS 
WHERE TEXT_KEY = 'USER_FAILED' 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/f52dc/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T16:15:33.870

您可以使用[数组联合运算符 ( `+`) ^(*Docs*)](http://php.net/manual/en/language.operators.array.php)：

```
$Statusrows[] = ["STATUS" => "1"] + $s; 
```

或者：

```
$status1 = ["STATUS" => "1"];
while ($s = mysql_fetch_assoc($Statusresult)) 
{
    $Statusrows[] = $status1 + $s;
} 
```

这将使您不必在 SQL 中处理该逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T16:22:52.250

试试下面：

```
$Statusrows = array();
while($s = mysql_fetch_assoc($Statusresult)) 
{
    $s["STATUS"] = "1";
    $Statusrows[] = $s;
} 
```

# encoding - PHPmyAdmin 希伯来语排序规则

> ID：12553772
> 
> 赞同：2
> 
> 时间：2012-09-23T15:52:34.630
> 
> 标签：encoding, phpmyadmin

我的项目使用 Windows-1255 编码。
该网站运行良好。
但是在本地机器上升级 phpMyAdmin 后，我在 phpMyAdmin 中看不到希伯来语字符。
该表的排序规则是 latin_swedish_ci。同样是数据库和 phpMyAdmin。
这是现在的样子： ֳ·ֳ¸ֳ¡ ֳ´ֳ¥ֳ°ֳ¢

有人遇到过这个问题吗？

Ubuntu 10.04，phpMyAdmin版本信息：3.4.10.1deb1

# python - Django中的模型，未定义

> ID：12553780
> 
> 赞同：1
> 
> 时间：2012-09-23T15:53:49.497
> 
> 标签：python, django, django-models

所以，我有帖子和类别：

```
class Post(models.Model):
    ...
    category = models.ForeignKey(Category)

    def __unicode__(self):
        return self.title

class Category(models.Model):
    category = models.CharField(max_length = 30, unique=True)
    id_post = models.ForeignKey(Post)   

    def __unicode__(self):
        return self.category 
```

我写

**python manage.py 验证**

和 NameError: Name `Category`is not defined。为什么？？？

我正在使用 sqllite，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T15:54:55.597

在 models.py 中将 Category 放在 Post 上方。Django / Python 从上到下验证模型。从 Django 开始时，我也偶然发现了它 :)

```
class Category(models.Model):
    category = models.CharField(max_length = 30, unique=True)   

    def __unicode__(self):
        return self.category

class Post(models.Model):
    ...
    category = models.ForeignKey(Category)

    def __unicode__(self):
        return self.title 
```

当您在源代码中放置从 Post 到 Category 的关系时，您可能打算建立从 category 实例到所有相关 post 实例的关系。这是 Django 内置的，您可以使用“modelname_set”属性反转 ForeignKey 关系。

因此，要获取分配给特定类别的所有帖子，您可以执行以下操作：

```
myCategory =Category.objects.get(pk=1)
myCategory.post_set.all() 
```

# jquery - 单击时如何使用jquery获取临时html元素调整大小？

> ID：12553782
> 
> 赞同：1
> 
> 时间：2012-09-23T15:53:59.850
> 
> 标签：jquery, resize, microsoft-metro, html

我正在尝试使用 jQuery 调整 div 或 span 的大小，但前提是您按住左键单击按钮，例如以下示例`metro.js`：

[http://www.claudiowebdesign.it/snippets/metro/](http://www.claudiowebdesign.it/snippets/metro/)

（我试图阅读`metro.js`，但我找不到有效的具体代码）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T16:43:27.740

我发现了这个不错的 jQuery 插件：[http ://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/)

做了一个快速的小提琴：http: [//jsfiddle.net/Ub5nX/1/](http://jsfiddle.net/Ub5nX/1/)

代码看起来很整洁：

```
$('#clickme').mousedown(function() {
    $(this).transition({ scale: 0.9 }, 100)
});

$('#clickme').mouseup(function() {
    $(this).transition({ scale: 1 }, 200)
}); 
```

我喜欢它，希望你也喜欢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T16:08:00.750

您可以在 mousedown 和 mouseup 上调整您的 div。例子：

```
$('p').mousedown(function() {
    $('p').css('width', '180');
});

$('p').mouseup(function() {
    $('p').css('width', '200');
}); 
```

​鼠标向下元素为 180px，鼠标向上元素为 200px。

直播：http: [//jsfiddle.net/j5gsu/](http://jsfiddle.net/j5gsu/)

至于地铁示例，他使用 3d 变换。您可以在[http://www.w3schools.com/css3/css3_3dtransforms.asp 查看](http://www.w3schools.com/css3/css3_3dtransforms.asp)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T16:08:21.233

前段时间写了这个来缩放一个对象。您将需要 jQuery 才能使其正常工作。

```
changeSize = function(obj, size, time) {
    var left, r, top, _ref;
    _ref = obj.position(), left = _ref.left, top = _ref.top;
    r = obj.width() / 2;
    return obj.animate({
      left: (left + r - size / 2) + 'px',
      top: (top + r - size / 2) + 'px',
      height: size + 'px',
      width: size + 'px'
    }, time);
  }; 
```

这假设对象是绝对定位的，并且是一个正方形。如果它不是绝对定位，只需删除 left: 和 top: 属性更改。如果对象不是平方的，则需要稍微更改它（可能想要有一个缩放因子，然后将`width()`and`height()`与该因子相乘并将其写入`animate`而不是`size`.

# c++ - Boost::Lambda方法推演错误MSVC9.0

> ID：12553783
> 
> 赞同：1
> 
> 时间：2012-09-23T15:54:09.920
> 
> 标签：c++, templates, visual-c++, boost, lambda

我有以下代码来合并两个 std::maps。

```
template <typename key, typename value>
  void merge_maps(std::map<key, value>& one, const std::map<key, value>& another,
    boost::function2<value, value, value> aggregate)
  {
    // MERGING. aggregate is called if key exists in both maps
  } 
```

我有一些这样的结构。

```
 struct foo {
    int bar;
    foo operator+(const foo& other) const;
  }; 
```

我尝试合并两个我通过 using`std::map<std::wstring, foo> one, another`的using ，但得到编译错误。`foo::operator+``boost::lambda`

```
 merge_maps(one, another, _1+_2); // MSCV9.0 cannot deduce template argument for lambda there 
```

请帮帮我。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:00:03.213

解决了。需要指定 lambda 返回类型。MSVC 实例化模板没有任何麻烦。

```
merge_maps(one, another, ret<foo>(_1+_2)); 
```

# html - 适用于最受欢迎的设备（包括移动设备）的 Red5、h264 和 HTML5

> ID：12553789
> 
> 赞同：1
> 
> 时间：2012-09-23T15:54:48.453
> 
> 标签：html, mobile, h.264, red5

目前我有一个带有 red5 的 linux 服务器（debian）提供流媒体视频。它只使用flash/flv。因此，它不能在大多数移动设备上运行。我考虑过使用 HTML5 和 h.264 电影。

我需要做什么才能让 Red5 使用 HTML5 为移动设备提供流式视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:33:57.803

red5 不必对“流”html5 做任何事情。只需输入以下内容：

```
<video id="sampleMovie" src="HTML5Sample.mp4" controls></video> 
```

在您的 html 页面中，并确保 mp4 文件在您的服务器上。一些播放器也支持 html5（JWPlayer、Flowplayer 等）。red5 可以睡觉 ;-)

# php - 在根域 (www) 上启动 php $_SESSION 并跨子域共享会话

> ID：12553795
> 
> 赞同：2
> 
> 时间：2012-09-23T15:55:41.797
> 
> 标签：php, session, cookies, subdomain, wildcard-subdomain

我正在尝试设置我的 PHP $_SESSION 并让它在所有子域中都可用。除非尝试从根域（**www**）检索会话，否则这工作正常。

如果我在**www**上启动会话，那么它将*不会*与任何子域共享。如果我在子域上启动会话，它将*不会*与**www**共享。

我将 session_set_cookie_params (index.php) 和 session.cookie_domain (php.ini) 正确设置为 .domain.com

**当我在www**上回显 $_COOKIE["PHPSESSID"] 时，我得到的字符串与所有子域上使用的字符串不同。所有子域都具有相同的 $_COOKIE["PHPSESSID"] 值。

我希望能够在**www**上启动会话，并能够在所有子域上使用该会话。有什么解决办法吗？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T16:08:06.857

尝试为会话设置名称

> session_name("域名");

在设置会话 cookie 参数之前。

```
session_name("domain");
session_set_cookie_params(0, '/', '.domain.com');
session_start(); 
```

# google-apps-script - Google Apps 脚本 - 图表服务：表格大小、列格式

> ID：12553803
> 
> 赞同：3
> 
> 时间：2012-09-23T15:56:57.310
> 
> 标签：google-apps-script, format, google-visualization

我使用 Google Chart Service 在 Google Apps Script 中为我的网络应用程序创建一个表格。
现在我有两个问题：

1.  当我添加更多行和列时，列的宽度越来越小，直到出现滚动条为止。我添加了一个代码示例。我可以更改/增加图表的（最大）显示大小，以便没有滚动条吗？

2.  我需要一个向右对齐的字符串列。对于字符串列，默认值是左对齐。我怎样才能改变这个？还有更多选项可以修改表格的格式（文本大小、颜色、粗体等）吗？

    ```
    function doGet() {
    var app = UiApp.createApplication();

    var data = Charts.newDataTable()
    .addColumn(Charts.ColumnType.STRING, "Name")
    .addColumn(Charts.ColumnType.STRING, "Gender")
    .addColumn(Charts.ColumnType.NUMBER, "Age")
    .addColumn(Charts.ColumnType.NUMBER, "Donuts eaten")
    .addColumn(Charts.ColumnType.NUMBER, "Donuts eaten")
    .addColumn(Charts.ColumnType.NUMBER, "Donuts eaten")
    .addColumn(Charts.ColumnType.NUMBER, "Donuts eaten")
    .addRow(["Michael", "Male", 12, 5])
    .addRow(["Michael", "Male", 12, 5])
    .addRow(["Elisa", "Female", 20, 7])
    .addRow(["Robert", "Male", 7, 3])
    .addRow(["John", "Male", 54, 2])
    .addRow(["Jessica", "Female", 22, 6])
    .addRow(["Aaron", "Male", 3, 1])
    .addRow(["Margareth", "Female", 42, 8])
    .addRow(["Miranda", "Female", 33, 6])
    .addRow(["Miranda", "Female", 33, 6])
    .addRow(["Miranda", "Female", 33, 6])
    .addRow(["Miranda", "Female", 33, 6])
    .addRow(["Miranda", "Female", 33, 6])
    .addRow(["Miranda", "Female", 33, 6])
    .build();

    var tableChart = Charts.newTableChart().setDataTable(data)
    .build();

    app.add(tableChart);

    return app;
    } 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T18:25:38.377

*关于第 1 页。*有两种方法可以更改图表的宽度和高度。第一个是使用类的[setDimensions](https://developers.google.com/apps-script/class_tablechartbuilder#setDimensions)方法`TableChartBuilder`。这种方法的一个缺点是无法在页面宽度/高度百分比中设置宽度/高度。第二种方法是使用同一个类的[setOption方法。](https://developers.google.com/apps-script/class_tablechartbuilder#setOption)这种方法没有缺点。下面的代码演示了它。

*关于第 2 页。*不幸的是，现在无法对齐表格图表的列。据我所知，甚至不可能对齐位于表格图表引擎盖下的[GWT 表格的列。](https://developers.google.com/chart/interactive/docs/gallery/table)您可以自由地在[GAS 问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上创建一个关于此缺失的功能请求。

```
function doGet() {
var app = UiApp.createApplication();

var data = Charts.newDataTable()
.addColumn(Charts.ColumnType.STRING, "Name")
.addColumn(Charts.ColumnType.STRING, "Gender")
.addColumn(Charts.ColumnType.NUMBER, "Age")
.addColumn(Charts.ColumnType.NUMBER, "Donuts eaten")
.addColumn(Charts.ColumnType.NUMBER, "Donuts eaten")
.addColumn(Charts.ColumnType.NUMBER, "Donuts eaten")
.addColumn(Charts.ColumnType.NUMBER, "Donuts eaten")
.addRow(["Michael", "Male", 12, 5])
.addRow(["Michael", "Male", 12, 5])
.addRow(["Elisa", "Female", 20, 7])
.addRow(["Robert", "Male", 7, 3])
.addRow(["John", "Male", 54, 2])
.addRow(["Jessica", "Female", 22, 6])
.addRow(["Aaron", "Male", 3, 1])
.addRow(["Margareth", "Female", 42, 8])
.addRow(["Miranda", "Female", 33, 6])
.addRow(["Miranda", "Female", 33, 6])
.addRow(["Miranda", "Female", 33, 6])
.addRow(["Miranda", "Female", 33, 6])
.addRow(["Miranda", "Female", 33, 6])
.addRow(["Miranda", "Female", 33, 6])
.build();

var tableChart = Charts.newTableChart().setDataTable(data);

//tableChart.setDimensions(1200, 100); // Uncomment this line if you wish to set dimentions in pixels.
tableChart.setOption('width', '100%');
tableChart.setOption('height', '100%');  

app.add(tableChart.build());

return app;
} 
```

# android - 如何从字符串中删除动态字符串？

> ID：12553804
> 
> 赞同：4
> 
> 时间：2012-09-23T15:57:04.880
> 
> 标签：android, regex, string, replace, character

我是 android 开发的菜鸟，我正在尝试从字符串中删除一串动态字符。我的字符串：

```
"Beginning of String....&lt;img src="http://webaddress.com" height="1" width="1"/&gt;" 
```

我想删除“<”、“>”以及它们之间的所有内容。我想要的只是“字符串的开头......”到目前为止，我已经尝试过这个没有成功。

```
description = description.replaceFirst("(?s)(&lt)(.*?)(&gt)","$1$3"); 
```

我也在一个类似的类似字符串上试过这个，它工作得很好，所以我不明白我做错了什么。

```
description = description.replaceFirst("(?s)(<sub>)(.*?)(</sub>)","$1$3"); 
```

我的课

```
public class RssReader {

private final static String BOLD_OPEN = "<B>";
private final static String BOLD_CLOSE = "</B>";
private final static String BREAK = "<BR>";
private final static String ITALIC_OPEN = "<I>";
private final static String ITALIC_CLOSE = "</I>";
private final static String SMALL_OPEN = "<SMALL>";
private final static String SMALL_CLOSE = "</SMALL>";

public static List<JSONObject> getLatestRssFeed(){
    String feed = "http://feeds.feedburner.com/MetalMarketCommentary";
    //http://globoesporte.globo.com/dynamo/futebol/times/vasco/rss2.xml
    //http://feeds.feedburner.com/GoldMoneyGoldResearch +
    //http://feeds.feedburner.com/GoldsilvercomNews +
    //http://feed43.com/7466558277232702.xml
    //http://feeds.feedburner.com/SilverGoldDaily
    //http://feeds.feedburner.com/MetalMarketCommentary
    //http://link.brightcove.com/services/player/bcpid1683318714001?bckey=AQ~~,AAAAC59qSJk~,vyxcsD3OtBPHZ2UIrFX2-wdCLTYNyMNn&bclid=1644543007001&bctid=1854182861001

    RSSHandler rh = new RSSHandler();
    List<Article> articles =  rh.getLatestArticles(feed);
    Log.e("RSS ERROR", "Number of articles " + articles.size());
    return fillData(articles);
}

private static List<JSONObject> fillData(List<Article> articles) {

    List<JSONObject> items = new ArrayList<JSONObject>();
    for (Article article : articles) {
        JSONObject current = new JSONObject();
        try {
            buildJsonObject(article, current);
        } catch (JSONException e) {
            Log.e("RSS ERROR", "Error creating JSON Object from RSS feed");
        }
        items.add(current);
    }

    return items;
}

private static void buildJsonObject(Article article, JSONObject current) throws JSONException {
    String title = article.getTitle();
    String description = article.getDescription();
    description = description.replaceFirst("(?s)(<sub>)(.*?)(</sub>)","$1$3");
    int start = description.indexOf(".&");
    description= description.substring(0, start);
    String date = article.getPubDate();
    String imgLink = article.getImgLink();

    StringBuffer sb = new StringBuffer();
    sb.append(BOLD_OPEN).append(title).append(BOLD_CLOSE);
    sb.append(BREAK);
    sb.append(description);
    sb.append(BREAK);
    sb.append(SMALL_OPEN).append(ITALIC_OPEN).append(date).append(ITALIC_CLOSE).append(SMALL_CLOSE);

    current.put("text", Html.fromHtml(sb.toString()));
    current.put("imageLink", imgLink);
}
} 
```

我正在解析的 XML

```
<item>
           <title>Gold Market Recap Report</title>
           <link>http://feedproxy.google.com/~r/MetalMarketCommentary/~3/jGYtkXdSKWs/mid-session-gold_703.html</link>
           <description>&lt;img src="http://www.cmegroup.com/images/1x1trans.gif?destination=http://www.cmegroup.com/education/market-commentary/metals/2012/09/mid-session-gold_703.html" alt=""/&gt;For the week December gold forged a trading range of roughly $37 an ounce. With gold prices attimes seemingly on the rocks and poised for a downside washout it was a change of pace to see afresh upside breakout in the Friday morning trade....&lt;img src="http://feeds.feedburner.com/~r/MetalMarketCommentary/~4/jGYtkXdSKWs" height="1" width="1"/&gt;</description>
           <pubDate>Fri, 21 Sep 2012 19:50:37 GMT</pubDate>
           <guid isPermaLink="false">http://www.cmegroup.com/education/market-commentary/metals/2012/09/mid-session-gold_703.html?source=rss</guid>
           <dc:date>2012-09-21T19:50:37Z</dc:date>
           <feedburner:origLink>http://www.cmegroup.com/education/market-commentary/metals/2012/09/mid-session-gold_703.html?source=rss</feedburner:origLink>
      </item> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T16:05:14.340

```
 String string = "Beginning of String....&lt;img src=\"http://webaddress.com\" height=\"1\" width=\"1\"/&gt;"; //Escape whatever has to be escaped
    System.out.println(string);
    int start = string.indexOf("&");
    int end = string.lastIndexOf("&");
    String temp = string.substring(start, (end+3));
    string = string.replace(temp, "");
    System.out.println(string); 
```

这将删除 < 和 > 之间的任何内容，包括它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:17:34.133

您不必使用正则表达式来执行此操作。

创建一个方法，该方法将查找并删除以开头`&lt;`和结尾的子字符串`&gt;`并在循环中运行它。

```
String mstring = "Beginning of String....&lt;img src="http://webaddress.com" height="1" width="1"/&gt;";
//  You'll need to escape the double quotes if you're explicitly setting the string

public boolean containsTags()
{
    boolean lt, gt;

    lt = mstring.contains("&lt;");
    gt = mstring.contains("&gt;");

    return (lt || gt);
}

public void removeTags()
{
    int indexof_lt, indexof_gt;

    indexof_lt = mstring.indexOf("&lt;");
    indexof_gt = mstring.indexOf("&gt;");

    String str_first, str_last;

    str_first = mstring.substring(0, indexof_lt);
    str_last = mstring.substring(indexof_gt + indexof_gt.length);

    mstring = str_first + str_last;
}

public void removeAllTags()
{
    while(containsTags)
    {
        removeTags();
    }
} 
```

# android - 如何修复视频播放程序的错误？

> ID：12553805
> 
> 赞同：0
> 
> 时间：2012-09-23T15:57:09.043
> 
> 标签：android, video

我读了 Hello Android 书。该应用程序应播放视频。我将视频复制到 res/raw 中。应用程序不运行。为什么？

我收到以下错误：

```
video cannot be resolved or is not a field 
```

视频.java

```
package org.example.video;
import android.app.Activity;
import android.os.Bundle;
import android.widget.VideoView;

public class Video extends Activity{
    @Override
    public void onCreate(Bundle savedInstanceState){
  super.onCreate(savedInstanceState);
          setContentView(R.layout.activity_main);
  VideoView video=(VideoView)findViewById(R.id.video);
  video.setVideoPath("/raw/VID_20120604_142208.mp4");
  video.start();
    }
} 
```

Activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <VideoView
        android:id="@+id/video"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_gravity="center"/>
</FrameLayout> 
```

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T09:06:55.270

使用修复视频工具修复您的视频文件，首先下载试用版并检查是否显示所有文件。如果您对演示版感到满意，那么您可以切换到完整版来恢复它们。它是[修复](http://www.repairvideo.net/repair-video-error-files.html)Mac 操作系统上视频文件错误的最佳软件之一。希望这个软件可以帮助您解决问题。[从这里](http://www.repairvideo.net/download/repairvideo.zip)您可以下载该软件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:10:00.263

稍加修改即可运行您的代码运行良好

```
 VideoView video=(VideoView)findViewById(R.id.video);
  video.setVideoPath("android.resource://org.example.video/raw/learning");
  video.start(); 
```

不要添加文件的扩展名

# logging - EnterpriseLibrary CustomTraceListener 不尊重 TextFormatter

> ID：12553807
> 
> 赞同：0
> 
> 时间：2012-09-23T15:58:00.020
> 
> 标签：logging, enterprise-library

我有一个记录到环形缓冲区的 CustomTraceListener：

```
namespace Sample
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using Cognoware.Collections.Generic;
    using Microsoft.Practices.EnterpriseLibrary.Common.Configuration;
    using Microsoft.Practices.EnterpriseLibrary.Logging.Configuration;
    using Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners;

    [ConfigurationElementType(typeof(CustomTraceListenerData))]
    public class CircularTraceListener: CustomTraceListener
    {
        private static RingBuffer<string> _ringBuffer = new RingBuffer<string>(200);
        private string tmp = String.Empty;
        public override void Write(string message)
        {
            tmp += message;
        }

        public override void WriteLine(string message)
        {
            _ringBuffer.Add(tmp + message);
            tmp = String.Empty;
        }

        public IEnumerable<string> Messages
        {
            get
            {
                return _ringBuffer.AsEnumerable<string>();
            }
        }
    }
} 
```

它通常可以工作，但是我无法将其配置为使用自定义文本格式。在下面的配置中，我配置了两个跟踪侦听器，一个用于平面文件，另一个用于我的自定义侦听器。前者使用“Brief formatter”正确记录，而后者失败并使用默认格式。为什么？

```
<loggingConfiguration name="" tracingEnabled="true" defaultCategory="General">
    <listeners>
        <add listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.CustomTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
            type="Sample.CircularTraceListener, CircularTraceListener, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"
            name="CircularTraceListener" formatter="Brief Formatter" />
        <add name="Flat File Trace Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
            listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
            fileName="trace.log" formatter="Brief Formatter" /> 
    </listeners>
    <formatters>
        <add type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
            template="{timestamp}  {message} {title} {dictionary({key} - {value}{newline})}"
            name="Brief Formatter" />
    </formatters>
    <categorySources>
        <add switchValue="All" name="General">
            <listeners>
                <add name="CircularTraceListener" />
                <add name="Flat File Trace Listener" />
            </listeners>
        </add>
    </categorySources>
</loggingConfiguration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:25:22.557

克里斯塔瓦雷斯是正确的。解决方法如下：

1.  覆盖 TraceData() 方法，
2.  获取格式化程序的实例
3.  调用 formatter.Format，
4.  将其传递给 WriteLine()

这是一个示例：

```
namespace Sample1
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using Cognoware.Collections.Generic;
    using Microsoft.Practices.EnterpriseLibrary.Common.Configuration;
    using Microsoft.Practices.EnterpriseLibrary.Logging.Configuration;
    using Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners;
    using System.Diagnostics;
    using Microsoft.Practices.EnterpriseLibrary.Logging;

    [ConfigurationElementType(typeof(CustomTraceListenerData))]
    public class CircularTraceListener: CustomTraceListener
    {
        private string tmp = String.Empty;
        public override void Write(string message)
        {
            tmp += message;
        }

        public override void WriteLine(string message)
        {
            tmp += message;
        }

        public override void TraceData(TraceEventCache eventCache, string source, TraceEventType eventType, int id, object data)
        {
            if ((this.Filter == null) || this.Filter.ShouldTrace(eventCache, source, eventType, id, null, null, data, null))
            {
                if (data is LogEntry)
                {
                    if (this.Formatter != null)
                    {
                        WriteLine(this.Formatter.Format(data as LogEntry));
                    }
                    else
                    {
                        base.TraceData(eventCache, source, eventType, id, data);
                    }
                }
                else
                {
                    base.TraceData(eventCache, source, eventType, id, data);
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T06:08:06.003

您不会免费获得格式化程序 - 您需要编写跟踪侦听器，以便它获取格式化程序的实例并实际调用它。

# c# - 如何使用dotnetzip检查zip文件中是否存在文件

> ID：12553809
> 
> 赞同：5
> 
> 时间：2012-09-23T15:58:19.027
> 
> 标签：c#, compression, dotnetzip

我正在使用 dotnetzip 库创建 zip。

但我不知道如何检查 zip 中是否存在文件。如果文件存在，那么我将使用路径更新文件。

```
 public void makezip(string flname)
   {
      string  fln =flname;
        string curFile = @"d:\crs.zip";
        if (File.Exists(curFile))
        {
                ZipFile zipfl = ZipFile.Read(@"D:\crs.zip");
            var result = zipfl.Any(entry => entry.FileName.EndsWith(@fln));
            if (result == true) {
                zipfl.UpdateFile(@fln);
                }else{
                  zipfl.AddFile(@fln);
                }
            zipfl.Save(@"d:\crs.zip");
        }
        else
        {
            try
            {
                ZipFile zipfl = new ZipFile();

                var result = zipfl.Any(entry => entry.FileName.EndsWith(@fln));
                if (result == true)
                {
                  zipfl.AddFile(@fln);
                }
                zipfl.Save(@"d:\crs.zip");
            }catch {
                MessageBox.Show("Invalid Zip File");

            }}} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-23T16:32:23.533

> 如何检查zip文件中是否存在文件？

只需使用 LINQ `Any`，假设您输入了 zip 文件`input.zip`，检查是否`input.zip`包含`input.txt`：

```
 var zipFile = ZipFile.Read(@"C:\input.zip");
 var result = zipFile.Any(entry => entry.FileName.EndsWith("input.txt")); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-26T14:41:54.130

（这不是 dotnetzip，但可以完成工作。）

要求：`using System.IO.Compression;`

程序集：System.IO.Compression.FileSystem.dll

```
public static bool ZipHasFile(string fileFullName, string zipFullPath)
{
    using (ZipArchive archive = ZipFile.OpenRead(zipFullPath))  //safer than accepted answer
    {
        foreach (ZipArchiveEntry entry in archive.Entries)
        {
            if (entry.FullName.EndsWith(fileFullName, StringComparison.OrdinalIgnoreCase))
            {
                return true;
            }
        }
    }
    return false;
} 
```

示例调用：`var exists = ZipHelper.ZipHasFile(@"zipTest.txt", @"C:\Users\...\Desktop\zipTest.zip");`

# ios - 在一个线程和另一个轮询线程之间共享一个队列

> ID：12553811
> 
> 赞同：2
> 
> 时间：2012-09-23T15:58:22.420
> 
> 标签：ios, multithreading, grand-central-dispatch

我正在编写一个 iOS 应用程序，其中多个 iDevice 可以相互连接并相互发送消息。当 iDevice1 向 iDevice2 发送消息时，我希望将该消息插入 iDevice2 的队列中。iDevice2 上的一个单独的后台线程现在通过此队列并将消息出列。我的问题有两个，如下：

1.  实现无限循环（直到应用程序终止）并从队列中轮询和出列项目的后台线程的最佳方法是什么？
2.  在循环后台线程和将消息插入队列的线程之间共享队列的最佳方法是什么？

我一直在使用 dispatch_async 大型中央调度方法在不同的线程中执行任务，并且运行良好。我应该使用 dispatch_async 方法来启动轮询队列的后台线程吗？这种方法是否负责切换到其他线程，或者后台线程是否会占用处理器，因为它正在执行无限循环？任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T03:04:03.443

这里更重要/更有趣的问题是为什么你有一个后台线程（轮询或其他方式）馈送到 GCD 队列，而不是简单地将整个事情变成一个基于 GCD 的工作流，其中块在一个队列上运行（可能与调度源相关联或信号量）将工作提交到工作队列中。换句话说，管理 iDevice1 和 iDevice2 的代码都应该使用 GCD 编写并表达工作流的意图，而不是进行任何手动线程管理。代码会更容易理解和维护！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:22:04.660

你不想轮询，这是不好的做法，它没有充分的理由使用 CPU。您要做的是使用即 NSMutableArray 设置共享 fifo 并使用 NSConditionLock 保护其访问。消费者任务（您可以使用 NSOperation 创建）将锁定 NSConditionLock，直到生产者任务发出信号表明 fifo 中有一些可用数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T17:54:41.087

无需轮询队列——队列中的项目将根据队列的语义执行。你可以这样做：

```
-(dispatch_queue_t)messageQueue {
    static dispatch_queue_t queue;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        queue = dispatch_queue_create("my message queue", DISPATCH_QUEUE_SERIAL);
    });
    return queue;
}

-(void)didRecieveMessage:(NSString *)message {
    dispatch_async([self messageQueue], ^{
        // do something with message
        dispatch_async(dispatch_get_main_queue(), ^{
            // update the UI
        });

    });
} 
```

# javascript - 递归时的范围怪异

> ID：12553817
> 
> 赞同：0
> 
> 时间：2012-09-23T16:00:03.303
> 
> 标签：javascript, recursion

我只是漫无目的地玩，我偶然发现了一些我不明白的东西。

```
var result;
// [.............. more stuff ..............]
function iterate(n) {
 if (isDivisor(n)) {
   if (checkIfPrime(n)) {
        result = n;
        return result;
   }
   iterate(n-2);
 }
 iterate(n-2);
}

result = iterate(startN)
console.warn("result is ", result)

//(isDivisor() and checkIfPrime() omitted because irrelevant to the problem 
```

因此，代码工作正常，在限制意义上，一旦达到预期值，递归就会停止。但！在我得到的控制台中`undefined`。 `result`是一个全局的，不会在任何函数内部重新声明，特别是在`iterate()`. `n`返回时具有正确的值`iterate()`。`iterate()`可以访问全局范围（并融入其中） 那么，它怎么可能导致`undefined`......？

我可能只是进行了选择性失明攻击，但我真的看不到范围误入歧途。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T16:04:28.833

您的函数返回未定义，并且您将其结果分配给结果变量。

您应该从函数返回结果：

```
function iterate(n) {
 if (isDivisor(n)) {
   if (checkIfPrime(n)) {
        return n;
   }
   return iterate(n-2);
 }
 return iterate(n-2);
}

var result = iterate(startN);
console.log(result); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T16:03:49.667

如果 Javascript 函数在没有返回语句的情况下退出，它的返回值将是`undefined`. 这将发生在您的功能上，除非您拥有`isDivisor(n)`并且`checkIfPrime(n)`两者都是真实的。

也许你打算做

```
function iterate(n) {
 if (isDivisor(n)) {
   if (checkIfPrime(n)) {
        result = n;
        return result;
   }
   return iterate(n-2); // <----
 }
 return iterate(n-2); // <----
} 
```

反而？

# python - 使用 mac 地址索引数组

> ID：12553820
> 
> 赞同：0
> 
> 时间：2012-09-23T16:00:10.897
> 
> 标签：python, python-3.x, python-2.7, bytearray

我有一个字符串形式的mac地址，

```
00:23:34:d2:a4:00 
```

这个mac地址如何索引到数组？

为了给出一个完整的图片，我将mac地址中的最后3个字节，即d2：a4：00，存储在字节数组中。如果 d2,a4,00 的对应字节是 00010001、00110010、00000000，那么通过连接这些二进制值给我 000100010011001000000000，如果转换成整数给我，可以说是 1000200。所以，我可以访问与此相关的信息mac地址使用数组[1000200]。

如果我想以相反的方向进行操作，假设我得到了 1000200 号码，我如何将其转换为 mac 地址 00:23:34:d2:a4:00（假设所有条目的前 3 个字节都相同）。对不起，这是一个很长的帖子。如果您提供方向，这将是很大的帮助。效率非常重要（网络应用程序所需的执行时间应该非常少）。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T16:38:04.837

要将 MAC 中的最后 3 个字节转换为整数并返回：

```
mac = 'zz:zz:zz:d2:a4:00'
i = int(''.join(mac.split(':')[-3:]), 16) # integer
# -> 13804544

h = '%06x' % i
# -> 'd2a400'

mac = 'zz:zz:zz:%s:%s:%s' % (h[0:2], h[2:4], h[4:6])
# -> 'zz:zz:zz:d2:a4:00' 
```

正如@Lattyware 提到的，您应该首先尝试使用 MAC 作为键的字典。

要将整数转换为以十六进制字符串表示的 MAC：

```
>>> h = '%012x' % 123
'00000000007b'
>>> ':'.join(h[i:i+2] for i in range(0, 12, 2))
'00:00:00:00:00:7b' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:06:26.820

只需使用该`split`函数，然后通过探索转换为二进制？

（像这样的东西：）

```
[int(_, 16) for _ in "00:23:34:d2:a4:00".split(':')] 
```

# jquery - 非常简单的任务 - 需要测试数组元素的相等性 - 只是不工作

> ID：12553823
> 
> 赞同：0
> 
> 时间：2012-09-23T16:00:32.347
> 
> 标签：jquery

```
for (index=1; index<=15; index++) {

            if (undefined != sku[index]) {
                //alert(sku[index] + " " + jQuery.inArray(sku[index], mr_sku));
                //var temp = sku[index];
                for (jindex=1; jindex<=15; jindex++) {
                    if ( mr_sku[jindex] != 'null' ){
                        //found = jQuery.inArray( sku[index], mr_sku );
                        if ( sku[index] == mr_sku[jindex] ) {
                            alert( sku[index] + " " + mr_sku[jindex] );
                        }

                    }
                }

            }
    found = -1;
    } 
```

我只是想抛出一个`alert`if `mr_sku[jindex]`equals `sku[index]`，这让我很生气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T16:20:21.650

[**用这个jsfiddle**](http://jsfiddle.net/sahil_kapoor/LnjLv/)中的虚拟数据测试了你的代码，它似乎可以工作。我在这里的假设是在语句 index<=15, 15 是数组的最后一个索引，而不是数组的实际长度。

**编辑**- 第二个假设是您不希望匹配索引 0 处的元素。（正如评论中指出的索引 0 的**dystroy**元素不会与您当前的代码匹配）

# c# - C#有谁知道如何四舍五入，这样我就可以获得金钱价值？

> ID：12553824
> 
> 赞同：1
> 
> 时间：2012-09-23T16:00:51.947
> 
> 标签：c#, double

```
 namespace Assignment02
{
    class assigement02question04
    {
        public static void answer()
        {
            //declare variables: ID number = int, rate of pay, number of hours , overtime , gross pay = double
            //disply what is your employee ID number
            //catpure ID number
            //disply what is your rate of pay
            //catpure rate of pay
            //disply what is the number of hours you have worked
            //catpure number of hours worked
            //display what is the amount of over time hours
            //catpure over time hours
            //Calculate gross pay = (number of hours + over time x 1.5) x rate of pay
            //calculate net pay = gross pay - gross pay x 0.33 - 25 (convert to currency)
            //disply ID number , number of hours , rate of pay , over time hours and gross pay

            //declare variables

            int ID_Number;
            double rate_of_pay;
            double number_of_hours;
            double over_time;
            double gross_pay;
            double net_pay;

            //input your employee ID
            Console.Write("What is your employee ID number?  ");
            ID_Number = int.Parse(Console.ReadLine());

            //input your rate of pay
            Console.Write("What is your rate of pay? ");
            rate_of_pay = double.Parse(Console.ReadLine());

            //input number of hours
            Console.Write("What is the number of hours you have worked? ");
            number_of_hours = double.Parse(Console.ReadLine());

            //input over time hours
            Console.Write("What is the amount of over time hours? ");
            over_time = double.Parse(Console.ReadLine());

            //intput of our gross pay
            gross_pay = (number_of_hours + over_time * 1.5) * rate_of_pay;
            //input of our net pay
            net_pay = gross_pay - gross_pay * .33 - 25;
            net_pay = Math.Round(net_pay, 2);
            //Disply as end result
            Console.WriteLine("Your employee ID number is: " + ID_Number);
            Console.WriteLine("The number of regular hours is: " + number_of_hours);
            Console.WriteLine("The number of O/T hours is: " + over_time);
            Console.WriteLine("The rate of pay of is: " + rate_of_pay);
            Console.WriteLine("Your gross pay is: $" + gross_pay);
            Console.WriteLine("Your net pay is: $" + net_pay);
            Console.ReadLine();   

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T18:09:03.260

我建议使用 Decimal，但要回答你的问题，以防你只是在修补一些丑陋的遗留代码，你可以使用类似的东西：

```
public decimal ToMoney(double Input) {
    int _precision = 2;
    decimal _result;
    try{
        double multiplier = Math.Pow(10, Convert.ToDouble(_precision));
        _result = System.Convert.ToDouble(Math.Ceiling(input * multiplier) / multiplier);
    } catch {}
    return _result;
} 
```

然后调用：

```
string CurrencySymbol = "$";
Console.WriteLine("The rate of pay of is: " + CurrencySymbol +
ToMoney(rate_of_pay).ToString()); 
```

...快乐的编码。

# c - 如何在c中使用libxml2根据属性对xml文件进行分类

> ID：12553830
> 
> 赞同：0
> 
> 时间：2012-09-23T16:02:00.667
> 
> 标签：c, xml, xml-parsing, libxml2

我的任务是将xml内容区分为组，例如我有两个xml文件

```
<?xml version="1.0"?>
<marks>
<firstname>john</firstname>
<lastname>peter</lastname>
<subject name="english" marks="30">pass</heading>
</marks>

<?xml version="1.0"?>
<marks>
<firstname>james</firstname>
<lastname>cameron</lastname>
<subject name="english" marks="30" degree="masters">pass</heading>
</marks> 
```

所以我需要解析上面的示例xml文件并将它们分组，并计算硕士生，博士生，本科生的数量

每个组都将在元素部分具有附加属性，例如对于硕士生主题元素“将具有属性学位对于博士生他们将具有专业化属性

我可以获取 xml 文件的属性并在 c 函数中对其进行编码，说明如果我们有属性名称学位，则将它们视为硕士生，但是是否有其他方法，例如基于 xml 请求构建 DTD 并仅使用 libxml2 进行验证DTD 和区分请求（我必须通过使用 libxml2 库来弄清楚，还不知道）

随着不同类型的 xml 请求数量的增加，我无法对它们进行硬编码以编写多个 if 循环。

可以只为特定类型的请求创建一个 dtd，并只使用一行代码来验证该请求，但现在确定它真的有可能..

请求你说出你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T17:02:56.423

我理解标题给出的问题：“如何通过在 c 中使用 libxml2 xml 解析基于 DTD 验证 xml”。很容易回答这个问题。它实际上是[使用 libxml2 进行 Dtd 验证](https://stackoverflow.com/questions/4594049/dtd-validation-with-libxml2)的副本，因此应该关闭它。

但是随后出现了描述，事实证明问题完全不同。您可能在项目设计方面需要一些帮助。也许你应该稍微改变一下标题？

至于你的设计：你为什么不想使用`if`s？您希望可以在不重新编译应用程序的情况下更改它吗？所以你需要把所有的case都写在一个配置文件里。阅读文件并采取相应措施。

**试图回答设计部分：**

每种请求的单独 dtd 也可以，但是您必须按顺序针对所有 dtd 验证 xml。如果性能成本是可以接受的，那么你可以走这条路。所有 dtds（或 xsd 模式）都可以在初始化阶段读入内存，然后针对 xml 样本进行尝试，直到它验证。

要检查您的 xml 是否在给定元素中包含给定属性，您还可以使用 libxml 中的 XPath。请参阅[此问题](https://stackoverflow.com/questions/12538691/libxml2-and-xpath-traversing-children-and-siblings-in-ansi-c)和[XPath 示例](http://www.xmlsoft.org/examples/index.html#XPath)。注意[xmlXPathEvalExpression 的](http://www.xmlsoft.org/html/libxml-xpath.html#xmlXPathEvalExpression)使用。

# scala - 如何在 Scala 中使用未知集合进行理解？

> ID：12553837
> 
> 赞同：2
> 
> 时间：2012-09-23T16:02:50.270
> 
> 标签：scala

我想编写一个函数，它接受一个序列列表，其中每个序列都将用于理解表达式。

例如。

```
for (x <- (1 to 10); y <- (1 to 10)) yield List(x,y) 
```

在上面的表达式中，我必须事先知道我想要 x 和 y 的组合。如果我想要 x、y、z ...等的组合（未知数量的组合）怎么办？如果我想要 10 个组合，我想将 10 个片段“x <- (1 to 10)”粘贴到表达式中。我想我可以用 Clojure 中的宏（一种粘贴代码的方法）来做到这一点。我怎样才能在 Scala 中做到这一点？

我想写的函数有这样的签名：

```
combine(list: List[List[Int]]) 
```

函数的主体将使用列表中的每个项目粘贴到 for comprehension 中。

希望你明白我的意图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T16:20:17.557

如果要计算列表列表的笛卡尔积，可以通过递归地将 map 和 flatMap 调用链接在一起来实现。无论如何，这就是表达式的作用。

```
 def prod(l:List[List[Int]]):List[List[Int]] = l match {
    case Nil => List(Nil)
    case l::ls => l.flatMap(i => prod(ls).map(t =>i::t))
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T16:27:53.503

你知道如何将两个东西组合成一个东西，并且你想组合一个任意数字，这意味着你需要一个`fold`. 唯一的修改是您希望从单例列表开始，而不是项目列表：

```
val xss = List(List(1,2,3),List(4,5),List(6,7))
val singletons = xss.head.map(x => List(x))   // List(List(1), ...)
val seqs = (singletons /: xss.tail){ (yss, xs) => for (ys <- yss; x <- xs) yield x :: ys }
seqs.map(_.reverse) 
```

在最后阶段打印出来

```
List(List(1, 4, 6), List(1, 4, 7), List(1, 5, 6),
     List(1, 5, 7), List(2, 4, 6), List(2, 4, 7),
     List(2, 5, 6), List(2, 5, 7), List(3, 4, 6),
     List(3, 4, 7), List(3, 5, 6), List(3, 5, 7)) 
```

# c# - 使用 c# wpf 将 txt 文件保存到可移动驱动器

> ID：12553839
> 
> 赞同：2
> 
> 时间：2012-09-23T16:02:58.397
> 
> 标签：c#, wpf, drive

我到处寻找，但没有找到适合我所追求的东西。

我正在为我的 LED 灯制作一个实用程序。我需要将一个名为 hy.txt 的文本文件保存到我的 SD 卡上。显然，根据您插入的驱动器号，每次都会更改。所以我将我的 SD 卡重命名为 STAR-LIGHT。

我不知道如何搜索名称，但是，我只看到有人在寻找驱动器号。

我不确定这是否有意义。请随时问我任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T16:10:53.687

这个“可能”有效（仅尝试使用 USB 驱动器和我的硬盘分区）：

```
string[] drives = Environment.GetLogicalDrives();
foreach (string drive in drives)
{
    try
    {
        DriveInfo di = new DriveInfo(drive);
        if (di.VolumeLabel == "STAR-LIGHT")
        {
            // code
        }
    }
    catch
    {
        // ...
    }
} 
```

# linux - 在 bluehost 上安装 MongoDB 和 PHP 驱动程序

> ID：12553840
> 
> 赞同：1
> 
> 时间：2012-09-23T16:03:02.500
> 
> 标签：linux, mongodb, bluehost

我需要在真正的网络服务器上安装 mongdb ，

我在这里尝试了链接：http: [//tchvan.wordpress.com/mongodbandphponbluehost/](http://tchvan.wordpress.com/mongodbandphponbluehost/)

它不起作用我收到错误

```
mongo shell  Error: couldn't connect to server 127.0.0.1:27017 src/mongo/shell/mongo.js:91 
```

任何人都可以指导我以正确的方式执行此操作的步骤。我已经搜索了2个多小时没有结果。

# php - 在 PHP 中使用 CURL 发布以“@”开头的文本数据

> ID：12553842
> 
> 赞同：3
> 
> 时间：2012-09-23T16:03:17.157
> 
> 标签：php, curl

我使用 CURL 在 PHP 中发布数据，如下所示：

```
curl_setopt($ch, CURLOPT_POSTFIELDS, $args); 
```

其中 $args - 参数数组。

问题是其中一个参数的值以“@”开头。根据 CURL 文档，这意味着我要发送一个文件。在我的情况下这是不正确的。结果，我收到以下错误消息：创建表单数据失败。

有没有办法指定何时我想发送文件或“@”只是一个常规字符，它是某个值的一部分？

谢谢， 吉娜

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:42:29.023

你能用百分比编码代替吗？这样你的 '@' 符号将是 %40 并且 CURL 不会弄乱它们。我们通常对所有帖子字段进行百分比编码。

[http://en.wikipedia.org/wiki/Percent-encoding](http://en.wikipedia.org/wiki/Percent-encoding)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-03T13:38:31.897

从 PHP 5.5 开始，您可以设置 CURLOPT_SAFE_UPLOAD 选项来防止以“@”开头的字符串的文件上传行为。例如。

```
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_SAFE_UPLOAD, true); 
```

PHP 5.5.0 的默认值为 false，从 5.6.0 开始的默认值为 true

来源： http: [//php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

# android - 在应用程序终止或终止期间调用 android 应用程序中的方法

> ID：12553843
> 
> 赞同：4
> 
> 时间：2012-09-23T16:03:18.100
> 
> 标签：android, android-intent

我是android开发的新手。我正在开发一个安卓应用程序。

当用户杀死或终止我的应用程序时，谁能告诉我如何在 android 中调用特定方法。换句话说，当用户从他们的手机中杀死/终止我的应用程序时，我需要首先执行一个特定的方法。这样，将首先执行特定方法，然后关闭我的应用程序。

请有任何建议。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T16:10:37.017

这可以通过覆盖您`onStop`的.`onDestroy``Activity`

像这样：

```
public class MyActivity extends Activity{

     //Other methods here (onCreate, and such)

     @Override
     public void onStop()
     {
         super.onStop();
         //Do whatever you want to do when the application stops.
     }
     @Override
     public void onDestroy()
     {
         super.onDestroy();
         //Do whatever you want to do when the application is destroyed.
     }

} 
```

*   `onStop`在用户退出活动之前或当另一个活动开始在后台推送这个活动时被调用。
*   `onDestroy`在您通过调用 Activity.Finish() 完全完成活动之前或当系统必须将其从内存中删除以节省空间时调用。

有关应用程序生命周期的更多信息，请参见[此处](http://developer.android.com/reference/android/app/Activity.html)。

# java - 调用 servlet 时不转发

> ID：12553844
> 
> 赞同：0
> 
> 时间：2012-09-23T16:03:22.883
> 
> 标签：java, jsp, jakarta-ee, servlets

当我调用 servlet 时，它不会转到所需的 jsp 页面。下面是两个代码

日志中有一个错误说明了这一点，但这并不是不转发到目的地的真正理由

```
 java.sql.SQLException: Bad format for number 'bb' in column 4. 
```

使用此代码调用 servlet，非常确定 url 映射

```
 <a href="/Store/DisplayOrders"> Display Orders</a>

        package admin;

        import data.ConnectionPool;
        import data.DBUtil;
        import java.io.IOException;
        import java.io.PrintWriter;
        import java.sql.Connection;
        import java.sql.PreparedStatement;
        import java.sql.ResultSet;
        import java.sql.SQLException;
        import java.util.ArrayList;
        import javax.servlet.RequestDispatcher;
        import javax.servlet.ServletException;
        import javax.servlet.http.HttpServlet;
        import javax.servlet.http.HttpServletRequest;
        import javax.servlet.http.HttpServletResponse;

        /**
        *
        * @author One
        */
        public class DisplayOrdersServlet extends HttpServlet {

            @Override
            public void doPost(HttpServletRequest request, HttpServletResponse response)
                    throws ServletException, IOException {
                response.setContentType("text/html");
                PrintWriter out = response.getWriter();

                ConnectionPool pool = ConnectionPool.getInstance();
                Connection connection = pool.getConnection();
                PreparedStatement ps = null;
                ResultSet rs = null;

                ArrayList al = null;
                ArrayList ordersList = null;
                ordersList = new ArrayList();

                String query = "select * from orders order by order_id";

                try {
                ps = connection.prepareStatement(query);
                rs = ps.executeQuery(query);

                while (rs.next()) {

                    al = new ArrayList();

                    al.add(rs.getString("order_id"));
                    al.add(rs.getString("product_quantity"));
                    al.add(rs.getString("product_name"));
                    al.add(rs.getDouble("user_name"));
                    al.add(rs.getDouble("user_address"));
                    out.println("al :: " + al);
                    ordersList.add(al);
                }

                request.setAttribute("ordersList", ordersList);

                String url = "/admin/orders.jsp";

                    RequestDispatcher dispatcher =
                    getServletContext().getRequestDispatcher(url);
                    dispatcher.forward(request, response);
            }

            catch (SQLException e) {
                    e.printStackTrace();
                } finally {
                    DBUtil.closeResultSet(rs);
                    DBUtil.closePreparedStatement(ps);
                    pool.freeConnection(connection);

        }
            }

            @Override
            protected void doGet(HttpServletRequest request, HttpServletResponse response)
                    throws ServletException, IOException {
            doPost(request, response);

            }
        } 
```

jsp页面

```
 <%@page contentType="text/html" pageEncoding="UTF-8"%>
            <%@ page language="java" import="java.util.*;"%> 
            <!DOCTYPE html>
            <HTML> 
            <HEAD> 
            <TITLE>Orders CRUD</TITLE> 

            </HEAD> 

            <BODY> 
            <br> 
            <table> 

            </table> 
            <br> 
            <table > 
            <tr><td></td></tr> 

                <tr><td ><a href="/Store/admin/#.jsp">#</a></td></tr> 
            <tr><td></td></tr> 
            <tr> 
                <td>order_id</td><td>product_quantity</td><td>product_name</td> 
                    <td>user_name</td><td>user_address</td>
                    <td>Edit</td><td>Delete</td> 
            </tr> 
                    <% 
                    int count=0; 
                    List viewList = new ArrayList(); 
                    Iterator  viewItr; 

                    if(request.getAttribute("ordersList")!=null && request.getAttribute("ordersList")!="") 
                    { 
                            List orderList =  (ArrayList)request.getAttribute("ordersList"); 
                            Iterator itr = orderList.iterator(); 

                            while(itr.hasNext()) 
                            { 

                                    viewList = (ArrayList)itr.next(); 
                                    int product_id = Integer.parseInt(viewList.get(0).toString()); 
                                    viewItr = viewList.iterator(); 
                                    %> 
                                    <tr> 
                                    <%   
                                    while(viewItr.hasNext()) 
                                    { 

                                            %> 
                                            <td><%=viewItr.next()%></td> 

                                            <% 

                                    } 
                                    count++; 
                                    %> 
                                    <td><input type="button" name="edit" value="Edit" onclick="editRecord(<%=product_id%>);" ></td> 
                                            <td><input type="button" name="delete"  value="Delete" onclick="deleteRecord(<%=product_id%>);"></td> 
                                    </tr> 
                                    <% 
                            } 
                    } 
                    if(count==0) 
                    { 
                            %> 
                            <tr><td > </td></tr> 
                        <tr><td>No Record Avaliable</td></tr> 
                            <% 
                    } 
                    %> 
                <tr><td></td></tr> 
            </table>     
            </BODY> 
            </HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T16:10:42.530

servlet 不转发到 JSP 页面有一个很好的理由：转发之前的语句之一抛出 SQLException，因此跳过其余指令，并执行 catch 块。由于转发是在抛出异常的语句之后的指令的一部分（因此由于异常而被跳过），因此不进行转发。

异常可能是由

```
rs.getDouble("user_name"); 
```

我怀疑您的用户被命名为 3.452 和 67.43 ;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T16:11:45.133

```
try {
  ...
  al.add(rs.getDouble("user_name")); <-- Exception thrown
  al.add(rs.getDouble("user_address"));
      ...
   String url = "/admin/orders.jsp";
  RequestDispatcher dispatcher =
   getServletContext().getRequestDispatcher(url);                        
  dispatcher.forward(request, response);
} catch (SQLException e) {  <-- Exception catch
  e.printStackTrace(); 
```

当遇到异常时，会跳过异常之后的代码，直到捕获到异常为止。重定向代码根本不执行。也就是说，将姓名或地址作为双重身份是不寻常的。

# linux - 如何使用 Perl 脚本将字符串中的特殊字符替换为下划线？

> ID：12553852
> 
> 赞同：2
> 
> 时间：2012-09-23T16:04:46.227
> 
> 标签：linux, perl

我有一个脚本，将 mythtv 录制的节目并使用手刹将它们编码为 h264。该脚本是用 Perl 编写的。

我的问题是如何使用 perl 用和下划线替换空格和特殊字符？

输出时字符串看起来像这样`"Parks and Recreation - S05E01 - Ms. Knope Goes to Washington"`

我希望它看起来像这样

> Parks_and_Recreation_S05E01_Ms__Knope_Goes_to_Washington

提前致谢。我确实做了一些谷歌搜索，但发现了我可以实现的任何有用的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T16:18:41.583

像这样的东西可能会这样做 - 请注意，如果您像这样转换字符串，您可能会引入重复项。

```
my $input ="Parks and Recreation - S05E01 - Ms. Knope Goes to Washington";

$input =~ s/ - /_/g; # Replace all " - " with "_"
$input =~ s/[^A-Za-z0-9]/_/g; # Replace all non-alphanumericals with "_"

print $input; 
```

这输出：

> Parks_and_Recreation_S05E01_Ms__Knope_Goes_to_Washington

**编辑**

下面的Érics评论非常相关，这里有一个更好的方法，在进行替换之前用非重音符号替换重音字符：

```
use utf8;
use Unicode::Normalize;

my $input="La femme d'à côté";
my $result = NFD($input); # Unicode normalization Form D (NFD), canonical decomposition.
$result !~ s/[^[:ascii:]]//g; # Remove all non-ascii.
$result =~ s/ - /_/g; # Replace all " - " with "_"
$result =~ s/[^A-Za-z0-9]/_/g; # Replace all non-alphanumericals with _
print $result; 
```

此变体输出：

> La_femme_d_a_cote

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T16:34:08.597

```
my $input = "Parks and Recreation - S05E01 - Ms. Knope Goes to Washington";
$input =~ s/\W/_/g; # Replace anything other than letters, numbers and underscore 
```

这输出：

```
Parks_and_Recreation___S05E01___Ms__Knope_Goes_to_Washington 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-24T10:14:26.590

您可以使用以下内容：

```
perl -pe 's/[^A-Za-z0-9]/_/g' 
```

测试：

```
> echo "Parks and Recreation - S05E01 - Ms. Knope Goes to Washington"|perl -pe 's/[^A-Za-z0-9]/_/g'
Parks_and_Recreation___S05E01___Ms__Knope_Goes_to_Washington 
```

# objective-c - Parse.com 从 Tableview 单元格到详细图像视图

> ID：12553856
> 
> 赞同：1
> 
> 时间：2012-09-23T16:05:08.083
> 
> 标签：objective-c, ios, parse-platform

我正在尝试从 Parse 后端获取加载有数据的表视图，以推送带有与表中数据关联的图像（PFFile）的详细视图。我可以很好地将数据加载到表中，但是当转到新的视图控制器时，应用程序崩溃了。这是我的 PFQueryTableViewController 实现中的代码。

```
- (id)initWithCoder:(NSCoder *)aDecoder
{

self = [super initWithClassName:@"Wine"];
self = [super initWithCoder:aDecoder];

if (self) {

    self.className = @"Wine";

    self.textKey = @"Name";

    self.pullToRefreshEnabled = YES;

    self.paginationEnabled = YES;

    self.objectsPerPage = 50;
    self.sections = [NSMutableDictionary dictionary];
    self.sectionToWineTypeMap = [NSMutableDictionary dictionary];
}
return self;
}

- (void)viewWillAppear:(BOOL)animated
{

UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage   imageNamed:@"1.png"]];
[self.tableView setBackgroundView:imageView];

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

return self.sections.allKeys.count;
}

- (NSString *)wineTypeForSection:(NSInteger)section {
return [self.sectionToWineTypeMap objectForKey:[NSNumber numberWithInt:section]];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

{
NSString *wineType = [self wineTypeForSection:section];
NSArray *rowIndecesInSection = [self.sections objectForKey:wineType]; return   rowIndecesInSection.count;
}

- (CGFloat)tableView:(UITableView *)tableView
heightForHeaderInSection:(NSInteger)section {
return 40;
}  

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
UILabel *sectionHeader = [[UILabel alloc] initWithFrame:CGRectNull];
sectionHeader.backgroundColor = [UIColor groupTableViewBackgroundColor];
sectionHeader.textAlignment = UITextAlignmentCenter;
sectionHeader.font = [UIFont boldSystemFontOfSize:17];
sectionHeader.textColor = [UIColor whiteColor];
sectionHeader.text = [self wineTypeForSection:section];
return sectionHeader;
}

- (void)objectsDidLoad:(NSError *)error {
[super objectsDidLoad:error];

[self.sections removeAllObjects];
[self.sectionToWineTypeMap removeAllObjects];

NSInteger section = 0;
NSInteger rowIndex = 0;
for (PFObject *object in self.objects) {
    NSString *wineType = [object objectForKey:@"wineType"];
    NSMutableArray *objectsInSection = [self.sections objectForKey:wineType];
    if (!objectsInSection) {
        objectsInSection = [NSMutableArray array];

        [self.sectionToWineTypeMap setObject:wineType forKey:[NSNumber   numberWithInt:section++]];
    }

    [objectsInSection addObject:[NSNumber numberWithInt:rowIndex++]];
    [self.sections setObject:objectsInSection forKey:wineType];
}
}

- (PFQuery *)queryForTable {
PFQuery *query = [PFQuery queryWithClassName:self.className];

if (self.pullToRefreshEnabled) {
    query.cachePolicy = kPFCachePolicyNetworkOnly;
}

if (self.objects.count == 0) {
    query.cachePolicy = kPFCachePolicyCacheThenNetwork;
}

[query orderByAscending:@"orderIndex"];

return query;
}

- (PFObject *)objectAtIndexPath:(NSIndexPath *)indexPath {
NSString *wineType = [self wineTypeForSection:indexPath.section];

NSArray *rowIndecesInSection = [self.sections objectForKey:wineType];

NSNumber *rowIndex = [rowIndecesInSection objectAtIndex:indexPath.row];
return [self.objects objectAtIndex:[rowIndex intValue]];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     *)indexPath object:(PFObject *)object {
static NSString *CellIdentifier = @"WineCell";

PFTableViewCell *cell = (PFTableViewCell *)[tableView    dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[PFTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault    reuseIdentifier:CellIdentifier];
}

cell.textLabel.text = [object objectForKey:@"Name"];
cell.detailTextLabel.text = [object objectForKey:@"Price"];

return cell;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

if ([[segue identifier] isEqualToString:@"ShowWine"]) {

    NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
    PFObject *object = [self.objects objectAtIndex:indexPath.row];
    PFFile *file = [object objectForKey:@"image"];
    [[segue destinationViewController] setFile:file];

}
} 
```

这是来自详细视图控制器标题和实现的代码

```
@property (nonatomic, retain) PFFile *file;
@property (nonatomic, retain) PFImageView *detailImage; 
```

执行

```
@implementation DetailVC
@synthesize file;
@synthesize detailImage;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

-(void)viewDidAppear:(BOOL)animated

{
detailImage.file = file;

// Now tell PFImageView to download the file asynchronously
[detailImage loadInBackground];
}

- (void)viewDidUnload
{

[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:  (UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

这是我收到的错误消息。

*由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类不符合键详细信息的键值编码。”*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T18:29:52.750

可能仍然存在与`detail`故事板内部命名的现在不存在的 IBOutlet 的连接。

打开你的故事板，打开连接检查器（按 CMD+Option+6）并检查你的 viewControllers 的连接是否仍然链接到`detail`.

只需删除该连接。

# c++ - CEF 浏览器永远无法加载

> ID：12553858
> 
> 赞同：0
> 
> 时间：2012-09-23T16:05:22.257
> 
> 标签：c++, browser, chromium, chromium-embedded

我正在将 chromium 浏览器嵌入到我的 C++ 应用程序（这是一个插件）中。为此，我基本上撕开了 CEF 发行版中的 CefClient 示例应用程序，并试图让它在我的应用程序中工作。

不幸的是，它并没有通过初始化过程。我收到 CEF 通知的第一个“负载状态已更改”，之后就什么也没有了。它坐在那里旋转。接下来我应该接到 display_handler_on_address_change 的电话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:41:14.847

这个问题很简单。子进程无法生成，这意味着初始化进程将在屏幕上出现任何内容之前冻结。

# java - 用于 Facebook 身份验证的跨操作系统简单网络浏览器

> ID：12553860
> 
> 赞同：4
> 
> 时间：2012-09-23T16:05:31.127
> 
> 标签：java, facebook, authentication, browser

我目前正在尝试允许用户在我的 Java 应用程序中使用他们的 Facebook 帐户登录。但是，这需要浏览器显示 Facebook 身份验证的网页。

我现在正在寻找一个“浏览器”项目，它：

*   是**跨操作系统的**
*   支持**单帧**（即在该网址显示页面，没有前进/后退/刷新按钮）
*   支持相对较新的网络标准（Facebook 使用）
*   最好是**轻量级**

我试图避免使用 Eclipse SWT，因为它需要让跨操作系统工作的所有麻烦。这是一个相对较小的项目，我想保持简单。基于摇摆的浏览器也不是替代品，因为它缺乏对较新的网络标准的支持。

**有什么项目可以满足我的需求**吗？有没有另一种方法可以做到这一点，没有浏览器，那就是？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:00:50.967

您是否尝试过以下任何控件：

*   [JavaFX 2.0 中的 WebView](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebView.html)
*   [路宝浏览器](http://lobobrowser.org/browser/api-info.jsp)
*   [SWT 浏览器小部件](http://www.eclipse.org/articles/Article-SWT-browser-widget/browser.html)
*   [WebRenderer](http://www.webrenderer.com/products/swing/developer/examples.php)（付费）
*   [JxBrowser](http://www.teamdev.com/store/jxbrowser/)（付费）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T08:17:56.243

你可以试试 javaFX2.0，如果你使用的是 jdk1.7，它可以在 Windows、Linux 和 Mac 上运行。您可以将浏览器嵌入到摆动面板中并显示/隐藏后退/刷新/前进/地址栏。

[http://docs.oracle.com/javafx/2/swing/SimpleSwingBrowser.java.htm](http://docs.oracle.com/javafx/2/swing/SimpleSwingBrowser.java.htm)

而不是创建自己的方式，我建议您应该使用 OAuth API，并查看用户的登录是否成功。如果您的应用程序仅存储用户的基本信息，您可以在 OAuth 的帮助下获取这些信息。在这种情况下，您无需担心处理用户密码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T21:54:29.183

我以前成功使用过[Lobo Browser](http://lobobrowser.org/browser/api-info.jsp)。您要做的是将 NavigationAdapter 添加到 BrowserPanel，然后检查 NavigationEvent url 是否设置为

```
https://www.facebook.com/connect/login_success.html#access_token=USER_ACCESS_TOKEN 
```

成功授权。

有关最后一部分的更多信息，请查看相应的[Facebook 页面](https://developers.facebook.com/docs/authentication/)。

# casperjs - Casperjs 不能动态打开网址？

> ID：12553864
> 
> 赞同：7
> 
> 时间：2012-09-23T16:06:13.440
> 
> 标签：casperjs

我正在尝试导航到从脚本本身创建的 url。

此示例代码无法按（我的）预期工作。不知道为什么:(

```
var casper = require('casper').create({
    viewportSize:{
        width:1024, height:768
    },
    pageSettings:{
        userAgent:'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_2) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.79 Safari/535.11'
    },
    verbose:true
});

casper.on('open', function (location) {
    console.log(location + ' loaded');
});

casper.start('http://www.google.com', function() {
    this.test.assertTitle('Google', 'Google homepage title is the one expected');
});

casper.mytest = '';

casper.then(function () {
    casper.mytest = 'http://www.yahoo.com';
});

casper.thenOpen(casper.mytest, function() {
    this.test.assertTitle('Yahoo', 'Yahoo homepage title is the one expected');
});

casper.run(function () {
        casper.exit();
    }
); 
```

结果是第二页没有加载：

```
http://www.google.com loaded
PASS Google homepage title is the one expected
 loaded    
FAIL Yahoo homepage title is the one expected
#    type: assertTitle
#    subject: ""
#    expected: "Yahoo" 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-23T19:15:43.307

我认为，您的问题的原因是目前，当您`thenOpen`为 Yahoo 注册 step 时，变量`casper.mytest`为空。这个值此时进入了 CasperJS 的步骤图，您在之前的步骤中更改源变量并不重要。

博客文章[Webscraping with CasperJS and PhantomJS](http://www.subelsky.com/2012/08/webscraping-with-casperjs-and-phantomjs.html)作为获取动态构造的 url 的示例可能会有所帮助。

# mono - WebClient - Mono 的异步下载和请求超时

> ID：12553868
> 
> 赞同：0
> 
> 时间：2012-09-23T16:06:53.013
> 
> 标签：mono, webclient, threadpool

我正在使用 System.Net.WebClient.DownloadFileAsync() 方法将文件从 Internet 下载到本地驱动器。在 Windows 环境中，没有问题，但是当我尝试使用 Mono 时，一旦下载开始就会出现“请求超时”消息并且下载操作失败（零字节文件）。

我在互联网上找到了一些文章，包括 [1] 和 [2]，它们说问题与 ThreadPool 有关，设置 MONO_THREADS_PER_CPU=2000 将是解决方案。到目前为止，我已经尝试过：

1.  在 Win CMD 提示符下，SET MONO_THREADS_PER_CPU=2000: not resolved
2.  在 Mono 2.10.8 CMD 提示符下，SET MONO_THREADS_PER_CPU=2000 未解决
3.  通过 Visual Studio 使用 mono-tools [3]，创建了一个配置文件 MONO_THREADS_PER_CPU=2000（在环境变量设置中）：未解决

相关链接：

1.  [http://www.mono-project.com/Article:ThreadPool_Deadlocks](http://www.mono-project.com/Article:ThreadPool_Deadlocks)
2.  [http://www.mono-project.com/Mod_mono](http://www.mono-project.com/Mod_mono)
3.  -http://mono-tools.com/Debug.aspx

操作系统：Win7 x64，单声道版本：2.10.8

```
System.Net.WebClient client = new System.Net.WebClient();
client.DownloadFileCompleted += new AsyncCompletedEventHandler(DownloadFileCompleted);
client.DownloadFile(url, temp); 
```

# ruby-on-rails - 使用具有自定义控制器名称的资源

> ID：12553870
> 
> 赞同：20
> 
> 时间：2012-09-23T16:07:14.980
> 
> 标签：ruby-on-rails, routes

我正在使用嵌套资源，但是我遇到了应该更具描述性的控制器名称。

例如我有一个控制器`ProductsController`和`ImagesController`

```
resources :products do
  resources :images
end 
```

这工作正常，但后来我可能需要使用`ImageController`产品图像以外的图像，因此它应该命名为**ProductsImagesController**。

但是我怎样才能指定控制器名称`resources()`而不回退到像这样丑陋的东西：

```
match 'products/images' => 'products_images#index'
match 'products/images/new' => 'products_images#new' 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-23T16:21:33.943

```
resources :products do
  resources :images, :controller => "products_images"
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T02:33:59.003

来自 Zend 框架背景，我认为您正在寻找模块化结构。Rails 似乎提供了这个，称为“命名空间”：

```
namespace :admin do
  resources :posts, :comments
end 
```

这会创建到 Admin::PostsController 和 Admin::CommentsController 的路由。在您的情况下，您将拥有 Products::ImagesController。

[http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)

我从另一个接受的答案中发现：[zend modules like in rails](https://stackoverflow.com/questions/5264583/zend-modules-like-in-rails)

# python - 在 Heroku 上部署 Django 应用程序时如何导入 yaml

> ID：12553871
> 
> 赞同：0
> 
> 时间：2012-09-23T16:07:35.317
> 
> 标签：python, django, heroku, import, importerror

我有一个工作的 Django 应用程序，但是当我尝试在 Heroku 上部署它时，我收到了这个错误：

异常类型：ImportError 异常值：
没有名为 yaml 的模块

```
ImportError at /crunchApp/contact
No module named yaml
Request Method: GET
Request URL:    http://desolate-citadel-5832.herokuapp.com/crunchApp/contact
Django Version: 1.4.1
Exception Type: ImportError
Exception Value:    No module named yaml
Exception Location: /app/crunchApp/Crunch.py in <module>, line 10
Python Executable:  /app/.heroku/venv/bin/python
Python Version: 2.7.2
Python Path:    
['/app',
'/app/.heroku/venv/lib/python2.7/site-packages/distribute-0.6.27-py2.7.egg',
'/app/.heroku/venv/lib/python2.7/site-packages/pip-1.1-py2.7.egg',
'/app',
 '/app/.heroku/venv/lib/python27.zip',
'/app/.heroku/venv/lib/python2.7',
'/app/.heroku/venv/lib/python2.7/plat-linux2',
'/app/.heroku/venv/lib/python2.7/lib-tk',
'/app/.heroku/venv/lib/python2.7/lib-old',
'/app/.heroku/venv/lib/python2.7/lib-dynload',
'/usr/local/lib/python2.7',
'/usr/local/lib/python2.7/plat-linux2',
'/usr/local/lib/python2.7/lib-tk',
'/app/.heroku/venv/lib/python2.7/site-packages']
Server time:    Sat, 22 Sep 2012 20:35:34 -0700 
```

我不确定我需要更新什么，因为崩溃的行只是这样说：

```
import yaml 
```

谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-15T15:15:17.693

为了扩展 forvaidya 的答案，您的 requirements.txt 文件中缺少*yaml*，这就是为什么 Heroku 在您提交应用程序时没有安装它的原因。在您的基本目录中，重新运行以下命令以使其工作：

```
pip freeze > requirements.txt
git add .
git commit -m "fixed requirements.txt file" 
```

...然后推回 Heroku。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:19:58.233

yaml 模块不存在或不在路径中。

# jquery - Prototype.js 中 eq() 过滤器的类似物

> ID：12553872
> 
> 赞同：0
> 
> 时间：2012-09-23T16:07:37.600
> 
> 标签：jquery, filter, prototypejs

我必须为 分配不同的尺寸`td`，宽度取决于标签在表格中的位置。

在 Jquery 我可以写

```
$$('td .yui-dt-liner div[id^=yui-gen]').eq(2).invoke("setStyle",{'width':'122px'}); 
```

改变等式中的论点。prototype.js 中是否有类似的表达？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T18:39:56.370

您需要在这里做的就是：

```
$$('td .yui-dt-liner div[id^=yui-gen]')[2].setStyle({'width':'122px'}); 
```

`$$`返回一个普通的旧元素数组，您可以使用它访问您需要的任何元素。`setStyle`是一个 Element 方法，因此您不必“包装它”或您需要对 jQuery 做的任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:54:00.580

您可以使用 CSS 选择器`$$("td:nth-child(2)")`- 这将选择所有行中的第二个单元格

# javascript - 用于模式对话框的 iframe 与 innerHTML - 哪个更好？

> ID：12553879
> 
> 赞同：1
> 
> 时间：2012-09-23T16:08:15.623
> 
> 标签：javascript, html, iframe, innerhtml

我在我的 HTML5 页面上模拟模态窗口功能，方法是创建一个 div `position: fixed`，以浏览器窗口为中心等。在某些情况下，我的模态窗口只显示带有一个或多个按钮的消息，例如`OK` `Cancel`，但在其他情况下，我是显示更复杂的表格，例如即时消息对话框。

问题是针对更复杂的情况。那么哪个更好，（1）`<iframe>`在我的“模态”窗口中有一个或（2）`<div>`加上一些Ajax代码来检索我的表单内容并将其注入到div的innerHTML中？

在这两种情况下有哪些注意事项？当您选择其中之一时，您的理由是什么？

浏览器要求：IE9+ 和其他健全的浏览器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T16:11:52.540

`iframe`仅当您确实需要时才应使用`iframe`. 使用 iframe 的原因是：

1.  从另一个域加载内容的最简单方法。
2.  将内容的安全上下文与单独的域隔离。
3.  在您的网页中嵌入一个完全独立的网页（独立的脚本、独立的样式表等）。
4.  您不想编写 ajax 代码来动态加载内容，而只想使用`.src`iframe 的内置功能。

如果您不需要 iframe 的任何这些功能，那么通常更容易使用 div（它会自动调整其内容的大小 - 而 iframe 不会）并将所需的内容放入该 div 中。

任何一个都可以工作。

# .net - 实体框架 System.ObjectDisposedException

> ID：12553882
> 
> 赞同：0
> 
> 时间：2012-09-23T16:08:34.400
> 
> 标签：.net, entity-framework

我正在这样做：

```
User user = _usersRepository.SingleOrDefault(u => u.Username == "gigi", new string[] { "Roles" });
UnitOfWork.Current.Dispose(); 
```

而且我没有得到与该用户关联的角色，我得到了 System.ObjectDisposedException。

如果不执行该存储库调用，我只需执行以下操作：

```
 User user;
            using (MyEntities ctx = new MyEntities ())
            {
                user = ctx.Users.Include("Roles").SingleOrDefault(u => u.Username == "gigi");
            } 
```

我确实得到了角色。我错过了什么？

LE：这就是我的基础存储库的样子：

```
 public class BaseRepository<T> : IBaseRepository<T> where T : class
    {
        private DbContext _context;
        private IDbSet<T> _dbSet;

        protected DbContext Context
        {
            get
            {
                if (_context == null)
                {
                    EFUnitOfWork currentUnitOfWork = (EFUnitOfWork)UnitOfWork.Current;
                    _context = currentUnitOfWork.Context;
                }

                return _context;
            }
        }

        protected IDbSet<T> DbSet
        {
            get
            {
                if (_dbSet == null)
                {
                    _dbSet = Context.Set<T>();
                }

                return _dbSet;
            }
        }

        public void Add(T entity)
        {
            DbSet.Add(entity);
        }

        public void Attach(T entity)
        {
            DbSet.Attach(entity);
        }

        public void Delete(T entity)
        {
            DbSet.Remove(entity);
        }

        public void Update(T entity)
        {
            Context.Entry(entity).State = System.Data.EntityState.Modified;
        }

        public T SingleOrDefault(Expression<Func<T, bool>> where, string[] includes=null)
        {            
            if (includes != null)
            {
                foreach (string property in includes)
                {
                    DbSet.Include(property);
                }
            }
            return DbSet.SingleOrDefault(where);
        }

        public IQueryable<T> Get(Expression<Func<T, bool>> where, string[] includes=null)
        {
            if (includes != null)
            {
                foreach (string property in includes)
                {
                    DbSet.Include(property);
                }
            }
            return DbSet.Where(where);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T16:09:55.427

`DbSet.Include()`返回一个`DbSet<T>`包含该导航属性的新值。
由于您不使用返回的 DbSet，因此您的`Include()`调用无效。

您需要将结果分配给`Include()`局部变量并使用它而不是`DbSet`.

# http-referer - 当用户链接到您时，Google 何时包含用户的查询（q= 在 HTTP_REFERER 的查询字符串中）？

> ID：12553889
> 
> 赞同：2
> 
> 时间：2012-09-23T16:09:36.183
> 
> 标签：http-referer

我注意到，当 Google 将用户发送到您的页面时，有时 Google 会将用户的原始查询包含在 HTTP_REFERER 的查询字符串中，有时则不会。他们如何做出决定？例如，我注意到，如果他们发现用户的查询与您页面上的某些内容完全匹配，例如在您的常见问题解答中提出问题，他们不包括 q=，而更广泛的匹配通常包括它。

我希望 Google 始终包含 q= 因为如果他们将某人发送到我的常见问题解答的顶部，我可以突出显示用户的确切问题和答案，而不是让他们仍然通过可能 50 个问题的常见问题解答来查找他们的问题.

感谢您对此的任何帮助。

史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T03:15:52.527

我认为当用户从 http google 搜索时，google 总是在 http referer 字段中提供查询。如果他们使用的是 https google，则查询将被删除。

请参阅[http://blogs.adobe.com/digitalmarketing/analytics/the-impact-of-google-encrypted-search/](http://blogs.adobe.com/digitalmarketing/analytics/the-impact-of-google-encrypted-search/)

我正在尝试查找有关此的更多最新信息。我个人要采取的下一步是在谷歌搜索“着陆页优化”。

# java - 最佳实践：从字符串集合映射对象属性

> ID：12553891
> 
> 赞同：2
> 
> 时间：2012-09-23T16:09:47.200
> 
> 标签：java, android, oop, properties

我有这个 Java 应用程序，我正在使用 JSoup 库进行一些网络抓取。我正在使用该库，它返回了其中 6 个字符串的集合。我需要将这 6 个随机字符串映射到对象的属性。我知道字符串的输入顺序以及什么数字映射到什么属性。我不觉得我的方法是处理这个问题的最好方法。感觉很迷茫，可读性很差，我只是想知道是否有更好的方法来做到这一点。我正在考虑使用枚举或单独使用这些行。长话短说，这里有一个代码片段。谢谢你的帮助。

```
List<String> strings = JSoup.getStrings();
Car car = new Car();
int i = 0;
for(String s : strings) {
    switch (i) {
        case 0:
            car.setMake(s);
            break;
        case 1:
            car.setModel(s);
            break;
        .....
    }
    i++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T16:19:12.287

简单点怎么样

```
car.setMake(strings.get(0));
car.setModel(strings.get(1));
... 
```

对我来说，这看起来非常可读和简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T18:47:35.600

由于这个问题是关于最佳实践的，因此您应该考虑在 Car 中提供一个将字符串列表作为输入的构造函数。然后构造函数将从字符串列表中一一初始化汽车的字段，因为这就是构造函数的用途。这意味着用于填充汽车实例的代码现在将位于一个位置，即在 Car 类中。

这种方法将消除创建 Car 实例的代码手动初始化 Car 实例的需要。无论有多少不同的类创建一个 Car，初始化代码都不会在每个类中重复。将初始化代码放在汽车本身可以提高可重用性。这不就是编写类的目的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T16:19:02.887

我会这样写：

```
List<String> strings = JSoup.getStrings();
if (null == strings || strings.isEmpty() || MAX_SIZE != strings.size()) {
    throw new IllegalArgumentException("I don't know what you are talking about!");
}
Car car = new Car();
car.setMake(strings.get(0));
car.setModel(strings.get(1));
... 
```

代码的读者很清楚，我希望列表中只有这么多值，并且每个元素都是汽车的特定属性。当一个新的属性被添加时，异常会让修改器知道他必须在这里做一些事情来处理这个新的属性。

# javascript - 为什么计时器停止？以及如何防止它（Javascript） - Iframe

> ID：12553893
> 
> 赞同：0
> 
> 时间：2012-09-23T16:09:56.220
> 
> 标签：javascript, html, iframe, timer, countdown

好的，我的网站上有一个页面，客户必须在其中查看广告（网站）20 秒。我在 iframe 标记中显示他必须查看的这个网站。及以上我有一个 20 秒的倒数计时器。

我还确保当窗口失去焦点时，计时器停止。确保客户在实际查看网站。

但我有一个问题。当客户端在 iframe 中单击网站上的某些内容时，计数器实际上会停止（这意味着它失去了焦点）。但我不希望这种情况发生，我希望计时器停止倒计时，只有当他转到另一个水龙头或另一个窗口时。但如果他点击 iframe 中网站中的链接，我希望它继续计数。

这是我使用的代码：

```
<html>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
var myInterval;
var seconds=20;

$(document).ready(function () {
    $(window).focus(function () {
        clearInterval(myInterval); // Clearing interval if for some reason it has not been cleared yet
           if (!flag)
           { myInterval = setInterval(tick, 1000);}
    }).blur(function () {
        clearInterval(myInterval); // Clearing interval on window blur
    });
myInterval = setInterval(tick, 1000);
});
function tick()
{
      display();

        if (seconds>0)
        {
         seconds--;
        }
        else
        {
          document.getElementById('TrafficHeader').innerHTML +="<?php include_once('Code.php'); 
          ?>";
          clearInterval(myInterval);
        }
}
function display()
{
   $("#TrafficHeader").html(seconds);
}
</script>
<div id="TrafficHeader" style="height:100px; background-color:grey; padding:20px;"></div>
<iframe src="http://www.website.com" height="100%" width="100%" frameborder="0">
</iframe>
</html> 
```

任何帮助将不胜感激在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T17:20:49.673

Try using [focusin](http://api.jquery.com/focusin/) and [focusout](http://api.jquery.com/focusout/) instead of just focus and blur. And adjust your logic accordingly to accomodate the multiple `focusin` fires.. Something like

```
$(window).focusout(function() {
  window.isStillActive = false;
  ...
}
$(window).focusin(function() {
  if (!window.isStillActive) {
    ...
    clearTimeout();
    ...
    window.isStillActive = true;
  }
} 
```

# sql - SQL 将 11 行中返回的值转换为 89 列

> ID：12553897
> 
> 赞同：0
> 
> 时间：2012-09-23T16:10:10.597
> 
> 标签：sql, sql-server, pivot

我需要一些帮助来将数据行转换为列。

我的每一行都包含 8 列，我希望将所有这些列都包含在最终的列列表中。

通常，我会编写一个如下所示的 select 语句，以返回与特定产品相关的所有定价行（大约 11 个）`ProductID`

```
SELECT  
    ProductID,
    PricingID, 
    COSBeginQty ,
    COSCOLCode,
    COSTrade,
    COSTypeOfPrice,
    COSIsActive, 
    COSPrice,
    COSPriceTAG,
    RowIndex
FROM 
    Pricing
Where 
    ProductID = XXXXX 
```

我返回的每一行都有关于我想要显示所有返回值的内容：

```
ProductID, 
CosBeginQty1 COSBeginQty1  COSCOLCode1 COSTrade1 COSTypeOfPrice1 COSIsActive1 COSPrice1 COSPriceTAG1  
CosBeginQty2 COSBeginQty2  COSCOLCode2 COSTrade2 COSTypeOfPrice2 COSIsActive2 COSPrice2 COSPriceTAG2  
CosBeginQty3, COSBeginQty3  COSCOLCode3 COSTrade3 COSTypeOfPrice3 COSIsActive3 COSPrice3 COSPriceTAG3   . . . . 
```

. . .（从所有 11 行中计算我需要的值，总共 89 列）

这是我桌子上的脚本

```
CREATE TABLE [dbo].[Pricing](
    [ProductID] [uniqueidentifier] NOT NULL,
    [PricingID] [uniqueidentifier] NULL,
    [COSBeginQty] [int] NULL,
    [COSCOLCode] [nvarchar](50) NULL,
    [COSTrade] [nvarchar](50) NULL,
    [COSTypeOfPrice] [nchar](10) NULL,
    [COSIsActive] [bit] NULL,
    [COSPrice] [decimal](12, 3) NULL,
    [COSPriceTAG] [uniqueidentifier] NULL,
    [RowIndex] [int] NULL,
    [COSCreateDate] [datetime] NULL,
    [COSLastModifiedDate] [datetime] NULL,
 CONSTRAINT [PK_Pricing] PRIMARY KEY CLUSTERED 
(
    [ProductID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
INSERT [dbo].[Pricing] ([ProductID], [PricingID], [COSBeginQty], [COSCOLCode], [COSTrade], [COSTypeOfPrice], [COSIsActive], [COSPrice], [COSPriceTAG], [RowIndex], [COSCreateDate], [COSLastModifiedDate]) VALUES (N'99533f6e-218f-48ef-bf01-03ea7808f9b1', N'5d8de11a-2399-4c68-87cd-4969827bed27', 7, N'MAN', N'T1', N'B         ', 1, CAST(23.400 AS Decimal(12, 3)), N'bf1d79bf-a60d-4603-8c2d-04492e9e1575', 1, NULL, NULL)
GO
INSERT [dbo].[Pricing] ([ProductID], [PricingID], [COSBeginQty], [COSCOLCode], [COSTrade], [COSTypeOfPrice], [COSIsActive], [COSPrice], [COSPriceTAG], [RowIndex], [COSCreateDate], [COSLastModifiedDate]) VALUES (N'94d67d13-e4e6-4360-9b7a-1cef7d997297', N'5ba0a6e9-53ed-4b9c-a9eb-2b09c41eb56c', 2, N'MAN', N'T2', N'A         ', 1, CAST(3456.234 AS Decimal(12, 3)), N'6ce7d421-e49a-469f-ae4c-a8bbb2f432fc', 3, NULL, NULL)
GO
INSERT [dbo].[Pricing] ([ProductID], [PricingID], [COSBeginQty], [COSCOLCode], [COSTrade], [COSTypeOfPrice], [COSIsActive], [COSPrice], [COSPriceTAG], [RowIndex], [COSCreateDate], [COSLastModifiedDate]) VALUES (N'e2216b52-66a9-4c29-a8ec-83c6ae03cd18', N'a8c27e9a-120c-47f2-bdd9-3e9e934ca237', 12, N'TEM', N'T1', N'B         ', 1, CAST(7234.000 AS Decimal(12, 3)), N'555c0f25-6af9-4114-8f11-096f0e5c7bcd', 1, NULL, NULL)
GO
ALTER TABLE [dbo].[Pricing] ADD  CONSTRAINT [DF_Pricing_ProductID]  DEFAULT (newid()) FOR [ProductID]
GO
ALTER TABLE [dbo].[Pricing] ADD  CONSTRAINT [DF_Pricing_PricingID]  DEFAULT (newid()) FOR [PricingID]
GO
ALTER TABLE [dbo].[Pricing] ADD  CONSTRAINT [DF_Pricing_COSPriceTAG]  DEFAULT (newid()) FOR [COSPriceTAG]
GO 
```

**问题的解决方案如下，感谢 BLUEFEET**

```
select *, row_number() over(partition by ProductID order by ProductID) rn
from dbo.pricing;

DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('Pricing') and
               C.name LIKE '%COS%'
               and C.name Not in ('COSCreateDate', 'COSLastModifiedDate')
         for xml path('')), 1, 1, '')

select @colsPivot = STUFF((SELECT  ',' 
                      + quotename(c.name 
                         + cast(t.rn as varchar(10)))
                    from
                    (
                      select row_number() over(partition by productid 
                                               order by productid) rn
                      from Pricing
                    ) t
                     cross apply 
                      sys.columns as C
                   where C.object_id = object_id('Pricing') and
                         C.name LIKE '%COS%'
                     and C.name Not in ('COSCreateDate', 'COSLastModifiedDate')
                   group by c.name, t.rn
                   order by t.rn
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select *
      from
      (
        select ProductID,
            col + cast(rn as varchar(10)) new_col,
            val
        from 
        (
          select ProductID,
              PricingID, 
              cast(COSBeginQty as varchar(50)) COSBeginQty,
              cast(COSCOLCode as varchar(50)) COSCOLCode,
              cast(COSTrade as varchar(50)) COSTrade,
              cast(COSTypeOfPrice as varchar(50)) COSTypeOfPrice,
              cast(COSIsActive as varchar(50)) COSIsActive, 
              cast(COSPrice as varchar(50)) COSPrice,
              cast(COSPriceTAG as varchar(50)) COSPriceTAG,
              RowIndex,
              row_number() over(partition by productid 
                                               order by productid) rn
          from Pricing
        ) x
        unpivot
        (
          val
          for col in ('+ @colsunpivot +')
        ) u
      ) x1
      pivot
      (
        max(val)
        for new_col in
          ('+ @colspivot +')
      ) p'

exec(@query) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T16:20:47.430

在没有看到完整的表结构或示例数据的情况下，看起来您可以使用动态 SQL 执行类似的操作。这同时使用`UNPIVOT`和`PIVOT`来获得结果：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX) 
```

第一部分`@colsUnpivot`获取您需要`UNPIVOT`然后重新旋转的列的列表。您需要这样做，`UNPIVOT`因为您希望您的结果包含这些列的多个版本 -`CosBeginQty1, CosBeginQty2, CosBeginQty3`

```
select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('Pricing') and
               C.name LIKE '%COS%'
         for xml path('')), 1, 1, '') 
```

获取的代码`@colsPivot`是获取最后一列。通过将 应用于表中的每一行来 `CosBeginQty1, CosBeginQty2, CosBeginQty3`检索这些值 ( )。`row_number`

```
select @colsPivot = STUFF((SELECT  ',' 
                      + quotename(c.name 
                         + cast(t.rn as varchar(10)))
                    from
                    (
                      select row_number() over(partition by productid 
                                               order by productid) rn
                      from Pricing
                    ) t
                     cross apply 
                      sys.columns as C
                   where C.object_id = object_id('Pricing') and
                         C.name LIKE '%COS%'
                   group by c.name, t.rn
                   order by t.rn
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'') 
```

最后一部分生成要执行的动态 sql 语句。它同时使用`@colsUnpivot`和`@colsPivot`值来形成要查询的最终 sql 语句。

```
set @query 
  = 'select *
      from
      (
        select ProductID, PricingID, RowIndex,
            col + cast(rn as varchar(10)) new_col,
            val
        from 
        (
          select ProductID,
              PricingID, 
              COSBeginQty,
              COSCOLCode,
              COSTrade,
              COSTypeOfPrice,
              COSIsActive, 
              COSPrice,
              COSPriceTAG,
              RowIndex,
              row_number() over(partition by productid 
                                               order by productid) rn
          from Pricing
        ) x
        unpivot
        (
          val
          for col in ('+ @colsunpivot +')
        ) u
      ) x1
      pivot
      (
        max(val)
        for new_col in
          ('+ @colspivot +')
      ) p'

exec(@query) 
```

此解决方案将 a 关联`row_number()`到每个值，然后将`UNPIVOT`s 列关联起来，最后`PIVOT`将它们与`row_number()`添加到每个列名称中。

A `PIVOT`and`UNPIVOT`可以静态执行，但由于您将拥有未知数量的值，`PIVOT`因此您应该使用动态版本。如果您使用的是静态版本，那么它看起来像这样：

```
select *
from
(
   select ProductID, PricingID, RowIndex,
      col + cast(rn as varchar(10)) new_col,
      val
   from 
   (
     select ProductID,
         PricingID, 
         COSBeginQty,
         COSCOLCode,
         COSTrade,
         COSTypeOfPrice,
         COSIsActive, 
         COSPrice,
         COSPriceTAG,
         RowIndex,
         row_number() over(partition by productid 
                                               order by productid) rn
     from Pricing
   ) x
   unpivot
   (
      val
      for col in (COSBeginQty, COSCOLCode, COSTrade, COSTypeOfPrice
                 COSIsActive, COSPrice, COSPriceTAG)
   ) u
) x1
pivot
(
   max(val)
   for new_col in ([COSBeginQty1], [COSCOLCode1], [COSTrade1], [COSTypeOfPrice1],
                   [COSIsActive1], [COSPrice1], [COSPriceTAG1],
                  [COSBeginQty2], [COSCOLCode2], [COSTrade2], [COSTypeOfPrice2],
                   [COSIsActive2], [COSPrice2], [COSPriceTAG2])
) p 
```

编辑 #2，应用您的示例数据，脚本将如下所示：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('Pricing') and
               C.name LIKE '%COS%'
               and C.name Not in ('COSCreateDate', 'COSLastModifiedDate')
         for xml path('')), 1, 1, '')

select @colsPivot = STUFF((SELECT  ',' 
                      + quotename(c.name 
                         + cast(t.rn as varchar(10)))
                    from
                    (
                      select row_number() over(partition by productid 
                                               order by productid) rn
                      from Pricing
                    ) t
                     cross apply 
                      sys.columns as C
                   where C.object_id = object_id('Pricing') and
                         C.name LIKE '%COS%'
                     and C.name Not in ('COSCreateDate', 'COSLastModifiedDate')
                   group by c.name, t.rn
                   order by t.rn
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select *
      from
      (
        select ProductID, PricingID, RowIndex,
            col + cast(rn as varchar(10)) new_col,
            val
        from 
        (
          select ProductID,
              PricingID, 
              cast(COSBeginQty as varchar(50)) COSBeginQty,
              cast(COSCOLCode as varchar(50)) COSCOLCode,
              cast(COSTrade as varchar(50)) COSTrade,
              cast(COSTypeOfPrice as varchar(50)) COSTypeOfPrice,
              cast(COSIsActive as varchar(50)) COSIsActive, 
              cast(COSPrice as varchar(50)) COSPrice,
              cast(COSPriceTAG as varchar(50)) COSPriceTAG,
              RowIndex,
              row_number() over(partition by productid 
                                               order by productid) rn
          from Pricing
        ) x
        unpivot
        (
          val
          for col in ('+ @colsunpivot +')
        ) u
      ) x1
      pivot
      (
        max(val)
        for new_col in
          ('+ @colspivot +')
      ) p'

exec(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5fc2d/8)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-23T16:56:57.840

如果您可以使用动态 sql，那么这可能适合您。

```
DECLARE @OUTPUT NVARCHAR(MAX)
SET @OUTPUT = "XXXXX"
SELECT @OUTPUT = @OUTPUT + "," + PricingID + COSBeginQty + COSCOLCode + COSTrade + COSTypeOfPrice + COSIsActive + COSPrice + COSPriceTAG + RowIndex
FROM Pricing
Where ProductID = XXXXX 
```

# javascript - 如何在js中写入本地文件（phonegap）

> ID：12553898
> 
> 赞同：0
> 
> 时间：2012-09-23T16:10:11.727
> 
> 标签：javascript, file, jquery-mobile, text

您好我正在尝试在本地文本文件中写入一些文本，`$.twFile.save`但结果是什么。我尝试用我的 phonegap 应用在安卓设备上写字。

我使用以下代码

```
 t.executeSql('SELECT * FROM flatmetric', [], 
      function(t, metric) {
       var mymetric = metric.rows.length;

       for (i = 0 ; i < mymetric ; i += 1) {
        var row = metric.rows.item(i);

          sendmetric += row.buildingcode;
          sendmetric += row.flatno; 

       $.twFile.save("file:///mnt/sdcard/koinoxrista/Collector.txt", sendmetric) ;
      }
     ) 
```

我哪里错了？

除了twFile还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:32:47.613

在 WebKit 浏览器中，twFile 使用 Java 小程序 TiddlySaver.jar 来完成文件系统交互。但是，Android 中的 WebView 不能使用这个或任何 Java 小程序。

而是尝试 phonegap 文件 API： [http ://docs.phonegap.com/en/2.6.0/cordova_file_file.md.html#File](http://docs.phonegap.com/en/2.6.0/cordova_file_file.md.html#File)

请参阅 StackOverflow： [在 phonegap 中写入和读取文件](https://stackoverflow.com/questions/6967696/writing-and-reading-file-in-phonegap)

# ios - IOS6 地理位置 watchPosition 回调失败

> ID：12553910
> 
> 赞同：1
> 
> 时间：2012-09-23T16:11:13.390
> 
> 标签：ios, safari, geolocation, ios6, ios6-maps

在第一对之后，`watchposition`回调没有在**IOS6中触发。**开始时它会触发一次或两次，仅此而已。一旦失败，对`watchposition`or的进一步调用`getposition`不会触发成功或失败回调。

我正在寻找的解决方法是打开 IOS 6 中引入的地图应用程序，然后点击位置箭头来找到自己。尝试此操作后，回调会按预期每隔一秒左右触发一次。

**更新**：如果您在导航中运行地图，效果很好

此外，只要您不在使用 GPS 接收器的地方，它似乎就可以保持良好运行。

我作为错误提交给苹果；其他人也请这样做！

有人知道编写解决方法的方法吗？

我所能收集到的只是地图正在执行一个初始化例程以打开 API ......

我试图监视手表回调并手动触发，`getpostion`希望它会重新启动但`watchpostion`没有成功......

**2012 年 10 月 16 日更新**：ipad 锁定/睡眠后手表位置出现故障。唤醒时 watchposition() 不会触发。注意到如果 safari 被最小化并召回它开始射击。

**2012 年 11 月 17 日更新**：错误视频和解决方法[http://youtu.be/ygprgHh6LxA](http://youtu.be/ygprgHh6LxA) - 运行 IOS6.1 Beta2

**2012 年 12 月 20 日更新**：IOS6.1 Beta 4 测试 - 仍未解决。

* * *

**更新**3/11/13：复制示例

好的，只需几秒钟即可复制一个简单的问题。我觉得这不是野生动物园，而是IOS问题。这几乎就像 Google 为 IOS 编写了 bios 以满足 WC3 html 地理位置规范，并在 IOS6 将它们踢下巴士时随身携带。使用 IOS 设备去这里：

[http://uc.myaesc.com/geoloctestorig.htm](http://uc.myaesc.com/geoloctestorig.htm)

点击开始，手表几乎每秒都会返回结果。然后单击 Google 链接离开此页面。然后用户浏览器返回按钮返回点击开始。Watch 将返回 1 到 3 条记录并挂起。最小化 safari（主页按钮）然后恢复（safari 图标）；停止悬挂

而已。直到它没有挂起，问题仍然存在。

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:21:26.740

我的想法：只要位置发生变化，就会调用回调，所以如果没有，你就不会得到回调。在外部，GPS 提供更准确的位置，并且它会针对较小的移动而改变，否则其他定位方法不会注意到这些移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:59:49.720

对于任何编写基于 Web 的地理定位应用程序的人来说，这个问题似乎是一场真正的灾难，因为 iOS 设备拥有如此高的市场份额。请大家确保您已在 bugreport.apple.com 上向苹果提交错误报告！

很可能与（我没有足够的声誉在那里发布）相同的问题：[iOS 6 在 webapps 中破坏 GeoLocation (apple-mobile-web-app-capable)](https://stackoverflow.com/questions/12503815/ios-6-breaks-geolocation-in-webapps-apple-mobile-web-app-capable)

如果你想调查这个问题，我已经整理了一个测试页，你可以使用它：

1.  在您的 iPhone 或 iPad 中打开[http://jsbin.com/esasix/16/ 。](http://jsbin.com/esasix/16/)
2.  在外面走走，刷新页面并尝试其他测试场景。
3.  观察你的职位是如何被报道的。

我自己做了很多测试，结果如下：

执行
的测试： 使用这个简单的测试页面进行自己的测试：jsbin.com/esasix/16/
使用 maps.google.com mobileweb map
进行自己的测试 使用我的应用程序进行自己的测试来自我的应用程序
的外部用户的许多日志
使用不同的设备进行测试

我的发现：

在相同的测试情况下，我经常以 5m 的精度定期获得完美的定位，以及由于 bug 导致的接收不佳。这意味着设备、位置、天气、一天中的时间等在两种情况下都是相同的。

有时加载页面后只返回一个位置。
有时加载页面后会返回几个位置。
有时会返回一些好的位置然后突然停止返回位置（有时会在静止一段时间后发生）并进入不良状态，可能会再次返回位置但通常是坏的位置。
有时会以 65m 的精度返回许多位置。
有时返回的许多位置精度不一（通常为 50-300m）。
这些精度差的位置序列有时接近5m精度的完美位置序列（在它进入不良状态之后？）。
有时，连续多次测试一切正常:-)

这些行为似乎以各种组合出现。

在某些情况下，重新打开 Safari 似乎会重新设置某些内容并重新开始工作。但是，在其中一些情况下，它只工作了一段时间，而在其他情况下，它根本没有效果，因此它可以用作可靠的解决方法（？）。打开内置地图应用程序时显示相同的行为，有时它有帮助，有时它没有......

已经测试了使用 navigator.geolocation.watchPosition 的代码以及定期在循环中调用 navigator.geolocation.getCurrentPosition 的代码，并且没有任何区别，在这两种情况下都可以看到相同类型的问题。

iOS 版本 6.0 到 6.1.2 似乎发生了我没有使用 apple-mobile-web-app-capable 元标记。

我发现有时特定的测试情况似乎显示出导致得出结论的特定行为，但随后另一个测试证明该结论是错误的。我还没有找到任何可以可靠重现的行为（也没有解决方案）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T15:12:03.030

同样的问题。我添加了额外的可选参数但无济于事......尝试了一些事情（更新了隐私设置，尝试了 getPosition 与 watchPosition，在后台运行地图。是的，就在 3 天前，我的代码是完美的，现在，它是垃圾。 .. :-( 苹果的悲伤日子？

# android - 是否可以使用 Intent.ACTION_PICK 访问图片的 res/raw 文件？

> ID：12553912
> 
> 赞同：1
> 
> 时间：2012-09-23T16:11:28.377
> 
> 标签：android, android-intent

是否可以使用（Intent.ACTION_PICK，android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI）；或类似访问图片的 res/raw 文件的东西？如果是这样，需要进行哪些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:13:36.450

它不太清楚你在问什么，但如果你想使用 res 中的图片，那么首先将这些图片放入 res/drawable 中，现在我们可以以多种方式使用这张图片

用于后台属性（在布局中）

**android:background="@drawable/mypic"**

在图像视图中（在布局中）

```
<ImageView>
...
android:src="@drawable/mypic"
</ImageView> 
```

在图像视图中（在活动代码中）

```
ImageView image = new ImageView(context);
image.setImageDrawable(context.getResources().getDrawable(R.drawable.mypic)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:17:01.957

制作了一个自定义数据库，而不是依赖 MediaStore。

# cocoa - 在 iOS 6 上使用情节提要处理方向/旋转

> ID：12553921
> 
> 赞同：5
> 
> 时间：2012-09-23T16:12:26.850
> 
> 标签：cocoa, orientation, ios6

所以....我整个下午都在这上面度过，看过各种帖子并尝试了很多事情来让它发挥作用，但没有运气。我现在已经把它带回了一个尽可能简单的案例，但它似乎仍然不起作用。

在这个简单的场景中，我有一个故事板，其中只包含一个 UINavigationController 和一个初始视图控制器： ![在此处输入图像描述](../Images/c6cc91760879358d4d0b81d48506b6ba.png)

看过所有关于 IOS 6 中自动旋转方法更改的帖子后，我创建了 UINavigationController 的子类，并在该子类和第一个视图控制器上实现了 shouldAutorotate 和 supportedInterfaceOrientations 方法：

导航控制器：

```
// NavController.h
#import <UIKit/UIKit.h>

@interface NavController : UINavigationController

@end

// NavController.m
#import "NavController.h"

@interface NavController ()

@end

@implementation NavController

- (BOOL) shouldAutorotate {
    return YES;
}

- (NSUInteger) supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
}

@end 
```

第一控制器

```
// FirstController.h
#import <UIKit/UIKit.h>

@interface FirstController : UIViewController

@end

// FirstController.m
#import "FirstController.h"

@interface FirstController ()

@end

@implementation FirstController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
}

@end 
```

项目设置指定应支持所有旋转： ![在此处输入图像描述](../Images/ea6686aef32b5afb6690593d439d2df8.png)

这些似乎都没有任何效果......！当我在模拟器中运行它时，我得到：

![在此处输入图像描述](../Images/1fe1bffa6a0868d4787867bc03932a11.png)

![在此处输入图像描述](../Images/3804254cbfd2fce8040fd5c663963f58.png)

请..！我在这里想念什么？这真让我抓狂！我想至少让这个简单的案例工作，这样我就有希望让我相当大的应用程序工作！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-23T21:13:45.560

如果您打算为所有视图控制器启用或禁用旋转，则不需要继承 UINavigationController。而是使用：

```
 -(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window 
```

在您的 AppDelegate 中。

如果您计划支持应用程序中的所有方向，但父视图控制器（UINavigationController 堆栈）上的不同方向，您应该使用

```
 -(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window 
```

结合您的父视图控制器中的以下方法。

```
 - (BOOL)shouldAutorotate 
```

和

```
- (NSUInteger)supportedInterfaceOrientations 
```

但是，如果您计划在同一个导航堆栈中的不同子 ViewController 中具有不同的方向设置（像我一样），您需要检查导航堆栈中的当前 ViewController。

我在 UINavigationController 子类中创建了以下内容：

```
 - (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    int interfaceOrientation = 0;

    if (self.viewControllers.count > 0)
    {
        id viewController;
        DLog(@"%@", self.viewControllers);
        for (viewController in self.viewControllers)
        {
            if ([viewController isKindOfClass:([InitialUseViewController class])])
            {
                 interfaceOrientation = UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
            }
            else if ([viewController isKindOfClass:([MainViewController class])])
            {
                 interfaceOrientation = UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
            }
            else
            {
                 interfaceOrientation = UIInterfaceOrientationMaskAllButUpsideDown;
            }
        }
    }
    return interfaceOrientation;
} 
```

由于您无法再从子 ViewControllers 控制呈现的视图控制器的旋转设置，因此您必须以某种方式拦截当前在导航堆栈中的视图控制器。所以这就是我所做的:)。希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T05:58:15.283

发表你的`AppDelegate->didFinishLaunchingWithOptions`方法。

它应该是这样的：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
//    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
//    // Override point for customization after application launch.
//    self.window.backgroundColor = [UIColor whiteColor];
//    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T06:21:14.303

感谢您的建议……经过几个小时的挖掘，我终于发现出了什么问题。

出于某种原因，即使在项目设置中我指定了所有支持的方向，Xcode 也没有正确更新应用程序的 Info.plist！

对于我创建的示例项目，Xcode 仅向 Supported Interface Orientations (iPad) 字典添加了两个值：

```
 - Portrait (top home button)
 - Portrait (bottom home button) 
```

添加两个缺失的方向最终使应用程序正确旋转：

```
 - Landscape (left home button)
 - Landscape (right home button) 
```

![在此处输入图像描述](../Images/7088f298004067f2660d41661b43baae.png)

不知道为什么这些设置不正确。多么令人沮丧的一天！

再次感谢您的帮助。

# javascript - 使用自调用函数进行数组初始化

> ID：12553923
> 
> 赞同：2
> 
> 时间：2012-09-23T16:12:41.577
> 
> 标签：javascript, iife, self-invoking-function

我正在尝试使用自调用函数初始化一个数组，为了简单起见，假设初始值是从 0 到 4 的数字的平方。`new`关键字创建新对象，因此可以使用`this.x`或访问新创建对象的字段`this[x]`在 IIFE 主体内，跟在`new`关键字之后。代码是：

```
var arr = new (function() {
    for (var i=0; i<5; i++) { this[i]=i*i; }
})(); 
```

现在，您可以访问变量`arr`like的相应字段`arr[4]`，并获取`16`。如果您只使用 like 处理一个对象，那很好`arr`，但是一旦您尝试将其视为数组，您就会遇到问题。即，您不能`reduce`对它应用类似的功能：

```
< arr.reduce(...);
> TypeError: arr.reduce is not a function 
```

那是因为`arr`真的是一个对象，而不是一个数组：

```
< arr;
> ({0:0, 1:1, 2:4, 3:9, 4:16}) 
```

所以这是我的问题：如何在这种方法中避免这种行为？如何让 JavaScript 将这个新创建的对象解释为数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T16:28:22.660

您不需要为此使用`new`关键字...

```
var arr = (function() {
               var x = [];
               for (var i=0; i<4; i++)
                   x.push(i*i);
               return x;
           })(); 
```

`new`关键字创建一个对象并设置其构造函数，然后绑定到`this`它并调用该函数。除了调用函数之外，您不需要任何其他东西，所以就这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T17:04:50.293

如果没有 IEFE，它会更短更清晰：

```
var arr = [];
for (var i=0; i<5; i++) arr[i] = i*i; 
```

如果没有额外的计数器变量`i`，你可以这样做：

```
for (var arr=[]; arr.length<5; ) arr[arr.length] = Math.pow(arr.length, 2); 
```

# internet-explorer-8 - 如何在ie8中使用border-radious？

> ID：12553924
> 
> 赞同：0
> 
> 时间：2012-09-23T16:12:52.107
> 
> 标签：internet-explorer-8, border, css

> **可能重复：**
> [如何使用 CSS 在 IE8 中制作圆角边框？](https://stackoverflow.com/questions/4130460/how-to-make-rounded-border-in-ie8-with-css)

我使用 css 边框半径来设计网页。该站点在 Firefox 中运行良好，但不能使用 ie8 运行。大家可以帮帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T16:15:53.877

IE8中不支持`border-radius`。请参阅[caniuse.com](http://caniuse.com/#search=border-radius)的`border-radius`支持信息。

如果你的圆角真的那么重要，你最好的选择是使用[CSS3 PIE来填补空白。](http://css3pie.com/)那种或其他类型的[polyfill](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)。否则，只需确保您创建的内容[优雅地降级](http://webdesign.about.com/od/webdesignglossary/g/graceful-degradation.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:24:57.253

IE-8无边框支持，使用插件也可以达到同样的效果

[http://www.htmlremix.com/css/curved-corner-border-radius-cross-browser](http://www.htmlremix.com/css/curved-corner-border-radius-cross-browser)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T16:16:21.607

你可以检查[这个问题](https://stackoverflow.com/questions/9426979/border-radius-for-ie8)，但是你无法在 IE8 中只使用 CSS 来实现圆角。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T17:29:54.140

您可以使用这可能有用[的 ie-css3](http://fetchak.com/ie-css3/)

# entity-framework - 在生成 EDMX 文件时使用不同的 T4 模板 - VS2012

> ID：12553925
> 
> 赞同：0
> 
> 时间：2012-09-23T16:12:58.253
> 
> 标签：entity-framework, visual-studio-2012, t4

在 VS2012 中，当您在项目中添加 .EDMX 文件（ADO.NET 数据模型）文件时使用 Entity Framework 5.0，VS 使用 [http://visualstudiogallery.msdn.microsoft.com/da740968-02f9-42a9-9ee4-1a9a06d896a2](http://visualstudiogallery.msdn.microsoft.com/da740968-02f9-42a9-9ee4-1a9a06d896a2) 生成上下文和实体类。

但是，我希望它使用以下模板生成代码，而不是生成上下文、实体类和流畅的 API 映射类。 [http://visualstudiogallery.msdn.microsoft.com/5d663b99-ed3b-481d-b7bc-b947d2457e3c](http://visualstudiogallery.msdn.microsoft.com/5d663b99-ed3b-481d-b7bc-b947d2457e3c)

有没有办法将第二个模板与 edmx 文件相关联，以便它自动使用这个模板，而不是默认情况下出现在 VS 中的那个模板。

目前，我必须手动删除第一个模板生成的代码，然后使用新添加的模板重新生成它。我希望有一个更清洁的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:25:21.237

> 目前，我必须手动删除第一个模板生成的代码，然后使用新添加的模板重新生成它。我希望有一个更清洁的方法。

您只需删除默认添加的模板（.tt 文件）并添加您要使用的模板。

# c# - Encoding.Default.GetBytes 和使用 MemoryStream 之间的区别

> ID：12553928
> 
> 赞同：1
> 
> 时间：2012-09-23T16:13:04.090
> 
> 标签：c#, xml, encoding

```
XDocument xDocumentObject = XDocument.Parse("<Test>"+
            "<elementx id='1'  att='aaa' />" +
            "<elementx id='2'  att='bbb' />" +
            "</Test>"); 
```

和有什么区别：

1)

```
byte[] xmlBytes = Encoding.Default.GetBytes(xDocumentObject.ToString()); 
```

和

2)

```
byte[] xmlBytes;
using (MemoryStream ms = new MemoryStream())
{
   xDocumentObject.Save(ms);
   xmlBytes = ms.ToArray();
} 
```

(1) 中的“默认”编码是什么，(2) 中使用的编码是什么，哪种是首选方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T16:18:13.930

在第一种情况下，您使用操作系统当前 ANSI 代码页的编码将字符串转换为字节数组。该字符串表示由`XDocument`实例生成并转换为字节数组的 XML 文档。在 .NET 中，所有字符串都是 Unicode 编码的。

在第二个示例中，使用了[XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)的编码。因此，例如，如果您有以下 XML `<?xml encoding="utf-8"?>`，它将使用 UTF-8。[Declaration](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.declaration.aspx)属性允许您指定正在使用的编码：

```
XDocument xDocumentObject = new XDocument(
    new XDeclaration("1.0", "utf-8", "yes"), 
    new XElement(
        "Test",
        new XElement("elementx", new XAttribute("id", "1"), new XAttribute("att", "aaa")), 
        new XElement("elementx", new XAttribute("id", "2"), new XAttribute("att", "bbb"))
    )
); 
```

或者：

```
XDocument xDocumentObject = XDocument.Parse(
    @"<?xml version=""1.0"" encoding=""utf-8"" standalone=""yes""?>
    <Test>
        <elementx id=""1"" att=""aaa"" />
        <elementx id=""2"" att=""bbb"" />
    </Test>"
); 
```

允许您指定 UTF-8 编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T16:24:44.993

1）你得到类的全名，这里用默认代码页编码的“System.Xml.XmlDocument”（类似于ascii，我电脑上的1byte /char）

2）只需看一下文档“编码属性的值取自 XmlDeclaration.Encoding 属性” [http://msdn.microsoft.com/en-US/library/z5250dbd.aspx](http://msdn.microsoft.com/en-US/library/z5250dbd.aspx) 该属性有一个默认值：“如果不包含编码属性，则在写入或保存文档时假定使用 UTF-8 编码。” [http://msdn.microsoft.com/en-US/library/system.xml.xmldeclaration.encoding.aspx](http://msdn.microsoft.com/en-US/library/system.xml.xmldeclaration.encoding.aspx)

# android - 是否有任何 AdMob 虚拟 ID？

> ID：12553929
> 
> 赞同：28
> 
> 时间：2012-09-23T16:13:04.663
> 
> 标签：android, admob

是否有任何 AdMob 虚拟 ID 用于测试目的？我需要注册应用程序并获取 MY_AD_UNIT_ID 吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2014-12-09T23:14:13.950

这是**横幅广告的虚拟 id**。

> ca-app-pub-3940256099942544/6300978111

[来源](https://developers.google.com/admob/android/banner)

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2015-02-15T23:02:15.680

横幅：

```
ca-app-pub-3940256099942544/6300978111 
```

插页式：

```
ca-app-pub-3940256099942544/1033173712 
```

奖励视频：

```
ca-app-pub-3940256099942544/5224354917 
```

本机高级：

```
ca-app-pub-3940256099942544/2247696110 
```

原生高级视频：

```
ca-app-pub-3940256099942544/1044960115 
```

本机快递小/大：

```
ca-app-pub-3940256099942544/2793859312 
ca-app-pub-3940256099942544/2177258514 
```

[来源](https://developers.google.com/admob/android/test-ads)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-09-23T14:26:23.500

操作系统：安卓

中介：Admob

**对于横幅广告：**

```
ca-app-pub-3940256099942544/6300978111 
```

[来源](https://github.com/googleads/googleads-mobile-android-examples/tree/master/admob/BannerExample)

**对于插页式广告：**

```
ca-app-pub-3940256099942544/1033173712 
```

[来源](https://firebase.google.com/docs/admob/android/interstitial)

**对于 Admob NativeExpress 广告：**

```
ca-app-pub-3940256099942544/1072772517 
```

**对于奖励视频**

```
ca-app-pub-3940256099942544/5224354917 
```

**笔记：**

> 您将看到的 NativeExpressAd 看起来像是真实的，但它被视为测试广告。您可以随意使用该广告单元 ID 进行测试。

**作者：Andrew Brogdon**（Google Ads 团队在他的 YouTube 评论之一中）

[![在此处输入图像描述](../Images/5820ef397af277cb39fe704b7c972489.png)](https://i.stack.imgur.com/5Krez.png)

您可以在res > values > strings.xml的实际[admob github 存储库中找到所有测试广告](https://github.com/googleads/googleads-mobile-android-examples/tree/master/admob)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-23T16:31:45.290

没有虚拟 ID 本身。您需要设置 XML 或 JAVA 代码来获取测试广告。要在测试期间获得*测试广告*，请将以下内容添加到您`AdView`声明的 XML 中。

注意：我只使用 XML 代码在我的应用程序中显示广告。

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="bottom|center"
    android:orientation="horizontal" >

    <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        ads:adSize="BANNER"
        ads:adUnitId="YOUR_AD_UNIT_ID"
        ads:loadAdOnCreate="true"
        ads:testDevices="TEST_EMULATOR, YOUR_DEVICE_ID" >
    </com.google.ads.AdView>
</LinearLayout> 
```

从 JAVA 设置测试单元（模拟器和您的设备）：

```
AdRequest adRequest = new AdRequest();
adRequest.addTestDevice(AdRequest.TEST_EMULATOR);            
adRequest.addTestDevice("test"); 
```

要获取您的设备 ID，您可以使用以下命令：

```
final TelephonyManager tm = (TelephonyManager)getBaseContext().getSystemService(Context.TELEPHONY_SERVICE);
String deviceid = tm.getDeviceId(); 
```

来自：[https ://stackoverflow.com/a/9681517/450534](https://stackoverflow.com/a/9681517/450534)

*编辑：错过了你的第二个问题。*

是的。您需要在您的 Ad-Mob 帐户中注册您的应用程序。如果没有注册，您将不会获得您的广告单元 ID，因此您的应用中也不会出现广告。

**更新：**发布此答案大约两年后，Google 在其 admob SDK 中添加了一些虚拟 ID。请参阅其他更好的投票答案以获得虚拟 ID

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-10-28T07:24:10.107

以及用于测试的示例应用程序 ID：ca-app-pub-3940256099942544~3347511713

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-07-14T19:51:00.077

这是来自谷歌的官方更新

**安卓**

*   横幅：`ca-app-pub-3940256099942544/6300978111`
*   插页式：`ca-app-pub-3940256099942544/1033173712`
*   奖励视频：`ca-app-pub-3940256099942544/5224354917`
*   本机高级：`ca-app-pub-3940256099942544/2247696110`
*   原生快递（小）：`ca-app-pub-3940256099942544/2793859312`
*   原生快递（大）：`ca-app-pub-3940256099942544/2177258514`

**IOS**

*   横幅：`ca-app-pub-3940256099942544/6300978111`

*   插页式`ca-app-pub-3940256099942544/1033173712`

*   奖励视频 `ca-app-pub-3940256099942544/1712485313`

*   本机高级 `ca-app-pub-3940256099942544/2247696110`

*   原生快递（小）：`ca-app-pub-3940256099942544/4270592515`

*   原生快递（大）：`ca-app-pub-3940256099942544/8897359316`

阅读更多：

*   [Firebase 上的 Android 测试广告](https://developers.google.com/admob/android/test-ads)
*   [Firebase 上的 IOS 测试广告](https://developers.google.com/admob/android/test-ads)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-01-16T19:13:38.283

google 的 adMob 示例

```
<com.google.android.gms.ads.AdView
    android:id="@+id/adView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_alignParentBottom="true"
    ads:adSize="BANNER"
    ads:adUnitId="ca-app-pub-3940256099942544/6300978111">
</com.google.android.gms.ads.AdView> 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-06-07T12:54:29.310

你可以使用`RewardedVideo`以下一个：

```
private static final String AD_UNIT_ID = "ca-app-pub-3940256099942544/5224354917";
private static final String APP_ID = "ca-app-pub-3940256099942544~3347511713"; 
```

如何使用：

```
MobileAds.initialize(this, APP_ID);

mRewardedVideoAd = MobileAds.getRewardedVideoAdInstance(this);
mRewardedVideoAd.setRewardedVideoAdListener(this);
mRewardedVideoAd.loadAd(AD_UNIT_ID, new AdRequest.Builder().build()); 
```

用于展示

```
 if (mRewardedVideoAd.isLoaded()) {
        mRewardedVideoAd.show();
  } 
```

希望这对我们中的许多人有所帮助！

# c# - 如何将表单添加到控制台应用程序以便用户可以选择文件？

> ID：12553932
> 
> 赞同：8
> 
> 时间：2012-09-23T16:13:51.747
> 
> 标签：c#, winforms, console-application, openfiledialog

我创建了一个控制台应用程序并让它按照我想要的方式工作。使用 VS2010 中的“添加项目”>“添加 Windows 窗体”选项，它已经自动创建了我需要的内容。我添加了一个按钮和代码来检索 Excel 文件（如下）我的问题是：

如何获取他们创建的文件并在我的 program.cs“主要”区域中使用它？

来自 Form1.cs 的 OpenFileDialog 按钮单击事件的代码：

```
private void btnSelect_Click(object sender, EventArgs e)
{
OFD.openFileDialog OFD = new OpenFileDialog();
OFD.Multiselect = false;
OFD.Title = "Open Excel Document";
OFD.Filter = "Excel Document|*.xlsx;*.xls";
OFD.ShowDialog();
string docPath = OFD.FileName;
} 
```

我希望从 program.cs 文件中制作“docPath”的静态主要活动的那部分

```
static void Main(string[] args)
    {
        var excel = new ExcelQueryFactory();
        excel.FileName = @"C:\Users\Christopher\Desktop\BookData\TestResults.xls";
       <...code executed on opened excel file...>
     } 
```

感谢您的时间。

**这是我完成的解决方案：**

```
class Program
{
    [STAThread]
    static void Main(string[] args)
    {

        var excel = new ExcelQueryFactory();
        OpenFileDialog OFD = new OpenFileDialog();
        OFD.Multiselect = false;
        OFD.Title = "Open Excel Document";
        OFD.Filter = "Excel Document|*.xlsx;*.xls";
        OFD.ShowDialog();
        string filePath = OFD.FileName;
        excel.FileName= filePath.ToString();
        <.the rest of my program is below...>
    }  
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-23T16:31:18.103

1.  右键单击您的控制台应用程序，添加引用，`System.Windows.Forms`.
2.  添加`using System.Windows.Forms;`到文件的开头。
3.  将`[STAThread]`属性添加到您的`Main`以使其与打开文件对话框兼容。

* * *

```
[STAThread]
public static void Main(string[] args)
{
    var dialog = new OpenFileDialog
                     {
                         Multiselect = false,
                         Title = "Open Excel Document",
                         Filter = "Excel Document|*.xlsx;*.xls"
                     };
    using (dialog)
    {
        if (dialog.ShowDialog() == DialogResult.OK)
        {
            var excel = new ExcelQueryFactory { FileName = dialog.FileName };
            // code executed on opened excel file goes here.
        }
    }
} 
```

# android - 使用 ArrayAdapter/SimpleAdapter 在 ListView 上将一项设为粗体

> ID：12553934
> 
> 赞同：2
> 
> 时间：2012-09-23T16:14:05.500
> 
> 标签：android, listview

我正在尝试创建一个简单的 ListView。ListView 上显示的项目只是我拥有的数组中的字符串。只是**我只想将其中一个字符串以粗体显示。**起初，当我使用一个长的 TextView 时，它包含 ScrollView 中带有换行标记的所有字符串，我可以简单地使用

```
<b> </b> 
```

围绕我想在gui上以粗体显示的字符串，这样：

```
TextView tv.setText(Html.fromHtml(str)); 
```

但是在 ScrollView 中使用大的 TextView 会导致其他问题，并且当您使用 ListView 来解决这个问题时，这似乎是一个糟糕的选择。所以现在我使用 ListView，它从 ArrayList 中获取所有字符串并显示它们。只是尽管我试图扭转这种局面，但我似乎无法将一个项目的样式更改为粗体。我还尝试为每个字符串创建一个 TextView，然后将 TextViews 添加到列表中，但我不知道 ArrayAdapter 或 SimpleAdapter 是否可以做到这一点。SimpleAdapter 似乎只能将 TextView 作为资源 ID 获取，这对于列表中的所有项目都是相同的，这使我无法实现我想要的。

长话短说：在这里研究了这个问题后，我知道有一些方法可以为自定义适配器扩展 BaseAdapter ，该适配器允许列表的任何自定义布局，但真的没有其他方法吗？我真的需要实现 BaseAdapter 和 @override getItem 只是为了使一个项目加粗吗？这对我来说似乎很奇怪。有谁知道我可以将 TextViews 添加到 ListView 的方法吗？使用 ArrayAdapter 显示 TextViews toString ：/
如果您知道另一种仅显示一个粗体项目的简单方法，我真的会提供任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T18:50:29.913

好吧，我终于决定通过制作一个扩展 ArrayAdapter 的自定义适配器来解决这个问题。那里有很多例子，但其中一些提供了很多额外的东西，并且在我看来过于复杂化了这个问题，我只是想体面地解决这个问题。我发现[这个例子](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)非常有用和友好，在我的研究中，我看到很多开发人员提出了类似的问题，所以我真的希望这对你也有帮助。

扩展 ArrayAdapter 的适配器并不太复杂，而且还允许您以一种相当简单的方式完全按照自己的方式使用布局。适配器完成后，您只需将 html 标签添加到源数组中的特定字符串，当您在适配器上绑定它们时，使用 Html.fromHtml 。这就是我解决它的方法。
如果有人知道是否有办法在 ListView 上的不同特定项目中制作粗体或彩色文本，而无需自己进行此调整（扩展 ArrayAdapter 并覆盖 getItem()），请与我们分享。
我希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T16:17:58.860

在`getView`函数内部，引用`TextView`类似的内容：

```
text = (TextView) convertView.findViewById(R.id.textBox); 
```

进而：

```
text.setTypeface(null, Typeface.BOLD); 
```

你就完成了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-29T21:39:25.637

覆盖 ArrayAdapter 的 getView(...)：

```
public View getView(int position, View convertView, ViewGroup parent) {
  View returnedView = super.getView(position, convertView, parent);

  if (position == specialPosition) {
    TextView text = (TextView) returnedView.findViewById(R.id.text);
    text.setTypeface(null, Typeface.BOLD);
  }

  return returnedView;
} 
```

# apache-flex - 如何从 Flex 2.0 中的另一个项目呈现器访问一个项目呈现器中的控件

> ID：12553936
> 
> 赞同：2
> 
> 时间：2012-09-23T16:14:45.027
> 
> 标签：apache-flex

如何从另一个项目渲染器访问一个项目渲染器中的控件例如。我在 datagrid 列的一个 itemrenderer 中有一个列表框，我需要在另一个 datagrid 列的另一个 itemrenderer 中访问它。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:39:35.470

谢谢 ！我使用静态变量概念将一个 itemrenderer 的值存储在另一个 itemrenderer 中并更新相同的值。

# python - python字典中的无值

> ID：12553938
> 
> 赞同：17
> 
> 时间：2012-09-23T16:14:57.663
> 
> 标签：python, if-statement, dictionary, nonetype

是否可以检查字典中的无值

```
dict = {'a':'None','b':'12345','c':'None'} 
```

我的代码

```
for k,v in d.items():
  if d[k] != None:
    print "good"
  else:
    print "Bad 
```

执行上述代码片段后打印三个好的。

```
good
good
good 
```

必需：如果值为 None ，则对 dict 键 a 和 c 不打印好。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-23T16:16:11.233

您的 none 值实际上是字典中的字符串。

您可以检查“无”或使用实际的 python[无](http://docs.python.org/library/constants.html#None)值。

```
d = {'a':None,'b':'12345','c':None}

for k,v in d.items(): 
  if d[k] is None:
    print "good" 
  else: 
    print "Bad" 
```

打印“好”2次

或者，如果您必须使用当前的字典，只需更改您的检查以查找`'None'`

另外 dict 是一个 python 内置类型，所以最好不要命名变量`dict`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-23T16:20:24.230

定义你的字典

```
d = {'a': None} 
```

而不是

```
d = {'a': 'None'} 
```

在后一种情况下，`'None'`它只是一个字符串，而不是 Python 的`None`类型。此外，`None`使用身份运算符进行测试`is`：

```
for key, value in d.iteritems():
    if value is None:
        print "None found!" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-13T13:29:35.107

```
def none_in_dict(d):
    for _, value in d.items():
        if value is None:
            return True
    return False 
```

用途是：

```
if none_in_dict(my_dict):
    logger.error(my_err_msg) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-12T13:53:17.717

而不是使用“如果值是无”，您可以简单地使用

> `if not value: print "None found!"`

如果 value 有一些数据，“if value”将为真，如果没有数据，则为假。因此，您不必在 if 条件中显式使用 None 关键字。

# java - 构建 jar-with-dependencies 时的 ManifestEntries

> ID：12553942
> 
> 赞同：3
> 
> 时间：2012-09-23T16:15:25.270
> 
> 标签：java, maven, jar, manifest.mf

我正在尝试将我的构建服务器信息设置为 META-INF/MANIFEST.MF。将 maven-jar-plugin 与 manifestEntries 一起使用时效果很好。问题是，当我将带有 maven-assembly-plugin 的 Jar 打包到具有依赖项的单个 Jar 中时（就像在这里：[如何使用 Maven 创建具有依赖项的可执行 JAR？](https://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven)）我再也看不到我的清单条目了。我的猜测是我的 MANIFEST.MF 在程序集运行时被删除，但在清单完成后我找不到设置它的方法。

这就是我的 pom.xml 构建部分的样子：

```
<build>
    <sourceDirectory>src/main/java</sourceDirectory>
    <testSourceDirectory>src/test/java</testSourceDirectory>

    <resources>
        <resource>
            <directory>src/main/resources</directory>
        </resource>
    </resources>

    <plugins>
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.2</version>
            <configuration>
                <archive>
                    <manifest>
                        <mainClass>ConvertorMain</mainClass>
                    </manifest>
                </archive>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
            </configuration>
            <executions>
                <execution>
                    <id>make-my-jar-with-dependencies</id>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <finalName>${project.artifactId}</finalName>
                <archive>
                    <manifestEntries>
                        <Application-Version>${app.version.major}.${app.version.minor}.0</Application-Version>
                        <Built-By>${user}</Built-By>
                        <Git-Branch>${git.branch}</Git-Branch>
                        <Git-Commit>${git.commit}</Git-Commit>
                    </manifestEntries>
                    <addMavenDescriptor>false</addMavenDescriptor>
                </archive>
            </configuration>
        </plugin>
   </plugins>
...
</build> 
```

如果没有 jar-with-dependencies，MAINFEST.MF 将包含：

```
Manifest-Version: 1.0
Git-Commit: 35ff1f997b0c01daf44ed23425a3dc93307faaf7
Build-Jdk: 1.7.0_03
Built-By: Build Server
Git-Branch: origin/HEAD
Created-By: Apache Maven
Application-Version: 0.2.57
Archiver-Version: Plexus Archiver 
```

然后，解压缩 -q -c convertor-1.0-jar-with-dependencies.jar META-INF/MANIFEST.MF 转储：

```
Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: Apache Maven
Built-By: eranh
Build-Jdk: 1.6.0_35
Main-Class: ConvertorMain 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T16:46:02.783

您只需将存档部分从您的 maven-jar-plugin 配置复制到 maven-assembly-plugin 中。

# php - 从一个单选按钮获取两个变量？

> ID：12553970
> 
> 赞同：0
> 
> 时间：2012-09-23T16:18:29.470
> 
> 标签：php, mysql

[http://i.stack.imgur.com/Gy3o0.png](http://i.stack.imgur.com/Gy3o0.png)

这就是网站现在的样子。我想要做的是，当您单击表上的批准注册时，它将提取 id no 的值和该特定记录的名称。我以为我走在正确的轨道上。我知道如何获得身份证号码。但它不会同时获得名称的值。

这是代码的样子：

```
while($row = mysql_fetch_array($mayor))
{
    $id = $row['identification_no'];
    $name = $row['lastname'].", ".$row['firstname'];

    echo "<tr>";
    echo "<td><form method=post action=approvedmayor.php><input type='radio' name=id value='$id'></td>";
} 
```

批准市长.php

```
$query = mysql_query("insert into tbcandidates VALUES ($id, '$name', 'mayor')"); 

if ($query)
{
    echo "You appproved ";
    echo $name;
}

else
    echo "error"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T16:29:17.237

你可以试试这样...

```
<?php

while($row = mysql_fetch_array($mayor))
{
$id = $row['identification_no'];
$name = $row['lastname'].", ".$row['firstname'];

echo "<tr><td><a href='approvedmayor.php?id=$id&name=$name'>Approve</a></td></tr>";
}

?> 
```

在这种类型中不要使用表单，并且批准按钮......单独尝试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:35:05.370

实际上，直接从数据中插入这种数据是不好的做法`POST`。如果您已将所有这些候选者存储在数据库中，则应首先运行`SELECT`查询`approvedmayor.php`，如果候选者仍然存在，则将其数据插入另一个表。

```
$query = mysql_query('SELECT * FROM `candidates` WHERE `id` = '.$id.' LIMIT 1');
if(mysql_num_rows($query)) {

  $candidate = mysql_fetch_assoc($query);

  $insertQuery = mysql_query("insert into tbcandidates VALUES ($candidate['id'], $candidate['name'], $candidate['mayor'])"); 

  if ($insertQuery) {
    echo "You appproved ";
    echo $name;
  } else echo "error";

} else echo 'This candidate is no longer available'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T17:08:43.103

我明白你的问题，

但这不是最好的方法，在我们移动之前让我们了解一些小元素功能

`Radio Button`：它是一个输入类型元素，允许用户只`one`选择给定列表的选项 [1]。

`Check Boxes`：它是一个输入类型元素，允许用户`n`从给定列表中选择选项或选择的数量。

前信息 - [http://www.w3schools.com/html/html_forms.asp](http://www.w3schools.com/html/html_forms.asp)

现在来回答你的问题..

您需要将代码修改`check boxes`为如下

```
<input type='checkbox' name=id[] value='$id'> 
```

注意：元素名称处于数组模式。即，每当用户一个或多个时，值都存储在数组中。

将值存储在数组中后，根据需要调用它/使用它。

## 对于您提到的代码

```
echo "<form method=post action=approvedmayor.php>';

while($row = mysql_fetch_array($mayor))
{
    $id = $row['identification_no'];
    $name = $row['lastname'].", ".$row['firstname'];

    echo "<tr>";
    echo "<td><input type='radio' name=id[] value='$id'></td>";
}
echo "</form>"; 
```

## 批准市长.php

```
$temp_app_arr = $_POST['id'];

foreach ($temp_app_arr as $pos => $val) {
    $query = mysql_query("insert into tbcandidates VALUES ('$val', '$name', 'mayor')"); 

    if ($query) {
        echo "You appproved ";
        echo $name;
    } else {
        echo "error";
    }

} 
```

而且我相信这应该是您项目的好代码/算法。

# json - 在Scala中使用lift-json反序列化时忽略字段

> ID：12553971
> 
> 赞同：2
> 
> 时间：2012-09-23T16:18:38.840
> 
> 标签：json, scala, lift-json

我如何将这样的数据反序列化为这样[的](http://pastebin.com/PwTN7F5J)案例类：

```
case class SoundCloudUser (
  id: Int,
  permalink: String,
  username: String,
  country: String,
  full_name: String,
  city: String,
  description: String) 
```

（也就是说，案例类的构造函数参数少于 JSON 的值）

我尝试创建一个 FieldSerializer 来做到这一点，但我只能弄清楚如何在序列化时忽略字段，而不是反序列化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T16:49:29.283

只要 JSON 数据中的字段是您的案例类中的字段的超集，您就无需执行任何特殊操作来忽略 JSON 数据中不在您的案例类中的字段。它应该“正常工作”。你有任何错误吗？

# entity-framework - SaveChanges 上的实体框架 5 外键新记录

> ID：12553973
> 
> 赞同：2
> 
> 时间：2012-09-23T16:18:58.147
> 
> 标签：entity-framework, entity-framework-5

我正在使用 .NET4.5/EF5 并从现有数据库创建模型。

我正在使用以下代码：

```
Order currentOrder = new Order();
using (var db = new ILSEntities())
{
    try
    {
        Event currentEvent = db.Events.OrderByDescending(u => u.EventID).FirstOrDefault();
        currentOrder.Event = currentEvent;
        db.Orders.Add(currentOrder);

        db.SaveChanges(); 
```

而且我看到正在为我找到的 Event 对象创建重复记录，这不是我想要发生的。

我已经阅读了很多与类似问题相关的帖子，但是外键关系中两个参与者的上下文不同。在这里，我使用与查找一个对象相同的上下文进行保存，而另一个对象是新对象。

我也试过：

```
currentOrder.Event.EventID = currentEvent.EventID; 
```

但这失败了，并且我收到一个 EF 验证错误，告诉我它需要 Event 对象的其他成员的值。

我还尝试在添加对象之后将`EntityState`要复制的对象的 设置为等`Detached`，但之前没有成功。`Modified``Order``SaveChanges`

我确定这是一个基本问题，但这让我感到困惑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T23:45:00.363

在我的理解中，父对象和子对象都必须在上下文中，然后才能分配它们之间的任何关系以使实体框架相信数据库中已经存在实体。我猜您正在尝试将新的 Order 对象添加到数据库中，要添加新对象，您应该使用 AddObject 方法，Add() 方法用于建立实体之间的关系。在您的代码中，`currentOrder`不在上下文中。尝试在相同的上下文中挂钩它，然后分配一个关系。您的代码应如下所示：

```
Order currentOrder = new Order();
using (var db = new ILSEntities())
{
    try
    {
        Event currentEvent = db.Events.OrderByDescending(u => u.EventID).FirstOrDefault();
        db.Orders.Attach(currentOrder); //attach currentOrder to context as it was not loaded from the context
        currentOrder.Events.Add(currentEvent);//establish relationship

       db.ObjectStateManager.ChangeObjectState(currentOrder, EntityState.Added);

        db.SaveChanges(); 
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T06:56:27.323

好吧，我最终解决了这个问题，这是我的错。

问题是 Order 对象被 FK 插入到另一个表 Shipments 中，该表也被 FK 插入到 Events 中。问题在于 Shipment 对象中的 Event 引用导致了新记录。解决方案是通过将它们全部添加到同一上下文中来让 EF 了解这些关系。

组装对象图的代码分布在许多网络表单上，这里的响应让我退后一步，批判性地看待整个事情，所以虽然这些答案没有一个是正确的，但我投票给所有回答的人

# html - 仅具有离线存储功能的 HTML 移动应用程序

> ID：12553978
> 
> 赞同：1
> 
> 时间：2012-09-23T16:19:21.903
> 
> 标签：html, cordova, kendo-ui

我需要创建一个基于 HTML5 的移动应用程序，该应用程序可以在 iOS 设备（iPhone、iPad）和 Android 手机和平板电脑上运行。

该应用程序是关于存储杂货的。我将有类别和项目以及项目的图像。所有这些数据都将由应用程序的用户生成。该应用程序不需要任何网络连接，只需要离线存储数据。

我想我可以为这个应用程序使用以下技术，并希望得到一些指导：1）PhoneGap - 我想我将能够使用提供的存储 API。
这是否允许我在设备上创建 SQLite 数据库并能够对数据执行 CRUD 操作？另外，有空间限制吗？我在看LocalStorage，WebSQL....对存储真的很困惑。

2) KendoUI Controls for Mobile - 使用它来创建布局。这里的问题是，KendoUI 能否与 PhoneGap 一起用于离线存储。KendoUI 的所有示例似乎都适用于来自网络服务的数据......关于离线存储的指导不多。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:17:52.583

所有 Kendo 小部件都可以使用远程和本地数据进行操作。要在 LocalStorage 或 WebSQL 数据库中读取和写入数据，您应该创建自定义传输。检查以下示例：

1.  [KendoUI 和 WebSQL](https://stackoverflow.com/questions/13496254/how-to-query-a-local-websql-db-with-kendo-ui)
2.  [KendoUI 和 LocalStorage](https://stackoverflow.com/questions/12980444/caching-a-kendo-ui-datasource-object-using-localstorage/13753701#13753701)

# javascript - 如果两者都包含同名的变量，如何从嵌套函数访问匿名闭包父范围中的变量？

> ID：12553980
> 
> 赞同：2
> 
> 时间：2012-09-23T16:19:46.273
> 
> 标签：javascript

> **可能重复：**
> [是否可以访问函数的闭包？](https://stackoverflow.com/questions/11192875/is-it-possible-to-gain-access-to-the-closure-of-a-function)

假设我有以下揭示模块模式的实现：

```
var myModule = (function() {
    var myVar,
        _self = this;

    function setMyVar( myVar ) {
        _self.myVar = myVar;
    }

    return {
        setMyVar: setMyVar
    }
})()

myModule.setMyVar('happy');​ 
```

我想要做的是将模块级别 myVar 设置为“快乐”。这不起作用，因为“this”等于匿名父函数中的窗口。一个简单的解决方法是避免子父名称冲突，但抛开这一点不谈，有没有一种方法可以从嵌套子函数内部访问对匿名函数范围的引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T16:43:33.047

> *“一个简单的解决方法是避免孩子与父母的名字冲突”*

请不要认为这是一种解决方法，而是一种最佳实践。变量阴影通常不会增加好处，但是当您忘记正在使用的变量时，可能会给代码和错误增加混乱。

唯一可以作为可以在代码中直接操作的对象的变量范围*（或变量对象，或绑定对象......）*是*“全局”*范围。没有嵌套范围允许这种直接访问，所以不，除了避免隐藏变量之外没有其他选择。

这通常不应该是一个问题。函数变量或参数只能访问（因此隐藏）其原始范围内的变量，因此将函数传递到不同的范围不会导致与该范围内的变量发生任何冲突。

如果需要，像[http://jshint.com](http://jshint.com)这样的代码验证器能够为您捕获阴影变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T16:21:46.397

不可以。如果它被屏蔽了，它就被屏蔽了，您将无法访问它。

# html - 如何根据选择的图像更改表单元素

> ID：12553983
> 
> 赞同：0
> 
> 时间：2012-09-23T16:20:04.353
> 
> 标签：html, paypal, onclick

我在下面的代码中更改价格是用户选择的“价格”div。

```
<script type="text/javascript">
        function showprice(e){
            document.getElementById("price").innerHTML = e.getAttribute('data-price');
        }
    </script>

        <img src="http://i.imgur.com/JnUKx.jpg" id="img1" onclick="showprice(this);" width="39" height="33" data-price="245.00">
        <img src="http://i.imgur.com/c8Rwp.gif" id="img2" onclick="showprice(this);" width="39" height="33" data-price="255.00">

        <div id="price" style="padding-bottom:10px"></div>​ 
```

我为每个价格创建了 2 个单独的贝宝按钮。两个按钮完全相同，但每个按钮都有不同的“值”。如何根据用户选择的图像更改“值”？

img1 按钮 @ 245 英镑的价值是 SKF4F8AARZWKE（下面的代码） img1 按钮 @ 265 英镑的价值是 WEI8F8HHJOPRY

按钮 img1 值 SKF4F8AARZWKE 的贝宝代码

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">

                  <input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="SKF4F8AARZWKE">

  <input type="image" src="images/buyitnow.png"  style="width:100px; height:30px" border="0" name="submit" alt="PayPal — The safer, easier way to pay online.">

            </form>​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T17:32:53.960

给输入元素一个 id 并使用 document.getElementById('YOUR_ID').value = 'YOUR VALUE';

```
<script type="text/javascript">
   function changeprice(e){
        document.getElementById("price").innerHTML = e.getAttribute('data-price');
        document.getElementById("hosted_button_id").value = e.getAttribute('data-value');
   }
</script>

<img src="http://i.imgur.com/JnUKx.jpg" id="img1" onclick="changeprice(this);" width="39" height="33" data-price="245.00" data-value="SKF4F8AARZWKE">
<img src="http://i.imgur.com/c8Rwp.gif" id="img2" onclick="changeprice(this);" width="39" height="33" data-price="255.00" data-value="WEI8F8HHJOPRY">

<div id="price" style="padding-bottom:10px"></div>​

<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
    <input type="hidden" name="cmd" value="_s-xclick">
    <input type="hidden" id="hosted_button_id" name="hosted_button_id" value="SKF4F8AARZWKE">

    <input type="image" src="images/buyitnow.png"  style="width:100px; height:30px" border="0" name="submit" alt="PayPal — The safer, easier way to pay online.">
</form>​ 
```

# php - 表中的行数

> ID：12553990
> 
> 赞同：4
> 
> 时间：2012-09-23T16:20:55.747
> 
> 标签：php, mysqli

```
 <?php
    include('connnect.php');
    db_connect();
    echo 'We\'re about to count some rows';
    $query = "SELECT COUNT(*) FROM accounts";
    $result = mysqli_query($mysqli,$query);
    $row = $result->fetch_row();
   echo $row[0];
  ?> 
```

我似乎无法找到如何获取帐户表中的行数（用户），此代码根本不返回任何内容。我不确定我是否将正确的信息传递给“num_rows”，或者我使用的查询是否正确。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-23T16:22:59.310

```
$query = "SELECT COUNT(*) FROM accounts";
$result = mysqli_query($mysqli,$query);
$rows = mysqli_fetch_row($result);
echo $rows[0]; 
```

或者

```
$query = "SELECT COUNT(*) AS SUM FROM accounts";
$result = mysqli_query($mysqli,$query);
$rows = mysqli_fetch_assoc($result);
echo $rows['SUM']; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-23T16:31:50.453

您要求的是与 Mysqli 结果对象的非常标准的交互。一件事是返回的行数，另一件事是获取实际的计数值：

```
$query  = "SELECT COUNT(*) FROM accounts";
$result = $mysqli->query($query);

echo 'Number of rows: ', $result->num_rows, "\n"; // 1 in your case

list($count) = $result->fetch_row();

echo 'COUNT(*): ', $count, "\n"; // the value from the database 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-11-19T19:37:16.160

连接.php

```
<?php
class database
{
  public $host = "localhost";
  public $user = "root";
  public $pass = "";
  public $db   = "db";
  public $link;

  public function __construct()
  {
     $this->connect();
  }

  private function connect()
  {
     $this->link = new mysqli($this->host, $this->user, $this->pass, $this->db);
     return $this->link;
  }

 public function select($query)
 {
    $result = $this->link->query($query) or die($this->link->error.__LINE__);
    if($result->num_rows > 0)
    {
      return $result;
    } 
    else 
    {
        return false;
    }
}
?> 
```

现在 action.php where 可以进行如下查询：

```
<?php  include 'database.php'; ?>
 $db = new database();
 $query = "SELECT COUNT(*) FROM accounts";
 $row = $db->select($query)->num_rows;
 echo $row;
?> 
```

完整的 conncetion.php ：[链接](https://ideone.com/U2bMXB)

# html - WebView - 仅文本？

> ID：12553994
> 
> 赞同：0
> 
> 时间：2012-09-23T16:21:42.657
> 
> 标签：html, xaml, text, webview, windows-runtime

有没有办法让 WebView 只在我的 WinRT XAML 应用程序中加载文本？我更喜欢一种比下载源代码和替换 img 标签更简单的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:19:14.757

这不是 WebView 控件的功能。您必须自己实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:22:32.647

如何使用 HttpClient 获取 HTML，然后使用 WebView.NavigateToString() 显示它？

```
private async void DoMagic()
{
    HttpClient httpClient = new HttpClient();
    HttpResponseMessage response = await httpClient.GetAsync(
        new Uri("http://www.example.com/"));
    string content = await response.Content.ReadAsStringAsync();

    webView.NavigateToString(content);
} 
```

# eclipse - Eclipse 插件开发 - 多个工作台/页面

> ID：12553997
> 
> 赞同：1
> 
> 时间：2012-09-23T16:21:54.863
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, eclipse-gef

我正在开发一个 Eclipse 插件应用程序。

我有以下情况：

主应用程序 gui 将基于 eclipse，一个带有页面的工作台。
在这个页面中会有一个工具栏、菜单栏、一些视图和多个编辑器。

到目前为止，该任务是标准的。

但这是一个“扭曲”：我想显示一个弹出窗口（org.eclipse.jface.dialogs.Dialog），并且在这个对话框中我想插入另一个编辑器。在这个编辑器中，我想使用 GEF 框架。

目前我访问这样的页面（所有编辑都使用）：

```
PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:47:32.990

Eclipse，尤其是 Eclipse 3.x（Helios，Indigo）不允许编辑器优雅地进入对话框。如果没有 IEditorSite（编辑器到工作台页面的链接），它使用的许多服务将不可用，甚至可能无法启动。