# StackOverflow 问答 15807000-15807999

# sql - 仅在对特定列进行更新时才应运行的 tsql 触发器

> ID：15807004
> 
> 赞同：1
> 
> 时间：2013-04-04T09:12:54.767
> 
> 标签：sql, tsql, triggers

基本上我在同一个 SQL 数据库中有两个表。[table_1] 和 [table_2]

[**标签**] 是两个表的主键

[ **table_1** ] 的设计是

```
 [Label] [varchar](50) NOT NULL
 [Use_Date] [date] NULL
 [Sent_Date] [date] NULL
 [Checked_Date] [date] NULL 
```

[ **table_2** ] 的设计是

```
 [Label] [varchar](50) NOT NULL
 [DateFirstRegistered] [date] NULL
 [LastUsedDate] [date] NULL
 [UsageCount] [int] NULL 
```

如果[ **table_1 ] 中的 [** **use_date** ]有更新，则触发器需要更新 [table_2] 中的两列 [ **LastUsedDate** **]**和 [ **UsageCount** ] 。**[ table_1** ]的其他列中的任何更改都应在不影响 [ **table_2** ] 的情况下进行处理。

 ******我有一个触发器，当**use_date**在 [ **table_1** ] 中更新时起作用......但如果不是，它会在其他列更新时导致提交问题。

这是提到的触发器

```
USE [DB]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TRIGGER [dbo].[trgOnTable1Update] ON [dbo].[Table_1]
AFTER UPDATE
AS
BEGIN

       UPDATE c
       SET           c.LastUsedDate=a.Use_Date,
                     c.UsageCount=c.UsageCount+1
       FROM   inserted a
                     INNER JOIN deleted b ON a.Label=b.Label
                     INNER JOIN [dbo].[Table_2] c ON a.Label=c.Label
                     WHERE  a.Use_Date<>b.Use_Date

END 
```

我知道我在那里遗漏了一些逻辑缺陷，但对于我的生活我看不到它......任何关于如何让这个工作的帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:26:58.323

需要注意两点：

1.  添加`SET NOCOUNT ON`以防止从触发器中报告行数。您的客户端程序可能不期望第二个结果集，或者它可能正在解释第二个行数而不是实际的原始 UPDATE 语句，即它可能会看到“0 行受影响”并认为原始 UPDATE 失败。

2.  如果您是从 NULL -> date 更新，则触发器不适合它。如果您从不使用 NULL 启动它，这可能不是问题。

* * *

```
CREATE TRIGGER [dbo].[trgOnTable1Update] ON [dbo].[Table_1]
AFTER UPDATE
AS
BEGIN
       SET NOCOUNT ON;
       UPDATE c
          SET LastUsedDate=a.Use_Date,
              UsageCount=c.UsageCount+1
         FROM inserted a
         JOIN deleted b ON a.Label=b.Label
         JOIN [dbo].[Table_2] c ON a.Label=c.Label
        WHERE a.Use_Date<>isnull(b.Use_Date,0)
END 
```******

# struts2 - Struts 2 JQuery Grid 未显示

> ID：15807006
> 
> 赞同：0
> 
> 时间：2013-04-04T09:12:58.580
> 
> 标签：struts2, struts2-jquery, struts2-jquery-grid

我正在尝试将 struts2 动作类中的数据显示到 JQuery Grid 中。但是当我尝试实现这一点时，我什至没有得到网格，它只是将 JSON 字符串显示为输出，如下所示，尝试了此处发布的所有其他答案，但没有运气..:(

```
{

"dummyData": [
    {
        "email": "ABC",
        "name": "DEF"
    }
],
"page": null,
"records": 1,
"resDetailObj": {
    "email": "ABC",
    "name": "DEF"
},
"rows": 0,
"searchField": null,
"searchOper": null,
"searchString": null,
"sidx": null,
"sord": null,
"total": 2147483647

} 
```

我正在使用 struts2-jquery-grid-plugin-3.5.1.jar、struts2-jquery-plugin-3.2.1.jar 和 struts2-json-plugin-2.1.8.jar

我的jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
"http://www.w3.org     /TR/html4/loose.dtd">
<%@ taglib prefix="s" uri="/struts-tags" %>
<%@ taglib prefix="sjg" uri="/struts-jquery-grid-tags"%>
<%@ taglib prefix="sj" uri="/struts-jquery-tags" %>
<html>

<h1>In JQueryGrid</h1>
<head>
    <sj:head jqueryui="true" jquerytheme="redmond"/>
</head>
<body>
    <s:url var="remoteurl" action="grid"/>
    <sjg:grid
        id="mygrid"
        caption="My Details"
        dataType="json"
        href="%{remoteurl}"
        pager="true"
        gridModel="dummyData"

     >
        <sjg:gridColumn name="name" index="name" title="Name" 
        sortable="true"/>

        <sjg:gridColumn name="email" index="email" title="Email"
        sortable="true"/>

    </sjg:grid>
</body>

</html> 
```

我的 struts.xml 文件是

```
<package name="JQueryGrid" namespace="/" extends="struts-default">              
    <action name="grid class="com.digi.crystal.resourceutilization.actions.GridAction">
        <result name="success" type="json">
            /JqueryGrid.jsp
        </result>
    </action>
</package> 
```

最后我的动作课是

```
public class GridAction extends ActionSupport
{
private List<CResourceDetails> dummyData;
private Integer rows=0;
private Integer page;
private String sord;
private String sidx;
private String searchField;
private String searchString;
private String searchOper;
private Integer total;
private Integer records; 

private CResourceDetails resDetailObj = new CResourceDetails();
public GridAction()
{

}

public String execute()
{

    List<CResourceDetails> temp = new ArrayList<CResourceDetails>();
    resDetailObj.setEmail("ABC");
    resDetailObj.setName("DEF");
    temp.add(resDetailObj);

    setDummyData(temp);
    System.out.println("The temp is:"+"in execute"+dummyData.size()+","+rows);          
     setRecords(temp.size());
     total =(int) Math.ceil((double)records / (double)rows);
     System.out.println("the total is:"+total/1000000000);
    return Action.SUCCESS;
}
// getters and setters of attributes 
```

这里 CResourceDetails 只是一个普通的 POJO，带有名称和电子邮件。

如果有人可以帮助我处理这个网格，那对我来说将是一个很大的帮助。

非常感谢提前，

CSSiddartha

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:33:36.810

我认为您正在直接访问操作网格：

```
http://localhost:8080/JQueryGrid/grid.action 
```

尝试访问jsp：

```
http://localhost:8080/JQueryGrid/JqueryGrid.jsp 
```

然后网格将调用该操作并检索结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T17:35:04.927

Siddarth 首先在 struts 中编写一个动作，结果仅映射到包含网格的 JSP 页面，然后为只有 json 的网格编写你的动作

```
<package name="JQueryGrid" namespace="/" extends="struts-default,json-default">
 <action name="opengridJSP" class="com.digi.crystal.resourceutilization.actions.GridAction" method ="SomeMethod">
    <result name="success">/JqueryGrid.jsp</result>
</action>

<action name="grid class="com.digi.crystal.resourceutilization.actions.GridAction">
    <result name="success" type="json"/>
</action>
</package> 
```

# magento - Magento 在产品页面上显示第三个价格

> ID：15807008
> 
> 赞同：0
> 
> 时间：2013-04-04T09:12:59.907
> 
> 标签：magento

我想为我的产品添加第三个价格，例如最新版本的“MSRP”，但在我的（Magento 1.4.1.1）上不可用。我想在产品页面上显示它，它必须根据所选选项进行更改。

因此，我首先创建了一个名为“msrp”的新属性。我设法使用以下代码为我的**view.phtml文件中的每个子产品获取它：**

```
<?php
if($_product->isConfigurable())
{
      $_associatedProducts = $_product->getTypeInstance()->getUsedProducts();
       foreach($_associatedProducts as $assProducts)
      {  
$msrp = $assProducts->getData("msrp");
echo "MSRP: ".$msrp."<br />" ;
}
}
?> 
```

现在的问题是如何一次只显示一个并且对应于所选选项？（就像我们选择一个选项时的正常价格变化一样。）

也许在这个文件中有一段javascript？ **/app/design/frontend/[...]/[...]/template/catalog/product/view/type/options/configurable.phtml**

谢谢你的帮助 ！

# html - 将 css 样式设置为 HTML textarea 行

> ID：15807009
> 
> 赞同：0
> 
> 时间：2013-04-04T09:13:01.907
> 
> 标签：html, css

如何在 textarea 中设置行的样式？如果我想有一个底部边框来模拟一本书？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-04T09:20:13.223

只需为您的文本区域设置一些适当的 css 样式和背景图像：

```
textarea {
    background: url(http://i.stack.imgur.com/ynxjD.png) repeat-y;
    width: 400px;
    height: 300px;
    font: normal 14px verdana;
    line-height: 25px;
    padding: 2px 10px;
    border: solid 1px #ddd;
} 
```

演示：http: [//jsfiddle.net/q3FhL/](http://jsfiddle.net/q3FhL/)

# libreoffice - 向下拖动时，libreoffice calc 中的合并列不起作用

> ID：15807012
> 
> 赞同：0
> 
> 时间：2013-04-04T09:13:07.253
> 
> 标签：libreoffice, libreoffice-calc, libreoffice-basic

我正在使用该`CONCATENATE`功能合并 Libre Office 中的列。我正在使用以下方法合并所有文本：

```
CONCATENATE(A1," ",B1," ",C1," ",D1," ",E1," ",F1," ",G1) 
```

根据[这个建议](http://www.addictivetips.com/microsoft-office/excel-2010-merge-cells-concatenation/)，我应该可以通过拖动加号将功能应用于整个列；但是，当我拖动加号时，它只复制第一行，但我想合并下一行。

如何正确合并列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:42:45.637

@oczdref，我不确定为什么这在您的情况下不起作用。这是我所做的（请忽略`;`分隔符，在您的情况下它们应该保留`,`）

![在此处输入图像描述](https://i.stack.imgur.com/2NL29.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:22:57.920

我还发现您必须在工具 -> 单元格内容下启用“自动计算”，以便当您拖动自动完成功能而不是获得类似这样的结果时：

![在此处输入图像描述](https://i.stack.imgur.com/ytuqJ.jpg)

和我想要的结果。

![在此处输入图像描述](https://i.stack.imgur.com/6IRml.jpg)

# java - Java - 两个线程通过等待（）/通知（）进行通信，但线程交替进行，线程首先获得锁定

> ID：15807013
> 
> 赞同：0
> 
> 时间：2013-04-04T09:13:11.993
> 
> 标签：java, multithreading, synchronization, synchronized

该程序的期望输出是：

乒乓乒乓乒乓

然而它在那个和之间交替

乒乓球等

问题是，我创建了 Ping 线程并首先运行它。所以我不确定为什么 Pong 偶尔会排在第一位。

所以这是我的代码（易于编译）。它基本上有效。我只是不明白为什么它有时会先打印“Pong”。有人可以解释一下为什么会这样吗？

```
// Printer class - will be the object that both threads lock / synchronize onto
class Printer
{
    int numberOfMessages;
    int messageCount;

    // Constructor allowing user to choose how many messages are displayed
    Printer(int numberOfMessages)
    {       
        this.numberOfMessages = numberOfMessages;
        this.messageCount = 0;
    }

    // If more messages are to be printed, print and increment messageCount
    void printMsg(String msg)
    {
        if (messageCount < numberOfMessages)
        {
            System.out.println("[" + msg + "]");            
            ++messageCount;
        }
        else
        {
            System.exit(0);
        }
    }
}

// PingPong thread
class PingPongThread extends Thread
{
    Printer printer;
    String message; 

    public PingPongThread(Printer printer, String message)
    {
        this.printer = printer;
        this.message = message;
        this.start();
    }

    @Override
    public void run()
    {
        while(true)
        {
            synchronized (printer)
            {                   
                // Print message whether it is Ping or Pong
                printer.printMsg(message);

                // Notify
                printer.notify();

                // Wait
                try
                {
                    printer.wait();
                } 
                catch (InterruptedException e)
                {               
                    e.printStackTrace();
                }
            }
        }
    }

}

// Two threads communicate with eachother to alteratively print out "Ping" and "Pong"
public class PingPong
{
    public static void main(String args[])
    {
        Printer printer = new Printer(6);

        PingPongThread pingThread = new PingPongThread(printer, "Ping");
        PingPongThread pongThread = new PingPongThread(printer, "Pong");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:30:54.397

因为`run`方法在不同的线程中运行，除非你有适当的同步，否则你不能假设哪个会先运行。如果线程先启动并不意味着它会更重要。*所有的动物都是平等的。*

您应该在线程中创建一个特殊标志，当线程启动时通知该标志。并在启动第二个线程之前等待标志。简单的方法是使用[`Condition`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Condition.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:31:33.550

您想强制线程运行顺序。JVM 不保证这一点，所以你必须自己动手。我可以想到两种解决方案。

丑陋的 hack，但可能有效：在启动第一个线程后但在启动第二个线程之前让出当前线程，以“鼓励”它运行。例如：

```
PingPongThread pingThread = new PingPongThread(printer, "Ping");
Thread.yield();
PingPongThread pongThread = new PingPongThread(printer, "Pong"); 
```

这是最简单的解决方案，但不能保证每次都能正常工作，例如，如果另一个线程（例如，事件处理程序）将在屈服后获取控制权。

更健壮的方法：让主线程在启动第二个线程之前等待一些其他信号。假设这个信号通过一个名为 的字段`lock`，它看起来像：

```
Object lock = new Object();
PingPongThread pingThread = new PingPongThread(lock, printer, "Ping");
lock.wait();
PingPongThread pongThread = new PingPongThread(lock, printer, "Pong"); 
```

并且线程`run()`方法将类似于

```
synchronize (lock) { lock.notify(); }
while (true) {
  // As before...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T09:31:46.533

JVM 不保证线程将按照它们启动的顺序启动。这就是为什么有时第二个线程首先开始的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T09:35:42.617

如果您创建两个线程，例如`t1`and `t2`，然后调用：

```
t1.start();
t2.start();
```

这并不意味着`t1`它将在之前开始执行`t2`。它可能会，但有机会`t2`首先开始。您必须编写自己的方法，保证`t1`首先开始。例如，`wait()`在一个对象上启动第一个线程后，以及在该`notify()`对象上的第一个线程开始时`run()`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-04T09:36:39.417

这

```
 Printer printer = new Printer(6);
    PingPongThread pingThread = new PingPongThread(printer, "Ping");
    synchronized (printer) {
        printer.wait();
    }
    PingPongThread pongThread = new PingPongThread(printer, "Pong"); 
```

将保证 pingThread 总是首先启动。

尽管如此，线程协调仍然取决于谁跑得更快。考虑这个

```
final Object obj = new Object();
Thread t1 = new Thread() {
    public void run() {
        synchronized (obj) {
            obj.notify();
        }
    };
};

Thread t2 = new Thread() {
    public void run() {
        synchronized (obj) {
            try {
                obj.wait();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    };
};

t1.start();
t2.start(); 
```

如果 t1 在 t2 等待之前通知，则测试挂起。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-17T06:19:45.253

[正如@evgeniy 在他的评论](https://stackoverflow.com/questions/15807013/java-two-threads-communicating-via-wait-notify-but-threads-are-alternating#comment22483473_15807593)中已经指出的那样：标记为解决方案的答案有缺陷。`printer` *一个可能的解决方案是在启动第一个线程之前*锁定它，因此它不能进入​​它的同步部分，直到`printer.wait()`被调用。

```
Printer printer = new Printer(6);
synchronized (printer) {
    PingPongThread pingThread = new PingPongThread(printer, "Ping");
    printer.wait();
}
PingPongThread pongThread = new PingPongThread(printer, "Pong"); 
```

# ios - 选项卡项目图像在自定义选项卡栏中无法完美显示

> ID：15807015
> 
> 赞同：2
> 
> 时间：2013-04-04T09:13:13.817
> 
> 标签：ios, cocoa-touch

![](https://i.stack.imgur.com/8pUY4.png)

这是我设置图像的代码

```
[tabItem0 setFinishedSelectedImage:[UIImage imageNamed:@"home_selected.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"home_selected.png"]];    
[tabItem1 setFinishedSelectedImage:[UIImage imageNamed:@"info.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"info.png"]];     
[tabItem2 setFinishedSelectedImage:[UIImage imageNamed:@"like.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"like.png"]];        
[tabItem3 setFinishedSelectedImage:[UIImage imageNamed:@"twitter.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"twitter.png"]]; 
```

我正在获取与标签栏高度相同的每个图像的高度，但它看起来像这样，底部的黑色边框也覆盖了图像的某些部分，请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:22:31.057

通常我将图像分配给这样的标签栏项目

```
viewController.tabBarItem = [[UITabBarItem alloc] initWithTitle:@"Twiiter" image:[UIImage imageNamed:@"Home_Tab.png"] tag:0]; 
```

你可以试试这个，也可以检查标签栏图像大小，我猜它大约是 30x30。

# javascript - 使用javascript将像素转换为百分比

> ID：15807021
> 
> 赞同：-1
> 
> 时间：2013-04-04T09:13:26.233
> 
> 标签：javascript, function, width, pixel, percentage

我有一个表格标题的像素宽度。单击功能时，我需要将像素转换为百分比。

```
<th field="Column1" id="Column1" noresize="true" width="100px">
    <label id="Column1" onclick="getCustomGridColName(this.id,'inner__fghgh');" style="cursor:pointer; font-family: Times; font-size:12pt;">
        Column1
    </label>
</th> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T09:25:18.527

百分比是一个相对值。

像`100px`您这样的值无法得出百分比。

您需要具有像 screenWidth （假设）`1366px`这样的相对值，以便您获得该值的百分比。

```
var pixels = 100;
var screenWidth = window.screen.width;
var percentage = ( screenWidth - pixels ) / screenWidth ; // 0.92% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-19T07:43:25.263

```
//Transform pixel in percentage
/* - totalpx: Total of pixels depending on the width or height, could be 1920.0 or 1080.0, 1280.0 or 720.0, etc...
     respectively.
   - px: the pixel desidered to be converted.
   - ItIsHeight: boolean to know if is axis x or y ot make the correct calculation.
   - BaseOfConversionWidth & BaseOfConversionHeight: the base of conversion from the original pixel are take it, if
     the design is HD ready then will be 1280.0 and 720.0, if is full HD then will be 1920.0 and 1080.0, etc... */
public Double TransformPercentage(Double Totalpx, Double px, boolean ItIsHeight, double BaseOfConversionWidth, double BaseOfConversionHeight) {
    if (ItIsHeight)
        return (px / BaseOfConversionHeight) * Totalpx;
    else
        return (px / BaseOfConversionWidth) * Totalpx;
} 
```

# testing - 将服务注入 Angular 单元测试时出现未知提供程序错误

> ID：15807026
> 
> 赞同：33
> 
> 时间：2013-04-04T09:13:43.367
> 
> 标签：testing, angularjs, mocking, inject

我对 Angular 还很陌生，并且已经查看了 Stack Overflow 上所有类似的相关问题，但没有一个对我有帮助。我相信我已经正确设置了所有内容，但是在尝试将服务注入单元测试时仍然出现“未知提供者”错误。我在下面列出了我的代码 - 希望有人能发现一个明显的错误！

*我在一个单独的.js*文件中定义我的模块，如下所示：

```
angular.module('dashboard.services', []);
angular.module('dashboard.controllers', []); 
```

这是我定义一个名为 EventingService 的服务的地方（为简洁起见，删除了逻辑）：

```
angular.module('dashboard.services').factory('EventingService', [function () {
    //Service logic here
}]); 
```

这是我使用 EventingService 的控制器（这在运行时都可以正常工作）：

```
angular.module('dashboard.controllers')
    .controller('Browse', ['$scope', 'EventingService', function ($scope, eventing) {
        //Controller logic here
}]); 
```

这是我的单元测试——它是我尝试注入 EventingService 的行，当我运行单元测试时会导致错误：

```
describe('Browse Controller Tests.', function () {
    beforeEach(function () {
        module('dashboard.services');
        module('dashboard.controllers');
    });

    var controller, scope, eventingService;

    beforeEach(inject(function ($controller, $rootScope, EventingService) {
        scope = $rootScope.$new();
        eventingService = EventingService

        controller = $controller('Browse', {
            $scope: scope,
            eventing: eventingService
        });
    }));

    it('Expect True to be True', function () {
        expect(true).toBe(true);
    });
}); 
```

当我运行测试时，我收到此错误：

> 错误：未知提供者：EventingServiceProvider <- EventingService

我确保我的 jasmine specrunner.html 文件具有所有必要的源文件（这是一个 Asp.Net MVC 项目）：

```
<!-- Include source files here... -->
@Scripts.Render("~/bundles/jquery")
<script type="text/javascript" src="@Url.Content("~/Scripts/angular.js")"></script>  
<script type="text/javascript" src="@Url.Content("~/Scripts/angular-mocks.js")"></script>                 

<script type="text/javascript" src="@Url.Content("~/App/scripts/app.js")"></script>                       <!-- Angular modules defined in here -->
<script type="text/javascript" src="@Url.Content("~/App/scripts/services/eventing.js")"></script>         <!-- My Eventing service defined here -->

<script type="text/javascript" src="@Url.Content("~/App/scripts/controllers/browse.js")"></script>        <!-- My Browse controller defined here -->

<!-- Include spec files here... -->
<script type="text/javascript" src="@Url.Content("~/App/tests/browse.js")"></script>                      <!-- The actual unit test here --> 
```

我只是无法理解为什么 Angular 会抛出这个错误来抱怨我的 EventingService。我的控制器在运行时工作正常 - 只是当我尝试测试它时出现错误，所以我很好奇我是否搞砸了模拟/注入。

Angular 对测试的帮助是垃圾，所以我现在很难过 - 任何人都可以提供的任何帮助或建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-08-21T10:23:39.563

我刚刚遇到了这个问题，并通过显式切换到使用 $injector 获取服务来解决它：

```
var EventingService, $rootScope;
beforeEach(inject(function($injector) {
  EventingService = $injector.get('EventingService');
  $rootScope = $injector.get('$rootScope');
})); 
```

我希望我能告诉你为什么这样有效以及为什么简单

```
beforeEach(inject(function(EventingService) {   ....  })); 
```

没有，但我没有时间调查内部。始终最好使用一种编码风格并坚持下去。

这种风格更好，因为您在测试中使用的变量名称是服务的正确名称。但这有点冗长。

还有另一个角度魔法功能，它使用像*$rootScope*这样的奇怪变量名，但我不喜欢它的 hacky 外观。

请注意，大多数时候人们收到此错误是因为他们没有包含模块：

```
beforeEach(module('capsuling'));
beforeEach(module('capsuling.capsules.services')); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-04T12:08:58.550

如果您的控制器（在`dashboard.controllers`模块下定义）依赖于包含在不同模块（`dashboard.services`）中的某些服务，那么您需要在模块签名中引用依赖模块：

```
angular.module('dashboard.services', []);
angular.module('dashboard.controllers', ['dashboard.services']); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-27T22:09:13.003

虽然这个问题已经相当老了，但我浪费了大量时间来解决与这个类似的问题，即：

```
Error: Unknown provider: SomeServiceProvider <- SomeService 
```

因此，我将在这里留下另一个可能导致此问题的原因。希望对某人有所帮助。

就我而言，我的项目中有两个名称完全相同但创建了不同依赖项的模块，即两个不同的 .js 文件：

```
angular.module('moduleName', [dependencies])) 
```

从角度文档：

> 传递一个参数会检索现有的 angular.Module，而传递多个参数会创建一个新的 angular.Module

**结论**：事实证明，在测试中注入的是具有错误依赖关系的模块。从错误创建的模块中删除第二个参数解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-08T22:41:42.333

您是否尝试过定义一个依赖于其他聚合模块的附加模块，如下所示：

```
angular.module( 'dashboard', [ 'dashboard.services', 'dashboard.controllers' ] ) 
```

因此，您可以在 beforeEach 中指定一个模块，其中定义了两个子模块，如下所示：

```
describe('Browse Controller Tests.', function () {
    beforeEach(function () {
        module('dashboard');
    });

    var controller, scope, eventingService;

    beforeEach(inject(function ($controller, $rootScope, EventingService) {
        scope = $rootScope.$new();
        eventingService = EventingService

        controller = $controller('Browse', {
            $scope: scope,
            eventing: eventingService
        });
    }));

    it('Expect True to be True', function () {
        expect(true).toBe(true);
    });
}); 
```

# linux - 交互：spawn id exp0 未打开？

> ID：15807027
> 
> 赞同：1
> 
> 时间：2013-04-04T09:13:45.337
> 
> 标签：linux, expect

我也尝试简单地使用`interact`它，并且通过删除最后一个期望状态来使用它

```
 expect -re "$prompt"
    send -- "exit\r" 
```

和

```
 interact {
     -re "$prompt"
      { send -- "show vlan id 121\r" }
         } 
```

我只是想将控制权传递给用户手动进行某些操作，当他退出时，其余的循环继续

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:19:22.200

要退出`interact`用户应该提供一些命令，以便它知道何时停止交互式会话。例如：

```
expect -re "$prompt"
send -- "show vlan id 121\r"
send_user "To exit interactive mode press Ctrl+C\n"
interact \003 return
send "show ip int br | ex una\r"
expect "#"
send "exit\n"; exit 0 
```

# magento - Magento 舍入问题 不含税的产品价格

> ID：15807031
> 
> 赞同：2
> 
> 时间：2013-04-04T09:13:57.770
> 
> 标签：magento

这不是我们第一次遇到这个问题，但这是我们第一次无法通过“已知”错误修复来解决它。我们已经尝试了几个修复，但没有一个有效。我希望有人可以帮助我解决我和所有其他面临这个烦人问题的人。

问题出现在 Magento 1.6.2 安装 [http://www.trampoline.nl/outdoor/voetbalgoals/aluminium-goal-3-00-x-2-00-incl-net.html](http://www.trampoline.nl/outdoor/voetbalgoals/aluminium-goal-3-00-x-2-00-incl-net.html)

前端价格：398,99€ 后端价格：329.75€</p>

我们在荷兰的税率为 21%，计算税为：69.25€

所以这应该是： (69.25€ + 329.75€) = 399.00€

Magento Bug 在 1.6.2 中仍然活跃：

*   [http://www.magentocommerce.com/bug-tracking/issue?issue=7978](http://www.magentocommerce.com/bug-tracking/issue?issue=7978)

我尝试了以下方法：

*   [Magento 和 Paypal 税收四舍五入问题](https://stackoverflow.com/questions/11868985/magento-paypal-tax-rounding-issue)
*   [Magento 税收四舍五入问题](https://stackoverflow.com/questions/13529580/magento-tax-rounding-issue)
*   [http://www.mageext.com/MageExt_FixRound-0.1.0.rar](http://www.mageext.com/MageExt_FixRound-0.1.0.rar)
*   [http://www.magentocommerce.com/boards/viewthread/247201/P15/#t361474](http://www.magentocommerce.com/boards/viewthread/247201/P15/#t361474)
*   返回回合（$价格，3）；
*   返回回合（$价格，4）；
*   返回$价格；
*   等等等等

我希望有人可以帮助我解决这个问题。

问候 Gijs ShopWorks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T12:35:29.203

好的，修好了。

首先检查php是否安装了模块bcMath（--enable-bcmath），如果没有，编译它。

之后我安装了模块： http: [//www.mageext.com/MageExt_FixRound-0.1.0.rar](http://www.mageext.com/MageExt_FixRound-0.1.0.rar)

并改变：

```
public function roundPrice($price)
{   
    return round($price,2);
} 
```

之后，您应该会看到圆形价格。

到：

```
public function roundPrice($price)
{   
    return round($price);
} 
```

# cross-browser - 从通用浏览器访问智能卡的架构？或者：如何弥合从浏览器到 PC/SC 堆栈的差距？

> ID：15807038
> 
> 赞同：59
> 
> 时间：2013-04-04T09:14:19.053
> 
> 标签：cross-browser, smartcard, pcsc

从通用浏览器（通过 http(s) 连接到服务器）访问本地智能卡的可能客户端体系结构是什么，最好是从 Javascript，最终用户的安装麻烦最少？服务器至少需要能够向卡发出它选择的 APDU（或者可能将其中的一些委托给它生成的客户端代码）。我假设在工作 PC/SC 堆栈的客户端可用，并配有智能卡读卡器。至少在自 XP、现代 OS X 和 Unix 以来的 Windows 上，这是一个合理的假设。

到目前为止，我已经确定了以下选项：

1.  一些自定义的 ActiveX。这就是我现有的应用程序使用的（我们内部开发的），一旦获得安装 ActiveX 的许可，对于使用 IE 的客户来说，部署非常容易，但它不符合“通用浏览器”的要求。
    *更新*：ActiveX 主要由已弃用的 IE 支持，包括 IE11；但不是由边缘。
2.  一些使用 Netscape Plugin API 的 PC/SC 浏览器扩展，这似乎是上述的平滑扩展。我找到的唯一现成的是[SConnect (webarchive)](https://web.archive.org/web/20171127015705/http://www.sconnect.com/FAQ/)。它不再被推广（*更新*：认为在 2020 年末至少在[一个应用程序](https://www2.swift.com/3skey/help/sconnect.html)中仍在积极维护和使用），它的 API[文档（webarchive）](https://web.archive.org/web/20080609144547/http://www.mockup.rd-logic.com/jsdoc/00_file.html)不再正式可用，它与特定的智能卡和读卡器供应商有着密切的联系。原理可能很好，但是为每个平台制作这样的插件将是很多工作。
    *更新*：许多浏览器都放弃了对 NPAPI 的支持，包括 Chrome 和 Firefox。
3.  一个 Java 小程序，运行在 Oracle 的 JVM (1.)6 或更高版本之上，带有[`javax.smartcardio`](http://docs.oracle.com/javase/6/docs/jre/api/security/smartcardio/spec/javax/smartcardio/package-summary.html). 从功能的角度来看这很好，有据可查，我可以忍受少数已知的错误，但我担心在接受 Java 作为浏览器扩展方面会出现不可抗拒的螺旋式下降。
4.  [更新，2021 年 2 月]：这个[答案](https://stackoverflow.com/a/32763770/903600)认为 WebUSB API 在 2015 年是一个很有前途的解决方案，然后在 2019 年报告说不能工作或被放弃。[我在那里](https://stackoverflow.com/q/66420229/903600)提出了一个问题。

还有什么想法吗？

另外：有什么方法可以防止恶意服务器滥用浏览器的任何 PC/SC 接口（例如，提供 3 个错误的 PIN 码来阻止卡，只是为了它的肮脏；或者做一些更邪恶的事情）。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-07T07:40:14.040

事实上，除了建立 SSL 之外，浏览器无法与（加密）智能卡进行通信。

您**将**需要由浏览器执行的附加代码来访问智能卡。

有数十个自定义和专有插件（使用您提到的所有三个选项）用于各种目的（签名是最受欢迎的，我猜）因为没有标准或普遍接受的方式，至少在欧洲，我敢肯定在其他地方也是。

创建、分发和维护你自己的将是一场爆炸，因为浏览器每个月左右发布一次，每个新版本都会改​​变 sanboxing ir UI 技巧，所以你可能需要经常调整你的代码。

而且您可能希望拥有 GUI 功能，至少是为了请求用户访问卡片或卡片上的某些功能的权限。

要创建多平台、多浏览器插件，可以使用诸如[firebreath之类的东西。](http://www.firebreath.org/)

就个人而言，我认为将 PC/SC 暴露在网络上没有任何好处。PC/SC 本质上是一个低级协议，当暴露它时，你也可以暴露对磁盘的块级访问，并希望“网络上的应用程序是我的，它们表现良好”（这应该回答你的“也”）。同时，像 SConnect 这样的薄垫片是最容易创建的，用于提供 javscript plugin.sendAPDU() 样式的代码（或者只是包装所有 PC/SC API 并让 javascript 调用者处理相同级别的细节与本地 PC/SC API 用例一样）。

为此目的创建插件通常是由严重的*电流*不足驱动的。

解决未来（移动等）是另一回事，W3C [webcrypto](http://www.w3.org/2012/webcrypto/)和 OpenMobile API 之类的东西最终可能会以某种方式创建将客户端密钥容器暴露给 Web 应用程序的东西。如果您的智能卡目标是密码学，我的建议是避免使用 PC/SC 并使用平台服务（Windows 上的 CryptoAPI，OSX 上的 Keychain，Linux 上的 PKCS#11）

任何一种设计都有要求。如果您正在考虑使用*键*而不是任意 APDU-s，这一切都适用。如果您的要求是发送任意 APDU-s，请创建一个插件并使用它。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-09-24T14:18:21.287

**更新**(8/2016)：正在讨论一种新的 Web API，称为**[WebUSB API 。](https://wicg.github.io/webusb/)**您[已经可以将它与 Chrome v54+ 一起使用](https://developers.google.com/web/updates/2016/03/access-usb-devices-on-the-web)。

该标准将在所有主要浏览器中实施，并将取代对第三方应用程序或智能卡扩展的需求:-)

所以新的答案是肯定的！

类似 OSI 的架构堆栈是：

*   [电脑/电脑](http://www.pcscworkgroup.com/specifications/specdownload.php)
*   [赛迪 v1.1](http://www.usb.org/results?q=CCID)
*   [WebUSB API](https://wicg.github.io/webusb/)
*   USB 驱动程序，[即 libusb](http://zadig.akeo.ie/)。

**2019 年更新**：正如@vlp 评论的那样，它似乎在 Chrome 中不起作用，因为他们出于某些似是而非的原因决定为智能卡阻止 WebUSB :-(

* * *

*注意：*谷歌宣布他们将在 2017 年[放弃 Chrome 应用程序。](http://www.chromestory.com/2016/08/google-retire-chrome-apps-windows-mac-linux/)

**上一个答案**：

[`chrome.usb`现在（2015 年），您可以使用API](https://developer.chrome.com/apps/app_usb)创建 Google Chrome 应用程序。

[然后，您可以通过其CCID 兼容](http://www.usb.org/results?q=CCID)接口访问智能卡读卡器。

它不是跨浏览器，而是 JavaScript 可编程和跨平台。

无论如何，现代浏览器不再支持 Netscape Plugin API (NPAPI)。浏览器供应商正在摒弃 Java 小程序。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-06-03T09:06:03.997

我刚刚发布了一个测试插件来解决这个问题。此测试版代码可在此处获得：

[https://github.com/ubinity/webpcsc-firebreath](https://github.com/ubinity/webpcsc-firebreath)

该插件基于 firebreath 框架，并已在 Linux/WinXP/Win7 下使用 Fireofx 和 Chrome 进行了 beta 测试。提供源代码和扩展包。

基本思想是提供一个 PCSLite API 访问，然后在此基础上开发一个更友好的 JS-api。

该插件正在积极开发中，因此请随时发送任何报告和请求。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-04T12:54:42.717

对于您的第一个问题，我几乎没有希望：要么您对智能卡功能的一小部分（例如签署电子邮件或 PDF）感到满意，然后您可以使用一些现成的软件（例如 PKCS），最好由智能卡公司，或者您想要更广泛的功能并且需要自己投入大量精力。当然，PCSC 是选择的起点。

至少对你的“也：”有一些希望。

1) 请注意，某些规范（例如，ICAO/德国 BSI TR-3110）要求一种方法，其中 PIN 不会被阻止，但在错误计数器达到 1 时会在回复之前使用大量时间。最后一次尝试必须使用不同的命令启用，否则不会进行进一步的比较和错误计数器调整。

2) 通过要求安全消息传递来简单地保护验证命令。敏感的应用程序对所有内容都使用安全消息传递，因此第一步是对会话密钥进行协商，然后将其应用于所有后续命令和响应。结果是，在错误计数器的比较或修改完成之前很久，由于不正确的 MAC，命令被拒绝。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-11-16T14:59:09.197

[在http://github.com/cardid/WebCard](http://github.com/cardid/WebCard)上还有另一个类似于 @cslashm 提出的浏览器插件。也是开源的，可以按照原始问题的要求使用“最少的安装麻烦”进行安装。[您可以访问http://plugin.cardid.org](http://plugin.cardid.org)查看使用示例

WebCard 已经在 IE 8 到 11、Windows 中的 Chrome 和 Firefox 以及 Mac OS X 中的 Chrome 和 Safari 中进行了测试。由于它只是 PC/SC 的包装器，因此它需要在 Mac OS X 中从[http://安装 SmartCard 服务smartcardservices.macosforge.com](http://smartcardservices.macosforge.com)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-12-27T18:19:19.330

由于 chrome 和 firefox 将停止对 NPAPI 插件的支持，因此没有可用于维护智能卡读取会话的安全解决方案，而是您的卡证书支持双向 ssl，我回答了类似的问题[来源](https://stackoverflow.com/a/34234256/1154348)，它可能帮助

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-24T13:09:51.233

它很脏，但是如果在客户端机器上安装桥接守护程序/服务可以接受/可行，那么您可以编写一个本地桥接服务（例如在 python / pyscard 中），通过 REST 接口公开智能卡，然后在在本地服务（外观）和远程服务器 API 之间进行调解的浏览器。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-07-18T17:27:23.800

说到 Chrome，您现在可以使用 Google 提供的[Smart Card Connector 应用程序](https://chrome.google.com/webstore/detail/smart-card-connector/khpfeaanjngmcnplbdlpegiifgpfgdco)，它捆绑了 PC/SC-Lite 端口和通用 CCID 驱动程序。

该应用程序本身通过前面评论者提到的[chrome.usb API工作。](https://developer.chrome.com/apps/usb)

因此，无需重写整个堆栈（从最低级别 - 原始 USB 开始），现在开发人员可以只编写在 PC/SC API 之上工作的部分 - 由连接器应用程序公开。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-03-16T10:00:50.127

客户端，客户端，客户端...插件，..JSApis.. 好吧.. 我们肯定知道这一点：所有浏览器在与 Apache 或 IIS 服务器通信时，实际上是在 https/SSL 握手过程中签署“**某些东西**”需要。

例如，像这样的典型 Apache 配置：

```
SSLVerifyClient require
SSLVerifyDepth 10
SSLOptions +FakeBasicAuth +StdEnvVars +ExportCertData +OptRenegotiate 
```

**启动密码键盘弹出，用户必须插入智能卡密码才能继续。**

好吧，我的想法是：为什么不转向服务器，并调整该行为，以便在握手开始时上传内容的字节流以签署某些内容？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-02-15T02:25:39.210

我有一个设置，其中扫描智能卡读卡器以登录用户。PC/SC 库在桌面上工作得很好。有人提到使用 Emscripten ( [https://github.com/kripken/emscripten](https://github.com/kripken/emscripten) ) 编译器，它将 c++ 编译成 JavaScript 代码。但这并没有很好地工作，因为 PC/SC 使用的某些功能仅在服务器端可用。经过大量研究。我最终放弃了客户端解决方案，chrome web usb API 也无法识别阅读器。
然后我决定尝试 signalR 并在连接到智能卡读卡器的 PC 上设置集线器，这种方法效果很好。

# ios - 如何在 UIPageViewcontroller 中添加两个视图控制器

> ID：15807040
> 
> 赞同：32
> 
> 时间：2013-04-04T09:14:28.330
> 
> 标签：ios, objective-c, uipageviewcontroller

我`UIPageViewController`在 iPad 上使用，我需要`firstviewController`在第一页和`ContentViewController`下一页以横向显示。

如果我`NSArray`用两个`viewControllers`设置应用程序崩溃，`[self.pagviewController setViewController:]`但有以下异常：

> 提供的视图控制器 (2) 的数量与请求的脊椎位置 (UIPageViewControllerSpineLocationMin) 所需的数量 (1) 不匹配

下面是代码：

```
#pragma mark - UIPageViewControllerDataSource Methods

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController 
      viewControllerBeforeViewController:(UIViewController *)viewController
{
    NSUInteger currentIndex = [self.modelArray indexOfObject:[(ContentViewController *)viewController textContents]];
    if(currentIndex == 0)
    {
        return nil;
    }
    ContentViewController *contentViewController = [[ContentViewController alloc] init];
    contentViewController.textContents = [self.modelArray objectAtIndex:currentIndex - 1];
    return contentViewController;
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController
       viewControllerAfterViewController:(UIViewController *)viewController
{
    NSUInteger currentIndex = [self.modelArray indexOfObject:[(ContentViewController *)viewController textContents]];
    if(currentIndex == self.modelArray.count-1)
    {
        return nil;
    }
    ContentViewController *contentViewController = [[ContentViewController alloc] init];
    contentViewController.textContents = [self.modelArray objectAtIndex:currentIndex + 1];

    return contentViewController;
}

//#pragma mark - UIPageViewControllerDelegate Methods

- (UIPageViewControllerSpineLocation)pageViewController:(UIPageViewController *)pageViewController
                   spineLocationForInterfaceOrientation:(UIInterfaceOrientation)orientation
{
    if(UIInterfaceOrientationIsPortrait(orientation))
    {
        //Set the array with only 1 view controller
        UIViewController *currentViewController = [self.pageViewController.viewControllers objectAtIndex:0];
        NSArray *viewControllers = [NSArray arrayWithObject:currentViewController];

        [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL];

        //Important- Set the doubleSided property to NO.
        self.pageViewController.doubleSided = NO;
        //Return the spine location
        return UIPageViewControllerSpineLocationMin;
    }
    else
    {
        NSArray *viewControllers = nil;
        ContentViewController *currentViewController = [self.pageViewController.viewControllers objectAtIndex:0];

        NSUInteger currentIndex = [self.modelArray indexOfObject:[(ContentViewController *)currentViewController textContents]];
        if(currentIndex == 0 || currentIndex %2 == 0)
        {
            UIViewController *nextViewController = [self pageViewController:self.pageViewController viewControllerAfterViewController:currentViewController];
            viewControllers = [NSArray arrayWithObjects:currentViewController, nextViewController, nil];
        }
        else
        {
            UIViewController *previousViewController = [self pageViewController:self.pageViewController viewControllerBeforeViewController:currentViewController];
            viewControllers = [NSArray arrayWithObjects:previousViewController, currentViewController, nil];
        }
        //Now, set the viewControllers property of UIPageViewController
        [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL];

        return UIPageViewControllerSpineLocationMid;
    }
}
- (void)viewDidLoad
{
    [super viewDidLoad];

    appDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];
    //Instantiate the model array
    self.modelArray = [[NSMutableArray alloc] init];
    self.vcs = [[NSMutableArray alloc]init];

    for (int index = 1; index <= 2 ; index++)
    {
        [self.modelArray addObject:[NSString stringWithFormat:@"Page %d",index]];
    }

    //Step 1
    //Instantiate the UIPageViewController.
    self.pageViewController = [[UIPageViewController alloc] initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl
                                                              navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal options:nil];
    //Step 2:
    //Assign the delegate and datasource as self.
    self.pageViewController.delegate = self;
    self.pageViewController.dataSource = self;

    //Step 3:
    //Set the initial view controllers.

    appDelegate.contentViewController.textContents = [self.modelArray objectAtIndex:0];

    NSArray *viewControllers = [NSArray arrayWithObjects:appDelegate.firstViewController,appDelegate.contentViewController,nil];
    [self.pageViewController setViewControllers:viewControllers
                                      direction:UIPageViewControllerNavigationDirectionForward
                                       animated:NO
                                     completion:nil];

    //Step 4:
    //ViewController containment steps
    //Add the pageViewController as the childViewController
    [self addChildViewController:self.pageViewController];

    //Add the view of the pageViewController to the current view
    [self.view addSubview:self.pageViewController.view];

    //Call didMoveToParentViewController: of the childViewController, the UIPageViewController instance in our case.
    [self.pageViewController didMoveToParentViewController:self];

    //Step 5:
    // set the pageViewController's frame as an inset rect.
    CGRect pageViewRect = self.view.bounds;
    pageViewRect = CGRectInset(pageViewRect, 40.0, 40.0);
    self.pageViewController.view.frame = pageViewRect;

    //Step 6:
    //Assign the gestureRecognizers property of our pageViewController to our view's gestureRecognizers property.
    self.view.gestureRecognizers = self.pageViewController.gestureRecognizers;
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-12-30T18:24:03.867

问题是您将包含两个视图控制器的数组传递给页面视图控制器，而它一次只需要一个，请将您的数组更改为：

```
NSArray *viewControllers = @[appDelegate.firstViewController]; 
```

您将通过其中一个视图，但`viewControllerAfterViewController`将`viewControllerBeforeViewController`处理其余视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-29T05:49:14.777

Ah..Finally got solution for this same issue.., it may helps you..

When we set the spine location to `UIPageViewControllerSpineLocationMid`, the `doubleSided` property of the pageViewController is automatically set to YES. This means that the content on page front will not partially show through back. But when this property is set to NO, the content on page front will partially show through back, giving the page a translucent kind of effect. So, in the portrait orientation, we have to set the value to NO, otherwise it would result in an exception.

So in your `UIPageviewcontroller` delegate method, in else part add this `doubleSided` property as YES when you return spineLocation as `UIPageViewControllerSpineLocationMid`

```
self.pageViewController.doubleSided = YES;
return UIPageViewControllerSpineLocationMid; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-20T11:59:18.667

```
self.pageViewController.doubleSided = NO;
return UIPageViewControllerSpineLocationMid; 
```

这是异常的解决方案。

在 xcode it self 中，您可以找到它。

去那里的`UIPageViewcontroller`课程，你可以看到这样的解释：

```
@property (nonatomic, readonly) UIPageViewControllerSpineLocation spineLocation; // If transition style is 'UIPageViewControllerTransitionStylePageCurl', default is 'UIPageViewControllerSpineLocationMin', otherwise 'UIPageViewControllerSpineLocationNone'.

// Whether client content appears on both sides of each page. If 'NO', content on page front will partially show through back.
// If 'UIPageViewControllerSpineLocationMid' is set, 'doubleSided' is set to 'YES'. Setting 'NO' when spine location is mid results in an exception.
@property (nonatomic, getter=isDoubleSided) BOOL doubleSided; // Default is 'NO'. 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-07-25T19:44:56.610

每次用户按下下一个或后退按钮时，您可以一次使用一个视图控制器设置 PageViewController，而不是实现完整的数据源，例如

```
[pageViewController setViewControllers:@[contentViewController]
                             direction:UIPageViewControllerNavigationDirectionForward
                              animated:YES
                            completion:nil]; 
```

这将在您切换时为页面过渡设置动画。

# python - python中类的提取方法

> ID：15807043
> 
> 赞同：1
> 
> 时间：2013-04-04T09:14:35.890
> 
> 标签：python, class, methods

我正在做一些与 Python 中的类有关的作业。但我被困在一个我不太明白的地方。

它告诉我：

--> 编写一个名为`withdraw()`从帐户中提取指定金额的方法。帐户中的余额会减少方法参数中指定的金额。仅当参数中指定的金额小于或等于 balance 时，才应减少余额

这是我的程序

```
class Account:
    def __init__(self,id=0):
        self.__id = id
        self.__balance = 0
        self.__annualInterestRate = 0

    def getid(self):
        return self.__id

    def getbalance(self):
        return self.__balance

    def getannualInterestRate(self):
        return self.__getannualInterestRate

    def setid(self):
        self.__id = id

    def setbalance(self):
        self.__balance = balance

    def getMonthlyInterestRate(self):
        return self.__annualInterestRate/12

    def getMonthlyInterest(self):
        return self.__balance * getMonthlyInterestRate() 
```

然后我将不得不：

```
def withdraw():
   # I don't know what to do here 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T09:16:33.900

您需要传递隐含的`self`参数（此处和其他一些方法）和一个`amount`：

```
def withdraw(self, amount):
   # subtract amount from self.__balance 
```

`return`在继续上课之前，您还应该阅读声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T09:25:31.317

您的代码中有各种错误。我修改`class A`为一个可执行类，包括`withdraw`函数

```
class Account:
    def __init__(self,id=0):
        self.__id = id
        self.__balance = 0
        self.__annualInterestRate = 0

    def getid(self):
        return self.__id

    def getbalance(self):
        return self.__balance

    def getannualInterestRate(self):
        return self.__annualInterestRate

    def setid(self,id):
        self.__id = id

    def setbalance(self, balance):
        self.__balance = balance

    def setannualInterestRate(self, rate):
        self.__annualInterestRate = rate

    def getMonthlyInterestRate(self):
        return self.__annualInterestRate/12

    def getMonthlyInterest(self):
        return self.__balance * self.getMonthlyInterestRate()

    def withdraw(self, amount):
        if amount <= self.__balance:
            self.__balance -= amount
            return True
        else:
            return False 
```

# java - 什么是实现精确的时间相关顺序执行的好方法？

> ID：15807056
> 
> 赞同：1
> 
> 时间：2013-04-04T09:15:03.510
> 
> 标签：java, android

我正在编写一个监听各种传感器的应用程序。它在录制会话中收听他们，每个会话包括在不同持续时间（带有偏移量）收听各种线路。当录制会话结束时，整个数据被打包到一个`RecordingSession`对象中并发送到服务器。

记录会话之间总是有一个间隔：

```
####### RecordingSession 1 ########                  ####### RecordingSession 2 ########
#|********* Line 1 **************|#                  #|********* Line 1 **************|#
#        |********* Line 2 ******|#  ** interval **  #         |******** Line 2 ******|#   ...
#                |**** Line 3 ***|#                  #                |**** Line 3 ***|#
###################################                  ################################### 
```

我知道我可以使用 Java `Timer`，然后`TimerTasks`用偏移量安排各种持续时间。三个 TimerTasks`Lines`和一个用于存储`RecordingSession`并创建一个新的。

现在我的问题是，应该可以将录制会话之间的间隔设置为 0（如下面的清单所示）。我希望，`Timer`即使我设置了正确的时间，也不能保证每个定时任务的完美定时执行。每个`Line`都有一个监听器，用于注册和注销线路的数据流（每个都有 TimerTask）。现在可能发生的情况是，如果我用 实现它`TimerTasks`，可能会发生我在取消注册之前注册了一个监听器，然后取消注册会导致下一个 RecordingSession 中没有记录任何数据。

```
####### RecordingSession 1 ############### RecordingSession 2 ########
#|********* Line 1 **************|##|********* Line 1 **************|#
#         |******** Line 2 ******|##         |******** Line 2 ******|#   ...
#                |**** Line 3 ***|##                |**** Line 3 ***|#
###################################################################### 
```

有没有比使用（嵌套）TimerTasks 和线程更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T03:15:46.027

最后我`TimerTasks`和安排一起去了。每次线路停止时，它都会通知录制会话，并且一旦不再有任何活动线路（这应该在同一时刻发生在所有线路上），我就会重新安排 a `RecordingSession`.

# mysql - 如果我选择 varchar 字段而不是数字字段，为什么我的 sql 查询要慢得多？

> ID：15807060
> 
> 赞同：2
> 
> 时间：2013-04-04T09:15:09.670
> 
> 标签：mysql, sql

我有一个相当大的 SQL 查询（连接 3 个巨大的表）并且运行速度太慢。我正在尝试对其进行优化并进行奇怪的观察：

```
SELECT board FROM ((foo JOIN bar ON id_bar=bar.id) JOIN baz ON id_baz=baz.id) ORDER BY foo.id DESC LIMIT 1;

+-------+
| board |
+-------+
|     3 |
+-------+
1 row in set (3,99 sec) 
```

`board`是一个int字段，上面有一个索引。好的。但是，现在，如果我选择一个索引`varchar(6)`字段，我得到的结果很慢：

```
SELECT type FROM ((foo JOIN bar ON id_bar=bar.id) JOIN baz ON id_baz=baz.id) ORDER BY foo.id DESC LIMIT 1;

+--------+
|  type  |
+--------+
| normal |
+--------+
1 row in set (17,76 sec) 
```

这怎么可能？我认为查询中的慢部分在`JOIN`// `ORDER`/部分中`GROUP`，`WHERE`而不是在结果的实际显示中。如何增强该查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:23:32.840

INT 长度为 4 个字节，VARCHAR(6) 可以长达 12 个字节（在多字节编码中）。这增加了索引的大小，从而增加了时间。

您可以考虑的一件事是将`type`列更改为另一种数据类型，即`ENUM`. `ENUM`字段使您可以有效地存储一组有限的可能值中的值（并且`type`列通常具有有限数量的可能值）。因为它使用更少的空间来存储数据，所以这些列上的索引也很小，因此速度更快。

# java - 运行游戏应用时出现空指针异常错误

> ID：15807061
> 
> 赞同：0
> 
> 时间：2013-04-04T09:15:13.363
> 
> 标签：java, android, nullpointerexception, 2d-games

目前我正在为某个网站开发应用程序，但我对开发游戏应用程序有点疯狂，所以按照教程在第一级画布上创建了一个图像，在下一个级别图像必须移动为此也给出了编码，但是当我运行应用程序时，它会强制关闭。这是我的代码。

```
public class GameView extends SurfaceView {

private Bitmap bmp;
private SurfaceHolder holder;
private GameLoopThread gameLoopThread;
private int x = 0;  

public GameView(Context context) {
    super(context);
 gameLoopThread = new GameLoopThread()
    holder = getHolder();
    holder.addCallback(new SurfaceHolder.Callback() {

           @Override
           public void surfaceDestroyed(SurfaceHolder holder) {
               boolean retry = true;
               gameLoopThread.setRunning(false); 
               while (retry) {
                      try {
                            gameLoopThread.join();
                            retry = false;
                      } catch (InterruptedException e) {
                      }
               }
           }

        @Override
           public void surfaceCreated(SurfaceHolder holder) {
               gameLoopThread.setRunning(true);
               gameLoopThread.start();
           }

           @Override
           public void surfaceChanged(SurfaceHolder holder, int format,
                         int width, int height) {
           }

    });

    bmp = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
}
@Override
protected void onDraw(Canvas canvas) {
    canvas.drawColor(Color.BLACK);
    if (x < getWidth() -  bmp.getWidth()) {
        x++;
 }
    canvas.drawBitmap( bmp, x, 10, null);
} 
```

线程类

```
public class GameLoopThread extends Thread{
private GameView view;
private boolean running = false;

public GameLoopThread(GameView view) {
      this.view = view;
}

public void setRunning(boolean run) {
      running = run;
}

@SuppressLint("WrongCall")
@Override

public void run() {
      while (running) {
             Canvas c = null;
             try {
                    c = view.getHolder().lockCanvas();
                    synchronized (view.getHolder()) {
                           view.onDraw(c);
                    }

             } finally {
                    if (c != null) {
                           view.getHolder().unlockCanvasAndPost(c);
                    }
             }
      }
} 
```

日志猫结果

```
03-21 23:38:26.341: E/AndroidRuntime(754): FATAL EXCEPTION: main
03-21 23:38:26.341: E/AndroidRuntime(754): java.lang.NullPointerException
03-21 23:38:26.341: E/AndroidRuntime(754):  at com.killthemall.GameView$1.surfaceCreated(GameView.java:40)
03-21 23:38:26.341: E/AndroidRuntime(754):  at android.view.SurfaceView.updateWindow(SurfaceView.java:543)
03-21 23:38:26.341: E/AndroidRuntime(754):  at android.view.SurfaceView.dispatchDraw(SurfaceView.java:348)
03-21 23:38:26.341: E/AndroidRuntime(754):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
03-21 23:38:26.341: E/AndroidRuntime(754):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-21 23:38:26.341: E/AndroidRuntime(754):  at android.view.View.draw(View.java:6883)
03-21 23:38:26.341: E/AndroidRuntime(754):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
03-21 23:38:26.341: E/AndroidRuntime(754):  at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
03-21 23:38:26.341: E/AndroidRuntime(754):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-21 23:38:26.341: E/AndroidRuntime(754):  at android.view.View.draw(View.java:6883)
03-21 23:38:26.341: E/AndroidRuntime(754):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
03-21 23:38:26.341: E/AndroidRuntime(754):  at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1862)
03-21 23:38:26.341: E/AndroidRuntime(754):  at android.view.ViewRoot.draw(ViewRoot.java:1522)
03-21 23:38:26.341: E/AndroidRuntime(754):  at  android.view.ViewRoot.performTraversals(ViewRoot.java:1258)
03-21 23:38:26.341: E/AndroidRuntime(754):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
03-21 23:38:26.341: E/AndroidRuntime(754):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-21 23:38:26.341: E/AndroidRuntime(754):  at android.os.Looper.loop(Looper.java:123)
 03-21 23:38:26.341: E/AndroidRuntime(754):     at android.app.ActivityThread.main(ActivityThread.java:3683)
03-21 23:38:26.341: E/AndroidRuntime(754):  at java.lang.reflect.Method.invokeNative(Native Method)
03-21 23:38:26.341: E/AndroidRuntime(754):  at java.lang.reflect.Method.invoke(Method.java:507)
 03-21 23:38:26.341: E/AndroidRuntime(754):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
 03-21 23:38:26.341: E/AndroidRuntime(754):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-21 23:38:26.341: E/AndroidRuntime(754):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:16:37.410

> com.killthemall.GameView$1.surfaceCreated(GameView.java:40)

这告诉您在第 40 行的方法中发生了空指针`surfaceCreated`。查看该方法，第一行确实`gameLoopThread.setRunning`发生了 ，因此这可能会失败，空指针`exception if gameLoopThread`为空。

查看代码，您没有初始化`gameLoopThread`，因此它的默认值为 null。在构造函数中`GameView`添加行`gameLoopThread = new GameLoopThread()`。

# drawable - LibGDX - 缩放 Scene2d 舞台时如何平滑可绘制的演员？

> ID：15807063
> 
> 赞同：8
> 
> 时间：2013-04-04T09:15:21.673
> 
> 标签：drawable, libgdx, scaling, smoothing

这是我的设置：

```
stage = new Stage(1280, 800, false);
button = new Button(drawableUp, drawableDown);
stage.add(button); 
```

这将呈现如下：

```
@Override
public void render(float delta) {

    Gdx.gl.glClearColor(RED,GREEN,BLUE,ALPHA);
    Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);

    stage.act(delta);

    stage.draw();
} 
```

问题是当舞台以 1280x800 显示时，按钮看起来像这样：

![未缩放的图像](https://i.stack.imgur.com/P9tcb.png)

如果舞台重新缩放为例如 1280x736，则可绘制按钮按以下方式缩放： ![缩放图像](https://i.stack.imgur.com/2THgX.png)

有没有办法以某种方式平滑边缘？因为现在在我看来，缩放只是通过删除图片上半部分的一条像素线和下半部分的一条像素线来完成的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T10:38:21.457

您是否在代码中的任何地方使用过滤器？如果没有，那么试试这个：

```
texture.setFilter(TextureFilter.Linear, TextureFilter.Linear); 
```

`texture`您正在使用的纹理对象在哪里。

# visual-studio-2010 - Visual basic 2010,2012 中的团队项目

> ID：15807065
> 
> 赞同：0
> 
> 时间：2013-04-04T09:15:25.260
> 
> 标签：visual-studio-2010, visual-studio-2012, tfs

我是堆栈溢出的新手。我自己学习了visual basic 6.0（在互联网的帮助下）我迁移到vb2010和vb 2012旁边。现在我的问题是如何在同一个项目中与我的朋友一起工作（不花钱除了互联网费用（我父亲不会给我钱））之外的任何额外费用。我的朋友在一个遥远的地方。

* * *

谁能帮我解决这个问题。任何可以帮助我的人都会受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:21:07.903

我会从一个好的版本控制系统开始，我会推荐一个 GIT，例如： http: [//git-scm.com](http://git-scm.com)

> Git 是一个免费和开源的分布式版本控制系统，旨在以速度和效率处理从小型到大型项目的所有内容。
> 
> Git 易于学习，占用空间小，性能快如闪电。它优于 SCM 工具，如 Subversion、CVS、Perforce 和 ClearCase，具有廉价的本地分支、方便的暂存区域和多个工作流等功能。

或者你也可以使用 SVN，这里是两个系统的比较：[https ://git.wiki.kernel.org/index.php/GitSvnComparison](https://git.wiki.kernel.org/index.php/GitSvnComparison)

> Git 比 Subversion 快得多 Subversion 允许您仅签出存储库的子树；Git 要求您克隆整个存储库（包括历史记录）并创建一个工作副本，该副本至少反映版本控制下的项目的一个子集。Git 的存储库比 Subversion 小得多（对于 Mozilla 项目，小 30 倍） Git 从一开始就被设计为完全分布式，允许每个开发人员拥有完全的本地控制 Git 分支比 Subversion 的 Git 分支更简单，资源占用更少历史 在 Git 中合并不需要你记住合并的版本（Subversion 1.5 的发布消除了这个好处） Git 提供了更好的分支和合并事件审计 Git 的 repo 文件格式很简单，所以修复很容易，而且很少有损坏。集中备份 Subversion 存储库可能更简单 - 因为您可以选择在 git 中的存储库中分发文件夹 Git 存储库克隆充当完整存储库备份 Subversion 的 UI 比 Git 的版本更成熟，在 Subversion 中遍历版本更简单，因为它使用顺序修订号 ( 1,2,3,..); Git 使用不可预测的 SHA-1 哈希。使用“^”语法在 Git 中向后走很容易，但没有简单的方法向前走。在 Subversion 中遍历版本更简单，因为它使用连续的修订号 (1,2,3,..)；Git 使用不可预测的 SHA-1 哈希。使用“^”语法在 Git 中向后走很容易，但没有简单的方法向前走。在 Subversion 中遍历版本更简单，因为它使用连续的修订号 (1,2,3,..)；Git 使用不可预测的 SHA-1 哈希。使用“^”语法在 Git 中向后走很容易，但没有简单的方法向前走。

# c# - 在 servicestack 中合并路由

> ID：15807068
> 
> 赞同：4
> 
> 时间：2013-04-04T09:15:29.047
> 
> 标签：c#, servicestack

我有一个像这样的 Dto：

```
[Route("/clients/", HttpMethods.Post)]
[Route("/clients/{Dummy}", HttpMethods.Post)]
public class ClientPostDto : IReturnVoid
{
    public string Dummy { get; set; }
} 
```

我的服务中的 post 方法：

```
public class ClientService : Service
{
    public void Post(ClientPostDto request)
    {
        // do some stuff
    }
} 
```

是否可以合并这两个路由？

因此，以下两个 POST 请求由我的服务中的相同方法处理：

```
localhost:12345/clients/
localhost:12345/clients/CLIENT_IDENTIFIER 
```

我根本不需要 Dummy 属性，因为客户端存储在具有完整路径的列表中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:37:00.310

您可以改用魔术`{ignore}`文字，即如果您想指定通配符而不需要指定现有属性，例如：

```
[Route("/clients/{ignore}", "POST")]
public class ClientPostDto : IReturnVoid {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:24:23.163

那应该行得通。但是您应该保留虚拟变量，以便知道请求的内容可能重命名为 ClientIdentifier。

# jquery - jQuery根据页面加载时选择的选项设置输入值属性

> ID：15807072
> 
> 赞同：-1
> 
> 时间：2013-04-04T09:15:46.163
> 
> 标签：jquery

我需要将输入的值属性设置为在选择菜单中选择的选项

```
<select id="choice">
    <option value="10">10</option>
    <option value="20">20</option>
    <option value="50">50</option>
</select>
<input type='text' id="other" class="test" value=""/> 
```

我正在使用的 jQuery 是

```
var option = $('#choice').find(":selected").text();
$('#other').val(option);

$('#choice').change(function () {
    var selected_item = $(this).val()
    $('#other').val(selected_item);
    $('#other').attr('value', $('#choice').val())
}); 
```

这会在页面加载时设置输入值。但是 value 属性仅在 .change 事件上设置。当页面加载到当前选择选项时，我还需要设置输入的 value 属性。

[http://jsfiddle.net/peter/LaTXG/2/](http://jsfiddle.net/peter/LaTXG/2/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:18:45.390

```
$('#choice').on('change', function () {
    $('#other').val(this.value);
}).trigger('change'); 
```

[**小提琴**](http://jsfiddle.net/LaTXG/3/)

将在页面加载和更改时将文本输入值设置为选择值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T09:23:43.443

使用 setTimeout

```
setTimeout(function(){
var option = $('#choice').find(":selected").val();
$('#other').val(option);
},500); 
```

# sql - 设置 LD_BIND_NOW 变量解决 TNS Linux Error: 29: Illegal seek error

> ID：15807077
> 
> 赞同：7
> 
> 时间：2013-04-04T09:15:53.533
> 
> 标签：sql, linux, oracle, bash

我在使用 bash shell 在我的 Linux 机器上为我的 Oracle XE DB 启动 TNS Listener 时遇到了问题：

```
LSNRCTL> start
Starting /oracle/product/11.2.0/xe/bin/tnslsnr: please wait...

TNS-12537: TNS:connection closed
 TNS-12560: TNS:protocol adapter error
  TNS-00507: Connection closed
   Linux Error: 29: Illegal seek
LSNRCTL> exit 
```

我在互联网上尝试了很多不同的解决方案，最后在参考帖子后问题得到了解决 - [https://dba.stackexchange.com/questions/23308/linux-error-29-illegal-seek-in-lsnrctl-for -linux-version-11-2](https://dba.stackexchange.com/questions/23308/linux-error-29-illegal-seek-in-lsnrctl-for-linux-version-11-2)

我的情况的解决方案是：

```
export LD_BIND_NOW=1 
```

我已经在多个 Linux 机器中安装了 Oracle XE DB，但我只有 1 个机器就遇到了这个问题。这个变量是什么以及它如何解决非法搜索问题？

我的 Linux 盒子详细信息是：

```
bash-4.1$ uname -a
Linux <hostname> 2.6.39-100.5.1.el6uek.x86_64 #1 SMP Tue Mar 6 20:26:00 EST 2012 x86_64 x86_64 x86_64 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T23:45:16.200

> Controlling the operation of the dynamic loader
> 
> There are a range of environment variables that the dynamic loader will respond to. Most of these are more use to ldd than they are to the average user, and can most conveniently be set by running ldd with various switches. They include
> 
> LD_BIND_NOW --- normally, functions are not `looked up' in libraries until they are called. Setting this flag causes all the lookups to happen when the library is loaded, giving a slower startup time. It's useful when you want to test a program to make sure that everything is linked.

**In simple terms - If LD_BIND_NOW variable is set to 1, in C, C++ it causes lazy load, of libraries (i.e load libraries when required) or when its used - instead of loading during startup**

**If the software operates in mixed mode, this is set too.**

May be in your case, its a start up issue and this library was never used...!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-17T14:02:12.643

今天我遇到了同样的问题。该问题似乎是二进制`tnslsnr`可执行文件中的错误。

我的解决方案是将主机名更改为位于 listener.ora 中的 IP 地址`/oracle/product/11.2.0/xe/network/admin/listener.ora`

```
# listener.ora Network Configuration File:

SID_LIST_LISTENER =
  (SID_LIST =
    (SID_DESC =
      (SID_NAME = PLSExtProc)
      (ORACLE_HOME = /oracle/product/11.2.0/xe)
      (PROGRAM = extproc)
    )
  )

LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC_FOR_XE))
      (ADDRESS = (PROTOCOL = TCP)(HOST = 127.0.0.1)(PORT = 1521))
    )
  )

DEFAULT_SERVICE_LISTENER = (XE) 
```

如其他答案中所述，调整文件`/etc/hosts`并覆盖 localhost 语句不起作用。

我不知道是否建议使用 IP 地址而不是主机名，但对我来说，它确实有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-05T12:03:39.723

在`/etc/hosts`文件中包含以下行：

```
127.0.0.1 localhost.localdomain localhost 
```

# java - Java 方法打印其他内容

> ID：15807081
> 
> 赞同：0
> 
> 时间：2013-04-04T09:16:05.867
> 
> 标签：java, methods, printing, println

我正在使用实例作为参数在 Java 上为分数操作编写一些方法，但由于某种原因，当我尝试从另一个类打印结果时，它会打印出类似“(PackageName).(ClassName)@1497b7b1”的内容。这只发生在“Suma”、“Resta”、“División”、“Multiplicación”方法中。这是代码，以便您更好地理解：

```
package fracciones;

public class Fraction {

    private int Numerador;
    private int Denominador;

    public Fraction() {
        Numerador = 0;
        Denominador = 1;
    }

    public Fraction(int Num, int Den) {
        Numerador = Num;
        Denominador = Den;
    }

    public int getNumerador() {
        return Numerador;
    }

    public int getDenominador() {
        return Denominador;
    }

    public Fraction Suma(Fraction Suma) {
        int Num = Suma.getNumerador();
        int Den = Suma.getDenominador();

        Fraction c = new Fraction();

        c.Numerador = Numerador * Den + Denominador * Num;
        c.Denominador = Denominador * Den;
        return c;
    }

    public Fraction Resta(Fraction Resta) {
        int Num = Resta.getNumerador();
        int Den = Resta.getDenominador();

        Fraction c = new Fraction();

        c.Numerador = Numerador * Den - Num * Denominador;
        c.Denominador = Denominador * Den;
        return c;
    }

    public Fraction Multiplicación(Fraction Multiplicación) {
        int Num = Multiplicación.getNumerador();
        int Den = Multiplicación.getDenominador();

        Fraction c = new Fraction();

        c.Numerador = Numerador * Num;
        c.Denominador = Denominador * Den;
        return c;
    }

    public Fraction División(Fraction División) {
        int Num = División.getNumerador();
        int Den = División.getDenominador();

        Fraction c = new Fraction();

        c.Numerador = Numerador * Den;
        c.Denominador = Denominador * Num;
        return c;
    }

    public String ImpresiónFraction() {
        String Text = Numerador + "/" + Denominador;
        return Text;
    }

    public Float ImpresiónFloat() {
        Float Float = new Float(Numerador);
        Float Numero = Float.floatValue() / Denominador;
        return Numero;
    }

} 
```

和这个用于打印的类：

```
package fracciones;

public class FraccionCalc {

    public static void main(String[] args) {
        Fraction Una = new Fraction(1, 2);
        Fraction Dos = new Fraction(8, 16);

        System.out.println(Una.Resta(Dos));

        System.out.println(Una.ImpresiónFloat());

    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T09:17:37.327

如果你想打印一个对象，你需要在你的类中重写和定义`toString()`自己- 否则你只会打印对象哈希码。`Fraction`

例如，以下内容可能类似于您想要的内容：

```
@Override
public String toString() {
    return "Fraction [" + Numerador + "/" + Denominador + "]";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T09:18:21.720

`Fraction`需要实现该`toString()`方法，因为它当前正在使用[`Object.toString()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#toString%28%29)返回：

```
getClass().getName() + '@' + Integer.toHexString(hashCode()) 
```

示例实现：

```
class Fraction
{
    @Override public String toString()
    {
        return Numerador + "/" + Denominador;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T09:21:55.753

`Fraction`在类中添加此方法

```
 @Override
    public String toString() {
        return "Numerador: "+Numerador+", "+"Denominador: "+Denominador;
    } 
```

PS：写变量名和方法名时使用**camel case ，写类名时使用****pascal case**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T09:19:15.733

您需要覆盖[`toString()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29)类中的方法。`System.out.println()`使用它来获取对象的文本表示。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-04T09:19:46.233

您正在打印出对对象的引用。如果要获取实际的整数值，则必须提供 getter 方法，或者将变量公开并通过 Una.Num 等直接打印出来……

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-04T09:20:30.760

尝试这样做

```
System.out.println(Una.Resta(Dos).getNumerador() + Una.Resta(Dos).getDenominador()); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-04T09:22:29.127

Una.Resta() => 返回 Fraction 类的对象。System.out.println => 需要一个字符串来打印。所以它必须通过调用 Object 类的 toString() 方法将对象转换为字符串。所以你必须在 Fraction 类中实现这个方法来格式化你想要打印的字符串。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-04T09:19:36.223

您的方法返回类型 Fraction，这将需要实现 toString() 方法，该方法可用于控制对象的字符串表示。

或者，您可以将方法更改为具有字符串类型的返回值。

# python - Facebook 无法在 PySide qwebview 中加载

> ID：15807085
> 
> 赞同：0
> 
> 时间：2013-04-04T09:16:17.290
> 
> 标签：python, python-3.x, ssl, pyside, qwebview

我一直在尝试使用 PySide 和 QWebView 实现浏览器。但是浏览器不会加载 www.facebook.com。我可以加载其他 https 网站，例如 google，所以我猜 SSL 工作正常。使用[http://code.google.com/p/foobrowser/](http://code.google.com/p/foobrowser/)或 PySide 附带的示例浏览器时，同样的问题仍然存在。问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T15:23:48.337

有同样的问题 - 在我的情况下，它与 ssl 错误有关。处理*sslErrors*信号解决了这个问题：

```
m_view = new QWebView(parent);
connect(
  m_view->page()->networkAccessManager(),
  SIGNAL(sslErrors(QNetworkReply*, const QList<QSslError> & )),
  this, 
  SLOT(sslErrorHandler(QNetworkReply*, const QList<QSslError> & ))
); 
```

和插槽：

```
void myClass::sslErrorHandler(QNetworkReply* qnr, const QList<QSslError> & errlist)
{
    qnr->ignoreSslErrors();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T13:13:07.373

[POODLE](http://en.wikipedia.org/wiki/POODLE)漏洞被发现后，一些网站放弃了 SSLv3。

我在 Windows 8.1 上的 PySide (1.1.1) 版本具有`PySide.QtNetwork.QSsl.SslProtocol.SslV3`默认协议。

要解决此问题，您需要更改`QSslConfiguration`以`NetworkAccessManager`使用 TLS。

```
from PySide.QtNetwork import QNetworkAccessManager, QNetworkRequest, QNetworkReply, QSslConfiguration, QSsl

class HtmlFrame(QFrame):
  def __init__(self, parent=None):
    QFrame.__init__(self, parent)

    self.webview = QWebView()

    # Developer extras settings to debug Webview
    # QWebSettings.globalSettings().setAttribute(QWebSettings.WebAttribute.DeveloperExtrasEnabled, True)

    self._network_manager = FNetworkManager()
    self.webview.page().setNetworkAccessManager(self._network_manager)
    url = "https://www.facebook.com"
    self.webview.load(QUrl(url))

class FNetworkManager(QNetworkAccessManager):
  def __init__(self):
    QNetworkAccessManager.__init__(self)
    # bind a custom virtual function to createRequest
    self.createRequest = self._create_request

  def _create_request(self, operation, request, data):
    ssl_config = QSslConfiguration.defaultConfiguration()
    ssl_config.setProtocol(QSsl.TlsV1)
    request.setSslConfiguration(ssl_config)

    reply = QNetworkAccessManager.createRequest(self, operation, request, data)
    return reply 
```

归功于[https://github.com/intericho/](https://github.com/integricho/)和[https://github.com/intericho/path-of-a-pyqter/](https://github.com/integricho/path-of-a-pyqter/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-09T18:03:35.057

在 PySide qwebview 中加载 Facebook 是没有问题的，可能是你平台的问题。

```
#!/usr/bin/env python3
# -*- coding:utf-8 -*-

import sys
import platform
import PySide
from PySide.QtCore import QUrl
from PySide.QtGui import QApplication
from PySide.QtWebKit import QWebView

print(PySide.__version__) # output: 1.1.1
print(PySide.QtCore.__version__) # output: 4.8.3
print(platform.platform()) # output: Linux-3.5.0-36-generic-x86_64-with-Ubuntu-12.10-quantal

app = QApplication(sys.argv)
web = QWebView()
web.load(QUrl("https://www.facebook.com"))
web.show()
sys.exit(app.exec_()) 
```

高温高压

# php - 我在我的博客页面上收到有关时区设置的警告

> ID：15807087
> 
> 赞同：2
> 
> 时间：2013-04-04T09:16:21.900
> 
> 标签：php, wordpress, date, warnings

我正在使用简码在我的博客页面上显示[PHP 日期选择器。](http://www.triconsole.com/php/calendar_datepicker.php)但低于警告。

`Warning: date() [function.date]: It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected 'Australia/Perth' for 'WST/8.0/no DST' instead in /home/xxx/public_html/wp-content/plugins/xxx/calendar/calendar_form.php on line 48`

我的服务器 PHP 版本是：**5.3.19**

我如何摆脱这个警告？

我试图隐藏 PHP 警告但没有成功，仍然收到警告。

`error_reporting(E_ALL^ (E_WARNING | E_NOTICE));`

我也尝试将时区设置为：

`date_default_timezone_set('Australia/Perth');`

但没有运气。

现在需要你们的帮助。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:19:42.807

尝试这个：

```
 date_default_timezone_set("Australia/Perth"); 
```

或者

```
date.timezone = Australia/Perth 
```

使用`date_default_timezone_get();`而不是`date();`

# android - 如何在 Android 中获取设备 ID？

> ID：15807090
> 
> 赞同：1
> 
> 时间：2013-04-04T09:16:23.987
> 
> 标签：android, webview, device

我想在我的 Android 应用程序中有两件事。

获取设备 id，然后使用此 id 打开网页。例如`myserver.com/deviceId`

我的主要 java 类如下所示：

```
package es.unican.CityInfo;

import android.os.Bundle;
import android.app.Activity;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.provider.Settings.Secure;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); 

        WebView mywebview = (WebView) findViewById(R.id.webview);
        mywebview.loadUrl("http://www.google.com");

        //enabling Javascript
        WebSettings webSettings = mywebview.getSettings();
        webSettings.setJavaScriptEnabled(true);

        //opening links in my webview. if you delete this line , any link pressed will cause the browser to start
        mywebview.setWebViewClient(new WebViewClient());

    }

} 
```

为了获得设备ID，我读到我应该做这样的事情：

```
import android.provider.Settings.Secure;

private String android_id = Secure.getString(getContext().getContentResolver(),
                                                        Secure.ANDROID_ID); 
```

但是我不明白应该在哪里放置 android_id 代码，因为我总是出错。

错误是：

```
Multiple markers at this line:

- The method getcontext() is undefined for the type MainActivity
- Illegal modifier for parameter android_id; only final is permitted 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:23:25.637

```
private String android_id; // declared on top of class

android_id = Secure.getString(getContentResolver(), Secure.ANDROID_ID); // called inside onCreate 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T09:23:59.943

用这个替换你的错误行：

```
String android_id = Secure.getString(this.getContentResolver(),Secure.ANDROID_ID); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T09:25:53.707

删除私有修饰符，也不要使用 getContext() 而是使用 getApplicationContext() 或简单地 getContentResolver()

在您的 onCreate() 方法中：

```
String android_id = Secure.getString(getContentResolver(),Secure.ANDROID_ID); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T09:23:38.810

使用这条线

```
 String android_id = Secure.getString(this.getContentResolver(), Secure.ANDROID_ID); 
```

由于您在方法内声明字符串，因此它将在其中限定范围。您可以使用此获取 Activity 上下文。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-04T09:25:53.687

更改代码中的行：

```
 getContext to getBaseContext 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-02T23:54:36.197

```
import android.provider.Settings.Secure;

    String android_id = Secure.getString(getApplicationContext().getContentResolver(),Secure.ANDROID_ID); 
```

# jquery - 使用 datepicker 后文本框和 div 文本的值未正确更新

> ID：15807092
> 
> 赞同：1
> 
> 时间：2013-04-04T09:16:24.317
> 
> 标签：jquery, html, user-interface

我遇到了一个问题，我使用 jQuery UI 的 Datepicker 用已设置的日期填充几个字段。

基本上我想做的是在选择日期之后，更新一个文本字段以显示该日期的日期（这应该是它应该的工作，我相信无论如何），然后也用选择的日期更新一个 div（这只是为了测试目的，我将来还有很多事情要做，但在我得到这个排序之前不能这样做）。但由于某种原因，它不会自动更新。我需要把它放在点击函数中来刷新数据吗？

继承人的代码：

HTML：

```
<div id="widgetContainer">Date:
    <input type="text" id="datepicker" />
    <br />
    <input type="text" id="selected_day" size="30" value="" />
    <br />
    <select name="times">
        <option value="12pm" selected="selected">12pm</option>
        <option value="1pm">1pm</option>
        <option value="2pm">2pm</option>
        <option value="3pm">3pm</option>
        <option value="4pm">4pm</option>
        <option value="5pm">5pm</option>
        <option value="6pm">6pm</option>
        <option value="7pm">7pm</option>
        <option value="8pm">8pm</option>
        <option value="9pm">9pm</option>
        <option value="10pm">10pm</option>
        <option value="11pm">11pm</option>
    </select>
    <div id="result">Result:</div>
</div> 
```

jQuery：

```
$(document).ready(function () {
    $(function () {
        $("#datepicker").datepicker({
            altField: "#selected_day",
            altFormat: "DD"
        });
        $('#selected_day').change(function () {
            var day = this.val();
            $('#result').text('Result:' + day);
        });
    });
}); 
```

和一个小提琴 - [http://jsfiddle.net/andyjh07/c3u5B/](http://jsfiddle.net/andyjh07/c3u5B/)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:29:09.140

当您使用 script 更新 input 的值时，不会触发 change 事件，因此您需要自己触发它。您可以使用 datepicker 中的事件来管理它：

```
 $("#datepicker").datepicker({
        altField: "#selected_day",
        altFormat: "DD",
        onSelect:function(){
            $('#selected_day').change()
        }
    }); 
```

演示：http: [//jsfiddle.net/c3u5B/12/](http://jsfiddle.net/c3u5B/12/)

不确定您是否真的需要 alt 字段上的更改处理程序，并且可以从 datepicker 中进行更新

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:26:39.980

`change`事件未触发的原因`selected_day`是该值以编程方式更改。

您需要在元素本身上触发`change`事件，如下所示：`datepicker`

```
$("#datepicker").datepicker({
  altField: "#selected_day",
  altFormat: "DD"
}).on('change', function() {
  var day = $('#selected_day').val();
  $('#result').text('Result: ' + day);
}); 
```

### [这是一个小提琴](http://jsfiddle.net/c3u5B/11/)

# ruby-on-rails - 如何使用 ruby 文件中的 linux 'mail' 命令发送邮件？

> ID：15807095
> 
> 赞同：1
> 
> 时间：2013-04-04T09:16:26.227
> 
> 标签：ruby-on-rails, ruby

在下面的代码中，我必须发送一封关于进程状态的电子邮件，无论是完成、错误还是超时......

```
 def check_for_forecasts
   wait_until_time = Time.now + timeout.minutes
   loop do
       RAILS_DEFAULT_LOGGER.info "Checking if process has finished"
     if find_token != 0
       update_completion_status
       RAILS_DEFAULT_LOGGER.info "Process has finished"
       break
     elsif find_error != 0
       update_timed_out_field
       RAILS_DEFAULT_LOGGER.info "Process has errored"
       break
     elsif DateTime.now > wait_until_time
       update_timed_out_field
       RAILS_DEFAULT_LOGGER.info "Process has timed out"
       break
     else
       RAILS_DEFAULT_LOGGER.info "Waiting for Process to finish"
       sleep(60) # if it hasn't completed then wait 1 min and try again.
     end
    end
  end 
```

一般来说，我们只在 .sh 文件而不是 .rb 文件中使用 linux 'mail' 命令。下面是我们如何编写“邮件”命令以在 .sh 文件中发送邮件。

```
 mail -s "the process has been finished" abc@xyz.com<<EOM
      The process has finished successfully.    
EOM 
```

有没有办法在 .rb 文件中使用简单的邮件命令？还是我必须为此安装任何宝石？

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:21:38.187

从 ruby​​ 做同样的事情的一个非常丑陋但有用的方法：

```
to = "abc@xyz.com"
subject = "the process has been finished"
content = "The process has finished successfully."
`mail -s "#{subject}" #{to}<<EOM
  #{content}
EOM` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T09:24:50.403

您可以在 Ruby 中使用反引号来运行命令行指令。所以你想要的是这样的：

```
`mail -s "the process has been finished" abc@xyz.com<<EOM
  The process has finished successfully.    
EOM` 
```

# java - 如何在jsp中添加消息框而不是新窗口

> ID：15807101
> 
> 赞同：1
> 
> 时间：2013-04-04T09:16:33.890
> 
> 标签：java, javascript, jsp

我试过的是

```
First.jsp
   <form name = "button" style="VISIBILITY: visible">
                    <table cellspacing=5 cellpadding=5 bgcolor="lightblue" colspan=2 rowspan=2 align="center">
     <TR> <TD> <INPUT TYPE="button" onclick="sub1();hide();" VALUE="DOWNLOAD"></TD>
    <script>
     function popup()
                    {
                        popupWindow = window.open('delete','name','width=300,height=100');
                        popupWindow.focus();
                        window.close();     
                    } 
```

删除.jsp

```
<%
String Pdfpath=   session.getAttribute("pdfpath").toString();
 File f =new File(Pdfpath);

 Boolean flag=false;
  if(f.exists())
  {
    flag=f.delete();
  }
  else 
  {
    out.println("File not found to delete");
  }

%>
<html>
<head>
<title>Delete file in java</title>
</head>

<body>
<%
 if(flag==true)
 {
  out.println("File Has Bean deleted successfully");
 }
 else
 {
  out.println("Error: Unable To Delete The File");
 }
%>
</body>
</html> 
```

从我的第一个 jsp，我通过按钮单击传递一些路径到另一个 delete.jsp。那个 jsp 删除我目录上的文件并给出一条消息。我希望该消息在该窗口的同时出现在一个消息框中不应该来。

我不喜欢在 javascript 函数中添加所有删除代码，所以我要使用另一个 jsp。是否可以隐藏窗口并仅在 delete.jsp 页面中显示确认消息框。我需要一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:45:35.340

您可以将以下代码用作 delete.jsp ;)

```
<%
    String Pdfpath = session.getAttribute("pdfpath").toString();
    File f = new File(Pdfpath);

    Boolean flag = false;
    if (f.exists()) {
        flag = f.delete();
    } else {
        out.println("File not found to delete");
    }
%>
<html>
    <head>
        <title>Delete file in java</title>
    </head>

    <body>
        <%
            String message = "";
            if (flag == true) {
                message = "File Has Bean deleted successfully";
            } else {
                message = "Error: Unable To Delete The File";
            }
        %>
        <script type="text/javascript">
            alert('<%=message%>');
        </script>
    </body>
</html> 
```

# c++ - 为什么这个矩阵旋转在这个 3D 点上失败了？

> ID：15807108
> 
> 赞同：0
> 
> 时间：2013-04-04T09:16:54.137
> 
> 标签：c++, matrix, rotation, point

应用于对象的 3D 点的这种旋转会产生“波浪比例效果”而不是旋转。这段代码在某处有问题吗？

//----------- Init Rot Matrix (with float rotX=45, rotY=45, rotZ=45) -------------

```
boost::numeric::ublas::vector<float> Axisboost (4);
Axisboost(0) = 0;
Axisboost(1) = 0;
Axisboost(2) = 0;
Axisboost(3) = 1;

//RotX Matrix
Axisboost (1) = 1;
boost::numeric::ublas::matrix<double> mRotAXIS_X = GeoMath::GetSingletonPtr()->FromAxisAngle4(Axisboost, rotX*M_PI/180.);

//RotY Matrix
Axisboost (1) = 0;//(cancel previous axis)
Axisboost (2) = 1;
boost::numeric::ublas::matrix<double> mRotAXIS_Y = GeoMath::GetSingletonPtr()->FromAxisAngle4(Axisboost, rotY*M_PI/180.);

//RotZ Matrix
Axisboost (2) = 0;//(cancel previous axis)
Axisboost (3) = 1;
boost::numeric::ublas::matrix<double> mRotAXIS_Z = GeoMath::GetSingletonPtr()->FromAxisAngle4(Axisboost, rotZ*M_PI/180.); 
```

[...]

```
//--------- Try to apply rotation matrix on a Cube --------------
boost::numeric::ublas::matrix<double> coordsOrig(4, 4);
coordsOrig(3,3)=1;

float* ptr_pPosX, *ptr_pPosY, *ptr_pPosZ;
float* pPos = static_cast<float*>(vbuf->lock(Ogre::HardwareBuffer::HBL_DISCARD));//ptr to points of cube

for(int i=0; i<72; i+=3){ //72 = 3coords * 2pts * 12lines
     //Get coordinates of 1 point
     ptr_pPosX=pPos;
     coordsOrig(0,0)=(double)*pPos++;
     ptr_pPosY=pPos;
     coordsOrig(1,1)=(double)*pPos++;
     ptr_pPosZ=pPos;
     coordsOrig(2,2)=(double)*pPos++;

     //Try to rotate 1 point around X, Y and Z axis       
     boost::numeric::ublas::matrix<double> afterRotX = boost::numeric::ublas::prod(coordsOrig, mRotAXIS_X);

     boost::numeric::ublas::matrix<double> afterRotXY = boost::numeric::ublas::prod(afterRotX, mRotAXIS_Y);

     boost::numeric::ublas::matrix<double> afterRotXYZ = boost::numeric::ublas::prod(afterRotXY, mRotAXIS_Z);

     //Set rotation result of 1 point
     *ptr_pPosX = (float)afterRotXYZ(0,0);
     *ptr_pPosY = (float)afterRotXYZ(1,1);
     *ptr_pPosZ = (float)afterRotXYZ(2,2);  
} 
```

# java - java获取下个月的最后一天

> ID：15807118
> 
> 赞同：5
> 
> 时间：2013-04-04T09:17:36.180
> 
> 标签：java

我有变量 nowDate 类型的日期，我想设置变量 nextDate 包含下个月的最后一天。

例如：nowDate = 2013-04-16

所以 nextDate 将包含 2013-05-31

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T09:26:47.727

类似于 Xavi，但少了一行代码 :-)

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.MONTH, 1);
cal.set(Calendar.DAY_OF_MONTH, cal.getActualMaximum(Calendar.DAY_OF_MONTH)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-04T09:28:56.490

尝试

```
private static Date getNextDate(Date nowDate) {
    Calendar c = Calendar.getInstance();
    c.setTime(nowDate);
    c.add(Calendar.MONTH, 1);
    c.set(Calendar.DATE, c.getMaximum(Calendar.DATE));
    Date nextDate = c.getTime();
    return nextDate;
} 
```

用法：

```
 Date nowDate = new Date();
    Date nextDate = getNextDate(nowDate); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-04T09:22:42.533

您可以尝试`Calendar`提前两个月设置第一天，然后减去一天：

```
Calendar c = Calendar.getInstance();
c.add(Calendar.MONTH, 2);
c.set(Calendar.DAY_OF_MONTH, 1);
c.add(Calendar.DATE, -1);
Date nextDate = c.getTime(); 
```

正如其他人已经指出的那样，您也可以只添加一个月，并用于[`Calendar.getActualMaximum()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#getActualMaximum%28int%29)设置下个月的最后一天。

```
Calendar c = Calendar.getInstance();
c.add(Calendar.MONTH, 1);
c.set(Calendar.DAY_OF_MONTH, c.getActualMaximum(Calendar.DAY_OF_MONTH));
Date nextDate = c.getTime(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-04-19T08:19:30.493

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-04T09:25:24.257

使用[joda](http://joda-time.sf.net)并[抄袭 sinarf](http://blog.sinarf.org/2008/03/last-day-of-month-in-java-with-joda.html)：

```
DateTime dt = new DateTime().plusMonths(1);
DateTime lastJoda = dt.dayOfMonth().withMaximumValue();
Date last = lastJoda.toDate();
System.out.println(last.toString()); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-04T09:28:03.053

一种方法是将 2 个月增加到您当前的月份并将日期设置为 1st。之后将日期减 1，它将为您提供月份的最后一天。这将自动处理闰年、30 天、31 天、29 天和 28 天的月份。下面的程序

```
public class LastDayofNextMonth {

    public static void main(String args[])
    {

        Calendar cal = Calendar.getInstance();
        cal.set(2013,Calendar.APRIL, 14) ;
        cal.set(Calendar.MONTH, cal.get(Calendar.MONTH)+2);
        cal.set(Calendar.DATE,1);
        cal.add(Calendar.DATE,-1);
        System.out.println(cal.getTime().toString());

    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-04T09:29:41.663

使用**[日历](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)**：

首先将日历设置为下个月。采用：`cal.add(Calendar.MONTH, 1);`

然后使用**[getActualMaximum](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#getActualMaximum%28int%29)**计算您在上一步中设置的月份的最后一天。

```
import java.util.Calendar; 
import java.util.Date;

public class Main{

    public static void main(String ar[]){
        Calendar cal = Calendar.getInstance();

        cal.set(Calendar.DATE, cal.getActualMaximum(Calendar.DATE));
        cal.add(Calendar.MONTH, 1);
        Date lastDateOfNextMonth = cal.getTime();
        System.out.println(lastDateOfNextMonth ); 

    }
} 
```

**[IDEONE 演示](http://ideone.com/cXAUMc)**

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-08T21:23:23.187

我们有很多很好的答案，但是以上所有答案都有如下代码：

```
cal.add(Calendar.MONTH, 1); 
```

这段代码会产生一些混乱，因为月份从 0 开始，所以 1 代表二月。

（编辑： add() 函数中的整数不是月份数（1=二月）而是要添加的月份数）

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-04-04T09:27:53.997

您可以执行以下操作来获取本月的最后一天

```
Calendar calendar = Calendar.getInstance();   
calendar.setTime(date);   
calendar.getActualMaximum(Calendar.DAY_OF_MONTH); 
```

# regex - 如何为消息创建新的验证规则？（代码点火器）

> ID：15807120
> 
> 赞同：0
> 
> 时间：2013-04-04T09:17:37.947
> 
> 标签：regex, codeigniter

我找不到能够准确处理我需要的现有规则。

如何在[Codeigniter中创建新的](http://ellislab.com/codeigniter)[规则引用](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#rulereference)，以便：

如果表单元素包含除字母数字字符、下划线、破折号、**空格**或**句号**（句点）以外的任何内容，则返回 FALSE。

该规则旨在用于验证联系表单的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:43:55.393

您只需要一个自定义回调 - 并在其中放置一个正则表达式来执行您想要的任何规则。您可以根据需要进行修改。

```
$this->form_validation->set_rules('description', 'Description', 'callback_description_check');

public function direction_check($str)
{
    return strip_tags($text, '<p><a>'); 
} 
```

参考：- [Codeigniter form_validation 创建自定义规则/过滤器](https://stackoverflow.com/questions/10840382/codeigniter-form-validation-create-custom-rule-filter)

# linux - 两台 linux 机器之间的 Telnet 文件传输

> ID：15807122
> 
> 赞同：26
> 
> 时间：2013-04-04T09:17:41.047
> 
> 标签：linux, telnet, file-transfer

我想从一台具有 IP 假设为“192.168.2.25”的 Linux 机器发送文件到另一台作为服务器“192.168.2.110”的 Linux 机器

我怎样才能通过使用 Telnet 命令来做到这一点？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-11-05T16:13:21.417

一个简单的选择是使用 netcat (nc)。这在 ssh 和 ftp 等服务已关闭的精简 Linux 系统上特别有用。

在目标机器上运行以下命令：`nc -l -p 1234 > out.file`

在源机器上运行以下命令：`nc -w 3 <dest-ip-adr> 1234 < out.file`

有关更多详细信息，例如，请[查看此处](http://nakkaya.com/2009/04/15/using-netcat-for-file-transfers/)。

还有适用于 Windows 的 netcat 实现，例如[ncat](http://nmap.org/ncat/)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-05-12T13:06:03.510

虽然仅使用 telnet 可能无法实现，但可以使用 telnet 和 netcat。上面的一些示例只是使用 netcat 引用的，但有时我在一台仍在生产中的旧机器上使用 telnet 但没有 netcat。在这种情况下，您可以将 netcat 设置为在较新的远程计算机上侦听并将文件 telnet 到它。

在较新的远程机器上：

```
netcat -l <PORT> > OUTPUT.FILE 
```

在旧的仅 telnet 机器上：

```
cat FILE | telnet REMOTE-HOST PORT 
```

请注意，这适用于文本文件。如果您有某种二进制文件，则需要在两端进行进一步操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T09:27:22.990

Telnet 只是给你一个远程终端会话。最好的办法是 telnet，在编辑器中打开一个新文件，然后从本地计算机复制/粘贴文本。

要复制文件，请使用 rsync、scp、rcp 或 ftp 之类的东西。

# c# - 在中继器中隐藏重复的字符串

> ID：15807125
> 
> 赞同：0
> 
> 时间：2013-04-04T09:17:50.357
> 
> 标签：c#, gridview, sql-order-by, repeater, databound-controls

实际上我正在使用中继器控件来显示一些报告。

```
 <asp:Repeater id="cdcatalog" runat="server">
<HeaderTemplate>
<table border="1" width="500">
<tr>
<th>Cost Code</th>
<th>Total</th>
<th>Price</th>
</tr>
</HeaderTemplate>
<ItemTemplate>
<tr>
<td><%#Eval("Cost_Code")%> </td>
<td><%#Eval("Total")%> </td>
<td><%#Eval("Price")%> </td>
</tr>
</ItemTemplate>
<FooterTemplate>
</table>
</FooterTemplate>
</asp:Repeater> 
```

下面是我的 sql 查询

```
ALTER Proc [dbo].[RP_ByCost_Code]
@Date1 datetime,
@Date2 datetime

as
select Cost_Code , Total , (Total*12) as Price from mtblLog_Book where     Vehicle_Booking_Date between @Date1 and @Date2 order BY Cost_Code 
```

报告如下格式

![在此处输入图像描述](https://i.stack.imgur.com/vH2bM.jpg)

看到有重复的项目来了。让**ENE-Direct**我想为每个 ENE-Direct 行只取一次，它应该为所有成本代码显示一次

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:05:39.863

您可以使用嵌套`Repeater`的 LINQ`GroupBy`方法来实现此目的。

我不确定您的 DataSource 以及您如何绑定`cdcatalog`中继器，因此在此示例中，我使用的是`CatalogItem`s 列表。这是`CatalogItem`课程：

```
public class CatalogItem
{
    public string Cost_Code { get; set; } 
    public int Total { get; set; }
    public decimal Price { get; set; } 
} 
```

您将需要一个页面级列表：

```
 List<CatalogItem> items; 
```

基本上，您会将外部中继器绑定到按 . 分组的列表`Cost_Code`。然后，内部中继器将绑定到`CatalogItem`s 的过滤列表。像这样：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        items = new List<CatalogItem>();
        items.Add(new CatalogItem() { Cost_Code = "ENE-Direct", Total = 33, Price = 196 });
        items.Add(new CatalogItem() { Cost_Code = "ENE-Direct", Total = 8, Price = 96 });
        items.Add(new CatalogItem() { Cost_Code = "ENE-Direct", Total = 15, Price = 1260 });
        items.Add(new CatalogItem() { Cost_Code = "ENE-Direct", Total = 10, Price = 228 });
        items.Add(new CatalogItem() { Cost_Code = "ENE-Direct", Total = 125, Price = 60 });
        items.Add(new CatalogItem() { Cost_Code = "IND038301", Total = 10, Price = 258 });
        items.Add(new CatalogItem() { Cost_Code = "IND038302", Total = 20, Price = 358 });
        items.Add(new CatalogItem() { Cost_Code = "IND038303", Total = 30, Price = 458 });
        items.Add(new CatalogItem() { Cost_Code = "IND038304", Total = 40, Price = 558 });
        this.cdcatalog.DataSource = items.GroupBy(c => c.Cost_Code).Select(c => new CatalogItem() { Cost_Code = c.Key });
        this.cdcatalog.DataBind();
    }

    protected void cdcatalog_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
        {
            Repeater rptItems = (Repeater)e.Item.FindControl("rptItems");
            CatalogItem catalogGroup = (CatalogItem)e.Item.DataItem;
            rptItems.DataSource = items.Where(i => i.Cost_Code == catalogGroup.Cost_Code);
            rptItems.DataBind();

        }
    } 
```

ascx 代码如下所示：

```
 <asp:Repeater ID="cdcatalog" runat="server" OnItemDataBound="cdcatalog_ItemDataBound">
        <HeaderTemplate>
            <table border="1" width="500">
                <tr>
                    <th>Cost Code</th>
                    <th>Total</th>
                    <th>Price</th>
                </tr>
        </HeaderTemplate>
        <ItemTemplate>
            <tr>
                <td><%#Eval("Cost_Code")%> </td>
            </tr>
            <asp:Repeater ID="rptItems" runat="server">
                <ItemTemplate>
                    <tr>
                        <td></td>
                        <td><%#Eval("Total")%> </td>
                        <td><%#Eval("Price")%> </td>
                    </tr>
                </ItemTemplate>
            </asp:Repeater>
        </ItemTemplate>
        <FooterTemplate>
            </table>
        </FooterTemplate>
    </asp:Repeater> 
```

最终输出将如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/TH5XB.png)

# mysql - 优化 MySQL 查询以避免“使用临时”和“使用文件排序”

> ID：15807131
> 
> 赞同：0
> 
> 时间：2013-04-04T09:18:02.253
> 
> 标签：mysql, optimization, query-optimization

我知道那里有一千个类似的问题，但我已经花了两周时间试图为这个查询找到一个真正的解决方案。

此查询来自销售点程序。此查询与用户选择他需要的报告（期间、总计等）以及是否需要分组结果的表单相关。

这很不方便。查询是在 VB.NET 中生成的，我的意思是，通过代码，它会根据用户的选择（不同的总数、期间、组等）而有所不同，所以有了这个问题的解决方案，我应该能够继续“创建" 通过代码形式的所有其他查询。

在这种情况下，此查询是按家庭分组的总计查询。

大多数时间 (>99%) 都浪费在发送数据上（显示查询的配置文件 #）

表格如下：

```
CREATE TABLE `product` (
  `idProduct` smallint(5) unsigned NOT NULL AUTO_INCREMENT,
  `idFamily` tinyint(3) unsigned DEFAULT NULL,
  `Codigo` char(10) NOT NULL,
  `Nombre` char(70) DEFAULT NULL COMMENT 'Nombre corto',
-- five more integer columns
  PRIMARY KEY (`idProduct`),
  KEY `fk_p_idFamily` (`idFamily`),
  CONSTRAINT `fk_p_idFamily` FOREIGN KEY (`idFamily`) REFERENCES `family`  (`idFamily`),
) ENGINE=InnoDB AUTO_INCREMENT=19420 DEFAULT CHARSET=latin1 PACK_KEYS=0;

CREATE TABLE `family` (
  `idFamily` tinyint(3) unsigned NOT NULL AUTO_INCREMENT,
  `Nombre` char(30) NOT NULL,
  `Descripcion` char(255) DEFAULT NULL,
  `Borrado` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`idFamily`)
) ENGINE=InnoDB AUTO_INCREMENT=34 DEFAULT CHARSET=latin1 PACK_KEYS=0

CREATE TABLE `document` (
`idDocument` tinyint(3) unsigned NOT NULL AUTO_INCREMENT,
`Nombre` char(25) NOT NULL,
`Descripcion` char(100) DEFAULT NULL,
`Borrado` tinyint(1) NOT NULL DEFAULT '0',
`NoComputa` tinyint(1) NOT NULL DEFAULT '0',
  `Rectifica` tinyint(1) NOT NULL DEFAULT '0',
  `CalculoSumatorioPVP` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`idDocument`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=latin1 PACK_KEYS=0

CREATE TABLE `soldproduct` (
  `idProduct` smallint(5) unsigned NOT NULL,
  `idSale` int(10) unsigned NOT NULL,
  `PrecioCompra` decimal(7,2) NOT NULL ,
  `PrecioVenta` decimal(7,2) NOT NULL ,
  `DtoProd` decimal(7,4) DEFAULT NULL ,
  `BrutoUd` decimal(7,2) NOT NULL ,
  `PVPUd` decimal(7,2) NOT NULL ,
  `Cantidad` decimal(9,3) DEFAULT NULL ,
  PRIMARY KEY (`idProduct`,`idSale`),
  KEY `fk_pv_idSale` (`idSale`),
  CONSTRAINT `fk_pv_idProduct` FOREIGN KEY (`idProduct`) REFERENCES `product` (`idProduct`),
  CONSTRAINT `fk_pv_idSale` FOREIGN KEY (`idSale`) REFERENCES `sales` (`idSale`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 PACK_KEYS=0

CREATE TABLE `sales` (
  `idSale` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `idDocument` tinyint(3) unsigned NOT NULL,
  `idEstadoVenta` tinyint(3) unsigned NOT NULL,
  `idCliente` smallint(5) unsigned NOT NULL,
  `idFormaPago` tinyint(3) unsigned NOT NULL,
  `idEmpleado` tinyint(3) unsigned NOT NULL ,
  `idTienda` tinyint(3) unsigned DEFAULT NULL,
  `idTipoVenta` tinyint(3) unsigned NOT NULL,
  `FechaVenta` datetime DEFAULT NULL COMMENT 'Fecha de Venta',
  `PrecioCompraTotal` decimal(10,2) DEFAULT NULL,
  `IVA` decimal(7,4) DEFAULT NULL,
  -- ten more decimal columns
  -- five more datetime columns
  -- ten more char columns
  `Borrado` tinyint(1) NOT NULL DEFAULT '0' ,
  `Historia` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`idVenta`),
  KEY `fk_v_idTienda` (`idTienda`),
  KEY `fk_v_idCliente` (`idCliente`),
  KEY `fk_v_idEmpleado` (`idEmpleado`),
  KEY `fk_v_idTipoVenta` (`idTipoVenta`),
  KEY `fk_v_idFormaPago` (`idFormaPago`),
  KEY `fk_v_idDocument` (`idDocument`),
  KEY `fk_v_idEstadoVenta` (`idEstadoVenta`),
  KEY `idx_v_FechaVenta` (`FechaVenta`),
  CONSTRAINT `fk_v_idCliente` FOREIGN KEY (`idCliente`) REFERENCES `cliente` (`idCliente`),
  CONSTRAINT `fk_v_idDocument` FOREIGN KEY (`idDocument`) REFERENCES `document` (`idDocument`),
  CONSTRAINT `fk_v_idEmpleado` FOREIGN KEY (`idEmpleado`) REFERENCES `empleado` (`idEmpleado`),
  CONSTRAINT `fk_v_idEstadoVenta` FOREIGN KEY (`idEstadoVenta`) REFERENCES `estadoventa` (`idEstadoVenta`),
  CONSTRAINT `fk_v_idFormaPago` FOREIGN KEY (`idFormaPago`) REFERENCES `formapago` (`idFormaPago`),
  CONSTRAINT `fk_v_idTienda` FOREIGN KEY (`idTienda`) REFERENCES `tienda` (`idTienda`),
  CONSTRAINT `fk_v_idTipoVenta` FOREIGN KEY (`idTipoVenta`) REFERENCES `tipoventa` (`idTipoVenta`)
) ENGINE=InnoDB AUTO_INCREMENT=101770 DEFAULT CHARSET=latin1 PACK_KEYS=0 
```

查询是这样的：

```
SELECT  f.Nombre  ,SUM(sp.PrecioVenta*sp.Cantidad)  
FROM soldproduct sp, sales s, document doc, family f, product p 
WHERE s.idDocument = doc.idDocument AND doc.NoComputa = FALSE
AND p.idProduct = sp.idProduct AND sp.idSale = s.idSale 
AND p.idFamily = f.idFamily AND p.Borrado = FALSE 
AND s.Borrado = FALSE AND s.Historia = FALSE AND s.idTienda = 1 
AND s.FechaVenta BETWEEN '2013-01-01' AND '2014-01-01' GROUP BY f.idFamily; 
```

我也试过这个（我也删除了文档表，以防它负责）

```
SELECT ProductFamily.Nombre, SUM(sp.PrecioVenta*sp.Cantidad) 
FROM 
(SELECT idSale FROM sales WHERE Borrado = FALSE AND Historia = FALSE AND idTienda = 1 
AND FechaVenta BETWEEN '2013-01-01' AND '2014-01-01') SalesidSale
JOIN
soldproduct sp
ON sp.idSale = SalesidSale.idSale
JOIN
(SELECT p.idProduct, p.idFamily, f.Nombre FROM product p, family f WHERE 
p.idFamily = f.idFamily AND p.Borrado = FALSE) ProductFamily
ON ProductFamily.idProduct = sp.idProduct
GROUP BY ProductFamily.idFamily; 
```

它花费的时间非常大，它对 EXPLAIN 命令的输出是（第一次查询）：

```
id  select_type table   type    possible_keys                                               key                 key_len ref                     rows    Extra
1   SIMPLE      v       range   PRIMARY,fk_v_idTienda,fk_v_idDocument,idx_v_FechaVenta      idx_v_FechaVenta    6       NULL                    7387    "Using index condition; Using where; Using MRR; Using temporary; Using filesort"
1   SIMPLE      doc     ALL     PRIMARY                                                     NULL                NULL    NULL                    4       "Using where; Using join buffer (Block Nested Loop)"
1   SIMPLE      pv      ref     PRIMARY,fk_pv_idSale                                        fk_pv_idSale        4       gemalia.s.idSale        4       NULL
1   SIMPLE      p       eq_ref  PRIMARY,fk_p_idFamily                                       PRIMARY             2       gemalia.sp.idProduct    1       "Using where"
1   SIMPLE      f       eq_ref  PRIMARY                                                     PRIMARY             1       gemalia.p.idFamily      1       NULL 
```

我希望有人可以帮助我，我尝试创建索引、子查询等。但我不能得到低于 40 秒的任何东西，这太多了，而且我确定我做错了什么。

每个表的行数约为： 销售额：100,000 产品：20,000 家庭：35 已售产品：1,100,000 文档：4

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:45:41.630

试试这个我们试图利用短路的查询。

**编辑**

```
 SELECT  
   f.Nombre, 
   SUM(sp.PrecioVenta*sp.Cantidad)  
 FROM 
   soldproduct sp
 INNER JOIN 
   sales s
 ON 
   (s.idTienda = 1 AND AND 
   s.Borrado = FALSE AND 
   s.Historia = FALSE AND 
   sp.idSale = s.idSale)
 INNER JOIN
   document doc
 ON
   (doc.NoComputa = FALSE AND
   s.idDocument = doc.idDocument) 
 INNER JOIN
   family f
 ON
   (p.idFamily = f.idFamily) 
 INNER JOIN
   product p 
 ON
   (p.Borrado = FALSE AND         
   p.idProduct = sp.idProduct)
 WHERE 
   s.FechaVenta BETWEEN '2013-01-01' AND '2014-01-01' 
 GROUP BY 
   f.idFamily; 
```

# sql - 如何在 sql 2000 中获得以下结果？

> ID：15807133
> 
> 赞同：1
> 
> 时间：2013-04-04T09:18:15.143
> 
> 标签：sql, sql-server-2000

表格1

2列

```
pack no     20  20  20  20  20  20  30  30  30  30  30
Serial no   12  13  14  15  16  17  18  19  20  21  22 
```

我需要的结果是

```
pack no      20        30
serial no    12-17     18-22 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:21:32.740

如果这些字段都是数字，

```
SELECT  packNo,
        CAST(min_serial AS VARCHAR(12)) + '-' + CAST(min_serial AS VARCHAR(12)) serial_no
FROM
        (
            SELECT  packNo, 
                    MIN(serialNo) min_serial,
                    MAX(serialNo) max_serial
            FROM    TableName
            GROUP   BY packNo
        ) subtable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:23:38.680

你可以使用`min()`和`max()`函数来做到这一点。如果在列名中使用下划线而不是空格会更好。

**[小提琴演示](http://sqlfiddle.com/#!3/27704/2)**

```
select [pack no], convert(varchar(10),min([Serial no])) + '-' + 
                  convert(varchar(10),max([Serial no])) as [Serial no]
from yourTable
group by [pack no] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:25:13.187

请试试：

```
select 
    [pack no], 
    CAST(MIN([Serial no]) AS NVARCHAR(10))+'-'+CAST(MAX([Serial no]) AS NVARCHAR(10)) as [Serial no]
from 
    YourTable
group by [pack no] 
```

# vb.net - PC 无法使用 Outlook 打印到电子邮件

> ID：15807134
> 
> 赞同：1
> 
> 时间：2013-04-04T09:18:15.483
> 
> 标签：vb.net, com, outlook, office-automation

我遇到了一个非常奇怪的问题，我们公司的一台计算机无法打印 MS Access 报告并将其附加到电子邮件中。我做了很多研究，但其中大部分并不适用于我的案例，因为这个问题只发生在我们公司 20 多台 PC 中的一台 PC 上。这是我们得到的错误的打印屏幕： ![在此处输入图像描述](https://i.stack.imgur.com/o0fCa.png)

我正在使用的代码如下：

```
If PrintMode = "Email" Then

            Dim mAcc As New Access.Application
            Dim DefaultPrinterName As New String("")
            Dim PDFPrinterName As New String("")

            Maintain__Loading.Setup()

            Try
                mAcc.CloseCurrentDatabase()
                mAcc.DoCmd.Close()
                System.Runtime.InteropServices.Marshal.ReleaseComObject(mAcc)
                mAcc = Nothing
            Catch ex As Exception
            End Try

            Dim startInfo As New ProcessStartInfo("C:\Program Files (x86)\PDFCreator\PDFCreator.exe") 'starts PDF Creator so it can save the report to PDF
            startInfo.WindowStyle = ProcessWindowStyle.Minimized
            Process.Start(startInfo)

            AttachmentName = "C:\PDFs\pdf.pdf" 'PDF has been set up to save all files as TestPrint.pdf
            PDFPrinterName = "PDFCreatorDistribution"
            '------ GETS DEFAULT PRINTER NAME -------
            Dim oPS As New System.Drawing.Printing.PrinterSettings
            Try
                DefaultPrinterName = oPS.PrinterName
            Catch ex As System.Exception
                DefaultPrinterName = ""
            Finally
                oPS = Nothing
            End Try

            'sets PDFCreatorDistribution as default printer
            Shell(String.Format("rundll32 printui.dll,PrintUIEntry /y /n ""{0}""", PDFPrinterName))

            Try
                If Not UCase(Trim(Database)) = "TEST" Then
                    mAcc.OpenCurrentDatabase("R:\Distribution\Access\Distribution-Reports.mde")
                Else
                    mAcc.OpenCurrentDatabase("R:\Distribution\Access\Test-Distribution-Reports.mde")
                End If
            Catch ex As Exception
                MsgBox(Err.Description)
            End Try

            If IO.File.Exists(AttachmentName) Then 'if file exists it deletes it
                IO.File.Delete(AttachmentName)
            End If

            Select Case Trim(Grid.Rows(Grid.CurrentRow.Index).Cells("Passing1Type").Value.ToString)
                Case "String"
                    mAcc.DoCmd.OpenReport(Trim(Grid.Rows(Grid.CurrentRow.Index).Cells("MacroName").Value.ToString), Access.AcView.acViewPreview, , Trim(Grid.Rows(Grid.CurrentRow.Index).Cells("Passing1").Value.ToString) & " = '" & Number & "'", Access.AcWindowMode.acWindowNormal)
                Case "Numeric"
                    mAcc.DoCmd.OpenReport(Trim(Grid.Rows(Grid.CurrentRow.Index).Cells("MacroName").Value.ToString), Access.AcView.acViewPreview, , Trim(Grid.Rows(Grid.CurrentRow.Index).Cells("Passing1").Value.ToString) & " = " & Number & "", Access.AcWindowMode.acWindowNormal)
            End Select

            mAcc.DoCmd.PrintOut()
            mAcc.Visible = True
            mAcc.CloseCurrentDatabase()
            mAcc.DoCmd.Close()
            System.Runtime.InteropServices.Marshal.ReleaseComObject(mAcc)
            mAcc = Nothing

            Do While Not System.IO.File.Exists("C:\PDFs\pdf.pdf")
                Threading.Thread.Sleep(2000) 'if doesn't exist, wait for 2 seconds

                If Not System.IO.File.Exists("C:\PDFs\pdf.pdf") Then 'if doesn't exist, wait for another 2 seconds
                    Threading.Thread.Sleep(2000)
                End If

                If Not System.IO.File.Exists("C:\PDFs\pdf.pdf") Then 'if doesn't exist, wait for another 2 seconds
                    Threading.Thread.Sleep(2000)
                End If

                If Not System.IO.File.Exists("C:\PDFs\pdf.pdf") Then 'shows error message
                    MsgBox("Error creating PDF. Please try again")
                    Exit Do
                End If
            Loop

            'sets default printer name
            Shell(String.Format("rundll32 printui.dll,PrintUIEntry /y /n ""{0}""", DefaultPrinterName))

            'saves file as
            Dim saveFileDialog As New SaveFileDialog()
            saveFileDialog.Filter = "PDF files (*.pdf)|*.pdf|All files (*.*)|*.*"
            If saveFileDialog.ShowDialog() = DialogResult.OK Then 'if OK clicked
                FileName = saveFileDialog.FileName 'get file name and move to new location/name
                FileNameOnly = System.IO.Path.GetFileName(FileName)
                Try

                    If IO.File.Exists(FileName) Then 'if file exists it deletes it before saving
                        IO.File.Delete(FileName)
                    End If

                    IO.File.Move(AttachmentName, FileName)
                Catch ex As Exception
                    MsgBox(Err.Description)
                Finally
                    Shell(String.Format("rundll32 printui.dll,PrintUIEntry /y /n ""{0}""", DefaultPrinterName))
                End Try
            Else 'user clicked cancel
                FileName = ""
            End If

            Maintain__Loading.Dispose()

            'GETS TO HERE AND AFTER THIS I GET THE ERROR MESSAGE DISPLAYED IN THE IMAGE ABOVE

            If IO.File.Exists(FileName) Then
                Try
                    Send_Email()
                Catch ex As Exception
                    MsgBox(Err.Description)
                End Try
            Else
                If Not FileName = "" Then MsgBox("An error has occured. Please try again")
            End If

            Shell(String.Format("rundll32 printui.dll,PrintUIEntry /y /n ""{0}""", DefaultPrinterName))

            PhysicallyPrintedOrEmailed = True
    End If 'Printmode = Email 
```

我找到了一个我认为可以解决我的问题的线程，但不幸的是它没有： [无法转换 COM 对象 - Microsoft Outlook 和 C#](https://stackoverflow.com/questions/4656360/unable-to-cast-com-object-microsoft-outlook-c-sharp/4656611#4656611)

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:29:49.433

您已经硬编码了程序文件位置的路径，因此如果您在 32 位机器上运行它，它将找不到 PDFCreator.exe。

用于`Environment.GetFolderPath`在机器上查找路径，而不是对其进行硬编码。`

如果您将整个内容包装在一个`Try` `Catch`块中以查看您没想到的某个地方是否存在错误，这也可能会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:05:30.557

我已经设法解决了这个问题。可能不是最好的方法，但我们重新安装了 Outlook，这解决了问题。我们认为已安装的另一个程序（很可能是将 Outlook 联系人与手机同步的程序）损坏了某些东西。不管怎么说，还是要谢谢你 ：）

# shell - 为什么忽略匹配行的差异不能按预期工作？

> ID：15807135
> 
> 赞同：15
> 
> 时间：2013-04-04T09:18:15.807
> 
> 标签：shell, diff

我有以下文件：

`file1.txt`：

```
###################################################
Dump stat Title information for 'ssummary' view
###################################################
Tab=> 'Instance' Title=> {text {Total instances: 7831}}
Tab=> 'Device' Title=> {text {Total spice devices: 256}}
Tab=> 'Memory' Title=> {text {Total memory allocated: 962192 kB}}
Tab=> 'Cpu' Title=> {text {Total cumulative CPU time: 9030 ms}} 
```

`file2.txt`：

```
###################################################
Dump stat Title information for 'ssummary' view
###################################################
Tab=> 'Instance' Title=> {text {Total instances: 7831}}
Tab=> 'Device' Title=> {text {Total spice devices: 256}}
Tab=> 'Memory' Title=> {text {Total memory allocated: 9621932 kB}}
Tab=> 'Cpu' Title=> {text {Total cumulative CPU time: 90303 ms}} 
```

我正在运行以下命令：

```
diff -I 'Memory' file1.txt file2.txt 
```

输出：

```
6,7c6,7
< Tab=> 'Memory' Title=> {text {Total memory allocated: 962192 kB}}
< Tab=> 'Cpu' Title=> {text {Total cumulative CPU time: 9030 ms}}
---
> Tab=> 'Memory' Title=> {text {Total memory allocated: 9621932 kB}}
> Tab=> 'Cpu' Title=> {text {Total cumulative CPU time: 90303 ms}} 
```

但是我的预期输出是：

```
< Tab=> 'Cpu' Title=> {text {Total cumulative CPU time: 9030 ms}}
---
> Tab=> 'Cpu' Title=> {text {Total cumulative CPU time: 90303 ms}} 
```

请注意，在命令中，如果我将*“内存”*更改为*“标签”*或*“标题”*问题已解决，但可能所有行都被忽略，因为它们都有标签和标题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T10:43:15.420

`diff`考虑到工作方式（截至 2013 年 4 月），这种行为是正常的。

`diff`是面向线的，这意味着一条线要么被认为完全不同，要么完全等同。当一行被忽略时，它在比较之前被输入到不同行的列表中，并且当计算更改脚本时，仅对被忽略行所做的更改被认为是被忽略的。当被忽略的行与更改的行相邻时，它构成一个未忽略的更改。

问题在于无法`diff`理解连续行不相关：您不是在区分文本序列（`diff`目标是什么），而是区分键控的独立行列表（`Tab >= <key>`）。当两个文件以相同的顺序生成时，这些问题看起来非常相似，但仍然不一样。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T10:37:53.120

这种行为确实看起来有点奇怪。我通过调整您的输入文件注意到了一些事情（我只是将“内存”行移到两个文件的顶部）：

文件1.txt

```
###################################################
Dump stat Title information for 'ssummary' view
###################################################
Tab=> 'Memory' Title=> {text {Total memory allocated: 962192 kB}}
Tab=> 'Instance' Title=> {text {Total instances: 7831}}
Tab=> 'Device' Title=> {text {Total spice devices: 256}}
Tab=> 'Cpu' Title=> {text {Total cumulative CPU time: 9030 ms}} 
```

文件2.txt

```
###################################################
Dump stat Title information for 'ssummary' view
###################################################
Tab=> 'Memory' Title=> {text {Total memory allocated: 9621932 kB}}
Tab=> 'Instance' Title=> {text {Total instances: 7831}}
Tab=> 'Device' Title=> {text {Total spice devices: 256}}
Tab=> 'Cpu' Title=> {text {Total cumulative CPU time: 90303 ms}} 
```

一个普通的差异会给你：

```
diff file1.txt file2.txt

4c4
< Tab=> 'Memory' Title=> {text {Total memory allocated: 962192 kB}}
---
> Tab=> 'Memory' Title=> {text {Total memory allocated: 9621932 kB}}
7c7
< Tab=> 'Cpu' Title=> {text {Total cumulative CPU time: 9030 ms}}
---
> Tab=> 'Cpu' Title=> {text {Total cumulative CPU time: 90303 ms}} 
```

请注意，现在有两组差异......通过这种安排，`diff -I 'Memory' file1.txt file2.txt`命令**将**起作用并输出：

```
7c7
< Tab=> 'Cpu' Title=> {text {Total cumulative CPU time: 9030 ms}}
---
> Tab=> 'Cpu' Title=> {text {Total cumulative CPU time: 90303 ms}} 
```

意思是，该`-I`标志似乎**仅在一组差异中的每一行都与表达式匹配时才**起作用。我不知道这是一个错误还是预期的行为......但这肯定是不一致的。

* * *

**编辑**：实际上，根据[GNU diff 文档](http://www.gnu.org/software/diffutils/manual/html_node/Specified-Lines.html#Specified-Lines)，这是预期的行为。手册页不是很清楚。OpenBSD diff 也有一个`-I`标志，但[他们的手册页](http://www.openbsd.org/cgi-bin/man.cgi?query=diff&sektion=1)解释得更好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-01T08:39:47.153

好吧，你每天都会学到新东西。我同样对这种行为感到困惑和沮丧，这似乎大致是 [diff the input files, then filter out the RE] 而不是 [filter the RE out of the input files, then diff]。

我会认为第二种方法更自然，更有用。例如，这似乎是方法`--ignore-case`和`--strip-trailing-cr`工作，在差异之前调整输入文件。此外，实际实现提问者想要的内容涉及过滤临时文件的两个输入，区分它们，然后删除它们。如果你想像我一样做一个递归差异，它会变得更加乏味。

我承认 diff 的行为方式与其记录的方式不同，而不是我希望它的行为方式，但恭敬地建议这个选项（也类似 for `-b`）`-w` 可以有用地添加到 diff 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-22T00:41:31.920

这是按照[`diffutils`](http://www.gnu.org/software/diffutils/manual/html_node/Specified-Lines.html#Specified-Lines)手册的预期行为：

> 但是，**如果大块中的每个更改的行**（每个插入和每个删除）都**与正则表达式匹配，则**`-I`仅**忽略**包含正则表达式的行的插入或删除。
> 
>  ****换句话说，**对于每个不可忽略的更改，`diff`打印其附近的完整更改集，包括可忽略的更改**。您可以使用多个`-I`选项为要忽略的行指定多个正则表达式。`diff`尝试将每一行与每个正则表达式匹配，从给定的最后一个开始。^(（[人差异](http://www.gnu.org/software/diffutils/manual/html_node/Specified-Lines.html#Specified-Lines)）)****

 ****您可以尝试通过指定来设置较小的更改集`-d`，但在您的示例中它不起作用。

> `-d --minimal`努力找到一组较小的更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T10:33:32.630

从 man diff 中，如果我记得清楚的话， -I 只是忽略了其中包含的 reg exp。这意味着如果 f1 是：

```
the pen is on the table 
```

f2 是：

```
the pun is on the table 
```

会正确解析：

```
diff -I 'p.n' f2 f2 
```

什么都不给

但

如果 f2 现在变成

```
the pun is on the cable 
```

正则表达式不再匹配（电缆和表格与正则表达式不匹配......）所以你会在输出中出现两行......

因此，只需尝试更改以下命令：

```
diff -I '.*Memory.*' file1.txt file2.txt 
```

那应该可以解决问题（对不起愚蠢的例子..）****

# java - Java Maze Solver - 我从来没有这么卡过

> ID：15807137
> 
> 赞同：4
> 
> 时间：2013-04-04T09:18:19.673
> 
> 标签：java, queue, set

所以我的任务是创建一个具有队列、集合、位置对象和单元对象的迷宫求解器，最终形成一个迷宫对象。

快速浏览一下完成后我的所有代码基本上会做什么：

```
7
10
   _ _ _ _ _ _ _ _ _
|_ _ _  |  _ _   _  |
|  _ _| | |  _  |   |
| |   | |_| | | |_| |
|_ _|_ _   _| |_  | |
|  _    | |  _ _| |_|
| |_ _|  _|   |_    |
|_ _ _ _|_ _|_ _ _| | 
```

进入这个：

```
 @ _ _ _ _ _ _ _ _ _
|@ @ @ @|  _ _   _  |
|  _ _|@| |@ @ @|   |
| |   |@|_|@| |@|_| |
|_ _|_ @ @ @| |@ @| |
|  _    | |  _ _|@|_|
| |_ _|  _|   |_ @ @|
|_ _ _ _|_ _|_ _ _|@|
                   @ 
```

到目前为止，我所做的一切都非常好，但是当我开始对 Maze 对象中的 findPath() 方法进行实际编码时，我的代码会生成一个无效的路径。当我输入一个文件来读取迷宫时，我将该迷宫转换为一个多维字符数组，然后将该字符数组转换为一个多维单元格数组，并映射每个单元格的北、南、东和西边界布尔值。

现在要实际弄清楚如何在迷宫中导航，我在迷宫的 findPath() 方法中尝试过，但实际上有点失败。

```
 @  @  @  @  .  .  .  .  .  . 
 .  .  .  @  .  .  .  .  .  . 
 .  @  @  @  .  .  .  .  .  . 
 .  @  @  @  @  .  .  .  .  . 
 .  .  @  @  @  .  .  .  .  . 
 .  @  @  @  @  .  .  .  .  . 
 .  .  .  .  .  .  .  .  .  . 
```

首先，为了说明我应该实现的目标，让我看看我的需求文档：

```
The algorithm operates according to the following pseudo-code:

* Visit the starting Location.
* Add this Location to the set.
* Enqueue the Location in the queue.

while (ArrayQueue<E> != empty( )) 
{
    Dequeue a Location(next) from the queue

        For each neighbor of Location(next) which has
         not yet been placed in the set, repeat:
                * Visit the neighbor of Location(next).
                * Add the neighbor of Location(next) to the Set.
                * Enqueue the neighbor of Location(next)in the Queue.
 } 
```

我几乎可以肯定我已经在某种程度上正确地使用了他的算法，但我无法弄清楚我做错了什么来获得我遇到的路径。我最头疼的是我在下面包含的 Maze 对象的 findPath() 方法。我想我最大的问题是我做错了什么？我已经在这几天了，只是无法弄清楚。任何帮助表示赞赏。我的代码如下：

My Maze 的 findpath 方法

```
public void findPath()
{
    Location startLocation = new Location(0, 0);
    theMaze[startLocation.getRow()][startLocation.getColumn()].setVisited(true);

    Location endLocation = new Location(6, 9);

    Location cursor;

    locationQueue.enqueue(startLocation);
    locationSet.enter(startLocation);

    while(!locationQueue.isEmpty())
    {
        cursor = locationQueue.dequeue();

        if(cursor == endLocation)
            break;

        for(int i = 0; i < 4; i++)
        {
            Location temp = cursor.getLoc(i);

            if(theMaze[cursor.getRow()][cursor.getColumn()].validDirection(i) && (!locationSet.isElement(temp)) && !(theMaze[temp.getRow()][temp.getColumn()].isVisited()))
            {
                cursor = cursor.getLoc(i);
                theMaze[cursor.getRow()][cursor.getColumn()].setVisited(true);

                if(theMaze[cursor.getColumn()][cursor.getColumn()].getPathAmount() < 2)
                {
                    cursor = startLocation;
                    continue;
                }

                locationSet.enter(cursor);
                locationQueue.enqueue(cursor);                          
            }               
        }           
    }

    for(int i = 0; i < locationSet.size(); i++)
    {
        System.out.println("Row " + locationSet.get(i).getRow() + " Column " + locationSet.get(i).getColumn());
        theMaze[locationSet.get(i).getRow()][locationSet.get(i).getColumn()].setPath();
    }

    for(int i = 0; i < theMaze.length; i++)
    {
        for(int j = 0; j < theMaze[i].length; j++)
        {
            System.out.print(theMaze[i][j].toString());
        }
        System.out.print("\n");
    }

} 
```

编辑：我的问题是 Maze 对象而不是其他类，所以我基本上是在清理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T09:30:17.050

你的基本算法有缺陷。您只需将单元格添加到路径中，但如果它们变成死胡同，请不要删除它们。

这种问题最适合递归算法。

```
function findExit(gameMap, listOfVisitedCells, currentCell, solution)
    listOfVisitedCells.add(currentCell);
    for each gameMap.NeighbourOf(currentCell)
        if neighbour not in listOfVisitedCells
             solution.add(neighbour)
             if (gameMap.isExit(neighbour)) {
               return true;
             }
             if (findExit(gameMap, listOfVisitedCells, currentCell, solution)) {
               return true;
             }
             solution.remove(neighbour);
        }
    }
    // No neighbours of the current cell got to find the exit.
    return false;
 } 
```

当然，这将首先探索地图深度，因此如果多条路径有效，则不能保证找到最短的路径（使用 Djikstra 算法）。

更新：通过查看您的代码：

很难在心理上调试这么多行代码，而且 SO 不能代替花大量时间使用您选择的调试器，观察程序的实际状态与预期状态，等等。不要期望太多，SO 更适合于代码量有限的具体问题（“我希望这段代码能做到这一点，但它没有，为什么”）。

无论如何，这让我觉得很奇怪：

```
 Location temp = cursor.getLoc(i);

        if(theMaze[cursor.getRow()][cursor.getColumn()].validDirection(i) && (!locationSet.isElement(temp)) && !(theMaze[temp.getRow()][temp.getColumn()].isVisited()))
        {
            cursor = cursor.getLoc(i);       <-- Why are you overwritting the current
                                             <-- location when you have still not checked
                                             <-- all the posible directions?
            theMaze[cursor.getRow()][cursor.getColumn()].setVisited(true);

            if(theMaze[cursor.getColumn()][cursor.getColumn()].getPathAmount() < 2)
            {
                cursor = startLocation;
                continue;
            }

            locationSet.enter(cursor);
            locationQueue.enqueue(cursor);                          
        } 
```

我敢打赌这是不正确的。当然，可能还隐藏了其他问题，如果您尝试自己调试它以找到无法按预期工作的片段（然后，如果需要，请在 SO 中寻求帮助），会更好（并为您提供更多经验）。

# ruby-on-rails - 在 ruby 中使用 openssl 登录后使用其他服务器命令

> ID：15807140
> 
> 赞同：1
> 
> 时间：2013-04-04T09:18:32.637
> 
> 标签：ruby-on-rails, ruby, openssl

我正在开发一个 ruby​​ on rails 项目来使用 Opensrs Api 创建电子邮件。现在，我可以使用终端通过 api 创建电子邮件，并希望将该 api 命令集成到我的 Rails 项目中，但我卡住了。

在我使用 openssl 登录该服务器后，问题无法运行 api 命令 opensrs 服务器来创建电子邮件。

我已经阅读了[这篇](http://ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL.html)关于将 openssl 与 ruby​​ 代码结合使用的内容，以及[关于](http://ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL/Buffering.html)OpenSSL::Buffering 的内容。然而，在我运行以下代码之后，它似乎不起作用。

使用 openssl 登录后运行 opensrs 命令有什么建议吗？

这是我的控制器中的代码：

```
 require 'socket'
    require 'openssl'
    p "1---------------"

    tcp_client = TCPSocket.new 'abc.com', 4449

    context = OpenSSL::SSL::SSLContext.new
    ssl_client = OpenSSL::SSL::SSLSocket.new tcp_client, context

    ssl_client.connect

    ssl_client.write_nonblock "hello ========"
    ssl_client.print "print hello ========"
    ssl_client.write "write hello ========"

    ssl_client.write_nonblock "ver ver='3.6'"
    p ssl_client.readlines
    p "2---------------" 
```

在控制台中，它响应：

1---------------

2---------------

# php - 在codeigniter中的视图内函数

> ID：15807145
> 
> 赞同：3
> 
> 时间：2013-04-04T09:18:46.390
> 
> 标签：php, codeigniter, codeigniter-2

我是新手`ci`，任何人都可以帮助我或在我的代码和最佳实践中提供一些建议吗？我有一个`foreach`声明需要使用函数来显示大量数据。这是我的示例代码视图。先感谢您

```
 foreach($data->result() as $d){

    if($d->condi){
       $sample =   myfunction($d->value1, $d->value2, $value->3);
    } 
    else{ 
         $d->otherdisplay;
            if($d->condition2){
            $sample =   myfunction($d->value1, $d->value2, $value->3);
            }
    }
}
function myfunction($a,$b,$c){
       /*do something;*/

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:29:21.033

这取决于，反正这些`methods`应该是在`controllers`还是在`libraries`，这取决于你的方法`can be called from browser or not`。

如果你想使用一些你需要 makesome 的方法，请`routine action`使用

```
library or an helper 
```

如果你想`web page method`使用`controller`

```
 Model = SQL and db stuffs

 Controller = all the php stuffs + data returned from Model

 View = html/js + data returned from Controller 
```

检查[如何在 CI 中创建自己的库](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:31:35.987

更好的方法是在 CI 中创建一个帮助文件，并将这个函数放在帮助文件中。**在'application/helpers'**目录中创建你的帮助文件然后在调用这个视图的控制器中包含这个帮助文件，比如

`$this->load->helper('name');`

现在，您可以直接在视图中使用帮助文件的所有功能，而无需任何 codeigniter 实例。

顾名思义，助手可以帮助您完成任务。每个帮助文件只是特定类别中的函数集合。

[http://ellislab.com/codeigniter/user-guide/general/helpers.html](http://ellislab.com/codeigniter/user-guide/general/helpers.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:21:38.837

您应该尽可能将您的函数放在控制器类中（或其他地方，只要您从控制器中调用它们）。在那里解析你的数据，然后在视图中循环遍历它。这使您的代码保持整洁有序，并符合 MVC 原则。

# ember.js - 循环遍历可枚举的前两个条目

> ID：15807146
> 
> 赞同：1
> 
> 时间：2013-04-04T09:18:51.163
> 
> 标签：ember.js, handlebars.js

我有以下工作车把代码：

```
{{#each phoneNumber in switchboardEntry.sipAccount.phoneNumbers}}
  <span class="label">
    {{phoneNumber.number}}
  </span>
{{/each}} 
```

但我想只循环到前两个条目，`switchboardEntry.sipAccount.phoneNumbers`而不是完整的集合。[我在http://emberjs.com/guides/enumerables/](http://emberjs.com/guides/enumerables/)上找到了一个过滤器示例，但仍处于 Ruby 思维模式，我尝试将该过滤器放在其后`switchboardEntry.sipAccount.phoneNumbers`不起作用。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:24:50.410

您可以将计算属性添加到`sipAccount`模型。

可能是这样的：

```
App.SipAccount = DS.Model.extend({
    phoneNumbers: DS.hasMany('App.PhoneNumbers'),

    phoneNumberShortList: Ember.computed(function() {
        var phoneNumbers = this.get('phoneNumbers');
        return phoneNumbers.slice(0,2);
    }).property('phoneNumbers.@each.number')
}); 
```

**更新**

Handlebars 代码将是：

```
{{#each phoneNumber in switchboardEntry.sipAccount.phoneNumberShortList}}
  <span class="label">
    {{phoneNumber.number}}
  </span>
{{/each}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:31:59.723

```
<span class="label">
  {{switchboardEntry.sipAccount.phoneNumbers.0.number}}
</span>

<span class="label">
  {{switchboardEntry.sipAccount.phoneNumbers.1.number}}
</span> 
```

或者

```
{{#with switchboardEntry.sipAccount.phoneNumbers}}
  <span class="label">
    {{0.number}}
  </span>

  <span class="label">
    {{1.number}}
  </span>
{{/with}} 
```

[小提琴](http://jsfiddle.net/ZNr6C/)

# php - IMAP 编码和解码：UTF-8 问题

> ID：15807151
> 
> 赞同：2
> 
> 时间：2013-04-04T09:18:55.520
> 
> 标签：php, encoding, utf-8, imap

我有一个功能，旨在将邮件从一个文件夹移动到 gmail 帐户上的另一个文件夹。该功能在移动邮件时功能齐全。使用 utf-8 编码的邮箱时会出现我的问题。我解码了 IMAP 文件夹列表响应，但两个值的转储给出了不同的结果。

```
// Getting the folders
$folders = imap_list(CONNECTION, MAILBOX, PATTERN);

// After a foreach, stripping slash, prefix and such
// $folder is the raw mailbox name from the IMAP list
$mailbox = utf8_encode(imap_utf7_decode($folder)); // = string(12) "Tæstbåks"

// The entered search from the client
$search_for = "Tæstbåks"; // = string(10) "Tæstbåks"

if($search_for == $mailbox)
    print "Yeah!";
else
    print "Noo!"; 
```

我不知道为什么这两个字符串不匹配，那是我的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T09:14:54.517

PHP 的函数`imap_utf7_decode($folder)`被[记录](http://php.net/manual/en/function.imap-utf7-decode.php)为以 ISO-8859-1 编码返回一个字符串。鉴于 IMAP 修改后的 UTF-7 方案可以编码整个 Unicode 范围（这意味着“很多”）并且 ISO-8859-1 只能表示 256 个单独的字符，因此您不可能在这种情况下使用该功能。我什至会建议，决定提供这种无用功能的 PHP 开发人员在设计它时并没有处于最佳状态。

看起来 mbstring 扩展可以做你真正想做的事情——使用类似的东西`$mailbox = mb_convert_encoding($folder, "UTF-8", "UTF7-IMAP")`，正如 PHP 文档下面的评论中所建议的那样。

# vb.net - 数据阅读器问题

> ID：15807152
> 
> 赞同：0
> 
> 时间：2013-04-04T09:18:56.470
> 
> 标签：vb.net, ms-access-2007

1）这是我检查用户名和密码的代码，如果匹配则登录。：

```
Private Sub cmdOK_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdOK.Click
    Try
        Dim dr As OleDb.OleDbDataReader
        Dim cmd As OleDb.OleDbCommand
        Dim logQuery As String = ("SELECT * FROM Login_db where Username='" & txtUsername.Text & "'")
        cnnOLEDB.Open()
        cmd = New OleDb.OleDbCommand(logQuery, cnnOLEDB)
        dr = cmd.ExecuteReader              
        If dr.Read = True Then         <-------------------- problem

            If txtUsername.Text = dr("Username") Then
                If txtPassword.Text = dr("Password") Then
                    MsgBox("Hii")
                End If
            Else
                MsgBox("Byee")
            End If
        End If
    Catch ex As Exception
        MsgBox(ex.Message)
        cnnOLEDB.Close()
    End Try

End Sub 
```

`if dr.read=true then`即使我在我的表中记录了该行，该行也会返回 false ......

2）这是我在登录表中添加新用户的代码

尝试

```
 Dim addUser As String

        addUser = "INSERT INTO Login_db(Username,Password) VALUES (@uname,@pswd)"
        cnnOLEDB.Open()

        Dim _comm As OleDb.OleDbCommand = New OleDb.OleDbCommand(addUser, cnnOLEDB)

        _comm.Parameters.AddWithValue("@uname", txtUsername.Text)
        _comm.Parameters.AddWithValue("@pswd", txtPasswd.Text)
        _comm.ExecuteNonQuery()
        cnnOLEDB.Close()

        MsgBox("Record Inserted", MsgBoxStyle.OkOnly)
    Catch ex As Exception
        MsgBox(ex.Message)
        cnnOLEDB.Close()
    End Try 
```

错误是：插入语句中的语法错误。我找不到我的错误。

请解决我的问题...谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:33:42.490

我想这是一个 MS Access 数据库。在这种情况下，单词 PASSWORD 是保留关键字。
如果您使用该名称作为列名，那么您应该始终用方括号将其封装起来。

```
addUser = "INSERT INTO Login_db(Username,[Password]) VALUES (@uname,@pswd)" 
```

作为旁注，您检索用户的选择查询很危险，如果用户名包含单引号（撇号）或更糟的情况可能是 sql 注入攻击的向量，则可能会失败。像在插入语句中一样使用始终参数化的查询

```
Dim logQuery As String = "SELECT * FROM Login_db where Username=@uname"
cnnOLEDB.Open()
cmd = New OleDb.OleDbCommand(logQuery, cnnOLEDB)
cmd.Parameters.AddWithValue("@uname", txtUserName.Text) 
```

# jquery - 如何处理jquery中其他关闭按钮上的切换事件？

> ID：15807153
> 
> 赞同：1
> 
> 时间：2013-04-04T09:18:57.643
> 
> 标签：jquery, html, togglebutton

我使用 jquery 创建了切换效果。我想用右上角的关闭按钮关闭一个弹出 div，而不影响当前的切换效果。

有关演示，请参阅链接。

```
$(document).ready(function(){
     $(".infoBtn").click(function(){
           $(".popUpDiv").toggle("fast");
           //$(this).toggleClass("active");
           return false;
     });
}); 
```

[jsfiddle链接](http://jsfiddle.net/Rm3sC/5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:20:22.160

利用： `$(".infoBtn, .closePopsUp").click(function(){`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:21:03.513

在点击事件上使用多个选择器

```
 $(".infoBtn,.closePopsUp").click(function(){
    $(".popUpDiv").toggle("fast");

    return false;
}); 
```

[在这里摆弄](http://jsfiddle.net/bipen/Rm3sC/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:23:34.103

您的选择器字符串中可以有多个选择器：

```
$(document).ready(function(){
     $(".infoBtn, .closePopsUp").click(function(){
           $(".popUpDiv").toggle("fast", function(){
               //animation complete
               $(this).toggleClass("active");
           });
           return false;
     });
}); 
```

我还添加了在动画完成后切换类的功能。这是一个很好的做法，因为它确保应用于此类的任何 CSS 规则都不会影响动画。

**来源**

[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T09:26:44.513

如果可以在点击事件中做同样的事情`#closePopsPan`

```
$(document).ready(function(){

                $(".infoBtn").click(function(){
                    $(".popUpDiv").toggle("fast");
                    //$(this).toggleClass("active");
                    return false;
                });

    $("#closePopsPan").on("click",function(){
        $(".popUpDiv").toggle("fast");
    });
            }); 
```

更新的 jsfiddle 链接是[http://jsfiddle.net/Rm3sC/8/](http://jsfiddle.net/Rm3sC/8/)

# java - Neo4j 监控和管理工具：索引问题 + 与 Java 嵌入式应用程序的连接

> ID：15807154
> 
> 赞同：0
> 
> 时间：2013-04-04T09:19:03.883
> 
> 标签：java, indexing, neo4j

我正在使用 Neo4j 监控和管理工具（localhost:7474，Neo4j v 1.8.2），因为我认为这是一种可视化数据的好方法。我面临一些问题：

1.  我创建了一个名为 auto_node_index 的索引。（我也启用了自动索引，尽管这在这里无关紧要）当我运行以下语句时：

CREATE n = {type : 'company', name : 'neo4j'} RETURN n START n=node:auto_node_index(name='neo4j') RETURN n

我没有得到任何匹配的数据，而是：返回 0 行。查询耗时 25 毫秒我错在哪里？

2.如何使我使用嵌入式 Java 应用程序创建的数据可见，反之亦然？由于 Neo4j 将其数据存储在 /var/lib/neo4j/data/graphdb 我尝试像这样配置 GraphDatabaseService 的路径：

字符串 DB_PATH = "cd /var/lib/neo4j/data/graphdb"; GraphDatabaseService db = new GraphDatabaseFactory().newEmbeddedDatabase( DB_PATH );

这显然不起作用，因为该目录已创建并且没有切换到那里。对不起，我对此很陌生。

非常感谢任何提示；）非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:40:28.773

1.  您不会得到任何匹配，因为 Cypher 不会将您的节点 n 添加到您手动创建的索引中。如果您打开了自动索引，那么它应该在 node_auto_index 中可用，而不是在 auto_node_index 中。如果您想将节点添加到手动创建的索引中，那么到目前为止，Cypher 创建的节点无法通过 Cypher 索引到该索引中（尽管我听说它将在未来的版本中提供）。你可以通过两种方式来解决这个问题。

a) 使用 Cypher 创建节点并返回创建的节点。在您的 Java 应用程序中，获取该节点并手动添加到索引中（有关如何执行此操作的信息，请参见[http://docs.neo4j.org/chunked/milestone/indexing.html ）](http://docs.neo4j.org/chunked/milestone/indexing.html)

b) 使用 Java 中的 Neo4j API 创建节点并为其编制索引

2

如果您想使用 Java 创建图表，请使用您有权写入的任何路径（它并不总是必须是 var/lib/neo4j/graphdb）：

> ```
> String DB_PATH = "/var/lib/neo4j/data/graphdb"; 
> GraphDatabaseService db = new GraphDatabaseFactory().newEmbeddedDatabase( DB_PATH ); 
> ```

然后你可以通过在 conf/neo4j-server.properties 中设置来将 webadmin 指向 DB_PATH 中的路径

> org.neo4j.server.database.location=/var/lib/neo4j/graphdb

# google-chrome - 从触摸屏启用 Chrome 中的触摸事件

> ID：15807156
> 
> 赞同：5
> 
> 时间：2013-04-04T09:19:07.727
> 
> 标签：google-chrome, ubuntu, chromium, touchscreen, xinput

我有一台带有 24" 触摸屏的 Ubuntu 机器，它工作正常。我可以移动鼠标，用几个触摸点做手势等等，所以硬件工作正常。现在我想知道是否可以让浏览器解释事件为触摸而不是鼠标按下、鼠标拖动等。HTML5 对触摸和多点触摸的支持非常好，我想为此设置开发 Web 应用程序。有人知道如何做到这一点吗？我试过启用--enable-touch-events 切换没有成功，不过好像只有ms windows版本才实现的。

```
~$ xinput -version
xinput version 1.6.0
XI version on server: 2.2

~$ xinput
⎡ Virtual core pointer                      id=2    [master pointer  (3)]
⎜   ↳ Virtual core XTEST pointer                id=4    [slave  pointer  (2)]
⎜   ↳ Advanced Silicon S.A CoolTouch(TM) System id=9    [slave  pointer  (2)]
⎜   ↳ USBest Technology SiS HID Touch Controller    id=10   [slave  pointer  (2)]
⎜   ↳ Logitech USB Optical Mouse                id=11   [slave  pointer  (2)]
⎜   ↳ MCE IR Keyboard/Mouse (nuvoton-cir)       id=14   [slave  pointer  (2)]
⎣ Virtual core keyboard                     id=3    [master keyboard (2)]
    ↳ Virtual core XTEST keyboard               id=5    [slave  keyboard (3)]
    ↳ Power Button                              id=6    [slave  keyboard (3)]
    ↳ Video Bus                                 id=7    [slave  keyboard (3)]
    ↳ Power Button                              id=8    [slave  keyboard (3)]
    ↳ CHICONY HP Basic USB Keyboard             id=12   [slave  keyboard (3)]
    ↳ Nuvoton w836x7hg Infrared Remote Transceiver  id=13   [slave  keyboard (3)] 
```

我已经阅读了有关使用 touch-UI 标志进行构建的信息，但我不确定它会有所帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-24T13:55:11.850

Chrome 在使用 GTK 构建时不支持 Linux 上的触摸屏。从 Chrome 35 开始，Linux 不再使用 GTK，而是建立在 Windows 和 ChromeOS 上使用的相同 UI 框架（“Aura”）之上。这意味着它现在应该正确支持触摸屏（尽管我经常在 Ubuntu 中看到触摸屏错误 - 尤其是在使用多个显示器时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T13:40:16.177

请参阅 [http://www.html5rocks.com/en/mobile/touchandmouse/](http://www.html5rocks.com/en/mobile/touchandmouse/) 以获得对您问题的良好答案。

你说

> 我尝试启用 --enable-touch-events 开关

您是否使用该命令行开关启动了 chrome？

也许您指的是以下内容，因为您想接收真实的触摸事件，所以在您的情况下使用它不会是错误的。

[https://developers.google.com/chrome-developer-tools/docs/mobile-emulation#emulate-touch-events](https://developers.google.com/chrome-developer-tools/docs/mobile-emulation#emulate-touch-events)

尝试在 JavaScript 控制台中为您感兴趣的任何事件类型安装一个小事件处理程序（见下文）。

```
["click", "mousemove", "touchmove"].forEach(function(value, index, object) {
    document.addEventListener(value, function(event) {
        console.log(JSON.stringify([event.type,
            event.srcElement.localName + (event.srcElement.id ? '#'
            + event.srcElement.id : "")
            + (event.srcElement.classList.length ? '[class='
            + event.srcElement.classList + ']' : ""),
            (new Date(event.timeStamp)).toJSON()]));
    }, false);
}); 
```

这有帮助吗？

# javascript - 在 asp.net MVC3 中渲染部分页面

> ID：15807161
> 
> 赞同：0
> 
> 时间：2013-04-04T09:19:15.670
> 
> 标签：javascript, ajax, asp.net-mvc-3, partial-views

我刚开始研究 ASP .NET MVC3 项目。我想在 javascript/AJAX 中呈现部分视图（* .cshtml 文件）并将其放在一个分区中，任何人都可以帮助我提供示例代码。提前致谢。

我试过这种方式，但没有用。

```
var result = '<%= Html.RenderPartial("_Partialview"); %>';
$(".div_class_name").html(result); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:22:54.950

在 Controller 类中创建一个返回部分视图的方法，而不是使用 ajax get 调用该方法。

```
$.get('controller/getpartial', function(data) {

  $('.div_class_name').html(data);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:34:21.970

```
$('#trigger').click(function () {
$.ajax({
  url: '@Url.Action("Method", "Controller")', 
  success: function(data){
    $('#targetDIV').html(data);
  }
    });
    }); 
```

因此，例如，当您单击触发器按钮时，将执行此 ajax 调用，并且返回的部分视图将被放置到您的 targetDIV。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:24:40.717

创建一个动作并使用 json 在字符串中返回部分视图，然后使用

```
$(".div_class_name").html(result); 
```

# java - 为什么这个 Java 代码会编译？

> ID：15807163
> 
> 赞同：96
> 
> 时间：2013-04-04T09:19:16.953
> 
> 标签：java, compiler-construction

在方法或类范围内，以下行编译（带有警告）：

```
int x = x = 1; 
```

在类范围内，**变量获取其默认值**，以下给出“未定义引用”错误：

```
int x = x + 1; 
```

不是第一个`x = x = 1`应该以相同的“未定义引用”错误结束吗？或者也许第二行`int x = x + 1`应该编译？或者我缺少什么？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-04-04T19:26:54.227

## tl;博士

对于*字段*，`int b = b + 1`是非法的，因为`b`是非法的前向引用`b`。您实际上可以通过编写来解决这个问题`int b = this.b + 1`，它可以毫无怨言地编译。

对于*局部变量*，`int d = d + 1`是非法的，因为`d`在使用前没有初始化。对于始终默认初始化的字段，情况**并非**如此。

您可以通过尝试编译来查看差异

`int x = (x = 1) + x;`

作为字段声明和局部变量声明。前者会失败，但后者会成功，因为语义不同。

## 介绍

首先，字段和局部变量初始值设定项的规则非常不同。所以这个答案将分两部分处理规则。

我们将始终使用这个测试程序：

```
public class test {
    int a = a = 1;
    int b = b + 1;
    public static void Main(String[] args) {
        int c = c = 1;
        int d = d + 1;
    }
} 
```

的声明`b`无效并因`illegal forward reference`错误而失败。
的声明`d`无效并因`variable d might not have been initialized`错误而失败。

这些错误不同的事实应该暗示错误的原因也不同。

## 字段

Java 中的字段初始值设定项由[JLS §8.3.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.2)字段初始化管理。

字段的*范围*在[JLS §6.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.3)声明的范围中定义。

相关规则如下：

*   在类类型 C（第 8.1.6 节）中声明或继承的成员的声明范围是`m`C 的整个主体，包括任何嵌套类型声明。
*   实例变量的初始化表达式可以使用在类中声明或由类继承的任何静态变量的简单名称，即使是稍后在文本中声明的静态变量。
*   有时限制使用在使用后以文本形式出现声明的实例变量，即使这些实例变量在范围内。有关管理对实例变量的前向引用的精确规则，请参见第 8.3.2.3 节。

§8.3.2.3 说：

> 仅当成员是类或接口 C 的实例（分别为静态）字段并且满足以下所有条件时，成员的声明才需要在使用之前以文本形式出现：
> 
> *   该用法出现在 C 的实例（分别为静态）变量初始化器或 C 的实例（分别为静态）初始化器中。
> *   用法不在作业的左侧。
> *   用法是通过一个简单的名称。
> *   C 是包含用法的最里面的类或接口。

您实际上可以在声明字段之前引用它们，除非在某些情况下。这些限制旨在防止类似的代码

```
int j = i;
int i = j; 
```

从编译。Java 规范说“上述限制旨在在编译时捕获循环或其他格式错误的初始化。”

这些规则实际上归结为什么？

简而言之，规则基本上说，如果 (a) 引用在初始化程序中，(b) 引用未分配给，(c) 引用*是**简单的名称*（没有限定符，如`this.`）和（d）它不是从内部类中访问的。因此，满足所有四个条件的前向引用是非法的，但至少在一个条件上失败的前向引用是可以的。

`int a = a = 1;`编译是因为它违反了 (b)：引用`a` *被*分配给，所以在' 的完整声明`a`之前引用是合法的。`a`

`int b = this.b + 1`也可以编译，因为它违反了 (c)：引用`this.b`不是一个简单的名称（它用 限定`this.`）。这个奇怪的构造仍然是完美定义的，因为`this.b`它的值为零。

因此，基本上，初始化程序中对字段引用的限制会阻止`int a = a + 1`成功编译。

观察字段声明`int b = (b = 1) + b`将*无法*编译，因为 final`b`仍然是非法的前向引用。

## 局部变量

局部变量声明受[JLS §14.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.4)局部变量声明语句的约束。

局部变量的*范围*在[JLS §6.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.3)中定义，声明的范围：

*   块中局部变量声明的范围（第 14.4 节）是声明出现的块的其余部分，从它自己的初始化程序开始，并在局部变量声明语句的右侧包括任何进一步的声明符。

请注意，初始化程序在被声明的变量的范围内。那么为什么不`int d = d + 1;`编译呢？

原因是由于 Java 的**明确分配**规则（[JLS §16](http://docs.oracle.com/javase/specs/jls/se7/html/jls-16.html)）。确定赋值基本上是说每次访问局部变量都必须先对该变量进行赋值，Java 编译器检查循环和分支以确保赋值*总是*在任何使用之前发生（这就是为什么确定赋值有一个专门的整个规范部分给它）。基本规则是：

*   对于局部变量或空白 final 字段的每次访问`x`，都`x`必须在访问之前明确赋值，否则会发生编译时错误。

在`int d = d + 1;`中，对局部变量的访问`d`被解析为罚款，但由于`d`之前没有被赋值`d`，所以编译器会报错。在`int c = c = 1`中，`c = 1`首先发生，它分配`c`，然后`c`初始化为该分配的结果（即 1）。

请注意，由于明确的赋值规则，局部变量声明`int d = (d = 1) + d;` *将*编译成功（*与*字段声明不同`int b = (b = 1) + b`），因为`d`在到达 final 时肯定已赋值`d`。

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2013-04-04T09:29:02.423

```
int x = x = 1; 
```

相当于

```
int x = 1;
x = x; //warning here 
```

而在

```
int x = x + 1; 
```

首先我们需要计算`x+1`，但是 x 的值是未知的，所以你会得到一个错误（编译器知道 x 的值是未知的）

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2013-04-04T09:24:25.930

它大致相当于：

```
int x;
x = 1;
x = 1; 
```

首先，`int <var> = <expression>;`总是等价于

```
int <var>;
<var> = <expression>; 
```

在这种情况下，您的表达式是`x = 1`，这也是一个语句。`x = 1`是一个有效的声明，因为 var`x`已经被声明了。它也是一个值为 1 的表达式，然后`x`再次分配给它。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-04-04T09:38:14.507

在 java 或任何现代语言中，赋值来自右边。

假设如果你有两个变量 x 和 y，

```
int z = x = y = 5; 
```

该语句是有效的，这就是编译器拆分它们的方式。

```
y = 5;
x = y;
z = x; // which will be 5 
```

但在你的情况下

```
int x = x + 1; 
```

编译器给出了一个异常，因为它像这样分裂。

```
x = 1; // oops, it isn't declared because assignment comes from the right. 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-04-04T17:09:21.227

`int x = x = 1;`不等于：

```
int x;
x = 1;
x = x; 
```

javap 再次帮助我们，这些是为此代码生成的 JVM 指令：

```
0: iconst_1    //load constant to stack
1: dup         //duplicate it
2: istore_1    //set x to constant
3: istore_1    //set x to constant 
```

更像：

```
int x = 1;
x = 1; 
```

这里没有理由抛出未定义的引用错误。现在在初始化之前使用了变量，因此该代码完全符合规范。**实际上根本没有使用变量**，只是赋值。而 JIT 编译器会走得更远，它会消除这种结构。老实说，我不明白这段代码是如何与 JLS 的变量初始化和使用规范联系起来的。没有使用没有问题。;)

如果我错了，请纠正。我不明白为什么引用许多 JLS 段落的其他答案收集了这么多优点。这些段落与本案没有任何共同之处。只有两个系列作业，没有更多。

如果我们写：

```
int b, c, d, e, f;
int a = b = c = d = e = f = 5; 
```

等于：

```
f = 5
e = 5
d = 5
c = 5
b = 5
a = 5 
```

最右边的表达式只是一个一个地分配给变量，没有任何递归。我们可以以任何我们喜欢的方式混淆变量：

```
a = b = c = f = e = d = a = a = a = a = a = e = f = 5; 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-04-04T09:23:26.727

在`int x = x + 1;`您将 1 添加到 x 时`x`，它的值是多少，它尚未创建。

但是 in`int x=x=1;`将编译没有错误，因为您将 1 分配给`x`.

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-04-04T09:22:03.547

您的第一段代码包含第二个`=`而不是一个加号。这将在任何地方编译，而第二段代码不会在任何地方编译。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-04-04T09:23:45.883

在第二段代码中，x 在其声明之前使用，而在第一段代码中，它只是分配了两次，这没有意义但有效。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-04-04T15:36:35.387

让我们一步一步分解，右联想

```
int x = x = 1 
```

`x = 1`，将 1 分配给变量 x

`int x = x`, 将 x 是什么分配给它自己，作为一个 int。由于 x 之前被指定为 1，因此它保留 1，尽管是以冗余方式。

这编译得很好。

```
int x = x + 1 
```

`x + 1`，将变量 x 加一。但是， x 未定义这将导致编译错误。

`int x = x + 1`，因此这一行编译错误，因为等号的右侧部分将无法编译将 1 添加到未分配的变量

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-04-04T09:25:00.020

第二个`int x=x=1`是编译，因为您将值分配给 x 但在其他情况下`int x=x+1`，变量 x 未初始化，请记住在 java 中局部变量未初始化为默认值。注意如果它`int x=x+1`在类范围内也是（），那么它也会给出编译错误，因为没有创建变量。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-04-04T09:26:42.757

```
int x = x + 1; 
```

在 Visual Studio 2008 中成功编译并出现警告

```
warning C4700: uninitialized local variable 'x' used` 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-04-04T09:31:11.627

x 未在`x = x + 1`; 中初始化。

**Java 编程语言是静态类型的，这意味着必须首先声明所有变量才能使用它们。**

查看[原始数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-04-06T09:54:39.690

由于代码的实际工作方式，该代码行编译时不会出现警告。当您运行代码时，Java 首先按照定义`int x = x = 1`创建变量。**然后**它运行分配代码 ( )。由于已经定义，系统没有错误设置为 1。这将返回值 1，因为现在是 的值。因此，现在最终设置为 1。Java 基本上执行代码就好像它是这样的：`x`**`x = 1``x``x``x``x`** 

 **```
int x;
x = (x = 1); // (x = 1) returns 1 so there is no error 
```

但是，在您的第二段代码中，需要定义`int x = x + 1`该`+ 1`语句`x`，到那时它不是。由于赋值语句总是意味着首先运行右边的代码，因此代码将因为未定义`=`而失败。`x`Java 会像这样运行代码：

```
int x;
x = x + 1; // this line causes the error because `x` is undefined 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2013-05-03T16:45:56.793

编译器从右到左读取语句，而我们设计相反。这就是为什么它一开始很生气的原因。养成从右到左阅读语句（代码）的习惯，您就不会有这样的问题。**

# mysql - MySQL SET 字段，其中 A 列 + B 列匹配搜索

> ID：15807166
> 
> 赞同：0
> 
> 时间：2013-04-04T09:19:32.823
> 
> 标签：mysql, sql

我正在尝试在 MySQL 中进行查询，我希望将一个值（例如 1234Test）与表中的两个字段进行匹配。如果它不匹配，我希望它寻找另一行。

例如

```
UPDATE test_table

SET column_code = "input variable"

WHERE sid = '1122233'

AND gid = '11'

AND (
     qid + title = '1234Test 
  OR
     qid = '1234'
) 
```

现在这行不通了。我还尝试查看是否有办法使用 CASE WHEN 语句来执行此操作，但无法弄清楚它应该如何工作。

你能给我一些关于如何进行的提示和技巧吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:25:23.097

用于`CONCAT()`连接字段。

```
UPDATE test_table
SET    column_code = "input variable"
WHERE  sid = '1122233' AND
       gid = '11' AND 
       (CONCAT(qid, title) = '1234Test' OR qid = '1234') 
```

# wpf - ScrollViewer 在某些条件下阻止 MouseWheel 处理

> ID：15807168
> 
> 赞同：1
> 
> 时间：2013-04-04T09:19:35.590
> 
> 标签：wpf, scrollviewer

我在 ScrollViewer 中有一个 Canvas。我正在处理画布上的鼠标滚轮，例如，当按下 Ctrl 时它会放大或缩小，当按下 shift 时，ScrollViewer 将水平滚动，等等。只要 ScrollViewer 没有垂直的能力，这一切都很好滚动。当我的画布上有更多对象时，它将具有此功能，因此会干扰我的自定义处理程序，它也将始终垂直滚动，但如果正在使用我的任何修饰符（Ctrl，Shift），我想阻止默认滚动条滚动。

有没有办法做到这一点？

# php - 查询不适用于php

> ID：15807173
> 
> 赞同：-1
> 
> 时间：2013-04-04T09:19:43.183
> 
> 标签：php, mysql

我有以下我正在尝试进行的查询，但我无法让它工作，有什么建议吗？

```
function getPrelaciones($carnet){

$result = ("SELECT mhm.Materia_codigo1 FROM Materia_has_Materia mhm, Materia m, (SELECT mha.Materia_codigo as materianovista FROM Materia_has_Alumno mha WHERE mha.Alumno_carnet = '%s')as n WHERE n.materianovista = mhm.Materia_codigo AND mhm.Materia_codigo1 != ' ' AND n.materianovista = m.codigo", $carnet);
print json_encode($result);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:20:48.723

您尚未执行查询。将其更改为，

```
$result = mysql_query("SELECT mhm.Materia_codigo1 FROM Materia_has_Materia mhm, Materia m, (SELECT mha.Materia_codigo as materianovista FROM Materia_has_Alumno mha WHERE mha.Alumno_carnet = '%s')as n WHERE n.materianovista = mhm.Materia_codigo AND mhm.Materia_codigo1 != ' ' AND n.materianovista = m.codigo", $carnet); 
```

这仅在您使用 mysql 时才有用。如果否，则必须根据驱动程序执行查询。

注意：如果您现在正在使用，我建议不要使用 mysql 函数。移至**mysqli**或**PDO**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:22:28.147

您调用了错误的查询。

php 需要知道查询的位置。

例子：

```
$result = mysql_query("SELECT * FROM Persons"); 
```

在此处阅读有关 mysql 查询的更多信息：http: [//php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:34:13.913

试试这个，是 $carnet 连接字符串变量吗？

```
function getPrelaciones($carnet){

$result = mysql_query("SELECT mhm.Materia_codigo1 FROM Materia_has_Materia mhm, Materia m, (SELECT mha.Materia_codigo as materianovista FROM Materia_has_Alumno mha WHERE mha.Alumno_carnet = '%s')as n WHERE n.materianovista = mhm.Materia_codigo AND mhm.Materia_codigo1 != ' ' AND n.materianovista = m.codigo", $carnet);
$rows = mysql_fetch_assoc($result);
print json_encode($rows);
} 
```

# mysql - 选择查询中的最小值

> ID：15807178
> 
> 赞同：0
> 
> 时间：2013-04-04T09:19:59.110
> 
> 标签：mysql

我已经查看了许多关于从列名中选择最小值的问答，即 [找到最小值和最大值](https://stackoverflow.com/questions/4254567/selecting-the-max-and-min-records-in-one-mysql-command) ，但我的问题没有解决。

```
SELECT MIN(column1  + (5 * 24 * 60 * 60) AS deadline1, column2 +(1 * 24 * 60 * 60) AS deadline2) AS deadline FROM table_name 
```

显示错误代码`Error Code : 1064`

如何从两个值中选择最小值？有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T09:24:39.467

MySQL`MIN`仅用作聚合函数。要选择几个表达式中的最小值，您必须使用`LEAST`：

```
SELECT LEAST(column1  + (5 * 24 * 60 * 60), column2 +(1 * 24 * 60 * 60)) AS deadline FROM table_name 
```

# c - 带缓存的递归斐波那契计算 - 找不到错误

> ID：15807180
> 
> 赞同：1
> 
> 时间：2013-04-04T09:20:08.040
> 
> 标签：c, algorithm, recursion

我写了一个简单的函数来计算斐波那契数，但它进入了无限循环并崩溃了。我似乎无法在这里找到问题所在。

```
#include <stdio.h>

int fib(int number, int *cache);

int main(int argc, char *argv[])
{
    int cache[20] = {0};
    int result = fib (3, cache);
    printf("%d ", result);
}

int fib(int number, int *cache)
{
    if (number == 0) return 0;
    if (number == 1) return 1;

    if (cache[number] != 0) return cache[number];

    int result = fib(number - 1, cache) + (number - 2, cache);
    cache[number] = result;
    return result;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T09:24:03.257

此行包含错误

```
int result = fib(number - 1, cache) + (number - 2, cache); 
```

`fib`不见了。它应该是

```
int result = fib(number - 1, cache) + fib(number - 2, cache); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:48:59.650

除了@MOHAMED 的回答，您只需初始化`cache[0]`，其他元素可以包含任意垃圾（访问它们确实是未定义的行为）。按预期工作;-)

# java - 尝试发送邮件空指针异常

> ID：15807181
> 
> 赞同：0
> 
> 时间：2013-04-04T09:20:09.477
> 
> 标签：java, email, nullpointerexception

我正在尝试从数据库中获取电子邮件地址以使其成为“InternetAddress 收件人”，但它返回一个 nullPointerException 并且没有关于该问题的更多信息。这是代码：

```
public class SendEmail implements ISendMail {

@Override
public void sendEmail(Action action) {
    if (action.getCopieAction() != null) {
        try {

            Properties props = new Properties();
            Session session = Session.getInstance(props);
            Message message = new MimeMessage(session);
            UtilisateurDao user = new UtilisateurDao();
            // récupération du code user de l'utilisateur

            Integer codeUserEnCopie = action.getCopieAction();
            System.out.println(codeUserEnCopie);
            Utilisateur util = user.findUserByCode(codeUserEnCopie);
            String mailUserCopie = util.getEMAIL();

            InternetAddress recipient = new InternetAddress(mailUserCopie);
            message.setRecipient(Message.RecipientType.TO, recipient);
            message.setSubject("Vous êtes en copie d'une action");
            message.setText("Bonjour, l'utilisateur "
                    + action.getUtilCreation()
                    + " vous à mis en copie d'une action:"
                    + "Nom de l'action : " + action.getObjetAction()
                    + "Détails de l'action : " + action.getTexteAction()
                    + "Date de l'action : " + action.getDateAction());

            Transport.send(message);
        } catch (NoSuchProviderException e) {
            System.err.println("Pas de transport disponible pour ce  
                            protocole");
            System.err.println(e);
        } catch (AddressException e) {
            System.err.println("Adresse invalide");
            System.err.println(e);

        } catch (MessagingException e) {
            System.err.println("Erreur dans le message");
            System.err.println(e);

        }

    }

}

} 
```

获取数据库中用户的函数

```
public Utilisateur findUserByCode(Integer codeUser) {
System.out.println(codeUser);
    Utilisateur util = new Utilisateur();
    util = null;

    try{

        System.out.println("ddd");
        Query requete = em.createQuery("SELECT u FROM Utilisateur u WHERE 
                    u.codeUtilisateur="+codeUser);
        requete.setParameter("codeuser", codeUser);
        util = (Utilisateur) requete.getSingleResult();

    }catch(NoResultException e){

        System.out.println(e.getMessage() + e.getCause());
        FacesMessage message = new FacesMessage(e.getMessage() + e.getCause());
        FacesContext.getCurrentInstance().addMessage(null, message);
        e.printStackTrace(); 
    }

    return util;
}

  and the fonction that calls the fonction sendEmail

   public void creerAction(Action action) {

    try {
        ISendMail sendMail = new SendEmail();
        sendMail.sendEmail(action);
        System.out.println(action.getCopieAction());
        em.persist(action);

        em.flush();

        FacesMessage message = new FacesMessage("Action  " + 
  action.getObjetAction() + " ajouté avec succès avec en copie"+ action.getCopieAction());
        FacesContext.getCurrentInstance().addMessage(null, message);
    } catch (PersistenceException e) {
        System.out.println(e.getMessage());
    }
} 
```

我怎样才能获得有关错误的更多信息？

堆栈跟踪：

```
javax.faces.el.EvaluationException: javax.ejb.EJBException
at javax.faces.component.MethodBindingMethodExpressionAdapter.
   invoke(MethodBindingMethodExpressionAdapter.java:102)
at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
at javax.faces.component.UICommand.broadcast(UICommand.java:315)
at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.
    call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:662)
    Caused by: javax.ejb.EJBException
at com.sun.ejb.containers.BaseContainer.processSystemException(BaseContainer.java:5215)
at com.sun.ejb.containers.BaseContainer.completeNewTx(BaseContainer.java:5113)
at com.sun.ejb.containers.BaseContainer.postInvokeTx(BaseContainer.java:4901)
at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:2045)
at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1994)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.
    invoke(EJBLocalObjectInvocationHandler.java:222)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.
    invoke(EJBLocalObjectInvocationHandlerDelegate.java:88)
at $Proxy699.creerAction(Unknown Source)
at beans.ActionBean.ajouter(ActionBean.java:57)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.sun.el.parser.AstValue.invoke(AstValue.java:254)
at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
at javax.faces.component.MethodBindingMethodExpressionAdapter.
     invoke(MethodBindingMethodExpressionAdapter.java:88)
... 32 more
    Caused by: java.lang.NullPointerException
at dao.UtilisateurDao.findUserByCode(UtilisateurDao.java:157)
at dao.SendEmail.sendEmail(SendEmail.java:33)
at dao.ActionDao.creerAction(ActionDao.java:84)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.glassfish.ejb.security.application.EJBSecurityManager.
    runMethod(EJBSecurityManager.java:1052)
at org.glassfish.ejb.security.application.EJBSecurityManager.
    invoke(EJBSecurityManager.java:1124)
at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.
    invokeNext(InterceptorManager.java:800)
at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.
    doAround(SystemInterceptorProxy.java:162)
at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.
     aroundInvoke(SystemInterceptorProxy.java:144)
at sun.reflect.GeneratedMethodAccessor615.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.
    intercept(InterceptorManager.java:861)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.
    invokeNext(InterceptorManager.java:800)
at com.sun.ejb.containers.interceptors.InterceptorManager.
     intercept(InterceptorManager.java:370)
at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.
    invoke(EJBLocalObjectInvocationHandler.java:214)
... 43 more

   the DAO

public Utilisateur findUserByCode(Integer codeUser) {
System.out.println(codeUser);
    Utilisateur util = new Utilisateur();
    util = null;

    try{

        System.out.println("ddd");
        Query requete = em.createQuery(SELECT_BY_CODE_USER);
        requete.setParameter("codeuser", codeUser);
        util = (Utilisateur) requete.getSingleResult();

    }catch(NoResultException e){

        System.out.println(e.getMessage() + e.getCause());
        FacesMessage message = new FacesMessage(e.getMessage() + e.getCause());
        FacesContext.getCurrentInstance().addMessage(null, message);
        e.printStackTrace(); 
    }

    return util;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:28:53.803

看看这一行：

在 dao.UtilisateurDao.findUserByCode(UtilisateurDao.java:157)

您的异常应该源自那里。

# php - 从 php 代码运行 sql 文件以在不同的服务器中插入数据

> ID：15807187
> 
> 赞同：0
> 
> 时间：2013-04-04T09:20:27.583
> 
> 标签：php, mysql

我想将数据从测试服务器数据库传输到实时服务器数据库。数据采用 .sql 文件的形式。所以在舞台服务器上使用 php 我可以使用 shell_exec(); 传输数据吗？

```
$command = "mysql -u{$vals['db_user']} -p{$vals['db_pass']} "
 . "-h {$vals['db_host']} -D {$vals['db_name']} < {$script_path}";

$output = shell_exec($command . '/shellexec.sql'); 
```

上面的代码不起作用。还有其他方法吗？

# android - 如何在 Android 中集成支付网关功能

> ID：15807190
> 
> 赞同：9
> 
> 时间：2013-04-04T09:20:38.250
> 
> 标签：android, paypal, payment-gateway

如何在*Android 应用程序中***集成支付网关功能**，我制作了一个*购物车应用程序*，现在我想在其中添加支付网关功能，请建议我......*允许用户进行支付的最佳方式*

 ***我是否需要使用一些*现成的类*或需要*导入任何支付 SDK* ....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T09:54:50.723

嗨@JimmyHill 几天前我处于同样的情况，这个链接帮助了我： http: [//knowledge.itdoctorz.com/141/](http://knowledge.itdoctorz.com/141/)

使用以下代码：

```
Public void onClick (View v) {

PayPalPayment payment = new PayPalPayment();

payment.setSubtotal(new BigDecimal(“8.25″));

payment.setCurrencyType(“USD”);

payment.setRecipient(“.....@gmail.com”);

payment.setPaymentType(PayPal.PAYMENT_TYPE_GOODS);

Intent checkoutIntent = PayPal.getInstance().checkout(payment, this);

startActivityForResult(checkoutIntent, 1);

} 
```

我希望这个链接对你有帮助:)

更新：：

添加了答案的新链接，其中包含在 android 中集成支付网关功能的详细步骤

链接:: [https://developer.paypal.com/docs/classic/mobile/ht_mpl-itemPayment-Android/](https://developer.paypal.com/docs/classic/mobile/ht_mpl-itemPayment-Android/)***

# c# - C#如何将数据放入数组中的数组中

> ID：15807191
> 
> 赞同：0
> 
> 时间：2013-04-04T09:20:46.780
> 
> 标签：c#, arrays

我正在尝试用 C# 构建一个 CD 收集程序，它可以

1.  创建一个新专辑（即，在您的专辑数据库中添加一个新条目）
2.  更改或删除相册数据库中的现有相册
3.  在专辑中输入一段音乐的详细信息（标题、艺术家、流派和音乐长度）
4.  更改或删除专辑中现有音乐的详细信息
5.  列出给定专辑中所有音乐的详细信息
6.  列出给定艺术家的所有音乐
7.  列出数据库中的所有音乐。您的程序必须允许用户选择列表顺序：按专辑、按艺术家、按流派或按标题。

我被困在第三位，为每张专辑添加细节，到目前为止我有这个，我想当我做对时，其余的细节将很容易添加

```
public bool AddSong(string songName)
    {
        for (int i = 0; i < MAX_MUSIC; i++)
        {
            string c = albumName;                   // This compares the album name given by user
            string e = myMusic[i].getAlName;        // to the album name in the myMusic array
            int d = c.CompareTo(e);                 //
            if (d == 0)
            {
                int index = -1;
                for (int j = 0; j < MAX_SONG; j++)
                {
                    if (Songs[i] == null)
                    {
                        index = i;
                        break;
                    }
                }
                if (index != -1)
                {
                    Songs[index] = songName;
                    ++totalSongs;
                    return true;
                }
            }
        }

        return false;

    } 
```

任何给我方向的帮助将不胜感激。

编辑：这是家庭作业，我是一名外部学生，我的讲师和他一样好，英语说得不太好，我不指望免费赠品。只是接近的方向，也许是一个奇怪的提示；）

EDIT2：我的代码非常大，所以我认为不适合发布如此大量的代码，但我可以提供指向类的链接

[音乐数据库.cs](http://codepad.org/kbJ9KQTA)

[音乐.cs](http://codepad.org/jIeh9dTm)

[Form1.cs](http://codepad.org/W960Lbyf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:38:55.677

```
if (index != -1)
{
     Songs[index] = songName;
     ++totalSongs;
     return true;
} 
```

这是您现在需要关注的部分。

问你自己：

1.  如何创建一个新`Song`类（初始化）？
2.  如何设置`Song`类的属性？
3.  最后，如何将 应用于`Song`数组中的正确位置？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:41:24.833

> ```
>  for (int j = 0; j < MAX_SONG; j++)
>             {
>                 if (Songs[i] == null)
>                 {
>                     index = i;
>                     break;
>                 }
>             } 
> ```

您正在循环 j 但您没有在 for 循环中使用 j 。所以你真的在做同样的事情 MAX_SONG 次。

# ssl - Apache HttpClient 4.2.3 - SSLException：证书中的主机名不匹配

> ID：15807198
> 
> 赞同：3
> 
> 时间：2013-04-04T09:20:57.053
> 
> 标签：ssl, apache-httpclient-4.x, websphere-6.1, java-5, jks

我遇到了这个大问题，在谷歌上找不到任何答案，所以我试着在这里写。

我正在开发一个 Web 服务客户端。要连接到 Web 服务，我必须创建一个带有客户端身份验证的 ssl 通道并使用代理（必须从白名单 IP 进行调用）。为此，我在 WebSphere 6.1 环境下使用 HttpClient 4.2.3 库和 Java 1.5（与 1.4 的兼容模式）。

由于与工作相关，我将删除对我正在调用的实际 Web 服务的所有引用，因此您会在这里和那里找到一些奇怪的变量/主机/类名称 :)

我已经建立了这样的连接

```
 // Costruzione del proxy
    Resources res = new Resources();
    String proxyHost = res.get(PROXY_HOST);
    int proxyPort = Integer.parseInt(res.get(PROXY_PORT));

    HttpHost proxy = new HttpHost(proxyHost, proxyPort);

    // Costruzione del post method
    String serviceUrl = "https://" + someHost + meth.getServiceURL();
    HttpPost post = new HttpPost(serviceUrl);
    post.addHeader("Content-Type", "text/xml");

    String soapAction = "https://" + someHost + meth.getAction();
    post.addHeader("SOAPAction", soapAction);

    AbstractHttpEntity postBody = new StringEntity(soapEnvelope);
    post.setEntity(postBody);

    // Costruzione dell'ambiente di chiamata HTTPS
    SSLSocketFactory sslSocketFactory = new SSLSocketFactory(keyStore, res.get(KEY_STORE_PASS_CONF), trustStore);
    Scheme httpsScheme = new Scheme("https", HTTPS_PORT, sslSocketFactory);

    Scheme httpScheme = new Scheme("http", HTTP_PORT, PlainSocketFactory.getSocketFactory());

    final SchemeRegistry schemeRegistry = new SchemeRegistry();
    schemeRegistry.register(httpScheme);
    schemeRegistry.register(httpsScheme);

    PoolingClientConnectionManager connManager = new PoolingClientConnectionManager(schemeRegistry);

    HttpParams params = new BasicHttpParams();

    HttpClient client = new DefaultHttpClient(connManager, params);
    client.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy);

    // CHIAMATA A MEF
    HttpResponse resp = client.execute(post); 
```

Keystore 和 Truststore 已从文件加载

```
File ksFile = new File(res.get(KEY_STORE_PATH_CONF));
File tsFile = new File(res.get(TRUST_STORE_PATH_CONF));
InputStream ksInput, tsInput;

try {
    ksInput = new FileInputStream(ksFile);
    tsInput = new FileInputStream(tsFile);
} catch ... {}

KeyStore keyStore, trustStore;
try {
    String ksPassword = res.get(KEY_STORE_PASS_CONF);
    String tsPassword = res.get(TRUST_STORE_PASS_CONF);

    keyStore = KeyStore.getInstance(KeyStore.getDefaultType());
    keyStore.load(ksInput, ksPassword.toCharArray());   

    trustStore = KeyStore.getInstance(KeyStore.getDefaultType());
    trustStore.load(tsInput, tsPassword.toCharArray());
} catch ... {} 
```

当我尝试调用 client.execute 方法时，它给了我这个异常

```
javax.net.ssl.SSLException: hostname in certificate didn't match: <right.host.it> != <unknown.host.it>
at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java)
at org.apache.http.conn.ssl.BrowserCompatHostnameVerifier.verify(BrowserCompatHostnameVerifier.java)
at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java)
at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java)
at org.apache.http.conn.ssl.SSLSocketFactory.createLayeredSocket(SSLSocketFactory.java:628)
at org.apache.http.impl.conn.DefaultClientConnectionOperator.updateSecureConnection(DefaultClientConnectionOperator.java:232)
at org.apache.http.impl.conn.ManagedClientConnectionImpl.layerProtocol(ManagedClientConnectionImpl.java:401)
at org.apache.http.impl.client.DefaultRequestDirector.establishRoute(DefaultRequestDirector.java:842)
at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:649)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:480)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:805)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java)
at my.class.package.MyClass.callWs(MyWebService.java) 
```

我注意到一些奇怪的事情：

*   异常消息中的未知主机来自正确主机的同一域，因此它必然来自该公司的证书
*   我试图调试这个调用，看起来它需要其他证书。unknown.host.it 地址取自 x509 证书的 CN（在调试中可见），并且密钥库文件中的两个证书都包含其他 CN。此外，我的密钥库中有两个证书，当调用第一个 AbstractVerifier.verify 方法时，调用参数中有三个证书，其中一个包含 CN 中的 unknown.host.it 字符串
*   实际上，我在我拥有的任何证书中都找不到 unknown.host.it 字符串

问题可能是我不知道 SSL 是如何工作的，所以如果你在我所说的中看到任何完全错误的东西，这可能是解决我的问题的关键。

你能以某种方式帮助我吗？非常感谢！

#

更新1：后天:) 因为我想先收到答案（公司必须测试软件），所以我决定强制软件接受每个主机名。我想稍后更改它，但现在我只想让它工作。所以我在我的代码中添加了这个（不推荐使用的:)）行

```
 SSLSocketFactory sslSocketFactory = new SSLSocketFactory(keyStore, res.get(KEY_STORE_PASS_CONF), trustStore);
    sslSocketFactory.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER); 
```

现在它通过了主机名验证（惊喜:)）但仍然给我一个 403-Forbidden 错误。服务所有者说我是从列入白名单的 IP 呼叫的，所以我想问题在于服务器无法识别我。他们说我没有出示任何证书。

我添加证书的方法是在 SSLSocketFactory 构造函数中，我在其中传递带有我的证书的密钥库。我是否必须向 HttpClient 指定我想在握手时向服务器自我识别？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:11:15.330

您的服务器很可能使用服务器名称指示 (SNI) 在同一 IP 地址（和端口）上提供两个主机名。

您可以使用`openssl`, 通过明确指定服务器名称来检查这一点。例如，这两个命令将连接到相同的 IP 地址，但请求不同的主机名并提供不同的证书：

```
openssl s_client -connect www.google.co.uk:443 -servername www.google.co.uk

openssl s_client -connect www.google.co.uk:443 -servername www.google.com 
```

Java 目前仅在客户端支持 SNI，并且仅从 Java 7 开始。

# c# - jQuery 验证引擎在 Asp.Net Web 表单中总是返回 True

> ID：15807206
> 
> 赞同：0
> 
> 时间：2013-04-04T09:21:14.040
> 
> 标签：c#, jquery, asp.net, webforms, jquery-validation-engine

我在我的项目中使用了带有正确引用的 jquery 验证引擎（母版页中的源代码）。我有一个从母版页继承的页面，表单是；

```
 <tr>
            <td class="shade">
                <asp:Literal runat="server" ID="LiteralSession" Text="Year" />
            </td>
            <td>
                <asp:TextBox runat="server" ID="textBoxSession" 
                    CssClass="validate[required]" 
                    data-validation-placeholder="e.g 2012-2013" />
            </td>
        </tr>
                <td style="height: 30px">
                    <asp:Button runat="server" ID="buttonRegister" Text="Register" ValidationGroup="R"
                        OnClick="Btn_Register_Click" />
                </td> 
```

在`document.ready()`我测试验证引擎是否有错误；

```
$(document).ready(function () {
            $("#formMain").validationEngine('attach', { scroll: true });
            $('#buttonRegister').click(function (evt) {
                var isValid = $('#formMain').validationEngine('validate');
                if (!isValid) {
                    alert("not valid");
                    evt.preventDefault();
                }
                else {
                    alert("valid");
                }
            });
        }); 
```

但是，当我发布此表单时，当我不在**文本框中输入内容时****，它会返回 true**。 那么，为什么没有检测到for 错误？ **更新：**我还在我的母版页中使用更新面板，它包含所有内容占位符，包括这个（上面的 html 代码） **`jQuery Validation Engine``textBoxSession`**

# mysql - 我可以优化这个查询吗？

> ID：15807208
> 
> 赞同：2
> 
> 时间：2013-04-04T09:21:18.060
> 
> 标签：mysql, sql, query-optimization

这个非常简单的查询需要很多时间：

```
SELECT text, url, docid 
FROM retrieve 
LEFT JOIN citations2 
ON citations2.fromdoc = retrieve.docid 
WHERE citations2.todoc IS NULL 
LIMIT 10; 
```

它有一个带有 NULL 条件的左连接......这可能是原因吗？我到处都放了索引。

这是慢查询日志：

```
# Time: 130404  8:00:31
# User@Host: em[em] @ zebra [130.239.162.142]
# Query_time: 27.006579  Lock_time: 0.000019 Rows_sent: 0  Rows_examined: 90682
use em_bg04;
SET timestamp=1365055231;
SELECT text, url, docid FROM retrieve LEFT JOIN citations2 ON citations2.fromdoc =   retrieve.docid WHERE citations2.todoc IS NULL LIMIT 10; 
```

这是所涉及表的示意图，以及大小（继续向下滚动以查看`EXPLAIN`查询的输出）

![表引文2](https://i.stack.imgur.com/AOYkH.png)

![表检索](https://i.stack.imgur.com/9vQBk.png)

这是 EXPLAIN 的输出：

![在此处输入图像描述](https://i.stack.imgur.com/yyl3e.png)

所以它似乎必须通过整个表......。我当然读过[这个](http://dev.mysql.com/doc/refman/5.0/en/left-join-optimization.html)，但我无法理解它。那么，有没有办法让这个查询更快呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:30:39.043

试试这个查询

您正在利用短路，因此如果第一个条件为假，则不会检查第二个条件。

希望能帮助到你...

```
SELECT 
   text, 
   url, 
   docid 
FROM  
   retrieve 
LEFT JOIN 
   citations2 
ON 
   citations2.todoc IS NULL AND 
   citations2.fromdoc = retrieve.docid 
LIMIT 10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:40:00.993

Meherzads 查询看起来很有希望。但我会将他的查询与新创建的索引结合使用

`IDX_FROMDOC_TODOC`其中包含两列。

# jquery - 折叠/展开 optgroups

> ID：15807209
> 
> 赞同：0
> 
> 时间：2013-04-04T09:21:21.683
> 
> 标签：jquery

有没有办法扩展或折叠 optgroups？我有非常长的列表，我必须将它们加载到列表中，并且很难以这种方式查找某些项目。真的希望如此，如果是这样，在此先感谢。

这是一个类似的解决方案 - **[FIDDLE](http://jsfiddle.net/nel_mo/gad27q4b/5/)**。不是一个 optgroup，但可以适应以类似的方式行事。

> ```
> $(".header").click(function () {
>     $header = $(this);
>     $content = $header.next();
>     $content.slideToggle(200, function () {
>         $('.contentCol', this).fadeToggle(400);
>     });
> }); 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:31:19.167

你可以试试[Select2](https://github.com/ivaynberg/select2)。另外，您可以参考这个[Stackoverflow 讨论](https://stackoverflow.com/questions/2731668/how-to-hide-optgroup-option-elements)。

# php - 如何在 zend 框架 2 语法中写在 CSS 行下面？

> ID：15807211
> 
> 赞同：1
> 
> 时间：2013-04-04T09:21:27.547
> 
> 标签：php, css, zend-framework

我想以 zend 2 风格复制以下语法

```
"link rel="stylesheet" media="all" href="css/main.css" />"
"link rel="stylesheet" media="screen" href="css/enhanced.css" />" 
```

请帮助任何人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:31:28.237

您正在寻找[`headlink`视图助手](http://framework.zend.com/manual/2.1/en/modules/zend.view.helpers.html#headlink-helper)

以下是骨架应用程序的一些演示代码：

```
<head>
        <meta charset="utf-8">
        <?php echo $this->headTitle('ZF2 '. $this->translate('Skeleton Application'))->setSeparator(' - ')->setAutoEscape(false) ?>

        <?php echo $this->headMeta()->appendName('viewport', 'width=device-width, initial-scale=1.0') ?>

        <!-- Le styles -->
        <?php echo $this->headLink(array('rel' => 'shortcut icon', 'type' => 'image/vnd.microsoft.icon', 'href' => $this->basePath() . '/images/favicon.ico'))
                        ->prependStylesheet($this->basePath() . '/css/bootstrap-responsive.min.css')
                        ->prependStylesheet($this->basePath() . '/css/style.css')
                        ->prependStylesheet($this->basePath() . '/css/bootstrap.min.css') ?>

        <!-- Scripts -->
        <?php echo $this->headScript()->prependFile($this->basePath() . '/js/html5.js', 'text/javascript', array('conditional' => 'lt IE 9',))
                                      ->prependFile($this->basePath() . '/js/bootstrap.min.js')
                                      ->prependFile($this->basePath() . '/js/jquery.min.js') ?>

    </head> 
```

# ruby-on-rails - 在哪里可以在 Rails 中设置跟踪（永久）cookie？

> ID：15807214
> 
> 赞同：8
> 
> 时间：2013-04-04T09:21:29.197
> 
> 标签：ruby-on-rails, ruby, cookies

我正在尝试跟踪“匿名”用户的行为，并在他们注册后最终将其与他们的帐户相关联。我想我会通过设置一个永久cookie来做到这一点。我最好的选择是在 ApplicationController 中有以下内容：

```
class ApplicationController < ActionController::Base
  before_filter :set_tracking_cookie
  def set_tracking_cookie
    cookies.permanent[:user_uuid] = SecureRandom.uuid unless cookies[:user_uuid]
  end
end 
```

这是正确的方法还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T09:55:30.253

看起来不错，永久 cookie 将在很远的将来（20 年左右）到期，所以只要用户不手动删除它，您应该能够跟踪他。

我在很多地方都使用过这样的结构，它的作用就像魅力一样。如果您包含要通过此操作加载的内容（典型的跟踪像素），您甚至可以使其在外部登录页面上运行。

# javascript - 获取错误网页访问在 IE 中被拒绝

> ID：15807218
> 
> 赞同：1
> 
> 时间：2013-04-04T09:21:34.737
> 
> 标签：javascript, html, file-upload, upload

我正在使用 $('#dropbox').click 打开文件对话框，然后选择要上传的文件。然后在 Firefox 成功文件上传但在 IE Get Error WebPage Access is denied 中单击按钮上传文件（**行 form.submit();**）。

```
$(document).ready(function(){
if((support.fileReader==false)&&(support.formData==false)){
$('input[type=button]').eq(0).attr("onClick",'fileUpload(this.form,"UploadHandler.ashx","upload");returnfalse;');
$('input[type=file]').eq(0).attr("onchange","fileSelectedIE();");
}
$('#dropbox').click(function(){
$('input[type=file]').click();
});
});
functionfileUpload(form,action_url,div_id){
//Createtheiframe...
variframe=document.createElement("iframe");
iframe.setAttribute("id","upload_iframe");
iframe.setAttribute("name","upload_iframe");
iframe.setAttribute("width","0");
iframe.setAttribute("height","0");
iframe.setAttribute("border","0");
iframe.setAttribute("style","width:0;height:0;border:none;");
//target="#fileIframe"
//Addtodocument...
form.parentNode.appendChild(iframe);
window.frames['upload_iframe'].name="upload_iframe";

iframeId=document.getElementById("upload_iframe");

//Addevent...
vareventHandler=function(){

if(iframeId.detachEvent){
iframeId.detachEvent("onload",eventHandler);
$('#progressNumber').text("100%");
}
elseiframeId.removeEventListener("load",eventHandler,false);
if(iframeId.addEventListener)iframeId.removeEventListener("progress",uploadProgress1,false);
//Messagefromserver...
if(iframeId.contentDocument){
content=iframeId.contentDocument.body.innerHTML;
}elseif(iframeId.contentWindow){
content=iframeId.contentWindow.document.body.innerHTML;
}elseif(iframeId.document){
content=iframeId.document.body.innerHTML;
}

document.getElementById(div_id).innerHTML=content;

//Deltheiframe...
setTimeout('iframeId.parentNode.removeChild(iframeId)',250);
}

if(iframeId.addEventListener){
iframeId.addEventListener("load",eventHandler,true);
$('#progressNumber').text("Processing...");
}
if(iframeId.attachEvent)iframeId.attachEvent("onload",eventHandler);
//if(iframeId.addEventListener)iframeId.addEventListener("progress",uploadProgress1,false);

//Setpropertiesofform...
form.setAttribute("target","upload_iframe");
form.setAttribute("action",action_url);
form.setAttribute("method","post");
form.setAttribute("enctype","multipart/form-data");
form.setAttribute("encoding","multipart/form-data");
//Submittheform...
**form.submit();**

document.getElementById(div_id).innerHTML="Uploading...";
}
functionfileSelectedIE(){
varfullname=$('#fileToUpload').val().toString();
varIndexExt=fullname.lastIndexOf(".");
varext=fullname.substr(IndexExt+1).toString();
varIndexFileName=fullname.lastIndexOf("\\");
varFileName=fullname.substring(IndexFileName+1,IndexExt).toString();
document.getElementById('fileName').innerHTML='Name:'+FileName;
document.getElementById('fileSize').innerHTML='Size:NotSupport';
document.getElementById('fileType').innerHTML='Type:'+ext;
}

<div id="dropbox"></div>
<input type="file" name="fileToUpload[]" id="fileToUpload" /></br>
<input type="button" value="upload"/> 
```

我在 IE 中需要什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:03:00.757

您不能务实地（通过 Javascript）单击文件输入元素，然后通过 Javascript 提交关联的表单。IE 根本不允许这样做。您的工作流程被视为违反安全规定。您将需要重新考虑您的方法。

# memcached - 尽管一直被覆盖，但键被删除

> ID：15807221
> 
> 赞同：0
> 
> 时间：2013-04-04T09:21:41.223
> 
> 标签：memcached

我在专用服务器上使用 MemCache。

我有 2 个应用程序：

第一个应用程序有一个每 1 秒运行一次的任务，并将键 + 值设置为 MemCache，TTL=3 秒。

第二个应用程序有一个每 1 秒运行一次的任务，它从 MemCache 读取密钥并对其值做一些事情。

问题是，几个小时后，第二个应用程序似乎尝试从 MemCache 读取密钥，尽管第一个应用程序一直在写入它，但它并没有出现。

我必须强调的是，我们向 MemCache 写入了几个字节，并且不可能将其填满并清除所有内存。

任何想法为什么会发生这种情况？

谢谢你。

# javascript - jQuery 悬停淡入/淡出/滑动切换

> ID：15807225
> 
> 赞同：1
> 
> 时间：2013-04-04T09:21:55.263
> 
> 标签：javascript, jquery

当我悬停时，我可以获得我需要的效果，但是当我将鼠标移动到“我的列表”`a`标签时，`#bb`div 消失了。我怎么能让它留在那里，因为我需要点击它。

**HTML：**

```
<div id="aa">click</div>
<div id="bb"> <a href="">my list</a></div> 
```

**jQuery：**

```
$('#bb').hide();
$('#aa').hover(function(){
    $('#bb').slideToggle();
}); 
```

在线示例 - [http://jsfiddle.net/9tjZK/](http://jsfiddle.net/9tjZK/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:26:33.023

更改您的 HTML，使锚点位于您绑定 mouseenter/leave 事件的元素内：

```
<div id="aa">click
    <div id="bb"> 
        <a href="">my list</a>
    </div>
</div> 
```

[**小提琴**](http://jsfiddle.net/9tjZK/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:31:21.040

将您的 HTML 更改为：

```
<div id="wrapper">
    <div id="aa">click</div>
    <div id="bb"> <a href="">my list</a></div>
</div> 
```

和 jQuery 代码：

```
$('#bb').hide();

$("#wrapper").hover(
  function () {
    $('#bb').stop(true, true).slideDown();
  },
  function () {
    $('#bb').stop(true, true).fadeOut();
  }
); 
```

演示：http: [//jsfiddle.net/9tjZK/9/](http://jsfiddle.net/9tjZK/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:29:49.963

**在这里工作 jsFiddle - [http://jsfiddle.net/9tjZK/7/](http://jsfiddle.net/9tjZK/7/)。**

HTML：

```
<div id="container">
<div id="aa">click</div>
<div id="bb"> <a href="">my list</a></div>
</div> 
```

jQuery：

```
$('#bb').hide();
$('#aa').mouseenter(function(){
    $('#bb').fadeIn();
});

$('#container').mouseleave(function(){
   $('#bb').fadeOut();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T09:33:07.010

olo，您可以尝试使用单击事件而不是悬停，这将为您提供所需的结果。

`you can check here http://jsfiddle.net/9tjZK/8/`

# android - linux下的安卓sdk

> ID：15807231
> 
> 赞同：0
> 
> 时间：2013-04-04T09:22:14.350
> 
> 标签：android, linux

我为 linux 32bit 下载了 android adt bundle 并使用命令行创建了项目。但是当我尝试运行 adb 时，它告诉无法执行二进制文件..有什么帮助吗？

```
adb devices 
adb : cannot execute binary file 
```

[我通过引用此链接http://developer.android.com/tools/projects/projects-cmdline.html](http://developer.android.com/tools/projects/projects-cmdline.html) 创建了这样的项目来遵循这些步骤：

```
android create project \
--target 1 \
--name MyAndroidApp \
--path ./MyAndroidAppProject \
--activity MyAndroidAppActivity \
--package com.example.myandroid 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:29:07.457

检查您是否也在 32 位 linux 上运行（因为您说您下载了 32 位 ADK）。`uname -a`应该给你一个提示。如果这不能解决问题，请尝试`ldd /path/to/adb`查看缺少或错误版本的库是否存在任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-11T19:40:33.757

我已经尝试了很多次，但现在可以了。

在简历中，对于 32 位操作系统：

*   从谷歌搜索下载platform-tools_r23.0.1-linux.zip（我觉得名字是对的）
*   将此 zip 中的文件复制到您的 Sdk 平台工具文件夹
*   打开终端（Ubuntu中预安装的程序：按Windows按钮并输入“终端”
*   键入“cd /path_to_your_sdk/platform-tools”
*   输入“chmod +x adb”
*   键入“chmod +x 快速启动”
*   然后，将这些文件复制到 /usr/local/bin，方法是始终在您所在的终端中键入："sudo cp adb /usr/local/bin" "sudo cp fastboot /usr/local/bin"
*   然后，输入 adb 并享受 Android 编程。

注意：要毫无问题地使用 Android Studio：

*   键入“sudo -i”并输入您的帐户密码
*   转到您的 android-studio bin 文件夹（“cd /your_path_to_android_studio/bin”）
*   然后输入 ./studio.sh （这个NB过程避免了接下来的权限问题）

# excel - 使用 VBA 清除工作表上的所有过滤器时速度极慢

> ID：15807234
> 
> 赞同：1
> 
> 时间：2013-04-04T09:22:19.183
> 
> 标签：excel, excel-2010, autofilter, vba

我不明白为什么这需要这么长时间才能完成，奇怪的是它在执行“ActiveSheet.ShowAllData”时花费的时间最多。谁能建议什么可以改善它？

```
Sub ClearAllFilters()
  Application.Calculation = xlManual
  Application.ScreenUpdating = False
If ActiveSheet.FilterMode Then
ActiveSheet.ShowAllData

For Each OleObj In ActiveSheet.OLEObjects
    If OleObj.progID = "Forms.CheckBox.1" Then
        OleObj.Object = False
    End If
    Next

Sheets("Manhour Summary Current Month").TextBox1.Text = ""
Sheets("Manhour Summary Current Month").TextBox2.Text = ""
Sheets("Manhour Summary Current Month").TextBox3.Text = ""

ActiveSheet.Range("$A$6:$H$1307").AutoFilter Field:=8, Criteria1:="<>0"

     End If
Application.Calculation = xlAutomatic
  Application.ScreenUpdating = True
End Sub 
```

基本上我正在清除所有自动过滤器，清除一个复选框并清除三个文本框。这是针对约 1000 行数据的，所以我认为这并不过分！

谢谢！

* * *

问题在于应用于大多数单元格的条件格式。我很惊讶拥有自动过滤器和条件格式是一个如此大的问题。

非常感谢您的所有帮助！我的头现在感觉好多了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:03:08.407

我更喜欢使用`ActiveSheet.AutoFilterMode = False`，我很想看看这是否能改善事情。

**增加的性能潜力：**

1.  如果有机会奉承你的公式是理想的，因为你有这么多。

2.  如果这些是必需的，但您可以根据要求进行更新，比如时间更新时，那么我学到的一个技巧是将第一行保留为公式，但将其余行展平，当数据更新时，然后将这些公式复制下来，更新值然后重新展平除第一行之外的所有内容。

3.  上述方法的替代方法是创建一个更新这些值的过程，并在需要时运行此程序，并且根本没有公式。

**发布条件格式问题：**

1.  作为一种改进条件格式的方法，一旦通过 VBA 更新数据，您可以让工作表更改单元格格式。这将减少每次过滤时执行此操作的 excel。

2.  另外，由于您的情况，**我最喜欢**`Sat 2-Mar-13`的可能是让您的日期显示当天，例如。这仍然可以快速检查周末并提高性能。

# javascript - 使用搜索动态隐藏 div

> ID：15807236
> 
> 赞同：1
> 
> 时间：2013-04-04T09:22:24.690
> 
> 标签：javascript

JSFiddle 我到目前为止所做的事情[http://jsfiddle.net/chQ2T/3/](http://jsfiddle.net/chQ2T/3/)

正如你所看到的，我有一些这样安排的div

```
<div id = "container">
    <div id = "abc" class = "box">
        ABC        
    </div>
    <div id = "cde" class = "box">
        CDE
    </div>
    <div id = "efg" class = "box">
        EFG
    </div>    
</div> 
```

还有一个搜索框，我想根据搜索查询（在每次笔划后执行）和 div id 动态隐藏和显示 div。因此，键入`c`应该隐藏所有 id 不包含子字符串“c”的 div，即最后一个。

之后键入`d`应该隐藏额外的 div abc，因为它不包含子字符串“cd”。退格应该恢复它。所以基本上这是一个标准的动态搜索。

缺少的是用于隐藏和显示的 Javascript 函数。

```
function hide_divs(search) {
    $("#container").not("#"+search).hide();
}

$(document).ready(function() {
    $("#search_field").keyup(function() {
        var search = $.trim(this.value);
            hide_divs(search);
    });
}); 
```

我正在努力恢复以前隐藏的 div。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T09:25:40.770

请参阅此更新的演示：http: [//jsfiddle.net/chQ2T/4/](http://jsfiddle.net/chQ2T/4/)

该`hide_divs()`功能已稍作修改，以首先隐藏所有 div，然后仅显示匹配的那些。

```
function hide_divs(search) {
    $("#container > div").hide(); // hide all divs
    $('#container > div[id*="'+search+'"]').show(); // show the ones that match
}

$(document).ready(function() {
    $("#search_field").keyup(function() {
        var search = $.trim(this.value);
        hide_divs(search);
    });
}); 
```

# c# - 使用 C# 正则表达式，获取两个字符串之间的值

> ID：15807242
> 
> 赞同：0
> 
> 时间：2013-04-04T09:22:44.883
> 
> 标签：c#, regex

我的测试数据

```
Date:Fri 14-Mar-2003 Venue:S.F.S. Crowd:24,172 
```

我感兴趣的数据

```
Fri 14-Mar-2003 
```

我目前拥有的代码

```
string datePattern = "Date:(.*?) Venue";
string tempDate = Regex.Match(values[(int)HomeColumnNames.VenueCrowdDate], datePattern).Value; 
```

正在返回的数据

```
Date:Fri 14-Mar-2003 Venue 
```

任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:27:00.713

您将单词包含在您的正则表达式中，因此它们将位于提取的字符串中。尝试

```
string datePattern = @"{\w+}\s+{\d{1,2}-{\w+}-{\d{4,}"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:30:24.530

您还可以循环考虑匹配的组。

```
var groups = Regex.Match(values[(int)HomeColumnNames.VenueCrowdDate], datePattern).Groups;
Console.WriteLine(groups[1].Value); //Fri 14-Mar-2003 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T09:32:10.430

你的正则表达式没问题。只是你需要得到第一组。

```
var match= Regex.Match(values[(int)HomeColumnNames.VenueCrowdDate], datePattern);

match.Groups[0]; //returns full match
match.Groups[1]; //returns 1st group

//Gets MatchCollection
var matches= Regex.Matches(values[ManyAddresses, datePattern); 
```

使用@bash.d 的模式对其他样本更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T09:30:58.383

您要返回比赛，而不是您的捕获组。

以下代码将允许您明确命名（并随后引用）您的捕获。没有必要明确命名或编号您的组......但这是一种很好的做法。

```
String groupName = "yourGroupName";
Regex r = new Regex(@"Date:(?<" + groupName + ">.*?) Venue");
Matches m = r.Match(yourTestData);
Console.WriteLine(m.Groups[groupName]); 
```

# json - 谷歌饼图没有显示任何切片，但其他

> ID：15807244
> 
> 赞同：3
> 
> 时间：2013-04-04T09:22:45.760
> 
> 标签：json, visualization, pie-chart

我正在使用谷歌可视化图表，我遇到了以下问题。

我有一个页面显示图表。可以在不同的图表之间切换。每个图表选项都有效，饼图除外。

饼图是可见的，但它只是一个显示 100% 的灰色圆圈。

我在 DataTable 中得到的数据是：

```
{"cols": [{
            "id": "New jobs",
            "label": "New jobs",
            "pattern": "",
            "type": "string"
        },
        {
            "id": "Date",
            "label": "Date",
            "pattern": "",
            "type": "number"
        }
    ],
    "rows": [{"c": [{
                    "v": "01-11-2012",
                    "f": null
                },{
                    "v": "5",
                    "f": null
                }
            ]
        },{"c": [{
                    "v": "02-11-2012",
                    "f": null
                },{
                    "v": "3",
                    "f": null
                }
            ]
        },{"c": [{
                    "v": "03-11-2012",
                    "f": null
                },{
                    "v": "8",
                    "f": null
                }]
        },{"c": [{
                    "v": "04-11-2012",
                    "f": null
                },
                {
                    "v": "2",
                    "f": null
                }
            ]
        },{"c": [{
                    "v": "05-11-2012",
                    "f": null
                },
                {
                    "v": "6",
                    "f": null
                }
            ]
        },{"c": [{
                    "v": "06-11-2012",
                    "f": null
                },
                {
                    "v": "7",
                    "f": null
                }
            ]
        }
    ]
} 
```

也许 JSON 格式有问题。

如果您想了解更多信息或有可能的答案，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-03T12:13:06.493

问题已解决。

该值是一个字符串，它必须是一个数字，所以在 PHP 中只需将值转换为 int，然后将其放入数组中。

```
{"cols": [{
            "id": "New jobs",
            "label": "New jobs",
            "pattern": "",
            "type": "string"
        },
        {
            "id": "Date",
            "label": "Date",
            "pattern": "",
            "type": "number"
        }
    ],
    "rows": [{"c": [{
                    "v": "01-11-2012",
                    "f": null
                },{
                    "v": 5,
                    "f": null
                }
            ]
        },{"c": [{
                    "v": "02-11-2012",
                    "f": null
                },{
                    "v": 3,
                    "f": null
                }
            ]
        },{"c": [{
                    "v": "03-11-2012",
                    "f": null
                },{
                    "v": 8,
                    "f": null
                }]
        },{"c": [{
                    "v": "04-11-2012",
                    "f": null
                },
                {
                    "v": 2,
                    "f": null
                }
            ]
        },{"c": [{
                    "v": "05-11-2012",
                    "f": null
                },
                {
                    "v": 6,
                    "f": null
                }
            ]
        },{"c": [{
                    "v": "06-11-2012",
                    "f": null
                },
                {
                    "v": 7,
                    "f": null
                }
            ]
        }
    ]
} 
```

# ruby-on-rails - 如何在脚本中使用 ActionView::Helpers::NumberHelpers "number_with_delmeter"

> ID：15807246
> 
> 赞同：2
> 
> 时间：2013-04-04T09:22:49.953
> 
> 标签：ruby-on-rails, view-helpers

我正在为我的 rails 应用程序编写一个脚本，并且我正在尝试使用分隔符来格式化数字，以便它们更易于阅读。但是我在从 ActionView::Helpers::NumberHelpers 调用 number_with_delmeter 方法时遇到问题

我试过

```
class MyClass < ActiveRecord::base
    extend ActiveView::Helpers::NumberHelper
    def self.run
        puts "#{number_with_delimeter(1234567)}"
    end
end
MyClass.run 
```

但它只是不起作用。我总是得到未定义的方法错误。我尝试使用 include 而不是 extend 和其他一些变体。他们都没有工作。我不知道该怎么做。

有没有办法在脚本中调用这个方法？

**注意：**我调用脚本`rails r script/my_script.rb`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T09:26:23.370

一个优雅的解决方案在于委托：

```
def self.run
  puts "#{helper.number_with_delimiter(1234567)}"
end

def self.helper
  Helper.instance
end

class Helper
  include Singleton
  include ActionView::Helpers::NumberHelper
end 
```

* * *

旁注：

*   包括模块重载你的类

*   包括帮手没有帮助，因为你在课堂上工作。

*   格式化不应该是模型的工作，你应该在演示者中提取这种逻辑。

# scheme - 如何在方案中将数字分解为整数和小数部分？

> ID：15807247
> 
> 赞同：2
> 
> 时间：2013-04-04T09:22:53.787
> 
> 标签：scheme, guile, numeric-conversion

我想要一个函数`number->second-pair`，它接受一个数字并返回一对整数，表示其整数部分和小数部分乘以 1000000。

IE：

```
(number->second-pair 1)
; returns (1 . 0)
; 1 sec -> (1 sec + 0 usec)
(number->second-pair 5.1234)
; returns (5 . 123400)
; 5.1234 sec -> (5 sec + 123400 usec) 
```

您可能很容易找到解决方案，但我搜索了许多文档，遗憾的是找不到将数字转换为整数的方法。有人可以帮我吗？

顺便提一句：

实际上我想要一个更精确的`alarm`（[这个](http://www.gnu.org/software/guile/docs/docs-1.8/guile-ref/Signals.html)）通过使用`setitimer`，所以我想要精确的整数作为参数传递。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:21:10.277

我可能对计划有点生疏，但我认为这样的事情对你有用，

```
(define (number->second-pair n)
    (cons (inexact->exact (floor n))
          (inexact->exact (floor (* 1000000 (- n (floor n))))))) 
```

`(number->second-pair 5.1234)`返回`(5 . 123400)`

`(number->second-pair 1)`返回`(1 . 0)`

# ruby-on-rails - 你能有一个检查缺席的范围吗？

> ID：15807248
> 
> 赞同：1
> 
> 时间：2013-04-04T09:22:54.670
> 
> 标签：ruby-on-rails, scopes

我的数据库中有一个`Invites`表，当我以用户身份执行任务时，我想将`Event`.id 传递给范围`User.not_invited_to(event)`

如何构建此范围以检查用户 ID 是否不在其中？

```
class User
  has_many :invites, :foreign_key => 'participant_id'
  ...
end

class Invite
  belongs_to :participant, :class_name => "User", :foreign_key => "participant_id"
  ...
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:45:32.873

您可以使用`event.invite_ids`：

```
scope :not_invited, lambda { |event| where("id not in (?)", event.invite_ids) } 
```

# php - 使用 Windows server 2008 计划任务执行 PHP 文件

> ID：15807255
> 
> 赞同：6
> 
> 时间：2013-04-04T09:23:11.320
> 
> 标签：php, cron, windows-server-2008, scheduled-tasks

我知道有很多关于计划任务的帖子和一些关于执行 PHP 文件的帖子，但我已经看过并试图弄清楚但仍然不够。

我还在学习很多 Windows 服务器的方法，所以如果需要指出，请告诉我。

因此，我设置了一个计划任务，该任务将在凌晨 1 点执行，公平地说，这很有魅力，但是我没有意识到它只会在记事本中打开文件（因为这是 php 文件关联的应用程序）。

因此，我进行了研究，发现很多人说我需要将 php.exe 文件与它一起传递，这些人还提供我将其添加到任务中：

```
C:\Path\to\php.exe -f "C:\Path\to\file.php" 
```

所以我像这样把它放在操作选项卡中。请注意，屏幕截图中有一个错误，我忘了把 \php.exe 放在 sting 的末尾。 ![新任务窗口截图](https://i.stack.imgur.com/B1rJ7.png)

当我点击确定时，我被问到这个

![单击确定后的屏幕截图](https://i.stack.imgur.com/SuzwJ.png)

从图片中可以看出，它只列出了“C:\Program”

我试过移动东西但一无所有，我也尝试将第一部分用引号括起来。

那么有人可以告诉我我需要做什么或我在这里做错了什么吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T09:27:28.807

如果路径包含空格，则将其用引号引起来

```
"C:\Path\to\php.exe" -f "C:\Path\to\file.php" 
```

与执行文件的方式相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:26:55.350

你应该能够把整个事情放在引号里。我建议使用 php.exe 而不仅仅是 php。

```
"C:\Program Files (x86)\PHP\php.exe -f c:\inetpub\cron\test.php" 
```

# javascript - 单击任何链接后，使用 JavaScript 隐藏放置在 iframe 前面的 div

> ID：15807257
> 
> 赞同：-1
> 
> 时间：2013-04-04T09:23:23.133
> 
> 标签：javascript, jquery, html

我的网页中间有一个 div，它放在 iframe 前面，旁边有链接。单击任何一个链接后，我想隐藏 div。我将如何使用 javascript 执行此操作？我对此很陌生，所以请尽可能描述，以便我理解。

这是我的一些html代码。我有许多链接出现在 iframe 中。我将徽标 div 放置在 iframe 顶部，并在您进入网站时加载。但是，当您单击任何链接时，我想隐藏徽标。

```
 <li><a href="resume.html" target="center table">My Resume</a></li></br>

    <li><a href="mycourseWork.html" target="center table">My Course Work</a></li></br> 
```

我使用了下面 Dolors 记录的 jquery 代码以及我的 html 代码正文中的额外编码，当您单击链接时，div 会按我的意图消失，但一旦您单击另一个链接，它就会重新出现。我希望它消失并远离。这是我想出的附加代码

*   关于我有谁知道我怎样才能让我的标志远离？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:27:46.277

您可以使用 jQuery 执行此操作：

```
// Get the iFrame jQuery Object
var $MyFrame = $("#iframeid");

// You need to wait for the iFrame content to load first
// So, that the click events work properly
$MyFrame.load(function () {
    var frameBody = $MyFrame.contents().find('body');

    // Find the link to be clicked
    var link = frameBody.find('.link_class');

    // Set the on click event for the link
    link.on('click', function() { 

         // Hide the div inside the iFrame
         $('#divID').hide();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:34:32.487

您可以使用下面的代码

```
$('a').click(function() {    
  $('#divID').hide();        
}); 
```

假设所有链接都将加载 iframe。

# c# - 32feet.net：提供的参数无效 - Parani 模块

> ID：15807263
> 
> 赞同：2
> 
> 时间：2013-04-04T09:23:33.873
> 
> 标签：c#, .net, windows-8, bluetooth, 32feet

我在使用 Windows 8 时遇到问题：以下代码始终适用于以前版本的 Windows。

```
BluetoothSecurity.PairRequest(_myAddress,PIN);
_BTClient.Connect(_myAddress,InTheHand.Net.Bluetooth.BluetoothService.SerialPort);
return _BTClient.GetStream(); 
```

“连接”方法总是抛出异常

> System.Net.Sockets.SocketsException：{“提供了无效参数 *_myAddress*:0000110100001000800000805f9b34fb”}。”

Discovery 工作正常，所以我认为 BT Radio 工作正常。

硬件是“Dell Wireless 380 Bluetooth 4.0 Module”。

我正在连接到一个 Parani 模块 ESD100V2

感谢您提供的任何解决方案/建议/提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:42:08.803

您确实返回的 PairRequest 是真还是假？

无论如何，我过去使用过的 Parani 设备在未配对时存在连接错误。因此，要检查这一点，请通过 Windows UI 手动配对，然后查看连接是否有效。

# facebook - FB Graph API：Mutual Friends 返回空数组

> ID：15807266
> 
> 赞同：0
> 
> 时间：2013-04-04T09:23:34.527
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我有一个 FB 应用程序，我想在使用我的应用程序的 2 个用户之间找到共同的朋友。

当我为我的应用程序使用 Graph Explorer 来查找连接到我的应用程序的 2 个用户之间的共同朋友时，它会返回正确的结果。

但是，当我在我的 facebook php sdk 上运行相同的查询时，我得到空结果。这是我的代码：

```
$fb_app_id = $this->config->item('facebook_app_id');
$fb_secret = $this->config->item('facebook_secret');
$facebook = new Facebook(array(
                                    'appId'  => "$fb_app_id",
                                    'secret' => "$fb_secret",
                                    ));
$mutual_friends = $facebook->api("/802150300/mutualfriends/626070638"); 
```

$mutual_friends 在这里是一个空数组。任何想法为什么我把它弄空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T17:22:43.850

我不认为 facebook API 允许您在任何两个朋友之间获得共同的朋友。您只能访问您和另一个朋友有多少共同朋友。

# primefaces - 主要面孔对话框不显示内容

> ID：15807273
> 
> 赞同：0
> 
> 时间：2013-04-04T09:23:53.683
> 
> 标签：primefaces

我是 Primefaces 的新手。我在我的程序中使用对话框。对话框出现时对话框不显示内容，它在很长一段时间后呈现。这是为什么 ？

我的代码如下。

```
 <p:dialog header="Call Details" widgetVar="dlg_callD" resizable="false" 
                  style="font-family: Cambria, serif;font-size: 13px;line-height: 1.3em;"> 

            <p:selectOneRadio id="options" 
                              style="font-family: Cambria, serif;font-size: 13px;line-height: 1.3em;" 
                              value="#{customerDetailsController.callSuccess}" >  
                <f:selectItem itemLabel="YES" itemValue="1" />  
                <f:selectItem itemLabel="NO" itemValue="0" /> 

            </p:selectOneRadio>

        </p:dialog>  
   <p:dataTable id="dataTable_POST" var="newConnection" value="#{customerDetailsController.connectionList_voice}"
                     paginator="true" rows="10"  
                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                     rowsPerPageTemplate="5,10,15"
                     rendered="#{customerDetailsController.render_mobileList}">

            <p:column headerText="Call Count"
                      style="font-family: Cambria, serif;font-size: 13px;line-height: 1.3em;width:24%;">  
                <h:outputText value="#{newConnection.call_count}" 
                              style="font-family: Cambria, serif;font-size: 13px;line-height: 1.3em;" />  
            </p:column>
            <p:column style="width:4%">  

                <p:commandButton id="selectButton" value="View"  title="View"  onclick="dlg_callD.show()" actionListener="callAtempController."
                                 style="font-family: Cambria, serif;font-size: 13px;line-height: 1.3em;" >
                    <f:setPropertyActionListener value="#{newConnection.mobile_no}" target="#{customerDetailsController.selectedMobileNo}" /> 
                </p:commandButton>

            </p:column>  

        </p:dataTable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:32:13.620

在您的标签中会有一些东西，这将是在开始使用或标签之后。

```
 <p:dialog>
     <h:panelGrid>
         Your Dialog content......
     </h:panelGrid>
  </p:dialog> 
```

我希望这会奏效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:16:00.090

你在 commandButton selectButton 中的 actioneListner 是 "actionListener="callAtempController."" --> 错误的值。

# google-maps-api-2 - 传递经度和纬度时无法使用 gdirection 加载方法获取正确的地图

> ID：15807278
> 
> 赞同：0
> 
> 时间：2013-04-04T09:24:02.217
> 
> 标签：google-maps-api-2, gdirections

我正在使用 Gdirections 谷歌 API。因为我需要在加载方法中传递经度和纬度作为源和目标的参数。但是当我将经度和纬度作为参数传递时，它会给我一个方向错误的地图。但是当我传递源地址和目标地址时，它会给我正确的地图。

当经过纬度和经度时，如何获得具有正确行车路线的地图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:50:53.457

这是一个用法示例...尝试以下内容

```
gdir.loadFromWaypoints(["New Y...@40.714490,-74.007130", "NewJer...@40.072410,-74.728565"]); 
```

改变纽约和新泽西州.. 用你想要的城市或州..

让我知道它是否适合你..希望它有帮助..

# android - 以编程方式创建的带有 LayerDrawable 的 StateListDrawable 不适用于 Android 4.0+

> ID：15807280
> 
> 赞同：2
> 
> 时间：2013-04-04T09:24:04.137
> 
> 标签：android, android-custom-view, android-drawable, android-controls

我正在尝试创建一个带有彩色方块的选项组，供用户选择。它在 3.2 设备上运行，如下图所示： ![在此处输入图像描述](https://i.stack.imgur.com/Y8Ak9.png)

代码类似于：

```
for (int i = 0; i < COLORS.length; i++) {
        CheckBox box = new CheckBox(context);
        box.setBackgroundDrawable(getColorOption(context, COLORS[i]));
        box.setButtonDrawable(android.R.color.transparent); 
```

然后，在 getColorOption 函数中，我创建了 StateListDrawable：

```
 StateListDrawable slDrawable = new StateListDrawable();

    LayerDrawable checkedDrawable = new LayerDrawable(new Drawable[] {
            new SelectFrameShapeDrawable(transparentColor, lightRedColor),
            new SquareShapeDrawable(color) });
    LayerDrawable uncheckedDrawable = new LayerDrawable(new Drawable[] {
                    new SelectFrameShapeDrawable(transparentColor, transparentColor),
                    new SquareShapeDrawable(color) });
    slDrawable.addState(new int[] { android.R.attr.state_checked },
            checkedDrawable);
    slDrawable.addState(new int[] { -android.R.attr.state_checked }, uncheckedDrawable);
    return slDrawable; 
```

SquareShapeDrawable 类是一个 ShapeDrawable：

```
public class SquareShapeDrawable extends ShapeDrawable {
    private final Paint fillpaint;

    public SquareShapeDrawable(int color) {
        super(new RectShape());
        fillpaint = new Paint(this.getPaint());
        fillpaint.setColor(color);
    }

    @Override
    protected void onDraw(Shape shape, Canvas canvas, Paint paint) {
        shape.draw(canvas, fillpaint);
    }
} 
```

SelectFrameShapeDrawable 是：

```
private class SelectFrameShapeDrawable extends ShapeDrawable {
private final Paint fillpaint, strokepaint;

public SelectFrameShapeDrawable(int fill, int stroke) {
        super(new RectShape());
        strokepaint = new Paint(this.getPaint());
        strokepaint.setStyle(Paint.Style.STROKE);

        strokepaint.setStrokeWidth((int) (getResources()
                .getDisplayMetrics().density + 0.5f));
        strokepaint.setColor(stroke);
        int padding = (int) (4 * getResources().getDisplayMetrics().density + 0.5f);
        setPadding(padding, padding, padding, padding);

        fillpaint = new Paint(strokepaint);
        fillpaint.setColor(fill);
    }

    @Override
    protected void onDraw(Shape shape, Canvas canvas, Paint paint) {
        if (strokepaint != null)
            shape.draw(canvas, strokepaint);
        shape.draw(canvas, fillpaint);
    }
} 
```

在 4.2 设备上，所有方块都是黑色的，并且在选中时不会改变： ![在此处输入图像描述](https://i.stack.imgur.com/rNHW3.png)

问题似乎是在将可绘制对象添加到 StateListDrawable 时......知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T19:50:34.673

我通过删除扩展 ShapeDrawable 的自定义类并用下面直接使用 ShapeDrawable 类的代码替换它们来解决黑色方块问题。此代码似乎适用于所有平台。

奇怪的是，原始问题出现在 4.2 而不是 3.2。我最初的灵感来源是：[http ://www.betaful.com/2012/01/programmatic-shapes-in-android/](http://www.betaful.com/2012/01/programmatic-shapes-in-android/)

```
 ShapeDrawable selectFrame = new ShapeDrawable();
    selectFrame.setShape(new RectShape());
    selectFrame.getPaint().setColor(lightRedColor);
    selectFrame.getPaint().setStyle(Paint.Style.STROKE);
    selectFrame.getPaint().setStrokeWidth((int) (getResources().getDisplayMetrics().density + 0.5f));
    int padding = (int) (4 * getResources().getDisplayMetrics().density + 0.5f);
    selectFrame.setPadding(padding, padding, padding, padding);

    ShapeDrawable square = new ShapeDrawable();
    square.setShape(new RectShape());
    square.getPaint().setColor(color);

    LayerDrawable checkedDrawable = new LayerDrawable(new Drawable[] {
            selectFrame, square });
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T04:29:29.173

在我的带有 android 4.2 修订版 2（最新更新）的模拟器中，复选框没有出现，我发现问题是：当 setButtonDrawable 为 null 或 ColorDrawable 时，复选框测量它的大小为 0 的宽度。这不是 StateListDrawable 的原因。

我尝试设置复选框的宽度和高度，一切似乎都很好。试试这个：box.setWidth(30); box.setHeight(30); 或者当您使用“new RelativeLayout.LayoutParams(50, 50));”之类的布局参数将复选框添加到布局时。希望这有帮助

# android - 在滑动菜单中更改内容

> ID：15807281
> 
> 赞同：0
> 
> 时间：2013-04-04T09:24:12.953
> 
> 标签：android, android-listfragment, slidingmenu, dynamic-content

我正在使用 jfeinstein10/SlidingMenu 进行滑动菜单我想在选择片段中的矩形按钮时更改菜单项的内容
当尝试使用 switchcontent 用新片段替换内容时出现这样的错误

```
> 04-03 13:02:20.093: E/AndroidRuntime(6498): FATAL EXCEPTION: main
04-03 13:02:20.093: E/AndroidRuntime(6498): java.lang.IllegalStateException: Activity has been destroyed
04-03 13:02:20.093: E/AndroidRuntime(6498):     at android.support.v4.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1342)
04-03 13:02:20.093: E/AndroidRuntime(6498):     at android.support.v4.app.BackStackRecord.commitInternal(BackStackRecord.java:595)
04-03 13:02:20.093: E/AndroidRuntime(6498):     at android.support.v4.app.BackStackRecord.commit(BackStackRecord.java:574)
04-03 13:02:20.093: E/AndroidRuntime(6498):     at com.akiland.slidingmenuexample.MainActivity.switchContent1(MainActivity.java:82)
04-03 13:02:20.093: E/AndroidRuntime(6498):     at other.PipeSel$1.onItemClick(PipeSel.java:47)
04-03 13:02:20.093: E/AndroidRuntime(6498):     at android.widget.AdapterView.performItemClick(AdapterView.java:298)
04-03 13:02:20.093: E/AndroidRuntime(6498):     at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
04-03 13:02:20.093: E/AndroidRuntime(6498):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
04-03 13:02:20.093: E/AndroidRuntime(6498):     at android.widget.AbsListView$1.run(AbsListView.java:3423)
04-03 13:02:20.093: E/AndroidRuntime(6498):     at android.os.Handler.handleCallback(Handler.java:725)
04-03 13:02:20.093: E/AndroidRuntime(6498):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-03 13:02:20.093: E/AndroidRuntime(6498):     at android.os.Looper.loop(Looper.java:137)
04-03 13:02:20.093: E/AndroidRuntime(6498):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-03 13:02:20.093: E/AndroidRuntime(6498):     at java.lang.reflect.Method.invokeNative(Native Method)
04-03 13:02:20.093: E/AndroidRuntime(6498):     at java.lang.reflect.Method.invoke(Method.java:511)
04-03 13:02:20.093: E/AndroidRuntime(6498):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-03 13:02:20.093: E/AndroidRuntime(6498):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-03 13:02:20.093: E/AndroidRuntime(6498):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:36:05.357

您将在布局仪式中放置的菜单？在这种情况下，主菜单布局中有两个布局/视图。有一个 Layout/View 对 View.Visible 的可见性和其他对 View.Gone 的可见性。触发按钮单击时，切换布局/视图的可见性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:40:22.557

解决了更改的菜单内容

```
getActivity().getSupportFragmentManager()
            .beginTransaction()
            .replace(R.id.menu_frame,fragment)
            .commit();
            } 
```

在片段上

# asp.net-mvc-3 - 在 asp.net mvc3(Routing) 中处理 hashbang (#!)

> ID：15807286
> 
> 赞同：0
> 
> 时间：2013-04-04T09:24:22.627
> 
> 标签：asp.net-mvc-3

我正在使用 hashbangs(#!) 开发单页应用程序，因此应用程序 url 的格式为 #!/api/generalelections。当我直接在浏览器中输入此 url 时，mvc 似乎无法识别 hashbangs，它总是将我带到 glolab.asax 中提到的默认操作。谁能为我提供解决此问题的解决方案以重定向到正确的操作，即 api/generalelections

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:30:28.910

之后的所有内容都`#`被浏览器视为锚标记，不会提供给服务器。

在您对服务器的 Xhr 请求中，您应该使用“正常”的 uri，而不是导航的。

# asp.net - 了解 WinDbg 报告以找出 .net 中的内存泄漏

> ID：15807291
> 
> 赞同：1
> 
> 时间：2013-04-04T09:24:37.393
> 
> 标签：asp.net, memory-management, memory-leaks, windbg

我知道我的应用程序正在泄漏内存并且我使用 WinDbg 工具进行分析。我附加了 W3WP 进程并运行以下命令：

!地址——摘要

它产生了以下结果。

![WinDbg 上 !address -summary 命令的结果](https://i.stack.imgur.com/DJHjz.png)

**我希望有人帮助我理解这个结果并指导我或向我提供一个链接，这反过来将帮助我了解需要做什么**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:37:56.720

[MSDN](http://msdn.microsoft.com/en-us/library/windows/hardware/ff561519%28v=vs.85%29.aspx)链接解释了不同的内存区域是什么，就如何解释而言，您需要在泄漏之前和之后记录输出两次以查看增加的内容，我们可以通过查看最大的已使用区域来猜测，但您有一个标记为`<unknown>`。您可能需要先对符号进行排序，然后`!address`再次运行该命令。

此外，您可能会发现[umdh](http://support.microsoft.com/kb/268343)或[debugdiag](http://www.microsoft.com/en-gb/download/details.aspx?id=26798)可能会使您更容易发现泄漏，此外 WinDbg 中还有一个泄漏检测命令[`!heap -l`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff563189%28v=vs.85%29.aspx)

就链接而言，有一篇关于有用资源的[相关帖子](https://stackoverflow.com/questions/4946685/good-tutorial-for-windbg/9514933#9514933)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:13:15.037

未知 -> .Net 对象使用的内存

免费 -> 空闲区域

图像 -> dll 占用的内存。

Heap32 -> 本机对象占用的内存。（非.Net）

[http://blogs.msdn.com/b/webtopics/archive/2010/04/02/address-summary-explained.aspx](http://blogs.msdn.com/b/webtopics/archive/2010/04/02/address-summary-explained.aspx)

# ruby - 如何同时对方法、数组和哈希进行参数化

> ID：15807292
> 
> 赞同：-1
> 
> 时间：2013-04-04T09:24:39.233
> 
> 标签：ruby

我需要同时发送数组和散列的方法参数。但不知道，怎么样。这是示例：

```
def method(here should be this argument)
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:29:36.737

```
def show(*a)
 p a
 if a.length.even? == true
  p Hash[*a]
 else
  p "hash conversion not possible"
 end
end

show(1,2,3,4)
show(1,2,3) 
```

*输出：*

```
[1, 2, 3, 4]
{1=>2, 3=>4}

[1, 2, 3]
"hash conversion not possible" 
```

**编辑：**

来自 OP 的评论是 OP 可以使用的代码：

```
 def add(*arg)
   @entries = {}
   arg.each_slice(2) do |a| @entries[a.first] = a.last end
   p @entries
 end

 add(1,2,3,4) 
```

*输出：*

```
{1=>2, 3=>4} 
```

# binding - 在 Monotouch 中使用选择器和消息的绑定问题

> ID：15807296
> 
> 赞同：0
> 
> 时间：2013-04-04T09:24:41.987
> 
> 标签：binding, xamarin.ios

我一直在尝试重现这个[动画一个视图缩放弹跳？](https://stackoverflow.com/questions/6132933/animate-a-view-zoom-bouncing-in) 在 Monotouch 中，但我遇到了异常，我不知道该怎么做……这些静态方法位于实用程序类中。将消息发送到第一个选择器时会引发异常。

> MonoTouch.Foundation.MonoTouchException：抛出Objective-C异常。名称：NSInvalidArgumentException 原因：-[MainScreenbounce1AnimationStopped]：在 AnimationManager.BounceAppear (MonoTouch.BounceAppear (MonoTouch. UIKit.UIViewController 容器，MonoTouch.UIKit.UIView 视图，双倍持续时间）[0x0003a]

```
 public static void BounceAppear(UIViewController container, UIView view, double duration = 0.5)
    {
        view.Transform = CGAffineTransform.MakeScale(0.001f, 0.001f);
        UIView.BeginAnimations(null);
        UIView.SetAnimationDuration(0.3f/1.5f);
        UIView.SetAnimationDelegate(container);
        var selector = new MonoTouch.ObjCRuntime.Selector("bounce1AnimationStopped");
        Messaging.void_objc_msgSend_IntPtr_IntPtr(container.Handle, selector.Handle, container.Handle, view.Handle);
        UIView.SetAnimationDidStopSelector(selector);
        view.Transform = CGAffineTransform.MakeScale(1.1f, 1.1f);
        UIView.CommitAnimations();
    }

    [Export("bounce1AnimationStopped:forView")]
    public static void Bounce1AnimationStopped(UIViewController container,UIView view)
    {
        Console.WriteLine("Bounce1AnimationStopped");
        UIView.BeginAnimations(null);
        UIView.SetAnimationDuration(0.3f/2.0f);
        UIView.SetAnimationDelegate(container);
        var selector = new MonoTouch.ObjCRuntime.Selector("bounce2AnimationStopped");
        Messaging.void_objc_msgSend_IntPtr_IntPtr(container.Handle, selector.Handle, container.Handle, view.Handle);
        view.Transform = CGAffineTransform.MakeScale(0.9f,0.9f);
        UIView.CommitAnimations();
    }

    [Export("bounce2AnimationStopped:forView")]
    public static void Bounce2AnimationStopped(UIViewController container, UIView view)
    {
        Console.WriteLine("Bounce2AnimationStopped");
        UIView.BeginAnimations(null);
        UIView.SetAnimationDuration(0.3f/2.0f);
        view.Transform = CGAffineTransform.MakeIdentity();
        UIView.CommitAnimations();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:30:29.933

好的，我忘记注册我的课程并将其参考传递给消息传递函数

```
private static IntPtr class_ptr = Class.GetHandle("animationManager"); 
```

接着

```
Messaging.void_objc_msgSend_IntPtr_IntPtr(class_ptr, selector.Handle, container.Handle, view.Handle); 
```

# javascript - 如果禁用 Javascript，则停止加载页面

> ID：15807305
> 
> 赞同：2
> 
> 时间：2013-04-04T09:25:08.940
> 
> 标签：javascript, ruby-on-rails, cross-browser

我有一个 Rails 网络应用程序（在线考试系统）。我在考试界面中使用 JavaScript 禁用了右键单击、选择、复制等。所以，我希望我的应用程序检测是否在界面启动时启用了 JavaScript。我已经通过使用`<noscript>`标签检查了它，如下所示。

```
<noscript>
    <meta http-equiv="refresh" content="5">
            <div id="noscript_message" style="color: white; background-color: red;">
            It is detected that Javascript is turned off in your web brower. Please turn it on to load the page correctly. For more reference about how to turn it on, please refer <a href="http://www.enable-javascript.com/" target="_blank">
 instructions how to enable JavaScript in your web browser</a>.
            </div>
</noscript> 
```

但我只能检测并显示一条消息作为警告。我的意图不是加载该页面并仅显示警告消息。怎样才能做到这一点？

谢谢 ：）-

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T09:28:08.247

你可以`no-js`在你的元素上使用类`body`并用 CSS 隐藏它，然后用 JavaScript 显示它，所以如果用户禁用了 JS，他们会得到一个“空”页面。

```
<body class="no-js"> 
```

在 CSS 中：

```
body.no-js { display: none; } 
```

然后在 JS 中：

```
document.body.className = ""; 
```

# assembly - 汇编语言使用手册

> ID：15807307
> 
> 赞同：0
> 
> 时间：2013-04-04T09:25:14.847
> 
> 标签：assembly, x86

是否有针对不同处理器的所有汇编级指令的手册？每条指令的作用的列表和简要说明。我的主要兴趣是 x86，但其他处理器也很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:35:33.777

对于 x86，您最感兴趣的是[Intel 手册](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)的第 2 卷。

# php - 如何将 DOMNodeList 对象转换为数组

> ID：15807314
> 
> 赞同：23
> 
> 时间：2013-04-04T09:25:29.940
> 
> 标签：php

我有这个代码：

```
 $dom = new DOMDocument();
     $dom->load('file.xml');
     $names = $dom->getElementsByTagName('name'); 
```

现在，`$names`是 DOMNodeList 对象，我需要将此对象转换为数组，

```
 $names = (array)$names;
     var_dump($names);  // empty array 
```

上面的代码不起作用，返回一个空数组，为什么？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2014-01-29T13:18:50.340

使用 iterator_to_array() 将 DomNodeList 转换为 Array

```
$document = new DomDocument();
$document->load('test.xrds');
$nodeList = $document->getElementsByTagName('Type');
$array = iterator_to_array($nodeList); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-04T09:35:24.817

~~为什么[（数组）](http://www.php.net/manual/en/language.types.array.php#language.types.array.casting)不起作用？因为[DOMNodeList](http://www.php.net/manual/en/class.domnodelist.php)对象只有一个属性[length](http://www.php.net/manual/en/class.domnodelist.php#domnodelist.props.length)，而且它是整数类型：~~

> ~~如果将对象转换为数组，则结果是一个数组，其元素是对象的属性。键是成员变量名称，有一些值得注意的例外：**整数属性是不可访问的**；私有变量在变量名前面加上类名；受保护的变量在变量名前有一个“*”。这些前置值在两边都有空字节。~~

由于[DOMNodeList](http://www.php.net/manual/en/class.domnodelist.php)实现了[Traversable](http://www.php.net/manual/en/class.traversable.php)接口，因此自己创建数组相当容易：

```
$array = array();
foreach($names as $node){
    $array[] = $node;
} 
```

* * *

**编辑：**我已经删除了最初的解释，因为它不适用于这里。手册的意思是带有数字名称的属性被传递给数组但无法读取：

```
<?php

class Foo{
    public function __construct(){
        $this->{123} = 456;
    }
}

$array = (array)new Foo;
var_dump($array);
var_dump($array['123']); 
```

```
array(1) {
  ["123"]=>
  int(456)
}

Notice: Undefined offset: 123 in D:\tmp\borrame.php on line 11
NULL 
```

解释可能更多的`DOMNodeList`是不是使用 PHP 代码创建的用户对象，而是用 C 定义的内置对象，因此适用不同的规则。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-04T09:31:49.463

只需遍历元素并将它们放入数组中：

```
$names_array = array();
foreach ($names as $name) {
    $names_array[] = $name; // this is a DOMNode instance
    // you might want to have the textContent of them like this
    $names_array[] = $name->textContent;
} 
```

这样它们仍然是 DOMNode 实例，您可能想要获取它们的`textContent`属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T09:34:39.587

```
$dom = new DOMDocument();
$dom->load('file.xml');
$names = $dom->getElementsByTagName('name');
$headlines = array();

foreach($names as $name) {
    $headline = array();
    if($name->childNodes->length) {
        foreach($name->childNodes as $i) {
            $headline[$i->nodeName] = $i->nodeValue;
        }
    }

    $headlines[] = $headline;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-21T17:20:03.080

假设您想要实际值而不是创建 DOM 节点数组：

```
foreach($nodelist as $node) {
    $values[] = $node->nodeValue;
} 
```

# vb.net - 放置“AsEnumerable”时，LINQ“不支持方法连接”消失了

> ID：15807316
> 
> 赞同：0
> 
> 时间：2013-04-04T09:25:33.077
> 
> 标签：vb.net, wcf, linq, asenumerable

我有一个从数据实体查询数据的 WCF。如果语法没有放入“AsEnumerable”，我有点困惑为什么它会抱怨“方法加入不支持”，并且它有一种不使用 AsEnumerable 的方法。因为我读过一些文章提到它会在执行“where”条件之前放置所有数据。

```
 Dim ent As DataEnties.DPPromoterEntities
        Dim que = Nothing
        Dim sRet As String = ""

        Try
            ent = New DataEnties.DPPromoterEntities(New Uri(AppSettings.Item("Data")))

            que = From CHS In ent.RC_CampaignHubSpokeTbl.AsEnumerable  '<--This line 
                  Join Cam In ent.RC_CampaignTbl.AsEnumerable On Cam.intCampaign Equals CHS.intCampaign'<--This line 
                  Where Cam.tintStatus.Equals(1)
                  Select New With {CHS.intCampaign,
                                   CHS.intCouponRefHub,
                                   CHS.intCouponRefSpoke,
                                   CHS.intHubRef,
                                   CHS.intSpokeRef}
            sRet = New JavaScriptSerializer().Serialize(que)

        Catch ex As Exception
            clsLog4Net.WriteLog(System.Reflection.MethodBase.GetCurrentMethod.Name.ToString, ex.Message, True)
        End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:38:34.240

`AsEnumerable`强制将`Join`语句执行到 LINQ to Objects 中。因此，所有来自 WCF 的数据`RC_CampaignHubSpokeTbl`以及`RC_CampaignTbl`将从 WCF 获取的所有数据，然后在您的应用程序中组合在一起。

这是必要的，因为 WCF 调用不支持连接。

要稍微优化您的查询，您可以执行以下操作：

```
que = From CHS In ent.RC_CampaignHubSpokeTbl.AsEnumerable()
      Join Cam In ent.RC_CampaignTbl.Where(Function(c) c.tintStatus.Equals(1)).AsEnumerable() On Cam.intCampaign Equals CHS.intCampaign
      Select New With {CHS.intCampaign,
                       CHS.intCouponRefHub,
                       CHS.intCouponRefSpoke,
                       CHS.intHubRef,
                       CHS.intSpokeRef} 
```

进一步可能的优化 - 不确定`Contains()`在 WCF 调用中是否可用，因此您必须自己检查它。

```
Dim compains = ent.RC_CampaignTbl.Where(Function(c) c.tintStatus.Equals(1)).ToArray()
Dim HubSpokes = ent.RC_CampaignHubSpokeTbl.Where(Function(h) compains.Contains(h.intCampaign)).ToArray()

que = From CHS In compains 
      Join Cam In HubSpokes  On Cam.intCampaign Equals CHS.intCampaign
      Select New With {CHS.intCampaign,
                       CHS.intCouponRefHub,
                       CHS.intCouponRefSpoke,
                       CHS.intHubRef,
                       CHS.intSpokeRef} 
```

# python - 使用python将数据库数据存储到json文件中

> ID：15807317
> 
> 赞同：0
> 
> 时间：2013-04-04T09:25:34.803
> 
> 标签：python, django, json, django-views

在我的应用程序中，我试图将数据库数据保存到 JSON 文件中。

这是我的views.py：

```
if request.POST:
        form = BookForm(request.POST)
        if form.is_valid():
            cd = form.cleaned_data
            form.save()

            JSONSerializer = serializers.get_serializer("json")
            json_serializer = JSONSerializer()
            with open("book.json", "w") as out:
                json_serializer.serialize(Book.objects.all(), stream=out)

        return redirect('/index/')
    return render_to_response('addbook.html',{ 'form':form },context_instance=RequestContext(request)) 
```

我正在使用序列化程序来做到这一点。
问题是数据保存在数据库中，但没有写入文件。

运行上述代码时出现以下错误

```
IOError at /addbook/
[Errno 2] No such file or directory: 'fixtures/book.json'
Request Method: POST
Request URL:    http://localhost:8000/addbook/
Django Version: 1.3.7
Exception Type: IOError
Exception Value:    
[Errno 2] No such file or directory: 'fixtures/book.json'
Exception Location: /root/Samples/DemoApp/DemoApp/views.py in addbook, line 53
Python Executable:  /usr/bin/python
Python Version: 2.7.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:49:49.737

```
path = "{0}/app_name/fixtures/book.json".format(settings.PROJECT_ROOT)
with open(path, "w") as out:
    json_serializer.serialize(Book.objects.all(), stream=out) 
```

# r - xts 将数据帧转换为字符

> ID：15807318
> 
> 赞同：4
> 
> 时间：2013-04-04T09:25:34.803
> 
> 标签：r, xts

我有一个 csv 文件并使用提取数据

```
banknifty <- as.xts(read.zoo("banknifty.csv",sep=",",tz="" ,header=T)) 
```

`read.zoo()`提取具有数值的数据框，但正如我应用的那样`as.xts()`， 的`data. frame`数值被转换为字符。

```
# banknifty[1,] gives 
2008-01-01 09.34:00 "10" "12" "13" 
```

我想`as.xts`应该返回`data.frame`数值。如何避免这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T12:17:16.037

您对 xts/zoo 对象的性质感到困惑。它们是具有有序索引属性的矩阵，因此您不能像在 data.frame 中那样在 xts/zoo 对象中混合类型。

将对象转换为字符的原因是文件中的某些值不是数字。这也是您`NAs introduced by coercion`在尝试[hd1 的](https://stackoverflow.com/a/15807463/271616)解决方案时收到错误的原因。

因此，您的问题的答案是“修复您的 CSV 文件”，但除非您向我们展示文件的内容，否则我们无法帮助您修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:31:05.340

使用 as.numeric ，您的代码将是：

```
> data.in <- as.xts(read.zoo("banknifty.csv",sep=",",tz="" ,header=T);

> sapply(c(1:4), function(n) { data.in[,n] <- as.numeric(data.in[,n]) }, simplify=TRUE )
        [,1]    [,2]    [,3]    [,4]
[1,] 6032.25 6040.50 6032.17 6036.29
[2,] 6036.29 6036.29 6020.00 6025.05
[3,] 6025.05 6026.00 6020.10 6023.12
[4,] 6023.12 6034.45 6022.73 6034.45
[5,] 6034.45 6034.45 6030.00 6030.00
[6,] 6030.00 6038.00 6028.25 6038.00
> data.in
                         V2      V3      V4      V5
2007-01-02 10:00:00 6032.25 6040.50 6032.17 6036.29
2007-01-02 10:05:00 6036.29 6036.29 6020.00 6025.05
2007-01-02 10:10:00 6025.05 6026.00 6020.10 6023.12
2007-01-02 10:15:00 6023.12 6034.45 6022.73 6034.45
2007-01-02 10:20:00 6034.45 6034.45 6030.00 6030.00
2007-01-02 10:25:00 6030.00 6038.00 6028.25 6038.00
> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-27T11:18:10.873

我刚刚遇到了类似的问题。就我而言，问题在于 as.xts() 函数试图将日期列与数字列一起转换。因为 R 不将日期视为数值，所以它会自动将整个数据框转换为字符。我假设您的示例中也会发生这种情况（您可以使用 .csv 文件进行检查）。

这样的事情应该会有所帮助：

```
data.in <- read.csv("banknifty.csv",sep=",",header=T)
data.in[,1] <- format(as.Date(data.in[,1]), format="%Y-%m-%d", tz="GMT", usetz=TRUE) #change tz to whatever applies
data.in[,1] <- as.POSIXct(data.in[,1], "GMT")
data.ts <- xts(data.in[,c(2,3,4,5)], order.by = data.in[,1]) 
```

（请注意， data.ts <- xts(data.in, order.by = data.in[,1]) 会复制不需要的转换。另外，很抱歉这可能不是最干净/最简洁的代码，我还在学习。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T11:27:20.273

```
> sapply(c(1:4), function(n) { data.in[,n] <- as.numeric(data.in[,n]) }, simplify=TRUE ) 
```

此命令不会对 data.in 进行任何更改。它以带引号的相同格式返回数据

```
> data.in
                         V2      V3      V4      V5
2007-01-02 10:00:00 "6032.25" "6040.50" "6032.17" "6036.29"
2007-01-02 10:05:00 "6036.29" "6036.29" "6020.00" "6025.05"
2007-01-02 10:10:00 "6025.05" "6026.00" "6020.10" "6023.12" 
```

# lexer - 如何在 ANTLR4 中定义可以出现在多种词法模式中的标记？

> ID：15807322
> 
> 赞同：17
> 
> 时间：2013-04-04T09:25:41.700
> 
> 标签：lexer, antlr4

我正在学习 ANTLR4 并尝试使用词汇模式。如何让相同的标记出现在多个词法模式中？作为一个非常简单的例子，假设我的语法有两种模式，我想匹配它们中的空格和行尾，我怎么能不以 WS_MODE1 和 WS_MODE2 结尾。有没有办法在两种情况下重用相同的定义？无论模式如何，我都希望在所有空白区域的输出流中获得 WS 令牌。这同样适用于 EOL 和其他可以出现在两种模式中的关键字。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-04T13:06:16.587

规则必须有不同的名称，但您可以使用`-> type(...)`lexer 命令为它们赋予相同的类型。

```
WS : [ \t]+;

mode Mode1;

    Mode1_WS : WS -> type(WS);

mode Mode2;

    Mode2_WS : WS -> type(WS); 
```

即使`Mode1_WS`and`Mode2_WS`不是`fragment`规则，代码生成器也会看到`type`命令并知道您重新分配了它们的类型，因此它不会为它们定义标记。

# linux - Apache httpd 支持的最大 REST URI

> ID：15807324
> 
> 赞同：1
> 
> 时间：2013-04-04T09:25:46.600
> 
> 标签：linux, apache, rest, uri, max

我正在解决这个问题，我的 REST 客户端（curl）程序正在向我的 Apache httpd 2.2.15（RHEL6）发送一个很长的 URI（5000 个字符），但被拒绝。从 Apache 文档中，我读到了默认的最大值。支持的 URI 长度为 8190（通过 LimitRequestLine[此处](http://httpd.apache.org/docs/2.2/mod/core.html#limitrequestline)），但是当我提供 5000 个字符的 URI（如 somehost/dir1/dir2/dir3/.../dir700/ ）时，我在 ssl_error_log 文件中收到此错误：

```
[Tue Apr 02 17:29:16 2013] [error] [client 10.0.100.1] (36)File name too long: Cannot map GET <<long URI>> HTTP/1.1 to file 
```

从 apache 代码来看，这似乎达到了 Linux 的 PATH_MAX(4096) 限制。如果是这种情况，那么我如何确保 URI 最多支持 8190 个字符？或者是否有任何其他限制将路径限制为 4096 个字符？

# c# - 为 DataGridView 行分配颜色

> ID：15807325
> 
> 赞同：3
> 
> 时间：2013-04-04T09:25:47.890
> 
> 标签：c#, winforms

我正在尝试制作这个 Windows 应用程序，您可以在其中注册健身房会员及其每月付款。我有这个 DataGridView，它在其中显示成员的一些属性，其中之一是字段 STATUS。此字段包含单词 PAID 或 UNPAID（从某个代码分配，如果会员支付或未支付）。现在我想要做的是：如果状态字段是 UNPAID，我希望该行是 RED（背景颜色）。那可能吗 ？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:36:07.553

我认为您必须遍历网格视图中的行，然后比较值：

```
foreach (DataGridViewRow row in grid.Rows) 
     if (row.Cells["STATUS"].Value =="UNPAID") 
     {
         row.DefaultCellStyle.BackColor = Color.Red; 
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:36:45.407

对于一个`DataGridView`叫`dgv`. 尝试以下内容

```
foreach (DataGridViewRow row in dgv.Rows)
{
    if (row.Cells["STATUS"].Value != null &&
        row.Cells["STATUS"].Value.ToString().CompareTo("UNPAID") == 0)
    {
        row.Cells["STATUS"].Style.BackColor = Color.Red;
    }
    else
    {
        row.Cells["STATUS"].Style.BackColor = Color.Green;
    }
} 
```

这会将您的“未付费”单元格着色为红色，将其他单元格着色为绿色。这假设您只需要可用的值。

我希望这有帮助。

*编辑。要为整行着色，您可以使用`row.DefaultCellStyle.BackColor = Color.Red`等。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:39:18.700

您可以做的是将行中单元格的颜色设置为红色，如下所示：

```
foreach (DataGridViewRow row in dataGridView1.Rows)
{
    if (row.Cells["STATUS"].Value =="UNPAID") 
        row.DefaultCellStyle.BackColor = Color.Red;
} 
```

Wich 会将状态值未支付的单元格行设置为红色。

# iphone - 附件按钮没有隐藏在空的表格视图中

> ID：15807326
> 
> 赞同：0
> 
> 时间：2013-04-04T09:25:51.193
> 
> 标签：iphone, ios6, uitableview

在我的应用程序中，我使用了 setAccessoryType，在搜索内容时，它会在带有附件按钮的表格视图中显示一些数据集，当我清除搜索时，表格视图会重新加载。数据已清除，但附件箭头本身会保留在那里。这是我的代码,

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
static NSString *CellIdentifier = @"CellIdentifier";
UILabel *l1;
UITableViewCell *cell = (UITableViewCell *)[self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
    l1=[[UILabel alloc]initWithFrame:CGRectMake(0, 5, 690, 40)];
}else{
    l1=[[UILabel alloc]initWithFrame:CGRectMake(0, 5, 310, 40)];
}
l1.textColor=[UIColor whiteColor];
l1.backgroundColor=[UIColor clearColor];
[l1 setFont:[UIFont boldSystemFontOfSize:14.0]];
l1.textAlignment=UITextAlignmentLeft;
l1.text=[[existingResults objectAtIndex:0] valueForKey:@"food_name"];
l1.textColor=[UIColor blackColor];
[cell addSubview:l1];
[cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];    
return cell;
} 
```

tabelview 重载代码

```
-(void)txttapped:(id)sender{
[[WebService sharedInstance]foodsearch:txtSearch.text withCompletionHandler:^(BOOL result)
 {
 if(result)
 {
     NSLog(@"Success");
     NSManagedObjectContext *context = [[DataAccessLayer sharedInstance] managedObjectContext];
     existingResults = [context fetchObjectsForEntityName:NSStringFromClass([Food class]) withSortColumn:nil withSortDescending:FALSE withPredicate:nil];
     [existingResults retain];
     [tableView reloadData];
     [self.progress hide:YES];
 }
 else
 {
     if (txtSearch.text.length==0)
     {

         [tableView reloadData];// tabelview reloads here
     }
     else
     {
         NSLog(@"Failure");
     UIAlertView *alertView=[[UIAlertView alloc]initWithTitle:@"Alert Message" message:@" Failed" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
     [alertView show];
     [alertView release];
     [self.progress hide:YES];
     }

  }
  }];
  } 
```

tabel没有值时如何隐藏附件视图？请帮我整理一下

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:45:37.693

尝试 ，

```
if([[[existingResults objectAtIndex:0] valueForKey:@"food_name"] length] > 0)
{
  [cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];
}
else
{
  [cell setAccessoryType:UITableViewCellAccessoryNone];
} 
```

# c - 转换为函数指针

> ID：15807333
> 
> 赞同：31
> 
> 时间：2013-04-04T09:26:12.020
> 
> 标签：c, function-pointers

我遇到了下面显示的代码行。

我认为这可能是对返回 void 并采用 void 指针的函数指针的强制转换。那是对的吗？

```
(void (*)(void *))SGENT_1_calc 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-04T09:28:51.363

是的，这是正确的。我发现这不是很可读，所以我建议声明要指向的函数的签名：

```
 typedef void sigrout_t(void*); 
```

^(我也有以类型结尾的*编码约定*`rout_t`是函数签名的类型。您可能会以其他方式命名它，因为它是[POSIX](https://en.wikipedia.org/wiki/POSIX)[保留](http://www.gnu.org/software/libc/manual/html_node/Reserved-Names.html)的`_t`后缀。)

后来我正在铸造，也许可以称之为

```
 ((sigrout_t*) SGENT_1_calc) (someptr); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-04T09:29:35.710

是的。该功能应该是这样的

```
void func(void*); 
```

但是该语句缺少目标，因为强制转换为空是无用的。所以它应该像

```
func = (void (*)(void *))SGENT_1_calc; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-03-11T13:46:22.970

是的，这是一个[函数指针](https://en.wikipedia.org/wiki/Function_pointer)转换。

## 函数指针转换

为了帮助您将函数转换为指针，您可以为函数指针类型定义别名，如下所示：

```
typedef void void_to_void_fct(void*); 
```

您还可以为接受和返回值的函数定义类型：

```
typedef int math_operator(int, int); 
```

稍后，您可以将函数存储到函数指针类型中，如下所示：

```
void mystery(void* arg) {
    // do something nasty with the given argument
};

int add(int a, int b) {
    return a + b;
}

void_to_void  *ptr1 = mystery;
math_operator *ptr2 = add; 
```

有时，您有如下功能`print_str`：

```
void print_str(char* str) {
    printf("%s", str);
} 
```

并且您希望将其存储在与参数类型无关的函数指针中。然后，您可以使用这样的演员表：

```
(void (*)(void *))print_str 
```

或者

```
(void_to_void_fct*)print_str 
```

## 为什么我们使用函数指针？

函数指针允许您在变量中“存储函数”（实际上，您存储了函数的地址）。当您希望允许某些代码根据用户输入具有不同的行为时，这非常方便。

例如，假设我们有一些数据和一些解码方法。我们可以有以下结构来保存这些信息：

```
typedef char* decoder_type(char*);
struct encoded_data {
    char*           data;
    decoder_type    *decoder_fct;
};

char* decoding_function_1(char* data) {
//...

char* decoding_function_2(char* data) {
//... 
```

这允许存储数据和函数，以便以后一起使用它们来解码数据。

# sql - 隐式转换 SQL

> ID：15807334
> 
> 赞同：0
> 
> 时间：2013-04-04T09:26:12.463
> 
> 标签：sql, sql-server

当我在我的数据库中插入一些东西时，我总是遇到这个奇怪的错误，我认为它应该可以工作并且顺序也应该是正确的

我的查询

```
INSERT INTO [123].HolidayTracker.dbo.HtVacationDay
    ( Title, 
      FromDate, 
      UserId,
      ToDate )
SELECT 
      old.[userNote] AS Title,
      newUser.UserId,
      DATEADD(HOUR, 8, old.[holidayDate]) as FromDate,
      DATEADD(HOUR, 8, 
          DATEADD(SECOND, old.[hours] * 3600, old.[holidayDate])) as ToDate
  FROM [HolidayTracker].[dbo].[UserHoliday] old
  INNER JOIN 
      [HolidayTracker].[dbo].HTUser oldUser 
      ON old.htUser_htUserId = oldUser.htUserId
  INNER JOIN 
      [ch-s-0008180].[HolidayTracker].[dbo].HtUser newUser 
      ON oldUser.email = newUser.email 
```

错误信息

> 消息 257，级别 16，状态 3，第 1 行不允许从数据类型 datetime 到 int 的隐式转换。使用 CONVERT 函数运行此查询。

感谢您的帮助和快速答复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:28:27.833

```
INSERT INTO [123].HolidayTracker.dbo.HtVacationDay(Title,UserId,FromDate,ToDate)
.... 
```

您的插入字段为

```
(Title,FromDate,UserId,ToDate) 
```

和数据为

```
old.[userNote],
,newUser.UserId
,DATEADD....
,DATEADD.... 
```

错误是 SELECT 中的第三个表达式（日期时间）被强制进入 UserId (int) 列。

* * *

> 但现在我得到这个新的错误字符串或二进制数据将被截断。

为此，您需要缩短`old.[userNote]`以匹配`HtVacationDay.Title`列的最大大小，例如

```
 LEFT(old.userNote, 10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:29:23.007

我觉得Insert语句和select语句的顺序不对，

你应该有

> SELECT old.[userNote] AS Title,DATEADD(HOUR, 8, old.[holidayDate]) as FromDate ,newUser.UserId,DATEADD(HOUR, 8, DATEADD(SECOND, old.[hours] * 3600, old.[holidayDate ])) 作为 ToDate
> 
> FROM [HolidayTracker].[dbo].[UserHoliday] 旧 ....

或者

您可以将插入语句更改为

> 插入 [123].HolidayTracker.dbo.HtVacationDay（标题、用户 ID、FromDate、ToDate）

谢谢

# java - 如何更改 glassfish 应用服务器默认浏览器图标？

> ID：15807341
> 
> 赞同：0
> 
> 时间：2013-04-04T09:26:43.473
> 
> 标签：java, glassfish-3

我们可以为在 glassfish 服务器下运行的应用程序设置默认的浏览器选项卡图标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:46:57.540

这是解决方案：

只需将 favicon.ico 图标添加到 glassfish 的 docroot 文件夹，然后重新启动。

如果它不起作用，那么，您必须在您的 default-web.xml glassfish 文件中定义 'ico' 扩展 mime-type，这是通过在文件中添加以下代码来完成的：
`<mime-mapping> <extension>ico</extension> <mime-type>image/vnd.microsoft.icon</mime-type> </mime-mapping>`

# c# - 检查用户控件是否在窗口边界内

> ID：15807348
> 
> 赞同：4
> 
> 时间：2013-04-04T09:26:58.153
> 
> 标签：c#, windows-8, windows-runtime, windows-store-apps, winrt-xaml

我有一个项目需要能够在屏幕上拖动用户控件（托管在网格内）。这适用于以下代码：

```
void MyUserControl_ManipulationDelta(object sender, ManipulationDeltaRoutedEventArgs e)
{
    var ct = (CompositeTransform) RenderTransform ?? new CompositeTransform {CenterX = 0.5, CenterY = 0.5};
        ct.TranslateX += e.Delta.Translation.X;
        ct.TranslateY += e.Delta.Translation.Y;
} 
```

问题是用户控件可以一直拖出屏幕区域。为了防止这种情况，我尝试了此处显示的示例：http: [//msdn.microsoft.com/en-us/library/system.windows.uielement.manipulationdelta.aspx](http://msdn.microsoft.com/en-us/library/system.windows.uielement.manipulationdelta.aspx)

不幸的是，它使用了**containsRect.Contains(shapeBounds)**，而在 Windows 8 中，我们希望将 shapeBounds(this is a rect) 替换为 Point。我不确定如何使用它。

那么问题来了，我们如何确保用户控件或任何 UIElement 不能被拖出 windows 8 商店应用程序中的 Window.Current.Bounds 区域？

谢谢。

**编辑：**有关 xaml 结构的更多详细信息：

主页包含一个水平和垂直对齐设置为拉伸的网格。根据需要将用户控件添加到此网格中。每个用户控件都有一个包含 3 个不同视图（全屏、窗口和小）的父网格。根据用户的选择显示视图。只有在显示窗口网格时才必须应用拖动行为。所以我们有这个

```
<Grid> <!-- this is the parent grid on mainpage with horizontal and vertical alignment to stretch-->
   <Grid> <!-- this is the usercontrol's main grid (added to above grid via code). This grid must be draggable if the below grid is window -->
         <Grid /> <!-- this is one of the child grids that is shown based on user's choice (fullscreen, window or small view).-->
   </Grid>
</Grid> 
```

在更改布局方面我没有太多选择。在用户控件中使用上述 ManipulationDelta 事件（根据显示的子网格启用/禁用），我能够获得拖动行为，但控件可能会超出窗口范围。那么有什么方法可以通过代码而不是 xaml 在 WinRTXamlToolkit 中添加以下 FlickBehavior 或根据某些条件启用/禁用行为？

```
<i:Interaction.Behaviors>
   <views:HeavyFlickBehavior />
</i:Interaction.Behaviors> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:34:37.270

您可以查看[`FlickBehavior`](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/9c814f6c67c540adbd6952821a351d9ffa4d1d99#WinRTXamlToolkit/Controls/Behaviors/FlickBehavior.cs)WinRT XAML 工具包中的示例，了解如何使用 parent`Canvas`和`Canvas.Top/Left`properties 而不是来实现这一点`RenderTransform`，假设`Canvas`定义了您的界限。

这是一个摘要：

```
private void OnAssociatedObjectManipulationStarting(object sender, ManipulationStartingRoutedEventArgs e)
{
    _startPosition = new Point(
        Canvas.GetLeft(this.AssociatedObject),
        Canvas.GetTop(this.AssociatedObject));
}

private void OnAssociatedObjectManipulationDelta(object sender, ManipulationDeltaRoutedEventArgs manipulationDeltaRoutedEventArgs)
{
    var dx = manipulationDeltaRoutedEventArgs.Cumulative.Translation.X;
    var dy = manipulationDeltaRoutedEventArgs.Cumulative.Translation.Y;

    var x = _startPosition.X + dx;
    var y = _startPosition.Y + dy;

    if (manipulationDeltaRoutedEventArgs.IsInertial)
    {
        while (x < 0 ||
               x > _canvas.ActualWidth - this.AssociatedObject.ActualWidth)
        {
            if (x < 0)
                x = -x;
            if (x > _canvas.ActualWidth - this.AssociatedObject.ActualWidth)
                x = 2 *
                    (_canvas.ActualWidth - this.AssociatedObject.ActualWidth) -
                    x;
        }

        while (y < 0 ||
               y > _canvas.ActualHeight - this.AssociatedObject.ActualHeight)
        {
            if (y < 0)
                y = -y;
            if (y > _canvas.ActualHeight - this.AssociatedObject.ActualHeight)
                y = 2 * (_canvas.ActualHeight - this.AssociatedObject.ActualHeight) -
                    y;
        }
    }
    else
    {
        if (x < 0)
            x = 0;
        if (x > _canvas.ActualWidth - this.AssociatedObject.ActualWidth)
            x = _canvas.ActualWidth - this.AssociatedObject.ActualWidth;
        if (y < 0)
            y = 0;
        if (y > _canvas.ActualHeight - this.AssociatedObject.ActualHeight)
            y = _canvas.ActualHeight - this.AssociatedObject.ActualHeight;
    }

    Canvas.SetLeft(this.AssociatedObject, x);
    Canvas.SetTop(this.AssociatedObject, y);
} 
```

# wordpress - 分页不会在 Wordpress 中显示

> ID：15807349
> 
> 赞同：0
> 
> 时间：2013-04-04T09:26:58.183
> 
> 标签：wordpress, pagination, blogs, posts

我有这段代码可以将博客中的所有帖子显示为每页 3 个（出于特定原因，我必须使用 Wp_Query）。我不知道如何为此添加分页。这是我的帖子列表代码：

```
<?php

  $all_posts = new WP_Query(array(
    'posts_per_page' => 3,
  ));

  if ($all_posts->have_posts()): while ($all_posts->have_posts()) : $all_posts->the_post();

  ?>

    <div class="row leftNestedRow whiteWrapper boxyShadow">

      <div class="large-12 columns">

        <h2><a href="<?php the_permalink(); ?>" rel="bookmark" title="<?php the_title_attribute(); ?>"><?php the_title(); ?></a></h2>

        <?php if ( has_post_thumbnail() ) {
          the_post_thumbnail();
        }?>

        <p class="authorDate">Av <a>Fryk</a>, <?php the_time('Y-m-d'); ?></p>
        <p><span class="homepageBlogExerpt"><?php echo get_the_excerpt(); ?></span><a href="<?php the_permalink() ?>">[Läs mer]</a></p>
        <ul class="tags">
          <?php
            $links = array();
            foreach(get_the_tags() as $this_tag) {
              if ($this_tag->name != "featured"){
               $links[] = '<li><a href="'.get_tag_link($this_tag->term_id).'">'.$this_tag->name.'</a></li>';
              }
            }
            $ai = 0;
            while ($links[$ai]) {
              echo $links[$ai];
              $ai++;
            }
          ?>
        </ul>

      </div>

    </div>

  <?php endwhile; ?> 
```

# ios - UITableViewCell 在滚动时更改附件视图更改

> ID：15807354
> 
> 赞同：0
> 
> 时间：2013-04-04T09:27:02.633
> 
> 标签：ios, uitableview

我正在尝试使用 UISwitch 为某些特定行创建 tableview，并为其余单元格创建 AccessoryDisclosureIndicator。

我在下面的代码中进行了一次检查，得到了想要的结果。但问题是，当我突然滚动表格视图时，开关的位置会改变..这是不希望的，我该如何摆脱这个。

请务必回复此主题

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:  (NSIndexPath *)indexPath
 {
     int _fontSize = fontSize;
    NSArray *switchSettings = [[NSUserDefaults standardUserDefaults] arrayForKey:@"switchGeneralSettings"];

    NSLog(@"switch settings :%@",switchSettings);

    static NSString *cellIdentifier = @"generalSettingsTableViewCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        NSLog(@"*******************1*************");
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
        // code to additionally configure cell for multiple other UI components..

        if(indexPath.row == 3 || indexPath.row == 4 || indexPath.row == 5 || indexPath.row == 6 || indexPath.row == 7)
        {
            NSLog(@"switch*******************%d*************",indexPath.row);
              switchObj = [[UISwitch alloc] initWithFrame:CGRectZero];
            switchObj.tag = indexPath.row + 20002;
             cell.accessoryView = switchObj;
            [switchObj addTarget: self action: @selector(flip:) forControlEvents:UIControlEventValueChanged];
            [switchObj release];

        }
        else
        {
            NSLog(@"indicator*******************%d*************",indexPath.row);

            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        }

    }
    else
    {

        if(indexPath.row == 3 || indexPath.row == 4 || indexPath.row == 5 || indexPath.row == 6 || indexPath.row == 7)
        {
             NSLog(@"*******************2*************");
            countSwitch = 0;
            switchObj = (UISwitch *)[cell.contentView viewWithTag:indexPath.row +  20002];
            // switch
            [switchObj setOn:NO];
            if ([switchSettings count]>0) {

                NSString *settingState = [switchSettings objectAtIndex:countSwitch];
                if ([settingState isEqualToString:@"ON"]) {
                    [switchObj setOn:YES];
                }

            }
            countSwitch++;

        }

    }
       // confiure the cell here...
    NSLog(@"*******************3*************");

    NSString *cellTextLabel = [listGeneralSettings  objectAtIndex:indexPath.row];

    cell.textLabel.text = cellTextLabel;
    cell.textLabel.font = [UIFont systemFontOfSize:_fontSize];

    cell.detailTextLabel.text = [listDetailGeneralSettings objectAtIndex:indexPath.row];
    NSLog(@" cell.detailTextLabel.text :%@", cell.detailTextLabel.text);

    NSLog(@"*******************end*************");

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:31:30.577

您仅在首次创建单元格时更新它。您需要每次更新它。试试这样：

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath: (NSIndexPath *)indexPath { int _fontSize = fontSize; NSArray *switchSettings = [[NSUserDefaults standardUserDefaults] arrayForKey:@"switchGeneralSettings"];

```
 NSLog(@"switch settings :%@",switchSettings);

    static NSString *cellIdentifier = @"generalSettingsTableViewCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        NSLog(@"*******************1*************");
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
    }

    // code to additionally configure cell for multiple other UI components..
    // configure the cell here...

    if(indexPath.row == 3 || indexPath.row == 4 || indexPath.row == 5 || indexPath.row == 6 || indexPath.row == 7)
    {
        NSLog(@"switch*******************%d*************",indexPath.row);
        switchObj = [[UISwitch alloc] initWithFrame:CGRectZero];
        switchObj.tag = indexPath.row + 20002;
        cell.accessoryView = switchObj;
        [switchObj addTarget: self action: @selector(flip:) forControlEvents:UIControlEventValueChanged];
        [switchObj release];

    }
    else
    {
        NSLog(@"indicator*******************%d*************",indexPath.row);

        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    }

    if(indexPath.row == 3 || indexPath.row == 4 || indexPath.row == 5 || indexPath.row == 6 || indexPath.row == 7)
    {
        NSLog(@"*******************2*************");
        countSwitch = 0;
        switchObj = (UISwitch *)[cell.contentView viewWithTag:indexPath.row +  20002];
        // switch
        [switchObj setOn:NO];
        if ([switchSettings count]>0) {

            NSString *settingState = [switchSettings objectAtIndex:countSwitch];
            if ([settingState isEqualToString:@"ON"]) {
                [switchObj setOn:YES];
            }

        }
        countSwitch++;

    }

    NSLog(@"*******************3*************");

    NSString *cellTextLabel = [listGeneralSettings  objectAtIndex:indexPath.row];

    cell.textLabel.text = cellTextLabel;
    cell.textLabel.font = [UIFont systemFontOfSize:_fontSize];

    cell.detailTextLabel.text = [listDetailGeneralSettings objectAtIndex:indexPath.row];
    NSLog(@" cell.detailTextLabel.text :%@", cell.detailTextLabel.text);

    NSLog(@"*******************end*************");

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:44:58.200

这里的cellone是tableviewCell，在那个单元格中你可以添加uiswitch

```
(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:
  (NSIndexPath*)indexPath{          
     static NSString *CellIdentifier = @"Cell";       
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];      
if (cell == nil) {    

    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];    

    // ... some text label stuff deleted here.

    cell.opaque = NO;

    cell.selectionStyle = UITableViewCellSelectionStyleGray;
    [cell setBackgroundColor: [UIColor colorWithPatternImage:[UIImage imageNamed:@"row_2_blank.png"]]];
    // [cell prepareForReuse];
}
if (indexPath.row == 0)
{
    selectAllB.tag=100;
    [selectAllB addTarget:self action:@selector(click:)forControlEvents:UIControlEventTouchUpInside];
    [cellOne setBackgroundColor: [UIColor colorWithPatternImage:[UIImage imageNamed:@"row_2_blank.png"]]];

    cellOne.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    return cellOne;
}
return cell;      
   } 
```

同样，您可以使用许多表格视图单元格，您可以在其中相应地添加 ui 元素

# java - 在 Java 中使用可比较的排序链表

> ID：15807356
> 
> 赞同：1
> 
> 时间：2013-04-04T09:27:09.320
> 
> 标签：java

我正在为一项作业编写一个有序的链表。我们正在使用可比较的，我正在努力让布尔加法正常工作。我已经为这个代码工作了两个星期，现在我正盯着代码看。我真的很感激对我的代码有新的看法。

该代码应该适用于 Comparable 数据 - 整数和字符串（虽然没有混合）。我可以接近完成每一项工作，但没有一个代码可以代表所有人。请帮我解决这个问题，因此代码适用于字符串或整数。

**我只能更改 add()、remove() 和 OrderedListNode 类**

**更新**感谢 parkydr，我能够解决我的一些问题，但是，我仍然收到一个空点错误。我正在测试int和Strings。如果 String 循环在 while 部分中有一个“<”，则元素以相反的顺序返回。不过，对于整数来说，我将是一个错误。如果我有 >=，就像 parkydr 说的那样，那么我会以正确的顺序取回整数，但字符串会出现空指针错误。我如何让两者一起工作？

**Update2**整数需要按顺序排列，就像 AmitG 的代码一样。

**编辑**有没有人有任何想法？

```
package dataStructures;

/**
*   Class OrderedLinkedList.
*
*   This class functions as a linked list, but ensures items are stored in ascending     
    order.
*
*/
public class OrderedLinkedList
{

/**************************************************************************
 * Constants
 *************************************************************************/

/** return value for unsuccessful searches */
private static final OrderedListNode NOT_FOUND = null;

/**************************************************************************
 * Attributes
 *************************************************************************/

/** current number of items in list */
private int theSize;

/** reference to list header node */
private OrderedListNode head;

/** reference to list tail node */
private OrderedListNode tail;

/** current number of modifications to list */
private int modCount;

/**************************************************************************
 * Constructors
 *************************************************************************/

/**
 *  Create an instance of OrderedLinkedList.
 *
 */
public OrderedLinkedList()
{
    // empty this OrderedLinkedList
    clear();

}

/**************************************************************************
 * Methods
 *************************************************************************/

/*
 *  Add the specified item to this OrderedLinkedList.
 *
 *  @param  obj     the item to be added
 */
public boolean add(Comparable obj){
   OrderedListNode node = new OrderedListNode(obj);
   OrderedListNode head2 = new OrderedListNode(obj);
   OrderedListNode tail2 = new OrderedListNode(obj);
       if (head2 == null)
       {
           head2 = node;
           tail2 = node;
           return true;
       }

       // When the element to be added is less than the first element in the list
       if (obj.compareTo(head2.theItem) < 0)
       {
           node.next = head2;
           head2 = node;
           return true;
       }

       // When the element to be added is greater than every element in in list
       // and has to be added at end of the list
       if (obj.compareTo(tail2.theItem) > 0)
       {
           tail2.next = node;
           tail2 = node;
           return true;
       }

       //When the element to be added lies between other elements in the list
       if (obj.compareTo(head2.theItem) >= 0 && obj.compareTo(tail2.theItem) <= 0)
       {
          OrderedListNode current = head.next;
          OrderedListNode previous = head;
          while (obj.compareTo(current.theItem) >= 0)
          {
              previous = current;
              current = current.next;
          }
          previous.next = node;
          node.next = current;

       }

       return true;
   }  

/*
 *  Remove the first occurrence of the specified item from this   
            OrderedLinkedList.
 *
 *  @param  obj     the item to be removed
 */
public boolean remove(Comparable obj)
{
   OrderedListNode curr = head;
       OrderedListNode prev = head;

       while(curr != null && ! (curr.theItem.compareTo(obj) == 0)){
       prev = curr;
       curr = curr.next;
       }
       if(curr == null)
      return false;
       else{
          prev.next = curr.next;
          curr = null;
          return true;
     }  
  }

/**
 *  Empty this OrderedLinkedList.
 */
public void clear()
{
    // reset header node
    head = new OrderedListNode("HEAD", null, null);

        // reset tail node
        tail = new OrderedListNode("TAIL", head, null);

        // header references tail in an empty LinkedList
        head.next = tail;

        // reset size to 0
    theSize = 0;

    // emptying list counts as a modification
    modCount++;
}

/**
 *  Return true if this OrderedLinkedList contains 0 items.
 */
public boolean isEmpty()
{
    return theSize == 0;
}

/**
 *  Return the number of items in this OrderedLinkedList.
 */
public int size()
{
    return theSize;
}

/*  
 *  Return a String representation of this OrderedLinkedList.
 *
 *  (non-Javadoc)
 *  @see java.lang.Object#toString()
 */
@Override
public String toString()
{
    String s = "";

    OrderedListNode currentNode = head.next;

    while (currentNode != tail)
    {
        s += currentNode.theItem.toString();

        if (currentNode.next != tail)
        {
            s += ", ";
        }

        currentNode = currentNode.next;
    }

    return s;
}

/**************************************************************************
 * Inner Classes
 *************************************************************************/

/**
 *  Nested class OrderedListNode.
 *
 *  Encapsulates the fundamental building block of an OrderedLinkedList
 *  contains a data item, and references to both the next and previous nodes
 *  in the list
 */

// TODO: Implement the nested class OrderedListNode (5 points).  This nested class
// should be similar to the nested class ListNode of the class LinkedList, but
// should store a data item of type Comparable rather than Object.
    public static class OrderedListNode {

    Comparable theItem;   
        OrderedListNode next;
        OrderedListNode prev;

        OrderedListNode( Comparable theItem ) { this( theItem, null, null ); }

        OrderedListNode( Comparable theItem, OrderedListNode prev, OrderedListNode next)
        {
           this.theItem = theItem;         
           this.next = next;        
           this.prev = prev;
        }

        Comparable getData() { return theItem; }

        OrderedListNode getNext() { return next; }

        OrderedListNode getPrev() { return prev; }

        }
  // Remove - for testing only
   public static void main (String[] args)
   {
     OrderedLinkedList list = new OrderedLinkedList();
     list.add("1");
     list.add("4");
     list.add("3");
     list.add("33");
     list.add("4");
     System.out.println(list.toString());

   }

 } 
```

上面的代码在大多数情况下都适用于整数，除了项目按词法存储为字符串。所以我需要帮助解决这个问题。我还需要使此代码也可以与字符串一起使用。现在下面的代码适用于字符串但不适用于整数，它也以相反的顺序存储，因为 <= 在 while 语句中发生了变化。帮助！

请注意，符号的更改将使字符串起作用（尽管顺序相反）：

```
 while (obj.compareTo(current.theItem) <= 0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:42:21.267

这是我最新版本的添加。它没有设置 prev 链接（我将把它作为“读者练习”）。

```
 public boolean add(Comparable obj){
       OrderedListNode node = new OrderedListNode(obj);

       // When the list is empty
       if (head.next == tail)
       {
           head.next = node;
           node.next = tail;
           tail.prev = node;
           return true;
       }

       // When the element to be added is less than the first element in the list
       if (obj.compareTo(head.next.theItem) < 0)
       {
           node.next = head.next;
           head.next = node;
           return true;
       }

       //When there is an element in the list

       OrderedListNode current = head.next;
       OrderedListNode previous = head;
       while (current != tail && node.theItem.compareTo(current.theItem) >= 0)
       {
          previous = current;
          current = current.next;
       }

       previous.next = node;
       node.next = current;

       return true;
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:59:27.323

修改后的程序，输出将是`1,3,33,4,4`
如果您想要输出，然后从以下程序`1,3,4,4,33` 中删除`line 1`并粘贴以下代码。和方法被修改。`line 2``Add``toString`

```
int currentValue = Integer.parseInt(freshNode.theItem.toString());  
int tempValue = Integer.parseInt(nodeToTraverse.theItem.toString());
if(currentValue>tempValue) 
```

**完整代码**

```
/**
 * Class OrderedLinkedList.
 * 
 * This class functions as a linked list, but ensures items are stored in
 * ascending order.
 * 
 */
public class OrderedLinkedList {

    /**************************************************************************
     * Constants
     *************************************************************************/

    /** return value for unsuccessful searches */
    private static final OrderedListNode NOT_FOUND = null;

    /**************************************************************************
     * Attributes
     *************************************************************************/

    /** current number of items in list */
    private int theSize;

    /** reference to list header node */
    private OrderedListNode head;

    /** reference to list tail node */
    private OrderedListNode tail;

    /** current number of modifications to list */
    private int modCount;

    /**************************************************************************
     * Constructors
     *************************************************************************/

    /**
     * Create an instance of OrderedLinkedList.
     * 
     */
    public OrderedLinkedList() {
        // empty this OrderedLinkedList
//       clear();  //work around with this method. Removed temporarily.

    }

    /**************************************************************************
     * Methods
     *************************************************************************/

    /*
     * Add the specified item to this OrderedLinkedList.
     * 
     * @param obj the item to be added
     */
    public void add(Comparable obj) {
        OrderedListNode freshNode = new OrderedListNode(obj);
        if (head == null) {
            head = freshNode;
            tail = freshNode;
            return;
        }
        OrderedListNode nodeToTraverse = head;
        while(nodeToTraverse!=null)
        {
            int result = freshNode.theItem.compareTo(nodeToTraverse.theItem);  // line 1
            if(result>0)   // line 2
            {
                if(nodeToTraverse.next==null)
                {
                    nodeToTraverse.next=freshNode;
                    freshNode.prev =nodeToTraverse;
                    break;
                }
                else
                {
                    nodeToTraverse=nodeToTraverse.next;
                    continue;
                }
            }
            else
            {
                nodeToTraverse.prev.next = freshNode;
                freshNode.prev = nodeToTraverse.prev;
                freshNode.next= nodeToTraverse;
                nodeToTraverse.prev=freshNode;
                break;
            }
        }
    }

    /*
     * Remove the first occurrence of the specified item from this
     * OrderedLinkedList.
     * 
     * @param obj the item to be removed
     */
    public boolean remove(Comparable obj) {
        OrderedListNode curr = head;
        OrderedListNode prev = head;

        while (curr != null && !(curr.theItem.compareTo(obj) == 0)) {
            prev = curr;
            curr = curr.next;
        }
        if (curr == null)
            return false;
        else {
            prev.next = curr.next;
            curr = null;
            return true;
        }
    }

    /**
     * Empty this OrderedLinkedList.
     */
    public void clear() {
        // reset header node
        head = new OrderedListNode("HEAD", null, null);

        // reset tail node
        tail = new OrderedListNode("TAIL", head, null);

        // header references tail in an empty LinkedList
        head.next = tail;

        // reset size to 0
        theSize = 0;

        // emptying list counts as a modification
        modCount++;
    }

    /**
     * Return true if this OrderedLinkedList contains 0 items.
     */
    public boolean isEmpty() {
        return theSize == 0;
    }

    /**
     * Return the number of items in this OrderedLinkedList.
     */
    public int size() {
        return theSize;
    }

    /*
     * Return a String representation of this OrderedLinkedList.
     * 
     * (non-Javadoc)
     * 
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        String s = "";

        OrderedListNode temp = head;
        while (temp != null) {
            s = s + temp.theItem.toString()+",";
            temp = temp.next;
        }

        return s.substring(0,s.lastIndexOf(",")); //this will remove last comma
//      return s; //1,2,3,4,5,25,33, this will not remove last comma(,)
    }

    /**************************************************************************
     * Inner Classes
     *************************************************************************/

    /**
     * Nested class OrderedListNode.
     * 
     * Encapsulates the fundamental building block of an OrderedLinkedList
     * contains a data item, and references to both the next and previous nodes
     * in the list
     */

    // TODO: Implement the nested class OrderedListNode (5 points). This nested
    // class
    // should be similar to the nested class ListNode of the class LinkedList,
    // but
    // should store a data item of type Comparable rather than Object.

    // Remove - for testing only
    public static void main(String[] args) {
        OrderedLinkedList list = new OrderedLinkedList();
        /*list.add("1");
        list.add("4");
        list.add("3");
        list.add("33");
        list.add("5");
        list.add("2");
        list.add("25");*/
        list.add("1");
         list.add("4");
         list.add("3");
         list.add("33");
         list.add("4");

        System.out.println(list.toString());
    }

    private static class OrderedListNode {
        Comparable data;
        Comparable theItem;
        OrderedListNode next;
        OrderedListNode prev;

        OrderedListNode(Comparable data) {
            this(data, null, null);
        }

        OrderedListNode(Comparable data, OrderedListNode prev, OrderedListNode next) {
            this.theItem = data;
            this.next = next;
            this.prev = prev;
        }

        Comparable getData() {
            return data;
        }

        OrderedListNode getNext() {
            return next;
        }

        OrderedListNode getPrev() {
            return prev;
        }
        @Override
        public String toString() {
            return (String)theItem;
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T00:15:10.253

```
import java.util.*;

public class List {

    private Node head;
    private int manyNodes;

    public List() {
        head = null;
        manyNodes = 0;
    }

    public boolean isEmpty() {
        return ((head == null) && (manyNodes == 0));
    }

    public void add(int element) {
        if (head == null) {
            head = new Node(element, null);
            manyNodes++;
        } else {
            head.addNodeAfter(element);
            manyNodes++;
        }
    }

    public boolean remove(int target) {
        boolean removed = false;

        Node cursor = head;
        Node precursor;

        if (head == null) {
            throw new NoSuchElementException("Cannot remove from empty list");
        }

        if (head.getInfo() == target) {
            head = head.getNodeAfter();
            manyNodes--;
            removed = true;
        } else {
            precursor = cursor;
            cursor = cursor.getNodeAfter();

            while ((cursor != null) && (!removed)) {
                if (cursor.getInfo() == target) {
                    precursor.removeNodeAfter();
                    manyNodes--;
                    removed = true;
                } else {
                    precursor = cursor;
                    cursor = cursor.getNodeAfter();
                }
            }
        }

        return removed;
    }

    public Node getFront() {
        return head;
    }

    public int size() {
        return manyNodes;
    }

    public Node listSort(Node source) {
        source = head;

        int largest = Integer.MIN_VALUE;
        int smallest;

        Node front;

        while (source != null) {
            if (source.getInfo() > largest) {
                largest = source.getInfo();
            }

            source = source.getNodeAfter();
        }

        front = new Node(Node.find(head, largest).getInfo(), null);
        remove(largest);

        while (!isEmpty()) {
            source = head;
            smallest = Integer.MAX_VALUE;

            while (source != null) {
                if (source.getInfo() <= smallest) {
                    smallest = source.getInfo();
                }

                source = source.getNodeAfter();
            }

            remove(smallest);
            front.addNodeAfter(smallest);
        }

        head = front.reverse(front);
        source = head;
        return source;
    }

    public void showList() {
        Node cursor = head;

        if (cursor == null) {
            System.out.println("This list contains no items.");
        } else {
            while (cursor != null) {
                System.out.print(cursor.getInfo() + " ");
                cursor = cursor.getNodeAfter();
            }
        }
    }

}//end class List 
```

# mysql - MySQl 查询在限制中选择具有相同值的所有行，以便没有值超出定义的限制

> ID：15807357
> 
> 赞同：0
> 
> 时间：2013-04-04T09:27:10.573
> 
> 标签：mysql

```
╔════════╦═══════════╦═══════╗
║ MSG_ID ║ RANDOM_ID ║  MSG  ║
╠════════╬═══════════╬═══════╣
║      1 ║        22 ║ apple ║
║      2 ║        22 ║ bag   ║
║      3 ║         0 ║ cat   ║
║      4 ║         0 ║ dog   ║
║      5 ║         0 ║ egg   ║
║      6 ║        21 ║ fish  ║
║      7 ║        21 ║ hen   ║
║      8 ║        20 ║ glass ║
╚════════╩═══════════╩═══════╝ 
```

想要大量获取 3 条记录，以便拾取特定 random_id 的所有数据。

**结果要求：**

```
║ MSG_ID ║ RANDOM_ID ║  MSG  ║
╠════════╬═══════════╬═══════╣
║      1 ║        22 ║ apple ║
║      2 ║        22 ║ bag   ║
║      3 ║         0 ║ cat   ║ 
```

**当前结果：**

```
║ MSG_ID ║ RANDOM_ID ║  MSG  ║
╠════════╬═══════════╬═══════╣
║      1 ║        22 ║ apple ║
║      3 ║         0 ║ cat   ║
║      4 ║         0 ║ dog   ║
______________________________ 
```

**使用的查询：**

```
SELECT  ID,Random_ID, GROUP_CONCAT(message SEPARATOR ' ' ),FLAG,mobile,sender_number,SMStype  
FROM    messagemaster
WHERE   Random_ID > 0
GROUP   BY Random_ID
UNION
SELECT  ID,Random_ID, message,FLAG,mobile,sender_number,SMStype
FROM    messagemaster
WHERE   Random_ID = 0
order by random_id LIMIT 100; 
```

我不想使用 group by 来获取记录。我想通过 random_ids 获取所有记录。例如，如果有一个 random_id 有 3 条记录并且查询有 limit =3 ，那么我想要所有要获取的那些 random_id 的数据。情况是，如果我获取限制为 100 的行，我不希望不选择结果集中存在的具有随机 id 的某些数据。例如，如果我选择记录限制为 3 ，则应选择`random id=22`所有记录。`random id =22`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:43:43.767

考虑以下...

```
 SELECT b.*
   FROM
      ( SELECT x.*, SUM(y.cnt)
          FROM 
             ( SELECT random_id,COUNT(*) cnt FROM messagemaster GROUP BY random_id) x
          JOIN
             ( SELECT random_id,COUNT(*) cnt FROM messagemaster GROUP BY random_id) y
            ON y.random_id >= x.random_id
         GROUP 
            BY x.random_id
        HAVING SUM(y.cnt) < 4
      ) a
   JOIN messagemaster b
     ON b.random_id = a.random_id; 
```

# regex - 查找匹配所有给定字符串的最简单正则表达式

> ID：15807365
> 
> 赞同：10
> 
> 时间：2013-04-04T09:27:35.780
> 
> 标签：regex, string, algorithm, pattern-matching

是否有一种算法可以从一组字符串中生成正则表达式（可能仅限于简化的语法），以便对与正则表达式匹配的所有可能字符串的评估再现初始字符串集？

为具有非常“复杂”语法（包括任意重复、断言等）的正则表达式语法找到这样的算法可能是不现实的，所以让我们从一个只允许`OR`子字符串的简化算法开始：

`foo(a|b|cd)bar`应该匹配`fooabar`和。`foobbar``foocdbar`

## 例子

给定一组字符串`h_q1_a`, `h_q1_b`, `h_q1_c`, `h_p2_a`, `h_p2_b`, `h_p2_c`，算法的期望输出将是`h_(q1|p2)_(a|b|c)`。

给定一组字符串`h_q1_a`, `h_q1_b`, `h_p2_a`，算法的期望输出将是`h_(q1_(a|b)|p2_a)`。*请注意，`h_(q1|p2)_(a|b)`这是*不*正确的，因为它扩展为 4 个字符串，包括`h_p2_b`，它不在原始字符串集中。*

## 用例

我有一长串标签，这些标签都是通过将子字符串放在一起产生的。我不想打印大量的字符串列表，而是希望有一个紧凑的输出来指示列表中的标签。由于完整列表是通过编程方式生成的（使用有限的前缀和后缀集），我希望紧凑符号（可能）比初始列表短得多。

（（简化的）正则表达式应该尽可能短，尽管我对实际解决方案比最好的解决方案更感兴趣。简单的答案当然是连接所有字符串，如 A|B|C|D|...然而，没有帮助。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T16:06:15.620

如果您要查找的是一组字符串的最小有限状态机 (FSM)，则此问题有一个直接的解决方案。由于生成的 FSM 不能有循环（否则它将匹配无限数量的字符串），因此只使用连接和析取 ( `|`) 运算符应该很容易转换为正则表达式。尽管这可能不是最短的正则表达式，但如果您使用的正则表达式库编译为最小化的 DFA，它将产生最小的编译正则表达式。（或者，您可以直接将 DFA 与 Ragel 之类的库一起使用。）

如果您可以访问标准 FSM 算法，则该过程很简单：

1.  只需将每个字符串添加为状态序列，每个序列都从起始状态开始，从而创建一个非确定性有限状态自动机 (NFA)。在字符串的总大小中很明显`O(N)`，因为原始字符串中的每个字符都会有一个 NFA 状态。

2.  从 NFA 构造确定性有限状态自动机 (DFA)。NFA 是一棵树，甚至不是 DAG，它应该避免标准算法的指数最坏情况。实际上，您只是在这里构建前缀树，您可以跳过步骤 1 并直接构建前缀树，将其直接转换为 DFA。前缀树不能有比原始字符数更多的节点（如果所有字符串都以不同的字符开头，则可以有相同数量的节点），所以它的输出是`O(N)`大小，但我没有顶部的证明我的脑海里，它也`O(N)`来得及。

3.  最小化 DFA。

DFA 最小化是一个经过充分研究的问题。[Hopcroft 算法](http://en.wikipedia.org/wiki/DFA_minimization)是最坏情况`O(NS log N)`算法，其中是`N`DFA 中的状态数，`S`是字母表的大小。通常，`S`将被视为常数；无论如何，Hopcroft 算法的预期时间要好得多。

对于非循环 DFA，有线性时间算法；最常被引用的是 Dominique Revuz，我在[这里找到了英文](http://www.eti.pg.gda.pl/katedry/kiw/pracownicy/Jan.Daciuk/personal/thesis/node26.html)的粗略描述；原始论文似乎是付费的，但[Revuz 的论文（法语）](http://www-igm.univ-mlv.fr/~dr/thdr/)是可用的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T10:55:22.357

您可以尝试使用[Aho-Corasick](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)算法从输入字符串创建一个有限状态机，之后生成简化的正则表达式应该会有些容易。您的输入字符串作为示例：

```
h_q1_a
h_q1_b
h_q1_c
h_p2_a
h_p2_b
h_p2_c 
```

将生成一个很可能看起来像这样的有限机器：

```
 [h_]         <-level 0
     /   \
  [q1]  [p2]       <-level 1
     \   /
      [_]          <-level 2
      /\  \
     /  \  \
    a    b  c      <-level 3 
```

现在，对于 trie 的每个级别/深度，所有的刺（如果有多个）都将放在`OR`括号内，所以

```
h_(q1|p2)_(a|b|c)
L0   L1  L2  L3 
```

# c# - MediaElement 引起可听见的点击

> ID：15807366
> 
> 赞同：2
> 
> 时间：2013-04-04T09:27:42.470
> 
> 标签：c#, windows-runtime, windows-store-apps, winrt-xaml, mediaelement

我正在开发一个游戏，一个基于 XAML（不是 DirectX）的 Windows 应用商店应用程序。要播放音效（WAV 文件），我使用`MediaElement`. 对于每个音效，我都会像这样初始化一个（或多个）MediaElement：

```
StorageFolder folder = 
    await Package.Current.InstalledLocation.GetFolderAsync(FolderPath);
StorageFile file = await folder.GetFileAsync(FileName);
IRandomAccessStream stream = await file.OpenAsync(FileAccessMode.Read);

_mediaElement = new MediaElement();
_parentPanel.Children.Add(_mediaElement);
_mediaElement.AutoPlay = false;
_mediaElement.SetSource(stream, file.ContentType); 
```

...并像这样玩：

```
_mediaElement.Play(); 
```

这行得通，但有时会出现烦人的咔嗒声，像[这样](http://www.freesound.org/people/stijn/sounds/43689/)。

奇怪的是点击是多么一致：有些文件从不引起点击，有些几乎总是，如果他们这样做，它总是在同一个位置（对于一个是开始，对于另一个它接近结束）。这些点击**不在**WAV 文件中。当我在 Audacity 中播放它们时，一切都很好。

这里发生了什么？我该如何补救？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T00:45:15.223

我建议对声音使用 XAudio2、SharpDX 或 MonoGame。正如您注意到的那样，MediaElements 并不适合这一点。

# c# - 使用 jQuery 选项卡时 ViewState 无效

> ID：15807367
> 
> 赞同：4
> 
> 时间：2013-04-04T09:27:45.403
> 
> 标签：c#, jquery, asp.net, viewstate, jquery-tabs

我有一个相当简单的页面，其中包含一组 jQuery 选项卡，其中一些内容是通过 ajax 调用的。我的页眉中的母版页中也有一个搜索框。

当我打开标签页时，搜索框工作正常。但是，一旦我单击了其中一个 ajax 选项卡，搜索框就无法使用“无效视图状态”黄色死屏。

我相信这是因为 ajax 页面正在用`__VIEWSTATE`它自己的替换隐藏的输入。

我怎样才能阻止这种行为？

更新：我注意到 YSOD 只出现在 IE 和 Chrome 中，Firefox 似乎没有同样的问题。尽管浏览器如何影响 ViewState，但我不确定。

更新：我已经在此处放置了显示问题的网站的精简版本：http: [//dropbox.com/s/7wqgjqqdorgp958/stackoverflow.zip](http://dropbox.com/s/7wqgjqqdorgp958/stackoverflow.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:57:36.697

我猜您使用 AJAX 来填充选项卡的内容。所以在这种情况下，你的标签内容将被来自 ajax 的新内容替换，当然 _VIEWSTATE 也会被替换。在服务器上，您是否使用 ViewState 中的数据？在“静态选项卡”中，您应该通过使用来防止它们自动重新加载`cache:true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:00:24.667

你的问题是你的ajax调用会带来一个完整的`ASPX`页面。包括`Form`标签及其`Viewstate`. 如果您从中删除`Form`标签，`ajaxTab.aspx`您将看到一切正常。asp.net 不知道如何`Form`在一个页面中处理两个标签。隐藏`Viewstate`字段也是如此。您不能通过 ajax 引入完整的 aspx 页面。只需引入`Div`您要显示的内容，您就可以开始了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T07:01:26.637

这种行为的原因是您`ajaxTab.aspx`异步获取页面的内容并将其粘贴到另一个 aspx 页面中。因此，您将获得两个带有名称的隐藏字段实例，`__VIEWSTATE`并且当页面回发到服务器时，它们的值正在混合（可能取决于浏览器如何处理多个控件，并`name`在提交时使用相同的控件）。要解决此问题，您可以将第二个选项卡的内容放入框架中：

```
 <div id="tabs">
      <ul>
           <li><a href="#tabs-1">Default Tab</a></li>
           <li><a href="#tabs-2">ajax Content</a></li>
      </ul>
      <div id="tabs-1">
           <p>
                To replicate the error:
                <ul>
                     <li>First use the search box top right to search to prove that code is ok</li>
                     <li>Then click the second ajax tab, and search again.</li>
                     <li>N.B. Chrome / IE give a state error, Firefox does not</li>
                </ul>
           </p>
      </div>
      <iframe id="tabs-2" src="ajaxTab.aspx" style="width:100%;" ></iframe>
 </div> 
```

另外，我不确定，但这似乎是`Web_UserControls_search`控件中的错误。在我看来，`NavBarSearchItemNoSearchItem_OnClick`方法必须重构如下：

```
protected void NavBarSearchItemNoSearchItem_OnClick(object sender, EventArgs e)
{
    var searchFieldTbx = NavBarSearchItemNo;
    var navBarSearchCatHiddenField = NavBarSearchCatHiddenField;

    var term = searchFieldTbx != null ? searchFieldTbx.Text : "";

    if (term.Length > 0) //There is actually something in the input box we can work with
    {
        //Response.Redirect(Url.GetUrl("SearchResults", term));
        Response.Redirect(ResolveClientUrl("~/Web/SearchResults.aspx?term=" + term + "&cat=" + navBarSearchCatHiddenField.Value));
    }
} 
```

请注意我们在重定向到搜索结果页面时解析客户端 url 而不是用作`navBarSearchCatHiddenField`参数。`navBarSearchCatHiddenField.Value``cat`

# android - Android 映射异常 java.lang.NoClassDefFoundError: android.security.MessageDigest

> ID：15807376
> 
> 赞同：4
> 
> 时间：2013-04-04T09:28:04.770
> 
> 标签：android, google-maps, noclassdeffounderror

我有一个使用谷歌地图（v1）的应用程序，从崩溃报告中，我不时看到这个异常：

```
java.lang.NoClassDefFoundError: android.security.MessageDigest
at com.google.android.maps.KeyHelper.getSignatureFingerprint(KeyHelper.java:60)
at com.google.android.maps.MapActivity.createMap(MapActivity.java:513)
at com.google.android.maps.MapActivity.onCreate(MapActivity.java:409) 
```

我已经定义

```
<uses-library
            android:name="com.google.android.maps"
            android:required="true" /> 
```

在应用程序标签内，我也在扩展 MapActivity。该应用程序在大多数设备上都能正常工作，但也有一些不常见的设备会报告此异常，通常在 Android 4.0.4 上，如 Woxter Tablet PC 90BL、TAB9008GBBK 和其他通用名称。

从我在 Stackoverflow 中读到的内容来看，这是 ROM 中的一个问题，用户可以通过一些高级技巧来解决它，但我想要的是防止这种崩溃，因为我认为它无法解决，我只是想要通知用户（以及他购买更好的设备:) 并禁用地图功能而不是崩溃。但是我找不到处理此错误的方法或使用我拥有的设备对其进行测试。

我的主要活动也是基于 MapActivity 的，所以我不知道在打开它之前如何处理这个异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T13:00:18.577

**Disclaimer**: I've not come across this error on any of my apps / devices but I solved a similar problem. May be that same technique can help you.

Given that the class is either [unavailable](https://stackoverflow.com/questions/11137112/java-lang-noclassdeffounderror-android-security-messagedigest) or an exception occurrs while loading the class, why not try to force load it when your application starts ? `Class.forName("android.security.MessageDigest")` should load the class and you can catch the `Error` thrown from that call. I know its dirty, but it should work. You can declare a custom `Application` class on the manifest to make this check.

# Class loading test

```
 try
    {
        Class.forName("android.security.MessageDigest");
    }
    catch (Throwable e1)
    {
        e1.printStackTrace();
        //Bad device
    } 
```

You can also perform a litmus test and check the functionality of the class should the class loading succeed by digesting a simple `String`.

# Functional test

```
 try
    {
        MessageDigest digester = MessageDigest.getInstance("MD5");
        digester.update("test".getBytes("UTF-8"));
        byte[] digest = digester.digest();
    }
    catch (Throwable e1)
    {
        e1.printStackTrace();
        // Class available but not functional
    } 
```

If the class loading / litmus test fails, update a shared preference flag and let the user know that his device sucks :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T13:18:30.630

尝试将导入更改`android.security.MessageDigest`为`java.security.MessageDigest`

通过查看此链接：

[什么是“android.security.MessageDigest”？](https://stackoverflow.com/questions/11407685/what-is-android-security-messagedigest/11407929#11407929)

看起来它`android.security.MessageDigest`已从 Honeycomb 中删除，因此将其更改为 java 的。并检查此链接：

[http://productforums.google.com/forum/#!category-topic/maps/google-maps-for-mobile/KinrGn9DcIE](http://productforums.google.com/forum/#!category-topic/maps/google-maps-for-mobile/KinrGn9DcIE)

正如**@XGouchet**所建议的那样：

> 尝试下载最新版本的 Google Maps API 并重新构建您的应用程序，并将 targetSDK 设置为可用的最高版本（截至今天它应该是 17 / Jelly Bean）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T13:30:46.500

该类`android.security.MessageDigest`是一个抽象类（参见[MessageDigest](http://developer.android.com/reference/java/security/MessageDigest.html) API），这意味着它不能立即实例化。所以发生的事情是，任何时候设备/应用程序找不到此类的实现，您都会得到上面的异常，即

```
java.lang.NoClassDefFoundError: android.security.MessageDigest 
```

这是一个很好的问题，为什么会发生这种情况。可能是一些电话供应商没有在他们的电话中提供实际实现这个抽象类的所需库。我过去曾遇到过与该`TUN.ko`模块类似的问题。

*方法一*

应该有帮助的是，如果您提供此类的自己的（空）实现，该实现“实现”抽象类和方法，如下所示：

```
public class MessageDigestSpi extends Object {
     byte[] engineDigest() { return new byte[0]; }              

     void engineReset() { }

     void engineUpdate(byte[] input, int offset, int len) { }

}

public class MessageDigest extends MessageDigestSpi {

} 
```

...并将这些类放入文件夹`<src>/java/security/`中。因此，您可以通过这种方式提供您自己的实现，该实现始终可以找到并且可能包含一些代码，以便通知用户或提供替代实现。

所以剩下的问题是：应用程序做什么，如果实现也由系统提供，以及如何控制系统实现是首选？

答案：选择哪种实现取决于导入顺序。查看 Eclipse，您可以在项目属性、Java 构建路径、选项卡顺序和导出中定义顺序。确保您有任何可能包含系统实现的系统库（最有可能是 Android 库）。这样系统首先在这些库中搜索。如果什么也没找到，你的类就会被加载并执行。

*方法二*

作为在自己的抽象类中实现的替代方案，您当然可以简单地实例化 MessageDigest 类，捕获`NoClassDefFoundError`异常并存储结果以供以后评估：

```
import android.security.MessageDigest;

public class MessageDigestTester {

    private static Boolean messageDigestAvailable = null;

    public static Boolean isLibraryAvailable() {
        if (messageDigestAvailable == null) {
            try {
                MessageDigest digest = MessageDigest.getInstance("MD5");

                messageDigestAvailable = true;

            } catch (NoClassDefFoundError e) {
                messageDigestAvailable = false;
            }

        } 

        return messageDigestAvailable;
    }
} 
```

然后`if (MessageDigestTester.isLibraryAvailable()) { } else { }`在您的代码中使用以封装该库的使用并提供替代方案。

方法二更容易实现，而方法一是更复杂的解决方案。

希望这会有所帮助......干杯！

# java - 如何在java中为mac安装程序更改安装程序的java默认图标

> ID：15807379
> 
> 赞同：3
> 
> 时间：2013-04-04T09:28:18.620
> 
> 标签：java, maven, javafx, maven-plugin, pom.xml

我有 javafx 应用程序，我已经成功创建了应用程序的安装程序，但是我想更改安装程序的 java 默认图标，所以我在 pom.xml 中添加了 ${basedir}/src/main/resources/images/logoIcon.ico但它不能改变，

pom.xml的整个snap如下：

http://maven.apache.org/xsd/maven-4.0.0.xsd">

```
<modelVersion>4.0.0</modelVersion>

<groupId>com.testDemo</groupId>
<artifactId>test-app</artifactId>
<name>demo-app</name>

<packaging>jar</packaging>
<version>1.0</version>

<organization>
    <!-- Used as the 'Vendor' for JNLP generation -->
    <name>testDemo</name>
</organization>

<properties>
    <slf4j.version>1.6.1</slf4j.version>
    <springframework.version>3.2.2.RELEASE</springframework.version>
</properties>

<build>
    <plugins>
        <plugin>
            <groupId>com.zenjava</groupId>
            <artifactId>javafx-maven-plugin</artifactId>
            <version>1.5</version>
            <configuration>

                <mainClass>com.testdemo.testapp.testApplication</mainClass>

                <!-- only required if signing the jar file -->
                <keyStoreAlias>example-user</keyStoreAlias>
                <keyStorePassword>example-password</keyStorePassword>
                <permissions>
                    <permission>all-permissions</permission>
                </permissions>
                <icon>${basedir}/src/main/resources/images/logoIcon.ico</icon>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
            </configuration>
        </plugin>

    </plugins>
</build>

<dependencies>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${springframework.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${springframework.version}</version>
    </dependency>

    <dependency>
        <groupId>com.miglayout</groupId>
        <artifactId>miglayout-javafx</artifactId>
        <version>4.2</version>
    </dependency>

    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.6</version>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${slf4j.version}</version>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>${slf4j.version}</version>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>${slf4j.version}</version>
    </dependency>

    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.11</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-io</artifactId>
        <version>1.3.2</version>
    </dependency>

    <dependency>
        <groupId>commons-beanutils</groupId>
        <artifactId>commons-beanutils-core</artifactId>
        <version>1.8.3</version>
    </dependency>

    <dependency>
        <groupId>com.javadocmd</groupId>
        <artifactId>simplelatlng</artifactId>
        <version>RELEASE</version>
    </dependency>

    <dependency>
        <groupId>javax.xml.bind</groupId>
        <artifactId>jaxb-api</artifactId>
        <version>2.2.7</version>
    </dependency>

    <dependency>
        <groupId>com.sun.xml.bind</groupId>
        <artifactId>jaxb-impl</artifactId>
        <version>2.2.6</version>
    </dependency>

    <dependency>
        <groupId>org.json</groupId>
        <artifactId>json</artifactId>
        <version>20090211</version>
    </dependency>

</dependencies> 
```

对于创建包，我使用以下命令，

1.  mvn jfx:build-jar（它只提供应用程序的 jar）
2.  mvn jfx:build-native（它提供应用程序的 .dmg 文件）

所以请建议我，如何更改 mac 的默认安装程序图标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-19T12:02:18.323

我在那里添加了 src/main/deploy/package/macosx/myapp.ico ，它终于奏效了:)

为你：

创建 src/main/deploy/package/macosx/ 文件夹 添加名称为 ${project.build.finalName}.ico 的图标 运行 mvn jfx:build-native 我没有广泛使用它 - 只是让它工作并想要分享。所以如果你想使用不同名称的图标，我不知道怎么做。至少现在还没有。config部分中的...部分似乎是针对webstart的，所以我一直没有使用它。希望你让它工作！

[在How to set custom icon for javafx native package icon on Windows 中](https://stackoverflow.com/questions/15880102/how-to-set-custom-icon-for-javafx-native-package-icon-on-windows/16477177#16477177)回答相同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:28:06.970

快速查看[源代码](https://github.com/zonski/javafx-maven-plugin/blob/master/src/main/java/com/zenjava/javafx/maven/plugin/AbstractBundleMojo.java)让我认为该图标不能位于子目录中（这似乎是一个错误）。

作为一种解决方法，您可以尝试将您的`logoIcon.ico`一个目录上移（in `src/main/resources`）

如果不起作用，您也可以尝试将其放入`src/main/deploy/`（而不是在子目录中）

要调试它，您还可以使用该`-X`选项运行 maven 并查找日志：

`Using icon file at ...`

**但是**要小心这个日志，因为它可能会打印正确的路径，而似乎只有文件名将用于解析图标（即子目录将被忽略）

# java - 如何获得经度和纬度的地理位置？

> ID：15807382
> 
> 赞同：-5
> 
> 时间：2013-04-04T09:28:33.753
> 
> 标签：java, android

所以我想创建一种方法来获取我的地理位置**（经度和纬度）**，我不需要在地图中显示结果我只需要 2 个参数**（经度和纬度）**，所以如果有人知道我会非常感谢。注意：我住在**摩洛哥**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:34:55.393

首先确保您在清单中定义了以下权限：

```
<uses-permission android:name=“android.permission.ACCESS_FINE_LOCATION”/> 
```

然后定义一个`LocationManager`并为其分配一个监听器：

```
LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

LocationListener mlocListener = new MyLocationListener();

mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener); 
```

然后，侦听器应该能够接收坐标。

你可以像这样定义一个监听器：

```
public class MyLocationListener implements LocationListener 
{

     @Override

     public void onLocationChanged(Location loc)
     {
        float latitude = loc.getLatitude(); //Retrieve the latitude
        float longitude = loc.getLongitude(); //Retrieve the longitude
        Toast.makeText( getApplicationContext(),"Current location: "+latitude+","+longitude,Toast.LENGTH_SHORT).show();
    }
} 
```

# git - 如何在旧提交引入的更改集上执行脚本？

> ID：15807388
> 
> 赞同：0
> 
> 时间：2013-04-04T09:28:39.653
> 
> 标签：git, git-rebase

如何编辑由我的存储库中大量旧提交引入的**更改集。**例如，我想在我的所有文件中用“ **bar ”更改“** **foo** ”的所有外观，这些文件随着几次提交而更改。因为有大量的提交，我不想手动进行。我知道“ **git rebase -i** ”可以选择“ **exec** ”（“x, exec = run command (the rest of the line) using shell”）但是我如何指定我想要脚本的变更集跑步？

 ******假设我的历史结构如下所示：

```
 A---B---C---D.....---P---Q topic
                   /
           A'---B'---C' master 
```

许多提交 A、B、....P 和 Q 在源文件中引入了“ **foo** ”这个词。现在我想用“ **bar ”改变“** **foo** ”的所有外观，但也要保持现在的历史记录（即按原样进行单独的提交）。我怎样才能做到这一点？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:25:31.020

看看，特别是在优秀的[git book](http://git-scm.com/book)`git filter-branch`中查找它。[git 魔术](http://www-cs-students.stanford.edu/~blynn/gitmagic/)页面充满了技巧和窍门。********

# sql - 在 SQL SELECT 结果中添加空白记录

> ID：15807390
> 
> 赞同：1
> 
> 时间：2013-04-04T09:28:47.027
> 
> 标签：sql, ms-access

我有这个 SQL 查询：

```
SELECT clientName FROM Clients; 
```

导致：

```
clientName  
"Einstein"  
"Edison"  
"Newton" 
```

我想像这样在“爱因斯坦”之上添加一条空记录

```
clientName  
""
"Einstein"  
"Edison"  
"Newton" 
```

请为此提供一个 SQL sintax 帮助我，我希望它在 msaccess 中工作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:29:24.720

添加`UNION`

```
SELECT DISTINCT '' AS clientName FROM Clients
UNION
SELECT clientName FROM Clients 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:39:59.560

试试这个查询：

```
SELECT '""' AS clientName FROM Clients UNION SELECT clientName FROM Clients 
```

实际上，这与**JW 差不多**。但他似乎忘记了**“”**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:01:01.767

这是**`DB2`**版本

```
SELECT '""' FROM SYSIBM.SYSDUMMY1
UNION
SELECT SELECT clientName FROM Clients; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T16:38:14.990

Access 中的技巧是将查询类型更改为 Pass-Through 查询，然后像 Luv 一样进行一些小的更改来编写它。这就是它在 WCS DB2 表中的样子。

```
SELECT '' AS DisplayName FROM SYSIBM.SYSDUMMY1
UNION
SELECT DB2ADMIN.ACACTDESC.DISPLAYNAME
FROM DB2ADMIN.ACACTDESC; 
```

# linux - 可以从 Qt 运行程序，但不能从 konsole 运行它

> ID：15807391
> 
> 赞同：0
> 
> 时间：2013-04-04T09:28:48.327
> 
> 标签：linux, qt, terminal, opensuse

我有一个问题听起来很奇怪。我在 Qt 中编译了一个程序，它运行成功。

但是当我导航到 konsole 中的发布文件夹并运行程序（即使是超级用户）时，它报告：

```
If 'HelloWorld' is not a typo you can use command-not-found to lookup the package that contains it, like this:
    cnf HelloWorld 
```

我检查了权限，所有用户都可以阅读。路径是正确的。我走开了。

请帮我！

注意：我在 OpenSuse 12.1 上使用 Qt 4.74。几天前刚从windows切换

我认为这与源代码无关，因为即使是简单的 HelloWorld 程序也无法运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:41:59.067

如果程序在当前目录中，请确保使用前缀指示运行它：

```
./HelloWorld 
```

# asp.net - Internet Explorer 7 的正则表达式帮助

> ID：15807397
> 
> 赞同：2
> 
> 时间：2013-04-04T09:28:59.223
> 
> 标签：asp.net, regex

正则表达式不是我的强项，但我一直在使用下面的代码来验证密码是否在 8 到 20 个字符之间，并且至少有一个数字和一个大小写字符。

```
((?=.*\d)(?=.*[A-Z])(?=.*[a-z]).{8,20}) 
```

一切正常，直到我在 Internet Explorer 中进行测试，它返回的所有密码都无效。

这是由于此处描述的 Internet Explorer 7 错误[IE7 正则表达式问题 - 适用于每个浏览器的正则表达式在 ie7 中不起作用](https://stackoverflow.com/questions/3999733/ie7-regex-issue-regex-that-work-in-every-browser-does-not-work-in-ie7)

在关于上述问题的博客文章之后，我看到有些人说，在大多数情况下，正则表达式可以重新设计，以便它可以在 IE7 上运行，但正如我所说，我的正则表达式知识并不是最好的，所以如果有新人如何制作以上在 IE7 上的工作会很棒。

我正在使用 ASP.NET，因此另一个选项是将 EnableClientScript 设置为 False，以便在服务器端检查正则表达式，但如果可能的话，我宁愿先检查客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:32:51.500

只看你发布的链接。[给](http://blog.stevenlevithan.com/archives/regex-lookahead-bug)你：

```
/((?=.{8,20})(?=.*\d)(?=.*[A-Z])(?=.*[a-z]).*)/ 
```

此外，按照相同的链接，这也应该有效：

```
/((?=.+\d)(?=.+[A-Z])(?=.+[a-z]).{8,20})/ 
```

# matlab - 将文本文件解析为结构

> ID：15807405
> 
> 赞同：1
> 
> 时间：2013-04-04T09:29:12.380
> 
> 标签：matlab, parsing, text, structure

出于某些目的，我想提供一个外部文本文件作为我的一个`MATLAB`函数的输入。

通常，此文本文件显示以下布局：

```
-----------------------------------------------------

HubHt = 90;
GridWidth = 220;
GridHeight = 220;
Ny = 35;
Nz = 37;
Nfft = 8192;
time = 620;
Uhub = 15;
Coherence = Bladed;

----------------------------------------------------- 
```

为了阅读它，我目前正在调用这段代码：

```
fid = fopen('test.inp','r+');
A = textscan(fid,'%s','Delimiter',';','commentStyle', '-','CollectOutput',1);
fclose(fid);
A = A{1};
inputs = regexp(A,' = ','split'); 
```

最后一个变量，`inputs`产生一个`<9x1>`单元格；每个元素都是一个`<1x2>`单元格。

单元格的第一个元素`<1x2>`应该是整个 INPUT 结构的字段，而第二个元素是相关参数。

目前，我正在使用一种非常静态和糟糕的方式来实现我的目标：

```
inp = struct(char(inputs{1}(1)),str2double(inputs{1}(2)),char(inputs{2}(1)),str2double(inputs{2}(2)),char(inputs{3}(1)),str2double(inputs{3}(2)),char(inputs{4}(1)),str2double(inputs{4}(2)),char(inputs{5}(1)),str2double(inputs{5}(2)),char(inputs{6}(1)),str2double(inputs{6}(2)),char(inputs{7}(1)),str2double(inputs{7}(2)),char(inputs{8}(1)),str2double(inputs{8}(2)),char(inputs{9}(1)),char(inputs{9}(2))); 
```

我相信存在更好的方法来做同样的事情：我希望你能和我分享一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T09:58:51.167

您可以使用`cell2struct`：

```
% create cell vector where fieldnames and values alternate
tmp = [inputs{:}];

inp =  cell2struct(tmp(2:2:end), tmp (1:2:end), 2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:54:26.030

既然你写的是（几乎）有效的 Matlab 源代码，为什么不给它文件扩展名`.m`并运行它呢？或者从你的函数内部调用它。

这是我们经常使用的一种方法；它简单明了。显然，您必须确保它是（完全）有效的 Matlab 源，但这并不难。

# python - 如何正确地将列表列表的输出格式化为文本文件？

> ID：15807407
> 
> 赞同：0
> 
> 时间：2013-04-04T09:29:15.570
> 
> 标签：python, formatting, output

我对python真的很陌生，现在我在做一个学生项目时遇到了一些问题。基本上我尝试从格式化为列的文本文件中读取数据。我将数据存储在列表列表中，并对数据进行排序和操作，然后再次将它们写入文件。我的问题是将写入的数据对齐在适当的列中。我发现了一些方法，例如

> "%i, %f, %e" % (1000, 1000, 1000)

但我不知道会有多少列。所以我想知道是否有办法将所有列设置为固定宽度。

这是输入数据的样子：

```
2     232.248E-09         74.6825             2.5         5.00008         499.482
5             10\.         74.6825             2.5        -16.4304           -12.3 
```

这就是我将数据存储在列表列表中的方式：

```
 filename = getInput('MyPath', workdir)
  lines = []
  f = open(filename, 'r')
    while 1:
        line = f.readline()
        if line == '':
            break
        splitted = line.split()
        lines.append(splitted)            
    f.close() 
```

为了写入数据，我首先将列表列表的所有行元素放入一个字符串中，元素之间有一个固定的空闲空间。但相反，我需要一个固定的总空间，包括元素。但我也不知道文件中的列数。

```
for k in xrange(len(lines)):
    stringlist=""
    for i in lines[k]:
        stringlist = stringlist+str(i)+'        '
    lines[k] = stringlist+'\n'

    f = open(workdir2, 'w')
    for i in range(len(lines)):
        f.write(lines[i])
    f.close() 
```

这段代码基本上可以工作，但遗憾的是输出格式不正确。

非常感谢您在此问题上提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:45:35.630

字符串格式化可能是要走的路：

```
>>> print("%10s%9s" % ("test1", "test2"))
     test1    test2 
```

虽然您可能希望首先从这些数字创建字符串，然后按照我上面显示的那样格式化它们。

我无法完全理解您的*编写*代码，但尝试以某种方式处理它：

```
from itertools import enumerate

with open(workdir2, 'w') as datei:
    for key, item in enumerate(zeilen):
        line = "%4i %6.6" % key, item
        datei.write(item) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:54:50.843

你完全正确地开始能够像上面那样使用字符串格式化来格式化宽度。但正如您正确指出的那样，棘手的一点是为可变大小的输出列表执行此操作。相反，您可以使用 join() 函数：

```
output = ['a', 'b', 'c', 'd', 'e',]

# format each column (len(a)) with a width of 10 spaces
width = [10]*len(a)

# write it out, using the join() function
with open('output_example', 'w') as f:
    f.write(''.join('%*s' % i for i in zip(width, output))) 
```

会写出：

```
'         a         b         c         d         e' 
```

如您所见，格式数组`width`的长度由输出的长度决定`len(a)`。这足够灵活，您可以即时生成它。

希望这可以帮助！

# nhibernate - NHibernate 映射没有主键的实体

> ID：15807413
> 
> 赞同：6
> 
> 时间：2013-04-04T09:29:33.147
> 
> 标签：nhibernate, mapping

由于某些原因，我的实体没有主键：

```
public partial class VehicleLocation
{
    public virtual string UserCode { get; set; }
    public virtual string DateTime { get; set; }
    public virtual string Device { get; set; }
    public virtual string Gps { get; set; }
    public virtual string GpsDateTime { get; set; }
    public virtual double Speed { get; set; }
} 
```

映射：

```
class VehicleLoactionMap : ClassMap<VehicleLocation> 
{
    public VehicleLoactionMap()
    {
        Table("VEHICLE_LOCATION");
        LazyLoad();
        Map(x => x.UserCode).Column("USER_CODE");
        Map(x => x.DateTime).Column("DATE_TIME");
        Map(x => x.Device).Column("DEVICE");
        Map(x => x.Gps).Column("GPS");
        Map(x => x.GpsDateTime).Column("GPS_DATE_TIME");
        Map(x => x.Speed).Column("SPEED");
    }
} 
```

我收到了这个错误：

> 实体“VehicleLocation”没有映射 Id...

如何在不使用主键的情况下映射我的实体？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T09:39:09.287

不久前我遇到了同样的问题，但经过大量搜索后，我发现没有标识符字段的实体不可能在 nHibernate 中映射。

但是您可以通过使用复合键而不是唯一标识符来做到这一点。虽然我自己没有试过。

[这](https://stackoverflow.com/questions/2633718/whats-the-best-way-to-use-nhibernate-for-objects-without-id#answer-2633788)是对可能对您有所帮助的类似问题的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T10:04:02.100

没有办法这样做，因为 NHibernate 需要每个实体的唯一标识符。这是因为 NHibernate 需要一种将数据库表中的一行数据绑定到实体的方法。如果它不能做到这一点，那么它就无法对实体数据执行任何形式的持久性。

在表没有单个主键的情况下，我发现了两种可能的工作方法。

1.  使用复合主键。

2.  如果您的 DBMS 支持，您可以使用物理行标识符。SQL Server 2008 有`%%physloc%%`，Oracle 有`ROWID`.

但在几乎任何情况下，我真的不推荐选项 2。这是因为 DBMS 不保证行 ID 在行的生命周期内保持不变，因此是非常不可靠的主键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-29T14:11:41.973

轻松创建复合键。代码示例（VB）：

```
Table("Table1")
CompositeId().KeyProperty(Function(x) x.Field1).KeyProperty(Function(x) x.Field2) 
```

# android - Android 内置 apache 与最新的稳定 apache

> ID：15807415
> 
> 赞同：0
> 
> 时间：2013-04-04T09:29:36.057
> 
> 标签：android, apache, httpclient

我想研究 Android 中使用的内置 apache 版本，是否有任何意义可以在 apache 网站上的最新稳定 apache jar 上更改它。我面临的当前问题是执行发布请求时有很大的延迟。我在 stackoverflow 中阅读了很多关于它的帖子，一些用户说从 4.1.1 版本开始，这个问题得到了解决。我试图将最新的稳定 apache 客户端和核心 jar 放入我的项目中，将它们添加到依赖项中，但似乎仍在使用 android 内置 apache。如何强制使用第三方apachy jar？

我的http客户端：

```
import com.example.restservice.service.EasySSLSocketFactory;
import org.apache.http.HttpVersion;
import org.apache.http.client.HttpClient;
import org.apache.http.conn.ClientConnectionManager;
import org.apache.http.conn.scheme.PlainSocketFactory;
import org.apache.http.conn.scheme.Scheme;
import org.apache.http.conn.scheme.SchemeRegistry;
import org.apache.http.conn.ssl.SSLSocketFactory;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager;
import org.apache.http.params.BasicHttpParams;
import org.apache.http.params.HttpParams;
import org.apache.http.params.HttpProtocolParams;
import org.apache.http.protocol.HTTP;

import java.security.KeyStore;

public class HttpUtils {
private static DefaultHttpClient client;

public static HttpClient getHttpClient() {
    if (client != null)
        return client;

    try {
        // here we can set a custom keystore if we need to
        KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());
        trustStore.load(null, null);

        SSLSocketFactory sf = new EasySSLSocketFactory(trustStore);
        sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);

        HttpParams params = new BasicHttpParams();

        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
        HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);

        SchemeRegistry registry = new SchemeRegistry();
        registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
        registry.register(new Scheme("https", sf, 443));

        ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);

        client = new DefaultHttpClient(ccm, params);

    } catch (Exception e) {
        client = new DefaultHttpClient();
    }
    return client;
}
} 
```

SSLSoket：

```
import org.apache.http.conn.ssl.SSLSocketFactory;
import javax.net.ssl.SSLContext;
import javax.net.ssl.TrustManager;
import javax.net.ssl.X509TrustManager;
import java.io.IOException;
import java.net.Socket;
import java.net.UnknownHostException;
import java.security.*;
import java.security.cert.CertificateException;
import java.security.cert.X509Certificate;

public class EasySSLSocketFactory extends SSLSocketFactory {
SSLContext sslContext = SSLContext.getInstance("TLS");

public EasySSLSocketFactory(KeyStore truststore) throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException, UnrecoverableKeyException {
    super(truststore);
    TrustManager tm = new X509TrustManager() {
        public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {
        }

        public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {
        }

        public X509Certificate[] getAcceptedIssuers() {
            return null;
        }
    };

    sslContext.init(null, new TrustManager[] {
        tm
    }, null);
}

@Override
public Socket createSocket(Socket socket, String host, int port, boolean autoClose) throws IOException, UnknownHostException {
    return sslContext.getSocketFactory().createSocket(socket, host, port, autoClose);
}

@Override
public Socket createSocket() throws IOException {
    return sslContext.getSocketFactory().createSocket();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:57:19.627

这是一个带有说明的[罐子。](https://code.google.com/p/httpclientandroidlib/)

包括在您的 android 项目中并更改导入语句，如链接中的文档中所示。

# prolog - Prolog 将列表元素与 Head 元素进行比较

> ID：15807419
> 
> 赞同：1
> 
> 时间：2013-04-04T09:29:48.227
> 
> 标签：prolog

我有谓词显示所有小于 10 的数字。

```
 small([H|T],H):- H=<10.
    small([_|T],X):-small(T,X). 
```

这很简单。但是我应该如何改变它，以便我可以将下一个项目与第一个元素进行比较？

例如，?- small([4,2,3,9,1,0,12],X)。会显示 X=2;X=3;X=1;X=0 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:05:16.147

您可以将问题拆分为两个过程，一个过程采用第一个元素，然后对列表的其余元素应用递归，并检查每个项目是否小于或等于第一个元素：

```
small([M|T],X):- small1(T, M, X).

small1([H|_], M ,H):- H =< M.
small1([_|T], M, X):- small1(T, M, X). 
```

# c# - C# - 在 Azman 中通过登录用户获取角色

> ID：15807420
> 
> 赞同：0
> 
> 时间：2013-04-04T09:29:49.807
> 
> 标签：c#, asp.net, authorization, azman, authorizationmanager

我正在使用 C# 通过登录用户从 Azman Manager 获取角色。

这是我的代码，

```
internal string AzRoleCheck(string strUserName)
    {
        string strRoleName = string.Empty;
        try
        {
            WindowsIdentity userIdentity = new WindowsIdentity(strUserName);
            clientContext = azApplication.InitializeClientContextFromToken((ulong)userIdentity.Token, null);
            foreach (IAzRole Azrole in azApplication.Roles)
            {
                strRoleName = Azrole.Name;
                foreach (object member in (object[])Azrole.MembersName)
                {
                    string strMemberName = member.ToString();
                    string[] str1 = Regex.Split(strMemberName, "@");
                    if (string.Equals(str1[0],strUserName,StringComparison.CurrentCultureIgnoreCase))
                        return strRoleName;
                }
            }
        }
        catch (Exception)
        {

            throw;
        }
        return strRoleName;
    } 
```

当广告用户登录到我的应用程序时，使用“strUserName”参数调用上述方法。在这里，我通过使用**foreach**来检查来自 azman 的所有用户角色，并在此**foreach**中基于角色获取`membername`，然后检查所有这些成员在角色下是否可用。如果成员在角色下可用，则表示将用户角色作为字符串返回。

它工作正常，但我的问题是，这是基于用户获取角色的正确方法吗？

`I have a question, i added a AD-User group to Azman, Now i am logging in through userName, how do i get the Azman role ?` 提前致谢...

# android - 如何在android中加密用户名和密码

> ID：15807423
> 
> 赞同：0
> 
> 时间：2013-04-04T09:29:52.533
> 
> 标签：android, encryption

我已经编写了一些用于加密用户名和密码的代码并写在一个文件中，但是当我想恢复这些值时，我没有得到原始值，我在读取文件时遇到异常。我为此目的的代码如下

```
public class Storage 
{
    private final byte[] salt = {
            ( byte )0xf5, ( byte )0x33, ( byte )0x01, ( byte )0x2a,
            ( byte )0xb2, ( byte )0xcc, ( byte )0xe4, ( byte )0x7f
            };
        private int iterationCount = 100;

        public void encryptAndWriteToFile(String host,String user,String pw,boolean flag)
        {
            String usr=host+","+user+","+pw+","+Boolean.toString(flag);
            Cipher cipher = null;
            try 
            {
                PBEKeySpec keySpec =new PBEKeySpec(usr.toCharArray());
                SecretKeyFactory keyFactory =SecretKeyFactory.getInstance( "PBEWithMD5AndDES" );
                SecretKey secretKey = keyFactory.generateSecret( keySpec );
                PBEParameterSpec parameterSpec =new PBEParameterSpec( salt, iterationCount );
                cipher = Cipher.getInstance( "PBEWithMD5AndDES" );
                cipher.init( Cipher.ENCRYPT_MODE, secretKey,parameterSpec );
            }catch ( NoSuchAlgorithmException exception )
            {
                exception.printStackTrace();
                System.exit( 1 );
            }catch ( InvalidKeySpecException exception )
            {
                exception.printStackTrace();
                System.exit( 1 );
            }catch ( InvalidKeyException exception )
            {
                exception.printStackTrace();
                System.exit( 1 );
            }catch ( NoSuchPaddingException exception )
            {
                exception.printStackTrace();
                System.exit( 1 );
            }catch ( InvalidAlgorithmParameterException exception )
            {
                exception.printStackTrace();
                System.exit( 1 );
            }
            byte[] outputArray = null;
            try 
            {
                outputArray = usr.getBytes( "ISO-8859-1" );
            }catch (UnsupportedEncodingException ex) 
            {
                        Logger.getLogger(Storage.class.getName()).log(Level.SEVERE, null, ex);
            }
            File sdCard=Environment.getExternalStorageDirectory();//+"/userData.txt";
            String user_credentails=sdCard.getName()+"/userData.txt";
            File file = new File(user_credentails);
            Log.d(user_credentails, "is input file ");
            FileOutputStream fileOutputStream = null;
            try
            {
                fileOutputStream = new FileOutputStream( file );
            }catch ( IOException exception )
            {
                exception.printStackTrace();
                System.exit( 1 );
            }
            CipherOutputStream out =new CipherOutputStream( fileOutputStream, cipher );
            try
            {
                out.write( outputArray );
                out.flush();
                out.close();
            }catch ( IOException exception )
            {
                exception.printStackTrace();
                System.exit( 1 );
            }
            Vector fileBytes = new Vector();
            try 
            {
                FileInputStream in = new FileInputStream( file );
                byte contents;
                while ( in.available() > 0 ) {
                contents = ( byte )in.read();
                fileBytes.add( new Byte( contents ) );
                }
                in.close();
            }catch ( IOException exception )
            {
                exception.printStackTrace();
                System.exit( 1 );
            }
            byte[] encryptedText = new byte[ fileBytes.size() ];
            for ( int i = 0; i < fileBytes.size(); i++ ) 
            {
                encryptedText[ i ] =
                ( ( Byte ) fileBytes.elementAt( i ) ).byteValue();
            }
        }
        public String[] readFromFileAndDecrypt(boolean state)
        {
            Vector fileBytes = new Vector();
            String pw = "123";
            String fileName = "security.txt";
            String usr="10.0.2.2"+","+"haider"+","+pw+","+Boolean.toString(state);
            Cipher cipher = null;
            try 
            {
                PBEKeySpec keySpec =new PBEKeySpec(usr.toCharArray());
                SecretKeyFactory keyFactory =SecretKeyFactory.getInstance( "PBEWithMD5AndDES" );
                SecretKey secretKey = keyFactory.generateSecret( keySpec );
                PBEParameterSpec parameterSpec =new PBEParameterSpec( salt, iterationCount );
                cipher = Cipher.getInstance( "PBEWithMD5AndDES" );

                cipher.init( Cipher.DECRYPT_MODE, secretKey,parameterSpec );
            }catch ( NoSuchAlgorithmException exception ) 
            {
                exception.printStackTrace();
                System.exit( 1 );
            }catch ( InvalidKeySpecException exception ) 
            {
                exception.printStackTrace();
                System.exit( 1 );
            }catch ( InvalidKeyException exception )
            {
                exception.printStackTrace();
                System.exit( 1 );
            }catch ( NoSuchPaddingException exception )
            {
                exception.printStackTrace();
                System.exit( 1 );
            }catch ( InvalidAlgorithmParameterException exception )
            {
                exception.printStackTrace();
                System.exit( 1 );
            }
            try 
            {
                File sdCard=Environment.getExternalStorageDirectory();
                String user_credentails=sdCard.getAbsolutePath()+"/userData.txt";
                Log.d(user_credentails, " is file name and path");
                File file = new File(user_credentails);
                FileInputStream fileInputStream =new FileInputStream( file );
                CipherInputStream in =new CipherInputStream( fileInputStream, cipher );
                byte contents = ( byte ) in.read();
                Log.d(Byte.toString(contents),"  is line");//.out.println("\n"+contents+"\n");
                while ( contents != -1 ) 
                {
                    fileBytes.add( new Byte( contents ) );
                    contents = ( byte ) in.read();
                }
                in.close();
            }catch ( IOException exception ) 
            {
                exception.printStackTrace();
                System.exit( 1 );
            }
            byte[] decryptedText = new byte[ fileBytes.size() ];
            for( int i = 0; i < fileBytes.size(); i++ ) 
            {
                 decryptedText[ i ] =( ( Byte )fileBytes.elementAt( i ) ).byteValue();
            }
            Log.d(new String(decryptedText)," is data");
            String uUser=new String( decryptedText );
            String[] delims=uUser.split(",");
            return delims;
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:34:25.093

一种合理的方法是在应用程序首次启动时生成真正随机的 AES 密钥

[看到这个](http://android-developers.blogspot.in/2013/02/using-cryptography-to-store-credentials.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T09:36:29.407

通常，如果您想存储帐户凭据，您应该使用 Android AccountManager：

[http://developer.android.com/reference/android/accounts/AccountManager.html](http://developer.android.com/reference/android/accounts/AccountManager.html)

# java - 我们可以在 android 的一个类中为不同的活动创建通用的 onOptionsItemSelected(MenuItem item)

> ID：15807424
> 
> 赞同：2
> 
> 时间：2013-04-04T09:29:58.480
> 
> 标签：java, android, menu

注意：类 ProcessingOptionMenu 将没有自己的布局。没有布局的类是否可以启动另一个活动，例如类 ProcessingOptionMenu 启动新活动 SettingABC

活动 A { ..

```
 public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.second_menu, menu);
        return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {

        ProcessingOptionMenu objectMenu= new ProcessingOptionMenu();
        boolean resultReturn=objectMenu.identifyItem(item);
       }
                ..
}

Activity B {
               ..

        public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.second_menu, menu);
        return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {

        ProcessingOptionMenu objectMenu= new ProcessingOptionMenu();
        boolean resultReturn=objectMenu.identifyItem(item);
       }
             ..
}

class ProcessingOptionMenu extends Activity {
    public boolean identifyItem(MenuItem item) {
            if (item.getItemId() == R.id.settingapp) {
        Intent intentAppSetting = new Intent(ProcessingOptionMenu.this,                        SettingABC.class);
            startActivity(intentAppSetting);
            return true;
        }
        return false;
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:37:06.753

为什么需要一个从 Activity 扩展的类？只需编写一个方法来处理点击事件并在其中触发一个新活动。如果您愿意，可以将此方法放在父类中，并让您的活动 A 和 B 从它扩展。

# apache-flex - Flex 应用程序中的内存泄漏

> ID：15807425
> 
> 赞同：2
> 
> 时间：2013-04-04T09:30:00.183
> 
> 标签：apache-flex, memory-leaks, blazeds

我的 Flex 应用程序面临内存泄漏。Flex 应用程序是大型 Web 应用程序的一部分（内部包含各种技术）。

当 Flex 应用程序每 5 秒从服务器调用一次刷新轮询时，就会发生内存泄漏。

**事实是：**

*   我正在使用**AMFChannel**进行连接。投票是假的。每次刷新都会创建新的**AMFChannel**实例。
*   服务器端是**BlazeDS**，在我的 Web 应用程序中作为 servlet 运行。
*   内存泄漏发生在**IE**和**FireFox**上。它根本不会发生在**Chrome**上。
*   一夜之间，IE 内存增加了数百 MB，最终崩溃。
*   在 Flex 中，内存确实增加了，但速度要慢得多。一夜之间，它将增加 30MB。
*   使用 Flex 分析器，我看到增加的内存与**AMFChannels**相关。
*   我尝试将**AMFChannel requestTimeout**设置为 60 秒。它什么也没做。
*   我尝试将**BlazeDS 连接超时秒数**设置为 60 秒。没有改变。但我不确定我做对了。

**到目前为止，我的结论是：**

*   AMFChannel 实际上是从浏览器获取连接。在 Flex 中 AMFChannel 消耗一小块内存，而在浏览器中它消耗更多。这解释了 Flex 应用程序和 IE 之间的内存消耗不同。
*   不知何故，AMFChannel 没有关闭，也没有被垃圾收集。

**我的要求：**

*   我的结论是对的吗？
*   如何确保 AMFChannel 已关闭并清理？
*   客户端上的连接实例是否由 BlazeDS（在服务器端）控制？
*   任何其他有助于我继续调查此问题的线索

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-24T10:00:54.673

我们也有同样的问题。JVM 每 24 到 50 小时就会出现一次内存不足。我已经记录了针对 JVM 端问题的有效修复程序。

[修复 blazeds 内存泄漏](http://in-finite.me/fixing-blazeds-polling-amf-memory-leak/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:32:32.127

像所有对象一样，在某些时候需要将指针声明为 null 以使其符合 GC 条件。使用 AMFChannel 对象，最好的方法是为事件`channelDisconnect`和`channelFault`事件设置侦听器。如果您有对实例的类成员引用，则可以从这些事件处理程序中的任何一个中将其声明为 null。

要确定是否应该从客户端调用断开连接，可以查看以下属性：shouldBeConnected 和 connected。

# iphone - 代表们对 Linea Pro 条码扫描仪有多种看法

> ID：15807427
> 
> 赞同：0
> 
> 时间：2013-04-04T09:30:04.690
> 
> 标签：iphone, ios, objective-c, barcode-scanner, linea-pro

我正在使用 Linea Pro 硬件条码扫描仪开展一个项目。开始时，我使用了以下答案[How do I use the Linea-Pro SDK for IOS?](https://stackoverflow.com/questions/13935378/how-do-i-use-the-linea-pro-sdk-for-ios)

我的应用程序由一个导航控制器（包含两个条目的表）和两个连接的视图控制器（每个都使用扫描仪）组成。

我在导航控制器的 viewDidLoad 中连接设备，如下所示：

```
dtdev=[DTDevices sharedDevice];
[dtdev connect]; 
```

在两个视图控制器中，我在 viewDidLoad 方法中注册设备，如下所示：

```
dtdev=[DTDevices sharedDevice];
[dtdev addDelegate:self];
[super viewDidLoad]; 
```

不幸的是，当我单击设备扫描按钮时，两个视图控制器的两个委托方法都被调用，因为它们都注册了它。

为了防止这种行为，我想在视图可见时将 viewController 设置为委托，所以我把**[dtdev addDelegate:self];** 进入*viewWillAppear*方法并放置一个**[dtdev removeDelegate:self];** 在*viewWillDisappear*方法中。之后条码扫描器在调用 removeDelegate 后将不再工作，即使它是通过 addDelegate 再次添加的。

我没有看到另一种将两个视图控制器添加为委托然后在委托方法中放入这样的代码的方法：“我可见吗”？--> 继续：否则中断；（但这很愚蠢，对吧？）

这是一个错误还是我没有直接思考？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T23:27:40.640

我很惊讶添加/删除委托不起作用，听起来像一个错误。如果你有一个导航控制器的例子，我建议你把它发送到 LineaPro。

您确定 sharedDevice 仍然设置并且当您再次调用 addDelegate 时您的 dtdev 不是 nil 吗？

简单的解决方案可能正是您的想法。将此添加到两个委托的顶部（因为您使用的是导航控制器）。

> if (self != self.navigationController.visibleViewController) 返回；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T15:23:57.357

我有同样的问题，我通过添加另一个解决了这个问题：

`[dtdev addDelegate:self];`

在`viewDidAppear`方法。

我希望这能帮到您。

# c++ - 在 C++ 中使用计数

> ID：15807431
> 
> 赞同：-1
> 
> 时间：2013-04-04T09:30:10.333
> 
> 标签：c++

在文本文件中，前 8 行是文本，我不需要，所以在我将文本文件读入之前`vector`...我想做一个计数，所以它基本上从第 9 行开始读取文件；

```
if (myfile.is_open())
{
    while ( getline(myfile, line) )
    {
        if count > 8;
        istringstream buffer(line);
        int x, y; 
        if (!(buffer >> x >> y));

        Station objName = {x, y};
        data_station.push_back(objName);
        count == count +1;
    }
} 
```

这是我要做的，但我似乎无法理清计数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T09:31:23.057

这不是*任务*：

```
count == count +1; 
```

但是是一个相等检查意味着`count`' 的值永远不会改变。改成：

```
count++; 
```

或者：

```
// See comment from rhalbersma.
++count; 
```

后面还有一个分号（更不用说缺少括号）：

```
if count > 8; 
```

改成：

```
if (count > 8)
{
    istringstream buffer(line);
    int x, y; 
    if (buffer >> x >> y) // Correction here also.
    {
        Station objName = {x, y};
        data_station.push_back(objName);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:33:31.130

首先，您需要使用赋值而不是测试相等性：

```
count = count + 1;
//    ^ here 
```

但是，这可以更简洁地写成：

```
count++; 
```

另外，请注意`if`语句的语法需要在条件周围加上括号。要将许多语句组合在一起作为 的一部分`if`，请引入一个带有`{`and的块`}`：

```
if (condition) {
  block of statements
} 
```

所以你的代码应该是这样的：

```
if (count > 8) {
  istringstream buffer(line);
  int x, y; 
  if (!(buffer >> x >> y)) {
    Station objName = {x, y};
    data_station.push_back(objName);
  }
} 
```

看起来你的内在`if`条件也倒退了。您希望在提取成功时执行块：

```
if (buffer >> x >> y) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:32:04.747

改变这个`count == count +1;`：`count = count +1;`

更好的是`count++;`

# jira - Jira Greenhopper Rapid Board 客户端更新活动

> ID：15807433
> 
> 赞同：0
> 
> 时间：2013-04-04T09:30:15.167
> 
> 标签：jira, jira-plugin, jira-agile

我创建了一个 javascript 解决方案来在快速板上显示故事点。
见评论：[https](https://jira.atlassian.com/browse/GHS-6755) ://jira.atlassian.com/browse/GHS-6755 。

我想在快速板动态加载或更新时处理它的问题。当 Greenhopper 完成快速板更新时，是否可以接收事件（javascript）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-04T07:58:56.803

找到了：

```
jQuery().ready(function() {
    AJS.$(GH).bind('workModeUIReady', function() {
         // your code here
    });
}); 
```

# arrays - 连接两个数组的元素并在perl中创建一个结果数组

> ID：15807435
> 
> 赞同：3
> 
> 时间：2013-04-04T09:30:16.553
> 
> 标签：arrays, perl

如果我有两个如下数组，基本上我需要什么：

```
my @a=("a","b","c");
my @z=("x","y","z"); 
```

我希望结果数组是：

```
("a x","b y","c z") 
```

前提条件是两个数组中的元素的数量总是相同的。post条件是顺序应该与原始数组顺序相同。我写了一个简单的循环

```
my $i;
for($i=0;$i<scalar(@a);$i++)
{
push(@result,$a[$i]." ".$z[$i]);
} 
```

以上工作。但是有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T09:33:35.173

您可以使用`map`，这是一个变相的循环：

```
my @result = map "$a[$_] $z[$_]", 0 .. $#a; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T09:45:49.523

受到[这个问题](https://stackoverflow.com/questions/822563/how-can-i-iterate-over-multiple-lists-at-the-same-time-in-perl)的答案的启发。您可以使用`each_array`from`List::MoreUtils`使一次迭代两个数组更简洁。

```
#!/usr/bin/perl
use warnings;
use strict;

use List::MoreUtils qw/each_array/;

my @a = qw/a b c/;
my @b = qw/x y z/;
my $it = each_array(@a, @b);

my @result;

while (my ($x, $y) = $it->()) {
        push @result, $x . " " . $y;
} 
```

# mysql - mysql LIKE 运算符与条件不匹配

> ID：15807437
> 
> 赞同：1
> 
> 时间：2013-04-04T09:30:19.560
> 
> 标签：mysql, sql, sql-like

我正在使用查询，例如

```
SELECT * FROM tablename WHERE token LIKE 'v_%' 
```

这导致记录的标记以`v_`（这正是我想要的）开头，但它也显示以仅开头的记录`v`（附上截图）

![在此处输入图像描述](https://i.stack.imgur.com/4rN61.png)

为什么会这样？我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T09:32:13.810

你需要，`_`因为它是一个通配符

```
SELECT * FROM tablename WHERE token LIKE 'v\_%' 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d197d/1)

或者

```
SELECT * FROM tablename WHERE token LIKE 'v|_%' ESCAPE '|'; 
```

*   [MySQL LIKE](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html)

# c# - 从给定的“基础”对象创建通用类列表

> ID：15807438
> 
> 赞同：1
> 
> 时间：2013-04-04T09:30:22.817
> 
> 标签：c#, oop, generics, polymorphism

我有以下课程（非常简化的版本）：

```
public interface A { }
public abstract class A<TType, TContentType> : A where TType: A
{
    public abstract void Initialise();
    public abstract TType DeepCopy();
    public TContentType Value { get; private set; }
}

public class B : A<B, double>
{
    public override void Initialise() { this.Value = 3.0; }

    public override B DeepCopy() { return new B(); }
}

public class C : A<C, char>
{
    public override void Initialise() { this.Value = 'v'; }

    public override C DeepCopy() { return new C(); }
} 
```

我可以创建一个 A 类型列表，如下所示：

```
public static List<A> CreateList()
{
    List<A> myList = new List<A>();
    myList.Add(new B());
    myList.Add(new C());
    return myList;
} 
```

我想创建一个方法，给定类型 A 的单个对象，它将根据指定的长度创建这些对象的列表。

例如：

```
public static List<A> CreateList(A baseA, int length)
{
    List<A> myList = new List<A>();
    for (int i = 0; i < length; i++)
    {
       // create a deep copy of baseA
       // call the Initialise method on the new object
       // add to the list
    }
    return myList;
} 
```

我不确定如何在不知道 A 类型的情况下创建深层副本，因为 A 不包含任何内容.. 我需要为此创建一个通用方法吗？

非常感谢任何指针

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:51:25.570

您使事情变得相当复杂，首先您不需要将泛型参数所属的对象的类型指定为泛型参数 ( `TType`)，因为我们已经拥有该信息。

这是一个解决方案。它有`interface` `IA`一个`IA Clone()`方法。然后我们可以调用该方法并将其安全地转换为`T`in `CreateList()`。`CreateList`需要有一个你想要的类型的泛型参数，因为//`A`的泛型参数可以是任何东西。`B``C`

```
public static List<T> CreateList<T>(T baseA, int length) where T : IA
{
    var myList = new List<T>();
    for (int i = 0; i < length; i++)
    {
        myList.Add((T)baseA.Clone());
    }
    return myList;
}

public interface IA
{
    public abstract IA Clone();
}

public abstract class A<TContentType> : IA
{
    public abstract void Initialise();
    public TContentType Value { get; private set; }
}

public class B : A<double>
{
    public override IA Clone()
    {
        var b = new B();
        // transfer properties
        return b;
    }

    //public override void Initialise() { this.Value = 3.0; }
}

public class C : A<char>
{

    public override IA Clone()
    {
        var c = new C();
        // transfer properties
        return c;
    }

    //public override void Initialise() { this.Value = 'v'; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:57:55.293

只是建议如何使您的方法起作用：如果您的参数类型将是*A*，那么显然*A*接口必须具有*DeepCopy()*和*Initialise()*方法。为了让您拥有返回特定类型对象的*DeepCopy()*方法，您可以使用显式接口实现

```
public interface A
{
    void Initialise();
    A DeepCopy();
}

public abstract class A<TType, TContentType> : A where TType : A
{
    public abstract void Initialise();
    public abstract TType DeepCopy();
    A A.DeepCopy() { return this.DeepCopy(); }
    public TContentType Value { get; protected set; }
}

public class B : A<B, double>
{
    public override void Initialise() { this.Value = 3.0; }
    public override B DeepCopy() { return new B(); }
}

public class C : A<C, char>
{
    public override void Initialise() { this.Value = 'v'; }
    public override C DeepCopy() { return new C(); }
}

class Program
{
    static void Main(string[] args)
    {
        List<A> listBC = CreateList();
        List<A> list = CreateList(new B(), 3);
    }

    public static List<A> CreateList()
    {
        List<A> myList = new List<A>();
        myList.Add(new B());
        myList.Add(new C());
        return myList;
    }

    public static List<A> CreateList(A baseA, int length)
    {
        List<A> myList = new List<A>(length);

        for (int i = 0; i < length; i++)
        {
            A copy = baseA.DeepCopy();
            copy.Initialise();
            myList.Add(copy);
        }

        return myList;
    }
} 
```

我不知道您的真实代码，但`DeepCopy() { return new B(); }`必须复制一些成员值对吗？并且在使用副本填充列表时 - 您真的需要初始化它们还是保留深层副本？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:39:16.773

没有内置方法可以创建正确的深层副本。需要深度复制的类型应该实现 IClonable。

您可以从中继承您的 A 接口，然后在 CreateList 中调用 Clone()，将其返回值转换为所需的类型。

```
public interface A: IClonable { 
    Initialize();
}

public static List<A> CreateList(A baseA, int length)
{
    List<A> myList = new List<A>();
    for (int i = 0; i < length; i++)
    {
       var copy = (A) baseA.Clone();
       copy.initialize();
       myList.Add(copy);
    }
    return myList;
} 
```

缺点是 Clone 返回对象，而不是您继承的类型。但这是框架本身中广泛使用的方法。

# html - 这些白线从何而来？

> ID：15807449
> 
> 赞同：0
> 
> 时间：2013-04-04T09:30:43.553
> 
> 标签：html, css

看看这个链接：[LINK](http://dharman.eu/box/)

正如你所看到的，它是一个由每个大小为 20x20(px) 的红色 div 组成的矩阵。它们之间应该没有空格，但行之间有白线。我认为这是因为我使用了`display:inilne-block;`. 有没有其他方法可以做到这一点？为什么他们首先出现在那里？

```
.red {
    background: none repeat scroll 0 0 red;
    border: 0 none;
    display: inline-block;
    height: 20px;
    line-height: 0;
    margin: 0;
    outline: 0 none;
    padding: 0;
    width: 20px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:50:30.847

使用`float`会起作用，因为声明它也会静默地将显示属性设置为`block`（参见下图来自 Chrome 检查器：

![铬检查员](https://i.stack.imgur.com/wBIhL.png)

您看到的差距是因为您正在使用`inline-block`. 这是（我相信）为诸如“p”和“q”之类的字母的后裔保留的空间。关键是`vertical-align`属性，默认情况下设置为`baseline`。如果您将其设置为其他值（`top`, `bottom`），则间隙将被删除（请参阅[this fiddle](http://jsfiddle.net/cherryflavourpez/tLnsw/)）。

因此，`float`如果这适合您的目的，请使用它，但如果您需要 的其他好处`inline-block`，则将其与声明的垂直对齐一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:24:32.720

试试这个：

```
background: none repeat scroll 0 0 #F00;
border: 0 none;
display: block;
height: 20px;
line-height: 0;
margin: 0;
outline: 0 none;
padding: 0;
width: 20px;
float: left; 
```

更改显示属性。阻挡并漂浮到左边！

# css - 有没有办法确定某个选择器的 css 规则范围

> ID：15807451
> 
> 赞同：0
> 
> 时间：2013-04-04T09:30:45.367
> 
> 标签：css

我目前正在写下所有的 CSS 选择器，但这看起来有点难看。

```
.selector1 .selector2 .item1 {
    ...
}

.selector1 .selector2 .item2 {
    ...
}

.selector1 .selector2 .item3 {
    ...
} 
```

做这样的事情不是更好吗：

```
.selector1 .selector2 {

    .item1 {
       ...
    }

    .item2 {
        ...
    }

    .item3 {
        ...
    }
} 
```

我知道样式标签中的作用域属性，但对我来说这是另一种内联方式。有谁知道这种范围界定是否可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:33:21.453

使用萨斯！他们实现了它:) [http://sass-lang.com/](http://sass-lang.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:38:38.010

CSS 不支持这种语法，但有两种流行的 CSS 预编译器：[LESS](http://lesscss.org/)和[SASS](http://sass-lang.com/)。除了编译器之外，几乎没有任何区别。SASS 使用基于 Ruby 的编译器，LESS 使用 JavaScript 编译器，在我看来这更容易处理，因为我不是在开发 Ruby，而是在开发 JavaScript。

此外，您可以像这样在 HTML 代码中直接嵌入您的 less 文件

```
<link rel="stylesheet/less" type="text/css" href="styles.less" />
<script src="less.js" type="text/javascript"></script> 
```

当然，您需要可以从 LESS 网站下载的 JavaScript 编译器。并且应该在启动网站之前将 LESS 文件编译成普通的 CSS。

您应该查看[有关嵌套的 LESS 文档](http://lesscss.org/#-nested-rules)。

# java - 使用应该能够访问所述 TreeMap 的 Comparator 实例化 TreeMap

> ID：15807453
> 
> 赞同：1
> 
> 时间：2013-04-04T09:30:50.483
> 
> 标签：java, sorting, map, comparator, treemap

我正在尝试实例化一个`TreeMap`using a `Comparator`，它应该能够访问 said `TreeMap`，即*它将*用于的那个（我猜“ *will* ”肯定是问题所在......）：

```
final Map<String, Integer> map = new TreeMap<String, Integer>(new Comparator<String>() {

    @Override
    public int compare(String o1, String o2) {
        Integer i = map.get(o1);
        // Error: "the local variable map may not have been initialized"
        return ...;
    }

}); 
```

我可以理解为什么会发生此错误，因为在实例化 时`Comparator<String>`，`map`变量尚未初始化，但是有任何解决方法吗？

解决方案本来是 implementation 中的[方法](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java/util/TreeMap.java.html)[，](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java/util/TreeMap.java.html)`setComparator`但它的字段已被声明为 final：[`TreeMap`](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java/util/TreeMap.java.html)`comparator`

```
final Map<String, Integer> map = new TreeMap<String, Integer>();
Comparator<String> comparator = new Comparator<String>() {

    @Override
    public int compare(String o1, String o2) {
        Integer i = map.get(o1);
        return ...;
    }

};
// map.setComparator(comparator); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:46:38.897

你不能在你的类上实现 Comparator 并传递`this`给 TreeMap 构造函数，例如：

```
class MyClass implements Comparator<MyClass> {
private String property;
@Override // java.util.Comparator.compare
public int compare(MyClass o1,
            MyClass o2) {
return o1.getProperty().compare(o2.getProperty());
}
@Override // java.util.Comparator.equals
public boolean equals(Object o) {
    return this.getProperty().equals(o.getProperty());
}

public String getProperty() {
    return this.property;
}

public void setProperty(String myPropertyValue) {
    property = myPropertyValue;
}

TreeMap <String, MyClass> myMap = null;

public MyClass() {
  myMap = new TreeMap<String, MyClass>(this);
} 
```

如果您需要进一步的帮助，请发表评论，提供有关您的具体案例的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T16:08:14.740

两个月后，在重新查看[了@hd1 给我的答案（](https://stackoverflow.com/a/15807812/1225328)*实际上*并不能正常工作）之后，这是一个可能的解决方案：

```
public class SortedByValueMap<K, V extends Comparable<V>> implements Comparator<K> {

    private final Map<K, V> map = new TreeMap<K, V>();

    private class CustomTreeMap<KK extends K, VV extends V> extends TreeMap<KK, VV> {

        private static final long serialVersionUID = 9196929305071517886L;

        private CustomTreeMap(Comparator<KK> c) {
            super(c);
        }

        @Override
        public VV put(KK key, VV value) {
            map.put(key, value);
            return super.put(key, value);
        };

        @Override
        public VV remove(Object key) {
            map.remove(key);
            return super.remove(key);
        }

    }

    @Override
    public int compare(K o1, K o2) {
        return map.get(o1).compareTo(map.get(o2));
    }

    public Map<K, V> getMap() {
        return new CustomTreeMap<K, V>(this);
    }

} 
```

然后：

```
Map<String, Integer> map = new SortedByValueMap<String, Integer>().getMap();
map.put("r", 2);
map.put("b", 0);
map.put("a", 1);
System.out.println(map); // prints {b=0, a=1, r=2} 
```

但无论如何，它必须被视为一个技术挑战解决方案，而不是一个真正有效的工具（因为创建了两个相同的平行地图），所以要谨慎使用它......`;)`

# batch-file - SET server=%~1 在 Windows 批处理文件中是什么意思？

> ID：15807456
> 
> 赞同：0
> 
> 时间：2013-04-04T09:30:57.637
> 
> 标签：batch-file

您能否解释一下bat文件中的含义：

```
SET server=%~1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:40:09.453

将环境变量的值设置`server`为第一个命令行参数，`"`去掉引号。

# javascript - 是否可以调用设备日历以使用电话间隙添加事件？

> ID：15807460
> 
> 赞同：0
> 
> 时间：2013-04-04T09:31:02.313
> 
> 标签：javascript, html, cordova

过去两天我一直在寻找这个，通过 phoneGap 概念，我需要获取设备日历来添加事件或提醒。它应该可以通过 Phone Gap 在所有设备上运行。但我无法正确找到解决方案。请通过正确的链接指导我或向我推荐一些步骤示例。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T17:08:36.393

我不确定 android 但在 ios 上，您可以通过创建 type="date" 的输入字段来访问本机日期选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:02:13.627

您需要为 Phonegap 使用 CalendarPlugin。[https://github.com/phonegap/phonegap-plugins](https://github.com/phonegap/phonegap-plugins)中提供了插件列表

# ejb - 来自 Play 应用程序的 EJB 查找

> ID：15807464
> 
> 赞同：1
> 
> 时间：2013-04-04T09:31:05.923
> 
> 标签：ejb, playframework-2.0, glassfish-3, jndi

我有一个 Play 应用程序（我使用的是 Play 2.1.0），我想从中调用在 GlassFish 服务器上运行的 EJB。因此，我尝试在 Play 应用程序中添加 gf-client.jar 作为依赖项，并以与在独立应用程序中相同的方式获取对 EJB 的引用：

```
Hashtable<String, String> properties = new Hashtable<String, String>();
properties.put("java.naming.factory.initial", "com.sun.enterprise.naming.impl.SerialInitContextFactory");
properties.put("java.naming.factory.url.pkgs", "com.sun.enterprise.naming");
properties.put("java.naming.factory.state", "com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl");
properties.put("org.omg.CORBA.ORBInitialHost", "localhost");
properties.put("org.omg.CORBA.ORBInitialPort", "3700");
properties.put("java.naming.provider.url", "iiop://localhost:3700");
Context ctx = new InitialContext(properties);
ctx.lookup("java:global/MyApplication/MyEJB/MyBean"); 
```

但是，执行查找时出现以下异常：

```
play.api.Application$$anon$1: Execution exception[[RuntimeException: javax.naming.NotContextException: global is not a subcontext]]
        at play.api.Application$class.handleError(Application.scala:289) ~[play_2.10.jar:2.1.0]
        at play.api.DefaultApplication.handleError(Application.scala:383) [play_2.10.jar:2.1.0]
        at play.core.server.netty.PlayDefaultUpstreamHandler$$anon$2$$anonfun$handle$1.apply(PlayDefaultUpstreamHandler.scala:132) [play_2.10.jar:2.1.0]
        at play.core.server.netty.PlayDefaultUpstreamHandler$$anon$2$$anonfun$handle$1.apply(PlayDefaultUpstreamHandler.scala:128) [play_2.10.jar:2.1.0]
        at play.api.libs.concurrent.PlayPromise$$anonfun$extend1$1.apply(Promise.scala:113) [play_2.10.jar:2.1.0]
        at play.api.libs.concurrent.PlayPromise$$anonfun$extend1$1.apply(Promise.scala:113) [play_2.10.jar:2.1.0]
java.lang.RuntimeException: javax.naming.NotContextException: global is not a subcontext
        at play.libs.F$Promise$6.apply(F.java:401) ~[play_2.10.jar:2.1.0]
        at scala.concurrent.Future$$anonfun$map$1.liftedTree2$1(Future.scala:253) ~[scala-library.jar:na]
        at scala.concurrent.Future$$anonfun$map$1.apply(Future.scala:249) ~[scala-library.jar:na]
        at scala.concurrent.Future$$anonfun$map$1.apply(Future.scala:249) ~[scala-library.jar:na]
        at scala.concurrent.impl.CallbackRunnable.run(Promise.scala:29) ~[scala-library.jar:na]
        at akka.dispatch.BatchingExecutor$Batch$$anonfun$run$1.liftedTree1$1(BatchingExecutor.scala:67) ~[akka-actor_2.10.jar:na]
Caused by: javax.naming.NotContextException: global is not a subcontext
        at tyrex.naming.EnvContext.internalLookup(Unknown Source) ~[tyrex.jar:1.0.1  November 11 2003 1703]
        at tyrex.naming.EnvContext.lookup(Unknown Source) ~[tyrex.jar:1.0.1  November 11 2003 1703]
        at tyrex.naming.java.JavaContext.lookup(Unknown Source) ~[tyrex.jar:1.0.1  November 11 2003 1703]
        at javax.naming.InitialContext.lookup(InitialContext.java:411) ~[na:1.7.0_10]
        at controllers.Application.index(Application.java:36) ~[na:na]
        at Routes$$anonfun$routes$1$$anonfun$applyOrElse$1$$anonfun$apply$1.apply(routes_routing.scala:77) ~[na:na] 
```

具有相同 gf-client.jar 依赖项的完全相同的代码在独立应用程序中运行良好。我实际得到的是 NotContextException 并且在异常堆栈跟踪中我看到以下行

```
at tyrex.naming.EnvContext.lookup(Unknown Source) 
```

让我相信由于某种原因，我得到的 InitialContext 不是“正确的”，因为如果我指定一个不存在的 JNDI 名称，我在独立应用程序中得到的堆栈跟踪有点不同：

```
Exception in thread "main" javax.naming.NamingException: Lookup failed for 'java:global/Test/MyBean' in SerialContext[myEnv={org.omg.CORBA.ORBInitialPort=3700, java.naming.factory.initial=com.sun.enterprise.naming.SerialInitContextFactory, org.omg.CORBA.ORBInitialHost=localhost, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NameNotFoundException: Test]
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
    at javax.naming.InitialContext.lookup(InitialContext.java:411)
    at com.eurodyn.testmavenjavaapp.App.main(App.java:24)
Caused by: javax.naming.NameNotFoundException: Test
    at com.sun.enterprise.naming.impl.TransientContext.resolveContext(TransientContext.java:310)
    at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:218)
    at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:219)
    at com.sun.enterprise.naming.impl.SerialContextProviderImpl.lookup(SerialContextProviderImpl.java:77)
    at com.sun.enterprise.naming.impl.RemoteSerialContextProviderImpl.lookup(RemoteSerialContextProviderImpl.java:109)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.corba.ee.impl.presentation.rmi.ReflectiveTie.dispatchToMethod(ReflectiveTie.java:144)
    at com.sun.corba.ee.impl.presentation.rmi.ReflectiveTie._invoke(ReflectiveTie.java:174)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatchToServant(CorbaServerRequestDispatcherImpl.java:528)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatch(CorbaServerRequestDispatcherImpl.java:199)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequestRequest(CorbaMessageMediatorImpl.java:1624)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:1486)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleInput(CorbaMessageMediatorImpl.java:990)
    at com.sun.corba.ee.impl.protocol.giopmsgheaders.RequestMessage_1_2.callback(RequestMessage_1_2.java:214)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:742)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.dispatch(CorbaMessageMediatorImpl.java:539)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.doWork(CorbaMessageMediatorImpl.java:2324)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.performWork(ThreadPoolImpl.java:497)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.run(ThreadPoolImpl.java:540) 
```

我究竟做错了什么？是否有其他方法可以从 Play 应用程序执行 JNDI 查找？我从[这个 Stackoverflow 答案](https://stackoverflow.com/questions/8819137/java-ee-architecture-with-play-framework/8822210#answer-8822210)中了解到，这是可以做到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T13:30:48.470

我通过将 gf-client-module 添加到 project/Build.scala 中的依赖项而不是尝试直接链接 jar 来为我解决了这个问题（Play 2.1.3 和 Glassfish 3.1.2.2）：

```
"org.glassfish.main.appclient.client" % "gf-client-module" % "3.1.2.2" 
```

在解决依赖关系时，它错过了我可以在这里找到的模块 org.eclipse.persistence#javax.persistence;2.0.4.v201112200901：

```
 resolvers += "opencastproject" at "http://repository.opencastproject.org/nexus/content/groups/public/" 
```

为了确定要查找的名称，我检查了该上下文中可用的名称：

```
InitialContext ic = getInitialContext();
System.out.println(ic.getEnvironment());
NamingEnumeration<NameClassPair> childList = ic.list("");
while (childList.hasMore()) {
NameClassPair ncPair = (NameClassPair) childList.next();
    if (ncPair.getName().contains("Job") == false) {
        System.out.println(ncPair.getName() + " (type " + ncPair.getClassName() + ")");
    }
} 
```

我使用的名称与那里列出的名称完全相同。

问候

# c++ - 如何在 Xcode 中选择正确的目的地？

> ID：15807466
> 
> 赞同：1
> 
> 时间：2013-04-04T09:31:09.867
> 
> 标签：c++, xcode

我正在尝试运行在 [http://www.stanford.edu/class/cs106b/上找到的“空白项目”](http://www.stanford.edu/class/cs106b/)

它应该将 StanfordCPPLib 添加到 Xcode（我使用的是 4.6），我也猜测是 Stanford 模板。

收到错误消息：（Xcode 无法使用所选目标运行 - 选择具有受支持架构的目标以便在此系统上运行）

我一直在尝试不同的架构，但都给了我同样的错误。

有什么想法让我无法正常工作吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:40:30.670

在 Mac 上运行 C++：

```
« Open Xcode.
« Xcode-> File -> New ->Project
« Select Command line tool. See image for more clear information.
« Just edit your code in main.cpp then Run. 
```

![在此处输入图像描述](https://i.stack.imgur.com/vUcFG.png)

# security - 从 Access 97 mdb 文件中删除用户级安全性

> ID：15807468
> 
> 赞同：1
> 
> 时间：2013-04-04T09:31:16.563
> 
> 标签：security, ms-access

我有一个使用用户级安全性的访问文件，我没有 mdw 或不知道登录详细信息。我需要提取所有数据，当我打开这个文档时，我只能看到表格。如何提取所有表中的所有数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:34:50.880

据我所知，你没有很多选择：

*   `.mdw`您可以通过创建新数据库并使用与原始用户完全相同的用户名和 PID来重建文件，然后将新`.mdw`数据库与旧数据库一起使用。
    您可以使用[Serge Gavrilov 的一些工具](http://accesstools.narod.ru/)来帮助您从数据库中查找用户名和 PID。

*   [查看UtterAccess.com](http://www.utteraccess.com/)上的论坛。似乎有很多关于*lost mdw*的讨论。

*   您可以使用[EverythingAccess](http://www.everythingaccess.com/accessdatabaserepair.htm)等一些数据修复服务。花费一些钱，但我相信他们可以恢复您的数据。

# sql-server - 存储搜索参数

> ID：15807469
> 
> 赞同：1
> 
> 时间：2013-04-04T09:31:16.970
> 
> 标签：sql-server, xml, asp.net-mvc, entity-framework, search

我目前正在.NET MVC 4 中构建一个网站，使用实体框架来访问 SQL Server。

网站应该有一个复杂的搜索，为用户提供多种选择，创建一个新的搜索（免费搜索），从最后 5 个搜索中选择（历史搜索），从存储的搜索参数中选择。

我遇到的问题是保存搜索参数/sql 字符串的概念，因为它不是基于会话/缓存的，应该存储在某个地方（SQL Server / MongoDB / XML）我很难获得最多优化路径，如果是 SQL 方式，则可以创建一个实体，将搜索参数存储为实体，然后将其转换为 SQL 字符串以进行搜索，或者将其存储在 XML 中，然后使用 JSON 对其进行序列化。

搜索的某些字段不是精确的数据库/实体匹配，需要求和/转换（例如将计算到特定时间的小时数）。

我更倾向于为此目的发挥 Entity Framework 的最佳能力。

如果可能，想听听专家的意见，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T00:52:45.480

不确定这是否是“最优化”的路径，但认为实现起来似乎很简单：

```
//POCO class of item you want to search from database
public class SearchableItem
{
    public string Name { get; set; }
    public int Age { get; set; }
}

//MVC View Model for search page
public class SearchParamaters
{
    public int? MinAge { get; set; }
    public int? MaxAge { get; set; }
}

//Storable version for database
public class SavedSearchParameters : SearchParamters
{
    public int SavedSearchParametersId { get; set; }
}

//Use SearchParameters from MVC, or SavedSearchParamaters from EF
public IQueryable<SearchableItem> DoSearch(SearchParamaters sp)
{
    IQueryable<SearchableItem> query = db.SearchableItems;

    if (sp.MinAge.HasValue) query = query.Where(x => x.Age >= sp.MinAge.Value);
    if (sp.MaxAge.HasValue) query = query.Where(x => x.Age <= sp.MaxAge.Value);

    return query;
} 
```

您还可以将`SearchParameters`类序列化为 XML/JSON 并将其保存在任何位置，然后将其反序列化并照常将其传递给`DoSearch`方法，这样您就不必每次想要添加搜索参数时都更改数据库架构

* * *

**编辑：使用序列化的完整示例**

\域\Person.cs

```
namespace YourApp.Domain
{
    public class Person
    {
        public string Name { get; set; }
        public int Age { get; set; }
    }
} 
```

\域\SavedPersonSearch.cs

```
namespace YourApp.Domain
{
    //Entity object with serialized PersonSearchParameters
    public class SavedPersonSearch
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Parameters { get; set; }
    }
} 
```

\Models\PersonSearchParameters.cs

```
namespace YourApp.Models
{
    //MVC View Model for search page
    public class PersonSearchParameters
    {
        public int? MinAge { get; set; }
        public int? MaxAge { get; set; }
    }
} 
```

\Helpers\SearchProvider.cs

```
using YourApp.Domain;
using YourApp.Models;

namespace YourApp.Helpers
{
    public class SearchProvider
    {
        private YourAppDbContext _context;

        public SearchProvider(YourAppDbContext context)
        {
            //This example uses the DbContext directly
            //but you could use a Unit of Work, repository, or whatever
            //design pattern you've decided on
            _context = context;
        }

        public IQueryable<Person> SearchPersons(int savedPersonSearchId)
        {
            var savedSearch = _context.SavedPersonSearches.Find(savedPersonSearchId);

            //deserialize (example assumes Newtonsoft.Json)
            var searchParams = JsonConvert.Deserialize<PersonSearchParameters>(savedSearch.Parameters);

            return SearchPersons(searchParams);
        }

        public IQueryable<Person> SearchPersons(PersonSearchParameters sp)
        {
            IQueryable<Person> query = _context.Persons;

            if (sp.MinAge.HasValue) query = query.Where(x => x.Age >= sp.MinAge.Value);
            if (sp.MaxAge.HasValue) query = query.Where(x => x.Age <= sp.MaxAge.Value);

            return query;
        }

        public void SavePersonSearch(PersonSearchParameters sp, string name)
        {
            var savedSearch = new SavedPersonSearch { Name = name };
            savedSearch.Parameters = JsonConvert.Serialize(sp);

            _context.SavedPersonSearches.Add(savedSearch);
            _context.SaveChanges();
        }
    }
} 
```

\控制器\PersonController.cs

```
namespace YourApp.Controllers
{
    public class PersonsController : Controller
    {
        private SearchProvider _provider;
        private YourAppDbContext _context;

        public PersonsController()
        {
            _context = new YourAppDbContext();
            _provider = new SearchProvider(_context);
        }

        //Manual search using form
        // GET: /Persons/Search?minAge=25&maxAge=30
        public ActionResult Search(PersonSearchParameters sp)
        {
            var results = _provider.SearchPersons(sp);
            return View("SearchResults", results);
        }

        //Saved search
        // GET: /Persons/SavedSearch/1
        public ActionResult SavedSearch(int id)
        {
            var results = _provider.SearchPersons(id);
            return View("SearchResults", results);
        }

        [HttpPost]
        public ActionResult SaveMySearch(PersonSearchParameters sp, name)
        {
            _provider.SavePersonSearch(sp, name);

            //Show success
            return View();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T06:22:53.340

将您的参数转换为 Base64 字符串。它将帮助您创建任何硬查询，例如[http://www.jobs24.co.uk/SearchResults.aspx?query=djAuMXxQUzoxMHx2MC4x¶ms=cXVlcnlmaWx0ZXI6](http://www.jobs24.co.uk/SearchResults.aspx?query=djAuMXxQUzoxMHx2MC4x&params=cXVlcnlmaWx0ZXI6)解码 base64 使用此服务[http://www.opinionatedgeek.com/DotNet/ Tools/Base64Decode/default.aspx](http://www.opinionatedgeek.com/DotNet/Tools/Base64Decode/default.aspx) 您也可以查看[http://aws.amazon.com/cloudsearch/](http://aws.amazon.com/cloudsearch/)它可能会让您了解项目中的参数 worh

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T01:45:57.443

像这样的东西可以工作：

将搜索参数存储在 json/xml 中并保存在 DB 表中。1\. 当您想要编辑搜索参数时（如果您允许这样做），使用 json/xml 预填充所选参数，以便用户可以编辑条件。2\. 当用户想要运行搜索时，从 json 中获取参数并创建/运行查询。

或者

将搜索参数存储在 json/xml 中并保存在 DB 表中，并创建 sql 查询并存储 sql 字符串（在验证参数之后） 1\. 当您想要编辑搜索参数时（如果您允许这样做），请使用 json /xml 预填充选定的参数，以便用户可以编辑标准。2\. 当用户想要运行搜索时，只需获取保存的查询字符串并执行它。

# javascript - 防止使用 angular.js 提交多个表单 - 禁用表单按钮

> ID：15807471
> 
> 赞同：13
> 
> 时间：2013-04-04T09:31:19.313
> 
> 标签：javascript, angularjs, form-submit, angularjs-directive

我想防止使用 angular.js 提交多个表单。这个问题与这个[问题有关](https://stackoverflow.com/questions/15671335/prevent-multiple-form-submissions-in-django)。

当用户单击表单提交按钮时，提交按钮的值/标签应更改为“正在加载..”，按钮的状态将设置为禁用，并且应以正常方式触发提交事件，从而导致向服务器提交调用。这样用户会看到以下效果：

1.  立即：提交按钮值更改为“正在加载..”并被禁用

2.  一旦服务器响应：用户得到服务器请求的结果（而服务器响应是在没有角度干预的情况下处理的）

我创建了这个[plunk](http://plnkr.co/edit/H8b5a8XzOCwgU0nvoEHy)来说明我的意思。我的问题与这一行有关：`elm.attr('disabled',true);`. 这不仅会禁用按钮，还会阻止传播提交事件。因此，我得到一个禁用的按钮（期望的结果），但没有提交表单（不期望的结果）。

如果您评论/取消评论这一行，您可以看到变化的行为：`elm.attr('disabled',true);`

知道如何改变这个吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-11-07T00:12:53.753

我有一个标准表单，只在前端使用角度，所以如果你只需要防止在服务器响应时点击两次按钮，那么你可以使用这个简单的指令，它是可重用的，不需要控制器或 ngModel .

[http://plnkr.co/edit/2aZWQSLS8s6EhO5rKnRh?p=preview](http://plnkr.co/edit/2aZWQSLS8s6EhO5rKnRh?p=preview)

```
app.directive('clickOnce', function($timeout) {
    return {
        restrict: 'A',
        link: function(scope, element, attrs) {
            var replacementText = attrs.clickOnce;

            element.bind('click', function() {
                $timeout(function() {
                    if (replacementText) {
                        element.html(replacementText);
                    }
                    element.attr('disabled', true);
                }, 0);
            });
        }
    };
}); 
```

它将禁用按钮并可选择更改按钮的文本。像这样使用：

```
<button click-once>Button just disables</button>
<button click-once="Loading...">Text changes and button disables</button> 
```

在其当前形式中，这仅在您进行标准表单提交而不是 ajax 提交时才有效。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-07-13T21:29:35.290

只需在控制器中添加一个新属性

```
$scope.processing = false; 
```

在你的方法中

```
$scope.processData = function(){
    $scope.processing = true;
    $http.post('').then(function(){
        $scope.processing = false;
    });
}); 
```

在您的 html 中将 ng-disabled 属性绑定到 $scope.processing 属性，以在方法处理时禁用按钮并显示文本。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-04T09:45:27.677

尝试 $timeout（angularjs 函数）

```
$timeout(function(){
    elm.attr('disabled',true);
}, 0) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-07-13T20:11:24.497

替代（灵活和简单）解决方案（[灵感](https://stackoverflow.com/a/23697291/3005203)）：围绕提交代码设置范围变量的包装函数。见[活的例子](http://plnkr.co/edit/xNDMB9)。

在控制器中的用法：

```
$scope.submit = mutexAction($scope, 'sending', submit); 
```

鉴于：

```
<form ng-submit="submit()">
  ...
  <button ng-disabled="sending">
    {{sending ? "Sending..." : "Send"}}
  </button>
</form> 
```

功能（将其放入服务中）：

```
function mutexAction(scope, semaphoreName, action) {
  return function() {
    if (scope[semaphoreName]) {
      // not queuing action, forget it!
      return;
    }
    scope[semaphoreName] = true;
    action()['finally'](function () {
      scope[semaphoreName] = false;
    });
  };
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-02T12:05:32.793

除了[spedhil](https://stackoverflow.com/users/158897/spenthil)答案之外，咖啡脚本中的一个变体 + 如果需要，您可以启用一个返回按钮（例如，当表单验证失败并且您想重试时）

```
class ClickOnceDirective

    constructor: (@$timeout) ->
        link = (scope, element, attrs) =>

            originalText = element.html()
            replacementText = attrs.clickOnce

            element.bind('click', =>
                @$timeout ->

                    if (replacementText)
                        element.html(replacementText)

                    element.attr('disabled', true)

                    # enable back
                    @$timeout ->
                         element.attr('disabled', false)
                        if (replacementText)
                             element.html(originalText)
                    , 500

                , 0)

         return {
         link
         restrict: 'A'
        }

directivesModule.directive 'clickOnce', ['$timeout', ClickOnceDirective] 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-01-07T12:52:28.233

最简单和最常见的方法是依赖`$submitted`表单对象的属性，如下所示：

```
<form name="formName" ng-submit="submit()">
  ...
  <button type="submit" ng-disabled="formName.$submitted">Submit</button>
</form> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-06-24T17:45:24.063

我最终也选择了指令路线。以下用于代替 ng-click 并期望传入的函数返回一个承诺（restangular 会这样做）。当承诺被解决（响应被返回） - 它将允许后续提交。也可以调整它以添加/删除 ng-disabled。

```
// copied from ngClick and modified to provide single click only behavior
// expects function to return promise
app.directive('srMutexClick', function ($parse) {
  return {
    compile: function ($element, attr) {
      var fn = $parse(attr['srMutexClick']);
      return function srEventHandler(scope, element) {
        var submitting = false;
        element.on('click', function (event) {
          scope.$apply(function () {
            if (submitting) {
              return
            }
            submitting = true;
            // `submitting` is reset when promise is resolved
            fn(scope, {$event: event}).finally(function() { submitting = false });
          });
        });
      };
    }
  };
}); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-12-22T17:46:57.390

这是通过简单的逻辑检查来做类似事情的简单方法，文本更改也可以以类似的方式完成。

```
<button type="submit" class="btn btn-success btn-lg btn-block"  ng-disabled="!userForm.$valid || isValid">Submit!</button>

 $scope.isValid = false;
    $scope.submitForm = function () {
        $scope.isValid = true;
        console.log('submit');
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-29T15:58:29.000

这是使用 $http 拦截器对所有 AJAX 请求执行此操作的通用方法。如果您的所有 REST 路由都从 /api/ 开始，那么：

```
 angular.module('yourapp').factory('loadingInterceptor',['$q','$rootScope',function($q,$rootScope) {
         var apiRe = /^\/api\//;
    return {
        request: function(config) {
            if (config.url.match(apiRe)) {
                $rootScope.loading = true;
            }
            config.headers = config.headers || {};

            return config;
        },
        response: function(res) {
            $rootScope.loading = false;
            return $q.resolve(res);
        },

        'responseError': function(rejection) {
            $rootScope.loading = false;
            return $q.reject(rejection);
        }
    };
}]);

angular.module('yourapp').config(['$httpProvider', function($httpProvider) {
    $httpProvider.interceptors.push('loadingInterceptor');
}]); 
```

使用拦截器，您不必将 $scope.isLoading 放在每个控制器中。缺点是任何带有 ng-disabled="loading" 的按钮都会在请求期间被阻止。

# c# - 从代码中引用 app/web.config 配置的 WCF 服务

> ID：15807472
> 
> 赞同：1
> 
> 时间：2013-04-04T09:31:21.090
> 
> 标签：c#, wcf

假设我的*web.config*包含以下服务定义：

```
<system.serviceModel>
    <services>
      <service name="Services.Redirector">
        <endpoint address="/_api"
                  binding="webHttpBinding"
                  contract="AutoHostedPickerTestWeb.Services.IRedirector"
                  behaviorConfiguration="webHttpBehavior"/>
      </service>
    </services>
</system.serviceModel> 
```

有没有办法从我的代码中引用服务主机（甚至端点）？就像是：

```
protected void Page_Load(object sender, EventArgs e)
{
     ServiceHost host = WCFStaticMagic.GetHostByName("Services.Redirector");
     //....
} 
```

我想要这个用于**调试目的**- 我意识到这对于生产代码来说可能是不好的做法。我正在尝试创建一个 HTTP 重定向，并且我想确保端点的绝对地址是我认为的（如您所见，我给了它一个相对地址）。由于权限问题，我无法在代码中创建服务。

# serial-port - Arduino MEGA ADK：从 USB 读取数据（非串行）

> ID：15807478
> 
> 赞同：1
> 
> 时间：2013-04-04T09:31:30.407
> 
> 标签：serial-port, usb, arduino

[从 USB 设备TelosB Mote](http://www.willow.co.uk/TelosB_Datasheet.pdf)读取一些数据的方法是什么？

它发送 12 octest 的数据包，我要做的就是读取其中的两个。我希望能够设置传输速度和数据缓冲区——我猜。

该板具有一个集成的 USB 设备端口。我已经阅读了有关 USB [shield](http://www.arduino.cc/en/Main/ArduinoShields) 2 库的信息，但我发现它有助于将它与 Android 手机连接。

我该如何解决这个问题？

# java-ee-6 - 从 Java EE 5 迁移到 6 的教程

> ID：15807489
> 
> 赞同：0
> 
> 时间：2013-04-04T09:32:01.473
> 
> 标签：java-ee-6, java-ee-5

我正在寻找一个快速教程来向我介绍 Java EE 6 的新特性。我了解 JavaEE 5 servlet 和 JSP 等的基础知识（不是我必须添加的专家。只是基础知识）。所以我不想从头开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:44:00.957

[这](http://alexander.holbreich.org/2011/01/javaee5-vs-javaee6/)是一篇博客文章，您可以在其中找到差异，然后明确搜索新功能。

# java - gson 错误：com.google.gson.JsonSyntaxException：java.lang.IllegalStateException：预期 BEGIN_OBJECT 但在第 1 行第 166 列是字符串

> ID：15807490
> 
> 赞同：1
> 
> 时间：2013-04-04T09:32:01.797
> 
> 标签：java, json, gson

我有以下课程`SolrFBLocationDoc`：

```
public class SolrFBLocationDoc{

    @Field
    private String name;
    @Field
    private String id;
    @Field
    private Location location = new Location();

    //and some more class members
} 
```

其中，`Location`是来自 restfb: 的一个类`com.restfb.types.Location`。

我正在尝试将 a 转换`solrDocument`为类的对象，`SolrFBLocationDoc`如下所示：

```
SolrFBLocationDoc doc = gson.fromJson(gson.toJson(solrDoc), SolrFBLocationDoc.class); 
```

其中，`solrDoc`是：

```
SolrDocument[{id=106377336067638, location=Location[city=null country=null latitude=null longitude=null state=null street=null zip=null]}] 
```

并`gson.toJson(solrDoc)`返回，

```
{"id":"106377336067638","location":"Location[city\u003dnull country\u003dnull latitude\u003dnull longitude\u003dnull state\u003dnull street\u003dnull zip\u003dnull]"} 
```

但是，这会导致错误：

```
com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 166 
```

我可以看到问题是由于将`Location`类对象转换为 String by而发生的`gson.toJson(solrDoc)`。

然后不使用`gson.toJson(solrDoc)`，如何转换`SolrDocument`为`SolrFBLocationDoc`？

我怎样才能摆脱这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T12:31:23.347

在您的`SolrFBLocationDoc`课程中，`location`ivar 是一种类型`com.restfb.types.Location`，但在您的 JSON 字符串中：

```
"location":"Location[city\u003dnull country\u003dnull latitude\u003dnull longitude\u003dnull state\u003dnull street\u003dnull zip\u003dnull]" 
```

表示这`location`是一个字符串。由于`SolrFBLocationDoc`定义，实际上，在分号之后，Gson 需要一个“{”（即 a `BEGIN_OBJECT`）。但它发现`"Location..`, 那是一个字符串，所以它不会解析。

正确的字符串就像：

```
{"id":"106377336067638","location":{"city":null, "country":null, "latitude":null, "longitude":null, "state":null, "street":null, "zip":null}} 
```

所以这意味着`gson.toJson(solrDoc)`返回一个转义字符串作为`location`键。这可能取决于如何`SolrDocument`定义。可能在那个类`location`字段中是一个字符串。如果您可以定义`SolrDocument`，则可以改进此答案并确认/拒绝假设。

# powershell - 向 AD 对象添加和删除扩展属性

> ID：15807496
> 
> 赞同：17
> 
> 时间：2013-04-04T09:32:13.590
> 
> 标签：powershell, active-directory

我正在使用 powershell 来修改一些 AD 扩展属性。

这是我添加扩展属性的代码

```
Set-ADUser -Identity "anyUser" -Add @{extensionAttribute4="myString"} 
```

它有效，但我怎样才能删除相同的扩展属性？我找不到类似的东西`-remove`。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-04T09:57:22.283

您可以尝试使用`-Clear`参数

例子：`-Clear Attribute1LDAPDisplayName, Attribute2LDAPDisplayName`

[http://technet.microsoft.com/en-us/library/ee617215.aspx](http://technet.microsoft.com/en-us/library/ee617215.aspx)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-05-16T21:57:26.327

我今天使用了以下 - 它有效！

将值添加到 extensionAttribute

```
 $ThisUser = Get-ADUser -Identity $User -Properties extensionAttribute1
    Set-ADUser –Identity $ThisUser -add @{"extensionattribute1"="MyString"} 
```

从 extensionAttribute 中删除一个值

```
 $ThisUser = Get-ADUser -Identity $User -Properties extensionAttribute1
  Set-ADUser –Identity $ThisUser -Clear "extensionattribute1" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-27T12:17:10.827

我一直在努力修改我们域中的扩展属性。然后我编写了一个 powershell 脚本并创建了一个带有 GUI 的编辑器来设置和删除帐户中的 extAttributes。

如果你喜欢，你可以看看它[http://toolbocks.de/viewtopic.php?f=3&t=4](http://toolbocks.de/viewtopic.php?f=3&t=4)

对不起，文本中的描述是德文的。GUI 本身是英文的。

我在我们的域中定期使用此脚本，它从未删除任何内容或造成任何其他伤害。我不保证此脚本在您的域中按预期工作。但正如我提供的源代码，您可以（并且应该）在运行它之前查看它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T09:56:15.833

扩展属性由 Exchange 添加。根据[这篇 Technet 文章](http://technet.microsoft.com/en-us/library/ee423541%28v=exchg.150%29.aspx)，这样的东西应该可以工作：

```
Set-Mailbox -Identity "anyUser" -ExtensionCustomAttribute4 @{Remove="myString"} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T12:53:23.887

或 -Remove 参数

```
Set-ADUser -Identity anyUser -Remove @{extensionAttribute4="myString"} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-21T17:20:35.413

要清除该值，您始终可以将其重置为 $Null。例如：

`Set-Mailbox -Identity "username" -CustomAttribute1 $Null`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-12T21:44:18.427

```
Set-ADUser -Identity anyUser -Replace @{extensionAttribute4="myString"} 
```

这也很有用

# prolog - Prolog - 功能术语与谓词

> ID：15807506
> 
> 赞同：4
> 
> 时间：2013-04-04T09:32:46.880
> 
> 标签：prolog

prolog 中的**功能术语**与**谓词**有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T04:24:23.353

如果我没记错的话：

功能术语是一种类似于 pred_name(...)的*术语。**解析器*处理术语，其中还包括常量和变量。

谓词不是事物的名称，而是事物本身；或真或假的东西。函数式术语用于定义和调用谓词。

因此，严格来说，术语不会成功或失败，您也无法解析谓词。这很像数字和数字之间的区别。

# list - 在 JSP 中列出和链接文件夹的内容不起作用

> ID：15807510
> 
> 赞同：2
> 
> 时间：2013-04-04T09:32:57.883
> 
> 标签：list, jsp, hyperlink, download

我必须制作一个用于从文件夹下载文件的 Web 应用程序。我使用 Tomcat 作为服务器。我编写了一个 JSP 页面来列出我的数据文件夹的内容，并尝试为该文件夹中的每个文件创建链接。

JSP 页面是这样的：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1" import="java.io.File,java.io.IOException,java.util.*,java.io.*" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
Contents <br>
<% File f = new File("C:\\Users\\name\\Desktop\\eclipse\\app\\PTW\\WebContent\\data\\"); // current directory

File[] files = f.listFiles();
 for (File file : files) { 
    if (file.isDirectory()) {  
        //System.out.print("directory:");
    } else {
        %>
        <a href="<%=file.getAbsolutePath()%>" target="_blank"><br> <%=file.getName() %>
         </a>

    <%  
    } 
} 

 %>

</body>
</html> 
```

问题是下载这些文件只能在 IE 中工作，并且只有当用户选择 Right CLick - Save target As 时。

所以我这样做的方式是错误的！但我不明白为什么？**如何强制从此 JSP 下载文件？**

**谢谢你！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:54:44.240

您必须知道**文件系统**上文件的路径与**URL**不同。文件系统只有您的服务器知道，URL 是浏览器访问的路径。

假设您的文件在其中，`/opt/tomcat/webapps/myApp/folder/file.jpg`并且您正在运行 Tomcat `www.example.com`。如果您（通过 JSP）生成一个链接，例如

```
<a href="/opt/tomcat/webapps/myApp/folder/file.jpg">Download File</a> 
```

您的浏览器会将此路径视为：

```
www.example.com/opt/tomcat/webapps/myApp/folder/file.jpg 
```

您的浏览器将找不到该文件。浏览器需要找到它的 URL 是：

```
www.example.com/myApp/folder/file.jpg 
```

其中包括

*   域`www.example.com`
*   servlet 上下文`myApp`
*   应用程序内部文件的路径`folder/file.jpg`

因此，您需要`/myApp/folder/file.jpg`在 JSP 中构建路径。你可以这样做：

```
<a href="${pageContext.request.contextPath}/folder/file.jpg">Download</a> 
```

我在这里使用[表达式语言](http://en.wikipedia.org/wiki/Unified_Expression_Language)而不是 scriptlet。这被认为是更好的风格，因为它提高了可维护性和可读性。

注意：这仅在您的文件位于 webapplication 目录 ( `myApp`) 中时才有效。如果它在外面，您将需要一个 servlet 将您的文件流式传输到客户端，但那是另一回事了。

# excel - 仅粘贴特定范围

> ID：15807512
> 
> 赞同：1
> 
> 时间：2013-04-04T09:33:05.107
> 
> 标签：excel, copy-paste, vba

感谢您在这里所做的所有努力，我已经逆向工程并开发了一个代码，但我在一件小事上遇到了困难。从 WS2 复制时我想要做的是粘贴，因为我不想导出`AD:AR`导致工作簿崩溃的列中包含的所有公式。

```
Sub Copyandpaste()
    Dim LastRow As Long
    Dim ws1 As Worksheet, ws2 As Worksheet

    Set ws1 = ActiveWorkbook.Sheets("RAW DATA")
    Set ws2 = ActiveWorkbook.Sheets("DATA INPUT")

    LastRow = ws1.UsedRange.Rows.Count

    With ws2
        .Range("A2:AR2" & .Cells(Rows.Count, "G").End(xlUp).Row).Copy Destination:=ws1.Range("A" & LastRow + 1)
        For Each WS In ThisWorkbook.Worksheets
            For Each PT In WS.PivotTables
                PT.RefreshTable
            Next PT
        Next WS
    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:38:35.800

这是你正在尝试的吗？

```
Sub Copyandpaste()
    Dim ws1LRow As Long, ws2LRow As Long
    Dim ws1 As Worksheet, ws2 As Worksheet

    Set ws1 = ThisWorkbook.Sheets("RAW DATA")
    Set ws2 = ThisWorkbook.Sheets("DATA INPUT")

    With ws1
        ws1LRow = .Cells.Find(What:="*", _
                    After:=.Range("A1"), _
                    Lookat:=xlPart, _
                    LookIn:=xlFormulas, _
                    SearchOrder:=xlByRows, _
                    SearchDirection:=xlPrevious, _
                    MatchCase:=False).Row + 1
    End With

    With ws2
        ws2LRow = .Range("G" & .Rows.Count).End(xlUp).Row

        .Range("A2:AR" & ws2LRow).Copy

        ws1.Range("A" & ws1LRow).PasteSpecial xlPasteValues

'        For Each WS In ThisWorkbook.Worksheets
'            For Each PT In WS.PivotTables
'                PT.RefreshTable
'            Next PT
'        Next WS
    End With
End Sub 
```

# php - MySQL / PHP：捕获两次之间的所有条目并检查另外两次

> ID：15807516
> 
> 赞同：1
> 
> 时间：2013-04-04T09:33:08.737
> 
> 标签：php, mysql, select, time, match

我有一个数据库，人们可以在其中两个特定时间内预订房间，但可能有其他人在同一时间搜索可用房间 - 或部分在同一时间。

数据库如下所示：

```
order | room | user | date (date-format) | from (time) | to (time)
1       123    foo    2013-04-04           12:00:00       17:00:00 
```

当另一个用户在 f.ex 13:00 到 18:00 期间搜索房间是否可用时，问题就出现了，因为我只设法搜索房间是否在完全相同的时间可用。

查询必须在特定日期和时间搜索特定房间。如果房间很忙，或者某些时间很忙，我想抓住这个并向用户说房间很忙。

有小费吗？如果通过 PHP 更容易管理我也会很高兴:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:16:37.513

为什么不使用这样的 SQL 来解决它（未经测试）：

```
SELECT *
FROM booked
WHERE
    room=$room AND
    date=$date AND
    (
        (
            /*
            The reservation starts in the requested period
            */    
            from <= $start_time AND
            to > $start_time
        ) OR (
            /*
            The reservation ends in the requested period
            */
            from < $end_time AND
            to >= $end_time
        )
    ); 
```

此查询将返回和之间的所有预订`$start_time`，`$end_time`并允许预订背靠背。如果您不想让预订背靠背更改`<`and`>`到`<=`and `=>`。

**重要提示**：确保不要只使用字符串插值并插入未转义的用户提供的输入，因为这会使您的应用程序容易受到 SQL 注入攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:44:01.013

@Delphinator 对答案的改进

```
SELECT *
FROM booked
WHERE
    room=$room AND
    date=$date AND
    (
       TIME("$start_time") BETWEEN from and to 
       OR
       TIME("$end_time") BETWEEN from and to
    ); 
```

`BETWEEN`完全按照您的想法进行。

# jquery - 一定秒数后自动关闭模态框

> ID：15807519
> 
> 赞同：0
> 
> 时间：2013-04-04T09:33:18.857
> 
> 标签：jquery, joomla, popup, modal-dialog

嘿伙计们，我在这里搜索过，但找不到关于此的答案。

我有一个 Joomla 网站，并希望在页面加载时使用模式框在网站中间显示横幅。到目前为止一切顺利，我使用了我在这里找到的这个脚本：[http](http://www.thesimplexdesign.com/2011/03/update-for-subscription-pop-up.html) ://www.thesimplexdesign.com/2011/03/update-for-subscription-pop-up.html ，一切都像一个魅力。

我的问题是当我添加我自己的自动关闭模式框的代码时。此代码有效，但用户无法自行关闭模式。您能否指导我如何操作以使其正常工作（可以自动关闭，但也可以由用户关闭）？

我的代码是带有注释的代码**//fade out after delay**

代码：

```
var popupStatus = 0;
var $j = jQuery.noConflict();
//this code will load popup with jQuery magic!
function loadPopup(){
    //loads popup only if it is disabled
    if(popupStatus==0){
        $j("#backgroundPopup").css({
            "opacity": "0.7"
        });
        $j("#backgroundPopup").fadeIn("slow");
        $j("#popupContact").fadeIn("slow");
        popupStatus = 1;
    }
}

//This code will disable popup when click on x!
function disablePopup(){
    //disables popup only if it is enabled
    if(popupStatus==1){
        $j("#backgroundPopup").fadeOut("slow");
        $j("#popupContact").fadeOut("slow");
        popupStatus = 0;
    }
}   
//this code will center popup
function centerPopup(){
    //request data for centering
    var windowWidth = document.documentElement.clientWidth;
    var windowHeight = document.documentElement.clientHeight;
    var popupHeight = $j("#popupContact").height();
    var popupWidth = $j("#popupContact").width();
    //centering
    $j("#popupContact").css({
        "position": "absolute",
        "top": windowHeight/2-popupHeight/2,
        "left": windowWidth/2-popupWidth/2
    });
    //only need force for IE6   
    $j("#backgroundPopup").css({
        "height": windowHeight
    });

}
//CONTROLLING EVENTS IN jQuery
$j(document).ready(function(){
    if ($j.cookie("anewsletter") != 1) {   
        //centering with css
        centerPopup();
        //load popup
        loadPopup();
        $j.cookie("anewsletter", "1", { expires: 1 });
    }
    //CLOSING POPUP
    //Click the x event!
    $j("#popupContactClose").click(function(){
        disablePopup();
    });
    //Click out event!
    $j("#backgroundPopup").click(function(){
        disablePopup();
    });
    //Press Escape event!
    $j(document).keypress(function(e){
        if(e.keyCode==27 && popupStatus==1){
            disablePopup();
        }
    });
    //fade out after delay
    $j("#backgroundPopup").delay(15000).fadeOut("slow");
    $j("#popupContact").delay(15000).fadeOut("slow");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:44:22.783

这里是：

尝试使用`setTimeout()`而不是`delay()`

# git - 为什么 git log --cherry-pick 不删除等效提交？

> ID：15807522
> 
> 赞同：23
> 
> 时间：2013-04-04T09:33:21.407
> 
> 标签：git, git-log, cherry-pick, git-cherry-pick

我一直在尝试使用

```
git log --no-merges --cherry-pick --right-only master...my-branch 
```

生成在 my-branch 中但不在 master 中的提交列表（根据 git-log 文档）。但是，列表中仍然有许多等效的提交。如果我展示它们和它们的补丁，除了提交 ID 之外没有任何区别。

```
git show 16cbd0e47406a4f7acbd6dc13f02d74d0b6a7621 >patcha
git show c53c7c32dcd84bfa7096a50b27738458e84536d5 >patchb

diff patcha patchb
1c1
< commit 16cbd0e47406a4f7acbd6dc13f02d74d0b6a7621
---
> commit c53c7c32dcd84bfa7096a50b27738458e84536d5 
```

甚至`git patch-id`显示它们是等价的：

```
git show c53c7c32dcd84bfa7096a50b27738458e84536d5 | git patch-id
2b5504fb9a8622b4326195d88c7a20f29701e62b c53c7c32dcd84bfa7096a50b27738458e84536d5
git show 16cbd0e47406a4f7acbd6dc13f02d74d0b6a7621 | git patch-id
2b5504fb9a8622b4326195d88c7a20f29701e62b 16cbd0e47406a4f7acbd6dc13f02d74d0b6a7621 
```

如何不`git log --cherry-pick`将这些作为重复项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T09:44:31.110

自从挑选樱桃后，您是否将 master 合并到您的分支中？ `--cherry-pick`首先通过匹配提交 ID 来工作，然后如果失败，则查找补丁 ID。如果您已将 master 合并到您的分支中，那么您现在将在您的分支上拥有实际提交和樱桃挑选的版本。所以它会找到提交 id，然后继续报告精选版本。

我经常想知道 git 是否应该始终检查两者，但这可能会对性能造成相当大的影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-26T07:20:38.417

> 我经常想知道 git 是否应该始终检查两者，但这可能会对性能造成相当大的影响。

这种行为现在（Git 2.11，2016 年第四季度）比以前更快。

请参阅[Jeff King (](https://github.com/peff) [)的提交](https://github.com/peff)[7c81040](https://github.com/git/git/commit/7c8104079239bb52380e32a11a686665fc16d040) （ 2016 年 9 月 12 日）和[提交 5a29cbc](https://github.com/git/git/commit/5a29cbc6e9c5f7d28228f4f389a122ca074a9c08)（2016 年 9 月 9 日） 。 帮助者：[Johannes Schindelin (](https://github.com/dscho) [)](https://github.com/dscho)。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 f0a84de](https://github.com/git/git/commit/f0a84de2770361d21115f6768b2c4746519dbf62))^(中，2016 年 9 月 21 日）)[`peff`](https://github.com/peff)
[`dscho`](https://github.com/dscho)
^([`gitster`](https://github.com/gitster))

> ## `patch-ids`: 拒绝计算`patch-id`合并提交

> " `git log --cherry-pick`" 用于将合并提交包含为与其他提交匹配的候选，从而浪费了大量时间。补丁 ID 生成逻辑已更新为忽略合并以避免浪费。

> [...] 我们可能会花费大量额外的时间来计算这些合并差异。
> 在启发这个补丁的案例中，“ `git format-patch --cherry-pick`”从超过 3 分钟下降到不到 3 秒。

* * *

而[在 Git 2.31 (Q1 2021)](https://stackoverflow.com/a/65946225/6309)中，它已得到修复：当具有相同补丁 ID 的多个提交出现在一侧时，“ [`git log --cherry-pick A...B`](https://github.com/git/git/blob/b69bed22c59fa08848bd7ffa5fbfacc0b62fcd48/Documentation/rev-list-options.txt#L231)” ^(( [man](https://git-scm.com/docs/git-log#Documentation/git-log.txt---cherry-pick) ))现在会在另一侧出现具有相同补丁 ID 的提交时将它们全部排除边。

# mysql - MySQL 在使用 WHERE 子句时显示所有列

> ID：15807525
> 
> 赞同：0
> 
> 时间：2013-04-04T09:33:27.547
> 
> 标签：mysql, where-clause

抱歉，如果这是一个愚蠢的问题，但最近没有使用太多 SQL，也找不到太多帮助。

即使结果为 0 或 null，我也需要让所有行显示在结果中。我遇到的问题是由于 WHERE 子句（没有 WHERE，所有行都显示但数据不显示）。

```
SELECT SUM(c.amount) AS 'total_income', p.ref_id AS 'property'
FROM property p
LEFT JOIN contract c
ON p.id = c.property_ref_id
LEFT JOIN contract_payment cp
ON c.id = cp.contract_id   
WHERE cp.paid = 1 AND year(cp.date_paid) = :year
GROUP BY p.id 
```

显示没有 Where 和 Bad Data 的结果集将是这样的

```
array
  0 => 
    array
      'total_income' => null
      'property' => string 'test/0001' (length=9)
  1 => 
    array
      'total_income' => null
      'property' => string 'test/0002' (length=9)
  2 => 
    array
      'total_income' => string '200' (length=3)
      'property' => string 'test/0003' (length=9)
  3 => 
    array
      'total_income' => string '16100' (length=5)
      'property' => string 'test/0004' (length=9) 
```

虽然这是带有 WHERE 子句和良好数据但不是所有行的结果集

```
array
  0 => 
    array
      'total_income' => string '4200' (length=4)
      'property' => string 'test/0004' (length=9) 
```

有人可以告诉我可以对 SQL 进行哪些修改以检索我想要的数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:40:23.373

问题是您要过滤掉`cp`表中所有不匹配的行，因为`cp.paid`当那里没有匹配时不能为 1。

将 WHERE 子句更改为：

```
WHERE cp.contract_id IS NULL OR (cp.paid = 1 AND year(cp.date_paid) = :year) 
```

或者将该条件移动到 LEFT JOIN 的 ON 子句中，使用 cp：

```
ON c.id = cp.contract_id AND cp.paid = 1 AND year(cp.date_paid) = :year 
```

# hibernate - JSF/Primefaces SelectedOneRadio：值为空

> ID：15807531
> 
> 赞同：0
> 
> 时间：2013-04-04T09:33:37.653
> 
> 标签：hibernate, jsf, jakarta-ee, jsf-2, primefaces

我有一个扩展标准 SelectOneRadio 的 Primefaces 的 SelectOneRadio。我的问题是，当我选择要下载或不保存或丢失的选项时。我附上代码。为什么会这样？谢谢

这是我的 Bean 供下载：

```
@ManagedBean
@RequestScoped
public class DownloadFile {

private StreamedContent file;
@ManagedProperty(value = "#{selecter.selectedRadio}")
private Files selectedRadio;

//all getters/setters methods
....
....

public DownloadFile() throws IOException {          
    FacesContext facesContext = FacesContext.getCurrentInstance();
    ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
    HttpServletResponse response = (HttpServletResponse) externalContext.getResponse();
    response.reset(); // Some JSF component library or some Filter might have set some headers in the buffer beforehand. We want to get rid of them, else it may collide.
    response.setContentType("application/xml"); // Check http://www.w3schools.com/media/media_mimeref.asp for all types. Use if necessary ServletContext#getMimeType() for auto-detection based on filename.
    response.setHeader("Content-disposition", "attachment; filename=\"immagine.jpg\""); 

    BufferedInputStream input = null;
    BufferedOutputStream output = null;

    try {
        //Qui va sostituita la risorsa con pathname+/selectedRadio (pathname la otterremo da una query)
        System.out.println("Prova::" + selectedRadio);
        //String s= selectedRadio.getPathname()+"/"+selectedRadio.getNome();
        input = new BufferedInputStream(externalContext.getResourceAsStream("/downloaded_optimus.jpg"));
        output = new BufferedOutputStream(response.getOutputStream());

        byte[] buffer = new byte[10240];
        for (int length; (length = input.read(buffer)) > 0;) {
            output.write(buffer, 0, length);
        }
    } catch(Exception e) {
        output.close();
        input.close();
    }

    facesContext.responseComplete(); // Important! Else JSF will attempt to render the response which obviously will fail since it's already written with a file and closed.
    }
} 
```

这是我的选择器 bean：

```
@ManagedBean
@SessionScoped
public class Selecter {
@ManagedProperty(value = "#{sessionHandler.db}")
private Session db;
private List<Files> res= new ArrayList<Files>();
private Files selectedRadio;
//all getters/setters methods ....

 @PostConstruct
 public void init(){
     db.beginTransaction();
     ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
     Map<String, Object> sessionMap = externalContext.getSessionMap();
     Query query = db.createQuery( "from Utenti where username= :name" );
     query.setParameter("name", (String)(sessionMap.get("username")));
     List<Utenti>user= query.list();

     for(Utenti a : user){
        Iterator<Files> it = a.getFileses().iterator();
        while (it.hasNext()){
            res.add( it.next());
        }
     }
     db.getTransaction().commit();
 } 
```

}

这是我的文件 .xhtml

```
h2>Seleziona dall'elenco il file che vuoi scaricare</h2>
<h:form enctype="multipart/form-data">

<p:outputPanel id="customPanel">  
    <p:selectOneRadio id = "radioID" value="#{selecter.selectedRadio}" layout="pageDirection" >
       <f:selectItems value="#{selecter.res}" var="item" itemLabel="#{item.nome}"  itemValue="#{item}" />
    </p:selectOneRadio>

    <p:dialog modal="true" widgetVar="statusDialog" header="Status" draggable="false" closable="false" resizable="false">  
        <p:graphicImage value="/design/ajax_loading_bar.gif" />  
    </p:dialog>  
    <br></br>       
    <br></br>

    <p:commandButton id="downloadLink" value="Download" ajax="false" immediate="true"
    icon="ui-icon-arrowthichk-s">  
        <p:fileDownload value="#{downloadFile.file}" />  
    </p:commandButton>  

</p:outputPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:39:29.233

命令组件上的`immediate="true"`属性将仅处理*也*具有此属性集的输入组件。您的单选按钮输入组件没有它，因此在处理表单提交期间被忽略。

此外，如果在更新模型值阶段之前（即在JSF 设置之前）*创建*`#{downloadFile}`和实例化托管 bean，则此构造将失败。*`#{selecter.selectedRadio}`*

 *代替

```
@ManagedProperty(value = "#{selecter.selectedRadio}")
private Files selectedRadio; 
```

经过

```
@ManagedProperty(value = "#{selecter}")
private Selecter selecter; 
```

并改为访问`selectedRadio`操作方法中的。*

# c# - Windows Store 应用程序有 Deep Zoom 的替代品吗？

> ID：15807534
> 
> 赞同：5
> 
> 时间：2013-04-04T09:33:54.127
> 
> 标签：c#, windows-store-apps, deepzoom, multiscaleimage

我必须处理大量图像（高分辨率），最好的方法是使用 Deep Zoom，但它不适用于 Windows Store 应用程序。

[http://msdn.microsoft.com/en-us/library/cc645050(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc645050(v=vs.95).aspx)

是否存在替代方案？如果没有，创建类似于 Deep Zoom 的自定义控件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:33:12.860

你已经用 C# 标记了它；那是您使用的语言吗？我了解 Windows 商店应用程序也可以使用 HTML5。如果您可以使用，那么您可以使用 OpenSeadragon，它是 Deep Zoom 的 JavaScript 版本：http: [//openseadragon.github.com](http://openseadragon.github.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:14:26.133

这是[WPF 的 Deep Zoom](http://www.codeproject.com/Articles/128695/Deep-Zoom-for-WPF)，您可以在它的帮助下创建自己的。WinRT XAML Toolkit 计划发布 MultiScaleImage 控件以支持深度缩放。他们也在关注那篇文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T15:37:01.760

我找到了这个项目：

[http://xamlmapcontrol.codeplex.com/](http://xamlmapcontrol.codeplex.com/)

它类似于 Bing 地图，但您可以选择自己的来源。我目前正在分析它是如何工作的。

我希望它可以帮助这里的一些人！

# ruby-on-rails-3 - 无法将 bin/wkhtmltopdf_linux_386 的“\x90”从 ASCII-8BIT 转换为 UTF-8，跳过

> ID：15807535
> 
> 赞同：2
> 
> 时间：2013-04-04T09:33:54.800
> 
> 标签：ruby-on-rails-3

9.3 和 rails 3.2.13 在我的应用程序中创建 PDF 所以我安装 **gem install wkhtmltopdf**和**gem install wkhtmltopdf-binary -v '0.9.9.1'**但我收到以下消息如何解决这个问题

**宝石安装 wkhtmltopdf**

成功安装 wkhtmltopdf-0.1.2 1 个 gem 安装 wkhtmltopdf-0.1.2 的 ri 文档...

```
unable to convert "\x90" from ASCII-8BIT to UTF-8 for bin/wkhtmltopdf_linux_386, skipping
unable to convert "\xCE" from ASCII-8BIT to UTF-8 for bin/wkhtmltopdf_darwin_386, skipping
Installing RDoc documentation for wkhtmltopdf-0.1.2...
unable to convert "\x90" from ASCII-8BIT to UTF-8 for bin/wkhtmltopdf_linux_386, skipping
unable to convert "\xCE" from ASCII-8BIT to UTF-8 for bin/wkhtmltopdf_darwin_386, skipping 
```

**gem install wkhtmltopdf-binary -v '0.9.9.1'**

```
Fetching: wkhtmltopdf-binary-0.9.9.1.gem (100%)^[[1;2C
Successfully installed wkhtmltopdf-binary-0.9.9.1
1 gem installed
Installing ri documentation for wkhtmltopdf-binary-0.9.9.1...
unable to convert "\xA3" from ASCII-8BIT to UTF-8 for bin/wkhtmltopdf_linux_x64, skipping
unable to convert "\xC0" from ASCII-8BIT to UTF-8 for bin/wkhtmltopdf_linux_386, skipping
unable to convert "\xCE" from ASCII-8BIT to UTF-8 for bin/wkhtmltopdf_darwin_386, skipping
Installing RDoc documentation for wkhtmltopdf-binary-0.9.9.1...
unable to convert "\xA3" from ASCII-8BIT to UTF-8 for bin/wkhtmltopdf_linux_x64, skipping
unable to convert "\xC0" from ASCII-8BIT to UTF-8 for bin/wkhtmltopdf_linux_386, skipping
unable to convert "\xCE" from ASCII-8BIT to UTF-8 for bin/wkhtmltopdf_darwin_386, skipping 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:38:17.957

错误是在安装文档时。尝试

```
gem install wkhtmltopdf --no-document 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-29T22:54:22.500

这是文档问题。这样做：`gem update rdoc`在安装 gem 之前。它应该修复它。`--no-document`或者只是忽略带有密钥的文档安装

# ios - 在 UICollectionViewController 标头上添加 UISearchBar

> ID：15807536
> 
> 赞同：4
> 
> 时间：2013-04-04T09:33:57.160
> 
> 标签：ios, xcode, uitextfield, uisearchbar, uicollectionview

您好，我想在`UICollectionViewController`. 我从这里尝试了一些代码，但它对我不起作用。

到目前为止我所做的是：

1.  创建了一个`UICollectioViewController`
2.  然后选中标题的复选框
3.  将 a 添加`UITextfield`到标题行
4.  创建了一个`UICollectionViewReusablecell`，然后在那里声明了我的`UISearchBar`。

但我不知道如何从中获取值`UITextfield`并检查我的数组“所有详细信息”中的值并在表格视图中显示结果？

目前，`UICollectionViewCell`我正在使用此代码将文本输入`UITextField`：

```
[searchTextfield addTarget:self action:@selector(check:) forControlEvents:UIControlEventEditingChanged]; 
```

请检查下面的链接。我没看懂，也许你能帮助我

```
http://www.appcoda.com/supplementary-view-uicollectionview-flow-layout/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-20T07:21:09.263

请在下面的链接中找到 Github 中的示例代码。您可以使用这些链接下载 UICollectionView 并将其与 UISearchBar 集成。

[https://maniacdev.com/2015/01/example-how-to-integrate-uicollectionview-with-uisearchbar](https://maniacdev.com/2015/01/example-how-to-integrate-uicollectionview-with-uisearchbar)

[在 UICollectionView 中搜索和过滤单元格](https://stackoverflow.com/questions/24119738/searching-and-filtering-cells-in-a-uicollectionview)

# zabbix - Zapcat Zabbix 2.0

> ID：15807541
> 
> 赞同：0
> 
> 时间：2013-04-04T09:34:08.863
> 
> 标签：zabbix

在 zabbix 2.0 上配置 zapcat 时出现问题，请点击链接

[http://www.kjkoster.org/zapcat/Tomcat_How_To.html](http://www.kjkoster.org/zapcat/Tomcat_How_To.html)

然后我尝试使用 JMX 但运行时出现错误：

**java -Dcom.sun.management.jxmremote -Dcom.sun.management.jmxremote.port=12345 -Dcom.sun.management.jmxremote.authenticate=true -Dcom.sun.management.jmxremote.password.file=/usr/lib /jvm/java-6-openjdk-i386/jre/lib/management/jmxremote.password -Dcom.sun.management.jmxremote.access.file=/usr/lib/jvm/java-6-openjdk-i386/jre/ lib/management/jmxremote.access -Djava.rmi.server.hostname=192.168.2.56 -Dcom.sun.management.jmxremote.ssl=true**

错误是：

**错误：必须限制密码文件读取访问：/usr/lib/jvm/java-6-openjdk-i386/jre/lib/management/jmxremote.password**

那么对我有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T15:56:28.473

Zabbix 2.0 不需要 Zapcat。改为使用 Zabbix Java 网关查找： [https ://www.zabbix.com/documentation/2.0/manual/concepts/java](https://www.zabbix.com/documentation/2.0/manual/concepts/java)

但是对于这个错误。您需要将密码 conf 文件的限制设置为 chmod 600。

# gwt - GWT 验证 (JSR 303) SampleValidatorFactory

> ID：15807545
> 
> 赞同：1
> 
> 时间：2013-04-04T09:34:17.973
> 
> 标签：gwt, bean-validation

我尝试在 GWT 中使用 bean 验证。我遵循本指南： [https ://developers.google.com/web-toolkit/doc/latest/DevGuideValidation](https://developers.google.com/web-toolkit/doc/latest/DevGuideValidation)

在编译时，我有以下错误：

```
ERROR: Could not load deferred binding result type 'com.google.gwt.sample.validation.client.SampleValidatorFactory' 
```

如果我包含这个依赖项，我可以让它工作：

```
<dependency>
  <groupId>com.googlecode.gwt-validation</groupId>
  <artifactId>gwt-validation</artifactId>
  <version>2.1</version>
</dependency> 
```

但我觉得这很奇怪，因为指南中没有提到这种依赖关系。

**问题**：由于 GWT 2.5 应该支持 bean 验证，为什么我需要这个额外的库？我究竟做错了什么？

我正在使用 GWT 2.5.0

我的 pom.xml 包含以下依赖项：

```
<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-validator</artifactId>
  <version>4.3.1.Final</version>
  <type>jar</type>
  <classifier>sources</classifier>
</dependency>

<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-validator</artifactId>
  <version>4.3.1.Final</version>
  <type>jar</type>
</dependency>

<dependency>
  <groupId>javax.validation</groupId>
  <artifactId>validation-api</artifactId>
  <version>1.0.0.GA</version>
  <type>jar</type>
  <classifier>sources</classifier>
</dependency>

<dependency>
  <groupId>javax.validation</groupId>
  <artifactId>validation-api</artifactId>
  <version>1.0.0.GA</version>
  <type>jar</type>
</dependency> 
```

我的 gwt.xml 包含以下几行：

```
<inherits name="org.hibernate.validator.HibernateValidator" />
<replace-with
  class="com.google.gwt.sample.validation.client.SampleValidatorFactory">
  <when-type-is class="javax.validation.ValidatorFactory" />
</replace-with> 
```

在代码中，我以这种方式获取验证器：

```
import javax.validation.Validator;
...
private static final Validator VALIDATOR= Validation.buildDefaultValidatorFactory().getValidator(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:30:34.563

您正在将第三方库 gwt-validation 与 Native GWT Validation 混合使用。gwt-validation 不是来自官方 gwt 团队或谷歌。如果您打算坚持本机 gwt 验证支持，则不应在您的 pom 中使用以下内容。

```
<dependency>
  <groupId>com.googlecode.gwt-validation</groupId>
  <artifactId>gwt-validation</artifactId>
  <version>2.1</version>
</dependency> 
```

另请注意，您的本地 gwt hibernate 验证器仅支持 4.1.0。[GWT 示例](https://code.google.com/p/google-web-toolkit/source/browse/#svn/trunk/samples/validation)用法。GWT 原生休眠验证器[源代码](https://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/org/hibernate/validator)。

您可以将其包含为

```
<!-- Hibernate bean validation binary for the server -->

<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-validator</artifactId>
  <version>4.1.0.Final</version>
  <exclusions>
    <exclusion>
      <groupId>javax.xml.bind</groupId>
      <artifactId>jaxb-api</artifactId>
    </exclusion>
    <exclusion>
      <groupId>com.sun.xml.bind</groupId>
      <artifactId>jaxb-impl</artifactId>
    </exclusion>
  </exclusions>
</dependency>

<!-- Hibernate bean validation source for the GWT client -->

<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-validator</artifactId>
  <version>4.1.0.Final</version>
  <classifier>sources</classifier>
  <exclusions>
    <exclusion>
      <groupId>javax.xml.bind</groupId>
      <artifactId>jaxb-api</artifactId>
    </exclusion>
    <exclusion>
      <groupId>com.sun.xml.bind</groupId>
      <artifactId>jaxb-impl</artifactId>
    </exclusion>
  </exclusions>
</dependency>

<!-- Required by Hibernate validator because slf4j-log4j is
     optional in the hibernate-validator POM
 -->
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-log4j12</artifactId>
  <version>1.6.1</version>
</dependency>
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-api</artifactId>
  <version>1.6.1</version>
</dependency> 
```

# java - 从 JButton 打开 excel 工作表 - Java Swing

> ID：15807547
> 
> 赞同：0
> 
> 时间：2013-04-04T09:34:24.413
> 
> 标签：java, swing, excel

我正在使用swing设计一个表单。如果在我的表单中单击了报告按钮，它必须从我的D驱动器打开预定义格式的excel表。必须在按钮动作侦听器中编写什么代码？

谢谢 ..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T09:39:28.870

我建议查看 awt 中的 Desktop 类。[这里](http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html#open%28java.io.File%29)有一种方法可以帮助你。

```
import java.awt.Desktop;
import java.io.File;
import java.io.IOException;

public class OpenFile {

    public static void main(String[] args) {
        File file = new File("c:\\appNominalJournalFix.txt");
        try {
            Desktop.getDesktop().open(file);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:39:26.967

您可以使用 `Runtime`类中的默认程序打开excel`Windows`

```
String filePath = "D:\\test.xls";
Process p = 
  Runtime.getRuntime()
   .exec("rundll32 url.dll,FileProtocolHandler " + filePath); 
```

您也可以使用`Desktop`如下 API。

```
String filePath = "D:\\test.xls";
Desktop dt = Desktop.getDesktop();
dt.open(new File(filePath)); 
```

# report - Reporting Services 中具有子报表的子文件夹

> ID：15807553
> 
> 赞同：2
> 
> 时间：2013-04-04T09:34:33.367
> 
> 标签：report, reporting-services, subreport, subreports

好的，这是我的方案： 1 - A 类型 - 带有多个子报表（C 或 D 类型）的大报表 10 - B 类型 - 带有一个或两个子报表（C 或 D 类型）的报表 20 - C 类型 - 可能的子报表或可能没有子报告（D 类型） 4 - D-Type - 可能有 D-type 子报告的叶基报告

A 和 B 报表的子报表具有在子报表属性中指定的路径 Subreports/ C 和 D 没有指定额外的路径（只是子报表的名称）

在 ms rs 服务器路径 \Reports 上部署 A 和 B 报告 在 \Reports\SubReports 中部署 C 和 D

现在：部署后，将仅访问 A 和 B 类型的报告，并且在此配置中它们可以完美地工作。在开发模式下，我必须一起破解一些东西，这样我才能在这个项目中有一些秩序，所以我用 2 个项目制作了 1 个解决方案（一个用于 A 和 B 类型报告，另一个用于 C 和 D 类型报告）并将它们放在相同的文件夹，因此 BIN 文件夹对于两者都是相同的（部署和发布都在 bin 根文件夹中设置）现在项目 1（A 和 B）的 OutputFolder 是 BIN，项目 2（C 和 D）的输出文件夹是BIN\子报表。Project 2 中的所有内容在开发模式下都运行良好。

问题 在项目 1 中，我为 A 或 B 类型的报告设置了一个路径为 SubReports/ 的子​​报告，因为这是在 BIN 文件夹中存储子报告的位置。A 报告转到此文件夹并运行报告，只有报告在同一 SubReports/ 文件夹中有子报告，这让我出错。我认为这是因为 A 报告使用 A 报告（BIN 文件夹）的路径运行 C 报告（例如），所以 C 报告（在同一文件夹中查找它的子报告）现在正在 BIN 文件夹中查找它的子报告而不是 BIN\SubReports 文件夹。我该如何解决？

# html - 从混合 xml/html 中仅提取前缀元素的更简单方法

> ID：15807557
> 
> 赞同：1
> 
> 时间：2013-04-04T09:34:43.507
> 
> 标签：html, xml, xslt

这是我的工作噩梦：我们有一堆文件是 html 页面，但其中包含额外的 xml 元素（都以我们的公司名称“TLA”为前缀）为我现在正在重写的旧程序提供数据和结构。

示例表格：

```
<html >
<head>
    <title>Highly Simplified Example Form</title>
</head>
<body>
    <TLA:document>
        <TLA:contexts>
            <TLA:context id="id_1" value=""></TLA:context>
        </TLA:contexts>
        <TLA:page>
            <TLA:question id="q_id_1">
                <table>
                    <tr>
                        <td>
                            <input id="input_id_1" type="text" />
                        </td>
                    </tr>
                </table>
            </TLA:question>
        </TLA:page>
        <!-- Repeat many times -->
    </TLA:document>
</body>
</html> 
```

我的任务是编写一个预处理器，它将这样的文档拆分为两个文档：一个仅包含“TLA”元素的 xml 文件和一个仅包含 html 元素的 html 文件。

示例 XML：

```
<?xml version="1.0" encoding="utf-8" ?>
<TLA:document>
    <TLA:contexts>
      <TLA:context id="id_1" value=""></TLA:context>
    </TLA:contexts>
    <TLA:page>
      <TLA:question  id="q_id_1">
      </TLA:question>
    </TLA:page>
    <!-- Repeat many times -->
</TLA:document> 
```

示例 HTML：

```
<html >
<head>
    <title>Highly Simplified Example Form</title>
</head>
<body>
    <table>
        <tr>
            <td>
                <input id="input_id_1" type="text" />
            </td>
        </tr>
    </table>
    <!-- Repeat many times -->
</body>
</html> 
```

现在我可以通过一次处理每个元素并将它们复制到新文档来做到这一点，但我认为可能有一种更简单的方法可以通过使用一两次转换或一些巧妙的序列化来做到这一点，但我没有想法探索哪些途径。

那么有人对如何处理这个有建议吗？理想情况下 VB.net 但 C# 或其他东西也是可以接受的。

更新：

似乎 xslt 是做到这一点的方法，但我对此知之甚少，以至于我仍然需要一些帮助。似乎 //namespace::TLA 可能是提取数据元素的正确 xpath，但我不知道如何实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:15:15.203

XSLT 是解决这个问题的最佳选择。

*   要提取 HTML，请参阅[此问题](https://stackoverflow.com/questions/15827349/copy-only-html-from-mixed-xml-and-html)。
*   要提取名称空间，请参阅[此问题](https://stackoverflow.com/questions/15813724/copy-all-elements-of-a-namespace-and-nothing-else)。

# android - 谷歌地图片段无法膨胀

> ID：15807559
> 
> 赞同：2
> 
> 时间：2013-04-04T09:34:48.517
> 
> 标签：android, google-maps, fragment

我一直在向我的 Android 项目添加地图，当我的班级加载带有地图片段的 XML 文件时，它崩溃了，我正在关注本教程

（[https://developers.google.com/maps/documentation/android/start#the_google_maps_api_key](https://developers.google.com/maps/documentation/android/start#the_google_maps_api_key)）

我使用的是 Nexus 7 (Jellybean 4.1)，所以这应该不是问题，这是我的课：

```
package com.app.thetoolstore;

import android.app.Activity;
import android.os.Bundle;

public class Tool_map extends Activity{

 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map_activity);
    }

} 
```

这是我的 XML：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#001" >

<fragment xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/map"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:name="com.google.android.gms.maps.MapFragment"/>

</LinearLayout> 
```

最后是我的堆栈跟踪：

```
04-04 10:01:35.551: E/AndroidRuntime(14362): FATAL EXCEPTION: main
04-04 10:01:35.551: E/AndroidRuntime(14362): java.lang.RuntimeException:   Unable to     start activity ComponentInfo{com.app.thetoolstore/com.app.thetoolstore.Tool_map}:  android.view.InflateException: Binary XML file line #29: Error inflating class fragment
04-04 10:01:35.551: E/AndroidRuntime(14362):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1872)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1893)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at android.app.ActivityThread.access$1500(ActivityThread.java:135)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1054)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at android.os.Looper.loop(Looper.java:150)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at android.app.ActivityThread.main(ActivityThread.java:4385)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at java.lang.reflect.Method.invokeNative(Native Method)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at java.lang.reflect.Method.invoke(Method.java:507)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at dalvik.system.NativeStart.main(Native Method)
04-04 10:01:35.551: E/AndroidRuntime(14362): Caused by: android.view.InflateException: Binary XML file line #29: Error inflating class fragment
04-04 10:01:35.551: E/AndroidRuntime(14362):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:250)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at android.app.Activity.setContentView(Activity.java:1742)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at com.app.thetoolstore.Tool_map.onCreate(Tool_map.java:11)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1836)
04-04 10:01:35.551: E/AndroidRuntime(14362):    ... 11 more
04-04 10:01:35.551: E/AndroidRuntime(14362): Caused by: java.lang.ClassNotFoundException: android.view.fragment in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/data/app/com.app.thetoolstore-2.apk]
04-04 10:01:35.551: E/AndroidRuntime(14362):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at   java.lang.ClassLoader.loadClass(ClassLoader.java:551)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at  java.lang.ClassLoader.loadClass(ClassLoader.java:511)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at android.view.LayoutInflater.createView(LayoutInflater.java:471)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:549)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
04-04 10:01:35.551: E/AndroidRuntime(14362):    at  android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
04-04 10:01:35.551: E/AndroidRuntime(14362):    ... 20 more 
```

**更新**

我使用本教程[https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)解决了这个问题，特别是我遇到了*库*和谷歌支付服务的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T09:43:45.843

嗯很多问题 1）您需要使用 FragmentActivity 而不是 Activity

2) android:name="com.google.android.gms.maps.MapFragment" 替换为 android:name="com.google.android.gms.maps.SupportMapFragment"/>

3）您需要在清单文件中添加您的密钥并使用 Google Android Map API v2

4）参考本教程[http://www.vogella.com/articles/AndroidGoogleMaps/article.html](http://www.vogella.com/articles/AndroidGoogleMaps/article.html)

# asp.net - asp.net ajax 中的 modalpopup 扩展器

> ID：15807562
> 
> 赞同：1
> 
> 时间：2013-04-04T09:35:06.947
> 
> 标签：asp.net, modalpopupextender

我有两个具有相同组名的单选按钮。在选择一个单选按钮时，我想要两个新的单选按钮，在选择其他单选按钮时，我希望看到另外两个新的单选按钮。我希望所有这些都在 ModalPopupExtender 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:52:06.637

这是一个例子：

**ASPX：**

```
<head runat="server">
    <title>Modal Popup</title>
    <style type="text/css">
        .modalStyle
        {
            background-color: Gray;
            filter: alpha(opacity=70);
            opacity: 0.7;
        }

        .panelStyle
        {
            width: 300px;
            height: 180px;
            border: 2px solid Gray;
            background-color:White;
        }
    </style>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ToolkitScriptManager ID="scripManager" runat="server" />
    <asp:ModalPopupExtender ID="modal" CancelControlID="btnCancel" BackgroundCssClass="modalStyle" PopupControlID="popup" TargetControlID="lblPopup" runat="server" />
    <asp:Label ID="lblPopup" runat="server" />
    <asp:Panel runat="server" ID="popup" CssClass="panelStyle">
        <table style="width: 100%;">
            <tr>
                <td>
                    <asp:RadioButton ID="rdboption1" AutoPostBack="true" OnCheckedChanged="CheckedChanged" runat="server" Text="Option 1" GroupName="Options" /><br />
                    <asp:RadioButton ID="rdboption11" runat="server" Text="Option 1.1" GroupName="SubOption1"
                        Visible="false" /><br />
                    <asp:RadioButton ID="rdboption12" runat="server" Text="Option 1.2" GroupName="SubOption1"
                        Visible="false" />
                </td>
            </tr>
            <tr>
                <td>
                    <asp:RadioButton ID="rdboption2" AutoPostBack="true" OnCheckedChanged="CheckedChanged" runat="server" Text="Option 2" GroupName="Options" /><br />
                    <asp:RadioButton ID="rdboption21" runat="server" Text="Option 2.1" GroupName="SubOption2"
                        Visible="false" /><br />
                    <asp:RadioButton ID="rdboption22" runat="server" Text="Option 2.2" GroupName="SubOption2"
                        Visible="false" />
                </td>
            </tr>
            <tr>
                <td style="text-align: center;">
                    <asp:Button ID="btnCancel" runat="server" Text="Cancel" />
                </td>
            </tr>
        </table>
    </asp:Panel>
    </form>
</body> 
```

**后面的代码：**

```
public partial class Test : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        modal.Show();
    }

    protected void CheckedChanged(object sender, EventArgs e)
    {
        var radioButton = sender as RadioButton;
        ResetOptions();
        switch(radioButton.ID)
        {
            case "rdboption1":
                rdboption11.Visible = true;
                rdboption12.Visible = true;
                break;
            case "rdboption2":
                rdboption21.Visible = true;
                rdboption22.Visible = true;
                break;
        }   
    }

    private void ResetOptions()
    {
        rdboption11.Visible = false;
        rdboption12.Visible = false;
        rdboption21.Visible = false;
        rdboption22.Visible = false;
    }
} 
```

# c# - 标签索引更改时如何执行代码？

> ID：15807568
> 
> 赞同：0
> 
> 时间：2013-04-04T09:35:24.683
> 
> 标签：c#, winforms, onclick, tabcontrol

我目前在 Visual Studio 中的 Windows 窗体上有一个 tabcontrol，我想要它，这样当用户单击不同的选项卡时，我可以执行一些代码（例如填充列表框）。

当我双击选项卡时，它只会为选项卡控件的主体带来一个 onclick 事件。

我在想我可能必须在表单加载中创建一个线程，该线程将不断检查选项卡索引是否发生变化，如果确实发生了则执行一些代码。但肯定有更简单的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T09:38:00.727

您可以使用[TabControl.Selecting](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.selecting.aspx)或[TabControl.SelectedIndexChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.selectedindexchanged.aspx)事件

```
private void tabControl1_Selecting(object sender, TabControlCancelEventArgs e)
{
     //Your code goes here.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T09:37:10.717

你应该看看 TabControl 事件

[http://msdn.microsoft.com/en-ie/library/system.windows.forms.tabcontrol.selecting.aspx](http://msdn.microsoft.com/en-ie/library/system.windows.forms.tabcontrol.selecting.aspx)

# c++ - 看起来相似但行为不同的 C++ 代码：知道为什么吗？

> ID：15807572
> 
> 赞同：0
> 
> 时间：2013-04-04T09:35:33.607
> 
> 标签：c++, return-value

我有一个段树的 C++ 代码，它通常可以工作，但是输入很大，它会失败。无论如何，跟踪错误我发现将代码的某些部分更改为似乎“等效”的代码可以正常工作而不会失败。

一些背景：

```
struct state {
    int v, pos;
    state (int v, int pos) : v(v), pos(pos)  {}
};
int split(state s);
state go(state, int, int, int);

struct node{
    int link;
...
};
vector<node> t; 
```

此代码不起作用：

```
int get_link (int v) {
    if (t[v].link != -1)  return t[v].link;
    if (t[v].par == -1)  return 0;

    int to = get_link (t[v].par);
    state aux = go (state (to,t[to].len()), t[v].l + (t[v].par==0), t[v].r, t[v].i_str);

    return t[v].link = split (aux);
} 
```

这个有效：

```
int get_link (int v) {
    if (t[v].link != -1)  return t[v].link;
    if (t[v].par == -1)  return 0;

    int to = get_link (t[v].par);
    state aux = go (state (to,t[to].len()), t[v].l + (t[v].par==0), t[v].r, t[v].i_str);

    int ret = split (aux);
    t[v].link = ret;
    return ret;
} 
```

这个有效：

```
int get_link (int v) {
    if (t[v].link != -1)  return t[v].link;
    if (t[v].par == -1)  return 0;

    int to = get_link (t[v].par);
    state aux = go (state (to,t[to].len()), t[v].l + (t[v].par==0), t[v].r, t[v].i_str);

    int ret = split (aux);
    t[v].link = ret;
    return t[v].link;
} 
```

这个不起作用：

```
int get_link (int v) {

    node &w = t[v];
    if (w.link != -1)  return w.link;
    if (w.par == -1)  return 0;

    int to = get_link (w.par);
    state aux = go (state (to,t[to].len()), w.l + (w.par==0), w.r, w.i_str);

    int ret = split (aux);
    w.link = ret;
//  assert(t[v].link == ret);

    return ret;
} 
```

此外，在最后一种情况下，断言失败。这很奇怪，因为在所有失败的情况下，get_line 函数运行多次都没有问题。

知道什么是错的或我误解了什么。

如果有用

> $ gcc -v 使用内置规范。COLLECT_GCC=gcc COLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-redhat-linux/4.7.2/lto-wrapper 目标：x86_64-redhat-linux 配置：../configure --prefix=/usr --mandir=/ usr/share/man --infodir=/usr/share/info --with-bugurl= [http://bugzilla.redhat.com/bugzilla](http://bugzilla.redhat.com/bugzilla)--enable-bootstrap --enable-shared --enable-threads=posix --enable-checking=release --disable-build-with-cxx --disable-build-poststage1-with-cxx --with-system- zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-linker-hash-style=gnu --enable-languages=c, c++,objc,obj-c++,java,fortran,ada,go,lto --enable-plugin --enable-initfini-array --enable-java-awt=gtk --disable-dssi --with-java-home =/usr/lib/jvm/java-1.5.0-gcj-1.5.0.0/jre --enable-libgcj-multifile --enable-java-maintainer-mode --with-ecj-jar=/usr/share/ java/eclipse-ecj.jar --disable-libjava-multilib --with-ppl --with-cloog --with-tune=generic --with-arch_32=i686 --build=x86_64-redhat-linux 线程模型： posix gcc 版本 4.7.2 20120921 (Red Hat 4.7.2-2) (GCC)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:43:38.433

似乎您的 split 函数很可能正在调整`t`向量的大小。因此，在这样的表达式中，`t[v].link = split (aux)`如果在`vector::operator[]`拆分调用（这是可能的）之前评估 并且拆分函数正在重新分配向量，那么您可能正在访问对不再存在的对象的引用。

您使用临时变量的替代代码没有这个问题，因为调用`vector::operator[]`肯定是在调用 split 之后发生的。

# sql - 需要在sybase中创建pivot脚本

> ID：15807574
> 
> 赞同：2
> 
> 时间：2013-04-04T09:35:35.027
> 
> 标签：sql, oracle, pivot, sybase

我有一张像

```
ID     ENVI              SERVER               GROUP         ACTIVE
==     ====              ======              ======         ======
1      Developent        AREGION_1            A               1
2      Developent        AREGION_2            A               1
3      Developent        AREGION_3            A               1
4      Developent        BREGION_1            B               1
5      Developent        BREGION_2            B               1
6      Developent        BREGION_3            B               1
7      Developent        CREGION_1            C               1
8      Developent        CREGION_3            C               1
9      Developent        A1REGION             A               1
10     Developent        A2REGION             A               1
11     Developent        ABCREGION            A               1 
```

我需要编写一个带有输入参数的 sp `ENVI`，它将返回如下结果

```
ENVI                A             B              C
====                =========     =========      =========
Development         AREGION_1     BREGION_1      CREGION_1  (All servers Ending with _1)
Development         AREGION_2     BREGION_2                 (All servers Ending with _2)
Development         AREGION_3     BREGION_3      CREGION_3  (All servers Ending with _3)
Development         A1REGION     
Development         A2REGION     
Development         ABCREGION 
```

条件是所有以数字结尾的服务器`_`都应该排在第一位。如果任何一列没有该行的值，则该字段应为 null 或为空。任何组下具有随机名称的任何服务器都必须放在该组下的最后。

请帮我创建sp

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:47:17.213

您没有指定您使用的 sybase 版本，此答案假定您有一个可以访问窗口函数的版本。Sybase 没有 PIVOT 函数，因此您必须使用带有`CASE`表达式的聚合函数来复制它。

下面的代码应该得到你想要的结果：

```
select envi,
  max(case when serverGroup = 'A' then server end) as A,
  max(case when serverGroup = 'B' then server end) as B,
  max(case when serverGroup = 'C' then server end) as C
from
(
  select envi,
    server,
    serverGroup,
    case 
      when frn > rn then frn
      else rn
    end rn    
  from
  (
    select envi,
      server, 
      serverGroup,
      case 
        when charindex('_', SERVER) = 0
        then 0
        else substring(SERVER, charindex('_', SERVER)+1, len(SERVER))
      end frn, 
      row_number() over(partition by envi, serverGroup 
                        order by substring(SERVER, charindex('_', SERVER), len(SERVER)+1)) rn
    from ytable
  ) d
) x
group by envi, rn
order by rn; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/91a85/16)。注意：演示是在 SQL Server 上。

这给出了结果：

```
|       ENVI |         A |         B |         C |
--------------------------------------------------
| Developent | AREGION_1 | BREGION_1 | CREGION_1 |
| Developent | AREGION_2 | BREGION_2 |    (null) |
| Developent | AREGION_3 | BREGION_3 | CREGION_3 |
| Developent |  A1REGION |    (null) |    (null) |
| Developent |  A2REGION |    (null) |    (null) |
| Developent | ABCREGION |    (null) |    (null) | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:46:50.483

这是一个聚合查询，尽管您的最终结果不包括聚合列之一（修改后的服务器名称）。

```
select envi,
       max(case when group = 'A' then server end) as A,
       max(case when group = 'B' then server end) as B,
       max(case when group = 'C' then server end) as C
from t
group by envi,
         (case when server like '%[_]%' and server not like '%[_]%[^0-9]%'
               then left(server, charindex('_', server) - 1)
               else server
          end) 
```

该`like`逻辑查找具有下划线且下划线后仅包含数字的服务器名称。

# c# - 如何使用文本框但有下划线和闪烁的光标？

> ID：15807575
> 
> 赞同：1
> 
> 时间：2013-04-04T09:35:39.273
> 
> 标签：c#, winforms

我已经创建了 Windows 窗体，并且正在使用文本框控件进行输入，但我喜欢在没有边框和其他布局的文本框等情况下使用它。我只想使用下划线和闪烁的光标。

我玩了borderStyle（Fixed3D，None），backcolor=InactiveBorder等。但我仍然得到下划线......就像这样-> ***_* __ *_* __ *_* __ *_* __ *_*** 结果是这样的：这是下划线***_ _* __ *_* _ *_* __ *_* __ *_***

我认为 Backcolor=InactiveBorder 和 BorderStyle=None 可以使用，但是如何获得**下划线**和闪烁光标？

要求：

*   闪烁的光标和下划线。（默认情况下不闪烁，我只看到一条垂直线））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:59:27.060

要为您创建一个`underline`，您`textbox`可以这样做，

*   首先添加一个`panel`在**文本框高度+下划线高度的高度**。
*   现在添加您的`textbox`内部`panel`并将其设置`dock`为`TOP`.
*   然后将文本框设置`border`为`none`.
*   现在根据下划线的颜色需要设置 的`backcolor`。`panel`

* * *

## 更新：

## *这是VB代码，希望你能轻松转换成c#*

[**概念：**您只需将所有文本框的边框设置为无。然后在表单中绘制事件跟踪这些文本框并在其下方画一条线。]

```
Private Sub Form1_Paint(ByVal sender As Object, ByVal e As PaintEventArgs) Handles Me.Paint

    Using xPen As Pen = New Pen(Color.Blue)
        ' Here we are using LINQ to filter the controls.
        ' If you don't want it, you just check all the controls by using typeof
        ' inside the For Each loop.
        For Each xTxtBox In Me.Controls.OfType(Of TextBox)()
            e.Graphics.DrawLine(xPen,
                                xTxtBox.Location.X,
                                xTxtBox.Location.Y + xTxtBox.Height,
                                xTxtBox.Location.X + xTxtBox.Width,
                                xTxtBox.Location.Y + xTxtBox.Height)
        Next
    End Using

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:40:18.717

要伪造这一点，您可以在文本框下方添加一个标签，其内容为`_____________________`. 我首选的解决方案是创建一个简单的自定义控件，它只画一条线。

默认情况下，系统上的插入符号不会闪烁吗？如果焦点在文本框上，它会在我的系统上运行。

如果插入符号默认不闪烁，请转到 Windows 控制面板并在那里检查您的键盘设置 - 这是您可以调整插入符号闪烁频率的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T06:07:01.790

为此，我建议创建一个自定义控件（在 WinForms 世界中通过从提供的控件类之一继承来完成）。然后，该自定义控件将：

1.  提供它自己的绘图逻辑（通过覆盖`OnPaint`）以绘制下划线并跳过绘制您不想看到的任何其他内容（例如，控件的边框）。

2.  当它获得焦点时创建它自己的插入符，并在失去焦点时销毁该插入符。[您将在我的回答中](https://stackoverflow.com/a/15800591/366904)找到有关如何执行此操作的所有详细信息。

[`SetCaretBlinkTime`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648404.aspx)您还可以通过调用该函数来配置插入符号的闪烁率。但请注意，*不建议*这样做，因为它会更改全局系统设置并因此影响其他应用程序。如果您希望看到不同的东西，最好按照[Thorsten 的建议进行操作并修改您机器上的设置。](https://stackoverflow.com/a/15807681/366904)您应该始终尊重用户的设置。他们（或其他人）将系统设置为不闪烁插入符号是有原因的。

自然，您将需要使用 P/Invoke 从 C# 应用程序调用与插入符号管理相关的这些 Win32 API 函数。如果您知道自己在做什么，那应该不会太难。如果您需要一个完整的解决方案，请考虑在这个问题上[设置一个赏金](https://meta.stackexchange.com/questions/16065/how-does-the-bounty-system-work)来说服我为您写一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T09:42:44.897

使用 Masked TextBox 并设置 Focus，例如`maskedtextbox1.Focus();`<== 这是用于闪烁光标和遮罩文本框到下划线！

尝试 ：

> 将逻辑焦点设置到输入控件
> 
> ```
> FocusManager.SetFocusedElement(this, textboxJack); 
> ```
> 
> 将键盘焦点设置到输入控件
> 
> ```
> Keyboard.Focus(textboxJill); 
> ```

对于带掩码的文本框，您可以设置一个掩码，当您从中删除文本时不会更改该掩码，而不像简单的文本框 :) 祝您好运

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-04T11:48:53.730

我遇到了同样的问题并构建了一些可以正常工作的东西：

```
public class TextBox : System.Windows.Forms.TextBox
{
    public TextBox()
    {
        BorderStyle = BorderStyle.None;
        Text = "__________"; //Sometime this doesn't work while creating the control in design mode ; don't know why
    }

    //protected override void OnFontChanged(EventArgs e)
    //{
    //    base.OnFontChanged(e);
    //    RefreshHeight();
    //}

    bool loaded = false;
    protected override void OnCreateControl()
    {
        if(!loaded)
            RefreshHeight();
        base.OnCreateControl();
    }

    private void RefreshHeight()
    {
        loaded = true;
        Multiline = true;
        Size s = TextRenderer.MeasureText(Text, Font, Size.Empty, TextFormatFlags.TextBoxControl);
        MinimumSize = new Size(0, s.Height + 1);
        Multiline = false;
    }
} 
```

我曾经`bool loaded = false`避免应用程序因为`OnCreateControl`. **TextBox**控件没有`OnLoad`事件（我愿意接受另一种方法）。

`OnFontChanged`如果您的应用在运行时更改字体大小，则可以取消注释

`MinimumSize = new Size(0, s.Height + 1);` **我加了 1**以避免任何错误`MeasureText`

# php - 如何使用 codeigniter 在页面加载时从库中加载函数

> ID：15807577
> 
> 赞同：0
> 
> 时间：2013-04-04T09:35:41.570
> 
> 标签：php, codeigniter

我正在使用 codeigniter 做我的项目

我想在页面加载时加载一个函数。我试图提供该功能，`__construct()`但我需要在每一页调用该功能。

所以我想调用库中的函数而不调用`__construct()`

谁能给我解决我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:40:09.730

看看[钩子](http://ellislab.com/codeigniter/user-guide/general/hooks.html)。您可以根据您的需要，在每个请求的生命周期中配置要在各个位置执行的类的函数或方法。

如果您的功能需要控制器实例（`$this`在大多数情况下），您可能需要`post_controller_constructor`一个，并使用`get_instance()`来获取钩子内的控制器实例，加载库或调用模型等。

另一种方法可能是您`CI_Controller`使用一个`MY_Controller`类扩展该类，将其放置在该类下`application/core/MY_Controller.php`并将您的代码移动到该类中，`__construct`并将`MY_Controller`用作常规控制器的基类，如[创建核心系统类](http://ellislab.com/codeigniter/user-guide/general/core_classes.html)页面所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:24:52.510

在自动加载中添加一个库，然后在该库文件中使用`__construct`来调用您的函数。

# actionscript-3 - AS3：为 3D 对象截屏

> ID：15807579
> 
> 赞同：0
> 
> 时间：2013-04-04T09:35:55.420
> 
> 标签：actionscript-3, 3d

我想为 3d 对象截取屏幕截图，我尝试了以下操作：

```
var screenshot:BitmapData = new BitmapData(ViewerWidth, ViewerHeight);
screenshot.draw(Viewer3D); 
var imageTaken:Bitmap = new Bitmap(screenshot); 
addChild(imageTaken); 
```

但它不适用于 3d 对象！

我该怎么做或如何将 3D 对象绘制到位图数据？谢谢。

# batch-file - 使用 ImageMagick 批量创建循环以进行多次导出

> ID：15807586
> 
> 赞同：0
> 
> 时间：2013-04-04T09:36:08.890
> 
> 标签：batch-file, imagemagick, dos

我试图制作一个处理多个图像文件的批处理文件。

这些文件被命名为 P_1316_0001.png P_1316_0002.png P_1316_0003.png 等。由于 ImageMagick 程序，我可以直接批量转换图像。

基本上我想做的是：

创建一个变量，该变量会递增，直到文件夹中没有要转换的文件。假设 i 为 0001，将文件从 png 转换为 jpg（转换 %VARSESSION% *%i%.png %VARSESSION% %i%.jpg）*

好吧，我希望你能帮助我。我谢谢你

丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:54:06.157

你对你的问题有点限制，但为了适应你指定的精确参数，

```
SETLOCAL ENABLEDELAYEDEXPANSION
for /l %%i in (10001,1,19999) do (
 set numb=%%i
 ECHO if exist %varsession%_!numb:~1!.png convert %varsession%_!numb:~1!.png %varsession%_!numb:~1!.jpg
)
ENDLOCAL 
```

但是还有更好的方法，例如

```
for /f %%i in ('dir /b /a-d %varsession%_*.png') do (
ECHO convert %%i %%~ni.jpg
) 
```

假设要处理与 %varsession%_*.png 匹配的所有文件。

注意：插入关键字 ECHO 以显示批次建议执行的操作。删除`ECHO`以实际执行操作

# php - 如何将数组的每个元素相互比较？

> ID：15807590
> 
> 赞同：1
> 
> 时间：2013-04-04T09:36:32.340
> 
> 标签：php, arrays, unique

我想将数组的每个元素相互比较。

```
 $char=array();    
 for($i=0;$i<=10;$i++)
 {
        $char[$i]=rand(0,35);
 } 
```

我想比较 $char 数组的每个元素。如果有任何重复的值比它应该改变值并选择另一个在数组中应该是唯一的随机值..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T09:39:41.917

在此特定示例中，可能值的范围非常小，最好以另一种方式执行此操作：

```
$allPossible = range(0, 35);
shuffle($allPossible);

// Guaranteed exactly 10 unique numbers in the range [0, 35]
$char = array_slice($allPossible, 0, 10); 
```

或使用等效版本[`array_rand`](http://www.php.net/manual/en/function.array-rand.php)：

```
$allPossible = range(0, 35);
$char = array_rand(array_flip($allPossible), 10); 
```

如果值的范围更大，那么这种方法将非常浪费，您应该在每次迭代时检查唯一性：

```
$char = array();
for ($i = 0; $i < 10; ++$i) {
    $value = null;

    // Try random numbers until you find one that does not already exist
    while($value === null || in_array($value, $char)) {
        $value = rand(0, 35);
    }

    $char[] = $value;
} 
```

但是，这是一种概率方法，可能需要很长时间才能完成，具体取决于输出的`rand`结果（如果您想要的值的数量接近所有可能值的数量，这将特别糟糕）。

此外，如果您要选择的值的数量很大（比如说超过 50 个左右），那么`in_array`可能会成为瓶颈。在这种情况下，使用数组键而不是值来检查唯一性应该更快，因为搜索键的存在是常数时间而不是线性时间：

```
$char = array();
for ($i = 0; $i < 100; ++$i) {
    $value = null;

    // Try random numbers until you find one that does not already exist
    while($value === null || array_key_exists($char, $value)) {
        $value = rand(0, 1000);
    }

    $char[$value] = $value;
}

$char = array_values($char); // reindex keys to start from 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:38:55.257

要更改随机值的任何重复值，您应该循环遍历数组两次：

```
$cont= 0;
foreach($char as $c){
    foreach($char as $d){
        if($c == $d){
            //updating the value
            $char[$cont] = rand(0,35);
        }
    }
    $cont++;
} 
```

但我不知道随机值是否也可以重复。在那种情况下，事情就不会那么简单了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:39:42.277

我从[rand() 的 PHP 手册页面中获取了这段代码](http://www.php.net/manual/en/function.rand.php#95420)

```
<?php
 function uniqueRand($n, $min = 0, $max = null)
 {
  if($max === null)
   $max = getrandmax();
  $array = range($min, $max);
  $return = array();
  $keys = array_rand($array, $n);
  foreach($keys as $key)
   $return[] = $array[$key];
  return $return;
 }
?> 
```

此函数生成一个大小为 $n 的数组，您可以像 rand 一样设置最小值和最大值。

所以你可以像使用它一样

```
uniqueRand(10, 0, 35); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T09:39:43.100

`array_count_values()`首先在`$char`阵列上使用。

之后，您可以循环所有大于 1 的条目并将它们随机化。您必须不断检查，直到所有计数都为 1。因为即使是随机的也可能再次复制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T09:43:46.973

我建议使用两个选项来制作随机数组：

```
 <?php
    $questions = array(1, 2, 3, 4, 5, ..., 34, 35);
    $questions = shuffle($questions);
    ?> 
```

之后，您选择前 10 个元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T10:47:36.587

您可以尝试使用此代码替换任何重复的值。

```
for ($i = 0; $i < count($char); $i++) {
    for ($n = 0; $n < count($char); $n++) {
        if($char[$i] == $char[$n]){
            $char[$i] = rand(0,35);
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-04T19:58:50.683

该函数[`array_unique()`](http://php.net/array_unique)从数组中获取所有唯一值，以它们的第一次出现为键。

该函数[`array_diff()`](http://php.net/array_diff)允许从一个数组中删除另一个数组中的值。

根据您需要（或不拥有）键控结果或保留键的顺序，您需要执行多个步骤。通常它的工作原理与我在以下段落中概述的一样（使用 PHP 代码示例）：

在一个数组中，您拥有独特`N`的元素。`Nu`

```
$N  = array(...);
$Nu = array_unique($N); 
```

`r`然后替换重复项所需的随机元素数是 的计数`N`减去 的计数`Nu`。由于计数`N`通常是一个有用的值，我还将它分配给`nc`：

```
$nc = count($N);
$r  = $nc - count($Nu); 
```

这使得`r`整数范围从`0`到`count(N) - 1`：

```
 0 : no duplicate values / all values are unique
           1 : one duplicate value / all but one value are unique
            ...
count(N) - 1 : all duplicate values / no unique value 
```

因此，如果您需要零随机值 ( `$r === 0`)，则输入`$N`就是结果。这个边界条件是第二个最简单的结果（第一个简单的结果是一个没有成员的输入数组）。

对于所有其他情况，您需要`r`随机唯一值。在您的问题中，您从 0 写到 35。但这不可能是完整的故事。假设您的输入数组有 36 个重复值，从 0 到 35 范围内的每个数字都重复一次。再次将 0 到 35 范围内的随机数添加到数组将再次创建重复项 - 保证。

相反，我已经阅读了您的问题，即您只是在寻找尚不属于输入数组的唯一值。

因此，您不仅需要`r`随机值 ( `Nr`)，而且它们也不能属于`N`或`Nu`到目前为止。

要实现这一点，您只需要创建`count(N)`唯一值，`Nu`从这些值中删除唯一值以确保没有重复的值在`Nu`. 由于这是理论上的最大值而不是所需的确切数字，因此该数组用于从以下位置获取精确`r`元素的切片：

```
$Nr = array_slice(array_diff(range(0, $nc - 1), $Nu), 0, $r); 
```

如果您还希望按`range(0, $nc - 1)`顺序添加这些新值，则可以执行以下操作：

```
shuffle($Nr); 
```

这应该将您在问题中*似乎*要求的随机性带回答案中。

现在为您留下了原始数组的独特部分`$Nu`和. 合并这两个数组将为您提供一个忽略键 => 值关系的结果数组（该数组是重新索引）：*`r`*`$Nr`

```
array_merge($Nu, $Nr); 
```

例如，对于示例`array(3, 4, 2, 1, 4, 0, 5, 0, 3, 5)`，`$N`它给出的结果是：

```
Array
(
    [0] => 3
    [1] => 4
    [2] => 2
    [3] => 1
    [4] => 0
    [5] => 5
    [6] => 7
    [7] => 9
    [8] => 6
    [9] => 8
) 
```

如您所见，所有唯一值 (0-5) 都在开头，然后是新值 (6-9)。不保留原始密钥，例如 value 的密钥`5`最初是`6`，现在是`5`。

没有保留关系或键 => 值，因为`array_merge()`它会重新索引数字键。此外，在键中的唯一数字旁边`Nr`也需要在数组中是唯一的。因此，对于添加到唯一现有数字的每个新数字，都需要使用一个密钥，该密钥是重复数字的密钥。为了获得所有重复数字的键，原始数组中的键集合被所有重复数字匹配的键集合减少（“唯一数组”中的键`$Nu`）：

```
$Kr  = array_keys(array_diff_assoc($N, $Nu)); 
```

`$Nr`现在可以使用这些键来键入现有结果。PHP 中为数组设置所有键的函数是使用该函数[`array_combine()`](http://php.net/array_combine)：

```
$Nr = array_combine($Kr, $Nr); 
```

这允许通过使用*数组联合运算符 ( `+`)*获得保留键 => 值关系的结果：

```
$Nu + $Nr; 
```

例如，对于`$N`上一个示例，它给出的结果是：

```
Array
(
    [0] => 3
    [1] => 4
    [2] => 2
    [3] => 1
    [5] => 0
    [6] => 5
    [4] => 8
    [7] => 6
    [8] => 9
    [9] => 7
) 
```

正如您现在所看到的，`5`它的键值以及在原始数组中具有键的值以及现在在输出中而不是前面示例中的键`6`的值都被保留了。`0``5``4`

但是，由于现在已为原始值的第一次出现保留了键，因此顺序仍然发生了变化：首先是所有以前唯一的值，然后是所有新值。但是，您可能希望在适当的位置添加新值。为此，您需要获取新值的原始键的顺序。这可以通过按键映射顺序并[`array_multisort()`](http://php.net/array_multisort)根据该顺序进行排序来完成。

因为这需要通过参数传递返回值，所以这需要额外的临时变量，我选择引入以字母*V*开头的变量：

```
// the original array defines the order of keys:
$orderMap = array_flip(array_keys($N));

// define the sort order for the result with keys preserved
$Vt    = $Nu + $Nr;
$order = array();
foreach ($Vt as $key => $value) {
    $order[] = $orderMap[$key];
} 
```

然后排序完成（这里使用保留键）：

```
// sort an array by the defined order, preserve keys
$Vk = array_keys($Vt);
array_multisort($order, $Vt, $Vk); 
```

结果是：

```
array_combine($Vk, $Vt); 
```

再次使用上面的示例值：

```
Array
(
    [0] => 3
    [1] => 4
    [2] => 2
    [3] => 1
    [4] => 7
    [5] => 0
    [6] => 5
    [7] => 8
    [8] => 6
    [9] => 9
) 
```

此示例输出很好地显示了键从 0 到 9 排序，因为它们在输入数组中很好。例如，与之前的输出相比，您可以看到第一个添加的值`7`(keyed `4`) 位于第 5 位 - 与`4`原始数组中键入的值相同。密钥的顺序也已获得。

如果这是您努力争取的结果，您也可以通过迭代原始数组键来缩短此步骤的路径，如果这些键中的每一个都不是任何重复值的第一个值，您可以从新值中弹出数组代替：

```
$result = array();
foreach ($N as $key => $value) {
    $result[$key] = array_key_exists($key, $Nu) ? $Nu[$key] : array_pop($Nr);
} 
```

再次使用示例数组值的结果（与以前的不同，因为`$Nr`被打乱了：

```
Array
(
    [0] => 3
    [1] => 4
    [2] => 2
    [3] => 1
    [4] => 7
    [5] => 0
    [6] => 5
    [7] => 8
    [8] => 9
    [9] => 6
) 
```

最后，这可能是回答您问题的最简单方法。希望这可以帮助您回答问题。请记住以下几点：

*   划分你的问题：
    1.  你想知道一个值是否是 unqiue -`array_unique()`在这里帮助你。
    2.  您想创建 X 个*新*的唯一数字/值。 `array_diff()`在这里帮助你。
*   对齐流程：
    1.  首先获取唯一编号。
    2.  首先获得新号码。
    3.  使用两者来处理原始数组。

就像在这个例子中一样：

```
// original array
$array = array(3, 4, 2, 1, 4, 0, 5, 0, 3, 5);

// obtain unique values (1.)
$unique = array_unique($array);

// obtain new unique values (2.)
$new = range(0, count($array) - 1);
$new = array_diff($new, $unique);
shuffle($new);

// process original array (3.)
foreach ($array as $key => &$value) {
    if (array_key_exists($key, $unique)) {
        continue;
    }
    $value = array_pop($new);
}
unset($value, $new);

// result in $array:
print_r($array); 
```

然后（因为 示例`shuffle($new)`）输出：

```
Array
(
    [0] => 3
    [1] => 4
    [2] => 2
    [3] => 1
    [4] => 9
    [5] => 0
    [6] => 5
    [7] => 8
    [8] => 7
    [9] => 6
) 
```

# javascript - 将鼠标悬停在图像上时停止旋转图像

> ID：15807594
> 
> 赞同：0
> 
> 时间：2013-04-04T09:36:40.777
> 
> 标签：javascript

我有使用 javascript 的旋转图像。我遇到的问题是当光标悬停在图像顶部时它会暂停。

我怎样才能阻止这种情况发生？

原始代码来自：[http ://www.dynamicdrive.com/dynamicindex14/fadeinslideshow.htm](http://www.dynamicdrive.com/dynamicindex14/fadeinslideshow.htm)

谢谢

```
<script type="text/javascript">

var mygallery=new fadeSlideShow({
wrapperid: "fadeshow1", //ID of blank DIV on page to house Slideshow
dimensions: [900, 600], //width/height of gallery in pixels. Should reflect dimensions of largest image
imagearray: [
    ["01.jpg"],
    ["02.jpg"],
    ["03.jpg"],
    ["04.jpg"],
    ["05.jpg"],
    ["06.jpg"],
    ["07.jpg"],
    ["08.jpg"],
    ["09.jpg"],
    ["10.jpg"],
    ["11.jpg"] 
],
displaymode: {type:'auto', pause:7500, cycles:0, wraparound:false},
persist: false, //remember last viewed slide and recall within same session?
fadeduration: 400, //transition duration (milliseconds)
descreveal: "none",
togglerid: ""
})
</script> 
```

和...

```
 <div id="fadeshow1"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:41:50.007

看一下fadeslideshow.js 代码本身（[http://www.dynamicdrive.com/dynamicindex14/fadeslideshow.js](http://www.dynamicdrive.com/dynamicindex14/fadeslideshow.js)），可以简单地注释掉从第129 行到第132 行的if 块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:41:13.160

删除此行

```
setting.$wrapperdiv.bind('mouseenter', function(){setting.ismouseover=true}) //pause slideshow mouseover 
```

从`adeslideshow.js`

它会解决你的问题

# c++ - gdb 创建一个流

> ID：15807600
> 
> 赞同：0
> 
> 时间：2013-04-04T09:36:57.557
> 
> 标签：c++, gdb

我有一个程序，它从流中获取信息并使用 cin 读取并稍后转换输入。

这是程序的调用：

```
cat file1 | ./converter 
```

在 C++ 中就是这一行

```
while ( ! cin.eof( ) ) 
```

从流中读取。

是否可以在 gdb 中模拟管道？因为没有它我无法调试源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:47:29.667

如果您阅读[文档](http://sourceware.org/gdb/current/onlinedocs/gdb/)，例如关于[程序输入/输出](http://sourceware.org/gdb/current/onlinedocs/gdb/Input_002fOutput.html#Input_002fOutput)的部分，您将看到您可以对`run`命令使用正常重定向：

```
(gdb) run < file1 
```

`stdin`这将使用重定向的 from运行您的程序`file1`。

# sql - 使用信用卡进行 Windows azure 验证

> ID：15807604
> 
> 赞同：-2
> 
> 时间：2013-04-04T09:37:02.683
> 
> 标签：sql, wcf, azure

我是学生，正在写学士论文。我的应用程序使用 wcf 和 sql 数据库。如果我想测试应用程序，我需要托管它。我想在 Azure 上托管，90 免费试用，但需要用信用卡验证。我担心共享我的信用卡数据。我想问你，它是否安全，90后我必须支付它吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:36:12.867

账单和信用卡信息由 Microsoft 自己托管和存储——您可以详细了解他们的做法的安全性，但我相信他们没问题。只要您在 90 天到期之前删除数据库，您就无需支付任何费用。您仍然可以继续订阅，只要确保您没有使用任何服务即可。为了高枕无忧，请每天检查您的帐单，并确保没有任何内容被记录为正在运行。

# windows - Qt链接静态构建库

> ID：15807605
> 
> 赞同：2
> 
> 时间：2013-04-04T09:37:04.347
> 
> 标签：windows, qt, static-libraries, qmake

我有一个项目定位为**lib**，另一个项目定位为**app**。

第一个项目成功构建为**静态**库和**动态**（共享）库。

第二个项目成功链接了**动态**库，但无法链接**静态**库。出现许多错误信息`LNK2001: unresolved external symbol`。

应用程序专业版：

```
TEMPLATE = app
CONFIG += static link_prl ordered
DEFINES += QT_NODLL
QT += core gui network xml

...

# --- LINK QUAZIP LIB SHARED ---

#LIBS += -L$$quote(C:/Qt/quazip/build-quazip-0.5.1-Qt_4_8_3_shared-Debug/quazip/debug) -lquazip
#PRE_TARGETDEPS += $$quote(C:/Qt/quazip/build-quazip-0.5.1-Qt_4_8_3_shared-Debug/quazip/debug/quazip.lib)

# --- LINK QUAZIP LIB STATIC ---

LIBS += -L$$quote(C:/Qt/quazip/build-quazip-0.5.1-Qt_4_8_3_static-Release/quazip/release) -lquazip
PRE_TARGETDEPS += $$quote(C:/Qt/quazip/build-quazip-0.5.1-Qt_4_8_3_static-Release/quazip/release/quazip.lib) 
```

目录内容：

```
 Directory of C:\Qt\quazip\build-quazip-0.5.1-Qt_4_8_3_shared-Debug\quazip\debug

04.04.2013  11:01    <DIR>          .                                           
04.04.2013  11:01    <DIR>          ..                                          
04.04.2013  11:01           188 498 JlCompress.obj                              
04.04.2013  11:01             2 484 moc_quagzipfile.cpp                         
04.04.2013  11:01            43 994 moc_quagzipfile.obj                         
04.04.2013  11:01             2 501 moc_quaziodevice.cpp                        
04.04.2013  11:01            44 026 moc_quaziodevice.obj                        
04.04.2013  11:01             2 467 moc_quazipfile.cpp                          
04.04.2013  11:01            62 441 moc_quazipfile.obj                          
04.04.2013  11:01            40 936 qioapi.obj                                  
04.04.2013  11:01            24 586 quaadler32.obj                              
04.04.2013  11:01            24 554 quacrc32.obj                                
04.04.2013  11:01            73 276 quagzipfile.obj                             
04.04.2013  11:01            69 745 quaziodevice.obj                            
04.04.2013  11:01           188 928 quazip.dll                                  
04.04.2013  11:01            40 067 quazip.exp                                  
04.04.2013  11:01           999 808 quazip.ilk                                  
04.04.2013  11:01               381 quazip.intermediate.manifest                
04.04.2013  11:01            65 678 quazip.lib                                  
04.04.2013  11:01           156 746 quazip.obj                                  
04.04.2013  11:01         1 166 336 quazip.pdb                                  
04.04.2013  11:01           259 653 quazipdir.obj                               
04.04.2013  11:01           117 317 quazipfile.obj                              
04.04.2013  11:01            47 039 quazipfileinfo.obj                          
04.04.2013  11:01            57 489 quazipnewinfo.obj                           
04.04.2013  11:01            35 483 unzip.obj                                   
04.04.2013  11:01            34 526 zip.obj                                     
              25 File(s)      3 748 959 bytes                                   
               2 Dir(s)  17 125 515 264 bytes free

 Directory of C:\Qt\quazip\build-quazip-0.5.1-Qt_4_8_3_static-Release\quazip\release

04.04.2013  12:46    <DIR>          .                                               
04.04.2013  12:46    <DIR>          ..                                              
04.04.2013  12:46         1 457 363 JlCompress.obj                                  
04.04.2013  12:46             2 484 moc_quagzipfile.cpp                             
04.04.2013  12:46         1 084 653 moc_quagzipfile.obj                             
04.04.2013  12:46             2 501 moc_quaziodevice.cpp                            
04.04.2013  12:46         1 084 461 moc_quaziodevice.obj                            
04.04.2013  12:46             2 467 moc_quazipfile.cpp                              
04.04.2013  12:46         1 199 125 moc_quazipfile.obj                              
04.04.2013  12:46         1 084 170 qioapi.obj                                      
04.04.2013  12:46           279 307 quaadler32.obj                                  
04.04.2013  12:46           279 270 quacrc32.obj                                    
04.04.2013  12:46         1 115 174 quagzipfile.obj                                 
04.04.2013  12:46         1 108 222 quaziodevice.obj                                
04.04.2013  12:46        14 977 872 quazip.lib                                      
04.04.2013  12:46         1 246 009 quazip.obj                                      
04.04.2013  12:46               801 quazip.prl                                      
04.04.2013  12:46         1 357 090 quazipdir.obj                                   
04.04.2013  12:46         1 246 159 quazipfile.obj                                  
04.04.2013  12:46         1 121 490 quazipfileinfo.obj                              
04.04.2013  12:46         1 134 685 quazipnewinfo.obj                               
04.04.2013  12:46            56 712 unzip.obj                                       
04.04.2013  12:46            59 090 zip.obj                                         
              21 File(s)     29 899 105 bytes                                       
               2 Dir(s)  17 123 479 552 bytes free 
```

据我了解，**qmake**想要一个 dll 链接到它。我如何告诉它我想构建一个静态应用程序并让它在静态构建的库中查找外部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:24:51.373

静态链接 QuaZip 需要 `CONFIG += staticlib` 在您的 qmake 文件中。

或者确保`QUAZIP_STATIC`在您实际包含应用程序中的任何 QuaZip 标头之前定义。

# python - 如何在 Python 中创建带有图像的 GTK ComboBox？

> ID：15807611
> 
> 赞同：4
> 
> 时间：2013-04-04T09:37:12.330
> 
> 标签：python, gtk, pygobject

如何创建一个显示条目列表的组合框，每个条目都包含一些文本和一个图标？

我正在使用带有 GObject 内省的 Python 和 GTK3。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T09:37:12.330

这是一个如何做到这一点的例子，受[C 的这个答案的](https://stackoverflow.com/a/5757188/247696)启发。

```
from gi.repository import Gtk
from gi.repository import GdkPixbuf

store = Gtk.ListStore(str, GdkPixbuf.Pixbuf)

pb = GdkPixbuf.Pixbuf.new_from_file_at_size("picture.png", 32, 32)
store.append(["Test", pb])

combo = Gtk.ComboBox.new_with_model(store)

renderer = Gtk.CellRendererText()
combo.pack_start(renderer, True)
combo.add_attribute(renderer, "text", 0)

renderer = Gtk.CellRendererPixbuf()
combo.pack_start(renderer, False)
combo.add_attribute(renderer, "pixbuf", 1)

window = Gtk.Window()
window.add(combo)
window.show_all()

window.connect('delete-event', lambda w, e: Gtk.main_quit())

Gtk.main() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-19T16:37:55.500

GTK2 中的相同示例，受您的代码启发：

```
import pygtk
pygtk.require('2.0')
import gtk
import gtk.gdk
import gobject
import gc

store = gtk.ListStore(str, gtk.gdk.Pixbuf) 

pb = gtk.gdk.pixbuf_new_from_file("picture.png")
store.append(["Test", pb])

combo = gtk.ComboBox(store)

renderer = gtk.CellRendererText()
combo.pack_start(renderer, True)
combo.add_attribute(renderer, "text", 0)

renderer = gtk.CellRendererPixbuf()
combo.pack_start(renderer, False)
combo.add_attribute(renderer, "pixbuf", 1)

window = gtk.Window(gtk.WINDOW_TOPLEVEL)
window.add(combo)
window.show_all()

window.connect('delete-event', lambda w, e: gtk.main_quit())

gtk.main() 
```

# testcase - 显示自动编号测试用例

> ID：15807615
> 
> 赞同：1
> 
> 时间：2013-04-04T09:37:33.797
> 
> 标签：testcase, testlink

我想知道是否有任何方法可以隐藏 TestLink 在您创建新测试用例时显示的自动编号。在我的示例中，“idERP”是项目的 ID，但“-1，-2...”是 TestLink 显示的自动编号，我不希望看到这些编号。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-15T08:24:04.950

Testlink 自动测试用例编号非常烦人。用户不能重新排序测试用例编号。

就我自己对软件的实验和探索而言，您无法控制测试用例编号顺序，甚至无法使用 GUI 切换它的可见性。

您可以控制它的唯一方法是深入研究 Testlink 的源代码并修改处理测试用例编号的代码。

根据[Wikipedia](https://en.wikipedia.org/wiki/TestLink)，测试用例的标识符由 TestLink 自动分配，用户不能更改。此 ID 由测试项目前缀和与创建测试用例的测试项目相关的计数器组成。

[Testlink v1.9.13 - 风暴使者](http://sourceforge.net/projects/testlink/files/latest/download?source=files)

# php - 单击开始按钮后如何保持选定的列表值？

> ID：15807620
> 
> 赞同：1
> 
> 时间：2013-04-04T09:37:40.927
> 
> 标签：php, mysql

我有一个 php 页面，其中从 mysql 数据库填充了一个下拉列表，**当用户进行选择并单击“开始”按钮时，有关该选定项目的数据将显示在页面上**。现在一切都在我的页面中正常运行，但列表项名称会自动显示为默认值。例如：有 4 个列表项，特色艺术、波普艺术、自然艺术、幻想艺术。**当用户选择 pop art 并按下 go 按钮时，与此相关的数据显示在页面上，但下拉列表不包含在 list 中选择的 pop art 名称**。即使这样，下拉列表也会默认显示特色艺术。获取数据没有问题，但我想**在下拉列表中显示为选定的流行艺术或自然艺术或幻想艺术或特色艺术**（*不仅是特色艺术*）及其页面上的相关数据等。我想我的观点大家都很清楚。请帮帮我。

这是代码：

```
<select name="category">
<?php
$sql = "SELECT id, art_name FROM category;";
$result = mysql_query($sql);
while ($row = mysql_fetch_assoc($result)) {
 ?>
<option value="<?= $row['id']; ?>"><?= $row['art_name']; ?></option>

<?php

 }
 ?>
 </select>
 <input name="go" type="submit" value="Go" /></div>

 <div align="center" class="showimage">
 <ul class="display">

 <?php
  $id = (int)$_POST['category'];
 $sql_search = "SELECT id, categoryid, path FROM list WHERE categoryid = $id";
 $search = mysql_query($sql_search);
 $sql = mysql_query("SELECT autodisplay FROM list WHERE categoryid = 2");
 if (isset($_POST['go'])) {
 while ($row = mysql_fetch_assoc($search)) {
 ?>

<li><a href="<?= $row['path']; ?>" class="highslide" onClick="return hs.expand(this)"><img src="<?= $row['path']; ?>" border="0"></a></li>
<?php }

 }

 else {
 while ($row = mysql_fetch_assoc($sql)) {
 ?> 
 <li><a href="<?= $row['autodisplay']; ?>" class="highslide" onclick="return hs.expand(this)"><img src="<?= $row['autodisplay']; ?>" border="0"></a></li>
  <?php 
   }
   }
  ?>
 </ul> 
```

[这是运行页面](http://monomita.arbionics.com/Becuart/Site/DOCS/main.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:41:42.760

将您的选择列表替换为以下内容：

```
<select name="category">
    <?php
    $sql = "SELECT id, art_name FROM category;";
    $result = mysql_query($sql);
    while ($row = mysql_fetch_assoc($result)) {
        ?>

        <option value="<?= $row['id']; ?>"<?=($_POST['category']==$row['id'] ? ' selected="selected" : '')?>><?= $row['art_name']; ?></option>

        <?php
    }
    ?>
</select> 
```

我添加了一个 if 语句来检查行 id 是否与发布的变量匹配 - 如果是，则将选项值设置为选中。

# sql - SQL count() 按类型超过 2 个表

> ID：15807635
> 
> 赞同：0
> 
> 时间：2013-04-04T09:38:19.943
> 
> 标签：sql, count, sql-order-by

我有一个问题如何做出正确的 sql 语句，因为我不知道如何开始；-(

有以下两个表：

表 1：测试

```
id|name|type
-------------
1|FirstUnit|1
2|FirstWeb|2
3|SecondUnit|1 
```

表 2：类型

```
id|type
--------
1|UnitTest
2|WebTest 
```

我想得到以下结果：

表格结果：

```
type|amount
-----------
UnitTest|2
WebTest|1 
```

任何人都可以帮助提示如何开始吗？

提前致谢。罢工

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:40:03.087

```
SELECT  a.type, COUNT(b.type) amount
FROM    types a
        LEFT JOIN test b
            ON a.ID = b.type
GROUP   BY a.type
ORDER   BY amount DESC 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/33b30/2)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:40:56.440

你可以试试这个查询：

```
SELECT
    t.type ,
    COUNT(*) AS amount
FROM types AS t
   JOIN test AS te ON t.id= te.type
GROUP BY type
ORDER BY t.type 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:06:42.260

这是解决方案： -

```
 SELECT  types.type, COUNT(test.type) as amount from types,test where test.type=types.id 
 GROUP BY test.type
 ORDER BY amount 
```

# android - gson解析json中的JsonParseException

> ID：15807638
> 
> 赞同：0
> 
> 时间：2013-04-04T09:38:31.650
> 
> 标签：android, json, parsing, gson

我在使用 gson 解析 json 时遇到问题

我的 json 文本是

```
{
    **"message": [**
        {
            "id": "123",
            "trackid": "GPN-GET-HYGH",
            "category": "0",
            "subject": "new message",
            "dt": "2013-04-02 14:52:48",
            **"message": "Hewlrj",**
            "repliername": null,
            "attachment_name": "image.jpg"
        }
    ],
    "replies": [
        {
            "id": "165",
            "replyto": "123",
            "name": "962788161885",
            "message": "Hellooo\nHjkhjkhjkhkjh\nHjkhkjhjkhkh",
            "dt": "2013-04-02 15:53:11",
            "attachments": "",
            "staffid": "0",
            "rating": null
        }
    ]
} 
```

我创建了两个类，一个用于消息，第二个用于具有上述字段的回复

但得到异常

```
com.google.myjson.JsonParseException: Expecting object found: "Hewlrj" 
```

请帮我

**已编辑**

我的消息类结构看起来像（没有getter setter ..我已经删除了它）

```
public class message {
    int id;
    String trackid;
    String category;
    String subject;
    String dt;
    String message;
    String repliername;
    String attachment_name;
}

public class TicketList {

    ArrayList<message> message;
}

try{
       Gson json=new Gson();
       object=json.fromJson(mJSONString,TicketLis.class);
    }catch (Exception ex) {
      System.out.println("error in gson parsing");
      ex.printStackTrace();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:06:17.300

您的问题是您在 json 中有 "message": "Hewlrj" 并且可能您定义了一个如下所示的类：

```
class Message {
  private Message message;
} 
```

因此，Gson 期望为消息找到一个 json 对象，而不是字符串。解决方案是用私有字符串消息替换私有消息消息；

# xml - SVG 文件中的文本元素 - 从顶部 y 开始

> ID：15807647
> 
> 赞同：1
> 
> 时间：2013-04-04T09:38:56.010
> 
> 标签：xml, html, svg

这是我的 SVG 文件：http: `$` [//jsfiddle.net/fHdYC/](http://jsfiddle.net/fHdYC/)

为什么我看不到所有文字？我想从 posx=0,posy=0 开始写

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:06:54.883

文本放置在位置 (0,0) 但对于 svg 中的文本， (0,0) 是放置文本基线的位置。这意味着文本将从基线向上延伸（在您的示例中，文本最终会超出可见区域）。

你应该将你的 y 位置调整到你想要基线的位置。

一种方法是使用`em`单位，因为它们取决于字体大小。设置`y="1em"`并且文本应该变得可见（当然也取决于您的坐标系/viewBox）。请参阅[http://jsfiddle.net/8MpyY/](http://jsfiddle.net/8MpyY/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:50:38.737

[http://jsfiddle.net/a4p52/](http://jsfiddle.net/a4p52/)

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="2551" height="3578">
<g name="text_group" id="group_lay_29073" >
    <text x="0" y="0" font-family="Arial" font-size="30" fill="#000" alignment-baseline="hanging" text-anchor="start" font-style="normal" >Loremp ipsum</text>
</g> 
```

使用“文本锚”和“对齐基线”。

# java - 如何在具有 CachedRowSet 的增量 id 的表中插入一行？

> ID：15807649
> 
> 赞同：1
> 
> 时间：2013-04-04T09:38:58.840
> 
> 标签：java, javadb, cachedrowset

我正在尝试将一行插入到具有 CachedRowSet 增量 id 的表中（我正在使用 Java wit Java DB），但是我得到了以下 SQLException：
**java.sql.SQLException：在插入行时失败
...
SQLState：null
错误代码：0
消息：插入行失败**
这是我的代码片段：

```
private static String urlString = "jdbc:derby:testdb;create=true";
private static String userName = "testUser";
private static String password = "testPassword";
...

CachedRowSet crs = new CachedRowSetImpl();
            crs.setUrl(urlString);
            crs.setUsername(userName);
            crs.setPassword(password);
            crs.setCommand("SELECT * FROM test_table");
            crs.execute();

            crs.moveToInsertRow();
            crs.updateString("str_value", "testValue");
            crs.insertRow();
            crs.moveToCurrentRow();
            crs.acceptChanges(); 
```

SQLException 是从`crs.inertRow()`.
如果表没有自动增量 ID，则 CachedRowSet 可以正常工作。
我怎样才能成功地做到这一点？

其他细节：
我使用以下代码来创建我的表：

```
conn = DriverManager.getConnection(urlString, userName, password);
            Statement stmt = conn.createStatement();
            stmt.execute("CREATE TABLE test_table("
                    + "id INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),"
                    + "str_value VARCHAR(20) NOT NULL,"
                    + "CONSTRAINT primary_key PRIMARY KEY (id))");
            System.out.println("Talbe test_table created."); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-01T15:34:56.980

尝试这个 `crs.updateNull(1); crs.insertRow();`

其中 1 是您的 PK。在 MySQL 中为我工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:25:11.587

[这是使用 CachedRowSet 插入行失败](https://stackoverflow.com/questions/11596022/failed-on-insert-row-using-cachedrowset)的副本。

不幸的是，这是由于[API 定义](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html#insertRow%28%29)而发生的：

> 抛出： SQLException - 如果发生数据库访问错误；结果集并发为 CONCUR_READ_ONLY，在关闭的结果集上调用此方法，如果在光标不在插入行上时调用此方法，或者***如果插入行中的所有不可为空的列都没有被赋予非-空值***

您最好使用`JdbcRowSetImpl`. 如果您删除列的约束，
您只能坚持使用。不幸的是，这也意味着删除 PK 约束。我认为这是一个太大的牺牲，但要么就是这样，要么不是。`CachedRowSet``NOT NULL``id``CachedRowSet`

# android - 免费地图 api 用于创建我自己的移动应用程序

> ID：15807651
> 
> 赞同：-1
> 
> 时间：2013-04-04T09:39:04.513
> 
> 标签：android, ios

我正在为 android 和 IOS 创建 gps 导航应用程序。谁能告诉我我可以免费使用哪个地图 api。

最好的问候，PSP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:47:08.923

您可以使用其中之一：

1.  [谷歌地图](https://developers.google.com/maps/)
2.  [开放层](http://openlayers.org/)
3.  [必应](http://www.microsoft.com/maps/developers/web.aspx)
4.  [诺基亚](http://developer.here.com/)
5.  [传单](http://leafletjs.com/)
6.  [模式地图](http://modestmaps.com/)
7.  [多图](http://polymaps.org/)

其中一些有免费使用的限制 - 例如 - 一年内不超过 xxx 次交易。

# c++ - 指针内联是什么意思？

> ID：15807657
> 
> 赞同：0
> 
> 时间：2013-04-04T09:39:22.790
> 
> 标签：c++, pointers, inline

我在阅读 C++ 程序时遇到了这个问题

```
inline Controller* Get_it() { // ... bla bla 
```

我不明白这是什么意思。这是否暗示了 Get_it 函数的定义？我搜索了定义了 Get_it 函数的文件，但没有找到。我认为语法a * b意味着b是指向结构a对象的指针，但没有结构控制器。虽然在其他地方定义了一个类 Controller。

提前谢谢大家。我是 C++ 新手，我正在努力理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:42:01.770

该函数`Get_it`返回一个`Controller*`. 这是一个指向 a 的指针`Controller`，它是一种必须在翻译单元中高于此点的某处声明的类型。该函数被标记`inline`，这是对编译器的一个提示，它可以内联代码，基本上将函数体复制到每个调用它的地方。

这两件事是分开的。指针不是`inline`，函数是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:43:17.247

关键字`inline`影响它被定义的内容，并且只适用于函数。形式上，它允许（实际上需要）函数的多个定义。这也是对编译器的“提示”，它应该尝试直接在调用站点生成函数的代码，而不是在其他地方生成调用。（正式定义的动机是编译器通常不能生成内联代码，除非它可以访问定义。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:42:13.273

首先，你应该给自己找一本关于 C++ 的好书。其次，这是一个指向`Controller`对象（内存中的类）的指针。它由函数返回，并且函数是内联定义的，这意味着它将被完全复制到调用站点的任何位置。

这个`inline`词是对编译器的建议，在明智的情况下进行内联，但是因为您似乎表明该函数是在类声明中定义的，所以编译器会自动内联。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T09:43:10.313

`inline`关键字不适用于指针（函数的返回值），但适用于函数本身。所以在这里你声明（并定义）一个`inline`返回指针的函数`Controller`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T09:43:54.937

关键字将`inline`方法定义为 inline ¹，无论它在哪里实现。上面的签名意味着该函数`Get_it()`返回一个指向`Controller`对象的指针。函数本身是内联的。

¹内联意味着get方法不是通过vtbl寻址，而是get直接分配在对象的内存中，因此在对象实例上调用方法时没有间接性，但是对象实例本身的内存大小会增加。

# java - 重新启动应用程序时的运行时和空指针异常

> ID：15807659
> 
> 赞同：1
> 
> 时间：2013-04-04T09:39:26.777
> 
> 标签：java, android, nullpointerexception

该应用程序运行良好，但是当我销毁应用程序时出现问题。这是我的错误日志。

```
04-04 12:32:40.529: E/AndroidRuntime(6290): FATAL EXCEPTION: main
04-04 12:32:40.529: E/AndroidRuntime(6290): java.lang.RuntimeException: Unable to instantiate application android.app.Application: java.lang.NullPointerException
04-04 12:32:40.529: E/AndroidRuntime(6290):     at android.app.LoadedApk.makeApplication(LoadedApk.java:482)
04-04 12:32:40.529: E/AndroidRuntime(6290):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3955)
04-04 12:32:40.529: E/AndroidRuntime(6290):     at android.app.ActivityThread.access$1300(ActivityThread.java:127)
04-04 12:32:40.529: E/AndroidRuntime(6290):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1196)
04-04 12:32:40.529: E/AndroidRuntime(6290):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-04 12:32:40.529: E/AndroidRuntime(6290):     at android.os.Looper.loop(Looper.java:137)
04-04 12:32:40.529: E/AndroidRuntime(6290):     at android.app.ActivityThread.main(ActivityThread.java:4441)
04-04 12:32:40.529: E/AndroidRuntime(6290):     at java.lang.reflect.Method.invokeNative(Native Method)
04-04 12:32:40.529: E/AndroidRuntime(6290):     at java.lang.reflect.Method.invoke(Method.java:511)
04-04 12:32:40.529: E/AndroidRuntime(6290):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
04-04 12:32:40.529: E/AndroidRuntime(6290):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
04-04 12:32:40.529: E/AndroidRuntime(6290):     at dalvik.system.NativeStart.main(Native Method)
04-04 12:32:40.529: E/AndroidRuntime(6290): Caused by: java.lang.NullPointerException
04-04 12:32:40.529: E/AndroidRuntime(6290):     at android.app.LoadedApk.initializeJavaContextClassLoader(LoadedApk.java:362)
04-04 12:32:40.529: E/AndroidRuntime(6290):     at android.app.LoadedApk.getClassLoader(LoadedApk.java:305)
04-04 12:32:40.529: E/AndroidRuntime(6290):     at android.app.LoadedApk.makeApplication(LoadedApk.java:474)
04-04 12:32:40.529: E/AndroidRuntime(6290):     ... 11 more 
```

我找到了导致它的视图，但我不明白为什么以及将来如何避免它。

这是我在布局文件中的视图并在代码中对其进行初始化：

```
<LinearLayout
                android:id="@+id/terms_button_layout"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="@dimen/dp10"
                android:background="@drawable/car_component_border"
                android:padding="@dimen/cell_padding_top" >

                <ImageView
                    android:id="@+id/terms_image"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/terms" />

                <TextView
                    android:id="@+id/terms_text"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/terms_of_use"
                    android:textAppearance="?android:attr/textAppearanceLarge" />
            </LinearLayout>

terms = (LinearLayout) findViewById(R.id.terms_button_layout); 
```

我究竟做错了什么？

# android - 在 android 中访问 Google Calendar api

> ID：15807662
> 
> 赞同：0
> 
> 时间：2013-04-04T09:39:30.823
> 
> 标签：android, rest, openssl, google-calendar-api, google-oauth

我是使用 Google API 的新手。我正在尝试检索 Google 日历 API 并向用户显示事件数据。我已经完成了“ [http://samples.google-api-java-client.googlecode.com/hg/calendar-android-sample/instructions.html?r=default](http://samples.google-api-java-client.googlecode.com/hg/calendar-android-sample/instructions.html?r=default) ”，但我对 API 密钥的生成感到震惊。

请告诉我如何使用 openssl 生成 oauth2.0 密钥。

我打算使用**休息网络服务**来使用谷歌日历 API ，所以请帮助我如何使用休息网络服务而不是客户端库来使用谷歌日历 API。

谢谢和问候迷你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:34:28.870

1.  **找出调试证书的位置。**转到 Eclipse：Window--> Preferences-->Android-->Build 文件的位置将位于“默认调试密钥库”或“自定义调试密钥库”的底部。记下这一点。
2.  **找出 Java JDK 的 bin 文件夹的位置。**就我而言，它是：'C:\Program Files\Java\jdk1.7.0_17\bin'。这取决于您拥有的 JDK 版本。

    在那里打开一个命令窗口。（在 Windows 7 上：SHIFT+ 右键单击​​文件夹，然后从上下文菜单中选择“在此处打开命令窗口”。）

3.  **使用 Keystore 工具从您的密钥库中获取 SHA1 指纹。**（见截图）

    ```
    keystore -list keystore 'path-to-your-keystore' 
    ```

    （在我的例子中是：C:\Users\D\.android\debug.keystore）

    输入密钥库的密码，然后记下 SHA1 证书指纹。如果您使用默认的 Android 调试密钥，则密码为：'android.

4.  **根据您包含的链接上的说明，**在 Google apis 控制台上注册应用程序和 SH1 指纹。**'创建另一个客户端 ID' --> 选择 'Installed application' --> 选择 'Android' --> 输入您的应用程序的包名称和上一步中的 SHA1 指纹 --> '创建客户端 ID'**

***   **使用您的发布证书重复步骤 2-4。****

 **就是这样，示例应用程序现在应该可以工作了。祝你好运。

![在此处输入图像描述](https://i.stack.imgur.com/3cZq0.png)**

# yii-extensions - Yii 多选小部件

> ID：15807663
> 
> 赞同：0
> 
> 时间：2013-04-04T09:39:32.980
> 
> 标签：yii-extensions

我有以下代码在 Yii 中生成一个 jquery ech 多选菜单小部件。（埃里克·海因兹多选）。

我已经下载了扩展并解压到扩展文件夹中，我的文件夹结构是 My_lokal_Yii/protected/extensions/EchMultiSelect/EchMultiSelect

这是我的视图文件代码..

```
<?php $this->widget('ext.EchMultiselect.EchMultiselect', array(
'model' => $model,
'dropDownAttribute' => 'color',     
'data' => $list,
'dropDownHtmlOptions'=> array(
    'style'=>'width:378px;',
), 
```

));?>

在 config/main.php 我已将扩展名导入为

```
'import'=>array(
    'application.models.*',
    'application.components.*',
            'application.extensions.EchMultiselect.*'
), 
```

但我收到错误消息，“别名“ext.EchMultiselect.EchMultiselect”无效。确保它指向现有的 PHP 文件并且该文件是可读的。”

我已授予 EchMultiselect 文件的所有权限。

请帮助我..谢谢..我尝试了很多，但没有得到确切的结果..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T15:39:32.103

我的文件夹结构是 My_lokal_Yii/protected/extensions/EchMultiSelect/EchMultiSelect

但在您的 config/main.php 中，有：

```
... 'application.extensions.EchMultiselect.*'

------------------------------------^ 
```

它缺少大写字母“s”，因此缺少扩展名的确切路径/命名，我遇到了同样的“问题”;-)，也许它有帮助......问候

# c++ - C ++如何使类类型更通用并将其用作一种接口

> ID：15807671
> 
> 赞同：2
> 
> 时间：2013-04-04T09:39:49.607
> 
> 标签：c++, class, inheritance, types

我有一个名为“OpenGLCamera”的类，还有另一个需要相机的类，所以目前他有 OpenGLCamera（因为该类被用作一种类型），如下所示：

```
void draw(const OpenGLCamera& camera); 
```

但我希望它更通用，所以我希望它是

```
void draw(const SomeCamera& camera); 
```

这个“SomeCamera”当然应该是OpenGLCamera的指针/引用或其他东西！

我有一个名为“Visual_settings”的类..我听说我应该使用继承来实现这一点......但我不明白如何......如何做到这一点？在 Visual_Settings 类中？使其成为...的基类，然后？

**Visual_Settings.h**

```
#include "OpenGLCamera.h"
class Visual_Settings : public OpenGLCamera
{

}; 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:45:03.663

您正在寻找的泛型类型`SomeCamera`应该`OpenGLCamera`从该类型派生`SomeCamera`。如果你不能这样做，那么你需要使用适配器模式。如果您有其他类型的相机，这将是有意义的。

```
 class SomeCamera
    {
    public:
        virtual void Dowork()=0;
    };

    class OpenGLCamera : public SomeCamera
    {
    public:
        virtual void Dowork() override
        {
            //use camera
        }
    }; 
```

//方法2（桥接模式）：当不能修改OpenGLCamera时：

//***使用适当的构造函数/析构函数并根据需要初始化基类构造函数

```
 class SomeCamera
    {
    public:
        virtual void Dowork()=0;
    };

    class OpenGLCamera 
    {
    public:
       void OpenGlDowork() 
        {
            //use camera
        }
    };

    class OpenGLCameraAdapter : public SomeCamera, OpenGLCamera
    {
    public:
        virtual void Dowork() override
        {
            //use camera
            OpenGlDowork();

    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:43:48.487

1.  `OpenGLCamera`应该继承自`SomeCamera`.
2.  `SomeCamera`应该有接口，它将在`OpenGLCamera`.

# iphone - 如何将笔尖从静态库加载到主项目？

> ID：15807677
> 
> 赞同：2
> 
> 时间：2013-04-04T09:40:03.930
> 
> 标签：iphone, ios, objective-c

我制作了一个包含一些笔尖的静态库。当我尝试加载这些 nib 文件时，我得到**Could not load NIB in bundle: 'NSBundle**。如果有人知道如何做到这一点，那将非常有帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T10:10:31.473

现有答案：[您可以从 iPhone 上的静态库中引用 Xib 文件吗？](https://stackoverflow.com/questions/707429/can-you-reference-xib-files-from-static-libraries-on-the-iphone)

不，你不能用这种方式，

静态库是包含类的文件。它不包含其他文件，它本质上是一个编译代码的数据库。即使可以将 xibs 的数据放在静态库中，但 Xcode 不会识别它在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:53:39.563

当您使用主包中的 nib 分配控制器时，它会初始化它。

[initWithNibName:@"Your nib.." bundle:[NsBundle MainBundle]]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:53:49.470

如果您没有获得链接或没有被主项目推荐，请按照以下步骤检查一次，并确保您没有遗漏任何内容

1.  转到您的 xib（即 MyViewController）
    1.  打开文件检查器
    2.  选择文件的所有者
    3.  从文件的检查器中选择第三个选项卡
    4.  进入自定义类部分
    5.  检查班级名称

# python - Python：有没有办法检测方法调用中缺少的（）？

> ID：15807685
> 
> 赞同：4
> 
> 时间：2013-04-04T09:40:23.157
> 
> 标签：python

我想调用一个方法`f()`，但一不小心我就说了`f`。Python3 将其误认为是对不存在的变量进行了无意义的评估，因此在没有任何通知的情况下跳过了我想要的方法调用。有没有办法覆盖此默认行为并获取错误消息？是通过禁止标识符作为方法和变量的双重使用，还是通过禁止仅由标识符组成的无意义语句？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T09:56:34.713

这是有效的语法，所以 Python 不会抱怨。您可能需要考虑其他一些工具，例如 pylint。Pylint 会报告：

```
W:  4,0: Statement seems to have no effect 
```

如果您只是这样做：

```
f 
```

代替：

```
f() 
```

唯一的问题是 pylint 可以开箱即用地抱怨很多。确保创建一个兼容您的风格的配置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T09:47:06.260

```
In [1]: def f():
   ...:     print("This is some random function")
   ...:     return

In [2]: a = f

In [3]: a()
This is some random function

In [4]: somedict = {"call_something": f, "call_another": a}

In [5]: somedict["call_something"]()
This is some random function

In [6]: f
Out[6]: <function __main__.f> 
```

使用函数而不调用它是完全有效的语法，并且正如我刚刚展示的那样具有多种用途。不是`a meaningless evaluation of a nonexisting variable`，因为函数本质上*是变量。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T09:49:38.250

确保您的代码执行应有的功能的常用方法是编写[单元测试](http://docs.python.org/3.3/library/unittest.html)。如果您有良好的测试覆盖率，这种类型的错误就不会溜走。

传递对函数/方法的引用在 Python 中很常见（并且很有用），因此您不应该禁用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T10:08:37.730

唉，没有。Python 没有任何严格的警告模式（参见 Perl 和 Ruby）。此外，这些行是有效的陈述，因此警告它们是不公平的。

不过，您可以编写自己的代码检查器来查找这样的行。搜索没有任何标点符号的单个单词并且是 Python 标识符（不是关键字，例如`break`）的行

# haskell - Haskell 继承类型类

> ID：15807687
> 
> 赞同：10
> 
> 时间：2013-04-04T09:40:25.033
> 
> 标签：haskell, ghc, typeclass

假设我有以下课程：

```
class P a where
  nameOf :: a -> String 
```

我想声明这个类的所有实例都是自动的`Show`。我的第一次尝试如下：

```
instance P a => Show a where
  show = nameOf 
```

我昨天第一次尝试这种方式导致了语言扩展的兔子沃伦：我首先被告知要打开灵活实例，然后是不可判定实例，然后是重叠实例，最后得到关于重叠实例声明的错误。我放弃并返回重复代码。然而，从根本上来说，这似乎是一个非常简单的需求，应该很容易满足。

所以，两个问题：

1.  有没有一种我刚刚错过的简单的方法来做到这一点？
2.  为什么会出现重叠实例问题？我知道为什么我可能需要`UndecidableInstances`，因为我似乎违反了帕特森条件，但这里没有重叠的实例：`P`甚至没有 的实例。为什么类型检查器认为有多个实例`Show Double`（在这个玩具示例中似乎就是这种情况）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T15:29:18.407

您会收到重叠实例错误，因为您的某些实例`P`可能有其他实例，`Show`然后编译器将无法决定使用哪些实例。如果你有一个`P`for的实例`Double`，那么你就得到了两个`Show`for 的实例`Double`：你的一个通用实例和一个已经在 Haskell 的基础库中声明的实例。@augustss 在对您问题的评论中正确说明了如何触发此错误。有关更多信息，请参阅[规格](http://www.haskell.org/ghc/docs/7.0.1/html/users_guide/type-class-extensions.html#instance-overlap)。

如您所知，没有`UndecidableInstances`. 当您启用该标志时，您必须了解您正在接管编译器的责任，以确保不会出现任何冲突的实例。`Show`这意味着，当然，您的库中不能有任何其他的生产实​​例。这也意味着您的库不会导出`P`该类，这将消除库用户声明冲突实例的可能性。

如果您的案例与上述内容有某种冲突，则这是一个可靠的迹象，表明它一定有问题。而事实上有...

* * *

你想要达到的目标首先是不正确的。您遗漏了关于类型类的几个重要点，将其与流行的 OO 语言`Show`的方法等构造区分开来：`toString`

1.  来自[Show 的黑线鳕](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t%3aShow)：

    > show 的结果是一个仅包含常量的语法正确的 Haskell 表达式，假设在声明类型的点处有效的固定性声明。它仅包含在数据类型、括号和空格中定义的构造函数名称。当使用带标签的构造函数字段时，还使用大括号、逗号、字段名称和等号。

    换句话说，声明一个`Show`不产生有效 Haskell 表达式的实例本身是不正确的。

2.  `Show`鉴于上述情况，声明类型何时允许简单地派生它的自定义实例是没有意义的。

3.  当一个类型不允许派生它（例如，GADT）时，通常您仍然必须坚持使用特定于类型的实例才能产生正确的结果。

因此，如果您需要自定义表示功能，则不应使用`Show`它。只需声明一个自定义类，例如：

```
class Repr a where
  repr :: a -> String 
```

并负责任地处理实例声明。

# c# - VS 2012 express版，windows phone 8，数据库

> ID：15807691
> 
> 赞同：2
> 
> 时间：2013-04-04T09:40:40.440
> 
> 标签：c#, database, visual-studio-2012, windows-phone-8

我必须开发一个带有本地数据库的 windows phone 8 应用程序，我想知道我们是否可以在 vs 2012 express 版中使用 SQLite 或 SQL Server Compact Edition 创建一个本地数据库，我已经安装了这个版本，但我找不到服务器浏览器！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T23:36:23.733

尝试使用 SQL Server Compact Toolbox

# c# - WCF FaultException 命名冲突

> ID：15807696
> 
> 赞同：0
> 
> 时间：2013-04-04T09:40:57.567
> 
> 标签：c#, wcf, svcutil.exe

我有 2 个 WCF 服务（不同的项目）共享一个定义了 MyExceptions 的类库。

两种服务都使用：

```
[OperationContract]
[FaultContract(typeof(MyException))]
void op(); 
```

当我在客户端项目中添加两个引用时，我得到：

> 类型 namespace.MyException 已经定义了一个名为 MyException 且具有相同参数类型的成员。

基本上这些类具有相同的名称，因此构造函数被定义了两次。关于如何更改异常命名空间的任何想法？

请注意：

*   我正在使用 svcutils
*   命名空间选项不起作用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:49:38.527

除了命名空间建议之外，还可以编辑 SVCUTIL 生成的代理代码并删除 MyException 类的重复代码。

步骤： 1\. 为 Service1 创建一个代理文件。2.为Service2创建一个代理文件。3\. 将代理添加到客户端。4\. 编译，它给出了 MyException 已经被声明的错误。5\. 编辑任一代理并删除 MyException 类代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:57:50.873

使用创建代理[`svcutil /reference:SharedLibrary.dll`](http://blogs.msdn.com/b/youssefm/archive/2009/10/09/reusing-types-in-referenced-assemblies-with-svcutil-s-r-switch.aspx)。这种方式`svcutil`不会生成它在 中找到的类`SharedLibrary.dll`，因此客户端使用程序集中的类定义。

如果您还没有这样做，请不要忘记在客户端项目中添加对 DLL 的引用。

# ios5 - 在 cocos2d 中使用加速度计使球在同心圆内移动的逻辑是什么

> ID：15807698
> 
> 赞同：0
> 
> 时间：2013-04-04T09:41:00.210
> 
> 标签：ios5, cocos2d-iphone

我想知道使用 cocos2d 中的加速度计使精灵球在同心圆内移动的最佳方法。我使用圆的方程来查看精灵是否位于圆内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:02:08.290

根据加速度计输入找到精灵的下一个位置，检查它是否在您的区域内，如果是，更新精灵的位置。

# php - 按数字对循环内的php数组进行排序

> ID：15807700
> 
> 赞同：-1
> 
> 时间：2013-04-04T09:41:04.347
> 
> 标签：php, arrays, loops

```
<?php
foreach ($jsonObj as $items) {
 foreach ($items["items"] as $itemlist){ 
// $itemlist['position']; I want them to echo in that order
echo $itemlist['name'];
}
}
?> 
```

我有一个循环遍历的数组。在该数组中有名称和顺序。我想按数字顺序显示它们，我怎样才能让它首先打印出数字最小的项目列表，然后是第二个等等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:50:37.107

您可以为此使用`usort`with 。`cmp_function`试试这个功能：

```
function compare_position($a, $b) {
    return $a['position'] - $b['position'];
} 
```

然后当你遍历数组时：

```
foreach ($jsonObj as $items) {
  usort($items['items'], "compare_position");
  foreach ($items["items"] as $itemlist){ 
       echo $itemlist['position']; 
       echo $itemlist['name'];
  }
} 
```

更多关于`usort`可以在这里找到[http://php.net/manual/en/function.usort.php](http://php.net/manual/en/function.usort.php)

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:53:54.270

您需要先准备一个要排序的位置数组。排序然后按引用排序，允许您第二次循环遍历它，但这次按`array_multisort()`.

```
<?php
foreach($jsonObj as $items) {
    foreach($items['items'] as $key => $itemlist) {
        $positions[$key] = $itemlist['position'];
        $names[$key] = $itemlist['name'];
    }
    array_multisort($positions, SORT_ASC, $items['items']);
    foreach($items['items'] as $itemlist) {
        echo $itemlist['name'], "<br />";
        // Now in asc order of positions
    }
} 
```

这样做的好处是，如果出现您想要排序的其他属性，您可以这样做。例如，如果两个人的“职位”可能相同，那么您可以按他们的姓名等按字母顺序排序。

键盘上的完整解决方案，比较了两个答案：http: [//codepad.viper-7.com/5yJ72S](http://codepad.viper-7.com/5yJ72S)

# ruby-on-rails - 使用 Rails 资产管道的用户自定义主题支持

> ID：15807701
> 
> 赞同：1
> 
> 时间：2013-04-04T09:41:11.920
> 
> 标签：ruby-on-rails, themes, asset-pipeline, handlebars.js, templating

我有一个 Rails 应用程序，它允许用户轻松创建自己的网站，但它们共享相同的页面结构。

我计划将我的经典 Rails 视图切换为模板语言，例如液体或车把。

目标是我的用户可以上传他们自己版本的模板和 css 来完全自定义他们网站的外观。

*工作流程示例：*

1.  *用户上传包含模板和 Css 文件的主题文件夹*
2.  *他们的网站会自动使用这个新的模板和设计*

是否有可能做到这一点并继续利用 Rails Assets 管道？

非常感谢你的回答 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T03:35:34.840

这可能是您可以尝试的：[http](http://www.krautcomputing.com/blog/2012/03/27/how-to-compile-custom-sass-stylesheets-dynamically-during-runtime/) ://www.krautcomputing.com/blog/2012/03/27/how-to-compile-custom-sass-stylesheets-dynamically-during-runtime/ 。

我在 Rails 3.2x 项目中使用过它，它工作正常，但我很难让它在不同的项目中工作（稍微修改过的 Rails 4 项目）。

这是关于使用 Sprockets::StaticCompiler 类动态编译 css 的旧文章。

# android - 在运行显示 UnsatisfiedLinkError 的增强现实应用程序时

> ID：15807705
> 
> 赞同：2
> 
> 时间：2013-04-04T09:41:30.707
> 
> 标签：android, android-emulator, augmented-reality

我正在做一个增强现实应用程序。这里我有 Java Eclipse SDK 。所以我没有更改 Eclipse SDK 和 Java 中的任何内容。我也没有为 SDK 设置任何路径，我只是下载并安装了 cygwin，然后我为此设置了路径。我再次安装了 vuforia.exe 文件并将 Eclipse 首选项中的路径设置为 vuforia 并再次下载 NDK。我只是提取那些 ndk 并复制到 sdk 根文件夹中，然后将路径设置为 ndk。现在我已经下载了 vuforia 示例应用程序，并将所有应用程序复制到示例文件夹中。在 Eclipse 中，我刚刚导入了`ImageTarget`应用程序，它没有显示任何错误，但是在单击开始按钮时运行该应用程序后，我收到了这个错误：

> java.lang.UnsatisfiedLinkError: getOpenGlEsVersionNative

我按顺序检查了 QCAR jar 并导出并清理了我的应用程序，但是我遇到了同样的异常，有人可以建议我哪里出错了吗？

ImageTargets.class：

```
public class ImageTargets extends Activity
{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:37:19.400

`ndk-build`您应该通过从 cygwin 命令行运行命令来构建本机代码 (C++) 。在安装目录中打开`Cygwin.bat`以访问命令行并将目录更改为`ImageTarget`项目的根文件夹并运行以下命令：

```
ndk-build 
```

如果它成功构建了本机代码，您应该`lib`会在 Eclipse 中看到一个文件夹添加到您的项目中。现在，您可以构建您的 APK 并在您的设备上运行它。

或者，您可以在每次构建项目之前在 Eclipse 中设置自动 NDK 构建。所以你不需要手动做。请参阅[在 Eclipse 中设置自动 NDK 构建](http://mobilepearls.com/labs/ndk-builder-in-eclipse/)。

# python - 使用python将图像放置在Windows桌面上的特定位置

> ID：15807708
> 
> 赞同：0
> 
> 时间：2013-04-04T09:41:44.550
> 
> 标签：python, windows, image

我希望使用 python 在我的 Windows 7 桌面上的特定位置放置图像（比如 jpg 或 bmp）。我还希望能够使用鼠标拖动它，并让 python 代码存储它的最终位置坐标。因此，当 Windows 重新启动时（将 python 代码配置为在启动时运行），它会读取存储的位置并将图像放回其先前的位置。

这可能吗？如果是的话，有人可以提供一些关于如何做的建议，因为我的 python 经验非常有限吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:28:50.133

您需要使用[LVM_SETITEMPOSITION](http://msdn.microsoft.com/en-us/library/bb761192%28VS.85%29.aspx)在桌面上排列图标。

有一个类似的问题：

*   [如何以编程方式操作 Windows 桌面图标位置？](https://stackoverflow.com/questions/131690/how-can-i-programmatically-manipulate-windows-desktop-icon-locations)
*   [win32编程](http://www.daniweb.com/software-development/python/threads/173093/win32-programming)

Python 不是这项工作的最佳选择，但如果需要，请尝试查看 - commctrl、win32gui 和 pywin32 库

# javascript - 数组初始化器在 ajax 响应中太大

> ID：15807709
> 
> 赞同：1
> 
> 时间：2013-04-04T09:41:48.727
> 
> 标签：javascript, jquery, ajax

我使用 jquery 从服务器获取数据字节的 ajax 请求。但是当我当时从服务器获得响应时，出现以下错误。 **数组初始化程序太大** 所以有什么办法可以找到解决方案。我有以下代码。

```
 $.ajax({
            type: 'POST',
            url: 'test',
            contentType: 'application/jsonp',
            crossdomain: true,
            dataType: "text",           
            dataType: "jsonp",
            success: function (txt) {                   
            }
        }); 
```

# php - 打开购物车 tag do not show site name on new controller</h1> <div id="body"><p>I've created a new controller along with new template and language model to display custom registration page for new user</p> <p>The problem is

> ID：15807713
> 
> 赞同：0
> 
> 时间：2013-04-04T09:42:04.787
> 
> 标签：php, opencart

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:17:44.713

如果您想将站点名称添加到站点范围内的商店标题中，您可以使用一个简单的小技巧来完成此操作。打开`system/library/document.php`发现如下代码

```
$this->title = $title; 
```

在这一行之后，放

```
global $config;
if($this->title != $config->get('config_title')) $this->title .= ' - ' . $config->get('config_title'); 
```

这将使所有标题都具有，`Page Title - Site Name`除了标题只是`Site name`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:23:37.173

从我检查过的所有代码中，我几乎可以肯定网站名称没有添加到文档标题中（主页除外）......

因此，如果您在`Register Account`页面标题中看到站点名称，那就有点奇怪了……控制器的代码如下

```
$this->document->setTitle($this->language->get('heading_title')); 
```

这意味着 - 只有语言文件中存在的字符串被设置为页面标题。

另外，从`Document`课堂上：

```
public function setTitle($title) {
    $this->title = $title;
}

public function getTitle() {
    return $this->title;
} 
```

意味着只有`Document`类的东西是返回的，没有在任何地方添加站点名称......

您使用的是什么 OC 版本？您通过什么浏览器查看您的网站？这也可能是浏览器的事情......

# jquery - 在 Javascript 中，如何检测 keydown 和 keyup 事件中的字符大小写（大写/小写）？

> ID：15807715
> 
> 赞同：4
> 
> 时间：2013-04-04T09:42:10.910
> 
> 标签：jquery, case-sensitive, keydown, keyup

我需要检测事件 keydown 和 keyup 中字符的大小写

```
$('body').keydown(
    function(event) {
        var charCode = (event.which) ? event.which : event.keyCode;
        var char = String.fromCharCode(charCode);
        console.log(char + " is down pressed");
    }
);

$('body').keyup(
    function(event) {
        var charCode = (event.which) ? event.which : event.keyCode;
        var char = String.fromCharCode(charCode);
        console.log(char + " is up pressed");
    }
); 
```

您可以在这里尝试：http: [//jsfiddle.net/8dqwW/](http://jsfiddle.net/8dqwW/)
即使没有按下大写锁定，它也总是返回大写字母。

在这两个事件中，我如何检测用它的大小写的字母，无论是大写还是小写？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-10T15:26:19.540

`keyup`并且`keydown`无法检测到大写/小写。
只能`keypress`这样！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-18T19:34:49.607

# 使用`event.key`和现代的 JS！

*没有数字代码*了。您可以直接检查密钥。例如`"Enter"`、`"LeftArrow"`、`"r"`或`"R"`。`"keypress"`, `"keydown"`, 或`"keyup"`将全部工作。

```
document.addEventListener("keypress", function (event) {
    const key = event.key;
    const keyLower = key.toLowerCase();

    // Check it is a char between A-Z, not numbers, etc.
    if (key.length !== 1 || keyLower < "a" || keyLower > "z") {
        return;
    }

    // Check for case
    const isUpperCase = (key !== keyLower);
}); 
```

你可以用正则表达式简化它

```
const key = event.key;
const isLowerCaseLetter = (/[a-z]/.test(key));
const isUpperCaseLetter = (/[A-Z]/.test(key)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T09:46:00.810

如果字符转换为大写后仍然相同，则以大写开头：

```
if (fromCharCode(e.which).toUpperCase() == fromCharCode(e.which)) 
```

随着 jQuery 规范化`e.which`，并且`keypress`事件的工作方式略有不同，我会做类似的事情：

```
$('body').on({
    keypress: function(e) {
        var char = String.fromCharCode(e.which),
            isUpper = char == char.toUpperCase();
        console.log(char + ' is pressed' + (isUpper ? ' and uppercase' : ''))
    }
}); 
```

[**小提琴**](http://jsfiddle.net/t8Ybs/2/)

# asp.net - 在 Visual Studio Page Inspector 中未从服务器返回任何映射数据

> ID：15807716
> 
> 赞同：2
> 
> 时间：2013-04-04T09:42:11.427
> 
> 标签：asp.net, visual-studio-2012, page-inspector

要调试我的网络应用程序，我需要在特定域上运行它。为此，我在我的主机文件中创建了域映射，所有映射到 127.0.0.1。我的网站在我的本地 IIS 8 中运行。

但是当我尝试在应用程序上运行 Page Inspector 时，我收到一条错误消息，指出“没有从服务器返回映射数据”。

我已经在项目属性中设置了所有的调试 URL，当我按下 F5 时站点运行良好。

如何让 Page Inspector 在非本地主机 URL 上工作（或者更确切地说，如何让我的 IIS 提供 Page Inspector 需要的映射数据）？

# jquery - 无法在 ASP.NET MVC4 中捆绑自定义 jquery 脚本

> ID：15807720
> 
> 赞同：0
> 
> 时间：2013-04-04T09:42:32.477
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4, bundling-and-minification

我已经使用 jquery 创建了一些基本脚本，并且当放置在我的一个 MVC 视图中的标记下方时，它可以正常工作。我想将这些脚本移动到 Scripts 文件夹中的单独文件中，因此我创建了一个名为“CustomJquery.js”的文件并将其放置在 Scripts 文件夹中。我在 'BundleConfig.cs' 中为它创建了一个包，但是当使用 @Scripts.Render("~/bundles/CustomJquery") 从我的视图调用时，我的脚本不再工作。我什至尝试将它们放在“_Layout.cshtml”中，但仍然没有运气。请在下面查看我的代码。任何帮助将不胜感激。谢谢

**脚本文件夹中的 CustomJquery.js**

```
$("#Button").click(function () {
alert("hello");
}); 
```

**索引.cshtml**

```
<input id="Button" type="submit" value="Test" />

@Scripts.Render("~/bundles/CustomJquery") 
```

**BundleConfig.cs**

```
 bundles.Add(new ScriptBundle("~/bundles/CustomJquery").Include(
                "~/Scripts/CustomJquery.js")); 
```

**更新**

是的，我可以在 Google chrome 工具的“来源”选项卡中看到我的“CustomJquery.js”。

根据“元素”选项卡，我也可以在标记中看到脚本 src

```
<script src="/Scripts/CustomJquery.js"></script>
</section>
</div> 
```

请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T09:55:10.743

您是否在 index.cshtml 页面中包含了 jquery 库。IE：`<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>`

.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:47:07.643

首先要做的是使用 Web 开发人员工具在 Chrome 之类的工具中查看页面。检查源代码并确保您在代码中看到脚本并检查网络选项卡并确保您没有收到任何 404 错误。您还应该能够单击以查看 js 的内容，以确保它是您所期望的。还要检查您是否在控制台中收到任何脚本错误。

假设您已经在其他地方使用捆绑包，最可能的问题是拼写错误、路径错误或复制和粘贴时添加/丢失的杂散字符。

如果您可以按照上述步骤操作，并且如果它不能帮助您解决问题，请提供您所看到的更多详细信息，包括任何错误，以便我可以进一步帮助您。

**更新**

我也建议使用

```
console.log("click fired!"); 
```

而不是警报并检查消息是否出现在控制台日志中。使用警报可能会导致问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T11:17:11.803

在通过查看源代码或使用 IE 开发工具、Firebug 或 Chrome 开发工具确认您的文件被拾取后，您是否还可以检查您是否拥有“就绪处理程序”，如下所示：

```
$(function() {
     // Handler for .ready() called.
    }); 
```

在您的 CustomJquery.js 文件中，您还需要确保引用了 jquery。

使用 Firefox，以及一个名为 firebug 的工具 ![在此处输入图像描述](https://i.stack.imgur.com/ASJbl.jpg)

切换到脚本![在此处输入图像描述](https://i.stack.imgur.com/DUQrQ.jpg)并单击编辑，您应该在那里看到您的脚本，在左侧添加一个断点，如果您在控制台中看到错误，则查看它是否被命中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T13:37:12.717

您的捆绑包名称可能与我几天前遇到的问题相同。

由于您要包含的脚本位于 Scripts 文件夹中，因此您的捆绑包名称需要为“~/Scripts/ **WHATEVERYOUWANTHERE** ”

# ajax - Drupal 7 form_alter 使用 SQL IN 数组打破了 ajax 表单

> ID：15807721
> 
> 赞同：1
> 
> 时间：2013-04-04T09:42:33.660
> 
> 标签：ajax, drupal, drupal-7

我的模块中有下一个代码`form_alter`：

```
$query = db_select( 'field_data_field_product_photos', 'p' );
$query->addField( 'p', 'entity_id', 'pid' );
$query->addField( 'f', 'uri', 'uri' );
$query->join('file_managed', 'f', 'p.field_product_photos_fid=f.fid' );
$query->condition('p.entity_id', $products_nids, 'IN' );
$query->condition('p.delta', 0, '=' );
$result = $query->execute(); 
```

但是当表单点击其他电台时，ajax返回错误

![在此处输入图像描述](https://i.stack.imgur.com/dDEwU.png)

`$products_nids`就像数组一样`array(10,14)`。如果地方`array(10,14)`而不是`$products_nids`它会正常工作。但`$products_nids`动态生成。

有人知道该怎么做吗？

PS错误一定是`field_data_field_product_photos`，不是`field_revision_field_product_photos`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:16:10.083

看看生成的 SQL：

```
...WHERE (p.entity_id IN ())... 
```

很简单，`$product_nids`在您将它传递给查询时它是空的，这会产生如上所述的无效 SQL。为了避免这种情况，要么修复任何阻止`$product_nids`正确填充的错误，要么添加一些错误检查：

```
if (!empty($product_nids)) {
  $query->condition('p.entity_id', $products_nids, 'IN' );
} 
```

# c++ - 如何创建从CWnd POP UP Window派生的？

> ID：15807725
> 
> 赞同：0
> 
> 时间：2013-04-04T09:42:40.790
> 
> 标签：c++, mfc, cwnd

我通过类向导从 CWnd 创建了类 CSurfaceWnd。我试图创建窗口但出现错误。这是我的创建代码：

```
 if(!m_pSurfaceWnd)
    {
        CString m_NameClass = AfxRegisterWndClass(
            CS_VREDRAW | CS_HREDRAW,
            ::LoadCursor(NULL, IDC_ARROW),
            (HBRUSH) ::GetStockObject(WHITE_BRUSH),
            ::LoadIcon(NULL, IDI_APPLICATION));
    m_pSurfaceWnd = new CSurfaceWnd;

    CRect rcTemp;
    GetWindowRect(rcTemp);

    VERIFY(m_pSurfaceWnd->CreateEx(WS_EX_CLIENTEDGE, m_NameClass, NULL, WS_POPUP | WS_VISIBLE, rcTemp, mpWnd, 1));

    //DWORD dw =GetLastError();

    m_pSurfaceWnd->ShowWindow(SW_SHOW);
}
else
    m_pSurfaceWnd->ShowWindow(SW_SHOW); 
```

你怎么能看到我正在创建弹出窗口，这就是我使用 CreateEx 的原因。我已经注册了类，在调试模式下，我在 m_NameClass 中看到了许多新类。但是 CreateEx 返回 false。请帮我。可能您会看到一些我看不到的错误。请不要将我发送到 MSDN 我已经阅读了很多次。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:52:42.140

首先，您必须检查 mpWnd 是否为有效对象。

```
BOOL isValid = ::IsWindow(mpWnd->GetSafeHwnd()); 
```

如果 mpWnd 是无效值，由于 WS_POPUP 样式，CreateEx 函数将返回 0。

# android - Android 通过意图播放视频

> ID：15807729
> 
> 赞同：4
> 
> 时间：2013-04-04T09:42:51.210
> 
> 标签：android, android-intent, android-videoview, launching-application

我创建了自己的媒体播放器应用程序并安装在设备中。我创建了一个具有单个按钮的其他应用程序，只要我单击按钮。我应该提供一个选项，它应该在哪个播放器中播放视频。

我的媒体播放器应用程序的清单文件：

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/NoActionBar" >
    <activity
        android:name="com.example.player.MainPlayerActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="rtsp" />
         </intent-filter>
         <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="http" />
            <data android:scheme="https" />
            <data android:scheme="content" />
            <data android:scheme="file" />
            <data android:mimeType="video/mpeg4" />
            <data android:mimeType="video/mp4" />
            <data android:mimeType="video/3gp" />
            <data android:mimeType="video/3gpp" />
            <data android:mimeType="video/3gpp2" />
            <data android:mimeType="video/webm" />
            <data android:mimeType="video/avi" />
            <data android:mimeType="application/sdp" />
            <data android:mimeType="video/x-ms-wmv" />
            <data android:mimeType="video/x-msvideo" />
            <data android:mimeType="video/mpeg" />
         </intent-filter>
         <intent-filter>
            !-- HTTP live support -->
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="http" />
            <data android:mimeType="audio/x-mpegurl" />
            <data android:mimeType="audio/mpegurl" />
            <data android:mimeType="application/vnd.apple.mpegurl" />
            <data android:mimeType="application/x-mpegurl" />
         </intent-filter>
    </activity>
</application> 
```

提出意图的示例代码：

```
public class MainActivityHsl extends Activity {
private String url = "/sdcard/vid.mp4";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_activity_hsl);

    Button button = (Button) findViewById(R.id.button1);

    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View view) {

            playVideo(MainActivityHsl.this, Uri.parse("/sdcard/vid.mp4"), "SUKESH");
        }
    });
} 

public void playVideo(Activity activity, Uri uri, String title) {

    Intent intent = new Intent(Intent.ACTION_VIEW)
    .setDataAndType(uri, "video/mp4");
    intent.putExtra(Intent.EXTRA_TITLE, title);
    activity.startActivity(intent);
}} 
```

日志猫：

> E/AndroidRuntime(1552): android.content.ActivityNotFoundException: 没有找到处理 Intent { act=android.intent.action.VIEW dat=/sdcard/vid.mp4 typ=video/mp4 (has extras) } E/AndroidRuntime (1552): 在 android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1512) E/AndroidRuntime(1552): 在 android.app.Instrumentation.execStartActivity(Instrumentation.java:1384) E/AndroidRuntime(1552): 在 android .app.Activity.startActivityForResult(Activity.java:3190) E/AndroidRuntime(1552): 在 android.app.Activity.startActivity(Activity.java:3297) E/AndroidRuntime(1552): 在 com.example.videohsltest.MainActivityHsl .playVideo(MainActivityHsl.java:54) E/AndroidRuntime(1552): 在 com.example.videohsltest.MainActivityHsl$1.onClick(MainActivityHsl.java:30) E/AndroidRuntime(1552): 在 android.view.View。performClick(View.java:3511) E/AndroidRuntime(1552): 在 android.view.View.onKeyUp(View.java:6073) E/AndroidRuntime(1552): 在 android.widget.TextView.onKeyUp(TextView.java: 5586) E/AndroidRuntime(1552): 在 android.view.KeyEvent.dispatch(KeyEvent.java:2575) E/AndroidRuntime(1552): 在 android.view.View.dispatchKeyEvent(View.java:5500) E/AndroidRuntime( 1552): 在 android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246) E/AndroidRuntime(1552): 在 android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246) E/AndroidRuntime(1552): 在 android. view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246) E/AndroidRuntime(1552): 在 android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246) E/AndroidRuntime(1552): 在 com.android.internal.policy。 impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1879) E/AndroidRuntime(1552): 在 com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1361) E/AndroidRuntime(1552): 在 android.app.Activity.dispatchKeyEvent(Activity.java: 2324) E/AndroidRuntime(1552): 在 com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1806) E/AndroidRuntime(1552): 在 android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl. java:3327) E/AndroidRuntime(1552): 在 android.view.ViewRootImpl.handleFinishedEvent(ViewRootImpl.java:3300) E/AndroidRuntime(1552): 在 android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2460) E/ AndroidRuntime(1552): 在 android.os.Handler.dispatchMessage(Handler.java:99) E/AndroidRuntime(1552): 在 android.os.Looper.loop(Looper.java:137) E/AndroidRuntime(1552): 在安卓应用程序。ActivityThread.main(ActivityThread.java:4424) E/AndroidRuntime(1552): 在 java.lang.reflect.Method.invokeNative(Native Method) E/AndroidRuntime(1552): 在 java.lang.reflect.Method.invoke(Method .java:511) E/AndroidRuntime(1552): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) E/AndroidRuntime(1552): 在 com.android.internal.os.ZygoteInit .main(ZygoteInit.java:551) E/AndroidRuntime(1552): 在 dalvik.system.NativeStart.main(Native Method) W/ActivityManager(203): 强制完成活动 com.example.videohsltest/.MainActivityHslinternal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) E/AndroidRuntime(1552): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) E/AndroidRuntime(1552): at dalvik.system.NativeStart.main(Native Method) W/ActivityManager(203)：强制完成活动 com.example.videohsltest/.MainActivityHslinternal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) E/AndroidRuntime(1552): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) E/AndroidRuntime(1552): at dalvik.system.NativeStart.main(Native Method) W/ActivityManager(203)：强制完成活动 com.example.videohsltest/.MainActivityHsl

任何人都可以帮我解决这个问题，我无法使用弹出对话框启动完整的操作。可能是什么原因。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T09:53:54.610

这就是[海豚播放](http://code.google.com/p/dolphin-player/source/browse/p/AndroidManifest.xml)器的做法。

```
 <activity android:name="com.example.player.MainPlayerActivity"" android:label="@string/app_name"
                android:configChanges="orientation|keyboardHidden"
                    android:screenOrientation="landscape">
                    <intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data android:mimeType="video/*"  />
    <data android:mimeType="application/x-quicktimeplayer*" />
    <data android:mimeType="application/x-mpeg" />
    <data android:mimeType="application/vnd.dvd*" />
    <data android:mimeType="application/vnd.3gp*" />
    <data android:mimeType="application/3gpp*" />
    <data android:mimeType="application/vnd.rn-realmedia*" />
    <data android:mimeType="application/mp4*" />
    <data android:mimeType="application/mpeg*" />
    <data android:mimeType="application/sdp" />
    <data android:mimeType="application/vnd.wap.mms-message" />

    <data android:pathPattern=".*mkv" />
    <data android:pathPattern=".*MKV" />

    <data android:pathPattern=".*flv" />
    <data android:pathPattern=".*FLV" />

    <data android:pathPattern=".*wmv" />
    <data android:pathPattern=".*WMV" />

    <data android:pathPattern=".*ts" />
    <data android:pathPattern=".*TS" />

    <data android:pathPattern=".*rm" />
    <data android:pathPattern=".*RM" />

    <data android:pathPattern=".*rmvb" />
    <data android:pathPattern=".*RMVB" />

    <data android:pathPattern=".*webm" />
    <data android:pathPattern=".*WEBM" />

    <data android:pathPattern=".*mov" />
    <data android:pathPattern=".*MOV" />

    <data android:pathPattern=".*mpg" />
    <data android:pathPattern=".*MPG" />

    <data android:pathPattern=".*dat" />
    <data android:pathPattern=".*DAT" />

    <data android:pathPattern=".*vstream" />
    <data android:pathPattern=".*VSTREAM" />

    <data android:pathPattern=".*mpeg" />
    <data android:pathPattern=".*MPEG" />

    <data android:pathPattern=".*f4v" />
    <data android:pathPattern=".*F4V" />

    <data android:pathPattern=".*avi" />
    <data android:pathPattern=".*AVI" />

    <data android:pathPattern=".*ogv" />
    <data android:pathPattern=".*OGV" />

    <data android:pathPattern=".*dv" />
    <data android:pathPattern=".*DV" />

    <data android:pathPattern=".*divx" />
    <data android:pathPattern=".*DIVX" />

    <data android:pathPattern=".*vob" />
    <data android:pathPattern=".*VOB" />

    <data android:pathPattern=".*asf" />
    <data android:pathPattern=".*ASF" />

    <data android:pathPattern=".*3gp" />
    <data android:pathPattern=".*3GP" />

    <data android:pathPattern=".*3gpp" />
    <data android:pathPattern=".*3GPP" />      

    <data android:pathPattern=".*h264" />
    <data android:pathPattern=".*H264" />

    <data android:pathPattern=".*h261" />
    <data android:pathPattern=".*H261" />

    <data android:pathPattern=".*h263" />
    <data android:pathPattern=".*H263" />
    </intent-filter>
    </activity> 
```

您可以删除播放器不支持的不必要的媒体格式。

# mysql - 删除太多 MySQL 数据库后如何修复 XAMPP？

> ID：15807731
> 
> 赞同：5
> 
> 时间：2013-04-04T09:43:00.953
> 
> 标签：mysql, apache, phpmyadmin, xampp

我已经愚蠢到使用 PHPMyAdmin 删除 XAMPP 中的太多数据库，现在我的网站`localhost`不再正常运行。请看这个主要错误的截图 ![在此处输入图像描述](https://i.stack.imgur.com/VYht7.jpg)

我想完全重新安装 XAMPP 会解决这个问题，但这可能需要比必要的时间更多的时间。最好，我只想重新安装 MySQL 组件，或者重新创建/修复 XAMPP 正常运行所需的一些数据库。但是，看起来我只能完全重新安装 XAMPP 而不是单独的组件（如果这是正确的，那可能是有原因的......）。

我有比完全重新安装 XAMPP 更好的选择吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T10:55:08.573

好的，在烤饼的帮助下修复了它。

1）默认情况下（Windows XP 上的 XAMPP 1.8.1），似乎有一个文件夹`C:\xampp\mysql\backup\phpmyadmin`。只需将整个文件夹复制粘贴到`C:\xampp\mysql\data`.

2) 停止并重启 MySQL

3) 如果您使用 WordPress，您的页面可能是空白的，因为它可能认为没有可用的主题。去`[frontpage url]/wp-admin/`。现在只需重新激活您想使用的主题，一切似乎又开始运行了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:46:31.413

您删除了 PHPMyAdmin 的数据库。如果您可以恢复它（使用命令行 mysql 工具或任何不依赖 Web 界面的工具），您可以再次使用 phpmyadmin。

# java - UDP组播从手机到PC

> ID：15807733
> 
> 赞同：8
> 
> 时间：2013-04-04T09:43:08.510
> 
> 标签：java, android, sockets, wifi, android-wifi

我正在制作一个 Android 应用程序以将 UDP 多播数据包从移动设备发送到我的 PC。

这是我的移动应用程序的代码：

这是用户权限`AndroidManifest.xml`

```
<uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/> 
```

**DeviceManagerWindow.java**

```
import android.net.wifi.WifiManager;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.view.Menu;

public class DeviceManagerWindow extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_device_manager_window);
        WifiManager wifi = (WifiManager)getSystemService( Context.WIFI_SERVICE );
        if(wifi != null)
        {
            WifiManager.MulticastLock lock = wifi.createMulticastLock("WifiDevices");
            lock.acquire();
        }
        Thread sendMulticast = new Thread(new MultiCastThread());
        sendMulticast.start();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.device_manager_window, menu);
        return true;
    }

} 
```

此文件发送多播数据包：

**MultiCastThread.java**

```
public class MultiCastThread implements Runnable
{
    MulticastSocket s;
    DatagramPacket pack;
    public MultiCastThread()
    {
        try
        {
            s = new MulticastSocket(WifiConstants.PORT_NO);
            s.joinGroup(InetAddress.getByName(WifiConstants.GROUP_ADDR));
        }
        catch(Exception e)
        {
            Log.v("Socket Error: ",e.getMessage());
        }
    }
    @Override
    public void run()
    {
        try
        {
            pack = new DatagramPacket(WifiConstants.WHO_IS.getBytes(),WifiConstants.WHO_IS.getBytes().length, InetAddress.getByName(WifiConstants.GROUP_ADDR), WifiConstants.PORT_NO);
            s.setTimeToLive(WifiConstants.TIME_TO_LIVE);
            s.send(pack);
        }
        catch(Exception e)
        {
            Log.v("Packet Sending Error: ",e.getMessage());
        }
    }
} 
```

**WifiConstants.java**

该文件记录了 Wifi 交互的常量。

```
public class WifiConstants
{
    public static final int PORT_NO = 5432;
    public static final String GROUP_ADDR = "225.4.5.6";
    public static final int DGRAM_LEN = 1024;
    public static final String WHO_IS = "Who is?";
    public static final int TIME_TO_LIVE = 1;
} 
```

在我的系统上，我正在运行一个 java 代码来接收数据包并在控制台中打印它。

**ListenerDevice.java**

```
package Receiver;

import java.net.DatagramPacket;
import java.net.InetAddress;
import java.net.MulticastSocket;

public class ListenerDevice
{
    public static final int PORT_NO = 5432;
    public static final String GROUP_ADDR = "225.4.5.6";
    public static final int DGRAM_LEN = 1024;
    public static final String WHO_IS = "Who is?";
    public static final int TIME_TO_LIVE = 1;
    public static void main(String[] args)
    {
        MulticastSocket socket = null;
        DatagramPacket inPacket = null;
        byte[] inBuf = new byte[DGRAM_LEN];
        try
        {
          //Prepare to join multicast group
          socket = new MulticastSocket(PORT_NO);
          InetAddress address = InetAddress.getByName(GROUP_ADDR);
          socket.joinGroup(address);

              while(true)
              {
                    System.out.println("Listening");
                    inPacket = new DatagramPacket(inBuf, inBuf.length);
                    socket.receive(inPacket);
                    String msg = new String(inBuf, 0, inPacket.getLength());
                    System.out.println("From :" + inPacket.getAddress() + " Msg : " + msg);
              }
        }
        catch(Exception ioe)
        {
            System.out.println(ioe);
        }
      }
} 
```

我不知道出了什么问题我没有得到任何输出。请帮忙。我看了很多教程，并按照他们所说的每一步进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T05:49:22.543

两个设备都应该连接到同一个**网络**。当您将数据包从模拟器发送到 PC 时，它驻留在同一系统上。因此，您不会遇到任何问题。但是由于您要将数据包从 PC 发送到移动设备，因此这两个设备应该共享同一个网络。

如果两个设备都连接到网络，**效率**会更高。`unfirewalled`因为防火墙可能会在发送数据包时造成麻烦。

这是我得出的结论。

# matlab - Matlab - 使用通用参数列表调用函数句柄

> ID：15807735
> 
> 赞同：2
> 
> 时间：2013-04-04T09:43:11.907
> 
> 标签：matlab, function, function-pointers

我正在玩数值积分方法，并希望有一个函数

```
myIntegrator(f,fParams) 
```

我将在其中实现数值积分。

由于*f*可能需要任意数量的参数，我正在寻找一种通用方式让*myIntegrator()* 接受函数句柄 (@f) 并使用*fParams*调用它。

为了更好地澄清，我想调用*myIntegrator*，一次使用以下*@g*，然后使用*@h*（只是一些数字函数）：

```
g(x,y)
h(x) 
```

我想知道我是否可以在*myIntegrator*中使用一行代码来执行：

```
myIntegrator(f,fParams)
   invoke(f,fParams)
end 
```

并且可以同时为

```
myIntegrator(@g,[x,y]) 
```

和

```
myIntegrator(@h,[x]) 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:11:24.850

您是否考虑过使用[可变数量的输入参数](http://www.mathworks.com/help/matlab/ref/varargin.html) `varargin`？

```
function myIntegrator( f, varargin )
%
%
fprintf(1, 'function f got %d arguemnts\n', nargin );
% calling f with its arguments
f( varargin{:} ); 
```

`varargin`有关更多信息，请参阅手册。

现在你可以调用它了

```
myIntegrator( @g, x, y ); 
```

也

```
myIntegrator( @h, x ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:00:37.387

我想你正在寻找`feval`：

```
>> feval(@cos, pi)
ans =
   -1 
```

`feval`接受任意数量的输入，然后将其作为函数的输入`f`。此外，`feval`适用于函数句柄和由字符串定义的函数。

传递参数的一个很好的机制是`varargin`方法，在对 的调用中进行单元格扩展`f`，如 Shai 所述。

但是，我建议您忘记这一切并采取另一条路线；*匿名函数*：

```
[t,y] = myIntegrator(@(t,x) f(a,t,c,x,y), ...)
[t,y] = myIntegrator(@(t,x) g(x,y,z,u,v,t), ...) 
```

积分器（如果您确实指的是 ODE 的求解器；否则，它们被称为正交方法）通常只将时间`t`和状态变量输入`x`到您的微分方程中。这也是你在数学上写它的方式。

DE 可能需要的任何其他参数（常量、数据、文件名……）***不***属于集成商的责任；那是***调用者***的责任。集成商不必了解您的函数的任何细节，也不必拥有或多或少复制 MATLAB 已经内置的东西的机制；它违反了[KISS原则](http://en.wikipedia.org/wiki/KISS_principle)。

我正在谈论的这种责任转移是通过我上面给出的简单示例完成的。查看如何使用`ode45`以获取更多详细信息，或有关此问题的 MATLAB 文档经常引用的[此页面。](http://www.mathworks.nl/help/optim/ug/passing-extra-parameters.html)

# g-wan - 如何禁用 READ_XBUF 缓存？

> ID：15807736
> 
> 赞同：-3
> 
> 时间：2013-04-04T09:43:14.377
> 
> 标签：g-wan

我正在使用这个简单的代码。

```
#include "gwan.h"

int main(int argc, char *argv[]) 
{
  xbuf_t *reply = get_reply(argv), *read_buff;

 read_buff = (xbuf_t*)get_env(argv, READ_XBUF);
 xbuf_cat(reply, "START\n"); xbuf_ncat(reply, read_buff->ptr, read_buff->len); xbuf_cat(reply, "END\n");

 // this line is important if I don't use read_buff everything seems OK
 // but I need parse read_buff :(
 printf("%s\n", read_buff->ptr); // this line is most important

return 200;
} 
```

起初一切似乎都很好

shell:~$ for I in `seq 0 1`; 做 curl -A "" -H "TST: ${I}" ' [http://test.com:8080/?read_buf.c&scp=3](http://test.com:8080/?read_buf.c&scp=3) '; 完毕

```
START
GET /?read_buf.cscp=3HTTP/1.1
Host: test.com8080
Accept: */*
TST: 0

END
START
GET /?read_buf.cscp=3HTTP/1.1
Host: test.com8080
Accept: */*
TST: 1

END 
```

再次执行我的循环

```
START
GET /?read_buf.cscp=3HTTP/1.1
Host: test.com8080
Accept: */*
TST: 0

END
START
GET /?read_buf.cscp=3HTTP/1.1
Host: test.com8080
Accept: */*
TST: 1

END 
```

再次执行我的循环

```
START
GET /?read_buf.cscp=3HTTP/1.1
Host: test.com8080
Accept: */*
TST: 0

END
START
GET /?read_buf.cscp=3HTTP/1.1
Host: test.com8080
Accept: */*
TST: 1

END 
```

**但有我的问题。哪里 TST 仍然是 0 ？**

再次执行我的循环

```
START
GET /?read_buf.cscp=3HTTP/1.1
Host: test.com8080
Accept: */*
TST: 0

END
START
GET /?read_buf.cscp=3HTTP/1.1
Host: test.com8080
Accept: */*
TST: 0

END 
```

再次执行我的循环

```
START
GET /?read_buf.cscp=3HTTP/1.1
Host: test.com8080
Accept: */*
TST: 0

END
START
GET /?read_buf.cscp=3HTTP/1.1
Host: test.com8080
Accept: */*
TST: 0

END 
```

**为什么？由于缓存？如何禁用它？**

PS：servlet 在 G-WAN 4.3.14 上执行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:38:35.047

由于这个问题是在我们通过电子邮件回复**后**发布的，因此毫无疑问其真正目标与所谓的技术借口相去甚远。

为了让人们做出判断，以下是我们通过电子邮件发送给那个人的回复：

* * *

所有用户都会看到您的脚本显示的内容。

而且您的脚本没有使用任何用户会话。在并发下，此脚本以相同的方式为所有客户端显示相同的信息。

G-WAN 检测到这一点，这会触发它的缓存，因为您的脚本很慢（可能是由于打印到控制台）。

现实世界中不存在这样的应用程序：您将使用个性化的 URI 参数，或 POST 实体，甚至是 Cookie——这是您的测试小心避免的东西——因此它是无关紧要的。

此外，您可能会从阅读 G-WAN 常见问题中受益：

[http://gwan.ch/faq#cache](http://gwan.ch/faq#cache)

最后，创建 G-WAN 并不是为了与任何现有的 Web 框架竞争。目标仅仅是满足我们自己项目的需求：

[http://twd-industries.com/](http://twd-industries.com/)

在这里，G-WAN 非常适合这项任务，因为我们编写它的目的是为了正确使用它。

# excel - 书签特殊粘贴，Excel在同一个文件夹中查找

> ID：15807745
> 
> 赞同：3
> 
> 时间：2013-04-04T09:43:36.187
> 
> 标签：excel, ms-word, excel-formula, bookmarks, vba

我有一个 word doc 和一个 excel doc，我在 word 中创建了书签并特别粘贴到 excel 中.....这些书签只要文件保留在原始位置（**例如 C:\Documents and Settings\My文件\新表格**）

但

我需要将文档移动到不同的客户端位置（**例如- C:\Documents and Settings\My Documents\client1**）

在 excel 中，单元格信息如下所示；

`=Word.Document.8|'C:\Documents and Settings\My Documents\NewForm\TestFactFind.doc'!'!Title'`

有什么我可以放的，以便 excel 文件将查看其当前文件夹以查找 word 文档而不是设置位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:12:40.710

**非 VBA 方法**

是的，Excel 公式可以从包含文件的公式所在的同一目录中的文件中获取值。你必须使用`INDIRECT()`. 不过要注意一点。INDIRECT 仅在目标工作簿打开时才有效。

这是一个例子

假设 in`Cell B1`中的公式`C:\Book1.xlsx`是

`='C:\Sample\[Sample.xls]Sheet1'!$A$1`

然后把这个公式放进`Cell C1`去测试它

`=INDIRECT("'" & LEFT(CELL("filename",A1),FIND("[",CELL("filename",$A$1))-1)&"[Sample.xls]Sheet1'!$A$1")`

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/NETsb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T14:41:12.243

我不知道 Word 书签，但我认为它们与 Excel 超链接（？）

这在 Word 中可能相关，也可能不相关，但在 Excel 中，您可以使用超链接公式创建指向任何其他文档的链接。如果您使用当前目录（文件夹）作为根目录，它将从那里开始。

```
".\" is the current folder
"..\" is the parent folder that the current folder is in 
```

因此，假设您有一个 excel 表，其中包含存储在名为 REPORTS 的子文件夹中的 20 个 Word 文档的链接（excel to word 与您建议的相反，但反过来可能相同？）。每个 excel 单元格中的链接将是：

```
=HYPERLINK(".\REPORTS\JAN.DOC","January report")
=HYPERLINK(".\REPORTS\FEB.DOC","February report")
=HYPERLINK(".\REPORTS\MAR.DOC","March report")
etc... 
```

我经常使用的一个功能是将文件名或文件名的一部分列在与链接平行的 excel 列中，并在超链接文件名中使用该单元格。以下面的例子为例，假设它是范围 A1:B4（第 1 行是列标题“月号”和“报告链接”）。在这个例子中，我将我的 word 文档命名为 MONTHxx.DOC，xx 是月份编号。

```
MONTH NUMBER         LINK TO REPORT
01                   =HYPERLINK(".\REPORTS\MONTH" & A2 & ".DOC","Report for month " & A2)
02                   =HYPERLINK(".\REPORTS\MONTH" & A3 & ".DOC","Report for month " & A3)
03                   =HYPERLINK(".\REPORTS\MONTH" & A4 & ".DOC","Report for month " & A4)
etc 
```

将单元格放在超链接第二部分的末尾，将月份编号也放在链接名称中，以供用户查看。当然，您可以使用那里的任何单元格来输入名称。

这种方法的美妙之处在于，如果您有一个包含 500 个文件的列表要链接到，并且它们都按顺序编号（如示例），您可以将第一个超链接一直复制粘贴到该列这将立即为您提供 500 个指向其他文档的链接。

仅供参考，文档不需要已经打开。单击链接将打开链接的文档。

我知道这不是你问的，但它相当接近。希望它有所帮助。

# mysql - 如何将数据库从 MS access 2007 导出到 MySQL？

> ID：15807747
> 
> 赞同：-2
> 
> 时间：2013-04-04T09:43:41.277
> 
> 标签：mysql, database, ms-access-2007

我在 MS Access 中创建了一个包含多个表的数据库。我希望将相同的数据库传输到 MySQL。做的步骤是什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:21:23.517

一种方法是安装[MySQL ODBC](http://dev.mysql.com/downloads/connector/odbc/)驱动程序，在 MySQL 中配置与目标数据库的 ODBC 连接，然后使用 Access 的“导出”功能复制表。我过去曾使用过这个过程，而且它通常工作得相当好。

# tfs - VisualStudio.com 上的 TFS - 如何将测试用于产品积压板

> ID：15807752
> 
> 赞同：1
> 
> 时间：2013-04-04T09:43:49.210
> 
> 标签：tfs, scrum, kanban

我们的团队正在使用托管在 VisualStudio.com 上的 TFS，并且正在利用集成的 Scrum 工具来管理我们的任务和工作。

到现在为止还挺好！看板在让团队了解情况和跟踪当前 sprint 的进度方面特别有效。

然而 - 在我们的项目中引入测试之后，测试人员一直在提出错误。由于 bug 以与 Product Backlog Items 非常相似的样式出现，我们发现这使得看板非常混乱，因为很难区分 bug 和 PBI。如果我们有多个错误，并且有多个并行的 PBI（很可能是这种情况），这确实会损害董事会的简洁和有用的演示。即使是过滤器也会很方便，但我没有。

有没有人解决这个问题？我们是否以正确的方式使用看板或 TFS 配置？

![在此处输入图像描述](https://i.stack.imgur.com/9sX6b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:18:02.450

是的，这就是在使用 Scrum 流程模板时如何处理 Bug 和 PBI。Bug 应该在 backlog 中优先考虑，就好像它们是 PBI 一样。如果您希望 Bug 不存在于 backlog 中，从而将它们从任务板中删除，您可以将它们从`Requirements`类别中删除。这是有关如何修改`categories.xml`给定项目的链接：http: [//msdn.microsoft.com/en-us/library/vstudio/dd273721.aspx](http://msdn.microsoft.com/en-us/library/vstudio/dd273721.aspx)

# sql - 如何获取表格的具体行？

> ID：15807761
> 
> 赞同：0
> 
> 时间：2013-04-04T09:44:08.673
> 
> 标签：sql, oracle, oracle10g, oracle11g, between

我正在使用 Oracle 数据库，并且我有一个包含 19 亿行记录的表。我想获得从 100,000,001 到 200,000,000 的记录行。有人可以帮我吗？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:59:25.570

一般来说，您需要一个分页查询，其格式为：

```
select t.*
   from (select t.*, rownum rn
           from (select t.yourfields
                   from yourtab t
                  order by t.something)
          where rownum <= end_rownum
        ) t
  where rn >= offset; 
```

或者

```
select *
  from (select t.yourfields, row_number() over (order by t.something) rn
          from yourtab t)
 where rn between start_rownum and end_rownum; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:41:20.340

如果您的意思是这些范围，`rownum`那么这里的查询很简单

```
select * from (select e.*,rownum test from hr.employees e) where test>5 and test <50; 
```

# batch-file - 比较批处理文件中的版本号

> ID：15807762
> 
> 赞同：4
> 
> 时间：2013-04-04T09:44:14.343
> 
> 标签：batch-file

我正在使用以下内容来获取文件的文件版本：

```
sigcheck.exe -n "C:\some.exe" 
```

以上返回类似：12,2,0,6837。

我怎样才能得到这个版本号。删除 , 以生成 1 个大数字，然后将其与存储在 txt 文件名称中的另一个版本号进行比较，例如：12.3.0.7218.txt（即与存储在文件中的文件版本类似的事情名称：删除 .'s 以形成一个大数字）。

如果名称中包含版本的文件晚于应用程序文件版本（即安装更新），我需要能够在批处理文件中执行一些代码。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-04T10:52:51.573

您不能简单地删除逗号（节点分隔符）并比较单个数字 - 它可能不会给出正确的结果。

例如，12.3 和 1.23 都会导致 123，从而导致错误的等价结论。您必须一次比较一个节点，从左侧开始。一旦你发现一个节点的不同之处，你就会得到答案。如果在一个版本用完节点之前节点是等价的，则节点多的版本更大：1.2.2 > 1.2

**编辑**
有时公司会在一个节点上添加一个字母后缀。这封信应该被认为是一个新的节点。搜索和替换可用于在每个字母之前引入节点分隔符。搜索和替换不区分大小写，因此`a`equals `A`。

```
@echo off
setlocal
call :testVersions  2.1      1.9
call :testVersions "2,1"     1-9
call :testVersions  1.9      2.1
call :testVersions  1.13     1.4
call :testVersions  1.4      1.13
call :testVersions  1.3.4    1.3.4
call :testVersions  1.3.4    1.3.5
call :testVersions  1.3.5    1.3.4
call :testVersions  1.3.5    1.3.5.1
call :testVersions  1.3.5.1  1.3.5
call :testVersions  1.3b     1.3
call :testVersions  1.3      1.3b
call :testVersions  1.10a    1.9
call :testVersions  1.9      1.10a
call :testVersions  1.9a     1.9b
call :testVersions  1.9b     1.9a
call :testVersions  1.9a     1.9A
exit /b

:testVersions  version1  version2
call :compareVersions %1 %2
if %errorlevel% == 1 set "result=greater than"
if %errorlevel% == -1 set "result=less than"
if %errorlevel% == 0 set "result=equal to"
echo %~1 is %result% %~2
exit /b

:compareVersions  version1  version2
::
:: Compares two version numbers and returns the result in the ERRORLEVEL
::
:: Returns 1 if version1 > version2
::         0 if version1 = version2
::        -1 if version1 < version2
::
:: The nodes must be delimited by . or , or -
::
:: Nodes are normally strictly numeric, without a 0 prefix. A letter suffix
:: is treated as a separate node
::
setlocal enableDelayedExpansion
set "v1=%~1"
set "v2=%~2"
call :divideLetters v1
call :divideLetters v2
:loop
call :parseNode "%v1%" n1 v1
call :parseNode "%v2%" n2 v2
if %n1% gtr %n2% exit /b 1
if %n1% lss %n2% exit /b -1
if not defined v1 if not defined v2 exit /b 0
if not defined v1 exit /b -1
if not defined v2 exit /b 1
goto :loop

:parseNode  version  nodeVar  remainderVar
for /f "tokens=1* delims=.,-" %%A in ("%~1") do (
  set "%~2=%%A"
  set "%~3=%%B"
)
exit /b

:divideLetters  versionVar
for %%C in (a b c d e f g h i j k l m n o p q r s t u v w x y z) do set "%~1=!%~1:%%C=.%%C!"
exit /b 
```

- 输出 -

```
2.1 is greater than 1.9
2,1 is greater than 1-9
1.9 is less than 2.1
1.13 is greater than 1.4
1.4 is less than 1.13
1.3.4 is equal to 1.3.4
1.3.4 is less than 1.3.5
1.3.5 is greater than 1.3.4
1.3.5 is less than 1.3.5.1
1.3.5.1 is greater than 1.3.5
1.3b is greater than 1.3
1.3 is less than 1.3b
1.10a is greater than 1.9
1.9 is less than 1.10a
1.9a is less than 1.9b
1.9b is greater than 1.9a
1.9a is equal to 1.9A 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:01:10.780

将逗号转换为 [无]

```
set sig=12,2,0,6837
set sig=%sig:,=%
echo sig=%sig% 
```

将文件名设置为变量，假设很多，比如名称是目录中最新的 - - 不知道细节，抱歉 - 你必须更具体。

```
set "file="
for /f %%i in ('dir /b /a-d /o-d *.txt') do if not defined file set file=%%~ni
set file=%file:~.=%
echo %file% 
```

但是 - 一切都取决于您建议如何检索文件名。

* * *

所以如果你使用

```
:: you are manually entering NEWVER
SET newver=1230718

for /f %%i in ( ' sigcheck.exe -n "C:\some.exe" ' ) do set sig=%%i
Echo As a check, sig retrieved was %sig%

set sig=%sig:,=%
echo Which gets transformed to sig=%sig%

if %sig% lss %newver% (ECHO New version to be installed
  ) else (echo do not install new version) 
```

现在，如果你想执行

```
thisbatch 1230718 
```

你可以更换

```
SET newver=1230718 
```

和

```
SET "newver=%1" 
```

并且因为`1230718`是给批处理过程的第一个参数`thisbatch` `newver`将被设置为 `1230718`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:01:43.517

删除逗号：

```
set "v1=12,2,0,6837"
set "v1=%v1:,=%" 
```

删除点：

```
set "v2=12.3.0.7218"
set "v2=%v2:.=%" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-15T23:04:20.000

如果版本号语法与标准 .NET 版本语法匹配并且 PowerShell 可用，则可以使用相当紧凑、易读的混合 .BAT/PowerShell 解决方案：

```
@GOTO :Tests
:CompareVersions
@powershell -command "&{exit(([version]$args[0]).CompareTo([version]$args[1]))}" "%~1" "%~2"
@IF ERRORLEVEL 1 (ECHO "%~1" is newer than "%~2")  ELSE (
 IF ERRORLEVEL 0 (ECHO "%~1" is the same as "%~2") ELSE ECHO "%~1" is older than "%~2")
@GOTO :eof

:Tests
CALL :CompareVersions  1.2      1.2.0
CALL :CompareVersions  1.2.3    1.2.3.0
CALL :CompareVersions  1.2.3.4  1.2.3.4
CALL :CompareVersions  1.2.3.4  1.2.4.3
CALL :CompareVersions  1.2.4.3  1.2.3.4
CALL :CompareVersions  1.2.3.4 01.2.3.4
CALL :CompareVersions  9.2.3.4 10.2.4.3
CALL :CompareVersions 01.2.3.4  1.2.3.4
CALL :CompareVersions 10.2.4.3  9.2.3.4
CALL :CompareVersions  1.2.3.4 1.2.03.4
CALL :CompareVersions  1.2.9.4 1.2.10.3
CALL :CompareVersions 1.2.03.4  1.2.3.4
CALL :CompareVersions 1.2.10.3  1.2.9.4 
```

前两种情况是为了说明标准 .NET 版本的一些古怪特性 - 至少需要两个部分，如果它们为 -1，则缺失部分的行为。

我不确定 OP 帖子的更广泛背景，但知道给定 .EXE 或 .DLL，PowerShell 可以轻松地从文件中提取 IComparable 版本（例如`(Get-Item $fileName).VersionInfo.FileVersionRaw`）可能很有用。

# reflection - Groovy MetaProgramming - 如何覆盖类的所有方法

> ID：15807763
> 
> 赞同：2
> 
> 时间：2013-04-04T09:44:17.060
> 
> 标签：reflection, groovy, metaprogramming

我想以通用的方式包装一个类的所有方法。所以我假设我不知道该类正在实现的方法，并且 AOP 不是替代方案。

Groovy 元编程甚至允许使用参数重新定义方法，但是当您从反射中获取参数列表时如何做到这一点。

```
someClass.metaClass.methods.each { method ->
    someClass.metaClass.'${method.name}' =  { /* how to define parameters knowing I get them from method.parameterTypes */

    }
} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T11:48:50.540

怎么样`invokeMethod`？

**更新**：正如@Tim 评论的那样，您可以使用`getMetaMethod`执行旧方法：

```
class A {
  def methodA(String a) { "executing methodA..." }
  def methodB(String b, Float c) {}
  def methodC() {}
}

A.metaClass.invokeMethod = { String method, args ->
  def ret = delegate.class.metaClass.getMetaMethod(method, args)?.invoke( delegate, args )
  "[intercepted $method] $ret"
}

def a = new A()

assert a.methodA("a") == "[intercepted methodA] executing methodA..." 
```

# c# - 格式字段上的 ASP MVC3 FluentValidation

> ID：15807764
> 
> 赞同：0
> 
> 时间：2013-04-04T09:44:17.647
> 
> 标签：c#, client-side, fluentvalidation

我有一个注册页面，用户通过电子邮件注册。因此，对于模型，我有一个验证规则，其中指出：

```
RuleFor(x => x.Email).EmailAddress().WithMessage(localizationService.GetResource("Common.WrongEmail")); 
```

现在的问题是我有一个要求，即基于我们希望将其限制为具有特定域的电子邮件的设置。

我只是通过进行正则表达式验证来做到这一点

```
RuleFor(x => x.Email).Matches(customerSettings.RestrictLoginPattern).WithMessage(localizationService.GetResource("Customer.Fields.Email.EnteredPasswordWrongFormat")); 
```

因此，如果电子邮件与正则表达式不匹配，则会显示错误消息。到现在为止还挺好。

第二个规范是用户应该能够不提交域。所以对于*user.name@test.com*用户应该能够只写*user.name*

我通过对电子邮件属性进行获取/设置来做到这一点

```
 public string Email { 
        set
        {
            _email = value;
        }

        get
        {
            if (_email == null)
                return null;

            if(!_email.EndsWith(LoginSuffix))
            {
                return string.Format("{0}{1}", _email, LoginSuffix);
            }
            return _email;
        } 
```

因此，如果我写的东西不以*test.com*结尾，它就会被添加。现在的问题是这不会发生在客户端，因此验证会显示电子邮件格式不正确的错误。

我尝试从电子邮件中删除获取功能，并添加了一个我确实验证过的属性 FormatedEmail。由于 FormatedEmail 不在表单客户端上工作正常，但是当它不验证时，我无法将错误*挂接*到电子邮件字段，就像摘要错误一样

我看到多个解决方案

我可以禁用该字段的客户端验证。但是根据搜索，我发现这可能是不可能的？

我可以编写一个自定义的客户端验证，但对于这样一个“小”问题来说，这感觉相当复杂。

有一种方法可以以某种方式将错误绑定到字段？

```
ModelState.AddModelError("Email", "Error message"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:53:21.307

就我个人而言，我发现 getter/setter 中的业务逻辑概念令人厌恶。作为开发人员，我希望以下内容应该始终有效。

```
var foo = {something};
var bar = new Bar{ Baz = foo };
Assert.AreEqual(foo, bar.Baz); 
```

我认为您包含的代码就是我所说的“神奇”。

无论如何。

我会尝试拆分不同的验证规则。

```
public class FooValidator : AbstractValidator<Foo>
{
    public FooValidator()
    {
        RuleFor(x => x.Email)
            .Matches(customerSettings.RestrictLoginPattern)
            .WithMessage(localizationService.GetResource("Customer.Fields.Email.EnteredPasswordWrongFormat"))
            //When User is a full email address
            //Make sure its a valid email address
            .When(x => x.Contains('@') || x.EndsWith("@yourdomain.com"));

        RuleFor(x => x.Email)
            .Matches(InternalUsernamePattern)
            .WithMessage("foobaz")
            //Username does not contain @
            //Internal user rules!
            .Unless(x => x.Contains('@')|| x.EndsWith("@yourdomain.com"));
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:49:41.053

我采用的解决方案是采用 Arons 提示并仅为电子邮件创建规则，当我激活后缀设置时，手动验证后缀为有效电子邮件的电子邮件。

```
if (_customerSettings.FixedSuffix && !model.Email.EndsWith(_customerSettings.LoginSuffix))
{
   if (!ValidationHelper.IsEmail(string.Format("{0}{1}", model.Email, _customerSettings.LoginSuffix)))
      ModelState.AddModelError("", string.Format("Not a valid email with suffix {0}", _customerSettings.LoginSuffix));
   else
      model.Email = string.Format("{0}{1}", model.Email, _customerSettings.LoginSuffix);  // add the suffix to the email for user creation 
} 
```

电子邮件的 FluedValidation 使用此正则表达式 ( [http://regexlib.com/REDetails.aspx?regexp_id=1448](http://regexlib.com/REDetails.aspx?regexp_id=1448) ) 处理电子邮件，因此我创建了一个帮助程序进行验证。

我仍然无法将消息设置到电子邮件字段，但它显示在摘要中。

# android - Android 裁剪图像大小

> ID：15807766
> 
> 赞同：1
> 
> 时间：2013-04-04T09:44:21.560
> 
> 标签：android, crop

我有以下代码供用户裁剪图像。当我将大小设置为超过 256 时，它不起作用。我的直觉是“cropIntent.putExtra("return-data", true);" 导致错误。如何将 uri 传递给cropIIntent 并从onActivityResults 中检索出来？换句话说，在裁剪和检索后保存图像。

```
private void performCrop() {
    try {
        //call the standard crop action intent (the user device may not support it)
        Intent cropIntent = new Intent("com.android.camera.action.CROP");
        //indicate image type and Uri
        cropIntent.setDataAndType(mImageCaptureUri, "image/*");
        //set crop properties
        cropIntent.putExtra("crop", "true");
        //indicate aspect of desired crop
        cropIntent.putExtra("aspectX", 4);
        cropIntent.putExtra("aspectY", 3);
        //indicate output X and Y
        cropIntent.putExtra("outputX", 256);
        cropIntent.putExtra("outputY", 256);
        //retrieve data on return
        cropIntent.putExtra("return-data", true);

        startActivityForResult(cropIntent, PIC_CROP);

    } //respond to users whose devices do not support the crop action
    catch (ActivityNotFoundException anfe) {
        //display an error message
        String errorMessage = "Your device doesn't support the crop action!";
        Toast toast = Toast.makeText(this, errorMessage, Toast.LENGTH_SHORT);
        toast.show();
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

         if (requestCode == PIC_CROP) {
            try {
               final TextView imgTv = (TextView) findViewById(R.id.imageInfo);
                Bundle extras = data.getExtras();
                thumbnail = extras.getParcelable("data");
                ImageView image = (ImageView) findViewById(R.id.pestImage);
                image.setImageBitmap(thumbnail);
        File f = new File(mImageCaptureUri.getPath());
        if (f.exists()) {
            f.delete();
        }
    }
}//end onactivity results 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T15:10:12.147

```
private void performCrop() {
    try {
        //call the standard crop action intent (the user device may not support it)
        Intent cropIntent = new Intent("com.android.camera.action.CROP");
        //indicate image type and Uri
        cropIntent.setDataAndType(mImageCaptureUri, "image/*");
        //set crop properties
        cropIntent.putExtra("crop", "true");
        //indicate aspect of desired crop
        cropIntent.putExtra("aspectX", 4);
        cropIntent.putExtra("aspectY", 3);
        //indicate output X and Y
        cropIntent.putExtra("outputX", 800);
        cropIntent.putExtra("outputY", 800);

    File f = new File(Environment.getExternalStorageDirectory(),
            "/temporary_holder.jpg");
        try {
            f.createNewFile();
        } catch (IOException ex) {
        Log.e("io", ex.getMessage());  
        }

uri = Uri.fromFile(f);

      cropIntent.putExtra(MediaStore.EXTRA_OUTPUT, uri);

        startActivityForResult(cropIntent, PIC_CROP);

    } //respond to users whose devices do not support the crop action
    catch (ActivityNotFoundException anfe) {
        //display an error message
        String errorMessage = "Your device doesn't support the crop action!";
        Toast toast = Toast.makeText(this, errorMessage, Toast.LENGTH_SHORT);
        toast.show();
    }
} 
```

**onActivityResult**

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

         if (requestCode == PIC_CROP) {

                  String filePath = Environment.getExternalStorageDirectory()
                        + "/temporary_holder.jpg";

                thumbnail = BitmapFactory.decodeFile(filePath);

                       //thumbnail =    BitmapFactory.decodeFile(filePath);
               //    Log.i("",String.valueOf(thumbnail.getHeight()));

                    ImageView image = (ImageView) findViewById(R.id.pestImage);
                    image.setImageBitmap(thumbnail);
                    }} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:58:40.457

尝试

```
 Uri cropedImageUri = data.getData();

String[] filePathColumn = { MediaStore.Images.Media.DATA };

                Cursor cursor = getContentResolver().query(cropedImage,
                        filePathColumn, null, null, null);
                cursor.moveToFirst();

                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                String filePath = cursor.getString(columnIndex);
                cursor.close(); 
```

现在 filePath 是裁剪图像的路径

从 filePath 加载位图使用

```
 private Bitmap loadImageFromSDCard(String filePath) {

        BitmapFactory.Options bfo = new BitmapFactory.Options();
        bfo.inSampleSize = 1;
        bfo.outWidth = 100;
        bfo.outHeight = 100;
        Bitmap photo = BitmapFactory.decodeFile(filePath, bfo);
        return photo;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-22T09:41:37.370

```
 if (android.os.Build.VERSION.SDK_INT > 10){
        Intent cropIntent = new Intent("com.android.camera.action.CROP");
        cropIntent.setDataAndType(picUri, "image/*");
        cropIntent.putExtra("crop", "true");
        int gcd = BigInteger.valueOf(ImageWidth).
              gcd(BigInteger.valueOf(ImageHeight)).intValue();
        cropIntent.putExtra("aspectX", (ImageWidth / gcd));
        cropIntent.putExtra("aspectY", (ImageHeight / gcd));
        cropIntent.putExtra("outputX", ImageWidth);  // X
        cropIntent.putExtra("outputY", ImageHeight);  // Y
        cropIntent.putExtra("return-data", true);
        cropIntent.setData(picUri);
        startActivityForResult(cropIntent, PIC_CROP_INTENT_ID);
    } 
```

# etl - Informatica 中的映射变量问题

> ID：15807771
> 
> 赞同：0
> 
> 时间：2013-04-04T09:44:29.770
> 
> 标签：etl, informatica, informatica-powercenter

我们有一个增量 Informatica 作业，其中大约 30 个会话在一个工作流中运行。我们在所有这些中都使用了一个映射变量，因为我们想从上次运行的 Informatica 中挑选记录。此变量保存上次运行的日期。运行时，在每个会话中，此变量都选择正确的上次运行日期，而在一个会话中，它选择错误的日期 ( `CREATE_DATE>TO_DATE ('01/01/1753 00:00:00', 'MM-DD-YYYY HH24:MI:SS')`)。

有人可以给我一些指示，找出为什么它给出了错误的日期（01/01/1753）吗？

# android - Android：多次收到短信

> ID：15807775
> 
> 赞同：0
> 
> 时间：2013-04-04T09:44:51.530
> 
> 标签：android, service, sms

我有在指定时间发送短信的服务，但我注意到同一条消息被多次接收。不知道为什么会这样。

在设置发送短信的时间后`11:45 pm`，我在`11:45 pm`, `05:58 am`,`09:58 am`和收到了 4 次相同的信息`01:01 pm`

这是我发送短信的代码：

```
Intent myIntent = new Intent(AlarmActivity.this,
                    SendSmsService.class);
            pendingIntent = PendingIntent.getService(AlarmActivity.this, 0,
                    myIntent, 0);

            AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);

            Calendar cal = Calendar.getInstance();
            cal.set(Calendar.HOUR_OF_DAY, TimePreference.getHour(sendTime));
            cal.set(Calendar.MINUTE, TimePreference.getMinute(sendTime));
            cal.set(Calendar.SECOND, 0);
            cal.set(Calendar.MILLISECOND, 0);
            alarmManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                    pendingIntent); 
```

这里是**SendSmsService.java**

```
public class SendSmsService extends Service
{
    private static final String TAG = SendSmsService.class.getSimpleName();

    String CompleteAddr, eContact1, eContact2, eContact3;
    String smsString;
    boolean acknowledged;

    @Override
    public void onCreate() {
        // TODO Auto-generated method stub
        Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();
        super.onCreate();
    }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        // TODO Auto-generated method stub
        Log.v(TAG, "onStartCommand");
        getSharedSettings();

        if (acknowledged == false) {
            if (eContact1 != "")
                sendSMS(eContact1, smsString + CompleteAddr);
            if (eContact2 != "")
                sendSMS(eContact2, smsString + CompleteAddr);
            if (eContact3 != "")
                sendSMS(eContact3, smsString + CompleteAddr);
        }
        return super.onStartCommand(intent, flags, startId);
    }

    @Override
    public boolean onUnbind(Intent intent) {
        // TODO Auto-generated method stub
        return super.onUnbind(intent);
    }

    private void sendSMS(String phoneNumber, String message) {
        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, null, null);
    }   
} 
```

任何建议和想法将不胜感激
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:49:53.863

在服务中，对您的主代码使用“onCreate”操作，而不是“onStartCommand()”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T09:06:13.450

这可能是您手机其他地方的问题，导致无法正确响应已发送的 SMS。

我在 Android 4.0.4 (ICS) 上运行的 Sony Xperia Pro (MK16i) 也遇到了同样的问题。

每当我安装一个在摇晃、扭曲或转动时关闭屏幕的应用程序时，就会出现问题：一条短信的多个副本。当我禁用它甚至更好地卸载它时，一切都变得正常。显然，该应用程序阻止将 SMS-Receive-Reports 发送回 SMS 提供商（电话公司）的服务器。然后这些认为没有收到短信（电话关闭或类似的东西）蚂蚁尝试在 10 分钟左右（取决于提供商）后再次尝试。这会导致多张收据。直到手机有机会发回 SMS-Receive-Reports。然后整个马戏团停止了。直到下一条短信。

尝试查看是否有东西使用了设备控制插槽（请参阅设置安全）。尝试禁用它或卸载它。或者获取更新的手机或 Android 版本。不然我也不知道。

干杯，伊姆雷

# svn - post-commit hook, svn: E020024: Error resolve case of

> ID：15807779
> 
> 赞同：3
> 
> 时间：2013-04-04T09:45:03.243
> 
> 标签：svn, visualsvn-server, svn-hooks, post-commit-hook

我正在使用 VisualSVN Server 来管理源文件夹。它安装在 Windows XP 机器上，并且可以访问网络磁盘。

在这个名为 的网络磁盘上`W:`，我以这种方式检查了一个文件夹：

```
svn checkout https://server:443/svn/Project W:\Project --username=user --password=pass 
```

我现在可以使用以下命令更新此文件夹：

```
svn update W:\Project 
```

**问题是：**

我想添加一个运行此命令的提交后挂钩：

```
svn update W:\Project 
```

但是当我提交时，会出现此错误：

```
At revision: 123
post-commit hook failed (exit code 1) with output:
svn: E020024: Error resolving case of 'W:\Project' 
```

有任何想法吗 ？我不知道这是否是一个好习惯，我的目标是将项目的副本保留在 svn 服务器之外的另一个磁盘上并备份。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:37:25.867

W: 驱动器可能未在脚本运行的环境中映射。所有挂钩脚本都在未设置环境变量的情况下运行。您需要明确指定文件共享的服务器名称或在脚本中映射网络驱动器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:19:17.110

好的，实际上可以对提交后操作进行更新。问题是我尝试将我的存储库保存在网络文件夹中。VisualSVN 服务的默认帐户是`NTAUTHORITY\NetworkService`无法访问我的磁盘。所以我将用户更改为网络帐户，现在它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:16:06.893

> *您是否使用要使用提交后挂钩脚本更新的同一工作副本？*

您不能`svn update`使用提交后挂钩处理相同的工作副本。它必须是单独的工作副本。您可以考虑使用[`svn export`](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.export.html)command 而不是`svn update`.

# java - 为什么我无法读取我的文本文件？

> ID：15807784
> 
> 赞同：0
> 
> 时间：2013-04-04T09:45:22.897
> 
> 标签：java

我正在尝试读取文本文件，但我不断收到“java.util.InputMismatchException”。

主类：

```
dc.loadData(new File("DVDCollection.txt")); 
```

读取/加载文件数据的类：

```
Scanner inputFile = null;
public void loadData(File fileName) {
    try {
        inputFile = new Scanner (new File("DVDCollection.txt"));
    }

    catch (Exception FileNotFoundException) {
        System.out.println("ERROR: " + FileNotFoundException.getMessage());
        System.exit(1);
    }

    while (inputFile.hasNext()) {

        String fileTitle = inputFile.nextLine();
        String fileCategory = inputFile.nextLine();
        String fileRunningTime = inputFile.nextLine();
        int fileYear = inputFile.nextInt();
        double filePrice = inputFile.nextDouble();

        DVD dvdEntry = new DVD(fileTitle, fileCategory, fileRunningTime, fileYear, filePrice);
        DVDlist.add(dvdEntry);
    }
    inputFile.close();
} 
```

文本文件每行有一条信息，没有换行符。

例子：

```
Movie title1 (Sttring)
movie category1 (String)
movie duration1 (String)
movie year1 (int)
movie price1 (double)
Movie title2
movie category2
movie duration2
movie year2
movie price2
etc
etc... 
```

这是一个应该读入的实际示例：

```
Adam
Documentary
78 minutes
2012
7.99
Choo Choo
Documentary
60 minutes
2006
11.99 
```

错误说明了什么：

```
Exception in thread "main" java.util.InputMismatchException
at java.util.Scanner.throwFor(Unknown Source)
at java.util.Scanner.next(Unknown Source)
at java.util.Scanner.nextDouble(Unknown Source)
at XXXX_XXXX.DVDCollection.loadData(DVDCollection.java:29)
at XXXX_XXXX.DVDApplication.main(DVDApplication.java:14) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:52:23.310

您可能对这些行有疑问：

```
int fileYear = inputFile.nextInt();
double filePrice = inputFile.nextDouble(); 
```

在某些时候找不到预期的类型（不是双精度型）。确保您转到下一行并且您的文件不包含任何错误（数字按预期格式化......）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:54:03.367

（`InputMisMatchException`从 抛出时`nextDouble()`）表示“下一个标记与 Float 正则表达式不匹配，或者超出范围”（来自[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextDouble%28%29)的引用）。

因此，问题很可能出在您尝试读取的文件中。然而，没有它的内容，很难猜出罪魁祸首究竟是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:54:14.107

`Scanner#nextDouble()`throws - 如果下一个标记与正则表达式`InputMismatchException`不匹配，或者超出范围。`Float`

很明显，输入不是浮点文字。我期待可能有空间，这`double`使得`string`..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T09:58:08.717

从您的跟踪中可以看出，`Scanner`尝试读取的值应该是`double`值而不是`double`值。

```
Exception in thread "main" java.util.InputMismatchException
at java.util.Scanner.throwFor(Unknown Source)
at java.util.Scanner.next(Unknown Source)
**at java.util.Scanner.nextDouble(Unknown Source)**
at XXXX_XXXX.DVDCollection.loadData(DVDCollection.java:29)
at XXXX_XXXX.DVDApplication.main(DVDApplication.java:14) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T09:59:50.147

在你的情况下，它会适合

```
String fileTitle = inputFile.nextLine();
String fileCategory = inputFile.nextLine();
String fileRunningTime = inputFile.nextLine();
int fileYear = Integer.parseInt(inputFile.nextLine());
double filePrice = Double.parseDouble(inputFile.nextLine()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T10:05:34.640

我找到了你的问题的原因。

当您使用 nextline() 时，它会使扫描仪超过当前行并将其放在下一行的开头。

但是当您使用 nextInt 或 nextDouble 时，扫描仪会前进到 nextInteger 和下一个 double 值，并放置在当前行本身的末尾。

因此， \n 也被读取为下一个 nextLine 的一部分，打破了序列。

您可以像这样编写代码作为解决方法。

```
while (inputFile.hasNext()) {
            String fileTitle = inputFile.nextLine();
            String fileCategory = inputFile.nextLine();
            String fileRunningTime = inputFile.nextLine();
            int fileYear = Integer.parseInt(inputFile.nextLine());
            double filePrice = Double.parseDouble(inputFile.nextLine());
        }
        inputFile.close(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-04T10:25:16.717

```
Just add the line marked with ***
while (inputFile.hasNext()) {

    String fileTitle = inputFile.nextLine();
    String fileCategory = inputFile.nextLine();
    String fileRunningTime = inputFile.nextLine();
    int fileYear = inputFile.nextInt();
    double filePrice = inputFile.nextDouble();

    DVD dvdEntry = new DVD(fileTitle, fileCategory, fileRunningTime,
        fileYear, filePrice);
    DVDlist.add(dvdEntry);

    if (inputFile.hasNext()) //***
        inputFile.nextLine();
} 
```

# performance - 从安装程序中提取 isxdl.dll 需要很长时间

> ID：15807791
> 
> 赞同：3
> 
> 时间：2013-04-04T09:45:39.550
> 
> 标签：performance, inno-setup

我正在使用 InnoSetup 为我的 WPF 应用程序创建安装程序。我的应用程序大约是~300Mo。我已经实现了这个方法来检查客户端环境是否有 MS Framework 4.0： http: [//www.codeproject.com/Articles/20868/NET-Framework-1-1-2-0-3-5-Installer-for -InnoSetup](http://www.codeproject.com/Articles/20868/NET-Framework-1-1-2-0-3-5-Installer-for-InnoSetup) 此方法使用 isxdl.dll。

当我启动安装程序时，它在这个任务上停留了 10 秒（在 InnoSetup 调试模式下）：

```
Extracting temporary file: C:\Users\Ben\AppData\Local\Temp\is-IKJ7C.tmp\isxdl.dll 
```

这个DLL大约是122Ko，很轻。我尝试使用更轻的应用程序（大约 5Mo）创建相同的安装程序（使用相同的脚本），并且安装程序运行良好（没有更多的卡住时间）。

我不知道应用程序文件（应用程序的权重）如何影响这个 dll 的加载。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:47:58.317

安装脚本将用于操作和功能的所有文件都应放在`[Files]`部分的开头，尤其是在使用`SolidCompression=True`. 这也是为他们使用的好选择`Flags: nocompression dontcopy`。

```
[Files]
Source: ".\ISWin7.dll"; DestDir: "{tmp}"; Flags: dontcopy nocompression
Source: ".\games\{#BMPDir}\BMP\*"; DestDir: "{tmp}"; Flags: dontcopy nocompression
Source: ".\InnoCallback.dll"; DestDir: "{tmp}"; Flags: dontcopy nocompression
Source: ".\MyAppSourceFiles\*"; DestDir: "{app}"; Flags: ignoreversion 
```

> 使用固态压缩的缺点是因为所有文件都被压缩成一个压缩流，安装程序不能再随机访问这些文件

*   这使得它可以在访问最后一个文件之前“解压所有文件”。更多信息[在这里](http://www.jrsoftware.org/ishelp/index.php?topic=setup_solidcompression)。

# android - 多个表的内容提供程序

> ID：15807795
> 
> 赞同：4
> 
> 时间：2013-04-04T09:45:54.587
> 
> 标签：android, android-contentprovider, simplecursoradapter

我是 Android 新手，正在为 5 个表实现内容提供程序。我的问题是：我应该在单个内容提供程序中为每个表或多个表都有一个内容提供程序吗？由于 Content Provider 具有单一的插入、更新、查询、删除方法。

如何在我的应用程序中只包含一个 Content Provider？我已经搜索过，在大多数示例中，我只找到一个表应用程序。

我必须在哪里使用切换条件来支持具有相同内容提供程序的多个表？

请给我一些想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:50:46.357

您可以使用 URI 参数：

```
List<String> android.net.Uri.getPathSegments() 
```

例如，如果您的 URI 是：

```
content://com.mypackage.MyContentProvider/MyTable 
```

`MyTable`将在返回的列表中`getPathSegments();`。

然后，您必须在 URI 中指定您的表，并在提供程序中的插入、更新、查询、删除方法中根据 URI 参数构建查询。

为了避免对 URI 进行测试，您可以向您的提供者添加一个名为witch的**抽象**方法，该方法将返回您的as 。`getTableName()``tableName``String`

然后将您的提供者扩展到 5 个类`Table1Provider`等`Table2Provider`并实现方法

```
Class abstract  MyProvider extends ContentProvider{

public abstract String getTableName();

 @Override
  public Cursor query(Uri uri, String[] projection, String selection,
      String[] selectionArgs, String sortOrder) {

   ///...
    // Set the table
    queryBuilder.setTables(getTableName());

    //...
    return cursor;
  }
}

class Table1Provider extend MyProvider{

public String getTableName(){
   return "Table1";
} 
```

然后实例化`Table1Provider`而不是抽象提供者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-11T10:54:47.413

做一个供应商。使用 Android 提供的 URIMatcher 类将内容 URI 与不同的表进行匹配。

在这里阅读：http: [//developer.android.com/guide/topics/providers/content-provider-creating.html#ContentURI](http://developer.android.com/guide/topics/providers/content-provider-creating.html#ContentURI)

# node.js - node.js 和 Handlebars：编译的 HTML 被转义

> ID：15807799
> 
> 赞同：14
> 
> 时间：2013-04-04T09:46:05.390
> 
> 标签：node.js, handlebars.js, template-engine, html-escape-characters

我在节点应用程序中使用把手，我遇到了麻烦。

这是模板`index.html`

```
{{CONTENT}} 
```

这是代码

```
var fs = require("fs");
var handlebars = require("handlebars");

var data = {
    CONTENT: "<b>Hello world!</b>"
};

var templateFile = fs.readFileSync('./index.html', 'utf8');
var template = handlebars.compile( templateFile );
var html = template(data); 
```

问题是标签`<B>`被转义到`&lt;B&gt;`

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-04T09:50:31.643

来自[handlebarsjs.com](http://handlebarsjs.com/)：

> Handlebars HTML 转义 {{expression}} 返回的值。如果您不希望 Handlebars 转义值，请使用“triple-stash”。

```
<div class="entry">
  <h1>{{title}}</h1>
  <div class="body">
    {{{body}}}
  </div>
</div> 
```

在这种情况下：

```
{
  title: "All about <p> Tags",
  body: "<p>This is a post about &lt;p&gt; tags</p>"
} 
```

结果是：

```
<div class="entry">
  <h1>All About &lt;p&gt; Tags</h1>
  <div class="body">
    <p>This is a post about &lt;p&gt; tags</p>
  </div>
</div> 
```

但是，从我的角度来看，它可能会破坏将模板分开而不是 js 文件的目的。

如果您使用[预编译](http://handlebarsjs.com/precompilation.html)，则使用 noEscape 选项：

```
handlebars.precompile(content, {noEscape: true}) 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-04T09:50:17.173

您想在模板中使用“三重存储”：

```
{{{CONTENT}}} 
```

# powershell - Powershell中Get-ChildItem命令的结果集默认顺序是什么？

> ID：15807802
> 
> 赞同：8
> 
> 时间：2013-04-04T09:46:12.240
> 
> 标签：powershell, powershell-2.0

Powershell中Get-ChildItem命令的结果集默认顺序是什么？是否有顺序，或者它只是随机的，并且每次都会以不同的顺序给出结果。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-11-15T21:07:47.860

没有保证的默认排序顺序。[该文档](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.management/Get-ChildItem)没有说明。

中的实现`FileSystemProvider`最终调用[`DirectoryInfo.GetFiles`](https://msdn.microsoft.com/en-us/library/8he88b63(v=vs.110).aspx). 该状态的文档

> 返回文件名的顺序不保证；如果需要特定的排序顺序，请使用 Sort 方法。

底层 API 调用是`Find­First­File`和`FindNextFile`。Raymond Chen[在此解释](https://web.archive.org/web/20190212233555/https://blogs.msdn.microsoft.com/oldnewthing/20140304-00/?p=1603)说，实际上文件系统驱动程序可能会遵守一些排序规则，但不应依赖于此。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-20T13:13:14.850

默认排序对我不起作用。我得到：

```
Mode                LastWriteTime     Length Name
----                -------------     ------ ----
d----        2015-10-12     10:51            tools
d----        2015-10-12     10:58            cfg
d----        2015-10-12     10:51            res
d----        2015-10-12     10:50            brand
d----        2015-10-12     10:51            lib 
```

我不记得更改排序顺序。我在 Windows 7 SP1 上。如果我需要排序结果，我必须这样做`ls | sort`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T10:13:54.900

```
First folders in alphanumeric order (first numbers as [char]).
Then files in alphanumeric order (first numbers as [char]). 
```

# layout - 蛋糕中的某些动作布局消失

> ID：15807803
> 
> 赞同：0
> 
> 时间：2013-04-04T09:46:14.913
> 
> 标签：layout, view, action, cakephp-2.3, missing-template

这在 5 分钟前工作得非常好......我一生都无法弄清楚为什么会发生这种情况。基本上，我从一个页面开始，有一个布局（=='default'），在控制器代码中我没有更改布局，事实上，我没有在应用程序中更改布局，但是由于某种原因，当我点击了这个名为“addQuestion”的特定操作，它呈现没有布局的视图......

```
<?php

// medicalCasesController.php
public function addQuestion($caseId) {
    if ($this->request->is('post')) {
        $this->MedicalCase->Question->create();
        if ($this->MedicalCase->Question->saveAll($this->request->data)) {
            $this->request->data['Question']['id'] = $this->MedicalCase->Question->getLastInsertId();

            $this->MedicalCase->Question->Image->processData($this->request->data);

            $this->Session->setFlash(__('The question has been saved successfully.', true), 'flash/success');
            $this->redirect(array('action' => 'addAnother', $caseId));
        } else {
            $this->Session->setFlash(__('There was a problem saving the question.', true), 'flash/failure');
        }
    }
    $this->MedicalCase->id = $caseId;
    $this->MedicalCase->contain(array('Question'));
    $mc = $this->MedicalCase->read();

    $count = $this->MedicalCase->getQuestions('count') + 1;

    // mc, count, caseId
    $this->set(compact('mc', 'count', 'caseId'));
}

?> 
```

请记住，在提交表单之前，我看到了没有 POST 数据的问题。让我知道您还需要我什么，因为我不太确定如何诊断/调试此问题。

谢谢

-安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:31:15.303

想通了，隐藏的鸿沟有错误。傻我..

# performance - prolog 的性能问题

> ID：15807806
> 
> 赞同：2
> 
> 时间：2013-04-04T09:46:17.457
> 
> 标签：performance, path, prolog, shortest-path

我目前正在实施一个序言程序来计算两点之间的最短路径。该框架已存在于 Java 项目中。作为要求，路径必须在 prolog 中实现。因此我使用 gnu.prolog ( [http://www.gnu.org/software/gnuprologjava/](http://www.gnu.org/software/gnuprologjava/) )

在java中我调用`searchPath(1,5,Path)`它将返回`Path=[5,4,3,2,1]`

这是我的序言代码：

```
:- dynamic(path/3).

findPath( [Goal | Rest], Goal, Temp, Temp, [Goal | Rest]).

findPath( [A | Rest], Goal, Cost, Temp, Path) :-
    path(A,B,C),
    \+member(B, [A | Rest]),
    NewCosts is (Temp + C),
    findPath([B, A | Rest], Goal, Cost, NewCosts, Path).

searchPath(Start,Goal,Path_to_goal) :-
    findPath([Start], Goal, Cost1, 0, Path),
    findPath([Start], Goal, Cost2, 0, Path2),
    Cost1=<Cost2,
    Path_to_goal = Path. 
```

我有两个问题：

1.  该`searchPath`方法**应返回最短路径**。但是它**没有**。这导致我的幽灵“决定”在某个点切换方向，导致幽灵从左到右抖动。

2.  我的序言代码最多需要**6 秒**才能返回结果。我不必告诉你，这是太多的时间。但是有时 prolog 只需要**19ms**。我无法弄清楚这取决于哪种情况。例如，包含 99 个元素的路径列表需要 19 毫秒来计算，但 6 秒用于仅包含 38 个元素的列表。

您能提出任何改进建议吗？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:32:19.627

您可以使用 Dijkstra 算法。我实现了它来[回答](https://stackoverflow.com/a/11791840/874024)[这个](https://stackoverflow.com/q/11787719/874024)问题。我的代码使用[属性变量](http://www.swi-prolog.org/pldoc/doc_for?object=section%281,%276%27,swi%28%27/doc/Manual/extvar.html%27%29%29)，我认为应该在 GnuProlog 中工作（我现在将测试）。无论如何，在那里你会找到一个工作纯 Prolog 实现的[链接。](http://colin.barker.pagesperso-orange.fr/lpa/dijkstra.htm)

*编辑*好，我认为你可以更正你的代码，因为有一个问题：

`Path2`在`searchPath`/3 中它是一个*单例*：那么您显然将*始终*以第一个路径结束，并且因为第二个 findPath/3 将*始终*找到（如果数据库没有更改）与第一个相同的成本和路径，`Cost1=<Cost2,`将是总是正确的。你可以试试如果

```
searchPath(Start,Goal,Path_to_goal) :-
    findall(Cost-Path, findPath([Start], Goal, Cost, 0, Path), Paths),
    sort(Paths, [_-Path_to_goal|_]). 
```

对您的任务来说足够快。否则，您将需要实现增量搜索，这并不容易，因为 Prolog 在回溯时“返回”替代路径，然后强制使用某种副作用来选择最小值。

*more edit* findall/3 会导致代码太慢。我使用不可回溯赋值编写了更有效的代码（我使用了 SWI-Prolog nb_setarg/3，你应该在 GProlog 中使用 setarg/3）。

```
findPath(_Limit, [Goal | Rest], Goal, Temp, Temp, [Goal | Rest]) :- !.

findPath(Limit, [A | Rest], Goal, Cost, Temp, Path) :-
    path(A,B,C),
    \+member(B, Rest),
    NewCosts is (Temp + C),
    NewCosts < Limit,
    findPath(Limit, [B, A | Rest], Goal, Cost, NewCosts, Path).

% ?- searchPath(aberdeen, glasgow, Path, Length).
%
searchPath(Start, Goal, Path_to_goal, L) :-
    S = path_len([], 1000000),
    repeat,
    arg(2, S, Limit),
    (   findPath(Limit, [Start], Goal, Cost, 0, Path)
    ->  (   Cost < Limit
        ->  nb_setarg(1, S, Path),
        nb_setarg(2, S, Cost),
        fail
        )
    ;   true
    ),
    arg(1, S, Rev),
    reverse(Rev, Path_to_goal),
    arg(2, S, L). 
```

# javascript - 将 Java ArrayList 传递给 javascript

> ID：15807815
> 
> 赞同：0
> 
> 时间：2013-04-04T09:46:53.797
> 
> 标签：javascript, ajax, jsp

我知道这个问题已经讨论过[Get Request Attributes in JavaScript](https://stackoverflow.com/questions/7933866/get-request-attributes-in-javascript)，但它仍然对我不起作用。所以，它不是重复的。

我通过 javascript 异步更新我的页面：发送请求（XMLHttpRequest 对象）并设置 XMLHttpRequest.onreadystatechange = handleResponse()。

**问题**：可以在我的 handleResponse() 函数中处理 java ArrayList 请求属性（来自服务器的响应）吗？

*   所有迭代都以与上面链接相同的方式进行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:55:27.527

这是可能的，实际上非常简单。只需使用编码格式，如 JSON。那里有很多 Java JSON 库。也看看[这里](https://code.google.com/p/google-gson/)。然后从 JavaScript 内部，您可以将 JSON 转换为实际的 JavaScript 对象，并对它们做任何您想做的事情。

# ruby-on-rails - Rails 单表继承：如何覆盖写入类型字段的值

> ID：15807816
> 
> 赞同：6
> 
> 时间：2013-04-04T09:46:59.687
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, single-table-inheritance

在我的系统中，我已经定义了 STI。`Dog`继承自`Animal`，在`animals`表中有一个`type`值为 的列`"Dog"`。

现在我想`SpecialDog`从狗继承，只是为了在某些特殊情况下稍微修改行为。数据还是一样的。我需要运行的所有查询`SpecialDog`来返回数据库中具有 type 的值`Dog`。

我的问题是，由于我有一`type`列，rails 会附加`WHERE "animals"."type" IN ('SpecialDog')`到我的查询中，因此我无法访问原始`Dog`条目。所以我想要的是以某种方式覆盖 rails 在访问数据库时使用的值，`SpecialDog`使其表现得像`Dog`.

**有没有办法覆盖用于类型列的值轨道？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T10:39:39.597

这样做感觉有点不好，但据我所知，下面的代码应该可以工作。

```
def self.sti_name
  "Dog"
end 
```

如果可能的话，我的另一个建议是不要`SpecialDog`继承 from `Dog`。

# telerik - 将样式表类添加到 Telerik 下拉列表

> ID：15807819
> 
> 赞同：0
> 
> 时间：2013-04-04T09:47:18.343
> 
> 标签：telerik

我想在 Telerik 下拉列表中添加一个 CSS 类。这是我的查看代码：

```
@Html.Telerik().DropDownList().Name("ddlSalutationMailing").Items((ddlItem => { ddlItem.Add().Text(" - Select One - "); })) 
```

目的：

我的项目中有很多 Telerik 下拉列表，所以我想为所有下拉列表设置宽度。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:32:50.997

如果 Telerik 没有允许您在下拉列表上设置属性的方法，我通常做的是查看底层 HTML，找到 Telerik 用来表示下拉列表的 CSS 类，并用您想要的值覆盖宽度值. 对于您所描述的内容，这对我来说效果很好。

# timeout - 如何在 Worklight 中增加适配器过程超时值？

> ID：15807821
> 
> 赞同：1
> 
> 时间：2013-04-04T09:47:24.300
> 
> 标签：timeout, adapter, ibm-mobilefirst

如何增加 Worklight 适配器过程的超时值？我的应用程序崩溃，我在异常详细信息中看到以下内容：

> "响应 [/apps/services/api/index/common/query] 成功：/- *secure- {"responseID":"24","errors":["调用过程 'getFTTitle' 在 30 秒后超时。 "],"isSuccessful":false,"警告":[],"info":[]}* / "

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T09:55:47.763

Worklight 中有几个地方可以指定超时值：

客户端 ----> WORKLIGHT SERVER --（适配器）--> 后端

您可以按如下方式[增加适配器过程超时](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m6/index.jsp?topic=/com.ibm.worklight.help.doc/devref/r__procedure_.html)（Worklight Server --> Backend）：

```
<procedure name="nameHere" requestTimeoutInSeconds="valueHere"/> 
```

我不知道你的具体用例是什么，所以一定要[增加 client-side timeout](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/apiref/r_wl_client_invokeprocedure.html)。让它们相互匹配。

```
WL.Client.invokeProcedure(invocationData,{
    onSuccess : getDataSuccess,
    onFailure : getDataFailure,
    timeout   : valueHere
}); 
```

另请注意，如果您需要将超时时间增加到一整分钟，请考虑此处可能不存在某些内容...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-26T20:49:12.617

```
var wlInitOptions = 
{
    // # Worklight server connection timeout
    timeout: 60000,
    ...
} 
```

# java - Jacoco ant 任务 - 没有 jacoco.exec 输出

> ID：15807822
> 
> 赞同：8
> 
> 时间：2013-04-04T09:47:25.693
> 
> 标签：java, ant, jacoco

我将我的 Ant 任务配置为

```
<target name="test" depends="init">
    <jacoco:coverage destfile="target/jacoco.exec">
        <junit printsummary="yes" haltonfailure="yes" fork="yes" forkmode="once">
            <classpath refid="my_project.path"/>
            <formatter type="plain"/>
            <formatter type="xml"/>
            <batchtest fork="false" todir="target/test-reports">
                <fileset dir="test">
                    <include name="**/*Test.java"/>
                </fileset>
            </batchtest>
        </junit>
    </jacoco:coverage>
</target> 
```

这会产生预期的junit结果。但是，`target/jacoco.exec`永远不会创建。`ant test report`我在任务执行期间没有任何错误。

> 测试：[jacoco:coverage] 增强 junit 的覆盖率
> 
> ```
> ...
> 
> [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0,009 sec 
> ```
> 
> 报告：[jacoco:report] 加载执行数据文件 /home/usr/Workspaces/my_project/target/jacoco.exec
> 
> 构建失败/home/usr/Workspaces/my_project/build.xml:73：无法读取执行数据文件/home/usr/Workspaces/my_project/target/jacoco.exec
> 
> 总时间：14秒

好像我错过了什么，无法看到究竟是什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T13:10:25.067

我找到了原因。这很愚蠢，但没有记录表明错误：

> > batchtest **fork="true"** todir="target/test-reports"

在批处理测试中，fork 参数设置为 false。将其设置回“true”会产生预期的**jacoco.exec**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:05:52.917

单独运行`report`任务是不够的。您必须配置并运行`coverage`Ant 任务，以使覆盖数据能够记录到`jacoco.exec`文件中。看[这里](http://www.eclemma.org/jacoco/trunk/doc/ant.html#coverage)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-12T19:26:01.993

面临同样的问题，对我来说，我的 junit 不合适。[请点击此处](http://javaworld-abhinav.blogspot.com/2014/06/automating-code-coverage-and-junit.html)的链接

# html - 使用 JS 创建的 mjpeg-stream 在 Firefox 和 Opera 中无法正常工作

> ID：15807830
> 
> 赞同：1
> 
> 时间：2013-04-04T09:47:33.137
> 
> 标签：html, image, video-streaming, mjpeg

`<img/>`我有一个 MJPEG，它使用标签在网页上流式传输。流有时会下降一段时间，然后再开始工作。我使用 AJAX 检查流的状态。

当流关闭时，我将`<img/>`标签中的图片更改为某个占位符。当流再次在线时，我删除占位符以显示流。我通过将标签替换为：

```
$('#xxx').html() 
```

在 Chrome 中这工作正常，重新连接后，动画继续正常。然而，在 Opera 和 Firefox 中，流重新上线后，它只会显示一个静态帧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:26:10.043

好吧，它似乎可以通过使用 `<iframe src='path_to_mjpeg'>` 而不是 `<img src='path_to_mjpeg'>` Chrome 来解决，并且 Opera 可以正确地使用 JS 处理它的创建。Firefox 开始播放成功，但内存泄漏很大。

# magento - Magento 创建贷项凭证时出错

> ID：15807832
> 
> 赞同：0
> 
> 时间：2013-04-04T09:47:39.650
> 
> 标签：magento

Magento 版本 1.7.2

当我们创建贷项通知单时，我们收到以下错误：

无法保存贷项通知单。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-12T15:56:50.483

我猜。听起来您的 unq_increment_id 的贷项通知单值错误。您可以在 eav_entity_type 表中找到它。你应该看到 creditmemo。见下图。![在此处输入图像描述][1]

（可惜不能发图）

如果您从表的右侧走，您将看到 unq_increment_id 字段。从管理面板查看您的最后一个贷项通知单 ID，并将其写入 unq_increment_id。

希望你的问题是我猜到的，这个解决方案可以解决它。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T09:14:19.433

如果您在项目根目录中检查 var/log/exception.log 中的异常日志，您可能会发现如下内容：
**1\. 异常**：

```
exception 'PDOException' with message 'SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '100000004' for key 'UNQ_SALES_FLAT_CREDITMEMO_INCREMENT_ID'' in /var/www/html/orders/lib/Zend/Db/Statement/Pdo.php:228 
```

2.  问题 - 贷项通知单的 ID 重复，因为最后一个用于增加值的贷项通知单条目未在表中更新。

**修复：**
**步骤 1** 转到销售/贷项通知单并记下最后一个贷项通知单的 id。说 X。
**步骤 2**
在 DB 中，查看 eav_entity_type 表中的实体 _type _id 对应于实体类型代码 creditmemo 。很可能是 7
**Step 3**
接下来查看表 eav_entity_store。记下与上一步中的 entity_type_id 对应的 increment_last_id 的值。如果此值与 X(step1) 不同，则更新该行以使 increment_last_id 值与 X 相同

```
 UPDATE `myproject`.`eav_entity_store` SET `increment_last_id` = 'X' WHERE `eav_entity_store`.`entity_store_id` = 3; 
```

完毕！

# html - 包含画布的 div 有一个奇怪的下边距 5px

> ID：15807833
> 
> 赞同：26
> 
> 时间：2013-04-04T09:47:44.147
> 
> 标签：html, canvas

我面临一个奇怪的问题。

简而言之 ：

当我们将画布放入 div 并设置画布的大小时，div 会自动比画布大 5px，而我希望它得到完全相同的大小。

这个问题是[这个答案](https://stackoverflow.com/a/10652093/1489009)的后续， 所以我将采用相同的示例，该问题已在 Firefox 和 google chrome 中重现。（其他浏览器没试过）

```
<div>
    <canvas height="300px" width="200px"></canvas>
</div> 
```

CSS：

```
div {
    border: 2px solid blue; /* demo purposes */
    display: inline-block;
}
canvas {
    background-color: khaki; /* demo purposes */
} 
```

结果（参见 div 中的空白）：

![结果](https://i.stack.imgur.com/87ODV.png)

[您还可以在这个 JSfiddle](http://jsfiddle.net/5jTFk/)中看到这个完全相同的示例（非常简单）

为什么会发生这种情况，我们该如何预防？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-04T11:44:08.627

`display: block`您可以通过添加到画布元素的 css 来防止它发生。

IE：

```
canvas {
    background-color: khaki; /* demo purposes */
    display: block;
} 
```

# android - 如何从android中的另一个片段内部调用片段类

> ID：15807835
> 
> 赞同：0
> 
> 时间：2013-04-04T09:47:45.503
> 
> 标签：android, android-fragments, android-fragmentactivity

在我的项目中，我有一个`(as the layout of a sliding menu)`附加到我的 MainActivity 的片段视图。在我的菜单片段中，我有另一个片段*（内部片段）*，它从 XML 本身调用一个类，如下所示：

```
<fragment
    android:id="@+id/innerfragment"
    android:layout_width="fill_parent"
    android:layout_height="175dip"
    android:layout_marginBottom="10dip"
    android:layout_marginTop="10dip"
    class="com.myproject.android.fragment.MyInnerFragment" /> 
```

当我运行该项目时，它显示以下内容`java.lang.RuntimeException`

```
 android.view.InflateException: Binary XML file line #76: Error inflating class fragment 
```

***问：如何从 XML 或代码调用内部片段类？***

`XML`在引入滑动菜单之前在活动下设置时也是如此。

**`EDIT:`**

为了清楚起见，这就是布局的样子。滑动菜单视图是一个名为 menu.xml 的 RelativeLayout

![在此处输入图像描述](https://i.stack.imgur.com/iGtRt.png)

内部片段内容根据 MainActivity 中选择的选项而有所不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:21:30.003

我想我已经找到了我的问题的解决方案。

首先，我为我的项目*(Maven Project)*使用了错误的 android 支持 jar 。**;)**

我用文件修复了这个`latest android support jar`问题，第二个问题可能是**我的内部片段是在创建外部视图之前设置的。**

无论如何，我将此代码插入到我的外部片段中，它开始工作一切正常..！

```
@AfterInject
public void setupfragment()
{
      FragmentTransaction fragmentTransaction = getFragmentManager().beginTransaction();
      myinnerFragment = new PresetsFragment_();
      fragmentTransaction.add( R.id.menu_my_frame, myinnerFragment );
      fragmentTransaction.commit();
} 
```

更好的答案总是受欢迎的。在那之前，我将此答案标记为正确答案..！**;)**

**编辑：**

忘了提到我从 XML 中删除了我的代码，并从我的外部片段内的代码中实现了它。**:D**

# html - 从对话框更新表单

> ID：15807837
> 
> 赞同：0
> 
> 时间：2013-04-04T09:47:50.677
> 
> 标签：html, ajax, jsf, primefaces

我在表单中有一个数据表；在 dataTable 我有一个按钮，如果单击它会弹出一个对话框；编辑（或不编辑）后，我想关闭对话框并刷新数据表。

我想通过ajax事件“关闭”来做到这一点，所以即使点击取消按钮，或者通过点击转义或栏中的“x”关闭对话框 - >他应该登陆我的closeDialog（） - 方法和刷新数据表。

唯一的问题是我不知道如何刷新数据表。

这是我的数据表（在标题中是弹出对话框的按钮）：

```
<p:dataTable id="nzTable" widgetVar="nzTableW" emptyMessage="Keine Todos gefunden"
        var="currentTableItem" value="#{nichtZugTableController.dataModel}" paginator="true" rows="15"
        rowsPerPageTemplate="5,10,15,20, 25, 30, 1000" lazy="false" paginatorPosition="bottom"
        paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
        currentPageReportTemplate="( Treffer {totalRecords} ) ( Seite {currentPage} von {totalPages} )"
        filteredValue="#{nichtZugTableController.filteredTodos}" filterDelay="500" filterEvent="keyup"
        editable="true" sortBy="#{currentTableItem.angelegtAm}" sortOrder="descending"
        rendered="#{loginBean.loggedIn and mitViewController.leiterViewActiv and leiterTreeController.nzTableActive}"
        selection="#{nichtZugTableController.selectedNZTodos}" rowKey="#{currentTableItem.meldungId}"
        resizableColumns="false" style="min-width:1200px !important; "> 

        <f:facet name="header">
            <p:commandButton value="Zuordnen" id="nzAllTableOrdeZuButton" ajax="true" partialSubmit="true"
                process="@this" label="ToDo einem Mitarbeiter zuordnen" oncomplete="zuordnenDialogW.show();"
                disabled="#{not nichtZugTableController.hasSelectedNZTodos}"
                action="#{nichtZugTableController.doToDoArrayToList()}" style="float: left;" />
            <pe:tooltip for="nzAllTableOrdeZuButton" value="Ausgwählte ToDos einem Benutzer zuweisen"
                myPosition="left center" atPosition="right center" showEffect="fadeIn" hideEffect="fadeOut"
                showDelay="700" />
            <h:outputText value="#{nichtZugTableController.tableHeaderName}"
                style="color:#cf0008; font-size: 22px;" />
        </f:facet> 

        ...

</p:dataTable> 
```

这是我的对话框：

```
<body>
<ui:composition>
    <h:form id="zuordnenDialogForm">
        <p:dialog id="zuordnenDialog" widgetVar="zuordnenDialogW" closeOnEscape="true" dynamic="true"
            header="Zuordnung" appendToBody="false" draggable="true" modal="true" resizable="false">
            <p:ajax event="close"  listener="#{zuordnenDialogController.closeDialog()}" />

             ...

        </p:dialog> 
```

**编辑1：**

这是一张图片，也许它有帮助

[http://i.stack.imgur.com/pGjes.jpg](http://i.stack.imgur.com/pGjes.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:54:48.143

你试过了吗

```
<p:ajax event="close"  listener="#{zuordnenDialogController.closeDialog()}" update=":nzTable"/> 
```

update=":nzTable" 带有完整路径，可能是：:form_main:nzTable

我想发表评论，但我没有足够的声誉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T17:41:37.047

您可以为对话框中的每个组件管理 ajax 事件，例如：

```
 <p:dialog id="zuordnenDialog" widgetVar="zuordnenDialogW" closeOnEscape="true" dynamic="true"
        header="Zuordnung" appendToBody="false" draggable="true" modal="true" resizable="false">

      <p:selectOneMenu id="idp" value="#{...}" converter="clientesConverter"  panelStyle="width:500px"  
                                         effect="fade" var="p" style="width:500px"  filter="true" filterMatchMode="contains">  

                            <f:selectItems value="#{comunMB.itemsClientes}"/>  

                            <f:ajax execute="@this"  listener="#{...}" render="table1 table2 table..." />
                        </p:selectOneMenu> 

    </p:dialog> 
```

通过这种方式，在编辑对话框时更改会显示在表格（或其他组件）中。您也可以使用就地组件。

# c++ - 使用类属性作为数组绑定

> ID：15807838
> 
> 赞同：1
> 
> 时间：2013-04-04T09:47:55.763
> 
> 标签：c++, class

我想这样做：

```
Class Obj{
private:
int a;
int b[a][3];

public:
Obj(int a);
} 
```

这样我就可以在创建对象时指定数组的大小。但是我得到这个编译错误： *错误：数组绑定不是整数常量*

我不想使用向量，有人知道我该怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:50:15.833

数组大小应该是`constant`. 只有一种方法，没有动态分配 - 为此类的所有数组使用预定义的常量。

```
class Obj{
private:
static constexr int a = 5;
int b[a][3];

public:
Obj();
}; 
```

如果你想要不同的大小，那么你应该动态分配内存，如果你不使用向量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:52:27.203

您应该使用动态分配：

```
b = new int *[a] ;
//memory allocated for  elements of each column.
for( int i = 0 ; i < a ; i++ )
   b[i] = new int[3]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:05:48.380

如果你想依赖扩展，那么 ISO C99 允许通过扩展使用可变长度数组，看看它[http://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html](http://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html)，这个扩展数组被声明为任何其他自动数组，但长度不是常量表达式。

副作用是您的代码将使用获得此扩展名的 compile 进行编译。

# sql - 如何根据 SQL 中的先前记录更新行？

> ID：15807839
> 
> 赞同：2
> 
> 时间：2013-04-04T09:47:55.767
> 
> 标签：sql

我有一张如下表：

```
ID  MARKET
2   INDIV
2   CPEINT
2   INDIV
2   INDIV
2   INDIV
2   INDIV
2   INDIV
5   INDIV
5   INDIV
5   CPEINT
5   INDIV
5   INDIV
5   INDIV
5   INDIV
5   INDIV
5   INDIV 
```

我想要的是根据 ID 和 MARKET 中的前几行更新 MARKET 列中的记录。如果之前的 MARKET 是 CPEINT 并且当前 ID 与之前的 ID 相同，则将当前 MARKET 替换为 CPEINT。我正在寻找的输出将是：

```
ID  MARKET
2   INDIV
2   CPEINT
2   CPEINT
2   CPEINT
2   CPEINT
2   CPEINT
2   CPEINT
5   INDIV
5   INDIV
5   CPEINT
5   CPEINT
5   CPEINT
5   CPEINT
5   CPEINT
5   CPEINT
5   CPEINT 
```

我可以使用 MERGE 或 UPDATE 之类的方法来执行此操作吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T10:20:38.500

请尝试查询 SQL 服务器：

```
;with T as(
    select 
        ROW_NUMBER() over (order by ID) RNum, * 
    From 
        YourTable)
    update c set MARKET='CPEINT'
    from T c join
    (select a.RNum, a.ID
    From T a LEFT JOIN T b on a.RNum=b.RNum+1
    where a.ID=b.ID and b.MARKET='CPEINT')x on c.RNum>=x.RNum AND c.ID=x.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:53:58.277

这可能会也可能不会满足您的要求。

```
update yourtable
set market = 'CPEINT'
where id in 
(select id 
from yourtable
where market = 'CPEINT')
and market = 'MARKET' 
```

# c# - Session_Start 在 asp.net 中不起作用

> ID：15807841
> 
> 赞同：0
> 
> 时间：2013-04-04T09:48:01.510
> 
> 标签：c#, asp.net, session

在我的 Global.cs 中，

```
namespace HitCounters
{
public class Global : System.Web.HttpApplication
{
    private static int totalNumberOfUsers = 0;
    private static int currentNumberOfUsers = 0;

    protected void Session_Start(Object sender, EventArgs e)
    {
        totalNumberOfUsers += 1;
        currentNumberOfUsers += 1;
    }

    protected void Session_End(Object sender, EventArgs e)
    {
        currentNumberOfUsers -= 1;
    }

    protected void Application_End(Object sender, EventArgs e)
    {

    }

    public static int TotalNumberOfUsers
    {
        get
        {
            return totalNumberOfUsers;
        }
    }

    public static int CurrentNumberOfUsers
    {
        get
        {
            return currentNumberOfUsers;
        }
    } 

 }
 } 
```

并且，在 Master Page 的 page_Load 处，

```
 countOnline.Text = HitCounters.Global.CurrentNumberOfUsers.ToString();
    countVisitor.Text = HitCounters.Global.TotalNumberOfUsers.ToString(); 
```

我认为 Session_Start 不起作用。访客总数和在线用户总数始终显示为零。我想知道为什么！我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:57:51.090

`<sessionState>`在您的 Web.config 中配置。

# java - 从网页和 Android 应用程序访问网络服务

> ID：15807842
> 
> 赞同：0
> 
> 时间：2013-04-04T09:48:01.460
> 
> 标签：java, android, web-services, web-applications

我计划开发一个 Web 服务，该服务应该可以从不同架构上的不同用户界面访问。由于我对它很陌生，我真的不知道一般设计应该是什么样子。

该服务运行在互联网上的服务器上，基本上应该向用户提供数据并让他们插入数据，但也应该能够做某事。根据用户请求任意（即从用户界面直接访问数据库从我的角度来看并不可取，但教我更好）。我的想法是只有服务器才能访问和管理数据库。

## 目前的计划

*   Hava 可以访问 Apache Derby 数据库的 Java 服务器
*   拥有一个通过 Java RMI 使用该服务的 Android 客户端
*   使用该服务的 Hava 网站 -是的*，如何？*

![目前的设计理念](https://i.stack.imgur.com/jtWat.jpg)

## 问题

### 描述场景的最佳或常用方法是什么？

*   应该使用哪些技术、框架、编程语言等？
*   Java RMI 使网络工作变得更加容易，我很乐意使用它。甚至可以使用网站上的技术吗？我是否需要一个 Java 小程序，这些天似乎并不常见？或者你还会用什么？
*   你会为 Android 应用程序使用 RMI 并为网站与服务器通信使用 HTTP/XML（我一点都不熟悉）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:48:44.950

You can find some ideas in [the talk of Virgil Dobjanschi from Google IO 2010](http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html). The talk presents architectural considerations for developing RESTful applications on the Android platform. It focuses on design patterns, platform integration and performance issues specific to the Android platform.

Some examples of this pattern are shown below:

*   [The RESTful Android project](https://github.com/josejuansanchez/restful-android).

*   [The RESTDroid project](https://github.com/PCreations/RESTDroid).

*   [A sample implementation of Pattern A](http://www.codeproject.com/Articles/429997/Sample-Implementation-of-Virgil-Dobjanschis-Rest-p) from Virgil Dobjanschi's talk.

Also, I suggest you a post by Neil Goodman about [modern techniques for implementing REST clients on Android 4.0 and below](http://neilgoodman.net/2011/12/26/modern-techniques-for-implementing-rest-clients-on-android-4-0-and-below-part-1/).

Maybe this documentation can be helpful.

# iphone - 如何查找是否启用了推送通知？

> ID：15807844
> 
> 赞同：0
> 
> 时间：2013-04-04T09:48:03.740
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

我想知道用户是否已经启用了 pus 通知，如何做到这一点？

我试过这个..

```
 UIRemoteNotificationType types = [[UIApplication sharedApplication] enabledRemoteNotificationTypes];
  if (types ==  UIRemoteNotificationTypeNone){

       NSLog(@"Push is off");

    } 
```

但它不起作用，“类型”总是给出值“7”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:38:14.293

`UIRemoteNotificationType`类型：

```
0 - None
1 - Badge,
2 - Sound,
4 - Alert,
5 - Badge & Alert Only,
6 - Alert & Sound Only,
7 - All Badge,Sound,Alert.
8 - NewsstandContentAvailability. 
```

# bash - 列出文件并使用 bash 在菜单中显示它们

> ID：15807845
> 
> 赞同：16
> 
> 时间：2013-04-04T09:48:03.853
> 
> 标签：bash

我正在尝试将目录中的文件用作 bash 脚本中的选项。用户应该能够选择一个，然后将所选文件的名称传递给变量。到目前为止，我可以获得文件列表，但经过几个小时的尝试，我无法弄清楚如何将它们显示为选项。

```
#!/bin/bash
prompt="Please select a file:"
options=( $(find -maxdepth 1 -print0 | xargs -0) )

PS3="$prompt "
select opt in "${options[@]}" "Quit"; do 

    case "$REPLY" in
    for i in "${options[@]}"
    do
    $i' ) echo "You picked $opt which is file $REPLY";;'
    done    
    $(( ${#options[@]}+1 )) ) echo "Goodbye!"; break;;
    *) echo "Invalid option. Try another one.";continue;;

    esac

done 
```

任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-04T09:58:23.823

`case`我认为这里不适合：

```
#!/bin/bash
prompt="Please select a file:"
options=( $(find -maxdepth 1 -print0 | xargs -0) )

PS3="$prompt "
select opt in "${options[@]}" "Quit" ; do 
    if (( REPLY == 1 + ${#options[@]} )) ; then
        exit

    elif (( REPLY > 0 && REPLY <= ${#options[@]} )) ; then
        echo  "You picked $opt which is file $REPLY"
        break

    else
        echo "Invalid option. Try another one."
    fi
done    

ls -ld $opt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-08T19:37:21.030

不要错过 percol、fzy、smenu 和朋友们。他们会很高兴地从标准输入中获取，呈现一个带有交互式过滤器的用户友好的选择菜单，然后再次将选定的行输出。

# linux - IOCTL Linux 设备驱动程序

> ID：15807846
> 
> 赞同：140
> 
> 时间：2013-04-04T09:48:05.243
> 
> 标签：linux, linux-kernel, driver, linux-device-driver, ioctl

谁能给我解释一下

1.  是什么`IOCTL`？
2.  这有什么用途？
3.  我该如何使用它？
4.  为什么我不能定义与 功能相同的新功能`IOCTL`？

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2013-04-06T22:11:45.477

该`ioctl`函数对于实现设备驱动程序以在设备上设置配置很有用。例如，具有检查和设置字体系列、字体大小等配置选项的打印机`ioctl`可用于获取当前字体以及将字体设置为新字体。用户应用程序用于`ioctl`向打印机发送代码，告诉它返回当前字体或将字体设置为新字体。

```
int ioctl(int fd, int request, ...) 
```

1.  `fd`是文件描述符，由`open`;返回
2.  `request`是请求代码。例如`GETFONT`将从打印机获取当前字体，`SETFONT`将在打印机上设置字体；
3.  第三个论点是`void *`。根据第二个参数，第三个参数可能存在也可能不存在，例如，如果第二个参数是`SETFONT`，则第三个参数可以是字体名称，例如`"Arial"`;

`int request`不仅仅是一个宏。用户应用程序需要生成请求代码和设备驱动程序模块来确定必须使用设备上的哪个配置。应用程序使用`ioctl`设备驱动程序模块中的请求代码发送请求代码，然后使用该请求代码来确定要执行的操作。

请求代码有 4 个主要部分

```
 1\. A Magic number - 8 bits
    2\. A sequence number - 8 bits
    3\. Argument type (typically 14 bits), if any.
    4\. Direction of data transfer (2 bits). 
```

如果请求代码是`SETFONT`在打印机上设置字体，则数据传输的方向是从用户应用程序到设备驱动程序模块（用户应用程序将字体名称发送`"Arial"`到打印机）。如果请求代码是`GETFONT`，则方向是从打印机到用户应用程序。

为了生成请求代码，Linux 提供了一些预定义的类似函数的宏。

1.`_IO(MAGIC, SEQ_NO)`都是 8 位，0 到 255，例如，假设我们要暂停打印机。这不需要数据传输。所以我们会生成如下的请求代码

```
#define PRIN_MAGIC 'P'
#define NUM 0
#define PAUSE_PRIN __IO(PRIN_MAGIC, NUM) 
```

现在`ioctl`用作

```
ret_val = ioctl(fd, PAUSE_PRIN); 
```

驱动模块中相应的系统调用将接收代码并暂停打印机。

2.  `__IOW(MAGIC, SEQ_NO, TYPE)` `MAGIC`and 和`SEQ_NO`上面一样，并且`TYPE`给出了下一个参数的类型，回忆一下`ioctl`is的第三个参数`void *`。W in`__IOW`表示数据流是从用户应用程序到驱动模块。例如，假设我们要将打印机字体设置为`"Arial"`.

```
#define PRIN_MAGIC 'S'
#define SEQ_NO 1
#define SETFONT __IOW(PRIN_MAGIC, SEQ_NO, unsigned long) 
```

更远，

```
char *font = "Arial";
ret_val = ioctl(fd, SETFONT, font); 
```

Now`font`是一个指针，这意味着它是一个最好表示为的地址`unsigned long`，因此第三部分`_IOW`提到了类型。此外，这个字体地址被传递给在设备驱动模块中实现的相应系统调用 as `unsigned long` ，我们需要在使用它之前将其转换为正确的类型。内核空间可以访问用户空间，因此这是可行的。另外两个类似函数的宏是`__IOR(MAGIC, SEQ_NO, TYPE)`，`__IORW(MAGIC, SEQ_NO, TYPE)`数据流将分别从内核空间到用户空间以及双向。

请让我知道这可不可以帮你！

* * *

## 回答 #2

> 赞同：108
> 
> 时间：2013-04-04T10:57:03.017

An `ioctl`，意思是“输入输出控制”是一种特定于设备的系统调用。Linux 中只有少数几个系统调用（300-400），不足以表达设备可能具有的所有独特功能。因此驱动程序可以定义一个允许用户空间应用程序向其发送命令的 ioctl。但是，ioctl 不是很灵活，而且往往会变得有点混乱（数十个“幻数”，它们是否可以正常工作），并且也可能是不安全的，因为您将缓冲区传递到内核 - 错误的处理可能会破坏事情很容易。

另一种选择是`sysfs`界面，您可以在其中设置一个文件`/sys/`并读取/写入该文件以从驱动程序获取信息和向驱动程序获取信息。如何设置的示例：

```
static ssize_t mydrvr_version_show(struct device *dev,
        struct device_attribute *attr, char *buf)
{
    return sprintf(buf, "%s\n", DRIVER_RELEASE);
}

static DEVICE_ATTR(version, S_IRUGO, mydrvr_version_show, NULL); 
```

在驱动程序设置期间：

```
device_create_file(dev, &dev_attr_version); 
```

然后，您将在 中为您的设备提供一个文件`/sys/`，例如，`/sys/block/myblk/version`用于块驱动程序。

另一种更常用的方法是 netlink，它是一种 IPC（进程间通信）方法，通过 BSD 套接字接口与您的驱动程序通信。例如，WiFi 驱动程序使用它。`libnl`然后，您使用or`libnl3`库从用户空间与它通信。

# git - 删除 git 中的远程提交

> ID：15807848
> 
> 赞同：2
> 
> 时间：2013-04-04T09:48:12.160
> 
> 标签：git

我找不到我的问题的有效解决方案：

如何在本地和远程存储库中删除提交。这是一种[解决方案](https://stackoverflow.com/questions/4647301/rolling-back-local-and-remote-git-repository-by-1-commit#)。但是当我尝试这个时，我可以`reset`在本地存储库中使用命令返回。但是我推不开。错误消息说： `remote: error: denying non-fast-forward refs/heads/master (you should pull first)` 但是在`pull`我的主人再次指向我要删除的提交之后。

你能帮我吗？

编辑 - 我的尝试：

```
$ git reset --hard HEAD^1
HEAD is now at 1c50f9c good commit

$ git push -f
Total 0 (delta 0), reused 0 (delta 0)
remote: error: denying non-fast-forward refs/heads/master (you should pull first)
To E:/reps/gf.git
 ! [remote rejected] master -> master (non-fast-forward)
error: failed to push some refs to 'E:/reps/gf.git' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T09:55:22.240

您的远程存储库可能具有不允许在服务器端进行非快进推送的设置。你有两个选择：

1.  联系服务器管理员，解释您的情况，并要求他们（暂时）取消 no-fast-forward-push 策略，例如`git config receive.denyNonFastForwards`. （你仍然需要`-f`旗帜来推动。）

2.  使用`git revert`代替`git reset`，并推送结果提交。提交及其逆向都是可见的，但有时这是无法避免的。除非原始提交包含敏感数据，否则这应该是一件大事——git 提交总是被还原。如果原始提交确实包含敏感数据，请参阅选项 1。

# python - python又一个愚蠢的调试

> ID：15807850
> 
> 赞同：1
> 
> 时间：2013-04-04T09:48:13.813
> 
> 标签：python

对不起，我有点痛苦，但我损坏了我的代码，我不明白出了什么问题。我刚刚删除了一个 if 语句，但现在看来 timedelta 不再被识别并且它破坏了代码。我很确定我没有删除任何参考。我在挠头，但找不到问题所在..

你知道出了什么问题吗？

```
import random
import datetime
import csv
from itertools import groupby

def generator():

    i=0
    while 1:
        yield random.randint(-1, 1), datetime.datetime.now()
        i=i+1

def keyfunc(timestamp,interval):
    xt = datetime.datetime(2013, 4,4)
    dt=timestamp
    delta_second =(dt - xt).seconds
    normalize_second = (delta_second / (interval*60)) * (interval*60)
    newtime = xt + timedelta(seconds=normalize_second)
    return newtime

mynumber = 100
for random_number, current_time in generator():
    mynumber += random_number
    reftime5min = keyfunc(current_time,5)

print mynumber,",", current_time, reftime5min 
```

我现在得到的错误是：

```
回溯（最近一次通话最后）：
  文件“”，第 35 行，在
  文件“”，第 28 行，在 keyfunc 中
NameError：未定义全局名称“timedelta”

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T09:51:07.147

更改`timedelta`为`datetime.timedelta`。您没有`timedelta`直接导入该类，因此您需要使用限定名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:50:00.303

```
from datetime import timedelta 
```

[http://docs.python.org/2/library/datetime.html](http://docs.python.org/2/library/datetime.html)

# c# - visual studio 2012 build 使用 unittest 框架工作 10.0->失败

> ID：15807851
> 
> 赞同：1
> 
> 时间：2013-04-04T09:48:13.847
> 
> 标签：c#, visual-studio-2010, unit-testing, visual-studio-2012, vs-unit-testing-framework

我们正在使用具有 VS 2012 的 TFS 构建服务器，并且团队项目具有单元测试。以前我们有 2010 年，一切都很好。我们重新安装了服务器，现在我们使用的是 VS2012。当单元测试在构建中开始时（根据 buildlog）MSTest.exe 在 Visual Studio 10 文件夹下执行。单元测试无法启动 - 日志中没有错误，但它只是挂起。

如果我手动运行命令（来自日志文件的片段）并用 Visual Studio 11 替换文件夹，则会执行单元测试。

为什么 VS 2012 使用 10 版本的 mstest？使用的所有其他 VS 可执行文件都是 11 版本？'Where `mstest.exe`' 表示它在同一服务器中的 11 个文件夹下。

为什么有 Visual Studio 10 文件夹 - 我们还没有在这个服务器上安装版本 10？

在单元测试项目中，引用了正确的单元测试框架（在 VS 11 文件夹下）-但根据属性，它们似乎也具有 10.0.0 版本。

**构建服务器日志有：**

* * *

找不到来自源 VSTTExecution 的事件 ID 0 的描述。引发此事件的组件未安装在本地计算机上，或者安装已损坏。您可以在本地计算机上安装或修复组件。

如果事件起源于另一台计算机，则显示信息必须与事件一起保存。

**活动中包含以下信息：**

```
(MSTest.exe, PID 3324, Thread 10) DIA initialization threw:
System.Runtime.InteropServices.COMException (0x80040154): Retrieving the COM class factory for component with CLSID {B86AE24D-BF2F-4AC9-B5A2-34B14E4CE11D} failed due to the following error: 80040154 Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)). 
```

在 Microsoft.VisualStudio.TestTools.Common.DiaHelper.GetSymbolsFileName（字符串 imagePath）

消息资源存在，但在字符串/消息表中找不到消息

* * *

(

```
QTAgent32.exe, PID 3780, Thread 12) Received exception calling Adapter.AbortTestRun: System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.InvalidCastException: Object must implement IConvertible.
   at System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider)
   at System.Runtime.Serialization.FormatterConverter.Convert(Object value, Type type)
   at System.Runtime.Serialization.SerializationInfo.GetValue(String name, Type type)
   at Microsoft.VisualStudio.TestTools.Common.SerializationHelper.GetField(Type fieldType, Object defaultValue)
   at Microsoft.VisualStudio.TestTools.Common.SerializationHelper.GetField[T]()
   at Microsoft.VisualStudio.TestTools.Common.TestResult..ctor(SerializationInfo info, StreamingContext context)
   at Microsoft.VisualStudio.TestTools.Common.TestResultAggregation..ctor(SerializationInfo info, StreamingContext context)
   at Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestResult..ctor(SerializationInfo info, StreamingContext context) 
```

--- 内部异常堆栈跟踪结束 ---

* * *

# php - 从数组末尾删除重复值

> ID：15807854
> 
> 赞同：0
> 
> 时间：2013-04-04T09:48:23.617
> 
> 标签：php, arrays

许多问题回答了如何删除数组的重复值，但是如何从数组**末尾删除重复值？**例如具有这些值的数组：

```
28, 56, 26, 369, 114, 26, 26, 26 
```

应该返回

```
28, 56, 26, 369, 114 
```

*请注意，它保留前 26 个，只应删除最后的重复项*

有没有办法在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:50:17.890

案例 1 - 如果要删除数组中的任何重复项。使用功能`array_unique()`

```
$array = array(28, 56, 26, 369, 114, 26, 26, 26);
$unique_values = array_unique($array);
var_dump($unique_values); 
```

[PHP array_unique](http://php.net/manual/en/function.array-unique.php)

案例 2 - 如果您只想在数组末尾删除重复项，那么如果在开始时有重复项，它们将被保留 - 它不是很漂亮的代码..

```
$arr = array(28, 56, 26, 26, 369, 369,  114, 26, 26, 26, 114);
$arr = array_reverse($arr);
$counts = array_count_values($arr);
foreach ($arr as $key => $value) {
    if(!isset($first_element))
        $first_element = $value;
    if($first_element != $value)
        break;
    if($counts[$value] > 1){
        unset($arr[$key]);
        $counts[$value] = $counts[$value] - 1;
    }
}
$arr = array_reverse($arr);
var_dump($arr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:58:31.113

```
$array = array(28, 56, 26, 369, 114, 26, 26, 26);

end($array);
$last = FALSE;
while (current($array) == prev($array)) {
    unset($array[key($array)]);
    $last = TRUE;
}
if ($last) {
    end($array);
    unset($array[key($array)]);
}
var_dump($array); 
```

# python - 对多级列表中的每个项目执行操作

> ID：15807855
> 
> 赞同：1
> 
> 时间：2013-04-04T09:48:29.260
> 
> 标签：python, list

假设我有一个类似的列表：

```
li = ['0', ['1', '2'], ['3', ['4', '5'], '6', ['7'], '8'], '9'] 
```

如何`int`以 Pythonic 方式对列表中的所有元素应用函数（例如 ）？
例子：

```
>>> func_on_all(li, int)
[0, [1, 2], [3, [4, 5], 6, [7], 8], 9] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T09:52:52.223

您可以使用此功能：

```
def to_int(lst):
    for i in lst:
        if isinstance(i, list):
            yield list(to_int(i))
        else:
            yield int(i) 
```

这是一个测试运行：

```
>>> li = ['0', ['1', '2'], ['3', ['4', '5'], '6', ['7'], '8'], '9']
>>> list(to_int(li))
[0, [1, 2], [3, [4, 5], 6, [7], 8], 9] 
```

请注意，这仅适用于嵌套列表，并且只能执行该`int`功能。我们可以使函数更通用，如下所示：

```
def deep_map(lst, f=int):  # the parameter `f` is the function
    for i in lst:
        if isinstance(i, collections.Iterable) and not isinstance(i, str):
            yield list(deep_map(i, f))
        else:
            yield f(i) 
```

这将允许我们使用列表以外的嵌套集合（例如元组），并且我们可以指定我们自己的函数来调用列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T09:56:57.873

单线第一个问题：

```
f = lambda obj, el_func: [f(el, el_func) for el in obj] if isinstance(obj, list) else el_func(obj)
f(li, int) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T10:02:53.417

我喜欢我的版本:)

```
def recursive_map(func, iterable, kind=list):
    if isinstance(iterable, kind):
        return map(lambda x: recursive_map(func, x), iterable)
    else:
        return func(iterable) 
```

传入`kind`您希望函数使用的类。

感谢波动性，忘记了`iter`:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T10:06:57.887

这是另一个：

```
def deploy(l, out) :

    if isinstance(l, list) :
        for i in l :
            deploy(i, out)
    else :
        out.append(l)

def applyFuncOnMultilevelList(li, func) :
    out = []
    deploy(li, out) 
    for i in out :
        func(i)

li = ['0', ['1', '2'], ['3', ['4', '5'], '6', ['7'], '8'], '9']
applyFuncOnMultilevelList(li, print) 
```

# internet-explorer - extjs：无法在 Internet Explorer 上的 IFrame 上拖动元素

> ID：15807857
> 
> 赞同：1
> 
> 时间：2013-04-04T09:48:34.880
> 
> 标签：internet-explorer, iframe, extjs, drag-and-drop, extjs4

我的测试代码如下所示：

```
Ext.Loader.setConfig({enabled:true});
Ext.Loader.setPath("Ext.ux", "http://cdn.sencha.io/ext-4.2.0-gpl/examples/ux");
Ext.require("Ext.ux.IFrame");
Ext.onReady(function()
{
    new Ext.container.Viewport(
    {
        items:
        [
            {
                xtype:"label",
                text:"Drag Source",
                style:"background:black;color:white;padding:20px",
                listeners:
                {
                    afterrender:function()
                    {
                        this.dragZone = new Ext.dd.DragZone(this.el,
                        {
                            getDragData: function (e)
                            {
                                var sourceEl = e.getTarget();
                                if(sourceEl)
                                {
                                    var d = sourceEl.cloneNode(true);
                                    d.id = Ext.id();
                                    return{
                                        sourceEl: sourceEl,
                                        ddel: d
                                    };
                                }
                            }
                        });
                    }
                }
            },
            {
                xtype:"uxiframe",
                width:"100%",
                height:"100%",
                src:"http://google.com"
            }
        ]
    });
}) 
```

当标签拖到“uxiframe”上时，“Ext.dd.DragZone”将不起作用。但它在 Opera 和 Chrome 等其他浏览器上运行良好。

感谢您提前提供任何帮助！

# angularjs - 在指令中，$watch 触发两次，将 newValue 恢复为原始的 $watch 触发前值

> ID：15807858
> 
> 赞同：1
> 
> 时间：2013-04-04T09:48:41.873
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

我很确定我做错了什么，因为我对 Angular 的经验很少。可能答案已经在stackoverflow的某个地方，我没有问（谷歌搜索）正确的问题。

我有这个非常简单的指令。它只是一个有四种状态的跨度，我想在每次点击跨度时改变它。每次单击都会将状态向前推进，然后循环返回。每个州都有不同的 CSS 类。我希望每次指令的值更改时父模型上的值都会更改（因此在隔离范围声明中使用“=”，对吗？）。

我对值进行了监视以更改类，以便每次值更改时都会更新css类。

**现在，问题是当我单击时，手表会使用 newValue 触发，但随后手表会再次触发 newValue 等于单击前的值。**

我认为这与脏检查和与父控制器模型的连接有关，但是，这样做的正确角度方式是什么？和/或有更好、更棱角分明的方式来获得相同的结果？

这里的指令：

```
.directive('square', function() {
    return {
        restrict: 'E',
        transclude: true,
        scope : {
            value : '=',
        },
        link: function(scope, elm, attrs, ctrl) {

            scope.valueToClass = function(value) {
                var result = 'square-empty';
                    if (value == '1') {
                        result = 'square-temp';
                    } else if (value == '2') {
                        result = 'square-confirmed';
                    } else if (value == '3') {
                        result = 'square-critical';
                    }
                return 'block-'+result;
            }

            scope.$watch('value', function(newValue, oldValue) {
                scope.blockClass = scope.valueToClass(newValue)

            }, true);

        },
        controller: function($scope, $element, $attrs) {
            $scope.changeValue = function() {
                $scope.value = ($scope.value+1) % 4;
            }
        },
        template : '<span class="{{blockClass}}"  ng-click="changeValue();">'+'</span>',
        replace: true
    };
}); 
```

这里[**>>小提琴<<**](http://jsfiddle.net/Duralumin/RFtEr/14/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:05:58.947

这是因为您在观察 $scope.block 数组的原始值（整数）的变化。

在控制器中试试这个

```
 $scope.block = [{value: 3}, {value: 2}, {value: 1}, {value: 0}]; 
```

然后在视图中：

```
<square ng-repeat="squareValue in block" value="squareValue.value"></square> 
```

（英语不是我的第一语言，所以很抱歉简短的回答）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T11:28:37.427

您不应该使用原始值来观察更改，因为由于 javascript 子范围中的原型继承会覆盖父范围值。请参阅非常好的文章，其中解释了所有原因。 [https://github.com/angular/angular.js/wiki/The-Nuances-of-Scope-Prototypal-Inheritance](https://github.com/angular/angular.js/wiki/The-Nuances-of-Scope-Prototypal-Inheritance)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T09:58:02.867

另一个可能对某人有帮助的答案是您需要检查 newVal 是否已更改， newVal 将始终被传入，因此您需要检查它是否不同，即：

```
$scope.$watch('someProperty', function(newVal, oldVal) {
    if (newVal !== oldVal) {
        // do something
    }
}); 
```

我发现这解决了我的 $watch 侦听器过早触发的问题，无论范围属性是否是原始的，即我的属性是一个整数 $scope.menuId。

# c# - 这里使用checked有什么意义

> ID：15807859
> 
> 赞同：8
> 
> 时间：2013-04-04T09:49:14.360
> 
> 标签：c#, .net

任何人都可以详细说明以下声明：

```
byte[] buffer = new Byte[checked((uint)Math.Min(32 * 1024, (int)objFileStream.Length))]; 
```

为什么我不应该使用

```
byte[] buffer = new Byte[32 * 1024]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T09:52:20.760

`objFileStream.Length`如果返回的数字大于`int.MaxValue`（2147483647），则尝试抛出异常，因为`Length`返回类型`Stream`（`long`我假设`objFileStream`是流）。在**.net**中，默认情况下不检查算术溢出。

下面的代码演示了这种情况：

```
long streamLength = long.MaxValue; //suppose buffer length is big

var res = checked( (int)(streamLength + 1) ); //exception will be thrown

Console.WriteLine( res ); //will print 0 in you comment checked keyword 
```

经过简短的分析，您可以减少下一条语句

```
new Byte[checked((uint)Math.Min(32 * 1024, (int)objFileStream.Length))]; 
```

到

```
new Byte[Math.Min(32 * 1024, checked((int)objFileStream.Length))]; 
```

个人建议：我不知道如何`OverflowException`在这里帮助你。`Math.Min`将随之而来的是，该数组的创建时间不会超过`32768`项目。如果您尝试`catch`在调用方法中的某个位置，您将无法推断出该错误的原因是什么，它可能来自被调用堆栈中的任何位置。

所以你可能不需要总是像你建议的那样分配大小为 32768 的数组

```
byte[] buffer = new Byte[32 * 1024]; 
```

但仍然使用`Math.Min`这样你就可以节省存储空间，如果`objFileStream.Length`会返回小数字

```
byte[] buffer = new Byte[Math.Min(32 * 1024, objFileStream.Length)]; 
```

# ssis - 设计器组件上的 SSIS 2012 SP1“null 值对流无效”错误

> ID：15807861
> 
> 赞同：3
> 
> 时间：2013-04-04T09:49:24.757
> 
> 标签：ssis, sql-server-2012, sql-server-2012-datatools, ssis-2012, ssdt-bi

我刚刚将一个项目从 SSIS 2005 迁移到 SSIS 2012

除了项目之外，我还有一个自定义管道组件，它也被迁移到 .NET 4.0，并像往常一样安装在 SQL Server DTS 目录和 GAC 中。

迁移后，当我尝试打开和配置迁移的组件时，出现错误：“null 值对流无效”。

该错误仅发生在 VS 2012 的“SSDT for BI”中。当我尝试在 SQL Server Data Tools（VS 2010，而不是 2012，shell）中打开并使用该组件时，它可以正常工作。

因此，这是 SQL Server 2012 SP1 和 SSDT for BI for VS2012 独有的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:52:18.377

此问题会影响 SQL Server 2012 SSIS，并且在某些情况下，它甚至不允许打开 SSIS 包。

此错误已通过可从此页面下载的 Microsoft 补丁解决：

[微软知识库 2832017](http://support.microsoft.com/kb/2832017)

特别是要解决VS中的问题，因为VS是32位应用程序，你只需要安装x86下载。

# search - SharePoint 2013 搜索显示奇怪的结果计数

> ID：15807862
> 
> 赞同：1
> 
> 时间：2013-04-04T09:49:25.070
> 
> 标签：search, sharepoint-2013

好的，我刚刚将我的 2010 解决方案转换为 2013。我使用搜索 Web 部件作为文章存档。我已将其配置为仅显示“Artikkel”类型的内容类型，并每页显示 10 个条目。当我加载页面时，它显示了前 10 篇文章，但在页脚中显示“大约 109 个结果”，它只有第 1 页和第 2 页。当我导航到第 2 页时，它变为“大约 73 个结果”和页面3 出现。当我单击第 3 页时，它显示“大约 67 个结果”并出现第 4 页......等等......查看图片。这是在 IE 中，在 FireFox 中是相同的行为，但数字不同。这里发生了什么？

![设置](https://i.stack.imgur.com/0BPgL.jpg)

![在第 1 页](https://i.stack.imgur.com/cssvE.jpg)

![在第 2 页](https://i.stack.imgur.com/4zZKE.jpg)

![在第 3 页](https://i.stack.imgur.com/FOwFv.jpg)

![在第 4 页](https://i.stack.imgur.com/ihJgx.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:59:19.790

您是否碰巧为您的 Search Service 应用程序配置了自定义的安全后修剪器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T01:52:19.203

这是设计使然。有关更多详细信息，请参见此处：http: [//social.technet.microsoft.com/Forums/en-US/10638572-9240-44f5-a650-a0ff0782ee44/sharepoint-2010-search-result-count-inconsistent](http://social.technet.microsoft.com/Forums/en-US/10638572-9240-44f5-a650-a0ff0782ee44/sharepoint-2010-search-result-count-inconsistent)

简而言之，“在每次回发时，OOB 搜索结果分页控件都会调用搜索 API，并且 SharePoint 针对同一查询返回不同的搜索计数。”

一个可能的解决方案在这里：

[http://spbreed.wordpress.com/2013/09/14/sharepoint-2013-solution-to-inconsistent-search-results-count/](http://spbreed.wordpress.com/2013/09/14/sharepoint-2013-solution-to-inconsistent-search-results-count/)

# ios - 图像 Obj-c 水平滚动视图中的旋转动画

> ID：15807863
> 
> 赞同：0
> 
> 时间：2013-04-04T09:49:27.117
> 
> 标签：ios, objective-c, rotation, scrollview

我有一个问题，我想在水平滚动视图中的图像上放一点旋转动画。当它们滑入和滑出时，它们应该旋转。有谁知道如何做到这一点？我希望它们在我滚动时旋转。

我尝试了一些东西，但是当我滚动时它不旋转（只有第一张图片）我做了这样的事情：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    int page = scrollView.contentOffset.x / scrollView.frame.size.width;
    UIImageView *view = [scrollView.subviews objectAtIndex: page];

    if(scrollView.contentOffset.x > lastX)
    {
        NSLog(@"scroll right");
        [view setTransform: CGAffineTransformMakeRotation(M_PI / scrollView.contentOffset.x + 0.1)];

    }
    else if(scrollView.contentOffset.x < lastX)
    {
        NSLog(@"scroll left");
        [view setTransform: CGAffineTransformMakeRotation(M_PI / scrollView.contentOffset.x - 0.1)];
    }
    else
    {
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:57:22.170

您可以使用 CGAffineTransformRotate。但在你必须设置 imageView 的锚点之前。默认情况下，它设置为 (0.5, 0.5)，即图像将从中心旋转。

```
[UIView animateWithDuration:1 delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
    imageView.transform= CGAffineTransformMakeRotation(degreeInRadians); // -- 2 --
} completion:^(BOOL finished){
    // left blank
}]; 
```

# iphone - 烦人的“[环境：沙盒]”警报

> ID：15807869
> 
> 赞同：44
> 
> 时间：2013-04-04T09:49:52.073
> 
> 标签：iphone, ios, objective-c, ipad, storekit

在测试我们的 iOS 应用程序的 beta 版本时，我们最近看到一个警报，其中仅包含以下文本“[环境：沙盒]”

我的猜测是这是应用商店过程中的一个错误，但我不确定。

有没有人遇到过这个问题？你知道为什么吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-04T12:17:27.660

## 更新：很可能是暂时的 Apple 故障。我们的客户也开始打电话报告这个问题。

## 更新 2：现在似乎已修复。

![在此处输入图像描述](https://i.stack.imgur.com/mNhGi.png)

这开始在今天早些时候突然发生。奇怪的是，我们使用的是 AdHoc/Enterprise 构建，其中我们不能使用 IAP。对我来说，这看起来有点像苹果方面的服务器/时间相关问题。奇怪的。最奇怪的是该应用程序是“生产”构建，而不是调试构建。

我怀疑这是暂时的事情，因为它突然开始发生并且（希望）会再次消失。

有趣的是，以前运行良好的旧生产版本突然开始在启动时一直显示此警报。我可以在我所有的设备上重现它，所以它似乎与构建本身没有任何关系。

一旦我在系统设置中退出“iTunes 和 App Store”面板，这种情况就会停止。所以我怀疑 App Store/iTunes 基础设施有问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T11:29:55.903

我遇到了同样的问题，我认为这只是一个提醒，让您知道您已使用真实的 AppleID 帐户登录，但您正在使用沙盒应用商店，因此无法购买任何东西。

您可以通过退出当前的 AppleID 帐户来修复它（设置 > iTunes 和 App Store > 单击您的 AppleID > 退出）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T19:20:20.260

我整天也有这个。根据 Apple 论坛 ( [https://devforums.apple.com/message/800016#800016](https://devforums.apple.com/message/800016#800016) ) 上的帖子，现在应该已修复。

> 好的，我们已经在服务器上进行了更新，应该可以解决这个问题。如果您仍然发现此空警报出现问题，请在此处发布。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-04T10:07:05.427

我在我们的应用程序中注意到了同样的情况。似乎它来自电话：

```
[[SKPaymentQueue defaultQueue] addTransactionObserver:self]; 
```

当我删除该行时，不会显示警报。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-04T14:25:38.853

另一个确认，这必须是一个临时的苹果错误，我现有的应用程序开始产生相同的结果，也是我当前的项目，其中我禁用了所有 Storekit 功能，现在它已经消失了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T13:10:18.530

如果你们所有人都在使用它，我有一个想法可能与 TestFlightApp 有关。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-04T14:08:51.337

我们仅针对具有发布配置的应用程序收到此警报，即 IAP 就绪 - 这意味着，它们链接 StoreKit.framework 并将交易观察者注册到默认支付队列 - 但在 iTunesConnect 中没有设置 IAP 产品. 简单地设置一个应该是 App Store 应用程序的临时解决方案。当然，这对于企业应用程序来说是没有选择的。

一些用户已经在 Apple 支持社区中抱怨此问题[https://discussions.apple.com/message/21696486?searchText=environment%20sandbox#21696486](https://discussions.apple.com/message/21696486?searchText=environment%20sandbox#21696486)

所以我们可以期待苹果会在接下来的几个小时/几天内解决这个问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-04T17:52:41.190

我们的一个临时解决方法是将设备置于飞行模式，或退出商店。对于测试人员来说，飞行模式似乎比注销和重新登录更容易，但可能会干扰其他事情。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-15T12:04:01.400

这个问题是因为无效的测试用户帐户。只需在 itunesconnect 中创建一个测试用户帐户，然后在设备中使用该帐户登录即可。它将解决问题。**当您在没有有效测试用户帐户的情况下使用 inAppPurchase 时，就会发生这种情况。**

:-)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-10-30T08:26:16.347

飞行模式是很好的解决方案，但不是永久性的。如果您无法对设备进行任何操作，甚至打开飞行模式，尝试锁定您的设备，然后打开飞行模式。解锁您的设备并保持飞行模式几分钟。然后一旦关闭，消息会消失一段时间。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-02-15T20:28:29.593

我建议进入设置 -> 蜂窝数据并禁用对您怀疑导致此问题的任何应用程序的访问。这是比飞行模式更好的解决方案，因为它至少允许您访问其他应用程序而几乎没有中断。你只需要远离无线网络。

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2013-04-04T16:26:05.550

首先，退出游戏中心。然后用 ifundbox 或者 itools 输入这个地址：/var/mobile/Library/Caches/ 找到这个文件并备份：com.apple.mobile.installation.plist

将其复制到您的 PC 并删除这些代码：

```
<key>ProfileValidated</key>
<true/>
<key>SignerIdentity</key>
<string>TDMTANF Bypass</string> 
```

然后替换这个文件。

登录游戏中心，一切都恢复了。

顺便问一句：你们都是**5.1.1版本**的吧？

# list - jqGrid 在表单编辑中使用链式选择列表出现问题

> ID：15807883
> 
> 赞同：0
> 
> 时间：2013-04-04T09:50:25.303
> 
> 标签：list, select, jqgrid, dialog, chained

在这个论坛上寻找一些解决这些问题的方法但没有成功之后，我希望有人能花一些时间来推动我了解发生了什么以及如何解决它。

这是麻烦的快照：

![在此处输入图像描述](https://i.stack.imgur.com/zIAdH.png)

以及来自服务器的 JSON 响应：

```
{"page":"1","total":1017,"records":"20335","rows":[{"id":"10390","cell":["10390",
" MM23398A","***.REVISION NE PAS UTILISER","ECHANGEUR","Echangeurs complets
\u00e0 plaques","","","","","","0","1"]},{"id":"1","cell":["1","\"304010","Joint
arm\u00e9 NE PAS UTILISER voir Z304010","VANNE","Pi\u00e8ces d\u00e9tach\u00e9es 
de vannes","","","","54.00","","0","4"]},{"id":"13583","cell":["13583","#POMPES"
,"Article g\u00e9n\u00e9rique pompes.","POMPE","Pompes centrifuges compl\u00e8tes
PANTHER","","","","","","0","3"]},{"id":"3","cell":["3","#POMPES\/10944\/0001",
"","ECHANGEUR","Echangeurs complets \u00e0 plaques","","","","","","0","1"]},
{"id":"4","cell":["4","#POMPES\/10944\/0002","","ECHANGEUR","Echangeurs complets 
\u00e0 plaques","","","","","","0","1"]},{"id":"5","cell":["5","#POMPES\/10971
\/0003","Article g\u00e9n\u00e9rique pompes","POMPE","Pompes centrifuges compl
\u00e8tes PANTHER","","","","","","0","3"]} 
```

（最后一个单元格是上面选定的行）

如您所见，所选行中的信息和编辑表单（'S/famille'）中的信息不相似！这是因为第二个列表框没有填充好项目，这取决于第一个列表框。

我怎样才能用好的项目初始化这个列表？根据论坛上的一些帖子，我尝试了几种方法都没有成功。

**2013 年 4 月 5 日更新**

首先，这些列表框的 colModels ：

```
 {name:'fam',index:'f.code', width:80,
            formoptions:{
                elmprefix:"<span style='visibility:hidden;'>&nbsp;&nbsp;(<span style='color:red;'>*</span>)&nbsp;</span>"
            },
            editable:true,
            edittype:'select',
            editoptions:{
                dataUrl:'selfam.php',
                dataEvents: [
                    {
                        type: 'change',
                        fn: function(e) {
                            $.ajax({
                                url:'selsfm.php?id='+$(e.target).val(),
                                async:false,
                                mType:'GET',
                                success:function(data){
                                    $("#tr_sfm select.FormElement").html(data);
                                }
                            });

                        }
                    }
                ]
            }
        }, 
        {name:'sfm',index:'s.code', width:80,
            formoptions:{
                elmprefix:"<span style='visibility:hidden;'>&nbsp;&nbsp;(<span style='color:red;'>*</span>)&nbsp;</span>"
            },
            editable:true,
            edittype:'select',
            cellattr: function (rowId, val, rawObject, cm, rdata) {
                return ' title="'+rawObject[13]+'"';
            }
        }, 
```

以及用于编辑按钮的代码，我从 rowdata 中获取 id 用于最初加载第二个列表框，并在单击导航按钮时从上一行/下一行获取 id：

```
 myGrid.jqGrid('navGrid','#tab21p',{search:false,del:false}, 
    { // edit options
        width:500,
        modal:true,
        closeOnEscape:true,
        recreateForm: true,
        editCaption:"Modifier un ARTICLE",
        onInitializeForm: function(form) {
            rowdata = myGrid.jqGrid('getRowData',selectedId);
            id_fam=rowdata['fam_id'];
            id_sfm=rowdata['sfm_id'];
            $.ajax({
                url:'selsfm.php?id='+id_fam+'&edit',
                async:false,
                mType:'GET',
                success:function(data){
                    $("#tr_sfm select.FormElement").html(data);
                    $("#tr_sfm select.FormElement").val(id_sfm);
                }
            });
        },
        onclickPgButtons : function (whichbutton, formid, rowid) {
            var row = myGrid.jqGrid('getGridParam','selrow');
            if(whichbutton=='next'){row+=1;}else{row-=1;}
            rowdata = myGrid.jqGrid('getRowData',row);
            id_fam=rowdata['fam_id'];
            id_sfm=rowdata['sfm_id'];
        } 
    },
    {    // add options
        width:500,
        modal:true,
        closeOnEscape:true,
        recreateForm: true,
        addCaption:"Créer un ARTICLE",
        onInitializeForm: function(form) {
            id_fam=1;
            id_sfm=1;
            $.ajax({
                url:'selsfm.php?id='+id_fam+'&add',
                async:false,
                mType:'GET',
                success:function(data){
                    $("#tr_sfm select.FormElement").html(data);
                    $("#tr_sfm select.FormElement").val(id_sfm);
                }
            });
    },
    {}, //del options
    {} //search options
); 
```

最后，当从主网格中选择一行时，我从 rowdata 中获取 id 来加载第二个列表：

```
 onSelectRow:function(id,status){
        selectedId=id;
        rowdata = myGrid.jqGrid('getRowData',id);
        id_fam=rowdata['fam_id'];
        id_sfm=rowdata['sfm_id'];
        $.ajax({
            url:'selsfm.php?id='+id_fam+'&select',
            async:false,
            mType:'GET',
            success:function(data){
                $("#tr_sfm select.FormElement").html(data);
                $("#tr_sfm select.FormElement").val(id_sfm);
            }
        });
    }, 
```

奥列格，如果你有时间看看，非常感谢你告诉我关于这段代码的评论，这样我就可以减少新手了！再次感谢您分享您的经验。祝你今天过得愉快。继和

**2013 年 4 月 8 日更新**

我应用了 Oleg 的一些评论，让我获得更清晰的代码。非常感谢奥列格，我非常感谢您的经验推动。因为你，我越来越爱 jqGrid。

1.  关于'dataEvents'，我不明白你为什么告诉我使用它，e.target。我已经看到它可以在编辑选项中使用，但我不知道你的意思。
2.  当我编辑一行并使用 pgButtons 导航时，会使用变量“selectedId”。如果我不记住新的行 ID，则第二个列表框不会更新并且与第一个框不同。
3.  一个新点，当我验证表单时，我在 Firebug 中看到所有发布到服务器的对。 ![在此处输入图像描述](https://i.stack.imgur.com/mfWdj.png)

如您所见，第一个元素是空白的，有一个值，在我看来它是“sfm”，即第二个列表框的 colName。请您知道为什么会发生这种情况以及如何解决它？

我希望不要用这些连续的问题来打扰你。我没有找到任何可以给我一些关于编码 jqGrid 的知识的书。我希望这几乎可以存在。提前感谢您花时间。祝你今天过得愉快。继和

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:54:03.407

jqGrid 不包含任何对依赖选择的内置支持。

如果您确实需要基于实现依赖选择，我可以转发[答案](https://stackoverflow.com/a/4480184/315935)。它显示了如何根据第一个选择的更改*手动*更改第二个（依赖）选择的内容。

一般来说，jqGrid 需要一些灵活的方式来根据新参数（例如新参数）*刷新一些选择。*`dataUrl`

# c++ - 实现“静态观察者模式”

> ID：15807886
> 
> 赞同：2
> 
> 时间：2013-04-04T09:50:33.550
> 
> 标签：c++, observer-pattern

我有一个带有方法模板的类：

```
struct Subject
{
  template <typename T>
  void doSomething()
  {
    ..
  }
}; 
```

现在，无论何时`doSomething`（使用 any `T`），我都希望通知“观察者”：

```
 template <typename T>
  void onDoSomething()
  {
    ..
  } 
```

观察者是一个方法模板很重要（包含方法的类模板也可以工作）。如果不是，我可以实现通用观察者模式。

可以修改`Subject::doSomething()`，以便它调用一个方法。但是，该类`Subject`不应该“知道”具体的观察者/观察者方法。

这背后的想法是：我`Subject`在两个项目中使用。我只需要（并且拥有）其中一个观察者。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:24:51.980

艰难的一个。它似乎归结为

> 通知必须在编译时可解析（它是一个模板）

同时，

> 通知在编译时不应该是可解析的（`Subject`不应该知道观察者）

我可以想到两种方法来做到这一点：

* * *

`1.`添加一个重载`doSomething`：

```
template <typename T, typename Observer>
void doSomething()
{
  doSomething<T>();
  Observer::onDoSomething<T>();
} 
```

然后在项目A中调用单参数版本，在项目B中调用双参数版本。

* * *

`2.`让定义的文件`Subject`包含一个标题，该标题将在每个项目中进行不同/不同的配置：

**主题.h**

```
#include "observer_def.hpp"

struct Subject
{
  template <typename T>
  void doSomething()
  {
    ..
    notifyDoSomething<T>();
  }
}; 
```

**项目 A 中的observer_def.hpp**：

```
template <typename>
inline void notifyDoSomething() {} 
```

**项目 B 中的 observer_def.hpp**：

```
template <typename T>
inline void notifyDoSomething()
{
  MyObserver::onDoSomething<T>();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:06:37.160

我终于通过模板专业化找到了一个令人满意的解决方案：

```
///signaling struct. Could be replaced with any other type.
struct SpecializedObserver{};

///unspecialized:
template <typename>
struct Observer
{
    template <typename T>
    static void onDoSomething()
    {
        //default: do nothing.
    }
};

///optional. Specialize in project A or leave aside in project B:
template<>
struct Observer<SpecializedObserver>
{
    template <typename T>
    static void onDoSomething()
    {
        std::cout << "doing something with " << typeid(T).name() << std::endl; 
    }
};

struct Subject
{
    template <typename T>
    void doSomething()
    {
      Observer<SpecializedObserver>::onDoSomething<T>();
      ..
    }
}; 
```

如果我不想要观察者，此解决方案不需要任何操作。如果我想要一个，我会专门使用 Observer 模板，如上所示。

**编辑：**这在我的测试中运行良好，但是问题是我如何在具有不同编译单元的场景中使用它——我应该在哪里定义专业化？

# jquery - 带有 Cycle2 的自定义寻呼机链接文本

> ID：15807889
> 
> 赞同：0
> 
> 时间：2013-04-04T09:50:40.230
> 
> 标签：jquery, slideshow

这个问题是关于根据这里的演示在malsup的cycle2 jquery插件中自定义寻呼机的链接：http: [//www.malsup.com/jquery/cycle2/demo/pager.php](http://www.malsup.com/jquery/cycle2/demo/pager.php)。我正在尝试将幻灯片的 alt 属性传递给寻呼机模板，但不知道如何。如果您对幻灯片的编号（1、2、3 等）仅作为寻呼机链接中的文本感到满意，那么使用带有 {{slideNum}} 的幻灯片编号的标准方法可以正常工作。但是我需要自定义该内容。如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:31:22.763

我最终选择了更适合定制的 Bootstrap Carousel。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T21:08:51.517

您可以使用幻灯片的任何属性。{{alt}} 可以正常工作。请参见下面的代码：

```
data-cycle-pager-template="<a href="#" ><img src='{{src}}' width=20 height=20></a>" 
```

JQuery Cycle 页面上的此链接包含您正在寻找的文档：

[http://jquery.malsup.com/cycle2/demo/pager.php](http://jquery.malsup.com/cycle2/demo/pager.php)

# asp.net-mvc - EF 外键属性不可为空

> ID：15807890
> 
> 赞同：0
> 
> 时间：2013-04-04T09:50:45.330
> 
> 标签：asp.net-mvc, entity-framework

我有两个完全相同的数据库表，一个 prod 和一个 dev。每当我部署到开发数据库时，一切正常。prod 数据库允许我尝试使用 EF 和 MVC 将数据写回数据库时引发此错误。

```
System.InvalidOperationException: The operation failed: The relationship could not be changed because one or more of the foreign-key properties is non-nullable. When a change is made to a relationship, the related foreign-key property is set to a null value. If the foreign-key does not support null values, a new relationship must be defined, the foreign-key property must be assigned another non-null value, or the unrelated object must be deleted.
   at System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options)
   at System.Data.Entity.Internal.InternalContext.SaveChanges() 
```

当然，我已经检查了这个[http://blogs.msdn.com/b/dsimmons/archive/2010/01/31/deleting-foreign-key-relationships-in-ef4.aspx](http://blogs.msdn.com/b/dsimmons/archive/2010/01/31/deleting-foreign-key-relationships-in-ef4.aspx)

似乎我的 EF 代码没有问题，纯粹是 db 表问题无论如何我可以找到更多详细信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:19:09.137

在 EF4 中删除外键关系关于该问题的好文章 [http://blogs.msdn.com/b/dsimmons/archive/2010/01/31/deleting-foreign-key-relationships-in-ef4.aspx](http://blogs.msdn.com/b/dsimmons/archive/2010/01/31/deleting-foreign-key-relationships-in-ef4.aspx)

# symfony - Symfony2 具有特定规则的复数翻译（当数字以特定数字结尾时）

> ID：15807891
> 
> 赞同：1
> 
> 时间：2013-04-04T09:50:45.543
> 
> 标签：symfony, translation, plural

我正在尝试将结果计数翻译为立陶宛语，并且有一些特定的规则。我将尝试解释它们：

*   所有计数都以零结尾（0、10、20 ... 1050、1060...）并且介于 12 和 19 之间（包括 12...19）
*   所有计数都以 1 结尾，除了以 11 结尾（1、21、31 ... 1221、1231 ... 但不是 11、111、211 ... 2311、2411）
*   以上未列出的所有其他（包括 2...9 和超过 21 的上述规则不适用）

我尝试过这样的事情（使用 YAML），但偶数`40`不符合规则：

```
'%count% Results, ': '{0,*0}%count% rezultatų |{1,*1}%count% rezultatas |]1,10[%count% rezultatai |]10,20[%count% rezultatų ' 
```

甚至可以使用 YAML 做类似的事情吗？通过上面的例子，我得到：

> 渲染模板期间引发异常（“无法为“{0,*0}%count% rezultatų |{1,*1}%count% rezultatas |]1,10[%count% rezultatai |]10,20[%count% rezultatų " 区域设置为 "lt"。仔细检查这个翻译是否有正确的复数选项（例如，“有一个苹果|有 %count% 个苹果”）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T11:26:00.743

Symfony2 的 Translator 仅支持[ISO 31-11 表示法](http://en.wikipedia.org/wiki/Interval_%28mathematics%29#Notations_for_intervals)。该格式没有`*`您正在使用的通配图。Symfony2 目前无法实现您想要做的事情。

但是，您可以扩展 Symfony 的 Translator 并添加此功能。您可以通过覆盖`Symfony\Component\Translation\MessageSelector`类、添加功能然后将服务参数更改`translator.selector.class`为您的类名来做到这一点。例如：

```
// src/Acme/TranslationExtraBundle/Translation/MessageSelector.php
namespace Acme\TranslationExtraBundle\Translation;

use Symfony\Component\Translation\MessageSelector as BaseMessageSelector;

class MessageSelector extends BaseMessageSelector
{
    public function choose($message, $number, $locale)
    {
        // ... your special logic

        return parent::choose($message, $number, $locale);
    }
} 
```

```
parameters:
    translator.selector.class: Acme\TranslationExtraBundle\Translation\MessageSelector 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T13:16:38.813

因此，我试图在 Wouters 回答之后解决我的问题，并发现存在`Symfony\Component\Translation\PluralizationRules`并且立陶宛语已经存在。我所要做的就是从我的翻译行中删除间隔，它现在可以按预期工作。

```
'%count% Results, ': '%count% rezultatas |%count% rezultatai |%count% rezultatų ' 
```

# jquery - Metro Style Datatable 样式化 jquery 数据表

> ID：15807893
> 
> 赞同：0
> 
> 时间：2013-04-04T09:50:54.343
> 
> 标签：jquery, html, css, datatables

是否有适用于 JQuery Datatables 的 Metro Style CSS 样式插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:53:28.360

看看[这里](http://www.drewgreenwell.com/projects/metrojs)

或者你可以自己创建一个。Metro 风格很容易用 Segoe 字体复制

# android - 自定义属性不适用于 android 中的主题

> ID：15807894
> 
> 赞同：1
> 
> 时间：2013-04-04T09:51:04.050
> 
> 标签：android

在我的`attr.xml`中，我定义`descriptor_bg`为：

```
</declare-styleable>    
    <attr name="descriptor_bg" format="reference|color" />
    </declare-styleable> 
```

并在`style.xml`：

```
<style name="Theme_blue">
    <item name="descriptor_bg">@android:color/black</item>
    <item name="android:windowNoTitle">true</item>
</style> 
```

我使用了上述属性，例如：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" >
<gradient
    android:angle="90" />
<solid android:color="@attr/descriptor_bg"/>
<stroke
    android:width="2dp"
    android:color="@color/blue_stroke_bg" /> 
```

但是我遇到了一个例外，例如：

`android.content.res.Resources$NotFoundException: File res/drawable-mdpi/descriptor_bg.xml`

来自可绘制资源 ID #0x7f020006

```
java.lang.UnsupportedOperationException: Can't convert to color: type=0x1
File res/drawable-mdpi/descriptor_bg.xml from drawable resource ID #0x7f020006 
```

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-30T13:11:27.167

我认为正确的语法是**?attr/descriptor_bg**。

不幸的是，这可能无法解决您的问题，因为 XML 可绘制对象不支持主题属性。不过，这已在 L-preview 版本中得到[修复。](https://code.google.com/p/android/issues/detail?id=26251)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:59:15.093

我想您需要坚持使用单一格式标识符，例如：

```
<attr name="descriptor_bg" format="color" /> 
```

它应该自动从 RGB 值或参考转换颜色。

# javascript - 打印带有方向的谷歌地图

> ID：15807896
> 
> 赞同：4
> 
> 时间：2013-04-04T09:51:09.107
> 
> 标签：javascript, google-maps-api-3

我的 webapp 上有谷歌地图 - 使用 JavaScript API V3。我让我的用户能够使用谷歌地图方向管理一些路线。现在，我的问题是我想让他们能够打印它（只是地图，而不是整个网站）。

我尝试了以下方法：

```
var OpenWindow = window.open("_blank", "", '');
var contents = document.getElementById("mapMainCanvas");
OpenWindow.document.write(contents.innerHTML); 
```

这确实打开了一个带有地图的新标签，但没有方向。此外，我在 API 中找不到任何“打印”选项。有人解决了这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-21T11:02:48.450

试试这个：

```
var content = document.getElementByID('mapMainCanvas'); //has to be first.
var win = window.open();
win.document.write(content);
win.print();
win.close(); 
```

我希望它会奏效！

（请让我知道是否有。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:52:21.330

您能否创建一个打印样式表并使用 CSS 使其仅打印出地图，隐藏其他所有内容？如果您希望用户能够正常打印该页面，您可能需要使用 jQuery/other 来处理类。

可以在此处找到有关从打印样式表开始的说明：http: [//coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet/](http://coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet/)

# knockout.js - 如何识别复选框仅选中动态创建淘汰赛

> ID：15807898
> 
> 赞同：0
> 
> 时间：2013-04-04T09:51:17.840
> 
> 标签：knockout.js

我尝试使用此代码识别动态创建复选框。当我选中复选框时，它给出了正确的值，但我选中了 2 个复选框并取消选中了一个，但无法识别我选中或未选中的内容....

```
<tbody data-bind="foreach: customers" id="tbody_tr">
    @*   <tr style="border: solid" data-bind="click: $root.setSelectedUser" id="updtr">*@
        <tr style="border: solid" id="updtr">
           <td><input class="userckselectedbox" type="checkbox" data-bind="event:{checked: $root.selectedUserNames }" /></td>
            <td><span data-bind="text: ID"></span></td>
            <td><span data-bind="text: Name"></span></td>
            <td><span data-bind="text:Dateofbirth"></span></td>  
            <td><label data-bind="click:$root.setSelectedUser">ok</label></td>                          
        </tr>
    </tbody> 
```

**强文本**

```
self.selectedUserNames = function getdata(user)
        {

            alert(user.Name);
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:41:29.980

我根据您的要求创建了一个小提琴。检查这个：

[**工作小提琴**](http://jsbin.com/opefip/1/edit)。

让我知道这是否有帮助！

# jquery - jQuery选择带有变量的元素

> ID：15807902
> 
> 赞同：0
> 
> 时间：2013-04-04T09:51:25.807
> 
> 标签：jquery, ajax

我正在尝试使用 JQuery 来接收由名称值和分数值组成的响应。该代码应该将响应名称与显示分数的表中的名称匹配，然后更新该名称表行中的分数单元格。问题是，我不知道如何选择表格元素。

这是功能：

```
function rollBall() {
var pins = $('#pins').val();
        $.ajax({
            type: "POST",  
            url: "/ajaxjqjsbowling/play.htm",  
            data: "pins=" + pins,  
            success: function(response){
                if(response.status == "SUCCESS"){
                    var cname = response.result.currPlayName;
                    var cscore = response.result.currPlayScore;

                $("td#plName [name = cname] + td#plScore").replaceWith('' + cscore);
            }

        },  
        error: function(e){  
          alert('Error: ' + e);  
        }  
      });
} 
```

这是表格代码：

```
<table id = "playerslist">
    <c:forEach var="player" items="${players}">
    <tr id = "htmlplayerno"><td> ${player.htmlPlayerNo}:</td><td id = "plName">${player.name}:</td><td id = "plScore" >0</td></tr>
    </c:forEach>
</table> 
<table> 
```

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:54:39.920

由于 id 是唯一的，为什么不只是：

```
$("#plScore").replaceWith('' + cscore); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:54:53.207

您需要将您的字符串连接在一起，否则它将只是字符串`"td#plName [name = cname] + td#plScore"`。您还需要使用类，因为有多个玩家并且**`id`s 需要是唯一的**。

```
success: function(response){
    if (response.status == "SUCCESS") {
        var cname = response.result.currPlayName;
        var cscore = response.result.currPlayScore;

        $("td.plName:contains('" + cname + "') + td.plScore").html(cscore);
    } 
```

**HTML**

```
<table id = "playerslist">
    <c:forEach var="player" items="${players}">
    <tr class="htmlplayerno"><td> ${player.htmlPlayerNo}:</td><td class="plName">${player.name}:</td><td class="plScore" >0</td></tr>
    </c:forEach>
</table> 
```

## 替代解决方案

这是另一种可能有效的方法。

**HTML**

```
<tr id="${player.name}" >
    <td class="plNo">${player.htmlPlayerNo}:</td>
    <td class="plName">${player.name}:</td>
    <td class="plScore">0</td>
</tr> 
```

**JS**

```
$("#" + cname + " .plScore").html(cscore); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:09:25.280

在 Html 中 id 是唯一的。如果您有多个 tr，则必须使用 class。

```
<tr id="${player.htmlPlayerNo}" >
  <td> ${player.htmlPlayerNo}:</td>
  <td class="plName" >${player.name}:</td>
  <td class="plScore" >0</td>
</tr> 
```

然后

```
$("#" + ${player.htmlPlayerNo} + " td.plScore").html(cscore); 
```

# firefox - 在固定元素下滚动时，旋转的 div 消失

> ID：15807904
> 
> 赞同：0
> 
> 时间：2013-04-04T09:51:32.923
> 
> 标签：firefox, html, rotation

我正在一个网站上工作，我们在屏幕顶部有一个固定菜单。以及屏幕上的一些旋转元素。现在，当用户滚动并让旋转的元素遇到固定元素时，它们会在 Firefox 中以小屏幕分辨率消失。下面是一段测试代码，它的工作原理相同并且存在相同的问题：

```
<body style="height:800px;">
<div style="width:300px; height:50px; background:#aaa; position:fixed; top:0px; left:0px; z-index:2;"></div>

<div style="position:absolute; height:1px; width:72.8804px; top: 118.3px; left: 108.843px; transform: rotate(-1.10069deg); background:#000;"></div></body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T13:30:18.960

您可以从添加供应商前缀开始：

```
transform: rotate(-1.10069deg);
-ms-transform: rotate(-1.10069deg);
-moz-transform: rotate(-1.10069deg);
-o-transform: rotate(-1.10069deg);
-webkit-transform: rotate(-1.10069deg); 
```

此外，如果您使用的是**z-index**，请确保您想要高于的元素具有比低于下方的元素**更高的值**

# asp.net-mvc - 是否可以使用 RedirectToAction 清除路由值？

> ID：15807906
> 
> 赞同：11
> 
> 时间：2013-04-04T09:51:42.257
> 
> 标签：asp.net-mvc, routes

我想重定向到同一个控制器中的一个动作，但丢失了路由值（特别是`id`值）。事实证明这非常困难。我有这样配置的路线：

```
context.MapRoute(
    "Monitoring_controllerIdSpecified",
    "Monitoring/{controller}/{id}/{action}",
    new { action = "Status" }
);

context.MapRoute(
    "Monitoring_default",
    "Monitoring/{controller}/{action}",
    new { controller = "Events", action = "Index" }
); 
```

...以及内部类似这样的操作方法`EventsController`：

```
public ActionResult Status(int id) {
    if (id > 1000) {
        TempData["ErrorMessage"] = "ID too high.";
        return RedirectToAction("Index", new { id = (int?)null });
    }

    // (code to display status)
} 
```

如果我然后访问类似的东西`/Monitoring/Events/1001`，`RedirectToAction`确实会调用 ，但我会被重定向到`/Monitoring?id=1001`而不是仅仅`/Monitoring`. 它似乎与第一个路由匹配`Monitoring_controllerIdSpecified`，即使该路由具有`id`强制路由参数并且我告诉它设置`id`为 null，并且奇怪地`id`变成了查询字符串键。换句话说，它没有正确清除/删除`id`路由值。在传递给的对象中设置`id`为空字符串与将其设置为.`routeValues``RedirectToAction``null`

为什么要这样做，我如何说服它不匹配第一条路线，因为`id`已从路线值中完全删除？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-08T10:42:02.223

感谢@Slicksim，我发现答案是从中删除密钥`RouteData.Values`而不是将其设置为null：

```
public ActionResult Status(int id) {
    if (id > 1000) {
        TempData["ErrorMessage"] = "ID too high.";
        RouteData.Values.Remove("id");
        return RedirectToAction("Index");
    }

    // (code to display status)
} 
```

# postgresql - Rails 4：#的未定义方法“结果”

> ID：15807913
> 
> 赞同：0
> 
> 时间：2013-04-04T09:52:08.020
> 
> 标签：postgresql, ruby-on-rails-4

我有点被这个错误困住了。Postgres 正在运行，Rails 服务器也在运行，我在任何页面上都收到以下 NoMethodError：

```
undefined method `result' for #<TypeError: wrong argument type nil (expected Array)> 
```

应用程序跟踪不是很明确：

```
config/environments/development.rb:45:in `call' 
```

提取的源代码（大约第 45 行）：

```
 previous_level = Rails.logger.level
   Rails.logger.level = Logger::ERROR if env['PATH_INFO'].index("/assets/") == 0
   @app.call(env)
 ensure
   Rails.logger.level = previous_level
 end 
```

它可能与 PostgreSQL 适配器有关。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:55:40.080

Ok, just got it after a while of tracking down to the bug source: it was a problem of character encoding between US-ASCII and UTF-8... a 'space' was not really a 'space' in my Gemfile.

# ios - 如何在 Objective-C 中迭代 throw typedef 枚举？

> ID：15807915
> 
> 赞同：3
> 
> 时间：2013-04-04T09:52:15.530
> 
> 标签：ios, objective-c, enums

我正在使用最新的 SDK 开发一个 iOS 应用程序。

我有这个枚举：

```
typedef enum BoxTypeValues {
    Speed,
    FPS,
    Altitude,
    Location,
    Accuracy
} BoxType; 
```

我想迭代 throw 它的所有值并将它们转换为`NSString`.

我正在这样做，但它的编码非常硬：

```
+ (NSArray*)BoxTypeValues
{
    return [NSArray arrayWithObjects:@"Speed", @"FPS", @"Altitude", @"Location",
            @"Accuracy", nil];
}

+ (NSString*)BoxTypeToString:(BoxType)aType
{
    NSString* result = nil;

    switch (aType)
    {
        case Speed:
            result = @"Speed";
            break;
        case FPS:
            result = @"FPS";
            break;
        case Altitude:
            result = @"Altitude";
            break;
        case Location:
            result = @"Location";
            break;
        case Accuracy:
            result = @"Accuracy";
            break;

        default:
            break;
    }
    return result;
} 
```

**有什么建议吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T10:03:36.473

将枚举值转换为字符串是宏可以提供很大帮助的罕见情况之一。例如：

```
- (NSString*)BoxTypeToString:(BoxType)aType
{
#define CASE(VALUE) case (VALUE): return @( #VALUE )
    switch (aType) {
            CASE(Speed);
            CASE(FPS);
            CASE(Altitude);
            CASE(Location);
            CASE(Accuracy);

        default:
            // should not get here
            assert(0);
            break;
    }
#undef CASE
    return nil;
} 
```

您的`BoxTypeValues`方法将如下所示：

```
- (NSArray*)BoxTypeStringValues
{
    return @[
        [self BoxTypeToString:Speed],
        [self BoxTypeToString:FPS],
        [self BoxTypeToString:Altitude],
        [self BoxTypeToString:Location],
        [self BoxTypeToString:Accuracy]
      ];
} 
```

即使在重构操作重命名枚举值之后，这也将继续正常工作。您可能希望为`CASE`宏提供某种独特的前缀以避免与其他代码冲突。

至于枚举枚举值，除非您可以依赖连续的值并使用标准 for 循环（正如其他人所建议的那样），否则您很不走运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T10:07:20.693

```
 + (NSString*)BoxTypeToString:(BoxType)aType{
    return [BoxTypeValues objectAtIndex:aType];
} 
```

只需修改您的方法，无需使用 switch-case。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T10:18:19.153

I encountered this problem multiple times. Everyone who saw java enums wants to have this functionality in Obj-C, too.

One of the solutions is to use a class instead of an enum. If you want to go with `enums`, there is a nice preprocessor technique called `X-Macros`.

Let's define the values first:

```
#define BOX_TYPE_DEFINITIONS \
    BOX_TYPE_DEFINITION(Invalid, = 0) \
    BOX_TYPE_DEFINITION(Speed,) \
    BOX_TYPE_DEFINITION(FPS,) \
    BOX_TYPE_DEFINITION(Altitude,) \
    BOX_TYPE_DEFINITION(Location,) \
    BOX_TYPE_DEFINITION(Accuracy,) 
```

Now the enum

```
#define BOX_TYPE_DEFINITION(name, intValue) name intValue,

typedef enum {
    BOX_TYPE_DEFINITIONS
} BoxType;

#undef BOX_TYPE_DEFINITION 
```

And "to string" function

```
#define BOX_TYPE_DEFINITION(name, intValue) [name] = @#name, 

NSString* BoxTypeStringTable[] = {
    BOX_TYPE_DEFINITIONS
};

#undef BOX_TYPE_DEFINITION

#define NUM_BOX_TYPES sizeof(BoxTypeStringTable) / sizeof(NSString*)

NSString* NSStringFromBoxType(BoxType type) {
    return BoxTypeStringTable[type];
} 
```

This technique is very powerful for 3 reasons

1.  If you want to add/remove values, you do it in one place only
2.  You have the list of values as a macro and you can generate almost any code which involves all the values.
3.  You can add other attributes to your enum values (are you sure you don't want to use classes?)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T10:09:17.013

如果您控制枚举并且可以确保它是连续的，那么您可以执行以下操作 - 但显然您现在必须保持最新状态。

```
typedef NS_ENUM(NSInteger, BoxType) {
  Speed,
  FPS,
  Altitude,
  Location,
  Accuracy
};

NSString * BoxTypeToString(BoxType boxType)
{
  static NSString *types[] = { @"Speed", @"FPS", @"Altitude", @"Location", @"Accuracy" };
  return types[boxType];
} 
```

**注意**

我已经把它变成了一个单独的 C 函数，因为我真的无法想象有很多场景可以让一个类有充分的理由负责知道如何将枚举转换为字符串：/

# asp.net - 使用 CLR 在服务器上写入文件

> ID：15807923
> 
> 赞同：0
> 
> 时间：2013-04-04T09:52:21.303
> 
> 标签：asp.net

是否可以使用 CRL 过程和 C# 在 SQL Server 文件系统上写入文件？我们有这个用于 SQL 的服务器，但也用于其他事情，如果我们可以创建看起来像这样的过程会很有用？

WriteData(string storedProcedureToExexute, string pathToSaveResults)

在处理这个问题时，我需要考虑什么重要的因素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:21:08.300

我认为不需要 CLR 过程将输出写入文件。

像这样简单的事情应该可以解决问题

```
EXEC xp_cmdshell 'bcp "YOUR_QUERY" queryout "YOUR_FILE" -T -c -t,' 
```

当然，您需要拥有`xp_cmdshell`并`bcp`配置才能执行此操作。
仍然比编写自己的 CLR 过程要好。

有没有什么顾虑。这两个命令都非常强大。`xp_cmdshell`将允许有权访问它们的用户直接在您的服务器上运行操作系统脚本。您需要非常小心您授予哪些用户访问这些命令的权限。

# node.js - “使用两个证书从 https 代理 http”

> ID：15807925
> 
> 赞同：0
> 
> 时间：2013-04-04T09:52:24.960
> 
> 标签：node.js, node-http-proxy

我一直在尝试使用当前可用的最新版本的 Nodejs（v0.10.2）来“使用两个证书从 https 代理 http”，但我无法做到。

我用一个证书做到了这一点，它的工作原理：

```
var https = require("https"),
path = require("path"),
http = require("http"),
fs = require("fs"),
httpProxy = require("http-proxy"),
crypto = require("crypto");

//
// Proxy options
//
var options = {
https: {
  key: fs.readFileSync('ryans-key.pem'),
  cert: fs.readFileSync('ryans-cert.pem')
},
hostnameOnly: true,
router: {
  'foobar.com': '127.0.0.1:8005',
}
};

//
// Create a standalone HTTPS proxy server
//
httpProxy.createServer(options).listen(8002);

//
// Create the target HTTPS server
//
http.createServer(function (req, res) {
  res.writeHead(200, { 'Content-Type': 'text/plain' });
  res.write('hello https\n');
  res.end();
}).listen(8005); 
```

测试它完美地工作：

> curl -k [https://foobar.com:8002](https://foobar.com:8002) 你好 https

但是，如果我必须使用两个虚拟主机和两个不同的证书，但我无法使其工作，我会尝试做一些事情（这是我尝试过的语法示例）：

```
var https = require("https"),
path = require("path"),
http = require("http"),
httpProxy = require("http-proxy"),
fs = require("fs"),
crypto = require("crypto");

//
// generic function to load the credentials context from disk
//
function getCredentialsContext () {
return crypto.createCredentials({
  key: fs.readFileSync('ryans-key.pem'),
  cert: fs.readFileSync('ryans-cert.pem')
}).context;
}

//
// A certificate per domain hash
//
var certs = {
  "foobar.com": getCredentialsContext(),
};

//
// Proxy options
//
var options = {
https: {
  SNICallback: function (hostname) {
  return certs[hostname];
}
},
hostnameOnly: true,
router: {
'foobar.com': '127.0.0.1:8005',
}
};

//
// Create a standalone HTTPS proxy server
//
httpProxy.createServer(options).listen(8002);

//
// Create the target HTTPS server
//
http.createServer(function (req, res) {
res.writeHead(200, { 'Content-Type': 'text/plain' });
res.write('hello https\n');
res.end();
}).listen(8005); 
```

这些是最后一个示例的日志：

```
tls.js:1046
throw new Error('Missing PFX or certificate + private key.');
^
Error: Missing PFX or certificate + private key.
at Server (tls.js:1046:11)
at new Server (https.js:35:14)
at Object.exports.createServer (https.js:54:10)
at Object.exports.createServer (node_modules/http-proxy/lib/node-http-proxy.js:178:13)
at Object. (nodejs_test/ssl_test2.js:43:11)
at Module._compile (module.js:456:26)
at Object.Module._extensions..js (module.js:474:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Function.Module.runMain (module.js:497:10) 
```

它似乎无法识别密钥。可能是因为函数crypto.createCredentials？

我按照 nodejs 文档中的说明创建了密钥和证书：[http](http://nodejs.org/api/tls.html) ://nodejs.org/api/tls.html：

```
 openssl genrsa -out ryans-key.pem 1024
   openssl req -new -key ryans-key.pem -out ryans-csr.pem
   openssl x509 -req -in ryans-csr.pem -signkey ryans-key.pem -out ryans-cert.pem 
```

有人可以帮我吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-19T15:15:52.927

您缺少服务器要使用的默认证书和密钥。您需要像普通 https 代理一样在选项对象中添加证书和密钥属性，例如：

```
var options = {
    https: {
        SNICallback: function (hostname) {
            return certs[hostname];
        },
        key: fs.readFileSync('ryans-key.pem'),
        cert: fs.readFileSync('ryans-cert.pem'),
    },
    hostnameOnly: true,
    router: {
        'foobar.com': '127.0.0.1:8005',
    }
}; 
```

# eclipse-rcp - Ecpise P2：验证存储库位置

> ID：15807926
> 
> 赞同：1
> 
> 时间：2013-04-04T09:52:26.650
> 
> 标签：eclipse-rcp, p2

我正在开发一个 RCP 应用程序并向用户提供更新功能。

我正在将字符串 url 转换为 java.net.URI 并使用以下代码验证它们：

1.  将字符串 url 转换为 URI
2.  验证 URI
3.  加载存储库以确保存在有效的 artifacts.xml 或 artifacts.jar，并且存储库可用于更新。

    私有字符串 [] 存储库 = { " [http://myrepo.com/TEST_REPO/](http://myrepo.com/TEST_REPO/) ", " [http://myrepo.com/TEST_REPO1/](http://myrepo.com/TEST_REPO1/) " };

    @Override public Object execute(ExecutionEvent event) throws ExecutionException { List uris = new ArrayList(); URI uri = null; for (String str : this.repositories) { try { uri = new URI(str); if (uri != null) { uris.add(uri); } } catch (URISyntaxException e) { e.printStackTrace(); } }

    最终的 ProvisioningUI ui = ProvUIActivator.getDefault() .getProvisioningUI(); for (URI u: uris) { IStatus status = ui.getRepositoryTracker() .validateRepositoryLocation(ui.getSession(), uri, true, null);

    ```
    if (!status.isOK()) {
    MessageDialog.open(MessageDialog.ERROR, Display.getDefault()
            .getActiveShell(), "P2 Repo Status", status
            .getMessage(), 0);
    } 
    ```

    }

    for (URI repo : uris) { try { IArtifactRepository 存储库 = ProvUI .getArtifactRepositoryManager(ui.getSession()) .loadRepository(repo, null);

    ```
    if (repository != null) {
            System.out.println(repository.getName());
    }
    } catch (ProvisionException e) {
    // TODO Auto-generated catch block
    e.printStackTrace(); 
    ```

    } 捕捉（异常前）{ ex.printStackTrace(); } } 返回空值；}

这里第三点，加载存储库，有没有更好的方法来验证存储库是否有效并且可以用于更新。当前方法的问题是，如果存储库无效，则需要大量时间来确定。应用程序卡住了。请指导我。

# c# - 从单独的用户控件调用页面中的事件

> ID：15807928
> 
> 赞同：1
> 
> 时间：2013-04-04T09:52:33.680
> 
> 标签：c#, wpf

我对 WPF 和 C# 编程相当陌生，我之前的大部分工作都是在 winforms 和 vb.net 中。在我提出问题之前，这里有一些背景来解释我正在努力实现的目标。我有一个相当简单的应用程序，旨在阅读书籍，但是需要几个“视图”，为此我使用主窗口内的框架中托管的页面。我的一个“页面”有一个称为设置的子用户控件，基本上是当用户单击设置时（例如显示或隐藏托管在父“页面”（不是主窗口）中的项目或元素或调用事件“页面”。我想知道如何实现，我花了几天时间寻找解决这个问题的方法。一些示例代码等也将是一个有价值的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:26:04.220

我建议看一下 Model-View-ViewModel (MVVM) 模式。这是一种将您的业务逻辑与 UI 分离的模式，中间层（ViewModel）管理您的应用程序状态等。您的 UI 通过非常复杂的 DataBinding 机制与 ViewModel 通信。您会发现有关所有这些主题的大量信息。

为您指明正确的方向：您将拥有一个 ViewModel，其中包含 UI 的所有状态信息，例如要显示的项目。例如，您的 UserControl 以切换项目的可见性标志的方式绑定到 ViewModel。“页面”绑定到相同的属性并相应地设置项目的可见性。

我的建议：WPF 是一个非常非常复杂且非常非常强大的系统。如果没有 MVVM 和相应的软件架构，使用它没有任何意义。您不会在几天内学习 WPF/MVVM，甚至可能不会在几周内。你应该从基本概念开始，也许买一本书，暂时忘记你的具体问题。不过，这是值得的。如果您没有时间，请坚持您所知道的，否则会令人沮丧...

玩得开心！

# php - mysql错误查询

> ID：15807931
> 
> 赞同：1
> 
> 时间：2013-04-04T09:52:49.560
> 
> 标签：php, mysql

我在这里遇到问题，我有这个查询：

```
function getPrelaciones($carnet){
  $result = query(
      "SELECT mhm.Materia_codigo1 
       FROM Materia_has_Materia mhm
       , Materia m
       , (SELECT mha.Materia_codigo as materianovista 
          FROM Materia_has_Alumno mha 
          WHERE mha.Alumno_carnet = '11111') as n 
       WHERE n.materianovista = mhm.Materia_codigo 
       AND mhm.Materia_codigo1 != '' 
       AND n.materianovista = m.codigo");

  print json_encode($result);
} 
```

它可以工作，但是当我尝试使其通用时，像下一个查询一样切换`'11111'`for `$carnet`，它不起作用，它工作得很好，但它返回一个空的json：

```
function getPrelaciones($carnet){
  $result = query(
      "SELECT mhm.Materia_codigo1 
      FROM Materia_has_Materia mhm 
      , Materia m
      , (SELECT mha.Materia_codigo as materianovista 
         FROM Materia_has_Alumno mha 
         WHERE mha.Alumno_carnet = '%s' ) as n 
      WHERE n.materianovista = mhm.Materia_codigo 
      AND mhm.Materia_codigo1 != '' 
      AND n.materianovista = m.codigo", $carnet);
  print json_encode($result);
} 
```

有什么解决办法吗，谢谢

我的查询函数如下所示：

```
function query() {
global $link;
$debug = false;

//get the sql query
$args = func_get_args();
$sql = array_shift($args);

//secure the input
for ($i=0;$i<count($args);$i++) {
    $args[$i] = urldecode($args[$i]);
    $args[$i] = mysqli_real_escape_string($link, $args[$i]);
}

//build the final query
$sql = vsprintf($sql, $args);

if ($debug) print $sql;

//execute and fetch the results
$result = mysqli_query($link, $sql);
if (mysqli_errno($link)==0 && $result) {

    $rows = array();

    if ($result!==true)
    while ($d = mysqli_fetch_assoc($result)) {
        array_push($rows,$d);
    }

    //return json
    return array('result'=>$rows);

} else {

    //error
    return array('error'=>'Database error');
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:24:48.530

首先，基本调试。改变这个：

```
$debug = false; 
```

...进入这个：

```
$debug = true; 
```

您将看到您的 SQL 包含的内容。

我有根据的猜测，如果您没有启用完整的错误报告并且您忘记了初始化`$link`，那么您（没有）看到此警告：

> 警告：mysqli_real_escape_string() 期望参数 1 为 mysqli，给定 null

...在这一行：

```
$args[$i] = mysqli_real_escape_string($link, $args[$i]); 
```

当[mysqli_real_escape_string()](http://php.net/mysqli_real_escape_string)失败时，它会返回`NULL`，然后显示您的 SQL 查询，您会得到以下信息：

```
WHERE mha.Alumno_carnet = ''
                          ^^ 
```

旁注：

1.  您正在使用支持准备好的语句的现代库。为什么要在意逃避？

2.  你认为具体是做`urldecode()`什么的？`url`前缀是什么意思？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T10:29:38.800

我认为将变量添加到 sql in`getPrelaciones`而不是将其发送到函数会更简单

像这样：

```
function getPrelaciones($carnet){
  $result = query("SELECT mhm.Materia_codigo1 FROM Materia_has_Materia mhm, Materia m, (SELECT mha.Materia_codigo as materianovista FROM Materia_has_Alumno mha WHERE mha.Alumno_carnet = '".$carnet."')as n WHERE n.materianovista = mhm.Materia_codigo AND mhm.Materia_codigo1 != '' AND n.materianovista = m.codigo");
  print json_encode($result);
} 
```

# sql - pl sql，仅在以下情况下进行选择

> ID：15807933
> 
> 赞同：1
> 
> 时间：2013-04-04T09:52:50.657
> 
> 标签：sql, select, if-statement

您好，我是 pl sql 的新手，正在尝试进行如下查询：

```
SELECT column1, sum (column2)
FROM table1
WHERE sum (column2) <> 0
GROUP BY column1 
```

基本上我想做的是只选择那些按column1分组的sum（column2）为<> 0的行。

这个查询给了我一个 ORA-00934 错误，这是有道理的，因为在 WHERE 子句中没有指定求和操作必须按 column1 分组（或者至少我认为这是问题所在）。

我尝试了不同的解决方案，例如：

```
SELECT CASE WHEN SUM(column2) <> 0 then (SUM(column2), column1) END 
... 
```

但 pl-sql 不喜欢它。

什么是有效的：

```
SELECT column1, case when SUM(column2) <> 0 then SUM(column2) END
... 
```

但在这种情况下，我并没有我想要的，因为结果是一个伪表，就像 SELECT column1, SUM(column2)... 中的那个一样，除了我看到 SUM(column2) = 0 的白色字段虽然我不想看到整行。

有谁能够帮助我？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:55:08.317

您只需要将您的`WHERE`子句放入`HAVING`子句中。

```
SELECT column1, sum (column2)
FROM table1
GROUP BY column1
HAVING sum (column2) <> 0 
```

该`HAVING`子句在应用后得到评估`GROUP BY`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:55:38.833

使用 HAVING 子句：

```
SELECT column1, sum (column2)
FROM table1
GROUP BY column1
HAVING sum (column2) <> 0 
```

> Oracle PL/SQL HAVING 子句用于过滤或限制由 GROUP_BY 子句形成的组。

[来源](http://psoug.org/definition/HAVING.htm)

# sql-server - 无法通过 JDBC 使用 Windows 身份验证连接到 SQL Server

> ID：15807937
> 
> 赞同：0
> 
> 时间：2013-04-04T09:52:57.373
> 
> 标签：sql-server, jdbc, sql-server-2008-r2

我有一个 App Server、我的工作站和一个 SQL Server。

*   应用服务器：Windows Server 2008 R2 x64
*   Sql 服务器：Windows Server 2008 R2 x64
*   工作站：Windows 7 企业版 x64

我正在使用 JDBC 从我的工作站和我的应用服务器连接到 SQL Server。我的连接字符串是：

`String strURL="jdbc:sqlserver://HOSTNAME.my.domain\\INSTANCENAME;integratedSecurity=true";`

在我的工作站上工作正常。使用相同的凭据（即以交互方式登录到应用程序服务器），我返回此错误：

`SQLException: com.microsoft.sqlserver.jdbc.SQLServerException: Login failed. The login is from an untrusted domain and cannot be used with Windows authentication.`

应用服务器、工作站和 sql 服务器都在同一个域中，并使用相同的凭据登录，并使用来自相同代码块的相同连接字符串。有关如何解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:02:54.157

解决了这个问题，因为我们有一个错误的 Java 安装。安装了一个新的 Java 主页，它运行良好。

# css - 固定中的 css 绝对值 - 溢出

> ID：15807938
> 
> 赞同：2
> 
> 时间：2013-04-04T09:53:06.980
> 
> 标签：css, css-position

我正在尝试在固定面板中添加绝对项目。我的 html 是这样的：

```
<ul>
<li><a href="#">test</a>
<div class="popup">Popup</div>
</li>
</ul> 
```

的CSS：

```
ul
{
position:fixed;
left:10px;
top:0;
min-height:100%;
width:80px;
overflow:hidden;
background-color:#ccc;
color:#fff;
z-index:0;
}
ul li
{
position:relative;
}

.popup
{
width:400px;
border:1px solid #000;
display:none;
position:absolute;
color:#000;
z-index:1001;
} 
```

我的问题是溢出行为。如果我禁用溢出，我的弹出窗口效果很好，但即使在绝对位置，弹出窗口也会被隐藏。如果我的 ul 标签中有很多内容，我需要溢出行为来管理滚动效果。我已经尝试将相对位置添加到 li，添加静态高度、宽度、最小宽度、最小高度......就像我在其他帖子中所做的那样，但它并没有解决我的问题。这是代码：http: [//jsfiddle.net/jbval/SCzuu/](http://jsfiddle.net/jbval/SCzuu/)

如果有人有想法。

谢谢你的帮助。

JB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:04:14.007

一个肮脏的修复方法是将弹出类的位置设为绝对，然后设置宽度和高度属性，然后溢出。

```
 position:absolute;
 width:400px;
 height:400px;
 overflow:auto; 
```

[http://jsfiddle.net/zcKbd/](http://jsfiddle.net/zcKbd/)

或者，如上一个答案所述，添加`position: fixed;`到弹出类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:00:57.137

*   如何使`popup`也固定，见下文。

    `.popup{ position:fixed; }`

**这是小提琴**

[http://jsfiddle.net/jm3Qh/](http://jsfiddle.net/jm3Qh/)

# r - 成对点大小图

> ID：15807940
> 
> 赞同：0
> 
> 时间：2013-04-04T09:53:11.687
> 
> 标签：r

我设法用 r 函数“pairs”（下面板中 Kendall tau 的值和上面板中的对图）绘制了一个图。我还有一个问题。如何更改上面板中点的大小？这是我的代码。

```
panel.Kendall <- function(x,y,digits=2, prefix="", cex.cor)
{
usr <- par("usr"); on.exit(par(usr))
par(usr = c(0, 1, 0, 1))
r <- Kendall(x, y)$tau
txt <- format(c(r, 0.123456789), digits=digits)[1]
txt <- paste(prefix, txt, sep="")
if(missing(cex.cor)) cex <- 0.8/strwidth(txt)
text(0.5, 0.5, txt, cex = cex * 0.5)
}
png("Kendall1.jpg",width=600,height=600,res=100)
pairs(all[c(2,6,8,9,10,11,14,15)],lower.panel=panel.Kendall)
dev.off() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:06:17.907

您也可以为您设置点大小的`upper.panel=`（例如）定义自己的函数`panel.points``cex=`

```
panel.points<-function(x,y)
{
  points(x,y,cex=3)
}

pairs(iris[,1:4],lower.panel=panel.Kendall,upper.panel=panel.points) 
```

# c# - NPOI 和 setCellFormula()：小数分隔符被截断

> ID：15807941
> 
> 赞同：0
> 
> 时间：2013-04-04T09:53:11.557
> 
> 标签：c#, npoi

使用 C# 将 NPOI 1.2.5 的这个公式从一个单元格复制到另一个单元格时，我遇到了一个严重的问题：

原始单元格包含以下内容：

```
=IF(H21>(H23*0.9997);IF(H21<(H23*1.0003);"OK";"Errore");"Errore") 
```

结果单元格准确地报告了这个公式，但小数分隔符被去掉了。所以我明白了：

```
=IF(H21>(H23*9997);IF(H21<(H23*10003);"OK";"Errore");"Errore") 
```

这是我在 setFormula() 之后的调试器视图：

![在此处输入图像描述](https://i.stack.imgur.com/7TfPP.jpg)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-05T11:23:13.647

此问题[已被确定为](https://npoi.codeplex.com/discussions/439089)开发人员的错误。我们只能关注它并等待修复版本。

# mongodb - Mongo 多对多

> ID：15807943
> 
> 赞同：3
> 
> 时间：2013-04-04T09:53:18.203
> 
> 标签：mongodb, optimization, schema, database

我正在尝试模拟客户“喜欢”食物的多对多关系。

我期望获得很多（数百万）这些关系，所以我不希望它们最终都出现在一个无法扩展的连接表中。

我创建了两个文档集合，

```
Customers
 - name etc 
 - countOfLoves
 - loves [ ... ] 
```

和

```
Foods
 - name etc
 - countOfLoves
 - loves [ ... ] 
```

每个文档内部都有一个代表关系的“loves”子文档集合和一个快速获取总数的计数。

我曾假设这会很好地扩展，因为我可以只获得一个文档，而不是对具有数百万行的表进行查询，并且它是子数组。但是，当客户开始喜欢很多食物时（相反，当很多客户喜欢食物时）我遇到了问题

这是在喜欢新食物时更新客户文档的查询。在这种情况下，客户已经爱上了 7000 种其他食物：

```
 query: { _id: "354286" } 
update: { $push: { loves: { foodID: "354286", location: [ 55.752197, 37.6156 ] } }, $inc: { countOfLoves: 1 } }
nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:10135199 10137ms 
```

这里真的有两个问题，

a) 为什么这需要 10 秒 - 关于 $push 有什么我不知道的吗

b) Mongo 是否有更好的模式来模拟这种关系？

（而且，我猜 (c) - 我是否过度优化 - 我应该只制作一个love join 表就可以了吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:15:42.467

如果文档的大小不适合其位置，我认为它会变慢的原因之一是它将被移动到另一个地方。这可能是 10 秒的原因。您可以在这里看到类似的讨论：[https](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/FnL0mDWs5w0) ://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/FnL0mDWs5w0 。在创建时将数组归档为虚拟值的解决方案之一，您可以使用一些方法来更新它们而不是添加新的爱。在这种情况下，您可能必须再选择一个收藏品作为“爱”，对于每一个爱，您都将存储客户 ID 和他喜欢的东西

# jquery - Jquery.validate - 一页 - 多个表单，一个提交正常，其他不提交

> ID：15807948
> 
> 赞同：2
> 
> 时间：2013-04-04T09:53:31.980
> 
> 标签：jquery, forms, jquery-validate

在我的页面上，我有 3 个完整的表单，每个表单都有自己的提交按钮，每个表单和按钮都有不同的 id。

```
<form action="" method="post" class="form-horizontal" id="formA">
   ...
   <button id="formASend" type="submit" class="btn"> Submit</button>
</form>

<form action="" method="post" class="form-horizontal" id="formB">
   ...
   <button id="formBSend" type="submit" class="btn"> Submit</button>
</form>

<form action="" method="post" class="form-horizontal" id="formC">
   ...
   <button id="formCSend" type="submit" class="btn"> Submit</button>
</form> 
```

在javascript中，每个提交按钮都有以下逻辑：

```
$.validator.setDefaults({
        debug:true,
        errorElement: 'span', //default input error message container
        errorClass: 'help-inline', // default input error message class
        focusInvalid: false, // do not focus the last invalid input)
        highlight: function (element) { // hightlight error inputs
            $(element).closest('.control-group').addClass('error'); // set error class to the control group
        },

        unhighlight: function (element) { // revert the change dony by hightlight
            $(element)
                .closest('.control-group').removeClass('error'); // set error class to the control group
        }

    });

$(function() {

    var formA = $('#formA');

    // init validator obj and set the rules
    formA.validate({
        rules: {
             ...
        }
    });

    formA.submit(function () {
        return formA.valid();
    });

    var formB = $('#formB');

    // init validator obj and set the rules
    formB.validate({
        rules: {
            ...
        }
    });

    formB.submit(function () {
        return formB.valid();
    });

    var formC = $('#formC');

    // init validator obj and set the rules
    formC.validate({
        rules: {
            ...
        }
    });

    formC.submit(function () {
        return formC.valid();
    });
}); 
```

第一种形式提交工作正常，其他两种形式无效。我用DOMLint检查了html索引，没有问题。点击事件被触发，表单有效，提交返回true，但不提交。

验证工作正常，仅验证提交的表单。

如何对每个表格应用不同的规则？

**可能的解决方案**

```
$.validator.setDefaults({
            debug:true,
            errorElement: 'span', //default input error message container
            errorClass: 'help-inline', // default input error message class
            focusInvalid: false, // do not focus the last invalid input)
            highlight: function (element) { // hightlight error inputs
                $(element).closest('.control-group').addClass('error'); // set error class to the control group
            },

            unhighlight: function (element) { // revert the change dony by hightlight
                $(element)
                    .closest('.control-group').removeClass('error'); // set error class to the control group
            },
            submitHandler: function (form) {

               if ($(form).valid()) {
                   form.submit();
               }
            }
        });

    $(function() {

        var formA = $('#formA');

        // init validator obj and set the rules
        formA.validate({
            rules: {
                 ...
            }
        });

        var formB = $('#formB');

        // init validator obj and set the rules
        formB.validate({
            rules: {
                ...
            }
        });

        var formC = $('#formC');

        // init validator obj and set the rules
        formC.validate({
            rules: {
                ...
            }
        });
    }); 
```

添加提交处理程序，将提交事件返回到操作中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T15:09:14.867

**引用操作：**

> 点击事件被触发，表单有效，提交返回真，**但不提交**。

该`debug: true`选项将阻止实际`submit`的......这就是它的用途。 [根据文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)，

> **debug**：
> 启用调试模式。**如果为 true，则*不会提交***表单，并且某些错误会显示在控制台上（需要 Firebug 或 Firebug lite）。

**`debug`删除选项后 ，您的代码运行良好：http: [//jsfiddle.net/9WrSH/1/](http://jsfiddle.net/9WrSH/1/)**

* * *

**引用操作：**

> 如何对每个表格应用不同的规则？

只需在每个表单的`.validate()`函数中声明您的不同规则。

```
$('#myform1').validate({
    rules: {
        myfield1: {
            required: true,
            minlength: 3
        },
        myfield2: {
            required: true,
            email: true
        }
    }
}); 
```

**见：http: [//jsfiddle.net/9WrSH/1/](http://jsfiddle.net/9WrSH/1/)**

* * *

**你不需要这些：**

```
formA.submit(function () {
    return formA.valid();
}); 
```

该插件已经`submit`自动捕获按钮并检查表单，因此无需外部处理事件。

* * *

**您不需要条件检查或`submit()`内部的`submitHandler`：**

```
submitHandler: function (form) {
//    if ($(form).valid()) {
//        form.submit();
//    }
} 
```

*   该插件仅在有效表单上触发`submitHandler`回调，因此无需检查有效性。

*   该插件还会在表单有效时自动提交表单，因此完全不需要调用`.submit()`.

这些都是多余的和多余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:57:39.537

**您不需要处理提交事件。如果表格无效，表格将不会提交**。或者这样做：

```
//$('#formASend').click(function () {
    formA.submit(function () {

        return formA.valid();
    });
//}); 
```

外部点击事件处理程序。你不需要这个：`$('#formASend').click(function () {});` 我建议这样做：

```
var formA = $('#formA');
formA.validate({...});
// no need for these lines:
//$('#formASend').click(function () {
//    formA.submit(function () {

//        return formA.valid();
//    });
//}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-15T05:53:09.810

100% 致力于验证多个表单：

```
<script src="//code.jquery.com/jquery-1.12.0.min.js"></script>

<script type="text/javascript">
  $(document).ready(function () {
    $("form").submit(function () {

      var clikedForm = $(this); // Select Form

      if (clikedForm.find("[name='mobile_no']").val() == '') {
        alert('Enter Valid mobile number');
        return false;
      }
      if (clikedForm.find("[name='email_id']").val() == '') {
        alert('Enter valid email id');
        return false;
      }

    });
  });
</script> 
```

我在一个页面中有 5 个表单。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-12-20T08:39:23.910

我使用多种表单，不需要声明所有表单字段。只是用来放置`class="required"`您需要的字段。

```
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.js"></script>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js' type='text/javascript'></script>

    <form action="" method="post" class="form-horizontal"<span style="color: blue;"> id="formA"</span>><br />
    <input type="text" name="name1" <span style="color: red;">class="required"</span> /><br />
    <button id="formASend" type="submit" class="btn">Submit</button><br />
    </form><br />
    <form action="" method="post" class="form-horizontal"<span style="color: blue;"> id="formB"</span>><br />
    <input type="text" name="name2"<span style="color: red;"> class="required"</span> /><br />
    <button id="formBSend" type="submit" class="btn">Submit</button><br />
    </form><br />
    <form action="" method="post" class="form-horizontal"<span style="color: blue;"> id="formC"</span>><br />
    <input type="text" name="name3"<span style="color: red;"> class="required"</span> /><br />
    <button id="formCSend" type="submit" class="btn">Submit</button><br />
</form> 
```

和 javascript

```
$(document).ready(function () {
            $.validator.addClassRules('required', {
                required: true
            });
            $('#formA').validate();
            $('#formB').validate();
            $('#formC').validate();
}); 
```

见：[演示](http://jumnuoy.blogspot.com/2013/12/jquery-validation-how-to-validade.html)

# entity-framework - 添加迁移显示以前的更改

> ID：15807950
> 
> 赞同：0
> 
> 时间：2013-04-04T09:53:35.463
> 
> 标签：entity-framework

我正在处理实体框架迁移。

当我更改模型并使用 add-migration 时，它运行良好，但是当我第二次更改模型并运行 add-migration 命令时，生成的文件包含我第一次和第二次所做的 sql 更改。

谁能告诉我为什么我有这种行为。

这是模型

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Department>().Property(p => p.NewCol2).HasColumnName("ColChanged");
    }

public class Department
{
    public int DeptId { get; set; }
    public int DivNo { get; set; }
    public string DeptName { get; set; }
public string NewCol2 { get; set; }

    public List<Employee> Employees { get; set; }
}

public class Employee
{

    public int EmpNo { get; set; }
    public int DivisionNo { get; set; }
    public int DeptId { get; set; }
    public string EmpName { get; set; }

    public Department Department { get; set; }
}
 } 
```

我想将 NewCol2 名称更改为 ColChange，我在 ModelBuilder 中编写了属性，我得到了生成的文件，如下所示。

第一个cs文件

只有向上（）

```
 AddColumn("dbo.Departments", "ColChanged", c => c.String()); 
```

当我尝试通过添加 [Required] 注释将 EMPName 更改为必需时，我得到了如下生成的文件

第二个cs文件

```
 AddColumn("dbo.Departments", "ColChanged", c => c.String());
    AlterColumn("dbo.Employees", "EmpName", c => c.String(nullable: false)); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-01T13:40:45.117

我见过这种情况发生的一个地方是您在协作环境中工作，并且两个人在独立分支上添加迁移。这两个迁移都将模型的状态序列化到它们的 __MigrationHistory 表条目中（这是存储在迁移的 resx 文件中的内容）。

然后，当更改合并到一个分支上时，从外部看，迁移看起来很好——其中一个在项目中一个接一个地出现——但最新的迁移（我们称之为“B”）不包含对先前迁移 ('A') 包含的模型。

调用 update-database 会贯穿所有迁移，并使数据库按预期更新。但是，当添加第三个迁移“C”时，问题就来了。此迁移使用来自“B”的序列化模型状态来了解模型的增量。但是，由于来自“B”的序列化模型不包含“A”表示的更改，迁移“C”然后尝试生成 SQL 语句以涵盖“A”和“C”中的更改。

对此的解决方案是返回迁移“A”，删除“B”和“C”并确保数据库处于仅应用“A”的状态。然后添加迁移以创建一个覆盖“B”和“C”的文件。

为了防止将来发生这种情况，如果他们发现他们刚刚合并到其他人的迁移中，则将代码集成到他们的分支中的人应该有责任删除并重新创建他们的迁移。

# sql - 使用附近的语法不正确

> ID：15807951
> 
> 赞同：0
> 
> 时间：2013-04-04T09:53:35.790
> 
> 标签：sql, sql-server

我有3张桌子：

```
Salesperson
1)ID
2)Name
3)Age
4)Salary

Customer
1)ID
2)Name
3)City
4)IndustryType

Orders
1)Number
2)Order_date
3)cust_id
4)salesperson_id
5)Amount 
```

这就是问题所在：找到每个销售人员的最大订单金额和相关的订单号，以及该订单所属的客户。

在实施此

```
Select salesperson_id,Numbers As ordernum,Amount
from dbo.Orders As Ord  Inner Join 
(
Select salesperson_id,Max(Amount) as MaxOrder
from dbo.Orders
group by salesperson_id
) as TopOrder
on TopOrder.salesperson_id = Ord.salesperson_id 
where TopOrder.MaxOrder=Ord.Amount 
```

但它显示一个错误：

```
Msg 209, Level 16, State 1, Line 1
Ambiguous column name 'salesperson_id'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:04:23.537

您的查询中有两个salesperson_id，一个在Orders 表中，一个在子查询TopOrder 中。

最佳实践始终是使用表名或别名来限定字段名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:00:47.200

```
select sp.Name, od.Numbers, Max(od.Amount)
from SalesPerson as sp left join Orders as od  on sp.ID = od.salesperson_id
Group By sp.ID
having od.Amount = Max(od.Amount) 
```

此查询将帮助您列出最大金额订单的所有销售人员姓名和订单号试试这个并反馈我是否对您有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:56:35.883

我不知道 sql server 是否支持 using 关键字。我知道的唯一数据库是红砖。你可能需要改变

```
using (saleperson_id) 
```

至

```
where toporder.salesperson_id = orders.salesperson_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T18:09:16.777

尝试：

```
Select Ord.salesperson_id,Numbers As ordernum,Amount
from dbo.Orders As Ord  Inner Join 
(
Select salesperson_id,Max(Amount) as MaxOrder
from dbo.Orders
group by salesperson_id
) as TopOrder
on TopOrder.salesperson_id = Ord.salesperson_id 
where TopOrder.MaxOrder=Ord.Amount 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-09T05:01:05.530

```
select p_orders.salesperson_id,number as 'OrderNum',amount from p_orders
INNER JOIN
(
select salesperson_id,MAX(amount) as 'MAXORDER' from p_orders group by salesperson_id 
) as TopOrderAmountPerPerson
ON TopOrderAmountPerPerson.salesperson_id=p_orders.salesperson_id 
and p_orders.amount=TopOrderAmountPerPerson.maxorder 
```

# android - 删除页面并将页面添加到 FragmentPagerAdapter

> ID：15807952
> 
> 赞同：7
> 
> 时间：2013-04-04T09:53:36.640
> 
> 标签：android, android-fragments, android-viewpager, adapter, fragmentpageradapter

我正在使用一个有 5 页的片段寻呼机适配器。我将适配器设置为查看寻呼机，如下所示

```
 public class xxx extends FragmentPagerAdapter
    {
        final int PAGE_COUNT_LOGGED_IN = 6;
        final int PAGE_COUNT_LOGGED_OUT = 2;
        TextView oTextView = null;
        LayoutInflater inflater = null;
        PagerTabStrip m_oPageTabStrip = null;
        String m_strTab = null;
        String[] m_strArray = null;     
        Context m_oContext = null;

        /** Constructor of the class */
        public xxxx (Context context, android.support.v4.app.FragmentManager oFragmentManager) 
        {
            super (oFragmentManager);
            m_oContext = context;
        }

        /** This method will be invoked when a page is requested to create */
        @Override
        public Fragment getItem(int arg0) 
        {       
            xxxxFragment myFragment = new xxxFragment ();
            Bundle data = new Bundle();
            data.putInt("current_page", arg0+1);
            myFragment.setArguments(data);
            return myFragment;
        }

        /** Returns the number of pages */
        @Override
        public int getCount() 
        {       
            if (Utility.m_bIsLoggedIn == true)
            {
                return PAGE_COUNT_LOGGED_IN;
            }
            else
            {
                return PAGE_COUNT_LOGGED_OUT;
            }
        }

        @Override
        public CharSequence getPageTitle(int position) 
        {
            String strText = " ";

            switch(position)
            {
            case 0:
                strText = getBaseContext().getString(R.string.ccc);
                break;
            case 1:
                strText = getBaseContext().getString(R.string.bbb);
                break;
            case 2:
                strText = getBaseContext().getString(R.string.bbb);
                break;
            case 3:
                strText = getBaseContext().getString(R.string.bbb);
                break;
            case 4:
                strText = getBaseContext().getString(R.string.bbb);
                break;
            case 5:
                strText = getBaseContext().getString(R.string.Sbbb);
                break;
            }

        } 
```

在片段中，我为每个页面分别创建一个线性布局，如下所示

```
bbb.m_oSharedPage = (LinearLayout) LayoutInflater.from(Utility.m_oService).inflate(R.layout.viewpage, null);
                            iView = Utility._YOURS_SHARED;
                            oCurrentPage = .m_oSharedPage; 
```

我将适配器设置如下

```
m_oPager.setAdapter(m_oPagerAdapter); 
```

我的问题是如何动态添加和删除第 5 页...比如在某些情况下我需要第 5 页，而在某些情况下我需要删除第 5 页。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T15:06:32.207

我有一些可能会有所帮助的东西，我没有更改`Fragment`，只是将其删除并重新添加。这只会从最后一个位置改变。换句话说，如果您有*五个* `Fragments`并且想要删除*第三*个，那么这将行不通。我不确定这是最好的解决方案，但这是我所做的：

```
mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager()); 
```

然后，作为示例，我使用了添加和删除`click`方法：

```
public void remove(View v) {
    // Change the count to whatever you would like
    mSectionsPagerAdapter.setCount(1);
    // Triggers a redraw of the PageAdapter
    mSectionsPagerAdapter.notifyDataSetChanged();
}

public void add(View v) {
    // Change the count back to the initial count
    mSectionsPagerAdapter.setCount(2);
    // Triggers a redraw of the PageAdapter
    mSectionsPagerAdapter.notifyDataSetChanged();
} 
```

我添加了一个`setCount()`方法到我的`SectionsPagerAdapter`：

```
public void setCount(int count) {
    this._count = count;
} 
```

更改`getCount()`为并添加了默认计数：

```
private int _count = 2;

@Override
public int getCount() {
    return this._count;
} 
```

这是我的完整版`SectionsPagerAdapter`：

```
public class SectionsPagerAdapter extends FragmentPagerAdapter {
    private int _count = 2;

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Object instantiateItem(ViewGroup container, int position) {
        return super.instantiateItem(container, position);
    }

    @Override
    public Fragment getItem(int position) {
        switch (position) {
        case 0:
            return new FragmentOne();
        case 1:
            return new FragmentTwo();
        default:
            return null;
        }
    }

    public void setCount(int count) {
        this._count = count;
    }

    @Override
    public int getCount() {
        return this._count;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
        case 0:
            return getString(R.string.fragment_title_one).toUpperCase(Locale.ENGLISH);
        case 1:
            return getString(R.string.fragment_title_two).toUpperCase(Locale.ENGLISH);
        }
        return null;
    }
} 
```

# html - 我在这个 css/html 中做错了什么？

> ID：15807960
> 
> 赞同：4
> 
> 时间：2013-04-04T09:54:00.017
> 
> 标签：html, css

这是来自css的一些代码

```
#linkheader/*Links bar for access to other parts of the website*/
 {
    width:900px;
    border-radius:25px;
    margin:20px 50px 0px 0px;
    padding:5px;
    border:1px dotted orange;
    text-align:center;
    float:right;
    color:orange;
    background-color:rgba(20,10,10,0.7);
}
.sourcelinkheader
{
width:1000px;
}
#content /*Material Container for Sources and Index*/
 {
    width:1000px;
    margin:10px auto;
    border:2px solid orange;
    background-color:rgba(20,10,10,0.7);
} 
```

html正文

```
<body>
<div id="header">
    <h1>Information and Image Sources</h1>
</div>
    <div id="linkheader" class="sourcelinkheader">
    <p>
        <p><a href="index.html">Index</a> -
        <a href="Verkhluti_1.html">Introduction</a> -
        <a href="Verkhluti_1_katana.html">Nihontō</a> -
        <a href="Verkhluti_1_zweihander.html">Great Sword</a> -
        <a href="Verkhluti_1_gladius.html">Gladius</a> -
        <a href="Verkhluti_1_european swords.html">European</a> -
        <a href="Verkhluti_1_fencing.html">Fencing</a> -
        <a href="Verkhluti_1_source.html">Sources</a>
    </p>
</div>
    <div id= "content">
        <a href="http://en.wikipedia.org/wiki/Sword"><img src=http://upload.wikimedia.org/wikipedia/commons/thumb/b/bb/Wikipedia_wordmark.svg/174px-Wikipedia_wordmark.svg.png alt="Wikipedia"></a>
        <p><a href="http://www.weedhopper.org/">Metal Bakgrunnstextíll</a></p>
    </div>
<div class= "footer">
</div>
</body> 
```

![结果](https://i.stack.imgur.com/SJm1z.png)

我想要的结果是链接头的宽度变为 1000px，我希望它位于“内容”之上而不是它内部。

我做错了什么？

根据要求，[http://jsfiddle.net/zjd9d/](http://jsfiddle.net/zjd9d/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T10:07:50.790

```
float:right; 
```

在您的内容样式中添加上面的代码将解决此问题并得到我认为您需要的内容，这是一个示例[http://jsfiddle.net/qbBk6/2/](http://jsfiddle.net/qbBk6/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:12:25.257

链接头的宽度被定义了两次，首先是通过一个 id:`#linkheader`然后通过一个 class `.sourcelinkheader`。

尽管`width: 1000px;`已在第二条规则中设置，但第一个更具体（id 而不是类）所以第一个适用（在此处阅读更多关于特异性的信息：[https ://developer.mozilla.org/en-US/docs/ CSS/特异性](https://developer.mozilla.org/en-US/docs/CSS/Specificity)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:49:29.937

Hey Rabcor you can easily achieve your desired result through simple css how i did it :

Just removed `float:right` and gave the `width:1000;` to your id `#linkheader`

and its working fine....

**CSS**

```
#linkheader
/*Links bar for access to other parts of the website*/
 {
    width:1000px;
    border-radius:25px;
    margin:20px 50px 0px 20px;
    padding:5px;
    border:1px dotted orange;
    text-align:center;
    color:orange;
    background-color:rgba(20, 10, 10, 0.7);
} 
```

[**DEMO**](http://jsfiddle.net/zjd9d/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T10:19:03.937

this is how i fixed it.

I changed my css code to this.

[Jsfiddle link](http://jsfiddle.net/HzK9U/)

```
#linkheader/*Links bar for access to other parts of the website*/
 {
    width:900px;
    border-radius:25px;
    margin:20px 50px 0px 0px;
    padding:5px;
    border:1px dotted orange;
    text-align:center;
    float:right;
    color:orange;
    background-color:rgba(20,10,10,0.7);
}
#linkheader.sourcelinkheader
{
float:none;
margin: 10px auto;
width:1000px;
} 
```

The thing that fixed it for me was changing

```
.sourcelinkheader 
```

to

```
#linkheader.sourcelinkheader 
```

and removing the float from it and using margin instead. (Since all windows were supposed to be centered.)

# delphi - cxGrid 选择了最新日期

> ID：15807961
> 
> 赞同：-1
> 
> 时间：2013-04-04T09:54:00.260
> 
> 标签：delphi, delphi-xe2, delphi-7, delphi-2010, delphi-xe

我的查询返回客人入住酒店的所有日期（开始日期和结束日期）。
当查询打开时，如何让 cxGrid 选择网格中的最新日期（已选择）？

通过过滤器或代码？
在输入的所有日期中，我需要最新的一个。

我对在 cxGrid 中将日期字段 (end_date) 的排序顺序选择为 DESC 感到不安，因为有时它的行为不可预测。
底层数据库是绝对数据库。

这是我用来获取数据的：

```
procedure TForm1.ABSTable1AfterScroll(DataSet: TDataSet);
begin
 with ABSQuery1 do
 begin
  Close;
  sql.Clear;
   if ABSTable1.FieldByName('GUEST_ID').AsString <> '' then
   begin
    SQL.Text:= 'select * from GUEST_DATA where GUEST_ID = ' +
               ABSTable1.FieldByName('GUEST_ID').AsString ;
    Open;
   end;
 end;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:21:18.357

您可以使用视图的排序和聚焦

```
procedure TForm1.aDatasetAfterOpen(DataSet: TDataSet);
begin
  ViewDate.SortIndex := 0;
  ViewDate.SortOrder := soDescending;
  View.Controller.FocusedRecordIndex := View.Controller.TopRecordIndex;
end; 
```

# java - Sendgrid 电子邮件发送与撇号 ' 字符有问题？

> ID：15807977
> 
> 赞同：2
> 
> 时间：2013-04-04T09:54:45.260
> 
> 标签：java, email, sendgrid

尝试使用带有 java 的 sendgrid 发送电子邮件。撇号字符看起来像？问号。我正在发送标头以将文本编码为 UTF-8，但它仍然是一个问号。

> mailMessage.setHeaders("{'text':'UTF-8'}");

上面的行没有效果。我确信我拥有的输入 HTML 字符串是 UTF-8 编码的。电子邮件客户端是 MS Outlook 2010

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:35:43.337

在标头中设置内容类型实际上并不是将内容类型更改为 UTF-8 的正确方法。您需要在`BodyPart`. 例如：

```
// Create a message part to represent the body text 
BodyPart messageBodyPart = new MimeBodyPart(); 
messageBodyPart.setContent( "<strong>some html content</strong>", "text/html; charset=utf-8" ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-11T10:24:46.640

我知道这个答案对你来说已经晚了 6.5 年，但是由于这个问题仍然存在于人们身上，而且这篇文章在谷歌搜索中出现的很高，我想我会提供一个替代解决方案。

在 SendGrid 中的模板本身上，您可以通过使用三重大括号而不是双大括号来简单地转义这些有问题的字符。IE

> {{{收件人姓名}}}

代替

> {{收件人姓名}}

此解决方案隐藏在 SendGrid 文档的内部：

[https://github.com/sendgrid/sendgrid-nodejs/blob/master/packages/helpers/constants/index.js](https://github.com/sendgrid/sendgrid-nodejs/blob/master/packages/helpers/constants/index.js)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T16:46:00.720

您是否从 MS Word 中复制并粘贴了内容？

某些字符不会在 html 中呈现。您可以通过简单地在文本编辑器中重新输入来手动替换所有撇号字符，它将用标准的垂直撇号替换 MS Word 倾斜撇号，或者如果您希望它们保持倾斜，您可以使用`&ldquo;`或`&rdquo;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-11T11:32:35.067

您必须在三重花括号中传递您的主题变量，以便它将解析为文本而不是 HTML，您可以像这样传递它 - `{{{subject}}}`

或者您可以再次[执行所有步骤](https://sendgrid.com/docs/API_Reference/index.html)。

这个对我有用。

# actionscript-3 - AS3 发布 xml ULRequest

> ID：15807985
> 
> 赞同：0
> 
> 时间：2013-04-04T09:54:59.583
> 
> 标签：actionscript-3

我在使用 URLLoader 发布 xml 文件时遇到问题。

加载后似乎没有附加到请求的 XML，任何人都可以澄清我在这里做错了什么（撞到墙上）

// 代码

```
private function postXmlFiles():void
{
          var a:XML = new XML(new EmbeddedXML());

          var r:URLRequest = new URLRequest("http://vms.api.apic.co/rest/v3/addmedia");

          r.data  = a;
          r.method = URLRequestMethod.POST;
          r.contentType = "text/xml";

          l = new URLLoader();
          l.dataFormat = URLLoaderDataFormat.TEXT;

         //  Handlers  
      l.addEventListener(Event.COMPLETE, on_complete);  

      l.load(r);
}       

    private function on_complete(e : Event):void
    {  
        trace('loaded!:' + l.data); // this is returning "loaded!: No xml file attached to the request."
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:28:09.617

我测试了你的代码，替换了一个字符串：

```
var a:XML = new XML("<test/>"); 
```

跟踪输出发生了变化，表明`l.data`字段实际上包含了一些东西。我还使用了调试代理，并检查了请求正文，它确实包含我的`<test/>`字符串。

您应该测试您的`new EmbeddedXML()`调用以查看它返回的内容。

# ruby-on-rails - Ruby on rails：如果在控制器问题中存在其他问题

> ID：15807991
> 
> 赞同：0
> 
> 时间：2013-04-04T09:55:26.393
> 
> 标签：ruby-on-rails, ruby, if-statement, controller

所以我对控制器中的 if else 语句有疑问。我的页面上有 4 个单选按钮和一个隐藏字段。还有4个DIV，一次只能看到一个。当检查了另一个RadioButton时，显示了另一个DIV。这应该像一个“复杂”的搜索界面一样工作。在隐藏字段中，我插入了一个从 1 到 4 的值（取决于选中的单选按钮）。在控制器中，我正在查看隐藏字段的值，并且我的功能应该相应地改变。我的问题是它不起作用。我尝试了几种不同的方法，但没有找到我的问题的答案。

这是我的代码

## 看法：

```
<div>
    <%= radio_button_tag 'searchRBN', 'patient', true, :onchange => "checkRadioButton()" %>
    <%= label_tag :byPatient_patient, "Patient" %>
    <%= radio_button_tag 'searchRBN', 'staff', false, :onchange => "checkRadioButton()" %>
    <%= label_tag :byStaff_staff, "Staff" %>
    <%= radio_button_tag 'searchRBN', 'ocmw', false, :onchange => "checkRadioButton()" %>
    <%= label_tag :byOcmw_ocmw, "OCMW" %>
    <%= radio_button_tag 'searchRBN', 'mutuality', false, :onchange => "checkRadioButton()" %>
    <%= label_tag :byMutuality_mutuality, "Mutuality" %>
</div>
<%= hidden_field_tag(:hidden_one, "1") %>
<div id="searchByPatient">
    <%= form_tag patients_path, :method => 'get' do %>
        <p>
            <%= text_field_tag :search1, params[:search1] %>
            <%= submit_tag "Search", :name => nil %>
        </p>
    <% end %>
</div>

<div id="searchByStaff" class="notVisible">
    <%= form_tag patients_path, :method => 'get' do %>
        <%= text_field_tag :search2, params[:search2] %>
        <%= submit_tag "Search", :name => nil %>
    <% end %>
</div> 
```

## 控制器：

```
 def index
    @staff_all = Staff.all
    @ocmw_all = Ocmw.all
    @mutuality_all = Mutuality.all

    if params[:hidden_one] == '1'
      @patients = Patient.searchByName(params[:search1])
    elsif params[:hidden_one] == '2'
      @patients = Patient.searchByStaff(params[:search2])
    else
      @patients = Patient.all
    end
  end 
```

## 在我的模型中：

```
 def self.searchByName(search)
    if search
      find(:all, :conditions => ['name LIKE ?', "%#{search}%"])
    else
      find(:all)
    end
  end

  def self.searchByStaff(search)
    if search
      find(:all, :conditions => ['marriedTo LIKE ?', "%#{search}%"])
    else
      find(:all)
    end
  end 
```

马蒂亚斯 A.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:00:01.313

我认为您的隐藏字段在您的表单标签之外，因此它永远不会提交给服务器。

另一种解决方案是简单地为每个搜索表单放置一个隐藏字段，您必须在服务器上识别相应的搜索表单。

例子：

```
<div id="searchByPatient">
<%= form_tag patients_path, :method => 'get' do %>
    <%= hidden_field_tag :search_type, :search_by_patient %>
    <p>
        <%= text_field_tag :search1, params[:search1] %>
        <%= submit_tag "Search", :name => nil %>
    </p>
<% end %>
</div> 
```

# c# - 如何通过单击 MVC 中的按钮来调用非操作方法

> ID：15807994
> 
> 赞同：-1
> 
> 时间：2013-04-04T09:55:28.697
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

如何通过单击 MVC 中的按钮来调用非操作方法

```
@using (Html.BeginForm("GenerateError", "Home", FormMethod.Post, new { id = "submitForm" }))
{
     <button type="submit" id="btnSubmit" name="Command" value="Submit">Generate Error</button> 
} 
```

现在，如果 GenerateError 是一个非操作方法怎么办。我们如何使用按钮单击调用 [NonAction] 方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:57:14.280

您可以为它制作一个动作包装器`GenerateError`并使用它

编辑：

```
@using (Html.BeginForm("GenerateErrorWrapper", "Home", FormMethod.Post, new { id = "submitForm" }))
{
     <button type="submit" id="btnSubmit" name="Command" value="Submit">Generate Error</button> 
} 
```

您的 NonActionMethod：

```
[NonActionMethod]
public void NonActionMethod()
{
    ...
} 
```

你的动作包装：

```
public ActionResult View()
{
    NonActionMethod();
} 
```

我只是不明白你为什么需要它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:02:52.983

如果没有用 NonActionAttribute 标记，您可以向 URL {controller}/{your_non-action_method} 发出 ajax 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:03:31.433

您还可以使用 Jquery`$.post`或`$.ajax`检查状态或其他任何事情。

# xcode - Xcode Scene Dock 隐藏

> ID：15807998
> 
> 赞同：6
> 
> 时间：2013-04-04T09:55:49.303
> 
> 标签：xcode, interface, builder

我的场景码头被隐藏了......我怎样才能让它可见？红色的不见了

![在此处输入图像描述](https://cl.ly/O38X/img.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-04T10:00:54.220

您可以在左下方找到此按钮，只需单击它

![在此处输入图像描述](https://i.stack.imgur.com/yc7kj.png)..你会得到你需要的..

享受..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:01:06.593

不完全确定场景码头是什么意思。

但我想您可以通过在此处更改您的选择来查看不同的窗口。

![在此处输入图像描述](https://i.stack.imgur.com/kJglm.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T10:11:38.817

如果是这样，请单击**隐藏文档大纲**，然后您将看到缺少的窗口。这是**隐藏文档大纲按钮** ![在此处输入图像描述](https://i.stack.imgur.com/YirYz.png)

在 Xcode 中，您可以看到以下菜单，**文件编辑视图导航编辑器产品窗口帮助**，其中单击**查看**并单击**调试区域**，然后单击**Activtae 控制台**。

你可以得到你所期望的窗口