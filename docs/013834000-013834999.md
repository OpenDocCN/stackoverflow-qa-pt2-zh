# StackOverflow 问答 13834000-13834999

# php - Yii：在创建过程中获取控制器操作中相关表的最后插入 ID

> ID：13834000
> 
> 赞同：1
> 
> 时间：2012-12-12T06:24:14.263
> 
> 标签：php, mysql, yii

我有一个事务，我在 TableB 中插入一条新记录，如果 TableA 中没有适当的支持记录，我也将插入到 TableA 中并将该主键用作 TableB 的外键条目。

![在此处输入图像描述](../Images/a6b0358ae135e8be20f0af232f41c2d9.png)

```
$transaction=$connection->beginTransaction();
try 
{
    $tableA->IsActive = 'Y'; 
    $tableA->save();

    $model->TableAId = $tableA->TableAId;  //not sure what to put here for $tableA->TableAId
    $model->save();

    $transaction->commit(); 
} 
```

在这种情况下，我可以`Yii::app()->db->getLastInsertId();`使用`$tableA->TableAId;`

显然准确性在这里非常重要，所以我需要保证正确的记录在 TableA 和 TableB 之间对齐

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:40:59.227

基本上，您的评论看起来很完美。$model->TableAId = $tableA->TableAId; // 太棒了！！但代码不是。以下应该是您的代码。

```
$transaction=$connection->beginTransaction();
try 
{
    $tableA = TableA::model()->findByPk("id"); OR $tableA = new TableA;
    $tableA->IsActive = 'Y'; 
    $tableA->save();

    $model = new TableB;
    $model->TableAId = $tableA->TableAId;  //not sure what to put here for $tableA->TableAId // This is perfect!!
    $model->save();

    $transaction->commit(); 
} 
```

# ios6 - iPod 的 Rx/Tx 不适用于 iOS6.0，但适用于 iOS4.x & iOS5.x

> ID：13834002
> 
> 赞同：2
> 
> 时间：2012-12-12T06:24:19.093
> 
> 标签：ios6, ipod, reboot, rxtx

我的 JailBroke iPod4 的 Rx/Tx 在 iOS4.x 和 iOS5.x 版本上运行良好，但在 iOS6.x 上有些不同

iPod4(iOS6.0) 唤醒时有效，但如果 iPod4 进入深度睡眠并再次唤醒，Rx/Tx 不再工作，只有重新启动或重启 iPod4 才能使其再次工作，似乎 Rx/Tx被关闭。

为什么，有人可以帮忙吗？

# .htaccess - 带有编码斜杠的 URL 转到 404

> ID：13834007
> 
> 赞同：2
> 
> 时间：2012-12-12T06:24:45.893
> 
> 标签：.htaccess, url, encoding, yii, http-status-code-404

我使用用户提供的内容来生成 URL。

我的一个 URL 有标题`Kikar Habusiness - émission du 2/12/12`，它转换为 URL `/url/Kikar+Habusiness+-+émission+du+2%2F12%2F12`。

它进入 404。如果我`%2F`从 URL 中删除它，它工作正常。

一个有趣的事情是我的 php 代码（使用 Yii）通常处理带有自定义页面的 404，但是这个返回一个默认的 Apache 404。这让我相信它甚至没有到达我的引导文件。

.htaccess 内容如下：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php 
```

我的 Yii parseUrl 内容如下：

```
public function parseUrl($manager, $request, $pathInfo, $rawPathInfo) {
        if(preg_match('%^url/(\d+)%',$pathInfo,$matches)){
            $_GET['id'] = $matches[1];
            return 'url/view';
        }
        else if(preg_match('%^category/(\d+)%',$pathInfo,$matches)){
            $_GET['id'] = $matches[1];
            return 'category/view';
        }
        return false;
    } 
```

我的 URL slug 生成器是：

```
public static function slug($title){
        $title = ToolBox::trim($title,60,false);
        $title = urlencode($title);
        return $title;
    } 
```

请注意，我不能有基本的 ASCII URL，因为有些内容是非拉丁语（例如希伯来语或阿拉伯语）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T12:06:16.510

这是 Apache 中的常见问题，幸运的是与 Yii 无关。

Apache 将自动阻止它看到的带有编码 URL 部分 %2F (/) 和 %5C (\) 的任何 URL。它甚至不会达到任何 mod_proxy 或 mod_rewrite 规则。

根据您的环境，有多种方法可以在不更改太多代码的情况下解决此问题，包括：

*   “AllowEncodedSlashes”[指令](https://httpd.apache.org/docs/2.4/mod/core.html#allowencodedslashes)
*   双`urlencode()`值

有关完整列表和说明，请参见此处：[http ://www.jampmark.com/web-scripting/5-solutions-to-url-encoded-slashes-problem-in-apache.html](http://www.jampmark.com/web-scripting/5-solutions-to-url-encoded-slashes-problem-in-apache.html)

**链接关闭时的更多信息**
如果您有权访问它，则可以启用 AllowEncodedSlashes 指令，这是一个非常古老的半安全修复程序，默认情况下它已被关闭。这将解决问题。如果您无法访问 Apache 配置，那么您将不得不查看其他解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T10:51:01.910

jampark url 重定向到一个不正确的页面，使用下面的 url： http: [//www.leakon.com/archives/865](http://www.leakon.com/archives/865)

# javascript - 修复我的 jQuery 高亮插件

> ID：13834008
> 
> 赞同：0
> 
> 时间：2012-12-12T06:24:46.263
> 
> 标签：javascript, jquery, jquery-plugins

我刚刚写了一个非常简单的 jQuery 插件.. 有点，我需要一些帮助。

```
(function($){
    $.fn.highlight = function(words){
        return this.each(function(){
            //Get text from within
            var text = $(this).html();
            //Replace with new text
            $(this).html(text.replace(words,"<i class='highlight'></i><span class='word'>"+"$1"+"</span>"));
            //Get the all the highlight classes within this
            var highlights = $(this).find(".highlight");
            //Go through all
            return highlights.each(function(){
                var $this = $(this);
                //Get to the next word
                var wordDiv = $this.nextAll(".word").eq(0);
                //Set highlight span same height as word
                $this.height(wordDiv.height()+2);
                //Set highlight span same width +4 then positioning
                var newWidth = wordDiv.width()+4;
                wordDiv.replaceWith(function(){
                   return $(this).contents();
                });
                $this.width(newWidth+2).css({
                    left:(newWidth)+"px",
                    marginLeft: "-"+(newWidth)+"px"
                });
                $this.delay(Math.ceil(Math.random()*30)*200+2000).fadeOut("4000",function(){
                  $this.remove();
             });
        });         
        });
    }
})(jQuery);
$(document).ready(function(){
    $("div").highlight(/(simple|wrote|knowledge)/g);
});​ 
```

和CSS：

```
.highlight{
    background: #FBB829;
    display: inline-block;
    position: relative;
    z-index: -1;
    top: 5px;
    -moz-border-radius: 4px;
    border-radius: 4px;
}​ 
```

将CSS放在jQuery插件中是否更好？这是一个jsFiddle：

[http://jsfiddle.net/aVCtA/11/](http://jsfiddle.net/aVCtA/11/ "我的 jQuery 插件的 jsFiddle")

当最后一个 .highlight 跨度消失时，您会看到我的文本移动。为什么？认为 relative 和 z-index: -1 会解决这个问题吗？

我应该改用绝对位置并计算定位吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:41:44.370

最简单的解决方案是在淡出后不移除高亮元素。您可以通过将淡入淡出更改为动画不透明度来实现此目的：

```
$this.delay(Math.ceil(Math.random()*30)*200+2000).animate({opacity: 0},4000); 
```

这不是最漂亮的解决方案，但出于您的目的，我认为还可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:43:02.850

对您的代码进行了一些更改，请检查[**jsfiddle 上的测试**](http://jsfiddle.net/aVCtA/18/)

变更日志：

**jQuery** :

`.css()`从以下行中删除了，

```
$this.width(newWidth + 2); 
```

**CSS**：

将样式更改为，

```
.highlight{
    background: #FBB829;
    display: inline-block;
    position: absolute;
    z-index: -1;
    top: 0px;
    margin-left: -2px;
    -moz-border-radius: 4px;
    border-radius: 4px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T07:39:00.727

这是另一个解决方案：

[http://jsfiddle.net/aVCtA/20/](http://jsfiddle.net/aVCtA/20/)

删除的 CSS：

```
top:5px 
```

JS 变化：

删除了高度设置行添加了一个空格来设置其他字符的高度。删除额外的宽度，使其不会在隐藏时移动。

# php - pChart，如何在 x 轴上显示星期的开始或结束日期，如“12/2-8”？

> ID：13834020
> 
> 赞同：0
> 
> 时间：2012-12-12T06:25:35.910
> 
> 标签：php, pchart

现在我的`pchart`周图是这样显示的，

![在此处输入图像描述](../Images/554db23c519cffbcad319024a29973eb.png)

**但我想显示星期`x-axis 12/2-8, 12/9-15`（'月'后跟'/'后跟'开始日期'，然后是'-'，然后是'结束日期'）​​”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:39:21.080

您生成可以拥有的图例

```
$weekLegend = getWeekLegend();
var_dump($weekLegend); // for debug purpose 
```

输出

```
array (size=8)
  0 => string '12/09-15' (length=8)
  1 => string '12/16-22' (length=8)
  2 => string '12/23-29' (length=8)
  3 => string '12/30-05' (length=8)
  4 => string '01/06-12' (length=8)
  5 => string '01/13-19' (length=8)
  6 => string '01/20-26' (length=8)
  7 => string '01/27-02' (length=8) 
```

将其添加到您的数据集定义中

```
// Dataset definition
$DataSet = new pData;
$DataSet->AddPoint($data,"Serie1");
$DataSet->AddPoint(getWeekLegend(),"Serie2");
$DataSet->AddAllSeries();
$DataSet->SetAbsciseLabelSerie("Serie2"); //<------ set pChat to use legend 
```

使用的功能

```
function getWeekLegend($week = 8) {
    $start = new DateTime();
    $start->modify("last sunday");
    while ( $week > 0 ) {
        $date = $start->format("m");
        $date .= "/";
        $date .= $start->format("d");
        $date .= "-";
        $start->modify("+6 day");
        $date .= $start->format("d");
        $start->modify("+1 day");
        $weekLegend[] = $date;
        $week --;
    }
    return $weekLegend ;
} 
```

# xpath - WebDriver getCssValue 不返回边框颜色

> ID：13834025
> 
> 赞同：1
> 
> 时间：2012-12-12T06:25:56.310
> 
> 标签：xpath, webdriver, selenium-webdriver

我需要找到按钮的边框颜色按钮的 HTML 属性如下

```
<input class="BUTTON" type="button"  title="Add Link" value="Add Link" name="ADD_LINK"/> 
```

和CSS属性如下

```
background-color: transparent;
    border: 0 solid #EACCAE;
    border-radius: 2px 2px 2px 2px;
    height: auto;
    padding-bottom: 1px;
    vertical-align: text-top; 
```

我正在使用以下代码获取`border`财产

```
String sColor = driver.findElement(By.xpath("//input[@value='Add Link' and @type='button']")).getCssValue("border"); 
```

但它没有返回任何值。当我尝试使用代码获取背景颜色属性时，在同一个地方

```
 String sColor = driver.findElement(By.xpath("//input[@value='Add Link' and @type='button']")).getCssValue("background-color"); 
```

它返回透明。

任何人都可以请建议我为什么我`not getting border property`或为此提供解决方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:33:41.943

CSS`border`属性实际上是`border-width`, `border-style`, 和`border-color`所有的简写。（参见[W3 文档](http://www.w3schools.com/css/css_border.asp)。）

如果您单独查询这些样式中的每一个，您应该从 Selenium 中获取您正在寻找的信息。

# android - 在 Android 中加载 listview 仅 OS 4.0 时应用程序崩溃？

> ID：13834026
> 
> 赞同：-1
> 
> 时间：2012-12-12T06:26:04.870
> 
> 标签：android

我正在开发一个应用程序，该应用程序在我的每台设备上都运行良好，但在客户端的 Android 4.0 上崩溃。以下是日志：

请查找这一行“I/Choreographer(361): Skipped 160 frames！该应用程序可能在其主线程上做了太多工作。” 在日志中。

```
--------- beginning of /dev/log/system
I/ActivityManager(  395): START {act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10200000 cmp=com.android.launcher/com.android.launcher2.Launcher u=0} from pid 395
I/ActivityManager(  395): No longer want com.noshufou.android.su (pid 32427): hidden #16
I/ActivityManager(  395): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.weg.ecatalogfragment/.SplashScreen u=0} from pid 817
--------- beginning of /dev/log/main
D/dalvikvm(  395): GC_FOR_ALLOC freed 1465K, 38% free 15471K/24775K, paused 74ms, total 74ms
I/dalvikvm-heap(  395): Grow heap (frag case) to 24.214MB for 1048592-byte allocation
I/ActivityManager(  395): Start proc com.weg.ecatalogfragment for activity com.weg.ecatalogfragment/.SplashScreen: pid=361 uid=10111 gids={3003, 1015, 1023, 1028}
E/Trace   (  361): error opening trace file: No such file or directory (2)
D/libEGL  (  361): loaded /system/lib/egl/libEGL_tegra.so
D/libEGL  (  361): loaded /system/lib/egl/libGLESv1_CM_tegra.so
D/libEGL  (  361): loaded /system/lib/egl/libGLESv2_tegra.so
D/OpenGLRenderer(  361): Enabling debug mode 0
I/ActivityManager(  395): Displayed com.weg.ecatalogfragment/.SplashScreen: +476ms
V/        (  395): void cb_onMotion(uint16_t)
I/ActivityManager(  395): START {flg=0x4000000 cmp=com.weg.ecatalogfragment/.ECatalogFragmentActivity u=0} from pid 361
I/System.out(  361): gdfgdgcvbccccccccccccccccccc 0
D/dalvikvm(  361): GC_CONCURRENT freed 1477K, 31% free 5683K/8195K, paused 3ms+2ms, total 19ms
I/ActivityManager(  395): Displayed com.weg.ecatalogfragment/.ECatalogFragmentActivity: +345ms
I/fdhttpd (29030): battery level:85 plugged:0
W/InputMethodManagerService(  395): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@41edb798 attribute=null
W/InputMethodManagerService(  395): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@41f32a40 attribute=null
V/        (  395): void cb_onMotion(uint16_t)
D/dalvikvm(  361): GC_CONCURRENT freed 1060K, 25% free 6420K/8455K, paused 2ms+6ms, total 27ms
W/InputMethodManagerService(  395): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@426f5a98 attribute=null
W/InputMethodManagerService(  395): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@41f88e20 attribute=null
W/InputMethodManagerService(  395): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@41f60498 attribute=null
D/dalvikvm(  361): GC_CONCURRENT freed 1636K, 29% free 6575K/9159K, paused 2ms+17ms, total 44ms
I/System.out(  361): gdfgdgcvbccccccccccccccccccc 0
D/dalvikvm(  361): GC_FOR_ALLOC freed 825K, 37% free 5893K/9287K, paused 16ms, total 16ms
I/dalvikvm-heap(  361): Grow heap (frag case) to 13.937MB for 80656-byte allocation
I/ActivityManager(  395): Start proc android.process.acore for content provider com.android.providers.contacts/.ContactsProvider2: pid=396 uid=10001 gids={3003, 1015, 1023, 1028}
W/InputMethodManagerService(  395): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@4250a310 attribute=null
E/Trace   (  396): error opening trace file: No such file or directory (2)
I/ActivityThread(  396): Pub call_log: com.android.providers.contacts.CallLogProvider
I/ActivityThread(  396): Pub com.android.voicemail: com.android.providers.contacts.VoicemailContentProvider
I/ActivityThread(  396): Pub user_dictionary: com.android.providers.userdictionary.UserDictionaryProvider
I/ActivityThread(  396): Pub applications: com.android.providers.applications.ApplicationsProvider
I/ActivityThread(  396): Pub contacts;com.android.contacts: com.android.providers.contacts.ContactsProvider2
I/ActivityManager(  395): No longer want com.tmobile.thememanager (pid 32525): hidden #16
D/dalvikvm(  395): GC_EXPLICIT freed 1610K, 41% free 15343K/25863K, paused 7ms+7ms, total 94ms
**I/Choreographer(  361): Skipped 160 frames!  The application may be doing too much work on its main thread.**
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2723.0ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2713.7ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2704.3ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2694.8ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2685.5ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2675.9ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2666.6ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2656.8ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2647.7ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2638.3ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2628.7ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2619.3ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2609.9ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2600.5ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2591.1ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2581.6ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2572.2ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2562.7ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2553.0ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2543.7ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2534.3ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2524.7ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2515.3ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2505.9ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2496.3ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2486.9ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2477.4ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2468.0ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2458.4ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2449.0ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2439.5ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2429.9ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2420.4ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2411.0ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2401.5ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2391.4ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2382.5ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2373.1ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2363.6ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2354.1ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2344.6ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2335.1ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2325.6ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2316.3ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2306.8ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2297.3ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2287.8ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2278.3ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2268.8ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2259.4ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2249.9ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
I/InputDispatcher(  395): Window 'Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}' spent 2230.5ms processing the last input event: MotionEvent(action=2, deviceId=2, source=0x00001002)
D/dalvikvm(32180): GC_FOR_ALLOC freed 1290K, 33% free 6329K/9351K, paused 19ms, total 19ms
V/        (  395): void cb_onMotion(uint16_t)
D/AndroidRuntime(  361): Shutting down VM
W/dalvikvm(  361): threadid=1: thread exiting with uncaught exception (group=0x41ba4300)
E/AndroidRuntime(  361): FATAL EXCEPTION: main
E/AndroidRuntime(  361): android.os.NetworkOnMainThreadException
E/AndroidRuntime(  361): at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
E/AndroidRuntime(  361): at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
E/AndroidRuntime(  361): at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
E/AndroidRuntime(  361): at java.net.InetAddress.getAllByName(InetAddress.java:214)
E/AndroidRuntime(  361): at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
E/AndroidRuntime(  361): at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
E/AndroidRuntime(  361): at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
E/AndroidRuntime(  361): at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
E/AndroidRuntime(  361): at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
E/AndroidRuntime(  361): at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
E/AndroidRuntime(  361): at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
E/AndroidRuntime(  361): at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
E/AndroidRuntime(  361): at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
E/AndroidRuntime(  361): at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
E/AndroidRuntime(  361): at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
E/AndroidRuntime(  361): at java.net.URL.openStream(URL.java:462)
E/AndroidRuntime(  361): at com.weg.ecatalogfragment.drawing.DrawingScreenFragment.createDrawableFromURL(DrawingScreenFragment.java:430)
E/AndroidRuntime(  361): at com.weg.ecatalogfragment.drawing.DrawingScreenFragment.handleResponse(DrawingScreenFragment.java:399)
E/AndroidRuntime(  361): at com.weg.ecatalogfragment.drawing.DrawingScreenFragment.access$0(DrawingScreenFragment.java:342)
E/AndroidRuntime(  361): at com.weg.ecatalogfragment.drawing.DrawingScreenFragment$1.dispatchMessage(DrawingScreenFragment.java:148)
E/AndroidRuntime(  361): at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(  361): at android.app.ActivityThread.main(ActivityThread.java:4931)
E/AndroidRuntime(  361): at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(  361): at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(  361): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
E/AndroidRuntime(  361): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
E/AndroidRuntime(  361): at dalvik.system.NativeStart.main(Native Method)
W/ActivityManager(  395):   Force finishing activity com.weg.ecatalogfragment/.ECatalogFragmentActivity
W/ActivityManager(  395): Activity pause timeout for ActivityRecord{41eff160 com.weg.ecatalogfragment/.ECatalogFragmentActivity}
I/ActivityManager(  395): No longer want com.google.android.partnersetup (pid 32633): hidden #16
I/Process (  361): Sending signal. PID: 361 SIG: 9
I/ActivityManager(  395): Process com.weg.ecatalogfragment (pid 361) has died.
I/WindowState(  395): WIN DEATH: Window{4263ad58 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}
I/WindowState(  395): WIN DEATH: Window{4243db28 com.weg.ecatalogfragment/com.weg.ecatalogfragment.ECatalogFragmentActivity paused=false}
W/InputMethodManagerService(  395): Got RemoteException sending setActive(false) notification to pid 361 uid 10111
W/BackupManagerService(  395): dataChanged but no participant pkg='com.android.providers.settings' uid=10035
W/InputMethodManagerService(  395): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@424578c0 attribute=null
W/ActivityManager(  395): Activity destroy timeout for ActivityRecord{41eff160 com.weg.ecatalogfragment/.ECatalogFragmentActivity}
I/ActivityManager(  395): START {act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10200000 cmp=com.android.launcher/com.android.launcher2.Launcher u=0} from pid 395
I/Gmail   (32707): MainSyncRequestProto: lowestBkwdConvoId: 0, highestHandledServerOp: 1359460, normalSync: true
D/dalvikvm(32180): GC_FOR_ALLOC freed 1421K, 31% free 6532K/9351K, paused 13ms, total 13ms
D/dalvikvm(32707): GC_EXPLICIT freed 3952K, 64% free 2963K/8195K, paused 3ms+2ms, total 52ms
I/Gmail   (32707): MainSyncRequestProto: lowestBkwdConvoId: 0, highestHandledServerOp: 1359460, normalSync: true
I/Gmail   (32707): lowestBackward conversation id 0
I/ActivityManager(  395): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=org.jtb.alogcat/.LogActivity u=0} from pid 817 
```

而指定的ECatalogFragment类的代码是：

```
public class ECatalogFragmentActivity extends FragmentActivity implements OnClickListener{

    private static final String ImageButton = null;
    private Fragment homeScreenFragment;
    private Fragment imageFragment;
    private ImageButton _pdfIcon=null;
    private TextView _pdfText=null;
    FragmentManager fm = getSupportFragmentManager();
    private FragmentTransaction fragmentTransaction;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {
            int count=fm.getBackStackEntryCount();
            System.out.println("gdfgdgcvbccccccccccccccccccc "+count);
            for(int i = 0; i < count; ++i) {    
                fm.popBackStack();
            }

            //  fm.popBackStack(null,android.app.FragmentManager.POP_BACK_STACK_INCLUSIVE);
            _pdfIcon=(ImageButton)findViewById(R.id.pdf_icon);
            _pdfIcon.setOnClickListener(this);

            _pdfText=(TextView)findViewById(R.id.pdf_txt);
            _pdfText.setVisibility(View.GONE);
            _pdfIcon.setVisibility(View.GONE);

        }

        RelativeLayout rel =(RelativeLayout)findViewById(R.id.top_right_datasheet_relative_layout);
        if (rel == null) {
        } else {
            /**
             * First Method:
             * leftFragment is added in main.xml and here we get a reference to the fragment
             */
            homeScreenFragment = getSupportFragmentManager().findFragmentById(R.id.homescreen_frag);

            /**
             * Second Method:
             * topRightFragment is not defined in main.xml.  Management is done all in code.
             * top_right_relative_layout is a relative layout in main.xml
             */

            imageFragment = new ImageFragment();
            fragmentTransaction = this.getSupportFragmentManager().beginTransaction();
            fragmentTransaction.add(R.id.top_right_splash_relative_layout, imageFragment, "imageFragmentTag"); //First parameter is the container id
            fragmentTransaction.show(imageFragment);
            fragmentTransaction.commit();
        }

    }

    public void onClick(View v) {
        if(v==_pdfIcon)
        {
            _pdfText.setVisibility(View.GONE);
            _pdfIcon.setVisibility(View.GONE);
            GetPDFScreenFragment getPDFFragment = new GetPDFScreenFragment();
            fragmentTransaction = this.getSupportFragmentManager().beginTransaction();
            fragmentTransaction.add(R.id.top_right_Drawing_relative_layout, getPDFFragment, "rightDrawingFragmentTag"); //First parameter is the container id
            fragmentTransaction.show(getPDFFragment);
            fragmentTransaction.addToBackStack("3");
            fragmentTransaction.commit();
        }

    }

    @SuppressWarnings("static-access")
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if(keyCode==event.KEYCODE_BACK)
        {

            int count=fm.getBackStackEntryCount();
            System.out.println("gdfgdgcvbccccccccccccccccccc "+count);

            if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE)
            {
                if(count==0)
                {
                    for(int i = 0; i < count; ++i) {    
                        fm.popBackStack();
                    }                       
                    _pdfText.setVisibility(View.GONE);
                    _pdfIcon.setVisibility(View.GONE);

                }else if(count==1)
                {    
                    finish();
                    Intent intent = new Intent(this, ECatalogFragmentActivity.class);
                    startActivity(intent);
                    _pdfText.setVisibility(View.GONE);
                    _pdfIcon.setVisibility(View.GONE);

                }
                else 
                {
                    _pdfText.setVisibility(View.VISIBLE);
                    _pdfIcon.setVisibility(View.VISIBLE);
                }

            }
        }
        return super.onKeyDown(keyCode, event);
    }

    @Override
    protected void onResume() {
        super.onResume();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:30:18.947

在查看您的日志后..

```
The application may be doing too much work on its main thread.** 
```

和

```
FATAL EXCEPTION: main
E/AndroidRuntime(  361): android.os.NetworkOnMainThreadException 
```

问题是**您**对`MainUIThread`. 不允许使用 Android 4.0 (ICS)。

糟糕而短暂的解决方案：

将这两行代码放入`onCreate()`您的活动中，

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

好的但冗长的解决方案：

用于[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)您的所有网络相关操作...

我建议您使用**AsyncTask** ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T06:31:27.287

非常感谢您的建议。我为整个应用程序中的每个网络操作使用不同的线程。Android 4.0 甚至连一个糟糕的编程都不会消化。正如我在 Android OS 4.0 中所经历的，不是单一的图像下载操作不能在 UI 线程上完成。不要在 Android 中对主 UI 线程执行任何网络操作，尤其是在 4.0 中。

# hibernate - 在每个派生中更改 @CollectionTable 的名称

> ID：13834027
> 
> 赞同：1
> 
> 时间：2012-12-12T06:26:08.390
> 
> 标签：hibernate

我有 Base 类，它包含一个 Id 属性和一个基本集合属性，即`Map<String, String>`. 我正在使用`@ElementCollection`并且`@CollectionTable. getProperties()`方法在 Base 中，它在两个派生类中被覆盖，我想更改`@CollectionTable(name = "Derived1")`Derived1 的 a 并相应地更改 Derived 2。但它给了我类型无法确定的异常。

能

# node.js - 试图故意阻止事件循环时nodejs冻结？

> ID：13834030
> 
> 赞同：1
> 
> 时间：2012-12-12T06:26:17.070
> 
> 标签：node.js, coffeescript

除了这篇文章[javascript (nodejs) while loop bug](https://stackoverflow.com/questions/13215822/javascript-nodejs-while-loop-bug) 这是与 node js 中的“while”循环不同的问题之外，我似乎无法理解为什么以下代码不会“阻塞”。我正在尝试阻止事件循环，以便我可以阻止请求（这只是为了测试/娱乐和熟悉 nodejs）。

```
http = require('http')

data = ""
processData = (chunk) ->
    date = new Date()
    dm = date.getMilliseconds()
    curDate = null
    loop
        curDate = (new Date()).getMilliseconds()
        break if curDate-dm > 4000
    data += chunk

endData = ->
    console.log(data)
    data = ""

requestListener = (req,res) ->
    req.on "data", processData
    req.on "end", endData
    res.writeHead 200
    res.write "hello buddy"
    res.end()

webserver = http.createServer requestListener
webserver.listen(6666) 
```

我期待某种阻塞 4 秒，然后控制台显示来自请求的一些数据

```
curl -d "testdata=32" "http://localhost:6666" 
```

但是，节点从不向控制台写入任何内容，也不向客户端发送响应，只是“冻结”。如果我将时间增加到 100 毫秒，它适用于前 5-8 次尝试（将数据发送回 curl），但最终会冻结。我在这里错过了什么吗？这是一个错误吗？节点不应该优雅地处理这个吗？

我遇到了其他有效的阻塞方法，例如：

```
 var startTime = new Date().getTime();
    while (new Date().getTime() < startTime + 4000); 
```

我的环境：Windows 7/cywin 2.774/nodejs 0.8.10/curl 7.27.0

# perl - 如何在perl中将数字附加到数组名称

> ID：13834032
> 
> 赞同：-2
> 
> 时间：2012-12-12T06:26:29.877
> 
> 标签：perl

我有几个不同名称的数组。以下是我的数组名称。

```
@node_level1_1_1=read_array_level2(@node_level1_1);
@node_level1_2_1=read_array_level2(@node_level1_2);
...
@node_level1_11_1=read_array_level2(@node_level1_11); 
```

我想解析从@node_level1_1_1 到@node_level1_11_1 的另一个子例程函数的数组。我尝试编写这段代码，但没有成功。

```
for ($j=1; $j < 12; $j++) {

  my $var= output_data_xml_nodes(4,@node_level1_$j_1);

} 
```

当我运行代码时，它会引发以下错误：

> 标量在 ./html_parser1.pl 第 153 行，“@node_level1_$j_1”附近找到运算符预期的位置（$j_1 之前缺少运算符？） ./html_parser1.pl 第 153 行，“@node_level1_$j_1”附近的语法错误/html_parser1.pl 由于编译错误而中止。

是否有任何增加数组的。请告诉我。

谢谢， 阿南德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T06:45:31.433

我认为您需要使用更复杂的数据结构。虽然创建变量名是可能的（使用`no strict 'refs'; @{construct string here}`），但它是邪恶的、错误的、不可维护的等。它只适用于全局变量*颤抖*

您的代码示例应如下所示：

```
my @new_node;
$new_node[1][1][1]  = read_array_level2($old_node[1][1]);
$new_node[1][2][1]  = read_array_level2($old_node[1][2]);
...;
$new_node[1][11][1] = read_array_level2($old_node[1][11]); 
```

或者更好，使用循环

```
my @new_node;
for my $i (1 .. 12) {
    $new_node[1][$i][1] = read_array_level2($old_node[1][$i])
} 
```

但是，大多数时候您将处理数组引用，而不是数组。阅读和重新阅读

*   [http://perldoc.perl.org/perlreftut.html](http://perldoc.perl.org/perlreftut.html)
*   [http://perldoc.perl.org/perldsc.html](http://perldoc.perl.org/perldsc.html)
*   [http://perldoc.perl.org/perllol.html](http://perldoc.perl.org/perllol.html)

和朋友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:34:14.593

一种方法是使用哈希：

```
use strict;
use warnings;

my @array_1 = (1, 11);
my @array_2 = (2, 22);
my %arrays  = ( 
  array_1 => [ @array_1],
  array_2 => [ @array_2]
);

for my $i (1, 2) {
  print join(",", @{$arrays{"array_$i"}}), "\n";
} 
```

另一种方法是使用 eval：

```
use strict;
use warnings;

my @array_1 = (1, 11);
my @array_2 = (2, 22);

for my $i (1, 2) {
  my $array_ref = eval('\@'."array_$i");
  print join(",", @$array_ref), "\n";;
} 
```

# ios - iOS 版 Audiobus 是如何工作的？

> ID：13834034
> 
> 赞同：21
> 
> 时间：2012-12-12T06:26:46.377
> 
> 标签：ios, objective-c, cocoa-touch

[Audiobus](http://audiob.us)使用哪些 SDK来提供应用间音频路由？我不知道有任何 Apple SDK 可以促进 iOS 应用程序间的通信，并且我的印象是应用程序是相互沙盒的，所以我真的很想知道他们是如何做到这一点的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T19:33:35.483

iOS 允许通过 MIDI Sysex 消息进行应用间通信。AudioBus 通过将音频作为 MIDI Sysex 消息发送来工作。您可以阅读开发者本人的详细信息：

[http://atastypixel.com/blog/13-months-of-audiobus/](http://atastypixel.com/blog/thirteen-months-of-audiobus/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T16:20:14.670

我的猜测是他们通过网络使用某种音频，因为即使在不同的设备上启动我们的应用程序时，我也会看到日志语句。

不太了解实现的细节，但这可能是一种保持“沙盒”约束的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T00:16:40.273

Audiobus SDK（可能）使用[音频会话](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Basics/Basics.html#//apple_ref/doc/uid/TP40007875-CH2-SW1)规则来“组织”来自使用其 SDK 的应用程序的所有声音输出，正如您在他们的[视频](http://audiob.us/press)（在页面底部）中看到的那样，应用程序有一个横向菜单可以切换回来并在应用程序之间转发。

音频会话类别指出：

> 允许混合：如果是，来自其他应用程序（例如 iPod）的音频可以在您的应用程序播放声音时继续播放。

这样，Audiobus 可以“控制”声音并允许会话在应用程序之间持续存在。

# xml - 调用 x:transform 时从 xsl 中删除前导空格

> ID：13834039
> 
> 赞同：0
> 
> 时间：2012-12-12T06:27:09.637
> 
> 标签：xml, jsp, xslt

您好我正在尝试使用以下代码从 jsp 执行 xml-xsl 转换：

```
<c:import url="/global/xsl/sub-nav.xsl" var="xslt"/>
<c:import url="/sitemap.xml" var="xmltext"/>
<x:transform xml="${xmltext}" xslt="${xslt}">
   <x:param name="relativeURL" value="/personal/accounts/"/>
   <x:param name="fullRelativeURL" value="/personal/accounts/sba/"/>
</x:transform> 
```

这里的问题是，我无法对 xsl 文件进行任何更改。`<?xml version="1.0" encoding="ISO-8859-1"?>`它在 xsl 的第一行之前有一个前导空格。有没有办法在从 jsp 调用转换时省略该空间？否则，如果我不去掉那个前导空格，它会给出 500 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:36:10.097

你意识到 的值`${xslt}`是一个字符串，对吧？;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:06:03.663

严格阅读[XML 规范（生产 22“序言”）](http://www.w3.org/TR/REC-xml/#NT-prolog)说在 XML 序言之前不能有空格。因此，带有前导空格的 XSL 文件已损坏，***必须***修复。

我想您可以编写代码以将 XSL 文件加载到内存中，同时删除前导空格，然后将更正的缓冲区传递给转换而不是原始 XSL ......但这似乎需要做很多工作，并且每次都会发生调用了 JSP。

# c - C: 检测有多少数据被写入一个水龙头

> ID：13834040
> 
> 赞同：4
> 
> 时间：2012-12-12T06:27:09.527
> 
> 标签：c, sockets, tun

我正在开发一个从 Tap 读取的程序。唯一的问题是，我不知道如何检测到水龙头的一次传输结束和另一次传输的开始。

从水龙头读取是否与 SOCK_STREAM 相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:06:40.647

Tun/tap 试图看起来像一个普通的以太网控制器，但 tap 设备本身就像任何其他文件描述符一样被访问。

由于它伪装成以太网控制器，因此您必须提前知道传输的以太网帧本身有多大 - 这来自分接设备所连接的软件桥或原始以太网中的“长度”字段框架。

这当然只能是 Tap 设备的 MTU 大小的最大值，通常默认为 1500 字节。

因此，在对分接设备的文件描述符执行 read() 之前，您必须弄清楚以太网帧的实际大小。

# jquery - jQuery：点击时遍历有限的数值数组

> ID：13834044
> 
> 赞同：0
> 
> 时间：2012-12-12T06:27:24.273
> 
> 标签：jquery, arrays, variables

我知道这是一个非常基本的问题，但仍然：

首次加载页面时，变量**myvar**设置为随机值：0、1、2 或 3。

单击按钮时，如果变量小于 3，则递增 1。如果变量 = 3，则将其设置为 0。

将不胜感激形成 jQuery 专家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:29:24.490

尝试这个，

**[现场演示](http://jsfiddle.net/rajaadil/67YP9/2/)**

```
<input type="button" id="buttonId" value="click me" />

$('#buttonId').click(function(){
     // myvar = 3;
     if(myvar < 3)
         myvar++;
     if(myvar ==3)
         myvar = 0;
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:28:50.030

像这样的东西？

```
$('#button').click(function(){
    if (myvar< 3){
        myvar++;
    }else{
        myvar = 1;
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T06:32:35.123

```
$('#button').click(function(){
    myvar = (myvar == 3) ? 0 :  ++myvar;
    }
}); 
```

# c++ - 无论大小如何处理输入数据？

> ID：13834046
> 
> 赞同：0
> 
> 时间：2012-12-12T06:27:44.943
> 
> 标签：c++, map

我的代码无法处理大数据，无法计算重定向输入中的字母。最终结果是挂起并给出大量数字。文件的大小无关紧要，因为它读取字符、计数并继续前进。所以我很难过。`count[26]`保存每个字母的数量，我在哪里可以控制这些数字的限制？

```
int main (int argc, char *argv[])
{

int count [26] = { };   

char c;

c = cin.get();     
while(!cin.eof())   
{

  if (isalpha(c))
  {
     c = tolower(c);

     count [ c - 'a']++;

  }             

  c = cin.get();
 }      

} //end main 
```

# xml - Perl XML::LibXML 安装失败

> ID：13834056
> 
> 赞同：4
> 
> 时间：2012-12-12T06:28:18.873
> 
> 标签：xml, perl, libxml2

我正在尝试通过 CPAN 安装 Perl XML::LibXML 模块，但出现以下错误。我正在使用 Windows 7 机器和 Perl v5.16.1。我做了很多搜索，但没有得到任何解决方案。

应该是什么问题？

```
Set up gcc environment - 3.4.5 (mingw-vista special r3)
enable native perl UTF8
Checking for ability to link against xml2...no
Checking for ability to link against libxml2...libxml2, zlib, and/or the Math library (-lm) have not been found.
Try setting LIBS and INC values on the command line
Or get libxml2 from
  http://xmlsoft.org/
If you install via RPMs, make sure you also install the -devel
RPMs, as this is where the headers (.h files) are.

Also, you may try to run perl Makefile.PL with the DEBUG=1 parameter
to see the exact reason why the detection of libxml2 installation
failed or why Makefile.PL was not able to compile a test program.
**No 'Makefile' created  SHLOMIF/XML-LibXML-2.0014.tar.gz
  C:\Perl\bin\perl.exe Makefile.PL INSTALLDIRS=site -- NOT OK**
Running make test
  Make had some problems, won't test
Running make install
  Make had some problems, won't install
**Could not read metadata file. Falling back to other methods to determine prerequisites**
Failed during this command:
 SHLOMIF/XML-LibXML-2.0014.tar.gz             : writemakefile NO -- No 'Makefile' created 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T10:40:28.000

目前尚不清楚您使用的是哪个 Perl 发行版。在 Windows 上，最容易使用[ActivePerl](http://www.activestate.com/activeperl/downloads)及其本机包管理器`ppm`（不是 CPAN）。

在我的 Windows 7 机器上，我可以`XML::LibXML`使用以下命令毫无问题地安装：

```
ppm install XML::LibXML 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-24T18:13:02.513

对于 Windows 上的 ActivePerl，XML::LibXML 不再通过 PPM 可用，因为缺少必须手动安装的依赖项。

通过 CPAN 安装是正确的方法，但您需要确保存在 libxml2 及其依赖项。XML::LibXML 需要它们。

安装（来自[这里](https://www.opswat.com/blog/installing-libxml-perl-module-microsoft-windows)，感谢 Rudy Rodriguez）是一条漫长而曲折的道路，但它可以工作（Win 8.1，ActivePerl 5.20.1 x64）：

*   获取所需的 libxml2、iconv、zlib（均来自[此处](http://www.zlatkovic.com/libxml.en.html)）和[gettext-tools](http://ftp.gnome.org/pub/gnome/binaries/win64/dependencies/gettext-tools-dev_0.18.1.1-2_win64.zip)的二进制包。

*   将所有文件提取到同一目录（例如 C:\perl_libxml\merged），以便将每个 zip 文件中的 include、lib 等子目录中的文件提取到一个常见的包含、lib 等目录中

*   将 /libxml2/libxml 文件夹上移一级，即到 /libxml，因为这是预期的默认目录

*   将 libz.a 重命名为 zlib.a（在 lib 目录中）

*   安装依赖项

    ```
    ppm install dmake MinGW XML::NamespaceSupport XML::SAX 
    ```

*   将 c:\perl_libxml\merged\bin 添加到 Windows PATH
*   转到失败的 cpan 构建所在的目录，例如 c:\perl64\cpan\build\XML-LibXML<...>
*   跑：

    ```
    Makefile.PL INC=-IC:\perl_libxml\merged\include LIBS=-LC:\perl_libxml\merged\lib 
    ```

    Makefile 的构建应该成功。如果不是，检查LIBS和INC参数是否指向正确的目录

*   ```
    dmake 
    ```

    如果失败，请检查您的路径条目是否设置正确

*   ```
    dmake test 
    ```

    如果 'dmake test' 失败并出现以下神秘错误：

    ```
    load_file:%1 is not a valid Win32 application at C:/Perl64/lib/DynaLoader.pm line 191 
    ```

    可能是某些库的不同版本存在于您的 PATH 中，因此在构建期间进行了链接。

    我的 PATH 中有另一个 MinGW 环境，导致链接错误的库。[我可以通过使用Windows Server 2003 平台 SDK](http://www.microsoft.com/en-us/download/details.aspx?id=12261)中的“依赖”工具检查构建的 libxml.dll 来解决它。您可以看到 libxml.dll 使用了哪个 DLL 以及为哪个平台编译。所有这些都必须匹配并且也匹配您的 Perl 版本，x86 或 x64。

*   如果测试成功，最后安装 XML::LibXML

    ```
    dmake install 
    ```

旁注：我知道这个问题已经很老了，但我把这个解决方案放在这里作为其他人在未来遇到同样问题的参考（也许我就是其中之一......）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-24T18:55:41.013

安装[Strawberry Perl](http://strawberryperl.com/)，它带有 XML::LibXML 及其内置依赖项。

# ruby-on-rails-3 - Rails - 如何使用重新加载方法？

> ID：13834058
> 
> 赞同：2
> 
> 时间：2012-12-12T06:28:32.823
> 
> 标签：ruby-on-rails-3, activerecord, associations, reload

**Case1**：为模型创建一条新记录并分配关联对象（Status 对象而不是 Status.id），例如

```
 visit = Visit.create(:date => Date.today, :status => Status.first)
    visit.status_id #=> 1 
```

创建记录后

我正在尝试更新属性“status_id”（Status.id 而不是 Status 对象），但它返回旧值，甚至在保存对象后调用 reload。例子：

```
 visit.status_id = Status.last.id
    visit.save
    visit.reload
    visit.status_id #=> 1 
```

当我在创建后调用 reload 方法时，它按预期工作

```
 visit = Visit.create(:date => Date.today, :status => Status.first)
    visit.status_id #=> 1
    visit.reload
    visit.status_id = 2
    visit.save
    visit.status_id #=> 2 
```

**案例 2：**如果我分配 'status_id' 值而不是状态对象，则无需重新加载对象并且其工作正常

```
 visit = Visit.create(:date => Date.today, :status_id => Status.first.id)
    visit.status_id #=> 1
    visit.status_id = 2
    visit.save
    visit.status_id #=> 2 
```

使用上述两种情况，我应该什么时候使用该`reload`方法？应该在之前还是之后`save`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T20:54:44.203

我认为您对如何`save`和`reload`工作的理解基本上是正确的。你的结果肯定看起来不一致。根据你的结果，我有一种感觉，你`save`失败了。

`save`将尝试将本地版本存储到数据库中。如果模型在您加载后发生更改，它不会刷新数据库中的任何值。如果`save`失败，本地值仍然是您设置的值，但数据库将具有*旧*值。

`reload`覆盖您所做的任何本地更改并将它们设置为数据库值。

假设您关心的模型的数据库没有争用，让我们来看看您的示例。

**示例 1** 如果`save`有效，则将`reload`不执行任何操作，并且 的值为。但是，如果失败，那么 的值将是数据库中最初的值。`visit.status_id``Status.last.id``save``visit.status_id`

**示例 2** 如果`create`不起作用，那么`reload`将给出`RecordNotFound`错误，因为您不能`reload`保存尚未持久化的内容。之后您将 设置`status_id`为 2 然后调用`save`. 无论`save`成功还是失败，本地的值都`status_id`将保持为2。但是，数据库值取决于它是通过还是失败。

**示例 3** 嘿！除了重新加载之外，这与示例 2 相同。

这是一些文档，但我不确定您会发现它有多大帮助：http: [//apidock.com/rails/ActiveRecord/Persistence/save](http://apidock.com/rails/ActiveRecord/Persistence/save)

[http://apidock.com/rails/ActiveRecord/Persistence/reload](http://apidock.com/rails/ActiveRecord/Persistence/reload)

您可能想检查是否`save`成功或致电`save!`以确保`save`实际工作。

我希望这会有所帮助。

# android - 解决android应用程序内存使用问题

> ID：13834060
> 
> 赞同：0
> 
> 时间：2012-12-12T06:28:43.243
> 
> 标签：android, memory, memory-leaks, ddms

我想知道如何解决我的应用在 Android 上的高内存使用问题。我搜索了互联网，发现 DDMS 插件在为我的应用程序获取堆的内存转储方面很有用。然而这已经没有用了。

应用程序“Usage Timelines Free”显示使用了 94 MB 的内存，而 DDMS 堆转储显示总共 8.4 MB，疑似泄漏是资源文件。

当我从 adb (dumpsys meminfo) 生成转储时，我得到：

```
 Shared  Private     Heap     Heap     Heap

               Pss    Dirty    Dirty     Size    Alloc     Free

            ------   ------   ------   ------   ------   ------

   Native       20        8       20    54588    39431     1892

   Dalvik     6732     9952     6396    10756    10028      728

   Cursor        0        0        0                           

   Ashmem      184        0      184                           

Other dev    11462     1172    11384                           

 .so mmap     2467     2072     1156                           

.jar mmap        0        0        0                           

.apk mmap       48        0        0                           

.ttf mmap        2        0        0                           

.dex mmap     1037        0        0 
```

其他地图 41 16 32

```
 Unknown    46352      292    46348                           

    TOTAL    68345    13512    65520    65344    49459     2620 
```

我怎么知道这个巨大的内存消耗背后是什么。我的应用程序是一个永久运行的前台监控服务，其中有一些每天访问几次的活动。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T09:46:19.240

尽量减少您的安卓数据使用量。检查链接：[http ://engineroots.games4punk.com/minimize-your-android-data-usage/](http://engineroots.games4punk.com/minimize-your-android-data-usage/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:38:51.013

> DDMS 并获得了堆内存转储。它只显示使用了 8.4 MB！

然后，在完成垃圾回收（创建堆转储的净效应）后，您仅使用 8.4MB 的堆空间。

请注意，如果您在 Android 1.x/2.x 上运行此程序，MAT 将不会报告位图占用的空间。始终尝试从 Android 3.0+ 设备或模拟器转储堆。

> 当我从 adb (dumpsys meminfo) 生成转储时，我得到：

我的猜测是您在 Android 1.x/2.x 设备或模拟器上运行它，并且您有很多位图内存。尝试在 Android 3.0+ 环境中运行堆转储和其他测试。

另外，请记住，`adb dumpsys meminfo`它不会执行完整的垃圾回收，而转储 HPROF 文件则可以。Android 垃圾收集器经过优化以最小化 CPU 使用率，因此不会尝试执行完整的垃圾收集。因此，在运行时，堆通常会充满垃圾，GC 引擎会根据需要回收这些垃圾。

您可能还希望阅读[Dianne Hackborn 关于此主题的文章](https://stackoverflow.com/questions/2298208/how-to-discover-memory-usage-of-my-application-in-android/2299813#2299813)。

# cakephp-2.1 - 我可以在cakephp中为每个嵌套吗

> ID：13834062
> 
> 赞同：-1
> 
> 时间：2012-12-12T06:28:51.067
> 
> 标签：cakephp-2.1

我在 cakephp 中有问题

控制器

```
$due = $this->Issue->find('all' , array('conditions' => array ('Issue.user_id'=>6)));
$this->set('due',$due);
$id = $due['0']['Issue']['book_id'];
$b = $this->Bookmaster->find('first' , array ('conditions' => array ('Bookmaster.id' => $bookid)));
$book = $this->Book->find('all',array('conditions' => array ('Book.id' =>$id)));
$bookid = $book['0']['Book']['bookmaster_id']; 
```

Ctp 包含

```
<h1> ISSUED BOOK DETAILS </h1>
<table width="200" border="2" bordercolor="#009933">
<tr>
<td> BOOK ID </td>
<td> TITLE </td>
<td> AUTHOR </td>
<td> EDITION </td>
<td>ISSUED ON  </td>
<td> DUE DATE </td>
<td> POTENTIAL FINE</td>
</tr>
 <?php foreach ($due  as $data  ) { ?> <tr> 

<td> <?php  echo $data['Issue']['book_id']; ?> </td> 
<td> <?php   echo $b ['Bookmaster']['title'] ;?></td> 
<td> <?php  echo $b['Bookmaster']['author'];?></td>  
<td> <?php  echo $b ['Bookmaster']['edition'];?> </td>  
<td> <?php echo $data['Issue']['issue_date_time']; ?> </td> 
<td> <?php  echo $data['Issue']['due_date']; ?> </td>  
<td> <?php echo $out['Fine']['fineamount'];?> </td> 
 </tr> <?php }?>
</table> 
```

我的问题是如何使用 for 循环进行操作。我的循环没有为 bookmaster 迭代..所以我该怎么做..

如何增加 bookid 的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:44:43.063

问题是您正在循环`$due`，并且 $b 数据是一个键值数组（即`$b[0]['bd']`, `$b[1]['bd']`,`$b[2]['bd']`等）因此，您正在搜索的数组的键（或索引）将永远不会与`$due`循环对齐.

更好的解决方案是编写一个连接，这样每条记录都包含您需要的信息，并且循环将能够显示您需要的数据。您需要更多的要求/信息才能让这里的任何人提出建议。

# php - 通过添加后缀重命名文件

> ID：13834067
> 
> 赞同：1
> 
> 时间：2012-12-12T06:29:23.380
> 
> 标签：php, javascript, jquery, html, forms

在将文件发送到服务器之前，我可以更改文件的名称，例如名称为“0124.jpg”的图像吗？

```
<input id="f1" style="margin-bottom: 5px;" type="file"  name="f1" onchange="javascript:readURL_f1(this);"/>
<input id="f2" style="margin-bottom: 5px;" type="file"  name="f1" onchange="javascript:readURL_f2(this);"/> 
```

如果文件是从 f1 上传的，那么在发送到服务器之前，名称应该变成 pic1_[filename].jpg，而不是仅仅发送原始文件名。我不希望这在服务器端完成，因为我认为它可能很复杂。

**编辑**： Upload.php 是我的 php 文件，它上传文件中的任何内容。所以，这对我来说是一个挑战。我可以更改文件名，但在所有三个上传中都会更改。例如，我为传入的文件名添加了一个“_”。然后，它被更改为所有文件名。无论如何从客户端？

我的上传脚本：[Upload.php](http://jsfiddle.net/F7qGL/)

**上传.php**

```
<?php mysql_connect('localhost','root','phpmyadmin');
 $connected = mysql_select_db('image_Upload');
 ?>
<noscript>
<div align="center"><a href="index.php">Go Back To Upload Form</a></div><!-- If javascript is disabled -->
</noscript>
<?php
//If you face any errors, increase values of "post_max_size", "upload_max_filesize" and "memory_limit" as required in php.ini
 //Some Settings
$ThumbSquareSize         = 200; //Thumbnail will be 200x200
$BigImageMaxSize         = 500; //Image Maximum height or width
$ThumbPrefix            = "thumb_"; //Normal thumb Prefix
$DestinationDirectory    = 'uploads/'; //Upload Directory ends with / (slash)
$Quality                 = 90;
$id = 'm123';
//ini_set('memory_limit', '-1'); // maximum memory!

foreach($_FILES as $file)
{
// some information about image we need later.
$ImageName         = $file['name'];
$ImageSize         = $file['size'];
$TempSrc         = $file['tmp_name'];
$ImageType         = $file['type'];

if (is_array($ImageName))
{
    $c = count($ImageName);

    echo  '<ul>';

    for ($i=0; $i < $c; $i++)
    {

        $processImage            = true;    
        $RandomNumber            = rand(0, 9999999999);  // We need same random name for both files.

        if(!isset($ImageName[$i]) || !is_uploaded_file($TempSrc[$i]))
        {
            echo '<div class="error">Error occurred while trying to process <strong>'.$ImageName[$i].'</strong>, may be file too big!</div>'; //output error
        }
        else
        {
            //Validate file + create image from uploaded file.
            switch(strtolower($ImageType[$i]))
            {
                case 'image/png':
                    $CreatedImage = imagecreatefrompng($TempSrc[$i]);
                    break;
                case 'image/gif':
                    $CreatedImage = imagecreatefromgif($TempSrc[$i]);
                    break;
                case 'image/jpeg':
                case 'image/pjpeg':
                    $CreatedImage = imagecreatefromjpeg($TempSrc[$i]);
                    break;
                default:
                    $processImage = false; //image format is not supported!
            }
            //get Image Size
            list($CurWidth,$CurHeight)=getimagesize($TempSrc[$i]);

            //Get file extension from Image name, this will be re-added after random name
            $ImageExt = substr($ImageName[$i], strrpos($ImageName[$i], '.'));
            $ImageExt = str_replace('.','',$ImageExt);

            //Construct a new image name (with random number added) for our new image.
            $NewImageName = $id.'_'.'pic'.($i+1).'.'.$ImageExt;

            //Set the Destination Image path with Random Name
            $thumb_DestRandImageName     = $DestinationDirectory.$ThumbPrefix.$NewImageName; //Thumb name
            $DestRandImageName             = $DestinationDirectory.$NewImageName; //Name for Big Image

            //Resize image to our Specified Size by calling resizeImage function.
            if($processImage && resizeImage($CurWidth,$CurHeight,$BigImageMaxSize,$DestRandImageName,$CreatedImage,$Quality,$ImageType[$i]))
            {
                //Create a square Thumbnail right after, this time we are using cropImage() function
                if(!cropImage($CurWidth,$CurHeight,$ThumbSquareSize,$thumb_DestRandImageName,$CreatedImage,$Quality,$ImageType[$i]))
                    {
                        echo 'Error Creating thumbnail';
                    }
                    /*
                    At this point we have succesfully resized and created thumbnail image
                    We can render image to user's browser or store information in the database
                    For demo, we are going to output results on browser.
                    */

                    //Get New Image Size
                    list($ResizedWidth,$ResizedHeight)=getimagesize($DestRandImageName);
                    echo '<table width="100%" border="0" cellpadding="4" cellspacing="0">';
                    echo '<tr>';
                    echo '<td align="center"><img src="uploads/'.$ThumbPrefix.$NewImageName.
                    '" alt="Thumbnail" height="'.$ThumbSquareSize.'" width="'.$ThumbSquareSize.'"></td>';
                    echo '</tr><tr>';
                    echo '<td align="center"><img src="uploads/'.$NewImageName.
                    '" alt="Resized Image" height="'.$ResizedHeight.'" width="'.$ResizedWidth.'"></td>';
                    echo '</tr>';
                    echo '</table>';

                    if(isset($id))
                    {
                        mysql_query("UPDATE imagetable SET ImageName='$DestRandImageName',ThumbName='$thumb_DestRandImageName',
                        ImgPath='uploads/' WHERE id='$id'");

                    }
                    else{
                        mysql_query("INSERT INTO imagetable (id, ImageName, ThumbName, ImgPath)
                        VALUES ('$id','$DestRandImageName', '$thumb_DestRandImageName', 'uploads/')");    
                    }

            }else{

                echo '<div class="error">Error occurred while trying to process <strong>'.$ImageName.
                '</strong>! Please check if file is supported</div>';
            }

        }

    }
    echo '</ul>';
    }
}

// This function will proportionally resize image
function resizeImage($CurWidth,$CurHeight,$MaxSize,$DestFolder,$SrcImage,$Quality,$ImageType)
{
    //Check Image size is not 0
    if($CurWidth <= 0 || $CurHeight <= 0)
    {
        return false;
    }

    //Construct a proportional size of new image
    $ImageScale          = min($MaxSize/$CurWidth, $MaxSize/$CurHeight);
    $NewWidth              = ceil($ImageScale*$CurWidth);
    $NewHeight             = ceil($ImageScale*$CurHeight);

    if($CurWidth < $NewWidth || $CurHeight < $NewHeight)
    {
        $NewWidth = $CurWidth;
        $NewHeight = $CurHeight;
    }
    $NewCanves     = imagecreatetruecolor($NewWidth, $NewHeight);
    // Resize Image
    if(imagecopyresampled($NewCanves, $SrcImage,0, 0, 0, 0, $NewWidth, $NewHeight, $CurWidth, $CurHeight))
    {
        switch(strtolower($ImageType))
        {
            case 'image/png':
                imagepng($NewCanves,$DestFolder);
                break;
            case 'image/gif':
                imagegif($NewCanves,$DestFolder);
                break;            
            case 'image/jpeg':
            case 'image/pjpeg':
                imagejpeg($NewCanves,$DestFolder,$Quality);
                break;
            default:
                return false;
        }
    if(is_resource($NewCanves)) {
      imagedestroy($NewCanves);
    }
    return true;
    }

}

//This function corps image to create exact square images, no matter what its original size!
function cropImage($CurWidth,$CurHeight,$iSize,$DestFolder,$SrcImage,$Quality,$ImageType)
{     
    //Check Image size is not 0
    if($CurWidth <= 0 || $CurHeight <= 0)
    {
        return false;
    }

    if($CurWidth>$CurHeight)
    {
        $y_offset = 0;
        $x_offset = ($CurWidth - $CurHeight) / 2;
        $square_size     = $CurWidth - ($x_offset * 2);
    }else{
        $x_offset = 0;
        $y_offset = ($CurHeight - $CurWidth) / 2;
        $square_size = $CurHeight - ($y_offset * 2);
    }

    $NewCanves     = imagecreatetruecolor($iSize, $iSize);    
    if(imagecopyresampled($NewCanves, $SrcImage,0, 0, $x_offset, $y_offset, $iSize, $iSize, $square_size, $square_size))
    {
        switch(strtolower($ImageType))
        {
            case 'image/png':
                imagepng($NewCanves,$DestFolder);
                break;
            case 'image/gif':
                imagegif($NewCanves,$DestFolder);
                break;            
            case 'image/jpeg':
            case 'image/pjpeg':
                imagejpeg($NewCanves,$DestFolder,$Quality);
                break;
            default:
                return false;
        }
    if(is_resource($NewCanves)) {
      imagedestroy($NewCanves);  
    }
    return true;

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T07:34:23.467

当您上传文件时，您通常遵循此工作流程

1.  用户选择一个文件并点击上传
2.  服务器从临时文件夹中提取文件 - 检查 MimeType、调整大小和重命名文件并将其存储到文件服务器上您想要的任何位置。
3.  重命名时，如果您想查看是否存在相同的文件名，然后附加 _01、_02，那么您必须检查是否存在具有该名称的文件，然后在末尾附加唯一编号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:07:41.490

类似的事情通常在服务器端完成。预先添加或附加代码或更改文件的全名的目的是防止上传的文件名冲突。所以想象一下在客户端做这件事？按下上传按钮时，您需要询问服务器此文件名是否已经存在，然后等待服务器的响应，然后根据响应进行重命名，然后将其发送到服务器，而不是仅将其发送到服务器然后进行检查然后重命名然后保存。

# xml-parsing - DTD XML 不确定性错误

> ID：13834069
> 
> 赞同：0
> 
> 时间：2012-12-12T06:29:36.293
> 
> 标签：xml-parsing, dtd, dtd-parsing, xml

我正在为这里给出的 XML 编写 DTD。 [http://s3.amazonaws.com/spark-public/db/docs/courses-ID.xml](http://s3.amazonaws.com/spark-public/db/docs/courses-ID.xml)

我不知道如何编写部门元素。这是我的 DTD 代码。

```
<!ELEMENT Course_Catalog (Department+)>
<!ELEMENT Department ---**don't know what to write here**--->
<!ATTLIST Department Code CDATA #REQUIRED Chair IDREF #REQUIRED>
<!ELEMENT Title (#PCDATA)>
<!ELEMENT Course (Title,Description*)>
<!ELEMENT Professor (First_Name,Middle_Initial?,Last_Name)>
<!ELEMENT Lecturer (First_Name,Middle_Initial?,Last_Name)>
<!ATTLIST Course Number ID #REQUIRED Prerequisites IDREFS #IMPLIED Instructors IDREFS    #REQUIRED Enrollment CDATA #IMPLIED>
<!ATTLIST Professor InstrID ID #REQUIRED>
<!ATTLIST Lecturer InstrID ID #REQUIRED>
<!ELEMENT First_Name (#PCDATA)>
<!ELEMENT Middle_Initial (#PCDATA)>
<!ELEMENT Last_Name (#PCDATA)>
<!ELEMENT Description (#PCDATA | Courseref)*>
<!ELEMENT Courseref EMPTY>
<!ATTLIST Courseref Number IDREF #REQUIRED> 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:06:53.020

*[首先，请注意——如果你提供更多证据证明你自己完成了一些工作，你会得到更好的提问结果：这让你看起来更像是一个可以使用帮助的人，而不是像一个不需要帮助的人'不想自己做任何工作，它可以帮助回答者更好地理解他们所做的并且不需要解释。此外，更全面地说明您尝试过的方法以及它为什么不起作用的原因几乎总是会包含您收到的错误消息的说明，这对想要帮助您的人会有所帮助。如果您想获得有关 Stack Overflow 的帮助，最好阅读[Eric Raymond 了解如何提出好的问题](http://catb.org/~esr/faqs/smart-questions.html)，并**按照他说的去做**。]*

您提供的示例文档中的每个部门元素都以一个 Title 元素开始，以可变数量的 Course 元素继续，并以 Professor 和 Lecturer 元素的混合结束。这其中哪一部分你不明白怎么表达？（到底它与决定论有什么关系？）

下面是一些将接受示例中的 Department 元素的元素声明。

```
<!ELEMENT Department ANY >
<!ELEMENT Department (Title | Course | Professor | Lecturer)* >
<!ELEMENT Department (Title | Course | Professor | Lecturer)+ >
<!ELEMENT Department (Title, Course*, (Professor | Lecturer)* >
<!ELEMENT Department (Title, Course+, (Professor | Lecturer)+ >
<!ELEMENT Department (Title, Course+, (Professor?, Lecturer?)* >
<!ELEMENT Department (Title, Course+, (Professor?, Lecturer?)+ >
<!ELEMENT Department (Title, Course*, 
                     (Professor | Lecturer | Instructor | TA)* >
<!ELEMENT Department (Title, Course+, Professor,
                     (Professor | Lecturer)+ > 
```

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T04:29:47.267

尝试这个

```
<!ELEMENT Course_Catalog (Department*)>
<!ELEMENT Department (Title, Course*,  (Professor | Lecturer)+)>
<!ATTLIST Department Code CDATA #REQUIRED
                                 Chair IDREF #REQUIRED>
<!ELEMENT Title (#PCDATA)>
<!ELEMENT Professor (First_Name, Middle_Initial?, Last_Name)>
<!ATTLIST Professor InstrID  ID  #REQUIRED>
<!ELEMENT First_Name (#PCDATA)>
<!ELEMENT Last_Name (#PCDATA)>
<!ELEMENT Course (Title, Description?)>
<!ELEMENT Description (#PCDATA | Courseref )*>
<!ELEMENT Courseref EMPTY>
<!ATTLIST Courseref Number IDREF  #REQUIRED>
<!ATTLIST Course Number ID #REQUIRED
                           Prerequisites CDATA #IMPLIED
                           Instructors IDREFS #REQUIRED
                           Enrollment  CDATA #IMPLIED>
<!ELEMENT Instructors (Professor | Lecturer)+>
<!ELEMENT Lecturer (First_Name, Middle_Initial?, Last_Name)>
<!ATTLIST Lecturer InstrID  ID  #REQUIRED>
<!ELEMENT Middle_Initial (#PCDATA)> 
```

谢谢， 比马尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T02:26:38.350

你试过什么没用？

您可能不知道内容模型可以有多个级别的括号，用于分组目的。就像是

```
(Title, Course+, (Professor | Lecturer)+) 
```

应该适用于此 XML 实例，但 Course_catalog XML 的其他实例可能会揭示其他要求。

# iphone - 无法在 iOS 中将字节数组发布到 Web 服务 (REST)

> ID：13834070
> 
> 赞同：0
> 
> 时间：2012-12-12T06:29:40.517
> 
> 标签：iphone, ios, post, bytearray, asihttprequest

我正在开发一个应用程序，它要求我将音频/视频/图像文件转换为“字节数组”并通过 POST 请求将其上传到 Web 服务（REST）。我实际上是使用`ASIHTTPRequest`( `ASIFormData`) 来发布数据。但我找不到任何允许我发布`byteArray`. 有没有办法做到这一点....？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:57:01.330

您可以使用 ASIFormDataRequest 的 setData 发布任何数据。[这是](http://allseeing-i.com/ASIHTTPRequest/How-to-use)一个例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:53:15.567

您可以从您的字节中创建一个`NSData`，并将其设置为使用`setData:`.

[NSData 类参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/occ/clm/NSData/dataWithBytes%3alength%3a)

# vb.net - Webkit 浏览器；不会导航到谷歌以外的任何网站

> ID：13834071
> 
> 赞同：1
> 
> 时间：2012-12-12T06:29:44.623
> 
> 标签：vb.net, webkit

我正在尝试使用 Vb.net 和 WebKit 0.5 Cario 构建一个简单的浏览器，但已经走到了死胡同。

问题：浏览器不导航到谷歌以外的任何其他网站。

我想制作一个具有附加功能的浏览器，以从 HTML5 网站中提取信息。这就是我使用 Webkit 的原因。

谁能告诉我该怎么做。

谢谢迪内什萨伦克

# php - 我正确使用 mysqli_real_escape_string 吗？

> ID：13834074
> 
> 赞同：3
> 
> 时间：2012-12-12T06:29:50.837
> 
> 标签：php, mysqli

我正在使用 OOP 方法转义字符串`mysqli_real_escape_string`。我将输入的内容保存到会话变量中，以确保它正确转义。它似乎正确转义，但是当我检查输入数据库的内容时，我看不到单引号和双引号之前的斜杠。

所以在浏览器中我回显：

```
Array
(
    [formContent] => I\'m always here!
) 
```

但在数据库中我看到：

```
I'm always here! 
```

这是否意味着我的代码某处有问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T06:34:00.210

不，这很正常。`mysqli_real_escape_string`自动为您转义单引号。

当你有绳子时，

```
I'm always here! 
```

`mysqli_real_escape_string`将其处理为

```
I\'m always here! 
```

所以它将被保存在数据库中。这就是它的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:36:08.917

> [`mysqli_real_escape_string`](http://php.net/manual/en/mysqli.real-escape-string.php)— 转义字符串中的特殊字符以在 SQL 语句中使用，同时考虑连接的当前字符集

它是做什么的它转义单引号（在某种程度上从 sql 注入中保存）

```
hello 'world 
```

`mysqli_real_escape_string`将其处理为

```
hello \'world 
```

你可以`stripslashes`用来删除`\`

# javascript - 用于嵌入 bbcode 的 Javascript 正则表达式

> ID：13834075
> 
> 赞同：1
> 
> 时间：2012-12-12T06:29:51.913
> 
> 标签：javascript, regex, parsing, bbcode

所以我正在尝试做一个基本的 bbcode 解析（仅用于嵌入标签），但我已经有一段时间没有玩正则表达式了，所以我在这个问题上寻求帮助。我想匹配所有`[embed]...[/embed]`，所以我使用：

```
var regexp = new RegExp(/\[embed\].*\[\/embed\]/ig);
console.log(regexp.test(content)); 
```

我得到了很多`false`，而我应该只有`true`.

Jsfiddle 在这里可用：http: [//jsfiddle.net/5rxu5/3/](http://jsfiddle.net/5rxu5/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:45:41.533

这应该有效：

```
var reg = new RegExp(/\[embed\](.*?)\[\/embed\]/i);
$('.wmd-output').each(function() {
    var content = $(this).html();
    alert(reg.test(content));
}); 
```

这是 jsfiddle 链接，它在所有情况下都为 true：http: [//jsfiddle.net/UVy45/](http://jsfiddle.net/UVy45/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:31:32.517

```
var regexp = new RegExp(/\[embed\](.*)\[\/embed\]/ig);
console.log(regexp.test(content)); 
```

# c# - 在 Win8 应用程序中获取非渲染文本的高度？

> ID：13834076
> 
> 赞同：1
> 
> 时间：2012-12-12T06:29:55.737
> 
> 标签：c#, user-interface, windows-8

我有一个带有成员函数的数据类，它根据当前实例在运行时创建 UI 元素。我希望能够根据当前使用的文本大小调整输出 UI 元素的大小。如何找到渲染文本的高度（以像素为单位）？

具体来说，我想创建一个基于渲染“0”高度的倍数（~1.5）的均匀正方形网格。

我尝试创建一个 TextBlock 并获取 ActualHeight，但是，这总是返回 0 ...大概是因为 TextBlock 从未实际显示。即使在 TextBlock 的实例上使用 UpdateLayout 也不会更新 ActualHeight 值。

还有其他方法吗？

NB Auto-sizing 对我不起作用，因为我有一些空元素在我这样做时会缩小到 0。我需要根据当前使用的字体大小适当地调整所有元素的大小，无论它们是否有文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:24:43.350

我不熟悉 Windows 8 / WinRT API 集，但`System.Drawing.Graphics.MeasureText`应该仍然可以使用。

# c - 空格分隔文件到结构数组 C

> ID：13834078
> 
> 赞同：1
> 
> 时间：2012-12-12T06:29:57.967
> 
> 标签：c, arrays, structure

我想将文件中的信息存储在结构中。我的文件由行（每一行必须是不同的结构）和列组成，每一列都是不同的数据。文件如下所示：

```
1 AB
2 CD
3 CD
4 AB 
```

我的结构是这样的（其中节点号是第一个整数，节点类型是两个字母）：

```
struct nodes{
int nodeNumber;
char nodeType[2];
}; 
```

到目前为止，我的代码是这样的：

```
lines = lineCount(nodes); //calculates how many lines file has
struct nodes node[lines]; //creates structure array
no = fopen(nodes, mode);
if(no == NULL){
    printf("Can't find the files.");
    exit(1);
}else{
    for(i = 0; i < lines; i++){
        fscanf(no, "%d %2c \n", &id, current);
        node[i].nodeNumber = id;
        strcpy(node[i].nodeType, current);
    }
} 
```

当我调试当前值是这样的： current = \"AB\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\ 000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\ 000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\ 000\000\000\000\000\000\000\000\" 而不仅仅是 AB

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:51:54.577

问题是您使用`strcpy`. 它复制*string*，即带有终止符的字符数组。这意味着`strcpy`它将复制直到它看到字符串终止符`'\0'` *并将*其放在数组的末尾，这意味着您将覆盖数组外的一个字节。

使用手动逐个字符复制一个函数，例如，或者将数组的大小增加到三个以便它可以适合终止[`memcpy`](http://en.cppreference.com/w/c/string/byte/memcpy)字符（这意味着您必须确保`current`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:48:21.750

`scanf`不使用`%c`格式代码读取的字符以 nul 结尾。（虽然显然`current`有很多 NUL，但我不知道你是否可以指望它。

您应该声明`current`为`char[2]`，并使用`memcpy`长度为 2 而不是`strcpy`.

# mysql - 我如何解密我的mysql密码

> ID：13834083
> 
> 赞同：1
> 
> 时间：2012-12-12T06:30:19.267
> 
> 标签：mysql, sql, passwords, encryption

我目前正在尝试找出我的旧密码。

在我们切换并由另一位工作人员接管之前，我一直在亲自托管该网站。

反正。我将如何解密我的密码？

密码 - 62d8937f554cf8ebe29940bf577eb22b 盐 - 9D4kWKQW

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:36:36.843

一般来说，你不能解密密码，至少不容易。

如果您对相关服务器具有 root shell 访问权限，则可以[按照标准说明](http://dev.mysql.com/doc/refman/5.1/en/resetting-permissions.html)分配新密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:37:17.333

这不是 MySQL 密码。

MySQL 密码哈希是 40 个十六进制字符长（至少 MySQL 4.1 和更高版本）。

见[http://dev.mysql.com/doc/refman/5.5/en/password-hashing.html](http://dev.mysql.com/doc/refman/5.5/en/password-hashing.html)

那是 32 个字符，所以它可能是一个 MD5 哈希。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:36:11.993

好吧，如果您知道创建密码的算法是什么，您可以使用盐创建结果的彩虹表，直到找到匹配项。

不过可能需要一些时间。

# java - 如何自定义字母之间的空间

> ID：13834085
> 
> 赞同：-1
> 
> 时间：2012-12-12T06:30:23.457
> 
> 标签：java, format

写代码的时候**遇到一个问题，怎么自定义字母间距？**

这是我的代码：

代码：**System.out.print('\t');** 使字母之间的空格是一个**制表符**。
以下代码的输出如下：

1 ### A ### B ### C ### D
2 ### A ### B ### C ### D
3 ### A ### B ### C ### D
4 ### A ### B ### C ### D
5 ### A ### B ### C ### D
6 ### A ### B ### C ## # D
7 ### A ### B ### C ### D

```
public static void main(String[] args)
{
    char[][] seat = new char[7][5];

    for (int row=0; row<7; row++){
        seat[row][0] = (char)('1' + row);
        }

    for (int row=0; row<7; row++){
        for (int col=1; col<5; col++){
            seat[row][col] = (char)('A'+ col-1);
        }
    }

    for (int row=0; row<7; row++){
        for (int col=0; col<5; col++){
            System.out.print(seat[row][col]);
            System.out.print('\t');
        }
        System.out.println("");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:02:45.613

尝试

```
 ...
    for (int row=0; row<7; row++){
        for (int col=0; col<5; col++){
            System.out.printf("%-8s", seat[row][col]);
        }
        System.out.println("");
    }
         ... 
```

输出

```
1       A       B       C       D       
2       A       B       C       D       
3       A       B       C       D       
4       A       B       C       D       
5       A       B       C       D       
6       A       B       C       D       
7       A       B       C       D 
```

请参阅 java.util.Formatter API 以了解有关格式化选项的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:36:43.690

取一个`string`并替换字符来自定义它并将它放在你的 Sop 语句中，就像这样`System.out.print(chars);` 而不是`System.out.print("\t");`

像这样重写你的代码

```
public static void main(String[] args)
{
    char[][] seat = new char[7][5];
    String chars = "###";
    for (int row=0; row<7; row++){
        seat[row][0] = (char)('1' + row);
        }

    for (int row=0; row<7; row++){
        for (int col=1; col<5; col++){
            seat[row][col] = (char)('A'+ col-1);
        }
    }

    for (int row=0; row<7; row++){
        for (int col=0; col<5; col++){
            System.out.print(seat[row][col]);
            System.out.print(chars);
        }
        System.out.println("");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:38:23.963

使用[`String.format(...)`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)，也许有帮助（如果我理解你的问题）。

# java - 将 Eclipse 连接到 ODBC 驱动程序时计数字段错误

> ID：13834091
> 
> 赞同：0
> 
> 时间：2012-12-12T06:31:16.877
> 
> 标签：java, eclipse, swing, ms-access

尝试使用 microsoft access 和 eclipse 在数据库中创建记录时出现此错误。

```
 [Microsoft][ODBC Microsoft Access Driver]COUNT field incorrect 
```

并且显示的连接已关闭。这是我连接到 ODBC 驱动程序的代码。

```
 public class DBController {
private Connection con;

public void setUp(String dsn) {
    try {
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");          
    } catch (Exception e) {
        System.out.println("Load driver error");
    }
    try {

        String s = "jdbc:odbc:" + dsn;
        con = DriverManager.getConnection(s, "", "");
    } catch (Exception e) {
        e.printStackTrace();
    }
}

public ResultSet readRequest(String dbQuery) {
    ResultSet rs = null;
    try {
        Statement stmt = con.createStatement();
        rs = stmt.executeQuery(dbQuery);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return rs;
}

public int updateRequest(String dbQuery) {
    int count = 0;
    try {
        Statement stmt = con.createStatement();
        count = stmt.executeUpdate(dbQuery);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return count;
}

public void terminate() {
    try {
        con.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

}

这些是我创建用户的代码。

```
 public boolean createUser() {
    boolean success = false;
    DBController db = new DBController();
    db.setUp("IT Innovation Project");
    String sql = "INSERT INTO forumUsers(users_userName,users_password,users_NRIC,users_securityQuestion,users_answer) ";
    sql += "VALUES ('" + userName + "','" + pwd + "','" + nric + "','"
            + securityQuestion + "','" + answer + "')";
    System.out.println(sql);
    if (db.updateRequest(sql) == 1)
        success = true;
    db.terminate();
    return success;
} 
```

我已经按照数据库表列重新排列了序列，但它仍然显示计数字段不正确的错误。那么我该如何解决呢？任何帮助将不胜感激。这是我的挥杆。

```
 public void submitSignup(ActionEvent e) {
    String userName = jTextField_userName.getText();
    String pwd = new String(jPasswordField.getPassword());
    String nric = jTextField_nric.getText();
    String securityQuestion = jComboBox_securityQuestion.getSelectedItem()
            .toString();
    String answer = jTextField_answer.getText();

    if (userName.equals("") || pwd.equals("") || nric.equals("")
            || securityQuestion.equals("") || answer.equals(""))
        JOptionPane.showMessageDialog(null, "Please enter all text field");
    else {
        eForumUser user = new eForumUser(userName, pwd, nric,
                securityQuestion, answer);
        if (user.isExist())
            JOptionPane.showMessageDialog(null,
                    "User already exists! Cannot create.");
        else {
            if (user.createUser() == true)
                ;
            JOptionPane.showMessageDialog(null,
                    "User record created successfull!");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T03:04:56.243

我认为应该是：

```
 String sql = "INSERT INTO forumUsers(users_userName,users_password,users_NRIC,users_securityQuestion,users_answer) " +
         "VALUES (?,?,?,?,?)";
            System.out.println(sql);
            PreparedStatement ps = con.prepareStatement(sql);
            ps.setString(1,users_userName);
            ps.setString(2,users_password);
            ps.setString(3,users_NRIC);
            ps.setString(4,users_securityQuestion);
            ps.setString(5,users_answer);
            int checks = ps.executeUpdate();
            if(checks != 0){                
                  success = true;                       
            }
            else{
              System.out.println("Failed to insert user data");
            }
 db.terminate(); 
```

# date - 如何在 yii 框架中进行日期比较

> ID：13834094
> 
> 赞同：0
> 
> 时间：2012-12-12T06:31:23.507
> 
> 标签：date, yii, comparison

我正在 yii 中创建项目。我的投票表的字段为--pollId -pollQustion -isActive -publishDate

我想检查民意调查的天气发布日期不大于当前日期。我正在实施 -

```
$CurrrentDate=new CDbExpression('NOW()');
if($record->publishDate < $CurrrentDate))
{
  some code......
} 
```

但它没有正确执行。即使发布日期大于当前日期，代码也会执行。那么如何在 yii 框架中进行这种比较。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:45:57.790

PHP 没有日期格式。当您比较 $CurrentDate 和 $record->publishDate 时，您比较的是字符串。好吧，为了正确比较，您需要将其转换为 Unix 的时间戳

```
// here you set right date/time pattern 
// You need to explain CDateTimeParser for your pattern
// just easy use `strtotime` if you have 2012-12-12 12:12:12
$publishTimestamp = strtotime($record->publishDate);
// $publishTimestamp = CDateTimeParser::parse($record->publishDate, 'yyyy-MM-dd hh:mm:ss'); 
// if you need to use Hours and minutes just easy use `time()`
$currentDateTimestamp = time();
// $currentDateTimestamp = strtotime(date('Y-m-d H:i:s'));
// now we can compare
if ($publishTimestamp  < $currentDateTimestamp) {
   // do some 
} 
```

# android - 非法状态异常媒体播放器

> ID：13834097
> 
> 赞同：2
> 
> 时间：2012-12-12T06:31:31.930
> 
> 标签：android, media-player

我的活动中有一个按钮。单击我正在呼叫的按钮`finish()`，问题是我正在`Illegal state exception`接听电话以完成。请帮忙。

```
import java.io.IOException;

import android.app.Activity;
import android.app.ProgressDialog;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnPreparedListener;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.widget.MediaController;
import android.widget.MediaController.MediaPlayerControl;

import com.mds.perfumastic.R;
import com.mds.perfumastic.constants.Constants;

public class AudioPlayerActivity extends Activity implements
    OnPreparedListener , MediaPlayerControl{
    private Handler handler = new Handler();
    private final MediaPlayer mediaPlayer = new MediaPlayer();
    private MediaController mediaController;
    private ProgressDialog progressBar;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_audioplayer);
        progressBar =  new ProgressDialog(this);
        progressBar.setMessage("Playing...");
        progressBar.show();
        String audioUrl = getIntent().getStringExtra(Constants.INTENT_EXTRA_AUDIO_URL);
        mediaController = new MediaController(this);

        try {
            mediaPlayer.setOnPreparedListener(this);
            mediaPlayer.reset();
            mediaPlayer.setDataSource(audioUrl);
            mediaPlayer.prepare();
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (SecurityException e) {
            e.printStackTrace();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
    @Override
    public void onPause() {
        super.onPause();
        progressBar.dismiss();
        if (mediaPlayer.isPlaying()) {
            mediaPlayer.stop();
        }
        mediaPlayer.release();
    }

    // --MediaPlayerControl
            // methods----------------------------------------------------
            public void start() {
                mediaPlayer.start();
            }

            public void pause() {
                mediaPlayer.pause();
            }

            public int getDuration() {
                return mediaPlayer.getDuration();
            }

            public int getCurrentPosition() {
                return mediaPlayer.getCurrentPosition();
            }

            public void seekTo(int i) {
                mediaPlayer.seekTo(i);
            }

            public boolean isPlaying() {
                return mediaPlayer.isPlaying();
            }

            public int getBufferPercentage() {
                return 0;
            }

            public boolean canPause() {
                return true;
            }

            public boolean canSeekBackward() {
                return true;
            }

            public boolean canSeekForward() {
                return true;
            }

            // --------------------------------------------------------------------------------

            public void onPrepared(final MediaPlayer mediaPlayer) {
                Log.d("TAG", "onPrepared");
                progressBar.hide();
                mediaController.setMediaPlayer(this);
                mediaController.setAnchorView(findViewById(R.id.newView));
                mediaPlayer.start();

                handler.post(new Runnable() {
                    public void run() {
                        mediaController.setEnabled(true);
                        mediaController.show(mediaPlayer.getDuration());
                    }
                });
            }
            /** Use screen touches to toggle the video between playing and paused. */
            @Override
            public boolean onTouchEvent(MotionEvent ev) {
                if (ev.getAction() == MotionEvent.ACTION_DOWN) {
                    if (mediaPlayer.isPlaying()) {
                        mediaPlayer.pause();
                    } else {
                        mediaPlayer.start();
                        mediaController.show(mediaPlayer.getDuration());
                    }
                    return true;
                } else {
                    return false;
                }
            }
            public void onClick(View v) {
                if(v.getId() == R.id.btn_back) {

                    finish();
                }
            }

} 
```

这是日志消息：

```
12-12 11:55:34.791: E/AndroidRuntime(1336): FATAL EXCEPTION: main
12-12 11:55:34.791: E/AndroidRuntime(1336): java.lang.IllegalStateException
12-12 11:55:34.791: E/AndroidRuntime(1336):     at android.media.MediaPlayer.getCurrentPosition(Native Method)
12-12 11:55:34.791: E/AndroidRuntime(1336):     at com.mds.perfumastic.activites.AudioPlayerActivity.getCurrentPosition(AudioPlayerActivity.java:80)
12-12 11:55:34.791: E/AndroidRuntime(1336):     at android.widget.MediaController.setProgress(MediaController.java:415)
12-12 11:55:34.791: E/AndroidRuntime(1336):     at android.widget.MediaController.access$500(MediaController.java:71)
12-12 11:55:34.791: E/AndroidRuntime(1336):     at android.widget.MediaController$3.handleMessage(MediaController.java:386)
12-12 11:55:34.791: E/AndroidRuntime(1336):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-12 11:55:34.791: E/AndroidRuntime(1336):     at android.os.Looper.loop(Looper.java:137)
12-12 11:55:34.791: E/AndroidRuntime(1336):     at android.app.ActivityThread.main(ActivityThread.java:4745)
12-12 11:55:34.791: E/AndroidRuntime(1336):     at java.lang.reflect.Method.invokeNative(Native Method)
12-12 11:55:34.791: E/AndroidRuntime(1336):     at java.lang.reflect.Method.invoke(Method.java:511)
12-12 11:55:34.791: E/AndroidRuntime(1336):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-12 11:55:34.791: E/AndroidRuntime(1336):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-12 11:55:34.791: E/AndroidRuntime(1336):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T07:14:20.347

此异常的一个可能原因是，即使您正在完成并释放对象，它`MediaController`仍可能正在查询`MediaPlayer`对象的当前位置。在做之前尝试添加一个[mediaController.hide()](http://developer.android.com/reference/android/widget/MediaController.html#hide%28%29)。`Activity``MediaPlayer``mediaPlayer.stop()`

由于您正在打电话`finish`，您可能还想覆盖`onDestroy`, since`onPause`用于当`Activity`进入后台但仍然存在时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-30T06:16:10.303

目前我正在开发一个使用`MediaPlayer class`. 当应用程序进入`onDestroy`和`onBackPressed`状态时，我遇到了和你一样的错误。但是我已经调用了`mp.release()`方法来释放`mediaplayer object.`但这还不够，我仍然遇到同样的错误。错误是由于`getDuration()`我在`my Handler`. 所以我只是`removeCallbacks()`在调用之前添加方法`mp.release();`：

```
mHandler.removeCallbacks(mUpdateTimeTask); 
```

这里 mHandler 是我的 Handler 对象，而 mUpdateTimeTask 是 Runnable。

它对我有用！这样我就永远不会遇到“IllegalStateException”错误。我希望这个解决方案可以帮助其他人。

# c# - LINQ - Groupy by 用于复杂的 xml

> ID：13834098
> 
> 赞同：1
> 
> 时间：2012-12-12T06:31:48.960
> 
> 标签：c#, linq-to-xml, linq-to-objects

我有以下 XML：-

```
<customer>
    <id>ALFKI</id>
    <name>Alfreds Futterkiste</name>
    <address>Obere Str. 57</address>
    <city>Berlin</city>
    <postalcode>12209</postalcode>
    <country>Germany</country>
    <phone>030-0074321</phone>
    <fax>030-0076545</fax>
    <orders>
      <order>
        <id>10643</id>
        <orderdate>1997-08-25T00:00:00</orderdate>
        <total>814.50</total>
      </order>
      <order>
        <id>10692</id>
        <orderdate>1997-10-03T00:00:00</orderdate>
        <total>878.00</total>
      </order>
    </orders>
</customer> 
```

我想以以下格式获取数据：- 国家名称：德国城市名称：柏林订单：orderid1，orderid2 ...

城市名称：曼海姆 订单：orderid1、orderid2 等。

即对于每个国家，其各自的城市以及该城市的所有orderids。

我正在使用以下查询，通过它我可以对国家及其城市进行分组，但我无法获取该国家的订单：-

```
List<Customer> Customers = GetCustomerData();
            var query = (from cust in Customers
                         from ord in cust.Orders 
                         group cust by cust.Country into CountryGroup
                         select new
                         {
                             CountryName = CountryGroup.Key,
                             CityGroup = (from c in CountryGroup 
                                          where c.Country == CountryGroup.Key 
                                          group c by c.City into CityGroup
                                          select new
                                          {
                                              CityName = CityGroup.Key
                                          })

                         }); 
```

GetCustomerData 的代码：-

```
CustomerList = (from e in XDocument.Load(@"D:\Console Application\LINQDemo\GroupingOperators\GroupingOperators\XMLFiles\Customers.xml").Root.Elements("customer")
                            select new Customer
                            {
                                CustomerID = (string)e.Element("id"),
                                CustomerName = (string)e.Element("name"),
                                Address = (string)e.Element("address"),
                                City = (string)e.Element("city"),
                                Region = (string)e.Element("region"),
                                PostalCode = (string)e.Element("postalcode"),
                                Country = (string)e.Element("country"),
                                PhoneNo = (string)e.Element("phone"),
                                Fax = (string)e.Element("fax"),
                                Orders = (from o in e.Element("orders").Elements("order")
                                          select new Order
                                          {
                                              OrderID = (int)o.Element("id"),
                                              OrderDate = (DateTime)o.Element("orderdate"),
                                              OrderTotal = (decimal)o.Element("total")
                                          }).ToArray()
                            }).ToList(); 
```

请帮忙！

TIA。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T06:52:38.830

如果您对客户进行了正确的解析，那么您的查询应该如下所示：

```
var query = from cust in Customers
            group cust by new { cust.Country, cust.City } into g
            select new
            {
                CountryName = g.Key.Country,
                CityGroup = g.Key.City,
                Orders = g.SelectMany(c => c.Orders)
            }; 
```

这是解析（以防万一）：

```
private List<Customer> GetCustomerData()
{            
    XDocument xdoc = XDocument.Load(path_to_xml);
    return xdoc.Descendants("customer")
                .Select(c => new Customer()
                {
                    Id = (string)c.Element("id"),
                    Name = (string)c.Element("name"),
                    Address = (string)c.Element("address"),
                    Country = (string)c.Element("country"),
                    City = (string)c.Element("city"),
                    Orders = c.Descendants("order")
                                .Select(o => new Order()
                                {
                                    Id = (int)o.Element("id"),
                                    Date = (DateTime)o.Element("orderdate"),
                                    Total = (decimal)o.Element("total")
                                }).ToList()
                }).ToList();
} 
```

我使用以下课程的地方（没有邮政编码、传真和电话）

```
public class Customer
{
    public string Id { get; set; }
    public string Name { get; set; }
    public string Address { get; set; }
    public string Country { get; set; }
    public string City { get; set; }
    public List<Order> Orders { get; set; }
}

public class Order
{
    public int Id { get; set; }
    public DateTime Date { get; set; }
    public decimal Total { get; set; }
} 
```

# javascript - 好看的弧形文字？

> ID：13834099
> 
> 赞同：0
> 
> 时间：2012-12-12T06:31:50.583
> 
> 标签：javascript, html5-canvas, kerning

几年前，我为 APNGedit 制作了一个 Javascript 脚本来绘制 Laughing Man 标志。它使用了现已失效的[mozTextAlongPath](https://developer.mozilla.org/en-US/docs/DOM/CanvasRenderingContext2D#mozTextAlongPath%28%29)

我最近重新发现了这个脚本，并使用翻译、旋转和 fillText() 重新编写了它。但是，这不尊重字符宽度，也没有紧缩（看起来很糟糕）。

大约 2009 年的原版（不完美，但还可以）：

![使用 mozTextAlongPath 的原始笑人](../Images/2670618094ade9cb9a4c4c77e17d3a1f.png)

当前版本：

![使用 fillText 的新版本](../Images/1ab0b4d01e04a7b0d82dbf8d14ccb9cb.png)

**如何在 HTML5 画布上以弧形绘制文本并使其看起来不错？**

* * *

基于 Kolink 答案的解决方案代码：

```
ctx.fillStyle = primaryColor;
ctx.font = fontSize + 'px ' + fontFamily;

var textWidth = ctx.measureText(text).width,
    charRotation = 0,
    character, charWidth, nextChar, nextWidth, bothWidth, kern, extraRotation, charSegment;

for (var i=0, l=text.length; i<l; i++) {
    character = nextChar || text[i];
    charWidth = nextWidth || ctx.measureText(character).width;

    // Rotate so the letter base makes a circle segment instead of a tangent
    extraRotation = (Math.PI/2) - Math.acos((charWidth/2) / radius);

    ctx.save();
    ctx.translate(radius, h/2);
    ctx.rotate(charRotation);
    ctx.translate(0, -textRadius);
    ctx.rotate(extraRotation);
    ctx.fillText(character,0,0);
    ctx.restore();

    nextChar = text[i+1] || '';
    nextWidth = ctx.measureText(nextChar).width;

    bothWidth = ctx.measureText(character+nextChar).width;
    kern = bothWidth - charWidth - nextWidth;

    charSegment = (charWidth+kern) / textWidth; // percent of total text size this takes up
    charRotation += charSegment * (Math.PI*2);
} 
```

![固定的](../Images/22f9243fdb323c53ffeb17416f07e866.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:40:25.700

显然，在圆弧本身上放置字母并不困难（只需将中心底部与圆对齐）。但是，正如您所指出的，问题在于字距调整。

幸运的是，我们有`measureText()`，它可以告诉我们字母的宽度以及使用什么字距。

你的圆的周长很简单`2πr`，文字的总宽度是`ctx.measureText("Your text here");`。得到这两个值的比率，你会发现你需要多少间隔或挤压你的单词。

您可能希望将间距修饰符应用于整个单词，而不是单个字母。为此，请`measureText()`在去除空格的句子上使用以获得字母的宽度（并扩展空格的总宽度）。

现在您需要绘制每个单词的去向。再次使用`measureText()`找出每个单词的宽度并将其中心点绘制在圆圈上，在每个单词之间添加一部分总空间值。现在使用`measureText()`每个单独的字母并将其绘制在正确的位置以获得完美的字距调整。

一切顺利，你应该有一个完美间隔的文本圈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:06:35.357

所以测量文本很好，我最终做的是`Math.pow(measureText + measureTextOfLastChar, 3 / 4)`

出于某种原因，当前和前一个字符的宽度之和的平方根使一些间距太窄，而且根本没有平方根，这也很糟糕，但是 Math.pow(sum, 3/4) 对于某些理性创造了很大的比例。这是代码（在咖啡脚本中）

```
CanvasRenderingContext2D::fillTextCircle = (str, centerX, centerY, radius, angle) ->
  len = str.length
  s = undefined
  @save()
  @translate centerX, centerY
  @rotate - (1 + 1 / len) * angle / 2
  n = 0

  prevWidth = 0
  while n < len
    thisWidth = @measureText(str[n]).width
    @rotate angle / len * Math.pow(thisWidth + prevWidth, 3 / 4) / @measureText(str).width
    s = str[n]
    prevWidth = @measureText(str[n]).width
    @fillText s, -@measureText(str[n]).width / 2, -1 * radius
    n++
  @restore() 
```

然后使用

```
context.fillTextCircle('hiya world', halfWidth, halfHeight, 95, 26) 
```

我猜测并检查了一下，虽然我拿了 calc 4，所以我下意识地知道我在做什么。无论如何，它会产生完美的字符间距，没有 Math.pow(sum_character_widths, 3/4)

一切都可以改变，除了保持 Math.pow(sum, 3/4) 在循环中，因为这是我比我在网上找到的其他东西做得更好的部分。

# asp.net - textBox onBlur 调用服务器方法而不是客户端方法

> ID：13834101
> 
> 赞同：0
> 
> 时间：2012-12-12T06:31:58.467
> 
> 标签：asp.net

我正在扩展 Web 控件。我需要在控件而不是 javascript 触发的每个事件上调用服务器方法。

```
public partial class MyTextBox : RadTextBox, IScriptControl
{
    public MyTextBox()
    {
        Attributes.Add("onBlur", "handleLostFocus();");
        Attributes.Add("runat", "server");
    }

    public void handleLostFocus()
    {
        MyObject obj = new MyObject();
        obj.someproperty = this.Text; //or somehow get the user entered text.

        MyService1 service = new MyService1();
        service.sendRequest(obj);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:59:02.847

正如我在评论中所说，如果`AutoPostBack = "True"`您需要处理您的事件，则默认情况下 TextBox 会发布。假设您的 TextBox 名为 TextBox1：

```
protected void TextBox1_TextChanged(object sender, EventArgs e)
{
    string str = TextBox1.Text;
} 
```

摆脱`handleLostFocus()`或让它成为您的 TextBox 控件的处理程序。

祝你好运朋友。

# iphone - 实体关系问题（核心数据）

> ID：13834102
> 
> 赞同：0
> 
> 时间：2012-12-12T06:32:06.083
> 
> 标签：iphone, core-data, entity-relationship

我有两个名为 UserInfo 和 Department 的实体，它们分别具有一对一和一对多关系，在运行我的应用程序时我得到了这个..

```
Undefined symbols for architecture i386:
  "_OBJC_METACLASS_$_NSManagedObject", referenced from:
      _OBJC_METACLASS_$_Department in Department.o
      _OBJC_METACLASS_$_UserInfo in UserInfo.o
  "_OBJC_CLASS_$_NSManagedObject", referenced from:
      _OBJC_CLASS_$_Department in Department.o
      _OBJC_CLASS_$_UserInfo in UserInfo.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

// 部门.h

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@class UserInfo;

@interface Department : NSManagedObject

@property (nonatomic, retain) NSString * id;
@property (nonatomic, retain) NSString * post;
@property (nonatomic, retain) NSSet *user;
@end

@interface Department (CoreDataGeneratedAccessors)

- (void)addUserObject:(UserInfo *)value;
- (void)removeUserObject:(UserInfo *)value;
- (void)addUser:(NSSet *)values;
- (void)removeUser:(NSSet *)values;
@end 
```

// 部门.m

```
#import "Department.h"
#import "UserInfo.h"

@implementation Department

@dynamic id;
@dynamic post;
@dynamic user;

@end 
```

出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:54:58.203

`CoreData.framework`在`BuildPhases->LinkBinaryWithLibrary->Add` 您的项目中添加。

# c# - 在内容页面 ASP.NET 中使用时，Javascript 不返回正确的值

> ID：13834105
> 
> 赞同：1
> 
> 时间：2012-12-12T06:32:27.993
> 
> 标签：c#, javascript, jquery, asp.net, master-pages

我对 Javascript(Jquery) 完全陌生，仍然是 ASP.NET 的初学者。我有一个内容页面，它有一个 gridview *gvUsers*我为事件*RowDatabound*编写了一个代码，它在每一行的标记中添加了一个“id”。它的行是可点击的，并且可以通过 contentpage 页面中的 javascript 进行选择。

```
 <script src="http://code.jquery.com/jquery-1.8.3.js" type="text/javascript"></script>
             <script type="text/javascript">
                 $(function() {

                $('#<%=gvUsers.ClientID%> tr[id]').click(function() {
                    $('#<%=gvUsers.ClientID%> tr[id]').css({ "background-color":  "White", "color": "Black" });
                    $(this).css({ "background-color": "Black", "color": "White" });          
                });

                $('#<%=gvUsers.ClientID%> tr[id]').mouseover(function() {
                    $(this).css({ cursor: "hand", cursor: "pointer" });
                });

            });

                 $(function() {

                var RowID = $('#hdnEmailID').val();
               if (RowID != "0") {
                    $('#<%=gvUsers.ClientID%> tr[id=' + RowID + ']').css({ "background- color": "Black", "color": "White" });
               }

                $('#<%=gvUsers.ClientID%> tr[id]').click(function() {
                    $('#<%=gvUsers.ClientID%> tr[id]').css({ "background-color": "White", "color": "Black" });
                    $(this).css({ "background-color": "Black", "color": "White" });
                    $('#hdnEmailID').val($(this).attr("id"));
                });

                $('#<%=gvUsers.ClientID%> tr[id]').mouseover(function() {
                    $(this).css({ cursor: "hand", cursor: "pointer" });
                });

                });

            </script> 
```

在这些脚本中，他们获取所选行的“id”属性并将其保存到*hdnEmailID* ...

```
<INPUT id="hdnEmailID" type="hidden" value="0" runat="server" > 
```

为了使值*hdnEmailID*显示在页面中，我在按钮单击事件中编写了一个代码，该事件具有这样的代码..

```
Response.write(hdnEmailID.value); 
```

起初它工作得很好，并显示了我单击的行的“id”，但是在我在主内容页面中使用此代码后，脚本返回*0*。似乎当我单击按钮时.. 母版页已重新加载，并且脚本似乎也在重新加载，因此返回默认值*0* 我不确定这是否真的发生了，因为我是 ASP.NET 的初学者 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:37:09.633

是因为你没有使用渲染的id，错误就在这段代码上：

```
 var RowID = $('#hdnEmailID').val(); 
```

和

```
 $('#hdnEmailID').val($(this).attr("id")); 
```

它应该是

```
 var RowID = $('#<%=hdnEmailID.ClientID%>').val(); 
```

和

```
 $('#<%=hdnEmailID.ClientID%>').val($(this).attr("id")); 
```

控件呈现的 id 不是您在后面的代码中看到的，当您在单个页面上使用它时有时是相同的，但是当您将它添加到 master 时会动态更改，现在在您的 html 呈现的代码上您需要呈现该动态 id。

在 asp.net ver 4 中有一个关于控件的参数，您可以使用它来使它们成为[静态而不更改](http://msdn.microsoft.com/en-us/library/system.web.ui.clientidmode.aspx)`ClientIDMode ="Static"`

类似：
[如果 ASP.NET 破坏了它的 ID，我如何从 javascript 访问 DIV？](https://stackoverflow.com/questions/3048201/how-do-i-access-a-div-from-javascript-if-asp-net-mangles-its-id)
[在 ASP.NET 中访问控件客户端名称而不是 ID](https://stackoverflow.com/questions/5763557/accessing-control-client-name-and-not-id-in-asp-net/5763632)
[从外部 javascript 文件获取用户控件中的 clientid](https://stackoverflow.com/questions/2500001/get-clientid-in-user-control-from-external-javascript-file/2500323)
[如何使用 JavaScript 查找和修改 asp.net 控件？](https://stackoverflow.com/questions/6412632/how-to-find-and-modify-an-asp-net-control-with-javascript/6412731)

# git - 如何将更改提交到 bitbucket 中的主存储库？

> ID：13834106
> 
> 赞同：1
> 
> 时间：2012-12-12T06:32:30.817
> 
> 标签：git, bitbucket

我看过一个我可以私人访问的 bitbucket Repos。我分叉（或克隆存储库并获得对代码的访问权限）。

在我自己的副本中，我进行了更改。后来我删除了我自己的副本（我会把它发布到主目录）。

我已经将更改提交到我自己的目录。现在的问题是我如何将更改提交到主存储库。

现在，当我右键单击 git commit -> Master 时，它没有显示任何文件。我已经看到主存储库中的文件与旧文件相同，并且我没有进行任何更改。

现在有人帮助我，然后我如何将更改提交给其他人的主存储库。我已经在服务器上删除了我的存储库，所以我不知道主存储库如何进行我的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:38:18.177

如果您的本地克隆指的是您的 BitBucket 分叉（您刚刚删除），您可以更改名为“origin”的远程地址以将其指向您的主要 BitBucket 存储库。

```
git remote set-url origin git@bitbucket.org:myusername/myrepo.git
# or (https address)
git remote set-url origin https://bitbucket.org/myusername/myrepo 
```

（另请参阅，对于 https 地址，[有没有办法让 Bitbucket 在每次进行远程 Mercurial 操作时都不询问我的密码？](https://stackoverflow.com/questions/3933693/is-there-a-way-to-not-have-bitbucket-ask-for-my-password-every-time-when-doing-r)）

有关更多信息，请参阅[更改远程 Git 存储库的 URI (URL)](https://stackoverflow.com/questions/2432764/how-to-change-a-remote-repository-uri-using-git)

然后你可以推送到原点，这意味着这一次是你的第一个私人 BitBucket 存储库。

* * *

[OP](https://stackoverflow.com/users/1814971/user1814971) [评论](https://stackoverflow.com/questions/13834106/how-i-can-submit-changes-to-the-master-repos-in-bitbucket/13834175#comment19042423_13834175)：_

> 我再次检查所有设置，发现我使用了与主仓库相关的位置。
> 
> 我已经尝试了`Git > sync > push`所有更改，并且工作正常

# android - 从android中的套接字输入流中读取错误的字节数

> ID：13834109
> 
> 赞同：1
> 
> 时间：2012-12-12T06:32:32.410
> 
> 标签：android, sockets

我编写了以下代码来读取 Android 应用程序通过套接字接收的一些数据（特别是文件）：

```
 DataInputStream inputStream = new DataInputStream(socket.getInputStream());
    byte[] buffX = new byte[30054];
    int k = inputStream.read(buffX,0,30054); 
```

我知道我从用 C 编写的代码发送的数据是一个 30054 字节的文件。

问题是变量 k 小于 2000，即它没有读取发送的所有文件或文件的某些部分被丢弃。我已经检查过接收器缓冲区的大小（在 Android 应用程序中）是否超过 80kB。

我用大小为 1662 字节的文件测试了相同的代码，正如我所料，变量 k 等于 1662 字节。

我究竟做错了什么？我错过了什么？我需要关闭套接字吗？这是我在关闭应用程序时喜欢做的事情，而不是在我显示的代码期间。

安卓应用程序代码：

```
 @SuppressLint("HandlerLeak")
    public class DisplayNewActivity extends Activity {
        ...
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.mainnewact);
            mHandler = new Handler() { // used to show the number of bytes that were read
                @Override
                public void handleMessage(Message msg) {
                    int d2 = (Integer)msg.obj;
                    commentS.setText(Integer.toString(d2));
                }
            }
            ...
            cThread = new Thread(new ClientThread()); // used to start socket connection 
            rThread = new Thread(new RcvThread()); // used to read incoming packages once the socket has been connected
            cThread.start();
        }

        public class ClientThread implements Runnable {
            public void run() {
                try {
                      ...
                      socket = new Socket(serverIpAddress, Integer.parseInt(serverPort));
                      rThread.start();
                      while (connected) { };
                      ...
                } catch (Exception e) { startActivity(intentback);}
            }
        }

        @SuppressLint("HandlerLeak")
        public class RcvThread implements Runnable {
            public void run() {
                while (connected) {
                    try {
                        DataInputStream inputStream = new DataInputStream(socket.getInputStream());
                        ByteArrayOutputStream baos = new ByteArrayOutputStream();
                        byte[] imBytes = new byte[31000];
                        int numRead = 0;
                        while ((numRead = inputStream.read(imBytes)) >= 0) {
                            baos.write(imBytes,0,numRead);
                        }
                        byte[] imageInBytes = baos.toByteArray();
                        int k = imageInBytes.length;
                        Message msg = new Message();
                        msg.obj = k;
                        mHandler.sendMessage(msg);
                    } catch (Exception e) {
                        Log.e("SocketConnectionv02Activity", "C: ErrorRCVD", e);
                    }
                }
            }
        }
    } 
```

C代码：

```
 ...
    #include <sys/sendfile.h>
    ...
    int main(int argc, char *argv[]){
        int sockfd, newsockfd, portno;
        socklen_t clilen;
        struct sockaddr_in serv_addr, cli_addr;
        int fdfile;
        struct stat stat_buf;
        off_t offset = 0;
        int img2send = 1;
        char buffer[256];
        int closeSocket = 0;
        sockfd = socket(AF_INET, SOCK_STREAM, 0);
        if (sockfd < 0) {error("ERROR opening socket"); exit(1);}
        bzero((char *) &serv_addr, sizeof(serv_addr));
        portno = 55000;
        serv_addr.sin_family = AF_INET;
        serv_addr.sin_addr.s_addr = INADDR_ANY;
        serv_addr.sin_port = htons(portno);
        if (bind(sockfd, (struct sockaddr *) &serv_addr, sizeof(serv_addr)) < 0) { 
            error("ERROR on binding");
            close(sockfd);
            exit(1);
        }
        listen(sockfd,1);
        clilen = sizeof(cli_addr);
        newsockfd = accept(sockfd, (struct sockaddr *) &cli_addr, &clilen);
        if (newsockfd < 0) {
            error("ERROR on accept");
            close(sockfd);
            exit(1);
        }
        while (closeSocket == 0) {
            if (img2send == 1) { // interchange the file that is sent through the socket
                 fdfile = open("/home/gachr/Desktop/CamaraTest/fig1bmp.bmp", O_RDONLY); 
                 img2send = 2;
            } else {
                 fdfile = open("/home/gachr/Desktop/CamaraTest/fig2bmp.bmp", O_RDONLY);
                 img2send = 1;
            }
            if (fdfile == -1) {
                 close(sockfd); 
                 close(newsockfd);
                 exit(1);
            } else {
                 fstat(fdfile, &stat_buf);
                 offset = 0;
                 n = sendfile(newsockfd, fdfile, &offset, stat_buf.st_size);
                 if (n == stat_buf.st_size) { printf("Complete transfering file\n"); }
                 close(fdfile);
            }
            sleep(5);
            bzero(buffer,256);
            n = recv(newsockfd,buffer,1,MSG_DONTWAIT); // to close the socket from the Android app, which is working
            if (n > 0) {
                  if (buffer[0] == 48){ closeSocket = 1;}
            }
        }
        close(newsockfd);
        close(sockfd);
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:41:01.963

当你不在那里时很难说:)
但我会做以下事情：

1.  一次读取逐渐减少的字节，并从这些较小的块中构建完整的字节数组
2.  调试这些行并准确查看“错误”何时出现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T07:31:24.003

read 方法不会读取完整的流。它只读取流缓冲区中当前可用的字节。

要从流中读取完整数据，您可以使用该[`readFully()`方法](http://developer.android.com/reference/java/io/DataInputStream.html#readFully%28byte%5B%5D%29)或使用以下代码从流中读取完整数据：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
byte[] bytes = new byte[8192];

int numRead = 0;
while ((numRead = inputStream.read(bytes)) >= 0) {
    baos.write(bytes,0,numRead);
}

byte[] fileData = baos.toByteArray(); 
```

# html - 自定义 HTML 模块 - 不支持 joomla 3.0

> ID：13834110
> 
> 赞同：4
> 
> 时间：2012-12-12T06:32:33.067
> 
> 标签：html, joomla, module

我正在使用 joomla 的高级版本，但在使用自定义 html 模块或使用 HTML 文章时遇到问题。HTML 中的所有属性都被 / 和 "

这是发生的事情： 0\. 首先，所有图像都按照安装正常显示。

1.  复制默认模块“Image Module”，新名称为“Image Module Me”

2.  设置菜单，使原始模块显示在默认菜单中，新模块显示在我的测试菜单中

3.  沿线某处，默认图像模块和我的副本的图像停止正确显示（显示损坏的图像链接）。

4.  当我查看图像模块时，我可以看到 html 已更改。

5.  通过重新插入图像来重置 html，这会生成以下 html：

    img src="图像/标题/walden-pond.jpg"

    *   请注意，此时图像在管理编辑器中显示得很好
6.  保存模块

7.  单击自定义输出 - 瞧，我的图像链接已损坏。当我查看 html 时，我可以看到以下内容：

    img src="\"图像/标题/walden-pond.jpg\""

**编辑1：**

这仅仅是因为 Magic_quotes。如何在 joomla 3.0 中禁用魔术引号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:01:52.950

要禁用魔术引号，您必须编辑服务器中的 php.ini 文件。老实说，我很惊讶您甚至可以安装 Joomla 3.0 作为 Joomla 3.0 的要求，即禁用魔术引号。如果您可以编辑 php.ini 文件，则必须添加：

```
; Magic quotes
;

; Magic quotes for incoming GET/POST/Cookie data.
magic_quotes_gpc = Off

; Magic quotes for runtime-generated data, e.g. data from SQL, from exec(), etc.
magic_quotes_runtime = Off

; Use Sybase-style magic quotes (escape ' with '' instead of \').
magic_quotes_sybase = Off 
```

您可能需要联系您的房东来执行此操作。在不得已的情况下（并且仅在不得已的情况下）编辑您的 .htaccess 文件，其内容如下：

```
php_flag magic_quotes_gpc Off 
```

等等

# hadoop - 我们可以让 MapReduce 程序读取数据的不同方法是什么？

> ID：13834113
> 
> 赞同：0
> 
> 时间：2012-12-12T06:32:37.967
> 
> 标签：hadoop, mapreduce, elastic-map-reduce

实际上，我想对 CSV 文件执行计算，并且对于该 CSV 文件的每一行，我还想使用前四行进行计算。我怎样才能做到这一点？我读过的几乎所有 MapReduce 示例，数据的唯一读取方式是一次读取一行，甚至不同行上的计算也是相互独立的。任何资源和好的指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:19:56.720

你这样做的方式是覆盖`InputFormat`and `RecordReader`。

您可以在网上搜索 MultipleLineTextRecordReader.java MultipleLineTextInputFormat.java WholeFileTextInputFormat.java 以开始使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:39:25.237

拆分记录的方式取决于所使用的 RecordReader。默认*RecordReader*是 *LineRecordReader*，因此您的记录实际上是行。如果您希望数据以 4 行为一组，请尝试实现您自己的 RecordReader，它将数据分成 4 行一组。

[http://developer.yahoo.com/hadoop/tutorial/module4.html](http://developer.yahoo.com/hadoop/tutorial/module4.html)

# ajax - Django：ajax 和请求

> ID：13834120
> 
> 赞同：2
> 
> 时间：2012-12-12T06:33:36.577
> 
> 标签：ajax, django, python-2.7

我英语说得不好？但我在 Django 中有问题。我有模型：

```
class Model1(models.Model):
    model2 = models.ManyToManyField(Model2)
    #...
class Model2(models.Model):
    model3 = models.ForeignKey(Model3)
    #...
class Model3(models.Model):
    custom = models.CharField() 
```

有看法

```
def simple(request, simple_id):
    if request.method == 'POST':
        if request.is_ajax():
            if 'delete' in request.POST:
                id3 = request.POST.get('delete', '')
                Model1.objects.get(id = simple_id).model2.filter(model3__id = id3).delete() 
```

也就是说，当提交一个 name = "delete" 的表单时，Ajax 已经删除了属于 Model2 且字段 "model3" 具有相同值的所有对象。这是一个模板：

```
<form action="" method="post" id="simple">{% csrf_token %}
<input type="submit" name="delete" id="simple_delete" value="">
</form> 
```

从js传递的值：

```
$('.deletebutton').click(function(){
    id = $(this).attr('data-id');
    $('#simple_delete').attr('value', id);
    $('#simple').ajaxForm();
    $('#simple_delete').click();
}); 
```

嗯，分别插件 jquery.form.js 也连接了

问题是这样的 - 如果没有 ajax 的提交都是正常的，它可以工作......如果使用 Ajax 是一个错误，例如不正确的 int 值......如何使其通过 Ajax 工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:35:01.053

尝试这个

```
$('.deletebutton').click(function(){
     id = $(this).attr('data-id');
     $.ajax(function(){
         type:"POST",
         url :"/your_url/",
         data:{
              'id'=id,
         }
    }).done(function(result){
         alert('your json object result render by view :'+result)
    }) 
```

我认为它有效，我不明白你在做什么，即 $('#simple_delete').click(); 你能描述一下吗

# 在视野中

```
obj = Model1.objects.get(id = simple_id)
model2.objects.filter(model3__id = id3).delete() 
```

我只是将单行查询分成两行，如果不工作使用 .select_related()

# ios - 如何获取 UIBarButtonItem UIViewController？

> ID：13834123
> 
> 赞同：1
> 
> 时间：2012-12-12T06:34:02.863
> 
> 标签：ios, ios5

我有一个参考`UIViewController`。从该参考中，我想获取对所有导航栏和栏按钮项目的参考，并在它们上应用自定义样式。

我如何在 iOS 5 上实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:17:55.363

你可以做这样的事情。

```
[backbutton setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                   [UIColor blackColor],UITextAttributeTextColor,[UIFont fontWithName:TEXTFONT size:16.0f],UITextAttributeFont,
                                                   nil] forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:48:27.267

假设您的视图控制器有一个导航控制器，您应该能够使用以下代码访问导航栏及其项目：

```
UINavigationBar *navBar = [myViewController.navigationController.navigationBar];
NSArray *navBarItems = navBar.items; 
```

# olap-cube - 将与 Visual 2012 Sql Server db 集成的 olap 工具

> ID：13834128
> 
> 赞同：1
> 
> 时间：2012-12-12T06:34:27.403
> 
> 标签：olap-cube

我需要知道我应该为我的 olap 使用哪个工具。我在 sql visual 2012 中有一个数据仓库，现在我需要集成一个 olap 第三方工具。有人可以帮忙吗？该工具以立方体和可视化表示形式表示数据。

# installation - 在 WiX 中，我如何测试安装的版本是否至少是特定版本？

> ID：13834129
> 
> 赞同：1
> 
> 时间：2012-12-12T06:34:31.317
> 
> 标签：installation, wix, bundle, burn, wix3.6

我正在构建一个[WiX 捆绑包](http://wixtoolset.org/documentation/manual/v3/bundle/)。我需要链接一个可执行包（实际上是[ASCOM](http://en.wikipedia.org/wiki/ASCOM_%28standard%29) Platform 6 SP1）。检测条件是存在某个注册表项，并且包含大于某个最低要求版本的版本号。如果不满足这些条件，则不满足先决条件，需要下载并安装 EXE 文件包。

我编写的片段如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<?include $(sys.CURRENTDIR)\Config.wxi?>

<!-- Define a prerequisite for ASCOM Platform 6 SP1 -->

<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">
    <Fragment>
        <util:RegistrySearch Id="FindAscom6Installed"
                             Variable="AscomPlatform6Installed"
                             Root="HKLM"
                             Key="SOFTWARE\ASCOM\Platform"
                             Value="Platform Build"
                             Result="exists"
                             Win64="$(var.Win64)"
                             />
        <util:RegistrySearch Id="FindAscom6Build"
                             Variable="AscomPlatformBuild"
                             Root="HKLM"
                             Key="SOFTWARE\ASCOM\Platform"
                             Value="Platform Build"
                             Result="value"
                             Win64="$(var.Win64)"
                             />
        <PackageGroup Id="AscomPlatform6Sp1">
            <!-- If necessary, install ASCOM Platform version 6, do not uninstall
                 it during driver uninstall. -->

            <!-- DetectCondition="AscomPlatformInstalled AND AscomPlatformBuild >= 6.0.10028.2207" -->
            <ExePackage
               SourceFile="ASCOMPlatform6SP1.exe"
               DetectCondition="AscomPlatform6Installed AND AscomPlatformBuild >= 6.0.10028.2207"
               DownloadUrl="http://download.ascom-standards.org/ASCOMPlatform6SP1.exe"
               PerMachine="yes"
               Permanent="yes"
               Vital="yes" />
        </PackageGroup>
    </Fragment>
</Wix> 
```

这可以编译，但是当安装程序运行时，它会失败。这是日志输出：

```
[0E54:141C][2012-12-12T06:37:38]i001: Burn v3.7.1204.0, Windows v6.2 (Build 9200: Service Pack 0), path: C:\Users\Tim\Documents\visual studio 2012\Projects\Wix.BurnTutorial\Wix.BurnTutorial\bin\Debug\Wix.BurnTutorial.exe, cmdline: ''
[0E54:141C][2012-12-12T06:37:38]i000: Setting string variable 'WixBundleLog' to value 'C:\Users\Tim\AppData\Local\Temp\Wix.BurnTutorial_20121212063738.log'
[0E54:141C][2012-12-12T06:37:38]i000: Setting string variable 'WixBundleOriginalSource' to value 'C:\Users\Tim\Documents\visual studio 2012\Projects\Wix.BurnTutorial\Wix.BurnTutorial\bin\Debug\Wix.BurnTutorial.exe'
[0E54:141C][2012-12-12T06:37:38]i000: Setting string variable 'WixBundleName' to value 'Wix.BurnTutorial'
[0E54:141C][2012-12-12T06:37:39]i100: Detect begin, 2 packages
[0E54:141C][2012-12-12T06:37:39]i000: Registry key not found. Key = 'SOFTWARE\ASCOM\Platform'
[0E54:141C][2012-12-12T06:37:39]i000: Registry key not found. Key = 'SOFTWARE\ASCOM\Platform'
[0E54:141C][2012-12-12T06:37:39]i000: Setting numeric variable 'AscomPlatform6Installed' to value 0
[0E54:141C][2012-12-12T06:37:39]e000: Error 0x8007000d: Failed to parse condition "AscomPlatform6Installed AND AscomPlatformBuild >= 6.0.10028.2207". Unexpected character at position 51.
[0E54:141C][2012-12-12T06:37:39]e000: Error 0x8007000d: Failed to read next symbol.
[0E54:141C][2012-12-12T06:37:39]e000: Error 0x8007000d: Failed to parse value.
[0E54:141C][2012-12-12T06:37:39]e000: Error 0x8007000d: Failed to parse term.
[0E54:141C][2012-12-12T06:37:39]e000: Error 0x8007000d: Failed to parse boolean-factor.
[0E54:141C][2012-12-12T06:37:39]e000: Error 0x8007000d: Failed to parse boolean-term.
[0E54:141C][2012-12-12T06:37:39]e000: Error 0x8007000d: Failed to parse boolean-term.
[0E54:141C][2012-12-12T06:37:39]e000: Error 0x8007000d: Failed to parse expression.
[0E54:141C][2012-12-12T06:37:39]e051: Error 0\. Failed to parse condition AscomPlatform6Installed AND AscomPlatformBuild >= 6.0.10028.2207\. Unexpected symbol at position (null)
[0E54:141C][2012-12-12T06:37:39]e000: Error 0x8007000d: Failed to evaluate executable package detect condition.
[0E54:141C][2012-12-12T06:37:39]e151: Detect failed for package: ASCOMPlatform6SP1.exe, error: 0x8007000d
[0E54:141C][2012-12-12T06:37:39]i101: Detected package: ASCOMPlatform6SP1.exe, state: Unknown, cached: None
[0E54:141C][2012-12-12T06:37:39]i101: Detected package: TargetPackage, state: Absent, cached: None
[0E54:141C][2012-12-12T06:37:39]i199: Detect complete, result: 0x8007000d 
```

我怀疑问题可能是，因为密钥不存在，所以*AscomPlatform6Build*为空，WiX 不喜欢。

如何正确构建此检测条件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T21:30:46.963

您应该能够根据第一个条件向第二个 RegistrySearch 添加条件。如果您也为 分配了一个基值`AscomPlatformBuild`，则它不会被报告为 null。

```
<Variable Name="AscomPlatformBuild" Type="numeric" Value="1.0.0" />
...
<util:RegistrySearch Id="FindAscom6Build"
                     Variable="AscomPlatformBuild"
                     Root="HKLM"
                     Key="SOFTWARE\ASCOM\Platform"
                     Value="Platform Build"
                     Result="value"
                     Win64="$(var.Win64)"
                     Condition="AscomPlatform6Installed" /> 
```

ExePackage 可以单独使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-14T07:07:08.840

面临同样的问题。通过在条件中的版本常量之前添加**v**来解决它。即 v6.0.10028.2207

```
<ExePackage
               SourceFile="ASCOMPlatform6SP1.exe"
               DetectCondition="AscomPlatform6Installed AND AscomPlatformBuild >= v6.0.10028.2207"
               DownloadUrl="http://download.ascom-standards.org/ASCOMPlatform6SP1.exe"
               PerMachine="yes"
               Permanent="yes"
               Vital="yes" /> 
```

# android - Android，为什么没有运行 TimePicker 回调？

> ID：13834130
> 
> 赞同：0
> 
> 时间：2012-12-12T06:34:32.833
> 
> 标签：android, timepicker

在我的活动中，我有一个时间选择器。我实现了回调，如下所示，但没有日志显示它们都没有被调用。无论设置`tpTimer.setFocusable()`为`True`or `False`，它们都没有调用。

任何建议将不胜感激。

```
TimePicker tpTimer = (TimePicker) findViewById(R.id.timePicker);
        tpTimer.setIs24HourView(true);
        tpTimer.setCurrentHour(0);
        tpTimer.setCurrentMinute(0);
        tpTimer.setFocusable(false); // or True
        tpTimer.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Log.i(TAG, "%1");
            }
        });
        tpTimer.setOnFocusChangeListener(new OnFocusChangeListener() {          
            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                Log.i(TAG, "%2");           
            }
        });
        tpTimer.setOnLongClickListener(new OnLongClickListener() {          
            @Override
            public boolean onLongClick(View v) {
                Log.i(TAG, "%3");
                return false;
            }
        });
        tpTimer.setOnTouchListener(new OnTouchListener() {          
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                Log.i(TAG, "%4");
                return false;
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:31:40.147

如果您提及视图，则会调用这些方法，因此将所有事件侦听器代码更改为

```
tpTimer.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Log.i("Message", "Its Clicked");
            }
        }); 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:36:33.823

我有同样的问题。我的解决方法是使用**setOnTimeChangedListener**：

```
 tpTimer.setOnTimeChangedListener(new OnTimeChangedListener() {
        @Override
            public void onTimeChanged(TimePicker view, int hourOfDay, int minute) {
                //Do whatever you want here
            }
        }); 
```

希望它也对您有所帮助，我希望我们的国家（伊朗和以色列）之间能够实现和平。

# c# - 如何处理 SQL Server 的日期格式？

> ID：13834131
> 
> 赞同：1
> 
> 时间：2012-12-12T06:34:50.337
> 
> 标签：c#, sql, sql-server

我在 asp.net 4.0 中有 Web 应用程序，当我要获取我的记录时，我对“FromDate”使用日历控件，然后我的查询如下：

```
Select * 
From Sec_RoleFeatures
Where RoleId = 39 
  and FeatureCode = 'MR' 
  and FromDate='12/12/2012 11:05:05 AM' 
```

由于此``FromDate`字段日期格式与 sql 格式不匹配，因此结果是它没有给出记录`null`。

所以在这种情况下我该怎么办？如何将我的日期格式与 sql 日期格式匹配？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T06:45:54.353

根本不要在 SQL 中传递值。*对像这样的所有*值使用参数化 SQL 。好处：

*   SQL 更干净（没有代码和数据的混合）
*   避免 SQL 注入攻击（可能与这里无关，但绝对适用于字符串）
*   避免转换问题

从根本上说，尽可能避免字符串转换。不仅在数据库工作中，而且在一般情况下。`DateTime`尽可能长时间地将您的数据保持在“自然”类型（此处）。在这种情况下，您根本*不需要*将其转换为字符串（因为您可以使用参数），那么为什么要这样做呢？

[`SqlCommand.Parameters`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)有关如何在 SQL 中使用参数的示例，请参阅文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:37:07.497

使用反向 ISO 格式：yyyymmdd（所以 12/12/2012 是 20121212）并使用 24 小时格式作为时间。

```
Select * From Sec_RoleFeatures Where (RoleId = 39) and (FeatureCode = 'MR') and (FromDate = '20121212 11:05:05') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:39:49.100

尝试铸造：

```
Select * From Sec_RoleFeatures Where RoleId = 39 and FeatureCode = 'MR' and 
CAST(FromDate AS DATE) = CAST('12/12/2012 11:05:05 AM' AS DATE) 
```

这里的优点是，它只会比较忽略时间部分的日期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T06:40:47.570

尝试使用

```
Select * From Sec_RoleFeatures Where RoleId = 39 and FeatureCode = 'MR' and  CONVERT(varchar(10),FromDate,101)='12/12/2012' 
```

# ms-word - 如何检查一个表是否与 Word 中已有的表重叠

> ID：13834133
> 
> 赞同：1
> 
> 时间：2012-12-12T06:34:58.233
> 
> 标签：ms-word, overlapping

谁能告诉如何知道一个表在插入时与另一个表（现有表）重叠。

假设我已经插入了 Table1 并且在插入 Table2 时，它与 table1 重叠，但是在插入 Table2 后代码明智，有没有办法检查 Table2 在 Table1 上是否重叠/覆盖？

# maven - 创建本地 Maven 存储库

> ID：13834141
> 
> 赞同：59
> 
> 时间：2012-12-12T06:35:26.563
> 
> 标签：maven, maven-2, mvn-repo

我想创建本地 Maven 存储库。我做了以下步骤：

1.  在eclipse中安装maven插件
2.  在 apache 服务器中创建了一个文件夹 localrepository，可使用 http://<my-domain>/localrepository 访问
3.  在我提供的项目 pom.xml 中

    ```
    <repositories>
        <repository>
            <id>repository</id>
            <url>http://<my-domain>/localMavenRepository</url>
        </repository>
    </repositories> 
    ```

但它没有解析 http://<my-domain>/localMavenRepository 上的 jars

是否需要提供存储库？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2015-03-25T16:41:58.087

使用具有默认配置的 Web 服务器设置一个简单的存储库。关键是目录结构。文档没有明确提到它，但它与本地存储库的结构相同。

> 要建立一个内部存储库，只需要您有一个放置它的地方，然后使用与远程存储库（如 repo.maven.apache.org）中相同的布局开始复制所需的工件。[资源](https://maven.apache.org/guides/introduction/introduction-to-repositories.html#Setting_up_the_Internal_Repository)

像这样将文件添加到您的存储库：

```
mvn install:install-file \
  -Dfile=YOUR_JAR.jar -DgroupId=YOUR_GROUP_ID 
  -DartifactId=YOUR_ARTIFACT_ID -Dversion=YOUR_VERSION \
  -Dpackaging=jar \
  -DlocalRepositoryPath=/var/www/html/mavenRepository 
```

如果您的域是`example.com`并且 Web 服务器的根目录位于`/var/www/html/`，则 maven 可以找到“YOUR_JAR.jar”（如果配置了 .jar）`<url>http://example.com/mavenRepository</url>`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-11-05T16:15:27.643

是的你可以！对于仅发布/检索工件的简单存储库，您可以使用 nginx。

1.  确保[nginx 启用了 http dav 模块](https://stackoverflow.com/a/16915721/2692914)，它应该，但仍然要验证它。

2.  [配置 nginx http dav 模块](http://nginx.org/en/docs/http/ngx_http_dav_module.html)：

    在 Windows 中：**d:\servers\nginx\nginx.conf**

    ```
    location / {
        # maven repository
        dav_methods  PUT DELETE MKCOL COPY MOVE;
        create_full_put_path  on;
        dav_access  user:rw group:rw all:r;
    } 
    ```

    在 Linux (Ubuntu) 中：**/etc/nginx/sites-available/default**

    ```
    location / {
            # First attempt to serve request as file, then
            # as directory, then fall back to displaying a 404.
            # try_files $uri $uri/ =404;  # IMPORTANT comment this
            dav_methods  PUT DELETE MKCOL COPY MOVE;
            create_full_put_path  on;
            dav_access  user:rw group:rw all:r;
    } 
    ```

    不要忘记授予 repo 所在目录的权限：

    `sudo chmod +777 /var/www/html/repository`

3.  在您的项目中`pom.xml`添加相应的配置：

    **检索工件：**

    ```
    <repositories>
        <repository>
            <id>repository</id>
            <url>http://<your.ip.or.hostname>/repository</url>
        </repository>
    </repositories> 
    ```

    **发布工件：**

    ```
    <build>
        <extensions>
            <extension>
                <groupId>org.apache.maven.wagon</groupId>
                <artifactId>wagon-http</artifactId>
                <version>3.2.0</version>
            </extension>
        </extensions>
    </build>
    <distributionManagement>
        <repository>
            <id>repository</id>
            <url>http://<your.ip.or.hostname>/repository</url>
        </repository>
    </distributionManagement> 
    ```

4.  要发布工件，请使用`mvn deploy`. 要检索工件，maven 会自动完成。

那里有一个简单的 maven repo。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-29T05:46:14.807

如果 maven 没有创建**本地存储库**，即 .m2/repository 文件夹，请尝试以下步骤。

在您的 Eclipse\Spring Tool Suite 中，转到 Window->preferences-> maven->user settings-> 单击 Restore Defaults-> Apply->Apply 并关闭

# jquery - 在不使用 rowTemplate 的情况下将图像添加到网格

> ID：13834142
> 
> 赞同：2
> 
> 时间：2012-12-12T06:35:30.930
> 
> 标签：jquery, kendo-ui

```
columns: [{ title: 'Attain', field: 'Attain', width: '4%', template: '<img src="<#= Images/green.png  #>" />', sortable: true },] 
```

我已经在列中编写了这行代码用于添加图像。我将 green.png 文件放在图像文件夹中，并将绿色、红色、黄色字符串名称存储在数据库 Attain 列中......现在我想检查 dbstringvalue 是否为 grren我想显示绿色图像（如果像红色，红色图像）..我应该在哪里写条件代码..这可以设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:35:47.003

剑道模板可能包含条件逻辑。这是一个例子：

```
columns: [{
  field: "Attain",
  template: "# if (Attain == 'red' ) { # <img src='red.gif' /> # } else # { <img src='green.gif' #}#
}] 
```

有关 Kendo 模板的更多信息可以在[文档](http://docs.kendoui.com/getting-started/framework/templates/overview)中找到。

# sql - 如果连续时间戳相同 10 分钟，则对时间间隔求和

> ID：13834147
> 
> 赞同：0
> 
> 时间：2012-12-12T06:35:47.310
> 
> 标签：sql, sql-server, isqlquery

我正在使用以下查询来查找列的空值，并使用以下查询获取空值的开始时间和结束时间约 30,000 行

```
 SELECT
    yt1.[timestamp] AS StartTime,
    MIN(yt2.[timestamp]) AS EndTime,
    DATEDIFF(MINUTE, yt1.[timestamp], MIN(yt2.[timestamp])) AS DifferenceInMinutes
    FROM
    Sheet1$ yt1
    LEFT JOIN Sheet1$ yt2 ON yt1.[timestamp] < yt2.[timestamp]
    WHERE
    yt1.TWSPD IS NULL
    GROUP BY yt1.[timestamp] 
```

输出是

```
Start time                     Endtime                DifferenceInMinutes
2012-05-18 20:47:03.000    2012-05-18 20:57:04.000      10
2012-05-18 20:57:04.000    2012-05-18 21:07:04.000      10
2012-05-21 18:25:26.000    2012-05-21 18:35:26.000      10
2012-06-07 17:36:28.000    2012-06-07 17:46:28.000      10
2012-06-07 17:46:28.000    2012-06-07 17:56:28.000      10
2012-06-07 17:56:28.000    2012-06-07 18:06:28.000      10 
```

例如，现在我需要输出为（删除了一些行以更好地显示）

```
Start time                     Endtime                DifferenceInMinutes
2012-05-18 20:47:03.000    2012-05-18 21:07:04.000      20
2012-05-21 18:25:26.000    2012-05-21 18:35:26.000      10
2012-06-07 17:36:28.000    2012-06-07 18:06:28.000      30 
```

时间戳为每 10 分钟一次，如果要添加连续 10 分钟时间间隔的空值，则开始时间和结束时间应显示为从连续时间戳的第一个空值到最后一个空值。希望问题很清楚。如果我不清楚，请告诉我。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:08:23.333

```
 SELECT
    yt1.[timestamp] AS StartTime,
    MIN(yt2.[timestamp]) AS EndTime,
    DATEDIFF(MINUTE, yt1.[timestamp], MIN(yt2.[timestamp])) AS DifferenceInMinutes
    into #tmp1
    FROM
    Sheet1$ yt1
    LEFT JOIN Sheet1$ yt2 ON yt1.[timestamp] < yt2.[timestamp]
    WHERE
    yt1.TWSPD IS NULL
    GROUP BY yt1.[timestamp]

Select t1.* 
into #tmp2
from #tmp1 t1
left join #tmp1 t2 on t1.Starttime=t2.Endtime
where t2.Endtime is null

Declare @rcn int
Select @rcn=1
While @rcn>0
    begin
       Update #tmp2 set #tmp2.Endtime=t.endTime,#tmp2.DifferenceInMinutes=#tmp2.DifferenceInMinutes+t.DifferenceInMinutes
       from #tmp1 t
       where t.Starttime=#tmp2.Endtime
       select @rcn=@@Rowcount
    end

select * from #tmp2

Drop Table #tmp1
Drop Table #tmp2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:09:52.257

如果您想查询原始表以具有分组输出 - 您可以这样做：

```
;with
CTE_start
as
(
    select T.timestamp, row_number() over(order by T.timestamp) as RowNum
    from temp1 as T
    where
        not exists 
        (
            select * 
            from temp1 as TT
            where TT.timestamp < T.timestamp and TT.timestamp >= dateadd(mi, -11, T.timestamp)
        )  
),
CTE_end
as
(
    select T.timestamp, row_number() over(order by T.timestamp) as RowNum
    from temp1 as T
    where
        not exists 
        (
            select * 
            from temp1 as TT
            where TT.timestamp > T.timestamp and TT.timestamp <= dateadd(mi, 11, T.timestamp)
        )  
)
select
    s.timestamp as [Start time],
    e.timestamp as [End time],
    datediff(mi, s.timestamp, e.timestamp) as [DifferenceInMinutes]
from CTE_start as s
    inner join CTE_end as e on e.RowNum = s.RowNum 
```

[**SQL 提琴示例**](http://sqlfiddle.com/#!3/dd81a/23)

另一个不错的，但是您必须将数据复制到临时（变量）表中

```
declare @tmp table (timestamp datetime, RowNum int primary key)

insert into @tmp
select T.timestamp, row_number() over(order by T.timestamp) as RowNum
from temp1 as T

;with CTE
as
(
    select T.timestamp, T.RowNum, 1 as GroupNum
    from @tmp as T
    where RowNum = 1
    union all
    select
        T.timestamp, T.RowNum,
        C.GroupNum + case when datediff(mi, C.timestamp, T.timestamp) >= 11 then 1 else 0 end
    from @tmp as T
        inner join CTE as C on C.RowNum + 1 = T.RowNum
)
select
    min(C.timestamp) as [Start time],
    max(C.timestamp) as [End time],
    datediff(mi, min(C.timestamp), max(C.timestamp)) as [DifferenceInMinutes]
from CTE as C
group by C.GroupNum 
```

[**SQL 提琴示例**](http://sqlfiddle.com/#!3/dd81a/28)

# javascript - 使用 javascript 在 div 之间导航

> ID：13834151
> 
> 赞同：-2
> 
> 时间：2012-12-12T06:36:10.467
> 
> 标签：javascript, jquery, html

在我的 asp.net mvc 应用程序中，我有一个模态弹出窗口。在模态弹出窗口中，我显示了三个 div，如 tabs。每个 div 都有按钮“下一步”，“返回”。单击这些按钮时，我想在这些 div 之间导航

示例代码

```
<div id="Div1">

     <ul>
        <li><a id="btnone" href="#OneTab">one</a></li>
        <li><a id="btTwo" href="#TwoTab">Two</a></li>
        <li><a id="btnThree" href="#ThreeTab">Three</a></li>

     </ul>

<div id="OneTab>
<input id="btnNext Type="button/>
<input id="btnBack Type="button/>
</div>
<div id="TwoTab>
</div>
<div> 
```

请推荐 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:02:36.883

在按钮 $('#Div1').tabs("select", tabid) 的“Onclick”事件上使用以下代码行；这里 tabid 是您要导航的选项卡的 id 完成的代码更改如下

# c# - 如何使用指针调用非托管 dll 来填充 C# 中的结构

> ID：13834153
> 
> 赞同：1
> 
> 时间：2012-12-12T06:36:20.180
> 
> 标签：c#, c, dll, marshalling, unmanaged

我正在尝试使用 C# 使用非托管第 3 方 dll 中的函数从文件中获取数据。该函数将指向结构的指针作为输入，并返回操作成功的状态标志（未在下面的代码中使用）。第 3 方供应商在 C 中提供了以下代码以了解如何调用 dll 函数：

调用者.h

```
#pragma pack(1)
struct Event
{
    int event_type;
    double time_stamp;
    char event_text[200];
};

typedef enum Status (*_GetEventList)(struct Event* event_list);

_GetEventList GetEventList; 
```

调用者.c

```
int event_list_cnt;
struct Event* event_list;

hInstLibrary = LoadLibrary(lib_name);

GetEventList = (_DWGetEventList)GetProcAddress(hInstLibrary, "GetEventList);

printf("\nEVENTS:\n");
event_list_cnt = 2;
event_list = malloc(sizeof(struct Event) * event_list_cnt);
GetEventList(event_list);
for(i = 0; i < event_list_cnt; i++)
{
    printf("EVENT: type = %i, text = %s, position = %fsec \n", 
        event_list[i].event_type, event_list[i].event_text, 
        event_list[i].time_stamp);
}
free(event_list);

FreeLibrary(hInstLibrary) 
```

在示例文件上运行它的输出是：

活动：

事件：类型 = 1，文本 = 存储开始，位置 = 0.000000 秒

事件：类型 = 2，文本 = 存储停止，位置 = 110,825682 秒

换句话说，event_list 结构中的每个字段都是一个长度为 2 的数组。

在上面的代码中，我简化了供应商的示例代码，并省略了一些我认为与当前问题无关的内容。

这就是我尝试在 C# 中实现相同功能的方式：

```
[StructLayout(LayoutKind.Sequential, Pack = 1, CharSet=CharSet.Ansi)]
public struct Event
{
    [MarshalAs(UnmanagedType.ByValArray, ArraySubType = UnmanagedType.I4)]
    public int[] event_type;

    [MarshalAs(UnmanagedType.ByValArray, ArraySubType = UnmanagedType.R8)]
    public double[] time_stamp;

    [MarshalAs(UnmanagedType.ByValArray, ArraySubType = UnmanagedType.LPStr, SizeConst = 200)]
    public char[] event_text;
}

[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
private delegate Status GetEventList(IntPtr ptrToEventList);

public Event GetEventList()
{
    // this.pDll is a pointer to the dll library.
    IntPtr pAddressOfFunctionToCall = NativeMethods.GetProcAddress(this.pDll, "GetEventList");
    GetEventList getEventList = (GetEventList)Marshal.GetDelegateForFunctionPointer(pAddressOfFunctionToCall, typeof(GetEventList));

    int eventListCount;
    this.GetEventListCount(out eventListCount, out errorMessage);

    int mem = Marshal.SizeOf(typeof(Event));

    // The multiplication by two is because I already know that
    // the struct should be populated by two events.
    IntPtr structPtr = Marshal.AllocCoTaskMem(2 * mem);

    Event eventList;

    try
    {
        getEventList(structPtr);
        eventList = (Event)Marshal.PtrToStructure(structPtr , typeof(Event));
    }
    finally
    {
        Marshal.FreeHGlobal(structPtr);
    }

    return eventList;
} 
```

如果我在与上面的 C 代码相同的示例文件上运行它，则 eventList 中的 event_type 和 time_stamp 向量的长度为 1，而 event_text 的长度为 200。这些字段中的值将包含第一个事件的正确信息 - 那个event_type 1 - 由上面的 C 代码打印出来。eventList 中应该填充的内容当然是包含两个事件的长度为 2 的向量，但我在修改代码以执行此操作时没有成功。上面的代码是我设法编写的唯一一个在结构中填充任何内容的代码。我试图将 event_text 字段指定为字符串而不是字符，但这只会导致 AccessViolationException 错误，可能是因为我没有正确实现它。

任何人都可以帮我修复上面的代码，以便正确填充 eventList 吗？

谢谢！

/埃尔芬达尔

编辑：更新了 C# 代码，纠正了事件结构，并尝试在 C# 中分配 Event[]，然后再将其传递给非托管 dll：

```
[StructLayout(LayoutKind.Sequential, Pack = 1, CharSet=CharSet.Ansi)]
public struct Event
{
    [MarshalAs(UnmanagedType.I4)]
    public int event_type;

    [MarshalAs(UnmanagedType.R8)]
    public double time_stamp;

    [MarshalAs(UnmanagedType.ByValArray, ArraySubType = UnmanagedType.LPStr, SizeConst = 200)]
    public char[] event_text;
}

[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
private delegate Status GetEventList(ref Event[] eventList);

public Event[] GetEventList()
{
    // this.pDll is a pointer to the dll library.
    IntPtr pAddressOfFunctionToCall = NativeMethods.GetProcAddress(this.pDll, "GetEventList");
    GetEventList getEventList = (GetEventList)Marshal.GetDelegateForFunctionPointer(pAddressOfFunctionToCall, typeof(GetEventList));

    Event[] eventList = new Event[2];
    getEventList(ref eventList);

    return eventList;
} 
```

我不知道上面的代码在您的屏幕上看起来是否像在我的屏幕上一样糟糕（省略了缩进和空白新行），但我一直无法看起来更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:42:55.023

This is the code that finally did the trick:

```
[StructLayout(LayoutKind.Sequential, Pack = 1, CharSet=CharSet.Ansi)]
public struct Event
{
    [MarshalAs(UnmanagedType.I4)]
    public int event_type;

    [MarshalAs(UnmanagedType.R8)]
    public double time_stamp;

    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 200)]
    public string event_text;
}

[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
private delegate Status GetEventList([out]Event[] eventList);

public Event[] GetEventList()
{
    // this.pDll is a pointer to the dll library.
    IntPtr pAddressOfFunctionToCall = NativeMethods.GetProcAddress(this.pDll, "GetEventList");
    GetEventList getEventList = (GetEventList)Marshal.GetDelegateForFunctionPointer(pAddressOfFunctionToCall, typeof(GetEventList));

    Event[] eventList = new Event[2];
    getEventList(eventList);

    return eventList;
} 
```

A big thank you to leppie and Panos Rontogiannis who helped me figure it out!

# html - 使用 URL 向服务器发送数据

> ID：13834155
> 
> 赞同：0
> 
> 时间：2012-12-12T06:36:23.990
> 
> 标签：html, lamp

我正在寻找一种方法来解释服务器端 URL 中的数据。在客户端，我可以控制 URL 是什么，并且可以通过编程方式为 URL 生成数据，但我无法直接访问源代码。

所以最终，我正在尝试为离线游戏构建一个在线高分系统。

我可以访问 Azure 和我的专用 LAMP 服务器。我想让我的服务器等待使用类似“http://www.myappserver19002393859.com/HighScores?UserID=2fb44e3888?Score=25250”的 URL 的连接我想从 URL 获取用户 ID 和分数然后使用高分表重定向到另一个页面......

有什么建议么？

（编辑：我可以在服务器端做任何事情，这只是我有限制的客户端。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:22:15.800

使用 PHP 的`$_GET`集合。它包含 URI 查询字符串的键/值对。

在您给出的示例中，它看起来像这样：

### HighScoresHandler.php

```
<?php
$userId = $_GET['UserID'];
$score  = $_GET['Score'];

// Validation

if( empty( $userId ) || empty( $score ) ) {
    echo "No UserID or Score provided.";
    exit();
}
$score = intval( $score );
if( $score === 0 ) {
    echo "Invalid score specified.";
    exit();
}

// Verification

// TODO: Query your database to ensure the user specified by $userID exists.
// Make sure you do this safely as not to be subject to SQL injection.

$sql = "SELECT COUNT(*) FROM Users WHERE UserID = @userId";

// Action

$sql = "INSERT INTO HighScores ( UserID, Score ) VALUES ( @userId, @score )";

?> 
```

请注意，建议您实施某种形式的 MAC（消息身份验证代码）或其他一些系统来验证分数是否真实，否则没有什么可以阻止任何人使用伪造的 HTTP 请求提交虚假分数（这就是为什么您有时会看到疯狂的高分发布到在线记分牌上）。

# formula - 如何在c#中编写公式？

> ID：13834159
> 
> 赞同：1
> 
> 时间：2012-12-12T06:36:45.193
> 
> 标签：formula

如何写一个像

v_r (t)=∑_(n=0)^(N-1)▒〖A_r (L_2-L_1 ) e^j(ω_c t-4π/λ (R+υt+L_(1+L_2 )/2 cos ⁡〖(θ)sin⁡(ω_r t+2πn/N)))〗┤) sinc(4π/λ-L_(2-L_1 )/2 cos⁡(θ) sin⁡(ω_r t+2πn/N)) </p>

在 C# 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:44:06.300

您必须将公式转换为编译器识别的内容。

![公式](../Images/c6bd7083ef65c173f7f678ae13146e1b.png)

使用基本代数和 Math 类的组合是等价的，如下所示：

```
p = rho*R*T + (B_0*R*T-A_0-((C_0) / (T*T))+((E_0) / (Math.Pow(T, 4))))*rho*rho +
    (b*R*T-a-((d) / (T)))*Math.Pow(rho, 3) +
    alpha*(a+((d) / (t)))*Math.Pow(rho, 6) +
    ((c*Math.Pow(rho, 3)) / (T*T))*(1+gamma*rho*rho)*Math.Exp(-gamma*rho*rho); 
```

示例取自：[Converting Math Equations in C#](http://www.codeproject.com/Articles/30615/Converting-math-equations-to-C)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:45:03.657

好吧，首先你必须弄清楚所有这些符号的*含义。*我看到通常表示总和的 sigma，`∑_(n=0)^(N-1)`可能转换为：

```
 N-1
∑
 n=0 
```

`n`这通常意味着从`0`到变化的以下表达式的总和`N-1`。所以我认为你需要一个循环。

`π`在该循环中要计算的表达式由一系列涉及、和的三角函数组成，`θ`而我认为鲜为人知的是一个错字:-)`sin``cos``sinc`

最重要的是，您需要先*了解*当前表达式，然后才能考虑将其转换为另一种形式，例如 C# 程序。由于不知道它的来源或一点上下文，我们可能无法为您提供太多帮助，尽管我们总有可能在这里有一位专家/天才会从他们的脑海中认出这个公式。

# perl - Perl 中的合并哈希：特殊情况

> ID：13834161
> 
> 赞同：2
> 
> 时间：2012-12-12T06:37:01.340
> 
> 标签：perl, perl-data-structures

如何在 perl 中合并两个散列，其中键可以冲突并且值是数组。？如果发生碰撞，我想合并值数组。

正常合并会好吗？

如果这是重复，我很抱歉，但我尝试查找但没有出现这样的具体内容。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T06:48:49.437

要将 %hoa2 合并到 %hoa1：

```
for (keys(%hoa2)) {
   push @{ $hoa1{$_} }, @{ $hoa2{$_} };
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T06:58:10.160

这些散列的值是数组引用。

```
#!/usr/bin/perl -Tw

use strict;
use warnings;
use Data::Dumper;

# The array ref of the first hash will be clobbered by
# the value of the second.
{
    my %hash_a = ( a => [ 1, 2, 3 ] );
    my %hash_b = ( a => [ 4, 5, 6 ] );

    @hash_a{qw( a )} = @hash_b{qw( a )};

    print Dumper( \%hash_a );
}

#  To merge the values of the arrays you'd need to handle that like this.
{
    my %hash_a = ( a => [ 1, 2, 3 ] );
    my %hash_b = ( a => [ 4, 5, 6 ] );

    @{ $hash_a{a} } = ( @{ $hash_a{a} }, @{ $hash_b{a} } );

    print Dumper( \%hash_a );
} 
```

这个程序的输出是：

```
$VAR1 = {
          'a' => [
                   4,
                   5,
                   6
                 ]
        };
$VAR1 = {
          'a' => [
                   1,
                   2,
                   3,
                   4,
                   5,
                   6
                 ]
        }; 
```

希望有帮助。

# objective-c - 初始化空数组

> ID：13834164
> 
> 赞同：1
> 
> 时间：2012-12-12T06:37:11.163
> 
> 标签：objective-c

在 Objective-C 中，我需要初始化一个 nulls/nil 数组（不确定使用哪一个）。

我有这个代码：

```
 NSMutableArray * ObjectIndex = [[NSMutableArray alloc] initWithCapacity:maxObjectId];

    for ( int i = 0; i < maxObjectId; i++ )
    {
         [ObjectIndex setObject:nil atIndexedSubscript:i];
    } 
```

我收到一个错误，指出对象不能为零。

我计划使用这个数组将对象存储在某些索引中，而其他索引则为 nil(null?)

稍后在代码中：

```
for (Object * obj in objs)
{
    ObjectIndex[obj.ID] = obj;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T06:52:31.167

这就是`NSNull`目的。从文档中：

> NSNull 类定义了一个单例对象，用于表示集合对象中的空值（不允许空值）。

`[NSNull null]`所以你可以用代替填充你的数组`nil`：

```
for (int i = 0; i < maxObjectId; i++ )
{
     ObjectIndex[i] = [NSNull null];
} 
```

因为`[NSNull null]`是一个单例对象，你可以检查一个数组条目

```
if ([ObjectIndex[i] isEqual:[NSNull null]]) {
    // "empty"
} 
```

*注意：* Objective-C 实例变量的名称通常以小写字母开头，因此`objectIndex`是一个更好的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:56:26.493

与其使用稀疏数组，不如使用以数字为键的 NSMutableDictionary？这样您就不必担心使用空值进行预填充。

或者，如果您真的想使用数组，我建议使用 addObject: 或 insertObject:atIndex 进行初始化：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T07:02:57.907

简单的！你可以这样做

```
NSMutableArray * ObjectIndex = [[NSMutableArray alloc] initWithCapacity: maxObjectId];
for(int i=0 ; i< maxObjectId ; i++) {
    [ObjectIndex addObject:[NSNull null]];
} 
```

# batch-file - 如果第一个参数有逗号，则读取批处理文件中的第二个参数

> ID：13834169
> 
> 赞同：1
> 
> 时间：2012-12-12T06:37:33.003
> 
> 标签：batch-file

```
sample.bat a,b,c,d yes 
```

我试图通过回显 %2 来输出 yes，但结果显示为 b。我认为逗号也算作转义字符或其他东西。如何输出 yes 作为第二个参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:52:44.497

参数分隔符是：`,` `;` `=` `<space>` `<tab>` `<0xFF>`

参数分隔符不能修改，也不能转义。

在参数中包含分隔符的唯一方法是将参数括在引号中。

```
sample.bat "a,b,c,d" yes 
```

您可以使用`~`修饰符从参数中去除引号

```
echo %~1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T12:43:03.790

您可以`%*`改用并使用您自己的规则对其进行解析。

```
for /F "tokens=1,2 delims= " %%A in ("%*") DO (
  echo first=%%A
  echo second=%%B
) 
```

# ajax - 为什么 OmniFaces Ajax 实用程序的 oncomplete() 在 preRenderView 事件调用时不起作用？

> ID：13834170
> 
> 赞同：1
> 
> 时间：2012-12-12T06:37:33.307
> 
> 标签：ajax, jsf, omnifaces

我的 preRenderView 事件调用 OmniFaces Ajax 实用程序的 oncomplete() 方法在客户端上执行 javascript。我刚刚对此进行了测试，并且没有在客户端上执行 javascript。

我的 f:event 如下。

```
<f:metadata>
    <o:enableRestorableView/>
    <f:event type="javax.faces.event.PreRenderViewEvent" listener="#{pageNavigationController.preRenderView()}"/>
</f:metadata> 
```

我的 pageNavigationController.preRenderView() 在下面，

```
public void preRenderView() {
    if (initLayoutForPage) {
        // initialize layout for page
        layoutController.initializeForPage(page);
        initLayoutForPage = false;
    }
    if (usersController != null) {
        usersController.preRenderView();
    }
} 
```

它调用下面的 usersController.preReviewView()，它调用 Ajax 实用程序的 oncomplete()。

```
public void preRenderView() {
        Ajax.oncomplete("document.getElementById('menuBarForm:btnLogout').click();");
} 
```

目前在生产中，上面的javascript按设计工作；这个 javascript 调用如下。

```
 <script>window.onbeforeunload = function() { document.getElementById('menuBarForm:btnLogout').click(); }</script> 
```

那么，为什么 javascript 没有在客户端上执行呢？

编辑：我不再需要这个功能，因为我只是想出了一个解决原始问题的方法，但我希望能回答这个问题。谢谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:38:20.363

我刚刚确认 Ajax.oncomplete() 即使在 preRenderView 事件期间/通过 preRenderView 事件执行时也能按设计工作。OmniFaces 'Ajax' 实用程序用于'Ajax' 请求。我假设 OmniFaces Ajax.oncomplete() 会在 FPR（整页刷新或非 AJAX 请求）的 preRenderView 期间向客户端发送 javascript。

# mysql - MySQL 的 DECIMAL 顺序不正确？

> ID：13834171
> 
> 赞同：1
> 
> 时间：2012-12-12T06:37:40.867
> 
> 标签：mysql

当我从 MySQL 表中选择数据并按`DECIMAL`column排序时`DESCENDING`，顺序如下：

```
3, 2, 1, -1, 0 
```

为什么会这样？

如何正确设置订单，使其成为：

`3, 2, 1, 0, -1`?

**编辑** 实际上，问题出在 NULL 数据上。这是它的顺序：

```
3, 2, 1, -1, NULL, NULL 
```

这是所需的顺序：

```
3, 2, 1, NULL, NULL, -1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T06:39:32.063

`COALESCE`在你的`ORDER BY`条款中使用

```
SELECT *
FROM tableName
ORDER BY COALESCE(columnName, 0) DESC 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/93450/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:46:10.077

如果您按包含空值的列进行排序，它们总是会出现在结果的开头或结尾。Null 表示未知，而不是零。

如果您想将它们视为零，您可以`ifnull(column, 0)`在您的选择语句中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:41:06.680

使用以下语法

```
ORDER BY column DESC 
```

# c# - 将捕获的图像存储在隔离存储中，而不保存到窗口电话的相机胶卷中

> ID：13834173
> 
> 赞同：1
> 
> 时间：2012-12-12T06:38:00.033
> 
> 标签：c#, windows-phone

我正在开发 Windows 移动应用程序，在该应用程序中，我需要将相机捕获的图像存储在独立存储中，而不将其保存在相机胶卷中。我可以将捕获的图像存储在隔离的存储中，但捕获的图像的副本也存储在我不想要的相机胶卷中。

# java - 使用 ANTLR、JavaCC 或 JFlex 优于 StringTokenizer 和等价物的优点/缺点是什么？

> ID：13834184
> 
> 赞同：0
> 
> 时间：2012-12-12T06:39:00.507
> 
> 标签：java, performance, parsing, lexer, lexical-analysis

我目前正在研究用 Java实现[此处显示的语言。](http://www.valvesoftware.com/publications/2012/GDC2012_Ruskin_Elan_DynamicDialog.pdf)演示文稿有点长，但它本质上是一个用于创建动态语音的 DSL。例子：

```
rule ExampleRule
{
    criteria Criterion1 Criterion2 Criterion3=value
    response ExampleResponse
    remember State:=1
    trigger Object TriggerName
    ApplyFacts "State1:1:0,State2:1:0"
}
response ExampleResponse
{
    say "Text" then object ExampleRule
    say "Text" then any ExampleRule
    say "Text"
    scene "Scenepath"
} 
```

我已经查看了不同的解析器生成器，例如 ANTLR、JavaCC 和 JFlex，但我想知道是否只使用 StringTokenizer/Scanner 并滚动我自己的解析器，因为它是用于业余项目的。

我之前决定使用 ANTLR，但在生成的源代码中使用完整路径名时遇到了一些 ANTLR 问题，而且运行时库似乎有点重量级。我找不到太多比较三个解析器库或内置 Java 替代方案的信息。

考虑到语言的性质，每个解析器的优点/缺点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:55:58.190

使用解析器生成器的优点：

1.  构造的正确性。[生成的解析器完全接受语法中指定的语言，从Knuth 1965](http://classes.engr.oregonstate.edu/eecs/winter2012/cs480/assignments/Knuth-1965-TranslationofLanguages.pdf)开始，各种生成器都有各种 CS 证明。如果你自己滚动，例如递归下降，你没有直接的证据，也没有简单的方法来测试它。

2.  开发时间。一旦您了解了生成器的弱点，解析器的构建速度就与您输入的速度一样快。

“鉴于语言的性质”并不是那么相关。主要从业者在 1960 年代实现算术表达式时犯了重大错误，这就是为什么我的观点 (1) 就是我的观点 (1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:55:06.367

有四种[类型的语言](http://en.wikipedia.org/wiki/Chomsky_hierarchy)需要适当的自动化（识别）机制。StringTokenizer 和 Scanner 适用于常规语言（最简单的），但对于上下文无关语言（例如编程语言、XML 和其他包含嵌套结构的语言）则需要更高级的机制（例如下推自动机）。

如果没有非常详细的外观，在您的情况下，您最好使用 ANTLR 等工具。它们确实需要学习，但远不如学习如何为上下文无关语言创建自己的词法分析器和解析器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-12T18:39:58.203

一般来说，这取决于你问的人群。

如果您与维护**单个**编译器的编译器人员交谈，遇到*向后兼容性*要求（在一个解析器中统一使用以前的版本或其他方言（-选项）），对解析速度有要求等，您通常需要递归下降（大多数生产编译器是RD）。

如果您谈论（也是专业的）编译器人员，他们**通常**会为另一个供应商的芯片定制 C 或 C++ 编译器，那么这些论点更像是 EJP。当然，他们通常采用他们已经拥有的 C(++) 标准语法，并添加一些架构定制结构。

# javascript - 将动画添加到 RaphaelJS 切换功能

> ID：13834186
> 
> 赞同：2
> 
> 时间：2012-12-12T06:39:13.887
> 
> 标签：javascript, function, animation, raphael, toggle

我遇到了这段代码，并将其“用作”开发我自己的特定切换功能的参考。

[Raphael.js - if / else 语句在点击时不切换](https://stackoverflow.com/questions/13653670/raphael-js-if-else-statement-not-toggling-on-click)

[http://jsfiddle.net/YLrzk/1/](http://jsfiddle.net/YLrzk/1/)

我想在单击时将动画应用于每个笔画宽度。我似乎无法弄清楚如何在切换功能旁边添加这个动画。

我认为这将应用于变量`StrON`，`StrOFF`因此我尝试了以下方法：

```
 var strOff = function() {
            this.animate({ 'stroke-width': '1' }, 100);

        }; 

    var strOn  = function() {
            this.animate({ 'stroke-width': '5' }, 100);

        }; 
```

甚至只是：

```
var strOff = 
        this.animate({ 'stroke-width': '1' }, 100);

var strOn  = 
        this.animate({ 'stroke-width': '5' }, 100); 
```

对不起，懒惰的语法如果我错过了我尝试过的两个例子的任何内容。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:43:10.873

这些都不起作用，因为 strOn 和 strOff 不是正确的数据类型——它们必须是一个对象，包含给定矩形的选定和取消选定状态的属性。这代表了对 animate 所做的基本误解：它本质上是`attr`.

您可以通过简单地将 strOn 和 strOff 恢复到其原始状态然后在给定矩形的单击处理程序中调用它来解决您的问题：

```
box1.animate( strOn, 100 );
box2.animate( strOff, 100 );
box3.animate( strOff, 100 ); 
```

这仍然会给您带来复杂性问题。如果要添加第四个或第五个矩形，您将很快陷入条件逻辑。在我看来，这种状态信息应该几乎永远不会像这样实现。相反，我建议这样做：

**使用单个通用点击处理程序。**

```
var genericClickHandler = function()
{
    //  First step: find and deselect the currently "active" rectangle
    paper.forEach( function( el )
        {
            if ( el.data('box-sel' ) == 1 )
            {
                el.animate( strOff, 100 ).data('box-sel', 0 );
                return false; // stops iteration
            }
        } );
    this.animate( strOn, 100 ).data( 'box-sel', 1 );
} 
```

这将遍历论文中的所有元素——如果其中一个被标记为“活动”，它将被动画化回到其非活动状态。

**用于`data`跟踪选定的矩形：**

```
paper.rect( x1, y1, w1, h1 ).attr( {} ).data( 'box-sel', 0 ).click( genericClickHandler );    // note that we're setting data to indicate that this rectangle isn't "active"
paper.rect( x2, y2, w2, h2 ).attr( {} ).data( 'box-sel', 0 ).click( genericClickHandler );
// ... as many rectangles as you like
paper.rect( xN, yN, wN, hN ).attr( {} ).data( 'box-sel', 0 ).click( genericClickHandler ); 
```

使用这种方法，不需要跟踪单个矩形——只需要一个给定的矩形是否被选中。

这是一个[支持许多矩形的示例](http://jsfiddle.net/kevindivdbyzero/K8eds/)。

# java - 在构造函数中传递集合的引用是不好的设计吗？

> ID：13834187
> 
> 赞同：1
> 
> 时间：2012-12-12T06:39:15.377
> 
> 标签：java

我多次遇到类似的代码：

```
class AClass{
    private Iterable<String> list;
    public AClass(Iterable<String> list){ this.list = list; }
    ...
} 
```

在这段代码中，Iterable 的引用直接传递给 AClass。最终结果相当于直接将列表引用暴露给外部。即使您将 AClass.list 设为 final，它仍然允许来自 AClass 外部的代码修改列表的内容，这很糟糕。

为了解决这个问题，我们将在构造函数中进行防御性复制。

但是，这种代码很常见。除了性能考虑之外，人们编写这种代码的意图是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:44:04.457

简单的回答，如果是你自己的代码/小团队，以这种方式做事通常更快、更容易、更少的内存和 CPU 密集型。而且，有些人就是不知道更好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:30:42.937

我看不出这种模式有什么问题。如果该类表示对列表（或可迭代）进行操作的对象，那么将该列表提供给构造函数是很自然的。如果您的类无法处理对基础集合的更改，则需要对其进行修复或记录。制作收藏品的副本是解决此问题的一种方法。

另一种选择是更改接口，以便只允许不可变集合：

```
public AClass(ImmutableList<MyObject> objects) {
    this.objects = objects;
    ... 
```

当然，您需要某种 ImmutableList 类或接口。

根据您的课程的用途和用户，您还可以通过记录已知的“弱点”来避免复制：

```
/**
 * ...
 * @param objects list of objects this AClass-object operates on.
 *                The list should not be modified during the lifetime 
 *                of this object
 */
public AClass(List<MyObject> objects) ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T07:01:47.953

您可能想查看一个熟悉的习语的[复制构造函数。](http://www.javapractices.com/topic/TopicAction.do?Id=12)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T07:50:36.710

如果代码在内部使用，正如其他答案所指出的那样，那应该不是问题。但是，如果您要公开为 API，那么有两种选择：

首先是创建一个防御副本，然后将其返回

其次是创建一个`UnmodifiableCollection`然后返回它并记录尝试更改集合中的任何内容可能导致异常的事实。

但第一种选择更可取。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T06:49:56.980

制作副本总是很好的做法，不仅因为其他人可以修改您的值，而且出于安全原因。

# php - php比较字符串返回不常见的值？

> ID：13834188
> 
> 赞同：0
> 
> 时间：2012-12-12T06:39:17.073
> 
> 标签：php, mysql

我找到了一些在 php 字符串之间返回公共值的好方法（通过explode & array_intersect 等），但到目前为止返回不常见值的方法不多。

我确实找到了一个解决不常见值的问题，解决[方案](https://stackoverflow.com/questions/11371527/get-uncommon-values-from-two-or-more-arrays)使用了 array_diff 和 array_merge。我很难让它看起来在实际值内，以满足我的需要。

我正在使用一个遗留数据库，围绕它构建了足够的代码来使适当的规范化成为白日梦，并且非常感谢任何见解。

我在 mysql 数据库表中有两列，a & b。a 列的数据在 b 中重复，用空格隔开。我需要选择/查询/公开 b 中的非重复数据。它们之间有一个空间，但它不是唯一一个，这让我发疯，因为爆炸/内爆不会削减它（或者我不知道如何实现它）。

现存的：

a Apples, Apples Blue, Apples Red Big

b Apples Oranges、Apples Blue Bananas、Apples Red Big Ruby Red Grapefruit

我需要：橙子、香蕉、红宝石红葡萄柚

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:25:12.917

根据您上面的示例列值和结果，我假设您只需要比较同一索引处的值。**`Apples`**with **`Apples Oranges`**, **`Apples Blue`**with **`Apples Blue Bananas`**, and **`Apples Red Big`**with**`Apples Red Big Ruby Red Grapefruit`**因为你不期望输出像**`Blue Bananas`**or **`Red Big Ruby Red Grapefruit`**。

所以你可以尝试这样的事情：

```
$non_duplicates = array();
foreach($columnA as $idx => $val) {
    $pos = strstr($columnB[$idx], $val);

    if($pos !== false)
        $non_duplicates[] = str_replace($val . " ", "", $columnB[$idx]);
}

var_dump($non_duplicates); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:40:47.053

这应该是你要找的...

```
$a = 'Apples, Apples Blue, Apples Red Big';
$b = 'Apples Oranges, Apples Blue Bananas, Apples Red Big Ruby Red Grapefruit';

$diff = array_diff(toArray($b), toArray($a)); //diff between b and a
var_dump($diff);

function toArray($str){
  $str = trim(str_replace(array(',','  '), array('',' '), $str));  //clean string up
  return array_unique(explode(' ', $str));  //explode into array by spaces and make unique.
} 
```

**输出：**

数组（4）{[1]=>字符串（7）“橙子”[4]=>字符串（7）“香蕉”[8]=>字符串（4）“红宝石”[10]=>字符串（10） “西柚” }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T23:23:57.967

更新：我在 php.net 上发现了一个使用 strstr() 的方法（在下面使用）。链接：[http](http://php.net/manual/en/function.strstr.php) ://php.net/manual/en/function.strstr.php 提供者：root at mantoru dot de

```
$needle = 'Apples Red Big';
$haystack = 'Apples Red Big Ruby Red Grapefruit';

function strstr_after($haystack, $needle, $case_insensitive = false) {
$strpos = ($case_insensitive) ? 'stripos' : 'strpos';
$pos = $strpos($haystack, $needle);
if (is_int($pos)) {
    return substr($haystack, $pos + strlen($needle));
}
// Most likely false or null
return $pos;
}

$goal = strstr_after($haystack, $needle);
echo $goal; 
```

回报：宝石红葡萄柚

# javascript - 一个系列，多种颜色，谷歌图表组合图表

> ID：13834194
> 
> 赞同：1
> 
> 时间：2012-12-12T06:39:36.710
> 
> 标签：javascript, charts

我只有一个系列的以下代码。由于我正在使用的数据，我无法添加另一个系列 - 我面临的挑战是用不同颜色设置条形图上的条形。有什么建议么？

```
var options = {
title:selVal + ': Electricity Consumption Yearly % Change',
legend:{alignment:'center', position:'bottom'},
vAxis:{title:'Yearly % Change', format:'#,###%'},
seriesType: "bars",
width:600, 
height:300
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-20T07:25:52.153

```
var options = {
          legend: 'none',
          series: {
            0: { color: '#e2431e' },
            1: { color: '#e7711b' },
            2: { color: '#f1ca3a' },
            3: { color: '#6f9654' },
            4: { color: '#1c91c0' },
            5: { color: '#43459d' },
          }
        }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:28:52.567

您可以通过在选项中提供一组颜色来提供多种颜色

```
var options = {
title:selVal + ': Electricity Consumption Yearly % Change',
legend:{alignment:'center', position:'bottom'},
vAxis:{title:'Yearly % Change', format:'#,###%'},
seriesType: "bars",
width:600, 
height:300,
colors: ["red","blue","green"]
}; 
```

# cakephp - cakephp中的自定义路由配置

> ID：13834200
> 
> 赞同：0
> 
> 时间：2012-12-12T06:39:51.520
> 
> 标签：cakephp, routes

在路由文件中有一行像

```
Router::connect('/', array('controller' => 'admins', 'action' => 'login')); 
```

[如果有人写像http://abc.com/webroot](http://abc.com/webroot)或[http://abc.com/css_or_js](http://abc.com/css_or_js)这样的 URL，我想做点什么，那么它也会进入管理员的登录操作。如果是这样，那我该怎么办？

```
Router::connect('/webroot/*', array('controller' => 'admins', 'action' => 'login'));
Router::connect('/css/*', array('controller' => 'admins', 'action' => 'login'));
Router::connect('/js/*', array('controller' => 'admins', 'action' => 'login')); 
```

但它`webroot`现在有效，不适用于 css 或 js 文件夹或任何其他文件夹。请在这件事上帮助我。我会非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:04:20.233

css 和 js 路由不起作用的原因是 Cake 的调度程序将它们视为资产，因此它[完全跳过路由过程](http://api20.cakephp.org/view_source/dispatcher#l-70)并交付资产。如我所见，解决此问题的唯一方法是编写自定义调度程序。

无论如何，您不应该为 webroot 目录及其文件夹编写路由。webroot 文件夹应该是虚拟主机上的文档根目录，因此被视为站点的根目录。

# c++ - 一次生成 1000 个随机纸牌洗牌 c++

> ID：13834202
> 
> 赞同：3
> 
> 时间：2012-12-12T06:40:09.433
> 
> 标签：c++, srand

我基本上是在尝试构建一个使用标准 52 张纸牌的赌场游戏创意的计算机模拟。

我想一次运行 1000 场比赛。

我之前使用过 srand(time(NULL)) ，但我认为不可能一次输出 1000 个不同的随机数序列，是吗？我的看法是，由于所有数字都是同时生成的，所以它们都是相同的。

有没有办法使用第一个生成的随机数来播种 1000 个新的 52 个数字序列？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:42:53.380

是的，您可以让您的第一个随机数生成器（以 为种子`time(NULL)`）输出 1000 个随机数，每个随机数都可以用作 1000 个单独的随机数生成器的种子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:46:05.570

> 我的看法是，由于所有数字都是同时生成的，所以它们都是相同的

它们**不是**同时生成的。我想你正在使用 for 循环？每次迭代都不在同一时间”。

你甚至测试过这个理论吗？

```
for i = 1 to 1000 do
{
  print <time to ms resolution>
  print <random number>
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:43:34.093

使用相同数字播种将始终导致相同的伪随机数序列。只要您不在迭代之间重新播种相同的种子，（子）序列就**不会**相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T06:46:48.227

尝试用 . 播种 rand() 函数`srand(time(NULL)*getpid())`。您调用 1000 次的进程的 PID 应该取决于系统，并且很有可能彼此不同。

如果您将线程用于不同的游戏，请使用 threadID 而不是 getpid()。

如果您愿意，您可以一次预先生成所有随机数并在以后使用它们：

```
int random_numbers[1000];
for (i = 0; i < 1000; i++) {
    srand(time(NULL)*(i+1));
    random_numbers[i] = rand();
} 
```

# jquery - 如何使用 jQuery 启用多单选按钮选择

> ID：13834211
> 
> 赞同：1
> 
> 时间：2012-12-12T06:40:52.437
> 
> 标签：jquery

您能否在 jsFiddle 中查看这个[Demo](http://jsfiddle.net/Behseini/wY63X/1/)并告诉我如何在单选按钮中启用多选并使用 jquery 将结果存储在数组中？

我想要的是可以选择一个或多个无线电 btns 并最终将它们存储在一个数组中以存储在数据库中。我有这样的简单 HTML 表单：

```
<input type="radio" name="items" value="Item One">Item One</input><br >
<input type="radio" name="items" value="Item Two">Item Two</input><br >
<input type="radio" name="items" value="Item Three">Item Three</input><br >
<input type="radio" name="items" value="Item Four">Item Four</input><br >
<input type="radio" name="items" value="Item Five">Item Five</input><br >
<input type="radio" name="items" value="Item Six">Item Six</input><br >
<br />
<input type='button' value='Display Selected' id='isSelect'>
<p>You Select :</p> 
```

</ p>

我也在使用这个 jQuery 代码来存储所选项目的值

```
enter code here
$("#isSelect").click(function () {
var result = $('input:radio[name=items]:checked').val();
$("#sel").html(result);
});​ 
```

谢谢你的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:52:30.387

改用`checkboxes`，检查这个 jsfiddle 演示[http://jsfiddle.net/wY63X/3/](http://jsfiddle.net/wY63X/3/)

要将其存储为数组，您可以这样做

```
var storedArray = new Array();
$('input[name="items"]').each(function(){
       storedArray.push($(this).val());
}); 
```

# internet-explorer - OpenLayers：矢量图层不在某些浏览器中呈现

> ID：13834215
> 
> 赞同：2
> 
> 时间：2012-12-12T06:41:06.480
> 
> 标签：internet-explorer, firefox, openlayers, gml-geographic-markup-lan

我是 openLayers 的新手并尝试添加 GML 叠加层：

[http://the506.com/elxnmaps/2011/ftontest.html](http://the506.com/elxnmaps/2011/ftontest.html)

该文件在 Chrome 和 Safari 中完美呈现，但在 Firefox 或 IE 中根本不呈现；只有底层的谷歌层。它与 HTML 页面位于同一目录中。我尝试的任何方法似乎都不起作用。这是有问题的代码：

```
 function init(){
          map = new OpenLayers.Map('map', {
          projection: 'EPSG:3857',
          layers: [(Google layers)],
          center: new OpenLayers.LonLat(-66.6, 46.0).transform('EPSG:4326', 'EPSG:3857'),
          zoom: 10
});
    map.addControl(new OpenLayers.Control.LayerSwitcher());

    (styling rules)

var kmllayer = new OpenLayers.Layer.Vector("Poll-by-Poll Data", {
            protocol: new OpenLayers.Protocol.HTTP({
                url: './13003test.gml',
                format: new OpenLayers.Format.GML({extractAttributes: true})
            }),
            strategies: [new OpenLayers.Strategy.Fixed()],
    visibility: true,
    styleMap: new OpenLayers.StyleMap(style),
    projection: new OpenLayers.Projection('EPSG:4326')
        });

    map.addLayer(kmllayer);

        selectControl = new OpenLayers.Control.SelectFeature(kmllayer,
            {onSelect: onFeatureSelect, onUnselect: onFeatureUnselect});

        map.addControl(selectControl);
        selectControl.activate()
    } 
```

什么可能导致问题，可以修复吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:55:14.130

当我测试时，看起来你的 poll-by-poll 层在 Chrome/Firefox 中成功加载。但是，您的 stylemap.js 的第 8 行存在语法错误：

```
var main = new OpenLayers.Style(
{
    fillOpacity: 0.55,
    strokeWidth: 0.4,
    strokeOpacity: 0.9,
    pointRadius: 2,
    strokeColor: "#aaaaaa", // no comma here
}... 
```

删除逗号并尝试在 IE 中重新加载。

# linux - 使用一个文件从另一个文件中提取指定的行

> ID：13834218
> 
> 赞同：2
> 
> 时间：2012-12-12T06:41:14.560
> 
> 标签：linux, shell, sed, awk

输入1：

```
1    s1
100  s100
90   s90 
```

输入2：

```
a    1
b    3
c    7
d    100
e    101
f    90 
```

输出：

```
a    1
d    100
f    90 
```

我知道`join`可以这样做，但它需要（1）在加入后对这些公共字段进行排序（2），我需要从 input1 中删除第二列。有没有人对此有更好的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T06:49:13.500

这是一种使用方法`awk`：

```
awk 'FNR==NR { a[$1]; next } $2 in a' file1 file2 
```

结果：

```
a    1
d    100
f    90 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:15:05.830

这可能对您有用（GNU sed）：

```
sed -r 's|(\S+).*|/\\<\1$/p|' input1 | sed -nf - input2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T07:59:27.887

根据您的要求， grep 可能会：

```
grep -wFf <(cut -d' ' -f1 input1) input2 
```

输出：

```
a    1
d    100
f    90 
```

请注意，grep 不是列感知的，并且会很乐意匹配它可以匹配的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T09:27:23.263

据我所知，awk 是更好的解决方案，但由于它已经提供：下面是 perl 解决方案。

```
> perl -F -lane '$H{$F[0]}=$F[1];END{%T=reverse(%H);foreach (values %H){if(exists($H{$_})){print $T{$_}." ".$_;}}}' file1 file2
a 1
d 100
f 90 
```

# javascript - mongoose express node.js javascript函数返回未定义

> ID：13834220
> 
> 赞同：3
> 
> 时间：2012-12-12T06:41:18.960
> 
> 标签：javascript, node.js, express, mongoose

```
function getPassword(uname)
{

    User.findOne({'username': uname},{'password': 1}, function(err, cb)
    {
        console.log("print 2");
        return cb.password;
    });
    console.log("print 1");
} 
```

我是 node.js 的新手。目前，我有这个函数，调用时应该从 mongodb 返回密码。但是，每当我调试时，我意识到“print 1”总是在“print 2”之前打印，并且调用此方法并存储到变量的 app.post 函数总是返回“undefined”。

感谢是否有人可以向我解释。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:06:37.300

那是因为“print 2”发生在回调内部。当 findOne 完成时，它会触发回调函数。

基本上节点中的主事件循环触发`User.findOne`，然后立即移动到“打印1”。然后稍后`findOne`完成并触发您提供的回调函数，然后触发“print 2”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:07:00.043

@Alex Ford 是对的。在 Node.js 中不应该有阻塞的方法。相反，大多数情况下都使用回调:)

所以你的`getPassword()`助手只需要一个参数`callback [Function]`，它将在工作完成后调用。

```
function getPassword(uname, cb) {
  User.findOne({'username': uname}, {'password': 1}, cb(err, data));
}

app.post('/somewhere', function (req, res, next) {
  // ...
  getPassword(username, function (err, password) {
    if (err) return next(err);
    console.log("I got '%s' password!", password);
  });
}); 
```

tl;博士只需遵循嵌套回调就可以了。一般来说，以*异步*方式思考不*同步*:)

上面的代码没有经过测试，所以请先测试它；）

# c - Strsep 在我的 Mac OS X x86_64 系统上返回一个 32 位指针

> ID：13834222
> 
> 赞同：2
> 
> 时间：2012-12-12T06:41:35.750
> 
> 标签：c, macos, assembly, 32bit-64bit, x86-64

编辑：找到解决方案（见底部）

我正在尝试在 Mac OS X 10.8 x86_64 系统上构建软件包（[owfs ）。](http://owfs.org/)这个软件包主要是在/for linux上开发的，但是我已经得到了一个旧版本来编译和正常运行，并且互联网上有很多人在运行它的各种版本，所以我希望它是可能的. 我已经能够成功完成编译过程，但是当我尝试运行它时程序会出现段错误。我在 GDB 中进行了调查，发现如下：

有问题的代码：

```
void FS_dir_entry_aliased(void (*dirfunc) (void *, const struct parsedname *), void *v, const struct parsedname *pn)
{
if ( ( pn->state & ePS_unaliased ) == 0 ) {
    // Want alias substituted
    struct parsedname s_pn_copy ;
    struct parsedname * pn_copy = & s_pn_copy ;

    ASCII path[PATH_MAX+3] ;
    ASCII * path_pointer = path ; // current location in original path

    // Shallow copy
    memcpy( pn_copy, pn, sizeof(struct parsedname) ) ;
    pn_copy->path[0] = '\0' ;

    // path copy to use for separation
    strcpy( path, pn->path ) ;

    // copy segments of path (delimitted by "/") to copy
    while( path_pointer != NULL ) {
                    ASCII * path_segment = NULL;
        path_segment = strsep( &path_pointer, "/" ) ;
        BYTE sn[SERIAL_NUMBER_SIZE] ;

        if ( PATH_MAX < strlen(pn_copy->path) + strlen(path_segment) ) { 
```

`strlen(path_segment)`块中的调用`if`失败，因为`path_segment`是越界地址。

使用 GDB 一步一步来，这就是我发现的。进入用 初始化的调用`path_segment`，`strsep`gdb 给了我：

```
path_pointer = (ASCII *) 0x7fff5fbf99a5 "/uncached/bus.0/interface" 
```

在我执行下一行之后`path_pointer`，正如我所料：

```
path_pointer = (ASCII *) 0x7fff5fbf99a6 "uncached/bus.0/interface" 
```

但gdb报告：

```
path_segment = (ASCII *) 0x5fbf99a5 <Address 0x5fbf99a5 out of bounds> 
```

这是地址的正确“开始”，但它是一个 32 位指针地址。由于我的系统是 64 位系统，当`strlen`被调用时，我得到一个 EXC_BAD_ACCESS。

我知道这里发生了很多事情，如果问题深埋在包构建过程中，我没有提供足够的信息。在我看来，这可能有一个简单的解决方案，因为该函数基本上可以正常工作，但只是返回了错误的大小指针。不过，我对 64 位和 32 位系统的复杂性几乎没有经验，所以我想知道是否有人能发现一些明显的东西，或者为调试此问题的后续步骤提供说明。有趣的是，当我`strsep`在 gdb ( `p (ASCII *) strsep (&path_pointer, "/")`) 中手动运行命令时，它们似乎工作正常，为我提供了与我期望的匹配的 64 位指针。

最后，如果它有用，我*认为*这是 strsep 调用的装配线：

```
0x0000000100036eee <FS_dir_entry_aliased+318>:  callq  0x1000a56a0 <dyld_stub_strsep>
0x0000000100036ef3 <FS_dir_entry_aliased+323>:  mov    %eax,%ecx
0x0000000100036ef5 <FS_dir_entry_aliased+325>:  movslq %ecx,%rcx
0x0000000100036ef8 <FS_dir_entry_aliased+328>:  mov    %rcx,-0x1d10(%rbp) 
```

以及位于该 callq 地址的 strsep 的反汇编：

```
0x00007fff915c0fc7 <strsep+0>:  push   %rbp
0x00007fff915c0fc8 <strsep+1>:  mov    %rsp,%rbp
0x00007fff915c0fcb <strsep+4>:  mov    (%rdi),%r8
0x00007fff915c0fce <strsep+7>:  xor    %eax,%eax
0x00007fff915c0fd0 <strsep+9>:  test   %r8,%r8
0x00007fff915c0fd3 <strsep+12>: je     0x7fff915c1007 <strsep+64>
0x00007fff915c0fd5 <strsep+14>: mov    %r8,%r10
0x00007fff915c0fd8 <strsep+17>: jmp    0x7fff915c0fe4 <strsep+29>
0x00007fff915c0fda <strsep+19>: inc    %rdx
0x00007fff915c0fdd <strsep+22>: test   %al,%al
0x00007fff915c0fdf <strsep+24>: jne    0x7fff915c0fee <strsep+39>
0x00007fff915c0fe1 <strsep+26>: mov    %r9,%r10
0x00007fff915c0fe4 <strsep+29>: mov    (%r10),%cl
0x00007fff915c0fe7 <strsep+32>: lea    0x1(%r10),%r9
0x00007fff915c0feb <strsep+36>: mov    %rsi,%rdx
0x00007fff915c0fee <strsep+39>: mov    (%rdx),%al
0x00007fff915c0ff0 <strsep+41>: cmp    %cl,%al
0x00007fff915c0ff2 <strsep+43>: jne    0x7fff915c0fda <strsep+19>
0x00007fff915c0ff4 <strsep+45>: xor    %edx,%edx
0x00007fff915c0ff6 <strsep+47>: test   %cl,%cl
0x00007fff915c0ff8 <strsep+49>: je     0x7fff915c1001 <strsep+58>
0x00007fff915c0ffa <strsep+51>: movb   $0x0,(%r10)
0x00007fff915c0ffe <strsep+55>: mov    %r9,%rdx
0x00007fff915c1001 <strsep+58>: mov    %rdx,(%rdi)
0x00007fff915c1004 <strsep+61>: mov    %r8,%rax
0x00007fff915c1007 <strsep+64>: pop    %rbp
0x00007fff915c1008 <strsep+65>: retq 
```

编辑： string.h 肯定被包含在内，有一个包含它的系统范围的包含文件，但只是为了确保我尝试将它添加到这个特定文件。`-D_BSD_SOURCE=1`是自动添加的编译器选项之一，因此正在发生。默认情况下还有一个编译器选项`-D_ISOC99_SOURCE=1`。我尝试添加`-std=gnu99`（我的编译器 llvm-gcc 4.2，不喜欢`-std=gnu90`），但它没有修复它。我收到以下编译器错误：

以下是我为此文件收到的编译器警告：

```
ow_alias.c: In function 'ReadAliasFile':
ow_alias.c:40: warning: implicit declaration of function 'getline'
ow_alias.c:48: warning: implicit declaration of function 'strsep'
ow_alias.c:48: warning: assignment makes pointer from integer without a cast
ow_alias.c:64: warning: assignment makes pointer from integer without a cast
ow_alias.c: In function 'FS_dir_entry_aliased':
ow_alias.c:177: warning: initialization makes pointer from integer without a cast 
```

第二次编辑：在进行了更多挖掘之后（感谢您的`gcc -E | grep strsep`提示！），我发现问题出在编译器标志上`-D_POSIX_C_SOURCE=200112L`。此编译器标志阻止了 strsep 的定义，使编译器进行了隐式声明。我从配置脚本中删除了它，一切似乎都运行良好。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T09:51:00.407

您需要确保`string.h`包含在内。

如果这已经完成，您还需要定义一个功能测试宏来启用`strsep()`. 添加`-D_GNU_SOURCE`或`-D_BSD_SOURCE`应该可以解决问题。但是，您可能想看看您现在是如何配置的 -`_BSD_SOURCE`通常默认情况下启用。也许您告诉 gcc 使用`-std=c90`or进行编译`-std=c99`，这将关闭许多功能测试宏。使用`-std=gnu90`或`-std=gnu99`代替。

您是否看到诸如“初始化使指针从没有强制转换的整数”或“函数的隐式声明”之类的警告？

# php - 从mysql创建数组并存储在会话中

> ID：13834228
> 
> 赞同：-1
> 
> 时间：2012-12-12T06:42:00.540
> 
> 标签：php, mysql

我有一个这样的 mySQL 表：

```
id | name | value
------------------
1  | logo      | blahblahblah.png
2  | namestore | blah store
3  | ip        | 0.0.0.0 
```

我的问题是如何使用 mysql 获取该表，然后创建一个 php 调用，例如：

```
$store->logo (i will get blahblahblah.png)
$store->namestore ( i will get blah store) 
```

谁能帮我？我只是对如何做到这一点感到困惑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:49:23.823

```
You can use that

 $sql = "select * from your_table_name;";

    if (!mysql_query($sql, $conn)) {
        die('Error: ' . mysql_error());
             echo 'error !';
    }

    $result = mysql_query($sql);

    while ($arr = mysql_fetch_assoc($result)) {
       //your fetch results are stored in $arr array. you can get values with $arr['column_name']
    } 
```

# c++ - boost线程中的内存泄漏？

> ID：13834231
> 
> 赞同：1
> 
> 时间：2012-12-12T06:42:13.390
> 
> 标签：c++, boost, memory-leaks, valgrind

我正在尝试提升线程，我从 valgrind 注意到它只是通过循环一个空的代码块泄漏了 320 个字节。我从 2010 年开始在 google 上发现了一些帖子，这些帖子表明它们可能是由于线程在 valgind 运行之前未关闭而导致的误报，但这略有不同。在这些示例中，您有一些仍然可以访问的块（因此，如果线程仍在运行，则可以释放）其中我的运行显示 8 个仍然可以访问，而 20 个块肯定丢失了。这是我应该担心的事情，还是我错过了什么？谢谢

编码

```
#include <boost/thread.hpp>
#include <iostream>
#define THREADS 20

void threadfunc(int workerid) {}

int main(int argc, char **argv){

    boost::thread *threads[THREADS];
    int i;
    for (i = 0; i < THREADS; i++) {
        threads[i] = new boost::thread(threadfunc, i);
    }
    for (i = 0; i < THREADS; i++) {
        threads[i]->join();
    }
} 
```

编译命令

```
 c++ -o example example.cpp -I /usr/include/boost -lboost_system -lboost_thread 
```

Valgind 命令

```
 G_SLICE=always-malloc G_DEBUG=gc-friendly  valgrind -v --tool=memcheck --leak-check=full --show-reachable=yes --num-callers=40 --log-file=valgrind.log ./example 
```

Valgine结果

```
==31674== HEAP SUMMARY:
==31674==     in use at exit: 328 bytes in 21 blocks
==31674==   total heap usage: 103 allocs, 82 frees, 14,968 bytes allocated
==31674==
==31674== Searching for pointers to 21 not-freed blocks
==31674== Checked 215,920 bytes
==31674==
==31674== 8 bytes in 1 blocks are still reachable in loss record 1 of 2
==31674==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==31674==    by 0x4E454A9: boost::detail::get_once_per_thread_epoch() (in /usr/lib/libboost_thread.so.1.46.1)
==31674==    by 0x4E3E4FF: ??? (in /usr/lib/libboost_thread.so.1.46.1)
==31674==    by 0x4E3E7C8: boost::detail::get_current_thread_data() (in /usr/lib/libboost_thread.so.1.46.1)
==31674==    by 0x4E3FF3A: boost::thread::join() (in /usr/lib/libboost_thread.so.1.46.1)
==31674==    by 0x402C79: main (in /home/Jason/php/base/example)
==31674==
==31674== 320 bytes in 20 blocks are definitely lost in loss record 2 of 2
==31674==    at 0x4C2B1C7: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==31674==    by 0x402C2A: main (in /home/Jason/php/base/example)
==31674==
==31674== LEAK SUMMARY:
==31674==    definitely lost: 320 bytes in 20 blocks
==31674==    indirectly lost: 0 bytes in 0 blocks
==31674==      possibly lost: 0 bytes in 0 blocks
==31674==    still reachable: 8 bytes in 1 blocks
==31674==         suppressed: 0 bytes in 0 blocks
==31674==
==31674== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 2 from 2)
--31674--
--31674-- used_suppression:      2 dl-hack3-cond-1
==31674==
==31674== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 2 from 2) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T06:57:43.140

这是你的错误，而不是`boost::thread`s。你的内存没有被释放。

```
for (i = 0; i < THREADS; i++) {
    threads[i] = new boost::thread(threadfunc, i);
} 
```

在退出主函数之前，您必须释放内存（删除线程）。就像是

```
for (i = 0; i < THREADS; i++) {
   delete threads[i];
} 
```

或加入后删除下一个。

# matplotlib - 我在哪里可以获得 matplotlibrc 文件的最新版本？

> ID：13834236
> 
> 赞同：-2
> 
> 时间：2012-12-12T06:42:36.093
> 
> 标签：matplotlib

我在哪里可以获得 matplotlibrc 文件的最新版本？如何安装其他模块，如 xmlstore 、 NavigationWx2 等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:07:47.863

该文件`matplotlibrc`通常位于`~/.matplotlib/matplotlibrc`. 除非您使用系统默认值，这取决于您的 python 发行版的安装位置。相对于站点包，它应该在`matplotlib/mpl-data/matplotlibrc`.

获取“最新版本”是没有意义的。您应该使用安装时附带的版本，否则可能会引用未实现的不同设置。

关于“xmlstore”和“NavigationWx2”，我不知道它们是什么。它们不是 matplotlib 组件，也没有在[PyPI](http://pypi.python.org)上列出。

# php - 如何使用php在段落中创建超链接

> ID：13834241
> 
> 赞同：1
> 
> 时间：2012-12-12T06:43:01.833
> 
> 标签：php

我想为段落中的单词创建超链接。

例如，如果`"Jim Carrey"`数组中的名称与字符串中的单词匹配，那么 Jim Carrey 的名称应该在`"www.domian.net/name(Jim Carrey)"`. 如果`"mask"`数组中的单词与字符串中的单词匹配，则应将其替换为相应的 url，例如`"www.domian.net/mask"`

```
<?php 

$string="Jim Carrey found the new Mask";

$array=array("Jim Carrey","mask");

echo preg_replace( '/\b('.implode( '|', $array ).')\b/i', '<a href=" ">$1</a>', $string  );

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:52:09.870

您似乎对如何在所选文本周围放置链接有正确的想法，但您似乎甚至没有尝试将`href`. 真可惜，因为它就像使用您想要的任何参数输入 URL 一样简单。

但是，它确实有点复杂，因为你不想要两次相同的东西（你想要一个字面意思，但你想要`name(WORD)`另一个）。你可以试试这个：

```
$array = array("Jim Carrey"=>"name(Jim Carrey)","mask"=>"mask");
echo preg_replace_callback("/\b".implode("|",array_keys($array))."\b/i",
   function($m) use ($array) {
       return "<a href=\"http://domain.net/".$array[$m]."\">".$m."</a>";
   },$string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:52:01.653

```
<?php

$string="Jim Carrey found the new Mask";

$arr=array("Jim Carrey","Mask");

foreach($arr as $val)
    $string = str_replace($val, '<a href="http://domain.com/' . $val . '">' . $val . '</a>', $string);

echo $string;
?> 
```

# objective-c - 如何在ios中仅将数据显示到可见的tableview单元格

> ID：13834243
> 
> 赞同：1
> 
> 时间：2012-12-12T06:43:06.423
> 
> 标签：objective-c, xcode, uitableview

大家好，我有一个带有滚动视图的自定义表格视图单元格。问题是所有数据都一次加载到表格视图单元格中。我想要的是仅为 tableView 中的可见单元格加载数据。我使用 [indexPath forvisiblerows ]; 这是徒劳的..cud你们帮我下面是代码。

```
-(IPadTableViewCell *)getNewCell
{
NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"IpadTableViewCell" owner:nil options:nil];
for (id currentObject in topLevelObjects)
{
    if ([currentObject isKindOfClass:[IPadTableViewCell class]])
    {
        cell= (IPadTableViewCell  *)currentObject;
        return cell;   
    }
}
return nil;
 }

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

   //  static NSString *CellIdentifier = @"IpadTableViewCell";
   //cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
id1=[NSString stringWithFormat:@"%i",indexPath.row];
   cell=[dicAlbumCells objectForKey:id1];
if (cell == nil) {
    cell=[self getNewCell]; 
}
cell.tag=indexPath.row;
return cell;
}

  -(void)loadImagesForOnscreenRows
  {
 NSArray *visiblePaths = [tblGallery indexPathsForVisibleRows];

for (NSIndexPath *indexPath in visiblePaths) {
    if (imageArray > 0) {

       [self imageButtonClicked:nil];
    }
   }
  }

- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
 {        
    [self loadImagesForOnscreenRows];
}
 }
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
[self loadImagesForOnscreenRows];
}
 -(void)imageButtonClicked:(id)sender
{

CGFloat prevButtonXPosition = 18, pageButtonXPosition, pageButtonWidth = 144, pageButtonHeight = 143;

for (NSInteger i =0; i<9; i++) {
    pageButtonXPosition = prevButtonXPosition ;
    prevButtonXPosition = pageButtonXPosition+pageButtonWidth+20;
    UIButton *pageButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [pageButton setContentMode:UIViewContentModeScaleAspectFit];
    pageButton.layer.borderColor=[[UIColor whiteColor]CGColor];
    pageButton.layer.borderWidth = 3;
    pageButton.layer.cornerRadius = 0;
    [pageButton addTarget:self action:@selector(onClickImage:) forControlEvents:UIControlEventTouchUpInside];
    [pageButton setFrame:CGRectMake(pageButtonXPosition,0, pageButtonWidth, pageButtonHeight)];
    [pageButton setBackgroundImage:[UIImage imageNamed:[imageArray objectAtIndex:i]] forState:UIControlStateNormal];
    [pageButton setTag:i];
    [cell.scrollView addSubview:pageButton];
  }

UIButton *add=[UIButton buttonWithType:UIButtonTypeCustom];
add.layer.borderColor=[[UIColor whiteColor]CGColor];
add.layer.borderWidth = 3;
add.layer.cornerRadius = 0;
[add addTarget:self action:@selector(onClickAdd:) forControlEvents:UIControlEventTouchUpInside];
[add setFrame:CGRectMake(prevButtonXPosition, 0, 144, 143)];
[add setBackgroundImage:[UIImage imageNamed:@"grey.png"] forState:UIControlStateNormal];
[add setTag:0];
[cell.scrollView addSubview:add];

UIImageView *iv = [[UIImageView alloc] initWithFrame:CGRectMake(prevButtonXPosition+35,30, 76,76)];
[iv setImage:[UIImage imageNamed:@"last.png"]];
[cell.scrollView addSubview:iv];

[cell.scrollView setContentSize:CGSizeMake(prevButtonXPosition +165, 40)];
 cell.selectionStyle = UITableViewCellSelectionStyleNone;
[cell.contentView addSubview:cell.scrollView];
 } 
```

# qt - 拒绝 QMdiArea 中的子窗口更改

> ID：13834250
> 
> 赞同：2
> 
> 时间：2012-12-12T06:43:43.503
> 
> 标签：qt, qmdiarea

我有一个带有几个 QMdiSubWindows 的 QMdiArea。在构建时，QMdiArea 被初始化为 TabbedView 和 DocumentMode，所以它默认看起来像一个 QTabWidget。

当用户单击选项卡切换子窗口时，我想添加一个确认，如果用户选择取消，则活动选项卡不会更改。

我的解决方案是处理信号“subWindowActivated”，如果确认失败，则将“setActiveSubWindow”调用回原来的子窗口。

问题是，setActiveSubWindow 调用没有按预期工作。活动窗口切换回原来的窗口，但子窗口不再最大化，而是重叠。而原来的子窗口出现在用户点击的后面。我可以调用 setWindowState 最大化子窗口，并将焦点设置在它上面，但是子窗口仍然在用户单击的后面。

我想知道在用户单击新子窗口后是否有适当的方法切换回原始子窗口。

下面是一些代码片段

```
MyClass::MyClass()
{
    m_pMdiArea = new QMdiArea;
    m_pMdiArea->setViewMode(QMdiArea::TabbedView);
    m_pMdiArea->setDocumentMode(true);
    connect (m_pMdiArea, SIGNAL(subWindowActivated(QMdiSubWindow *)), this, SLOT(subWindowActivate(QMdiSubWindow *)));
}

void MyClass::subWindowActivate(QMdiSubWindow * window)
{
    if (!window || window == m_pCurrentWindow)
    {
        return;
    }

    if (ConfirmationRejected)
    {
        m_pMdiArea->setActiveSubWindow(m_pCurrentWindow);
        return;
    }

    m_pCurrentWindow = window;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T10:23:12.343

您应该在 Cancel 块中使用：

```
activatePreviousSubWindow (); 
```

# android - Android中的焦点EditText和ListView

> ID：13834253
> 
> 赞同：0
> 
> 时间：2012-12-12T06:44:07.020
> 
> 标签：android, listview, search, focus, android-edittext

我的应用程序中有一个搜索功能。搜索框是一个带有 OnTextChangeListener 的基本 EditText 框。在搜索框下方，我有一个 ListView，它显示搜索查询的结果。当用户开始在搜索框中键入时，就会显示结果。

我面临的问题是键盘覆盖了我的 ListView，因此除非隐藏键盘，否则用户无法看到搜索结果。发生这种情况是因为键盘将出现在 EditText 框的正下方。

一种可能的解决方案是将搜索框放在 ListView 下方，但这在美学上不可行。另一种是用 ViewGroup 封装这两个实体，以尝试将键盘推到下方，因此 ListView 和 EditText 框是可见的。有没有人有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:49:46.807

我认为您可以使用 scrollView 并在 scrollView 中，将您的 editText 和 listView 像：

```
<ScrollView . . .>
    <EditText . . . />
    <ListView . . . />
</ScrollView> 
```

希望它能帮助你解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:00:54.157

我的解决方案：

不是最好的，但我只是通过调整 Y 坐标将 PageLayout 向上移动。

# java - 无法在单个函数中遍历两个 while 循环

> ID：13834255
> 
> 赞同：0
> 
> 时间：2012-12-12T06:44:20.557
> 
> 标签：java, jdbc

第一个 while 循环仅遍历一个记录，然后另一个 while 循环遍历多个记录，但第一个 while 循环没有获得对第二个记录或更远的引用。我使用两个不同的结果集对象和单个语句对象我做错了什么请回复并提前感谢。

```
 public void generateCsvFile()
   {
       String vSQL = "";
       String mSQL = "";
       String mDealer_id = "";
        try
        {
            //mSQL = "mSQL"
            mSQL = "select distinct em_controller_id as dealer_id from entity_master";
            System.out.println("mSQL :: \n"+mSQL);
            rs1 = stmt.executeQuery(mSQL);

            while(rs1.next())
            {           

                //System.out.println("@#@# Dealer id @##@#::"+rs1.getString("dealer_id"));
                mDealer_id = rs1.getString("dealer_id");
                vSQL = "select e.em_entity_id,e.em_name,e.em_address_line_1,e.em_address_line_2,e.em_address_line_3,e.em_phone_no_1,e.em_phone_no_2,e.em_dob,e.em_pan_no,e.em_exch_client_id from entity_master e where e.em_controller_id='"+mDealer_id+"'";   
                System.out.println("vSQL :: \n"+vSQL);
                rs = stmt.executeQuery(vSQL);

                FileWriter writer = new FileWriter(mDealer_id+".csv");

                while(rs.next())
                {

                    System.out.println("em_entity_id !@!@!('"+mDealer_id+"') :: "+rs.getString("em_entity_id"));
                    System.out.println("ENTITY :: "+rs.getString("em_entity_id"));
                    writer.append(rs.getString("em_entity_id"));
                    writer.append(',');
                    writer.append(rs.getString("em_name"));
                    writer.append(',');
                    writer.append(rs.getString("em_address_line_1"));
                    writer.append(',');
                    writer.append(rs.getString("em_address_line_2"));
                    writer.append(',');
                    writer.append(rs.getString("em_address_line_3"));
                    writer.append(',');
                    writer.append(rs.getString("em_phone_no_1"));
                    writer.append(',');
                    writer.append(rs.getString("em_phone_no_2"));
                    writer.append(',');
                    writer.append(rs.getString("em_dob"));
                    writer.append(',');
                    writer.append(rs.getString("em_pan_no"));
                    writer.append(',');
                    writer.append(rs.getString("em_exch_client_id"));
                    writer.append('\n');
                }
                rs.close();
//              //generate whatever data you want
                writer.flush();
                writer.close();

            }
            rs1.close();

        }
        catch(Exception e)
        {
             e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T06:53:50.697

我怀疑这是问题所在：

```
rs1 = stmt.executeQuery(mSQL);
// later...
rs = stmt.executeQuery(vSQL); 
```

看起来您`Statement`对两个并发查询使用相同的。我对那失败并不感到惊讶。使用两个单独`Statement`的变量 - 理想情况下，在您的方法中声明的变量。还：

*   您还应该关闭`finally`块内的所有内容，这样即使抛出异常，您仍然可以关闭它们。
*   您应该使用参数化 SQL 而不是这样的代码：

    ```
    where e.em_controller_id='"+mDealer_id+"'" 
    ```

*   您应该使用连接而不是执行 N+1 查询

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T06:53:48.953

从 Java API：

> 默认情况下，每个 Statement 对象只能同时打开一个 ResultSet 对象。因此，如果一个 ResultSet 对象的读取与另一个 ResultSet 对象的读取交错，则每个对象都必须由不同的 Statement 对象生成。Statement 接口中的所有执行方法都会隐式关闭语句的当前 ResultSet 对象（如果存在打开的对象）。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Statement.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Statement.html)

# javascript - 内联javascript函数调用-元素列表后缺少]

> ID：13834257
> 
> 赞同：2
> 
> 时间：2012-12-12T06:44:24.050
> 
> 标签：javascript, jquery, syntax-error, inline

我有一个代码：

```
var data = $('<span onclick="someFunction(' + element + ');"><a href="#">Element information</a></span>'); 
```

其中元素是一个对象。

另外，我定义了一个函数：

```
someFunction: function(element) {
   console.log(element);
   .... // some code
} 
```

但是当 span 元素尝试调用该函数时，我得到了错误：

```
SyntaxError: missing ] after element list 
someFunction([object Object]); 
```

当我调试它时`Firebug`，我看到

```
<span onclick="someFunction([object Object]);">
   <a href="#">Element information</a>
</span> 
```

我通常如何以具体元素作为参数调用该函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T06:51:54.527

您将无法传递该元素，因为它在您的连接中转换为字符串。当对象转换为字符串时，它输出：[Object object]。这就是您在调试中看到的。

我的建议：您可以将元素作为数据添加到跨度中，例如：

> $('span).data('element', element);

并在 someFunction 中像这样检索它：

> var element = $(this).data('element');

另一种选择是在初始化元素的位置绑定到单击 Javascript。像这样

```
function anotherFunction() {
  var element = {};

  // Initialize element
  ...

  // I have already got the element initialized, now I can bind the click
  $('span').click(function() {
    // For your debug and validation
    console.log(JSON.stringify(element));
  });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:05:41.247

如果你尝试用 jQuery 构建一些 DOM 元素，你应该这样做：

```
// Wrong: $('<span onclick="someFunction(' + element + ');"><a href="#">Element information</a></span>');
// Right: build up the element step by step
var data = $('<span/>')
           .append(
               // build up the child <a> element here
               $('<a href="#"/>')
               .text("Element information")
               //.attr('href',"#") Don't really need this
           )
           .click(
               // Here is a real inline function
               function(){
                   someFunction(element);
               }
           ); 
```

注意：`.click`在 jQuery 中可用于为 Click 事件分配事件处理程序。

* * *

在您的原始代码中，您尝试将字符串与对象连接起来，这将导致应用于`toString`该对象，将其转换为字符串：

```
console.log((new Object()).toString()); // [object Object]
console.log("blah" + (new Object())); // blah[object Object] 
```

在您的代码中，您的对象似乎实际上是一个 jQuery 对象，但它不会产生任何差异。

所以用来形成的“代码”`onclick`是*无效*的：

```
someFunction([object Object]); 
```

`[`并且`]`用于在 JavaScript 中构造一个数组，就像`[1, 2]`一个包含两个元素的数组一样。但是`[object Object]`，这是一个无效的 JavaScript 语法，因此您会收到错误消息。

无论如何，这不是使用事件构建 DOM 元素的正确方法，即使使用 jQuery 也是如此。上面显示了正确的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-29T04:11:42.213

你也可以试试：

`var data = $('<span onclick="someFunction(' + JSON.stringify(element) + ');"><a href="#">Element information</a></span>');`

功能：

`someFunction: function(element) { console.log(element); .... // some code }`

调用时应返回 JSON 对象。

# jsf-2 - p:commandlink 里面的 ui:repeat

> ID：13834260
> 
> 赞同：0
> 
> 时间：2012-12-12T06:44:42.710
> 
> 标签：jsf-2, primefaces, commandlink, uirepeat

在我们的应用程序中，我们动态显示菜单。我们的菜单对象（下面代码中的菜单项）填充了所有菜单项（从 xml 读取）。然后主页通过使用 ui:repeat 生成菜单。Insdie ui:repeat 还有p:commandlink。下面是代码

```
 <h:form id="mainMenu">
    <h:panelGroup id="MMPanel" layout="block" styleClass="left_menu">
        <ui:repeat var="node" value="#{menuitems.level1menus}">
            <p:commandLink immediate="true" styleClass="menu" 
                action="#{menuitems.onLevel1MenuChange(node.id)}"
                update=":pageTitle :menuLevel2 :menuLevel3" title="#{node.name}" 

                rendered="#{menuitems.selectedLevel1.id!=node.id}" onclick="menuSelect(this)">
                <span class="icon icon_#{node.name}"></span>
                <span class="text">#{node.name}</span>
</p:commandLink>

                <p:commandLink immediate="true" styleClass="menu activelink" 
                action="#{menuitems.onLevel1MenuChange(node.id)}"
                update=":pageTitle :menuLevel2 :menuLevel3" title="#{node.name}"

                rendered="#{menuitems.selectedLevel1.id==node.id}"  onclick="menuSelect(this)">
                <span class="icon icon_#{node.name}"></span>
                <span class="text">#{node.name}</span>
    </p:commandLink>

        </ui:repeat>
        </h:panelGroup>         
    </h:form> 
```

menuitems bean 处于会话级别。ui:repeat 中有两个不同的 p:commandlink。两者之间的唯一区别在于样式类和渲染属性。这样做是为了在用户第一次登录时识别**默认**菜单项并为其提供额外的“activeLink”css。下面给出了 onclick 调用的 java 脚本（如果需要）

```
 function menuSelect(selectOne){
        $(".left_menu>a").removeClass("activelink");
        $(selectOne).addClass("activelink");
        removeAllChannels();
    }
    function removeAllChannels(){
            $.atmosphere.unsubscribe();
      } 
```

removeAllChannels 是为了删除我们拥有的 primepush 自动刷新通道。

我面临的问题是这个。所有链接都正确呈现，在 Firebug 中我看到所有链接都具有相同的 html。但是使用额外的 css“activeLink”（通过渲染条件 -- menuitems.selectedLevel1.id==node.id）生成的那个不起作用。当我单击此**默认**链接时，没有任何反应。所有其他链接工作正常。因此，当我单击不同的链接时，它会将我带到所需的页面。但是当我返回默认菜单时，什么也没有发生，我添加了一个自定义阶段侦听器，并看到单击此链接时调用了所有生命周期阶段，但操作方法没有。我浏览了[这个](https://stackoverflow.com/questions/11519884/pcommandlink-doesnt-work-with-uirepeat)和[这个](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)的链接，但无法找出问题所在。请帮忙。如果有不清楚的地方请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:04:10.203

作为防止篡改/黑客请求的一部分，`rendered`在处理表单提交期间重新评估 JSF 组件的属性。在命令链接/按钮的情况下，如果它评估`false`，那么它的动作将不会被排队/调用。这与您看到的症状相符。

如果托管 bean 是请求范围的和/或在回发请求期间`#{menuitems}`后面的属性`#{menuitems.level1menus}`或不兼容地更改时，这又会发生。`#{menuitems.selectedLevel1}`

将 bean 放入视图范围并确保 getter 不做任何业务工作应该可以解决这个问题。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)
*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)- 第 5 点适用于您

# javascript - 如何使用 javascript 更改特定的 css 元素？

> ID：13834262
> 
> 赞同：-1
> 
> 时间：2012-12-12T06:44:44.253
> 
> 标签：javascript, css, user-interface, web

任何建议将不胜感激，我相信这对你们中的一些网络向导来说很简单。非常感谢您的宝贵时间。

当用户将鼠标悬停在 .png 上时，我有一些 css 正在改变它的显示部分：

```
.small_icons ul li.companyButton .circle {background-position:0 0;}
.small_icons ul li.companyButton:hover .circle {background-position:0 -56px;} 
```

然后，当用户单击图像时，我想将位置保持在 0 -56px，并在用户单击其他图像时切换回 0 0。这一切都发生在同一页面上，所以我想我必须使用 javascript onclick 函数。

我似乎无法弄清楚如何使用 javascript 访问特定的 css 元素。我试过了：

```
document.getElementByClass("circle").style.background-position:0 -56px; 
```

但这并没有改变任何事情。是因为 .circle 是 .companyButton 的子类，它是 .small_icons 的子类吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T06:49:17.273

你弄乱了类型

`document.getElementsByClass("circle")`是`Nodelist`（[像数组这样的对象](https://developer.mozilla.org/en-US/docs/DOM/NodeList)）。所以你应该遍历它，或者使用

```
 document.getElementsByClass("circle")[0].style.background-position="0 -56px"; 
```

循环通过你需要

```
var circles=document.getElementsByClass("circle")
for (var index=0;index<circles.length;index++) {
  circles[index].style.background-position="0 -56px";
} 
```

[更多](https://developer.mozilla.org/en-US/docs/DOM/Using_dynamic_styling_information)关于 dinamyc 造型的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:49:05.537

你需要做

```
document.getElementsByClassName("circle")[0].style.backgroundPosition:0 -56px; 
```

[**在此处**](http://www.w3schools.com/jsref/dom_obj_style.asp#background)阅读有关它的更多信息[](http://www.w3schools.com/jsref/dom_obj_style.asp#background)

# java - JUnit 报告未显示使用类别和 ANT 时测试的所有类

> ID：13834264
> 
> 赞同：2
> 
> 时间：2012-12-12T06:44:56.883
> 
> 标签：java, ant, junit

使用 ANT 脚本运行 JUnit 测试，一组测试 (TestSCF) 是所有测试的子集。这些测试将作为夜间构建的一部分运行并生成报告。使用@IncludeCategory 定义需要运行的测试，使用ClasspathSuite 定位项目中的所有测试。

一个示例测试类声明，定义为作为 T​​estSCF 子集运行。TestSCF 是一个空接口。

```
@Category(TestSCF.class)
public class ErrorDialogTest extends TestCase
{
    ....
} 
```

主要测试套件。

```
@RunWith(Categories.class)
@IncludeCategory(TestSCF.class)
@SuiteClasses({AllTests.class})
public class SCFTests
{
} 
```

AllTests 声明

```
@RunWith(ClasspathSuite.class)
public class AllTests
{
} 
```

ANT 脚本的相关部分

```
<!-- Run the unit tests -->
<junit showoutput   ="true"
       printsummary = "yes"
       fork         = "yes"
       timeout      = "60000" >
  <formatter type="xml"/>
  <classpath refid="cpath"/>

  <batchtest fork  = "yes"
             todir = "${test.report.dir}">
    <fileset dir="${src.dir}">
      <include name="**/SCFTests.java"/>
    </fileset>
  </batchtest>
</junit>

<!-- Copy the XML files that get deleted by junitreport -->
<mkdir dir="${junit.html.dir}/xml_files"/>
<copy todir="${junit.html.dir}/xml_files" preservelastmodified="true">
  <fileset dir="${test.report.dir}">
      <include name="*.xml"/>
  </fileset>
</copy>

<!-- Format the test results into browsable HTML -->
<junitreport todir="${junit.html.dir}">
  <fileset dir="${test.report.dir}">
    <include name="TEST-*.xml"/>
  </fileset>
  <report format="frames" todir="${junit.html.dir}"/>
</junitreport> 
```

问题是 Junit 报告只显示了一个经过测试的类 - SCFTests。我理解为什么会发生这种情况，但想知道是否有一种方法可以为每个实际测试的类生成报告，或者有一种方法可以将测试的类的名称添加到测试结果的“名称”中报告。

例如：

```
dev.sca.test.ErrorDialogTest 45 Passed, 3 Failures, 0 Errors 
```

与

```
SCFTests 45 Passed, 3 Failures, 0 Errors 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T01:18:53.687

为了将来参考，我可以通过如下修改 junit-frames.xsl 文件来获得在报告的“名称”列中打印的类路径。

在下面

```
<td>
  <a name="{@name}"/>
  <xsl:choose>
    <xsl:when test="boolean($show.class)">
      <a href="{concat($class.href, '#', @name)}"><xsl:value-of select="@name"/></a>
    </xsl:when>
    <xsl:otherwise>
      <xsl:value-of select="@name"/>
    </xsl:otherwise>
  </xsl:choose>
</td> 
```

变成

```
<td>
  <a name="{@name}"/>
  <xsl:choose>
    <xsl:when test="boolean($show.class)">
      <a href="{concat($class.href, '#', @classname)}"><xsl:value-of select="@classname"/></a>
    </xsl:when>
    <xsl:otherwise>
      <xsl:value-of select="@classname"/>
    </xsl:otherwise>
  </xsl:choose>
</td> 
```

结果是：

```
Name                         Status Type    Time(s)
dev.sca.test.ErrorDialogTest Success        1.45
dev.sca.test.SomeOtherTest   Success        2.03 
```

# c# - 使用千位分隔符将字符串值转换为十进制？

> ID：13834265
> 
> 赞同：1
> 
> 时间：2012-12-12T06:44:58.377
> 
> 标签：c#

这可能是一个非常简单的问题。假设文本框显示值 10,000.12，当用户错误地编辑数据时，他删除了前两个数字，如 ,000.12 并在计算中使用此文本框，然后它给出了异常。我想要一个刚刚验证的文本框。

例如：字符串 str = ",100.12;" 转换为十进制数 = 100.12；

任何想法？。

当用户删除任何千位分隔符时，它只显示整数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:03:06.833

如果我理解了这个问题，您想删除所有会阻止解析例程失败的字符。

```
string str = ",0,100.12";

var modified = new StringBuilder();
foreach (char c in str)
{
    if (Char.IsDigit(c) || c == '.')
        modified.Append(c);
}

decimal number= decimal.Parse(modified.ToString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:55:39.907

这很混乱，我不确定你们所有的字符串是否看起来都一样，但如果他们这样做可能会奏效：

```
string str = ",0,100.12";
decimal number;
bool converted = decimal.TryParse(str.Substring(str.LastIndexOf(",") + 1), out number); 
```

该变量`converted`会告诉你你的字符串是否被转换并且你不会例外。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T07:08:09.277

```
string a = "100.12";
decimal b = Convert.ToDecimal(a); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T07:24:05.927

```
string str = ",0,100.12;";
var newstr = Regex.Replace(str,@"[^\d\.]+","");
decimal d = decimal.Parse(newstr, CultureInfo.InvariantCulture); 
```

# tel - 使用电话提示

> ID：13834270
> 
> 赞同：0
> 
> 时间：2012-12-12T06:45:37.133
> 
> 标签：tel, telprompt

我需要从我的应用程序中创建呼叫功能。我使用 tel:// 控件不会自动返回应用程序。如果使用 telpromp，则会在呼叫前显示警报。我的第一个问题是应用商店会拒绝 telprompt 吗？如果没有，那么我不希望警报来。应该直接调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:52:05.903

我建议您只能通过提交您的应用程序来找到第一个问题的答案。至于您的第二个问题，iOS 应用程序必须显示询问用户是否要拨打号码的提示。这必须以一种或另一种方式完成（电话，telprompt）。如果应用程序没有提醒用户，它将被 AppStore 拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T14:17:23.473

我知道这很旧，但我确实发现有几个人声称他们的应用程序已使用 telprompt 获得批准：

“我已经提交了我的应用程序，该应用程序使用 telprompt 和共享应用程序，没有 uiwebkit，并已成功获得苹果批准。2013 年 1 月 19 日回答

巴勃罗·亚历杭德罗·荣格"

# pdfsharp - 如何在 pdfsharp 中更改 XGraphics 的剪辑区域？

> ID：13834280
> 
> 赞同：3
> 
> 时间：2012-12-12T06:46:15.657
> 
> 标签：pdfsharp, clip

我对设置 XGraphics 的剪切区域有点困惑，pdfSharp 只提供了一个 IntersectClip 方法，这意味着如果我想更改剪切区域，该区域会变得越来越小（与前一个区域相交），有人知道吗无论如何可以自由设置剪切区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:17:20.793

似乎 IntersectClip 是唯一可用的剪辑功能。
我没有发现问题：您可以使用“保存和恢复”返回到之前的剪辑区域。在第一个 IntersectClip 之前使用 Save，以便您可以返回到默认区域。然后使用 IntersectClip 设置您想要的区域，并在您完成该区域并需要另一个区域时调用 Restore。

# objective-c - 在一个方法中停止执行以调用另一个方法然后继续

> ID：13834284
> 
> 赞同：0
> 
> 时间：2012-12-12T06:46:44.900
> 
> 标签：objective-c

在objective-c中处理这种情况的最佳方法是什么。在我对远程 API 的所有调用中，我需要确保我首先拥有令牌。如果可能的话，我宁愿在每次通话之前都不检查令牌。

```
DO NOT WANT TO DO THIS FOR EVERY API CALL!
#if (token) { 
   makeGetForTweetsRequestThatRequiresToken
 } 
```

如果我需要一个令牌，也许它已过期，该调用可能需要一些时间才能返回，所以我需要等待它返回，然后再进行下一次 API 调用。是否可以执行以下操作？

```
[thing makeGetForTweetsRequestThatRequiresToken];

-(void)makeGetForTweetsRequestThatRequiresToken {
      if(nil == token) {

         // make another API call to get a token and save it
         // stop execution of the rest of this method until the
         // above API call is returned.

      } 

      //Do the makeGetForTweetsRequestThatRequiresToken stuff
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:39:43.150

我认为您的令牌 API 将有一个回调。您可以注册一个块来处理该回调到您的 TweetsRequest API：

```
typedef void (^TokenRequestCompletionHandler)(BOOL success, NSString *token);

-(void) requestTokenCompletionHandler:(TokenRequestCompletionHandler)completionHandler
{
    //Call your token request API here.
    //If get a valid token, for example error==nil
    if (!error) {
        completionHandler(YES,token);
    } else {
        completionHandler(NO,token);
    }
} 
```

在您的推文请求中：

```
-(void)makeGetForTweetsRequestThatRequiresToken {
  if(nil == token) {

     // make another API call to get a token and save it
     // stop execution of the rest of this method until the
     // above API call is returned.
     [tokenManager requestTokenCompletionHandler:^(BOOL success, NSString *token){
         if (success) {
           //Do the makeGetForTweetsRequestThatRequiresToken stuff

         } else {
           NSLog(@"Token Error");
         }
     }];
  } else {
    //You have a token, just Do the makeGetForTweetsRequestThatRequiresToken stuff
  }
} 
```

# sqlite - 编译时更改 webkit 中的默认 sqlite 数据库路径

> ID：13834285
> 
> 赞同：0
> 
> 时间：2012-12-12T06:46:45.150
> 
> 标签：sqlite, compilation, webkit, arm

我正在为 ARM 目标编译 webkit。有没有办法更改 webkit 存储 sqlite db 的默认路径。我可以在 webkit 中对其进行硬编码吗？

我现在收到此错误：

```
ERROR: SQLite database failed to load from /.local/share/webkit/icondatabase/WebpageIcons.db
Cause - unable to open database file
Source/WebCore/platform/sql/SQLiteDatabase.cpp(70) : bool WebCore: QLiteDatabase: pen(const WTF: tring&, bool)
ERROR: Unable to open icon database at path /.local/share/webkit/icondatabase/WebpageIcons.db - out of memory
Source/WebCore/loader/icon/IconDatabase.cpp(990) : void* WebCore::IconDatabase::iconDatabaseSyncThread() 
```

我想将 /.local/share/webkit/icondatabase/ 更改为没有读/写问题的不同路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:48:58.720

File ***Source/WebCore/loader/icon/IconDatabase.cpp中的webkit源代码***

硬编码的数据库路径如下：

```
 m_databaseDirectory = "<your_dir_path>"; 
```

对我来说工作得很好。

# jquery - 未捕获的 ReferenceError：未定义 getCookieValue

> ID：13834287
> 
> 赞同：0
> 
> 时间：2012-12-12T06:46:51.810
> 
> 标签：jquery, fancybox

亲爱的社区，我请求您的帮助，这里有一个[拐杖](http://jsfiddle.net/eVta8/2/)，奇怪的是没有出现带有内容的模态窗口，可能超出了框架的范围，在本地它可以工作。问题是，如果用户有厨师，如何使我的窗口不会出现。我不知道如何添加 if(){}。似乎一切都做对了。然而，在添加条件后，在*火袋中*出现输入错误：**Uncaught ReferenceError: getCookieValue is not defined**

但是这种设计不起作用（在体内的位置）：

```
<script type="text/javascript">
    $(document).ready(function() {
        var getCookieValue = $.cookie("visit");
        if (getCookieValue == true) {
            $("a.gallery2").fancybox(
                {                       
                    "padding" : 20, 
                    "imageScale" : false, 
                    "zoomOpacity" : false,  
                    "zoomSpeedIn" : 1000,   
                    "zoomSpeedOut" : 1000,  
                    "zoomSpeedChange" : 1000,
                    "frameWidth" : 700,
                    "frameHeight" : 600, 
                    "overlayShow" : true,
                    "overlayOpacity" : 0.8, 
                    "hideOnContentClick" :false,        
                    "centerOnScroll" : false                
            }).click();
        }
    });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:00:32.303

如果变量未定义，脚本将无法以这种方式编写。

尝试这个：

```
<script type="text/javascript">
    $(document).ready(function() {
        var window.getCookieValue = $.cookie("visit");
        if (window.getCookieValue == true) {
            $("a.gallery2").fancybox(
                {                       
                    "padding" : 20, 
                    "imageScale" : false, 
                    "zoomOpacity" : false,  
                    "zoomSpeedIn" : 1000,   
                    "zoomSpeedOut" : 1000,  
                    "zoomSpeedChange" : 1000,
                    "frameWidth" : 700,
                    "frameHeight" : 600, 
                    "overlayShow" : true,
                    "overlayOpacity" : 0.8, 
                    "hideOnContentClick" :false,        
                    "centerOnScroll" : false                
            }).click();
        }
    });

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:19:09.887

我不清楚您是否只想在 cookie 存在时才显示 fancybox `true`。假设仅当 cookie 值为 时才应显示 fancybox `true`，然后试试这个

```
<script type="text/javascript">
$(document).ready(function() {
  // create cookie "visit"
  var getCookieValue = $.cookie("visit");
  // check if cookie value = true
  if (getCookieValue == "true") {
       $("a.gallery2").trigger("click");
  }
  $.cookie("visit", "true", { expires: 7 }); // set the number of days for cookie
  $("a.gallery2").fancybox({                       
     // API options here
  }); // bind fancybox
});
</script> 
```

在这种情况下，fancybox 不会在第一次访问期间显示，但总是在 cookie 有效的第二次访问之后显示。

另一方面，如果fancybox应该只**在第一次访问时**显示，那么试试：

```
<script type="text/javascript">
$(document).ready(function() {
  // create cookie "visit"
  var getCookieValue = $.cookie("visit");
  // check if cookie value = true
  if (getCookieValue == "true") {
      return false
  } else {
      $("a.gallery2").trigger("click");
  }
  $.cookie("visit:, "true", { expires: 7 }); // set the number of days for cookie
  $("a.gallery2").fancybox({                       
     // API options here
  }); // bind fancybox
});
</script> 
```

在这两个示例中，都假设您在代码中的某处有此 html：

```
<a class="gallery2" href="path/target"></a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:12:21.970

同事！找到了解决方案：

事实证明，不能与变量**getCookieValue**进行比较，因为该变量不是*global*，而是一旦读取条件中的*cookie*并与条件的值进行比较。

这是解决方案：

```
$(document).ready(function() {

    $("a.gallery2").fancybox( {
        "padding" : 20, 
        "imageScale" : false,
        "zoomOpacity" : false,
        "zoomSpeedIn" : 1000,
        "zoomSpeedOut" : 1000,
        "zoomSpeedChange" : 1000,
        "frameWidth" : 700,
        "frameHeight" : 600,
        "overlayShow" : true,
        "overlayOpacity" : 0.8,
        "hideOnContentClick" :false,
        "centerOnScroll" : false
    });

if ($.cookie("visit") == "true") {
    $("a.gallery2").fancybox().click();
}

}); 
```

# date - 维基百科如何计算经过的天数？

> ID：13834291
> 
> 赞同：0
> 
> 时间：2012-12-12T06:47:00.290
> 
> 标签：date, web, timezone, wikipedia

我在 Wikipedia 上看到了很多显示经过的天数的案例。作为一个例子[看这里。](https://en.wikipedia.org/wiki/21st_century)在第二行有文字：

> 本世纪从2001年1月1日开始，到2100年12月31日结束。截至目前，21世纪已经过去了11年343天。

维基百科如何计算经过的天数？它如何与不同的时区一起工作？这甚至适用于禁用 JavaScript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:53:44.587

如果它在禁用 Javascript 的情况下工作，则意味着它是在服务器端计算的。很可能它是由 MediaWiki 中的 PHP 计算的。

以下是有关 Wikipedia 使用的技术的信息：[http ://en.wikipedia.org/wiki/Wikipedia:FAQ/Technical](http://en.wikipedia.org/wiki/Wikipedia:FAQ/Technical)

这是一个 PHP 脚本，用于计算自某个日期以来经过的天数：

```
<?php

     $now = time(); // or your date as well
     $your_date = strtotime("2010-01-01");
     $datediff = $now - $your_date;
     echo floor($datediff/(60*60*24));

?> 
```

要在 Wikipedia 页面上插入该信息：

[http://en.wikipedia.org/wiki/Template:Age_in_days](http://en.wikipedia.org/wiki/Template:Age_in_days)

# delphi - InternetErrorDlg 不保存密码

> ID：13834292
> 
> 赞同：3
> 
> 时间：2012-12-12T06:47:01.500
> 
> 标签：delphi, wininet

我使用 InternetErrorDlg 请求登录名/密码（它是 delphi，但我认为它很清楚）

```
function ShowLoginDlg(Request: HINTERNET): boolean;
var
  DlgError: Cardinal;
begin
  DlgError := InternetErrorDlg(GetDesktopWindow, Request, 0,
    FLAGS_ERROR_UI_FILTER_FOR_ERRORS or
    FLAGS_ERROR_UI_FLAGS_CHANGE_OPTIONS or
    FLAGS_ERROR_UI_FLAGS_GENERATE_DATA, PPointer(nil)^{like NULL in C/C++});
  if DlgError = ERROR_CANCELLED then Abort; // Abort raises exception
  if (DlgError <> ERROR_SUCCESS) and (DlgError <> ERROR_INTERNET_FORCE_RETRY) then
    RaiseLastOSError(DlgError); // RaiseLastOSError raises exception
  Result := DlgError = ERROR_INTERNET_FORCE_RETRY;
end;

while True do
begin
  SendRequest(Request);
  if not ((GetStatusCode(Request) = 401) and ShowLoginDlg(Request)) do
    Continue;
  CheckStatusCode(Request); // raises exception if status code >= 400
end; 
```

并且有一个问题。即使用户勾选“保存密码”，密码并没有真正保存。所以，当我再次关闭并打开我的程序时，网络资源返回 401 给我，我必须再次显示登录对话框。

有任何想法吗？？

如果我按照 RRUZ 的建议添加 FLAGS_ERROR_UI_SERIALIZE_DIALOGS，我不会得到任何效果。我的回调没有被调用并且密码没有被保存。

```
function InternetAuthNotifyCallback(
      dwContext: DWORD; // as passed to InternetErrorDlg
      dwReturn: DWORD; // error code: success, resend, or cancel
      lpReserved: Pointer // reserved: will be set to null
      ): DWORD; stdcall; // stdcall, is it right?
begin
  Result := 0; // What do I have to do??
end;

  type
    PFN_AUTH_NOTIFY = function(
      dwContext:DWORD;
      dwReturn:DWORD;
      lpReserved:Pointer): DWORD; stdcall;
    PINTERNET_AUTH_NOTIFY_DATA = ^INTERNET_AUTH_NOTIFY_DATA;
    INTERNET_AUTH_NOTIFY_DATA = packed record
      cbStruct: DWORD;
      dwOptions: DWORD;
      pfnNotify: PFN_AUTH_NOTIFY;
      dwContext: PDWORD;
    end;

  function ShowLoginDlg(Request: HINTERNET): boolean;
  var
    DlgError: Cardinal;
    PData: Pointer;
    Data: INTERNET_AUTH_NOTIFY_DATA;
  begin
    ZeroMemory(@Data, SizeOf(Data));
    Data.cbStruct := SizeOf(Data);
    Data.pfnNotify := InternetAuthNotifyCallback;
    PData := @Data; // if I set PData := Pointer(1) there is **not** AV!!!!
          // InternetErrorDlg don't use this parameter???
    DlgError := InternetErrorDlg(Application.MainForm.Handle, Request, 0,
      FLAGS_ERROR_UI_FILTER_FOR_ERRORS or
      FLAGS_ERROR_UI_FLAGS_CHANGE_OPTIONS or
      FLAGS_ERROR_UI_FLAGS_GENERATE_DATA or
      FLAGS_ERROR_UI_SERIALIZE_DIALOGS,
      PData); // really InternetErrorDlg get pointer to PData, because in Delphi this param is passed by ref
    if DlgError = ERROR_CANCELLED then Abort;
    if (DlgError <> ERROR_SUCCESS) and (DlgError <> ERROR_INTERNET_FORCE_RETRY) then
      RaiseLastOSError(DlgError);
    Result := DlgError = ERROR_INTERNET_FORCE_RETRY;
  end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:37:57.790

根据有关[`InternetErrorDlg`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384694%28v=vs.85%29.aspx)函数的文档，您必须在方法调用中包含 **FLAGS_ERROR_UI_SERIALIZE_DIALOGS**标志。

> FLAGS_ERROR_UI_SERIALIZE_DIALOGS
> 
> 为密码缓存条目上的并发请求序列化身份验证对话框。lppvData 参数应该包含一个指向 INTERNET_AUTH_NOTIFY_DATA 结构的指针的地址，并且客户端应该实现一个线程安全的、非阻塞的回调函数。

# sql - 如何根据另一个表中的id选择表中的最新行

> ID：13834294
> 
> 赞同：0
> 
> 时间：2012-12-12T06:47:11.157
> 
> 标签：sql, oracle

我有两个表，REPORTS 和 REPORT_TYPE，如下所述。

报告

```
REPORT_TYPE_ID   REPORT_NAME   CREATION_DATE
 100        Report1.pdf    28-Nov-2012
 100       Report1.xls     28-Nov-2012
 100       Report2.pdf     29-Nov-2012
 100       Report2.xls     29-Nov-2012
 101       Report3.pdf     28-Nov-2012
 101       Report3.xls     28-Nov-2012 
```

报告类型

```
 REPORT_TYPE_ID  REPORT_TYPE_DESC
  100        ReportType1
  101        ReportType2 
```

我需要基于 REPORT_TYPE 表中每个报告 ID 的创建日期的最新 pdf 和 xls 报告，以及报告类型描述。
Report_id 是report_type 中的主键和REPORTS 中的外键。
报告名称的 pdf 和 xls 报告的创建日期相同。
如果需要更多详细信息，请发表评论。
有任何想法吗？

这是我尝试过的，但显然没有奏效。我想我需要一些逻辑来将当前迭代的 report_type_id 从外部查询传递到内部查询。

```
SELECT AR.REPORT_TYPE_ID, LK.REPORT_TYPE_DESC, 
         AR.REPORT_NAME, AR.CREATION_DATE                                             
         FROM REPORTS  AR, REPORT_TYPE LK                    
         WHERE AR.REPORT_TYPE_ID = LK.REPORT_TYPE_ID
          AND AR.CREATION_DATE IN 
          (SELECT MAX (CREATION_DATE) FROM REPORTS AR, REPORT_TYPE LK  
          WHERE AR.REPORT_TYPE_ID = LK.REPORT_TYPE_ID) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T06:59:03.017

```
 Select * from REPORTS 
  where (REPORT_ID, CREATION_DATE) 
 in (
   select REPORT_ID, MAX(CREATION_DATE)
  from REPORTS
  group by REPORT_ID) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:01:30.467

试试这个：

```
SELECT 
  r.report_id,
  r.report_name, 
  r.creation_date, 
  t.REPORT_TYPE_DESC
FROM REPORT_TYPE t
INNER JOIN Reports r ON t.REPORT_ID = r.REPORT_ID
INNER JOIN
( 
   SELECT REPORT_ID, MAX(creation_date) maxdate
  FROM reports
  GROUP BY REPORT_ID
 ) m  ON r.Creation_date = m.maxdate
     AND r.REPORT_ID = m.REPORT_ID; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!4/4deb6/4)

对于您发布的示例数据，这将为您提供：

```
| REPORT_ID | REPORT_NAME | CREATION_DATE | REPORT_TYPE_DESC |
--------------------------------------------------------------
|       100 | Report2.xls |   29-Nov-2012 |      ReportType1 |
|       100 | Report2.pdf |   29-Nov-2012 |      ReportType1 |
|       101 | Report3.xls |   28-Nov-2012 |      ReportType2 |
|       101 | Report3.pdf |   28-Nov-2012 |      ReportType2 | 
```

**请注意：**`Report_ID`如果有重复`report_id`的 s 与您的示例数据中的最大日期相同，这将为您提供重复。如果你想消除重复，你可以这样做：

```
WITH cte
AS
(
  SELECT 
    r.report_id,
    r.report_name, 
    r.creation_date, 
    t.REPORT_TYPE_DESC,
    ROW_NUMBER() OVER(PARTITION BY r.report_id 
                      ORDER BY creation_date DESC) AS "rank"
  FROM REPORT_TYPE t
  INNER JOIN Reports r ON t.REPORT_ID = r.REPORT_ID
 ) 
SELECT REPORT_ID, REPORT_NAME, CREATION_DATE,   REPORT_TYPE_DESC
FROM CTE 
WHERE "rank" = 1; 
```

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!4/4deb6/16)

这会给你：

```
| REPORT_ID | REPORT_NAME | CREATION_DATE | REPORT_TYPE_DESC |
--------------------------------------------------------------
|       100 | Report2.pdf |   29-Nov-2012 |      ReportType1 |
|       101 | Report3.pdf |   28-Nov-2012 |      ReportType2 | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T07:02:26.003

```
select  r1.report_id, r1.report_name, r1.creation_date, r2.report_type_desc
from reports r1 join report_type r2 on r1.report_id = r2.report_id 
where r1.creation_date in 
                        (
                         select max(creation_date) 
                         from reports 
                         where report_id = r1.report_id
                        ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T06:56:54.607

```
Select * 
  from REPORTS 
  where (REPORT_ID, CREATION_DATE) in (
    select REPORT_ID, MAX(CREATION_DATE)
      from REPORTS
      group by REPORT_ID
  ) 
```

这将为您提供所有最新文件。显然可以过滤。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T06:57:49.090

试试这个

```
select report_name,report_type_desc inner join
 on reports.id=report_type.id 
 where creationdate=max(creationdate)
 group by reports.id,report_name 
```

# web-services - CakePHP2.X : 如何在使用 RESTful Web 服务时编写编辑方法

> ID：13834296
> 
> 赞同：2
> 
> 时间：2012-12-12T06:47:15.757
> 
> 标签：web-services, cakephp, rest

我正在使用 cakephp2.2 版本，我遵循了 url [http://book.cakephp.org/2.0/en/development/rest.html上提供的文档](http://book.cakephp.org/2.0/en/development/rest.html)

现在在编辑方法中，`edit.ctp`包含要放置的编辑表单是什么`views/receip/xml/.`

当我将编辑表单放入`Views/Receip/xml/`文件夹时，会生成 xml 类型的表单：

每个人都为 index 方法代码编写代码，但没有人为 edit 方法代码编写代码。有人可以指导如何编写编辑方法，所以如果我发送`recipes/edit/1.xml`我会得到填充数据的 html 表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:53:32.903

XML 视图应该看起来非常接近示例中的索引视图，除了它吐出的变量。

我假设您使用与示例中相同的编辑功能：

```
public function edit($id) {
    $this->Recipe->id = $id;
    if ($this->Recipe->save($this->request->data)) {
        $message = 'Saved';
    } else {
        $message = 'Error';
    }
    $this->set(array(
        'message' => $message,
        '_serialize' => array('message')
    ));
} 
```

正如书中所说：

> 您还可以使用 CakePHP 内置的 JSON 和 XML 视图轻松制作 JSON 视图。通过使用内置的 XmlView，我们可以定义一个 _serialize 视图变量。这个特殊的视图变量用于定义 XmlView 应该序列化为 XML 的视图变量。

但是，如果您不使用内置视图，则可以像这样在视图中手动指定 XML（确保将`_serialize`视图变量从`edit`函数中取出，这样它就不会自动生成您的 XML）。

视图应如下所示：

```
$xml = Xml::fromArray(array('message' => $message));
echo $xml->asXML(); 
```

这将输出一个非常基本的 XML 文档，其中包含成功消息作为节点。您可以随意添加更多信息。例如，如果更新失败，您应该通过在 XML 响应中包含验证错误来告诉您的用户哪些内容未验证。

# asp.net - 人员选择器丢失数据

> ID：13834297
> 
> 赞同：0
> 
> 时间：2012-12-12T06:47:26.380
> 
> 标签：asp.net, sharepoint, sharepoint-2010, peoplepicker

我使用带有菜单控件的 asp.net 多视图控件在 aspx 页面中创建了 3 个选项卡。我在第一个选项卡和第三个选项卡中有 2 个人编辑器控件。当我在第一个选项卡中输入我的用户名并返回第三个选项卡并再次进入第一个选项卡时，人员选择器失去了价值。

如何保留 peoplepicker 中的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:56:59.630

如果您不介意使用隐藏字段，可以使用隐藏字段，将 2 个隐藏字段与您的 2 人编辑器控件一起使用。更改选项卡时，在特定隐藏字段中设置人员编辑器的值，并在页面加载时检查隐藏字段值，如果隐藏字段不为空，则在特定人员编辑器中设置隐藏字段值。

谢谢。

# javascript - 如何将脚本中的值和输出绑定到 Html

> ID：13834300
> 
> 赞同：0
> 
> 时间：2012-12-12T06:47:44.330
> 
> 标签：javascript

如何将 json 值绑定到脚本并需要 html 中的输出。我试图获取天气的数据和图像，但没有解决方案。帮我

这是一个jQuery示例

```
$(function(){
   $.getJSON("http://query.yahooapis.com/v1/public/yql", {
      q: "select * from json where url=\"http://api.wunderground.com/api/91bbc8aab3ab1f34/geolookup/conditions/q/IN/Chennai.json\"",
      format: "json"
}, function(data) {
   var $content = $("#content")
   if (data.query.results) {
     $content.text(JSON.stringify(data.query.results));
   } else {
      $content.text('no such code: ' + code);
   }

 });
});​ 
```

html中的代码

```
<script type="text/javascript" src="http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script> 
```

内容是 div，图标是图像标签

```
<div id="content">
<img id="weather_icon" /> 
```

当我运行应用程序时，它只需要数据。我需要来自 api 的天气图像和数据。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:33:42.930

试试这个，能够显示天气图标。我修改了 jQuery 以通过将 url 设置为图像标签来显示图像。只需挖掘您希望在内容 div 中显示的数据。

```
 $(function(){
        $.getJSON("http://query.yahooapis.com/v1/public/yql", {
            q: "select * from json where url=\"http://api.wunderground.com/api/91bbc8aab3ab1f34/geolookup/conditions/q/IN/Chennai.json\"",
            format: "json"
            }, 
            function(data) {
                // Dig for the data from the JSON object. 
                //  The image URL can be found at: query > results > json > current_location > icon_url
                $('#weather_icon').attr('src', data.query.results.json.current_observation.icon_url);
                //  Do the same for any data you want displayed for the content to be displayed..
            });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:13:13.277

根据你提供的小提琴..

我用 full 来显示城市名称`<p id="temp"></p>`。

```
$('#temp').html(data.query.results.json.current_observation.display_location.full); 
```

这是小提琴

[http://jsfiddle.net/SH7Ku/1/](http://jsfiddle.net/SH7Ku/1/)

**更新**

这是更新的小提琴....有温度

[http://jsfiddle.net/SH7Ku/2/](http://jsfiddle.net/SH7Ku/2/)

同样你可以做休息...

# jquery - IE7中的jQuery幻灯片问题

> ID：13834303
> 
> 赞同：0
> 
> 时间：2012-12-12T06:47:54.303
> 
> 标签：jquery, html, css, internet-explorer-7, compatibility

我在IE7上的幻灯片效果有点问题。我有一个包含以下代码的嵌套列表

```
 <div class="left_panel_body">
        <ul class="side_panel_list" style="margin-top:53px">
            <li id="click"><a>PQR</a></li>
                <div id="dropdown" style="display:none;">
                <ul style="list-style:none">
            <li><a href="#" style="padding-left:20px">xyz</a></li>
            <li><a href="#" style="padding-left:20px">xyz</a></li>
            <li><a href="#" style="padding-left:20px">xyz</a></li>
            </ul>
                </div>
            <li><a href="#">abc</a></li>
            <li><a href="#">abc</a></li>
            <li><a href="#">abc</a></li>
        </ul>
        </div> 
```

而css如下

```
 #click {background-color: rgb(234, 234, 234);
height: 24px;
margin-top: 2px;
width: 99%;}

   #dropdown {display:none}

    .side_panel_list li {background-color: rgb(234, 234, 234);
height: 24px;
margin-top: 2px;
width: 99%;} 
```

虽然我的头上有以下脚本

```
 <script> 
    $(document).ready(function(){
    $("#click").click(function(){
    $("#dropdown").slideToggle("slow");
    });
    });
    </script> 
```

没有太多的CSS应用不用说#click启动幻灯片onclick并且#dropdown是向下滑动并在另一次点击时向后滑动的元素......如果在所有浏览器中看起来都很好但在IE7中li不会向下滑动以腾出空间#dropdown 而#dropdown 最终落在下面的li 后面......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:42:00.273

您可能需要为 IE7 添加一些额外的 CSS 才能正确查看。

无论如何，我们需要更多的代码来给你一个好的答案。在这种情况下，您甚至可能想提供一个 URL，以便我们检查 CSS。

另外，请考虑提高您的接受率。

# r - ddply 函数总和出错？

> ID：13834310
> 
> 赞同：5
> 
> 时间：2012-12-12T06:48:32.393
> 
> 标签：r, plyr

第一次在这里发帖！我在使用 ddply 函数时遇到问题。我有这张表，我想使用“LC”列进行总结，并在“Area”列中添加值：

```
 ID LC  per     Area
1  1  7 0.29  62428.3
2  1  7 0.79 170063.3
3  1  4 0.40  86108.0
4  1  7 0.43  92566.1
5  1  6 1.00 215270.0
6  1  7 0.61 131314.7 
```

基于这个数据框，我希望完全是这样的：

```
LC   Area
4  86108.0
6 215270.0
7 456372.4 
```

应用 ddply 函数，我得到以下结果：

```
> ddply(x, 'LC', sum)
  LC       V1
1  4  86113.4
2  6 215278.0
3  7 456406.5 
```

格式是完美的，但值存在一些差异。例如，第 7 类的值应为 456372.4，而 ddply 报告的值为 456406.5。相差34.1。所有的值都计算错误。

有人可以解释我为什么会遇到这个问题吗？我在这里错过了什么吗？我的代码错了吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T06:56:03.757

你的方法有两个问题：

*   `ddply` *您*需要告诉总和 ( `Area`)。如果不指定列，则对*所有*列（、和）`ddply`的值求和。*`ID``per``Area`*
**   您可以使用参数聚合数据`summarise`。*

 *此代码有效：

```
x <- read.table(text="  ID LC  per     Area
1  1  7 0.29  62428.3
2  1  7 0.79 170063.3
3  1  4 0.40  86108.0
4  1  7 0.43  92566.1
5  1  6 1.00 215270.0
6  1  7 0.61 131314.7", header = TRUE)

library(plyr)

ddply(x, .(LC), summarise, sum(Area)) 
```

结果：

```
 LC      ..1
1  4  86108.0
2  6 215270.0
3  7 456372.4 
```*

# gcc - 无法使用 GCC 将特殊部分映射到图像箱中的指定位置

> ID：13834319
> 
> 赞同：0
> 
> 时间：2012-12-12T06:49:15.090
> 
> 标签：gcc

我在我的程序中定义了一个特殊的数据部分，如下所示：

```
const qlEntry GADLENTRY __attribute__((section(".initdata"))) = 
{
    //...
} 
```

我希望这个特殊部分放在图像箱的标题中。

我的 .ld 文件是这样写的。

```
MEMORY
{
    rom (rx) :  ORIGIN = 0x08540000, LENGTH = 0x100000
    ram (rwx) : ORIGIN = 0xA0200000, LENGTH = 0x200000
}

SECTIONS
{
    . = 0x08540000;
        .rodata : 
{
    *(.initdata)
    *(.rodata)
}
    .data : 
{ 
    *(.data) 
}
    .bss : 
{ 
    *(.bss) 
}
text : 
{ 
    *(.text) 
}
} 
```

}

但是在构建之后，我在 .map 文件中查看：

```
.initdata       0x0854b304       0x2c
 .initdata      0x0854b304       0x2c ql_Main.o
                0x0854b304                GADLENTRY 
```

有什么问题？我怎样才能得到正确的垃圾箱。

```
 *(.initdata)
 .initdata      0x08540000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:43:43.710

为类似内容创建一个单独的输出部分`.initdata`：

```
SECTIONS
{
    . = 0x08540000;

    .initdata : { *(.initdata) }

    .rodata : { *(.rodata) }

... 
```

使用您的原始链接器脚本文件，将其他内容放在前面`.initdata`，检查映射文件是什么。

确保您已经描述了链接描述文件中的每个输入部分。

例如，如果`.gnu.linkonce.r*`您的输入文件中有部分，它们可能最终在第一个内存区域中，其属性与该部分属性一致，在这种情况下是`rom`区域，这可能会导致您观察到的结果。

# php - 在 PHP 中计算到期日

> ID：13834320
> 
> 赞同：1
> 
> 时间：2012-12-12T06:49:15.933
> 
> 标签：php, datetime, whmcs

我的一位同事最近在我们的计费系统中安装了一个开源脚本。目的是当客户的服务被延迟支付时，重新计算服务的下一个到期日。例如，服务于 2012 年 11 月 20 日到期，第二天暂停，然后他们在 2012 年 11 月 25 日付款。该脚本本应将下一个到期日期更新为 2012 年 12 月 25 日，但由于某种原因，该脚本出现故障并更改（每月）应为 2012 年 12 月 25 日至 2013 年 1 月 25 日的日期。

我认为问题在于处理 $month 变量的方式，但不能完全弄清楚问题出在哪里。

```
function calculate_postpone_due_date($billingcycle)
{
    switch($billingcycle)
    {
        case "Monthly":         $months = 1; break;
        case "Quarterly":       $months = 3; break;
        case "Semi-Annually":   $months = 6; break;
        case "Annually":        $months = 12; break;
        case "Biennially":      $months = 24; break;
        case "Triennially":     $months = 32; break;
        default:                $months = 0; break;
    }

    //we return FALSE for any other billing cycles: "One Time", "Free Account" etc, they are not recurring
    if ($months == 0)
    return FALSE;

    //a bit complex calculation based on day of the month
    //exactly like native whmcs logic do
    $year = date("Y");
    $month = date("m");
    $day = date("d");
    for ($i=1; $i<=$months; $i++)
    {
        $month++;
        if ($month == 13)
        {
            $month = 1;
            $year++;
        }
    }

    if (checkdate("$month", $day, $year))
    {
        return "$year-$month-$day";
    }
    else
    {
        //getting last day of the month
        $last_day = date("t", mktime(0, 0, 0, $month, 1, $year));
        return "$year-$month-$last_day";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:13:20.440

```
function calculate_postpone_due_date($billingcycle)
{
    switch($billingcycle)
    {
        case "Monthly":         $months = 1; break;
        case "Quarterly":       $months = 3; break;
        case "Semi-Annually":   $months = 6; break;
        case "Annually":        $months = 12; break;
        case "Biennially":      $months = 24; break;
        case "Triennially":     $months = 36; break;
        default:                $months = 0; break;
    }

    if ($months == 0)
        return FALSE;    

    $today = date('Y-m-d');
    $next_due_date = strtotime($today.' + '.$months.' Months');
    return date('Y-m-d', $next_due_date);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:58:24.163

试试这个（未测试）：

```
function calculate_postpone_due_date($billingcycle)
{
    switch($billingcycle)
    {
        case "Monthly":         $months = 1; break;
        case "Quarterly":       $months = 3; break;
        case "Semi-Annually":   $months = 6; break;
        case "Annually":        $months = 12; break;
        case "Biennially":      $months = 24; break;
        case "Triennially":     $months = 32; break;
        default:                return FALSE;
    }

    $expires = new DateTime('plus '.$months.' months');
    $expires->modify('last day of this month');
    return $expires->format('Y-m-d');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-22T11:00:03.600

```
function countDueDate($policy_start_date,$months){
        $next_due_date = strtotime($policy_start_date.' + '.$months.' Months');
        if($next_due_date<time()){
            return countDueDate(date('Y-m-d', $next_due_date), $months);
        }else{
           return  date('Y-m-d',$next_due_date);
        }
    }
function getModeMonth($premium_mode){
        switch ($premium_mode){
            case 'yearly':      $q=12;break;
            case 'monthly':     $q=1;break;
            case 'quarterly':   $q=3;break;
            case 'half year':   $q=6;break;
            default :           $q=12;break;
        }
        return $q;
    }
$date=countDueDate(date('Y').'-'.date('m-d',strtotime($policy_start_date)), getModeMonth($premium_mode)); 
```

# amazon-s3 - Amazon EC2 EBS 备份：AMI 与快照

> ID：13834324
> 
> 赞同：31
> 
> 时间：2012-12-12T06:49:22.797
> 
> 标签：amazon-s3, amazon-web-services, amazon-ec2, amazon

我正在尝试为我们的服务器创建备份机制，这样如果我的系统崩溃，我应该能够通过运行单个脚本来创建整个系统

翻阅亚马逊文档后，这是我对创建备份和恢复的理解

备份

1.  创建 AMI 映像（可以每月更新）
2.  创建快照（这可以使用创建快照的每日脚本来完成）

恢复（一个脚本到）

1.  使用 AMI 创建 EBS 实例
2.  将 EBS 卷附加到创建的实例

现在我的问题是

1.  这是进行备份和恢复的最佳方式吗？
2.  我们真的需要备份两个东西，AMI 和 EBS 卷（使用快照），我们可以只保留快照吗？
3.  我知道这不适用于本地实例存储实例，因为没有快照功能。那么如何为本地实例存储实例创建备份和恢复过程呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T06:09:12.207

由于找不到更好的选择，我坚持最初的方法。

### 对于 EBS

备份：

*   创建 AMI 映像（可以每月更新一次）。
*   创建快照（这可以使用创建快照的每日脚本来完成）。

### 恢复（一个脚本到）

*   使用 AMI 创建 EBS 实例。
*   将 EBS 卷附加到创建的实例。

例如存储，我只保留应用程序（没有数据库），所以不需要保留它的备份。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-15T16:45:46.383

EBS 快照是创建备份的绝佳方式。

您可以通过脚本执行 EBS 卷的频繁快照。每周、每天、每小时或您的信用卡允许的频率。唯一的限制是您可以同时执行多少个快照 - 当您达到该限制时，EBS API 将开始返回错误，直到一些正在进行的操作完成。

快照也可以从一个区域复制到另一个区域，以便为灾难性事件提供备份。

当您对 EBS 卷进行快照时，该快照是整个卷的快照。即使它是从 AMI 创建的，您的快照也包含创建卷的新实例所需的一切。你可以很容易地自己尝试一下。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-12T06:56:56.037

除了 EBS 快照，我建议使用[Auto Scaling 。](http://docs.amazonwebservices.com/AutoScaling/latest/DeveloperGuide/Welcome.html)如果实例因硬件故障而死亡或 Amazon 计划停用，Auto Scaling 将自动启动新实例。

但在这种情况下，您必须为您的动态数据设置 NAS。根据服务器负载，运行实例的数量会有所不同，并且所有扩展服务器都必须安装在它们之间共享的 NAS 存储。

您的数据库也应该位于单独的服务器或服务器上。或者您可能想使用[Amazon RDS](http://docs.amazonwebservices.com/AmazonRDS/latest/UserGuide/Introduction.html)，因为它具有出色的自动备份/时间点恢复功能，但您必须为此支付额外费用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-09-19T04:30:12.350

如果您的实例基于 Linux，则在拍摄快照时无需创建 AMI。当您需要恢复时，您可以从快照中动态创建 AMI。如果您使该过程自动化，则很容易做到。

*   在 Windows 中，存在不允许从快照启动 EC2 实例的限制，因此必须使用 AMI。有一些方法可以解决这个限制：您可以查看我在我们公司的博客中写的这篇文章：

[http://www.n2ws.com/blog/3-ways-ec2-windows-backup-and-recovery.html](http://www.n2ws.com/blog/3-ways-ec2-windows-backup-and-recovery.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-13T04:26:54.527

1) 是的。快照是备份和恢复 EBS 卷的最佳方式。

2）取决于，如果您将根卷作为 EBS 支持的 AMI，那么您也可以对它们进行快照并提高可管理性

3) Rsync 和 AMI 是可用于实例存储的选项

# php - 未使用 51Degree api 获取移动硬件模型

> ID：13834327
> 
> 赞同：0
> 
> 时间：2012-12-12T06:49:38.690
> 
> 标签：php, android, mobile, blackberry, 51degrees

我正在为我的一个移动应用程序使用 51Degree Api，并尝试检索移动分辨率和型号但 51degree Api 属性

```
$_51d["HardwareModel"]; 
```

没有提供有关手机型号的任何信息，也没有提供 Blackberry Bold 9790 手机的任何信息，它没有提供正确的屏幕尺寸.. 使用属性

```
**
$_51d["ScreenPixelsHeight"];
**

and 

**
$_51d["ScreenPixelsWidth"];
** 
```

** 用于获取屏幕尺寸。任何人都可以告诉我这里的问题可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:33:05.143

根据我声明我为 51degrees.mobi 工作的规则[。](https://stackoverflow.com/faq#promotion)

您使用的是 51Degrees.mobi 的精简版还是高级版？“HardwareModel”是一个仅在我们的高级数据集中可用的属性，如果您使用的是精简版，则无法访问。有关两个版本可用的属性列表，请参阅[属性字典](http://51degrees.mobi/Products/DeviceData/PropertyDictionary.aspx?CATReferrer=1758)。

请您通过不提供正确的屏幕尺寸来定义您的意思。应该返回的属性是：

```
ScreenPixelHeight: 360
ScreenPixelWidth: 480 
```

[这与黑莓网站](http://uk.blackberry.com/smartphones/blackberry-bold-9790/where-to-buy.html?CPID=KNC-kw187286_p8&HBX_PK=rim%7C2415f57b-749d-b069-b2f9-00001274e123#/h:/smartphones/blackberry-bold-9790/phone-specifications.html)上列出的相同。你能提供你正在使用的用户代理吗？希望这可以帮助 ：）

# python - 我无法使用 django 连接到数据库

> ID：13834335
> 
> 赞同：0
> 
> 时间：2012-12-12T06:50:21.470
> 
> 标签：python, mysql, django

我可以使用 MySQLdb 连接到数据库，但无法使用 django 连接请任何人帮助我

所有参数都是正确的，如主机、密码和用户名。

当我尝试导入有关 django 的 python 解释器时，我收到以下错误

```
File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.6/dist-packages/django/db/__init__.py", line 14, in <module>
    if not settings.DATABASES:
  File "/usr/local/lib/python2.6/dist-packages/django/utils/functional.py", line 276, in __getattr__
    self._setup()
  File "/usr/local/lib/python2.6/dist-packages/django/conf/__init__.py", line 40, in _setup
    raise ImportError("Settings cannot be imported, because environment variable %s is undefined." % ENVIRONMENT_VARIABLE)
ImportError: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined. 
```

当然我已经安装了 django。

请帮帮我，我是 django 的新手....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T06:54:28.107

确保运行`python manage.py shell`以加载所有 django 特定的环境变量。

如果您只是 run `python`，那么您将收到与您发布的错误类似的错误，因为 django 环境设置不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:59:56.440

DJANGO_SETTINGS_MODULE - 是环境变量，将其设置为您的项目 settings.py 文件。

```
import os
os.environ['DJANGO_SETTINGS_MODULE'] = "yourprojectname.settings" 
```

更多信息：[https ://docs.djangoproject.com/en/dev/topics/settings/](https://docs.djangoproject.com/en/dev/topics/settings/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:54:20.933

导入 DJANGO_SETTINGS_MODULE 的值。

这可以通过以下方式完成：

1.  将项目目录添加到 $PYTHONPATH。
2.  将 DJANGO_SETTINGS_MODULE 更改为 projectfoldername.settings。

# ant - 如何终止 在 Windows 中启动服务器后 ANT 中的任务

> ID：13834337
> 
> 赞同：2
> 
> 时间：2012-12-12T06:50:25.120
> 
> 标签：ant, exec, terminate

我正在尝试使用 ant exec 命令启动 weblogic 服务器。操作触发后，exec 进程创建一个子进程，即启动 weblogic 服务器。我希望在服务器启动后终止父 ant 进程并使正在运行的 Weblogic 服务器保持活动状态。我曾尝试使用 spawn="true" 和任务，但它没有帮助。

**我也试图从 Eclipse 中调用 ant buil.xml。**

我想实现任务应该启动服务器然后终止ant进程并且调用java程序应该从eclipse完成它的执行。

以下是我的 build.xml：

```
<target name="StartWeblogicServer" description="Starts the Weblogic Server" >
    <exec dir="${DOMAIN_HOME}/bin" executable="cmd" failonerror="true" spawn="true">
        <arg value="/c start startWeblogic.cmd" />
    </exec>
</target> 
```

上面的代码在单独的命令提示符中启动 weblogic 服务器。但是，eclipse 不会终止正在运行的程序，因为 ant 进程在任务执行后不会终止。

请帮忙。

# javascript - 从 javascript 对象中删除一行

> ID：13834338
> 
> 赞同：0
> 
> 时间：2012-12-12T06:50:28.847
> 
> 标签：javascript, javascript-objects, delete-row

我有一个看起来像这样的 javascript 对象：-

```
var myObject = [{"id": "1", "URL": "http://shsudhf.com", "value": "1"}, 

                {"id": "2", "URL": "http://shsusadhf.com", "value": "2"},

                {"id": "3", "URL": "http://shsudsdff.com", "value": "0"}]; 
```

现在，我必须删除对象中具有 id 值的所有行`2`。如何才能做到这一点 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T07:06:54.877

如果在“删除”行后不需要原始数组，可以`splice`这样使用：

[http://jsfiddle.net/rmcu5/1/](http://jsfiddle.net/rmcu5/1/)

```
var myArray = [{"id": "1", "URL": "http://shsudhf.com", "value": "1"},
                {"id": "2", "URL": "http://shsusadhf.com", "value": "2"},
                {"id": "3", "URL": "http://shsudsdff.com", "value": "0"}];

function removeItemsById(arr, id) {
    var i = arr.length;
    if (i) {   // (not 0)
        while (--i) {
            var cur = arr[i];
            if (cur.id == id) {
                arr.splice(i, 1);
            }
        }
    }
}

removeItemsById(myArray, "2");

console.log(JSON.stringify(myArray)); 
```

它不会创建新数组，只是在原处修改原始数组。如果您需要原始数组及其所有项目，请使用其他解决方案之一，该解决方案会返回原始的修改副本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T06:58:02.087

请注意，您调用`myObject`的实际上是一个数组，因此您可以在其上使用数组方法：

```
myObject = myObject.filter(function( obj ) {
  return obj.id != 2;
}); 
```

**演示：http:** [//jsfiddle.net/elclanrs/LXpYj/](http://jsfiddle.net/elclanrs/LXpYj/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T06:55:56.693

试试这个：

```
function deleteObject(array,id)
{
 var newObject=[]; 
  for (var o in array) {
       if(array[o].id!=id)
          newObject.push(array[o]);
    }
return newObject;
} 
```

工作[JS小提琴](http://jsfiddle.net/zaheerahmed/Ctt9f/)

您可以不创建新数组，您需要编写删除函数：

```
Array.prototype.remove = function() {
    var what, a = arguments, L = a.length, ax;
    while (L && this.length) {
        what = a[--L];
        while ((ax = this.indexOf(what)) !== -1) {
            this.splice(ax, 1);
        }
    }
    return this;
}; 
```

[没有新数组删除对象](http://jsfiddle.net/zaheerahmed/78Qyc/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T07:15:40.690

用过滤器试试（它是一个数组而不是一个对象）

```
var rr = [{"id": "1", "URL": "http://shsudhf.com", "value": "1"},  {"id": "2", "URL": "http://shsusadhf.com", "value": "2"}, {"id": "3", "URL": "http://shsudsdff.com", "value": "0"}];

rr = rr.filter(function(e) {
    return e.id != 2;
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-12T07:00:28.230

给你，这是没有重新创建数组或任何东西。

```
 var myObject = [{"id": "1", "URL": "http://shsudhf.com", "value": "1"}, 

                {"id": "2", "URL": "http://shsusadhf.com", "value": "2"},

    {"id": "3", "URL": "http://shsudsdff.com", "value": "0"}];

for(i=0,iMax=myObject.length;i<iMax;i++){
    (function (a) { 
        if(this.id=="2"){
          delete myObject[a];
        }
    }).call(myObject[i],i);
}

console.log(myObject);
​
​ 
```

jsFiddle

[http://jsfiddle.net/gG2zz/1/](http://jsfiddle.net/gG2zz/1/)

# c++ - 从堆栈指针中找出函数参数值

> ID：13834341
> 
> 赞同：4
> 
> 时间：2012-12-12T06:50:34.277
> 
> 标签：c++, c, linux, arguments, stack-trace

给定堆栈指针值，是否可以确定传递给函数的参数的值？存储在堆栈帧中的参数在哪里。

比方说，在 Linux 平台的架构上执行`gcc`编译后的 ELF 二进制文件：`x86`

```
int foo(int a, int b)
{
...
} 
```

`foo(a,b)`从中调用`main()`，我知道现在指向的堆栈指针（SP）值`foo()`。如何检索参数`a`和的值`b`？

**编辑**：如果堆栈从较小的地址增长到较大的地址，并且使用从右到左传递参数`cdecl`，我可以像这样获得 args 值：

```
b = *(SP + 1);
a = *(SP + 2); 
```

**编辑**：以下程序使用上述拱形和规范打印函数 args`a`的值。`b`

```
void foo(int a, int b)
{
        int i;
        register int stackptr asm("sp");
        int *sp = (int *)stackptr;
        printf("\n\ta=%d b=%d\n", a, b);
        for (i=0; i<16; i++) {
                printf("*(sp + %d) = %d\n", i, *(sp +i));
        }
}

int main()
{
        foo(3, 8);
        foo(9, 2);
        foo(1, 4);
        return 0;
} 
```

上面代码的输出是：

```
 a=3 b=8
*(sp + 0) = 134514016
*(sp + 1) = 0
*(sp + 2) = 0
*(sp + 3) = 134513373
*(sp + 4) = 8239384
*(sp + 5) = 134513228
*(sp + 6) = 6
*(sp + 7) = -1076716032
*(sp + 8) = 134513456
*(sp + 9) = 0
*(sp + 10) = -1076715960
*(sp + 11) = 134513759
*(sp + 12) = 3  //value of arg a
*(sp + 13) = 8  //value of arg b
*(sp + 14) = 134513817
*(sp + 15) = 10612724

        a=9 b=2
*(sp + 0) = 134514016
*(sp + 1) = 0
*(sp + 2) = 0
*(sp + 3) = 134513373
*(sp + 4) = 8239384
*(sp + 5) = 134513228
*(sp + 6) = 6
*(sp + 7) = -1076716032
*(sp + 8) = 134513456
*(sp + 9) = 0
*(sp + 10) = -1076715960
*(sp + 11) = 134513779
*(sp + 12) = 9  //value of arg a
*(sp + 13) = 2  //value of arg b
*(sp + 14) = 134513817
*(sp + 15) = 10612724

        a=1 b=4
*(sp + 0) = 134514016
*(sp + 1) = 0
*(sp + 2) = 0
*(sp + 3) = 134513373
*(sp + 4) = 8239384
*(sp + 5) = 134513228
*(sp + 6) = 6
*(sp + 7) = -1076716032
*(sp + 8) = 134513456
*(sp + 9) = 0
*(sp + 10) = -1076715960
*(sp + 11) = 134513799
*(sp + 12) = 1  //value of arg a
*(sp + 13) = 4  //value of arg b 
*(sp + 14) = 134513817
*(sp + 15) = 10612724 
```

为什么函数参数从SP的**偏移量 12开始存储？**另请注意，偏移量 0 到 10 处的值始终相同，每次调用 function 时，偏移量 11 处的值增加 20 `foo()`。

**更新**：我发现`gcc`有[内置函数](http://gcc.gnu.org/onlinedocs/gcc/Return-Address.html)来检索帧指针地址

```
void * __builtin_frame_address (unsigned int level) 
```

`__builtin_frame_address(0)`当我在从函数参数开始的偏移量处打印值时，从`offset 2`. 我如何确认这种行为始终是一致的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:58:12.303

您必须知道[调用约定](http://en.wikipedia.org/wiki/Calling_convention)才能知道参数被压入堆栈的顺序，或者即使它们在堆栈上。许多人在寄存器中传递前几个参数。即使在 x86 上，您也有 fastcall、pascal、register、stdcall 和 cdecl，仅举几例。

编辑：不要忘记这`printf`也是一个函数，并且局部变量也在堆栈上。所以，在你的示例应用程序中，你有你的参数（因为它是 cdecl），然后是你的本地人，然后是你的函数保存状态和返回地址，然后是参数`printf`（也许，不确定它是`cdecl`还是`fastcall`），然后`printf`是本地人任何东西实际上都会出现在屏幕上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T09:59:05.963

没有简单的方法，当然也没有可移植的方法（对于同一个源文件，这甚至可以在 gcc 4.1 和 gcc 4.2 之间改变），但 gdb 肯定可以做到。使用 gcc，您可能可以找到分析 DWARF 信息所需的一切。

gdb 还使用序言分析来检测局部变量在堆栈中的分配方式（除其他外），但我不确定 gdb 的源中是否存在类似“调用分析”的东西。可能正在阅读 gdb 源代码中的 prologue-value.h 可以帮助您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:13:07.840

局部变量在堆栈上分配，因此 variables`i`和`stackptr`在`sp`调用[堆栈](http://en.wikipedia.org/wiki/Call_stack)上分配。因此，如果我们打印所有堆栈记录，我们将找到这些变量，然后是返回指针，然后是保存的帧指针（如果已保存），然后是函数参数。因此，在上面的示例中，`args`从 12 开始。

如果您想立即访问函数调用参数，您应该从使用获取的帧指针地址开始`__builtin_frame_address(unsigned int level)`。参数在保存的帧指针之前被压入堆栈，因此如果从堆栈上保存的帧指针记录的开头开始，则必须添加等于帧指针地址大小的偏移量。因此，在上面的示例中，`args`从偏移量 2 开始。

# android - 如何在 Android 应用程序中获取网络强度？

> ID：13834343
> 
> 赞同：6
> 
> 时间：2012-12-12T06:50:58.880
> 
> 标签：android

我想在移动设备中展示互联网的网络强度。

现在我可以检查来自 wifi 的连接或不使用下面的代码，但我还需要网络信号强度。所以请告诉我我需要添加什么代码？

谢谢！

```
ConnectivityManager connectivityManager = (ConnectivityManager) context
                .getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo activeNetInfo = connectivityManager
                .getActiveNetworkInfo();
        NetworkInfo mobNetInfo = connectivityManager
                .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

        TextView netStatus = (TextView) findViewById(R.id.netStatus);
        if (activeNetInfo != null) {
            netStatus.setText(" Connection Status - Connected "+activeNetInfo.getTypeName());
        } else if (mobNetInfo != null) {
            netStatus.setText(" Connection Status - Connected "+mobNetInfo.getTypeName());
        } else {
            netStatus.setText(" Connection Status - Not Connected ");
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T07:00:17.167

试试这个代码：

```
ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo Info = cm.getActiveNetworkInfo();
    if (Info == null || !Info.isConnectedOrConnecting()) {
        Log.i(TAG, "No connection");
    } else {
        int netType = Info.getType();
        int netSubtype = Info.getSubtype();

        if (netType == ConnectivityManager.TYPE_WIFI) {
            Log.i(TAG, "Wifi connection");
            WifiManager wifiManager = (WifiManager) getApplication().getSystemService(Context.WIFI_SERVICE);
            List<ScanResult> scanResult = wifiManager.getScanResults();
            for (int i = 0; i < scanResult.size(); i++) {
                Log.d("scanResult", "Speed of wifi"+scanResult.get(i).level);//The db level of signal 
            }

            // Need to get wifi strength
        } else if (netType == ConnectivityManager.TYPE_MOBILE) {
            Log.i(TAG, "GPRS/3G connection");
            // Need to get differentiate between 3G/GPRS
        }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T06:09:29.450

```
 public class Connectivity {
        /*
         * These constants aren't yet available in my API level (7), but I need to
         * handle these cases if they come up, on newer versions
         */
        public static final int NETWORK_TYPE_EHRPD = 14; // Level 11
        public static final int NETWORK_TYPE_EVDO_B = 12; // Level 9
        public static final int NETWORK_TYPE_HSPAP = 15; // Level 13
        public static final int NETWORK_TYPE_IDEN = 11; // Level 8
        public static final int NETWORK_TYPE_LTE = 13; // Level 11

    /**
     * Check if there is any connectivity
     * 
     * @param context
     * @return
     */
    public static boolean isConnected(Context context) {
        ConnectivityManager cm = (ConnectivityManager) context
                .getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo info = cm.getActiveNetworkInfo();
        return (info != null && info.isConnected());
    }

    /**
     * Check if there is fast connectivity
     * 
     * @param context
     * @return
     */
    public static String isConnectedFast(Context context) {
        ConnectivityManager cm = (ConnectivityManager) context
                .getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo info = cm.getActiveNetworkInfo();

        if ((info != null && info.isConnected())) {
            return Connectivity.isConnectionFast(info.getType(),
                    info.getSubtype());
        } else
            return "No NetWork Access";

    }

    /**
     * Check if the connection is fast
     * 
     * @param type
     * @param subType
     * @return
     */
    public static String isConnectionFast(int type, int subType) {
        if (type == ConnectivityManager.TYPE_WIFI) {
            System.out.println("CONNECTED VIA WIFI");
            return "CONNECTED VIA WIFI";
        } else if (type == ConnectivityManager.TYPE_MOBILE) {
            switch (subType) {
            case TelephonyManager.NETWORK_TYPE_1xRTT:
                return "NETWORK TYPE 1xRTT"; // ~ 50-100 kbps
            case TelephonyManager.NETWORK_TYPE_CDMA:
                return "NETWORK TYPE CDMA (3G) Speed: 2 Mbps"; // ~ 14-64 kbps
            case TelephonyManager.NETWORK_TYPE_EDGE:

                return "NETWORK TYPE EDGE (2.75G) Speed: 100-120 Kbps"; // ~
                                                                        // 50-100
                                                                        // kbps
            case TelephonyManager.NETWORK_TYPE_EVDO_0:
                return "NETWORK TYPE EVDO_0"; // ~ 400-1000 kbps
            case TelephonyManager.NETWORK_TYPE_EVDO_A:
                return "NETWORK TYPE EVDO_A"; // ~ 600-1400 kbps
            case TelephonyManager.NETWORK_TYPE_GPRS:
                return "NETWORK TYPE GPRS (2.5G) Speed: 40-50 Kbps"; // ~ 100
                                                                        // kbps
            case TelephonyManager.NETWORK_TYPE_HSDPA:
                return "NETWORK TYPE HSDPA (4G) Speed: 2-14 Mbps"; // ~ 2-14
                                                                    // Mbps
            case TelephonyManager.NETWORK_TYPE_HSPA:
                return "NETWORK TYPE HSPA (4G) Speed: 0.7-1.7 Mbps"; // ~
                                                                        // 700-1700
                                                                        // kbps
            case TelephonyManager.NETWORK_TYPE_HSUPA:
                return "NETWORK TYPE HSUPA (3G) Speed: 1-23 Mbps"; // ~ 1-23
                                                                    // Mbps
            case TelephonyManager.NETWORK_TYPE_UMTS:
                return "NETWORK TYPE UMTS (3G) Speed: 0.4-7 Mbps"; // ~ 400-7000
                                                                    // kbps
                // NOT AVAILABLE YET IN API LEVEL 7
            case Connectivity.NETWORK_TYPE_EHRPD:
                return "NETWORK TYPE EHRPD"; // ~ 1-2 Mbps
            case Connectivity.NETWORK_TYPE_EVDO_B:
                return "NETWORK_TYPE_EVDO_B"; // ~ 5 Mbps
            case Connectivity.NETWORK_TYPE_HSPAP:
                return "NETWORK TYPE HSPA+ (4G) Speed: 10-20 Mbps"; // ~ 10-20
                                                                    // Mbps
            case Connectivity.NETWORK_TYPE_IDEN:
                return "NETWORK TYPE IDEN"; // ~25 kbps
            case Connectivity.NETWORK_TYPE_LTE:
                return "NETWORK TYPE LTE (4G) Speed: 10+ Mbps"; // ~ 10+ Mbps
                // Unknown
            case TelephonyManager.NETWORK_TYPE_UNKNOWN:
                return "NETWORK TYPE UNKNOWN";
            default:
                return "";
            }
        } else {
            return "";
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T07:14:33.060

得到`Network Strength`

```
WifiManager wifiManager = (WifiManager) context
            .getSystemService(Context.WIFI_SERVICE);
netStatus.setText(getWifiSignalStrengthIndBm()+"");

public int getWifiSignalStrengthIndBm() {
    WifiInfo wifiInfo = wifiManager.getConnectionInfo();
    return asu2dBm(wifiInfo.getRssi());
}
private int asu2dBm(int asu) {
        return (2 * asu) - 113;
    } 
```

# visual-studio - Visual Studio 即时窗口和 PowerShell

> ID：13834344
> 
> 赞同：4
> 
> 时间：2012-12-12T06:51:01.407
> 
> 标签：visual-studio, powershell

如您所知，Visual Studio 的即时窗口非常有限。你甚至不能在那里使用循环。

我只是好奇这是否可以将 PowerShell 集成到即时窗口中？这将使调试变得容易很多。我们将有循环、lambda 等...

我考虑过[PowerConsole](http://visualstudiogallery.msdn.microsoft.com/67620d8c-93dd-4e57-aa86-c9404acbd7b3/)，但这没有与调试器集成。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:35:39.563

您是否为此尝试过 PowerConsole？我最近没有使用它，但我知道您可以访问 Visual Studio 的 DTE 对象，并且从那里您应该能够获取调试器接口，例如`$dte.Debugger`.

我刚刚查看了 PowerConsole 项目站点，看看是否有 VS 2012 的版本。项目所有者声称 NuGet 包管理器控制台是 PowerConsole 的一个分支。果然，这是从包管理器控制台完成的。我刚试过：

```
$dte.debugger.getexpression("variableName", $true, 2000) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T15:44:22.223

我希望获得与能够以更灵活的方式迭代/转储一些变量和集合类似的行为。所以我想出了一个简单的 VS Add-In 和具有类似功能的 Python Shell 脚本。我已将我的项目放在 github - [https://github.com/dp0h/VsImmediate](https://github.com/dp0h/VsImmediate)

# vim - 将输入键映射到vim中的换行符和制表符

> ID：13834346
> 
> 赞同：0
> 
> 时间：2012-12-12T06:51:10.313
> 
> 标签：vim, vim-plugin

每当我按下回车键，表示段落结束时，vim 应该自动插入另一个新行，并在下一行插入一个制表符空间。这一切都是为了表明我已经准备好输入下一段了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:25:55.840

我同意评论说这不是一个好主意，但以下对我有用：

```
inoremap <buffer> <cr> <cr><cr><tab> 
```

# android - 从安卓设备连接到服务器时连接超时

> ID：13834348
> 
> 赞同：0
> 
> 时间：2012-12-12T06:51:17.230
> 
> 标签：android

我正在尝试从我的 android 手机连接到我的服务器。但我收到超时连接错误。可能是什么原因？

我的代码是

```
public void onClick(View view) {
    if (view == loginBtn) {
        if (username.getText().length() != 0 & password.getText().length() != 0) {

            progressDialog = ProgressDialog.show(this,Farsi.Convert(""),"Verifying user credential"); 

            Thread thread = new Thread(new Runnable() {
                @Override
                public void run() {
                    try {
                        Connection connection = getConnection();
                        User user = connection.login(username.getText().toString(), password.getText().toString()); 
                        if (user != null) {
                            BaseKaizenActivity.getStorageManager().setUser(user);
                            Log.d("---", user.getId() + "  :  " + user.getName());
                            showActivity(MainMenuActivity.class);
                        }
                        else {
                            handleException("Invalid username or password");
                        }
                    }
                    catch (Exception exc) {
                        handleException(exc.getMessage());
                    }
                    finally {
                        if (progressDialog != null) {
                            progressDialog.dismiss();
                        }
                    }
                }
            });
            thread.start();
        }
        else {
            handleException("Insert username and password");
        }
    }
} 
```

我得到的例外是

```
Connect to /10.0.2.2:8080 timed out
org.apache.http.conn.ConnectTimeoutException: Connect to /10.0.2.2:8080 timed out
at     org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121)
at     org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(
       DefaultClientConnectionOperator.java:156)
at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
at     org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:428)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
at com.pda.kaizen.ConnectionImpl.executeHttpPost(ConnectionImpl.java:133)
at com.pda.kaizen.ConnectionImpl.login(ConnectionImpl.java:88)
at com.pda.kaizen.activity.LoginActivity$1.run(LoginActivity.java:98)
at java.lang.Thread.run(Thread.java:1019) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:56:42.477

试试这个示例代码：

```
public class AndroidClient extends Activity {

EditText textOut;
TextView textIn;

 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

     textOut = (EditText)findViewById(R.id.textout);
     Button buttonSend = (Button)findViewById(R.id.send);
     textIn = (TextView)findViewById(R.id.textin);
     buttonSend.setOnClickListener(buttonSendOnClickListener);
 }

 Button.OnClickListener buttonSendOnClickListener
 = new Button.OnClickListener(){

@Override
public void onClick(View arg0) {
 // TODO Auto-generated method stub
 Socket socket = null;
 DataOutputStream dataOutputStream = null;
 DataInputStream dataInputStream = null;

 try {
  socket = new Socket("192.168.1.101", 8888);
  dataOutputStream = new DataOutputStream(socket.getOutputStream());
  dataInputStream = new DataInputStream(socket.getInputStream());
  dataOutputStream.writeUTF(textOut.getText().toString());
  textIn.setText(dataInputStream.readUTF());
 } catch (UnknownHostException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 } catch (IOException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 }
 finally{
  if (socket != null){
   try {
    socket.close();
   } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
   }
  }

  if (dataOutputStream != null){
   try {
    dataOutputStream.close();
   } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
   }
  }

  if (dataInputStream != null){
   try {
    dataInputStream.close();
   } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
   }
  }
 }
}};
} 
```

和你的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 >
<TextView
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:text="@string/hello"
 />
<EditText
 android:id="@+id/textout"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 />
<Button
 android:id="@+id/send"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:text="Send"
 />
<TextView
 android:id="@+id/textin"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 />
</LinearLayout> 
```

首先在您的清单中添加每个任务

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

# sql-server-2008 - SQL Server 的 Codeigniter 错误

> ID：13834355
> 
> 赞同：0
> 
> 时间：2012-12-12T06:51:47.147
> 
> 标签：sql-server-2008, codeigniter

我在 codeigniter 中使用 sql server 数据库驱动程序，并且正在执行以下查询：

```
 select A.inst_name,Substring((Select ',' + cast(B.program_id as varchar(15))   
                               From    k12_dms_inst_programs B
                               Where B.inst_id=A.id For XML Path('')),2,8000) As EmployeeList
 From k12_dms_institution_master A
 Group by A.inst_name,A.id 
```

**这在SSMS**中工作得非常好。

但是，当我尝试使用 Codeigniter 执行相同的查询时，我收到以下错误：-

仅 Unicode 排序规则中的 Unicode 数据或 ntext 数据无法使用**DB-Library**（例如 ISQL）或**ODBC 版本 3.7 或更早版本**发送到客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:11:01.010

在 php.net 上找到了一些解决方案

1.  MSSQL新手 19-Sep-2011 06:34

    ```
    In /etc/freetds/freetds.conf add these two lines (last two):
    [global]
    ;tds version = 4.2
    tds version = 8.0  
    client charset = UTF-8

    You can edit "charset" in php.ini too (but you don't need if you did it previously in freetds.conf):  
    ; Specify client character set.. 
    ; If empty or not set the client charset from freetds.comf is used 
    ; This is only used when compiled with FreeTDS mssql.charset = "UTF-8"

    Use nchar/nvarchar/ntext column types if you need unicode support. 
    ```

2.  iteams dot org 的 dann dot farquhar 2009 年 9 月 24 日 11:45

    ```
    I found that changing the version in /etc/freetds.conf from 4.2 to 8.0
    fixes this problem without having to make any changes to the SELECT
    statement 
    ```

3.  huberkev11 在 hotmail dot com 12-May-2006 01:47

    ```
    This is because you are using column types of like ntext instead of
    text.  There are 2 solutions.

    1  Change all ntext column types to text or
    2  Your query must look like: SELECT CAST(field1 AS TEXT) AS field1 FROM table 
    ```

希望他们会有所帮助。

# c# - 下拉列表选择索引更改时如何执行查询

> ID：13834361
> 
> 赞同：-3
> 
> 时间：2012-12-12T06:52:04.643
> 
> 标签：c#, asp.net, visual-studio-2010, sqldatasource

我有一个使用 sqldatasource 填充的 DropDownList，即来自数据库，它们是一个网格视图，其中填充了另一个使用下拉列表的值连接的 sqldatasource。

但它不会动态执行查询。我希望每当下拉列表的值发生变化时，网格视图都应该更新。请代码..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T06:57:08.903

**ASPX 代码**

```
<asp:DropDownList id="ddlCountry" AutoPostBack="True" runat="server" OnSelectedIndexChanged="ddlCountry_SelectedIndexChanged" ></asp:DropDownList> 
```

**和CS代码**

```
protected void ddlCountry_SelectedIndexChanged(object sender, EventArgs e)
{
  FillYourGridviewHere();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:08:31.147

```
<asp:DropDownList ID="DropDownList1" runat="server" 
        DataSourceID="SqlDataSource2" DataTextField="ssn" DataValueField="ssn" 
         AutoPostBack=true>
    </asp:DropDownList> 
```

这有效。谢谢你。！！

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-12T06:59:00.247

您只需编写用于将网格填充到函数中的动态代码，并将该函数绑定到下拉列表 onChange 事件。

假设“mydropdown”是下拉列表的 id，“dochanges”是执行动态代码的函数。因此，您只需要将 dochanges 函数绑定到下拉列表的更改事件。

```
 $('#mydropown').bind('change',function(){
            dochanges(); //call the dynamic function where you update your grid
    }); 
```

# delphi - 当我在delphi中将闪存卡插入我的allinone USB读卡器时，如何检测闪存卡类型（xd，sd）？

> ID：13834363
> 
> 赞同：2
> 
> 时间：2012-12-12T06:52:08.347
> 
> 标签：delphi, cardreader

每个人。我是新来的。当我在 delphi 应用程序中将闪存卡插入我的 USB 读卡器时，我有一个关于如何检测闪存卡类型（XD，SD）的问题。我搜索了很多主题，但没有找到任何好的方法。有任何想法吗？

* * *

谢谢你的回复，TLama。我朋友的工厂生产USB读卡器，他想用一个软件来测试所有读卡器。他希望工人在测试程序显示“请插入 SD 卡”时插入 SD 卡而不是 CF 卡。我有一张 IC OF 读卡器的照片。但我仍然不知道如何处理它？有什么方法可以检查 IC 的引脚状态吗？ ![在此处输入图像描述](../Images/30bb5af13eae62c77cda1bfb17b4c345.png)

![在此处输入图像描述](../Images/481bbd03ea8b6a86c77e371151de2efe.png)

# loops - 如何在 LLVM 中获取循环边界？

> ID：13834364
> 
> 赞同：1
> 
> 时间：2012-12-12T06:52:13.487
> 
> 标签：loops, llvm, bounds, nest

我想通过使用 LLVM API 来获得循环边界。这是代码的一部分，如下所示。我不知道获得界限是否正确。那么，还有其他我没有想到的情况吗？

```
typedef std::vector<Loop*> LoopNest;
typedef std::vector<const Value*> LoopNestBounds;
...
void getLoopNestBounds(const LoopNest &Nest, LoopNestBounds &LBounds) {
    ScalarEvolution &SE = getAnalysis<ScalarEvolution>();
    for (unsigned d = 0, n = Nestsize(); d != n; ++d) {
        if (SE.hasLoopInvariantBackedgeTakenCount(Nest[d])) {
            const SCEV *C = SE.getBackedgeTakenCount(Nest[d]);
            const SCEVConstant *CC = dyn_cast<const SCEVConstant>(C);
            LBounds.push_back(CC->getValue());
            errs() << CC->getValue()->getValue() << " iterations\n";
        }
        else {
            LBounds.push_back(0);
            errs() << "---- 0 iterations for the nest ----" << "\n";
        }
    }
} 
```

注意：LLVM 的版本是 3.0。

# mysql - 生成 mysql 转储

> ID：13834365
> 
> 赞同：0
> 
> 时间：2012-12-12T06:52:17.793
> 
> 标签：mysql, mysqldump

当我从 mysql 转储数据库时，有没有办法可以删除行`ENGINE=MyISAM AUTO_INCREMENT=528 ...`,`LOCK TABLES "controller_actions" WRITE;`和`UNLOCK TABLES;`. 打开 db 文件并删除这些行将非常乏味，因为数据库如此庞大。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:19:52.587

我不确定您为什么要删除`ENGINE`and`AUTO_INCREMENT`选项；据我所知，没有办法只删除这些选项。如果要删除整个`CREATE TABLE`语句，请使用该`--no-create-info`选项。要阻止`LOCK TABLE`and`UNLOCK TABLE`命令，请使用`--skip-add-locks`.

# semaphore - 为什么信号量对象没有初始化？

> ID：13834367
> 
> 赞同：0
> 
> 时间：2012-12-12T06:52:24.703
> 
> 标签：semaphore

我正在学习使用信号量对象。但我无法初始化它。sem_init 函数总是返回值 -1 风雨无阻。

返回值 -1 表示第一个参数不是有效的指针，比如我的参考。但我在我的代码中找不到错过打印。我在 OS X 上的 Xcode 中编译了我的代码。

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <pthread.h>
#include <semaphore.h>

void * thread_snd(void *arg);
void * thread_rcv(void* arg);

sem_t bin_sem;
int number = 0;

char thread1[] = "A thread";
char thread2[] = "B thread";
char thread3[] = "C thread";

int main(int argc, char** argv)
{
    pthread_t t1, t2 ,t3;
    void *thread_result;
    int state;

    state       =   sem_init(&bin_sem, 0, 0);
    if(state != 0)
    {
        puts("fail to initialize semaphore");
        exit(1);
    }

    pthread_create(&t1, NULL, thread_snd, &thread1);
    pthread_create(&t2, NULL, thread_rcv, &thread2);
    pthread_create(&t3, NULL, thread_rcv, &thread3);

    pthread_join(t1, &thread_result);
    pthread_join(t2, &thread_result);
    pthread_join(t3, &thread_result);

    printf("final number : %d \n", number);
    sem_destroy(&bin_sem);
    return 0;
}

void * thread_snd(void * arg)
{
    int i;
    for(i = 0 ; i < 4; i++)
    {
        while(number != 0)
            sleep(1);
        number++;
        printf("execution : %s, number : %d \n", (char*) arg, number);
        sem_post(&bin_sem);
    }
}

void * thread_rcv(void* arg)
{
    int i;
    for(i = 0 ; i < 2; i++)
    {
        sem_wait(&bin_sem);
        number--;
        printf("execution : %s number : %d \n", (char*)arg, number);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:43:59.427

在 Mac OS X (10.6.8) 上没有`sem_init()` 和 `sem_destroy()`.

使用`sem_open()`and`sem_unlink()`代替。

```
/*

cat semaphore_test.c

source:
"Why semaphore object is not initialized?", 
https://stackoverflow.com/questions/13834367/why-semaphore-object-is-not-initialized

compiled on Mac OS X 10.6.8 with:
gcc -ansi -pedantic -std=gnu99 -Os -Wall -Wextra -Wshadow -Wpointer-arith -Wcast-qual  -Wstrict-prototypes \
    -Wmissing-prototypes -Wformat=2 -Wreturn-type -Wunreachable-code -finline  -l pthread -o semaphore_test semaphore_test.c

./semaphore_test

*/

#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <pthread.h>
#include <semaphore.h>

void * thread_snd(void *arg);
void * thread_rcv(void* arg);

//sem_t bin_sem;
static sem_t *bin_sem;
static const char *semname = "Semaphore";
static int number = 0;

char thread1[] = "A thread";
char thread2[] = "B thread";
char thread3[] = "C thread";

int main(void)
{
    pthread_t t1, t2 ,t3;
    void *thread_result;
    int state;

/*
    state  =  sem_init(&bin_sem, 0, 0);
    if(state != 0)
    {
        puts("fail to initialize semaphore");
        exit(1);
    }
*/

    bin_sem = sem_open(semname, O_CREAT, 0777, 0);
    if (bin_sem == SEM_FAILED)
    {
        fprintf(stderr, "%s\n", "ERROR creating semaphore semname");
        exit(EXIT_FAILURE);
    }

    pthread_create(&t1, NULL, thread_snd, &thread1);
    pthread_create(&t2, NULL, thread_rcv, &thread2);
    pthread_create(&t3, NULL, thread_rcv, &thread3);

    pthread_join(t1, &thread_result);
    pthread_join(t2, &thread_result);
    pthread_join(t3, &thread_result);

    printf("final number : %d \n", number);
    //sem_destroy(&bin_sem);
    sem_unlink(semname);
    return 0;
}

void * thread_snd(void * arg)
{
    int i;
    for(i = 0 ; i < 4; i++)
    {
        while(number != 0)
            sleep(1);
        number++;
        printf("snd execution : %s, number : %d \n", (char*) arg, number);
        //sem_post(&bin_sem);
        sem_post(bin_sem);
    }
}

void * thread_rcv(void* arg)
{
    int i;
    for(i = 0 ; i < 2; i++)
    {
        //sem_wait(&bin_sem);
        sem_wait(bin_sem);
        number--;
        printf("rcv execution : %s number : %d \n", (char*)arg, number);
    }
} 
```

也可以看看：

*   [OS X 上的 sem_init](https://stackoverflow.com/questions/1413785/sem-init-on-os-x)
*   [使用信号量的程序在 Linux 上运行良好...... Mac OS X 上的意外结果](https://stackoverflow.com/questions/4136181/program-using-semaphores-runs-fine-on-linux-unexpected-results-on-mac-osx)

# iphone - Facebook在应用程序xcode中登录？

> ID：13834370
> 
> 赞同：0
> 
> 时间：2012-12-12T06:52:36.483
> 
> 标签：iphone, xcode, facebook, facebook-login

我看到很多人一直在问这个问题，但我很困惑......我想在我的 iphone 应用程序中集成 facebook 登录。我需要提供登录选项，即使用我们的网站帐户登录或 facebook 登录并使用我们的应用程序。但我有通过谷歌，发现教程提供 facebook 登录功能和总访问权限（如发布、更新等），即使用 facebook 登录并进行相应的 facebook 活动。但我不需要所有这些。我只需要使用用户 facebook 登录的功能帐户并访问我们的应用程序。我还看到从 git 下载 facebook sdk 并复制 FBConnect 文件夹的另一件事。但里面没有这样的文件夹。我很困惑

我在哪里可以找到适合我特定标准的最佳教程..？

请在这方面指导我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T07:16:09.150

我认为这会对你有所帮助，看看：http: [//developers.facebook.com/docs/tutorials/ios-sdk-tutorial/](http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T07:09:16.103

您可以从这里下载 facebook sdk：http: [//developers.facebook.com/ios/](http://developers.facebook.com/ios/)

然后绕过 fb 应用程序和 safari 并继续使用您的应用程序，您可以更改 Facebbok.m 中的代码

```
 [self authorizeWithFBAppAuth:YES safariAuth:YES]; 
```

至

```
 [self authorizeWithFBAppAuth:NO safariAuth:NO]; 
```

在方法中

```
 - (void)authorize:(NSArray *)permissions
     delegate:(id<FBSessionDelegate>)delegate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T07:05:06.517

如果您想实现通过 facebook 访问您的应用程序登录，首先您应该在成功登录 facebook 后获取用户的 id（例如：19292868552）。在 id 的帮助下，您可以唯一地识别数据库中的用户。

# objective-c - 应用程序在横向模式下启动，而模拟器/设备在 ios6 中处于纵向模式

> ID：13834375
> 
> 赞同：0
> 
> 时间：2012-12-12T06:53:05.757
> 
> 标签：objective-c, ios6, orientation, device-orientation

我的应用程序窗口有`UITabBarController`一个`RootViewController`. 然后`UINavigationController`作为`TabBarController's` `RootViewController`. 然后另一个`HomeViewController`作为`NavigationController'`s `RootViewController`。

当我在模式下启动我的应用程序时`Portrait`，HomeViewController 的`UIView`插座会以`Landscape`模式显示。所有`UIView`网点都有横向模式坐标。因为返回方向是`Landscape`。

我发现了很多问答，博客。我应用了其他开发人员所说的任何内容，但没有成功。

此问题仅在 ios6 设备/iPhone 模拟器 6 中出现。

现在我正在研究模拟器并显示这个问题。

请尽快帮助我。

问我，如果我无法解释我的问题。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:29:41.160

在 iOS 6 中，该应用程序会从您的项目文件中查看您预定义的可能方向。检查它是否只列出景观，它也使用 shouldAutoRotate 方法，所以你可能也必须实现它。

检查此以获取更多信息： [类似问题](https://stackoverflow.com/questions/12526054/autorotate-in-ios-6-has-strange-behaviour)

# c++ - cin.get() 错误

> ID：13834377
> 
> 赞同：0
> 
> 时间：2012-12-12T06:53:14.020
> 
> 标签：c++, input

我对 C++ 相当陌生，需要对函数 cin.get() 有所了解。我写了这个函数，我在这一行得到一个错误

```
string getName(string& name){
    cout<<"Enter your full name: ";
    cin.get(cin,name);      //this line
    return name; 
} 
```

具体来说，我收到一个错误`.`，错误说明：

> 没有重载函数的实例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:59:18.890

替换这一行：

```
cin.get(cin,name); 
```

有了这个：

```
cin >> name 
```

编辑：根据您处理空格的最新评论，您可以使用：

```
cin >> skipws >> name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:59:53.883

您需要`get`首先对 name-lastname 使用 c 样式的字符串：

```
string getName(string& name){
  char str[256];
  cout<<"Enter your full name: ";
  cin.get(str, sizeof(str));
  return name = str; 
} 
```

# python - 使用 tox 在 windows 上设置多个 python 安装

> ID：13834381
> 
> 赞同：5
> 
> 时间：2012-12-12T06:53:34.400
> 
> 标签：python, virtualenv, tox

我正在尝试在 Windows 上设置[tox](http://tox.testrun.org/latest/)以针对多个 python 安装运行测试。我已经将每个 python 安装在名为 的文件夹中`C:\Python\PythonXX_YY`，`XX`它是 python 版本（例如 27）并且`YY`是 32 或 64。目前，我的 PATH 中唯一的 python 是`C:\Python\Python33_64`，因为我使用新的 python 启动器来运行我想要的任何版本。我也在从这个版本运行 tox。

第一个问题是 tox 没有检测到这些安装，大概是因为它们不在默认位置。我可以通过在 tox.ini 中为每个环境设置路径来解决这个问题，但它使设置非常适合我的计算机。有没有更好的方法让 tox 知道我的蟒蛇在全球范围内的位置？

第二个问题是，在 tox.ini 中设置 python 位置，当我运行它时出现以下错误（对于 Python27）：

```
Traceback (most recent call last):
  File "c:\Python\Python33_64\lib\site-packages\virtualenv.py", line 2557, in <module>
    main()
  File "c:\Python\Python33_64\lib\site-packages\virtualenv.py", line 961, in main
    never_download=options.never_download)
  File "c:\Python\Python33_64\lib\site-packages\virtualenv.py", line 1062, in create_environment
    site_packages=site_packages, clear=clear))
  File "c:\Python\Python33_64\lib\site-packages\virtualenv.py", line 1255, in install_python
    copy_required_modules(home_dir)
  File "c:\Python\Python33_64\lib\site-packages\virtualenv.py", line 1193, in copy_required_modules
    dst_filename = change_prefix(filename, dst_prefix)
  File "c:\Python\Python33_64\lib\site-packages\virtualenv.py", line 1164, in change_prefix
    (filename, prefixes)
AssertionError: Filename c:\Python\Python33_64\lib\site-packages\readline.py does not start with any of these prefixes: ['c:\\python\\python27_64']

ERROR: InvocationError: c:\python\python27_64\python.exe c:\Python\Python33_64\lib\site-packages\virtualenv.py --distribute py27 (see C:\Users\david.townshend\Documents\Global\Programming\norman\.tox\py27\log\py27-0.log) 
```

看起来它试图从 Python3.3 安装 Python2.7 的东西，但我以前从未真正使用过 virtualenv，所以我可能会误解这个错误。

我不确定解决方案是什么，但在我看来，显而易见的解决方案应该是让 tox 使用 python 启动器来获取它需要的 python 版本。有没有办法让它做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-16T09:14:08.460

看起来 tox 在这些位置寻找蟒蛇：

```
m = re.match(r"python(\d)\.(\d)", name)
if m:
    # The standard names are in predictable places.
    actual = r"c:\python%s%s\python.exe" % m.groups() 
```

所以你应该把你的蟒蛇放在 c:\Python3.3\ 等处。注意点`.`而不是下划线`_`。虽然这是一种痛苦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-04T11:06:59.920

我不确定当 OP 第一次提出问题时 Tox 是否这样做了，但现在似乎可以单独设置每个环境，如下所示：

```
[tox]
envlist = pyw35,pyw36
skip_missing_interpreters=True

[testenv]
commands = {envpython} setup.py test

[testenv:pyw35]
basepython = C:/Python/64bit/351/python.exe

[testenv:pyw36]
basepython = C:/Python/64bit/362/python.exe 
```

[user330612 对此](https://stackoverflow.com/q/38271311/958580)提供了一个变体，但我个人无法让它工作。

```
[testenv]
commands = {envpython} setup.py test
basepython=
   pyw35: C:/Python/64bit/351/python.exe
   pyw36: C:/Python/64bit/362/python.exe 
```

# php - 让 Cron 通过 cURL 而不是 PHP 处理器执行命令有缺点吗？

> ID：13834382
> 
> 赞同：2
> 
> 时间：2012-12-12T06:53:43.777
> 
> 标签：php, cron

因为我使用的是一个设置了路由的 PHP 框架，所以将我的 Cron 命令设置为与我在浏览器中键入的相同 URL 会更简单；使用 cURL 我可以做到这一点。

例子：

```
10 * * * * curl "http://domain.com/forum/cron_daily_digests" >/dev/null 2>&1 
```

**问题：这是否比通过 PHP 解析器运行它有缺点？**

```
10 * * * * /usr/bin/php /www/virtual/username/cron.php > /dev/null 2>&1 
```

由于控制器/方法框架设置，我的脚本需要 URL 路由才能知道要加载哪些部分。

在我研究另一种方法之前，我想看看通过 cURL 来做这件事是否可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:33:29.060

虽然没有*具体*的缺点，但有些事情需要担心。

*   它占用了与 Web 服务器的连接。通常不是问题。
*   该脚本必须遵守通常的规则并在客户端超时之前返回响应。
*   脚本必须位于可访问的位置。您需要对包含它的目录应用一些访问控制规则。

这很丑陋，不建议这样做，但它会起作用。听起来像 PHP，好吧...

# html - 在隐藏溢出的 div 内水平对齐 div

> ID：13834384
> 
> 赞同：0
> 
> 时间：2012-12-12T06:53:46.170
> 
> 标签：html, css

假设我有这个 HTML：

```
<style>
.b{
float:left; width: 300px; height: 300px;
}
</style>

<div style="overflow:hidden;width:300px;height:300px;" id="a">
    <div class="b" style="background-color: red"></div>
    <div class="b" style="background-color: green"></div>
    <div class="b" style="background-color: blue"></div>
</div> 
```

我希望`.b`div 坐在一条线上。但是，它们仅在`#a`' 溢出正常时才这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:02:06.913

添加和删`white-space: nowrap;`​​除`#a`float:left from`.b`

**带滚动条**

```
#a{overflow:auto;width:300px;height:300px; white-space: nowrap;}
.b{
width: 300px; height: 300px; border:solid black 1px; display:inline-block
}​ 
```

**[演示](http://jsfiddle.net/xhgmU/3/)**

* * *

**没有滚动条**

```
#a{height:300px; white-space: nowrap;}
.b{
width: 300px; height: 300px; border:solid black 1px; display:inline-block
}​ 
```

**[演示 2](http://jsfiddle.net/xhgmU/4/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:59:56.403

添加 css 属性**display:inline-block**。

改写

```
<div style="overflow:hidden;width:300px;height:300px;" id="a"> 
```

到

```
<div style="overflow:hidden;width:300px;height:300px;display:inline-block" id="a"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T07:05:27.560

你的#a 的大小为 300px x 300px - 所以在这种情况下，你只能看到红色的 div 3 个元素无法容纳在一个尺寸较小的元素中，每个 .b 元素的宽度为 300px，所以你必须将 #a 的宽度更改为 900px -

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T07:24:24.990

您所要做的就是`display:inline-block;`为您的班级 b 赋予一种风格。就是这样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T07:26:10.200

`Overflow`只是一个属性，它不能大于 300px；

因此，为了将它们彼此相邻堆叠，请使用该属性`float:left;`并确保您留在 300px 内；

**例子**

```
<style>
.b{
float:left; width: 100px; height: 300px;
}
</style>

<div style="overflow:hidden;width:300px;height:300px;" id="a">
    <div class="b" style="background-color: red"></div>
    <div class="b" style="background-color: green"></div>
    <div class="b" style="background-color: blue"></div>
</div> 
```

# javascript - 对 HTML 表进行排序

> ID：13834387
> 
> 赞同：0
> 
> 时间：2012-12-12T06:53:55.680
> 
> 标签：javascript, jquery, html, sorting

我已经像这样动态地创建了 html 表。现在我想在客户端单击名称标题时根据名称对表格进行排序。我怎样才能做到这一点？

```
 StringBuilder sb = new StringBuilder();
        sb.Append("<table border='1' id='tblCustomers'>");

        sb.Append("<tr>");

        sb.Append("<th>");
        sb.Append("Name");
        sb.Append("</th>");

        sb.Append("<th>"); 
        sb.Append("City");
        sb.Append("</th>");          

        sb.Append("</tr>");
        for(int i=0; i< dtcustomers.count;i++)
        {
           sb.Append("<tr>");

           sb.Append("<td>");
           sb.Append(dtcustomers.Rows[i]["Name"]);
           sb.Append("</td>");

           sb.Append("<td>");
           sb.Append(dtcustomers.Rows[i]["City"]);
           sb.Append("</td>");

           sb.Append("</tr>");
        }

         sb.Append("</table>");
         this.mydiv.InnerHtml = sb.ToString(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T06:56:35.023

由于您使用的是 jQuery 并希望在客户端完成此操作，您可以试试[这个方便的插件](http://tablesorter.com/docs/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-19T12:36:25.403

这也非常有用：[https ://www.kryogenix.org/code/browser/sorttable/](https://www.kryogenix.org/code/browser/sorttable/)

它为您提供了一个要安装的 js 库，您所要做的就是将其链接到您的项目`<script src="sorttable.js"></script>`并将一个类添加到您的表中。真的很容易。

# objective-c - 如何将字符串对象添加到 NSMutableArray

> ID：13834390
> 
> 赞同：29
> 
> 时间：2012-12-12T06:54:06.553
> 
> 标签：objective-c, nsmutablearray

我有一个名为 randomSelection 的 NSMutableArray：

```
NSMutableArray *randomSelection; 
```

然后，如果满足某些条件，我将尝试将字符串添加到该数组中：

```
[randomSelection addObject:@"string1"]; 
```

然后我试图输出字符串，以确定它是否添加了它：

```
NSString *test = [randomSelection objectAtIndex:0];
NSLog(test); 
```

但是没有任何东西输出到错误日志中，我不知道为什么。

任何帮助/提示表示赞赏。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-12-12T07:00:58.493

我认为您缺少为数组分配内存。所以试试这个

```
NSMutableArray *randomSelection = [[NSMutableArray alloc] init];
[randomSelection addObject:@"string1"];
NSString *test = [randomSelection objectAtIndex:0];
NSLog(test); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T07:01:38.210

```
NSMutableArray *randomSelection =  [[NSMutableArray alloc]init];
[randomSelection addObject:@"string1"]; 
```

你需要先分配它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-12T07:14:51.473

首先使用以下语句分配数组，然后在其中分配对象。

```
NSMutableArray *randomSelection =  [[NSMutableArray alloc] init];
[randomSelection addObject:[NSString stringWithFormat:@"String1"]];
[randomSelection addObject:[NSString stringWithFormat:@"String2"]];
NSLog(@"Array - %@", randomSelection); 
```

这肯定会解决你的问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-12T07:29:36.653

只需分配您的 NSMutableArray。你会得到解决你的问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-12T07:20:10.057

尝试这个：

```
NSMutableArray *randomSelection = [[NSMutableArray alloc]init]; 
[randomSelection addObject:@"string1"]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-11T07:58:19.863

**斯威夫特：**

```
var randomSelection: [AnyObject] = [AnyObject]()
randomSelection.append("string1")
let test: String = randomSelection[0] as! String
print(test) 
```

或者

```
let array : NSMutableArray = []
array.addObject("test String")
print(array) 
```

# android - 如何获取在java中的android xml布局文件中定义的所有按钮对象，如childat（）？

> ID：13834391
> 
> 赞同：0
> 
> 时间：2012-12-12T06:54:12.903
> 
> 标签：android, android-layout, button

我想在 Button inflated 的高度上为所有按钮设置 drawable 的高度。我可以得到所有像这样的按钮对象

```
for(int i=0;i<layout.getChildCount();i++)
{
Button b = layout.childAt(i);
b.setHeight(x);
} 
```

我的问题是在所有嵌套布局中获取所有唯一按钮。在某些布局中也有 Buttons 和 textvies，我怎样才能只访问按钮？

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T07:01:31.677

我不明白你为什么要这样做，但你可以试试这个，

```
for(int i=0; i < layout.getChildCount(); i++)
{
    View v = layout.getChildAt(i);
    if (v instanceof Button) {
        Button b = (Button) v;
        b.setHeight(x);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T02:33:30.560

初始化按钮

```
......
Button btn1 = (Button) findViewById(R.id.myBtn1);
Button btn2 = (Button) findViewById(R.id.myBtn2);
List<Button> btns = new ArrayList<Button>();
btns.add(btn1);
btns.add(btn2);
...... 
```

操作第二个按钮

```
int i=2;
btns.get(i).setWidth(100);
btns.get(i).setHeight(100); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-12T11:44:50.417

添加了一个新类并扩展了 Button ，然后覆盖了您想要的方法:)

在我的情况下，我覆盖了 setBackgroundDrawable()

```
@Override
public void setBackgroundDrawable(Drawable background) {

Log.d("button","setting new background  ");
Drawable[] layers = new Drawable[5];
Resources resources = getResources();

layers[0] = resources.getDrawable(R.drawable.outer_rectangle);
layers[1] = resources.getDrawable(R.drawable.inner_rectangle);
layers[2] = resources.getDrawable(R.drawable.upper_ovel);
layers[3] = resources.getDrawable(R.drawable.gradient_fill);
layers[4] = resources.getDrawable(R.drawable.lower_ovel);

LayerDrawable layerDrawable = new LayerDrawable(layers);

layerDrawable.setLayerInset(0, 0, 0, 0, 0);
layerDrawable.setLayerInset(1, 3, 3, 3, 0);
layerDrawable.setLayerInset(2, 3, 15, 3, 25);
layerDrawable.setLayerInset(3, 3, 23, 3, 0);
layerDrawable.setLayerInset(4, 4, 60, 4, -5);

super.setBackgroundDrawable(layerDrawable);
} 
```

# magento - magento 设置切换货币网址

> ID：13834395
> 
> 赞同：2
> 
> 时间：2012-12-12T06:54:31.657
> 
> 标签：magento

我对货币 URL 有疑问。

假设我的网址是 www.example.com/by_women/?color=black 现在我想在更改货币后重定向同一页面。这是我的代码。

* * *

```
<?php if($this->getCurrencyCount() > 1): ?>
    <span>Select Currency:</span>
    <select name="custom-currency-selector" id="custom-currency-selector">
    <?php foreach ($this->getCurrencies() as $_code => $_name): ?>
        <option value="<?php echo $this->getSwitchCurrencyUrl($_code)?>"
            <?php if($_code == $this->getCurrentCurrencyCode()): ?>
                selected="SELECTED"
            <?php endif; ?>>
            <?php echo $_code ?>
        </option>
    <?php endforeach; ?>
    </select>
    <?php endif; 
```

# loops - F# 类型和循环

> ID：13834396
> 
> 赞同：6
> 
> 时间：2012-12-12T06:54:38.760
> 
> 标签：loops, types, f#

我正在编写一个创建一副纸牌的 F# 教程。列出了类型，但我不明白如何遍历类型以创建完整套牌的地图。我希望做类似的事情

```
Foreach rank in ranks
   Foreach suit in suits
       somehow combine the two
   next suit
next rank 
```

有没有办法做到这一点？以下是创建的类型。

我想如果我将它们从类型更改为列表，它们可以合并，对吗？那么，类型的意义何在？

```
type suits=
    |Spade=1
    |Heart=2
    |Club=3
    |Diamond=4

type ranks=
    |ValCard of int
    |Jack 
    |Queen
    |King

type deck= Deck of ranks * suits 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T07:37:21.697

一种替代方法，它使用可区分的联合，它比具有 F# 语法的枚举更好地啮合

```
type suit=
    |Spade
    |Heart
    |Club
    |Diamond
    static member all = [Spade;Heart;Club;Diamond]

type rank=
    |ValCard of int
    |Jack 
    |Queen
    |King
    static member all =([1..10]|> List.map (ValCard)) @ [Jack;Queen;King]

type card = |Card of rank * suit

let all_cards = suit.All |> List.collect (fun s -> rank.all |> List.map (fun r -> Card(r,s)) 
```

然后你可以做一些整洁的模式匹配，比如

```
all_cards 
|> List.iter (fun c ->
    match c with
    |Card(King,Spade) -> ...
    |Card(King,_) -> ...
    |Card(_) -> ... 
```

您甚至可以定义一些活动模式来获得红/黑卡。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T07:16:35.427

[枚举](http://msdn.microsoft.com/en-us/library/dd233216.aspx)是表示卡片的好选择。您可以免费比较西装和等级之间的比较，并轻松地将枚举从/转换为`int`.

```
type suit =
    | Spade = 1
    | Heart = 2
    | Club = 3
    | Diamond = 4

type rank = 
    | Ace = 1 | Two = 2 | Three = 3 | Four = 4 | Five = 5 | Six = 6 | Seven = 7 
    | Eight = 8 | Nine = 9 | Ten = 10 | Jack = 11 | Queen = 12 | King = 13

/// 'Card' is a type which represents a particular card     
type Card = Card of rank * suit

/// 'deck' is a list consisting of all cards in a full deck
let deck = [ for r in 1..13 do
               for s in 1..4 do
                 yield Card(enum<rank> r, enum<suit> s) ] 
```

如果您选择有[区别的联合](http://msdn.microsoft.com/en-us/library/dd233226.aspx)，则必须手动制作所有`suit`s 和所有`rank`s 的列表。优点是 DU 的模式匹配比枚举更好。

```
type suit =
    | Spade
    | Heart
    | Club
    | Diamond

type rank = | Ace | Two | Three | Four | Five | Six | Seven 
            | Eight | Nine | Ten | Jack | Queen | King

type Card = Card of rank * suit

let private suits = [Spade; Heart; Club; Diamond]
let private ranks = [Ace; Two; Three; Four; Five; Six; Seven; 
                     Eight; Nine; Ten; Jack; Queen; King]

let deck = [ for rank in ranks do
               for suit in suits do
                 yield Card(rank, suit) ] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T18:19:55.187

作为垫答案的附录，您还可以使用反射来生成甲板：

```
type Union<'T> private () =
  static member val Cases = 
    FSharpType.GetUnionCases(typeof<'T>)
    |> Array.map (fun case -> FSharpValue.MakeUnion(case, null) :?> 'T)

let deck = 
  [ for rank in Union<rank>.Cases do
      for suit in Union<suit>.Cases do
        yield Card(rank, suit) ] 
```

# jquery - 如何在jquery中“循环”回某个函数

> ID：13834398
> 
> 赞同：0
> 
> 时间：2012-12-12T06:54:43.883
> 
> 标签：jquery, function, loops, click

我试图了解如何**运行一个函数**，然后运行**第二个函数**......然后**返回到原来的函数**。（一个循环？）

正如您在我的小提琴中看到的那样：......我试图让这个家伙**在 click 上**正确行走，**当第二次点击时**，他会回到原来的位置。**第三次单击时**，我希望他**继续模式**....（例如，右，左，右，左...）

这是针对我正在开发的点击式游戏（学习 jquery/javascript 的目标 [动机]）。

感谢您对此的帮助和耐心。抱歉，n00b 代码...

```
$(document).ready(function() {
    $(".img").one("click", function() {
        $(".img").attr('src', "http://www.kolbaba.com/uploads/jsfiddle/tempImgs/walking.gif");
        $(".img").animate({
            "left": "+=300px"
        }, 1000, function() {
            $(".img").attr('src', "http://www.kolbaba.com/uploads/jsfiddle/tempImgs/standing.gif");
            $(".img").click(function() {
                $(".img").attr('src', "http://www.kolbaba.com/uploads/jsfiddle/tempImgs/walkingLeft.gif");
                $(".img").animate({
                    "left": "-=300px"
                }, 1000, function() {
                    $(".img").attr('src', "http://www.kolbaba.com/uploads/jsfiddle/tempImgs/standing.gif");
                    event.preventDefault();
                });
            });
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T07:01:33.407

使用`.toggle()`,

所以你的代码看起来像这样，

```
$(".img").toggle(function(){

    //Code to go right

}, function(){

    //Code to go left

}); 
```

阅读[.toggle()](http://api.jquery.com/toggle/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:15:17.590

Toggle 很好，它也可以工作，我做了一个简单的[演示](http://jsfiddle.net/68epJ/163/)。

但是我为那些不想使用切换的人找到了另一种解决方案。我知道切换使用很耗时，但我想在这里分享它。

```
$(document).ready(function(){
var count=1
    $(".img").click("click", function(){

    count=count+1;
if(count%2==0)
{

$(".img").attr('src',"http://www.kolbaba.com/uploads/jsfiddle/tempImgs/walking.gif");
    $(".img").animate({"left": "+=300px"}, 1000, function() {

        $(".img").attr('src',"http://www.kolbaba.com/uploads/jsfiddle/tempImgs/standing.gif");
    });
}
else
{

$(".img").attr('src',"http://www.kolbaba.com/uploads/jsfiddle/tempImgs/walkingLeft.gif");
              $(".img").animate({"left": "-=300px"}, 1000, function() {
            $(".img").attr('src',"http://www.kolbaba.com/uploads/jsfiddle/tempImgs/standing.gif");
              });
}

    }); 
```

});

# python - 无法在 Windows 7 机器中使用 OpenCV 2.4.3、Python 2.7 打开“.mp4”视频文件

> ID：13834399
> 
> 赞同：7
> 
> 时间：2012-12-12T06:54:50.513
> 
> 标签：python, windows, opencv, ffmpeg, mp4

我目前正在从事一个涉及读取 mp4 视频文件的项目。我遇到的问题是它在 Windows 7 机器上使用 Python 2.7（32 位）、OpenCV 2.4.3（cv2.pyd）。

代码片段如下：

```
try:
        video = cv2.VideoCapture("video.mp4")
except:
        print "Could not open video file"
        raise
print video.grab() 
```

" `video.grab()`" 总是返回 false：意味着它不读取文件 " `video.mp4`" 但是当我们尝试这个时：

```
try:
        video = cv2.VideoCapture("video.avi")
except:
        print "Could not open video file"
        raise
print video.grab() 
```

" `video.grab()`" 返回 true：表示它能够读取 " `.avi`" 文件。

另一个是我们在 Linux 和 Mac 上尝试过这个相同的片段，它似乎工作正常，这意味着它能够读取 mp4 文件和 avi 文件。

这个问题类似于[这个问题](http://answers.opencv.org/question/2463/video-capture-issue-in-python/)和[这个问题](http://answers.opencv.org/question/1965/cv2videocapture-cannot-read-from-file/)。两者都还没有一个明确可行的答案。

除了仅使用 Linux 或 Mac 进行编程之外，我将不胜感激任何帮助或解决方法，因为我需要它才能在所有三个系统上工作。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-04-02T09:17:31.923

我之前遇到过同样的问题，通过这一步解决：

检查您的 OpenCV python 版本

```
>>> from cv2 import __version__
>>> __version__
'2.4.0' 
```

然后将您的复制`opencv_ffmpeg.dll`到`C:\Python27\`并将其重命名为相关的 OpenCV Python 版本。就我而言，我不得不将其重命名为`opencv_ffmpeg240.dll`.

**更新：**在 Windows 上，您可以在 OpenCV 安装的 build 文件夹中找到 opencv_ffmpeg DLL。例如：`C:\dev\opencv\build\x86\vc12\bin`

然后，只需将文件复制并粘贴`opencv_ffmpeg<version>.dll`到 Python 安装的根文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-24T15:51:32.633

我在 Windows 7 操作系统下使用 OpenCV 版本 2.4.11 和 Python 2.7 遇到了这个问题。我无法打开和操作 mp4 文件，但能够打开 avi 文件。

我的解决方案是从我的 OpenCV 安装的 build 文件夹中复制 opencv_ffmpeg2411.dll 文件，并将其粘贴到我的 Python 安装的根文件夹中。因此，就我而言，DLL 文件位于“C:\dev\opencv\build\x86\vc12\bin”中，我将其复制到“C:\Program Files(x86)\Python2.7”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T23:46:38.080

您的 mp4 可能具有您的系统不支持的编解码器（或 opencv 不支持），而您的 avi 编解码器可能受支持。此外，如果 opencv 使用 libav 进行解码，您应该安装它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-24T12:33:18.003

我的`.mpg`视频文件也有同样的问题。无法打开它`openCV`。

我`openCv_ffmpeg330.dll`从`C:\OpenCV\build\bin folder into the c:\python27`文件夹中复制了。

那行得通！

# mercurial - 防止对 mercurial 分支之间的数据库迁移进行追溯修改

> ID：13834405
> 
> 赞同：0
> 
> 时间：2012-12-12T06:55:35.173
> 
> 标签：mercurial, migration, branch, mercurial-hook

是否可以阻止某人推送涉及已应用（提交到单独的分支）数据库迁移的提交？

例如，在默认分支中存在现有的迁移 01 和 02（已应用）。在开发分支中，有人添加了迁移 03，但也修改了迁移 02。如何通过 mercurial hook 防止此提交？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:54:50.037

您可以编写一个`pretxnchangegroup`钩子来检查修改迁移目录中现有文件的提交。[用一些hg API 文档](http://mercurial.selenic.com/wiki/MercurialApi)拼凑一些东西应该不难。

# sql-server-2008 - SQL Server (T-SQL) 日期时间转换

> ID：13834406
> 
> 赞同：1
> 
> 时间：2012-12-12T06:55:37.427
> 
> 标签：sql-server-2008, tsql

也许是一个愚蠢的问题，但我想澄清一下。我创建了一个具有如下日期参数的脚本：

```
DECLARE @dateparam as datetime
SET @dateparam = '01-01-2013 00:00:00' 
```

即使日期字符串不是“正确”格式，当我对其进行测试时，它看起来也能正常工作`yyyy-MM-dd hh:mm:ss`。我将计算机区域设置更改为英语，脚本仍然执行它应该做的事情。

这是因为我的计算机中有 SQL Server 2008 R2，它知道如何转换日期，或者我在使用我使用过的日期格式时会遇到问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T07:19:55.050

转换`01-01-2013`不会暴露诸如哪个`01`月、哪个月之类的问题。

这不是一种安全的格式。

安全格式（用于转换为`datetime`，而不是转换为`datetime2`）是：

```
YYYYMMDD                               20121201
YYYY-MM-DD'T'hh:mm:ss                  2012-12-01T10:43:29
YYYY-MM-DD'T'hh:mm:ss.mil              2012-12-01T10:43:29.337 
```

坚持那些，只有那些。（示例均代表 2012 年 12 月 1 日）

或者，更好的是，如果可以避免的话，根本不要将日期视为字符串。例如，如果您从 .NET 代码调用 SQL Server，则`DateTime`在代码中将日期保留为 s，并让 ADO.NET 和 SQL Server 处理任何所需的转换以使它们变为`datetime`s - 无需将它们相互转换字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:42:00.807

您正在从看起来像日期的东西进行隐式转换，但实际上是一个字符串（'01-01-2013 00:00:00'）。您应该通过指定格式来明确转换，而不是信任 SQL Server 以正确猜测字符串的格式。

这可以通过使用 CONVERT（不是 CAST）并指定“样式”来完成。此处列出了不同的样式：http: [//msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)。

# ruby-on-rails - 管理员时以不同用户角色查看页面的下拉菜单

> ID：13834408
> 
> 赞同：0
> 
> 时间：2012-12-12T06:55:38.563
> 
> 标签：ruby-on-rails, cancan, rails-3.1

我目前在下面有一个简化的视图...

```
<% if can? :manage, @task %>
  Admin 
<% elsif can? :update, @task %>
  Moderator
<% elsif current_user %>
  User
<% else %>
  Not logged in
<% end %> 
```

此视图有大量字段，每个用户都包含在类似的条件中，我目前必须登录和退出测试帐户以检查格式。

我想以管理员身份登录，但有一个下拉菜单来选择页面是否呈现为`Admin`or `Moderator`or `User`or`Not logged in`

我对解决方案有一些粗略的想法，但不知道该遵循哪个...

*   使用额外的用户列烘焙到 cancan，我可以从导航栏下拉表单中设置
*   创建用户特定的方法
*   允许 url 参数请求会话视图并相应地呈现

**有没有围绕这个的最佳实践？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T01:35:03.840

如果你实现了像 Unix 的真实/有效用户二分法这样的东西呢？

您现有的基础设施是基于已发生的任何身份验证的“真实”用户，但您还将“有效用户”与每个会话相关联。

有效用户开始时与真实用户相同，但可以更改为其他用户。更改有效用户应以具有管理员权限的真实用户为条件。

将您的所有布局设置为*有效*用户而不是*真实*用户。将您的“更改有效用户”下拉菜单设置为*真实*用户。

# c# - 如何一次配置表名和id

> ID：13834418
> 
> 赞同：1
> 
> 时间：2012-12-12T06:56:26.940
> 
> 标签：c#, .net, entity-framework, ef-code-first, entity-framework-5

我使用的是EF5 Code First，我有`XXXEntity`基于`Entity`类命名的实体，在`Entity`类中有`Id`属性。

这是问题所在，通常 EF 将为每个名为 XXXEntities 并具有 Id 字段的实体创建表。我想要的是表应该命名`XXX`（没有实体），ID 应该是`XXXId`. 如何通过使用约定立即做到这一点。我知道我可以一一覆盖表名和 Id 名称。但这有点无聊且不可重用，有没有更好的方法可以使用约定或 EF 5 上的东西来做到这一点？

**更新**

我阅读了有关[自定义代码优先约定](http://entityframework.codeplex.com/wikipage?title=Custom%20Conventions)的信息，但不确定这是一个过时的页面还是未实现的功能。`Properties<T>()`因为我在 EF 5 上找不到方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T01:23:40.673

不，您不能使用 EF 5 做到这一点，您的链接是 EF 6 的未来功能，[请参见此处](http://weblogs.asp.net/scottgu/archive/2012/12/11/entity-framework-6-alpha2-now-available.aspx)

但是您可以通过反射轻松地做到这一点，为了可重用性，您可以将其作为 的扩展方法`DbModelBuilder`，有点慢，但它解决了您的问题。在这里你可以做什么：

```
public static class MyCustomNamingConvention
{
    public static void ToMyDatabaseNamingConvention(
        this DbModelBuilder mb, IEnumerable<Type> entities)
    {
        foreach (var entity in entities)
        {
            var mi = typeof(MyCustomNamingConvention)
                .GetMethod("MyNamingConvention")
                .MakeGenericMethod(entity);
            mi.Invoke(null, new object[] { mb });
        }
    }

    public static void MyNamingConvention<T>
        (DbModelBuilder mb) where T : Entity
    {
        var tableName = typeof(T).Name.Replace("Entity", "");
        mb.Entity<T>().HasKey(x => x.Id);
        mb.Entity<T>().Property(x => x.Id).HasColumnName(tableName + "Id");
        mb.Entity<T>().ToTable(tableName);
    }

} 
```

只需在您的 DBContext on`OnModelCreating`方法上使用它

```
protected override void OnModelCreating(DbModelBuilder mb)
{
    base.OnModelCreating(mb);
    mb.ToMyDatabaseNamingConvention(GetEntities());
} 
```

笔记：

*   记得添加适当的命名空间 `MyCustomNamingConvention`。
*   `GetEntities()`是一种迭代实体的方法（记得跳过`Entity`基类）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:10:44.853

使用它来删除表格复数：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
} 
```

我似乎找不到可以为列 ID 名称禁用的约定。看看[http://msdn.microsoft.com/en-us/library/gg696316(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/gg696316(v=vs.103).aspx)

# error-handling - 服务器静音时如何替换Jetty的默认错误页面

> ID：13834422
> 
> 赞同：1
> 
> 时间：2012-12-12T06:56:42.703
> 
> 标签：error-handling, jetty

我正在尝试处理我的服务器被静音并且用户尝试访问它的用例。今天，当服务器静音时，用户会看到码头的默认错误页面为 503（HTTP 错误：503）。我想用自定义错误页面替换这个错误页面。我的 web.xml 上确实有自定义页面，但没有加载（因为服务器已静音）。我尝试编写自己的扩展 ErrorPageErrorHandler 的错误处理程序，并在 jetty-web.xml 上注册它 O debug 我看到我的类已加载，但当错误发生时它不会激活。

我通过停止我的数据库服务来使服务器静音。似乎这会导致 ContextLoader 失败。这是部分堆栈跟踪，任何见解都会有所帮助：

> ```
> at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:192)
> at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
> at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:643)
> at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:233)
> at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1213)
> at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:589)
> at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:454)
> at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
> at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:224)
> at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:167)
> at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
> at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:89)
> at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
> at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:89)
> at org.eclipse.jetty.server.Server.doStart(Server.java:261)
> at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
> at com.hp.qc.JettyRunner.startJetty(JettyRunner.java:73)
> at com.hp.qc.JettyRunner.main(JettyRunner.java:31) 
> ```

# jquery - jquery隐藏滚动到页面顶部div

> ID：13834431
> 
> 赞同：0
> 
> 时间：2012-12-12T06:57:31.987
> 
> 标签：jquery, navigation

当我在页面顶部时，我需要在 jQuery 中隐藏“Go-to Top” div 按钮。当我位于页面顶部时，该按钮出现，当我开始向下滚动页面时，我需要在滚动条到达顶部时隐藏该按钮并显示它。

这是我的代码，

```
$(function() {
    var $elem = $('#content');

    $('#nav_up').fadeIn('slow');
    $('#nav_down').fadeIn('slow');  

    $(window).bind('scrollstart', function(){
    $('#nav_up,#nav_down').stop().animate({'opacity':'0.2'});
    });
    $(window).bind('scrollstop', function(){
        $('#nav_up,#nav_down').stop().animate({'opacity':'1'});
    });

    $('#nav_down').click(
        function (e) {
            $('html, body').animate({scrollDown: $elem.height()}, 800);
        }
    );
    $('#nav_up').click(
        function (e) {
            $('html, body').animate({scrollTop: '0px'}, 800);
        }
    );
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T07:32:18.947

只需添加一个窗口 scroll() 方法：

```
$(window).scroll(function() {
    if ($(this).scrollTop() > 100) {
        $('#nav_up').fadeIn();
    } else {
        $('#nav_up').fadeOut();
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:32:39.903

```
if($(window).scrollTop() == 0){
    //code to hide your element
} 
```

# c# - 如何在 Windows 8 中加载带有 post 参数的 webview？

> ID：13834447
> 
> 赞同：0
> 
> 时间：2012-12-12T06:58:35.827
> 
> 标签：c#, windows, xaml, microsoft-metro

我需要在 Metro 应用程序中使用 webview 加载网站。我可以使用以下方法发布登录参数。如何在webview中加载相同的？？？？？？

```
 string post_data = "userName=test123&password=test@321";

        // this is where we will send it
        string uri = "http://tesproject.com";

        // create a request
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);
        request.Method = "POST";

        // turn our request string into a byte stream
        byte[] postBytes = Encoding.UTF8.GetBytes(post_data);

        // this is important - make sure you specify type this way
        request.ContentType = "application/x-www-form-urlencoded";
        Stream requestStream = await request.GetRequestStreamAsync();

        // now send it
        requestStream.Write(postBytes, 0, postBytes.Length);

        // grab te response and print it out to the console along with the status code
        WebResponse response = await request.GetResponseAsync(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:54:19.430

WebView 类不支持直接导航到带有 POST 参数的 URL。

但是，您可以使用您的代码和 WebResponse 来获取 HTML。然后使用 WebView 类的 NavigateToString 方法来渲染 HTML：

```
 HttpWebResponse httpResponse= (HttpWebResponse)response;
            StreamReader reader=new StreamReader(httpResponse.GetResponseStream());
            string htmlString= reader.ReadToEnd();
            if (!string.IsNullOrEmpty(htmlString))
                webView.NavigateToString(htmlString); 
```

或者，您可以使用带有您的帖子值和一些 javascript 的表单创建自己的 HTML 来提交表单，但这可能会更麻烦一些。

# tinymce - htmlPurifier 不适用于 TinyMCE

> ID：13834456
> 
> 赞同：3
> 
> 时间：2012-12-12T06:59:16.887
> 
> 标签：tinymce, xss, htmlpurifier

我正在使用 htmlPurifier 来防止来自用户的 XSS 攻击，并且在 input type="text" 字段上一切正常。但是，当我尝试清理 tinyMCE 文本区域时，htmlPurifier 似乎不起作用，例如：

**简单的输入文本字段**

输入。：

```
<script>alert("XSS")</script>Cleaning Test 
```

输出：清洁测试

**tinyMCE 文本区域**

输入。：

```
<script>alert("XSS")</script> 
```

输出：`<script>alert("XSS")</script>`

我错过了什么 ？为什么 htmlPurifier 可以处理简单的输入文本，而 tinyMCE 文本区域不可以？

Ps.：魔术行情已关闭

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T20:08:32.977

我想我发现了问题所在。

tinyMCE 自动编码实体，例如：

```
< into &lt;
> into &gt;
" into &quot;
& into &amp; 
```

我尝试在 tinyMCE 上使用不同类型的 entity_encoding，但它们似乎都不能按我的意愿工作，所以我使用 PHP: html_entity_decode 来解码 tinyMCE 文本区域，然后我使用 htmlPurifier 来清理数据，现在一切正常。

希望其他人觉得这很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:20:50.220

您需要调用`tinymce.triggerSave()`才能将 tinymce 内容写回 tinymce 源元素（可以是 textarea），然后净化器才能工作。

# android - Android：无法在 WebView 中加载具有 javascript 文件的简单 html 数据？

> ID：13834458
> 
> 赞同：3
> 
> 时间：2012-12-12T06:59:24.380
> 
> 标签：android, html-parsing, android-webview, android-loader

```
WebView web_view = (WebView) findViewById(R.id.webView1);
        web_view.getSettings().setJavaScriptEnabled(true);
        web_view.getSettings().setPluginsEnabled(true);
        web_view.getSettings().setAllowFileAccess(true);

        String data;
        data = "<?xml version=\"1.0\" encoding=\"UTF-8\" ?>"
                + "<html>"
                + "<head>"
                + "<title>My First chart using FusionCharts XT</title>"
                + "<script type=\"text/javascript\" src=\"FusionCharts.js\">"
                + "</script>"
                + "</head>"
                + "<body>"
                + "<div id=\"chartContainer\">FusionCharts XT will load here!</div>"
                + "<script type=\"text/javascript\">"
                + "FusionCharts.setCurrentRenderer(\"javascript\");"
                + "var myChart = new FusionCharts(\"FusionCharts/Line.swf\", \"myChartId\", \"400\", \"300\", \"0\", \"1\" );"
                + "var dataString =\"<chart> <set label='0.00' value='0'/><set label='5.00' value='2' /><set label='7.00' value='3' /><set label='9.00' value='4' /><set label='12.00' value='2' /></chart>\"; "
                + "myChart.setXMLData(dataString);"
                + "myChart.render(\"chartContainer\");" + "</script>"
                + "</body>" + "</html>";

        Log.i("info", "Html " + data);

        web_view.loadData(data, "text/html; charset=UTF-8",null); 
```

在我的项目中，我正在使用融合图表。我正在制作一个 html 字符串数据并将其加载到 WebView 中，如上面的代码示例所示。当我在浏览器中运行此 html 文件时，它会运行并制作 Fusion 图表，但是当我使用 android Web 视图执行此操作时，它不会加载到我的 Web 视图中。我已经启用了 javascript。我将javascript文件粘贴到资产文件夹中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T19:17:58.143

首先，你提到的浏览器是你设备上的浏览器还是电脑上的浏览器？

现在，如果它在 android 浏览器（或您设备中的浏览器）中工作，那么问题是因为 javascript 文件位于您的资产文件夹中。当您通过相对路径（您使用的方式）指示资源时，webview 会相对于与您的 html 文件所在的文件夹相同的文件夹来搜索它。由于您使用字符串作为“html 文件”，因此我建议您使用[loadDataWithBaseURL()](http://developer.android.com/reference/android/webkit/WebView.html#loadDataWithBaseURL%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)。我在下面使用 assets 文件夹作为基本 URL 做了一个使用示例，试试看。

```
web_view.loadDataWithBaseURL("file:///android_asset/", data, "text/html", "UTF-8",null); 
```

> public void [loadDataWithBaseURL](http://developer.android.com/reference/android/webkit/WebView.html#loadDataWithBaseURL%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29) (String baseUrl, String data, String mimeType, String encoding, String historyUrl)
> 
> 在 API 级别 1 中添加 将给定数据加载到此 WebView 中，使用 baseUrl 作为内容的基本 URL。基本 URL 既用于解析相对 URL，也用于应用 JavaScript 的同源策略。historyUrl 用于历史条目。
> 
> 请注意，仅当 baseUrl 指定除“http”、“https”、“ftp”、“ftps”、“about”或“javascript”之外的方案时，以这种方式指定的内容才能访问本地设备文件（通过“文件”方案 URL） '。
> 
> 如果基本 URL 使用数据方案，则此方法等效于调用 loadData() 并且忽略 historyUrl。
> 
> 参数 baseUrl 用作页面基本 URL 的 URL。如果 null 默认为“关于：空白”。data 给定编码的数据字符串 mimeType 数据的 MIMEType，例如 'text/html'。如果为 null，则默认为“文本/html”。encoding 数据的编码 historyUrl 用作历史条目的 URL。如果 null 默认为“关于：空白”。

您可以尝试将 assets 文件夹作为 baseUrl 传递，所以我的猜测是您的代码会是这样的

希望这可以帮助！

# android - 如何更改先前活动中的数据

> ID：13834459
> 
> 赞同：0
> 
> 时间：2012-12-12T06:59:31.807
> 
> 标签：android, listview

我有一个一般情况，但无法弄清楚如何处理它。

我有一个 ListView，每个项目都有不同的可点击视图。其中1个是在项目中用户名旁边**添加为好友按钮。**

因此，在 ListViewAdapter 的 getView() 中，我以这种方式为这个按钮实现了 onClick。

```
onClick(){

//make the button invisible, for UX
//change the value of is_friend = 1, in the Adapter ArrayList, which will be helpful when listView is scrolled and getView is called again, to make it visible or invisible.
//Send the info to the server as an AsyncTask
} 
```

这工作正常。

**问题：**

而不是单击**添加为朋友**按钮，我可以单击**用户名**转到他的个人资料，然后单击该活动中的**添加为朋友**按钮。

现在，当我回到 ListView 时，添加为好友按钮仍然可见，因为适配器 ArrayList 具有从服务器获取的旧数据，我什至没有更改它们。

**单击用户名**时，我想到了**StartActivityForResult** 。但是，一旦我单击**添加为朋友**，我可能不会立即返回 ListView，用户的个人资料上还有很多其他操作。

 ****许多应用程序轻松处理的熟悉案例。关于这是如何完成的任何想法？

谢谢你

**编辑：**

尽管下面给出的答案有效。它们不是最好的方法。

因此，更好的方法可能是调用 listViewAdapter 的静态方法以仅在其 ArrayList 中更新该值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:01:36.223

gsingh2011 的评论有效。但是，我猜您的评论将类似于“我通过查询服务器来填充 ArrayList 并且我不想经常这样做”。

更一般地说，gsingh 的评论可以翻译为：您应该将您的适配器和“ViewProfileActivity”基于相同的数据。您可以通过在两者之间共享 ArrayList 来做到这一点（作为静态成员、公共成员或任何您想要的）。然后，当您从“ViewProfileActivity”更改某些内容时，您的 ListView 将在您切换回它后自动更新（因为 getView() 将再次在其适配器上调用，这将根据新数据生成视图）。

上面的文字是对您问题的回答，但让我添加一些其他说明：

*   你说你正在异步任务中向服务器发送信息。您应该将其更改为为此使用 (Intent)Service。当您的活动被置于后台时，您无法保证您的数据将被完全发送。如果您将此服务器同步委托给服务，它将确保您的进程保持足够长的时间以完成发送。
*   一旦您拥有该服务，那将是放置您的“共享数据”的好地方，如上所述。您也可以为此使用小型数据库，让服务仅处理本地数据库和远程服务器之间的同步。然后你的东西开始看起来像一个 REST 实现，你的设备在本地缓存远程数据，但最终只是可视化远程服务器的状态。您可以查找关于处理 REST 服务器的优秀 google i/o 演示文稿。如果您对 REST 部分不感兴趣，此演示文稿也很好，因为（也许更重要的是）它向您展示了当您想要保证数据成功持久性时必须考虑的事项。****

# python - 使用 Python 将数据从 MySQL 表保存到文本文件

> ID：13834460
> 
> 赞同：1
> 
> 时间：2012-12-12T06:59:32.133
> 
> 标签：python, mysql

所以我有一个 mysql 表，我试图从表的一个字段中获取每个元素。字段和表都称为“关键字”。在该领域有许多不同的随机单词，我正在尝试将所有这些单词保存到文本文件中。关于如何实现这一点的任何帮助都会很棒，这就是我到目前为止所拥有的。

```
#!/usr/bin/env python
import MySQLdb

db = MySQLdb.connect(host="", user="", passwd="", db="")
cursor = db.cursor()
sql = """SELECT DISTINCT keywords FROM keywords"""
cursor.execute(sql)
cursor.fetchall()
db.close()

for s in sql:
   tweets = open("keywords.txt", "w") 
```

我在想的是，如果可能的话，将 sql 获取的内容转换为列表并将其写入文件。但我愿意接受任何建议，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T07:12:01.423

像这样的东西应该工作：

```
import MySQLdb

db = MySQLdb.connect(host="", user="", passwd="", db="")
cursor = db.cursor()
sql = """SELECT DISTINCT keywords FROM keywords"""
tweets = open("keywords.txt", "w")
cursor.execute(sql)
for row in cursor:
   print>>tweets, row[0]
tweets.close()
db.close() 
```

# c# - 如何在 C# 中定义鼠标手势

> ID：13834464
> 
> 赞同：4
> 
> 时间：2012-12-12T06:59:54.203
> 
> 标签：c#, mouse, detection, shortcuts, registerhotkey

我想在 C# 中使用以下属性定义鼠标手势：

1.  在具有相同手势的其他应用程序之前触发事件
2.  根据不同的用户鼠标速度定义不同的手势。

那么最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-19T19:09:38.420

如果您需要扩展功能，可以使用[CodePlex 的 Mouse Gestures源代码。](https://mousegestures.codeplex.com/)

只需确保在发布或类似内容之前阅读许可证即可。

# python - python - 在维护目录结构的同时通过扩展名和复制选择文件时遇到问题

> ID：13834472
> 
> 赞同：1
> 
> 时间：2012-12-12T07:00:16.690
> 
> 标签：python

我有一个包含超过 150,000 个文件的硬盘。我需要能够根据扩展名识别文件并将它们复制到新目录，同时保持目录结构。

我试过这个：

```
 srcDir ="c:/folder1/d"
    dest ="c:/folder1/G"
    os.makedirs(dest)
    for root, dirs, files in os.walk(srcDir):
        for file in files:
            if file[-4:].lower() == '.txt':
            shutil.copy(os.path.join(root, file), os.path.join(dest, file)) 
```

这会将所有 .txt 文件保存到 c:/arcgis/G 而不是将它们保存在其子文件夹中。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:08:42.223

在`root`步行中并不总是一样的。如果它进入一个子目录，它将包含该子目录。由于您不尊重相对于新目的地的更改路径，因此不会维护层次结构。

您可以做的只是将根目录中的源目录替换为目标目录：

```
for root, dirs, files in os.walk(srcDir):
    dRoot = root.replace(srcDir, dest)
    os.makedirs(dRoot)
    for file in files:
        if file[-4:].lower() == '.txt':
            shutil.copy(os.path.join(root, file), os.path.join(dRoot, file)) 
```

# oracle - 如何在 Oracle 11g 中创建新分区表时启用 OLTP

> ID：13834474
> 
> 赞同：1
> 
> 时间：2012-12-12T07:00:23.347
> 
> 标签：oracle, oracle11g

创建分区表时出现以下错误：

```
SQL EXCEPTION
ANSI-92 SQL State  : null
Vendor error code  : 17081
java.sql.BatchUpdateException: error occurred during batching: ORA-14464: Compression Type not specified

java.sql.BatchUpdateException: error occurred during batching: ORA-14464: Compression Type not specified 
```

下面是用于创建没有压缩的分区表的代码，我们希望为这种表启用 oltp 压缩：

```
CREATE
  TABLE TOPD_UID
  (
    OTYPE    VARCHAR2(128 BYTE) NOT NULL ENABLE,
    RELEASE  VARCHAR2(16 BYTE),
    OUID     NUMBER(38,0) NOT NULL ENABLE,
    FUID     NUMBER(38,0) NOT NULL ENABLE,
    OEXID    VARCHAR2(256 BYTE),
    LD_OEXID VARCHAR2(256 BYTE),
    FTYPE    VARCHAR2(128 BYTE),
    OFN      VARCHAR2(256 BYTE),
    CUR      NUMBER(1,0),
    REFDATE DATE,
    DISCOVERYDATE DATE,
    CUSTOMER         NUMBER(1,0),
    VENDOR           VARCHAR2(12 BYTE) DEFAULT 'EVOLIUM',
    PLANNED          NUMBER(1,0) DEFAULT 0,
    FORECAST         NUMBER(1,0) DEFAULT 0,
    TUNABLE          NUMBER(1,0) DEFAULT 1,
    TUNABLE_DESC     VARCHAR2(4000 BYTE),
    TUNABLE_OWNER    VARCHAR2(128 BYTE),
    TUNING_REF       NUMBER(1,0) DEFAULT 0,
    TUNING_REF_DESC  VARCHAR2(4000 BYTE),
    TUNING_REF_OWNER VARCHAR2(128 BYTE),
    POST_IT          VARCHAR2(4000 BYTE),
    PLANNED_OFN      VARCHAR2(256 BYTE),
    SUB_OTYPE        NUMBER(1,0) DEFAULT 0,
    COMMERCIAL       NUMBER(1,0) DEFAULT 1,
    ISMONITORED      NUMBER(1,0) DEFAULT 0
  )
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 STORAGE
  (
    INITIAL 65536 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE
    DEFAULT
  )
  TABLESPACE MUSE PARTITION BY LIST
  (
    OTYPE
  )
  (
    PARTITION P_EXCELL2G VALUES
    (
      'EXCELL2G'
    )
    SEGMENT CREATION DEFERRED PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE( INITIAL 65536 BUFFER_POOL DEFAULT FLASH_CACHE
    DEFAULT CELL_FLASH_CACHE DEFAULT) TABLESPACE MUSE ,
    PARTITION P_ECELL2G VALUES
    (
      'ECELL2G'
    )
    SEGMENT CREATION DEFERRED PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE( INITIAL 65536 BUFFER_POOL DEFAULT FLASH_CACHE
    DEFAULT CELL_FLASH_CACHE DEFAULT) TABLESPACE MUSE ,
    PARTITION P_OMC VALUES
    (
      'OMC'
    )
    SEGMENT CREATION DEFERRED PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE( INITIAL 65536 BUFFER_POOL DEFAULT FLASH_CACHE
    DEFAULT CELL_FLASH_CACHE DEFAULT) TABLESPACE MUSE ,
    PARTITION P_ECELL3G VALUES
    (
      'ECELL3G'
    )
    SEGMENT CREATION DEFERRED PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE( INITIAL 65536 BUFFER_POOL DEFAULT FLASH_CACHE
    DEFAULT CELL_FLASH_CACHE DEFAULT) TABLESPACE MUSE ,
    PARTITION P_NETWORK VALUES
    (
      'NETWORK'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_FUTRAN VALUES
    (
      'FUTRAN'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_EUTRAN VALUES
    (
      'EUTRAN'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_GERAN VALUES
    (
      'GERAN'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_UTRAN VALUES
    (
      'UTRAN'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_EBSCELL VALUES
    (
      'EBSCELL'
    )
    SEGMENT CREATION DEFERRED PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE( INITIAL 65536 BUFFER_POOL DEFAULT FLASH_CACHE
    DEFAULT CELL_FLASH_CACHE DEFAULT) TABLESPACE MUSE ,
    PARTITION P_WRAN VALUES
    (
      'WRAN'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_REMOTECELL3G VALUES
    (
      'REMOTECELL3G'
    )
    SEGMENT CREATION DEFERRED PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE( INITIAL 65536 BUFFER_POOL DEFAULT FLASH_CACHE
    DEFAULT CELL_FLASH_CACHE DEFAULT) TABLESPACE MUSE ,
    PARTITION P_N7LS VALUES
    (
      'N7LS'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_BTS_BSC_LAPD VALUES
    (
      'BTS_BSC_LAPD'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_SGSN VALUES
    (
      'SGSN'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_MFS VALUES
    (
      'MFS'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_BTS_D VALUES
    (
      'BTS_D'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_SS7SL VALUES
    (
      'SS7SL'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_TRXTS VALUES
    (
      'TRXTS'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_ECELLLTE VALUES
    (
      'ECELLLTE'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_SGSN_IP_NSVC VALUES
    (
      'SGSN_IP_NSVC'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_GSL VALUES
    (
      'GSL'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_SGSN_ITF VALUES
    (
      'SGSN_ITF'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_TRX VALUES
    (
      'TRX'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_TRAFFIC_ZONE VALUES
    (
      'TRAFFIC_ZONE'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_FHS VALUES
    (
      'FHS'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_MGW VALUES
    (
      'MGW'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_N7SL VALUES
    (
      'N7SL'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_BSC VALUES
    (
      'BSC'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_X25 VALUES
    (
      'X25'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_PVC VALUES
    (
      'PVC'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_MSC VALUES
    (
      'MSC'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_ABISGROUP VALUES
    (
      'ABISGROUP'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_BTS VALUES
    (
      'BTS'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_CELL2G VALUES
    (
      'CELL2G'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_BEARERCHANNEL VALUES
    (
      'BEARERCHANNEL'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_EXCELL3G VALUES
    (
      'EXCELL3G'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_TC_RACK VALUES
    (
      'TC_RACK'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_TRNC VALUES
    (
      'TRNC'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_NRI VALUES
    (
      'NRI'
    )
    SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
    NOCOMPRESS LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
    BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
    TABLESPACE MUSE ,
    PARTITION P_GPRS_CELL VALUES
    (
      'GPRS_CELL'
    ) 
```

请帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T08:26:30.300

如果您未正确指定压缩类型，则可能会发生此错误。

例如，如果您在以下位置加上引号：

```
 SUB_OTYPE        NUMBER(1,0) DEFAULT 0,
    COMMERCIAL       NUMBER(1,0) DEFAULT 1,
    ISMONITORED      NUMBER(1,0) DEFAULT 0
  )
    COMPRESS FOR 'ALL OPERATIONS'
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 STORAGE
  (
    INITIAL 65536 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE
    DEFAULT
  ) 
```

你会得到：

```
 COMPRESS FOR 'ALL OPERATIONS'
                 *
ERROR at line 31:
ORA-14464: Compression Type not specified 
```

而没有它，它会起作用

```
 29      ISMONITORED      NUMBER(1,0) DEFAULT 0
 30    )
 31      COMPRESS FOR ALL OPERATIONS
 32    PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 STORAGE
 33    (
 34      INITIAL 65536 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE
 35      DEFAULT
 36    )
 37    PARTITION BY LIST
 38    (
 39      OTYPE
 40    )
 41    (
...
381      PARTITION P_NRI VALUES
382      (
383        'NRI'
384      )
385       PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
386       LOGGING STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1
387      MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
388      BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
389       ,
390      PARTITION P_GPRS_CELL VALUES
391      (
392        'GPRS_CELL'
393      )
394     );

Table created.

SQL> select partition_name, compression, compress_for from user_tab_partitions where table_name = 'TOPD_UID2';

PARTITION_NAME                 COMPRESS COMPRESS_FOR
------------------------------ -------- ------------
P_EXCELL2G                     ENABLED  OLTP
P_ECELL2G                      ENABLED  OLTP
P_OMC                          ENABLED  OLTP
P_ECELL3G                      ENABLED  OLTP
P_NETWORK                      ENABLED  OLTP
P_FUTRAN                       ENABLED  OLTP
P_EUTRAN                       ENABLED  OLTP 
```

# java - @property 之后的多个类类型变量上的“接口类型不能静态分配”

> ID：13834480
> 
> 赞同：0
> 
> 时间：2012-12-12T07:00:39.060
> 
> 标签：java, iphone, objective-c, ios

我正在尝试研究 Objective-C 来创建一个 iOS 应用程序。在 Java 中，我们可以在一行中声明类类型变量，如下所示：

```
CustomClass first, second, third; 
```

我尝试在我的 Objective-C 界面中使用`@property`标签做同样的事情：

```
@interface Rectangle : NSObject
@property XYPoint* origin, opposite;
// ...
@end 
```

但这会引发错误“无法静态分配接口类型”。但是，如果我在单独的属性标签上声明这两个变量，如下所示，错误就会消失。

```
@interface Rectangle : NSObject
@property XYPoint* origin;
@property XYPoint* opposite;
// ...
@end 
```

这是为什么？当我使用原始类型的第一种方法时，它可以工作。为什么它不适用于类类型？此外，与其他关于相同错误消息的问答不同，我没有错过`*`在我的类型声明之后放置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:06:49.887

你可以这样做：

```
@property XYPoint *origin, *opposite; 
```

编辑：你在没有星星的情况下合成它们：

```
@synthesize origin, opposite; 
```

/索伦

# ruby-on-rails - ActiveAdmin：根据活动范围修改索引表

> ID：13834481
> 
> 赞同：11
> 
> 时间：2012-12-12T07:00:40.443
> 
> 标签：ruby-on-rails, activeadmin

假设我有一个具有两个范围的 ActiveAdmin 模型，如下所示：

```
ActiveAdmin.register Book do

  scope :all, default: true
  scope :smith #all books by author 'smith'

  index do
    column :title
    column :published_year
    column :author
  end
end 
```

当用户选择“史密斯”范围时，我不想要/不需要“作者”列。

那么有没有办法访问当前范围并仅在其中一个范围中显示作者列？我想对于这个例子，我可以使用自定义视图并检查数据的实际内容，但我希望有一种更简单更好的方法。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-17T00:03:46.610

你可以尝试类似的东西

```
index do
    column :title
    column :published_year
    column :author unless params['scope'] == 'smith'
  end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-26T15:12:17.730

您还可以访问@current_scope 对象，并且可以执行@current_scope.scope_method 来获取底层范围方法

# android - ExpandableListView 中组的动画展开

> ID：13834487
> 
> 赞同：1
> 
> 时间：2012-12-12T07:01:06.377
> 
> 标签：android, listview, expandablelistview

我试图在我的 ExpandableListView 中找到一个动画扩展组的最佳解决方案，但没有找到任何通用解决方案。ExpandableListView 是否有正确的决定，或者我需要使用简单的 ListView？

# python - Python Raw Socket 无法接收 ICMP 消息；出现在 Wireshark 中

> ID：13834491
> 
> 赞同：2
> 
> 时间：2012-12-12T07:01:17.433
> 
> 标签：python, virtualbox, icmp, raw-sockets

我正在尝试实现一个 python traceroute，它发送 UDP 消息并通过原始套接字接收 ICMP 响应。我遇到了一个问题，ICMP 数据包似乎不惜一切代价避免捕获。ICMP 响应正如我所期望的那样在wireshark 中显示，但套接字从不接收任何要读取的数据。另一个复杂之处是我在运行 Ubuntu 的 VirtualBox 上运行代码，因为 sendto() 不会在 Windows 7 中获取数据包。（我在 Windows 中运行 wireshark 来捕获数据包）。奇怪的是，当我从虚拟机运行 python 脚本时，wireshark 会捕获 ICMP 消息。但是，当我尝试在 Windows 上运行脚本时，ICMP 消息不会显示在wireshark 中。（UDP 数据包神奇地开始在 Windows 上工作）

我已经从在线示例中尝试了各种不同版本的设置套接字，并且使用了 bind() 而没有使用它，但似乎没有配置产生读取的套接字。等待读取 ICMP 消息将超时。

还应该注意的是，如果我尝试读取我的 udp 发送套接字，它会成功读取 udp 数据包。一旦我设置 IPPROTO_ICMP 读取超时。

接收响应方法：

```
def receive_response(rec_socket, packetid, tsend, timeout):
remain = timeout
print packetid
while remain > 0:
    ready = select.select([rec_socket], [], [], remain)
    if ready[0] == []:
        return
    print 'got something' 
```

设置套接字：

```
rec_socket = socket.socket(socket.AF_INET, socket.SOCK_RAW, ICMP_CODE)
rec_socket.setsockopt(socket.SOL_IP, socket.IP_HDRINCL, 1)
rec_socket.bind(("",0))      #played with using this statement and skipping it 
```

呼叫接收很简单：

```
reached = receive_response(rec_socket, packetid, time.time(), timeout) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:36:39.050

看起来问题是 VirtualBox 将默认使用 NAT 连接到网络。这意味着虚拟机将不会收到 ICMP 消息，因为它们是 ICMP 消息。似乎解决方案是将 VirtualBox 网络配置为使用“桥接网络”模式。不幸的是，我无法确认这一点，因为我无法在桥接模式下在我的大学网络上设置虚拟机。至于他们在windows下不工作的原因，肯定是和windows不支持raw socket有关。

# sql - 我如何从 magento 数据库中获取活动产品详细信息？

> ID：13834496
> 
> 赞同：-1
> 
> 时间：2012-12-12T07:01:33.007
> 
> 标签：sql, magento

我需要来自 magento 数据库的 ACTIVE 产品列表，其中包含以下信息。如果有其他信息很好，但需要有以下信息。

```
SKU:
PRODUCT NAME:
PRODUCT CATEGORY:
SHORT DESCRIPTION:
LONG DESCRIPTION:
WEIGHT: 
```

为此编写查询的方法是什么。我只需要获取数据。没有php，只有sql查询。（db结构有点复杂）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:02:55.103

试试看，它可以获取产品数据：（状态 = 2 = 产品已禁用，状态 = 1 = 产品已启用）

```
SELECT `e`.*, IF(_table_status.value_id > 0, _table_status.value, _table_status_default.value) AS `status
FROM `mage_catalog_product_entity` AS `e`
INNER JOIN `mage_catalog_product_entity_int` AS `_table_status_default`
ON (`_table_status_default`.`entity_id` = `e`.`entity_id`)
AND (`_table_status_default`.`attribute_id` = '80')
AND `_table_status_default`.`store_id` = 0
LEFT JOIN `mage_catalog_product_entity_int` AS `_table_status`
ON (`_table_status`.`entity_id` = `e`.`entity_id`)
AND (`_table_status`.`attribute_id` = (SELECT attribute_id FROM mage_eav_attribute WHERE attribute_code = 'status' AND entity_type_id = 4))
AND (`_table_status`.`store_id` = '1')
WHERE (IF(_table_status.value_id > 0, _table_status.value, _table_status_default.value) = '2') 
```

对于该类别，您将需要一些额外的工作。我通过在 PHP 和 Magento 集合中执行以下操作来获取此 sql 查询：

```
/* @var $productCollection Mage_Catalog_Model_Resource_Eav_Mysql4_Product_Collection */
$productCollection = Mage::getModel('catalog/product')->getCollection();
$productCollection->addFieldToFilter('status', array('eq' => '2'))->load(true); 
```

# iphone - “未找到有效的签名身份”组织者中的所有配置文件中的错误

> ID：13834500
> 
> 赞同：0
> 
> 时间：2012-12-12T07:01:46.987
> 
> 标签：iphone, ios, ios4

代码签名错误：身份“iPhone 开发人员：人名 (XXXXXXXX)”与默认钥匙串中的任何有效证书/私钥对不匹配

在管理器中，我单击配置文件和我下载的配置文件。在下面我收到警告：

**在您的钥匙串中找不到与此配置文件匹配的有效签名身份**

我查了很多很多有这个问题的人，但似乎都通过删除证书和配置来解决它

我也试过这个但同样的问题一次

我有一个没有后缀捆绑 id 且没有错误的配置文件

任何帮助都很好......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:08:44.220

只需检查您的证书是否有效`Keychain Access`

如果证书过期，则会出现这种类型的错误。

并设置您要在`Build Setting - > Code Signing Identifire`项目`Target`中使用的有效证书`Project`

最后将 Identifire 设置`Targets -> Summary -> Builde Identifile`为示例`com.IdentifireCertiFicateName.yourProject`

我希望这对你有帮助....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:29:46.373

您在第一次创建`CSR`文件时的证书过程。从此您可以处理开发人员配置文件和分发配置文件。如果您更改系统，则必须导出`certficate`和`privatekey`从扩展并以格式`keychain access -> my Certificate`导出您的证书和私钥文件。`.p12`在您当前的系统中安装这些文件。之后设置`codesing`并`project`归档`target`。

# c# - 在 C# 中使用 CAL 创建 clearcase 动态视图

> ID：13834503
> 
> 赞同：1
> 
> 时间：2012-12-12T07:01:52.837
> 
> 标签：c#, clearcase

我正在尝试使用以下代码在 C# 中使用 CAL 创建一个清晰的动态视图。

```
private static ClearCase.ClearTool ct;

string viewName = "tmp_view";

string cmd = "mkview –tag "+ viewName + " –stream " + selectedStream +"@"+ projectVob + "  \\\\<Network Shared Path>\\"+ viewName +".vws";

ct.CmdExec(cmd); 
```

执行时，ct.CmdExec 方法抛出异常，说必须指定 viewTag。

对于相同的 cmd 字符串，我可以使用 cleartool 命令提示符创建视图。

你能告诉我为什么我无法在 C# 中创建视图吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:27:36.443

# mobile - 如何在 ADF 移动版中配置数据控制以访问安全的 Web 服务？

> ID：13834507
> 
> 赞同：0
> 
> 时间：2012-12-12T07:02:06.430
> 
> 标签：mobile, oracle-adf

1) 我如何在 ADF Mobile 中使用“Webservice datacontrol”调用安全的 Web 服务。我在谷歌搜索并得到了 andrejus 的链接“ **http://andrejusb.blogspot.be/2012/11/adf-mobile-secured-web-service-access.html** ”，但不了解“adfCredentialStoreKey”，什么是它？我该如何使用它？如前所述，我设置了安全策略，是否足以在不提供用户名/密码的情况下调用受保护的 Web 服务？何时以及为什么我们应该选择安全策略？它有什么用？有点困惑，**谁能告诉我更多关于从 webservice datacontrol 访问安全 webservices 的信息**。

2) 我将设备上的移动应用程序部署到 Android 模拟器中。对于远程调试，请遵循 ADF 移动开发人员指南中给出的步骤。但是远程调试仍然无法正常工作。在控制台中抛出此消息“**调试器无法连接到远程进程**”。我该如何解决？

问候拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:22:20.983

这是一个博客和视频演示，展示了如何执行此操作 - [https://blogs.oracle.com/shay/entry/accessing_secure_web_services_from](https://blogs.oracle.com/shay/entry/accessing_secure_web_services_from)

# photo - 有没有什么app可以让手机直接上传图片到电脑？

> ID：13834509
> 
> 赞同：-5
> 
> 时间：2012-12-12T07:02:06.860
> 
> 标签：photo

圣诞节快到了，我很兴奋因为我要去马尔代夫。问题是我不想带我的电脑，我确定我会拍很多照片。有什么应用程序可以分享我的图像不使用 USB 到计算机？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:06:44.273

如果您有 Internet 连接，Dropbox 和 SugarSync 之类的其他设备一样运行良好。

如果你不这样做，那么有这个应用程序：

[https://itunes.apple.com/us/app/wireless-transfer-app/id543119010](https://itunes.apple.com/us/app/wireless-transfer-app/id543119010)

通过 WiFi 传输（顺便说一下，我与这家公司无关）

我确信 App Store 上还有很多其他支持蓝牙或 WiFi 的传输应用程序会有所帮助。

（最后，如果你有互联网接入，并且有最新的 iPhone 和 iOS 版本）还有 Apple 自己的 Photo Stream，它可以使用 iCloud。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:32:31.910

`xCloud`推荐，这是一个远程控制你的电脑和管理你的文件，甚至没有网络的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T07:05:34.477

使用保管箱？您可以将图像放在保管箱中，然后立即在计算机上查看

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T07:05:39.767

[适用于 Android/iOS 的 DropBox](https://www.dropbox.com/)

`DropBox`是你需要的，你没有指定你有什么手机，但 DropBox 应用程序确实进来了`Android`（`iOS` *我不确定其他人）*。

您可以将您的图库、相机上传或任何其他您喜欢的文件夹与它同步，它会自动将您的图片文档上传到您计算机中的 DropBox 文件夹，您只需要一个互联网连接即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T07:06:22.517

试试 Dropbox。

将它安装在您的计算机上，然后安装在您的 android/apple/windows8 手机上，它会为您提供自动将手机图片上传到您的保管箱文件夹的选项。然后，您可以在您的计算机上创建的文件夹中找到它们。

# ruby-on-rails - 在线运行rails代码

> ID：13834510
> 
> 赞同：4
> 
> 时间：2012-12-12T07:02:19.500
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

任何人都可以给我一个在线运行rails代码的链接吗？
我已经尝试过[codepad.org](http://codepad.org)和[tryruby.org](http://tryruby.org)他们运行 ruby​​ 代码很好
当我使用`Time.now`它给我正确的结果但是当我尝试像下面这样运行它给我错误：

`time_ago_in_words(Time.now - 15.hours)`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:49:24.957

该`hours`函数特定于 Rails，它是一个 Ruby 库。Rails 未加载到 CodePad 中。您必须在计算机上安装 Rails 才能访问这些功能。请参阅指南以获取说明。[1](http://guides.rubyonrails.org/command_line.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:13:20.870

[Rails for Zombies](http://railsforzombies.org/)提供了一个解释器，但它是针对他们的课程的。

# algorithm - 启发式 - N 是素数吗？

> ID：13834513
> 
> 赞同：2
> 
> 时间：2012-12-12T07:02:42.463
> 
> 标签：algorithm, primes, heuristics

我从标准输入中读取了一个正整数 N，并试图确定 N 是否为质数。

我知道我可以将 N 除以直到 sqrt(N) 的所有正数，但这很耗时，而且我的算法会不时给出误报，所以我正在寻找一种启发式方法来解决这个问题。

我记得我去年在拼贴中学到了一个算法，它会选择一个数字，然后检查 N 是否可以被那个数字（或它的因数）整除，如果不是，那么它可以告诉 N 是一个素数，但它会错误地识别它大约 1/40 的时间是素数。

有人认识我说的这个算法吗？指向它的链接将非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T07:06:33.990

好吧，有一些概率算法，一些在[wikipedia page](http://en.wikipedia.org/wiki/Prime_number#Primality_testing_versus_primality_proving)中描述，很可能你在谈论~~[Miller-Rabin](http://en.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test)~~ [Fermat Primality Test](http://en.wikipedia.org/wiki/Fermat_primality_test)

请注意，自 2002 年以来，实际上有一种 O(log(n)^6) 确定性方法来确定一个数字是否为素数 - 称为[AKS](http://en.wikipedia.org/wiki/AKS_primality_test)（在其开发人员之后）¹

* * *

这是一个有趣的问题——许多人认为素性检验不能在输入的大小（即对数`n`）和确定性上都以多项式方式完成，但他们的方法表明并非如此。

# networking - IPv6可以消除mac地址吗

> ID：13834515
> 
> 赞同：0
> 
> 时间：2012-12-12T07:02:45.197
> 
> 标签：networking, ip, ipv6

MAC 地址用于唯一标识我的计算机。IP 地址用于将数据包路由到网络，因为它具有层次结构，但它不能唯一标识计算机。那么，在IPv6之后，每台计算机都会有一个唯一的IP地址，那还需要MAC地址吗？如果我理解错了，请纠正我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T08:00:08.327

不，MAC 地址在第 2 层（“[数据链路层](https://en.wikipedia.org/wiki/Data_link_layer)”）运行。Internet 协议（IPv4 和 IPv6）在第 3 层（“[网络层](https://en.wikipedia.org/wiki/Network_layer)”）运行。

这两层是互补的，不会相互“替换”。有关更多信息，请阅读[TCP/IP 套件](https://en.wikipedia.org/wiki/Internet_protocol_suite)。

IPv6 无状态地址自动配置 (SLAAC) 使用 MAC 地址来生成地址，但这并不意味着它们相互“替换”。这只是第 2 层接口被第 3 层寻址继承的一个特征。除此之外，完全免费。

# java - 使用 TCP + AsyncTask 保持连接打开并监听服务器发送的数据

> ID：13834516
> 
> 赞同：1
> 
> 时间：2012-12-12T07:02:46.763
> 
> 标签：java, android, android-intent, android-asynctask, inputstreamreader

嗨 Stackoverflow 成员！这是我的问题... 1) 连接到 TCP 服务器 *CHECK 2) 发送初始数据包并从服务器接收 (VB.NET) *CHECK

**现在我的问题**

我试图保持我的连接活跃，并继续监听传入的数据。我尝试使用计时器，但没有运气。任何帮助将不胜感激

```
 package com.WheresmySon;

  import java.io.BufferedReader;
  import java.io.BufferedWriter;
  import java.io.IOException;
  import java.io.InputStreamReader;
  import java.io.OutputStreamWriter;
  import java.net.Socket;
  import java.net.UnknownHostException;
  import android.app.Activity;
  import android.content.Intent;
  import android.os.AsyncTask;
  import android.os.Bundle;
  import android.util.Log;
  import android.view.View.OnClickListener;
  import android.widget.TextView;
  import java.util.Timer;
  import java.util.TimerTask;

  public class TcpClient extends Activity {
private static BufferedReader in;
private static BufferedWriter out;
private static Socket s;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    new TcpClientTask().execute();

}

class TcpClientTask extends AsyncTask<Void, Void, Void> {
    private static final int TCP_SERVER_PORT = 1234;
    private boolean error = false;
    Boolean SocketStarted = false;

    protected Void doInBackground(Void... arg0) {
        try {
            s = new Socket("10.0.2.2", TCP_SERVER_PORT);

                in = new BufferedReader(new InputStreamReader(s.getInputStream()));
                out = new BufferedWriter(new OutputStreamWriter(s.getOutputStream()));

            //send output msg
            String outMsg = "VER:Android,LAT:28.111921,LNG:-81.950433,ID:1038263,SND:0,VDO:0,TXT:Testing";
            out.write(outMsg);
            out.flush();

            Log.i("TcpClient", "sent: " + outMsg);

            //accept server response

            String inMsg = in.readLine();

            Log.i("TcpClient", "received: " + inMsg);

            //close connection
        } catch (UnknownHostException e) {
            error = true;
            e.printStackTrace();
        } catch (IOException e) {
            error = true;
            e.printStackTrace();
        } 

        return null;
    }

    protected void onPostExecute() {
        if(error) {
            // Something bad happened

        }
        else {
            // Success

    }
}

}

//replace runTcpClient() at onCreate with this method if you want to run tcp client as a service
private void runTcpClientAsService() {
    Intent lIntent = new Intent(this.getApplicationContext(), TcpClientService.class);
    this.startService(lIntent);
}

  } 
```

TcpClientService.java

```
 package com.WheresmySon;

 import java.io.BufferedReader;
 import java.io.BufferedWriter;
      import java.io.IOException;
 import java.io.InputStreamReader;
 import java.io.OutputStreamWriter;
 import java.net.Socket;
 import java.net.UnknownHostException;

 import android.app.Service;
 import android.content.Intent;
      import android.os.IBinder;
 import android.util.Log;

 public class TcpClientService extends Service {

@Override
public IBinder onBind(Intent arg0) {
    return null;
}
@Override
public void onCreate() {
    runTcpClient();
    this.stopSelf();
}
private static final int TCP_SERVER_PORT = 1234;
private void runTcpClient() {
    try {
        Socket s = new Socket("10.0.2.2", TCP_SERVER_PORT);
        BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));
        BufferedWriter out = new BufferedWriter(new OutputStreamWriter(s.getOutputStream()));
        //send output msg
        String outMsg = "TCP connecting to " + TCP_SERVER_PORT + System.getProperty("line.separator"); 
        out.write(outMsg);
        out.flush();
        Log.i("TcpClient", "sent: " + outMsg);
        //accept server response
        String inMsg = in.readLine() + System.getProperty("line.separator");
        Log.i("TcpClient", "received: " + inMsg);
        //close connection
        s.close();
    } catch (UnknownHostException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:11:19.020

`AsyncTask`不是任何网络东西的最佳位置，尤其是对于像`Sockets`. 最好的方法是使用`Service`. 您可以尝试搜索有关如何在 Android 中使用服务处理套接字连接的任何代码示例。此代码将永远无法正常工作。

# ruby - 冻结 DataMapper 模型中的属性

> ID：13834527
> 
> 赞同：0
> 
> 时间：2012-12-12T07:03:41.260
> 
> 标签：ruby, datamapper, ruby-datamapper

考虑我有以下模型定义，我想要一个特定的属性，该属性从创建的那一刻起就应该保持不变

```
class A
  property :a1, String, :freeze => true
end 
```

有这样的事情吗？或者可能正在使用回调？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:02:13.787

尝试以下操作：

```
class YourModel
  property :a1, String

  def a1=(other)
    if a1 
      raise "A1 is allready bound to a value"
    end
    attribute_set(:a1, other.dup.freeze)
  end
end 
```

初始化程序在内部委托给普通属性编写器，因此当您通过初始化属性时，`YourModel.new(:a1 => "Your value")`您不能使用`your_instance.a1 = "your value".`. 但是当您创建一个新实例时。`instance = YourModel.new`你可以分配一次`instance.a1 = "Your Value"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:27:34.863

如果您不需要分配常量，那么

```
property :a1, String, :writer => :private

before :create do
  attribute_set :a1, 'some value available at creation time'
end 
```

可能就足够了

# php - 如何获取存储在其他文件夹中的 HTML 文件中的所有元素标签和每个标签的内容

> ID：13834529
> 
> 赞同：1
> 
> 时间：2012-12-12T07:03:54.993
> 
> 标签：php, javascript, jquery

**目标是从 HTML 文件中获取单个文本段（不是整个文档的单个流字符串。）**

我想在标签对之间扫描 html 文件中的元素标签和文本内容。我正在考虑这样做：

```
//        var mytags = $('#trans_seg').find('*');
//        var total = mytags.length;
//    
//        for(i = 0; i <= total; i++){
//            console.log(mytags[i].textContent);
//        } 
```

**它在萤火虫的控制台模式下完成！**

我在现有的 HTML 文件中应用了这个操作，现在我该如何处理其他 HTML 文件？

我试过这样：

```
$(document).ready(function(){
    data = '<?php echo mysql_real_escape_string(file_get_contents('test_html.html')); ?>';
    tags = data.find('*');
    alert($data.length);
}); 
```

但它给出了错误“TypeError：data.find 不是函数”。

如果还不清楚，请问我问题。

****** *** ** *** ** *** ***已编辑***** ** *** ** *** ** *** ** *** ** *** *****

 **当我提醒数据时，我得到了这个响应

```
<!-- 
```

要更改此模板，请选择工具 | 模板

并在编辑器中打开模板。

-->

```
<head>

    <title></title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>

<body>

    <div>TODO write content</div>

    <h1>My First Heading</h1>

    <p>My first paragraph.</p>

</body> 
```**

# image - 显示图像平等观看机会

> ID：13834530
> 
> 赞同：0
> 
> 时间：2012-12-12T07:03:56.657
> 
> 标签：image, view

我正在寻找购物车（php 和 mysql）的解决方案，在首页上随机加载 20 个产品图像。我想知道是否有更好的方法来管理和提供平等的机会来加载之前未加载的产品图像，以便每个产品/内容都有平等的机会出现而不是随机出现，因为随机可能会再次选择以前的视图。

我正在考虑在数据库中添加视图表，以便存储每个产品视图，以便在随机选择产品时检查视图是否有任何产品具有更大的视图下降并随机选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:11:21.553

我想你可以从你的 Products 表中做出不同的选择，这样就不会有重复的图像：

```
SELECT DISTINCT ProductId, ProductImage FROM ProductsTables 
```

# android - 多个依赖的seekbars android

> ID：13834532
> 
> 赞同：0
> 
> 时间：2012-12-12T07:04:21.493
> 
> 标签：android, math

假设我有 4 个搜索栏，每个搜索栏的值最初设置为 25。如果我更改任何一个搜索栏的值，那么此更改也应该反映在其他 3 个搜索栏上，就像如果我增加值，那么所有其他搜索栏都应该减少，反之亦然。

我知道这需要一个我无法弄清楚的数学公式......提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:16:13.330

听起来您希望四个 SeekBar 的总数为 100，并且当一个增加时，其他三个应该按比例减少？

听起来您需要实现 SeekBar.OnSeekBarChangeListener [http://developer.android.com/reference/android/widget/SeekBar.OnSeekBarChangeListener.html](http://developer.android.com/reference/android/widget/SeekBar.OnSeekBarChangeListener.html)

您将希望您的活动引用所有四个，并且您需要相同的侦听器（如果您实现上述接口，它可能是您的活动）并在您的所有 SeekBars 上设置此侦听器。在 OnSeekBarChangeListener.onStartTrackingTouch 上，您需要记录正在修改的 SeekBar 以及当时所有四个 SeekBar 的值。在 OnSeekBarChangedListener.onProgressUpdate 中，将与原始值的变化取为百分比：（新值 - 原始值）/原始值。将其除以三（在其余三个 SeekBar 之间分配变化），然后将其应用于其他的值。应该类似于：原始值 * (1 - (第一个 SeekBar 的变化 / 3))

我的数学可能有错误，但这是一般的想法。

# ireport - 条件语句在表达式编辑器中不起作用

> ID：13834533
> 
> 赞同：0
> 
> 时间：2012-12-12T07:04:25.830
> 
> 标签：ireport

我想检查当前月份的许多情况，如下所示。所以我把`TextField`它的模式编辑为`MM`& 在表达式编辑器中编辑下面的代码

```
new java.util.Date()>=4 && new java.util.Date() <= 7 ? "Q1" :  
new java.util.Date()>=8 && new java.util.Date() <=11  ? "Q2" : "Q3" 
```

但它给出了错误

```
Error filling print... Error evaluating expression :      Source text : new java.util.Date()>=4 && new java.util.Date() <= 7 ? "Q1" : new java.util.Date()>=8 && new java.util.Date() <=11  ? "Q2" : "Q3" 
Setting up the file resolver.. 
```

但是当我表达喜欢

```
new java.util.Date()== 4 ? "Q1" : "Q2" 
```

它工作正常。

iReport 不能解决多个条件吗？还是我应该`TextField`在单一条件下给出不同的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T09:51:00.950

你确定 new java.util.Date() 只是给你一个月。

试试这个它会给你飞蛾
(new SimpleDateFormat("M")).format(new java.util.Date())

您也可以使用 yyyy(year) 或 d(date) 检查 Integer.parse(...month...) 或 Date.parse(...month...) 可能需要，如果你没有您的 Qs 作为整数或日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:11:22.417

尝试改用日历。

```
(Calendar.getInstance()).get(Calendar.MONTH)>=3 && (Calendar.getInstance()).get(Calendar.MONTH)>=6 ? "Q1" :
(Calendar.getInstance()).get(Calendar.MONTH)>=7 && (Calendar.getInstance()).get(Calendar.MONTH)>=10  ? "Q2" : "Q3" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T16:38:01.147

你能试着把表达式放在括号里吗

（新 java.util.Date()>=4 && 新 java.util.Date() <= 7）？"Q1" : ( (new java.util.Date()>=8 && new java.util.Date() <=11) ? "Q2" : "Q3")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T10:51:13.977

您可以像这样使用多个条件

```
new java.util.Date() >= 4  ?
 "Q1" :
new java.util.Date() <= 7  ?
 "Q2" :  
new java.util.Date() >= 8  ?
 "Q3" :
 "Q4" 
```

# jquery - Ajax 跨域调用 REST Web 服务

> ID：13834535
> 
> 赞同：-2
> 
> 时间：2012-12-12T07:04:28.263
> 
> 标签：jquery, ajax, jsonp

> **可能重复：**
> [规避同源策略的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

我必须在 HTML 页面中使用 AJAX 调用从另一个 IP 调用 REST Web 服务。但是，AJAX 调用不支持跨域请求。

我正在使用 JSON-P，但在我的应用程序中没有得到结果。

这是我发出 JSON-P 请求的 jQuery 代码：

```
var makePUTRequest = function () {
            $.ajax({
                type: "POST",
                url: "http:// 
                contentType: "application/jsonp",
                data: '{"username1":"getStates", "password1":"EXPLORE"}',            
                dataType: "jsonp",
                success: function (response) {

                    if (response == ("success").toLocaleLowerCase()) {

                        alert("Loging Successfully!!..");
                        window.location = "patient_list.html";
                    }
                    else {
                        alert("Please Loging Again!!..");
                    }
                },
                beforeSend: function (xhr) {
                    xhr.setRequestHeader("My-Key", 'MyKey123456789');
                },
                error: function (error) {

                    alert("ERROR:", error);

                },
                complete: function () {
                    alert("complete");
                }
            });

        }; 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-18T09:41:09.560

```
 var makePUTRequest = function () {
                $.ajax({
                    type: "POST",
                    url: "http:// 
                    contentType: "application/jsonp",
                    data: '{"username1":"getStates", "password1":"EXPLORE"}',            
                    dataType: "jsonp",
                    success: function (response) {

                        if (response == ("success").toLocaleLowerCase()) {

                            alert("Loging Successfully!!..");
                            window.location = "patient_list.html";
                        }
                        else {
                            alert("Please Loging Again!!..");
                        }
                    },
                    beforeSend: function (xhr) {
                        xhr.setRequestHeader("My-Key", 'MyKey123456789');
                    },
                    error: function (error) {

                        alert("ERROR:", error);

                    },
                    complete: function () {
                        alert("complete");
                    }
                });

            };  

        </script>

js file 1.7.1.js download from google 
```

# android - Android上的Cocos2dx帧率问题

> ID：13834536
> 
> 赞同：1
> 
> 时间：2012-12-12T07:04:34.657
> 
> 标签：android, android-ndk, cocos2d-x

我正在使用 cocos2dx 开发一个多平台游戏，我有两类资产，一类用于高分辨率设备，一类用于普通或低分辨率设备。现在我面临的问题是高分辨率设备上的帧速率低于专门针对 android 的低分辨率。例如，在三星 S2 上平均为 60 fps，但在三星 S3 上平均为 40 fps。我假设这可能是高分辨率资产的问题，然后我为 S3 和 S2 尝试了相同的资产。S3 上的静止帧速率为 40 fps。我不知道为什么 S3 比 S2 更快。

任何提高帧速率的想法或任何建议都将不胜感激。

谢谢阿山

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T07:19:32.647

三星 Galaxy 系列（i9100、S3 等）在设置中有“省电”模式。如果打开此选项，则所有应用程序的 FPS 限制为 30。关闭它可以有 60 FPS ....

# php - 在函数返回假时执行循环，直到它返回真（或失败）

> ID：13834541
> 
> 赞同：1
> 
> 时间：2012-12-12T07:04:57.187
> 
> 标签：php, function, loops, while-loop

我怎样才能用循环编写这段代码？

```
 $date = new DateTime;

    if(checkForDate($date->format('m')) == true) {
        return true;
    }
    else {
        $date->sub(new DateInterval('P1M'));
        if(checkForDate($date->format('m')) == true) {
            return true;
        }
        else {
            $date->sub(new DateInterval('P1M'));
            if(checkForDate($date->format('m')) == true) {
                return true;
            }
            else {
                // Fail. 
                return false;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:07:22.840

```
for ($i = 0; $i < 3; $i++) {

    $date->sub(new DateInterval('P1M'));
    if(checkForDate($date->format('m')) == true) {
        return true;
    }

}

return false; 
```

随你便。但这种方法并没有真正的意义。可能你想要别的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T12:49:18.650

```
<?php
$date = new DateTime;
if(multipleCheckDate($date) == true) {
    return true;
}
else {
    return false;
}

function multipleCheckDate($date, $i = 0) {
    if(checkDate() == true) {
        return true;
    }
    else if($i < 6) {
        $date->sub(new DateInterval('P1M'));    
        $i++;
        return $this->multipleCheckDate($date, $i);
    }
    else {
        return false;
    }
} 
```

# c - 指数数字如何在 C 中工作

> ID：13834546
> 
> 赞同：-3
> 
> 时间：2012-12-12T07:05:24.877
> 
> 标签：c

以下代码使用指数数的输出为 1.#INF00 -33.000000 0.000000。如何？

```
#include<stdio.h>
int main()
{
    float p=3.5e38f;
    float n=-3.3e1f;
    float m=1.0e-38f;
    printf("%f %f %f",p,n,m);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:10:55.667

你真的需要学习基础知识。谷歌搜索“浮点数如何工作”将是一个好的开始。

[http://en.wikipedia.org/wiki/IEEE_floating_point](http://en.wikipedia.org/wiki/IEEE_floating_point)

简而言之，第一个数字溢出到“无穷大”（INF）。第二个是 3.3 乘以 10 的 1 次方。第三个下溢为零。

# android - 登录时Facebook android哈希键错误

> ID：13834555
> 
> 赞同：0
> 
> 时间：2012-12-12T07:06:01.480
> 
> 标签：android, facebook, hashcode, facebook-android-sdk, keytool

我创建了一个简单的 android 应用程序并使用 Eclipse 导出方法对其进行了签名。

然后我使用keytool的export cert命令。

```
keytool -exportcert -alias my_alias -keystore "G:\mypath\app\android.keystore"|"C:\ssl\bin\openssl" sha1 -binary |"C:\ssl\bin\openssl" base64 
```

我得到了一些“哈希码”。我将此哈希码添加到本机 android 应用程序的 facebook 面板并检查了使用 facebook 的登录。登录时，facebook 给出错误说明应用程序的哈希码是不允许的。ie 不在允许的代码列表中。

我究竟做错了什么 ？问题清楚了吗？请评论我将进行必要的更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T22:16:46.413

理想情况下，您将密钥哈希添加到两个位置：

*   您的整体开发人员设置（以便您可以运行 Facebook 示例）

*   您的每个应用程序本身的设置

这些在入门指南的第 4 步和第 5 步中分别进行了描述：[https ://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

确保你已经完成了这两件事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:13:58.210

嗯。听起来像 android 键不匹配。从设备（而不是模拟器）运行您的应用程序时，您需要将您在开发 PC 上获得的哈希键替换为应用程序上的哈希键。从您的设备中获取密钥并访问 facebook.com/developers。

# mysql - mysql如何在内部比较长字符串

> ID：13834559
> 
> 赞同：0
> 
> 时间：2012-12-12T07:06:12.120
> 
> 标签：mysql

我必须比较mysql中的帖子内容以避免重新发布相同的内容

`...WHERE not exists (SELECT 1 FROM posts p WHERE p.content = stg.content);`

我想知道mysql如何在内部比较两个字符串，他们是否逐个字符地扫描字符串？

如果我一次要做很多比较，这会导致一些性能问题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:11:30.950

不要在mysql端比较post内容，例如，如果你使用php，可以计算post内容的md5值，并将这条记录保存到mysql中，下次如果要将post内容插入mysql，计算md5值并检查它是否已经保存到mysql中。

# c# - XmlSerializer；System.invalidOperationException

> ID：13834563
> 
> 赞同：0
> 
> 时间：2012-12-12T07:06:23.583
> 
> 标签：c#, xml, xml-serialization

编辑：使用 Jon Skeet 提供的代码。

我收到以下错误：

```
Message: There is an error in XML document (2, 2).
Inner Exception: {"<Translator xmlns=''> was not expected."} 
```

如果有帮助，我可以提供以下代码：

翻译器.cs：

```
public class Translator
{
    public FullBotTranslation Translation;

    public Translator()
    {
        Translation = new FullBotTranslation();
    }

    public void LoadLanguage(string language)
    {
        if (!Useful.ExistFile(System.AppDomain.CurrentDomain.BaseDirectory + "\\LanguagePacks\\" + language + ".xml"))
            language = "Francais";

        Translation = XmlSerializerHelper.Deserialize<FullBotTranslation>(System.AppDomain.CurrentDomain.BaseDirectory + "\\LanguagePacks\\" + language + ".xml");
    }

    public string GetTranslation(PhraseID phraseId)
    {
        foreach (Phrase phrase in Translation.Phrases)
        {
            if (phrase.PhraseID == phraseId)
                return phrase.PhraseString;
        }

        return "Incomplete translation...";
    }

    #region Nested type: Translation

    [Serializable]
    public class FullBotTranslation
    {
        public List<Phrase> Phrases = new List<Phrase>();
    }

    #endregion
} 
```

短语.cs：

```
public class Phrase
{
    public PhraseID PhraseID { set;  get; }
    public string PhraseString{ set; get; } 

    public Phrase()
    {

    }
} 
```

短语ID.cs

```
[Serializable]
public enum PhraseID
{
    none,
    Button_Start,
    Button_Stop,
} 
```

我这样使用它：

设置：

```
private Translator _translator;
_translator = new Translator(); 
```

保存：

```
Helpers.XmlSerializerHelper.Serialize(
            System.AppDomain.CurrentDomain.BaseDirectory + "\\LanguagePacks\\" + langPackName.Text + ".xml",
            _translator); 
```

加载：

```
 _translator = new Translator(); //yes this is needed ;)

        _translator.LoadLanguage(preloadedLangCombo.SelectedItem.ToString()); 
```

使用上面的代码保存 XML 文件时，它会输出以下内容：

英文.XML：

```
<?xml version="1.0"?>
<Translator xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Translation>
    <Phrases>
      <Phrase>
        <PhraseID>none</PhraseID>
        <PhraseString>Incomplete Translation</PhraseString>
      </Phrase>
      <Phrase>
        <PhraseID>Button_Start</PhraseID>
        <PhraseString>Start</PhraseString>
      </Phrase>
      <Phrase>
        <PhraseID>Button_Stop</PhraseID>
        <PhraseString>Stop</PhraseString>
      </Phrase>
    </Phrases>
  </Translation>
</Translator> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:24:31.263

目前尚不清楚这里出了什么问题 - 特别是因为错误消息似乎与您的示例 XML 不匹配。不过，您的异常处理很可能隐藏了问题 - 捕获所有此类异常是一个非常糟糕的主意，并且您将花费不必要的时间来关闭所涉及的流。我会把你的课程浓缩成这样：

```
public static class XmlSerializerHelper
{
    public static void Serialize(String path, object @object)
    {
        using (var stream = File.Create(path))
        {
            var s = new XmlSerializer(@object.GetType());
            s.Serialize(stream, @object);
        }
    }

    public static T Deserialize<T>(String path)
    {
        using (var stream = File.OpenRead(path))
        {
            var s = new XmlSerializer(typeof(T));
            return (T) s.Deserialize(stream);
        }
    }
} 
```

现在，如果出现问题，异常将传播到方法之外，而不是被伪装。另外，请注意，我只是对流进行了序列化，而不是`StreamWriter`参与其中。让 XML 基础结构处理所有编码更简单。

上面的代码在一个简单的测试中对我来说很好。

# ruby-on-rails - 在 Ruby On Rails 中传递 jQuery UI 滑块的值和句柄的位置

> ID：13834569
> 
> 赞同：2
> 
> 时间：2012-12-12T07:06:39.340
> 
> 标签：ruby-on-rails, jquery-ui, ruby-on-rails-3.2, jquery-ui-slider

我正在尝试使用 jquery UI 滑块在我的应用程序导轨中编辑表单。编辑对象时，未传递到位置句柄的对象值查看此屏幕截图：http: [//i.cubeupload.com/UlmeEe.png](http://i.cubeupload.com/UlmeEe.png)当我滑动句柄时，值未传递到字段中。看这个截图：http: [//i.cubeupload.com/5UmYyz.png](http://i.cubeupload.com/5UmYyz.png)

在 javascript 中，我设置 min : 2000 并从存储值中获取值。

```
<script> 
     $( "#slider" ).slider({
       value: $('storage').val(),
       animate: true,
       range: "min",
       min: 2000,
       max: 5000,
       step: 1000,
       change: function(event, ui) {
          $('storage').val(ui.value);
          }

     });
</script> 
```

在edit.html.erb

```
<div class="field">
    <%= f.label :storage, "Storage" %><br/>
    <div id="slider"></div> <br/>
        <%= f.text_field :storage %>        
  </div> 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:29:55.263

解决了..

用

```
 <script> 

         $( "#slider" ).slider({
          value: $('input#account_storage').val(),
          animate: true,
          range: "min",
          min: 2000,
          max: 5000,
          step: 1000,
          slide: function( event, ui ) {
          $( "input#account_storage" ).html( ui.value );
          },

          change: function(event, ui) {
          $('input#account_storage').attr('value', ui.value);
          }
        });
   </script> 
```

# android - 小部件网格大小错误

> ID：13834574
> 
> 赞同：13
> 
> 时间：2012-12-12T07:07:00.853
> 
> 标签：android, widget, sizing, android-appwidget

我编写了一个应该是 4x2 主屏幕块的小部件。它的 minheight 和 minwidth，按照目前的“App Widget Design Guidelines”页面是

```
android:minWidth="250dp"
android:minHeight="110dp" 
```

如果系统版本低于 Ice Cream Sandwich，则从 dimens.xml 应用填充

在我的 Nexus 4（xhdpi，Jellybean 4.2.1）上，这个小部件是 4x2。在模拟器（hdpi，Gingerbread 2.3.3）上，这个小部件是 4x2。然而，在我的 Nexus 7（hdpi，Jellybean 4.2.1）上，小部件是 3x2。我一生都无法弄清楚为什么或如何解决它。有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T10:00:47.070

Lars Vogel 在[这个 Home Screen Widget 教程](http://www.vogella.com/articles/AndroidWidgets/article.html)中写道：

> 作为计算规则，您应该使用以下公式定义小部件的大小：((列数/行数)* 74) - 2。这些是与设备无关的像素，-2 用于避免舍入问题。

编辑：显然 Vogel 是从[旧的 Widget API 文档](http://web.archive.org/web/20110428104419/http://developer.android.com/guide/topics/appwidgets/index.html)中获得的（向下滚动到中间页面以查看参考）。

基于此测量，对于 4 个单元格宽度和 2 个单元格高度，使用 294 x 146 倾角：

```
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:minWidth="294dip" android:minHeight="146dip"
    android:updatePeriodMillis="0" android:initialLayout="@layout/some_layout" /> 
```

# android - 休息服务连接（或其他）是否在 20 秒后关闭？

> ID：13834582
> 
> 赞同：0
> 
> 时间：2012-12-12T07:07:23.027
> 
> 标签：android, resttemplate

在android上使用spring restful时出现问题。
我的代码就是这样。
1\. 活动

```
public class TestRestTemplate extends Activity {
    final static String TAG = "TestRestTemplate";

    TextView tvResult;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.test_rest_template);

        tvResult = (TextView) findViewById(R.id.result);
    }

    public void onClick(View view) {
        new MyTask().execute("test");
    }

    private class MyTask extends AsyncTask<String, Void, String> {

        @Override
        protected String doInBackground(String... params) {
            // The URL for making the POST request
            String url = CommonUtilities.SERVER_URL + "/testRestTemplate";

            HttpHeaders requestHeaders = new HttpHeaders();

            // Sending a JSON or XML object i.e. "application/json" or
            // "application/xml"
            requestHeaders.setContentType(MediaType.APPLICATION_JSON);

            // Populate the Message object to serialize and headers in an
            // HttpEntity object to use for the request
            String returnObj = null;
            try {
                HttpEntity<String> requestEntity = new HttpEntity<String>(
                        params[0], requestHeaders);

                // Create a new RestTemplate instance
                RestTemplate restTemplate = new RestTemplate(true);

                // Make the network request, posting the message, expecting
                // a String in response from the server
                returnObj = restTemplate.postForObject(url, requestEntity,
                        String.class);
            }catch (NullPointerException e) {
                throw new RuntimeException("resttemplate errors");
            }catch (Exception e) {
                Log.e(TAG + "-Exception", "" + e.getMessage());
            }
            return returnObj;
        }

        @Override
        protected void onPostExecute(String result) {
            tvResult.append("\n" + result);
        }
    }   
} 
```

2\. test_rest_template.xml 文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="onClick"
        android:text="Request Server" />

    <TextView
        android:id="@+id/result"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Result::" />

</LinearLayout> 
```

3.在服务器端

```
@Controller
public class HomeController {

    private static final Logger logger = LoggerFactory
            .getLogger(HomeController.class);

    int count = 0;
    @RequestMapping(value = "/testRestTemplate", method=RequestMethod.POST, headers="Accept=application/json")
    public @ResponseBody String getDataFromClient(@RequestBody String clientData) {

        logger.info("request " + (++count) + " times");

        return count + " times request and return client data = " + clientData;
    }
} 
```

问题是，当我第一次单击按钮时，它连接到服务器并成功响应了一个字符串，但之后，如果我等待 21 秒或更长时间，然后单击按钮，我在 logcat 中发生了异常.

```
12-12 13:56:30.246: W/dalvikvm(1796): threadid=12: thread exiting with uncaught exception (group=0x40a13300)
12-12 13:56:30.266: E/AndroidRuntime(1796): FATAL EXCEPTION: AsyncTask #2
12-12 13:56:30.266: E/AndroidRuntime(1796): java.lang.RuntimeException: An error occured while executing doInBackground()
12-12 13:56:30.266: E/AndroidRuntime(1796):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
12-12 13:56:30.266: E/AndroidRuntime(1796):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
12-12 13:56:30.266: E/AndroidRuntime(1796):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
12-12 13:56:30.266: E/AndroidRuntime(1796):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
12-12 13:56:30.266: E/AndroidRuntime(1796):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
12-12 13:56:30.266: E/AndroidRuntime(1796):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
12-12 13:56:30.266: E/AndroidRuntime(1796):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
12-12 13:56:30.266: E/AndroidRuntime(1796):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
12-12 13:56:30.266: E/AndroidRuntime(1796):     at java.lang.Thread.run(Thread.java:856)
12-12 13:56:30.266: E/AndroidRuntime(1796): Caused by: java.lang.RuntimeException: resttemplate errors
12-12 13:56:30.266: E/AndroidRuntime(1796):     at vn.com.bip.personal_schedule.activity.TestRestTemplate$MyTask.doInBackground(TestRestTemplate.java:68)
12-12 13:56:30.266: E/AndroidRuntime(1796):     at vn.com.bip.personal_schedule.activity.TestRestTemplate$MyTask.doInBackground(TestRestTemplate.java:1)
12-12 13:56:30.266: E/AndroidRuntime(1796):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
12-12 13:56:30.266: E/AndroidRuntime(1796):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
12-12 13:56:30.266: E/AndroidRuntime(1796):     ... 5 more 
```

我用谷歌搜索这种模式大约 2 天，但没有找到任何有用的建议。你们中的任何人都可以向我解释这个问题。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:26:17.300

要调试休息请求，请使用 HttpURLConnection 并将结果记录为字符串。它将允许您跟踪正在发生的事情。您似乎有解析相关的错误。

您是否考虑过使用[RoboSpice](https://github.com/octo-online/robospice)来执行您的休息请求？它比 AsyncTask 更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T04:56:18.007

它可能不是一个完整的答案，但我找到了解决上述问题的方法。
RestTemplate`SimpleClientHttpRequestFactory`用于 Android 2.3 (GINGERBREAD) 或更高版本以及`HttpComponentsClientHttpRequestFactory`低于 2.3 的 Android 版本，因此如果我强制 RestTemplate 必须使用`HttpComponentsClientHttpRequestFactory`此代码

```
HttpComponentsClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory();
RestTemplate restTemplate = new RestTemplate(true, requestFactory); 
```

问题已解决。
我没有足够的时间找出问题发生的原因，所以如果你们中的任何专家知道这一点，请
提前为我们分享谢谢。

# sql - SKIP锁定和nowait之间的区别

> ID：13834583
> 
> 赞同：7
> 
> 时间：2012-12-12T07:07:28.153
> 
> 标签：sql, oracle

pl / sql中带有SKIP锁定的游标和nowait之间的区别？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-12T09:02:44.853

我认为我找到的这张图片是描述差异的最佳示例

![例子](../Images/0fd835eddfcd9c753cdabb5b41e07fa5.png)

[详细说明](http://viralpatel.net/blogs/oracle-skip-locked/)

# html - 特定要求的 HTML 编码

> ID：13834585
> 
> 赞同：-1
> 
> 时间：2012-12-12T07:07:44.313
> 
> 标签：html

我在一行中有三个词“书中的章节”“期刊论文”“会议论文”。我想要我的最终结果，比如“Chapters in”和“Chapters in”下面的书。相同的方式“期刊”，但“期刊”和“会议”下方的“论文”以及“会议”下方的论文。这可能吗？

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:15:21.670

这是一种简单的方法：

```
<table>
  <tr>
    <td>Chapters in<br>Book</td>
    <td>Journal<br>Papers</td>
    <td>Conference<br>Papers</td>
  </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:17:07.150

这是一种使用 divs 的方法：

```
<div style="float:left; margin-right:20px">Chapters in<br/>book</div>
<div style="float:left; margin-right:20px">Journal<br/>Papers</div>
<div style="float:left;">Conference<br/>Papers</div>​ 
```

jsFiddle 演示：http: [//jsfiddle.net/esPRr/](http://jsfiddle.net/esPRr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:29:40.583

```
<ul>
    <li>Chapters in
        <ul><li> book</li></ul>

    </li>
</ul>
​ u may go with this 
```

# android - android 2.3 的 android 日历事件问题

> ID：13834586
> 
> 赞同：0
> 
> 时间：2012-12-12T07:07:47.980
> 
> 标签：android, android-calendar

我正在使用下面提到的代码向用户展示添加日历事件屏幕。

例如，以下内容将提示用户是否应使用某些详细信息创建事件。

```
Intent intent = new Intent(Intent.ACTION_INSERT);
intent.setData(CalendarContract.Events.CONTENT_URI);
startActivity(intent); 
```

这部分适用于 Android 4.0 及更高版本，但不适用于 android 2.3 ....？我希望这适用于 2.3 到 4.1 之间的所有 android 操作系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:53:15.807

```
public class Main extends Activity implements OnClickListener{
private Cursor mCursor = null;
private static final String[] COLS = new String[]
{ CalendarContract.Events.TITLE, CalendarContract.Events.DTSTART};
} 
```

现在我们需要重写 on create 方法。特别注意我们如何填充数据库游标。这就是我们需要之前定义的 COLS 常量的地方。您还会注意到，在初始化数据库光标并设置单击处理程序回调之后，我们继续手动调用单击处理程序。这个快捷方式允许我们在不重复代码的情况下初步填写我们的 UI。

```
Main.java
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
mCursor = getContentResolver().query(
CalendarContract.Events.CONTENT_URI, COLS, null, null, null);
mCursor.moveToFirst();
Button b = (Button)findViewById(R.id.next);
b.setOnClickListener(this);
b = (Button)findViewById(R.id.previous);
b.setOnClickListener(this);
onClick(findViewById(R.id.previous));
} 
```

在我们的回调中，我们将光标操作到数据库中的正确条目并更新 UI。

```
@Override
public void onClick(View v) {
TextView tv = (TextView)findViewById(R.id.data);
String title = "N/A";
Long start = 0L;
switch(v.getId()) {
case R.id.next:
if(!mCursor.isLast()) mCursor.moveToNext();
break;
case R.id.previous:
if(!mCursor.isFirst()) mCursor.moveToPrevious();
break;
}
Format df = DateFormat.getDateFormat(this);
Format tf = DateFormat.getTimeFormat(this);
try {
title = mCursor.getString(0);
start = mCursor.getLong(1);
} catch (Exception e) {
//ignore
}
tv.setText(title+" on "+df.format(start)+" at "+tf.format(start));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:19:42.380

如果您以其他方式使用它，您也可以使用它：

```
mCursor = getContentResolver().query(
CalendarContract.Events.CONTENT_URI, COLS, null, null, null); 
```

它是日历的 contentProvider 。

# c# - 使用 C# 设置 CPU 的亲和性

> ID：13834588
> 
> 赞同：5
> 
> 时间：2012-12-12T07:07:57.770
> 
> 标签：c#, .net, cpu, affinity

我在 C# 中创建了一个窗口应用程序。现在我想为这个应用程序设置 CPU 亲和性。我可能有 2 个处理器、4 个处理器、8 个处理器或可能超过 8 个处理器。

我想使用来自接口的输入来设置 cpu 亲和性。

我怎样才能做到这一点？如何使用 Environment.ProcessorCount 设置亲和力？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-12T07:10:10.580

试试这个：

```
Process.GetCurrentProcess().ProcessorAffinity = (System.IntPtr)2; 
```

[这里](http://msdn.microsoft.com/en-us/library/system.diagnostics.processthread.processoraffinity.aspx)有更多关于它的信息。

**ProcessorAffinity**将每个处理器表示为一个位。位 0 代表处理器 1，位 1 代表处理器 2，依此类推。下表显示了四处理器系统可能的**ProcessorAffinity的一个子集。**

```
Property value (in hexadecimal)  Valid processors

0x0001                           1
0x0002                           2
0x0003                           1 or 2
0x0004                           3
0x0005                           1 or 3
0x0007                           1, 2, or 3
0x000F                           1, 2, 3, or 4 
```

这是一个小示例程序：

```
//TODO: manage exceptions
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("Total # of processors: {0}", Environment.ProcessorCount);
        Console.WriteLine("Current processor affinity: {0}", Process.GetCurrentProcess().ProcessorAffinity);
        Console.WriteLine("*********************************");
        Console.WriteLine("Insert your selected processors, separated by comma (first CPU index is 1):");
        var input = Console.ReadLine();
        Console.WriteLine("*********************************");
        var usedProcessors = input.Split(',');

        //TODO: validate input
        int newAffinity = 0;
        foreach (var item in usedProcessors)
        {
            newAffinity = newAffinity | int.Parse(item);
            Console.WriteLine("Processor #{0} was selected for affinity.", item);
        }
        Process.GetCurrentProcess().ProcessorAffinity = (System.IntPtr)newAffinity;
        Console.WriteLine("*********************************");
        Console.WriteLine("Current processor affinity is {0}", Process.GetCurrentProcess().ProcessorAffinity);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-25T23:34:01.457

Alex Filipovivi 提供的示例程序似乎不正确，因为它将处理器编号 OR 到 newAffinity 中，而没有首先将它们转换为设置位。所以如果你在这个程序中输入 3,4，你会得到一个 7 的关联掩码，即核心 1、2 和 3！掩码应设置为 12（十六进制 0xC，二进制 1100，如果位 0 是最低有效位，则设置位 2 和位 3）。

更换

```
newAffinity = NewAffinity | int.Parse(item); 
```

和

```
newAffinity = newAffinity | (1 << int.Parse(item)-1); 
```

是一种合理的方式来做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-25T01:10:46.957

对于寻找线程亲和力的人。

```
public class CpuAffinity
{
    [DllImport("kernel32.dll")]
    static extern IntPtr GetCurrentThread();

    [DllImport("kernel32.dll")]
    static extern IntPtr SetThreadAffinityMask(IntPtr hThread, IntPtr dwThreadAffinityMask);

    /// <summary>
    /// Sets the current Thread to have affinity to the specified cpu/processor if the system has more than one.
    /// 
    /// Supports most systems as we use a signed int; Anything more than 31 CPU's will not be supported.
    /// </summary>
    /// <param name="cpu">The index of CPU to set.</param>
    public static void SetCurrentThreadToHaveCpuAffinityFor(int cpu)
    {
        if (cpu < 0)
        {
            throw new ArgumentOutOfRangeException("cpu");
        }

        if (Environment.ProcessorCount > 1)
        {
            var ptr = GetCurrentThread();
            SetThreadAffinityMask(ptr, new IntPtr(1 << cpu));

            Debug.WriteLine("Current Thread Of OS Id '{0}' Affinity Set for CPU #{1}.", ptr, cpu);
        }else
        {
            Debug.WriteLine("The System only has one Processor.  It is impossible to set CPU affinity for other CPU's that do not exist.");
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T07:37:32.193

[System.Diagnostics.Process.ProcessorAffinity](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.processoraffinity.aspx)

你想用来做什么`Environment.ProcessorCount`？用户输入验证？无论如何，如果您想选择特定的处理器（#1 或 #2 或 #3...），请创建一个像这样的位掩码：

```
if (userSelection <= 0 || userSelection > Environment.ProcessorCount)
{
    throw new ArgumentOutOfRangeException();
}

int bitMask = 1 << (userSelection - 1);
Process.GetCurrentProcess().ProcessorAffinity = (IntPtr)bitMask; 
```

其中 userSelection - 是选定处理器的数量。

如果您想选择多个处理器，请执行

```
bitMask |= 1 << (anotherUserSelection - 1); 
```

对于每个用户选择

# c++ - 新对象中的空函数指针实际上不是 nullptr

> ID：13834589
> 
> 赞同：0
> 
> 时间：2012-12-12T07:08:01.693
> 
> 标签：c++, winapi, c++11, nullptr

我正在使用带有 Visual Studio 2012 的 C++(11)。

我使用定制的包装类创建窗口。

```
CUIWindow* winA = new CUIWindow ( NULL, TEXT("winAClassName"), TEXT("winACaption"), 200, 300 ); 
```

每个窗口都有一系列用于插件事件的“套接字”。

```
public:
    LPFNCUIWINDOWONCLOSE OnClose;
    LPFNCUIWINDOWONDESTROY OnDestroy;
    LPFNCUIWINDOWONNOTIFY OnNotify;
    LPFNCUIWINDOWONSIZE OnSize;
    LPFNCUIWINDOWONHOTKEY OnHotkey; 
```

我使用以下宏来调用可以在消息循环中分配给我的窗口类的不同套接字：

```
#define MapEvent(e, fn) \
{ \
    case e: \
        if ( fn != nullptr ) \
            return static_cast<LPARAM>( HANDLE_##e((hWnd), (wParam), (lParam), fn) ); \
} 
```

我的情况如下；

![带断点的代码](../Images/7df43dba4cebf38b72cc9b4838b70cef.png)

*您可以假设 pWindow 是指向 CUIWindow 对象的有效指针。*

在显示的断点处，一些未初始化的 OnXXXX 事件被定义为 0xCDCDCDCD 并在它们的消息到达时被调用（不管我在创建类后从未真正明确地设置它们）。这给了我一个 0x0BADFOOD 异常，因为函数指针是错误的。我会假设空函数指针会被捕获，`if ( fn != nullptr )`但是现在我不太确定，我正在请求帮助；

1.  解释为什么会发生这种情况
2.  找到阻止这种情况发生的最佳方法，最好不要在构造函数中将所有函数指针显式设置为零，因为有时会有很多很多套接字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:20:26.127

在`CUIWindow`类的构造函数中，您需要将这些成员显式设置为`nullptr`（或`NULL`或`0`）；由于所有这些指针都是原始指针，因此它们不会`0`在`CUIWindow`构造函数中自动设置为：

```
CUIWindow ( /* whatever parameters... */)
    : OnClose(nullptr)
    , OnDestroy(nullptr)
    , OnNotify(nullptr)
    , OnSize(nullptr)
    , OnHotkey(nullptr)
{
    // the constructor logic...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:21:55.713

未初始化的指针通常不会自动设置为空指针。稍微改变你的班级是一种选择吗？如果是这样，您可以设置所有它们而不命名所有它们。

```
struct CUIWindowEvents
{
    LPFNCUIWINDOWONCLOSE OnClose;
    LPFNCUIWINDOWONDESTROY OnDestroy;
    LPFNCUIWINDOWONNOTIFY OnNotify;
    LPFNCUIWINDOWONSIZE OnSize;
    LPFNCUIWINDOWONHOTKEY OnHotkey;
}

class CUIWindow
{
public:
    CUIWindowEvents Events; // move all events to a simple struct

    CUIWindow() // and in your constructor
        : Events() // initialise Events; this sets all the pointers to null
    { ... }
}; 
```

# python - 如何在没有数据库的情况下创建短网址

> ID：13834597
> 
> 赞同：1
> 
> 时间：2012-12-12T07:08:38.263
> 
> 标签：python, django, url, encryption, url-shortener

> **可能重复：**
> [如何以数学方法缩短网址](https://stackoverflow.com/questions/3569528/how-to-shorten-the-url-in-a-mathematical-approach)

它是一个大学 django 项目.. 我无法真正设置数据库模型来存储动态生成的 URL 并根据散列主键重定向到短 url.. 等

我正在考虑使用某种算法加密 URL 并在服务器上解密。最初，我想使用 md5 哈希，但我想我们无法解密。

我的实际网址如下所示：

```
http://mydomain.com/photo?friend_name=dennis&me_name=ritchie&ping_url=http%3A%2F%2Fmydomain.com%2Fimg%3Furl%3Dhttps%3A%fsjcsd.googleueusercontent.com%2F-Sf6bP2nOKa8%2FUMaw8vv0QLI%2FAaaddjhnkchkjda7E%2Fs800%2FHosbsco.png%26message%3Dhi+dude 
```

我正在考虑将其转换为：

```
http://mydomain.com?encode=hksfhsfksuhkvbkjnukvns 
```

然后在服务器端我想转换`hksfhsfksuhkvbkjnukvns`回实际的字符串。

我有任何 Python 库吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:41:20.663

您可以使用 url 压缩 + 加密/base64 方法。

对于压缩，您可以检查 python 的 zlib 或任何其他无损压缩库（lzma 等），然后通过 base64 将压缩的二进制字符串转换为 ascii。供您参考，您的网址的 zlib + base64 比原始网址差。

但是 url 可能永远不会像你想象的那么短，仅仅是因为 url 内容信息量大，压缩比不好等。所以这种方案可能永远无法满足对文本长度有限制的应用程序的需求（比如 twitter） .

因此，如果您想要一个非常短的网址，则必须有一个地方来存储短长对。

牢记这些，我在谷歌上搜索“网址缩短器”并弹出了很多内容。

这些是用于完成这项工作的第三方 Web 应用程序：

*   [http://goo.gl/](http://goo.gl/) 来自谷歌
*   [http://app.x.co/](http://app.x.co/) 我的第一次搜索命中
*   [http://www.appappeal.com/apps/url-shortener](http://www.appappeal.com/apps/url-shortener) 大量的缩短应用程序列表
*   goo.gl/zyHmS 好吧，我只是在尝试 goo.gl ...

不过，希望您可以使用第三方应用程序。

# c - 使用 PolarSSL AES-CBC 加密字符串后无法解密字符串

> ID：13834602
> 
> 赞同：3
> 
> 时间：2012-12-12T07:08:53.630
> 
> 标签：c, encryption, cryptography, aes, polarssl

我写了一个程序来加密一个字符串`PolarSSL AES-CBC`

这是我的代码

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <polarssl/aes.h>
#include <polarssl/havege.h>

int main()
{
    char buff[2][64] = {"Who can tell me WHY?", ""};
    havege_state hs;
    int retval;
    unsigned char IV[16];

    aes_context enc_ctx;
    aes_context dec_ctx;

    aes_setkey_enc(&enc_ctx, "password", 256);
    aes_setkey_dec(&dec_ctx, "password", 256);

    havege_init(&hs);
    havege_random(&hs, IV, 16);

    //encrypt
    aes_crypt_cbc(&enc_ctx, AES_ENCRYPT, 64, IV, buff[0], buff[1]);
    havege_random(&hs, IV, 16);

    //decrypt
    aes_crypt_cbc(&dec_ctx, AES_DECRYPT, 64, IV, buff[1],buff[0]);

    printf("After decrypt:%s\n", buff[0]);
    return 0;
} 
```

但是当我运行它时，我在解密后得到了错误的文本。

我对AES算法不太了解，因为我的英语很差，看一些文章太难了。

----------------------------------添加者 midCat---------------------- ----------------------

我听从了您的建议，现在更改我的代码我使用相同的 IV 和 256 位密钥，这是新代码

```
int main()
{
    char buff[2][64] = {"ABCDEFGHIJKLMN", ""};
    havege_state hs;
    int retval;
    unsigned char IV[16];
    unsigned char IV2[16];
    unsigned char key[32];

    aes_context enc_ctx;
    aes_context dec_ctx;

    havege_init(&hs);
    havege_random(&hs, IV, 16);
    havege_random(&hs, key, 32);
    strncpy(IV, IV2, 16);           //copy IV

    aes_setkey_enc(&enc_ctx, key, 256);
    aes_setkey_dec(&dec_ctx, key, 256);

    //encrypt
    aes_crypt_cbc(&enc_ctx, AES_ENCRYPT, 64, IV, buff[0], buff[1]);
    printf("Before encrypt:%s\n", buff[0]);

    //decrypt
    aes_crypt_cbc(&dec_ctx, AES_DECRYPT, 64, IV2, buff[1],buff[0]);
    printf("After decrypt:%s\n", buff[0]);
    return 0;
} 
```

我编译它，并运行了很多次，得到了相同的输出：

```
Before encrypt:ABCDEFGHIJKLMN
After decrypt:ABCDEFGHYC
                        LMN 
```

如何获得`IV`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T08:54:06.727

编辑：正如丹尼尔在他的回答中指出的那样，一个大问题是您正在尝试使用随机 IV 进行解密（这不会给您预期的结果）。但是，我建议您也阅读此答案的其余部分。

首先，`aes_set_key_enc`不要`aes_set_key_dec`将密码作为输入，它们采用密钥。密钥应该是与密钥长度一样长的完全随机值（在您的情况下为 32 字节的随机字符串，因为您想使用 256 位密钥）。

在您的情况下，您使用`aes_set_key_enc/aes_set_key_dec`短密码进行调用，但告诉它应该使用 256 位密钥，这将导致这些函数使用密码之外的内存作为密钥的一部分，并导致加密和解密密钥不同。

回顾一下，AES（或任何密码算法）需要随机密钥，算法本身没有将密码扩展为密钥的概念。

如果要将密码用作密钥，则需要一些将非随机密码扩展为伪随机密钥的功能。唯一明智的方法是使用设计为加密安全但速度较慢的功能，这是为了减轻对密码进行暴力攻击的风险。

使用好的函数是 Colin Percivals [scrypt](http://www.tarsnap.com/scrypt.html)、[bcrypt](http://www.openbsd.org/papers/bcrypt-paper.ps)或[PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)，我最推荐 scrypt 。

但是，我想强调的是，您可能根本不应该在这个抽象级别上工作。您使用的原语（分组密码、CBC 模式）处于非常低的抽象级别，使用这些原语构建密码系统可能非常危险。例如，您没有在密文上使用任何类型的身份验证，这可能会使您的实现面临选择的密文攻击。

我认为，如果您想在应用程序中使用密码学，最好的方法是尝试在更高的抽象级别上工作，例如使用 Dan Bernsteins 出色的[NaCl](http://nacl.cr.yp.to/)或 Googles [KeyCzar](http://www.keyczar.org/)。

回顾一下，您的特定问题可以通过使用 256 位密钥来解决，但您应该三思而后行在此抽象级别实现自己的密码系统。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T09:20:25.963

您正在使用随机 IV 进行解密。那是错的。您需要与用于加密的相同 IV 进行解密。只需删除第二个调用

```
havege_random(&hs, IV, 16); 
```

在加密和解密之间。

还要确保使用 32 字节的 char 数组作为第二个参数`aes_setkey_enc`，`aes_setkey_dec`因为您正在读取字符串的末尾，就像现在一样。根据编译器的不同，它可能会导致用于加密和解密的密钥不同（因此失败）。

（编辑问题的后半部分）

改变这个：

```
strncpy(IV, IV2, 16);           //copy IV 
```

对此：

```
memcpy(IV2, IV, 16);           //copy IV 
```

那`memcpy`是`strncpy`因为 IV 是可以包含字符串 terminator 的随机数据`'\0'`，并且这两个函数的第一个参数是目标，而不是源。您将字符串从 IV2 复制到 IV，而不是将内存从 IV 复制到 IV2。

并回答有关如何获取 IV 进行解密的问题：通常，IV 只是与密文一起发送。每个 IV 只能使用一次，并且不能预测，但不必保密。一种常见的结构是为每条消息选择一个随机 IV，然后简单地将 IV 附加到密文或将其存储在文件头中，具体取决于场景。

话虽如此，我同意不要使用加密原语构建自己的加密协议的建议，除非你知道自己在做什么。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-16T12:04:18.477

我刚把 64 改成 14

```
aes_crypt_cbc(&dec_ctx, AES_DECRYPT, 64, IV2, buff[1],buff[0]); 
```

一切都很好！

# iphone - 不使用 iPhone 中的 AVCaptureSession 调用 UIImagePickerControl 的方法

> ID：13834610
> 
> 赞同：2
> 
> 时间：2012-12-12T07:09:43.790
> 
> 标签：iphone, uiimagepickercontroller, avcapturesession, photolibrary, avcapturedevice

我曾`AVCaptureSession`在 iPhone 应用程序中用于拍摄照片。我也想从 PhotosLibrary 中获取图像。

我已经实现`UIImagePickerController`了控制及其所有方法。

我可以打开图书馆，但我无法获得我选择的照片。以及不调用 PickerView 的方法。这些方法没有回应。

有没有不同的方法来实现对照片库的`UIImagePickerController`控制？`AVCaptureSession`

请告诉我解决方案。

或者建议我替代解决方案，而不是`Overlay`因为我想要具有动态控件的两种功能。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:19:13.897

对于打开的照片库，请使用：

```
-(IBAction)pickphoto:(id)sender
{
    [self startMediaBrowserFromViewController: self usingDelegate: self];
}

- (BOOL) startMediaBrowserFromViewController: (UIViewController*) controller
                               usingDelegate: (id <UIImagePickerControllerDelegate,
                                               UINavigationControllerDelegate>) delegate{

    if (([UIImagePickerController isSourceTypeAvailable:
          UIImagePickerControllerSourceTypeSavedPhotosAlbum] == NO)
        || (delegate == nil)
        || (controller == nil))
        return NO;

    UIImagePickerController *mediaUI = [[UIImagePickerController alloc] init];
    mediaUI.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;

    mediaUI.mediaTypes = [[NSArray alloc] initWithObjects: (NSString *) kUTTypeMovie,kUTTypeImage, nil];
    mediaUI.allowsEditing = YES;

    mediaUI.delegate = delegate;

    [controller presentModalViewController: mediaUI animated: YES];
    return YES;

}

- (void) imagePickerController: (UIImagePickerController *) picker
 didFinishPickingMediaWithInfo: (NSDictionary *) info
{

    NSString *mediaType = [info objectForKey: UIImagePickerControllerMediaType];
 thumbnail = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
 [self dismissModalViewControllerAnimated:YES];
} 
```

对于捕获图像，请使用以下命令：

```
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;

imagePicker.delegate = self;

[self presentViewController:imagePicker animated:YES completion:nil]; 
```

# android - 在服务中取回按键

> ID：13834613
> 
> 赞同：1
> 
> 时间：2012-12-12T07:09:57.093
> 
> 标签：android, service, keyevent

我一直在尝试获取服务中的 Back Key Press，但没有任何结果。在 Activity 中有一个函数 onKeyDown() 可以识别各种关键事件。服务中有没有办法确定是否按下了返回键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:11:51.030

服务不打算直接与用户操作一起工作，所以不是。但是如果这个 Service 和你的 Activity 同时运行，那么 Activity 可以通知 Service 已经按下了返回键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:22:26.647

一个选项可能是为与主页按键匹配的操作注册广播接收器，但我找不到。

# mysql - 一个更新查询所有更新

> ID：13834614
> 
> 赞同：-4
> 
> 时间：2012-12-12T07:09:57.090
> 
> 标签：mysql

以下是我的 sql 查询，它们正在更新同一个表中的值。我想将这两个查询嵌入到一个中，但我无法做到这一点。请让我知道我该怎么做，谢谢：

```
$SQL1 = "UPDATE table1  SET gender='$sex', dob = '$dob', reg_date ='$reg_date'
    WHERE id = '$id'"

$SQL2 = "UPDATE table1 a CROSS JOIN lookup b
 SET    a.ADRES = REPLACE(a.ADRES, b.`WRONG`, b.`RIGHT`)
 WHERE  a.ADRES LIKE CONCAT('%', b.`WRONG`, '%')" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:18:27.517

```
UPDATE  table1 a CROSS JOIN lookup b
 SET    a.ADRES = REPLACE(a.ADRES, b.`WRONG`, b.`RIGHT`),
        gender='$sex', 
        dob = '$dob', 
        reg_date ='$reg_date'
 WHERE  a.ADRES LIKE CONCAT('%', b.`WRONG`, '%') OR 
        id = '$id' 
```

该查询易受攻击`SQL Injection`，请参阅下面的文章以了解如何保护它，

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

# c - 用户定义的全局变量在 C 中的两个不同文件中给出不同的值

> ID：13834623
> 
> 赞同：-1
> 
> 时间：2012-12-12T07:10:57.650
> 
> 标签：c, file, struct, user-defined-types

有一个名为“AAA.h”的头文件。在这个头文件中，我们定义了一个名为 的结构`lrd`，它看起来像：

```
struct lrd
{   
int     tc;
char    ptc[5];
char    stc[5];
char    ath[5];
int     vc;
};
struct lrd lr; 
```

这个头文件“AAA.h”包含在两个不同的文件名“BBB.c”和“CCC.c”中。我们`lr`在“BBB.c”文件中为结构变量赋值如下：

```
lr.tc=tc;
memcpy(lr.ptc,ptc,sizeof(ptc));
memcpy(lr.stc,stc,sizeof(stc));
memcpy(lr.ath,ath,sizeof(ath));
lr.vc=vc; 
```

以上源变量从数据库中获取值。`lr`我们在“CCC.c”文件中使用结构变量。我们使用结构 lrd 变量如下：

```
char *ptc()
{
    sprintf(str, "lr.ptc(%s)", lr.ptc);
    trace(str);
    return lr.ptc;
}
char *stc()
{
    sprintf(str, "lr.stc(%s)", lr.stc);
    trace(str);
    return lr.stc;
} 
```

**变量 stc 在“CCC.c”文件中给出了错误的值。** 请帮我弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:49:59.637

看看怎么`benjarobin`说。我只是给你看一个小脚印

AAA.h

```
#ifndef _AAA_H
struct abc
{
 int x;
 char *y;
 char *Z;
};

extern struct abc p;

extern void assign(void);
extern void display (void);
#endif 
```

CCC.c

```
#include <stdio.h>
#include "AAA.h"

struct abc p; // Deceleration of p
void assign ()
{
    p.x=20;
    p.y="abcd";
    p.Z="xyz0";

    return;
} 
```

BBB.c

```
#include <stdio.h>
#include "AAA.h"

void display (void)
{
    printf("x = %d, y =%s, z=%s",p.x,p.y,p.Z);

} 
```

DDD.c 包含`main function`.

```
#include <stdio.h>
#include "AAA.h"
void main ()
{
    printf("\n\nAssigning Values\n\n");
    assign ();

    printf("\n\nIN BBB.c\n\n");
    display ();

    printf("\n\nIN MAIN\n\n");
    printf("x = %d, y =%s, z=%s",p.x,p.y,p.Z);

} 
```

输出是

```
Assigning Values

IN BBB.c

x = 20, y =abcd, z=xyz0

IN MAIN

x = 20, y =abcd, z=xyz0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:27:27.913

您的代码显示：

```
memcpy(lr.ptc,ptc,sizeof(ptc));
memcpy(lr.stc,stc,sizeof(stc));
memcpy(lr.ath,ath,sizeof(ath)); 
```

它不显示`ptc`,`stc`或的声明`ath`。由于您要复制到`lr.ptc`etc，因此操作数`sizeof()`应该是`lr.ptc`etc，而不是源的大小。或者，如果您非常小心，请选择两种尺寸中的最小值。

您可以/应该使用以下方法进行调试：

```
printf("%d (%s)(%s)(%s) %d\n", lr.tc, lr.ptc, lr.stc, lr.ath, lr.vc); 
```

任务完成后立即。如果这显示了错误的值，那么您就知道问题出在作业中。如果这显示了正确的值，那么您可以开始寻找流浪指针和其他此类可怕的问题。

没有证据表明这是问题所在，因为您没有生成 SSCCE（[简短、自包含、正确示例](http://sscce.org/)）。具体来说，您只生成了代码片段，而不是三个源文件的集成集（尽管我们可以从给定的信息中推断出标题）。如果没有实际演示问题的代码（所有这些，包括所有变量和函数的定义——但不包括任何多余的材料），我们只能推测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:35:06.460

应避免使用外部变量，但如果您仍想使用全局变量，则应执行以下操作：

*   在 .c 文件中声明变量

    结构 lrd lr;

*   在 .h (AAA.h) 中添加外部定义

    外部结构 lrd lr;

# dart - 如何从 Dart-Editor 编译 uxl 文件？

> ID：13834637
> 
> 赞同：1
> 
> 时间：2012-12-12T07:12:13.713
> 
> 标签：dart, rikulo

我从本教程[http://docs.rikulo.org/rikulo/latest/UXL/Fundamentals/UXL_Overview.html安装了依赖项](http://docs.rikulo.org/rikulo/latest/UXL/Fundamentals/UXL_Overview.html)

```
dependencies:
  rikulo_uxl:
    git: git://github.com/rikulo/uxl.git 
```

试图用 uc.dart 编译我得到：

```
Error: line 8 pos 1: library handler failed
import 'package:args/args.dart'; 
```

怎么了？缺少路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-14T13:47:51.260

当您引用在磁盘上找不到的包时，通常会发生这种情况。你应该确保你[的包](https://pub.dartlang.org/packages/args)中列出了`pubspec.yaml`并且你已经运行了`pub get`. 您还可以检查您的`packages`文件夹内是否可以看到一个名为`args`.

# asp.net-mvc-3 - 如何在使用 jquery 的范围验证的基础上更改每个级别的剑道面板栏的颜色？

> ID：13834642
> 
> 赞同：1
> 
> 时间：2012-12-12T07:12:57.713
> 
> 标签：asp.net-mvc-3, kendo-ui

```
 <div>
 @(Html.Kendo().PanelBar()
    .Name("LeaderPanelbar")
    .ExpandMode(PanelBarExpandMode.Single)
    .HtmlAttributes(new { style = "width:300px" })
    .Items(panelbar =>
    {
        foreach (var r in Model)
        {
            float PassKey = r.PassKey;
            panelbar.Add().Text(Convert.ToString(r.PassKey))
                .Expanded(true)
                .Content(@<div style="padding: 10px;">
           @Html.Action("PanelItemContent", new { Key = PassKey, sDateRange = ViewBag.SelectedDateRange, sListText = ViewBag.ListText, sCustomEndDate = ViewBag.CustomEndDate, sWidgetTitle = ViewBag.WidgetTitle, sWidgetType = ViewBag.WidgetType, HygieneDelay = ViewBag.HygieneDelay, GracePeriod = ViewBag.GracePeriod, RGracePeriod = ViewBag.RGracePeriod })

        </div>);
        }

    })
)
 </div> 
```

然后我必须在面板栏中添加条件以在每个级别显示不同的颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:21:50.023

我会将该逻辑移动到您的模型而不是 jQuery 中，并使您的模型更复杂一些。看起来您的模型目前只是一个列表。

```
// Model
public class Leader
{
    public float PassKey { get; set; }
    public DateTime DateCompare { get; set; }
    public DateTime DateBaseline { get; set; }
    // Not sure what you are
    public string StatusColor
    {
        get {
            // do your logic on the dates?
            return "red" // Ex.
        }
    }
}

// Controller
public ActionResult LeaderPage()
{
    var model = new IList<Leader>();
    model.Add(new Leader {PassKey = "???", DateCompare = [YourDate], DateBaseLine = [AnotherDate]})
    // Add more (programatically)

    return View(model);
}

// View
for each (Leader leader in Model)
    float PassKey = leader.PassKey;
...
    .Content(@<div style="padding: 10px; color: @leader.StatusColor;">
... 
```

或者类似的东西，只是在我的头顶上打字。如果可以，我认为最好尝试使您的数据更智能，而不是让您的 UI 更智能。

我希望这有帮助。

# c++ - 在 C 和 C++ 中捕获 SIGBUS

> ID：13834643
> 
> 赞同：1
> 
> 时间：2012-12-12T07:13:00.377
> 
> 标签：c++, c, sigbus

我想赶上 SIGBUS，我的代码如下所示：

```
#include <stdlib.h>
#include <signal.h>
#include <iostream>
#include <stdio.h>

void catch_sigbus (int sig)
{
    //std::cout << "SIGBUS" << std::endl;
    printf("SIGBUS\n");   
    exit(-1);
}

int main(int argc, char **argv) {

signal (SIGBUS, catch_sigbus);

    int *iptr;
    char *cptr;

#if defined(__GNUC__)
# if defined(__i386__)
    /* Enable Alignment Checking on x86 */
    __asm__("pushf\norl $0x40000,(%esp)\npopf");
# elif defined(__x86_64__) 
     /* Enable Alignment Checking on x86_64 */
    __asm__("pushf\norl $0x40000,(%rsp)\npopf");
# endif
#endif

    /* malloc() always provides aligned memory */
    cptr = (char*)malloc(sizeof(int) + 1);

    /* Increment the pointer by one, making it misaligned */
    iptr = (int *) ++cptr;

    /* Dereference it as an int pointer, causing an unaligned access */

    *iptr = 42;

    return 0;
} 
```

当我使用 printf 时，它可以通过调用 catch_sigbus 来捕获，但是当我使用 cout 时，它不能。所以有人可以帮助我吗？我在 Ubuntu 12.04 上运行。

我有另一个问题。当我赶上 SIGBUS 时，我怎样才能得到 si_code？`BUS_ADRALN/BUS_ADRERR/BUS_OBJERR`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T08:19:04.623

您不能在信号处理程序中使用`printf`或。`cout`也不能打电话`exit`。`printf`这次你很幸运，但你没有那么幸运`cout`。如果您的程序处于不同的状态，则可能`cout`会起作用而`printf`不会起作用。或者两者都不是，或者两者兼而有之。检查您的操作系统的文档以查看哪些函数是信号安全的（如果存在，它的文档通常非常糟糕）。

在这种情况下，您最安全的选择是直接调用`write`，`STDERR_FILENO`然后调用`_exit`（不是`exit`，在信号处理程序中是不安全的）。在某些系统上调用 是安全的`fprintf`，`stderr`但我不确定 glibc 是否是其中之一。

编辑：要回答您添加的问题，您需要设置信号处理程序`sigaction`以获取其他信息。这个例子是就我在信号处理程序中进行的，如果你想更高级，我包括了一种替代方法。请注意，write 理论上是不安全的，因为它会破坏 errno，但由于我们正在这样做，因此*在这种特殊情况下*`_exit`它是安全的：

 *```
#include <stdlib.h>
#include <signal.h>
#include <stdio.h>
#include <unistd.h>
#include <string.h>

void
bus_handler(int sig, siginfo_t *si, void *vuctx)
{
        char buf[2];
#if 1
        /*                                                                                                                           
         * I happen to know that si_code can only be 1, 2 or 3 on this                                                               
         * particular system, so we only need to handle one digit.                                                                   
         */
        buf[0] = '0' + si->si_code;
        buf[1] = '\n';
        write(STDERR_FILENO, buf, sizeof(buf));
#else
        /*                                                                                                                           
         * This is a trick I sometimes use for debugging , this will                                                                 
         * be visible in strace while not messing with external state too                                                            
         * much except breaking errno.                                                                                                
         */
        write(-1, NULL, si->si_code);
#endif
        _exit(1);
}

int
main(int argc, char **argv)
{
        struct sigaction sa;
        char *cptr;
        int *iptr;

        memset(&sa, 0, sizeof(sa));

        sa.sa_sigaction = bus_handler;
        sa.sa_flags = SA_SIGINFO;
        sigfillset(&sa.sa_mask);
        sigaction(SIGBUS, &sa, NULL);

#if defined(__GNUC__)
# if defined(__i386__)
        /* Enable Alignment Checking on x86 */
        __asm__("pushf\norl $0x40000,(%esp)\npopf");
# elif defined(__x86_64__)
        /* Enable Alignment Checking on x86_64 */
        __asm__("pushf\norl $0x40000,(%rsp)\npopf");
# endif
#endif

        /* malloc() always provides aligned memory */
        cptr = (char*)malloc(sizeof(int) + 1);

        /* Increment the pointer by one, making it misaligned */
        iptr = (int *) ++cptr;

        /* Dereference it as an int pointer, causing an unaligned access */

        *iptr = 42;

        return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:18:38.953

根据您的评论，您正在尝试调试 SIGBUS，并且已经存在相关问题： [Debugging SIGBUS on x86 Linux](https://stackoverflow.com/questions/2089167/debugging-sigbus-on-x86-linux)

这列出了许多可能的原因。但可能 SIGBUS 最可能的原因是，你有内存损坏并且它把事情搞砸了，所以你稍后会得到 SIGBUS ......所以调试信号可能无助于解决错误。话虽如此，使用调试器来捕获代码中引发信号的点，并查看它是否是指针。这是试图找出原因的一个很好的起点。*

# jquery - 使用 jQuery 从数据库加载内容，然后淡入

> ID：13834644
> 
> 赞同：0
> 
> 时间：2012-12-12T07:13:14.903
> 
> 标签：jquery, fadein

我从 MySQL 数据库中获取内容并将其输出到`#content div`.

我希望该 div 默认不可见，并在内容加载后平滑显示。

我知道这非常容易，但对于我的生活，我不记得该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:19:45.550

在 JQuery 中，您可以添加

```
$(document).ready(function()  {
    $('div#id_of_div').html("<?php $content; ?>");
}); 
```

但是有很多方法可以显示内容，你可以使用`fadeIn("slow")`。生效。

您还可以在`ready`函数内部使用 ajax。这完全取决于您以及您希望获取数据的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:18:22.737

通过 ajax 加载您的内容......（url-to-your-result-stuff）......而不是在接收数据后淡入

```
jQuery(function(){
    jQuery('your-div-selector')
        .hide()
        .load(
            'url-to-your-result-stuff',
            {},
            function() {
                jQuery(this).fadeIn();
            });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T07:21:53.103

如果您想要平滑过渡，请使用带有`visiblity`and`opacity`属性的“隐藏”类而不是`display`属性，否则该元素在隐藏时不会成为文档常规流程的一部分并且可能会闪烁。该`visibility`属性是为了支持不知道`opacity`. 首先在您的 HTML 上添加类，然后添加 CSS：

```
div.hidden {
  visibility: hidden;
  opacity: 0;
} 
```

然后您可以在加载内容时使用回调再次显示 div：

```
$('#content').load('contents.php', function() {
  $(this).css('visibility', 'visible').fadeTo('fast', 1);
}); 
```

# javascript - yui3 更改 iframe 头部

> ID：13834648
> 
> 赞同：2
> 
> 时间：2012-12-12T07:13:25.530
> 
> 标签：javascript, iframe, yui3

我想通过 yui3 注入 iframe 头。示例代码在 FF 中工作，但 IE9 显示错误“YUI 未定义”。我不知道IE9会发生什么。

```
<head>
    <script src="http://yui.yahooapis.com/3.5.0/build/yui/yui-min.js"></script>
    <script src="./test-yui.js"></script>
</head>
<body>
    <iframe src="#" id="frame"></iframe>
</body>
    var SC = 'script';
    YUI().use('node', function (Y) {
        var frame = Y.Node.getDOMNode(Y.one('#frame'));
        o = frame.contentWindow.document;
        o.open().write(
            '<head><' + SC + ' type="text/javascript" src="http://yui.yahooapis.com/3.5.0/build``/yui/yui-min.js"></' + SC + '>'+
            '<' + SC + '>YUI().use(\'tabview\', \'node\', function(Y) {});</' + SC + '>'+
            '</head>'+
            '<body><div class="unit_title" >HELLO WORLD</div></body>');
        o.close();
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:04:12.550

尝试写入 iframe 可能会很棘手我建议查看 YUI 中的[Frame](http://yuilibrary.com/yui/docs/api/classes/Frame.html)模块，有关使用它的一些详细信息可以在此处找到[http://www.andrewwooldridge.com/blog/2011/04/14/hidden-yui-gem -框架/](http://www.andrewwooldridge.com/blog/2011/04/14/hidden-yui-gem-frame/)

# html - CSS动画在歌剧中不起作用

> ID：13834649
> 
> 赞同：0
> 
> 时间：2012-12-12T07:13:28.133
> 
> 标签：html, css, css-animations

我正在使用以下代码在我的网页上生成动画。它在 safari、firefox 和 chrome 中运行良好，但在歌剧中不起作用。还有一件事，在@keyframes 规则的[w3c 参考](http://www.w3schools.com/cssref/css3_pr_keyframes.asp)中，为opera 提供的语法是“@-o-keyframes”，但它适用于“@keyframes”。我面临的问题是动画只能工作一次。之后，它开始表现得很奇怪。

这是标记。

```
 <div id="content-slider">
        <div id="slider">  <!-- Slider container -->
            <div id="mask">  <!-- Mask -->
                <ul>
                    <li id="first" class="firstanimation">  <!-- ID for tooltip and class for animation -->
                        <a href="#"> <img src="HP-7.jpeg" alt="Cougar"/> </a>
                        <div class="tooltip"> <h1>Harry Potter 7</h1> </div>
                    </li>

                    <li id="second" class="secondanimation">
                        <a href="#"> <img src="SH-2.jpg" alt="Lions" /> </a>
                        <div class="tooltip"> <h1>Sherlock Holmes 2</h1> </div>
                    </li>

                    <li id="third" class="thirdanimation">
                        <a href="#"> <img src="rango.jpg" alt="Snowalker"/> </a>
                        <div class="tooltip"> <h1>Rango</h1> </div>
                    </li>

                    <li id="fourth" class="fourthanimation">
                        <a href="#"> <img src="DM.png" alt="Howling"/> </a>
                        <div class="tooltip"> <h1>Despicable Me 2</h1> </div>
                    </li>

                    <li id="fifth" class="fifthanimation">
                        <a href="#"> <img src="Mad-3.jpeg" alt="Sunbathing"/> </a>
                        <div class="tooltip"> <h1>Madagascar 3</h1> </div>
                    </li>
                </ul>

            </div>  <!-- End Mask -->
            <div class="progress-bar">

            </div>  <!-- Progress Bar -->
        </div>  <!-- End Slider Container -->
    </div> 
```

的CSS。

```
 #slider {
        float: right;
    background: #000000;
    border: 3px solid #8B7355;
        box-shadow: 1px 1px 5px rgba(0,0,0,0.7);
    height: 255px;
    margin: 18px 2%;
    width: 75%;
    overflow: visible;
    position: relative;
    }
    /* HIDE ALL OUTSIDE OF THE SLIDER */

    #mask {
        overflow: hidden;
        height: 255px; 
    }
    /* IMAGE LIST */

    #slider ul {
        margin: 0;
        padding: 0;
        position: relative;
    }
    #slider li { 
        width: 75%;  /* Width Image */
        height: 253px; /* Height Image */
        position: absolute;
        top: -250px;    /* Original Position - Inside of the Slider */
        list-style: none;
    }
    #slider img {
    width:820px;
        height: 255px;
    }
    #slider li.firstanimation {
    animation: cycle 25s linear infinite;
        -o-animation: cycle 25s linear infinite;
    }
    #slider li.secondanimation {
    animation: cycletwo 25s linear infinite;
        -o-animation: cycletwo 25s linear infinite; 
    }
    #slider li.thirdanimation {
    animation: cyclethree 25s linear infinite;
        -o-animation: cyclethree 25s linear infinite;   
    }
    #slider li.fourthanimation {
    animation: cyclefour 25s linear infinite;
        -o-animation: cyclefour 25s linear infinite;    
    }
    #slider li.fifthanimation {
    animation: cyclefive 25s linear infinite;
        -o-animation: cyclefive 25s linear infinite;    
    }

    @keyframes cycle {
        0%  { top: 0px; } /* When you start the slide, the first image is already visible */
        4%  { top: 0px; } /* Original Position */
        16% { top: 0px; opacity:1; z-index:0; } /* From 4% to 16 % = for 3 seconds the image is visible */
        20% { top: 250px; opacity: 0; z-index: 0; } /* From 16% to 20% = for 1 second exit image */
        21% { top: -250px; opacity: 0; z-index: -1; } /* Return to Original Position */
        92% { top: -250px; opacity: 0; z-index: 0; }
        96% { top: -250px; opacity: 0; } /* From 96% to 100% = for 1 second enter image*/
        100%{ top: 0px; opacity: 1; }
    } 
    @keyframes cycletwo {
        0%  { top: -250px; opacity: 0; } /* Original Position */
        16% { top: -250px; opacity: 0; }/* Starts moving after 16% to this position */
        20% { top: 0px; opacity: 1; }
        24% { top: 0px; opacity: 1; }  /* From 20% to 24% = for 1 second enter image*/
        36% { top: 0px; opacity: 1; z-index: 0; }   /* From 24% to 36 % = for 3 seconds the image is visible */
        40% { top: 250px; opacity: 0; z-index: 0; } /* From 36% to 40% = for 1 second exit image */
        41% { top: -250px; opacity: 0; z-index: -1; }   /* Return to Original Position */
        100%{ top: -250px; opacity: 0; z-index: -1; }
    }

    @keyframes cyclethree {
        0%  { top: -250px; opacity: 0; }
        36% { top: -250px; opacity: 0; }
        40% { top: 0px; opacity: 1; }
        44% { top: 0px; opacity: 1; } 
        56% { top: 0px; opacity: 1; } 
        60% { top: 250px; opacity: 0; z-index: 0; }
        61% { top: -250px; opacity: 0; z-index: -1; } 
        100%{ top: -250px; opacity: 0; z-index: -1; }
    }

    @keyframes cyclefour {
        0%  { top: -250px; opacity: 0; }
        56% { top: -250px; opacity: 0; }
        60% { top: 0px; opacity: 1; }
        64% { top: 0px; opacity: 1; }
        76% { top: 0px; opacity: 1; z-index: 0; }
        80% { top: 250px; opacity: 0; z-index: 0; }
        81% { top: -250px; opacity: 0; z-index: -1; }
        100%{ top: -250px; opacity: 0; z-index: -1; }
    }
    @keyframes cyclefive {
        0%  { top: -250px; opacity: 0; }
        76% { top: -250px; opacity: 0; }
        80% { top: 0px; opacity: 1; }
        84% { top: 0px; opacity: 1; }
        96% { top: 0px; opacity: 1; z-index: 0; }
        100%{ top: 250px; opacity: 0; z-index: 0; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:20:15.433

这可能是由于错误，或者（很可能）是由于**CSS 动画非常新且不完全可靠**的事实。您应该*始终了解您的网页在没有动画运行的情况下的外观*，因为浏览器支持尚不存在，并且可能在未来几年内不会支持。

更多浏览器支持 jQuery 动画（而且，IMO，更容易编程）。然而，即使是这些动画也有其挫折。

寻找新的东西很酷，但要确保你有一个坚实的“旧东西”的“基础”供浏览器使用。

# cuda - CUDA 计算能力 2.0。全局内存访问模式

> ID：13834651
> 
> 赞同：4
> 
> 时间：2012-12-12T07:13:41.317
> 
> 标签：cuda

从 CUDA Compute Capability 2.0 (Fermi) 开始，全局内存访问通过 768 KB L2 缓存进行。看起来，开发者不再关心全局内存库了。但是全局内存仍然很慢，所以正确的访问模式很重要。现在的重点是尽可能多地使用/重用 L2。我的问题是，如何？如果我需要一些详细的信息，L2 的工作原理以及我应该如何组织和访问全局内存（例如，每个线程 100-200 个元素数组），我将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T08:07:48.050

L2 缓存在某些方面有所帮助，但它并不能消除对全局内存的合并访问的需要。简而言之，合并访问意味着对于给定的读取（或写入）指令，warp 中的各个线程正在读取（或写入）全局内存中相邻的连续位置，最好是在 128 字节边界上作为一个组对齐. 这将导致最有效地利用可用内存带宽。

在实践中，这通常并不难实现。例如：

```
int idx=threadIdx.x + (blockDim.x * blockIdx.x);
int mylocal = global_array[idx]; 
```

`global_array`假设在全局内存中使用 cudaMalloc 以普通方式分配，将在warp 中的所有线程之间提供合并（读取）访问。这种类型的访问可以 100% 地使用可用内存带宽。

一个关键的结论是内存事务通常发生在 128 字节块中，这恰好是高速缓存行的大小。如果您甚至请求块中的一个字节，则将读取整个块（通常存储在 L2 中）。如果您稍后从该块中读取其他数据，通常会从 L2 对其进行服务，除非它已被其他内存活动逐出。这意味着以下序列：

```
int mylocal1 = global_array[0];
int mylocal2 = global_array[1];
int mylocal3 = global_array[31]; 
```

通常都由一个 128 字节的块提供服务。第一次读取`mylocal1`将触发 128 字节读取。第二次读取`mylocal2`通常是从缓存值（在 L2 或 L1 中）而不是通过触发从内存中的另一次读取来服务的。但是，如果可以适当地修改算法，最好从多个线程连续读取所有数据，如第一个示例所示。这可能只是巧妙地组织数据的问题，例如使用数组结构而不是结构数组。

在许多方面，这类似于 CPU 缓存行为。高速缓存行的概念以及为来自高速缓存的请求提供服务的行为也是类似的。

Fermi L1 和 L2 可以支持回写和直写。L1 在每个 SM 的基础上可用，并且可配置为与共享内存拆分为 16KB L1（和 48KB SM）或 48KB L1（和 16KB SM）。L2 跨设备统一，为 768KB。

Some advice I would offer is to not assume that the L2 cache just fixes sloppy memory accesses. The GPU caches are much smaller than equivalent caches on CPUs, so it's easier to get into trouble there. A general piece of advice is simply to code as if the caches were not there. Rather than CPU oriented strategies like cache-blocking, it's usually better to focus your coding effort on generating coalesced accesses and then possibly make use of shared memory in some specific cases. Then for the inevitable cases where we can't make perfect memory accesses in all situations, we let the caches provide their benefit.

You can get more in-depth guidance by looking at some of the available [NVIDIA webinars](https://developer.nvidia.com/gpu-computing-webinars). For example, the [Global Memory Usage & Strategy webinar](http://developer.download.nvidia.com/CUDA/training/globalmemoryusage_june2011.mp4) (and [slides](http://developer.download.nvidia.com/CUDA/training/cuda_webinars_GlobalMemory.pdf) ) or the [CUDA Shared Memory & Cache webinar](http://developer.download.nvidia.com/CUDA/training/sharedmemoryusage_july2011.mp4) would be instructive for this topic. You may also want to read the [Device Memory Access section](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#device-memory-accesses) of the [CUDA C Programming Guide](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html).

# c# - VSS 6.0 与 VS2012

> ID：13834660
> 
> 赞同：1
> 
> 时间：2012-12-12T07:14:22.423
> 
> 标签：c#, .net, version-control, visual-studio-2012, c++-cli

我工作的公司，**我无法控制其源代码控制软件**使用`vss 6.0` 最多`vs2010`vs 认可`vss6.0`，我需要做的就是注册`SSSCC.DLL`，插件出现在工具->源控制->插件选择中

这似乎不起作用`vs2012 express`，也许有人知道解决方法？

建议我迁移到其他源代码管理将无济于事，但如果有一个带有可以连接到它的 vs 插件的新源代码管理***客户端***`vss 6.0 sp6 server`会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:24:48.250

`VS2012 Express`不支持`VSS`：[http ://social.msdn.microsoft.com/Forums/en-US/vssourcecontrol/thread/76ed94be-b81d-4ad1-968f-dcdfd6c108df](http://social.msdn.microsoft.com/Forums/en-US/vssourcecontrol/thread/76ed94be-b81d-4ad1-968f-dcdfd6c108df)

# asp.net-mvc - 我应该在哪一层放置 .edmx 并生成 POCO 类？

> ID：13834662
> 
> 赞同：4
> 
> 时间：2012-12-12T07:14:26.773
> 
> 标签：asp.net-mvc, entity-framework, architecture, domain-driven-design

这是关于使用 EF DB First 模型的分层设计。

到目前为止，我之前没有使用过实体框架，只使用了实体并放置在具有域/DTO 子文件夹的不同项目中。在 DataAccessLayer、业务层和 MVC 应用程序中也引用了相同的内容，并使用通常的 ADO.Net 查询编写了代码，并为我的实体准备了 POCO。没有问题。

现在我们正在**使用 Entity Framework DB First 模型开发应用程序**。我们选择了这个 DB First 模型，因为 DB 设计不在我们的控制范围内。它由 DBA 完成。

我想在这里重用旧的简单设计。但不确定我应该在哪里/哪一层完全适合 edmx 文件和生成的 POCO 类。我没有找到任何具有分层架构风格的样本使用 DBFirst 方法。

我提到了这个。[http://aspnetdesignpatterns.codeplex.com](http://aspnetdesignpatterns.codeplex.com)但他们使用 Nhybernate

这是旧设计的高级概述。![在此处输入图像描述](../Images/7a1b9aea90d6e2c2429bd9a1b5fcb42d.png)

欢迎您对设计/样品提出任何建议。

**编辑：**

***从下面的答案中，我认为实体框架会生成 POCO，我们可以将现有的实体/域层重命名为域层并将生成的 POCO 类放在那里。我们也可以简单地将 .edmx 保存在 DataAccessLayer 中，其中包含为 TDD 包装 EF 的 IRepository 类列表。这有意义吗？或任何有价值的点？***

**更新：**

> 目前，我删除了 DataAccessLayer，只保留了实体层，它有一个 model.edmx 文件和由 EF 生成的类，以及所有实现 IRepository 的 Repository 类。我也将其称为业务层、MVC。我做得对吗？我觉得我的设计很糟糕:(请建议/帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T01:38:43.200

因为不幸的是，首先创建数据库的决定严重阻碍了您，所以您需要根据[Eric Evans 的域驱动设计使用](https://rads.stackoverflow.com/amzn/click/com/0321125215)[反腐败层](http://c2.com/cgi/wiki?AnticorruptionLayer)。

这是一个很好的解决方案，当你得到一个你绝对必须编码的糟糕接口时该怎么做 - 制作一个围绕数据库的接口，它的行为方式符合你想要的方式。不要将任何 EF 类直接暴露给除反腐败层本身之外的任何东西。

这是一个阅读示例：

```
public class SomeReadService : ISomeReadService {
  public SomeViewModel Load(Guid id) {
    using (var dbContext = new DbContext()) {
      // Query the DB model, then *map* the EF classes to SomeVieWModel.
      // This way you are not exposing the shitty DB model to the outside world.
    }
  }
} 
```

这是一个写作示例：

```
public class SomeRepository : ISomeRepository {
  public SomeDomainObject Load(Guid id) {
    using (var dbContext = new DbContext()) {
      // Map the EF classes to your domain object.  Same idea as before.
    }
  }
} 
```

我仍然会尝试向客户证明，拥有一个单独的团队设计数据库将是一场灾难（我的经验强烈表明它会）。看看是否有某种方式可以提供反馈，向客户证明如果你设计了数据库会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T12:10:23.977

请参阅以下类似问题的 SO 链接：

[使用数据库优先的方法，我如何分离核心层和基础设施层？](https://stackoverflow.com/questions/17666999/with-a-database-first-approach-how-do-i-separate-my-core-and-infrastructure-lay)

希望这可以帮助 ！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T20:56:22.343

**编辑：**

简短的答案是**数据访问层 (DAL)**

您需要**企业架构**，它会根据您的需求而变化，但在您的情况下，**模型驱动设计模式**是可靠的解决方案。您可以使用**MVC ，并且可以从****Poco**或其他实体（如**NHibernet**等）驱动您的模型。

**code-first**或**db-first**没有任何重要性，只是在架构创建阶段很有趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T08:59:53.133

在我看来，正确使用实体框架不需要单独的 DAL。我认为 EF 是我的 DAL。它使您可以更专注于业务部分。EF 为您完成所有数据访问代码。您可以简单地在业务层中使用您的 EF 上下文。对我来说，这是 EF 的最大好处之一；这是你的 DAL。

根据您分离图层的方式（不同的程序集或程序集中的不同文件夹）取决于您放置 POCO 类的位置。如果不同的程序集（这对于大多数项目来说是多余的），那么所有其他人引用的“通用”程序集就是放置 POCO 类的地方。如果文件夹不同，则名为“Models”或“DomainModels”的文件夹就是该位置。

特别是对于 MVC 应用程序，我会将我的 POCO 类放在“Models”文件夹中（我也有一个“ViewModels”文件夹），并将我的 .Edmx 放在我有时称为“Logic”的 BLL 文件夹中。

如果您需要一个松散耦合的架构来进行测试，那么一个名为 Repositories 的文件夹以及包含在您自己的存储库模式中的 EF 上下文是您的最佳选择。

# android - ui布局设计卡在这里

> ID：13834666
> 
> 赞同：0
> 
> 时间：2012-12-12T07:14:47.027
> 
> 标签：android, textview, ui-design

我有两个带有两种颜色的文本视图

1.  “qwer tyu iopasd fgh jkl zxcv bnm”和
2.  “123456789”

我想设计一个文本视图，例如在“qwer tyu iopasd fgh jkl zxcv bnm”旁边显示没有任何空格“123456789”如果第一个文本视图进入大约 2 到 3 行那么该怎么办？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="qwer tyu iopasd fgh jkl zxcv bnm"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="123456789"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:27:08.703

我对这两个文本都给予了重视：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:weightSum="1">
    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="qwer tyu iopasd fgh jkl zxcv bnm"
        android:textAppearance="?android:attr/textAppearanceLarge" 
        android:layout_weight="0.50"/>
    <TextView
        android:id="@+id/textView2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="123456789"
        android:textAppearance="?android:attr/textAppearanceLarge" 
        android:layout_weight="0.50"
        android:paddingLeft="15dp"/>
</LinearLayout>* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:20:30.417

如果您希望文本视图应在同一行中一个接一个地显示，请使用中的属性`LinearLayout` `android:orientation="horizontal"`

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" > 
```

如果要在其他下方添加文本视图，则应使用该属性`android:orientation="vertical"`

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" > 
```

没有边距和填充

**这里更新的答案** 是另一种解决方案

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:shrinkColumns="*" >

<TableRow
    android:id="@+id/give_id"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="qwer tyu iopasd fgh jkl zxcv bnm"
    android:maxLines="3" />
<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="123456789"
    />
</TableRow>
</TableLayout> 
```

# java - 在 GRCC TCG 上创建模型

> ID：13834669
> 
> 赞同：0
> 
> 时间：2012-12-12T07:15:07.223
> 
> 标签：java, tomcat, oracle-apps, oracleapplications

我正在使用 oracle GRCC Tcg 应用程序版本 8.6.4。我已经在这个 Tcg 应用程序上成功创建了业务对象。之后，我使用该业务对象创建了一个模型。当我试图保存模型时，会抛出以下异常..任何人都可以请我清除以下异常。

924 WARN [Thread-51] DataSourceDaoSpr:221 Locale Key 在 UserPreferences 中为 null 将设置为默认值 2012-12-12 11:50:08,956 DEBUG [Thread-51] DataSourceDaoSpr:250 从缓存中加载 2。2012-12-12 11:50:09,226 调试 [线程 51] QuadStoreManager:189***** ** *** ** *** ******开始 buildMetaGraph：864300_864400 ***** ** *** ** *** **** **2012-12-12 11:50:09,308 调试 [线程 51] QuadStoreManager:224******* *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** **** **2012-12-12 11:50:09,309 调试 [线程 51] QuadStoreManager:225*****METAGRAPH buildMetaGraph 三重计数：1333 2012-12-12 11:50:09,311 DEBUG [Thread-51] QuadStoreManager:242 *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** **** **2012-12-12 11:50:09,312 调试 [Thread-51] QuadStoreManager:243 ** * buildMetaGraph 节点数：665 2012-12-12 11:50:09,838 错误 [Thread-51] QuadStoreManager:247 检测到周期：*******

 ******2012-12-12 11:50:09,839 错误 [Thread-51] TcgEtlJob:942 在 oracle.apps.grc.domain.ontology.QuadStoreManager.buildMetaGraph(QuadStoreManager. java:251) 在 oracle.apps.grc.appservices.TcgEtlJob.updateParams(SourceFile:928) 在 oracle.apps.grc.appservices.TcgEtlJob.runJob 的 oracle.apps.grc.appservices.EtlObjectAppenderService.getNodeOntologyVersionPairsToEtl(SourceFile:577) (SourceFile:271) 在 oracle.apps.grc.scheduler.job.AbstractJob.run(SourceFile:410) 在 oracle.apps.grc.common.executor.GrcExecutor$GrcRunnable.run(GrcExecutor.java:177) 在 java。 lang.Thread.run(Thread.java:662) 2012-12-12 11:50:09,840 错误 [Thread-51] AbstractJob:446 具体作业实现中发生错误 java.lang.RuntimeException:oracle.apps.grc.domain.exception.MetaGraphCycleException at oracle.apps.grc.appservices.TcgEtlJob.updateParams(SourceFile:943) 在 oracle.apps.grc.appservices.TcgEtlJob.runJob(SourceFile:271) 在 oracle.apps。 grc.scheduler.job.AbstractJob.run(SourceFile:410) 在 oracle.apps.grc.common.executor.GrcExecutor$GrcRunnable.run(GrcExecutor.java:177) 在 java.lang.Thread.run(Thread.java: 662）由以下原因引起：oracle.apps.grc.domain.ontology.QuadStoreManager.buildMetaGraph（QuadStoreManager.java:251）的 oracle.apps.grc.domain.exception.MetaGraphCycleException 在 oracle.apps.grc.appservices.EtlObjectAppenderService.getNodeOntologyVersionPairsToEtl（ SourceFile:577) 在 oracle.apps.grc.appservices.TcgEtlJob.updateParams(SourceFile:928) ... 4 更多 2012-12-12 11:50:09，840 调试 [Thread-51] JobStatusService:363 调用 JobDao.updateJobStatus

2012-12-12 11:50:09,960 调试 [pool-9-thread-4] PeriodicCheckMonitorStrategy:83 290 错误 2012-12-12 11:50:09,960 调试 [pool-8-thread-1] JobStatusMonitor:186 oracle。 apps.grc.appservices.TcgEtlJob@455511cb 290 错误

2012-12-12 11:52:20,323 错误 [http-8080-3] PreAnalysisJobValidationService:290 分析前数据验证失败并出现以下错误：2012-12-12 11:52:20,324 错误 [http-8080-3] PreAnalysisJobValidationService ：296 错误代码：CAN_NOT_RUN_ANALYSIS_DUE_TO_ETL_FAILURE DEV 2012-12-12 11:52:20,324 调试 [http-8080-3] ReasonerServiceImpl:1959 PreAnalysisJobValidationService.canRunAnalysis 返回错误代码

为什么会发生这个异常？任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:07:22.073

嗨我的问题已经解决了。我刚刚重新启动了我的tomcat，无法发生元图循环异常。但是这次日志文件只显示以下内容。2012-12-13 11:31:56,759 错误 [http-8080-3] PreAnalysisJobValidationService:290 分析前数据验证失败并出现以下错误：2012-12-13 11:31:56,759 错误 [http-8080-3] PreAnalysisJobValidationService ：296 错误代码：CAN_NOT_RUN_ANALYSIS_DUE_TO_ETL_FAILURE DEV 2012-12-13 11:31:56,759 调试 [http-8080-3] ReasonerServiceImpl:1959 PreAnalysisJobValidationService.canRunAnalysis 返回错误代码。******

# android - 在 Sherlock Acionbar 中搜索 Edittext

> ID：13834670
> 
> 赞同：1
> 
> 时间：2012-12-12T07:15:10.973
> 
> 标签：android, android-edittext, actionbarsherlock

我在 sherlock 操作栏中的搜索视图有问题，所以我决定改用编辑文本。但是当我想使用编辑文本时，我的应用程序崩溃（android 2.3）。我如何在 android 2.3 的 sherlock 活动中使用搜索 edittext 或 searchview？

这是我的 onCreateOptionsMenu 函数：

```
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater minflater = getSupportMenuInflater();
    minflater.inflate(R.menu.activity_main, menu);
    View v = (View) menu.findItem(R.id.search).getActionView();
    txtSearch = ( EditText ) v.findViewById(R.id.txt_search);
    txtSearch.setOnEditorActionListener(new OnEditorActionListener() {
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {

            return false;
        }
    });
    return true;
} 
```

这是我的edittext xml源：

```
<EditText 
    android:id="@+id/txt_search"
    android:inputType="text"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"   
    android:cursorVisible="true"
    android:hint="@string/hint"
    android:imeOptions="actionDone"
    android:textColor="@android:color/black"
    android:textCursorDrawable="@android:color/black"     
    /> 
```

和我的搜索菜单项：

```
<item
    android:id="@+id/search"
    android:title="Search"
    android:icon="@android:drawable/ic_menu_search" 
    android:showAsAction="always|collapseActionView"
    android:actionViewClass="@layout/search_layout"
    /> 
```

如果有人知道在 sherlock 活动中使用 searchview 或在 sherlock 操作栏中使用 edittext 进行搜索的方法，请注意我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:44:14.740

为我工作：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
getSupportMenuInflater().inflate(R.menu.your_menu, menu);

// "0" is the number of menu item search in my example 
menu.getItem(0).setActionView(R.layout.your_layout_search); //your layout with edittext
EditText editSearch = (EditText) menu.getItem(0).getActionView().findViewById(R.id.edit_search);

return super.onCreateOptionsMenu(menu);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:28:16.240

你应该使用

```
android:actionLayout="@layout/search_layout" 
```

更多信息在这里：http: [//developer.android.com/guide/topics/ui/actionbar.html#ActionView](http://developer.android.com/guide/topics/ui/actionbar.html#ActionView)

# c++ - VCL 中的布局 - 我在哪里可以找到它

> ID：13834677
> 
> 赞同：0
> 
> 时间：2012-12-12T07:15:52.580
> 
> 标签：c++, c++builder, firemonkey, vcl

Borland 的 VCL/FireMonkey 中的布局管理器（如 Qt 的网格布局等）在哪里？我试图寻找它们，但它们隐藏得很好，或者上帝禁止不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:46:02.097

也许你正在寻找这个？

[http://docwiki.embarcadero.com/Libraries/XE2/en/FMX.Layouts](http://docwiki.embarcadero.com/Libraries/XE2/en/FMX.Layouts)

# c# - 如何在 EF Code First 中更改主键的名称？

> ID：13834685
> 
> 赞同：13
> 
> 时间：2012-12-12T07:16:26.323
> 
> 标签：c#, entity-framework-5, entity-framework-migrations

我有一个场景，我想更改实体中的主键名称并能够运行 update-database -force。当我尝试时，请参阅下面的代码和错误。

**实体是：**

```
public class Team
{
    [Key]
    [HiddenInput(DisplayValue = false)]
    public virtual int Id { get; set; }

    [Display(Name = "Full Name:")]
    public virtual string Name { get; set; }
} 
```

**实体更改为：**

```
public class Team
{
    [Key]
    [HiddenInput(DisplayValue = false)]
    public virtual int TeamId { get; set; }

    [Display(Name = "Full Name:")]
    public virtual string Name { get; set; }
} 
```

当我运行时，`Update-database -Force`我收到以下错误。

`Multiple identity columns specified for table 'Teams'. Only one identity column per table is allowed.`

这是命名约定的问题，当我稍后引用它时，我需要将它作为 TeamId，只是 Id 与子实体类冲突。

关于我如何成功做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T07:47:59.407

取决于您使用的 EF 版本。即使使用迁移，您将看到的结果类似于：

“删除列 ID”和“添加列 TeamId”。

有了这个，你将失去所有的价值观和“子联系”......

我此时看到的唯一“安全”解决方案是迁移和“手动 SQL 操作”的混合。

简单的解决方案：

1-考虑到您已经有一个“基本”迁移创建带有 ID 的表，现在使用“更新”创建新迁移。现在不要运行它。

2- 打开该文件并在生成的行之前写一个新行并使用 SQL 命令，如下所示：

```
 SQL("ALTER TABLE table_name RENAME COLUMN old_name to new_name;"); 
```

这将在迁移删除列并创建一个新列之前更改名称，将会发生的情况是：您在删除之前更改名称，然后执行删除，但它会“失败”，但不会造成任何伤害。

但现在你问：我为什么要这样做？好吧，如果您正在使用迁移，即使您删除行以删除列并创建一个新行，下次您自动创建一个新的迁移文件时，这些新行也会在那里......这就是原因。

**更新答案#1**

当我谈论实体框架迁移时，我指的是：http: [//blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx) 当您在包管理器控制台中运行“Add-Migration AddBlogUrl”命令时，会创建一个新文件 (*.cs)。

此文件迁移文件与 SQL 命令的示例：

```
public partial class AddAbsencesTypesAndCategories : DbMigration
    {
        public override void Up()
        {
            CreateTable(
                "pvw_AbsenceType",
                c => new
                    {
                        Id = c.Int(nullable: false, identity: true),
                        Name = c.String(nullable: false),
                        CountAsVacation = c.Boolean(nullable: false),
                        IsIncremental = c.Boolean(nullable: false),
                    })
                .PrimaryKey(t => t.Id);

          .....

            AddColumn("pvw_Absence", "CategoryId", c => c.Int(nullable: false));
                        AddForeignKey("pvw_Absence", "StatusId", "pvw_AbsenceStatusType", "Id");
            AddForeignKey("pvw_Absence", "CategoryId", "pvw_AbsenceType", "Id");
            CreateIndex("pvw_Absence", "StatusId");
            CreateIndex("pvw_Absence", "CategoryId");
            DropColumn("pvw_Absence", "MainCategoryId");
            DropColumn("pvw_Absence", "SubCategoryId");
           ......
            Sql(@"
                                        SET IDENTITY_INSERT [dbo].[pvw_AbsenceStatusType] ON
                    INSERT pvw_AbsenceStatusType (Id, Name) VALUES (1, N'Entwurf')                       
                                        SET IDENTITY_INSERT [dbo].[pvw_AbsenceStatusType] OFF
            ");    
            .....
        }

        public override void Down()
        {
            ........
        } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T08:01:49.110

最简单的解决方案是不重命名数据库中的主键，而是将您的类映射到您的主键并给它您想要的任何名称。像这样：

```
public class Team
{
    [Key]
    [HiddenInput(DisplayValue = false)]
    [Column("Id")] //this attribute maps TeamId to the column Id in the database
    public virtual int TeamId { get; set; }

    [Display(Name = "Full Name:")]
    public virtual string Name { get; set; }
} 
```

就个人而言，我会将班级名称保留为 Id。命名约定 [TableName + Id] 是老派的，对于主键来说是多余的（对于外键来说很好）。对我来说，它只会给你的代码行增加噪音。`team.TeamId`不比`team.Id`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T08:48:47.607

在摆弄了 marvc1 和 emanyalpsid 的建议之后。我决定只删除数据库并重新创建它。这是通过简单地删除VS2012中服务器资源管理器下的数据库来完成的，并确保App_Data下的.mdf文件也被删除。.mdf 文件通常是隐藏的，要在解决方案资源管理器工具栏下单击“显示所有文件”即可看到它，您将看到它。完成这些步骤后，只需在包管理器控制台中运行以下代码：

```
update-database -Verbose 
```

-Verbose 只是让您验证您正在创建的内容。

**marvc1 的回答**

工作得很好，除了它不会更改数据库中的名称，如果您不太担心数据库名称，这是最安全的方法。我的意思是数据库中的名称，`In the entity Team, Id would still be Id and not TeamId`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-22T11:45:24.943

用户 Dryadwoods 建议在迁移中执行以下 sql：

```
SQL("ALTER TABLE table_name RENAME COLUMN old_name to new_name;"); 
```

但 ：

> 在 MS SQL Server 中无法使用 ALTER TABLE 语句重命名列。请改用 sp_rename。

所以，我将其更改为以下代码：

```
Sql("exec sp_rename 'dbo.Batches.BatchNo', 'Id', N'COLUMN';"); 
```

请注意，旧名称应该是全名，而新名称应该是简短的。否则将无法正常工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-20T00:11:57.920

我有一个基于@Marvin Rounce 解决方案的不错的解决方案。该解决方案非常轻松地应用了类和数据库的更改。

**1.**映射你的类，这一步只重命名数据库中的列。

```
public class Team

 {
        [Key]
        [HiddenInput(DisplayValue = false)]
        [Column("ID")] 
        public virtual int TeamId { get; set; }
    ....
    } 
```

**2.**在包管理器控制台中添加一个迁移。

```
PM> Add-Migration rename_TeamID 
```

**3.**更新数据库。

```
PM> update-database 
```

**4.**将类中的列重命名为这个名称，这一步也重命名你项目中的列。

*注意：*您不需要 key 属性，EF 知道 ID 关键字是主键。

```
public class Team
        {

       [HiddenInput(DisplayValue = false)]
       public virtual int ID { get; set; }

    ....
    } 
```

您不需要添加迁移，因为最后一次更改不会影响数据库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-26T16:32:38.570

您可以通过 3 个步骤完成此操作

1.  添加一个具有新名称的字段（在本例中为 TeamId）并运行程序。将添加新字段

2.  将 [key] 数据注释从旧字段移动到新字段并再次运行。新字段（TeamId）将是主键。

3.  删除旧文件

这对我有用

# java - Java 堆硬盘

> ID：13834686
> 
> 赞同：5
> 
> 时间：2012-12-12T07:16:32.627
> 
> 标签：java, memory, heap-memory

很长一段时间以来，我一直在研究一个生成分形轨道的 Java 程序。就像照片一样，图像越大，按比例缩小时效果就越好。该程序使用 2D 对象 (Point) 数组，在计算点的值时写入该数组。也就是说Point存储在它的对应值中，即：

```
Point p = new Point(25,30);
histogram[25][30] = p; 
```

当然，为了简单起见，对此进行了编辑。我可以将点值写入 CSV，然后将它们应用于栅格，但使用类似方法会产生不良结果。我尝试了很长一段时间，因为我喜欢能够通过没有这个数组释放的空间制作更大的图像。它只是行不通。为清楚起见，我想补充一点，Point 对象还存储颜色数据。

下一个问题是 WriteableRaster，它将具有与数组相同的维度。两者结合起来占用了大量的内存。我已经接受了这一点，在尝试多次改变它的方式后，每次都得到较低质量的结果。

在尝试优化内存和时间之后，我得出的结论是我真的受到 RAM 的限制。这就是我想要改变的。我知道 -Xmx 开关（设置为 10GB）。有没有办法使用 Windows 的虚拟内存来存储光栅和/或数组？我很清楚这将导致对性能的重大影响，但是代替降低质量，似乎确实没有太多选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:47:23.863

操作系统已经为你和每个进程将硬盘空间变成了 RAM——不需要任何魔法。这将比您想象的更加严重。它会很慢，以至于无法有效地工作。

您在寻找内存映射文件吗？ [http://docs.oracle.com/javase/6/docs/api/java/nio/MappedByteBuffer.html](http://docs.oracle.com/javase/6/docs/api/java/nio/MappedByteBuffer.html)

如果这真的要在内存中完成，我敢打赌，您可以通过一些优化来显着降低内存使用量。例如，您的`Point`对象主要是开销而不是数据。计算引用所需的字节数，然后计算`Object`开销，与两个相比`ints`。

`int`对于 x 和 y 坐标，您可以使用两个大的平行数组将开销减少到零。当然，您必须将其封装起来才能在您的代码中访问。但它可以将这个数据结构的内存使用量减半。减少数百万个对象也加快了 GC 运行速度。

与其将 a`WritableRaster`放入内存，不如考虑自己直接以某种简单的图像格式写出图像文件。BMP 可以非常简单。然后也许使用外部工具来有效地转换它。

尝试`-XX:+UseCompressedOops`减少对象开销。还可以尝试`-XX:NewRatio=20`或更高，以使 JVM 将几乎所有的堆都保留给长生命周期的对象。这实际上可以让你使用更多的堆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:38:29.023

不建议配置您的 JVM 内存参数 (Xmx) 以使操作系统从其交换内存中分配。显然，垃圾收集机制需要对堆内存进行随机访问，如果没有，程序将长时间颠簸并可能锁定。请检查我的问题已经给出的答案（最后一段）：

[-Xmx 的大价值会推迟垃圾收集吗](https://stackoverflow.com/questions/13697433/does-large-value-for-xmx-postpone-garbage-collection)

# python - Python Pandas 安装错误

> ID：13834690
> 
> 赞同：0
> 
> 时间：2012-12-12T07:16:56.707
> 
> 标签：python, installation, pandas

> **可能重复：**
> [pip install 失败并显示/usr/bin/clang：没有这样的文件或目录](https://stackoverflow.com/questions/11791806/pip-install-fails-with-usr-bin-clang-no-such-file-or-directory)

尝试使用 easy_install 或 pip (OSX Mountain Lion) 安装 Pandas 时出现此错误

> 无法执行clang：没有这样的文件或目录

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:43:57.547

见[http://jaranto.blogspot.in/2012/08/os-x-unable-to-execute-clang-no-such.html](http://jaranto.blogspot.in/2012/08/os-x-unable-to-execute-clang-no-such.html)和[http://www.shellperson.net/easy_install-clang-error/](http://www.shellperson.net/easy_install-clang-error/)你要么没有 xcode，要么你没有安装命令行工具

# java - 基于 no 的线程配置。CPU 核心数

> ID：13834692
> 
> 赞同：31
> 
> 时间：2012-12-12T07:17:02.783
> 
> 标签：java, multithreading, threadpool, cpu, akka

场景：我有一个示例应用程序，我有 3 种不同的系统配置 -

```
- 2 core processor, 2 GB RAM, 60 GB HHD,
- 4 core processor, 4 GB RAM, 80 GB HHD,
- 8 core processor, 8 GB RAM, 120 GB HHD 
```

为了有效地利用我的应用程序的硬件功能，我希望配置 no。应用程序级别的线程数。但是，我希望只有在彻底了解系统功能后才能这样做。

是否有某种方法（系统/模式/工具）来参考最大和最小编号来确定系统能力。它可以提供最佳服务且不会降低效率和性能的线程数。通过这种方式，我可以只为我的应用程序配置那些将完全公正并为各自的硬件配置实现最佳性能的值。

**已编辑1：** 任何人都可以就如何为特定的硬件配置设置基线提供任何建议。

**Edited2：** 为了使其更直接 - 希望了解/了解我可以阅读的任何资源/文章，以便在一般/整体级别上对线程的 CPU 管理有所了解。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-12-19T18:37:23.820

要使用的最佳线程数取决于几个因素，但主要取决于可用处理器的数量以及任务的 CPU 密集程度。[Java Concurrency in Practice](http://www.javaconcurrencyinpractice.com/)提出了以下正式公式来估计最佳线程数：

```
N_threads = N_cpu * U_cpu * (1 + W / C) 
```

在哪里：

*   N_threads 是最优线程数
*   N_cpu 是处理器的数量，您可以从`Runtime.getRuntime().availableProcessors();`
*   U_cpu 是目标 CPU 利用率（如果要使用全部可用资源，则为 1）
*   W / C 是等待时间与计算时间的比率（0 表示 CPU-bound 任务，可能是 10 或 100 表示慢 I/O 任务）

因此，例如，在 CPU 密集型场景中，您将拥有与 CPU 一样多的线程（有些人提倡使用该数字 + 1，但我从未见过它产生了显着差异）。

对于慢速 I/O 进程，例如网络爬虫，如果下载页面比处理页面慢 10 倍，则 W/C 可能为 10，在这种情况下，使用 100 个线程会很有用。

但请注意，在实践中存在上限（使用 10,000 个线程通常不会加快速度，并且您可能会在使用正常内存设置启动它们之前得到 OutOfMemoryError）。

如果您对应用程序运行的环境一无所知，这可能是您可以获得的最佳估计。在生产中分析您的应用程序可能使您能够微调设置。

虽然不是严格相关，但您可能还对[Amdahl 定律](http://en.wikipedia.org/wiki/Amdahl%27s_law)感兴趣，该定律旨在衡量您可以从并行化程序中获得的最大加速。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-24T18:29:14.070

我的建议是提供配置和命令行开关来分配每台机器的线程数。在用户/管理员没有明确配置应用程序的情况下，使用基于 Runtime.getRuntime().availableProcessors() 的启发式方法，如此处的其他答案所示。我***强烈***建议不要使用基于启发式的独家线程到核心猜测，原因如下：

*   大多数现代硬件正朝着越来越模糊的“硬件线程”类型发展：英特尔的超线程和 AMD 的计算模块等 SMT 模型使公式变得复杂（详情如下），并且在运行时查询这些信息可能很困难。

*   大多数现代硬件都具有涡轮增压功能，可根据活动核心和环境温度调整速度。随着涡轮增压技术的改进，速度范围 (ghz) 也在扩大。一些最新的 Intel 和 AMD 芯片的范围从 2.6ghz（所有内核活动）到 3.6ghz（单/双核活动），结合 SMT 可以意味着每个线程在以前的设计中获得 1.6ghz - 2.0ghz 的有效吞吐量。目前无法在运行时查询此信息。

*   如果您不能有力地保证您的应用程序将是目标系统上运行的唯一进程，那么盲目消耗所有 cpu 资源可能不会取悦用户或服务器管理员（取决于软件是用户应用程序还是服务器应用程序） .

没有可靠的方法可以知道运行时机器的其余部分发生了什么，而不用您自己的家庭推出的多任务内核替换整个操作系统。您的软件可以通过查询进程和查看 CPU 负载等来尝试做出有根据的猜测，但这样做很复杂，并且有用性仅限于特定类型的应用程序（您的应用程序可能符合这些应用程序），并且通常受益于或需要提升或特权访问级别。

*   现代病毒扫描程序现在通过设置现代操作系统提供的特殊优先级标志来工作，例如。他们让操作系统在“系统空闲”时告诉他们。操作系统的决定不仅仅基于 CPU 负载：它还考虑用户输入和可能由电影播放器​​设置的多媒体标志等。这对于大多数空闲任务来说很好，但对 CPU 密集型任务没有用处，例如你的。

*   分布式家庭计算应用程序（BOINC、Folding@Home 等）通过定期查询正在运行的进程和系统 CPU 负载来工作——也许每秒或半秒一次。如果在不属于应用程序的进程上检测到连续多个查询的负载，则应用程序将暂停计算。一旦某些查询的负载变低，它就会恢复。需要多次查询，因为 CPU 负载读数因短暂的峰值而臭名昭著。仍然有一些注意事项： 1\. 仍然鼓励用户手动重新配置 BOINC 以适应他们机器的规格。2.如果BOINC在没有Admin权限的情况下运行，那么它就不会知道其他用户启动的进程（包括一些服务进程），所以它可能会与那些不公平的CPU资源竞争。

**关于 SMT（超线程，计算模块）：**

如今，大多数 SMT 将报告为硬件内核或线程，这通常不好，因为很少有应用程序在跨 SMT 系统上的每个内核扩展时表现最佳。更糟糕的是，查询一个核心是共享的 (SMT) 还是专用的通常无法产生预期的结果。在某些情况下，操作系统本身根本不知道（例如，Windows 7 不知道 AMD Bulldozer 的共享核心设计）。如果您可以获得可靠的 SMT 计数，那么经验法则是将每个 SMT 计为 CPU 密集型任务的半线程，以及大部分空闲任务的完整线程。但实际上，SMT 的权重取决于它执行的计算类型和目标架构。英特尔和 AMD 的 SMT 实现几乎完全相反，例如——英特尔' s 擅长并行运行加载整数和分支操作的任务。AMD 擅长并行运行 SIMD 和内存操作。

**关于涡轮特性：**

如今，大多数 CPU 都具有非常有效的内置 Turbo 支持，这进一步降低了跨系统所有内核扩展所获得的价值。更糟糕的是，turbo 功能有时会基于系统的实际温度和 CPU 负载一样多，因此冷却塔本身的冷却系统会像 CPU 规格一样影响速度。例如，在特定的 AMD A10（推土机）上，我观察到它在两个线程上以 3.7ghz 的速度运行。当第三个线程启动时，它下降到 3.5ghz，当第四个线程启动时，它下降到 3.4ghz。由于它也是集成GPU，所以当四个线程加上GPU工作时，它一直下降到大约3.0ghz（A10 CPU内部在高负载情况下优先考虑GPU）；但仍然可以在 2 个线程和 GPU 处于活动状态时召集 3.6ghz。由于我的应用程序同时使用了 CPU 和 GPU，这是一个重要的发现。我能够通过将进程限制为两个 CPU 绑定线程来提高整体性能（另外两个共享内核仍然有用，它们充当 GPU 服务线程——能够唤醒并快速响应以将新数据推送到 GPU，如所须）。

...但与此同时，我在 4x 线程上的应用程序在安装了更高质量冷却设备的系统上可能表现得更好。这一切都非常复杂。

结论：没有好的答案，而且由于 CPU SMT/Turbo 设计领域不断发展，我怀疑很快就会有好的答案。您今天制定的任何体面的启发式方法明天都可能不会产生理想的结果。所以我的建议是：不要在这上面浪费太多时间。根据核心数量粗略猜测一些足够适合您本地目的的东西，允许它被 config/switch 覆盖，然后继续。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-12-12T07:56:30.997

您可以像这样获取 JVM 可用的处理器数量：

```
Runtime.getRuntime().availableProcessors() 
```

然而，不幸的是，从可用处理器的数量计算最佳线程数并非易事。这在很大程度上取决于应用程序的特性，例如，受 CPU 限制的应用程序具有比处理器数量更多的线程几乎没有意义，而如果应用程序主要受 IO 限制，您可能希望使用更多线程。您还需要考虑系统上是否正在运行其他资源密集型进程。

我认为最好的策略是根据经验为每个硬件配置确定最佳线程数，然后在您的应用程序中使用这些数字。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-25T01:26:00.320

我同意此处推荐最佳猜测方法的其他答案，并提供覆盖默认值的配置。

此外，如果您的应用程序特别占用 CPU，您可能需要考虑将您的应用程序“固定”到特定的处理器上。

你没有说你的主要操作系统是什么，或者你是否支持多个操作系统，但大多数都有一些方法可以做到这一点。例如，Linux 有[任务集](http://linux.die.net/man/1/taskset)。

一种常见的方法是避免 CPU 0（操作系统始终使用），并将应用程序的 cpu 亲和性设置为同一套接字中的一组 CPU。

让应用程序的线程远离 cpu 0（如果可能，远离其他应用程序）通常可以通过减少任务切换量来提高性能。

将应用程序保持在一个套接字上可以通过减少应用程序线程在 cpu 之间切换时的缓存失效来进一步提高性能。

与其他一切一样，这高度依赖于您正在运行的机器的架构，以及正在运行的其他应用程序。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-21T13:00:40.773

使用[VisualVm](http://visualvm.java.net/)工具监控线程。首先在程序中创建最小线程并查看其性能。然后增加程序内的线程数并再次分析其性能。希望对您有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-25T06:39:43.443

我在这里使用这个 Python 脚本来确定内核（和内存等）的数量，以启动具有最佳参数和人体工程学的 Java 应用程序。[Github 上的 PlatformWise](https://github.com/umermansoor/PlatformWiseInPython/blob/master/platform_wise.py)

它的工作原理是这样的：编写一个 python 脚本，调用`getNumberOfCPUCores()`上述脚本中的 来获取内核数量，并`getSystemMemoryInMB()`获取 RAM。您可以通过命令行参数将该通知传递给您的程序。然后，您的程序可以根据内核数量使用适当数量的线程。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-26T09:17:27.990

在应用程序级别创建线程是好的，并且在多核处理器中，在内核上执行单独的线程以提高性能。因此，为了利用内核处理能力，实现线程是最佳实践。

**我的想法：**

1.  一次只有 1 个程序线程将在 1 个内核上执行。
2.  具有 2 个线程的相同应用程序将在 2 个内核上执行一半时间。
3.  具有 4 个线程的相同应用程序将在 4 个核心上执行得更快。

* * *

因此，您开发的应用程序应该具有**线程级别<= 内核数。**

线程执行时间由操作系统管理，是一种高度不可预测的活动。CPU 执行时间称为时间片或量子。如果我们创建越来越多的线程，操作系统会花费这个时间片中的一小部分来决定哪个线程先执行，从而减少每个线程获得的实际执行时间。换句话说，如果有大量线程排队，每个线程将做更少的工作。

阅读本文以了解如何实际利用 cpu 核心的精彩内容。 [csharp-codesamples.com/2009/03/threading-on-multi-core-cpus/](http://csharp-codesamples.com/2009/03/threading-on-multi-core-cpus/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-09-06T04:25:39.130

然而，不幸的是，从可用处理器的数量计算最佳线程数并非易事。这在很大程度上取决于应用程序的特性，例如，受 CPU 限制的应用程序具有比处理器数量更多的线程几乎没有意义，而如果应用程序主要受 IO 限制，您可能希望使用更多线程。您还需要考虑系统上是否正在运行其他资源密集型进程。

# c# - “将动态生成的行插入表中”

> ID：13834695
> 
> 赞同：0
> 
> 时间：2012-12-12T07:17:12.817
> 
> 标签：c#

我对 c# 编程有点陌生，所以我被困在一个地方。需要你的帮助。实际上，通过 javascript，我正在根据用户按钮单击生成表（4 列）行（具有文本框以便用户可以提供输入）。由于行数不固定，而且我们没有文本框的确切名称，所以现在我的问题是我们应该如何将这些行插入到 sqlserver 表中？

我应该简单地使用循环来为每个用户按钮单击生成文本框的名称吗？一旦我们获得了所有控件的名称，我们是否可以使用循环通过单个插入语句将它们全部插入？

温暖的毕业生，艾米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:36:32.070

我假设您正在使用 MVC .. 您可以从创建一个模型开始，例如：

```
public class YourModel
{
    public IEnumerable<Users> users { get; set; }
} 
```

比创建一个视图并通过下面给出的脚本动态添加行：

```
<script type="text/javascript">

var Rows = 1;
// We already got the 0 element as html so start from 1

function AddUser() {
    $("#UserTable").append('<tr>' +
        '<td><input type="text" name="users[' + Rows + '].Name" style="width:100px;" /></td>' +
        '<td><input type="text" name="users[' + Rows + '].Surname" style="width:100px;" /></td>' +
        '<td><input type="text" name="users[' + Rows + '].Age" style="width:50px;" /></td>' +
        '<td><input type="text" name="users[' + Rows + '].Date" style="width:70px;" /></td>' +
        '</tr>');
    // Add datepicker (this is an optional jQueryUI stuff)
    $('input[name="users[' + Rows + '].Date"]').datepicker({ dateFormat: 'yy.mm.dd' });
    // Go to next row
    Rows = Rows + 1;
}

$(document).ready(function(){
    // Create an empty row on load
    AddUser();
    // Than on each click add another row
    $('input[type=button]').click(function(){ AddUser(); });
});

</script>

<div>
    <table id="UserTable">
        <tr>
            <td><input type="text" name="user[0].Name" style="width:100px;" value="Berker" /></td>
            <td><input type="text" name="user[0].Surname" style="width:100px;" value="Yüceer" /></td>
            <td><input type="text" name="user[0].Age" style="width:50px;" value="24" /></td>
            <td><input type="text" name="user[0].Date" style="width:70px;" value="2012.12.11" /></td>
        </tr>
    </table>
    <input type="button" id="add" value="Add" />
</div> 
```

脚本的小提琴：http: [//jsfiddle.net/BerkerYuceer/YFecD/](http://jsfiddle.net/BerkerYuceer/YFecD/)

从您的控制器中，您可以获得如下所示的值：

```
// Thanks to LinqToSql you can define ur Sql-DB this way
YourDBDataContext db = new YourDBDataContext();

//
// POST: /YourForm/Edit
[HttpPost]
public ActionResult Edit(YourModel model)
{
    try
    {
        // if users not empty..
        if (model.users != null)
        {
            // Each User in Users
            foreach (var user in model.users)
            {   // Save it to your Sql-DB
                db.Users.InsertOnSubmit(user);
                db.SubmitChanges();
            }
        }
        // Return
        return RedirectToAction("Index");
    }
    catch (Exception ex)
    {
        return RedirectToAction("Error", new { ErrorMessage = "Message[" + ex.Message + "] - Source[" + ex.Source + "] - StackTrace[" + ex.StackTrace + "] - Data[" + ex.Data + "]" });
    }
}

//
// GET: /YourForm/Error
public ActionResult Error(String ErrorMessage)
{
    ViewData["Error"] = ErrorMessage;
    return View();
} 
```

就这么简单！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:37:44.537

如果您只使用常规 html 表格`add 'runat="server"' Tag with JS`以及 html 表单控件，那么只需使用`change TableRow to HtmlTableRow`和`TextBox to HtmlInputText`. 所有这些控件都在`System.Web.UI.HtmlControls namespace`.

假设您使用的是表服务器控件，那么它只是：

```
foreach (TableRow row in table.Rows)
    {
       var col2 = (TextBox)row.Cells[1].Controls[0];
       //Do DB inserting stuff here With col2
       string stringToInsert=  col2 .Text;
    } 
```

# razor - 为什么 Razor 视图不能在我的结构上正确调用 ToString()

> ID：13834697
> 
> 赞同：1
> 
> 时间：2012-12-12T07:17:24.437
> 
> 标签：razor

我有一个看起来像这样（简化）的 Money 类：

```
public class Money
{
    private readonly decimal _amount;

    public decimal Amount
    {
        get { return _amount; }
    }

    public Money(decimal amount)
    {
        _amount = amount;
    }

    public override string ToString()
    {
        return _amount.ToString("c2");
    }

    public static implicit operator Money(decimal value)
    {
        return new Money(value);
    }
} 
```

在我的 Razor 视图中，我想呈现这样的货币价值：

```
<p>This is my money value:
    @Model.MyNullableMoneyValue
</p> 
```

当我运行视图时，而不是使用 Money 结构的 ToString() 方法，它应该会产生类似“$10.00”的结果，它呈现为好像它正在调用十进制金额的 ToString()，即像“10.0000”。

添加 ToString() 自己解决了这个问题：

```
<p>This is my money value:
    @Model.MyNullableMoneyValue.ToString()
</p> 
```

为什么？这是怎么回事？

# sql-server - 在 sql 中更新表后，它们会在第二天回滚

> ID：13834701
> 
> 赞同：0
> 
> 时间：2012-12-12T07:17:34.640
> 
> 标签：sql-server, sql-server-2008

每次我在 SQL Server 中更新表行时，更新都会成功运行，我也确认并显示行已更新。但是，第二天当我检查时，我发现我所做的更新已经回滚。我还检查了是否有任何交易打开但没有。我不在事务中运行我的更新语句，因此我不必在之后提交任何事务。这种情况已经发生了一段时间，真的很烦人。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:54:18.373

您正在使用的服务器或数据访问机制（即 ADO.NET）可能未配置为自动提交事务。[这个 MSDN 网站](http://msdn.microsoft.com/en-us/library/ms187878%28v=sql.105%29.aspx)声明；

> 自动提交模式是 SQL Server 数据库引擎的默认事务管理模式。每个 Transact-SQL 语句在完成时都会提交或回滚。如果语句成功完成，则提交；如果遇到任何错误，则回滚。只要此默认模式未被显式或隐式事务覆盖，与数据库引擎实例的连接就会在自动提交模式下运行。自动提交模式也是 ADO、OLE DB、ODBC 和 DB-Library 的默认模式。

尝试明确地将您的 UPDATE 放入事务中并提交以查看是否保存。还请您的 DBA 查看 SQL Server 上是否有任何设置将默认事务管理模式更改为将 autocommit 设置为 false。

# javascript - How to apply a filter on multiple objects using AngularJS?

> ID：13834704
> 
> 赞同：7
> 
> 时间：2012-12-12T07:17:40.460
> 
> 标签：javascript, angularjs, javascript-framework

I have the user object defined as below.

```
$scope.users = [{id: 1, name: 'Adam', friends: [{name: 'John', age: 21, sex: 'M'}, {name: 'Brad', age: 32, sex: 'M'}]}] 
```

Then I have the following code:

```
<div ng-repeat="user in users>
 <input type="text" ng-model="searchText">
 <div ng-repeat="friend in user.friends | filter:searchText">
  {{user.name}} {{friend.name}} {{friend.age}}
 </div>
</div> 
```

Now when I type in the textbox the text: 'searchText', I want the filter to display the name of the user and the name/age of the friend. Can anyone help me with how to do this?

If I am correct, then I think that I need to create a custom filter for this or is there any other way I can accomplish this?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-12T17:18:33.473

Because you want to filter on two things at once -- some properties of the friends array and also the user -- you'll need to create your own [custom filter](http://docs.angularjs.org/guide/dev_guide.templates.filters.creating_filters) that accepts 2 additional parameters:

```
myApp.filter('myFilter', function() {
  return function(friends, searchText, username) {
    var searchRegx = new RegExp(searchText, "i");
    if ((searchText == undefined) || (username.search(searchRegx) != -1)) {
        return friends;
    }
    var result = [];
    for(i = 0; i < friends.length; i++) {
        if (friends[i].name.search(searchRegx) != -1 || 
            friends[i].age.toString().search(searchText) != -1) {
            result.push(friends[i]);
        }
    }
    return result;
  }
}); 
```

Then call it like so:

```
<div ng-repeat="user in users">
   <input type="text" ng-model="searchText">
   <div ng-repeat="friend in user.friends | myFilter:searchText:user.name">
      {{user.name}} {{friend.name}} {{friend.age}}
    </div>
</div> 
```

":searchText:user.name" is the way you pass additional arguments to a custom filter.

[Fiddle](http://jsfiddle.net/mrajcok/mwrLc/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:24:31.333

[http://docs.angularjs.org/api/ng.filter:filter](http://docs.angularjs.org/api/ng.filter:filter)

```
<div ng-repeat="user in users>
 <input type="text" ng-model="search.$">
 <div ng-repeat="friend in user.friends | filter:search">
  {{user.name}} {{friend.name}} {{friend.age}}
 </div>
</div> 
```

# android - 谁能告诉我，我们可以在 webview 中打开一个链接来播放视频

> ID：13834706
> 
> 赞同：0
> 
> 时间：2012-12-12T07:18:00.837
> 
> 标签：android, video-streaming, android-webview, live

我的问题是如何在 web 视图中播放视频。我可以在 000webhost 上设置实时法语以在 android.now 中流式传输。现在问题是我如何使用 webview 在 android 中播放...这是我的代码，它可以显示白屏我不知道为什么

```
 mWebView = (WebView) findViewById( R.id.webView1 ); //This is the id you gave
    mWebView.getSettings().setJavaScriptEnabled(true);  
    mWebView.getSettings().setSupportZoom(true);       //Zoom Control on web (You don't need this
                                           //if ROM supports Multi-Touch     
    mWebView.getSettings().setBuiltInZoomControls(true); //Enable Multitouch if supported by ROM

    // Load URL
    mWebView.loadUrl("http://gumsuminnocent.host56.com/frenchchannel.html"); 
```

不工作只是白屏。请帮助我，并提前感谢我糟糕的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:22:32.197

使用Webview，为html标签创建一个字符串，添加iframe标签并传递视频和url的高度和宽度。并在 webview 中加载字符串

```
webView.loadData(strHTMLTags, "text/html", "UTF-8"); 
```

# python - 在 django 中打印数组元素的问题？

> ID：13834708
> 
> 赞同：0
> 
> 时间：2012-12-12T07:18:15.903
> 
> 标签：python, django, arrays, templates

我有一个打印一些元素列表的数组。我想在一组“4”中打印这些元素。也就是说，如果我们的数组有 10 个元素。然后在我的模板中首先`<div>`显示前 4 个元素，然后`<div>`显示接下来的 4 个元素。等等。

我试图像我们在 PHP 中打印一样打印，但它在这里不起作用，所以请建议我一些方法来做到这一点。

c.list 中有 9 种产品，我想像上面提到的那样展示它们：

```
{% if c.list|length >= 1 or c.list|length < 5 %}
        {% for p in c.list %}

        <div class="dis_box1">

        <div class="item_imagebox_01"><a href="/shop/product/{{p.title}}"><img style ="width:145px;height:190px;"alt="" src="{{ MEDIA_URL }}{{p.image}}"></a>
        <div class="img_line1"></div>
        </div>

        <div class="left"><span class="heart_text1"><a href="/shop/product/jhgjgj/">{{p.title}}</a></span></div>

            </div> 

        {% endfor %}
{% endif %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:27:15.857

在你看来，这是你真正应该做的工作。

在您看来：

```
list_by_fours = []
list_len = len(c.list)
last_point = 0
next_point = 4

while last_point < list_len:
  if next_point > list_len:
    next_point = list_len
  list_by_fours.append(c.list[last_point:next_point])
  last_point += 4
  next_point += 4

#Make sure you add list_by_fours to the template context 
```

然后在您的模板中：

```
{% for bucket in list_by_fours %}
        {% for p in bucket %}
             ...
        {% endfor %}
{% endif %} 
```

我确信有一种方法可以使用 itertools 或其他一些花哨的技巧来做到这一点，但这对于初学者来说是干净且易于理解的。

# apache - 使用 mahout 对数据进行分类

> ID：13834711
> 
> 赞同：0
> 
> 时间：2012-12-12T07:18:29.027
> 
> 标签：apache, hadoop, machine-learning, mahout

我是 Apache Mahout 的新手，正在研究分类问题。

问题状态：文本文件中存在一组数据，我需要根据给定的时间跨度从文件中获取部分或全部数据。

时间跨度：每条记录都有一个交易日期。
因此，将使用逻辑 (Sys_Date - Transaction_Date) 计算时间跨度。

因此，输出将根据是否需要上个月/一周/特定天数的数据而有所不同。
如何使用 Apache Mahout 实现此过滤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:47:13.020

这本身听起来根本不像是机器学习问题。您希望将数据放入某种数据库中并查询日期范围内的记录。然后，您想对这些数据做一些事情。这不是 ML 工具所做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:39:27.517

我还没有正确使用hadoop。但在我看来，这个视频应该有帮助： [http ://www.youtube.com/watch?v=KwW7bQRykHI&feature=player_embedded](http://www.youtube.com/watch?v=KwW7bQRykHI&feature=player_embedded)

过滤后，可以在 mahout 中使用 result（用于解决分类问题）

# c# - 如何在 Asp.mvc asp xc 的饼图中显示工具提示#

> ID：13834713
> 
> 赞同：1
> 
> 时间：2012-12-12T07:18:34.870
> 
> 标签：c#, asp.net-mvc

我像这样在控制器中动态创建图表

```
var chart = new Chart();    
      var returnStream = new MemoryStream();
            chart.ImageType = ChartImageType.Png;
            chart.SaveImage(returnStream);
            returnStream.Position = 0;
            return new FileStreamResult(returnStream, "image/png");  
//finally iam returning image to view and binding to image 
```

### 有什么方法可以返回而不是图像

### 因为我需要图表上的工具提示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:50:21.750

您将必须结合两种操作（一种用于图像，一种用于地图），并为地图使用 ImageMap RenderType ：

请参阅“图表图像渲染” [http://msdn.microsoft.com/en-us/library/dd456682.aspx](http://msdn.microsoft.com/en-us/library/dd456682.aspx)

和“交互性” [http://msdn.microsoft.com/en-us/library/dd456772.aspx](http://msdn.microsoft.com/en-us/library/dd456772.aspx)

# ruby-on-rails - Zoho 的 Rails ActionMailer 配置

> ID：13834716
> 
> 赞同：14
> 
> 时间：2012-12-12T07:18:51.590
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer, zoho

任何人都幸运地将 ActionMailer 配置为通过 Zoho 帐户发送电子邮件？

这些是我的设置：

```
ActionMailer::Base.smtp_settings = {
    :address              => "smtp.zoho.com",
    :port                 => 465,
    :domain               => 'example.com',
    :user_name            => 'steve@example.com',
    :password             => 'n0tmypa$$w0rd',
    :authentication       => :login
} 
```

但是，调用 .deliver 超时：

```
irb(main):001:0> AdminMailer.signup_notification('asfd').deliver
Timeout::Error: Timeout::Error
        from C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:146:in `rescue in rbuf_fill'
        from C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:140:in `rbuf_fill'
        from C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:122:in `readuntil'
        from C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:132:in `readline'
        from C:/Ruby193/lib/ruby/1.9.1/net/smtp.rb:929:in `recv_response'
        from C:/Ruby193/lib/ruby/1.9.1/net/smtp.rb:552:in `block in do_start'
        from C:/Ruby193/lib/ruby/1.9.1/net/smtp.rb:939:in `critical'
        from C:/Ruby193/lib/ruby/1.9.1/net/smtp.rb:552:in `do_start'
        from C:/Ruby193/lib/ruby/1.9.1/net/smtp.rb:519:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:144:in `deliver!' 
```

[帮助文档](https://zohomail.wiki.zoho.com/Configure-in-Outlook.html)说使用端口 465 和 SSL 身份验证。我试过有无，`:enable_starttls_auto => true`但它仍然超时。

具体来说，[文档](https://zohomail.wiki.zoho.com/Configure-in-Outlook.html)指定了以下设置：

```
>     Email Address: Username@yourdomain.com
>     User Name format: Username@yourdomain.com
>     Secure Connection (SSL)   Yes
>     Outgoing Mail Server Name: smtp.zoho.com
>     Outgoing Port No.: 465
>     Outgoing Mail Server requires authentication: Yes 
```

有任何想法吗？

ps 我已将 Outlook 配置为使用[帮助文档](https://zohomail.wiki.zoho.com/Configure-in-Outlook.html)中的设置，并且外发电子邮件工作正常。telnet 到 smtp.zoho.com 465 也可以连接。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-30T23:55:17.687

```
# Action Mailer
ActionMailer::Base.delivery_method = :smtp  
ActionMailer::Base.smtp_settings = {            
  :address              => "smtp.zoho.com", 
  :port                 => 465,                 
  :user_name            => 'someone@somewhere.com',
  :password             => 'password',         
  :authentication       => :login,
  :ssl                  => true,
  :tls                  => true,
  :enable_starttls_auto => true    
} 
```

这对我有用。您的设置可能很好，某些本地网络会阻止这些类型的数据包。我必须通过我的 3G 网络对其进行测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-13T09:37:45.700

供参考：

假设您的域是 abc.com。
假设您的邮件具有不同域的“默认发件人”，例如

```
 default from: "\"Elephant\" <el@ephant.com>" 
```

除非您使用 zoho 帐户上的相同域更改“默认来源”，否则这**将不起作用。**
所以，

```
 default from: "\"Elephant\" <el@abc.com>" 
```

将工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-22T07:26:41.933

我不确定 Zoho 是否更改了他们的安全设置，但[@Tyrel Richey](https://stackoverflow.com/users/2027395/tyrel-richey)接受的答案对我不起作用。但是，以下内容会：

`/config/initializers/action_mailer.rb`..

```
# ActionMailer 邮件配置
ActionMailer::Base.delivery_method = :smtp
ActionMailer::Base.smtp_settings = {
  :address => ENV['SMTP_ADDRESS'],
  :port => ENV['SMTP_PORT'],
  :domain => ENV['SMTP_DOMAIN'],
  :user_name => ENV['SMTP_USERNAME'],
  :password => ENV['SMTP_PASSWORD'],
  :authentication => :login,
  :enable_starttls_auto => 真
}

```

其中..
`:address`= `smtp.zoho.com`
`:port`=`587`
`:domain`正在`localhost`开发中，而实时 URL 正在生产中（例如`example.com`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-12T14:28:49.167

我像这样使用 Rails 4.2.3 发送邮件......

```
# config/environments/development.rb
Rails.application.configure do
#...
  config.action_mailer.default_url_options = { host: 'domain' }
  config.action_mailer.smtp_settings = { address: 'smtp.zoho.com', port: 465, user_name: 'username@domain.com', password: 'mypassword', authentication: :login, ssl: true }
end 
```

您当然也可以在生产中使用它，方法是将它添加到`config/environments/production.rb`

我还设置了电子邮件地址，`config/initializers/devise.rb`以便我可以发送密码重置指令。

```
config.mailer_sender = 'noreply@truhawk.com' 
```

* * *

**参考**

*   [https://www.zoho.com/mail/help/zoho-smtp.html](https://www.zoho.com/mail/help/zoho-smtp.html)
*   [http://guides.rubyonrails.org/action_mailer_basics.html](http://guides.rubyonrails.org/action_mailer_basics.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-05T23:33:44.350

这些设置在生产中对我有用。

```
Rails.application.routes.default_url_options[:host] = 'eyehawk.io'
  config.action_mailer.default_url_options = { :host => 'eyehawk.io' }
  config.action_mailer.perform_caching = false

  config.action_mailer.delivery_method = :smtp
  config.action_mailer.perform_deliveries = true
  config.action_mailer.raise_delivery_errors = true
  config.action_mailer.default :charset => "utf-8"

  config.action_mailer.smtp_settings = {
      :address              => "smtp.zoho.com",
      :port                 => 587,
      :domain               => "zoho.com",
      :user_name            => "admin@eyehawk.io",
      :password             => ENV['SMTP_PASSWORD'],
      :authentication       => :plain,
      :enable_starttls_auto => true
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-16T00:32:29.887

使用`smtp.zoho.eu`而不是`smtp.zoho.com`作为地址对我有用。

# jquery - 将点击事件添加到谷歌地图中的标记

> ID：13834717
> 
> 赞同：0
> 
> 时间：2012-12-12T07:18:56.563
> 
> 标签：jquery, google-maps, google-maps-api-3

我已经在我的网站中集成了谷歌地图，并在上面设置了标记

当我单击标记时，我想获得与我设置的特定使用相同的纬度和经度。

对于测试，我设置了两个标记。

当我每次在控制台中显示最后设置的标记的纬度和经度时单击标记。

我该如何解决这个问题？

```
for(var gMarker = 0; gMarker < records.length ; gMarker++){
          var gMarkerThis = records[gMarker].LatLng;
          var marker = new google.maps.Marker({
            position: new google.maps.LatLng(gMarkerThis[0], gMarkerThis[1]),
            map:      map,
            title:    'Test'
          });  

          google.maps.event.addListener(gMarkerArray, 'click', function() {
             console.log(marker.position , marker.position.lat() , marker.position.lng());
          });
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:21:12.470

关闭怎么样？

```
 for(var gMarker = 0; gMarker < records.length ; gMarker++){
      var gMarkerThis = records[gMarker].LatLng;
      var marker = new google.maps.Marker({
          position: new google.maps.LatLng(gMarkerThis[0], gMarkerThis[1]),
          map:      map,
          title:    'Test'
      });  

      (function(Marker) {
          google.maps.event.addListener(gMarkerArray, 'click', function() {
              console.log(Marker.position , Marker.position.lat() , Marker.position.lng());
          });
       }(marker));
 } 
```

我不知道是什么`gMarkerArray`，但我会假设它是循环中的当前标记，因为它应该是什么？

# c# - 到图像的字符串 [] 失败

> ID：13834722
> 
> 赞同：0
> 
> 时间：2012-12-12T07:19:24.147
> 
> 标签：c#, winforms, image, stream

我有一个字符串数组，我需要从中以 Windows 形式绘制图像。

我已经完成了以下两个步骤：

1.  将字符串数组转换为内存流。
2.  并使用以下代码：

    ```
    Image image = Image.FromStream(memory stream); 
    ```

但它总是返回 null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:50:12.463

您可以从字节数组中获取图像：

```
public Image byteArrayToImage(byte[] byteArrayIn)
{
     MemoryStream ms = new MemoryStream(byteArrayIn);
     Image returnImage = Image.FromStream(ms);
     return returnImage;
} 
```

注意格式。例如，Silverlight 和 WPF 仅支持 JPEG 或 PNG。否则会得到异常。

# php - 是否可以将隐藏的参数传递给html页面？

> ID：13834723
> 
> 赞同：-6
> 
> 时间：2012-12-12T07:19:37.450
> 
> 标签：php, javascript, jquery, html

我想将用户名和密码传递给 html 页面或 url。例如。考虑 www.gmail.com 我想通过 javascript、jquery 或任何脚本传递用户名和密码，以便其他人看不到它，并且它必须自动登录而不显示传递的任何参数。另一个疑问是，如果我在脚本中保留用户名和密码，用户可以使用查看源代码或调试工具进行查看。有没有其他方法可以通过但没有人可以查看它。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T07:22:36.680

不它不是。浏览器通过 HTTP 与服务器通信并接收 HTML 和 Javascript 代码，用于 Do Stuff。™ 没有第三个后门，任何人都可以看到它。它需要。这是一个开放的标准。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T07:41:16.670

您可以对它进行哈希处理，也许可以针对一些会过期的时间值。无论您发送什么都可以看到，如果您愿意，您可以构建自己的浏览器。您可以欺骗用户代理标头...基本上，您只是在一个地址发送信息，而他们正在发回一些信息。我不清楚你想从哪里发送到哪里，以及你想向谁隐藏信息。

# jquery-ui-tabs - JQuery UI 选项卡：嵌套选项卡、AJAX 加载和后退按钮

> ID：13834725
> 
> 赞同：0
> 
> 时间：2012-12-12T07:19:43.080
> 
> 标签：jquery-ui-tabs, back-button

我正在使用 AJAX 加载 JQuery UI 选项卡。

我有 3 个级别的嵌套 UI 选项卡：

1.  垂直的
2.  水平的
3.  水平的

大多数东西只有 2 级深，但有些是 3 级。问题是第 3 级。我跟着这个：

[http://benalman.com/code/projects/jquery-bbq/examples/fragment-jquery-ui-tabs/](http://benalman.com/code/projects/jquery-bbq/examples/fragment-jquery-ui-tabs/)

但它不包括选项卡的嵌套。

页面的布局是这样的：

```
<script type="text/javascript">
    var tabs;
    var tab_a_selector;
    var tab_a_vertical_selector;

    $(function() {              

        $("#menuTabs").tabs({
            ajaxOptions: {
                cache: false
            }
        }).addClass("ui-tabs-vertical ui-helper-clearfix"); 
        $("#menuTabs li").removeClass('ui-corner-top').addClass('ui-corner-left');
        $(".ui-tabs-vertical .ui-tabs-nav").removeClass("ui-tabs-nav").addClass("ui-tabs-nav-vert")

        $("#menuItem0").tabs();
        $("#menuItem1").tabs(); 
        //...

        /* -- enables Back button for nested tabs -- */

        // The "tab widgets" to handle.
        tabs = $('.tabs');

        // This selector will be reused when selecting actual tab widget A elements.
        tab_a_selector = 'ul.ui-tabs-nav a';
        tab_a_vertical_selector = 'ul.ui-tabs-nav-vert a';
        // Enable tabs on all tab widgets. The `event` property must be overridden so
        // that the tabs aren't changed on click, and any custom event name can be
        // specified. Note that if you define a callback for the 'select' event, it
        // will be executed for the selected tab whenever the hash changes.
        tabs.tabs({ event: 'change' });

        // Define our own click handler for the tabs, overriding the default.
        tabs.find(tab_a_selector).click(function(){
            var state = {};

            // Get the id of this tab widget.
            id = $(this).closest( '.tabs' ).attr( 'id' );

            // Get the index of this tab.
            idx = $(this).parent().prevAll().length;

            // Set the new state
            // This is done as below to remove any state from deeper levels of nested tabs.
            state ['menuTabs'] = $.bbq.getState('menuTabs');
            state[ id ] = idx;                  
            $.bbq.pushState( state, 2 );
        });
        tabs.find(tab_a_vertical_selector).click(function(){                
            var state = {};

            // Get the id of this tab widget.
            id = $(this).closest( '.tabs' ).attr( 'id' );

            // Get the index of this tab.
            idx = $(this).parent().prevAll().length;

            // Set the state!
            state[ id ] = idx;  

            // 2 -> replaces old state with new state. meaning indexes of nested tabs are removed
            $.bbq.pushState( state, 2 ); 
        });

        // Bind an event to window.onhashchange that, when the history state changes,
        // iterates over all tab widgets, changing the current tab as necessary.
        $(window).bind( 'hashchange', function(e) {             

            // Iterate over all tab widgets.
            tabs.each(function(){

                // Get the index for this tab widget from the hash, based on the
                // appropriate id property. In jQuery 1.4, you should use e.getState()
                // instead of $.bbq.getState(). The second, 'true' argument coerces the
                // string value to a number.
                var idx = $.bbq.getState( this.id, true ) || 0;

                // Select the appropriate tab for this tab widget by triggering the custom
                // event specified in the .tabs() init above (you could keep track of what
                // tab each widget is on using .data, and only select a tab if it has
                // changed).
                $(this).find( tab_a_selector).eq( idx ).triggerHandler( 'change' );
                $(this).find( tab_a_vertical_selector ).eq( idx ).triggerHandler( 'change' );
            });                 
        })

        // Since the event is only triggered when the hash changes, we need to trigger
        // the event now, to handle the hash the page may have loaded with.
        $(window).trigger( 'hashchange' );

        /* -- END enables Back button for nested tabs -- */
    });
</script>

<div id="menuTabs" class="tabs">
    <ul>
        <li><a href="#menuItem0">menuItem0</a></li>
        <li><a href="#menuItem1">menuItem1</a></li>
        <li><a href="#menuItem2">menuItem2</a></li>
    </ul>

    <div id="menuItem0" class="tabs">
        <ul>
            <li><a href="content/menuItem0/Intro.html">Intro</a></li>
        </ul>                       
    </div>
    <div id="menuItem1" class="tabs">
        <ul>
            <li><a href="content/menuItem1/Intro.html">Introduction</a></li>
            <li><a href="content/menuItem1/Guide.html">Guide</a></li>
            <li><a href="content/menuItem1/abc.html">abc</a></li>                       
        </ul>                       
    </div>
    <!--...-->
</div> 
```

第 3 级选项卡位于上述 html 页面中，例如 abc.html：

```
<script type="text/javascript"> 

    var rNumberTabs = $("#rNumber").tabs(); 
    rNumberTabs.tabs({ event: 'change' });
    rNumberTabs.find(tab_a_selector).click(function(){
        var state = {};

        // Get the id of this tab widget.
        id = $(this).closest( '.tabs' ).attr( 'id' );

        // Get the index of this tab.
        idx = $(this).parent().prevAll().length;

        // Set the state!
        state[ id ] = idx;                  
        $.bbq.pushState( state );
    });
    tabs = tabs.add(grNumberTabs);
    // If this is triggered it leads to an infinte loop,
    // if not, I can't even browse to any other tab than the first
    // one on he third level, eg. it automatically jumps back
    // to first one.
    $(window).trigger( 'hashchange' );
</script>
<div id="rNumber" class="tabs">
    <ul>
        <li><a href="#layout">Layout</a></li>       
        <li><a href="#prefix">Prefix</a></li>
    </ul>
    <div id="layout">
        <!-- Content here -->
    </div>
    <div id="prefix">
        <!-- Content here -->
    </div>
</div> 
```

有什么想法可以解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:19:26.643

所以这是我目前的解决方案。无限循环的问题似乎是由于在使用 AJAX 加载选项卡时，每次单击该选项卡都会再次加载该选项卡。由于包含第 3 级选项卡的选项卡还包含 JavaScript（请参阅问题），因此重新加载此类选项卡会导致问题。

解决方案是缓存选项卡：

```
$("#menuTabs").tabs({
    cache: true,
    ajaxOptions: {
        cache: false
    }
}) 
```

注意：您必须将 Ajax 缓存设置为 false：

[http://docs.jquery.com/UI/Tabs#option-cache](http://docs.jquery.com/UI/Tabs#option-cache)

第三级选项卡也是如此。在这里还删除了对 hashchange 事件的调用。

```
var rNumberTabs = $("#rNumber").tabs({
    cache: true,
    ajaxOptions: {
        cache: false
    }
});
//snipped..
//$(window).trigger( 'hashchange' ); remove this line 
```

# c# - 如何使用 C# 解锁用户 PC

> ID：13834727
> 
> 赞同：6
> 
> 时间：2012-12-12T07:19:46.267
> 
> 标签：c#, windows, locking, unlock, winlogon

> **可能重复：**
> [以编程方式解锁 Windows](https://stackoverflow.com/questions/6975206/unlock-windows-programmatically)

我正在编写一个将锁定而不是解锁用户 PC 的应用程序。锁定机器相对简单。然而，解锁对我来说只是普通的黑魔法......

让我们假设，在某些事件（例如计时器达到 30 分钟标记）之后，我的应用程序会强制我的 PC 解锁。

我想用提供的密码解锁最新用户（锁定机器的用户）。我知道，您不应该向任何人提供您的密码，但毕竟 - 我正在编写该程序 :)

Sssso ...任何提示从哪里开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:23:29.590

据我所知，您无法自动解锁机器。你可以做的是在机器上做一个假锁。最大化表单，禁用所有特殊组合键，删除资源管理器等。时间到了，做相反的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:36:14.773

您无法使用 c# 解锁/登录 Windows

您可以使用 C++ 来完成，但您需要编写自己的 GINA 实现（图形识别和身份验证）

[http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/c87b5f27-fdeb-4b41-88f0-72e140a11358/](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/c87b5f27-fdeb-4b41-88f0-72e140a11358/)

然而，这远远超出了 BAD 安全实践的界限，我不能再强调这一点了。

# android - 如何使用由 seekBar 或进度条控制的 videoview 播放视频？

> ID：13834728
> 
> 赞同：1
> 
> 时间：2012-12-12T07:19:46.437
> 
> 标签：android, android-videoview, seekbar

在搜索了几个小时后，我问这个，欢迎任何相关答案。.

我的 R.raw 文件夹中有一个视频，我同时在两个相同持续时间的视频视图中播放它，这是我的代码，

```
 sb = (SeekBar)findViewById(R.id.control_seekbar);

     mVideoView1 = (VideoView) findViewById(R.id.surface_view1);
     mVideoView1.setVideoPath("android.resource://" + getPackageName() +"/"+R.raw.play1);              
     mVideoView1.start();

     mVideoView2 = (VideoView) findViewById(R.id.surface_view2);
     mVideoView2.setVideoPath("android.resource://" + getPackageName() +"/"+R.raw.play2);              
     mVideoView2.start();

     v1 = mVideoView1.getDuration();
     v2 = mVideoView2.getDuration();

     mVideoView1.setOnPreparedListener(new OnPreparedListener() 
     {
        @Override
        public void onPrepared(MediaPlayer arg0) 
        {
            sb.setMax(mVideoView1.getDuration()+3);
            sb.postDelayed(onEverySecond, 60);
        }
     });

     sb.setOnSeekBarChangeListener(new OnSeekBarChangeListener() 
     {  
        @Override
        public void onStopTrackingTouch(SeekBar seekBar) 
        {
            mVideoView1.seekTo(sb.getProgress());
            mVideoView2.seekTo(sb.getProgress());
        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) 
        {
            mVideoView1.seekTo(sb.getProgress());
            mVideoView2.seekTo(sb.getProgress());
        }

        @Override
        public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser) 
        {
            mVideoView1.seekTo(progress);
            mVideoView2.seekTo(progress);
        }

    });

   }

   private Runnable onEverySecond=new Runnable() 
   {
        @Override
        public void run() 
        {
            if(sb != null) 
            {
                sb.setProgress(mVideoView1.getCurrentPosition());
            }

            if(mVideoView1.isPlaying()) 
            {
                sb.postDelayed(onEverySecond, 1000);
                if(mVideoView1.getDuration() <= sb.getProgress())
                {
                    mVideoView1.seekTo(0);
                    mVideoView2.seekTo(0);
                }
            }
        }
    }; 
```

我可以将搜索栏拖到新位置，并且它正在正确地从新位置播放。

但我最初不想播放视频。它应该在 pause() 中，当我拖动搜索栏时，视频视图应该更新到相应的位置。

当我将 mVideoView.start() 更改为 pause() 时，我只能看到一个空白的黑屏，并且没有更新 videoview 中的 seekbar 位置更改。

我可以通过什么方式实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T10:13:00.310

你必须在你的视频视图中放置一个媒体控制器。

```
MediaController mediaController = new MediaController(context);
myVideoView.setMediaController(mediaController). 
```

现在，当您单击视频播放时，将显示暂停按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:33:01.883

如果您最初不想播放视频，则无需在 onCreate() 中调用 start 单击播放按钮时调用它。

希望这对您有所帮助。

# php - PHP i18n 语言文件到 ColdFusion 结构转换器

> ID：13834729
> 
> 赞同：0
> 
> 时间：2012-12-12T07:19:49.873
> 
> 标签：php, coldfusion, internationalization

## 任务

我的任务是获取一个 php i18n 语言文件并将其转换为 ColdFusion 结构。这是输入的一部分

```
...
"ASK_DELETE"                =>  "<em>D</em>elete", // 'd' is the accesskey identifier
"BACKUP_OF"                 =>  'Backup of',
"PAGE_TITLE"                =>  "Page Title",
... 
```

## 当前的转换尝试

下面的代码**确实**适用于我收到的 php 语言文件。问题是，代码看起来像意大利面条代码的开头。我不喜欢的一些事情是

*   如果再出现一个字符串模式，事情就会崩溃
*   我有一个名为“值”的变量
*   大量基于中弦的斩波。

该代码看起来像意大利面条代码的开头。对此应该做哪些事情？

```
 <cffunction name="readPropertiesFile" returnType="Struct" hint="Read a properties file and return a structure">
    <cfargument name="propertiesFile" type="string" required="true" hint="path to properties file">

    <cfscript>
        VAR stProperties = {};
        VAR phpText = "";
        VAR key = "";
        VAR value = "";
        VAR line = "";

       var propertiesFilePath = "#GetDirectoryFromPath(GetBaseTemplatePath())##arguments.propertiesfile#";

       if (NOT FileExists(propertiesFilePath))

        return stProperties;

     </cfscript>

    <!--- read props file --->
    <cffile action="read" file="#propertiesFilePath#" variable="phpText">

    <!--- remove any whitespace at top and tail --->
    <cfset phpText = trim(phpText)>

    <!--- remove comments and blank lines --->
    <cfset phpText = ReReplace(phpText,"(?m)\##.*?$", "","all")>
    <cfset phpText = ReReplace(phpText,"[#Chr(10)#]{2,}", "#Chr(10)#","all")>
    <cfset phpText = ReplaceList(phpText, '",', '"')>

    <!--- loop over each line, ignore comments (#...) and insert keys/values into return struct --->
    <cfloop list="#phpText#" index="line" delimiters="#CHR(10)#">
    <cfscript>

    line = trim(line);
    splitAt = Find("=>", line);
    CommentAt = Find("//", line);

    if (splitAt != 0)   {

        key =  replacelist(trim(Left(line, splitAt - 1)), '"', "");

        if (CommentAt == 0)
    value = replacelist(trim(Mid(line, splitAt + 2, 1000)), '"', '');
        else
            value = replacelist(trim(Mid(line, splitAt + 2, CommentAt - (splitAt + 2))), '"', '');

        //  Remove trailing , 
    if (right(value, 1) == ",")
            value = mid(value, 1, len(value) - 1);

    if (right(value, 1) == "'")
        value = mid(value, 1, len(value) - 1);

    if (left(value, 1) == "'")
        value = mid(value, 2, 1000);

        stProperties[key] = value;
        } // end if
    </cfscript>
</cfloop>

<cfreturn stProperties> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:05:02.207

这将是我的方法。您当然可以使其更具弹性或添加错误捕获以捕获不一致的文件解析。我假设键值中不会有引号。

```
<!--- Going on the Assumption there isn't commas or quotations inside the values of the key --->
<cfsavecontent variable="fileData">

"ASK_DELETE"                =>  "<em>D</em>elete", // 'd' is the accesskey identifier
"BACKUP_OF"                 =>  'Backup of',

"PAGE_TITLE"                =>  "Page Title"

</cfsavecontent>

<cfset i18n = structNew()>
<!--- Remove // Comments --->
<cfset fileData = REReplace(fileData,"//.*?\n","","ALL")>
<!--- Simplify Delimiter --->
<cfset fileData = Replace(fileData,"=>","|","ALL")>

<cfloop list="#fileData#" delimiters="," index="thisEntry">
    <!--- Strip Quotes and Pull Entries --->
    <cfset key = REReplace(ListFirst(thisEntry,"|"),"[""']","","ALL")>
    <cfset value = REReplace(ListLast(thisEntry,"|"),"[""']","","ALL")>
    <cfset structInsert(i18n,trim(key),trim(value))>
</cfloop>

<cfdump var="#i18n#"> 
```

# beautifulsoup - Scrappy响应与浏览器响应不同

> ID：13834736
> 
> 赞同：1
> 
> 时间：2012-12-12T07:20:12.197
> 
> 标签：beautifulsoup, urllib2, scrapy

我正在尝试用scrapy刮掉这个页面：

```
http://www.barnesandnoble.com/s?dref=4815&sort=SA&startat=7391 
```

我得到的响应与我在浏览器中看到的不同。浏览器响应具有正确的页面，而 scrapy 响应是：

```
http://www.barnesandnoble.com/s?dref=4815&sort=SA&startat=1 
```

页。我已经尝试使用 urllib2 但仍然有同样的问题。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T07:50:33.910

我不太明白这个问题，但通常浏览器和scrapy的不同响应是由以下原因引起的：

*   服务器分析您的`User-Agent`标头，并为移动客户端或机器人返回一个特制的页面；
*   服务器分析 cookie，并在您第一次访问时做一些特别的事情；
*   您正在尝试像浏览器一样通过 scrapy 发出 POST 请求，但是您忘记了一些表单字段，或者输入了错误的值
*   等等

没有通用的方法来确定什么是错误的，因为它取决于您不知道的服务器逻辑。如果幸运的话，您将分析并解决所有提到的问题并使其发挥作用。

# delphi - 在 ORACLE 中的 NVarchar2 字段上使用 ADOQuery 搜索 unicode 字符串失败

> ID：13834737
> 
> 赞同：1
> 
> 时间：2012-12-12T07:20:12.133
> 
> 标签：delphi, oracle11g, delphi-xe2, ado, unicode-string

如果使用 ADOQuery 连接到 ORACLE 数据库，则使用 Oracle OLEDB 提供程序搜索 NVARCHAR2 字段的 unicode 字符串失败

在 Oracle (11g) 数据库中，有一个类似的表

```
create table unicodetest
(Code Number, Name NVarchar2(100)) 
```

现在我已将数据插入其中（通过 sql developer 完成）

```
insert into unicodetest 
values (1, N'ユニコード') 
```

现在从 delphi (XE2) 应用程序中，我使用 TADOQuery 使用 ORAOLEDB 提供程序连接到 ORACLE 数据库。

现在，如果我使用以下查询搜索 unicode 字符串

```
select * from unicodetest
where 
NAME like N'%ユニコード%' 
```

它返回 0 条记录

尝试不使用 N 但结果相同

# tomcat - 关于 web 应用程序中的 robots.txt 文件

> ID：13834750
> 
> 赞同：0
> 
> 时间：2012-12-12T07:20:44.533
> 
> 标签：tomcat, web-applications, robots.txt, tomcat5.5

我使用的是 Tomcat 5.5 服务器，并且部署了一个 Web 应用程序。我想阻止访问项目中 .txt 文件的 http 请求。例如 http url，比如 -- https://MyDomain/inside/mytest.txt

我认为这可以使用 web.xml 文件中的安全约束或编写自定义阀门来完成。但是，我正在探索使用 robots.txt 文件的可能性，因为它们看起来非常简单。所以我编写了一个 robots.txt 文件来阻止对 *.txt 文件的访问，如下所示——

# go away User-agent: * Disallow: /*.txt

我已将它放在 ROOT 文件夹以及 webapps 文件夹内的所有路径中。但是，它似乎没有任何效果，我仍然能够访问 *.txt 文件。robots.txt 文件在 Tomcat 中生效还需要其他注意事项和步骤吗？非常感谢这里的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T16:01:17.423

`robots.txt`是网络机器人（例如搜索引擎网络爬虫）遵循的约定，它之所以有效，是因为网络机器人查看此文件并遵守它在其中找到的规则。有关详细信息，请参阅[http://www.robotstxt.org/](http://www.robotstxt.org/)，尤其是[http://www.robotstxt.org/robotstxt.html](http://www.robotstxt.org/robotstxt.html)。

请注意，它不是一种安全措施——它只是一个咨询协议，任何行为不端的 Web 机器人都可以随意忽略它（因为服务器不强制执行其规则）。事实上，robots.txt 甚至不是针对人类用户，他们通常应该能够访问这些页面。

如果您真的想阻止您的 Web 应用程序的所有用户（不仅仅是行为良好的自动网络爬虫）访问文件，那么您将需要执行您提到的安全约束之类的操作。

另外几个选择：

*   将文本文件放在`WEB-INF/classes/`Web 应用程序的文件夹中，因为此文件夹的内容永远不会提供给 Web 客户端，但可供 Web 应用程序代码本身使用`ClassLoader.getResourceAsStream`，例如。

*   将文本文件放在`WEB-INF/`Web 应用程序的文件夹中，因为此文件夹的内容永远不会提供给 Web 客户端，但可供 Web 应用程序代码本身使用`ServletContext.getResourceAsStream`，例如。

# php - 如何在同一页面上以php形式获取字段的值

> ID：13834754
> 
> 赞同：0
> 
> 时间：2012-12-12T07:20:52.273
> 
> 标签：php

我正在设计一个网页。我想根据用户所做的选择来选择（同一页面上另一个下拉列表的）。我正在向名为 Application 的用户提供一个下拉列表。根据应用程序，我想查询 sql 并只想在另一个下拉列表中显示对所选应用程序有效的选项。我想在同一页面（用户选择的页面）上获取 Application 的值，并通过获取该值将相应地查询 sql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:28:20.920

一旦页面被加载，PHP 就不能再做任何事情了。

您不能基于用户交互使用 PHP。

这样做的唯一方法是通过 javascript。使用 ajax，您可以从 javascript 上的某个 URL 检索数据。

一个过程是这样的：

1.  用户选择了一些东西
2.  javascript(ajax) 加载一个 URL
3.  在该 URL 中，使用您的 PHP 获取某个查询
4.  结果将被发送到 javascript，因此显示结果。

这是一个解释 ajax 的好页面：

[http://wabism.com/ajax-tutorial-with-jquery/](http://wabism.com/ajax-tutorial-with-jquery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:25:12.447

您必须在从数据库获取数据的下拉列表的 onchange 事件上调用 ajax 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T07:31:18.073

ajax 是你的朋友。您可以使用原始 javascript 或 jquery（更简单）。您的步骤将是.. 1\. 编写一个 php 代码块，很可能是一个函数，它从 post 中获取选定的应用程序选项，查询数据库并输出结果。2\. 在您当前的页面中，编写一个 js 代码，每次用户选择一个选项时触发 ajax 请求。此 ajax 将通过 post 方法将选定的选项发送到 php 脚本，您可以在请求成功后获取输出。

```
$('.selectBox').on('change', function(){
// do your ajax here.
}); 
```

类似的东西..

# ruby-on-rails - Application.css 不是预编译错误 500 rails

> ID：13834756
> 
> 赞同：2
> 
> 时间：2012-12-12T07:20:56.113
> 
> 标签：ruby-on-rails, nginx, asset-pipeline, unicorn

我在生产中遇到 rails + nginx + unicorn 错误

> ActionView::Template::Error（application.css 未预编译）：

我正在尝试使用 sqlite3 部署干净的 rails 应用程序。当我访问[http://cayennepower.ru/posts](http://cayennepower.ru/posts)时，我很抱歉，但出了点问题。在首页上，静态欢迎页面效果很好。在我的 app/log production.log 我有这样的错误

```
Started GET "/posts" for 127.0.0.1 at 2012-12-12 06:47:48 +0100
Processing by PostsController#index as */*
Rendered posts/index.html.erb within layouts/application (0.4ms)
Completed 500 Internal Server Error in 3ms

ActionView::Template::Error (application.css isn't precompiled):
2: <html>
3: <head>
4:   <title>CleanRails</title>
5:   <%= stylesheet_link_tag    "application", :media => "all" %>
6:   <%= javascript_include_tag "application" %>
7:   <%= csrf_meta_tags %>
8: </head>
app/views/layouts/application.html.erb:5:in   `_app_views_layouts_application_html_erb___741543018_80365330'
app/controllers/posts_controller.rb:7:in `index' 
```

在 config/enviroments/production.rb 我放置

```
config.assets.compile = true

config.assets.precompile += %w( application.css ) 
```

我已经运行了 rake assets:precompile --trace RAILS_ENV=production

跟踪日志是

```
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/usr/local/rvm/rubies/ruby-1.9.3-p327/bin/ruby /usr/local/rvm/gems/ruby-1.9.3-p327/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
** Invoke assets:precompile:nondigest (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:nondigest 
```

但我仍然有这个错误

我的 nginx.conf 是

```
 upstream cayennepower.ru {
   server unix:/home/sites/cayennepower.ru/www/tmp/sockets/unicorn.sock;
   # server 127.0.0.1:3000 fail_timeout=0;
} 
```

我的 domain.conf 文件是

```
server {
listen 80;
server_name cayennepower.ru;
root /home/sites/cayennepower.ru/www/public;
try_files $uri/index.html $uri @unicorn;
location @unicorn {
    #if (!-f $request_filename) {
        proxy_pass http://cayennepower.ru;
        break;
    #}
} 
```

}

非常感谢你们的帮助！

# c# - TPL Dataflow，对核心设计感到困惑

> ID：13834757
> 
> 赞同：4
> 
> 时间：2012-12-12T07:21:04.160
> 
> 标签：c#, concurrency, task-parallel-library, c#-5.0, tpl-dataflow

我一直在使用 TPL Dataflow，但遇到了一个我无法解决的问题：

我有以下架构：

`BroadCastBlock<List<object1>>`-> 2 个不同的`TransformBlock<List<Object1>, Tuple<int, List<Object1>>>`-> 都链接到`TransformManyBlock<Tuple<int, List<Object1>>, Object2>`

我在链末端的 TransformManyBlock 中改变 lambda 表达式：(a) 对流式元组执行操作的代码，(b) 根本没有代码。

在 TransformBlocks 中，我测量从第一项到达开始到 TransformBlock.Completion 指示块完成时停止的时间（broadCastBlock 链接到 transfrom 块，propagateCompletion 设置为 true）。

我无法调和的是，为什么 (b) 情况下的 transformBlocks 完成速度比 (a) 快 5-6 倍。这完全违背了整个 TDF 设计意图的意图。转换块中的项目被传递到 transfromManyBlock，因此 transformManyBlock 对影响转换块何时完成的项目所做的一切都无关紧要。我看不出transfromManyBlock中发生的任何事情可能与前面的TransformBlocks有关的单一原因。

谁能调和这个奇怪的观察？

这是一些显示差异的代码。运行代码时，请确保更改以下两行：

```
 tfb1.transformBlock.LinkTo(transformManyBlock);
        tfb2.transformBlock.LinkTo(transformManyBlock); 
```

至：

```
 tfb1.transformBlock.LinkTo(transformManyBlockEmpty);
        tfb2.transformBlock.LinkTo(transformManyBlockEmpty); 
```

为了观察前面的 transformBlocks 在运行时的差异。

```
class Program
{
    static void Main(string[] args)
    {
        Test test = new Test();
        test.Start();
    }
}

class Test
{
    private const int numberTransformBlocks = 2;
    private int currentGridPointer;
    private Dictionary<int, List<Tuple<int, List<Object1>>>> grid;

    private BroadcastBlock<List<Object1>> broadCastBlock;
    private TransformBlockClass tfb1;
    private TransformBlockClass tfb2;

    private TransformManyBlock<Tuple<int, List<Object1>>, Object2> 
               transformManyBlock;
    private TransformManyBlock<Tuple<int, List<Object1>>, Object2> 
               transformManyBlockEmpty;
    private ActionBlock<Object2> actionBlock;

    public Test()
    {
        grid = new Dictionary<int, List<Tuple<int, List<Object1>>>>();

        broadCastBlock = new BroadcastBlock<List<Object1>>(list => list);

        tfb1 = new TransformBlockClass();
        tfb2 = new TransformBlockClass();

        transformManyBlock = new TransformManyBlock<Tuple<int, List<Object1>>, Object2>
                (newTuple =>
            {
                for (int counter = 1; counter <= 10000000;  counter++)
                {
                    double result = Math.Sqrt(counter + 1.0);
                }

                return new Object2[0];

            });

        transformManyBlockEmpty 
            = new TransformManyBlock<Tuple<int, List<Object1>>, Object2>(
                  tuple =>
            {
                return new Object2[0];
            });

        actionBlock = new ActionBlock<Object2>(list =>
            {
                int tester = 1;
                //flush transformManyBlock
            });

        //linking
        broadCastBlock.LinkTo(tfb1.transformBlock
                              , new DataflowLinkOptions 
                                  { PropagateCompletion = true }
                              );
        broadCastBlock.LinkTo(tfb2.transformBlock
                              , new DataflowLinkOptions 
                                  { PropagateCompletion = true }
                              );

        //link either to ->transformManyBlock or -> transformManyBlockEmpty
        tfb1.transformBlock.LinkTo(transformManyBlock);
        tfb2.transformBlock.LinkTo(transformManyBlock);

        transformManyBlock.LinkTo(actionBlock
                                  , new DataflowLinkOptions 
                                       { PropagateCompletion = true }
                                  );
        transformManyBlockEmpty.LinkTo(actionBlock
                                       , new DataflowLinkOptions 
                                            { PropagateCompletion = true }
                                       );

        //completion
        Task.WhenAll(tfb1.transformBlock.Completion
                     , tfb2.transformBlock.Completion)
                       .ContinueWith(_ =>
            {
                transformManyBlockEmpty.Complete();
                transformManyBlock.Complete();
            });

        transformManyBlock.Completion.ContinueWith(_ =>
            {
                Console.WriteLine("TransformManyBlock (with code) completed");
            });

        transformManyBlockEmpty.Completion.ContinueWith(_ =>
        {
            Console.WriteLine("TransformManyBlock (empty) completed");
        });

    }

    public void Start()
    {
        const int numberBlocks = 100;
        const int collectionSize = 300000;

        //send collection numberBlock-times
        for (int i = 0; i < numberBlocks; i++)
        {
            List<Object1> list = new List<Object1>();
            for (int j = 0; j < collectionSize; j++)
            {
                list.Add(new Object1(j));
            }

            broadCastBlock.Post(list);
        }

        //mark broadCastBlock complete
        broadCastBlock.Complete();

        Console.WriteLine("Core routine finished");
        Console.ReadLine();
    }
}

class TransformBlockClass
{
    private Stopwatch watch;
    private bool isStarted;
    private int currentIndex;

    public TransformBlock<List<Object1>, Tuple<int, List<Object1>>> transformBlock;

    public TransformBlockClass()
    {
        isStarted = false;
        watch = new Stopwatch();

        transformBlock = new TransformBlock<List<Object1>, Tuple<int, List<Object1>>>
           (list =>
        {
            if (!isStarted)
            {
                StartUp();
                isStarted = true;
            }

            return new Tuple<int, List<Object1>>(currentIndex++, list);
        });

        transformBlock.Completion.ContinueWith(_ =>
            {
                ShutDown();
            });
    }

    private void StartUp()
    {
        watch.Start();
    }

    private void ShutDown()
    {
        watch.Stop();

        Console.WriteLine("TransformBlock : Time elapsed in ms: " 
                              + watch.ElapsedMilliseconds);
    }
}

class Object1
{
    public int val { get; private set; }

    public Object1(int val)
    {
        this.val = val;
    }
}

class Object2
{
    public int value { get; private set; }
    public List<Object1> collection { get; private set; }

    public Object2(int value, List<Object1> collection)
    {
        this.value = value;
        this.collection = collection;
    }    
} 
```

**编辑：我发布了另一个代码片段，这次使用值类型的集合，我无法重现我在上面的代码中观察到的问题。是否是传递引用类型并同时对它们进行操作（即使在不同的数据流块中）可能会阻塞并导致争用？**

```
class Program
{
    static void Main(string[] args)
    {
        Test test = new Test();
        test.Start();
    }
}

class Test
{
    private BroadcastBlock<List<int>> broadCastBlock;
    private TransformBlock<List<int>, List<int>> tfb11;
    private TransformBlock<List<int>, List<int>> tfb12;
    private TransformBlock<List<int>, List<int>> tfb21;
    private TransformBlock<List<int>, List<int>> tfb22;
    private TransformManyBlock<List<int>, List<int>> transformManyBlock1;
    private TransformManyBlock<List<int>, List<int>> transformManyBlock2;
    private ActionBlock<List<int>> actionBlock1;
    private ActionBlock<List<int>> actionBlock2;

    public Test()
    {
        broadCastBlock = new BroadcastBlock<List<int>>(item => item);

        tfb11 = new TransformBlock<List<int>, List<int>>(item =>
            {
                return item;
            });

        tfb12 = new TransformBlock<List<int>, List<int>>(item =>
            {
                return item;
            });

        tfb21 = new TransformBlock<List<int>, List<int>>(item =>
            {
                return item;
            });

        tfb22 = new TransformBlock<List<int>, List<int>>(item =>
            {
                return item;
            });

        transformManyBlock1 = new TransformManyBlock<List<int>, List<int>>(item =>
            {
                Thread.Sleep(100);
                //or you can replace the Thread.Sleep(100) with actual work, 
                //no difference in results. This shows that the issue at hand is 
                //unrelated to starvation of threads.

                return new List<int>[1] { item };
            });

        transformManyBlock2 = new TransformManyBlock<List<int>, List<int>>(item =>
            {
                return new List<int>[1] { item };
            });

        actionBlock1 = new ActionBlock<List<int>>(item =>
            {
                //flush transformManyBlock
            });

        actionBlock2 = new ActionBlock<List<int>>(item =>
        {
            //flush transformManyBlock
        });

        //linking
        broadCastBlock.LinkTo(tfb11, new DataflowLinkOptions 
                                      { PropagateCompletion = true });
        broadCastBlock.LinkTo(tfb12, new DataflowLinkOptions 
                                      { PropagateCompletion = true });
        broadCastBlock.LinkTo(tfb21, new DataflowLinkOptions 
                                      { PropagateCompletion = true });
        broadCastBlock.LinkTo(tfb22, new DataflowLinkOptions 
                                      { PropagateCompletion = true });

        tfb11.LinkTo(transformManyBlock1);
        tfb12.LinkTo(transformManyBlock1);
        tfb21.LinkTo(transformManyBlock2);
        tfb22.LinkTo(transformManyBlock2);

        transformManyBlock1.LinkTo(actionBlock1
                                   , new DataflowLinkOptions 
                                     { PropagateCompletion = true }
                                   );
        transformManyBlock2.LinkTo(actionBlock2
                                   , new DataflowLinkOptions 
                                     { PropagateCompletion = true }
                                   );

        //completion
        Task.WhenAll(tfb11.Completion, tfb12.Completion).ContinueWith(_ =>
            {
                Console.WriteLine("TransformBlocks 11 and 12 completed");
                transformManyBlock1.Complete();
            });

        Task.WhenAll(tfb21.Completion, tfb22.Completion).ContinueWith(_ =>
            {
                Console.WriteLine("TransformBlocks 21 and 22 completed");
                transformManyBlock2.Complete();
            });

        transformManyBlock1.Completion.ContinueWith(_ =>
            {
                Console.WriteLine
                    ("TransformManyBlock (from tfb11 and tfb12) finished");
            });

        transformManyBlock2.Completion.ContinueWith(_ =>
            {
                Console.WriteLine
                    ("TransformManyBlock (from tfb21 and tfb22) finished");
            });
    }

    public void Start()
    {
        const int numberBlocks = 100;
        const int collectionSize = 300000;

        //send collection numberBlock-times
        for (int i = 0; i < numberBlocks; i++)
        {
            List<int> list = new List<int>();
            for (int j = 0; j < collectionSize; j++)
            {
                list.Add(j);
            }

            broadCastBlock.Post(list);
        }

        //mark broadCastBlock complete
        broadCastBlock.Complete();

        Console.WriteLine("Core routine finished");
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:27:36.240

好的，最后的尝试;-)

## 概要：

***场景 1 中观察到的时间增量可以通过垃圾收集器的不同行为***来完全解释。

 *运行场景 1 链接 transformManyBlocks 时，运行时行为是在主线程上创建新项目（列表）期间触发垃圾收集，而运行场景 1 链接 transformManyBlockEmptys 时则不是这种情况。

请注意，创建新的引用类型实例 (Object1) 会导致调用在 GC 堆中分配内存，这反过来可能会触发 GC 收集运行。由于创建了相当多的 Object1 实例（和列表），垃圾收集器需要做更多的工作来扫描堆中（可能）无法访问的对象。

因此，观察到的差异可以通过以下任何方式最小化：

*   将 Object1 从类转换为结构（从而确保实例的内存不在堆上分配）。
*   保持对生成列表的引用（从而减少垃圾收集器识别不可达对象所需的时间）。
*   在将它们发布到网络之前生成所有项目。

（注意：我无法解释为什么垃圾收集器在场景 1“transformManyBlock”与场景 1“transformManyBlockEmpty”中的行为不同，但通过 ConcurrencyVisualizer 收集的数据清楚地显示了差异。）

## 结果：

（测试在 Core i7 980X、6 核、启用 HT 的情况下运行）：

我将场景 2 修改如下：

```
// Start a stopwatch per tfb
int tfb11Cnt = 0;
Stopwatch sw11 = new Stopwatch();
tfb11 = new TransformBlock<List<int>, List<int>>(item =>
{
    if (Interlocked.CompareExchange(ref tfb11Cnt, 1, 0) == 0)
        sw11.Start();

    return item;
});

// [...]

// completion
Task.WhenAll(tfb11.Completion, tfb12.Completion).ContinueWith(_ =>
{

     Console.WriteLine("TransformBlocks 11 and 12 completed. SW11: {0}, SW12: {1}",
     sw11.ElapsedMilliseconds, sw12.ElapsedMilliseconds);
     transformManyBlock1.Complete();
}); 
```

结果：

1.  **方案 1（如发布的，即链接到 transformManyBlock）**：
    TransformBlock ：经过的时间（以毫秒为单位）：6826
    TransformBlock ：经过的时间（以毫秒为单位）：6826
2.  **方案 1（链接到 transformManyBlockEmpty）**：
    TransformBlock：经过的时间（以毫秒为单位）：3140
    TransformBlock：经过的时间（以毫秒为单位）：3140
3.  **场景 1（transformManyBlock，循环体中的 Thread.Sleep(200)）**：
    TransformBlock：经过的时间（以毫秒为单位）：4949
    TransformBlock：经过的时间（以毫秒为单位）：4950
4.  **场景 2（已发布但已修改为报告时间）**：
    TransformBlocks 21 和 22 已完成。SW21：619 毫秒，SW22：669 毫秒
    TransformBlocks 11 和 12 完成。SW11：669 毫秒，SW12：667 毫秒

接下来，我更改了场景 1 和 2，以便在将输入数据发布到网络之前准备好输入数据：

```
// Scenario 1
//send collection numberBlock-times
var input = new List<List<Object1>>(numberBlocks);
for (int i = 0; i < numberBlocks; i++)
{
    var list = new List<Object1>(collectionSize);
    for (int j = 0; j < collectionSize; j++)
    {
        list.Add(new Object1(j));
    }
    input.Add(list);
}

foreach (var inp in input)
{
    broadCastBlock.Post(inp);
    Thread.Sleep(10);
}

// Scenario 2
//send collection numberBlock-times
var input = new List<List<int>>(numberBlocks);
for (int i = 0; i < numberBlocks; i++)
{
    List<int> list = new List<int>(collectionSize);
    for (int j = 0; j < collectionSize; j++)
    {
        list.Add(j);
    }

    //broadCastBlock.Post(list);
    input.Add(list);
 }

 foreach (var inp in input)
 {
     broadCastBlock.Post(inp);
     Thread.Sleep(10);
 } 
```

结果：

1.  **方案 1（transformManyBlock）**：
    TransformBlock：经过的时间（以毫秒为单位）：1029
    TransformBlock：经过的时间（以毫秒为单位）：1029
2.  **方案 1（transformManyBlockEmpty）**：
    TransformBlock：经过的时间（以毫秒为单位）：975
    TransformBlock：经过的时间（以毫秒为单位）：975
3.  **场景 1（transformManyBlock，循环体中的 Thread.Sleep(200)）**：
    TransformBlock：经过的时间（以毫秒为单位）：972
    TransformBlock：经过的时间（以毫秒为单位）：972

最后，我将代码改回了原始版本，但保留了对创建列表的引用：

```
var lists = new List<List<Object1>>();
for (int i = 0; i < numberBlocks; i++)
{
    List<Object1> list = new List<Object1>();
    for (int j = 0; j < collectionSize; j++)
    {
        list.Add(new Object1(j));
    }
    lists.Add(list);                
    broadCastBlock.Post(list);
} 
```

结果：

1.  **方案 1（transformManyBlock）**：
    TransformBlock：经过的时间（以毫秒为单位）：6052
    TransformBlock：经过的时间（以毫秒为单位）：6052
2.  **方案 1（transformManyBlockEmpty）**：
    TransformBlock：经过的时间（以毫秒为单位）：5524
    TransformBlock：经过的时间（以毫秒为单位）：5524
3.  **方案 1（transformManyBlock，循环体中的 Thread.Sleep(200)）**：
    TransformBlock：经过的时间（以毫秒为单位）：5098
    TransformBlock：经过的时间（以毫秒为单位）：5098

同样，将 Object1 从一个类更改为一个结构会导致两个块大约同时完成（大约快 10 倍）。

* * *

*更新：以下答案不足以解释观察到的行为。*

在场景一中，TransformMany lambda 内部执行了一个紧密循环，这将占用 CPU 并使其他线程无法获得处理器资源。这就是为什么可以观察到 Completion 延续任务执行延迟的原因。在场景二中，一个 Thread.Sleep 在 TransformMany lambda 中执行，让其他线程有机会执行 Completion 继续任务。观察到的运行时行为差异与 TPL 数据流无关。为了改善观察到的增量，在场景 1 中在循环体内引入一个 Thread.Sleep 就足够了：

```
for (int counter = 1; counter <= 10000000;  counter++)
{
   double result = Math.Sqrt(counter + 1.0);
   // Back off for a little while
   Thread.Sleep(200);
} 
```

* * *

*（以下是我的原始答案。我没有仔细阅读OP的问题，只是在阅读了他的评论后才明白他在问什么。我仍然把它留在这里作为参考。）*

你确定你测量的是正确的东西吗？请注意，当您执行以下操作时：`transformBlock.Completion.ContinueWith(_ => ShutDown());`那么您的时间测量将受到 TaskScheduler 行为的影响（例如，在继续任务开始执行之前需要多长时间）。虽然我无法观察到您在我的机器上看到的差异，但在使用专用线程测量时间时，我得到了更精确的结果（就 tfb1 和 tfb2 完成时间之间的增量而言）：

```
 // Within your Test.Start() method...
       Thread timewatch = new Thread(() =>
       {
           var sw = Stopwatch.StartNew();
           tfb1.transformBlock.Completion.Wait();
           Console.WriteLine("tfb1.transformBlock completed within {0} ms",
                              sw.ElapsedMilliseconds);
        });

        Thread timewatchempty = new Thread(() =>
        {
            var sw = Stopwatch.StartNew();
            tfb2.transformBlock.Completion.Wait();
            Console.WriteLine("tfb2.transformBlock completed within {0} ms", 
                               sw.ElapsedMilliseconds);
        });

        timewatch.Start();
        timewatchempty.Start();

        //send collection numberBlock-times
        for (int i = 0; i < numberBlocks; i++)
        {
          // ... rest of the code 
```*

# caliper - Caliper 1.0 是否仍在轨道上？

> ID：13834759
> 
> 赞同：1
> 
> 时间：2012-12-12T07:21:07.593
> 
> 标签：caliper

在其他各种 caliper 帖子中，似乎 Caliper 在 10 月的某个时候接近 1.0 版本（即，8 月的答案是“等待两个月”），但 git repo 中没有任何活动自6月18日起。任何更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:21:48.600

我希望明年初能把它弄出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:04:40.917

根据[我对这个问题的回答](https://groups.google.com/d/msg/caliper/lwWTD3j6Ccs/eoUn9kVX3sgJ)，它“很快就会到来”。

# objective-c - 目标c宏

> ID：13834762
> 
> 赞同：1
> 
> 时间：2012-12-12T07:21:18.200
> 
> 标签：objective-c

我想使用这个[来源的这些代码行](http://iosimmersion.com/post/display-html-in-uitextview)

```
#define TEXTVIEW_SET_HTML_TEXT(__textView__, __text__)\
do\
{\
    if ([__textView__ respondsToSelector: NSSelectorFromString(@"setContentToHTMLString:")])\
        [__textView__ performSelector: NSSelectorFromString(@"setContentToHTMLString:") withObject: __text__];\
    else\
        __textView__.text = __text__;\
}\
while (0)

#define TEXTVIEW_GET_HTML_TEXT(__textView__, __text__)\
do\
{\
    if ([__textView__ respondsToSelector: NSSelectorFromString(@"contentAsHTMLString")])\
        __text__ = [__textView__ performSelector: NSSelectorFromString(@"contentAsHTMLString") withObject: nil];\
    else\
        __text__ = __textView__.text;\
}\
while (0) 
```

我该怎么办？我是宏的新手。我应该用名称定义一个 uitextview 变量`__textView__`吗？是否可以帮助我完成一些基本步骤以使用此代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T07:33:36.523

您只需要将宏放在 之外`@implementation`，如下所示：

```
#import "..."

// Put the macros here

// This block may or may not be present in your code...
@interface YourClass ()

@end
// ... up to here.

@implementation YourClass

@end 
```

您不必声明变量，因为它们已在宏中声明。你可以这样想：

```
#define TEXTVIEW_SET_HTML_TEXT(__textView__, __text__)\
do\
{\
    if ([__textView__ respondsToSelector: NSSelectorFromString(@"setContentToHTMLString:")])\
        [__textView__ performSelector: NSSelectorFromString(@"setContentToHTMLString:") withObject: __text__];\
    else\
        __textView__.text = __text__;\
}\
while (0) 
```

作为这个 C 风格的函数：

```
void TEXTVIEW_SET_HTML_TEXT(UITextView *__textView__, NSString *__text__)
{
    do
    {
        if ([__textView__ respondsToSelector: NSSelectorFromString(@"setContentToHTMLString:")])
            [__textView__ performSelector: NSSelectorFromString(@"setContentToHTMLString:") withObject: __text__];
        else
            __textView__.text = __text__;
    }
    while (0);
} 
```

不同之处在于，如果您已将其声明为 C 样式函数，则它会在编译/链接时包含在您的应用程序中。但是，由于它是`#define`d，这意味着编译器将首先将其更改为`do-while`编译前。

你可以这样称呼它：

```
- (void)yourMethodThatWillChangeTheText
{
    // ...
    TEXTVIEW_SET_HTML_TEXT(self.myTextView, @"Hello");
    // ...
} 
```

作为附加信息，`#define`通常用于定义常量，例如：

```
#define PI_VALUE 3.141592 
```

这将不得不被称为：

```
double circumference = 2 * PI_VALUE * radius; 
```

但正如在宏中看到的那样，它也可以看起来/被用作一个函数。因此，您必须考虑宏 / 的`#define`外观以确保正确调用它。

# magento - 如何通过csv在magento中导入集团价格？

> ID：13834765
> 
> 赞同：1
> 
> 时间：2012-12-12T07:21:39.123
> 
> 标签：magento, import

我需要为我网站中的每种产品**导入批发价和零售价**

所以我尝试创建具有团体价格的测试产品并将其导出。

并且尝试导入这些字段，我尝试同时使用“导入”和“数据流/导入”，在所有情况下我都收到导入成功消息，但实际上没有导入该组价格

![用于更新价格的 csv 格式](../Images/bc8b628bd3b67e8c5337f5821a3b8e7a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:15:16.530

默认情况下，Magento Import 不支持此功能。
您可以将自定义代码用作：

```
// add a pricing to store 1
$product = Mage::getModel('catalog/product')->setStoreId(1)->load(1234);
$product->setData('group_price',array (
    array (
        "website_id" => 1,
        "cust_group" => 2,
        "price" => 105
    )));
$product->save(); 
```

# c# - 使用 asp.net mvc 3 进行动态角色分配

> ID：13834766
> 
> 赞同：0
> 
> 时间：2012-12-12T07:21:41.400
> 
> 标签：c#, asp.net-mvc-3

我有以下用于动态角色分配的自定义类：

```
 public class DynamicAuthorizeAttribute : AuthorizeAttribute
    {
        IVRControlPanelRepository repository = new IVRControlPanelRepository();
        protected override bool AuthorizeCore(HttpContextBase httpContext)
        {
            var controllerName = httpContext.Request.RequestContext.RouteData.Values["controller"];
            var actionName = httpContext.Request.RequestContext.RouteData.Values["action"];
            string controller = controllerName.ToString() + "Controller";
            string action = actionName.ToString();    
            repository.GetAssignRole(controller, action);    
            GetRolesFromDatabase(controllerName, actionName);
             //  Roles = "Role1,Role2,Role3"; 
            Roles = repository.GetAssignRole(controller, action);    
            return base.AuthorizeCore(httpContext);
        }
    } 
```

以下是返回用逗号分隔的角色字符串的函数

```
public string GetAssignRole(string controllername, string actionname)
        {
            using (AppEntities db = new AppEntities())
            {
                var result = from u in db.AssignRoles where (u.ControllerName == controllername && u.ActionName == actionname) select u;                    
                if (result.Count() != 0)
                {
                    var rol = result.FirstOrDefault();    
                    return rol.Role;
                }
                else
                {
                    return "";
                }                    
            }      
        } 
```

我已将属性放置`[DynamicAuthorizeAttribute]`到所有控制器的所有操作中。

**问题：**

如果从 GetAssignRole() 返回的 Roles 为空，则将其重定向到 LogOn。`Roles=""`但如果在上面的代码中，我实际上想指定为对操作的未经授权的访问。如果 Roles="Administrator,Member" 如果 Roles 是从 GetAssignRole() 返回的空字符串，则它可以正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T10:39:40.403

好吧，据我所知，有几个机会可以做到这一点

首先，您可以在此处覆盖 OnAuthorization 并填写 Roles 属性。之后，只需检查角色计数并决定调用 AuthorizeCore 还是直接返回（在这种情况下，您复制策略 AuthorizeAttribute 的开发人员）

二、使用 AllowAnonymous 属性

第三，为每个用户创建自己的匿名角色作为默认角色

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:25:32.500

如果我理解正确，您需要：

```
...
Roles = repository.GetAssignRole(controller, action);    
if (Roles.Length == 0) return true;
return base.AuthorizeCore(httpContext); 
```

# java - 基于 TLS 的 Java 邮件

> ID：13834768
> 
> 赞同：8
> 
> 时间：2012-12-12T07:21:47.703
> 
> 标签：java, email, ssl

我正在尝试通过 TLS 连接从我的程序发送电子邮件。这是我的代码

```
 final String username = "XXXXXX";
    final String password = "XXXXX"; 
    Properties props = new Properties();
    props.put("mail.transport.protocol", "smtp");
    props.put("mail.smtp.starttls.enable","true");
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.host", "mail.xxxx.com");
    props.put("mail.smtp.port", "587");

    Session session = Session.getInstance(props,
            new javax.mail.Authenticator() {
              protected PasswordAuthentication getPasswordAuthentication() {
                  return new PasswordAuthentication(username, password);
              }
            });

    Message message = new MimeMessage(session);
    message.setFrom(new InternetAddress("from@xxxx.com"));
    message.setRecipients(Message.RecipientType.TO,
        InternetAddress.parse(to_address));
    message.setSubject("Test Mail"); 
    message.setText("TestMail ");
    Transport.send(message) 
```

我的电子邮件网关在端口 587 上启用了启用 SSL 的传入邮件设置和启用了 TLS 的传出邮件设置。我可以在 Outlook 中配置此设置并且工作正常。但是通过我的java程序它说“连接被拒绝”。帮助赞赏！

# 最后工作：

我使用[InstallCert](http://kenai.com/projects/javamail/pages/InstallCert)程序导入证书以生成 jssecacerts 文件，并将该文件添加到我的 /jre/lib/security/ 路径中。这是我的工作代码

```
 properties.put("mail.transport.protocol", "smtp");
    properties.put("mail.smtp.host", "XXXXXX");  
    properties.put("mail.smtp.port", "465"); 
    properties.put("mail.smtp.ssl.enable", true);
    properties.put("mail.smtp.socketFactory.port", "465");
    properties.put("mail.smtp.socketFactory.class","javax.net.ssl.SSLSocketFactory");
    properties.put("mail.smtp.socketFactory.fallback", "false"); 
    properties.put("mail.smtp.quitwait", "false"); 
    properties.put("mail.smtp.auth", "true"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T07:24:50.870

您需要使用`smtps`协议而不是`smtp`

```
props.put("mail.transport.protocol", "smtps");
props.put("mail.smtps.starttls.enable","true");
props.put("mail.smtps.auth", "true");
props.put("mail.smtps.host", "mail.xxxx.com");
props.put("mail.smtps.port", "587"); 
```

您也可以尝试专门为 rfc822 设置协议，这有时会有所帮助

```
props.put("mail.transport.protocol.rfc822", "smtps"); 
```

# jquery - Opera浏览器不加载js文件

> ID：13834771
> 
> 赞同：1
> 
> 时间：2012-12-12T07:22:00.113
> 
> 标签：jquery, opera

我在本地主机做一个项目，

这是我的主人：`http://localhost:85/xxx/trunk/Webroot/task-1.html`

这是我的html：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>task1</title>

    <script src="js/jquery-1.8.2.min.js"></script>
    <script src="js/main.js"></script>
    <script src="js/jquery.mobile.defaults.overrides.js"></script>
        <script src="js/jquery.mobile-1.2.0.min.js"></script>
    <script>
        alert('hi')
    </script>
</head>
<body>

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
    </body>
</html> 
```

但在 Opera 开发人员工具中，我只看到了这个：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>task1</title>
<script src="js/jquery-1.8.2.min.js"/>
</head>
</html> 
```

在这里，我的其余 js 文件不可见，而且我没有收到警报消息……出了什么问题？我怎样才能解决这个问题？

其余所有浏览器都可以正常工作。

# magento - Magento：基于商店视图的产品价格

> ID：13834772
> 
> 赞同：2
> 
> 时间：2012-12-12T07:22:01.323
> 
> 标签：magento

Magento 1.7 中已经有一个功能，用于目录价格范围作为“网站”。是否有任何解决方案可以使目录价格范围作为“商店视图”表现为商店范围。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T09:43:03.647

您不能将价格范围设置为默认存储视图。您可以编写一个自定义扩展来实现这一点（或使用 Magento Connect 中的扩展），或者为您希望拥有不同定价产品的商店创建一个单独的网站（商店组）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-19T06:13:43.030

你可以使用这个扩展：

[商店查看定价](http://www.magentocommerce.com/magento-connect/store-view-pricing-3541.html)。

它是免费的，适用于 Magento 1.7

谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T10:33:05.073

试试这个扩展：

[StoreView 定价](http://innoexts.com/store-view-pricing/#.UFGWqq6E_RQ)

它是免费的，并且像魅力一样工作。我用了 2 个月。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-10T11:41:35.443

1) [http://www.magentocommerce.com/boards/viewthread/320521/](http://www.magentocommerce.com/boards/viewthread/320521/)

2) [Magento 产品定义，不同地区价格不同](https://stackoverflow.com/questions/8913160/magento-product-definition-with-different-prices-for-different-regions)

这是视频如何做到这一点 - [http://www.magentocommerce.com/magento-on-the-fly/multiple-sites/](http://www.magentocommerce.com/magento-on-the-fly/multiple-sites/)

**应该很容易**

# android - Android webview 仅在 onResume 中加载页面，而不是在 onCreate 中

> ID：13834775
> 
> 赞同：1
> 
> 时间：2012-12-12T07:22:21.777
> 
> 标签：android, android-webview, onresume

我的给定 URL 没有加载此代码，但是如果我按“主页”键并再次单击应用程序图标（即恢复我的活动），那么它会加载。我尝试查看活动生命周期，修改了代码，但仍然无法正常工作。如果我需要进一步澄清我的问题，请告诉我。谢谢。

```
import android.app.Activity;
import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.DialogInterface;
import android.content.IntentFilter;
import android.content.DialogInterface.OnCancelListener;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.pm.ActivityInfo;
import android.graphics.Bitmap;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.http.SslError;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.util.Log;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.Window;
import android.webkit.SslErrorHandler;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.TextView.SavedState;
import android.widget.Toast;

import com.ABC.R;
import com.ABC.util.CustomProgressDialogs;
import com.ABC.util.DeviceCheck;
import com.ABC.util.GlobalFunction;
import com.ABC.util.HTML5WebView;
import com.ABC.util.KeyBoard;
import com.ABC.util.NetworkCheck;

public class CanvasActivity extends Activity {

    private HTML5WebView mWebView;
    private ProgressDialog webPageDialog;
    private Context context;
    private GlobalFunction globalFunc;
    private KeyBoard keyBoard;
    private BroadcastReceiver connectionReceiver;
    String myUrl;
    SharedPreferences prefs;

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {

            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Are you sure you want to exit?")
                    .setCancelable(false)
                    .setPositiveButton("Yes",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int id) {
                                    Log.d("killapp", "killapp");
                                    globalFunc.killApplication(context);
                                }
                            })
                    .setNegativeButton("No",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int id) {
                                    dialog.cancel();
                                }
                            });
            AlertDialog exitDialog = builder.create();
            exitDialog.show();
        }

        return super.onKeyDown(keyCode, event);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        context = CanvasActivity.this;
        mWebView = new HTML5WebView(context);
        // setContentView(mWebView.getLayout());
        final DeviceCheck deviceCheck = new DeviceCheck(context); // change
        // mWebView = new HTML5WebView(this);
        // getWindow().requestFeature(Window.);
        // setContentView()
        // getWindow().
        setContentView(mWebView.getLayout());
        globalFunc = new GlobalFunction();
        webPageDialog = new ProgressDialog(context);

        mWebView.setWebViewClient(new WebViewClient() {

            @Override
            public void onReceivedError(WebView view, int errorCode,
                    String description, String failingUrl) {
                super.onReceivedError(view, errorCode, description, failingUrl);
                Log.d("onReceivedError", failingUrl + " " + errorCode);
                mWebView.loadUrl("file:///android_asset/myerrorpage.html");

            }

            @Override
            public void onReceivedSslError(WebView view,
                    SslErrorHandler handler, SslError error) {
                super.onReceivedSslError(view, handler, error);
                Log.d("onReceivedSslError", "ssl error");
                handler.proceed();
                // To supercede SSL certificate error.
            }

            @Override
            public void onPageStarted(WebView view, String url, Bitmap favicon) {
                super.onPageStarted(view, url, favicon);
                Log.d("page started", "page loading started");
                webPageDialog.show();
                webPageDialog.setContentView(CustomProgressDialogs
                        .iphoneProgressDialog(context));
                webPageDialog.setCancelable(true);

                // change

                webPageDialog.setOnCancelListener(new OnCancelListener() {

                    public void onCancel(DialogInterface dialog) {
                        // TODO Auto-generated method stub
                        webPageDialog.dismiss();
                        globalFunc.killApplication(context);
                    }
                });

            }

            @Override
            public void onPageFinished(final WebView view, final String url) {
                Log.i("onPageFinished", "onPageFinished");
                if (webPageDialog.isShowing()) {
                    webPageDialog.dismiss();
                }
            }
        });

        if (getIntent().getStringExtra("Message") != null) {
            Toast.makeText(getApplicationContext(),
                    getIntent().getIntExtra("push details", 0) + "",
                    Toast.LENGTH_LONG).show();
        }

        keyBoard = new KeyBoard(mWebView, context);
        mWebView.addJavascriptInterface(keyBoard, "KeyBoard");

        prefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());

        /*
         * if(prefs.getString("url",
         * getResources().getString(R.string.MYURL_URL)).trim().equals("")){
         * myUrl=getResources().getString(R.string.MYURL_URL).trim(); }else{
         * myUrl = prefs.getString("url",
         * getResources().getString(R.string.MYURL_URL)).trim(); }
         * mWebView.loadUrl(myUrl);
         */
        myUrl = getResources().getString(R.string.MYURL_URL).trim();
        /*
         * if (!myUrl.equalsIgnoreCase(prefs.getString("url",
         * getResources().getString(R.string.MYURL_URL)).trim())) {
         * 
         * myUrl = prefs.getString("url",
         * getResources().getString(R.string.MYURL_URL)).trim();
         * 
         * }
         */
        // mWebView.loadUrl(myUrl);

        if (new NetworkCheck(context).isOnline()) {

            // change

            webPageDialog.show();
            webPageDialog.setContentView(CustomProgressDialogs
                    .iphoneProgressDialog(context));
            webPageDialog.setCancelable(true);
            webPageDialog.setOnCancelListener(new OnCancelListener() {

                public void onCancel(DialogInterface dialog) {
                    // TODO Auto-generated method stub
                    webPageDialog.dismiss();
                    globalFunc.killApplication(context);
                }
            });

            if (savedInstanceState != null) {
                mWebView.restoreState(savedInstanceState);
            } else {
                mWebView.loadUrl(myUrl);
                /*
                 * if (deviceCheck.isTablet()) {
                 * setRequestedOrientation(ActivityInfo
                 * .SCREEN_ORIENTATION_LANDSCAPE); mWebView.loadUrl(myUrl); }
                 * else {
                 * setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT
                 * ); mWebView.loadUrl(myUrl); }
                 */
            }
        }
    }

    @Override
    protected void onStart() {
        // TODO Auto-generated method stub
        super.onStart();
            mWebView.loadUrl(myUrl);
    }

    @Override
    public void onResume() {
        super.onResume();
        if (!((prefs.getString("url",
                getResources().getString(R.string.MYURL_URL)).trim()))
                .equals("")) {
            myUrl = prefs.getString("url",
                    getResources().getString(R.string.MYURL_URL)).trim();
        }
        if (!(myUrl.equals(mWebView.getUrl()))) {
            // mWebView.loadUrl(myUrl);
        }

        /*
         * if (!mWebView.getUrl().equalsIgnoreCase(prefs.getString("url",
         * getResources().getString(R.string.MYURL_URL)).trim())) {
         * 
         * myUrl = prefs.getString("url",
         * getResources().getString(R.string.MYURL_URL)).trim();
         * mWebView.loadUrl(myUrl); }
         */
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        mWebView.saveState(outState);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        Log.d("CanvasActivity-onOptionsItemSelected", "in option selected");
        switch (item.getItemId()) {
        case R.id.url:
            startActivity(new Intent(this, EditURL.class));
            return true;
        }
        return false;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        Log.d("CanvasActivity-onCreateOptionsMenu",
                "in oncreate option menu");
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menuxml, menu);
        return true;
    }

    @Override
    public void onStop() {
        super.onStop();
        mWebView.stopLoading();
    }

    // onkeydown was here.

    public void startBroadcastService() {
        connectionReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                ConnectivityManager connManager = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
                NetworkInfo mWifi = connManager
                        .getNetworkInfo(ConnectivityManager.TYPE_WIFI);
                ConnectivityManager connManager1 = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
                NetworkInfo mMobile = connManager1
                        .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
                boolean isNoNetwork = intent.getBooleanExtra(
                        ConnectivityManager.EXTRA_NO_CONNECTIVITY, false);
                if (!isNoNetwork) {
                    if (mWifi.isAvailable()) {
                    }
                    if ((mWifi.isConnected() && mWifi.isAvailable())
                            || (mMobile.isConnected() && mMobile.isAvailable())) {
                        if (mWebView.getUrl().contains("myerrorpage")) {
                            mWebView.loadUrl(myUrl);
                        }
                    }
                }
            }
        };
        registerReceiver(connectionReceiver, new IntentFilter(
                "android.net.conn.CONNECTIVITY_CHANGE"));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:49:10.773

在我的 webview 使用相关函数（onPageStarted onPageFinished 和 onReceivedError）在该处理程序中注册后，我创建了一个处理程序并加载了我的 URL，因为我的 webview 需要很长时间来加载页面。这行得通。

```
 handler = new Handler();
                jsInterface = new JSInterface(mWebView, context, uniqueGeneratedkey,
                        handler);
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        jsInterface.initiateProcess();
    /*where initiateProcess() is the method where I register all the overridden
     *functions ie. OnPageStarted() and OnPageFinished();
     */   
                    }
                });
    mWebview.LoadUrl(url); 
```

# java - 使用 Transformer 时出现休眠异常 PropertyNotFoundException

> ID：13834777
> 
> 赞同：2
> 
> 时间：2012-12-12T07:22:26.537
> 
> 标签：java, hibernate

我正在使用 hibernate 和 hql 来查询我的 Java 代码。但我有一个这样的例外：

```
Caused by: org.hibernate.PropertyNotFoundException: Could not find setter for 0 on class [my class]
    at org.hibernate.property.ChainedPropertyAccessor.getSetter(ChainedPropertyAccessor.java:44) 
```

我不明白“0”是什么意思。以下是一些带有示例的详细信息：

我有几张表加入 hql。表格是这样的：

```
A
- A_ID
- NAME

B
- B_ID
- A_ID

C
- C_ID
- B_ID
- LENGTH
- UNIT 
```

课程：

```
@Entity
@Table(name="A")
class A
{
    @Id
    @Column(name="A_ID", updatable=false)
    private Long id;

    @Column(name="NAME", nullable=false, length=10, updatable=false)
    private String name;

    @OneToMany(mappedBy="a", fetch=FetchType.LAZY, cascade={CascadeType.ALL})
    @JoinColumn(name="A_ID", nullable=false)
    private Set<B> bs;

    @Transient
    private Double length;

    @Transient
    private String unit;

    // Setters and getters
    ...
}

@Entity
@Table(name="B")
class B
{
    @Id
    @Column(name="B_ID", updatable=false)
    private Long id;

    @ManyToOne
    @JoinColumn(name="A_ID", nullable=false, insertable=true, updatable=false)
    private A a;

    @OneToMany(mappedBy="b", fetch=FetchType.LAZY, cascade={CascadeType.ALL})
    @JoinColumn(name="B_ID", nullable=false)
    private Set<C> cs;

    // Setters and getters
    ...
}

@Entity
@Table(name="C")
class C
{
    @Id
    @Column(name="C_ID", updatable=false)
    private Long id;

    @ManyToOne
    @JoinColumn(name="B_ID", nullable=false, insertable=true, updatable=false)
    private B b;

    @Column(name="LENGTH", nullable=false, updatable=false)
    private Double length;

    @Column(name="UNIT", nullable=false, length=10, updatable=false)
    private String unit;

    // Setters and getters
    ...
} 
```

hql:

```
select a, sum(c.length) as length, min(c.unit) as unit
from A a
left outer join a.b as b
left outer join b.c as c
group by
a.id
a.name 
```

询问：

```
Query query = session.createQuery(hql.toString()).setResultTransformer(Transformers.aliasToBean(A.class)); 
```

结果是对象“A”的列表，其中包含收集的长度和单位。我不明白为什么我得到这个例外。请给一些建议。

* * *

更新：

我写了一个 ResultTransformer 并输出所有的“别名”来查看问题：

```
-> 0
-> length
-> unit 
```

似乎除了长度和单位之外，它还对待“A”。我的 HQL 应该有问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T09:53:39.160

发现问题：

即使HQL可以正确翻译成sql，但是当ResultTransformer得到结果时，结果中只会有3个字段：

```
1\. A
2\. length
3\. unit 
```

无论 A 中有多少个字段，它们都将被聚合到一个字段“A”中，由于我没有为该字段设置任何别名，因此将其视为“字段 0”。

因此，在我像这样更改 HQL 后问题解决了：

```
select a.id as id, a.name as name, sum(c.length) as length, min(c.unit) as unit
from A a
left outer join a.b as b
left outer join b.c as c
group by
a.id
a.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:26:24.197

@Access(AccessType.FIELD)

添加每个字段的getter和setter

```
 @Entity
    @Table(name="A")
    @Access(AccessType.FIELD)
    class A
    {
        @Id
        @Column(name="A_ID", updatable=false)
        private Long id;

       public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id= id;
    }
} 
```

# ruby - 用于网页数据提取到excel的Ruby

> ID：13834778
> 
> 赞同：0
> 
> 时间：2012-12-12T07:22:28.113
> 
> 标签：ruby

Ruby 可以将网页中的数据提取到 Excel 中吗？比如选择列表、单选按钮值、读取 HTML 表格数据等

谢谢，奥雅纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:41:57.683

是的，它可以。试试 nokogiri ( [http://nokogiri.org/](http://nokogiri.org/) ) 和 Roo ( [https://github.com/Empact/roo](https://github.com/Empact/roo) )。

# php - 如何在 php 中通过打印机打印 mysql 数据库中的数据？

> ID：13834780
> 
> 赞同：-1
> 
> 时间：2012-12-12T07:22:33.543
> 
> 标签：php, mysql

> **可能重复：**
> [通过打印机打印带有打印功能的 php 表](https://stackoverflow.com/questions/10174412/print-php-table-with-print-function-via-printer)

我正在用 php 开发简单的在线购物网站。我想在客户下订单后通过打印机打印客户订单清单。此打印功能仅提供给管理员。我想打印客户在我的家庭网络中下的订单。有什么想法可以连接到我网络中可用的打印机吗？我访问了 php 手册获取以下功能。打印机打开（）..我没有任何线索来使用这个功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:28:47.083

如果您只是在自己的家庭网络中打印，我建议您只制作一个管理网页，显示您需要打印的所有订单。然后使用基本的 CTRL+P 进行打印。

# css - 如何将 bootstrap.css 加载到我的 rails3 应用程序？

> ID：13834781
> 
> 赞同：0
> 
> 时间：2012-12-12T07:22:34.350
> 
> 标签：css, ruby-on-rails-3, ruby-on-rails-3.2

问这个我觉得很菜鸟。现在，我有运行良好且外观良好的 rails 应用程序。我想添加引导程序的圆角样式搜索框。所以我加了

> :class => '表单搜索'

和

> :class => '输入媒体搜索查询'

形成标签。

但它没有改变:(它仍然只是方形框。为什么它没有改变？我怎样才能让它像官方引导网站中的圆角搜索框一样？

让我给你更多关于我的配置的信息。谢谢！！

在 Gemfile

> 宝石'twitter-bootstrap-rails'

在 assets/javascripts/ 我有'bootstrap.js.coffee'

并且 application.js 以

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require twitter/bootstrap
//= require_tree .
//= require jquery.ui.datepicker 
```

在资产/样式表/我有'bootstrap_and_overrides.css.less'

和 application.css 以

```
/*
 * This is a manifest file that'll be compiled into application.css, which will include all the files
 * listed below.
 *
 * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,
 * or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.
 *
 * You're free to add application-wide styles to this file and they'll appear at the top of the
 * compiled file, but it's generally better to create a new file per style scope.
 *
 *= require_self
 *= require_tree .
 *= require jquery.ui.datepicker
 */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:51:24.727

我也经历过和你一样的事情。

认为我发现了问题，事实证明。

将此添加到您的 html 的顶部

```
<!DOCTYPE html> 
```

和形式如

```
<form class="form-search">
  <input type="text" class="input-medium search-query">
  <button type="submit" class="btn">Search</button>
</form> 
```

请让我知道这是否有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:21:45.547

首先，确保您从引导项目主页下载。

第二，您需要的所有文件是：

1.  bootstrap.css 不是最低版本，因为您稍后会更改它。

2.  bootstrap.min.js 因为你不太可能改变它。

3.  您下载的 img 文件夹中的两个 png 图像文件。

第三。将它们放入您的资产文件夹的相关文件夹中。

第四。如果你想让图标出现。您必须将 bootstrap.css 中的图标 png 文件的引用 uri 更改为您当前的文件夹结构，对于它们两者。

# java - foreach 语句中的块是否必须只有一行长？

> ID：13834784
> 
> 赞同：4
> 
> 时间：2012-12-12T07:22:36.767
> 
> 标签：java, coding-style

**我正在阅读Robert C. Martin**编写的名为[Clean Code -A Handbook of Agile Software Craftsmanship](https://rads.stackoverflow.com/amzn/click/com/0132350882)的书，在他的书中他提供了许多有用的技巧来编写好的 Java 代码。

 **其中一个提示是：

> if 语句、else 语句、for 语句等中的块应为一行。可能那行应该是一个函数调用。这不仅使封闭函数保持小，而且还增加了文档价值，因为在块内调用的函数可以有一个很好的描述性名称

对我来说，这是一个非常奇怪的提示，因为从这段代码中：

```
public Map<String, List<Issue>> mapComponentToIssueList(List<Issue> issues) {
    Map<String, List<Issue>> map = new HashMap<String, List<Issue>>();

    for (Issue issue : issues) {
        String componentName = issue.getComponents().iterator().next().getString("name");
        if (map.containsKey(componentName)) {
            map.get(componentName).add(issue);
        } else {
            List<Issue> list = new ArrayList<Issue>();
            list.add(issue);
            map.put(componentName, list);
        }
    }
    return map;

} 
```

使用这个原则，我得到了这个：

```
public Map<String, List<Issue>> mapComponentToIssueList(List<Issue> issues) {
    Map<String, List<Issue>> componentNameIssueListMap = new HashMap<String, List<Issue>>();
    for (Issue issue : issues) {
        populateMapWithComponenNamesAndIssueLists(componentNameIssueListMap, issue);
    }
    return componentNameIssueListMap;
}

private void populateMapWithComponenNamesAndIssueLists(Map<String, List<Issue>> componentNameIssueListMap, Issue issue) {
    String componentName = getFirstComponentName(issue);
    if (componentNameIssueListMap.containsKey(componentName)) {
        componentNameIssueListMap.get(componentName).add(issue);
    } else {
        putIssueListWithNewKeyToMap(componentNameIssueListMap, issue, componentName);
    }
}

private void putIssueListWithNewKeyToMap(Map<String, List<Issue>> componentNameIssueListMap, Issue issue, String componentName) {
    List<Issue> list = new ArrayList<Issue>();
    list.add(issue);
    componentNameIssueListMap.put(componentName, list);
}

private String getFirstComponentName(Issue issue) {
    return issue.getComponents().iterator().next().getString("name");
} 
```

所以基本上代码的大小翻了一番。有用吗？- 也许。

我的示例中的什么代码是所谓的*clean*？我究竟做错了什么？对此你们怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:30:36.833

我认为简化条件本身更有意义。比 if 块的内容，即

```
public void method(){
...
  if( mycondition1 && mycondition2 && mycondition3 && mycondition4 && mycondition5 && mycondition6 && mycondition7 && mycondition8 ) {
   dosomething();
  }
...
} 
```

变成

```
public void method(){
...
  if( conditionsAreTrue() ) {
   dosomething();
  }
...
}

boolean conditionsAreTrue(){
return  mycondition1 && mycondition2 && mycondition3 && mycondition4 && mycondition5 && mycondition6 && mycondition7 && mycondition8;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:29:01.793

坦率地说，我认为这个小费很愚蠢，因为它太极端了。

就个人而言，如果我要对您的功能做任何事情，我会像这样更改它：

```
public Map<String, List<Issue>> mapComponentToIssueList(List<Issue> issues) {
    Map<String, List<Issue>> map = new HashMap<String, List<Issue>>();

    for (Issue issue : issues) {
        String componentName = issue.getComponents().iterator().next().getString("name");
        List<Issue> list = map.get(componentName);
        if (list == null) {
            list = new ArrayList<Issue>();
            map.put(componentName, list);
        }
        list.add(issue);
    }
    return map;
} 
```

好处是：

1.  您只需进行一次地图查找，而不是两次。
2.  呼叫不会在`list.add()`两个地方重复。

现在，如果您想排除某些因素，以下将是一个不错的选择：

```
 List<Issue> list = map.get(componentName);
        if (list == null) {
            list = new ArrayList<Issue>();
            map.put(componentName, list);
        } 
```

如果以上内容出现在多个地方，我肯定会这样做。否则，可能不会（至少最初不是）。**

# asp.net - 在窗口 azure sdk 上迁移 asp.net 网站和错误 WAT070

> ID：13834790
> 
> 赞同：4
> 
> 时间：2012-12-12T07:23:00.073
> 
> 标签：asp.net, azure

我尝试按照[此链接](http://blogs.msdn.com/b/zkap/archive/2012/07/29/how-to-migrate-an-existing-asp-net-website-to-windows-azure.aspx) 将 asp.net 站点迁移到 Windows azure `Convert to Web Application`。尝试调试后出现以下错误。

`Error 106 WAT070 : The referenced assembly path\Something.dll was not found. Please make sure to build the role project that produces this assembly before building this Windows Azure Cloud Service Project. C:\Program Files\MSBuild\Microsoft\VisualStudio\v10.0\Windows Azure Tools\1.8\Microsoft.WindowsAzure.targets 1253 5 TestCloud`

我尝试添加引用，`C:\Program......`但它不起作用。什么是错误以及如何解决此错误。谢谢。

# android - 在单个地理点中显示多个叠加层..？

> ID：13834791
> 
> 赞同：2
> 
> 时间：2012-12-12T07:23:01.453
> 
> 标签：android, google-maps

单击地图中的放置图钉时，我有一张图像要显示在叠加层中。可能，两幅或多幅图像属于同一经纬度。在这种情况下，我想显示所有属于该特定纬度和经度的图像..！我怎样才能做到这一点。？

这是我尝试过的..！

```
 for (int i = 0; i < AllData.neardeallist.size(); i++) {
        mapOverlays = mapview.getOverlays();

        drawable = this.getResources().getDrawable(R.drawable.pin);
        itemizedOverlay = new CustomItemizedOverlay<CustomOverlayItem>(
                drawable, mapview);

        point = new GeoPoint((int) (Double.parseDouble(AllData.neardeallist
                .get(i).getLatitude()) * 1E6),
                (int) (Double.parseDouble(AllData.neardeallist
                        .get(i).getLongitude()) * 1E6));
        CustomOverlayItem overlayItem = new CustomOverlayItem(point,
                StringEscapeUtils.unescapeXml(StringEscapeUtils
                        .unescapeHtml4(AllData.neardeallist.get(i)
                                .getDealTitle())),

                StringEscapeUtils.unescapeXml(StringEscapeUtils
                        .unescapeHtml4(AllData.neardeallist.get(i)
                                .getDescription()))
                        + ":"
                        + AllData.neardeallist.get(i).getDealId()
                        + ":" + AllData.neardeallist.get(i).getDealKey(),
                AllData.neardeallist.get(i).getDealImg());

        itemizedOverlay.addOverlay(overlayItem);
        mapOverlays.add(itemizedOverlay); 
```

我的自定义覆盖类..！

公共类 CustomItemizedOverlay 扩展 BalloonItemizedOverlay {

```
private ArrayList<CustomOverlayItem> m_overlays = new ArrayList<CustomOverlayItem>();
private Context c;

public CustomItemizedOverlay(Drawable defaultMarker, MapView mapView) {
    super(boundCenter(defaultMarker), mapView);
    c = mapView.getContext();
}

public void addOverlay(CustomOverlayItem overlay) {
    m_overlays.add(overlay);
    populate();
}

protected CustomOverlayItem createItem(int i) {
    return m_overlays.get(i);
}

public int size() {
    return m_overlays.size();
}

protected boolean onBalloonTap(int i, CustomOverlayItem item) {

        String[] Address = m_overlays.get(i).getSnippet().split(":");

        Intent intent = new Intent(c, DealDetails.class);
        intent.putExtra("deal_id", Address[1]);
        intent.putExtra("deal_key", Address[2]);
        c.startActivity(intent);

    return true;
}

@Override
protected BalloonOverlayView<CustomOverlayItem> createBalloonOverlayView() {
    // use our custom balloon view with our custom overlay item type:
    return new CustomBalloonOverlayView<CustomOverlayItem>(getMapView()
            .getContext(), getBalloonBottomOffset());
} 
```

}

# ios - iOS DropboxSDK [警告] - ( 400 )

> ID：13834794
> 
> 赞同：0
> 
> 时间：2012-12-12T07:23:20.543
> 
> 标签：ios, dropbox

我演示了示例代码“DBRoulette”，并使用我的 Appkey 和 Appsecret 运行，Access type = App 文件夹，但是当我构建运行图片然后显示此警告时，请给我一些关于此警告的说明而不是显示图片，谢谢你！

![在此处输入图像描述](../Images/4e0437a44509107196134ac685625987.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T07:57:34.250

With reference to [DropBox Api (Standard API errors)](https://www.dropbox.com/developers/reference/api)

400 Bad input parameter. Error message should indicate which one and why.

You can further investigate error object for details!

# c++ - 如何知道从二进制文件读取的记录是否有空字段？C++

> ID：13834797
> 
> 赞同：1
> 
> 时间：2012-12-12T07:23:24.230
> 
> 标签：c++, string, file-io, null, binaryfiles

我在高中，必须使用 Turbo C++ 编译器，我知道这是一个非常古老的编译器，但请理解我的情况。

所以我在员工数据库上编写代码。代码片段：

```
userdb user;
fstream fil;
while(fil.read((char*)&user,sizeof(userdb)))
   {
       cout<<user.name;
       cout<<user.pass;
       cout<<user.age;
       cout<<user.address;
   }
fil.close(); 
```

现在的问题是，如果用户没有在数据库中输入他的地址，编译器就会显示垃圾。

如何检查一个值是否没有任何内容（垃圾）以便不在屏幕上打印它？（我试过 address[0]='\0' 和 strcmp("",address)==0 但这不起作用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:37:39.137

*在这种情况下，空字段*没有任何意义。实际上，您正在从文件中读取 N 个字节，并将它们存储到内存中。您告诉计算机将这部分内存解释为字符串。无需执行任何操作即可知道该字段是否为*空*。

您最好的选择是查看此内存，并尝试*猜测*它是否看起来像一个实际地址。

也许你可以先看看这个地址字符串，存储在一个固定大小的字符数组中，是否有一个终止字符。如果不是，您可能会*猜到*它是无效的，并可能在字符数组的末尾添加此终止字符。

# iphone - FBSession.m 在 iOS6.0 中使用 FacebookSdk.framework 崩溃

> ID：13834799
> 
> 赞同：1
> 
> 时间：2012-12-12T07:23:45.207
> 
> 标签：iphone, objective-c, facebook, ios6

我正在使用新的 FacebookSdk，我的应用在 iOS 6.0 中运行时崩溃。这是崩溃日志

```
*** Assertion failure in -[FBSession close], /Users/jacl/src/release/ios-sdk/src/FBSession.m:404
2012-12-12 12:48:49.993 localfave[1406:1d903] uncaughtExceptionHnadler -- Exception FBSession: should only be used from a single thread
2012-12-12 12:48:49.996 test[1406:1d903] Stack trace: (
    0   CoreFoundation                      0x02d6b02e __exceptionPreprocess + 206
    1   libobjc.A.dylib                     0x01cd6e7e objc_exception_throw + 44
    2   CoreFoundation                      0x02d6ae78 +[NSException raise:format:arguments:] + 136
    3   Foundation                          0x0176cf35 -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 116
    4   localfave                           0x000f6e1d -[FBSession close] + 177
    5   localfave                           0x000f753e +[FBSession setActiveSession:] + 50
    6   localfave                           0x000fa6ee +[FBSession openActiveSessionWithPermissions:allowLoginUI:allowSystemAccount:isRead:defaultAudience:completionHandler:] + 230
    7   test                           0x000f7408 +[FBSession openActiveSessionWithReadPermissions:allowLoginUI:completionHandler:] + 82
    8   test                           0x00002fc6 -[AppDelegate openSessionWithAllowLoginUI:] + 166
    9   test                           0x0008adc5 -[FacebookLoginViewController registerFacebook:] + 165
    10  libobjc.A.dylib                     0x01cea705 -[NSObject performSelector:withObject:withObject:] + 77
    11  UIKit                               0x00c21920 -[UIApplication sendAction:to:from:forEvent:] + 96
    12  UIKit                               0x00c218b8 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 61
    13  UIKit                               0x00ce2671 -[UIControl sendAction:to:forEvent:] + 66
    14  UIKit                               0x00ce2bcf -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 578
    15  UIKit                               0x00ce1d38 -[UIControl touchesEnded:withEvent:] + 546
    16  UIKit                               0x00c5133f -[UIWindow _sendTouchesForEvent:] + 846
    17  UIKit                               0x00c51552 -[UIWindow sendEvent:] + 273
    18  UIKit                               0x00c2f3aa -[UIApplication sendEvent:] + 436
    19  UIKit                               0x00c20cf8 _UIApplicationHandleEvent + 9874
    20  GraphicsServices                    0x03057df9 _PurpleEventCallback + 339
    21  GraphicsServices                    0x03057ad0 PurpleEventCallback + 46
    22  CoreFoundation                      0x02ce0bf5 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
    23  CoreFoundation                      0x02ce0962 __CFRunLoopDoSource1 + 146
    24  CoreFoundation                      0x02d11bb6 __CFRunLoopRun + 2118
    25  CoreFoundation                      0x02d10f44 CFRunLoopRunSpecific + 276
    26  CoreFoundation                      0x02d10e1b CFRunLoopRunInMode + 123
    27  GraphicsServices                    0x030567e3 GSEventRunModal + 88
    28  GraphicsServices                    0x03056668 GSEventRun + 104
    29  UIKit                               0x00c1e65c UIApplicationMain + 1211
    30  test                           0x00002545 main + 213
    31  test                           0x00002425 start + 53
) 
```

代码是

```
/*
 * Opens a Facebook session and optionally shows the login UX.
 */
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
    return [FBSession openActiveSessionWithReadPermissions:nil
                                              allowLoginUI:allowLoginUI
                                         completionHandler:^(FBSession *session,
                                                             FBSessionState state,
                                                             NSError *error) {
                                             [self sessionStateChanged:session
                                                                 state:state
                                                                 error:error];
                                         }];
}

/*
 * Callback for session changes.
 */ 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:47:06.377

只需将这段代码写在你想在 facebook 上发布的地方，然后丢弃你为 facebook 集成所做的每一个功能，我认为你已经在 .h 文件中导入了#import。

```
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook])
    {
        SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

        SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result){
            if (result == SLComposeViewControllerResultCancelled) {
                NSLog(@"ResultCancelled");
            } else

            {
                NSLog(@"Success");
            }

            [controller dismissViewControllerAnimated:YES completion:Nil];
        };
        controller.completionHandler =myBlock;
        [controller setInitialText:@"Awesome App"];
        [controller addImage:photoImage.image];
        [self presentViewController:controller animated:YES completion:Nil];
    } 
```

让我知道它是否有效....!!!

快乐编码！！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:25:19.107

确保您有社交、帐户、广告支持框架，它们是可选的。复制 FacebookSDK.framework、FacebookSDKResources.bundle、FBUserSettingsViewResources.bundle。它们可以在 Facebook Developers for iOS 网页上找到。如果问题再次出现，请尝试删除所有框架并重新添加它们。这是框架问题，与代码无关。

# operating-system - FIFO 页面替换如何工作？

> ID：13834802
> 
> 赞同：6
> 
> 时间：2012-12-12T07:23:51.560
> 
> 标签：operating-system, page-replacement

我正在尝试了解 FIFO 页面替换算法，但我能找到的所有信息都属于以下内容。您能解释一下如何使用参考字符串来评估页面替换算法，使用 FIFO 的特定示例吗？

> 当必须替换页面时，将选择最旧的页面。
> 
> 在我们所有的例子中，参考字符串是
> 
> ## 1, 2, 3, 4, 1, 2, 5, 1, 2, 3, 4, 5
> 
> 3 帧（9 个页面错误） 4 帧（10 个页面错误）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-09T22:35:21.910

页面错误是指内存帧中不存在页面，因此必须向操作系统发送陷阱并且必须将页面添加到帧中。如果没有空间，则需要移除某些东西。FIFO 是一种确定要删除哪个页面的方法。

这个概念是，首先添加到框架中的任何页面都将首先被删除。这就是 FIFO 的含义。使用你的第一个例子。我将查看参考字符串列表，并向您展示内存的外观。

```
1:  1      +1 fault
2:  1,2    +1 fault
3:  1,2,3  +1 fault
4:  2,3,4  +1 fault - 1 gets removed because it was the first added
1:  3,4,1  +1 fault - 2 gets removed because it was the first on the list
2:  4,1,2  +1 fault - 3 got removed..
5:  1,2,5  +1 fault - 4 got removed..
1:  1,2,5  No change - 1 is already present so no page fault was required
2:  1,2,5  No change - 2 is already present in the frame
3:  2,5,3  +1 fault - 1 was removed because it is first
4:  5,3,4  +1 fault - Now 2 got removed
5:  5,3,4  No change - No change because 5 is present in one of the frames. 
```

这给出了总共 9 个故障。

您也可以将其视为最旧的页面被删除。

希望我没有犯错：D

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-06T06:45:56.397

------------ * 先进先出 * -------------

```
Page no. 1 |   1 +1

Page no. 2 |   1 2 +1

Page no. 3 |   1 2 3 +1

Page no. 4 |   1 2 3 4 +1

Page no. 1 |  

Page no. 2 |  

Page no. 5 |   2 3 4 5 +1

Page no. 1 |   3 4 5 1 +1

Page no. 2 |   4 5 1 2 +1

Page no. 3 |   5 1 2 3 +1

Page no. 4 |   1 2 3 4 +1

Page no. 5 |   2 3 4 5 +1

Page Faults = 10 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T07:33:04.743

队列中不可用时替换页面。

去这个链接[FIFO](http://www.scribd.com/doc/73808713/Simulation-FIFO-LFU-and-MFU-Page-Replacement-Algorithms-VB-by-Shaify-Mehta)

这里解释了所有 Page repalacemnt 算法。很好的例子。你很容易理解。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-08-14T09:27:54.053

```
1:  1      +1 fault
2:  1,2    +1 fault
3:  1,2,3  +1 fault
4:  2,3,4  +1 fault - 1 gets removed because it was the first added
1:  3,4,1  +1 fault - 2 gets removed because it was the first on the list
2:  4,1,2  +1 fault - 3 got removed..
5:  1,2,5  +1 fault - 1 got removed..
1:  1,2,5  No change - 1 is already present so no page fault was required
2:  1,2,5  No change - 2 is already present in the frame
3:  2,5,3  +1 fault - 1 was removed because it is first
4:  5,3,4  +1 fault - Now 2 got removed
5:  5,3,4  No change - No change because 5 is present in one of the frames. 
```

# xquery - 如何使用 XQuery 格式化日期

> ID：13834804
> 
> 赞同：1
> 
> 时间：2012-12-12T07:24:00.593
> 
> 标签：xquery

我的日期显示如下

```
01-Nov-2012 12:00:00 AM 
```

我想显示日期是否如上

```
01-Nov-2012 
```

这仅针对少数数据，并非针对所有人，

如何在 Xquery 中执行此操作。

请帮忙

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T20:16:56.907

这将起作用：

```
fn:replace("01-Nov-2012 12:00:00 AM", "\s.*", "") 
```

它用空字符串替换空格和后面的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:28:43.787

你可以使用：

```
tokenize(/test,' ')[1] 
```

或者

```
substring-before(/test,' ') 
```

随着`/test`被替换为日期的适当路径。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-12T11:29:35.440

就是这么简单。

```
convert(VARCHAR(10),datetoformate,106) 
```

而已

# sql - 为什么 SQL Server 转换为 bigint 会导致错误？

> ID：13834805
> 
> 赞同：1
> 
> 时间：2012-12-12T07:24:03.680
> 
> 标签：sql, sql-server, type-conversion

我正在尝试转换`varchar`为`bigint`：

```
select convert(bigint, (select(Replace((select value from sometable), ' ', '')))) 
```

为什么会报错？？？

> *将数据类型 varchar 转换为 bigint 时出错。*

提前致谢

**更新**

这是我正在尝试的查询的一部分：

```
select top 1 * 
into #tblTemp 
from testTable 
where Status = 0 
order by Sno

declare @mobile varchar(50)

set @mobile = (select(Replace((select mobile from #tblTemp), ' ', '')))

--set @mobile = (select( Replace(' 9428017524', ' ', '')))

select convert(bigint, @mobile)

drop table #tblTemp 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:24:32.553

尝试这个

```
select convert(bigint, CASE WHEN ISNUMERIC(@mobile + 'e0') = 0 
                THEN 0 ELSE @mobile)

 -- add this case statement to return only numeric values,     
 -- your query will fail for values like '123-415-6789', '(123)415-6789' 
```

检查您的手机号码数据并查看该列中是否有任何意外值，您可能需要将`'-'`or`'('`或`')'`etc替换为`''`.

```
SeLECT * FROM #tblTmp
WHERE ISNUMERIC(Replace(mobile, ' ', '') + 'e0') = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:37:42.407

我不确定您的真实字符串是什么，但为了安全起见，您可以`ISNUMERIC()`在转换前检查。

```
DECLARE @mobile varchar(50)
SELECT @mobile = REPLACE(mobile, ' ','') --much simplified version
FROM #tblTemp 

IF ISNUMERIC(@mobile)
   SELECT CONVERT(bigint, @mobile)
ELSE
   SELECT 0 
```

只需阅读您的查询，`you don't need a temp table`就在这里。一切都可以在一个查询中完成

```
SELECT TOP (1) CONVERT(bigint,  CASE ISNUMERIC( REPLACE(mobile,' ','') ) 
                                   WHEN 1 THEN REPLACE(mobile,' ','')
                                   ELSE 0 END )
FROM testTable 
WHERE Status = 0 
ORDER By Sno 
```

# c# - 首先开发层并考虑在后期过渡到依赖倒置原则和控制倒置？

> ID：13834806
> 
> 赞同：0
> 
> 时间：2012-12-12T07:24:05.040
> 
> 标签：c#, design-patterns, architecture, dependency-inversion

我有一个会发展的基础应用程序。现在 UI 包括 BLL。DAL 是一个为其目的服务的独立库。

我现在没有时间做所有事情，所以我想绕过有助于解耦的模式（IoC，DI，正如我在[这里](https://stackoverflow.com/questions/13796656/removing-data-access-layer-coupling-from-user-interface)提出的那样）。

我想创建我的 BLL 并直接参考 DAL。这将使我有机会开始创建我现在需要的单独 UI。

我的问题是我能做到吗？我现在可以专注于创建我的 3 层并逐渐应用设计模式以使我的代码更好吗？

**添加信息：**

我有足够的时间，因为我的第一个应用程序不会在第二个应用程序的开发过程中使用。所以我将有时间优化我的编码结构。我能做些什么来尽可能有效地将 UI 拆分为 UI + BLL 的问题。我的想法是，我将在 BLL 中移动 DAL 初始化并将 BLL 初始化放入 UI。还有什么我可以做的，它会在以后应用 IoC/DI 时对我有更多帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:13:25.787

快速获得工作产品通常是最重要的事情，因此有意识地决定跳过一些工程实践可能是正确的决定。

但是，您需要确保做出正确的权衡。重构不是免费的，需要计划好处理技术债务。

一旦最终用户看到您的初始版本，阻力最小的路径通常是继续添加功能而不是重新访问初始设计决策。

换句话说，一旦 1.0 版本发布，您将很难说服管理层您需要花费大量的人工日在后台重新工作，而不会为客户带来可察觉的变化或利益。

如果不了解您的应用程序的详细信息或要求，就不可能给出具体的建议。一般来说，尽管花一些时间预先考虑设计比尝试以某种方式进入开发阶段要快和简单几个数量级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:02:07.907

我非常喜欢这种情况下的“债务”隐喻。您推动交付第一个工作版本并在代码质量和工程最佳实践方面妥协的速度越快，实施任何新的变更请求的时间就越长，也就越难。

由您决定您想要获得多少“债务”。认为从头开始创建产品是展示您的品质的独特机会，如果您在一个月内交付它但需要五个月来实施一些简单的更改请求，您的信誉和声誉将受到影响，他们将取代您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T10:24:28.917

您可以使用这种结构设置“穷人的依赖注入”：

```
public class MyEndClass
{
    private readonly IDependency dependency;

    public MyEndClass(IDependency dependency)
    {
        this.dependency = dependency;
    }

    // temporary constructor until we introduce IoC
    public MyEndClass() : this(new Dependency())
    {
    }
} 
```

# php - 在分布式 CMS 上使用 Facebook/Twitter 登录

> ID：13834808
> 
> 赞同：0
> 
> 时间：2012-12-12T07:24:05.863
> 
> 标签：php, facebook, security, content-management-system

本质上，我所做的是为我正在开发的 CMS 编写登录和身份验证例程。我想加入用户使用 Facebook 或 Twitter 登录的功能，而不必输入他们的用户名和密码。该功能的一部分是网站所有者将能够打开和关闭此功能，具体取决于他们管理网站的安全首选项。

我已经在 Facebook 和 Twitter 中设置了应用程序，尽管我遇到的是请求只会被退回到一个 URL，即使我打算将 CMS 下载并安装在不同的域上并且彼此独立运行。

我尝试设置一个简单的服务，让我的 CMS 可以拨回家（由于 Facebook 和 Twitter 政策，必须将响应集中到这里）。理想情况下，我的服务将检索用户的 facebook 或 twitter ID，并将响应数据输出为 XML 提要，以便我的 CMS 可以解析响应并相应地登录。我被困住的部分是提要每次都会提示用户登录，所以似乎权限不是他们需要的地方，或者数据只是没有适当地跨越域。

我在这里想念什么？

# ruby - 如何在 irb 控制台中使用 open() 从 .txt 文件中打印出基本文本？＃红宝石

> ID：13834809
> 
> 赞同：2
> 
> 时间：2012-12-12T07:24:10.013
> 
> 标签：ruby, cmd, irb

基本上，我真的被困住了。

我有这个文本，我需要这样做： ***print prompt file_again = STDIN.gets.chomp() txt_again = File.open(file_again) puts txt_again.read()***

并且基本上从打印在我的控制台上的 .txt 文件中获取文本！

直接从 irb 使用 File.open()，然后尝试：

```
 File.open("ex15_sample.txt") 
```

^ 我假设它打开了，但我仍然无处可去。我的意思是，它没有标记为变量，我无法打印它。

如果我使用：

```
txt = File.open("ex15_sample.txt") 
```

首先我会遇到一些错误，所以我以后不能使用 print txt。

练习来自[http://ruby.learncodethehardway.org/book/ex15.html](http://ruby.learncodethehardway.org/book/ex15.html)，我正在尝试做一些可选的东西，所以我不会像我之前做的 codeschool 初学者课程那样一无所获。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-12T08:54:25.633

我在 .../Ruby/zintlist/irb 中创建了一个文件 ex15_sample.txt。

```
1.8.6 :082 > File.open("ex15_sample.txt")
Errno::ENOENT: No such file or directory - ex15_sample.txt
    from (irb):82:in `initialize'
    from (irb):82:in `open'
    from (irb):82
    from :0
1.8.6 :086 > Dir.getwd
 => "/.../Ruby/prod/spec" 
1.8.6 :087 > Dir.chdir('../../zintlist/irb')
 => 0 
1.8.6 :088 > Dir.getwd
 => "/.../Ruby/zintlist/irb" 
1.8.6 :089 > File.open("ex15_sample.txt")
 => #<File:ex15_sample.txt> 
1.8.6 :090 > 
```

> 尝试 File.open("ex15_sample.txt") 我假设它打开

在 irb 中，通常你不需要假设，你有一个立即的答案。

```
1.8.6 :090 > txt = File.open("ex15_sample.txt")
 => #<File:ex15_sample.txt> 
1.8.6 :091 > puts txt.read()
This is stuff I typed into a file.
It is really cool stuff.
Lots and lots of fun to have in here.
 => nil 
1.8.6 :092 > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-22T22:01:47.507

```
1.8.6 :090 > txt = open("ex15_sample.txt")
 => #<File:ex15_sample.txt> 
1.8.6 :091 > puts txt.read
This is stuff I typed into a file.
It is really cool stuff.
Lots and lots of fun to have in here.
 => nil 
1.8.6 :092 > 
```

# jquery - jQuery - 在查找表的上一行中查找下一个数字

> ID：13834810
> 
> 赞同：1
> 
> 时间：2012-12-12T07:24:15.150
> 
> 标签：jquery, lookup-tables

这是此处回答的问题的后续问题 - [jQuery - Find Value Based on Input and Lookup Table](https://stackoverflow.com/questions/13525764/jquery-find-value-based-on-input-and-lookup-table)。

该解决方案非常有效。不过有一个悬而未决的问题。

查找表包含破折号，我需要数字进行后续计算。所以我想要做的是（1）找到正确的td之后，（2）我想确认它是一个数字，（3）如果是，使用它，（4）如果不是，去同一列中的前几行，直到找到一个数字。(5) 如果找到，停止检查。(6) 如果没有找到号码，我会显示一条消息。

这是我已经走了多远：

```
jQuery.fn.reverse = [].reverse;

function GetTableValue(column, value, table) {
    var smallestdiff = 0;
    var savedindex = 0;

    $(table).find('td:first-child').reverse().each(function(i) {
        diff = parseFloat($(this).text(),10) - value;
        if (diff >= smallestdiff) {
            smallestdiff = diff;
            savedindex = 12 - i;
            return false;
        }
    });

    tr = $(table).find('tr:eq('+ savedindex +')');
    $(".scc-round").val( tr.find('td:first-child').text() );

    var cell_value = tr.find('td:nth-child('+ column +')').text();

    if( isNaN(cell_value) ) {
        savedindex = savedindex - 1;
    }

    // this is as far as I've gotten

    new_ie_value = tr.find('td:nth-child('+ column +')').text();
} 
```

示例：所以使用下表，如果数字是一（等于或小于 5），并且列是一（超过 1 列），我会得到“-”。我想上升到下一个数字，即“0.6”。

我的方法是从行的值中减去（savedindex）并向上遍历，但我不确定如何编写它。此外，我结束了我确信可以简化的大量编码。

示例表：

```
<table id="ms25">
    <tr>
        <td>20</td>
        <td>-</td>
        <td>-</td>
        <td>-</td>
        <td>-</td>
        <td>-</td>
        <td>4.6</td>
    </tr>
    <tr>
        <td>15</td>
        <td>1.2</td>
        <td>1.2</td>
        <td>0.8</td>
        <td>0.8</td>
        <td>0.6</td>
        <td>3.5</td>
    </tr>
    <tr>
        <td>10</td>
        <td>0.8</td>
        <td>0.8</td>
        <td>0.5</td>
        <td>0.5</td>
        <td>0.4</td>
        <td>2.3</td>
    </tr>
    <tr>
        <td>7.5</td>
        <td>0.6</td>
        <td>0.6</td>
        <td>0.4</td>
        <td>0.4</td>
        <td>0.3</td>
        <td>1.8</td>
    </tr>
    <tr>
        <td>5</td>
        <td>-</td>
        <td>-</td>
        <td>-</td>
        <td>-</td>
        <td>-</td>
        <td>1.2</td>
    </tr>
</table> 
```

帮助/方向将不胜感激。

谢谢。

-斯蒂芬

更新：

我想出了一个解决方案。发布我的解决方案以防万一它可以帮助其他人。

```
function GetTableValue(column, value, table) {
    smallestdiff = Number.MAX_VALUE;
    var savedindex = 0;

    $(table).find('td:first-child').each(function(i) {
        diff = parseInt($(this).text(),10) - parseInt(value, 10);
        if (diff >= 0 && diff < smallestdiff) {
            smallestdiff = diff;
            savedindex = i;
        }
    });

    tr = $(table).find('tr:eq('+ savedindex +')');
    $(".scc-round").val( tr.find('td:first-child').text() );
    new_ie_value = tr.find('td:nth-child('+ column +')').text();

    // only a few are not numbers, so i'll do a quick check
    if(isNaN(parseFloat(new_ie_value, 10))) {
            $(table).find('tr').each(function(i){
                if(isNaN(parseFloat(new_ie_value, 10))) {
                savedindex = savedindex - 1;
            }
            tr = $(table).find('tr:eq('+ savedindex +')');
            $(".scc-round").val( tr.find('td:first-child').text() );
            new_ie_value = tr.find('td:nth-child('+ column +')').text();
        });
    }

    // it's possible that the top td is still not a number
    if(isNaN(parseFloat(new_ie_value, 10))) {
        $(".scc-round").val("call");
    }
} 
```

我相信这可能会更有效，但它确实有效。

# automation - QTP，如何加强团队合作？

> ID：13834811
> 
> 赞同：1
> 
> 时间：2012-12-12T07:24:17.003
> 
> 标签：automation, qtp

我想和团队一起在 QTP 上工作，所以有不同的机器和不同的用户用来对相同的脚本进行更改，是否有任何工具可以增强团队在 QTP 上的工作？

谢谢马奈萨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T08:18:58.437

这就是我们的工作方式：

我们在 SVN 结构中本地工作。

每周我们都会使用本地内容更新在 Quality Center 中上传的脚本。

我们从 QC 运行脚本以获得结果。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:59:20.050

如果您正在谈论版本控制系统，那么您可以采用任何 - TFS、SVN 或其他任何东西。但最好采用开发团队使用的那个——只是为了节省维护另一台服务器的精力。

但是，如果您使用的是 QTP，了解 HP 提供与 Quality Center (HP ALM QC) 的良好集成可能对您很有用。这种集成有助于与相同的脚本一起工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T04:51:39.693

你听说过[TFS](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&cad=rja&ved=0CFIQFjAD&url=http://www.slideshare.net/gueste6f731/working-as-a-team-with-team-foundation-server-2010&ei=wIHaUJ7YD8TAiwKUx4HYDg&usg=AFQjCNFMsQxaRuj9KczVKXgoKP56WmfObA&sig2=jUKDquc715vnxWAClGtuhA&bvm=bv.1355534169,d.cGE)吗？这是维基[链接](http://en.wikipedia.org/wiki/Team_Foundation_Server)

# java - 为什么即使我不选择更新我的数组也会更新

> ID：13834815
> 
> 赞同：0
> 
> 时间：2012-12-12T07:24:28.577
> 
> 标签：java

我有点困惑为什么会这样。如果答案很明显，我很抱歉，我对 Java 还是很陌生。
所以我认为我已经设置了我的`int[] returning`，所以它只在我选择更新时更新，但由于某种原因，它每次`temp[]`更改时都会更新。这是代码。请随时询问某些不清楚的事情，以便我可以帮助您帮助我。

```
 public int[] generateTable(Graph g, int index, int cap, int[] current, int[] edges, int count) {
         int truthAmount = 0;   
         int result = Integer.MAX_VALUE;
         int[] temp = new int[count];
         int k = 0;
         int[] returning = new int[count];
         for(int i = 0; i < Math.pow(2, count); i++){
            for(int j = count-1; j>=0; j--){
               int num = (i/(int) Math.pow(2, j))%2;
               temp[k] = num;
               if(temp[k] == 0)
                  truthAmount++;
               k++;

            }
            if(truthAmount >= cap){
               result = FFAHelper(g, temp, edges);
               if(result < min){
                  min = result;
                  returning = temp;
               }
            }
            k = 0;
            truthAmount = 0;
         }

         return returning;
      } 
```

它基本上做的是生成一个二进制表，其中 0 代表真，1 代表假。如果真数至少是上限的数量，它只会继续执行 FFAHelper 方法（这都是针对图形/边类的，我知道这不是图形/边类的传统设置，但是我不得不同意这样做）所以基本上它不会继续到 FFAHelper 如果没有truthAmount 至少是边缘的数量。同样，问题是`returning`即使它没有通过 if 条件，它也会更新。感谢大家的帮助和时间！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T07:33:24.673

`returning = temp.clone();`用这个代替`returning = temp`. 如果您使用`returning = temp`，则`temp`参考值被分配给`returning`.

因此，每次更新 temp 时，它也会更新返回。

对于这种情况，如果您使用`clone`方法。然后它将***创建一个 temp 的副本并分配给返回***。所以即使你更新`temp`它也不会更新，`returning`因为 temp 和返回的参考值是不同的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T07:30:33.160

```
returning = temp; 
```

基本上当你这样做时，返回和临时引用同一个对象

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T07:35:02.373

当你这样做

```
returning= temp 
```

您是说将整个返回数组等同起来。即在同一内存位置返回 temp

你应该做的是

```
returning= temp.clone() 
```

将一个数字与另一个数字相等。让return和temp占用不同的内存空间

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T07:38:05.580

如果您不想更改返回数组，那么您应该克隆临时并将克隆的值分配给返回数组。

在这种情况下， temp.clone() 可以工作，因为您只有原始类型的数组。如果数组中有复杂的对象，那么您应该注意克隆数组中的每个对象，因为 temp.clone() （默认实现）不会进行真正的深层复制。

# gruntjs - 在 grunt.js 中出现混合空格和制表符错误，如何删除它？

> ID：13834818
> 
> 赞同：1
> 
> 时间：2012-12-12T07:24:32.513
> 
> 标签：gruntjs

我的 jshint 代码是：

```
 jshint: {
      options: {
        curly: true,
        eqeqeq: true,
        immed: true,
        latedef: true,
        newcap: true,
        noarg: true,
        sub: true,
        undef: true,
        boss: true,
        eqnull: true,
        browser: true
      },
      globals: {
        jQuery: true
      }
    }, 
```

我称之为：

```
 grunt.registerTask('foo', 'lint');// For running in cmd you need grunt.cmd foo. 
```

我该如何克服这个错误？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T20:36:14.457

您可以修复混合的制表符和空格:)

或者添加`smarttabs`忽略错误的选项：

```
jshint: {
  options: {
    smarttabs: true
  }
} 
```

或者，如果您只想禁用每个文件的警告，请将其添加到包含错误的文件的顶部：

```
/*jshint smarttabs:true */ 
```

JSHint 文档： http: [//www.jshint.com/docs/](http://www.jshint.com/docs/)

# function - 通过原型访问 viewModel 函数

> ID：13834823
> 
> 赞同：1
> 
> 时间：2012-12-12T07:24:51.150
> 
> 标签：function, knockout.js, viewmodel

我正在尝试为我的视图模型创建一个通用容器，以便可以在没有特定视图模型知识的情况下将常用方法应用于各种对象。容器和包含的对象如下所示：

```
var containedViewModel = function() {
  var self = this;
  self.id = ko.observable();
    ...
  self.doSomething = function() {
  alert('here');
  };

}

var ContainerModel = function(cRoot, cModel, cName) {
  var self = this;

  self.rootModel  = cRoot;                       // Root view model
  self.viewName   = cName;                       // viewModel container name
  self.refModel   = cModel;                      // viewModel reference
  self.viewModel  = ko.observable();             // Single view model
  self.viewModels = ko.observableArray();        // Array of view models

  self.init = function(rootModel) {
    self.viewModel = new self.refModel();
  } 
  self.doSomething = function() {
    self.rootModel.doSomeThing();    // This works
    self.refModel.doSomeThing();     // This does not work
    self.viewModel.doSomeThing();    // This does not work as well
  } 
```

}

容器将通过如下调用创建：

```
var ParnentModel = function() {
  var self = this;
  self.id = ko.observable();
    ...
  self.container = new ContainerModel(self, containedViewModel, 'modelName');
    ...
  self.doSomething = function() {
  alert('here');
  };
}; 
```

在此示例中，rootModel 函数访问工作正常，因为实际的视图模型已创建并传递给容器。使用 'new self.refModel()' 和 'self.rootModel.doSomeThing()' 似乎可以按预期工作。当我尝试使用'self.viewModel.doSomeThing();' 淘汰赛抱怨它不是一个功能。

是否可以通过引用 viewModel 来访问 viewModels 函数。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:53:20.393

您快到了。请参阅我在代码中的评论。

```
var containedViewModel = function() {
  var self = this;
  self.id = ko.observable();
  self.doSomething = function() {
    alert('contained');
  };
  // I would prefer to have return self here
};

var ContainerModel = function(cRoot, cModel, cName) {
  var self = this;

  self.rootModel  = cRoot;                       // Root view model
  self.viewName   = cName;                       // viewModel container name
  self.refModel   = cModel;                      // viewModel reference
  self.viewModel  = ko.observable();             // Single view model
  self.viewModels = ko.observableArray();        // Array of view models

  self.init = function(rootModel) {
    // you meant this, right?
    self.viewModel(new self.refModel());
  }; 
  self.doSomething = function() {
    self.rootModel.doSomething();    // This works
    //self.refModel.doSomeThing();     // This does not work
    // need to unwrap the value, fixed typo
    self.viewModel().doSomething();    // This does not work as well
  };
};

var ParnentModel = function() {
  var self = this;
  self.id = ko.observable();
  self.container = new ContainerModel(self, containedViewModel, 'modelName');
  // missing call to init
  self.container.init();
  self.doSomething = function() {
      alert('parent');
  };
};

// execution
var p = new ParnentModel();
p.container.doSomething(); 
```

[http://jsbin.com/arezew/1/edit](http://jsbin.com/arezew/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:41:10.367

我认为您应该在像这样传递给 ContainerModel 时创建包含模型的实例：

```
self.container = new ContainerModel(self, new containedViewModel, 'modelName'); 
```

# browser - 浏览器是否会因大量请求而超时？

> ID：13834824
> 
> 赞同：5
> 
> 时间：2012-12-12T07:24:51.010
> 
> 标签：browser, upload, timeout

假设我使用网络浏览器上传一个巨大的文件（可能是几个 GB），所有数据可能需要几个小时才能传输到服务器。假设服务器对文件上传的大小没有限制，它只是不断地吞噬数据。浏览器会认真工作几个小时，直到所有数据都传输完毕？或者浏览器会在一段时间后提示某些错误？还是特定于浏览器的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:47:56.673

A request will always timeout at some point, regardless of the web server you are using (Apache, IIS, etc.) The defaults are usually a couple of minutes, so you will need to increase those. There are also other limits such as maximum file size that you would have to increase. An example of doing this with PHP/Apache can be found here: [Increase max_execution_time in PHP?](https://stackoverflow.com/questions/8744107/increase-max-execution-time-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:28:26.400

浏览器会报错页面请求超时

# mysql - 来自两个表的 MySql 复杂查询

> ID：13834825
> 
> 赞同：1
> 
> 时间：2012-12-12T07:25:10.077
> 
> 标签：mysql, sql, select, join

我有两个表“USERS”和“CALENDER”，在日历表用户中放置他的可用日期，表示一对多的关系。

现在我想按可用性日期获取用户列表（今天的日期意味着今天可用），即：我想在顶部显示今天可用的用户，然后显示未来可用的用户，然后显示那些没有的用户t 任何可用性（即：日历中没有记录）。

我正在尝试以下查询：

```
SELECT u.first_name, c.date
FROM  users AS u
LEFT JOIN calendar AS c ON (c.uid = u.id)
GROUP BY u.id
ORDER BY DATE(c.date) ASC 
```

但这将首先记录那些在日历中没有任何可用性的用户，然后是那些有可用性但过去的用户。结果如下：

```
User1   NULL                                          User13    2012-12-12 00:00:00
User2   NULL                                          User12    2012-12-12 00:00:00
User3   NULL                                          User10    2012-12-23 00:00:00                      
User4   NULL                                          User10    2012-12-24 00:00:00
User5   NULL                                          User9     2012-12-25 00:00:00
User6   NULL                 - Want To look this =>   User8     2012-12-27 00:00:00
User7   2012-09-20 00:00:00                           User7     2012-12-28 00:00:00
User8   2012-09-29 00:00:00                           User1     NUL
User9   2012-10-25 00:00:00                           User2     NUL
User10  2012-10-26 00:00:00                           User3     NUL
User11  2012-10-27 00:00:00                           User4     NUL
User12  2012-12-05 00:00:00                           User5     NUL
User13  2012-12-10 00:00:00                           User6     NUL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:28:48.630

修改你的`ORDER BY`条款

```
ORDER BY IF(DATE(c.date) IS NULL, 1, 0), DATE(c.date) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:29:02.573

没有考虑这么多，您是否尝试过使用

```
... ORDER BY DATE(c.date) DESC 
```

它将排序`DESC`结尾，而不是您的显式（和默认）`ASC`结尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:12:46.587

这个问题可以通过放置子查询并获取未来日期然后以升序形式显示与问题完全相同，即：所有可用日期记录在顶部然后一些未来记录然后显示空值（如果有人没有日历中的日期）。

```
SELECT u.first_name, 
 (
  SELECT DATE( c.date ) FROM calendar AS c
  WHERE c.uid = u.id
  AND DATE( c.date ) >= CURDATE( )
  ORDER BY DATE( c.date ) ASC
  LIMIT 1
) AS availability
FROM users AS u
GROUP BY u.id
ORDER BY IF( availability IS NULL , 1, 0 ) , availability 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T07:36:54.737

使用 IF 函数将您的空值映射到将根据您的需要进行排序的其他内容，例如过去的日期，或者如果适合您，甚至可以是字符串。

[http://www.java2s.com/Code/SQL/Function/MappingNULLValuestoOtherValuesforDisplay.htm](http://www.java2s.com/Code/SQL/Function/MappingNULLValuestoOtherValuesforDisplay.htm)

# google-chrome-extension - 使用 libuv 监视文件更改

> ID：13834827
> 
> 赞同：1
> 
> 时间：2012-12-12T07:25:11.887
> 
> 标签：google-chrome-extension, google-chrome-devtools, google-nativeclient, libuv

我想为开发人员工具构建一个 Chrome 扩展，以监视给定文件夹的更改并刷新/更新浏览器中的 CSS/JS/图像文件。

已经有类似的方法：

[http://tin.cr](http://tin.cr)

Tin.cr 使用的 NPAPI 未经过沙盒处理并且存在一些安全问题，因此我无法在一些公司政策有严格规定的开发环境中使用它（特别是在金融行业）。

另一种方法是使用 NaCl（Chrome 的 Native Client，沙盒）。

我是一名前端开发人员，对 C 知之甚少，所以我需要一些帮助。

如何查看/监控 libuv 中的文件更改？如果有人可以提供代码片段，我将不胜感激。

根据我从文档中了解到的情况，libuv 将允许扩展跨平台工作，我错了吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:54:39.673

NaCl 没有 API 来观察磁盘上给定文件夹的变化。你可以使用谷歌云端硬盘吗？Google Drive 有一个用于获取已更改文件列表的 API：[https](https://developers.google.com/drive/v2/reference/changes/list) ://developers.google.com/drive/v2/reference/changes/list 。

# fortran - BLAS DGEMM：我可以将 C 作为 A 或 B 传递吗？

> ID：13834830
> 
> 赞同：4
> 
> 时间：2012-12-12T07:25:14.973
> 
> 标签：fortran, lapack, blas

我想执行一串矩阵乘法，如果可以避免的话，我宁愿不分配新的矩阵。例如，我想计算 C = C * B （所以我将 C 传递为`A`and `C`）

我可以这样做吗（由于将两者都`dgemm`标记为变量）？`A``B``in`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T07:32:25.903

我什至使用过的 BLAS 实现都没有可以就地工作的 dgemm。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T08:12:15.890

不，你永远不能这样做，它与 BLAS 实现无关。看

[通过 GEMV 与输入向量相同的输出来实现破坏性矩阵应用程序是否安全？](https://stackoverflow.com/questions/9924948/is-it-safe-to-pass-gemv-the-same-output-as-input-vector-to-achieve-a-destructiv/9925720#9925720)

# browser - 选项卡式浏览器错误“变量‘NewBrowser’在被赋值之前被使用。运行时可能导致空引用异常。”

> ID：13834832
> 
> 赞同：1
> 
> 时间：2012-12-12T07:25:32.650
> 
> 标签：browser, web

我收到了关于我的 Tabbed WebBrowser 的错误，我看过 YouTube 上的教程，我有 VB 2008 但他有 2010 版本，这可能是原因。

这是下面的代码，我突出显示了导致此问题的项目。

```
Dim NewBrowser As CustomBrowser
Dim NewTab As New TabPage
NewBrowser.Tag = NewTab
NewTab.Tag = ***NewBrowser***
TabControl1.TabPages.Add(NewTab)
NewTab.Controls.Add(NewTab)
NewBrowser.Dock = DockStyle.Fill
NewBrowser.Navigate(URL) 
```

我需要一个具体的答案，因为我在 StackOVERFLOW 上查看了其他任何地方，答案是无关紧要的。

谢谢你

# c# - 从winform中的列表框中删除项目

> ID：13834837
> 
> 赞同：0
> 
> 时间：2012-12-12T07:26:17.130
> 
> 标签：c#, winforms, listbox

我正在使用 VS2010、C#、.Net 4.0 和 WinFormApplication。

我有一个从数据源填充的列表框。我想在双击时删除一个项目。

我在某处读到，如果我从数据源填充列表框，则无法删除任何项目。这是真的？如果没有，那么我该如何删除单个项目？

我尝试了以下方法：

```
listbox1.Items.Remove(listbox1.SelectedIndex);

listbox1.Items.Remove(listbox1.SelectedIndex);

lbTableColumns.Items.Remove(lbTableColumns.SelectedItem); 
```

导致以下错误：

> 错误：设置 DataSource 属性时无法修改 Items 集合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:46:54.543

使用 a 时`DataBinding`，您无法从 中删除项目`ListBox`，就像错误状态一样。如果对象在 中发生更改`DataSource`，但已从演示文稿中删除，会发生什么情况？

如果您正在使用数据源，则需要从数据源本身中删除对象。尝试这样的事情：

```
IList<MyObj> myList = new List<MyObj>();

private void DataBind()
{
    myListBox.BeginUpdate();
    myListBox.DataSource = myList;
    myListBox.EndUpdate();
}

private void OnMyListBoxItemDoubleClicked(object sender, EventArgs e)
{
    myList.RemoveAt(myListBox.SelectedIndex);
    DataBind();
} 
```

# iphone - 在 iOS 5 和 iOS 6 中捕获不同的 MKMapView 屏幕截图？

> ID：13834838
> 
> 赞同：0
> 
> 时间：2012-12-12T07:26:20.950
> 
> 标签：iphone, ios5, ios6, mkmapview

我想获取地图视图的屏幕截图。所以我使用了以下代码。此代码在 ipad 和模拟器中完美运行，但不适用于 ipod。iPad 有 iOS 6.0，我的 xcode 是 4.2.1，iPod 有 iOS 5.0。

```
- (UIImage*) renderToImage
{
    UIGraphicsBeginImageContext(mapView.frame.size);
    [mapView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
    return viewImage;
} 
```

问题是，我在 iPad、iPod 和模拟器中得到了相同的图像，但没有对应手动截屏和编程截屏的名称。iPod 中的名称非常大，同时 iPad 和模拟器中的名称是正常的，还有一些名称在 iPod 中是不可见的。这是我的问题。

以下图片是：

此图像属于 iPod 手动截屏。

![在此处输入图像描述](../Images/101d0f5fc7135cd3ff27fc020249e605.png)

此图像属于 iPod 程序屏幕捕获。

![在此处输入图像描述](../Images/7f59e76b242c6bbf0b91979997b2da45.png)

我不知道问题出在哪里。请任何人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:57:27.353

问题就`UIGraphicsBeginImageContext(mapView.frame.size);`在这里。我刚刚将其替换为 `UIGraphicsBeginImageContextWithOptions(mapView.frame.size, NO, 0.0);`. 然后它在 iOS 5.0 中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T23:40:44.833

您可以通过查看每种情况下的应用程序来判断，不是您的屏幕截图代码神奇地创建了不同的地图，*底层地图是不同的*。

# c++ - 没有 Boost 的 BOOST_FOREACH？

> ID：13834842
> 
> 赞同：0
> 
> 时间：2012-12-12T07:26:52.103
> 
> 标签：c++, foreach, boost-foreach

是否有一个[`BOOST_FOREACH`](http://www.boost.org/doc/libs/1_52_0/doc/html/foreach.html)不需要Boost的“for each”宏的实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T07:26:52.103

我做了一个。
它应该适用于 GCC 和 MSVC 中的 C++11 r-value 引用，但我还没有很好地测试它，所以如果有任何错误，请告诉我。
**编辑：**我添加了对字符串的支持。

```
#include <iterator>
#include <utility>

#define foreach(v, r) \
    if (fe_detail::any const &fe_r_ = \
        fe_detail::make_range(r)) { } else \
    if (fe_detail::any const &fe_b_ = \
        fe_detail::begin(fe_r_, ((void)0, 1) ? NULL : fe_detail::twrap(r))) { } else \
    if (fe_detail::equal( \
        fe_b_, \
        fe_detail::end(fe_r_, ((void)0, 1) ? NULL : fe_detail::twrap(r)), \
        ((void)0, 1) ? NULL : fe_detail::twrap(r))) { } else \
    for (bool fe_c_ = false; \
        !fe_c_ && !fe_detail::equal( \
            fe_b_, \
            fe_detail::end(fe_r_, ((void)0, 1) ? NULL : fe_detail::twrap(r)), \
            ((void)0, 1) ? NULL : fe_detail::twrap(r)); \
        fe_detail::advance(fe_b_, 1, ((void)0, 1) ? NULL : fe_detail::twrap(r))) \
    for (v = (fe_detail::move(*fe_detail::iter(fe_b_, ((void)0, 1) ? NULL : fe_detail::twrap(r)))); \
        fe_c_ = !fe_c_; )

namespace fe_detail
{
    // Container traits
    template<class C, class It> struct CT
    {
        typedef It It;
        static It begin(C &c) { return c.begin(); }
        static It end(C &c) { return c.end(); }
    };

    // Range traits
    template<class R> struct RT : public CT<R, typename R::iterator> { };
    template<class R> struct RT<R const> : public CT<R const, typename R::const_iterator> { };
    template<class R> struct RT<R &> : public RT<R> { };

    template<class T, bool B = T::value> struct enable_if;
    template<class T> struct enable_if<T, true> { typedef T type; };

    template<class T> struct is_char { static bool const value = false; };
    template<class T> struct is_char<T const> : public is_char<T> { };
    template<class T> struct is_char<T volatile> : public is_char<T> { };
    template<> struct is_char<char> { static bool const value = true; };
    template<> struct is_char<wchar_t> { static bool const value = true; };

    template<class Ch> struct RT<Ch *> : enable_if<is_char<Ch> >
    {
        typedef Ch *It;
        static It begin(It a) { return &a[0]; }
        static It end(It a) { return &a[std::char_traits<Ch>::length(a)]; }
    };

    template<class R, size_t N> struct RT<R[N]>
    {
        typedef R *It;
        static It begin(It a) { return &a[0]; }
        static It end(It a) { return &a[N - (((void)0, is_char<R>::value) ? 1 : 0)]; }
    };

    template<class It> struct RT<std::pair<It, It> >
    {
        typedef It It;
        static It begin(std::pair<It, It> const a) { return a.first; }
        static It end(std::pair<It, It> const a) { return a.second; }
    };

    struct any { operator bool() const { return false; } };

    template<class T> struct type_wrap { type_wrap(bool = false) { } };

    template<class T> class wrap : public any
    { wrap &operator =(wrap const &); public: mutable T v; wrap(T v) : any(), v(v) { } };

    template<class T> class wrap<T const> : public any
    { wrap &operator =(wrap const &); public: T const v; wrap(T const v) : any(), v(v) { } };

    template<class T, size_t N> class wrap<T[N]> : public any
    { wrap &operator =(wrap const &); public: T (&v)[N]; wrap(T (&v)[N]) : any(), v(v) { } };

    template<class T> class wrap<T const &> : public wrap<T const>
    { wrap &operator =(wrap const &); public: wrap(T const &v) : wrap<T const>(v) { } };

    template<class T, size_t N> wrap<T[N]> make_range(T (&r)[N]) { return r; }
    template<class T, size_t N> type_wrap<T[N]> twrap(T (&r)[N]) { throw 0; }
    template<class It> type_wrap<std::pair<It, It> > twrap(std::pair<It, It> const &p) { throw 0; }

#if defined(_MSC_VER) && _MSC_VER >= 1600 || defined(__RVALUE_REFERENCE) || defined(__GXX_EXPERIMENTAL_CXX0X__)
    template<class R> struct RT<R &&> : public RT<R> { };
    template<class T> class wrap<T &&> : public wrap<T> { public: wrap(T &&v) : wrap<T>(std::move(v)) { } };

    template<class R> wrap<R &&> make_range(R &&r) { return wrap<R &&>(std::forward<R>(r)); }
    template<class R> type_wrap<R> twrap(R &&) { throw 0; }
    using std::move;
#else
    template<class R> wrap<R> make_range(R &r) { return r; }
    template<class R> wrap<R const &> make_range(R const &r) { return r; }

    template<class R> type_wrap<R> twrap(R &) { throw 0; }
    template<class R> type_wrap<R const &> twrap(R const &) { throw 0; }
    template<class T> T &move(T &v) { return v; }
    template<class T> T const &move(T const &v) { return v; }
#endif

    template<class R> wrap<typename RT<R>::It> begin(any const &r, type_wrap<R>)
    { return RT<R>::begin(static_cast<wrap<R> const &>(r).v); }

    template<class R> wrap<typename RT<R>::It>   end(any const &r, type_wrap<R>)
    { return RT<R>::end  (static_cast<wrap<R> const &>(r).v); }

    template<class R> bool equal(any const &i, any const &j, type_wrap<R>)
    { return static_cast<wrap<typename RT<R>::It> const &>(i).v == static_cast<wrap<typename RT<R>::It> const &>(j).v; }

    template<class R> void advance(any const &i, typename std::iterator_traits<typename RT<R>::It>::difference_type const d, type_wrap<R>)
    { return std::advance(static_cast<wrap<typename RT<R>::It> const &>(i).v, d); }

    template<class R> typename RT<R>::It &iter(any const &i, type_wrap<R>)
    { return static_cast<wrap<typename RT<R>::It> const &>(i).v; }  
} 
```

你可以像这样使用它：

```
#include <vector>
#include <iostream>

std::vector<int> make_vect()
{
    std::vector<int> v;
    v.push_back(5);
    v.push_back(8);
    v.push_back(10);
    return v;
}

int main()
{
    foreach (int c, make_vect())
    {
        std::cout << c << std::endl;
    }
} 
```

# c# - using 指令中的赋值

> ID：13834845
> 
> 赞同：1
> 
> 时间：2012-12-12T07:26:57.517
> 
> 标签：c#, episerver-6-r2

我刚刚找到以下代码，不知道为什么会这样。冲突风险？

```
using DiffTreeNode = EPiServer.Enterprise.Diff.TreeNode; 
```

然后在课堂上照常使用。

你为什么要做这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T07:38:25.377

这是一个`using` *指令*（见[这里](http://msdn.microsoft.com/en-us/library/sf0df423.aspx)）而不是一个`using`声明，并且非常类似于`using System.Text;`.

* * *

一个`using` *语句*允许你自动清理东西，而不用乱搞`try/catch/finally`块：

```
using (Sometype xyzzy = new SomeType()) {
    // Do whatever with xyzzy
}
// xyzzy is gone, pining for the fjords. 
```

* * *

该`using` *指令*导入一个命名空间，因此您不必显式使用命名空间来为其中的所有类型添加前缀。您的特定变体基本上为命名空间创建了一个*别名*`EPiServer.Enterprise.Diff.TreeNode`，因此您可以简单地将其引用为`DiffTreeNode`超出该点。换句话说，在指令之后：

```
using DiffTreeNode = EPiServer.Enterprise.Diff.TreeNode; 
```

以下两个语句是等价的：

```
EPiServer.Enterprise.Diff.TreeNode.SomeType xyzzy =
    new EPiServer.Enterprise.Diff.TreeNode.SomeType();
DiffTreeNode.SomeType xyzzy = new DiffTreeNode.SomeType(); 
```

我知道我想输入哪个。

* * *

现在你可能会问为什么，如果指令可以让你自己使用命名空间中的类型，为什么我们不这样做：

```
using EPiServer.Enterprise.Diff.TreeNode;
SomeType xyzzy = new SomeType(); 
```

我敢打赌，虽然我会等待 Jon Skeet 之类的人来确认或否认这一点:-)，但它是为了涵盖您有两个或多个名称空间具有相同名称类型的情况。这将允许：

```
using Bt = Trees.BinaryTree;       // Has Tree type.
using Rbt = Trees.RedBlackTree;    // Annoyingly, also has Tree type.
Tree t = new Tree();               // Is this binary or redbalck?
Bt.Tree t1 = new Bt.Tree();        // Definite type.
Rbt.Tree t2 = new Rbt.Tree();      // Ditto. 
```

# ruby - 将数组的每个元素传递给函数的更短方法

> ID：13834846
> 
> 赞同：16
> 
> 时间：2012-12-12T07:27:03.243
> 
> 标签：ruby

在 Ruby 中，您可以将 map 函数应用于数组的每个元素：

```
@files.map { |f| f.read) } 
```

其中有语法糖：

```
@files.map(&:read) 
```

有没有等价物

```
@files.map { |f| read(f) } 
```

那是更简洁，类似于上面的？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-12T07:27:45.097

你可以这样做

```
@files.map(&method(:read)) 
```

但请注意[性能](https://stackoverflow.com/questions/6976629/is-the-methodmethod-name-idiom-bad-for-perfomance-in-ruby)。

# javascript - 如何使此验证适用于克隆的输入

> ID：13834847
> 
> 赞同：0
> 
> 时间：2012-12-12T07:27:05.850
> 
> 标签：javascript, jquery

我有这个 id 验证字段，我只需要知道如何使验证以及 keydown 和 keyup 函数在克隆输入上工作。插入的数据也将转移到重复字段。

js小提琴-http [://www.jsfiddle.net/dawidvdh/xRh9v/](http://www.jsfiddle.net/dawidvdh/xRh9v/)

继承人的js：

```
$(document).ready(function() {
    idAmount = [0,1,2,3,4,5,6,7,8,9,10,12,13];
    var idinc =1;
    var id_val;

    jQuery(idAmount).each(function() {
        var index = "id"+idinc++;
        var id_input = "<input class='id' id="+'"'+index+'"'+" "+" maxlength='1' />";
        id_val = $(this).attr('value');
        jQuery(id_input).appendTo('#id');
    });

    $("#clone").click(function () {
        var clonedObj=$('#id').clone().insertAfter("#id");
        clonedObj.find('.id').each(function(){
           this.id='id' + idinc++;
        });
    });

function Validate() {
    jQuery('#error p').remove();

    var id_val = '';
    $('.id').each(function(){ id_val+=($(this).val());});
    var idNumber = id_val;
    console.log(id_val);
    var correct = true;

    if (idNumber.length != 13 || !isNumber(idNumber)) {
        correct = false;
    }

    var tempDate = new Date(idNumber.substring(0, 2), idNumber.substring(2, 4) - 1, idNumber.substring(4, 6));
    console.log(tempDate);
    var id_date = tempDate.getDate();
    var id_month = tempDate.getMonth();
    var id_year = tempDate.getFullYear();
    var currentYear = (new Date).getFullYear();
    var age = currentYear - id_year;
    var fullDate = id_date + "-" + (id_month + 1) + "-" + id_year;

    if (!((tempDate.getYear() == idNumber.substring(0, 2)) && (id_month == idNumber.substring(2, 4) - 1) && (id_date == idNumber.substring(4, 6)))) {
        correct = false;
    }

    // get the gender
    var genderCode = idNumber.substring(6, 10);
    var gender = parseInt(genderCode) < 5000 ? "Female" : "Male";

    // get country ID for citzenship
    var citzenship = parseInt(idNumber.substring(10, 11)) == 0 ? "Yes" : "No";

    // apply Luhn formula for check-digits
    var tempTotal = 0;
    var checkSum = 0;
    var multiplier = 1;
    for (var i = 0; i < 13; ++i) {
        tempTotal = parseInt(idNumber.charAt(i)) * multiplier;
        if (tempTotal > 9) {
            tempTotal = parseInt(tempTotal.toString().charAt(0)) + parseInt(tempTotal.toString().charAt(1));
        }
        checkSum = checkSum + tempTotal;
        multiplier = (multiplier % 2 == 0) ? 1 : 2;
    }
    if ((checkSum % 10) != 0) {
        correct = false;
    };

    // if no error found, hide the error message
    if (correct) {
        jQuery('.id').css("border","1px solid #9A8B7D");

        // clear the result div
        jQuery('#result').empty();
        // and put together a result message
        jQuery('#result').append('<p>South African ID Number:   ' + idNumber + '</p><p>Birth Date:   ' + fullDate + '</p><p>Gender:  ' + gender + '</p><p>SA Citizen:  ' + citzenship + '</p><p>AGE:  ' + age + '</p>');
        jQuery('#status').html("correct");
    }
    // otherwise, show the error
    else {
        jQuery('.id').css("border","1px solid #FF0000");
        jQuery('#status').html("incorrect")
    }

    return false;
}

function isNumber(n) {
    return !isNaN(parseFloat(n)) && isFinite(n);
}

$('input.id').keydown(function(e){
    if(e.keyCode == 8){
        $(this).val('');
        $(this).prev().val('');
        $(this).prev().focus();
         Validate()
    }
});  

$('input.id').on('keyup', function(){
    if (this.value.match(/\d+/)) {
        var $this = $(this);
        if ($this.next('input').length) {
          $this.next().focus();
        } else {
          Validate()
        }  
    }
});

    $(".id").keydown(function(event) {
        // Allow: backspace, delete, tab, escape, and enter
        if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || 
             // Allow: Ctrl+A
            (event.keyCode == 65 && event.ctrlKey === true) || 
             // Allow: home, end, left, right
            (event.keyCode >= 35 && event.keyCode <= 39)) {
                 // let it happen, don't do anything
                 return;
        }
        else {
            // Ensure that it is a number and stop the keypress
            if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) {
                event.preventDefault(); 
            }   
        }
    });
}); 
```

HTML：

```
<div id="id">
<span id="label">ID NUMBER:</span>
<span id="status"></span>
    </div>
<button id="clone">clone</button>

<div id="result"> </div> 
```

CSS：

```
#error {
    color: red;
    border: 1px solid red;
    padding: 5px;
    display: none;
}

#result {
    padding: 20px;
}

.id {
    width:16px;
    height:16px;
    border:1px solid #9A8B7D;
    margin:0;
    float:left;
    text-align:center;
    font-family:'itc_avant_garde_gothic_bookOb',Helvetica,sans-serif;
    font-size:11pt;
    padding:2px;
}
#label {
    float:left;
    font-family:'itc_avant_garde_gothic_bookOb',Helvetica,sans-serif;
    line-height:18px;
    font-size:11pt;
    margin-right:10px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:29:12.090

我唯一一次看到你打电话`Validate`是在这里：

```
$('input.id').on('keyup', function(){
    //code
}); 
```

和这里

```
$('input.id').keydown(function(e){
    //code
}); 
```

这意味着问题是`event handler is not delegated to a static element`

```
$(document).on('keyup', 'input.id', function(){
    //code
});

$(document).on('keydown', 'input.id', function(){
    //code
}); 
```

将它绑定到文档将确保任何动态创建的元素都将具有与同一选择器的任何静态元素相同的事件委托给它们。

最后一部分忘记了。

```
clonedObj.find('.id').each(function(){
   this.id='id' + idinc++;
   this.value = ''; //simply add this to remove the value
}); 
```

虽然，因为您使用的是 jQuery，所以您应该尽量坚持使用 jQuery。

```
clonedObj.find('.id').each(function(){
     $(this).prop('id', 'id'+ idinc++).val(''); // chain the commands
}); 
```

# perl - 在期望脚本中转义双引号

> ID：13834850
> 
> 赞同：5
> 
> 时间：2012-12-12T07:27:15.913
> 
> 标签：perl, expect

```
#!/usr/bin/perl

$command = "SetBaseStationParam(\\\"PDP_ACTIVATION_REJECT\\\",0);"
system (boa.exp $command); 
```

boa.exp 脚本将使用此命令登录到 linux 机器并执行脚本。

```
# /Usr/bin/expect 
set timeout 5
set arg1 [lindex 0]
spawn ssh root@10.xx.xx.xx

expect "password:" 
send "pass\r"
expect "$" 

send "$arg1\r"
expect "$" 
```

但是这个脚本正在删除命令中的第一个双引号并将其打印为

输出是

```
SetBaseStationParam(\PDP_ACTIVATION_REJECT",0); 
```

预期输出为

```
SetBaseStationParam("PDP_ACTIVATION_REJECT",0); 
```

请让我知道是否有任何解决方案

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T07:30:20.987

当您使用双反斜杠时，它会转义反斜杠，因此转义引号的正确方法是`\"`.

但是，更好的解决方案是使用`qq()`. 它可以与多种字符一起用作分隔符，`|`例如：

```
$command = qq|SetBaseStationParam("PDP_ACTIVATION_REJECT",0)|; 
```

或者在你的情况下，甚至使用单引号

```
$command = 'SetBaseStationParam("PDP_ACTIVATION_REJECT",0)'; 
```

你应该知道，不使用

```
use strict;
use warnings; 
```

确实是一个非常糟糕的主意。

# extjs - 如何取消 ExtJS 4.1 中微调字段的事件？

> ID：13834855
> 
> 赞同：2
> 
> 时间：2012-12-12T07:27:35.980
> 
> 标签：extjs, event-handling, extjs4, extjs4.1, extjs4.2

我正在使用 ExtJS 4.1 开发应用程序。我有一个微调字段，我想以编程方式更改该方法的值。我已经为同一个微调器字段设置了`change`,`spinup`和之类的侦听器。`spindown`

现在我想知道如何防止这些事件的侦听器方法仅在我通过程序更改微调器字段的值时才被触发？

例如，

```
var mySpinner = Ext.ComponentQuery.query('#foopanel > #mySpinner')[0];
mySpinner.setValue(2000); 
```

`mySpinner.setValue(2000);`执行 line时，`mySpinner`会触发 change 事件，并且由于我有此 change 事件的侦听器方法，因此执行该侦听器方法。

是否可以防止调用`change`事件侦听器方法？

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:08:37.497

您可以通过调用暂停所有事件

```
mySpinner.suspendEvents();
mySpinner.setValue(2000);
mySpinner.resumeEvents(); 
```

这将是 IMO 最干净最简单的方法

这也是这种方法存在的一个用例

# java - Android 小部件更新不起作用

> ID：13834857
> 
> 赞同：2
> 
> 时间：2012-12-12T07:27:39.060
> 
> 标签：java, android, android-widget, android-pendingintent

写下代码以更新小部件。

此代码始终有效

```
Toast.makeText(context, ""+cd.getId(), Toast.LENGTH_LONG).show(); 
```

但是下代码只有在调试时才有效。

```
@Override
public void onUpdate(Context context, AppWidgetManager appwidgetmanager,
        int[] appWidgetIds) {

    for (int i : appWidgetIds) {
        RemoteViews views = new RemoteViews(context.getPackageName(),
                R.layout.widget4x4persian);
        shaffle(context, appwidgetmanager, i, views);
    }

}

@Override
public void onReceive(Context context, Intent intent) {
    this.context = context;
    super.onReceive(context, intent);
    ComponentName thisWidget = new ComponentName(context, gift4x4.class);
    RemoteViews remoteViews = new RemoteViews(context.getPackageName(),
            R.layout.widget4x4persian);
    AppWidgetManager appWidgetManager = AppWidgetManager
            .getInstance(context);
    appWidgetManager.updateAppWidget(thisWidget, remoteViews);
    clickWidget(context, appWidgetManager, intent, remoteViews);
}

private void clickWidget(Context context,
        AppWidgetManager appWidgetManager, Intent intent,
        RemoteViews remoteViews) {

    Cursor c = null;
    try {

        ComponentName thisWidget = new ComponentName(context, gift4x4.class);

        Bundle b = intent.getExtras();

        if (b != null) {
            int key = b.getInt(WIDGET_KEY);

            String id = null;

                int[] allWidgetIds = appWidgetManager
                        .getAppWidgetIds(thisWidget);
                for (int i : allWidgetIds) {
                    RemoteViews views = new RemoteViews(
                            context.getPackageName(),
                            R.layout.widget4x4persian);
                    shaffle(context, appWidgetManager, i, remoteViews);
                }
            }

    } catch (NumberFormatException e) {
        e.getMessage();
    } finally {
        if (c != null)
            c.close();
    }
}

public void shaffle(Context context, AppWidgetManager appwidgetmanager,
        int appWidgetId, RemoteViews Rview) {
    Cursor c = null;
    try {

        Card cd = null;
        do {
            PreferenceManager pm = new PreferenceManager(context);
            Cards_Count = pm.get(PREFNAME_CARDS_COUNTS, CARDS_COUNTS);
            int shaffle = (new Random()).nextInt(Cards_Count);

            c = context.getContentResolver().query(CONTENT_URI_CARDS,
                    new String[] { ID, TEXT, ISREAD, ISBOOKMARK, NOTE },
                    "id=" + shaffle, null, null);
            if (c.moveToFirst()) {
                cd = new Card(c.getInt(c.getColumnIndex(ID)), c.getString(c
                        .getColumnIndex(TEXT)), c.getInt(c
                        .getColumnIndex(ISREAD)), c.getInt(c
                        .getColumnIndex(ISBOOKMARK)), c.getString(c
                        .getColumnIndex(NOTE)));
            }
            c.close();
        } while (c == null);

        Rview.setImageViewResource(R.id.imgIsBookmarkWidget, cd
                .getIsBookmark() == 1 ? R.drawable.bookmark
                : R.drawable.unbookmark);

        Bitmap bmp = getPicture(context, cd.getId());
                    Toast.makeText(context, ""+cd.getId(), Toast.LENGTH_LONG).show();
        Rview.setImageViewBitmap(R.id.imgWidget, bmp);
        Intent  intentTemp = new Intent(context, gift4x4.class);
        intentTemp.putExtra(WIDGET_KEY, key);

        PendingIntent   pendingintentTemp = PendingIntent.getBroadcast(context, key,
                intentTemp, PendingIntent.FLAG_UPDATE_CURRENT);

        Rview.setOnClickPendingIntent(R.id.imgShaffleWidget,
                getProperIntent(context, 3, cd));

        appwidgetmanager.updateAppWidget(appWidgetId, Rview);

    } catch (Exception e) {
        e.getMessage();
    } finally {
        if (c != null)
            c.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:02:00.130

也许您使用的 Context 类型不正确。只使用传递给函数的上下文，不要使用类中声明的私有上下文。

```
public void onReceive(Context context, Intent intent) 
```

# apache-flex - 用flex4截图

> ID：13834859
> 
> 赞同：1
> 
> 时间：2012-12-12T07:27:43.297
> 
> 标签：apache-flex, flex4

我正在构建一个寡妇 AIR 应用程序。我的申请是透明的。我需要截取屏幕截图。请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:16:53.157

AIR不能直接做；但它可以通过创建一个 Air Native Extension (ANE) 来与操作系统对话并获取位图数据来完成。

或者您可以尝试 Native Process（不确定它是否仍然是 AIR 的一部分，因为我们有 ANE）。下面是使用 Native Process 截图的教程：[http ://www.gotoandlearn.com/play.php?id=125](http://www.gotoandlearn.com/play.php?id=125)

# javascript - jplayer的播放按钮和进度条在firefox中不起作用

> ID：13834861
> 
> 赞同：0
> 
> 时间：2012-12-12T07:27:56.473
> 
> 标签：javascript, jplayer

我把 jplayer 放在我的 joomla 网站上播放我的 mp3 文件。问题是使用 Firefox 时播放按钮和 jplayer 的进度条在我的站点中不起作用。我在我的 htaccess 中添加了“添加类型 ogg”。ogg 文件正在我的站点中播放，但是当我使用 firebug 检查元素时没有显示 ogg 文件。我只能找到一个禁用的代码：

```
<div class="jp-jplayer" id="jquery_jplayer_1" style="width: 0px; height: 0px;">
    <img id="jp_poster_0" style="width: 0px; height: 0px; display: none;" src=" images/jmplayer/albums/thumb_13520917357864.jpeg">
    <object width="1" height="1" id="jp_flash_0" data="js/Jplayer.swf" type="application/x-shockwave-flash" style="width: 0px; height: 0px;">
    <param name="flashvars" value="jQuery=jQuery&amp;id=jquery_jplayer_1&amp;vol=0.8&amp;muted=false">
    <param name="allowscriptaccess" value="always"><param name="bgcolor" value="#000000">
    <param name="wmode" value="opaque"></object>
</div> 
```

这是我的链接：[http ://www.keralacarpentry.com/saavnnew](http://www.keralacarpentry.com/saavnnew)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:08:02.620

Firefox 不支持 mp3 文件，但要使其使用 jplayer 播放，请确保您已在 Firefox 中安装 Flash 并在 javascript 中包含 swf 路径，如下所示

```
$("#jquery_jplayer").jPlayer({
    ready: function () {
      $(this).jPlayer("setMedia", { mp3: "http://sound26.mp3pk.com/indian/ladiesvsricky/ladiesvsrickybahl01(www.songs.pk).mp3" } );
    },
    //swfPath: "http://cloudfactory-transcription.s3.amazonaws.com/javascripts/",
    swfPath: "http://www.jplayer.org/latest/js/Jplayer.swf",
    supplied: "mp3",
    volume: 1,
    wmode:"window",
    solution: "html,flash",
}); 
```

Jplayer 仅使用 Flash 在 Firefox 中播放 mp3 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:08:58.397

对于#jquery_jplayer_1，您绑定了两次：
1\. 在第 693 行
2\. 当 $('#playallinner').click 时，您再次绑定。

建议修改：
1\. 去掉 693 到 703 的代码

```
 /*
        var myPlaylist = new jPlayerPlaylist({
           jPlayer: "#jquery_jplayer_1",
           cssSelectorAncestor: "#jp_container_1"
         }, {
          playlistOptions: {
                  enableRemoveControls: true
          },
        swfPath: "js",
        supplied: "mp3",
        wmode: "window"
        });
         */ 
```

然后： 2\. 从 1794 更改代码，例如：

```
//new a jPlayerlist object
var playallList = new jPlayerPlaylist({
        jPlayer: "#jquery_jplayer_1",
        cssSelectorAncestor: "#jp_container_1"
    }, {
        swfPath: "js",
        supplied: "mp3",
        wmode: "window"
});
// add list into the list
playallList.setPlaylist([           
           {
             title:"Aadhai Aaula",
             artist:"Mipa",
             .... // list all songs you want
           },

]);
//play the list when the play button be clicked.
$('#playallinner').click(function(){
     playallList.play();
     var playcount = /*parseInt($("#playtotal").html())+*/ 6;
     $("#playtotal").text(playcount);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T07:39:26.247

实际上 jPlayer 使用`html 5`音频标签，而 firefox 不支持`mp3 files`标签`audio`W3schools [Reference](http://www.w3schools.com/html/html5_audio.asp)

其他参考：

[为什么火狐不支持mp3文件格式](https://stackoverflow.com/questions/4923136/why-doesnt-firefox-support-mp3-file-format-in-audio)

[为什么 jPlayer 不能在 Firefox 中播放我的 MP3 文件？](https://stackoverflow.com/questions/8655341/why-is-jplayer-not-playing-my-mp3-files-in-firefox)

# c# - 将双精度更改为字符串后的字符串格式

> ID：13834862
> 
> 赞同：2
> 
> 时间：2012-12-12T07:28:11.810
> 
> 标签：c#, string

我有一个双，我想把它改成一个字符串，像这样：

```
double value;
string myString = value.toString(); 
```

当 value 是点后少于 4 位的数字时，它可以正常工作。例如，如果值为 0，则 myString 将为 0。如果值为 0.01，则 myString 将为 0.01。

但如果 value 在点后有 4 位或更多位，myString 会使用浮点创建（例如，1E-05）。

我希望以 0.0000000X 的格式为点后的任意位数创建 myString，并且永远不要使用 1E-0X 方法。我还希望 myString 尽可能短，例如当值为 0 时，我希望 myString 为 0（而不是 0.000000）。

我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T07:35:25.550

我不确定是否有一个*标准*的数字格式字符串可以满足您的要求，但您可以使用自定义格式字符串：

```
double d = 0.0000003;
Console.WriteLine(d.ToString("0.#################")); 
```

我不相信它会处理最终具有超出我指定的有效数字的值。例如，扩展散列的数量对诸如 3e-20 之类的数字*没有帮助。*这对你来说是个问题吗？

请注意，因为您使用的是`double`而不是`decimal`，所以在算术之后的某些情况下您可能会感到惊讶......如果您试图保留一个精确数字非常重要的值，您可能应该使用它`decimal`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:33:35.177

使用接受格式字符串作为参数的[`double.ToString`重载之一。](http://msdn.microsoft.com/en-us/library/system.double.tostring.aspx)

检查有关[标准数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)和[自定义数字格式字符串](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)的信息，以了解有关指定所需格式的信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-12T07:37:20.840

[Double.ToString()](http://msdn.microsoft.com/en-us/library/kfsatb94.aspx)的msdn 页面很好地解释了它。

```
string myString = value.ToString("R"); 
```

会做的工作。

# python - Python：如何从二维数组生成条形图

> ID：13834863
> 
> 赞同：1
> 
> 时间：2012-12-12T07:28:16.787
> 
> 标签：python

我有一个二维数组（3x3），我想从每个包含 3 个条形图的行向量生成一个条形图，如下所示：[http ://www.flickr.com/photos/altaf009_forums/8265573801/](http://www.flickr.com/photos/altaf009_forums/8265573801/)

这很容易使用 MATLAB 'bar' 函数，只需将数组作为参数传递，我该如何在 python 中做到这一点？我也想要那些 xticklabels 如图所示。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T07:35:38.693

您可能可以从他们的网站调整（并简化）以下 Matplotlib 示例：http: [//matplotlib.org/examples/pylab_examples/barchart_demo.html](http://matplotlib.org/examples/pylab_examples/barchart_demo.html)。

![在此处输入图像描述](../Images/27afccf191fa440dcc86aaaa31d4b923.png)

# ruby-on-rails - 使用 ajax 调用 jquery 的 onchange 函数的动态选择

> ID：13834867
> 
> 赞同：1
> 
> 时间：2012-12-12T07:28:23.150
> 
> 标签：ruby-on-rails, ruby, jquery, dynamic

请帮助，我使用了一些示例来构建动态选择，但它似乎不起作用，但是在控制台我可以看到 200 状态，我不流利所以请帮助，问题是选择中的列表不会减少，选择 previos 后显示相同的选项

index.html.erb

```
 <%= collection_select(nil, :site_id,  @sites,  :id, :name, {:prompt   => "Select a Site"}, { :id => "sites_select"}) %>
                            <br/>
                    <%= collection_select(nil, :floor_id, @floors, :id, :name, {:prompt   => "Select a Floor"}, {:id => "floors_select"}) %>
                    <br/>
                    <%= collection_select(nil, :pod_id, @pods, :id, :name, {:prompt   => "Select a pod"}, {:id => "pods_select"}) %>
                    <script>
                          $(document).ready(function() {
                            $('#sites_select').change(function() {
                              $.ajax({
                                url: "<%= update_floors_path %>",
                                data: {
                                  site_id : $('#sites_select').val()
                                },
                                dataType: "script"
                              });
                            });
                            $('#floors_select').change(function() {
                              $.ajax({
                                url: "<%= update_pods_path %>",
                                data: {
                                  floor_id : $('#floors_select').val()
                                },
                                dataType: "script"
                              });
                            });
                          });
                        </script> 
```

devices_controller.rb

```
 def update_floors
# updates floors and pods based on genre selected
site = Site.find(params[:site_id])
# map to name and id for use in our options_for_select
@floors = site.floors.map{|a| [a.name, a.id]}.insert(0, "Select a Floor")
@pods   = site.pods.map{|s| [s.name, s.id]}.insert(0, "Select a Pod")

end

def update_pods
# updates pods based on floor selected
floor = Floor.find(params[:floor_id])
@pods =floor.pods.map{|s| [s.name, s.id]}.insert(0, "Select a Pod")
end 
```

update_floors.js.erb

```
$('#floors_select').html("<%= escape_javascript(options_for_select(@floors)) %>");
$('#pods_select').html("<%= escape_javascript(options_for_select(@pods)) %>"); 
```

update_pods.js.erb $('#pods_select').html("<%= escape_javascript(options_for_select(@pods)) %>");

路线.rb

```
 get 'devices/update_floors', :as => 'update_floors'
      get 'devices/update_pods', :as => 'update_pods'
      root :to => "devices#index" 
```

感谢任何建议谢谢你，D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:39:40.260

问题出在你的控制器上，

您没有在代码中的任何地方提到 respond_to js 块，

只需将此代码放在两个更新方法中，

```
respond_to do |format|
 format.js
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:45:21.660

似乎新加载的 JavaScript 没有向父页面添加效果。为什么不在 Ajax 成功回调中执行 $().html。并使 update.js.html 页面只包含 select 的选项。应该管用。

javascript:

```
$("#sites_select").change(function(){
    $.ajax({
      url: your_url,
      //orther options ...
      success: function(data){
          $("#floors_select").html(data);
      }
    });

}); 
```

在你的 update_floors.js.html

```
<%=options_for_select(@floors)%> 
```

对更新 pod 执行相同的操作。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T07:48:22.940

在控制器中给出响应格式`respond_to :js, :only=>[:update_floors,:update_pods ]`
除此之外，将以下内容写入`update_floors.js.erb`文件。

`$('#floors_select').html("<%= escape_javascript(collection_select(:your_object_name, :floor_id, @floors.to_a, :id, :name, :prompt=>"Select a Floor")) %>");`
我认为上面的方法会起作用。

# android - ListView 每个屏幕一项

> ID：13834868
> 
> 赞同：1
> 
> 时间：2012-12-12T07:28:25.803
> 
> 标签：android, android-layout

由于[DirectionalViewPager](https://github.com/JakeWharton/Android-DirectionalViewPager)现在已被弃用，我需要一些方法来模仿它的垂直分页功能。

我想到的第一件事是 ListView，但我想要一些实现每个屏幕功能的提示 - 我从哪里开始？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:55:33.483

```
public class Top extends ListActivity {

public void onCreate(Bundle savedInstance) {
    super.onCreate(savedInstance);
    String[] rows = {1,2,3,4}; //This rows array Determine the no of rows to be displayed on the list
    setContentView(R.layout.top);//layout for activity
    setListAdapter(new MyAdapter(this, R.layout.top_list, R.id.topName, rows);  
}

private class MyAdapter extends ArrayAdapter<String> {

    public MyAdapter(Context context, int resource, int textViewResourceId, String[] objects) 
    {
        super(context, resource, textViewResourceId, objects);          
    }
        @Override
        public View getView(final int position, View convertView, ViewGroup parent) 
        {               
            LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            final View row = inflater.inflate(R.layout.top_list, parent, false); //top_list is the seperate layout that represents your list consider it has one TextView.
            String[] rows = {1,2,3,4};          
            TextView tv = (TextView)findViewById(R.id.TextView1);   
            tv.setText(rows[position]);

            return row;
        }           
    }
} 
```

1\. Extend ListActivity Instead of Activity.
2\. Create two layout one for the Activity and the other for the list.
3\. The rows array determine the no of lists in the listview.
4\. The position determines the list number.

I hope this helps ask if any other clarification needed.

# android - 从对话框刷新 ListAdapter

> ID：13834870
> 
> 赞同：0
> 
> 时间：2012-12-12T07:28:27.350
> 
> 标签：android, android-listview, xamarin.android, android-alertdialog, listadapter

我很困惑如何刷新我在从同一个活动中调用的 AlertDialog 的活动中的 ListAdapter。

这是活动的代码：

```
private static ArrayAdapter<CarProfile> mainListAdapter;

public class CarProfiles : ListActivity
{
  protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);
        mainListAdapter = new ArrayAdapter<CarProfile>(this, Android.Resource.Layout.SimpleListItem1, carProfiles);
        // This targets a ListView in my axml with id list.
        ListAdapter = mainListAdapter;

        ShowCarProfileFormDialog(parameters blah, blah, blah);
    }
} 
```

这是我的警报对话框：

```
 public class CarProfileDialogFragment : DialogFragment
    {
        public override Dialog OnCreateDialog(Bundle savedInstanceState)
        {
            LayoutInflater inflater = Activity.LayoutInflater;
            View view = inflater.Inflate(Resource.Layout.CarProfileForm, null);

            // component init (removed)

            var builder = new AlertDialog.Builder(Activity)
                .SetView(view)
                .SetPositiveButton(GetString(Resource.String.lblCarProfileDialogOK), (sender, args) =>
                {        
                    // The datasouce source update works
                    datasource.UpdateCarProfile(id, txtName.Text, txtPlateNumber.Text, spnCategoryColor.SelectedItem.ToString(), spnCategoryNumber.SelectedItem.ToString());

                    // But this doesn't 
                    mainListAdapter.NotifyDataSetChanged();                        
                })
                .SetNegativeButton(GetString(Resource.String.lblCarProfileDialogCancel), (sender, args) =>
                {
                    Dialog.Dismiss();
                })
                .SetTitle(GetString(Resource.String.lblCarProfileDialogTitle));
            return builder.Create();
        }
    } 
```

如上面的 AlertDialog 代码所示，我的数据源更新没有问题，当我调用该`NotifyDataSetChanged`方法时没有任何反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:55:57.313

因为`NotifyDataSetChanged()`只是一种让适配器重绘视图但不更改底层数据的方法，所以您需要`mainListAdapter`通过调用类似`mainListAdapter.Clear()`,`mainListAdapter.Add()`来**更新**数据或`ArrayAdapter`再次构造函数来告知新数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T12:52:50.233

我放弃了这种方法，而是复制了 NotepadV3 示例。

# php - 将我的 Joomla 模块中的值传递给文章

> ID：13834872
> 
> 赞同：0
> 
> 时间：2012-12-12T07:28:32.377
> 
> 标签：php, mysql, joomla, joomla1.5, joomla-extensions

我在 Joomla 1.5 上，我正在尝试将我的登录模块的用户名值传递给一篇文章，该值在用户登录时显示为问候语，因此我可以将文章自定义为用户的个人资料。最好的方法是什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:37:05.257

最简单的方法是使用 Joomla 的用户对象。

喜欢 ：

```
$user = &JFactory::getUser();

echo $user->name;//You will get name,username,email etc .using same object 
```

在文章部分只使用上面的行。在 components/com_content/view/article/default.php 或您想要的任何其他视图中。

用户对象将返回当前记录的用户信息。

希望对你有帮助..

# javascript - 这个正则表达式有什么问题（如果是正则表达式）

> ID：13834884
> 
> 赞同：5
> 
> 时间：2012-12-12T07:29:05.450
> 
> 标签：javascript, regex

我想要的是，有一个最大长度为 5 的文本框。允许的值是..

1.  任何整数 // 例如 1, 3, 9, 9239 都是有效的
2.  实数，小数点后精确一位 // 例如。1.2, 93.7 有效，61.37, 55.67 无效
3.  也可以只输入小数和之后的数字，即 0.7 是有效输入（将被视为 0.7）

我找到了这个页面，[http://www.regular-expressions.info/refadv.html](http://www.regular-expressions.info/refadv.html)
所以我的想法是

1.  有一个数字
2.  如果后面有一个数字和一个小数，那么后面一定有一个数字
3.  如果没有数字，则必须有一个小数，然后是一个数字

所以，我做的正则表达式是..

```
a single digit one or more => /d+  
an optional decimal point followed by exactly one digit => (?:[.]\d{1})?  
if first condition matches => (?(first condition) => (?((?<=\d+)  
then, match the option decimal and one exact digit =>(?((?<=\d+)(?:[.]\d{1})?  
else => |
find if there is a decimal and one exact digit => (?:[.]\d{1}){1}  
check the whole condition globally => /gm 
```

整体表达 =>

```
(?(?<=\d+)(?:[.]\d{1}){1}|(?:[.]\d{1}){1})+/gm 
```

但它没有输出任何东西..
这是小提琴

[http://jsfiddle.net/Fs6aq/4/](http://jsfiddle.net/Fs6aq/4/)

ps：那里的pattern1和pattern2，和我[之前的问题有关](https://stackoverflow.com/questions/13656750/regular-expression-for-given-pattern)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:47:54.760

也许你把事情复杂化了太多。我做了一个快速测试，除非我遗漏了一些东西，否则这个正则表达式似乎可以正常工作：

```
/^\d*\.?\d$/ 
```

**演示：http:** [//jsbin.com/esihex/4/edit](http://jsbin.com/esihex/4/edit)

**编辑：**要检查长度，您可以在没有正则表达式的情况下进行：

```
if ( value.replace('.','').length <= 5 && regex.test( value ) ) {
  ...
} 
```

请注意，我曾经`replace`删除了点，因此在获取长度时它们不会算作字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:07:13.040

您可以尝试以下模式：

```
/^\d{0,4}\.?\d$/ 
```

它似乎满足您的所有要求：

```
> /^\d{0,4}\.?\d$/.test(".4")
  true
> /^\d{0,4}\.?\d$/.test(".45")
  false
> /^\d{0,4}\.?\d$/.test("1234.4")
  true
> /^\d{0,4}\.?\d$/.test("12345.4")
  false
> /^\d{0,4}\.?\d$/.test("12345")
  true
> /^\d{0,4}\.?\d$/.test("123456")
  false 
```

此模式假定该数字最多可以有五位数字和一个可选的小数点。

如果最大长度为 5 包括可选的小数点，则模式稍微复杂一些：

```
/^(?:\d{1,5}|\d{0,3}\.\d)$/ 
```

该组的第一部分处理所需长度的整数，该组的第二个选项处理最大长度（包括小数点）为五的实数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T08:41:23.060

考虑这段代码：

```
var checkedString = "45.3 fsd fsd fsdfsd 673.24 fsd63.2ds 32.2 ds  32 ds 44 fasd 432 235f d653 dsdfs";
checkedString = " "+checkedString;
var results = checkedString.match(/[\s]{1}(\d+\.*\d{1})(?![\d\.\w])+/gm);
results.map(function(result) {
    return result.trim();
}); 
```

无法以其他方式实现，因为在 JS `(?<=`(lookbehind) regexp 中不起作用。

这将被返回：

```
["45.3","32.2","32","44","432"] 
```

所以可能这就是你所期望的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T08:01:30.120

我不知道你想用你的正则表达式中的这些条件做什么。我还查看了您的 jsfiddle，它对我没有任何输出。但是我制作了两个版本的正则表达式，它们与文本框的正确值相匹配，它们是`^(?!(.{6,}))(?:[1-9]\d*)*(?:\.\d*[1-9])?$`和`^(?!(.{6,}))(?:\d*)*(?:\.\d*)?$`。

第一个不允许以零开头，或以小数点后的零结尾。

如果您需要正则表达式的解释，请发表评论。

# android - 无法在android中使用FaceDetector检测人脸

> ID：13834885
> 
> 赞同：0
> 
> 时间：2012-12-12T07:29:09.703
> 
> 标签：android, image-processing, face-detection

我需要检测用户面部并比较面部以验证我的应用程序，因为我使用 FaceDetector API 来检测用户面部。

当我运行我的代码时，它没有任何缺陷。但它使检测到的人脸计数为零。

```
 public class AndroidFaceDetectorActivity extends Activity {
    private static final int TAKE_PICTURE_CODE = 100;
    private static final int MAX_FACES = 5;

    private Bitmap cameraBitmap = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ((Button)findViewById(R.id.take_picture)).setOnClickListener(btnClick);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            super.onActivityResult(requestCode, resultCode, data);

            if(TAKE_PICTURE_CODE == requestCode){
                    processCameraImage(data);
            }
    }

    private void openCamera(){
        Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

        startActivityForResult(intent, TAKE_PICTURE_CODE);
    }

    private void processCameraImage(Intent intent){
        setContentView(R.layout.detectlayout);

        ((Button)findViewById(R.id.detect_face)).setOnClickListener(btnClick);

        ImageView imageView = (ImageView)findViewById(R.id.image_view);

        cameraBitmap = (Bitmap)intent.getExtras().get("data");

        imageView.setImageBitmap(cameraBitmap);
    }

    private void detectFaces(){
        if(null != cameraBitmap){
                Log.d("FACE_RECOGNITION","CHECK");
                int width = cameraBitmap.getWidth();
                int height = cameraBitmap.getHeight();

                FaceDetector detector = new FaceDetector(width, height,AndroidFaceDetectorActivity.MAX_FACES);
                Face[] faces = new Face[AndroidFaceDetectorActivity.MAX_FACES];

                Bitmap bitmap565 = Bitmap.createBitmap(width, height, Config.RGB_565);
                Paint ditherPaint = new Paint();
                Paint drawPaint = new Paint();

                ditherPaint.setDither(true);
                drawPaint.setColor(Color.RED);
                drawPaint.setStyle(Paint.Style.STROKE);
                drawPaint.setStrokeWidth(2);

                Canvas canvas = new Canvas();
                canvas.setBitmap(bitmap565);
                canvas.drawBitmap(cameraBitmap, 0, 0, ditherPaint);

                int facesFound = detector.findFaces(bitmap565, faces);
                PointF midPoint = new PointF();
                float eyeDistance = 0.0f;
                float confidence = 0.0f;

                Log.i("FaceDetector", "Number of faces found: " + facesFound);

                if(facesFound > 0)
                {
                        for(int index=0; index<facesFound; ++index){
                                faces[index].getMidPoint(midPoint);
                                eyeDistance = faces[index].eyesDistance();
                                confidence = faces[index].confidence();

                                Log.i("FaceDetector", 
                                                "Confidence: " + confidence + 
                                                ", Eye distance: " + eyeDistance + 
                                                ", Mid Point: (" + midPoint.x + ", " + midPoint.y + ")");

                                canvas.drawRect((int)midPoint.x - eyeDistance , 
                                                                (int)midPoint.y - eyeDistance , 
                                                                (int)midPoint.x + eyeDistance, 
                                                                (int)midPoint.y + eyeDistance, drawPaint);
                        }
                }

                String filepath = Environment.getExternalStorageDirectory() + "/facedetect" + System.currentTimeMillis() + ".jpg";

                    try {
                            FileOutputStream fos = new FileOutputStream(filepath);

                            bitmap565.compress(CompressFormat.JPEG, 90, fos);

                            fos.flush();
                            fos.close();
                    } catch (FileNotFoundException e) {
                            e.printStackTrace();
                    } catch (IOException e) {
                            e.printStackTrace();
                    }

                    ImageView imageView = (ImageView)findViewById(R.id.image_view);

                    imageView.setImageBitmap(bitmap565);
        }
    }

    private View.OnClickListener btnClick = new View.OnClickListener() {
            //@Override
            public void onClick(View v) {
                    switch(v.getId()){
                            case R.id.take_picture:         openCamera();   break;
                            case R.id.detect_face:          detectFaces();  break;  
                    }
            }
    };
} 
```

我做错了什么？

或者

有没有其他方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:31:27.777

`getExtras().get("data")`意图生成`MediaStore.ACTION_IMAGE_CAPTURE`非常低分辨率的位图（我相信它是 160x120 像素），它可以用作缩略图，但不足以让人脸检测完成它的工作。

通常，人脸检测在您可以接收 form 的中等分辨率图像（例如 64x480 像素）上是可以`Camera.previewCallback()`的，但是这样您需要权限和代码来控制应用程序中的相机，您不能为此使用**意图**。

以下是 Android 上人脸检测的官方介绍：http: [//developer.android.com/guide/topics/media/camera.html#face-detection](http://developer.android.com/guide/topics/media/camera.html#face-detection)。

如果您真的喜欢这种方式，您可以使用`getData()`以全分辨率查找捕获的图像，并将其转换为位图，例如

```
cameraBitmap = BitmapFactory.decodeFile(data.getData().getPath()); 
```

# python - 部署 bottle.py 应用程序

> ID：13834892
> 
> 赞同：0
> 
> 时间：2012-12-12T07:29:40.733
> 
> 标签：python, cgi, bottle

我已经成功地在本地主机上运行了使用 bottle.py 创建的应用程序，并且我正在尝试将一个部署到我学校贡献的网络服务器上。不幸的是，我不确定从哪里开始。我知道bottle.py 可以选择将应用程序打包为cgi 应用程序，但仅此而已。有什么建议么？

谢谢！

# php - PHP / MySQL 在 DST 更改中按 DATETIME 字段选择

> ID：13834895
> 
> 赞同：2
> 
> 时间：2012-12-12T07:30:01.340
> 
> 标签：php, mysql, date, datetime

如果不清楚，请原谅我，但我很难将我的想法写在纸上。

### 设想：

我们将各种作业存储在一个表中。这些都使用设置为 UTC 时区的 DATETIME 加上时间戳。

我们的用户可能会在他们的偏好中设置他们的时区，以便我们可以将系统时间转录为用户本地时间。

现在，假设用户选择了 2012 年 10 月 25 日（本地用户时间）输入的所有作业：

```
+--------------------------------------+------------+---------+---------------------+
| id                                   | project_id | amount  | created             |
+--------------------------------------+------------+---------+---------------------+
| 50889ba5-77b4-41e1-a942-1dea0ab761f6 |   15076850 |   50.00 | 2012-10-25 01:53:41 |
| 5088b9a3-8110-446e-81c8-75da341f3f95 |   15076850 | 2000.00 | 2012-10-25 04:01:39 |
| 5088c852-d434-41e6-ba5d-27560ab761f6 |   15076850 |  100.00 | 2012-10-25 05:04:18 |
| 50892a3b-ad9c-4a32-aebf-384c0ab761f6 |   15076850 |  500.00 | 2012-10-25 12:02:03 |
| 50893098-6b9c-4028-9a87-3eb20ab761f6 |   15076850 |   25.00 | 2012-10-25 12:29:12 |
| 50894b10-d260-4f61-8eb9-1d190ab761f6 |   15076850 |   25.00 | 2012-10-25 14:22:08 |
| 50895129-48c8-4bb4-928f-483b341f3f95 |   15076850 |   25.00 | 2012-10-25 14:48:09 |
| 50896019-7144-4e74-8037-4160341f3f95 |   15076850 |   50.00 | 2012-10-25 15:51:53 |
+--------------------------------------+------------+---------+---------------------+
8 rows in set (0.00 sec) 
```

如果此用户位于美国东部 (EST)，并且此表中的时间是 UTC，则表结果中的前两行的结果将是 10 月 24 日。基本上，如果用户是 EST，我想排除前两行。

我一直在尝试使用`DateTime()`，但是 - 我被卡住了，因为它跨越了 DST 结束（2012 年 11 月 4 日）。当我选择 10 月 25 日的日期时，DST 处于活动状态，因此它将用户本地时间显示为 UTC -0400。当作业结束时，它是在 (UTC -0500) 之后。

我完全坚持如何使这项工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T07:36:02.200

获取用户午夜的 UTC 时间戳（在以下示例中为凌晨 4 点 UTC）：

```
$start = new DateTime('2012-10-25 00:00:00', new DateTimeZone('America/New_York'));
$start->setTimeZone(new DateTimeZone('UTC'));
$start = $start->format('Y-m-d H:i:s');

// do the same with $end

SELECT ... WHERE `created` BETWEEN $start AND $end 
```

最终查询应选择`WHERE BETWEEN 2012-10-25 04:00:00 AND 2012-10-26 03:59:59`，即美国/纽约的 10 月 25 日这一天。

这也应该在 DST 更改期间起作用。在 11 月 4 日，查询将是`BETWEEN 2012-11-04 04:00:00 AND 2012-11-05 04:59:59`，再包含一个小时。

# javascript - 传单空白地图

> ID：13834897
> 
> 赞同：9
> 
> 时间：2012-12-12T07:30:15.787
> 
> 标签：javascript, map, leaflet

我正在为 Leaflet 做快速入门教程，但我一直得到一张空白地图。我正在使用 JavaScript 来初始化地图，但即使我假设是所有编写代码，我仍然看不到地图。请帮忙，我的代码如下：

```
<!DOCTYPE HTML>

<div id="map">
    <script type="text/javascript" src="http://cdn.leafletjs.com/leaflet-0.4/leaflet.js"></script>
    <script type="text/javascript">
    var map = L.map('map').setView([28.23211669921875, -26.050065042385917], 10);
    L.tileLayer('http://b.tilecloudmade.com/e7b61e61295a44a5b319ca0bd3150890/997/256/18/149531/108306.png', {
        attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://cloudmade.com">CloudMade</a>',
        maxZoom: 18
        }).addTo(map);
    </script>
    </div>
   </div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T08:37:30.623

您对瓷砖地图的引用似乎是错误的，下面的代码为您提供了瓷砖。

```
<!DOCTYPE HTML>

<div id="map"/>
<script type="text/javascript" src="http://cdn.leafletjs.com/leaflet-0.4/leaflet.js"></script>
<script type="text/javascript">
var map = L.map('map').setView([28.23211669921875, -26.050065042385917], 10);
//L.tileLayer('http://b.tilecloudmade.com/e7b61e61295a44a5b319ca0bd3150890/997/256/18/149531/108306.png', {
L.tileLayer('http://{s}.tile.cloudmade.com/e7b61e61295a44a5b319ca0bd3150890/997/256/{z}/{x}/{y}.png', {
    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://cloudmade.com">CloudMade</a>',
    maxZoom: 18
}).addTo(map);
</script> 
```

# facebook - 为向上、向下箭头键设置焦点在 fb 应用程序上

> ID：13834901
> 
> 赞同：-1
> 
> 时间：2012-12-12T07:30:31.653
> 
> 标签：facebook, focus

我的 fb 应用程序要求用户按向上和向下箭头键。它在独立页面上运行良好，但是当我将它集成到 fb 时，问题是，当用户按下向上或向下箭头键时，fb 页面向上或向下滚动。应该有一个解决方案。请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:51:15.867

我相信这是因为在 Facebook 中加载 iframe 的重点是在实际页面上，而不是 iframe。以下 javascript 代码应防止父页面滚动。

```
document.onkeydown = function(evt) {
    evt = evt || window.event;
    var keyCode = evt.keyCode;
    if (keyCode >= 37 && keyCode <= 40) {
        return false;
    }
}; 
```

# javascript - gwt-ext 的增强

> ID：13834920
> 
> 赞同：0
> 
> 时间：2012-12-12T07:31:56.957
> 
> 标签：javascript, gwt, extjs, gwt-ext

通常，我创建默认的 GridPanel，例如 new GridPanel(xxx, 480, 200, 1, 5)，我可以通过 gridpanel 构造函数中的第一个参数来控制应该隐藏哪一列。

例如，我创建了一个如下所示的网格面板，我想隐藏名为**description**的列。

```
public static xxx[] grdFundOutputs = { 
        new xxx("ID", "id", Integer.class, 50),
        new xxx("Name", "name", String.class, 100),
        new xxx("Description", "description", String.class, 150,true),//true represent hidden
        new xxx("Amount", "amount", Float.class, 70),
};
public static GridPanel createGrid(){
    return new GridPanel(grdFundOutputs, 480, 200, 1, 5);
} 
```

**注意**：我使用 xxx 来表示类名，因为我公司对 gwt-ext 的扩展名无法将其公开。

我的要求是我不希望用户可以通过单击复选框来手动重新显示隐藏的列，就像图像中的操作一样。 ![在此处输入图像描述](../Images/8765e312bd787bd501f2d6fe38963976.png)

我该如何实现这个要求，因为 gwt-ext ，我认为我很难改变 ext-js 的方式。我希望在类 GridPanel 中添加一个函数，以便开发人员可以调用它来隐藏复选框。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:59:55.937

我可以将此方法添加到我自己的代码中，并在 gridpanel 的构造之前调用它

```
 private native void unableHiddenReShown()/*-{
        $wnd.Ext.override($wnd.Ext.grid.GridView, {
                       beforeColMenuShow : function(){
            var cm = this.cm,  colCount = cm.getColumnCount();
            this.colMenu.removeAll();
            for(var i = 0; i < colCount; i++){
                if(cm.config[i].fixed !== true && cm.config[i].hideable !== false && !cm.isHidden(i) //!cm.isHidden(i) was added to solve this problem){
                    this.colMenu.add(new $wnd.Ext.menu.CheckItem({
                        id: "col-"+cm.getColumnId(i),
                        text: cm.getColumnHeader(i),
                        checked: !cm.isHidden(i),
                        hideOnClick:false,
                        disabled: cm.config[i].hideable === false
                    }));
                }
            }
        }
            });
        }-*/; 
```

# php - 我能做些什么来防止我的代码中出现未定义的偏移量通知？

> ID：13834925
> 
> 赞同：0
> 
> 时间：2012-12-12T07:32:28.507
> 
> 标签：php, upload, undefined, offset

> 注意：未定义的偏移量：第 6 行上的 3

第 6 行如下：

```
$tmpFilePath = $_FILES['file']['tmp_name'][$i]; 
```

这是您应该需要的一切：

```
session_start();
//Loop through each file
for($i=0; $i<count($_FILES['file']); $i++) {
  //Get the temp file path
  $tmpFilePath = $_FILES['file']['tmp_name'][$i];

  //Make sure we have a filepath
  if ($tmpFilePath != ""){
    //Setup our new file path
    $newFilePath = "./uploaded_files/" . $_FILES['file']['name'][$i];

    //Upload the file into the temp dir
    if(move_uploaded_file($tmpFilePath, $newFilePath)) {

    echo "Upload Successful!<br />";

}
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:35:21.633

检查它是否存在：

```
if (isset($_FILES['file']['tmp_name'][$i]))
{
    $tmpFilePath = $_FILES['file']['tmp_name'][$i];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T05:49:29.577

乍一看，你在 for() 循环中的代码应该是：

```
for($i=0; $i<count($_FILES['file']['tmp_name']); $i++) 
```

因为计入的项目`$_FILES['file']`可能与计入的项目不同`$_FILES['file']['tmp_name']`

如果项目的数量`$_FILES['file']`多于计数的项目，`$_FILES['file']['tmp_name']`那么您的代码将触发错误并通知未定义的偏移量。

如果 in 中`$_FILES['file']`的项目数小于计入的项目数，`$_FILES['file']['tmp_name']`则您的代码将不会看到超出`['tmp_name']`数组中较高初始计数的所有数据。

最好保持 for 循环的递增变量/运算符最接近您在表达式中计数的数组/子数组。

轻松记住这一点的一个关键技巧是注意 for 循环看起来与您放入变量的数组的索引/关联位置几乎相同。

```
for($i=0; $i<count($_FILES['file']['tmp_name']); $i++)  
$tmpFilePath   =   $_FILES['file']['tmp_name'][$i]; 
```

看见？

# android - 如何让我的帖子只被一些朋友看到？

> ID：13834929
> 
> 赞同：0
> 
> 时间：2012-12-12T07:33:01.227
> 
> 标签：android, facebook, facebook-graph-api

我有一些朋友的 facebook id。我想通过使用 facebook graph api 在我的新闻源上发布。

我怎样才能只让这些朋友（我拥有的 Facebook id）来查看我的帖子？

我需要为此创建任何组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:10:42.227

是的，有可能。在参数包中，添加隐私字段。见下面的例子：

```
public String postToWall() {
    Bundle params = new Bundle();
    params.putString("message", "test message");
    JSONObject privacy = new JSONObject();
    privacy.put("value", "CUSTOM");
    privacy.put("friends", "SOME_FRIENDS");
    privacy.put("allow", "FRIEND_ID_1,FRIEND_ID_2...");
    params.putString("privacy", privacy.toString());

    Facebook facebook = new Facebook(YOUR_APP_ID);
    AsyncFacebookRunner mAsyncFacebookRunner = new AsyncFacebookRunner(facebook);
    mAsyncFacebookRunner.request("me/feed", params, "POST", new BaseRequestListener() {
       ...
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:02:23.847

每个人都可以看到根据其定义的帖子。

或者，您可以

1.  发布到预先创建的组

2.  给一群朋友发消息

# android - AlertDialog 未按预期工作

> ID：13834943
> 
> 赞同：0
> 
> 时间：2012-12-12T07:34:01.007
> 
> 标签：android

我正在实现一个 android 应用程序。我的问题是，当我将数据从客户端发送到服务器时，我希望客户端知道数据已成功发送。我已经实现了一个 AlertDialog，但是当我发送数据时，我收到一条消息“无法在未调用 Looper.prepare() 的线程内创建处理程序”。我在下面附上了我的代码。

```
 private void saveOrder(final Order order) {
        Thread thread = new Thread(new Runnable() {
            @Override
            public void run() {
            try {
                getConnection().saveOrder(order);
                handleSuccessSaveOrder();
            }
            catch (Exception exc) {
                Log.d("--- ERROR ---", exc.getMessage());
                handleException(exc.getMessage());
            }
        }
    });
    thread.start();
}

private void handleSuccessSaveOrder() {
    showAlert(Farsi.Convert(" j "),R.drawable.warning);
    //showActivity(MainMenuActivity.class);
}

private void showAlert(String message, int iconId) {
    alert = new AlertDialog.Builder(ReviewOrderActivity.this);
    alert.setTitle("Status Dialog");
    alert.setMessage(message);
    alert.setIcon(iconId);

      alert.setPositiveButton("OK", new DialogInterface.OnClickListener() {
      public void onClick(DialogInterface arg0, int arg1) {
      showActivity(MainMenuActivity.class); } });

    alert.show();

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T07:37:50.947

您不能从非 ui 线程修改 ui，请使用`runOnUiThread`：

```
private void saveOrder(final Order order) {
    Thread thread = new Thread(new Runnable() {
        @Override
        public void run() {
        try {
            getConnection().saveOrder(order);
            runOnUiThread(new Runnable() {
                 public void run() {
                   handleSuccessSaveOrder();
                 }
            });

        }
        catch (Exception exc) {
            Log.d("--- ERROR ---", exc.getMessage());
            handleException(exc.getMessage());
        }
    }
});
thread.start();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T07:37:07.663

你不能`UI`从背景线程改变。像这样使用

```
private void handleSuccessSaveOrder() {
ReviewOrderActivity.this.runOnUiThread(new Runnable() {

            @Override
            public void run() {
                showAlert(Farsi.Convert(" j "),R.drawable.warning);

            }
        });

    //showActivity(MainMenuActivity.class);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T07:41:40.400

制作处理程序以显示 AlertDialog 并尝试下面的代码而不是上面的代码，它将解决您的问题。

```
private void saveOrder(final Order order) {
    Thread thread = new Thread(new Runnable() {
        @Override
        public void run() {
            try {
                getConnection().saveOrder(order);
                mHandler.sendEmptyMessage(0);
            }
            catch (Exception exc) {
                Log.d("--- ERROR ---", exc.getMessage());
                handleException(exc.getMessage());
            }
        }
    });
    thread.start();
}

public Handler mHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        handleSuccessSaveOrder();
    }
};

private void handleSuccessSaveOrder() {
    showAlert(Farsi.Convert(" j "),R.drawable.warning);
}

private void showAlert(String message, int iconId) {
    alert = new AlertDialog.Builder(ReviewOrderActivity.this);
    alert.setTitle("Status Dialog");
    alert.setMessage(message);
    alert.setIcon(iconId);

    alert.setPositiveButton("OK", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface arg0, int arg1) {
            showActivity(MainMenuActivity.class); 
        } 
    });

    alert.show();

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T07:41:24.537

**“无法在未调用 Looper.prepare() 的线程内创建处理程序”**是由于：

*在后台线程中运行进程时无法显示`Alert dialog`in UI 线程。*

因此，将警报对话框放置在您的 UI 线程中`handleSuccessSaveOrder()`，如下所示：

```
this.runOnUiThread(new Runnable() {
                    public void run() {
                        showAlert(Farsi.Convert(" j "),R.drawable.warning);
                    }
                }); 
```

# php - PHP/MySQL：过滤 POST 和 GET 数据

> ID：13834944
> 
> 赞同：1
> 
> 时间：2012-12-12T07:34:08.223
> 
> 标签：php, mysql

> **可能重复：**
> [最好的 PHP 输入清理功能是什么？](https://stackoverflow.com/questions/3126072/what-are-the-best-php-input-sanitizing-functions)

不久前，我发现了这个，我认为很棒的代码片段，用于过滤来自注入的 POST 和 GET 数据。

```
function filter($data) { //Filters data against security risks.
    $data = trim(htmlentities(strip_tags($data)));
    if(get_magic_quotes_gpc()) $data = stripslashes($data);
    $data = mysql_real_escape_string($data);
    return $data;
}
foreach($_GET as $key => $value) $filterGet[$key] = filter($value);
foreach($_POST as $key => $value) $filterPost[$key] = filter($value); 
```

从那以后我就一直在使用它。但是今天，在通过 ajax 发送数组时，我遇到了很多错误。他们中的大多数人说`strip_tags() expects parameter 1 to be string, array given in...`

过滤数据的最佳方法是什么？所有这些数据都将进入数据库。但是，它不进入数据库的情况呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T07:51:08.987

这是您需要的功能：

```
function filter($data) { //Filters data against security risks.
    if (is_array($data)) {
        foreach ($data as $key => $element) {
            $data[$key] = filter($element);
        }
    } else {
        $data = trim(htmlentities(strip_tags($data)));
        if(get_magic_quotes_gpc()) $data = stripslashes($data);
        $data = mysql_real_escape_string($data);
    }
    return $data;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:41:05.517

正如错误消息所清楚的那样，在通过 GET/POST 传递数组的情况下会发生这种情况。对于这种情况，您可以解析数组的每个值。

```
foreach($_GET as $key => $value){
   if(is_array($value)){
       foreach($value as $val){
           $filterGet[$key][] = filter($val);
       }
   }
   else{
         $filterGet[$key] = filter($value);
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T07:43:00.990

您应该首先检查 $data 是否是您需要的正确格式。您描述的是一个数组被传递到函数的 $data 参数中，PHP 需要您将其分解成一个字符串。需要一些额外的逻辑，例如：

```
function filter($data) {
    if(is_array($data)) {
        foreach($data as $key => $value) {
            // Do stuff...
        }
    } else {
        // Do stuff...
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T07:47:41.573

您应该检查输入是否为数组。如果是这样，循环它并为每个数组成员去除标签，如果不是，那么只需去除输入的标签。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T07:54:58.270

你可以使用 array_walk

```
<?php
function wsafe(&$value,$key)
{
    return safe($value);
}
function safe($value)
{
    if(is_array($value))
    {
        foreach($value as $key=>$val)
        {
            $value[safe($key)] = safe($val);
        }
    }
    else
    {
        $value = trim(htmlentities(strip_tags($value)));
        if(get_magic_quotes_gpc()) $value = stripslashes($value);
        $value = mysql_real_escape_string($value);
    }
}
array_walk($_POST,'wsafe');
array_walk($_GET,'wsafe'); 
```

# c# - 将套接字绑定到针对远程主机的特定接口

> ID：13834948
> 
> 赞同：0
> 
> 时间：2012-12-12T07:34:27.313
> 
> 标签：c#, sockets, tcp, bind

**环境**

想象两个不同 LAN 中的三台机器：

```
Machine1 (1 NIC) : NIC_IP=10.1.1.1
Machine2 (2 NIC) : NIC(1)_IP = 10.3.3.3 ; NIC(2)_IP= 10.1.1.1
Machine3 (1 NIC) : NIC_IP=10.3.3.3 
```

LAN 是这样配置的：

```
LAN(1) = Machine1.NIC, Machine2.NIC1
LAN(2) = Machine3.NIC, Machine2.NIC2 
```

因此只有 Machine2 是两个 LAN 的成员。

* * *

**问题**

现在我们要建立一个从 Machine2.Nic2 到 Machine3.NIC 的连接。这是从 machine2 上的 10.1.1.1 到 machine3 上的 10.3.3.3 的连接。

我们如何告诉 Machine2 的 TCP/IP 堆栈在 LAN(2) 上而不是在 localhost 上找到目标地址！？（显然，如果 Machine3 发起连接，所需的端点将参与连接 [但 machine2 在我们的例子中是发起者]）

* * *

**使用场景（我想要的那个）**

```
[Machine3=] ______LAN 2 _____ [=Machine2=]_______LAN 1________ [=Machine1]
   |                                                               |
   |_ _  _ _ _ _ _ _ _ _ _ _ virtually connected_ _ _ _ _ _ _ _ _ _| 
```

将 Machine2 视为以某种方式在 LAN(1) 和 LAN(2) 之间为 Machine1 和 Machine3 的通信提供一种“桥接服务”。这样，machine1 尝试连接到 machine3（认为它们好像在同一个 LAN 中），但是中间的 machin2 出现了 machine3 的所需 IP 对 machine1 可见。在这个过程中，机器 2 可以将机器 1 的数据传递给机器 3（因此是一种选择性手动桥接的东西）。

* * *

**在思考更多之后......（一种解决方法）**

```
[Machine3=] __LAN 2 __ [=Machine2A=]__LAN3__ [=Machine2B=]___LAN 1___ [=Machine1]
   |                                                                       |
   |_ _  _ _ _ _ _ _ _ _ _ _ virtually connected_ _ _ _ _ _ _ _ _ _ _ _ _ _|

Machine2B (2 NIC) : NIC(1)_IP = 10.3.3.3 ; NIC(2)_IP= 10.x.y.z
Machine2A (2 NIC) : NIC(1)_IP = 10.w.s.t ; NIC(2)_IP= 10.1.1.1 
```

我看到可以通过在场景中添加另一台机器和另一个 LAN 来实现相同的效果 [但是它目前只是一种解决方法（至少现在不是答案）]

* * *

PS：[在同一领域有一个问题](https://stackoverflow.com/questions/12313484/bind-a-socket-to-interface-and-not-on-ip)，不同之处在于他们正在编写数据包嗅探器并且可能没有建立连接（只是读取/注入数据包等）并且他们没有为他们的接口分配 IP 地址，因此他们没有t 有两个不同的目的地，一个在其本地主机中，另一个在 LAN 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:22:53.640

The fundamental problem is that you have machine2 on identical IP addresses as other machines on LAN1 and LAN2\. That's not going to work. You can't have two hosts on the same subnet with the same IP address. Otherwise, all the hosts will get confused.

I don't know if that's really what you intended or was just an oversight in your description.

Now if the following was your configuration

```
LAN1: Network: 10.1.1.0 (8-bit subnet)
LAN2: Network: 10.3.3.0 (8-bit subnet)

Machine1: 10.1.1.1 on LAN1
Machine2: 10.1.1.2 on LAN1 and 10.3.3.4 on LAN2
Machine3: 10.3.3.3 on LAN2 
```

With this configuration, you really don't have to do anything special with your socket listening code to connect through the right NIC. For outbound client connections, the routing table will do the right thing and choose the appropriate interface to connect through. Anytime you create a socket, you can specify a specific port to bind to, but don't specify anything other than 0 (INADDR_ANY) for the IP to bind to. Everything will "just work" if your routing table is configured.

```
int localport = /* 0 for clients, a specific port for server sockets */
socket.Bind(new IPEndpoint(0,localport)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T12:23:53.133

我最终编写了这个批处理脚本。这会将静态 MAC 地址添加到 arp 表并添加路由表条目。为了在路由条目中正确设置默认网关，我必须在其他类中引入两个新的任意 IP 地址。此外，我取消选中了 MAchine2 的 NIC 上的“自动指标”并将其设置为 30。

网卡的ID是“路由打印”中显示的那个

```
SET ID_Nic1=0x3
SET ID_Nic2=0x10005

SET IF_Left=%ID_Nic1%
SET IF_Right=%ID_Nic2%

SET IP_Left=10.1.1.1
SET IP_Right=10.3.3.3

SET AUX_Left=172.16.1.1
SET AUX_Right=172.16.3.3

SET MAC_Left=00-11-22-33-44-55
SET MAC_Right=66-77-88-99-11-22

REM Delete all ARP entries
arp -d *

arp -s %IP_Left% %MAC_Left% %AUX_Left%
arp -s %IP_Right% %MAC_Right% %AUX_Right%

ROUTE ADD %IP_Left% MASK 255.255.255.255 %AUX_Left% METRIC 1 IF %IF_Left%
ROUTE ADD %IP_Right% MASK 255.255.255.255 %AUX_Right% METRIC 1 IF %IF_Right% 
```

# javascript - 从父窗口的按钮单击事件中的模式弹出窗口获取值

> ID：13834950
> 
> 赞同：0
> 
> 时间：2012-12-12T07:34:33.397
> 
> 标签：javascript, asp.net, modal-dialog

我需要从 aspx.cs 页面显示一个模式弹出窗口。我需要从服务器端调用弹出窗口，因为在弹出窗口打开之前，我需要通过查询字符串将 ID 传递给弹出窗口。

这是我显示弹出窗口的代码。

```
 protected void btnNote_Click(object sender, EventArgs e)
    {
        string queryStringParam = "some text"; // some server code here to get the string ready;            
        ScriptManager.RegisterStartupScript(this, this.GetType(), "popup", "openNotePopup('"+ queryStringParam  +"');", true);           
    } 
```

这是获取参数并启动模式弹出窗口的 javascript。

```
function openNotePopup(var param) 
{
    var noteResult = window.showModalDialog("AddEditNote.aspx?Note=" + param, "Add/Edit Notes", 'center:yes; dialogWidth:600px; dialogHeight:500px;');
    document.getElementById("hidden_NoteText").value = noteResult;
} 
```

当弹出窗口关闭时，我将一个字符串值作为 window.returnValue 传递，该值在客户端的 noteResult 变量中捕获。

现在我需要在我的服务器端捕获弹出关闭事件。我可以在客户端捕获事件，但我需要在服务器端捕获事件，以便我可以从隐藏字段中获取值并处理它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:12:10.977

我找到了一个似乎可以解决这个问题的线程。希望这与您正在寻找的内容相似： [Javascript 确认消息问题](https://stackoverflow.com/questions/4949662/javascript-confirm-message-problem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:16:24.203

我建议您在 ShowDialog 上编写自己的函数，如下所示：

```
showNotePopup('NotePopup', title, closeNotePopup); 
```

NotePopup - 您的弹出窗口的 id；showNotePopup 应该描述您想在弹出窗口中看到的内容，它将如何关闭；closeNotePopup 函数，您绑定到弹出窗口关闭，在其中您可以进行例如后请求，这样您将在弹出窗口关闭时捕获服务器。

# php - 在 yii 中为每个上传的图像添加附加信息

> ID：13834951
> 
> 赞同：0
> 
> 时间：2012-12-12T07:34:41.183
> 
> 标签：php, file-upload, yii

我想用 Yii multipleUploadField 上传产品图片，并且我希望用户为每个选择的图片填写一个额外的字段“位置”，这样最后我就可以完成这个模型，到目前为止我可以上传图片并保存它们问题，我只是坚持使用位置字段。

```
CREATE TABLE productimage (
    fk_imageId INT NOT NULL, 
    fk_productId INT NOT NULL, 
    position ENUM ('front', 'back')
)

$form=$this->beginWidget('CActiveForm', array(
  'id'=>'uploadProductImagesForm',
  'enableAjaxValidation'=>false,
  'htmlOptions' => array('enctype' => 'multipart/form-data'), // ADD THIS
));     

$this->widget('CMultiFileUpload', array(
          'model'=>$productImages,
              'name' => 'productImages',
              'attribute'=>'images',
              'max'=>5,
              'remove'=>Yii::t('ui','Remove'),
              'accept' => 'jpeg|jpg|png', 
              'duplicate' => 'Duplicate file!', 
              'denied' => 'Invalid file type, allowed types are (jpeg, jpg, png)', 
  ));
?>
<div class="row-submit">
    <?php echo CHtml::submitButton('save'); ?>
</div>

<?php $form = $this->endWidget(); ?> 
```

非常感谢您的帮助。

# python - Python内置函数作为关键字参数默认？

> ID：13834952
> 
> 赞同：1
> 
> 时间：2012-12-12T07:34:51.527
> 
> 标签：python

Python 的内置函数是否不能用作关键字默认值，或者我应该使用其他方式来引用函数？

我想写一个这样的函数：

```
def isPNGBlock(bytes, blockLen, pngOffset=0, pngErrorLogger=print):
    ...
    try:
        r.validate_signature()
        width, height, pixels, metadata = r.read(lenient=True)
    except png.Error as e:
        pngErrorLogger(e) 
```

相反，我不得不使用默认参数 None 作为标志值来解决这个问题。

```
def isPNGBlock(bytes, blockLen, pngOffset=0, pngErrorLogger=None):
    ...
    try:
        r.validate_signature()
        width, height, pixels, metadata = r.read(lenient=True)
    except png.Error as e:
        if pngErrorLogger is None:
            print(e)
        else:
            pngErrorLogger(e) 
```

或使用包装函数：

```
def defaultLogger(str):
    print(str)

def isPNGBlock(bytes, blockLen, pngOffset=0, pngErrorLogger=defaultLogger ):
    ...
    try:
        r.validate_signature()
        width, height, pixels, metadata = r.read(lenient=True)
    except png.Error as e:
        pngErrorLogger(e) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T07:38:34.763

> Python 的内置函数是否不能用作关键字默认值

它们可以像任何其他功能一样使用。

然而，在 Python 2`print`中是一个语句，而不是一个函数。它成为 Python 3 中的一个函数，因此您的代码将在那里工作。如果您使用`from __future__ import print_function`. 例如，使用 Python 2.7.3：

```
In [2]: from __future__ import print_function

In [3]: def isPNGBlock(bytes, blockLen, pngOffset=0, pngErrorLogger=print):
   ...:     pngErrorLogger('test')
   ...:     

In [4]: isPNGBlock(0, 0)
test 
```

如果你不能`print`用作函数，你可以编写一个包装器，或者使用`sys.stdout.write`：

```
In [7]: isPNGBlock(0, 0, 0, sys.stdout.write)
test 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T07:38:47.000

在 Python 2 中，`print`它不是函数，而是语句。语句不能用作参数。

在 Python 3 中，`print`是一个函数，可以按照您的方式使用。

你可以通过在 Python 2 中获得 Python 3 的行为`from __future__ import print_function`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T07:39:10.300

您正在使用 python 2，其中`print`是关键字而不是函数 - 当然关键字不能作为参数传递，或者隐藏或修改。这在 python 3 中已经改变， print 现在是一个函数，所有这些都是可能的。

# android - 如何以编程方式列出 SD 卡文件夹和文件文件夹和文件

> ID：13834957
> 
> 赞同：3
> 
> 时间：2012-12-12T07:35:23.353
> 
> 标签：android

我是android的新手。我有一个应用程序，其中列出了所有 SD 文件和文件夹，包括 doc、pdf、xls、jpg 等。

如何在android中以编程方式获取我的SD卡中存在的所有文件夹和文件的文件夹名和文件名？

我正在使用此代码，但无法获取文件夹名称（根文件夹和子文件夹）。

```
字符串 pdfPattern = ".pdf";         
文件列表文件[] = dir.listFiles();
  如果（列表文件！= null）
       {
         for (int i = 0; i < listFile.length; i++)

          {
            if (listFile[i].isDirectory())
              {
                walkdir(listFile[i]);
              }
            别的
              {
            if(listFile[i].getName().endsWith(pdfPattern))
                   {
                  //做你想做的 mArrayList.add(listFile[i].getName());
                       Log.v("", "--------- "+listFile[i].getName());
            }
        }
        }
ArrayAdapter songList = new ArrayAdapterthis,android.R.layout.simple_list_item_1,mArrayList);
mlistview.setAdapter(songList);
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:46:13.057

您应该试试这个[示例文件资源管理器](http://android-er.blogspot.in/2010/01/implement-simple-file-explorer-in.html)。

这是遍历 sdcard 以获取文件和目录列表的方法。

```
private void getDir(String dirPath)

{

 myPath.setText("Location: " + dirPath);

 item = new ArrayList<String>();

 path = new ArrayList<String>();

 File f = new File(dirPath);

 File[] files = f.listFiles();

 if(!dirPath.equals(root))

 {

  item.add(root);

  path.add(root);

  item.add("../");

  path.add(f.getParent());

 } 
```

# android - 安卓覆盖流视图

> ID：13834962
> 
> 赞同：0
> 
> 时间：2012-12-12T07:35:57.147
> 
> 标签：android, coverflow

嗨，我正在android中开发应用程序。我在coverflow视图中显示了一些工作正常的图像。在coverflow视图下面我需要在列表视图中显示一些数据。我是android新手，我不知道如何在coverflow视图下方显示列表视图。请帮助我，这是我的代码：

```
My XML file:
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <com.coverflow.Coverflow
        android:id="@+id/cover_flow"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

   <ListView android:id="@+id/list" android:layout_width="fill_parent" android:layout_height="wrap_content" />  

</LinearLayout>

My Activity class:

public class NewspaperCoverFlowActivity extends Activity 
{
    /** Called when the activity is first created. */
    ListViewwithimageAdapter listadapter;
    ListView list;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);  

        Coverflow coverFlow;
        coverFlow = new Coverflow(this);

        coverFlow.setAdapter(new ImageAdapter(this));
        ImageAdapter coverImageAdapter =  new ImageAdapter(this);

        coverFlow.setAdapter(coverImageAdapter);          

        coverFlow.setGravity(Gravity.TOP);

        coverFlow.setSpacing(2);
        coverFlow.setSelection(1, true);
        coverFlow.setAnimationDuration(1500);   
//        setContentView(coverFlow);
        ListView list = (ListView)findViewById(R.id.list);
        listadapter = new ListViewwithimageAdapter(this);
        list.setAdapter(listadapter);

    }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:49:44.187

创建一个将方向设置为垂直的 LinearLayout 并将其设置为您的内容视图。然后将 Cover 流视图和列表视图添加到布局中。

如果您在布局 xml 中执行此操作，它将是这样的（将“com.example.package”更改为您的 CoverFlow 所在的 pckage）：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <com.example.package.CoverFlow
        android:id="@+id/cover_flow"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

# c# - 如何从此查询中删除 sql 注入并使其正常工作？

> ID：13834969
> 
> 赞同：5
> 
> 时间：2012-12-12T07:36:44.380
> 
> 标签：c#, asp.net, sql, sql-injection

我是一名新的 ASP.NET 开发人员，我正在开发一个基于 Web 的应用程序，其中有一个菜单栏，其中包含许多选项。其中一些选项将仅向管理员显示。系统背后有一个逻辑来检查用户是否是管理员。如果是，将显示选项。我写了这个方法，但我有一个 sql injectioniom，我想删除它。

供您参考，我有以下数据库设计：

*   **用户**表：`NetID, Name, Title`
*   **管理员**表：`ID, NetID`

这是 C# 方法：

```
private bool isAdmin(string username)
{
        string connString = "Data Source=appSever\\sqlexpress;Initial Catalog=TestDB;Integrated Security=True";
        string cmdText = "SELECT ID, NetID FROM dbo.Admins WHERE NetID = '" + NetID + "')";
        using (SqlConnection conn = new SqlConnection(connString))
        {
            conn.Open();
            // Open DB connection.
            using (SqlCommand cmd = new SqlCommand(cmdText, conn))
            {
                SqlDataReader reader = cmd.ExecuteReader();
                if (reader != null)
                    if (reader.Read())
                        if (reader["ID"].Equals(1))
                            return true;
                return false;
            }
        }
    } 
```

我试图通过将第三行更改为：

```
string cmdText = "SELECT ID, NetID FROM dbo.Admins WHERE NetID = @NetID)"; 
```

但我收到以下错误，我不知道为什么：

> *必须声明标量变量“@NetID”。*

**你能帮我解决这个问题吗？**

* ***更新：**

```
After updating the code to the following:
    private bool isAdmin(string username)
    {
        string NetID = username;
        string connString = "Data Source=appServer\\sqlexpress;Initial Catalog=TestDB;Integrated Security=True";
        string cmdText = "SELECT ID, NetID FROM dbo.Admins WHERE NetID = @NetID";
        using (SqlConnection conn = new SqlConnection(connString))
        {
            conn.Open();
            // Open DB connection.
            using (SqlCommand cmd = new SqlCommand(cmdText, conn))
            {
                cmd.Parameters.AddWithValue("@NetID", NetID);
                SqlDataReader reader = cmd.ExecuteReader();
                if (reader != null)
                    if (reader.Read())
                        if (reader["NetID"] == username)
                            return true;
                return false;
            }
        }
    } 
```

我收到以下错误：

***')' 附近的语法不正确。***

**如何解决这个问题？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T07:39:26.917

您需要为`@NetID`参数传递一个值：

```
cmd.Parameters.AddWithValue("@NetID", NetID); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:59:52.903

试试这个

```
 private bool isAdmin(string username)
 {
    string connString = "Data Source=appSever\\sqlexpress;Initial Catalog=TestDB;Integrated Security=True";
    string cmdText = "SELECT ID, NetID FROM dbo.Admins WHERE NetID = @NetID)";
    using (SqlConnection conn = new SqlConnection(connString))
    {
        conn.Open();
        // Open DB connection.
        using (SqlCommand cmd = new SqlCommand(cmdText, conn))
        {
            cmd.Parameters.AddWithValue("@NetID", NetID);
            SqlDataReader reader = cmd.ExecuteReader();
            if (reader != null)
                if (reader.Read())
                    if (reader["ID"].Equals(1))
                        return true;
            return false;
        }
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:22:37.340

如果您在 IsAdmin 方法中使用 NetId 作为参数，那将有所帮助

```
 private bool isAdmin(string NetID)
{
string connString = "Data Source=appSever\\sqlexpress;Initial Catalog=TestDB;Integrated Security=True";
 string cmdText = "SELECT ID, NetID FROM dbo.Admins WHERE NetID = @NetID)";
using (SqlConnection conn = new SqlConnection(connString))
{
    conn.Open();
    // Open DB connection.
    using (SqlCommand cmd = new SqlCommand(cmdText, conn))
    {
        cmd.Parameters.AddWithValue("@NetID", NetID);
        string value = cmd.ExecuteScalar().tostring();
        if (value != null)
           return true;
       else
           return false;
    }
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T09:31:04.617

它更好地使用

```
cmd.Parameters.Add("@netid",SqlBdType.Int).Value=NetID; 
```

# python - 删除python列表中的循环

> ID：13834971
> 
> 赞同：1
> 
> 时间：2012-12-12T07:36:56.343
> 
> 标签：python, list, loops

嘿，我有一个列表，我想删除列表中的循环。例如，如果一个元素已经在列表中，我想删除这个重复的元素之间的所有元素。例如：

```
a=[(4,4),(5,6),(7,7),(7,6),(4,4),(8,8),(9,9)] 
```

我想得到与此类似的东西：

```
a   [(4,4),(8,8),(9,9)] 
```

我怎样才能得到这个？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:50:40.010

```
a = [(4,4),(5,6),(7,7),(7,6),(4,4),(8,8),(9,9)]
b = []
for e in a:
    if e in b:
        b[b.index(e)+1:] = []
    else:
        b.append(e)

# b == [(4, 4), (8, 8), (9, 9)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:15:42.333

```
#! /usr/bin/python3.2

while True:
    loops = sorted ( ( (x [0], y [0] ) for x, y in [ (x, y) for x in enumerate (a) for y in enumerate (a) ] if x [0] < y [0] and x [1] == y [1] ), key = lambda x: x [0] - x [1])
    if loops: a = a [:loops [0] [0] ] + a [loops [0] [1]:]
    else: break 
```

这应该删除所有循环，从（其中一个）最长的循环开始，以防相交（重叠）循环。

# sql-server - 数据库同步选项

> ID：13834972
> 
> 赞同：1
> 
> 时间：2012-12-12T07:36:59.597
> 
> 标签：sql-server, ms-access, synchronization, database-connection, microsoft-sync-framework

Visual Studio 2010 中将开发一个新的 Windows 应用程序。客户要求该应用程序在他们的每台笔记本电脑上都有一个本地数据库，并且当他们连接到办公室网络时，该数据库应该与中央服务器同步。中央服务器是windows server 2003，客户端PC是windows 2007。请帮助我回答以下问题

1.  windows server 2003可以安装哪个版本的sql server？
2.  如果将 MS Access 用作本地数据库，则与 sql server 同步的方法。将访问数据库链接到 SQL Server 是双向同步吗？
3.  可以在本地使用 sql express 与使用 microsoft 同步框架的 SQl 服务器同步吗？如果是，请告诉我要安装的 SQL Express 和 SQL Server 的版本。

请让我知道上述方法或任何替代解决方案的优缺点。我对此进行了很多研究，但无法得出结论。请帮忙。

谢谢， 里亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:07:29.447

1.  检查您打算使用的每个 SQL 版本的系统要求，这应该会告诉您是否可以在 Win 2003 上安装它。
2.  将 Access 链接到 SQL Server 将数据存储在 SQL Server 中，而不是本地 Access 数据库中
3.  是的，请参阅：[教程：同步 SQL Server 和 SQL Express](http://msdn.microsoft.com/en-us/library/ff928700.aspx)

# java - 返回大功率 (mod 2^32)

> ID：13834975
> 
> 赞同：2
> 
> 时间：2012-12-12T07:37:17.657
> 
> 标签：java, algorithm, math, exponentiation

我需要计算出一个非常大的幂模（2^32），即我想要的结果：

```
y = (p^n) mod (2^32)

p is a prime number
n is a large integer 
```

在Java中有效地做到这一点有诀窍吗？

还是我坚持在一个循环中进行 n 次迭代？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T07:45:09.313

您可以[通过平方来使用求幂](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)。首先，将其分解为您给定的 2 次方`n`。从`p^n (mod x) == p^(k1) (mod x) . p^(k2) (mod x) . ... p^(kn) (mod x)`where`sum k_i = n`开始，您可以利用这个和两个的连续幂来逐步计算它`O(log n)`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T08:59:37.417

修改 2^32 的简单方法是使用`& 0xFFFFFFFFL`. 此外，碰巧有一种类型自然保持最低 32 位调用`int`；）如果您使用它，您甚至不需要执行，`&`直到您得到结果（所以答案是无符号的）因此，您只需要保留答案的最后 32 位。为了加快计算速度，`^n`您可以计算平方、平方和平方等，例如，如果 n 为 0b11111，那么您需要将 p^16 * p^8 * p^4 * p^2 * p 相乘。

简而言之，您可以使用 plain `int`，因为您只需要 32 位的精度和值，成本为 O(ln n)，其中`n`是功率。

```
int prime = 2106945901;
for (int i = 0; i < 10; i++) {
    long start = System.nanoTime();
    long answer1 = BigInteger.valueOf(prime)
                             .modPow(
                                 BigInteger.valueOf(prime), 
                                 BigInteger.valueOf(2).pow(32)).longValue();

    long mid = System.nanoTime();
    int answer2 = 1;
    int p = prime;
    for (int n = prime; n > 0; n >>>= 1) {
        if ((n & 1) != 0)
            answer2 *= p;
        p *= p;
    }
    long end = System.nanoTime();
    System.out.printf("True answer %,d took %.3f ms, quick answer %,d took %.3f ms%n",
            answer1, (mid - start) / 1e6, answer2 & 0xFFFFFFFFL, (end - mid) / 1e6);
} 
```

终于打印出来了

```
True answer 4,169,684,317 took 0.233 ms, quick answer 4,169,684,317 took 0.002 ms 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-13T23:57:26.437

除了其他答案之外，您还可以使用一些基本数论来将计算奇数的^n mod 2 ^(32)所需的时间减少`a`到 O(1)。[Euler Phi 函数](http://en.wikipedia.org/wiki/Euler_phi)与[欧拉定理](http://en.wikipedia.org/wiki/Euler%27s_theorem)一起允许您丢弃除 n 的低 31 位以外的所有位 。

φ(2 ^(32) ) = 2 ^(31)，并且^(φ(2 ^(32) )) = 1 mod 2 ^(32)。

因此，如果 n = q*(2 ^(31) ) + r, 0 <= r < 2 ^(31)，则^n mod 2 ^(32) = a ^r mod 2 ^(32)

r 只是 n 的低 31 位，即`n & 0x7fffffff`。事实上，根据[卡迈克尔定理](http://en.wikipedia.org/wiki/Carmichael_function)，你可以做得更好（字面意思），你只需要考虑 n 的低 30 位，即`n & 0x3fffffff`。对于给定的 base ，您可以预先计算一次并将它们存储在大小为 4GB 的表中`a`。以下是一些 java 代码作为示例。

```
import java.math.BigInteger;

public class PowMod2_32 {

    private static final long MASK32 = 0xffffffffL;

    public static long pow32(final int a, final int exponent)
    {
        int prod = 1;

        for (int i = 29; i>=0; i--) {
            prod *= prod; // square
            if (((exponent >> i) & 1) == 1) {
                prod *= a;  // multiply
            }
        }
        return prod & MASK32;
    }

    public static long pow32(BigInteger a, BigInteger exponent) {
        return pow32(a.intValue(), exponent.intValue());
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-12T07:43:34.120

我知道 java 中没有技巧，但数学中有一些技巧。

如果您[将这些](http://gmatclub.com/forum/compilation-of-tips-and-tricks-to-deal-with-remainders-86714.html)实现为算法，它应该会加快计算速度。

看 5 和 6。如果 2 的幂总是偶数，也看 4

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-12T07:43:37.113

使用类 Bigintiger。这是一个如何使用它的例子

```
public String higherPow() {
    BigIntiger i = new Bigintger("2");
    // doing a power(2^32)
    i = i.pow(32);
    // after 2^32 was made, do mod 100
    i = i.mod(new Bigintiger("100"));
    return i.toString();
} 
```

# sql-server - 我可以在 windows XP SP3 上安装 microsoft sql server 2012 系统 CLR 类型吗？

> ID：13834990
> 
> 赞同：0
> 
> 时间：2012-12-12T07:38:13.890
> 
> 标签：sql-server, sql-server-2008-r2, sql-server-2012, smo

我想在具有 SQL Server 2008 R2 Express 版本但没有任何 SQL Server 2012 版本的 windows xp sp3 机器上安装 SQL Server 2012 Express 的 SharedManagementObjects。

但是安装“SharedManagementObjects for SQL server 2012”的先决条件之一是必须安装microsoft sql server 2012系统CLR类型。

我知道我可以从[Microsoft® SQL Server® 2012 Feature Pack下载我需要的 SQLSysClrTypes.msi](http://www.microsoft.com/en-us/download/details.aspx?id=29065)

但不确定它是否会成功安装在具有 .NET 4.0 和 Windows 安装程序 4.5 但没有 SQL Server 2012 的 Windows XP SP3 机器上。

**编辑：与此**[http://social.msdn.microsoft.com/Forums/nl/sqlsmoanddmo/thread/6bcde08f-e848-40a0-bc1f-e2f803a125da](http://social.msdn.microsoft.com/Forums/nl/sqlsmoanddmo/thread/6bcde08f-e848-40a0-bc1f-e2f803a125da) 相同的问题

我想这样做是因为我有一个应用程序，其后端数据库可以是 SQL Server 2008 R2（适用于运行 Windows XP SP3 的客户端）或 SQL Sever 2012（适用于 Windows Vista 及更高版本的客户端）。

此应用程序使用 SMO 进行编程备份和恢复操作。

现在在我的应用程序中，当我为 SQL Server 2008 R2 引用 SMO 时，备份和恢复在具有 SQL Server 2012 的系统上失败。

如果在我的应用程序中我引用了 SQL Server 2012 的 SMO，则在具有 SQL Server 2008 R2（即 XP3 客户端）的系统上备份和恢复将失败。

处理此类要求的常见最佳方法是什么？或者我有什么选择？

我只需要 WinForms 应用程序支持 SQL Server 2008 R2 和 SQL Server 2012 及其相应版本的 SMO。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:50:01.180

该下载页面上的**系统要求**部分非常清楚：

> ***系统要求***
> 
> *支持的操作系统：Windows 7、Windows Server 2008 R2、Windows Server 2008 Service Pack 2、Windows Vista Service Pack 2*

没有提到 Windows XP SP3 - 所以**不**，你不能在 Windows XP SP3 上安装这个 SMO 库。是时候升级了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-17T13:56:01.277

我有一个使用 ReportViewer 2012 的应用程序。它需要 SQLSysClrTypes 2012。我尝试在 XP 上安装它，但它说它需要 .Net Framework 2、3.5 或 4。已安装 Framework .Net 4 但它没有检测到它，所以我已经安装了 .Net v2 并且可以成功安装 SQLSysClrTypes。

不知道这是否适用于 SMO，但可以在 XP 中安装 CLR Types 2012。

# javascript - Javascript隐藏下拉菜单按钮

> ID：13834992
> 
> 赞同：0
> 
> 时间：2012-12-12T07:38:30.160
> 
> 标签：javascript, html

挣扎之后，我安装了一个多层下拉菜单。一切顺利后，我发现我网站上的所有按钮（如[请单击此处](http://www.fedri.com/bh/)）都隐藏了。我发现我的 html 头中存在 javascript 的问题。请解决这个问题...

HTML 头代码

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type='text/javascript' src='js/jquery.hoverIntent.minified.js'></script>
<script type='text/javascript' src='js/jquery.dcmegamenu.1.3.3.js'></script>
<script type="text/javascript">
$(document).ready(function($){
    $('#mega-menu-7').dcMegaMenu({
        rowItems: '3',
        speed: 'fast',
        effect: 'slide'
    });
});
</script> 
```

如果你想要 jquery.dcmegamenu.1.3.3.js 和 jquery.hoverIntent.minified.js 文件，我会发给你。

此外，在我的菜单的右侧大约 1 毫米处有一个分离器，它超出了页面。我们可以删除它吗？？？？

谢谢你的支持。

# c# - 使用 Linq 生成列表元素索引的映射

> ID：13834993
> 
> 赞同：5
> 
> 时间：2012-12-12T07:38:31.253
> 
> 标签：c#, linq, sorting

我想要一个`List`, 并生成一个`Dictionary`将每个元素映射到它在`List`. 我可以这样做，对于`List<string>`：

```
var myList = new List<string>{ /* populate list */ };
var orderMap = new Dictionary<string, int>();

foreach (var element in myList)
{
    orderMap[element] = myList.IndexOf(element);
} 
```

基本上，我想列出如下列表：

```
Apple
Banana
Orange 
```

并返回显示索引的地图：

```
Apple -> 0
Banana -> 1
Orange -> 2 
```

我怎样才能用 Linq 做到这一点？我认为这样的事情应该有效：

```
orderMap = myList.Select( x => /* return a key value pair mapping x to myList.IndexOf(x) */ ); 
```

但我无法找出正确的语法。此外，您可以参考用于的委托中的列表本身`Select`吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T07:41:22.677

虽然您*可以*参考委托中的列表，但这通常不是一个好主意。您真的想使用`Select`提供索引和值的重载：

```
var dictionary = list.Select((value, index) => new { value, index })
                     .ToDictionary(p => p.value, p => p.index); 
```

请注意，如果您有任何重复的元素，这将引发异常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T07:41:46.043

您可以尝试[`ToDictionary`](http://msdn.microsoft.com/en-us/library/bb548657.aspx)扩展方法：

```
int index = 0; 
orderMap = myList.ToDictionary(x => x, x => index++); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T07:42:44.567

看看[这个超载的`ToDictionary<TKey, TValue>()`](http://msdn.microsoft.com/en-us/library/bb548657.aspx). 它需要函数将输入元素转换为键和值。

例如

```
var myList = new List<string>{ /* populate list */ };
var orderMap = myList.ToDictionary(x => myList.IndexOf(x), x => x); 
```

但是，这样做的一个问题是，如果 的元素`myList`不是唯一的。

# .net - 导入一个类而不导出它

> ID：13834995
> 
> 赞同：1
> 
> 时间：2012-12-12T07:38:34.293
> 
> 标签：.net, dependencies, mef, composition

我正在使用 MEF。我的应用程序是开放式的，但我仍然想对扩展它的人隐藏它。

例如 BaseAssembly 有

```
public class ListContainer
{
    [ImportMany(typeof(IBase))]
    public List<IBase> MyObjects { get; set; }

    public void AssembleDriverComponents()
    {
         .... Some code to create catalogue..
         //Crete the composition container
            var container = new CompositionContainer(aggregateCatalog);

            // Composable parts are created here i.e. the Import and Export components assembles here
            container.ComposeParts(this);
    }
} 
```

其他组件将参考基础组件。

ReferenceAssembly 将有

```
[Export(typeof(IBase))]
public class MyDerived
{
    public MyDerived()
    { }
} 
```

我想避免引用程序集中派生类上的这个属性。

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:31:48.017

我认为您正在寻找的是`InheritedExport`属性。你可以在你的`IBase`界面上使用它，它会自动导出任何实现`IBase`.

```
[InheritedExport(typeof(IBase))]
public interface IBase
{
    // ...
}

public class MyDerived : IBase
{
    // This class will be exported automatically, as if it had
    // [Export(typeof(IBase))] in its attributes.
} 
```

[您可以在此处](http://randomactsofcoding.blogspot.co.il/2010/01/making-part-declarations-easier-with.html)阅读有关继承导出的更多信息。

# cron - 克罗布工作不包括几个小时

> ID：13834998
> 
> 赞同：0
> 
> 时间：2012-12-12T07:38:52.733
> 
> 标签：cron, crontab, crontrigger

目前我有两个 cronjobs 如下，

> 0 */6 * * * 根作业1
> 
> 0 */2 * * * 根作业2

我需要避免在 job1 运行时运行 job2。有没有办法从 job2 cron 中排除时间（00 00、06 00 等）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:56:58.417

不，没有排除语法。将工作 2 更改为：

```
0 2,4,8,10,14,16,20,22 * * * root job2 
```

# ios - 故事板与旧的 XIB 方式

> ID：13834999
> 
> 赞同：56
> 
> 时间：2012-12-12T07:38:52.413
> 
> 标签：ios, storyboard, xib

我是 iOS 新手，想知道哪个是最好的学习方法。我已经阅读了一些答案here和SO，但有些人说使用Storyboards会其他人说先学习XIB。学习 XIB 有什么真正的好处吗？XIB 是否更容易理解并且有助于故事板？

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2013-03-14T09:36:07.053

学习这两种方法都有好处。

除了 xib 方法的历史价值外，xib 还提供模块化。也许您有一个代码库或希望分享您制作的有用小部件。采用 xib 方法将促进共享和重用。

xib 方法还允许您在自己的代码方面具有更大的灵活性。例如，iOS 5 包含一个带有`UITableView`辅助功能/VoiceOver 支持的错误，尽管另有说明，但该错误会导致`-dequeueReusableCellWithIdentifier:`返回（有关详细信息，请参阅[此博客文章](http://hsoienterprises.com/2012/02/05/uitableview-dequeuereusablecellwithidentifier-storyboard-and-voiceover-doesnt-work/)）。从 xib 动态加载表格视图单元提供了解决该错误的能力。`nil`

虽然 Storyboards 中的表格和表格单元支持非常棒，并且为大多数人需要在表格中执行的操作提供了支持，但有时您必须在线条之外着色，您可能需要许多不同的单元格，并且再次，可以从 xibs 动态加载你的解决方案。

Storyboard 的一大优势是能够查看整个应用程序的 GUI 流程。缩小，你可以看到一切是如何相互联系和流动的。使用 xibs，虽然模块化很好，但很难想象一切如何连接和流动在一起。这对您自己来说可能是一个有用的功能，或者如果您有一个更大的团队要与之共享，以允许其他人查看应用程序的运行方式。

这两种方法都有其价值，了解这两种方法是很好的，这样您就可以为您手头的任务选择最好的工具。

**2014-10-06 更新**- 自从我写了以上内容后，我参与了更多的项目。有些带有 xib，有些可以使用情节提要。

Storyboards 已经成熟了很多（我们现在在 Xcode 6 中），并且有很多很棒的东西。我真的很喜欢在 xib 方法中更复杂的情节提要中可以完成更多工作。几个例子：

一个是在情节提要中直接使用原型单元`UITableView`或`UICollectionView`可以使用多少原型单元。很多漂亮和简单的设置，大部分繁重的工作都可以在故事板中，更少的代码。这很不错。尝试在 xib 方法中做到这一点当然是可行的，但要实现它还有很多工作要做。

另一个是你可以很好地在`UIViewController`s 与常规 segues 之间转换，然后返回 unwind segues。就在故事板中，用最少的代码。它太方便了。

但是对我来说仍然扼杀情节提要的一件事是尝试在协作环境中使用它们。它只是不会很好地融合。在某些方面，即使您在一个超过 1 人的团队中工作，也不是这样。如果您自己利用版本控制，为您自己的个人工作流程使用良好的分支和合并模型，那么有时可能需要在某个分支中进行一些更改，然后将其引入另一个分支，并且哦，痛苦。对我来说，这就是扼杀情节提要的原因。

随着时间和工作的发展，我发现故事板非常适合原型制作。让事情快速进行的能力是故事板的巨大优势。使用它们的速度非常快。但速度是有代价的。在为某个项目编写“真实”代码时，我会坚持使用 xibs，因为虽然它可能需要更多工作，但它是一种更灵活的路线，在更大的团队中或随着时间的推移会更好地工作。

**更新 2015-04-07**另一个更新，因为过去几个月的项目迫使我使用故事板，这提供了更多的见解。

首先，有些事情会要求采用一种或另一种方法。例如，显然在使用 xibs 中的大小类时存在一些边缘情况错误，这些错误在故事板中不存在做同样的事情。因此，如果您受到错误的影响，那可能会以一种或另一种方式迫使您的手。另一个是要记住情节提要通常在`UIViewController`关卡上工作，因此如果您需要执行诸如加载 a`UIView`或 a之类`UICollectionViewCell`的操作，那么 xib 可能会更好地提供服务。

其次，我不知道为什么一开始我没有想到这一点，但是没有*什么*需要您为整个项目使用单个故事板！我认为故事板的性质使人们能够以这种方式被吸引，但我们必须记住没有什么要求（我知道）。

我发现效果很好的是通常处理每个故事板的每个“视图分组”。也就是说，通常您的 ViewControllers 往往是孤立的，最终每个故事板（或 xib）只有 1 个。但是您可能会遇到两个密切相关的 ViewControllers 的情况，将它们放在同一个故事板中是有意义的，特别是因为这样您可以轻松地将它们连接起来，例如 segues。

多个故事板的主要优势？团队合作。这样，Fred 可以在他的 Storyboard 上工作，而 Wilma 可以在她的 Storyboard 上工作，并且不必担心合并问题或工作协调！使用多个故事板（通常每个故事板 1 个 ViewController）对于在多人开发团队中使用故事板有很大帮助。

很明显，Apple 希望我们更喜欢故事板，而这些天我更喜欢它们。使用多个故事板，但在需要时仍然使用 xib，现在工作得很好。

**2015-09-21 更新**现在 Apple 发布了**Xcode 7**，因为 Apple 正在努力克服这些缺点，所以有更多的理由采用故事板。

最重要的改进是*故事板引用*，它允许您在一个故事板中创建对另一个故事板的引用。制作起来非常简单，现在你可以拥有跨故事板的 segues（入口和出口）。我已经在一个新项目中使用了几次，这只是一种乐趣。

`UIView`另一个改进是您可以在情节提要中创建独立的类。然而，在撰写本文时，我的结果喜忧参半。简单的案例可以解决，但一些更“复杂”的东西却不行。例如，我有一个里面`UIViewController`有一个`UITableView`。因为它是一个包含 5 个静态单元格的简单表格，所以我只是将 5 实例`UITableViewCell`化为情节提要中 ViewController 的一部分。似乎可以工作，但是在运行时实际上什么都不会加载和显示；移动了`UITableViewCell`s 成 xib，一切正常。我不确定我是否做错了什么或可能是什么，所以 YMMV。但是，即使只是有一些怪癖，我相信苹果公司会及时解决它们，然后另一个阻碍故事板的障碍将会消失。我想说，如果你需要这样的支持，你应该尝试一下，看看它对你有什么好处。有很大的希望。

故事板越来越优秀。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2012-12-12T07:57:38.630

有些事情你可以用故事板做，而你不能用笔尖做。故事板让您可以在视图控制器之间创建转场，并让您就地设计表格视图单元格。

有些事情你可以用笔尖做而你不能用故事板做。在 nib 中，您可以创建对文件所有者占位符的引用。您可以创建多个顶级视图、编辑它们并在它们之间创建连接。 有关您为什么要这样做的示例，[请参阅此答案。](https://stackoverflow.com/questions/9118796/steps-for-creating-uiscrollview-with-interface-builder/9119126#9119126)您可以添加外部对象占位符（很少使用的功能）。

故事板的缺点是它们将一堆不同的、松散相关的对象收集到一个大文件中。如果您正在与多个开发人员一起开发一个项目，那么如果您使用情节提要，则比使用 xib 文件更有可能遇到合并冲突。

您绝对应该在某个时候了解笔尖。无论您是想从它们开始还是从故事板开始可能都不太重要。只需找到一些您喜欢的教程，并使用他们使用的任何类型的文件（nib 或故事板）来完成它们。