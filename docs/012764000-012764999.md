# StackOverflow 问答 12764000-12764999

# android - Android AsyncTask & 开始新的活动

> ID：12764005
> 
> 赞同：0
> 
> 时间：2012-10-06T21:24:31.957
> 
> 标签：android

AsyncTask 完成后，我在启动新活动时遇到了一些问题。我读过我可以这样写代码：

```
protected void onPostExecute(String result) {
    super.onPostExecute(result);
    if (progress.isShowing()) {
        if (result.equals("true")) {
            progress.dismiss();
            activity.startActivity(new Intent(activity, Main.class));
        }
    }
} 
```

但基本上这只是崩溃，它总是在启动 Activity 的线上，它出现错误 NullPointerException 但我不知道为什么？

任何的想法？

谢谢克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T02:09:40.033

检查以确保`activity`不是`null`，因为它可能是导致`NullPointerException`.

# c - 如何在不四舍五入的情况下在C中截断小数

> ID：12764009
> 
> 赞同：17
> 
> 时间：2012-10-06T21:24:49.837
> 
> 标签：c, rounding

如何在不四舍五入的情况下截断 C 中的小数位？

例如，如果数字是`4.48`

它只会显示`4.4`

`%.1f`轮到`4.5`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-06T21:27:34.827

您可以（ab）使用整数除法截断并且不四舍五入的事实：

```
float original = 4.48;

int tmp = original * 10; // 44.8 truncated to 44

float truncated = tmp / 10.0; // 4.4 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-06T21:27:01.177

这是一个简单的方法：

```
printf("%.1f",trunc(x*10.0)/10.0); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-06T21:32:56.630

如果你的编译器支持C99，应该可以[`trunc()`](http://linux.die.net/man/3/trunc)和朋友一起使用：

```
float f = 4.56f;
f = truncf(f * 10.0) / 10.0; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T21:27:30.053

这应该工作

```
double d = 4.48;
d *= 10.;
int i = d;
d = (double) i / 10.; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T21:28:35.667

```
float myval = 4.48;
float tr = ((int)(myval*10)) / 10.0; 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2021-07-28T19:20:31.803

我看到您正在使用格式说明符，这是我从脚本语言中熟悉的格式说明符。如果您使用的那个有效，那么我会假设其余的这些也有效。

我正在考虑的语言使用相同的说明符来提供多种功能。

如果你使用 "%0.4f" 3.14159 变成 ".1415"

如果您使用“%2.1f”，则它变为“03.1”

如果你使用 "%1.2f 你会得到 "3.14"

# jfreechart - 使用 JFreechart 的不同间隔 ValueAxis

> ID：12764011
> 
> 赞同：1
> 
> 时间：2012-10-06T21:25:02.463
> 
> 标签：jfreechart

我正在尝试以不同的间隔做一个 ValueAxis。我的意思是，例如，我想做一个带有 valueAxis 的 jfrechart，我只能看到数字 1、5、7。我已经用下一个代码尝试过，但我得到了一个带有一个固定间隔的 valueAxis。

```
 CategoryPlot categoryplot = (CategoryPlot) jfreechart.getPlot();
    ValueAxis valueaxis = categoryplot.getRangeAxis();

    TickUnits units = new TickUnits();
    units.add(new NumberTickUnit(1));
    units.add(new NumberTickUnit(5));
    units.add(new NumberTickUnit(7));
   valueaxis.setStandardTickUnits(units); 
```

有谁知道我该怎么做？谢谢。

# linux - XMonad 不会使用 mod4Mask 生成任何东西

> ID：12764021
> 
> 赞同：5
> 
> 时间：2012-10-03T19:27:38.953
> 
> 标签：linux, haskell, fedora, xmonad, xfce

我在 Arch 论坛上看到了一些类似的问题，但我一直无法找到解决方案。

所以我在 Fedora 17 x64 上的 XFCE4 中运行 XMonad 0.1，并且我也安装了 xmonad-contrib。这是我的 xmonad.hs 文件：

```
import System.Posix.Env (getEnv)
import Data.Maybe (maybe)
import Control.Monad
import XMonad.Hooks.SetWMName
import qualified XMonad.StackSet as W
import XMonad.Util.EZConfig

import XMonad
import XMonad.Config.Desktop
import XMonad.Config.Gnome
import XMonad.Config.Kde
import XMonad.Config.Xfce

main = do
     session <- getEnv "DESKTOP_SESSION"
     xmonad  $ xfceConfig     --(maybe desktopConfig desktop session)        
        {
        modMask = mod4Mask
        , terminal = "gnome-terminal"
        , logHook = takeTopFocus >> setWMName "LG3D"
        }
        `additionalKeys` [ ((mod4Mask, xK_p), spawn "dmenu_run")
                           ,((mod4Mask, xK_v), spawn "gvim")
            ]

-----------------------------------------
------------Custom Keys------------------
-----------------------------------------

-----------------------------------------
------------Other horrible stuff---------
-----------------------------------------

desktop "gnome" = gnomeConfig
desktop "kde" = kde4Config
desktop "xfce" = xfceConfig
desktop "xmonad-gnome" = gnomeConfig
desktop _ = desktopConfig

atom_WM_TAKE_FOCUS ::
  X Atom
atom_WM_TAKE_FOCUS =
  getAtom "WM_TAKE_FOCUS"

takeFocusX ::
  Window
  -> X ()
takeFocusX w =
  withWindowSet . const $ do
    dpy       <- asks display
    wmtakef   <- atom_WM_TAKE_FOCUS
    wmprot    <- atom_WM_PROTOCOLS
    protocols <- io $ getWMProtocols dpy w
    when (wmtakef `elem` protocols) $
      io . allocaXEvent $ \ev -> do
          setEventType ev clientMessage
          setClientMessageEvent ev w wmprot 32 wmtakef currentTime
          sendEvent dpy w False noEventMask ev

takeTopFocus ::
  X ()
takeTopFocus =
  withWindowSet $ maybe (setFocusX =<< asks theRoot) takeFocusX . W.peek 
```

您会在该`additionalKeys`部分中注意到，我有 2 个绑定。两者都在使用`mod4Mask`，这也是我的默认 mod 键。对于 gvim，第二个绑定可以完美运行。问题是第一个绑定，对于 dmenu，根本什么都不做。奇怪的是，如果我将`mod4Mask`（对于 dmenu）更改为，`mod1Mask`那么它可以工作。此外，如果我从终端运行 dmenu ，它也可以正常工作。

编辑： mod4Mask 和 P 似乎没有产生/做任何事情。

有任何想法吗？这个配置对我来说似乎很好，我不知道为什么它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:52:32.177

我不知道出了什么问题，但我有一些调试它的建议。

1.  我遇到过一些情况，我认为我正在运行我当前的自定义 xmonad.hs，但我实际上是在运行以前的版本或默认版本。通过对 xmonad.hs 进行一些其他更改来排除这种情况，并验证它是否有效。

2.  尝试将 mod4Mask p 映射到其他东西，看看是否有效。

3.  使用 xev，按 mod4Mask + p，并验证它确实生成了您期望的事件。对比一下mod4Mask + v，看看除了p到v的变化有没有区别。

4.  确保您没有启用 NumLock 或 Fn 或类似的东西！（我认为，NumLock 会将您的 p 更改为数字。）

你用的是什么类型的键盘？我们？英国？还有什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-01T15:00:55.220

XFCE 将 Mod4-p 绑定到此文件中的某些内容

```
~/.config/xfce4/xfconf/xfce-perchannel-xml/xfce4-keyboard-shortcuts.xml 
```

通过在该文件中搜索“Super”，我发现两行带有 <Super>-p。一个似乎是“空的”，另一个执行“xfce4-display-settings --minimal”来设置外部显示输出。

我将该文件中的两个匹配项都更改为使用 o 而不是 p，然后退出 XFCE 并重新登录。现在 Mod4-p 在 XMonad 中工作！

# java - VisualVM 无 法启动

> ID：12764023
> 
> 赞同：6
> 
> 时间：2012-10-06T21:27:10.303
> 
> 标签：java, putty, visualvm, x11

我有一个远程 Debian Squeeze 服务器。我已经手动安装了 Oracle JDK ，并为路径`1.7.0_07`中的每个二进制文件配置了替代方案。`jdk/bin`我还导出了全局 JAVA_HOME 变量。

```
# java -version
java version "1.7.0_07"
Java(TM) SE Runtime Environment (build 1.7.0_07-b10)
Java HotSpot(TM) Server VM (build 23.3-b01, mixed mode)
# 
```

服务器上安装了 Gnome，我正在使用 putty 连接并`X-Windows forwarding`启用。但是当我尝试使用`jvisualvm`命令启动 VisualVM 时，我在 5-10 秒的暂停中什么也得不到：

```
# jvisualvm
# 
```

当我尝试提供帮助时，我看到一个异常：

```
# jvisualvm --help
Usage: /usr/java/jdk1.7.0_07/bin/../lib/visualvm//platform/lib/nbexec {options} arguments

General options:
  --help                show this help
  --jdkhome <path>      path to Java(TM) 2 SDK, Standard Edition
  -J<jvm_option>        pass <jvm_option> to JVM

  --cp:p <classpath>    prepend <classpath> to classpath
  --cp:a <classpath>    append <classpath> to classpath
Exception in thread "main" java.lang.NoClassDefFoundError: Could not initialize class org.netbeans.core.startup.Splash$SplashComponent
        at org.netbeans.core.startup.Splash.<init>(Splash.java:111)
        at org.netbeans.core.startup.Splash.getInstance(Splash.java:64)
        at org.netbeans.core.startup.Main.setStatusText(Main.java:47)
        at org.netbeans.core.startup.NbEvents.setStatusText(NbEvents.java:384)
        at org.netbeans.core.startup.NbEvents.logged(NbEvents.java:159)
        at org.netbeans.Events.log(Events.java:127)
        at org.netbeans.core.startup.ModuleList.readInitial(ModuleList.java:129)
        at org.netbeans.core.startup.ModuleSystem.readList(ModuleSystem.java:241)
        at org.netbeans.core.startup.CLICoreBridge.usage(CLICoreBridge.java:69)
        at org.netbeans.CLIHandler.showHelp(CLIHandler.java:125)
        at org.netbeans.CLIHandler.checkHelp(CLIHandler.java:179)
        at org.netbeans.CLIHandler.initialize(CLIHandler.java:530)
        at org.netbeans.CLIHandler.initialize(CLIHandler.java:346)
        at org.netbeans.MainImpl.execute(MainImpl.java:151)
        at org.netbeans.MainImpl.main(MainImpl.java:46)
        at org.netbeans.Main.main(Main.java:39) 
```

我用[谷歌搜索](http://java.net/projects/visualvm/lists/users/archive/2012-09/message/2)了那个异常，发现该`libxtst-dev`库丢失了，但我之前安装了它。

那么问题是什么，我怎样才能弄清楚出了什么问题？

**更新：**

*   我在根目录下工作。
*   我系统中没有其他版本的 JDK，默认的 OpenJDK 被删除了`apt-get purge`.
*   我的`CLASSPATH`系统变量是空的，有问题吗？

**UPDATE2：** `libXtst`在`/usr/lib`

```
root@test:/usr/lib# ls -la /usr/lib | grep libXtst
-rw-r--r--   1 root root    26666 Июн 23  2010 libXtst.a
lrwxrwxrwx   1 root root       16 Окт  7 01:18 libXtst.so -> libXtst.so.6.1.0
lrwxrwxrwx   1 root root       16 Окт  6 20:26 libXtst.so.6 -> libXtst.so.6.1.0
-rw-r--r--   1 root root    23616 Июн 23  2010 libXtst.so.6.1.0 
```

`libXext`也在`/usr/lib`

```
root@test:~# ls -la /usr/lib | grep libXext
-rw-r--r--   1 root root   118668 Июл 11  2010 libXext.a
lrwxrwxrwx   1 root root       16 Окт  6 22:26 libXext.so -> libXext.so.6.4.0
lrwxrwxrwx   1 root root       16 Май 21 13:42 libXext.so.6 -> libXext.so.6.4.0
-rw-r--r--   1 root root    74432 Июл 11  2010 libXext.so.6.4.0
root@test:~# 
```

这是命令的输出`jvisualvm -J-Dnetbeans.logger.console=true`

```
root@test:~# jvisualvm -J-Dnetbeans.logger.console=true
-------------------------------------------------------------------------------
>Log Session: Monday, October 8, 2012 10:48:32 PM MSK
>System Info:
  Product Version         = Java VisualVM
  Operating System        = Linux version 2.6.32-5-amd64 running on i386
  Java; VM; Vendor        = 1.7.0_07; Java HotSpot(TM) Client VM 23.3-b01; Oracle Corporation
  Runtime                 = Java(TM) SE Runtime Environment 1.7.0_07-b10
  Java Home               = /usr/java/jdk1.7.0_07/jre
  System Locale; Encoding = ru_RU (visualvm); UTF-8
  Home Directory          = /root
  Current Directory       = /root
  User Directory          = /root/.visualvm/7u6
  Cache Directory         = /root/.visualvm/7u6/var/cache
  Installation            = /usr/java/jdk1.7.0_07/lib/visualvm/visualvm
                            /usr/java/jdk1.7.0_07/lib/visualvm/profiler
                            /usr/java/jdk1.7.0_07/lib/visualvm/platform
  Boot & Ext. Classpath   = /usr/java/jdk1.7.0_07/jre/lib/resources.jar:/usr/java/jdk1.7.0_07/jre/lib/rt.jar:/usr/java/jdk1.7.0_07/jre/lib/sunrsasign.jar:/usr/java/jdk1.7.0_07/jre/lib/jsse.jar:/usr/java/jdk1.7.0_07/jre/lib/jce.jar:/usr/java/jdk1.7.0_07/jre/lib/charsets.jar:/usr/java/jdk1.7.0_07/jre/lib/jfr.jar:/usr/java/jdk1.7.0_07/jre/classes:/usr/java/jdk1.7.0_07/jre/lib/ext/zipfs.jar:/usr/java/jdk1.7.0_07/jre/lib/ext/dnsns.jar:/usr/java/jdk1.7.0_07/jre/lib/ext/localedata.jar:/usr/java/jdk1.7.0_07/jre/lib/ext/sunpkcs11.jar:/usr/java/jdk1.7.0_07/jre/lib/ext/sunec.jar:/usr/java/jdk1.7.0_07/jre/lib/ext/sunjce_provider.jar
  Application Classpath   = /usr/java/jdk1.7.0_07/lib/visualvm/platform/lib/boot.jar:/usr/java/jdk1.7.0_07/lib/visualvm/platform/lib/org-openide-modules.jar:/usr/java/jdk1.7.0_07/lib/visualvm/platform/lib/org-openide-util.jar:/usr/java/jdk1.7.0_07/lib/visualvm/platform/lib/org-openide-util-lookup.jar:/usr/java/jdk1.7.0_07/lib/visualvm/platform/lib/locale/boot_ja.jar:/usr/java/jdk1.7.0_07/lib/visualvm/platform/lib/locale/boot_zh_CN.jar:/usr/java/jdk1.7.0_07/lib/visualvm/platform/lib/locale/org-openide-modules_ja.jar:/usr/java/jdk1.7.0_07/lib/visualvm/platform/lib/locale/org-openide-modules_zh_CN.jar:/usr/java/jdk1.7.0_07/lib/visualvm/platform/lib/locale/org-openide-util_ja.jar:/usr/java/jdk1.7.0_07/lib/visualvm/platform/lib/locale/org-openide-util-lookup_ja.jar:/usr/java/jdk1.7.0_07/lib/visualvm/platform/lib/locale/org-openide-util-lookup_zh_CN.jar:/usr/java/jdk1.7.0_07/lib/visualvm/platform/lib/locale/org-openide-util_zh_CN.jar:/usr/java/jdk1.7.0_07/lib/dt.jar:/usr/java/jdk1.7.0_07/lib/tools.jar
  Startup Classpath       = /usr/java/jdk1.7.0_07/lib/visualvm/platform/core/org-openide-filesystems.jar:/usr/java/jdk1.7.0_07/lib/visualvm/platform/core/core.jar:/usr/java/jdk1.7.0_07/lib/visualvm/platform/core/locale/core_ja.jar:/usr/java/jdk1.7.0_07/lib/visualvm/platform/core/locale/org-openide-filesystems_ja.jar:/usr/java/jdk1.7.0_07/lib/visualvm/platform/core/locale/core_zh_CN.jar:/usr/java/jdk1.7.0_07/lib/visualvm/platform/core/locale/org-openide-filesystems_zh_CN.jar:/usr/java/jdk1.7.0_07/bin/../lib/visualvm/visualvm/core/com-sun-tools-visualvm-modules-startup.jar:/usr/java/jdk1.7.0_07/bin/../lib/visualvm/visualvm/core/locale/com-sun-tools-visualvm-modules-startup_ja.jar:/usr/java/jdk1.7.0_07/bin/../lib/visualvm/visualvm/core/locale/core_visualvm.jar:/usr/java/jdk1.7.0_07/bin/../lib/visualvm/visualvm/core/locale/com-sun-tools-visualvm-modules-startup_zh_CN.jar
-------------------------------------------------------------------------------
java.lang.UnsatisfiedLinkError: /usr/java/jdk1.7.0_07/jre/lib/i386/xawt/libmawt.so: libXext.so.6: Unable to open shared object file: No such file or directory
        at java.lang.ClassLoader$NativeLibrary.load(Native Method)
        at java.lang.ClassLoader.loadLibrary1(ClassLoader.java:1939)
        at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1864)
        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1825)
        at java.lang.Runtime.load0(Runtime.java:792)
        at java.lang.System.load(System.java:1059)
        at java.lang.ClassLoader$NativeLibrary.load(Native Method)
        at java.lang.ClassLoader.loadLibrary1(ClassLoader.java:1939)
        at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1864)
        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1846)
        at java.lang.Runtime.loadLibrary0(Runtime.java:845)
        at java.lang.System.loadLibrary(System.java:1084)
        at sun.awt.X11GraphicsEnvironment$1.run(X11GraphicsEnvironment.java:77)
        at java.security.AccessController.doPrivileged(Native Method)
        at sun.awt.X11GraphicsEnvironment.<clinit>(X11GraphicsEnvironment.java:74)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:186)
        at java.awt.GraphicsEnvironment.createGE(GraphicsEnvironment.java:102)
        at java.awt.GraphicsEnvironment.getLocalGraphicsEnvironment(GraphicsEnvironment.java:81)
        at org.netbeans.core.startup.Main.start(Main.java:203)
        at org.netbeans.core.startup.TopThreadGroup.run(TopThreadGroup.java:84)
        at java.lang.Thread.run(Thread.java:722) 
```

**更新 3** 我下载了 Java 演示并尝试启动 SwingSet2：

```
root@test:/tmp/jdk1.7.0_06# java -jar demo/jfc/SwingSet2/SwingSet2.jar
Exception in thread "main" java.lang.UnsatisfiedLinkError: /usr/java/jdk1.7.0_07/jre/lib/i386/xawt/libmawt.so: libXext.so.6: unbale to open shared object file: no such file or directory
        at java.lang.ClassLoader$NativeLibrary.load(Native Method)
        at java.lang.ClassLoader.loadLibrary1(ClassLoader.java:1939)
        at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1864)
        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1825)
        at java.lang.Runtime.load0(Runtime.java:792)
        at java.lang.System.load(System.java:1059)
        at java.lang.ClassLoader$NativeLibrary.load(Native Method)
        at java.lang.ClassLoader.loadLibrary1(ClassLoader.java:1939)
        at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1864)
        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1846)
        at java.lang.Runtime.loadLibrary0(Runtime.java:845)
        at java.lang.System.loadLibrary(System.java:1084)
        at sun.security.action.LoadLibraryAction.run(LoadLibraryAction.java:67)
        at sun.security.action.LoadLibraryAction.run(LoadLibraryAction.java:47)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.awt.Toolkit.loadLibraries(Toolkit.java:1648)
        at java.awt.Toolkit.<clinit>(Toolkit.java:1670)
        at java.awt.Component.<clinit>(Component.java:595) 
```

**更新 4**

最后我的错误是在 JDK 的版本中，请参阅接受的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T09:30:28.810

我认为您在搜索异常时找到了正确的答案。缺少 libXtst.so.6，它应该在 /usr/lib 目录中。你确定它已经安装了吗？您可以运行任何其他 Java GUI 应用程序，例如 SwingSet2 吗？您可以使用 -J-Dnetbeans.logger.console=true 运行 VisualVM 并发布输出吗？

```
jvisualvm -J-Dnetbeans.logger.console=true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-23T18:03:09.580

MAC 的解决方案：[在我的情况下，当我尝试打开应用程序时没有发生任何事情]

转到应用程序文件夹，显示内容 -> 资源/visualvm/etc/visualvm.conf

例子：

/Applications/VisualVM.app/Contents/Resources/visualvm/etc/visualvm.conf

取消注释“visualvm_jdkhome”并将该值替换为正确的 JDK 主路径。

例子：

visualvm_jdkhome="/Users/username/tools/jdk-11.0.10.jdk/Contents/Home"

尝试再次打开应用程序，它应该打开。

# android - 如何格式化从 xml 文件中提取的静态字符串？

> ID：12764029
> 
> 赞同：0
> 
> 时间：2012-10-06T21:27:57.327
> 
> 标签：android, textview, android-xml

我正在开发一个 Android 应用程序，它从在线服务器解析一个 xml 文件并从中提取一个字符串并将其存储在一个局部变量中，然后显示在一个文本视图中。我希望部分提取的文本以粗体显示。我该如何做到这一点？我可以只为粗体部分制作单独的文本视图，并为其赋予粗体属性，但那样我会有太多视图，这会减慢应用程序的速度。

我可以访问服务器上的 xml 文件，如果需要，我可以对其进行更改。有什么方法可以格式化 xml 文件本身中的文本，然后在 textview 中“按原样”显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:31:34.393

尝试

`textView.setText(Html.fromHtml(htmlText));`

如果`htmlText`是让我们说

`example <strong>string</strong>`

这会奏效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T21:32:09.663

当您在 TextView 中设置文本时，您也可以加载基本的 HTML，如下所示：

> text.setText(Html.fromHtml("Hello <b>world</b>"));

在该示例中，“世界”将加粗。

# javascript - Django 到 javascript 模板标签

> ID：12764031
> 
> 赞同：1
> 
> 时间：2012-10-06T21:28:10.850
> 
> 标签：javascript, django, django-templates

如何将一段文本转换为可以使用 django 模板标签分配给 javascript 变量的内容？

例如。

```
var myVar = {{ my_bio }} 
```

其中 my_bio 是带有换行符和其他字符的长段文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:39:06.857

`escapejs`模板标签是为此目的而创建的，您可以查看[Django 文档](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#escapejs)以获取用例和示例。

例子：

```
>>> from django.utils.html import escapejs
>>> escapejs('a\nb')
u'a\\u000Ab' 
```

当然，您可以[查看代码本身](https://github.com/django/django/blob/master/django/utils/html.py#L62)！

# c - 我在 C 中使用 gmp 而下一个素数不起作用？我正在尝试生成 rsa 密钥

> ID：12764043
> 
> 赞同：0
> 
> 时间：2012-10-06T21:29:46.980
> 
> 标签：c, rsa, gmp

```
mpz_t rand1,rand2;
mpz_init (rand1);
mpz_init (rand2);

mpz_random (rand1,512);
//mpz_random (rand2,512);

mpz_nextprime ( rand2, rand1 );
gmp_printf("random %Zd\n", rand2);
//free the big ints
mpz_clear(rand1);
mpz_clear(rand2); 
```

但是，我是在随机打印后打印的，但第二次我调用下一个素数时没有打印出来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:36:23.240

从信息页面：

> -- 函数： void mpz_random (mpz_t ROP, mp_size_t MAX_SIZE) 生成最多为MAX_SIZE个肢体的随机整数。生成的随机数不满足任何特定的随机性要求。当 MAX_SIZE 为负时，生成负随机数。
> 
> 此功能已过时。请改用`mpz_urandomb' or`mpz_urandomm'。

您正在创建一个具有 512 个肢体的随机（ish）整数，如果肢体为 32 位，则为 16384 位，如果肢体为 64 位，则为 32768 位。该范围内的素数很少，因此 GMP 需要一段时间才能找到。

大概你打算找到一个 512 位的素数？

# android - Android Media Player Async 准备文件

> ID：12764046
> 
> 赞同：0
> 
> 时间：2012-10-06T21:29:56.437
> 
> 标签：android

我正在查看 Android 2.1 平台示例中的媒体播放器应用程序。我提供了我想播放的媒体文件的 URL 链接。现在它运行良好，但应用程序给出了一个“耗时太长”的警告对话框，这意味着在 UI 上做了太多的工作。当从互联网流式传输时，是否有更好的方法来准备文件异步，以免对 UI 线程造成比需要更多的错误。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T21:32:53.363

PrepareAsync() 在另一个线程上执行（因此得名）。我认为问题不在这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:37:23.473

我使用服务来播放器。它不需要 UI，因此您可以确定它不会阻止 ui，并且在您离开活动时它不会被杀死。

# php - exec 仍然等待输出，即使我正在发送它 ti /dev/null

> ID：12764047
> 
> 赞同：0
> 
> 时间：2012-10-06T21:30:05.597
> 
> 标签：php

我的代码如下所示：

```
 exec('php -f bg_post.php -- '.escapeshellarg($_POST["data"]).' 2> /dev/null &'); 
```

由于 bg_post.php 非常长，我希望它在后台处理脚本，然后在用户提交后以结婚方式发送用户。唯一的问题是，尽管使用 exec 执行脚本，然后将输出发送到 /dev/null，但它仍然想等待输出。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T21:37:41.650

您将标准错误发送到`/dev/null`，但不是标准输出。改变：

```
2> /dev/null 
```

至：

```
> /dev/null 2>&1 
```

# mysql - mysql中查询的简写符号

> ID：12764049
> 
> 赞同：2
> 
> 时间：2012-10-06T21:30:22.500
> 
> 标签：mysql, sql

有没有一种方法可以为查询提供速记符号？

前任。

```
Q1 = (select * from tablename2) 

Q2 = (select * from tablename2)

select name from Q1; 
select name from Q2; 
```

我知道意见，但我不打算使用它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:32:37.913

是的。[创建一个视图](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)。

```
CREATE VIEW Q1 AS (
  SELECT 
    name,
    id,
    othercol
  FROM tablename1
);

/* Works with a WHERE clause too */
CREATE VIEW Q2 AS (
  SELECT 
    name,
    id,
    othercol
  FROM tablename2
  WHERE othercol = 'some limitation'
);

SELECT name FROM Q1;
/* aggregates work too */
SELECT name, COUNT(*) AS numrows FROM Q2 GROUP BY name; 
```

注意：不建议`SELECT *`在视图中（或在生产代码中的任何地方）。始终明确选择列表中的列，以便它们的顺序是确定的。

[`CREATE TEMPORARY TABLE ... SELECT`或者，使用语法](http://dev.mysql.com/doc/refman/5.1/en/create-table-select.html)创建一个临时表。

```
CREATE TEMPORARY TABLE Q1 
  SELECT name, id, othercol FROM tablename1;

/* select from it */
SELECT name FROM Q1 WHERE id IN (1,2,3,4,5)

/* When done, drop it. Otherwise, it will be dropped when the client connection terminates. */
DROP TABLE Q1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:32:16.967

我认为你在谈论观点。查看他们的[文档](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T21:40:03.673

视图类似于您要查找的内容。

但是对于其他查询或更新，“视图”不如“别名”或“外观”更方便。一个很好的比喻是“一个视图是一个虚拟表”。在 MSSQL 中，“视图”也可以成为增强安全性的有效方法。

这是一篇关于这个主题的好文章：

*   [http://msdn.microsoft.com/en-us/library/aa214068%28v=sql.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa214068%28v=sql.80%29.aspx)

# asp.net - Web 服务共享全局变量

> ID：12764050
> 
> 赞同：0
> 
> 时间：2012-10-06T21:30:27.480
> 
> 标签：asp.net, vb.net, web-services

我是在**ASP.net/VB.net**中创建 Web 服务的新手。我在**App_Code文件夹中的****Service.vb**中设置了一个公共变量，如下所示：

 **```
Imports System.Web
Imports System.Web.Services
Imports System.Web.Services.Protocols
Imports System.Diagnostics
Imports System.Web.Script.Services

<System.Web.Script.Services.ScriptService()> _
<WebService(Namespace:="http://tempuri.org/")> _
<WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()> _
Public Class Service
    Inherits System.Web.Services.WebService

    Public avIP As String = "0.0.0.0"
etc etc.... 
```

现在我已经创建了另一个**类**，我想获得**avIP**的价值。但是，当我这样做时：

```
Client.Connect(Service.avIP, 60128) 
```

它并没有给我这个值，只是一个错误。如果我做**服务，我似乎没有得到任何价值。**. 建议列表中没有任何内容。

我怎样才能从**Service.vb**中获取价值到我的其他班级？

**更新**

我在**Service.vb**文件中有以下内容：

```
<System.Web.Script.Services.ScriptService()> _
<WebService(Namespace:="http://tempuri.org/")> _
<WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()> _
Public Class Service
    Inherits System.Web.Services.WebService
    Public svc As Service = New Service
    Dim avIp As String = "0.0.0.0" 
```

在**avReceiver.vb**我有：

```
Client.Connect(svc.avIP, 60128) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:48:10.340

要引用在像您这样的类中声明的公共变量，您需要创建该类的实例。
这意味着每个创建的类实例都有其变量的副本。
它是每种面向对象语言的一个非常基本的功能。

```
' Create a new instance of the Service class
Dim svc As Service = new Service()
' Set the value of a Public Property 
svc.avIP = "192.168.1.0"
' Use the instance value of that property
Client.Connect(svc.avIP, 60129)

' Create another instance of the Service class
Dim svc1 As Service = new Service()
' Set the value of a Public Property 
svc1.avIP = "192.168.1.1"
' Use the instance value of that property
Client.Connect(svc1.avIP, 60129) 
```

如果要使用类的属性成员而不声明该类的实例，则需要将该成员声明为`Shared`（C# 中的静态）。
这意味着该类的**每个**实例都将共享相同的变量（当然还有它的值）。

```
Public Class Service   
     Inherits System.Web.Services.WebService   

     Public Shared avIP As String = "0.0.0.0"   
     ....
End Class

' Set the one and only avIP for every instance
Service.avIP = "192.168.1.0"
' Use directly the value
Client.Connect(Service.avIP, 60129)

' Create an instance of the Service class
Dim svc As Service = new Service()
' Pass the same value used directly with the class name (192.168.1.0)
Client.Connect(svc.avIP, 60129) 
```**

# twitter-bootstrap - 引导程序，添加箭头，现在一切都放错了位置

> ID：12764058
> 
> 赞同：0
> 
> 时间：2012-10-06T21:31:41.700
> 
> 标签：twitter-bootstrap

我在每张图片的一侧添加了那些绿色箭头按钮，现在我无法将所有缩略图排成一行（一行）；我将把这 4 张图片放在一个迭代器中进行重复，但无论如何它们都会乱序。我认为我需要在某种表格或其他东西中放置那些绿色箭头，但我不确定......我任何人都知道如何清除此代码并使其变得更好，这样我就可以拥有那些绿色箭头图片不会引起任何问题。[http://jsfiddle.net/8E9aB/](http://jsfiddle.net/8E9aB/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T21:53:43.843

正如文档所述：

> 默认的 Bootstrap 网格系统使用 12 列
> 
> 对于简单的两列布局，创建一个 .row 并添加适当数量的 .span* 列。由于这是一个 12 列的网格，因此每个 .span* 跨越这 12 列中的许多列，并且每行（或父项中的列数）***应始终加起来为 12 。***

参考：http: [//twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html)

您`span4`在一行中使用 4 x - 这会导致该行“溢出”，以便最终容器放置在新行上。通过调整四个`span4`类，`span3`您将有空间容纳一排的所有图像。

# database - 具有两个可能父项的数据库子表

> ID：12764060
> 
> 赞同：3
> 
> 时间：2012-10-06T21:31:45.810
> 
> 标签：database, database-design, constraints

首先，我不确定如何准确搜索这个，所以如果它是重复的，请原谅。而且我什至不确定它是否更适合其他 StackExchange 站点之一；如果是这样，请告诉我，我会在那里问。无论如何...

## 项目概览

我正在做一个爱好项目——一个作家的笔记本——来练习编程和数据库设计。基本结构相当简单：用户可以创建笔记本，并在每个笔记本下创建与该笔记本关联的项目。也许笔记本是写一系列短篇小说的，而每个项目都是写一个单独的故事。

然后，他们可以将项目（场景、角色等）添加到笔记本中的特定项目或笔记本本身，使其与特定项目无关。这样，他们可以拥有跨越多个项目的场景或位置，以及具有特定于特定项目的一些场景或位置。

## 问题

我试图在数据库中保留大量的逻辑——如果可能的话，尤其是在表结构和约束中。我对很多项目的基本结构基本上是这样的（我使用的是 MySql，但这是一个非常普遍的问题——只是在语法上提到它）：

```
CREATE TABLE SCENES(
    ID        BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY NOT NULL,
    NOTEBOOK  BIGINT UNSIGNED NULL,
    PROJECT   BIGINT UNSIGNED NULL,
    ....
); 
```

问题是我需要确保至少设置了两个引用之一，笔记本和/或项目。不必同时设置它们——PROJECT 引用了它所在的 NOTEBOOK。我知道我可以有一个通用的“Parent Id”字段，但我不相信有可能有一个外国两张桌子的钥匙，对吧？还有可能添加额外的交叉引用表——即 SCENES_X_NOTEBOOKS 和 SCENES_X_PROJECTS——但这很快就会失控，因为我必须为我正在工作的每种不同的项目类型添加类似的表和。这也将引入确保每个项目在交叉引用表中都有一个条目的问题。

将这种逻辑放在存储过程或应用程序逻辑中很容易，但如果可能的话，我真的很想将它保持在某种约束中，以消除逻辑被绕过的任何可能性不知何故。

有什么想法吗？我几乎对任何事情都感兴趣——即使它涉及重新设计表格或其他东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T01:23:21.107

关于场景和人物的事情是作家可能会从他们当前的项目中删除它们。发生这种情况时，您不想丢失场景和角色，因为作者*可能会*在多年后决定使用它们。

我认为最简单的方法是重新定义它：

> 然后，他们可以将项目（场景、角色等）添加到笔记本中的特定项目或笔记本本身，使其与特定项目无关。

取而代之的是，想想这样说。

> 然后，他们可以将项目（场景、角色等）添加到笔记本中的用户定义项目或名为“未分配”的系统定义项目。“未分配”项目用于当前未分配给用户定义项目的事物。

如果你这样做，那么场景和角色将始终分配给一个项目——要么是一个用户定义的项目，要么是一个名为“未分配”的系统定义的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T00:39:57.417

我不清楚你到底有什么要求，但至少让我试着回答你的一些个人问题......

> 问题是我需要确保至少设置了两个引用之一，笔记本和/或项目。

检查（笔记本不为空或项目不为空）

> 我不相信有两个表的外键是可能的，对吧？

理论上，您可以从同一字段引用两个表，但这意味着*这两个*表都必须包含匹配的行。这可能不是你想要的。

你在正确的轨道上 - 让 NOTEBOOK 成为 FK 对一个表的子端点，而 PROJECT 对另一个表。不会强制使用 NULL 外键，因此您不必同时设置它们。

> 还有可能添加额外的交叉引用表——即 SCENES_X_NOTEBOOKS 和 SCENES_X_PROJECTS——但这很快就会失控，因为我必须为我正在工作的每种不同的项目类型添加类似的表和。

如果您正在谈论模拟多对多关系的联结（又名链接）表，那么是的 - 您必须为每对参与这种关系的表添加它们。

但是，您可以通过使用**继承**（又名类别、子类化、子类型、泛化层次结构...）来最小化此类表对的数量。想象一下，您有一组 M 个表，它们必须连接到第二组 N 个表。通常，您会创建 M*N 联结表。但是，如果您从一个公共父表继承第一个集合中的所有表，并对第二个集合执行相同的操作，那么您现在可以通过这两个父表之间的一个联结表将它们全部连接起来。

关于继承的完整讨论超出了这里的范围，但您可能想查看[“ERwin 方法指南”](http://tangra.si.umich.edu/~radev/654/resources/ERMGALL.PDF)、“子类型关系”一章以及[这篇文章](https://stackoverflow.com/a/12037398/533120)。

> 将这种逻辑放在存储过程或应用程序逻辑中很容易，但如果可能的话，我真的很想将它保持在某种约束中，以消除逻辑被绕过的任何可能性不知何故。

你的直觉是正确的——让数据库尽可能地“保护”自己免受不良数据的影响。以下是确保数据正确性的**优先顺序：**

*   表本身的结构。
*   声明性数据库约束（域完整性、密钥完整性和引用完整性）。
*   触发器和存储过程。
*   中层。
*   客户。

例如，如果您可以确保仅通过使用声明性数据库约束就必须遵循某个逻辑，则不要将其放入触发器中。

# mongodb - Mongo 'update' $criteria 中的 OR 运算符

> ID：12764064
> 
> 赞同：1
> 
> 时间：2012-10-06T21:32:14.597
> 
> 标签：mongodb, mongoid

我想通过匹配标题或 url 字段来检查现有记录。如果其中任何一个匹配，则更新该记录。否则，插入。

如何正确编写以下内容（在 Ruby 中使用 Mongoid）：

```
articles.update(
{ **:title => story.title OR :url => story.url** },
{ :title => story.title, :url => story.url, :source => story.source, :last_updated => Time.now },
{ :upsert => true } ) 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T09:36:38.923

您需要执行请求并更新它：

''' article.any_of({:title => xxx}, {:url => yyyy}).update( :foo => 'bar') '''

# objective-c - Dealloc 发出警告

> ID：12764069
> 
> 赞同：0
> 
> 时间：2012-10-06T21:32:54.360
> 
> 标签：objective-c, memory-management, warnings, dealloc, scene

我正在练习制作一个使用场景控制器（状态管理器）类切换场景的简单应用程序。

我创建了我的场景：

```
+(CCScene *) scene
{
    CCScene *scene = [CCScene node];

    GameMenu *layer = [GameMenu node];

    [scene addChild: layer];

    return scene;
}

-(id)init{
    if ((self = [super init])){
        self.isTouchEnabled = YES;
        CGSize winSize = [[CCDirector sharedDirector] winSize];
        gameMenuLabel = [CCLabelTTF labelWithString:@"This is the Main Menu. Click to Continue" fontName:@"Arial" fontSize:13];
        gameMenuLabel.position = ccp(winSize.width/2, winSize.height/1.5);
        [self addChild:gameMenuLabel];
    }

    return  self;
}

-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    NSLog(@"ccTouchesBegan: called from MainMenu object");
    [[StateManager sharedStateManager] runSceneWithID:kGamePlay];

}

-(void)dealloc{
    [gameMenuLabel release];
    gameMenuLabel = nil;

    [super dealloc];
}

@end 
```

但我不断收到此警告：[https](https://dl.dropbox.com/u/1885149/Screen%20Shot%202012-10-06%20at%205.23.43%20PM.png) ://dl.dropbox.com/u/1885149/Screen%20Shot%202012-10-06%20at%205.23.43%20PM.png （可能帮助不大，但我想我会的链接截图。

我认为这与dealloc有关。如果我在场景中注释掉 dealloc，我不会收到此警告。任何帮助将不胜感激，谢谢。

这是我的statemanager切换场景的方法：

```
-(void)runSceneWithID:(SceneTypes)sceneID {
    SceneTypes oldScene = currentScene;
    currentScene = sceneID;
    id sceneToRun = nil;
    switch (sceneID) {
        case kSplashScene:
            sceneToRun = [SplashScene node];
            break;

        case kGameMenu:
            sceneToRun = [GameMenu node];
            break;
        case kGamePlay:
            sceneToRun = [GamePlay node];
            break;
        case kGameOver:
            sceneToRun = [GameOver node];
            break;

        default:
            CCLOG(@"Unknown ID, cannot switch scenes");
            return;
            break;
    }
    if (sceneToRun == nil) {
        // Revert back, since no new scene was found
        currentScene = oldScene;
        return;
    }    
    if ([[CCDirector sharedDirector] runningScene] == nil) {
        [[CCDirector sharedDirector] runWithScene:sceneToRun];
    } else {
        [[CCDirector sharedDirector] replaceScene:sceneToRun];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:01:11.823

你应该像这样给 gameMenuLabel 一个保留属性

```
@property (nonatomic, retain) CCLabelTTF* gameMenuLabel; //in .h file 
```

并写下这个......

```
 self.gameMenuLabel = [CCLabelTTF labelWithString:@"This is the Main Menu. Click to Continue" fontName:@"Arial" fontSize:13]; 
```

而不是这个...

```
 gameMenuLabel = [CCLabelTTF labelWithString:@"This is the Main Menu. Click to Continue" fontName:@"Arial" fontSize:13]; 
```

问题是你给 gameMenuLabel 一个自动释放的对象，然后在 dealloc 部分再次释放该对象。因此，崩溃。

# c++ - 将 boost::asio tcp 示例移植到 C++11

> ID：12764071
> 
> 赞同：0
> 
> 时间：2012-10-06T21:32:57.397
> 
> 标签：c++, boost, c++11, visual-studio-2012, boost-asio

我正在使用来自 boost::asio 的简单 tcp 服务器，可以在 [此处](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/examples.html#boost_asio.examples.http_server)找到。

它工作正常（Boost 1.51，VC++ 2012）。

但是当我尝试更改`connection_ptr`from的 typedef

```
typedef boost::shared_ptr<connection> connection_ptr; 
```

到

```
typedef std::shared_ptr<connection> connection_ptr; 
```

服务器仍然可以工作，但连接完成后它会崩溃。它发生在方法的[连接管理器](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/example/http/server/connection_manager.cpp)`stop`中。

似乎删除 boost shared_ptr 有效，但您不能删除 std shared_ptr？为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T13:56:34.767

关于你的评论

> 我删除了这个继承，每次只传递一个 shared_ptr 的新实例

不要这样做，这违背了 a 的目的`std::shared_ptr`。您需要使用`std::enable_shared_from_this`并`shared_from_this()`增加引用计数，创建`shared_ptr`具有相同指针对象的另一个实例只会导致问题，例如内存访问冲突。

# javascript - 隐藏 jquery 和 javascript

> ID：12764073
> 
> 赞同：2
> 
> 时间：2012-10-06T21:33:05.963
> 
> 标签：javascript, jquery, obfuscation

我正在开发一个 mvc 应用程序（尽管适用于任何网站）并且想知道是否可以将暴露的 jquery 和 javascript 留在视图中？换句话说，当我运行程序并右键单击并查看源代码时，我可以看到我所有的 jquery 和 javascript。那安全吗？有没有办法隐藏所有这些，让用户看不到？感谢您的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:36:47.037

没有办法对用户完全隐藏 javascript。JavaScript 是一种客户端技术。它在浏览器中执行。如果浏览器可以执行脚本，它也可以将其显示给用户。

您可以使用 JavaScript 混淆器软件使代码更难阅读，但您永远无法完全隐藏它。请参阅[http://www.javascriptobfuscator.com/default.aspx](http://www.javascriptobfuscator.com/default.aspx)以获取此在线示例。

JQuery 和其他库也是公开可用的，因此用户能够访问它没有任何危害。他们没有什么秘密。

如果您想要保护的代码中有秘密，您应该考虑尽可能将受影响的代码放在服务器上，而不是在客户端上进行处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T21:37:11.763

为了让感兴趣的间谍更难阅读，您可以将脚本放在 .js 文件中并对其进行混淆。请参阅[如何混淆（保护）JavaScript？](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)了解更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T21:36:57.450

Javascript 是在客户端上执行的，因此您实际上无法对客户端隐藏它。你真正能做的就是让用户更难通过混淆来阅读你的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T21:37:06.740

没有办法隐藏它。无论如何，没有理由这样做。如果您想*混淆*Javascript 代码，您可以找到使您的代码（对于人类）更难理解的软件（*混淆器）以及使您的代码更小的所谓的**缩小器*。这是此类工具的一个活生生的例子：

[http://closure-compiler.appspot.com/home](http://closure-compiler.appspot.com/home)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-06T21:37:09.820

您正在寻找的是混淆。
关于为什么应该或不应该将它与 Javascript 一起使用，存在非常不同的意见。

请参阅[如何混淆（保护）JavaScript？](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-06T21:37:22.677

不，您不能隐藏您的 JS - 请记住 JS 是客户端脚本，并且必须在客户端可执行，这意味着浏览器必须可以访问它。当浏览器可以访问它时 - 用户也可以看到它:)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-06T21:39:41.800

隐藏是不可能的，您的所有 JavaScript 都需要客户端才能使您的网站正常运行。但是你可以混淆你的 JavaScript，换句话说，让你的代码变得更丑陋，所以没有人能真正理解你的代码，但浏览器会。

要混淆您的 javascript 代码，请查看：

[UglifyJS JavaScript 缩小](http://marijnhaverbeke.nl/uglifyjs)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-06T21:47:22.877

嘿，您可以做一件事 onload 通过 Ajax 调用调用服务器端的操作，方法是返回 javascript 它永远不会显示在您的视图源中，但它可以被 firebug 看到，但它是一种将您的 javascript 产品与其他人联系起来使用它的方法一个简单的方法我已经完成了我的项目之一，即使通过这种方法你也可以隐藏你的 html

# visual-studio-2010 - Visual Studio 游戏控制器

> ID：12764074
> 
> 赞同：-2
> 
> 时间：2012-10-06T21:33:24.617
> 
> 标签：visual-studio-2010, events, mouse

我正在制作一个程序来提高你的游戏技能，所以它不是一个黑客程序！

现在，我被困在一件事上，我需要一个键盘记录器，它会记录你所做的事情，例如，当你按下空格键时，它必须将 Jumped 放入富文本框中。当您单击鼠标左键时，它必须将 Shots Fired 添加到富文本框中，然后，当单击鼠标右键时，添加 Aiming Down Sights，但当它释放时，它还应该添加诸如 Stopped Aiming Down Sights 之类的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T22:37:18.030

我发现我必须添加这段代码，但是我还没有找到空格键

```
 If Chr(i) = "(" Then
txtkeys.Text = txtkeys.Text & "[Arrow Down]"
ElseIf Chr(i) = "%" Then
txtkeys.Text = txtkeys.Text & "[Arrow Left]"
ElseIf Chr(i) = "'" Then
txtkeys.Text = txtkeys.Text & "[Arrow Right]"
ElseIf Chr(i) = "&" Then
txtkeys.Text = txtkeys.Text & "[Arrow up]"
ElseIf Chr(i) = "" Then
txtkeys.Text = txtkeys.Text & "[mouse click left]"
ElseIf Chr(i) = "" Then
txtkeys.Text = txtkeys.Text & "[mouse click right]"
ElseIf Chr(i) = "" Then
txtkeys.Text = txtkeys.Text & "[backspace]"
ElseIf Chr(i) = "." Then
txtkeys.Text = txtkeys.Text & "[delete]"
ElseIf Chr(i) = "" Then
txtkeys.Text = txtkeys.Text & "[shift]"
ElseIf Chr(i) = " " Then
txtkeys.Text = txtkeys.Text & "[tab]"
ElseIf Chr(i) = "¾" Then
txtkeys.Text = txtkeys.Text & "."
ElseIf Chr(i) = "¼" Then
txtkeys.Text = txtkeys.Text & ","
ElseIf Chr(i) = "¿" Then
txtkeys.Text = txtkeys.Text & "/" 
```

# migration - 在 Laravel 中为现有的 InnoDB 关系设置 Eloquent 关系

> ID：12764077
> 
> 赞同：2
> 
> 时间：2012-10-06T21:33:53.503
> 
> 标签：migration, schema, relationship, laravel, eloquent

我有一个初始迁移，它设置了两个表（用户和项目），具有关系（innoDB）。

```
$table->foreign('user_id')->references('id')->on('users'); 
```

我设置了两个 Eloquent 模型，除了关系之外是空白的：

```
return $this->has_many('Project'); 
```

我*肯定*需要雄辩地讲述模型*和*数据库中的关系吗？我假设 Laravel 会从 Schema 中推断出一些全面的东西？有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T09:07:29.157

你是对的，你必须在你的模型中定义关系。

Laravel 不分析模式，外键索引实际上不是必须使用的。可以避免这种引导，但它也允许您使用非常规的表和列名称或使用 Fluent Query Builder 修改关系查询。

少一点魔法，多一点控制。

# ios - 使用带有委托回调的 NSURLConnection 和 sendAsynchronousRequest:queue:completionHandler: 之间有区别吗？

> ID：12764078
> 
> 赞同：2
> 
> 时间：2012-10-06T21:34:11.290
> 
> 标签：ios, ios5, nsurlconnection, objective-c-blocks, nsurlconnectiondelegate

我想了解使用`–initWithRequest:delegate:`委托方法和`+sendAsynchronousRequest:queue:completionHandler:`.

是否存在基于请求数量或任何其他标准的性能差异？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T00:52:11.440

`sendAsynchronousRequest:queue:completionHandler`是一个更容易打的电话。`initWithRequest:delegate`让您可以更好地控制缓存、重定向、下载大量或增量数据、取消请求等。

# php - php curl登录不起作用

> ID：12764079
> 
> 赞同：1
> 
> 时间：2012-10-06T21:34:14.287
> 
> 标签：php, curl

嗨，我的卷曲有问题。我看了一篇旧帖子[Remote Login not Working With Curl](https://stackoverflow.com/questions/10546701/remote-login-not-working-with-curl)，但它不起作用。我听从了 baba 的建议，但代码在 if 语句中输入。对不起，我的英语不好。谁能帮我？

这是代码：

```
$url="http://hipfile.com/";
$urllog="http://hipfile.com/login.html"; 

$postdata = "login=bnnoor&password=########&op=login";

$ch = curl_init(); 
curl_setopt ($ch, CURLOPT_URL, $url); 
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt ($ch, CURLOPT_REFERER, $urllog); 

curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata); 
curl_setopt ($ch, CURLOPT_POST, 1); 
$result = curl_exec ($ch); 

if (!$result) { 
    $http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE); 
    curl_close($ch); // make sure we closeany current curl sessions 
    die($http_code.' Unable to connect to server. Please come back later.'); 
} 
 echo $result;  
 curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T00:05:43.657

你有饼干的初学者。似乎该站点在您登录时可能需要它们。下面的函数对我来说非常方便，verbose 选项将显示详细的 curl 错误，并且 'post' 选项可以设置为 post 字符串或值的关联数组，键是变量/字段名称及其值。我还注意到您在 hipfile 的表单中遗漏了一些 post 变量，这也可能是他们拒绝您登录的原因。

```
fetch('http://www.hipfile.com/');
$options['post'] = 'login=bnnoor&password=########&op=login';
$options['verbose'] = true;
$logged_in_page = fetch('http://www.hipfile.com/login.html',$options); 
```

简单卷曲功能：

```
function fetch( $url, $z=null ) {
    $ch =  curl_init();
    $useragent = isset($z['useragent']) ? $z['useragent'] : 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:10.0.2) Gecko/20100101 Firefox/10.0.2';

    curl_setopt( $ch, CURLOPT_URL, $url );
    curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
    curl_setopt( $ch, CURLOPT_AUTOREFERER, true );
    curl_setopt( $ch, CURLOPT_FOLLOWLOCATION, true );
    curl_setopt( $ch, CURLOPT_POST, isset($z['post']) );

    if( isset($z['post']) )         curl_setopt( $ch, CURLOPT_POSTFIELDS, $z['post'] );
    if( isset($z['refer']) )        curl_setopt( $ch, CURLOPT_REFERER, $z['refer'] );
    if( isset($z['ssl']) )          curl_setopt( $ch, CURLOPT_SSL_VERIFYHOST, false );
    if( isset($z['ssl']) )          curl_setopt( $ch, CURLOPT_SSL_VERIFYPEER, false );
    if( isset($z['verbose']) )      curl_setopt( $ch, CURLOPT_VERBOSE, true );
    if( isset($z['get_header']) )   curl_setopt( $ch, CURLOPT_HEADER, true );
    if( isset($z['header']) )       curl_setopt( $ch, CURLOPT_HTTPHEADER, $z['header'] );

    curl_setopt( $ch, CURLOPT_USERAGENT, $useragent );
    curl_setopt( $ch, CURLOPT_COOKIEJAR,  'cookiejarfilepath' );
    curl_setopt( $ch, CURLOPT_COOKIEFILE, 'cookiejarfilepath' );

    $result = curl_exec( $ch );
    curl_close( $ch );
    return $result;
} 
```

# php - ZF2 - 如何使用 Hydrator/exchangeArray() 填充嵌套对象

> ID：12764080
> 
> 赞同：8
> 
> 时间：2012-10-06T21:34:14.657
> 
> 标签：php, oop, zend-framework2

我有一个对象，其值存储在我的数据库中。我的对象还包含另一个对象，该对象仅使用它的 ID（外键）存储在数据库中。

[http://framework.zend.com/manual/2.0/en/modules/zend.stdlib.hydrator.html](http://framework.zend.com/manual/2.0/en/modules/zend.stdlib.hydrator.html)

在 ZF2中的`Hydrator/exchangeArray`功能之前，您将使用 Mapper 来获取创建对象所需的一切。现在我试图通过仅`Hydration/exchangeArray`用于填充我的对象来消除这个额外的层，但在创建嵌套对象时有点卡住了。

我的实体是否应该将 Inner 对象的表注入其中，以便在将其 ID 传递给我的 'exchangeArray' 时创建它？

以下是示例实体作为示例。

```
// Village
id, name, position, square_id

// Map Square
id, name, type 
```

将 square_id 发送到我的 Village 的 exchangeArray() 函数后。它将获取 mapTable 并使用 hydrator 使用我拥有的 ID 拉入正方形。

在我的实体中拥有映射器实例似乎是不对的，因为我认为它们应该与任何东西断开连接，但它是自己的实体特定参数和功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T14:02:02.560

我认为您可能会受益于查看`Zend\Stdlib\Hydrator\Strategy\StrategyInterface`.

通过创建一个 Strategy 类，您可以将其附加到您的 Hydrator，因此当找到特定键（在本例中为 square_id）时，Hydrator 将数据传递到 Strategy 类到`extract()`或`hydrate()`。

然后 Strategy 类可以做任何需要的事情来水合和提取数据。我使用了几个简单的策略类`getArrayCopy()`/`exchangeArray()`和其他水合/提取多个实体的策略。

# python - 如何测试自定义 handler500？

> ID：12764081
> 
> 赞同：4
> 
> 时间：2012-10-06T21:34:36.367
> 
> 标签：python, django

我为服务器错误编写处理程序并在根 urls.py 中定义它： handler500 = 'myhandler' 我想编写 unittest 来测试它是如何工作的。为了测试，我编写了带有错误的视图并在测试 URL 配置中定义它，当我在浏览器中向该视图发出请求时，我看到我的处理程序并收到状态代码 500，但是当我启动对该视图发出请求的测试时，我看到堆栈跟踪和我的测试失败了。您对通过 unittests 测试 handler500 有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T11:18:45.717

您在这里要做的是[集成测试](http://en.wikipedia.org/wiki/Integration_testing)；单元测试将不是适合它的工具。

[Django 支持](https://docs.djangoproject.com/en/dev/topics/testing/#live-test-server)使用著名的实时浏览器测试工具，例如[Selenium](http://seleniumhq.org/)。

正如您所指出的，对于您的具体情况，[使用 Selenium 检索页面的状态代码确实非常复杂，](https://stackoverflow.com/questions/5799228/how-to-get-status-code-by-using-selenium-py-python-code)因此您可能希望使用更简单的方法：

1.  用一个`LiveServerTestCase`
2.  使用python HTTP客户端如[`requests`](http://docs.python-requests.org/en/latest/)访问测试页面
3.  检查测试页面是否生成 HTTP 500 错误
4.  检查测试页是否包含预期的内容。

如果你想在测试页面上测试一些 JS，那么使用 Selenium 作为那部分，结合请求来测试状态。

# list - Haskell：使用列表进行模式匹配

> ID：12764082
> 
> 赞同：1
> 
> 时间：2012-10-06T21:34:41.250
> 
> 标签：list, haskell

我正在尝试创建一个接收列表的函数，如果其中一个元素为负数，则该列表中与其正数对应的任何元素都应更改为 0。例如，如果有 -2在列表中，则该列表中的所有 2 都应更改为 0。

任何想法为什么它只适用于某些情况而不适用于其他情况？我不明白这是为什么，我已经看了好几遍了。

```
changeToZero [] = []
changeToZero [x] = [x]
changeToZero (x:zs:y:ws) | (x < 0) && ((-1)*(x) == y) = x : zs : 0 : changeToZero ws
changeToZero (x:xs) = x : changeToZero xs

changeToZero [-1,1,-2,2,-3,3]
-- [-1,1,-2,2,-3,3]

changeToZero [-2,1,2,3]
-- [-2,1,0,3]

changeToZero [-2,1,2,3,2]
-- [-2,1,0,3,2]

changeToZero [1,-2,2,2,1]
-- [1,-2,2,0,1] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T21:50:54.753

我认为列表理解更清晰，更容易在这里获得。

```
changeToZero xs = [if x > 0 && (-x) `elem` xs then 0 else x | x <- xs] 
```

如果您需要更有效的东西，您可以构建一组负面元素并检查它而不是使用`elem`.

```
import qualified Data.Set as Set

changeToZero' xs = [if (-x) `Set.member` unwanted then 0 else x | x <- xs]
  where unwanted = Set.fromList $ filter (< 0) xs 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T18:50:56.033

好吧，以@jdevelop 的答案为基础，如果否定必须出现在肯定之前才能计数，那么您可以通过输入单次传递来构建结果，而无需反转它：

```
import qualified Data.Set as S
import Control.Monad.State

changeToZero :: [Int] -> [Int]
changeToZero xs = evalState (mapM f xs) S.empty where
  f x | x < 0     = modify (S.insert (-x)) >> return x
      | otherwise = gets (S.member x) >>= \hasNeg -> return $ if hasNeg then 0 else x 
```

这样你就可以得到答案

```
take 4 $ changeToZero $ 1 : (-2) : 3 : 2 : undefined 
```

其他解决方案将失败的地方。

** 编辑 **

这是同样的事情，但没有`State`monad，这样更容易理解：

```
changeToZero' :: [Int] -> [Int]
changeToZero' = go S.empty where
  go _ [] = []
  go s (x:xs) | x < 0        = x : go (S.insert (-x) s) xs
              | S.member x s = 0 : go s xs
              | otherwise    = x : go s xs 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T21:51:07.693

您实际上不记得您在列表中找到了哪些负面符号

```
import qualified Data.Set as S

changeToZero :: [Int] -> [Int]
changeToZero [] = []
changeToZero xs = reverse . snd $ foldl f (S.empty,[]) xs
  where
    f (negs,res) x | x < 0 = (S.insert (-x) negs, x:res)
                   | S.member x negs = (negs,0:res)
                   | otherwise = (negs,x:res) 
```

# algorithm - 具有比特成本的时间复杂度

> ID：12764083
> 
> 赞同：2
> 
> 时间：2012-10-06T21:34:52.413
> 
> 标签：algorithm, time-complexity

我试图围绕研究算法相对于**比特成本**（而不是单位成本）的时间复杂度的概念展开思考，似乎不可能找到任何关于该主题的内容。

这是我到目前为止所拥有的：

使用任意算术运算，两个数的 n 位乘法和除法的位成本为 O(n^2)。

因此，例如：

```
int number = 2;
for(int i = 0; i < n; i++ ){
    number = i*i;
} 
```

相对于 O(log(n)^2*n) 的位成本具有时间复杂度，因为它进行 n 次乘法并且`i`具有`log(i)`位。

但在常规场景中，我们需要与输入相关的时间复杂度。那么，这种情况如何运作？中的位数`i`可以被认为是一个常数。这将使时间复杂度与单位成本相同，但常数更大（因此两者都是线性的）。

加法、减法、比较和分配变量都是 O(n)，n 是位数，用于任意精度算术。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T22:09:18.600

使用有限的精度算术（例如您的示例中最可能的 32 位`int`乘法），乘法的位成本是恒定的。将两个相乘的成本`int`是`O(32^2)`使用简单的乘法算法（为了更好的算法，请看[这里](http://en.wikipedia.org/wiki/Multiplication_algorithm)）。这与`O(1)`人们在分析算法时通常忽略提及它是一样的。

但是，如果我们使用任意精度算术，那么它就变得很重要。如果一个任意长的数值`i`存储在位中，它将占用`O(log(i))`位。因此，您的代码片段的成本将是`O(log(n)^2 * n)`（我使用的事实是所有`i`的都没有大于`n`您的循环上升到`n`）。

就加法和减法而言，我会说它们都有一点成本`O(n)`，其中`n`是较小操作数的位数。

# ios - 我应该为我的 ios 应用程序使用什么类型的数据存储？

> ID：12764084
> 
> 赞同：0
> 
> 时间：2012-10-06T21:35:02.047
> 
> 标签：ios, xml, database, core-data, client-server

我对 ios 和使用服务器很陌生，所以请原谅我。

我正在构建一个用于研究的 ios 应用程序。我需要监视用户所做的事情，然后将其推送到服务器进行分析（是的，具有用户和 IRB 权限）。在客户端，我需要保留相当多的数据，这些数据不会真正改变，除非从服务器拉取更新版本，然后是最少量的用户特定数据。我将收集的大部分数据都需要推送到服务器进行分析，然后可以从客户端删除。

我正在努力弄清楚我需要使用什么样的数据存储，特别是因为我还不太确定服务器进程的推送和拉取是如何工作的。使用 Core Data 有意义吗？XML？SQLite？我喜欢 Core Data 的想法，但我不确定当我需要从服务器向它发送大量数据时会遇到什么样的问题。我想我可能需要以不同的形式发送数据，而不是它可能存储在任一端 - 那么在转换该数据的过程中我可能会遇到什么样的开销？有没有一种很好的格式来保存东西，这对我来说两端和发送数据都很有效？

你可能会说，我可以使用一些建议。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:44:54.233

核心数据可能是要走的路。

Core Data 或 SQLite 都可能非常适合这类应用程序。Core Data 实际上在幕后使用 SQLite。但是 Core Data 比 SQLite 有一些优势，并且确实是首选的 iOS 数据库技术。

关于您的性能问题，我不会担心。Core Data（或 SQLite）足够快。服务器的带宽将是门控因素，所以你应该没问题。

听起来您的数据结构可能足够丰富或足够大，以至于我不会考虑其他方法（plist、. `NSUserDefaults`、其他文件格式等）。

# windows-8 - 在非 UI 线程处理错误

> ID：12764086
> 
> 赞同：0
> 
> 时间：2012-10-06T21:35:24.627
> 
> 标签：windows-8, microsoft-metro

由于某种原因，在非 UI 线程中发生的未处理异常不会由 App_UnhandledException 处理程序处理。

此方法适用于 Windows Phone 应用程序以全局处理、跟踪和分析异常，但不适用于 Windows 8 应用程序。

```
this.UnhandledException += App_UnhandledException; //doesn't handle

private void Button_Click_1(object sender, RoutedEventArgs e)

{
   var task = new Task(() => { throw new NullReferenceException("Test exc in UI thread"); });
   task.Start();
} 
```

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T22:03:51.570

使用新的`async`/`await`关键字：

```
private async void Button_Click_1(object sender, RoutedEventArgs e)
{
    var task = new Task(() => { throw new NullReferenceException("Test exc in UI thread"); });
    task.Start();
    try
    {
        await task;
    }
    catch (Exception ex)
    {
        var msg = new MessageDialog(ex.ToString(), "An error has occurred");
        await msg.ShowAsync();
    }
} 
```

仅使用以下`Task`方法：

```
private void Button_Click_1(object sender, RoutedEventArgs e)
{
    var task = new Task(() => { throw new NullReferenceException("Test exc in UI thread"); });
    task.ContinueWith(t =>
    {
        var msg = new MessageDialog(t.Exception.ToString(), "An error has occurred");
        msg.ShowAsync().Start();
    }, TaskContinuationOptions.OnlyOnFaulted);
    task.Start();
} 
```

* * *

要捕获所有未处理的异常，请参阅以下问题：

*   [如何将全局异常处理程序添加到 Metro 风格应用程序？](https://stackoverflow.com/q/12314410)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T07:26:53.413

使用 TaskScheduler 的 UnobservedTaskException 事件，您可以捕获任务中未等待的所有异常。澄清一下：如果您等待任务异常会传播到 UI 线程，因此可以通过 Application.UnhandledException 捕获。

# android - 主题更改不适用于 <4.0，因为它应该

> ID：12764087
> 
> 赞同：5
> 
> 时间：2012-10-06T21:35:50.073
> 
> 标签：android, android-layout, styles, themes, android-theme

我在以编程方式设置“主题切换器”时遇到了一些困难。我想从应用程序（白色（Theme.Light.NoTitleBar）和黑暗（Theme.Black.NoTitleBar）之间）切换主题，我所做的是：我设置了一个SharedPreference：

```
final String PREFS_NAME = "MyPrefsFile";
    final SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    final SharedPreferences.Editor editor = settings.edit(); 
```

而且我有两个按钮来切换主题（第二个几乎相同）

```
Button ThemeWhite = (Button) findViewById(R.id.ThemeWhite);
    ThemeWhite.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            editor.putBoolean("Theme", false);
              editor.commit();
              System.exit(2);
        }
    }); 
```

在乞求每项活动时，我都会检查 SharedPreference

```
boolean theme = settings.getBoolean("Theme", false);
    if(theme){
        this.setTheme(R.style.Theme_NoBarBlack);
    } else{
        this.setTheme(R.style.Theme_NoBar);
    }

    setContentView(R.layout.aplikacja); 
```

我在文件夹值的文件*styles.xml*中定义主题：

```
<resources>
<style name="Theme.NoBar" parent="@android:style/Theme.Light.NoTitleBar" />
<style name="Theme.NoBarBlack" parent="@android:style/Theme.NoTitleBar" /> 
```

在值-v11 中：

```
<resources>
<style name="Theme.NoBar" parent="@android:style/Theme.Holo.Light.NoActionBar" />
<style name="Theme.NoBarBlack" parent="@android:style/Theme.Holo.NoActionBar" /> 
```

在值-v14 中：

```
<resources>
<style name="Theme.NoBar" parent="@android:style/Theme.DeviceDefault.Light.NoActionBar" />
<style name="Theme.NoBarBlack" parent="@android:style/Theme.DeviceDefault.NoActionBar" /> 
```

清单文件：

```
 <application
...
        android:theme="@style/Theme.NoBar" > 
```

一切都在 android >4.0 上运行良好，**但是当我使用 2.2 时，它不会改变主题**- 只是字体变白了，但没有深色背景。

我尝试检查它是否至少可以工作并更改了 Theme.NoBarBlack 的值（对于 android <3.0），它的值与 Theme.NoBar 相同，然后当我按下按钮时字体没有改变 - 正如它应该做的那样。

编辑（发现**问题**）：所以在尝试之后发现在 Android 2.2 Manifest 文件设置背景和休息，并且以编程方式更改主题仅影响文本颜色。知道为什么会这样吗？

**答案（因为我没有 10 声望）：** 在 android <3.0 上，如果

```
super.onCreate(savedInstanceState); 
```

是否在设置主题之前。

所以应该是：

```
public void onCreate(Bundle savedInstanceState) {
    setTheme(R.style.Theme_NoBar);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.lista);
} 
```

抱歉，伙计们无中生有，但是当它在> 3.0上工作时，我很困惑。花半天时间在上面，但工作。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T21:48:42.277

您的 styles.xml 中有一个错误：对于`Theme.NoBarBlack`，您将父级设置为`@android:style/Theme.NoActionBar`，但它不存在。

我想你的意思是`@android:style:Theme.NoTitleBar`。

# django - Django - 当我尝试打开管理页面时，我得到了 TemplateSyntaxError。(http://DOMAIN_NAME/admin)

> ID：12764088
> 
> 赞同：0
> 
> 时间：2012-10-06T21:35:51.397
> 
> 标签：django, django-grappelli

我使用 grappelly 插件。当我尝试打开管理页面 (/admin) 时，我得到了 TemplateSyntaxError。它说“get_generic_relation_list”是无效的块标签。

```
TemplateSyntaxError at /admin/
Invalid block tag: 'get_generic_relation_list', expected 'endblock'
Request Method: GET
Request URL:    http://DOMAIN_NAME/admin/
Django Version: 1.4
Exception Type: TemplateSyntaxError

Exception Value:    
Invalid block tag: 'get_generic_relation_list', expected 'endblock'
Exception Location: /opt/python27/django/1.4/lib/python2.7/site-packages/django/template/base.py in invalid_block_tag, line 320
Python Executable:  /opt/python27/django/1.4/bin/python
Python Version: 2.7.0
Python Path:    
['/home/vhosts/DOMAIN_NAME/httpdocs/media',
 '/home/vhosts/DOMAIN_NAME/private/new_malinnikov/lib',
 '/home/vhosts/DOMAIN_NAME/httpdocs/',
 '/home/vhosts/DOMAIN_NAME/private/new_malinnikov',
 '/home/vhosts/DOMAIN_NAME/private/new_malinnikov',
 '/home/vhosts/DOMAIN_NAME/private',
 '/opt/python27/django/1.4',
 '/home/vhosts/DOMAIN_NAME/httpdocs',
 '/opt/python27/django/1.4/lib/python2.7/site-packages/setuptools-0.6c12dev_r88846-py2.7.egg',
 '/opt/python27/django/1.4/lib/python2.7/site-packages/pip-0.8.1-py2.7.egg',
 '/opt/python27/django/1.4/lib/python27.zip',
 '/opt/python27/django/1.4/lib/python2.7',
 '/opt/python27/django/1.4/lib/python2.7/plat-linux2',
 '/opt/python27/django/1.4/lib/python2.7/lib-tk',
 '/opt/python27/django/1.4/lib/python2.7/lib-old',
 '/opt/python27/django/1.4/lib/python2.7/lib-dynload',
 '/opt/python27/lib/python2.7',
 '/opt/python27/lib/python2.7/plat-linux2',
 '/opt/python27/lib/python2.7/lib-tk',
 '/opt/python27/django/1.4/lib/python2.7/site-packages',
 '/opt/python27/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg',
 '/opt/python27/lib/python2.7/site-packages/flup-1.0.3.dev_20100525-py2.7.egg',
 '/opt/python27/lib/python2.7/site-packages/virtualenv-1.5.1-py2.7.egg',
 '/opt/python27/lib/python2.7/site-packages/SQLAlchemy-0.6.4-py2.7.egg',
 '/opt/python27/lib/python2.7/site-packages/SQLObject-0.14.1-py2.7.egg',
 '/opt/python27/lib/python2.7/site-packages/FormEncode-1.2.3dev-py2.7.egg',
 '/opt/python27/lib/python2.7/site-packages/MySQL_python-1.2.3-py2.7-linux-x86_64.egg',
 '/opt/python27/lib/python2.7/site-packages/psycopg2-2.2.2-py2.7-linux-x86_64.egg',
 '/opt/python27/lib/python2.7/site-packages/pysqlite-2.6.0-py2.7-linux-x86_64.egg',
 '/opt/python27/lib/python2.7/site-packages',
 '/opt/python27/lib/python2.7/site-packages/PIL']
Server time:    Вск, 7 Окт 2012 04:19:42 +0700
Error during template rendering 
```

在模板 /home/vhosts/DOMAIN_NAME/httpdocs/templates/grappelli/admin/base.html 中，第 28 行错误无效块标记：'get_generic_relation_list'，预期为 'endblock'

```
18  <!--[if lt IE 8]>
19  <script src="http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE8.js" type="text/javascript"></script>
20  <![endif]-->
21  {% block javascripts %}
22      <script type="text/javascript" src="{% admin_media_prefix %}jquery/jquery-1.3.2.min.js"></script>
23      <script type="text/javascript" src="{% admin_media_prefix %}js/admin/Bookmarks.js"></script>
24      <script type="text/javascript">
25          // Admin URL
26          var ADMIN_URL = "{% get_admin_url %}";
27          // Generic Relations
28          {% get_generic_relation_list %}
29          // Get Bookmarks
30          $(document).ready(function(){
31              $.ajax({
32                  type: "GET",
33                  url: '{% url grp_bookmark_get %}',
34                  data: "path=" + escape(window.location.pathname + window.location.search),
35                  dataType: "html",
36                  success: function(data){
37                      $('ul#bookmarks').replaceWith(data);
38                  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:05:52.860

是的，谢谢，我已经知道了。我使用了 grappelli 2.4 版，但我需要 2.0 版。

# node.js - 使用 Dropbox API 进行多帐户同步

> ID：12764089
> 
> 赞同：4
> 
> 时间：2012-10-06T21:35:54.353
> 
> 标签：node.js, dropbox, dropbox-api

我正在尝试创建一个网络应用程序，让用户通过 Dropbox 彼此共享文件。目前，Dropbox 处理所有共享，并且在网络服务器上运行一个中央 Dropbox 帐户，与需要它的人共享文件夹。

我正在尝试更改它，这样人们就不必每次都接受新的文件夹邀请。我想让他们授权我的应用程序访问他们 Dropbox 帐户中的应用程序文件夹，并且他们所有的共享文件夹都会进入其中。他们所做的任何更改都会被服务器上的应用程序注意到并同步到其他所有人的文件夹。

有几件事我无法弄清楚以使这项工作：

1.  我需要为每个帐户重复调用 /delta 吗？我想不出我还能怎么做，但这听起来很快就会变成每分钟数千个请求，只是轮询更新。
2.  当有人添加文件时，我是否必须为每个帐户上传一次？这似乎是对带宽的巨大浪费。我已经研究过使用 /copy_ref，我认为它会在我的应用程序不接触它的情况下将文件添加到另一个用户的帐户，但我的应用程序的 Web 界面还允许用户将文件直接上传到我的服务器，然后需要同步与其他人的文件夹。该文件尚未在 Dropbox 的服务器上，因此 /copy_ref 显然不起作用。

对于一些额外的上下文，我的应用程序是用 node.js 编写的，我一直在使用[这个库](https://github.com/sintaxi/node-dbox)来与使用 REST API 的 Dropbox 交互。

# jquery - 引导程序：未捕获的类型错误：对象 [对象对象] 没有方法 'tooltip'、'typeahead'

> ID：12764090
> 
> 赞同：3
> 
> 时间：2012-10-06T21:36:06.897
> 
> 标签：jquery, jquery-ui, twitter-bootstrap

我正在尝试使用引导程序的工具提示、提前输入、日期选择器功能。但是我在控制台中不断收到这些错误！

```
Uncaught TypeError: Object [object Object] has no method 'tooltip'
Uncaught TypeError: Object [object Object] has no method 'typeahead' 
```

这就是我的导入的样子：

```
<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/datepicker.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<script type="text/javascript" src="js/jquery-1.8.0.js"></script>
<script type="text/javascript" src="js/bootstrap.js"></script>
<script type="text/javascript" src="js/bootstrap-datepicker.js"></script>
<script type="text/javascript" src="js/bootstrap-typeahead.js"></script>
<script type="text/javascript" src="js/highcharts.js"></script>
<script type="text/javascript" src="js/exporting.js"></script>
<link type="text/css" rel="stylesheet" href="css/jquery.dropdown.css" />
<script type="text/javascript" src="js/jquery.dropdown.js"></script> 
```

一些示例代码：

```
<a class="btn btn-success" data-toggle="modal" href="#payments"
           rel="tooltip" data-placement="top" title="Record your payments">
            <i class="icon-check icon-white"></i> Payments</a>

$("#payments").tooltip('show'); 
```

同样，我有 datepicker 和 typeahead 的代码。

任何解决方案？

编辑：

这是我刚才尝试的：

```
<a href="#" rel="tooltip" data-placement="top" title="Tooltip on top">Test</a>

<script type="text/javascript">
$(function() {
    $("#").tooltip().tooltip('show');
});
</script> 
```

但仍然没有成功。当我将鼠标悬停在上面时，它确实显示了工具提示文本，`Test`但它是史前时代的。不像引导示例页面上显示的那样。不酷。

所以现在谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-17T01:52:43.570

我刚刚遇到了这个问题，我的问题是我不小心包含了 jQuery 两次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T21:41:41.043

您确定引导 js 文件已正确加载吗？您还应该在以`show`编程方式调用方法之前初始化元素上的工具提示插件：

```
<a href="#" rel="tooltip" data-placement="top" title="Tooltip on top">Test</a>

<script type="text/javascript">
$(function() {
    $("a[rel='tooltip']").tooltip();
});
</script> 
```

`datepicker`这也适用于`typeahead`插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T15:27:22.307

我会尝试将您的引导脚本放在所有其他脚本之下。我遇到了同样的问题，这是因为我的引导脚本上方有一个 jQuery 脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T21:45:17.050

我可以看到您的脚本标签中不存在 bootstrap-tooltip.js。

```
<script src="js/bootstrap-tooltip.js"></script> 
```

# .htaccess - WAMP - 尾部斜杠 (/) 给出错误 500“内部服务器错误” - .htaccess 错误？

> ID：12764105
> 
> 赞同：2
> 
> 时间：2012-10-06T21:37:26.733
> 
> 标签：.htaccess, wamp

我在我的计算机上使用 WAMP，在编写我的网站时，我决定删除 .html 扩展名，以期改善美观。

这很好用，所以，就我而言， temp.jakegriffin.co.uk/index.html 变成了 /index ，这正是我想要的。不幸的是，如果有一个尾随 / 在索引之后，我会得到：

```
Internal Server Error

The server encountered an internal error or misconfiguration and was unable to complete     your request.

Please contact the server administrator, admin@localhost and inform them of the time the error occurred, and anything you might have done that may have caused the error.

More information about this error may be available in the server error log. 
```

当我尝试在 .htaccess 文件中修复此问题时，我会收到错误 403（如果我被禁止）或错误 404（如果页面不存在）。

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html 
```

那是我的 .htaccess 文件中用于删除扩展名的代码。如果有人可以帮助我，将不胜感激。

提前感谢，杰克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T21:54:48.127

尝试这个：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.+)[\/*]$ $1.html [L,NC] 
```

`index`现在您可以在;)之后添加一堆正斜杠 (/ )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:44:54.133

这个 mod_rewrite 规则：

```
 * http://planetozh.com/blog/2004/05/apache-and-the-trailing-slash-problem/

    RewriteEngine  on
    RewriteBase    /
    RewriteCond    %{REQUEST_FILENAME}  -d
    RewriteRule    ^(.+[^/])$ $1/ 
```

# windows - 安装 plesk 11 后安装 .net framework 4

> ID：12764107
> 
> 赞同：2
> 
> 时间：2012-10-06T21:37:57.073
> 
> 标签：windows, plesk, .net-framework-version

我有一台带有 plesk 11 的 Windows 2008 服务器。我安装了 plesk，在添加了几台主机后，我意识到缺少 .Net 4，所以我下载并安装了 .Net 4，但现在 Plesk 在主机配置中没有 .Net 4，我没有不知道如何告诉 Plesk 更新其数据库并允许我为我的主机选择 .net 4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T06:46:37.240

在“工具和设置\服务器组件”中尝试“刷新”

# java - 使用 Spring MVC 的绑定问题

> ID：12764114
> 
> 赞同：0
> 
> 时间：2012-10-06T21:39:36.823
> 
> 标签：java, data-binding, spring-mvc

我正在使用 Spring MVC 3.1 开发 Java Web 应用程序。我有一个 JSP，它有两个成对的单选按钮、一个输入字段和一个下拉选择框。我需要通过模型类的字段将这些值提供给我的映射控制器。

正如我之前在调试器中看到的那样，安全性和 URL 映射工作正常。问题是当我试图让 JSP 数据值填充我的模型时，我得到一个错误：

```
java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'cccForm' available as request attribute 
```

这是我的 JSP 的一部分：

```
<c:url var="cccUrl" value="/registers/default/ccPreauth/authorize" />
    <div class="mainWrapper">
    <form:form id="cccForm" action="${cccUrl}" method="post" modelAttribute="cccForm">
  ...
<table>
    <tbody>
        <tr>
            <th>Select an option.</th>
        </tr>
        <tr>
            <td>
                <div class="field-input">
                    <form:radiobutton id="paymentOption" path="paymentOption" value="authorizeCC" />
                    Collect Credit Card Information
                </div>
                <div class="field-input">
                    Authorization Amount $
                    <form:input path="authAmount" maxlength="10" size="10" class="extendWidth"/> 
                    <span class="instructions">
                        <spring:message code="label.authorization.note" />
                    </span>
                </div>
                <div class="field-input">
                    <form:radiobutton id="paymentOption" path="paymentOption" value="cancelAuth" />
                    Choose a Reason and Cancel Credit Card Collection
                </div>
                <div class="field-input right">
                    <form:select id="selectedReason" path="selectedReason" >
                        <c:forEach items="${reasonList}" var="reason">
                            <option value=${reason.reasonText}>${reason.reasonText}</option>
                            <br />
                        </c:forEach>
                    </form:select>
                </div></td>
        </tr>
    </tbody>
</table>
</div>
<div class="right">
<button class="btnBlue" id="submitButton" type="submit"> 
```

这是我的控制器的一部分：

```
 @Controller
@RequestMapping(value = "/registers/default/ccPreauth")
@SessionAttributes(ControllerConstants.DEFAULT_REGISTER_ATTR_NM)
public class CCCaptureController {

...
    @RequestMapping(value="/authorize" )
public ModelAndView authorize(
         final Authentication auth,
         final @ModelAttribute("ccCapturePaymentRequest") CCCapturePaymentForm ccCapturePaymentRequest,
         final BindingResult result,
         final HttpServletResponse response) {

      final ModelAndView mav = new ModelAndView(CC_PREAUTH_PAYMENT_VIEW);

      return mav;
} 
```

最后，这是我的模型类：

```
 public class CCCapturePaymentForm implements Serializable {

    private static final long serialVersionUID = 6839171190322687142L;
    @NumberFormat(style = Style.CURRENCY)
    private BigDecimal  authAmount;
    private String      selectedReason;
    private String      paymentOption;

    public BigDecimal getAuthAmount() {
        return authAmount;
    }

    public void setAuthAmount(BigDecimal authAmount) {
        this.authAmount = authAmount;
    }

    public String getSelectedReason() {
        return selectedReason;
    }

    public void setSelectedReason(String selectedReason) {
        this.selectedReason = selectedReason;
    }

    public String getPaymentOption() {
        return paymentOption;
    }

    public void setPaymentOption(String paymentOption) {
        this.paymentOption = paymentOption;
    }

} 
```

谁能告诉我我需要什么才能让它正常工作？请不要仅仅停留在上述异常的原因上——请验证并更正我的代码，因为我的日程安排很紧，而且对 Spring MVC 几乎没有经验。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T22:04:40.510

你的表格中有这个：

```
modelAttribute="cccForm" 
```

所以你应该在你的控制器中有这个：

```
@ModelAttribute("cccForm") CCCapturePaymentForm ccCapturePaymentRequest 
```

这就是将表单支持对象与模型属性绑定的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:24:06.590

我为那些 Spring MVC 新手找到了答案……

我必须在控制器搜索方法中将“cccForm”设置为我的下一页表单的新实例（然后尝试启动出现错误的页面）。

简而言之：我必须在前面的控制器方法中设置空的支持 bean 值，以便后续方法和 JSP 页面可以使用它。

希望这可以帮助其他人避免我的错误。标记

# java - 从 Java FX 窗格中移除焦点

> ID：12764119
> 
> 赞同：0
> 
> 时间：2012-10-06T21:40:00.543
> 
> 标签：java, javafx, pane

我正在尝试使用 Java FX 制作我自己的 GUI，但我似乎无法找到让最小化按钮工作的方法。我没有屏幕顶部的菜单，所以你不能只使用它。有没有办法让它发生，或者这只是一个失败的原因？

# sitecore - 事件处理程序项：已保存 - 失败？

> ID：12764120
> 
> 赞同：-1
> 
> 时间：2012-10-06T21:40:02.653
> 
> 标签：sitecore

我有以下 .cs 文件；

```
using System;
using System.Collections.Generic;
using Sitecore.Data;
using Sitecore.Data.Items;
using Sitecore.Diagnostics;
using Sitecore.Events;
using Sitecore.SecurityModel;

namespace LocationItemEventHandler
{
    public class ItemEventHandler
    {
        private static readonly SynchronizedCollection<ID> MProcess = new SynchronizedCollection<ID>();

        /// <summary>
        /// This custom event auto-populates latitude/longitude co-ordinate when a location item is saved
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="args"></param>
        protected void OnItemSaved(object sender, EventArgs args)
        {
            var item = Event.ExtractParameter(args, 0) as Item;

            if (item != null && !MProcess.Contains(item.ID))
            {
                if (item.TemplateID.Equals("{E490971E-758E-4A75-9C8D-67EC2C6321CA}"))
                {
                    string errMessage = "";
                    string responseCode = "";
                    string address = item.Fields["Address"].Value;
                    if (1=1)
                    {
                        string latitude = "100";
                        string longitude = "200";

                        MProcess.Add(item.ID);

                        try
                        {
                            var latlngField = item.Fields["Google LatLng"];
                            using (new SecurityDisabler())
                            {
                                item.Editing.BeginEdit();
                                latlngField.SetValue(latitude + " - " + longitude, true);
                                Sitecore.Context.ClientPage.ClientResponse.Alert(
                                string.Format(
                                "Fields updated automatically\r\nLatitude: {0}\r\nLongitude: {1}",
                                latitude, longitude));
                                item.Editing.EndEdit();
                            }
                        }
                        catch (Exception exception)
                        {
                            Log.Error(exception.Message, this);
                        }
                        finally
                        {
                            MProcess.Remove(item.ID);
                        }
                    }
                }
            }
        }
    }
} 
```

这是在一个代码文件`LocationItemEventHandler.cs`中`App_Code`。这是在 web.config

```
<event name="item:saved">
<handler type="LocationItemEventHandler.ItemEventHandler, LocationItemEventHandler" method="OnItemSaved"/>
</event> 
```

当我尝试保存项目时，我得到“无法解析类型名称”。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T22:01:51.440

您配置的类名与实际类名不匹配。

编辑：如果处理程序在 App_Code 中，我相信你应该在类型引用中去掉程序集名称。更好的是，不要使用 App_Code。

# php - 使用 php DOMXPath 获取选定的选项

> ID：12764124
> 
> 赞同：1
> 
> 时间：2012-10-06T21:40:33.017
> 
> 标签：php, xpath, domdocument

我正在使用 curl 并尝试使用 DOMXPath 从选择列表中获取选定的项目我很接近，我可以获得选择及其选项，只是无法弄清楚如何判断一个是否被选中。

所以这是我到目前为止的代码。我可以获得选择名称和所有选项文本和值

```
$newDom = new domDocument;
$newDom->loadHTML($result);
$xpath = new DOMXPath($newDom);
$values = $xpath->evaluate("/html/body//select");
for ($cnt = 0; $cnt < $values->length; $cnt++) {
       $value = $values->item($cnt);
       $name = $value->getAttribute('name');
       $options = $xpath->query("*/select[@name='".$name."']/option");
       foreach ($options as $option) {
           $optionValue = $option->getAttribute('value');
           $optionContent = $option->nodeValue;
       }
}

So i replaced

$options = $xpath->query("*/select[@name='".$name."']/option"); 
```

和

```
$options = $xpath->query("*/select[@name='".$name."']/option[@selected='selected']"); 
```

现在 $options 是空的

html看起来像

```
<select name=inc_paytype>
<option value="0">None<option value="1">Cash/Check<option value="2" selected>Credit<option value="3">ECash<option value="4">EFT<option value="5">Credit once, then cash/check
 </select> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T02:53:49.130

我找到了答案。不完美但有效。

```
$xpath = new DOMXPath($newDom);
$options = $xpath->query('/html/body//select');
foreach ($options as $option) {
       $name =$option->getAttribute('name');
       $children = $option->childNodes;
       foreach ($children as $child) {
            $tmp_doc = new DOMDocument();
            $tmp_doc->appendChild($tmp_doc->importNode($child,true));       
            if ( strstr( $tmp_doc->saveHTML() , "selected" ) ){
                 $optionValue = $child->getAttribute('value');
                 $optionContent = $child->nodeValue;
            }
       }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-09T05:05:28.567

您可以在 HTML 文件中将“selected”替换为 selected="selected"，然后

```
$options = $xpath->query("//select[@name='".$name."']/option[@selected='selected']/@value"); 
```

这对我有用。

# java - hibernate 双向一对一映射

> ID：12764126
> 
> 赞同：0
> 
> 时间：2012-10-06T21:40:51.800
> 
> 标签：java, hibernate, one-to-one

我试图弄清楚如何在给定以下先决条件的情况下定义一对一的关系/注意在 Schedule 类中没有对 Activity 的引用/。我无法插入两个密钥。我在这里[一对一地](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/associations.html#assoc-bidirectional-121)查看，但仍然无法正常工作 - Activity 中的 Schedule 主键未插入：

有2张桌子：

```
activity table
activity_id
name
...
schedule (fk schedule) 
```

* * *

```
schedule table
schedule id
name
..
activity_id(fk activity) 
```

* * *

宝约：

```
class Activity{
private int activity_id;
private String name;
private Schedule schedule;

..
getters + setters
} 
```

* * *

```
class Schedule{
private int schedule_id;
private String name;
..
getters + setters
} 
```

# jquery - jslots扩展

> ID：12764127
> 
> 赞同：0
> 
> 时间：2012-10-06T21:41:02.323
> 
> 标签：jquery

我正在使用一个 jquery 老虎机插件并想扩展一点，但无法弄清楚它是如何工作的。

[https://github.com/matthewlein/jQuery-jSlots](https://github.com/matthewlein/jQuery-jSlots)

目前，该演示以一次只显示一个的方式使用它`<li>`。我想扩展它，这样你就可以看到`<li>`上面的一半和`<li>`下面的一半，有点像真正的老虎机，在那里你可以看到即将到来的和离开可见区域的东西。

所以，我垂直扩展了容器，我可以看到`<li>`'s 之前和之后但是，奇怪的事情发生在底部，`<li>`消失了，然后（我假设）被附加到顶部。如果我在列表中将其设为 5+ ，它仍然会发生`<li>`。如果我增加 .slot 大小，它仍然会发生，但仍然用较短的容器高度限制它。

你会注意到这个小提琴，当你点击播放时，你会看到底部的白色背景显示出来。当他们放慢速度时，情况会变得更糟。有时当他们停止时，它会停止并缺少底部...我已将 jslots.js 文件附加到小提琴资源中

[http://jsfiddle.net/livinzlife/3bVe9/1/](http://jsfiddle.net/livinzlife/3bVe9/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:57:23.063

将以下内容添加到`li`元素的 CSS 中：

```
margin-top: 72px;     /*half of the height */
margin-bottom: -72px; /*half of the height (negative)*/ 
```

所以`.slot li`变成：

```
.slot li{
    width: 190px;
    height: 144px;
    background-color: blue;
    float: left;
    margin-top: 72px;     /*half of the height */
    margin-bottom: -72px; /*half of the height (negative)*/
} 
```

**更新：**

要消除背景颜色问题，`background-color: yellow;`请在`jSlots-wrapper`类中添加：

```
.jSlots-wrapper {  
    overflow: hidden; /* to hide the magic */  
    height: 296px; /* whatever the height of your list items are */  
    display: inline-block; /* to size width correctly, can use float too, or width*/  
    border: 1px solid #999;  
    position: absolute;
    width:570px;
    /*bottom: 130px;*/
    margin-top: 2em;
    left:50%;
    margin-left: -285px;
    padding: 0;
    background-color: yellow;
} 
```

**更新：**

的原理也`background-color`适用于图像。只需将`background-image`类的设置`.jSlots-wrapper`为您用于最后一个`li`元素的图像并将其垂直偏移（负）`li`高度的一半

更新小提琴： http: [//jsfiddle.net/3bVe9/6/](http://jsfiddle.net/3bVe9/6/)用于概念验证（使用 GIS 获得的图像，用于大小为 256x256 的“随机图像”）

**更新：**

好的，更改`.slot li`from 的 CSS 定义：

```
margin-top: 72px;     /*half of the height */
margin-bottom: -72px; /*half of the height (negative)*/ 
```

到：

```
margin-top: -72px;     /*half of the height (negative) */
margin-bottom: 72px;   /*half of the height*/ 
```

所以`.slot li`变成：

```
.slot li{
    width: 190px;
    height: 144px;
    margin-top: -72px;     /*half of the height (negative) */
    margin-bottom: 72px;   /*half of the height*/
    background-color: blue;
    float: left;
    background-size: 190px 144px;
} 
```

并将 CSS 更改恢复为`.jSlots-wrapper`类定义，问题已完全解决（对于颜色和图像，这是另一个小提琴：http: [//jsfiddle.net/3bVe9/7/](http://jsfiddle.net/3bVe9/7/)

这会调整插槽，使第一个`li`向上偏移，第二个`li`是中间起始点。每次点击播放按钮时都能完美运行。

# python - 我在复制目录时遇到问题

> ID：12764138
> 
> 赞同：0
> 
> 时间：2012-10-06T21:44:05.450
> 
> 标签：python

我正在尝试复制我的 Automater 工作流程，我已将它们列在配置文件中，并且我想遍历配置文件并复制目录。他们的名字中有空格，我遇到了麻烦。

它正确打印文件名等，但复制失败，因为副本名称周围似乎有额外的“”

```
import os
import shutil

confdir=os.getenv("my_config")
dropbox=os.getenv("dropbox")
conffile = ('services.conf')
conffilename=os.path.join(confdir, conffile)    
sourcedir= (r'~/Library/Services/')
destdir=os.path.join(dropbox, "My_backups")

for file_name in open(conffilename):
    sourcefile=os.path.join(sourcedir, repr(file_name.strip()))
    print sourcefile
    destfile=os.path.join(destdir, file_name.strip())
    shutil.copytree(sourcefile, destfile) 
```

错误是

```
~/Library/Services/'Add PDF Metadata.workflow'
Traceback (most recent call last):
  File "Untitled 3.py", line 15, in <module>
    shutil.copytree(sourcefile, destfile)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/shutil.py",     line 168, in copytree
    names = os.listdir(src)
OSError: [Errno 2] No such file or directory: "~/Library/Services/'Add PDF Metadata.workflow'" 
```

提前致谢

我已经尝试了以下建议，但仍然无法正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:47:19.390

你为什么用`repr()`on `file_name.strip()`？这将用单引号将您的文件名括起来 - 并且文件路径中不存在这些引号。删除`repr()`，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:59:51.137

[`shutil.copytree(src, dst)`](http://docs.python.org/library/shutil.html#shutil.copytree)将递归地将位于 的目录树（以及其中的所有文件）复制到位于`src`的新目录树`dst`。它不适用于文件。

在这里，您要复制单个文件，而不是完整的目录树，您应该只使用[`shutil.copy`](http://docs.python.org/library/shutil.html#shutil.copy)or `shutil.copy2`。

如果文件可能位于您想要重现的目录树中，那么您可以使用 在调用之前[`os.makedirs`](http://docs.python.org/library/os.html#os.makedirs)返回的路径将文件实际复制到.[`os.path.dirname(destfile)`](http://docs.python.org/library/os.path.html#os.path.dirname)`shutil.copy(sourcefile)``destfile`

但是，请注意， `os.makedirs`使用已经存在的目的地调用会引发错误，因此您可能想要`try / except`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:12:01.270

它不喜欢 ~ 我把完整路径放进去。我也刚刚编辑了一点，并使用 sourcedir=os.path.expanduser('~/Library/Services/') 来展开主目录

# ruby-on-rails - 通过将外键添加到 attr_accessible 来解决“无法批量分配受保护的属性”

> ID：12764140
> 
> 赞同：1
> 
> 时间：2012-10-06T21:44:32.457
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, attr-accessible

我需要创建一个允许创建和更新项目的 CRUD，其中一个属性是拥有该项目的客户端。创建或编辑项目时，使用选择标签选择客户端。

我有这个模型：

```
class Cliente < ActiveRecord::Base
  attr_accessible :nombre
  has_many :proyectos
end

class Proyecto < ActiveRecord::Base
  attr_accessible :nombre, :cliente_id
  belongs_to :cliente
end 
```

这个控制器：

```
class ProyectosController < ApplicationController
  def new
    @proyecto = Proyecto.new
    @clientes = Cliente.order(:nombre)
  end

  def edit
    @proyecto = Proyecto.find(params[:id])
    @clientes = Cliente.order(:nombre)
  end

  def create
    @proyecto = Proyecto.new(params[:proyecto])
      if @proyecto.save
        redirect_to @proyecto, notice: 'Proyecto was successfully created.'
      else
        render action: "new"
      end
    end
  end

  def update
    @proyecto = Proyecto.find(params[:id])
    if @proyecto.update_attributes(params[:proyecto])
        redirect_to @proyecto, notice: 'Proyecto was successfully updated.'
      else
        render action: "edit"
    end
  end
end 
```

和视图上的这个表格（在haml中）：

```
= form_for @proyecto do |f|
  = f.label :cliente
  = f.collection_select :cliente_id, @clientes, :id, :nombre
  = f.label :nombre
  = f.text_field :nombre
  = f.submit 'Save' 
```

代码是用脚手架生成的，我只是删除了不必要的部分并添加了代码来创建选择。

最初，在 Proyecto 模型上，我有这个：

```
attr_accessible :nombre 
```

但收到错误“无法批量分配受保护的属性：cliente_id”。在这里在stackoverflow上搜索类似的问题，发现必须将cliente_id添加到attr_accessible，但在google上搜索也发现由于安全问题，我必须不添加外键到attr_accessible，这是矛盾的。

这是对我的创建和更新方法进行编码的正确方法，将 cliente_id 添加到 attr_accessible？如果没有，正确的方法是什么？

我正在使用 rails 3.2.8 和 ruby​​ 1.9.3p194

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T22:36:54.630

在这种情况下，您必须将 client_id 作为 attr_accessible。原因是您允许用户通过表单上的选择框设置客户端。

然而，这带来了安全问题。想象一下，您只向特定用户展示了他可以从中选择的 3 个不同客户端（ID：1、2、3）。如果用户手动修改表单，他可以将 ID #4 的客户端分配给他的项目，这可能是一个安全问题，也可能只是一个错误。

要关闭安全问题，请向您的项目模型添加验证，以确保客户端 ID 有效。

# c# - 实体框架数据注释对 DDD 和关注点分离不利吗？

> ID：12764143
> 
> 赞同：4
> 
> 时间：2012-10-06T21:45:05.910
> 
> 标签：c#, asp.net-mvc, entity-framework, entity-framework-4, domain-driven-design

我已经工作了很长时间来学习如何实现 DDD、IoC 并确保我的应用程序中存在关注点分离。我也在尝试进入测试优先开发的方式。

不知何故，实体框架给医学带来了一些麻烦。我有一个域项目来保存我的域对象（其中许多现在是 POCO 类，但有一些行为）。这是遗留代码，我尝试对其进行重构，但 MVC 在很大程度上依赖于 Dataannotations 进行验证。

datavalidation-attributes 设置在域对象上，将它们与实体框架联系起来。大多数关于 EF 的教学视频和文档也使用了域对象的许多属性。

**所以我想知道这真的是一件好事吗？**

我喜欢许多属性的想法，但是将它们放在域对象上的结果让我觉得实体框架是应用程序的核心，而不是域对象。

你有解决这个问题的任何提示，或者应该是这样吗？

**更新：**

下面建议的答案使我找到了[Ladislav Mrnka回答的这篇文章](https://stackoverflow.com/questions/8894367/how-to-make-fluent-api-configuration-work-with-mvc-client-side-validation)

对我来说，如果它解决了我的问题，这听起来可能是最好的方法。他还指出了与域层中的属性相同的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T22:01:51.627

您对[Code First Fluent API 验证](http://msdn.microsoft.com/en-us/data/gg193959.aspx)感觉更好吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T22:15:19.740

一些属性与 EF 和 MVC 相关 - 描述您的类的属性。必填字段，最小和最大长度等...如果您真的想分离所有内容，我会将这些属性保留在您的域对象上，将数据库内容（外键等）放入 FluentAPI 和 MVC 内容（显示名称等...）在视图模型上。

如果 MVC 4 恰好支持 FluentAPI（我使用的是 MVC 3，它不支持，不知道 4），你绝对应该使用它。

# backbone.js - 使用主干和木偶的模板中的关系模型和变量引用

> ID：12764149
> 
> 赞同：0
> 
> 时间：2012-10-06T21:45:31.433
> 
> 标签：backbone.js, marionette, backbone-relational

我正在搞乱骨干、木偶，想知道我应该如何处理关系模型。我的主要原因是我希望能够在同一个模板中使用两个不同相关模型中的数据。例如

```
Thing = Backbone.Model.extend({defaults: {label: null, uri: null}});
Things = Backbone.Collection.extend({model: Thing});

Relationship = Backbone.Model.extend({defaults: {subject: null, predicate: null, object: null}});
Relationships = Backbone.Collection.extend({model: Relationship});

var things = new Things([
    new Thing({label: 'Sam', uri: 'AAAA'}),
    new Thing({label: 'is friends with', uri: 'BBBB'}),
    new Thing({label: 'Violet', uri: 'CCCC'}),
    new Thing({label: 'Fred', uri: 'DDDD'})
]);

var relationships = new Relationships([
    new Relationship({subject: "AAAA", predicate: "BBBB", object: "CCCC"}),
    new Relationship({subject: "AAAA", predicate: "BBBB", object: "DDDD"})
]); 
```

因此，关系数组只是保存对与 uri 属性匹配的 Things 数组中的项目的引用。我想在关系模板中做的是这样的（使用点表示法获取关联的事物模型数据）：

```
<script type="text/template" id="relationship-template">
    <td><%= subject.label %></td>
    <td><%= predicate.label %></td>
    <td><%= object.label %></td>
</script> 
```

有什么想法是处理这个问题的最佳方法吗？我想避免在内存中重复内容。

结果应该是：

山姆是紫罗兰的朋友

山姆是弗雷德的朋友

我看过 Backbone 关系，但没有任何运气让它工作:(

这是我尝试过的：

```
Relationship = Backbone.RelationalModel.extend({
    relations: [
        {
            type: Backbone.HasOne,
            key: 'subject',
            keySource: 'uri',
            keyDestination: 'subjectObject',
            relatedModel: Thing
        }
    ]
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T00:59:07.963

啊——我明白了——

它正在寻找一个 ID 字段来映射您所拥有的任何内容 - 所以我将 uri 重命名为 id ，一切都很好。太糟糕了，您无法明确告诉它要映射到哪个字段。

# php - 大整数乘积的差分算法

> ID：12764150
> 
> 赞同：0
> 
> 时间：2012-10-06T21:45:44.800
> 
> 标签：php, sql, algorithm, integer

我正在寻找一种算法来解决 ab-cd 类型的差异，其中 a、b、c 和 d 是类型容量边缘的整数，即 ab 溢出或丢失数字取决于机器上的实际表示. 我不能使用任意精度的数学；其中一个平台将是 SQL 数据库。

我考虑将产品分解为 (a'+a'')b-(c'+c'')d 然后以某种方式向下迭代。但可能有一种更有效的方法，或者至少有一个聪明的想法来进行分解。不幸的是，在大多数情况下，a，b；光盘; a, c; b,d 互质，所以至少减少并不简单。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T22:04:44.607

* * *

## 警告

这种方法只是部分功能。有解决不了的情况。

* * *

取自您的文字：

> 我正在寻找一种算法来解决 ab-cd 类型的差异，其中 a、b、c 和 d 是类型容量边缘的整数，

据我了解，您想要计算`(a * b) - (c * d)`避免数字溢出。你想用算法解决这个问题。

我们需要认识到的第一件事是结果`(a * b) - (c * d)`可能不适合数据类型。我不会尝试解决这些情况。

所以，我会寻找不同的方法来计算“ab-cd”。我发现的是这样的：

```
(a * b) - (c * d) = ((a - c) * b) - (c * (d - b)) 
```

您可以重新排序变量以获得不同的产品，从而增加找到允许您计算操作而不会出现可怕的数字溢出的案例的机会：

```
((a - d) * b) - (d * (c - b))
((b - c) * a) - (c * (d - a))
((a - c) * b) - (c * (d - b))
((b - d) * c) - (b * (c - a))
((a - d) * c) - (a * (c - b))
((b - c) * d) - (b * (d - a))
((a - c) * d) - (a * (d - b)) 
```

另请注意，这仍然是产品的差异，这意味着您可以递归地应用它们，直到找到有效的产品。例如：

```
 Starting with:
        (a * b) - (c * d)
    =>
    Using the transformation:
        ((a - d) * b) - (d * (c - b))
    =>
    By substitution:
        (e * b) - (d * f)
    =>
    Rinse an repeat:
        ((e - f) * b) - (f * (d - b)) 
```

当然，我们需要确保这样做不会导致数字溢出。值得庆幸的是，还可以使用以下方法测试特定产品是否会导致数字溢出（而不实际执行产品）：

```
 var max = MaxValue;
        var min = MinValue;
        if (a == 0 || b == 0)
        {
            return false;
        }
        else
        {
            var lim = a < 0 != b < 0 ? min : max;
            if ((a < 0 == b < 0) == a < 0)
            {
                return lim / a > b;
            }
            else
            {
                return lim / a < b;
            }
        } 
```

此外，还可以使用以下方法测试特定差异是否会导致数字溢出（实际上不做差异）：

```
 var max = MaxValue;
        var min = MinValue;
        if (a < 0 == b < 0)
        {
            return true;
        }
        else
        {
            if (a < 0)
            {
                if (b > 0)
                {
                    return min + b < a;
                }
                else
                {
                    return min - b < a;
                }
            }
            else
            {
                if (b > 0)
                {
                    return max - b > a;
                }
                else
                {
                    return max + b > a;
                }
            }
        } 
```

有了它，就可以从上面的八个中选择一个表达式，这样您就可以在没有数字溢出的情况下进行计算。

但是......有时这些都不起作用。似乎在某些情况下，甚至它们的组合都不起作用（即冲洗和重复不起作用）*。或许还有其他身份可以补全画面。

*：我确实尝试使用一些启发式来探索组合，也尝试过随机探索，存在我没有选择好的启发式并且我没有随机“运气”的风险。这就是为什么我不能确定。

我想我已经取得了一些进展......但是关于最初的问题我最终失败了。可能当我有更多时间时我会回到这个问题......或者我可能只是玩电子游戏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T23:34:20.223

我所知道的解决此类问题的标准方法是像人类一样处理超过一位数的数字，这是我们用手指自然计数的极限。我们`carry`向前编号。

例如，假设您的数字计算器中的数字*限制为 256 (2^8)。*为了得到 (243*244)-(242*245) 的差异，我们需要将数字分解为

```
Label | Part 1 (shifted 2 right) | Part 2 (remainder)
a       2                           43
b       2                           44
c       2                           42
d       2                           45 
```

您需要一个数组来存储结果的各个数字或字符串。我认为数组更快，但字符串更方便和可见（用于调试）。

```
 (a*b)-(c*d)
=>   a1*b1 shift4 + a1*b2 shift2 + a2*b1 shift2 + a2*b2
   - c1*d1 shift4 + c1*d2 shift2 + c2*d1 shift2 + c2*d2
=> 987654321 (right-aligned string positioning)
  +    4xxxx
  +     88xx
  +     86xx
  +     1892
  -    4xxxx
  -     90xx
  -     84xx
  -     1890
  ==========
           2 
```

一个简单的实现将独立完成每个步骤，将每个数字推入到位并在必要时将其推进。可能有大量关于优化这些算法的文献，例如将其分解为每个 2 位数的数组槽（因为您的 number-limit 256 寄存器可以轻松处理 2 个 2 位数的加法）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T21:48:05.257

如果您的产品接近 Int32 的限制，您可以使用 Int64。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T19:48:39.040

在玩了一点之后，我发现了一个更简单的算法，遵循我最初的想法。它可能比组合乘法要慢一些，因为它需要真正的乘法和除法，而不仅仅是移位和加法，但到目前为止我还没有对抽象语言的性能进行基准测试。

想法如下重写 ab-cd = (a'+q*d)b-cd = a'b-(c-qb)d = a'b-c'd

如果您将 a>b 和 c>d 排序为 a>b 和 c>d，则该算法似乎转换最快，即减少最大数字并最大化 q。

```
q=(int)floor((a>c)? a/d : c/b);
a -= q*d;
c -= q*b; 
```

现在重新排序并重新开始。只要所有数字都小到可以安全乘法，任何数字都小于 2 甚至为负数，或者两边的任何数字都找到相同的值，您就可以完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T21:57:39.117

您可以使用[BC 数学函数](http://www.php.net/manual/en/ref.bc.php)来处理 32 位和 64 位系统上的大数

大数示例

```
$a = "4543534543543534543543543543545";
$b = "9354354546546756765756765767676";
$c = "5654656565656556565654656565656";
$d = "4556565656546546546546546356435" ;

var_dump(calculate($a, $b, $c, $d)); 
```

输出

```
string '257010385579862137851193415136408786476450997824338960635377204776397393100227657735978132009487561885957134796870587800' (length=120) 
```

使用的功能

```
function calculate($a, $b, $c, $d) 
{
    return bcmul(bcmul(bcmul(bcsub($a, $c),bcsub($a, $d)),bcsub($b, $c)),bcsub($b, $d));
} 
```

# visual-c++ - VC++ 2012 和 Boost 不兼容 - 库头文件中的“throw()”规范

> ID：12764151
> 
> 赞同：0
> 
> 时间：2012-10-06T21:45:56.077
> 
> 标签：visual-c++, exception, boost, boost-format

我有一个无法使用 boost::format 的新项目。我收到一个编译器错误，抱怨 boost 对虚函数 ~basic_altstringbuf 的覆盖缺少“throw()”。即使是最简单的使用 boost::format 的尝试也是如此。

我还有其他项目可以正常工作。我已经验证新项目使用相同的包含路径进行 boost 和 VC++ 包含。所有项目都将“启用 C++ 异常”设置为“是”。我能想到的唯一解释是，工作的项目有一些#DEFINE 或一些设置，这些设置会禁用 std:: 包含文件中的那些恶意异常规范。但我不知道它可能是什么或在哪里。有任何想法吗？

> 错误 1 ​​错误 C2694: 'boost::io::basic_altstringbuf::~basic_altstringbuf(void)': 重写虚函数的异常规范比基类虚成员函数 'std::basic_streambuf<_Elem,_Traits>::~basic_streambuf （无效）抛出（）

编辑：推论问题：VS++ 2012 中是否有一个属性项会导致 std:: 头文件被包含在没有异常规范的情况下？- 没有关闭异常，是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T21:54:25.663

应绿色复选标记原所有者的要求，我提交此摘要。

1.  这些错误位于 Microsoft 方面，位于 C++ 标准库接口的头文件中，以及未设置“禁用语言扩展”时的 VC++ 编译器中。头文件包含标准不要求的异常规范。未启用“语言扩展”时，编译器接受无效代码。我已经提交了[错误报告。](https://connect.microsoft.com/VisualStudio/feedback/details/766514/incorrect-exception-specifier-in-vc-header-file-causes-correct-user-code-not-to-compile#tabs)

2.  在这种特定情况下，Boost 可以通过将七个字符添加到嵌套包含文件中来解决该问题，即 alt_sstream_impl.hpp 中第 65 行的“throw()”。我也用 boost 提交[了一份报告](https://svn.boost.org/trac/boost/ticket/7477)，尽管我明确表示该错误不在他们的代码中。我只是建议一种解决方法。

所有繁琐的细节都在上面链接的两个报告中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T23:06:46.260

检查预处理器定义。

您可以打开并检查详细日志记录以查看传递给的确切标志`cl.exe`

您可以保留预处理的源并将旧（工作）项目的版本与新（失败）项目的版本进行比较。

我的直觉说，在旧项目中使用 -D #定义/传递了其他东西，而新项目中没有定义，不同的是（想想`WINVER`类型宏）

* * *

### 查看发布的新答案：[VC++ 2012 and Boost incompatibility - `throw()` specification in library headers](https://stackoverflow.com/questions/12764151/vc-2012-and-boost-incompatibility-throw-specifications-in-library-header/12773189#12773189)

~~^(由 OP 编辑​​，Jive Dadson - 结果是 /Za，它启用/禁用“Microsoft 语言扩展”。Visual Studio 的论点是 C++ 标准要求如果程序在“throw()”类别中的虚拟函数覆盖比它覆盖的函数的限制更小，则该程序不得编译。Boost 有一个派生自 basic_streambuf 的类，并且有一个缺少“throw()”的虚拟析构函数。原来的破坏者有那个邪恶的花环。如果我打开 MS 语言扩展，我的新项目将编译 boost::format。)~~

~~^(那么问题就变成了，谁错了，怎么错了？将 throw() 放在该析构函数上是否符合标准？所需的行为（即我想要的）实际上是“扩展”吗？我似乎记得 MS 认为某些标准 C++11 功能是“扩展”，但我不确定我是否记得正确。无论如何，如果他们有兴趣，我会让助推器决定。[https://svn.boost.org/trac/boost/ticket/7477](https://svn.boost.org/trac/boost/ticket/7477))~~

# c++ - 如何使用 c++ 中的 bios 中断监视 Windows 中的所有文件更改？

> ID：12764155
> 
> 赞同：0
> 
> 时间：2012-10-06T21:46:18.620
> 
> 标签：c++

我想使用 c++ 中的 BIOS 中断监视 Windows 中的所有文件更改，但不知道该怎么做。有人可以帮我吗？我尝试了 Windows API，但它无法监视 Windows 中的所有文件更改。它只是监视特殊目录中的文件更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T21:53:07.643

在 Windows 中，监视硬盘驱动器中断级别的变化是不切实际的，因为 Windows 内核会处理它并且它没有打开。

您也可以监视所有进程及其对硬盘的更改。看看：http: [//yaprocmon.sourceforge.net/](http://yaprocmon.sourceforge.net/)它是开源的，所以你可以尝试学习它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T22:02:43.367

Windows 使用本机 API 发送有关文件更改的通知。而且它不一定使用 BIOS。

看看[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365261(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365261%28v=vs.85%29.aspx)

# java - 如何在java中计算组合？通过使用记忆？

> ID：12764158
> 
> 赞同：0
> 
> 时间：2012-10-06T21:46:55.903
> 
> 标签：java, recursion, memoization

我自己正在学习 JAVA，我现在正在学习记忆。但我有点迷失方向......

有没有人有一些关于如何通过使用递归和使用记忆来加速算法来计算 Java 组合的示例代码？

就像计算 C5,3 = 5*4*3/3*2*1 = 10 的方法一样？但使用递归？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:12:35.113

让我们用一个例子来做**20 选择 5**

由于 `20 choose 5`定义为`20! / ( 5! * (20-5)! )`

我们可以`memoization`用来存储这些阶乘计算，这样我们就不必在递归下不断地重新计算它们。

所以：

```
 //STORING FACTORIAL COMPUTATIONS
    private Map<Integer,Long> factorialMap = new HashMap<Integer,Long>();

    public Long getFactorial(int number) {

        //CHECK IF I ALREADY COMPUTED THIS FACTORIAL
        Long val = factorialMap.get(number);
        if(val != null) {
            //GOT IT!
            return val;
        } else {
            //NEED TO COMPUTE!
            val = getFactorialRecursive(number);
            //STORING IT TO SAVE COMPUTATION FOR LATER
            factorialMap.put(number, val);
            return val;
        }
    }

    //RECURSIVE FUNCTION TO COMPUTE FACTORIAL
    public Long getFactorialRecursive(int number) {
        if(number < 2) {
            return 1L;
        } else {
            return number * getFactorialRecursive(number-1);
        }
    }

    //ACTUAL CALL TO "20 choose 5"
    public Long combination(int fromVal, int chooseVal) {
        return getFactorial(fromVal)/(getFactorial(chooseVal)*getFactorial(fromVal-chooseVal));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:50:40.263

您可以在`combinatoricslib`此处免费使用该库：

[http://code.google.com/p/combinatoricslib/](http://code.google.com/p/combinatoricslib/)

# javascript - 在多个 Javascript 函数中做数学运算

> ID：12764162
> 
> 赞同：3
> 
> 时间：2012-10-06T21:47:47.760
> 
> 标签：javascript

我是 Javascript 世界的新手，并试图弄清楚我老师分配的这个作业。以下是他对预期内容的描述：

1.  构建一个将启动程序的函数。请称之为 start()

2.  从 start() 函数调用一个名为 getValue() 的函数

3.  getValue() 函数将从用户那里得到一个平方数。

4.  同样从 start 函数，调用一个名为 makeSquare() 的函数

5.  makeSquare() 函数将对用户在 getValue() 函数中收到的数字进行平方。

6.  确保在 makeSquare() 函数中显示平方数的结果。

这是我到目前为止所拥有的：

```
function start() {

    getValue();
    getSquare();
}

function getValue() {

    var a = prompt("Number please")
}

function getSquare() {

    var b = Math.pow(a)
    document.write(b)
}

start() 
```

此分配不必使用任何 HTML 标记。我只有提示框可以工作，但没有其他功能。我是否以无法使用的方式使用变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T22:05:10.830

你很亲密。但是您似乎不了解范围以及如何准确使用该`pow`功能。

### 数学.pow：

`Math.pow`接受两个参数，基数和指数。在您的示例中，您只提供基础。这将导致问题，因为函数将返回值`undefined`并将其设置为`b`. 这就是它应该看起来的样子（如果你想平方它）：

```
Math.pow(a, 2); 
```

### 范围：

每个函数都有自己的作用域。您可以从函数内部访问在函数外部创建的其他变量和函数。但是您不能访问在另一个函数中创建的函数和变量。举个例子：

```
var c = 5;

function foo() { // we have our own scope
   var a = c; // Okay
}

var b = a; // NOT okay. a is gone after the function exits. 
```

我们可以说一个函数是私有的。唯一的例外是我们可以从函数中*返回*一个值。`return`我们使用关键字返回值。它旁边的表达式是函数的返回值：

```
function foo() {
    return 5;
}

var a = foo(); // a === 5 
```

`foo()`不仅调用函数，而且返回它的返回值。未指定返回值的函数的返回值为`undefined`。无论如何，在您的示例中，您可以这样做：

```
function getValue() {
    var a = prompt("Number please")
} 
```

并像这样访问它：

```
// ...
var b = Math.pow(a) 
```

您现在看到错误了吗？`a`是在函数中定义的，所以不能在函数之外访问。

这应该是修改后的代码（注意：始终使用分号。我在必要时将它们包括在内）：

```
function start() {
    getSquare();
}

function getValue() {

    var a = prompt("Number please");
    return a;
}

function getSquare() {

    var b = Math.pow(getValue(), 2); // getValue() -> a -> prompt(...)
    document.write(b);
}

start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T00:10:53.590

你可以试试这个。

```
<script type="type/javascript">
function start(){
makeSquare(getvalue());
}

function getvalue(){
return prompt("enter a number");
}

function makeSquare(a){
var result=Math.pow(a,2);
alert(result);
}
start();
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T21:52:16.260

1.  您`getValue()`需要返回该值，以便您可以将其传递给`getSquare()`函数。

2.  在我看来，您应该始终以`;`

3.  您可能需要将用户输入解析为数字。为此，您可以使用[`parseFloat(string)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseFloat).

4.  [`Math.pow`](http://msdn.microsoft.com/en-us/library/system.math.pow.aspx)接受两个参数，因此要获得正方形，您必须`2`在调用它时作为第二个参数传递。

我用一些澄清的评论编辑了你的代码：

```
function start() {
    // Catch the value returned by the function
    var value = getValue();
    // Pass the returned value to the square-function
    getSquare(value);
}

function getValue() {
    // Parse the user input into a number, and return it    
    return parseFloat(prompt("Number please"));
}

// Let the square-function take the user input as an argument
function getSquare(a) {  
    // Math.pow takes a second argument, which is a number that specifies a power
    var b = Math.pow(a, 2);
    document.write(b);
}

start(); 
```

**另一种不太好的方法**

在 JavaScript 中，变量作用域是基于函数的。如果使用`var`关键字声明变量，则它仅可用于该函数及其子函数。如果它在没有`var`关键字的情况下声明，或者在任何函数之外声明，它就会成为一个全局变量，该页面上运行的任何代码都可以访问该变量。

也就是说，您可以去掉函数`var`内的关键字`getValue()`，这将使变量成为`a`全局变量。`getSquare()`然后，您可以按照您在示例中尝试的方式访问它。

不过，这通常不是一个好主意，因为您会“污染”全局命名空间，并且您可能会冒着意外让另一个脚本使用同名的全局变量的风险，这会导致各种麻烦，当脚本开始使用相同的变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T21:54:08.070

由于这是一个家庭作业，我不会直接回答你，但这里有一些线索。

在 javascript 中，变量是作用域的函数。这意味着`var a`内部`getValue`仅在其中可用。

您可以`return`从函数中获取值。

函数是 javascript 中的第一类对象，因此您可以将它们作为参数传递给其他函数，最后在该函数中调用它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T22:02:00.400

> 我是否以无法使用的方式使用变量？

是的，这就是你的问题所在。大多数编程语言中的变量都有一个*范围*来确定它们在哪里可用。在您的情况下，`a`和`b`分别是函数和的*局部*变量。这意味着它们在声明它们的函数之外不可用。`getValue()``makeSquare()`

一般来说，这是一件好事。您应该对变量使用受限范围，以使程序中的数据“流”更清晰。使用返回值和参数在函数之间传递数据，而不是使变量成为全局变量：

```
function start() {
    var a = getValue();
    makeSquare(a);
}

// Return a value entered by the user
function getValue() {
    return prompt("Number please")
}

// Write the square of the `a` parameter into the document
function makeSquare(a) {
    var b = Math.pow(a)
    document.write(b)
} 
```

# javascript - Javascript将函数的输出保存到站点？

> ID：12764163
> 
> 赞同：0
> 
> 时间：2012-10-06T21:48:02.663
> 
> 标签：javascript, html, function, save, counter

嗨，伙计们，这有点奇怪，可能是一个简单的修复我不知道，因为我是 javascript/编程的新手，基本上目前我有一个网站，它有一个简单的计数器功能设置为可以在这里看到的图像：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<style type="text/css">
</style>
<title></title>
<script type="text/javascript">
var count = 0;
function countClicks() {
 count = count + 1;
    document.getElementById("p2").innerHTML = count;
}
</script>

</head>
<body>
<table border="0">

<td>
<div id="p2" style="padding-left:15px; font-size:30px; font-family:Showcard        Gothic">0</div><br/>
<div>
<img onclick="javascript:countClicks();" src="C:\Users\DOMINATION\Desktop\button.jpg"     alt="alt text" />
</div>
</td>
</body>
</html> 
```

基本上我想要它，以便每当刷新站点时，计数器与上次更改时设置的计数器相同，例如，如果有人进入站点并将计数器设置为 4，而另一个用户进入站点/同一个人刷新页面计数器仍为 4。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:59:52.103

您必须区分存储在服务器端（所有用户都可以看到）的内容和**分别为每个用户**存储在客户端的内容。

关于客户端存储，您可以使用`localStorage`可以记住用户输入的值的位置，从而使其离线可用。下次用户打开/刷新页面时，他将再次获得他之前输入的值。其他用户显然**不会**看到该值，因为它独立存储在每个用户的本地计算机上。
这是一篇好文章：[http ://www.html5rocks.com/en/tutorials/offline/storage/](http://www.html5rocks.com/en/tutorials/offline/storage/)

另一方面，如果您想与多个用户共享某些内容，则必须将其集中存储在可供所有人访问的某个地方：服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:59:23.953

在客户端中仅使用 Javascript 没有简单的修复（Javascript 放置在 html 代码中）。

对于您所描述的工作，一个用户执行的点击需要通过服务器共享给其他用户。因此，您需要一些服务器端逻辑才能使其正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T21:59:26.887

如果您只使用 JavaScript 并将其存储在客户端，那么您还必须将其存储在服务器端，这是不可能的。

在您的情况下，最好对服务器进行 ajax 调用以更新按钮的点击次数。在stackoverflow问题打击中也有类似的情况：

[jQuery - 单击按钮时增加计数器的值](https://stackoverflow.com/questions/4701349/jquery-increase-the-value-of-a-counter-when-a-button-is-clicked)

# python - 如何在 Python 中增加 PNG 文件中的像素大小？

> ID：12764169
> 
> 赞同：-1
> 
> 时间：2012-10-06T21:48:36.807
> 
> 标签：python, png, python-imaging-library, pypng

假设我有一个这样的 PNG 图像： [https ://www.box.com/s/dc4dut3yw1vhagm4y9ks](https://www.box.com/s/dc4dut3yw1vhagm4y9ks)

我想增加红点的大小，这意味着它们也必须填充正方形的邻居。如下所示：

`www` -> `rrr`

`wrw` -> `rrr`

`www` -> `rrr`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:28:35.903

我很确定这可以进一步优化......基本上它会加载图像两次，读取 im1 和 draw1，如果在 [x+-1, y+-1] 范围内的 draw2 中发现一个红点被更改。最终，由 draw2 制作的 im2 被保存。

```
#!/usr/bin/env python

import Image

im1 = Image.open("hil0.png")
im2 = Image.open("hil0.png")
w, h = im1.size

draw1 = im1.load()
draw2 = im2.load()

for x in range(w):
    for y in range(h):
        if draw1[x,y] == (255,0,0):
            for dx in [-1,0,1]:
                for dy in [-1,0,1]:
                    nx = x+dx
                    ny = y+dy
                    # print nx, ny
                    if nx>=0 and ny>=0 and nx<w and ny<h:
                        draw2[ nx, ny ] = (255,0,0)

# im2.show()
im2.save("hil1.png") 
```

# java - Java：找不到符号

> ID：12764172
> 
> 赞同：2
> 
> 时间：2012-10-06T21:49:00.713
> 
> 标签：java, linked-list, hashmap

尝试向 a 添加一个`hashmap`条目`linkedList`，我收到`"cannot find symbol"`add 方法的错误。

我有：

```
import java.util.*;
import java.io.*;

class hash 
{
    public static void main(String[]args)
    {
        List<HashMap<String, String>> data = 
        new LinkedList<HashMap<String, String>>();

        Map<String, String> map = new HashMap<String, String>();
        map.put("name", "demo");
        map.put("fname", "fdemo");

        data.add(0, map);

        String test = map.get("fname");
        String datatest = data.get(0).get("name");

        System.out.println(datatest);

    }

} 
```

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T21:52:11.380

```
List<HashMap<String, String>> data = 
        new LinkedList<HashMap<String, String>>(); 
```

上面的代码应该是： -

```
List<Map<String, String>> data = 
        new LinkedList<Map<String, String>>(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T21:50:42.763

把这个改成使用`Map`，不行`HashMap`。

```
List<HashMap<String, String>> data =
new LinkedList<HashMap<String, String>>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T21:56:00.840

因为您将您的声明`map`为 a`Map`而不是 a`HashMap`您还必须将您的声明`data`为：

```
List<Map<String, String>> data = new LinkedList<Map<String, String>>(); 
```

你可以坚持你的 List 声明，如果你改变你的`map`：

```
List<HashMap<String, String>> data = new LinkedList<HashMap<String, String>>();
HashMap<String, String> map = new HashMap<String, String>(); 
```

但更好的方法是尽可能只使用接口而不是声明中的具体实现。

# php - 隐藏“未识别索引”警告

> ID：12764173
> 
> 赞同：1
> 
> 时间：2012-10-06T21:49:38.460
> 
> 标签：php, post

当我提交表单时，我的网站上会弹出大量此类警告（我正在使用 $_POST 获取它们）。

```
Notice: Undefined index: FuelPurch in C:\xampp\htdocs\daniel\ShellySite\controller\php\submit_form.php on line 9 
```

隐藏它们/使它们不显示的最佳方法是什么？如果某些字段没有填写，这对我来说不是问题，我只是不希望它们出现。

我试过这样的东西......

```
 if(isset($_POST['FuelPurch'])){
        $FuelP=$_POST['FuelPurch'];
    } 
```

但这似乎不起作用...

编辑：没关系，我在不知情的情况下编辑我的网站的移动版本，所以从我的电脑查看它时我没有看到我想要的结果。为了澄清起见，我在那里发布的代码段确实有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:51:54.923

您可以使用 [`error reporting(E_ALL ^ E_NOTICE)`](http://php.net/manual/en/function.error-reporting.php)来关闭这些错误。

```
error_reporting(E_ALL ^ E_NOTICE); 
```

但奇怪的是，`isset`您提到的方法实际上应该有效并且也更清洁。

也许您`$FuleP`稍后会使用它，这将是未定义的，因此如果`$_POST['FuelPurch']`未定义，则会引发相同的错误。在这种情况下尝试：

```
$FuelP=0; // Suitable default value that will be used if no value is posted
if (isset($_POST['FuelPurch'])) $FuelP=$_POST['FuelPurch']; 
```

`$FuelP`无论如何都会定义这种方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T21:54:26.600

将以下行放在文件顶部：

```
error_reporting(E_ALL ^ E_NOTICE); 
```

但是，该`isset()`方法应该有效，并且表明可以使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T21:56:38.957

只要写`if isset`在正确的地方。不要禁用错误报告！如有必要，请向我们展示代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-18T14:23:11.083

或者在单行语句中，您可以在行首添加“@”

# android - 当应用程序在后台运行时，Android WebView 会消耗大量电量

> ID：12764175
> 
> 赞同：1
> 
> 时间：2012-10-06T21:50:13.360
> 
> 标签：android

我的 android 应用程序中有一个 WebView，这个 WebView 正在运行一个网站，上面有相当多的 Javascript。当我的应用程序在后台运行时，用户报告了高功耗，我预计这是由于这个 javascript。但是，我不想完全卸载或删除 WebView，因为这会影响恢复时间。

当应用程序在后台（onPause（））时，有什么方法可以选择性地关闭 Javascript 和/或完全禁用 WebView？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T13:43:42.507

根据[http://www.mcseven.me/2011/12/how-to-kill-an-android-webview/](http://www.mcseven.me/2011/12/how-to-kill-an-android-webview/)唯一可行的方法是重定向到没有javascript的空页面（并在恢复后返回）。

在 PhoneGap 的情况下，页面应该包含一个返回自身的代码：

```
<!DOCTYPE html><html><head>
        <script type="text/javascript" src="js/phonegap/cordova-2.9.0.js"></script>
        <script type="text/javascript" src="js/jquery/jquery-1.9.1.min.js"></script>
    </head><body>
        <script type="application/javascript">
            $(document).on('deviceready', function() {
                $(document).on('resume', function() {
                        return history.back ? history.back() : history.go(-1);
                });
            });
        </script>
    </body></html> 
```

* * *

**更新**：以上内容适用于 Cordova 2.xx 在 Cordova 3.xx 中（不确定是否从 3.0.0 开始，但可以肯定在当前 3.7.x 中）您可以简单地`KeepRunning`在配置 XML 中添加首选项：

```
<preference name="keepRunning" value="false" /> 
```

这会暂停所有的 JS 定时器，直到 APP 再次恢复；请参阅[https://stackoverflow.com/a/21629586/2011448](https://stackoverflow.com/a/21629586/2011448)。

# jquery - 来自 picasa api 的 jquery ajax 在 IE 中不起作用

> ID：12764176
> 
> 赞同：0
> 
> 时间：2012-10-06T21:50:26.827
> 
> 标签：jquery, ajax, internet-explorer

我正在使用此代码从 picasa 中提取图片网址：

```
var s = $.dudaGlobal.settings.init;
            var f = $.dudaGlobal.settings.internal;
            var p = $.dudaGlobal.settings.picasa;

            var json_Album_URI = f.picasaUrl
                + "user/" + p.username
                + "?alt=" + "json"
                + "&kind=" + "photo"
                + "&max-results=" + s.images
                + "&hl=" + "en_US"
                + "&fields=" + "entry(media:group,id)"
                + "&thumbsize=" + 104;

            $.ajax({
                type:'GET',
                url:json_Album_URI,
                success:function (data) {
                    $.dudaGlobal.settings.internal.picasaReturnData = data;
                    $('#' + f.imagesCntrID).html(methods.init("createImages"));
                },
                dataType:'json',
                async: true
            }); 
```

它适用于 chrome 和 FF，但不适用于 IE（9 及以下）。我曾尝试使用 F12 进行调试，但没有运气。我对 IE 很弱。 [这](http://ohadresume.net16.net/Duda/#)是页面的链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T18:23:01.777

我开始工作，将`dataType:'json'`, 更改为`dataType:'jsonp'`. 它奏效了……

# javascript - 获取相对于原始图像 D3/Javascript 的鼠标坐标

> ID：12764181
> 
> 赞同：2
> 
> 时间：2012-10-06T21:50:58.310
> 
> 标签：javascript, d3.js

我有一个要加载到 SVG 元素中的大图像：

```
<svg id="plate-svg" width="800px" height="500px">
    <image id="plate" xlink:href="plate_red.JPG" x="0" y="0" height="500px" width="800px"/>
</svg>
<div id="mpos"></div> 
```

我正在像这样设置鼠标位置：

```
<script>
function mouseover(d, i) {
  var x = d3.mouse(this)
  d3.select('#mpos').text(x);
}
var plate = d3.select('#plate-svg')
plate.on("mousemove", mouseover);
</script> 
```

但是，我想要鼠标相对于原始大图像的坐标。这可能吗？

谢谢

# symfony - 如何使用 Symfony 2.1 从控制器内部获取 Doctrine 实体的实体管理器

> ID：12764182
> 
> 赞同：31
> 
> 时间：2012-10-06T21:50:59.387
> 
> 标签：symfony, controller, doctrine-orm

如何使用最新的 Symfony 和 Doctrine 从控制器内部获取实体管理器？

“The Book”中描述的方式现在被标记为已弃用。什么是现代（正确）方法来做到这一点？

```
public function someAction()
{
    // getEntityManager() from Doctrine\Bundle\DoctrineBundle\Registry is deprecated
    $entityManager = $this->getDoctrine()->getEntityManager();
    ...
} 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-06T22:03:22.693

改为使用`$this->getDoctrine()->getManager()`。

实际上，最好不要让控制器知道您正在使用的持久层。这些东西应该被移到[服务层](http://martinfowler.com/eaaCatalog/serviceLayer.html)来抽象数据的持久化方式。

# ios - 尝试在 ios 5.1.1 上使用 Social.framework 会使我的应用程序崩溃

> ID：12764185
> 
> 赞同：1
> 
> 时间：2012-10-06T21:51:10.540
> 
> 标签：ios, frameworks, crash

我的应用程序在 iOS 5.1 模拟器上收到错误消息并崩溃，因为此 iOS 5.1.1 不支持“社交”框架。

有没有办法解决这个问题并在 iOS 6 之前的版本上使用它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T21:58:46.193

社交框架是 iOS 6 独有的功能。它不适用于运行早于 6.0 的 iOS 的设备。你有两个选择。如果您的 App 是新的，您可能需要 iOS 6 或更高版本。

如果您的应用程序已经存在一段时间并且您需要支持早于 6 的 iOS 版本，您可以在运行时测试框架是否存在，如下所示：

```
if(NSClassFromString(@"SLComposeViewController") != nil) {
    // The social Framework exists
else
    // Social Framework does NOT exist. 
```

回应您的评论时注意：
使用版本号检查功能是否存在被认为是糟糕的设计。推荐的方法是检查功能本身是否存在。

您在评论中提到的代码是您测试功能而不是版本的完美示例。@"5.1.1" 的 floatValue 是 5.1，@"5.1.2" 的 floatValue 也是 5.1！如果您要查找的功能不在 5.1.1 中但在 5.1.2 中，您的代码将不会检测到它并错误地假定该功能不存在。不要这样做。使用我上面概述的技术。

# php - 使用变量，替换 SQL select 语句和 PHP Prepare 语句。我哪里出错了？

> ID：12764187
> 
> 赞同：1
> 
> 时间：2012-10-06T21:51:21.533
> 
> 标签：php, mysql, prepared-statement

我有一些在其中使用 SQL 选择语句的工作代码。作为一段静态代码，它工作得很好，但是，我希望能够在其中使用变量。所以，做我的研究，每个人都说你应该使用 PHP Prepare 语句，以保证事情的安全。所以，我的旧代码看起来像这样：

```
 /*** MY OLD WORKING CODE ***/ 
    /*** SQL Query ***/   
    $sql = "SELECT tickets.ref AS `Ticket Number` ......
    .....BLAH................INTERVAL 30 DAY) AND 
    organizations.name = 'NAMEIWANTTOUSE' ";

    /*** For Each Loop to Build Table ***/
    foreach ($dbh->query($sql) as $row){ 
     echo "<tr>"; 
      echo "<td bgcolor=89FF95 align=center>".$row['Ticket Number']."</td>"; 
       ETC..................
    } 
    $sql->closeCursor(); 
```

我的新代码，我试图开始工作..似乎什么也没做。我知道我并不太了解它，但我只是无法掌握应该将哪个变量推入我的 FOREACH 循环..或者我是否真的得到了 PHP Prepare 语句？

有什么建议吗？

```
 /*** MY NEW NOT WORKING CODE ***/ 
    /*** Variables ***/
    $NAME = 'NAMEIWANTTOUSE';
    $DAYS = '30';

    /*** Prepare the SQL Query ***/
    $stmt = $sql->prepare("SELECT tickets.ref AS `Ticket Number` .......
    ....BLAH................INTERVAL :DAYS DAY) AND
    organizations.name = :NAME ");

    $stmt->bindParam(":DAYS", $DAYS);
    $stmt->bindParam(":NAME", $NAME);
    $stmt->setFetchMode(PDO::FETCH_ASSOC);
    $stmt->execute();

    /*** Put each return from SQL into a Variable? ***/
    $MySQLQuery = $stmt->fetchAll();

    /*** For Each Loop to Build Table ***/
    foreach ($dbh->query($MySQLQuery) as $row){ 
     echo "<tr>"; 
      echo "<td>".$row['Ticket Number']."</td>"; 
       ETC..................
    } 
    $sql->closeCursor(); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T21:56:38.457

你几乎拥有它，只是你不应该`query()`在循环中调用。结果集已被提取到`$MySQLQuery`. [`fetchAll()`返回一个 2D 数组](http://php.net/manual/en/pdostatement.fetchall.php)，不像旧`mysql_query()`的返回需要循环的结果资源`mysql_fetch_*()`。

```
// Following fetchAll(), $MySQLQuery is a 2D array containing your rowset.
foreach ($MySQLQuery as $row){ 
 echo "<tr>"; 
  echo "<td>".$row['Ticket Number']."</td>"; 
   ETC.........
} 
```

# ruby - 之间的区别。和 ＃

> ID：12764188
> 
> 赞同：34
> 
> 时间：2012-10-06T21:51:31.097
> 
> 标签：ruby, rspec

在 Ruby 中，这两者有什么区别（在代码中）：

*   `Class.method`
*   `Class#method`

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-06T21:56:12.143

这是一个命名约定。

*   使用磅`#method`作为实例方法
*   `.method`对类方法使用点

请参阅：[如何命名 RSpec 描述方法的块](http://grosser.it/2010/06/18/how-to-name-rspec-describe-blocks-for-methods/)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-10-06T22:01:30.627

哈希格式（Class#method）不是有效的 ruby​​，但在文档中用于描述实例方法。

类方法通常使用双冒号（Class::method）记录。

您将在 ruby​​ 文档中看到这两个示例（例如[http://www.ruby-doc.org/core-1.9.3/String.html](http://www.ruby-doc.org/core-1.9.3/String.html)）

点格式在实际*调用*类方法（Class.method）时在代码中使用，尽管我看到有些人（不幸地）在文档中将它与双冒号或哈希互换使用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-06T21:57:45.100

`Class#method`不是有效代码。它仅在文档中使用。方法应该是一个实例方法。

`Class.method`或 object.method 是属于该对象的实际方法。类也是一个对象。这是有效的代码。

# iphone - 如何在 Objective C 代码中使用 Class 对象

> ID：12764189
> 
> 赞同：1
> 
> 时间：2012-10-06T21:51:32.580
> 
> 标签：iphone, objective-c, ios

我有四个完全相同的屏幕，除了它们使用四个不同的类。我想我可以通过将此属性放在我的标题中来将它们减少到一个：

```
@property Class *classType; 
```

然后我可以设置课程并完成。

但是，当我尝试使用 classType 时，如下所示：

```
NSArray *myArray = [classType allobjects]; 
```

我得到以下信息：“接收器类型错误 __unsafe_unretained 类 *”

这真的没有多大意义。类方法返回和 NSArray。当我使用显式类名时，没有错误，一切正常。

我正在使用带有 ARC 的 xcode 4.5。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T21:58:13.700

尝试使用

```
@property Class classType; 
```

注意缺少的 *. 类就像id，指针类型是隐含的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T22:22:09.157

在 Google 上快速搜索，在运行时的标头中甚至更好：

```
typedef struct objc_class *Class; 
```

类型本身就是一个指针——声明属性时`Class`不需要额外的`*`符号。

# html - Rails：清理控制器内部的输入

> ID：12764191
> 
> 赞同：0
> 
> 时间：2012-10-06T21:51:34.860
> 
> 标签：html, ruby-on-rails, controller, escaping

我的 Rails 3 应用程序包含一个未绑定到模型的表单。

我正在使用`form_tag`，我的控制器看起来有点像这样：

```
def results
    local_variable = params[:my_form_field].to_s
end 
```

我在控制器中使用 . 执行各种其他零碎工作`local_variable`，因此显然我想针对讨厌的用户可能输入的“非法”输入（尤其是 HTML 标签，甚至是注入）清理我的表单。

我真的需要在控制器中而不是在我看来这样做。有没有类似于`to_s`我可以在控制器中使用的东西来删除这些字符？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T02:17:12.797

您可以使用 Rails 的 Sanitize Helper：[http ://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html)

只要您不`eval`读取数据库的内容`local_variable`或在数据库上执行它，您就应该是安全的。

# excel - Excel下拉需要从两列中提取信息

> ID：12764192
> 
> 赞同：0
> 
> 时间：2012-10-06T21:51:37.483
> 
> 标签：excel, vba

我目前正在为客户处理 Excel 电子表格中的表格。

下拉列表需要从**lookupDept**工作簿的两列中提取信息并合并。例如我有：

```
deptCode deptName
BS       Business School
CD       Design and Technology
CG       Chemical Engineering
CM       Chemistry
CO       Computer Science 
```

这需要出现在下拉列表中

```
BS - Business School
CD - Design and Technology
CG - Chemical Engineering
CM - Chemistry
CO - Computer Science 
```

这是我目前正在使用的代码，不幸的是它似乎不起作用并返回**Compile Error: Invalid Next control variable reference**。这是我到目前为止使用的代码：

```
Private Sub UserForm_Initialize()

Dim c_deptCode As Range
Dim c_deptName As Range
Dim ws_dept As Worksheet
Set ws_dept = Worksheets("lookupDept")

For Each c_deptCode In ws_dept.Range("deptCode")
  With Me.cbo_deptCode
    .AddItem c_deptCode.Value
    .List(.ListCount - 1, 1) = c_deptCode.Offset(0, 1).Value
  End With
Next c_deptCode

For Each c_deptName In ws_dept.Range("deptName")
  With Me.cbo_deptCode
    .AddItem c_deptName.Value
  End With
Next cLoc

End Sub 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T23:17:29.417

在您的第二个`For`循环中，您正在调用`Next cLoc`，但循环被初始化为`For Each cDeptName`。尝试更改`Next`to`Next cDeptName`以推进正确的变量。

# perl - Perl 自动化文件测试

> ID：12764193
> 
> 赞同：1
> 
> 时间：2012-10-06T21:51:48.817
> 
> 标签：perl, system-calls

所以我正在上 Perl 编程课，我们的老师给了我们第一个作业，几乎没有谈论如何实际编程 perl。这正是我们老师布置的：

“你应该编写一个脚本（你可以为你认为合适的脚本命名），它接受 3 个文件名作为参数。第一个文件名对应于用 C++ 编写的程序源代码。第二个文件名对应于要使用的输入文件由 C++ 程序列为第一个文件名。第三个文件名对应于一个文本文件，其中包含所讨论程序的预期正确输出。目录路径可以与任何文件名一起提供。

如果程序不需要输入文件，命令行的第二个参数应该是文件名“/dev/null”。

所有文件——程序源文件、输入文件和预期的输出文件——在脚本使用它们之前都应该复制到临时测试目录，这样原始文件被测试修改的可能性很小程序。如果暂存目录不存在，您的脚本应该创建一个作为当前工作目录的子目录。

然后，您的脚本应该使用 GNU g++ 编译器编译和链接源代码的临时副本。然后脚本应该运行程序——将输出保存到临时文件中存储在临时测试目录中。

运行程序后，您的脚本应使用 UNIX 命令 diff 将上一步中生成的实际输出与预期的输出文件进行比较，并报告输出符合规范或报告 diff 程序报告的任何差异。

完成后，您的脚本应删除所有临时副本和暂存文件。不要删除原始程序、原始输入文件、原始预期输出文件或暂存目录本身。”

到目前为止我有这个：

```
#!/usr/bin/perl -w

use strict;

my ($line, $program, $input, $output);

print "Give the program, input, and standart output for testing. ";

$line = <>;
chomp $line;

($program, $input, $output) = split/\s+/, $line; # split/\s+/ is to separate spaces from the input

my($o_test) = $output + "_test";

print "$program ";
print "$input ";
print "$output ";

system("mkdir test_scratch") == 0
or die "failed to create test_scratch. exiting...."

system("cp $program, /test_scratch/"); # error
system("cp $input, /test_scratch/");
system("cp $output, /test_scratch/");

system("cd test_scratch");

system("g++ $program");
system("chmod +x a.out");

system("./a.out < $input > $o_test");

my($DIFF) = system("diff $output $o_test") # error

if[ $DIFF != ""]
    print ("Output conforms to specifications."); # error
then
    print ("$DIFF");
system("cd .."); 
```

我在代码中的 # 处遇到错误。我什至不知道如何执行“/dev/null”。我花了很多时间在网上查找东西并搜索stackoverflow，但我只是不知道还能做什么。我意识到这是一个非常长的问题，但我不知道还能做什么。谢谢你能给我的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:13:30.937

这里有几个模块可以为您提供帮助。我推荐的第一个是[ExtUtils::CBuilder](http://p3rl.org/ExtUtils%3a%3aCBuilder)，它可以为您管理构建过程。然后，您还可以使用[File::Copy](http://p3rl.org/File%3a%3aCopy)将内容移动到临时文件夹中，甚至使用[File::chdir](http://p3rl.org/File%3a%3achdir)来管理工作目录。由于 prof 指定您应该使用`diff`也许应该使用，但是有些模块可以执行该任务，或者您可以使用[Test::More](http://p3rl.org/Test%3a%3aMore)来检查输出是否符合预期。

* * *

仅供将来参考，这就是我完成类似任务的方式（不要保留临时目录，不需要`diff`）：

```
#!/usr/bin/env perl

use strict;
use warnings;

use File::chdir;
use File::Temp;
use File::Copy;
use File::Basename;
use File::Slurp;

use ExtUtils::CBuilder;
use Test::More tests => 1;

die "Not enough inputs\n" unless @ARGV >= 3;

# create a temporary directory
my $temp = File::Temp->newdir;

# copy all arguments to that temporary directory
copy $_, $temp for @ARGV;

# store only the filename (not path) of each argument
my ($cpp_file, $in_file, $expected_file) = map { scalar basename $_ } @ARGV;

# change working directory to temporary one (via File::chdir)
local $CWD = $temp;

# build the executable
my $builder = ExtUtils::CBuilder->new(config => {cc => 'g++'});

my $obj = $builder->compile( source => $cpp_file, 'C++' => 1 );
my $exe = $builder->link_executable( objects => 'hello.o' );

# run the executable
my $output = `./$exe $in_file`;

# read in the expected file
my $expected = read_file $expected_file; 

# test the resulting output
is $output, $expected, 'Got expected output from executable'; 
```

请注意，您可能需要小心输出和预期文件中的换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:56:41.480

> 我在代码中的 # 处遇到错误。

解决此错误的简单方法是删除逗号。标准的 Linux cp 命令在源和目标之间不使用逗号。您也可以考虑使用[File::Copy](http://perldoc.perl.org/File/Copy.html)在 Perl 中复制文件。

> 我什至不知道如何执行“/dev/null”。

/dev/null 是一个标准的 Linux 文件（*），它指向空。您可以将字节写入此文件，它们会消失。您可以尝试从此文件中读取字节，但那里什么也没有。

这使您有两个选择：

1.  直接使用 /dev/null ，程序将无法从空字节流中读取任何内容。
2.  检查输入文件是否等于/dev/null，如果输入为/dev/null，则不要给C++程序输入值。

任何一种方法都行得通。如果您将 /dev/null 复制到一个目录，您将获得一个名为“null”的新的零长度文件，它对于 C++ 程序来说是一个完全有效的空输入文件。

(*) 不，如果您来自 Windows 世界，/dev/null 不是您习惯的文件。它在磁盘上不存在 - 从来没有也永远不会。但是经典的 Unix 哲学是让每个数据源成为一个文件，即使该文件在磁盘上不存在。例如，查看 Linux /proc 文件系统，它允许您在目录树结构中查看有关 CPU、进程等的信息。在套接字 API 采用完全不同的路线之前，这种理念在一定程度上得到了支持。如果您正在寻找一个基本上将所有内容（包括网络连接和屏幕）*都*写入文件的操作系统，请查看[计划 9](http://en.wikipedia.org/wiki/Plan_9_from_Bell_Labs)。不过，我不建议您在计划 9 上完成家庭作业并期望它们在 Linux 上工作。

* * *

注意不要忘记检查来自 的返回码`system`，因为如果 g++ 无法编译 C++ 程序，将无法运行不存在的已编译程序。

# oop - 如何使队列从 FIFO 模式切换到优先模式？

> ID：12764195
> 
> 赞同：0
> 
> 时间：2012-09-25T00:32:55.973
> 
> 标签：oop, algorithm, language-agnostic

我想实现一个能够在 FIFO 模式和优先级模式下运行的队列。这是一个消息队列，优先级首先基于消息类型：例如，如果`A`类型的消息比该`B`类型的消息具有更高的优先级，那么所有`A`类型的消息都会首先出队，最后类型的消息`B`出队。

**优先模式：**我的想法是使用多个队列，每种类型的消息一个；通过这种方式，我可以根据消息类型管理优先级：首先从队列中以较高优先级获取消息，然后逐步从较低优先级队列中获取消息。

**FIFO 模式：**如何处理使用多个队列的 FIFO 模式？换句话说，用户看不到多个队列，但它使用队列就像它是单个队列一样，以便在禁用优先级模式时消息按照它们到达的顺序离开队列。为了实现第二个目标，我考虑使用另一个队列来管理消息类型的到达顺序：让我用下面的代码片段更好地解释一下。

```
int NUMBER_OF_MESSAGE_TYPES = 4;
int CAPACITY = 50;
Queue[] internalQueues = new Queue[NUMBER_OF_MESSAGE_TYPES];
Queue<int> queueIndexes = new Queue<int>(CAPACITY);

void Enqueue(object message)
{
    int index = ... // the destination queue (ie its index) is chosen according to the type of message.
    internalQueues[index].Enqueue(message);
    queueIndexes.Enqueue(index);
}

object Dequeue()
{
    if (fifo_mode_enabled)
    {
        // What is the next type that has been enqueued?
        int index = queueIndexes.Dequeue();

        return internalQueues[index].Dequeue();
    }

    if (priority_mode_enabled)
    {
        for(int i=0; i < NUMBER_OF_MESSAGE_TYPES; i++)
        {
            int currentQueueIndex = i;
            if (!internalQueues[currentQueueIndex].IsEmpty())
            {
                object result = internalQueues[currentQueueIndex].Dequeue();

                // The following statement is fundamental to a subsequent switching
                // from priority mode to FIFO mode: the messages that have not been
                // dequeued (since they had lower priority) remain in the order in
                // which they were queued.
                queueIndexes.RemoveFirstOccurrence(currentQueueIndex);

                return result;
            }
        }
    }
} 
```

你怎么看这个想法？有更好或更简单的实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T01:51:37.343

应该管用。然而，简而言之，我的想法是

a）不是线程安全的，需要做很多工作才能做到这一点。b) 不是异常安全的——即排队或出队的异常可能会留下不一致的状态——也许不是问题，例如如果异常是致命的，但也许是。c）可能过于复杂和脆弱，尽管我不知道它正在使用的上下文。

就个人而言，除非我进行了分析并证明存在性能问题，否则我将拥有一个“容器”，优先级模式将遍历容器寻找下一个最高优先级的消息——毕竟它只有 50 条消息。我几乎肯定会使用链表。我的下一个优化是将一个带有指向每个消息类型的第一个指针的容器放入该容器中，并在消息出队时更新指针。

# sql - 替换日期时间值的日期部分

> ID：12764197
> 
> 赞同：-3
> 
> 时间：2012-10-06T21:52:05.630
> 
> 标签：sql, sql-server, sql-server-2008

我有一堆`datetime`值，我需要将日期部分替换为作为参数传递的特定日期（`nvarchar(8)`格式为`YYYYMMDD`）。时间部分应该和以前一样。

例如，我有这行`datetime`值：

```
Id | DocDate                 | CreationDate            | PrintDate 
1  | 2012-10-01 00:44:20.150 | 2012-10-07 00:44:20.150 | 2012-10-07 00:50:20.150 
```

如果我通过`'20121005'`，值应该像这样改变：

```
Id | DocDate                 | CreationDate            | PrintDate
1  | 2012-10-05 00:44:20.150 | 2012-10-05 00:44:20.150 | 2012-10-05 00:50:20.150 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T22:19:04.887

```
DECLARE @T TABLE (id int, docdate datetime,
                  creationdate datetime,
                  printdate datetime);
INSERT @t SELECT
 1, '2012-10-01 00:44:20.150',
    '2012-10-07 00:44:20.150',
    '2012-10-07 00:50:20.150';

DECLARE @newdate datetime = '20121005';

UPDATE @T SET
  docdate = dateadd(d,datediff(d,docdate,@newdate),docdate),
  creationdate = dateadd(d,datediff(d,creationdate,@newdate),creationdate),
  printdate = dateadd(d,datediff(d,printdate,@newdate),printdate);

SELECT * FROM @t; 
```

仅更改日期时间的日期部分的模式是首先找到您需要应用的差异（以天为单位），然后应用它。

```
 e.g. datediff(d, '20121001', '20121008') => +7 days
      dateadd(d, <+7>, '20121001 xx:xx') => add the 7 days, keeping time 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T22:02:40.980

坦率地说，我不知道我是否正在回答您正在寻找答案的问题。下次尝试更详细一点。话虽如此，请使用 dateadd。

```
DECLARE @Date1 datetime,
        @Date2 datetime

set @Date1 = '2012-01-01 16:53:20.150'
set @Date2 = '2012-10-06'

SELECT @Date1 as Original, @Date2 as NewDate, DATEADD(MILLISECOND, DATEDIFF(MILLISECOND, DATEADD(day, 0, DATEDIFF(day, 0, @Date1)), @Date1), @Date2) as Updated 
```

产生：

```
Original                NewDate                 Updated
----------------------- ----------------------- -----------------------
2012-01-01 16:53:20.150 2012-10-06 00:00:00.000 2012-10-06 16:53:20.150

(1 row(s) affected) 
```

基本上，使用`DATEADD(day, 0, DATEDIFF(day, 0, @Date1))`它自己获取日期，然后通过上述计算的结果减去总日期并将它们添加到新日期来获取当天的毫秒数。

您也可以通过字符串操作或基于单个 datediff 的结果的假设来执行此操作（`DATEADD(MILLISECOND, (DATEDIFF(MILLISECOND, 0, @Date1) % 8600000), @Date2)`想到），但这些让我感到恶心。

# c++ - 无法连接到工作

> ID：12764199
> 
> 赞同：1
> 
> 时间：2012-10-06T21:52:11.750
> 
> 标签：c++, networking, winsock, winsock2

我正在研究一些网络代码。我在同一台机器上运行了 2 个解决方案。第一个是我的服务器，另一个是我的客户端。我正在使用 C++ 和 winsock 作为网络解决方案。

这是我的服务器代码（设置）。

```
addrinfo        hints;
addrinfo*       pAddrInfo;
char            pIPAddress[INET6_ADDRSTRLEN];
char            pPortFinal[128];
unsigned long   tempUL;
int             error;

memset(&hints, 0, sizeof hints); // make sure the struct is empty
hints.ai_family = AF_UNSPEC;//AF_INET;     // don't care IPv4 or IPv6
hints.ai_socktype = type;
hints.ai_flags = AI_PASSIVE;     // fill in my IP for me

error = getaddrinfo(NULL/*"localhost"*/, pPort, &hints, &pAddrInfo);
if(error != 0)
{
    GetWinSockError(error);
    return;
}

for(pAddrInfo = pAddrInfo; pAddrInfo != NULL; pAddrInfo = pAddrInfo->ai_next)
{
    this->m_Socket = socket(pAddrInfo->ai_family, pAddrInfo->ai_socktype, pAddrInfo->ai_protocol);

    if(bind(this->m_Socket, pAddrInfo->ai_addr, pAddrInfo->ai_addrlen) != 0)
        continue;

    break;
}

if(!pAddrInfo)
{
    GetWinSockError(WSAGetLastError());
    freeaddrinfo(pAddrInfo);
    this->ShutDown();
    return;
}

//7 = magic number recommended by 'beej's guide' online
if(listen(this->m_Socket, 7) != 0)
{
    GetWinSockError(WSAGetLastError());
    freeaddrinfo(pAddrInfo);
    this->ShutDown();
    return;
}

getnameinfo(pAddrInfo->ai_addr, pAddrInfo->ai_addrlen, pIPAddress, sizeof pIPAddress, pPortFinal, sizeof pPortFinal, NI_NUMERICHOST | NI_NUMERICSERV);

this->m_pIPAddress = Helpers::String::NewCopy(pIPAddress);
this->m_pPort = Helpers::String::NewCopy(pPortFinal);
cout << "IP:" << this->m_pIPAddress  << " Port:" << this->m_pPort << "\n";

this->SetState(NET_COMM_STATE__READY);

freeaddrinfo(pAddrInfo); 
```

这是我的服务器代码（勾号）。

```
NetServerClient*    pNetComm;
sockaddr*           pSockAddr;
sockaddr_storage    their_addr;
socklen_t           addr_size;
void*               pTempBuffer;
char                pIPAddress[INET6_ADDRSTRLEN];
char                pPort[256];
unsigned short      port;
int                 newClientSocket;

addr_size = sizeof their_addr;
newClientSocket = accept(this->m_Socket, (struct sockaddr*)(&their_addr), &addr_size);
if(newClientSocket == -1)
{
    if(WSAGetLastError() != WSAEWOULDBLOCK)
        GetWinSockError(WSAGetLastError());
    return;
}

pSockAddr = (struct sockaddr*)(&their_addr);
pNetComm = new NetServerClient(newClientSocket);

addr_size = sizeof their_addr;
if(bind(newClientSocket, pSockAddr, addr_size) != 0)
{
    GetWinSockError(WSAGetLastError());
    pNetComm->ShutDown();
    return;
}

if (pSockAddr->sa_family == AF_INET)
{
    pTempBuffer = &(((struct sockaddr_in*)pSockAddr)->sin_addr);
    port = ((struct sockaddr_in*)pSockAddr)->sin_port;
}
else
{
    pTempBuffer = &(((struct sockaddr_in6*)pSockAddr)->sin6_addr);
    port = ((struct sockaddr_in6*)pSockAddr)->sin6_port;
}
inet_ntop(their_addr.ss_family, pTempBuffer, pIPAddress, sizeof pIPAddress);
_snprintf(pPort, 256, "%d", (unsigned int)port);

pNetComm->StartCommunication(pIPAddress, pPort);
this->m_vpClients.push_back(pNetComm); 
```

这是我的客户代码：

```
addrinfo        hints;
addrinfo*       pAddrInfo;
unsigned long   tempUL;
int             error;

memset(&hints, 0, sizeof hints); // make sure the struct is empty
hints.ai_family = AF_UNSPEC;     // don't care IPv4 or IPv6
hints.ai_socktype = type;

error = getaddrinfo(pIPAddress, pPort, &hints, &pAddrInfo);
if(error != 0)
{
    GetWinSockError(error);
    return;
}

for(pAddrInfo = pAddrInfo; pAddrInfo != NULL; pAddrInfo = pAddrInfo->ai_next)
{
    this->m_Socket = socket(pAddrInfo->ai_family, pAddrInfo->ai_socktype, pAddrInfo->ai_protocol);

    if(connect(this->m_Socket, pAddrInfo->ai_addr, pAddrInfo->ai_addrlen) != 0)
        continue;

    break;
}

if(!pAddrInfo)
{
    GetWinSockError(WSAGetLastError());
    freeaddrinfo(pAddrInfo);
    this->ShutDown();
    return;
}

this->SetState(NET_COMM_STATE__READY);

freeaddrinfo(pAddrInfo); 
```

问题是客户端上的连接总是失败。我收到错误“WSAECONNREFUSED：连接被拒绝”。

我很确定我的连接失败的原因是因为我的客户端没有将正确的 IP 地址传递给 getaddrinfo。当我运行我的服务器时，我输出了服务器解决方案的 IP 和端口。然后我让我的客户端解决方案调用它是具有相同 IP 和端口信息的 getaddrinfo。但是，我的服务器解决方案似乎没有收集正确的 IP 和端口信息。它总是告诉我它的 IP 是 0.0.0.0 (IPv4) 或 :: (IPv6)。我不明白如何为我的客户端获得正确的 IP 以连接到我的服务器。

我已经阅读了这些帖子[从 getaddrinfo() 获取服务器 ip 0.0.0.0:0](https://stackoverflow.com/questions/7942969/getting-server-ip-0-0-0-00-from-getaddrinfo)和[在 getaddrinfo 中返回的 sin_port](https://stackoverflow.com/questions/7558001/sin-port-returned-in-getaddrinfo-wrong)已经错误并尝试了他们的解决方案，但它们对我不起作用。

任何帮助将非常感激。

# java - 在没有任何数组的情况下解析 Android 中的 JSON 数组

> ID：12764201
> 
> 赞同：2
> 
> 时间：2012-10-06T21:52:25.617
> 
> 标签：java, android, json

我是 JSON 解析的新手，我知道如何解析 XML，但 JSON 似乎完全不同且令人困惑。我在这里有这个数组：

```
{
    "domain": "Lorem Ipsum",
    "next_page_id": null,
    "url": "Lorem Ipsum",
    "short_url": "Lorem Ipsum",
    "author": "Lorem Ipsum",
    "excerpt": "Lorem Ipsum",
    "direction": "Lorem Ipsum",
    "word_count": 0,
    "total_pages": 0,
    "content": "Lorem Ipsum",
    "date_published": "2012-10-06 17:39:13",
    "dek": "Lorem Ipsum",
    "lead_image_url": "Lorem Ipsum",
    "title": "Lorem Ipsum",
    "rendered_pages": 1
} 
```

我以前从未使用过 JSON，但我总是认为 JSON 数组会有名称。但这没有一个，所以我不能这样做：

```
JSONArray jArray = jObject.getJSONArray("ARRAYNAME"); 
```

有人可以帮我解析这个吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T21:58:00.287

这不是 JSON 数组。这是一个 JSON 对象。Json 数组由表示`[]` 您可以像这样访问这些元素

```
String url = jObject.getString("url"); 
```

例如，一个数组看起来像这样：

```
{
    "domain": "Lorem Ipsum",
    "next_page_id": null,
    "url": "Lorem Ipsum",
    "array":
        [
            "element1",
            "element2"
        ]
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T21:58:18.657

这不是数组。数组包含相同类型的元素。数组在 [] 中。{} 是对象。[{},{}] 数组中的 2 个对象
查看本教程：[http ://www.vogella.com/articles/AndroidJSON/article.html](http://www.vogella.com/articles/AndroidJSON/article.html)

# json - 在模板Google App引擎python中解析json数据

> ID：12764205
> 
> 赞同：0
> 
> 时间：2012-10-06T21:53:13.267
> 
> 标签：json, google-app-engine, templates, python-2.7

我在我的谷歌应用引擎的数据库中存储 json 数据，将数据存储到数据库没有问题，但我不确定如何在视图中解析它，例如，我从我的模型中获取所有主题并通过它到使用 webapps 模板的视图（我不确定它的 django 或 jinja2，但它是 GAE 提供的默认值），现在我的模型 objext 有一个包含 json 的属性，我想在没有 javascript 的情况下解析这个 json我通过模板传递对象，任何人都可以建议我怎么做。

例如，我将应用引擎查询为

```
topics = Topic.all()
//topic have many attributes including an attribute tags which contains json string
//["test", "somekeyword"] 
```

我在视图中将此字符串解析为单个标签，我可以在 python 中操作此对象列表以在检索时存储为字典而不是标签吗？或者有没有办法将它转换为 django 中的字典？

PS：我无法在我的处理程序中解析 json，因为模型将有多个条目，并且解析和存储这些条目会很困难

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T04:22:35.577

webapp 模板语言是 Django（默认是相当旧的版本）。我认为你必须改变你的要求——你可以用 Python 或 Javascript 解析 JSON，但是 Django 模板语言（故意）太弱了，无法做到这一点。也许向我们展示一些您想要使用的数据样本？

# ruby-on-rails - 无法在 Heroku 上运行控制台

> ID：12764206
> 
> 赞同：0
> 
> 时间：2012-10-06T21:53:18.397
> 
> 标签：ruby-on-rails, heroku

我正在尝试在 Heroku 服务器上部署我的应用程序，但由于某种原因，我既无法启动我的应用程序，也无法启动`run console`. 当我尝试执行`heroku run console`时，我得到以下信息：

```
MacBook:threexortwo lander$ heroku run console
Running `console` attached to terminal... up, run.1  
Rubber[ERROR]: Unable to read rubber configuration from /app/config/rubber/rubber.yml  
(erb):301:in `<main>': undefined local variable or method `rubber_env' for main:Object (NameError)  
    from /usr/local/lib/ruby/1.9.1/erb.rb:753:in `eval'  
    from /usr/local/lib/ruby/1.9.1/erb.rb:753:in `result'  
    from /app/vendor/bundle/ruby/1.9.1/gems/rubber-2.1.2/lib/rubber/environment.rb:39:in `read_config'  
    from /app/vendor/bundle/ruby/1.9.1/gems/rubber-2.1.2/lib/rubber/environment.rb:30:in `block in initialize'  
    from /app/vendor/bundle/ruby/1.9.1/gems/rubber-2.1.2/lib/rubber/environment.rb:30:in `each'  
    from /app/vendor/bundle/ruby/1.9.1/gems/rubber-2.1.2/lib/rubber/environment.rb:30:in `initialize'  
    from /app/vendor/bundle/ruby/1.9.1/gems/rubber-2.1.2/lib/rubber/configuration.rb:37:in `new'  
    from /app/vendor/bundle/ruby/1.9.1/gems/rubber-2.1.2/lib/rubber/configuration.rb:37:in `initialize'  
    from /app/vendor/bundle/ruby/1.9.1/gems/rubber-2.1.2/lib/rubber/configuration.rb:14:in `new'  
    from /app/vendor/bundle/ruby/1.9.1/gems/rubber-2.1.2/lib/rubber/configuration.rb:14:in `get_configuration'  
    from /app/vendor/bundle/ruby/1.9.1/gems/rubber-2.1.2/lib/rubber/configuration.rb:22:in `rubber_env'  
    from /app/vendor/bundle/ruby/1.9.1/gems/rubber-2.1.2/lib/rubber.rb:53:in `config'  
    from /app/vendor/bundle/ruby/1.9.1/gems/rubber-2.1.2/lib/rubber.rb:31:in `initialize'  
    from /app/vendor/bundle/ruby/1.9.1/gems/rubber-2.1.2/lib/rubber/railtie.rb:9:in `block in <class:Railtie>'  
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:34:in `call'  
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:34:in `execute_hook'  
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'  
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:42:in `each'  
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'  
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:67:in `inherited'  
    from /app/config/application.rb:13:in `<module:Threexortwo>'  
    from /app/config/application.rb:12:in `<top (required)>'  
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:39:in `require'  
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:39:in `<top (required)>'  
    from script/rails:6:in `require'  
    from script/rails:6:in `<main>' 
```

以前，我正在使用 Amazon EC2 服务器，并且正在使用`rubber`. 在`rubber`对`vulcanized`. 当我在本地运行我的服务器应用程序时，我没有遇到这个问题，而且我只有在弄乱 Heroku 时才会遇到这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:25:29.283

看起来橡胶仍在您的 gemfile 中。Heroku 读入你的 gemfile 并安装所有列出的 gem。

尝试删除它。

# css - 将 CSS 样式添加到除焦点文本区域之外的所有内容

> ID：12764207
> 
> 赞同：0
> 
> 时间：2012-10-06T21:53:20.467
> 
> 标签：css, focus, textarea, pseudo-element

请只使用CSS！

基本上，我想对页面上的所有内容（或几乎所有内容）应用一些样式，除了某个 textarea 被`:focus`编辑时。

因此，当我专注于 textarea 时，其他所有内容都会得到一个`opacity: 0`或类似的东西。

我试着摆弄，`:not()`但我无法完成工作。

我也可能想将其扩展为：*对页面上的所有内容（或几乎所有内容）应用一些样式，除了在编辑某个 textarea 时的某个**div**`:focus`。*

这是我试图学习的一个过于复杂的例子：http: [//tympanus.net/codrops/2012/01/09/filter-functionality-with-css3/](http://tympanus.net/codrops/2012/01/09/filter-functionality-with-css3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T05:22:45.313

我能想到的最接近的是：

```
*:not(textarea) {
color:red !important;
} 
```

好像`*:not(textarea:focus)`要打破它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T22:13:16.590

没有办法使用 CSS 来提升 DOM 层次结构，因此您要做的是确保相关的 textarea 是您想要淡出的任何内容的容器的兄弟。那时您应该能够执行以下操作：

```
textarea:focus ~ section.toFade {
  opacity: 0.1;
} 
```

这是一个丑陋脆弱的解决方案（受 CSS 的限制），所以希望这只是一个学术练习。

# javascript - javascript 对象 vs 数组 vs JSON

> ID：12764208
> 
> 赞同：23
> 
> 时间：2012-10-06T21:53:38.097
> 
> 标签：javascript, json

尽管进行了很多谷歌搜索和拉扯头发，但我终其一生都无法阐明 json、对象和数组（在 javascript 中）之间的区别。下面是我一直在使用二维数据容器的方式（害怕在这里使用“数组”、“对象”或“json”这些词）。请告诉我这两个例子是什么？

```
//first example:
[
    {"record_id":1,"name":"Frank"},
    {"record_id":2,"name":"Sally"}
]

//second example:
{
"countries": 
    [
    {"id":1,"name":"Canada"},
    {"id":2,"name":"Mexico"}
    ],
"states":
    [
    "id":1,"name":"Maine"},
    {"id":2,"name":"Alaska"}
    ]
} 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-06T21:56:44.460

JSON 是数据结构的表示，它不是对象或数组。

```
[1,2,3] 
```

是一个数组。

```
{"foo":"bar"} 
```

是一个对象。

在你的例子中，

```
[
  {"record_id":1,"name":"Frank"},
  {"record_id":2,"name":"Sally"}
] 
```

是一个对象数组。

```
{
  "countries": 
    [
      {"id":1,"name":"Canada"},
      {"id":2,"name":"Mexico"}
    ],
  "states":
    [
      {"id":1,"name":"Maine"},
      {"id":2,"name":"Alaska"}
    ]
} 
```

是一个对象，其中包含其他数组和对象。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-06T22:09:22.007

**JSON**是`JavaScript Object Notation`. 这只是写下 JavaScript 数据类型的一种方式。它本身不是一种数据类型。

有关 JavaScript 数据类型的一些示例，以及创建它们的文字符号，请参见下文。

例如，JSON 可用于将数据从服务器发送到浏览器，因为 JavaScript 很容易解析成普通的 JavaScript 数据结构。

在您的示例中，您正在使用对象列表和对象对象。

这是 3 个空对象的列表。

```
[{}, {}, {}] 
```

这是三个简单记录的列表：

```
var mylist = [
    {name: 'John', age: 24},
    {name: 'Bill', age: 42},
    {name: 'Jill', age: 18},
    ] 
```

您可以像这样访问它：

```
mylist[1].name
>>> 'Bill'

mylist[2].age
>>> 18 
```

# JavaScript 有几种数据类型：

**数字**

```
1
100
-2000
123.45 
```

**细绳**

```
"Hi John"
"Message:\nGo Forth" 
```

**布尔值**

```
true
false 
```

**大批**

```
[1,2,3]
[]
["a", "b", 123]
["a", "b", 123, [3,4,5]] 
```

**目的**

```
{}
{a: 10}
{mylist: [1,2,3], yourlist: [4,5,6]}
{myself: {name: 'me', age: 10}, yourself: {name: 'you', age: 20}} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-06T22:06:02.307

您使用`{`大括号`}`来声明一个*对象字面量*。

您使用`[`方括号`]`来声明一个*数组字面量*。

对象是键名值对的集合。

下面是一个字符串数组的例子：

```
var a = [ "one", "two", "three" ]; 
```

下面是一个代表人的简单对象的示例：

```
var personObject = {
    name: 'Joe',
    age: 25,
    hometown: 'New York'        
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T22:09:30.493

JSON 是一种文本数据交换格式。正如它的名字（“JavaScript Object Notation”）所暗示的，它起源于 JS；这意味着 JSON 实际上是语法上有效的 JavaScript。换句话说，您可以将 JSON 字符串直接粘贴到您的 JS 代码中。

数组是特殊的对象。它们可以由 构建`[]`。

对象可以通过`{}`.

因此，您的示例中有两个 JSON 字符串，一个表示对象数组，第二个表示对象，其属性本身就是对象数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T21:58:04.727

好吧，我相信对象可以具有方法和属性，而数组则不能。JSON 可以传递给服务器，而数组不能传递，除非你通过 POST 将它作为字符串传递

# c++ - QNetworkAccessManager 内存泄漏

> ID：12764214
> 
> 赞同：2
> 
> 时间：2012-10-06T21:54:21.897
> 
> 标签：c++, qt, qnetworkaccessmanager

我在使用 QNetworkAccessManager（使用 Qt）时遇到了一些内存泄漏问题。我调用的请求越多，分配的内存就越多。这是有道理的，但对我来说不是这样。我打电话，比如说16个请求，然后一旦网络回复命中16次，我就调用下一个16次。用这种方法，这不会调节内存吗？出于某种原因，它不是，并且随着更多的调用，内存稳步增加。在线程中有这个会影响这个吗？

标题：

```
#include <QThread>
#include <QtNetwork/QNetworkAccessManager>
#include <QtNetwork/QNetworkRequest>
#include <QtNetwork/QNetworkReply>
#include <QSemaphore>
#include <QPixmap>
#include <QMutex>
#include <QDebug>

#include "winnames.h"

#define MAX_REQUEST_COUNT 16

class Downloader : public QThread
{
    Q_OBJECT
public:
    explicit Downloader(QObject *parent = 0);
    void start(Priority = InheritPriority);

signals:
    void PictureDownloaded(QPixmap picture, QString id);

public slots:
    void networkReply(QNetworkReply*);

private:
    void startDownloads();

    QString titleID;
    QNetworkAccessManager *manager;

    int amount;
}; 
```

共产党：

```
#include "downloader.h"

Downloader::Downloader(QObject *parent) : QThread(parent)
{
    manager = new QNetworkAccessManager(this);
    connect(manager, SIGNAL(finished(QNetworkReply*)), this, SLOT(networkReply(QNetworkReply*)));
}
void Downloader::start(Priority p)
{
    amount = 0;
    titleID = "50";
    startDownloads();
}

void Downloader::startDownloads()
{
    const int searchValues[] = {0, 0x400, 0x1000, 0x8000, 0xFFFF};
    for (int x = 0; x < 4; x++)
    {
        int num = searchValues[x] + amount;
        if (num >= searchValues[x + 1])
            continue;

        for (int i = 0; i < MAX_REQUEST_COUNT; i++)
            manager->get(QNetworkRequest(QUrl("http://my.url/" + titleID.toUpper() + "/someDir/" + QString("%1").arg(num + i, 4, 16, QChar('0')).toUpper())));
    }
}

void Downloader::networkReply(QNetworkReply *reply)
{
    if (reply->bytesAvailable() != 0)
    {
        QPixmap pixmap;
        pixmap.loadFromData(reply->readAll(), "PNG");
        if (!pixmap.isNull())
            emit PictureDownloaded(pixmap, titleID + reply->url().toString().mid(reply->url().toString().length() - 4));
    }
    reply->deleteLater();
    reply->close();

    QMutex m;
    m.lock();

    if (amount++ != 0 && amount % MAX_REQUEST_COUNT == 0)
        startDownloads();

    m.unlock();
} 
```

任何想法？谢谢！

# javascript - 使用greasemonkey脚本生成链接

> ID：12764215
> 
> 赞同：1
> 
> 时间：2012-09-16T11:58:16.047
> 
> 标签：javascript, hyperlink, greasemonkey

我正在尝试在 Greasemonkey 中编写一个脚本，该脚本将在一个框架中生成链接，但是由于我有限的 Javascript 知识，我真的不知道该怎么做。

主题示例：

```
<html>
<head>
<frameset border="0" frameborder="no" framespacing="0" cols="*,280" rows="*">
<frameset border="0" frameborder="NO" framespacing="0" cols="*" rows="*,200">
<frameset border="0" frameborder="NO" framespacing="0" cols="*" rows="75,*">
<frame scrolling="NO" name="bannerFrame" src="banner.php">
<frame scrolling="auto" name="mainFrame" src="main.php">
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<body class="framemainbg" marginwidth="0" marginheight="0" topmargin="0" leftmargin="0">
<table class="areadescription" cellspacing="0" cellpadding="0" border="0">
<br>
<table>
<tbody>
<tr>
<td>
<p class="personlistcaption">Text:</p>
<p class="listusersrow">
<table>
<tbody>
<tr>
<td valign="top">
<td valign="top">
<b>Text </b>
Text -
<a href="fight.php?action=attacknpcmenu&checkid=1347789191&act_npc_id=764">Attack</a>
-
<a class="fastattack" onclick="this.href += '&yscroll=' + window.pageYOffset;" href="fight.php?action=attacknpc&checkid=8409099&act_npc_id=764">Quickattack</a>
<br>
Text
</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
</tbody>
</table>
<br>
<table>
<form name="formular">
</body>
</html>
</frame>
</frameset>
<frameset border="0" frameborder="NO" framespacing="0" cols="*" rows="*,0">
</frameset>
<frameset border="0" frameborder="NO" framespacing="0" cols="*" rows="*,360">
</frameset>
<noframes><body> Text </body></noframes>
</html> 
```

所需输出的示例：

```
<html>
<head>
<frameset border="0" frameborder="no" framespacing="0" cols="*,280" rows="*">
<frameset border="0" frameborder="NO" framespacing="0" cols="*" rows="*,200">
<frameset border="0" frameborder="NO" framespacing="0" cols="*" rows="75,*">
<frame scrolling="NO" name="bannerFrame" src="banner.php">
<frame scrolling="auto" name="mainFrame" src="main.php">
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<body class="framemainbg" marginwidth="0" marginheight="0" topmargin="0" leftmargin="0">
<table class="areadescription" cellspacing="0" cellpadding="0" border="0">
<br>
<table>
<tbody>
<tr>
<td>
<p class="personlistcaption">Text:</p>
<p class="listusersrow">
<table>
<tbody>
<tr>
<td valign="top">
<td valign="top">
<b>Text </b>
Text -
<a href="fight.php?action=attacknpcmenu&checkid=1347789191&act_npc_id=764">Attack</a>
-
<a class="fastattack" onclick="this.href += '&yscroll=' + window.pageYOffset;" href="fight.php?action=attacknpc&checkid=8409099act_npc_id=764">Quickattack</a>
-
<a href="fight.php?action=slapnpc&amp;checkid=8409099&amp;act_npc_id=764&amp;mark=0">Hit</a>
-
<a href="fight.php?action=chasenpc&amp;checkid=8409099&amp;act_npc_id=764&amp;">Chase</a>
<br>
Text
</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
</tbody>
</table>
<br>
<table>
<form name="formular">
</body>
</html>
</frame>
</frameset>
<frameset border="0" frameborder="NO" framespacing="0" cols="*" rows="*,0">
</frameset>
<frameset border="0" frameborder="NO" framespacing="0" cols="*" rows="*,360">
</frameset>
<noframes><body> Text </body></noframes>
</html> 
```

应生成此链接：

```
-
<a href="fight.php?action=slapnpc&amp;checkid=8409099&amp;act_npc_id=764&amp;mark=0">Hit</a>
-
<a href="fight.php?action=chasenpc&amp;checkid=8409099&amp;act_npc_id=764&amp;">Chase</a> 
```

'checkid=...' 和 'npc_id=...' 必须与此链接中的值相同：

```
<a class="fastattack" onclick="this.href += '&yscroll=' + window.pageYOffset;" href="fight.php?action=attacknpc&checkid=8409099act_npc_id=764">Quickattack</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T12:26:55.373

好的，这实际上只是基本的[HTML DOM 操作](https://developer.mozilla.org/en-US/docs/DOM)，这里没有[GreaseMonkey](http://en.wikipedia.org/wiki/Greasemonkey)特定的内容。

首先，我将假设您要从中复制 URL 参数的链接是唯一带有 的链接`class="fastattack"`，因为[这样很容易找到](https://developer.mozilla.org/en-US/docs/DOM/Document.getElementsByClassName)：

```
var link = document.getElementsByClassName( 'fastattack' )[0];
if ( link ) {
    // we found the link, do stuff with it... 
```

接下来，我们需要[生成第一个新链接](https://developer.mozilla.org/en-US/docs/DOM/Document.createElement)：

```
 var newlink = document.createElement( 'a' ); 
```

...使其[指向我们想要的 URL](https://developer.mozilla.org/en-US/docs/DOM/HTMLAnchorElement)：

```
 newlink.href = link.href.replace( 'action=attacknpc', 'action=slapnpc' ); 
```

...并给它[我们想要的链接文本](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)：

```
 newlink.textContent = 'Hit'; 
```

接下来，我们[将新链接插入到](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore)原始链接之后的 DOM 中，如下所示：

```
 var nextNode = link.nextSibling;
    link.parentNode.insertBefore( newlink, nextNode ); 
```

糟糕，我们忘了先插入[分隔符](https://developer.mozilla.org/en-US/docs/DOM/Document.createTextNode)！不用担心，我们仍然可以这样做：

```
 var delim = document.createTextNode( ' - ' );
    link.parentNode.insertBefore( delim, newlink ); 
```

现在我们可以对另一个链接做同样的事情：

```
 var newlink2 = document.createElement( 'a' );
    newlink2.href = link.href.replace( 'action=attacknpc', 'action=chasenpc' );
    newlink2.textContent = 'Chase';
    link.parentNode.insertBefore( delim.cloneNode( true ), nextNode );
    link.parentNode.insertBefore( newlink2, nextNode ); 
```

这一次，我记得先插入分隔符。我使用了与`delim`上面相同的节点，但我[复制了它，](https://developer.mozilla.org/en-US/docs/DOM/Node.cloneNode)因为我想插入*另一个*相同的分隔符，而不是将原始分隔符移动到 DOM 中的新位置。

最后，我们需要关闭`if`块，就是这样：

```
} 
```

（免责声明：我没有实际测试过上面的代码。我*认为*它应该可以工作，但可能有我错过的错误或拼写错误。）

**编辑：**更改代码以在原始链接之后插入新链接，而不是在父段落的末尾。

**附录：** 如果您在文档中有多个链接`class="fastattack"`，并希望将上面的代码应用于每个链接，您可以通过将上面的前两行替换为所有链接的循环来实现，而不仅仅是第一行：

```
var links = document.getElementsByClassName( 'fastattack' );
for ( var i = 0; i < links.length; i++ ) {
    var link = links[i];
    // now do stuff with link just like above 
```

# html - CSS 问题样式按钮

> ID：12764219
> 
> 赞同：0
> 
> 时间：2012-10-06T21:54:52.557
> 
> 标签：html, css

我正在尝试使用 CSS 设置按钮样式。这是按钮的 HTML 代码：

```
<button class='custombtn' name="doLogin" type="submit" id="doLogin3" value="Login">Login</button> 
```

这是CSS代码。

```
.custombtn {
    width:163px;
    height:43px;
    background-image:url('images/normal.png');
    background-color:#d3d3d3;
}
.custombtn:hover {
    background-image:url('images/hover.png');
}
.custombtn:active {
    background-image:url('images/click.png');
} 
```

在我查看结果之前，我认为一切都很好。而不是像这样带有文字的东西：

![在此处输入图像描述](../Images/e9ef9207a9265a9c3d3f28e55e835d5c.png)

它看起来像这样：

![在此处输入图像描述](../Images/13144ca668b83480aba8d85d45ade3cd.png)

我已经在网上阅读了大约一个半小时的修复程序，但是没有一个起作用。我知道可以把它设计成这样，我只需要找到一种方法。

**正常.png**

![在此处输入图像描述](../Images/66c8c8645334e3bd852a111cbe980a6a.png)

**悬停.png**

![在此处输入图像描述](../Images/84e377d80da70a6486ac20423f1a9cf9.png)

**点击.png**

![在此处输入图像描述](../Images/bff389152cbe5ce10eaf1ad32fd5772c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:57:14.867

您需要明确设置`border:none; background-color:transparent;`on `.custombtn`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T22:04:33.327

您需要将边框设置为无。那肯定可以解决问题并确保图像本身没有空白。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T22:08:42.117

我认为按钮的背景和边框是你头痛的原因。

尝试这样的事情：

```
.custombtn {
    margin: 10px;
    width:163px;
    height:43px;
    background-image:url('images/normal.png');
    background-color: transparent;
    border: none;
}
.custombtn:hover {
    background-image:url('images/hover.png');
}
.custombtn:active {
    background-image:url('images/click.png');
}​ 
```

# c - 错误：无法插入模块。模块中的未知符号

> ID：12764220
> 
> 赞同：2
> 
> 时间：2012-10-06T21:55:03.230
> 
> 标签：c, gcc, linux-kernel, x86-64, inline-assembly

我正在尝试将[RR0D Rasta Ring0 调试器](http://rr0d.droids-corp.org/)从 32 位 Linux 移植到 64 位 Linux。如我的问题中所述，我已使用 vim 正则表达式将 32 位 gcc 内联汇编转换为 64 位：[如何将 Linux 32 位 gcc 内联汇编转换为 64 位代码？](https://stackoverflow.com/questions/11897116/how-to-convert-linux-32-bit-gcc-inline-assembly-to-64-bit-code)

我正在使用带有`-m64`标志的 gcc。目标环境是 Linux x86-64，自定义内核版本 3.5.5。

`Makefile`如下：

```
EXTRA_CFLAGS +=  -O2 -Wall -DLINUX_26 -m64

OBJ          := module_nux.o breakpoint.o buffering.o command.o disasmbak.o idt.o 
OBJ          += keyboard.o page.o video.o utils.o import_symb.o core_rr0d.o pci.o
MODULE       := rr0d.o 

obj-m        := $(MODULE)
rr0d-objs    := $(OBJ)

default:
    make -C /lib/modules/`uname -r`/build/ SUBDIRS=`pwd` modules

clean:
    rm -f  *.o .*.o.cmd .*.ko.cmd *.mod.c  *~ 
    rm -rf .tmp_versions

mrproper:
    make clean
    rm -f *.ko 
```

`make`给出了很多警告，例如`warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]`and `warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]`，但这些可能与主题无关。

的输出的最后几行`make`可能是重要的：

```
/home/user/code/rr0d/0.3/core_rr0d.c: In function ‘cleanup_rr0d’:
/home/user/code/rr0d/0.3/core_rr0d.c:1938:36: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
  CC [M]  /home/user/code/rr0d/0.3/pci.o
  LD [M]  /home/user/code/rr0d/0.3/rr0d.o
  Building modules, stage 2.
  MODPOST 1 modules
WARNING: "RING_HOOO_SEGMENT" [/home/user/code/rr0d/0.3/rr0d.ko] undefined!
  CC      /home/user/code/rr0d/0.3/rr0d.mod.o
  LD [M]  /home/user/code/rr0d/0.3/rr0d.ko
make[1]: Leaving directory `/home/user/code/kernel/linux-3.5.5' 
```

所以，`RING_HOOO_SEGMENT`是未定义的。

当我尝试以root 身份`insmod`访问模块时`insmod ./rr0d.ko`，我得到：

```
Error: could not insert module ./rr0d.ko: Unknown symbol in module 
```

检查与`dmesg | tail -n 1`给出以下输出：

```
[15975.412346] rr0d: Unknown symbol RING_HOOO_SEGMENT (err 0) 
```

所以，未知符号肯定是`RING_HOOO_SEGMENT`。

`RING_HOOO_SEGMENT``#define`是一个用in创建的常量`vars.h`，它包含在几个`.c`用`#include "vars.h"`.

with的基本`#ifdef`块是这个：`vars.h``#define RING_HOOO_SEGMENT`

```
#ifdef LINUX_26

#define fake_naked

#if defined(__GNUC__)
// the line below is the important one.
#define RING_HOOO_SEGMENT "$0x7b"
//#define       RING_HOOO_SEGMENT "$0x60"
#elif defined(_MSC_VER)
#define RING_HOOO_SEGMENT 0x7b
#endif

#else /* LINUX_24 */

#define fake_naked _asm_("\t" \
                     "add $0x08, %esp\n\t" \
                     "popl %ebp\n" \
);

#if defined(__GNUC__)
#define RING_HOOO_SEGMENT "$0x18"
#elif defined(_MSC_VER)
#define RING_HOOO_SEGMENT 0x18
#endif

#define RING_HOOO_SEGMENT_VALUE 0x18

#endif /* LINUX_26 */ 
```

显然，如果`#define RING_HOOO_SEGMENT "$0x7b"`(in `#if defined(__GNUC__)`inside `#ifdef LINUX_26`) 被注释掉，代码将无法编译，所以很明显它`RING_HOOO_SEGMENT`被定义了。

Grepping for`RING_HOOO_SEGMENT`给出以下匹配：

```
$ grep 'RING_HOOO_SEGMENT' *.c *.o *.ko

core_rr0d.c:    "movq RING_HOOO_SEGMENT, %rax\n\t"\
core_rr0d.c:  __asm{    movq RING_HOOO_SEGMENT, %rax}\
Binary file rr0d.ko matches 
```

两`core_rr0d.c`行都是内联汇编。`core_rr0d.c`包含`#include "vars.h"`所以应该没问题。

二进制模块也`rr0d.ko`匹配，因此它包含字符串`RING_HOOO_SEGMENT`（以某种形式），即使`insmod ./rr0d.ko`失败了`Error: could not insert module ./rr0d.ko: Unknown symbol in module`.

任何想法可能导致此问题的原因以及如何继续使用`insmod`该模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T00:29:27.940

```
core_rr0d.c:    "movq RING_HOOO_SEGMENT, %rax\n\t"\ 
```

这里 RING_HOOO_SEGMENT 在一个字符串中（可能是内联汇编程序块的一部分）。因此，预处理器不会替换`RING_HOOO_SEGMENT`，它会按原样传递给汇编器，其中 的定义`RING_HOOO_SEGMENT`不可用。

幸运的是，`RING_HOOO_SEGMENT`它本身被定义为字符串`"$0x7b"`，所以我们可以在编译时使用字符串连接：

```
"movq " RING_HOOO_SEGMENT ", %rax\n\t"\ 
```

预处理器将替换`RING_HOOO_SEGMENT`，`"$0x7b"`然后 GCC 将连接这些字符串，然后将其传递给汇编器。

# c - C中的计算器程序问题

> ID：12764221
> 
> 赞同：0
> 
> 时间：2012-10-06T21:55:03.497
> 
> 标签：c, function, calculator

我正在写一个统计计算器，有 3 种不同的计算选项。问题是每当我选择第二个选项时，它都想打印第一个选项和第二个选项的答案。当我选择第 3 个选项时，它只会打印第 3 个选项的答案（错误的答案，但这可能是公式中的一个失误）。结果如下：

```
Please Enter a number of inputs
3
Please enter number 1
1
Please enter number 2
2
Please enter number 3
3
Statistical Calculator Menu
(1) Mean
(2) Standard Deviation
(3) Range
(4) Restart/Exit
2
Here is the Mean 2.0Standard Devition is 0.8 
```

现在我认为这可能是我如何调用每个函数的问题，但我能说的最好的情况并非如此。然后我认为它可能是我没有初始化的值，但似乎也不是这样。我只需要另一双眼睛来看看我哪里出错了。

```
#include <stdio.h>
#include <conio.h>
#include <math.h>

const int MAX_DATA=8;
void menu(float numbers[], int amount);
float mean(float numbers[],int amount);
float standard_dev(float numbers[], int amount);
float range( float numbers[], int amount);

int main()
{
    int i=0, amount=0;
    float numbers[MAX_DATA];
    printf("Please Enter a number of inputs \n");
    scanf("%d", &amount);
    if (amount>MAX_DATA)
    {
        printf("You entered too many numbers");
    }
    else
    {
        for (i=0; i<amount; i++)
        {
            printf("Please enter number %d\n", i+1);
            scanf("%f",&numbers[i]);
        }
        menu(numbers,amount);
    }
    getch();
    return 0;
}
void menu(float numbers[],int amount)
{
    int input2=0;
    printf("Statistical Calculator Menu");
    printf("\n(1) Mean\n(2) Standard Deviation\n(3) Range\n(4) Restart/Exit\n");
    scanf("%d",&input2);
    if(input2==1)
    {
        mean(numbers,amount);
    }
    if  (input2==2)
    {
        standard_dev(numbers,amount);
    }
    if (input2==3)
    {
        range(numbers,amount);
    }
}
float mean(float numbers[],int amount)
{
    int i;
    float sum=0;
    float average=0;
    for (i=0; i<amount; i++)
    {
        sum=sum+numbers[i];
    }
    average=sum/amount;
    printf("Here is the Mean %.1f", average);
    return average;
}
float standard_dev(float numbers[], int amount)
{
    float sdev=0,dev=0,sumsqr=0,variance=0;
    int i;
    float mean2=0;
    mean2=mean(numbers,amount);
    for (i=0; i<amount; i++)
    {
        dev=numbers[i]-mean2;
        sumsqr+=dev*dev;
    }
    variance=sumsqr/(float)amount;
    sdev=sqrt(variance);
    printf("Standard Devition is %.1f", sdev);
    return sdev;
}
float range(float numbers[],int amount)
{
    int i;
    float diff=0;
    for (i=0; i<=amount; i++)
    {
        diff=numbers[amount]-numbers[1];
    }
    printf("%f\n",diff);
    return diff;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:57:57.813

```
float standard_dev(float numbers[], int amount)
{
 float sdev=0,dev=0,sumsqr=0,variance=0;
 int i;
 float mean2=0;
 mean2=mean(numbers,amount); // Here it is. 
```

它调用该`mean`函数，该函数实际上打印了一些东西:) 您可以将布尔标志添加`shouldPrint`到函数中，并`true`在您想要打印它时传递它。

此外，这个问题很容易通过简单的调试代码来解决......如果实际查看它似乎没有帮助......

# php - 为什么当我在 mysql 中调用 STORED PROCEDURE 时 pdo->lastInsertId() 返回 0？

> ID：12764222
> 
> 赞同：3
> 
> 时间：2012-10-06T21:55:07.193
> 
> 标签：php, mysql, stored-procedures, pdo, last-insert-id

我需要返回数据库中最后插入行的 id：

我有一个名为 DatabaseHandler 的类来使用 pdo

```
 <?php class DatabaseHandler
    {
      private static $_mHandler;

      private function __construct()
      {}

      private static function GetHandler()
      {
        if (!isset(self::$_mHandler))
        {
          try
          {
            self::$_mHandler =
              new PDO(PDO_DSN, DB_USERNAME, DB_PASSWORD,
                      array(PDO::ATTR_PERSISTENT => DB_PERSISTENCY));
            self::$_mHandler->setAttribute(PDO::ATTR_ERRMODE,
                                           PDO::ERRMODE_EXCEPTION);
            self::$_mHandler->setAttribute(PDO::MYSQL_ATTR_USE_BUFFERED_QUERY, true);
          }
          catch (PDOException $e)
          {
            self::Close();
            trigger_error($e->getMessage(), E_USER_ERROR);
          }
        }
        return self::$_mHandler;
      }

      public static function Close()
      {
        self::$_mHandler = null;
      }
      public static function Execute($sqlQuery, $params = null)
      {
        try
        {
          $database_handler = self::GetHandler();
          $statement_handler = $database_handler->prepare('set names utf8; ' . $sqlQuery);
          $statement_handler->execute($params);
          $result=$database_handler->lastInsertId();              
        }catch(PDOException $e){
          self::Close();
          trigger_error($e->getMessage(), E_USER_ERROR);
        }
        return $result;         
      }?> 
```

和 mysql db 中的存储过程：

```
 CREATE PROCEDURE `sp_users_Insert`(IN _username VARCHAR(50), IN _email VARCHAR(50), IN _password CHAR(32), IN _ip VARCHAR(15), IN _reg_date INT,  IN _ref_id MEDIUMINT)
    BEGIN
       INSERT INTO n_users
       (username , email , password , ip , reg_date , ref_id )
             VALUES(_username , _email , _password , _ip , _reg_date , _ref_id );
    END$$ 
```

当我这样调用时，会创建数据库记录，但 lastInsertId() 返回 0：

```
$username =me;
$email=me@me.com;
$password =msadss;
$ip =12.0.0.1;
$reg_date =1347284764;
$ref_id =12;

$sql = 'CALL `sp_users_Insert`(:username,:email,:password,:ip,:reg_date,:ref_id)';
$params = array (':username' => $username, ':email' => $email, ':password' => $password, ':ip' => $ip, ':reg_date' => $reg_date, ':ref_id' => $ref_id);
DatabaseHandler::Close(); 
return DatabaseHandler::Execute($sql, $params); 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T22:08:27.300

尝试作为过程中的最后一个命令：

```
SELECT LAST_INSERT_ID(); 
```

# dynamics-crm-2011 - OrganizationServiceProxy 的线程安全和生成的 xrm 服务上下文

> ID：12764225
> 
> 赞同：4
> 
> 时间：2012-10-06T21:55:18.253
> 
> 标签：dynamics-crm-2011

这是一个最佳实践问题。根据这篇[最佳实践文章](http://msdn.microsoft.com/en-us/library/gg509027.aspx#Performance)和 MSDN，[`OrganizationServiceProxy`](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.client.organizationserviceproxy.aspx)它不是线程安全的。

如果您有一个多线程客户端应用程序，您正在其中创建一个实例 [`OrganizationServiceContext`](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.client.organizationservicecontext.aspx)（基于每个线程），其构造函数接受一个 [`IOrganizationService`](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.iorganizationservice.aspx)实例，并且您传入一个全局实例[`OrganizationServiceProxy`](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.client.organizationserviceproxy.aspx) （即在“进程级别”），这是否会导致线程问题和/或如果[`OrganizationServiceProxy`](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.client.organizationserviceproxy.aspx) 实例故障，是否会影响线程尝试在它们自己的“本地”实例上执行的操作[`OrganizationServiceContext`](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.client.organizationservicecontext.aspx)？

我相信它会，并且[`OrganizationServiceProxy`](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.client.organizationserviceproxy.aspx)需要在“每个线程”的基础上创建一个实例，并且[`OrganizationServiceContext`](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.client.organizationservicecontext.aspx)多线程应用程序中的每个实例都需要其**自己的相应** [`OrganizationServiceProxy`](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.client.organizationserviceproxy.aspx)实例。

我发布此内容以确认上述内容。

此外，文章指出

> 服务代理类使用以下类方法执行元数据下载和用户认证

```
IServiceManagement<IOrganizationService> orgServiceManagement =
                 ServiceConfigurationFactory.CreateManagement<IOrganizationService>(
                 new Uri(organizationUrl))

AuthenticationCredentials authCredentials = orgServiceManagement.Authenticate(credentials) 
```

> *通过缓存服务管理和经过身份验证的凭证对象，您的应用程序可以更有效地构造服务代理对象，每个应用程序会话不止一次*

如果我尝试手动执行上述 API 调用，在 Active Directory 身份验证模式下，`authCredentials.SecurityTokenResponse`则为空，如[MSDN 所示](http://msdn.microsoft.com/en-us/library/gg307068.aspx)

有没有办法对 AD 模式执行一次身份验证，并通过以下构造函数将经过**身份验证** [`SecurityTokenResponse`](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.client.authenticationcredentials.securitytokenresponse.aspx)的对象传递给新创建的对象？[`OrganizationServiceProxy`](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.client.organizationserviceproxy.aspx)

```
OrganizationServiceProxy (IServiceConfiguration, SecurityTokenResponse) 
```

这样在为每个线程构建实例时，您不必在“每个线程的基础上”进行身份验证和元数据下载，[`OrganizationServiceProxy`](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.client.organizationserviceproxy.aspx)而只需点击一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T03:07:36.310

是的，如果您在单个 IOrganization 服务上尝试多线程操作，您肯定会遇到问题。

我们有两个基本的多线程 CRM 应用程序：批处理程序和另一个 Web 应用程序。对于批处理程序，我发现最好只有 10 个不同的线程，并在 10 个不同的线程中分批工作。因此，如果您要插入 100,000 条记录，请将它们分成 10 批，每批 10,000 条，每个线程都有一个组织服务。

我们还有一个网站进行大量 CRM 交互，因此没有真正的方法来批处理请求，因此我们创建了一个 CRM 连接池来重用任何打开的、已经过身份验证的连接。

当然，如果您不使用某些系统服务帐户，这根本不起作用。

# git - 删除 Git 跟踪的文件

> ID：12764227
> 
> 赞同：3
> 
> 时间：2012-10-06T21:55:50.263
> 
> 标签：git

我正在清理我的本地开发副本。我在服务器上安装了 WordPress，但我不需要 repo 中的任何 WP 核心文件。我添加`wp-*.php`到本地 .gitignore，并使用 .gitignore 删除了一些文件`git rm --cached wp-*.php`。我提交了更改，并推送到中央仓库。

在生产服务器上，我去提取更改`git pull remote master`并从服务器中删除`wp-*.php`文件。

没有 git pull 从生产服务器删除文件的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T22:10:44.297

它只会删除一次（因为您告诉 Git 从其跟踪中删除文件）。然后您可以手动将它们添加回服务器端，Git 不会再次删除它们，因为在第一次删除后它将不再跟踪它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T11:08:21.703

@Amber 是正确的，repo 上的删除是删除，所有克隆在拉取“git rm”提交时都会忠实地删除这些文件。他们有点重演他们正在拉动的交易。

如果您不介意将文件保留在存储库中，则删除它们的替代方法是停止跟踪它们的更改。这可以通过`git update-index --assume-unchanged`.

# java - 如果事件未准备好，GWT 应用程序不显示主登录页面

> ID：12764235
> 
> 赞同：0
> 
> 时间：2012-10-06T21:57:10.780
> 
> 标签：java, gwt

我有一个 GWT 应用程序，当另一台服务器考虑执行特定任务的服务器 1 完成其计算时，它会触发名为服务器 2 的主应用程序服务器，在该服务器上部署了我的应用程序。我想实现一种方法，当服务器 1 超时时，不会显示服务器 2 的主登录页面，而是应该显示一条消息，说“服务器仍在计算信息”。我应该在哪个事件上执行一个可以做到这一点的程序？

考虑上述过程的图解流程表示。

服务器1------->计算------->完成计算---->触发应用服务器---->显示登录页面---->用户登录--->主应用程序显示。

我想要实现的

如果服务器 1 ---> 失败 ----> 触发应用程序服务器 ----> 显示消息“服务器仍在计算信息 ---> 登录页面未显示 --> 应用程序未加载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T22:51:47.093

我将假设您正在使用 GWT RPC 与您的服务器进行通信。在这种情况下，我的解决方案是简单地将“服务器仍在计算”消息显示为默认页面，然后在 RPC 调用返回时加载实际页面。

将您的逻辑挂钩到异步的 OnSuccess 中，这应该可以满足您的需要。

# java - 将信息从一种方法发送到 Java Applet 中的另一种方法

> ID：12764237
> 
> 赞同：1
> 
> 时间：2012-10-06T21:57:16.807
> 
> 标签：java, applet, user-input

我的代码大部分都完成了，但我很难弄清楚最后一点，以便它完成。

**这是我正在尝试做的事情：**

我正在尝试制作一个小程序，它通过 JOptionPanes 从用户那里获取两个浮点数，并给出这两个数字的总和以及矩形内总和的绝对值。

就像我说的，我已经完成了代码，我只是挂断了一部分。我不知道如何让用户输入到窗格中，因为我已将窗格放入 init 方法中，而用于输出的矩形和字符串位于 paint 方法中。

我尝试让窗格和矩形都在绘制方法中，但这导致窗格在给出输出之前提示用户两次，我不希望这样。这就是我将窗格放在 init 方法中的原因。

有没有什么办法可以调用init方法中的信息，放到paint方法中呢？

谁能帮我吗？

这是我为这个小程序制作的代码：

```
import javax.swing.JApplet;
import javax.swing.JOptionPane;
import java.text.DecimalFormat;
import java.awt.*;

public class MathApplet extends JApplet
{
    public void init()
    {

        DecimalFormat fmt = new DecimalFormat ("0.##");
        DecimalFormat fmt2 = new DecimalFormat ("0.###");

        String intro, givenum1, givenum2;
        float num1, num2, sum, absum;

        intro = "Enter two floating point numbers, and their sum and the absolute 
                    value of the sum will be calculated.";

        JOptionPane.showMessageDialog(null, intro);

        givenum1 = JOptionPane.showInputDialog(null, "Enter the 1st floating point 
                                                       number now." );

        num1 = Float.parseFloat(givenum1);

        givenum2 = JOptionPane.showInputDialog(null, "Enter the second floating point 
                                                       number now.");

        num2 = Float.parseFloat(givenum2);

        sum = num1+num2;

        absum = Math.abs(sum);
   }

   public void paint (Graphics page)
   { 
        page.drawRect (60, 80, 300, 140);
        page.drawString("The absolute value of the numbers is.", 100, 100);
        page.drawString ("The sum of the numbers is.", 100, 120);

    }

} 
```

# jquery - 如果页面中存在其他两个类之一，则删除特定类的一个元素

> ID：12764239
> 
> 赞同：2
> 
> 时间：2012-10-06T21:57:26.740
> 
> 标签：jquery

我有一个处理视频的 Drupal 站点。视频处理成功后，视频会填充到正确的页面中，旁边有一些社交媒体链接。但是，当视频正在进行转码或转码失败时，系统会在视频最终显示的同一页面上提供消息，并显示这些社交链接，尽管还没有任何值得分享的内容。我想删除它们。

当视频正在处理时，会显示一条带有 .video-inprogress 类的消息。当它失败时，它会显示一个带有 .video-conversion-failed 类的 div。我想同时针对这两个，如果存在，请完全删除社交链接 div (.service-links)。

这是我尝试使用的代码；它默默地失败：

```
if (jQuery('.video-inprogress, .video-conversion-failed').length) {
  jQuery('.service-links').remove();
}; 
```

关于我做错了什么的任何指示？（我使用 'jQuery' 而不是 '$' 来解决此站点中存在的另一个冲突，我继承了该冲突，并且使用无关的 JS 和 jQuery 代码进行了很好的处理。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:09:25.900

尝试将您的代码放入文档就绪处理程序中：

```
(function($){
   $(document).ready(function(){
      if ($('.video-inprogress, .video-conversion-failed').length) {
           $('.service-links').remove();
      };
   })
})(jQuery) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T22:14:07.230

尝试对两个类的长度使用一个变量：

var n = jQuery('.video-inprogress, .video-conversion-failed').length;

```
if (n >= 1) {
  jQuery('.service-links').remove();
}; 
```

如果它仍然给您带来问题，请尝试扩展 .length 语句：

```
var n = jQuery('.video-inprogress').length;
var n += jQuery('.video-conversion-failed').length; 
```

# typescript - TypeScript：接口 vs 类 vs 模块 vs 程序 vs 函数

> ID：12764247
> 
> 赞同：62
> 
> 时间：2012-10-06T21:58:06.177
> 
> 标签：typescript

我阅读了位于以下位置的 TypeScript 规范： [http ://www.typescriptlang.org/Content/TypeScript%20Language%20Specification.pdf](http://www.typescriptlang.org/Content/TypeScript%20Language%20Specification.pdf)

然而，它让我对以下内容感到困惑：

1.  界面
2.  班级
3.  模块
4.  程式
5.  职能。
6.  声明与 var

有人可以简要帮助了解何时应使用上述哪一项吗？接口和类是否与 C# 版本相同？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-10-06T22:07:38.803

正如您在问题中提到的那样，我已使这些答案与 C# 匹配，但希望这些答案对从类似语言来到 TypeScript 的人也有用。

**界面**

TypeScript 中的界面类似于您在 C# 中遇到的界面。这是一个契约——如果你的一个类实现了一个接口，它承诺具有接口记录的某些属性或方法。

在 TypeScript 中，一个接口可以从另一个接口继承来扩展它，也可以从一个类继承来捕获它的实现。

每当 TypeScript 中似乎不可能的事情时，您通常可以使用界面来解决它！

在 TypeScript 中，接口有广泛的用途。它们描述了一种结构，因此可以在任何使用类型的地方使用（即不仅可以在类中实现它们，还可以使用它们来键入变量、参数、返回值等）。

**班级**

这与 C# 中类的概念非常相似。您可以从其他类继承来扩展或专门化行为。

**命名空间**

较新的命名空间关键字用于将一组代码放置在有限范围内。这类似于 C# 命名空间。

**模块**

就 TypeScript 而言，模块比命名空间更好。模块（以前称为外部模块）是一个自包含的文件，不会向您的全局范围添加任何内容。您可以根据需要将模块加载到局部变量中。模块提供了一种组织代码和按需加载部件的好方法。使用模块时，最好避免使用命名空间。模块比命名空间更好。

**程序**

程序是模块、类的集合。这本质上是您使用 TypeScript 编写的内容。

**功能/方法**

类包含方法，您也可以编写不属于某个类的独立函数。

**声明与 var**

`var`创建一个新变量。`declare`用于告诉 TypeScript 该变量已在其他地方创建。如果使用`declare`，则不会将任何内容添加到生成的 JavaScript 中 - 它只是对编译器的提示。

例如，如果您使用定义 的外部脚本`var externalModule`，您将使用`declare var externalModule`提示`externalModule`已设置的 TypeScript 编译器。

# java - Eclipse 使用运行时 exec 提供与 cmd 不同的输出

> ID：12764250
> 
> 赞同：0
> 
> 时间：2012-10-06T21:58:31.177
> 
> 标签：java, runtime, cmd, exec

所以这是我的代码：

```
System.out.print("hellow");
    try {
        int x;
        Runtime rt = Runtime.getRuntime();
        Process proc = rt.exec("java CPU/memory");
        BufferedReader in = new BufferedReader(new InputStreamReader(proc.getInputStream()));
        String line = null;
        while((line = in.readLine())!=null) {
            System.out.println(line);
        }
        proc.waitFor();
    } catch (Throwable t)
    {
        t.printStackTrace();
    }
 $ 
```

当我在 cmd 中运行 java CPU/CPU 时，我得到退出值为 0 的“hellowhello”

但是当我在 Eclipse 中运行它时，我只会得到退出值为 1 的“hello”

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T22:56:14.993

从命令字符串执行和从 Eclipse 执行时，您有不同的系统环境。

环境变量很有价值：PATH、JAVA_HOME 或 JRE_HOME 以及您当前的工作目录。

我在某些情况下使用 ProcessBuilder，当我必须确定在环境中时，它是为像你的“java CPU/内存”这样的外部进程提供的。

我认为首先你的外部进程有错误的工作目录。在 ProcessBuilder 中，您可以使用以下命令指向它：

```
ProcessBuilder pb = new ProcessBuilder("java", "CPU/MEMORY");   
pb.directory(new File("/home/myhome/myjavaprojects"));
Process p = pb.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T22:52:22.613

不要忽略 ErrorStream。如果你阅读它（在它自己的线程中），你会看到你做错了什么。

例如：

```
import java.io.*;

public class Foo001 {
   public static void main(String[] args) {
      System.out.println("hellow");
      try {
         int x;
         Runtime rt = Runtime.getRuntime();
         Process proc = rt.exec("java CPU/memory");
         final BufferedReader in = new BufferedReader(new InputStreamReader(
               proc.getInputStream()));
         final BufferedReader err = new BufferedReader(new InputStreamReader(
               proc.getErrorStream()));
         new Thread(new ReadLiner(in, "in")).start();
         new Thread(new ReadLiner(err, "err")).start();
         // proc.waitFor(); // not sure that this is needed
      } catch (Throwable t) {
         t.printStackTrace();
      }
   }
}

class ReadLiner implements Runnable {
   private BufferedReader br;
   private String text;

   public ReadLiner(BufferedReader br, String text) {
      this.br = br;
      this.text = text;
   }

   @Override
   public void run() {
      String line = null;
      try {
         while ((line = br.readLine()) != null) {
            System.out.println(text + ": " + line);
         }
      } catch (IOException e) {
         e.printStackTrace();
      }
   }

} 
```

# windows-phone-7 - 如何在 XAML 中添加动态磁贴

> ID：12764256
> 
> 赞同：0
> 
> 时间：2012-10-06T21:59:23.407
> 
> 标签：windows-phone-7, xaml, live-tile

我想在我的 WP7 应用程序的列表框中添加动态磁贴。我也想在 XAML 中创建列表，但我不确定如何以这种方式添加 LiveTile？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T22:09:21.767

没有可以代表瓷砖的库存控制。但是，有包含**Tile**控件的[Coding4Fun Toolkit 。](http://coding4fun.codeplex.com/)[这是](http://www.windowsphonegeek.com/articles/Getting-Started-with-the-Coding4Fun-toolkit-Tile-Control)有关如何使用它的指南。显然，您将不得不自己管理“实时”行为。

# c# - 绘制像素方法中不明确的不安全代码

> ID：12764259
> 
> 赞同：0
> 
> 时间：2012-10-06T21:59:46.227
> 
> 标签：c#, pointers, bitmap, unsafe, writeablebitmap

最近我要做低级图形编程工作（实现光栅图形算法）。这就是为什么我开始寻找有助于在低抽象级别（甚至使用`unsafe`代码）上绘制图元（线、矩形、椭圆等）的工具（类）。

我考虑是否应该在*WPF*、*WindowsForms*、*WinAPI*或其他环境中实现我的算法。现在我要尝试一下*WPF*。我找到了一些如何在位图上绘制像素的示例，但不幸的是，我在理解此代码时遇到了问题（[来自 MSDN 的源代码](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.aspx)）：

```
 // The DrawPixel method updates the WriteableBitmap by using 
    // unsafe code to write a pixel into the back buffer. 
    static void DrawPixel(MouseEventArgs e)
    {
        int column = (int)e.GetPosition(i).X;
        int row = (int)e.GetPosition(i).Y;

        // Reserve the back buffer for updates.
        writeableBitmap.Lock();

        unsafe
        {
            // Get a pointer to the back buffer. 
            int pBackBuffer = (int)writeableBitmap.BackBuffer;

            // Find the address of the pixel to draw.
            pBackBuffer += row * writeableBitmap.BackBufferStride;
            pBackBuffer += column * 4;//??

            // Compute the pixel's color. 
            int color_data = 255 << 16; // R
            color_data |= 128 << 8;   // G
            color_data |= 255 << 0;   // B 

            // Assign the color data to the pixel.
            *((int*)pBackBuffer) = color_data;//??
        }

        // Specify the area of the bitmap that changed.
        writeableBitmap.AddDirtyRect(new Int32Rect(column, row, 1, 1));

        // Release the back buffer and make it available for display.
        writeableBitmap.Unlock();
    } 
```

1.  这条`pBackBuffer += column * 4;`线是干什么用的？为什么`4`？
2.  这是什么`*((int*)pBackBuffer) = color_data;`意思？*我知道来自C/C++*的指针，但在*C#*中有`IntPtr`，`int*`这行`int pBackBuffer = (int)writeableBitmap.BackBuffer;`表明我们可以平等对待`int`，`IntPtr`这对我来说也不清楚。
3.  我应该使用哪种编程环境？`WinAPI`，`WPF`还是其他？

*如果有人能向我解释这个不安全的代码*，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T22:12:25.700

> 1：这是什么 pBackBuffer += column * 4; 行吗？为什么是4？

假设像素为 ARGB，则每个像素为 4 个字节。因为`column`是 X 坐标，所以必须乘以 4。

> 2：它是什么*((int* )pBackBuffer) = color_data; 意思是？

`(int*)pBackBuffer`- 将值`int pBackBuffer`视为指向 int的指针

和

`*((int*)pBackBuffer) = color_data`- 存储`color_data`到那个指针

IntPtr 和 int 并不完全相同。IntPtr 在 32 位操作系统上运行时为 32 位，在 64 位操作系统上运行时为 64 位。`int`始终为 32 位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-02T01:05:26.897

根据前面的评论，如果您希望代码同时适用于 x64 和 x86，则使用 int 而不是 IntPtr 指向 BackBuffer 是错误的。该行应为...

```
IntPtr pBackBuffer = (IntPtr)writeableBitmap.BackBuffer; 
```

因为 BackBuffer 是一个指针，它会根据你的 x64 还是 x86 改变大小。'int' 将始终是 32 位的，因此在 x64 编译时可能会导致溢出异常

# twitter-bootstrap - 使用绝对定位时如何自动减小外部容器的大小？

> ID：12764260
> 
> 赞同：0
> 
> 时间：2012-10-06T21:59:46.297
> 
> 标签：twitter-bootstrap, responsive-design, css-position, fluid-layout

我有一个 twitter bootstrap 响应式布局，我希望外部 div 的高度在内部元素减小时自动减小。我的问题是我在子元素中使用了绝对位置，这使容器看起来很空，迫使我设置最小高度。否则我不知道如何达到预期的效果。

你可以在这里看到一个例子：

[http://jsfiddle.net/dansalmo/R4hPf/3/show/](http://jsfiddle.net/dansalmo/R4hPf/3/show/)

我希望能够根据手机宽度重新调整大小，并且随着图像尺寸的减小，图像和导航栏之间的间隙不会太大。

如果您想分叉它并显示可能的修复，代码就在这里：

[http://jsfiddle.net/dansalmo/R4hPf/3/](http://jsfiddle.net/dansalmo/R4hPf/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:17:22.870

不太明白但能要这个吗？

[http://jsfiddle.net/R4hPf/5/](http://jsfiddle.net/R4hPf/5/)

或者可能是这样的：

[http://jsfiddle.net/R4hPf/6/](http://jsfiddle.net/R4hPf/6/)

我只改变了值​​​：

```
.banner{
  position: relative;
  margin-bottom: 10px;
}
.logo{
  margin-bottom:5px;
    overflow:hidden;
    clear:both;
}
.user-access {
  float: right;
  margin: 5px;
  padding: 0px;
 } 
```

# c# - C# 串行通信

> ID：12764267
> 
> 赞同：1
> 
> 时间：2012-10-06T22:00:52.813
> 
> 标签：c#, usb, serial-port, virtual-serial-port

如何使用 C# 从 USB 通信端口发送和接收数据？

通讯要求如下：

*   115.2 波特
*   8 位字符大小
*   1 个停止位
*   无平价

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-06T22:10:38.323

USB 通信端口在系统看来与板载端口相同。使用[SerialPort](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx)类。

```
 using (var sp = new System.IO.Ports.SerialPort("COM11", 115200, System.IO.Ports.Parity.None, 8, System.IO.Ports.StopBits.One))
    {
        sp.Open();

        sp.WriteLine("Hello!");

        var readData = sp.ReadLine();
        Console.WriteLine(readData);
    } 
```

[您可以通过调用SerialPort.GetPortNames](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.getportnames.aspx)找到可用的端口。如果这对您没有吸引力，您也可以将端口作为文件访问，但这要复杂得多，而且没有什么理由这样做。有关更多信息，请参阅[CreateFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)的文档。

# google-app-engine - Google 文件服务 closeFinally() 超时

> ID：12764269
> 
> 赞同：3
> 
> 时间：2012-10-06T22:01:39.253
> 
> 标签：google-app-engine, google-cloud-storage

我刚刚遇到了使用 AppEngine FileService 将数据写入 Google Cloud Storage 的问题。

我认为问题与超时有关。我创建了新的 GS 文件并使用 Tasks 将数据写入其中。每个任务都使用 close() 关闭 FileWriteChannel。但是 closeFinally() 在最后一次写入后大约 2 小时内被调用（我的 DataFlow 需要它）。所以我在 GS 中没有看到任何文件。

最后一次写入和closeFinally（）之间是否有任何超时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T23:07:33.573

调用之间没有超时`close()`，`closeFinally()`但您必须在使用`closeFinally()`开始上传后的几天内调用 来完成上传`createNewGSFile()`。

# scala - Scala 的 Stream 擦除警告

> ID：12764270
> 
> 赞同：3
> 
> 时间：2012-10-06T22:01:44.280
> 
> 标签：scala, pattern-matching, type-erasure

有人可以解释为什么这会发出擦除警告吗？

```
def optionStreamHead(x: Any) =
  x match {
    case head #:: _ => Some(head)
    case _ => None
  } 
```

给出：

```
warning: non variable type-argument A in type pattern scala.collection.immutable.Stream[A] is unchecked since it is eliminated by erasure
            case head #:: _ => Some(head) 
```

我意识到我可以写这个案例`if (x.isInstanceOf[Stream[_]]) ...`而不会收到警告，但在我的案例中，我实际上想使用模式匹配并且有一大堆我不明白的警告似乎很糟糕

这是一个同样令人费解的案例：

```
type IsStream = Stream[_]

("test": Any) match {
  case _: Stream[_] => 1 // no warning
  case _: IsStream => 2 // type erasure warning
  case _ => 3
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T22:41:45.863

两者都是 2.9 中的错误，已在 2.10 中解决。在 2.10 中，我们获得了一个新的模式匹配引擎（称为 virtpatmat 用于虚拟模式匹配器）：

```
scala> def optionStreamHead(x: Any) =
  x match {
    case head #:: _ => Some(head)
    case _ => None
  }
optionStreamHead: (x: Any)Option[Any]

scala> optionStreamHead(0 #:: Stream.empty)
res14: Option[Any] = Some(0)

scala> ("test": Any) match {
     |   case _: Stream[_] => 1 // no warning
     |   case _: IsStream => 2 // type erasure warning
     |   case _ => 3
     | }
<console>:11: warning: unreachable code
                case _: IsStream => 2 // type erasure warning
                                    ^
res0: Int = 3 
```

# python - Python 等价于 Matlab 的持久化

> ID：12764274
> 
> 赞同：5
> 
> 时间：2012-10-06T22:01:52.593
> 
> 标签：python, decorator

> **可能重复：**
> [函数中静态变量的 Python 等价物是什么？](https://stackoverflow.com/questions/279561/what-is-the-python-equivalent-of-static-variables-inside-a-function)

我尝试编写一个递归函数。它遍历一个向量并给出一个取决于当前值和先前值的值。在 Matlab 中，我可以`persistent`在函数内部声明一个变量，并在调用函数后将值存储在内存中，因此函数的下一次调用从以前的值开始。

这就是我开始的简单移动平均线：

```
def AvgFilter(x):
    if not firstRun:  # checks if runs for first time, i.e. firstRun is empty
        k = 1        # setup initial variables if run for first time
        prevAvg = 0  # prevAvg - the average calculated during last call
        firstRun = 1 # only for initialisation
    alpha = (k-1)/k  
    avg = alpha * prevAvg + (1 - alpha)*x
    prevAvg = avg
    k = k + 1    
    return avg 
```

我需要`k` `prevAvg` `firstRun`在函数调用之间记住变量。我读到它可以通过装饰器完成，我确实尝试`@counter`在函数之前实现它设置，但不确定我应该如何实现它。装饰器是唯一的方法（没有找到其他东西）？以及如何编写计数器函数来存储我的变量？我有点担心，以后有更复杂的递归我会完全迷失在装饰器的想法上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T22:13:41.830

听起来像是[发电机](https://stackoverflow.com/a/1733017/23649)的工作！生成器让你假装你只是在循环中一次计算一个值，但它实际上会暂停执行并在你调用时返回一个值`yield`。

```
def AvgFilter():
    k = 1
    avg = 0
    while True:
        alpha = (k-1)/float(k)
        x = yield avg # yield/return the old average, and get the new input value
        avg = alpha * avg + (1 - alpha)*x
        k = k + 1

f = AvgFilter()
print f.next()
print f.send(1)
print f.send(2)
print f.send(20)
print f.send(20)

# 0
# 1.0
# 1.5
# 7.66666666667
# 10.75 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T22:15:31.257

您可以执行以下操作：

*   使用对象并将这些变量存储在对象中，在函数调用之间重用相同的对象。
*   使用全局变量（强烈反对！）
*   使用生成器（参见 jtbandes 的回答）

这是一个例子：

```
class AvgFilter(object):
    def __init__(self):
        self.k = 1
        self.avg = 0

    def run(x):
        alpha = float(self.k-1) / self.k  
        self.avg = alpha * self.avg + (1 - alpha)*x
        self.k +=1
        return self.avg 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T15:50:57.177

感谢@Thomas Orozco 和@jtbandes 的回答 经过漫长的几天后，我终于让它按我想要的方式工作了。代码和一些测试是：

```
x = [10,2,30,4,50]
class avgFil2(object):
    def __init__(self):
        self.avg = 0
        self.k = 1.0
    def __call__(self, x):
        alpha = (self.k-1.0)/self.k  
        self.avg = alpha * self.avg + (1 - alpha)*x
        self.k +=1
       return self.avg

def simpleTest(x = x):     
    average = []
    avg = avgFil2()               # new variable and creation of instance (all initialisation)
    for i in range(len(x)):
        print 'input %f' % x[i] 
        print 'before change avg.avg=%f, k=%f' % (avg.avg, avg.k)   
        average.append(avg(x[i])) # class is called here, so all changes going on
        print 'after change avg.avg=%f, k=%f' % (avg.avg, avg.k)  
        print 'The output average is %f' % average[i]

simpleTest() 
```

该代码与 Matlab 确实不同，但很好。重要的陷阱是初始化`k=1.0`为`float`不`k=1`，`int`因为`alpha`除法将评估为整数时为零。另一件事，我必须初始化为'self.k'而不是'k'，否则它会给出错误。生成器可能也可以工作，但我喜欢`class`解决方案。

# meteor - 如何删除我在流星中插入的模板？

> ID：12764279
> 
> 赞同：0
> 
> 时间：2012-10-06T22:02:48.160
> 
> 标签：meteor

我遇到的问题是我使用两个名为“login”和“register”的模板插入登录栏和注册栏。我想做的是当用户登录时。应该删除注册模板。我无法找到以编程方式删除模板的好解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T23:49:27.993

车把有像 {{currentUser}} 这样的助手

```
{{#unless currentUser}}
    show signin / signup view
{{/unless}}

{{#if currentUser}}
    show if user is loggedin
{{/if}} 
```

# android - Android - 状态通知上的 EditText

> ID：12764281
> 
> 赞同：7
> 
> 时间：2012-10-06T22:03:40.617
> 
> 标签：android, button, notifications, android-edittext

有谁知道我是否可以在 Android 通知上插入 EditText（用于插入文本）？我想在按下按钮时有一个按钮和一个edittext，然后取回edittext上的文本。

这是可能的？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T22:59:58.473

这可以在 Jelly Bean 中完成，但据我所知，在此之前的版本中没有。由于这是内置在 android 系统中的，因此应该考虑并接受这种做法。

来自安卓博客：

双向文本支持：Android 4.1 通过支持 TextView 和 EditText 元素中的双向文本，帮助您接触更多用户。

[提到此功能的 Android 博客文章](http://android-developers.blogspot.com/2012/06/introducing-android-41-jelly-bean.html)

您可以在这里了解“[创建自定义通知布局](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T04:50:16.187

但是，如果您正在使用 pdf 阅读器，同时您需要使用字典，那么在文本框中输入一个单词并获得其含义而不是从一个应用程序切换到另一个应用程序是很好的。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-10-06T22:22:03.543

是好的用户界面吗？我不认为人们期望在通知上写一些东西。这会让他们感到困惑。为什么你不只是有一个按钮来打开你的应用程序并让用户输入？

# macos - 无法在 Mac OS X 10.7 中“制作”

> ID：12764288
> 
> 赞同：0
> 
> 时间：2012-10-06T22:04:36.803
> 
> 标签：macos, bash, shell, terminal, wget

嗨所以我正在尝试安装命令`wget`并`with-readline`与 Mac OS X 的终端一起使用。即使我需要为第一个指定，配置似乎对两者都适用`host= i686-apple`。

当我进入`make`安装部分时，输出如下。

**对于 wget：**

[http://i.stack.imgur.com/jQb3a.jpg](http://i.stack.imgur.com/jQb3a.jpg)

**对于带读线**

[http://i.stack.imgur.com/EqnD7.jpg](http://i.stack.imgur.com/EqnD7.jpg)

那么有人知道发生了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T22:24:28.200

经过一番调查，这就是我所得到的。

检查 readline 版本控制历史，[rl_gnu_readline_p](http://git.savannah.gnu.org/cgit/readline.git/diff/readline.h?id=2916980bde9ae4d8b8e9d60062660bdca947f56e)是在 2000 年发布[的 4.1 中添加的](http://git.savannah.gnu.org/cgit/readline.git/commit/?id=2916980bde9ae4d8b8e9d60062660bdca947f56e)。OS X 10.7*应该*有这个......但它实际上通过链接到 libedit 来伪造 libreadline，这是一些 BSD 仿真库。我猜他们是在避免在 OS X 上获得那个讨厌的 GNU 许可证。看到 rl_gnu_readline_p 是如何[成为“我真的是 readline”变量](http://www.delorie.com/gnu/docs/readline/rlman_28.html)，这是有道理的。

我建议使用 3rd 方包系统来安装 read readline，例如[MacPorts](http://www.macports.org/)、[fink](http://www.finkproject.org/)或[homebrew](http://mxcl.github.com/homebrew/)。然后以此为基础构建您的软件。

# jinja2 - Jinja2 按月/年分组

> ID：12764291
> 
> 赞同：9
> 
> 时间：2012-10-06T22:04:51.057
> 
> 标签：jinja2

我正在尝试按月/年对 Jinja 中的日期/时间列表进行分组。这是我现在拥有的代码：

```
{% for group in EventsList|groupby('date') %}
        <b>{{group.grouper}}</b><br />
        {% for event in group.list %}
            <i>{{event.title}}</i>
        {% endfor %}
    {% endfor %} 
```

但问题是它目前按特定日期分组。我想按月/年分组（即 2011 年 1 月、2011 年 2 月等）。

在 Python 中执行此操作会更有效吗？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-06T22:38:38.250

你可以先 groupby('date.year') 然后 groupby('date.month')。

```
{% for year, year_group in EventsList|groupby('date.year') %}
    {% for month, list in year_group|groupby('date.month') %}
        <b>{{ month }} {{ year }}</b><br />
        {% for event in list %}
            <i>{{event.title}}</i>
        {% endfor %}
    {% endfor %}
{% endfor %} 
```

# objective-c - 尽量减少重复代码？

> ID：12764292
> 
> 赞同：2
> 
> 时间：2012-10-06T22:04:58.100
> 
> 标签：objective-c, ios, optimization, repeat

我正在尝试像这样在Objective C中进行简单的检查：

```
if ((spriteA.tag == 4 && spriteB.tag == 10)) {
} 
```

但是，我试图在实现以下目标的同时完成**1** `if`次检查：

```
if ((spriteA.tag == 4 && spriteB.tag == 10,11,12,13,14,15,16,17)) {
} 
```

现在我知道我可以使用`||`运算符，但这会使**1** `if`检查多行代码，因此看起来难以辨认。现在有任何有组织的方式来实现我想要做的事情吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T01:52:52.723

对于类似枚举的值，`switch`语句可能很有用：

```
switch(spriteB.tag) {
case 4:
case 10:
case 12:
case 17:
case 42:
    ...
    break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T01:43:42.247

最简单的方法可能是制作一个位掩码`int spriteBtags = (1 << 10) | (1 << 11) | (1 << 12) | ...;`，然后使用`(1 << spriteB.tag) & spriteBtags`. 但请注意，这种方法将 spriteB.tag 的值限制为 int 或 long 中的位数。而且，当然，您有很长的语句要 create `spriteBtags`，但这是一次性作业。

其他语言如 Pascal 有位集，这使得这类事情更直接。

（您至少可以通过编写可变参数函数来隐藏赋值语句的复杂性`int spriteBtags = createIntBitset(10,11,12,...17,-1);`：）

# c++ - C++ 类成员的生命周期

> ID：12764294
> 
> 赞同：7
> 
> 时间：2012-10-06T22:05:17.073
> 
> 标签：c++, raii

C++ 类成员的生命周期是多少。例如，什么时候释放`std::fstream`一个对象的 ？`Foo`进入析构函数时还是离开析构函数时？这是在 C++ 标准中定义的吗？

```
struct Foo
{
    std::fstream mystream;
    ~Foo()
    {
        // wait for thread writing to mystream
    }
}; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-06T22:08:20.377

数据成员在对象的销毁过程中被销毁，在`mystream`执行*主体*之后。C++11 §12.4[class.dtor]/8 状态：`Foo`*`~Foo()`*

 *> 在执行析构函数的主体并销毁主体内分配的任何自动对象后，类`X`的析构函数调用`X`的直接非变体非静态数据成员的析构函数，调用`X`的直接基类的析构函数，如果`X`是最派生类的类型，它的析构函数调用`X`的虚拟基类的析构函数。

`mystream``Foo`是（*变体*数据成员是联合的成员；`Foo`不是联合）的非变体、非静态数据成员。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T22:13:55.123

这是构造的反面：

> 构造：基类、数据成员（`mystream`此处构造）、构造函数体
> 
> 销毁：析构函数体、数据成员（`mystream`在此处销毁）、基类*

# android - 按下后退键并在应用程序重新启动时出现登录屏幕

> ID：12764298
> 
> 赞同：0
> 
> 时间：2012-10-06T22:06:07.680
> 
> 标签：android, xamarin.android

在我的应用程序中，用户需要登录才能访问该应用程序。我的问题是当用户从主要活动中按下返回键时，用户被发送回登录屏幕。

我知道我可以覆盖 ht OnBackPressed() 但这并不能解决我的问题。如果我覆盖 OnBackPressed() 并将用户发送到主屏幕，当用户再次打开应用程序时，用户将返回登录屏幕。即使用户已经显示登录屏幕，用户在后台登录。所以为了进入主要活动，用户需要再次登录。

我试过 Finish() 但单声道机器人显示错误。

我已附上我的登录活动代码。有人可能会让我摆脱这个问题。

```
using System;

using Android.App;
using Android.Content;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using Android.OS;
using RestSharp;
using TheNorthStar.Api.Requests;
using TheNorthStar.Api.Results;
using NorthStar.Driver.Application;
using Android.Preferences;
using Object = Java.Lang.Object;

namespace NorthStar.Driver
{
    public class DriverLogonAsync : AsyncTask

    {
        private ProgressDialog processDialog;
        private Context m_context;
        private DriverLogon m_driver;

        private bool _resterror;

        public DriverLogonAsync( Context context, DriverLogon driver )
        {
            m_context = context;
            m_driver = driver;

            _resterror = false;
        }

        /*
         * throws
         * should separate out logic and use MyMessagebox..
         */
        private void SetComfirmAlertBox(string carNum, DriverLogonResult result)
        {
            var api = new ConnectToSever(Helper.GetServer(m_context));
            string resultOfCarDetail; CarDetails res;
            try
            {
                resultOfCarDetail = api.ComfirmLogginOn(m_driver);
            }
            catch
            {
                Android.Util.Log.Info("EXC_conflogon1", "confirm logging on failed");
                throw;
            }
            try
            {
                res = Newtonsoft.Json.JsonConvert.DeserializeObject<CarDetails>(resultOfCarDetail);
            }
            catch (Exception ex)
            {
                Android.Util.Log.Info("EXC_conflogon2", "deserialize confirm logging on failed\n" + ex.Message);
                throw;
            }

            if (res.carExists != true)
            {
                MyMessageBox.SetAlertBox("Opps!!!!!!!!", "This Car Number Was Wrong!!!!", "OK", m_context);
            }
            else
            {
                string carType = res.carType;
                string seatNum = res.numOfSeats.ToString();
               // MainActivity act = new MainActivity( result.driverId );
                var mact = new Intent(m_context,typeof(MainActivity) );
                mact.PutExtra( "driverID",  result.driverId.ToString() );
                MyMessageBox.SetAlertBox("Comfirm!", "Your car is a: " + carType + " with " + seatNum + " seats??", "Yes", "No", mact,m_context);

            }
        }

        /*private void ChangeDriverStatues()
        {

        }*/

        protected override void OnPreExecute()
        {
            base.OnPreExecute();
            processDialog = ProgressDialog.Show( m_context, "Driver Loging On...", "Please Wait...", true, true);
        }

        protected override Object DoInBackground(params Object[] @params)
        {
            var api = new ConnectToSever(Helper.GetServer(m_context));

            string res = string.Empty;
            try
            {
                res = api.DriverLogingOn(m_driver);
            }
            catch
            {
                _resterror = true;
                Android.Util.Log.Info("EXC_dlogon1", "driver logon failed");
                return -1;
            }
            return res;
        }

        protected override void OnPostExecute(Object result)
        {
            base.OnPostExecute(result);
            //hide and kill the progress dialog
            processDialog.Hide();
            processDialog.Cancel();

            if (_resterror == true)
            {
                Android.Util.Log.Info("EXC_dlogon2", "logon connection has failed, noop");
                return;
            }

            DriverLogonResult resDriverDetail;
            try
            {
                resDriverDetail = Newtonsoft.Json.JsonConvert.DeserializeObject<DriverLogonResult>(result.ToString());
            }
            catch (Exception ex)
            {
                Android.Util.Log.Info("EXC_dlogon3", "logon deser has failed, noop\n" + ex.Message);
                return;
            }

            if (resDriverDetail.logonSuccess)
            {
                this.SetComfirmAlertBox( m_driver.carNum, resDriverDetail );  
            }
            else
            {
                MyMessageBox.SetAlertBox("Wrong!", "Wrong username or password!!!", "OK!",m_context);
            }
        }
    }

    [Activity(Label = "MyDriver-Driver", MainLauncher = true, Icon = "@drawable/icon")]
    public class Activity1 : Activity
    {
        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);
            // Set our view from the "main" layout resource
            SetContentView(Resource.Layout.Main);

            Android.Util.Log.Info("EXC_logstart", "**************** starting driver module ****************");

            // Get our button from the layout resource,
            // and attach an event to it
            EditText eTextUsername = FindViewById<EditText>(Resource.Id.UserNameBox);
            EditText eTextPassword = FindViewById<EditText>(Resource.Id.PasswordBox);
            EditText eTextCarNum = FindViewById<EditText>(Resource.Id.CarNumBox);
            Button viewPrefsBtn = FindViewById<Button>(Resource.Id.BtnViewPrefs);
            Button button = FindViewById<Button>(Resource.Id.MyButton);

            button.Click += delegate 
            {
                if (eTextCarNum.Text != "" && eTextPassword.Text != "" && eTextUsername.Text != "")
                {
                    DriverLogon driver = new DriverLogon();
                    driver.userName = eTextUsername.Text;
                    driver.password = eTextPassword.Text;
                    driver.carNum = eTextCarNum.Text;
                    DriverLogonAsync asyDriver = new DriverLogonAsync(this, driver);
                    asyDriver.Execute();
                }
            };

            viewPrefsBtn.Click += (sender, e) =>
            {
                StartActivity(typeof(PreferencesActivity));
            };
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:20:30.300

您的登录活动可能是您的第一个活动。不要那样做，让你的主要活动检查用户是否已经输入了登录凭据，如果没有 - 从中​​触发登录活动。

这样，当您完成登录并返回主要活动时，返回将带您回到主屏幕。当您运行应用程序时，您将获得主要活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T22:34:00.080

登录屏幕：如果用户已登录（例如：您可以使用 SharedPreferences 来保存状态）然后移动到主要活动，然后在登录屏幕上调用 finish() 以完成该活动。它应该工作。

正如你所说，它在完成（）时崩溃。您应该查看错误日志为什么它在调用完成时崩溃并修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T22:21:04.073

您是否考虑过简单地通过 保存登录信息`SharedPreferences`，并且登录信息的检查已经存在于登录活动的共享首选项中？如果数据已经存在，您可以简单地将用户推送到主页。

# c# - DataTemplate 在悬停时显示 TextBlock？

> ID：12764299
> 
> 赞同：0
> 
> 时间：2012-10-06T22:06:09.130
> 
> 标签：c#, xaml, windows-runtime, datatemplate

我正在尝试制作一个 WinRT 应用程序。

我设法制作了一个带有绑定和自定义 ItemTemplate 的 ListView。

ItemTemplate 是指具有 3 个文本框的 DataTemplate。

我想要做的是只显示两个名为“标题”和“副标题”的标准，并在悬停显示“描述”而不是“标题”和“副标题”。这是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:59:51.487

您应该使您的 DataTemplate 成为 UserControl 或模板化控件，以便您可以处理指针事件。然后，您可以根据指针是否在控件上来更改控件的视觉状态。请注意，您不能使用触摸输入悬停，因此您需要替代触摸。

# c++ - 未调用 MFC 的 CWinThread::PostThreadMessage 处理程序

> ID：12764300
> 
> 赞同：1
> 
> 时间：2012-10-06T22:06:27.180
> 
> 标签：c++, windows, mfc

我正在研究一些使用 MFC 的 UI 线程来实现管理器线程工作线程机制的遗留代码。以前在 MFC GUI 应用程序下运行的代码，但现在它在一个单独的 dll 中，并且可以从 GUI 应用程序和控制台应用程序运行。

管理线程、工作线程和主应用程序通过线程消息进行通信（工作线程实际上并不需要向管理线程发送消息，但这是它最初实现和工作的方式，所以你去）。

现在，当我从控制台应用程序运行代码时，会处理从主线程发送到管理器线程的消息并调用我的处理程序。只有当我尝试从管理线程向工作线程发送消息时，我才会遇到问题。调用`PostThreadMessage`成功，但从未调用处理程序。这种行为在一个普通的控制台应用程序和一个 Win32 控制台应用程序（包括一个带有所有 MFC 好东西的预编译头文件）中都重现了。

我找到了这篇旧的 Microsoft 文章： http: [//support.microsoft.com/kb/142415](http://support.microsoft.com/kb/142415)但我不得不承认我并没有真正理解它。我尝试按照它的建议覆盖该`PreTranslateMessage`函数并在那里显式处理我的自定义消息，但调用后从未调用该函数`PostThreadMessage`

我试图在下面的示例中重现该问题，在我的示例中，甚至从未处理到管理器线程的消息，这证实了我对我做错了什么的怀疑。

编辑：我添加了我的示例代码中缺少的缺失`InitInstance`和`ExitInstance`重载`ManagerThread`，正如 MarsRover 所建议的那样，`ManagerThread`现在确实发送了消息，但`WorkerThread`没有发送消息，这准确地重现了我在原始代码中遇到的问题。示例代码：

```
//Common.h

//update the progress message
#define WM_START_RUN (WM_USER + 1)

//update the progress message
#define WM_JOB_DONE (WM_USER + 2)

//run thread has finished
#define WM_RUN    (WM_USER + 3)

// ManagerThread.h
class ManagerThread : public CWinThread
{
    DECLARE_DYNCREATE(ManagerThread)
protected:
    ManagerThread(){}           // protected constructor used by dynamic creation
    virtual ~ManagerThread();
    BOOL InitInstance();
    int ExitInstance();
    std::vector<WorkerThread*> m_WorkerThreads;
    int numOfJobs;
    DECLARE_MESSAGE_MAP()
    afx_msg void OnStartRun(WPARAM wParam, LPARAM lParam);
    afx_msg void OnJobDone(WPARAM wParam, LPARAM lParam);
    afx_msg void OnQuit(WPARAM wParam, LPARAM lParam);
};

//WorkerThread.h
class WorkerThread : public CWinThread
{
    DECLARE_DYNCREATE(WorkerThread)

protected:
    WorkerThread(){}        // protected constructor used by dynamic creation
    virtual ~WorkerThread(){}
    virtual BOOL InitInstance();
    virtual int ExitInstance();

public:
    void SetManager(CWinThread* pManager) {m_Manager = pManager;}
    void SetID(int _id) {id = _id;}
protected:
    int id;
    CWinThread* m_Manager;
    DECLARE_MESSAGE_MAP()
    afx_msg void OnRun(WPARAM wParam, LPARAM lParam);
    afx_msg void OnQuit(WPARAM wParam, LPARAM lParam);
};

// ManagerThread.cpp

IMPLEMENT_DYNCREATE(ManagerThread, CWinThread)

ManagerThread::~ManagerThread() {
    while(!m_WorkerThreads.empty()) {
        std::vector<WorkerThread*>::iterator it = m_WorkerThreads.begin();
        (*it)->PostThreadMessage(WM_QUIT, 0, 0);
        m_WorkerThreads.erase(it);
    }
}

BOOL CFilterManagerThread::InitInstance()
{
    return CWinThread::InitInstance();
}

int CFilterManagerThread::ExitInstance()
{
    return CWinThread::ExitInstance();
}

BEGIN_MESSAGE_MAP(ManagerThread, CWinThread)
    ON_THREAD_MESSAGE(WM_START_RUN, OnStartRun)
    ON_THREAD_MESSAGE(WM_JOB_DONE, OnJobDone)
    ON_THREAD_MESSAGE(WM_QUIT, OnQuit)
END_MESSAGE_MAP()

void ManagerThread::OnJobDone( WPARAM wParam, LPARAM lParam) {
    numOfJobs--;
    if (!numOfJobs) {
        OnQuit(0,0);
    }
}

void ManagerThread::OnStartRun(WPARAM wParam, LPARAM lParam) {
    numOfJobs = (int) wParam;
    for (int i = 0; i < numOfJobs; i++) {
        WorkerThread *newThread = (WorkerThread*)AfxBeginThread(RUNTIME_CLASS(WorkerThread), THREAD_PRIORITY_LOWEST, 0, CREATE_SUSPENDED);
        newThread->SetID(i);
        newThread->SetManager(this);
        m_WorkerThreads.push_back(newThread);
        newThread->ResumeThread();
        Sleep(1000); //sleep 1 second before sending message to allow the thread to strat running
        newThread->PostThreadMessage(WM_RUN, 0, 0);
    }
}

void ManagerThread::OnQuit(WPARAM wParam, LPARAM lParam) {
    AfxEndThread(0);
}

// WorkerThread.cpp

IMPLEMENT_DYNCREATE(WorkerThread, CWinThread)

BOOL WorkerThread::InitInstance() {
    // TODO:  perform and per-thread initialization here
    CoInitializeEx(NULL, COINIT_APARTMENTTHREADED);
    return TRUE;
}

int WorkerThread::ExitInstance() {
    // TODO:  perform any per-thread cleanup here

    //uninitialize the COM library
    CoUninitialize();
    return CWinThread::ExitInstance();
}

BEGIN_MESSAGE_MAP(WorkerThread, CWinThread)
    ON_THREAD_MESSAGE(WM_RUN, OnRun)
    ON_THREAD_MESSAGE(WM_QUIT, OnQuit)
END_MESSAGE_MAP()

void WorkerThread::OnRun(WPARAM wParam, LPARAM lParam) {
    cout << id <<endl;
    m_Manager->PostThreadMessage(WM_JOB_DONE, id, 0);
}
void WorkerThread::OnQuit(WPARAM wParam, LPARAM lParam) {
    AfxEndThread(0);
} 
```

并在`main`：

```
 ManagerThread *manager = (ManagerThread*)AfxBeginThread(RUNTIME_CLASS(ManagerThread), THREAD_PRIORITY_NORMAL, 0, CREATE_SUSPENDED);
        manager->ResumeThread();

        Sleep(1000); //sleep 1 second before sending message to allow the thread to start running

        manager->PostThreadMessage(WM_START_RUN, 10, 0);
        while(true){} 
```

这是一个粗略的样本。当然，在我的原始代码中，我使用了更好的机制来确保同步`Sleep`并`while(true)`避免程序在管理器线程结束之前结束。但它重现了我遇到的问题，所以我没有看到增加任何复杂性的意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:31:18.990

弄清楚问题出在哪里。`CoInitializeEx`问题是对in的调用`WorkerThread::initInstance`。显然，该调用长时间阻塞了线程的初始化，甚至超过了示例代码中的 Sleep(1000)。所以我在创建消息队列之前发布了消息。因此，请按照[MSDN](http://msdn.microsoft.com/en-us/library/ms644946%28v=vs.85%29.aspx)的说明进行操作：

> 消息发布到的线程必须已经创建了消息队列，否则对 PostThreadMessage 的调用将失败。使用以下方法来处理这种情况。
> 
> 创建一个事件对象，然后创建线程。
> 
> 在调用 PostThreadMessage 之前，使用 WaitForSingleObject 函数等待事件设置为信号状态。
> 
> 在将要发布消息的线程中，调用此处所示的 PeekMessage 以强制系统创建消息队列。
> 
> PeekMessage(&msg, NULL, WM_USER, WM_USER, PM_NOREMOVE)
> 
> 设置事件，以指示线程已准备好接收发布的消息。

从[上一个问题](https://stackoverflow.com/questions/6446877/wait-for-afxbeginthread-cwinthread-message-pump-to-be-active)`CEvent`中，我为每个线程类创建了一个成员并将其更改`InitInstance`为：

```
BOOL CFilterWorkerThread::InitInstance()
{
    BOOL worked=CWinThread::InitInstance();
    CoInitializeEx(NULL, COINIT_APARTMENTTHREADED);
    MSG msg;
    PeekMessage(&msg, NULL, WM_USER, WM_USER, PM_NOREMOVE);
    m_ControllerThreadReady.SetEvent();
    return TRUE;
} 
```

为了在我将偶数设置为true之前强制初始化消息队列。然后在`ManagerThread`我`WaitForSingleObject`发布任何消息之前打电话给`WorkerThread`.

# ubuntu - 远程连接时如何让 Cloud9 退出只读模式？

> ID：12764303
> 
> 赞同：2
> 
> 时间：2012-10-06T22:07:31.610
> 
> 标签：ubuntu, cloud9-ide

我在 NodeJS 0.8.11 上运行的 Ubuntu 12.04 上安装了 Cloud9 IDE。如果我在本地运行它（即 localhost:3131），它工作得很好。

但是，如果我尝试从我自己网络上的远程计算机打开它，它只会以只读模式打开。我可以打开所有文件，移动光标，但不能键入或创建新文件。

我知道这是某种权限问题，但我不知道如何解决它。我尝试以 root、我自己的用户帐户和 apache 的用户帐户 (www-data) 身份启动 cloud9。他们中的任何一个都没有运气。

我设置了一个 Apache 反向代理来访问 cloud9 实例。VirtualHost 条目如下所示：

```
<VirtualHost *:80>
    ServerName c9.mk802 
    ProxyPreserveHost On
    ProxyPass / http://localhost:3131/
    ProxyPassReverse / http://localhost:3131/
</VirtualHost> 
```

我不确定这是 Apache 问题、cloud9 问题还是 Ubuntu 问题。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-26T23:32:35.957

默认文件逻辑`configs/default.js`如下：

```
var host = argv.l || process.env.IP || "localhost"; 
```

因此，您可以完成上述相同的答案，而无需使用`-l`开关修改默认配置，如下所示：

```
cloud9 $> node server.js -l 0.0.0.0 
```

这会导致 cloud9 启动，但会监听所有流量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:40:40.943

找到了解决方案。打开 cloud9/configs/default.js 并将“localhost”的所有实例更改为“0.0.0.0”。这将允许 Apache 连接到反向代理中指定的任何域名。

这可能不是很安全，因此请确保 cloud9 服务器没有暴露在您的网络之外。

# javascript - Meteor - 使用 Meteor.call 的返回值时出现问题

> ID：12764307
> 
> 赞同：2
> 
> 时间：2012-10-06T22:08:13.987
> 
> 标签：javascript, meteor

我可能在这里展示了我对 javascript 的无知，但为什么这不起作用？我怎样才能重写这段代码以使其工作？

```
// On the client
Template.tabs.title = function () {
  var msg;
  Meteor.call('getMessage', this.msg_id, function (error, result) {
    console.log(result); // Prints out a perfectly fine message object
    msg = result;
  });
  if (msg)
    return msg.title;
  else
    return "(empty)"; // This is always the value that's shown on the page
}; 
```

我对这个问题的理解是“if”语句在回调可以设置 msg 变量之前执行。那正确吗？还是范围界定问题？我什至可以这样做，从模板中调用“调用”吗？

我在这里使用方法的原因是 Messages 集合可能很大，我无法在客户端上整体订阅它。我订阅了其中的一部分，但我还需要查找任意消息，无论我的订阅有什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T01:47:34.050

当您检查时，您还没有设置回调是正确的`msg`。我想最好的办法就是`Session`在回调返回时设置一个 var 并在发生这种情况时依靠 Meteor 的反应来重绘您的消息。就像是：

```
Template.tabs.title = function () {
  var title = Session.get('currentTitle');

  if (title) {
    return 'title';
  else {
    Meteor.call('getMessage', this.msg_id, function (error, msg) {
      Session.set('currentTitle', msg ? msg.title : "(empty)");
    });
  }
}; 
```

另一方面，我可能会说使用单个消息订阅来获取“当前消息”会更有意义并且更惯用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T22:11:03.587

为“call”方法传递的第三个参数是异步回调，当您尝试返回“msg”变量时，它尚未定义。

使用另一个回调，如下所示：

```
Template.tabs.retrieveTitle(callback){
  Meteor.call('getMessage', this.msg_id, function (error, result) {
   callback( (result) ? result.title : "(empty)" );
  });
} 
```

您可以通过这种方式使用上述方法：

```
Template.tabs.retrieveTitle(function(){
//do what you want to
}); 
```

# winapi - GDI 不渲染，我做错了什么？

> ID：12764312
> 
> 赞同：0
> 
> 时间：2012-10-06T22:08:43.193
> 
> 标签：winapi, visual-c++, gdi

我正在尝试使用 GDI 制作一个基本的图形框架来制作一些迷你游戏。但是GDI根本没有渲染任何东西，我只是得到一个黑色的客户区，我不知道我做错了什么。

以下代码位于不断运行的游戏循环中：

```
//render double buffered with GDI
            HDC frontBuffer = GetDC(m_hMainWnd);

            HDC backBuffer;
            HBITMAP bitmap;
            HBITMAP oldBitmap;

            backBuffer = CreateCompatibleDC(frontBuffer);
            bitmap = CreateCompatibleBitmap(frontBuffer, m_ClientWidth, m_ClientHeight);
            oldBitmap = (HBITMAP)SelectObject(backBuffer, bitmap);

            GDI->StartDrawing(backBuffer, m_ClientWidth, m_ClientHeight); //this basically selects pens and brushes etc
            Render(dRenderTime); //here I render some stuff
            GDI->StopDrawing(backBuffer); //selects old pens and brushes back

         //blit backbuffer to frontbuffer
            BitBlt(frontBuffer, 0, 0, m_ClientWidth, m_ClientHeight, backBuffer, 0, 0, SRCCOPY);

            SelectObject(backBuffer, oldBitmap);
            DeleteObject(bitmap);
            DeleteDC(backBuffer);

            ReleaseDC(m_hMainWnd, frontBuffer);
        } 
```

我在这里做错了什么？对不起，如果这是一些愚蠢的错误，我对 Windows 编程一点也不擅长。

编辑：附加代码，根据要求：

```
gdi.h

    #pragma once

#include <Windows.h>
#include "Macros.h"
#include "Transform.h"
#include "Text.h"

#define GDI gdi::getInstance()

class gdi
{
private:
  HPEN m_OldPen;
  HPEN m_Pen;
  HBRUSH m_OldBrush;
  HBRUSH m_Brush;
  HDC m_hdc;

  int m_DcWidth;
  int m_DcHeight;

  COLORREF m_Color;
  int m_LineWidth;

  DBlib::float3x3 m_Transform;

  gdi();

  void Transform(int& x_out, int& y_out, const DBlib::float2& p) const;
  void Transform_NDC_To_WC(int& x_out, int& y_out, const DBlib::float2& p) const;
  void Transfrom_WC_To_NDC(DBlib::float2& p_out, int x, int y) const;

public:
  ~gdi();

  static gdi* getInstance();

  void StartDrawing(HDC hdc, int dcwidth, int dcheight);
  void StopDrawing(HDC hdc);

  void SetColor(const DBlib::float3& col);
  void SetLineWidth(int width);

  void SetTransform(const DBlib::float3x3& transform);

  void DrawText(const DBlib::float2& p1, const std::tstring& s);
  void DrawLine(const DBlib::float2& p1, const DBlib::float2& p2);
  void DrawPolygon(const DBlib::float2* p, int size);
  void FillPolygon(const DBlib::float2* p, int size);
}; 
```

GDI.cpp

```
#include "gdi.h"

gdi* gdi::getInstance()
{
  static gdi instance;
  return &instance;
}

gdi::gdi()
{
  m_hdc = NULL;
  m_OldPen = NULL;
  m_OldBrush = NULL;
  m_LineWidth = 1;
  m_Color = RGB(0,0,0);
  m_DcWidth = -1;
  m_DcHeight = -1;
  m_Transform.set_identity();

  m_Pen = CreatePen(PS_SOLID,1,RGB(0,0,0));
  m_Brush = CreateSolidBrush(RGB(255,255,255));
}

gdi::~gdi()
{
    if(m_Pen) DeleteObject(m_Pen);
    if(m_Brush) DeleteObject(m_Brush);
}

void gdi::StartDrawing(HDC hdc, int dcwidth, int dcheight)
{
  m_hdc = hdc;
  m_DcWidth = dcwidth;
  m_DcHeight = dcheight;
  m_OldPen = (HPEN)SelectObject(hdc, m_Pen);
  m_OldBrush = (HBRUSH)SelectObject(hdc, m_Brush);
}

void gdi::StopDrawing(HDC hdc)
{
  SelectObject(hdc, m_OldPen);
  SelectObject(hdc, m_OldBrush);

  m_hdc = NULL;
  m_DcWidth = -1;
  m_DcHeight = -1;
  m_OldPen = NULL;
  m_OldBrush = NULL;
}

void gdi::SetColor(const DBlib::float3& col)
{
    int r = static_cast<int>(DBlib::clamp(col.x*255.0f, 0.0f, 255.0f));
    int g = static_cast<int>(DBlib::clamp(col.y*255.0f, 0.0f, 255.0f));
    int b = static_cast<int>(DBlib::clamp(col.z*255.0f, 0.0f, 255.0f));
    m_Color = RGB(r,g,b);

    SetTextColor(m_hdc, m_Color);

    if(m_Pen) DeleteObject(m_Pen);
    if(m_Brush) DeleteObject(m_Brush);
    m_Pen= CreatePen(PS_SOLID, m_LineWidth, m_Color);
    m_Brush= CreateSolidBrush(m_Color);
}

void gdi::SetLineWidth(int width)
{
    m_LineWidth = width;

    if(m_Pen) DeleteObject(m_Pen);
    m_Pen= CreatePen(PS_SOLID, m_LineWidth, m_Color);
}

void gdi::SetTransform(const DBlib::float3x3& transform)
{
    m_Transform = transform;
}

void gdi::Transform_NDC_To_WC(int& x_out, int& y_out, const DBlib::float2& p) const
{
    x_out = static_cast<int>((p.x+1.0f)*(static_cast<float>(m_DcWidth)/2.0f));
    y_out = m_DcHeight - static_cast<int>((p.y+1.0f)*(static_cast<float>(m_DcHeight)/2.0f));
}

void gdi::Transfrom_WC_To_NDC(DBlib::float2& p_out, int x, int y) const
{
    p_out.x = static_cast<float>(x)*2.0f/static_cast<float>(m_DcWidth) - 1.0f;
    p_out.y = -(static_cast<float>(y)*2.0f/static_cast<float>(m_DcHeight) - 1.0f);
}

void gdi::Transform(int& x_out, int& y_out, const DBlib::float2& p) const
{
    Transform_NDC_To_WC(x_out, y_out, p*m_Transform);
}

void gdi::DrawText(const DBlib::float2& pos, const std::tstring& s)
{
    int x,y;
    Transform(x,y,pos);
    TextOut(m_hdc, x, y, s.c_str(), (int)s.size());
}

void gdi::DrawLine(const DBlib::float2& p1, const DBlib::float2& p2)
{
    int x1,y1,x2,y2;
    Transform(x1,y1,p1);
    Transform(x2,y2,p2);

    MoveToEx(m_hdc, x1, y1, NULL);
    LineTo(m_hdc, x2, y2);
}

void gdi::DrawPolygon(const DBlib::float2* p, int size)
{
    int* x = new int[size];
    int* y = new int[size];

    for(int i=0; i<size; ++i) {
        Transform(x[i],y[i],*(p+i));
    }
    for(int i=0; i<size; ++i) {
        MoveToEx(m_hdc, x[i], y[i], NULL);
        LineTo(m_hdc, x[(i+1)%size], y[(i+1)%size]);
    }

    delete[] x;
    delete[] y;
}

void gdi::FillPolygon(const DBlib::float2* p, int size)
{
    int* x = new int[size];
    int* y = new int[size];
    POINT* pts = new POINT[size];

    for(int i=0; i<size; ++i) {
        Transform(x[i],y[i],*(p+i));
        pts[i].x = static_cast<LONG>(x[i]);
        pts[i].y = static_cast<LONG>(y[i]);
    }

    Polygon(m_hdc, pts, size);

    delete[] x;
    delete[] y;
    delete[] pts;
} 
```

App.cpp - 渲染方法定义

```
void App::Render(float dTime)
{
    GDI->SetColor(DBlib::float3(1.0f,1.0f,1.0f));
    GDI->SetLineWidth(50);
    GDI->DrawLine(DBlib::float2(-1.0f,-1.0f), DBlib::float2(1.0f,1.0f));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:57:33.340

这就是我以前进行 GDI 渲染的方式（从 VB6 翻译的旧生产代码）。`WM_PAINT`这是在您（在您的游戏循环中）或 Windows 使您的部分窗口无效时发送的响应。

```
PAINTSTRUCT stPaintStruct;
HDC hPaintDC = BeginPaint(hWnd, &stPaintStruct);

if (hPaintDC != HANDLE_NULL)
{
    // establish clipping rect using stPaintStruct.rcPaint

    if (!m_bRendering)
    {
        m_bRendering = TRUE;

        // Render() knows the output bitmap and all the content to render
        // and makes sure resources are allocated / discarded during
        // rendering.
        Render ();

        m_bRendering = FALSE;
    }

    EndPaint (hWnd, &stPaintStruct);
    return (TRUE);
} 
```

`WM_PAINT`您通过使用[InvalidateRect](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145002%28v=vs.85%29.aspx)使窗口无效来触发 a ：

```
InvalidateRect ( hWnd, NULL, FALSE ); 
```

这是一篇关于客户端绘图的[MSDN 文章。](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162487%28v=vs.85%29.aspx)其中一些慢慢地回到我身边，谢谢你的提问。:) 我已经很多年没有做过 GDI 了。

# python - 删除 matplotlib 图中的灰色背景边框

> ID：12764321
> 
> 赞同：3
> 
> 时间：2012-10-06T22:09:46.940
> 
> 标签：python, matplotlib

我只想在 matplotlib 图中显示绘图图形（或 imshow）。我可以用 pylab.axis('off') 删除轴，但图中仍然有一些灰色边框![在此处输入图像描述](../Images/dcdfc3ed049c4428ae07bbecd85bef4b.png)

我举个例子。我想全部删除，只保留 imshow 域（并保持缩放可用）。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:10:57.657

在您的情况下，您可能想要重塑图形窗口以适应内容的形状。对于方形窗口，您可以使用：

```
fig = figure(figsize=(6, 6))  # width and height in inches
fig.tight_layout(pad=0.5)     # distance betweeen the axis and the figure edge 
```

如果需要，请确保为轴标签保留一些空间。如果您只想更改背景颜色，@JoeKington 的评论就是答案。

[http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.tight_layout](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.tight_layout)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-21T14:44:27.543

试试 margins() 函数（也是一个轴方法）： http: [//matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.margins](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.margins)

# templates - Grails：同一页面，但使用 webflow 更改 _theTemplate

> ID：12764322
> 
> 赞同：0
> 
> 时间：2012-10-06T22:10:15.923
> 
> 标签：templates, grails

我对 Web 开发相当陌生，对 Grails 很陌生，希望能得到一些帮助。我想知道是否有可能有一个 Grails webflow 在状态更改时实际上不会更改页面，而是更改页面内的模板。这可能吗？如果是这样，你能帮我看一个教程吗，或者给我一些建议和非常基本的代码示例来说明如何完成它？即使只是将我指向其他地方的教程（我找不到）也会有很大的帮助。

非常感谢，我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:36:16.177

要仅更新页面模板，您必须使用 AJAX。[grails 文档](http://grails.org/doc/latest/guide/theWebLayer.html#ajax)有支持它的标签的基本示例。

我认为这对于快速简便的方法`<g:remoteLink>`来说`<g:formRemote>`会很好。

请记住，在服务器端（控制器），您使用[render 方法](http://grails.org/doc/latest/ref/Controllers/render.html)来更新模板。

根据您需要做什么，我想我可以更新答案以提供一个粗略的示例

# android - 为什么 Eclipse ADT 不能在 Windows 上识别我的 android 设备？

> ID：12764323
> 
> 赞同：4
> 
> 时间：2012-10-06T22:10:18.897
> 
> 标签：android, usb, ddms

我已经安装 ADT 很长一段时间了。我知道我过去曾在我的设备 (Moto Droid4) 上运行过一些应用程序，但今天 ADT 似乎并没有承认我已经连接了它。

我已经打开了“USB调试”复选框。它连接到笔记本电脑上的 USB 端口。当我第一次连接它时，笔记本电脑弹出了几个对话框，问我想用这个做什么，我都忽略了。

我尝试重新启动 Eclipse，但它仍然没有在 DDMS 透视图的“设备”列表中列出该设备。

我尝试按照[http://developer.android.com/tools/extras/oem-usb.html#Win7](http://developer.android.com/tools/extras/oem-usb.html#Win7)上的说明查看我的 USB 驱动程序是否存在问题，但它没有在设备列表中显示我的设备.

这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-13T19:44:19.273

您需要安装正确的设备驱动程序。只有这样您的 Eclipse 才能检测到您的设备以在其上启动您的应用程序。

**如何安装驱动程序以及如何确定它已安装？**

1.  转到计算机（右键单击）-> 管理-> 设备管理器。
2.  如果您的设备被归类为“其他设备”或“便携式设备”，则有问题。双击设备管理器中列出的设备。在里面检查您的驱动程序详细信息。
3.  如果未显示驱动程序详细信息或按钮不可单击，则未安装驱动程序。如果是你需要更新它。
4.  Windows 应该会自动为您执行此操作。如果没有，您可以在搜索设备驱动程序时单击该图标，然后选择“自动安装最合适的驱动程序”。
5.  第 3 点中提到的任何一种情况，最终结果都应该是安装驱动程序后（如果您的设备驱动程序不可用，请注意任何合适的驱动程序）。您的设备应列在“Android USB 设备”类别下
6.  现在您可以确定 ADT 会检测到您的设备。

PS：我提到了任何合适的驱动程序，因为在我的情况下，我有 Micromax A69(ICS) 并且它安装了 HTC 驱动程序。在此 Android ADT 开始检测我的设备之后。我使用的是 Windows 7。附上屏幕截图仅供参考 -

![在此处输入图像描述](../Images/54c8f059b897debe373e42d31200a1b7.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T22:40:00.570

这需要首先进行一些故障排除，我认为：

*   你试过重启手机和电脑吗？
*   您在手机上启用了调试，但连接时是否显示调试通知？
*   设备是否在设备管理器 ( `devmgmt.msc`) 下枚举？
*   从`cmd`，你看到它有一个`adb kill-server`and`adb devices`吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T23:53:06.377

尝试将 USB 设置更改为“仅充电”。

插入时，“大容量存储”设置会控制 SD 卡远离手机。

虽然我应该注意到，即使我的手机设置为“大容量存储”，它也会显示出来......我只是无法通过 Eclipse 运行应用程序。当然，也许其他手机不一样，所以我觉得值得一试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-04T07:17:52.337

这对我有用 - 查看有关卸载 EasyTether 扩展的部分。[adb 找不到我的设备/手机 (MacOS X)](https://stackoverflow.com/questions/7135999/adb-not-finding-my-device-phone-macos-x) 我能够将我的三星 Galaxy Note 2 连接到 macbook pro Snow leopard。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T22:58:49.813

我已经多次遇到这个问题。我每次的解决方案都是使用 USBDeview 卸载设备。以管理员身份运行应用程序，然后按名称排序。找到您手机对应的设备，然后通过右键菜单卸载这些设备。

重新插入手机，并告诉驱动程序搜索跳过从 Windows 更新获取。您应该很快就能启动并运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-07T02:35:08.040

好的……我终于成功了……这是我的步骤……

1.  使用USBDeview卸载驱动
2.  拔下 USB 数据线
3.  安装 KIES（从三星网站下载） [http://www.samsung.com/uk/support/model/GT-N7105RWDCOV-downloads](http://www.samsung.com/uk/support/model/GT-N7105RWDCOV-downloads)
4.  插入 USB 数据线并跳过从 Windows 更新获取驱动程序
5.  它将继续安装
6.  安装完成后打开eclipse
7.  你去吧

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-06T08:45:27.240

我的 LG Optimus L3 手机连接到 Win7/8 机器时出现了这个错误错误！

**问题：** Eclipse ADT 无法识别我的 Android 设备，为什么？

**原因：**当我修复它时，设备驱动程序似乎丢失了！

**怎么修：**

1.  通过网络搜索（使用 Google）“ **LG < Your_Phone_Model Number > Drivers Download** ”。（例如：- 转到设置列表中的关于手机**>**型号，对我来说是 LG-E400f）
2.  大多数情况下，前几个链接与所需的设备驱动程序下载页面有关。（例如：- 对我来说，我得到了以下[链接](http://www.lg.com/au/support-mobile/lg-Optimus-L3-E400F)，对于每个设备驱动程序，LG 或大多数其他供应商/制造商都有这种手册和驱动程序页面) 访问提及软件更新和驱动程序下载的页面。
3.  向下滚动到“**手册和软件更新**”部分，对我来说只执行**第 1 步**就足够了，即“安装**USB 驱动**程序”
4.  下载它（对于 Mac 或 Windows）**>**安装它**>**检查您的 Eclipse ADT **>**现在它应该在“设备”选项卡下可见

干杯！！！
希望这有助于其他人清楚地找到解决方案！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-29T16:38:40.763

我想这可能会对某人有所帮助。我为我的 moto x 做了以下操作。

1.  安装了摩托罗拉设备管理器，它安装了系统中的所有设备驱动程序。
2.  现在该设备已被识别，但被检测为存储设备。
3.  现在，在我的情况下，转到设备管理器，设备被列为便携式设备。
4.  右键单击设备，更新驱动程序软件。
5.  请选择浏览我的电脑以获取驱动程序软件。
6.  请选择让我从计算机上的设备驱动程序列表中选择一个列表
7.  将显示两个选项，一个是 MTP USB 设备，另一个是复合设备。
8.  安装两者。就是这样，现在您可以在设备管理器中看到您的设备在 Android 设备下运行良好。
9.  现在杀死 Adb 进程，确保 adb 进程没有运行，如果运行也关闭 eclipse。
10.  在命令提示符下发出 adb kill-server 和 adb start-server 命令。
11.  然后在给 adb start-server 一个提示后，你的设备会提示授权它。
12.  选择是后，您的设备已被识别，您可以在 adb devices 命令中检查它，因为您的设备将被设置为设备。
13.  现在启动 eclipse，你可以看到你的设备和模拟器。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-03-21T02:26:57.153

这个问题也可能是由于 USB-microusb 电缆故障（这就是发生在我身上的事情）而发生的。我猜想这是电缆的故障（而不是驱动程序），当我连接电缆时什至没有安装 SD 卡存储（但令人惊讶的是电缆在能源方面仍然正常运行，因为它是由电池加载的正确，并且 LED 相应地点亮）。

# c++ - 不调用 C++ 中重载的“==”运算符？

> ID：12764329
> 
> 赞同：4
> 
> 时间：2012-10-06T22:11:32.250
> 
> 标签：c++, operator-overloading

我有一个任务类，它有一个`string text`私人成员。我访问变量 trough `const string getText() const;`。

我想重载`==`运算符以检查对象的不同实例是否具有相同的文本。

我已经`bool operator==( const Task text2 ) const;`在类头上声明了一个 public 并像这样编码：

```
bool Task::operator==( const Task text2 ) const {
     return strcmp( text.c_str(), text2.getText().c_str() ) == 0;
} 
```

但即使字符串相等，它也总是返回 false。

所以我在里面添加了一个 cout 调用`bool operator==( const Task text2 ) const;`来检查它是否被调用，但什么也没得到。

似乎我的自定义`==`运算符从未被调用过。

我的标题：

```
#ifndef TASK_H
#define TASK_H

#include <iostream>

using namespace std;

    class Task {
        public:
            enum Status { COMPLETED, PENDIENT };
            Task(string text);
            ~Task();
            // SETTERS
            void setText(string text);
            void setStatus(Status status);
        // GETTERS
            const string getText() const;
            const bool getStatus() const;
            const int getID() const;
            const int getCount() const;
            // UTILS
            //serialize
            const void printFormatted() const;
            // OVERLOAD
            // = expression comparing text
            bool operator==( const Task &text2 ) const;
        private:
            void setID();
            static int count;
            int id;
            string text;
            Status status;
    };

    #endif 
```

编辑了重载操作以使用引用，并摆脱了 strcmp：

```
bool Task::operator==( const Task &text2 ) const {
    return this->text == text2.getText();
} 
```

主文件：

```
using namespace std;

int main() {
    Task *t = new Task("Second task");
    Task *t2 = new Task("Second task");

    cout << "Total: " << t->getCount() << endl;
    t->printFormatted();
    t2->printFormatted();

    if( t == t2 ) {
        cout << "EQUAL" << endl;
    }
    else {
        cout << "DIFF" << endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-06T22:29:00.717

```
Task *t = new Task("Second task");
Task *t2 = new Task("Second task");
// ...
if( t == t2 ) { 
```

您不是在比较`Task`对象，而是在比较对象的指针`Task`。指针比较是语言原生的，它比较对象的*身份*（即，`true`仅当两个指针指向同一个对象或两者都为空时才会产生）。

如果要比较需要取消引用指针的对象：

```
if( *t == *t2 ) { 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T01:43:14.227

你写了：

> 作为 C/C++ 的初学者，我有时会对指针和引用感到困惑。

*该*问题的解决方案很简单：**不要使用指针。**与 C 不同，C++ 允许您编写完全有用的程序，而无需直接使用指针。

以下是您编写程序的方法：

```
int main() {
    Task t("Second task");
    Task t2("Second task");

    std::cout << "Total: " << t.getCount() << "\n";
    t.printFormatted();
    t2.printFormatted();

    if( t == t2 ) {
        std::cout << "EQUAL\n";
    }
    else {
        std::cout << "DIFF\n";
    }

    return 0;
} 
```

1.  不要打电话`new`。你真的不需要它。正如当前接受的答案所指出的那样，指针的使用是问题的根本原因。

2.  不要使用`using namespace std;`. 它引入了细微的错误（在您的程序中没有，但最好避免它。）

3.  `std::endl`如果你的意思是不要使用`'\n'`。`'\n'`意思是“结束这一行”。`std::endl`意思是“结束这一行并刷新输出。”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-06T22:28:10.000

您正在比较指针，而不是指向对象。

使用`if (*t == *t2)`或者您将简单地检查地址是否相同，这显然总是错误的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-06T22:27:59.387

您正在比较指针...尝试`*t == *t2`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-06T22:26:52.213

`getText`如果访问器是公共的，则无需定义为成员函数，并且*绝对*不需要`strcmp`, 任何地方，永远。

```
bool operator==(const Task& lhs, const Task& rhs) {
    return lhs.getText() == rhs.getText();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-06T22:28:05.257

您不是在比较任务，而是在比较指向任务的指针。`t == t2`不代表`*t == *t2`。您不能重载`==`内置类型的运算符。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-06T22:15:37.667

尝试将方法签名更改为：

```
bool Task::operator==(const Task &text2) const; 
```

（即，尝试使用`text2`参数的引用）。

# css - 如何强制 Twitter Bootstrap .dl-horizo ntal DT 内容换行而不是截断？

> ID：12764332
> 
> 赞同：26
> 
> 时间：2012-10-06T22:11:40.490
> 
> 标签：css, twitter-bootstrap

Bootstrap 具有很好的水平定义列表样式，但**我希望 DT 内容能够换行，而不是被截断**。

我知道在他们的[base.css 页面上](http://twitter.github.com/bootstrap/base-css.html)他们说：*“注意！水平描述列表将截断太长而无法放入左列修复文本溢出的术语。”*

有谁知道解决这个问题？

这是我一直在努力但没有成功的现成引导 CSS：

```
.dl-horizontal {
  *zoom: 1;
}
.dl-horizontal:before,
.dl-horizontal:after {
  display: table;
  content: "";
  line-height: 0;
}
.dl-horizontal:after {
  clear: both;
}
.dl-horizontal dt {
  float: left;
  width: 160px;
  clear: left;
  text-align: right;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
} 
```

我的问题与这个问题类似，如果有帮助的话： [防止 Twitter 引导空 <dd> 填充下一个 <dd> 值](https://stackoverflow.com/questions/10566451/how-to-prevent-twitter-bootstrap-dds-from-going-up-if-empty)

提前致谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-12T13:57:29.793

在引导 CSS 引用之后添加 CSS 覆盖

```
.dl-horizontal dt 
{
    white-space: normal;
    width: 200px; 
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-04-01T10:50:15.010

我使用它是因为如果窗口宽度变小，我不想松开换行符：

```
@media (min-width: 768px) {
    .dl-horizontal dt {
        width:280px;
        white-space: normal;
        margin-bottom: 5px;
    }
    .dl-horizontal dd {
        margin-left:300px;
    }
} 
```

如果您想在每行的列中显示更多文本，则`width`和是可选设置。20px 的差异是列之间的空间。`margin-left``dt`

这`margin-bottom`在行之间增加了一点空间，因此它们可以更好地相互区分。`white-space: normal;`这仅在产生换行符时才有用（不要忘记可以通过访问者影响字体大小（例如 windows dpi 设置）。

![在此处输入图像描述](../Images/a3f676f53f8b3befe891d0ece9f99907.png)

小窗宽：
![在此处输入图像描述](../Images/be738da0a4b250fde3407d5e47fa762f.png)

要比较的 boostrap 源：

```
dd {
  margin-left: 0;
}
@media (min-width: 768px)
.dl-horizontal dt {
  float: left;
  width: 160px;
  overflow: hidden;
  clear: left;
  text-align: right;
  text-overflow: ellipsis;
  white-space: nowrap;
}
@media (min-width: 768px)
.dl-horizontal dd {
  margin-left: 180px;
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-10-07T10:19:03.887

如果要将内容包装在所有 dt 中，可以`white-space: nowrap;`从块中注释掉`.dl-horizontal dt`

如果要包装单个 dt 的内容，则将内联添加`style='white-space: normal;'`到该特定 dt

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-15T05:41:58.597

给你的 id `dl`：`<dl class="dl-horizontal" id="freelance">`

然后将其添加到您的 css 中：

```
#freelance dt {
    overflow: visible;
    width: 170px !important;
    margin-right: 8px;
} 
```

如果需要，更改宽度和边距。

# qr-code - 二维码最大字符长度

> ID：12764334
> 
> 赞同：56
> 
> 时间：2012-10-06T22:11:43.867
> 
> 标签：qr-code

我读过 QRCODES 有大约 4,290 个字母数字字符限制（大约 4kb）。

这是真的吗？有没有办法增加他们的内存大小？

如果可能的话，我想有更多的空间：P

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-10-06T22:16:38.760

规范的摘要在这里：

```
 * http://en.wikipedia.org/wiki/QR_code

    Numeric only    Max. 7,089 characters (0, 1, 2, 3, 4, 5, 6, 7, 8, 9)
    Alphanumeric    Max. 4,296 characters (0–9, A–Z [upper-case only], space, $, %, *, +, -, ., /, :)
    Binary/byte     Max. 2,953 characters (8-bit bytes) (23624 bits)
    Kanji/Kana  Max. 1,817 characters 
```

规范本身在这里：

*   [https://www.iso.org/standard/62021.html](https://www.iso.org/standard/62021.html)

至于“更多空间”，您应该将 QR 码视为您的 URL 的“链接”或“快捷方式”。点击二维码将用户带到网站；一旦他们在那里，您就可以拥有尽可能多的空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-07-07T21:41:49.037

二维码有各种标准尺寸，但最大的是 40 版，可存储约 2,953 个字节。2953 个字符是您可以在单个 QR 码中存储的最大值

Mattkc 在 youtube 上有一个视频，他将蛇游戏存储在 QR 码中。看看它真是太棒了。

```
https://mattkc.com/etc/snakeqr/ 
```

[![在此处输入图像描述](../Images/9c9483a0ff8ca7baca5ea603d0921431.png)](https://i.stack.imgur.com/Gt4nT.png)

# jquery - 同一域上的跨域jquery ajax错误

> ID：12764335
> 
> 赞同：1
> 
> 时间：2012-10-06T22:11:45.240
> 
> 标签：jquery, ajax

所以问题是我不断收到这个错误。它非常断断续续，看起来有点像[尼斯湖水怪](http://www.businessinsider.com/20-hilarious-programming-jargon-phrases-you-should-know-when-talking-to-engineers-2012-7)。由于在我的系统上从未见过它，因此我只收到了错误报告，我检查了堆栈溢出。像我这样的问题只有 2 个，但没有答案。所以这里是代码。

```
$(function() {
    $.get("http://mysite.com/menu/popoutmenu1.php", {}, function(response) {
        $("body").append(response);
    })
}) 
```

当执行该代码时（显然不是我正在使用的代码的精确副本），我收到此错误。

```
XMLHttpRequest cannot load http://www.mysite.com/menu/popoutmenu1.php. 
Origin http://mysite.com is not allowed by Access-Control-Allow-Origin. 
```

现在这在我的电脑上工作得很好，但在我朋友的电脑上（它在某个网站上）出现了同样的错误！我已经尝试了几台计算机，它们都可以正常工作。我对此很困惑。

如果有人有任何建议会很棒，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T22:41:31.323

使用相对或根相对 URL（仅路径，无主机名）：

```
$(function() {
    $.get("/menu/popoutmenu1.php", {}, function(response) {
        $("body").append(response);
    })
}) 
```

自我执行的[SOP](http://en.wikipedia.org/wiki/Same_origin_policy)合规性，如果你不能那样做，你就会遇到 SOP 问题。

看起来这*可能*是主机名转发的问题。但无论哪种方式，这都会解决它。

# jquery - 如何从 ID 中获取值

> ID：12764337
> 
> 赞同：1
> 
> 时间：2012-10-06T22:11:56.870
> 
> 标签：jquery

如何`ID`在单击时获取单选按钮的值。

```
<script>
    $(document).ready(function() {      
        $('label').click(function() {           
            var total = 0;              
            $('.option:checked').each(function() {
                total += parseInt($(this).val());
            });             
            $('.sub-total-t').html('$' + total);                
        });
    });

</script> 
```

此脚本适用于`value`--> 我该如何分配`ID`？

```
<label><input type="radio" name="print" class="option" id="25" value="p10"/> Starter 500 </label> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:14:35.637

尝试这样做：

```
$('.option:checked').each(function() {
    total += parseInt($(this).attr('id'));
}); 
```

但最好使用`data`属性来存储这种值：

```
<input data-number="25" /> 
```

要在 javascript 中检索它，请使用以下命令：

```
$(this).data('number') 
```

因为`number`你可以使用你想要的每一个名字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T22:13:59.503

用这个：

```
 total += parseInt($(this).attr("id")); 
```

但是，元素*不应该*有一个数字作为 id。ID 值应以字母开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T22:14:04.000

```
$('input[type=radio]:checked').attr('id'); 
```

尝试这个..

在这种情况下

```
 total += parseInt($(this).attr('id'));

OR 
  total += parseInt(this.id);  // This is faster 
```

# html - 如果不设置“宽度”，IE8 中的 div 位置将不起作用

> ID：12764342
> 
> 赞同：1
> 
> 时间：2012-10-06T22:12:27.603
> 
> 标签：html, internet-explorer-8, position

我想使用 div 进行以下布局：

```
+----------------------+---------------+
|                      |               |
|                      |               |
|                      |   rightDiv    |
|                      |               |
+**********************+***************+
|             bottomDIV|               |
+**************************************+ 
```

2个DIV（rightDiv和bottomDiv）放入一个DIV容器（containerDiv）。第一个漂浮在右侧，第二个站在底部。containerDiv 的高度不能固定：它应该与 rightDiv div 的高度相同，可以随着内部数据的变化而改变。

我写了代码：

```
<div id="ContainerDiv" style="position:relative; border: 1px black solid;width:300px">
    <div id="rightDiv" style="border: 1px solid #CCCCCC; float:right;">
        XXXXXXXX<br/>
        XXXXXXXX<br/>
        XXXXXXXX<br/>
        XXXXXXXX<br/>
    </div>

    <div style="clear: both;"></div>

    <div id="BottomDiv" style="border: 1px solid blue; position:absolute; bottom:0px; width:100%; text-align:center; ">
        BOTTOM
    </div>
</div> 
```

如果我删除 containerDiv 中的“width:300px”属性，在 Chrome 中我仍然有相同的结果，但在 IE8 中，“BottomDiv”走出“containerDiv”并位于页面底部，远离其余部分组成。
为什么我需要输入宽度值？谢谢您的帮助。

# indentation - TypeScript 中的 Allman 式大括号

> ID：12764345
> 
> 赞同：5
> 
> 时间：2012-10-06T22:12:50.590
> 
> 标签：indentation, curly-braces, typescript

TypeScript 编译器是否可以调整为允许在[经典地破坏 JavaScript 代码的地方](http://encosia.com/in-javascript-curly-brace-placement-matters-an-example/)安全使用 Allman 样式的大括号？TypeScript 旨在生成惯用的 JavaScript，因此生成的大括号无论如何都会以 K&R 样式生成。

举个例子：

```
// currently breaks in JS (and won't compile in TypeScript)
function getPerson() {        
    // compiler inserts semicolon after return, return executes prematurely
    return 
    {
        firstname: "Eric",
        lastname: "Allman"
    };
} 
```

PS我只是好奇；对争论反对普遍接受的 JS 实践是否是一个“好主意”并不真正感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T22:17:17.553

TypeScript 编译器所做的是添加分号，因此您可以看到问题 - 而不是等待浏览器隐式添加它并导致奇怪的行为。

这是否是社区想要添加的东西不是可以在 Stack Overflow 上回答的——您必须[在 Codeplex 上开始讨论](http://typescript.codeplex.com/discussions)。

# node.js - Socket.IO 错误“listen()”方法在迁移到 Express 3.0 后需要一个“http.Server”实例

> ID：12764346
> 
> 赞同：18
> 
> 时间：2012-10-06T22:13:03.330
> 
> 标签：node.js, express, socket.io

我今天开始学习 Node.js，但我有点卡住了。

按照[此](http://www.tigoe.com/pcomp/code/arduinowiring/1096/)示例，当我尝试执行 js 文件时出现以下错误：

```
Warning: express.createServer() is deprecated, express
applications no longer inherit from http.Server,
please use:

  var express = require("express");
  var app = express();

Socket.IO's `listen()` method expects an `http.Server` instance
as its first parameter. Are you migrating from Express 2.x to 3.x?
If so, check out the "Socket.IO compatibility" section at:
https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x
   info  - socket.io started 
```

我不知道如何解决这个问题。

**更新**

比尔修改代码导致的错误：

```
/home/sisko/NodeJS/nodeSerialServer/serialServer.js:24
var app     =   express()
                ^
ReferenceError: express is not defined
    at Object.<anonymous> (/home/sisko/NodeJS/nodeSerialServer/serialServer.js:24:12)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-06T22:17:12.613

在版本 2 和 3 之间初始化`express`应用程序的方式发生了变化。此示例基于版本 2，但看起来您已经安装了版本 3。您只需更改几行即可`socket.io`正确设置。更改这些行：

```
var app = require('express').createServer(),
    io = require('socket.io').listen(app),
    scores = {};                                

// listen for new web clients:
app.listen(8080); 
```

对此：

```
var express = require('express'),
    app = express()
  , http = require('http')
  , server = http.createServer(app)
  , io = require('socket.io').listen(server);

// listen for new web clients:
server.listen(8080); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:53:17.283

简化为三行代码：

```
var server = require('http').createServer(require('express')()),
io = require('socket.io').listen(server);
server.listen(8080); 
```

# python - Django：此函数的无效关键字参数

> ID：12764347
> 
> 赞同：13
> 
> 时间：2012-10-06T22:13:06.963
> 
> 标签：python, django

我想在多对多字段中插入一些数据。我收到此错误

> user 是此函数的无效关键字参数

我也尝试了相关名称...但仍然无法正常工作...

我的模型如下所示：

模型.py

```
class Workspace(models.Model):
    user = models.ManyToManyField(User,null=False, blank=False, related_name='members')
    workspace_name = models.CharField(max_length=80, null=False, blank=False)
    workspace_cat =models.CharField(max_length=80, null=True, blank=True) 
```

视图.py

```
db= Workspace(user=5, workspace_name=data_to_db['workspace_name'],workspace_cat=data_to_db['workspace_category'])
db.save() 
```

有人有想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-06T22:18:34.170

您为对象的字段使用了一个[`ManyToMany`](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ManyToManyField)字段，您不能给它一个用户，这不是 a 的工作方式，那将是.`user``Workspace``ManyToMany`[`ForeignKey`](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey)

基本上，使用 a `ForeignKey`，每个工作区都有一个`User`与之关联，有一个直接链接，因此创建 a并将其传递`Workspace -> User`a 是有意义的，就像您将填写 a 一样。`Workspace``User``CharField`

`ManyToMany`关系意味着多个用户可以关联到a`Workspace`和`Workspaces`多对一`User`。使用 a`ManyToMany`时，您将创建您的`Workspace`，*然后*向其添加一些`User`s。

要添加到`ManyToMany`关系，请执行以下操作：

```
my_user = User.objects.get(pk = 5)
my_workspace = Workspace(workspace_name=data_to_db['workspace_name'],workspace_cat=data_to_db['workspace_category'])
my_workspace.save() # committing to the DB first is necessary for M2M (Jurudocs edit)
my_workspace.users.add(my_user) 
```

您*应该重命名该`user`字段以`users`*使关系名称更清晰。

# iphone - iOS5/6 上的黑色背景（Safari、Ipad、Iphone）

> ID：12764353
> 
> 赞同：0
> 
> 时间：2012-10-06T22:13:58.817
> 
> 标签：iphone, css

我有带有 input[type="text"] 的联系表并选择字段。对于那些元素，我设置了没有任何透明像素的背景图像

但在 iOS 设备上它是黑色的

CSS 代码：

```
border:1px solid #909090; 
height:19px; 
width:344px; 
background:#fff url(../img/input-bg.png) 0 0 repeat-x 
```

没有其他东西会覆盖这些样式。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:53:02.130

您可以：

1.  将文件重新保存为其他图像文件（JPEG、GIF）
2.  如果是渐变图片，那么可以使用[CSS3 Gradient](http://www.colorzilla.com/gradient-editor/)来实现效果。

# html - 基于模板转换对 XML 元素进行分组

> ID：12764359
> 
> 赞同：-1
> 
> 时间：2012-10-06T22:14:27.307
> 
> 标签：html, xml, xslt

**编辑：重构的问题和代码**

扩展[这个问题](https://stackoverflow.com/questions/11316208/grouping-xml-elements-based-on-attributes-with-xslt/11316699#comment14895945_11316699)...

我有一个 XML 提要，它以以下格式表示呈现的开始和结束时间：`2012-06-06 10:45`，其中每个节点都以这种方式表示：

```
<session id="9c4716c71f" name="Session 1" starttime="2012-06-06 10:45" endtime="2012-06-06 12:45" location="" chair="">
  <article code="c1" id="TT-282" type="presentation"></article>
  <article code="c2" id="TT-301" type="presentation"></article>
  ...
</session>
<session id="9c4716c249z" name="Session 2" starttime="2012-06-06 14:45" endtime="2012-06-06 16:45" location="" chair="">
  <article code="c1" id="TT-214" type="presentation"></article>
  <article code="c2" id="TT-328" type="presentation"></article>
  ... 
```

在上一个问题中，我只关心按时间分组，但是现在我也想在日期（2012 年 6 月 6 日）对所有这些进行分组。

因此，理想情况下，我将首先按日期分组输出，然后按时间分组（正如我将在以下代码中显示的那样）。

我有一个模板，我应用它来显示该部分：

```
<!-- formatting dateTime -->
<xsl:template name="formatDate">
  <xsl:param name="dateTime" />
  <xsl:variable name="date" select="substring-before($dateTime, ' ')" />
  <xsl:variable name="year" select="substring-before($date, '-')" />
  <xsl:variable name="month" select="number(substring-before(substring-after($date, '-'), '-'))" />
  <xsl:variable name="day" select="number(substring-after(substring-after($date, '-'), '-'))" />

  <!-- output -->
  <xsl:choose>
    <xsl:when test="$month = '1'">January</xsl:when>
    <xsl:when test="$month = '2'">February</xsl:when>
    <xsl:when test="$month = '3'">March</xsl:when>
    <xsl:when test="$month = '4'">April</xsl:when>
    <xsl:when test="$month = '5'">May</xsl:when>
    <xsl:when test="$month = '6'">June</xsl:when>
    <xsl:when test="$month = '7'">July</xsl:when>
    <xsl:when test="$month = '8'">August</xsl:when>
    <xsl:when test="$month = '9'">September</xsl:when>
    <xsl:when test="$month = '10'">October</xsl:when>
    <xsl:when test="$month = '11'">November</xsl:when>
    <xsl:when test="$month = '12'">December</xsl:when>
  </xsl:choose>
  <xsl:value-of select="' '" />
  <xsl:value-of select="$day" />
  <xsl:value-of select="', '" />
  <xsl:value-of select="$year" />
</xsl:template>

<!-- formatting dateTime -->
<xsl:template name="formatTime">
  <xsl:param name="dateTime" />
  <xsl:value-of select="substring-after($dateTime, ' ')" />
</xsl:template> 
```

我以这种方式应用它：

```
<h4>
  <!-- output DD-MM-YYYY -->
  <xsl:call-template name="formatDate">
    <xsl:with-param name="dateTime" select="@starttime" />
  </xsl:call-template>
</h4> 
```

这是我目前的分组方法。可以看出，它直接在未格式化的日期`2012-06-06 10:45`时间（`$cdate``$ctime`

```
<xsl:template match="session">

  <xsl:variable name="cdate">
    <xsl:call-template name="formatDate">
      <xsl:with-param name="dateTime" select="@starttime" />
    </xsl:call-template>
  </xsl:variable>

  <xsl:if test='not(preceding-sibling::session[@starttime = current()/@starttime])'>
    <h2><xsl:value-of select="@starttime" /></h2>
    <div><xsl:apply-templates /></div>
  </xsl:if>
</xsl:template>

<xsl:template match="article">
  <b><xsl:value-of select="@name" /></b>
</xsl:template> 
```

所以，目前我看到页面上显示了一个独特的@startime 值列表。我非常非常喜欢看到的输出（我仍在使用 XSLT 思维方式）是这样的：

```
June 06, 2012
  10:45 - 12:45  |    TT-282
                 |    TT-301
  ----------------------------------
  14:45 - 16:45  |    TT-214
                 |    TT-328

June 07, 2012
  .... 
```

在这一点上，我不太关心直接格式，但只是希望能够拥有这个基于变量的两部分分组。绝对感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T09:31:09.880

使用 XSLT 1.0，您可以使用变量进行两次转换，然后使用扩展函数，[`exsl:node-set`](http://www.exslt.org/exsl/functions/node-set/index.html)例如

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:exsl="http://exslt.org/common"
  exclude-result-prefixes="exsl"
  version="1.0">

<xsl:variable name="temp-doc">
  <!-- now create the nodes here you want to process later on in a second pass -->
</xsl:variable>

<xsl:key name="k2" match="foo" use="bar"/>

<xsl:template match="/">
  <!-- here we are processing the nodes in the variable obtained from the first pass of prcocesssing -->
  <xsl:apply-templates select="exsl:node-set($temp-doc)//foo[generate-id() = generate-id(key('k2', bar)[1])]"/>
</xsl:template>

<xsl:template match="foo">...</xsl:template>

</xsl:stylesheet> 
```

# django-cms - 如何查找 Django-CMS 的版本号

> ID：12764360
> 
> 赞同：8
> 
> 时间：2012-10-06T22:14:34.310
> 
> 标签：django-cms

我正在向已经安装了 Django 和 Django-CMS 的服务器添加一个新站点。如何检测已安装的 Django-CMS 的版本号？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T11:18:36.970

```
from cms import __version__
print __version__ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-02T23:23:19.377

这适用于 Python 3.3.4

```
 from cms import __version__
    print (__version__) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-04-27T16:54:09.050

你可以做

```
python manage.py version 
```

如果您使用的是 Linux，它将是

```
./manage.py version 
```

# java - Java：log4j 初始化错误

> ID：12764362
> 
> 赞同：1
> 
> 时间：2012-10-06T22:14:44.983
> 
> 标签：java, logging, log4j

我是使用 log4j 包的新手，我没有看到错误：这是一个非常简单明了的代码示例：

```
import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;

public class TestLogger {

    private static Logger logger;

    public static void main(String[] args) {

        logger = LogManager.getLogger(TestLogger.class);
        logger.info("Hello");

    }
} 
```

当我尝试编译时，出现此错误：

> 在 my.package.logging.TestLogger.main(TestLogger.java:15) 的 org.apache.logging.log4j.LogManager.getLogger(LogManager.java:129) 的线程“main”java.lang.NullPointerException 中的异常

我想知道这到底是什么意思...

你能在这里帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T00:45:18.837

我通过避免 log4j2 jar 的类路径上的多个副本解决了这个问题。

NPE 发生在 LogManager 的第 129 行。（返回语句 = 第 129 行）

```
/**
 * Return a Logger with the specified name.
 *
 * @param name The logger name.
 * @return The Logger.
 */
public static Logger getLogger(String name) {

    return factory.getContext(LogManager.class.getName(), null, false).getLogger(name);
} 
```

问题似乎是，工厂 (LoggerContextFactory) 为 null = 未初始化。初始化发生在类 LogManager 的静态初始化块中。

我的假设是，当类路径上有多个 LogManager 时，初始化会失败。

在我的项目（使用 Eclipse 开发的 Web 应用程序）中，我的 WEB-INF/lib 中有 jar，*并被*另一个项目的依赖项引用。在我的情况下，使所有引用都指向相同的罐子解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T23:15:08.743

您很可能缺少其中一个依赖项。如果您只在类路径中包含该`log4j-api-2.0-beta1.jar`文件，这很容易重现。

如果您下载[了二进制发行版](http://www.apache.org/dyn/closer.cgi/logging/log4j/2.0-beta1/apache-log4j-2.0-beta1-bin.zip)，请`log4j-core-2.0-beta1.jar`在您的类路径中也包含 。如果您使用 Maven，请将其放入您的`pom.xml`：

```
 <dependency>
    <groupId>org.apache.logging.log4j</groupId>
    <artifactId>log4j-api</artifactId>
    <version>2.0-beta1</version>
  </dependency>
  <dependency>
    <groupId>org.apache.logging.log4j</groupId>
    <artifactId>log4j-core</artifactId>
    <version>2.0-beta1</version>
  </dependency> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T22:20:15.583

以下对我有用（更新：现在与您的原始帖子相同，但显示导入）

```
import org.apache.log4j.LogManager;
import org.apache.log4j.Logger;

public class TestLogger
{
    private static Logger logger;

    public static void main(String[] args) {
        logger = LogManager.getLogger(TestLogger.class);
        logger.info("Hello");
    }
} 
```

前提是您已经创建了 log4j 配置，否则您将收到可怕的错误：

```
log4j:WARN No appenders could be found for logger (TestLogger).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

# ruby-on-rails-3 - Michael Hartl 的 Ruby on Rails 教程第 8 章登录

> ID：12764371
> 
> 赞同：1
> 
> 时间：2012-10-06T22:16:39.163
> 
> 标签：ruby-on-rails-3

我正在阅读第 8.2 节 Michael Hartl 的 RoR 3.2 教程，似乎无法让用户登录。我完全按照教程进行操作，但由于某种原因，当我调试并打印出来时，@current_user 似乎是空白的提交登录表单后的视图。我已经多次查看代码，似乎找不到任何错误。任何帮助表示赞赏。谢谢你。

```
module SessionsHelper

    def sign_in(user)
        cookies.permanent[:remember_token] = user.remember_token
        self.current_user = user
    end

    def signed_in?
        !current_user.nil?  
    end

    def current_user=(user)
        @current_user = user
    end

    def current_user
        @current_user ||= User.find_by_remember_token(cookies[:remember_token])
    end

    def sign_out
        self.current_user = nil
        cookies.delete(:remember_token)
    end
end 
```

我的 session_controller.rb

```
class SessionsController < ApplicationController

def new
end

def create
    user = User.find_by_email(params[:session][:email].downcase)
if user && user.authenticate(params[:session][:password])
        sign_in user 
        redirect_to new_job_url
    else
        flash.now[:error] = 'Invalid email/password combination'
        render 'new'
    end
end

def destroy
  sign_out
  redirect_to root_url
end 
```

结尾

# windows-8 - Windows 8 应用程序：为什么我必须在图像源 URL 中指定 ms-appx:///？

> ID：12764376
> 
> 赞同：5
> 
> 时间：2012-10-06T22:17:19.913
> 
> 标签：windows-8

我一直在查看[XAML 图像示例项目](http://code.msdn.microsoft.com/0f5d56ae-5e57-48e1-9cd9-993115b027b9)，并且在该示例中加载图像的 XAML 如下所示：

```
<Image Source="Assets/image1.jpg"/> 
```

但是，在我自己的项目中，我发现我无法加载任何这样的图像。如果我尝试在处理 ImageFailed 时得到 E_NETWORK_ERROR。相反，我发现我必须像这样使用 ms-appx:/// 前缀：

```
<Image Source="ms-appx:///Assets/image1.jpg"/> 
```

然后它工作。任何想法我的项目与导致这种情况的样本有什么不同？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T22:33:31.103

你试过“ `<Image Source="/Assets/image1.jpg>`”吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T07:00:08.940

我在 Windows phone 8 上工作的 M 使用了这个。

OrderImage1.Source = new BitmapImage(new Uri("///Assets/images/order_bread.png"));

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T22:21:02.073

[此行为有效](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.image.source.aspx)- 在 Windows 8 RTM / Visual Studio 2012 RTM 中测试，并且可以确认不需要 ms-appx:// 前缀。你使用的是什么版本？

您如何设置图像或为它选择的构建操作可能存在问题。

此外，这也记录在[如何加载文件资源 (XAML) (Windows)](https://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh965322(v=win.10).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T22:39:27.000

对于声明性图像，您不需要 ms-appx 命名空间（在 XAML 中声明的图像）。对于动态数据绑定图像，会创建一个新的位图实例，并且它需要此命名空间。

解决此问题的一个好方法是从将命名空间实现为共享属性的基础对象派生数据对象：

```
Private Shared _baseUri As New Uri("ms-appx:'''")

'//image handling
Private _image As ImageSource
Private _imagePath As String
Public Property Image As ImageSource
    Get
        If Me._image Is Nothing AndAlso Me._imagePath IsNot Nothing Then
            Me._image = New BitmapImage(New Uri(dataModelBase._baseUri, Me._imagePath))
        End If
        Return Me._image
    End Get

    Set(value As ImageSource)
        Me._imagePath = Nothing
        Me.SetProperty(Me._image, value)
    End Set
End Property 
```

# jquery - 多个jquery函数不起作用

> ID：12764379
> 
> 赞同：0
> 
> 时间：2012-10-06T22:17:55.607
> 
> 标签：jquery, anythingslider

我一整天都在试图弄清楚为什么我的代码不起作用。我在 jQuery 中有多个函数，当我尝试将它们组合起来时，其中一个不起作用。

这是我现在的全部代码。

```
 jQuery(document).ready(function($){
        jQuery('#slider').anythingSlider({
            mode                : 'h',   // fade mode - new in v1.8!
            easing              : '<?php echo $data['slideshow_transition']; ?>',
            buildArrows         : <?php echo $data['slide_arrows']; ?>,      // If true, builds the forwards and backwards buttons 
            buildNavigation     : <?php echo $data['slide_anchor']; ?>,      // If true, builds a list of anchor links to link to each panel 
            buildStartStop      : <?php echo $data['slide_startstop']; ?>,      // If true, builds the start/stop button 
            toggleArrows        : <?php echo $data['slide_toggle_arrows']; ?>,     // If true, side navigation arrows will slide out on hovering & hide @ other times 
            toggleControls      : <?php echo $data['slide_toggle_controls']; ?>,     // if true, slide in controls (navigation + play/stop button) on hover and slide change, hide @ other times 
            startPanel          : <?php echo $data['slideshow_start_from']; ?>,
            autoPlay            : <?php echo $data['slideshow_pause']; ?>,     // If true, the slideshow will start running; replaces "startStopped" option 
            autoPlayLocked      : <?php echo $data['slideshow_user_pause']; ?>,     // If true, user changing slides will not stop the slideshow 
            autoPlayDelayed     : false,     // If true, starting a slideshow will delay advancing slides; if false, the slider will immediately advance to the next slide when slideshow starts 
            pauseOnHover        : <?php echo $data['slideshow_hover_pause']; ?>,      // If true & the slideshow is active, the slideshow will pause on hover 
            stopAtEnd           : <?php echo $data['slideshow_endstop']; ?>,     // If true & the slideshow is active, the slideshow will stop on the last page. This also stops the rewind effect when infiniteSlides is false. 
            playRtl             : <?php echo $data['slideshow_direction']; ?>,     // If true, the slideshow will move right-to-left 
            resumeOnVideoEnd    : true,      // If true & the slideshow is active & a supported video is playing, it will pause the autoplay until the video is complete 
            addWmodeToObject    : "opaque",
            onSlideBegin: function(e,slider) {
                // keep the current navigation tab in view
                slider.navWindow( slider.targetPage );
            }
        });
        // Videos on click grid and list style
        var animateSpeed = 500; 
        jQuery("#layout-controls a").click(function(){
            var curClass = jQuery('#videos').attr('class');
            var newClass = jQuery(this).attr('class');
            jQuery('#videos').fadeOut(animateSpeed,function(){
                jQuery('#videos').removeClass(curClass,animateSpeed);
                jQuery('#videos').addClass(newClass,animateSpeed);          
            }).fadeIn(animateSpeed);                        
            return false;       
        });
        jQuery("#cw-layout-controls a").click(function(){
            var curClass = jQuery('#cw-videos').attr('class');
            var newClass = jQuery(this).attr('class');
            jQuery('#cw-videos').fadeOut(animateSpeed,function(){
                jQuery('#cw-videos').removeClass(curClass,animateSpeed);
                jQuery('#cw-videos').addClass(newClass,animateSpeed);           
            }).fadeIn(animateSpeed);                        
            return false;       
        });
        //Validate contact form
        jQuery('#contactform').validate();
        //Slow scroll to comments area
        var commentTopPosition = jQuery('#comments').offset().top;
        // When #comment-scroll is clicked
        jQuery('#comment-scroll').click(function(){
            // Scroll down to 'commentTopPosition'
            jQuery('html, body').animate({scrollTop:commentTopPosition}, 'slow');
            // Stop the link from acting like a normal anchor link
            return false;
        });
        jQuery(".vf-table tr:even").addClass("even");
        jQuery(".vf-table tr td").css({'border-left': '1px solid <?php $borders ?>', 'border-right': '1px solid <?php $borders ?>'});
        jQuery(".vf-table tr th").css({'background': '<?php $borders ?>'});
    }); 
```

代码开头是我在最新主题上使用的任何滑块，代码末尾是 jquery 代码，用于将 css 样式添加到我的主题表中。

更改我之前在不同主题和不同 js 文件中使用的表格样式的代码。但由于某种原因，它在这个中不起作用。当我让表格边框工作时，任何滑块都不起作用，如果我让任何滑块工作，其他代码也不起作用。

我试图为每个代码分别创建 .js 文件并将其包含在主题中，我试图从 php 文件中包含代码，我试图将代码直接包含在标题中我试图添加 jquery 没有冲突我正在尝试 $ 代替jQuery的，但都不起作用。从这里我看不到我的代码中有任何错误。谁能更聪明地解释一下我错过了什么，所以我的代码在这方面不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T00:36:05.367

好的，我发现问题出在哪里。

在禁用评论的页面上没有#comments div 所以这里

```
var commentTopPosition = jQuery('#comments').offset().top; 
```

jQuery 中断。

以及它破裂后的一切。我只是对我的评论 php 文件进行了细微的更改，现在它可以工作了。

# php - 试图从数据库 jquery 中检索用户名

> ID：12764384
> 
> 赞同：0
> 
> 时间：2012-10-06T22:18:43.523
> 
> 标签：php, jquery, html, mysql, ajax

```
 echo "<form method='post' action='regprocess.php' id='registerform'>";
        echo '<fieldset class="register">';
        echo"<h2>Register</h2>";
            echo "<ul>";
                    echo '<li><label for="FirstName">First Name: </label> <input type="text" name="FirstName" id="FirstName"></li>';
                    echo '<li><label for="LastName">Last Name: </label> <input type="text" name="LastName" id="LastName"></li>';
                    echo '<li><label for="Email">Email: </label><input type="email" name="Email" id="Email"></li>';
                    echo '<li><label for="Username">Username: </label><input type="text" name="Username" id="Username"></li>';
                    echo '<li><input type="button" id="check_username_availability" value="Check Availability"></li>';  
                    echo '<div id="username_availability_result"></div>'; 
                    echo '<li><label for="Password">Password: </label><input type="password" name="Password" id="Password"></li>';
                    echo '<li><input type="submit" value="Register"></li>';
                    echo "</ul>";
        echo "</fieldset>";
        echo "</form>";

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

<SCRIPT LANGUAGE="JAVASCRIPT" TYPE="TEXT/JAVASCRIPT">
$(document).ready(function() {  

        var checking_html = 'Checking...';  

        //when button is clicked  
        $('#check_username_availability').click(function(){  
            //run the character number check  
                $('#username_availability_result').html(checking_html);  
                check_availability();  
        });  

  });  

//function to check username availability  
function check_availability(){  

        //get the username  
        var username = $('#username').val();  

        //use ajax to run the check  
        $.post("check_username.php", { username: username },  
            function(result){  
                //if the result is 1  
                if(result == 1){  
                    //show that the username is available  
                    $('#username_availability_result').html(username + ' is Available');  
                }else{  
                    //show that the username is NOT available  
                    $('#username_availability_result').html(username + ' is not Available');  
                }  
        });  

}
</script>

<?php
$conn = new mysqli('sapphire', 'cgreenheld', '', 'cgreenheld_dev');
$username = mysqli_real_escape_string($conn, $_POST['Username']);  

//mysql query to select field username if it's equal to the username that we check '  
$usernameresult = 'Select Username from User where Username = "'. $username .'"'; 
$uresult = $conn->query($usernameresult); 

//if number of rows fields is bigger them 0 that means it's NOT available '  
if($uresult->num_rows==1) {  
    //and we send 0 to the ajax request  
    echo 0;  
}else{  
    //else if it's not bigger then 0, then it's available '  
    //and we send 1 to the ajax request  
    echo 1;  
}  
?> 
```

大家好，我正在尝试检查用户名是否在数据库中，我不确定我的代码有什么问题，当它从数据库中检索内容时，它总是显示“未定义不可用”所以出于某种原因，它没有检索用户名，想知道是否有人可以帮助我？我真的被困住了.. php 位于不同的文件中，仅供任何想知道的人使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T22:25:06.783

您的输入中有一个大写的“用户名”id 属性，并且您在 jquery 中使用小写的“用户名”选择它：

```
echo '<li><label for="Username">Username: </label><input type="text" name="Username" id="Username"></li>';

var username = $('#username').val(); 
```

和

您将小写的“用户名”发布到 php 并尝试使用大写的“用户名”访问它

```
$.post("check_username.php", { username: username }, 

$username = mysqli_real_escape_string($conn, $_POST['Username']); 
```

将它们全部设置为小写或大写，你应该没问题

# javascript - 在较高的 z-index 元素上无法识别单击事件

> ID：12764385
> 
> 赞同：0
> 
> 时间：2012-10-06T22:18:44.907
> 
> 标签：javascript, events, click, z-index

我有一个这样的代码片段：（注意 frame_bookmark 的 z-index 为 100）

```
<div id="select_bar">
  <div class="frame_bookmark" style="position:absolute;top:1px;left:695px;z-index:100;width:15px;height:15px;background:#df3367;border-radius:10px;">
  </div>
</div> 
```

当我有 JavaScript 时会显示警告框

```
$("#select_bar").click(function()
{
  alert('down');
}); 
```

但是当我有 JavaScript 时没有显示：

```
$(".frame_bookmark").click(function()
{
  alert('down');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:25:32.303

如果您发布的代码正是您的代码，那么您错过的关闭`</div>`肯定会让您感到困惑。它应该是：

```
<div id="select_bar">
    <div class="frame_bookmark" style="position:absolute;top:1px;left:695px;z-index:100;width:15px;height:15px;background:#df3367;border-radius:10px;"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T23:09:24.747

当您在 jquery 中调用 ID 时形成我的理解，就像 JavaScript 一样，它默认为 eq(0)。

但是当使用属性类/名称时，您要指定索引数字

例子

**$(".frame_bookmark:eq(0)") / $(".frame_bookmark").eq(0)**

和或使用 .each 函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T22:29:13.423

看看这个[http://jsfiddle.net/](http://jsfiddle.net/) 你的代码很有效）

# performance - Ngingx max worker_connections 和访问日志

> ID：12764389
> 
> 赞同：-1
> 
> 时间：2012-10-06T22:19:56.633
> 
> 标签：performance, nginx

我正在解决我的网站的问题。我在 ngingx-error.log 中看到站点关闭时已达到最大 worker_connection 限制。我在 ngingx-access.log 中没有看到在那段时间的请求增加。

这是否意味着 mysql 数据库当时存在导致请求排队的瓶颈？或者它不会记录在达到最大 worker_connection 限制后发出的任何请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:30:46.317

我将首先验证您的 NGINX 配置设置是否已优化。看到[这个](https://stackoverflow.com/questions/7325211/tuning-nginx-worker-process-to-obtain-100k-hits-per-min)线程。

如果一切看起来都不错，那么我会探索其他潜在的原因。我还会查看系统的 ulimit 设置。

# php - 如何为我的自定义 PHP 搜索引擎将页面索引到 MySQL

> ID：12764390
> 
> 赞同：0
> 
> 时间：2012-10-06T22:20:00.020
> 
> 标签：php, javascript, mysql, search-engine

我有一个简单的 PHP 脚本，可以在 MySQL 数据库表中搜索请求的关键字。但是，我正在尝试制作一个给定 URL 的 PHP 脚本，该脚本将导入该页面并获取“内容”ID 中的所有内容。这可能吗？如果不是，我愿意使用 JavaScript/jQuery。

提前致谢 ：）

如果您需要更多说明，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:40:49.640

您可能会发现此扩展很有用： [http ://www.php.net/manual/en/book.dom.php](http://www.php.net/manual/en/book.dom.php)

以下代码段将返回 id="content" 元素的内容：

```
 $url = 'http://www.example.com/';

  $doc = new DomDocument;
  $doc->load($url);

  $content_element = $doc->getElementById('content');
  $contents = $doc->saveXML($content_element); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T22:34:42.367

是的，这是可能的，我建议也许使用 cURL。

然后，您可以输入一个 URL，它将抓取页面。

```
<?php

$ch = curl_init('http://finance.google.com/finance');

curl_setopt($ch,CURLOPT_HEADER,0); 

curl_setopt($ch,CURLOPT_RETURNTRANSFER,1); // Give us the page source

$cr = curl_exec($ch);

preg_match_all('/href="()"/i',$cr,$pm,PREG_SET_ORDER);

print_r($pm);

foreach($pm as $pv) echo $pv[1] . "\r\n";

?> 
```

您将要编辑该预匹配以确保仅获得所需的内容，然后可以将其拆分并插入数据库。

请注意，这不是非常有效的带宽。

# sql - 使用 select 语句并加入 access 2007

> ID：12764393
> 
> 赞同：0
> 
> 时间：2012-10-06T22:20:20.737
> 
> 标签：sql, database, ms-access

伙计们，我正在尝试在 access 2007 中运行一个 select 语句，我在如何在 access 2007 中执行它们时遇到问题我想在两个表上执行外部连接，但我想我需要一些关于如何执行它的指导我的代码我尝试在 access 2007 的 sql 视图中运行任何想法我将不胜感激

这是我的 sql 语句

```
SELECT  MENU.[C_MENU],  MENU.[C_REC],  AUTO.[C_GROUP]
FROM  MENU
 JOIN  AUTO
ON MENU.[C_MENU]=AUTO.[C_GROUP] 
```

第一个问题是上面的这个sql语句给出了一个语法错误，我不知道为什么它对我如何纠正我的错误有任何想法？？？它在`Join`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:23:59.763

```
SELECT [MENU].[C_MENU], [MENU].[C_REC], [AUTO].[C_GROUP]
FROM [MENU]
LEFT JOIN [AUTO] ON [MENU].[C_MENU]=[AUTO].[C_GROUP] 
```

自从我查看 Access 以来已经快一年了，但我记得它对语法非常挑剔，所以你总是最好用方括号括起来，当你的意思是“INNER JOIN”时，包括“INNER”这个词，而不是使用只需“加入”。但是你想要一个“外部连接”，你说？

# html - CSS导致chrome中的空白页

> ID：12764394
> 
> 赞同：0
> 
> 时间：2012-10-06T22:20:22.653
> 
> 标签：html, css, google-chrome

我有一个外部 css 样式表，我正在使用以下方法将其加载到我的 html 页面中：

```
<link rel="stylesheet" type="text/css" href="styles/styles.css" /> 
```

它在 ie 和 firefox 中运行良好，但是当我尝试在 chrome 中打开它时，我得到一个空白页。

这是我的CSS：

```
@charset "UTF-8";
* {
    margin: 0;
padding: 0;
}
html, body{
height: 100%;
}
body {
text-align: center;
font-family: "Comic Sans MS", cursive;
font-size: 16px;
background-image: url(../Images/bg.jpg);
background-repeat: repeat-x;
background-attachment: fixed;
background-position: center top;
background-color: #FFFFFF;
font-style: normal;
font-weight: lighter;
}
#container {
min-height: 100%;
width: 780px;
margin:0 auto;
}
html:before, #container:before { /* Opera and IE8 "redraw" bug fix */
content:"";
float:left;
height:100%;
margin-top:-999em;
}
* html #container { /* IE6 workaround */
height:100%; 
}
#bar {
height: 20px;
text-align: right;
vertical-align: middle;
padding-top: 0;
padding-right: 10px;
padding-bottom: 0;
padding-left: 10px;
}
#bottom {
width: 750px;
height: 30px; /* negative margin-top equals height of #foot */
-moz-border-radius-topright: 10px;
-moz-border-radius-topleft: 10px;
-webkit-border-top-left-radius: 10px;
-webkit-border-top-right-radius: 10px;
margin-top: 10px;
margin-right: auto;
margin-bottom: 0;
margin-left: auto;
}
#ribbon {
background-image: url(../Images/ribbon.png);
float: right;
height: 775px;
width: 1116px;
overflow: visible;
position: absolute;
top: 0px;
right: 0px;
z-index: -1;
visibility: visible;
text-align:right;
}
#header {
margin: 0;
padding: 0px;
width: 780px;
height: 150px;  
}
#logo {
margin: 0px;
padding: 0px;
float: left;
width: 50%;
height: auto;
border-top-width: 0px;
border-right-width: 0px;
border-bottom-width: 0px;
border-left-width: 0px;
border-top-style: none;
border-right-style: none;
border-bottom-style: none;
border-left-style: none;
}
#menu {
width: 750px;
-moz-border-radius-topright: 10px;
-moz-border-radius-topleft: 10px;
-webkit-border-top-left-radius: 10px;
-webkit-border-top-right-radius: 10px;
}
   #infheader{
-moz-border-radius-bottomright: 10px;
-moz-border-radius-bottomleft: 10px;
-webkit-border-bottom-left-radius: 10px;
-webkit-border-bottom-right-radius: 10px;
}
.content{
margin: 0px;
background-color: #FFF;
text-align: left;
clear:both;
overflow: auto;
padding-top: 10px;
padding-right: 15px;
padding-bottom: 20px;
padding-left: 15px;
min-height:100%;
}
#content{
-moz-border-radius: 10px;
-webkit-border-radius: 10px;
}
.dark_brown{
background-color: #787272;
text-align: left;
color: #FFF;
overflow: auto;
padding-top: 10px;
padding-right: 15px;
padding-bottom: 20px;
padding-left: 15px;
}
.spaces {
height: 10px;
}
.light_brown {
color:#000000;
font-size: 12px;
clear:both;
padding: 15px;
overflow:auto;
}
#directory{
width:50%;
text-align:left;
float:left;
}
#copyright{
width:50%;
text-align:right;
float:right;
}
#bar {
-moz-border-radius: 10px;
-webkit-border-radius: 10px;
}

.bold_yellow, .bold_dark_yellow {
font-size: 20px;
font-style: normal;
line-height: normal;
font-weight: normal;
}
.bold_yellow{
color: #FC0;
}
.bold_dark_yellow{
color:#C29C01;
}
.navigation, .navigation2{
font-family:Trajan Pro, serif;
padding-top: 10px;
padding-right: 15px;
padding-bottom: 20px;
padding-left: 15px;
text-align: left;
text-decoration: none;
clear: both;
}
.navigation {
background-color: #FFF;
    font-family: "Comic Sans MS", cursive;
}
.navigation2 {
background-color: #787272;
color: #FFF;
font-family: "Comic Sans MS", cursive;
}
.navigation a:link{
color: #000;
text-decoration: none;
}
.navigation a:visited{
color: #000;
text-decoration: none;
}
.navigation a:hover{
color: #FF8000;
text-decoration: none;  
}
.navigation a:active{
color: #999;    
text-decoration: none;
}
.navigation2 a:link{
color: #FFF;
text-decoration: none;
}
.navigation2 a:visited{
color: #FFF;
text-decoration: none;
margin-right: 10px;
}
.navigation2 a:hover{
color: #FF8000;
text-decoration: none;  
}
.navigation2 a:active{
color: #333;
text-decoration: none;
}
.quick_link a:link{
color: #000;
text-decoration: none;
}
.quick_link a:visited{
color: #000;
text-decoration: none;
}
.quick_link a:hover{
color: #FF8000;
text-decoration: none;  
}
.quick_link a:active{
color: #999;    
text-decoration: none;
}
.green_text{
font-family: "Comic Sans MS", cursive;
color: #3C0;
}
.blue_text {
font-family: "Comic Sans MS", cursive;
color: #3FF;
} 
```

我将不胜感激您能提供任何帮助以找出为什么它不会在 chrome 中加载，它似乎在我测试过的所有其他浏览器中都没有任何问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T22:29:19.983

你为什么这么做？

```
html:before, #container:before {
content:"";
float:left;
height:100%;
margin-top:-999em;
} 
```

删除`html:before,`.

# .net - 没有空检查的字符串比较

> ID：12764395
> 
> 赞同：1
> 
> 时间：2012-10-06T22:20:22.437
> 
> 标签：.net, string, null

我记得很久以前在某处读过，要根据文字（或常量等）字符串检查 String 对象，跳过`null`检查的一种方法是：

```
string a;
// do something
if("some literal string".Equals(a))
    Console.WriteLine("equal"); 
```

是首选而不是

```
string a;
// do something
if(a!=null && a.Equals("some literal string"))
    Console.WriteLine("equal"); 
```

跳过检查`null`。但是现在找不到有关它的信息；您对前者有任何异议或疑虑吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T22:26:08.677

您可能正在考虑 Java，您*需要*使用Java`equals`来对字符串执行真值相等检查；`==`只会比较身份的参考。

然而，C# 具有运算符重载 - 和相等性`string`重载`==`。所以可以这样写：

```
if (text == "target value") 
```

`==`运算符在比较的`null`任一侧（或两侧）处理：

*   如果两边都为空，则结果为真
*   如果恰好一侧为空，则结果为假
*   否则，将比较字符串的序数相等性

但是请注意，只有在两个表达式的*编译时*类型都是 . 时才会使用重载`string`。例如，如果您有：

```
object o = new String("foo".ToCharArray());
if (o == "foo") 
```

...然后将比较*引用*而不是使用重载的运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T22:23:38.737

我更喜欢使用：

```
if (String.Equals("Value", a)) 
```

在比较两个都可以的变量时特别方便`null`- 使用这种静态方法也涵盖了这种情况。

# android - 自定义过滤器错误

> ID：12764400
> 
> 赞同：0
> 
> 时间：2012-10-06T22:21:00.570
> 
> 标签：android, filter, adapter

我正在尝试向 SimpleAdapter 添加自定义过滤器，但在 publishResults 方法中出现错误。

代码是

```
private class TextCharFilter extends Filter{

    @Override
    protected FilterResults performFiltering(CharSequence constraint) {

        // convert search string to lower case - the filtering is not case sensitive
        constraint = constraint.toString().toLowerCase();

        // define the result object
        FilterResults result = new FilterResults();
        // define a place to hole the items that pass filtering         
        List<HashMap<String, String>> filteredItems = new ArrayList<HashMap<String,String>>();

        // loop through the original list and any items that pass filtering are added to the "filtered" list
        if(constraint != null && constraint.toString().length() > 0) {

            for(int i = 0; i < items.size(); i++) {
                HashMap<String, String> tmp = items.get(i);
                String candidate = tmp.get("PT").toLowerCase();

                if(candidate.contains(constraint) ) {
                    filteredItems.add(tmp);
                }
            }

            // set the result to the "filtered" list.
            result.count = filteredItems.size();
            result.values = filteredItems;

        }    
        else
        {
            // if nothing to filter on -  then the result is the complete input set
            synchronized(this)
            {
             result.values = items;
             result.count = items.size();
            }
        }
        return result;
    }

    @SuppressWarnings("unchecked")
    @Override
    protected void publishResults(CharSequence constraint, FilterResults results) {

        itemsFiltered = (List<HashMap<String, String>>)results.values;

        notifyDataSetChanged();
        clear();

        for (int i = 0; i < itemsFiltered.size(); i++){
            add(itemsFiltered.get(i));
        }

        notifyDataSetInvalidated();
    }

} 
```

错误是找不到方法 clear() 和 add(itemsFiltered.get(i)) - 我哪里出错了？该代码基于已发布的示例。

# php - Smarty 使用脚本和换行符输 出 HTML

> ID：12764408
> 
> 赞同：0
> 
> 时间：2012-10-06T22:22:12.100
> 
> 标签：php, smarty, fuelphp

该死。在 Smarty 模板中输出一些变量时遇到问题。希望有人可以帮助我。

我正在使用 textarea 获取用户输入，它可以包含来自用户的任何内容（甚至是脚本标签）......

我将它分配给 Smarty 并打印变量，我将它写在模板中，如下所示

```
{$description|nl2br} 
```

但它按原样显示标签，而不是换行。

所以为了解决这个问题，我用

```
{$description|nl2br nofilter} 
```

它适用于标签，但用户也可以输入一些脚本。那些脚本（标签中的javascript）正在执行......

我想要一些类似的东西，我可以将新行字符转换为
只让
标签执行，其他标签应该安全打印。

这里的任何人都知道，如何使它与 Smarty 一起工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T22:28:04.893

听起来您正在寻找类似`{$description|escape:'htmlall'|nl2br}`.

但是您的描述听起来好像您已经`$escape_html`开启，这可能会使您难以获得您正在寻找的那种细粒度的控制。尝试使用和不使用`nofilter`，因为我不是 100% 确定你是如何设置的。

# c - 无法理解为什么 C 指针不起作用

> ID：12764411
> 
> 赞同：4
> 
> 时间：2012-10-06T22:22:51.000
> 
> 标签：c, pointers

如果这是一个简单的错误，请原谅我，但我现在只是在学习 C，我只是做了一个简单的程序来掌握指针。

我有一段简单的代码可以产生我期望的输出

```
int x = 4;
int *p;
p = &x;
printf("%d\n\n",*p);

//output is 4 as expected 
```

但是当我尝试对 char 数组做同样的事情时，即使我遵循相同的逻辑......

```
char x[] = "Hello, Stack Overflow!";
char *p[];
p = &x;
printf("%s\n\n",*p);

//this gives me an error when compiling as follows
//
// run.c:15: error: incompatible types when assigning to type ‘char *[1]’ from type ‘char (*)[23]’ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T22:38:18.123

要创建指向数组的指针，您必须明确说明，因为下标运算符优先于解引用运算符。

```
char x[] = "Hello, there";
char (*p)[sizeof(x)/sizeof(*x)] = &x; 
```

您在这里所说的是，首先取消引用*然后*应用下标`(*p)[i]`必须产生一个`char`. 正如其他人所说，您的代码声明了一个指向`char`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T22:27:18.417

多个错误。首先，`char *p[]`不声明指向数组的指针（如您所想的那样）-而是声明了一个 char 指针数组。

其次，因为`x`是一个数组，`&x`将评估为相同的数值`x`（由于数组不能按值传递，只能通过指针传递，它们在传递给函数时会衰减为指针）。你需要做的是

```
const char *x = "Hello SO!";
const char **p = &x;
printf("%s\n", *p); 
```

这是一个简单的解决方案（使字符串文字，即`char`s 的数组，衰减为指针）。还有另一种解决方案需要更多思考。从编译器错误信息中，可以看到类型`&x`为`char (*)[]`. 所以你必须在这里声明的是一个指向数组的指针：

```
char x[] = "Hello SO!"; // x is a char array
char (*p)[] = &x; // p is a pointer to a char array
printf("%s\n", *p); // printf accesses *p, so it prints the underlying char array - correct! 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T22:34:07.273

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main() {

    char x[] = "Hello, Stack Overflow!";
    char *p;
    int len = strlen(x);

    p = malloc(len * sizeof(char) +1);
    strcpy(p,x);
    printf("%s\n\n",p);

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T22:24:45.727

`char *p[]`表示 p 是字符指针数组，而不是指向数组的指针。您应该保留 p `char *p`，然后它会起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-06T22:25:38.440

更改`char *p[]`为`char p[]`或`char *p`。`char *p[]`等于`char **p`。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-06T22:27:51.460

`x`这里是一个本身的指针（指向数组第一个元素的指针）。如果你只放`char *p`and `p = x`，它应该可以工作。

# c++ - 如何在文件夹中组织源代码文件（.cpp & hpp）

> ID：12764412
> 
> 赞同：1
> 
> 时间：2012-10-06T22:23:07.503
> 
> 标签：c++, cascade

我是一名 Java 开发人员和 C++ 初学者，我想在文件夹中组织源代码文件（.cpp 和 hpp）文件，作为 JAVA 中的包

这是我的 main.cpp

```
// Navigation pane project template
#include "FriendFinderOnBBM.hpp"
#include <bb/cascades/Application>

#include <QLocale>
#include <QTranslator>

using namespace bb::cascades;

int main(int argc, char **argv)
{
    // this is where the server is started etc
    Application app(argc, argv);

    // localization support
    QTranslator translator;
    QString locale_string = QLocale().name();
    QString filename = QString( "FriendFinderOnBBM_%1" ).arg( locale_string );
    if (translator.load(filename, "app/native/qm")) {
        app.installTranslator( &translator );
    }

    // create the application pane object to init UI etc.
    new FriendFinderOnBBM(&app);
    // we complete the transaction started in the app constructor and start the client event   loop here
    return Application::exec();
    // when loop is exited the Application deletes the scene which deletes all its children (per   qt rules for children)
} 
```

我将 cpp 和 hpp 放入名为 presentation 的文件夹中，这里是 FriendFinderOnBBM.cpp

```
// Navigation pane project template
#include "FriendFinderOnBBM.hpp"

#include <bb/cascades/Application>
#include <bb/cascades/QmlDocument>
#include <bb/cascades/AbstractPane>

using namespace bb::cascades;

FriendFinderOnBBM::FriendFinderOnBBM(bb::cascades::Application *app)
    : QObject(app)
{
    // create scene document from main.qml asset
    // set parent to created document to ensure it exists for the whole application lifetime
    QmlDocument *qml = QmlDocument::create("asset:///main.qml").parent(this);

    // create root object for the UI
    AbstractPane *root = qml->createRootObject<AbstractPane>();
    // set created root object as a scene
    app->setScene(root);
} 
```

这是存在于演示文件夹中的 FriendFinderOnBBM.hpp

```
// Navigation pane project template
#ifndef FriendFinderOnBBM_HPP_
#define FriendFinderOnBBM_HPP_

#include <QObject>

namespace bb { namespace cascades { class Application; }}

/*!
 * @brief Application pane object
 *
 *Use this object to create and init app UI, to create context objects, to register the new meta types etc.
 */
class FriendFinderOnBBM : public QObject
{
    Q_OBJECT
public:
    FriendFinderOnBBM(bb::cascades::Application *app);
    virtual ~FriendFinderOnBBM() {}
};

#endif /* FriendFinderOnBBM_HPP_ */ 
```

这是Makefile

```
QMAKE_TARGET  = FriendFinderOnBBM
QMAKE         = $(QNX_HOST)/usr/bin/qmake
TARGET        = $(QMAKE_TARGET)

all: Makefile $(QMAKE_TARGET)

clean:
$(MAKE) -C ./arm -f Makefile distclean
$(MAKE) -C ./x86 -f Makefile distclean

Makefile: FORCE
$(QMAKE) -spec unsupported/blackberry-armv7le-qcc -o arm/Makefile $(QMAKE_TARGET).pro         CONFIG+=device
$(QMAKE) -spec unsupported/blackberry-x86-qcc -o x86/Makefile $(QMAKE_TARGET).pro     CONFIG+=simulator
$(MAKE) -C ./translations -f Makefile update release

FORCE:

$(QMAKE_TARGET): device simulator

device:
$(MAKE) -C ./arm -f Makefile all

Device-Debug: Makefile
$(MAKE) -C ./arm -f Makefile debug

Device-Release: Makefile
$(MAKE) -C ./arm -f Makefile release

simulator:
$(MAKE) -C ./x86 -f Makefile all

Simulator-Debug: Makefile
$(MAKE) -C ./x86 -f Makefile debug 
```

**现在我的问题：**编译器找不到我放入文件夹“presentation”的两个源代码

谢谢

# r - 在 R 中搜索文档

> ID：12764414
> 
> 赞同：-7
> 
> 时间：2012-10-06T22:23:28.377
> 
> 标签：r

我想创建一个从 1 到 10 间隔 0.5 的向量。所以 1 1.5 2 2.5 .... 9.5 10\. 我如何在 R 中做到这一点？

现在，如果我想创建一个从 1 到 10 的向量，等距，长度为 20，我该怎么做？

最后，是否有更简单的方法来搜索 R 中的文档，例如键入“等距”或“固定长度的向量”以找出可用的代码？到目前为止，CRAN 的文档是为那些首先知道该功能并可以轻松搜索它的人准备的。搜索引擎不允许在文档中搜索可能导致相关功能的单词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T22:59:31.737

我只是在演示已经建议的内容：使用`seq`.

```
seq(from = 1, to = 10, by = 0.5)
#  [1]  1.0  1.5  2.0  2.5  3.0  3.5  4.0  4.5  5.0  5.5  6.0  6.5  7.0  7.5  8.0
# [16]  8.5  9.0  9.5 10.0

seq(from = 1, to = 10, length.out = 20)
#  [1]  1.000000  1.473684  1.947368  2.421053  2.894737  3.368421  3.842105
#  [8]  4.315789  4.789474  5.263158  5.736842  6.210526  6.684211  7.157895
# [15]  7.631579  8.105263  8.578947  9.052632  9.526316 10.000000 
```

是的，这`??sequence`是您可以找到的一种方式`seq`。当您没有正确的关键字时，像这里这样的论坛或地方总是一个好地方。

# colors - VS2012 文本编辑器颜色与 Windows 域用户

> ID：12764424
> 
> 赞同：0
> 
> 时间：2012-10-06T22:25:17.817
> 
> 标签：colors, themes, visual-studio-2012, text-editor

我的文本编辑器有问题。我看到所有文本颜色都正确，但“类词”是黑色而不是浅蓝色。

我试过重置所有设置，在深色和浅色主题之间切换，导入正确的工作设置，但没有成功。我也试过修复VS安装。

我使用管理员域用户登录。当我使用本地用户登录时，颜色没有问题。

我正在使用 VS2012 RTM 和 Windows8RTM。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:37:21.647

[在这个讨论](https://stackoverflow.com/questions/10970305/how-can-i-get-user-type-c-sharp-syntax-highlighting-working-again-in-vs-2012-rc/12792004#12792004)中可以找到多个建议。

# xcode - Xcode：根据 UITextField 值启用按钮

> ID：12764426
> 
> 赞同：0
> 
> 时间：2012-10-06T22:25:30.673
> 
> 标签：xcode, uibutton, uitextfield

使用两个 UITextFields 和一个按钮。我需要从禁用按钮开始，但如果两个文本字段中的值在一定范围内，则启用它。一旦它们是，按钮启用并且用户可以继续。

我试过使用 button.isEnabled，但它没有正确更新。有什么帮助吗？

搜索时，我在这里找到了这篇文章：http: [//blog.tarams.com/](http://blog.tarams.com/?p=339) ?p=339但我无法让它工作:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T22:29:27.020

使用每次按键时调用的 UITextField shouldChangeCharactersInRange 的委托方法，这样您就可以检查字段并启用按钮。

# .htaccess - 使用 htaccess 在 URL 中添加斜杠

> ID：12764430
> 
> 赞同：0
> 
> 时间：2012-10-06T22:25:49.057
> 
> 标签：.htaccess

我正在尝试使用 htaccess 重写我的 URL。这是我的 htaccess 中的代码：

```
RewriteRule ^post/([^/.]+)?/([^/.]+)?$
post.php?pst=$1&view=$2%{QUERY_STRING} 
```

一切正常，除了这段代码没有在重写的 URL 末尾添加斜杠。我该如何添加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T22:33:22.757

我认为您无法`%{QUERY_STRING}`在 RewriteRule 中访问；只有一个重写条件。我认为您可能需要执行以下操作：

```
 RewriteCond %{QUERY_STRING} ^(.*)$
  RewriteRule ^post/([^/.]+)?/([^/.]+)?$ post.php?pst=$1&view=$2%1/ 
```

请参阅：[http ://wiki.apache.org/httpd/RewriteQueryString](http://wiki.apache.org/httpd/RewriteQueryString)

# cakephp - 如何在元素内获取控制器视图？

> ID：12764433
> 
> 赞同：0
> 
> 时间：2012-10-06T22:25:55.873
> 
> 标签：cakephp

我创建了一个具有文本字段（与 Facebook 相同的状态栏）的元素，我在主页/显示视图中进行了扩展。

元素代码：

```
<?php 
echo $this->Html->css('notes'); 
echo $this->Html->script(array('jquery','jquery.elastic','notes'));
?>
<div class="notescontainer">
<div class="share">Share:</div>
<div class="notes">Notes</div>
<div class="loading"></div>
<div class="img_top"></div>
<div class="text_status">

<?php 
echo $this->form->create('Note', array('action' => 'notes'));
echo $this->form->input('notes',array('class' => 'notesbar', 'label'=>'', 'placeholder' => 'Write down you notes ...'));
?>
</div>
<div class="button_outside_border" id="share">
<div class="button_inside_border">

<?php 
echo $this->form->submit('Share',array('alt' => 'Add', 'class' => 'sharebutton'));
echo $this->form->end();
?>
</div>
</div>
<div class="clear"></div>
<div class="load_status_out"></div>
</div> 
```

我希望当用户共享状态时，它应该重新出现在显示/主页的同一页面上，为此我创建了一个控制器来检索用户输入的状态。

控制器：

```
<?php public function notes()
{
$this->set('allnotes', $this->Note->find('all'));
}?> 
```

控制器视图：

```
<?php 

foreach($allnotes as $viewnotes):
{

    echo $viewnotes['Note']['notes']; 
    echo "<br>";
}
endforeach;
?> 
```

现在我希望这个控制器视图显示在主页/显示视图上。有什么办法可以在那个元素中扩展它？我不想将它直接添加到我的主页/显示视图中，因为它已经完全加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T09:51:23.517

您可以使用[requestAction()](http://book.cakephp.org/2.0/en/controllers.html#Controller%3a%3arequestAction)来完成此操作，但根据我的经验，如果您需要，它是错误的并且是设计失败的标志。或者，您可以将所有视图转换为可以以任意方式相互嵌入的元素。然后你可以在控制器中调用一些共享代码来填充所有需要的模型。

# sql - ruby rails activerecord 嵌套选择

> ID：12764447
> 
> 赞同：1
> 
> 时间：2012-10-06T22:28:06.007
> 
> 标签：sql, ruby-on-rails, ruby, activerecord, nested

我有三个表/模型。

```
Recordings (id)
has_many :hits
has_many :tags, :through => :hits

Hits (id, recording_id, tag_id)
belongs_to :recordings
belongs_to :tags

Tags (id)
has_many :hits
has_many :recordings, :through => :hits 
```

我需要找到所有具有作为参数传入的所有标签的录音。例如，查找 tag.id == 5、tag.id == 6 和 tag.id ==7 的所有记录。（虽然，可能是 2 个标签 ID，或 2000 个标签 ID）

我试图通过对数据库的查询来做到这一点，以便它快速而不是带回一个大集合并用 ruby​​ 减少它。

我认为 SQL 查询会像这样：

```
SELECT * FROM recordings 
WHERE id IN (
  SELECT recording_id FROM hits 
  WHERE recording_id IN (
    SELECT recording_id FROM hits 
    WHERE recording_id IN (
      SELECT recording_id from hits WHERE recording_id = 5
    )
    AND tag_id = '6'
  ) 
  AND tag_id == '7'
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:09:12.610

```
Recording.joins(:tags).where(:tags => { :id => [5,6,7] }) 
```

我认为这应该可行（不过，我不确定它是否会在`:through`协会中生效）。试试看。

# html - 你好。如何在 html5 中播放 2 个音频文件？

> ID：12764458
> 
> 赞同：-2
> 
> 时间：2012-10-06T22:29:48.780
> 
> 标签：html, audio

这是我的代码

```
<audio preload='false' id='player'>
            <source src='https://dl-web.dropbox.com/get/mp3/player.wav?w=7e152d8e' />
        </audio>
        <audio preload='false' id='ai'>
            <source 'https://dl-web.dropbox.com/get/mp3/ai.wav?w=431eb010'/>
        </audio> 
```

js

```
playerWav = document.getElementById('player', false);
    aiWav = document.getElementById('ai'); 
```

...

```
 if(contact_player(ball, player)){
        playerWav.play(); 
```

...

```
if(contact_ai(ball, ai)){
            playerWav.play(); 
```

playerWav.play() 不玩（需要帮助 plees

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:34:55.690

`wav`HTML5 播放器不正式支持文件，并且没有压缩，因此比特率不高。使用官方支持的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T23:23:12.890

几个可能的问题的总结：

1.  第二个源标签中没有`src=`。
2.  两个源标签中都没有指定类型。（尝试`type="audio/wav"`。）
3.  音频文件的链接已损坏，尽管这可能是因为它们是指向您的私人 Dropbox 的链接并且需要您登录。

# java - 无法在 Eclipse 中导出 Android 应用程序

> ID：12764459
> 
> 赞同：3
> 
> 时间：2012-10-06T22:29:50.940
> 
> 标签：java, android, eclipse, andengine

我在 Eclipse 中遇到了一些奇怪的行为。我正在尝试导出我的 Android 应用程序，这是一款使用开源游戏引擎 AndEngine 编写的游戏。不确定这是否相关。

无论如何，我的项目或Android的库依赖项中没有错误。多年来，我一直在使用调试版本在手机上运行该应用程序。现在我想导出一个签名的应用程序，它不起作用！（它确实曾经）。

我右键单击我的项目，单击 Android 工具 > 导出签名的应用程序，*当*我这样做时，出现两个错误，说，

> 在项目“AndEngine”中找不到任何 .class 文件，因此无法运行任何类文件基础检查。项目需要先建吗？
> 
> 在项目“AndEnginePhysicsBox2DExtension”中找不到 .class 文件，因此无法运行任何类文件基础检查。项目需要先建吗？

我该怎么解决这个问题？我做了一个 Project > Clean，打开和关闭 Eclipse，打开和关闭各个项目。再一次 - 在我去导出应用程序之前，这个错误是不存在的！有没有搞错！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T23:57:54.410

好的，我想我明白了。不确定“真正的”问题，但我暂时的解决方法是右键单击左侧文件树中的我的项目，然后单击“属性”。我在出现的对话框中选择了“Android Lint Preferences”，然后点击“Ignore All”。现在我可以构建没有错误。

虽然这是一种解决方法，但我对完全禁用该功能并不感到兴奋。我想知道我可以专门禁用哪个 Lint 首选项。（坦率地说，我什至不知道 lint 是什么）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T17:28:42.227

我解决了这个问题，在导出之前关闭了 Eclipse 中的**自动构建。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T22:37:14.317

这些项目是否设置为库？

打开项目-> 属性。点击左侧的安卓。向下滚动并确保在库下选中“是库”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-17T16:17:20.487

可能只是添加：

```
<issue id="LintError" severity="ignore" /> 
```

到您的**lint.xml**配置文件。
在**eclipse**中可能**只是将这个*(LintError)*错误设置为 ignore**。

# assembly - 在 Nasm 汇编程序中检查整数余数的最简单方法是什么？

> ID：12764460
> 
> 赞同：0
> 
> 时间：2012-10-06T22:29:57.197
> 
> 标签：assembly, x86, nasm, modulo, modulus

例如：

```
int x = 35;
if( x%2==1) { //do something } 
```

我只想检查模值而不将结果分配给`x`.

假设 value 是 in `eax`，所以我可以使用`DIV`指令，然后将原始值放回`eax`etc.. 但这似乎效率低下。你能推荐一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T22:31:45.707

如果低位打开，则不能被 2 整除：

```
test   x, 1
jne    somewhere_when_odd 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T11:26:59.817

`al`根据/ `ax`/ `eax`/中的值的模 2 进行分支`rax`：

```
 test al,1
    jnz is_odd

is_even:
    ; do something for even numbers.

is_odd:
    ; do something for odd numbers. 
```

但是，如果您想要的只是模值，则不需要任何分支。

```
test al,1
setnz bl   ; modulo 2 of al/ax/eax/rax is now in bl. 
```

# php - 违反完整性约束：1048 DOCTRINE

> ID：12764461
> 
> 赞同：2
> 
> 时间：2012-10-06T22:30:01.680
> 
> 标签：php, mysql, doctrine-orm, doctrine, mysql-error-1048

我正在做一个从订单到产品的多对多单向关系，一个订单可以有很多产品，一个产品可以有很多订单。

查看我的代码：

```
/**
 * @ManyToMany(targetEntity="Product")
 * @JoinTable(name="dc_order_products",
 *      joinColumns={@JoinColumn(name="order_id", referencedColumnName="id")},
 *      inverseJoinColumns={
 *          @JoinColumn(name="product_id", referencedColumnName="id"),
 *          @JoinColumn(name="product_price", referencedColumnName="product_price")     
 *      })
 **/
protected $order_products; 
```

我在所有谷歌中都没有找到如何在 inverseJoinColumns 中使用多个 @JoinColumns，所以我只是复制了第一个并用逗号分隔。

问题是，当我使用以下代码运行项目时：

```
$p = new \Entities\Product(get_date(), 'Product Name', 'Description', 39, 85, 0, 0, 1);
$em->persist($p);
$em->flush();

$o = new \Entities\Order($u->getUserId(), get_date(), 1, 150);

$o->addOrderProduct($p);

$em->persist($o);
$em->flush(); 
```

它给了我：

> 违反完整性约束：1048 列“product_price”不能为空

但是价格是确定的，我在产品对象中做了一个 print_r，它就在那里。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:09:20.057

我已经找到了解决方案，刚刚打开 Doctrine FAQ 就可以了：)

看： [http ://docs.doctrine-project.org/en/latest/tutorials/composite-primary-keys.html](http://docs.doctrine-project.org/en/latest/tutorials/composite-primary-keys.html)

我需要创建另一个名为 OrderProducts 的实体，其中包含我所有具有复合主键关系的订单产品。

知道了！谢谢。

# python - 从折线创建多边形

> ID：12764463
> 
> 赞同：0
> 
> 时间：2012-10-06T22:30:37.110
> 
> 标签：python, open-source, polygon, polyline

我有一个道路网络 shapefile 作为折线，我想将其转换为多边形层，只要网络形成“洞”或自行闭合。问题是一个洞可以由多个道路特征构成。（即三个连接道路形成一个洞）。这意味着我不能只说“如果第一个特征顶点等于多边形的最后一个顶点”。

我只能访问开源模块（PySAL、shapely 等不是 ArcPy）

有任何想法吗？卡在这个上太久了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T19:29:13.123

我认为你可以遍历这些点，

*   并且在每个点上与迄今为止检查的所有点进行比较。
*   *   如果有匹配，关闭一个多边形。

不确定你是否会比 O(n^2) 好得多。

# java - 一些 @Override 在 Oracle Java 中显示错误，但在 OpenJDK 中没有

> ID：12764473
> 
> 赞同：1
> 
> 时间：2012-10-06T22:33:39.353
> 
> 标签：java, android

在 Ubuntu Linux 中创建并在 OpenJDK 6 下编译的存储库中，在实现 LocationListener 和 SensorListener 时，`@Override`在继承的方法上方添加标记可以正常编译。

但是，当将 repo 克隆到使用 Oracle Java 的 Windows 系统时，其中一些会`@Override`生成错误。下面的例子： `The method onAccuracyChanged(Sensor, int) of type ExpeditionActivity must override a superclass method`

似乎仅当您在`@Override`从实现接口继承的方法之上添加时才会发生此错误。在从基类继承的方法之上添加`@Override`不会产生错误。这实际上是有道理的，因为您实际上是在覆盖原始方法的逻辑。

`@Override`那么，写上面继承的接口方法是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T22:51:34.447

`@Override`仅限于 JDK 5 中的基类方法。

JDK 6 引入了应用于`@Override`接口方法的能力。

Eclipse 必须设置为使用 JDK6/JDK6 语言级别才能`@Override`在接口方法上使用。

要回答您的问题，“是的，如果您在 JDK 6+ 下编译”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T22:43:42.717

我有时会明白。不太清楚它的原因是什么。

我找到了一些修复它的方法。也许其中一些对你有用

*   有时它有助于简单地删除方法声明并重写它。
*   确保参数和返回值正确。例如，在 Andrdid 中，当你扩展时，`AsyncTask`你给扩展类 3 参数，基于这些参数你需要用正确的参数和返回值覆盖方法。
*   如果接口/基类需要该方法，请尝试删除该方法。接口/基类下会出现错误。将鼠标光标放在它上面并选择`Add Unimplemented methods`它会使 eclipse 添加这些方法，您将不得不重新填充主体，但错误会消失。

我确实相信这是一个 Eclipse 错误，因为删除`@Override`注释不会影响代码，代码可以正确编译和运行。

祝你好运

# matlab - 绘制有向网络的度分布

> ID：12764474
> 
> 赞同：0
> 
> 时间：2012-10-06T22:33:57.847
> 
> 标签：matlab, social-networking

我有一个从社交网站爬取的边缘和节点的数据集。如何使用电子表格中的数据绘制度数分布？边缘是定向的。我是 MATLAB 初学者。请帮忙。

我创建了`adj`如下邻接矩阵：

```
clear all; 
disp('Processing Edge-List File');
A = xlsread('edges.csv');
dim = max(max(A));
[E_Size, junk] = size(A); 
sprintf('The dataset has %d nodes and %d edges',dim, E_Size);
disp('Filling Adjanceny Matrix');
adj = sparse(A(:,1), A(:,2), ones(E_Size,1), dim, dim, E_Size);
if(adj==adj') disp('Symmetric Adjacency Matrix - Undirected Graph') ;
else disp('Assymmetric Adjacency Matrix - Directed Graph'); 
```

然后我尝试了`surf(adj)`。它给了我一个空图。我创建邻接矩阵的方式有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T22:56:06.590

我假设你想绘制这样的[东西](http://en.wikipedia.org/wiki/Degree_distribution)： ![在此处输入图像描述](../Images/54881660172d0dd869634d46591c616f.png)

一旦确定了每个节点的入度和出度，您需要将其存储在矩阵*A*中，这样*A(i,j)表示具有入度**i*和出度*j*的节点数。

然后您可以使用 显示此信息[`surf(A)`](http://www.mathworks.com/help/matlab/ref/surf.html)。`surf`绘制插值的 3D 曲面，其中矩阵中每个元素的强度是曲面的*Z*坐标，列和行索引是*X、Y*值。

# gwt - gwt - RequestFactory 使用，返回的 EntityProxy 中缺少内容

> ID：12764480
> 
> 赞同：2
> 
> 时间：2012-10-06T22:34:47.817
> 
> 标签：gwt

我的环境：
- RequestFactory（GWT 2.5rc2，在 2.5rc1 和 2.4 之前 - 对问题没有影响）
- Hibernate
- Spring 的 OpenSessionInView 过滤器（每个请求的会话）

我想保留一个基本上具有如下结构的 EntityProxy：

```
EntityProxy_A
  ... other properties ...
  --> Set<EntityProxy_B setEntProxB;
    -->  EntityProxy_C entProxC;
    -->  EntityProxy_D entProxC; 
```

我的请求方法在与我的域类（定位器概念）分开的类中实现。因此我不使用InstanceRequest persist()。

**解决方案/问题 1 - 以下方法是否有效：**

我有请求方法，例如

```
Request<EntityProxy_A> save(EntityProxy_A);  
Request<EntityProxy_A> createNew(); 
```

我使用 createNew() 将 EntityProxy_A 的实例（使用有关“...其他属性...”的值进行初始化，并已保存在数据库中）发送给客户端。重要的是要提到此时没有创建任何 EntityProxy_B 集。

在 createNew() 的 OnSuccess 我做

```
 public void onSuccess(EntityProxy_A response) {
   MyRequest request = myRequestFactory.getMyRequest();
   EntityProxy_A editableA = request.edit(response);
   ... 
```

然后我用“请求”创建我的 EntityProxy_B、C、D 并组装所有东西（如上面列出的）。

现在我打电话

```
request.save(editableA)
       .with("setEntProxB",
             "setEntProxB.entProxC",
             "setEntProxB.entProxD")
       .fire(Receiver<EntityProxy_A>() {
          @Override
          public void onSuccess(EntityProxy_A response) {
             .......
          } 
```

参数 Entity_A 到达我在服务器上的请求方法 impl 及其所有子节点，然后被持久化，一切都显示在数据库中。

如果我在休眠会话上调用强制刷新（请记住我使用 OpenSessionInView，所以通常在我离开请求方法 impl 后所有内容都会保留）我什至可以看到新创建/持久的 EntityProxy_B、C、D 实例的所有 ID。

当我查看返回给客户端的 JSON 时，我什至可以找到存储为 entProxC 属性的数据，因此我假设对象图已正确构建并发送到客户端。

但是现在在“保存”调用的 OnSuccess 中发生的情况如下

```
 public void onSuccess(EntityProxy_A response) {
   MyRequest request = myRequestFactory.getMyRequest();
   EntityProxy_A editableA = request.edit(response);
   ... 
```

在调用“编辑”时，我收到一个错误
“...错误 Unfrozen bean with null RequestContext ...”
，这是因为 EntityProxy_C 和 EntityProxy_D（不是 Set 中的 EntityProxy_B！）返回为“frozen = false”，当然就是这样点也没有请求上下文。当我查看 JSON 时，我看到了 entProxC: {} （那里的一切都是空的 - 没有有效负载）。

我发现[Link](http://code.google.com/p/gwt-examples/source/browse/trunk_2012/DemoGwtEditor/src/com/gonevertical/client/views/peopleedit/editor/EditPersonWorkFlow.java?r=3185)中记录的正是这种情况，但我在代码中看不到解决方案......只是提到的错误。

现在我的问题 - 我应该能够像那样使用 RequestFactory 吗？

**解决方案/问题 2 - 我现在的解决方案，可以像这样使用 requestfactory：**

我现在有请求方法，例如

```
Request<Void> save(EntityProxy_A);  
Request<EntityProxy_A> createNew(); 
```

像第一种方法一样调用 createNew() 。现在我也有一个实例变量

```
 EntityProxy_A myWorkA;
 ....
 public void onSuccess(EntityProxy_A response) {
   MyRequest request = myRequestFactory.getMyRequest();
   myWorkA = request.edit(response);
   ... 
```

然后我对我的“myWorkA”进行编辑，最后。

```
request.save(myWorkA)
       .fire(Receiver<Void>() {
          @Override
          public void onSuccess(Void response) {
             .....
          } 
```

在这里，我没有从服务器返回 EntityProxy_A - 无论如何，我想为什么要将所有内容传输回客户端（除了来自持久的 EntityProxy_B、C、D 的新创建的 ID）。因此，当我需要在客户端有一个指向特定 EntityProxy 的指针时，我现在使用 EntityProxy.stableId() ——这可能会更好。

在 OnSuccess 我做

```
 public void onSuccess(Void response) {
   MyRequest request = myRequestFactory.getMyRequest();
   myWorkA = request.edit(myWorkA);
   ... 
```

我已经有了我的“myWorkA”，所以为什么不在新的 RequestContext 中使其可编辑并继续编辑并保存并保存并保存...

这对我来说非常有效......我的问题......这是一件好事吗？

当我重新保存我的“myWorkA”时，其中当然还有 NULL 实体 ID，因为我从未从服务器加载最新版本 - 我没有问题，相应的实体在服务器上更新，而不是一遍又一遍地创建（由于 NULL ID 可以猜到）。

如果有人可以澄清一下，为什么解决方案 1 不起作用（或预计不会起作用）以及是否可以像解决方案 2 中所示那样工作。

我剩下的唯一其他方法是有类似的东西：

```
Request<Void> save(EntityProxy_A);  
Request<EntityProxy_A> load(Long entProxId);  
Request<EntityProxy_A> createNew(); 
```

但我不喜欢那样......交通......

无论如何，现在 - 如果正确使用 RequestFactory - 到目前为止，我更喜欢解决方案 2。

期待您的回答。

问候，安德烈亚斯。

# wcf - 单例 WCF 服务的组合根

> ID：12764482
> 
> 赞同：1
> 
> 时间：2012-10-06T22:34:59.540
> 
> 标签：wcf, dependency-injection, inversion-of-control, castle-windsor

我通常使用使用[单实例上下文模式](http://msdn.microsoft.com/en-us/library/system.servicemodel.instancecontextmode.aspx)的 WCF 服务。服务契约和行为也在 WCF 服务库中。

如果该服务作为 Windows 服务或 Web 服务托管，它们将获得自己的引用 WCF 服务库的项目。我喜欢保持这个 WCF 服务库运行（用于简单地使用 WCF 测试客户端进行调试），但是当我尝试通过行为类解决依赖关系时，它需要[太多的努力。](https://stackoverflow.com/questions/10058761/can-i-use-wcffacility-with-wcf-test-client)

使用 Castle Windsor，我还必须对[Castle Windsor WCF Integration Facility](http://docs.castleproject.org/Windsor.WCF-Facility-Registration.ashx)进行额外配置。我只是想在服务启动时解决对象图，我觉得它不应该这么难。

我想，因为行为实例只创建一次，我应该能够将它用作组合根。我可以使用单个对象提供所有依赖项并从容器中解析它，如下所示：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
public class SampleService : ISampleService, IDisposable
{
    private readonly IServiceManager _serviceManager;
    private readonly IWindsorContainer _container;

    public SampleService()
    {
        _container = new WindsorContainer();
        _container.Install(new ServiceInstaller());

        _serviceManager = _container.Resolve<IServiceManager>();
    }

    public string GetMessage()
    {
        return _serviceManager.GetMessage();
    }

    public void Dispose()
    {
        _container.Dispose();
    }
} 
```

我知道明确要求容器解决依赖关系是个坏主意，但这让我免于很多麻烦。我可以保留默认的 WCF 配置，我可以运行 WCF 服务库进行调试，因为我现在有一个默认的构造函数。我也不必使用上次检查时缺少文档的 Castle Windsor WCF 集成设施。

我猜 Castle Windsor WCF 集成设施提供了更多功能，但我只想解决依赖关系。这种方法是否可能会导致一些问题？我还没有看到有人这样做，所以我想知道这是否合法使用。

# eclipse - 如何使用 E4 编程模型创建视图作为 Eclipse 4.2 或更高版本的插件？

> ID：12764483
> 
> 赞同：0
> 
> 时间：2012-10-06T22:35:14.307
> 
> 标签：eclipse, e4

大多数现有的 Eclipse 插件都使用 的扩展注册表和子类`ViewPart`，再加上兼容层。因此，编写一个新视图（尤其是使用 PDE 中的新插件向导）会生成如下所示的插件：

```
<plugin>
  <extension point="org.eclipse.ui.views">
    <view name="Example View" class="org.example.ExampleView"/>
  </extension>
</plugin>

public class ExampleView extends ViewPart {
  public void createPartControl(Composite parent) {
    ...
  }
} 
```

是否可以利用 E4 编程模型来创建如下视图：

```
public class Example {
  @Inject
  public Example(Composite parent) {
    ...
  }
} 
```

并将其连接到现有的 Eclipse 4.2 实例中，以便它显示在“显示视图”菜单中？如果是这样，它是如何以声明方式连接的（因为它`LegacyIDE.e4xmi`是不可变的并且无法添加）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T00:50:46.847

查看我为 e4 模型编辑器编写的代码 (http://git.eclipse.org/c/e4/org.eclipse.e4.tools.git/tree/bundles/org.eclipse.e4.tools。 emf.editor3x/src/org/eclipse/e4/tools/emf/editor3x）。

我在[http://git.eclipse.org/c/e4/org.eclipse.e4.tools.git/tree/bundles/org.eclipse.e4.tools.compat](http://git.eclipse.org/c/e4/org.eclipse.e4.tools.git/tree/bundles/org.eclipse.e4.tools.compat)为 4.3 提供了一组包装器，我们计划直接支持。

# java - 使用字符串退出 do while 循环

> ID：12764485
> 
> 赞同：0
> 
> 时间：2012-10-06T22:35:43.170
> 
> 标签：java, loops, do-while

好的。

这是我的问题。我在做骰子游戏时遇到了一些困难。我遇到的问题是使用 do while 循环使其退出。这是我的代码。我会进一步解释我的意思

```
import java.util.Scanner;

public class Dice
{
 public static void main (String[] args)
 {
    int diceGuess;
    int rollNum, roll1, roll2, roll3;
    String playAgain = "yes";

    Scanner sc = new Scanner(System.in);

     // Create two separate dice objects to create a pair of dice
            Roll die1 = new Roll();
            Roll die2 = new Roll();

    // get from the user the number of dice rolls
            System.out.print ("Please enter a number between 2 and 12 to begin: ");
            diceGuess = sc.nextInt();

    do
    {       
        // loop to show rolls
        for (rollNum = 1; rollNum <=3; rollNum++)
          {
          System.out.println("**********Roll #: " + rollNum + " ************");
            roll1 = die1.roll();
            roll2 = die2.roll();

                //if statement to display you win if you win, and to make the loop break.
                if(diceGuess==roll1+roll2)  
                    {
                        System.out.println("You win!");
                        rollNum = 4;
                    }

                if(rollNum == 3)
                    {
                        System.out.println("You lose.\n");
                        System.out.println("Would you like to play again?");
                        playAgain = sc.nextLine();
                        rollNum ++;
                    }
            }           
        }while(playAgain == "yes");

} 
```

}

这是我的实用程序类。我希望它询问用户是否要再次播放，然后如果用户输入否，我希望它退出。我相信这只是我的一个小误会。
非常感谢stackoverflow。

这是另一类

```
//Justin Le
//Dice class

import java.util.Random;

public class Roll
{
//variables used in class
private Random randomRoll = new Random();
private int roll;
boolean playAgain = false;

//constructor
public Roll()
{
    roll = 0;
}

//method named roll to return roll number and inside, calls a method to display the roll.
public int roll()
{
    roll = randomRoll.nextInt(6) + 1;
    showRoll(roll);  //accesses showRoll to output in driver class.
    return roll;

}

public boolean test()
{
    playAgain = !playAgain;
    return playAgain;
}

//displays picture of dice roll
private void showRoll(int r)
    {
        switch(r)
            {
            case 1:
                System.out.println("One: \n" +
                                         " \n  "   +
                                         "  *  \n" +
                                         " \n  ");
            break;

            case 2:
                System.out.println("Two: \n" +
                                         "*    \n" +
                                         "     \n" +
                                         "    *\n");
            break;

            case 3:
                System.out.println("Three:\n" +
                                         "*    \n" +
                                         "  *  \n" +
                                     "    *\n");
            break;

            case 4:
                System.out.println("Four:\n" +
                                        "*   *\n" +
                                     "     \n" +
                                     "*   *\n");
            break;

            case 5:
                System.out.println("Five:\n" +
                                        "*   *\n" +
                                         "  *  \n" +
                                         "*   *\n");
            break;

            case 6:
                System.out.println("Six: \n" +
                                        "*   *\n" +
                                         "*   *\n" +
                                         "*   *\n");
            break;
            default:
                System.out.println("error\n");
    }

} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T22:36:53.887

在你的时候，使用`equals()`方法来比较字符串.. : -

```
playAgain.equals("yes") 
```

请参阅[这篇出色的帖子](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)，了解使用`equals()`和`==`..的比较差异

**在您的第一个代码中： -**

```
if(rollNum == 3)
{
    System.out.println("You lose.\n");
    System.out.println("Would you like to play again?");
    //playAgain = sc.nextLine();

    // Change your nextLine() to next()
    playAgain = sc.next();
    rollNum ++;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T22:36:43.387

改变

```
playAgain == "yes" 
```

到

```
"yes".equals(playAgain) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T22:36:47.943

使用 while(plyaAgain.equals("yes"));

请点击此链接了解有关字符串比较的详细信息： [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T22:40:25.703

改变这个：

```
while(playAgain == "yes"); 
```

对此：

```
while(playAgain.equals("yes")); 
```

# c++ - 两个输入到一个while循环

> ID：12764498
> 
> 赞同：0
> 
> 时间：2012-10-06T22:37:58.363
> 
> 标签：c++, vector, while-loop, conditional-statements

我的代码的基本思想是让用户输入 0-9 的拼写，即零、一等或实际数字，并分别输出数字/拼写。

我设法通过使用`while(cin >> number)`（数字是字符串变量）的while循环来做到这一点，然后使用if语句来选择适当的输出选项，即“零”--> 0和“0”-->零。

起初，尽管我尝试按以下方式进行操作；

```
while (cin >> number || cin >> n) 
{
    if (n == 0)
        cout << digits[0] << endl;
           .
           . 
           .
    else if (n == 9)
        cout << digits[9] << endl;  

    if (number == digits[0])
        cout << 0 << endl;
           .
           .
           .
    else if (number == digits[9])
        cout << 9 << endl;  
} 
```

`digits`只是一个存储字符串“零”、“一”等的向量类。

但这不起作用，当输入一个字符串时，输出是正确的，但是当输入一个整数时，输出总是“零”。我想知道为什么这不起作用？我认为它与while循环条件有关。计算机无法识别是否输入了字符串/整数并执行适当的操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T22:46:07.970

问题是它`cin >> number`总是会成功，因为`number`它是一个`string`（只要你没有遇到 EOF 或其他一些失败条件）；如果用户输入数字，`number`则将数字保存为字符串。所以`cin >> n`不会发生。

您应该将您`number`的字符串与`"0"`..进行比较`"9"`（除了测试数字名称）。您还应该使用循环而不是`if/else if`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T23:39:45.960

我认为您不了解`||`运算符的用法。`while (cin >> number || cin >> n)`表示 do `cin >> number`，如果该表达式计算`false`，则 do `cin >> n`，如果其中一个计算`true`，则执行括号内的内容。

正如 nneonneo 所说，`cin >> number`将（几乎）总是评估`true`，所以`cin >> n`永远不会发生，但这实际上是你的问题中最少的。

如果我可以建议的话，我认为你现在应该完全摆脱`while`循环，只专注于做一次。您需要的是`cin >> number`然后对天气进行*测试*`number`是否是`"0"`, `"1"`,...`"9"`数字或`"zero"`, `"one"`,...`"nine"`数字。然后，您可以决定如何将一种转换为另一种。

# c++ - for 与 while 循环中的 C++ 迭代器行为

> ID：12764499
> 
> 赞同：3
> 
> 时间：2012-10-06T22:38:06.060
> 
> 标签：c++, iterator

我不明白为什么使用 for 循环遍历容器会产生与使用 while 循环遍历容器不同的结果。下面的 MWE 用一个向量和一组 5 个整数来说明这一点。

```
#include <iostream>
#include <vector>
#include <set>
using namespace std;

int main()
{
  vector<int> v;
  set<int> s;

  // add integers 0..5 to vector v and set s
  for (int i = 0; i < 5; i++) {
    v.push_back(i);
    s.insert(i);
  }

  cout << "Iterating through vector with for loop.\n";
  vector<int>::const_iterator itv;
  for (itv = v.begin(); itv != v.end(); itv++) cout << *itv << ' ';
  cout << '\n';

  cout << "Iterating through set with for loop.\n";
  set<int>::const_iterator its;
  for (its = s.begin(); its != s.end(); its++) cout << *its << ' ';
  cout << '\n';

  cout << "Iterating through vector with while loop.\n";
  itv = v.begin();
  while (itv++ != v.end()) cout << *itv << ' ';
  cout << '\n';

  cout << "Iterating through set with while loop.\n";
  its = s.begin();
  while (its++ != s.end()) cout << *its << ' ';
  cout << '\n';
} 
```

以上产生：

```
Iterating through vector with for loop.
0 1 2 3 4 
Iterating through set with for loop.
0 1 2 3 4 
Iterating through vector with while loop.
1 2 3 4 0 
Iterating through set with while loop.
1 2 3 4 5 
```

for 循环按预期工作，但 while 循环不按预期工作。由于我将`++`其用作后缀，因此我不明白为什么 while 循环的行为如此。另一个谜团是为什么 while 循环会打印一个`5`for 集合`s`，因为这个数字没有插入`s`。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-06T22:41:07.663

您的`while`循环不等于`for`循环。

循环`for`相当于

```
itv = v.begin();
while(itv != v.end()) {
    cout << *itv << ' ';
    itv++;
} 
```

请注意，增量发生*在*`cout`. 在您的`while`循环中，您在测试中进行增量， before `cout`。即使您使用后增量，增量也会在循环体执行之前生效。

`while`像我在那里那样写你的循环，差异应该消失。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-06T22:41:57.230

当您使用`for`循环进行迭代时，仅在评估主体后才增加迭代器。当您使用`while`循环进行迭代时，您会在检查之后但在循环体之前递增迭代器。在循环的最后一次迭代中取消引用迭代器`while`会导致未定义的行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T22:41:04.703

这可能是因为编译器`its++`在评估表达式的其余部分之前首先评估了 while 表达式中的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T22:41:21.410

> 因为我使用 ++ 作为后缀，所以我不明白为什么 while 循环的行为如此。

这是因为首先评估 while 谓词，然后（如果谓词为真）评估 while 循环的主体。当您尝试访问正文中的值时，迭代器已经递增。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-06T23:03:15.607

只是一些“随机”风格的提示，主要展示算法使用和现代 C++11 特性。

```
#include <iostream>
#include <vector>
#include <set>
#include <algorithm>
#include <iterator>

int main()
{
    const std::vector<int> v { 0,1,2,3,4 };
    const std::set<int>    s { 0,1,2,3,4 };

    for (auto element : v)
        std::cout << element << ' ';
    std::cout << '\n';

    for (auto element : s)
        std::cout << element << ' ';
    std::cout << '\n';

    std::copy(v.begin(), v.end(), std::ostream_iterator<int>(std::cout, " "));
    std::cout << '\n';

    std::copy(s.begin(), s.end(), std::ostream_iterator<int>(std::cout, " "));
    std::cout << '\n';
} 
```

# jquery - Jquery Mobile Photoswipe 无法处理外部页面

> ID：12764502
> 
> 赞同：2
> 
> 时间：2012-10-06T22:38:27.017
> 
> 标签：jquery, mobile, photoswipe

我想我在 Photoswipe 中发现了一个错误，我需要一些帮助。以下代码是为使用 Photoswipe 的移动应用程序制作的页面。在一个 html 文件上，您有两个页面，并且一切正常：

```
<html> 
<head> 
  <meta charset="utf-8" />
  <title>Photoswipe test</title>  
  <meta name=viewport content="user-scalable=no, width=device-width" />
  <meta name="apple-mobile-web-app-capable" content="yes" />

  <link rel="stylesheet" href="jquery.mobile-1.1.1.css" />
  <link rel="stylesheet" href="js/photoswipe/styles.css" />
  <link rel="stylesheet" href="js/photoswipe/photoswipe.css" />

  <script type="text/javascript" src="js/photoswipe/lib/klass.min.js"></script>
  <script src="jquery-1.7.2.js"></script>
  <script src="jquery.mobile-1.1.1.js"></script>
  <script type="text/javascript" src="js/photoswipe/code.photoswipe.jquery-3.0.5.min.js"></script>  

  <script type="text/javascript">
  (function(window, $, PhotoSwipe){
    $(document).ready(function(){
      var options = {};
    $("#Gallery a").photoSwipe(options);
    });
  }(window, window.jQuery, window.Code.PhotoSwipe));          
  </script>

</head> 

<body>

<div data-role="page" id="home">

<div data-role="header" data-position="fixed">
<h1>My Gallery</h1>
</div>

<div data-role="content">
<p style="text-align:center;"><a href="#mygallerypage">Click to visit the gallery</a>    </p>
</div>

</div>

<div data-role="page" id="mygallerypage" data-add-back-btn="true" class="gallery-page">

<div data-role="header" data-position="fixed">
<h1>My Gallery</h1>
</div>

<div data-role="content">

<ul id="Gallery" class="gallery">
<li><a href="photos/1LY6TZAV.jpg" rel="external"><img src="photos/thumbs/1LY6TZAV.jpg" /></a></li>
<li><a href="photos/16D20982.jpg" rel="external"><img src="photos/thumbs/16D20982.jpg" /></a></li>
<li><a href="photos/5W1BTW3Y.jpg" rel="external"><img src="photos/thumbs/5W1BTW3Y.jpg" /></a></li>
</ul>

</div>  

</div> 

</body>
</html> 
```

现在。我需要使用参数和 JSON 加载我的应用程序的图像。因此，我尝试将画廊放在外部页面上。它没有用。拇指显示正确，但是当您按下其中一张图像时，它会作为通常的链接加载，并且图库会中断。这是代码：

索引.html：

```
<html> 
<head> 
  <meta charset="utf-8" />
  <title>Photoswipe test</title>  
  <meta name=viewport content="user-scalable=no, width=device-width" />
  <meta name="apple-mobile-web-app-capable" content="yes" />

  <link rel="stylesheet" href="jquery.mobile-1.1.1.css" />
    <link rel="stylesheet" href="js/photoswipe/styles.css" />
    <link rel="stylesheet" href="js/photoswipe/photoswipe.css" />

  <script type="text/javascript" src="js/photoswipe/lib/klass.min.js"></script>
  <script src="jquery-1.7.2.js"></script>
  <script src="jquery.mobile-1.1.1.js"></script>
  <script type="text/javascript" src="js/photoswipe/code.photoswipe.jquery-3.0.5.min.js"></script>  

  <script type="text/javascript">

        (function(window, $, PhotoSwipe){
            $(document).ready(function(){
                var options = {};
                $("#Gallery a").photoSwipe(options);
            });
        }(window, window.jQuery, window.Code.PhotoSwipe));          

  </script>

</head> 

<body>

<div data-role="page" id="home">

    <div data-role="header" data-position="fixed">
    <h1>My Gallery</h1>
  </div>

  <div data-role="content">
    <p style="text-align:center;"><a href="mygallery.html">Click to visit the gallery</a></p>
  </div>

</div>

</body>
</html> 
```

我的画廊.html：

```
<html> 
<head> 
  <meta charset="utf-8" />
</head> 
<body> 

<div data-role="page" id="mygallerypage" data-add-back-btn="true" data-transition="slide" class="gallery-page">
    <div data-role="header" data-position="fixed">
    <h1>My Gallery</h1>
  </div>

    <div data-role="content">

    <ul id="Gallery" class="gallery">
        <li><a href="photos/1LY6TZAV.jpg" rel="external"><img src="photos/thumbs/1LY6TZAV.jpg" /></a></li>
        <li><a href="photos/16D20982.jpg" rel="external"><img src="photos/thumbs/16D20982.jpg" /></a></li>
        <li><a href="photos/5W1BTW3Y.jpg" rel="external"><img src="photos/thumbs/5W1BTW3Y.jpg" /></a></li>
    </ul>

    </div>  

</div> 

</body>
</html> 
```

任何想法可能有什么问题或者它可能是Photoswipe的问题？我需要在我的应用程序上实现一个动态生成的画廊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-20T22:18:14.507

您需要将所有 CSS 和 JS 文件和脚本加载到新的图库页面中。而且由于它们是相对链接，因此如果它们发生变化，您必须更新它们的相对性。或者使用 CDN 或其他绝对链接选项。

```
 <link rel="stylesheet" href="jquery.mobile-1.1.1.css" />
  <link rel="stylesheet" href="js/photoswipe/styles.css" />
  <link rel="stylesheet" href="js/photoswipe/photoswipe.css" />
  <script type="text/javascript" src="js/photoswipe/lib/klass.min.js"></script>
  <script src="jquery-1.7.2.js"></script>
  <script src="jquery.mobile-1.1.1.js"></script>
  <script type="text/javascript" src="js/photoswipe/code.photoswipe.jquery-3.0.5.min.js"></script>  
  <script type="text/javascript">
        (function(window, $, PhotoSwipe){
            $(document).ready(function(){
                var options = {};
                $("#Gallery a").photoSwipe(options);
            });
        }(window, window.jQuery, window.Code.PhotoSwipe));          
  </script> 
```

# android - 使用 ABS 单击按钮更改选项卡

> ID：12764503
> 
> 赞同：0
> 
> 时间：2012-10-06T22:38:37.357
> 
> 标签：android, android-tabhost, actionbarsherlock

我在 ActionBarSherlokFragment Demo 中使用 base 编写此代码。我希望当用户单击 Tab1 内的按钮时，他会通过此实现定向到 Tab2，因为此实现包含 PageView。有可能吗？

看代码首页： http: [//pastebin.com/GU63pYM6](http://pastebin.com/GU63pYM6)

事件按钮 RelatorioFragment：

```
bt_vergrafico.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        Toast.makeText(getActivity(), "Click", Toast.LENGTH_SHORT).show();
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:00:18.487

尝试这个

```
@Override
public void onClick(View v) {
    mViewPager.setCurrentItem(position);
} 
```

# c - gcc：具有 sizeof 值的前向指针地址

> ID：12764507
> 
> 赞同：1
> 
> 时间：2012-10-06T22:38:57.107
> 
> 标签：c, pointers, gcc, struct, malloc

使用此代码：

```
#include <stdlib.h>
#include <stdio.h>

int j_btree_create (int fn_initial_nodes);

typedef struct {
    int depth;
    int value;
    void *item;
    void *left_pointer;
    void *right_pointer;
} j_btree_node_int;

typedef struct {
    int nodes;
    int available_nodes;
    int btree_extension;
} j_btree_descriptor_int;

int j_btree_create (int fn_initial_nodes) {
    int *free_btree_node;
    int loop_counter;
    j_btree_descriptor_int *btree_start;

    btree_start = (j_btree_descriptor_int *) malloc (((sizeof(j_btree_node_int) + sizeof(free_btree_node)) * fn_initial_nodes) + sizeof(j_btree_descriptor_int));

    (*btree_start).nodes = fn_initial_nodes;
    (*btree_start).available_nodes = fn_initial_nodes;
    (*btree_start).extension = NULL; */
    for (loop_counter = 0; loop_counter < fn_initial_nodes; loop_counter++) {
        printf ("loop_test: %d", loop_counter);
    }
} 
```

我想要一个指向二叉树描述符之后位置的指针（基本上是 btree_start 的结构）

我可以这样做吗

```
free_btree_node = btree_start + sizeof(j_btree_descriptor_int); 
```

或者这可能会完全出错？如果是这样，我该怎么做？我将做一些类似于最初填充未使用的二叉树节点表的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:52:15.813

如果您真的想将其全部保存在一个结构中，一种方法是使用“灵活数组成员”：

```
typedef struct {
    int *value;
    j_btree_node_int node;
} j_btree_node;

typedef struct {
    j_btree_descriptor_int btree_start;
    j_btree_node nodes[0];
} j_btree;

j_btree *btree = malloc(sizeof(j_btree) + fn_initial_nodes * sizeof(j_btree_node));
free_btree_node = &j_btree->nodes[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T23:22:22.033

你问关于

```
free_btree_node = btree_start + sizeof(j_btree_descriptor_int); 
```

由于指针算法的规则，它隐式地将偏移量乘以类型的大小，这相当于

```
free_btree_node = &btree_start[sizeof(j_btree_descriptor_int)]; 
```

这不是你想要的。你想要的是

```
free_btree_node = (int*)&btree_start[1]; 
```

或者，等效地，

```
free_btree_node = (int*)(btree_start + 1); 
```

是的，您可以这样做，因为您分配了额外的空间。但这并没有真正意义，因为您分配`((sizeof(j_btree_node_int) + sizeof(free_btree_node)) * fn_initial_nodes)`了额外的字节，这不是`int`s 的计数。目前尚不清楚你想要它是什么，但它肯定不可能是正确的，因为`free_btree_node`它是一个指针，你对它的大小不感兴趣......你可能的意思是`sizeof(*free_btree_node)`. 但是你的代码是难以理解的，因为没有注释解释什么是什么或者你为什么要这样做。特别是，应该对您的 malloc 进行评论，准确说明您认为您正在分配的内容......甚至可能是一个小图表。或者您可以放弃尝试分配连续结构并独立分配每种事物。

```
(*btree_start).nodes 
```

请用

```
btree_start->nodes 
```

这是标准用法，更简洁，更易于理解......

# cocoa - NSXPCConnection 或 XPCKit

> ID：12764519
> 
> 赞同：0
> 
> 时间：2012-10-06T22:41:26.217
> 
> 标签：cocoa, xpc

为 Mac 实现 XPC 客户端和服务有两种选择（或者至少我知道两种）。NSXPCConnection 是在 10.8 和[XPCKit](https://github.com/amazingsyco/XPCKit)中引入的。我应该使用什么来实现驻留在菜单栏中并使用 XPC 从主应用程序读取数据的帮助应用程序。

我看到的主要区别是`XPCKit`它将在 10.7 Lion 中工作，而`NSXPCConnection`仅在 10.8 Mountain Lion 中可用。在它们之间进行选择时，我还应该考虑什么。对于使用这两种方法的开发人员的回复，我将不胜感激。

PS 我的应用程序仍然可以在 10.7 中运行，但是根据我以前的经验，在发布后 2-3 个月内需要最新版本的 OS X 不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:58:08.763

最后我决定使用 NSXPCConnection。

*   它由 Apple 提供，因此出现更新问题的可能性较小。

*   自 Mountain Lion 和 NSXPCConnection 发布以来，似乎不再支持 XPCKit。

*   我都试过了，对我个人来说 NSXPCConnection 似乎是一个更好的解决方案

# python - python 程序的 app.yaml 文件

> ID：12764523
> 
> 赞同：1
> 
> 时间：2012-10-06T22:41:52.123
> 
> 标签：python, google-app-engine

如何`app.yaml`为我尝试放在 Google App Engine 上的特定 Python 应用程序编写文件？

这是我正在尝试处理的简单python代码：

```
import webapp2
form="""
<form action="http://www.google.com/search">
<input name="q">
<input type="submit">
</form>
"""
class MainPage(webapp2.RequestHandler):
    def get(self):
        self.response.out.write(form)

app=webapp2.WSGIApplication([('/',MainPage)],
                              debug=True) 
```

现在，每当我尝试在 Google App Engine 上运行它时，它都无法正常工作。在 localhost 上不显示任何内容，并在部署时显示服务器错误。

这是`app.yaml`代码：

```
application: saaps-2012
version: 1
runtime: python
api_version: 1

handlers:
- url: /.*
script: program.py 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T23:02:38.250

尝试在文件末尾添加以下行`program.py`：

```
def main():
    app.run()

if __name__ == "__main__":
    main() 
```

然后，您的文件应如下所示：

```
import webapp2
form="""
<form action="http://www.google.com/search">
<input name="q">
<input type="submit">
</form>
"""
class MainPage(webapp2.RequestHandler):
    def get(self):
        self.response.out.write(form)

app=webapp2.WSGIApplication([('/',MainPage)],
                              debug=True)

def main():
    app.run()

if __name__ == "__main__":
    main() 
```

试一试，让我知道你的结果。

# android - 尝试运行 systrace 时权限被拒绝

> ID：12764525
> 
> 赞同：1
> 
> 时间：2012-10-06T22:42:04.047
> 
> 标签：android, terminal, systrace

我正在尝试运行 Android SDK 提供的新 systrace 工具。正如在 Google I/O 2012 期间演示的那样（[演示在视频中的 31:04 开始](http://youtu.be/Q8m9sHdyXnE?t=31m4s)）（[终端命令在 32:04 演示](http://youtu.be/Q8m9sHdyXnE?t=32m4s)）。.

但是，当我尝试运行命令时（在 Mac 上的终端中），我得到以下信息：

```
-bash: ./systrace.py: Permission denied 
```

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T22:55:46.693

我通过了解有关 UNIX 权限的更多信息来解决这个问题。systrace.py 文件的权限设置为：`-rw-r--r--`所以我不允许执行它。我使用 chmod 更改权限以允许我执行它，现在我可以运行它了。

另外：如果它对某人有帮助... trace.html 无法在 Firefox 中打开，请尝试使用 Chrome。

# objective-c - 使用 IOS 6 的 ARC 内存管理

> ID：12764529
> 
> 赞同：0
> 
> 时间：2012-10-06T22:42:24.703
> 
> 标签：objective-c, automatic-ref-counting

我正在浏览 IOS 的 Big Nerd Ranch（第 3 版）。我在 ARC 内存管理章节。它试图解释保留周期，它让我们修改一个简短的控制台应用程序，如下所示：

BNRItem 的标题：

```
@interface BNRItem : NSObject
{
    NSString *itemName;
    NSString *serialNumber;
    int valueInDollars;
    NSDate *dateCreated;

    BNRItem *containedItem;
    BNRItem *container;
}
+ (id)randomItem;

- (void)setItemName:(NSString *)str;
- (NSString *)itemName;

- (void)setSerialNumber:(NSString *)str;
- (NSString *)serialNumber;

- (void)setValueInDollars:(int) i;
- (int)valueInDollars;

- (void)setContainedItem:(BNRItem *)i;
- (BNRItem *)containedItem;

-(void)setContainer:(BNRItem *)i;
- (BNRItem *)container;

- (NSDate *)dateCreated;

- (id)initWithItemName:(NSString*)name valueInDollars:(int)value serialNumber:(NSString *)sNumber;
- (id)initWithItemName:(NSString *)name andSerialNumber:(NSString *)sNumber;
@end 
```

主文件：

```
int main(int argc, const char * argv[])
  {

  @autoreleasepool {
    NSMutableArray *items = [[NSMutableArray alloc]init];
    BNRItem *backpack = [[BNRItem alloc] init];
    [backpack setItemName:@"Backpack"];
    [items addObject:backpack];
    BNRItem *calculator = [[BNRItem alloc]init];
    [calculator setItemName:@"Calculator"];
    [items addObject:calculator];

    [backpack setContainer:calculator];
    NSLog(@"Setting items to nil");
    items = nil;

  }
  return 0;
} 
```

现在在这之后它说：“根据我们迄今为止对内存管理的理解，当 items 设置为 nil 时，两个 BNRItems 都应该连同它们的实例变量一起被销毁”。在此之前，当我们的 BNRItem 被销毁时，我们需要覆盖 (void) dealloc 以打印出来。

所以我运行它，我想看看，因为背包现在对计算器有很强的参考，也不会被破坏。现在在控制台中，我看到两者都被破坏了，但我认为这是因为它们在应用程序结束时被破坏了。当我在将项目设置为 nil 后做一个断点时，什么都不会被破坏。这就是这本书所说的应该发生的事情......但它让我将容器设置为

```
__weak BNRItem *container 
```

然后当我运行它时，它仍然没有被破坏。我假设是因为仍然有指向它的指针我没有设置为零？即使这本书在这一点上没有提到这样做。所以我理解书籍的解释（我认为），但实际上并没有发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:58:11.767

我相信自动完成。

```
[backpack setContainer:calculator] 
```

本来应该

```
[backpack setContainedItem:calculator] 
```

# ios - UIView 适用于 iPhone 4in，但在 iPhone 3.5in 中被挤压

> ID：12764531
> 
> 赞同：0
> 
> 时间：2012-10-06T22:43:03.203
> 
> 标签：ios, uiview, resize, ios6, xib

我在新的 Xcode 中启动了一个新项目，我看到我的默认主窗口设置为 320x548。我对此很好，但是当我测试我的应用程序时，我添加到我的主 xib 的视图应该是 280x280，在 3.5 英寸设备上测试时看起来更像是 280x200。

我已经尝试在 xib 中更改该视图的设置，但似乎没有任何影响。

如何确保背景兼容性，以便在旧设备中视图大小相同？

**更新：**

当我以编程方式添加视图时，一切正常，但是当我通过控制器中的插座添加它时，一切都被压扁了。我试图（以编程方式）强制视图为 280x280，但它只是扭曲了视图的内容。它只是想成为280x192 ...

我一定做错了什么，但我不知道是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T21:45:34.103

我现在遇到了同样的问题，幸运的是找到了解决方案。我创建了一个包含一个简单按钮的简单应用程序，我想将其大小设置为 10 像素左右的边距。self.view.bounds 返回 xib 的实际大小，如果它设置为例如 iPhone4 Retina 并且您在不同的 iPhone 版本中对其进行测试，它将返回不正确的值。使用 [[UIScreen mainScreen] bounds]; 而是减去状态栏的高度（ [[UIApplication sharedApplication] statusBarFrame].size.height ）。最后的东西看起来像这样：

```
CGRect frame = [[UIScreen mainScreen] bounds];
frame.origin.x = 10;
frame.origin.y = 10;
frame.size.width -= 20;
frame.size.height -= (20 + [[UIApplication sharedApplication] statusBarFrame].size.height);

button.frame = frame; 
```

我在所有设备类型上对其进行了测试，效果很好。

（显然它只在“使用自动布局”未勾选时才有效）

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T15:39:56.937

Sounds like you need to review the auto sizing constraints that you've set on the view in the .xib file. You can constrain the view to a fixed size.

# jquery-mobile - 在jQuery中传递整数和字符串参数之间的区别

> ID：12764538
> 
> 赞同：0
> 
> 时间：2012-10-06T22:44:19.787
> 
> 标签：jquery-mobile

我有一个函数，我在其中创建了一个包含`onclick`函数的 div，我在其中传递了 2 个变量。一个是一个`int`，另一个是一个`string`。它接受的是`int`而不是`string`。

```
 var html ="";
  var intC = 0;
  var flightBI="";
  var mileage=0;
  flightBI = $(this).find("FLIGHT").text();

 fnCreateDiv(){
 html+="<div class='ui-grid-a' id='Details" + intC +"'            onclick='fnConfirm("+intC+","+mileage+");' >";
 html+="</div>"
 }

 fnConfirm(intc,mileage){
 alert(intc);
 alert(mileage);
 } 
```

我都收到了`intc`和的警报`mileage`，因为两者都是整数。如果在同样的情况下我通过了航班，我没有得到价值。这是我们通常用 JavaScript 做的，但在 jQuery 中它有什么不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T23:23:56.067

intC 和 mileage 都初始化为 0 (int)，因此它们都警告相同的值。

看到这个[jsFiddle](http://jsfiddle.net/bN4JJ/1/)修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:37:12.087

我也试图为我的问题找到解决方案，并发现转义序列 \" 帮助了我。

onclick='fnConfirm("+intC+","+flightBI+")

替换为

onclick='fnConfirm("+intC+",\""+里程+"\")

因为我将 html 本身添加为字符串。

# android - 如何在Android中使用zxing并让zxing在内部处理结果

> ID：12764540
> 
> 赞同：0
> 
> 时间：2012-10-06T22:44:26.333
> 
> 标签：android, zxing

一个简短的例子：

我正在扫描一个二维码，例如“WIFI:S:The SSID;;” 使用 Barcode Scanner 应用程序，它在内部成功处理扫描结果并打开 wifi 设置。

当我在自己的应用程序中通过 Intent 集成使用 zxing 库时，我会在 onActivityResult 中得到结果。现在我有了扫描代码的文本，但我必须自己处理这一切。

但是逻辑已经有了，为什么还要再实现呢？我可以以某种方式告诉 zxing 库在内部处理扫描结果吗？

戈登

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T23:02:34.490

然后只需通过 Intent 启动 Barcode Scanner 应用程序。如果您不想处理回复，则无需等待回复。唯一的问题是用户必须自己回到您的应用程序。

或者，您可以使用您自己的应用程序中的代码解析结果`ResultParser`，然后提取代码以对您的应用程序`WifiResultHandler`中的 wi-fi 网络进行更改。复制和重新利用的代码并不多。

# javascript - 使用 jQuerys 检查输入中的无效字符

> ID：12764541
> 
> 赞同：0
> 
> 时间：2012-10-06T22:44:29.040
> 
> 标签：javascript, jquery, html

我有一个输入框，其中输入了用户名，但如果输入了无效字符，我希望它出错。下面的代码是我正在使用的；我会在“某事”部分放什么？

```
 var numbers = new RegExp("SOMETHING");

    $(this).removeClass("active");          

    if(($(this).val() == "") || $(this).val().match(numbers))
    {
        $("#firstNameErrorMsg").html("First name can only contain letters. ");
    }
    else
    {
        $("#firstNameErrorMsg").html("OK");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T22:53:48.677

试试这个正则表达式

```
[A-Za-z] 
```

这将只匹配小写和大写字符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T22:55:16.477

以下是我多年前写的一些模式：

```
patt['name'] = /^[a-z ,-]+$/i;
patt['username'] = /^[A-z0-9_-]+$/i;
patt['email'] = /^[a-z0-9]+(?:[\.-]?[a-z0-9]+)*@[a-z0-9]+([-]?[a-z0-9]+)*[\.-]?[a-z0-9]+([-]?[a-z0-9]+)*([\.-]?[a-z]{2,})*(\.[a-z]{2,5})+$/i;
patt['website'] = /^http(s)?:\/\/(www\.)?[a-z0-9]+([-]?[a-z0-9]+)*[\.-]?[a-z0-9]+([-]?[a-z0-9]+)*([\.-]?[a-z]{2,})*(\.[a-z]{2,5})+$/i;
patt['age'] = /^(?:([1][3-9]|[2-9][0-9]))$/i;
patt['subject'] = /[a-z0-9?!:;'&_\. ,-]+/i; 
```

如果你想使用它们，你应该检查这个条件：

```
if(($(this).val() == "") || ! $(this).val().match(patt['name'])){ // in case.
...
} 
```

但是如果你想检查不需要的字符，这将是一个很长的`username`输入模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T23:03:00.357

建议您阅读一些关于正则[表达式](http://www.regular-expressions.info/)的内容并[尝试使用它们](http://regexpal.com/)。

要获得简单的字母而不是其他任何内容，只需执行以下操作：

```
^[a-zA-Z]+$ 
```

这允许在开始和结束之间找到 1..n 个小写和大写字母，仅此而已。Sushanth 的版本将匹配输入的部分片段，允许用户在其他地方使用空格、数字等，只要输入片段中有一个单词。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T22:56:16.520

如果您正在寻找验证您的用户输入，只有字母，我建议使用字符代码，如下所示：

1.  在输入标签上添加按键事件

2.  对于传递的事件参数，检查字符代码（一些浏览器使用 keyCode，其他浏览器使用 which）

    function checkOnKeyDown(event){
    if (event.KeyCode >= 65 && event.keyCode <=122) { //这里没问题 -- 只接受大写/小写字母 } else { //错误 } }

这是一个包含所有 keyCode 到字符映射的列表；）： http: [//www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T23:09:06.497

这应该是您要执行的操作的完整实现：

```
var invalid = /[^A-Za-z]+/;

$(this).removeClass("active");          

if($(this).val() == "" || invalid.test($(this).val()))
{
    $("#firstNameErrorMsg").html("First name can only contain letters. ");
}
else
{
    $("#firstNameErrorMsg").html("OK");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-06T23:11:34.963

Sushanth 大部分是正确的，但是您需要匹配任意数量的字母，并且必须从头到尾只有字母，所以您应该这样做

```
var name = new RegExp('^[A-Za-z]+$');
$(this).removeClass('active');

if($(this).val().match(name)) {
    $('#firstNameErrorMsg').html('OK');
} else {
    $('#firstNameErrorMsg').html('First name can only contain letters.');
} 
```

# android - 实现 QuickActions UI 模式

> ID：12764542
> 
> 赞同：2
> 
> 时间：2012-10-06T22:45:03.577
> 
> 标签：android, quickaction

我一直在尝试在我的应用程序中实现 QuickActions UI 模式。我发现了几个添加 QuickAction 的库，但它们都有一个共同点 - QuickAction 弹出窗口始终在活动中实现。

作为我的应用程序的一部分，我有一个可滑动的视图，其中包含 2 个 ListFragments，它允许我在两者之间动态切换。但是，每当我尝试实现此 UI 模式时，都会在调用 QuickAction.show 时导致 NullPointerExceptions。到目前为止，我已经尝试过 NewQuickActions，以及 Qberticus 的 LikeQuickActions。两者都有完全相同的问题。我的问题是，是否存在阻止 PopupWindow 锚定到片段内的 ListItem 的基本限制？或者我只是做错了什么。作为参考，这是我使用的代码。

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                                                  Bundle savedInstanceState) {

    View v = inflater.inflate(R.layout.fridge_food_tab, container,false);
    listView = (ListView) v.findViewById(R.id.fridge_food_list);

    getActivity().getSupportLoaderManager().initLoader(FRIDGE_FOOD_LOADER, null, this);

    adapter = new FridgeCursorAdapter(getActivity().getApplicationContext(), 
                  R.layout.fridge_list_layout, null, uiBindFrom, uiBindTo, 
                  CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);

    final QuickAction qa = new QuickAction(getActivity());

    ActionItem item = new ActionItem(getResources()
                          .getDrawable(android.R.drawable.ic_input_add));

    qa.addActionItem(item); //<-- Line 51

    listView.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            qa.show(arg1);
        }
    });

listView.setAdapter(adapter);
return v;
} 
```

这是发生的异常

```
10-06 18:40:53.617: E/AndroidRuntime(17832): FATAL EXCEPTION: main
10-06 18:40:53.617: E/AndroidRuntime(17832): java.lang.NullPointerException
10-06 18:40:53.617: E/AndroidRuntime(17832): at net.londatiga.android.QuickAction.addActionItem(QuickAction.java:151)
10-06 18:40:53.617: E/AndroidRuntime(17832): at app.le.sauce.fridge.FoodTabFragment.onCreateView(FoodTabFragment.java:51)
10-06 18:40:53.617: E/AndroidRuntime(17832): at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:871)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1083)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:635)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1431)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:431)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.support.v4.app.FragmentStatePagerAdapter.finishUpdate(FragmentStatePagerAdapter.java:160)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.support.v4.view.ViewPager.populate(ViewPager.java:895)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.support.v4.view.ViewPager.populate(ViewPager.java:772)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1234)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.view.View.measure(View.java:15172)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.view.View.measure(View.java:15172)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.view.View.measure(View.java:15172)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.view.View.measure(View.java:15172)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2150)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.view.View.measure(View.java:15172)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1848)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1100)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1273)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.view.Choreographer.doCallbacks(Choreographer.java:555)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.view.Choreographer.doFrame(Choreographer.java:525)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.os.Handler.handleCallback(Handler.java:615)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.os.Looper.loop(Looper.java:137)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at android.app.ActivityThread.main(ActivityThread.java:4931)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at java.lang.reflect.Method.invokeNative(Native Method)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at java.lang.reflect.Method.invoke(Method.java:511)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
10-06 18:40:53.617: E/AndroidRuntime(17832):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T23:28:44.503

不幸的是，这可能不是您要寻找的答案，因为它更多的是解释而不是解决方案。

在第 51 行，您调用`qa.addActionItem(item);`. 这导致[`addActionItem(ActionItem action)`QuickAction.java](https://github.com/lorensiuswlt/NewQuickAction/blob/master/src/net/londatiga/android/QuickAction.java)。所以，我做了一些寻找；您的崩溃发生在该文件的第 151 行，即：

```
public void addActionItem(ActionItem action) {
    mActionItemList.add(action);

    String title    = action.getTitle();
    Drawable icon   = action.getIcon();

    View container  = (View) inflater.inflate(R.layout.action_item, null);

    ImageView img   = (ImageView) container.findViewById(R.id.iv_icon);
    TextView text   = (TextView) container.findViewById(R.id.tv_title);

    if (icon != null) { 
        img.setImageDrawable(icon); // This line here.
    } else {
        img.setVisibility(View.GONE);
    }

    // ...

} 
```

现在，显然，在这条线上，`icon`不能`null`。所以，它似乎`img`是。从那里，我们可以得出结论 不`container`包含 ID 的元素`iv_icon`。但是，当我查看`action_item`XML 文件时，它确实存在。

所以，我有几个建议：

1.  确认没有第二个`action_item.xml`文件可能正在读取（在您的库、其或任何其他文件中）。
2.  清理 QuickAction 项目，让它构建，然后清理你的项目，让它构建，然后运行它。
3.  玩弄库代码。（Test `null`s，试着弄清楚什么是膨胀的，什么不是。）
4.  如果一切都失败了，请联系库创建者。他的电子邮件可以在[图书馆主页](https://github.com/lorensiuswlt/NewQuickAction)上找到。

# actionscript-3 - URLLoader 不响应 .close()

> ID：12764543
> 
> 赞同：0
> 
> 时间：2012-10-06T22:45:11.973
> 
> 标签：actionscript-3, flash

我的应用程序要求我能够在连接后阶段的任何时候中止/关闭 URLLoader 实例；即无论我是否已经连接并且文件传输已经开始，或者我是否已经连接并且文件传输尚未开始（服务器尚未开始发送文件）。

这是我的代码：

```
var myTextLoader:URLLoader = new URLLoader();
myTextLoader.load(new URLRequest("myText.txt")); 
```

这是我注意到的：

当我连接到服务器时，服务器立即开始发送文件，在实际文件传输期间，如果我调用 myTextLoader.close()，它会立即中止。这是意料之中的。我可以通过在 Firefox 中执行 SWF 来监控这一点，并注意到当我发出 close() 时，网络连接从 Pending 变为 aborted。

但是，如果我连接到服务器，并且文件传输实际上还没有开始（我已经确认连接事件已经触发，并且服务器根本没有开始发送文件），那么 myTextLoader.close() 无效。只有在第一个字节开始从服务器传输之后， .close() 才会产生任何影响。我可以验证连接是否卡在 Firebug 中的 Pending 中。.close() 在传输开始之前无效。

任何想法如何解决这个问题？无论连接阶段如何，我都需要能够调用 .close() 并断开连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T22:55:33.170

我首先想到的是创建一个 bool “aborted”，在调用 close() 方法的地方设置为 true。喜欢 ：

```
function abort():void {
     _aborted = true;
     myTextLoader.close();
} 
```

然后在 onProgress 事件或任何类似事件中的任何位置检查其值，以在其值为 true 时再次实际调用 URLLoader close() 方法...

```
function onProgress(evt:ProgressEvent):void {
     if (_aborted) {
           myTextLoader.close();
     }
} 
```

它不是一件漂亮的事情，而且是一个丑陋的解决方法，但这可能会奏效，因为当实际收到第一个比特时，你会知道你是否已经想关闭它。

您是否在任何地方发现了任何错误报告？...我怀疑这可能是预期的行为...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T08:29:00.410

第 3 方 AS3 HTTPClient (https://github.com/gabriel/as3httpclient) 似乎没有使用 close() 显示此问题。

# c# - 带有 Windows 窗体的 XNA - 打开新窗口

> ID：12764544
> 
> 赞同：6
> 
> 时间：2012-10-06T22:45:22.737
> 
> 标签：c#, winforms, dialog, xna, panel

好的，我们开始吧。我正在尝试制作一个应用程序，使用 XNA 作为基础，因为它的渲染器。在这个项目中需要做的一件事是打开一个新窗口（作为一个对话框），其中嵌入了一个单独的 XNA 渲染面板。我将它用作交互式预览面板，所以我绝对需要 XNA 在那里渲染。然而，似乎 XNA 并没有很好地做到这一点。我自己尝试了各种方法，但无济于事（产生错误且未正确渲染，或以错误的纵横比渲染等）。通常，我会在此处发布代码，但由于我运气不佳，因此没有太多可发布的内容。

我的应用程序当前包含一个嵌入在表单中的 XNA 应用程序，并且我有一个打开预览面板的按钮，理论上它应该作为一个包含 XNA 渲染器的表单对话框弹出，以允许我绘制预览。我已经尝试了几个小时，但一无所获，所以我在这里寻求一些帮助。

不管怎么说，还是要谢谢你。

编辑：好的，我取得了一些进展，但我有两个问题。首先，使用精灵批次绘制的任何纹理都显示正确的尺寸，但填充为纯黑色。此外，当我打开对话框，然后关闭它并关闭应用程序时，我得到一个 AccessViolationException。我强烈怀疑这两个错误以某种方式联系在一起。

这是我初始化预览对话框的代码。（a 是一个自定义类，本质上由 Texture2D 对象的 LinkedList 组成）。

```
 animPrev = new AnimationPreview(a);
 animPrev.Show(); 
```

我的 AnimationPreview 类是 Form 类的扩展，并且包含一个 PreviewControl 对象，它是 XNA Winforms 示例中的 GraphicsDeviceControl 的扩展。请注意，出于各种原因，我的主窗体扩展了 XNA Game 类。

PreviewControl 对象的设置如下：

```
protected override void Initialize()
{
    sb = new SpriteBatch(GraphicsDevice);
    Application.Idle += delegate { Invalidate(); };
} 
```

Draw 方法包含：

```
protected override void Draw()
{
    GraphicsDevice.Clear(Microsoft.Xna.Framework.Graphics.Color.Violet);
    if (frame != null)
    {
        sb.Begin();
        sb.Draw(Image, Vector2.Zero, Color.White);
        sb.End();
    }
 } 
```

正如预期的那样，这将清除表单紫罗兰色的背景，并绘制一个与 Image 大小相同的黑框。这不是预期的。希望有人可以在这里帮助我。

注意：可接受的替代方法是将 XNA Texture2D 对象转换为 System.Drawing.Image 对象。但是，我使用的是 XNA 3.1，所以我不能只将纹理保存到流中并重新加载它。实际上，在尝试过之后，它有点狡猾，而且很慢，所以我宁愿不这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T09:36:33.713

您是否看过以下官方教程/示例？

*   [XNA WinForms 系列一：图形设备](http://xbox.create.msdn.com/en-US/education/catalog/sample/winforms_series_1)
*   [XNA WinForms 系列 2：内容加载](http://xbox.create.msdn.com/en-US/education/catalog/sample/winforms_series_2)

在我看来，他们应该解释一切。您甚至可以找到示例的可下载源。

# c++ - 将自定义标准输入管道传输到 C++ 中的系统调用

> ID：12764550
> 
> 赞同：2
> 
> 时间：2012-10-06T22:46:34.743
> 
> 标签：c++, file, unix, pipe, stdin

我正在尝试使用自定义输入从 C++ 调用 shell 脚本。我能做的是：

```
void dostuff(string s) {
    system("echo " + s + " | myscript.sh");
    ...
} 
```

当然，转义 s 是相当困难的。有没有办法可以将 s 用作 myscript.sh 的标准输入？即，像这样：

```
void dostuff(string s) {
    FILE *out = stringToFile(s);
    system("myscript.sh", out);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T22:52:24.727

`system`重新分配标准输入并在调用后恢复它的简单测试：

```
#include <cstdlib>     // system
#include <cstdio>      // perror
#include <unistd.h>    // dup2
#include <sys/types.h> // rest for open/close
#include <sys/stat.h>
#include <fcntl.h>
#include <errno.h>

#include <iostream>

int redirect_input(const char* fname)
{
    int save_stdin = dup(0);

    int input = open(fname, O_RDONLY);

    if (!errno) dup2(input, 0);
    if (!errno) close(input);

    return save_stdin;
}

void restore_input(int saved_fd)
{
    close(0);
    if (!errno) dup2(saved_fd, 0);
    if (!errno) close(saved_fd);
}

int main()
{
    int save_stdin = redirect_input("test.cpp");

    if (errno)
    {
        perror("redirect_input");
    } else
    {
        system("./dummy.sh");
        restore_input(save_stdin);

        if (errno) perror("system/restore_input");
    }

    // proof that we can still copy original stdin to stdout now
    std::cout << std::cin.rdbuf() << std::flush;
} 
```

效果很好。我用这样一个简单的`dummy.sh`脚本对其进行了测试：

```
#!/bin/sh
/usr/bin/tail -n 3 | /usr/bin/rev 
```

注意最后一行将标准输入转储到标准输出，所以你可以像这样测试它

```
./test <<< "hello world" 
```

并期待以下输出：

```
won tuodts ot nidts lanigiro ypoc llits nac ew taht foorp //    
;hsulf::dts << )(fubdr.nic::dts << tuoc::dts    
}
hello world 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T23:51:20.767

使用`popen`：

```
void dostuff(const char* s) {
  FILE* f = fopen(s, "r");
  FILE* p = popen("myscript.sh", "w");
  char buf[4096];
  while (size_t n = fread(buf, 1, sizeof(buf), f))
    if (fwrite(buf, 1, n, p) < n)
      break;
  pclose(p);
} 
```

您需要添加错误检查以使其健壮。

请注意，我更喜欢 a `const char*`，因为它更灵活（与 以外的东西一起使用`std::string`）并且与内部发生的事情相匹配。如果您真的喜欢`std::string`，请这样做：

```
void dostuff(const std::string& s) {
    FILE* f = fopen(s.c_str(), "r");
    ⋮ 
```

另请注意，选择 4096 字节缓冲区是因为它与大多数系统上的页面大小相匹配。这不一定是最有效的方法，但它适用于大多数用途。我发现 32 KiB 是我自己在笔记本电脑上进行的不科学测试中的最佳选择，所以你可能想玩一玩，但如果你对效率很认真，你会想要切换到异步 I/O，然后开始开始写入[n]后立即读取[n+1]。

# jquery - Jquery 在控制台中运行良好，但在我加载页面时运行良好

> ID：12764551
> 
> 赞同：0
> 
> 时间：2012-10-06T22:47:07.900
> 
> 标签：jquery

我有一段用于图像库的 jquery 代码，我有一个 js 文件以及一些其他函数。当我通过单击链接加载画廊时，图像会出现，但效果不起作用。但是，当我将相关代码粘贴到 chrome 控制台并按 Enter 时，它就像一个魅力。有没有我忽略的某种冲突？我的 jquery 代码如下（尽管我认为它没有问题，因为当我让代码在单独的网页上或通过控制台独立运行时它工作得很好）：

```
$(document).ready(function() { //perform actions when DOM is ready
  var z = 0; //for setting the initial z-index's
  var inAnimation = false; //flag for testing if we are in a animation

  $('#pictures img').each(function() { //set the initial z-index's
    z++; //at the end we have the highest z-index value stored in the z variable
    $(this).css('z-index', z); //apply increased z-index to <img>
  });

  function swapFirstLast(isFirst) {
    if(inAnimation) return false; //if already swapping pictures just return
    else inAnimation = true; //set the flag that we process a image

    var processZindex, direction, newZindex, inDeCrease; //change for previous or next image

    if(isFirst) { processZindex = z; direction = '-'; newZindex = 1; inDeCrease = 1; }     //set variables for "next" action
    else { processZindex = 1; direction = ''; newZindex = z; inDeCrease = -1; } //set variables for "previous" action

    $('#pictures img').each(function() { //process each image
      if($(this).css('z-index') == processZindex) { //if its the image we need to process
        $(this).animate({ 'top' : direction + $(this).height() + 'px' }, 'slow', function() { //animate the img above/under the gallery (assuming all pictures are equal height)
          $(this).css('z-index', newZindex) //set new z-index
            .animate({ 'top' : '0' }, 'slow', function() { //animate the image back to its original position
              inAnimation = false; //reset the flag
            });
        });
      } else { //not the image we need to process, only in/de-crease z-index
        $(this).animate({ 'top' : '0' }, 'slow', function() { //make sure to wait swapping the z-index when image is above/under the gallery
          $(this).css('z-index', parseInt($(this).css('z-index')) + inDeCrease); //in/de-crease the z-index by one
        });
      }
    });

    return false; //don't follow the clicked link
  }

  $('#next a').click(function() {
    return swapFirstLast(true); //swap first image to last position
  });

  $('#prev a').click(function() {
    return swapFirstLast(false); //swap last image to first position
  });
}); 
```

**更新 1**：脚本中有另一个 hashchange 函数，它是这样的：

```
$(function(){
  $(window).hashchange( function(){
    $(document).ready(function() {

    var hash = window.location.hash.substr(1);
    var href = $('#nav li a').each(function(){
    var href = $(this).attr('href');
        if((hash==href.substr(0,href.length-4))&&(hash!='')){
        var toLoad = hash+'.php #content';
        $('#content').load(toLoad);
    }                                           
});
$('#nav li a').click(function(){

    var toLoad = $(this).attr('href')+' #content';
    $('#content').load(toLoad);

});

});
  }) 
```

似乎每次 URL 中有 hashchange 时都会调用这个函数，这可能是我的画廊函数没有被调用的原因。我曾尝试将画廊函数放在 hashchange 函数中，但它不起作用。我感觉这里有冲突，因为我的画廊功能中的警报没有触发。

**更新2：**我在jquery-documentation中阅读了加载函数，如果加载函数像这样执行 $('#b').load('article.html #target'); 然后不执行正在加载的文档中的脚本块。这可能是问题所在，我该如何克服这个问题？

# wpf - 使用未呈现的控件的视觉画笔？

> ID：12764554
> 
> 赞同：1
> 
> 时间：2012-10-06T22:47:12.440
> 
> 标签：wpf, image, wpf-controls, rendering, visualbrush

我现在正在玩一个想法，但我遇到了砖墙。我正在使用控制台应用程序在内存中创建视觉控件（准确地说是 DevExpress 图表控件），然后我尝试使用 VisualBrush 将该控件保存到图像中，但它不起作用，因为（我假设）控件不被绘制到屏幕上。

我把我的代码放在下面，所以你知道我现在在哪里。有谁知道我如何使用控制台应用程序将此控件保存到图像（最好是 jpg，但任何事情都可以......）？我真的不想为了能够保存它而将它渲染到屏幕上，即使是一毫秒...

```
static void sl_CreateDetail(FrameworkElement chartControl1, CreateAreaEventArgs e)
{
        var brush = new VisualBrush(chartControl1);
        var visual = new DrawingVisual();
        DrawingContext context = visual.RenderOpen();

        context.DrawRectangle(brush, null,
            new Rect(0, 0, chartControl1.ActualWidth, chartControl1.ActualHeight));
        context.Close();

        var bmp = new RenderTargetBitmap((int)chartControl1.ActualWidth,
            (int)chartControl1.ActualHeight, 96, 96, PixelFormats.Pbgra32);

        bmp.Render(visual);
        e.Data = bmp;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T07:37:24.087

在呈现控件之前，您必须通过调用[Measure](http://msdn.microsoft.com/en-us/library/system.windows.uielement.measure.aspx)和[Arrange](http://msdn.microsoft.com/en-us/library/system.windows.uielement.arrange.aspx)手动进行布局。这要求您指定所需的控件大小，例如通过显式设置其 Width 和 Height 属性。

不需要VisualBrush和DrawingVisual，可以直接将控件渲染到RenderTargetBitmap。

```
chartControl1.Measure(new Size(double.PositiveInfinity, double.PositiveInfinity));
chartControl1.Arrange(new Rect(0, 0, chartControl1.Width, chartControl1.Height));
chartControl1.UpdateLayout();

var bmp = new RenderTargetBitmap((int)chartControl1.ActualWidth,
    (int)chartControl1.ActualHeight, 96, 96, PixelFormats.Pbgra32);

bmp.Render(chartControl1); 
```

如果控件在布局期间（在 Measure 中）计算首选大小，您也许可以使用其[DesiredSize](http://msdn.microsoft.com/en-us/library/system.windows.uielement.desiredsize.aspx)属性进行渲染。

```
chartControl1.Measure(new Size(double.PositiveInfinity, double.PositiveInfinity));
chartControl1.Arrange(new Rect(new Point(), chartControl1.DesiredSize));
chartControl1.UpdateLayout(); 
```

* * *

另请注意，渲染线程的[ApartmentState](http://msdn.microsoft.com/en-us/library/System.Threading.ApartmentState.aspx)必须为`STA`. 在控制台应用程序中，您可以简单地将[STAThread](http://msdn.microsoft.com/en-us/library/system.stathreadattribute.aspx)属性应用于 Main 方法。

```
[STAThread]
static void Main(string[] args)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T13:16:22.063

我尝试了 Measure()、Arrange() 等，然后发现如果 Visual 有父级，这些都可以工作！在我的情况下，我从一个容器中删除了 Visual，更新了它的属性（颜色等），然后尝试将它用作 VisualBrush，但它没有得到更新。在 Measure() 和 Arrange() 期间将其留在原始容器中修复它（即使它全部在屏幕外完成）。

# php - 包括来自不同目录的文件

> ID：12764555
> 
> 赞同：1
> 
> 时间：2012-10-06T22:47:21.047
> 
> 标签：php, filepath

所以我在一个文件夹中设置了我的包含文件，例如`header.php`、`nav.php`和。`footer.php``/inc`

然后我将文件包含在我的页面中。但是，如果我有另一个文件夹，例如`wiki`我想将这些文件包含到 wiki 的页面中，则包含的文件路径会中断。

示例：我已将其包含在`wiki`目录的页面中。

```
<?php include_once('../inc/header.php'); ?> 
```

我在 header.php 文件中还有另外两个包含，但由于我将它们包含在不同的目录中，因此两个都包含中断，除非我去并`../`在包含路径中附加 a。

我想知道将文件包含在不同目录中而不必返回并修复路径的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T22:50:50.547

在初始文件中使用创建常量`realpath`，然后使用易于阅读和管理但现在使用绝对路径来引用它们。

你可以在这里看到一个例子：

[如何从 PHP 获取我的 URL 的“应用程序根”？](https://stackoverflow.com/questions/2311983/how-can-i-get-the-application-root-of-my-url-from-php)

我还建议在定义之前测试常量定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T22:48:56.883

最简单的解决方案？使用绝对路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T22:59:50.550

如果文件位于同一级别的目录中，则相对路径（带有../）将相同。如果您在另一个中有一个，则需要在子目录中的一个开头有 ../。更改路径的唯一方法是创建一个链接作为表示主目录的子目录，尽管这可能会产生与递归过程相关的危险后果。

顺便说一句，include_once 意味着这个操作是“可选的”，意味着程序将继续执行。如果您需要包含的文件，请使用 require_once，如果不存在，程序将中断。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T22:50:39.517

像这样包括他们

```
require_once(dirname(__FILE__).DIRECTORY_SEPARATOR.'inc'.DIRECTORY_SEPARATOR.'header.php'); 
```

这可以工作！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T22:55:02.230

我喜欢使用这种方法：

```
define('ROOT_DIR', dirname(__FILE__) . '/'); // Defined on the index or in the bootstrap
include(ROOT_DIR . 'subfolder/fileName.php'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-07T00:17:46.817

如果您使用 PHP 的本机 set_include_path 添加包含文件夹，则可以仅按名称包含文件。

```
<?php
/**
 * The path to your /inc/ folder.
 */
$path = '/absolute/path/to/inc/';

/**
 * get_include_path retrieve's the current include path. 
 * It's a bad idea to over write the entire include path
 * The PATH_SEPARATOR constant is set per operating system
 */
set_include_path(get_include_path() . PATH_SEPARATOR . $path);

/**
 * You can now include any files in /inc/ from any directory with no path
 */
include_once('header.php');
?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-07T01:19:16.093

`$_SERVER['DOCUMENT_ROOT']`为您提供您的`DocumentRoot`网络服务器，例如 Apache。然后你可以把它作为一个稳定的基准并从那里映射，因为它不会改变。

```
include_once($_SERVER['DOCUMENT_ROOT'].'/inc/header.php'); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-17T21:33:32.643

如果有帮助，我发现在 IIS 上运行时我必须执行 str_replace("\\","/",$_SERVER['DOCUMENT_ROOT']) 。

# git - Git 如何获取分支的数据？

> ID：12764558
> 
> 赞同：2
> 
> 时间：2012-10-06T22:48:20.147
> 
> 标签：git, branch, git-branch

我想知道 Git 在哪里保存分支中的所有数据。每次切换分支时，所有数据都会被放回原位，而来自另一个特定分支的数据只会被删除。

在较慢的 CPU/HDD 上从另一个分支带回数据是否需要更长的时间？内部如何运作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T22:55:54.090

Git 将文件数据存储在称为“blob”的对象中。这些存储在`.git/objects`存储库中的目录中。

Blob 到目录结构的映射是由称为“树”的对象完成的，这些对象是递归的 - 在子目录的情况下，一棵树可以引用其他树。

提交反过来又引用了一个特定的树，它是提交时存储库根目录的状态。

分支只是指向特定提交的指针。

当你签出一个分支时，Git 会去查找它指向的提交。从那里，它加载提交引用的树，并从中获取应该与树中每个位置匹配的精确 blob。然后它将这些 blob 的内容加载到正确的文件路径中。

为了帮助解决这个问题，它使用索引，这是文件状态到目录树中路径的映射，以及它们内容的哈希值和它们最后修改时间的记录。Git 使用这些哈希和 mtime 来快速识别哪些文件需要更新，并加载正确的内容。

* * *

任何类型的工作在较慢的 CPU+HDD 上都会花费更长的时间，因为它不受时间的特别限制。它将使用尽可能多的 CPU/磁盘速度。也就是说，Git 相当高效，因此除非您有大量文件或非常大的文件内容更改（或非常慢的设备），否则它通常会很快运行。

# javascript - 为什么 table 和 tbody 的 scrollHeight > clientHeight 用于 stackoverflow 问题？

> ID：12764559
> 
> 赞同：1
> 
> 时间：2012-10-06T22:48:28.127
> 
> 标签：javascript, google-chrome

正在制作一个函数来列出给定节点的父可滚动元素并使用此检查

```
( e.scrollWidth > e.clientWidth ) || ( e.scrollHeight > e.clientHeight ) 
```

当我在打开的页面上测试它时（stackoverflow 问题），我注意到问题和答案的`<table>`and`<tbody>`元素返回`true`。`<table>`页面上的其他元素和元素不会发生这种情况`<tbody>`。

我最初的**猜测**是边框或边距，但似乎并非如此（如下面的代码所示，请在此页面上尝试）。

这是怎么回事，我将如何检查它？

* * *

```
var tbodys = document.getElementsByTagName('tbody'), css,
    i = tbodys.length;
while( i-- > 0 ) console.log(
                     tbodys[i],
                     tbodys[i].scrollHeight > tbodys[i].clientHeight,
                     (css = window.getComputedStyle( tbodys[i] )).border,
                     css.margin,
                     css.padding,
                     css.position,
                     css.top
                 ); 
```

我不知道这是否适用于所有浏览器，仅适用于 Google Chrome 或更具体的浏览器。

# html - 如何给桌子100％的高度？

> ID：12764560
> 
> 赞同：-4
> 
> 时间：2012-10-06T22:48:54.483
> 
> 标签：html, css

> **可能重复：**
> [如何将 HTML 表格拉伸到浏览器窗口高度的 100%？](https://stackoverflow.com/questions/90049/how-to-stretch-an-html-table-to-100-of-the-browser-window-height)

正如标题所说，即使表格没有足够的内容来填充页面的 100% 高度，我如何才能让我的表格元素具有 100% 的高度

我怎样才能做到这一点？先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T22:58:57.897

可能重复：[如何将 HTML 表格拉伸到浏览器窗口高度的 100%？](https://stackoverflow.com/questions/90049/how-to-stretch-an-html-table-to-100-of-the-browser-window-height)

我制作了一个 jsFiddle 示例，说明如何执行此操作：http: [//jsfiddle.net/mkZ74/](http://jsfiddle.net/mkZ74/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T22:53:32.770

您可以尝试将表格添加到 div 并将 div 显示样式设置为 block ，如 style="display: block;"。这将确保您的 div 扩展到最大 content ，在您的情况下是 table。

# youtube-api - 嵌入 YouTube 视频时，有没有办法让它们变得很小？

> ID：12764572
> 
> 赞同：0
> 
> 时间：2012-10-06T22:51:31.970
> 
> 标签：youtube-api

如果你看[这里，](http://dateequalsnull.com)你会看到一些 YouTube 视频。我将它们的缩放设置为 0.9。我希望变焦在 0.3 左右，但是当变焦那么小时，许多 YouTube 视频将无法播放。有什么办法可以达到效果，还能播放视频吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:13:21.197

YouTube 播放器的最小嵌入尺寸为 200 像素 x 200 像素。您可以阅读 YouTube api 博客了解更多详细信息。 [http://apiblog.youtube.com/2012/03/minimum-embeds-200px-x-200px.html](http://apiblog.youtube.com/2012/03/minimum-embeds-200px-x-200px.html)

# java - DAO 类是否应该依赖于其他 dao 类？

> ID：12764578
> 
> 赞同：2
> 
> 时间：2012-10-06T22:52:12.770
> 
> 标签：java, dao

通常，我会尝试以一种完全依赖于自身的方式来构建我的 DAO 类。它们可以与多个表交互，但前提是数据与基础对象相关。例如，假设我有一个约会对象，约会 DAO 从约会表中提取数据。如果约会表是一个服务 id，它是一个将约会绑定到服务的外键，可以说一列。services 表完全独立于约会，并且有自己的 DAO，用户可以在其中添加或删除服务。

约会对象有一个服务字段，用于存储服务对象。我这样做是因为在许多情况下，在处理约会时有必要引用这个服务对象。

在约会 DAO 中，我可以编写单独的 SQL 语句来从其表中提取服务数据并在约会 DAO 中重新映射所有这些，但所有这些都已经在服务 DAO 中完成，就像调用 serviceDao.find 一样简单（服务标识）。在我的约会 DAO 中引用服务 DAO 感觉有点脏。这是因为我有设计问题还是可以做这种事情？我试过研究这个问题，结果是 50/50。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T23:25:56.923

为什么让一个服务 DAO 引用另一个服务如此糟糕？

您需要注意的一个问题是延迟导致死亡。如果您的服务 DAO 带回 N 个实例，然后您循环这些结果以带回其他东西，那么您将有 N+1 个查询 - 和 N+1 个网络往返 - 其中一个 JOIN 的单个往返将带来所有这些数据立即返回。

我建议您不要担心 DAO，而更多地关注编写最好、最高效的 SQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T23:09:49.717

我不确定是否有特定的“标准”，但我通常从商业意义上而不是实体来组织我的 DAO。因此，如果约会和服务通常以某种形式相关，我可能最终会将它们放在一起。可能类似于 AppointmentServicesDAO（如果这是一个合适的名称）。每个实体都有一个对象更适合模型而不是 DAO。

我同意你的观点，感觉很脏。我通常也不喜欢在 DAO 中调用其他 DAO。如果确实需要在类中进行某种分离，那么可能需要一些基本的继承。

但同样，我还没有研究过硬核标准。主要来自经验，所以如果有人有更好的建议，很想听听他们的意见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:56:47.670

我将仅通过 id 引用属于其他 DAO 的对象（在您的示例中为“服务”id），并使用对象缓存来干净地分离这两种类型的对象。

# javascript - 如果我知道位置，我可以在本地文件上使用 Javascript 的 FileReader 吗？

> ID：12764583
> 
> 赞同：0
> 
> 时间：2012-10-06T22:52:52.933
> 
> 标签：javascript, filereader

我将 JavaScript 与 FileReader 和 readAsDataURL 一起使用，因此我可以将图像转换为 base64 代码，然后存储并在以后显示 base64 图像代码。当我选择一个文件时，我有一个可以正常工作的按钮，但我的问题是：如何只使用本地文件的 url（例如 C:\folder\image.gif）（不使用文件输入按钮) 并从该本地图像文件 url 创建一个图像对象以与 FileReader readAsDataURL 函数一起使用？如果 FileReader 无法做到这一点，是否有另一种方法可以在脚本中自动将本地文件转换为 base64 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T23:03:15.917

你不能。允许网站打开任意本地文件将是一个*严重的安全问题*。没有什么可以阻止诸如在用户不知情的情况下获取密码文件或其他敏感信息之类的事情。出于这个原因，对文件输入也有严格的限制，并且要清楚地传达意图。

# twitter-bootstrap - 浮动问题 - 并排放置 div

> ID：12764588
> 
> 赞同：0
> 
> 时间：2012-10-06T22:53:59.367
> 
> 标签：twitter-bootstrap, css-float

你好，

我想要两个在同一级别有两个绿色箭头。现在右箭头比左箭头低；我正在使用（内联浮动）：

```
<div class="span6" style="float: right; " > 
```

我还希望将文本`12345`放在两个箭头的中心。

这是代码： http: [//jsfiddle.net/8E9aB/2/](http://jsfiddle.net/8E9aB/2/) - 我正在使用引导 css。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T23:23:51.920

可能的重复：[CSS：将 div 放置在标题内的左/中/右](https://stackoverflow.com/questions/11570107/css-placing-divs-left-center-right-inside-header?lq=1)

我已经用一个可能的解决方案更新了你的 jsFiddle：http: [//jsfiddle.net/8E9aB/3/](http://jsfiddle.net/8E9aB/3/)

我的回答基于：[https](https://stackoverflow.com/a/11570931/700926) ://stackoverflow.com/a/11570931/700926 ，它很好地解释了解决方案。

- 更新

当您使用 twitter 引导程序时，另一个解决方案可能是使用内置网格系统来完成或多或少相同的事情 - 在这里查看它：http: [//twitter.github.com/bootstrap/scaffolding.html #gridSystem](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)

# python - Python Unicode 编码

> ID：12764589
> 
> 赞同：5
> 
> 时间：2012-10-06T22:54:33.310
> 
> 标签：python, unicode, encode, argparse

我`argparse`用来读取我的 python 代码的参数。其中一个输入是`title`可以包含 Unicode 字符的文件 [ ] 的标题。我一直在`22少女時代22`用作测试字符串。

我需要将输入的值写入`title`文件，但是当我尝试将字符串转换为`UTF-8`它时，总是会引发错误：

> UnicodeDecodeError：“ascii”编解码器无法解码位置 2 中的字节 0x8f：序数不在范围内（128）

我一直在环顾四周，发现我需要我的字符串以`u"foo"`调用`.encode()`它的形式出现。

当我运行`type()`我的输入时，`argparse`我看到：

```
<type 'str'> 
```

我希望得到以下答复：

```
<type 'unicode'> 
```

我怎样才能以正确的形式获得它？

**主意：**

修改`argparse`以接受 a`str`但将其存储为 unicode 字符串`u"foo"`：

```
parser.add_argument(u'title', metavar='T', type=unicode, help='this will be unicode encoded.') 
```

这种方法根本行不通。想法？

**编辑1：**

一些示例代码在`title`哪里`22少女時代22`：

```
inputs = vars(parser.parse_args())
title = inputs["title"]
print type(title)
print type(u'foo')
title = title.encode('utf8') # This line throws the error
print title 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-06T23:04:53.460

看起来您的输入数据采用[SJIS 编码](https://en.wikipedia.org/wiki/Shift_JIS)（日语的传统编码），它在字节串的第 2 位产生字节 0x8f：

```
>>> '22少女時代22'.encode('sjis')
b'22\x8f\xad\x8f\x97\x8e\x9e\x91\xe322' 
```

（在 Python 3 提示符下）

现在，~~我猜是~~“将字符串转换为 UTF-8”，你使用了类似的东西

```
title.encode('utf8') 
```

问题在于它`title`实际上是一个包含 SJIS 编码字符串的字节串。由于 Python 2 中的设计缺陷，字节串可以直接`encode`d，并且假定字节串是 ASCII 编码的。所以你所拥有的在概念上等同于

```
title.decode('ascii').encode('utf8') 
```

当然`decode`通话失败。

您应该在编码为 UTF-8 之前从 SJIS 显式解码为 Unicode 字符串：

```
title.decode('sjis').encode('utf8') 
```

* * *

正如 Mark Tolonen 指出的那样，您可能正在将字符输入控制台，而您的控制台编码是非 Unicode 编码。

所以事实证明你的`sys.stdin.encoding`is [`cp932`](https://en.wikipedia.org/wiki/Code_page_932)，它是微软的 SJIS 变体。为此，使用

```
title.decode('cp932').encode('utf8') 
```

您确实*应该*将控制台编码设置为标准 UTF-8，但我不确定这在 Windows 上是否可行。如果这样做，您可以跳过解码/编码步骤，只需将输入字节串写入文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T23:17:44.313

设置`type=unicode`就像在 Python 2.X 上使用`unicode(arg)`默认解码。`ascii`如果从控制台运行，`sys.stdin.encoding`是用于输入的编码，例如：

```
inputs = vars(parser.parse_args())
title = inputs["title"]
print type(title)
print type(u'foo')
title = title.decode(sys.stdin.encoding)
print title 
```

无论 Windows 上的`mbcs`编码如何，编码都应该起作用，它表示非 Unicode Windows 程序使用的当前编码。这似乎是`argparse`正在使用的，因为我`sys.stdin.encoding`是*OEM*控制台编码，它并不总是与 Windows 编码相同。在美国 Windows 上，`cp437`是控制台 OEM 编码并且`cp1252`是 Windows 编码：

```
import argparse
import codecs
parser = argparse.ArgumentParser()
parser.add_argument(u'title', metavar='T', type=str, help='this will be unicode encoded.')
opts = parser.parse_args()
title = opts.title.decode('mbcs')
with codecs.open('out.txt','w',encoding='utf-8-sig') as f:
    f.write(title) 
```

`out.txt`应该在记事本中显示原始输入。

编码在 UTF-8 文件的开头写入 Windows 喜欢的`utf-8-sig`所谓字节顺序标记 (BOM)。 `utf-8`如果不需要，可以使用，但记事本喜欢它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-06T23:01:21.343

所以，这实际上对我有用：

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument(u'title', metavar='T', type=str, help='this will be unicode encoded.')
opts = parser.parse_args()
print opts.title.decode('utf8') 
```

我的终端模拟器（OS X Terminal.app）使用 UTF-8。如果您的终端未配置为 UTF-8 操作，那么它将无法工作（然后这是终端问题，而不是 Python 问题）。

# ruby-on-rails - 未定义的方法'model_name'

> ID：12764590
> 
> 赞同：0
> 
> 时间：2012-10-06T22:54:57.247
> 
> 标签：ruby-on-rails

我不断得到 NilClass:Class 的未定义方法“model_name”。

在布局文件中：[application.html.erb]

```
 <section id="featured">
        <%= render 'subscribers/new' %>
    </section> 
```

在部分表单中：[视图 > 订阅者 > _new.html.erb]

```
 <%= form_for @subscriber, :url => subscribe_path do |f| %> [THIS LINE PRODUCES THE ERROR]
        <div class="field">
          <%= f.text_field :email %>
        </div>
        <div class="actions">
          <%= f.submit 'Add me to the list' %>
        </div>
    <% end %> 
```

在订阅者控制器中：[控制器>订阅者控制器.rb]

```
 def new
     @subscriber = Subscriber.new
   end 
```

我是 ROR 的初学者，我环顾了 StackOverflow，但找不到针对我的具体案例的任何答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:53:01.923

当您看到此错误时，您正在走哪条路？

如果您要导航到除`/subscribers/new`then之外的任何路径，则表单`@subscriber`将`nil`抛出您所看到的错误。您正在通过视图布局中的部分呈现表单，该布局在整个应用程序中呈现（可能）。因此`@subsriber`不会总是被设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T02:06:42.653

问题是，您直接在布局中呈现订阅者/新模板，但仅在订阅者控制器中初始化订阅者。

您需要创建一个subscribers/new.html.erb 文件（没有前导下划线，所以它不是部分）

在你的布局文件的某个地方你应该有一个`yield`电话。当您访问 /subscribers/new 时，rails 会呈现 new.html.erb 模板文件，并将其填充`yield`到布局中调用的位置。

如果您真的需要在每个页面上都使用此表单，则需要在每个页面上初始化一个新的订阅者。您可以使用应用程序控制器中的前置过滤器来执行此操作。但是，您将不需要订阅者控制器中的新操作。

# git - Git：如何查找 origin/master 是否等同于（本地）master？

> ID：12764592
> 
> 赞同：2
> 
> 时间：2012-10-06T22:55:08.410
> 
> 标签：git, git-diff, git-fetch, git-status

`git fetch`通过网络并从`origin/master`本地主机获取最新的快照。它不会合并，只是获取快照。如果`git fetch`我们这样做`git status`了，它会告诉我们（本地）`master`是领先还是落后`origin/master`。

我想要的只是一个 git 命令，它只会告诉我们 (local) 的内容是否`master`等同于`origin/master`. 显然，它必须通过网络来确定，但它不应该打印任何关于其发现的消息（如输出`git fetch`或任何其他 git 命令），最后，只输出`yes/true`（如果等效）或`no/false`（如果不同）或其他东西相似的。

是否有任何 git 内部命令或 api 可以做到这一点？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T23:02:10.687

您可以使用该`-q`标志来静音`git fetch`：

```
git fetch -q
if [ "$(git rev-parse origin/master)" == "$(git rev-parse master)" ]; then
    echo yes
else
    echo no
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T03:49:44.820

我终于使用了以下代码片段。

```
output=`git fetch --dry-run 2>&1`

if [ "$output" != "" ]; then
    echo "***********************************************"
    echo "*                    ERROR                    *"
    echo "* Your git source directory is not up to date *"
    echo "***********************************************"
fi 
```

解析输出时出现问题，`git fetch --dry-run`但发现控制台消息属于`stderr` [Git：无法重定向/解析 'git fetch --dry-run' 命令的输出](https://stackoverflow.com/questions/13146187/git-unable-to-redirect-parse-the-output-of-git-fetch-dry-run-command)

# javascript - 异步画布操作干扰 javascript 事件循环。

> ID：12764594
> 
> 赞同：0
> 
> 时间：2012-10-06T22:55:30.657
> 
> 标签：javascript, loops, canvas, asynchronous, 2d-games

我正在开发一个大量使用 canvas 元素的 HTML5 游戏。有一个持续的事件循环更新主画布元素，然后需要定期对其进行重大更改。基本上，随着角色四处移动，背景会更新。发生这种情况时会出现明显的停顿，因此我尝试使用异步函数执行操作，但我似乎受到了完全相同的性能影响。我已经尝试在异步函数中对不可见的画布执行所有操作，然后在事件循环中完成后将其复制到主画布，但同样没有提高性能。

我编写了这个荒谬的小程序，它似乎重复了我正在谈论的行为。似乎捆绑画布元素，即使在异步函数中，也会影响程序的其余部分。

```
var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');
var ImDat=ctx.createImageData(1000,1000);
var ticker = 0;

ImDat.setPixel=function(x,y,c){
   var i=(x+y*this.width)*4;
   this.data[i]=c.R;
   this.data[i+1]=c.G;
   this.data[i+2]=c.B;
   this.data[i+3]=c.A;
}

var bigOperation = function() {
   for (var i = 0; i < 20; i++) {
      lilOperation();
   }
   console.log(new Date + 'big op done');
}

var lilOperation = function() {
   for (var i = 0; i < canvas.width; i++) {
      for (var j = 0; j < canvas.height; j++) {
         ImDat.setPixel(i, j, { R: Math.random() * 256, G: Math.random() * 256, B: Math.random() * 256, A: 256 });
      }
   }
   ctx.putImageData(ImDat, 0, 0);
}

var eventLoop = function() {
   if (ticker == 50) {
      ticker = 0;
      console.log(new Date + 'big op start'); 
      window.setTimeout(bigOperation, 1);                     
   } else {
      ticker++;
   }
      lilOperation();
      console.log(new Date + 'normal loop');  
}

window.setInterval(eventLoop, 10); 
```

因此，您会注意到在调用 bigOperation 函数之前记录了一致的时间间隔，此时事件循环会暂停片刻。请注意，我正在一个非常糟糕的系统上进行此操作，因此您可能必须增加 bigOperation 中的迭代次数才能获得效果。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:20:43.780

即使您使用 setTimeout，执行也会锁定所有内容，直到函数调用完成，这只是 Javascript 的本质。这实际上是一种祝福而不是一种诅咒，因为它大大简化了事情。

由于 Javascript 的单线程特性，发明了一种称为“Web Workers”的东西。这是浏览器中一个相对较新的功能，但它允许您执行单独运行的任务而无需锁定主线程。[在现代浏览器中，您可以使用 web workers 执行画布任务](https://stackoverflow.com/questions/1864756/web-workers-and-canvas)。

现在，在对您的游戏一无所知的情况下，听起来您想要实现的目标（更新背景图形、移动角色等）应该是可能的，而无需调用需要很长时间才能执行的繁重函数。您是否在执行大量每像素操作？如果是这样，他们不能通过其他方式完成吗？在考虑使用网络工作者之前，我实际上会开始考虑优化你的代码。

# java - Java 子类化泛型参数

> ID：12764597
> 
> 赞同：0
> 
> 时间：2012-10-06T22:55:46.460
> 
> 标签：java, generics, inheritance, abstract

如果以前有人问过这个问题，我很抱歉，但我真的不知道要搜索什么。

无论如何，我正在制作一个数学包，并且许多类都扩展了 Function：

```
package CustomMath;

@SuppressWarnings("rawtypes")
public abstract class Function <T extends Function> {

    public abstract Function getDerivative();

    public abstract String toString();

    public abstract Function simplify();

    public abstract boolean equals(T comparison);

} 
```

我想比较函数以查看它们是否相等。如果它们来自同一个类，我想使用其特定的比较方法，但如果它们属于不同的类，我想返回 false。这是我目前的课程之一：

```
package CustomMath;

public class Product extends Function <Product> {

public Function multiplicand1;
public Function multiplicand2;

public Product(Function multiplicand1, Function multiplicand2)
{
    this.multiplicand1 = multiplicand1;
    this.multiplicand2 = multiplicand2;
}

public Function getDerivative() {
    return new Sum(new Product(multiplicand1, multiplicand2.getDerivative()), new Product(multiplicand2, multiplicand1.getDerivative()));
}

public String toString() {
    if(multiplicand1.equals(new RationalLong(-1, 1)))
        return String.format("-(%s)", multiplicand2.toString());
    return String.format("(%s)*(%s)", multiplicand1.toString(), multiplicand2.toString());
}

public Function simplify() {
    multiplicand1 = multiplicand1.simplify();
    multiplicand2 = multiplicand2.simplify();
    if(multiplicand1.equals(new One()))
        return multiplicand2;
    if(multiplicand2.equals(new One()))
        return multiplicand1;
    if(multiplicand1.equals(new Zero()) || multiplicand2.equals(new Zero()))
        return new Zero();
    if(multiplicand2.equals(new RationalLong(-1, 1))) //if one of the multiplicands is -1, make it first, so that we can print "-" instead of "-1"
    {
        if(!multiplicand1.equals(new RationalLong(-1, 1))) // if they're both -1, don't bother switching
        {
            Function temp = multiplicand1;
            multiplicand1 = multiplicand2;
            multiplicand2 = temp;
        }
    }
    return this;
}

public boolean equals(Product comparison) {
    if((multiplicand1.equals(comparison.multiplicand1) && multiplicand2.equals(comparison.multiplicand2)) || 
            (multiplicand1.equals(comparison.multiplicand2) && multiplicand2.equals(comparison.multiplicand1)))
        return true;
    return false;
}

} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T21:36:25.447

覆盖 Object.equals(Object) 方法。您不需要在这里使用泛型。它的身体看起来像这样

```
if (other instanceof Product) {
    Product product = (Product) other;
    // Do your magic here
}

return false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T23:08:22.643

使用泛型，您可以保证 equals 方法仅适用于类型“T”，在本例中为“产品”。你不能传递另一个类类型。

另一种可能性是在类函数定义中：

`public abstract boolean equals(Function comparison);`

在产品类中，对象比较与`comparison instanceof Product`

# php - 将项目添加到嵌套的类别列表

> ID：12764601
> 
> 赞同：0
> 
> 时间：2012-10-06T22:56:04.493
> 
> 标签：php, nested-lists

目前，为了将类别添加到另一个类别中，我正在显示一个下拉菜单

看起来像这样

```
root
- Level-1
-- Level-2
--- Level-3
-- Another Level-2
- Level-1 again 
```

等等，这看起来很丑，而且用户体验很差，因为有很多类别&子类别&子子类别......等等。

所以基本上，我正在寻找改善用户体验的建议，如何明确哪个类别属于哪个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:59:33.243

这是有关 optgroup 标记的一些信息。我不确定它是否支持多级嵌套，但它可能至少有助于第一级：[Nesting optgroups in a dropdownlist/select](https://stackoverflow.com/questions/1037732/nesting-optgroups-in-a-dropdownlist-select)

# java - JavaFx Scenbuilder ImageView 质量

> ID：12764606
> 
> 赞同：1
> 
> 时间：2012-10-06T22:57:06.193
> 
> 标签：java, css, javafx, scenebuilder

大家好，我一直在使用 JavaFx 场景构建器来构建一个包含一些 png 图片的 gui。

到目前为止，我一直在使用标签，然后将它们放大以适合图片（以便图片可见。但是这个解决方案并不令人满意，因为当有人新连接到我的程序时，我需要创建 x 数量的这些图片。因此，我尝试使用 Imageview 进行实验，但是当我使用 Imageview 时，图片的质量似乎更差。有谁知道 A.我如何制作标签并使用图片将其设置为特定大小并确保新图片始终为 1 适合整体的特定尺寸

或 B 提高 ImageView 的质量或知道是否有更好的选择可以用来显示我的角色的小图片:)

最好的问候马克拉斯穆森

附言。如果您需要我的程序的图像，那么我很乐意将其添加到评论中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T15:30:07.153

```
final ImageView anImage = new ImageView();   
        Image image1 = new Image(StackedBarM.class.getResourceAsStream("a.png"));
        anImage.setImage(image1);
        anImage.setFitWidth(40);
        anImage.setPreserveRatio(true);
        anImage.setSmooth(true); 
        anImage.setCache(true); 
```

对我来说，缩小尺寸后它的质量差异很小。您可以随时重新调整图像大小并将其保存在 PS 中以适应您所需的尺寸。

# spring - Spring Social 500 例外

> ID：12764608
> 
> 赞同：0
> 
> 时间：2012-10-06T22:57:55.323
> 
> 标签：spring, facebook-graph-api, jackson, spring-social

我正在使用 Spring Social 将我的应用程序与 Facebook 集成。我从 github 查看了他们的快速入门项目。我将属性文件更改为拥有自己的应用程序 ID。

运行项目后，我看到登录页面。但之后我收到以下错误：

```
HTTP Status 500 - Handler processing failed; nested exception is java.lang.NoClassDefFoundError: org/codehaus/jackson/map/type/CollectionType

description The server encountered an internal error (Handler processing failed; nested exception is java.lang.NoClassDefFoundError: org/codehaus/jackson/map/type/CollectionType) that prevented it from fulfilling this request.

exception 

org.springframework.web.util.NestedServletException: Handler processing failed; nested exception is java.lang.NoClassDefFoundError: org/codehaus/jackson/map/type/CollectionType
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:949)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 
```

谢谢。

编辑：

根据评论，

我不得不提到我已经添加了杰克逊罐子。已经尝试了 1.9.9 和 1.8.5 两个版本。

```
<dependency>
<groupId>org.codehaus.jackson</groupId>
<artifactId>jackson-mapper-asl</artifactId>
<version>1.8.5</version>
</dependency>
<plugin>
<groupId>org.codehaus.mojo</groupId>
<artifactId>tomcat-maven-plugin</artifactId>
<version>1.1</version>
 </plugin> 
```

我现在只写了 mapper，因为它本身也称为核心。但我也用核心尝试过同样的事情。仍然收到该错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:23:17.580

请从下载杰克逊罐

[这里](http://wiki.fasterxml.com/JacksonDownload)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T01:24:14.033

我设法解决了这个问题。因此，Social Spring 似乎适用于 Jackson 1.8.5 版本。而且我还需要添加核心和映射器罐子。

谢谢大家。

# image-processing - 使用opencv进行分词

> ID：12764624
> 
> 赞同：9
> 
> 时间：2012-10-06T23:00:05.183
> 
> 标签：image-processing, opencv, image-segmentation

我正在处理一些扫描的文本图像，我需要突出显示该图像中的所有单词。我知道这个问题等同于查找带有额外空格的子图像。

不能使用 OCR，我只需要用边框勾勒出每个单词。有人可以建议如何使用 OpenCV 来完成它。

我已经尝试阅读有关阈值和分段的信息。我只是在找人指点我一些相关的材料。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-08T16:42:52.403

我认为您的图像有多行文字。在那种情况下，首先你要做的就是检测这些线。

为此，首先**使用 Otsu 方法或自适应阈值对图像进行二值化。**

然后，您可以使用所谓的**“水平直方图”**。它本身就像一个直方图，但显示了哪里有线条，哪里有空格。因此，将图像划分为空白行，然后得到每一行。下面是水平直方图的图像。

![水平直方图](../Images/62b17f7aadd0e28b7163bb973dd2e0ec.png)

现在对于每一行，找到水平直方图。在此之前，尝试做一些**膨胀和腐蚀**，让所有的字母组合在一起。然后你可以在每一行找到**连接的组件**来获取每个单词。然后画出边界。

下图显示了水平和垂直直方图：

![水平和垂直直方图](../Images/31376fb0d2256e6e149e99364f61174f.png)

这个 SOF 可能会有所帮助：[如何将图像转换为字符段？](https://stackoverflow.com/questions/10964226/how-to-convert-an-image-into-character-segments)

# ssl - Heroku 自定义域 SSL 警告

> ID：12764627
> 
> 赞同：7
> 
> 时间：2012-10-06T23:01:07.330
> 
> 标签：ssl, heroku, hosting

我正在尝试为我的 Heroku Deployed 应用程序设置一个 GoDaddy 购买的自定义域。我让它工作，以便 www。*_* .com 正确转发到我的 herokuapp (cedar)，但是 1) 我尝试获取裸地址没有成功，以及 2) 当我第一次尝试登录自定义域时，我得到了一个浏览器-这个警告的依赖版本，我绝对不想要：

> “这可能不是您要查找的网站！...您可能不应该继续...在这种情况下，证书中列出的地址与您的浏览器尝试访问的网站的地址不匹配。一种可能原因是您的通信被提供不同网站证书的攻击者拦截，这将导致不匹配。另一个可能的原因是服务器设置为为多个网站返回相同的证书，包括一个您尝试访问的网站，即使该证书并非对所有这些网站都有效。谷歌浏览器可以确定您访问了 *.herokuapp.com，但无法验证该网站是否与您打算访问的网站相同. 如果您继续，Chrome 将不会检查任何进一步的名称不匹配。"

自定义地址之前的 HTTPS 以红色划掉。显然，我不想用这个警告吓跑访问者，但我也不想通过 GoDaddy 购买 SSL 证书。我真的不需要 SSL 加密。知道如何转发裸站点并使其正常工作而不会吓跑访问者吗？

谢谢。我知道这是一个模糊的问题，而不是 Stack Overflow 的专长，但我已经在 google/Heroku help/GoDaddy 周围搜索，发现可以帮助我解决所有这些问题的最新信息非常少。

萨沙

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-21T19:10:04.627

谢谢mc6688。试过了`zerigo`。我需要从根域和子域（如`www`. zerigo 解决了这个问题。

然而，Sasha 的问题与 DNS 无关，而与 SSL 有关。根据您的需要，有两种方法可以解决此问题：

1.  如果您可以使用，`http`那么在您的应用程序`environments/production.rb`中必须有以下配置`config.force_ssl = false`，默认情况下为 true。**将其更改**为假。如果 Firefox 仍然抱怨，请重置它。其他浏览器应该没问题。

2.  但是，如果您需要`https`，则必须通过付费服务 SSL 插件使用您自己的（而不是 heroku 的）证书。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-07T03:03:02.040

您是否将流量从您的域转发到 yourapp.herokuapp.com？

如果您完全了解转发和使用您自己的名称服务器 (DNS) 之间的区别，则不确定您的问题。

我猜您收到 https 错误的原因是因为您正在转发到 https。

我会使用 zerigo 插件，它确实简化了一切。您可以将您的域指向 Zerigo 的 DNS，而不是使用转发。

[https://devcenter.heroku.com/articles/zerigo_dns](https://devcenter.heroku.com/articles/zerigo_dns)

# c++ - 带无符号字符的算术

> ID：12764629
> 
> 赞同：1
> 
> 时间：2012-10-06T23:01:36.243
> 
> 标签：c++, math, types

我目前正在实现 RC4 解密，并且由于该算法仅适用于 0-255 之间的数字，因此我想编写尽可能安全的代码并正确使用`unsigned char`变量而不是普通变量`int`。

好吧，尽管这让我遇到了一种我无法预测会发生什么的情况。

给出了 3 个 vars `i`, `j`, `k`:

```
unsigned char i = 150;
unsigned char j = 155;
unsigned char k = 0; 
```

表达式是否会被正确`k = (i + j) % 256`设置`k`为`49`或被截断？`255``i+j`

编辑：修复了一个“j”被拼写为“k”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T23:05:18.140

该标准保证无符号整数类型的算术是算术模`2^N`，其中`N`是类型中值的位数，因此算术将是正确的。

C++11标准的n3376草案第3.9.1(4)节：

> 声明为无符号的无符号整数应遵守算术模 2 ^n的定律，其中`n`是该特定大小的整数的值表示中的位数。^(46))
> 
> ^(46))这意味着无符号算术不会溢出，因为不能由得到的无符号整数类型表示的结果以比得到的无符号整数类型可以表示的最大值大一的数字为模减少。

# sql-update - 使用 UNION 的 SQL 查询

> ID：12764630
> 
> 赞同：1
> 
> 时间：2012-10-06T23:01:40.747
> 
> 标签：sql-update, union

我是编写检查多个表的更大查询的新手。我有这个`SELECT`运行良好的查询：

```
$result = mysql_query("SELECT * FROM companies WHERE email='$email' UNION SELECT * FROM users WHERE email='$email'") or die(mysql_error()); 
```

但是，我正在使用这个`UPDATE`不起作用的查询进行编辑页面：

```
$sql = mysql_query("UPDATE companies SET name='$name',address='$address',city='$city',state='$state',zip='$zip' WHERE email='$email' UNION UPDATE users SET name='$name',address='$address',city='$city',state='$state',zip='$zip' WHERE email='$email'") or die(mysql_error()); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T23:03:45.740

您不能将更新语句合并在一起。您只需将其拆分为单独的命令。或者换句话说，运行两个查询，一个针对公司，一个针对用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-10T10:45:13.057

根据您的问题，您可以更新两个更新

```
$sql1="UPDATE companies SET name='$name',address='$address',city='$city',state='$state',zip='$zip' WHERE email='$email'";
$sql2="UPDATE users SET name='$name',address='$address',city='$city',state='$state',zip='$zip' WHERE email='$email"; 
```

或者

您可以选择并找到 $email 所在的表。

```
sql1="select name form user where email=$email "
sql2="select name form companies where email=$email "
if(count($sql1>0)){
UPDATE user SET name='$name',address='$address',city='$city',state='$state',zip='$zip' WHERE email='$email'
}
if(count($sql2>0)){
UPDATE companies SET name='$name',address='$address',city='$city',state='$state',zip='$zip' WHERE email='$email'
} 
```

# matlab - 使用 TEX 解释器的 Matlab 水平轴标注

> ID：12764631
> 
> 赞同：3
> 
> 时间：2012-10-06T23:02:02.150
> 
> 标签：matlab, graph, plot, matlab-figure

我已经按照[这个线程](https://stackoverflow.com/questions/3672637/how-to-use-string-as-data-for-plotting-in-matlab)为我的图表提出了 X 轴标签。但是，我希望 Matlab 将标签视为 tex 代码。换句话说，当我有 K_1 时，我希望 Matlab 将其显示为 K 下标 1。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T23:26:47.503

这是一个有点丑陋的解决方案，但仍然......

您可以手动删除刻度并添加`text`元素：

```
x = 1:5;
y = x.*x;
plot(x, y, 'b')
set(gca, 'XTick',[]);
text(1,-0.8,'A_1');
text(2,-0.8,'B_1');
text(3,-0.8,'C_1');
text(4,-0.8,'D_1');
text(5,-0.8,'E_1'); 
```

![在此处输入图像描述](../Images/c89829da1fd02650ea3bac83b8de460c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-11T09:58:46.117

与@Andrey 类似的解决方案。您可以使用`arrayfun`它来更轻松地输入标签：

```
x = 1:5;
y = x.*x;
plot(x, y);
set(gca, 'XTick',[]);
labels = {'K_1', 'K_2', 'K_3', 'K_4', 'K_5'};
arrayfun(@text, x, -1*ones(size(x)), labels); 
```

您甚至可以使用以下方法生成任意数量的标签：

```
labels = strcat({'K_'},int2str((1:5)'))'; 
```

# vb.net - 初学者Vb：对变量作用域的误解

> ID：12764633
> 
> 赞同：0
> 
> 时间：2012-10-06T23:02:21.763
> 
> 标签：vb.net, scope

好的，所以我刚开始学习 vb 并做了一些实验，直到我遇到了这个我无法理解的东西

所以我有一个带有两个模块的控制台应用程序

**Module1.vb**（程序从这里开始）

```
Module Module1

    Sub Main()
        add.addone()
        add.addone()
        add.addone()
        Console.Read()
    End Sub

End Module 
```

**添加.vb**

```
Public Module add
    Private counter As Integer

    Public Sub addone()
        counter += 1
        Console.Write(counter)
    End Sub
End Module 
```

我希望它在控制台上打印以下模式：

1 1 1

为什么会打印出来

1 2 3

我问这个是因为，我的理解是，在调用 add.addone() 之后。变量（计数器）应该不再存在！**因此，当第二**次调用 add.addone()时，它应该是空白的，因此再次打印出 1。

我希望你能帮助我。我做错了什么，为什么会这样？

谢谢， 维杜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:06:15.893

> 在调用 add.addone() 之后。变量（计数器）应该不再存在！

为什么会这样？*在*周围的模块中`counter`声明。因此，即使在方法退出后，它当然仍然存在。*`addone``add`*

 *（顺便说一下，您应该遵循模块和方法的 .NET PascalCase 命名约定……）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T23:09:15.073

发生这种情况是因为变量 counter 是在模块内而不是在类内声明的。
当程序更改模块中的公共变量时，程序的任何其他部分都会获得相同的值。您不能像使用 Class 一样创建 Module 的实例，其中每个实例都有自己的内部变量副本。

请参阅[模块与类](http://msdn.microsoft.com/en-US/library/7825002w%28v=VS.80%29.aspx)*

# java - 打印 JFrame 及其组件

> ID：12764634
> 
> 赞同：7
> 
> 时间：2012-10-06T23:02:27.817
> 
> 标签：java, swing, graphics, printing, jframe

我一直在一个大程序中工作，它的功能之一应该是打印主窗口的内容。我检查了 API 并找到了这个例子：

[http://docs.oracle.com/javase/tutorial/2d/printing/gui.html](http://docs.oracle.com/javase/tutorial/2d/printing/gui.html)

这非常有帮助，我尝试通过将其放在我的打印按钮的 actionperformed 方法中来在我的程序中使用该代码：

```
PrinterJob job = PrinterJob.getPrinterJob();
     job.setPrintable(this);
     boolean ok = job.printDialog();
     if (ok) {
         try {

             job.print();
         } catch (PrinterException ex) {
          /* The job did not successfully complete */
         }
     } 
```

如果我单击打印按钮，我会看到一个打印机对话框，当我告诉它打印时，它只会打印一个空白文档。我知道上面的代码并不是我所需要的，正如我在 API 的示例中看到的那样，有一个 print() 方法，但显然他们从不调用它，所以这很令人困惑。我已经尝试多次调用和使用它，但没有成功。

另外，我认为当我最终打印它时，我的窗口需要以横向打印，甚至可能需要一些缩放。关于如何做到这一点的任何想法？

我想要任何有用的帮助来帮助我成功实现此代码。我知道我应该能够通过检查文档自己来完成（我已经尝试了将近 2 天），但我无法让它工作。我已经通过互联网学习了我所知道的所有编程。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-07T00:18:21.337

这是一个简单的解决方案。我有一个实现可打印的打印机类，它将处理打印作业：

```
public static class Printer implements Printable {
    final Component comp;

    public Printer(Component comp){
        this.comp = comp;
    }

    @Override
    public int print(Graphics g, PageFormat format, int page_index) 
            throws PrinterException {
        if (page_index > 0) {
            return Printable.NO_SUCH_PAGE;
        }

        // get the bounds of the component
        Dimension dim = comp.getSize();
        double cHeight = dim.getHeight();
        double cWidth = dim.getWidth();

        // get the bounds of the printable area
        double pHeight = format.getImageableHeight();
        double pWidth = format.getImageableWidth();

        double pXStart = format.getImageableX();
        double pYStart = format.getImageableY();

        double xRatio = pWidth / cWidth;
        double yRatio = pHeight / cHeight;

        Graphics2D g2 = (Graphics2D) g;
        g2.translate(pXStart, pYStart);
        g2.scale(xRatio, yRatio);
        comp.paint(g2);

        return Printable.PAGE_EXISTS;
    }
} 
```

接下来，打印它：

```
JFrame yourComponent = new JFrame();
PrinterJob pjob = PrinterJob.getPrinterJob();
PageFormat preformat = pjob.defaultPage();
preformat.setOrientation(PageFormat.LANDSCAPE);
PageFormat postformat = pjob.pageDialog(preformat);
//If user does not hit cancel then print.
if (preformat != postformat) {
    //Set print component
    pjob.setPrintable(new Printer(yourComponent), postformat);
    if (pjob.printDialog()) {
        pjob.print();
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-07T03:33:44.417

这是我对这个想法的转折......

打印适合...

![A4-适合](../Images/78eb0adf7930c3a2c0e54bc3b503ca04.png)

打印填充...

![A4-填充](../Images/21ec6edc6e3e0b98e87d93ab8efb5b72.png)

```
public class TestPrinting {

    public static void main(String[] args) {    
        try {
            printComponentToFile(new PrintForm(), true);
            printComponentToFile(new PrintForm(), false);
        } catch (PrinterException exp) {
            exp.printStackTrace();
        }
    }

    public static void printComponent(JComponent comp, boolean fill) throws PrinterException {
        PrinterJob pjob = PrinterJob.getPrinterJob();
        PageFormat pf = pjob.defaultPage();
        pf.setOrientation(PageFormat.LANDSCAPE);

        PageFormat postformat = pjob.pageDialog(pf);
        if (pf != postformat) {
            //Set print component
            pjob.setPrintable(new ComponentPrinter(comp, fill), postformat);
            if (pjob.printDialog()) {
                pjob.print();
            }
        }    
    }

    public static void printComponentToFile(Component comp, boolean fill) throws PrinterException {    
        Paper paper = new Paper();
        paper.setSize(8.3 * 72, 11.7 * 72);
        paper.setImageableArea(18, 18, 559, 783);

        PageFormat pf = new PageFormat();
        pf.setPaper(paper);
        pf.setOrientation(PageFormat.LANDSCAPE);

        BufferedImage img = new BufferedImage(
                        (int) Math.round(pf.getWidth()),
                        (int) Math.round(pf.getHeight()),
                        BufferedImage.TYPE_INT_RGB);

        Graphics2D g2d = img.createGraphics();
        g2d.setColor(Color.WHITE);
        g2d.fill(new Rectangle(0, 0, img.getWidth(), img.getHeight()));
        ComponentPrinter cp = new ComponentPrinter(comp, fill);
        try {
            cp.print(g2d, pf, 0);
        } finally {
            g2d.dispose();
        }

        try {
            ImageIO.write(img, "png", new File("Page-" + (fill ? "Filled" : "") + ".png"));
        } catch (IOException ex) {
            ex.printStackTrace();
        }        
    }

    public static class ComponentPrinter implements Printable {

        private Component comp;
        private boolean fill;

        public ComponentPrinter(Component comp, boolean fill) {
            this.comp = comp;
            this.fill = fill;
        }

        @Override
        public int print(Graphics g, PageFormat format, int page_index) throws PrinterException {

            if (page_index > 0) {
                return Printable.NO_SUCH_PAGE;
            }

            Graphics2D g2 = (Graphics2D) g;
            g2.translate(format.getImageableX(), format.getImageableY());

            double width = (int) Math.floor(format.getImageableWidth());
            double height = (int) Math.floor(format.getImageableHeight());

            if (!fill) {

                width = Math.min(width, comp.getPreferredSize().width);
                height = Math.min(height, comp.getPreferredSize().height);

            }

            comp.setBounds(0, 0, (int) Math.floor(width), (int) Math.floor(height));
            if (comp.getParent() == null) {
                comp.addNotify();
            }
            comp.validate();
            comp.doLayout();
            comp.printAll(g2);
            if (comp.getParent() != null) {
                comp.removeNotify();
            }

            return Printable.PAGE_EXISTS;
        }

    }

} 
```

一些更广泛的问题...

*   您或多或少地对已打印组件的布局负责。至少你会想要确保它们要么合适，要么你已经制定了某种溢出机制......
*   您可能需要“欺骗”尚未在屏幕上显示的组件，让他们认为它们是……因此所有的脏东西都在`addNotify`/ `validate`/周围`doLayout`。即使在屏幕上显示时，如果您修改它们的边界，您可能需要调用这些方法。

# php - 检索所有用户（userId 和用户名）

> ID：12764637
> 
> 赞同：1
> 
> 时间：2012-10-06T23:02:42.870
> 
> 标签：php, mysql, sql, database

我想检索我的数据库中的所有用户并将它们放在一个包含两个元素的数组中；一个包含一个包含所有用户 ID 的数组，另一个包含一个包含所有用户名的数组。但是，下面的代码不适用于此目的。它所做的是将数据库中的第一个用户放在 $field1（第一个用户的用户 ID）和 $field2（第一个用户的用户名）中。

我需要有关如何解决此问题的帮助。

基本上，我想要的是实现以下目标：

```
$userIds = array(1, 2, 3, 4, 5);    // The id's from all users in an array
$userNames = array("Nisse", "Kalle", "Svenne", "Jonna", "Linda");    // The usernames of all the users in an array

// The arrays with user id's and usernames should be put in a new array that's returned from the function.
$users = array(
  [0] => $userIds,
  [1] => $userNames
); 
```

**来自 UserHandler.php：**

```
class UserHandler {

    private $m_db = null;

    public function __construct(Database $db) {
        $this->m_db = $db;
    }

    public function GetAllUsers() {

        $userArray = array();

        $query = 'SELECT * FROM Users'; 

        $stmt = $this->m_db->Prepare($query);

        $userArray = $this->m_db->GetUsers($stmt);

        return $userArray;
    }
} 
```

**来自 Database.php：**

```
public function GetUsers(\mysqli_stmt $stmt) {
        $userArray = array();

        if ($stmt === FALSE) {
                throw new \Exception($this->mysqli->error);
        }

        //execute the statement
        if ($stmt->execute() == FALSE) {
                throw new \Exception($this->mysqli->error);
        }
        $ret = 0;

        if ($stmt->bind_result($field1, $field2, $field3) == FALSE) {
            throw new \Exception($this->mysqli->error);
        }

        $stmt->fetch();

        $stmt->Close();

        echo $field1 // "1";    <- userid of the first user in db table
        echo $field2 // "Kalle"    <- username of the first user in the db table

        $userArray[] = $field1;    // An array with all the user id's
        $userArray[] = $field2;    // An array with all the usernames

        return $userArray;
} 
```

**db 表如下所示：** userId | 用户名 | 密码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T23:20:00.940

只做`$stmt->fetch()`一次你只从结果表中获取第一行，所以你需要在结果表上循环：

```
public function GetUsers(\mysqli_stmt $stmt) {
    $userArray = array(
        0 => array(),
        1 => array()
    );

    // the rest of code is the same here

    // replace the line $stmt->fetch() with this block
    while ($stmt->fetch()) {
        array_push($userArray[0], $field1);
        array_push($userArray[1], $field2);
    }

    // remove these lines
    /*
    $userArray[] = $field1;
    $userArray[] = $field2;
    */

    return $userArray
} 
```

# objective-c - 限制 UIScrollView 一次只能滚动到一页

> ID：12764644
> 
> 赞同：3
> 
> 时间：2012-10-06T23:04:09.060
> 
> 标签：objective-c, ios, uiscrollview, uikit, uiscrollviewdelegate

我想将 a 限制为一次`UIScrollView`只能滚动一页。

换句话说，即使用户快速滑动，我也希望将`UIScrollView`其限制为仅滚动一页。

有没有好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T23:08:59.490

```
UIScrollView *myScrollView;
...

myScrollView.pagingEnabled = YES; 
```

当设置为 YES 时，滚动视图在滚动视图的倍数处停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T23:39:44.957

如果您尚未确定滚动视图，实现此目的的一种方法是使用`UIPageViewController`. 我正在查看我的应用程序中的一个，此功能似乎是免费提供的。

使用 UIScrollView，我想您可能想要响应该`UIScrollViewDelegate`方法`- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset`

我在想您可以将当前的“页面”保存在一个属性中，然后在该`scrollViewWillEndDragging:withVelocity:targetContentOffset:`方法中您可以将目标内容偏移量修改为仅是下一页/上一页。

有一个 2012 WWDC 视频，Enhancing User Experience with Scroll Views，如果您想看到它的实际效果，它会使用这种方法。

# c++ - 具有 2 个整数的特殊键的良好哈希函数

> ID：12764645
> 
> 赞同：4
> 
> 时间：2012-10-06T23:04:22.777
> 
> 标签：c++, hash, hashmap

我正在尝试确定`map<double, double>`类型的键。但问题是我想要的密钥将由一对 2 数字生成。是否有任何好的函数可以为 (0, 1), (2, 3), (4, 2) (0, 2) 等对生成这样的密钥？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T23:09:21.367

选择 N'ary 数值系统，其中 N 是成对数字的最大可能值。

像这样：

```
hash(a, b) = a + b * N 
```

然后

```
a = hash(a, b) % N
b = hash(a, b) / N 
```

这将保证对于每一对 (a, b) 都有自己唯一的哈希 (a, b)。十进制数字也会发生同样的事情：想象从 0（我们将它们写为 00、01、02、...）到 99（包括在内）的所有数字都是你的对 ab。然后，hash(a, b) = a * 10 + b，反之亦然，要获得第一个数字，您必须将数字除以 10，第二个 - 取模 10。

为什么我们不能选择任何 N，可能小于 a/b 的最大值？答案是：避免碰撞。
如果您选择任何数字并且它恰好小于您的最大数字，则很可能由不同的数字对提供相同的哈希函数。例如，如果您为 (10, 10) 和 (0, 11) 对选择 N = 10，则它们的哈希值都将等于 110，在这种情况下这对您不利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:29:03.907

You should ideally have a `KeyValuePair<int, int>` as your key. I don't think writing more code than that can be helpful. If you cant have that for some reason, then hashing the pair to give a single key depends on what you're trying to achieve. If hashes are meant for hash structures like `Dictionary`, then **you have to balance collision rate and speed of hashing**. To have a perfect hash without collision at all it will be more time consuming. Similarly the fastest hashing algorithm will have more collisions relatively. Finding the perfect balance is the key here. **Also you should take into consideration how large your effective hash can be and if hashed output should be reversible to give you back the original inputs**. Typically priority should be given to speed up pairing/hashing/mapping than minimizing collision probability (a good hash algorithm will have less collision chances). To have perfect hashes you can see [this thread](https://stackoverflow.com/questions/919612/mapping-two-integers-to-one-in-a-unique-and-deterministic-way) for a plethora of options..

# ios - 如何为标签栏项目调用 setBadgeValue 方法

> ID：12764648
> 
> 赞同：0
> 
> 时间：2012-10-06T23:05:11.590
> 
> 标签：ios

```
-(void)applicationDidFinishLaunching:(UIApplication *)application{

    [[[self.window.rootViewController.tabBarController.viewControllers objectAtIndex:1] tabBarItem]setBadgeValue:@"1"];
} 
```

我将情节提要用于 UI，并想为其中一个标签栏项目设置通知编号，但似乎我做错了什么。

这段代码有什么问题，为什么我在标签栏项目中看不到通知？

提前致谢。

回答：

```
FROM APPDELEGATE:
     UITabBarController *tabController = self.window.rootViewController;
        UIViewController *requiredViewController = [tabController.viewControllers objectAtIndex:1];
        UITabBarItem *item = requiredViewController.tabBarItem;
        [item setBadgeValue:@"1"]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T23:27:35.440

为什么全部在一条线上？

将其分解为几个较小的步骤，在第一步设置断点并遍历代码检查以查看每一行是否发生了您期望的情况。

```
UIViewController *rootController = self.window.rootViewController;
UITabBarController *tabController = rootController.tabBarController;
UIViewController *requiredViewController = [tabController.viewControllers objectAtIndex:1];
UITabBarItem *item = requiredViewController.tabBarItem;
[item setBadgeValue:@"1"]; 
```

我怀疑您的属性之一是`nil`- 这通常是“为什么我的方法在没有任何警告或错误的情况下失败”类型错误的原因。

# optimization - 在不同的 url 中加载相同的图像

> ID：12764651
> 
> 赞同：1
> 
> 时间：2012-10-06T23:05:49.553
> 
> 标签：optimization, pageload, image-loading, page-load-time

我在网页中加载了一张图片，例如[http://example.com/test.jpg](http://example.com/test.jpg) on example.com

现在，假设用户通过该页面上的超链接转到存在相同图像的 example.com/testpage.html（使用 src [http://example.com/test.jpg](http://example.com/test.jpg)），那么浏览器会请求又是来自服务器的那个图像？

PS：我面临的问题是由于大量图像和 javascript，单个 html 页面上的页面渲染速度很慢。所以我打算在之前的referrer url上加载一些图片，这样当用户进入页面时，一些图片已经被加载了。请注意，我不打算通过 js/ajax 异步加载页面。我想做一个简单的重定向到给定的页面并希望已经加载了一些图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T23:15:00.093

只要域相同，并且您的缓存设置正常，浏览器会发出请求，但会得到*304 Not modified*响应，并且不需要重新下载整个资产。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:03:22.087

浏览器可能会或可能不会再次请求图像 - 这取决于浏览器、图像的年龄、上次检索的时间等。

当浏览器遇到请求时，它会首先检查它的 URL 缓存

如果该项目在缓存中并且为其设置了明确的到期日期（通过 expires 或缓存控制：max-age），并且该到期是在未来，那么浏览器将使用缓存中的版本。

如果项目在缓存中并且没有未来的到期日期，则浏览器可以使用启发式方法来判断它是否需要发出请求，例如，如果它昨天下载并且文件在 6 个月内没有更改，它可能会决定使用缓存中的版本（目前尚不清楚哪些浏览器对此做了什么）

或者，如果项目在缓存中，浏览器可以执行“if-modified-since”请求，如果自缓存版本的日期以来资源没有更改，则服务器以 304 响应，否则发送文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T23:13:32.033

一个简单的图像引用应该被缓存并且只加载一次。

您应该检查图像的大小 - 也许您有一个巨大的图像（加载速度很慢），它显示得小得多，并且可以在服务器上调整大小。

# c - 尝试序列化包含 Unicode 文本的结构

> ID：12764652
> 
> 赞同：0
> 
> 时间：2012-10-06T23:05:52.970
> 
> 标签：c, windows

我正在尝试序列化一个包含许多成员的结构，包括几个 Unicode 文本字符串（wchar_t，编码为 Windows TCHAR），以便稍后保存到文件中。我想将它作为一个单元序列化而不是单独编写结构的各个成员，因为需要保存许多不同的结构（每个结构都有自己的序列化函数），并且我希望能够通过一个结构，一旦序列化，就会变成一个通用函数，该函数将在实际将其写入文件之前将其与一些元数据包装起来（并将其添加到我也在创建的随附索引中）。

然而，虽然整数可以很好地序列化和反序列化，但字符串一旦反序列化，就会显示为基本上随机的文本（每次都在变化）。

这是我的序列化函数：

```
PBYTE SerializeLanguage(language *Language){
    PBYTE SerializedLanguage;
    SIZE_T LanguageLen;
    UINT CurrentIndex = 0;

    LanguageLen = GetSerializedLanguageLength(Language);

    SerializedLanguage = (PBYTE)HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, LanguageLen);

    CopyMemory(&SerializedLanguage[CurrentIndex], &(Language->name_length), sizeof(Language->name_length));
    CurrentIndex += sizeof(Language->name_length);

    CopyMemory(&SerializedLanguage[CurrentIndex], &(Language->name), (lstrlen(Language->name) + 1) * sizeof(TCHAR));

    return SerializedLanguage;
} 
```

还有我的反序列化功能：

```
VOID DeserializeLanguage(language *Out, PBYTE SerializedLanguage){
    UINT CurrentIndex = 0;

    CopyMemory(&(Out->name_length), &SerializedLanguage[CurrentIndex], sizeof(Out->name_length));
    CurrentIndex += sizeof(Out->name_length);

    Out->name = (PTCHAR)HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, Out->name_length);
    CopyMemory(Out->name, &SerializedLanguage[CurrentIndex], Out->name_length);

    MessageBox(NULL, Out->name, NULL, MB_OK);

    return;
} 
```

最后，语言结构：

```
typedef struct language {
    UINT name_length;
    PTCHAR name;

    UINT script_name_length; /* Serialization for this and the following elements not yet implemented */
    PTCHAR script_name;
    BYTE min_level;
} language; 
```

我已经使用调试器进行了检查，并且 language.name 已分配并且已在调用 SerializeLanguage 的函数中正确分配。

定义了 UNICODE 以便调用相关函数的所有宽字符版本；这不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T00:50:27.430

这是您的问题，在第二个参数中：

```
CopyMemory(&SerializedLanguage[CurrentIndex], &(Language->name), 
    (lstrlen(Language->name) + 1) * sizeof(TCHAR)); 
```

您正在复制指针，而不是内容。这应该有效：

```
CopyMemory(&SerializedLanguage[CurrentIndex], Language->name, 
    (lstrlen(Language->name) + 1) * sizeof(TCHAR)); 
```

# c# - 让这个计时器在 C# 中工作（新手）

> ID：12764656
> 
> 赞同：0
> 
> 时间：2012-10-06T23:07:21.603
> 
> 标签：c#, timer, intervals

> **可能重复：**
> [如何在 C# 中启用此计时器？](https://stackoverflow.com/questions/12755115/how-do-i-enable-this-timer-in-c)

我试图让一个小项目运行。当我使用断点时，它会正确地通过代码，但是当以正常速度运行程序时，它的序列运行速度太快。我试图让交通灯序列每 1 秒改变一次。这段代码有什么问题？它是一个简单的红绿灯序列，以防您感兴趣:)。新手项目。

```
 }
        public int counter = 0;

    private void rbStart_CheckedChanged(object sender, EventArgs e)
    {
        Light_timer.Start();
        counter++;

        if (counter == 1)
        {
            pbRed.Visible = true;
            pbAmber.Visible = false;
            pbGreen.Visible = false;
        }
        else if (counter == 2)
        {
            pbRed.Visible = true;
            pbAmber.Visible = true;
            pbGreen.Visible = false;
        }
        else if (counter == 3)
        {
            pbRed.Visible = false;
            pbAmber.Visible = false;
            pbGreen.Visible = true;
        }
        else if (counter == 4)
        {
            pbRed.Visible = false;
            pbAmber.Visible = true;
            pbGreen.Visible = false;
        }
        else if (counter == 5)
        {
            pbRed.Visible = true;
            pbAmber.Visible = false;
            pbGreen.Visible = false;
        }
        else
        {
            counter = 0;
        }
    }

    private void rbStop_CheckedChanged(object sender, EventArgs e)
    {

        pbRed.Visible = false;
        pbAmber.Visible = false;
        pbGreen.Visible = false;
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        Light_timer.Tick += new EventHandler(rbStart_CheckedChanged);
        Light_timer.Interval = 1000;
        Light_timer.Stop();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T23:36:04.753

每次计时器经过时，您都会连接事件处理程序等等......试试这个：

```
private void Form1_Load(object sender, EventArgs e)
{
    Light_timer = new Timer();
    Light_timer.Tick += new EventHandler(TimerElapsed);
    Light_timer.Interval = 1000;
}

private void TimerElapsed(object sender, EventArgs e)
{
    counter++;

    if (counter == 1)
    {
        pbRed.Visible = true;
        pbAmber.Visible = false;
        pbGreen.Visible = false;
    }
    else if (counter == 2)
    {
        pbRed.Visible = true;
        pbAmber.Visible = true;
        pbGreen.Visible = false;
    }
    else if (counter == 3)
    {
        pbRed.Visible = false;
        pbAmber.Visible = false;
        pbGreen.Visible = true;
    }
    else if (counter == 4)
    {
        pbRed.Visible = false;
        pbAmber.Visible = true;
        pbGreen.Visible = false;
    }
    else if (counter == 5)
    {
        pbRed.Visible = true;
        pbAmber.Visible = false;
        pbGreen.Visible = false;
    }
    else
    {
        counter = 0;
        Light_timer.Stop();
    }
}

private void rbStart_CheckedChanged(object sender, EventArgs e)
{
    Light_timer.Start();
}

private void rbStop_CheckedChanged(object sender, EventArgs e)
{
    Light_timer.Stop();
    pbRed.Visible = false;
    pbAmber.Visible = false;
    pbGreen.Visible = false;
} 
```

# html - 使用签名的 jar 部署 Java Applet

> ID：12764669
> 
> 赞同：1
> 
> 时间：2012-10-06T23:09:54.363
> 
> 标签：html, deployment, jar, jar-signing, signed-applet

我一直在学习如何部署小程序。我已经把我的代码放在一个罐子里，签名了，现在我正试图把它放在 weebly.com 上。Java 控制台中的错误说找不到 Minesweeper.class。我相信我有指向正确文件夹的代码库。谢谢你的帮助。

```
<applet code = "Minesweeper.class"
    codebase = "lbushmanportfolio.weebly.com/uploads/1/2/7/5/12755120/"
    archive = "Minesweeper.jar"
    width = "550"
    height = "580">
</applet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T05:06:07.637

> Java 控制台中的错误说找不到 Minesweeper.class。

这并不奇怪，因为[http://lbushmanportfolio.weebly.com/uploads/1/2/7/5/12755120/Minesweeper.jar](http://lbushmanportfolio.weebly.com/uploads/1/2/7/5/12755120/Minesweeper.jar)是 404。

* * *

顺便说一句 - 为什么小程序是数字签名的？这是我**拒绝**数字签名代码时看到的内容。

![雷场](../Images/ce7fe97042223893c0f7eec2abc0f417.png)

换句话说，游戏的基础似乎在沙盒代码中运行良好。OTOH，如果非 Oracle JRE 用户拒绝了数字签名代码（例如“冰茶”JRE 用户），则根本不会加载小程序！

# computer-science - 是否有任何按位运算符法则？

> ID：12764670
> 
> 赞同：14
> 
> 时间：2012-10-06T23:09:57.647
> 
> 标签：computer-science, bitwise-operators, boolean-logic, proof

从代数定律的角度思考，我想知道在位操作领域是否存在任何官方指南，类似于代数。

**代数例子**

`a - b =/= b - a`

让`a = 7`和`b = 5`

*   `a - b = 2`
*   `b - a = -2`

让`a = 10`和`b = 3`

*   `a - b = 7`
*   `b - a = -7`

因此`if a > b`，`b - a`将负等价于`a - b`。正因为如此，我们*可以*说

`|a - b| = |b - a|`。

其中`|x|`表示 的绝对值`x`。

**按位示例**

`a | b =/= a + b`

```
 00001010 = 10
  OR  00000101 = 5 
  -----------------
      00001111 = 15 
```

注意无符号字节操作：`10 | 5 = 15`，它是同义词`10 + 5 = 15`

但是，如果两者`a`和`b`等于 5 并且我们`OR`它们，结果将是 5，因为`a = b`，这意味着我们只是在相互比较相同的确切位，因此没有任何新内容。

同样，如果`b = 7`和`a = 10`我们`OR`他们，我们将有 15 个。这是因为

```
 00001010 = 10
 OR 00000111 = 7
 -----------------
    00001111 = 15 
```

因此，我们可以有效地得出结论`a | b =/= a + b`。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2017-08-27T20:56:14.423

仅在操作数的相应位之间应用的布尔运算符的位运算遵循类似于布尔代数定律的定律，例如：

*   `AND (&)`: 可交换的、关联的、标识 (0xFF)、歼灭者 (0x00)、幂等
*   `OR (|)`: 可交换的、关联的、标识 (0x00)、歼灭者 (0xFF)、幂等
*   `XOR (^)`: 可交换的、关联的、标识 (0x00)、逆（本身）
*   `NOT (~)`: 逆（本身）

AND 和 OR 相互吸收：

*   `a & (a | b) = a`
*   `a | (a & b) = a`

有一些分配运算符对，例如：

*   与或：`a & (b | c) = (a & b) | (a & c)`
*   与异或：`a & (b ^ c) = (a & b) ^ (a & c)`
*   或超过 AND：`a | (b & c) = (a | b) & (a | c)`

但是请注意，XOR 不会分布在 AND 或 OR 上，OR 也不会分布在 XOR 上。

德摩根定律适用于各种形式：

*   `~(a & b) = ~a | ~b`
*   `~(a | b) = ~a & ~b`

通过推理域ℤ/2ℤ可以找到一些与 XOR 和 AND 相关的定律，其中加法对应于 XOR，乘法对应于 AND：

*   AND 通过 XOR 分配
*   计算总和的乘积：`(a ^ b) & (c ^ d) = (a & c) ^ (a & d) ^ (b & c) ^ (b & d)`

有一些结合算术和位运算的定律：

*   通过添加减去：`a - b = ~(~a + b)`
*   分别添加进位：`a + b = (a ^ b) + ((a & b) << 1)`
*   变成`min`，`max`反之亦然：`min(a, b) = ~max(~a, ~b)`,`max(a, b) = ~min(~a, ~b)`

由于被推到边缘的位的“破坏”，移位没有逆向

`left shift (<<)`: 关联的、分配的、身份的 (0x00)

`right shift (>>)`: 关联的、分配的、身份的 (0x00)

`rotate left (rl)`：关联，分配，身份（0x00），逆（`rr`）

`rotate right (rr)`：关联，分配，身份（0x00），逆（`rl`）

虽然移位没有逆，但由于其他定律，一些涉及移位的表达式确实具有逆，例如：

*   `x + (x << k)`有一个逆，因为它实际上是一个奇数的乘法，而奇数有一个模乘逆模，以 2 的幂为模。对于`x + (x << 1) = x * 3`，倒数是`x * 0xAAAAAAAB`（对于 32 位，调整其他大小的常数）
*   `x ^ (x << k)`出于类似的原因有一个逆，但通过与无进位乘法的对应关系。
*   同样`x ^ (x >> k)`（无符号右移）有一个逆，它只是上面的“镜像”。

# jquery - jquery获取json项目

> ID：12764671
> 
> 赞同：2
> 
> 时间：2012-10-06T23:10:17.763
> 
> 标签：jquery, getjson

我的 data.json 看起来像这样：

```
{
    "selection_form" : {
        "entities" : { 
            "name":"0002" ,
            "name":"0103" ,
            "name":"0104" ,
            "name":"0122" ,
.... 
```

这个脚本看起来像这样

```
 <script>     
            $.getJSON('data.json', function(data) {   
                $.each(data.selection_form.entities, function(i,item){
                    $("#enity").append('<p>'+data.selection_form.entities.name+'</p>');
                });
            });
        </script> 
```

我想将所有名称都包含在 ap 标签中，例如

```
<p>0002</p><p>0103</p>.... 
```

但结果只是姓氏项目。我找不到解决办法。需要帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:16:07.190

一个对象不能有同名的属性。`entities`对象具有一个`name`值为 的属性`0122`。您应该更改属性名称。

```
{
    "selection_form": {
        "entities": {
            "name1": "0002",
            "name2": "0103",
            "name3": "0104",
            "name4": "0122",
        }
    }
}

$.getJSON('data.json', function(data) {   
      $.each(data.selection_form.entities, function(i,item){
           $("#enity").append('<p>'+item+'</p>');
      });
 }); 
```

[http://jsfiddle.net/vB6qe/](http://jsfiddle.net/vB6qe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T23:29:44.790

您正在覆盖 JSON 属性名称。与其在那里有一个 JSON 对象，不如有一个数组更有意义：

```
{
    "selection_form" : {
        "entities" : [ "0002" , "0103" , "0104" , "0122" ]
    }
}

<script type="text/javascript">
    $.getJSON('data.json', function(data) {   
        $.each(data.selection_form.entities, function(i,name){
            $("#enity").append('<p>'+name+'</p>');
        });
    });
</script> 
```

这是迭代该结构的[演示](http://jsfiddle.net/aPp9w/1/)。

# objective-c - 如何复制自定义的 Objective-C 对象？

> ID：12764673
> 
> 赞同：2
> 
> 时间：2012-10-06T23:10:32.467
> 
> 标签：objective-c, object, copy, deep-copy, custom-object

我有一个类，说类人。在课堂上，我有几个 NSMutableArrays。

```
@property NSMutableArray *arrayOne;
@property NSMutableArray *arrayTwo;
... 
```

现在我想复制那个类，这样我就可以从函数中返回它并使用副本并更改它的数据。我想在内存中拥有对象的新副本，而不是对同一地址的另一个引用。

为此，我在我的 Person.m 中实现了这一点：

```
-(id)copyWithZone:(NSZone *)zone
{
    Person *copy = [[Person allocWithZone:zone] init;
    copy.arrayOne = [NSMutableArray arrayWithArray:self.arrayOne];
    copy.arrayTwo = [NSMutableArray arrayWithArray:self.arrayTwo];
    ...

    return copy;
} 
```

到目前为止，这就像我想要的那样工作，但是当我尝试对副本的数组进行排序时，出现错误：-[__NSArrayI sortUsingSelector:]: unrecognized selector sent to instance 0x100108a30

我注意到原始数组的类型是“_ *NSArrayM”，但副本是“* _NSArrayI”...

那我做错了什么？我听说过使用 NSArchiver 和 NSArchiver 进行深度复制...我必须使用它吗？抱歉，我对 C 和 Objective-C 很陌生...：D

我希望你能帮我解决这个问题。=)

对不起我的“学校英语”......

干杯，尼克

编辑：数组由 NSString 对象组成，所以我可以使用

```
sortUsingSelector:@selector(caseInsensitiveCompare:) 
```

对数组进行排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T23:33:28.470

你的可变数组属性是如何在你的头文件中声明的？

```
// Wrong
@property (copy) NSMutableArray *array;
@property (assign) NSMutableArray *array;

// Right
@property (strong) NSMutableArray *array; 
```

注意如果你只是在做

```
@property NSMutableArray *array; 
```

那么我很惊讶你的代码已经走到这一步了:) 默认属性内存语义是`assign`- 它不会告诉 ARC 以任何方式保留你的数组:) 你需要指定`strong`.

# count - 有没有办法显示大于列中数字的计数（*）？

> ID：12764674
> 
> 赞同：0
> 
> 时间：2012-10-06T23:11:30.380
> 
> 标签：count

这是我尝试过的，但我确定这是错误的。

```
SELECT count(12), genre
    , MIN(cost) AS Low
    , MAX(cost) AS High
    , AVG(cost) AS Average 
FROM movies
where YR > '1990'
GROUP BY genre 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T23:25:22.213

这是我对您所做查询的印象

```
SELECT
    COUNT(12),
    genre,
    MIN(cost) AS Low,
    MAX(cost) AS High,
    AVG(cost) AS Average
FROM movies
WHERE YR > '1990'
GROUP BY genre 
```

我不确定您要查找的是什么。您是否正在尝试获取从 1990 年到现在拥有超过 12 部电影的所有类型？

```
SELECT
    COUNT(*) AS c,
    genre,
    MIN(cost) AS Low,
    MAX(cost) AS High,
    AVG(cost) AS Average
FROM movies
WHERE YR > '1990'
GROUP BY genre
HAVING c > 12 
```

# android - Android 和 Ruby on Rails - 对象映射

> ID：12764676
> 
> 赞同：0
> 
> 时间：2012-10-06T23:11:34.877
> 
> 标签：android, ruby-on-rails

我有一个 Ruby on Rails Web 应用程序，我目前正在开发一个 Android 应用程序。我希望 android 应用程序调用 Rails 应用程序并从结果中创建本地对象。

对于 iOS，有一个称为 RestKit 的框架可以很好地将 Objective-C 对象映射到远程 Ruby on Rails 对象。Android 的替代品有哪些？

有没有很好的例子或博客可以同步 Android 和 Ruby on Rails？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T05:42:22.747

Spring for android [http://www.springsource.org/spring-android](http://www.springsource.org/spring-android)有功能 RestClient [http://static.springsource.org/spring-android/docs/1.0.x/reference/html/rest-template.html](http://static.springsource.org/spring-android/docs/1.0.x/reference/html/rest-template.html)

第三方对象映射器需要在那里设置，我推荐 google-gson。

# algorithm - 网球锦标赛配对 (1x3x5x7x9x...(2n-1) )

> ID：12764679
> 
> 赞同：1
> 
> 时间：2012-10-06T23:12:10.087
> 
> 标签：algorithm

需要帮助解决这个算法问题：在网球锦标赛游戏中，我们有 2n 个玩家。在第一轮中，每个玩家只玩一次，因此我们有 n 场比赛，每场比赛有 2 名玩家。证明第一轮球员的配对可以用 1 x 3 x 5 x 7 x 9 ... (2n-1) 精确完成。

它看起来好像是阶乘，但带有奇数。我读到的关于阶乘的所有内容都没有得出这个结论，在组合问题中，消息来源仅解释了 1 对 1 比例的可能配对，而不是 2 对 1，就像在这种情况下（每场比赛 2 名球员）。阅读和阅读让我无处可去。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:15:40.190

显然，对于`n = 1`，只有一种方法可以将两个玩家配对。

现在，归纳地，玩家 1 可以与`2*n - 1`玩家配对，然后其余`2*(n-1)`玩家可以配对

```
1*3*...*(2*n-3) 
```

方法由归纳假设，共为`1*3*...*(2*n-3)*(2*n-1)`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T20:02:16.197

这个答案说明了在一组*n*对顶点上的比赛次数*t的归纳证明。*有关更简单、直接的计数方法，请参阅 Daniel Fischer 的回答。

 *我使用[强归纳](http://en.wikipedia.org/wiki/Mathematical_induction#complete_induction)来证明*t* ( *n* ) = (2 *n* - 1)!!。

作为一个基础，让*n* = 1。所以我们有*t* (1) = (2 - 1)！= 1\. 由于只有 1 场比赛只有 1 对球员，所以基础检查。

接下来，我们假设*t* = (2 *m* - 1)!! 对于所有*m* < *n*，我们让*i* + 1 = *n*。*我们从i*对的比赛开始，添加一个新的对来组成*n*对，并证明*t* ( *n* ) = (2 n - 1)!!。有两种情况需要考虑。**情况 1：**新对子与自己对抗，而**情况 2:**则不对抗。由于这两种情况是互斥的，我们可以分别确定每种情况产生的锦标赛数量，并将结果相加。

考虑案例 1，我们可以将新配对与现有玩家匹配多少种方式？好吧，新对中的第一个玩家可以玩任何 2 *i*个现有玩家，第二个玩家可以玩任何 2 *i* - 1 个剩余玩家。因此，新对的对战总数为 2 *i* (2 *i* - 1)。当然，在我们匹配新配对之后，我们不能忘记还剩下*i* - 1 对。通过归纳假设，我们可以匹配这些玩家 (2 ( *i* - 1) - 1)！！方法。应用乘积规则进行计数后，案例 1 的结果为 2 *i* (2 *i* - 1) (2 ( *i* - 1) - 1)！！。

转向案例 2，新对子可以自己玩 1 种方式。通过归纳假设，剩余的*i*对可以形成锦标赛 (2 *i* - 1)！方式，所以案例 2 的总数是 (2 *i* - 1)!!。

将这两种情况相加，我们有*t* ( *n* ) = 2 *i* (2 *i* - 1) (2 ( *i* - 1) - 1)！！+ (2 *i* - 1)！！。

我们分解出 (2 ( *i* - 1) - 1)!! 在右边得到*t* ( *n* ) = (2 ( *i* - 1) - 1)!! (2 *i* (2 *i* - 1) + (2 *i* - 1))。

结合类似的术语，我们有*t* ( *n* ) = (2 ( *i* - 1) - 1)!! (2 *i* - 1)(2 *i* + 1)。

将尾随因子折叠成双因子我们有*t* ( *n* ) = (2 ( *i* + 1) - 1)！！

最后，我们应用*i*的定义，我们有 *t* ( *n* ) = (2 n - 1)！！*

# r - R X12 automdl 故障

> ID：12764681
> 
> 赞同：1
> 
> 时间：2012-10-06T23:13:00.280
> 
> 标签：r, x12

有谁知道为什么我可能会收到此错误：

automdl && is.null(arima) 中的错误：“x && y”中的“x”类型无效

尝试在 R 包 x12 中运行第二个示例时？

```
library(x12)
data(AirPassengers)
x12out <- x12(AirPassengers,x12path="c:\\x12arima\\x12a.exe",transform="auto",
          automdl="TRUE") 
```

使用指定的 ARIMA 运行第一个示例是可行的。

```
x12out <- x12(AirPassengers,x12path="c:\\x12arima\\x12a.exe",transform="auto",
          arima=c(0,1,1),sarima=c(0,1,1),regvariables="lpyear",
          sigmalim=c(2.0,3.0),outlier="all",critical=list(LS=3.5,TC=3),
          seasonalma="s3x3") 
```

显然“automdl”出于某种原因窒息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:23:27.047

错误信息

```
Error in automdl && is.null(arima) : invalid 'x' type in 'x && y' 
```

很有帮助。它表明当 R 尝试运行时`x && y`，它发现它`x`的类型无效。它还告诉我们，`x`这里是`automdl`. `&&`作为一个逻辑运算符，`automdl`应该是一个逻辑：`TRUE`或`FALSE`。

`automdl`设置为`"TRUE"`（字符）时出错；它应该是`TRUE`（合乎逻辑的）。

（我也同意该函数的文档令人困惑。）

# php - 用于在 cookie 上存储数据的 AES 加密

> ID：12764683
> 
> 赞同：0
> 
> 时间：2012-10-06T23:13:27.223
> 
> 标签：php, cookies, encryption, aes, formula

我需要将尽可能多的字符存储在具有 char 字符串的 cookie 上，以便以 AES 加密存储。

cookie 有大约 4kb 的内存。

所以我需要计算在 AES 中加密所有这些字符的 cookie 中可以存储多少字符。

要存储的字符是一个字母数字字符串。

编辑：我可以在明文和 Chipertext 中允许所有 UTF-8 字母数字字符

这是我的一段代码

```
 <?php

$Pass = "132ksjcngpt04938idjsk39urtokg";
$Clear = "123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123456789012345678901234567890123456789o";

$crypted = fnEncrypt($Clear, $Pass);
echo "Encrypred: ".$crypted."<br></br>";

$newClear = fnDecrypt($crypted, $Pass);
echo "Decrypred: ".$newClear."<br></br>";

function fnEncrypt($sValue, $sSecretKey)
{
    return trim(
        base64_encode(
            mcrypt_encrypt(
                MCRYPT_RIJNDAEL_128,
                $sSecretKey, $sValue, 
                MCRYPT_MODE_ECB, 
                mcrypt_create_iv(
                    mcrypt_get_iv_size(
                        MCRYPT_RIJNDAEL_128, 
                        MCRYPT_MODE_ECB
                    ), 
                    MCRYPT_RAND)
                )
            )
        );
}

function fnDecrypt($sValue, $sSecretKey)
{
    return trim(
        mcrypt_decrypt(
            MCRYPT_RIJNDAEL_128, 
            $sSecretKey, 
            base64_decode($sValue), 
            MCRYPT_MODE_ECB,
            mcrypt_create_iv(
                mcrypt_get_iv_size(
                    MCRYPT_RIJNDAEL_128,
                    MCRYPT_MODE_ECB
                ), 
                MCRYPT_RAND
            )
        )
    );
}
?> 
```

我测试了，结果如下：

```
Encrypred: xINH9LnDsiwJjxrxAE7WYKTGBqw2tkKDx/04vryevRfkgKIqO0sRVurGW1Qu267CBuU9CwgS9YIXFs6zhM6y/limz3P8rST6phe5xP9zsw1tX42ngl7SgmK6apoVTjkXtxzY2XQtsuhBv6gPqBG1uoNqhU9QbhQXnbrqQUL7jG0UxGxqbAgb49atHjkTap4H55yzd4dJROlJ9G98rKe1znEU17XDUWjgDkebgG2puew804Sxh+seRMyV4MqmA4bt+uSKGASPQYONyHmY/3pz+yY0HFb/6GERHMOopJGGr17z9ZaQ7R6EeuGko1tiKYxfOX7Ep1hzJqGZ97TWtL+gyF/WaTpFedgLoKTLYe/CcGH3vmCyCngeGAdhVeqJ2bw2KUbJnvGXwiFI4ZKqS6U9Jf9Gzw/IlVMYIlCbGeml1EtinVN82aTwmrPplqmx+nVQP25S7xEG9VaGtCm9d0y2Ntlc/JvzSSG9cKU+bXl6O871X1vQgkhVvulw7zX5T7MH3N7kVRIawieTzq4aLXT/8cSDR/S5w7IsCY8a8QBO1mCkxgasNrZCg8f9OL68nr0X5ICiKjtLEVbqxltULtuuwgblPQsIEvWCFxbOs4TOsv5Yps9z/K0k+qYXucT/c7MNbV+Np4Je0oJiumqaFU45F7cc2Nl0LbLoQb+oD6gRtbqDaoVPUG4UF5266kFC+4xtFMRsamwIG+PWrR45E2qeB+ecs3eHSUTpSfRvfKyntc5xFNe1w1Fo4A5Hm4BtqbnsPNOEsYfrHkTMleDKpgOG7frkihgEj0GDjch5mP96c/smNBxW/+hhERzDqKSRhq9e8/WWkO0ehHrhpKNbYimMXzl+xKdYcyahmfe01rS/oMhf1mk6RXnYC6Cky2HvwnBh975gsgp4HhgHYVXqidm8NilGyZ7xl8IhSOGSqkulPSX/Rs8PyJVTGCJQmxnppdRLYp1TfNmk8Jqz6Zapsfp1UD9uUu8RBvVWhrQpvXdMtjbZXPyb80khvXClPm15ejvO9V9b0IJIVb7pcO81+U+zB9ze5FUSGsInk86uGi10//HEg0f0ucOyLAmPGvEATtZgpMYGrDa2QoPH/Ti+vJ69F+SAoio7SxFW6sZbVC7brsIG5T0LCBL1ghcWzrOEzrL+WKbPc/ytJPqmF7nE/3OzDW1fjaeCXtKCYrpqmhVOORe3HNjZdC2y6EG/qA+oEbW6g2qFT1BuFBeduupBQvuMbRTEbGpsCBvj1q0eORNqngfnnLN3h0lE6Un0b3ysp7XOcRTXtcNRaOAOR5uAbam57DzThLGH6x5EzJXgyqYDhu365IoYBI9Bg43IeZj/enP7JjQcVv/oYREcw6ikkYavXvP1lpDtHoR64aSjW2IpjF85fsSnWHMmoZn3tNa0v6DIX9ZpOkV52AugpMth78JwYfe+YLIKeB4YB2FV6onZvDYpRsme8ZfCIUjhkqpLpT0l/0bPD8iVUxgiUJsZ6aXUS2KdU3zZpPCas+mWqbH6dVA/blLvEQb1Voa0Kb13TLY22Vz8m/NJIb1wpT5teXo7zvVfW9CCSFW+6XDvNflPswfc3uRVEhrCJ5POrhotdP/xxINH9LnDsiwJjxrxAE7WYKTGBqw2tkKDx/04vryevRfkgKIqO0sRVurGW1Qu267CBuU9CwgS9YIXFs6zhM6y/limz3P8rST6phe5xP9zsw1tX42ngl7SgmK6apoVTjkXtxzY2XQtsuhBv6gPqBG1uoNqhU9QbhQXnbrqQUL7jG0UxGxqbAgb49atHjkTap4H55yzd4dJROlJ9G98rKe1znEU17XDUWjgDkebgG2puew804Sxh+seRMyV4MqmA4bt+uSKGASPQYONyHmY/3pz+yY0HFb/6GERHMOopJGGr17z9ZaQ7R6EeuGko1tiKYxfOX7Ep1hzJqGZ97TWtL+gyF/WaTpFedgLoKTLYe/CcGH3vmCyCngeGAdhVeqJ2bw2KUbJnvGXwiFI4ZKqS6U9JTDlQCMOqEIQk3IEy0A+ivyDaoVPUG4UF5266kFC+4xtFMRsamwIG+PWrR45E2qeB+ecs3eHSUTpSfRvfKyntc5xFNe1w1Fo4A5Hm4BtqbnsPNOEsYfrHkTMleDKpgOG7frkihgEj0GDjch5mP96c/smNBxW/+hhERzDqKSRhq9e8/WWkO0ehHrhpKNbYimMXzl+xKdYcyahmfe01rS/oMhf1mk6RXnYC6Cky2HvwnBh975gsgp4HhgHYVXqidm8NilGyZ7xl8IhSOGSqkulPSX/Rs8PyJVTGCJQmxnppdRLYp1TfNmk8Jqz6Zapsfp1UD9uUu8RBvVWhrQpvXdMtjbZXPyb80khvXClPm15ejvO9V9b0IJIVb7pcO81+U+zB9ze5FUSGsInk86uGi10//HEg0f0ucOyLAmPGvEATtZgpMYGrDa2QoPH/Ti+vJ69F+SAoio7SxFW6sZbVC7brsIG5T0LCBL1ghcWzrOEzrL+WKbPc/ytJPqmF7nE/3OzDW1fjaeCXtKCYrpqmhVOORe3HNjZdC2y6EG/qA+oEbW6g2qFT1BuFBeduupBQvuMbRTEbGpsCBvj1q0eORNqngfnnLN3h0lE6Un0b3ysp7XOcRTXtcNRaOAOR5uAbam57DzThLGH6x5EzJXgyqYDhu365IoYBI9Bg43IeZj/enP7JjQcVv/oYREcw6ikkYavXvP1lpDtHoR64aSjW2IpjF85fsSnWHMmoZn3tNa0v6DIX9ZpOkV52AugpMth78JwYfe+YLIKeB4YB2FV6onZvDYpRsme8ZfCIUjhkqpLpT0l/0bPD8iVUxgiUJsZ6aXUS2KdU3zZpPCas+mWqbH6dVA/blLvEQb1Voa0Kb13TLY22Vz8m/NJIb1wpT5teXo7zvVfW9CCSFW+6XDvNflPswfc3uRVEhrCJ5POrhotdP/xxINH9LnDsiwJjxrxAE7WYKTGBqw2tkKDx/04vryevRfkgKIqO0sRVurGW1Qu267CBuU9CwgS9YIXFs6zhM6y/limz3P8rST6phe5xP9zsw1tX42ngl7SgmK6apoVTjkXtxzY2XQtsuhBv6gPqBG1uoNqhU9QbhQXnbrqQUL7jG0UxGxqbAgb49atHjkTap4H55yzd4dJROlJ9G98rKe1znEU17XDUWjgDkebgG2puew804Sxh+seRMyV4MqmA4bt+uSKGASPQYONyHmY/3pz+yY0HFb/6GERHMOopJGGr17z9ZaQ7R6EeuGko1tiKYxfOX7Ep1hzJqGZ97TWtL+gyF/WaTpFedgLoKTLYe/CcGH3vmCyCngeGAdhVeqJ2bw2DCNhxeoaLYIP/o/Cbx5ufoNqhU9QbhQXnbrqQUL7jG0UxGxqbAgb49atHjkTap4H55yzd4dJROlJ9G98rKe1znEU17XDUWjgDkebgG2puew804Sxh+seRMyV4MqmA4bt+uSKGASPQYONyHmY/3pz+yY0HFb/6GERHMOopJGGr17z9ZaQ7R6EeuGko1tiKYxfOX7Ep1hzJqGZ97TWtL+gyF/WaTpFedgLoKTLYe/CcGH3vmCyCngeGAdhVeqJ2bw2KUbJnvGXwiFI4ZKqS6U9Jf9Gzw/IlVMYIlCbGeml1EtinVN82aTwmrPplqmx+nVQP25S7xEG9VaGtCm9d0y2Ntlc/JvzSSG9cKU+bXl6O871X1vQgkhVvulw7zX5T7MH3N7kVRIawieTzq4aLXT/8cSDR/S5w7IsCY8a8QBO1mCkxgasNrZCg8f9OL68nr0X5ICiKjtLEVbqxltULtuuwgblPQsIEvWCFxbOs4TOsv5Yps9z/K0k+qYXucT/c7MNbV+Np4Je0oJiumqaFU45F7cc2Nl0LbLoQb+oD6gRtbqDaoVPUG4UF5266kFC+4xtFMRsamwIG+PWrR45E2qeB+ecs3eHSUTpSfRvfKyntc5xFNe1w1Fo4A5Hm4BtqbnsPNOEsYfrHkTMleDKpgOG7fcgwEO8b4hbdZM893s5T4W65w7kB3E9LFMARJATuxEONiJHm3YcAFDdl04v/hLNoA==

Decrypred: 123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123hryd{}ls.-''ksllasllallallallallal:{}::{}jdhhfn123456789012345678901234567890123456789o 
```

chiperText 由 3040 个 utf-8 字符组成

加密最多 4056 个 utf-8 字符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:50:30.220

如果我错了，请纠正我，但假设您使用 UTF-8 作为纯文本的字母数字字符，因为 AES 使用 16 个字节长度的块（在这种情况下可以视为 16 个字母数字字符），您的纯文本至少是填充 15 个字节（最坏的情况）。

因此，给定`n`纯文本的长度，可以通过以下方式推断得到的密文长度：

```
(n + 16) - (n % 16) 
```

只是我的2美分。达里奥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T16:17:09.877

如果您使用经过身份验证的流模式，例如 AES-GCM，则*原始*密文大小（以*字节*为单位）将比明文大小大 32 个字节。其中 16 个用于随机 IV，16 个用于 MAC。

现在你遇到了任意字节不是有效的 UTF-8 的问题，所以你需要一些编码来处理这个问题。Base64 是一种流行的变体，但它会将大小增加到原始大小的 4/3。
这意味着如果您的大小限制为 4KiB，您将能够支持最多 3040 字节的纯文本。

还有其他更有效的编码，但会变得更复杂，您需要确定哪些字符是有效的（例如`\0`）。除非绝对必要，否则我不建议这样做。

* * *

您的代码有很多错误：

1.  您正在使用欧洲央行，几乎是所有模式中最糟糕的
2.  您需要相同的 IV 进行加密和解密。因此，将其与密文一起存储。你不会注意到它，因为欧洲央行不使用 IV。
3.  您没有身份验证。
4.  你的IV代不好。使用`MCRYPT_DEV_URANDOM`而不是`MCRYPT_RAND`.

# javascript - 文本输入在应该显示或隐藏时不显示或隐藏

> ID：12764684
> 
> 赞同：0
> 
> 时间：2012-10-06T23:13:29.480
> 
> 标签：javascript, jquery, jsfiddle

我在这里有一个 jsfiddle：http: [//jsfiddle.net/ybZvv/22/](http://jsfiddle.net/ybZvv/22/)

我的情况是，如果您单击“选择所有答案”按钮，它将打开所有字母按钮（al trun green）。现在，如果您单击“添加问题”按钮，它会将顶部的按钮附加到表格行中。您会看到表格下方出现一堆文本输入，这显示了在附加行中打开的所有按钮的值。

这可以。但问题如下：

但问题是，如果您单击附加行中的“删除所有答案”按钮，则所有按钮都将关闭，这很好，但它不会删除/隐藏所有这些按钮的值的文本输入关掉。

如果您然后单击附加行中的“选择所有答案”按钮，则它会打开该行中的所有按钮，但不会出现文本输入，显示所有打开按钮的值。

所以我的问题是，如果用户单击附加表格行中的“选择所有答案”按钮，我们如何让它显示该行中打开的按钮的所有文本输入？

此外，如果用户单击附加行中的“删除所有答案”按钮，我希望它删除该行中关闭的那些按钮的所有文本输入。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:34:09.397

解决方案是“触发”按钮单击，而不是简单地取消一个类并添加另一个类。

所以而不是

```
$('.answerBtns:visible', context).removeClass('answerBtnsOff').addClass('answerBtnsOn'); 
```

你应该使用：

```
$('.answerBtnsOff:visible', context).trigger('click'); 
```

模拟单击按钮以进行正确处理。

这是[编辑过的小提琴](http://jsfiddle.net/ybZvv/32/)

# json - Backbone.js中使用hunchentoot解析model.save()发送的post请求

> ID：12764686
> 
> 赞同：5
> 
> 时间：2012-10-06T23:13:58.733
> 
> 标签：json, backbone.js, common-lisp, hunchentoot

我是一个 javascript/web 应用程序新手，正在尝试使用 hunchentoot 和骨干网实现我的第一个 web 应用程序。我尝试的第一件事是了解 model.fetch() 和 model.save() 是如何工作的。

在我看来，model.fetch() 会触发“GET”请求，而 model.save() 会触发“POST”请求。因此，我在 hunchentoot 中编写了一个简单的处理程序，如下所示：

```
(hunchentoot:define-easy-handler (dataset-handler :uri "/dataset") ()
  (setf (hunchentoot:content-type*) "text/html")

  ;; get the request type, canbe :get or :post
  (let ((request-type (hunchentoot:request-method hunchentoot:*request*)))
    (cond ((eq request-type :get) 
           (dataset-update)
           ;; return the json boject constructed by jsown
           (jsown:to-json (list :obj 
                                (cons "length" *dataset-size*)
                                (cons "folder" *dataset-folder*)
                                (cons "list" *dataset-list*))))
          ((eq request-type :post)
           ;; have no idea on what to do here
           ....)))) 
```

这旨在处理对应 url 为“/dataset”的模型的获取/保存。提取工作正常，但我对 save() 感到非常困惑。我看到了由 easy-handler 触发和处理的“post”请求，但该请求似乎只有一个有意义的标头，我找不到隐藏在请求中的实际 json 对象。所以我的问题是

1.  如何从 model.save() 触发的 post 请求中获取 json 对象，以便以后可以使用 json 库（例如，jsown）来解析它？
2.  hunchentoot 应该回复什么才能让客户端知道“保存”成功了？

我在 hunchentoot 中尝试了“post-parameters”函数，它返回 nil，并没有看到很多人通过谷歌搜索使用 hunchentoot+backbone.js。如果您可以将我引导到一些有助于理解backbone.js save() 工作原理的文章/博客文章，这也很有帮助。

非常感谢您的耐心等待！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T04:22:35.203

感谢 wvxvw 的评论，我找到了这个问题的解决方案。[json](/questions/tagged/json "显示标记为“json”的问题")对象可以通过调用来检索`hunchentoot:raw-post-data`。更详细地说，我们首先调用`(hunchentoot:raw-post-data :force-text t)`以字符串形式获取帖子数据，然后将其提供给`jsown:parse`. 一个完整的easy-handler如下所示：

```
(hunchentoot:define-easy-handler (some-handler :uri "/some") ()
  (setf (hunchentoot:content-type*) "text/html")
  (let ((request-type (hunchentoot:request-method hunchentoot:*request*)))
    (cond ((eq request-type :get) ... );; handle get request
          ((eq request-type :post)
           (let* ((data-string (hunchentoot:raw-post-data :force-text t))
                  (json-obj (jsown:parse data-string))) ;; use jsown to parse the string
               .... ;; play with json-obj
               data-string))))) ;; return the original post data string, so that the save() in backbone.js will be notified about the success. 
```

希望这可以帮助其他有同样困惑的人。

# clojure - 带有针对浏览器的阅读器宏的 Lisp？

> ID：12764688
> 
> 赞同：1
> 
> 时间：2012-10-06T23:14:15.047
> 
> 标签：clojure, web, lisp, scheme, common-lisp

Clojure/ClojureScript 没有阅读器宏。我个人认为这是一个巨大的损失，因为我对破解语法特别感兴趣。有没有办法使用带有阅读器宏的 lisp 开发网站？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T06:40:52.797

Common Lisp 有[Parenscript](http://common-lisp.net/project/parenscript/)，它允许您从 Lisp 语法生成 JavaScript，并能够使用阅读器宏。

您还可以将其与[slime-proxy](https://github.com/3b/slime-proxy)和[swank-js](https://github.com/swank-js/swank-js)挂钩，以获得完全互动的体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:01:51.530

你可能对[sweet.js](http://sweetjs.org)感兴趣。它本质上是带有强大宏系统的 JavaScript，它可以完成阅读器宏可以做的大部分（如果不是全部）。现在，它实际上不是 Lisp，但 JavaScript 部分受到了 Scheme 的启发，而 sweet.js 的宏系统旨在将 Scheme 宏系统自然扩展为具有非基于 S 表达式的语法的语言。

最大的警告是 sweet.js 是超级新的。它甚至还没有版本号。因此，与用于生产代码的东西相比，它更值得关注。

# sorting - 使用 sort 命令对数字进行排序

> ID：12764690
> 
> 赞同：0
> 
> 时间：2012-10-06T23:14:58.030
> 
> 标签：sorting, numeric

我想对以下文件 numbers.txt 中的值进行排序，下面是一个示例

```
1.1
1.2
10.0
2.2
1000.0 
```

但是，当我执行以下 cmd

```
sort numbers.txt 
```

我得到以下信息：

```
1.1
1.2
10.0
1000.0
2.2 
```

我需要什么 cmd 来适当地对数值进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:16:35.610

使用该`-n`标志按数字排序，而不是按字典顺序排序：

```
sort -n numbers.txt 
```

# algorithm - 作业：确定购物车中两个最受欢迎商品的算法

> ID：12764692
> 
> 赞同：1
> 
> 时间：2012-10-06T23:15:02.317
> 
> 标签：algorithm, if-statement, logic

我正在尝试确定用户购物车中最受欢迎的两个商品。

每次用户在购物车中添加或删除项目时，`updatePopularity(Item item)`都会调用一个函数，该函数会传递一个引用已更新对象的单个参数。这是代码片段：

```
 private void updatePopularity(InventoryItem item)
  {
    InventoryItem tempItem;

    if (mostPopular == null)
    {
      if (item.count > 0)
      {
        mostPopular = item;
        mostPopularLabel.setText(MOST_POPULAR + " " + item.name);
      }
    }
    else if (nextPopular == null)
    {
      if (mostPopular.name != item.name && item.count > 0)
      {
        nextPopular = item;
        nextPopularLabel.setText(NEXT_POPULAR + " " + item.name);
      }
    }
    else if (mostPopular.count < item.count)
    {
      tempItem = mostPopular;
      mostPopular = item;
      mostPopularLabel.setText(MOST_POPULAR + " " + item.name);

      nextPopular = tempItem;
      nextPopularLabel.setText(NEXT_POPULAR + " " + nextPopular.name);
    }
    else if (nextPopular.count < item.count)
    {
      nextPopular = item;
      nextPopularLabel.setText(NEXT_POPULAR + " " + nextPopular.name);
    }
    else if (mostPopular.count == 0)
    {
    }
   } 
```

不过，我在逻辑上一头雾水，因为有很多可能的场景可以上演。

最终结果应该是：

*   在任何给定时刻，购物车中数量最多的两个商品都应该是最受欢迎的。
*   如果第二受欢迎的最终数量更多，则这两个项目应交换最受欢迎和次受欢迎的位置。
*   随着商品从购物车中移除，受欢迎程度也应该更新。

最后，如果因为购物车更新而只有一件受欢迎的商品，我应该反映这一点。

任何人都可以帮助我如何从逻辑上规划出可能性吗？

我目前正在上离散数学课，但我还不足以尝试在纸上解决这个问题。我不是要求为我写出代码，而只是一些关于如何通过逻辑工作的指导，而不会出现混乱的`if`陈述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:11:22.977

我最终使用的实现效率不高，但它有效......

每次从购物车中添加或删除商品时，都会扫描库存以查找前两次出现的最受欢迎和第二受欢迎的商品。然后，将这些项目与当前最受欢迎和第二受欢迎的持有者进行比较。棘手的部分是逻辑，因为如果一个项目排在第一位，那么首先需要将当前项目推到第二位。但是，如果当前排名第二的项目被撞到第一，那么第一个并列第二的项目需要成为第二。我试图在纸上画出逻辑，但我没有这样做的技能或知识。我最终把自己弄糊涂了。:)

# asp.net - asp.net mvc 3 管理员重置密码并强制用户更改密码

> ID：12764694
> 
> 赞同：0
> 
> 时间：2012-10-06T23:15:17.347
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-membership, password-recovery

我正在使用asp.net Membership，我开发了一个可以重新生成临时密码发送给用户的管理页面，然后当用户第一次登录时，必须更改密码，但我不知道谁知道如果密码被重置。

我在基本控制器中尝试过类似的东西：

```
if (user.LastPasswordChangedDate >= user.LastLoginDate)
{
    filterContext.Result = RedirectToAction("ChangePassword", "Account");
} 
```

但是，我已经更新了 LastLoginDate，因为 ChangePassword Action 需要与经过身份验证的用户一起使用。

我在重置密码以锁定/解锁用户以更新“LastLockoutDate”并执行以下操作时正在考虑：

```
if (user.LastPasswordChangedDate >= user.LastLockoutDate)
{
    filterContext.Result = RedirectToAction("ChangePassword", "Account");
} 
```

但是，我找不到手动锁定的方法

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T00:28:52.597

您可以做很多事情，其中​​一些取决于您的系统如何工作。例如，如果您不使用评论，您可以在评论字段中存储特定的数据。

或者，如果您不使用“已批准”位（即，当您创建新用户时，您不需要他们验证电子邮件或其他内容，而是在 IsApproved 设置为 true 的情况下创建它们），那么您可以将 IsApproved 设置为如果为假，则强制更改密码。

在 Membership API 中没有访问这些数据的方法，您只需要从您的数据库中访问它。

您也可以将其存储在个性化提供程序中。

另一种选择是简单地避免将其存储在 Membership 数据库中，而只是在您的应用程序数据中添加一个表或一个字段来处理这个问题。

# c++ - 运算符覆盖 - 何时使用朋友？

> ID：12764696
> 
> 赞同：2
> 
> 时间：2012-10-06T23:15:47.090
> 
> 标签：c++, friend

我想知道为什么 () 运算符覆盖不能是“朋友”（因此它需要一个“this”附加参数），而 + 运算符需要是朋友，如下例所示：

```
class fnobj
{
    int operator()(int i);
    friend int operator+(fnobj& e);
};

int fnobj::operator()(int i)
{

}

int operator+(fnobj& e)
{

} 
```

我知道 + 运算符需要成为朋友以避免“附加”额外的*this*参数，但为什么 operator() 不需要它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T23:28:57.080

您已经重载了*一元加号*运算符。你可能不想那样做。它不添加两个对象，它描述了当 a`+`出现在单个对象之前时如何解释单个对象，与`int x = +10`将被解释的相同。（其解释与 相同`int x = 10`）

对于**加法运算符**，“+ 运算符需要成为朋友”是不正确的。

以下是添加两个`fnobj`对象的两种方法：

```
int operator+(fnobj& e);
friend int operator+(fnobj& left, fnobj& right); 
```

在第一种形式中，`this`假定为 . 左侧的对象`+`。所以这两种形式都有效地采用了两个参数。

**因此，要回答您的问题**，不要认为“operator() 不需要`friend`”，而是将其视为“operator() 需要`this`”，或者更好的是，“将对象视为函数需要对象”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T23:33:03.733

您没有正确理解这一点（也没有正确使用它）。

在 C++ 中有两种方法可以为类定义二元运算符，或者作为成员函数

```
class A
{
public:
    int operator+ (A const& other);
}; 
```

或作为自由功能

```
class A {};

int operator+ (A const& lhs, A const& rhs); 
```

您目前混淆的是，您可以在类范围内声明和定义这个自由函数 as `friend`，这将允许该函数使用类的私有成员（这对于自由函数通常是不允许的）。

# c# - 将文本保存到文件

> ID：12764698
> 
> 赞同：1
> 
> 时间：2012-10-06T23:16:21.690
> 
> 标签：c#, file, stream

我有一个问题让我发疯。我有一个程序将错误消息保存到对象中的字符串中，然后将字符串写入 unloadContent() 中的文件。出于某种原因，我不断收到不支持的异常。这是 unloadContent() 中的代码：

```
 if (debug.getContent().Length > 0)
        {
            saveErrors save = new saveErrors();
            if (Directory.Exists(System.IO.Directory.GetCurrentDirectory() + "\\Errors")) ;
                Directory.CreateDirectory(System.IO.Directory.GetCurrentDirectory() + "\\Errors");
            save.save(System.IO.Directory.GetCurrentDirectory().ToString() + "\\Errors\\errorLog_" + (System.DateTime.Now.ToString().Replace("/", "_")).Replace(" ","") + ".txt");
        } 
```

这是类保存错误中的代码：

```
 public class saveErrors
    {
        private string mess = debug.getContent();

        public void save(string fileName)
        {
            Debug.WriteLine(fileName);
            using (StreamWriter sw = new StreamWriter(fileName))
            {
                sw.Write(mess);
                sw.Close();
            }
        }
    } 
```

我对 C# 还是有点陌生​​，所以任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T23:40:09.153

尝试这个：

```
[Test]
public void SaveTextTest()
{
    string relativePath=@"Errors\errorLog_";
    string directoryPath = System.IO.Path.Combine( System.IO.Directory.GetCurrentDirectory() , relativePath);
    var directoryInfo = new DirectoryInfo(directoryPath);
    if(directoryInfo.Exists==false)
        directoryInfo.Create();
    string fileName = System.DateTime.Now.ToString("yyyy-MM-dd_hh-mm-ss") + ".txt";
    string path = System.IO.Path.Combine(directoryPath, fileName);
    string textToSave = "This will be saved";
    File.WriteAllText(path, textToSave);       
} 
```

要获得所需格式的[DateTime.ToString() ，您可以传递格式](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)[字符串](http://www.csharp-examples.net/string-format-datetime/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T23:29:17.517

`save.save(System.IO.Directory.GetCurrentDirectory().ToString() + "\\Errors\\errorLog_" + (System.DateTime.Now.ToString().Replace("/", "_")).Replace(" ", "").Replace(":", "") + ".txt");`

改成这样。您需要 a`.Replace(":", "")`因为`:`包含在代码的日期部分中，但在文件名中无效，因此您必须将其删除或替换为其他内容。

作为替代方案，您可以这样格式化日期：

`save.save(System.IO.Directory.GetCurrentDirectory().ToString() + "\\Errors\\errorLog_" + System.DateTime.Now.ToString("yyyy-MM-dd_hh-mm-ss"));`

# design-patterns - Vaadin：设计模式

> ID：12764702
> 
> 赞同：30
> 
> 时间：2012-10-06T23:17:36.120
> 
> 标签：design-patterns, vaadin

我目前正在开发三个 Vaadin 应用程序，我真的觉得我错过了一些东西。我以前使用过 Spring MVC，架构清晰且解耦，您将服务注入控制器，而不是将控制器耦合到 UI 等等。

现在在 Vaadin，情况就不同了。所以如果有任何 Vaadin 专家，让我问你几个问题：

**问题一：**

*   是否可以直接向 UI 组件注入服务（或 DAO）？
*   ***示例***：在电子邮件应用程序中负责显示联系人的组件（ContactWidget，基于带有链接的 VerticalLayout）需要显示联系人。可以直接将contactRepository 注入这个UI 元素吗？

**问题2：**

*   对主应用程序的引用被传递给大量的 UI 组件，因为许多 UI 组件需要访问一些全局数据或调用主应用程序类上的全局方法
*   ***示例***：弹出组件具有打开新窗口的按钮，它应该是应用程序中主窗口的子窗口。因此弹出组件必须引用主应用程序。

**问题 3：**

*   UI 组件之间的依赖关系可能会变得非常疯狂。在这里可能没什么可做的，但有时感觉这个窗口并不依赖于这个依赖于弹出窗口的列表......你明白了，它看起来与我紧密相连

***在我的代码转向Spaghetti***之前，我想尽可能多地了解 Vaadin 的优秀设计，因此任何建议、经验和最佳实践将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-07T18:28:21.820

[使用 MVVM 模式（又名Fowler 的 PresentationModel](http://martinfowler.com/eaaDev/PresentationModel.html) ）我们非常幸运。他的文档有点旧，但是一个很好的起点。

看完之后，我的回答可能更有意义

1.  不，将您的服务注入您的 ViewModel。ViewModel 将是一个外观（并且可以封装适配器、装饰器、缓存和您决定需要的任何其他模式）

2.  我在这里没有看到问题，但是我们确实遇到了与您所描述的情况相似的情况。我们使用 Guava 的 EventBus 在解耦的组件之间进行通信。这样，如果你需要弹出一个新窗口，你可以： `eventBus.post(new NewWindowRequest(theComponent))` 和你的主应用程序订阅同一个事件，然后弹出窗口。

3.  MVVM 和谨慎使用 EventBus 会有所帮助。此外，Vaadin 的 BeanItem 和 ObjectProperty 可用于传播更改，因为它们是 Vaadin 内置观察者/数据绑定模式的一部分。

我最近做了一个[关于 MVC vs MVP vs MVVM 的演讲](https://github.com/dustyjewett/MVStar)。示例代码可以帮助您理解从 MVC 到 MVVM 的转变。它是用 JavaScript 编写的，但它非常简单，我相信大多数人都可以遵循它。我欢迎您提出任何反馈意见。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-07T21:01:28.940

Vaadin 是一款很棒的软件，您绝对不应该使用 Spaghetti 代码。无论如何，一切都取决于你。

**答案 1**

不，不是。无论使用何种框架，紧耦合都是不好的。您的示例（ContactWidget）描述了列表的自定义实现。它可以呈现为带有或不带有附加信息的表格。我将使用表格示例，因为它更复杂且更灵活（您可以构建具有高级表格组件和适当数据绑定的整个应用程序）。

Vaadin 定义了遵循著名的 MVC 模式的高级数据模型。共有三个嵌套层：容器、项目、属性（还定义了属性查看器和编辑器）。Vaadin 的书提出了很好的类比：电子表格应用程序。所以容器、项目和属性将对应表、行和单元格。容易想象——容易理解。最后，ItemContainer 将揭示它的本质，您将理解这是任何良好且灵活的基于 Vaadin 架构的关键契约。我建议查看 Vaadin 的书，以获取所有其他详细信息：

*   [https://vaadin.com/book/-/page/datamodel.html](https://vaadin.com/book/-/page/datamodel.html)
*   [https://vaadin.com/book/-/page/datamodel.container.html](https://vaadin.com/book/-/page/datamodel.container.html)

您还可以查看任何 PagedTable 插件背后的容器实现，以获得更好的理解。也请从 ArrayContainer [https://vaadin.com/directory#addon/array-container](https://vaadin.com/directory#addon/array-container)开始，它将为您简化很多。

**答案 2**

传递主应用程序引用似乎不是一个好的解决方案。您确实注意到 Application 实例代表会话，但您最好定义某种 SessionContext 契约（它仍然可以由您的应用程序实现）。可以定义一个静态方法来提供对相关 SessionContext 实例的透明访问。在引擎盖下，它可以使用 ThreadLocal 变量[http://docs.oracle.com/javase/7/docs/api/java/lang/ThreadLocal.html](http://docs.oracle.com/javase/7/docs/api/java/lang/ThreadLocal.html)这样您将摆脱所有传递的寄生参数。

**答案 3**

精心设计您的层次结构。不要自己触发重绘，而是使用[Refresher](https://vaadin.com/directory#addon/refresher)。密切关注整个架构。

最后，Vaadin 易于使用，因此在更改主代码库之前可以随意做一些小型 PoC 和演示。

正如建议的那样，您也可以尝试 MVVM [https://vaadin.com/directory#addon/bambi-mvvm](https://vaadin.com/directory#addon/bambi-mvvm)

# javascript - 在phonegap中与JS中的objective-C通信？

> ID：12764705
> 
> 赞同：0
> 
> 时间：2012-10-06T23:18:22.890
> 
> 标签：javascript, ios, file, cordova, icloud

我需要获取 iCloud 目录，所以我想要一些 iOS 网桥来获取目录名称。

```
 NSURL *ubiq = [[NSFileManager defaultManager]
                   URLForUbiquityContainerIdentifier:nil];
    if (ubiq) {
        NSLog(@"iCloud access at %@", ubiq);
    } else {
        NSLog(@"No iCloud access");
    } 
```

这给了我网址，但我希望能够做这样的事情：

```
window.ios.getICloudDirectory(function(directory){
//do stuff with the iCloud directory
}); 
```

这样做的最简单和最少代码的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:44:30.290

[创建一个插件。](http://docs.phonegap.com/en/2.1.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)这是最快的方法。

# css - 为什么 H1 标签在 css 中不需要 class 或 id？

> ID：12764706
> 
> 赞同：2
> 
> 时间：2012-10-06T23:18:23.597
> 
> 标签：css

我只是在看我的 CSS，h1 标签是这样定义的：

```
h1 { .... } 
```

当其他所有内容都具有 id "#" 或 "." 时 前面的课。标题标签不需要这个的原因是什么？我实际上犯了一个错误，他们确实需要一个吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T23:22:22.833

这意味着*所有*出现的`h1`都将共享相同的样式。同样，您可以为任何其他元素定义样式，例如：

```
p { font-family: Helvetica; } 
```

这意味着所有`p`标签都将使用 Helvetica 字体。

请注意，页面中只有一个`h1`元素也是一种最佳做法。

[您可以在此处](http://www.w3schools.com/cssref/css_selectors.asp)找到不同类型选择器含义的简要概述。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T23:22:34.177

[文档](http://www.w3.org/TR/CSS2/selector.html#type-selectors)中说：

> 5.4 类型选择器
> 
> 类型选择器匹配文档语言元素类型的名称。类型选择器匹配文档树中元素类型的每个实例。

因此，只要指定其名称，就可以选择任何有效元素。顺便说一句，它也适用于更复杂的选择器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T23:21:11.003

它不仅仅是标题标签。所有**元素**都仅通过其名称“选择”。'#' 用于通过 id 和“.”“选择”。用于按类“选择”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-18T18:12:21.547

这个想法并不是“h1”标签不需要有“class or id”。它可以像其他标签一样有一个类或 id。这完全取决于您，以及您如何使用它。如其他答案中所述，如果您想对所有 h1 应用特定样式，那么您将拥有它没有类，您的 CSS 将是：h1{...}

但是如果你想对你拥有的每个“h1”标签使用特定的样式，那么你可以使用一个类属性来识别每个“h1”，见下面的例子：

假设您的 HTML 代码中有两个“h1”标签，并且您想为每个标签设置不同的颜色，那么您可以执行以下操作：

HTML：

```
<h1 class="first-header">Hello World1</h1>
<h1 class="second-header">Hello World2</h1> 
```

CSS：

```
h1.first-header{color:red;}
h1.second-header{color:blue;} 
```

这将显示您的第一个 h1 为红色，第二个为蓝色。

# python - 如何在 python 中多次添加相同的变量？

> ID：12764707
> 
> 赞同：0
> 
> 时间：2012-10-06T23:18:39.413
> 
> 标签：python

这是我的代码（Python 3.2）

```
Total = eval(input("How many numbers do you want to enter? "))
#say the user enters 3
for i in range(Total):
    Numbers = input("Please enter a number ")
#User enters in 1
#User enters in 2
#User enters in 3
print ("The sum of the numbers you entered is", Numbers)
#It displays 3 instead of 6 
```

我如何让它正确加起来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T23:22:00.237

只需快速而肮脏地重写您的行：

```
Total = int(input("How many numbers do you want to enter? "))
#say the user enters 3
Numbers=[]
for i in range(Total):
    Numbers.append(int(input("Please enter a number "))
#User enters in 1
#User enters in 2
#User enters in 3
print ("The sum of the numbers you entered is", sum(Numbers))
#It displays 3 instead of 6 
```

我假设您使用 Python 3 是因为您的方式`print`，但如果您使用 Python 2，请`raw_input`使用`input`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T23:21:22.180

此代码将解决您的问题：

```
total = int(input("How many numbers do you want to enter? "))
#say the user enters 3
sum_input = 0
for i in range(total):
    sum_input += int(input("Please enter a number "))
#User enters in 1
#User enters in 2
#User enters in 3
print ("The sum of the numbers you entered are", sum_input) 
```

* * *

一些评论：

1.  对于样式和变量名，您应该坚持使用[pep8 。](http://www.python.org/dev/peps/pep-0008/)具体来说，`under_store`用于变量名和函数名，以及`CapWords`类名。
2.  这里的使用`eval`是有问题的。[这篇文章](http://me.veekun.com/blog/2012/03/24/on-principle/)很好地解释了为什么你不应该`eval` 在[大多数情况下](https://stackoverflow.com/questions/1832940/is-using-eval-in-python-a-bad-practice)使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T23:21:25.613

您需要在 for 循环之外声明变量，并在循环中继续向其添加输入数字..

```
numbers = 0
for i in range(Total):
    numbers += int(input("Please enter a number "))

print ("The sum of the numbers you entered are", numbers) 
```

# ruby - 如何以 root 用户身份运行 ruby -espeak？

> ID：12764710
> 
> 赞同：2
> 
> 时间：2012-10-06T23:19:05.493
> 
> 标签：ruby, text-to-speech, alsa

我正在创建一个基于 ruby​​ 的应用程序，我希望它能够说出一些文字。到目前为止，我正在使用 espeak：

```
fork{exec ("espeak 'New file located #{timelog.hour} #{timelog.min}' \" > /dev/null")} 
```

当我以普通用户身份运行它时，它可以工作，但我需要这个脚本以 root 身份运行。当它以root身份运行时，我得到：

```
ALSA lib pcm_dmix.c:1018:(snd_pcm_dmix_open) unable to open slave
ALSA lib pcm.c:2217:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear
ALSA lib pcm.c:2217:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe
ALSA lib pcm.c:2217:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side
ALSA lib pulse.c:243:(pulse_connect) PulseAudio: Unable to connect: Connection refused 
```

为什么我不能以 root 身份运行此脚本？另外，还有另一种方法可以让我的 ruby​​ 脚本执行 TTS（文本到语音）吗？

补充：当我运行它时，我什至尝试过 Festival，即使是普通用户也没有任何反应。

```
require "rubygems"
require "festivaltts4r"
"I'm talking".to_speech 
```

（宝石清单）红宝石 1.9

```
bigdecimal (1.1.0)
clickatell (0.8.2)
espeak-ruby (0.4.0)
festivaltts4r (0.2.0)
ffi (1.1.5)
hoe (3.1.0)
io-console (0.3)
json (1.5.4)
minitest (2.5.1)
nice-ffi (0.4)
rake (0.9.2.2)
rdoc (3.9.4)
ruby-sdl-ffi (0.4)
rubygame (2.6.4)
sms_fu (1.1.2)
tts (0.3.0) 
```

操作系统：OpenSuse

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T14:36:27.363

这个技巧有点俗气，但如果你拥有一台 Mac，它应该可以工作。

make 可以使用 'say' 命令从命令行说出事情。尔格；

```
$ say 'hello world' 
```

会让电脑说出这些话。这个命令也可以通过 Ruby 发送；

```
%x( say 'hello world' ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:10:48.977

找到解决方案运行 su 而不是 sudo 并且它可以工作（“espeak”），感谢您对 StackoverFlow 社区的所有帮助；>

# jquery - 响应式菜单脚本似乎只能工作 2 级深

> ID：12764712
> 
> 赞同：0
> 
> 时间：2012-10-06T23:19:40.307
> 
> 标签：jquery, menu

我正在使用 Matt Kersley 响应式菜单脚本，但它似乎只能工作 2 个级别。任何嵌套深度超过 2 个无序列表的菜单链接都不会显示。

[http://jsfiddle.net/fVAVN/](http://jsfiddle.net/fVAVN/) （调整浏览器窗口大小以查看响应功能）

关于阻止 3 级链接显示在移动下拉菜单中的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T00:01:01.640

在查看了插件代码后，没有迹象表明它被设计为更深入 2 个级别。没有递归在选择内生成无限嵌套级别，仅针对`li`主列表的直接子级（在`createSelect()`函数中）和任何二级子级（在`createOptionGroup()`函数中）。

来自他的网站的实际演示，其中列出了 3 个级别，仅在选择中显示了 2 个级别：http: [//mattkersley.com/demos/responsive_menu/](http://mattkersley.com/demos/responsive_menu/)

您可能想在插件 GitHub 问题跟踪器上报告此问题： [https ://github.com/mattkersley/Responsive-Menu/issues](https://github.com/mattkersley/Responsive-Menu/issues)

# perl - 在 Perl 中，如何在 print 语句中使用加号运算符进行算术计算？

> ID：12764715
> 
> 赞同：3
> 
> 时间：2012-10-06T23:20:13.483
> 
> 标签：perl

我有以下小型 Perl (v5.10) 程序：

```
use strict;

my @nums;
my $i = 0;

while ($i < 5) {

    print "Enter number " . $i+1 . ": ";
    $nums[$i] = <STDIN>;
    $i++;
}

foreach (@nums) {

    chomp $_;
    print "$_\t";
}
print "\n"; 
```

这是测试运行的结果：

```
1: 2
1: 1
1: 6
1: 3
1: 2
2   1   6   3   2 
```

如您所见，问题在于提示用户输入的打印语句没有按预期运行。而不是“输入数字 1：”或“输入数字 3：”等，我只得到“1：”。老实说，我没想到这会起作用，因为我知道 + 运算符已被重载以用于 Perl 中的字符串连接。我该如何解决这个问题？原因是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T23:35:32.557

`+`没有超载。这是一个优先问题。表达式被解析为

```
print(((('Enter number ' . $i) + 1) . ': ')); 
```

这与

```
print((0 + 1) . ': '); 
```

您可以使用

```
perl -MO=Deparse,-p -e 'print "Enter number " . $i+1 . ": ";' 
```

看看 Perl 如何解析你的脚本。

添加括号可以解决问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-06T23:35:36.223

尽管您的直接问题是对运算符优先级的错误假设，但我看到另外两个（潜在）问题也可能很有趣。

`$i + 1`首先，使用, 当你可以从 1 开始你的“输出”索引，以 5 结束时，使用它没有什么意义，而是`push`用来填充数组。

其次，`chomp`在脚本的输出阶段看到有点奇怪，实际上它应该在输入阶段完成（当您尝试从用户*那里收集*数字时，不是吗？）

例如：

```
use warnings; use strict;

my @numbers;
for my $i (1..5) {
  print "Enter number $i: ";
  chomp(my $number = <STDIN>);
  push @numbers, $number;
}

print "$_\t" for @numbers;
print "\n"; 
```

# php - SQL 中的用户级别

> ID：12764717
> 
> 赞同：1
> 
> 时间：2012-10-06T23:20:49.553
> 
> 标签：php, mysql

好的，所以我在我的数据库中创建了一个用户表来保存所有用户数据

```
CREATE TABLE `user` (
`id` INT NOT NULL auto_increment,
`username` VARCHAR(50) NOT NULL default '',
`nicename` VARCHAR(255) NOT NULL default '',
`email` VARCHAR(255) NOT NULL default '',
`password` VARCHAR(255) NOT NULL default '',
`permissions` INT NOT NULL default '1',
UNIQUE KEY `user_n` (`username`),
UNIQUE KEY `user_e` (`email`),
    PRIMARY KEY (`id`)
); 
```

我希望权限字段规定用户可以看到和不能看到的内容。IE。ACP 的权限需要 3 级权限，而 1 是注册用户，0 是访问该站点的访客。我怎样才能让一个页面根据用户的权限级别来阻止自己？提前致谢。使用 MySQL/PHP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T23:32:13.547

让用户登录，从表中获取他的权限，并根据权限将他/她重定向到适当的页面，例如

```
$dbh = new PDO("mysql:dbname=dbname;host=hostname", "username", "password" );
$result = $dbh->prepare("select check_user_exists(?) as retval");
$result->bindParam(1, $value, PDO::PARAM_STR, 2);
$result->setFetchMode(PDO::FETCH_CLASS, 'stdClass');
$result->execute(); 
switch($result) {
 case 1 : $header('Location:x.php');
 case 2 : $header('Location:y.php');
 case 3 : $header('Location:z.php'); 
 default 'no suitable page found');
 break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T23:37:08.957

如果您不想使用 MySQL[用户帐户管理](http://dev.mysql.com/doc/refman/5.1/en/user-account-management.html)您可以使用 switch case

```
$permissions = $_GET["permissions"];//Or Post from html page
switch ($permissions)
{
case 1:
  //Level 1 code
  break;
case 2:
  //level 2 code
 break;
case 3:
 //level 3 code
  break;
default:
  //default code 
```

}

# htmlunit - HtmlUnit 依赖项

> ID：12764724
> 
> 赞同：0
> 
> 时间：2012-10-06T23:21:32.500
> 
> 标签：htmlunit

谁能指出一个当前示例，说明如何使用 HTMLUnit 与网页交互（提交表单、单击等）以及与该示例一起使用的当前 jar？我下载了 htmlunit 页面上的所有 jar 及其所有依赖的 jar，并且我不断收到 NoSuchMethod 错误，所以我猜我的 jar 不匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:21:58.527

嗨，如果您在设置 HtmlUnit 时遇到问题，这个答案可能会有所帮助[How to setup HtmlUnit in an Eclipse project?](https://stackoverflow.com/questions/9096433/eclipse-htmlunit-jars-within-a-jar-different-pc-fail/9122852#9122852)

关于表单提交和点击，这是取自 HtmlUnit 文档本身的示例：

```
public void submittingForm() throws Exception {
    final WebClient webClient = new WebClient();

    // Get the first page
    final HtmlPage page1 = webClient.getPage("http://some_url");

    // Get the form that we are dealing with and within that form, 
    // find the submit button and the field that we want to change.
    HtmlForm form = page1.getFormByName("myform");

    HtmlSubmitInput button = form.getInputByName("submitbutton");
    HtmlTextInput textField = form.getInputByName("userid");

    // Change the value of the text field
    textField.setValueAttribute("root");

    // Now submit the form by clicking the button and get back the second page.
    final HtmlPage page2 = button.click();

    webClient.closeAllWindows();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-14T14:59:56.587

HTMLUnit 集成在 Selenium WebDriver 中。[http://www.seleniumhq.org/projects/webdriver/](http://www.seleniumhq.org/projects/webdriver/)

我能给你的最好建议是，因为你正在使用 Java，所以将其设为 Maven 项目并添加 selenium.webdriver 的依赖项。将项目构建为 Maven 可以避免常见错误，例如将 jar 保存在错误的目录中或忘记 1 个 jar

# javascript - 使用浏览器密钥库中的私钥进行基于浏览器的加密/解密

> ID：12764725
> 
> 赞同：12
> 
> 时间：2012-10-06T23:21:51.220
> 
> 标签：javascript, encryption, client-side

我的情况：

1.  医务人员希望将患者的敏感数据输入网络浏览器（！），以便将其存储到某个数据库中，然后再次检索。

2.  除了医务人员本身，其他任何人都不能看到这些数据。这意味着在传输到服务器之前必须使用一些秘密令牌对其进行加密。这也意味着 IT 人员（有权访问服务器/数据库）和其他任何人都不能在没有秘密令牌的情况下对其进行解密。（如果令牌丢失，数据将永远无法访问。）

3.  不应在客户端机器上安装额外的软件，除了一些可以导出一次并将其导入应授予数据访问权限的所有浏览器的令牌（例如，私钥）。

*所以我的问题是：*

有没有办法在客户端加密/解密数据（例如，使用 JavaScript），使用一些可以在浏览器之间轻松交换的秘密浏览器令牌（即，类似于 X.509 证书的导出/导入）？

如果没有，哪些替代解决方案是可能的？由于条件 1 和 2 是强制性的，如果需要，可以只修改条件 3。但是，客户端仍然需要尽可能少的安装工作。

**编辑： SSL 显然只是这个问题答案的一部分！**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T23:24:05.667

看看[个人健康信息的网络浏览器加密](http://www.biomedcentral.com/1472-6947/11/70)，它的“摘要”部分似乎描述了你同样的问题。但是，他们生成加密密钥的“密码”必须共享，这不会让您区分医疗人员。

> 我们描述了一种用于远程数据输入的系统，该系统允许在输入数据的人的网络浏览器中加密识别患者的数据。这些数据不能由数据中心的工作人员在服务器上解密，但可以由输入数据的人或其代理人解密。我们开发此系统是为了解决临床研究背景下出现的问题，但它适用于敏感信息在数据库中存储和更新的一系列情况，并且有必要确保除此之外的任何人都无法查看它那些故意给予访问权限的人。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T21:24:25.090

有一个 AES 加密的 javascript 实现，它加密浏览器中的明文。如果您围绕这些工具构建一些东西，服务器端将只存储加密文本并且没有密码。

[http://www.fourmilab.ch/javascrypt/](http://www.fourmilab.ch/javascrypt/)

不需要在客户端进行任何额外的安装，但可能需要一些开发工作才能获得正确的用户体验。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-15T11:26:17.213

由于 ProtonMail 的努力，现在在浏览器中有一个开源的 PrivateKey 实现：[https ://openpgpjs.org/](https://openpgpjs.org/)

这已经过多次安全审核，并且是 protonmail.com 的基础，因此它有相当好的记录和维护人员。他们还对重要的安全浏览器模型进行了很好的总结。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-25T20:18:37.760

[Web Crypto API](https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto)在所有现代浏览器中都有[很好的](https://caniuse.com/#feat=cryptography)支持。它支持许多算法，包括对称和公钥。很好地提醒用户保持他们的密钥安全并且可能在其他地方备份，这应该是要走的路。

# c# - 语音到文本 C# 训练以获得更好的翻译

> ID：12764727
> 
> 赞同：1
> 
> 时间：2012-10-06T23:22:14.747
> 
> 标签：c#, machine-learning, artificial-intelligence, speech-recognition, speech-to-text

我需要设法使语音文本更智能，因为许多单词在翻译中变得不正确。我找不到太多关于添加单词列表的帮助，不是命令或语法，而是有助于更好地翻译录音的单词。

这是我在网上找到的代码，它有效，但我需要训练，或者让引擎更智能。有任何想法吗？

谢谢。

```
static void Main(string[] args)
{
    // Create an in-process speech recognizer for the en-US locale.
    using (SpeechRecognitionEngine recognizer =
          new SpeechRecognitionEngine(
            new System.Globalization.CultureInfo("en-US")))
    {
        // Create and load a dictation grammar.
        recognizer.LoadGrammar(new  DictationGrammar());

        // Add a handler for the speech recognized event.
        recognizer.SpeechRecognized +=
              new EventHandler<SpeechRecognizedEventArgs>(recognizer_SpeechRecognized);

        // Configure input to the speech recognizer.
        recognizer.SetInputToWaveFile(@"c:\test2.wav");  

        // Start asynchronous, continuous speech recognition.
        recognizer.RecognizeAsync(RecognizeMode.Multiple);

        // Keep the console window open.
        while (true)
        {
            Console.ReadLine();
        }
    }
}

// Handle the SpeechRecognized event.
static void recognizer_SpeechRecognized(object sender, SpeechRecognizedEventArgs e)
{
    Console.WriteLine("Recognized text: " + e.Result.Text);

    using (System.IO.StreamWriter file = new System.IO.StreamWriter(@"C:\WriteLines2.txt", true))
    {
        file.WriteLine("");
    }  
} 
```

# matlab - 在matlab中将数字转换为字符串

> ID：12764733
> 
> 赞同：0
> 
> 时间：2012-10-06T23:22:45.097
> 
> 标签：matlab

有没有办法在matlab中将数字转换为str

例如 30120 变成 cat

其中 c 是 03 a 是 01 t 是 20

这是我在尝试解密为纯文本的 RSA 加密/解密方面的进展。

```
% variables

p=vpi('22953686867719691230002707821868552601124472329079')
q=vpi('30762542250301270692051460539586166927291732754961')
e=vpi('555799999999999');
n=(p.*q)
phi=((q-1).*(p-1))

% how to convert plaintext to integer mod 26

abc = 'abcdefghijklmnopqrstuvwxyz';
word = 'acryptographicallystrongrandomnumbergeneratorwhichhasbeenproperlyseededwithadequateentropymustbeusedtogeneratetheprimespandqananalysiscomparingmillionsofpublickeysgatheredfromtheinternetwasrecentlycarriedoutbylenstrahughesaugierboskleinjungandwachteracryptographicallystrongrandomnumbergeneratorwhichhasbeenproperlyseededwithadequateentropymustbeused';  

[temp1, temp2, temp3, temp4, temp5, temp6, temp7,temp8,temp9] = split(word)

[int1,int2,int3,int4,int5,int6,int7,int8,int9] = intsplit(temp1,temp2,temp3,temp4,temp5,temp6,temp7,temp8,temp9)

[encrypt1, encrypt2, encrypt3, encrypt4, encrypt5, encrypt6, encrypt7, encrypt8, encrypt9] = encrypt_this(int1, int2, int3, int4, int5, int6, int7, int8, int9)

[decrypt1, decryt2, decrypt3, decrypt4, decryt5, decrypt6,decrypt7, decryt8, decrypt9] = decrypt_this(encrypt1, encrypt2, encrypt3, encrypt4, encrypt5, encrypt6, encrypt7, encrypt8, encrypt9) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T00:11:52.493

从 30120 到“猫”：

```
num = 30120;
l = ceil(numel(num2str(num))/2); % number of characters
num2 = sprintf('%06i', num);   % num in string form, with leading zero if needed
                               % '030120'
str = '';
for i = 1:l
    str = [str char(96+str2num(num2(2*i-1:2*i)))]; 
end % 96 is the ASCII offset needed to get a=1, c=3 etc like in your example 
```

结果在`str = 'cat'`. 我想这就是你想要的。

# token - 逻辑有限状态机

> ID：12764736
> 
> 赞同：-3
> 
> 时间：2012-10-06T23:23:11.887
> 
> 标签：token, lexer, state-machine

我正在尝试绘制一个有限状态机（开始、下一个状态等）。如何仅使用 7 个状态来绘制它？

我写出了表格的样子，这将字符输入到标记表中：例如，如果用户输入一个 T 代表真应该是输出

输入/输出或令牌

```
1   / T,
2   / F,
#   / ~,
!   / ~,
&   / ^,
*   / ^,
+   / v,
<>  / x,
!=  / x,
=>  / >,
--> / >,
--  / =,
=   / =,
==  / =,
(   / (,
)   / ), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T10:22:02.243

输入序列的每个前缀都需要一个状态。所以你的状态应该对应于

```
"", "<", "!", "=", "-", "--" 
```

*通常，*每完成一个识别输入序列的输入字符都会产生相应的输出，然后返回到初始状态。任何对输入序列有贡献但尚未完成的输入字符将导致与到目前为止读取的前缀匹配的状态转换。任何两者都不是的输入都将被报告为错误。

不过，您确实有一些棘手的情况。有一些输入序列本身就是其他输入序列的前缀。例如，当输入包含“=+”时。在第一个“=”之后你不知道是否会有一个“>”，所以你还不能输出任何东西。在“+”之后，您知道您必须先输出“=”，然后立即输出“+”。因此，您的自动机必须设计为每次转换处理多个输出。

# json - 从 Json 中的喜欢中获取用户名列表

> ID：12764741
> 
> 赞同：0
> 
> 时间：2012-10-06T23:23:47.630
> 
> 标签：json

如果我有下面的代码，我将如何显示喜欢下的用户名？目前我用来`photo.images.low_resolution.url`向我展示低分辨率图像的urk，但我无法弄清楚喜欢部分。

```
{
    "data": [{
        "location": {
            "id": "833",
            "latitude": 37.77956816727314,
            "longitude": -122.41387367248539,
            "name": "Civic Center BART"
        },
        "comments": {
            "count": 16,
            "data": [ ... ]
        },
        "caption": null,
        "link": "http://instagr.am/p/BXsFz/",
        "likes": {
            "count": 190,
            "data": [{
                "username": "shayne",
                "full_name": "Shayne Sweeney",
                "id": "20",
                "profile_picture": "..."
            }, {...subset of likers...}]
        },
        "created_time": "1296748524",
        "images": {
            "low_resolution": {
                "url": "http://distillery.s3.amazonaws.com/media/2011/02/03/efc502667a554329b52d9a6bab35b24a_6.jpg",
                "width": 306,
                "height": 306
            },
            "thumbnail": {
                "url": "http://distillery.s3.amazonaws.com/media/2011/02/03/efc502667a554329b52d9a6bab35b24a_5.jpg",
                "width": 150,
                "height": 150
            },
            "standard_resolution": {
                "url": "http://distillery.s3.amazonaws.com/media/2011/02/03/efc502667a554329b52d9a6bab35b24a_7.jpg",
                "width": 612,
                "height": 612
            }
        },
        "type": "image",
        "filter": "Earlybird",
        "tags": [],
        "id": "22987123",
        "user": {
            "username": "kevin",
            "full_name": "Kevin S",
            "profile_picture": "http://distillery.s3.amazonaws.com/profiles/profile_3_75sq_1295574122.jpg",
            "id": "3"
        }
    },
    ...]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:40:49.203

看到这个[jsFiddle](http://jsfiddle.net/Yt33a/1)。注意第二个条目没有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T23:43:08.223

请：

```
 //photo = your object
            //Make sure to remove empty objects({...}) as in your code example.

            for (var i = 0; i < photo.data.length; i++) {
                    var photoData = photo.data[i];
                    for (var x = 0; x < photoData.likes.data.length; x++) {
                        //Do what ever you want with the like's user...
                        var likeData = photoData.likes.data[x];
                        alert(likeData.username);
                    }
                } 
```

下次`console.log`用于浏览您的对象： ![在此处输入图像描述](../Images/ee0719cb19329aa82102905ecee44ac0.png)

# android - 是否可以在主线程上等待主线程？

> ID：12764750
> 
> 赞同：0
> 
> 时间：2012-10-06T23:24:58.747
> 
> 标签：android, multithreading

我想使用 WebView 作为 Javascript 解释器。为了检查是否已经加载了一些库，我想使用在 WebViewClient 的 onPageFinished() 方法中倒计时的 CountDownLatch。它看起来像这样：

```
public JsInterpreter(Context context) {
    interpreterWebView = new WebView(context);
    interpreterWebView.getSettings().setJavaScriptEnabled(true);
    interpreterWebView.setWebViewClient(new WebViewReadyListener());

    webViewReadyCountDownLatch = new CountDownLatch(1);
    interpreterWebView.loadUrl(/*javascriptLibrary*/);
}

public void javaScriptRequest(String request) {
    webViewReadyCountDownLatch.await();
    interpreterWebView.loadUrl( "javascript:" + request );
}

private class WebViewReadyListener extends WebViewClient {
    @Override
    public void onPageFinished (WebView view, String url) {
        webViewReadyCountDownLatch.countDown();
    }
} 
```

首先，我认为这是一个好主意，因为像这样我可以等待库被加载，但是当我调用我的 javaScriptRequest() 方法时，我不需要处理侦听器。但是我忘记了 javaScriptRequest() 和 onPageFinished() 方法都在主线程上运行（在我的情况下），所以当我调用 await() 时线程停止运行并且 onPageFinished() 永远不会被调用 =>僵局。

但是是否有任何可行的方法来等待（在主线程上）加载页面？

# java - 使用逻辑读取具有多列的文本文件

> ID：12764752
> 
> 赞同：1
> 
> 时间：2012-10-06T23:25:14.450
> 
> 标签：java, algorithm

我正在阅读一个包含多列的文本文件，并将信息存储在一个数组中

文件看起来像这样

```
Player   |   Team
---------| ---------
PlayerA  |  Team1
PlayerA  |  Team2
PlayerB  |  Team3
PlayerC  |  Team4
PlayerC  |  Team5 
```

如您所见，每个玩家都有多个团队。我正在尝试逐行读取此文件，以便在文件末尾有一个包含三名球员（A、B 和 C）的列表，每个球员都有相应的球队。

课程：

```
Player - with Name and List<Team> (getter setter for both)
Team   - with Name (getter and setter) 
```

我无法弄清楚何时创建 Player 和 Team 类并记录玩家名称何时更改的逻辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T00:02:52.760

通常我不会质疑所提出的模型的有效性，但是......难道球队是那些拥有很多球员而不是相反的球队更有意义吗？

无论如何，假设球员姓名不能被以不同球员姓名再次出现的球队更改：

```
 BufferedReader input = ...;
  Map<String,Player> playersByName = new HashMap<String,Player>();

  String line;
  while ((line = input.readLine()) != null) {
     String playerName;
     String teamName;
     // code to parse the player and team names from 'line' comes here.

     Player player = playersByName.get(playerName);
     if (player == null)
       playersByName.put(playerName,player = new Player(playerName));

     Team team = new Team(teamName);
     if (!player.getTeams().contains(team)) 
        player.getTeams().add(team);
  } 
```

该代码假定 Player 构造函数创建一个空的团队列表。

`Set`尽管上面的方法可以使用列表来保存玩家的团队，但如果该玩家拥有的团队数量可能很大，我建议您使用 a代替以提高效率。在这种情况下，您不需要最后一个条件，您可以直接添加。

`List`如果您完全隐藏or`Set`实现并添加操作以在 Player 类中安全地操作团队列表，那就更好了。

请记住，如果您使用（散列）`Set`解决方案（隐藏或公开），则需要在类中适当地覆盖`equals`and`hashCode`函数`Team`（将它们委托给它的名称会很好）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T23:31:29.560

您可以将您的`person`and封装`team`在两个类中`Person`，并且`Team`..

然后，您可以使用 a`Map<Person, List<Team>>`为每个人维护各种团队。

```
Map<Person, List<Team>> mapping = new HashMap<>();

// Read each line from file..

// Get Person and Team object..

// Assuming that you have your `Person` object in person and `Team` object in team

// You need a Comparator for `Person` class to check for `containment`..
if (mapping.contains(person)) {

    // Person already exist.. Update the list of Team he has
    mapping.get(person).add(team);

} else {

    // New entry.. create a new list.. and add it to map..
    List<Team> teamList = new ArrayList<>();
    teamList.add(team);
    mapping.put(person, teamList);
} 
```

**注意**： - 您需要`Comparator`为您的`Person`班级进行比较..

我想我已经给了你一个工作的基础......休息你需要解决方法..如何填充你的对象..如何实现比较器..以及所有这些..

# python - 将多个模板变量传递给django中的模板标签

> ID：12764757
> 
> 赞同：2
> 
> 时间：2012-10-06T23:26:15.083
> 
> 标签：python, django, django-forms, django-templates, django-views

当我尝试将 3 个变量传递给我的模板标签时，我的问题就出现了，我猜这需要一个或 2 个输入。所以关于如何将 3 个模板变量传递给我的模板标签的任何想法，这是我的代码：

视图.py：

```
from shoghlanah.models import *

register = template.Library()

@register.simple_tag
def get_messages(sender_id,receiver_id,task_id):
    sender = UserProfile.objects.get(id = sender_id)
    receiver =UserProfile.objects.get(id = receiver_id)
    task = Task.objects.get(id=task_id)
    return messages 
```

消息.html：

url.id 和 task_id 是模板变量

```
{{ get_messages request.user.id usr.id task_id }} 
```

它给了我一个错误：无法解析剩余部分：来自'get_messages request.user.id usr.id task_id'的'request.user.id usr.id task_id'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T23:31:39.227

对于 django 标签，您需要使用`{% %}`，而不是双花括号。双括号表示输出一个值。

有关更多信息，请参阅[文档](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-the-compilation-function)。

（就像一个注释，我认为这是一个摘录，但你也需要`{% load %}`你的标签。）

# c++ - 是否可以使用 -Wl, -dynamic-linker 生成链接到适当共享对象文件的正确 ELF？

> ID：12764758
> 
> 赞同：2
> 
> 时间：2012-10-06T23:26:15.737
> 
> 标签：c++, c, gcc, gfortran, openmpi

我正在将 openmpi-1.4.5 从源代码安装到具有 GLIBC_2.11 向后兼容性的 gentoo 中，以便在具有一个 debian gnu/linux（挤压）计算节点的 NFS（集群 HPC）下运行。类似于拥有两个具有独立书店的系统，但两者都可以在高性能网络中执行文件。这个想法是两个操作系统都可以通过 MPI 运行文件。这些是我为配置和制作而执行的步骤：

```
configure:
.././configure --prefix=/usr/local/ompi-compat --build=x86_64-pc-linux-gnu --with-openib     CC=x86_64-pc-linux-gnu-gcc -include /usr/local/include/gcc-preinclude.h

make:
make LDFLAGS="-Wl,-rpath -Wl,/spoa/usr/lib64 -Wl,-rpath -Wl,/usr/local/ompi-compat/lib" 2>&1 | tee make02.log 
```

后来，制作阶段被打破：

...

..

```
libtool: compile:  x86_64-pc-linux-gnu-gcc -include /usr/local/include/gcc-preinclude.h  -DHAVE_CONFIG_H -I. -I../../.././opal/asm -I../../opal/include -I../../orte/include -I../../ompi/include -I../../opal/mca/paffinity/linux/plpa/src/libplpa -I../../../. -I../.. -I../../.././opal/include -I../../.././orte/include -I../../.././ompi/include -O3 -DNDEBUG -finline-functions -fno-strict-aliasing -MT atomic-asm.lo -MD -MP -MF .deps/atomic-asm.Tpo -c atomic-asm.S  -fPIC -DPIC -o .libs/atomic-asm.o 
```

/usr/local/include/gcc-preinclude.h：汇编程序消息：

```
/usr/local/include/gcc-preinclude.h:1: Error: invalid character '(' in mnemonic
make[2]:  [atomic-asm.lo] Error 1
make[2]: Leaving directory `/usr/local/src/openmpi-1.4.5/build/opal/asm'
make[1]:  [all-recursive] Error 1
make[1]: Leaving directory `/usr/local/src/openmpi-1.4.5/build/opal'
make:  [all-recursive] Error 1 
```

模块 asm 存在问题，因为我使用一个 include c 适配来从头文件 /usr/local/include/gcc-preinclude.h 中排除 memcpy@2_2_5 符号：

```
__asm__(".symver memcpy,memcpy@GLIBC_2.2.5"); 
```

我将这种情况修复到文件夹 add --tag=CC 并从 x86_64-pc-linux-gnu-gcc 编译器中剪切“-include /usr/local/include/gcc-preinclude.h”：

```
/bin/sh ../../libtool  --tag=CC --mode=compile x86_64-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I../../.././opal/asm -I../../opal/include -I../../orte/include -I../../ompi/include -I../../opal/mca/paffinity/linux/plpa/src/libplpa   -I../../../. -I../.. -I../../.././opal/include -I../../.././orte/include -I../../.././ompi/include    -O3 -DNDEBUG -finline-functions -fno-strict-aliasing -MT atomic-asm.lo -MD -MP -MF $depbase.Tpo -c -o atomic-asm.lo atomic-asm.S &&mv -f $depbase.Tpo $depbase.Plo 
```

将此行编译到 opal/asm/ 文件夹中很棒！

返回主构建文件夹并继续编译：

```
make LDFLAGS="-Wl,-rpath -Wl,/spoa/usr/lib64 -Wl,-rpath -Wl,/usr/local/ompi-compat/lib" 2>&1 | tee make02.log 
```

编译后几分钟就生效了。

但是当我测试一些可执行文件以运行时，显示为“分段错误”：

```
cd opal/tools/wrappers/.libs

.libs # ./opal_wrapper 
Segmentation fault 
```

因此，对于所有可执行文件...

```
Now, veryfing the Shared Library path linking to ELF File:
ldd opal_wrapper 
linux-vdso.so.1 =>  (0x00007fff3ffff000)
libopen-pal.so.0 => /usr/local/ompi-compat/lib/libopen-pal.so.0 (0x00002b8ea8239000)
libdl.so.2 => /spoa/usr/lib64/libdl.so.2 (0x00002b8ea8493000)
libnsl.so.1 => /spoa/usr/lib64/libnsl.so.1 (0x00002b8ea8697000)
libutil.so.1 => /spoa/usr/lib64/libutil.so.1 (0x00002b8ea88af000)
libm.so.6 => /lib64/libm.so.6 (0x00002b8ea8ad5000)
libpthread.so.0 => /spoa/usr/lib64/libpthread.so.0 (0x00002b8ea8d56000)
libc.so.6 => /spoa/usr/lib64/libc.so.6 (0x00002b8ea8f72000)
/lib64/ld-linux-x86-64.so.2 (0x00002b8ea8017000) 
```

有与 -rpath 链接的共享对象文件。我使用debian“squeeze”附带的主要原始共享对象到/spoa/usr/lib64文件夹并链接OK！但我认为失败源于与原始 gentoo 动态链接器 /lib64/ld-linux-x86_64.so.2 的链接

```
There is my debian "squeeze" main toolchain shared objects:
ls  /spoa/usr/lib64/
ld-2.11.3.so          libdl.so.2            libnsl-2.11.3.so      libstdc++.so.6.0.13        libz.so.1.2.3.4
ld-linux-x86-64.so.2  libgcc_s.so           libnsl.so.1           libutil-2.11.3.so
libc-2.11.3.so        libgcc_s.so.1         libpthread-2.11.3.so  libutil.so.1
libc.so.6             libgfortran.so.3.0.0  libpthread.so.0       libz.so
libdl-2.11.3.so       libm.so               libstdc++.so.6        libz.so.1 
```

如果我手动将此可执行文件的链接器更改为 gentoo 和 debian（通过 NFS）并最终运行：

```
/bin/sh ../../../libtool --tag=CC   --mode=link x86_64-pc-linux-gnu-gcc -include    /usr/local/include/gcc-preinclude.h  -O3 -DNDEBUG -finline-functions -fno-strict-aliasing -pthread -fvisibility=hidden  -L/spoa/usr/lib64 -Wl,-rpath -Wl,/spoa/usr/lib64 -o opal_wrapper opal_wrapper.o ../../../opal/libopen-pal.la -lnsl -lutil  -lm -Wl,-rpath -Wl,/usr/local/ompi-compat/lib -Wl,-dynamic-linker /spoa/usr/lib64/ld-linux-x86-64.so.2 
```

结果：

```
libtool: link: x86_64-pc-linux-gnu-gcc -include /usr/local/include/gcc-preinclude.h -O3     -DNDEBUG -finline-functions -fno-strict-aliasing -pthread -fvisibility=hidden -Wl,-rpath -    Wl,/spoa/usr/lib64 -o .libs/opal_wrapper opal_wrapper.o -Wl,-rpath -Wl,/usr/local/ompi-    compat/lib -Wl,-dynamic-linker /spoa/usr/lib64/ld-linux-x86-64.so.2  -L/spoa/usr/lib64     ../../../opal/.libs/libopen-pal.so -ldl -lnsl -lutil -lm -pthread 
```

和 ldd 正确显示适当的链接器：

```
wrappers ldd .libs/opal_wrapper 

linux-vdso.so.1 =>  (0x00007fffc75a7000)
libopen-pal.so.0 => /usr/local/ompi-compat/lib/libopen-pal.so.0 (0x00002b396dd38000)
libdl.so.2 => /spoa/usr/lib64/libdl.so.2 (0x00002b396df91000)
libnsl.so.1 => /spoa/usr/lib64/libnsl.so.1 (0x00002b396e196000)
libutil.so.1 => /spoa/usr/lib64/libutil.so.1 (0x00002b396e3ae000)
libm.so.6 => /lib64/libm.so.6 (0x00002b396e5d3000)
libpthread.so.0 => /spoa/usr/lib64/libpthread.so.0 (0x00002b396e855000)
libc.so.6 => /spoa/usr/lib64/libc.so.6 (0x00002b396ea71000)
/spoa/usr/lib64/ld-linux-x86-64.so.2 (0x00002b396db18000) 
```

我的问题是**是否可以使用 -Wl, -dynamic-linker 生成链接到适当共享对象文件的正确 ELF？**

运行：./opal_wrapper
无法打开配置文件 /usr/local/ompi-compat/share/openmpi/opal_wrapper-wrapper-data.txt 解析数据文件 opal_wrapper 时出错：未找到

我的一些主机信息：

```
hostname = master
uname -m = x86_64
uname -r = 3.4.5-gentoo
uname -s = Linux
uname -v = #1 SMP Mon Jul 23 21:35:06 UTC 2012 
```

# eclipse - 不理解 JAVA 中 URL.openConnection() 中扩展的概念

> ID：12764764
> 
> 赞同：2
> 
> 时间：2012-10-06T23:27:59.970
> 
> 标签：eclipse, java, extends

嗨，我正在尝试深入学习 JAVA，因此我将在以下几行中深入研究 JDK 源代码：

```
URL url = new URL("http://www.google.com");
URLConnection tmpConn = url.openConnection(); 
```

我附上源代码并在第二行设置断点并进入代码。我可以看到代码流是： URL.openConnection() -> sun.net.www.protocol.http.Handler.openConnection() 我对此有两个问题

首先在 URL.openConnection() 中，代码是：

```
public URLConnection openConnection() throws java.io.IOException {
        return handler.openConnection(this);
    } 
```

handler是URLStreamHandler的对象，定义为blow

```
transient URLStreamHandler handler; 
```

但是URLStreamHandler是一个抽象类，openConnection()方法并没有在里面实现，所以当handler调用这个方法的时候，应该去找一个实现这个方法的子类吧？但是 sun.net.www.protocol 中有很多类实现了这个方法（比如 http.Hanlder, ftp.Handler ） 代码应该如何知道它应该调用哪个“openConnection”方法？在这个例子中，这个 handler.openConnection() 将进入 http.Handler 并且它是正确的。（如果我将 url 设置为[ftp://www.google.com](ftp://www.google.com)，它将进入 ftp.Handler）我无法理解机制。

第二。我附上了源代码，因此我可以进入 JDK 并查看变量，但是对于 sun.net.www.protocol.http.Handler 等许多类，src.zip 中没有源代码。我用谷歌搜索了这个类，网上有源代码我可以得到，但为什么他们没有把它（和许多其他类）放在 src.zip 中？我在哪里可以找到源代码的综合版本？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T23:59:37.887

首先是简单的部分：

> ...我用谷歌搜索了这个类，我可以在网上找到源代码，但为什么他们没有把它（和许多其他类）放在 src.zip 中？

两个原因：

*   在过去，Java 代码库是专有的，这被视为秘密......并且不包含在`src.zip`. 当他们在 GPL 下重新授权 Java 6 时，他们并没有费心去改变它。（不知道为什么。问 Oracle。）

*   因为`sun.*`树中的任何代码都是正式的“实现细节，如有更改，恕不另行通知”。如果他们直接提供代码，它会帮助客户忽略该建议。当客户代码因未经通知的代码更改而中断时，这可能会导致更多的摩擦/负面新闻`sun.*`。

> 我在哪里可以找到源代码的综合版本？

您可以在 OpenJDK 6 / 7 / 8 存储库和相关的下载包中找到它：

*   [http://hg.openjdk.java.net/jdk6/jdk6](http://hg.openjdk.java.net/jdk6/jdk6) - [http://download.java.net/openjdk/jdk6/](http://download.java.net/openjdk/jdk6/)
*   [http://hg.openjdk.java.net/jdk7/jdk7](http://hg.openjdk.java.net/jdk7/jdk7) - [http://download.java.net/openjdk/jdk7/](http://download.java.net/openjdk/jdk7/)
*   [http://hg.openjdk.java.net/jdk8/jdk8](http://hg.openjdk.java.net/jdk8/jdk8)

* * *

现在是关于“深入学习 Java”的部分。

首先，我认为您可能正在以“次优”的方式进行这种学习。我认为您应该阅读有关 Java 和设计模式的书籍并为自己编写代码，而不是阅读 Java 类库。

具体到：

> 但是`URLStreamHandler`是一个抽象类和方法`openConnection()`在里面没有实现所以handler在调用这个方法的时候应该去找一个实现这个方法的子类吧？

在处理程序调用比方法时，它是在子类的实例上调用它。所以找到正确的方法是由 JVM 处理的......就像任何其他多态调度一样。

棘手的部分是您如何获得`sun.net.www.protocol.*`处理程序类的实例。这会发生这样的事情：

1.  创建 URL 对象时，它会调用`getURLStreamHandler(protocol)`以获取处理程序实例。

2.  此方法的代码查看协议的处理程序实例是否已经存在，如果存在则返回。

3.  否则，它会查看是否存在协议处理程序工厂，如果存在，则使用它来创建处理程序实例。（协议处理程序工厂对象可以由应用程序设置。）

4.  否则，搜索 Java 包的可配置列表以查找 FQN 为 的类`package + "." + protocol + "." + "Handler"`，加载它，并使用反射创建实例。（配置是通过系统属性。）

5.  对处理程序的引用存储在 URL 的处理程序字段中，并且 URL 构造继续进行。

因此，稍后，当您调用`openConnection()`URL 对象时，该方法使用`Handler`特定于协议的实例`URL`来创建连接对象。

这个复杂过程的目的是支持开放式协议集的 URL 连接，允许应用程序为新协议提供处理程序，并以静态和动态方式用自己的处理程序替换现有协议。（而且代码比我上面描述的更复杂，因为它必须处理多个线程。）

这利用了许多设计模式（缓存、适配器、工厂对象等）以及 Java 特定的东西，例如系统属性和反射。但是如果你没有阅读和理解这些设计模式等等，你是不可能认出它们的，结果你很可能会发现代码**完全令人迷惑**。因此我的建议是：**先学基础！！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T23:31:15.987

> 但是 URLStreamHandler 是一个抽象类，openConnection() 方法并没有在其中实现，所以当 handler 调用这个方法时，它应该去找一个实现这个方法的子类，对吧？

它必须在 URLStreamHandler 中声明或抽象或实现。然后，如果您提供一个扩展 URLStreamHandler 类型为 URLStreamHandler 的类的实例并调用 openConnection() 方法，它将调用您在扩展 URLStreamHandler 的类的实例中覆盖的实例（如果有），如果没有，它将尝试调用如果实现 URLStreamHandler 中的那个，否则它可能会抛出异常或其他东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T23:33:30.950

看看[URL.java](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/net/URL.java)。`openConnection`使用`URLStreamHandler`先前在 URL 对象本身中设置的。

构造[函数](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/net/URL.java#410)调用[`getURLStreamHandler`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/net/URL.java#URL.getURLStreamHandler%28java.lang.String%29)动态生成类名并使用类加载器加载和实例化适当的类。

# ruby-on-rails - Rails：Postgres中的按日期排序返回不正确的顺序

> ID：12764765
> 
> 赞同：14
> 
> 时间：2012-10-06T23:28:21.493
> 
> 标签：ruby-on-rails, rails-postgresql

我有一个模型`Story`，我想按`created_at`日期订购。由于我在使用 Postgresql 的 Heroku 上托管了我的应用程序，因此我的控制器中有以下内容：

```
@stories = Story.find( :all, :order => "DATE(created_at) DESC" , :limit => 11) 
```

我希望这会给出我的前 11 个故事，按创建日期排序，最新的故事在前。

不幸的是，这不起作用。大多数故事都按正确顺序返回，但前两个故事颠倒了。也就是说，最新的故事出现在列表的第二位。

为什么会这样？我有一个偷偷摸摸的怀疑，我的结果根本没有排序，或者被排序在错误的列上（也许是 id？），并且直到现在它恰好按照我在索引页面上显示时的预期排序。我怎样才能按我的预期订购它？

万一有人关心，索引视图只是按顺序显示故事。即（HAML）：

```
- @stories.each do |story|
  = render :partial => "event", :locals => { :event => story } 
```

**编辑**

我怀疑这`created_at`是一个日期时间列，并且该`DATE(...)`函数忽略了时间部分。因此它以随机顺序返回在同一日期创建的元素。由于前两个故事是在同一天创建的，但相隔几个小时，这可以解释为什么它们似乎是“颠倒的”。如果是这种情况，按日期和时间排序的正确语法是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-06T23:47:46.450

我相信你想要：

```
@stories = Story.find(:all, :order => "created_at DESC" , :limit => 11) 
```

Rails 3+ 的更新：

```
@stories = Story.order(created_at: :desc).limit(11) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-07T04:16:36.220

如果您使用的是 Rails 3，我还鼓励您使用很酷的新查询语法，即：

```
@stories = Story.order('created_at DESC').limit(11) 
```

有关详细信息，请参阅[Active Record 查询接口](http://guides.rubyonrails.org/active_record_querying.html)。

# c - c语言linux中的定时器

> ID：12764771
> 
> 赞同：8
> 
> 时间：2012-10-06T23:29:17.763
> 
> 标签：c, linux, timer

> **可能重复：**
> [C 中的循环/计时器](https://stackoverflow.com/questions/5540245/loops-timers-in-c)

过去 3 天我一直在阅读有关计时器的信息，但找不到任何有用的东西，我试图在实际示例中理解它，有人可以帮我弄清楚如何为以下程序设置警报。

我如何设置一个计时器，以便它发送 2 个参数，一个是数组名称，第二个是要删除的数字，我知道下面无论如何都不安全，我只是想了解如何使用带有参数的警报以调用函数。

请注意，环境是 Linux，我也感谢任何与工作 C 示例的链接。

```
#include<stdio.h>
int delete_from_array(int arg) ;

    int main()
    {

    int a[10000], i, y ;
    //how to set timer here for to delete any number in array after half a second
    for (y=0; y < 100; y++) {

        for (i=0; i<sizeof(a) / sizeof(int); i++)
            a[i] = i;
    sleep(1);
    printf("wake\n");
    }

    }

    int delete_from_array(int arg) 
    {
    int i, a[1000], number_to_delete=0;

    //number_to_delete = arg->number;

    for (i=0; i<sizeof(a); i++)
        if (a[i] == number_to_delete)
            a[i] = 0;
    printf("deleted\n");

    } 
```

我想要做的是我有一个哈希值在 1 秒后过期，所以在我将值插入哈希后，我需要创建一个计时器，以便在假设之后删除该值1 秒，如果我在该间隔（1 秒）之前收到服务器的响应，那么我从哈希中删除值并删除计时器，就像在 tcp 中重新传输一样

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-07T00:39:28.457

你想使用信号还是线程？

首先，设置信号处理程序或准备合适的线程函数；有关详细信息，请参阅[man 7 sigevent](http://www.kernel.org/doc/man-pages/online/pages/man7/sigevent.7.html)。

接下来，创建一个合适的计时器，使用`timer_create()`. 有关详细信息，请参见[man 2 timer_create](http://www.kernel.org/doc/man-pages/online/pages/man2/timer_create.2.html)。

根据您在计时器触发时执行的操作，您可能希望将计时器设置为单次，或者之后以较短的间隔重复。您`timer_settime()`既可以使用计时器，也可以使用解除计时器；有关详细信息，请参见[man 2 timer_settime](http://www.kernel.org/doc/man-pages/online/pages/man2/timer_settime.2.html)。

在实际应用中，您通常需要复用定时器。即使一个进程可以创建多个计时器，它们也是有限的资源。特别是超时计时器——设置标志和/或向特定线程发送信号是微不足道的——应该使用单个计时器，该计时器在下一次超时时触发，设置相关的超时标志，并可选择发送信号（使用空体处理程序）到所需的线程以确保它被中断。（对于单线程进程，原始信号传递将中断阻塞 I/O 调用。）考虑一个服务器，响应某个请求：请求本身可能有大约一分钟左右的超时，同时处理请求可能需要连接超时、I/O 超时等。

现在，最初的问题很有趣，因为定时器在有效使用时非常强大。但是，示例程序基本上是无稽之谈。你为什么不创建一个设置一个或多个计时器的程序，例如每个输出一些东西到标准输出？请记住使用`write()`et al from`unistd.h`因为它们是[异步信号安全的](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html)，而`printf()`et cetera from`stdio.h`则不是。（如果您的信号处理程序使用非异步信号安全函数，则结果是未定义的。它通常可以工作，但根本不能保证；它可能和工作一样崩溃。测试不会说明，因为它是*未定义*的。）

* * *

编辑添加：这是多路复用超时的简单示例。

（在法律允许的范围内，我将下面显示的代码片段的所有版权和相关权利和邻接权奉献给全球公共领域；请参阅[CC0 公共领域奉献](http://creativecommons.org/publicdomain/zero/1.0/)。换句话说，您可以随意以任何方式使用下面的代码希望，只是不要怪我有任何问题。）

我使用了老式的 GCC atomic built-ins，所以它应该是线程安全的。通过一些添加，它也应该适用于多线程代码。（例如，您不能使用互斥锁，因为`pthread_mutex_lock()`它不是异步信号安全的。原子操作超时状态应该可以工作，尽管如果您在触发时禁用超时，可能会留下一些竞争。）

```
#define _POSIX_C_SOURCE 200809L
#include <unistd.h>
#include <signal.h>
#include <time.h>
#include <errno.h>

#define   TIMEOUTS       16
#define   TIMEOUT_SIGNAL (SIGRTMIN+0)

#define   TIMEOUT_USED   1
#define   TIMEOUT_ARMED  2
#define   TIMEOUT_PASSED 4

static timer_t               timeout_timer;
static volatile sig_atomic_t timeout_state[TIMEOUTS] = { 0 };
static struct timespec       timeout_time[TIMEOUTS];

/* Return the number of seconds between before and after, (after - before).
 * This must be async-signal safe, so it cannot use difftime().
*/
static inline double timespec_diff(const struct timespec after, const struct timespec before)
{
    return (double)(after.tv_sec - before.tv_sec)
         + (double)(after.tv_nsec - before.tv_nsec) / 1000000000.0;
}

/* Add positive seconds to a timespec, nothing if seconds is negative.
 * This must be async-signal safe.
*/
static inline void timespec_add(struct timespec *const to, const double seconds)
{
    if (to && seconds > 0.0) {
        long  s = (long)seconds;
        long  ns = (long)(0.5 + 1000000000.0 * (seconds - (double)s));

        /* Adjust for rounding errors. */
        if (ns < 0L)
            ns = 0L;
        else
        if (ns > 999999999L)
            ns = 999999999L;

        to->tv_sec += (time_t)s;
        to->tv_nsec += ns;

        if (to->tv_nsec >= 1000000000L) {
            to->tv_nsec -= 1000000000L;
            to->tv_sec++;
        }
    }
}

/* Set the timespec to the specified number of seconds, or zero if negative seconds.
*/
static inline void timespec_set(struct timespec *const to, const double seconds)
{
    if (to) {
        if (seconds > 0.0) {
            const long  s = (long)seconds;
            long       ns = (long)(0.5 + 1000000000.0 * (seconds - (double)s));

            if (ns < 0L)
                ns = 0L;
            else
            if (ns > 999999999L)
                ns = 999999999L;

            to->tv_sec = (time_t)s;
            to->tv_nsec = ns;

        } else {
            to->tv_sec = (time_t)0;
            to->tv_nsec = 0L;
        }
    }
}

/* Return nonzero if the timeout has occurred.
*/
static inline int timeout_passed(const int timeout)
{
    if (timeout >= 0 && timeout < TIMEOUTS) {
        const int  state = __sync_or_and_fetch(&timeout_state[timeout], 0);

        /* Refers to an unused timeout? */
        if (!(state & TIMEOUT_USED))
            return -1;

        /* Not armed? */
        if (!(state & TIMEOUT_ARMED))
            return -1;

        /* Return 1 if timeout passed, 0 otherwise. */
        return (state & TIMEOUT_PASSED) ? 1 : 0;

    } else {
        /* Invalid timeout number. */
        return -1;
    }
}

/* Release the timeout.
 * Returns 0 if the timeout had not fired yet, 1 if it had.
*/
static inline int timeout_unset(const int timeout)
{
    if (timeout >= 0 && timeout < TIMEOUTS) {
        /* Obtain the current timeout state to 'state',
         * then clear all but the TIMEOUT_PASSED flag
         * for the specified timeout.
         * Thanks to Bylos for catching this bug. */
        const int  state = __sync_fetch_and_and(&timeout_state[timeout], TIMEOUT_PASSED);

        /* Invalid timeout? */
        if (!(state & TIMEOUT_USED))
            return -1;

        /* Not armed? */
        if (!(state & TIMEOUT_ARMED))
            return -1;

        /* Return 1 if passed, 0 otherwise. */
        return (state & TIMEOUT_PASSED) ? 1 : 0;

    } else {
        /* Invalid timeout number. */
        return -1;
    }
}

int timeout_set(const double seconds)
{
    struct timespec   now, then;
    struct itimerspec when;
    double            next;
    int               timeout, i;

    /* Timeout must be in the future. */
    if (seconds <= 0.0)
        return -1;

    /* Get current time, */
    if (clock_gettime(CLOCK_REALTIME, &now))
        return -1;

    /* and calculate when the timeout should fire. */
    then = now;
    timespec_add(&then, seconds);

    /* Find an unused timeout. */
    for (timeout = 0; timeout < TIMEOUTS; timeout++)
        if (!(__sync_fetch_and_or(&timeout_state[timeout], TIMEOUT_USED) & TIMEOUT_USED))
            break;

    /* No unused timeouts? */
    if (timeout >= TIMEOUTS)
        return -1;

    /* Clear all but TIMEOUT_USED from the state, */
    __sync_and_and_fetch(&timeout_state[timeout], TIMEOUT_USED);

    /* update the timeout details, */
    timeout_time[timeout] = then;

    /* and mark the timeout armable. */
    __sync_or_and_fetch(&timeout_state[timeout], TIMEOUT_ARMED);

    /* How long till the next timeout? */
    next = seconds;
    for (i = 0; i < TIMEOUTS; i++)
        if ((__sync_fetch_and_or(&timeout_state[i], 0) & (TIMEOUT_USED | TIMEOUT_ARMED | TIMEOUT_PASSED)) == (TIMEOUT_USED | TIMEOUT_ARMED)) {
            const double secs = timespec_diff(timeout_time[i], now);
            if (secs >= 0.0 && secs < next)
                next = secs;
        }

    /* Calculate duration when to fire the timeout next, */
    timespec_set(&when.it_value, next);
    when.it_interval.tv_sec = 0;
    when.it_interval.tv_nsec = 0L;

    /* and arm the timer. */
    if (timer_settime(timeout_timer, 0, &when, NULL)) {
        /* Failed. */
        __sync_and_and_fetch(&timeout_state[timeout], 0);
        return -1;
    }

    /* Return the timeout number. */
    return timeout;
}

static void timeout_signal_handler(int signum __attribute__((unused)), siginfo_t *info, void *context __attribute__((unused)))
{
    struct timespec   now;
    struct itimerspec when;
    int               saved_errno, i;
    double            next;

    /* Not a timer signal? */
    if (!info || info->si_code != SI_TIMER)
        return;

    /* Save errno; some of the functions used may modify errno. */
    saved_errno = errno;

    if (clock_gettime(CLOCK_REALTIME, &now)) {
        errno = saved_errno;
        return;
    }

    /* Assume no next timeout. */
    next = -1.0;

    /* Check all timeouts that are used and armed, but not passed yet. */
    for (i = 0; i < TIMEOUTS; i++)
        if ((__sync_or_and_fetch(&timeout_state[i], 0) & (TIMEOUT_USED | TIMEOUT_ARMED | TIMEOUT_PASSED)) == (TIMEOUT_USED | TIMEOUT_ARMED)) {
            const double  seconds = timespec_diff(timeout_time[i], now);
            if (seconds <= 0.0) {
                /* timeout [i] fires! */
                __sync_or_and_fetch(&timeout_state[i], TIMEOUT_PASSED);

            } else
            if (next <= 0.0 || seconds < next) {
                /* This is the soonest timeout in the future. */
                next = seconds;
            }
        }

    /* Note: timespec_set() will set the time to zero if next <= 0.0,
     *       which in turn will disarm the timer.
     * The timer is one-shot; it_interval == 0.
    */
    timespec_set(&when.it_value, next);
    when.it_interval.tv_sec = 0;
    when.it_interval.tv_nsec = 0L;
    timer_settime(timeout_timer, 0, &when, NULL);

    /* Restore errno. */
    errno = saved_errno;
}

int timeout_init(void)
{
    struct sigaction  act;
    struct sigevent   evt;
    struct itimerspec arm;

    /* Install timeout_signal_handler. */
    sigemptyset(&act.sa_mask);
    act.sa_sigaction = timeout_signal_handler;
    act.sa_flags = SA_SIGINFO;
    if (sigaction(TIMEOUT_SIGNAL, &act, NULL))
        return errno;

    /* Create a timer that will signal to timeout_signal_handler. */
    evt.sigev_notify = SIGEV_SIGNAL;
    evt.sigev_signo = TIMEOUT_SIGNAL;
    evt.sigev_value.sival_ptr = NULL;
    if (timer_create(CLOCK_REALTIME, &evt, &timeout_timer))
        return errno;

    /* Disarm the timeout timer (for now). */
    arm.it_value.tv_sec = 0;
    arm.it_value.tv_nsec = 0L;
    arm.it_interval.tv_sec = 0;
    arm.it_interval.tv_nsec = 0L;
    if (timer_settime(timeout_timer, 0, &arm, NULL))
        return errno;

    return 0;
}

int timeout_done(void)
{
    struct sigaction  act;
    struct itimerspec arm;
    int               errors = 0;

    /* Ignore the timeout signals. */
    sigemptyset(&act.sa_mask);
    act.sa_handler = SIG_IGN;
    if (sigaction(TIMEOUT_SIGNAL, &act, NULL))
        if (!errors) errors = errno;

    /* Disarm any current timeouts. */
    arm.it_value.tv_sec = 0;
    arm.it_value.tv_nsec = 0L;
    arm.it_interval.tv_sec = 0;
    arm.it_interval.tv_nsec = 0;
    if (timer_settime(timeout_timer, 0, &arm, NULL))
        if (!errors) errors = errno;

    /* Destroy the timer itself. */
    if (timer_delete(timeout_timer))
        if (!errors) errors = errno;

    /* If any errors occurred, set errno. */
    if (errors)
        errno = errors;

    /* Return 0 if success, errno otherwise. */
    return errors;
} 
```

编译时记得包含`rt`库，即使用`gcc -W -Wall *source*.c -lrt -o *binary*`编译。

这个想法是主程序首先调用`timeout_init()`以安装所有必要的处理程序等，并且可能会`timeout_done()`在退出之前调用以取消它（或在`fork()`ing 之后的子进程中）。

要设置超时，请调用`timeout_set(seconds)`. 返回值是一个超时描述符。目前只有一个标志可以使用 来检查`timeout_passed()`，但超时信号的传递也会中断任何阻塞的 I/O 调用。因此，您可以预期超时会中断任何阻塞的 I/O 调用。

如果您想做的不仅仅是在超时时设置一个标志，您不能在信号处理程序中执行此操作；请记住，在信号处理程序中，您仅限于异步信号安全功能。最简单的解决方法是使用带有无限循环的单独线程`sigwaitinfo()`，并`TIMEOUT_SIGNAL`在所有其他线程中阻塞信号。这样可以保证专用线程捕获信号，但同时不限于异步信号安全功能。例如，它可以做更多的工作，甚至可以使用`pthread_kill()`. （只要该信号有一个处理程序，即使是一个空主体，它的传递也会中断该线程中的任何阻塞 I/O 调用。）

这是一个使用超时的简单示例`main()`。这很愚蠢，并且依赖于`fgets()`不重试（当被信号中断时），但它似乎有效。

```
#include <string.h>
#include <stdio.h>

int main(void)
{
    char    buffer[1024], *line;
    int t1, t2, warned1;

    if (timeout_init()) {
        fprintf(stderr, "timeout_init(): %s.\n", strerror(errno));
        return 1;
    }

    printf("You have five seconds to type something.\n");
    t1 = timeout_set(2.5); warned1 = 0;
    t2 = timeout_set(5.0);
    line = NULL;

    while (1) {

        if (timeout_passed(t1)) {
            /* Print only the first time we notice. */
            if (!warned1++)
                printf("\nTwo and a half seconds left, buddy.\n");
        }

        if (timeout_passed(t2)) {
            printf("\nAw, just forget it, then.\n");
            break;
        }

        line = fgets(buffer, sizeof buffer, stdin);
        if (line) {
            printf("\nOk, you typed: %s\n", line);
            break;
        }
    }

    /* The two timeouts are no longer needed. */
    timeout_unset(t1);
    timeout_unset(t2);

    /* Note: 'line' is non-NULL if the user did type a line. */

    if (timeout_done()) {
        fprintf(stderr, "timeout_done(): %s.\n", strerror(errno));
        return 1;
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T06:42:19.930

有用的阅读是[time(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/time.7.html)手册页。请注意，Linux 还提供了[timerfd_create(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/timerfd_create.2.html) Linux 特定的[系统调用](http://en.wikipedia.org/wiki/Syscall)，通常与[poll(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html)之类的多路复用系统调用（或`ppoll(2)`旧的`select(2)`系统调用）一起使用。

如果您想使用信号，请不要忘记仔细阅读[signal(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html)手册页（有关编码信号处理程序的限制；您可能希望`volatile sigatomic_t`在信号处理程序中设置一个变量；您不应该做任何`new`或`delete`- 或`malloc`& `free`-信号处理程序中的内存管理操作，其中只允许*异步安全*函数调用。）。

还要注意，面向事件的编程，例如 GUI 应用程序，经常提供方法（在 Gtk 中，在 Qt 中，with `libevent`，...）在它们的事件循环中管理定时器。

# java - Java - JSF - 公制到英制单位，使用语言环境进行转换

> ID：12764772
> 
> 赞同：0
> 
> 时间：2012-10-06T23:29:39.807
> 
> 标签：java, jsf, localization, converter, distance

Java 中是否有用于长度距离值和单位的本地化库？

类似于`SimpleDateFormat`?

或者那里有一个 JSF 组件，因为它通常只是用于显示目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:22:11.377

请参阅[Units of Measurement API](https://code.google.com/p/unitsofmeasure/)及其在[JScience](http://jscience.org/)库中的实现。

# android - 怎么分享东西？

> ID：12764775
> 
> 赞同：0
> 
> 时间：2012-10-06T23:29:49.340
> 
> 标签：android, share, intentfilter

作为学习练习，我正在编写一个具有 android.intent.action.SEND 意图的应用程序。我希望能够让它发送任何我能想到的文件名，但我看到的定义此类应用程序的所有示例都特​​定于媒体商店中的图像、铃声管理器中的铃声等。我不想要枚举我通过谷歌搜索找到的所有可能的算法，用于将 Uri 转换为文件。我想要一个通用的解决方案。我见过一个听起来很有希望的 OPENABLE 类别，但我仍然没有看到用于发现底层文件名的通用解决方案。有吗？

我只是想让这个东西上传它交给一个php脚本的任何内容，该脚本实现了一个POST方法来进行文件上传。我看不出有任何理由将其限制为图像或视频或类似的东西，但对于我的生活，我无法弄清楚如何让它适用于其他应用程序想要共享的任何随机文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T10:39:11.053

> 我正在寻找要使用的文件名

不能保证有一个文件名可以使用。特别是如果方案是`content://`，很可能没有文件名，因为在某些情况下没有文件（例如，数据是数据库中的 BLOB）。

袖手旁观，我会使用这样的算法：如果方案是`content://`并且返回一个整数，`getLastPathSegment()`则`Uri`生成一个文件名；否则，使用`getLastPathSegment()`. 这应该很好地涵盖`content://`、`file://`和`http://`方案，而且我想不出您在处理`ACTION_SEND`活动中可能遇到的任何其他方案。

# java - 如何让我的 java 代码接受使用自签名或弱 sslv2 协议完成握手

> ID：12764776
> 
> 赞同：1
> 
> 时间：2012-10-06T23:29:56.093
> 
> 标签：java, ssl, jsse

我有一个尝试与网站创建 ssl 握手的 java 代码。当网站的 ssl 证书是自签名或使用不安全选项时，我收到错误并且代码无法提取证书。

```
SSLSocket socket=null;
SSLSocketFactory factory=null;
factory = HttpsURLConnection.getDefaultSSLSocketFactory();

try{
    socket = (SSLSocket) factory.createSocket(host, port);          
    System.out.println("listen on port "+port+" for host "+host);

    } //end try

    catch (IOException ex)
        {
            //remote host is not listening on port 443
            System.out.println("Can not listen on port "+port+" of host"+host);
        } //end catch

        System.out.println("Creating a SSL Socket For "+host+" on port "+port);
        SSLSession ss = socket.getSession();
        socket.startHandshake(); // start the handshake
        System.out.println("Handshake Done"); 
```

例如，我收到以下错误：

```
Exception in thread "main" javax.net.ssl.SSLHandshakeException: Insecure renegotiation is not allowed 
```

如何让我的 java 代码接受使用自签名和弱 ssl 配置完成握手？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T00:10:08.340

这里至少有 3 个可能的问题。削弱 SSL/TLS 配置几乎总是一个坏主意。

*   首先，您可以启用一些默认未启用的密码套件。[Sun Provider 文档](http://docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html#SunJSSEProvider)中列出了受支持的和默认启用的。您可以`setEnabledCipherSuites`在`SSLSocket`/上启用特定密码套件`SSLEngine`。值得阅读[TLS 规范](https://www.rfc-editor.org/rfc/rfc4346#appendix-A.5)中有关特定密码套件的脚注和注释（特别是匿名密码套件缺乏安全性）。

*   重新谈判的问题略有不同。您可以使用[更新中引入的系统属性](http://www.oracle.com/technetwork/java/javase/documentation/tlsreadme2-176330.html)：`sun.security.ssl.allowUnsafeRenegotiation`。顾名思义，它是不安全的。

*   接受任何证书是另一个问题。通常，您应该导入您心目中的特定证书。`SSLContext`但是，您可以在检查服务器证书时从`X509TrustManager`不会引发任何异常的情况下构建。此处或其他站点上有许多此类不安全代码的示例。

JSSE 默认行为往往是相当明智的。引入不安全行为应谨慎行事。学习/实验是可以的，但在生产软件（甚至原型）中这样做是有问题的。

# scala - 带有 Eclipse IDE 错误的 Lift Framework

> ID：12764777
> 
> 赞同：0
> 
> 时间：2012-10-06T23:30:21.880
> 
> 标签：scala, lift

我正在尝试 Lift Framework，但是我无法让它与 Eclipse 一起正常工作。

我收到以下错误：

```
import org.eclipse.jetty.server.handler.ContextHandler
import org.eclipse.jetty.server.nio.SelectChannelConnector
import org.eclipse.jetty.server.{Handler, Server}
import org.eclipse.jetty.webapp.WebAppContext 
```

对象 eclipse 不是资源包 org 的成员：RunWebApp.scala

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:02:05.587

您的类路径不完整。如何在 Eclipse 中导入项目？您是否使用 Sbt 和其中一个插件来导出 Eclipse 项目？

在 Scala IDE 网站上查看本教程：[在 Scala IDE 2.0 中设置和使用 Lift framework 2.4](http://scala-ide.org/docs/tutorials/lift24scalaide20/index.html)。

# javascript - 如何使用jquery获取id中包含非法字符的元素？

> ID：12764778
> 
> 赞同：2
> 
> 时间：2012-10-06T23:30:23.050
> 
> 标签：javascript, jquery

第三方控件创建的元素的 id 如下所示：

```
 aspxgv_1803_0_cell1_9_Attribute1^ubd 
```

我需要获取此元素的值，但 jquery 似乎与 id 中的非法“^”有问题。

```
 var fieldId = 'aspxgv_1803_0_cell1_9_Attribute1^ubd';
 var fieldValue = $('#' + fieldId).val();  // <-------- function stops 
```

我怎样才能得到这个元素的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T23:35:13.163

您可以转义角色。

```
var fieldValue = $('#aspxgv_1803_0_cell1_9_Attribute1\\^ubd').val(); 
```

[http://jsfiddle.net/82AFA/](http://jsfiddle.net/82AFA/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T23:35:15.930

如果你想要一个 DOM 元素的 jQuery 对象，你总是可以将元素传递给 $ 函数而不是选择器。

```
var fieldId = 'aspxgv_1803_0_cell1_9_Attribute1^ubd';
var fieldValue = $(document.getElementById(fieldId)).val(); 
```

这是一个使用此代码返回 jQuery 对象的 html 的示例。[http://jsfiddle.net/AZgwm/](http://jsfiddle.net/AZgwm/)

# android - SimpleAdapter 自定义过滤器

> ID：12764781
> 
> 赞同：1
> 
> 时间：2012-10-06T23:31:01.233
> 
> 标签：android, simpleadapter

我正在尝试让 SimpleAdapter 上的自定义过滤器正常工作，并且似乎落在了最后一个障碍上。调试代码时，我可以在 publishResults 方法的 itemsFiltered 中看到过滤后的 ArrayList，但始终显示完整列表。

如何让适配器在过滤结果列表而不是完整的未过滤列表中工作？

代码是：

```
private class TextCharFilter extends Filter{

    @Override
    protected FilterResults performFiltering(CharSequence constraint) {

        // convert search string to lower case - the filtering is not case sensitive
        constraint = constraint.toString().toLowerCase();

        // define the result object
        FilterResults result = new FilterResults();
        // define a place to hole the items that pass filtering         
        List<HashMap<String, String>> filteredItems = new ArrayList<HashMap<String,String>>();

        // loop through the original list and any items that pass filtering are added to the "filtered" list
        if(constraint != null && constraint.toString().length() > 0) {

            for(int i = 0; i < items.size(); i++) {
                HashMap<String, String> tmp = items.get(i);
                String candidate = tmp.get("PT").toLowerCase();

                if(candidate.contains(constraint) ) {
                    filteredItems.add(tmp);
                }
            }

            // set the result to the "filtered" list.
            result.count = filteredItems.size();
            result.values = filteredItems;

        }    
        else
        {
            // if nothing to filter on -  then the result is the complete input set
            synchronized(this)
            {
             result.values = items;
             result.count = items.size();
            }
        }
        return result;
    }

    @SuppressWarnings("unchecked")
    @Override
    protected void publishResults(CharSequence constraint, FilterResults results) {

        ArrayList<HashMap<String, String>> tmp = (ArrayList<HashMap<String, String>>)results.values;

        itemsFiltered = new ArrayList<HashMap<String,String>>();

        for (int i = 0; i < tmp.size(); i++){
            itemsFiltered.add(tmp.get(i));
        }

        notifyDataSetChanged();

        notifyDataSetInvalidated();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T01:10:35.780

看起来您正在将项目添加到在 publishResults() 中创建的数组列表中。这些项目永远不会添加到实际的适配器中。您应该在 publishResults() 中清除适配器，然后重新添加项目。或者只是从过滤器列表中创建一个新适配器并将其设置为列表视图的适配器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T18:33:38.797

我有同样的问题。

这段代码对我有用。

```
protected void publishResults(CharSequence constraint, FilterResults results) {
        arrayList.clear();
        arrayList.addAll((Collection<? extends HashMap<String, String>>) results.values);
        if (results.count > 0) {
            notifyDataSetChanged();
        } else {
            notifyDataSetInvalidated();
        }       
} 
```

# python - 使用 Get2D 在 OpenCV 中访问 2d 像素值时出现超出范围错误或错误返回值

> ID：12764785
> 
> 赞同：4
> 
> 时间：2012-10-06T23:31:30.933
> 
> 标签：python, image-processing, opencv, python-imaging-library

这是一个简单的程序，它使用 OpenCV（在 Python 中）导入图像，将其转换为灰度并显示在窗口中。然后，当用户单击窗口中的某个位置时，将从该点执行填充。此外，**当用户单击该点时，程序应在该位置打印原始 2D 像素值。**

不幸的是，当太靠右时，OpenCV 会给我一个超出范围的错误，尽管它适用于图像的大部分部分。泛光填充本身在图像中的所有 xy 位置都正常工作。

在工作区域中，输出如下所示：

```
mouse at: 70 , 84
Image Size (220, 186)
cv2: (183.0, 0.0, 0.0, 0.0)
pil im: 255 
```

但是当我向右走得太远时，输出看起来像这样：

```
mouse at: 198 , 129
Image Size (220, 186)
OpenCV Error: One of arguments' values is out of range (index is out of range) in cvGet2D
print "cv2: " +   str(cv2.cv.Get2D(cv2.cv.fromarray(gray), x, y));
cv2.error: index is out of range 
```

我尝试将图像转换为 PIL 图像并使用 Image.getpixel((x,y)) 函数，从某种意义上说它没有给我一个超出范围的异常，但不幸的是它完全返回 255 xy点（事实并非如此）。

我尝试将 OpenCV 函数调用中 xy 参数的位置 str(cv2.cv.Get2D(cv​​2.cv.fromarray(gray), x, y)) 切换为 str(cv2.cv.Get2D(cv​​2.cv.fromarray (gray), y, x))，这消除了超出范围的错误，但在所有位置都会导致 (255.0, 0.0, 0.0, 0.0) 的虚假返回。事实上，这个误差的临界点，在 x 维度上 >186，恰好是 y 维度的长度。这是一个主要线索，但不能解决问题（如上所示，我的测试图像尺寸为 220 x 186）。

```
import cv2
import cv
import PIL.Image
import numpy

def main():

#mouse event handler flag
CV_EVENT_LBUTTONDOWN = 1;

#THE CODE AT ISSUE IS CONTAINED IN THIS MOUSEHANDLE FUNCTION
def mouseHandle(event, x, y, flag, param):
    if (flag == 1):
        print "mouse is at: " + str(x) + " , " + str(y);
        pilim = Image.fromstring("L", cv.GetSize(cv2.cv.fromarray(gray)),cv2.cv.fromarray(gray).tostring())
        print "Image Size " + str(cv.GetSize(cv.fromarray(gray)))
        print "cv2: " +   str(cv2.cv.Get2D(cv2.cv.fromarray(gray), x, y));
        print "pil im: " + str(pilim.getpixel((x,y)))
        cv2.floodFill(gray,mask,(x,y), (255,255,0),diff,diff)
        cv2.imshow('flood fill',gray)

#THE CODE BELOW IS BASIC OPENCV STUFF TO LOAD THE IMAGE AND INITIATE MOUSECALLS
#reads in the image
im = cv2.imread('image.jpg')

#converts it to grayscale
gray = cv2.cvtColor(im,cv2.COLOR_BGR2GRAY)
cv2.imshow('grayscale', gray)
cv2.waitKey(0);

# flood fill variables
diff = (6,6,6)
mask = zeros((h+2,w+2),uint8)

# show the result in an OpenCV window, calling setMouseCallBack on mouse click
cv2.imshow('flood fill',gray)
cv2.setMouseCallback('flood fill', mouseHandle, CV_EVENT_LBUTTONDOWN)
cv2.waitKey(0) 
```

![测试图像](../Images/a3fd2edbbcd3aaae9c3d61a598754efa.png) ![洪水填充后的测试图像（工作）](../Images/a473c7ad79e5437b50140d9216b65ff4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:11:06.827

我能够解决这个问题。

**首先，关于越界异常。** 事实证明 cv.Get2D 采用 y,x 形式的像素坐标，这可能会造成混淆。使用线 cv.Get2D(cv​​2.cv.fromarray(gray), y, x)); 解决了越界问题。

**其次，关于虚假像素值。** 这个实在是太傻了，对不起大家。由于某种原因，CV_EVENT_LBUTTONDOWN 标志会导致 mouseHandle 函数执行两次。我以为每次单击时我都看到了整个输出，但实际上是在洪水填充发生后看到的*第二个输出，这解释了所有位置的 255 值。*悲伤但真实！

起初我怀疑我没有正确使用 cv.fromarray，因为 cv2.imread('image.jpg') 返回类型'numpy.ndarray'，而 cv.LoadImage('image.jpg') 返回类型'cv2。 cv.iplimage'。我尝试使用 OpenCV1 的 cv.LoadImage('image.jpg') 并使用 cv.FloodFill(im2, (x,y), (255,255,0), diff, diff, 0, cv.fromarray(mask)) 加载我的图像用于洪水填充（注意 OpenCV 1 与 2 中参数顺序的变化），并使用 cv.Get2D(cv​​2.cv.fromarray(gray), y, x)) 打印 xy 坐标；但问题依然存在。而且，你瞧，答案要简单得多:)

**不过，当我调试时，我确实注意到了一些有趣和奇怪的事情。** 正如我所提到的，我尝试使用 OpenCV 1 和 OpenCV2 进行洪水填充，但取决于我在 mouseHandle 函数中首先调用的洪水填充，只执行了那个！

下面是一个输出（鼠标点击后）的顺序：

```
cv2.floodFill(gray,mask,(x,y), (255,255,0),diff,diff)
cv.FloodFill(im2, (x,y), (255,255,0), diff, diff, 0, cv.fromarray(mask)) 
```

输出：

```
mouse at: 202 , 13
(220, 186)
cv2: (35.0, 0.0, 0.0, 0.0)
cv1: (35.0, 0.0, 0.0, 0.0)
pil image: 35
mouse at: 202 , 13
(220, 186)
cv2: (255.0, 0.0, 0.0, 0.0)
cv1: (35.0, 0.0, 0.0, 0.0)
pil image: 255 
```

下面是另一个输出（鼠标点击后）的顺序：

```
cv.FloodFill(im2, (x,y), (255,255,0), diff, diff, 0, cv.fromarray(mask))
cv2.floodFill(gray,mask,(x,y), (255,255,0),diff,diff) 
```

输出：

```
mouse at: 137 , 126
(220, 186)
cv2: (146.0, 0.0, 0.0, 0.0)
cv1: (146.0, 0.0, 0.0, 0.0)
pil image: 146
mouse at: 137 , 126
(220, 186)
cv2: (146.0, 0.0, 0.0, 0.0)
cv1: (255.0, 0.0, 0.0, 0.0)
pil image: 146 
```

这两行代码的顺序是我所做的唯一更改！请注意，pil 图像字符串输出遵循 cv2 floodfill 所做的事情，因为它包含相同的数据。

# php - 使用 PHP 发送密码重置电子邮件

> ID：12764788
> 
> 赞同：0
> 
> 时间：2012-10-06T23:31:41.183
> 
> 标签：php

如果我向用户的电子邮件地址发送一封电子邮件，其中包含指向密码重置页面的链接，我如何验证该链接？我应该在我的数据库中存储一些随机生成的密钥，然后添加到链接字符串中吗？`www.mydomain.com/passwordreset.html?key=abcd1234zz235`然后对照数据库中存储的密钥检查这个密钥？

如果这确实是正确的方法，我是否应该创建一些单独的表来存储这些密钥及其相应的电子邮件？如果答案是肯定的，那么我应该在用户重置密码后删除这些密钥以节省数据库空间吗？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:47:54.590

> 我应该创建一些单独的表来存储这些密钥及其相应的电子邮件吗？

是的，我会那样做。

> 如果答案是肯定的，那么我应该在用户重置密码后删除这些密钥以节省数据库空间吗？

不是因为空间，而是因为交易已经完成。

顺便说一句，你不能在这里节省空间。因为您应该在审核日志中保留密码更改事件的日志条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T23:33:34.037

这是一种非常典型的处理方式。我通常会在我的表中添加一个`PasswordResetKey`字段。`user`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T23:34:39.297

是的，那会奏效。就我个人而言，我喜欢让密钥成为基于他们的用户数据的编码字符串，然后我可以对其进行解码。例如，我可能会获取字符串`userid|password_hash|emailaddress`，对其进行编码并发送。然后，当我收到它时，我可以对其进行解码并将其拆分出来。用户 ID 用于搜索数据库，然后验证 password_hash 和电子邮件，如果全部检查，那么我可以继续。

也就是说，您的解决方案可能更好，因为这意味着您知道是否实际请求了重置。归根结底，重要的是很难猜测。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T23:40:33.817

看看[这个链接](https://stackoverflow.com/questions/4857039/looking-for-a-some-good-options-to-send-users-reset-password-emails)，它可能会对你有所帮助。基本上，您必须为密码重置请求创建一个表并生成一个可以识别用户的密钥，以及重置请求本身。

# command-line - 禁止从命令行触发 Seahorse？

> ID：12764789
> 
> 赞同：0
> 
> 时间：2012-10-06T23:31:45.757
> 
> 标签：command-line, gnome, gnupg

我认为[海马](https://live.gnome.org/Seahorse)是个好主意。但也有不想要的时候。

以下示例触发 Gnome/Seahorse。

```
echo "FOO" > readme.txt
gpg -c --symmetric --passphrase secret readme.txt 
```

我可以仅针对此示例在命令行上防止这种情况发生吗？

感谢任何指点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:40:59.313

你想要的是：

```
gpg --batch -c --passphrase secret readme.txt 
```

（作为记录，该弹出窗口与 Seahorse 无关。）

# python - 为 python 脚本（机器人）启动计划作业的最佳方式

> ID：12764790
> 
> 赞同：2
> 
> 时间：2012-10-06T23:31:50.327
> 
> 标签：python, scheduled-tasks, celery, bots, celerybeat

我正在尝试构建一个 Twitter 机器人，它执行一组具有不同时间间隔/周期的周期性操作。所以我试图想出一个好的解决方案来处理一组具有不同频率的计划任务。

例如，我需要执行以下任务：

*   每 15 分钟做一次任务 1。
*   每小时做任务 2。
*   每天做任务3。
*   每周做一次任务 4。

我一直在努力使用 cron 作业，但它看起来很混乱，要么每 15 分钟使用一个 cron 作业并检查需要执行哪个任务，要么为每个任务设置单独的 cron 条目。

我想要更好的东西，所以我读到 Celery 可以用来安排定期任务，但是我很难把头绕在工人和消息队列上。

还有其他选择吗？
您认为哪个更好使程序更易于维护和扩展？
我以前使用过 cron，但用于非常简单的任务。是否有任何关于如何为这种情况正确设置 cron 的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:35:05.493

您应该更深入地了解 cron，因为它受到许多操作系统的支持，并且可以通过简单的脚本进行扩展。这是一个[简单的 crontab 生成器](http://www.tdscripts.com/webmaster_utilities/cron-generator.php)

# ruby - 如何自定义 Pry 的 .pryrc 文件？

> ID：12764792
> 
> 赞同：0
> 
> 时间：2012-10-06T23:31:56.997
> 
> 标签：ruby, macos, irb, pry

我正在尝试自定义 pry 的`pryrc`文件，但我找不到它。文档说它在主目录中，但我在那里看不到它。如果它是不可见的，尽管如此，可以告诉我如何编辑它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T23:42:51.343

你试过了`ls .pryrc`吗？如果它不在那里，就把它放在那里。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-07T04:12:40.410

Pry 仅在文件存在时读取`~/.pryrc`文件，如果文件不存在（如您的情况），您可以创建它。

# scala - SBT：依赖于其他没有发布的 SBT 项目

> ID：12764795
> 
> 赞同：15
> 
> 时间：2012-10-06T23:32:28.767
> 
> 标签：scala, build-automation, sbt

我有一组松散相关的组件，其中一些依赖于其他组件。具体来说，假设我们有组件“common”、“a”和“b”。“common”没有任何依赖关系，但所有其他项目都使用“common”。此外，“a”依赖于“b”。所有组件都是用 Scala 编写的，我想使用 sbt 来构建它们。

拥有以下属性会很不错：

1.  多人在不同的项目上工作，这就是为什么我们不希望有一个存储库，而是每个项目一个存储库。
2.  构建项目应该很容易，并且所有依赖项都应该自动构建（如果需要）。也就是说，如果我修改“common”然后构建“b”，这应该首先构建“common”然后继续构建“b”。
3.  能够在 IDE 中拥有所有项目，以便重构和类似的 IDE 任务正常工作，并且所有受影响的项目都可以正确更改。

据我所知，在 sbt 中有两种可能存在这种依赖关系；我们要么使用子项目，要么使用托管依赖项（即推送到某个地方，例如本地）。但是，似乎这两个选项都没有提供上述（1）或（2）。尤其是

*   使用子项目迫使我们使用单个存储库，因为所有子项目都必须位于主项目的子目录中。
*   在本地发布项目并使用托管依赖项很麻烦，因为如果先构建和发布该项目，则更改“common”然后构建“b”只会获取“common”中的更改。我可以看到托管依赖项在许多情况下都很有用，但对于我们的特定用例，它们似乎不能很好地工作。我们经常在多个项目上工作并同时更改它们。出于这个原因，必须发布通常看起来过于复杂。

真的没有办法说一个 sbt 项目依赖于某个（相对）位置的另一个 sbt 项目，并且让 sbt 弄清楚何时构建依赖项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T00:58:25.110

使用 SBT，您可以使用源依赖项。

```
lazy val root = Project("root", file("."), settings = ...) dependsOn(dispatchLiftJson)

lazy val dispatchLiftJson = uri("git://github.com/dispatch/dispatch-lift-json#0.1.0") 
```

在这个例子中，它将从 git 中获取。您可以指定磁盘上的文件位置，尽管我找不到示例。可能

```
lazy val dep = file("/path/to") 
```

或者

```
lazy val dep = uri("file:///path/to") 
```

我自己也在为此苦苦挣扎——目前我正在使用运行良好的本地发布方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-21T10:07:01.803

给定目录

*   `/build/some_app/`
*   `/build/some_lib/`

文件`/build/some_app/build.sbt`：

```
lazy val someLib = ProjectRef(file("../some_lib"), "exportedSomeLib")
// = RootProject(file("../some_lib")) also works?

lazy val root = (project in file("."))
                .dependsOn(someLib) 
```

在`/build/some-lib/build.sbt`：

```
lazy val exportedSomeLib = (project in file(".")) 
```

**警告**：请注意，在这些文件的两个根范围中定义的项目*并不总是*会导致错误，但如果键（=值名称）在 .sbt 文件之间发生冲突，则会*默默地更改全局（？）范围中的值。*

# php - 在 a-to-z 和 0-9 之外的字符前后放置一个空格

> ID：12764796
> 
> 赞同：0
> 
> 时间：2012-10-06T23:32:44.863
> 
> 标签：php

这是用于分析字符串...需要分解字符串以获取所有字符。基本上：

```
$string = "This is (1990-2002) some, text [after] this."; 
```

我需要做什么才能得到这个：

```
$string = "This is ( 1990 - 2002 ) some , text [ after ] this ."; 
```

这可能是这样的：

```
$string = str_replace('','',$string); 
```

注意：如果插入双空格并删除它，则不是问题...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T23:45:38.737

试试这个：

```
$string = "This is (1990-2002) some, text [after] this.";
$pattern = '/([^a-zA-Z0-9])/';
$replace_pattern = ' $1 ';
echo preg_replace($pattern, $replace_pattern, $string); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T00:05:45.347

```
 $string = 'This is (1990-2002) some, text [after] this.';

 $replace = preg_replace("/([^a-zA-Z0-9\s])/", " $1 ", $string);
 // This is ( 1990 - 2002 ) some , text [ after ] this . 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T23:39:11.947

```
$out = '';
for ($i = 0; $i<strlen($string); $i++) {
    if(ctype_alnum($string[$i])) {
        $out .= $string[$i];
    } else {
        $out .= ' ' . $string[$i] . ' ';
    }
}
// $out contains the fixed string 
```

# javascript - 暂时移除对象的 toJSON fn 成员

> ID：12764803
> 
> 赞同：0
> 
> 时间：2012-10-06T23:34:12.470
> 
> 标签：javascript, json, backbone.js, local-storage, parse-platform

我正在尝试将变量存储在我的移动网站上的 localStorage 中，因此如果用户离开，他们的状态不会丢失。为此，我将所有重要数据作为 JSON 存储在 localStorage 中。但是，数据的某些部分是 Parse 对象（Backbone 模型）并具有`toJSON`功能。为了不显眼地存储数据，我需要删除`toJSON`以便对象按原样存储，然后重新附加它。但是，我的代码不起作用：

```
 var toJSON = null;
                if(obj && obj.toJSON) {
                    toJSON = obj.toJSON;
                    delete obj.toJSON;
                }

                window.localStorage[localStorageIndex] = JSON.stringify(obj);

                if(toJSON)
                    obj.toJSON = toJSON; 
```

任何想法为什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T00:04:15.287

试一试：

```
obj.toJSON = undefined;

window.localStorage[localStorageIndex] = JSON.stringify(obj);

delete obj.toJSON; 
```

这应该暂时用 遮蔽原型`toJSON`，`undefined`导致`stringify()`跳过它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:23:55.517

我学会了不要使用 localStorage 存储重物......

# c++ - 在 Visual Studio 2010 中将控制台项目转换/移植到 Formless 应用程序

> ID：12764810
> 
> 赞同：1
> 
> 时间：2012-10-06T23:35:06.190
> 
> 标签：c++, visual-studio-2010

我对 C/C++ 知之甚少，但我想将 C++ 控制台项目编译为常规 Windows 应用程序。所以最后应用程序根本没有表单，只执行代码。这是我从 ufasoft 矿工那里得到的代码：

```
/*###########################################################################################################################
# Copyright (c) 1997-2012 Ufasoft   http://ufasoft.com   mailto:support@ufasoft.com                                         #
#                                                                                                                           #
# This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License #
# as published by the Free Software Foundation; either version 3, or (at your option) any later version.                    #                                                          #
#                                                                                                                           #
# This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied        #
# warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.     #
#                                                                                                                           #
# You should have received a copy of the GNU General Public License along with this program;                                #
# If not, see <http://www.gnu.org/licenses/>                                                                                #
###########################################################################################################################*/

#include <el/ext.h>

using namespace Ext;

#undef main
#undef wmain

extern "C" int __cdecl _my_wmain(int argc, wchar_t *argv[], wchar_t *envp[]);
extern "C" int __cdecl _my_main(int argc, char *argv[], char *envp[]);

int _cdecl ext_main(int argc, argv_char_t *argv[], argv_char_t *envp[]) {
#if UCFG_WCE
    RegistryKey(HKEY_LOCAL_MACHINE, "Drivers\\Console").SetValue("OutputTo", 0);
#endif

    atexit(MainOnExit);

#if UCFG_ARGV_UNICODE
    return _my_wmain(argc, argv, envp);
#else
    return _my_main(argc, argv, envp);
#endif
}

#if UCFG_WCE
#   if UCFG_ARGV_UNICODE
#       pragma comment(linker, "/ENTRY:mainWCRTStartup")
#   else
#       pragma comment(linker, "/ENTRY:mainACRTStartup")
#   endif
#endif 
```

如何将其转换为常规的 Windows 应用程序？我已经将子系统更改为 Windows (/SUBSYSTEM:WINDOWS)。然后我把ProjectSettings中的EntryPoint改成了ext_main。我还必须确保函数获取 CMDCommandLine 导致 APP 需要读取参数。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:47:31.507

使用`WinMain`：

```
int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{
    return 0;
} 
```

并将入口点设置`Project Properties -> Linker -> Advanced -> Entry Point`为`WinMain`.

而且`/SUBSYSTEM:WINDOWS`，但你已经这样做了。

# ruby - Ruby/Selenium WebDriver XPath 的优缺点

> ID：12764811
> 
> 赞同：3
> 
> 时间：2012-10-06T23:35:10.900
> 
> 标签：ruby, xpath, selenium-webdriver

我一直在使用 Ruby 1.8.7 中的 Selenium WebDriver。大多数项目都可以通过某些东西轻松找到，`brwsr.find_element(:link, 'Click Here')`但并非所有内容都可以通过这种方式访问​​（至少不能使用我所知道的 :link、:tag_name 等集合）。

因此，在浪费了数小时试图找到具有上述策略的元素之后，我偶然发现了一些示例 xpath。我以前从来没有费心去研究它，因为我看过很多关于 xpath 的帖子（主要是在 StackOverflow 上）。

我在 Pros and Cons 上找到了一篇 Google Groups 帖子，唯一的缺点是它在 IE 中速度较慢。由于我现在在 Linux 环境（以及 Firefox 和 Chrome）中完成所有工作，我不在乎它在 IE 中的速度较慢。

我已经使用 xpath 大约 2 周了，我的测试脚本的开发时间可能是它的一半。并且使用带有 find_element 的 xpath 似乎总是能抓住正确的元素，因为我曾经在上面描述的非 xpath 方法中遇到一些问题。

鉴于我看到的“如果可以的话，我真的想避免使用 xpath”评论的数量，我想知道我错过了什么。还是 xpath 像正则表达式，理解它的人喜欢它，所有那些从不费心学习它的人都被它迷惑了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T21:16:52.190

XPath 可能天生就很慢，但这并不意味着它完全不行。

问题通常倾向于性能和IE。所有版本的 IE 在 XPath 上都很糟糕。好事？您已经确定 IE 不是自动化测试的核心部分，因此您可以将其删除。

至于性能，我倾向于只在使用复杂的 XPath 查询时才注意到性能下降。基本的往往与通过 ID 等搜索一样快，而当你计时时它可能会更慢，我看不出有什么明显的区别。

如果需要，我倾向于使用 XPath。如果你有一个复杂的 HTML 结构，我不明白你为什么不使用 XPath。它将使测试运行。如果它很慢，请在之后查看它，但只有在你得到一个漂亮的绿色勾号表示测试已通过之后。

Firefox 和 Chrome 倾向于使用 XPath 查询。

XPath 查询的另一个坏处是，如果使用非常特定的位置，您可能会陷入混乱。例如，使用此 XPath 在复杂表中查找单词“test”：

```
//div[1]/table[1]/tr[3]/td[1]/div[1]/a[text()='test'][1] 
```

如果您在第三个表格上方添加一个额外的表格行怎么办？测试将失败。

然而，它可以缩短为，不依赖于底层结构的位置：

```
//table/descendant::a[text()='text'] 
```

如果您从头到尾了解 XPath 查询，并且可以优化它们，我不明白为什么不使用它们。

# d3.js - 使用 D3 生成“实时”图

> ID：12764813
> 
> 赞同：69
> 
> 时间：2012-10-06T23:35:15.230
> 
> 标签：d3.js

我最近开始学习使用 D3.js 框架，虽然它的设计似乎完全符合我的要求，但我找不到“实时”更新图的简单示例。

我正在寻找类似折线图的东西，它会随着新数据的可用而更新。新数据可以通过点击带有“最后一次看到”时间戳的 json url 或其他一些 AJAX-y 方法来获得。

*编辑：*答案的 D3 部分在这里：

[http://bost.ocks.org/mike/path/](http://bost.ocks.org/mike/path/)

现在，人们建议如何从服务器获取新数据到客户端？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-09T05:31:28.410

本教程可以帮助您创建实时线图：[http ://bost.ocks.org/mike/path/](http://bost.ocks.org/mike/path/)

我想补充几点意见：

**异步数据**

当你做一个实时图表时，你经常异步获取数据，因此你无法知道每个“点”之间的确切时间。

*   对于这条线，你很幸运，因为`line`教程中的描述并不关心这一点。
*   对于具有平滑过渡效果的持续时间，这是比较棘手的。关键是将持续时间设置为最后一帧和上一帧之间的时间。这也是下一个很好的近似值，因为网络几乎总是具有相同的吞吐量。

**Y 轴**

在传统的折线图上，很容易确定 y 域。然而，对于实时数据，y 值通常会超出限制。这就是为什么我建议在每次迭代时调用一个函数来设置 y 域。您还可以创建边界框。

**表现**

由于总是添加数据，您可能需要非常注意您必须删除不再使用的值，否则您的数据将变得越来越重并且整个动画可能会崩溃。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-07-12T11:42:03.380

这个插件可能很有趣：**[Cubism](http://square.github.io/cubism/)**。

> **Cubism.js**是一个用于可视化时间序列的 D3 插件。使用 Cubism 构建更好的实时仪表板，从 Graphite、Cube 和其他来源提取数据。Cubism 在 GitHub 上的 Apache 许可证下可用。

* * *

另一个有趣的项目是**[Rickshaw](https://github.com/shutterstock/rickshaw)**，它也利用了 D3。

> 用于创建交互式实时图形的 JavaScript 工具包

请参阅此示例：[未来的随机数据](https://tech.shutterstock.com/rickshaw/examples/extensions.html)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-10-06T23:56:53.047

这只是两个例子：

1.  您可以让客户端定期从服务器**拉取新数据（即使用一些 AJAX 调用）。**
2.  如果浏览器支持，你可以向服务器打开一个websocket，这样服务器可以直接**推送**新的数据。

选择其中一个取决于许多变量：您期望有多少连接，数据的更新率是多少，您计划支持哪些浏览器等等......

在任何情况下，d3.js 库都不涉及*如何获取*数据，而是涉及*如何显示*它们。

# jquery - JQUERY AJAX 在 IE8 中不工作

> ID：12764818
> 
> 赞同：0
> 
> 时间：2012-10-06T23:35:42.093
> 
> 标签：jquery, ajax, internet-explorer

> **可能重复：**
> [在 IE8 中意外缓存 AJAX 结果](https://stackoverflow.com/questions/1013637/unexpected-caching-of-ajax-results-in-ie8)

我正在使用 jquery / ajax 从我网站上的另一个页面引入数据。

代码是...

```
 <script type="text/javascript">
   $(document).ready(function() {
     $.ajaxSetup({ cache: false }); 
     setInterval(function() {
     $('#homenews').load('investor/news_releases.php #content_wide .newspost:lt(2)');
     }, 3000); 
   });
</script> 
```

在其他浏览器中工作正常，但不是 IE。

有任何想法吗？

# iphone - 对于将值存储在集合类中的设置器，我应该使用什么属性关键字

> ID：12764821
> 
> 赞同：1
> 
> 时间：2012-10-06T23:35:59.937
> 
> 标签：iphone, objective-c, memory-leaks, cocos2d-iphone

我正在快速浏览一个寻找内存泄漏的大型项目，并遇到了一个`@property (nonatomic, retain)`没有对应`release`的 in `dealloc`. 哎呀，快速修复，我想。

在后来的崩溃之后，我仔细观察并且`setFoo`方法被覆盖，并且值被保留但不是由 ivar - 为了这个问题，假设它被放入 NSDictionary。

（好的，如果您不想假设 - 设置值实际上是 cocos2d 中的 CCSprite `setNormalSprite`，并且它作为子项添加，因此保留，但只是分配给 ivar：

```
 - (void)setNormalSprite:(CCSprite *)sprite 
  {
    if (normalSprite) {
        [self removeChild:normalSprite cleanup:YES];
        normalSprite = nil;
    }

    normalSprite = sprite;
    [self addChild:normalSprite];

    (...omitted...)
   } 
```

)

对于设置器导致保留计数增加但不是因为与其关联的 ivar 被保留的值的正确关键字是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:38:29.683

`retain`（或`strong`在 ARC 世界中）在您的情况下是正确的，因为您将`CSSprite`对象添加到另一个保留该对象的集合中。

如果您实际上没有使用实例变量来存储对象，您也应该将其设置为`@property`。`@dynamic``@implementation`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T00:50:16.137

如果您没有使用 ARC 并且您正在显式编写 setter 方法，那么您使用什么所有权属性并不重要。所有权属性仅在编译器生成 setter 或（在 ARC 下）ivar 时才重要。

您可以使用 retain 属性作为对象获取属性值所有权的文档，但您需要确保您确实以某种方式保留它。

# javascript - 媒体元素“播放”事件跟踪

> ID：12764826
> 
> 赞同：3
> 
> 时间：2012-10-06T23:36:53.637
> 
> 标签：javascript, dom-events, mediaelement.js

我有以下启动`mediaelement`音频插件的简单代码：

```
$('audio,video').mediaelementplayer({
    audioWidth: 300,
    audioHeight: 30
}); 
```

我需要跟踪`playing`事件；我已经尝试了以下代码，但没有任何运气：

```
var player = document.getElementsById('player2');
player.playing = function(e) {
   alert('OMG! You played a song!');
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T23:54:18.787

试试这个：

```
# using jquery (on, bind, etc)...
$('#player1').bind('playing', function(e) { 
   console.log('bind - playing') 
});

# addEventListener 
var player = document.getElementById('player1'); 
player.addEventListener('playing', function(e) {
   console.log('addEventListener - playing') ;
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-08T01:57:44.120

好的，所以我想通了...

```
$('audio,video').mediaelementplayer({
    audioWidth: 300,
    audioHeight: 30,

    success: function(mediaElement, domObject) {
        mediaElement.addEventListener('loadeddata', function() {
            console.log('addEventListener - loadeddata')            
        }, false);
    },
    error: function() {
        //alert('Error setting media!');
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-12T05:25:25.880

有点晚了，但必须自己解决这个问题。我注意到 MediaElement 文档说成功函数的第一个参数是一个 mediaElement 对象。恰好播放器 html 被包装在一个元素中，无论它是什么类型的视频。您不能直接将其作为 jQuery 对象访问，但一个简单的调整就可以解决所有问题。

无论您传入哪个元素，以下内容都用于获取最近的玩家

```
function getVideo(el) {
    var $el = $(el);

    if ($el.find('mediaelementwrapper').length) {
        return $el.find('mediaelementwrapper')[0];
    } else if ($el.parents('mediaelementwrapper').length) {
        return $el.parents('mediaelementwrapper')[0];
    }

    return $el.is('mediaelementwrapper') ? $el : false;
} 
```

请注意，我们必须通过 [0] 返回文档节点而不是 jQuery 对象来访问它。

但是从那里我们可以像这样使用它。

```
$video = getVideo('#playerID');

$video.addEventListener('playing', function () {
    debugger;
}, false); 
```

或者在没有助手的情况下进行

```
$video = jQuery('#playerID mediaelementwrapper')[0]; 
```

# ruby-on-rails-3 - Nginx 路由到 /index.html/index.html

> ID：12764831
> 
> 赞同：1
> 
> 时间：2012-10-06T23:37:37.160
> 
> 标签：ruby-on-rails-3, nginx, centos, web-deployment

我最近使用 Phusion Passenger 设置了 Nginx，旨在将 rails 应用程序部署到 sub-uri。rails 应用程序根据需要部署，但是，当我导航到 projectvisionapps.com 时，我注意到 nginx 将我路由到 projectvisionapps.com/index.html/，它会抛出 404。如果我手动输入 projectvisionapps.com/index.html , nginx 提供正确的页面。

有什么线索或建议吗？

检查 nginx 错误日志，我看到：

```
2012/10/06 19:23:05 [error] 20782#0: *21 "/var/www/vhosts/projectvisionapps.com/httpdocs/index.html/index.html" is not found (20: Not a directory), client: 50.1.57.140, server: , request: "GET /index.html/ HTTP/1.1", host: "www.projectvisionapps.com" 
```

我的 nginx.conf 如下：

```
#user  nobody;
worker_processes  1;

error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;

events {
worker_connections  1024;
}

http {
index index.html;

passenger_root /home/samudzi/.rvm/gems/ruby-1.9.3-p194@global/gems/passenger-3.0.17;
passenger_ruby /home/samudzi/.rvm/wrappers/ruby-1.9.3-p194/ruby;

include       mime.types;
default_type  application/octet-stream;

#log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
#                  '$status $body_bytes_sent "$http_referer" '
#                  '"$http_user_agent" "$http_x_forwarded_for"';

access_log  logs/access.log;

sendfile        on;
#tcp_nopush     on;

#keepalive_timeout  0;
keepalive_timeout  65;

gzip  on;

include /opt/nginx/conf/conf.d/*.conf;

} 
```

我包含的 .conf 文件是：

```
server {
listen 74.208.46.76:80;
server_name projectvisionapps.com;
#root /var/www/vhosts/projectvisionapps.com/httpdocs;

#try_files $uri.html $uri $uri/ @notfound;

location / {
  index index.html;
  root /var/www/vhosts/projectvisionapps.com/httpdocs;
  try_files $uri $uri/ /index.html;
}
} 
```

对于 rails 应用程序（完美运行）

```
server {
listen 74.208.46.76:80;
#server_name projectvisionapps.com;
root /var/www/vhosts/projectvisionapps.com/httpdocs;
passenger_enabled on;
passenger_base_uri /dev;
rails_spawn_method smart;
rails_env development;
gzip on;
} 
```

感谢您的任何建议或建议！

# android - 我可以通过 Intent 将帐户传递给另一个活动吗？

> ID：12764835
> 
> 赞同：0
> 
> 时间：2012-10-06T23:38:51.280
> 
> 标签：android, android-intent, account

是否可以通过 Intent 将 Android Account 对象从一个活动传递到另一个活动？如果是这样，怎么做？这是良好的编程习惯吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T23:53:27.437

如果你的意思是`android.accounts.Account`“是”，因为它实现了，`Parcelable`你可以`Intent`使用`putExtra(String name, Parcelable value)`.`Intent`

无论它是否是良好的编程实践......这完全取决于您为什么要这样做以及`Activity`收到它的人会用它做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-17T07:27:33.153

**您可以通过Intent**将帐户发送到其他活动

 **如果用户已经登录，首先获取帐户

```
GoogleSignInAccount account;
account = GoogleSignIn.getLastSignedInAccount(this); 
```

然后在 Intent 中将帐户作为 Extra 传递

```
Intent intent = new Intent(this,ReceiverActivity.class);
            intent.putExtra("ACCOUNT",account);
            startActivity(intent); 
```

并在 ReceiverActivity

```
GoogleSignInAccount account =getIntent().getParcelableExtra("ACCOUNT"); 
```

然后您可以从用户的个人资料中获取其他详细信息，例如

```
String personName = account.getDisplayName();
            String personGivenName = account.getGivenName();
            String personFamilyName = account.getFamilyName();
            String personEmail = account.getEmail();
            String personId = account.getId();
            Uri personPhoto = account.getPhotoUrl(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T23:44:48.400

您能否提供一个代码示例，并稍微解释一下您使用此传递的具体目的是什么？

您可能希望优化应用程序的流程，以便直接处理帐户信息，并在需要时创建帐户对象。**

# c# - 枚举 htmlTextWriterStyle 修改然后存储在另一个类似的容器中

> ID：12764841
> 
> 赞同：0
> 
> 时间：2012-10-06T23:39:47.267
> 
> 标签：c#, asp.net, list, class, enums

我正在为 asp.net 中可用的所有常见样式类型搜索数据源，并且`htmlTextWriterStyle`似乎有我可以要求的所有内容。

如果我可以使用其他来源，我会很高兴知道。

我试图实现的是将其值复制到任何其他类型的数据“容器”

这与 enum 不同，更灵活，尽管它的值仍然可以通过

```
var test = name.value ; 
```

像

```
string MyElmWidth = htmlTextWriterStyle.width.ToString(); 
```

并且可以像列表一样分配，因此我可以通过 foreach 循环动态填充它

（不必硬编码变量和值）

一个集合或类似代码中的列表：

```
 public static List<string> EnumToStrLst<T>()
                {
                    Array values = Enum.GetValues(typeof(T));
                    T[] result = (T[])values;
                    List<string> strlst = new List<string>();
                    foreach (var item in result)
                    {
                        string e = item.ToString();

                        strlst.Add(e);
                    }
                    return strlst;
                } 
```

`List<string>`然后以这种方式填充 a ：

```
List<string> testLstStr = EnumToStrLst<htmlTextWriterStyle>() 
```

虽然这里的整个问题是访问它的值 - 一种不像枚举那样优雅的方式：

```
testLstStr.elementAt(index) 
```

反对

```
enumName.valueName 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T00:01:40.837

这没有经过测试，但是如何创建这样的包装类：

```
public class HtmlTextWrapper {

//private members
   private HtmlTextWriterStyle _htmlTextWriterStyle;

//public props same as the wrapped htmltextwriterstyle
    public string BackgroundColor { 
        get
        {
            if (_htmlTextWriterStyle != null)
            {
                return _htmlTextWriterStyle.BackgroundColor;
            }
        }
        set
        {
            if (_htmlTextWriterStyle != null)
            {
                this._htmlTextWriterStyle.BackgroundColor = value;
            }
        }
    }

    public string BackgroundImage {get;set; }
    //....
    //....

//construcor
     public HtmlTextWrapper(HtmlTextWriterStyle other)
     {
            _htmlTextWriterStyle = other;
     }

} 
```

这样，您就可以使用这个包装类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T14:37:44.387

我可以在不放弃访问便利性的情况下做到这一点的唯一方法是使用密封类和 const 字符串从带有摘要的枚举元数据中复制它（仅用一种类型声明很好地布局）

```
namespace Style
{
    public sealed class StlProps
    {
    // Summary:
    //     Specifies the HTML backgroundcolor style.
    public const string BgColor = "BackgroundColor",
    //
    // Summary:
    //     Specifies the HTML backgroundimage style.
    BackgroundImage = "BackgroundImage",
    //
    // Summary:
    //     Specifies the HTML bordercollapse style.
    BorderCollapse = "BorderCollapse",
    //
    // Summary:
    //     Specifies the HTML bordercolor style.
    BorderColor = "BorderColor",
    //
    // Summary:
    //     Specifies the HTML borderstyle style.
    BorderStyle = "BorderStyle",
    //
    // Summary:
    //     Specifies the HTML borderwidth style.
    BorderWidth = "BorderWidth",
    //
    // Summary:
    //     Specifies the HTML color style.
    Color = "Color",
    //
    // Summary:
    //     Specifies the HTML fontfamily style.
    FontFamily = "FontFamily",
    //
    // Summary:
    //     Specifies the HTML fontsize style.
    FontSize = "FontSize",
    //
    // Summary:
    //     Specifies the HTML fontstyle style.
    FontStyle = "FontStyle",
    //
    // Summary:
    //     Specifies the HTML fontheight style.
    FontWeight = "FontWeight",
    //
    // Summary:
    //     Specifies the HTML height style.
    Height = "Height",
    //
    // Summary:
    //     Specifies the HTML textdecoration style.
    TextDecoration = "TextDecoration",
    //
    // Summary:
    //     Specifies the HTML width style.
    Width = "Width",
    //
    // Summary:
    //     Specifies the HTML liststyleimage style.
    ListStyleImage = "ListStyleImage",
    //
    // Summary:
    //     Specifies the HTML liststyletype style.
    ListStyleType = "ListStyleType",
    //
    // Summary:
    //     Specifies the HTML cursor style.
    Cursor = "Cursor",
    //
    // Summary:
    //     Specifies the HTML direction style.
    Direction = "Direction",
    //
    // Summary:
    //     Specifies the HTML display style.
    Display = "Display",
    //
    // Summary:
    //     Specifies the HTML filter style.
    Filter = "Filter",
    //
    // Summary:
    //     Specifies the HTML fontvariant style.
    FontVariant = "FontVariant",
    //
    // Summary:
    //     Specifies the HTML left style.
    Left = "Left",
    //
    // Summary:
    //     Specifies the HTML margin style.
    Margin = "Margin",
    //
    // Summary:
    //     Specifies the HTML marginbottom style.
    MarginBottom = "MarginBottom",
    //
    // Summary:
    //     Specifies the HTML marginleft style.
    MarginLeft = "MarginLeft",
    //
    // Summary:
    //     Specifies the HTML marginright style.
    MarginRight = "MarginRight",
    //
    // Summary:
    //     Specifies the HTML margintop style.
    MarginTop = "MarginTop",
    //
    // Summary:
    //     Specifies the HTML overflow style.
    Overflow = "Overflow",
    //
    // Summary:
    //     Specifies the HTML overflowx style.
    OverflowX = "OverflowX",
    //
    // Summary:
    //     Specifies the HTML overflowy style.
    OverflowY = "OverflowY",
    //
    // Summary:
    //     Specifies the HTML padding style.
    Padding = "Padding",
    //
    // Summary:
    //     Specifies the HTML paddingbottom style.
    PaddingBottom = "PaddingBottom",
    //
    // Summary:
    //     Specifies the HTML paddingleft style.
    PaddingLeft = "PaddingLeft",
    //
    // Summary:
    //     Specifies the HTML paddingright style.
    PaddingRight = "PaddingRight",
    //
    // Summary:
    //     Specifies the HTML paddingtop style.
    PaddingTop = "PaddingTop",
    //
    // Summary:
    //     Specifies the HTML position style.
    Position = "Position",
    //
    // Summary:
    //     Specifies the HTML textalign style.
    TextAlign = "TextAlign",
    //
    // Summary:
    //     Specifies the HTML verticalalign style.
    VerticalAlign = "VerticalAlign",
    //
    // Summary:
    //     Specifies the HTML textoverflow style.
    TextOverflow = "TextOverflow",
    //
    // Summary:
    //     Specifies the HTML top style.
    Top = "Top",
    //
    // Summary:
    //     Specifies the HTML visibility style.
    Visibility = "Visibility",
    //
    // Summary:
    //     Specifies the HTML whitespace style.
    WhiteSpace = "WhiteSpace",
    //
    // Summary:
    //     Specifies the HTML zindex style.
    ZIndex = "ZIndex";
    }
} 
```

# asp.net - 如何设置 Content-Length 标头并在 Cassini 中工作？

> ID：12764842
> 
> 赞同：0
> 
> 时间：2012-10-06T23:39:49.890
> 
> 标签：asp.net, http, http-headers, cassini, http-head

我正在做一个稍微低级的 ASP.Net 项目。我需要支持的一件事是正确处理 HEAD 请求。对于初学者来说，HEAD 请求基本上只是没有内容的 HTTP 标头。

其中一部分包括正确的内容长度。（即使 ASP.Net 认为内容长度为 0）

我使用此代码进行设置：

```
HttpRequest r; .... 
if(r.Headers.AllKeys.Contains("Content-Length")){
    r.Headers["Content-Length"]=length.ToString();
}else{
    r.AddHeader("Content-Length",length.ToString());
} 
```

这在 mod_mono+Apache 和 Mono 的实现上运行良好`xsp`，但是，在 Microsoft 的 Cassini 开发服务器上，这会产生带有文本的 PlatformNotSupportedException`This operation requires IIS integrated pipeline mode.`

此问题是否有任何已知的解决方法？

# visual-studio-2010 - Visual Studio Post-Build 事件调用带有空格的参数的批处理文件

> ID：12764847
> 
> 赞同：4
> 
> 时间：2012-10-06T23:40:41.087
> 
> 标签：visual-studio-2010, batch-file, command-line-arguments, post-build-event

有人知道怎么做吗？

我有一个 .bat 脚本，我希望它既可以从命令行使用，也可以在 Visual Studio 中使用构建后脚本。

该脚本接受参数，其中一些可以包含空格。

.bat 脚本的路径可以包含空格，最好表示为相对于 $(SolutionDir) 的路径。

我已经尝试了一百种不同的命令行变体，其中包含不同的引号和转义字符组合，包括：

```
"$(SolutionDir)myScript.bat" "$(SolutionDir)\" "$(Platform)" "$(Configuration)"

call "$(SolutionDir)myScript.bat" "$(SolutionDir)" "$(Platform)" "$(Configuration)"

cmd /c ""$(SolutionDir)myScript.bat" "$(SolutionDir)" "$(Platform)" "$(Configuration)"" 
```

但是它们都会产生错误，我找不到有效的组合，而是通常会出现此错误：

```
"[path-to-script] is not recognized as an internal
or external command, operable program or batch file" 
```

从构建后步骤调用它的正确语法是什么？

我在将其设置为外部工具时也遇到了类似的问题，因此非常感谢您提供任何帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T01:55:16.053

感谢 Pilotcam 和 James K 在评论中为我指明了正确的方向，我遇到的互操作问题在我试图从 VS2010 调用的批处理脚本中是一个相对简单的问题。

从命令行调用时，我总是传入不需要引号的相对路径。当从 VS2010 调用时，我根据 VS 对 $(SolutionDir) 和其他带有引号的宏的扩展来指定完整路径。

当批处理脚本处理这些参数时，它并没有考虑到引号字符可能作为参数的一部分出现的事实。所以，它做的第一件事就是检查这样的空参数：

```
if "%1"=="" goto usage 
```

第一行是从 VS 调用时令人窒息的内容，如下所示：

```
"$(SolutionDir)myScript.bat" "$(SolutionDir)" 
```

... if 语句被阻塞，因为封闭的引号被煮成了 %1 的值。正确的修复方法，当参数周围没有封闭引号时以及 VS2010 时都适用于命令行使用，就像这样从 %1 中去除引号：

```
if "%~1"=="" goto usage 
```

...在解决这个问题后，其余的工作就很好了。可能是批处理脚本 101，因此您可以知道我编写 Windows 批处理脚本的频率。

# c++ - Boost.Python：注册非 Boost.Python 转换器

> ID：12764849
> 
> 赞同：1
> 
> 时间：2012-10-06T23:41:33.293
> 
> 标签：c++, python, boost-python, sfml

我有一个使用 Boost.Python 和 SFML 的项目。我的许多对象都公开了 SFML 类型，并且为了不复制轮子，我想从我自己的绑定中返回对象，这些绑定由 SFML 的 Python 绑定包装。例如，我有这个类：

```
class MyThing
{
public:
    sf::Image& image() { return _image; }

private:
    sf::Image _image;
}; 
```

绑定看起来像这样：

```
class_<MyThing>("MyThing")
    .add_property("image", make_function(&MyThing::image, return_internal_reference<1>()))
    ; 
```

当然，实际上尝试`mything.image`从 Python 访问 yield `TypeError: No Python class registered for C++ class sf::Image`，因为 Boost.Python 的转换注册表不知道`sf::Image`（SFML 的 Python 绑定是用 Cython 完成的）。

有没有办法告诉 Boost.Python 转换注册表`sf::Image`用 SFML 的 Python 绑定中的类型包装类型？

# c++ - 由于删除而崩溃（尝试处理异常...）

> ID：12764851
> 
> 赞同：0
> 
> 时间：2012-10-06T23:41:45.813
> 
> 标签：c++, qt, exception, memory, crash

我正在用 Qt 编写一个程序，我希望它显示一个带有 Exit | 的对话框。每当代码中某处抛出错误时重新启动选择。

我所做的导致崩溃，我真的无法弄清楚它为什么会发生，我希望你能帮助我理解发生了什么。

这是我的`main.cpp:`

```
#include "my_application.hpp"

int main(int argc, char *argv[])
{
    std::cout << std::endl;

    My_Application app(argc, argv);

    return app.exec();
} 
```

这是`my_application:hpp`：

```
#ifndef MY_APPLICATION_HPP
#define MY_APPLICATION_HPP

#include <QApplication>

class Window;

class My_Application : public QApplication
{
public:
    My_Application(int& argc, char ** argv);
    virtual ~My_Application();

    virtual bool notify(QObject * receiver, QEvent * event);

private:
    Window *window_;

    void exit();
    void restart();
};

#endif // MY_APPLICATION_HPP 
```

最后，这里是`my_application.cpp`：

```
#include "my_application.hpp"
#include "window.hpp"

#include <QMessageBox>

My_Application::My_Application(int& argc, char ** argv) : QApplication(argc, argv)
{
    window_ = new Window;
    window_->setAttribute(Qt::WA_DeleteOnClose, false);
    window_->show();
}

My_Application::~My_Application()
{
    delete window_;
}

bool My_Application::notify(QObject * receiver, QEvent * event)
{
    try
    {
        return QApplication::notify(receiver, event);
    }
    catch(QString error_message)
    {
        window_->setEnabled(false);

        QMessageBox message_box;
        message_box.setWindowTitle("Error");
        message_box.setIcon(QMessageBox::Critical);
        message_box.setText("The program caught an unexpected error:");
        message_box.setInformativeText("What do you want to do? <br>");

        QPushButton *restart_button = message_box.addButton(tr("Restart"), QMessageBox::RejectRole);
        QPushButton *exit_button = message_box.addButton(tr("Exit"), QMessageBox::RejectRole);

        message_box.setDefaultButton(restart_button);

        message_box.exec();

        if ((QPushButton *) message_box.clickedButton() == exit_button)
        {
            exit();
        }
        else if ((QPushButton *) message_box.clickedButton() == restart_button)
        {
            restart();
        }

    }
    return false;
}

void My_Application::exit()
{
    window_->close();
    //delete window_;

    return;
}

void My_Application::restart()
{
    window_->close();
    //delete window_;

    window_ = new Window;
    window_->show();
    return;
} 
```

请注意，该行`window_->setAttribute(Qt::WA_DeleteOnClose, false);`意味着`window_`（我的主窗口）在关闭时不会被删除。

我上面写的代码有效，但据我了解，存在内存泄漏：我应该取消注释and`//delete window_;`中的行。但是当我这样做时，当我单击重新启动（或退出但谁在乎）时，程序会崩溃。`My_Application::exit()``My_Application::restart()`

（我不确定这是否有用，实际上它可能会产生误导，但这是我的调试器告诉我的：发生分段错误，`QWidgetPrivate::PaintOnScreen() const`其中由函数调用的函数调用...由函数调用`My_Application::notify()`）

当我做一些`std::cout`s 时，我注意到程序在崩溃之前运行了整个`restart()`函数，实际上是贯穿了整个函数。`notify()`

我不知道它为什么会崩溃。提前感谢您的见解！

**更新：**

1.  我注意到它`My_Application::notify()`经常被调用。例如，在错误对话框打开时调用了很多次，*在重新启动函数执行期间也是*如此。
2.  崩溃实际上发生在 subfunction 中`QApplication::notify(receiver, event)`。鉴于之前的评论，这并不奇怪（接收者可能已被删除）
3.  但是即使我在执行时禁止该函数`My_Application::notify()`做任何事情`restart()`，它仍然会崩溃（在调用`My_Application::notify()`了很多次之后，比如 15 次，这不是很奇怪）？

我应该如何进行？也许我应该说（使问题更相关）我的班级`My_Application`也有一个“恢复”功能，我没有在这里复制它以保持简短。如果我只有那个重启功能，我不会太费心，但我确实想要那个恢复功能。我还应该说，如果我保留带有“删除窗口_”注释的代码，问题不仅是内存泄漏，它有时仍然明显崩溃。肯定有办法解决这个问题！但我一无所知，我真的很感激一些帮助！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T08:26:10.870

使用`window_->deleteLater()`.

当事件队列中仍有事件时，您正在删除窗口；在上面的输出中，看起来像是在您删除它后尝试传递一个绘画命令。 将删除命令放入队列中，因此“正常”事件在删除*之前*`deleteLater()`传递。

 *同样为了澄清，所有事件都通过`QApplication::notify(..)`- 这就是为什么它被如此频繁地调用，以及为什么它是 Qt 中异常处理的中心点。*

# java - 对于课程：为我的课程设置概述和描述

> ID：12764852
> 
> 赞同：2
> 
> 时间：2012-10-06T23:41:55.223
> 
> 标签：java, eclipse, javadoc

当您在 Eclipse 中使用任何类或任何函数时，会有一个小对话框向您显示有关您选择的类或函数的一些信息。

我的问题是：我怎样才能为我的类和函数做同样的事情？我一直找不到有关如何执行此操作的任何信息。

**例子：**

*对于类: `ArrayList`:*

允许使用所有元素，包括`null`.

> 此类作为您的默认 List 实现是一个不错的选择。Vector 同步所有操作，但不一定以对您的应用程序有意义的方式同步：例如，同步每个对 get 的调用并不等同于同步列表并对其进行迭代（这可能是您想要的）。CopyOnWriteArrayList 旨在用于非常高并发、频繁遍历和非常罕见的突变的特殊情况。
> 
> **概括**

*对于功能`Log.d()`：：*

> public static int d (String tag, String msg, Throwable tr) 自：API 级别 1 发送 DEBUG 日志消息并记录异常。
> 
> **参数**tag 用于标识日志消息的来源。它通常标识发生日志调用的类或活动。 **msg** 您想要记录的消息。 **tr****记录** 异常

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T23:43:48.450

如果您将 Javadoc 注释添加到您的类、方法和变量中，Eclipse 应该像内置类一样为它们弹出本地帮助。[您可以在此处](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html)阅读有关如何为 Javadoc 工具编写文档的信息。**

# objective-c - 地址路径在 xcode 中的工作原理

> ID：12764858
> 
> 赞同：1
> 
> 时间：2012-10-06T23:43:03.787
> 
> 标签：objective-c, ios, xcode4

当我在项目中添加文件时，我想在 xcode 的 UIWebView 中加载 html5 页面，例如：“对于我的 html5：

我有 css 文件夹我有 javascript 文件我有图像，我的文件夹结构如下：

css/ javascript/ 图片/

当我在xcode中添加这些文件夹并运行程序时，xcode无法获取地址，它可以加载html页面但没有任何图片，javascript和css，因为它们在其他文件夹中，我知道，当我将所有文件放在一起而不是在单独的文件夹中一切正常，但我想在我的 xcode 中拥有真正的文件夹结构（我不想使用组）请你帮帮我

例如

在这里它的作品

```
 NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]pathForResource:@"about.html" ofType:nil]]; 
```

但是当我在一个文件夹中添加时

```
 NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]pathForResource:@"test/about.html" ofType:nil]]; 
```

它不起作用的链接，如何在 xcode 中解决此路径问题

当我运行 about.html 如果所有 css、javascript 和图像都位于 about 文件夹中时，一切都在 xcode 中工作

但是当我将它们放在单独的文件夹中时，无法加载 css / javascript 和图像

你能给我一些提示吗

提前致谢！

编辑 ：：

```
 NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]pathForResource:@"page1.html" ofType:nil]];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[webView loadRequest:request]; 
```

我想使用类似这个文件夹的东西：test/

```
[NSBundle mainBundle]pathForResource:@"test/page1.html" ofType:nil]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:49:15.720

您需要将`UIWebView`实例的 baseURL 设置为主包中包含内容的目录的 URL，并且来自 html 的链接需要是相对的。

下面的代码是一种基本方式，因为我的内容位于主包的根目录中。

```
//find my html file
NSString *htmlFilePath = [[NSBundle mainBundle] pathForResource:@"htmlfile-to-load" ofType:@"html"];
//load it into an NSData
NSData *htmlData = [NSData dataWithContentsOfFile:htmlFilePath];
//get the URL of the bundles resource directory
NSURL *baseURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] resourcePath] isDirectory:YES];
//load tableView
[self.webView loadData:htmlData MIMEType:@"text/html" textEncodingName:@"UTF-8" baseURL:baseURL]; 
```

您可能需要以不同的方式获取您的 baseURL，但这就是想法。

# javascript - Javascript排序问题

> ID：12764860
> 
> 赞同：0
> 
> 时间：2012-10-06T23:43:08.813
> 
> 标签：javascript, jquery, sorting

我正在使用表格行来显示记录的 livescores 应用程序。排序由 tr 类名完成，该类名的值由 dateTime+countryId+leagueId+matchId 创建，因此该类变为类似于 1349565600312117160466446000000000000000 （我在末尾添加一些零以使所有数字具有相同的长度）。

问题（有或没有零）是数字太大而无法用于使用javascript进行排序，所以我想知道是否有办法实现我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T23:44:44.253

如果所有数字的长度相同，那么您可以将它们排序为字符串。

请注意，如果您的字段长度不同（例如两位数与一位数的国家/地区 ID），您可能会遇到一些麻烦。在这种情况下，您可能希望在将所有值打包到类名中之前对其进行零填充，或者只是将这些值与一些非数字字符连接起来并对拆分数字数组进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T23:46:59.237

由于所有数字的长度相同，使用字符串排序技术。它将这个数字转换为字符，并根据 ASCII 值对它们进行排序。

```
$(function(){    
    var strings = [];
    strings.push(your_value); // your_value like 1349565600312117160466446000000000000000
    strings.sort();
}); 
```

将尽可能多的值插入字符串数组，然后`strings.sort()`对它们进行排序！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T23:51:01.697

你可以有2个功能：

1.  就像你提到的那样，将这个数字分成单独的项目
2.  一个重新创建它们。

在页面加载时，调用将遍历 DOM 中所有项目的函数，并填充一个数组，在那里进行排序，然后重新迭代数组以创建新的 DOM 顺序

# django - 除非它是指定值，否则如何按主机名重写请求？

> ID：12764861
> 
> 赞同：0
> 
> 时间：2012-10-06T23:43:16.673
> 
> 标签：django, apache, mod-rewrite, rewrite

我的应用程序将有一个常规域 - 比如说 example.com - 它将包含有关登录、注册等的信息。它还将动态托管许多其他域。[我的应用在http://example.com/site/foobar.com/](http://example.com/site/foobar.com/)为这些网页提供服务

因此，我需要将主机名不是 example.com 的所有请求重定向到 /site/[hostname]/

我正在用 Django 编写它并使用 Apache 托管。

如何设置重写规则来执行此操作？用户不得知道他们在 foobar.com 以外的任何其他站点，如果用户浏览到 foobar.com/something - URL 必须重写为 /site/foobar.com/something

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:04:21.280

我解决了：

```
RewriteCond %{HTTP_HOST} !^example\.com
RewriteRule ^/(.*) /site/%{HTTP_HOST}/$1 [PT] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T03:33:39.737

[“具有 mod_rewrite 的动态海量虚拟主机”](http://httpd.apache.org/docs/2.2/rewrite/vhosts.html)涵盖了这一点。您可能希望跳过访问 example.com 的部分，而是坚持使用本地文件系统。

# c++ - boost::apply_visitor 不是 [some] 类的成员

> ID：12764868
> 
> 赞同：1
> 
> 时间：2012-10-06T23:46:53.653
> 
> 标签：c++, boost, operator-overloading, visitor-pattern, boost-variant

我有一个 ShapeType，Point，有一些坐标，(1,2)，我想在重载运算符 () 中使用 apply_visitor 将坐标 (3,4) 添加到我的 Point，因此 Point 最终成为(4,6)。我的实施在哪里失败？我认为我的 ShapeVisitor 类是正确的，但我收到一个错误，“apply_visitor”不是 CLARK::Point 的成员。

代码如下。

```
#include "Point_H.hpp"
#include "Shape_H.hpp"
#include "boost/variant.hpp"

typedef boost::variant<Point,Line,Circle> ShapeType;

ShapeType ShapeVariant(){...}

class ShapeVisitor : public boost::static_visitor<> 
{
private:
    double m_dx; // point x coord
    double m_dy; // point y coord

public:    
    ShapeVisitor(double m_dx, double m_dy);
    ~ShapeVisitor();

    // visit a point
    void operator () (Point& p) const
    {
        p.X(p.X() + m_dx);
        p.Y(p.Y() + m_dy);
    }
};

int main()
{   
    using boost::variant;

    ShapeType myShape = ShapeVariant(); // select a Point shape

    Point myPoint(1,2);

    boost::get<Point>(myShape) = myPoint; // assign the point to myShape

    boost::apply_visitor(ShapeVisitor(3,4), myPoint); // trying to add (3,4) to myShape

    cout << myPoint << endl;

    return 0;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T23:50:17.053

1.  您缺少包含（*编辑*：似乎不再需要）

    ```
    #include "boost/variant/static_visitor.hpp" 
    ```

2.  也代替

    ```
    boost::get<Point>(myShape) = myPoint; 
    ```

    你只想做

    ```
    myShape = myPoint; 
    ```

    否则，如果变体实际上还没有包含 a `Point`，您将收到`boost::bad_get`异常

3.  最后

    ```
    boost::apply_visitor(ShapeVisitor(3,4), myPoint); 
    ```

    本来应该

    ```
    boost::apply_visitor(ShapeVisitor(3,4), myShape); 
    ```

A simple self-contained example that shows all these points would look like this: (See it live on **[http://liveworkspace.org/code/33322decb5e6aa2448ad0359c3905e9d](http://liveworkspace.org/code/33322decb5e6aa2448ad0359c3905e9d)**)

```
#include "boost/variant.hpp"
#include "boost/variant/static_visitor.hpp"

struct Point { int X,Y; };

typedef boost::variant<int,Point> ShapeType;

class ShapeVisitor : public boost::static_visitor<> 
{
private:
    double m_dx; // point x coord
    double m_dy; // point y coord

public:    
    ShapeVisitor(double m_dx, double m_dy) : m_dx(m_dx), m_dy(m_dy) { }

    void operator () (int& p) const { }

    // visit a point
    void operator () (Point& p) const
    {
        p.X += m_dx;
        p.Y += m_dy;
    }
};

int main()
{   
    Point myPoint{ 1,2 };

    ShapeType myShape(myPoint);
    boost::apply_visitor(ShapeVisitor(3,4), myShape);

    myPoint = boost::get<Point>(myShape);
    std::cout << myPoint.X << ", " << myPoint.Y << std::endl;
} 
```

Output:

```
4, 6 
```

# webos - 我用 Ripple 测试 webOS 应用程序并得到“PalmServiceBridge is not defined when”

> ID：12764870
> 
> 赞同：0
> 
> 时间：2012-10-06T23:47:23.217
> 
> 标签：webos, ripple

`Ripple`我用for测试应用程序`webOS`，我得到：

```
Uncaught ReferenceError: PalmServiceBridge is not defined 
```

![在此处输入图像描述](../Images/fd9cbb57834c677bd0222e739b9a2997.png)

这是一个`Ripple`错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T01:32:29.110

我会说这是Ripple的一个错误。如果要模拟 webOS 设备，则需要为 PalmServiceBridge 提供 shim。我对 Ripple 不是很熟悉，所以我不确定它应该如何发挥它的魔力。

# wpf - WPF复制按钮问题

> ID：12764875
> 
> 赞同：0
> 
> 时间：2012-10-06T23:48:05.867
> 
> 标签：wpf, copy-paste, commandbinding

我的应用程序中有复制粘贴按钮。最初必须禁用两个按钮，如果我从任何文本框中选择任何文本，则只需启用复制按钮。一旦我复制了一些东西，就需要启用粘贴按钮。我在 App.xaml.cs 文件中使用此代码：

我的问题是，我怎么知道我什么时候必须启用这个按钮，如果我选择了任何文本，如何在 CanCmdCopy 函数中找到？

```
 #region CopyCommand
    private void CmdCopy(object sender, ExecutedRoutedEventArgs args)
    {
        // code///
    }
    private void CanCmdCopy(object sender, CanExecuteRoutedEventArgs args)
    {
        args.CanExecute = ?????
    }
    #endregion 
```

谢谢

迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T01:40:04.640

您应该使用默认的[ApplicationCommands](http://msdn.microsoft.com/en-us/library/system.windows.input.applicationcommands.aspx)，它们将具有您正在寻找的行为。如果您使用 a`ToolBar`它将工作而无需执行任何其他操作，否则您将不得不使用[FocusManager.IsFocusScope](http://msdn.microsoft.com/en-us/library/system.windows.input.focusmanager.isfocusscope.aspx)属性或直接绑定`CommandTarget`。请注意，如果剪贴板中有任何内容，则粘贴按钮将被启用。您可以使用`ClipBoard.Clear`方法来重置剪贴板。

IE：

**示例 1**

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
  <StackPanel >
    <ToolBar>
        <Button  Command="ApplicationCommands.Copy">Copy</Button>
        <Button Command="ApplicationCommands.Paste">Paste</Button>
    </ToolBar>
    <TextBox BorderBrush="Black" BorderThickness="2" Margin="5" TextWrapping="Wrap" />
    <TextBox BorderBrush="Black" BorderThickness="2" Margin="5" TextWrapping="Wrap" />

  </StackPanel >

</Window> 
```

**示例 2**

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
  <StackPanel >
      <TextBox BorderBrush="Black" BorderThickness="2" Margin="5" TextWrapping="Wrap" />
      <TextBox BorderBrush="Black" BorderThickness="2" Margin="5" TextWrapping="Wrap" />
      <Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch" FocusManager.IsFocusScope="True" >
          <Grid.ColumnDefinitions>
              <ColumnDefinition Width="*"/>
              <ColumnDefinition Width="*"/>
          </Grid.ColumnDefinitions>
          <Button Grid.Column="0" Height="50" Command="ApplicationCommands.Copy" >Copy</Button>
          <Button Grid.Column="1" Height="50" Command="ApplicationCommands.Paste">Paste</Button>
      </Grid >
  </StackPanel >
</Window> 
```

# ruby - 多键哈希中的最大键

> ID：12764883
> 
> 赞同：0
> 
> 时间：2012-10-06T23:49:50.463
> 
> 标签：ruby, hashtable

这是我的哈希：

```
 h_letters = {
    first: {
      value: 2,
      text: "H"
    },
    second: {
      value: 2,
      text: "HH"
    },
    third: {
      value: 4,
      text: "HHH"
    }
  } 
```

我想获得整个哈希值的最大值的文本。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T00:02:24.437

```
h_letters.max_by { |h| h.last[:value] }.last[:text] #=> "HHH" 
```

# kdb - kdb 功能不工作

> ID：12764885
> 
> 赞同：3
> 
> 时间：2012-10-06T23:50:15.440
> 
> 标签：kdb

我对此感到困惑：请看下面。为什么第 (1) 行和 (2) 行会产生不同的结果？谢谢你的帮助。

```
 q)trade
    date       open  high  low   close volume   sym
    ------------------------------------------------
    2006.10.03 24.5  24.51 23.79 24.13 19087300 AMD
    2006.10.03 27.37 27.48 27.21 27.37 39386200 MSFT
    2006.10.03 24.1  25.1  23.95 25.03 17869600 AMD
    2006.10.03 27.39 27.96 27.37 27.94 82191200 MSFT
    2006.10.03 24.8  25.24 24.6  25.11 17304500 AMD
    2006.10.03 27.92 28.11 27.78 27.92 81967200 MSFT
    2006.10.03 24.66 24.8  23.96 24.01 17299800 AMD
    2006.10.03 27.76 28    27.65 27.87 36452200 MSFT
    q)extr
    {[t;c;r] select from t where (`$1#'string c) within r}
    q)
    q)
    q)extr[trade;sym;`K`Z]                                     / (1)
    date       open  high  low   close volume   sym
    ------------------------------------------------
    2006.10.03 27.37 27.48 27.21 27.37 39386200 MSFT
    q)
    q)
    q)select from trade where (`$1#'string sym) within `K`Z     /(2)
    date       open  high  low   close volume   sym
    ------------------------------------------------
    2006.10.03 27.37 27.48 27.21 27.37 39386200 MSFT
    2006.10.03 27.39 27.96 27.37 27.94 82191200 MSFT
    2006.10.03 27.92 28.11 27.78 27.92 81967200 MSFT
    2006.10.03 27.76 28    27.65 27.87 36452200 MSFT 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T15:21:21.633

第一个将变量传递`sym`给函数`extr`。此变量**不是**表中的列`trade`；它是一个单独的（全局）变量。

这个变量的值`sym`可能只是

```
`AMD`MSFT 
```

所以表达式

```
(`$1#'string c) within r 
```

产生布尔数组

```
01 
```

而不是你想要的

```
 01010101 
```

这反过来意味着`where`您的`select`语句部分会生成一个具有值的索引数组

```
 1 
```

代替

```
 1 3 5 7 
```

这样就返回了表的一行，而不是您期望的四行。

# c# - 设置网站以使用 fullcalendar

> ID：12764887
> 
> 赞同：0
> 
> 时间：2012-10-06T23:50:35.317
> 
> 标签：c#, javascript, jquery, asp.net, fullcalendar

我正在尝试设置带有日历的页面，我的问题是我不确定如何组织包含内容，以免出现错误，这是我的`<head>`

```
<head runat="server">
    <title></title>
    <link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />
    <link href="fullcalendar/fullcalendar.css" rel="stylesheet" type="text/css" />
    <script src="jquery/jquery-1.8.1.min.js" type="text/javascript"></script>
    <script src="fullcalendar/fullcalendar.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {

            // page is now ready, initialize the calendar...

            $('#calendar').fullCalendar({
                // put your options and callbacks here
            })

        });
    </script>
    <asp:ContentPlaceHolder ID="HeadContent" runat="server">
    </asp:ContentPlaceHolder>
</head> 
```

当我的页面启动时，我收到一条错误消息，`Microsoft JScript runtime error: '$' is undefined`它以黄色突出显示整个 jquery（它是一个带有错误的弹出窗口）。我能做些什么来避免错误？，我正在注册 jquery，如您所见，所以不确定为什么会出现该错误。

谢谢你，我非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T00:23:50.613

代码似乎没问题。唯一的问题我认为您对 jquery 库的引用不正确。查看源代码并单击包含行的 jquery 库以测试路径是否正常。将这些 php 文件保存`jquery-1.8.1.min.js`在同一文件夹中，或使用任何 CDN 库，如

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 
```

如果它不起作用，请使用`noConflict()`修复它：

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
   <script type="text/javascript">
        var temp = jQuery.noConflict();
        temp(document).ready(function () {

            // page is now ready, initialize the calendar...

            temp('#calendar').fullCalendar({
                // put your options and callbacks here
            })

        });
    </script> 
```

希望能帮助到你 ！！

# algorithm - 将一组整数中的哪些整数进行异或以生成目标整数？

> ID：12764888
> 
> 赞同：2
> 
> 时间：2012-10-06T23:50:35.433
> 
> 标签：algorithm, xor

给出的是：

*   一组大约 800 个伪随机无符号 64 位整数。

    ```
    2910088619203924111,  8611579852607706360,  10743563285097812384,
    6712886796489718596, 17298387234720051377,  12467698534877227789,
    3782074590599432740,  1419307814092336225,   7951308495700413025,
    ...
    ```

*   同一类型的目标整数`17358988457627394926`，在大多数情况下不在集合中。

保证目标整数是通过对集合中最多 50 个（或更少）整数的子集进行异或运算得到的。

什么是最有效的算法来找到一个整数子集（任何，不一定是最小的）在异或时成为目标整数的整数？

如果 NP 难，证明它的基本思想是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T00:09:09.307

工作在 Z [2]上，问题等价于求解矩阵方程`Ax = b`，其中`A`是 64x800 二进制矩阵，是对每个元素进行二进制展开，`b`是表示解的 64 元素二进制矩阵。

使用简单的高斯消元法很容易解决这样的系统。

# c# - 使用 ModelMetadata 获取完整的属性名称

> ID：12764890
> 
> 赞同：14
> 
> 时间：2012-10-06T23:50:42.723
> 
> 标签：c#, asp.net-mvc

我正在尝试创建一个 HtmlHelper 来创建与 Bootstrap 兼容的表单字段。我的第一个目标是创建一个 HtmlHelper 来创建周围的 div：

```
<div class="control-group"> ... </div> 
```

遵循这里和这里的优秀建议，我设法让它相对快速地工作。但它并不总是有效。

我有一个具有复杂属性的 ViewModel，所以在我的表单中我访问了 field `m=>m.Complex.Element`。在我的助手中，我检查元素是否存在验证错误。我用`ModelMetadata.FromLambdaExpression(expression, html.ViewData)`. 我得到的元数据有属性名称`Element`，而不是`Complex.Element`。

当我检查该属性的 ModelState 时，我找不到它，因为 ModelState 保留全名 - `Complex.Element`。

我可以寻找部分匹配，希望没有其他元素，但这似乎是一个等待发生的讨厌的错误。如何从表达式中获取完整的属性名称？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-07T06:12:33.123

MVC 源是公开的，这是一件好事。获取 ModelState 属性名称的正确方法是使用

```
var propertyName = ExpressionHelper.GetExpressionText(expression); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-07T00:19:50.773

我之前使用以下内容为当前模型获取它，但您可能必须将属性名称附加到此属性才能为该属性获取它。

```
ViewContext.ViewData.TemplateInfo.HtmlFieldPrefix; 
```

否则，拉出反射器/ilspy/whatever 并检查您的 EditorFor/TextBoxFor 或呈现您的编辑器的任何方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-12T11:42:52.963

对于我需要的属性，我使用了这两个答案的组合。这两个答案共同提供了一个我可以在视图和嵌套编辑器模板中使用的工作属性。这是我的例子：

```
public static MvcHtmlString HasErrorClassFor<TModel, TProperty>(
    this HtmlHelper<TModel> htmlHelper,
    Expression<Func<TModel, TProperty>> expression)
{
    string expressionText = ExpressionHelper.GetExpressionText(expression);

    string htmlFieldPrefix = htmlHelper.ViewData.TemplateInfo.HtmlFieldPrefix;

    string fullyQualifiedName;

    if (htmlFieldPrefix.Length > 0)
    {
        fullyQualifiedName = string.Join(".", htmlFieldPrefix, expressionText);
    }
    else
    {
        fullyQualifiedName = expressionText;
    }

    bool isValid = htmlHelper.ViewData.ModelState.IsValidField(fullyQualifiedName);

    if (!isValid)
    {
        return MvcHtmlString.Create("has-error");
    }

    return MvcHtmlString.Empty;
} 
```

# .htaccess - 如何通过 .htaccess 强制重定向到某个目录

> ID：12764891
> 
> 赞同：0
> 
> 时间：2012-10-06T23:50:42.917
> 
> 标签：.htaccess

我在运行 WordPress 的服务器上。WP 安装在 Document Root 中，下面的 .htaccess 文件控制着每个请求。

我需要做的是在文档根目录下有一个特定的目录，我们称之为“绕过”，自行解决而不是通过 WordPress 运行。

那可能吗？.htaccess 指令可能会是什么样子来实现这一点？

感谢您帮助我解决这个需求。

```
RewriteEngine on
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ems /ems/index.php [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:59:14.487

如果您在 Document Root 中有一个目录，并且在 WordPress 中没有任何同名的页面/帖子，那么您不需要任何 .htaccess 规则。

确保您没有任何页面或通过相同的永久链接发布，只有这样它才能在没有任何 .htaccess 规则的情况下工作。

# mysql - 如何对子查询使用删除语句 - 错误 1093？

> ID：12764893
> 
> 赞同：0
> 
> 时间：2012-10-06T23:51:04.990
> 
> 标签：mysql

此查询准确返回我需要删除的办公室元组。

```
 SELECT id, reference FROM office o 
WHERE o.id NOT IN 
    (SELECT c.office_id FROM Contract c  WHERE office_id IS NOT NULL)
AND o.reference IN 
    (SELECT o.reference FROM Contract c JOIN office o ON c.office_id = o.id  WHERE office_id IS NOT NULL); 
```

但是当我写查询

```
 DELETE FROM office 
WHERE id NOT IN 
    (SELECT c.office_id FROM Contract c  WHERE office_id IS NOT NULL)
AND reference IN 
    (SELECT o.reference FROM Contract c JOIN office o ON c.office_id = o.id  WHERE office_id IS NOT NULL); 
```

我有以下错误：`#1093 - You can't specify target table 'office' for update in FROM clause`

但我真的不知道如何解决这个问题..

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:54:02.790

尝试

```
 DELETE FROM office 
 WHERE id NOT IN 
(SELECT c.office_id FROM Contract c
 WHERE office_id IS NOT NULL)
 AND reference IN 
(select * from (SELECT o.reference FROM Contract c 
 JOIN office o ON c.office_id = o.id 
 WHERE office_id   IS NOT NULL) x); 
```

因为您无法从您选择的表中删除。但是使用

```
select * from (select col from your_table) x 
```

应该做的伎俩

# c# - 如何在自定义验证器中设置通用方法

> ID：12764898
> 
> 赞同：1
> 
> 时间：2012-10-06T23:52:08.687
> 
> 标签：c#, validation, properties, customvalidator

`Custom Validator`我为我的`Response`财产创建了一个。这是代码

```
public partial class MultipleSelectionQuestion<T> : Question
{
    private ICollection<T> _response;

    public int? MaxSelections
    {
        get { return ((MultipleSelectionQuestionTemplate<T>)this.QuestionTemplate).MaxSelections; }
    }

    public ICollection<T> Range
    {
        get { return ((MultipleSelectionQuestionTemplate<T>)this.QuestionTemplate).Range; }
    }

    [CustomValidation(typeof(CommonValidation), "ValidationMultipleSelectionResponseChoices")]
    [Required]
    public ICollection<T> Response
    {
        get { return _response; }
        set {  SetProperty(ref _response, value, "Response"); }
    }
} 
```

这是我的`CommonValidation`静态类，我意识到`Response`属性找不到方法。问题是通用的。

```
public static class CommonValidation
{
    public static ValidationResult ValidationMultipleSelectionResponseChoices<T>(IEnumerable<T> value, ValidationContext context)
    {
        var question = (MultipleSelectionQuestion<T>)context.ObjectInstance;
        if (value != null)
        {
            var maxSelections = question.MaxSelections;

            if (maxSelections.HasValue)
            {
                if (value.Count() > maxSelections.Value)
                {
                    return new ValidationResult(
                        string.Format(
                            CultureInfo.CurrentCulture,
                            "Response must have at most {0} selections",
                            maxSelections.Value),
                        new[] { context.MemberName });
                }
            }
        }

        return ValidationResult.Success;
    }
} 
```

# haskell - 类型类中的参数变量

> ID：12764899
> 
> 赞同：3
> 
> 时间：2012-10-06T23:52:13.803
> 
> 标签：haskell

我在一个类型类中有一个参数变量，我想表示任何数字类型（`Float`,`Integer`等`Double`）。

我如何在类型和实例中声明它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T23:55:52.973

如果你的意思是类本身的类型参数，你可以在类定义的上下文中添加一个约束：

```
class (Num a) => Foo a where
    -- stuff 
```

另一方面，如果它是函数类型中的参数而不是类参数，那么您可以以通常的方式添加约束：

```
class Foo a where
    foo :: (Num b) => a -> b -> b 
```

如果您只想将其限制为某些特定类型，那实际上是不可能的——类型类是“开放的”，即您始终可以添加实例。您能做的最好的事情是拥有自己的类（`FooNumbers`或此类），只编写您想要的实例，然后要求它而不是`Num`. 但这通常没有帮助。

# c# - 如何强制异步 Web 服务调用充当同步？

> ID：12764905
> 
> 赞同：1
> 
> 时间：2012-10-06T23:53:32.237
> 
> 标签：c#, silverlight, asmx

我遇到的问题是一些 asmx Web 服务已被移植到 Silverlight 应用程序。问题是silverlight 上的asmx 服务只允许异步方法调用。在大多数情况下，这是可以接受的，但有一种情况我真的不想要它。

在每个网络调用块的开始，都会调用一个全局函数 CheckTimeout。这样做是调用 web 方法来查看用户的登录令牌是否已过期，如果已过期，则表示用户已超时并请重新登录。问题是我希望 CheckTimeout 在返回之前完全完成调用方法在执行各种操作之前就知道您仍处于登录状态。

我尝试在 CheckTimeout 中使用 EventWaitHandler，从服务器接收异步结果的方法会发出信号，但我想这里实际上只有一个线程在工作，因为如果我这样做，甚至不会向 Web 服务器发出请求。关于如何做我想做的事有什么想法吗？

```
private static EventWaitHandle wait_for_check_login = new AutoResetEvent(false);

    private static bool check_timeout_result = false;

    public static void CheckTimeout()
    {
        rji_ws.CheckLoginAsync(login_key);

        wait_for_check_login.WaitOne();

        if (check_timeout_result)
            {
                check_timeout_result = false;
                return;
            }
            else
            {
                MessageBox.Show("You've timed out after a period of inactivity. Please log in again");
                login_key = Guid.Empty;
                System.Windows.Browser.HtmlPage.Document.Submit();
            }

    }

    private static void CheckTimeoutResults(object sender, RJI_WS.CheckLoginCompletedEventArgs e)
    {
        if (e.Error != null)
        {
            //MessageBox.Show("There was an error communicating with the server
            wait_for_check_login.Set();
        }
        else
        {
            check_timeout_result = e.Result;
            wait_for_check_login.Set();

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T01:01:36.473

如果调用没有发送到服务器，问题可能是您错过了 CheckLoginAsync 代码中的某些内容（您没有发布它）。

在任何情况下，以这种方式编写代码都会阻塞主 UI 线程。您最好按以下方式安排代码：

```
/// Usage:
///   CheckLoginThen((bool result) => { CallWebServices(); });
void CheckLoginThen(Action<bool> a) 
{
  rji_ws.CheckLoginAsync(login_key,
    (sender, e) => 
    {
      if (e.Error != null)
      {
        MessageBox.Show("There was an error communicating with the server");
      }
      else
      {
        var result = e.Result;
        a(result);
      }
    }, 
    null);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T09:37:53.977

将代码放入一个单独的方法中（如果它不在一个方法中）并从处理程序中调用它以完成 checklogin 服务。

# scala - Scala Parser Combinators：高效解析 C 风格的注释

> ID：12764910
> 
> 赞同：5
> 
> 时间：2012-10-06T23:54:07.103
> 
> 标签：scala, parser-combinators

`/* ... */`使用 Scala 解析器组合器（有效地）解析 C 风格的多行注释（即 ）的最佳方法是什么？

在我参与的一个项目中，我们解析了一种类似 C 的编程语言，并希望支持多行注释。我们使用 的子类[`StandardTokenParsers`](http://www.scala-lang.org/api/current/scala/util/parsing/combinator/syntactical/StandardTokenParsers.html)，它已经处理了此类注释（通过[`StdLexical`](http://www.scala-lang.org/api/current/scala/util/parsing/combinator/lexical/StdLexical.html)。但是，该类仅适用于相当短的多行注释，否则会耗尽堆栈空间。

我们还尝试提供我们自己的空白定义以提高效率。我们使用了一个`RegexParser`（灵感来自[StackOverflow 上的另一个问题](https://stackoverflow.com/questions/5952720/ignoring-c-style-comments-in-a-scala-combinator-parser)），如下所示：

```
class Parser extends StandardTokenParsers {

  override val lexical = new StdLexical {
    def rp: RegexParsers = new RegexParsers {}
    override val whitespace: Parser[Any] = rp.regex("""(\s|//.*|(?m)/\*(\*(?!/)|[^*])*\*/)*""".r).asInstanceOf[Parser[Any]]
  }

  // ...

} 
```

这稍微改善了这种情况，但如果注释超过几十行，仍然会导致堆栈溢出。任何想法如何改善这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T03:44:26.007

通过使用解析器而不是使用正则表达式定义空格跳过，我们在此类问题上取得了一些成功。请参阅我们的 Kiama [ParserUtilities.scala](https://code.google.com/p/kiama/source/browse/src/org/kiama/util/ParserUtilities.scala#278)中的 WhitespaceParser 特征以获取一些支持代码。

大部分的麻烦是覆盖正常的正则表达式空白处理并将新解析器绑定到文字和正则表达式组合器（我们通常不使用标记解析器）。请参阅[我们的示例之一](https://code.google.com/p/kiama/source/browse/src/org/kiama/example/oberon0/base/Parser.scala#71)以了解用法，在本例中用于处理嵌套注释。

# php - sql结果中的重复信息

> ID：12764914
> 
> 赞同：0
> 
> 时间：2012-10-06T23:55:29.880
> 
> 标签：php, mysql

我在这里查看了大约 18 个其他帖子，大多数人都在问如何删除记录而不仅仅是隐藏它们。所以我的问题是：我有一个数据库，其中包含与位置相关的工作人员。许多工作人员与多个地点相关联。我想要做的是只显示 mysql 结果中列出的第一个位置并跳过其他位置。我有将表链接在一起的 sql 查询，除了它为那些在其他位置的工作人员多次显示相同的信息之外，它还可以工作，所以示例如下：

![在此处输入图像描述](../Images/5b46d1d29263b6dcb3541dc79f41b20f.png)

这是我目前的sql语句

```
 SELECT staff_tbl.staffID, staff_tbl.firstName, staff_tbl.middleInitial, staff_tbl.lastName,
     location_tbl.locationID, location_tbl.staffID, 
    officelocations_tbl.locationID, officelocations_tbl.officeName, staff_title_tbl.title_ID,
     staff_title_tbl.staff_ID, titles_tbl.titleID, titles_tbl.titleName

    FROM staff_tbl 

    INNER JOIN location_tbl ON location_tbl.staffID = staff_tbl.staffID 
    INNER JOIN officelocations_tbl ON location_tbl.locationID = officelocations_tbl.locationID
    INNER JOIN staff_title_tbl ON staff_title_tbl.staff_ID = staff_tbl.staffID 
    INNER JOIN titles_tbl ON staff_title_tbl.title_ID = titles_tbl.titleID 
```

我的 php 是

```
 <?php do { ?>
<tr>
  <td><?php echo $row_rs_Staff_Info['firstName']; ?>&nbsp; <?php echo $row_rs_Staff_Info['lastName']; ?></td>
  <td><?php echo $row_rs_Staff_Info['titleName']; ?>&nbsp; </td>
  <td><?php echo $row_rs_Staff_Info['officeName']; ?>&nbsp; </td>

</tr>
<?php } while ($row_mysqlResult = mysql_fetch_assoc($rs_mysqlResult)); ?> 
```

我想知道的是有没有一种方法使用 php 只选择为每个人列出的第一个条目并显示它，然后跳过其他两个。我在想这可以通过可能将staffID添加到一个数组中来完成，如果他们在那里跳过staff_title_tbl中列出的下一个但不太确定如何写它。任何帮助都会非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T00:06:22.583

你可以使用mysql的DISTINCT，像这样：

```
SELECT DISTINCT(staff_tbl.staffID), staff_tbl.firstName, staff_tbl.middleInitial (.. etc) 
```

我希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T00:03:30.883

您可以在 上使用子查询来`location_tbl`为每个员工选择一个位置

```
SELECT staff_tbl.staffID, 
  staff_tbl.firstName, 
  staff_tbl.middleInitial, 
  staff_tbl.lastName,
  location_tbl.locationID, 
  location_tbl.staffID, 
  officelocations_tbl.locationID, 
  officelocations_tbl.officeName, 
  staff_title_tbl.title_ID,
  staff_title_tbl.staff_ID, 
  titles_tbl.titleID, 
  titles_tbl.titleName
FROM staff_tbl 
INNER JOIN
(
  select max(locationID) locationID, staffID
  from location_tbl 
  group by staffID
) location_tbl 
  ON location_tbl.staffID = staff_tbl.staffID 
INNER JOIN officelocations_tbl 
  ON location_tbl.locationID = officelocations_tbl.locationID
INNER JOIN staff_title_tbl 
  ON staff_title_tbl.staff_ID = staff_tbl.staffID 
INNER JOIN titles_tbl 
  ON staff_title_tbl.title_ID = titles_tbl.titleID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T03:35:49.620

除了使用 DISTINCT(staffID) 来限制重复的员工列表之外，您的查询还可以使用一些额外的清理：

1) 使用表别名，这样您就不必为每列引用整个表名

2）您的 SELECT 列列表中有冗余数据：

location_tbl。**locationID** == officelocations_tbl。**位置ID**

职员表。**员工 ID** == location_tbl。**职员 ID == 职员_title_tbl**。**员工编号**

staff_title_tbl。**标题_ID** == 标题_tbl。**标题ID**

仅仅因为您在连接中使用列并不意味着您必须在 SELECT 语句中引用该列。如果这些列确实具有不同的值，那么您将很难在连接语句中配对 2 列。

3）不一致：你真的应该重命名staff_title_tbl。**staff_ID**只是 staffID 和 staff_title_tbl。**title_ID**到 titleID 以便它们匹配另一个表的列名。请注意，在下面的清理查询中，我们如何在列名匹配的人员 ID 和 locationID 上使用 USING()，但在不匹配时必须写入更长的 ON。使您的名称保持一致，以便在您的程序中您不必回头查看表格来查看您命名某物的方式。

4) 虽然为了清楚起见，您可能希望写出 INNER JOIN，但如果您愿意，可以只使用 JOIN，因为如果没有列出其他特定类型的连接，这是默认的 JOIN 类型。

```
SELECT  DISTINCT(s.staffID)
        ,s.firstName
        ,s.middleInitial
        ,s.lastName
        ,l.locationID
        ,ol.officeName
        ,st.title_ID
        ,t.titleName
FROM    staff_tbl           AS s
JOIN    location_tbl        AS l
USING   (staffID)
JOIN    officelocations_tbl AS ol
USING   (locationID)
JOIN    staff_title_tbl     AS st
ON      st.staff_ID = s.staffID 
JOIN    titles_tbl          AS t
ON      st.title_ID = t.titleID 
```

另外为了您的信息，一种在 PHP 中使用您对多行的原始查询执行此操作的方法，但我很惊讶原始 PHP 工作，因为您在一个地方有一个名为 $row_rs_Staff_Info 的查询行集和 $row_mysqlResult其他...

```
<?php 
$unique = array();
do {
    $key = $row_mysqlResult['firstName'].$row_mysqlResult['lastName'];

    //if ok being last location, newer values will overwrite old for same key
    $unique[$key] = $row_rs_Staff_Info;

    //OR

    //if must be first location, check for key & dont overwrite if already set
    if(!array_key_exists($key, $unique)){
        $unique[$key] = $row_mysqlResult;
    }
} while ($row_mysqlResult = mysql_fetch_assoc($rs_mysqlResult));

foreach($unique as $k => $v){?>
<tr>
  <td><?php echo $v['firstName']; ?>&nbsp; <?php echo $v['lastName']; ?></td>
  <td><?php echo $v['titleName']; ?>&nbsp; </td>
  <td><?php echo $v['officeName']; ?>&nbsp; </td>
</tr>
<?php } ?> 
```

php 数组键必须是唯一的，因此您可以添加应该进行唯一连接的值组合，如果相同的键值再次出现在结果中，它将用新值覆盖该键的现有值。但是，除非您还需要更大的数据集来存储页面上的其他内容并且您不想查询两次，否则请在 SQL 而不是 PHP 中进行优化，这样您就不会为不打算使用的数据浪费服务器资源。

**编辑**

我从您提供的小提琴链接中加载了 sql，并且 group by 确实消除了重复的 Alexander Walsh 行。

```
SELECT      s.staffID
            ,s.firstName
            ,s.middleInitial
            ,s.lastName
            ,l.locationID
            ,ol.officeName
            ,st.title_ID
            ,t.titleName
FROM        staff_tbl           AS s
JOIN        location_tbl        AS l
USING       (staffID)
JOIN        officelocations_tbl AS ol
USING       (locationID)
JOIN        staff_title_tbl     AS st
ON          st.staff_ID = s.staffID 
JOIN        titles_tbl          AS t
ON          st.title_ID = t.titleID
GROUP BY    (staffID) 
```

结果（针对表格宽度编辑了一些列）：

```
staffID firstName   lastName    officeName      titleName
1       Alexander   Walsh       Seattle         Consultant
2       Bernadette  Ace         Sacramento      Consultant
3       Bert        McElway     San Antonio     Associate Consultant
5       Peter       Wallace     San Francisco   Senior Consultant 
```

# java - 当我打开一个android软件时，为什么actionbar会显示一会儿？

> ID：12764919
> 
> 赞同：0
> 
> 时间：2012-10-06T23:55:54.533
> 
> 标签：java, android

```
public void onCreate(Bundle savedInstanceState) {   

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_login);
    ActionBar actionBar = getActionBar();
    actionBar.hide(); 
} 
```

我隐藏了actionbar，为什么actionBar仍然显示一段时间。

还有一个像这样的问题：我在代码中更改了actionBar的标题和副标题，如图所示。为什么actionBar的title stile显示我在AndroidMinefest文件中放了一会儿的字符串，然后改成我在java文件中编码的标题和副标题。actionBar可以在开始时显示标题和副标题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-14T05:54:04.753

正如 Nathan Villaescusa 所说，活动没有完全加载，所以 actionbar 会显示，然后执行`actionBar.hide()`，ActionBar 会显示很长时间，特别是如果设备是 3-4 岁。

至于如何防止这种情况，Activity Theme 总是可以`AndroidManifest.xml`在`<Activity>`entry中设置，`@android:style/Theme.Holo.Light.NoActionBar' theme. And remove`在 activity 中使用 actionBar.hide()`。

# c++ - 无法让 sigaction 工作

> ID：12764921
> 
> 赞同：-1
> 
> 时间：2012-10-06T23:56:04.190
> 
> 标签：c++, linux, sockets

我正在尝试创建两个程序：一个基本的套接字服务器和一个客户端，它们都将在 Linux 机器上运行。服务器的指令是设置套接字，接受传入的客户端请求，使用信号设置处理程序（用于读取数据缓冲区），然后进入无限睡眠循环。客户端的指令是建立一个套接字，连接到服务器，并发送一个数据缓冲区。在担心关闭连接并启动一个新连接之前，我希望按照对单个客户端连接的描述进行此操作（不确定这些东西应该在哪里循环，我正在努力保持这个简单。）我'我还了解到该信号已被弃用，因此我尝试按照此处的示例使用 sigaction：

[http://www.linuxprogrammingblog.com/code-examples/sigaction](http://www.linuxprogrammingblog.com/code-examples/sigaction)

不幸的是，当我运行我的代码时会发生以下情况：

1.  服务器启动
2.  服务器设置套接字
3.  服务器开始监听并阻塞接受（等待客户端）
4.  客户端启动
5.  客户端设置套接​​字
6.  客户端连接到服务器
7.  服务器解除阻塞
8.  服务器设置sigaction
9.  服务器开始休眠
10.  客户端调用 write
11.  客户端似乎写入成功（天知道在哪里）
12.  客户端阻塞等待来自服务器的字节读取确认
13.  服务器仍在休眠（从未触发过sigaction）

这是我当前的服务器代码：

```
#include <sys/types.h>    // socket, bind
#include <sys/socket.h>   // socket, bind, listen, inet_ntoa
#include <netinet/in.h>   // htonl, htons, inet_ntoa
#include <arpa/inet.h>    // inet_ntoa
#include <netdb.h>        // gethostbyname
#include <unistd.h>       // read, write, close
#include <string.h>       // bzero
#include <netinet/tcp.h>  // SO_REUSEADDR
#include <sys/uio.h>      // writev
#include <signal.h>       // sigaction
#include <sys/time.h>     // gettimeofday
#include <unistd.h>       // write
#include <fcntl.h>        // fcntl
#include <iostream>       // cout

using namespace std;
#define BUFSIZE 1500

// Globals
int nreps;
int nbufs;
int newSd;

// Read all the data from the client and output how long it took
void readFromClient(int sig, siginfo_t *siginfo, void *context)
{
    cout << "readFromClient triggered!" << endl;

    /*
    // Set up asynchronous communication
    int fd = siginfo->si_fd;
    fcntl(fd, F_SETOWN, getpid());
    fcntl(fd, F_SETFL, FASYNC);
    */

    // Declare data buffer
    char databuf[BUFSIZE];

    // Record start time
    struct timeval theTime;
    gettimeofday(&theTime, NULL);
    int startTime = theTime.tv_usec + theTime.tv_sec * 1000000;

    // Keep reading until the buffer is full
    int nRead = 0;
    /*
    while((nRead += read(newSd, databuf, BUFSIZE - nRead)) < BUFSIZE)
    {
        cout << "nRead now: " << nRead << endl;
    }
    */

    // For testing single byte read
    cout << "Reading a byte... " << endl;
    char bytebuf[1];
    read(newSd, bytebuf, 1);
    cout << "SUCCESS" << endl;

    // Record finish time
    gettimeofday(&theTime, NULL);
    int finishTime = theTime.tv_usec + theTime.tv_sec * 1000000;

    // Calculate the receiving time
    int receiveTime = finishTime - startTime;

    // Display the receiving time
    cout << "data-receiving time = " << receiveTime << " usec" << endl;

    // Tell the client how much data was read
    cout << "Writing amount read... " << endl;
    write(newSd, (void*)nRead, 4);
    cout << "SUCCESS" << endl;

    // Close the socket
    cout << "Closing socket... " << endl;
    close(newSd);
    cout << "SUCCESS" << endl;

    // Exit the program
    cout << "Exiting!" << endl;
    exit(0);
    cout << "Why are you still here?" << endl;
}

int main(int argc, char *argv[])
{
    cout << "Server is running!" << endl;

    // Store command line arguments
    int port = atoi(argv[1]);
    int nreps = atoi(argv[2]);
    int nbufs = atoi(argv[3]);
    cout << "port: " << port << endl;
    cout << "nreps: " << nreps << endl;
    cout << "nbufs: " << nbufs << endl;

    // Declare a socket
    sockaddr_in acceptSockAddr;
    memset((char*)&acceptSockAddr, '\0', sizeof(acceptSockAddr));
    acceptSockAddr.sin_family = AF_INET; // Address Family Internet
    acceptSockAddr.sin_addr.s_addr = htonl(INADDR_ANY);
    acceptSockAddr.sin_port = htons(port); // convert host byte-order

    // Open a stream-oriented socket
    int serverSd = socket(AF_INET, SOCK_STREAM, 0);

    // Signal OS to reuse this port once server closes
    const int on = 1;
    setsockopt(serverSd, SOL_SOCKET, SO_REUSEADDR, (char*)&on, sizeof(int));

    // Bind socket to local address
    bind(serverSd, (sockaddr*)&acceptSockAddr, sizeof(acceptSockAddr));

    // Instruct OS to listen for up to 5 clients
    listen(serverSd, 5);

    // Declare a new socket
    sockaddr_in newSockAddr;
    socklen_t newSockAddrSize = sizeof(newSockAddr);
    int newSd;

    // Set up signal handler for IO from client
    struct sigaction action;  
    memset(&action, '\0', sizeof(action));
    action.sa_sigaction = &readFromClient;
    action.sa_flags = SA_SIGINFO;
    //fcntl(newSd, F_SETSIG, SIGIO); // Fixes problem with si_fd
    if(sigaction(SIGIO, &action, NULL) < 0)
    {
        perror("sigaction");
        return 1;
    }

    // sleep forever
    cout << "Sleeping..." << endl;
    while(1)
    {
        cout << "Waiting for client... " << endl;
        newSd = accept(serverSd, (sockaddr*)&newSockAddr, &newSockAddrSize);
        cout << "SUCCESS" << endl;

        cout << "Switching to asynchronous communication... " << endl;
        fcntl(newSd, F_SETOWN, getpid());
        fcntl(newSd, F_SETFL, FASYNC);
        cout << "SUCCESS" << endl;

        cout << "Resuming sleep... " << endl;
        sleep(10);
    }
    return 0;
} 
```

这是我当前为客户提供的代码：

```
#include <sys/types.h>    // socket, bind
#include <sys/socket.h>   // socket, bind, listen, inet_ntoa
#include <netinet/in.h>   // htonl, htons, inet_ntoa
#include <arpa/inet.h>    // inet_ntoa
#include <netdb.h>        // gethostbyname
#include <unistd.h>       // read, write, close
#include <string.h>       // bzero
#include <netinet/tcp.h>  // SO_REUSEADDR
#include <sys/uio.h>      // writev
#include <signal.h>       // sigaction
#include <sys/time.h>     // gettimeofday
#include <unistd.h>       // write
#include <fcntl.h>        // fcntl
#include <iostream>       // cout

using namespace std;
#define BUFSIZE 1500
#define SIZEOFINT 4

int main(int argc, char *argv[])
{
    cout << "Client is running!" << endl;

    // Store commmand line arguments
    int server_port = atoi(argv[1]);
    int nreps = atoi(argv[2]);
    int nbufs = atoi(argv[3]);
    int bufsize = atoi(argv[4]);
    const char* server_name = argv[5];
    int testType = atoi(argv[6]);
    cout << "server_port: " << server_port << endl;
    cout << "nreps: " << nreps << endl;
    cout << "nbufs: " << nbufs << endl;
    cout << "bufsize: " << bufsize << endl;
    cout << "server_name: " << server_name << endl;
    cout << "testType: " << testType << endl;

    // Check to ensure proper buffer count/sizes
    if(nbufs * bufsize != BUFSIZE)
    {
        cout << "nbufs times bufsize must equal " << BUFSIZE << endl;
        exit(0);
    }

    if(testType < 1 || testType > 3)
    {
        cout << "test type must be 1, 2, or 3" << endl;
        exit(0);
    }

    // Create buffers
    char databuf[nbufs][bufsize];

    // Retrieve hostent structure
    struct hostent* host = gethostbyname(server_name);

    // Declare socket structure
    sockaddr_in sendSockAddr;
    memset((char*)&sendSockAddr, '\0', sizeof(sendSockAddr));
    sendSockAddr.sin_family = AF_INET; // Address Family Internet
    sendSockAddr.sin_addr.s_addr = inet_addr(inet_ntoa(*(struct in_addr*)*host->h_addr_list));
    sendSockAddr.sin_port = htons(server_port);  // convert host byte-order

    // Open stream-oriented socket
    int clientSd = socket(AF_INET, SOCK_STREAM, 0);

    // Connect socket to server
    cout << "Connecting socket to server... " << endl;
    int code = connect(clientSd, (sockaddr*)&sendSockAddr, sizeof(sendSockAddr));
    cout << "Connection result: " << code << endl;

    // Record start time
    struct timeval theTime;
    gettimeofday(&theTime, NULL);
    int startTime = theTime.tv_usec + theTime.tv_sec * 1000000;

    // Conduct tests
    for(int i = 0; i < nreps; i++)
    {
        switch(testType)
        {
            case 1:
            {
                // Multiple write test
                cout << "Running multiple write test" << endl;
                for(int j = 0; j < nbufs; j++)
                {
                    cout << "Writing buffer " << j << "... " << endl;
                    write(clientSd, databuf[j], bufsize);
                    cout << "SUCCESS" << endl;
                }
                cout << "Finished multiple write test" << endl;
            }
            case 2:
            {
                // Vector write test
                cout << "Running vector write test" << endl;
                struct iovec vector[nbufs];
                for(int j = 0; j < nbufs; j++)
                {
                    vector[j].iov_base = databuf[j];
                    vector[j].iov_len = bufsize;
                }
                cout << "Writing vector... " << endl;
                writev(clientSd, vector, nbufs);
                cout << "SUCCESS" << endl;
                cout << "Finished vector write test" << endl;
            }
            case 3:
            {
                // Single write test
                cout << "Running single write test" << endl;

                /*
                cout << "Writing... ";
                write(clientSd, databuf, nbufs * bufsize);
                cout << "SUCCESS" << endl;
                */

                // For testing single byte write
                cout << "writing a byte..." << endl;
                char singleByte[1];
                write(clientSd, singleByte, 1);
                cout << "wrote a byte!" << endl;

                cout << "Finished single write test" << endl;
            }
        }
    }

    // Record finish time
    gettimeofday(&theTime, NULL);
    int finishTime = theTime.tv_usec + theTime.tv_sec * 1000000;

    // Calculate the sending time
    int sendTime = finishTime - startTime;

    // Receive number of bytes read from server
    int nReads;
    cout << "reading nReads from server... " << endl;
    read(clientSd, (void*)nReads, SIZEOFINT);
    cout << "SUCCESS" << endl;

    // Record read time
    gettimeofday(&theTime, NULL);
    int readTime = theTime.tv_usec + theTime.tv_sec * 1000000;

    // Calculate the round-trip time
    int roundTime = readTime - startTime;

    // Display data sending statistics
    cout << "Test " << testType << ": data-sending time = " << sendTime;
    cout << " usec, round-trip time = " << roundTime << " usec, # reads = ";
    cout << nReads << endl;

    // Close the socket
    cout << "Closing the socket... " << endl;
    close(clientSd);
    cout << "SUCCESS" << endl;

    cout << "Exiting!" << endl;
    return 0;
} 
```

我已经花了大约 14 个小时来解决这个问题，并在来到这里之前尝试了很多事情：

*   使用 SIGTERM 代替 SIGIO
*   重新安排操作顺序，以便在接受传入连接之前设置 sigaction
*   在触发函数中使用 fcntl 而不是在睡眠循环中
*   使用传递给触发函数的 siginfo_t 结构中的字段描述符
*   使用 sa_handler 而不是为 sa_siginfo 设置标志（所以 siginfo_t 不通过）
*   根本不调用 fcntl
*   切换运行这些程序的服务器
*   切换这些程序正在使用的端口
*   在睡眠循环之前调用所有内容

在这一点上，我的教练告诉我改用不推荐使用的信号方法，但这似乎是一个糟糕的解决方案。siginfo 肯定是这些天的普遍做法，使用它不应该这么困难吗？任何有关尝试的建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T00:35:19.657

您似乎没有将套接字连接到 F_SETOWN 作为控制进程并设置 O_ASYNC 标志，这会导致套接字实际向 SETOWN 进程组发送信号。如果你不做这些事情，无论你使用 signal(2) 还是 sigaction(2) 都不会发送任何信号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T07:06:58.400

通过用 acceptSockAddr 替换对 newSockAddr 的引用来解决。这是当前代码，现在以新的和极好的方式出现故障！：

服务器.cpp：

```
#include <sys/types.h>    // socket, bind
#include <sys/socket.h>   // socket, bind, listen, inet_ntoa
#include <netinet/in.h>   // htonl, htons, inet_ntoa
#include <arpa/inet.h>    // inet_ntoa
#include <netdb.h>        // gethostbyname
#include <unistd.h>       // read, write, close
#include <string.h>       // bzero
#include <netinet/tcp.h>  // SO_REUSEADDR
#include <sys/uio.h>      // writev
#include <signal.h>       // sigaction
#include <sys/time.h>     // gettimeofday
#include <unistd.h>       // write
#include <fcntl.h>        // fcntl
#include <iostream>       // cout

using namespace std;
#define BUFSIZE 1500
#define MAX_PENDING 5
#define SIZEOFINT 4

// Globals
int nreps;
int nbufs;
int newSd;

// Read all the data from the client and output how long it took
void readFromClient(int sig, siginfo_t *siginfo, void *context)
{
    cout << "readFromClient triggered!" << endl;

    // Declare data buffer
    char databuf[BUFSIZE];

    // Record start time
    struct timeval theTime;
    gettimeofday(&theTime, NULL);
    int startTime = theTime.tv_usec + theTime.tv_sec * 1000000;

    // Keep reading until the buffer is full
    int nRead = 0;
    while((nRead += read(newSd, databuf, BUFSIZE - nRead)) < BUFSIZE)
    {
        cout << "nRead now: " << nRead << endl;
    }

    // For testing single byte read
    /*
    cout << "Reading a byte... " << endl;
    char bytebuf[1];
    read(newSd, bytebuf, 1);
    cout << "SUCCESS" << endl;
    */

    // Record finish time
    gettimeofday(&theTime, NULL);
    int finishTime = theTime.tv_usec + theTime.tv_sec * 1000000;

    // Calculate the receiving time
    int receiveTime = finishTime - startTime;

    // Display the receiving time
    cout << "data-receiving time = " << receiveTime << " usec" << endl;

    // Tell the client how much data was read
    cout << "Writing amount read... " << endl;
    write(newSd, (void*)nRead, SIZEOFINT);
    cout << "SUCCESS" << endl;

    // Close the socket
    cout << "Closing socket... " << endl;
    close(newSd);
    cout << "SUCCESS" << endl;
}

int main(int argc, char *argv[])
{
    // Store command line arguments
    int port = atoi(argv[1]);
    int nreps = atoi(argv[2]);
    int nbufs = atoi(argv[3]);

    // Declare a socket
    struct sockaddr_in acceptSockAddr;
    socklen_t len = sizeof(acceptSockAddr);
    memset((char*)&acceptSockAddr, '\0', sizeof(acceptSockAddr));
    acceptSockAddr.sin_family = AF_INET; // Address Family Internet
    acceptSockAddr.sin_addr.s_addr = htonl(INADDR_ANY);
    acceptSockAddr.sin_port = htons(port); // convert host byte-order

    // Open a stream-oriented socket
    int serverSd;
    if((serverSd = socket(PF_INET, SOCK_STREAM, 0)) < 0)
    {
        perror("socket failure");
        exit(1);
    }

    // Signal OS to reuse this port once server closes
    const int on = 1;
    setsockopt(serverSd, SOL_SOCKET, SO_REUSEADDR, (char*)&on, sizeof(int));

    // Bind socket to local address
    if(bind(serverSd, (sockaddr*)&acceptSockAddr, sizeof(acceptSockAddr)) < 0)
    {
        perror("bind failure");
        exit(1);
    }

    // Instruct OS to listen for up to 5 clients
    listen(serverSd, MAX_PENDING);

    // Set up signal handler for IO from client
    struct sigaction action;  
    memset(&action, '\0', sizeof(action));
    action.sa_sigaction = &readFromClient;
    action.sa_flags = SA_SIGINFO;
    //fcntl(newSd, F_SETSIG, SIGIO); // Fixes problem with si_fd
    if(sigaction(SIGIO, &action, NULL) < 0)
    {
        perror("sigaction");
        exit(1);
    }

    while(1) // sleep forever
    {
        cout << "Waiting for client... " << endl;
        if((newSd = accept(serverSd, (struct sockaddr*)&acceptSockAddr, &len)) < 0)
        {
            perror("accept failure");
            //exit(1);
        }
        cout << "SUCCESS" << endl;
        fcntl(newSd, F_SETOWN, getpid());
        fcntl(newSd, F_SETFL, FASYNC);
    }
    return 0;
} 
```

客户端.cpp：

```
#include <sys/types.h>    // socket, bind
#include <sys/socket.h>   // socket, bind, listen, inet_ntoa
#include <netinet/in.h>   // htonl, htons, inet_ntoa
#include <arpa/inet.h>    // inet_ntoa
#include <netdb.h>        // gethostbyname
#include <unistd.h>       // read, write, close
#include <string.h>       // bzero
#include <netinet/tcp.h>  // SO_REUSEADDR
#include <sys/uio.h>      // writev
#include <signal.h>       // sigaction
#include <sys/time.h>     // gettimeofday
#include <fcntl.h>        // fcntl
#include <iostream>       // cout

using namespace std;
#define BUFSIZE 1500
#define SIZEOFINT 4

int main(int argc, char *argv[])
{
    // Store commmand line arguments
    int server_port = atoi(argv[1]);
    int nreps = atoi(argv[2]);
    int nbufs = atoi(argv[3]);
    int bufsize = atoi(argv[4]);
    const char* server_name = argv[5];
    int testType = atoi(argv[6]);

    // Check to ensure proper buffer count/sizes
    if(nbufs * bufsize != BUFSIZE)
    {
        perror("nbufs times bufsize must equal BUFSIZE");
        exit(1);
    }

    if(testType < 1 || testType > 3)
    {
        perror("test type must be 1, 2, or 3");
        exit(1);
    }

    // Create buffers
    char databuf[nbufs][bufsize];

    // Retrieve hostent structure
    struct hostent* host = gethostbyname(server_name);
    if(!host)
    {
        perror("unknown hostname");
        exit(1);
    }

    // Declare socket structure
    sockaddr_in sendSockAddr;
    memset((char*)&sendSockAddr, '\0', sizeof(sendSockAddr));
    sendSockAddr.sin_family = AF_INET; // Address Family Internet
    sendSockAddr.sin_addr.s_addr = inet_addr(inet_ntoa(*(struct in_addr*)*host->h_addr_list));
    sendSockAddr.sin_port = htons(server_port);  // convert host byte-order

    // Open stream-oriented socket
    int clientSd;
    if((clientSd = socket(PF_INET, SOCK_STREAM, 0)) < 0)
    {
        perror("socket failure");
        exit(1);
    };

    // Connect socket to server
    if(connect(clientSd, (struct sockaddr*)&sendSockAddr, sizeof(sendSockAddr)) < 0)
    {
        perror("connect failure");
        exit(1);
    };

    // Record start time
    struct timeval theTime;
    gettimeofday(&theTime, NULL);
    int startTime = theTime.tv_usec + theTime.tv_sec * 1000000;

    // Conduct tests
    for(int i = 0; i < nreps; i++)
    {
        switch(testType)
        {
            case 1:
            {
                // Multiple write test
                cout << "Running multiple write test" << endl;
                for(int j = 0; j < nbufs; j++)
                {
                    cout << "Writing buffer " << j << "... " << endl;
                    write(clientSd, databuf[j], bufsize);
                    cout << "SUCCESS" << endl;
                }
                cout << "Finished multiple write test" << endl;
            }
            case 2:
            {
                // Vector write test
                cout << "Running vector write test" << endl;
                struct iovec vector[nbufs];
                for(int j = 0; j < nbufs; j++)
                {
                    vector[j].iov_base = databuf[j];
                    vector[j].iov_len = bufsize;
                }
                cout << "Writing vector... " << endl;
                writev(clientSd, vector, nbufs);
                cout << "SUCCESS" << endl;
                cout << "Finished vector write test" << endl;
            }
            case 3:
            {
                // Single write test
                cout << "Running single write test" << endl;

                cout << "Writing... ";
                write(clientSd, databuf, nbufs * bufsize);
                cout << "SUCCESS" << endl;

                // For testing single byte write
                /*
                cout << "writing a byte..." << endl;
                char singleByte[1];
                write(clientSd, singleByte, 1);
                cout << "wrote a byte!" << endl;
                */

                cout << "Finished single write test" << endl;
            }
        }
    }

    // Record finish time
    gettimeofday(&theTime, NULL);
    int finishTime = theTime.tv_usec + theTime.tv_sec * 1000000;

    // Calculate the sending time
    int sendTime = finishTime - startTime;

    // Receive number of bytes read from server
    int nReads = 0;
    cout << "reading nReads from server... " << endl;
    read(clientSd, (void*)nReads, SIZEOFINT);
    cout << "SUCCESS" << endl;

    // Record read time
    gettimeofday(&theTime, NULL);
    int readTime = theTime.tv_usec + theTime.tv_sec * 1000000;

    // Calculate the round-trip time
    int roundTime = readTime - startTime;

    // Display data sending statistics
    cout << "Test " << testType << ": data-sending time = " << sendTime;
    cout << " usec, round-trip time = " << roundTime << " usec, # reads = ";
    cout << nReads << endl;

    // Close the socket
    cout << "Closing the socket... " << endl;
    close(clientSd);
    cout << "SUCCESS" << endl;

    cout << "Exiting!" << endl;
    return 0;
} 
```

在关闭第一个客户端连接后尝试与服务器建立第二个客户端连接时仍然存在严重问题。

# asp.net - asp:RequiredFieldValidator 和单选按钮

> ID：12764925
> 
> 赞同：6
> 
> 时间：2012-10-06T23:56:29.073
> 
> 标签：asp.net, validation

这是我在 stackoverflow.com 上的第一个问题。

我正在做一个学校项目，我必须验证用户的输入。每次页面加载时，它都会给服务器错误消息。请查看代码，以及之后的错误消息。

```
<div>
<table>
<td>
<asp:RadioButton ID="RadioButton1" runat="server"></asp:RadioButton>
<asp:RequiredFieldValidator ID="validateCheck" runat="server"  ControlToValidate="RadioButton1"   ErrorMessage="Please Enter" Display="Dynamic"></asp:RequiredFieldValidator>             
</td>
</table>
</div> 
```

* * *

```
Server Error in '/' Application.
Control 'RadioButton1' referenced by the ControlToValidate property of 'validateCheck' cannot be validated. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T00:08:01.240

RequiredFieldValidator 不验证 RadioButton。但是，您可以改用 RadioButtonList 控件（由RequiredFieldValidator 验证）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T00:11:33.523

asp:RadioButton 不支持验证，而不是 RadioButton 使用 RadioButtonList:'

```
 <form id="form1" runat="server">
<div>

    <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
        ErrorMessage="RequiredFieldValidator" ControlToValidate="RadioButtonList1"></asp:RequiredFieldValidator>

</div>
<asp:ValidationSummary ID="ValidationSummary1" runat="server" />

<asp:RadioButtonList ID="RadioButtonList1" runat="server">
    <asp:ListItem>One</asp:ListItem>
    <asp:ListItem>Two</asp:ListItem>
</asp:RadioButtonList>

</form> 
```

# java - Java中的对象类型和引用数组

> ID：12764931
> 
> 赞同：15
> 
> 时间：2012-10-06T23:57:27.827
> 
> 标签：java, arrays, object

```
public class RefMix {
  public static void main(String[] args) {
    Object[] a = {null, "foo"};
    Object[] b = {"bar", b};
    a[0] = b;

    System.out.println(a[0][0]);
  }
} 
```

我的理解是数组是 Java 中的对象，因此是 Object 类型的子类。我进一步的理解是，2-dim 数组是作为数组引用的数组实现的。因此我不明白为什么我的 a[0][0] 没有`bar`在上面的代码中产生。相反，它不编译：

```
RefMix.java:7: array required, but java.lang.Object found 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-07T00:03:57.917

> 我的理解是数组是 Java 中的对象，因此是 Object 类型的子类。我进一步的理解是，2-dim 数组是作为数组引用的数组实现的。

这一切都是正确的，并解释了为什么您可以完成作业

```
a[0] = b; 
```

没有来自编译器的任何抱怨。

> 因此我不明白为什么我的 a[0][0] 在上面的代码中没有产生 bar 。

好的，我们来看看这个表达式中的类型：

*   `a`是一个——这是一个s`Object[]`的数组`Object`
*   `a[0]`是一个`Object`
*   `a[0][0]`- 现在您正尝试在`Object`. 编译器不知道它`Object`实际上是一个数组，所以它会抱怨。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-07T00:00:09.503

对象实例的运行时类型不同于静态推断的类型。编译器将尝试估计程序中每个变量的类型，以便及早捕获某些类型的错误。在这种情况下，`a[0]`将始终是一个数组，但编译器不知道这一点。由于您要从对象数组中获取对象，因此编译器只知道这`a[0]`是一个对象。因此它会引发错误。

如果您知道某些东西总是某种类型但编译器无法弄清楚，您可以通过插入显式强制转换来解决这个问题。

```
System.out.println(((Object[])a[0])[0]); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-07T00:08:14.833

你是对的，数组总是`Objects`在 Java 中，但`Objects`并不总是数组，因此你会得到一个编译错误，因为`a`是一个`Object[]`（一维）。您无法访问

```
a[0][0]; 
```

因为`a`不是二维数组（至少它没有这样声明）。但是，在这种情况下，您可以肯定，这`a[0]`是一个`Objects`. 因此，您可以这样做：

```
Object[] c = (Object[]) a[0];
System.out.println(c[0]);
// or directly:
System.out.println(((Object[])a[0])[0]); 
```

这**会将**`a[0]`（即）的返回类型转换`Object`为 a `Object[]`，然后您可以访问数组的“第二层”。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-07T00:01:06.780

由于 Java 中的数组是一个对象，因此第一个和第二个分配会将您的数组存储为您的对象数组的第一个元素。

```
Object[] a = {null, "foo"};
Object[] b = {"bar", b}; 
```

现在，您已将对象数组的第一个元素更改`a`为包含值 b 而不是数组。但因为它是一个对象数组。从中出来的一切都将是对象..

由于 a[0] 是一个对象..所以，你显然不能访​​问这样的东西： -

```
System.out.println(a[0][0]); 
```

您可以尝试将对象 a[0] 类型转换为对象数组..：-

```
System.out.println(((Object[])a[0])[0]); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-07T00:02:06.083

做：

```
System.out.println(((Object[])a[0])[0]); 
```

这将在运行时将对象“转换”为对象数组。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-07T09:00:07.877

由于我最近做了很多 C++ 编码，我发现 Java 在类型检查方面比 C++ 严格得多。Java 将除原始类型之外的所有内容都视为 Object，但 Java 在区分 Array 和非 Array 类型方面更进了一步。在分配期间，例如“a [0] = b;” , Java 首先检查它是否是 Array 类型，然后通过常规的多态类型检查过程。如果你想让你的代码工作，你应该做...

```
Object[][] a = {{null}, {"foo"}};
Object[] b = {"bar", new java.util.Date()};
a[0] = b; 
```

您可以通过查看作为参数传递给 Class.forName() 的 Java 类签名来了解 java 如何特别注意数组类型。例如，数据类型..

```
com.foo.Bar[][] barsIn2D; 
```

可以在下面加载签名...

```
// [ => Array
// [[ => Array of Array type
// L<object>; => Object, not Array
Class.forName("[[Lcom/foo/Bar;"); 
```

如您所见，签名以“[”或“L”开头。这告诉我们它是否是一个数组优先于“Lcom/foo/Bar;”。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-07T00:22:04.407

你所做的一切都相当于这个

```
Object a = {"bar", "foo"};
System.out.println(a[0]); 
```

这也不能编译。

# ios - 持久本地存储 iOS 5.1

> ID：12764933
> 
> 赞同：0
> 
> 时间：2012-10-06T23:58:15.040
> 
> 标签：ios, html, cordova

我正在开发一个移动应用程序，我希望使用 HTML5 持久存储。我已经读过 iOS 5.1+ 不支持它，因为它会定期删除它。

有解决方案或解决方法吗？我正在使用 Phonegap/Apache Cordova。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T01:40:30.643

此问题已在最近的 PhoneGap 安装中得到修复。如果您使用的是最新版本，则应该没问题。

# php - Ajax .open 返回空错误

> ID：12764934
> 
> 赞同：0
> 
> 时间：2012-10-06T23:58:28.870
> 
> 标签：php, ajax, firefox

我正在将我的网站更新为 HTML 5。我有一个称为 PHP 文件的 Ajax 脚本，但它现在不起作用。Firefox Web 开发者插件只是抛出一个只包含行号的空错误。行号指向以下行：

```
arequest.open('GET','userrating.php?h=' + h,true); 
```

这是完整的脚本：

```
function ajaxRequest(){
    var activexmodes = ["Msxml2.XMLHTTP", "Microsoft.XMLHTTP"];
    if(window.ActiveXObject){
        for(var i = 0; i < activexmodes.length; i++){
            try {
                return new ActiveXObject(activexmodes[i]);
            } catch(e){
                //suppress error
            }
        }
    } else if(window.XMLHttpRequest){
        return new XMLHttpRequest();
    } else {
        return false;
    }
}

function resetRating(h){
    var arequest = new ajaxRequest();
    arequest.onreadystatechange = function(){
        if(arequest.readyState == 4){
            if(arequest.status == 200 && window.location.href.indexOf("http")==-1){
                var response = arequest.responseText;
                // do something
            }
        }
    }
    h = encodeURIComponent(h);
    arequest.open('GET','userrating.php?h=' + h,true);
    arequest.send(null);
} 
```

我知道我为“h”传递了正确的值，并且 userrating.php 页面在该值下工作得非常好。我现在尝试了一些不同的 Ajax 脚本，它们都在脚本的 .open 行上给出了相同的空白错误。

任何人都可以给我任何指示吗？

在此先感谢，伊恩

# c++ - 数组到 C++ 中的链表

> ID：12764938
> 
> 赞同：0
> 
> 时间：2012-10-06T23:58:56.603
> 
> 标签：c++, linked-list

大家好，大家好，试图将使用结构数组的旧 C 程序翻译成使用链表的 C++ 程序。我是一个完全的 C++ 新手，我对在 C++ 中设置链表的语法有点困惑......这是我的代码：

```
#include <iostream> 
#include <stdlib.h>
#include <string>
#include <ctype.h>
#include <fstream>

using namespace std;

struct Video { 
char video_name[1024];      
int ranking;                // Number of viewer hits
char url[1024];             // Video URL
struct Video *next;  // pointer to Video structure
} 

struct Video* Collection = new struct Video;
Collection *head = NULL;                    // EMPTY linked list 
```

在我的旧程序`Collection`中，有一个`Video`. 我怎样才能成为节点`Collection`的链表`Video`？我目前在最后两行代码中出现错误说：`expected initializer before 'Collection'`和`expected constructor, destructor or type conversion before '*' conversion`。我知道我的语法肯定是错误的，但我想我不明白如何在 Collection 中创建视频链接列表......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T00:12:38.810

C++ 的答案是：

```
struct Video { 
    std::string video_name;     
    int ranking;                // Number of viewer hits
    std::string url;             // Video URL
} 

std::list<Video> list_of_videos 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T00:11:44.690

您已定义`Collection`为指向视频的指针类型的变量。在下一行中，您将其视为一种类型，这是没有意义的。你只需要这样：

```
Video *head = NULL; 
```

`head`表示链表。你不需要另一个变量。

OTOH，如果您真的想正确使用 C++，我建议您坚持使用数组解决方案，除非您的使用模式以某种方式保证链表语义。如果它是一个已知大小的数组，您有两种选择：

```
Video videos[N];
std::array<Video, N> videos; // Preferred in C++11 
```

否则，请使用`std::vector<T>`：

```
std::vector<Video> videos; 
```

如果它确实必须是一个链表，请考虑使用`std::list<T>`：

```
std::list<Video> videos; 
```

在所有这些情况下，您都应该省略`struct Video *next;`.

# c# - 如果使用 System.Threading.Timer，是否需要 BackgroundWorker？

> ID：12764940
> 
> 赞同：2
> 
> 时间：2012-10-06T23:59:11.327
> 
> 标签：c#, .net, multithreading, timer, backgroundworker

如果我需要每小时在后台运行一次任务，我可以只使用一个`Timer`显然将使用单独线程的对象：http: [//msdn.microsoft.com/en-us/library/zdzx8wx8.aspx](http://msdn.microsoft.com/en-us/library/zdzx8wx8.aspx)？

由此看来，没有必要`BackgroundWorker`为我的目的使用 a 。这个对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T00:22:43.147

这在很大程度上取决于您的任务是什么。BackgroundWorker 组件将为您提供除 Timer 之外的其他一些功能，包括[取消支持](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.cancelasync.aspx)、[进度报告](http://msdn.microsoft.com/en-us/library/ka89zff4.aspx)等。但是，如果您只想每小时启动一次并且不需要任何进一步的操作，那么 Timer 是一个非常轻量级的选择。

您是否研究过使用任务计划程序作为另一种选择？这里有一个简洁的包装器：http: [//taskscheduler.codeplex.com/](http://taskscheduler.codeplex.com/)

# javascript - 我可以将连续的 Sugar.js 调用组合到 Array.map 吗？

> ID：12764942
> 
> 赞同：0
> 
> 时间：2012-10-06T23:59:55.767
> 
> 标签：javascript, sugar.js

例如，如果我的数组是多维的：

```
var myArray = [
    {
        key1: {
            key2: 1,
            ...
        },
        ...
    },
    {
        key1: {
            key2: 2,
            ...
        },
        ...
    }
];

myArray.map('key1').sum('key2');
= 3 
```

这也可能是

```
myArray.map('key1').map('key2').sum(); 
```

但是有没有办法将它们组合成一个调用`map`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T04:58:41.727

当 map 接受一个字符串时，它实际上是[pluck](http://underscorejs.org/#pluck)的快捷方式。

如[Sugar 文档中所述](http://sugarjs.com/api/Array/map)， map 也可以更传统地采用函数：

> **地图（地图，范围）**
> 
> 将数组映射到另一个数组，该数组包含对每个元素调用 map 的结果值。范围是 this 对象。除了为原生不支持它的浏览器提供此方法外，此增强方法还直接接受一个字符串，该字符串是获取每个元素上的该属性（或调用函数）的函数的快捷方式。
> 
> 返回：数组

**所以：**

```
myArray.map(function(x) { return x.key1.key2; }).sum() 
```

# c++ - How to check if a character is within a range

> ID：12764950
> 
> 赞同：0
> 
> 时间：2012-10-07T00:01:08.237
> 
> 标签：c++

I'm trying to determine if a character falls within a given range. I've searched, but can't find a way to do this.

```
if(data[0] >= character) {
    // do this
} 
```

The above is just a simplified example of what I am trying to achieve, where data is a string, and character is a char. I will also check to see whether data[0] is less than another character, but have omitted that for this example.

Can somebody guide me on what function to use?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T00:12:16.077

What you are doing is fine. A character is an integral type so doing comparisons the way you are is okay.

You could write your own function to do this if you want, but no function exists as far as I know to do this for you.

Something like...

```
bool charInRange( char toCheck, char min, char max )
{
  return ( toCheck >= min && toCheck <= max );
} 
```

might work for you. You could also remove the equal signs if you want.

Then use it like:

```
if( charInRange( data[0], 'b', 'h' ) )
{
  //dostuff
} 
```

# c++ - 与 auto_ptr 声明不同，unique_ptr 声明是否在其模板类型为不完整类型时是明确定义的？

> ID：12764952
> 
> 赞同：12
> 
> 时间：2012-10-07T00:01:56.120
> 
> 标签：c++, c++11, language-lawyer, unique-ptr, auto-ptr

我写了[这篇文章](http://kera.name/articles/2012/10/auto_ptr-and-forward-declarations-basically-dont)，并得到了一些让我感到困惑的评论。

它基本上归结为我`T2`只看到用作模板参数并错误地得出结论，因此我可以利用前向声明的机会：

```
struct T2;

struct T1
{
    std::auto_ptr<T2> obj;
}; 
```

如果我不继续在`T2`同一个 TU 中的某个地方定义，这将调用 UB，因为`std::auto_ptr<T2>`调用`delete`它的 internal `T2*`，并[调用`delete`指向一个不完整类型的对象的指针，该对象的完整类型具有非平凡的析构函数是 undefined](https://stackoverflow.com/questions/4325154/delete-objects-of-incomplete-type)：

> `[C++11: 5.3.5/5]:`如果要删除的对象在删除点具有不完整的类类型，并且完整的类具有非平凡的析构函数或释放函数，则行为未定义。

我碰巧使用的 GCC 工具链 — v4.3.3 (Sourcery G++ Lite 2009q1-203) — 很友好地让我知道了一个注释：

> 注意：析构函数和特定于类的操作符 delete 都不会被调用，即使它们是在定义类时声明的。

尽管在其他 GCC 版本中似乎很难得到这种诊断。

我的抱怨是，如果指向不完整类型的实例的指针格式错误而不是 UB，那么发现这样的错误会容易*得多*`delete`，但这对于实现来说似乎是一个难以解决的问题，所以我明白为什么是UB。

 *但后来有人告诉我，如果我`std::unique_ptr<T2>`改用它，这将是安全且合规的。

据称 n3035 在 20.9.10.2 说：

> 的模板参数可能是不完整的类型`T`。`unique_ptr`

我只能在 C++11 中找到：

> `[C++11: 20.7.1.1.1]:`
> 
> **/1**类模板`default_delete`用作类模板的默认删除器（破坏策略）`unique_ptr`。
> 
> **/2**的模板参数可能是不完整的类型`T`。`default_delete`

但是，`default_delete`'s`operator()`确实需要一个完整的类型：

> `[C++11: 20.7.1.1.2/4]:`如果`T`是不完整类型，则程序格式错误。

* * *

我想我的问题是这样的：

**我文章的评论者是否正确地说仅包含以下代码的翻译单元格式正确且定义明确？还是他们错了？**

```
struct T2;

struct T1
{
    std::unique_ptr<T2> obj;
}; 
```

**如果它们是正确的，那么编译器将如何实现这一点，因为它有充分的理由成为 UB，至少在使用 an 时`std::auto_ptr`？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T00:14:22.147

根据[GOTW #100](http://herbsutter.com/gotw/_100/)中的 Herb Sutter 所述，遇到与不完整类型`unique_ptr`相同的问题。`auto_ptr`

> ...虽然 unique_ptr 和 shared_ptr 都可以用不完整的类型实例化，但 unique_ptr 的析构函数需要完整的类型才能调用 delete...

他的建议是在头文件中声明包含类（即`T1`）的析构函数，然后将其定义放在`T2`一个完整类型的翻译单元中。

```
// T1.h
struct T2;

struct T1
{
  ~T1();
  std::unique_ptr< T2 >;
};

// T1.cpp
#include "T2.h"

T1::~T1()
{
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-07T02:54:51.570

下面的示例试图演示 和 之间的`std::auto_ptr<T>`区别`std::unique_ptr<T>`。首先考虑这个由 2 个源文件和 1 个头文件组成的程序：

标题：

```
// test.h

#ifndef TEST_H
#define TEST_H

#include <memory>

template <class T>
using smart_ptr = std::auto_ptr<T>;

struct T2;

struct T1
{
    smart_ptr<T2> obj;

    T1(T2* p);
};

T2*
source();

#endif  // TEST_H 
```

第一个来源：

```
// test.cpp

#include "test.h"

int main()
{
    T1 t1(source());
} 
```

第二个来源：

```
// test2.cpp

#include "test.h"
#include <iostream>

struct T2
{
    ~T2() {std::cout << "~T2()\n";}
};

T1::T1(T2* p)
    : obj(p)
{
}

T2*
source()
{
    return new T2;
} 
```

该程序应该编译（它可能会编译并带有警告，但它应该编译）。但在运行时，它表现出未定义的行为。它可能不会输出：

```
~T2() 
```

这表明`T2`' 的析构函数尚未运行。至少它不在我的系统上。

如果我将 test.h 更改为：

```
template <class T>
using smart_ptr = std::unique_ptr<T>; 
```

然后编译器需要输出诊断信息（错误）。

也就是说，当你犯这个错误时，`auto_ptr`你会得到一个运行时错误。当你犯这个错误时，`unique_ptr`你会得到一个编译时错误。这**就是**`auto_ptr`和之间的区别`unique_ptr`。

要修复编译时错误，您必须在完成`~T1()`后`T2`进行概述。在 test2.cpp 之后添加`T2`：

```
T1::~T1() = default; 
```

现在它应该编译并输出：

```
~T2() 
```

您可能还需要声明和概述移动成员：

```
T1::T1(T1&&) = default;
T1& T1::operator=(T1&&) = default; 
```

您可以使用这些相同的修复程序，`auto_ptr`它会再次正确。`auto_ptr`但同样，和之间的区别在于`unique_ptr`前者，直到运行时您才发现您需要进行一些调试（您的编译器可能给出的模可选警告）。使用后者，您可以保证在编译时找到。*

# python - 获取错误 search_products() 至少需要 2 个参数（给定 2 个）

> ID：12764953
> 
> 赞同：3
> 
> 时间：2012-10-07T00:02:00.920
> 
> 标签：python, django, function, default, required-field

出于某种原因，我收到了错误：

```
TypeError: search_products() takes at least 2 arguments (2 given) 
```

奇怪的是，我在两个不同的地方进行了相同的 API 调用——一个在我放置在 Model 类之一中的函数中。页面视图中的另一个。模型类中的一个工作正常，而 View 函数中的一个正在抛出错误。

以下是我在 Views.py 中的代码：

```
searchproducts=api.API().search_products(query="myproduct") 
```

同样，当我在 Models.py 中编写完全相同的代码时，一切正常。

我在 api.py 的 API 类中的 search_products 函数如下：

```
def search_products(self, category_id, query="", start=0, limit=10, filter=None, ranged_filters=None, sort_by=None): 
```

我怎样才能更深入地找到发生这种情况的根源？

追溯：

```
/Users/me/Desktop/myenv2/lib/python2.7/site-packages/django/core/handlers/base.py in get_response
                # Apply view middleware
                for middleware_method in self._view_middleware:
                    response = middleware_method(request, callback, callback_args, callback_kwargs)
                    if response:
                        return response
                try:
                    response = callback(request, *callback_args, **callback_kwargs) ...
                except Exception, e:
                    # If the view raised an exception, run it through exception
                    # middleware, and if the exception middleware returns a
                    # response, use that. Otherwise, reraise the exception.
                    for middleware_method in self._exception_middleware:
                        response = middleware_method(request, e) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T05:05:46.027

In your definition of `search_products` you have `category_id` as a required field, and you are not providing that as an argument when you are calling the method. Provide a default for `category_id` or pass in the appropriate argument to resolve your issue

# sql - 使用 Oracle 的正则表达式功能来查找双元音序列，例如。'ie'、'ee'、'oa'

> ID：12764955
> 
> 赞同：2
> 
> 时间：2012-10-07T00:02:14.297
> 
> 标签：sql, regex, oracle

使用 Oracle 的正则表达式功能查找标题中包含双元音序列单词“ie”、“ee”、“oa”的所有电影。我知道这与 like 子句有关，但代码的顺序给我带来了麻烦。任何帮助表示赞赏。

“表名电影”

```
SELECT *  
FROM movies
WHERE REGEXP_LIKE (title, ‘ie’, ‘ee’, ‘oa’); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T02:31:14.787

您已经确定了正确的函数，但您似乎不知道如何制定正则表达式。您应该在 Oracle 的上下文之外阅读一般意义上的正则表达式。正则表达式有多种方言，但是一旦你学会了一种方言，应该很容易切换到其他方言。

对于您的特定 Oracle 问题：

```
select * from movies where regexp_like( title, '[aeiou]{2}' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T01:08:28.403

This will only work for ms-sql. Leaving the answer in case anyone need it.

```
where title like '%[aeiou][aeiou]%' 
```

# blogs - 如何在 octopress 帖子中添加脚本？

> ID：12764957
> 
> 赞同：1
> 
> 时间：2012-10-07T00:02:32.513
> 
> 标签：blogs, octopress

Octopress 帖子包含降价标记。

我想添加一个需要`<script src="http://some-widget.com">`在帖子中放置的小部件。

问题是降价将它变成了一个代码块并且它没有被执行。

我知道我可以直接编辑 .html 输出，但下次我将执行 rake 生成时，我的编辑将丢失。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T21:55:03.263

你试过用`<div>`标签包围代码吗？它在几个 markdown/html 问题上对我有用。

# asp.net - 如何禁用从浏览器到达 ajax 调用

> ID：12764960
> 
> 赞同：0
> 
> 时间：2012-10-07T00:02:52.420
> 
> 标签：asp.net, ajax, jquery

我有以下 ajax 调用

```
open: function () {
                     $(this).load("MyBox.aspx?sec=L&levId=" + RowId);
                 } 
```

所以人们可以看到查询字符串，所以用户可以复制 url 并将其粘贴到浏览器，但我怎样才能阻止它？我不希望它从浏览器中显示。我怎么能这样做？我正在使用 asp.net 和 jquery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T00:05:26.453

`load`函数发出**GET**请求。取而代之的是，您可以使用 jQuery **POST**调用并获取数据。用户无法通过将结果粘贴到浏览器并按回车（即 GET 请求）来获得结果

```
 var thatObject=$(this);
  $.post("MyBox.aspx?sec=L&levId=" + RowId,function(response){
     thatObject.html(response);
  }) 
```

在服务器页面中，您可以通过检查**Request.Form**集合（而不是 Request.QueryString）来读取发布的值。

来自[msdn](http://msdn.microsoft.com/en-us/library/ms525985%28v=vs.90%29.aspx)

> Form 集合使用 POST 方法检索发布到 HTTP 请求正文的表单元素的值。

[`Request.RequestType`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.requesttype.aspx)您可以通过检查属性值来确定调用是 GET 调用还是 POST 调用。这样，您可以避免人们向此方法发出 GET 请求并获得响应。

但请记住，有一些工具/浏览器插件可以从浏览器发出 POST 请求。

此外，如果数据是针对授权用户的，您可以在返回内容之前在服务器页面（MYbox.aspx）中检查用户是否有权访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T00:05:14.270

你不能。您永远不能信任客户端上运行的任何代码。如果您需要在客户端隐藏数据，您应该创建一个基于服务器的会话，然后将会话令牌放入加密的 cookie 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T00:11:20.493

来自维基百科和 W3C

> 某些方法（例如，HEAD、GET、OPTIONS 和 TRACE）被定义为安全的，这意味着它们仅用于信息检索**，不应更改服务器的状态**。换句话说，它们不应该有副作用，除了相对无害的影响，如日志记录、缓存、横幅广告的服务或增加网络计数器。因此，在不考虑应用程序状态上下文的情况下发出任意 GET 请求应该被认为是安全的。
> 
> 相比之下，POST、PUT 和 DELETE 等方法旨在用于可能导致副作用的操作

如果您的 get 请求更改了服务器的状态（它很可能根据您的帖子进行更改），那么您做错了。你试图做的事情是不可能的。你需要重新考虑你的架构。

# ruby-on-rails - 你怎么知道你的 YAML 文件在哪里破坏？

> ID：12764962
> 
> 赞同：2
> 
> 时间：2012-10-07T00:03:28.263
> 
> 标签：ruby-on-rails, internationalization, yaml

我希望我的 Rails 应用程序中的 YAML 解析器告诉我它在哪里出错。

通常，在向 YAML 文件添加大量内容后，我在我的 rails 应用程序中收到此错误：

```
 Can not load translation from /path/to/rails/app/config/locales/en.yml, expected it to return a hash, but does not 
```

我想知道如何调试此错误，以便它可以告诉我一条关于我失败的地方。现在我的策略包括查看文件并尝试找出错误。

通过应用程序的跟踪不再具有描述性，只告诉我 YAML 解析器正在运行。

解析器是否可以判断它在哪里窒息？

（我是新手，所以我将发布我的 YAML 文件的示例）

* * *

```
sp:
  static_pages:
            ship_agency_title: Agenciamiento de Barco
        ship_agency_summary: |
                        Mardom ofrece servicios de agenciamiento a diferentes líneas marítimas, entre las cuales están líneas con servicios especializados en el transporte de carga contenerizada.
        project_cargo_handling_title: Manejo de Proyectos
        project_cargo_hangling_description: |
                                            Mardom ofrece  un servicio especializado en el manejo de cargas con sobre-dimensión y/o sobrepeso (carga de proyectos).
        ship_and_cargo_brokerage_title: Fletamento de Buques y Carga
        ship_and_cargo_brokerage_description: |
                                              Marítima Dominicana S.A.S. cuenta con un equipo especializado en el servicio de fletamento de buques.
        storage_and_warehousing_title: Almacenaje 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T00:56:11.240

您可以尝试一些在线验证器。这是一个：

[http://yamllint.com/](http://yamllint.com/)

这是关于如何验证 yaml 的先前问题：

[https://stackoverflow.com/questions/287346/yaml-validation](https://stackoverflow.com/questions/287346/yaml-validation)

# android - Android EditText 不显示用于过滤 ListAdapter ListView 的键入字母

> ID：12764966
> 
> 赞同：2
> 
> 时间：2012-10-07T00:03:47.433
> 
> 标签：android, listview, filter, android-edittext

我有`LinearLayout`一个`EditText`和一个`ListView`。我正在使用`EditText`来过滤`ListView`. 当我第一次显示屏幕并且软键盘自动弹出时，过滤工作正常。当我键入时，键入的字母不会显示在`EditText`. 如果我点击`EditText`，我输入的字母会显示，但不会进入过滤器。好像那里有2个`EditText`。

这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>

 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:orientation="vertical"
     android:paddingBottom="6dip"
     android:paddingTop="4dip" >

     <EditText
         android:id="@+id/search_box"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"            
         android:inputType="text"
         android:maxLines="1"
         android:textSize="17dip" />

     <ListView
         android:id="@+id/beerListViewID"
         android:layout_width="fill_parent"
         android:layout_height="0dip"
         android:layout_weight="1" >

     </ListView>

</LinearLayout> 
```

这是我对 TextWatcher 的设置：

```
@Override public void onLoadFinished(Loader<ArrayList<BeerRecord>> loader,
        ArrayList<BeerRecord> beers) {
    // Set the new data in the adapter.
    ListView listView = (ListView) getActivity().findViewById(R.id.beerListViewID);

    myAdapter = new BeerItemAdapter(getActivity(), R.layout.beerline, beers);

    filterText = (EditText) getActivity().findViewById(R.id.search_box);
    filterText.addTextChangedListener(filterTextWatcher);

    listView.setAdapter(myAdapter);

} 
```

和 TextWatcher：

```
 private TextWatcher filterTextWatcher = new TextWatcher() {

    public void afterTextChanged(Editable s) {
    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }

    public void onTextChanged(CharSequence s, int start, int before,
            int count) {            
        myAdapter.getFilter().filter(s);
    }

}; 
```

我应该发布更多代码吗？任何人都知道为什么似乎有 2 `EditText`？

编辑：当活动开始并弹出软键盘时，我可以看到可查看的 EditText 没有焦点。我必须以某种方式定义隐藏在第一个后面的第二个。

编辑——回答：我想通了。在这个片段的 OnCreate 方法中，我有：

```
 getActivity().setContentView(R.layout.beer_listview); 
```

我想这是在创建第二个视图。当我评论它时，第二个 EditText 消失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:04:41.733

只是重申我上面的评论，现在已经过去了 8 个小时。我弄清楚发生了什么：

```
 getActivity().setContentView(R.layout.beer_listview); 
```

在我的片段的 OnCreate 中，它在“真实”视图之上放置了另一个视图。我真的不知道为什么，但我知道评论修复它。我认为它是这样的，只是搜索了我对视图的每一个引用，边走边评论。

如果有人想解释，请随意！

# matlab - 最小化多变量函数

> ID：12764973
> 
> 赞同：1
> 
> 时间：2012-10-07T00:05:00.277
> 
> 标签：matlab, minimization

我知道 fminsearch 函数，但它似乎只能解决一个变量。

如果我的函数看起来像 f(x,y,z) 并且我想找到给出最低结果的 x,y,z 的值，我将如何在 MatLab 中执行此操作？f 的复杂性会使计算偏导数变得异常困难。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T00:42:38.077

fminsearch 是多变量的，例如：

```
a = fminsearch(@(x)((x(1)-1)^2+(x(2)-2)^2), [0,0]); 
```

传递给目标函数的参数可以是向量，只要确保将 x0 参数（fminsearch 中的第二个参数）指定为正确的大小即可。

# jsf - 无法重定向到注销页面

> ID：12764979
> 
> 赞同：0
> 
> 时间：2012-10-07T00:06:22.067
> 
> 标签：jsf, jsf-2, spring-security

我在所有页面的标题中有一个注销链接，我希望当用户点击注销链接时，他被重定向到`/j_spring_security_logout`url，这反过来将触发 spring security 的注销过滤器。

所以这就是我所做的：

```
<h:commandLink action="logout?faces-redirect=true" value="Logout"/> 
```

和导航规则：

```
<navigation-rule>       
    <navigation-case>
        <from-outcome>logout</from-outcome>
        <to-view-id>/j_spring_security_logout</to-view-id>
        <redirect />
    </navigation-case>
</navigation-rule> 
```

我正在使用 JSF2 并且我总是使用漂亮的面孔进行导航，但是现在我必须使用导航规则，所以我想知道为什么上面的代码不起作用？

单击网址时它不起作用，请告知如何解决该问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T00:35:44.233

必须是有效的`<to-view-id>`JSF 视图 ID，例如`/page.xhtml`，而不是任意的非 JSF URL 路径。

只需使用纯 HTML 链接。

```
<a href="#{request.contextPath}/j_spring_security_logout">Logout</a> 
```

# database - 哪个内置 Postgres 复制最适合我基于 Django 的用例？

> ID：12764981
> 
> 赞同：3
> 
> 时间：2012-10-07T00:06:24.100
> 
> 标签：database, django, postgresql, database-replication

我注意到 Postgres 现在已经内置了复制，包括同步复制、流复制和其他一些变体。它甚至提供了在应用程序级别控制特定操作的同步的能力（例如，将同步用于重要的事情，如汇款，但可能不用于不太重要的事情，如用户评论等）

我正在开发一个使用 Django 1.5（即开发）的软件，并且可能需要同步复制（将进行与商业相关的交易）。

您是否认为内置工具在大多数情况下最适合这项工作，您对内置复制的一种变体与另一种变体、易用性相关、质量等有什么想法？

最后一件事；Slony 和 PGPool II 似乎非常流行（尤其是 Slony）用于复制。是否有 A）它们比内置复制更受欢迎的特定技术原因或 B）仅仅是因为很多人正在使用没有内置复制的版本，还是 C）我已经陷入困境而PG内置复制已经相当流行了？

## 更新（更多细节）

我只有 2 台物理服务器，它们位于同一个机架中。我的目的是提供一个从机，如果一台机器出现灾难性问题（或者甚至像双电源故障等简单的事情），它可以自动变成主机。我不介意我的客户在自动故障转移期间是否遇到停机时间，只要停机时间是几分钟左右，而不是一小时左右。

我希望零数据丢失，并愿意为此在故障转移过程中牺牲更多时间。有没有办法在不进行同步复制的情况下进行这种权衡（例如，没有写回确认或其他东西的流式日志）？

您会推荐什么策略或复制变体？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T01:47:49.290

我认为您误解了复制同步提交的好处和成本。在 PostgreSQL 中，复制通过使用 PostgreSQL 的标准崩溃恢复功能将从属恢复到主控来工作。例如，在断电的情况下，您可以确保预写日志段将同时在主服务器和从服务器上运行。使用异步提交，将提交写入 WAL，通知应用程序并根据网络特性或多或少同时通知从站等。

同步提交派上用场的地方有两件事是正确的：

1.  你有不止一个奴隶（这很关键！）和
2.  您需要异步提交无法提供的持久性保证。

使用同步提交时，数据库会一直等待，直到它从可配置数量的从属设备中收到反馈，告诉应用程序提交已经发生。这在异步提交无法工作的少数情况下提供了持久性保证。

例如，假设您的主服务器通过一个 RAID 阵列被子弹击中并立即崩溃（抱歉，我想不出任何具有良好硬件的更好示例）。或者假设有人被电源线绊倒，不仅关闭了服务器电源，而且损坏了软件 RAID 设备。在这种情况下，可能有几个事务可能没有被复制并且您的 WAL 是不可恢复的，因此这些事务会丢失。使用同步提交，应用程序将一直等到满足持久性保证。

这意味着一件事是，如果您只使用一个从属服务器进行同步提交，那么您的可用性不会超过主服务器或从服务器崩溃的时间，因此您的可用性将比仅使用一台服务器时更差。这也意味着，如果您的从属设备在地理上被移除，那么您在应用程序提交事务的请求中引入了显着的延迟。

从异步切换到同步提交并没有太大的变化，但一般来说，我认为当你已经在硬件上尽可能多地保证和可用性时，你会获得最大的同步提交。从异步开始，当您无法将设置进一步优化为异步时向上移动。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T05:33:15.053

回复：“Slony 和 PGPool II 似乎在复制方面非常受欢迎（尤其是 Slony）。是否存在 A）它们比内置复制更受欢迎的特定技术原因，或者 B）仅仅是因为很多人都在使用没有内置复制的版本，或者 C）我是否已经陷入困境并且 PG 内置复制已经很流行了？”

Slony 之所以流行是因为它已经存在了很长时间，而且内置的 PostgreSQL 复制相对较新。内置到 PostgreSQL 中的级联复制甚至更新，并且是 Slony-I 构建的。

Slony-I 有两个主要优点，首先，您可以在不同版本的 PostgreSQL 之间进行复制，而内置的复制系统不仅必须使用相同的版本，而且两台服务器还必须是二进制兼容的。另一个优点是您只能复制 Slony-I 上的某些表，而不是整个数据库集群。Slony-I 的缺点有很多，包括用户友好性差、没有同步提交和困难的 DDL（模式）更改。我相信在 Postgres 中使用内置复制将很快超过 Slony-I 用户群，如果它还没有这样做的话。

据我记得，PGPool II 使用基于语句的复制（就像 MySQL 内置的一样），在我看来，这绝对是最不可取的。

我会在 PostgreSQL 中使用内置的热备份/流式复制。您可以从打开同步提交开始，如果您不需要它或惩罚太高，则将其关闭，反之亦然。在 LAN 上，异步模式似乎以大约一百毫秒左右的时间到达从站（根据我自己的经验）。

# java - ProcessBuilder 没有正确执行程序

> ID：12764984
> 
> 赞同：2
> 
> 时间：2012-10-07T00:07:17.437
> 
> 标签：java, linux, processbuilder

我目前正在尝试制作一个方便的工具，你看我是一名网络管理员，我的老板告诉我他希望我监控网络并阻止某些网站和某些游戏服务器的 IP，所以对于监控部分，我们将进行将网络上的所有流量重定向到服务器，我们可以在将流量发送到网关之前对其进行监控。

为此，我们将在 linux 中使用 arpspoof，我已经完成了一个阻止站点和服务器的解决方案，我要做的是一个 GUI，它让我更容易处理和控制这些事情，当我尝试使用 ProcessBuilder 从 java 运行 arpspoof 它不起作用并且我没有输出？

它也不会进入while循环。我真的想不出更多要写的 atm，但如果我能想到更多，我会更新这个线程。

我的代码：

```
new Thread() {
        public void run() {
            try {
                System.out.println("running arpspoof...");
                Process prb = new ProcessBuilder("gksudo", "arpspoof", "-i", "wlan0", Gateway).start();
                InputStream is = prb.getInputStream();
                InputStreamReader isr = new InputStreamReader(is);
                BufferedReader br = new BufferedReader(isr);

                String line;

                while ((line = br.readLine()) != null) {
                    System.out.println("Output: " + line);
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }.start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T02:23:33.960

I have never used gksudo, but I googled it and it says it's a GUI version of sudo. I'm guessing that you just launched a GUI app which does not write anything to stdout and which does not return. If so, then the code is doing what I would expect. It is blocking until the process writes a line of text that it can read - which never occurs so it blocks indefinitely.

First test your ProcessBuilder code using a trivial command like "echo" to make sure your Java code is working as expected. Then work your way back. Try running your program as root so you don't need the sudo argument and see if that works. Then finally try to run it using sudo instead of gksudo.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T02:50:45.013

我认为@user 走在了正确的轨道上，但还有其他一些可能的解释。

1.  gksudo 命令可能要求输入密码。我不确定它会问到哪里，但很有可能它不会是“gksudo”进程的“stdout”流。

2.  如果“gksudo”或您正在使用“gksudo”的命令无法启动，它很有可能会将错误消息写入其“stderr”流。但是您不是在阅读“stderr”。

为了帮助诊断这一点，您需要尝试以下操作：

*   查看“sudo”的日志文件 - 在我的盒子上是“/var/log/secure”。
*   使用“ps -efl”（或类似的）来查看在您的应用程序被阻塞等待输出时存在哪些进程。（如果发生这种情况......）
*   查看“gksudo”是否在意想不到的地方提示输入密码。
*   尝试**临时**调整“sudoers”文件以允许“arpspoof”命令在没有密码的情况下被“sudo”编辑。

# mysql - 如何将值插入到两个内置外键关系的表中？

> ID：12764985
> 
> 赞同：0
> 
> 时间：2012-10-07T00:07:19.913
> 
> 标签：mysql, foreign-key-relationship

如下所示的 2 个表结构（由 生成`sequel pro`）：

问题表：

```
CREATE TABLE `question` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(128) NOT NULL DEFAULT '',
  `content` text NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

答案表：

```
CREATE TABLE `answer` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `question_id` int(11) unsigned NOT NULL,
  `content` text NOT NULL,
  PRIMARY KEY (`id`),
  KEY `question_id` (`question_id`),
  CONSTRAINT `answer_ibfk_1` FOREIGN KEY (`question_id`) REFERENCES `question` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

现在，当我想插入答案时：

我可以做类似的事情：

INSERT INTO answer( `content`) JOIN question( `title`, `content`) VALUE('Ironman',"favourite characters","Avanger 中你最喜欢的角色是谁？");

或者有没有更好的方法来做类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T00:36:18.000

做到这一点的最好方法是以某种方式保留问题 id 并使用它来插入答案。如果没有其他方法，您可以执行以下操作：

```
INSERT INTO answer(content, question_id) 
VALUES('Ironman', (select id 
                     from question 
                    where title ='favourite characters' 
                      and content = 'Who is your favourite characters in Avanger?')); 
```

# python - 佳能 SDK 灯泡模式命令引发错误 44313 (0xAD19)

> ID：12764990
> 
> 赞同：2
> 
> 时间：2012-10-07T00:08:49.677
> 
> 标签：python, sdk, photo

我正在使用[pyEDSDK](http://sourceforge.net/projects/pyedsdk/)（佳能 sdk 的 python 包装器）来控制 Rebel T1i。它主要工作 - 我可以拍照并将图像保存到硬盘驱动器，但是当我尝试发送 start_bulb 命令时它搞砸了。

实际上， start_bulb 完美无缺。快门打开，相机开始拍摄图像。问题是当我发送bulb_stop 命令时我无法让它停止。

为了让 start_bulb 工作，我必须手动将相机更改为灯泡模式。也许我缺少一些设置？或者某种灯泡模式的初始化代码？

我将固件从 0.9 更新到 1.1，但没有任何效果。

其他一些人也有类似的经历： [http ://forums.dpreview.com/forums/thread/2858921#forum-post-36169599](http://forums.dpreview.com/forums/thread/2858921#forum-post-36169599) [http://tech.dir.groups.yahoo.com/group/CanonSDK/message/921](http://tech.dir.groups.yahoo.com/group/CanonSDK/message/921)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:23:41.313

我在这里找到了答案：http: [//tech.dir.groups.yahoo.com/group/CanonSDK/message/1711](http://tech.dir.groups.yahoo.com/group/CanonSDK/message/1711)

出于某种原因，T1i 相机的工作方式与其他相机不同。下面的代码在两秒钟后成功关闭了快门。

```
print "started"
self.SendCommand(kEdsCameraCommand_PressShutterButton, kEdsCameraCommand_ShutterButton_Completely_NonAF)
sleep(2)
self.SendCommand(kEdsCameraCommand_PressShutterButton)
print "finished" 
```

如果有人有机会在其他模型上进行测试，我很想听听。我想知道这种方法是否适用于他们。

# javascript - 如何在EventListener设置变量后创建一个返回值的函数？

> ID：12764992
> 
> 赞同：0
> 
> 时间：2012-10-07T00:09:21.080
> 
> 标签：javascript, asynchronous, callback, dom-events

我有一个`EventListener`和一个函数`generator.gettext`。代码：

```
var generator = {
    gettext: function (mytext) {
        //I send a message which is intercepted by my content script. 
        //Later my content script will send a reply back which will be processed by 'receiver'
        window.postMessage({
            type: "MESSAGE",
            text: mytext
        }, "*");
        while (generatedtext == "") {
            //WAIT until generatedtext is set by 'receiver'
        }
        return generator.generatedtext;
    },

    generatedtext: ""
};

function receiver(event) {
    if (event.data.type && (event.data.type == "FROM_CONTENTSCRIPT")) {
        generator.generatedtext = event.data.text;
    }
}
window.addEventListener('message', receiver, false); 
```

我希望它`generator.gettext`返回`generator.generatedtext`，但我不能让它等到`receiver`设置它。我的印象`EventListener`是在被调用时被锁定`generator.gettext`。我必须对其进行更改，使其变为异步并使用回调参数，但我是新手，不知道如何使其工作。有人可以帮助我吗？

**编辑：**我想做的是处理网站上的输入。有一个 Javascript 文件，我希望该输入由我的内容脚本处理。我将 javascript 文件重定向到硬盘驱动器上的修改文件。我更改了 javascript 加载输入的行。当我提交文本时，Javascript 文件调用类似于`var message = generator.gettext(mytext.value);`我上面的代码的东西被注入到页面中，并且必须将 mytext 发送到我的内容脚本，并且必须返回我的内容脚本的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T01:03:23.483

我想我明白你在问什么，虽然不是很清楚。

您正在发布一条消息，并且希望将结果存储在 generator.generatedtext 上。你已经在这样做了。

```
var generator = {
    generatedtext:'',
    gettext: function (mytext) {
        window.postMessage({
            type: "MESSAGE",
            text: mytext
        }, "*");
    }
};

window.addEventListener('message', function(ev){
    if (event.data.type && (event.data.type == "FROM_CONTENTSCRIPT")) {
        generator.generatedtext = event.data.text;
    }
},false); 
```

除非您正在尝试做其他一些用途但没有明确说明，否则这就是您所需要的。没有必要让 generator.gettext() 返回任何东西，因为消息事件侦听器正在将接收到的消息分配给 generator.generatedtext。

如果这不是您想要的，请发表评论并提供更多详细信息，我会尽力帮助您。

# php - 将 SOAP 客户端从 PHP5 转换为 PHP4/nuSOAP 时出现 WSDL 错误

> ID：12764993
> 
> 赞同：1
> 
> 时间：2012-10-07T00:09:28.453
> 
> 标签：php, soap, nusoap, porta-one

好吧，我已经厌倦了为此绞尽脑汁，所以希望这里有人能启发我：

我正在尝试使用 PHP 和 nuSOAP 访问 SOAP 服务。虽然我已经使用 PHP5 的内置 SoapClient 成功访问了该服务，但不幸的是，我仅限于 PHP4，并且使用的是 nuSOAP；导致我无法弄清楚的 WSDL 错误。

PHP5 代码（有效）：

```
 $wsdl= 'https://mybilling.hipointinc.com:8443/wsdl.fcgi?get=Session.xsd';
   $soap_client = new SoapClient($wsdl, array('trace'=>1));

   $args = array("login" => $account_id, "password" => $password, "domain" => $domain);
   $session = $soap_client->login($args); 
```

nuSOAP 代码（不起作用）：

```
 $wsdl= 'https://mybilling.hipointinc.com:8443/wsdl.fcgi?get=Session.xsd';
   $namespace = 'https://mybilling.hipointinc.com/UM/SOAP/Session';
   $soap_client = new soapclient($wsdl, true, null, $namespace);

   $args = array("login" => $account_id, "password" => $password, "domain" => $domain);
   $session = $soap_client->call('login', array($args)); 
```

这将返回以下错误：

```
 wsdl error: http://schemas.portaone.com/soap:LoginRequest (LoginRequest) is not a supported type. 
```

为什么 PHP5 版本可以工作，而 nuSOAP 版本不行？我确定这只是我忽略的一些愚蠢的事情，但我会很感激一些帮助。

有关更多信息，我正在使用 Porta Switch，PortaBilling XML API：[文档](http://portaone.com/resources/docs/PortaSwitch/m-r-28/PortaSwitch_Interfaces_MR28.pdf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T04:40:28.733

好的，在进一步探索之后，我终于得到了答案：我必须升级我正在使用的 nuSOAP 库的版本。原来我有一个旧版本，只需更新该版本即可解决问题（叹气）我知道这很愚蠢，但对于你们中的任何一个未来通过谷歌在此线程上发生的编码人员：从我的错误中吸取教训，并确保您正在使用的资源是最新的。

# javascript - 在 javascript 界面中旋转按钮

> ID：12764994
> 
> 赞同：1
> 
> 时间：2012-10-07T00:09:39.287
> 
> 标签：javascript, html, canvas

请看看[这个](http://pulsewave.net/player)页面

尝试单击面板上的一个大按钮并在 y 轴上移动鼠标。按钮开始按应有的方式旋转。现在，离开你的鼠标并再次点击它们：他们为什么坚持要回到原来的位置？！

这是与按钮旋转相关的代码片段。请注意，在绘图循环中执行的代码每 30 毫秒调用一次。

```
// method
Button.prototype.Rotate = function(yDrag){
this.rotation =  - (yDrag - this.rotationYClick) / 80 
}

// draw loop
function drawLoop() {

if (buttons[n].roating == true && mousePressed == true)
buttons[n].Rotate(mousePosition_y)
else
buttons[n].roating = false
} // end draw loop

// fired ONLY ONCE when mouse is clicked
function mouseDown() {
buttons[n].roating = true
buttons[n].rotationYClick = mousePosition_y
} 
```

我故意避免发布大部分代码，因为我确信问题在于这些行。

代码说明：当你点击一个按钮时，鼠标的位置存储在`rotationYClick`类的变量中`Button`。当您拖动鼠标时，鼠标位置会不断与存储的值进行比较：当前鼠标位置与您单击的点的距离将决定按钮旋转多少。问题是，当您再次单击它时，旋转设置回零。怎么解决？！

[这](http://pulsewave.net/player/try.html)是我通过更改方法失败的尝试之一

```
// method
Button.prototype.Rotate = function(yDrag){
this.rotation +=  - (yDrag - this.rotationYClick) / 80 
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T00:13:06.867

你在哪里设置 this.rotation。使用 += 而不是 =

问题是您重新评估每次拖动时的旋转，而不考虑按钮的当前旋转角度。

**编辑**

好的，所以它不是*那么*简单:) 基本上你必须保留两个变量。一个代表原始旋转角度，一个代表当前旋转。所以，它变成了这样：

```
this.rotation = this._originalRotation - ((yDrag-this.rotationYClick)/80); 
```

并`mouseDown`变成：

```
// fired ONLY ONCE when mouse is clicked
function mouseDown() {
    buttons[n].roating = true
    buttons[n].rotationYClick = mousePosition_y
    buttons[n]._originalRotation = this.rotation;
} 
```

# python - Python，覆盖继承的类方法

> ID：12764995
> 
> 赞同：52
> 
> 时间：2012-10-07T00:11:08.757
> 
> 标签：python, inheritance, methods, super, overwrite

我有两个班，`Field`和`Background`。它们看起来有点像这样：

```
class Field( object ):
    def __init__( self, a, b ):
        self.a = a
        self.b = b
        self.field = self.buildField()

    def buildField( self ):
        field = [0,0,0]
        return field

class Background( Field ):
    def __init__( self, a, b, c ):
        super(Background, self).__init__( a, b )
        self.field = self.buildField( c )

    def buildField( self, c ):
        field = [c]
        return field

a, b, c = 0, 1, 2
background = Background( a, b, c ) 
```

此错误指向字段的`buildField()`：

```
"TypeError: buildField() takes exactly 2 arguments (1 given)." 
```

我希望首先调用Background **init ()。**将“a，b”传递给Fields **init** ()，Field分配a和b，然后将一个包含三个0的列表分配给field。然后让Background 的**init** () 继续，然后调用它自己的buildField() 并用包含c 的列表覆盖self.field。

似乎我并不完全理解 super()，但是在查看了网络上和此处的类似继承问题后，我无法找到解决我的问题的方法。

我期望像 c++ 这样一个类可以覆盖继承的方法的行为。我怎样才能做到这一点或类似的东西。

我发现与此相关的大多数问题都是使用双下划线的人。我对 super 继承的经验是使用继承的类**init** () 将不同的变量传递给超类。没有涉及覆盖任何内容。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-07T00:35:03.947

> 我希望调用后台 init()。将 "a, b" 传递给 Fields init()，Field 以分配 a 和 b

到目前为止，一切都很好。

> 然后将其中包含三个 0 的列表分配给字段。

啊。这就是我们得到错误的地方。

```
 self.field = self.buildField() 
```

即使这条线出现在`Field.__init__`,`self`也是 的一个实例`Background`。所以`self.buildField`找到`Background`'s`buildField`方法，而不是`Field`'s.

由于`Background.buildField`需要 2 个参数而不是 1 个参数，

```
self.field = self.buildField() 
```

引发错误。

* * *

那么我们如何告诉 Python 调用`Field`'`buildField`方法而不是`Background`' 呢？

[名称修饰](http://docs.python.org/reference/expressions.html#atom-identifiers)（使用双下划线命名属性）的目的是解决这个确切的问题。

```
class Field(object):
    def __init__(self, a, b):
        self.a = a
        self.b = b
        self.field = self.__buildField()

    def __buildField(self):
        field = [0,0,0]
        return field

class Background(Field):
    def __init__(self, a, b, c):
        super(Background, self).__init__(a, b)
        self.field = self.__buildField(c)

    def __buildField(self, c):
        field = [c]
        return field

a, b, c = 0, 1, 2
background = Background(a, b, c) 
```

方法名称`__buildField`被“损坏”到`_Field__buildField`inside`Field`所以 inside `Field.__init__`，

```
 self.field = self.__buildField() 
```

调用`self._Field__buildField()`，这是`Field`的`__buildField`方法。虽然同样，

```
 self.field = self.__buildField(c) 
```

内部`Background.__init__`调用`Background`的`__buildField`方法。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-10-07T00:32:32.217

从 C++ 的角度来看，这里可能存在两个误解。

首先，具有相同名称和不同签名的方法不会像在 C++ 中那样重载它。如果您的 Background 对象之一尝试在没有参数的情况下调用 buildField，则不会调用 Field 的原始版本——它已被完全隐藏。

第二个问题是，如果超类中定义的方法调用 buildField，则会调用子类版本。在 python 中，*所有*方法都是动态绑定的，就像 C++`virtual`方法一样。

Field`__init__`应该处理一个具有不带参数的 buildField 方法的对象。您将该方法与一个具有一个带有一个参数的 buildField 方法的对象一起使用。

问题`super`是它不会改变对象的类型，所以你不应该改变超类方法可能调用的任何方法的签名。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-10-07T00:17:54.673

> 我希望调用后台 init()

实际上`Background init()`是被调用..

但是**看看你的背景类..**

```
class Background( Field ):
    def __init__( self, a, b, c ):
        super(Background, self).__init__( a, b )
        self.field = self.buildField( c ) 
```

因此，第一个语句`__init__`是调用`super class(Field)`init 方法.. 并传递`self`as 参数.. 现在这`self`实际上是`Background class`..的引用

**现在在您的 Field 课程中：-**

```
class Field( object ):
    def __init__( self, a, b ):

        print self.__class__  // Prints `<class '__main__.Background'>`
        self.a = a
        self.b = b
        self.field = self.buildField() 
```

您的`buildField()`方法实际上是在调用 Background 类中的那个。这是因为，`self`这里是`Background`类的实例（尝试`self.__class__`在您的`__init__`方法中打印`Field class`）。当您在调用`__init__`方法时从`Background`类中传递它时。

**这就是为什么你得到错误..**

> 错误“TypeError: buildField() 正好需要 2 个参数（给定 1 个）。

因为你没有传递任何值。所以，只有传递的值是隐含的`self`。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-07T00:31:03.033

将`super(Background, self).__init__( a, b )`调用：

```
def __init__( self, a, b ):
    self.a = a
    self.b = b
    self.field = self.buildField() 
```

在`Field`. 但是，`self`这里指的是`background`实例，`self.buildField()`实际上是调用`buildField()`，`Background`这就是您收到该错误的原因。

* * *

似乎您的代码应该更好地编写为：

```
class Field( object ):
    def __init__( self, a, b ):
        self.a = a
        self.b = b
        self.field = Field.buildField()

    @classmethod
    def buildField(cls):
        field = [0,0,0]
        return field

class Background( Field ):
    def __init__( self, a, b, c ):
        super(Background, self).__init__(a, b)
        self.field = Background.buildField(c)

    @classmethod
    def buildField(cls,c):
        field = [c]
        return field

a, b, c = 0, 1, 2
background = Background( a, b, c ) 
```

如果您不能让基础构造函数完成，则表明设计存在缺陷。

因此，如果*必须*在构造函数中调用这些方法，最好使用[装饰器](http://docs.python.org/library/functions.html#classmethod)或来区分`buildField()`属于该类。[`classmethod`](http://docs.python.org/library/functions.html#classmethod)[`staticmethod`](http://docs.python.org/library/functions.html#staticmethod)

 *但是，如果您的基类构造函数没有从内部调用任何实例方法，那么您可以安全地覆盖此基类的任何方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-27T12:58:46.197

`Overriding`被谈论过，但对我来说听起来很像`chaining constructors or (methods)`

而且这听起来像**覆盖**属性：

让我解释：

*   一个名为**field**的属性将被初始化为`[0,0,0]`. `@property`装饰器看起来更合适。

*   然后，`Background`类**覆盖**这个属性。

* * *

### 快速而肮脏的解决方案

我不知道你的业务逻辑，但有时绕过超类的`__init__`方法给了我更多的控制权：

```
#!/usr/bin/env python

class Field( object ):
    def __init__( self, a, b ):
        self.a = a
        self.b = b
        self.field = self.buildField()

    def buildField( self ):
        field = [0,0,0]
        return field

class Background( Field ):
    def __init__( self, a, b, c ):
        # super(Background, self).__init__( a, b )
        # Unfortunately you should repeat or move initializing a and b
        # properties here
        self.a = a
        self.b = b

        self.field = self.buildField( c )

    def buildField( self, c ):
        # You can access super class methods 
        assert super(Background, self).buildField() == [0,0,0]
        field = [c]
        return field

a, b, c = 0, 1, 2
bg = Background(a,b,c)
assert bg.field == [2] 
```

* * *

### 使用属性

有更干净的语法。

```
#!/usr/bin/env python

class Field( object ):

    @property
    def field(self):
        return [0,0,0]

    def __init__( self, a, b ):
        self.a = a
        self.b = b

class Background( Field ):
    def __init__( self, a, b, c ):
        super(Background, self).__init__( a, b )
        self.c = c

        assert  (self.a, self.b, self.c) == (0,1,2)  # We assigned a and b in 
                                                   # super class's __init__ method

        assert super(Background, self).field == [0,0,0]
        assert self.field == [2]

    @property
    def field(self):
        return [self.c]

a, b, c = 0, 1, 2

background = Background( a, b, c )

print background.field 
```*

# vim - 在 Vim 中为 :make、:grep 等的输出着色

> ID：12764999
> 
> 赞同：26
> 
> 时间：2012-10-07T00:11:39.677
> 
> 标签：vim, makefile, grep, vi

在 Vim 中使用`:make`命令构建我的应用程序时，输出未着色。我已将 makefile 配置为使用 clang 作为 C 编译器，并且在`make`Vim 外部运行或运行时`:!make`，clang 的输出是彩色的。`:set makeprg`返回`makeprg=make`，仅供参考。

我有同样的问题`grep`：运行时`:grep`，输出未着色；运行时`:!grep`，它是。我尝试使用`--color`带有 的选项`:grep`，但无济于事。`:set grepprg`返回`grepprg=grep -n $* /dev/null`。

我已经阅读了[以彩色打印的 VIM Unix 命令](https://stackoverflow.com/questions/6126575/vim-unix-commands-printed-in-color)以及[How to color my vimgrep result patterns](https://stackoverflow.com/questions/703336/vim-how-to-color-my-vim-grep-result-patterns)。前者似乎有相反的问题（即`:!command`输出未着色）；后者除了下降到外壳之外别无选择，我认为这不是解决该问题的“正确”解决方案。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-07T19:09:59.373

问题是，当 Vim 通过`:make`or运行其他命令时`:grep`，这些命令没有为它们的标准输出获得终端——从某种意义上说，对它们来说[isatty](http://linux.die.net/man/3/isatty) (STDOUT_FILENO) 是错误的——因为 Vim 正在捕获输出到显示在终端上。另一方面，当您使用`:!make`or**时**`:!grep`，标准输出只会发送到终端。

 **默认情况下 Clang 并且`grep --color=auto`（这可能是您将其命名为别名的方式）使用 stdout 的终端性来决定是否对它们的输出进行着色。这很方便，因为您可以在终端上获得彩色输出，但在将输出重定向到文件时只捕获文本——所有这些都不需要添加额外的命令行选项。

所以你想要做的是覆盖这些命令的通常智能，以便它们总是着色它们的输出。

对于`grep`，你可以在 Vim`--color=always`中运行时使用：`:grep`

```
:set grepprg=grep\ --color=always\ -n\ $*\ /dev/null 
```

并且根据您的颜色设置和版本，`grep`它会运行得很好。

对于 clang，您可以更改要使用的 Makefile 以`clang -fcolor-diagnostics`强制[着色](http://clang.llvm.org/docs/UsersManual.html#opt_fcolor_diagnostics)或更灵活地添加一个额外的变量，当在 Vim`$(CC)`中运行时将覆盖该变量：`:make`

```
:set makeprg=make\ EXTRA_CFLAGS=-fcolor-diagnostic 
```

但是（至少在 clang 3.0 和 vim 7.3 中）你会发现 clang 的着色风格会阻止 Vim 从诊断中选择文件名和行号，所以这样做会破坏使用`:make`而不是`:!make`.

你可以教 Vim 从周围的 ANSI 转义序列中挑选文件名等，通过在 Vim 的`errorformat`选项中添加更多条目来匹配彩色的 clang 样式诊断。（同样，`grepformat`如果您的`grep`着色为文件名或行号着色。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-20T13:47:48.763

当您运行`:grep`or `:make`（与`:!grep`or相对`:!make`）时，输出不仅显示在终端中，而且还发送到处理它的*快速修复窗口*。您可以使用 vim-command 访问快速修复窗口`:copen`。快速修复窗口本质上是一个以只读模式打开的文本文件。与任何其他文本文件一样，快速修复文件不支持颜色。相反，它们用转义字符表示，例如`[01;34m`. `make`因此，从(or )生成彩色输出`grep`会弄乱输出，因为它显示在快速修复窗口中，即使您可以让 vim 处理它，并将光标发送到选定的错误/警告/查找消息。

*现在输出*是否着色的问题变得有点微妙：我建议终端输出应该保持不着色，但快速修复输出应该着色。快速修复窗口中的配色方案不是由文件本身中的任何颜色指示定义的，而是在文件（在我的计算机上） 中定义的快速修复窗口的*语法突出显示中。*中定义的配色方案不会为快速修复窗口添加太多颜色，但可以通过创建文件来扩展语法高亮方案。我与和/或编译器结合使用 ，并通过以下内容获得漂亮的结果 ：`qf.vim``/usr/share/vim/vim81/syntax/qf.vim``qf.vim``~/.vim/syntax/after/qf.vim``cmake``gnu``intel``~/.vim/syntax/after/qf.vim`

```
syn match qBuilt            "Built target *" nextgroup=qTarget
syn match qTarget           ".*$"   contained

syn match qEnteringLeaving  ": \(Entering\|Leaving\) directory *" nextgroup=qdSeparator
syn match qdSeparator       "'"     nextgroup=qdName contained
syn match qdName            "[^']*" contained

syn match qbProgress        "\[ *[0-9]*%\]"
syn match qBuild            "Building .* object"
syn match qWarn             "warning\( *#[0-9]*\|\):"
syn match qError            "error\( *#[0-9]*\|\):"
syn match qRemark           "remark\( *#[0-9]*\|\):"

hi def link qTarget          Constant
hi def link qError           Error
hi def link qWarn            Error
hi def link qRemark          WarningMsg
hi def link qEnteringLeaving Keyword
hi def link qBuild           Keyword
hi def link qBuilt           Keyword
hi def link qdName           Include
hi def link qbProgress       Special 
```**