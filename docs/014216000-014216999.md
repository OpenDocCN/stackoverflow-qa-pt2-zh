# StackOverflow 问答 14216000-14216999

# sql-server - 使 sql server 脚本文件夹名称动态化

> ID：14216002
> 
> 赞同：0
> 
> 时间：2013-01-08T13:28:14.673
> 
> 标签：sql-server, dynamic

我一直在尝试从包含多个 sql 脚本的文件夹中执行 SQL 脚本。这些脚本将创建一个完整的数据库，因此我想按顺序执行脚本，因此我编写了此代码并将其放入脚本中。

```
:r c:\Scripts\CREATE_TABLE1.sql -- sql file to create first table
:r c:\Scripts\CREATE_TABLE2.sql -- sql file to create second table 
:r c:\Scripts\CREATE_TABLE3.sql -- sql file to create third table 
```

它工作正常，我只需要使文件夹名称动态化，这样我们就可以通过在顶部创建一个变量来轻松更改文件夹名称，并将其与每个文件名一起使用。我探索了一些选择，但没有找到太多，最终得到了这样的结果。但这不起作用。

```
Declare @FolderName varchar(100)
set @FolderName='C:\Scripts\'
:r @FolderName+'CREATE_TABLE1.sql -- create first table
:r @FolderName+'CREATE_TABLE2.sql -- create second table
:r @FolderName+'CREATE_TABLE3.sql -- create third table 
```

但它会在文件夹名称后的第一个 r 命令附近引发错误语法。有人请告诉我如何解决它或一些解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:46:05.757

您可以使用`setvar`& `$()`;

```
:setvar FolderName "C:\Scripts"
:r $(FolderName)\CREATE_TABLE1.sql'
:r $(FolderName)\..... 
```

# visual-studio-2010 - 深色主题上的 Visual Studio 工具提示前景

> ID：14216012
> 
> 赞同：2
> 
> 时间：2013-01-08T13:28:55.413
> 
> 标签：visual-studio-2010, devexpress, resharper, background-foreground, productivity-power-tools

我最近将 Windows 7 的主题更改为*高对比度黑色*，我在 Visual Studio 中的工具提示有一些问题，如果我单击类或变量，我有一个前景黑色和背景黑色的工具提示，所以我无法阅读。

![在此处输入图像描述](../Images/0e965e5b87e9b4c1f908ed95310461ee.png)

有关信息，我使用*Productivity Power Tools*和*Resharper*和*Dev Express*。

我知道在环境>字体和颜色中我可以编辑属性，但我不知道该选择哪个。

# java - 在 Google App Engine 上，是否可以在不使用参数化查询的情况下使用 JDOQL 日期？

> ID：14216015
> 
> 赞同：0
> 
> 时间：2013-01-08T13:28:57.437
> 
> 标签：java, google-app-engine, jdo

是否可以在 JDOQL 中进行日期查询，而无需在 Google App Engine 上使用参数化查询。

我正在尝试编写一些看起来像这样的通用代码，其中条件只是一个字符串，并且我希望能够指定任何内容 - 这段代码不需要对底层数据了解太多。

```
Query query = pm.newQuery(tClass);
        if (criteria!=null) {
            query.setFilter(criteria);
        } 
```

标准可以是“startdate = 'someproperlyformatteddatetime'”

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:12:21.400

当然，[GAE JDO 查询](https://developers.google.com/appengine/docs/java/datastore/jdo/queries)支持 JDOQL。您可以简单地执行以下操作：`q.setFilter("height <= 200")`或者`q.setFilter("name == 'Smith'")`，您可以在其中以编程方式组装 JDOQL 过滤器字符串。唯一的缺点是您需要知道参数的类型（保存在 Datastore 中），因为字符串需要用单引号或双引号括起来。

请注意，[对查询的所有限制](https://developers.google.com/appengine/docs/java/datastore/queries#Restrictions_on_Queries)仍然适用。

此外，如果您想查询[同时使用不等式运算符的多个属性](https://developers.google.com/appengine/docs/java/datastore/indexes#Index_Definition_and_Structure)，则需要事先[定义复合索引。](https://developers.google.com/appengine/docs/java/config/indexconfig)

**更新：** JDOQL 文字参数规范适用于字符串和数值；所有其他值类型必须使用参数替换。您仍然可以以编程方式执行此操作。

另一种解决方法是，如果您使用`long`而不是`Date`将日期转换为 UNIX 时间戳（类型为 long）。

# android - 为什么在 main.xml 中默认给出相对布局

> ID：14216016
> 
> 赞同：2
> 
> 时间：2013-01-08T13:29:01.023
> 
> 标签：android, android-layout, android-linearlayout, android-relativelayout

我已经看到了不同之处，即在最新的 android SDK 版本中，main.xml 文件中给出的默认布局是相对布局。

这背后的原因是什么..是否建议使用相对布局而不是线性布局？如果是...请解释..

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:34:31.363

为我们的 UI 编程提供更多的灵活性和自由度。

**LinearLayout**水平或垂直（行与列）并排排列元素。

**RelativeLayout**是一个布局管理器，可帮助您根据某些规则排列 UI 元素。您可以指定 thisngs，例如：将其与父级左边缘对齐，将其放置在此元素的左侧/右侧等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:36:53.140

随着移动应用程序使用更多交互和复杂的 UI，RelativeLayout 有助于构建这些 UI，并通过提供如此多的标签来显着减少布局层次结构。

这也提高了应用程序的性能。

# objective-c - CoreData：将 MagicalRecord 与 FetchedResultsController 和自定义 sortDescriptor 一起使用

> ID：14216022
> 
> 赞同：2
> 
> 时间：2013-01-08T13:29:35.920
> 
> 标签：objective-c, ios, core-data, magicalrecord

我刚刚开始使用[MagicalRecord 库](https://github.com/magicalpanda/MagicalRecord)，以便更轻松地使用 CoreData。我正在使用 FRC，但不知道如何使用自定义 sortDescriptor 进行设置，例如

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]
                        initWithKey:@"someAttribute"
                          ascending:YES
                           selector:@selector(localizedCaseInsensitiveCompare:)]; 
```

目前我检索 FRC 的电话是这样的：

```
_fetchedResultsController = [Language MR_fetchAllSortedBy:@"someAttribute"
                                                ascending:YES
                                            withPredicate:nil
                                                  groupBy:nil
                                                 delegate:self]; 
```

似乎我正在寻找一种“简单”地将**自定义选择器**添加到 MR_fetchAllSortedBy 的方法。就像是：

```
_fetchedResultsController = 
       [Language MR_fetchAllSortedBy:@"someAttribute"
                           ascending:YES
                            selector:@selector(localizedCaseInsensitiveCompare:)
                       withPredicate:nil
                             groupBy:nil
                            delegate:self]; 
```

谁能给我一些关于如何实现这一目标的指示？使用类别可能吗？

提前致谢，

乔斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T05:51:00.227

我今天遇到了完全相同的问题。您不能通过 MR_FindAll 方法设置自定义排序描述符，但您可以创建自己的 fetch 请求，同时仍然利用 Magical Records 样板代码：

```
NSFetchRequest *fetchRequest = [Sites MR_createFetchRequest];
fetchRequest.sortDescriptors = @[[[NSSortDescriptor alloc] initWithKey:@"title" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)]];

self.sitesArray = [NSManagedObject MR_executeFetchRequest:fetchRequest]; 
```

# javascript - Previous Next in Javascript

> ID：14216024
> 
> 赞同：2
> 
> 时间：2013-01-08T13:29:40.507
> 
> 标签：javascript, jquery, html

I am trying to implement previous next functionality in Javascript but it only gives me the next element.

I have used currentItemIndex as the reverence to start for the buttons. I am starting from 5th Item and on click of next button I am trying to get 6th, 7th 8th and so on. and vice versa for previous button.

```
<!DOCTYPE html>
<html>
<head>
    <title>Previous Next Functionality</title>
    <script type="text/javascript">

    var myItemObjectArray = new Array();
    var currentItemIndex = 5;

    alert("CURRENT ITEM INDEX " + currentItemIndex);
    for(i=0;i<10;i++)
        {
            var ItemCatalog = new Object();

            ItemCatalog.itemId = i;
            ItemCatalog.itemName = "a"+i;

            myItemObjectArray.push(ItemCatalog);
            /*alert("OBJECT ADDED " + myItemObjectArray.length);*/
        }

    function getPrevious(currentItemIndex, myItemObjectArray)
        {
            var localCurrentItemIndex = currentItemIndex-1;
            alert("PREVIOUS OBJECT" + myItemObjectArray[localCurrentItemIndex].itemId + " " + myItemObjectArray[localCurrentItemIndex].itemName);

            // Modify Current Item Index
            currentItemIndex--;
            alert(currentItemIndex);
        }   

    function getNext(currentItemIndex, myItemObjectArray)
        {
            var localCurrentItemIndex = currentItemIndex+1; 
            alert("NEXT OBJECT" + myItemObjectArray[localCurrentItemIndex].itemId + " " + myItemObjectArray[localCurrentItemIndex].itemName);
            // Modify Current Item Index
            currentItemIndex++;
            alert(currentItemIndex);
        }   
    </script>
</head>

<body>
    <button id="previous" onclick="getPrevious(currentItemIndex, myItemObjectArray)">Previous</button>
    <button id="next" onclick="getNext(currentItemIndex, myItemObjectArray)">Next</button>
</body>
</html> 
```

The same element keeps getting repeated.

Ankit

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T13:37:17.033

The problem is that your getNext and getPrevious functions have a parameter named `currentItemIndex`, matching the global variable you are trying to use as your maintained index counter. It's an integer, so it's passed by value, not by reference.

Because of this, when you do `currentItemIndex++` or `currentItemIndex--`, you are changing the value of the parameter variable, NOT the global variable.

Change the name of the global variable and the corresponding increment/decrement lines at the end of the functions to match, or the name of the parameter in those two functions and the first line to match.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:37:00.710

The currentItemIndex in functions getPrevious()/getNext() is passed-by-value not by-variable/by-reference. The modifications to currentItemIndex within these functions do not propagate back to the actual parameter that you pass when the function exits.

Typical alternatives involve either:

*   using the function return to pass back the next or prev index value together with an assignment in the code that calls these functions; OR
*   creating an object that incorporates the list and a cursor, that records the position of the cursor in its state, which can be modified by methods for prev()/next()

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T13:39:59.743

My version [DEMO](http://jsfiddle.net/mplungjan/MbnXf/)

Removed onclicks and put them in the head

Change show to do whatever it is you need the function to do

HTML

```
<button id="previous">Previous</button>
<span id="curidx"></span>
<button id="next">Next</button> 
```

JavaScript

```
function show() { 
  var item = myItemObjectArray[currentItemIndex];
  document.getElementById("curidx").innerHTML=item.itemId+":"+item.itemName
  document.getElementById("previous").disabled=currentItemIndex<=0;
  document.getElementById("next").disabled=currentItemIndex>=myItemObjectArray.length-1;

}

var myItemObjectArray = new Array();
var currentItemIndex = 5;
window.onload=function() {
  document.getElementById("previous").onclick=function() {
    currentItemIndex--;
    if (currentItemIndex<=0) {
      currentItemIndex=0;
    }
    show();       
  }
  document.getElementById("next").onclick=function() {
    currentItemIndex++;
    if (currentItemIndex>=myItemObjectArray.length-1) {
      currentItemIndex=myItemObjectArray.length-1;
    }
    show();       
  }
  for(i=0;i<10;i++) {
    var ItemCatalog = new Object();
    ItemCatalog.itemId = i;
    ItemCatalog.itemName = "a"+i;
    myItemObjectArray.push(ItemCatalog);
  }
  show();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T13:41:25.457

```
function getNext(currentItemIndex, myItemObjectArray) 
```

with that function declaration you have a local (parameter) variable `currentItemIndex`. With the line

```
currentItemIndex++; 
```

you now only modify that local variable, not the global value. Just omit it and it will work.

Or use this:

```
var myItemObjectArray = [];
for (i=0;i<10;i++)
    myItemObjectArray.push( {itemId: i, itemName:"a"+i} );
var currentItemIndex = 5;

function getPrevious() {
    currentItemIndex--; // the global variable
    show(currentItemIndex, myItemObjectArray);
}
function getNext() {
    currentItemIndex++; // the global variable
    show(currentItemIndex, myItemObjectArray);
}

function show(index, arr) {
    alert( arr[index].itemId + " " + arr[index].itemName);
} 
```

```
<button id="previous" onclick="getPrevious()">Previous</button>
<button id="next" onclick="getNext()">Next</button> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T13:38:00.737

Follow this code

changes made 1) `onclick="getPrevious()" onclick="getNext()"` no need to pass args since they are declared as global. 2) use `currentItemIndex++;` and `currentItemIndex--;` directly at the starting of the function. as seen below.

```
<!DOCTYPE html>
<html>
<head>
    <title>Previous Next Functionality</title>
    <script type="text/javascript">

    var myItemObjectArray = new Array();
    var currentItemIndex = 5;

    alert("CURRENT ITEM INDEX " + currentItemIndex);
    for(i=0;i<10;i++)
        {
            var ItemCatalog = new Object();

            ItemCatalog.itemId = i;
            ItemCatalog.itemName = "a"+i;

            myItemObjectArray.push(ItemCatalog);
            /*alert("OBJECT ADDED " + myItemObjectArray.length);*/
        }

    function getPrevious()
        {
            currentItemIndex--;
            alert(currentItemIndex);
            alert("PREVIOUS OBJECT" + myItemObjectArray[currentItemIndex].itemId + " " + myItemObjectArray[currentItemIndex].itemName);

            // Modify Current Item Index
        }   

    function getNext()
        {
            currentItemIndex++;
            alert(currentItemIndex);
            alert("NEXT OBJECT" + myItemObjectArray[currentItemIndex].itemId + " " + myItemObjectArray[currentItemIndex].itemName);
            // Modify Current Item Index

        }   
    </script>
</head>

<body>
<button id="previous" onclick="getPrevious()">Previous</button>
<button id="next" onclick="getNext()">Next</button>
</body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T06:34:14.403

```
var myItemObjectArray = new Array();
var currentItemIndex = 5;

alert("CURRENT ITEM INDEX " + currentItemIndex);
for(i=0;i<10;i++)
    {
        var ItemCatalog = new Object();

        ItemCatalog.itemId = i;
        ItemCatalog.itemName = "a"+i;

        myItemObjectArray.push(ItemCatalog);
        /*alert("OBJECT ADDED " + myItemObjectArray.length);*/
    }

function getPrevious(currentItemIndex, myItemObjectArray)
    {
        if(currentItemIndex > myItemObjectArray.length)
                {
                    alert("THERE ARE NO MORE ITEMS TO DISPLAY");
                }
        var localCurrentItemIndex = currentItemIndex-1;
        alert("PREVIOUS OBJECT" + myItemObjectArray[localCurrentItemIndex].itemId + " " + myItemObjectArray[localCurrentItemIndex].itemName);

        // Modify Current Item Index
        modifyCurrentIndex("previous");
    }   

function getNext(currentItemIndex, myItemObjectArray)
    {
        var localCurrentItemIndex = currentItemIndex+1; 
        alert("NEXT OBJECT" + myItemObjectArray[localCurrentItemIndex].itemId + " " + myItemObjectArray[localCurrentItemIndex].itemName);
        // Modify Current Item Index
        modifyCurrentIndex("next");
    }   

    function modifyCurrentIndex(mode)
        {
            if(mode == "next")
                {
                    currentItemIndex = currentItemIndex + 1;
                } else if(mode == "previous")
                    {
                        currentItemIndex = currentItemIndex - 1;
                    }
        } 
```

I used a separate function to modify the global variables. I got the idea from the above solutions too.

Thanks, Ankit.

# c# - 在实体中模拟 ICollection 属性

> ID：14216027
> 
> 赞同：2
> 
> 时间：2013-01-08T13:30:00.270
> 
> 标签：c#, unit-testing, mocking, moq

我正在对我的实体执行一些单元测试，并且我在模拟一个属性时有点精神障碍。采取以下实体：

```
public class Teacher
{
    public int MaxBobs { get; set; }
    public virtual ICollection<Student> Students { get; set; }
}

public class Student
{
    public string Name { get; set; }
    public virtual Teacher Teacher { get; set; }
} 
```

我有一个`Teacher`调用方法，`AddStudent`它首先检查老师是否分配了太多名为 Bob 的学生。如果是这样，那么我会提出一个自定义异常，说太多鲍勃。该方法如下所示：

```
public void AddStudent(Student student)
{
    if (student.Name.Equals("Bob"))
    {
        if (this.Students.Count(s => s.Name.Equals("Bob")) >= this.MaxBobs)
        {
            throw new TooManyBobsException("Too many Bobs!!");
        }
    }

    this.Students.Add(student);
} 
```

我想使用**Moq**模拟对此进行单元测试——特别是我想模拟我可以将任何表达式传递给它的`.Count`方法，`Teacher.Students`它会返回一个数字，表明目前有 10 个 Bobs 分配给了那个老师。我是这样设置的：

```
[TestMethod]
[ExpectedException(typeof(TooManyBobsException))]
public void Can_not_add_too_many_bobs()
{
    Mock<ICollection<Student>> students = new Mock<ICollection<Student>>();
    students.Setup(s => s.Count(It.IsAny<Func<Student, bool>>()).Returns(10);

    Teacher teacher = new Teacher();
    teacher.MaxBobs = 1;

    // set the collection to the Mock - I think this is where I'm going wrong
    teacher.Students = students.Object; 

    // the next line should raise an exception because there can be only one
    // Bob, yet my mocked collection says there are 10
    teacher.AddStudent(new Student() { Name = "Bob" });
} 
```

我期待我的自定义异常，但我实际上得到的是`System.NotSupportedException`它推断`.Count`方法`ICollection`不是虚拟的，因此不能被模拟。我如何模拟这个特定的功能？

任何帮助总是很感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T13:35:21.330

您不能模拟`Count`您正在使用的方法，因为它是一种扩展方法。它不是定义在`ICollection<T>`.
最简单的解决方案是简单地为该属性分配一个包含 10 个 bob 的列表`Students`：

```
teacher.Students = Enumerable.Repeat(new Student { Name = "Bob" }, 10)
                             .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:46:54.450

当您可以简单地验证是否使用真实集合而不是模拟引发了异常时，无需模拟集合。由于您使用的是 MsTest 而不是 NUnit，因此不能简单地添加 ExpectedException 属性来验证是否引发了异常，但您可以执行以下操作：

```
Teacher teacher = new Teacher();
teacher.MaxBobs = 1;

teacher.Students = new Collection<Student>(); 

var hasTooManyBobs = false;
try 
{
    teacher.AddStudent(new Student() { Name = "Bob" });
    teacher.AddStudent(new Student() { Name = "Bob" });
}
catch(TooManyBobsException)
{
    hasTooManyBobs = true;
}

Assert.IsFalse(hasTooManyBobs); 
```

# c# - 在回发时保持动态添加的用户控件的状态？

> ID：14216030
> 
> 赞同：4
> 
> 时间：2013-01-08T13:30:13.097
> 
> 标签：c#, asp.net, user-controls

我有一个只包含一个文本框的用户控件，在另一个表单上我动态添加了这个用户控件，用户可以多次添加用户控件。我使用会话变量来重新创建用户控件（也许这种方法听起来不太酷）。重新创建控件后，文本框的值显然消失了。是否有任何解决方案可以在回发时维护用户控件的状态？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T14:23:17.463

If you add dynamic controls back to the control during the correct [Page Life Cycle](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx) event([`PreInit`](http://msdn.microsoft.com/en-us/library/system.web.ui.page.preinit%28v=vs.100%29.aspx)) they will maintain their state through the [`IPostBackDataHandler`](http://msdn.microsoft.com/en-us/library/bkhywh0b.aspx) interface.

> PreInit - Create or re-create dynamic controls.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T14:53:19.753

我过去也遇到过同样的问题。

What I did was give the dynamically-added control **an ID**, and made sure it retained that ID also on postback (in my case, I kept all the information in the session, and re-created the controls).

Once the postbacked control has the same ID as as before, Microsoft did magic and refilled the controls with the pre-postback values.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:35:18.887

使用对象缓存。将用户控件添加到缓存中，并在需要时检索它。

您可以在以下位置看到一个很好的示例：[ASP.net-Tutorials Cache 和 Object Cache。](http://asp.net-tutorials.com/caching/object-caching/)

我现在也在学习asp.net，发现这是一个很好的解释。我还使用了[Microsoft Library](http://msdn.microsoft.com/en-us/library/aa478965.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-21T08:24:53.603

每个继承**IPostBackDataHandler**接口的服务器控件都有一个处理回发数据的**LoadPostData**方法。当控件由一个类（页面、表单、占位符、控件等）实现时，该类调用**LoadPostData**方法并传递发布的数据和键**以维护控件状态**。

您**需要做的就是在回发期间每次在页面加载事件之前或之内重新实例化/重新初始化动态控件**，并将此控件添加到页面/表单/占位符。然后通过父控件调用 LoadPostData 方法，将发布的数据自动分配给控件。

查看这篇文章了解如何编写动态控件的代码 - ***[如何在asp.net中回发期间维护动态控件事件、数据](http://www.dotnetbull.com/2013/09/maintain-dynamic-control-events-data-during-postback.html)***

# routing - 我的项目应该使用什么版本的 ember.js？

> ID：14216031
> 
> 赞同：1
> 
> 时间：2013-01-08T13:30:18.543
> 
> 标签：routing, ember.js

我正在开始对 ember.js 进行评估，并且我已经确定了很多资源。我注意到的一件事是有不同的方式来构建我的应用程序（例如使用或不使用路由器），并且选择实际上取决于 ember.js 的版本（框架似乎发展得很快）。

我首先在 ember.js 网站 (1.0.0-PRE2) 上下载了参考版本。但是，如果我理解正确的话，ember.js 网站的 Guides 部分中描述的内容对应于 github 上最新版本的代码库。例如，我正在考虑新的路由器 API。

所以，我想知道我在新项目中使用的推荐框架版本是什么。我应该使用 github 中的 master 分支吗？我应该坚持 1.0.0-PRE2) 吗？我试图了解主人的稳定/可靠程度......

感谢您的反馈意见！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:47:10.450

你说得对，框架正在迅速发展。使用哪个版本取决于您对更改的容忍度和项目的交付日期。如果您需要稳定的东西和/或必须尽快发布，那么`1.0.0-PRE2`就是要走的路。

也就是说，路由器的新版本正在稳定，我预计未来几周会有 1.0.0-PRE3 版本发布。如果我要开始一个新项目，我会使用指南并使用最新版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:34:45.693

在使用 PRE 2 进行多次测试后，我开始使用最新版本（GIT master）进行开发，因为路由器 v 2 更好，并且与 ember-data 的集成更容易。但是，API 变化很快！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:35:33.207

我使用 starter-kit 作为 git 子模块。

[https://github.com/emberjs/starter-kit/tree/master/js/libs](https://github.com/emberjs/starter-kit/tree/master/js/libs)

这一个还包括正确的 jQuery 版本

# javascript - VideoJS 问题 - 通过 Firefox 中的 Javascript 问题的动态视频元素

> ID：14216032
> 
> 赞同：1
> 
> 时间：2013-01-08T13:30:23.457
> 
> 标签：javascript, asp.net, postback

我通过 Javascript 和 asp.net 创建了动态视频元素。

在 Firefox 中，它触发回发事件。虽然它在 IE 和 Chrome 中运行良好。

所以，火狐是这里的问题。在 Firefox 中，videojs 使用 webm，而在 IE 和 chrome 中使用 .mp4。

# iphone - 设置包中的更新版本失败 iphone

> ID：14216035
> 
> 赞同：1
> 
> 时间：2013-01-08T13:30:46.883
> 
> 标签：iphone, objective-c, ios, xcode, settings.bundle

我正在尝试编写一个运行脚本来更新 Root.plist 中的版本。这是脚本

> 版本= `/usr/libexec/PlistBuddy -c "Print CFBundleShortVersionString" $SRCROOT/AppName/AppName-Info.plist`/usr/libexec/PlistBuddy "$SRCROOT/AppName/Settings.bundle/Root.plist" -c "set PreferenceSpecifiers:1:DefaultValue $version"

设置包中的 Root.plist 是

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-    1.0.dtd">
<plist version="1.0">
<dict>
<key>PreferenceSpecifiers</key>
<array>
    <dict>
        <key>Title</key>
        <string>About</string>
        <key>Type</key>
        <string>PSGroupSpecifier</string>
    </dict>
    <dict>
        <key>DefaultValue</key>
        <string>1.0.24</string>
        <key>Key</key>
        <string>version_preference</string>
        <key>Title</key>
        <string>Version</string>
        <key>Type</key>
        <string>PSTitleValueSpecifier</string>
    </dict>
</array>
<key>StringsTable</key>
<string>Root</string>
</dict>
</plist> 
```

我已按照[此](https://stackoverflow.com/questions/877128/how-can-i-display-the-application-version-revision-in-my-applications-settings)答案的说明进行操作。创建 .ipa 时版本号更新成功，我可以在 iTunes 中看到新版本。但是当我尝试升级应用程序时，设备显示'1 项无法同步。有关更多信息，请参阅 iTunes。但是，如果手机上的旧应用程序被删除并重新安装，则应用程序安装成功并且正确的版本出现在手机设置中。我正在使用 xcode 4.5.2 谁能帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:23:04.973

以下脚本用于将当前的 subversion 修订号插入到我们的 plist 中：

```
G_VERSIONRP="`/usr/libexec/PlistBuddy -c "Print :CFBundleShortVersionString"  ${TARGET_BUILD_DIR}/${INFOPLIST_PATH}`"
G_BUILDRP="`svnversion -n`"
G_TITLERP="MyApp v"
/usr/libexec/PlistBuddy -c "Set :PreferenceSpecifiers:0:Title ${G_TITLERP}${G_VERSIONRP} (${G_BUILDRP})" ${TARGET_BUILD_DIR}/${PRODUCT_NAME}.app/Settings.bundle/Root.plist 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:41:09.490

几天后我再次尝试，使用脚本并进行了干净的构建。替换了 iTunes 中的现有副本，同步，它有效！与之前尝试不同的唯一步骤是，早些时候我删除了 iTunes 库中的现有副本并拖入了新副本。不太确定这是否导致 '1 项目无法同步。有关更多信息，请参阅 iTunes 消息，但现在手机设置中确实出现了正确的版本。

# php - 在php中对多数组进行排序

> ID：14216039
> 
> 赞同：1
> 
> 时间：2013-01-08T13:30:56.857
> 
> 标签：php, codeigniter, sorting

我需要一些关于对多个数组进行排序的帮助。这就是我得到的：

```
Array ( 
   [ALU0000001] => 
         Array ( [0] => Array ( [period] => 2012 [codCurse] => S12-2030 [idPersona] => ALU0000001 [date] => 2012-04-02 [amount] => 238.00 [active] => X ) 
                 [1] => Array ( [period] => 2012 [codCurse] => S12-2030 [idPersona] => ALU0000001 [date] => 2012-05-02 [amount] => 238.00 [active] => X )
                 [2] => Array ( [period] => 2012 [codCurso] => S12-2030 [idPersona] => ALU0000001 [date] => 2012-06-02 [amount] => 238.00 [active] => X )
                 [3] => Array ( [period] => 2013 [codCurso] => S12-2030 [idPersona] => ALU0000001 [date] => 2013-01-02 [amount] => 238.00 [active] => X )

   [ALU0000005] =>
         Array ( [0] => Array ( [period] => 2013 [codCurse] => S13-2010 [idPersona] => ALU0000005 [date] => 2013-03-01 [amount] => 225.00 [active] => X )
                 [1] => Array ( [period] => 2013 [codCurse] => S13-2010 [idPersona] => ALU0000005 [date] => 2013-03-02 [amount] => 333.00 [active] => X ) 
                 [2] => Array ( [period] => 2013 [codCurse] => S13-2010 [idPersona] => ALU0000005 [date] => 2013-04-02 [amount] => 333.00 [active] => X ) 
```

我需要按期间日期对多数组进行排序以获得类似的东西

```
 Y   M   D
  2012 2012-04-02 ALU00000001 .....
  2012 2012-05-02 ALU00000005 .....
  2012 2012-06-01 ALU00000001 .....
  2013 2013-01-01 ALU00000001 .....
  2013 2013-06-01 ALU00000001 .....
  2013 2013-12-24 ALU00000005 ..... 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:43:48.757

正如 danp 所说，您将需要使用[PHP usort](http://php.net/manual/en/function.usort.php)的自定义排序功能。

您可以使用语法在 Codeigniter 中执行此操作；

```
usort($data_array, array('controller', 'sort_function'));

function sort_function($a, $b)
{
    if ($a == $b) {
        return 0;
    }
    return ($a < $b) ? -1 : 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:59:25.390

考虑到主数组键的作用不大（因为它们已经包含在`date`键的值中），您可以放心地忽略它们。因此，首先您要将所有值收集到一个数组中以便以后进行排序：

```
$allItems = array();
foreach ($outputArr as $arr) { // $outputArr should be the name of your array
    $allItems = array_merge($allItems,array_values($arr));
} 
```

然后您需要`date`按键对数组值进行排序：

```
function sortByDate($a,$b) {
    $d1 = strtotime($a['date']);
    $d2 = strtotime($b['date']);
    return $d1 == $d2 ? 0 : ($d1 > $d2 ? 1 : -1);
}
usort($allItems,'sortByDate');
// and there you go.
print_r($allItems); 
```

# blackberry-simulator - 重置 BlackBerry-10 Dev Alpha 模拟器

> ID：14216040
> 
> 赞同：1
> 
> 时间：2013-01-08T13:31:00.590
> 
> 标签：blackberry-simulator, blackberry-10

我想重置我的 BlackBerry 10 Dev Alpha 模拟器。有人知道怎么做吗？

我尝试了 VMware 的“重置此虚拟机”选项，但没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T15:19:02.087

重置是指重新启动吗？（虚拟机/电源/重启访客）

或者你的意思是从一个干净的模拟器开始？

好吧，你不需要重置你的模拟器，只需创建一个新的虚拟机！

# ios - UIView：如何“重置”转换。CGAffineTransformScale 没有像我预期的那样工作

> ID：14216044
> 
> 赞同：9
> 
> 时间：2013-01-08T13:31:02.867
> 
> 标签：ios, uiview, autoresize, cgaffinetransformscale

我认为我的问题可以概括为如何存储和重置视图的转换。但是也许解释我的情况可能会有所帮助。

如果我将下面的变换一个接一个地应用到视图中（就像我将此代码添加到开关或按钮一样）。我得到了我所期望的结果：比例在：原始视图大小的 0.55 倍的视图和原始比例的视图之间切换。也可以按我的意愿缩放 someView 的子视图。无穷无尽。完美的。

```
//tranformScale 1
someView.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.55, 0.55 );
//tranformScale 2
someView.transform = CGAffineTransformScale(CGAffineTransformIdentity, 1.0, 1.0 ); 
```

问题是我想在 iOS 设备进入横向时使用此代码（或类似代码）来缩放 self.view 的子视图，以使子视图适合横向屏幕（并在纵向时备份）。它几乎可以工作，但是由于某种原因，而不是为正在缩放的​​视图的框架输出圆形值（就像使用按钮调用转换的测试发生的那样），逐渐产生了奇怪的值。最终，大约 4 次旋转后，子视图飞离屏幕。我怀疑它与 self.view 改变形状有关，但话又说回来，当我记录 self.view 的框架时，它的形状是非常可预测的。

**顺便**说一句，我使用 autoresizingMask 灵活边距使视图居中，而不是使用自动布局。也许我应该用另一种类型的计算来集中视图？

谢谢阅读！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-11-13T14:38:51.037

我这样做了，效果很好。

```
self.imageview.transform = CGAffineTransformIdentity 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-08T14:41:12.330

(1) 应用transforms后一定不要设置或获取任何帧数据，不支持，会产生不可预知的结果；

（2）关闭你的自动调整蒙版弹性边距和中心，如下所示：

```
 view.center = CGPointMake(view.superview.bounds.size.width/2, 
                             view.superview.bounds.size.height/2); 
```

（注意在视图处于全尺寸时应用居中。即，如果是调整大小变换，则在变换之前，如果是恒等变换，则在变换之后）

# iphone - 在 cocoapods 项目中处理外部非 cocoapods 框架

> ID：14216045
> 
> 赞同：2
> 
> 时间：2013-01-08T13:31:06.113
> 
> 标签：iphone, objective-c, ios, cocoapods

我爱上了 Cocoapods，我想用它迁移我的所有项目。在此之前，我有几个关于如何在我的项目中处理外部非 cocoapods 框架的问题。

1）假设我正在使用 Cocoapods 并且我只包含了`AFNetworking`框架。在某些时候，我需要使用一些 CoreGraphic 动画并且我需要使用`QuartzCore`：AFNetworking 没有使用这个框架，所以 QuartzCore 没有包含在我的 Pods 项目中。处理这种情况的最佳方法是什么？

更好地考虑“我将所有框架都放在我的 Pods 项目中，所以在我的“应用程序项目”中，我只有我的应用程序所需的代码”？如果是，如何？添加我的`Pods.xconfig`这段代码

> OTHER_LDFLAGS = -ObjC ... -framework QuartzCore

? 还是有其他（更好的）方法？

或者更好地考虑“这不是 Pod，所以我像以前一样在我的“应用程序项目”中添加框架”？

2）我有一个库（保存在我的 HD 中），它不在 Cocoapods 的主存储库中并且没有`Podspec`文件：将它包含在我的项目中的最佳方法是什么？

*   我为该库创建了一个 podspec，并使用`:local`我的属性链接它`Podfile`

*   我像往常一样将该库添加到我的“应用程序项目”中

当然，每种方式都可以正常工作，所以我不是在问“如何添加外部框架”，而是在问最好的方法是什么:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T14:02:40.860

## 框架

CocoaPods 尽可能地尝试将其文件与您的工作分开。这也是需要的，因为 CocoaPods 需要控制一些文件。例如，`Pods.xcconfig`假设它在 CocoaPods 控制下，并且在每次安装期间都会重新创建。换句话说，您对其所做的任何更改都会丢失。

因此，如果您需要一个框架，您应该将其添加到您的应用程序项目中。原则上，即使框架包含在某些 Pod 中，您也应该这样做，因为它们可能会被更新以移除依赖项，并且您的项目会中断。

## 自定义库

如果您打算重用创建库的库，这两种选择`podspec`都可以在将来派上用场。您还可以创建自定义存储库（请参阅 wiki），因此您不需要使用该`:local`选项。

# ajax - 如何在 JSF 中使用 jQuery.post 实现 AJAX？

> ID：14216053
> 
> 赞同：0
> 
> 时间：2013-01-08T13:31:34.333
> 
> 标签：ajax, jsf-2

我正在尝试使用 .jsf 将一些数据从我的 jsf 页面发送到服务器`jQuery.post`。我已将同一页面的 url 与处理请求的 url 放在了一起。我能够获取数据，但无法将响应发送回我的`jQuery.post`呼叫。

我的伪代码：

```
jQuery.post('localhost/mypage.jsf', { data: 'xyz' }, function(res){
    console.log(res);
}); 
```

我能够`data`在我的处理程序类中获取变量，但无法发回响应。

关于如何做得更好的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:54:15.303

JSF 基本上是不适合这项工作的工具。您应该使用像 JAX-RS 这样的 Web 服务框架，而不是像 JSF 这样的基于组件的 MVC 框架。

但是，如果您真的坚持，您可以通过以下方式滥用 JSF 来发送任意响应。在视图中使用`<f:event type="preRenderView">`在视图呈现之前调用方法`<f:viewParam>`并将请求参数设置为 bean 属性（请注意，这也有效地适用于 GET 请求）。

```
<f:metadata>
    <f:viewParam name="data" value="#{bean.data}" />
    <f:event type="preRenderView" listener="#{bean.process}" />
</f:metadata> 
```

如果您打算在[Google Gson](http://code.google.com/p/google-gson/)或其他工具的帮助下返回 JSON，则使用以下内容：

```
public void process() throws IOException {
    String message = "Hello! You have sent the following data: " + data;
    String json = new Gson().toJson(Collections.singletonMap("message", message));

    FacesContext context = FacesContext.getCurrentInstance();
    ExternalContext ec = context.getExternalContext();
    ec.setResponseContentType("application/json");
    ec.setResponseCharacterEncoding("UTF-8");
    ec.getResponseOutputWriter().write(json);
    context.responseComplete(); // Prevent JSF from rendering the view.
} 
```

同样，您滥用 JSF 作为工作的错误工具。看看 JAX-RS 或者甚至是一个普通的 servlet。另请参阅[Servlet 与 RESTful](https://stackoverflow.com/questions/7874695/servlet-vs-restful)。

# mysql - django 分页和注释

> ID：14216055
> 
> 赞同：0
> 
> 时间：2013-01-08T13:31:38.943
> 
> 标签：mysql, django

我的调查表明，使用涉及另一个表的注释会大大增加 sql 查询时间。

在用户选择的每一页上计算这个计数是没有意义的。

我的问题是如何避免在每一页上计算这个计数？

使用模型属性存储此计数是否明智？

你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:41:20.790

我最终添加了原始 sql 来改进查询。这成功了，现在每个分页需要大约 3 毫秒。

# android - Api 在 CrowdFlower 的 RTFM 上发布图像

> ID：14216059
> 
> 赞同：-1
> 
> 时间：2013-01-08T13:32:03.313
> 
> 标签：android, iphone

我正在使用一个 android iphone 应用程序。我必须在 CrowdFlower 的 RTFM 上发布用户上传的图像以进行自动批准。我不知道会在 RTFM 上发布图像的 api。

有没有人知道这个的api。如果是，请提供在 CrowdFlower 的 RTFM 上发布图像的步骤。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:42:52.383

最简单的方法是使用 Parse 的模块将图像发布到 RTFM：

[http://blog.crowdflower.com/2012/12/announcing-our-new-cloud-module-partnership-with-parse/](http://blog.crowdflower.com/2012/12/announcing-our-new-cloud-module-partnership-with-parse/)

正如 Geobits 指出的那样，您还可以直接使用 RTFM 的 API，或者从您的服务器使用他们的[Ruby API 。](https://github.com/dolores/rtfm-ruby/)

# php - 02 (str) - 1 (int) = 01 (str) 如何得到这样的结果？

> ID：14216060
> 
> 赞同：0
> 
> 时间：2013-01-08T13:32:07.513
> 
> 标签：php, string, int

```
<?php

$str = "02";
$int = 1;

$result = $str-$int;

echo $result // 1

?> 
```

但我需要结果 = 01

不要告诉我`"0".$str-$int;`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T13:35:27.387

```
<?php
$str = "02";
$int = 1;

printf('%02d', $str-$int); 
```

或者

```
<?php
$str = "02";
$int = 1;

$result = sprintf('%02d', $str-$int);
// do something with $result here 
```

见[http://docs.php.net/manual/en/function.sprintf.php](http://docs.php.net/manual/en/function.sprintf.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T13:35:43.030

尝试

```
printf("%02d",$str-$int); 
```

[sprintf 文档](http://php.net/manual/en/function.sprintf.php)中解释了 printf 的多种格式化可能性

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T13:37:04.110

```
<?

$str = "02";
$int = 1;

echo sprintf("%02d", (int)$str - $int);

?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T13:34:10.773

使用[str_pad()](http://us3.php.net/str_pad)将其设置为用 0 填充左侧，直到字符串的长度为 2 个字符。

```
echo str_pad($str - $int, 2, '0', STR_PAD_LEFT); 
```

# java - AWT - 测试现有的小程序

> ID：14216067
> 
> 赞同：0
> 
> 时间：2013-01-08T13:32:30.617
> 
> 标签：java, testing, applet, awt, fest

我需要为浏览器测试用 AWT 编写的 Java Applet，但我不知道如何连接到现有的框架/对话框/按钮。

是否有任何选项可以获取系统中现有 AWT 对象的列表并对其进行处理？
我尝试使用 FEST-AWT，但如果我理解正确，他只允许创建新对象并在其上执行操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:02:33.303

我只用 AWT 在浏览器中编写了一个小程序。我所做的是创建了一个基本的 XHTML 文档并使用了“applet”标签。你把它放在与你的 .java 小程序相同的目录中，并传递给它争论代码="InitClass.class" （仔细检查这是争论的正确名称）。从那里，您在 IDE 中编译您的小程序，然后在您的浏览器中打开您的 html 文档。**小程序标签在 HTML4 中被弃用**

# json - Scala：从具有定义名称的嵌套对象中的 json 文件中删除字段

> ID：14216069
> 
> 赞同：2
> 
> 时间：2013-01-08T13:32:32.333
> 
> 标签：json, scala, lift

我是新来的斯卡拉。我正在尝试使用 json 文件进行简单的操作。我被以下任务困住了：如何在具有定义名称的对象中优雅地删除具有定义名称的字段。例如，我想从对象 name2 中删除 dsc1 字段

```
{
  "group": {
    "name1":{
      "dsc":"some dsc",
      "dsc1":"some dsc",
      "dsc2":"some dsc"
     },
    "name2":{
      "dsc":"some dsc",
      "dsc1":"some dsc",
      "dsc2":"some dsc"
    }
  }
} 
```

对于解析，我使用的是 liftweb。我已经创建了以下代码，但它删除了所有 dsc1：

```
val transformedJson2 = parsedInput transform { 
    case JObject(fields) if (fields.head.name == "name2") => JObject(fields) transform {
          case JField("dsc1", JArray(xs)) =>  JNothing
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T18:22:11.563

我稍微改写了你的转换，当我根据你的输入尝试它时，这似乎奏效了：

```
val transformedJson2 = parsedInput transform { 
  case JField("name2", fields) => 
    fields remove {
      case JField("dsc1", _) =>  true
      case _ => false   
    }
} 
```

除了使用，您还可以像在示例中那样`remove`使用第二个：`transform`

```
val transformedJson2 = parsedInput transform { 
  case JField("name2", fields) => 
    fields transform {
      case JField("dsc1", _) =>  JNothing
    }
} 
```

因此，通过使用来自以下的解析输入：

```
scala> val parsedInput = parse(""" {
     |   "group": {
     |     "name1":{
     |       "dsc":"some dsc",
     |       "dsc1":"some dsc",
     |       "dsc2":"some dsc"
     |      },
     |     "name2":{
     |       "dsc":"some dsc",
     |       "dsc1":"some dsc",
     |       "dsc2":"some dsc"
     |     }
     |   }
     | } """)
parsedInput: net.liftweb.json.package.JValue = JObject(List(JField(group,JObject(List(JField(name1,JObject(List(JField(dsc,JString(some dsc)), JField(dsc1,JString(some dsc)), JField(dsc2,JString(some dsc))))), JField(name2,JObject(List(JField(dsc,JString(some dsc)), JField(dsc1,JString(some dsc)), JField(dsc2,JString(some dsc)))))))))) 
```

两者都应该产生输出：

```
scala> pretty(render(transformedJson2))
res10: String = 
{
  "group":{
    "name1":{
      "dsc":"some dsc",
      "dsc1":"some dsc",
      "dsc2":"some dsc"
    },
    "name2":{
      "dsc":"some dsc",
      "dsc2":"some dsc"
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-10T16:37:13.730

我试过这个：

```
 val transformedJson2 = parsedInput transformField {
    case JField("group", fields) => (
      "group", fields transformField {
         case JField("name2", nameFields) => ( 
             "name2", nameFields removeField {
               case JField("dsc1", _) => true    
               case _ => false
             }
         )
      }     
    )
}

println(compact(render(transformedJson2))) 
```

# image - Windows Phone - 如何处理两个图像集？

> ID：14216074
> 
> 赞同：1
> 
> 时间：2013-01-08T13:32:41.863
> 
> 标签：image, windows-phone-7, serialization, settings

我正在编写一个应用程序，我在其中使用两个图像集 - 白色和黑色。这取决于用户当前在整个操作系统中使用的背景。（我个人更喜欢黑色背景，但我知道绝望的人会使用白色）

所以。我创建了两个文件夹：`/Images/Dark`并且`/Images/Light`包含相同的文件名，唯一的区别是图像的颜色（深白色和浅黑色）。我的工作方式是这样的：每当我将图像源绑定到某个东西时，我都会检查我`String appBackground;`的设置为亮或暗，然后我创建路径的其余部分。像这样：

`this.imageSource = getIconPath((App.Current as App).appBackground) + this.name + ".png";`

这工作得很好。问题是，当我想将图像绑定到其源的对象列表保存到文件时。这是因为我序列化了一个字符串，它被固定在一个路径中。所以，我可能有一个带有白色图标的项目列表，但是当我将背景更改为白色时 - 图标保持不变。

我的想法是，只保存最后的文件名部分。( `this.name+".png"`) 然后以某种方式将其动态粘合到 appBackground 中。问题是：我真的不知道如何正确地做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:56:52.147

如果您确实需要使用两组位图图像，请使用 MVVM 方法 - 固定引用 ViewModel 中的图像源属性，即根据当前系统背景返回黑白图像。
我这样使用它：

```
public string SmsImg
{
    get { return AppHelper.IsBlackTheme ? "/Images/appbar.send.white.png" : "/Images/appbar.send.black.png"; }
} 
```

以及 IsBlackTheme 的实现：

```
/// <summary>
/// Return true if pohone uses Black color theme.
/// </summary>
public static bool IsBlackTheme
{
    get
    {
        if (!isBlackTheme.HasValue)
        {
            SolidColorBrush bg = Application.Current.Resources["PhoneBackgroundBrush"] as SolidColorBrush;
            isBlackTheme = bg != null && bg.Color == Colors.Black;
        }
        return isBlackTheme.Value;
    }
}
private static bool? isBlackTheme; 
```

# wcf - 以下代码所需的 WCF 自定义绑定配置文件

> ID：14216075
> 
> 赞同：0
> 
> 时间：2013-01-08T13:32:43.180
> 
> 标签：wcf, biztalk

需要自定义绑定配置文件以在 BizTalk 发送端口中导入以下代码片段。

我无法在配置文件中的绑定元素上添加用户名 UserNameSecurityTokenParameters，但可以编程。

所需的 SOAP 标头是

```
<s:Header>
        <o:Security s:mustUnderstand="1" xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
     <u:Timestamp u:Id="uuid-9e629b43-b7be-498b-9cf6-03ee8a54c0d0-1">
        <u:Created>2013-01-08T10:35:11.554Z</u:Created>
        <u:Expires>2013-01-08T10:40:11.554Z</u:Expires>
     </u:Timestamp>
     <o:BinarySecurityToken u:Id="uuid-85871719-c001-4435-82dd-a229d1f93b9d-3" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">MIIEijCCA3KgAwIBAgIOAQAAAAABO0dvgccW+zwwDQYJKoZIhvcNAQEFBQAwQDEXMBUGA1UEChMOQ3liZXJ0cnVzdCBJbmMxJTAjBgNVBAMTHEN5YmVydHJ1c3QgU3VyZWNyZWRlbnRpYWwgQ0EwHhcNMTIxMTI4MTQzNzE0WhcNMTMxMTI4MTQzNzE0WjB+MQswCQYDVQQGEwJVUzEjMCEGA1UEChMaTkVDIENvcnBvcmF0aW9uIG9mIEFtZXJpY2ExJTAjBgkqhkiG9w0BCQEWFmJpamkuc3VrdW1hckBuZWNhbS5jb20xIzAhBgNVBAMTGk5FQyBDb3Jwb3JhdGlvbiBvZiBBbWVyaWNhMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAob9NweUoFvfH+fvTJk6xitNvCjYN+Yev4tpUAqBcz3Y0RgzySrdf2cZzRd0j53R2Q98KEgkVXAdfR8yBvOpUVljpNSRvwNT8TYl9MN/giiH6hQUPTli9mq+tNuplT71soeTL/3RbVRzNWdhdZn8itV9Bte8nAKnub4lApgh1QLub2uUfxqYWOo2jz5t4ADxGohGfS7lJgincWIsqDGtf2vYu33SppFhyhAtINRMmP35a2S2aB/ynS+MRdP053Gc5OIh3jjQE/mMWQjHHu4lXFHJiImkhuv6ZGoUzVx2J8jyi9jqOz9wBw8xqC+ch+GU2hME/eDoTxQy0vQy1CR/xNQIDAQABo4IBQjCCAT4wHwYDVR0jBBgwFoAUSUySC81KI7bOee6eVTNrWkTAApUwOwYDVR0fBDQwMjAwoC6gLIYqaHR0cDovL2NybC5vbW5pcm9vdC5jb20vU3VyZUNyZWRlbnRpYWwuY3JsMB0GA1UdDgQWBBSL1imayafzgtoV6/cjqcDTmvQ9IDAPBgNVHRMBAf8EBTADAgEAMA4GA1UdDwEB/wQEAwIE8DARBglghkgBhvhCAQEEBAMCBaAwSQYIKwYBBQUHAQEEPTA7MDkGCCsGAQUFBzAChi1odHRwOi8vY2FjZXJ0Lm9tbmlyb290LmNvbS9zdXJlY3JlZGVudGlhbC5jcnQwIQYDVR0RBBowGIEWYmlqaS5zdWt1bWFyQG5lY2FtLmNvbTAdBgNVHSUEFjAUBggrBgEFBQcDAgYIKwYBBQUHAwQwDQYJKoZIhvcNAQEFBQADggEBAERfT+KyQiDAeFisPfXeYvOGdqSefMJl133IYSve0xup47NoI0HL7UqW/y6bpUaZpXM4+slRzKK573jArUEzqV8sqmEyP/EF2tkJGFAfhQuSyxKDOBMTEII8O4OWKv7YxBMR+v2nm4noKotBXGnfbe3SON2kozHXCBlVB3btO1d/tj/js1bFFZ5+R1ihJobxRtW3GYint9LRdUvKdAqChWsh50/U1GmWgzY/Y2UE9I3mHy7JRdj+LU6iliPobdWZBZlFgEISItTjn2PrCZDXAUwtrMvztWBKurlsDzCn6Zu3U6TDKjzmfm1i+0hvJ7cnAAU8RQT4Bh/zfJG1sxTr98s=</o:BinarySecurityToken>
     <o:UsernameToken u:Id="uuid-85871719-c001-4435-82dd-a229d1f93b9d-1">
        <o:Username>WPG_NEC</o:Username>
        <o:Password o:Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">NECwsTw02</o:Password>
     </o:UsernameToken>
     <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
        <SignedInfo>
           <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
           <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
           <Reference URI="#_1">
              <Transforms>
                 <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
              </Transforms>
              <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
              <DigestValue>Jb40XGCX3BM23CUxONUtejfkd20=</DigestValue>
           </Reference>
           <Reference URI="#uuid-9e629b43-b7be-498b-9cf6-03ee8a54c0d0-1">
              <Transforms>
                 <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
              </Transforms>
              <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
              <DigestValue>UO1kn2g4oTLkiYoRWYtLa+q/ePo=</DigestValue>
           </Reference>
           <Reference URI="#uuid-85871719-c001-4435-82dd-a229d1f93b9d-1">
              <Transforms>
                 <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
              </Transforms>
              <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
              <DigestValue>97Q6wwswEhNLkHt7iyHEI5WzWU0=</DigestValue>
           </Reference>
        </SignedInfo>
        <SignatureValue>IUMg0j7HiWFHHHUI9OPu+kDCNMaaOVNX3JBg1/EabzDW3UMFAntb94xZ7nnf6zFOJHbMajUgMwt7yt26I/u+gynhLQlQeOKfDkFzyXrQeX1uYsTdBh88tDHBd8BdBdNaLzXtJB/G5D4b2kwXfrVaQlB3TqKPc84814aaNQaVuquuTkfR7Mj9VXRcDSswWVsHke7GxQeMyt/pg0mtzQnDO0oLzCVXKTLg3MuvQpD5JppMIbdxgMojs8y6GiTKvWRKOwgZXZ8Olab6SSZfz0/s59YvrPtioabafqsPKMGUGnzAUylNvcXM/bKxohWcI+dM+JGck55HzkMzHMzWnv6aFA==</SignatureValue>
        <KeyInfo>
           <o:SecurityTokenReference>
              <o:Reference ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" URI="#uuid-85871719-c001-4435-82dd-a229d1f93b9d-3"/>
           </o:SecurityTokenReference>
        </KeyInfo>
     </Signature>
  </o:Security> 
```

下面的代码是一个工作代码，但无法为下面的代码生成自定义绑定配置文件。因此无法为此目的使用 BizTalk 适配器。

此代码产生上面的肥皂头。我需要一个自定义绑定配置文件来将其导入 BizTalk 发送端口。

```
 var b = new CustomBinding();
        var sec = (AsymmetricSecurityBindingElement)SecurityBindingElement.CreateMutualCertificateBindingElement(MessageSecurityVersion.WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10);
        var userNameToken = new UserNameSecurityTokenParameters();
        sec.EnableUnsecuredResponse = true;
        sec.EndpointSupportingTokenParameters.Signed.Add(userNameToken);
        sec.MessageSecurityVersion =
            MessageSecurityVersion.WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10;
        sec.IncludeTimestamp = true;
        sec.SecurityHeaderLayout = SecurityHeaderLayout.Strict;
        sec.AllowInsecureTransport = true;
        b.Elements.Add(sec);
        b.Elements.Add(new TextMessageEncodingBindingElement(MessageVersion.Soap11, Encoding.UTF8));
        b.Elements.Add(new HttpsTransportBindingElement());
        var c = new ServiceReference1.taservicePortClient(b, new EndpointAddress(new Uri("https://abc.def.com:443/qwerty"), new DnsEndpointIdentity("ABC Corp of World"), new AddressHeaderCollection()));
        c.ClientCredentials.UserName.UserName = "Username";
        c.ClientCredentials.UserName.Password = "Pwd";
        c.ClientCredentials.ServiceCertificate.SetDefaultCertificate(StoreLocation.LocalMachine, StoreName.My, X509FindType.FindByThumbprint, "42D01DCCBE1EF5F6C414E0869C21ED0EC86C9B88A");
        c.ClientCredentials.ClientCertificate.SetCertificate(StoreLocation.LocalMachine, StoreName.My, X509FindType.FindByThumbprint, "42D01DCCBE1EF5F6C414E0869C21ED0EC86C9B88A");
        ServiceReference1.taservicePort d = c;
        var e = new ServiceReference1.receiveRequest(input);
        ServiceReference1.receiveResponse res = d.receive(e); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:18:13.623

WCF 配置仅提供在代码中创建自定义绑定时可用的功能子集。如果您想让您的新绑定在配置中可用，您必须创建一个新的绑定扩展 -[检查`BinaryOverHttpWithChaosBinding`并遵循本文中的类](http://blogs.msdn.com/b/carlosfigueira/archive/2011/07/26/wcf-extensibility-binding-and-binding-element-configuration-extensions.aspx)。

# autoconf - configure.ac：库和标头不可用且不存在

> ID：14216076
> 
> 赞同：0
> 
> 时间：2013-01-08T13:32:45.673
> 
> 标签：autoconf

我在 C 中实现了一个日志库（我将其命名为 liblogger），并使用 Autotools 来编译和安装它。据我所见，安装已正确完成，因为标头和库本身（我目前捆绑到静态库中）已安装到适当的目录中（/usr/local/include/liblogger/ 用于标头和/usr/local/lib 用于 .a)。

现在我正在尝试将另一个工具与该库链接（也使用 Autotools 编译和构建）。[为了检查日志库的存在，我按照这里](https://stackoverflow.com/questions/2751541/autoconf-including-a-static-library-newbie)所说的创建了 configure.ac 文件。但生成的配置脚本说：

> 检查 /usr/local/include/liblogger/logger.h 可用性...否
> 
> 检查 /usr/local/include/liblogger/logger.h 的存在...否
> 
> 检查 /usr/local/include/liblogger/logger.h... 否
> 
> 检查 -l/usr/local/lib/liblogger.a 中的 log_init ... 否

即使命名文件**确实**存在。

我在其中检查标头和库的 configure.ac 文件部分如下：

```
LIBLOGGER=/usr/local/lib
HEADERLOGGER=/usr/local/include/liblogger

AC_CHECK_HEADER([${HEADERLOGGER}/logger.h],
    [AC_DEFINE([HAVE_LOGGER_H], [1], [found logger.h])
    CFLAGS="$CFLAGS -I${HEADERLOGGER}"])

AC_CHECK_LIB([${LIBLOGGER}/liblogger.a],
    log_init, [found liblogger.a], [], [])

AC_SUBST(LIBLOGGER) 
```

实际上，如果我尝试：

```
AC_CHECK_FILE(
   [${HEADERLOGGER}/logger.h],
   [AC_MSG_NOTICE([Found logger.h])],
   [AC_MSG_NOTICE([Didn't find logger.h])]
   ) 
```

它**确实**找到了文件。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:08:25.120

问题不在于工具的 configure.ac，而在于原始记录器库。检查运行配置脚本时生成的**config.log**文件时，有一行说：

`/usr/local/include/liblogger/logger.h:22:19: fatal error: types.h: No such file or directory`

所以我实际上不得不重新组织记录器库中的一些依赖项。

In fact, setting `HEADERLOGGER` to `liblogger` doesn't solve the problem, since (I don't know why), "/urs/local/include/liblogger" is not being searched for, returning

`configure: error: Couldn't find liblogger/logger.h`

(Perhaps I'm forgetting some previous AC instruction for that).

The moral: *the log files are there for a reason... :-S*

# wpf - 如何让旋转变换和布局变换一起工作

> ID：14216077
> 
> 赞同：2
> 
> 时间：2013-01-08T13:32:45.417
> 
> 标签：wpf, xaml

我有一个简单的画布如下：

```
<Canvas x:Name="canvBackground" Grid.Row="0" Margin="20" Background="Blue">
        <Canvas.LayoutTransform>
            <ScaleTransform x:Name="scaleTransformBackground"
                            ScaleX="{Binding Value,
                                             ElementName=uiSliderZoom}"
                            ScaleY="{Binding Value,
                                             ElementName=uiSliderZoom}" />
        </Canvas.LayoutTransform>
        <Canvas.RenderTransform>
            <RotateTransform x:Name="rotateTransformBackground"
                            Angle="{Binding Value,
                                             ElementName=uiSliderRotate}"></RotateTransform>
        </Canvas.RenderTransform  >
    </Canvas> 
```

这些变换绑定到两个滑块控件。我已经为画布的背景分配了一个画笔，效果很好。在我分配图像刷时，我将两个变换的 centerX 和 centerY 属性设置为图像 X 和 Y 的一半。缩放滑块和旋转滑块一样工作。

当我结合缩放和滑块时，我得到了奇怪的结果（即旋转变换仍然基于原始尺寸图像的 centerX 和 centerY 属性。因此旋转和缩放的行为不符合预期（放大到缩小和旋转围绕图像的中心。

有人可以帮忙吗？

非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T13:57:09.077

您可以将两个变换都放在一个 TransformGroup 中，并将其分配给 LayoutTransform 或 RenderTransform：

```
<Canvas x:Name="canvBackground" Grid.Row="0" Margin="20" Background="Blue">
    <Canvas.RenderTransform>
        <TransformGroup>
            <ScaleTransform x:Name="scaleTransformBackground"
                            ScaleX="{Binding Value, ElementName=uiSliderZoom}"
                            ScaleY="{Binding Value, ElementName=uiSliderZoom}" />
            <RotateTransform x:Name="rotateTransformBackground"
                             Angle="{Binding Value, ElementName=uiSliderRotate}" />
        </TransformGroup>
    </Canvas.RenderTransform  >
</Canvas> 
```

而且您可能还需要设置[RenderTransformOrigin](http://msdn.microsoft.com/en-us/library/system.windows.uielement.rendertransformorigin.aspx)。

# jquery - 在 DOM 元素上应用 jQuery 方法

> ID：14216080
> 
> 赞同：1
> 
> 时间：2013-01-08T13:32:50.110
> 
> 标签：jquery, dom

我开始学习 jQuery，我想知道为什么不能应用 jquery 方法

在这个例子中：

```
$('p')[0].html('salut !'); //for this instruction i got this error :
                           //"TypeError: $(...)[0].html is not a function " 
```

虽然这个有效：

```
$('body')[0].tagName.toLowerCase(); 
```

我很困惑，我想知道这两种情况有什么区别。

这是同一问题的另一个示例：

```
var listItems = $( 'li' );
var rawListItem = listItems[0]; // or listItems.get( 0 )
var html = rawListItem.html();
// Object #<HTMLInputElement> has no method 'html' 
```

以下是如何使用 .eq() 使用 jquery 方法的方法：

```
var listItems = $( 'li' );
var secondListItem = listItems.eq( 1 );
secondListItem.remove(); 
```

感谢您为此提供一些解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:35:26.290

jQuery 对象与`DOMElement`.

*   jQuery 对象让您可以对它们执行 jQuery 操作。`html()`, `val()`,`eq()`等
*   `DOMElement`的……不要。因为它们是`DOMElement`s，而不是 jQuery 对象。

如果您查看 的[文档`.get()`](http://api.jquery.com/get)，您会看到您得到的是一个`DOMElement`返回，而不是一个 jQuery 对象。`[0]`等也一样。

[`eq()`](http://api.jquery.com/eq)但是，它会返回一个 jQuery 对象，让您可以对它们进行 jQuery 操作。

`tagName`是一个`DOMElement`属性，这就是为什么可以对`DOMElement`. 返回的 s执行它`get()`，但不能对 . 返回的 jQuery 对象执行它的原因`eq()`。在和`html()`上使用时则相反。`get()``eq()`

当然，您可以通过 将任何对象包装`DOMElement`在 jQuery 对象中`$()`，这样您就可以对其执行 jQuery 操作；

```
$($('p')[0]).html('salut !'); 
```

但在您的情况下，您应该使用`eq()`：

```
$('p').eq(0).html('salut !'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:41:29.660

看起来你是通过练习来学习的，女巫是个好东西，所以这里有一些指针：

*   jQuery 使用对象，当你将它们包装进去时，`$(...)`你会得到一个对象
*   当您使用数组指针时，就像`$('p')[0]`您将始终获得本机数组输出的内容一样，witch 是一个字符串，因此，不是一个对象

为了将第一个元素作为对象检索，您有**3 个选择**

```
var jQueryObj = $('p:first'); // using :first 
```

或者

```
var jQueryObj = $("p").eq(0); // using eq() 
```

或者

```
var jQueryObj = $( $('p')[0] ); // wrap it in a jQuery call 
```

请记住，**`console`**在测试 javascript 时，始终是您最好的朋友

![在此处输入图像描述](../Images/2464defb5d0d61ab03bab40d7d486511.png)

# nancy - NancyFx，为视图引擎实现主题支持

> ID：14216081
> 
> 赞同：0
> 
> 时间：2013-01-08T13:32:52.027
> 
> 标签：nancy

由于我没有找到任何有用的谷歌搜索，所以我决定在这里问它。在 NancyFx 中为视图引擎实现 UI 主题支持有多容易/快速？

一个代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:54:32.007

您可以设置自定义查看位置约定[https://github.com/NancyFx/Nancy/wiki/View-location-conventions](https://github.com/NancyFx/Nancy/wiki/View-location-conventions)。在约定中，您可以访问整个 NancyContext。因此，您也许可以向 NancyContext.Items 添加一些内容并在约定中查看，或者如果这是针对经过身份验证的用户，您可以向您的 IUserIdentity 实现（您可以使用 NancyContext.CurrentUser）添加一个属性并使用它。

# javascript - 悬停显示无，鼠标移出显示块

> ID：14216082
> 
> 赞同：0
> 
> 时间：2013-01-08T13:32:54.240
> 
> 标签：javascript, jquery

我的页面上有一个 div，可以点击和拖动。

在这个 div 上，我有另一个绝对位置。

在这个 div 悬停时，我希望它淡出并消失，这样我就可以使用下面的 div，但我似乎无法让它工作。有没有办法说悬停，不显示，鼠标离开，显示块？

目前我正在使用...

```
$('.overlay').hover(function() {
    $(this).stop(true).fadeTo("fast", 0);
}, function() {
    $(this).stop(true).fadeTo("fast", 0.3);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:37:40.363

使用鼠标悬停/鼠标悬停：

确保 mouseout 处于打开状态，`underlay`否则动画会闪烁，因为您淡出覆盖层，所以您离开了它。同样在您的拖动事件期间，您想查看是否要离开叠加层，因为如果您不再在它下方，您可能希望删除鼠标移出的事件处理程序，如果您回到它下方，请替换它。

```
$('.overlay').mouseover(function(){
    $(this).fadeOut("fast");
});

$('.underlay').mouseout(function(){
    $('.overlay').fadeIn("fast");
}); 
```

[这是一个小提琴](http://jsfiddle.net/LaXRL/1)

# php - Php Mysql Group by simier 2 fields？

> ID：14216083
> 
> 赞同：0
> 
> 时间：2013-01-08T13:32:54.097
> 
> 标签：php, group-by, while-loop

```
$query4 = "SELECT bill.agent_id, bill.date, SUM(bill.amount + bill.cheque) AS total, bill_agents.id,bill_agents.name ".
              "FROM bill, bill_agents ".
              "WHERE bill.agent_id = bill_agents.id AND YEAR(date)  = YEAR(CURDATE()) AND MONTH(date) = MONTH(CURDATE()) ". 
              "GROUP BY bill.date , bill.agent_id  ".
              "ORDER BY bill.date ASC"; 
```

表结构：http: [//i.stack.imgur.com/38tKh.jpg](http://i.stack.imgur.com/38tKh.jpg)

当前结果

```
+---------+----+----+----+-----+----+
|         |  1 |  2 |  3 |   4 |  5 |
+---------+----+----+----+-----+----+
| Agent 1 | 35 |  0 |  0 |   0 |  0 |
| Agent 2 |  0 | 10 |  0 |   0 |  0 |
| Agent 1 |  0 |  0 | 12 |   0 |  0 |
| Agent 3 |  0 |  0 |  0 | 100 |  0 |
| Agent 6 |  0 |  0 |  0 |   9 |  0 |
| Agent 2 |  0 |  0 |  0 |   9 | 14 |
+---------+----+----+----+-----+----+ 
```

但我想像下面这样

```
+---------+----+----+----+-----+----+
|         |  1 |  2 |  3 |   4 |  5 |
+---------+----+----+----+-----+----+
| Agent 1 | 35 |  0 | 12 |   0 |  0 |
| Agent 2 |  0 | 10 |  0 |   0 | 14 |
| Agent 3 |  0 |  0 |  0 | 100 |  0 |
| Agent 6 |  0 |  0 |  0 |   9 |  0 |
+---------+----+----+----+-----+----+ 
```

php代码

```
<?php 

    $query4 = "SELECT bill.agent_id, bill.date, SUM(bill.amount + bill.cheque) AS total, bill_agents.id,bill_agents.name ".
              "FROM bill, bill_agents ".
              "WHERE bill.agent_id = bill_agents.id AND YEAR(date)  = YEAR(CURDATE()) AND MONTH(date) = MONTH(CURDATE()) ". 
              "GROUP BY bill.date , bill.agent_id  ".
              "ORDER BY bill.date ASC";

    $result4 = mysql_query($query4) or die('Error, query failed1'); 
    if  (mysql_num_rows($result4)>0){
    mysql_data_seek($result4, 0);   

?>
  <?php while($row4 = mysql_fetch_array($result4, MYSQL_ASSOC)){?>
  <?php $date =    $row4['date'];

    $var = $date;
    $date = date("d-m-Y", strtotime($var) );
    $date=substr($date, 0, -8); 

    echo $date;

    ?>
  <tr>
    <td><?php echo $row4['name']; ?></td>

    <td><?php if ($date == 01) echo $row4['total']; ?></td>
    <td><?php if ($date == 02) echo $row4['total']; ?></td>
    <td><?php if ($date == 03) echo $row4['total']; ?></td>
    <td><?php if ($date == 04) echo $row4['total']; ?></td>
    <td><?php if ($date == 05) echo $row4['total']; ?></td>
    <td><?php if ($date == 06) echo $row4['total']; ?></td>
    <td><?php if ($date == 07) echo $row4['total']; ?></td>
    <td><?php if ($date == 08) echo $row4['total']; ?></td>
    <td><?php if ($date == 09) echo $row4['total']; ?></td>
    <td><?php if ($date == 10) echo $row4['total']; ?></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:41:55.330

问题出在***Group By***部分：

试试这个查询：

```
$query4 = "SELECT bill.agent_id, bill.date, SUM(bill.amount + bill.cheque) AS total,
bill_agents.id,bill_agents.name ".
"FROM bill, bill_agents ".
"WHERE bill.agent_id = bill_agents.id AND YEAR(date)  = YEAR(CURDATE()) 
AND MONTH(date) = MONTH(CURDATE()) ". 
"GROUP BY DATE(bill.date) , bill.agent_id ".
"ORDER BY bill.date ASC"; 
```

# android - 使用 SimpleOnGestureListener 实现 onUp 事件处理程序

> ID：14216086
> 
> 赞同：4
> 
> 时间：2013-01-08T13:32:58.030
> 
> 标签：android

我对 Android 编程有点陌生，最近我把注意力转向了处理简单的手势。我了解 GestureDetector 和侦听器，并且成功实现了我需要的简单手势（onDown、onFling、onScroll）。问题是我需要 SimpleOnGestureListener 类中不可用的 onUp 方法。我有一个活动和一个自定义视图。视图实际上并没有做任何事情，只是改变了背景颜色。我正在做活动中的所有事件处理。

我尝试的是在视图的 onTouchListener 的 onTouch 方法中处理 ACTION_UP 事件，但是这种方式 onFLing 不起作用。我还在这里阅读了一个解决方案：[GestureDetector 上的 OnUp 事件](https://stackoverflow.com/questions/5722719/onup-event-on-gesturedetector)，它说我应该覆盖 onTouchEvent，但我不清楚应该覆盖哪个 onTouchEvent，在哪里以及如何覆盖。我正在插入我当前的代码，也许它有帮助。:)

```
public class Main extends Activity 
{
private GestureDetector gDetector;
public CustomView cView;
View.OnTouchListener gestureListener;

private static final int SWIPE_MIN_DISTANCE = 120;
private static final int SWIPE_MAX_OFF_PATH = 250;
private static final int SWIPE_THRESHOLD_VELOCITY = 200;

public Vibrator vibrator;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    vibrator = (Vibrator)getApplicationContext().getSystemService(Context.VIBRATOR_SERVICE);
    gDetector=new GestureDetector(this, new gListener());
    gDetector.setIsLongpressEnabled(true);
    gestureListener=new View.OnTouchListener(){

        public boolean onTouch(View v, MotionEvent event) 
        {
            if(event.getAction()==MotionEvent.ACTION_UP)
            {
                cView.setBackgroundColor(Color.RED);
                return true;
            }
            else
            return gDetector.onTouchEvent(event);
        }
    };
    cView=new CustomView(this);
    cView.setOnTouchListener(gestureListener);
    cView.setBackgroundColor(Color.BLACK);
    cView.setLongClickable(true);
    setContentView(cView);
}

class gListener extends GestureDetector.SimpleOnGestureListener
{

     @Override
     public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY)
     {
         try 
         {
             if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
                 return false;
             if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                 cView.setBackgroundColor(Color.WHITE);
             }  else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                 cView.setBackgroundColor(Color.GRAY);
             }
         } catch (Exception e) {
             // nothing
         }
         return false;
     }

     @Override
     public boolean onScroll (MotionEvent e1, MotionEvent e2, float distanceX, float distanceY)
     {
         vibrator.vibrate(30);
         Log.d("Event", "MOVE");
         return true;
     }

     @Override
     public boolean onDown(MotionEvent e)
     {
         cView.setBackgroundColor(Color.BLUE);
         Log.d("Event", "DOWN");
         return true;
     }

     @Override
     public boolean onSingleTapUp(MotionEvent e)
     {
         Log.d("Event", "UP"); 
         return true;
     }

} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T14:12:24.067

试试这个方法...

```
@Override
public boolean onTouchEvent(MotionEvent me) {

Log.v("Touch", "ontouch: " + me.getAction());

if(me.getAction() == 0){
    Log.v("Touch Down", "Down");
}
else if (me.getAction() == 1) {
    Log.v("Touch Up", "Up");
}
else if (me.getAction() == 2) {
    Log.v("touch Scroll", "Scroll");
}
boolean detectedUp = event.getAction() == MotionEvent.ACTION_UP;
if (!mGestureDetector.onTouchEvent(event) && detectedUp)
{
    return onUp(event);
}
return true;
} 
```

# javascript - 如何在 mocha 路由器中设置变量的值

> ID：14216087
> 
> 赞同：0
> 
> 时间：2013-01-08T13:33:01.930
> 
> 标签：javascript, mocha.js

我正在为我的网站使用 mocha 创建一些测试，但遇到了一个问题：

我在路由器中有一个变量，当我的服务器通过在页面上上传文档来回答我时，我正在设置该变量。我的问题是当我运行测试时我不在此页面上，因此未定义变量。我需要说我也在与 Backbone 合作。

在我的路由器中：

```
var router = new Router();
window.router = router;

window.router.streamId = ""; 
```

在我看来：

```
initialize: function (options){
    this.idStream = options.streamId;
} 
```

有人告诉我将其设置为 beforeEach 但似乎此时未定义 window.router。

我也尝试在“跑步者”中执行此操作，该变量是在我进入测试页面时定义的，但它仍然显示相同的错误。

我希望我已经清楚了，

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:50:13.000

我发现了如何处理这个问题：

我首先在 beforeEach 中设置了我的 var int 的值：

```
var options = {streamId: "example_stream"}; 
```

我将 var 的值设置到测试中：

```
it.only('should display the first search box', function(done) {
      $('#main').empty().append(new TraitementView(options).render().$el);
} 
```

# python - 如何捕获 unicodedecode 错误 python？

> ID：14216092
> 
> 赞同：1
> 
> 时间：2013-01-08T13:33:21.633
> 
> 标签：python

你如何捕捉在 python 中遇到的 unicodedecode 错误并打印出有问题的字符串是什么？

即“...无法解码位置 8 中的字节 XXXX：无效的起始字节”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T13:38:16.170

这应该让你开始：

```
try:
    s = '\xFEFEF'
    u = s.decode('utf8')
except UnicodeDecodeError as e:
    for p in dir(e):
        if not p.startswith('_'):
            print '%s=%r' % (p, getattr(e, p)) 
```

结果：

```
args=('utf8', '\xfeFEF', 0, 1, 'invalid start byte')
encoding='utf8'
end=1
message=''
object='\xfeFEF'
reason='invalid start byte'
start=0 
```

# c# - 为什么计时器让我的对象保持活力？

> ID：14216098
> 
> 赞同：7
> 
> 时间：2013-01-08T13:33:37.943
> 
> 标签：c#, events, timer

**前言**：我知道如何解决问题。我想知道它**为什么**会出现。请从上到下阅读问题。

我们都（应该）知道，添加事件处理程序会导致 C# 中的内存泄漏。请参阅[为什么以及如何避免事件处理程序内存泄漏？](https://stackoverflow.com/questions/4526829/why-and-how-to-avoid-event-handler-memory-leaks)

另一方面，对象通常具有相似或相互关联的生命周期，并且没有必要取消注册事件处理程序。考虑这个例子：

```
using System;

public class A
{
    private readonly B b;

    public A(B b)
    {
        this.b = b;
        b.BEvent += b_BEvent;
    }

    private void b_BEvent(object sender, EventArgs e)
    {
        // NoOp
    }

    public event EventHandler AEvent;
}

public class B
{
    private readonly A a;

    public B()
    {
        a = new A(this);
        a.AEvent += a_AEvent;
    }

    private void a_AEvent(object sender, EventArgs e)
    {
        // NoOp
    }

    public event EventHandler BEvent;
}

internal class Program
{
    private static void Main(string[] args)
    {
        B b = new B();

        WeakReference weakReference = new WeakReference(b);
        b = null;
        GC.Collect();
        GC.WaitForPendingFinalizers();

        bool stillAlive = weakReference.IsAlive; // == false
    }
} 
```

`A`并`B`通过事件隐式地相互引用，但 GC 可以删除它们（因为它不使用引用计数，而是使用标记和清除）。

但现在考虑这个类似的例子：

```
using System;
using System.Timers;

public class C
{
    private readonly Timer timer;

    public C()
    {
        timer = new Timer(1000);
        timer.Elapsed += timer_Elapsed;
        timer.Start(); // (*)
    }

    private void timer_Elapsed(object sender, ElapsedEventArgs e)
    {
        // NoOp
    }
}

internal class Program
{
    private static void Main(string[] args)
    {
        C c = new C();

        WeakReference weakReference = new WeakReference(c);
        c = null;
        GC.Collect();
        GC.WaitForPendingFinalizers();
        bool stillAlive = weakReference.IsAlive; // == true !
    }
} 
```

为什么GC不能删除`C`对象？为什么 Timer 使对象保持活动状态？计时器是否通过计时器机制的一些“隐藏”参考（例如静态参考）保持活动状态？

(*) 注意：如果只创建计时器，而不启动计时器，则不会出现此问题。如果它已启动然后停止，但事件处理程序未取消注册，则问题仍然存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T17:59:16.427

定时器逻辑依赖于操作系统功能。实际上是操作系统触发了事件。操作系统反过来使用[CPU 中断](http://en.wikipedia.org/wiki/Interrupt)来实现它。

OS API，又名 Win32，不包含对任何类型的任何对象的引用。它保存在定时器事件发生时必须调用的函数的内存地址。.NET GC 无法跟踪此类“引用”。结果，可以在不取消订阅低级别事件的情况下收集计时器对象。这是一个问题，因为操作系统无论如何都会尝试调用它，并且会因一些奇怪的内存访问异常而崩溃。这就是 .NET Framework 将所有此类计时器对象保存在静态引用对象中并仅在您取消订阅时将它们从该集合中删除的原因。

如果您使用 SOS.dll 查看对象的根目录，您将获得下一张图片：

```
!GCRoot 022d23fc
HandleTable:
    001813fc (pinned handle)
    -> 032d1010 System.Object[]
    -> 022d2528 System.Threading.TimerQueue
    -> 022d249c System.Threading.TimerQueueTimer
    -> 022d2440 System.Threading.TimerCallback
    -> 022d2408 System.Timers.Timer
    -> 022d2460 System.Timers.ElapsedEventHandler
    -> 022d23fc TimerTest.C 
```

然后，如果您查看 dotPeek 之类的 System.Threading.TimerQueue 类，您会发现它是作为单例实现的，并且它包含一个计时器集合。

这就是它的工作原理。不幸的是，MSDN 文档对此并不十分清楚。他们只是假设如果它实现了 IDisposable 那么你应该毫无疑问地处理它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T14:51:04.020

> 计时器是否通过计时器机制的一些“隐藏”参考（例如静态参考）保持活动状态？

是的。它内置在 CLR 中，当您使用 Reference Source 或反编译器时，您可以看到它的踪迹，即 Timer 类中的私有“cookie”字段。它作为第二个参数传递给实际实现计时器的 System.Threading.Timer 构造函数，即“状态”对象。

CLR 保留启用的系统计时器列表并添加对状态对象的引用以确保它不会被垃圾收集。这反过来又确保了只要 Timer 对象在列表中，它就不会被垃圾收集。

因此，收集 System.Timers.Timer 垃圾需要调用它的 Stop() 方法或将其 Enabled 属性设置为 false，同样的事情。这会导致 CLR 从活动计时器列表中删除系统计时器。这也删除了对*状态*对象的引用。然后使计时器对象符合收集条件。

显然这是理想的行为，您通常不希望计时器在它处于活动状态时消失并停止滴答作响。当您使用System.Threading.Timer时*会*发生这种情况，如果您不保留对它的引用，无论是显式地还是使用*状态*对象，它都会停止调用它的回调。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T13:50:30.563

我认为这与 Timer 的实现方式有关。当您调用 Timer.Start() 时，它会设置 Timer.Enabled = true。看Timer.Enabled的实现：

```
public bool Enabled
{
    [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")]
    get
    {
        return this.enabled;
    }
    set
    {
        if (base.DesignMode)
        {
            this.delayedEnable = value;
            this.enabled = value;
        }
        else if (this.initializing)
        {
            this.delayedEnable = value;
        }
        else if (this.enabled != value)
        {
            if (!value)
            {
                if (this.timer != null)
                {
                    this.cookie = null;
                    this.timer.Dispose();
                    this.timer = null;
                }
                this.enabled = value;
            }
            else
            {
                this.enabled = value;
                if (this.timer == null)
                {
                    if (this.disposed)
                    {
                        throw new ObjectDisposedException(base.GetType().Name);
                    }
                    int dueTime = (int) Math.Ceiling(this.interval);
                    this.cookie = new object();
                    this.timer = new Timer(this.callback, this.cookie, dueTime, this.autoReset ? dueTime : 0xffffffff);
                }
                else
                {
                    this.UpdateTimer();
                }
            }
        }
    }
} 
```

看起来像创建了一个新的计时器，并传递了一个 cookie 对象（非常奇怪！）。遵循该调用路径会导致涉及创建 TimerHolder 和 TimerQueueTimer 的其他一些复杂代码。我希望在某些时候会创建在 Timer 本身之外保存的引用，直到您调用 Timer.Stop() 或 Timer.Enabled = false。

这不是一个明确的答案，因为我发布的代码都没有创建这样的参考；但它的胆量足够复杂，让我怀疑这样的事情正在发生。

如果你有 Reflector（或类似的）看看，你就会明白我的意思。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T13:37:53.367

因为`Timer`仍然活跃。（事件处理程序没有被删除`Timer.Elapsed`）。

如果要正确处理，实现[`IDisposable`](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)接口，删除方法中的事件处理程序`Dispose`，并使用`using`块或`Dispose`手动调用。不会出现该问题。

例子

```
 public class C : IDisposable  
 {
    ...

    void Dispose()
    {
      timer.Elapsed -= timer_elapsed;
    }
 } 
```

进而

```
 C c = new C();

 WeakReference weakReference = new WeakReference(c);
 c.Dispose();
 c = null; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T13:39:45.457

我认为问题出在这条线上；

```
c = null; 
```

一般来说，大多数开发人员认为使对象等于 null 会导致对象被垃圾收集器删除。但这种情况并非如此; 实际上只删除了对内存位置（创建 c 对象的位置）的引用；如果有任何其他对相关内存位置的引用，对象将不会被标记为删除。在这种情况下，由于`Timer`引用了相关的内存位置，垃圾收集器不会删除对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-13T08:23:34.910

我们先来说说Threading.Timer。在内部，计时器将使用回调构造一个 TimerQueueTimer 对象，并将状态传递给 Timer ctor（比如 new Threading.Timer(callback, state, xxx, xxx)。TimerQueueTimer 将被添加到静态列表中。

如果回调方法和状态没有“this”信息（比如回调使用静态方法，状态使用 null），那么在没有引用时可以对 Timer 对象进行 GC。另一方面，如果使用成员方法进行回调，则包含“this”的委托将存储在上述静态列表中。所以 Timer 对象不能被 GCed，因为“C”（在你的例子中）对象仍然被引用。

现在让我们回到内部包装了 Threading.Timer 的 System.Timers.Timer。注意，前者构造后者时，使用了System.Timers.Timer成员方法，所以不能GCed System.Timers.Timer对象。

# sql-server - 如何从 SQL Server 获取证书公钥？

> ID：14216099
> 
> 赞同：5
> 
> 时间：2013-01-08T13:33:53.030
> 
> 标签：sql-server, database, certificate, key, public

我已将证书导入 SQL Server 数据库。

```
 create certificate MyCertificate from file = 'c:\certificate.cer'; 
```

现在我想检索该证书的公钥。怎么做 ？

我可以

```
select * from sys.certificates 
```

但没有公钥列。

我知道我可以通过

```
backup certificate MyCertificate to file = 'c:\MyCertificate.cer'; 
```

但这不是我想要的。我只需要数据库告诉我公钥或以某种方式让我获得整个证书，但我不想使用文件。

**编辑：**

我想使用 SQL Server 和证书验证数据库表中一行的数字签名。但是由于函数**VerifySignedByCert**不检查证书到期日期（根据此说明：*用于加密和签名的内置函数不检查证书的到期日期。这些函数的用户必须决定何时检查证书到期日期。*在[http:// /msdn.microsoft.com/en-US/library/ms187798%28v=SQL.90%29.aspx](http://msdn.microsoft.com/en-US/library/ms187798%28v=SQL.90%29.aspx)）我必须在 C# 代码中手动完成。

这就是为什么我想获得证书公钥和到期日期（可以在 sys.certificates 中找到）。但似乎将证书存储在表的 varbinary 列中是最好的选择。还是有其他更好的方法来实现这一目标？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:43:01.587

您要查找的信息位于 syscerts 表中的 master 数据库中。但是，没有简单的方法可以获取这些数据。如果您尝试获取密钥，也许您并没有尝试将证书用于 SQL Server 打算使用证书的目的？

如果您尝试将证书存储在 SQL Server 中，但不将它们用于 SQL Server 的安全性，那么您可能希望尝试将它们存储在表的 varbinary 列中。这样的东西对你有用吗？

如果您提供有关您要完成的工作的更多信息，我可能会为您提供更多帮助。

这是 SQL Server 中证书的一个很好的概述：[http ://www.mssqltips.com/sqlservertip/1319/sql-server-2005-encryption-certificates-overview/](http://www.mssqltips.com/sqlservertip/1319/sql-server-2005-encryption-certificates-overview/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-07T14:54:37.977

从 SQL Server 2012 开始，有以下[`CERTENCODED(certid)`](https://docs.microsoft.com/en-us/sql/t-sql/functions/certencoded-transact-sql?view=sql-server-2017)功能：

```
SELECT
     *,
     CERTENCODED(C.certificate_id)
FROM sys.certificates C; 
```

根据文档，您可以使用它来重新创建证书，因此它应该是 ASN 编码的证书（没有私钥）。从那里开始，您应该能够找到将证书导入 C# 代码的方法。如果您只对某个证书感兴趣，您也可以使用它`SELECT CERTENCODED(CERT_ID('myCert')), CERTPROPERTY(CERT_ID('myCert'), 'Expiry_Date')`来获取所需的数据。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-06T05:55:55.427

创建表 create table Atm ( AID int identity, PIN varchar(300) ) INSERT INTO Atm(PIN) VALUES (EncryptByCert(cert_id('PinNumber1'),'473429000000')) INSERT INTO Atm(PIN) VALUES (EncryptByCert(cert_id ('PinNumber1'),'473567000000')) 插入 Atm(PIN) 值 (EncryptByCert(cert_id('PinNumber1'),'4678904290000'))

之后创建一个证书如下： -

CREATE CERTIFICATE PinNumber1 ENCRYPTION BY PASSWORD ='3e@k80*^' WITH SUBJECT = 'This Pin number is Encrpted'

如果您想稍后解密它：-

从 AID=2 的 Atm 中选择 convert(varchar(max), DecryptByCert(cert_id('PinNumber1'),PIN,N'3e@k80*^'))

# eclipse - 将裸仓库链接到 Git 中的实际仓库和接收后挂钩

> ID：14216101
> 
> 赞同：1
> 
> 时间：2013-01-08T13:33:57.353
> 
> 标签：eclipse, git, version-control, egit

到目前为止，从阅读 git 教程我了解到，为了共享驻留在我的 ubuntu linux 服务器中的项目文件，我需要创建一个裸存储库并将其链接到实际存储库，以便当用户克隆实际存储库时，他们会获得实际存储库有实际的工作文件。

当他们将更改推送到服务器时，post-receive 挂钩现在会更新包含工作文件的实际 repo。

这就是我能理解的所有内容，除此之外，我有很多困惑，我有以下问题：

```
1) How do I create my bare repo.
2) How do I link it to the actual repo consisting the actual work files.
3) And what is this post-receive hook? Where does it reside? And what configurations do I need to do for the same. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:22:46.950

> 如何创建我的裸仓库。

读[这个](http://git-scm.com/book/en/Git-on-the-Server-Getting-Git-on-a-Server)。

**要将现有**存储库克隆到新存储库`bare`中，您将运行以下命令：

```
git clone --bare my_project my_project.git 
```

> 如何将其链接到包含实际工作文件的实际存储库。

读[这个](http://git-scm.com/book/en/Git-Basics-Working-with-Remotes)。

存储库`non-bare`可以添加`bare`为`remote`：

```
git remote add <name> <remote-URL> 
```

然后，从`non-bare`：

```
git push <name-of-remote> <branch-to-push-from>:<remote-branch-to-push-to>. 
```

同样，这一切都包含在[Git SCM book](http://git-scm.com/book/en/Git-Basics-Working-with-Remotes)中，我**建议您在再次在 StackOverflow 上提出相同的问题之前阅读**这本书。

读了这本书。它为您提供要搜索的术语（例如`git remote repositories`、`git bare server`等）。当您知道要搜索什么时，StackOverflow 上有*很多*关于此的问题。

> 这个接收后挂钩是什么？

这是一个在存储库被`push`编辑后运行的脚本。（在它收到数据后，存储库运行`post-receive`脚本 - 明智的命名）。

> 它住在哪里？

在存储库的`hooks`目录中`bare`；`.git/hooks`否则。读[这个](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)。

> 我需要为此做哪些配置。

**您不需要`post-receive`钩子**来完成您要求做的事情（设置一个基本存储库，`bare`以便少数多个用户可以使用它）。如果您不知道 a是什么，则此时**不需要。**设置您的存储库，熟悉使用基本的 git 命令并在repo 上与协作者合作，并询问有关设置和使用钩子的特定问题。`git push``git pull``hook`**`bare``post-receive`**

 **我不能强调这一点：**读这本书**。我会帮你的。我学到了很多。:) 它**会**告诉你如何：

1.  如何创建我的裸仓库。（这是[`Chapter 4`](http://git-scm.com/book/en/Git-on-the-Server)）。
2.  如何将其链接到包含实际工作文件的实际存储库。（这是[`Chapter 2, section 5`](http://git-scm.com/book/en/Git-Basics-Working-with-Remotes)）。
3.  这个接收后挂钩是什么？它住在哪里？我需要为此做哪些配置。（这是[`Chapter 7, section 3`](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:23:51.207

该`.git`文件夹是真正的存储库。它将是本地工作文件夹中的一个文件夹，但裸存储库没有工作文件夹，因此它具有 .git 扩展名。

裸存储库是没有工作文件夹（即文件被签出的地方）的存储库。要创建一个裸存储库，请使用`git init --bare <repository name>`.

在本地工作时，`git clone <repository path> <working folder>`执行 a 以制作远程存储库的本地副本。`git fetch`然后使用or定期更新，`git pull`并使用 将更改应用回服务器`git pull`。在本地克隆存储库会为其创建一个名为远程的名称，该名称是`origin`.

分支基本上是一个命名的开发路径，是使用`git branch`命令创建的。将本地分支与远程分支链接会告诉 git 在获取和推送时默认使用什么，并且可以简化使用的命令。要链接或跟踪远程分支，请使用`git branch -u <remote>/<branch>`.

对于任何这些基本操作，没有理由参与 git 的各种钩子。

[git book](http://www.git-scm.com/book)很好地涵盖了这些基本操作。**

# java - Jersey 将文件部署到 activiti-rest 服务 500 来自服务的消息

> ID：14216105
> 
> 赞同：2
> 
> 时间：2013-01-08T13:34:17.900
> 
> 标签：java, rest, jersey, webservice-client, activiti

我正在尝试连接到 activiti-rest 服务。我想用服务部署一个 bpmn 文件，所以我使用 jersey 创建了一个客户端，但是在我运行类之后，从服务接收到 500 消息。

```
package org.cacib.beans;
import java.io.File;
import java.net.URI;

import javax.rmi.CORBA.Stub;
import javax.ws.rs.core.Cookie;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.UriBuilder;

import org.codehaus.jettison.json.JSONArray;
import org.codehaus.jettison.json.JSONException;
import org.codehaus.jettison.json.JSONObject;

import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.ClientResponse;
import com.sun.jersey.api.client.WebResource;
import com.sun.jersey.api.client.config.ClientConfig;
import com.sun.jersey.api.client.config.DefaultClientConfig;
import com.sun.jersey.api.client.filter.HTTPBasicAuthFilter;
import com.sun.jersey.api.representation.Form;
import com.sun.jersey.multipart.BodyPart;
import com.sun.jersey.multipart.FormDataMultiPart;
import com.sun.jersey.multipart.MultiPart;
import com.sun.jersey.multipart.file.FileDataBodyPart;

public class ActivitiTest {

/**
 * @param args
 */
/**
 * @param args
 */
/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub

 ClientConfig config = new DefaultClientConfig();
 Client client = Client.create(config);
 client.addFilter(new HTTPBasicAuthFilter("kermit", "kermit"));
 WebResource service = client.resource(getBaseURI());

 JSONObject json = new JSONObject();
 Cookie c = new Cookie("succes","true");
 FormDataMultiPart multiPart = new FormDataMultiPart();  
 File f = new File("C:/workspace-indigo/apurement/src/main/resources/diagrams/apurement.bpmn");

 multiPart.bodyPart( new FileDataBodyPart("file", f,MediaType.APPLICATION_OCTET_STREAM_TYPE)); 

 ClientResponse user = service.path("deployment").accept(MediaType.MULTIPART_FORM_DATA).type(MediaType.MULTIPART_FORM_DATA).header("Content-type",MediaType.MULTIPART_FORM_DATA).post(ClientResponse.class,multiPart);
 try {
    System.out.println(user);
} catch (Exception e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

}
private static URI getBaseURI() {
    return UriBuilder.fromUri("http://192.168.1.6:8080/activiti-rest/service/").build();
  }
} 
```

![restClient 的屏幕截图](../Images/4a02b4adf0f83d07a4d47e59590b2d19.png)

# jquery - 调整主网格大小时调整子网格列的大小

> ID：14216113
> 
> 赞同：1
> 
> 时间：2013-01-08T13:34:52.943
> 
> 标签：jquery, jqgrid

我正在使用下面的示例代码来创建带有 subGrids 的 jqGrid。

就我而言，我已经删除了 subGrids 的标题。所以，它看起来像一个分组。

在这里，每当我调整主网格列的大小时。我检查了 jqGrid 文档，发现“ **resizeStop** ”返回列 ID 和新宽度。

但是，没有找到类似 setSize 的列。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>SubGrid Editable</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/themes/redmond/jquery-ui.css" />
<link rel="stylesheet" type="text/css" href="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.3.2/css/ui.jqgrid.css" />
<style>
    .groupColumn {
            background-color: #E3E3D7 !important;
            border: 1px solid #F4F4e5;
            font-weight: bold; !important;
    }
    .lockedColumn {
            background-color: #E3E3D7 !important;
            border: 1px solid #F4F4e5;
    }
    .ui-jqgrid .ui-subgrid td.subgrid-data {
        border-top: 0 none !important;
        border-right: 0 none !important;
        border-bottom: 0 none !important;
    }

</style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/js/i18n/grid.locale-en.js"></script>
<script type="text/javascript">
    $.jgrid.no_legacy_api = true;
    $.jgrid.useJSON = true;
</script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/js/jquery.jqGrid.src.js"></script>

<script type="text/javascript">
//<![CDATA[
    /*global $ */
    /*jslint browser: true, eqeq: true, plusplus: true */
    $(function () {
        "use strict";
        var colModelData =[{"classes":"groupColumn","name":"itemName","editable":false, "width":"80"},{"width":"80","name":"24394","editable":true},{"width":"80","name":"24390","editable":true},{"width":"80","name":"24387","editable":true},{"width":"80","name":"24386","editable":true},{"width":"80","name":"24385","editable":true},{"width":"80","name":"24383","editable":true},{"width":"80","name":"24369","editable":true},{"width":"80","name":"24306","editable":true}],
            colNamesArray = ["Name","12/21/2012","12/10/2012","12/03/2012","11/27/2012","11/15/2012","11/12/2012","11/09/2012","10/15/2012"],
         editableRows = [0],

         myData = [{"id":"group1","itemName":"Goal Scored","subGridData":[{"id":0,"itemName":"Cristiano Ronaldo","24369":"2","24387":"1","24394":"3","24306":"0","24390":"0","24385":"4","24386":"2","24383":"1"}]},
         {"id":"group2","itemName":"Yellow Cards","subGridData":[{"id":0,"itemName":"Cristiano Ronaldo","24369":"0","24387":"1","24394":"2","24306":"0","24390":"0","24385":"2","24386":"0","24383":"0"}]}];

        $("#list").jqGrid({
            datatype: "local",
            data: myData,
            colNames: colNamesArray,
            colModel: colModelData,
            gridview: true,
            height: "100%",
            width: "100%",
            caption: "Create subgrid from local data",
            subGrid: true,
             subGridOptions: {
                    reloadOnExpand: false,
                    selectOnExpand: false
                },
            subGridRowExpanded: function (subgridDivId, parentRowId) {
                    var $subgrid = $("<table id='" + subgridDivId + "_t'></table>");
                    $subgrid.appendTo("#" + $.jgrid.jqID(subgridDivId));
                    var data = $(this).jqGrid("getLocalRow", parentRowId);
                    $subgrid.jqGrid({
                            datatype: "local",
                            data: $(this).jqGrid("getLocalRow", parentRowId).subGridData,
                            colModel:colModelData,
                            height: "100%",
                            autoencode: true,
                            gridview: true
                    });

            $subgrid.closest("div.ui-jqgrid-view")
                    .children("div.ui-jqgrid-hdiv").hide();
            }, gridComplete: function(){
                    $("#list").jqGrid("expandSubGridRow","group1");
            }   

        });

    });
//]]>
</script> 
```

屏幕：

![在此处输入图像描述](../Images/554aab88547290a643b781dfd47b8b7f.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T19:08:15.890

你的问题很有趣，但答案并不容易。尽管如此，我还是投入了一些时间，并为您提供[了以下演示](http://www.ok-soft-gmbh.com/jqGrid/SubgridWithLocalGridAndHiddenColumnHeaders1.htm)，展示了如何实施该解决方案。该实现基于对内部函数[源代码的分析，该](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.base.js#L795-L830)`dragEnd`函数将在`mouseup`回调内部调用（参见[此处](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.base.js#L2613-L2616)）。`mousemove`回调（见[这里](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.base.js#L2609-L2611)）和`mousedown`列标题（见[这里](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.base.js#L2341-L2346)）一起播放。

结果[演示](http://www.ok-soft-gmbh.com/jqGrid/SubgridWithLocalGridAndHiddenColumnHeaders1.htm)调整了子网格列的大小：

![在此处输入图像描述](../Images/46885c47509339789bb1811f92007d02.png)

我在演示中包含了在调整列大小后调整整个网格大小的技巧。它最初在[答案](https://stackoverflow.com/a/9599685/315935)中进行了描述。我个人在每个生产网格中都使用它，因为我更喜欢没有滚动条的网格。

`document.ready`下面我包含演示的完整代码（全部来自处理程序）：

```
var myData = [
        {
            id: "10",
            c1: "My Value 1.1",
            c2: "My Value 1.2",
            c3: "My Value 1.3",
            c4: "My Value 1.4",
            subgridData: [
                { id: "10", c1: "aa", c2: "ab", c3: "ac", c4: "ad" },
                { id: "20", c1: "ba", c2: "bb", c3: "bc", c4: "bd" },
                { id: "30", c1: "ca", c2: "cb", c3: "cc", c4: "cd" }
            ]
        },
        {
            id: "20",
            c1: "My Value 2.1",
            c2: "My Value 2.2",
            c3: "My Value 2.3",
            c4: "My Value 2.4",
            subgridData: [
                { id: "10", c1: "da", c2: "db", c3: "dc", c4: "dd" },
                { id: "20", c1: "ea", c2: "eb", c3: "ec", c4: "ed" },
                { id: "30", c1: "fa", c2: "fb", c3: "fc", c4: "fd" }
            ]
        },
        {
            id: "30",
            c1: "My Value 3.1",
            c2: "My Value 3.2",
            c3: "My Value 3.3",
            c4: "My Value 3.4",
            subgridData: [
                { id: "10", c1: "ga", c2: "gb", c3: "gc", c4: "gd" },
                { id: "20", c1: "ha", c2: "hb", c3: "hc", c4: "hd" },
                { id: "30", c1: "ia", c2: "ib", c3: "ic", c4: "id" }
            ]
        }
    ],
    mainGridPrefix = "s_";

$("#list").jqGrid({
    datatype: "local",
    data: myData,
    colNames: ["Column 1", "Column 2", "Column 3", "Column 4"],
    colModel: [
        { name: "c1", width: 100 },
        { name: "c2", width: 130 },
        { name: "c3", width: 150 },
        { name: "c4", width: 170 }
    ],
    rowNum: 10,
    rowList: [5, 10, 20],
    pager: "#pager",
    gridview: true,
    ignoreCase: true,
    rownumbers: true,
    sortname: "c1",
    viewrecords: true,
    autoencode: true,
    height: "100%",
    idPrefix: mainGridPrefix,
    subGrid: true,
    subGridRowExpanded: function (subgridDivId, rowId) {
        var $subgrid = $("<table id='" + subgridDivId + "_t'></table>"),
            pureRowId = $.jgrid.stripPref(mainGridPrefix, rowId),
            colModel = $(this).jqGrid("getGridParam", "colModel");

        $subgrid.appendTo("#" + $.jgrid.jqID(subgridDivId));
        $subgrid.jqGrid({
            datatype: "local",
            data: $(this).jqGrid("getLocalRow", pureRowId).subgridData,
            colModel: [
                { name: "c1", width: (colModel[2].width - 2) },
                { name: "c2", width: colModel[3].width },
                { name: "c3", width: colModel[4].width },
                { name: "c2", width: (colModel[5].width - 2) }
            ],
            height: "100%",
            rowNum: 10000,
            autoencode: true,
            gridview: true,
            idPrefix: rowId + "_"
        });
        $subgrid.closest("div.ui-jqgrid-view")
            .children("div.ui-jqgrid-hdiv")
            .hide();
    },
    resizeStop: function (newWidth, index) {
        // grid.dragEnd()
        var widthChange = this.newWidth - this.width,
            $theGrid = $(this.bDiv).find(">div>.ui-jqgrid-btable"),
            $subgrids = $theGrid.find(">tbody>.ui-subgrid>.subgrid-data>.tablediv>.ui-jqgrid>.ui-jqgrid-view>.ui-jqgrid-bdiv>div>.ui-jqgrid-btable");
        $subgrids.each(function () {
            var grid = this.grid;
            // we have subgrids which have no internal subgrids
            // it reduce the number of columns to 1
            // we have rownumbers: true in the main grid, but not in subgrids
            // it reduce the number of columns to additional 1
            // so we should use (index - 2) as the column index in the subgrids
            grid.resizing = { idx: (index - 2) };
            grid.headers[index - 2].newWidth = (index - 2 === 0) || (index - 1 === grid.headers.length) ? newWidth - 2 : newWidth;
            grid.newWidth = grid.width + widthChange;
            grid.dragEnd.call(grid);
            $(this).jqGrid("setGridWidth", grid.newWidth, false);
        });
        $theGrid.jqGrid("setGridWidth", this.newWidth, false);
    }
}).jqGrid("navGrid", "#pager", {add: false, edit: false, del: false}); 
```

**更新**：[答案](https://stackoverflow.com/a/20030652/315935)介绍了`setColWidth`基于上述解决方案代码的新方法。一种使用新`setColWidth`方法来简化`resizeStop`.

# java - 强制paintAll() 绘制一个不可见的JPanel 及其组件？

> ID：14216115
> 
> 赞同：4
> 
> 时间：2013-01-08T13:34:55.533
> 
> 标签：java, swing, graphics, printing, bufferedimage

我正在将一系列 JPanel 打印到[Printable](http://docs.oracle.com/javase/6/docs/api/java/awt/print/Printable.html)，这是基本打印界面，它提供了一个 Graphics 对象，您可以绘制您想要打印的内容。如果我有一个“活的”JPanel，那就是在 UI 的某个地方，一切都很好。

但是，如果我创建了一个 JPanel 并且从不将其添加到 UI 中，那么 printAll() 似乎什么都不做。将代码简化为 SSCCE：

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.image.BufferedImage;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class SSCCEPaintInvisible
{
    public static void main(String[] args)
    {
        /* Create an JPanel with a JLabel */
        JPanel panel = new JPanel();
        //panel.setLayout(new FlowLayout());
        JLabel label = new JLabel("Hello World");
        panel.add(label);
        //label.invalidate();
        //panel.invalidate();

        /* Record a picture of the panel */
        BufferedImage image = new BufferedImage(100, 100, BufferedImage.TYPE_4BYTE_ABGR);
        Graphics g = image.getGraphics();

        /* Draw something to ensure we're drawing */
        g.setColor(Color.BLACK);
        g.drawLine(0, 0, 100, 100);

        /* Attempt to draw the panel we created earlier */ 
        panel.paintAll(g);  // DOES NOTHING. :(

        /* Display a frame to test if the graphics was captured */
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JLabel label2 = new JLabel( new ImageIcon(image) );
        frame.add(label2);
        frame.pack();

        frame.setVisible(true);
            // shows ONLY the black line we drew in the Graphics
    }
} 
```

如果我为面板创建一个 JFrame 并将面板添加到 JFrame 并在调用 paintAll() 之前使 JFrame 可见，则代码会按预期将 UI 捕获到 Graphic。当然，这会在您的屏幕上闪烁一个 JFrame 来打印它。

有什么方法可以将从未添加到 UI 的 JPanel 渲染为 Graphics 对象？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:52:33.170

来自@Kleopatra 答案的提示。

![SSCCEPaintInvisible](../Images/efa02183877a5505d0210697a607ac36.png)

```
import java.awt.*;
import java.awt.image.BufferedImage;
import javax.swing.*;

public class SSCCEPaintInvisible
{
    public static void main(String[] args)
    {
        /* Create an JPanel with a JLabel */
        JPanel panel = new JPanel();

        JLabel label = new JLabel("Hello World");
        panel.add(label);
        // Next 3 are very important!
        panel.setSize(panel.getPreferredSize());
        panel.addNotify();
        panel.doLayout();

        /* Record a picture of the panel */
        BufferedImage image = new BufferedImage(100, 100, BufferedImage.TYPE_4BYTE_ABGR);
        Graphics g = image.getGraphics();

        /* Draw something to ensure we're drawing */
        g.setColor(Color.BLACK);
        g.drawLine(0, 0, 100, 100);

        /* Attempt to draw the panel we created earlier */
        panel.paintAll(g);  // DOES NOTHING. :(

        /* Display a frame to test if the graphics was captured */
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JLabel label2 = new JLabel( new ImageIcon(image) );
        frame.add(label2);
        frame.pack();

        frame.setVisible(true);
            // shows ONLY the black line we drew in the Graphics
    }
} 
```

正如@GagandeepBali 所指出的，这个 GUI 不是在 EDT 上创建的。如果未在 EDT 上完成对 GUI 的更改，结果将是不可预测的。有关更多详细信息，请参阅[Swing 中的并发，](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)尤其是[初始线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)。

# ios - 如何在 iOS 6 中从 Twitter 获取用户信息？

> ID：14216116
> 
> 赞同：4
> 
> 时间：2013-01-08T13:34:58.553
> 
> 标签：ios, twitter, ios6, social-framework, slcomposeviewcontroller

我正在尝试集成 Ios 6 和 twitter 以使用 slcomposeviewcontroller 发送推文，但我无法弄清楚如何从 twitter 帐户获取用户信息。

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T14:12:32.453

你在正确的轨道上，但你使用了错误的框架。社交框架中的 SLComposeViewController 类仅用于共享。如果您想获取有关当前登录帐户的信息，则必须使用[Accounts Framework](http://developer.apple.com/library/ios/#documentation/Accounts/Reference/AccountsFrameworkRef/_index.html#//apple_ref/doc/uid/TP40011024)。

```
#import <Accounts/Accounts.h>

- (void)getTwitterAccountInformation
{
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];
    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

    [accountStore requestAccessToAccountsWithType:accountType options:nil completion:^(BOOL granted, NSError *error) {
        if(granted) {
            NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

            if ([accountsArray count] > 0) {
                ACAccount *twitterAccount = [accountsArray objectAtIndex:0];
                NSLog(@"%@",twitterAccount.username);
                NSLog(@"%@",twitterAccount.accountType);
            }
        }
    }];
} 
```

# c++ - 使用没有内联代码的 dll 时出现 LNK2028 和 LNK2019 错误

> ID：14216119
> 
> 赞同：1
> 
> 时间：2013-01-08T13:35:02.947
> 
> 标签：c++, .net, dllimport, unmanaged, lnk2019

这是我第一次使用 .NET，当我使用多个项目时，这让我很难受。我究竟做错了什么？这就是我所做的：

1 创建一个新项目（和解决方案）。一个名为“Lib”的“类库”。

2 使用以下代码将文件“Comp1.h”添加到“头文件”：

```
#ifndef COMP1_H
#define COMP1_H
class comp1
{
public:
    comp1(void);
    ~comp1(void);
}
#endif 
```

3 使用以下代码将文件“Comp1.cpp”添加到“源文件”：

```
#include "stdafx.h"
#include "Comp1.h"
comp1::comp1(void){}
comp1::~comp1(void){} 
```

4 我用以下代码覆盖自动创建的“Lib.h”文件的代码：

```
#ifndef LIB_H
#define LIB_H
#include "Comp1.h"
#endif 
```

5 添加一个名为“Test”的“CLR 空项目”并将其设置为启动项目。

6 使用以下代码将文件“test.cpp”添加到“测试”项目的“源文件”中：

```
#include "../Lib/Lib.h"
#using "../Debug/Lib.dll"//Is this line mandatory?
int main()
{
comp1 component;
return 0;
} 
```

7 在“测试”属性中添加“Lib”作为参考。

8 确保在“Project Dependencies”中“Test”依赖于“Lib”。

9 将它们都编译为 /clr

这就是我得到的：

```
1>test.obj : error LNK2028: unresolved token (0A000009) "public: __thiscall comp1::comp1(void)" (??0comp1@@$$FQAE@XZ) referenced in function "int __cdecl main(void)" (?main@@$$HYAHXZ)
1>test.obj : error LNK2028: unresolved token (0A00000A) "public: __thiscall comp1::~comp1(void)" (??1comp1@@$$FQAE@XZ) referenced in function "int __cdecl main(void)" (?main@@$$HYAHXZ)
1>test.obj : error LNK2019: unresolved external symbol "public: __thiscall comp1::~comp1(void)" (??1comp1@@$$FQAE@XZ) referenced in function "int __cdecl main(void)" (?main@@$$HYAHXZ)
1>test.obj : error LNK2019: unresolved external symbol "public: __thiscall comp1::comp1(void)" (??0comp1@@$$FQAE@XZ) referenced in function "int __cdecl main(void)" (?main@@$$HYAHXZ) 
```

如果我创建内联函数，则不会出现此问题。

在论坛上，您可以找到有关包含文件错误的答案，但我很确定我编码的所有内容都是正确的。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:55:52.897

创建 DLL 时，您必须使用指令明确标记要导出的函数和类`__declspec(dllexport)`，从而使它们可供客户端导入。当您导入类时，您必须使用该`__declspec(dllimport)`指令。

[本文档](http://msdn.microsoft.com/en-us/library/8fskxacy%28v=vs.80%29.aspx)展示了如何在标题中标记类和全局函数，以便它们可以用于导出和导入。

# java - 如何用 JasperReportsContext 替换对 JRParameter.REPORT_FILE_RESOLVER 的使用？

> ID：14216127
> 
> 赞同：4
> 
> 时间：2013-01-08T13:35:20.420
> 
> 标签：java, struts2, jasper-reports

JRParameter.REPORT_FILE_RESOLVER在 5.0**版**中已弃用。Javadoc 建议改用*JasperReportsContext*。

如何使用*JasperReportsContext*？

使用 Struts2 jasper 插件时请求使用。

```
connection=dataSource.getConnection();
reportParams.put(JRParameter.REPORT_FILE_RESOLVER, new SimpleFileResolver(reportsDir)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:22:28.263

有同样的问题（[Jasper Reports 5.0.1 中的文件解析器](https://stackoverflow.com/questions/15004325/file-resolver-in-jasper-reports-5-0-1/15023748#15023748)），几个小时后，我在 JasperReports 源中找到了答案。

```
LocalJasperReportsContext ctx = new LocalJasperReportsContext(DefaultJasperReportsContext.getInstance());
ctx.setClassLoader(getClass().getClassLoader());
ctx.setFileResolver(new FileResolver() {
        @Override
        public File resolveFile(String s) {
            return new File(s);
        }
    });
JasperReport jasperReport = (JasperReport) JRLoader.loadObject(jasperfile);

JasperFillManager fillmgr = JasperFillManager.getInstance(ctx);
JasperExportManager exmgr = JasperExportManager.getInstance(ctx); 
```

**编辑：** 正确的解决方案包括将问题报告给插件的项目票务系统，并可能为解析器的实现提出一个补丁。

在等待补丁被接受时，您可以使用上面的代码扩展`JasperReportsResult`类并覆盖`doExecute()`方法，如下所示：

```
protected void doExecute(String finalLocation, ActionInvocation invocation) throws Exception {
        // Will throw a runtime exception if no "datasource" property. TODO Best place for that is...?
        initializeProperties(invocation);

        LOG.debug("Creating JasperReport for dataSource = {}, format = {}", dataSource, format);

        HttpServletRequest request = (HttpServletRequest) invocation.getInvocationContext().get(ServletActionContext.HTTP_REQUEST);
        HttpServletResponse response = (HttpServletResponse) invocation.getInvocationContext().get(ServletActionContext.HTTP_RESPONSE);

        // Handle IE special case: it sends a "contype" request first.
        // TODO Set content type to config settings?
        if ("contype".equals(request.getHeader("User-Agent"))) {
            try (OutputStream outputStream = response.getOutputStream()) {
                response.setContentType("application/pdf");
                response.setContentLength(0);
            } catch (IOException e) {
                LOG.error("Error writing report output", e);
                throw new ServletException(e.getMessage(), e);
            }
            return;
        }

        // Construct the data source for the report.
        ValueStack stack = invocation.getStack();
        ValueStackDataSource stackDataSource = null;

        Connection conn = (Connection) stack.findValue(connection);
        if (conn == null)
            stackDataSource = new ValueStackDataSource(stack, dataSource, wrapField);

        if ("https".equalsIgnoreCase(request.getScheme())) {
            // set the the HTTP Header to work around IE SSL weirdness
            response.setHeader("CACHE-CONTROL", "PRIVATE");
            response.setHeader("Cache-Control", "maxage=3600");
            response.setHeader("Pragma", "public");
            response.setHeader("Accept-Ranges", "none");
        }

        // Determine the directory that the report file is in and set the reportDirectory parameter
        // For WW 2.1.7:
        //  ServletContext servletContext = ((ServletConfig) invocation.getInvocationContext().get(ServletActionContext.SERVLET_CONFIG)).getServletContext();
        ServletContext servletContext = (ServletContext) invocation.getInvocationContext().get(ServletActionContext.SERVLET_CONTEXT);
        String systemId = servletContext.getRealPath(finalLocation);
        Map parameters = new ValueStackShadowMap(stack);
        File directory = new File(systemId.substring(0, systemId.lastIndexOf(File.separator)));
        parameters.put("reportDirectory", directory);
        parameters.put(JRParameter.REPORT_LOCALE, invocation.getInvocationContext().getLocale());

        // put timezone in jasper report parameter
        if (timeZone != null) {
            timeZone = conditionalParse(timeZone, invocation);
            final TimeZone tz = TimeZone.getTimeZone(timeZone);
            if (tz != null) {
                // put the report time zone
                parameters.put(JRParameter.REPORT_TIME_ZONE, tz);
            }
        }

        // Add any report parameters from action to param map.
        Map reportParams = (Map) stack.findValue(reportParameters);
        if (reportParams != null) {
            LOG.debug("Found report parameters; adding to parameters...");
            parameters.putAll(reportParams);
        }

        ByteArrayOutputStream output;
        JasperPrint jasperPrint;

        LocalJasperReportsContext ctx = new LocalJasperReportsContext(DefaultJasperReportsContext.getInstance());
        ctx.setClassLoader(getClass().getClassLoader());
        ctx.setFileResolver(parameters.get());
        JasperReport jasperReport = (JasperReport) JRLoader.loadObject(jasperfile);

        JasperFillManager fillmgr = JasperFillManager.getInstance(ctx);
        JasperExportManager exmgr = JasperExportManager.getInstance(ctx);

        // Fill the report and produce a print object
        try {
            JasperReport jasperReport = (JasperReport) JRLoader.loadObject(new File(systemId));
            if (conn == null) {
                jasperPrint = fillmgr.fillReport(jasperReport, parameters, stackDataSource);
            }
            else {
                jasperPrint = fillmgr.fillReport(jasperReport, parameters, conn);
            }
        } catch (JRException e) {
            LOG.error("Error building report for uri {}", systemId, e);
            throw new ServletException(e.getMessage(), e);
        }

        // Export the print object to the desired output format
        try {
            if (contentDisposition != null || documentName != null) {
                final StringBuffer tmp = new StringBuffer();
                tmp.append((contentDisposition == null) ? "inline" : contentDisposition);

                if (documentName != null) {
                    tmp.append("; filename=");
                    tmp.append(documentName);
                    tmp.append(".");
                    tmp.append(format.toLowerCase());
                }

                response.setHeader("Content-disposition", tmp.toString());
            }

            JRExporter exporter;

            if (format.equals(FORMAT_PDF)) {
                response.setContentType("application/pdf");
                exporter = new JRPdfExporter(ctx);
            } else if (format.equals(FORMAT_CSV)) {
                response.setContentType("text/csv");
                exporter = new JRCsvExporter(ctx);
            } else if (format.equals(FORMAT_HTML)) {
                response.setContentType("text/html");

                // IMAGES_MAPS seems to be only supported as "backward compatible" from JasperReports 1.1.0

                Map imagesMap = new HashMap();
                request.getSession(true).setAttribute("IMAGES_MAP", imagesMap);

                exporter = new JRHtmlExporter(ctx);
                exporter.setParameter(JRHtmlExporterParameter.IMAGES_MAP, imagesMap);
                exporter.setParameter(JRHtmlExporterParameter.IMAGES_URI, request.getContextPath() + imageServletUrl);

                // Needed to support chart images:
                exporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperPrint);
                request.getSession().setAttribute("net.sf.jasperreports.j2ee.jasper_print", jasperPrint);
            } else if (format.equals(FORMAT_XLS)) {
                response.setContentType("application/vnd.ms-excel");
                exporter = new JRXlsExporter(ctx);
            } else if (format.equals(FORMAT_XML)) {
                response.setContentType("text/xml");
                exporter = new JRXmlExporter(ctx);
            } else if (format.equals(FORMAT_RTF)) {
                response.setContentType("application/rtf");
                exporter = new JRRtfExporter(ctx);
            } else {
                throw new ServletException("Unknown report format: " + format);
            }

            Map exportParams = (Map) stack.findValue(exportParameters);
            if (exportParams != null) {
                LOG.debug("Found export parameters; adding to exporter parameters...");
                exporter.getParameters().putAll(exportParams);
            }

            output = exportReportToBytes(jasperPrint, exporter);
        } catch (JRException e) {
            LOG.error("Error producing {} report for uri {}", format, systemId, e);
            throw new ServletException(e.getMessage(), e);
        } finally {
            try {
                conn.close();
            } catch (Exception e) {
                LOG.warn("Could not close db connection properly", e);
            }
        }

        response.setContentLength(output.size());
        // Will throw ServletException on IOException.
        writeReport(response, output);
    } 
```

而不是使用新的扩展作为 Struts 中的**结果**。请测试该方法是否正确实现。

最终的解决方案应该包括在 Result 对象上使用上下文实例设置器，或者可能是从 Result 对象访问的全局静态上下文实例。

# math - 比较 l*a*b* 颜色

> ID：14216129
> 
> 赞同：2
> 
> 时间：2013-01-08T13:35:21.710
> 
> 标签：math, colors

有一些公式，您可以提供 2 种颜色，并获得相似的颜色，

我最近想知道这是怎么做到的，它一直在我脑海中旋转，我有这个公式 atm。但这一个不起作用，因为我没有得到正确的答案。

```
 so you have to look for a different formula then this one.
   ∆E = √{ (L2 - L1)² + (A2 - A1)² + (B2 - B1)²  } 
```

我有以下 L*a*b* 值

```
 L1 89,24  |   A1 -0,6     |       B1 = 91,29
      L2 81,61  |   A2 -2,72    |       B2 = 87,59 
```

答案应该是：

```
∆E 3,99 
```

有谁知道使用哪种计算来得到正确的答案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T13:59:08.633

根据[Bruce Lindbloom 的颜色计算器](http://www.brucelindbloom.com/index.html?ColorDifferenceCalc.html)，使用您拥有的颜色值，如果您想获得 3.99 的 delta E，您应该在“纺织品”设置上使用[CIE 1994 方程。](http://www.brucelindbloom.com/index.html?Eqn_DeltaE_CIE94.html)

免费的 Python 实现：

```
import math

class Lab:
    def __init__(self, l, a, b):
        self.l = l
        self.a = a
        self.b = b

def cie1976(a, b):
    dl = a.l - b.l
    da = a.a - b.a
    db = a.b - b.b
    return math.sqrt(dl*dl + da*da + db*db)

def cie1994(x, y, isTextiles=True):
    k2 = 0.014 if isTextiles else 0.015
    k1 = 0.048 if isTextiles else 0.045
    kh = 1
    kc = 1
    kl = 2 if isTextiles else 1

    c1 = math.sqrt(x.a*x.a + x.b*x.b)
    c2 = math.sqrt(y.a*y.a + y.b*y.b)

    sh = 1 + k2*c1
    sc = 1 + k1*c1
    sl = 1

    da = x.a - y.a
    db = x.b - y.b
    dc = c1 - c2

    dl = x.l - y.l
    dh = math.sqrt(da*da + db * db - dc*dc)

    return math.sqrt((dl/(kl*sl))**2 + (dc/(kc*sc))**2 + (dh/(kh*sh))**2)

a = Lab(89.24, -0.6, 91.29)
b = Lab(81.61, -2.72, 87.59)

print cie1994(a,b) 
```

结果：

```
3.99245887057 
```

# java - 我的 Android 应用出现新错误

> ID：14216130
> 
> 赞同：0
> 
> 时间：2013-01-08T13:35:22.860
> 
> 标签：java, android, media-player

我收到来自用户的错误消息：

```
 java.lang.NullPointerException
at com.jcolom.olakease.MainActivity$1.onClick(MainActivity.java:54)
at android.view.View.performClick(View.java:2408)
at android.view.View$PerformClick.run(View.java:8816)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4633)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
at dalvik.system.NativeStart.main(Native Method) 
```

我的 MainActivity 是这样的：

```
package com.jcolom.olakease;

import android.os.Bundle;
import android.app.Activity;

import java.io.InputStream;

import android.media.MediaPlayer;
import android.os.Bundle;

import android.app.Activity;
import android.content.Context;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.LinearLayout;
import com.colom.ola.ke.ase.R;

public class MainActivity extends Activity {

        public Button olakease_button1;
        public Button olakease_button2;
        public Button olakease_button3;
        public Button olakease_button4;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.activity_main);
            olakease_button1 = (Button)findViewById(R.id.olakease_button1);
            olakease_button2 = (Button)findViewById(R.id.olakease_button2);
            olakease_button3 = (Button)findViewById(R.id.olakease_button3);
            olakease_button4 = (Button)findViewById(R.id.olakease_button4);
            InputStream fraw = null;
            fraw = getResources().openRawResource(R.raw.olakease1);
            fraw = getResources().openRawResource(R.raw.olakease2);
            fraw = getResources().openRawResource(R.raw.olakease3);

            olakease_button1.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {

                    MediaPlayer mp = MediaPlayer.create(getBaseContext(),
                            R.raw.olakease1);
                            mp.start();

                }
            });

            olakease_button2.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {

                    MediaPlayer mp = MediaPlayer.create(getBaseContext(),
                            R.raw.olakease2);
                            mp.start();

                }
            });

            olakease_button3.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {

                    MediaPlayer mp = MediaPlayer.create(getBaseContext(),
                            R.raw.olakease3);
                            mp.start();

                }
            });

            olakease_button4.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {

                    MediaPlayer mp = MediaPlayer.create(getBaseContext(),
                            R.raw.olakease4);
                            mp.start();

                }
            });

                }
    } 
```

我的 AndroidManifest 是：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.colom.ola.ke.ase"
    android:versionCode="2"
    android:versionName="1.1" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/icono"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" 
        android:screenOrientation="portrait"
        android:name="MainActivity">
        <activity
            android:name="com.jcolom.olakease.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我该怎么办？？正常吗？请，如果您想在您的移动设备上试用我的应用程序.. 这是 Play 商店链接：[https ://play.google.com/store/apps/details?id=com.colom.ola.ke.ase&feature =more_from_developer#?t=W251bGwsMSwyLDEwMiwiY29tLmNvbG9tLm9sYS5rZS5hc2UiXQ](https://play.google.com/store/apps/details?id=com.colom.ola.ke.ase&feature=more_from_developer#?t=W251bGwsMSwyLDEwMiwiY29tLmNvbG9tLm9sYS5rZS5hc2UiXQ) ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:37:07.850

写`MainActivity.this`而不是`getBaseContext()`在所有地方，它会解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:39:35.080

```
 MediaPlayer mp = MediaPlayer.create(getBaseContext(),R.raw.olakease1); 
```

用 MainActivity.this 替换为

```
 MediaPlayer mp = MediaPlayer.create(MainActivity.this, R.raw.olakease1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:46:45.710

如果创建失败，MediaPlayer.create 可以返回 null。它可能会失败，因为它找不到媒体或其格式无效。 [http://developer.android.com/reference/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html)

# c++ - 使用 C++ 进行 https POST 的最安全方法是什么？

> ID：14216137
> 
> 赞同：0
> 
> 时间：2013-01-08T13:35:40.687
> 
> 标签：c++, post

我需要一个简单的启动，可能听起来有点模糊，但是，用 C++ 进行 https POST/GET 最安全的方法是什么？有没有人为它体验过一个好的库？

我在一个中间件软件项目中，需要一个带有 JSON 数据结构的简单 https POST，你知道任何模式或文章吗？

# jsf - ADF 面临的生命周期与 JSF 生命周期有何不同？

> ID：14216139
> 
> 赞同：5
> 
> 时间：2013-01-08T13:35:42.890
> 
> 标签：jsf, oracle-adf

这个[关于 SO 的高度投票答案](https://stackoverflow.com/a/2168741/1527084)表明 ADF faces 的生命周期比 JSF 更长。我想知道这两个生命周期之间有什么区别以及 ADF 的这两个额外生命周期阶段有什么好处？

PS：我很清楚 JSF 生命周期，但我是 ADF 的新手。所以你可以在这个前提下做出你的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T17:35:06.560

JSF 和 ADF 生命周期之间的区别记录在这里：[http ://docs.oracle.com/cd/E15051_01/web.1111/b31974/adf_lifecycle.htm](http://docs.oracle.com/cd/E15051_01/web.1111/b31974/adf_lifecycle.htm)

# hadoop - 无法连接到 oozie 服务器（错误代码：500）

> ID：14216142
> 
> 赞同：1
> 
> 时间：2013-01-08T13:36:00.747
> 
> 标签：hadoop, mapreduce, cloudera, oozie

我试图使用 Java API 运行 oozie 工作流。但是在提交作业时，它给了我一个错误代码 500。请参阅下面的堆栈跟踪。

```
Exception in thread "main" HTTP error code: 500 : Internal Server Error
at org.apache.oozie.client.OozieClient.handleError(OozieClient.java:445)
at org.apache.oozie.client.OozieClient$JobSubmit.call(OozieClient.java:523)
at org.apache.oozie.client.OozieClient$JobSubmit.call(OozieClient.java:493)
at org.apache.oozie.client.OozieClient$ClientCallable.call(OozieClient.java:416)
at org.apache.oozie.client.OozieClient.run(OozieClient.java:587) 
```

我使用的代码是：

```
OozieClient wc = new OozieClient("http://localhost:11000/oozie");
Properties conf = wc.createConfiguration();
conf.setProperty("jobTracker", "http://localhost:8021/");
conf.setProperty(OozieClient.APP_PATH, "localhost:9023/user/688697/jarloc");
// submit and start the workflow job
String jobId = wc.run(conf); 
```

我使用的hadoop生态系统是：Cloudera Distribution for Hadoop v4.1.2

任何帮助是极大的赞赏！

谢谢，阿伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T14:07:58.897

您的逻辑是期望 Oozie 服务器位于执行此代码的同一台机器上，我认为这可能是一个问题。确保您在具有 oozie 服务器的同一台机器上运行上述代码，或者将*“localhost”*替换为 oozie 服务器的实际位置（完整机器名称）。

# css - Windows 上的平滑字体，这两个使用 Twitter Bootstrap 的网站如何实现这一点？

> ID：14216147
> 
> 赞同：0
> 
> 时间：2013-01-08T13:36:15.687
> 
> 标签：css, windows, twitter-bootstrap, fonts, smooth

在带有 Chrome 的 Windows 8 上，大文本字体不流畅。但是，我设法看到了一些文本流畅的网站（相同的环境）。

首先：http: [//twitter.github.com/bootstrap/examples/hero.html](http://twitter.github.com/bootstrap/examples/hero.html)

“你好，世界！” 是平滑的，但是底部的“标题”文本并不像您所看到的那样平滑，即使它们更小。
![在此处输入图像描述](../Images/8ff8ad1d2b97301c49705d2bcacd9928.png)

* * *

另一个是[http://www.asana.com](http://www.asana.com)。在他们的主页上，“做伟大的事情”的文字很流畅。
![在此处输入图像描述](../Images/170a30c683806965417edd0393d055aa.png)

* * *

现在两个页面都使用 Twitter Bootstrap CSS。

当我在 Chrome 开发者工具上查看相关 html 元素的计算样式时，我看到了这些值：

```
background-color: transparent;
border-bottom-left-radius: 0px;
border-bottom-right-radius: 0px;
border-top-left-radius: 0px;
border-top-right-radius: 0px;
color: #333;
display: block;
font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
font-size: 60px;
font-weight: bold;
height: 60px;
letter-spacing: -1px;
line-height: 60px;
margin-bottom: 0px;
margin-left: 0px;
margin-right: 0px;
margin-top: 10px;
padding-bottom: 0px;
padding-left: 0px;
padding-right: 0px;
padding-top: 0px;
text-rendering: optimizelegibility;
width: 1050px; 
```

我看到 Asana 使用了一种名为 proxima-nova-condensed 的字体，但是当我使用它时，它对我来说并不流畅，即使使用文本渲染：optimizelegibility。

你知道他们是如何实现的吗？我想了解如何在没有 Twitter Bootstrap 的情况下（或者如果必须的话，使用 Bootstrap）来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:15:11.973

字体渲染各不相同。如果您仔细观察渲染（例如，截取屏幕并放大像素），您会发现平滑度有所不同。您无能为力（部分在 Mac 环境中除外），因此您只需测试您的文本在各种平台和浏览器中看起来是否可以容忍。

# scheduled-tasks - TYPO3：从草稿创建的邮件总是发送给同一个人

> ID：14216148
> 
> 赞同：0
> 
> 时间：2013-01-08T13:36:17.783
> 
> 标签：scheduled-tasks, typo3, newsletter

我正在创建一个时事通讯（在使用 Direct Mail 的 TYPO3 4.7.7 系统中），人们在那里注册，在接下来的 15 天里，他们每天都会收到不同的电子邮件。

为此，我创建了 15 个不同的邮件列表，并带有一个特殊查询

```
SELECT uid,pid,deleted
FROM tt_address
WHERE ( (<current time stamp> - tstamp) > 86400*0
    AND (<current time stamp> - tstamp) < 86400*(<days from registration> + 1))
    AND tt_address.deleted=0 
```

这工作正常。问题是我需要这个过程自动化，所以我认为我使用调度程序。我创建了 15 个草稿，分配到相应的邮件列表。然后我会使用调度程序从草稿中创建邮件。

问题是每天发送给同一个人的邮件。我担心草稿会保存电子邮件地址的静态列表，而不是每天重新计算查询。

是否有任何解决方法来改变这种行为？

PS：我找到[了一个评论这个问题的线程](http://forge.typo3.org/issues/34432#note-2)，并为 direct_mail 2.7 提供了一个补丁。问题是我正在运行 3.0.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:42:14.350

看来这是一个计划在版本 3.1.0 中解决的错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:50:33.893

我认为您需要创建测试列表并进行检查。我不记得 DirectMail 是否缓存了电子邮件地址。在我看来没有。如果存在包含复制电子邮件地址的字段，请在创建新时事通讯时签入数据库。

# xsd - xml 命名空间如何工作？

> ID：14216150
> 
> 赞同：0
> 
> 时间：2013-01-08T13:36:27.903
> 
> 标签：xsd, xml-validation

假设我有一个带有附加 xsd 文件的 xml 文档。现在假设 xsd 文件从不同的命名空间导入多个 xsd。验证主 XML 文档时，验证过程是否包括嵌套加载所有导入的命名空间以执行验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:12:01.743

验证过程需要某种方法来确保 xml 文档中定义的数据对模式文件中定义的类型有效。

因此，它必须先加载所有模式文件，然后才能验证文件。如果它无法解析 xml 中使用的模式类型，则验证无法真正通过。

但是，验证器没有标准的方法使 xml 文档验证失败，因此如果您的 xml 无效会发生什么取决于验证器的实现。

# ios - UITableview 动态更改填充

> ID：14216154
> 
> 赞同：0
> 
> 时间：2013-01-08T13:36:46.180
> 
> 标签：ios, uitableview

我们有一个 iphone 应用程序，现在正在开发它作为通用应用程序。我们想使用相同的视图，包括表格视图。在左侧，我们使用可以动态扩展的 tableview 进行导航，在右侧，我们的 viewControllers 与 iPhone 基本相同。

由于设计和用户体验的原因，我们不想拉伸它们以填充右侧的整个视图，我们希望它们居中并在左侧和右侧填充。这个填充应该是动态的，因为如果左侧的菜单展开，填充应该减少。

我们试图通过覆盖单元格的 setframe 方法来实现，但它有点尴尬，之前尝试过你们中的某个人吗？

蒂亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:04:15.330

在我的顶层内部`UIView`，我`UIViewController`会创建一个填充视图。让它全宽，`superview`根据需要增长/收缩并将其固定在左侧和右侧。

在填充视图中，创建您的内容视图。使视图变得任意宽，不要水平调整大小，也不要将其固定在左侧或右侧。将其粘贴在填充视图的中心。

现在，如果您说...将填充视图向右移动并通过更改框架上的 origin.x 和 size.width 来缩小它，内部内容视图将保持固定大小并在填充视图中居中。这也将使您滑入屏幕左侧或右侧的菜单。

**根据评论编辑：** 如果您的内部内容视图是表格，但您希望滚动条位于最右侧。

更改`frame.size.height`您的内部内容视图（`UITableView`以匹配您的表格视图的`contentSize.height`值。这将使表格与内容一样大。关闭垂直滚动。（注意：您必须在修改时更新表格视图的高度内容的高度。）

与其让你的填充简单`UIView`，不如让它成为`UIScrollView`.

现在你的表格视图是一个静态高度并且不滚动，没有滚动条。填充视图现在控制滚动，这意味着您可以通过触摸填充以及在填充视图的右侧边缘放置滚动条来滚动。

# c++ - 为什么我可以在 C++ 中将非 void 成员函数称为 void 函数？

> ID：14216173
> 
> 赞同：0
> 
> 时间：2013-01-08T13:38:13.850
> 
> 标签：c++, return-value

我有一个具有（公共）函数返回向量的类（但它似乎无关紧要）。

```
std::vector<int> test() {
return std::vector<int>(1,0);
} 
```

为什么我可以像 void 函数一样调用它，

```
test(); 
```

没有得到编译错误，或者至少没有警告（Wall，pedantic）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T13:40:16.030

您可以丢弃返回值。一般来说，这不是很好的风格，但你总是可以做到的。

这就是我们不能重载返回类型的原因之一。因此，如果您定义另一个 function `void test()`，则由于模棱两可而无法进行调用。

如果您希望编译器警告您（非）有意丢弃返回值的情况，请传递标志`-Wunused-result`（用于 GCC）。[我不知道其他编译器的标志]

一般来说，几乎所有的返回值都是有意义的，所以有些人使用这个宏来检测他们无意丢弃值的情况，特别是如果返回值类似于错误代码，应该事后检查。

如果要为特定功能启用警告，可以在签名末尾添加一个属性（对于 GCC，对于 MSVC，请查看[此问题](https://stackoverflow.com/questions/4226308/msvc-equivalent-of-attribute-warn-unused-result)）：

```
std::vector<int> __attribute__((warn_unused_result)) test() {
    return std::vector<int>(1,0);
} 
```

另请参阅：[如果忽略返回值，如何发出警告？](https://stackoverflow.com/questions/2042780)

因此，如果您调用函数但不使用返回值，则会收到警告。请注意，警告不会使编译失败，为此您需要添加`-Werror`到编译器标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:40:16.543

Because the compiler simply discards the return value. There *may* be options to your compiler that warn about this, but it's not enabled by default.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:43:17.760

It is an error to try to assign a void function return value to a variable (since there is no return value), but it is not an error to discard an actual return value. This is because the function call may still have a side effect, and perhaps the return value is only informative (e.g., a status code, when you're always expecting success). Because of scenarios like that, the language designers decided it is okay in C++ to call a non-void function without capturing the return value.

# oracle10g - Netbeans中的Oracle数据库连接错误

> ID：14216175
> 
> 赞同：0
> 
> 时间：2013-01-08T13:38:16.723
> 
> 标签：oracle10g, oracle11g, database-connection, netbeans-7

我正在使用netbeans 做一个使用oracle 数据库11g 速成版的java 应用程序。构建项目时出现以下错误。

“发生错误：java.sql.SQLRecoverableException：IO 错误：网络适配器无法建立连接”

当我重新安装数据库时它得到了解决，但在下次重新启动后变成了错误。我可以使用 SQL 命令行连接到数据库。谁能告诉我为什么会发生这个错误（我已经将ojdbc6.jar文件添加到项目中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:06:45.507

您的数据库（或 Oracle 侦听器）未运行。您可能缺少在重新启动后自动启动数据库的启动脚本。

如果我没记错的话，你可以在安装过程中选择是否应该在计算机启动时自动启动数据库。

如果您提供有关您的安装（特别是操作系统）的更多信息，那么我可以告诉您如何启动数据库。

# windows - 从批处理文件中选择不同的 HDD 注册表

> ID：14216176
> 
> 赞同：1
> 
> 时间：2013-01-08T13:38:19.397
> 
> 标签：windows, batch-file, windows-8, regedit

我编写了一个简单的批处理文件来更改 Windows8 中的注册表，它在 Windows8 中运行时按预期工作，但现在我想在不同的驱动器号上从命令提示符运行它。

在我的笔记本电脑上以恢复模式启动会启动字母 X：这使我可以访问命令提示符。我在字母 D: 上的外部笔式驱动器上有我的批处理文件。我可以切换到驱动器 d 并运行脚本，但显然它不知道在驱动器号 C: 上查找注册表，我认为它只是在其当前驱动器号 D: 上尝试。

```
REGEDIT4

[HKEY_LOCAL_MACHINE\DummyTree]
"Value"="Some String" 
```

以上是我试图从主 HDD（驱动器 C:) 上的 pendrive（驱动器 D:) 运行的代码示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:40:34.627

您可以尝试`regedit.exe`在 C: 驱动器中指定

```
C:\Windows\regedit.exe /s yourregfile.reg 
```

# jquery - 第一个选择器不会首先过滤，但第一个子项会

> ID：14216188
> 
> 赞同：0
> 
> 时间：2013-01-08T13:38:57.297
> 
> 标签：jquery, html, jquery-mobile, jquery-selectors

我第一次使用了很多次，但这次它不起作用并且控制台中没有错误。我有这个html：

```
<ul>
<li class="iheader"><h1>TITLE</h1></li>
//some more list items
<li class="iheader"></li> 
</ul> 
```

现在运行此代码：

```
$('.iheader:first').removeClass('iheader'); 
```

删除这两个类。我也试过：

```
$('.iheader').filter(':first').removeClass('iheader'); 
```

和同样的结果。

但是，如果我使用`first:child`它时 html 如上所述。

任何人都可能知道为什么？这可能与我包含 jQuery mobile 的事实有关吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T13:40:39.603

尝试

```
$('.iheader:first-child').removeClass('iheader'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:46:18.780

首先使用[jQuery](http://api.jquery.com/first/)：

```
$('.iheader').first().removeClass('iheader'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:15:43.423

对于那些想知道为什么 acmes 解决方案有效的人，这是因为 jQuery 可以选择使用 CSS 选择器，并且`:first-child`是一个 css 选择器，它为作为其父元素的第一个子元素的元素指定 css。

# sql-server - 登录到 SQL Server Windows 身份验证到 Active Directory 组的问题

> ID：14216190
> 
> 赞同：0
> 
> 时间：2013-01-08T13:39:01.430
> 
> 标签：sql-server, windows-authentication

我遇到了一些障碍，不幸的是，我无法找到我的问题的具体答案。我会尽力解释这个问题；我希望这是有道理的...

我对 SQL Server 和 Windows 身份验证的工作方式有疑问。这很复杂，所以我会尽力说清楚。

对于这种情况，请描绘以下内容：

*   一个 SQL Server 2008 实例，
*   在该服务器上，一个名为`Applications`的数据库
*   在`Applications`数据库中有两个模式称为`app1`and `app2`，
*   每个模式都包含同名应用程序的所有表，

*   两个 Windows AD 组，每个应用程序一个，名为`app1_RW`and `app2_RW`，

*   任何给定数量的用户都可以属于这些 AD 组中的一个或两个，
*   两个 .NET 应用程序，都使用 Windows 身份验证模式连接到数据库

    ```
    Data Source=DATABASEINSTANCENAME;Initial Catalog=APPLICATIONS;Integrated Security=True 
    ```

当用户打开`application1`或`application2`时，应用程序会执行以下操作（按此顺序）：

1.  检查以确保当前 Windows 用户是控制该应用程序安全性的相关 Windows AD 组的成员。

2.  如果他们是该 AD 组的成员，则允许应用程序继续，

3.  使用 Windows 身份验证登录到数据库。

**问题**：

当用户同时是`app1_RW`and的成员时`app2_RW`，似乎我无法强制哪个组登录。如果用户登录到`application1`，我将看到 Windows 身份验证使用`app2_RW`. 因此，应用程序会失败，因为`app2_RW`无法访问运行所需的架构/权限`application1`。

我曾希望我的答案就像在连接字符串中指定要登录的 Windows AD 组一样简单，但据我所知，如果`Integrated Security=True`.

任何人都可以提供任何帮助吗？我非常想继续使用 Windows AD 组来管理我的应用程序。如果我错过了任何信息或者我可以澄清，请告诉我。

非常感谢，祝您有美好的一天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T16:36:43.663

只要这 2 个 AD 组不互斥，您就可以在应用程序中设置规则来确定哪个组是超集并将该组用作登录。如果 2 组互斥，则再次设置规则以提供最低权限。希望有帮助。

# http - 在 Java 应用程序中实现服务器推送

> ID：14216196
> 
> 赞同：0
> 
> 时间：2013-01-08T13:39:17.517
> 
> 标签：http, push-notification, server-push

我有一个独立的 Java 应用程序，它通过 IPC 读取数据。现在我希望在读取数据时，Java 应用程序将数据推送到浏览器上的客户端。这可以实现吗？我对此很陌生，但是我认为是的，这是可能的。但是不知道如何使用HTTP来实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:21:28.637

HTTP 中故意没有推送。这是使其安全且不易被垃圾邮件发送者利用的功能之一。如果要模拟推送，最简单的方法是在客户端上运行一些 JavaScript，定期检查新数据。

# flash - flash 动画库对象在工作区中没有动画

> ID：14216198
> 
> 赞同：0
> 
> 时间：2013-01-08T13:39:21.427
> 
> 标签：flash, object, animated, flash-cs6

我在场景中的库中有几个动画对象。当我运行时间轴时，场景中完成的任何动画都会进行动画处理，但库中的对象不会。

如何使它们同时具有动画效果，同时使对象与场景分开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:32:15.463

我假设您遇到的问题是这样的：

*   阶段
    *   直接在舞台上的短片（我就叫他们Lv1短片）
        *   Lv1 影片剪辑中的影片剪辑（我将这些 Lv2 影片剪辑称为）
            *   Lv2 影片剪辑中的影片剪辑（我称这些 Lv3 影片剪辑）
                *   Lv4，以此类推。

**所涉及的所有影片剪辑内部都有基于帧的动画，其中没有基于代码的动画。**

当您擦洗时间线时，将播放 Lv1 移动剪辑，您可以看到它们动画。但是，Lv2、Lv3、Lv4+ 影片剪辑没有明显播放，您希望看到它们播放。

要使 Lv2 “播放”，您可以选择它们并将它们的类型从动画剪辑更改为图形。然后它们应该在您擦洗时间线时播放，因为图形的动画被“锁定”到时间线，而不是能够独立播放（电影剪辑能够）。

要播放 Lv3 剪辑，请将它们更改为 Lv2 剪辑中的图形，并确保 Lv2 剪辑是 Lv1 剪辑中的图形。

然而，图形有一些限制，我相信其中之一是不受代码影响/无法控制。还有其他一些差异需要注意，这可能会影响您的项目，但如果您将动画剪辑保留为图形，而它们确实需要成为动画剪辑。我建议搜索或查看movieclip 和graphics 之间的帮助文件，以了解实际差异是什么。

请记住，此时间轴帧“锁定”可能需要您向影片剪辑（或图形）添加更多帧，以便它们有“空间”来播放。如果您的 Lv 较低的影片剪辑只有 1 帧，而其较高 Lv 的“内部”影片剪辑，则“内部”影片剪辑只有 1 帧“值得”播放，您需要添加更多帧以匹配内部动画剪辑的帧数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:56:24.137

您需要运行*Control / Test Movie / Test*才能真正看到动画一起播放。实际上没有任何方法可以在时间轴上预览嵌套的影片剪辑。

# python - 强制从当前目录导入模块

> ID：14216200
> 
> 赞同：31
> 
> 时间：2013-01-08T13:39:25.880
> 
> 标签：python

我有`p`包含模块`a`和`b`. `a`依赖于`b`：

`b.py`内容：

```
import a 
```

但是我想*确保*从同一个包目录导入我的模块，`b`而不仅仅是从.`a``p``a``PYTHONPATH`

所以我试图改变`b.py`如下：

```
from . import a 
```

只要我在包目录`b`之外时导入，它就可以工作。`p`给定以下文件：

```
/tmp
    /p
       a.py
       b.py
       __init__.py 
```

以下作品：

```
$ cd /tmp
$ echo 'import p.b' | python 
```

**以下不起作用：**

```
$ cd /tmp/p
$ echo 'import b' | python
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "b.py", line 1, in <module>
    from . import a
ValueError: Attempted relative import in non-package 
```

**为什么？**

PS我正在使用Python 2.7.3

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-08T14:19:23.787

重读 Python[导入文档](http://docs.python.org/2/tutorial/modules.html#intra-package-references)后，我原来的问题的正确答案是：

*为了确保从自己的包中`b`导入，只需在以下内容中编写以下内容：`a``b`*

```
import a 
```

这是来自文档的引用：

> 子模块通常需要相互引用。例如，环绕模块可能使用回声模块。事实上，**这种引用非常普遍，以至于 import 语句首先在包含包中查找，然后再查找标准模块搜索路径。**

**注意：**正如 JF Sebastian 在下面的评论中建议的那样，不建议使用隐式导入，事实上，它们在 Python 3 中已经消失了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T13:42:54.373

因为里面有一个`__init__.py`文件`/p`。该文件告诉 Python：“此文件夹中的所有模块都在包中`p`”。

只要文件存在，无论您身在何处，都`__init__.py`可以导入`b`as 。`p.b`

所以正确的导入`b.py`是：`import p.a`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:45:13.057

相对导入仅适用于包内。

如果`b`从您所在的位置导入，则没有包的概念，因此无法进行相对导入。

如果你导入`p.b`，它是`b`package中的模块`c`。

重要的不是目录结构，而是包结构。

# openoffice.org - 使用openoffice时phpword表格单元格大小不起作用

> ID：14216202
> 
> 赞同：0
> 
> 时间：2013-01-08T13:39:34.190
> 
> 标签：openoffice.org, phpword

我使用 PHPWord 创建 .doc 文件。当我用 MS Word 打开这些文件时，一切都很好，但是当我使用 openoffice 时，表格单元格的大小会自动重置，并且在页面上等间距。

问题是我使用 OpenOffice 无头服务将这些文档转换为 PDF，然后也搞砸了 PDF 文件。

自从 PHPWord 自 2011 年起停止提供支持以来，真的很挣扎......

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T09:29:19.013

要修复缩进错误，注释行`79`和`84`.`Shared/XMLWriter.php`

函数`setIndent`和`setIndentString`那里负责错误的单元格大小。

# android - Google Map Android Api V2 示例代码不起作用

> ID：14216205
> 
> 赞同：13
> 
> 时间：2013-01-08T13:39:38.733
> 
> 标签：android, google-maps-android-api-2

我曾尝试使用之前`Google_Play_SERVICE/SAMPLE`通过使用所有可用选项提供的谷歌地图示例代码，它显示了以下日志。

> **01-14 17:58:39.773：E/Google Maps Android API(13114)：授权失败。**

它向我展示了所有示例地图选项的空白屏幕。

***现在我创建了一个新项目，这是它的完整代码：-***

*活动.java*

```
public class MapActivity extends FragmentActivity
{
    private Context context = this;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_map);

        GoogleMap gMap = ((SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map)).getMap();

        int result = GooglePlayServicesUtil.isGooglePlayServicesAvailable(context);
        Log.e("Maps", "Result int value::" + result);
        switch (result) {
        case ConnectionResult.SUCCESS:
            Log.e("Maps", "RESULT:: SUCCESS");          
            break;

        case ConnectionResult.DEVELOPER_ERROR:
            Log.e("Maps", "RESULT:: DE");           
            break;

        case ConnectionResult.INTERNAL_ERROR:
            Log.e("Maps", "RESULT:: IE");           
            break;

        case ConnectionResult.INVALID_ACCOUNT:
            Log.e("Maps", "RESULT:: IA");           
            break;

        case ConnectionResult.NETWORK_ERROR:
            Log.e("Maps", "RESULT:: NE");           
            break;

        case ConnectionResult.RESOLUTION_REQUIRED:
            Log.e("Maps", "RESULT:: RR");           
            break;

        case ConnectionResult.SERVICE_DISABLED:
            Log.e("Maps", "RESULT:: SD");           
            break;

        case ConnectionResult.SERVICE_INVALID:
            Log.e("Maps", "RESULT:: SI");           
            break;

        case ConnectionResult.SERVICE_MISSING:
            Log.e("Maps", "RESULT:: SM");           
            break;
        case ConnectionResult.SERVICE_VERSION_UPDATE_REQUIRED:
            Log.e("Maps", "RESULT:: SVUR");         
            break;
        case ConnectionResult.SIGN_IN_REQUIRED:
            Log.e("Maps", "RESULT:: SIR");          
            break;      

        default:
            break;
        }
        gMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
        gMap.setMyLocationEnabled(true);
        Log.e("Maps", "------EOC-------");
    }
} 
```

*活动地图.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.SupportMapFragment"/> 
```

*清单.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="net.dottech.map"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:maxSdkVersion="17"
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <permission
        android:name="net.dottech.map.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="net.dottech.map.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="net.dottech.map.MapActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="removed" />
    </application>

</manifest> 
```

*日志*

```
01-21 13:09:09.243: E/Maps(449): Result int value::0
01-21 13:09:09.243: E/Maps(449): RESULT:: SUCCESS
01-21 13:09:09.243: E/Maps(449): ------EOC-------
01-21 13:09:09.248: D/LocationManagerService(1852): gps location requested by an application
01-21 13:09:09.253: D/SensorManager(449): registerListener :: handle = 0  name= K3DH 
Acceleration Sensor delay= 20000 Listener= maps.i.a@41a054f8
01-21 13:09:09.353: D/(449): Device driver API match
01-21 13:09:09.353: D/(449): Device driver API version: 10
01-21 13:09:09.353: D/(449): User space API version: 10 
01-21 13:09:09.353: D/(449): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Fri May  4 10:32:42 KST 2012
01-21 13:09:12.398: D/Sensors(449): Remain listener = Sending .. normal delay 200ms
01-21 13:09:12.398: I/Sensors(449): sendDelay --- 200000000
01-21 13:09:12.398: I/Sensors(1852): setDelay :: handle = 0   delay = 200000000
01-21 13:09:12.398: D/SensorManager(449): JNI - sendDelay
01-21 16:14:17.835: E/Google Maps Android API(12168): Failed to load map.  Could not contact Google servers. 
```

*截屏*

![Google Map Android Api V2 Example 试过了，没有成功](../Images/6ab4cdb99133fa508c1c0bed57fa55cd.png)

**这是结果，带有缩放选项的空白屏幕，MapView 中没有地图。**

我遵循了以下提到的每一个步骤：-

1.)[教程](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)

2.)[谷歌地图安卓 API V2](https://developers.google.com/maps/documentation/android/start)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-17T13:50:40.647

请检查..

1.  检查项目中是否存在包含“android-support-v4.jar”的“libs”文件夹。

    “android-support-v4.jar”位于“android-sdk”目录下的“/extras/android/compatibility/v4/android-support-v4.jar”中。

2.  在运行您的项目之前，您必须将您的项目构建目标设置为“Google APIs”，而不是 Android xx 版本：选择您的项目，然后在 Eclipse 中单击 Project > Properties > Project Build Target 并选择任何“Google APIs”，然后运行您的项目在您的手机上。如果您使用模拟器，还必须将模拟器的 AVD 设置为任何“Google APIs”。

3.  再一次，您不需要创建新的 Google Maps API 密钥来测试您的项目，只需使用默认提供的 API 密钥，在您的 Google API 控制台中显示为“浏览器应用程序的密钥（带引用者）” .

4.  最后，最重要的是将Google Play服务添加为Android库项目如下：

    选择 File > Import > Android > Existing Android Code Into Workspace，然后单击 Next。选择浏览...，输入 /extras/google/google_play_services/libproject/google-play-services_lib，然后单击完成。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-12T15:20:10.707

我已经编译了您的代码，并且地图可以正常工作。我想我发现了问题：缓存了错误的凭据。

我第一次运行您的代码时，它使用了错误的凭据。虽然我已经修复了它们，但我仍然收到“授权失败”错误。然后我简单地卸载了该应用程序，再次运行它，然后地图开始工作。

显然谷歌地图凭据缓存在某处。再次简化运行应用程序不会覆盖它们。

这也解释了为什么我只有在使用 Debug As（而不是 Run As）运行我的其他应用程序后才能使地图工作......

~~我遇到了和你一样的问题，我只有在通过“调试为 > Android 应用程序”在真实设备上运行应用程序时才能使用地图。~~

~~我是Android开发的新手。我不知道这是事实还是我们错过了什么:)~~

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-14T14:32:47.007

造成这种情况的一个常见原因是未在您的 Google API 控制台中注册正确的密钥。具体来说，如果您直接从 Eclipse 启动，您的应用程序不会使用您的发布密钥进行签名，而是使用您的调试密钥进行签名。确保您在控制台中注册了密钥指纹和包名称。它也有助于检查您的包名称是否正确。

这是如何找到调试证书指纹的[链接。](https://developers.google.com/maps/documentation/android/start#displaying_certificate_information)查看“显示调试证书指纹”部分

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-06T14:56:08.610

遇到这个问题是因为我`restriction`在 Google 控制台中启用了我的 API 密钥。

[![在此处输入图像描述](../Images/e7147af1396e537e04ac7932bd39552c.png)](https://i.stack.imgur.com/gh9gv.png)

确保将其设置为无，然后重试

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-25T09:25:33.683

当您从 Internet 下载并运行示例项目时，请使用 Browser 键。在这种情况下，Android 密钥将不起作用，并会出现此错误。

**“无法联系服务器。授权失败”**

转到您的 API 控制台并获取您的浏览器密钥

谢谢

如果您对 Google Maps Api V2 有任何疑问，请告诉我

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-21T10:22:17.250

请参阅已经发布的[**答案**](https://stackoverflow.com/a/13719616/1278196)，它肯定会对您有所帮助..

需要导入项目`\extras\google\google_play_services\libproject\google-play-services_lib`

**更新 ：**

```
Make sure your device have Google Play Services apk installed and its version should be > 2 
```

请让我知道这对你有没有用..

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-07T07:41:50.113

我发现了注册申请证书的问题。

我们尝试的是用我们自己的`keystore & alias`. 但是这里我们确实需要使用`debug.keystore`SDK 中已经提供的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-04T05:31:25.813

在这种情况下，api 密钥不正确，然后谷歌地图没有显示，所以请按照答案。

首先将以下元数据放入 android Menifest 文件中。

```
 <meta-data
    android:name="com.google.android.gms.version"
        android:value="@integer/google_play_services_version" />
 <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyAU9ShujnIg3IDQxtPrafaf7Q1qOvFVdwNmWc4" /> 
```

然后将正确的 Api 密钥放入清单文件中。

# django - Haystack 的 SearchQuerySet().filter 没有做任何事情（Whoosh 2.4.1，Django-haystack 1.2.7）

> ID：14216207
> 
> 赞同：1
> 
> 时间：2013-01-08T13:39:53.767
> 
> 标签：django, django-haystack, whoosh

**views.py**（相关部分）

```
srch = request.GET.get('search', "") 
sqs = SearchQuerySet().filter(has_title=True)
clean_query = sqs.query.clean(srch)
results = sqs.raw_search(clean_query) 
```

**search_indexes.py**

```
from haystack.indexes import *
from haystack import site
from myproject.myapp.models import Person

class PersonIndex(SearchIndex):
    text = CharField(document=True, use_template=True)
    name = CharField(model_attr='name')    
    has_title = BooleanField(model_attr='has_title')

site.register(Person, PersonIndex) 
```

**模型.py**

```
class Person(models.Model):
    name = models.CharField(max_length=50) 
    has_title = models.BooleanField()

    def __unicode__(self):
        return u'%s' % self.name 
```

搜索时，我从完整模型中得到我的结果，而不是只有那些条目是`has_title`is `True`。`python manage.py rebuild_index`应用过滤器后我也跑了。为什么过滤器不起作用？

我正在使用`Whoosh 2.4.1`,`Django-haystack 1.2.7`和`Django 1.4`.

如果有人可以确认他们可以成功使用`SearchQuerySet().filter`with这已经是一个很大的帮助`Whoosh 2.4`。`Django-haystack 1.2.7`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T14:21:03.513

似乎`raw_search(clean_query)`只是再次返回每个项目`sqs`（不知道为什么），`filter(content=clean_query)`而是使用得到预期的结果。

```
srch = request.GET.get('search', "") 
sqs = SearchQuerySet().filter(has_title=True)
clean_query = sqs.query.clean(srch)
result = sqs.filter(content=clean_query) 
```

# .net - 上传IOS镜像到.net服务

> ID：14216209
> 
> 赞同：0
> 
> 时间：2013-01-08T13:39:56.787
> 
> 标签：.net, ios, image-uploading

我正在将图像 (jpg) 上传到 .net 服务。如果我上传小图像，上传效果很好，但是当我发送“大”图像（超过 1 Mb 或“大”大小）图像上传成功，但图像看起来像这样

![图片上传](../Images/0a393fcbaff12ac4ed86d54722e0da18.png)

我通过 curl 测试了 Web 服务，它工作正常。

任何的想法？谢谢！！！！！！

我的上传代码是：

```
-(void)uploadJPEGImage:(NSString*)requestURL image:(UIImage*)image pictureName:    (NSString*)pictureName {
NSURL *url = [[NSURL alloc] initWithString:requestURL];    
NSMutableURLRequest *urequest = [NSMutableURLRequest requestWithURL:url];

[urequest setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];
[urequest setHTTPShouldHandleCookies:NO];
[urequest setTimeoutInterval:600];

NSData *postImageData = UIImageJPEGRepresentation(image, 0.9 );

NSMutableData *body = [NSMutableData data];
[urequest setHTTPMethod:@"POST"];
//STEP2 Creating Boundary
//    There are no rules as of the content of the boundary but as it must not occur in any of the parts of your message content is usually a randomly generated sequence of numbers, letters or combination of both in order to guarantee uniqueness and differentiate from any possible dictionary words.
NSString *boundary = @"---------------------------14737809831466499882746641449";

//Setting POST Header
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[urequest addValue:contentType forHTTPHeaderField:@"Content-Type"];

//STEP3 Begin boundary
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

//STEP4 Adding additional parameters 
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"%@.jpg\"\r\n",pictureName] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
//STEP5 Appending Image Data
[body appendData:[NSData dataWithData:postImageData]];

//STEP6 Closing boundary
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[urequest setHTTPBody:body];

//Set content length

NSString* postlength = [NSString stringWithFormat:@"%d", [body length]];
[urequest setValue:postlength forHTTPHeaderField:@"Content-Length"];

[url release];
NSURLConnection *conaux =[[NSURLConnection alloc] initWithRequest:urequest delegate:self startImmediately:NO];
self.connection = conaux;
[conaux release];
NSMutableData *auxdata = [[NSMutableData alloc] init];
self.receivedData = auxdata;
[auxdata release]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:56:25.290

最后我改变了我的代码，我不需要内容长度（我sopouse server推断它）

新代码（工作正常）：

```
- (void)uploadJPEGImage:(NSString*)requestURL image:(UIImage*)image pictureName:(NSString*)pictureName {
NSURL *url = [[NSURL alloc] initWithString:requestURL];
NSMutableURLRequest *urequest = [NSMutableURLRequest requestWithURL:url];

[urequest setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];
[urequest setHTTPShouldHandleCookies:NO];
[urequest setTimeoutInterval:60];
[urequest setHTTPMethod:@"POST"];

NSString *boundary = @"---------------------------14737809831466499882746641449";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
[urequest setValue:contentType forHTTPHeaderField: @"Content-Type"];

NSMutableData *body = [NSMutableData data];
// add image data
NSData *imageData = UIImageJPEGRepresentation(image, 1.0);
if (imageData) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"; filename=\"image.jpg\"\r\n", pictureName] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"Content-Type: image/jpeg\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:imageData];
    [body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
}

[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[urequest setHTTPBody:body];
[url release];
NSURLConnection *conaux =[[NSURLConnection alloc] initWithRequest:urequest delegate:self startImmediately:NO];
self.connection = conaux;
[conaux release];
NSMutableData *auxdata = [[NSMutableData alloc] init];
self.receivedData = auxdata;
[auxdata release]; 
```

}

# css - Jquery mobile：标题可见，然后在页面完全呈现时立即消失

> ID：14216210
> 
> 赞同：0
> 
> 时间：2013-01-08T13:39:57.217
> 
> 标签：css, jquery-mobile

...事实上，我放在前面的所有标记

```
<div data-role="page">...</div> 
```

在很短的时间内可见，当页面完全呈现时，所有这些内容都会消失。虽然它在 Source / Firebug 中仍然可见。

我正在为这个项目使用 HTML5Boilerplate。这是一些代码 - 也许有一些我没有找到的碰撞？！

```
<head>
<link rel="stylesheet" href="styles/normalize.css"/>
<link rel="stylesheet" href="styles/vendor/jquery.mobile-1.2.0.css"/>
<link rel="stylesheet" href="styles/vendor/jquery.mobile.structure-1.2.0.css"/>
<link rel="stylesheet" href="styles/vendor/jquery.mobile.theme-1.2.0.css"/>
<script type="text/javascript" src="scripts/vendor/modernizr-2.6.1.min.js">
</script>
</head>

<body>
<!-- header disappears after page is rendered :( //-->
<div data-role="header">
 Here goes the Head-Content
</div>

<h3>This content disappears also :( ... </h3>

<!-- everything below this point stays visible! //-->
<div data-role="page">...</div>    
</body>

...

<script type="text/javascript" src="scripts/vendor/jquery-1.8.3.min.js">
</script>
<script type="text/javascript" src="scripts/vendor/jquery.mobile-1.2.0.min.js">
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:19:33.243

如问:)

在 jQuery mobile 中，`data-role="page"`它不是您内容的容器，它实际上是您想要服务的页面，其他任何内容都不会显示。你需要把你的`data-role="header"`里面`data-role="page"`，它会起作用的

[来自jquerymobile.com](http://jquerymobile.com/demos/1.0a4.1/docs/pages/docs-pages.html)的基本 jQuery 移动页面：

```
<!DOCTYPE html> 
<html> 
<head> 
  <title>Page Title</title> 
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.css" />
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.5.2.min.js"></script>
  <script type="text/javascript" src="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.js"></script>
</head> 
<body> 

  // Anything here will not be on the page   

  <div data-role="page"> 
    <div data-role="header">...</div> 
    <div data-role="content">...</div> 
    <div data-role="footer">...</div> 
  </div> 

  // Anything here will not be on the page

</body>
</html> 
```

[证明在这里](http://jsfiddle.net/BZunS/1/)

# php - 如何使用 php 从/向 salesforce 获取和更新产品？

> ID：14216216
> 
> 赞同：0
> 
> 时间：2013-01-08T13:40:21.653
> 
> 标签：php, magento, salesforce

```
<?php
define("USERNAME", "abc@demo.com");
define("PASSWORD", "abc");
define("SECURITY_TOKEN", "aDyy0oukYSCsQ7qua7lgG85Jd");

require_once ('includes/soapclient/SforcePartnerClient.php');

 $client = new SoapClient('http://url/index.php/api/soap/?wsdl');

 $session = $client->login('ab', 'ab');

$result = $client->call($session, 'order.list');

echo "\n\n";

$mySforceConnection = new SforcePartnerClient();
$mySforceConnection->createConnection("includes/soapclient/partner.wsdl.xml");
$mySforceConnection->login(USERNAME, PASSWORD.SECURITY_TOKEN);

echo "<br><br>";

foreach($result as $res)
{
$records = array();
//print_r($result);

$records[0] = new stdClass();
$records[0]->fields = array(
    'FirstName' => $res['firstname'] ,
    'LastName' => $res['lastname'],
    'Email' => $res['customer_email'] 
);
$records[0]->type = 'Contact';
$response = $mySforceConnection->create($records);
/*
print_r($response);
//echo "Full Record=". $res . "<br/>";
echo "<br/> Customer Details:<br/>";
echo "FirstName=". $res['firstname'] . "<br/>";
echo "LastName=". $res['lastname'] . "<br/>";
echo "Email=". $res['customer_email'] . "<br/>";
*/
}

$ids = array();
foreach ($response as $i => $result) {
   /* echo $records[$i]->fields["FirstName"] . " "
            . $records[$i]->fields["LastName"] . " "
            . $result->id . "<br/>\n";*/
    array_push($ids, $result->id);

}

 ?> 
```

此代码适用于将数据插入到 salesforce 中，并且我还能够将联系人访问我的网站。但我无法弄清楚如何在我的网站中获取产品并在 salesforce 中更新它。

请帮忙 ...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:09:27.267

产品存储在`Product2`表中，检查哪些字段存在的最佳位置是您的 WSDL 或描述调用。

在线解释“什么是什么”仅适用于标准字段（显然，如果您创建了一些自定义字段，它们将不会出现在文档中）： http: [//www.salesforce.com/us/developer/docs/ api/Content/sforce_api_objects_product2.htm](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_objects_product2.htm)

要获取它们，您必须使用[`query()`](http://www.salesforce.com/us/developer/docs/api/index_Left.htm#StartTopic=Content/sforce_api_calls_query.htm?SearchType=Stem)呼叫，这样的事情应该让您开始：

```
$queryString = 'SELECT Id, Name, ProductCode FROM Product2 ORDER BY Name LIMIT 10';
$products= $mySforceConnection -> query($queryString);
print_r($products); 
```

从最后一个链接的文档中进一步阅读有关更新语句的文档，您应该能够连接所有点:)

# iphone - 自定义添加到 UISearchBar 的书签图标

> ID：14216219
> 
> 赞同：2
> 
> 时间：2013-01-08T13:40:36.420
> 
> 标签：iphone, xcode, cocoa-touch, ios6, uisearchbar

我创建了一个`UISearchBar`带有显示在搜索字段本身中的书签图标的控件。我现在正在尝试寻找方法让我用图像为书签按钮设置皮肤。我偶然发现了[这篇文章](https://stackoverflow.com/a/10108613/1918049)（参考第四条评论），它似乎能够做我想做的事，但只适用`x`于搜索字段中的按钮，而不适用于书签按钮。

我尝试了以下行来更改按钮，但它似乎不起作用：

```
[[UIButton appearanceWhenContainedIn:[UISearchBar class], nil] setBackgroundImage:[UIImage imageNamed:@"BookmarkButtonNormal.png"] forState:UIControlStateNormal];
[[UIButton appearanceWhenContainedIn:[UISearchBar class], nil] setBackgroundImage:[UIImage imageNamed:@"BookmarkButtonSelected.png"] forState:UIControlStateSelected]; 
```

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-08T13:45:58.763

我偶然找到了解决方案。就是这么简单：

```
[self.searchBar setImage:[UIImage imageNamed:@"BookmarkButtonNormal.png"] forSearchBarIcon:UISearchBarIconBookmark state:UIControlStateNormal];
[self.searchBar setImage:[UIImage imageNamed:@"BookmarkButtonSelected.png"] forSearchBarIcon:UISearchBarIconBookmark state:UIControlStateSelected]; 
```

# c++ - DarkGDK，在精灵生成时间之间留出间隙

> ID：14216223
> 
> 赞同：0
> 
> 时间：2013-01-08T13:40:56.730
> 
> 标签：c++, sprite, delay, gdk

我有一个 for 循环，我在其中声明精灵的位置。但它们通常会在彼此附近产卵，看起来很可怕。使用诸如`dbWait(1000);`冻结所有精灵之类的功能，因此它不是解决方案。

有没有办法在产卵之间产生间隙？

```
for(int i=20;i<=25;i++){
    dbSprite(i,dbRnd(500),dbRnd(90)+400,20);
    dbHideSprite(i);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:07:32.627

```
int spritesToSpawn = 25;

while (LoopGDK ())
{
 if (spritesToSpawn)
  if (waitToSpawn <= 0)
  {
    dbSprite (i, dbRnd (500), dbRnd(90)_400, 20);
    waitToSpawn = SPAWNING_DELAY;
    --spritesToSpawn;
  }
  else
    --waitToSpawn;

 ...

 dbSync();
} 
```

也就是说，诀窍是利用那个主循环。让它继续它的业务，每当你准备好另一个时，利用它来产卵。

# objective-c - NSURLConnection 连接：didReceiveData：重定向后不调用

> ID：14216226
> 
> 赞同：1
> 
> 时间：2013-01-08T13:41:02.267
> 
> 标签：objective-c, ios, redirect, nsurlconnection

我正在启动一个请求，它给我返回带有重定向的 HTML。为什么没有第二次调用 didReceiveData 函数？我正在尝试下载 JSON 文件。（使用iOS6）

```
 - (void) testdownload{
        NSURL *url = [NSURL URLWithString:@"https://***];
        NSURLRequest *request = [NSURLRequest requestWithURL:url];
        NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
        [connection start];
    }

    - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)d{

        NSString *tmpdata = [[NSString alloc] initWithData:d encoding:NSUTF8StringEncoding];
        NSLog(@"data: %@", tmpdata);
    } 
```

当我使用 UIWebView 时，将处理重定向并显示 JSON 文件。使用此功能不起作用：

```
- (NSURLRequest *)connection:(NSURLConnection *)connection willSendRequest:(NSURLRequest *)request redirectResponse:(NSURLResponse *)redirectResponse{
    return request;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:54:44.713

尝试改用此代码：

```
- (NSURLRequest *)connection: (NSURLConnection *)inConnection
             willSendRequest: (NSURLRequest *)inRequest
            redirectResponse: (NSURLResponse *)inRedirectResponse;
{
    if (inRedirectResponse) {
        NSMutableURLRequest *r = [[request mutableCopy] autorelease]; // original request
        [r setURL: [inRequest URL]];
        return r;
    } else {
        return inRequest;
    }
} 
```

[了解有关此 SO 问题的更多信息](https://stackoverflow.com/questions/1446509/handling-redirects-correctly-with-nsurlconnection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:00:23.323

我现在改用这个（但不是很好）：

```
- (IBAction)redirectTest:(id)sender {

        NSURL *url = [NSURL URLWithString:@"http://billstclair.com/html-redirect.html"];
        _request = [NSURLRequest requestWithURL:url];

        UIWebView *webview = [[UIWebView alloc] initWithFrame:CGRectNull];
        webview.delegate = self;
        [webview loadRequest:_request];
        [self.view addSubview:webview];

    }

    - (void)webViewDidFinishLoad:(UIWebView *)webView{

        NSString *content = [webView stringByEvaluatingJavaScriptFromString:@"document.getElementsByTagName('html')[0].innerHTML"];
        NSLog(@"content: %@",content);
    } 
```

# sockets - LabVIEW无法读取UDP数据包

> ID：14216235
> 
> 赞同：0
> 
> 时间：2013-01-08T13:41:38.307
> 
> 标签：sockets, udp, labview

我正在将 udp 数据包从设备发送到我的电脑。

证明：（![在此处输入图像描述](../Images/1e8a970a2192051f6355135f457dc4dd.png) [点此放大）](https://i.imgur.com/4Insz.png)

我正在使用 LabVIEW 中的标准“UDP 接收器 VI”（labview\examples\comm\UDP.llb）

但是我发送的数据没有显示在 vi 上，即使你可以看到我正在发送 UDP 数据包。

请帮忙

Labview程序：

![在此处输入图像描述](../Images/be85efa647d39289a459df0037d3a01c.png) [（放大）](http://img404.imageshack.us/img404/116/672d8c6afe69416fb5b7893.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:32:53.940

如果没有任何 LabVIEW 代码，很难看出哪里出了问题。这是一个 VI 中的发送者和接收者的工作示例：

![在此处输入图像描述](../Images/1001c1f23e562f23d3300244454499dd.png)

可能是您的系统上有多个以太网端口吗？也许是在 UDP 开放连接上设置网络地址的一个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:08:31.210

您发现前面板上的端口 (64100) 与您发送数据的端口 (64000) 不同？

# iphone - ProgressTimer 在 cocos2d iphone 中没有显示在屏幕上

> ID：14216236
> 
> 赞同：1
> 
> 时间：2013-01-08T13:41:39.413
> 
> 标签：iphone, ios, cocos2d-iphone

我正在使用此代码添加 progressTimer 。但它没有显示在屏幕上。

```
CCSprite* sprite_HealthBar = [CCSprite spriteWithFile:@"green_health_bar.png"];
        self.progressTimer = [CCProgressTimer  progressWithSprite:sprite_HealthBar];
        self.progressTimer.type = kCCProgressTimerTypeBar;
        self.progressTimer.scale = 5;
        self.progressTimer.percentage = 100;
        self.progressTimer.position =  ccp( winSize.width/2 , winSize.height/2 );
        self.progressTimer.midpoint = ccp(0,0);
        [self addChild:self.progressTimer z:2]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:30:01.740

添加这个：

```
self.progressTimer.barChangeRate = ccp(1,0);

CCProgressTo *to1 = [CCProgressTo actionWithDuration:0.2f percent:100];
[self.progressTimer runAction:to1]; 
```

# mysql - 选择外键 MySQL

> ID：14216242
> 
> 赞同：1
> 
> 时间：2013-01-08T13:41:57.743
> 
> 标签：mysql, sql, select, join

我有 3 张桌子

```
Table: cm
    id      date                     title         body
     1      2013-01-05 18:36:58      SA v AUS      SA AUS Body
     2      2013-01-04 08:16:20      PA v AP       PA v AP Body

Table2: cat_post
post_id   cat_id           desc
  1            2           desccccc
  2            2           desccccc
  2            1           desccccc

Table3: cats
cat_id         name                cat_desc
  1            Category1           desccccc
  2            Category2           desccccc 
```

我想从表 cm 中选择 ID 位于特定 cat_post.cat_id 下的所有记录。

假设 cat_id 为 1，从表 cm 中选择 cat_post 表中 post id 为 cat_id 1 的所有记录。

我使用过这个查询，但这会返回所有行两次（重复行）

```
SELECT DISTINCT * from cm INNER JOIN cat_post ON cat_post.cat_id = 2; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:34:54.197

如果`cat_post(post_id, cat_id)`有一个`UNIQUE`约束，这将做：

```
SELECT cm.* 
FROM cm
  JOIN cat_post AS cp 
    ON cp.post_id = cm.id 
WHERE cp.cat_id = 1 ; 
```

你也可以使用这个：

```
SELECT cm.* 
FROM cm
WHERE EXISTS
      ( SELECT *
        FROM cat_post AS cp 
        WHERE cp.cat_id = 1 
          AND cp.post_id = cm.id 
       ) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:26:25.353

尝试这个：

```
SELECT DISTINCT cm.* 
FROM cm 
INNER JOIN cat_post cp ON cm.id = cp.post_id 
WHERE cp.cat_id = 1; 
```

# r - 构建旧版本的 R 时出现编译错误

> ID：14216243
> 
> 赞同：1
> 
> 时间：2013-01-08T13:41:59.600
> 
> 标签：r, compilation

为了使用一段时间没有更新的特定库，我想使用旧版本的R（2.3.1），在linux Mint 14下。我得到了源文件，安装了所需的库；检查：

```
apt-cache showsrc r-base | grep Build-Depends 
```

并发出，如 R-admin 帮助页面所示，命令：

```
./configue 
```

没有错误地结束；然后

```
make 
```

以以下错误消息终止：

```
In file included from datetime.c:95:0:
Rstrptime.h:201:12: erreur: conflicting types for ‘wcsncasecmp’
In file included from ../../src/include/Defn.h:928:0,
             from datetime.c:58:
/usr/include/wchar.h:172:12: note: previous declaration of ‘wcsncasecmp’ was here 
```

有谁知道是什么引发了这个错误（如果我理解得很好，文件 datetime.c 和 wchar.h 之间的类型冲突），以及我如何继续编译这个错误。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:56:47.050

问题是 R 2.3.1 已经很老了，并且在开发时考虑到了旧的 C 库。通过最近的 linux 安装，您拥有新的 C 库，这些库可能不适用于旧 R 版本。你可以做什么：

*   从 R 版本开始安装旧版本的 linux，例如在虚拟机中。
*   自己将包移植到新版本的 R 中。

第二个选项需要更多时间，但会使您基于该软件包的工作更具未来性。

# windows - 在 Windows 7 上的会话 0 中从服务器调用 Shell_NotifyIcon 失败

> ID：14216246
> 
> 赞同：0
> 
> 时间：2013-01-08T13:42:23.477
> 
> 标签：windows, windows-7, windows-services

我们有一个使用 Visual Studio 6 编写的大型旧应用程序。当从会话 0 中的一个服务调用 Shell_NotifyIcon 在 Windows 7 上失败时，我们遇到了问题。该服务正在尝试放置一个托盘图标。

有谁知道是什么导致了这个失败以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:12:54.217

可能是因为添加了 Session 0 Isolation 功能，导致服务无法直接与用户桌面交互。要配置具有与用户交互权限的服务，[SERVICE_INTERACTIVE_PROCESS](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683502%28v=vs.85%29.aspx)修饰符必须存在于服务注册表键类型参数中。（Windows 内部 6）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:20:43.023

您可能已经注意到，会话 0 中没有托盘！Shell_NotifyIcon 在那里失败并不奇怪。

托盘由 Explorer.exe 进程提供。如果您[在会话 0 中启动 Explorer 的副本，](http://www.coretechnologies.com/products/AlwaysUp/HowToShowTrayIconsInSession0.html)您的调用应该会神奇地成功，但请谨慎操作，因为不鼓励使用会话 0 中的用户界面。

# c# - 如何为我自己的模型提高 Json.net Serializer 的性能

> ID：14216248
> 
> 赞同：0
> 
> 时间：2013-01-08T13:42:33.583
> 
> 标签：c#, json, serialization, json.net, deserialization

我有一个由大型复杂类组成的数据模型。在这里，您可以在以下（我的模型中最小的类之一）示例中看到我的类的一般结构：

```
[DataContract(IsReference = true)]
public partial class Name : PresentationBase
{
    [DataMember]
    private SmartProperty<string> _first;
    public SmartProperty<string> First
    {
        get { return this._first ?? (this._first = new SmartProperty<string>()); }
        set
        {
            bool isModified = false;

            if (this._first == null)
            {
                if (value != null)
                {
                    isModified = true;
                }
            }
            else if (value == null)
            {
                isModified = true;
            }
            else if (this._first.UnderlyingValue == null)
            {
                if (value.UnderlyingValue != null)
                {
                    isModified = true;
                }
            }
            else if (value.UnderlyingValue == null)
            {
                isModified = true;
            }
            else if (!value.UnderlyingValue.Equals(this._first.UnderlyingValue))
            {
                isModified = true;
            }

            this._first = value;

            if (isModified)
            {
                this._first.IsModified = isModified;
                this.OnPropertyChanged("First");
            }
        }
    }

    [DataMember]
    private SmartProperty<string> _last;
    public SmartProperty<string> Last
    {
        get { return this._last ?? (this._last = new SmartProperty<string>()); }
        set
        {
            bool isModified = false;

            if (this._last == null)
            {
                if (value != null)
                {
                    isModified = true;
                }
            }
            else if (value == null)
            {
                isModified = true;
            }
            else if (this._last.UnderlyingValue == null)
            {
                if (value.UnderlyingValue != null)
                {
                    isModified = true;
                }
            }
            else if (value.UnderlyingValue == null)
            {
                isModified = true;
            }
            else if (!value.UnderlyingValue.Equals(this._last.UnderlyingValue))
            {
                isModified = true;
            }

            this._last = value;

            if (isModified)
            {
                this._last.IsModified = isModified;
                this.OnPropertyChanged("Last");
            }
        }
    }

    [DataMember]
    private SmartProperty<string> _maiden;
    public SmartProperty<string> Maiden
    {
        get { return this._maiden ?? (this._maiden = new SmartProperty<string>()); }
        set
        {
            bool isModified = false;

            if (this._maiden == null)
            {
                if (value != null)
                {
                    isModified = true;
                }
            }
            else if (value == null)
            {
                isModified = true;
            }
            else if (this._maiden.UnderlyingValue == null)
            {
                if (value.UnderlyingValue != null)
                {
                    isModified = true;
                }
            }
            else if (value.UnderlyingValue == null)
            {
                isModified = true;
            }
            else if (!value.UnderlyingValue.Equals(this._maiden.UnderlyingValue))
            {
                isModified = true;
            }

            this._maiden = value;

            if (isModified)
            {
                this._maiden.IsModified = isModified;
                this.OnPropertyChanged("Maiden");
            }
        }
    }
} 
```

我正在使用[Json.net](http://json.codeplex.com/)进行序列化/反序列化操作。由于我的模型很复杂，我想知道是否可以个性化 Json.net 库以更有效地处理我的实体。修改我的模型是不可能的，因为它确实是一个大项目，任何改变都会造成很大的影响。

我尝试了除 Json.net 之外的一些 Json 序列化库，包括[ServiceStack.Text](https://github.com/ServiceStack/ServiceStack.Text)、[fastJson](http://fastjson.codeplex.com/)等。但它们对我没有用。例如 ServiceStack.Text 不序列化私有字段，fastJson 在序列化复杂实体方面存在问题，正如您在库的讨论页面上看到的那样......

简而言之，我下载了 Json.net 的源代码来为我自己的实体定制库，但我在库中迷路了。:) 您对我完成此类实体的性能改进有什么建议吗？我只序列化我的实体中的私有字段，所以我认为这可能是一个重点，但我不知道如何开始。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:01:57.553

查看您的代码，我想知道问题是否在于实际的序列化/反序列化或大量 if-then-else 构造和您正在使用的 onpropertychanged。我会首先尝试使用布尔代数而不是这些 if-then-else 结构来优化它......或者尝试将它们全部删除。

例如 isModified = (value == null) || (value.UnderlyingValue == null) || (_maiden==null&&value==null) || [...]

您还可以引入新的（公共）属性而不是私有属性，并使用 [JsonIgnore] 标记现有属性。

最后，如果您真的不关心 JSON 或其他东西，我会考虑查看 protobuf-net。

# asp.net-mvc-3 - 在 iframe 之后，网页中没有显示 div 值

> ID：14216249
> 
> 赞同：1
> 
> 时间：2013-01-08T13:42:38.057
> 
> 标签：asp.net-mvc-3, iframe, razor, internet-explorer-8, reporting-services

我的应用程序是基于 Web 的，由 MVC3 razor 开发。我想在我的页面中显示 SSRS 报告。为此，我使用`iframe`标签来显示 SSRS 报告及其工作正常。在`iframe`标签之后，我在其中放置了一个`div`并包含内容。

```
 <div>
<iframe height="100"  scrolling="auto" frameborder="0"  width="100%" src="http://" />
    </div>
    <div>© 2012</div> 
```

问题：我面临问题，`div`即我无法查看`div`.

我正在使用 IE8

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T13:47:27.410

iframe 不是自闭合标签。您应该从更改`<iframe />`为`<iframe></iframe>`：

```
 <div>
  <iframe height="100"  scrolling="auto" frameborder="0"  width="100%" src="http://"></iframe>
 </div>
 <div>© 2012</div> 
```

[iframe 可以用 HTML5 自动关闭](http://www.icebluemonkey.com/blog/html/how-the-iframe-has-changed-in-html5/)，但 IE8 不支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:51:51.553

您的 iframe 代码缺少关闭，您应该将代码更改为 <div>
<iframe height="100" scrolling="auto" frameborder="0" width="100%" src="http://" >< /iframe>
</div>
<div>© 2012</div><div>
<iframe height="100" scrolling="auto" frameborder="0" width="100%" src="http://" ></iframe>
</div>
<div>© 2012</div>

# xml - 使用 R 抓取嵌套的 XML 数据

> ID：14216261
> 
> 赞同：1
> 
> 时间：2013-01-08T13:43:16.423
> 
> 标签：xml, r, xpath, web-scraping

您好，我对 R 很陌生，我正在尝试从网站上抓取一些数据。问题是数据存储不一致。

有时我会看到：

```
<div class = "text">   The text I want   </div> 
```

其他时候我看到：

```
<div class = "text"><div class = "text">   The text I want   </div></div> 
```

到目前为止，我正在使用 XML 包和以下 R 代码：

```
doc = htmlTreeParse(url, useInternalNodes = T)
text = xpathSApply(doc, "//*/div[@class='text']", xmlValue) 
```

问题是当遇到第二个示例时，此代码将计算“我想要的文本”两次，因为它`<div class>`两次找到该属性。我只想数一次，因为它只出现一次。

任何指针都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:58:12.673

如果您只想计算出现次数，那么您应该能够找到所有节点

```
all_text <- xpathSApply(doc, "//*/div[@class='text']", xmlValue) 
```

和加倍的节点

```
doubled_text <- xpathSApply(doc, "//*/div[@class='text']/div[@class='text']", xmlValue) 
```

然后从另一个中减去一个的长度以获得真实的反射。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T15:32:17.523

```
xtext <- "<div class = \"text\">   The text I want   </div>
</div><div class = \"text\"><div class = \"text\">   The text I want   </div></div>"
doc <- htmlParse(xtext)
xpathSApply(doc,"//*/div[@class='text']/text()")

#[[1]]
#   The text I want    

#[[2]]
#   The text I want 
```

# mongodb - 具有灵活字段的 MongoDB。如何查找具有特定字段名称的所有记录？

> ID：14216263
> 
> 赞同：0
> 
> 时间：2013-01-08T13:43:27.213
> 
> 标签：mongodb

我有一个方案

```
{ 
   "_id" : ObjectId("50ec1d93ba02ece1979ee4a5"), 
   "url" : "google.com" 
   "results" : [ 
      { "1357651347" : { "data1" : "a", "data2" : "b", "data3" : "c" }},
      { "1357651706" : { "data1" : "d", "data2" : "e", "data3" : "f" }},
      { "1357651772" : { "data1" : "g", "data2" : "h", "data3" : "i" }} 
    ]
} 
```

我对 id 的结果感兴趣`1357651706`。我如何获得它们（在 PHP 中）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T14:17:26.617

您可以检查某些内容是否存在，也可以检查某些内容是否为空（或不为空）。

所以对于`$exists`（[http://docs.mongodb.org/manual/reference/operator/exists/](http://docs.mongodb.org/manual/reference/operator/exists/)）：

```
db.col.find({"results.1357651706": {$exists:true}}) 
```

并检查是否不是`null`：

```
db.col.find({ "results.1357651706": {$ne: null} }) 
```

注意：通常最好反过来使用`null`查询来检查是否有东西`null`，然后在您的应用程序中进行判断过程。这样，您也可以在查询中使用稀疏索引以使其更精简。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:25:37.103

+1 对 Sammaye 的回答，但考虑重新设计您的架构以摆脱使此类查询变得尴尬的动态字段名称。

像这样的东西：

```
{ 
   "_id" : ObjectId("50ec1d93ba02ece1979ee4a5"), 
   "url" : "google.com" 
   "results" : [ 
      { id: 1357651347, "data1" : "a", "data2" : "b", "data3" : "c" },
      { id: 1357651706, "data1" : "d", "data2" : "e", "data3" : "f" },
      { id: 1357651772, "data1" : "g", "data2" : "h", "data3" : "i" } 
    ]
} 
```

然后您可以查询包含您要查找的结果的文档，如下所示：

```
db.col.find({'results.id': 1357651706}) 
```

# c++ - 本地声明的外部函数

> ID：14216267
> 
> 赞同：1
> 
> 时间：2013-01-08T13:43:39.510
> 
> 标签：c++, function, local, extern

假设我有一个类，它的一个函数内部有一个`extern`函数：

```
A::foo(){
  extern void fun();
  fun();
} 
```

我的问题是，除了本地之外，是否还有其他地方可以放置`extern`函数的声明？说，文件里面的类的decleration `.h`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:44:21.940

函数声明默认是“extern”，所以你可以简单地说：

```
void fun();
class::foo(){
  fun();
} 
```

# hibernate - Hibernate OneToMany OrderBy 搞乱了主查询

> ID：14216269
> 
> 赞同：2
> 
> 时间：2013-01-08T13:43:43.533
> 
> 标签：hibernate, one-to-many, hibernate-annotations, hibernate-onetomany

我在 Hibernate 中有一个要查询的类 Video，并且我按`Order.desc("id")`. 查询按预期工作。但是，如果我`@OneToMany`在 Video 中添加注释以包含评论，我也会在`@OrderBy`同一注释中添加一个（我需要评论是`ordered by "createdTime"`）。

```
@OneToMany(fetch = FetchType.LAZY, mappedBy = "videoId", cascade = CascadeType.ALL, orphanRemoval = true)
@OrderBy("commentTime")
public List<Comment> getComments() 
```

这打破了主要查询 - 视频的返回现在是错误的：它命令 SQL 首先返回没有评论的视频，然后是 1 条评论，等等：

```
order by comments6_.commentTime asc, this_.videoId desc 
```

我只需要按他们的 ID 对视频进行排序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T14:26:28.550

尝试`@Sort`改用：

```
@OneToMany(fetch = FetchType.LAZY, mappedBy = "videoId", cascade = CascadeType.ALL, orphanRemoval = true)
@Sort(type = SortType.COMPARATOR, comparator = CommentTimeComparator.class)
public List<Comment> getComments() 
```

这样你就知道它不会影响你的 SQL。它还可以通过减轻数据库的压力来提高性能 - 例如，如果您`@OneToMany`在要排序的同一实体上有多个关联。

# objective-c - Objective-C: initWithTitle:@"" 和 alertBox.title = @""

> ID：14216273
> 
> 赞同：3
> 
> 时间：2013-01-08T13:43:57.820
> 
> 标签：objective-c, alertview

这两者之间是否有区别，哪一个可能更好或更快或在以下方面有任何优势：

```
UIAlertView * alertBox = [[UIAlertView alloc] initWithTitle:@"Title"]; 
```

和：

```
UIAlertView * alertBox = [[UIAlertView alloc] init];
alertBox.title = @"Title"; 
```

（当然，它们都显示相同的结果！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:45:48.700

```
UIAlertView * alertBox = [[UIAlertView alloc] initWithTitle:@"Title"]; 
```

使用类似于构造函数的init方法，内部调用`.title`方法。

```
UIAlertView * alertBox = [[UIAlertView alloc] init];    
alertBox.title = @"Title"; 
```

第一条语句创建一个标题为 nil 的对象 alertBox。在第二行中，您提供自己的标题。

对于性能：

第二个将创建另一个堆栈来执行第二个语句，因此两个额外的 cpu 处理推送和弹出。第一个会更快，但使用多核处理器，调用时间真的可以协商。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:46:57.687

性能上并没有真正的区别，一个是在初始化时设置标题，实际上只是调用了`alertBox.title`自定义初始化方法中的那一行代码。他们拥有该`.title`属性的原因是您可以**更改**它。

所以这段代码：

```
UIAlertView * alertBox = [[UIAlertView alloc] initWithTitle:@"Title"]; 
```

与此代码相比会更好：

```
UIAlertView * alertBox = [[UIAlertView alloc] init];
alertBox.title = @"Title"; 
```

只是因为行数，但您可以使用以下代码：

```
alertBox.title = @"New Title"; 
```

以后去改

* * *

如果速度有差异，你需要一个普朗克第二个计算器来测量它:) - 那里有一些很好的夸张，但基本上**没有**

对于内存，没有区别，因为您`title`在两种情况下都在初始化一个对象并设置它的参数，只是不同的方法。将第一个视为**您**编写它的更短的方式，但实际的类基本上会做同样的事情。

使用构造函数自定义初始化方法对您的时间和行数来说更有效，但没有别的——我的判断

* * *

哪个更有优势？也不是，因为您使用的是警报视图，所以我讨厌它们！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T13:49:43.377

前者可能稍微快一些，但是如果你正在优化这样的东西，你就犯了一个错误。显示警报是您不经常做的事情，之后您会立即等待用户响应。将其缩短几微秒并没有任何好处，它绝对不会**对**应用程序的运行方式产生明显的影响。作为开发人员，请使用对您来说更清晰的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T13:47:27.843

第一行是你写出来的更少的代码，两者都做同样的事情，并且是 UIAlertView 的构造函数。在我看来，从第一行开始构造构造函数更容易，因为它都在一行中，而不是稍后再添加每个属性。

# sql-server - SQL Server - 恢复不同工作组中的数据库 - 修复 Windows 用户

> ID：14216274
> 
> 赞同：0
> 
> 时间：2013-01-08T13:43:57.647
> 
> 标签：sql-server, orphaned-objects

有谁知道如何修复 SQL 数据库中孤立的本地 Windows 用户？

我正在尝试将数据库备份和还原到另一台机器。两台机器都不在域中 - 它们位于不同的工作组中。几个 Windows 用户在源计算机上的数据库中具有权限，为了便于重新连接目标计算机中的用户，我在那里设置了具有相同用户名（但密码不同）的用户。

不幸的是，这不起作用。数据库用户被还原为*[user name]*以及*[source machine name]\[user name]*，这会阻止目标计算机上的帐户链接。有谁知道如何将这些用户重新连接到正确的 Windows 帐户？我做了通常的谷歌搜索，但可用的信息通常用于连接孤立的 SQL 用户，而不是连接孤立的本地 Windows 用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:41:25.113

围绕这个主题的对话摘要......
在我们的网站上，我们“删除”用户并适当地重新添加他们。为了使我们自己更容易做到这一点，我们在域组（或组）中拥有用户，然后向这些组授予适当的访问权限。

如果这种情况（移动数据库）是相当常见的情况，通常最好创建一个脚本来执行此操作 - 一位同事通过查询 sysuers 表中的
`SELECT 'some appropriate text for this user' + name FROM dbo.sysusers where sid is not null`.
然后，他将该查询的结果粘贴到另一个查询窗口并将其保存为脚本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:51:40.023

您需要使用 sp_change_users_login - 实际调用将取决于您的 SQL 版本 - 这是 M/S ref [sp_users_login 文档的链接](http://msdn.microsoft.com/en-gb/library/ms174378.aspx)

和[疑难解答孤立用户](http://msdn.microsoft.com/en-gb/library/ms175475.aspx)

# r - 使用 xyplot 为不同类型的线条提供不同的颜色

> ID：14216279
> 
> 赞同：1
> 
> 时间：2013-01-08T13:44:04.187
> 
> 标签：r, graph, lattice

这可能是一个非常基本的问题，但我在 xyplot 中的 Lattice 中苦苦挣扎，我在其中绘制曲线和回归线（类型“r”，类型“l”）以赋予每条线不同的颜色。

`?cars`我基本上已经用数据集尝试了下面的代码。

```
xyplot(speed ~ dist, data=cars, type=c("r", "l"), 
       col=c("red", "black"), 
       auto.key=list(lines=TRUE)) 
```

问题是它绘制了两条线，但它们都是红色的......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T15:22:24.007

```
xyplot(speed ~ dist, data=cars,
       panel=function(x, y, col, ...) {
         panel.xyplot(x, y, col='red', ...)
         panel.abline(lm(y~x), col='blue')
       },
       type='l'
) 
```

![在此处输入图像描述](../Images/a4daf09ab38809215cede0dc425f28cf.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T14:51:11.897

这是一种方法`latticeExtra`：

```
df <- data.frame(x=1:10,y=c(10,9,8,1,3,4,6,7,8,10))

library(lattice)
library(latticeExtra)

xyplot(y ~ x, data=df, type=c("r"),col=c("gray")) +
as.layer( xyplot(y ~ x, data=df, type=c("l"),col=c("blue"))) 
```

![在此处输入图像描述](../Images/f13c7748ab210af51915ba2cd5ef43d2.png)

为此，我个人更喜欢在以下方面做这些事情`ggplot2`：

```
library(ggplot2)
ggplot(df,aes(x=x,y=y)) + geom_line(colour="blue") +  
stat_smooth(method=lm,colour="black",se=FALSE) 
```

![在此处输入图像描述](../Images/4884016b4e7fdc8536373aeb693f8d42.png)

# delphi - TSearchRec Delphi 向后

> ID：14216281
> 
> 赞同：1
> 
> 时间：2013-01-08T13:44:05.423
> 
> 标签：delphi, file, directory-structure, next

我不知道如何解释我的问题。这是我的尝试解释：函数 FindNext(SearchRec) 将从目录中获取下一个文件。在我的应用程序中，我有时会从当前的 SearchRec 索引中向后退一些文件。那么我该怎么做呢？

所以我正在寻找 FindNext(SearchRec) 之类的函数 FindBackward(SearchRec) 的对立面

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T13:46:59.327

没有这样的功能。例如，您需要跟踪列表中的先前命中，并使用该列表进行回溯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T14:17:58.500

我建议将它们放在 TSearchRec 数组中

```
SearchRecArr:array of TSearchRec; 
```

然后，当您到达某个文件时，从 Array 中获取您需要的 SearchRec。

例如，这是一个示例，我在某个文件夹中放置了 3 个名称为（z、z1 和 z2）的文本文件。然后如果我到达'z2.txt'，我将向后阅读 SearchRec 2 步：

```
procedure TForm2.Button1Click(Sender: TObject);
var
  SearchRec:TSearchRec;
  SearchRecArr:array of TSearchRec;
  i:integer;
begin
  i:=-1;
  if FindFirst('C:\Users\zeina.shehab\Desktop\New folder\z*.txt',faAnyFile,SearchRec)=0 then
  begin
    repeat
      SetLength(SearchRecArr,length(SearchRecArr)+1);
      SearchRecArr[high(SearchRecArr)]:=SearchRec;

      inc(i);   
      if SearchRec.Name='z2.txt' then
        caption:=SearchRecArr[i-2].Name;
    until (FindNext(SearchRec)<>0);
  end;
end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T14:29:53.677

我写了自己的函数。这是对我来说非常有效的代码，它对于数千个文件非常有效（因为它不会减慢我的播放算法）。

```
Procedure GetBackward(var SRInitial:TSearchRec; iForwardSpeed:integer);
var SR:TSearchRec;
    iIndex:integer;
    vLastFiles:Array of String;
begin
   SetLength(vLastFiles,Trunc(iForwardSpeed));

   FindFirst(sPath+'*.txt',faAnyFile,SR);
   while (FindNext(SR) = 0)and(SR.Name <> SRInitial.Name) do
   begin
      for iIndex := 0 to high(vLastFiles)-1 do
         vLastFiles[iIndex]:=vLast[iIndex+1];
      vLastFiles[high(vLastFiles)]:=SR.Name;
   end;

   //Fewer than ForwardSpeed
   if vLastFiles[0] = '' then
   begin
     Exit;
   end;

   FindClose(SR);

   FindClose(SRInitial);
   FindFirst(sPath+'*.'+cbType.Text,faAnyFile,SRInitial);
   while (FindNext(SRInitial) = 0)and(SRInitial.Name <> vLastFiles[0]) do
         ;

end; 
```

该功能已修改。

# php - Symfony 2 - 将实体克隆到不同的表

> ID：14216285
> 
> 赞同：6
> 
> 时间：2013-01-08T13:44:27.077
> 
> 标签：php, symfony, doctrine-orm, entity

我正在尝试将实体对象克隆到 Symfony 2 / Doctrine 中的不同表中。知道怎么做吗？

从数据库中检索对象后，我可以像这样克隆它：

```
$newobject = clone $oldbject; 
```

这给了我一个新对象，我可以将它作为新记录保存到数据库中的同一个表中。其实我不想这样做。我想将对象按原样存储到数据库中的不同表中。但要做到这一点，我必须更改父实体，对吗？如何做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T13:51:21.217

但是，您并没有真正*克隆*实体。事实上，你想要一个不同的实体。这两个实体是什么样的？他们有相同的领域吗？你可以这样做：

```
$oldEntity = $oldEntity;
$newEntity = new NewEntity();
$oldReflection = new \ReflectionObject($oldEntity);
$newReflection = new \ReflectionObject($newEntity);

foreach ($oldReflection->getProperties() as $property) {
    if ($newReflection->hasProperty($property->getName())) {
        $newProperty = $newReflection->getProperty($property->getName());
        $newProperty->setAccessible(true);
        $newProperty->setValue($newEntity, $property->getValue($oldEntity));
    }
} 
```

这是未经测试的 - 可能有一两个错误，但这应该允许将所有属性从一个对象复制到另一个对象（假设属性在两个对象上具有相同的名称）。

# logging - 企业库日志记录：尝试获取 LogWriter 类型的实例时发生激活错误，密钥“”

> ID：14216287
> 
> 赞同：0
> 
> 时间：2013-01-08T13:44:33.500
> 
> 标签：logging, configuration, enterprise-library

我正在尝试使用 Fluent API 在没有配置文件的情况下编写日志。

这是我的代码：

```
 var builder = new ConfigurationSourceBuilder();
                builder.ConfigureData()
                .ForDatabaseNamed("Logging")
                .ThatIs.ASqlDatabase()
                .WithConnectionString(ConnectionString)
                .AsDefault();

 var configSource = new DictionaryConfigurationSource();
 builder.UpdateConfigurationWithReplace(configSource);

 var logger = EnterpriseLibraryContainer.Current.GetInstance<LogWriter>();

 logger.Write("Test", "General"); 
```

当我运行它时，它只是说

> 尝试获取 LogWriter 类型的实例时发生激活错误，键“”

我在配置中做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:55:21.157

缺少两件事：

1.  您忘记使用该`EnterpriseLibraryContainer.CreateDefaultContainer`方法使用配置更新容器
2.  您正在配置数据访问，但正在尝试使用日志记录块

以下是使用配置信息创建容器的方法：

```
var builder = new ConfigurationSourceBuilder();
                builder.ConfigureData()
                .ForDatabaseNamed("Logging")
                .ThatIs.ASqlDatabase()
                .WithConnectionString(ConnectionString)
                .AsDefault();

 var configSource = new DictionaryConfigurationSource();
 builder.UpdateConfigurationWithReplace(configSource);

 EnterpriseLibraryContainer.Current 
  = EnterpriseLibraryContainer.CreateDefaultContainer(configSource); 
```

要使用 Fluent API 配置日志记录，请参阅[使用 Fluent 配置 API](http://msdn.microsoft.com/en-us/library/ff664363%28v=pandp.50%29.aspx#fluent_api_logging)。

那篇文章的例子是：

```
var builder = new ConfigurationSourceBuilder();

builder.ConfigureLogging()
       .WithOptions
         .DoNotRevertImpersonation()
       .LogToCategoryNamed("Security")
         .SendTo.FlatFile("Security Log File")
           .FormatWith(new FormatterBuilder()
             .TextFormatterNamed("Text Formatter")
               .UsingTemplate("Timestamp: {timestamp}...{newline})}"))
             .ToFile("security.log")
         .SendTo.EventLog("Formatted EventLog TraceListener")
            .FormatWithSharedFormatter("Text Formatter")
              .ToLog("Application")
       .LogToCategoryNamed("General")
         .WithOptions.SetAsDefaultCategory()
         .SendTo.SharedListenerNamed("Formatted EventLog TraceListener");

var configSource = new DictionaryConfigurationSource();
builder.UpdateConfigurationWithReplace(configSource);
EnterpriseLibraryContainer.Current 
  = EnterpriseLibraryContainer.CreateDefaultContainer(configSource); 
```

如果您希望将两个日志记录块配置为使用数据访问块写入数据库，您也可以使用流利的界面来执行此操作：

```
var builder = new ConfigurationSourceBuilder();

builder.ConfigureData()
    .ForDatabaseNamed("Logging")
        .ThatIs.ASqlDatabase()
        .WithConnectionString(@"data source=.\SQLEXPRESS;Integrated Security=SSPI;Database=Logging")
    .AsDefault();

builder.ConfigureLogging()
        .WithOptions
            .DoNotRevertImpersonation()
        .LogToCategoryNamed("General")
            .WithOptions.SetAsDefaultCategory()
            .SendTo.Database("Database Trace Listener")
            .WithAddCategoryStoredProcedure("AddCategory")
            .UseDatabase("Logging")
            .Filter(System.Diagnostics.SourceLevels.All)
            .WithWriteLogStoredProcedure("WriteLog");

var configSource = new DictionaryConfigurationSource();
builder.UpdateConfigurationWithReplace(configSource);
EnterpriseLibraryContainer.Current
    = EnterpriseLibraryContainer.CreateDefaultContainer(configSource);

var logger = EnterpriseLibraryContainer.Current.GetInstance<LogWriter>();
logger.Write(logEntry);
Logger.Write("Test", "General"); 
```

# iphone - 为什么视图隐藏在状态栏后面？

> ID：14216288
> 
> 赞同：0
> 
> 时间：2013-01-08T13:44:39.777
> 
> 标签：iphone, objective-c, view

如果我们尝试将视图添加到 self.window [window addSubView:someviewcontroler.view];

为什么视图隐藏在状态栏后面最多 20 像素？我找到了隐藏状态栏或将 view.frame.origin.y 设置为 20 的解决方案。但我想知道它为什么会隐藏。任何原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:47:50.167

这不再是你想要展示你的 root 的方式`UIViewController`。（它曾经是，但它已经改变了一段时间......~~可能是 iOS 5？~~在 iOS 4 中）

为防止出现此问题，请尝试使用 `window.rootViewController = someviewcontroller`

# php - php - 在字符串中搜索字符串并替换它

> ID：14216290
> 
> 赞同：0
> 
> 时间：2013-01-08T13:44:44.790
> 
> 标签：php, regex

我在问一个可以通过谷歌搜索来回答的问题，但我没有找到任何可以做到这一点的东西，所以我在这里问。请不要投票并关闭它，它也对其他人有用：

我的问题是：我需要查找字符串的某些部分，然后找到并替换它。但我的问题是字符串的那部分每次都在变化，所以我需要注入一些正则表达式。

```
$url = "www.google.com/test=2";
replace the 'test=2' with 'test=1'
$result = "www.google.com/test=1" 
```

问题是：蛞蝓可以有 1 到 20 之间的任何数字：`test=\d{1,20}`就是这种情况。我试过了`preg_replace`，`substr_replace`但他们都做不到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T13:47:21.780

我不明白以下有什么问题`/test=\d+/`？我认为您的问题是您忘记了修饰符（在您的示例中：[http](http://codepad.org/ZZNNr1bH) ://codepad.org/ZZNNr1bH ，但您必须使用如下修饰符：[http](http://codepad.org/9TEkPYJo) ://codepad.org/9TEkPYJo ）

```
<?php
    $url = "www.google.com/test=2";
    $result = preg_replace("/test=\d+/", "test=1", $url);
    //                      ^        ^
    var_dump($result);
?> 
```

**更新**：

也就是说，就像 Ashley 提到的那样，`\d{1,20}`这并不意味着“一到二十”，而是“任何数字字符重复 1 到 20 次”。

如果您只想要 0-20 的数字，请使用以下正则表达式：

```
/test=([0-9]|1[0-9]|20)/ 
```

基本含义（0-9 或数字 1 后跟 0-9 或数字 20 之间的任何数字）

也可以缩短为

```
/test=(1?\d|20)/ 
```

含义（1 重复 1 或 0 次，后跟 0-9 的数字或数字 20）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:49:58.937

此外， \d{1,20} 不会匹配 1 到 20 之间的数字，而是 0 和 99,999,999,999,999,999,999，这不是我认为你所追求的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T13:56:57.160

```
$url = "www.google.com/test=2";
$replacement = 1;
echo preg_replace('/(.*test)=([1-20])/', "$1=1" ,$url); 
```

如果我正确理解了这个问题，这应该可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T14:33:41.513

```
$url = "website.com/test=1/asdasd/....";
$check= "test=1";
$newval = "test=2"

if(strstr($url,$check))
  $result = preg_replace($check, $newval, $url); 
```

if the value is contained inside the string, then it can be replaced.

# c# - WPF 应用程序的单元测试失败，出现 NotSupportedException “Uri 前缀无法识别”

> ID：14216297
> 
> 赞同：2
> 
> 时间：2013-01-08T13:45:10.833
> 
> 标签：c#, wpf, unit-testing, nunit

我目前正在编写单元测试，在这个位置测试失败并出现 NotSupportedException “无法识别 URI 前缀” 经过小型研究后，我注册了“打包”Uri 方案，但它没有帮助。

```
return _WaitImageThumbnail ?? (_WaitImageThumbnail = new BitmapImage(new Uri("pack://application:,,,/MyAssemblyName;component/images/DefaultThumbnailLoading.png"))); 
```

**堆栈跟踪：**

```
 at System.Net.WebRequest.Create(Uri requestUri, Boolean useUriBase)
   at System.Net.WebRequest.Create(Uri requestUri)
   at MS.Internal.WpfWebRequestHelper.CreateRequest(Uri uri)
   at System.IO.Packaging.PackWebRequest.GetRequest(Boolean allowPseudoRequest)
   at System.IO.Packaging.PackWebRequest.GetResponse()
   at MS.Internal.WpfWebRequestHelper.GetResponse(WebRequest request)
   at MS.Internal.WpfWebRequestHelper.CreateRequestAndGetResponse(Uri uri)
   at System.Windows.Media.Imaging.BitmapDecoder.SetupDecoderFromUriOrStream(Uri uri, Stream stream, BitmapCacheOption cacheOption, Guid& clsId, Boolean& isOriginalWritable, Stream& uriStream, UnmanagedMemoryStream& unmanagedMemoryStream, SafeFileHandle& safeFilehandle)
   at System.Windows.Media.Imaging.BitmapDecoder.CreateFromUriOrStream(Uri baseUri, Uri uri, Stream stream, BitmapCreateOptions createOptions, BitmapCacheOption cacheOption, RequestCachePolicy uriCachePolicy, Boolean insertInDecoderCache)
   at System.Windows.Media.Imaging.BitmapImage.FinalizeCreation()
   at System.Windows.Media.Imaging.BitmapImage.EndInit()
   at System.Windows.Media.Imaging.BitmapImage..ctor(Uri uriSource, RequestCachePolicy uriCachePolicy)
   at System.Windows.Media.Imaging.BitmapImage..ctor(Uri uriSource)
   ... 
```

**问题：** 如何加载图像，为什么会出现此异常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T21:43:57.147

为了为您的单元测试加载图像，您必须做一些事情。

## 注册 Pack Uri 或初始化 WPF 应用程序实例

您可以按照前面的 SO 问题[*Pack Urls 和单元测试*](https://stackoverflow.com/questions/3710776/pack-urls-and-unit-testing-problem-with-my-environment)注册包 URI，或者初始化一个 WPF 应用程序，它将为您注册 WPF 框架组件。我通常在程序集初始化阶段执行此操作。

```
 [AssemblyInitialize]
   public static void InitializeTestAssembly(TestContext ctx)
   {
       if (Application.Current == null)
           new Application();
   } 
```

## 将图像嵌入为资源或设置为部署项

为了使用上面概述的 pack uri，必须将图像设置为 Resource 以便将其烘焙到您的程序集中。如果您不用作资源，请将其更改为复制到输出目录的内容，然后配置测试环境以使用测试部署图像：

```
 [DeploymentItem("/images/DefaultThumbnailLoading.png")]
 [TestMethod]
 public void WhenPerformingLongOperation_ShouldDisbleProgressIndicator()
 {
    // test here
 } 
```

# c# - 我们可以使用“goto”关键字来结束线程吗？

> ID：14216299
> 
> 赞同：-1
> 
> 时间：2013-01-08T13:45:17.293
> 
> 标签：c#, java, c++, c, goto

在许多编程语言中，已经提出了许多问题来停止执行`thread`.In `c/c++` `goto`仍然使用，其中如 in `Java`，不使用 goto ，但仍然保留它；stop()、stop(Throwable) 和suspend()、destroy() 和resume()，它们旨在提供启动和停止线程的基本功能已被弃用。我们可以使用`goto`to 简单地移出线程吗？

像这样的东西：

```
//Thread block

{...
 if(some condition)
goto out;
.....
 ...
 }//thread block over

out:
// I am out!!
} 
```

我知道使用`goto`是一种非常非常糟糕的做法，但仍然可以这样使用吗？

**更新：**

或者：

```
//Thread block

{...
 if(some condition)
goto out;
.....
 ...
 out:
 // I am out!!
 }//thread block over 
```

从评论中，这是解决方案吗？

**更新2：**

好吧，我得到了各种各样的答案。有些是的，有些不是。我不太使用 c/c++，否则本可以实现并看到自己。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T13:47:10.183

这行不通。

1.  你不能`goto`用另一种方法。
2.  线程不绑定方法，一个方法可以由多个线程执行。

如果该`goto`位置在同一方法中，则执行将简单地在执行该`goto`语句的线程中的新位置继续。

您*可以*做的是转到线程方法的末尾 - 如果当前代码在该方法中。这不会结束线程，但`goto`会在线程方法结束之前移动程序流，这将导致线程方法完成执行，从而结束线程。这与从 thread 方法中简单地 ing
效果相同。`return`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:48:29.310

当然，您*可以*：您`goto`几乎可以在任何地方使用无条件地将控制转移到您的方法的末尾，几乎没有限制。如果这是实现您的线程的方法，它将退出，结束线程。

你是否*应该*是一个不同的问题：除了极少数例外，`goto`这会使你的程序的可读性降低；没有例外，您可以在没有 的情况下获得相同的结果`goto`，同时提高可读性。例如，您可以使用`return`来结束实现线程逻辑的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T13:47:34.853

您不能使用 goto “移出”线程。线程的执行不限于给定范围，只是移动到代码中的另一个位置不会终止它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T13:48:31.010

首先，将清理代码放在函数末尾，然后跳转到它`goto`是 C 中非常有效的模式。只要它*使代码更清晰、更容易理解，*就使用它。当然，它可能会被滥用，而且当你有多个级别的函数时它就不能很好地工作，所以它可能会鼓励制作太长的函数只是为了能够转到清理代码。但只要小心使用，`goto`在 C 中是相当有效的。另外，由于问题有点模糊，最好明确地说：你不能`goto`在函数之间。在支持异常的语言中，您应该使用它们而不是`goto`（当然您也必须正确使用它们，而不是滥用它们）。

但通常，尤其是对于线程，最好为线程注册清理处理程序，这样您就可以返回或调用线程框架“退出此线程”函数，而不是使用`goto`清理代码。

最后，使用上面的代码，`out:`标签后没有代码，你可以`return`代替使用`goto`... 这假设你正在使用一个线程库，它需要一个函数在其他线程中运行，并在该函数返回时结束线程.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T13:51:35.827

你不能从你的线程函数中转到标签

您可以`out:`在线程函数的末尾设置 。这样，如果你想停止你的线程，你可以（从你的线程函数的任何地方）并且线程函数将被`goto`停止`out:`

如果您想在线程结束时执行部分代码，您可以使用`pthread_cond_signal(&cond);`

以下链接包含如何使用它的示例：[多线程启动顺序](https://stackoverflow.com/questions/10616787/multithread-launching-order)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-08T13:53:31.987

不，你不能。

但也许您不需要...您可以尝试使用 ThreadAbortException（通过调用 Thread.Abort()）并捕获它（是的，在线程内），执行“输出”功能，然后执行 Thread.ResetAbort . 当从另一个线程调用 abort 时（您似乎没有这样做），请小心并确保阅读 MSDN 中涉及的风险。

另请参阅：http: [//msdn.microsoft.com/en-us/library/ty8d3wta.aspx](http://msdn.microsoft.com/en-us/library/ty8d3wta.aspx)

# dependency-injection - 捆绑包中的蓝图依赖注入

> ID：14216300
> 
> 赞同：3
> 
> 时间：2013-01-08T13:45:20.053
> 
> 标签：dependency-injection, osgi, blueprint-osgi, aries

我遇到了一个案例，我想在运行时使用 Blueprint (Aries) 来解决依赖关系，并且实现是在需要它的同一个包中定义的，并且不会在任何其他包中使用。我正在抽象这个包中的实现，以便在单元测试时更容易模拟依赖项。如果我将此服务放在自己的捆绑包中，则会导致内聚性差。

在运行时，蓝图表示它正在等待依赖项。如何使用 Blueprint 在包中实现依赖注入？

```
<!-- Interface -->
<reference id="modelEntityMapper" interface="org.example.blog.rest.cxf.server.model.ModelEntityMapper" />
<!-- Implementation defined within same bundle -->
<bean id="modelEntityMapperImpl" class="org.example.blog.rest.cxf.server.model.impl.ModelEntityMapperImpl" />
<service ref="modelEntityMapperImpl" interface="org.example.blog.rest.cxf.server.model.ModelEntityMapper" />

<!-- Object which has dependency -->
<bean id="posts" class="org.example.blog.rest.cxf.server.BlogResourceImpl">
        <property name="modelEntityMapper" ref="modelEntityMapper" />
</bean> 
```

## 编辑

我刚刚尝试了@christian-scheider 的建议，Blueprint 仍在等待一些服务来满足 ModelEntityMapper

XML

```
<!-- Interface -->
<reference id="modelEntityMapper" interface="org.example.blog.rest.cxf.server.model.ModelEntityMapper" />
<!-- Implementation defined within same bundle -->
<bean id="modelEntityMapperImpl" class="org.example.blog.rest.cxf.server.model.impl.ModelEntityMapperImpl" />

<!-- Object which has dependency -->
<bean id="posts" class="org.example.blog.rest.cxf.server.BlogResourceImpl">
        <property name="modelEntityMapper" ref="modelEntityMapperImpl" />
</bean> 
```

日志

`Bundle rest-cxf-server is waiting for dependencies [(objectClass=org.example.blog.rest.cxf.server.model.ModelEntityMapper)]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:16:41.187

可以直接引用服务的bean吗？如果您在同一个蓝图文件中定义服务和服务引用，那么使用 OSGi 服务没有多大意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T04:18:46.933

我无法在 Aries 网站上找到与在包中引用相关的详细文档，因此我将参考 Eclipse Gemini Blueprint 实现文档（以前称为 Spring Dynamic Modules）。[请参阅其文档第 9.2.1.1 节中](http://www.eclipse.org/gemini/blueprint/documentation/reference/1.0.2.RELEASE/html/service-registry.html#service-registry%3arefs%3aavailability%3astartup)的警告。是的，从技术上讲，这与他们的实施有关，但我相信这可能是白羊座的类似故事。

> 声明对同样由同一个包导出的服务的强制引用是错误的，此行为可能导致应用程序上下文创建因死锁或超时而失败。

简而言之，您通常要么导入（引用）一个 OSGi 服务，要么在同一个包中导出一个 OSGi 服务，通常你不会尝试在一个包中同时执行这两种操作。

如果您希望此捆绑包导出类型的服务`ModelEntityMapper`，则需要将其与`service`元素一起导出。当其他 bean 需要在同一个包中引用时，您可以`ref`像使用它一样使用该属性。在这种情况下，您根本不需要该`reference`元素，而是使用该`service`元素。

如果您不打算在`ModelEntityMapper`此捆绑包之外使用 bean，则根本不需要在配置中使用`reference`or`service`元素。您应该能够在`ref`属性中使用它，而无需将其导出为 OSGi 服务 - 它基本上是该捆绑包内部的一个 bean。在这种情况下，您应该能够`reference`完全删除该元素：这`<bean id="modelEntityMapperImpl" ...`将在包内部创建一个 bean，并且该`<property name="modelEntityMapper" ref="modelEntityMapperImpl" />`元素应该能够在包内部使用该 bean。

如果您想`ModelEntityMapper`从 OSGi 导入类型的引用（如果可用），否则使用内部定义的回退，这会变得更加复杂。您必须声明一个非强制性的`reference`并将该引用与内部定义的 bean 一起注入到您的类中，然后使用默认逻辑来检查它们的可用性。或者，您可以只在与接口分开的包中定义实现。

# java - 显示标签排序问题

> ID：14216301
> 
> 赞同：2
> 
> 时间：2013-01-08T13:45:21.840
> 
> 标签：java, displaytag

我`displaytag`用于显示列表和排序。但排序有问题。我有一个属性 orderdate 的日期格式是`Thursday 31 Jan 2012 13:10`. 因此，如果我对该列进行排序，那么它将按天对日期进行分组。所以我创建了另一种属性`sortOrderDate`格式，并在下面`2012 01 31 13:10`使用它。`sortProperty`

```
<display:column title="Order Date" property="orderDate" 
                    sortProperty="sortOrderDate"></display:column>
<display:column property="sortOrderDate" 
         class="hidden" headerClass="hidden" sortable="true"></display:column> 
```

我在这里真正想要做的事情显示`orderdate`在 UI 上并在`sortOrderDate`. 有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:15:02.673

首先，如果数据是日期，则不应将其存储为字符串，而应将其存储为日期。日期实例自然会按时间顺序排序，而不是按字典顺序排序。

因此，您应该只拥有一个`orderDate`Date 类型的属性。并将其显示在您的列中并按时间顺序排序，代码将只是（假设您使用的是 JSTL，并且您的显示表的 ID 是`order`）：

```
<display:column title="Order Date" sortProperty="orderDate">
    <fmt:formatDate value="order.orderDate"/>
</display:column> 
```

您当然可以使用标签的 、 和`type`属性`dateStyle`自定义日期格式。请参阅[http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fmt/formatDate.html](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fmt/formatDate.html)。`timeStyle``pattern``<fmt:formatDate>`

可以使用相同的技术来显示字符串并使用另一个字符串属性进行排序，但它的设计非常糟糕：

```
<display:column title="Order Date" sortProperty="sortOrderDate">
    ${order.orderDate}
</display:column> 
```

# php - 使用带有 zendpdf 的 PDFTable lib 扩展但遇到问题

> ID：14216303
> 
> 赞同：1
> 
> 时间：2013-01-08T13:45:24.343
> 
> 标签：php, zend-framework, zend-pdf

如何使用 zend_pdf 库应用自动换行，我使用 MyPDFTable 库作为 zendPdf 库的扩展。![在此处输入图像描述](../Images/52d9cb8936e92ae06c98b7a1763b4457.png)

我使用了以下代码。

```
<?php
// include auto-loader class
require_once 'Zend/Loader/Autoloader.php';

// register auto-loader
$loader = Zend_Loader_Autoloader::getInstance();

try {
  // set up database access parameters  
  $params = array ('host'     => '127.0.0.1',
               'username' => 'user',
               'password' => 'pass',
               'dbname'   => 'world');

  // configure adapter and query database                   
  $db = Zend_Db::factory('PDO_MYSQL', $params);
  $stmt = $db->query('SELECT Name, Code, Region FROM country LIMIT 0, 150');

  // create PDF
  $pdf = new My_Pdf_Document('example.pdf', '.');

  // create page
  $page = $pdf->createPage();

  // define font resource
  $font = Zend_Pdf_Font::fontWithName(Zend_Pdf_Font::FONT_HELVETICA);

  // set font
  $page->setFont($font, 24);

  // create table
  $table = new My_Pdf_Table(3);

  // iterate over record set
  // set up table content
  while ($record = $stmt->fetch()) {
    $row = new My_Pdf_Table_Row();
    $cols = array();
    foreach ($record as $k => $v) {
      $col = new My_Pdf_Table_Column();
      $col->setText($v);
      $cols[] = $col;      
    }
    $row->setColumns($cols);
    $row->setFont($font, 14);
    $row->setBorder(My_Pdf::TOP, new Zend_Pdf_Style());
    $row->setBorder(My_Pdf::BOTTOM, new Zend_Pdf_Style());
    $row->setBorder(My_Pdf::LEFT, new Zend_Pdf_Style());
    $row->setCellPaddings(array(10,10,10,10));
    $table->addRow($row);
  }

  // add table to page
  $page->addTable($table, 0, 0);

  // add page to document
  $pdf->addPage($page);

  // save as file
  $pdf->save();
  echo 'SUCCESS: Document saved!';  
} catch (Zend_Pdf_Exception $e) {
  die ('PDF error: ' . $e->getMessage());  
} catch (Exception $e) {
  die ('Application error: ' . $e->getMessage());    
}
?> 
```

您可以在[http://devzone.zend.com/1776/creating-pdf-documents-with-zend-framework/](http://devzone.zend.com/1776/creating-pdf-documents-with-zend-framework/)主题“扭转局面”中找到此代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:46:05.553

本教程讨论了您面临的相同问题。他们还提供了定制解决方案！ [http://www.ibm.com/developerworks/opensource/tutorials/os-php-zend5/section4.html](http://www.ibm.com/developerworks/opensource/tutorials/os-php-zend5/section4.html)

# jquery - jQuery表单插件双重提交发生

> ID：14216310
> 
> 赞同：2
> 
> 时间：2013-01-08T13:45:49.220
> 
> 标签：jquery, forms, plugins

我的页面上有两个容器：

```
<div id="foto_1"><span>Change foto</span><img src="" /></div>
<div id="foto_2"><span>Change foto</span><img src="" /></div> 
```

并将表单插件 .ajaxSubmit() 包装在我自己的函数中：

```
function imgUpload(div_id) {

 $('#myimgForm').submit(function(e){

    e.preventDefault();

    $(this).ajaxSubmit(
    {
        target:  '',
        success: function(data) {  

        var new_data = data.split('.');
        var path = new_data[0]+'_sm.'+new_data[1];
        $('#foto_'+div_id+' img').attr('src', '');
        $('#foto_'+div_id+' img').attr('src', path);

        },
        resetForm: true

    }); 
    return false;
  });
} 
```

然后我调用我的函数：

```
$('#foto_1 span').click(function(){

    imgUpload(1);
});

$('#foto_2 span').click(function(){

    imgUpload(2);
}); 
```

所以问题在于当我点击第二个容器时，.ajaxsubmit() 执行了两次。什么原因？我在点击之前尝试了 unbind('live')，还有简单的 bind() 和简单的 click() - 没有变化......请帮助

这是一个html表单：

```
<form method="post" enctype="multipart/form-data"  id="myimgForm" name="myimgForm" action="/save_image_form.php"> 
    <div id="imgForm_div">
        <div id="img_input"><input type="file" name="caret" /></div>
        <input type="button" id="cancel_img" value="Cancel" />
        <input type="submit" value="Upload" />
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:51:58.073

你试过了吗

```
$('#myimgForm').submit(function(e){

    e.preventDefault();

    $(this).ajaxSubmit(
    { 
```

另请注意，`live()`已弃用。

# c# - 模拟用户

> ID：14216311
> 
> 赞同：7
> 
> 时间：2013-01-08T13:45:51.290
> 
> 标签：c#, .net, windows-services, impersonation, user-profile

我们正在开发一个 C# .NET windows 服务。

我们的服务在系统帐户下运行，我们正在尝试模拟登录用户 USER。模拟工作正常，即在`System.Security.Principal.WindowsIdentity.GetCurrent()`模拟后调用时，我们得到正确的用户'USER'。

问题是当我们尝试访问用户配置文件时，我们没有得到预期的结果。一个示例是访问注册表 CURRENT_USER。我们收到拒绝访问错误。当使用第三方功能时，我们假设它部分使用了注册表，我们获得了“真实”（在模拟之前）用户的详细信息。此外，在调用时，`Environment.ExpandEnvironmentVariables("%TEMP%")`我们会获取系统配置文件而不是登录的用户配置文件。

有没有办法完全模仿不同的用户？我知道我们可以使用 LoadUserProfile 来获取特定的用户配置文件，但这对我们不利，因为我们正在运行使用当前用户配置文件的第三方 dll。

我们的模拟代码就是基于[此](http://searchco.de/codesearch/view/11223391)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:45:56.367

正如您所发现的，模拟不会设置`HKEY_CURRENT_USER`或环境。

这是因为模拟令牌是每个线程的，而 HKCU 和环境是每个进程的。

如果您需要访问用户的常用环境，您将需要使用`HKEY_USERS\SID`和模拟用户的 SID `HKEY_USERS\S-1-5-21-12345678-12345678-12345678-1234`，例如。调用`LoadUserProfile`以确保已加载密钥。（如果它应该是当前登录的用户，它应该已经加载，所以你可能不应该这样做，但检查它是否存在，如果不存在则返回错误）。

您还可以计算出他们通常的环境，因为这是在 HKCU 内的关键“环境”下。您只需要将它与系统环境结合起来。

如果第三方 DLL 确实需要正确设置 HKCU 和环境，则需要在用户的登录会话中创建一个进程来托管 DLL，并以某种方式将任何操作的结果发回。如果只需要环境，可以创建一个子进程，手动设置环境。

但是，您还没有说为什么要这样做。听起来您已经将此作为解决更大问题的一部分。如果可能的话，我建议您看看是否有一种方法可以在不获取用户环境或 HKCU 的情况下完成您需要的操作。

为什么 DLL 不能直接在用户自己的会话中运行？为什么需要一项服务？您能否重新设计您的解决方案，以便在登录会话中运行并托管第三方 DLL 的用户模式部分，并与服务进行通信，以便服务只执行绝对需要的操作？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T14:37:37.773

我注意到代码没有调用[`LoadUserProfile`](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb762281%28v=vs.85%29.aspx)，因此没有加载用户配置文件。

请注意该功能的备注，`HKEY_CURRENT_USER`但仍然没有被替换。

我*认为*你可以通过调用来解决这个问题（在调用第三方 DLL 之前）[`RegOverridePredefKey`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms724901%28v=vs.85%29.aspx)。

请注意，让这一切正常工作可能涉及很多巫术 - 我会尽量确保在第三方调用之前尽可能晚地发生覆盖，并在之后尽快恢复（希望这就是全部对图书馆的一次调用）。

作为替代方案，我会认真尝试寻找不同的 3rd 方产品，它不需要所有这些跳过箍。

# iphone - iphone开发：是否可以扩展多个viewControllers？

> ID：14216312
> 
> 赞同：1
> 
> 时间：2013-01-08T13:45:55.597
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, glkit

在我的应用程序中，我想使用 googleAnalytics。要使用它，我必须扩展 GAITrackedViewController 但问题是我已经扩展了 GLKViewController 因为我的视图有一个 openGL 应用程序。那么是否可以扩展两个视图控制器的属性呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:06:40.853

对于类似的情况，我只是创建了 UIViewController 的子类（在您的情况下为 GLKViewController）。该子类处理视图的跟踪。所有“特定”的 ViewController 都扩展了该自定义 UIViewController，而不是默认的。

然后，例如，您可以手动跟踪视图：

```
id<GAITracker> tracker = [[GAI sharedInstance] defaultTracker];
[tracker sendView: NSStringFromClass(self.class)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:48:54.200

不，Objective-C 中没有多重继承。您已经分别编写了 GAITrackedViewController 的子类和 GLKViewController 的子类，并编写了具有这两个类的实例的控制器类，以协调它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:48:25.960

这是不可能的，objective-C 不支持多重继承。你应该看看这个问题：[Objective-C 多重继承](https://stackoverflow.com/questions/4192203/objective-c-multiple-inheritance)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T17:32:30.600

即使在允许它的语言上扩展 2 个类也是非常糟糕的，因为您可以获得 2 种方法来实现“超级”，这是解决许多错误的方法

# php - 如何在 Zend Framework 中创建数据库驱动的永久链接？

> ID：14216314
> 
> 赞同：-2
> 
> 时间：2013-01-08T13:45:57.190
> 
> 标签：php, zend-framework, doctrine

我想知道在采埃孚必须遵循的方法/方法。请记住，用户可以设计自己选择的永久链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:39:49.340

这是一个很棒的教程，用于在永久链接（虚 url）的情况下在 zend 框架中设置路由。

本教程描述了如何对路由进行分类以及如何签入数据库以找到虚 url（永久链接）的**确切链接**。

[http://tfountain.co.uk/blog/2010/9/9/vanity-urls-zend-framework](http://tfountain.co.uk/blog/2010/9/9/vanity-urls-zend-framework)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:09:26.437

在 Zend Framework 中创建数据库驱动的永久链接的步骤：

1.  这可以通过数据库和用户友好的方式进行管理。

    1.  请为永久链接创建一个表（字段永久链接、精确链接）。
    2.  当用户提示 url（永久链接）时，您可以根据永久链接从数据库中获取确切链接。
    3.  然后通过zend路由将页面重定向到精确链接

请转到此链接并阅读 zend 路由

[http://framework.zend.com/manual/1.12/en/zend.controller.router.html#zend.controller.router.routes](http://framework.zend.com/manual/1.12/en/zend.controller.router.html#zend.controller.router.routes)

# android - 获取空指针异常：不懂

> ID：14216315
> 
> 赞同：0
> 
> 时间：2013-01-08T13:46:00.090
> 
> 标签：android, nullpointerexception, android-pageradapter

我正在尝试水平滑动页面，但我得到了`NullPointerException`。我正在尝试滑动 3 页，我在其中一个页面中的那个 textview 上使用 textview 和 onclicklistener。当我运行应用程序时，它不断显示异常。

这是我的日志猫

```
01-08 19:07:21.400: E/AndroidRuntime(22391): FATAL EXCEPTION: main
01-08 19:07:21.400: E/AndroidRuntime(22391): java.lang.NullPointerException
01-08 19:07:21.400: E/AndroidRuntime(22391):    at com.programr.dishoom.HotelMap.showHotelMap(HotelMap.java:184)
01-08 19:07:21.400: E/AndroidRuntime(22391):    at com.programr.dishoom.HotelMap$MyPagerAdapter.instantiateItem(HotelMap.java:131)
01-08 19:07:21.400: E/AndroidRuntime(22391):    at android.support.v4.view.PagerAdapter.instantiateItem(PagerAdapter.java:110)
01-08 19:07:21.400: E/AndroidRuntime(22391):    at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:801)
01-08 19:07:21.400: E/AndroidRuntime(22391):    at android.support.v4.view.ViewPager.populate(ViewPager.java:930)
01-08 19:07:21.400: E/AndroidRuntime(22391):    at android.support.v4.view.ViewPager.populate(ViewPager.java:881)
01-08 19:07:21.400: E/AndroidRuntime(22391):    at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1366)
01-08 19:07:21.400: E/AndroidRuntime(22391):    at android.view.View.measure(View.java:12937)
01-08 19:07:21.400: E/AndroidRuntime(22391):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5045)
01-08 19:07:21.400: E/AndroidRuntime(22391):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
01-08 19:07:21.400: E/AndroidRuntime(22391):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
01-08 19:07:21.400: E/AndroidRuntime(22391):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
01-08 19:07:21.400: E/AndroidRuntime(22391):    at android.view.View.measure(View.java:12937)
01-08 19:07:21.400: E/AndroidRuntime(22391):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5045)
01-08 19:07:21.400: E/AndroidRuntime(22391):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
01-08 19:07:21.400: E/AndroidRuntime(22391):    at android.view.View.measure(View.java:12937)
 01-08 19:07:21.400: E/AndroidRuntime(22391):   at android.widget.LinearLayout.measureVertical(LinearLayout.java:812) 
```

这是我的完整代码。

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_hotel_map);
    menuList =  (ListView)findViewById(R.id.listView2);        
    }        
    MyPagerAdapter adapter = new MyPagerAdapter();
     myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
     myPager.setAdapter(adapter);
     myPager.setCurrentItem(3);      
}

private class MyPagerAdapter extends PagerAdapter {

    public int getCount(){
        return 3;
    }

    public Object instantiateItem(View collection, int position) {

        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        int resId = 0;
        switch (position) {
        case 0: 
            resId = showHotelContact();             
            break;
        case 1:
            resId = showHotelAddress();         
            break;              
        case 2:     
            resId = showHotelMap();             
            break;      
        }

        View view = inflater.inflate(resId, null);
        ((ViewPager) collection).addView(view, 0);
        return view;
    }

    @Override
    public void destroyItem(View arg0, int arg1, Object arg2) {
        ((ViewPager) arg0).removeView((View) arg2);

    }

    @Override
    public void finishUpdate(View arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean isViewFromObject(View arg0, Object arg1) {
        return arg0 == ((View) arg1);

    }

    @Override
    public void restoreState(Parcelable arg0, ClassLoader arg1) {
        // TODO Auto-generated method stub

    }

    @Override
    public Parcelable saveState() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void startUpdate(View arg0) {
        // TODO Auto-generated method stub

    }

}

public int showHotelMap()
{
    int resId;
    resId = R.layout.clickformap;
TextView clickOnMap = (TextView)findViewById(R.id.clickmap);

clickOnMap.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        Intent intent = new Intent (getApplicationContext(),ShowMap.class);
        startActivity(intent);

    }
});
    return resId;
}
public int showHotelAddress()
{
    int resId;
    resId = R.layout.hoteladdress;
    return resId;
}
public int showHotelContact()
{
    int resId;
    resId = R.layout.hotelcontact;
    return resId;
} 
```

}

我不明白为什么我会收到这个错误。
请给我任何提示或参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:52:07.213

您调用的上下文在`findViewById()`Activity 中。这将检查您`setContent()`通过`onCreate()`Activity 的方法设置的主布局。如果 TextView`R.id.clickmap`不是您传递给 Activity 的视图的一部分，则不会找到它。

Activity 类本身不知道 PagerAdapter 中正在创建/销毁的视图，因此它找不到它们。为了`findViewById()`工作，您需要在对包含该类的父视图的引用上调用它。它可以是 View 层次结构中的任何父级，但它必须是父级或视图本身。

编辑：

我不知道你是怎么打电话`showHotelMap()`的，但你需要使用包含你正在寻找的 TextView 的父视图：

```
View mainView = getMainView()
TextView clickOnMap = (TextView) mainView.findViewById(R.id.clickmap);
clickOnMap.setOnClickListener(......); 
```

在哪里，`getMainView()`是一些方法，您可以在其中检索对所需视图的引用。你如何做到这一点取决于你的实施。

编辑2：

```
private class MyPagerAdapter extends PagerAdapter {

   ...

   public Object instantiateItem(View collection, int position) {

      LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

       View returnView = null;
       switch (position) {
          case 0: 
             returnView = showHotelContact(inflater);             
             break;
          ...   
       }

       return returnView;
   }

   ...

   public View showHotelMap(Inflater inflater)
   {
      View returnView = inflater.inflate(R.layout.clickformap, null);
      TextView clickOnMap = (TextView)returnView.findViewById(R.id.clickmap);

      clickOnMap.setOnClickListener(new View.OnClickListener() {
         @Override
         public void onClick(View v) {
            Intent intent = new Intent (getApplicationContext(),ShowMap.class);
            startActivity(intent);
         }
      });
      return returnView;
   }
} 
```

在这个实现中，你`View`在你的方法中膨胀，设置它，然后将它返回给`PagerAdapter`. 您不需要将其添加到 ViewPager，因为 ViewPager 本身会调用`instantiateItem()`并将其添加到自身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:54:08.427

你有一个**NullPointerException**在：

```
TextView clickOnMap = (TextView)findViewById(R.id.clickmap);
clickOnMap.setOnClickListener(new View.OnClickListener()... 
```

可能**R.id.clickmap**不是您的**TextView**的正确 ID，并且**findViewById**将 null 返回到**clickOnMap**，然后您尝试将**setOnClickListener**设置为 null 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T14:01:15.397

如果你想使用`findViewByID()`，你需要通过它的父视图来引用它。

你应该使用这样的东西，

```
TextView clickOnMap = (TextView)ActivityName.this.findViewById(R.id.clickmap); 
```

# javascript - 提高 JS 的性能 - 避免多次选择具有相同 ID 的元素

> ID：14216319
> 
> 赞同：1
> 
> 时间：2013-01-08T13:46:06.083
> 
> 标签：javascript, jquery, performance

我有一个功能可以做这样的事情：

```
function my_function() {
  if ($('#footer').outerHeight() > 100) {
  $('#footer').height(...) ;
  $('#footer').css(....) ;
} 
```

每次滚动时都会调用该函数，所以我想知道这样做 $('#footer') 这么多次是否有那么糟糕。如果是这样，解决这个问题的好方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T14:08:44.890

我认为您需要这样的解决方案来提高性能。

[如何提高页面中 java 脚本的性能？](http://jqfaq.com/how-to-improve-the-performance-of-your-java-script-in-your-page/)

[要避免哪些常见的 jQuery 陷阱？](http://jqfaq.com/jquery-pitfalls/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:48:29.237

您应该像这样链接您的函数并缓存您的选择器：

```
function my_function() {
  var footer = $('#footer');
  if (footer.outerHeight() > 100) {
      footer.height(...).css(....);
  }
} 
```

您甚至可以移动函数的`var footer = $('#footer');`外部使其成为全局函数以进一步改进它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:56:33.437

另一种选择是使用[`with`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/with)语句，但不推荐：

```
function my_function() {
    with ($("#footer")) {
        if (outerHeight() > 100) {
            height(...).css(...);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T13:52:50.893

其他答案很好，但是如果您根本不想评估 if 语句（第一次之后），请尝试以下操作：

```
var $footer;
var footerEvaled = false;
function my_function() {
if(footerEvaled == false)
{
   $footer = $footer || $('#footer');
    if ( $footer.outerHeight() > 100) {
         $footer.height(...) ;
         $footer.css(....) ;
         footerEvaled = true;
    }
}

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T13:48:44.643

你可以这样做：

```
var $footer;
function my_function() {
    $footer = $footer || $('#footer');
    if ($footer.outerHeight() > 100) {
        $footer.height(...) ;
        $footer.css(....) ;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T14:08:35.637

您可以在函数之前将 $('#footer') 存储在变量中。例如：

```
var footerHTML = $('#footer');
function my_function() {
  if ( footerHTML.outerHeight() > 100) {
  footerHTML.height(...) ;
  footerHTML.css(....) ;
} 
```

这将避免为同一元素创建多个 JQuery 实例。

# visual-studio - Visual Studio 安装程序不会删除卸载中的所有文件

> ID：14216326
> 
> 赞同：2
> 
> 时间：2013-01-08T13:46:22.790
> 
> 标签：visual-studio, installation

我正在使用 Visual Studio 安装程序。但是在卸载时-从添加删除程序中它不会删除所有文件，而是在文件夹中留下一些文件，我怎样才能导致卸载删除所有文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:27:57.940

安装程序仅删除它安装的文件。安装后创建的文件不会被删除。您必须创建自定义操作来执行清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-28T18:37:40.517

要在您的软件之后进行清理（删除一些自定义或用户生成的文件），您应该创建一个**自定义操作**并将其添加到安装程序的**卸载**部分。

自定义操作可以是从类继承的`System.Configuration.Install.Installer`类库。

这是卸载程序自定义操作的示例实现：

```
[RunInstaller(true)]
public partial class CustomUninstaller : System.Configuration.Install.Installer
{
    public CustomUninstaller()
    {
        InitializeComponent();
    }

    public override void Uninstall(IDictionary savedState)
    {
        if (savedState != null)
        {
            base.Uninstall(savedState);
        }

        string targetDir = @"C:\Your\Installation\Path";
        string tempDir = Path.Combine(targetDir, "temp");

        try
        {
            // delete temp files (you can as well delete all files: "*.*")
            foreach (FileInfo f in new DirectoryInfo(targetDir).GetFiles("*.tmp"))
            {
                f.Delete();
            }

            // delete entire temp folder
            if (Directory.Exists(tempDir))
            {
                Directory.Delete(tempDir, true);
            }
        }
        catch (Exception ex)
        {
            // TODO: Handle exceptions here
        }
    }
} 
```

# sql - 如何使用 JOIN 执行此操作

> ID：14216333
> 
> 赞同：0
> 
> 时间：2013-01-08T13:46:51.760
> 
> 标签：sql

我有 4 张桌子。

```
tbl_person:
  - person_id
  - unique_id_number

tbl_plan:
  - plan_id
  - plan_name

tbl_person_plan:
  - id
  - person_id
  - plan_id
  - is_done

tbl_monitor_level:
  - id
  - unique_id_number
  - sugar_level
  - date_submitted 
```

用户每天都会在 tbl_monitor_level 中输入数据。我只想检索他们今天没有输入任何数据的所有 unique_id_number。

我用这个

```
select distinct tml.unique_id_number, count(tml.sugar_level) from 
tbl_person tp
right join
tbl_monitor_level tml on 
tml.unique_id_number = tp.unique_id_number
inner join tbl_person_plan tpp on 
tpp.person_id = tp.person_id
where tml.date_submitted = '2013-01-08'
group by tml.unique_id_number 
```

但它只会获得所有带有 date_submitted = 2003-01-08 的 unique_id_number 我想得到这个

```
unique_id_number | count
-------------------------
G12345A          |   1
G23456B          |   0 
```

但因为它是它不会得到其他`unique_id_number (G23456B)`。所有这些`unique_id_numbers`都存在于其他表上。

样本数据

```
 tbl_person
    - person_id - 1
    - unique_id_number - G12345A

    - person_id - 2
    - unique_id_number - G23456B

 tbl_plan
    - plan_id - 1
    - plan_name - Plan A

 tbl_person_plan
    - id - 1
    - person_id - 1
    - plan_id - 1
    - is_done - 0 

    - id - 2
    - person_id - 2
    - plan_id - 1
    - is_done - 0

 tbl_monitor_level
    - id - 1
    - unique_id_number - G12345A
    - sugar_level - 100
    - date_submitted - 2013-01-08

    - id - 2
    - unique_id_number - G12345B
    - sugar_level - 200
    - date_submitted - 2013-01-07 
```

以上数据应该是结果。但我得到的只是

```
unique_id_number | count
-------------------------
G12345A          |   1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:52:17.603

LEFT JOIN 应该为您提供如下信息：

```
SELECT tp.unique_id_number, COUNT(tml.id) AS count
FROM tbl_person tp
LEFT JOIN tbl_monitor_level tml
  ON tp.unique_id_number = tml.unique_id_number
  AND tml.date_submitted = '2013-01-08'
GROUP BY tp.unique_id_number 
```

主要区别在于您所做的 LEFT 与 RIGHT JOIN，并且您需要在始终具有条目的表上进行分组 -`tbl_person`在这种情况下。此外，需要将 WHERE 子句合并到 LEFT JOIN 本身以避免排除没有匹配监视器行的条目。

这是它工作的[sqlfiddle](http://sqlfiddle.com/#!2/76b88/2)。

```
UNIQUE_ID_NUMBER | COUNT
G12345A          | 1      
G23456B          | 0 
```

仅供参考，很少使用 RIGHT JOIN，因为它们通常会使 SQL 逻辑比现在更加混乱；）

# c++ - 哪个库用于迭代 1M*1k 次的并行 for 循环，OpenMP 或 boost::thread？

> ID：14216335
> 
> 赞同：3
> 
> 时间：2013-01-08T13:46:54.817
> 
> 标签：c++, multithreading, parallel-processing, openmp, boost-thread

我想逐个像素地迭代图像并每个像素执行 1000 次浮点运算。**您认为我应该为此使用多线程还是多处理，即 boost::thread 或 OpenMP？是否有经验可以在这两个之间进行选择（以获得最快的速度）？**我知道创建线程或在线程之间切换比创建/切换进程快几倍。另一方面，实现 OpenMP 代码要容易得多。

我现在的解决方案：

```
#pragma omp parallel for
for(size_t i=0; i<640; ++i) {
    for(size_t j=0; j<480; ++j) {
        // do 1000 float operations
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:00:01.717

OpenMP 对此绰绰有余，实际上 boost 甚至没有内置的并行循环结构。

> 你认为我应该使用多线程还是多处理

尽管 OpenMP 代表 Open MultiProcessing，但它实际上是一个多线程库。

另一个值得一看的库是 Intel TBB。

# android - 在 android 消息对话中添加时尚对话

> ID：14216342
> 
> 赞同：0
> 
> 时间：2013-01-08T13:47:07.947
> 
> 标签：android, android-layout, inbox

我正在尝试开发一个允许用户通过 SMS 相互聊天的应用程序。

我已经完成了这项工作。但主要问题是，现在我非常重视布局的设计。我想让我的收件箱对话就像 Android 内置的消息收件箱对话类型一样。我正在修复如何做到这一点。我用谷歌搜索了它，但找不到有用的东西。任何人都可以帮助我提供源代码将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:18:20.230

这个[博客](http://adilsoomro.blogspot.fr/2012/12/android-listview-with-speech-bubble.html)讨论了如何制作一个与原生 android 消息应用程序或其他一些应用程序相同的带有语音气泡的 ListView。我觉得你可以在那里找到一些有用的资源，也可以使用源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:20:31.917

我认为您可以使用动态布局创建它。首先，您创建一个将放置在滚动视图中的容器，然后您必须加载数据（消息有多少，消息的内容）。获得数据后，您必须创建要添加到容器中的子视图，您可以根据需要设计子视图并将其添加到容器中。

总的来说，它看起来像这样

scrollview->container->(foreach child) 添加子项；

和伪代码

```
Scrollview svList = (ScrollView) findviewbyid(R.id.svList);
LinearLayout llContainer = (LinearLayout) findviewbyid(R.id.llContainer);
new AsyncGetMessage().execute //use asynctask to get message
for(int i=0;i<numberofchild;i++)
{
    llContainer.addView(new Child(message,who)) 
    //who is a bool value to determine your message or your friend message
} 
```

# ios - CoreTelephony 在后台 iphone sdk 上运行

> ID：14216345
> 
> 赞同：1
> 
> 时间：2013-01-08T13:47:18.123
> 
> 标签：ios, background, core-telephony

是否可以在后台模式下运行 CoreTelephony 框架？我正在为 iphone 广告制作硬件，当 iphone 处于睡眠模式并且当您收到电话或短信时，我的硬件会发出声音。我可以在我的应用程序运行时进行此操作，但是当我将 iphone 置于睡眠模式时不起作用。有可能在后台做这些工作吗？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-03T07:47:41.863

是的，它可能....无论您想在后台运行哪个函数或方法，只需在应用程序中调用该函数即可在您的`appdelegate.m`文件中输入后台方法

# sql - Oracle - 计算 CASE 语句的结果

> ID：14216351
> 
> 赞同：2
> 
> 时间：2013-01-08T13:47:29.187
> 
> 标签：sql, oracle, plsql, count, case

## 目标/背景

*   我正在梳理工单系统以查看工单是否符合某些标准
    *   （例如，如果它们不是第 3 阶段、第 2 阶段，甚至不是第 1 阶段）。
*   这些“阶段”已由管理层定义。
*   我想按报告的年份分组，然后按工艺分组，然后查看在这 3 个“非阶段”中的每个分组中有多少工作订单。

## 查询

```
select yearreported
, theleadcraft
, count(NotStage3)
, count(NotStage2)
, count(NotStage1)

from
(
    select extract(year from reportdate) as YearReported
    , Nvl(leadcraft, 'NONE') as TheLeadCraft
    , CASE when status not in ('CAN', 'CLOSE') then 1 else 0 END as NotStage3
    , CASE when status not in ('CAN', 'CLOSE', 'COMP') then 1 else 0 END as NotStage2
    , CASE when status not in ('CAN', 'CLOSE', 'COMP', 'WORKDONE') then 1 else 0  END as NotStage1
    from workorder
) query 

group by yearreported, theleadcraft;
; 
```

## 问题/问题

*   这似乎可行，但 notstage1、notstage2 和 notstage1 的所有计数结果都相同，尽管查询了某些情况并找到了一些我知道不同的情况。
*   这是实现我要计算的案例陈述的正确方法吗？
*   我应该改用 DECODE() 吗？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T13:50:16.533

1 和 0 的 COUNT() 相同 - 可能您想要 SUM() 或 COUNT() 1 或 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:49:47.090

Count 不计算 NULL -s。尝试这个：

```
, CASE when status not in ('CAN', 'CLOSE') then 1 END as NotStage3
, CASE when status not in ('CAN', 'CLOSE', 'COMP') then 1 END as NotStage2
, CASE when status not in ('CAN', 'CLOSE', 'COMP', 'WORKDONE') then 1 END as NotStage1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:10:54.567

你不应该使用`decode`.

您编写查询的方式是您真正想要`sum()`的，而不是`count()`：

```
select yearreported, theleadcraft, sum(NotStage3), sum(NotStage2), sum(NotStage1) 
```

该函数`count()`在应用于列时具有误导性名称（在我看来）。它正在计算非 NULL 值的数量。由于“1”和“0”都是非空的，它们被计算在内。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T16:30:16.937

是的，您可以通过对上面的语句进行简单修改来做到这一点

尝试这个 ：

```
select yearreported
, theleadcraft
, count(decode (NotStage3, 1,1) )
, count(decode (NotStage2, 1,1) )
, count(decode (NotStage1, 1,1) )

from
(
    select extract(year from reportdate) as YearReported
    , Nvl(leadcraft, 'NONE') as TheLeadCraft
    , CASE when status not in ('CAN', 'CLOSE') then 1 else 0 END as NotStage3
    , CASE when status not in ('CAN', 'CLOSE', 'COMP') then 1 else 0 END as NotStage2
    , CASE when status not in ('CAN', 'CLOSE', 'COMP', 'WORKDONE') then 1 else 0  END as NotStage1
    from workorder
) query 

group by yearreported, theleadcraft; 
```

问候，

# java - Cisco JTAPI 到 CUCM

> ID：14216355
> 
> 赞同：3
> 
> 时间：2013-01-08T13:47:42.633
> 
> 标签：java, telephony, cisco, jtapi, cisco-jtapi

我的任务是编写一个应用程序，让用户可以拨打 Cisco Unified Callmanager 8.6。UCM 不会提供联系人列表。它将在其他地方提供。

我发现 Cisco 提供的文档和示例都缺乏且不可取。我还发现缺乏来自第三方的工作示例。

我希望其他人在我之前做过类似的事情。

该应用程序从数据库中获取要呼叫的号码，然后让用户单击他或她想要呼叫的联系人。然后应将目的地的号码发送到电话。基本上，应用程序不必拨打号码，而是将目的地发送到电话或 UCM，然后用户在此时接管。

查看 Cisco 的 makecall.java 并使用它，使用此 API 实际拨打电话似乎很简单。

我已经开始使用[http://blog.nominet.org.uk/tech/2008/01/25/experiments-with-jtapi-part-1-making-a-call/](http://blog.nominet.org.uk/tech/2008/01/25/experiments-with-jtapi-part-1-making-a-call/)中的示例，但我相信这一点一段代码不足以拨打电话。然而，我可能是错的。

谁能在这里指出我正确的方向，因为我相信我的规范很简单，应该很容易实现。如果需要更多信息，我很乐意提供。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-10T10:00:19.310

这是几个月前的事了，但它仍然可能对您有所帮助。我能够创建一个测试场景：

```
protected CiscoJtapiPeer peer;
protected CiscoProvider provider;
// ...

peer = (CiscoJtapiPeer) JtapiPeerFactory.getJtapiPeer(null);
provider = (CiscoProvider) peer.getProvider(cucmURL);

/* cucmURL has the format:
    "192.168.0.20;login=myuser;passwd=mypasswd"
whereas the username is an Application User in Cisco Unified Communications
Manager. On my system, it has the following permissions. I don't know whether all
of them are required:

Standard AXL Users
Standard Audit Users
Standard CCM End Users
Standard CCM Phone Administration
Standard CCM Phone and Users Administration
Standard CCM Read Only
Standard CCM Super Users
Standard CTI Allow Call Monitoring
Standard CTI Allow Call Park Monitoring
Standard CTI Allow Control of All Devices
Standard CTI Allow Control of Phone supporting Connected Xfer and...
Standard CTI Enabled
Standard CTI Secure Connection
Standard RealtimeAndTraceCollection
Standard TabSyncUser

You then add an observer to the provider in order to know when the provider 
object is read for further interaction. You'll receive a "ProvInServiceEv" Event in the event list.
*/

provider.addObserver(providerObserver);
/* Wait until the event has come up */
// Create a sample call:
CiscoTerminal term = provider.createTerminal("your_sep_id_here");
Call call = provider.createCall();
call.connect(term, term.getAddresses()[0], "your_phone_number_to_call"); 
```

`term`用作开始呼叫的“源”。`term.getAddresses()[0]`只获取与“源”电话关联的第一个电话号码。`"your_phone_number_to_call"`然后被调用。

另一个信息：它不能反过来工作：你不能`provider.getAddress("phonenumber")`先打电话，因为在任何终端连接到它之前，提供者类没有加载电话号码。

这是在 CUCM 8.6.2 和 Java 7 上测试的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-11T14:37:46.130

我在我的项目中使用了这个代码，工作正常：

```
 final Condition inService = new Condition();
            provider.addObserver(new ProviderObserver() {
                public void providerChangedEvent(ProvEv[] eventList) {
                    if (eventList == null) {
                        return;
                    }
                    for (int i = 0; i < eventList.length; ++i) {
                        if (eventList[i] instanceof ProvInServiceEv) {
                            inService.set();
                        }
                    }
                }
            });
            inService.waitTrue();
            Address srcAddr = provider.getAddress(src);
            co = new CallObserver() {
                public void callChangedEvent(CallEv[] eventList) {    
                }
            };
            srcAddr.addCallObserver(co);
            call = provider.createCall();
            call.connect(srcAddr.getTerminals()[0], srcAddr, dst); 
```

* * *

*   src - 您拨打的电话
*   dest - 您呼叫的电话

# mysql - JasperReports 俱乐部联盟结果成单行

> ID：14216358
> 
> 赞同：1
> 
> 时间：2013-01-08T13:47:58.627
> 
> 标签：mysql, jasper-reports, union, ireport, crosstab

我在使用交叉表的报告中有两个查询的联合。报告的目的是列出与每个日期对应的值。

第一个查询返回与日期对应的值。第二个查询返回剩余日期及其值。

最后，完成了两个查询的联合。许多人可能会建议使用单个查询来实现这一点，但我无法通过使用 LEFT JOIN 的单个查询来做到这一点，因为它不返回 NULL 值。即使我得到了这个工作，我拥有的 GROUP BY 子句将在 iReport 中分成两行.. NON NULLS AND NULLS。

所以，我能想到的唯一方法是使用联合。输出看起来像

```
 01/01/2013 02/01/2013 03/01/2013 04/01/2013 05/01/2013
X     £120.00    £120.00    £120.00                         
                                       £0.00     £0.00           . 
```

结果两行是由于 GROUP BY.(rowGroup)。日期是列组。理想情况下，我希望它排成一行。

查询是

```
SELECT
   rates_Booking.date
   rates_Booking.amount,    
   booking.reference    

FROM
   rates_Booking
   LEFT JOIN booking ON booking.reference = rates_Booking.bookingReference                                                                  

   LEFT JOIN unit ON booking.apartment = unit.unit

   LEFT JOIN property ON property.property = unit.property

 WHERE
   rates_Booking.date BETWEEN $P{startDate} AND $P{endDate} 

   AND  $X{IN,property.property,buildings}
   AND  $X{IN,property.area,location}
   AND  $X{IN, unit.unit, unit}

UNION

   SELECT
    rates_Calendar.date
    0.00 as amount,
    '' as reference     

FROM
    rates_Calendar,unit

    LEFT JOIN property ON property.property = unit.property
    LEFT JOIN regions ON regions.region = property.area

    # unit to apartments
    LEFT JOIN apartments ON (apartments.unit = unit.unit)
    LEFT JOIN apartmentTypes ON (apartmentTypes.id = apartments.apartmentTypeId)

WHERE
    rates_Calendar.date BETWEEN $P{startDate} AND $P{endDate}
    AND rates_Calendar.date NOT IN (
                                       SELECT   
                                          rates_Booking.date
                                       FROM                                                                           
                                          rates_Booking                                                                             
                                          LEFT JOIN booking ON booking.reference =   rates_Booking.bookingReference                                 
                                          LEFT JOIN unit ON booking.apartment = unit.unit
                                          LEFT JOIN property ON property.property = unit.property                                                                               

                                          LEFT JOIN apartments ON (apartments.unit =  unit.unit)                                                                                                                         
                                          LEFT JOIN apartmentTypes ON (apartmentTypes.id = apartments.apartmentTypeId)

                                        WHERE                                                                            
                                           rates_Booking.date BETWEEN $P{startDate} AND $P{endDate}                                                                                                                                                         
                                           AND  $X{IN, unit.unit, unit}                                                                                                 
                                           AND  $X{IN, apartmentTypes.id,apartmentType}

                                        GROUP BY

                                           rates_Booking.date

                                            )                                                                                        

    AND $X{IN,property.property,buildings}
    AND $X{IN,property.area,location}
    AND $X{IN, unit.unit, unit} 
```

另外，有人可以建议它不需要UNION。我知道使用子查询不会带来最佳性能。但是在 JOINS 的 ON 子句中使用 WHERE 条件并没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:41:41.987

除了在查询中添加 0.00 值，您还可以将它们添加到交叉表详细信息字段中，修改详细信息/详细信息部分中字段的字段表达式：

`$V{amountMeasure} == null ? 0.00 : $V{amountMeasure}`

假设这`$V{amountMeasure}`是基于金额字段生成的度量名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:58:43.140

```
 SELECT DATE, SUM(AMOUNT)
 FROM (first query UNION second query)
 GROUP BY DATE
 ORDER BY DATE 
```

# javascript - Javascript ~~ 运算符到底是做什么的？

> ID：14216360
> 
> 赞同：2
> 
> 时间：2013-01-08T13:48:00.080
> 
> 标签：javascript, operator-keyword

> **可能重复：**
> [JavaScript 中的“双波浪号”(~~) 运算符是什么？](https://stackoverflow.com/questions/5971645/what-is-the-double-tilde-operator-in-javascript)

我有一段时间想知道`~~`操作员在 javascript 中到底做了什么。

看起来它与`Math.floor`至少在[查看](http://jsbin.com/ohiyuz/1/edit?javascript&console)结果时基本相同。

```
~~(1.2345) //1
Math.floor(1.2345) // 1 
```

另一件事是我在任何地方都找不到任何关于它的信息。*好吧，谷歌不让搜索“~~”*

但在查看[ECMA 脚本规范](http://www.ecma-international.org/ecma-262/5.1/)时，我似乎也找不到提到的单个条目`~~`

在两者上运行[基准测试](http://jsperf.com/vs-floor)也会产生令人惊讶的结果。原样`Math.floor`_

*   铬 - 1%
*   火狐 - 54%
*   Internet Explorer - 84%

对我来说比`~~`.

任何人都可以对此有所了解吗？
提前感谢=）

# ant - 如何获取ant命令的错误码

> ID：14216362
> 
> 赞同：0
> 
> 时间：2013-01-08T13:48:10.577
> 
> 标签：ant, batch-file

我的 ant 文件已经存在，由于各种原因我不能更改这些文件。
我创建了一个批处理文件，我在该批处理文件中编写所有这些 ant 命令只是为了自动化该过程。
代码看起来像这样

```
1\.  cd abc
2\.  ant realclean && ant
3\.  cd..
4\.  cd pqr
5\.  ant realclean && ant
6\.  cd.. 
```

但是现在我必须检查在第 2 行触发的构建是否成功，然后只转到第 3 行，否则退出。

我用谷歌搜索了一下，发现`%errorlevel%`这是一种选择，但它不适用于我的情况。

有什么建议么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:43:54.937

如何添加另一个 ANT 文件，其中包含执行现有 ANT 文件的任务？

这将为您提供错误处理而无需执行任何操作，您可以在不同的操作系统和[CI 服务器](http://en.wikipedia.org/wiki/Continuous_integration)上重用该文件，并且语法将比批处理更明智......

你可以让 ANT 执行，`project.xml`比如说`ant -f project.xml`

**[编辑]**您甚至不必更改现有项目：只需创建一个新项目，将旧项目的路径分配给新项目的属性，`build.xml`然后您就可以从新项目构建旧项目。

这给了你：

*   您已经知道的理智 [*] 语法（无需学习 DOS 批处理编程的丑陋/错误/残障规则；您确实知道 DOS 曾经被命名为[QDOS “Quick and Dirty OS”](http://en.wikipedia.org/wiki/86-DOS)，是吗？）
*   正确的错误处理
*   将参数传递给子构建的简单方法
*   跨平台支持
*   出现问题时有用的错误消息

[*]: 与 DOS 相比...

# wpf - 注册 MVVM 消息时如何标记视图模型？

> ID：14216369
> 
> 赞同：0
> 
> 时间：2013-01-08T13:48:31.460
> 
> 标签：wpf, xaml, mvvm, mvvm-light

使用 MVVM Light，很容易注册某些类型的消息：

```
public MyViewModel()
{
    Messaging.Messenger.Default.Register<MyObject>(this,
        new Action<MyObject>((o) => DataMember = o));
} 
```

现在，我的软件中有多个文档视图，这意味着在它们之间切换时显示/隐藏视图。当一个视图实例被隐藏时，我希望它的注册消息被忽略。同样，当显示视图实例时，我希望处理其注册的消息。*因此，每个文档*都需要一个消息令牌：

```
public MyViewModel(String documentID)
{
    Messaging.Messenger.Default.Register<MyObject>(this,
        documentID,
        new Action<MyObject>((o) => DataMember = o));
} 
```

**问题是，我无法弄清楚在 XAML/code 中的哪个位置指定此令牌！**

当然，我可以提供`documentID`从视图...

```
public MyView()
{
    InitializeComponent();
    DataContext = new MyViewModel("1234");
} 
```

...有效地给了我同样的问题。我将在哪里指定这个“1234”值？我阅读了有关[x:Arguments Directive](http://msdn.microsoft.com/en-us/library/ee795382.aspx)的信息，希望它能让我在 中指定构造函数参数`XAML`，但似乎它仅在`Loose XAML`:(

我可以想到几个解决方案，比如有一个全局变量 ，`ActiveDocumentID`在实例化视图模型时将其用作标记。有更好的解决方案吗？

# java - Spring MVC 表单验证：如何使字段可选？

> ID：14216371
> 
> 赞同：4
> 
> 时间：2013-01-08T13:48:35.630
> 
> 标签：java, spring, spring-mvc, validation

我有一个表单（Spring 3 MVC 项目），我正在使用 DTO（数据传输对象）进行数据验证。数据被发送到控制器，我正在使用`BindingResult.hasErrors()`方法和适当的注释检查它的有效性。我将在这里进行简化，因为我遇到了数字字段的问题。

**DTO：**

```
public class Item {

    private String discount;

    @Digits(integer = 15, fraction = 2)
    public String getDiscount() {
        return discount;
    }

} 
```

如果我提交的表单中没有任何内容`discount`，`BindingResult.hasErrors()`将返回 true 并返回消息

`numeric value out of bounds (<15 digits>.<2 digits> expected)`.

我想要完成的是该`discount`字段可以为空，但如果其中写入了某些内容，则它应该是`@Digits`注释提供的数字格式。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T14:58:41.553

您需要做的是配置 Spring 将**空 String**转换为**null**。`StringTrimmerEditor`您可以通过在 FormController`initBinder`方法中注册 a 来实现：

```
@InitBinder
public void initBinder(WebDataBinder binder) {
    binder.registerCustomEditor(String.class, new StringTrimmerEditor(true));
} 
```

[StringTrimmer 编辑器](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/beans/propertyeditors/StringTrimmerEditor.html)

然后按照 parsifal 的规定，`@Digits`将`null`值视为有效值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T14:08:31.077

您可以创建自定义验证注释。可以在 spring 文档中找到解释：[http](http://static.springsource.org/spring/docs/3.0.0.RC3/reference/html/ch05s07.html) : //static.springsource.org/spring/docs/3.0.0.RC3/reference/html/ch05s07.html，par 5.7.2.2

# css - 背景不透明度在 ie7 和 ie9 中工作，但不是 ie8

> ID：14216372
> 
> 赞同：1
> 
> 时间：2013-01-08T13:48:40.547
> 
> 标签：css, internet-explorer-8

我的主要css文件有：

```
#wrapper {
    width: 760px;
    margin: 0 auto;
    padding: 20px;
    /* Fallback for web browsers that doesn't support RGBa */
    background: #ffffff;
    /* RGBa with 0.8 opacity */
    background: rgba(255, 255, 255, 0.8);
} 
```

在头部使用条件注释，我的 ie.css 文件有：

```
#wrapper {
    background: transparent;
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#CCFFFFFF,endColorstr=#CCFFFFFF)";
    /* IE8 */
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#CCFFFFFF,endColorstr=#CCFFFFFF);
    /* IE6 & 7 */
    zoom: 1;
} 
```

这在 ie7 和 ie9 中运行良好，但在 ie8 中背景显示为透明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:10:48.180

刚刚在 IE 8 中检查了同事的笔记本电脑，它工作正常。似乎问题出在ietester上。

# jquery - 在 Symfony 2 中使用 POST 时的最佳实践

> ID：14216375
> 
> 赞同：-1
> 
> 时间：2013-01-08T13:48:45.710
> 
> 标签：jquery, post, symfony

我的问题很简单：当使用 Symfony 2 和 jQuery.post 时，我应该在路由中包含参数还是发布到静态 url 并在请求正文中发送参数？

```
$.post('/article/delete/5', function(e){
    // Do something
}); 
```

或者：

```
$.post('/article/delete', { id : 5 }, function(e){
    // Do something
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:42:26.803

The former, if you look at a RESTful API the resource ID is always included in the URI if you want to get (GET), update (PUT), delta update (PATCH) or delete it (DELETE). In an ideal world however you would make a DELETE request using jQuery.

```
$.ajax('/article/delete/5', {
    'type': 'DELETE'
}); 
```

See: [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# date - 如何获取 Doctrine Query Language (dql) 中的日期差异？

> ID：14216376
> 
> 赞同：9
> 
> 时间：2013-01-08T13:48:49.387
> 
> 标签：date, datetime, symfony, doctrine, dql

我有一个名为**Auction**的实体，其中包含两个日期时间类型的字段：date1 和 date2。我想选择 date1 和 date2 之间的差异小于 30 分钟的所有拍卖行。如何使用 Doctrine Query Language 做到这一点？

DATE_DIFF(date1, date2) 如文档所述“计算date1-date2 之间***的天数差异”。***我需要分秒必争的地方。

**编辑**：所以这是自定义函数**TIME_DIFF**的完整实现：

```
use Doctrine\ORM\Query\Lexer;
use Doctrine\ORM\Query\AST\Functions\FunctionNode;

/**
 * Custom DQL function returning the difference between two DateTime values
 * 
 * usage TIME_DIFF(dateTime1, dateTime2)
 */
class TimeDiff extends FunctionNode
{
    /**
     * @var string
     */
    public $dateTime1;

    /**
     * @var string
     */
    public $dateTime2;

    public function parse(\Doctrine\ORM\Query\Parser $parser)
    {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);
        $this->dateTime1 = $parser->ArithmeticPrimary();       
        $parser->match(Lexer::T_COMMA);
        $this->dateTime2 = $parser->ArithmeticPrimary();
        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }

    public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker)
    {
        return 'TIME_TO_SEC(TIMEDIFF(' .
            $this->dateTime1->dispatch($sqlWalker) . ', ' .
            $this->dateTime2->dispatch($sqlWalker) .
        '))'; 
    }
} 
```

然后在你的 app/config/ **config.yml**添加这个：

```
doctrine:
    (...)
    orm:
        (...)
        dql:
            numeric_functions:
                time_diff: MyProject\DQL\TimeDiff 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:45:55.560

您可以使用 MySQL 的 TIMEDIFF（使用 TIME_TO_SEC 并除以 60）：

```
TIME_TO_SEC(TIMEDIFF(date1, date2)) / 60; 
```

我相信你可以在 Doctrine2 中实现它，就像[这个例子](http://www.doctrine-project.org/blog/doctrine2-custom-dql-udfs.html#date-diff)中的 DATE_DIFF 一样。

# linux - apt-get 升级失败

> ID：14216380
> 
> 赞同：1
> 
> 时间：2013-01-08T13:49:07.463
> 
> 标签：linux, upgrade, apt-get, munin

我试图运行“apt-get upgrade”，但我得到了下面的日志。

它*似乎*是由 hasged 引起的（我尝试通过源安装它，而不是使用 apt，它的系统上有痕迹，我将尝试使用原始源文件卸载它）

我也有 munin-node（很确定这是通过 apt），我停止了服务，所以我不认为这是导致问题的原因？

```
Setting up exim4-base (4.72-6+squeeze3) ...
insserv: warning: script 'K02ossec' missing LSB tags and overrides
insserv: warning: script 'ossec' missing LSB tags and overrides
insserv: warning: script 'haveged' missing LSB tags and overrides
insserv: There is a loop between service munin-node and haveged if stopped
insserv:  loop involving service haveged at depth 2
insserv:  loop involving service munin-node at depth 1
insserv: Stopping haveged depends on munin-node and therefore on system facility `$all' which can not be true!
insserv: exiting now without changing boot order!
update-rc.d: error: insserv rejected the script header
dpkg: error processing exim4-base (--configure):
 subprocess installed post-installation script returned error exit status 1
configured to not write apport reports
                                      dpkg: dependency problems prevent configuration of exim4-daemon-light:
 exim4-daemon-light depends on exim4-base (>= 4.72); however:
  Package exim4-base is not configured yet.
dpkg: error processing exim4-daemon-light (--configure):
 dependency problems - leaving unconfigured
dpkg: dependency problems prevent configuration of exim4:
 exim4 depends on exim4-base (>= 4.72); however:
  Package exim4-base is not configured yet.
 exim4 depends on exim4-daemon-light | exim4-daemon-heavy | exim4-daemon-custom; however:
  Package exim4-daemon-light is not configured yet.
  Package exim4-daemon-heavy is not installed.
  Package exim4-daemon-custom is not installed.
dpkg: error processing exim4 (--configure):
 dependency problems - leaving unconfigured
Setting up apache2.2-common (2.2.16-6+squeeze10) ...
configured to not write apport reports
                                      configured to not write apport reports
                                                                            insserv: warning: script 'K02ossec' missing LSB tags and overrides
insserv: warning: script 'ossec' missing LSB tags and overrides
insserv: warning: script 'haveged' missing LSB tags and overrides
insserv: There is a loop between service munin-node and haveged if stopped
insserv:  loop involving service haveged at depth 2
insserv:  loop involving service munin-node at depth 1
insserv: Stopping haveged depends on munin-node and therefore on system facility `$all' which can not be true!
insserv: exiting now without changing boot order!
update-rc.d: error: insserv rejected the script header
dpkg: error processing apache2.2-common (--configure):
 subprocess installed post-installation script returned error exit status 1
configured to not write apport reports
                                      dpkg: dependency problems prevent configuration of apache2-mpm-prefork:
 apache2-mpm-prefork depends on apache2.2-common (= 2.2.16-6+squeeze10); however:
  Package apache2.2-common is not configured yet.
dpkg: error processing apache2-mpm-prefork (--configure):
 dependency problems - leaving unconfigured
configured to not write apport reports
                                      dpkg: dependency problems prevent configuration of apache2:
 apache2 depends on apache2-mpm-worker (= 2.2.16-6+squeeze10) | apache2-mpm-prefork (= 2.2.16-6+squeeze10) | apache2-mpm-event (= 2.2.16-6+squeeze10) | apache2-mpm-itk (= 2.2.16-6+squeeze10); however:
  Package apache2-mpm-worker is not installed.
  Package apache2-mpm-prefork is not configured yet.
  Package apache2-mpm-event is not installed.
  Package apache2-mpm-itk is not installed.
 apache2 depends on apache2.2-common (= 2.2.16-6+squeeze10); however:
  Package apache2.2-common is not configured yet.
dpkg: error processing apache2 (--configure):
 dependency problems - leaving unconfigured
Setting up clamav-freshclam (0.97.6+dfsg-1~squeeze1) ...
configured to not write apport reports
                                      insserv: warning: script 'K02ossec' missing LSB tags and overrides
insserv: warning: script 'ossec' missing LSB tags and overrides
insserv: warning: script 'haveged' missing LSB tags and overrides
insserv: There is a loop between service munin-node and haveged if stopped
insserv:  loop involving service haveged at depth 2
insserv:  loop involving service munin-node at depth 1
insserv: Stopping haveged depends on munin-node and therefore on system facility `$all' which can not be true!
insserv: exiting now without changing boot order!
update-rc.d: error: insserv rejected the script header
dpkg: error processing clamav-freshclam (--configure):
 subprocess installed post-installation script returned error exit status 1
configured to not write apport reports
                                      dpkg: dependency problems prevent configuration of clamav:
 clamav depends on clamav-freshclam | clamav-data; however:
  Package clamav-freshclam is not configured yet.
  Package clamav-data is not installed.
  Package clamav-freshclam which provides clamav-data is not configured yet.
dpkg: error processing clamav (--configure):
 dependency problems - leaving unconfigured
dpkg: dependency problems prevent configuration of libapache2-mod-php5:
 libapache2-mod-php5 depends on apache2-mpm-prefork (>> 2.0.52) | apache2-mpm-itk; however:
  Package apache2-mpm-prefork is not configured yet.
  Package apache2-mpm-itk is not installed.
 libapache2-mod-php5 depends on apache2.2-common; however:
  Package apache2.2-common is not configured yet.
dpkg: error processing libapache2-mod-php5 (--configure):
 dependency problems - leaving unconfigured
configured to not write apport reports
                                      configured to not write apport reports
                                                                            Errors were encountered while processing:
 exim4-base
 exim4-daemon-light
 exim4
 apache2.2-common
 apache2-mpm-prefork
 apache2
 clamav-freshclam
 clamav
 libapache2-mod-php5
E: Sub-process /usr/bin/dpkg returned an error code (1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:54:26.860

如果没有抛出错误，我无法停止 haveged。

在从源代码安装东西时，我也开始使用[checkinstall](http://asic-linux.com.mx/~izto/checkinstall/ "检查安装")，它将所有文件打包到一个包中并以这种方式安装，这样可以更轻松地删除所有相关文件。

我删除了 haveged 的​​源版本使用的所有文件，但我认为主要的罪魁祸首是**/etc/init.d/haveged**

然后“sudo apt-get upgrade”没有问题

# sox - 如何连接 SoX 命令？

> ID：14216381
> 
> 赞同：0
> 
> 时间：2013-01-08T13:49:10.957
> 
> 标签：sox

我在[SoX](http://sox.sourceforge.net/)中有这两个命令：

```
 rec -V3 output.wav trim 0 50 
  sox output.wav out.wav trim 0 10 : newfile : restart 
```

我需要做这项工作，但只需要一个命令行。

我需要将录制的文件“output.wav”修剪成几个 10 秒的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T15:05:11.017

您可以通过管道将它们组合起来，如下所示：

```
rec -p trim 0 50 | sox -p out.wav trim 0 10 : newfile : restart 
```

该`-p`选项是 的简写`-t sox -`，即使用 SoX 的内部格式写入标准输出/从标准输入读取。

在这种特殊情况下，您还可以展开`restart`循环并在一次调用中完成，如下所示：

```
rec out.wav trim 0 10 : newfile : trim 0 10 : newfile : trim 0 10 : newfile : trim 0 10 : newfile : trim 0 10 
```

当然，这并不总是可能的。

# maven - Maven：签出 SVN 存储库，编译，打包到 jar 中并添加为依赖项

> ID：14216382
> 
> 赞同：1
> 
> 时间：2013-01-08T13:49:15.947
> 
> 标签：maven, maven-3

我们有一个使用 Ant 作为构建工具的 Web 应用程序。迫切需要创建 Web 服务 (API)，这将是一个单独的项目。目前，为了让我们的客户可以使用它，我们决定使用我们的 Web 应用程序并删除所有不必要的文件（如速度文件、属性、xml 等）并制作一个 jar。这个 jar 将在我们的 Web 服务项目中使用。

在 Maven 中，我想检查我的 Web 应用程序 svn 分支，编译它，制作它的一个 jar 并作为依赖项添加到我的项目中。这可能吗？如果是，请告诉我路。

我是 Maven 新手，请更详细地解释您的答案。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:00:44.187

# 简答

*   将您的 .war 从您的 ant 构建部署到 Maven 存储库（本地或远程）中
*   子项目会将您的 .war 作为依赖项嵌入，使用您的自定义服务 + 您的原始 .war 文件创建战争
*   建议将这些子项目变成原型，以便更轻松地创建自定义服务

# 长答案

在您的 SCM 中，您可以修改 build.xml 文件并使用[Maven Tasks for Ant](http://maven.apache.org/ant-tasks/)。

特别是，[安装和部署](http://maven.apache.org/ant-tasks/examples/install-deploy.html)示例有助于指导您将 .war 部署到 Maven 存储库（本地或远程）

然后，可以从其他 .war 应用程序使用 .war 工件（从存储库访问时）。

查看 maven-war-plugin 覆盖功能。特别是，这个答案为您提供了更多建议：

[将不同的 Maven 网络项目组合成一个项目](https://stackoverflow.com/questions/14100700/combine-different-maven-web-projects-into-a-single-project/14105957#comment19524174_14105957)

除此之外，我建议您还可以与 Maven Archetypes 结合使用（它们现在比以往任何时候都更容易），因此您可以为您的 Web 服务创建框架项目，这已经取决于这个 .war 依赖项。

# objective-c - 布尔值？: 操作语法

> ID：14216384
> 
> 赞同：-1
> 
> 时间：2013-01-08T13:49:37.697
> 
> 标签：objective-c, c

> **可能重复：**
> [问号和冒号（？：三元运算符）在objective-c中是什么意思？](https://stackoverflow.com/questions/2595392/what-does-the-question-mark-and-the-colon-ternary-operator-mean-in-objectiv)

我看过代码，它使用类似...的语法

```
someValue = someBoolean ? valueOne : valueTwo; 
```

或者类似的东西。

我从来没有用过这个，我不知道它叫什么。

请有人解释如何使用它或提供有关它的资源的链接。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T13:51:39.190

是三元算子。

它评估`someBoolean`条件。

如果是真的，那么传递`valueOne`给`someValue`

如果它是假的，那么传递`valueTwo`给`someValue`

**它等于：**

```
if(someBoolean)
{
   someValue = valueOne;
}
else
{
   someValue = valueTwo;
} 
```

这是一个很好的链接，它解释了[三元运算符](http://cprogramminglanguage.net/c-ternary-operator.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T13:52:12.127

这称为三元运算符 (?:)

```
1 ? 2 : 3 
```

1是条件。

当 1 为真时执行 2。

当 1 为假时执行 3。

类似于：（以下不是运行代码，1,2,3 仅显示某些表达式和语句的占位符。

```
 if(1){ //condition
     2 //true
 }
 else{
     3 //false
 } 
```

* * *

您可以将其缩短为：

```
int bigger;
(10<100) ? bigger=100 : bigger=10; 
```

简而言之：

```
int bigger = (10<100) ? 100 : 10 ; 
```

笔记：

**它的优先顺序是最少的，并且比 if-else 和 switch case 语句慢得多。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T13:53:07.487

它是一个**`ternary operator`**（也称为**`conditional operator`**）。[您可以在此链接](http://www.techotopia.com/index.php/Objective-C_Operators_and_Expressions)中找到解释。

基本上你的表达是说如果`someBoolean`是真的 someValue 会得到`valueOne`，如果不是，它会得到`valueTwo`。

它类似于：

```
 if(someBoolean)
 {
    someValue = valueOne;
 }
 else
 {
    someValue = valueTwo;
 } 
```

这在您的代码中提供了较少的可见性。如果您想分配一个取决于一个条件的值，我建议使用此运算符。

请注意，它不是特定于 的表达式`Objective-C`，您也可以在`C`和中使用它`C++`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T13:52:35.807

赋值的结果是 valueOne 是条件为真，而 valueTwo 是条件为假。

[在维基百科上](http://en.wikipedia.org/wiki/%3F%3a)看到它。它也适用于其他语言，只需跳过它们并查看 C 语法示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T13:53:26.853

假设用户需要回答一些问题，如果他错了，您将视图的背景颜色更改为红色，如果他正确，则更改为绿色。

```
- (void)handleAnswer:(BOOL)correct {
    UIColor *color = (correct) ? [UIColor greenColor] : [UIColor redColor];
    self.view.backgroundColor = color;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T13:56:11.800

它的工作原理与以下相同

```
if (someBoolean)
{
    someValue = valueOne;
}
else
{
    someValue = valueTwo;
} 
```

# sql - 如何一一映射2个不同的记录集？

> ID：14216393
> 
> 赞同：-1
> 
> 时间：2013-01-08T13:50:03.580
> 
> 标签：sql, sql-server

假设我有 2 个 sql 查询。表 A 包含，

```
ID
--
1
1
1
2
3
4 
```

这个查询，

```
Select distinct ID1 FROM A 
```

给我，

```
ID
--
1
2
3
4 
```

第二个

```
Select ID2 FROM B 
```

这给了我，

```
ID2
--
8
21
33
43 
```

2 如何获得这个记录集？

```
ID1  ID2
---  ---
 1    8
 2    21
 3    33
 4    43 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T13:52:59.007

您没有指定 sql server 的版本，但如果您使用的是 sql server 2008+，则可以执行此操作的一种方法是将 添加`row_number()`到每个表，然后加入`row_number()`：

```
select a.id, b.id2
from
(
  select id, row_number() over(order by id) rn
  from a
) a
inner join
(
  select id2, row_number() over(order by id2) rn
  from b
) b
  on a.rn = b.rn 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/1220c/1)

如果您只想使用`DISTINCT`值，那么您应该能够使用：

```
select a.id, b.id2
from
(
  select id, row_number() over(order by id) rn
  from
  (
    select distinct id
    from a
  ) a
) a
inner join
(
  select id2, row_number() over(order by id2) rn
  from b
) b
  on a.rn = b.rn; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/3da07/9)

如果每个表中有不同数量的行，那么您可能需要使用`FULL OUTER JOIN`：

```
select a.id, b.id2
from
(
  select id, row_number() over(order by id) rn
  from
  (
    select distinct id
    from a
  ) a
) a
full outer join
(
  select id2, row_number() over(order by id2) rn
  from b
) b
  on a.rn = b.rn; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/bf199/1)

# c++ - 将字符串存储打印到堆栈中 - 棘手的挑战

> ID：14216397
> 
> 赞同：-5
> 
> 时间：2013-01-08T13:50:16.880
> 
> 标签：c++, stack

我发现以下 C++ 源代码：

```
void victory()
{
  printf("xxxxxxxxxxxxxxxxxxxxxxxx"); //random string
}

int main()
{
    if(0) victory();

    /* code here! */
} 
```

**您的主要目标是在标准输出上打印随机字符串（来自函数胜利）**

怎么可能？如何打印随机字符串？这是一个棘手的陷阱，只是为了好奇。最重要的是，我不能使用指针......

规则：
最多 12 个字符。
您不能使用：“main”、“victory”、“asm”、“%”、“*”、“_”、“#”、“/”、“&”。
你只有一个分号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:03:30.620

很明显，没有办法以任何远程标准兼容的方式解决这个问题。

由于这被视为一个“安全”问题，这表明使用编译器和操作系统特定的黑客是可以的。考虑到这一点，以下在我的系统上使用`gcc`：

```
#include <stdio.h>

void victory()
{
    printf("SxxxxxxxxxxxxxxxxxxxxxxE"); //random string
}

int main()
{
    if(0) victory();

    puts(""-25);
} 
```

`""`它依赖于编译器在我们试图恢复的字符串文字之后立即放置的事实。这里，`25`是未知字符串的（已知）长度。

当然，这用巨大的霓虹灯字母写满了**UNDEFINED BEHAVIOR 。**小心轻放。

# python - BSD/OS X 上的网络掩码/IP 地址查找

> ID：14216399
> 
> 赞同：0
> 
> 时间：2013-01-08T13:50:35.600
> 
> 标签：python, linux, macos, network-programming, bsd

如何使用 python 标准库函数在 OS X（或 BSD）上进行 ip-address/netmask 等查找。我正在处理一个过程，无法让我的脚本在 Mac 上运行。在 Linux 机器上，这很简单：

```
ifname = "eth0"
SIOCGIFNETMASK = 0x891b
s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
socket.inet_ntoa(fcntl.ioctl(s.fileno(), SIOCGIFNETMASK, struct.pack('256s', ifname))[20:24]) 
```

例如，它返回网络掩码。在 OS X 上，我收到`Operation not supported on socket`错误：

```
>>> import socket, fcntl, struct
>>> ifname = "en0"
>>> SIOCGIFNETMASK = 0x891b
>>> s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
>>> socket.inet_ntoa(fcntl.ioctl(s.fileno(), SIOCGIFNETMASK, struct.pack('256s', ifname))[20:24])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IOError: [Errno 102] Operation not supported on socket
>>> 
```

看起来 SIOCGIFNETMASK、SIOCGIFADDR 等偏移量在 BSD/OS X 系统中是不同的。知道如何解决这个问题吗？已经找到了几篇关于同一问题的帖子，但没有得到明确的答案。任何投入将不胜感激。提前致谢。干杯！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:02:36.470

I don't have BSD system to try but hope it should work

```
socket.inet_ntoa(fcntl.ioctl(socket.socket(socket.AF_INET, socket.SOCK_DGRAM), 35099, struct.pack('256s', iface))[20:24]) 
```

# jquery - Mustache 无法正确处理事件

> ID：14216400
> 
> 赞同：0
> 
> 时间：2013-01-08T13:50:35.483
> 
> 标签：jquery, mustache

我想使用 mustache 在我的 html 文件中插入一些模板。

模板、jquery 代码和 html 代码位于三个单独的文件中。这是强制性的，因为我希望我的项目尽可能有条理。

当我将我的“导航”直接写入 html 文件时，点击事件可以正常工作，但如果尝试用小胡子插入它，它就会停止工作。知道为什么吗？谢谢你。

test1.php 文件

```
<html>
    <head>
        <title>World News</title>       
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
        <script src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.9/jquery-ui.js" type="text/javascript"></script>
        <script src = "https://raw.github.com/janl/mustache.js/master/mustache.js" type = "text/javascript"></script>
        <style>
            body{
                background-color: #FFFFFF;  
                position: absolute;
                top: 10%;
                left: 15%;
                right: 15%;
            }

            #menu ul li{
                display:inline;
                padding: 0;
                margin: 0;
            }
        </style>
    </head>
    <body>
        <header>                        
            <section id="menu" class="clear">
                <!-- Insert the 'navigationBar' template -->                                                                                
            </section>                      
        </header>
        <!-- End of header -->

        <script type="text/javascript" src="process1.js">

        </script> 

    </body>
</html> 
```

process1.js

```
 function Guardian_news(filter, selector, div)
    {   
        this.path = 'fullwindow1.html';
        this.filter = filter;
        this.selector = selector;   
        this.populate = function(){ 
            $.get(this.path, function(templates){
                var template = $(templates).filter(filter).html();
                $(selector).html(Mustache.render(template));
            });
        }

    }

    $(document).ready(function(){
        var  menu;
        menu = new Guardian_news('#navigationBar', '#menu');        

        menu.populate();

        $('#science').click(function(){
    alert('url accessed');
        });

    }); 
```

fullWindow1.html

```
 <script id="navigationBar" type="text/x-mustache-template">             
        <nav>               
            <ul>                
                <li><a id="politics" href="#">Politics</a></li>
                <li><a id="science" href="#">Science</a></li>
                <li><a id="health" href="#">Health</a></li>         
                <li><a id="media" href="#">Media</a></li>
                <li><a id="arts" href="#">Arts</a></li>         
                <li><a id="weather" href="#">Weather</a></li>
                <li><a id="sports" href="#">Sports</a></li>
            </ul>                   
        </nav>                          
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:59:36.610

问题是您在元素存在之前将事件处理程序绑定到元素，因为它仍在被 ajax 处理。

尝试`Guardian_news`在 ajax 完成后包含一个回调函数并执行它 - 然后在该回调中绑定您的事件。

编辑：是这样的：

```
function Guardian_news(filter, selector, div, callback)
{   
    this.path = 'fullwindow1.html';
    this.filter = filter;
    this.selector = selector;   
    this.populate = function(){ 
        $.get(this.path, function(templates){
            var template = $(templates).filter(filter).html();
            $(selector).html(Mustache.render(template));
            callback(); // Call our callback here once the ajax is complete and the template is rendered
        });
    }

}

$(document).ready(function(){
    var  menu;

    var callback = function () {
        $('#science').click(function(){
            alert('url accessed');
        });
    }

    menu = new Guardian_news('#navigationBar', '#menu', callback);        

    menu.populate();

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:39:14.477

使用[on-handler](http://api.jquery.com/on/)而不是[click](http://api.jquery.com/click/)。它看起来像这样：

```
 $(document).ready(function(){
        var  menu;
        menu = new Guardian_news('#navigationBar', '#menu');        

        menu.populate();

        $('#menu').on('click', '#science', function(){
            alert('url accessed');
        });
    }); 
```

您必须确保将处理程序附加到的元素已经存在。使用调用中的选择器`on`确保它只处理特定元素。

有关更多信息，请参阅此[小提琴](http://jsfiddle.net/fragmentedreality/e6BmJ/)。

# windows - 无法在虚拟 Windows 8 机器下使用 mstest.exe 执行自动测试

> ID：14216401
> 
> 赞同：0
> 
> 时间：2013-01-08T13:50:37.703
> 
> 标签：windows, testing, automation, mstest, virtual-machine

我有以下问题：无法在虚拟 Windows 8 机器下使用 mstest 命令执行自动测试。我启用了 mstest 日志记录，但遇到以下错误：

> LocalControllerProxy：异常初始化 ControllerObject 或启动代理进程：System.ArgumentException：路径不是合法形式。在 System.IO.Path.NormalizePath(String path, Boolean fullCheck, Int32 maxPathLength) 在 System.IO.Path.GetFullPathInternal(String path) 在 System.IO.Path.GetFullPath(String path) 在 Microsoft.VisualStudio.TestTools.Common .ControllerDefaults.GetControllerWorkingDirectory() 在 Microsoft.VisualStudio.TestTools.Controller.ControllerObject..ctor（布尔远程，ControllerConfiguration controllerConfiguration，AgentManager agentManager）在 Microsoft.VisualStudio.TestTools.TestManagement.LocalControllerProxy.InitializeController（TestRun 运行）

trx 文件中的错误是：

> System.ArgumentException：路径不是合法形式。在 System.IO.Path.NormalizePath(String path, Boolean fullCheck, Int32 maxPathLength) 在 System.IO.Path.GetFullPathInternal(String path) 在 System.IO.Path.GetFullPath(String path) 在 Microsoft.VisualStudio.TestTools.Common .ControllerDefaults.GetControllerWorkingDirectory() 在 Microsoft.VisualStudio.TestTools.Controller.ControllerObject..ctor(Boolean remote, ControllerConfiguration controllerConfiguration, AgentManager agentManager) 在 Microsoft.VisualStudio.TestTools.TestManagement.LocalControllerProxy.InitializeController(TestRun run) 在 Microsoft.VisualStudio。 TestTools.TestManagement.ControllerProxy.QueueTestRunWorker（对象状态）

**如果我禁用Admin Approval Mode** ，问题就消失了，可以执行测试，但在这种情况下，我无法运行 Metro 应用程序。这就是为什么我需要启用此选项。
有人遇到这样的问题吗？在过去的两天里，我一直在尝试通过互联网找到解决方案，但无济于事。所以我想这不是一个常见的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:06:16.840

我找到了解决这个问题的方法。

我启动了虚拟机，导航到 mstest.exe 位置 -> 右键单击​​ -> 属性 -> 兼容性选项卡 -> 更改所有用户的设置 -> 以管理员身份运行此程序。

在我看来，这是目前最合适的解决方案。

# php - 从 tcp 套接字解压缩数据

> ID：14216402
> 
> 赞同：0
> 
> 时间：2013-01-08T13:50:38.233
> 
> 标签：php, sockets, tcp, zlib

我可以使用腻子连接到服务器。我添加IP地址和端口号，然后我连接。在数据开始流动之前，我需要输入“USERNAME=mysusername,PASSWORD=mypassword” 当我这样做时，数据开始流动......我可以看到它，但是它被压缩了。我需要解压缩这些数据。

格式是这样的：Header+PayLoad

我需要处理标头，并对其进行转换，然后解压缩，稍后，我会将这些数据插入到 mysql 中。

我想知道，这是如何用 PHP 完成的，或者是否有更好的解决方案，即 C、C++。我正在使用安装了 mysql 和 php 的 windows 进行连接。数据是连续的，我认为，不知何故，需要先将数据存储在文件中，然后运行一个脚本，比如说每分钟，然后重新启动......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:03:26.593

虽然根据我的经验，在 C 中处理这种数据更容易，但可以在 php 中使用[php socket API](http://php.net/manual/en/book.sockets.php)来完成。[示例页面](http://php.net/manual/en/sockets.examples.php)上有一些简单的示例，包括一个简单的套接字客户端。

要解码从套接字读取的二进制数据，您可以使用[unpack](http://php.net/manual/en/function.unpack.php)函数。

为什么您认为这需要分两个阶段完成？通常读取、解析、解码和存储数据库中的数据不会花费太长时间。

# c - 在链表前面插入一个节点

> ID：14216407
> 
> 赞同：2
> 
> 时间：2013-01-08T13:50:54.450
> 
> 标签：c, linked-list

我有一个链表，现在我想遍历它，每次前进时，我都会将当前节点移动到链表的开头，如下所示：

```
4 5 3 2 7
5 4 3 2 7
3 5 4 2 7
2 3 5 4 7
7 2 3 5 4 
```

编码：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct _node {
    int p;
    struct _node *next;
} node;

main(int argc, char **argv)
{
    int i, n;
    node *nod = NULL;
    node *nod2 = NULL;
    node *nod_tmp = NULL;

    node *nod_next = NULL;
    node *nod_before = NULL;

    printf("Enter n: ");
    scanf("%d", &n);
    for(i = 0; i < n; ++i)
    {
        nod_tmp = (node *)malloc(sizeof(node));
        scanf("%d", &nod_tmp->p);
        if (i == 0)
        {
            nod = nod2 = nod_tmp;
        }
        nod2->next = nod_tmp;
        nod2 = nod_tmp;
    }

    nod_tmp = nod;
    while (nod_tmp->next != NULL)
    {
        nod_before = nod_tmp; // save current node
        nod_next = nod_tmp->next->next; // save next node
        nod_before->next = nod_next; // link the previous with the next one
        nod_tmp->next = nod; // point the current node to the beginning of list
    }

    while(nod != NULL)
    {   
        printf("%d\n", nod->p);
        nod = nod->next;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:12:48.467

认真考虑一下反转列表的 while 循环实际上在做什么。例如，假设我们有这个列表：

```
1 --> 2 --> 3 -->null 
```

让我们看看你的while循环代码：

```
nod_tmp = nod; // nod and nod_tmp now point to 1
while (nod_tmp->next != NULL)
{
    nod_before = nod_tmp; // nod_before, nod_tmp, and nod all point to 1
    nod_next = nod_tmp->next->next; // nod_next points to 3
    nod_before->next = nod_next; // 1-->3 
    nod_tmp->next = nod; // 1-->1
} 
```

第一个节点（仍然由 nod_tmp 引用）现在指向它自己。这不仅会导致您的 while 条件无限旋转，还会泄漏列表中的其余内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T14:30:12.060

```
nod_tmp = nod->next;
nod_before= nod;
while (nod_tmp != NULL)
{
     nod_before->next = nod_tmp->next;
     nod_tmp->next = nod;
     nod = nod_tmp;
     nod_tmp = nod_before->next;
} 
```

将您的第二个循环更改为上面的这个循环。注意`node_tmp`指向头部之后的第二个节点并`nod_before`指向第一个节点。这样可以避免无限循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:06:15.073

无限循环就在这里：

```
while (nod_tmp->next != NULL)
    {
        nod_before = nod_tmp; // save current node
        nod_next = nod_tmp->next->next; // save next node
        nod_before->next = nod_next; // link the previous with the next one
        nod_tmp->next = nod; // point the current node to the beginning of list
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T14:49:55.170

```
#include <stdio.h>
#include <stdlib.h>

typedef struct _node {
    int p;
    struct _node *next;
} node;

main(int argc, char **argv)
{
    int i, n;
    node *nod = NULL;
    node *nod2 = NULL; //header of the linked list
    node *nod_tmp = NULL;

    printf("Enter n: ");
    scanf("%d", &n);
    for(i = 0; i < n; i++)
    {
        nod_tmp = (node *)malloc(sizeof(node));
        scanf("%d", &nod_tmp->p);
        nod_tmp->next = nod2;
        nod2 = nod_tmp;
    }

    nod = nod2;

    printf("Linked list order before reversing:  ");
    while(nod != NULL)
    {   
        printf("%d  ", nod->p);
        nod = nod->next;
    }
    printf("\n");

    nod = nod2;
    while (nod!=NULL && nod->next != NULL)
    {
        nod_tmp = nod2;
        nod2 = nod->next;
        nod->next = nod2->next;
        nod2->next = nod_tmp;
    }

    nod = nod2;

    printf("Linked list order after reversing:  ");
    while(nod != NULL)
    {   
        printf("%d ", nod->p);
        nod = nod->next;
    }
    printf("\n");
    return 0;
} 
```

# unit-testing - Angular-JS 中 div 元素的单元测试折叠行为

> ID：14216409
> 
> 赞同：1
> 
> 时间：2013-01-08T13:50:59.240
> 
> 标签：unit-testing, twitter-bootstrap, angularjs, angular-ui

我有一个简单的表单，希望在单击按钮时显示。即一个按钮显示“添加新用户”，然后页面展开并显示一个表单，在用户完成表单的工作后，表单折叠回来并向用户显示一条消息。我面临的第一个问题是：使用此代码

```
function AngularUI($scope, $window) {

    $scope.collapse = function (selector) {
        angular.element(selector).collapse();
    }
} 
```

和

```
<div class="ang-ui-test">
    <button ng-click="collapse('#collapsible')">
        using angular.element
    </button>

    <div id="collapsible" class="collapse">
        some thing in here ...... !
    </div>

    <button type="button" class="btn btn-danger" data-toggle="collapse" data-target="#demo">
        simple collapsible
    </button>

    <div id="demo" class="collapse in">This one work properly</div>
</div> 
```

第二个不使用 angular.element.collapse 的工作正常。

第二个问题是：我如何测试上述行为。

在第一次按下按钮时，如果 div 被隐藏，则使用 angular.element 的那个会显示出来，但是在显示后它不会隐藏可折叠。（即一个按钮显示“添加新用户”，然后页面展开并显示一个表单，在用户完成表单的工作后，表单折叠回来并向用户显示一条消息。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T00:19:50.193

**你这样做是错的。**在控制器中进行 DOM 操作是不好的，因为您试图在 DOM 有机会渲染/刷新/更新之前查找/操作 DOM。想想控制器中的所有 JS 都在它自己的阶段执行，然后所有的 HTML 都会更新以反映最终的模型状态。

尝试使用`ng-class="{collapse:someBoolExpression}"`

你也可以看看`ui-hide`, `ui-show`and `ui-toggle`(from [AngularUI](http://angular-ui.github.com)，但我认为我们可能应该添加一张票来让你自定义使用的类。

尝试摆脱手动进行 DOM 操作的心态。这需要一段时间，但一旦你习惯了它，你的开发速度就会呈指数级增长。当您最终遇到 Angular 无法为您完成这项工作的墙时，请开始阅读指令并查看 AngularUI 的源代码以获取一些好的注释示例。

# linux - Vala：将字符串作为类传递

> ID：14216410
> 
> 赞同：3
> 
> 时间：2013-01-08T13:51:00.487
> 
> 标签：linux, class, ubuntu, gtk, vala

**场景：** 我有 x 个课程。让我们说10；每个类执行不同的 UI 功能。当用户加载文件时，该扩展名告诉程序要加载的类名；但它是字符串的形式。

反正有没有将字符串作为类名传递？大意的东西。

```
 var classname = "Booger";

 var nose = new classname(){ //classname really means "Booger"
 //Do Operation
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T14:25:59.300

您可以使用 来按名称反映类型`var t = Type.from_name(classname);`，但是，这适用于*所有*类型，包括枚举和结构，它可能是 type `Type.INVALID`。您可能应该做一些检查，例如`t.is_a(typeof(MyParentClass))`.

然后，您可以使用`var obj = Object.new(t);`. 整个事情看起来像：

```
var classname = "Booger";
var t = Type.from_name(classname);
if (t.is_a(typeof(MyParentClass)))
  return Object.new(t);
else
  return null; 
```

还值得注意的是，运行时类型名称前面有命名空间，因此您可能想要这样做`"MyNs" + classname`。您可以签入生成的 C 或正在执行的`typeof(MyClass).name()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-12T08:08:48.847

在获得针对 null 的断言错误方面，我遇到了与 OP 相同的问题。如果您查看 Glib 文档（在 C 中），它提到您必须先通过实际指定类名来注册您的类，然后才能实际使用类名的字符串表示。

换句话说，您必须先使用您的类，然后才能使用 Glib.Type.from_name ("ClassName") 实例化您的类的副本。

您可以通过实例化类实例或获取类的类型信息来首先使用您的类。

```
var type = typeof (MyClass);
var type_from_string = Type.from_name ("MyClass"); 
```

此外，当您使用 Object.new 创建一个类时，您需要注意两件事：

1）您需要转换返回值以获取您的特定类或基类。

```
var instance_of_my_class = Object.new (type) as MyClass; 
```

2）你的类的构造函数将不再被调用（我不知道为什么）。你需要在你的类中使用 GObject 风格的构造函数：

```
construct {
    pizza = 5;
} 
```

# php - DocBlock / REST Web 服务的其他文档

> ID：14216413
> 
> 赞同：2
> 
> 时间：2013-01-08T13:51:20.693
> 
> 标签：php, zend-framework, rest, documentation

我想在 Zend Framework 1 中实现一个 RESTful 设计。我不确定如何记录资源以及允许哪些方法以及可以提供哪些额外参数。

我当前的实现使用控制器名称作为资源，HTTP 方法是操作名称。我已经在包含以下内容的标题中发送“允许”：

```
GET, PUT, PATCH, LINK, UNLINK, POST, DELETE, HEAD, OPTIONS 
```

我想知道如何为客户记录可能的和必需的参数。

1.  有通用的 DocBlock 约定吗？
2.  使用 HTTP 标头“自动记录”可能的额外参数是否可行（如“允许”部分）

现在我正在制作 DocBlock 属性并通过“OPTIONS”请求发送它们。

```
/**
 * @route /data/results
 * @method GET
 * @requiredParams pid The project ID
 * @queryParams tid The team ID
 */
public function getAction()
{
    $pid = $this->_getParam('pid');
    $teamId = $this->_getParam('tid');

    if (null === $pid) {
        $this->getResponse()->setHttpResponseCode(400);
        $this->getResponse()
        ->setBody(Zend_Json::encode(array('required parameters missing')));
    } else {
        $this->getResponse()->setBody(Zend_Json::encode(array($pid, $teamId)));
        $this->getResponse()->setHeader('Content-Type', 'application/json');
        $this->getResponse()->setHttpResponseCode(200);
    }
}

public function optionsAction()
{
    $reflect = new Zend_Reflection_Class($this);
    foreach (explode(',',$this->getAllowedMethods()) as $method) {
        $action = strtolower(trim($method)) . 'Action';
        try {
            $docs[] = $method.' '.$reflect->getMethod($action)
                    ->getDocblock()->getContents();
        } catch(Zend_Reflection_Exception $e) {

        }
    }

    $this->getResponse()->setBody(implode("\n",$docs));
    $this->getResponse()->setHttpResponseCode(200);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:15:29.157

似乎没有公认的标准。一个很好的资源是：

[https://github.com/nelmio/NelmioApiDocBundle](https://github.com/nelmio/NelmioApiDocBundle)

对于 Symfony2 框架。

# android - sipdemo 应用程序中的注册失败错误

> ID：14216416
> 
> 赞同：2
> 
> 时间：2013-01-08T13:51:21.470
> 
> 标签：android, sip

我正在使用 SIPDEMO 应用程序。当我通过用户名、域和密码登录时。它给了我“注册失败错误”..我已经检查了我的 iphone 并且运行良好。所以我的 sip 帐户没有任何问题。

我也阅读了完整的代码，但找不到任何错误

请专家帮助我

这是代码：-

```
public class WalkieTalkieActivity extends Activity implements View.OnTouchListener {

public String sipAddress = null;

public SipManager manager = null;
public SipProfile me = null;
public SipAudioCall call = null;
public IncomingCallReceiver callReceiver;

private static final int CALL_ADDRESS = 1;
private static final int SET_AUTH_INFO = 2;
private static final int UPDATE_SETTINGS_DIALOG = 3;
private static final int HANG_UP = 4;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.walkietalkie);

    ToggleButton pushToTalkButton = (ToggleButton) findViewById(R.id.pushToTalk);
    pushToTalkButton.setOnTouchListener(this);

    // Set up the intent filter.  This will be used to fire an
    // IncomingCallReceiver when someone calls the SIP address used by this
    // application.
    IntentFilter filter = new IntentFilter();
    filter.addAction("android.SipDemo.INCOMING_CALL");
    callReceiver = new IncomingCallReceiver();
    this.registerReceiver(callReceiver, filter);

    // "Push to talk" can be a serious pain when the screen keeps turning off.
    // Let's prevent that.
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

    initializeManager();
}

@Override
public void onStart() {
    super.onStart();
    // When we get back from the preference setting Activity, assume
    // settings have changed, and re-login with new auth info.
    initializeManager();
}

@Override
public void onDestroy() {
    super.onDestroy();
    if (call != null) {
        call.close();
    }

    closeLocalProfile();

    if (callReceiver != null) {
        this.unregisterReceiver(callReceiver);
    }
}

public void initializeManager() {
    if(manager == null) {
      manager = SipManager.newInstance(this);

      Log.v("sip_test", "manager: " + manager.toString());
    Log.v("sip_test", "isApiSupported: " + new Boolean(SipManager.isApiSupported(this)).toString());
    Log.v("sip_test", "isSipWifiOnly: " + new Boolean(SipManager.isSipWifiOnly(this)).toString());
    Log.v("sip_test", "isVoipSupported: " + new Boolean(SipManager.isVoipSupported(this)).toString());

    }

    initializeLocalProfile();
}

/**
 * Logs you into your SIP provider, registering this device as the location to
 * send SIP calls to for your SIP address.
 */
public void initializeLocalProfile() {
    if (manager == null) {
        return;
    }

    if (me != null) {
        closeLocalProfile();
    }

    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    String username = prefs.getString("namePref", "");
    String domain = prefs.getString("domainPref", "");
    String password = prefs.getString("passPref", "");

    System.out.println("username " +username);
    System.out.println("domain " +domain);
    System.out.println("password " +password);

    if (username.length() == 0 || domain.length() == 0 || password.length() == 0) {
        showDialog(UPDATE_SETTINGS_DIALOG);
        return;
    }

    try {
        SipProfile.Builder builder = new SipProfile.Builder(username, domain);
        builder.setPassword(password);
        me = builder.build();

        Intent i = new Intent();
        i.setAction("android.SipDemo.INCOMING_CALL");
        PendingIntent pi = PendingIntent.getBroadcast(this, 0, i, Intent.FILL_IN_DATA);
        manager.open(me, pi, null);

        // This listener must be added AFTER manager.open is called,
        // Otherwise the methods aren't guaranteed to fire.

        manager.setRegistrationListener(me.getUriString(), new SipRegistrationListener() {
                public void onRegistering(String localProfileUri) {
                    updateStatus("Registering with SIP Server...");
                }

                public void onRegistrationDone(String localProfileUri, long expiryTime) {
                    updateStatus("Ready");
                }

                public void onRegistrationFailed(String localProfileUri, int errorCode,
                        String errorMessage) {
                    updateStatus("Registration failed.  Please check settings.");
                    System.out.println("local profile uri " + localProfileUri);
                    System.out.println("error code" + errorCode);
                    System.out.println("error message " +errorMessage);
                }
            });
    } catch (ParseException pe) {
        updateStatus("Connection Error.");
        System.out.println("parse exception"+pe.getMessage());
    } catch (SipException se) {
        updateStatus("Connection error.");
        System.out.println("Connection exception"+se.getMessage());
    }
}

/**
 * Closes out your local profile, freeing associated objects into memory
 * and unregistering your device from the server.
 */
public void closeLocalProfile() {
    if (manager == null) {
        return;
    }
    try {
        if (me != null) {
            manager.close(me.getUriString());
        }
    } catch (Exception ee) {
        Log.d("WalkieTalkieActivity/onDestroy", "Failed to close local profile.", ee);
    }
}

/**
 * Make an outgoing call.
 */
public void initiateCall() {

    updateStatus(sipAddress);

    try {
        SipAudioCall.Listener listener = new SipAudioCall.Listener() {
            // Much of the client's interaction with the SIP Stack will
            // happen via listeners.  Even making an outgoing call, don't
            // forget to set up a listener to set things up once the call is established.
            @Override
            public void onCallEstablished(SipAudioCall call) {
                call.startAudio();
                call.setSpeakerMode(true);
                call.toggleMute();
                updateStatus(call);
            }

            @Override
            public void onCallEnded(SipAudioCall call) {
                updateStatus("Ready.");
            }
        };

        call = manager.makeAudioCall(me.getUriString(), sipAddress, listener, 30);

    }
    catch (Exception e) {
        Log.i("WalkieTalkieActivity/InitiateCall", "Error when trying to close manager.", e);
        if (me != null) {
            try {
                manager.close(me.getUriString());
            } catch (Exception ee) {
                Log.i("WalkieTalkieActivity/InitiateCall",
                        "Error when trying to close manager.", ee);
                ee.printStackTrace();
            }
        }
        if (call != null) {
            call.close();
        }
    }
}

/**
 * Updates the status box at the top of the UI with a messege of your choice.
 * @param status The String to display in the status box.
 */
public void updateStatus(final String status) {
    // Be a good citizen.  Make sure UI changes fire on the UI thread.
    this.runOnUiThread(new Runnable() {
        public void run() {
            TextView labelView = (TextView) findViewById(R.id.sipLabel);
            labelView.setText(status);
        }
    });
}

/**
 * Updates the status box with the SIP address of the current call.
 * @param call The current, active call.
 */
public void updateStatus(SipAudioCall call) {
    String useName = call.getPeerProfile().getDisplayName();
    if(useName == null) {
      useName = call.getPeerProfile().getUserName();
    }
    updateStatus(useName + "@" + call.getPeerProfile().getSipDomain());
}

/**
 * Updates whether or not the user's voice is muted, depending on whether the button is pressed.
 * @param v The View where the touch event is being fired.
 * @param event The motion to act on.
 * @return boolean Returns false to indicate that the parent view should handle the touch event
 * as it normally would.
 */
public boolean onTouch(View v, MotionEvent event) {
    if (call == null) {
        return false;
    } else if (event.getAction() == MotionEvent.ACTION_DOWN && call != null && call.isMuted()) {
        call.toggleMute();
    } else if (event.getAction() == MotionEvent.ACTION_UP && !call.isMuted()) {
        call.toggleMute();
    }
    return false;
}

public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(0, CALL_ADDRESS, 0, "Call someone");
    menu.add(0, SET_AUTH_INFO, 0, "Edit your SIP Info.");
    menu.add(0, HANG_UP, 0, "End Current Call.");

    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case CALL_ADDRESS:
            showDialog(CALL_ADDRESS);
            break;
        case SET_AUTH_INFO:
            updatePreferences();
            break;
        case HANG_UP:
            if(call != null) {
                try {
                  call.endCall();
                } catch (SipException se) {
                    Log.d("WalkieTalkieActivity/onOptionsItemSelected",
                            "Error ending call.", se);
                }
                call.close();
            }
            break;
    }
    return true;
}

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
        case CALL_ADDRESS:

            LayoutInflater factory = LayoutInflater.from(this);
            final View textBoxView = factory.inflate(R.layout.call_address_dialog, null);
            return new AlertDialog.Builder(this)
                    .setTitle("Call Someone.")
                    .setView(textBoxView)
                    .setPositiveButton(
                            android.R.string.ok, new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int whichButton) {
                                    EditText textField = (EditText)
                                            (textBoxView.findViewById(R.id.calladdress_edit));
                                //   sipAddress = textField.getText().toString();
                                    sipAddress= "sip:kukukkk@ekiga.net";
                                    initiateCall();

                                }
                    })
                    .setNegativeButton(
                            android.R.string.cancel, new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int whichButton) {
                                    // Noop.
                                }
                    })
                    .create();

        case UPDATE_SETTINGS_DIALOG:
            return new AlertDialog.Builder(this)
                    .setMessage("Please update your SIP Account Settings.")
                    .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int whichButton) {
                            updatePreferences();
                        }
                    })
                    .setNegativeButton(
                            android.R.string.cancel, new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int whichButton) {
                                    // Noop.
                                }
                    })
                    .create();
    }
    return null;
}

public void updatePreferences() {
    Intent settingsActivity = new Intent(getBaseContext(),
            SipSettings.class);
    startActivity(settingsActivity);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-24T00:22:42.567

1.  检查您的 android 手机是否支持 Sip。

2.  确认此代码包含在清单文件中：

    `<uses-sdk android:minSdkVersion="9" />`

# iphone - 如何在 iOS 上重新呈现 modalViewController

> ID：14216417
> 
> 赞同：0
> 
> 时间：2013-01-08T13:51:24.480
> 
> 标签：iphone, ios, window, modalviewcontroller, presentmodalviewcontroller

我的应用程序有两个窗口，*mainWindow*（用于几乎所有视图）和*loginWindow*（仅用于登录视图）。当`applicationDidEnterBackground`我用*loginWindow切换**mainWindow*时：

 *```
[self.loginWindow makeKeyAndVisible];
[self.mainWindow setHidden:YES]; 
```

当我回到应用程序时，会显示带有其视图的*loginWindow 。*这工作得很好。

但是我在*mainWindow*`modalView`中的演示存在问题。再次切换窗口后。返回 mainWindow 后，modalView 不可见。*`applicationDidEnterBackground`*

 *方法`self.modalViewController`给了我之前提出的确切`modalView`信息，但不再可见。

我试图再次显示这个 modalView 没有这样的运气：

```
[self presentModalViewController:self.modalViewController animated:NO]; 
```

我怎样才能再次“重新呈现”这个隐藏的 modalView？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:21:35.433

可能你在这里需要一些逻辑。就像 Crio 所说的，进入后台时将其关闭，但请记住它在一个属性或 smth 中。别的。

```
// applicationDidEnterBackground
self.savedModalViewController = self.modalViewController;
[self.mainWindow dismissModalViewControllerAnimated:NO];

// after login but before presenting the mainWindow again
[self.mainWindow presentModalViewController:self.savedModalViewController animated:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:05:27.243

如果您以模态方式显示“modalView”，则`applicationDidEnterBackground`关闭模态视图：

```
[self.mainWindow dismissModalViewControllerAnimated:NO]; 
```

然后模态应该可以正常工作。**

# asp.net-mvc - 我可以在 MVC 中有这样的静态路由吗？

> ID：14216427
> 
> 赞同：2
> 
> 时间：2013-01-08T13:51:51.207
> 
> 标签：asp.net-mvc, controller, action, routes

在我的 Web 应用程序中，我将有如下路线：

```
http://server/requests/info/{id}-{guidPart} (a string) 
```

所以我认为我会很聪明并制定一条路线，所以我做到了：

```
routes.MapRoute(
    name: "Info",
    url: "{controller}/{action}/{id}-{guidPart}",
                defaults: new { controller = "Requests", action = "Info", id = 0, guidPart = "" }
); 
```

然后我想，为什么我需要指定默认值，为什么不把它全部修复，除了最后一部分：

```
routes.MapRoute(
    name: "Info",
    url: "requests/info/{id}-{guidPart}"
); 
```

但是当我去一个像这样的网址时：

```
http://server/requests/info/123-abc123 
```

它失败并说：

**404 找不到资源。**

关于我做错了什么的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:57:41.613

你可以有一个静态路由，但你仍然必须指定默认路由到哪个控制器和动作。

```
routes.MapRoute(
name: "Info",
url: "requests/info/{id}-{guidPart}",
defaults: new { controller = "Requests", action = "Info", id = 0, guidPart = ""}); 
```

这与上面的默认值之间的区别在于，此 UriTemplate 只会尝试匹配以“requests/info/”开头的 Uri

# visual-studio-2008 - 覆盖 Visual Studio 2008 MSBuild 版本

> ID：14216436
> 
> 赞同：1
> 
> 时间：2013-01-08T13:52:30.703
> 
> 标签：visual-studio-2008, msbuild, nuget-package, compact-framework2.0

编译项目时是否可以更改 Visual Studio 2008 使用的 msbuild 版本？

我想将其设置为使用 msbuild 4.0。

这背后的原因是能够导入我们的 VS2012 项目用于恢复 nuget 包的相同 .targets 文件。这些项目无法升级到 VS10+，因为它们是智能设备项目。

我尝试手动编辑原始目标文件，但 msbuild 3.5 中缺少太多功能，我无法解决它们。

**更新：**

原始 .targets 文件还使用了 nuget.exe 文件的自动下载功能，使用了 MSBuild 3.5 中不支持的代码任务，因此应该考虑这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:11:44.583

从 Visual Studio 编译时，您使用的是 devenv 而不是 msbuild。很高兴看到 devenv 如何调用 msbuild（但作为 VS 一个非开源工具，我们不能）。所以，我认为不可能做到这一点。也许还有另一种方法可以做你想做的事情。

MSbuild v3.5 不像 MSbuild 4.0 那样支持动态任务创建，但您可以[创建自定义任务](http://tech.pro/tutorial/934/creating-msbuild-tasks-in-csharp)并[导入它们](http://msdn.microsoft.com/en-us/library/t41tzex2%28v=vs.90%29.aspx)。

首先，创建一个简单的类库（我称之为 DownloadNuget2008.dll），其中包含下载 nuget.exe 的任务（取自 nuget.targets）：

```
using System;
using System.IO;
using System.Net;
using Microsoft.Build.Utilities;

namespace DownloadNuget2008
{
    public class DownloadNuget2008Task : Task
    {
        public string OutputFilename { get; set; }

        public override bool Execute()
        {
            try
            {
                OutputFilename = Path.GetFullPath(OutputFilename);

                Log.LogMessage("Downloading latest version of NuGet.exe...");
                var webClient = new WebClient();
                webClient.DownloadFile("https://nuget.org/nuget.exe", OutputFilename);

                return true;
            }
            catch (Exception ex)
            {
                Log.LogErrorFromException(ex);
                return false;
            }
        }
    }
} 
```

我曾经使用下面的 Exec 任务在 Visual Studio 2008 上恢复我的 NuGet 包（编辑你的 csproj/vbproj）：

```
 <UsingTask AssemblyFile="$(SolutionDir)DownloadNuget2008.dll" TaskName="DownloadNuget2008Task" />
  <!-- Download NuGet.exe if it does not already exist -->
  <PropertyGroup>
    <NuGetExePath Condition=" '$(NuGetExePath)' == '' ">$(SolutionDir)nuget.exe</NuGetExePath>
    <DownloadNuGetExe Condition=" '$(DownloadNuGetExe)' == '' ">true</DownloadNuGetExe>
  </PropertyGroup>
  <Target Name="_DownloadNuGet">
    <Message Text="Downloading nuget..." />
    <DownloadNuget2008Task OutputFilename="$(NuGetExePath)" Condition=" '$(DownloadNuGetExe)' == 'true' AND !Exists('$(NuGetExePath)')" />
    <Message Text="Downloading nuget - done." />
  </Target>
  <!-- NuGet Packages Installation (Begin)  -->
  <Target Name="Install-Packages">
    <Exec Command="$(SolutionDir)nuget install $(ProjectDir)packages.config -o $(SolutionDir)packages" />
  </Target>
  <!-- NuGet Packages Installation (End)  -->
  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
  <Target Name="BeforeBuild">
    <CallTarget Targets="_DownloadNuGet" />
    <CallTarget Targets="Install-Packages" />
  </Target> 
```

然后你会在输出中看到：

```
Target BeforeBuild:
  Task "CallTarget"
    Target "_CheckForInvalidConfigurationAndPlatform" skipped. Previously built successfully.
    Target _DownloadNuGet:
      Task "Message"
        Downloading nuget...
      Done executing task "Message".
      Using "DownloadNuget2008Task" task from assembly "C:\marcos\Testes\NuGet2008\ConsoleApplication1\DownloadNuget2008.dll".
      Task "DownloadNuget2008Task"
        Downloading latest version of NuGet.exe...
      Done executing task "DownloadNuget2008Task".
      Task "Message"
        Downloading nuget - done.
      Done executing task "Message".
  Done executing task "CallTarget".
  Task "CallTarget"
    Target "_CheckForInvalidConfigurationAndPlatform" skipped. Previously built successfully.
    Target Install-Packages:
      Task "Exec"
        Command:
        C:\marcos\Testes\NuGet2008\ConsoleApplication1\nuget install C:\marcos\Testes\NuGet2008\ConsoleApplication1\ConsoleApplication1\packages.config -o C:\marcos\Testes\NuGet2008\ConsoleApplication1\packages
        Successfully installed 'elmah 1.2.2'.
      Done executing task "Exec".
  Done executing task "CallTarget". 
```

我了解您希望对 VS2012 和 VS2008 使用相同的 .targets 文件，但是（如您所说）MSBuild 3.5 和 4.0 之间存在许多差异，因此更容易使用特定方法。

# jira - 链接 JIRA - Bitbucket 不同的名称

> ID：14216439
> 
> 赞同：0
> 
> 时间：2013-01-08T13:52:42.560
> 
> 标签：jira, dvcs, bitbucket

我们正在尝试使用 DVCS 链接 jira 项目和具有不同名称的 Bitbucket 存储库

jira 项目的名称为 LAMB 并且 bitbucket 存储库名称为 lambdev

当两者具有相同的名称但现在它们具有不同的名称时，我工作得很好，我无法在我的案例的提交“选项卡”中看到提交历史记录。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:40:34.853

在 BitBucket 中：

1.  进入项目设置
2.  转到链接
3.  删除Jira的DVCS扩展已经写好的链接
4.  点击添加新链接
5.  输入信息。

# php - 我正在尝试在 magento 的产品页面上显示面包屑，但它给了我一个致命错误

> ID：14216442
> 
> 赞同：1
> 
> 时间：2013-01-08T13:52:54.217
> 
> 标签：php, magento

这是我在 catalog/product/view.phtml 中放入的行：

```
<?php echo $this->getLayout()->getBlock('breadcrumbs')->toHtml(); ?> 
```

这是我得到的错误：

```
Fatal error: Call to a member function toHtml() on a non-object in ../catalog/product/view.phtml on line 159 
```

有什么解决办法吗？我正在运行 Magento 1.4.1.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:20:54.630

**XML**

确保您在主题的 page.xml 中进行了配置设置

```
<block reference="header">
   <block type="page/html_breadcrumbs" name="breadcrumbs" as="breadcrumbs"/>
</block> 
```

**看法**

您需要调用 HTML 项目本身

```
<?php echo $this->getChildHtml('breadcrumbs') ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T23:35:40.740

I had this same quandary. I managed to get breadcrumbs on the products page by adding the following to app/design/frontend/THEME/default/layout/calalog.xml

```
<catalog_product_view translate="label">
    <-- existing content -->
    <reference name="content">
        <-- existing blocks -->
        <block type="catalog/product_view" name="product.info" template="catalog/product/view.phtml">
            <-- existing blocks -->
            <block type="page/html_breadcrumbs" name="breadcrumbs" as="breadcrumbs"/>
        </block>
     </reference>
    <-- existing content -->
</catalog_product_view> 
```

Then in catalog/product/view.phtml add the following where you would like the breadcrumbs to appear.

```
<?php echo $this->getChildHtml('breadcrumbs') ?> 
```

# php - Parse Apache VHosts to get list of Domains and Folder Paths

> ID：14216449
> 
> 赞同：3
> 
> 时间：2013-01-08T13:53:22.033
> 
> 标签：php, apache, vhosts

Given a path X or a copy of the apache vhosts configuration file, how would I parse that file using PHP?

E.g. Given a variable containing a string that has the contents of an Apache vhosts configuration, how would I get a list of hosted domains/subdomains alias?

For example, given:

```
#
# Use name-based virtual hosting.
#
NameVirtualHost *:80

<VirtualHost *:80>
    ServerAdmin contact@tomjn.com
    DocumentRoot "/srv/www/localhost/

    ServerName 127.0.0.1
    ServerAlias localhost
    CustomLog "/srv/www/logs/localhost-access_log.log" combined
    ErrorLog "/srv/www/logs/localhost-error_log.log"

    <Directory "/srv/www/localhost">
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin contact@tomjn.com
    DocumentRoot "/srv/www/2.7.localhost.com/

    ServerName 2.7.localhost.com
    ServerAlias 2.7.localhost.com
    CustomLog "/srv/www/logs/2.7.localhost.com-access_log.log" combined
    ErrorLog "/srv/www/logs/2.7.localhost.com-error_log.log"

    <Directory "/srv/www/2.7.localhost.com">
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

How would I get this output:

*   localhost
*   2.7.localhost.com

Here's something very close written in Python:

[http://www.poldylicious.de/system/files/apacheconfig.py.txt](http://www.poldylicious.de/system/files/apacheconfig.py.txt)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-19T17:35:47.797

```
# Get Vhosts files
$path       = '/etc/apache2/sites-enabled'; # change to suit your needs
$a_directory = scandir($path);
$a_conf_files = array_diff($a_directory, array('..', '.'));
$info = array(); $x=0;

foreach($a_conf_files as $conf_file){
 $Thisfile   = fopen($path .'/'.$conf_file, 'r')or die('No open ups..');

    while(!feof($Thisfile)){
        $line = fgets($Thisfile);
        $line = trim($line);

       // CHECK IF STRING BEGINS WITH ServerAlias
        $tokens = explode(' ',$line);

        if(!empty($tokens)){
            if(strtolower($tokens[0]) == 'servername'){
                $info[$x]['ServerName'] = $tokens[1];
            }
            if(strtolower($tokens[0]) == 'documentroot'){
                $info[$x]['DocumentRoot'] = $tokens[1];
            }
            if(strtolower($tokens[0]) == 'errorlog'){
                $info[$x]['ErrorLog'] = $tokens[1];
            }
            if(strtolower($tokens[0]) == 'serveralias'){
                $info[$x]['ServerAlias'] = $tokens[1];
            }

        }else{
            echo "Puked...";
        }
    }

fclose($file);
$x++;
}

print_r($info); 
```

OUTPUT:

```
Array
(
    [0] => Array
        (
            [ServerName] => bootstrap
            [ServerAlias] => BootstrapProject
            [DocumentRoot] => /data/sites/bootstrap/htdocs
            [ErrorLog] => /data/sites/bootstrap/log/error.log
        )

    [1] => Array
        (
            [ServerName] => localhost
            [ServerAlias] => dfs
            [DocumentRoot] => /data/sites/scott/htdocs
            [ErrorLog] => /data/sites/scott/log/error.log
        )

    [2] => Array
        (
            [ServerName] => wordpress
            [ServerAlias] => wordpress
            [DocumentRoot] => /data/sites/wordpress/public_html
            [ErrorLog] => /data/sites/wordpress/log/error.log
        )

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:05:57.120

As far as I found, there is no such library available. If you want a simple solution, you could just use regexes to find all virtual hosts, and use regexes on that to find all the variables and their values. Though you should take care with things like `<Directory>` inside vhost definitions.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T17:38:42.620

hmmm the answer this was based on has dissapeared/got deleted, for whatever reason, here's my finalised version of it:

```
<?php
function return_server_alias($fileName){
    $file = fopen($fileName,'r');
    $servers = array();
    while(!feof($file)) { 
        $line = fgets($file);
        // STRIP WHITE SPACE HERE
        $line = trim($line);
        // CHECK IF STRING BEGINS WITH ServerAlias
        $tokens = explode(' ',$line);
        if(!empty($tokens)){
            if(strtolower($tokens[0]) == 'serveralias'){
                $servers[] = $tokens[1];
            }
        }
    }
    fclose($file);
    return $servers;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-11-05T17:21:31.413

Here's my rework to get more informations from yours vhosts:

```
<pre><?php

    # Get Vhosts files
    $path       = '/etc/apache2/sites-enabled'; # change to suit your needs
    $a_directory = scandir($path);
    $a_conf_files = array_diff($a_directory, array('..', '.'));
    $info = array(); $x=0;`enter code here`

    foreach($a_conf_files as $conf_file){
     $Thisfile   = fopen($path .'/'.$conf_file, 'r')or die('No open ups..');

        $info[$x]['VHostFile'] = $conf_file;
        while(!feof($Thisfile)){
            $tokens = array();
            $line = fgets($Thisfile);
            $line = trim($line);

            if(preg_match('/\s*#+.*/',$line))
                $info[$x]['Commentaires'][] = $line;
            else
    {

            if(count($tokens)==3){
                if(strtolower($tokens[1]) == 'servername'){
                    $info[$x]['ServerName'][] = $tokens[2];
                    $index[$tokens[2]] = $x;
                }
                elseif(strtolower($tokens[1]) == 'documentroot'){
                    $info[$x]['DocumentRoot'] = $tokens[2];
                }
                elseif(strtolower($tokens[1]) == 'errorlog'){
                    $info[$x]['ErrorLog'] = $tokens[2];
                }
                elseif(strtolower($tokens[1]) == 'serveralias'){
                    $info[$x]['ServerAlias'][] = $tokens[2];
                }
                elseif(strtolower($tokens[1]) == 'virtualhost'){
                    $info[$x]['VirtualHost'] = $tokens[2];
                }
                elseif(strtolower($tokens[1]) == 'loglevel'){
                    $info[$x]['LogLevel'] = $tokens[2];
                }
                elseif(strtolower($tokens[1]) == 'assignuserid'){
                    $info[$x]['AssignUserId'] = $tokens[2];
                }
                elseif(strtolower($tokens[1]) == 'ifmodule'){
                    $info[$x]['IfModule'][] = $tokens[2];
                }
                elseif(strtolower($tokens[1]) == 'directory'){
                    $info[$x]['Directory'][] = $tokens[2];
                }
                elseif(strtolower($tokens[1]) == 'serveradmin'){
                    $info[$x]['ServerAdmin'] = $tokens[2];
                }
                elseif(strtolower($tokens[1]) == 'options'){
                    $info[$x]['Options'] = $tokens[2];
                }
                elseif(strtolower($tokens[1]) == 'indexoptions'){
                    $info[$x]['IndexOptions'] = $tokens[2];
                }
                elseif(strtolower($tokens[1]) == 'alias'){
                    $info[$x]['Alias'][] = $tokens[2];
                }
                elseif(!empty($tokens[1]))
                    $info[$x]['Autre'][$tokens[1]] = $tokens[2];

            }elseif(!empty($line)){
                $info[$x]['Illisible'][] = $line;
            }
    }
        }

    fclose($Thisfile);
    $x++;
    }

    echo var_export($index,true);

    echo var_export($info,true);

?></pre> 
```

# delphi - 活动 FPU 异常

> ID：14216455
> 
> 赞同：0
> 
> 时间：2013-01-08T13:53:36.107
> 
> 标签：delphi, exception, fpu

一切都好吗？伙计们，想和你们交流一个想法。在我的公司，一位同事在您的 delphi 中遇到问题，只有在一个项目中，“浮点除以零”的异常没有出现。

我检查了所有我知道的地方可能会影响： **- Delphi 选项 -> Embarcadero 调试器 -> 语言异常。- 我测试了指令 System.Set8087CW ($ 1,372) 来激活 FPU 异常**

但它没有用。有人对问题的原因有任何提示吗？

谢谢。

# xslt - xslt 将子节点中的属性作为元素移动到父节点

> ID：14216457
> 
> 赞同：1
> 
> 时间：2013-01-08T13:53:39.363
> 
> 标签：xslt

我想将我的子节点属性作为元素移动到父节点。例如。更改以下xml

```
<Parent>
 <Children>
 <Child key="Name">ABC</Child>
 <Child key="Age">8</Child>
 <Child key="Height">140</Child>
 <Child key="Class">6</Child>
 </Children>
</Parent> 
```

到

```
<Parent>
 <Name>ABC</Name>
 <Age>8</Age>
 <Height>140</Height>
 <Class>6</Class>
</Parent> 
```

希望我的问题很清楚..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:02:25.080

```
<xsl:template match="Parent">
  <xsl:copy>
    <xsl:apply-templates select="Children/Child"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="Children/Child[@key]">
  <xsl:element name="{@key}">
    <xsl:value-of select="."/>
  </xsl:element>
</xsl:template>

<xsl:output indent="yes"/> 
```

应该足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:05:50.300

**这种竞争和短暂的转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
     <Parent>
      <xsl:apply-templates/>
     </Parent>
 </xsl:template>

 <xsl:template match="Child">
   <xsl:element name="{@key}"><xsl:apply-templates/></xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<Parent>
 <Children>
 <Child key="Name">ABC</Child>
 <Child key="Age">8</Child>
 <Child key="Height">140</Child>
 <Child key="Class">6</Child>
 </Children>
</Parent> 
```

**产生想要的正确结果：**

```
<Parent>
   <Name>ABC</Name>
   <Age>8</Age>
   <Height>140</Height>
   <Class>6</Class>
</Parent> 
```

# c++ - 使用 cmake 和 cygwin 链接问题

> ID：14216458
> 
> 赞同：0
> 
> 时间：2013-01-08T13:53:41.377
> 
> 标签：c++, compilation, cygwin, cmake, mex

这是设置：

```
set(CMAKE_FIND_LIBRARY_SUFFIXES .lib .dll.a .a)
set(MATLAB_MEXFILE_EXT mexw64)
find_file(MATLAB_ROOT matlab $ENV{ProgramW6432})
set(MATLAB_LIBRARIES_DIR ${MATLAB_ROOT}/extern/lib/win64/microsoft)

find_path(MATLAB_INCLUDE_DIR
  NAMES mex.h
  PATHS ${MATLAB_ROOT}
  PATH_SUFFIXES extern/include
  NO_DEFAULT_PATH
)

include_directories(${MATLAB_INCLUDE_DIR})

find_library(MATLAB_MEX_LIB mex ${MATLAB_LIBRARIES_DIR} NO_DEFAULT_PATH)
find_library(MATLAB_MX_LIB mx PATHS ${MATLAB_LIBRARIES_DIR} NO_DEFAULT_PATH)
find_library(MATLAB_MAT_LIB mat PATHS ${MATLAB_LIBRARIES_DIR} NO_DEFAULT_PATH)
set(MATLAB_LIBRARIES ${MATLAB_MEX_LIB} ${MATLAB_MX_LIB} ${MATLAB_MAT_LIB})

add_library(mytest SHARED mytest.cpp)
target_link_libraries(mytest ${MATLAB_LIBRARIES}) 
```

但是当我运行时，`make`我会收到以下类型的错误：

```
undefined reference to `_mexErrMsgIdAndTxt' 
```

显然是链接问题。但是为什么会发生呢？这是`make`命令的输出：

```
/usr/bin/c++.exe -Dmytest_EXPORTS -I"/cygdrive/c/Program Files/matlab/extern/include"    -o CMakeFiles/mytest.dir/mytest.cpp.o -c /home/hous/workspace/mytest.cpp

/usr/bin/c++.exe -shared -Wl,--enable-auto-import -o mytest.mexw64 -Wl,--out-implib,libmytest.dll.a -Wl,--major-image-version,0,--minor-image-version,0 CMakeFiles/mytest.dir/mytest.cpp.o "/cygdrive/c/Program Files/matlab/extern/lib/win64/microsoft/libmex.lib" "/cygdrive/c/Program Files/matlab/extern/lib/win64/microsoft/libmex.lib" "/cygdrive/c/Program Files/matlab/extern/lib/win64/microsoft/libmx.lib" "/cygdrive/c/Program Files/matlab/extern/lib/win64/microsoft/libmat.lib" 
```

一切似乎都是正确的？

# c# - 修改 IEnumerable 类型

> ID：14216459
> 
> 赞同：3
> 
> 时间：2013-01-08T13:53:50.997
> 
> 标签：c#

我有一个从下面的代码中获得的字符串`IEnumerable`类型。 var groups 是一种`Enumerable`具有一些字符串值的类型。假设组中有 4 个值，第二个位置的值只是空字符串 "" 。问题是我怎样才能将它移动到第四个，即结束位置。我不想排序或更改任何顺序。只是移动空的“”值，无论它出现在最后一个位置。

```
List<Item> Items = somefunction();
var groups = Items.Select(g => g.Category).Distinct(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T13:56:41.383

只需按字符串值对结果进行排序：

```
List<Item> Items = somefunction();
var groups = Items.Select(g => g.Category).Distinct().OrderByDescending(s => s); 
```

编辑（在 OP 编辑​​之后）：

```
List<Item> Items = somefunction();
var groups = Items.Select(g => g.Category).Distinct();

groups = groups.Where(s => !String.IsNullOrEmpty(s))
    .Concat(groups.Where(s => String.IsNullOrEmpty(s))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T14:01:58.930

不能直接修改`IEnumerable<>`实例，但是可以新建一个：

```
var list = groups.Where(x => x != "").Concat(groups.Where(x => x == "")); 
```

请注意，在此查询中，`groups`被迭代两次。对于 deferred 而言，这通常不是一个好的做法`IEnumerable<>`，因此您应该`ToList()`在 之后调用`Distinct()`以急切地评估您的 LINQ 查询：

```
var groups = Items.Select(g => g.Category).Distinct().ToList(); 
```

**编辑 ：**

再想一想，有一种更简单的方法可以做到这一点：

```
var groups = Items.Select(g => g.Category).Distinct().OrderBy(x => x == ""); 
```

请注意，这不会触及非空元素的顺序，因为`OrderBy`它是稳定的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T13:56:49.443

```
var groups = Items.Select(g => g.Category).Distinct().OrderByDescending(s =>s); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T14:02:58.090

我不喜欢我的查询，但它应该可以完成这项工作。它选择所有非空项目并将其与空项目联合。

```
var groups = Items.Select(g => g.Category).Distinct()
.Where(s => !string.IsNullOrEmpty(s))
.Union(Items.Select(g => g.Category).Distinct()
.Where(s => string.IsNullOrEmpty(s))); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-08T14:06:52.903

尝试类似的东西

```
var temp = groups.Where(item => ! String.IsNullOrEmpty(item)).ToList<string>();
while (temp.Count < groups.Count) temp.Add(""); 
```

# javascript - 如何在 SOAP 中传递 Null？

> ID：14216463
> 
> 赞同：1
> 
> 时间：2013-01-08T13:54:06.310
> 
> 标签：javascript, ajax, wcf, soap, null

我的 WCF Web 服务中有以下方法签名：

```
public CreateItemResult CreateAgent(int tenantId, string loginName, int timeZoneId) 
```

如何`timeZoneId`在我的 SOAP 中传递 Null 值？我尝试在我的 SOAP 请求中传递以下内容，但没有成功：

```
<timeZoneId i:nil="true" xmlns:i="http://www.w3.org/2001/XMLSchema-instance" /> 
```

我必须更改`int timeZoneId`为`int? timeZoneId`在我的 WCF Web 服务中才能将 Null 值传递给它吗？还有其他方法吗？
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:31:20.530

是的，如果您想传递 null，您需要`timeZoneId`在您的操作合同中设置为 null ( `int?`)。否则`timeZoneId`元素在 XSD 模式中被视为不可空。

# asp.net - ASP 网站如何将 dll 与网页匹配？

> ID：14216464
> 
> 赞同：1
> 
> 时间：2013-01-08T13:54:06.993
> 
> 标签：asp.net, .net, asp.net-mvc, iis, webdev.webserver

当您转到 ASP 网站的根目录（webforms 或 MVC）时，Web 服务器如何知道要加载哪个 .aspx 或 .cshtml 文件，以及`bin/`目录中的哪个 dll 包含要执行的代码？两者如何搭配？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T14:03:50.160

我不知道您是在寻找一个非常技术性的答案，还是一个简单的概述。所以，这里有一个**简单的概述**。

# 默认文件

> 当您转到 ASP 网站的根目录时

ASP、HTML、PHP 或您使用的任何技术，Web 服务器知道要搜索的默认文档并在未提供文档时显示，例如，在 Microsoft IIS Server 中，默认文档是：

![在此处输入图像描述](../Images/2e04e5ec5d04ba95700d3d5112f41ed8.png)

这对于 Apache 服务器也是如此，有一个设置告诉服务器“如果您没有文档名称，请使用这个”设置，这个在`.htaccess`文件中找到并且具有：

```
DirectoryIndex  index.php index.html index.htm default.html default.htm home.html 
```

在 ASP.NET MVC 中，您使用路由表，并且在`Global.asax`文件中提到了路由，可以通过直接指定路由或调用外部文件（类），常见的路由是：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
); 
```

这表明，如果没有提供路线，它将与`/Home/Index`.

# 组件

关于`DLL`s 部分，这完全是关于你的第一个文件......

.NET 站点已预编译并公开了它们的命名空间和属性，您将在 ASP.NET Webforms 中拥有，在第一行代码中是这样的：

```
<%@ Page Title="Home Page" Language="C#" 
    MasterPageFile="~/Site.Master" 
    AutoEventWireup="true" 
    CodeBehind="Default.aspx.cs" 
    Inherits="WebApplication3._Default" %> 
```

这告诉服务器在`WebApplication3._Default`内部运行，`Default.aspx.cs`并从那里附加任何需要的程序集来运行代码。

# android - LinearLayout里面的RelativeLayout？

> ID：14216467
> 
> 赞同：9
> 
> 时间：2013-01-08T13:54:18.603
> 
> 标签：android, layout, android-linearlayout, android-relativelayout

我想知道我在这里做错了什么，为什么围绕这些按钮`RelativeLayout`会导致错误？我没有太多编辑布局，我可以不坚持这样的相对或线性布局吗？

如果我没有在布局中将按钮包围起来，它们会出现在彼此下方，我只是想尝试将它们水平地放在一起。

我认为我完成整个布局的方式很糟糕，因为它在垂直方向上看起来很挤压。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/MainLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

   <LinearLayout android:id="@+id/topButtons" 
    android:layout_margin="4dip"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
    <Button android:id="@+id/deviceConnect"
        android:layout_margin="8dip"
        android:layout_weight="3"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:text="Connect2"/>
    <LinearLayout android:orientation="vertical"
        android:layout_weight="1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <LinearLayout android:orientation="horizontal"
            android:layout_margin="8dip"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">
            <TextView android:text="Connected Adapter:"
                android:layout_gravity="center_vertical"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>
            <Spinner android:id="@+id/deviceSpinner"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:drawSelectorOnTop="true"/>
            <TextView android:id="@+id/currentSettings" 
                android:layout_marginLeft="8dip"
                android:text="Current Settings: Not Connected"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"/>
        </LinearLayout>
        <LinearLayout android:orientation="horizontal"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">
            <LinearLayout android:orientation="horizontal"
                android:layout_margin="8dip"
                android:layout_weight="1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">
                <TextView android:text="Baud:"
                    android:layout_gravity="center_vertical"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>
                <Spinner android:id="@+id/baudSpinner"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:drawSelectorOnTop="true"/>
            </LinearLayout>
            <LinearLayout android:orientation="horizontal"
                android:layout_margin="8dip"
                android:layout_weight="1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">
                <TextView android:text="Data:"
                    android:layout_gravity="center_vertical"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>
                <Spinner android:id="@+id/dataSpinner"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:drawSelectorOnTop="true"/>
            </LinearLayout>
            <LinearLayout android:orientation="horizontal"
                android:layout_margin="8dip"
                android:layout_weight="1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">
                <TextView android:text="Parity:"
                    android:layout_gravity="center_vertical"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>
                <Spinner android:id="@+id/paritySpinner"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:drawSelectorOnTop="true"/>
            </LinearLayout>
            <LinearLayout android:orientation="horizontal"
                android:layout_margin="8dip"
                android:layout_weight="1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">
                <TextView android:text="Stop:"
                    android:layout_gravity="center_vertical"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>
                <Spinner android:id="@+id/stopSpinner"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:drawSelectorOnTop="true"/>
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>
    <Button android:id="@+id/updateSettings"
        android:layout_margin="8dip"
        android:layout_weight="3"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:text="Update\nSettings"/>
</LinearLayout>
<RelativeLayout>
   <Button android:id="@+id/Command"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Test Command"/> 

   <Button android:id="@+id/Command"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Test Command"/> 

   <Button android:id="@+id/Command"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Test Command"/> 

   <Button android:id="@+id/Command"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Test Command"/> 

   <Button android:id="@+id/Command"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Test Command"/> 
    </RelativeLayout>

<jackpal.androidterm.emulatorview.EmulatorView
    android:id="@+id/emulatorView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:focusable="true"
    android:focusableInTouchMode="true"

    />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0"
    android:orientation="horizontal" >

    <EditText
        android:id="@+id/term_entry"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:singleLine="true"
        android:imeOptions="actionNone|flagNoExtractUi"
        android:inputType="text|textImeMultiLine" />

    <Button
        android:id="@+id/term_entry_send"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:text="@string/entry_send" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T14:12:56.913

正如其他人已经指出的那样，您需要`layout_width`为`layout_height`您的`RelativeLayout`. 这应该可以解决您的错误，除非您还有其他问题。但我认为值得注意的是[DOCS](http://developer.android.com/guide/topics/ui/layout/relative.html)关于布局的内容

> RelativeLayout 是用于设计用户界面的非常强大的实用程序，因为它可以消除嵌套视图组并保持布局层次结构平坦，从而提高性能。如果您发现自己使用了多个嵌套的 LinearLayout 组，则可以将它们替换为单个 RelativeLayout。

You have many nested `LinearLayout`s so you may consider using a `RelativeLayout` for better performance and readability. You can also use `android:orientation="horizontal"` in a nested `LinearLayout` to get your buttons next to each other. But, again, a `RelativeLayout` may be better in your situation instead of having all of the nested layouts.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T13:58:09.990

您的 relativeLayout 没有大小。

为其定义 layout_height 和 layout_width

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-08T14:01:11.697

```
 <RelativeLayout 
            android:layout_width="match_parent"
            android:layout_height="wrap_content"> 
```

# symfony - Symfony2 和 Doctrine - 错误：无效的 PathExpression。必须是 StateFieldPathExpression

> ID：14216470
> 
> 赞同：104
> 
> 时间：2013-01-08T13:54:36.627
> 
> 标签：symfony, doctrine-orm, dql

我有一个看起来像这样的实体：

```
/**
 * @Gedmo\Tree(type="nested")
 * @ORM\Table(name="categories")
 * @ORM\Entity()
 */
class Category extends BaseCategory
{

    /**
    * @ORM\OneToMany(targetEntity="Category", mappedBy="parent")
    */
    protected $children;

    /**
    * @Gedmo\TreeParent
    * @ORM\ManyToOne(targetEntity="Category", inversedBy="children")
    * @ORM\JoinColumn(name="parent_id", referencedColumnName="id", onDelete="SET NULL")
    */
    protected $parent;

} 
```

我正在尝试运行这样的查询：

```
$qb = $this->em->createQueryBuilder()
            ->select('c.parent')
            ->from('Category', 'c');

$result = $qb->getQuery()->getArrayResult(); 
```

但是，我收到以下错误：

```
[Semantical Error] ... Error: Invalid PathExpression. Must be a StateFieldPathExpression. 
```

如何从我的表中选择 parent_id 字段。我尝试了很多变化，即使我做了这样的事情：

```
$qb = $this->em->createQueryBuilder()
            ->select('c')
            ->from('Category', 'c'); 
```

**除了**parent_id ，我得到了表中的所有字段。这似乎是教义妨碍了。如何查询此 parent_id 字段？或者更好的是如何获取表中的**所有**字段，包括**parent_id**

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2013-01-08T14:16:51.043

您可以使用当前未记录的`IDENTITY`函数在查询中选择 FK ID：

```
SELECT IDENTITY(c.parent) ... 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-04-04T07:47:35.183

使用 createQueryBuilder 的解决方案：

```
$query->SELECT('pa.id')
        ->from('Category', 'ca');
$query->join('ca.parent', 'pa');

$result = $query->getQuery()->getArrayResult(); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-09-24T20:11:40.697

您正在选择一个未连接的对象。就像在另一个答案中所说的那样，您必须执行以下操作：

```
qb->innerJoin("c.parent", "p") 
```

# android - 在android中并行平滑地动画两个视图

> ID：14216474
> 
> 赞同：0
> 
> 时间：2013-01-08T13:54:52.060
> 
> 标签：android, animation, view

有没有办法让两个不同的视图平滑地平行动画。我可以通过`startAnimation`分别调用两个视图来执行动画，但是动画不会顺利进行。

# css - Windows 8 input[type="range"] 在触摸设备上不好

> ID：14216475
> 
> 赞同：0
> 
> 时间：2013-01-08T13:55:02.187
> 
> 标签：css, windows-8

我正在为 win8 平台开发这个应用程序，我遇到了 input[type="range"]（滑块）的问题，当您想要移动滑块拇指时，您经常滑动孔背景而不是滑块拇指.

他们是一个 input[type="range"]::-ms-thumb 选择器，但它似乎只在 x 轴上工作，因为它周围的区域溢出隐藏了 y 轴。

有没有人有办法增加拇指的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:53:47.507

您可以将`-ms-touch-action: none;`CSS 属性添加到输入元素以在触摸该元素时禁用平移，然后它应该会更好地工作。

# multithreading - R中的pthread支持

> ID：14216477
> 
> 赞同：-1
> 
> 时间：2013-01-08T13:55:15.280
> 
> 标签：multithreading, r, pthreads

我一直在寻找一种在后台将 R 函数作为单独线程运行的方法。由于 R 是用 C 编写的，我希望某些包将支持使用 pthreads 进行线程化。到目前为止，我还没有发现任何好的东西，我测试的一些包被破坏或实现了一些其他概念。所以我的要求就像在 R 控制台内将 R 脚本作为单独的 pthread 运行一样简单。我如何将函数或脚本作为单独的线程运行。

PS - 我不是在寻找类似 fork 的功能。

谢谢 Vineeth

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:00:02.440

在[R 扩展手册](http://www.hep.by/gnu/r-patched/r-exts/R-exts_13.html)中：

> 没有对 POSIX 线程的直接支持

* * *

或者，您可以并行使用多个 R 进程。在 linux 中，您可以通过从终端运行 R 脚本并添加来简单地分叉一个进程`&`，例如：

```
Rscript spam.R & 
```

如果您坚持从 R 中执行此操作：

```
system("Rscript spam.R", wait = FALSE) 
```

或者您可以查看`parallel`包以并行运行 R 操作。

* * *

鉴于您的评论，我认为您可以查看 HighPerformance 任务视图。从中引用：

> Kane 和 Emerson 的 bigmemory 包允许在内存中（以及通过文件）存储诸如矩阵之类的大对象，并使用外部指针对象来引用它们。这允许从 R 进行透明访问，而不会违反 R 的内部存储器限制。同一台计算机上的多个 R 进程也可以共享大内存对象。

表明该`bigmemory`包可能会证明让多个 R 实例访问存储在内存中的相同数据很有趣。比您可以使用分叉创建多个 R 实例。

# javascript - 请解释下划线.js的_.identity(value)的用法

> ID：14216479
> 
> 赞同：24
> 
> 时间：2013-01-08T13:55:24.797
> 
> 标签：javascript, underscore.js

请解释`_.identity(value)`下划线.js 的用法。无法从文档（[http://underscorejs.org/#identity](http://underscorejs.org/#identity)）中理解它。

你能提供一些它的用法例子吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-09-14T09:08:48.797

一个涉及身份的 JavaScript 代码模式是根据真实性过滤值，例如

```
var a = [null, null, [1,2,3], null, [10, 12], null];

a.filter(_.identity) 
```

产生 [Array[3], Array[2]]。

使用

```
_.compact(a) 
```

更清晰，但可能根本不使用 lodash 或下划线，例如

```
function identity(x) { 
   return x; 
}

a.filter(identity) 
```

出于几个原因，它是否是一个好的代码模式值得怀疑，但它正在被广泛使用。

这根本不是 NOOP。NOOP 在例如汇编中是一种命令式构造，而在函数式编程中，它与其他函数一样返回一个值。如果 identity 是 NOOP，那么所有的纯函数也可以被认为是 noop，这不是一件明智的事情。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-08T13:59:47.593

它本质上是一个无操作功能。它返回传递给它的任何值。

关于它在库本身中用作“默认迭代器”的部分意味着在其他可能具有可选“迭代器”参数的函数中（可能用作应用于某种数组的每个元素的函数） ，如果没有传递迭代器参数，库将使用这个“无操作”迭代器，并且数组的元素将保持不变。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-08-14T04:05:35.970

**一个具体的例子：**

Underscore.js 定义了 _.each ，就像这样。

```
_.each = function(obj, iterator, context) {
  ...
} 
```

此迭代器显示 el 值。你可能用过这个成语。

```
_.each([1, 2, 3], function(el){
  console.log(el);
}); 
```

此迭代器返回 el 值而不作任何更改。

```
_.each([1, 2, 3], function(el){
  return el;
}); 
```

返回值不变的函数经常出现。所以 Underscore.js 想要定义函数。Underscore.js 将函数命名为 _.identity。

```
_.identity = function(value) {
  return value;
}; 
```

如果 Underscore.js 想要使用默认迭代器，Underscore.js 只需要调用 _.identity。

```
_.each([1, 2, 3], _.identity); 
```

# jquery - 如何使 twitter 引导模式框焦点在 iPad 中正常工作？

> ID：14216480
> 
> 赞同：1
> 
> 时间：2013-01-08T13:55:24.360
> 
> 标签：jquery, ipad, twitter-bootstrap

在一个 php Web 应用程序中，我使用的是 twitter 引导模式框。当我单击表单中的保存按钮时，会显示模态框并且默认焦点正常工作。但在 iPad 中，当我点击 go 按钮时，焦点不起作用。

这是我正在使用的 twitter 引导模式代码：

```
<div class="modal hide" id="confirm-password">                    
   <div class="modal-header">    
   </div>
   <div class="modal-body">    
       <input type="text" placeholder="Your Current Password" value="" name="currentpassword" id="currentpassword" autofocus>                      
   </div>
   <div class="modal-footer">                           
   </div>
</div> 
```

这是JS代码：

```
$('#confirm-password').on('shown', function () {
   jQuery('input:text:visible:first', this).focus(); //focus for input
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:16:44.977

请注意，这`focus`不适用于 iPad。用户必须点击有问题的输入。这不是特定于 Bootstrap 的。

请参阅： [iPad HTML 焦点](https://stackoverflow.com/questions/5978470/ipad-html-focus)

当为触摸屏设备显示对话框时，您可以做的是在相关输入上[触发](http://api.jquery.com/trigger/)`click`或`touchstart`事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T10:28:47.477

如果您将 Web 应用程序添加到*主屏幕*，这将适用于最近的 iOS。

# ios - iphone可以在不滚动的情况下水平显示多少像素的图像？

> ID：14216483
> 
> 赞同：2
> 
> 时间：2013-01-08T13:55:28.307
> 
> 标签：ios, iphone

好的，所以我一直在阅读 iphone 4 的屏幕分辨率是“640x960”。

所以我创建了一个网页，里面有一个 600x300 的图像。

现在，当我访问网页时，它只显示了大约一半的图像，我必须向右滚动才能看到所有内容。在我的搜索过程中，我读到 iphone 4 的像素数为 2 对应 1 CSS 像素等等。

有人可以为我澄清一下吗？所以 iphone 4 不能“正常”显示尺寸小于 640 像素宽的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:13:35.120

是的，“正确”的分辨率是 320x480。Retina 显示屏将分辨率翻倍，但增加了“点”的概念，因此开发人员不必制作同一应用程序的两个版本。 [在这里](http://globalmoxie.com/blog/designing-for-iphone4-retina-display.shtml)你可以阅读更多关于它的信息。

# jquery - 暂停用jQuery制作的无限循环

> ID：14216491
> 
> 赞同：0
> 
> 时间：2013-01-08T13:56:23.457
> 
> 标签：jquery, animation, loops

我正在使用[无限循环功能](http://trendmedia.com/news/infinite-rotating-images-using-jquery-javascript/)，该功能根据我的需要进行了一些修改：

```
$(document).ready(function() {
var NewsRotator = {init: function()
{
    var numberOfTitles = $('.NewsRotator li').length;
    //set current item
    var currentTitle = 0;
    //show first item
    $('.NewsRotator li').eq(currentTitle).fadeIn(1000); //initial fade-in
    //loop through the items
    var infiniteLoop = setInterval(function(){
        $('.NewsRotator li').eq(currentTitle).fadeOut(100); //current item fade-out time
        if(currentTitle == numberOfTitles -1){
            currentTitle = 0;
        }else{
            currentTitle++;
        }
        $('.NewsRotator li').eq(currentTitle).fadeIn(900); //next item fade-in time
    }, 3000); //interval between items
}
};
NewsRotator.init();
}); 
```

[这是jsFiddle](http://jsfiddle.net/5YBbU/)上的工作示例

我想要做的是在鼠标悬停时设置动画暂停并在鼠标离开时恢复它。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:31:05.983

这是设置全局标志以在悬停时暂停和播放的方法，以及[jsFiddle](http://jsfiddle.net/5YBbU/1/)。

```
var NewsRotator = (function(){
var numberOfTitles = $('.NewsRotator li').length,
    currentTitle = 0;
return {
    flag : true,
    init : function(){
        $('.NewsRotator').on({
            mouseenter : function(){
                NewsRotator.flag = false;
            },
            mouseleave : function(){
                NewsRotator.flag = true;
            }
        });
        $('.NewsRotator li').eq(currentTitle).fadeIn(1000);
        infiniteLoop = setInterval(function () {
            if (NewsRotator.flag == true){
                $('.NewsRotator li').eq(currentTitle).fadeOut(100);
                if (currentTitle == numberOfTitles - 1) {
                    currentTitle = 0;
                } else {
                    currentTitle++;
                }
                $('.NewsRotator li').eq(currentTitle).fadeIn(900);
            } else {
                return false;
            }
        }, 3000);
    }
};
}());
$(document).ready(function(){
NewsRotator.init();
}); 
```

*另外-我认为您可以通过缓存“li”选择器来稍微提高性能。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:04:30.070

有两种方法可以实现这一点：

1.  清除动画，然后重新启动。这也将确保与下一个项目的差距始终保持不变。
2.  使用全局标志从轮换函数中提前返回。`true`只要鼠标悬停在新闻项目上，就将标志设置为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:43:00.270

看看这个[JQFAQ.com](http://jqfaq.com/how-to-pause-and-resume-setinterveltimer-in-js/)，这里是暂停和恢复计时器的答案。这里有更多常见问题解答，我希望这会帮助您获得更多想法

# antlr - ANTLR 读取值块

> ID：14216499
> 
> 赞同：0
> 
> 时间：2013-01-08T13:56:40.967
> 
> 标签：antlr

我已经为此工作了超过 2 天，但没有成功。这将是一个常见问题，但我找不到解决方案。我确实搜索过！

## 问题：

我有一些数据要读取，比如每行 5 个值。我知道我想从之前读取的值中读取多少。例如，要读取的 6 个值，分布在 2 行中......

```
6
10 20 30 40 50
60 
```

所以在每5个变量之后我想读一个新行。如果有 0 个变量，我想跳过这一点，如果我想读取 5 个变量的精确倍数，那么我想避免重复 NL 调用。

我试过这个...

```
varblock[ Integer count ]
@init{
Integer varIndex = 0;
}
    : { count > 0 }? ( dp=NUMBER { count--; varIndex++;  }
          { ( varIndex \% 5 ) == 0 }? NL { varIndex = 0; }
          )+ { varIndex > 0 }? => NL
    |
    ; 
```

但我得到...

```
failed predicate: { ( varIndex \% 5 ) == 0 }? 
```

可能是我误解了谓词。我的语法中有几个其他谓词似乎有效，但它们不是这种类型。在那里，我试图根据输入文件的版本跳过一些语法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:04:28.907

NL 只是输入行末尾的换行符。

```
NL    :   ( '\n' | '\r' )+ ; 
```

在其他行中，我们阅读了其他一些内容，例如...

“IPE270” “BS 7191 GR 355C” 0.0 0 0

并且诸如 STRING、FLOAT 或 NUMBER 之类的值必须按预期顺序出现在这些行上。因此，如果我们在读取必要的数据值之前遇到 NL，就会出现语法错误。所以，也许你的问题的答案是“是”。

也许我只是（结束了？）简化了这个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:07:16.317

已解决：这是括号的问题。我查看了生成的解析器代码以获取线索。

```
varblock[ Integer count ]
@init{
   Integer index = 0;
}
   : ( { count > 0 }? => ( NUMBER  { count--; index++; } 
                         | { (index \% 5) == 0 }? => NL ) )+ { index > 0 }? => NL
   |
  ; 
```

每行最多读取 5 个值。

# c# - 如何修改图表的背景

> ID：14216508
> 
> 赞同：0
> 
> 时间：2013-01-08T13:57:02.693
> 
> 标签：c#, winforms, charts, mschart

1.  如何删除“-----Series1”文本（右上角，靠近按钮 1）
2.  我怎样才能让蓝色阶梯思考者，并删除背景线？
3.  如何为背景绘制颜色，例如从 y=0 到 y=1 的区域颜色为灰色。
4.  如何添加鼠标滚轮事件，以便我可以使用 Ctrl+鼠标滚轮来放大和缩小图表？

谢谢！

![在此处输入图像描述](../Images/2ba64aec4cdb96c3359f3cd3d2adec12.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:05:54.883

下面我提供了一些示例代码来回答您的问题。我对 3 和 4 的回答是基本示例，您必须计算正确的值以在应用程序中进行绘制和缩放。

```
 private void button1_Click(object sender, EventArgs e)
    {
        setupChart();
    }

    private void setupChart()
    {
        // 1.
        foreach (System.Windows.Forms.DataVisualization.Charting.Legend legend in chart1.Legends)
            legend.Enabled = false;

        // 2.
        chart1.Series[0].BorderWidth = 5;
        chart1.ChartAreas[0].AxisX.MajorGrid.Enabled = false;
        chart1.ChartAreas[0].AxisY.MajorGrid.Enabled = false;

        // 3.
        chart1.Paint += new PaintEventHandler(chart1_Paint);

        // 4.
        chart1.MouseWheel += new MouseEventHandler(chart1_MouseWheel);
        //chart must have focus for MouseWheel event to fire
        chart1.Focus();
    }

    private void chart1_Paint(object sender, PaintEventArgs e)
    {
        //basic example of painting

        //determine size of area to paint
        Size areaSize = new Size(50, 50);

        //determine location to paint
        Point point = new Point(100, 450);

        e.Graphics.FillRectangle(new SolidBrush(Color.Gray),
            point.X, point.Y, areaSize.Width, areaSize.Height);
    }

    private void chart1_MouseWheel(object sender, MouseEventArgs e)
    {
        //basic example of zooming in and out
        if (e.Delta > 0)
        {
            chart1.ChartAreas[0].AxisX.ScaleView.Zoom(
                chart1.ChartAreas[0].AxisX.ScaleView.ViewMinimum / 2,
                chart1.ChartAreas[0].AxisX.ScaleView.ViewMaximum / 2);
            chart1.ChartAreas[0].AxisY.ScaleView.Zoom(
                chart1.ChartAreas[0].AxisY.ScaleView.ViewMinimum / 2,
                chart1.ChartAreas[0].AxisY.ScaleView.ViewMaximum / 2);
        }
        else
        {
            if (chart1.ChartAreas[0].AxisX.ScaleView.ViewMaximum <
                chart1.ChartAreas[0].AxisX.Maximum ||
                chart1.ChartAreas[0].AxisX.ScaleView.ViewMinimum >
                chart1.ChartAreas[0].AxisX.Minimum)
            {
                chart1.ChartAreas[0].AxisX.ScaleView.Zoom(
                    chart1.ChartAreas[0].AxisX.ScaleView.ViewMinimum * 2,
                    chart1.ChartAreas[0].AxisX.ScaleView.ViewMaximum * 2);
                chart1.ChartAreas[0].AxisY.ScaleView.Zoom(
                    chart1.ChartAreas[0].AxisY.ScaleView.ViewMinimum * 2,
                    chart1.ChartAreas[0].AxisY.ScaleView.ViewMaximum * 2);
            }
            else
            {
                chart1.ChartAreas[0].AxisX.ScaleView.ZoomReset();
                chart1.ChartAreas[0].AxisY.ScaleView.ZoomReset();
            }
        }
    } 
```

# c++ - 带有多个参数的模板的 Qt foreach

> ID：14216510
> 
> 赞同：5
> 
> 时间：2013-01-08T13:57:12.307
> 
> 标签：c++, qt

我遇到了 qt foreach 和具有多个模板参数的模板的问题。

```
QVector<Node<T, U> > nodes;
...
[append some data]
...
foreach(const Node<T, U>& node, nodes) {
  ...
} 
```

我收到此错误：

```
error: use of undeclared identifier 'Q_FOREACH' 
```

我猜这是由于`,`模板中的，因为 Qt 宏在另一个模板声明中没有检测到它。如何在不使用普通 for 循环或 C++11 的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T14:06:18.740

如果你的编译器支持 C++11，你可以使用

```
foreach(auto node, nodes) { ... } 
```

甚至

```
for(auto node: nodes) { ... } 
```

否则，您可以强制预处理器忽略模板中的逗号，如下所示：

```
#define COMMA ,
foreach(const Node<T COMMA U>& node, nodes) { ... } 
```

或者你可以使用 typedef

```
typedef Node<T, U> NodeTU;
foreach(const NodeTU& node, nodes) { ... } 
```

# c# - 我应该为这种匿名类型创建一个专用类吗？

> ID：14216511
> 
> 赞同：1
> 
> 时间：2013-01-08T13:57:18.053
> 
> 标签：c#, linq

我的一个函数中有以下代码

```
goodsQuery = db.Goods.Select(g => new { g.name, g.description, g.image, g.price }); 
```

如果它已在方法中定义，我将使用*var*类型。但是当变量定义为类字段时我必须使用什么类型？

当然`IEnumerable<Goods>`不会顺利。尝试使用`IEnumerable<object>`但结果是一样的。

我应该为此创建一个新课程吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T13:58:35.027

您正在使用[匿名类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)。这只能存在于函数的范围内。如果您希望结果可用于属性，则需要为此创建一个真实的类。

> 您不能将字段、属性、事件或方法的返回类型声明为具有匿名类型。同样，您不能将方法、属性、构造函数或索引器的形式参数声明为具有匿名类型。要将匿名类型或包含匿名类型的集合作为参数传递给方法，可以将参数声明为类型对象。然而，这样做违背了强类型的目的。如果您必须存储查询结果或将它们传递到方法边界之外，请考虑使用普通的命名结构或类而不是匿名类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:01:13.780

如果使用 C# 4，`dynamic`如果创建类不可行，您也可以使用...

但似乎类`Good`（奇怪的名字）在这里是一个更好的选择。

# c# - C# 中的应用程序设置文件复杂性

> ID：14216512
> 
> 赞同：1
> 
> 时间：2013-01-08T13:57:21.493
> 
> 标签：c#, application-settings

**我在 VS2008 中**由 C# 开发的服务应用程序中添加了一个**设置文件**。在设置文件的设计器中，我插入了新的日期时间变量并输入了该日期时间变量的默认值。例如，假设这个变量的名字是，它的值是“ ”。当我运行我的服务应用程序时，我使用以下代码行正确地 获得了值：**`user scope``MyDate``2013-01-08`
`MyDate`** 

 **```
Datetime value = app.Default.MyDate; // app is the name of the settings file 
```

之后，我使用以下代码行设置`MyDate`为“ ”：`2013-01-08 14:00:00`

```
app.Default.MyDate = DateTime.Now; // Suppose Now is 2013-01-08 14:00:00 at that time.
app.Default.Save(); 
```

到目前为止一切正常。`MyDate`参数设置为我想要的。但是，我看不到`app.config`文件中的新值。当我在 Debug 文件夹中打开配置文件时，我只看到：

```
 <setting name="MyDate" serializeAs="String">
        <value>2013-01-08</value>
    </setting> 
```

令人惊讶的是，当我重新运行应用程序时，`MyDate`参数似乎是“ `2013-01-08 14:00:00`”而不是“ `2013-01-08`”！我查看了 Debug 文件夹和项目文件夹中的每个配置文件，但找不到任何带有“ `2013-01-08 14:00:00`”的值。但是`MyDate`参数在启动时设置为这个值。
我想知道 MyDate 变量的值存储在哪里？我应该查找哪个文件？

**解决方案编辑：**我决定不使用设置文件。我将使用 app.config 文件而不是设置文件来存储我的应用程序参数。app.config 不是类型安全的，但在文件中编辑参数更容易。另一方面，设置文件就像一个封闭的盒子，你找不到它存储参数值的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:04:54.170

那是因为它们存储在

`<Profile Directory>\<Company Name>\<App Name>_<Evidence Type>_<Evidence Hash>\<Version>\user.config`文件。

例如：`C:\Users\<User>\AppData\Local\<Company>\<Product>\<Version>\user.config`文件。

从您的代码中，您可以使用：

```
var path = Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData); 
```

获取本地应用程序数据的存储位置。

**[更新]**

如您所述，它是一个 Windows 服务应用程序，请尝试搜索以下路径：

`c:\windows\system32\config\systemprofile\AppData\Local\`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:05:40.053

具有用户范围的设置实际上并未存储在您的 app.config 中，而是存储在名为`user.config`. 此文件的位置由`System.Windows.Forms.Application.LocalUserAppDataPath`属性确定。[有关架构的更多详细信息，请参见此处](http://msdn.microsoft.com/en-us/library/8eyb2ct1%28VS.80%29.aspx)。

您也可以根据需要更改此位置，有关更多详细信息，请参阅[此答案](https://stackoverflow.com/questions/621265/can-i-control-the-location-of-net-user-settings-to-avoid-losing-settings-on-app)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:07:49.267

> 到目前为止一切正常。MyDate 参数设置为我想要的。但是，我在 app.config 文件中看不到新值。

在这里，您对 App.config 文件有误解。app.config 文件是您的解决方案文件，它是您的编码/设计时间的一部分。当您在调试模式或发布模式下运行应用程序时，不应更改此设置。究竟发生了什么。这个有你的默认设置。为您的应用程序。

假设您在调试模式下运行您的应用程序，这将在 Bin/Debug 文件夹中生成输出，该文件夹应该包含 myapplication.exe.config。您需要查看此文件而不是 app.config。你所做的任何更改都会更改为 myapplication.exe.config。文件不在 app.config 中。**

# mysql - 在 shell 脚本中执行 MySQL 命令？

> ID：14216514
> 
> 赞同：0
> 
> 时间：2013-01-08T13:57:31.413
> 
> 标签：mysql, shell

我正在寻找一个可以从终端运行的部署脚本，它会自动从存储库中部署我的站点。我确定的步骤是：

*   通过 SSH 连接到远程服务器
*   从远程存储库获取最新版本的站点
*   运行任何 SQL 补丁
*   清理并退出

我已经将 SSH 连接和`git pull`命令放在我的 shell 文件中，但我坚持的是 MySQL，它本身就是一个（交互式？）shell。所以在我的文件中，我有：

```
#!/bin/bash

# connect to remote server via SSH
ssh $SSH_USER@$SSH_HOST

# update code via Git
git pull origin $GIT_BRANCH

# connect to the database
mysql --user $MYSQL_USER --password=$MYSQL_PASSWORD --database=$MYSQL_DBNAME

# run any database patches
# disconnect from the database
# TODO
exit 0 
```

如您所见，我正在连接到数据库，但不确定如何执行任何 MySQL 语句。

目前，我有一个目录，其中包含按数字顺序排列的 SQL 补丁。所以**1.sql**、**2.sql**等等。然后在我的数据库中，我有一个表，它只记录要运行的最后一个补丁。所以我需要做一个`SELECT`声明，阅读要运行的最后一个补丁，然后运行任何必要的补丁。

1.  如何在我的 shell 脚本中`SELECT`向提示符发出语句？`mysql`
2.  那么正常的流量是多少呢？关闭连接并重新打开它，将补丁文件作为输入传递？或者在一个连接中运行所有必需的补丁？
3.  我假设我将检查最后一个补丁文件，并`do`为中间的任何补丁做一个循环？

在这里的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:22:27.733

假设您想在远程端完成所有业务：

```
ssh $SSH_USER@$SSH_HOST << END_SSH
git pull origin $GIT_BRANCH
mysql --user $MYSQL_USER --password=$MYSQL_PASSWORD --database=$MYSQL_DBNAME << END_SQL
<sql statements go here>
END_SQL
END_SSH 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:01:09.323

您可以使用 Perl 或类似工具从 mysql 获取输出。这可以用来做你的控制流。

将您的 mysql 命令放入一个文件中，就像您输入它们一样。

然后运行为：`mysql -u <user> -p -h <host> < file.sqlcommands`.

您还可以使用“-e”在 mysql 命令行上进行查询。把你的'select max(patch) from .' 并阅读脚本中的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:12:34.877

```
cat *.sql | mysql --user $MYSQL_USER --password=$MYSQL_PASSWORD --database=$MYSQL_DBNAME 
```

# php - 审查可能包含标记的不适当单词的最佳方法是什么？

> ID：14216524
> 
> 赞同：2
> 
> 时间：2013-01-08T13:57:56.827
> 
> 标签：php, regex, filter, spam

我运行一个大型网站，其中包含数百万用户生成的包含 HTML 的帖子。其中一些帖子包含我的广告商不想在旁边做广告的敏感词。与其删除这些帖子，我宁愿删掉那些“坏”的词。我还需要保留标记，因为让用户标记他们的帖子是该网站的主要功能。

我目前正在使用搜索和替换`str_ireplace()`，但是我们的作者已经变得聪明并且正在做一些事情（如下），这些事情会通过我的原始过滤器。我可以剥离标签并*检测*不合适的单词，但我正在寻找一种替换单词的方法，同时保持标记不变。

例子：

成功审查：

```
input:  "<p>Mary is a bitch.</p>"
output: "<p>Mary is a *****.</p>" 
```

未成功审查：

```
input:          "<p>Mary is a <strong>b</strong>itch.</p>"
failed output:  "<p>Mary is a <strong>b</strong>itch.</p>" 
desired output: "<p>Mary is a <strong>*</strong>****.</p>" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:04:21.940

我的建议是使用其他方法来阻止这种情况，因为这非常困难。

来自[Jeff Atwood 的这篇有趣的文章，](http://www.codinghorror.com/blog/2008/10/obscenity-filters-bad-idea-or-incredibly-intercoursing-bad-idea.html)关于尝试这样做会产生什么“clbuttic”问题：

> 淫秽过滤是一个持久的，甚至是永恒的问题。我怀疑是否有可能仅通过代码来解决这个特定问题。但似乎一些公司和开发商无法停止向那台风车倾斜。这意味着您在搬到斯肯索普之前可能需要三思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:12:39.610

只是为了好玩，这是一种快速而肮脏的方式：

```
$badWords = array('bitch', 'jerk');
$input = '<p>Mary is a <strong>b</strong>itch. </p>';

$arr = explode(' ', $input);

foreach($arr as $key => $word)
{
    $word = str_replace('.', '', strip_tags($word));
    if(in_array($word, $badWords))
    {
        $arr[$key] = '*****';
    }
}

$output = implode(' ', $arr);
echo $output; 
```

输出

```
<p>Mary is a ***** </p> 
```

以上将文本拆分为单词，并应用于`strip_tags()`每个单词，因此不会影响整个内容。

正如评论所指出的那样，仍然有很多方法可以解决它。你永远不会得到一个完美的解决方案来处理他们扔给它的所有东西——你需要创造一些接近人工智能的东西。我认为最好的真正解决方案是`strip_tags()`在整个帖子中搜索坏词，然后如果发现任何问题，请将帖子标记为版主注意。或者只是简单地拥有一个带有活跃版主的报告发布系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:06:44.917

您可以从“坏词”列表开始并检查标记清理字符串（即，通过[strip_tags()](http://php.net/manual/en/function.strip-tags.php)对“坏词”进行过滤。然后您可以通过一系列可能的单字母更改来迭代每个坏词，例如`S=>5, 1=>L, 0=>O`等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T14:13:03.567

您将很难以自己的方式完成此任务，但我的建议是不要用星号更改单词，而只是拒绝发布并让用户知道原因。原因如下：

1.  **简化您的搜索。**如果您的算法只需要检查文本中是否存在某种形式的坏词，那么您可以`strip_tags`在文本中搜索您的词。如果您要尝试用星号替换它，则不能，`strip_tags`因为您需要将原始文本保留在其先前的条件中。
2.  **这是人们所期望的。**人们*没*想到的是他们的文本在没有通知的情况下被修改。你可能会更好地向人们发送一条消息，上面写着“这篇文章包含不恰当的文字/文字”

如果您坚持用星号替换而不是返回用户，则需要编写一个基本的逐字符解析器，该解析器忽略 HTML 标记并从中构造单词。

# c# - Automapper 用子对象覆盖列表中缺少的源属性

> ID：14216525
> 
> 赞同：3
> 
> 时间：2013-01-08T13:57:58.040
> 
> 标签：c#, automapper

我对 Automapper 有疑问。我设置了一个测试窗口表单应用程序，下面是代码。还要看每个 MessageBox 后面的注释：

```
public class FirstClass
    {
        public string FirstProp { get; set; }
        public IList<FirstClassChild> Children { get; set; }
    }

    public class FirstClassChild
    {
        public string FirstChildProp { get; set; }
    }

    public class SecondClass
    {
        public string FirstProp { get; set; }
        public string SecondProp { get; set; }
        public IList<SecondClassChild> Children { get; set; }
    }

    public class SecondClassChild
    {
        public string FirstChildProp { get; set; }
        public string SecondChildProp { get; set; }
    }

    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            AutoMapper.Mapper.CreateMap<FirstClass, SecondClass>();
            AutoMapper.Mapper.CreateMap<FirstClassChild, SecondClassChild>();

            var f = new FirstClass { FirstProp = "FirstClass" };
            f.Children = new List<FirstClassChild> { new FirstClassChild { FirstChildProp = "FirstClass" } };
            var s = new SecondClass { FirstProp = "SecondClass", SecondProp = "SecondClass" };
            s.Children = new List<SecondClassChild> { new SecondClassChild { FirstChildProp = "SecondClass", SecondChildProp = "SecondClass" } };
            AutoMapper.Mapper.Map(f, s);

            var fc = new FirstClassChild { FirstChildProp = "FirstClass" };
            var sc = new SecondClassChild { FirstChildProp = "SecondClass", SecondChildProp = "SecondClass" };
            AutoMapper.Mapper.Map(fc, sc);

            MessageBox.Show(sc.FirstChildProp);//FirstClass as expected
            MessageBox.Show(sc.SecondChildProp);//SecondClass as expected

            MessageBox.Show(s.FirstProp);//FirstClass as expected
            MessageBox.Show(s.SecondProp);//SecondClass as expected
            MessageBox.Show(s.Children.First().FirstChildProp);//FirstClass as expected
            MessageBox.Show(s.Children.First().SecondChildProp);//Empty not expected!!

        }
    } 
```

我能做些什么来避免这种情况？这种行为是预期的吗？无论如何，任何人都可以指导我如何使 SecondClass childs SecondChildProp 在映射发生之前保持“SecondClass”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T11:39:29.903

我在这里问了一个类似的问题，并在[这里](https://stackoverflow.com/questions/14229798/)找到了另一个类似的[问题](https://stackoverflow.com/questions/9724901/)。

我认为@PatrickSteele 提出了一个很好的观点：AutoMapper 应该如何将源列表映射到**现有对象**的目标列表，而目标列表可能不一定与源列表有任何相似之处？即“[但是如果一个列表有 3 个而另一个列表有 5 个呢？](https://stackoverflow.com/questions/9724901/) ”

**如果**您确定`FirstClass`并且`SecondClass`具有相同数量的，`Children`并且**如果**`FirstClass`'s Nth Child 始终对应于`SecondClass`'s Nth child，则可以尝试以下操作：

```
Mapper.CreateMap<FirstClass, SecondClass>()
    .ForMember(m => m.Children, o => o.Ignore())
    .AfterMap((src, dest) =>
        {
            for (var i = 0; i < dest.Children.Count; i++)
                Mapper.Map(src.Children[i], dest.Children[i]);
        }); 
```

或者如果`FirstChildProp`是某种唯一键：

```
Mapper.CreateMap<FirstClass, SecondClass>()
    .ForMember(m => m.Children, o => o.Ignore())
    .AfterMap((src, dest) =>
        {
            foreach (var dChild in dest.Children)
            {
                var sChild = src.Children.Single(c => c.FirstChildProp == dChild.FirstChildProp);
                Mapper.Map(sChild, dChild);
            }
        }); 
```

# google-analytics - Google Analytics - 实时数据的自定义警报

> ID：14216532
> 
> 赞同：12
> 
> 时间：2013-01-08T13:58:11.243
> 
> 标签：google-analytics

我希望创建一个自定义警报，以便在有 X 人同时在网站上时通知我。此数据已通过实时报告页面提供。但是，这似乎无法通过情报事件部分实现。从那里，我只能根据日、周或月数据创建自定义警报。有没有人发现谷歌分析的另一个领域可以使这种类型的报告成为可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-01T21:31:04.243

谷歌分析刚刚推出了他们的实时 API 的测试版，它可能让你这样做：[http ://techcrunch.com/2013/08/01/google-launches-real-time-api-for-analytics-in-invite -仅测试版/](http://techcrunch.com/2013/08/01/google-launches-real-time-api-for-analytics-in-invite-only-beta/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-18T19:51:29.183

您可以为此使用实时 API。现在已经有好几年了。[您可以在此处](https://developers.google.com/analytics/devguides/reporting/realtime/v3/)找到所有相关文档。这是典型的 OAuth + JSON API。

您也可以使用付费服务。我建立了一个，[Metrics Watch](https://metricswatch.com/real-time-alerts-for-google-analytics/)。这实际上取决于您的目标以及这对您的业务/工作的重要性。如果它很重要，我强烈建议您寻找付费服务，无论是哪一项。

希望有帮助！

# collections - 将 XQuery 与多个集合函数一起使用

> ID：14216535
> 
> 赞同：0
> 
> 时间：2013-01-08T13:58:13.333
> 
> 标签：collections, xquery

我正在使用以下 XQuery 来查询文件集合：

```
for $files in collection("/data?select=*data*.xml") 
```

目录中的每个文件都有一个特定的名称，这使我能够识别它。我使用它作为标识符，我检索如下：

```
let $file-id := tokenize(base-uri($files), "/")[last()] 
```

*$file-id*变量遵循特定模式：abc-1234 。前八个字符是相关的，所以我使用下面的变量来获取它们：

```
let $file-link-id := substring($file-id, 1, 8) 
```

现在，我有另一个要查询的文件集合。这些文件的名称遵循相同的模式，因为它们包含相关信息。

如何使用*$file-link-id*在第二个集合中选择正确的文件？

我假设我必须将它包含在第二个集合子句中，类似于`?select=$file-link-id.xml`，但我不确定如何执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:38:35.567

如果我在这里假设错误，也许您可​​以澄清您的问题陈述，因为您的问题似乎很容易解决（所以也许我误解了您的问题）。

所以你有你的正确`$file-link-id`并想将它用作字符串。如果您的 xquery 处理器支持 XQuery 3.0，您可以使用两个管道，即

```
for $files in collection("/data?select=" || $file-link-id || ".xml") 
```

如果没有，请使用`string-join()`：

```
for $files in collection(string-join(("/data?select=", $file-link-id, ".xml"), '')) 
```

# php - 将excel文件保存到特定文件夹，例如我的文档PHPExcel

> ID：14216536
> 
> 赞同：0
> 
> 时间：2013-01-08T13:58:24.240
> 
> 标签：php, mysql, phpexcel

下面是我的代码：

```
<?php 
include('../connectdb.php');

$sql = "SELECT
pro.ScholarId, pro.Lastname, pro.Middlename, pro.Firstname, barangays.BarangayName,    levels.LevelName, payroll.Allowance, sca.isClaimed
FROM scholar_profile as pro 
JOIN scholar_school as school ON pro.SchoolId = school.SchoolId
JOIN levels ON pro.LevelId = levels.LevelId
JOIN barangays ON pro.BarangayId = barangays.BarangayId
JOIN payroll ON payroll.PayrollId = levels.PayrollId
JOIN scholar_points as sp ON pro.ScholarPointId = sp.ScholarPointId
JOIN scholar_claim_allowance as sca ON pro.ScholarId = sca.ScholarId 
ORDER BY pro.LevelId, pro.ScholarId";

$result = mysql_query($sql);

/** Error reporting */
error_reporting(E_ALL);

/** PHPExcel */
require_once 'PHPExcel.php';

// Create new PHPExcel object
#echo date('H:i:s') . " Create new PHPExcel object\n";
$objPHPExcel = new PHPExcel();
$excel = new PHPExcel();

$objPHPExcel->getProperties()->setTitle("Payroll");

if(!$result){
die("Error");
}
$col = 0; 
$row = 2; 
while($mrow = mysql_fetch_assoc($result)) { 
$col = 0; 
foreach($mrow as $key=>$value) { 
    $objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col, $row, $value); 
    $col++; 
} 
$row++;  
} 

// Set active sheet index to the first sheet, so Excel opens this as the first sheet
$objPHPExcel->setActiveSheetIndex(0)
        ->setCellValue('A1', 'Scholar Id')
        ->setCellValue('B1', 'Lastname')
        ->setCellValue('C1', 'Middlename')
        ->setCellValue('D1', 'Firstname')
        ->setCellValue('E1', 'Barangay')
        ->setCellValue('F1', 'Level')
        ->setCellValue('G1', 'Allowance')
        ->setCellValue('H1', 'Has claimed?');
        $objPHPExcel->getActiveSheet()->getStyle('A1:H1')->getFont()->setBold(true);
        $objPHPExcel->getActiveSheet()->getColumnDimension('A')->setWidth(12);
        $objPHPExcel->getActiveSheet()->getColumnDimension('B')->setWidth(18);
        $objPHPExcel->getActiveSheet()->getColumnDimension('C')->setWidth(18);
        $objPHPExcel->getActiveSheet()->getColumnDimension('D')->setWidth(18);
        $objPHPExcel->getActiveSheet()->getColumnDimension('E')->setWidth(18);
        $objPHPExcel->getActiveSheet()->getColumnDimension('F')->setWidth(12);
$objPHPExcel->getActiveSheet()->getColumnDimension('G')->setWidth(12);
$objPHPExcel->getActiveSheet()->getColumnDimension('H')->setWidth(14);
$objPHPExcel->getActiveSheet()->getStyle('A1:H1')->getAlignment()->setHorizontal(PHPExcel_Style_Alignment::HORIZONTAL_CENTER);
$objPHPExcel->getActiveSheet()->setShowGridlines(true);

$objPHPExcel->getActiveSheet()->getStyle('A1:H1')->applyFromArray(
array(
    'fill' => array(
        'type' => PHPExcel_Style_Fill::FILL_SOLID,
        'color' => array('rgb' => 'FFFF00')
    )
)
);

// Save Excel 2007 file
#echo date('H:i:s') . " Write to Excel2007 format\n";
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
header('Content-Type: application/vnd.ms-excel');
header('Content-Disposition: attachment;filename="payroll.xlsx"');
$objWriter->save('payroll.xlsx');

?> 
```

**更新了我的问题：** - 我必须将其保存在我的文档文件夹中，以便用户轻松找到它。如何将其保存到特定文件夹？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-08T14:19:04.067

您最好的选择可能是将其导出为 CSV 文件，而不是尝试将其导出为二进制 XLS 格式。Excel 可以很好地读取 CSV 文件，而编写它们可能要简单三个数量级。

如果您想改为编写 CSV 文件，请查看[fputcsv](http://us1.php.net/manual/en/function.fputcsv.php)作为用于生成 CSV 行的内置 PHP 函数。

同样重要的是要注意旧的 mysql_* 函数已被弃用，您应该考虑至少使用 mysqli 但现在最好使用 PDO。

如果您**必须**将这些导出为真正的 XLS 文件，可以使用 PHP 库来执行此操作，这将使您的工作更简单，但它们使用起来并不简单，并且通常有很多错误和陷阱，需要时间来解决。

编辑：有关执行此操作的库示例，请参见注释。

# mysql - 选择一些不存在于另一个 SELECT 资源中的记录

> ID：14216537
> 
> 赞同：0
> 
> 时间：2013-01-08T13:58:33.587
> 
> 标签：mysql, select

我有两张表，一张是对用户提出的问题，另一张是对所有用户提出的所有问题，我想选择具有更高 id 的问题（所以它是新的）不是发送给给定的用户......我的意思是：

第一个表有 3 个字段 :
`id`, `questionid`,`userid`它的名字是`userQuestions`

otehr 表被调用`questions`并有 2 个字段：

```
`qid` and `qText` 
```

当然`qid`=`quesionid`

对于给定的`userid`我如何选择所有未提出的问题`userid`？

假设我有：

```
`qid` = 1 , `qtext` = 'qtext1'
`qid` = 2 , `qtext` = 'qtext2'
`qid` = 3 , `qtext` = 'qtext3' 
```

在另一张桌子上：

`id`= 1, `questionid`= 1, `userid`= 90

所以这个假设的 SELECT 应该返回 `qid`= 2 `qid`= 3

我希望我已经在解释清楚...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:01:19.650

```
SELECT * FROM questions WHERE qid NOT IN(SELECT questionid FROM userQuestions WHERE userid = 90); 
```

琐碎而简单

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T14:02:37.900

试试这个：

```
SELECT Q.qid
FROM questions Q
 LEFT JOIN userQuestions U
   ON Q.qid = U.questionid
 WHERE Q.userid = <user ID>
     AND U.id IS NULL 
```

# android - 从 Android 应用程序使用 Web 服务

> ID：14216540
> 
> 赞同：0
> 
> 时间：2013-01-08T13:58:48.543
> 
> 标签：android, asp.net-web-api

我是 Android 应用程序开发的初学者。我想确认我的方法是否正确以及是否符合 Android 世界的最佳实践。

我有一个需要文本数据（无图形、视频）的 android 应用程序。数据来自基于 REST 的 Web 服务作为 JSON 字符串。我使用 HttpGet 对象使用此 Web 服务，使用 JSONArray 解析 json 字符串并显示数据。

所有这一切都发生在一个按钮点击中。

**我的问题是：**

1.  有没有更好的（或安卓风格的）方法来做同样的事情？
2.  检索图形内容并将其发布到基于 REST 的 Web 服务的首选方法是什么？

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:26:48.033

请找到我的内联commnets，所有这一切都发生在一个按钮点击中。

我的问题是：

**有没有更好的（或安卓风格的）方法来做同样的事情？**

在异步任务或服务中触发 Web 服务调用的理想方法，因此在 HTTP 触发并获得响应之前，您的 UI 线程不会被阻塞。

**检索图形内容并将其发布到基于 REST 的 Web 服务的首选方法是什么？**

当您尝试从后端检索图形内容时，它通常是 base64。参考这个例子：[http ://androidtrainningcenter.blogspot.in/2012/03/how-to-convert-string-to-bitmap-and.html](http://androidtrainningcenter.blogspot.in/2012/03/how-to-convert-string-to-bitmap-and.html)

对于将图形发布到服务器，我假设您知道要上传的图像的路径和文件名。使用 image 作为键名将此字符串添加到您的 NameValuePair。

可以使用 HttpComponents 库来发送图像。下载最新的 HttpClient（当前为 4.0.1）二进制文件和依赖包并将 apache-mime4j-0.6.jar 和 httpmime-4.0.1.jar 复制到您的项目中，并将它们添加到您的 Java 构建路径中。

您需要将以下导入添加到您的类中。

导入 org.apache.http.entity.mime.HttpMultipartMode；导入 org.apache.http.entity.mime.MultipartEntity；导入 org.apache.http.entity.mime.content.FileBody；导入 org.apache.http.entity.mime.content.StringBody；现在您可以创建一个 MultipartEntity 来将图像附加到您的 POST 请求中。以下代码显示了如何执行此操作的示例：

public void post(String url, List nameValuePairs) { HttpClient httpClient = new DefaultHttpClient(); HttpContext localContext = new BasicHttpContext(); HttpPost httpPost = 新的 HttpPost(url);

```
try {
    MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

    for(int index=0; index < nameValuePairs.size(); index++) {
        if(nameValuePairs.get(index).getName().equalsIgnoreCase("image")) {
            // If the key equals to "image", we use FileBody to transfer the data
            entity.addPart(nameValuePairs.get(index).getName(), new FileBody(new File (nameValuePairs.get(index).getValue())));
        } else {
            // Normal string data
            entity.addPart(nameValuePairs.get(index).getName(), new StringBody(nameValuePairs.get(index).getValue()));
        }
    }

    httpPost.setEntity(entity);

    HttpResponse response = httpClient.execute(httpPost, localContext);
} catch (IOException e) {
    e.printStackTrace();
} 
```

}

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:05:42.177

嘿，请参考此[链接](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)，它将根据您在 Android 应用程序中的要求，更好地训练您解析 json 数据。加载图形需要一些延迟加载机制，您可以从[这里](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview)参考它。

# wpf - WeakEventManager & DependencyPropertyChangedEventArgs

> ID：14216543
> 
> 赞同：5
> 
> 时间：2013-01-08T13:58:52.773
> 
> 标签：wpf, .net-4.5, weakeventmanager

我想知道将 WeakEventManager（4.5 很好）与提供 DependencyPropertyChangedEventArgs 的事件一起使用的最佳方法是什么。这些不是从 EventArgs 派生的（出于性能原因），因此 WeakEventManager 不能开箱即用。

任何指南、链接或提示将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-01T21:27:44.033

使用.NET 中内置的[PropertyChangedEventManager 。](http://msdn.microsoft.com/en-us/library/system.componentmodel.propertychangedeventmanager%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-03T02:32:21.477

我不确定使用“PropertyChangedEventManager”如何解决有关“WeakEventManager”和绑定使用“DependencyPropertyChangedEventArgs”的弱事件处理程序的问题。

“PropertyChangedEventManager”适用于“PropertyChangedEventArgs”的实例，该实例派生自“EventArgs”，而“DependencyPropertyChangedEventArgs”则没有。这就是为什么标准方法不起作用的原因。

在这种情况下，您始终可以使用手动方法（“WeakEventHandler”在“MyType”类的范围内声明）：

```
private class WeakEventHandler
{
    private readonly System.WeakReference<MyType> m_WeakMyTypeRef;

    public WeakEventHandler(MyType myType) => m_WeakMyTypeRef = new System.WeakReference<MyType>(myType);

    public void OnClientIsKeyboardFocusWithinChanged(object sender, DependencyPropertyChangedEventArgs args)
    {
        if (m_WeakMyTypeRef.TryGetTarget(out var myType))
            myType.OnClientIsKeyboardFocusWithinChanged(sender, args);
    } 
} 
```

以及要绑定的代码（来自“MyType”方法）：

```
var weakEventHandler = new WeakEventHandler(this);
frameworkElement.IsKeyboardFocusWithinChanged += weakEventHandler.OnClientIsKeyboardFocusWithinChanged; 
```

缺点是您必须声明一个新的（私有）类，尽管同一个类可以处理多个事件。

# asp.net-mvc - 停止实体框架在模型中创建一些属性

> ID：14216544
> 
> 赞同：0
> 
> 时间：2013-01-08T13:58:58.523
> 
> 标签：asp.net-mvc, entity-framework

我正在尝试在 MVC4 中使用模型优先实体框架。想禁用实体模型中某些属性的创建，这些属性只假设用作视图模型。我将动态填充控制器中的模型属性。

我可以知道我应该为这些属性添加什么注释属性吗？

如果无法做到这一点，那么我必须创建一个单独的 ViewModel 来执行此操作。但是，视图模型仍然会有与实体模型链接的其他属性，将它们映射在一起的最佳方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T06:38:28.137

您可能想尝试 [NotMapped] 属性来告诉 EF 不要保存属性。就像是：

```
public class MyEntity {
     public int Id {get; set;} // will be stored as a column in the DB
     [NotMapped]
     public int MyProperty {get; set;} // will not be stored as a column in the DB
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:23:00.920

实体框架设计器创建持久实体的模型。通过此设计器添加的所有属性都将保留。设计者为每个建模实体创建部分类。如果您想为您的视图提供额外的非持久属性，您可以为只有非持久属性的实体创建自己的类的部分部分（持久属性已经是自动生成部分的一部分），或者您可以创建专门的具有您需要的所有属性的视图模型。

# php - 如何抑制 imagejpeg 创建的 JPEG 注释？

> ID：14216547
> 
> 赞同：7
> 
> 时间：2013-01-08T13:59:05.890
> 
> 标签：php, image, comments, jpeg

在一个 php 应用程序中，我接管了使用“imagejpeg”函数创建的 JPG 文件。在每个文件中，都有类似*“CREATOR: gd-jpeg v1.0 (using IJG JPEG v80), quality = 90”*的注释。现在，我们公司的安全准则要求阻止包含评论的图像。所以我试图在没有评论的情况下生成 JPG。

我在网上搜索，但找不到阻止 gd 添加此评论的方法。是否有可能或者我必须使用另一个库等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:05:53.347

IMO 不可能阻止它，只能使用 Imagick 删除：

```
$img = new Imagick('input.jpg');
$img->stripImage();
$img->writeImage('output-imagick.jpg');
$img->destroy(); 
```

# linux - gnutls 配置错误：检查 libgcrypt... 否

> ID：14216556
> 
> 赞同：0
> 
> 时间：2013-01-08T13:59:37.830
> 
> 标签：linux, compilation, libgcrypt, vmime, gnutls

我配置并编译了 libgpg-error 和 libgcrypt 但无法安装（make install），因为我没有 root 权限。
当我尝试配置 libgnutls 时，出现此错误。

```
tactuser@eqhttd01:gnutls-2.10.0 >./configure --with-libgcrypt-prefix=/home/tactuser/Mail/vmime/TLS/libgcrypt-1.5.0/src/
    checking for libgcrypt... no 
    configure: error: 
    libgcrypt was not found. You may want to get it from ftp://ftp.gnupg.org/gcrypt/libgcrypt/ 
```

在**config.log**中，我发现这些错误：

```
configure:7781: checking for libgcrypt

configure:7803: gcc -std=gnu99 -o conftest -g -O2   conftest.c  -lgcrypt -lgpg-error >&5

conftest.c:27:20: error: gcrypt.h: No such file or directory

conftest.c: In function 'main':
conftest.c:31: error: variable 'i' has initializer but incomplete type

conftest.c:31: error: 'GCRY_CIPHER_CAMELLIA128' undeclared (first use in this function)

conftest.c:31: error: (Each undeclared identifier is reported only once

conftest.c:31: error: for each function it appears in.)

conftest.c:31: error: storage size of 'i' isn't known

configure:7803: $? = 1 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:59:18.273

尝试编译并安装 libgcrypt，如果不起作用，请尝试使用与 gnutls 2.10.0（同时发布）兼容的 libgcrypt 版本。

# security - 哈希以创建唯一 URL，因此很难猜测有效 URL 来代替身份验证

> ID：14216558
> 
> 赞同：7
> 
> 时间：2013-01-08T13:59:48.020
> 
> 标签：security, url, hash

我正在考虑编写一个网页，为客户提供反馈表。
我希望客户能够使用任何特定订单的唯一 URL 访问此表单；一个简单的示例将采用[http://www.example.com/feedback/012345](http://www.example.com/feedback/012345)的格式。

*旁注：我已经熟悉 URL 重写。以给定语言或在给定服务器上创建/重定向 URL 不在此问题的范围内*

**客户必须进行身份验证**（或就此而言，甚至拥有一个帐户）才能访问反馈表是不可接受的。但是，出于对统计正确性的考虑，我对上面 example.com/feedback/[order_id] 的明显解决方案并不满意。这允许任何人更改 URL 中的 ID 并访问另一个订单的反馈。

另一方面，理想情况下，我希望这些 URL 能够从收据等打印输出中输入，因此**在许多“重置密码”链接上提供长哈希不是一个有效的选项**。

**基于此，我有以下标准：**

1.  每个订单都应该有一个唯一的 URL
2.  这个 URL 应该是相对人类可输入的，现在把它理解为“短”
3.  应该不可能更改 URL 中的字符并访问其他订单（在合理的概率范围内）

我的思路是应该在 URL 中放两条数据。客户记录上有很多人类可读的数据可以帮助解决这个问题，例如客户 ID、订单的联系电话号码、姓氏……虽然这消除了更改一两位数字的能力，但我看不到它显着提高给定 URL 对无聊的攻击者的“可猜测性”。

以 /feedback/[surname]/[id] 为例，您可以通过简单的字典攻击页面来接收一组有效的 URL：

```
for x in range(00000,99999):
    for name in ["jones","smith", ....]:
        url = "http://www.example.com/feedback/"+name+"/"+x
        if exists(url):
            print(url) 
```

考虑到 tinyurl 之类的服务，我考虑的下一件事是对 ID 号进行哈希处理并以 /feedback/[hash]/[id] 的形式提供 URL
*我已经做了一些研究并了解到 URL 缩短服务实际上可能使用自动增量 ID 记录而不是实际的数学哈希。这个方法可能没用*

如果使用实际的散列函数，**重要的是散列显然不是从 ID 号派生的**。提供像 /feedback/trpxq/53192 这样的 URL 是没有用的，因为在看到其中的一个或两个之后，您可以轻松地提取之前的记录：/feedback/trpxp/53191

我当时在想，如果哈希包含盐可能会有所帮助，这样即使知道使用了什么哈希函数，也不可能对任何旧的有效订单 ID 进行哈希处理并显示有效的 URL。

所以，最后，这是实际的问题：

**什么函数最适合用于创建基于 7-10 位整数 ID 和任意盐的哈希的简短、非显而易见、相对唯一的字母数字表示？**

这本身不是 URL 缩短问题，所以如果哈希部分与 ID 部分的长度相同，我会很满意：减少到 10 个字母数字字符是可以接受的。

此外，不一定每次访问 URL 时都需要计算哈希值。可以在创建订单记录时计算它，或者在第一次访问该订单 ID 的页面时计算它。这意味着哈希函数不一定要很快。

尽管有可能为查找目的创建一个哈希表，但这个问题没有与哈希表相同的限制：查找是基于一个已经唯一的值完成的，因此只要足够，冲突解决不是绝对必要的对于给定的散列，很难找到具有相同散列的另一条记录。

我们现在已经完全脱离了确保反馈表需要做些什么的实际领域——这些数据实际上并没有那么重要——但请幽默，这是一个有趣的问题，我想知道是否有一个很好的解决方案可以最大限度地提高安全性和可读性。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T14:58:09.353

# pagination - Wordpress 分页在首页上不起作用

> ID：14216560
> 
> 赞同：0
> 
> 时间：2013-01-08T13:59:50.817
> 
> 标签：pagination, wordpress-theming, wordpress

这就是我正在做的事情。首先，我将一个名为“home”的页面设置为桌面版的首页。我正在使用[http://wordpress.org/extend/plugins/device-theme-switcher/](http://wordpress.org/extend/plugins/device-theme-switcher/)在移动设备上覆盖默认主题（没有任何 front-page.php 文件）。

对于移动版本，我创建了一个子主题并使用 front-page.php 覆盖默认的桌面首页。

这是使用以下代码的移动版本[http://themes.jdsans.net/momento/](http://themes.jdsans.net/momento/)

```
<?php
    get_header(); 
?>

        <div id="main_container" class="container">

            <div class="row inner_wrap">

                  <div class="main-content clearfix">         

                    <div class="post-content alignleft">
                        <h4 class="column-title">
                            <span><?php _e('Recent Articles','momento_th'); ?></span>
                        </h4>

                        <ul class="clearfix single_cat_thumb">

                        <?php 
                query_posts("posts_per_page=4&paged=".$paged);
            ?>
                        <?php if (have_posts()) : while (have_posts()) : the_post();  ?>                                                     
                            <li class="clearfix item ">

                           </li>

                           <?php endwhile; ?>                              

                        </ul>                           

                        <?php endif;  wp_reset_query(); ?>                           

                        <div class="clear"></div>                           

                    </div>  <!--post-content-->   

        </div><!-- .main-content -->  

            </div><!-- .row-->               

        </div> <!--#main_container--> 
```

到目前为止，我已经尝试了几乎所有找到的修复程序，但没有一个有效。其中也包括[wordpress 分页修复](http://codex.wordpress.org/Pagination#Adding_the_.22paged.22_parameter_to_a_query)。但我没有得到分页工作。

我也阅读了许多堆栈的问题，但到目前为止还没有解决方案。

此外，当我尝试将参数 paged 添加到查询参数时，get_query_var('paged') 似乎没有返回任何内容

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:52:01.463

好吧我自己解决了。如果其他人正在寻找相同的解决方案。然后在我上面的代码中我添加的查询之前的问题中

```
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1; 
```

在子主题的 function.php 中，我添加了动作挂钩 pre_get_posts 并挂钩了如下所示的函数

```
function modify_query($query) {
    if($query->is_main_query()) {
        $paged = (get_query_var('page')) ? get_query_var('page') : 1;
        $query->set('paged',$paged);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:13:29.007

试试这个

```
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1; 
```

前

```
query_posts("posts_per_page=4&paged=".$paged); 
```

# multithreading - 使用 QThread 在 Qt 中进行线程序列化

> ID：14216562
> 
> 赞同：0
> 
> 时间：2013-01-08T13:59:51.910
> 
> 标签：multithreading, qt, qthread

我想实现一个条件，如![如下图](../Images/ec33bdfdc04eec4f1fddd2335ee367cf.png).

我想让线程 1 等到线程 2 完成某些工作，并且在线程 2 完成工作后，线程 1 应该被唤醒。我会使用 QThread 的 QWaitcondition 还是简单的 sleep() 方法？如果 QWaitcondition 那么我应该如何构建我的等待条件......欢迎任何建议......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:45:39.337

最简单的方法是让你的 Thread1 Job1 函数从一个信号中调用，并让这个函数发出一个信号来启动 Job2。当 Job2 完成时，它会发出一个信号，然后再次启动 Job1。您的图表本质上就是您想要做的，但只需将接收到的信号更改为连接到工作的信号。

除非您需要在 job2 完成后立即启动 Job1 的极端时间要求，否则您不会想要执行任何类型的条件“等待”。这要么会吸收核心，要么效率非常低。

# ubuntu - Vagrant 创建框 Ubuntu Server 12.04

> ID：14216563
> 
> 赞同：2
> 
> 时间：2013-01-08T13:59:52.937
> 
> 标签：ubuntu, vagrant

我对 Vagrant (vagrantup.com) 有一些问题。我想用我的设置创建盒子（用于启动 Vagrant）Ubuntu Server 12.04。我已经设置了 Ubuntu（在 Oracle VM VirtualBox 中）。但我不知道如何将 *vdi 文件编译为 *box 文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T00:01:07.207

你可以按照 Vagrant 文档[Creating Base Boxes](http://docs.vagrantup.com/v1/docs/base_boxes.html#creating_base_boxes)中的说明进行操作，或者使用[VeeWee](https://github.com/jedi4ever/veewee)为你做一些事情。

[VeeWee](https://github.com/jedi4ever/veewee)是轻松构建 vagrant base box 或 kvm、virtualbox 和融合图像的工具。

或者您想要创建的盒子可能已经在[Vagrantbox.es](http://www.vagrantbox.es/)上？

# angularjs - 如何在角度路线中使用通配符

> ID：14216565
> 
> 赞同：15
> 
> 时间：2013-01-08T13:59:59.367
> 
> 标签：angularjs

> **可能重复：**
> [AngularJS - 路由 - 如何将星号（*）匹配为路径](https://stackoverflow.com/questions/12685085/angularjs-route-how-to-match-star-as-a-path)

如何在我的路线中指定通配符 -

```
$routeProvider
      .when('/admin/*', {
        templateUrl: 'admin.html',
        controller: 'AdminCtrl'
      }) 
```

所以上面的内容应该适用于 /admin/users 和 /admin/users/1 或 /admin/org/3。所以在管理员之后可能有一个或两个级别的路径。我该怎么做 ？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-08T16:17:35.730

目前 AngularJS 不支持路由中的正则表达式。

您可以按以下方法解决

```
 app.config(['$routeProvider', function($routeProvider) {
        $routeProvider
                 .when('/admin', {templateUrl: 'admin.html', controller: 'AdminCtrl'})
                 .when('/admin/:type', {templateUrl: 'admin.html', controller: 'AdminCtrl'})
                 .when('/admin/:type/:id', {templateUrl: 'admin.html', controller: 'AdminCtrl'});  
 }]); 
```

[http://plnkr.co/edit/tBumW2oEqki2sEl1hjSc?p=preview](http://plnkr.co/edit/tBumW2oEqki2sEl1hjSc?p=preview)

IMO，最好为管理员和用户设置单独的控制器，除非您有特殊要求。

# c# - c# ToString() - 打印子项

> ID：14216570
> 
> 赞同：1
> 
> 时间：2013-01-08T14:00:41.987
> 
> 标签：c#, collections, parent-child, tostring

我有一个类（例如`Foo`）覆盖 ToString 方法来打印它的内部状态。这个类有一个集合`Foo`——它是子元素。孩子也可以生孩子等等。

我正在寻找在 ToString() 中实现的解决方案，它会自动缩进子元素，例如：

```
Parent Foo
 Child1 Foo
  Child1.1 Foo
 Child2 Foo
  Child2.1 Foo
  Child2.2 Foo 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T14:10:57.220

解决方案是`ToString()`仅用作在子树的根上调用以输出的“入口点”。该`ToString()`方法可以调用`ToIndentedString(int)`将当前缩进级别作为参数的私有方法。然后，该方法将返回指定缩进处当前节点的字符串表示，以及缩进 + 1 处所有子节点的字符串表示等。

```
public string ToString()
{
    return ToIndentedString(0);
}

private string ToIndentedString(int indentation)
{
    StringBuilder result = new StringBuilder();
    result.Append(' ', indentation);
    result.Append(Environment.NewLine);
    foreach (Foo child in children) {
        result.Append(child.ToIndentedString(indentation + 1));
    }
    return result.ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:52:36.763

你也可以这样`IFormattable`使用`Foo`：

```
public class Foo : IFormattable
{
    public string Text { get; set; }
    public IList<Foo> InnerList { get; set; } 

    public string ToString(string format, IFormatProvider formatProvider)
    {
        if (String.IsNullOrEmpty(format)) format = "0";
        if (formatProvider == null) formatProvider = CultureInfo.CurrentCulture;

        int indent = 0;
        Int32.TryParse(format, out indent);
        string indentString = "";
        while(indent > indentString.Length)
        {
            indentString += " ";
        }
        var toString = String.Format("{0}{1}", indentString, Text);
        foreach (Foo foo in InnerList ?? new List<Foo>())
        {
            toString += String.Format("\n{0}", foo.ToString((indent + 1).ToString(), formatProvider));
        }
        return toString;
    }

    public override string ToString()
    {
        return ToString("0", CultureInfo.CurrentCulture);
    }
} 
```

在这种情况下，您还可以执行以下操作：

```
String.Format("{0:5}", foo); // Start with 5 indents 
```

或者

```
foo.ToString("7", CultureInfo.CurrentCulture); // Also start with indents (7 in this case) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:07:03.597

```
string spacing = "  ";
string newLineSpacing = string.Format("{0}{1}", Environment.NewLine, spacing);
StringBuilder sb = new StringBuilder("mydata");
foreach (Foo child in children)
{
    sb.Append(Environment.NewLine);
    sb.Append(spacing);
    sb.Append(child.ToString().Replace(Environment.NewLine, newLineSpacing));
} 
```

未经测试，因为我目前正在重建我的开发机器。

# jquery - 将 jquery 选择器嵌套在字符串中似乎存在有效问题

> ID：14216574
> 
> 赞同：0
> 
> 时间：2013-01-08T14:00:52.487
> 
> 标签：jquery

我必须在字符串中有一个脚本，这似乎不太正确。

```
$("input,textarea").
   find("[feId=1234]").
      val("SET_VALUE").
         css("background-color","yellow"); 
```

是我首先要做的，所以这需要是正确的。正在获取所有基本元素，然后找到属性为“feId”且值为“1234”的元素。

在那之后，我试图把它换掉，但逃避下面的东西。

```
"$(\"input,textarea\").
   find(\"[feId=1234]\").
     val(\"SET_VALUE\").
        css(\"background-color\",\"yellow\");" 
```

但它似乎不起作用。我认为我的属性选择器可能有一点点错误？

难道我做错了什么？

# jpa - JPA 的瞬态关键字未按预期工作

> ID：14216576
> 
> 赞同：3
> 
> 时间：2013-01-08T14:00:58.750
> 
> 标签：jpa, transient

我读过@transient 和transient 关键字之间的讨论：[为什么JPA 有@Transient 注释？](https://stackoverflow.com/questions/2154622/why-does-jpa-have-a-transient-annotation)

但是，当我使用 java 关键字而不是 @Transient 表示法使某些字段瞬态时，这些字段不会在创建表时在我的表中创建。为什么是这样？

这是我的 persistence.xml ：

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">
    <persistence-unit name="someDB" transaction-type="RESOURCE_LOCAL">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <class>somewhere.classnameA</class>
        <class>somewhere.classnameB</class>
        <properties>
            <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver" />
            <property name="javax.persistence.jdbc.url"
                value="jdbc:mysql://localhost:3306/project" />
            <property name="javax.persistence.jdbc.user" value="root" />
            <property name="javax.persistence.jdbc.password" value="" />

            <!-- EclipseLink should create the database schema automatically -->
            <property name="eclipselink.ddl-generation" value="create-or-extend-tables" />
            <property name="eclipselink.ddl-generation.output-mode"
                value="both" />
        </properties> 
```

这是一个示例实体：

```
import java.sql.Timestamp;

import com.google.gwt.user.client.rpc.IsSerializable;

@Entity
public class Session implements IsSerializable{

    @Id
    @Basic(optional = false)
    @Column(length = 36)
    private String sessionID;

    @Version
    @Basic(optional = false)
    transient private Timestamp lastModification;

    @Basic(optional = false)
    transient private Timestamp expireTime;

    @OneToOne(optional = false)
    private User user;

    protected Session(){

    }

    // constructor server side
    public Session(String sessionID, User user, Timestamp expireTime){
        this.sessionID = sessionID;
        this.user = user;
        this.expireTime = expireTime;
    }

    public String getSessionID() {
        return sessionID;
    }

    public void setSessionID(String sessionID) {
        this.sessionID = sessionID;
    }

    public Timestamp getLastModification() {
        return lastModification;
    }

    public void setLastModification(Timestamp lastModification) {
        this.lastModification = lastModification;
    }

    public Timestamp getExpireTime() {
        return expireTime;
    }

    public void setExpireTime(Timestamp expireTime) {
        this.expireTime = expireTime;
    }

    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }

    @Override
    @Transient
    public String toString() {
        String userID = (user != null) ? String.valueOf(user.getUserID()) : "?";
        return String.format("(%s)%s", userID, sessionID);
    }

} 
```

注意：在上面的文件中，我删除了一些不重要的导入。在生成的表中只有两个字段，即 SESSIONID 和 USER_USERID。我还使用了持久化 api 1.0

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T15:11:20.623

从 JPA 的角度来看，注释和修饰符是完全等价的，并且都意味着该字段不是持久的。[请参阅JSR 220 规范](http://download.oracle.com/otndocs/jcp/ejb-3_0-fr-eval-oth-JSpec/)的第 2.1.1 段，其中说：

```
If the entity has field-based access, the persistence provider runtime accesses
instance variables directly. All non-transient instance variables that are not
annotated with the Transient annotation are persistent. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T05:52:38.290

瞬态字段不参与持久化，并且它们的值永远不会存储在数据库中，类似于 Java 中不参与序列化的瞬态字段

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-21T09:42:14.853

书中的答案 - Pro JPA 掌握 JPA

.. 我们使用了transient 修饰符而不是@Transient 注释，因此如果Employee（例如实体）从一个VM 序列化到另一个VM，那么该字段将被重新初始化以对应于新VM 的语言环境。如果在序列化过程中应保留非持久值，则应使用注释而不是修饰符。

# image - Magento 字段集类型“图像”未显示在 $_FILES 中

> ID：14216581
> 
> 赞同：0
> 
> 时间：2013-01-08T14:01:12.497
> 
> 标签：image, magento, magento-1.7, image-uploading

我的 Magento 中有奇怪的东西。而且我看不到问题所在。

我创建了一个模块。（它扩展了 CMS 页面）

在`Observer.php`我有：

```
$fieldset->addField('news_header_image', 'image', array(
    'name'      => 'news_header_image',
    'label'     => Mage::helper('cms')->__('News Header image 80x80 pics'),
    'title'     => Mage::helper('cms')->__('News Header image 80x80 pics'),
    'value'     => $model['news_header_image']
)); 
```

这*很好用*，但是...

在我的observer.php中`public function savePage(Varien_Event_Observer $observer)`
我*可以*使用：`$_POST['news_header_image']`
*但是* `$_FILES['news_header_image']['name']`（甚至`var_dump($_FILES)`）是完全空的：-S

这里有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:33:00.983

您需要将 enctype 添加到`<form>`cms 页面的

```
/**
 * Add enctype to cms page edit form
 *
 * @param $observer Varien_Event_Observer
 *
 * @return void
 */
public function adminhtmlBlockHtmlBefore($observer)
{
    $block = $observer->getEvent()->getBlock();
    if ($block instanceof Mage_Adminhtml_Block_Cms_Page_Edit_Form) {
        $block->getForm()->setEnctype('multipart/form-data');
    }
} 
```

并将其添加到您的配置中：

```
<config>
    <adminhtml>
        <events>
            <adminhtml_block_html_before>
                <observers>
                    <threeaart_pagetemplates>
                        <type>singleton</type>
                        <class>ThreeAArt_PageTemplates_Model_Observer</class>
                        <method>adminhtmlBlockHtmlBefore</method>
                    </threeaart_pagetemplates>
                </observers>
            </adminhtml_block_html_before>
        </events>
    </adminhtml>
</config> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:07:51.620

我认为您应该使用观察者对象而不是直接通过 _POST 变量获取事件附加的任何值。

我不熟悉 CMS 事件，但如果您对以下内容进行调试转储，以查看您的特定事件中可用的值..

```
$observer->getEvent() 
```

# android - 从数据库 SQLite 中提取更多数据，当在列表视图中滚动底部时

> ID：14216589
> 
> 赞同：1
> 
> 时间：2013-01-08T14:01:42.520
> 
> 标签：android, listview

如果列表视图在滚动按钮中，如何提取更多数据。这是我的代码：

```
DatabaseHandler database;
ListView mylist;

ArrayList<NewsItem> items;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.category, container, false);

        mylist = (ListView) view.findViewById(R.id.categoryNewsItemGrid);

        mylist.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // retrieve the NewsItem at the index of the click
                NewsItem item = (NewsItem) mylist.getAdapter().getItem(position);
                // view the item
                clickHandler.onItemClick(item.getId());
            }
        });

        mylist.setOnScrollListener(new OnScrollListener() {
            public void onScrollStateChanged(AbsListView list, int state) {
                if (state == OnScrollListener.SCROLL_STATE_IDLE) {
                // check to see if all the visible items have images
                int firstVisible = list.getFirstVisiblePosition();
                int lastVisible = list.getLastVisiblePosition();
                for (int i = firstVisible; i <= lastVisible; i++) {
                    NewsItem item = (NewsItem) list.getAdapter().getItem(i);
                    // if this item doesn't have a thumbnail
                    if (item.getThumbnailBytes() == null) {
                        // load the thumbnail
                        Bundle bundle = new Bundle();
                        bundle.putInt(ResourceService.KEY_ITEM_ID,
                                item.getId());
                        service.sendMessageToService(
                                ResourceService.MSG_LOAD_THUMB, bundle);
                    }
                }
            }
            }

            public void onScroll(AbsListView list, int firstVisible,
                    int visibleItems, int totalItems) {
                if (visibleItems != 0
                        && ((firstVisible + visibleItems) >= (totalItems))) {

                    Log.d("MyLog", "count: "+totalItems);

                }
            }
        });
        displayCategory(getArguments().getString("category"));

        return view;
}

public void displayCategory(String categoryTitle) {

    items = new ArrayList<NewsItem>(Arrays.asList(database.getItems(
            categoryTitle, 10)));
    mylist.setAdapter(new ItemAdapter(getActivity(), R.layout.list_news_item,
            items, 70, 70));
} 
```

对文件 DatabaseHandler.java 中的数据库的函数查询

```
public NewsItem[] getItems(String category, int limit) {
    // ask the content provider for the items
    Uri uri = Uri.withAppendedPath(
            DatabaseProvider.CONTENT_URI_ITEMS_BY_CATEGORY, category);
    String[] projection = new String[] { DatabaseHelper.COLUMN_ITEM_ID,
            DatabaseHelper.COLUMN_ITEM_TITLE,
            DatabaseHelper.COLUMN_ITEM_DESCRIPTION,
            DatabaseHelper.COLUMN_ITEM_URL,
            DatabaseHelper.COLUMN_ITEM_THUMBNAIL };
    String sortOrder = DatabaseHelper.RELATIONSHIP_TABLE + "."
            + DatabaseHelper.COLUMN_RELATIONSHIP_PRIORITY + " ASC, "
            + DatabaseHelper.ITEM_TABLE + "."
            + DatabaseHelper.COLUMN_ITEM_PUBDATE + " DESC";
    Cursor cursor = contentResolver.query(uri, projection, null, null,
            sortOrder);

    // check the cursor isn't null
    if (cursor == null) {
        // bail here, returning an empty array
        return new NewsItem[0];
    }

    // load the column names
    int id = cursor.getColumnIndex(DatabaseHelper.COLUMN_ITEM_ID);
    int title = cursor.getColumnIndex(DatabaseHelper.COLUMN_ITEM_TITLE);
    int description = cursor
            .getColumnIndex(DatabaseHelper.COLUMN_ITEM_DESCRIPTION);
    int url = cursor.getColumnIndex(DatabaseHelper.COLUMN_ITEM_URL);
    int thumbnail = cursor
            .getColumnIndex(DatabaseHelper.COLUMN_ITEM_THUMBNAIL);

    // load the items into an array
    ArrayList<NewsItem> items = new ArrayList<NewsItem>();

    while (cursor.moveToNext() && cursor.getPosition() < limit) {
        NewsItem item = new NewsItem(); // initialize a new item
        item.setId(cursor.getInt(id));
        item.setTitle(cursor.getString(title));
        item.setDescription(cursor.getString(description));
        item.setUrl(cursor.getString(url));
        item.setThumbnailBytes(cursor.getBlob(thumbnail));
        items.add(item); // add this item to the array
    }

    cursor.close();

    return items.toArray(new NewsItem[items.size()]);
} 
```

如果我在 logcat 中看到 Log.d("MyLog", "count: "+totalItems); 我得到**count: 10**，因为我在第一次显示列表视图时将其设置为 10。

我的问题，当我在底部滚动时如何在列表视图中加载更多数据行，因为在数据库中我有直到 +30 行数据。我在互联网上看到了教程，但没有成功。也许在这里，解决了我的问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:24:24.263

您必须打开数据库，然后在 onScroll() 中，如果您到达结束查询数据库以获取下 10 个项目并附加到适配器并在适配器上调用 notifyDataSetChanged()。因此，当您的应用程序第一次打开时，您将拉取 10 行，然后在滚动后您将查询数据库并拉取更多接下来的 10 行。请检查以下示例代码。

```
public class GrowingListViewActivity extends ListActivity implements OnScrollListener  {
Aleph0 adapter = new Aleph0();

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setListAdapter(adapter);
    getListView().setOnScrollListener(this);
}

public void onScroll(AbsListView view, int firstVisible, int visibleCount,
        int totalCount) {

    boolean loadMore = /* maybe add a padding */
    firstVisible + visibleCount >= totalCount;

    if (loadMore) {
        adapter.count += visibleCount; // or any other amount
        adapter.notifyDataSetChanged();
    }
}

public void onScrollStateChanged(AbsListView v, int s) {
}

class Aleph0 extends BaseAdapter {

    int count = 40; /* starting amount */

    public int getCount() {
        return count;
    }

    public Object getItem(int pos) {
        return pos;
    }

    public long getItemId(int pos) {
        return pos;
    }

    public View getView(int pos, View v, ViewGroup p) {
        TextView view = new TextView(GrowingListViewActivity.this);
        view.setText("entry View : " + pos);
        return view;
    }
}
 }

  public class CustomArrayAdapter extends ArrayAdapter implements
    OnScrollListener {
private final Context context;
private final ArrayList<String> values;

static class ViewHolder {
    public TextView text;
    public ImageView image;
}

public CustomArrayAdapter(Context arg0, int arg1, int arg2,
        ArrayList<String> arg3) {
    super(arg0, arg1, arg2, arg3);
    this.context = arg0;
    this.values = arg3;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    int product_id = 0;
    View rowView = new View(context);
    try {

        ImageView wic_logo = new ImageView(context);
        TextView label = new TextView(context);

        String p = values.get(position);

        label.setText(p);

        wic_logo.setImageResource(R.drawable.ic_launcher);

        Log.d("Custom Array Adapter", "at" + position);
    } catch (Exception e) {
        Log.d("Custom Array Adapter", "catch");
    }

    return rowView;
}

public void onScroll(AbsListView arg0, int firstVisibleItem,
        int visibleItemCount, int totalItemCount) {
    Log.d("entered onScroll", " " + firstVisibleItem + visibleItemCount
            + totalItemCount);
    if (((firstVisibleItem + visibleItemCount) >= totalItemCount - 1)) {
        Log.d("entered if", " " + firstVisibleItem + visibleItemCount
                + totalItemCount);
        // if we're at the bottom of the listview, load more data
        addData(totalItemCount, totalItemCount); // values.get(totalItemCount));
    }
}

private void addData(int totalItemCount, int productId) {

    Toast.makeText(getContext(), "last item", Toast.LENGTH_SHORT).show();
}

public void onScrollStateChanged(AbsListView arg0, int arg1) {

}

  } 
```

我想这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:12:22.537

您必须打开您的数据库，然后在每次滚动声明更改时查询数据库并将结果限制为您想要的数字！因此，当您的应用程序第一次打开时，您将拉取 10 行，然后滚动后您将查询数据库并拉取更多接下来的 10 行！！！

**更新**

让它更容易一点！使用您的数据类型创建一个 ArrayList！并创建一个私有 int limitCounter = 0;。之后从数据库中获取所有数据并将其插入到 ArrayList 中。然后，当您滚动时，您将更改 limitCounter 的值并从中提取适当的数据，这样您就不必每次都查询数据库。

更新#2

试试下面的教程，它会帮助你：[http ://www.androidhive.info/2012/03/android-listview-with-load-more-button/](http://www.androidhive.info/2012/03/android-listview-with-load-more-button/)

# php - 如何使用 Facebook 喜欢或分享按钮分享照片

> ID：14216593
> 
> 赞同：1
> 
> 时间：2013-01-08T14:01:56.737
> 
> 标签：php, facebook

我正在使用这个 facebook 分享链接

```
https://www.facebook.com/dialog/feed?
app_id=458358780877780&
link=https://developers.facebook.com/docs/reference/dialogs/&
picture=http://fbrell.com/f8.jpg&
name=Facebook%20Dialogs&
caption=Reference%20Documentation&
description=Using%20Dialogs%20to%20interact%20with%20users.&
redirect_uri=https://mighty-lowlands-6381.herokuapp.com/ 
```

它所做的是与名称、标题和描述共享链接。

我想要的是分享一张照片。（当我直接去 facebook -> 点击照片 -> 然后发布时，输出相同）

这件事可能还是已经可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:30:04.593

尝试这个：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:fb="https://www.facebook.com/2008/fbml">
  <head>
    <title>My Feed Dialog Page</title>
  </head>
  <body>
    <div id='fb-root'></div>
    <script src='http://connect.facebook.net/en_US/all.js'></script>
    <p><a onclick='postToFeed(); return false;'>Post to Feed</a></p>  <----- click photo -> then post it
    <p id='msg'></p>

    <script> 
      FB.init({appId: "YOUR_APP_ID", status: true, cookie: true});

      function postToFeed() {

        // calling the API ...
        var obj = {
          method: 'feed',
          redirect_uri: 'YOUR URL HERE',
          link: 'https://developers.facebook.com/docs/reference/dialogs/',
          picture: 'http://fbrell.com/f8.jpg',
          name: 'Facebook Dialogs',
          caption: 'Reference Documentation',
          description: 'Using Dialogs to interact with users.'
        };

        function callback(response) {
          document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
        }

        FB.ui(obj, callback);
      }

    </script>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T17:39:07.737

你将无法以`post`这种方式拍照。该`picture`参数旨在欢迎自定义链接图片。

如果要将图片发布到时间轴，您有三个选项：

1.  **将照片上传到应用的相册**：[https](https://developers.facebook.com/blog/post/498/) ://developers.facebook.com/blog/post/498/ （场景 1）。

2.  **创建新相册并添加照片**：[https](https://developers.facebook.com/blog/post/498/) ://developers.facebook.com/blog/post/498/ （场景 2）。因为您想从 URL 而不是从您的计算机上传照片，所以您需要以下行：`$image_url = '@' . realpath("http://fbrell.com/f8.jpg");`. 然后，只需`$image_url`在对话 URL 中使用它。

3.  **用户生成的照片**：[https](https://developers.facebook.com/docs/opengraph/usergeneratedphotos/) ://developers.facebook.com/docs/opengraph/usergeneratedphotos/ 。

# qtp - QTP：如何以编程方式查找动作名称？

> ID：14216596
> 
> 赞同：0
> 
> 时间：2013-01-08T14:02:02.380
> 
> 标签：qtp

数据表有 Datatable.getsheet.getparameter ... 等等。有什么行动吗？

我认为它会类似于 Test.Actions("Name_of_action").name。它在帮助中的对象模型参考中谈到了这一点......但我不知道基类。

另外，我在哪里可以找到所有基类的列表？（基类是指“数据表”类之类的东西）

编辑：我的最后一个问题本质上是询问是否有用于 QTP 类的 MSDN。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T08:39:44.860

```
curAction = Environment.Value("ActionName") 
```

这会将当前操作名称分配给一个字符串变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:01:17.627

操作具有`Name`可通过自动化访问的属性。

```
Set qtApp = CreateObject("QuickTest.Application")
MsgBox qtApp.Test.Actions(1).Name 
```

这一切都在 QTP 的*HP QuickTest Professional Advanced References* => *HP QuickTest Professional 自动化对象模型*（又名 MSDN for QTP classes）下的帮助中进行了详细说明。

# groovy - 将脚本值传递给soapUI中的端点

> ID：14216599
> 
> 赞同：1
> 
> 时间：2013-01-08T14:02:13.627
> 
> 标签：groovy, soapui

**我的问题：**我需要将脚本的值作为请求端点的一部分传递。如何执行此操作？

**场景：**我应该在整个测试套件中维护一个 id，其中包含 10 个或更多测试用例。我在执行第一个测试用例时获得的 ID 应该作为下一个测试用例的端点的一部分传递，比如说`wwww.google.com/{id}`

**我试过：**创建测试套件和测试用例，然后为每个测试用例添加 HTTP 测试请求测试步骤。然后，在测试用例完成执行后，`xml`使用 Groovy 脚本作为测试步骤将响应写入文件。顺便说一句，请求和响应的`JSON`格式都不是 XML。将响应写入文件后，我使用另一个脚本从文件中读取响应，并解析`JSON`内容以仅获取我需要的值。然后我将参数添加到下一个测试步骤的端点，比如`www.google.com/$id`. 然而，这失败了！

现在，如何将此值作为下一个测试步骤端点的一部分传递？请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-04T19:26:43.373

肥皂界面示例：

1) 测试用例：**认证**

响应（json）：{“sessionID”：“7722f396-a32e-4533-a16b-e5141e00d691”}

2) 测试用例：**获取状态**

soapUI 中的请求 URL = [http://url/session/](http://url/session/) ${Authentication#Response#$.sessionID}

结果 URL = [http://url/session/7722f396-a32e-4533-a16b-e5141e00d691](http://url/session/7722f396-a32e-4533-a16b-e5141e00d691)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:52:06.433

It seems like you shouldn't need an external file for this. According to [this](http://www.soapui.org/Functional-Testing/working-with-properties.html) (see "3\. Script access to properties" section), you should have write access to properties you define, at some scope of your choosing, from scripts (it's not clear to me if you need to have defined them statically via the UI, or whether you can create new ones on the fly). I believe those values should then be usable in defining your endpoint. (scopes shown [here](http://www.soapui.org/Scripting-Properties/property-expansion.html))

(There's also [`Property-Transfer`](http://www.soapui.org/Functional-Testing/transfering-property-values.html) steps, but these may not suit your JSON requirements, due to apparent reliance on XPath to extract the values.)

# qt - 连接 const QString& 或 const QString

> ID：14216600
> 
> 赞同：5
> 
> 时间：2013-01-08T14:02:17.257
> 
> 标签：qt

如果 QString 是本地的，那么使用 QString 发出信号的正确方法是什么。我的意思是我在 wigdetA 中有这样的功能

```
void wigdetA::something()
{

//
//e.g
//
QTreeWidgetItem *it = this->treeWidget->currentItem();
if (it == 0)
    return;

QString s = it->text(1);

emit passToMainWindow(s);
} 
```

我应该像这样创建连接（只是 const QString）：

```
 connect(wigdetA, SIGNAL(passToMainWindow(const QString)), this, SLOT(passToMainWindow(const QString))); 
```

或者我可以使用 const 参考吗

```
connect(wigdetA, SIGNAL(passToMainWindow(const QString&)), this, SLOT(passToMainWindow(const QString&))); 
```

两种方法都有效，但我虽然第二个 const& 会使应用程序崩溃，因为 QString s 是本地的，并且当函数 something() 退出时它将被破坏。

或者我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:17:55.760

由于发射和接收对象都在主线程中，Qt 使用直接连接（当你发射时立即调用插槽）。在这种情况下，您的本地字符串仍在堆栈上。

但是，最好通过值传递它，尤其是在驻留在不同线程中的对象之间建立连接时。QString 使用隐式共享（也称为写时复制），因此按值传递它的成本并不高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-13T11:06:36.957

对于 Qt5，新的连接系统要求两个插槽具有相同的参数类型，并且将带有 QString 参数的信号连接到带有 const QString & 的插槽将不起作用。

```
ObjType1 : QObject {
  Q_OBJECT
  ...
  signals :
  sendInfo(QString)
}

ObjType2 : QObject {
  Q_OBJECT
  ...
  public slots:
  slotObjType1::receiveInfo(const QString&)
  ...
}

void ObjTyp3::someFunction{}(
   ...
   connect(mpObj1, &ObjType1::sendInfo, mpObj2, &ObjType2::receiveInfo); // shows an error because arguments does not match
   ...
} 
```

如果我们考虑多线程问题，那么按值传递将是更安全、更可维护的做事方式。但是，许多文档显示带有“const QString&”参数的插槽，尽管它不允许连接带有 QString 参数的信号。当不使用直接连接时，复制 (const QString &) 值的“连接”机制有什么魔力吗？每个人都有理由使用带有 QString 参考的信号吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:18:04.993

将`emit passToMainWindow(s)`在主窗口中调用插槽，因为它被发射。所以这没什么大不了的。在处理他们主要使用的 qt 插槽时`const QString&`，我猜框架会注意字符串在被插槽使用之前不会被删除。

# asp.net-mvc-4 - MVC4 的 MVCContrib 网格替代品

> ID：14216610
> 
> 赞同：1
> 
> 时间：2013-01-08T14:02:57.547
> 
> 标签：asp.net-mvc-4, mvccontrib, mvccontrib-grid

我正在开发一个新的 MVC4 项目，需要一个好的 MVC 网格来支持分页和排序（我想自己处理分页和排序，而不是在网格中）。我也喜欢轻量级的网格（因为我想控制 html 标记和查询参数）并且能够对列使用 lambda 表达式。

我之前在一个较旧的 MVC2 项目中使用过 MvcContrib Grid，并且对它的可扩展性非常满意。我在这个项目中对 webhelper 网格进行了一些试验，但它似乎不像 MvcContrib Grid 那样可扩展。然而，MvcContrib 项目似乎不再得到积极维护。据我所见，主要版本是针对 MVC2 的，我真的不想在全新的未开发项目中发布兼容性。

有谁知道 MvcContrib 项目是否有望发布 MVC4 的新版本？现在还有其他适用于 MVC 的轻量级和最新的网格吗？

**更新** 我最终编写了自己的网格组件（和寻呼机组件），其语法风格松散地基于 MvcContrib，并且可以交换渲染器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:10:36.400

你看过 jQuery Datatables [http://www.datatables.net/](http://www.datatables.net/)

我最近从 MVCContrib Grid 迁移到 jQuery Datatables。他们非常棒。

这是我们初始化表的方式。

```
BindTable: function () {
        var that = this;
        this.Table = $('#sorting-advanced');
        var tableStyled = false;

        this.Table.dataTable({
            'aoColumnDefs': [
                { 'aTargets': [1], 'sType': 'num-html' },
                { 'aTargets': [3], 'sType': 'currency' },
                { 'aTargets': [5], 'bSortable': false, }
            ],
            'sPaginationType': 'full_numbers',
            'sDom': '<"dataTables_header"lfr>t<"dataTables_footer"ip>',
            'fnDrawCallback': function (oSettings) {
                // Only run once
                if (!tableStyled) {
                    that.Table.closest('.dataTables_wrapper').find('.dataTables_length select').addClass('select').styleSelect();
                    tableStyled = true;
                }
            }
        });
    }, 
```

这是剃刀视图

```
 <table class="table responsive-table" id="sorting-advanced">
            <thead>
                <tr>
                    <th scope="col">Date</th>
                    <th scope="col">Document #</th>
                    <th scope="col">Tenant</th>
                    <th scope="col">Amount</th>
                    <th scope="col" class="align-center">Reconciled</th>
                    <th scope="col" class="align-center">Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.Items)
                {
                    <tr>
                        <td>@item.Date.ToShortDateString()</td>
                        <td>
                            <a href="@Url.Action("Edit", new {id = item.Id})">@item.Number</a>
                        </td>
                        <td>@item.Contact.DisplayName</td>
                        <td>@item.Amount.ToString("C2")</td>
                        <td class="align-center">
                          @Html.CheckBoxFor(x => item.Reconciled, new {id = item.Id})
                        </td>
                        <td class="align-center vertical-center">
                            <span class="button-group compact">

                                <a href="@Url.Action("Edit", new {id = item.Id})" 
                                   class="button icon-pencil with-tooltip"
                                   title="Edit Payment"></a>

                                <a href="#" id="@item.Id" 
                                   class="button icon-trash with-tooltip confirm-delete"
                                   title="Delete Payment"></a>
                            </span>
                        </td>
                    </tr>
                }
            </tbody>
        </table> 
```

# fonts - 操作系统中的字符集和字体有什么区别？

> ID：14216612
> 
> 赞同：2
> 
> 时间：2013-01-08T14:02:57.900
> 
> 标签：fonts, operating-system, character

我想知道操作系统中的字符集和字体之间有什么区别吗？. 我知道字符集将字符集映射到它们的整数值，但是当字体进入场景时，我会感到模糊...... 我想知道它们是如何相关的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T14:51:45.060

字符集是从无符号整数到抽象字符的映射。例如，在 Ascii 字符集中，数字 103（十进制；十六进制的 67）映射到拉丁小写字母 g。在逻辑层面上，字符集不必与计算机有任何关系（尽管该概念在信息技术中具有明显的实际相关性）

字体，在这个词的现代意义上，是用于将特定形状的字符渲染（显示）为特定字形的计算机代码。

在内部，字体使用字形索引，但也使用基于字符集的索引编号。当一种字体用于渲染字母 g 时，它在内部由其在字符集中的编号表示，并且该编号用于找出它在字体中的字形。即，字符编号映射到字形编号。（如果文本的字符集与字体编码中使用的字符集不同，则需要在此之前进行额外的字符集转换。）

这通常通过将字体描述为由字符编号索引的字形数组来简化：索引，例如 103，用于拾取第 103 个虚拟框，其中包含一个字形（对于字符 g）。虽然对获得基本概念很有用，但它确实过于简单化了。在许多字体中，字母 g 有两个或多个字形（例如单循环形式和双循环形式，或普通形式和小写大写形式），尽管其中一个是默认字形，其他需要使用特殊工具选择表格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T14:13:38.383

字体文件包含将字符（通过字符的“索引”）映射到可显示的矢量或位图数据的信息。阅读[http://v1.jontangerine.com/log/2008/08/typeface--font](http://v1.jontangerine.com/log/2008/08/typeface--font)以获得更好的概述。

字符集 - 参见例如[http://www.iana.org/assignments/character-sets/character-sets.xml](http://www.iana.org/assignments/character-sets/character-sets.xml)不涉及键盘，它是从索引（整数）到字符（概念，不是特定的字形）。

你描述的东西被命名为键盘映射（afaik）。

我认为这应该足以满足您的目的，如果您愿意，可以为您提供一些深入研究的指导。

**更新** 神奇的链条（可能有点朦胧，我没有研究它，请修复您发现的任何错误）：

你按下键盘上的一个键——你触发了一个中断，这是一个**关键事件**。我不知道键盘和计算机之间的有线协议，但我猜它只是每个键一个字节，类似于 0..127 用于按键，-1..-128 用于按键。

您的操作系统从键盘接收中断并更新其内部状态，聚合信息，如按下 ctrl / shift / alt 修饰符，......您的键盘布局（**keymap**）和您使用的**字符集**的知识被考虑在内，所以你得到一个字符（例如“a”+“shift”->“A”的关键事件，这很容易。但你也可以输入像“Ä”这样的东西，它不包含在每个字符集中，也不包含每个键盘上）。现在您知道按下了哪个字符。但这不是你可以展示的东西——它只是一个概念（见下一步）。

如果没有热键处理程序或诸如此类的东西拦截您的键并且它通过您的应用程序，它需要知道要在屏幕或打印机上绘制什么。“A”并不完全一样，如果你拿两张手写的，它们看起来可能会有所不同。**字体**用于绘制或打印代表字符的东西——字符的图像。对于大多数用户和大多数程序，**字体**包括字符的外观、包含生成它的数据的文件以及所有变体，如**常规**、**粗体**、**斜体**、**大写字母**及其组合。

类型专家（我不是一个，只是一个爱好者）真的不喜欢这种缺乏区分。

**字体**是一系列字体**变**体（见上文），它们存储在包含**字形**（具有特定外观的字符）的描述性数据的**字体文件中。**字体还可能包含**字距调整**（字符之间的距离）、**提示**（关于如何以特定大小显示的细节）、**替代**（字母的替代字形）和**连字**（如何将一组字符组合成一个字形。不同的字体文件格式（truetype、open type、所有这些网络字体格式）具有不同的功能。

 ******有一个分辨率的位图字体，如果它们没有显示在原始位图的倍数中，它们看起来很糊状。有包含对其轮廓的数学描述的矢量字体，可以缩放到您喜欢的任何分辨率，并且看起来仍然清晰（这就是提示可能很重要的地方。以及 cleartype、抗锯齿、亚像素抗锯齿）。

字体可以按外观分类：**比例**（“i”比“m”更细）vs**等宽字体**（每个字形都具有相同的宽度），**sans serif** vs **serif**。当它们具有某些相似性时，它们被归类为**字体系列。****怪诞**，**断裂**，**符号**，**签名**，...

这就是我现在所拥有的一切，我可能没有把一切都做好。但这是一个开始。有关更多详细信息，请将任何粗体内容粘贴到您最喜欢的搜索引擎中。亲爱的读者，如果你发现了一个错误：我会很感激你的评论并将更新它。******

# android - 在 Android 中通过移动网站连接到 Facebook？

> ID：14216613
> 
> 赞同：1
> 
> 时间：2013-01-08T14:02:59.507
> 
> 标签：android, facebook, mobile-website

我正在开发一个 Android 应用程序，在其中我将在 WebView 中打开一个移动网站。但是由于网站响应，某些控件将存在于应用程序中。所以现在我的问题是我需要从移动网站而不是应用程序连接到 Facebook。所以 fb 集成必须从 Web 端或 App 端完成。我对这种事情没有任何想法，但我的客户说要这样做。我不确定，但可以肯定的是，它不会从应用程序端发生，因为它是移动网站。在这方面的任何帮助将不胜感激。

# android - 无法创建 AVD

> ID：14216622
> 
> 赞同：-4
> 
> 时间：2013-01-08T14:03:54.773
> 
> 标签：android, avd

我尝试创建 AVD。但是创建按钮是无效的

![在此处输入图像描述](../Images/5a93f5937316ab1e32a7e6ea542ded02.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:09:12.970

转到您的 SDK 管理器并确保已下载并安装 API lv 17 所需的所有内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:06:21.400

您需要为您尝试定位的 SDK 下载系统映像。您没有所需的一切，这就是您无法创建 AVD 的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:06:58.833

在`CPU/ABI`它下面说“没有为此目标安装系统映像”。使用 SDK 管理器下载系统映像。

# java - java主线程管理启动其他线程

> ID：14216623
> 
> 赞同：3
> 
> 时间：2013-01-08T14:04:06.293
> 
> 标签：java, multithreading, asynchronous, fifo, java.util.concurrent

我会描述我的问题：

*   我正在异步模式下开发用于文档生成（Office 文档）的应用程序，因此我使用 Threads

*   由于性能限制，我只能同时启动 2 个线程，

*   为了不阻止用户在两个线程运行时启动文档生成，我想开发一个包含 ArrayDeque 对象作为线程堆栈的主线程，用户可以在其中添加创建请求（作为实现 Collable 或 Runnable 接口的对象）并使用 Concurrent API在 FIFO 模式下启动线程

    问题是：

*   如何确保将主线程作为所有用户的单例运行？

*   如何在主运行线程上调用 ArrayDeque

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T14:06:27.600

听起来像是一个使用`ExecutorService`两个线程池的简单案例：

```
class Task implements Runnable {
    ...
}

ExecutorService exec = Executors.newFixedThreadPool(2);
exec.submit(new Task()); // submit task to the queue for asynchronous processing 
```

将`ExecutorService`封装一个线程池和一个工作队列。Thread 将在完成以前的任务时自动选择新的工作。

# vim - 在 vim 中全局追加到匹配项的行

> ID：14216625
> 
> 赞同：20
> 
> 时间：2013-01-08T14:04:08.120
> 
> 标签：vim

我相信这很容易，我只是缺少一两个字符。

我需要在文件中搜索特定术语，当我找到它时，我需要在该行中附加一些内容。我想在比赛的每一行都这样做。

要做一次，我可以这样做：

```
/Thing to find/s/$/ Stuff to append/ 
```

简单的。如果我的“要找的东西”位于行尾，我可以这样做：

```
%s/\(Thing to find\)$/\1 Stuff to append/ 
```

在每个匹配的行上做同样的事情

但是我如何在每一行做第一件事呢？

我想我能做到

```
%s/\(Thing to find.*\)$/\1 Stuff to append/ 
```

但这感觉很笨拙，如果要查找的东西不止一次在同一行上，它会变得更加复杂。

我认为必须有一种方法可以在任何地方进行我的第一次搜索，但是我无法编写足够简洁的描述来搜索它。

如此强大的 Stackers，有人想用一个两字节的解决方案来打我一巴掌吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-08T14:10:40.680

该`:g//`命令就是您要查找的内容 - 它在与模式匹配的每一行上运行一个命令：

```
:g/Thing to find/ s/$/ Stuff to append/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-11-17T23:18:03.317

如前所述，`:g//`这是您所追求的，但是满足您特定需求的另一个效率是运行普通命令作为全局命令的一部分。`s`只是可以执行的一堆命令之一`:g//`。你也可以`d(elete)`, `j(oin)`, 和几乎任何你能想象到的 ex 命令。

另一个有用的是`norm(al)`，它可以用来执行任何正常的命令。从`:help`on 开始`:norm(al)`：“命令就像输入一样执行。”

因此，您还可以通过以下方式实现您想要的：

`:g/Thing to find/norm Astuff to append`

假设我正在为我的测试环境复制我的 mysql 配置文件。我想将 _test 附加到以“database=”开头的每一行，所以：

`g/^database=/norm A_test`

需要记住的是，Vim 将执行 'norm' 之后的所有内容，就好像你输入了它一样。所以`A`命令和要附加的文本之间没有空格（或者你会在输出中得到一个额外的空格）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-23T15:39:34.690

`:%s/green/bright &/g`：将文件中的每个“绿色”替换为“亮绿色”。

`&`: 替代品`matched string`。你可以做任何你能想象到的事情。

您可以使用标志`\v`，这样我们就不必使用尽可能多的转义字符。

在or`--no-startup-id`之后附加参数`exec``exec_always`

`:%s/exec\(_always\)\?/& --no-startup-id/g`

简化它：

`:%s/\vexec(_always)?/& --no-startup-id/g`

# mysql - 泛化表查询

> ID：14216633
> 
> 赞同：1
> 
> 时间：2013-01-08T14:04:36.060
> 
> 标签：mysql, sql, select, union

好吧，我有一些这样的桌子..

```
table TopicForum
-------------------------
 - idforum (PK)
 - iduser (FK)
 - subject
 - content

table Usermember
--------------------------------
-iduser (PK)
-password
-accesslevel

table student
-------------------------------
-idstudent (PK)
-iduser (FK)
-name

table teacher
---------------------------------
-idtecher (PK)
-iduser(FK)
-name

table admin
-----------------------------------
-idadmin (PK)
-iduser(FK)
-name 
```

所以我想在**学生**、**教师**和**管理员的****iduser** 的 TopicForum 参考中显示**名称**..

 ******请帮忙谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:22:01.570

尝试这个：

```
SELECT DISTINCT A.name, A.iduser 
FROM (SELECT NAME, iduser FROM Student
      UNION 
      SELECT NAME, iduser FROM Teacher
      UNION
      SELECT NAME, iduser FROM Admin) AS A 
INNER JOIN TopicForum tf ON A.iduser = tf.iduser 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:07:58.337

尝试 ：

```
SELECT DISTINCT tf.Subject
FROM TopicForum tf
INNER JOIN (
    SELECT iduser FROM Student
    UNION 
    SELECT iduser FROM Teacher
    UNION
    SELECT iduser FROM Admin
) u ON tf.iduser = u.iduser 
```

我不太明白你为什么要区分`iduser`和`idteacher`例如。除非你想以某种方式格式化它们（但为什么？）我建议将这两列合并到一个唯一的 id 列中，这可以是与表的一对一关系`usermember`。******

# csv - 使用 Python 和 Beautiful Soup 在 csv 中写入数据的问题

> ID：14216634
> 
> 赞同：0
> 
> 时间：2013-01-08T14:04:38.977
> 
> 标签：csv, python-2.7, beautifulsoup

下面提到的代码 1 只给了我 1 行，而代码 2 给了我所有的行。code-1 给我的 1 行是递归的最后一个元素（该行是 code-2 输出的最后一个元素）。

请仔细检查代码 1 和代码 2 之间的区别，并帮助我查明导致此问题的问题。

代码 1：

```
# -*- coding: cp1252 -*-
import csv
import urllib2
import sys
import urllib
import time
import mechanize
import cookielib
from bs4 import BeautifulSoup
from itertools import islice

cy_q = int(time.strftime("%m"))
if cy_q <= 3:
    q = 1
elif cy_q <=6:
    q = 2
elif cy_q <=9:
    q = 3
else:
    q = 4
month = int(time.strftime("%m"))
if month <= 6:
    fy = time.strftime("%Y")
else:
    fy = int(time.strftime("%Y")) +1
if month <=3:
    fy_q = 3
elif month <=6:
    fy_q = 4
elif month <= 9:
    fy_q = 1
else:
    fy_q = 2

urls = ['http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&p=0',
        'http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&p=1',
        'http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&p=2',
        'http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&p=3',
        'http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&p=4',
        'http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&p=5',
        'http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&p=6',
        'http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&p=7',
        'http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&p=8',
        'http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&p=9',
        'http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&p=10'
        ]
for url in urls:
        page= urllib2.urlopen(url).read()
        soup = BeautifulSoup(page)
        items = soup.findAll('h3', {"class": "title"})
        prices_int = soup.findAll('span', {"class": "price"})
        prices_dec = [None]*100
        j = 0
        i = 0

        for tag in soup.findAll('span', {'class': 'priceDecimalPart'}):
                try:
                    check = soup.findAll('span', {"class": "priceDecimalPart"})[j].parent['class']
                except KeyError:
                    prices_dec[i] = soup.findAll('span', {"class": "priceDecimalPart"})[j]
                    i = i + 1
                j = j + 1

        with open('sfr_oemtest.csv', 'wb') as csvfile:
            spamwriter = csv.writer(csvfile, delimiter=',')
            spamwriter.writerow(["Date","Month","FY","CY","FY Quarter","CY Quarter","Day of Week","Geography","MO","OEM","Device Name","GDN",
                                "Refurbished (Y/N)","Color","Storage (GB)","Additional","Plan Name","Currency","Device Price","Plan Price",
                                "Plan Data","Plan Minutes"])        
            for item, price_int, price_dec in zip(items,prices_int,prices_dec):
                textcontent = u' '.join(item.stripped_strings)
                name_1 =  unicode(textcontent).encode('utf8').replace("Ã©","").replace("RECONDITIONNE","Refurbished").replace("reconditionn","Refurbished").replace("Tablette","Tablet").replace("Noir et Blanc","Black and White").replace("Remis Ã  neuf","Refurbished").replace("Remis Ã  Neuf","Refurbished").replace("Reconditionn","Refurbished").replace("Go","GB").replace("Bleu Nuit","Midnight Blue").replace("Noir","Black").replace("Blanc","White").replace("Bleu","Blue").replace("Rose","Pink").replace("Rouge","Red").replace("Gris","Grey").strip()
                oem = list(name_1)
                pos = oem.index(" ")
                if name_1.find('Refurbished') == -1:
                    name = name_1
                    refur = "N"
                else:
                    name = name_1.replace("Refurbished","")
                    refur = "Y"
                if name_1:
                    spamwriter.writerow([time.strftime("%Y-%m-%d"),time.strftime("%B"),fy,time.strftime("%Y"),fy_q,q,
                                         time.strftime("%A") , "France", "SFR",name[0:pos],name,"",refur,"","","","24 Months",
                                         "€" ,unicode(price_int.string).encode('utf8').strip().replace("â‚¬","").replace(",",".")+
                                         unicode(price_dec.string).encode('utf8').strip().replace("â‚¬","").replace(",","."),"","",""]) 
```

代码 2：

```
urls = ['http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&p=0',
        'http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&p=1',
        'http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&p=2',
        'http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&p=3',
        'http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&p=4',
        'http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&p=5',
        'http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&p=6',
        'http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&p=7',
        'http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&p=8',
        'http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&p=9',
        'http://www.sfr.fr/mobile/telephones?vue=000029&tgp=toutes-les-offres&p=10'
        ]
for url in urls:
        page= urllib2.urlopen(url).read()
        soup = BeautifulSoup(page)
        items = soup.findAll('h3', {"class": "title"})
        prices_int = soup.findAll('span', {"class": "price"})
        prices_dec = [None]*100
        j = 0
        i = 0

        for tag in soup.findAll('span', {'class': 'priceDecimalPart'}):
                try:
                    check = soup.findAll('span', {"class": "priceDecimalPart"})[j].parent['class']
                except KeyError:
                    prices_dec[i] = soup.findAll('span', {"class": "priceDecimalPart"})[j]
                    i = i + 1
                j = j + 1

        with open('Pricing_Updated.csv', 'ab') as csvfile:
            spamwriter = csv.writer(csvfile, delimiter=',')
          #  spamwriter.writerow(["Date","Month","Day of Week","Geography","Mobile Operator","Device Name","Price","Monthly Price","Plan"])
          #  spamwriter.writerow(["Date","Month","FY","CY","FY Quarter","CY Quarter","Day of Week","Geography","MO","OEM","Device Name","GDN",
          #                      "Refurbished (Y/N)","Color","Storage (GB)","Additional","Plan Name","Currency","Device Price","Plan Price",
          #                      "Plan Data","Plan Minutes"])        
            for item, price_int, price_dec in zip(items,prices_int,prices_dec):
                textcontent = u' '.join(item.stripped_strings)
                if textcontent:
                    spamwriter.writerow([time.strftime("%Y-%m-%d"),
                                         time.strftime("%B"),fy,time.strftime("%Y"),fy_q,q,
                                         time.strftime("%A") , "France", "SFR","",
                                         unicode(textcontent).encode('utf8')
                                         .replace("Ã©","")
                                         .replace("RECONDITIONNE","Refurbished")
                                         .replace("reconditionn","Refurbished")
                                         .replace("Tablette","Tablet")
                                         .replace("Noir et Blanc","Black and White")
                                         .replace("Remis Ã  neuf","Refurbished")
                                         .replace("Remis Ã  Neuf","Refurbished")
                                         .replace("Reconditionn","Refurbished")
                                         .replace("Go","GB")
                                         .replace("Bleu Nuit","Midnight Blue")
                                         .replace("Noir","Black")
                                         .replace("Blanc","White")
                                         .replace("Bleu","Blue")
                                         .replace("Rose","Pink")
                                         .replace("Rouge","Red")
                                         .replace("Gris","Grey"),"","","","","","24 Months",
                                         "€" ,unicode(price_int.string).encode('utf8').strip().replace("â‚¬","").replace(",",".")+
                                         unicode(price_dec.string).encode('utf8').strip().replace("â‚¬","").replace(",","."),"","",""]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:47:10.663

区别在于`open('Pricing_Updated.csv', 'ab')`vs `open('sfr_oemtest.csv', 'wb')`，特别是`ab`vs `wb`。

the`a`指的是**append**而 the`w`指的是**write**。在第一个示例中，您将覆盖每个循环中的行，这就是为什么您只找到最后一个预期条目的原因。在第二个中，您将附加到现有数据。

# deserialization - protobuf-net 对大文件进行反序列化

> ID：14216636
> 
> 赞同：4
> 
> 时间：2013-01-08T14:04:42.963
> 
> 标签：deserialization, protobuf-net, binary-deserialization

我需要反序列化 1.5GB 的 txt 文件。我正在使用来自 code.google.com/p/protobuf-net/ 的 protobuf-net

有时它会在不同的地方出现不同的异常（空引用、内存访问冲突）而失败（大约 50% 的情况）。我注意到，如果处理器负载低，那么故障的可能性就会降低。

我应该怎么做才能避免此类失败？

下面是反序列化代码的示例：

```
public static History LoadFromFile(string path)
    {
        using (var fileStream = File.OpenRead(path))
        {
            var obj = Serializer.Deserialize<History>(fileStream);                
            return obj;
        }
    } 
```

今天我有一个错误代码为 0xc0000005 的 FatalExecutionEngineError，但我无法意识到代码的哪一部分可能不安全。这不是一个持续的错误，我重新启动应用程序后一切正常。

这是带有序列化的文件的示例，我需要对其进行反序列化： [https ://docs.google.com/file/d/0B1XaGInC6jg3ZXBZZDA3bHh3bVk/edit](https://docs.google.com/file/d/0B1XaGInC6jg3ZXBZZDA3bHh3bVk/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-14T17:18:32.637

谷歌 ：

> 协议缓冲区不是为处理大消息而设计的。作为一般经验法则，如果您要处理的消息均大于 1 兆字节，则可能是时候考虑另一种策略了。也就是说，Protocol Buffers 非常适合处理大型数据集中的单个消息。

[来源链接](https://developers.google.com/protocol-buffers/docs/techniques#large-data)

# c# - 将 BIT 加载到 CheckBox 中的最简洁方法

> ID：14216637
> 
> 赞同：0
> 
> 时间：2013-01-08T14:04:49.537
> 
> 标签：c#, asp.net, checkbox, sql-server-2008-r2

我正在`BIT`从数据库加载数据类型以填充`CheckBox`. 目前我有：

```
chkDependencies.Checked = (objRdr["BitColumn"].ToString().ToLower() == "true" ? true : false); 
```

`objRdr`是一个`SqlDataReader`。

这看起来很乱，我想知道是否有更清洁的方法来加载`BIT`数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:08:48.610

您可以使用 DataRow 的字段扩展方法

```
chkDependencies.Checked = dataRow.Field<bool>("BitColumn"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:06:28.947

假设`BitColumn`是数据库中的一个实际`bit`字段（而不是`null`）......

```
chkDependencied.Checked = (bool)objRdr["BitColumn"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:09:27.027

如果您的“BIT”的基础类型是字符串，那么这将起作用：

```
chkDependencied.Checked = bool.Parse(objRdr["BitColumn"]); 
```

如果您的“BIT”的基础类型是布尔值，那么这将起作用：

```
chkDependencied.Checked = (bool)objRdr["BitColumn"]; 
```

这假设 objReader 是某种键入以包含基本对象的键控字典，即：

```
Dictionary<string, object> 
```

# sorting - 用于文档排序的 Umbraco 事件？

> ID：14216641
> 
> 赞同：0
> 
> 时间：2013-01-08T14:05:04.827
> 
> 标签：sorting, event-handling, umbraco

当您使用内容文档树的**排序功能时，是否会触发事件？**

我曾假设可能会有类似的事件：

*umbraco.cms.businesslogic.web。**Document.BeforeMove***

*除了Document*之外，是否还有一个对象我忽略了用于内容排序的事件挂钩？

我用来处理自定义事件的类使用*umbraco.businesslogic。**ApplicationStartupHandler***作为它的基类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:01:02.553

[这](http://our.umbraco.org/wiki/reference/api-cheatsheet/using-applicationbase-to-register-events/overview-of-all-events)是所有 API 事件的备忘单，按它们适用的对象类型排序。不幸的是，没有任何事件。

但是（我在这里大声思考）在排序之后，您将在某个时候出现 UpdateDocumentCache 事件或 RefreshContent 事件。是不是不可能与那些挂钩？

# mysql - 警告＃1264：mysql中的超出范围错误

> ID：14216642
> 
> 赞同：13
> 
> 时间：2013-01-08T14:05:05.917
> 
> 标签：mysql, decimal

以下查询：

```
INSERT INTO skill (`emp_number`, `skill_id`, `year_exp`, `comments`)
VALUES ('4', '3', '23.45', '') 
```

它正在产生错误：

```
1 row inserted.
Warning: #1264 Out of range value for column 'year_exp' at row 1
year_exp column is of datatype decimal(2,2) 
```

请帮我找出错误。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-08T14:18:12.870

我相信您遇到此错误是因为该`year_exp`字段是`DECIMAL(2,2)`，并且您想要`DECIMAL(4,2)`。`DECIMAL(2,2)`表示精度为 2 的数字，最多保留 2 位小数。但是这个数字有 4 位精度。

这个指向 MSDN 的链接讨论了小数精度。

[http://msdn.microsoft.com/en-US/library/ms187746(v=SQL.90).aspx](http://msdn.microsoft.com/en-US/library/ms187746(v=SQL.90).aspx)

这是一个具有类似结果的快速测试（在 SQL Server 2008 中完成，但我认为您使用的是 MySQL ......）

1）创建一个带有测试列的表：

```
CREATE TABLE testtable (testcolumn DECIMAL(2,2)) 
```

2）运行插入语句...：

```
INSERT INTO testtable (testcolumn) VALUES (23.45) 
```

...并收到此错误...

> 消息 8115，级别 16，状态 8，第 1
> 行将数字转换为数字数据类型的算术溢出错误。

（评论：我最喜欢的错误之一......“无法将数字转换为数字......”哈哈）

3) 将色谱柱更改为适当的规格

```
ALTER TABLE testtable ALTER COLUMN testcolumn DECIMAL(4,2) 
```

4) 重新运行相同的插入语句。有用。

请让我知道这可不可以帮你。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-08T14:14:22.040

将字段类型更改为`decimal(4,2)`. 详细信息：[https ://dev.mysql.com/doc/refman/5.7/en/precision-math-decimal-characteristics.html](https://dev.mysql.com/doc/refman/5.7/en/precision-math-decimal-characteristics.html)

> DECIMAL 列的声明语法是 DECIMAL(M,D)。MySQL 5.7 中参数的取值范围如下：
> 
> M 是最大位数（精度）。它的范围是 1 到 65。
> 
> D 是小数点右侧的位数（刻度）。它的范围是 0 到 30，并且不能大于 M。

# php - 具有自身属性的特征

> ID：14216644
> 
> 赞同：4
> 
> 时间：2013-01-08T14:05:18.727
> 
> 标签：php, traits

PHP 特征的目标是管理一堆逻辑。但是，使这堆逻辑根据一些专用属性工作并避免命名冲突的最佳方法是什么？

我正在考虑 MVC，尤其是模型类。事实上，模型似乎是特征的良好候选者。模型可以实现树形结构、可起草、可修订、可移动等。

我想写这样的东西：

```
class MyModel extends Model {
    use Tree, Revision, Slug;
    protected $_behaviors = array(
        'Tree' => array('parentFieldname' => 'p_id'),
        'Revision' => array(/* some options */),
        'Slug' => array(/* some options */)
    );
    public function __construct() {
        foreach($this->_behaviors as &$options) {
            $options += /* trait defaults ? */
        }
    }
} 
```

如果我打算像这样设置 Tree 特征：

```
trait Tree {
    protected $_defaults = array(
        'parentFieldname' => 'parent_id',
        /*...other options...*/
    );
    public function moveUp();
    public function moveDown();
    public function setParent(); //<- need the `'parentFieldname' => 'p_id'`attribute
    /*...and so on...*/
} 
```

我将讨论命名冲突，`$_defaults`因为每个特征都需要自己的默认值。使用 trait 的名称作为属性名称意味着使用类似`(new ReflectionClass(__CLASS__))->getTraits())`... 这不是真的很棒。

换句话说，有没有办法用“可覆盖的默认值”创建特征并避免命名冲突？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T14:07:49.543

就像您在每个 OOP 概念中都会做的那样：睁开眼睛！这完全一样，因为您扩展了一个类并滥用了已经存在的属性。而已。

```
class A {
  protected $defaults = array ('foo' => 'bar');
}
class B extends A {
  protected $defaults = array('foo2' => 42); // Bum: 'foo' disappeared
} 
```

无论如何，拥有一个通用的`$_defaults`-property 对我来说听起来像是一种代码味道：什么“默认值”？这是默认的？系统默认？应用程序默认值？[1] 用值设置你的类，而不是“默认值”，因为那是（传播默认值）初始化过程的东西，或者*具体*属性的初始化（`public $parentFieldName = 'parent_id';`）

```
trait A {
  public $parentFieldName = 'parent_id';
  public function construct ($options) { /
     if (isset($options['parentFieldName'])) {
       $this->parentFieldName = $options['parentFieldName'];
     }
  }
}
class Foo {
  use A {
    A::construct as protected constructA;
  }
  public function __construct ($options) {
    $this->constructA($options['A']);
  }
} 
```

一些注意事项：*重要*的是，您使用别名`construct()`是因为它也会与其他方法（来自其他特征）发生冲突，并且`construct()`不是特殊方法。它只是以这种方式命名（来自我）以澄清，它是“一种”构造函数。当然，其他名称`init()`也可以使用；）您必须自己在“真正的”构造函数中调用它（参见`Foo::__construct()`参考资料）。

[1] “默认”作为标识符就像“类型”、“状态”、“i”、...：它们是通用的以便有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-06T14:21:07.873

有几种技术`multiple inheritance`是灵丹妙药，但它们在 PHP 中是不可行的。

当你试图做这样的事情时，关于保留复杂设计模式以保持简单的整个哲学都是在背后捅你一刀。

是的，`Traits`被介绍了，这可能是一个强大的工具，但正如你所看到的，它在很多情况下都是无用的，因为没有`conflict resolution`或`aliases`for `properties`。

不过还有一个选择，看看`Aspect-Oriented Programming(AOP)`。很多人在掌握它时遇到问题，但我建议任何人深入研究它，这是一个在未来几年将变得非常重要的范例（即使对于 PHPers）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T14:13:33.220

当他们需要从添加的类中获取信息时，您可以在您的 trait 中使用`init`or方法。`setOptions`然后，您可以从您的方法中调用此`__construct`方法。

真正的问题是特征属性和类属性之间不能有冲突，这会导致致命错误。没有冲突解决，就像方法名称中的那样。

最简单的事情是有这样的东西：

```
trait Tree {
    protected $Tree_options; // Prefixing with the trait name should protect you from naming collision (less than optimal)
    public function init($options) {
        // This should be called int he __construct of MyModel
        $this->Tree_options = array_merge($this->Tree_options, $options);
    }
    public function moveUp();
    public function moveDown();
    public function setParent() {
        $parent = $this->Tree_options['p_id'];
    };
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-02T12:11:28.330

我在我的实现中遇到了类似的问题。我必须扩展 Controller 类来创建我的孩子，但它也需要具有动态特性，因为并非所有动态都是控制器，我不想用相同的代码编写 ControllerDynamic 和 nonControllerDynamic在里面。我遇到了一个问题，即在 trait 中定义
的数组：被 trait as 使用，然后不能在 Child 中被覆盖。你遇到的同样的问题。我们找到了 3 个选项。 `trait->$allowedCallbackNames``if(in_array(name, $this->allowedCallbackNames))`

1.  使用方法代替（它们可以被覆盖，并且使用它可以避免碰撞`use trait {... as ...};`，它允许将特征方法重新定义为其他名称（`use trait {oldmethod as newmethod;}`）
2.  在 trait 中使用 trait 定义的 set/get 逻辑来（重新）定义子级的属性，而不是子级私有
3.  将整个行为更改为使用可调用的钩子，使用 null 钩子表示默认行为（这更有意义，考虑到我们决定默认应该是允许任何回调名称）

首先不要在 trait 中使用上面的代码，而是使用`if ($this->isInAllowedCallbackNames)`，然后按照最初的意图在 trait 中定义属性`private $fullTraitName_allowedCallbackName`。在 中添加 in_array 逻辑`trait->isInAllowedCallbackNames function`，然后不覆盖 Child 中的属性，而是覆盖方法（可能使用您在 child 中定义的数组，如果需要调用重新定义的 parent/trait 方法来扩展行为）。

第二个选项只需将`public function getAllowedCallbackNames()`和添加`public function setAllowedCallbackNames()`到特征，然后在`init`函数中调用它们以将默认值设置为`array_merge(getAllowedCallbackNames(), array(<new names>))`

第三个选项是我选择的那个，因为我想要第一个选项，但我认为 PHP 的冲突避免方法会使代码更加混乱（在 delation 时更改函数名称是不好的）。因此，我创建`trait->$methodFilter=null`了一个函数`trait->setMethodFilter($callable)`，它将可调用对象分配给 methodFilter（如果不可调用，则抛出异常），然后在我使用的特征中`if ((is_callable($this->methodFilter)?$this->methodFilter($name):true))`

# javascript - 在 Javascript / Ajax 和 DOM 中设置事件处理程序

> ID：14216645
> 
> 赞同：0
> 
> 时间：2013-01-08T14:05:22.127
> 
> 标签：javascript, dom, javascript-events

我有一个从 MySQL 中提取一组缩略图并显示它们的站点。

用户通过单击选择其中一张图像，并显示图像的较大（中间）版本以及相关描述。此图像放置在占位符 div ( `tablediv`) 中，而描述则放在另一个中。中等大小图像的数据和描述通过 Ajax 使用 XMLHttpRequest 读取。到现在为止还挺好。

我想要做的是在中间图像上设置一个单击事件处理程序，如果用户想要查看大图像，它将在新窗口中打开一个全屏大小的图像。

使用本文中包含的代码，显示中间尺寸的图像并`onclick`立即执行事件的目标函数。我已将用于打开新窗口的原始代码替换为警报，仅用于调试目的。图像设置的代码如下：

```
list = xhr.responseXML.getElementsByTagName('work'); 
for (var i = 0; i < list.length; i++)  {
    var workimage = (list[i].getElementsByTagName("wworkimg")[0].childNodes[0].nodeValue);
    var wheight   = (list[i].getElementsByTagName("wworkimgh")[0].childNodes[0].nodeValue);
    var wwidth    = (list[i].getElementsByTagName("wworkimgw")[0].childNodes[0].nodeValue);
    var wshape    = (list[i].getElementsByTagName("wworkimgs")[0].childNodes[0].nodeValue);
    wkimage = workimage;
    var img = document.createElement('img');
    img.id = 'img';
    img.src = workimage;
    img.alt = 'image';
    img.width = wwidth;
    img.height = wheight;
    document.getElementById("tablediv").appendChild(img);
    document.getElementById("img").onclick = newWindow(wkimage,wheight,wwidth,wshape);
} 
```

函数编码如下

```
function newWindow(wkimage,wheight,wwidth,wshape) {
    alert("NewWindow");
    return false;
} 
```

当我使用 Firebug 并检查 onclick 属性时，它为空，而所有其他变量值似乎都是正确的。我已经在我的书中阅读了这个问题，并参考了在线手册，我看到的所有例子似乎都与我的案例无关。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:07:21.037

快速查看您的代码，我建议这样做：

```
document.getElementById("img").onclick = function() {
    newWindow(wkimage,wheight,wwidth,wshape);
} 
```

但似乎您还需要一个额外的闭包，因为您在循环中分配处理程序。所以：

```
document.getElementById("img").onclick = (function(wkimage,wheight,wwidth,wshape){
    return function() {
        newWindow(wkimage,wheight,wwidth,wshape);
    }
}(wkimage,wheight,wwidth,wshape)); 
```

* * *

现在，你`document.getElementById("img")`真的很奇怪。您正在循环中创建多个具有相同 id 的元素，我建议您这样做`img.id = 'img' + i;`，并将`getElementById`调用更改为`document.getElementById("img" + i)`.

# mysql - 如何从两个以上的表中收集数据并将结果放入一个新表中

> ID：14216646
> 
> 赞同：0
> 
> 时间：2013-01-08T14:05:25.490
> 
> 标签：mysql, sql, database

我有三张桌子...

第一个表**`Parameter_value_archive`**的列如下：

*   `Para_id`,
*   `para_value`,
*   `created_date`,
*   `meter_id`.

Sec 表**`meter_primary_master`**的列如下：

*   `meter_name`,
*   `meter_id`.

第三个表**`parameter_master`**的列如下：

*   `para_name`,
*   `para_id`.

我想从这三个表中收集数据并将其放入一个新的表名**`Meter_specs`**中，其列如下：

*   `created_date`,
*   `meter_id`,
*   `meter_name`,
*   `para_name`,
*   `para_id`,
*   `para_value`.

这个怎么办？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:20:58.630

要创建具有与 select 子句相同的表定义的新表，请`CREATE TABLE ... AS SELECT ...`像这样使用：

```
CREATE TABLE Meter_specs
AS
SELECT 
  ar.created_date,
  m.meter_id,
  m.meter_name,
  p.para_name,
  p.para_id
FROM Parameter_value_archive ar
INNER JOIN meter_primary_master m ON ar.meter_id = m.meter_id
INNER JOIN parameter_master     p ON p.para_id = ar.para_id = p.para_id; 
```

这将创建一个`Meter_specs`包含列的新表：

*   `created_date`,
*   `meter_id`,
*   `meter_name`,
*   `para_name`,
*   `para_id`.

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/12e86/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:16:41.063

做一个插入到选择...。选择应该加入三个表，提取你想要的字段。请参阅文档：[http ://dev.mysql.com/doc/refman/5.0/en/insert-select.html](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)

# wordpress - Wordpress 将非 www 重定向到主页

> ID：14216649
> 
> 赞同：0
> 
> 时间：2013-01-08T14:05:37.367
> 
> 标签：wordpress

我的 wordpress 网站的设置是这样的，每当您从 url 中删除 www 时，它都会返回主页。

出于 SSL 的原因，我需要在没有 www 的情况下访问单个页面。

让我们称之为 test.org/page

是否可以在我的 htaccess 中放入自定义重定向，以便将 www.test.org/page 重定向到 test.org/page？我正在使用带有重定向插件和多站点的旧版 wordpress。

这是我当前的 htaccess：

```
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]

# uploaded files
RewriteRule ^([_0-9a-zA-Z-]+/)?files/(.+) wp-includes/ms-files.php?file=$2 [L]

# add a trailing slash to /wp-admin
RewriteRule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule  ^([_0-9a-zA-Z-]+/)?(wp-(content|admin|includes).*) $2 [L]
RewriteRule  ^([_0-9a-zA-Z-]+/)?(.*\.php)$ $2 [L]
RewriteRule . index.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:25:00.440

.htaccess 文件看起来不错，我会保持原样，但在后端检查您的：

设置 -> 常规

并确保您的 WordPress 地址 (URL) 和站点地址 (URL)**均不**包含 www。

希望这可以帮助 ;）

# android - 主题更改时缺少操作栏

> ID：14216653
> 
> 赞同：3
> 
> 时间：2013-01-08T14:05:44.217
> 
> 标签：android, android-theme

我正在尝试在运行时更改应用程序主题，因此我将**android:theme**标记添加到我的清单文件中，将其从 Holo 更改为 Holo.Light 并且我可以工作，唯一的问题是操作栏没有显示有了新的主题

谁能告诉我我错过了什么，谢谢

```
<application android:label="@string/app_name"
             android:icon="@drawable/ic_launcher"
             android:theme="@style/AppTheme"> 
```

[更新] 按要求添加了 AppTheme

```
<resources>

    <style name="AppTheme" parent="android:Theme.Light" />

</resources> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T14:14:46.133

您正在覆盖 ActionBar 样式。您应该使用以下方法扩展基础`Holo`或`Holo.Light`主题：

```
<style name="AppTheme" parent="android:Theme.Holo.Light"> 
```

# javascript - JQuery Condition If Else 在 else 中的错误

> ID：14216656
> 
> 赞同：2
> 
> 时间：2013-01-08T14:05:53.000
> 
> 标签：javascript, jquery

我试图隐藏下一个按钮`div`，直到其中的输入被填充，所以我添加了以下代码：

```
<script>
    $(document).ready(function () {
        if ($('#myDiv').val().length == 0) {
            $('#next_btn').hide();  
        } else {    
            $('#next_btn').show();      
        }
    });
</script> 
```

这是我的Div

```
<textarea id="myDiv"></textarea> 
```

如果隐藏下一个按钮`div`但是当我填充输入时`#myDiv`没有`#next_btn`显示出来。

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T14:11:01.313

## 将更改事件处理程序附加到您的输入

你只是最初隐藏你的下一个元素。您还应该重新检查输入值的每次更改。试试这个：

```
$(function(){
    // bind a change event handler
    $('#myDiv').change(function(){
        this.value.length && $('#next_btn').show() || $('#next_btn').hide();
    }).change(); // set initial state
}); 
```

我没有使用`if`语句，因为您在每种情况下都在做简单的一句话。我宁愿用布尔表达式替换它。Javascript 引擎的布尔执行将确保只执行一个 jQuery 选择器，因此也不需要缓存下一个按钮元素。

您当然可以用这样的方式替换该单行`if`：

```
if (this.value.length)
{
    $('#next_btn').show();
}
else
{
    $('#next_btn').hide();
} 
```

## 不要忘记初始化状态

附加更改事件并不是一切。您还需要在页面加载（或准备就绪）时设置初始状态。我的代码通过最后一次调用`.change()`. 这意味着它首先注册处理程序，然后也调用它。

## 超级简化的解决方案：使用`toggle`布尔参数

整个事情可以用这个代替：

```
$(function(){
    // bind a change event handler
    $('#myDiv').change(function(){
        $('#next_btn').toggle(!!this.value.length);
    }).change(); // set initial state
}); 
```

## 更改事件可以吗？

更改事件可能不满足您的要求，因为它在字段失去焦点后触发。也许您应该改用`keypress`or`keyup`事件。但解决方案保持不变。只需替换事件处理程序绑定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T14:08:55.537

我假设#myDiv 是输入标签？还是div里面有输入？尝试这个：

```
 var textarea = $("#myDiv");
 textarea.change(function(){
      if(this.value.length == 0)
           textarea.hide();
      else
           textarea.show();
 }); 
```

这将在输入*更改*时运行 if 。每次更改时重新运行代码很重要，因为长度在变化！

（注意，给 myDiv 一个更好的名字可能是明智的，因为它不是真正的 div 而是 textarea。）

更新以删除额外的 jquery 选择

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T14:15:39.037

这就是它可以在短时间内完成的方法。

*HTML：*

```
<div id="myDiv">
  <input value="Test" />
</div>
<button id="next_btn">Next</button> 
```

*JavaScript：*

```
$(function() {
    $("#myDiv input").on("keyup", function() {
        $("#next_btn").toggle($.trim(this.value).length > 0);
    });
}); 
```

**演示：http:** [//jsfiddle.net/LYtbJ/](http://jsfiddle.net/LYtbJ/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T14:08:50.623

假设输入直接在里面`myDiv`，我认为你的意思是：

```
if ($('#myDiv > input').val().length == 0) {
    $('#next_btn').hide();
} else {
    $('#next_btn').show();
} 
```

您正在尝试检查输入而不是 div 的值（据我所知，这是不可能的）。

或者您可以进一步简化它并`!$('#myDiv > input').val()`代替`$('#myDiv > input').val().length == 0`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T14:10:04.453

您是否将这段代码放在 onchange 函数中？

```
$(document).ready(function() {
    $('#myDiv').change(function() {
        if(this.value.length == 0) {
            $('#next_btn').hide();
        } else {
            $('#next_btn').show();
        }
    });
}); 
```

这行得通吗？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-08T14:11:14.720

我认为您将 DIV ( `#myDiv`) 与输入按钮混淆了：

```
if( $('#myDiv').find('.my-input-class').val().length == 0 ) {
    $('#next_btn').hide();
} else {
    $('#next_btn').show();
} 
```

在这里，我假设您的输入有一个类 'my-input-class' 并使用 find() 来抓取它。另外，我假设您有一个事件来监听用户在您的输入框中输入的内容。干杯。

# model-view-controller - 如何构建一个包含多个控制器的非平凡 Symfony2 网站？

> ID：14216669
> 
> 赞同：0
> 
> 时间：2013-01-08T14:06:27.577
> 
> 标签：model-view-controller, symfony, event-handling

我正在计划一个基于 symfony2 的网站。默认布局将由以下块组成：

*   主标题菜单
*   辅助侧菜单
*   页脚中的站点地图
*   登录表格
*   搜索
*   投票问题
*   购物车

对于每个部分，我都知道如何通过编写控制器和 Twig 模板在 Symfony2 中编写代码。对于某些部分，我计划使用诸如[FOSUserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle)之类的包，它提供了自己的控制器。

我找不到好的答案是：*我怎样才能让这一切一起跳舞？*如果它们的路由被触发并返回响应，我的 primary-header-menu 包或 FOSUserBundle 会升级。但这没用。我需要一些东西，所有这些构建块都可以处理并（几乎）渲染它们的部分，而不管触发了什么路由。

这对表单特别有趣。如果提交了表单，则应通过适当的操作对其进行处理。但之后所有其他块应在返回整个页面之前呈现其内容。

如果你知道[Drupal](http://drupal.org/)：我可以在一个块中实现一个表单。我只处理这个块，不必关心页面上的所有其他内容。

如果你知道[Java/SWING](http://docs.oracle.com/javase/tutorial/uiswing/index.html)：我可以将一个动作或一个对话框实现为一个自包含的东西。该框架负责使其他所有内容保持最新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:51:52.053

如果我对您的理解正确，您想在您网站不同区域的页面上显示不同的块，对吗？

如果是这种情况，请在您的 layout.html.twig（或 base.html.twig，或任何您可能称呼的名称）中设置您想要包含在页面上的块

示例 layout.html.twig：

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Acme Example Page</title>
    </head>
    <body>
        <div id="sidebar">
            <div id="sidebar-menu-block" class="block">
                {% include 'AcmeBundle:Sidemenu:sideMenu.html.twig' %}
            </div>
            <div id="sidebar-cart-block" class="block">
                {% render url('acme_shopping_cart_block_url') %}
            </div>
            <div id="sidebar-poll-block" class="block">
                {% render url('acme_poll_block_url') %}
            </div>
        </div>

        <div id="content">
            {% block body %}{% endblock %}
        </div>
    </body>
</html> 
```

如果要包含扁平树枝模板，请使用“包含”。如果您需要在加载前需要处理的块，请使用“渲染”。

示例页面（即：AcmeUserBundle:Registration:register.html.twig）：

```
{% extends 'layout.html.twig' %}

{% block body %}
<h1>My Page with a form!</h1>
<form>
   {{ form_widget(form) }}
   <input type="submit" value="Save" />
</form>
{% endblock body %} 
```

上面的示例将使用 layout.html.twig 中定义的所有块包围您的 register.html.twig。查看 symfony 文档的“包含其他模板”部分：http: [//symfony.com/doc/2.0/book/templating.html#include-other-templates](http://symfony.com/doc/2.0/book/templating.html#including-other-templates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T15:46:23.343

如果你想包含将调用其他复杂渲染的复杂块，Twig 包含是不够的。我认为您应该查看依赖注入器、服务等。例如，您可以创建一个 Twig 服务，从您的数据库中获取最后一个“投票问题”并很好地显示它。如果您对某些代码感兴趣，请随时发表评论。

# performance - 在哪种情况下 Scala 2.10.0 编译器可以比 2.9.2 更快或更慢？

> ID：14216676
> 
> 赞同：7
> 
> 时间：2013-01-08T14:06:55.500
> 
> 标签：performance, scala, scala-2.10, scala-2.9

我对 Scala 2.10.0 和 2.9.2 的编译时间进行了基准测试，发现**2.10.0 的编译时间**比 2.9.2 长。

在什么情况下会发生？或者由于某些原因，Scala 2.10.0 编译器通常会比 2.9.2 慢吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:45:38.707

在初始 sbt start + clean/compile 2.10 似乎比 2.9.x 快

但是，在 2.10 的后续清理/编译周期中，时间保持不变，这与 2.9.x 不同的是，缓存来拯救并显着减少清理/编译周期。

例如，我在 2.9.2 和 2.10（37 scala，6 java）上都有一个核心项目设置

2.9.2 项目在初始清理/编译时需要 @50 秒；此后最多 15 到 20 秒

```
[warn] 6 warnings found
[success] Total time: 16 s 
```

2.1.0 项目在初始清理/编译时需要 @40 秒；@40 秒后。

```
[warn] 14 warnings found
[success] Total time: 45 s 
```

应该注意2.9.2项目产生6个警告；2.10 项目，14 个警告。

很高兴在这个线程中看到其他结果，只是刚刚开始测试。

不期待将整个应用程序转换为 2.10 - 当前构建时间是 2.9.2 上的 @100 秒；如果上述趋势成立，2.10 应该是 200-300+ 秒，哎呀。

# c++ - 对象组合 - 无法访问对象属性

> ID：14216679
> 
> 赞同：1
> 
> 时间：2013-01-08T14:07:02.663
> 
> 标签：c++, object-composition

嗨，我对对象组合有疑问。CInvoice 类内部需要有一个 CCustomer 对象，所以我创建了一个需要客户的构造函数。

在 Invoice.h 文件中有一行：

```
CCustomer *customer; 
```

提到的构造函数如下所示：

```
CInvoice::CInvoice(CCustomer Customer)
{
   customer = &Customer;
} 
```

当我尝试在发票上打印客户姓名时，它会返回一些随机字符

```
CCustomer customer("McDonalds", "Boston, Massachusetts", 4);
CInvoice invoice(customer); 

cout << "Customer:" << customer.GetName() << endl; //it prints "McDonalds"
cout << "Invoice.Customer:" << invoice.customer->GetName() << endl; // it prints random characters 
```

我是否正确实现了对象组合？

另外我有一个类 CInvoiceElement 并且有一个关于它的问题。我应该在不创建发票对象的情况下创建发票元素还是相反？哪个更符合逻辑？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T14:08:13.673

您应该在构造函数中传递指向 CCustomer 的指针，否则您将获取用作构造函数参数的 CCustomer 副本的地址。

下面是代码的样子：

```
CInvoice::CInvoice(CCustomer* _customer)
{
   customer = _customer;
}

.... 
CCustomer customer("McDonalds", "Boston, Massachusetts", 4);
CInvoice invoice(&customer); 

cout << "Customer:" << customer.GetName() << endl; //it prints "McDonalds"
cout << "Invoice.Customer:" << invoice.customer->GetName() << endl; // it prints random characters 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T14:10:14.467

```
CInvoice::CInvoice(Customer customer)
{
   customer = &Customer;
} 
```

当您调用此方法时，会发生以下情况：

*   你打电话`CInvoice(customer)`
*   客户的副本作为参数被压入堆栈
*   该副本的地址分配给`Customer *customer`;
*   构造函数结束
*   堆栈被释放，客户参数变为无效指针
*   `Customer *customer`因此指向垃圾

您应该做的是在堆上分配 Customer 并传递一个指针，例如。

```
Customer *customer = new Customer();
CInvoice *invoice = new CInvoice(customer);

CInvoice::CInvoice(Customer *customer) {
  this->customer = customer;
} 
```

通过这种方式，您的客户实例被分配在堆中，并且它保留了您声明它的范围。izomorphius 给出的示例也适用，但是 Customer 是范围的本地（它会自动分配到堆栈上），一旦您退出函数的范围，内部的指针`CInvoice`就会变得无效。我希望你能有所作为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:17:04.870

这不会改变你的代码的其余部分..

```
CInvoice::CInvoice(CCustomer &Customer)
{
   customer = &Customer;
} 
```

但也许你知道？

在 Invoice.h 文件中有一行：

```
CCustomer customer; 
```

提到的构造函数看起来像这样？？：

```
CInvoice::CInvoice(const CCustomer &Customer)
: customer(Customer)
{
} 
```

# android - Android 调试器不附加发送意图？

> ID：14216687
> 
> 赞同：0
> 
> 时间：2013-01-08T14:07:24.613
> 
> 标签：android, adb

在我的应用程序中，当我将断点设置为任何其他活动时，调试器工作，并且每次我在调试模式下运行时，调试器都会附加并显示在我的设备屏幕上。

现在奇怪的问题是当我使用发送意图调试器时没有出现在该代码中或没有在断点处停止:(

**我已经做了足够的研究：** 1）通过将错误图标附加到进程。2）我的设备在设置中设置为调试usb。3）已尝试重新启动 ADB 4）已尝试重新启动 Eclipse，机器

没有任何效果。

**我的清单文件**

```
<action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" android:debuggable="true" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
         <activity android:name=".MyShareMenu">
           <intent-filter>
               <action android:name="android.intent.action.SEND"></action>
               <data android:mimeType="*/*" ></data>
               <category android:name="android.intent.category.DEFAULT"></category>
           </intent-filter>
       </activity>
    </application> 
```

请指导我可能是什么问题？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:28:34.493

正如我在上面的步骤中已经提到的那样，我至少尝试了一切来使调试器工作。

最后我通过重启手机解决了这个问题：）它是有线的，但它解决了我的问题。

# roles - 如何在 yii 中创建访问（查看页面）角色？

> ID：14216692
> 
> 赞同：2
> 
> 时间：2013-01-08T14:07:47.557
> 
> 标签：roles, access-rules, getstate

如何在 yii 中创建访问角色以及在 yii 应用程序部分的位置？

我想在 yii 应用程序中创建访问角色，但我有一个问题，不知道在 yii 中分配角色的位置，就像我有三个部门角色一样：

1.admin -: admin 在我们的应用程序中拥有所有访问权限

2.staff -: 页面和访问角色相同的员工，喜欢编辑或更新

3.user -: 用户拥有只能在我们的应用程序中查看的所有访问页面

这些类型的角色可以在控制器中设置，但我可以证明在 yii 中写入所有访问权限的位置以及如何设置访问角色，

我在控制器中尝试了这种类型的代码，在这里我在会话中扮演了角色，我使用这个：

**admin 但这不能访问这些类型的页面并显示错误消息（annotharization action ）**

```
 echo Yii::app()->user->getState('roles'); 
    public function accessRules()
   {
      return array(  
           array('allow', //allow admin user to perform 'index'&'view' actions
                'actions'=>array('index','view'),
                'users'=>array('admin'),
                'roles'=>array('admin'),
                ),
      );
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:53:18.663

Yii 通过它的 CWebApplication ->authManager 应用组件实现了一个分层的 RBAC 方案，看看这个[wiki](http://www.yiiframework.com/wiki/136/getting-to-understand-hierarchical-rbac-scheme/)

# ruby-on-rails - rake db:migrate VERSION=0 表不存在

> ID：14216698
> 
> 赞同：5
> 
> 时间：2013-01-08T14:08:00.850
> 
> 标签：ruby-on-rails

我正在关注 Lynda ruby​​ on rails 教程。经过几次不成功的尝试后，我已经运行了代码“rake db:migrate”。然后我被告知运行“rake db:migrate VERSION=0”。这再次给了我错误，这次我无法修复它。我昨晚和今天早上都试过了，但无济于事。

请记住，在回答我是编码新手时，请以新手可以理解的方式进行解释。

```
lexi87$ rake db:migrate VERSION=0
==  AlterUsers: reverting =====================================================
-- remove_index("admin_users", "username")
rake aborted!
An error has occurred, all later migrations canceled:

Index name 'index_admin_users_on_username' on table 'admin_users' does not exist
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/schema_statements.rb:587:in `index_name_for_remove'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/schema_statements.rb:366:in `remove_index'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.9/lib/active_record/migration.rb:466:in `block in method_missing'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.9/lib/active_record/migration.rb:438:in `block in say_with_time'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.9/lib/active_record/migration.rb:438:in `say_with_time'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.9/lib/active_record/migration.rb:458:in `method_missing'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.9/lib/active_record/migration.rb:334:in `method_missing'
/Users/lexi87/Sites/simple_cms/db/migrate/20130108015542_alter_users.rb:14:in `down'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.9/lib/active_record/migration.rb:376:in `down'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.9/lib/active_record/migration.rb:410:in `block (2 levels) in migrate'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.9/lib/active_record/migration.rb:410:in `block in migrate'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:129:in `with_connection'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.9/lib/active_record/migration.rb:389:in `migrate'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.9/lib/active_record/migration.rb:528:in `migrate'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.9/lib/active_record/migration.rb:720:in `block (2 levels) in migrate'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.9/lib/active_record/migration.rb:777:in `call'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.9/lib/active_record/migration.rb:777:in `ddl_transaction'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.9/lib/active_record/migration.rb:719:in `block in migrate'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.9/lib/active_record/migration.rb:700:in `each'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.9/lib/active_record/migration.rb:700:in `migrate'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.9/lib/active_record/migration.rb:574:in `down'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.9/lib/active_record/migration.rb:555:in `migrate'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.9/lib/active_record/railties/databases.rake:179:in `block (2 levels) in <top (required)>'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/bin/ruby_noexec_wrapper:14:in `eval'
/Users/lexi87/.rvm/gems/ruby-1.9.2-p320/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => db:migrate
(See full trace by running task with --trace) 
```

这是 rb 文件。

```
class AlterUsers < ActiveRecord::Migration

  def self.up
    rename_table("users", "admin_users")
    add_column("admin_users", "username", :string, :limit => 25)
    change_column("admin_users", "email", :string, :limit => 100)
    rename_column("admin_users", "password", "hashed_password")
    add_column("admin_users", "salt", :string, :limit => 40)
    puts "*** About to add an index ***"
    add_index("admin_users", "username")
  end

  def self.down
       remove_index("admin_users", "username")
       remove_column("admin_users", "salt")
       remove_column("admin_users", "hashed_password", "password")
       remove_column("admin_users", "email", :string, :default => "", :null => false)
       remove_column("admin_users", "username")
       rename_table("admin_users", "users")
  end

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T14:17:44.153

**rake db:migrate VERSION=0**回滚所有迁移

错误明确表示

```
Index name 'index_admin_users_on_username' on table 'admin_users' does not exist 
```

我怀疑您实际上试图回滚从未应用过的迁移，以便索引不存在。或者您在应用迁移后对其进行更改。我的建议是删除数据库，再次创建并应用所有迁移。

```
rake db:drop
rake db:create
rake db:migrate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:15:02.433

您正在删除不存在的索引。始终使用以下顺序：

1) 耙分贝：创建

2) 耙分贝：迁移

同样在您遇到错误的情况下，请记住`rake db:migrate VERSION=0`将删除所有迁移，如果这是您尝试执行的操作，并且由于之前没有索引，因此它将通过错误..

我还怀疑您`database.yml`包含 mysql 设置的文件具有错误的凭据，尤其是`username`and的设置`password`。检查并更正它，然后进行迁移。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-01T05:55:03.817

猜测 1\. 你不能跳回其他版本（它总是在终端上显示错误）。2\. 你也不能'rake db:rollback' 3\. 你也不能'rake db:migrate down'。4\. 你正在使用 MySQL。

深呼吸，尝试这样做。

A. 打开终端应用程序，然后键入。

```
rake db:drop 
```

之后，尝试查看您的数据库。必须没有“您的数据库”。

B. 为 MySQL 重新创建数据库（直接使用 MySQL 命令或跟进 Rake 命令）

```
CREATE DATABASE database_name; 
```

耙子

```
rake db:create 
```

正如尤金先生在上面回答的那样。

C. 进行迁移，转到终端并输入。

```
rake db:migrate 
```

之后，您应该登录到您的数据库以检查其上的任何活动。

# mysql - 实体框架和 MySQL - 不返回受影响的行数

> ID：14216699
> 
> 赞同：2
> 
> 时间：2013-01-08T14:08:02.217
> 
> 标签：mysql, entity-framework

我有一个通过 DBContext 调用的存储过程，如下所示：

```
using (var transScope = new TransactionScope(TransactionScopeOption.Required, new TimeSpan(0)))
{
   using (var db = new IceCreamEntities(connectionString, null, null))
   {
      db.CallMyProc(dateTime);
      var num = db.SaveChanges();
   }
   transScope.Complete();
} 
```

**编辑**：proc根据传入的日期时间值和数据库中已知的一些其他信息删除一些行。

proc 肯定有效 - 我的集成测试验证表在执行 proc 后具有正确的行数 - 但对于受影响的行数，我总是返回 0。

想法？

我正在运行：EF 4.3、MySQL 5.5.28、MySQL 连接器 6.5.4

* * *

**已解决：请参阅下面的答案。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:48:13.297

**解决了：**

好吧，所以答案是忽略 db.SaveChanges() 的返回，而是使用调用过程本身返回的值。所以，现在看起来是这样的：

```
using (var transScope = new TransactionScope(TransactionScopeOption.Required, new TimeSpan(0)))
{
   using (var db = new IceCreamEntities(connectionString, null, null))
   {
      var num = db.CallMyProc(dateTime);  //<<<<<< set it here instead
      db.SaveChanges();
   }
   transScope.Complete();
} 
```

我的测试中有一个错误使 db.CallMyProc 调用也返回 0，因此这掩盖了调用确实返回了受影响的行数的事实。

仍然不确定为什么 SaveChanges 没有，但无论如何。

# jquery - Twitter Bootstrap Carousel 中每张幻灯片的淡入淡出内容

> ID：14216703
> 
> 赞同：2
> 
> 时间：2013-01-08T14:08:15.620
> 
> 标签：jquery, twitter-bootstrap, carousel

使用以下代码，我得到“#featured-carousel”的内容以淡入和淡出幻灯片 2、3 等。
但是，不适用于第一张幻灯片。
我如何让第一张幻灯片第一次淡入和淡出？

```
<script type="text/javascript">
        jQuery(document).ready(function($) {

            var color = "<?=$color?>";
            var header_color = "<?=$header_color?>";        

            $('#featured-carousel').bind('slide', function() {
                $(".carousel-caption").animate({'opacity': 0}, 500).delay(2000);  
                $(".item img").animate({'opacity': 1}, 500).delay(2000);          
                $(".carousel-caption").animate({'opacity': 1}, 500).delay(2000); 
                $(".item img").animate({'opacity': 0.2}, 500).delay(2000);                 
            }); 

            $('#featured-carousel').carousel({
                   interval: 6000,
                      cycle: true,          
            });

        });
    </script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T19:50:47.297

很抱歉，我无法应对您的延误，所以我改用了超时。这样，当手动导航轮播时，动画将被取消。

[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/nXJ8J/)

首先，一些 CSS 使第一个项目看起来像动画的开始，但如果您愿意，可以使用一些 JS 来完成：

```
#myCarousel .carousel-caption {
  opacity: 0;
  filter: alpha(opacity=0);
} 
```

然后是动画部分，分为两个绑定：什么时候开始动画和什么时候需要重置外观：

```
var $carousel = $('#myCarousel');
var $carouselCaptions = $carousel.find('.item .carousel-caption');
var $carouselImages = $carousel.find('.item img');
var carouselTimeout;

$carousel.on('slid', function () {
    var $item = $carousel.find('.item.active');
    carouselTimeout = setTimeout(function() { // start the delay
        carouselTimeout = false;
        $item.find('.carousel-caption').animate({'opacity': 1}, 500);
        $item.find('img').animate({'opacity': 0.2}, 500);
    }, 2000);
}).on('slide', function () {
    if(carouselTimeout) { // Carousel is sliding, stop pending animation if any
        clearTimeout(carouselTimeout);
        carouselTimeout = false;
    }
    // Reset styles
    $carouselCaptions.animate({'opacity': 0}, 500);
    $carouselImages.animate({'opacity': 1}, 500);
});;

$carousel.carousel({
    interval: 6000,
    cycle: true,
}).trigger('slid'); // Make the carousel believe that it has just been slid so that the first item gets the animation 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-16T09:36:36.150

如果你使用 Twitter Bootstrap 3，你需要使用**slide.bs.carousel**代替**slide**和**slid.bs.carousel**代替**slid**

[http://getbootstrap.com/javascript/#carousel-usage](http://getbootstrap.com/javascript/#carousel-usage)事件部分。

# java - 将 h2 数据库上列的默认值更改为当前时间戳

> ID：14216704
> 
> 赞同：5
> 
> 时间：2013-01-08T14:08:20.543
> 
> 标签：java, sql, h2

我有一个 h2 数据库，其架构是通过 JPA/hibernate 自动生成的。现在我想`timestamp`将数据库上的非空类型列更改为默认为当前时间。

我实际上使用[了 trigger](http://www.h2database.com/html/features.html#triggers)，并且可以正常工作，但是我想知道是否有更优雅的方法来实现这一点，例如（以下代码段*不起作用*）

```
ALTER TABLE my_table ALTER COLUMN my_column SET DEFAULT CURRENT_TIMESTAMP; 
```

我查看[了文档](http://www.h2database.com/html/grammar.html#alter_table_alter)并尝试了上述“伪语句”的一些变体，但现在成功了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T14:21:06.277

看起来很接近，您是否尝试过：

```
ALTER TABLE <table name> ALTER COLUMN <column name> SET DEFAULT CURRENT_TIMESTAMP 
```

# c# - 在 SQL 查询期间出现无效的强制转换异常

> ID：14216705
> 
> 赞同：0
> 
> 时间：2013-01-08T14:08:21.283
> 
> 标签：c#, sql

运行网站时出现异常消息

> “无法将‘System.DBNull’类型的对象转换为‘System.String’类型。”

从`'return (string)c.Parameters["@vat"].Value;`以下代码中的 ' 的 'value' 部分出现。我检查了存储过程以查看它是否执行查询，它确实执行并且它的输出也是一个字符串。任何人都可以帮助..??

```
namespace CamOnlineAccess
{
  public class Utilities
  {
    public SqlConnection GetConnection()
    {
        SqlConnection c = new SqlConnection();
        c.ConnectionString = ConfigurationManager.ConnectionStrings["CamOnlineConnectionString"].ConnectionString;
        return c;
    }

    public SqlCommand GetCommandSP(string SPName)
    {
        SqlCommand c = new SqlCommand();
        c.Connection = GetConnection();
        c.CommandType = CommandType.StoredProcedure;
        c.CommandText = SPName;
        c.CommandTimeout = 150;

        return c;
    }
  }
}

public string ViewUserVat(string code)
{
    CamOnlineAccess.Utilities u = new CamOnlineAccess.Utilities();
    SqlCommand c = u.GetCommandSP("dbo.ViewUserVat");

    c.Parameters.AddRange(new System.Data.SqlClient.SqlParameter[] {
        new System.Data.SqlClient.SqlParameter("@code", System.Data.SqlDbType.VarChar,50),
            new System.Data.SqlClient.SqlParameter("@vat",SqlDbType.VarChar, 50, System.Data.ParameterDirection.Output, false, ((byte)(0)), ((byte)(0)), "", System.Data.DataRowVersion.Current, null)});
    c.Parameters["@code"].Value = code;
    c.Connection.Open();
    c.ExecuteScalar();//because we have output parameters
    c.Connection.Close();

    return (string)c.Parameters["@vat"].Value;
 } 
```

循序渐进的程序

```
 ALTER PROCEDURE [dbo].[ViewUserVat] 
-- Add the parameters for the stored procedure here
@code varchar,
@vat varchar(50) output

    AS
SELECT top 1 @vat=vattable from dbo.portfolio 
where owner=@code 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:12:57.713

您直接返回参数值，假设您的存储过程将始终找到参数的记录`@code`并且该列`vattable`永远不会为空。

如您所见，情况并非如此，您得到了`DBNull`回报。
您应该将代码更改为

```
 return (c.Parameters["@vat"].Value == DBNull.Value ? 
              null : 
              c.Parameters["@vat"].Value.ToString()); 
```

当然，假设 a`null`是其余代码的允许/预期返回值。
否则，您可以将 替换为`null`另一个可接受的值（例如 string.Empty）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:10:25.153

您可以使用：

```
return String.Format("{0}",c.Parameters["@vat"].Value); 
```

反而。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:11:13.500

```
return (string)(c.Parameters["@vat"].Value == DBNull.Value
           ? null
           : c.Parameters["@vat"].Value); 
```

# java - 检查表格布局并在必要时更新的有效方法

> ID：14216709
> 
> 赞同：2
> 
> 时间：2013-01-08T14:08:40.550
> 
> 标签：java, mysql, sqlite

我目前正在为游戏构建插件，并且正在使用 SQLite（不过，我也需要使用 MySQL 的解决方案）。我已经发布了一个版本，但我的新版本需要更改表格。

Java中检查表中的所有列是否存在以及它们是否在不丢失数据的情况下更新表的最有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:13:46.180

您可以在新版本的第一次运行时更改表格，或者执行类似的操作

```
try {
  readData();
} catch (SQLException e) {
  // if the cause is missing new columns
  alterTables();
  readData();
} 
```

还有许多其他可能的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:05:02.210

您可以使用[liquibase](http://www.liquibase.org/quickstart)在每个版本之后创建/迁移数据。Liquibase 允许您基于配置文件 (.xml) 创建更改，然后，如果您向配置文件添加更多更改，它将自动为您更新旧数据库

# wpf - 绑定到用户控件依赖属性

> ID：14216714
> 
> 赞同：0
> 
> 时间：2013-01-08T14:08:52.950
> 
> 标签：wpf, mvvm, dependency-properties

我有一个`UserControl`名为的 WPF 项目，它在同一解决方案 `FormattedTextBox`中包含一个和一个 WPF 窗口项目。`TextBox`

我的用户控件有两个这样注册的依赖属性：

```
public static readonly DependencyProperty NumberProperty =  
    DependencyProperty.Register("Number", 
        typeof(double), 
        typeof(FormattedTextBox), 
        new FrameworkPropertyMetadata());  

public static readonly DependencyProperty NumberFormatStringProperty =
    DependencyProperty.Register("NumberFormatString", 
        typeof(string), 
        typeof(FormattedTextBox),
        new FrameworkPropertyMetadata()); 
```

我在主窗口中创建了我的用户控件的实例。主窗口`INotifyPropertyChanged`包含一个名为`MyNumber`. 在主窗口的 XAML 中，我尝试`MyNumber`像这样绑定：

```
Number="{Binding Path=MyNumber,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" 
```

绑定不起作用 - 我从来没有进入用户控件中 Number 属性的 get 或 set 。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:32:01.660

在 XAML 中设置依赖属性时（或通过绑定或动画等），WPF 直接访问底层 DependencyObject 和 DependencyProperty，而无需调用 CLR 包装器。请参阅[XAML 加载和依赖属性](http://msdn.microsoft.com/en-us/library/bb613563.aspx)，自定义依赖属性的含义。

为了获得有关`Number`属性更改的通知，您必须注册一个[PropertyChangedCallback](http://msdn.microsoft.com/en-us/library/System.Windows.PropertyChangedCallback.aspx)：

```
public static readonly DependencyProperty NumberProperty =  
    DependencyProperty.Register("Number", 
        typeof(double), 
        typeof(FormattedTextBox), 
        new FrameworkPropertyMetadata(NumberPropertyChanged));

private static void NumberPropertyChanged(
    DependencyObject obj, DependencyPropertyChangedEventArgs e)
{
    var textBox = obj as FormattedTextBox;
    ...
} 
```

# postgresql - 如何创建不返回任何内容的函数

> ID：14216716
> 
> 赞同：136
> 
> 时间：2013-01-08T14:09:04.170
> 
> 标签：postgresql, function, plpgsql, void

我想用`pl/pgsql`. 我正在使用*PostgresEnterprise Manager v3*并使用 shell 来创建一个函数，但是在 shell 中我必须定义返回类型。如果我不定义返回类型，我将无法创建函数。

如何创建没有返回结果的函数，即创建新表的函数？

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2013-01-08T14:13:54.373

使用`RETURNS void`如下：

```
CREATE FUNCTION stamp_user(id int, comment text) RETURNS void AS $$
    #variable_conflict use_variable
    DECLARE
        curtime timestamp := now();
    BEGIN
        UPDATE users SET last_modified = curtime, comment = comment
          WHERE users.id = id;
    END;
$$ LANGUAGE plpgsql; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-11-23T06:01:54.970

# PostgreSQL 11+：`PROCEDURE`秒

[PostgreSQL 11 引入了`PROCEDURE`s](https://www.postgresql.org/docs/current/sql-createprocedure.html)，它们基本上是什么都不返回的函数，但是用`CALL`而不是调用`SELECT`，

> 如何创建没有返回结果的函数，即创建新表的函数？

像这样，

```
=# CREATE PROCEDURE create_table_foo()
AS $$
  CREATE TABLE foo ( id int )
$$ LANGUAGE sql;

=# CALL create_table_foo();

=# \d foo;
                Table "public.foo"
 Column |  Type   | Collation | Nullable | Default 
--------+---------+-----------+----------+---------
 id     | integer |           |          | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-08T09:51:43.283

函数必须总是返回一些东西，尽管你可以使用像

```
do $$ 
```

并从正常功能开始

```
declare
... 
```

但是如果你仍然想做一个函数，只需在**return**之后添加**void**。

# r - 使用 R 中的 ggplot2 删除图例文本上的过多零

> ID：14216718
> 
> 赞同：0
> 
> 时间：2013-01-08T14:09:07.960
> 
> 标签：r, ggplot2, legend

我添加以下代码：

```
 scale_fill_continuous(limits=c(0.0001, 28),trans = "log", 
                           low = "green", high = "red",
                           breaks=c(0.0001,0.001,0.01,0.1,1,3,10,25)) 
```

图例上的文字应该是

```
 (0.0001,0.0010,0.0100,0.1000,1.0000,3.0000,10.0000,25.0000) 
```

如何去除图例文字上多余的零？如何使它们如下所示：

```
 (0.0001,0.001,0.01,0.1,1,3,10,25) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:28:42.087

只需使用`labels`参数明确告诉`ggplot2`使用这些标签，即：

```
 scale_fill_continuous(limits=c(0.0001, 28),trans = "log", 
                       low = "green", high = "red",
                       breaks=c(0.0001,0.001,0.01,0.1,1,3,10,25),
                       labels=c("0.0001","0.001","0.01","0.1","1","3","10","25")) 
```

# windows - 涉及 WSAECONNABORTED 的奇怪序列

> ID：14216720
> 
> 赞同：1
> 
> 时间：2013-01-08T14:09:09.890
> 
> 标签：windows, internet-explorer-9, swi-prolog

我正在调查 IE9 与 SWI-Prolog HTTP 服务器对话的一系列奇怪事件。清除浏览器缓存并加载 / 后，我看到了这种情况。

*   IE9：获取 /
*   Prolog 回复重定向到 /home
*   IE9: 获取 /home
*   Prolog用主页回复（HTML，参考7张图片，css，js）
*   IE9 为这些打开 7 个连接
*   似乎Windows 使用*WSAECONNABORTED*关闭了所有这些。服务器在一些用于读取请求的连接和一些用于发送回复的连接上报告此错误。IE9 开发者界面 显示全部*中止*。
*   IE9 打开 4 个连接，工作正常，然后打开 3 个，也工作正常。

有谁知道为什么会发生这一切以及是谁发起了中止？(Prolog) 服务器本身对连接数没有限制（除非 WinSock 的默认值需要显式更改）。

ps平台：Win7，64位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:14:05.830

从历史上看，HTTP 协议对 HTTP/1.0 的每个客户端有四个连接的传统限制，对于 HTTP/1.1 有两个连接的传统限制（根据 RFC2616 第 8.1 节）。我怀疑您的 Prolog 服务器正在执行此限制。或者，它可能是中间防火墙的行为，现在它做了各种各样的事情，因此很难跟踪。

因为它看起来像 IE 行为正确，正在检测限制并回落到下限。

感兴趣的这里是 IE6 天的一些文档：

*   [http://support.microsoft.com/?kbid=183110](http://support.microsoft.com/?kbid=183110)

# ruby-on-rails - AngularJS ng-submit 在 Rails 生成的表单上失败

> ID：14216724
> 
> 赞同：3
> 
> 时间：2013-01-08T14:09:18.827
> 
> 标签：ruby-on-rails, forms, devise, angularjs

我正在使用 Rails 服务器（使用 Devise 进行身份验证）和 AngularJS 客户端。我已将 Rails 生成的表单添加到我的客户端页面，添加`ng-submit`Angular 指令，如下所示：

```
<%= form_for("user",
    :url => user_session_path,
    :html => { "ng-submit" => "doSignIn()" }) do |f| %> 
```

这会生成一个具有`action`和`ng-submit`属性的表单，如下所示：

```
<form accept-charset="UTF-8" action="/users/sign_in" method="post" ng-submit="doSignIn()"> 
```

在封闭的控制器的定义中`div`，我有一个`doSignIn`目前不做任何事情的函数：

```
$scope.doSignIn = function() {
    console.log($scope.email, $scope.password);
}; 
```

`$scope.email`并`$scope.password`使用`ng-model`. 或者，至少，他们应该是——我不能说，因为点击提交总是会导致被定向到`/users/sign_in`. 我的印象是 using`ng-submit`会阻止表单重定向用户。我还尝试`ng-click`使用相同的方法向提交按钮添加一个，该方法也使用该`doSignIn()`方法，我什至尝试将事件传递给它并调用`event.preventDefault()`. 似乎没有什么能阻止我被重定向。

我的目标最终是使用 AJAX 进行登录，但现在，只要证明我可以停止自动重定向就很棒了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-02T18:19:42.397

> 我的印象是使用 ng-submit 会阻止表单重定向用户。

`<form>`如果没有`action`与之关联的属性，这只是一个正确的假设。当您使用 Rails`form_for`帮助器时，它`action`会在您指定`url`属性时为您生成一个。

要阻止提交表单，您必须遵循上述 Abraham P 的建议，以及`return false;`您不想提交表单的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-08T14:14:18.057

我发现解决这个问题的最简洁和最合乎逻辑的方法是将 $event 添加到 ng-submit 函数中。然后我只是在我的 js 文件中做了 $event.preventDefault() 。我的代码如下所示：

_form.html.haml

```
%div{:'ng-controller' => 'FestivalCtrl'}
  = simple_form_for festival, :html => {:'ng-submit' => 'addFestival($event)', :action => nil} do |form|
    = form.input :name, :input_html => {:'ng-model' => 'newFestival.name'}, :label => 'Festival Name'
    = form.input :description, :input_html => {:'ng-model' => 'newFestival.description'}
    %button{:type => 'submit'}
      Submit Festival

  {{newFestival.name}}
  {{newFestival.description}}

  %ul
    %li{:'ng-repeat' => 'festival in festivals'}
      {{festival.name}}
      {{festival.description}} 
```

节日.js.coffee

```
app = angular.module('MFN', ['ngResource'])

app.factory 'Festival', ($resource) ->
  $resource('/festivals/:id', {id: '@id'}, {update: {method: 'PUT'}})

@FestivalCtrl = ($scope, Festival) ->  
  $scope.festivals = Festival.query()

  $scope.addFestival = ($event) ->
    $event.preventDefault()
    festival = Festival.save($scope.newFestival)
    $scope.festivals.push(festival)
    $scope.newFestival = {} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T09:11:53.877

您需要从处理程序返回 false 以防止表单操作像这样执行：

```
 $scope.doSignIn = function() {
     if($scope.email && $scope.password){
         return(true);
     else{
         return(false);
     }
 }; 
```

上面的假设是，如果电子邮件和密码都存在，您要提交，否则不想提交。

# linux - 如何在 Linux GCC 上定义/编写这些原子操作

> ID：14216725
> 
> 赞同：0
> 
> 时间：2013-01-08T14:09:25.913
> 
> 标签：linux, multithreading, atomic, operation

我正在编写一个应用程序，该应用程序是无锁队列的实现，将在 linux 上运行并由**GCC 3.4.2**编译。

该实现基于以下原子操作：

****__sync_fetch_and_add****

 ****__sync_fetch_and_sub**

**__sync_bool_compare_and_swap**

**__sync_val_compare_and_swap****

**问题是 GCC 在GCC 4.1**之前没有上述内置函数，所以目前我必须自己用汇编语言定义它们。但是我对汇编一无所知，有人能给我上述功能的定义吗？任何帮助将不胜感激。

更多信息：

/// @brief 原子地将 a_count 添加到 a_ptr 指向的变量中 /// @return 之前在内存中的值 __sync_fetch_and_add

/// @brief 原子地从 a_ptr 指向的变量中减去 a_count /// @return 之前在内存中的值 __sync_fetch_and_sub

/// @brief Compare And Swap /// 如果 *a_ptr 的当前值为 a_oldVal，则将 a_newVal 写入 *a_ptr /// @return 如果比较成功并且写入 a_newVal 则返回 true __sync_bool_compare_and_swap

/// @brief Compare And Swap /// 如果 *a_ptr 的当前值为 a_oldVal，则将 a_newVal 写入 *a_ptr /// @return *a_ptr 操作前的内容 __sync_val_compare_and_swap(a_ptr, a_oldVal, a_newVal)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:49:27.810

（未经测试，可能包含错别字）：

```
inline long
val_compare_and_swap(volatile long *ptr, long old, long _new) {
    long prev;
    asm volatile("lock;"
#if defined(__amd64__)
                 "cmpxchgq %1, %2;"
#else
                 "cmpxchgl %1, %2;"
#endif
                 : "=a"(prev)
                 : "q"(_new), "m"(*ptr), "a"(old)
                 : "memory");
    return prev;
}

inline int
bool_compare_and_swap(volatile long *ptr, long old, long _new) {
    return val_compare_and_swap(ptr, old, new) == old;
}

inline long
fetch_and_add(volatile long *ptr, long value) {
    long prev;
    do {
        prev = *ptr;
    } until (bool_compare_and_swap(ptr, prev, prev + value));
    return prev;
} 
```

如果您需要一个对两个字值而不是一个字值进行操作的 compare_and_swap，请参见例如[http://src.chromium.org/svn/trunk/src/third_party/tcmalloc/chromium/src/base/atomicops-internals- x86.h](http://src.chromium.org/svn/trunk/src/third_party/tcmalloc/chromium/src/base/atomicops-internals-x86.h)。**

# google-gadget - 测试 Google 上下文小工具

> ID：14216732
> 
> 赞同：0
> 
> 时间：2013-01-08T14:09:57.017
> 
> 标签：google-gadget, gmail-contextual-gadgets

无需成为域管理员就可以测试我的 google 上下文小工具吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:16:30.417

您需要域管理员才能启用上下文小工具。您可以在以下 Google Enterprise 博客上查看其详细信息：http: [//googleenterprise.blogspot.in/2010/05/putting-email-in-context-with-gmail.html](http://googleenterprise.blogspot.in/2010/05/putting-email-in-context-with-gmail.html)

# javascript - Kendo UI：具有本地操作的远程数据源

> ID：14216739
> 
> 赞同：1
> 
> 时间：2013-01-08T14:10:23.350
> 
> 标签：javascript, kendo-ui

我一直在努力提高基于 KendoUI 网格的报告的性能。

它应该从远程数据源获取数据，但在本地执行排序和分组。

我已明确禁用“服务器”选项，如下所示：

```
var dSource = kendo.data.DataSource({
    transport: {
        read: {
            // Configure my ajax call and send the filter values
        }
    },
    serverPaging: false,
    serverGrouping: false,
    serverSorting: false
}); 
```

此数据源由 kendo-ui 网格使用，并启用了排序。

但是，当我点击一个列并对其进行排序时，会进行新的 ajax 调用，这只是浪费带宽和服务器资源。

我问了一个叫“谷歌”的智者，但我得到的每个数据源示例要么是完全本地的，要么是完全远程的，没有任何混合。

如何实现远程过滤和本地排序/分组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:02:46.700

您的配置看起来正确。这是启用本地分页和排序的建议方法。我创建了一个显示工作配置的现场演示：http: [//jsbin.com/itaqut/1/edit](http://jsbin.com/itaqut/1/edit)

# maven - 仅使用 maven 将资源打包为 jar

> ID：14216742
> 
> 赞同：6
> 
> 时间：2013-01-08T14:10:29.840
> 
> 标签：maven, jar

我只想将目录下的资源打包`src/main/resources`到maven发布的jar中。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:32:16.013

尝试以下操作：

```
<build>
  <resources>
     <resource>
       <directory>src/main/resources</directory>
       <filtering>false</filtering>
    </resource>
  </resources>
  <plugins>
    <plugin>
       ...
    </plugin>
  </plugins>
  ...
</build> 
```

据我所知，这可能是您要求的。

# c# - 使用泛型进行 M:N 转换

> ID：14216743
> 
> 赞同：0
> 
> 时间：2013-01-08T14:10:31.417
> 
> 标签：c#, oop, design-patterns, type-conversion

我想将一堆类型转换为一堆其他类型。例如，我有四种类型，、`SourceA`和，我将进行以下转换：`SourceB``TargetA``TargetB`

*   源A => 目标A
*   源A => 目标B
*   源 B => 目标 A
*   源 B => 目标 B

基本上，转换比简单的转换要先进一点。对于上述每种情况，它都需要一个非常自己的策略。

我想*避免*的是有几个方法包含方法**名称**中的类型，所以我**不**想要这样的东西：

`ConvertAtoA`

或类似的东西。我不想要这个的原因是因为类型被用作字符串，而不是类型本身，所以每当我去重命名一个类型时，都没有重构支持。假设我重命名`SourceA`为`SourceXyz`，该方法不会自动重命名，但我必须手动执行此操作。

我想要的是一种通用的表达方式，主要是为了获得重构支持。所以基本上是这样的：

`Convert<SourceA, TargetA>(mySourceValue)`

这里的问题是我最终得到了一个`Convert<TSource, TTarget>`包含**所有类型的****所有**逻辑的通用方法（由于显而易见的原因，这是一个坏主意）。

我已经看过各种设计模式，包括访问者、策略和责任链，但没有一个吸引人。无论如何，我不确定我是否错过了一点。

我该如何解决这个问题？

基本上，两个主要目标是：

*   每个组合都有单独的转换逻辑（没有复杂的方法）
*   具有重构支持（没有类型作为字符串）

有任何想法吗？

**更新 1：**我考虑过使用 AutoMapper，但我不确定它是否按我想要的方式工作。我可以肯定的是设置一个自定义转换器，例如

```
Mapper.CreateMap<string, DateTime>().ConvertUsing(new DateTimeTypeConverter()); 
```

但话又说回来，我将类型`DateTime`作为转换器名称的一部分。我知道我也可以在这里使用 lambda 表达式，但这又使代码变得丑陋，因为它会变得很长。反正，我怕我不能拥有一切……

**更新 2：**您可以通过限制左侧总是有一个`Dictionary<string, string>`（尽管内容不同）和右侧的自定义类来缓解问题。所以我想结束的是一个扩展方法，比如

```
dictionary.To<TargetA>() 
```

但无需将转换为不同类型的所有逻辑放入`To<T>`方法中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:12:54.857

您可以创建扩展方法，该方法将创建目标类型，然后将该对象的填充委托给基于泛型参数类型的某个方法：

```
public static class Extensions
{
    public static T ConvertTo<T>(this Dictionary<string, string> dictionary)
        where T : new()
    {
        dynamic target = new T();
        return (T)Extensions.FillFrom(target, dictionary);
    }

    private static object FillFrom(this object obj, 
                                   Dictionary<string, string> dictionary)
    {
        var message = "Conversion to " + obj.GetType() + " is not supported.";
        throw new NotSupportedException(message);
    }

    private static TargetA FillFrom(this TargetA target, 
                                    Dictionary<string, string> dictionary)
    {
        // throw exception if required keys not found
        target.Foo = dictionary["foo"];
        return target;
    }

    private static TargetB FillFrom(this TargetB target, 
                                    Dictionary<string, string> dictionary)
    {
        // throw exception if required keys not found
        target.Bar = dictionary["bar"];
        return target;
    }
} 
```

用法：

```
var targetA = dictionary.ConvertTo<TargetA>(); 
```

您可以对某些转换器类使用相同的方法（如果您不喜欢扩展方法）。您也可以`FillFrom`公开方法。你可以像这样使用它们：

```
var target A = new TargetA().FillFrom(dictionary); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:15:57.413

I got it :-)

Basically, my problem was that I was not able to do method overloading by a generic type parameter. Hence I made a virtue out of necessity and switched to using the `TryXXX` pattern.

My solution now looks like this:

```
using System;
using System.Collections.Generic;

namespace HelloWorld
{
    public class Program
    {
        public static void Main ()
        {
            Dictionary<string, string> dict = new Dictionary<string, string> {
                { "a", "b" }
            };

            Dog dog;
            if (dict.TryGet (out dog))
            {
                Console.WriteLine(dog.Color);
            }
        }
    }

    public static class ExtensionMethods
    {
        public static bool TryGet(this Dictionary<string, string> dictionary, out Dog dog)
        {
            dog = new Dog();
            dog.Color = "black / white";
            return true;
        }
    }

    public class Dog
    {
        public string Color { get; set; }
    }
} 
```

This way I do not have the type `Dog` anywhere in a method name, but I can have a separate method for each type I want to convert to.

Adding a new type means just adding the type, and adding a new overload for the extension method `TryGet`.

The trick is to use the `out` parameter for method overloading, which works perfectly fine :-).

# xml - 无向加权图到 xml

> ID：14216746
> 
> 赞同：0
> 
> 时间：2013-01-08T14:10:34.450
> 
> 标签：xml, graph, weighted

我想表示一个无向图，比如这个：

[http://cnx.org/content/m29399/latest/Picture%202.png](http://cnx.org/content/m29399/latest/Picture%202.png)

成一个 xml 文件。我不确定如何开始。

编辑：我想要 xml 格式的数据，所以我可以使用 xml 重建图形。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:49:37.130

恕我直言，您不应该尝试重新发明轮子，只需使用现有的基于 XML 的图形格式之一：[GraphML](http://graphml.graphdrawing.org/)、[XGMML](http://www.cs.rpi.edu/research/groups/pb/punin/public_html/XGMML/)或[GXL](http://www.gupro.de/GXL/)。GraphML 似乎是最容易开始的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:44:51.357

我一直在尝试，这似乎奏效了：

```
 <Nodes>
       <Node>
           <Name>A</Name>
       </Node> 
       <Node>
           <Name>B</Name>
       </Node> 
        ....
   </Nodes>

   <Routes>
       <Route>
          <from>A</from>
          <to>B</to>
          <cost>7</cost>
        </Route>
        ....
   </Routes> 
```

可能不是最好的方法，但这对我有用:)`enter code here`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T17:21:24.223

图由顶点和边组成。所以在顶层，XML 描述应该是这样的

```
<graph>
    <vertices>...</vertices>
    <edges>...</edges>
</graph> 
```

`<vertices>`容器将有元素`<vertex>`来携带每个顶点的信息。特别是，您将需要一个唯一标识符，边可以通过该标识符引用顶点。所以，像这样

```
 <vertices>
        <vertex id="A">other information, if needed</vertex>
        <vertex id="B">...</vertex>
        ...
    </vertices> 
```

`<edge>`容器内的每个`<edges>`都需要至少三条信息：连接的顶点和边缘的权重。因此，例如

```
 <edges>
        <edge ends="A B">7</edge>
        <edge ends="B C">8</edge>
        ...
    </edges> 
```

您可以将所有这些放入一个模式中，例如，您可以强制要求“ends”属性携带对图中确实存在的顶点 id 的引用（即，查找 xs:ID 和 xs:IDREF XML 模式文档）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T14:27:39.440

您是否需要将图形转换为 xml，或者您是否已经拥有某种格式的数据？

第一个很难，第二个你可以看看[Boost::Graph](http://www.boost.org/doc/libs/1_52_0/libs/graph/doc/index.html)。

# ruby - 将字符串附加到“puts”输出

> ID：14216755
> 
> 赞同：0
> 
> 时间：2013-01-08T14:11:02.787
> 
> 标签：ruby, concatenation, puts

我正在构建一个 gem，它将一个特定的字符串附加到每个`puts`输出。用例可能如下所示：

```
string_to_append = " hello world!"
puts "The web server is running on port 80"
# => The web server is running on port 80 hello world! 
```

我不知道该怎么做。它的伪代码可能是这样的：

```
class GemName
  def append
    until 2 < 1
        if puts_is_used == true
            puts string << "hello world!"
        else
            puts ""
        end
    end
  end
end 
```

非常感谢您对有关如何执行此操作的最佳方法的任何见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T14:19:18.000

这可以通过混叠轻松完成。我想说这是装饰方法的一个非常常见的习语。

```
# "open" Kernel module, that's where the `puts` lives.
module Kernel
  # our new puts
  def puts_with_append *args
    new_args = args.map{|a| a + ' hello world'}
    puts_without_append *new_args
  end

  # back up name of old puts
  alias_method :puts_without_append, :puts

  # now set our version as new puts
  alias_method :puts, :puts_with_append
end

puts 'foo'
# >> foo hello world

# it works with multiple parameters correctly
puts 'bar', 'quux'
# >> bar hello world
# >> quux hello world 
```

# unix - Unix $# 语句

> ID：14216756
> 
> 赞同：1
> 
> 时间：2013-01-08T14:11:09.140
> 
> 标签：unix, ksh

我在实用程序 ksh 脚本的开头找到了 '$#' 语句，但我无法找到有关 '$#' 含义的任何信息。用法：

```
if [[ $# -ne 1 ]];then
LogMessage "Usage:\nJavaWSJBossInstall! war_file"
exit
fi 
```

谁能解释一下这是什么意思？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:12:17.683

shell 变量`#`是脚本的参数数量。`$1`您可以以等方式访问它们`$2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:12:14.690

它计算传递给脚本的命令行参数的数量。

~~寻找这种东西的最佳位置是[Bash 手册](http://www.gnu.org/software/bash/manual/bashref.html)。在这种特殊情况下，您对[特殊参数](http://www.gnu.org/software/bash/manual/bashref.html#Special-Parameters)部分感兴趣。~~ （哎呀，这是 ksh，而不是 Bash）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T14:12:32.553

$# 表示提供给脚本的命令行参数的数量。在您的情况下，它会检查是否只有一个参数传递给它，否则会打印一些解释用法的字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T14:13:07.233

见`man ksh`。 `$#`给出命令行参数的数量。该`if`语句也可以写成：

```
if (( $# != 1 )); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T14:13:10.227

该变量`#`包含传递给脚本的参数数量。如果你这样称呼你的脚本：

```
 script foo bar 
```

然后`$#`会给你价值`2`。

# tsql - 复合主键或外键

> ID：14216759
> 
> 赞同：0
> 
> 时间：2013-01-08T14:11:14.673
> 
> 标签：tsql, database-design

我有一个数据模型如下...

*   一个主题可以有多个练习（ExerciseTopic(FK) 引用 TopicId(PK)）
*   一个练习可以有多个问题（练习（FK）引用练习Id（PK））
*   一个问题可以有多个 (4) AnswerChoices

![在此处输入图像描述](../Images/9d197813a0c890fa9c1202fe20a8531e.png)

我想为 AnswerChoices 表设置一个由三部分组成的主键，因为这种组合将唯一地标识每个选择。

*   出于数据完整性目的，我是否需要在 AnswerChoices 表中使用外键或
*   复合主键就足够了吗？如果需要外键，它会是两部分复合外键（ExerciseId，QuestionId）吗？

样本数据 ...

*   主题（T1）
    *   练习 E1
        *   问题 1（答案选择：a、b、c、d）
        *   问题 2（答案选择：a、b、c、d）
        *   问题 3（答案选择：a、b、c、d）
    *   练习 E2
        *   问题 1（答案选择：a、b、c、d）
        *   问题 2（答案选择：a、b、c、d）
        *   问题 3（答案选择：a、b、c、d）
    *   练习 E3
        *   问题 1（答案选择：a、b、c、d）
        *   问题 2（答案选择：a、b、c、d）
        *   问题 3（答案选择：a、b、c、d）
*   主题（T2）
    *   练习 E1
        *   问题 1（答案选择：a、b、c、d）
        *   问题 2（答案选择：a、b、c、d）
        *   问题 3（答案选择：a、b、c、d）
    *   练习 E2
        *   问题 1（答案选择：a、b、c、d）
        *   问题 2（答案选择：a、b、c、d）
        *   问题 3（答案选择：a、b、c、d）
    *   练习 E3
        *   问题 1（答案选择：a、b、c、d）
        *   问题 2（答案选择：a、b、c、d）
        *   问题 3（答案选择：a、b、c、d）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:27:00.213

*看起来*您需要在 AnswerChoices 中使用一个四列键：{TopicID、ExerciseID、QuestionID、ChoiceID}。并且表“AnswerChoices”应该有一个`foreign key (TopicID, ExerciseID, QuestionID) references Questions (TopicID, ExerciseID, QuestionID)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:30:36.310

不需要是“或”
可以有复合和外
一个选项

```
Exercise:
PK TopicID FK to Topic
PK ExerciseID

Question:
PK TopicID FK to Exercise
PK ExerciseID FK to Exercise
PK QuestionID

AnswerChoices:
PK TopicID FK to Question
PK ExerciseID FK to Question
PK QuestionID FK to Question
PK ChoiceID

UserAnsers:
PK UserID FK to Users
PK TopicID FK to AnswerChoices
PK ExerciseID FK to AnswerChoices
PK QuestionID FK to AnswerChoices
PK ChoiceID FK to AnswerChoices 
```

如果用户只能选择一个答案，则将 PK 关闭 ChoiceID

# android - 从多个复选框中选择一个复选框并让用户选中复选框

> ID：14216762
> 
> 赞同：1
> 
> 时间：2013-01-08T14:11:17.790
> 
> 标签：android, checkbox, android-checkbox

我在一个活动中有 16 个复选框，用户必须从中选择 8 个复选框中的任何一个。
因此，最终用户将选择其中 16 个复选框中的 2 个。

**更新：**复选框已经存在于 xml 布局文件中。所以，我确实可以访问他们的 ID

直到现在，我正在考虑实现一个简单的 onCheckedChange 侦听器，并在 switch case 块中选择 8 个复选框中的任何 1 个复选框并取消选择其余 7 个。但是这种方法是极其痛苦的。

此外，当我需要提取其中哪个被选中时，那将是一团糟。

那么，我可以做这两件事的最简单但灵活的方法是什么？欢迎提出建议
谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T15:30:38.180

您可以一次只`CheckBox`检查一个（类似于 a `RadioGroup`），方法是将它们分组到一个数组中（以便于访问和处理），并`OnClickListener`为每个设置 a 以设置状态：

```
CheckBox[] chkArray = new CheckBox[8];
chkArray[0] = (CheckBox) findViewById(R.id.cb1R1);
chkArray[0].setOnClickListener(mListener);
chkArray[1] = (CheckBox) findViewById(R.id.cb2R1); // what id do you have?
chkArray[1].setOnClickListener(mListener);
// so on for the rest of the 8 CheckBoxes

private OnClickListener mListener = new OnClickListener() { 

     @Override
     public void onClick(View v) {
        final int checkedId = v.getId();
        for (int i = 0; i < chkArray.length; i++) {
            final CheckBox current = chkArray[i];
            if (current.getId() == checkedId) {
                 current.setChecked(true);
            } else {
                 current.setChecked(false);
            }
       }    
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:41:53.037

只需给他们简单的名称，例如 list1box1 list1box2 .... list2box1 list2box2 ... 有两个名称数组 - list1array - list2array

仍然拥有与现在相同的侦听器：在侦听器内部首先执行 if 语句以检查单击的项目是 list1 项目还是 list2 并基于此简单地有一个 for 循环，该循环遍历该特定列表中的所有项目和选中/取消选中。

提取只需检查每个数组哪些项目被检查或不检查

# regex - 使用正则表达式查找文本中的重复错印

> ID：14216763
> 
> 赞同：0
> 
> 时间：2013-01-08T14:11:38.093
> 
> 标签：regex

是否有可能在文本中找到所有重复的错误打印（在我的情况下是 LaTeX 源），例如：

```
... The Lagrangian that that includes this potential ...
... This is confimided by the the theorem of ... 
```

使用正则表达式？

使用您最喜欢的工具（sed、grep）/语言（python、perl、...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:25:37.790

尝试这个：

```
grep -E '\b(\w+)\s+\1\b'  myfile.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:15:48.990

使用带有`egrep -w`和正则表达式的反向引用`(\w+)\s+\1`：

```
$ echo "The Lagrangian that that includes this potential" | egrep -ow "(\w+)\s\1"
that that

$ echo "This is confimided by the the theorem of" | egrep -ow "(\w+)\s+\1"
the the 
```

注意：该`-o`选项显示匹配的行的唯一部分，这对于演示实际匹配的内容很有用，您可能希望删除该选项并`--color`改用。该`-w`选项对于匹配整个单词很重要，否则`is is`将匹配 in `This is con..`。

```
(\w+) # Matches & captures one or more word characters ([A-Za-z0-9_])
\s+   # Match one or more whitespace characters 
\1    # The last captured word 
```

使用 `egrep -w --color "(\w+)\s+\1" file`的好处是可以清楚地突出显示潜在的错误重复单词，替换可能不像许多正确示例那样明智，例如`reggae raggae sauce`or`beautiful beautiful day`将被更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T14:18:21.337

此 JavaScript 示例有效：

```
var s = '... The Lagrangian that that includes this potential ... This is confimided by the the theorem of ...'
var result = s.match(/\b(\w+)\s\1\b/gi) 
```

结果：

```
["that that", "the the"]; 
```

正则表达式：

```
/\s(\w+)\s\1/gi

# /     --> Regex start,
# \b    --> A word boundary,
# (\w+) --> Followed by a word, grouped,
# \s    --> Followed by a space,
# \1    --> Followed by the word in group 1,
# \b    --> Followed by a word boundary,
# /gi   --> End regex, (g)lobal flag, case (i)nsensitive flag. 
```

添加单词边界以防止正则表达式匹配字符串，例如`"hot hotel"`或`"nice ice"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T14:41:15.740

Python 中的示例显示如何删除重复的单词：

```
In [1]: import re

In [2]: s1 = '... The Lagrangian that that includes this potential ...'

In [3]: s2 = '... This is confimided by the the theorem of ...'

In [4]: regex = r'\b(\w+)\s+\1\b'

In [5]: re.sub(regex, '\g<1>', s1)
Out[5]: '... The Lagrangian that includes this potential ...'

In [6]: re.sub(regex, '\g<1>', s2)
Out[6]: '... This is confimided by the theorem of ...' 
```

# javascript - 如何在嵌套对象数组中查找范围？

> ID：14216764
> 
> 赞同：1
> 
> 时间：2013-01-08T14:11:37.707
> 
> 标签：javascript, d3.js

我有一组嵌套对象，其中包含每个州每年的 GDP、收入、人口等值：

```
// The "records" array looks like this:
[
    {
        name : "...",
        income : [
            [1995, 1234], // [year, value]
            [1996\. 1235],
            [...]
        ],
        GDP : [
            [1995, 1234],
            [1996\. 1235],
            [...]
        ],
        population : [
            [1995, 1234],
            [1996\. 1235],
            [...]
        ]
    }, {
        name : "...",
        income : [
            [...]
        ],
        GDP : [
            [...]
        ],
        population : [
            [...]
        ]
    }, {
        ...
    }
] 
```

现在，我想找到所有州和年份的每个维度的最小值和最大值（范围）。

```
populationExtents = [659651, 82536680];
gdpExtents        = [14250, 2498800];
incomeExtents     = [..., ...]; 
```

我怎样才能做到这一点而不必多次遍历整个数组？目前，我正在为每个维度执行此操作：

```
var income = records.map(function(d, i) {
    return d.income;
});

var min = d3.min(income, function(d, i) {
    return d3.min(d, function(e) {
            return e[1]; // returns values of each year
        });
});

var max = d3.max(income, function(d, i) {
    return d3.max(d, function(e) {
            return e[1];
        });
}); 
```

但我认为这太复杂了，因为我应该能够计算每个维度和状态的所有“局部”最小值，然后计算所有状态的全局最小值（而不是每个维度一次）。

我尝试了几个级别的 d3.map 和嵌套的 d3.min，但我无法理解这个结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:23:50.813

```
function getMaxMin( prop ) {
    var concat = [].concat,
        arr = concat.apply([], records.map(function(value) {
            return concat.apply([], value[prop]);
        }));

    return [ Math.min.apply(Math.min, arr), Math.max.apply(Math.max, arr) ];
} 
```

或者更漂亮一点：

```
function getMaxMin( prop ) {
    var arr = [];

    records.map(function(value) {
        arr = arr.concat.apply(arr, value[prop][1]);
    });

    return [ Math.min.apply(Math.min, arr), Math.max.apply(Math.max, arr) ];
} 
```

* * *

**编辑：**排除年份`[year, value]`并将几乎所有内容置于同一循环中：

```
function getMaxMin() {
    var arrs = [];

    records.map(function(value) {
        arrs[0] = arrs[0].concat(value.income);
        arrs[1] = arrs[1].concat(value.GDP);
        arrs[2] = arrs[2].concat(value.population);
    });

    arrs[0] = arrs[0].filter(c);
    arrs[1] = arrs[1].filter(c);
    arrs[2] = arrs[2].filter(c);

    function c(value, key) {
        return key % 2;
    }

    return [
        [ Math.min.apply(Math.min, arrs[0]), Math.max.apply(Math.max, arrs[0]) ],
        [ Math.min.apply(Math.min, arrs[1]), Math.max.apply(Math.max, arrs[1]) ],
        [ Math.min.apply(Math.min, arrs[2]), Math.max.apply(Math.max, arrs[2]) ]
    ];
}

var maxMin = getMaxMin();

maxMin === [
    [income-min, income-max],
    [GDP-min, GDP-max],
    [population-min, population-max]
] 
```

演示： http: [//jsbin.com/ecineg/1/embed ?javascript,console](http://jsbin.com/ecineg/1/embed?javascript,console)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:19:25.447

您可以使用 JavaScript`Math.max`和`Math.min`函数`apply`来获取数组的最大值和最小值。要获取我正在使用的数组`reduce`并连接每条记录的属性

```
var allValues = function (property) {
  return records.reduce(function (memo, record) {
    return memo.concat(record[property])
  }, [])
}

var allIncome = allValues('income')

Math.max.apply(null, allIncome)
Math.min.apply(null, allIncome) 
```

# transformation - Kettle 转换中的所有步骤并行运行

> ID：14216765
> 
> 赞同：1
> 
> 时间：2013-01-08T14:11:40.013
> 
> 标签：transformation, kettle, parallels

我对水壶真的很陌生。当我在转换中使用“设置变量”步骤时，我读到了这个。“Kettle 转换中的所有步骤并行运行”。我想知道这怎么可能。

例如，我有一个只有两个步骤的转换，A 从 csv 文件中读取数据，B 将这些数据写入 xml 文件。如果这两个步骤并行运行，B如何在A读取数据之前将数据写入xml？

任何答案将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T20:09:30.240

这正是它所说的。当转换开始时，所有步骤同时开始。然后它们有一个输入“缓冲区”或一个通常为 50k 行的行集。

所以; 当第一步读取它的前 50k 行时，它们将填充缓冲区，下一步将开始处理这些行，而第一步仍在读取。

等等等等。

在您的示例中，当从 CSV 读取前 50k 行时，它将开始使用这些行写入 XML，同时仍在读取下一个 50k。

这就是为什么必须在先前的转换中使用设置变量并与作业绑定在一起的原因。

对 pdi 作业进行性能调优时的关键之一是确定链中的哪一步最慢。值得庆幸的是，性能指标的东西让这很容易！

此外，如果您愿意，您也可以运行多个步骤副本，例如写入数据库的步骤等。

# curl - 如果我们的服务器有多个 IP 并且我们使用 curl，远程用户会看到什么作为远程 IP

> ID：14216767
> 
> 赞同：0
> 
> 时间：2013-01-08T14:11:40.760
> 
> 标签：curl, ip

主服务器的IP还是脚本用户的IP？

假设我的服务器有 6 个 IP

```
123.123.123.122
123.123.123.123
123.123.123.124
... 
```

一个帐户，例如在 cpanel 中，具有`123.123.123.124`IP。

例如，该帐户运行 curly formyip.com 脚本。

它会得到什么？我想我可以对此进行测试，但是如果有人可以给我一个快速的解释，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:16:48.543

如果您的 cpanel 帐户有一个专用 IP 123.123.123.124，那么这就是另一端会看到请求来自的 IP。

# dojo - 在 dojo 中创建多个网格

> ID：14216775
> 
> 赞同：0
> 
> 时间：2013-01-08T14:12:19.523
> 
> 标签：dojo, dojox.grid.datagrid, dojox.grid

假设我有多个来源，我想要一个 dojo-grid 并用它们的数据填充。选择一个源后，我可以创建和填充网格。但是当谈到一次选择所有来源时，假设我选择了 3 个。所以，我必须在同一页面中创建 3 个网格而不是一个。我想我必须使用循环，以便我可以创建与源一样多的网格。

但我无法编写用于创建多个 dojo jata 网格的代码。请给出一些建议或建议一些代码示例。

对于单个网格，我有这样的代码：

```
 require(['dojox/grid/DataGrid', 'dojo/data/ItemFileReadStore', 'dojo/date/stamp',      'dojo/date/locale', 'dojo/domReady!'],
          function(DataGrid, ItemFileReadStore){
            var layout = [
                {name:'srcrecno',field:'srcrecno',width:20},
                {name: 'Score', field: 'Score', width:20},
                {name: 'Members', field: 'Members', width:20},
                {name:'Entities', field:'Entities',width:20}
                ];

            var store = new ItemFileReadStore({
                data: {
                    items:<%=fa.jsonstring()%>
                }
            });
            var grid = DataGrid({
                id: 'grid',
                store: store,
                structure: layout,

            });
            grid.placeAt('gridDiv');
            grid.startup();
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:24:42.740

```
var data1 =  {
        items : <brp:json value="${display1}"/>,
        identifier : "id"
    };
 var store = new dojo.data.ItemFileReadStore({
    data : data1
}); 

        var layout = [ {
            field : 'id',
            name : 'Column1',
            width : '150px'
        },{
            field : 'Column2',
            name : 'Column2',
            width : '200px'
            },{
            field : 'Column3',
            name : 'Column3',
            width : '490px'
        } ];
        var grid = new dojox.grid.EnhancedGrid({
            id : 'grid',
             query : {
                id : '*'
            }, 
            store : store, 
            clientSort : false,
            rowSelector : '20px',
            plugins: {indirectSelection: {headerSelector:true, width:"40px", styles:"text-align: center;"}},
            height : "380px",   
            structure : layout,
        }, document.createElement('div'));

        dojo.byId("div1").appendChild(grid.domNode);

         var data2 =  {
                items : <brp:json value="${display1}"/>,
                identifier : "id"
            };
         var store2 = new dojo.data.ItemFileReadStore({
            data : data2
        });  

        var Structure2 = [ {
            field : 'id',
            name : 'Column1',
            width : '150px'
        },{
            field : 'Column2',
            name : 'Column2',
            width : '200px'
            },{
            field : 'Column3',
            name : 'Column3',
            width : '490px'
        } ];
        var grid2 = new dojox.grid.EnhancedGrid({
             id : 'grid2',
             query : {
             id : '*' 
            }, 
            store : store2,
            clientSort : false,
            rowSelector : '20px',
            plugins: {indirectSelection: {headerSelector:true, width:"40px", styles:"text-align: center;"}},
            height : "380px",   
            structure : Structure2,

        }, document.createElement('div'));

        dojo.byId("div2").appendChild(grid2.domNode); 

        grid.startup();
        grid2.startup(); 
```

你还必须做一件事 - 在 div 里面你想显示 div 放置的高度

注释 - `grid.startup();`--> 表示您的 div 的开始，其中 grid 是您指定的网格

div1 和 div2 ---> 你的 div-id

plugins:
`{indirectSelection: {headerSelector:true, width:"40px", styles:"text-align: center;"}}`
--> 用于您的网格数据的复选框

像这样我们可以填充没有。使用道场的网格。

# android - 应用程序关闭后如何在 Fragment 中停止 AsyncTask

> ID：14216777
> 
> 赞同：2
> 
> 时间：2013-01-08T14:12:21.957
> 
> 标签：android, android-asynctask, android-fragments, android-activity

关闭应用程序后如何在 Fragment 类中停止 AsyncTask？

**MainActivity 类**

```
public class MainActivity extends FragmentActivity {

} 
```

**BaseFragment 类由 Fragment 扩展**

```
public class BaseFragment extends Fragment {
    public MainActivity mActivity;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mActivity       =   (ChatActivity)this.getActivity();

    }

    public boolean onBackPressed(){
        return false;
    }

    public void onActivityResult(int requestCode, int resultCode, Intent data){

    }

    @Override
    public void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
    }

} 
```

**片段类**

```
public class Fragment1 extends BaseFragment{

private  Update  task;
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        toCallAsynchronous();

        return inflater.inflate(R.layout.activity_online_korisnici, container,
                false);
    }

     public void toCallAsynchronous() {
            final Handler handler = new Handler();
            Timer timer = new Timer();
            TimerTask doAsynchronousTask = new TimerTask() {       
                @Override
                public void run() {
                    handler.post(new Runnable() {
                        public void run() {       
                            try {
                             task =new Update();

                                // PerformBackgroundTask this class is the class that extends AsynchTask 
                                task.execute("");
                            } catch (Exception e) {
                                // TODO Auto-generated catch block
                            }
                        }
                    });
                }
            };
            timer.schedule(doAsynchronousTask, 0, 5000); //execute in every 50000 ms
        }

   private class Update extends AsyncTask<Object, Object, List<Object>>{

    @Override
        protected List<Object> doInBackground(Object... params) {

                 }

@Override
        protected void onPostExecute(List<Object> result) {

}

   }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T14:49:50.223

您可以使用片段的 onPause() 方法。当 Fragment 不再恢复时调用它。这通常与包含 Activity 生命周期的 Activity.onPause 相关联。

```
@Override
public void onPause() {
    super.onPause();
    task.cancel();
} 
```

更新：如果您在 TabHost 下，并且在按下不同的选项卡时片段会暂停，您可以这样做

在您的活动中存储片段 ID 或标签

实现一种方法来停止片段中的任务

```
public void onActivityPause() {
    task.cancel();
} 
```

在您的活动 onPause()

```
@Override
protected void onPause() {
    super.onPause();
    FragmentManager fm = getFragmentManager();
    for (int id : ids) {
        Fragment f = fm.findFragmentById(id);
        try {
            Method stop = f.getClass().getMethod("onActivityPause");
            close.invoke(f);
        } catch (Exception e) {}
    }
} 
```

但无论如何我都不会使用 TabHost，它已被弃用。如果您需要支持 v4 版本，请考虑使用 ActionBar 或 ActionBarSherlock。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T14:13:37.790

`task.cancel()`会做的。请务必`isCancelled()`在您`onBackground()`的以及`onPostExecute()`避免访问/更新不再存在的 UI 中包含频繁的检查。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-26T16:40:29.313

我有一个类似的问题 - 本质上，在用户销毁活动后，我在异步任务中获得了 NPE。在 Stack Overflow 上研究了这个问题后，我采用了以下解决方案：

布尔运行；

public void onActivityCreated (Bundle savedInstanceState) {

```
 super.onActivityCreated(savedInstanceState);

    running=true;
    ...
    }

public void onDestroy() {
    super.onDestroy();

    running=false;
    ...
} 
```

然后，我在我的异步代码中定期检查“是否正在运行”。我已经对此进行了压力测试，现在我无法“破坏”我的活动。与我在 SO 上看到的一些解决方案相比，这非常有效，并且具有更简单且不易出错的优点。

# magento - Magento -> 重写模型

> ID：14216778
> 
> 赞同：2
> 
> 时间：2013-01-08T14:12:23.380
> 
> 标签：magento, rewrite

我想重写模型：

```
Mage_Sales_Model_Quote_Address 
```

但是我使用了已经覆盖它的附加组件“Payone”：

```
 <sales>
            <rewrite>
                <quote_address>Payone_Core_Model_Sales_Quote_Address</quote_address>
            </rewrite>
        </sales> 
```

我试过了：

```
 <core>
            <rewrite>
                <sales_quote_address>Mycomp_Mymod_Model_Quote_Address</sales_quote_address>
            </rewrite>
        </core> 
```

但这不起作用。有什么提示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T14:44:47.640

除非我忘记了我的记忆，否则你会想让你的模块“依赖”他们的模块，以便你的重写最后并生效。您可以通过将以下内容添加到`app/etc/modules/My_Module.xml`节点内的文件中来执行此操作：

```
<depends>
     <Their_Module />
</depends> 
```

一旦你这样做了，让你的班级扩展他们的：

```
class My_Module_Model_Quote_Address extends Payone_Core_Model_Sales_Quote_Address 
```

如果您可以使用事件观察器做您需要的事情，那么请改为这样做。但是，如果您需要重写，上述内容将使您到达您需要的地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T14:42:46.160

最好的方法是在你的重写中使用观察者（相信我，你可以在不重写的情况下进行很多修改。、、、、非常强大`<model>_load_after`）。`<model>_save_before``<model>_save_after``<model>_load_after`

但是如果您仍然需要进行重写，您可以将`depends`节点添加到您的模块（以确保它将在 Payone 之后加载）并重写 Payone_Core_Model_Sales_Quote_Address 而不是 Mage_Sales_Model_Quote_Address

还有另一种方法可以解决这个问题：合并类中的所有更改并删除以前的重写。但是这种方式给整个系统增加了混乱，影响了模块化的完整性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-24T22:55:52.453

好吧......大卫阿尔杰的回答中缺少它......上面的答案是一种更合理的架构方法，如果可以避免扩展，请在事件观察器中使用对象组合来处理对象。

让我解释一下为什么它不适合你：

当从所有模块加载系统配置时，它会以 .xml 文件被使用的任何顺序加载。发出重写时，Magento 配置会在与配置 xml 层次结构相同的级别创建记录，该层次结构将引用该类`<class>`Mage_Sales_Model_Quote_Addess`</class>`

每当 Magento 加载一个类时，它会检查该层次结构级别的`<rewrite>`Payone_Sales_Model_Quote_Address`</rewrite>`节点，如果存在则加载该节点，如果不存在则加载该类节点。

通过放置`<depends><Thier_Module></depends>`节点，您的重写将在配置加载时最后加载，并在此节点级别替换它们的重写。

***...不理解的问题...***

...导致您的问题的基本功能是未来的模块引入可能会重写您的模块，您将再次摸不着头脑...如果您引入另一个重写同一类的模块会发生什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T14:32:08.883

您必须以某种方式将这些文件合并到一个文件中并使用该文件，因为默认情况下 Magento 不支持对同一文件进行多次覆盖。

Magento 扩展开发人员 Aitoc 提供了一个自定义重写扩展，其模块似乎可以处理这个问题，如果检测到这个，它会自动将多个覆盖移动到一个中。我还没有测试它，但也许它可以帮助你。

# php - 将文本转换为列表

> ID：14216785
> 
> 赞同：0
> 
> 时间：2013-01-08T14:12:36.573
> 
> 标签：php, html, regex, list

我在将文本转换为列表时遇到了一些问题。情况是我从数据库中得到如下文本：

```
"Hello, my name is michael, my hobbys are:
- computers
- guitar
and some more blabla " 
```

不，我想将列出的点（在这种情况下为计算机和吉他）转换为无序的 html 列表，因此结果应如下所示：

```
"Hello, my name is michael, my hobbys are:
<ul>
<li>computers<li>
<li>guitar</li>
</ul>
and some more blabla ". 
```

我认为最好的解决方案是通过正则表达式来做到这一点，但我的知识还不足以实现这一点。我通过替换所有`/\n- /`宽度的`<li>`标签来尝试它，它有效。但是我如何获得关闭`</li>`，更让我困惑的是，我如何获得这两个`<ul>`标签？

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T14:16:27.910

您的语法看起来几乎与[Markdown](http://en.wikipedia.org/wiki/Markdown)相同，这是一种简单的标记语言。唯一的区别是一点空白：

```
Hello, my name is Michael, my hobbies are:

 - Computers
 - Guitar

and some more blabla 
```

它被转换成这样：

```
<p>Hello, my name is Michael, my hobbies are:</p>

<ul>
    <li>Computers</li>
    <li>Guitar</li>
</ul>

<p>and some more blabla</p> 
```

有一些[PHP Markdown](http://michelf.ca/projects/php-markdown/)项目我认为你会发现它们很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:17:56.287

有很多方法可以做到这一点，包括正则表达式，但在您的特定情况下，explode() 函数就足够了。你可以做：

```
$array = explode("\n", $string); 
```

现在您的 $array 将在第一个插槽中显示“你好，我的名字是 michael，我的爱好是：”，在第二个插槽中显示“-computers”，等等。

然后遍历数组，对于每个以“-”开头的元素，把它变成<li>element</li>

这是一种非常普通的方式，但它应该是高效的，并且不需要使用正则表达式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-08T14:15:51.420

不幸的是，最好做正则表达式

# jquery - 如何使用 jQuery 和 AJAX 将输入字段中的数据加载到另一个页面？

> ID：14216796
> 
> 赞同：0
> 
> 时间：2013-01-08T14:12:53.017
> 
> 标签：jquery, ajax

我是编程新手，所以我寻求帮助。我确信这个问题已经回答了关于 PHP 的问题。我只想在基本的 HTML 上执行此功能。

**HTML 页 1**

```
 <input type="text" maxlength="255" name="Postcode_6203" id="Zip_Code" class="cat_textbox signup_input_main" />
    <input id="find_resta_btn" class="cat_button search_rest_1" type="submit"/> 
```

**网页 2**

```
<div id="zip_code_container">

</div> 
```

如何使用 AJAX 和 JQuery 做到这一点

我会提交我编写的示例脚本，但我不想让任何人混淆它，因为它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:25:55.973

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/) 或 [http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

```
 var $name = $("#name_input_id").val();
     var $location = $("#location_input_id").val();
     $.ajax({
       type: "POST",
       url: "some.php",
       data: { name: $name, location: $location }
    }).done(function( msg ) {
         alert( "Data Saved: " + msg );
    }); 
```

# android - 如何使用九个旧的 androids 动画创建 ImageView 脉冲效果

> ID：14216798
> 
> 赞同：33
> 
> 时间：2013-01-08T14:12:55.343
> 
> 标签：android, android-animation, android-imageview

我想知道如何使用九个 olad androids 框架动画创建脉冲效果。

为了更好地理解，假设您有一个 ImageView 并希望具有“脉冲”效果，例如使图像变小然后恢复到原始大小，缩放将居中。

我使用九个 olad 机器人来实现向后兼容性。

欢迎任何其他选择。

谢谢你。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-01-08T14:58:17.213

`R.anim.pulse`：

```
<scale xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="1000"
    android:fromXScale="1"
    android:fromYScale="1"
    android:pivotX="50%"
    android:pivotY="50%"
    android:repeatCount="1"
    android:repeatMode="reverse"
    android:toXScale="0.5"
    android:toYScale="0.5" /> 
```

```
ImageView imageView = (ImageView) findViewById(R.id.image);
Animation pulse = AnimationUtils.loadAnimation(this, R.anim.pulse);
imageView.startAnimation(pulse); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-08-28T09:59:24.483

heart_pulse.xml 将 heart_pulse.xml 放入 res/anim 文件夹 添加 android:interpolator

然后在您的活动中使用，如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<scale xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/accelerate_decelerate_interpolator"
    android:fromXScale="1"
    android:fromYScale="1"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toXScale="0.5"
    android:toYScale="0.5"
    android:duration="1000"
    android:repeatCount="infinite"
    android:repeatMode="reverse"/>

ImageView imageView =(ImageView)findViewById(R.id.imageView);
Animation pulse = AnimationUtils.loadAnimation(this, R.anim.heart_pulse);
imageView.startAnimation(pulse); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-13T06:29:10.003

要直接从 XML 中使用@Matthias Robbers 解决方案，您可以执行以下操作：创建 2 个文件：

1-**脉冲.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <scale xmlns:android="http://schemas.android.com/apk/res/android"
        android:fromXScale="1"
        android:fromYScale="1"
        android:pivotX="50%"
        android:pivotY="50%"
        android:toXScale="0.8"
        android:toYScale="0.8"
        android:duration="500"
        android:repeatCount="infinite"
        android:repeatMode="reverse"/>
</set> 
```

**2- pulse_layout_animation.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<layoutAnimation xmlns:android="http://schemas.android.com/apk/res/android"
    android:animation="@anim/pulse">
</layoutAnimation> 
```

然后在您的布局 xml 文件中，只需将此动画添加到您需要的任何视图中，例如：

```
<ImageView
    android:layout_width="55dp"
    android:layout_height="55dp"
    android:src="@drawable/heart"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:layoutAnimation="@anim/pulse_layout_animation" /> 
```

# asp.net - 正则表达式验证器为有效输入返回 false

> ID：14216806
> 
> 赞同：0
> 
> 时间：2013-01-08T14:13:17.343
> 
> 标签：asp.net, regex, validation, c#-4.0

我想验证文本框的输入，因此它必须在方括号内包含六个（可选七个）字符。这可以出现在字符串中的任何位置，而不是整个字符串本身。有效输入示例：`Hello World [XX1111]`

我想出了以下正则表达式：`\[.......?\]`

但是，此表达式似乎不适用于 a `RegularExpressionValidator`：

```
<asp:TextBox ID="txtTest" runat="server" />
<asp:RegularExpressionValidator ID="rfvTest" runat="server" ControlToValidate="txtTest" 
    ValidationExpression="\[.......?\]" ErrorMessage="Enter in the right format...">Enter in the right format</asp:RegularExpressionValidator>
<asp:Button ID="btnTest" runat="server" Text="test" /> 
```

即使是有效输入，也会导致显示错误，并且 的`.IsValid`属性为`Page`假。

有趣的是，以下 C# 代码将导致`match`（`true`带有文本`Hello [XX1111]`）

```
 Regex r = new Regex(rfvTest.ValidationExpression);
            bool match = r.IsMatch(txtTest.Text); 
```

所以：这里有什么。我相信表达式本身是正确的，它使用`Regex`类按预期进行验证，但`RegularExpressionValidator`不会验证输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:25:41.627

问题似乎是这个控件不幸地将输入锚的开头和结尾添加到您提交的正则表达式中（并且没有记录它这样做）......

这意味着你必须在你的正则表达式`.*`两边加上，是的。可以被视为一个错误...

# ios - 应用商店中的应用拒绝可能性

> ID：14216810
> 
> 赞同：0
> 
> 时间：2013-01-08T14:13:29.340
> 
> 标签：ios

最近我向应用商店上传了一个应用程序，但它被拒绝了，因为该应用程序有指向可以购买的网站的链接（根据苹果拒绝声明）。在应用程序中没有购买部分。任何用户都可以使用该应用程序，但必须通过网站或应用程序进行注册。该应用程序有三个部分，其中两个部分可供任何用户使用，但要使用第三部分，必须通过网站购买包。用户不能使用应用程序购买，但必须使用浏览器直接进入网站进行购买。现在我计划通过删除网站链接重新提交应用程序，其他功能将保持不变。我的问题是，是否有可能因为这种类型的购买而拒绝我的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:16:59.703

不允许购买。但不允许链接到可以购买数字产品/帐户/订阅等的网站。如果不再出现链接，您将通过批准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:03:56.383

您的应用程序中的任何链接都将被拒绝，这些链接指向用户可以购买的其他链接。

我有一个应用程序被拒绝，因为他们能够深入了解大约 5 个链接深度的链接，然后到达用户可以在我的网站上购买东西的页面。您最好的选择是创建一个独立的注册页面，其中没有指向您的应用程序中任何其他页面的链接。

Apple 希望从任何购买中赚钱，并允许用户在 AppStore 之外进行导航，他们不会从中获利，他们将拒绝您的应用程序。

# nhibernate - 我可以同时支持 Nhibernate 和 RavenDb 吗？

> ID：14216813
> 
> 赞同：3
> 
> 时间：2013-01-08T14:13:34.787
> 
> 标签：nhibernate, ravendb

我正在开发一个已经在 Nhibernate 上运行的应用程序，但我正在考虑使用 RavenDb 来处理一些我发现很难在关系数据库上实现的用例。（例如不使用 EAV 的动态字段）

我已经阅读了 Ayende 在这篇文章中推荐的[这篇文章。](http://ayende.com/blog/4776/support-dynamic-fields-with-nhibernate-and-net-4-0)我不确定从长远来看这是否可行，以及为了获得我的应用程序的动态字段而必须支持 2 个数据库有哪些常见的陷阱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:52:25.800

在来自 Ayende 的链接中，他并不主张拥有两个数据库。只是模式将被扩展以允许将有关实体的其他元数据存储在单独的表中。如果您正在谈论拥有一个混合模式 DA 层，其中部分进入 NHibernate，部分进入 RavenDB，那么您可能会进入分布式事务领域 - 这可能会显着增加您的范围。

您还可以考虑在您的实体表中添加一个附加列，以允许您将一个对象序列化到其中 - 例如它可以是一个字典（您甚至可以使用 Json）。如果您之后不需要*跨*多个实体进行查询，这对您来说没问题。如果您只在查看*特定*实体时需要该数据，那您就可以了。

我已经使用这种方法来存储用户的偏好。我不需要“找到偏好类别 X 具有值 Y 的所有用户”，我只需要说“告诉我用户 A 的所有偏好的所有值”。

**编辑 - 存储 XML**
对于数据库中的序列化对象，您可以使用 xml 数据类型。下面来自 msdn 的链接：-
[在 SQL Server 中实现 XML](http://msdn.microsoft.com/en-us/library/ms189887%28v=sql.105%29.aspx)

这可以达到 2GB，因此您不应该用完空间来存储大量动态值。该字段的流畅映射如下所示：-

```
Map(x=>x.FieldForSerializedThing).CustomType("StringClob")
                                     .Column("[FieldForSerializedThing]")
                                     .Not.Nullable()
                                     .Access.CamelCaseField(Prefix.Underscore); 
```

该实体将具有这样的字段：-

```
public virtual System.String FieldForSerializedThing
{ 
    get { return _fieldForSerializedThing; }
    set { _fieldForSerializedThing = value; }
} 
```

我确信还有其他方法可以进行序列化，但这可能会让你摆脱困境（顺便说一下，上面的示例是针对 SQL Server 的）。

# c++ - 在 Qt 中注册元类型

> ID：14216821
> 
> 赞同：8
> 
> 时间：2013-01-08T14:13:59.803
> 
> 标签：c++, qt

我有一个类，我想在 Qvariant 中使用它，因此我需要声明和注册 Meta 类型。这就是我所做的：

```
class blabla: public QThread
{
   Q_OBJECT
 .
 .
 .
 };
 Q_DECLARE_METATYPE(blabla) 
```

但是这段代码给了我错误：

```
In copy constructor ‘QThread::QThread(const QThread&)’:
instantiated from ‘void* qMetaTypeConstructHelper(const T*) [with T = blabla]’
instantiated from ‘int qRegisterMetaType(const char*, T*) [with T = blabla]’
instantiated from here
‘QObject::QObject(const QObject&)’ is private
 within this context
In file included from UnitTest.cpp:16:0:
blabla.h: In copy constructor ‘blabla::blabla(const blabla&)’:
note: synthesized method ‘QThread::QThread(const QThread&)’ first required here 
In file included from /usr/include/QtCore/qvariant.h:48:0,
             from /usr/include/QtCore/qabstractitemmodel.h:45,
             from /usr/include/QtCore/QtCore:7,
             from /usr/include/QtTest/QtTest:3,
             from UnitTest.h:16,
             from UnitTest.cpp:14:
In function ‘void* qMetaTypeConstructHelper(const T*) [with T = blabla]’:
note: synthesized method ‘blabla::blabla(const blabla&)’ first required here 
make[1]: *** [build/obj/UnitTest.o] Error 1 
```

我想我需要注册我的met-type，但我不确定在哪里可以注册`qRegisterMetaType<MyClass>("MyClass");`。我尝试在元类型声明宏之后使用它，但导致错误。感谢任何将我引向正确道路的评论或提示。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-08T14:17:21.793

放入 a 时会复制对象`QVariant`，但`QObject`无法复制派生类，因此解决方案是使用指向您的类的指针。

```
Q_DECLARE_METATYPE( blabla* ) 
```

也`qRegisterMetaType<T>()`只需要通过排队的信号/插槽连接发送您的对象。

# sql - 替换字符串中的前导字符

> ID：14216823
> 
> 赞同：15
> 
> 时间：2013-01-08T14:14:03.513
> 
> 标签：sql, sql-server, sql-server-2008

如果前两个字符为零，我将如何替换它们？

例子：

```
 1\. 00001
 2\. 00123
 3\. 02451 
```

应该：

```
 1\. 11001
 2\. 11123
 3\. 02451 
```

编辑：忘了提到我在选择子句中需要这个（在视图中）Thanx。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-08T14:16:39.597

```
update  YourTable
set     col1 = '11' + substring(col1, 3, len(col1)-2)
where   col1 like '00%' 
```

在一个视图中，你可以这样做：

```
select   case
         when col1 like '00%' then stuff(col1, 1, 2, '11')
         else col1
         end
from     YourTable; 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!3/7f4af/4/2)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-08T14:18:27.690

```
declare @a varchar(10)

select @a='01123'

Select case when LEFT(@a,2)='00' then STUFF(@a,1,2,'11') else @a end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-08T14:31:31.807

您也可以使用左方法，如下所示

```
select case When left(Name,2) = '00' Then stuff(Name, 1, 2, '11')
     else Name
     end
 from YourTable 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-09-23T20:17:52.707

```
SELECT REPLACE(LEFT(MyCol,2),'00','11')+RIGHT(MyCol,3) 
```

# c# - DataType.Currency 不显眼的验证不起作用

> ID：14216828
> 
> 赞同：1
> 
> 时间：2013-01-08T14:14:18.247
> 
> 标签：c#, jquery, model-view-controller, asp.net-mvc-4, data-annotations

此代码不起作用，有人可以帮助我吗？

模型：

```
 [Display(ResourceType = typeof(HeelpResources), Name = "AdViewModel_Price_Label")]
    [Required(ErrorMessageResourceName = "ErrorMsgRequiredField", ErrorMessageResourceType = typeof(HeelpResources))]
    [DataType(DataType.Currency, ErrorMessageResourceName = "ErrorMsgPriceFormat", ErrorMessageResourceType = typeof(HeelpResources))]
    public decimal Price { get; set; } 
```

在客户端生成：

```
data-val-number="The field Preço: must be a number". 
```

而不是应该在资源“ErrorMsgPriceFormat”中的消息。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:02:58.937

我很确定您将要做的更多是这些方面的事情：

```
public string FormattedPrice { get; set; } 
```

使用您提供的 RegEx 进行装饰，以确保他们输入有效的货币值并将 绑定`input`到该字段。

然后当你开始你的行动时，你会想要做这样的事情[`Decimal.TryParse`](http://msdn.microsoft.com/en-us/library/ew0seb73.aspx)：

```
decimal result;
var success = decimal.TryParse(o.FormattedPrice, NumberStyles.AllowDecimalPoint, CultureInfo.DefaultThreadCurrentCulture, out result); 
```

`o`发布到操作的模型实例在哪里。此外，由于您的文化，`NumberStyles.AllowDecimalPoint`应该翻译为`,`就像在您的示例中所做的那样。我知道这有点倒退，但是这样想，在美国，小数点分隔符`.`对于您的文化是如此，相同的枚举值转换为`,`.

如果解析成功，则为`success`true，您可以设置`result`为`o.Price`.

# vb.net - 文本框到日期时间选择器

> ID：14216832
> 
> 赞同：0
> 
> 时间：2013-01-08T13:36:36.913
> 
> 标签：vb.net

我需要解决这个小问题。

在我的国家（塞尔维亚），我们有 JMBG（即唯一公民号码，也就是公民身份证号码），JMBG 包含 13 个数字，前 7 个数字是出生日期。示例：我的 JMBG 是 2911990710*** 29 代表 29 日，11 代表 11 月，990 代表 1990 年。

现在，我的问题是，当我编写 JMBG 时，我需要在文本框下方的 DateTimePicker 中取回我的生日值，该怎么做？

编辑：当我需要代码示例时，我不知道为什么要从编程迁移到 StackOverFlow

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:32:42.863

我在 harry 这么快的代码（你必须自己检查一些东西）：

```
 Dim sJMBG As String = TextBox1.Text
    Dim sBDate = sJMBG.Substring(0, 7)
    Dim sThous As String = sBDate(4) 'The number specifying if we are in 2000 or in 1900
    Dim iThous As Integer
    iThous = Integer.Parse(sThous)
    sBDate = If(iThous = 9, sBDate.Insert(4, 1), sBDate.Insert(4, 2))

    Dim dat As New Date(sBDate.Substring(4, 4), sBDate.Substring(2, 2), sBDate.Substring(0, 2))
    DateTimePicker1.Value = dat 
```

如果您需要更多信息，请告诉我。

# https - 在 SecurityFilter 中调用 getUserPrincipal 导致 IllegalStateException:Handshake is not completed

> ID：14216834
> 
> 赞同：2
> 
> 时间：2013-01-08T14:14:29.183
> 
> 标签：https, jersey, grizzly, userprincipal

我只是尝试使用 Jersey 1.16 并在我的应用程序中添加 https 支持。使用[Jersey https_grizzly 示例](http://java.net/projects/jersey/sources/svn/show/trunk/jersey/samples/https-clientserver-grizzly/src/main/java/com/sun/jersey/samples/https_grizzly)作为参考，我在 SecurityFilter.authority() 中添加了一行代码

```
final Principal principal = request.getSecurityContext().getUserPrincipal();
if (principal != null){
    System.out.println("principal: " + principal.getName());
} else {
System.out.println("No principal") ;
} 
```

然后我尝试使用 https 启动服务器并将 setNeedClientAuth 设置为 false 以避免通过更改 startServer() 中的 Server.java 来使用客户端证书：

```
webServer = GrizzlyServerFactory.createHttpServer(
                getBaseURI(),
                null,
                true,
                new SSLEngineConfigurator(sslContext).setClientMode(false).setNeedClientAuth(false)
        ); 
```

setNeedClientAuth(false) 中的布尔参数最初为 true，以便请求客户端证书。我认为通过这种方式，我的应用程序可以适应有证书和没有证书的客户。如果没有证书，getUserPrincipal() 可能会返回 null，以便我知道这是一个匿名用户。不幸的是，在这种情况下，系统引发如下异常并且客户端没有收到任何信息：

```
java.lang.IllegalStateException: Handshake is not completed!
at org.glassfish.grizzly.ssl.SSLFilter.accurateWrite(SSLFilter.java:569)
at org.glassfish.grizzly.ssl.SSLFilter.handleWrite(SSLFilter.java:216)
at org.glassfish.grizzly.filterchain.ExecutorResolver$8.execute(ExecutorResolver.java:111)
at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:265)
at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeChainPart(DefaultFilterChain.java:200)
at org.glassfish.grizzly.filterchain.DefaultFilterChain.execute(DefaultFilterChain.java:134)
at org.glassfish.grizzly.filterchain.DefaultFilterChain.process(DefaultFilterChain.java:112)
at org.glassfish.grizzly.ProcessorExecutor.execute(ProcessorExecutor.java:78)
at org.glassfish.grizzly.filterchain.FilterChainContext.write(FilterChainContext.java:652)
at org.glassfish.grizzly.http.server.io.OutputBuffer.writeContentBuffer0(OutputBuffer.java:908)
at org.glassfish.grizzly.http.server.io.OutputBuffer.flushBinaryBuffers(OutputBuffer.java:893)
at org.glassfish.grizzly.http.server.io.OutputBuffer.flushAllBuffers(OutputBuffer.java:864)
at org.glassfish.grizzly.http.server.io.OutputBuffer.flush(OutputBuffer.java:678)
at org.glassfish.grizzly.http.server.NIOOutputStreamImpl.flush(NIOOutputStreamImpl.java:91)
at org.glassfish.grizzly.servlet.ServletOutputStreamImpl.flush(ServletOutputStreamImpl.java:101)
at com.sun.jersey.spi.container.servlet.WebComponent$Writer.flush(WebComponent.java:315)
at com.sun.jersey.spi.container.ContainerResponse$CommittingOutputStream.flush(ContainerResponse.java:145)
at sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:297)
at sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:141)
at java.io.OutputStreamWriter.flush(OutputStreamWriter.java:229)
at java.io.BufferedWriter.flush(BufferedWriter.java:254)
at com.sun.jersey.core.util.ReaderWriter.writeToAsString(ReaderWriter.java:191)
at com.sun.jersey.core.provider.AbstractMessageReaderWriterProvider.writeToAsString(AbstractMessageReaderWriterProvider.java:128)
at com.sun.jersey.core.impl.provider.entity.StringProvider.writeTo(StringProvider.java:88)
at com.sun.jersey.core.impl.provider.entity.StringProvider.writeTo(StringProvider.java:58)
at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:306)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1479)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1391)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1381)
at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
at org.glassfish.grizzly.servlet.FilterChainImpl.doFilter(FilterChainImpl.java:147)
at org.glassfish.grizzly.servlet.FilterChainImpl.invokeFilterChain(FilterChainImpl.java:106)
at org.glassfish.grizzly.servlet.ServletHandler.doServletService(ServletHandler.java:252)
at org.glassfish.grizzly.servlet.ServletHandler.service(ServletHandler.java:188)
at org.glassfish.grizzly.http.server.HttpHandler.doHandle(HttpHandler.java:164)
at org.glassfish.grizzly.http.server.HttpHandlerChain.service(HttpHandlerChain.java:196)
at org.glassfish.grizzly.http.server.HttpHandler.doHandle(HttpHandler.java:164)
at org.glassfish.grizzly.http.server.HttpServerFilter.handleRead(HttpServerFilter.java:175)
at org.glassfish.grizzly.filterchain.ExecutorResolver$9.execute(ExecutorResolver.java:119)
at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:265)
at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeChainPart(DefaultFilterChain.java:200)
at org.glassfish.grizzly.filterchain.DefaultFilterChain.execute(DefaultFilterChain.java:134)
at org.glassfish.grizzly.filterchain.DefaultFilterChain.process(DefaultFilterChain.java:112)
at org.glassfish.grizzly.ProcessorExecutor.execute(ProcessorExecutor.java:78)
at org.glassfish.grizzly.nio.transport.TCPNIOTransport.fireIOEvent(TCPNIOTransport.java:815)
at org.glassfish.grizzly.strategies.AbstractIOStrategy.fireIOEvent(AbstractIOStrategy.java:112)
at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy.run0(WorkerThreadIOStrategy.java:115)
at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy.access$100(WorkerThreadIOStrategy.java:55)
at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy$WorkerThreadRunnable.run(WorkerThreadIOStrategy.java:135)
at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:567)
at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.run(AbstractThreadPool.java:547)
at java.lang.Thread.run(Thread.java:722) 
```

为什么在这种情况下我不能使用 getUserPrincipal() ？有人知道吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:58:57.107

调用 getUserPrincipal() 将执行重新协商，请求客户端提供证书链。在这种情况下，ssl 层引发了证书链为空的异常，但是，Grizzly 没有引发异常（它可能应该）。因为它不抛出它，所以 SSLEngine 处于不正确的状态，导致您在上面描述的异常。

我已经记录了一个[问题](http://java.net/jira/browse/GRIZZLY-1397)以更好地处理这种情况。

# windows-phone-7 - 从 wp 中的 Web 服务器动态加载启动画面

> ID：14216843
> 
> 赞同：0
> 
> 时间：2013-01-08T14:14:59.943
> 
> 标签：windows-phone-7, windows-phone-8

我正在开发 Windows Phone 8 应用程序，应用程序中的启动画面应该从 Web 服务器动态加载。有谁知道我应该如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:43:43.540

遗憾的是，使用默认行为是不可能的 - 启动画面必须位于具有预定义文件名的应用程序的根文件夹中。
您可以做的是使用初始自定义页面模拟开始屏幕并在那里显示您想要的任何内容，例如 Skype 在他们的 WP8 应用程序中使用的东西。
请注意，在 WP8 应用程序中不再需要使用闪屏，因为与 WP7 相比，应用程序的加载时间得到了显着改善。

# xml - 使用 dhtmlxGrid 和 Chrome 在 Chrome 中出错，但在 FireFox 中没有错误

> ID：14216846
> 
> 赞同：0
> 
> 时间：2013-01-08T14:15:03.267
> 
> 标签：xml, google-chrome, firefox

我正在研究 dhtmlxGrid [http://docs.dhtmlx.com/doku.php?id=dhtmlxgrid:how_to_populate_it_with_data](http://docs.dhtmlx.com/doku.php?id=dhtmlxgrid:how_to_populate_it_with_data)的教程，我遇到了一些奇怪的事情。

按照教程，我在使用 Chrome（版本 23.0.1271.97 m）的这一步时遇到错误，但它在 Firefox（17.0.1）中运行良好

错误是：XMLHttpRequest 无法加载 file:///C:/tools/Apache2.2/htdocs/dhtmlGrid/dhtmlxGrid/step3.xml。Access-Control-Allow-Origin 不允许 Origin null。

我检查了FF上的FireBug，没有这样的错误。我只是好奇为什么这在一个浏览器和另一个浏览器中都有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:35:43.243

固定：我认为。

当不从本地文件访问它时，它似乎工作正常。因此，如果我通过网络服务器，它将填充。如果我在网络浏览器中将其作为文件打开，它将抛出上面列出的错误。

# jquery - 如何在悬停时在图像上创建摆动效果

> ID：14216847
> 
> 赞同：2
> 
> 时间：2013-01-08T14:15:05.233
> 
> 标签：jquery

我正在尝试在我的主页上的一些图像上创建摆动效果！

当我将鼠标悬停在图像上时，我想完成此操作。我有以下html：

> ```
> <div id="Background">
> <br /><br />
>     <div class="Menu">
>        <div>
>        <button class ="ButtonClass">Activities</button>
>        <button class ="ButtonClass">Offers</button>
>        <button class ="ButtonClass">Skills</button>
>        </div>
>     </div>
>     <div id="Content">
>     <h1>Activities</h1>
> 
>     <div id ="newsSection">
> 
>      <h4>
>                 <span class="subhead">Satan Kommer ej</span></h4>
>             <p>
>                !</p>
>             <h4>
>                 <span class="subhead">Börjar den 14 December!</span></h4>
>             <p>
>            </p>
>             <h4>
>                 <span class="subhead">2012 top </span></h4>
> 
>                <table id="theList">
>                   <thead>
>                   <tr>
>                       <th>Namn</th>
>                       <th>has</th>
>                   </tr>
>                   </thead>
>                   <tbody>
>                   <tr>
>                       <td>Henrik</td>
>                       <td>500k</td>
>                   </tr>
>                   <tr>
>                       <td>Erik</td>
>                       <td>450k</td>
>                   </tr>
>                   <tr>
>                       <td>Samer</td>
>                       <td>400K</td>
>                   </tr>
>                   <tr>
>                       <td>Jakob</td>
>                       <td>350K</td>
>                   </tr>
>                   <tr>
>                       <td>Pontus</td>
>                       <td>300k</td>
>                   </tr>
>                   <tr>
>                       <td>Peder</td>
>                       <td>250K</td>
>                   </tr>
>                   <tr>
>                       <td>Chefen</td>
>                       <td>200K</td>
>                   </tr>
>                   <tr>
>                       <td>Johan</td>
>                       <td>150K</td>
>                   </tr>
>                   <tr>
>                       <td>Tania</td>
>                       <td>100K</td>
>                   </tr>
>                   <tr>
>                       <td>Perica</td>
>                       <td>54K</td>
>                   </tr>
>                   </tbody>
>                 </table>   
> 
>     </div>
>     <br />
>     <h5>peps:</h5>    
> 
>     <div id="Consultants">
> 
>      <img src="/images/erik.jpg" alt="" width="70" height="70" float ="left" />
>      <img src="/images/PONY.jpg" alt="" width="70" height="70" float ="left" />
>      <img src="/images/peder.jpg" alt="" width="70" height="70" float ="left" />
>      <img src="/images/sael.jpg" alt="" width="70" height="70" float ="left" />
> 
>     </div>
> 
>     </div> 
>     </div>
>     <br />
> 
> </body>
> </html> 
> ```

我有以下 jquery 代码：

```
$(function () {

  $("#Consultants img").hover(wiggle, wiggle);

    function wiggle(evt) {
    $(this).wiggle()

    };
}; 
```

当我添加代码并按下“代码示例”按钮时，它似乎不起作用，所以我不得不像这样抱歉。

我的问题是我在网上尝试了几种解决方案，但无法使它们起作用，所以在尝试了几个小时后，我决定寻求帮助。

jquery 代码可能不是 100% 正确，但它更像是一个代码示例，以便您了解我想要做什么。我希望你能填写剩下的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:36:50.963

好吧，既然你很沮丧，就用这个[插件](http://www.class.pm/files/jquery/jquery.wiggle/demo/)：

在您的情况下，该插件只是简单地触发点击元素（例如图像）的摆动动画，但由于您需要`wiggle effect on a image when hovering`，因此只需使用[悬停](http://api.jquery.com/hover/)功能，例如：

```
$('div#wigglewrapper img').hover(function(){
    $(this).wiggle('start');
},function(){
    $(this).wiggle('stop');
}); 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-30T03:32:40.180

这是一个没有插件的摆动功能。只是jquery...

```
var wiggle = function(myelement) {
  $(myelement)
    .animate({'left':(-10)+'px'},200)
    .animate({'left':(+20)+'px'},200)
    .animate({'left':(-10)+'px'},200);
 }; 
```

像这样称呼它：

```
wiggle('#myelement'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-08T12:45:58.680

@Octopus 的答案（不再？）有效。首先，动画是异步的，所以它们可能以任何顺序触发，所以你必须在`complete`回调中嵌套后续动画，并传递`'-10px'`设置绝对值，所以你需要`'-=10px'`. 此外，`left`不适用于所有元素（两者都不是`margin`通用的，因此您可能需要进行实验）。

这是我对 Octopus 答案的快速而肮脏的改编，当您需要该功能时使用它并继续前进：

```
var parent = $('your-selector');

parent.animate(
    {'margin-right' : '-=5px', 'margin-left' : '+=5px'},
    200,
    function() {
        parent.animate(
            {'margin-right' : '+=10px', 'margin-left' : '-=10px'},
            100,
            function() {
                parent.animate({'margin-right' : '-=5px', 'margin-left' : '+=5px'}, 200)
            })
    }) 
```

# c++ - 引用似乎是不变的。为什么不在参数中？

> ID：14216848
> 
> 赞同：1
> 
> 时间：2013-01-08T14:15:14.793
> 
> 标签：c++, reference

测试一：

```
 #include <iostream>
    void function(int &parameter);
    int main()
    {
        int variableOne = 0;
        int variableTwo = 6;
        function(variableOne);
        std::cout << variableOne << std::endl;
        function(variableTwo);
        std::cout << variableTwo << std::endl;
        return 0;
    }
    void function(int &parameter) // ???
    {
        parameter += 5;
    } 
```

测试二：

```
 #include <iostream>
    int main()
    {
        int variableOne = 2;
        int variableThree = 7;
        int &variableTwo = variableOne;
        std::cout << variableOne << std::endl;
        &variableTwo = variableThree; // ERROR (wrong side of operand etc...)
        std::cout << variableThree << std::endl;
        return 0;
    } 
```

1) 那么为什么 ¶meter 可以多次赋值（参数的），（测试一）但 &variableTwo（测试二）不能？

2）这是因为，（测试一）参数的内存地址分配给variableOne和variableTwo？或者，variableOne 的值是否被分配给参数，然后是 variableTwo ？

3）也许，每次调用函数时都会创建一个新的参数实例吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T14:23:16.777

当您`function`使用不同的参数调用时，您会在每次调用时创建对该参数的新引用。

```
&variableTwo = variableThree; 
```

在这里，您尝试将 的值分配`variableThree`给 的*地址* `variableTwo`，这是非法的（也没有任何意义）。

此外，引用在创建后不能重新安装。因此，即使以下内容也是非法的。

```
int &variableTwo = variableOne;
variableTwo = variableThree; 
```

请注意，同样的规则也适用于函数。如果您尝试重新分配输入参数以引用其他整数，则代码将无法编译。

```
void function(int &parameter)
{
    int local = 42;

    parameter += 5;
    parameter = local; // error!
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:17:45.447

这行代码：`&variableTwo = variableThree;`不符合您的期望。`&variableTwo`是 variableTwo 的地址，而不是对它的引用。因此，您尝试将某些内容分配给地址，这当然不会以这种方式编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:23:54.523

创建引用时，它必须绑定到某些东西，并且以后不能引用其他东西。

但是当一个函数参数通过引用传递时，好吧，这样想，每次调用函数时，都会为传入的变量创建一个不同的引用。

没有矛盾，对吧？

# c - 编写 C 库接口时，适合使用哪种类型的布尔值？

> ID：14216849
> 
> 赞同：0
> 
> 时间：2013-01-08T14:15:17.977
> 
> 标签：c, interface, boolean

在编写一个 C 库以供其他语言调用并可能编译到多个平台时，哪种类型最适合表示布尔值？

我不能在当前项目中使用 C99，但如果可以，C99s bool 是否合适？

**编辑：** 我倾向于 unsigned char 或 unsigned int。是否有任何理由明确指定有符号或无符号，是否有助于避免任何歧义或陷阱，还是我应该简单地使用 int？

但是，当查看我使用的一些第三方库和其他关于 C、C++、Obj C 的线程时，似乎大多数库和语言设计者对哪种类型最适合用于 bools 有自己的想法。

现在这真的不是问题，因为此代码仅使用一个编译器为一个平台编译，但它可能稍后会被移植。

哪个是布尔类型以最大限度地提高可移植性的最佳选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:16:08.503

> 在编写一个 C 库以供其他语言调用并可能编译到多个平台时，哪种类型最适合表示布尔值？

通常，您会发现人们只是将其 typedef 为`int`，因为从计算的角度来看，这通常是最有效的（`int`通常是平台的本机类型）。但实际上，任何整数类型都可以。如果您特别关心内存使用情况，请使用`char`.

> 我不能在当前项目中使用 C99，但如果可以，C99s bool 是否合适？

是的！

> 我倾向于 unsigned char 或 unsigned int 因为值 unsigned zero 在大多数情况下可能具有相同的表示？

我不知道如何回答这个问题；你为什么关心底层的表示？

# macos - NSTablview NSTextFieldCell SetSelectable -

> ID：14216852
> 
> 赞同：0
> 
> 时间：2013-01-08T14:15:29.583
> 
> 标签：macos, delegates, nstableview, nstextfieldcell

我试图让一个 nstextfieldcell 为特定条件取消选择。我附上了示例代码：

```
 -(void)tableView:(NSTableView *)tableView willDisplayCell:(id)cell forTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row{
if(tableView == resizeTV){
    if([[tableColumn identifier] isEqualToString:@"Name"]){
        if([[cell stringValue] isEqualToString:@"Cate"]){
            [cell setSelectable:FALSE];

        }
    }
  }
} 
```

在检查条件时仍选择该单元格。我已将 tableview 绑定到 tabledatasource 和 datadelegate 的类名。我仍然可以选择单元格。我做错了吗？ ![实验台](../Images/5bffdbcd7e32cb690c9c56da2317b34b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T05:30:23.813

使用 NSTableView 方法取消选择单元格`setSelectionHighlightStyle:`

```
-(void)tableView:(NSTableView *)tableView willDisplayCell:(id)cell forTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row{
    if(tableView == resizeTV){
        if([[tableColumn identifier] isEqualToString:@"Name"]){
            if([[cell stringValue] isEqualToString:@"Cate"]){
               [table_view setSelectionHighlightStyle:NSTableViewSelectionHighlightStyleNone];

            }
      }
 } 
```

}

使用此委托方法取消选择特定行

```
- (BOOL)tableView:(NSTableView *)tableView shouldSelectRow:(NSInteger)row
{
    if (row==7)
    {
        [table_view setSelectionHighlightStyle:NSTableViewSelectionHighlightStyleNone];

    }
    else
    {
        [table_view setSelectionHighlightStyle:NSTableViewSelectionHighlightStyleSourceList];

    }
    return YES;

} 
```

# .net - 什么可能导致空白 XML 文件？

> ID：14216856
> 
> 赞同：7
> 
> 时间：2013-01-08T14:15:45.077
> 
> 标签：.net, xml, .net-4.0

我正在将 C# 与 .NET 4.0 一起使用，并且我正在尝试调试我的应用程序的一个罕见问题，有时程序会将我的 .xml 文件读取和写入配置设置，并将写入一个空白 XML 文件。

问题是我无法在详尽尝试后重新创建它，所以我想我可能会确保不存在内置`XmlDocument.Save()`功能可能导致空白文件的已知情况。

修改 XML 文件的唯一方法是使用内置的内存`XmlNode.AppendChild()`，`XmlNode.ReplaceChild()`因此我希望问题发生在其中一个函数中或使用该函数写入磁盘时`XmlDocument.Save()`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T13:10:31.273

我找到[了这个](http://social.msdn.microsoft.com/forums/en-US/clr/thread/11535a79-e565-4f6d-bb19-e47054508133)线程。特别是倒数第二个答案可能值得一试。引用：

似乎可行的解决方法是替换：

```
doc.Save("c:\temp\Output.xml") 
```

和

```
IO.File.WriteAllText("c:\temp\Output.xml", doc.OuterXml); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T20:21:29.280

我理解正确，您正在加载空白 xml 文件并添加配置设置并将其保存回来。

如果是这种情况，您可能想要检查该 xml 文件的写入权限，有时如果您没有权限，它不会将任何内容写入文件。

我希望它可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T11:26:29.920

我有一个类似的问题。我有

```
var infoTableWriter = new XmlTextWriter(saveFileDialog.FileName, new UTF8Encoding(false));
xmlInfoTableDoc.Save(infoTableWriter); 
```

没有关闭作家，所以它保存了一个空（0字节）文件

```
var infoTableWriter = new XmlTextWriter(saveFileDialog.FileName, new UTF8Encoding(false));
xmlInfoTableDoc.Save(infoTableWriter);
infoTableWriter.Close(); 
```

工作正常。我希望这有帮助。

# c - lpc1788上的双缓冲

> ID：14216857
> 
> 赞同：1
> 
> 时间：2013-01-08T14:15:46.493
> 
> 标签：c, embedded, heap-memory, double-buffering

我面临着很大的担忧。我目前正在参加一个三明治课程，我正在自学如何在嵌入式系统上开发软件——碰巧是在 open1788 板上。

我计划实现双缓冲功能，因为我可以在我的 LCD 屏幕上看到闪烁。确实可以在绘制时查看形状！

使用双缓冲，重绘整个屏幕的速度足够快。也许我应该深入研究管理剪辑，这样我只需要重绘需要的部分屏幕？但这不是问题。

所以，我写了几个函数来处理双缓冲选项的选择。如果我不希望软件使用双缓冲，那么我不会为它分配内存；否则我会。

问题是为堆分配的默认空间高达 1024 字节。我的临时缓冲区的长度为 261120 字节！（481 像素宽每 272 像素高，每个 16bpp）。

结果，malloc 返回 NULL。

我采取的第一个解决方案是放置一个静态缓冲区，我的意思是：

```
static WORD s_double_buf[481*272]; 
```

但明显的缺点是即使您不使用双缓冲，它仍然会被分配。

第二种解决方案是编辑配置文件以使堆更大，每替换 1024 字节，例如 1048576 字节 (0x100000)。我不喜欢这个解决方案，因为我应该专注于节省内存空间。

也许我非常怀念嵌入式编程技能？根据这一点，最好的解决方案是什么？我怎样才能取得进步？我不会告诉你我阅读和挖掘数据表的杂乱能力。

如果有人可以为我提供初学者参考资料，我将非常感激，这些参考资料主要适用于我正在编程的电路板。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T14:53:27.840

在嵌入式空间中，您通常会决定是否在编译时而不是在运行时使用双缓冲等基本方面。因此使用预处理器和条件编译是完全可以接受的：

```
#ifdef WITH_DOUBLEBUFFERING

    static WORD s_double_buf[481*272];
    #define SCREEN s_double_buf

#else

    #define SCREEN your_real_framebuffer

#endif 
```

在您的 GUI 库的实现中，您将绘制到 SCREEN。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T13:28:34.040

对于嵌入式系统，您通常希望在启动时分配所有内存。这意味着你已经知道你有足够的能力去做你想做的一切，这意味着它不会在运行中失败，这通常是一件好事，尤其是对于嵌入式系统而言。

静态分配内存——这很容易，而且看起来你有多余的空间。如果以后您发现内存不足*并且*可以在没有双缓冲的情况下逃脱，那么您可以轻松地将其取出。

如果您确实使用`malloc`，请在启动时完成所有操作，那么您将不必在正常操作期间从内存不足中恢复。

# should.js - 如何启动机车服务器/应用程序进行集成测试？

> ID：14216861
> 
> 赞同：0
> 
> 时间：2013-01-08T14:15:51.473
> 
> 标签：should.js, locomotivejs, supertest

我正在将 Express 应用程序转换为 Locomotive，但我无法弄清楚如何迁移我的测试。

在 Express 中，我只是在我的`/test/test.api.organization.js`文件中执行此操作：

```
var app = require("../app").app,
  request = require("supertest");
  should = require("should");

describe("Organization API", function() {
  it( "GET /api/v1/organizations should return status 200 and Content-Type: application/json.", function (done) {
    postReq.done( function () {
      request(app)
        .get( "/api/v1/organizations" )
        .set( "Authorization", authData )
        .expect( 200 )
        .expect( 'Content-Type', /application\/json/, done );
    });
  });
} 
```

就是这样 - 只需`require`'ing 应用程序文件就足够了。但是 Locomotive 没有`app.js`or`server.js`文件，服务器只是从命令行用`lcm server`.

如何启动服务器/应用程序并使我的测试再次工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:20:47.530

您可以自己启动 Locomotive 应用程序：

```
var locomotive = require('locomotive');

describe('Test Name', function() {
  before(function(done) {
    // instantiate locomotive app
    this.app = new locomotive.Locomotive();
    this.app.boot(ROOTDIRECTORY, ENVIRONMENT, function() {
      done();
    });
  });
  // your test cases
}); 
```

ROOT_DIRECTORY 是您的 Locomotive 项目所在的目录，ENVIRONMENT 是您希望 Locomotive 应用程序运行的环境（通常`test`）。

# git - 使用 git 推送时出错（错误：无法锁定现有信息/参考）

> ID：14216864
> 
> 赞同：0
> 
> 时间：2013-01-08T14:16:01.220
> 
> 标签：git, git-svn

我一直在用 Subversion 做一个项目，我们最近决定改用 git。

我使用 git-svn 创建了一个新的 git 本地存储库，并在服务器上运行：

```
mkdir myproject.git
cd myproject.git
git init --bare
git update-server-info 
```

我运行 git update-server-info 因为我使用的是 HTTP。

在我计算机上的本地存储库上，我运行：

```
cd myproject
git remote add origin http://url.to.my.server/git/repositories/myproject.git
git push origin --all 
```

然后我从上一个命令中收到此错误消息：

```
Unable to create branch path http://path.to.my.server/git/repositories/myproject.git/info/
error: cannot lock existing info/refs
fatal: git-http-push failed 
```

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T07:34:48.330

好的，我解决了我的问题。

实际上，我需要将我的用户名和密码添加到 URL。我用以下方法解决了这个问题：

```
git remote set-url origin http://username:password@path.to.my.server/git/repositories/myproject.git 
```

# c - C99+中结构的部分赋值

> ID：14216866
> 
> 赞同：8
> 
> 时间：2013-01-08T14:16:08.617
> 
> 标签：c, c99, c11

抱歉英语不好。

假设代码（C99 或更高版本）：

```
typedef struct {
    int a, b;
} foo_t;

foo_t f = { .a = 1, .b = 2  };

f = (foo_t){ .b = 3 }; 
```

现在是什么`f.a`？C标准对此有什么说法吗？

我知道对于部分*初始化*，标准保证所有未初始化的成员都将被初始化为“适当的零”（`0`对于整数、`0.0`浮点数、`NULL`指针等）。但是最后一条语句不是初始化（据我所知），因为`f`它已经存在。我很困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T14:30:48.143

C99 标准的第*6.5.2.5 节复合文字*中的第 6 点指出：

> 复合文字的值是由初始化列表初始化的未命名对象的值。

`foo_t`通过您提到的相同规则，未命名的部分被初始化。

最后一条语句是*assignment*，但复合文字是由初始化列表初始化的未命名对象。意味着赋值后的`unnamed.a`值为零并且`f.a`为零。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T14:31:27.723

在这个表达式中：

```
f = (foo_t){ .b = 3 }; 
```

`(foo_t){ .b = 3 }`是复合文字，即`foo_t`类型的左值，已部分初始化。它仍然是部分初始化，所以同样的规则适用：

**C11 6.7.9/21：**

> 如果大括号括起来的列表中的初始值设定项少于聚合的元素或成员，或者用于初始化已知大小数组的字符串文字中的字符少于数组中的元素，则聚合的其余部分应隐式初始化与具有静态存储持续时间的对象相同。

只有在复合文字被初始化后，您才能将其分配给`f`.

这相当于：

```
foo_t f = { .a = 1, .b = 2  };
foo_t c = { .b = 3 };
f = c; 
```

如果您不熟悉复合文字，[GCC 有很好的文档](http://gcc.gnu.org/onlinedocs/gcc/Compound-Literals.html)。

# c++ - 多态性和数据成员 C++

> ID：14216868
> 
> 赞同：0
> 
> 时间：2013-01-08T14:16:21.527
> 
> 标签：c++, variables, polymorphism, data-members

我遇到了多态性问题，我已经设置了这些基本类，稍后将添加方法，但我希望可以从这些类中访问不同的数据成员。

```
class square
{
public:
    bool canBeBought;
    string name;
};

class property : public square
{ 
public:
    int rent;
    int colour;
    int cost;
    bool bought;
};

class specialSquare : public square
{
private:

public:
}; 
```

这是我正在调用的代码

```
square* properties[23];
for(int i = 0; i < 23; i++)    
{
    if(propertyStrings.at(i).substr(0,8) == "Property")
    {
        istringstream ss(propertyStrings.at(i).substr(11,21));
        string temp;
        properties[i] = new property;
        while(!ss.eof())
        {
            properties[i]->bought = false;
            properties[i]->name = propertyStrings.at(i).substr(0,11);
            cout << "Name: " << properties[i]->name << endl;
            ss >> temp;
            properties[i]->cost = atoi(temp.c_str());
            cout << "Cost: "<< properties[i]->cost << endl;
            ss >> temp;
            properties[i]->rent = atoi(temp.c_str());
            cout << "Rent: "<< properties[i]->rent << endl;
            ss >> temp;
            properties[i]->colour = atoi(temp.c_str());
            cout << "Colour: "<< properties[i]->colour << endl << endl;

            break;
        }
    }
} 
```

我的问题是，因为 name 变量在 square 类中它工作正常，但属性类的数据成员没有被识别。我的目标是尝试将所有方形数据存储在一个数组中，即属性类和 specialSquare 类，因为这将使以后在我的程序中变得更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:31:01.473

我猜您的问题是编译器无法将您的“属性”指针识别为指向类属性的实例，因为您将它们保存为指向 Square 的指针。将 properties[i] 转换为指向类 Property ( `((property*)properties[i])->colour`) 的指针应该可以解决问题（您明确告诉编译器这实际上是那个类，并且您已确保它不能是另一个类）。

如果 Property 和 Special_Square 实际上不是 Squares，那么多态在这里可能是错误的选择。还有其他方法可以完成任务，例如通过一系列变体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:28:16.110

你为什么不只拥有一个派生类型的数组？数组是否需要包含多种Square？如果是这样，您可以使用 dynamic_cast<> 来更改指针的类型。

但是，我不会使用指针数组。如果您使用其中一个 std 库集合，您将在内存管理方面省去很多麻烦......

```
 void DoSomething(std::vector<property>& properties)
    {
        // do something with...
    }

    int _tmain(int argc, _TCHAR* argv[])
    {
        std::vector<property> properties;

        property x;
        x.cost = 1234;

        properties.push_back(x);

        DoSomething(properties);

        return 0;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:30:39.400

这很正常，因为*properties[i]*是一个*方形*指针，请查看您的声明：

```
square* properties[23]; 
```

这意味着您只能访问*square*类成员，即*canBeBought*和*name*。

解决方法是更换：

```
properties[i] = new property; 
```

经过：

```
property * prop = new property;
properties[i] = prop; 
```

然后，在您的*while*循环中，只需使用***prop->***而不是***properties[i]->***。

# c++ - 结束使用 ShellExecute 函数启动的 C++ 程序的最佳方法是什么？

> ID：14216869
> 
> 赞同：1
> 
> 时间：2013-01-08T14:16:26.187
> 
> 标签：c++, c, visual-c++

结束从主程序使用 ShellExecute 函数启动的 c++ 程序的最佳方法是什么？喜欢..

```
 ShellExecute(hwnd, TEXT("open"), TEXT("c:\\tools\\123\\myProgram.exe"),
              TEXT(""), NULL, 0); 
```

在这种情况下，启动的程序是“我的 Program.exe”，我想结束它们。主程序和启动的程序控制台应用程序都是用 vc++ 编写的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:41:09.253

在子程序中：

```
int main(/*...*/) {
    //...
    return 0;
} 
```

您可以通过进程间通信或通过将某种控制序列发送到子程序的`stdin`. 如果有消息泵， 发布`WM_QUIT`或发送到其他进程也应该可以工作。`WM_CLOSE`

`TerminateProcess()`将结束程序，但这肯定不是最好的方法。（清理未运行）

`Exit(0)`这也不是一个坏方法，但它也需要告诉子程序它应该终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:56:32.943

最好的方法是正常退出子进程（返回）。这总是比试图从另一个进程中终止要好，因为您永远无法知道子进程处于什么状态。您可以使用像事件这样的内核对象，甚至可以创建一个文件以便子进程看到。这应该发出退出的信号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T14:36:40.303

使用 CreateProcess 生成过程会更好。您可以使用进程 ID 优雅地终止生成的进程：

在子进程中，通过调用 SetConsoleCtrlHandler 注册 ctrl handler。在句柄中处理 CTRL_CLOSE_EVENT。

当您准备好终止子进程时，调用 EnumWindows 传递从您作为 LPARAM 传递给 CreateProcess 的 PROCESS_INFORMATION 结构获得的进程 ID。

在枚举 windows 过程中调用 GetWindowThreadProcessId 并与您传递的 LPARAM 进行比较，如果它们匹配，则调用 PostMessage 或 SendMessage，将 windows 句柄、WM_SYSCOMMAND 消息、SC_CLOSE 命令作为 WPARAM 和 0 作为 LPARAM；

您的子进程将收到 CTRL_CLOSE_EVENT 控件类型。在处理程序中，在返回之前调用将执行清理和退出的函数。之后从处理程序返回 TRUE。

# c# - 多关键词搜索

> ID：14216872
> 
> 赞同：0
> 
> 时间：2013-01-08T14:16:31.083
> 
> 标签：c#, jquery, asp.net

在我的应用程序中，我使用的是**asp.net、c#、jquery**，并且我有如下要求：

我有一个 xml 文件“Mobile.xml”，其内容如下：

```
<Mobiles>
  <Mobile Id="1">
    <MDetails ModelNo="1" Desc="x phone color red"/>
    <MDetails ModelNo="2" Desc="x phone color green"/>
    <MDetails ModelNo="3" Desc="x phone color blue"/>
    <MDetails ModelNo="4" Desc="x phone color black"/>
    <MDetails ModelNo="5" Desc="x phone color yellow"/>
    <MDetails ModelNo="6" Desc="x phone color pink"/>
    <MDetails ModelNo="7" Desc="x phone color gray"/>
    <MDetails ModelNo="8" Desc="x phone color silver"/>
    <MDetails ModelNo="9" Desc="x phone color orange"/>
  </Mobile>
  <Mobile Id="2">
    <MDetails ModelNo="11" Desc="y phone color red"/>
    <MDetails ModelNo="12" Desc="y phone color green"/>
    <MDetails ModelNo="13" Desc="y phone color blue"/>
    <MDetails ModelNo="14" Desc="y phone color black"/>
    <MDetails ModelNo="15" Desc="y phone color yellow"/>
    <MDetails ModelNo="16" Desc="y phone color pink"/>
    <MDetails ModelNo="17" Desc="y phone color gray"/>
    <MDetails ModelNo="18" Desc="y phone color silver"/>
    <MDetails ModelNo="19" Desc="y phone color orange"/>
  </Mobile>
  <Mobile Id="3">
  ......
  <Mobile>
  ......
</Mobiles> 
```

我*想获取* **与多个*关键字***相关的所有标签的详细信息，其中关键字将从输入搜索字符串中获取。

就像如果搜索字符串是**“x phone color red green”**那么它应该返回标签的详细信息：

```
<MDetails ModelNo="1" Desc="x phone color red"/>
<MDetails ModelNo="2" Desc="x phone color green"/> 
```

如果搜索字符串是：**“phone color red green”**，那么它应该返回：

```
<MDetails ModelNo="1" Desc="x phone color red"/>
<MDetails ModelNo="2" Desc="x phone color green"/>
<MDetails ModelNo="11" Desc="y phone color red"/>
<MDetails ModelNo="12" Desc="y phone color green"/> 
```

我尝试了以下代码，但还不够：

```
public void doSearch(string strSearchContent)
{
    string[] strArrSearchContents;
    strArrSearchContents = strSearchContent.Split(' ');

    string fileName = HttpContext.Current.Server.MapPath(@"~\XMLFiles/Mobile.xml");
    XDocument doc = null;
        if (System.IO.File.Exists(fileName))
        {
            doc = XDocument.Load(fileName);

            IEnumerable<XElement> list1 =
                from elements in doc.Descendants("MDetails")
                where
                    elements.Attribute("Desc").Value.Trim().ToLower().Contains(strArrSearchContents[0]) &&
                    elements.Attribute("Desc").Value.Trim().ToLower().Contains(strArrSearchContents[1]) &&
                    elements.Attribute("Desc").Value.Trim().ToLower().Contains(strArrSearchContents[2]) &&
                    elements.Attribute("Desc").Value.Trim().ToLower().Contains(strArrSearchContents[3]) &&
                    elements.Attribute("Desc").Value.Trim().ToLower().Contains(strArrSearchContents[4])
                select elements;

        }
} 
```

上面的代码根本不是这种搜索的解决方案......但我已经描述了我的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:03:12.693

I wrote something a bit more generically but I think you can use it. Basically, it is a linq query that says: for each word in the description, make sure it is contained in the list of things to find.

```
string toFind = "x phone color red green";
string[] toFindStuff = toFind.Split(' ');
List<string> desc = new List<string>{ "x phone color red", "y phone color green", "x phone color blue", "x phone color green"};
List<string> filtered = desc.Where(x => x.Split(' ').All(y => toFindStuff.Contains(y))).ToList(); 
```

result:

```
List<String> (2 items) 
x phone color red 
x phone color green 
```

# php - php - 无法执行在 phpMyAdmin 中工作的 mysql

> ID：14216880
> 
> 赞同：0
> 
> 时间：2013-01-08T14:16:53.497
> 
> 标签：php, mysql, phpmyadmin

我有这张桌子玩游戏

```
scores (user,score) 
```

里面有一些条目，我有这个查询：

```
SET @row_num = 0; 
SELECT @row_num := @row_num + 1 as row_index, user, score FROM scores ORDER BY score DESC 
```

它适用于 phpmyadmin 但不适用于 php 代码

```
$query = "set @row_num = 0; SELECT @row_num := @row_num + 1 as row_index, user, score FROM scores ORDER BY score DESC";
$result = mysql_query($query) or die(mysql_error()); 
```

**php已正确连接到mysql数据库**，在此之前我做了其他查询，一切正常

它说：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SELECT @row_num := @row_num + 1 as row_index, user, score FROM scores ORDER BY s' at line 1 
```

你认为它可能是什么？谢谢你，亚历山德罗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T14:19:39.513

这是因为 phpMyAdmin 会为您拆分分号查询。MySQL 服务器不**这样**做，PHP`mysql`扩展也不这样做。

您需要将它们分成两个单独的调用`mysql_query`

旁注：`mysql`不推荐使用 PHP 扩展，建议您将`PDO`或`mysqli`用于任何新代码。请在您未来的开发过程中牢记这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T14:19:58.360

首先`mysql_query`是贬义。

您不能在一次调用中运行两个查询`mysql_query`

```
$query = "set @row_num = 0; SELECT @row_num := @row_num + 1 as row_index, user, score FROM scores ORDER BY score DESC"; 
```

您必须执行以下操作：

```
$query1= "set @row_num = 0;";
$query2 = "SELECT @row_num := @row_num + 1 as row_index, user, score FROM scores ORDER BY score DESC";
$result1 = mysql_query($query1);
$result2 = mysql_query($query2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T14:20:32.697

尝试拆分为 2 个查询：

```
$query = "set @row_num = 0;";
$query2 = " SELECT @row_num := @row_num + 1 as row_index, user, score FROM scores ORDER BY score DESC;";
$result = mysql_query($query) or die(mysql_error());
$result1 = mysql_query($query2); 
```

# android - 按字母顺序对行进行排序

> ID：14216885
> 
> 赞同：0
> 
> 时间：2013-01-08T14:17:01.953
> 
> 标签：android, sqlite

这是我从 SQLite db 获取数据的方法：

```
getReadableDatabase().rawQuery("SELECT _id, " + COLUMN_NAME_TITLE + " FROM " + TABLE_NAME + " ORDER BY " + COLUMN_NAME_TITLE + " COLLATE NOCASE ", null)); 
```

但是即使我添加了**ASC** ，我也从来没有整理好我的物品。这是我所拥有的：

![在此处输入图像描述](../Images/01d6255926279d41ebcaa9eda68922a8.png)

难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:23:29.353

您必须使用 orderby 和 ASC（升序）按字母顺序对项目进行排序。

```
 getReadableDatabase().rawQuery("SELECT _id, " + COLUMN_NAME_TITLE + " FROM " + TABLE_NAME + " ORDER BY " + COLUMN_NAME_TITLE +"ASC"+" COLLATE NOCASE ", null)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:26:54.127

尝试`LOWER`功能：

```
"SELECT _id, " + COLUMN_NAME_TITLE + " FROM " + TABLE_NAME + " ORDER BY LOWER(" + COLUMN_NAME_TITLE + ")" 
```

# javascript - jQuery遍历JSON字典

> ID：14216887
> 
> 赞同：2
> 
> 时间：2013-01-08T14:17:09.360
> 
> 标签：javascript, jquery, html

对于这个 JSON 字典，

```
{
"user":null, 
"currency":"EUR",
"balance":0,
"tranlist": [ 
   { "date":"323","address":"a"},
   { "date":"121","address":"s"},
 ]
} 
```

当我使用此功能时，我无法获取交易列表

```
$(document.body).append($(
 '<table>' + $.map(data, function(value,key){
     return '<tr><td>'+key+'</td><td>'+value+'</td></tr>'
  }).join('')+'</table>'
)); 
```

这是输出：

```
 currency   EUR
 balance    0
 transactions   [object Object],[object Object],[object Object],[object Object] 
```

如何修复我的代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T14:19:57.727

您显示的代码（[我在之前的答案中编写](https://stackoverflow.com/questions/14212005/how-to-browse-a-javascript-object/14212124#14212124)）旨在快速预览您的结构并作为对象浏览的示例。

现在您必须使一些代码更具体地解决您的问题。例如 ：

```
 $(document.body).append($(
     '<table>' + $.map(data, function(value,key){
         console.log(value);
         return '<tr><td>'+key+'</td><td>'
             + ((value && $.isArray(value))
                 ? value.map(function(v){return v.date+':'+v.address}).join(', ')
                 : value
             )+ '</td></tr>'
      }).join('')+'</table>'
    )); 
```

[示范](http://jsfiddle.net/tSX7F/)

您还可以设计一个通用的递归 toString 函数，但除了调试（并且`console.log`更好）之外，没有多大意义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T14:19:59.630

```
$(document.body).append(
    $('<table>').append(
      $.map(data, function (value, key) {
        return $('<tr>').append( $('<td>', {text: key}) )
                        .append( $('<td>', {text: value}) );
      })
    );
)); 
```

请注意，不建议从连接字符串构建 HTML。构造标记和数据分离的元素`$('<td>', {text: key})`是最干净的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T14:39:22.953

不完全回答您的问题，而是建议您使用[纯 JavaScript 模板引擎](http://beebole.com/pure/)（jQuery 插件），而不是自己构建 HTML。

该引擎（一个 jQuery 插件）非常轻巧，非常适合您所做的工作类型（尤其是迭代子元素）。

我建议您花几分钟的时间阅读[“入门](http://beebole.com/pure/documentation/get-started/)”页面和一些解释子元素迭代的[教程。](http://beebole.com/pure/documentation/tutorials/)

* * *

使用 PURE 的示例

**HTML 代码**：

```
<div id="sample">
  <div class="currency">EUR</div>
  <div class="balance">0</div>
  <table>
    <tr class="date">
      <td>date</td><td class="value"></td>
    </tr>
    <tr class="address">
      <td>address</td><td class="value"></td>
    </tr>
  </table>
<div> 
```

**JavaScript 代码**（请注意`data`最后一条语句中使用的变量与您问题中的变量相同）

```
//declaration of the actions PURE has to do
var directive = {
  '.currency': 'currency',
    '.balance': 'balance',
    'table': {
    'trans<-tranlist': {
      'tr.date .value': 'trans.date',
      'tr.address .value': 'trans.address'
    }
  }
};

// note the use of render instead of autoRender
$('#sample').render(data, directive); 
```

输出**HTML**如下：

```
<div id="sample">
  <div class="currency"></div>
  <div class="balance"></div>
  <table>
    <tr class="date">
      <td>date</td><td class="value">323</td>
    </tr>
    <tr class="address">
      <td>address</td><td class="value">a</td>
    </tr>
    <tr class="date">
      <td>date</td><td class="value">121</td>
    </tr>
    <tr class="address">
      <td>address</td><td class="value">s</td>
    </tr>
  </table>
<div> 
```

当然，您可以做更多的事情，例如从 JSON 对象设置类属性或过滤项目等。

# c# - 检查一个事件是否至少被触发了一次

> ID：14216892
> 
> 赞同：3
> 
> 时间：2013-01-08T14:17:29.870
> 
> 标签：c#, .net, vb.net, events

我正在跟踪是否触发了这样的事件：

```
bool IsFormLoaded;
private void Form1_Load(object sender, EventArgs e)
{
    //Do stuff
    IsFormLoaded = true;
}
private void button1_Click(object sender, EventArgs e)
{
    //Do stuff
} 
```

但是对许多事件这样做并不优雅，所以我想要一个解决方案，让我检查是否有任何事件像这样被触发：

```
bool IsFormLoaded = IsEventFired(Form1_Loaded);
bool IsButton1Clicked = IsEventFired(Button1_Click); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T14:24:19.070

您正在使用设计器处理事件。例如，您可以在构造函数中执行此操作，如下所示：

```
this.Load += delegate { IsFormLoaded = true; };
button1.Click += delegate { IsButton1Clicked = true; }; 
```

IMO 它更优雅:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:31:08.427

有趣的问题，在我看来就像你不想一遍又一遍地写的东西。这就是为什么我宁愿选择一个通用组件，而不是一个哈希集或类似的东西。此外，由于表单实现通常基于线程，因此我使用并发字典。

可以通过几种不同的方式改进此解决方案；最明显的是使处理更加通用，并且缺少 0 参数处理程序。为了清关，我尽可能简单。也许我会在几天后在我的博客上发布更完整的内容；如果我这样做，我会在这里分享信息。

我的解决方案有 2 个部分：(1) 通用钩子类和 (2) 表单中的实现。目前解决方案是懒惰的，例如我把事件处理程序放在最后，而不是放在队列的前面。您应该能够通过使用 GetInvocationList 或类似的东西来解决这个问题。

通用挂钩类基本上挂钩事件并跟踪是否调用了事件：

```
public class EventHooks
{
    private class EventHooksEquality : IEqualityComparer<Tuple<string, object>>
    {
        public bool Equals(Tuple<string, object> x, Tuple<string, object> y)
        {
            return x.Item1.Equals(y.Item1) && object.ReferenceEquals(x.Item2, y.Item2);
        }

        public int GetHashCode(Tuple<string, object> obj)
        {
            return obj.Item1.GetHashCode();
        }
    }

    private ConcurrentDictionary<Tuple<string, object>, bool> called =
        new ConcurrentDictionary<Tuple<string, object>, bool>(new EventHooksEquality());

    private abstract class BaseHookHandler
    {
        protected BaseHookHandler(object container, string eventName, EventHooks hooks)
        {
            this.hooks = hooks;
            this.container = container;
            this.eventName = eventName;
        }

        protected string eventName;
        protected object container;
        protected EventHooks hooks;
    }

    private class HookHandler<T1> : BaseHookHandler
    {
        public HookHandler(object container, string eventName, EventHooks hooks)
            : base(container, eventName, hooks)
        {
        }
        public void Handle(T1 t1)
        {
            hooks.called.TryAdd(new Tuple<string, object>(eventName, container), true);
        }
    }

    private class HookHandler<T1, T2> : BaseHookHandler
    {
        public HookHandler(object container, string eventName, EventHooks hooks)
            : base(container, eventName, hooks)
        {
        }
        public void Handle(T1 t1, T2 t2)
        {
            hooks.called.TryAdd(new Tuple<string, object>(eventName, container), true);
        }
    }
    // add more handlers here...

    public void HookAll(object obj)
    {
        foreach (var eventHandler in obj.GetType().GetEvents()) 
        {
            Hook(obj, eventHandler.Name);
        }
    }

    public void Hook(object obj, string eventHandler)
    {
        if (obj == null)
        {
            throw new Exception("You have to initialize the object before hooking events.");
        }

        // Create a handler with the right signature
        var field = obj.GetType().GetEvent(eventHandler);
        var delegateInvoke = field.EventHandlerType.GetMethod("Invoke");
        Type[] parameterTypes = delegateInvoke.GetParameters().Select((a) => (a.ParameterType)).ToArray();

        // Select the handler with the correct number of parameters
        var genericHandler = Type.GetType(GetType().FullName + "+HookHandler`" + parameterTypes.Length);
        var handlerType = genericHandler.MakeGenericType(parameterTypes);
        var handlerObject = Activator.CreateInstance(handlerType, obj, eventHandler, this);
        var handler = handlerType.GetMethod("Handle");

        // Create a delegate
        var del = Delegate.CreateDelegate(field.EventHandlerType, handlerObject, handler);

        // Add the handler to the event itself
        field.AddEventHandler(obj, del);
    }

    public bool IsCalled(object obj, string eventHandler)
    {
        return called.ContainsKey(new Tuple<string, object>(eventHandler, obj));
    }
} 
```

类中的用法可以按如下方式进行（示例）：

```
 public Form1()
    {
        InitializeComponent();

        hooks.HookAll(this);
        // or something like: hooks.Hook(this, "Load");
        hooks.Hook(button1, "Click");

    }

    private EventHooks hooks = new EventHooks();

    private void Form1_Load(object sender, EventArgs e)
    {
    }

    private void button1_Click(object sender, EventArgs e)
    {
        this.textBox1.Text = 
            string.Format("Load: {0}\r\nClick: {1}\r\nButton click: {2}\r\n",
            hooks.IsCalled(this, "Load"),
            hooks.IsCalled(this, "Click"),
            hooks.IsCalled(button1, "Click"));
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:35:18.103

编写您自己的基本表单（从 Windows.Forms.Form 派生），并覆盖事件触发方法以捕获事件是否被触发。通过拥有一个基类，您将能够在所有表单中重用您的事件监控逻辑。

这是您可以使用的一些示例代码。我在这里只使用了 Loaded 事件。您必须为要监视的所有事件执行此操作。您也可以使用枚举而不是使用常量。希望这可以帮助

```
 const string OnLoadFired = "OnLoadFired";
        const string OnShownFired = "OnShownFired";
        List<string> eventsFired = new List<string>();

        protected override void OnLoad(EventArgs e)
        {
            if(!eventsFired.Contains(OnLoadFired))
            {
                eventsFired.Add(OnLoadFired);
            }
            base.OnLoad(e);
        }

        public bool IsEventFired(string eventName)
        {
            return eventsFired.Contains(eventName);
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T15:12:07.980

类似于 Dhawalk 的回答。在我写这篇文章之前，我没有看到那个答案。

```
 private HashSet<string> events = new HashSet<string>();
        private void IsLoaded(object sender, RoutedEventArgs e)
        {
            // check
            System.Diagnostics.Debug.WriteLine(CheckEvents("IsLoaded", true).ToString());
            // add
            System.Diagnostics.Debug.WriteLine(CheckEvents("IsLoaded", false).ToString());
            // check
            System.Diagnostics.Debug.WriteLine(CheckEvents("IsLoaded", true).ToString());
        }

        private bool CheckEvents(string Event, bool CheckAdd)
        {
            // CheckAdd True to check
            // CheckAdd Fasle to add
            bool result = events.Contains(Event);
            if (!result && !CheckAdd) events.Add(Event);
            return result;
        } 
```

# r - 如何在R中删除拦截

> ID：14216893
> 
> 赞同：26
> 
> 时间：2013-01-08T14:17:31.093
> 
> 标签：r, intercept

我需要创建一个没有截距的概率模型。那么，如何从 R 中的概率模型中删除截距？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-08T15:54:05.857

您没有说您打算如何拟合概率模型，但如果它使用 R 的公式符号来描述模型，那么您可以提供其中一个*或*`+ 0`作为`- 1`公式的一部分来抑制截距：

```
mod <- foo(y ~ 0 + x1 + x2, data = bar) 
```

或者

```
mod <- foo(y ~ x1 + x2 - 1, data = bar) 
```

（当然都使用伪 R 代码 - 替换您的建模函数和数据/变量。）

如果这是一个模型拟合，`glm()`那么类似：

```
mod <- glm(y ~ x1 + x2 - 1, data = bar, family = binomial(link = "probit")) 
```

应该这样做（再次适当地替换您的数据和变量名称。）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-03-18T21:48:50.607

此外，如果您有一个现有的公式对象，`foo`您可以像这样删除截距`update`：

```
foo <- y ~ x1 + x2
bar <- update(foo, ~ . -1)
# bar == y ~ x1 + x2 - 1 
```

# iphone - iPhone：IBAction 导致“Unrecognized Selector Sent to Instance”错误

> ID：14216894
> 
> 赞同：3
> 
> 时间：2013-01-08T14:17:32.727
> 
> 标签：iphone, ios, selector, viewcontroller, ibaction

我正在开发一个 iphone 应用程序，您可以在其中登录服务器，在您获得验证后，我的应用程序会将您移动到另一个视图控制器，您可以在其中使用按钮发送您的 gps 位置。出于某种原因，当我在下一个视图控制器中按下按钮时，出现此错误：

```
Administrator[3148:c07] -[UIViewController SendGPS:]: unrecognized selector sent to instance 0x88b58d0
2013-01-08 16:01:21.662 Administrator[3148:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIViewController SendGPS:]: unrecognized selector sent to instance 0x88b58d0' 
```

如果我在单个视图控制器中应用我的 gps 代码按钮，结果证明可以正常工作，但是当我将我的应用程序与两个视图控制器一起使用时，第一个将您重定向到第二个（如果只有您登录到服务器）我得到这个错误。我通过检查服务器响应的条件转移到第二个视图控制器。这是我用来更改视图控制器的代码：

```
NSString *compare = [NSString stringWithFormat:@"true"];

    if ( [compare isEqualToString:string])  {

        UIViewController* FourthViewController = [[UIViewController alloc] initWithNibName:@"FourthViewController" bundle:[NSBundle mainBundle]];
        [self.view addSubview:FourthViewController.view];   }
    else
        NSLog(@"validation not complete"); 
```

这是我使用 NSTimer 的按钮：

```
-(IBAction)SendGPS:(id)sender
 {
     Timer= [NSTimer scheduledTimerWithTimeInterval:30.0 target:self  selector:@selector(requestIt) userInfo:nil repeats:YES];
 } 
```

有什么想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T14:24:14.150

代码的错误部分很明显，这就是初始化视图控制器的方式：

```
 UIViewController* FourthViewController = [[UIViewController alloc] initWithNibName:@"FourthViewController" bundle:[NSBundle mainBundle]]; 
```

那就是从 Apple 的代码中创建一个新的视图控制器对象，它不知道 Chuck Norris 的方法`SendGPS:`是什么。因为您显然在您的 Xcode 项目中创建了一个名为 ' `FourthViewController`'的新视图控制器子类。`SendGPS:`您正在创建一个名为 ' `FourthViewController`' 的实例，但它实际上并不指向该类，它是`UIViewController`您指定的类。

正确的代码应该是：

```
 FourthViewController *myFourthViewController = [[FourthViewController alloc] initWithNibName:@"FourthViewController" bundle:[NSBundle mainBundle]]; 
```

你真的需要弄清楚，我认为你不懂 Objective-C，拿起一本书，开始阅读，然后做对！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:26:38.550

代替

```
UIViewController* FourthViewController = [[UIViewController alloc] initWithNibName:@"FourthViewController" bundle:[NSBundle mainBundle]]; 
```

和

```
FourthViewController* FourthViewController = [[FourthViewController alloc] initWithNibName:@"FourthViewController" bundle:[NSBundle mainBundle]]; 
```

还要检查您是否`SendGPS`在 .h 文件中声明了函数

希望对你有帮助

# java - JSON_encoded String 到 Java JSONObject

> ID：14216897
> 
> 赞同：2
> 
> 时间：2013-01-08T14:17:38.157
> 
> 标签：java, android, json

我有来自服务器的 JSON 响应。它看起来像这样：

```
"json_key" : { 
     "key_1" : value,
     "key_2" : json_object, 
     "key_3" : json_object
} 
```

问题是其中一个 json 对象具有特定的编码

```
"object_key": "a:4:{s:6:\"ITEM_KEY_1\";s:2:\"ITEM_VALUE_1\";s:6:\"ITEM_KEY_2\";s:2:\"ITEM_VALUE+2\";s:8:\"ITEM_KEY_3\";s:8:\"ITEM_VALUE_3\";s:8:\"ITEM_KEY_4\";s:5:\"ITEM_VALUE_4\";}" 
```

据我了解，它是一个 json_encoded 字符串。如何将其转换为 java `JSONObject`？问这个是因为当我尝试通常的方式`JSONObject json = new JSONObject(jsonStr);`时，它会抛出一个`JSONException - cant convert String to JSONObject`.

**编辑** 每个验证工具都将对象值视为字符串，而不是 JSON。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:26:53.927

问题是
`"object_key": "a:4: s:6:\"ITEM_KEY_1\";s:2:\"ITEM_VALUE_1\";s:6:\"ITEM_KEY_2\";s:2:\"ITEM_VALUE+2\";s:8:\"ITEM_KEY_3\";s:8:\"ITEM_VALUE_3\";s:8:\"ITEM_KEY_4\";s:5:\"ITEM_VALUE_4\";}"`

不是有效的 JSON，因此当您尝试解析它时会出错。字符串中的第一个错误是：`"object_key": "a: 4:`，但我猜你希望整个字符串都在 object_key 下

AFAIK，JSON 不能忽略值中的 ':' ，并且它没有转义。如果这个想法不是对象键包含所有这些，那么 JSON 需要重组直到它有效。

作为一个工具，使用[http://jsonlint.com/](http://jsonlint.com/)，它允许您检查 JSON 是否有效

回复：Yami 的编辑——恐怕你给我们的 JSON 样本是无效的，如我列出的网站所示。有关此问题的更多帮助，您需要将私有 JSON 数据更改为产生与您在这些站点之一验证 JSON 时所遇到的结果相同的结果，否则我们无能为力帮助尝试并验证它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:50:02.663

[使用serialized-php-parser](http://code.google.com/p/serialized-php-parser/)库找到了一个不错的解决方案：

```
JSONObject jsonObject = new JSONObject(response);
String theNonReadableJson = jsonObject.getString("key");

SerializedPhpParser serializedPhpParser = new SerializedPhpParser(
                        theNonReadableJson);
Object serializedObject = serializedPhpParser.parse();

JSONObject readableJson = new JSONObject(serializedObject.toString()); 
```

在序列化之后，JSON 对象可以像魅力一样被解析。

我要感谢[Loris](https://stackoverflow.com/users/1953082/loris)给了我 PHP serialize() 结果的想法，以及[Matt Taylor](https://stackoverflow.com/users/887590/matt-taylor)试图帮助我解决这个问题。

# java - BufferedReader.read() 切断在 servlet 中获取 POST 数据

> ID：14216902
> 
> 赞同：2
> 
> 时间：2013-01-08T14:17:51.243
> 
> 标签：java, servlets, bufferedreader

在我的 servlet 中，我有以下代码：

```
BufferedReader br = request.getReader();
char[] buff = new char[request.getContentLength()]; 
int i = br.read(buff); 
```

buff 的长度是 55453 但 i 的值是 7618，知道为什么会被切断吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:25:29.553

BufferedReader 似乎只读取了请求的一部分。尝试这样的事情：

```
char[] buff = new char[request.getContentLength()];
while (int i = br.read(buff) != -1) {
  // process buff
} 
```

所以 7618 似乎是您从请求对象中获得的缓冲区的大小。

# jquery - 添加和减去功能不适用于克隆的 div - javascript

> ID：14216910
> 
> 赞同：2
> 
> 时间：2013-01-08T14:18:06.927
> 
> 标签：jquery

所以我有一个表单，用户可以在几分钟内添加或减去时间，他们还可以克隆该 div 并添加更多值，但我的问题是我似乎无法在克隆的 div 上使用该功能。该函数仅从第一个 div 中添加或减去。

这是 jsFiddle：http: [//jsfiddle.net/W7w58/2/](http://jsfiddle.net/W7w58/2/)

单击 + 或 - 启动该功能。

这是代码，但我想在尝试 jsFiddle 时更容易理解问题：

HTML：

```
<button id="clone-btn">Clone</button>
<div id="clone-div">
   <a href="#" class="btn btn-subtract">-</a>
   <a href="#" class="btn"><input type="text" class="input-field" id="input-field" name="input-field" value="0:00"></a>
   <a href="#" class="btn btn-add">+</a>
</div> 
```

jQuery：

```
/* for cloning */
$("#clone-btn").click(function() {
    $('#clone-div').clone(true).insertAfter('#clone-div');
    return false;
});

/* for the function */
var $input = $('.input-field');
$input.data('minutes', parseTimeString($input.val()));

function parseTimeString(str) {
    var time = str.split(":");
    return (parseInt(time[0])*60) + parseInt(time[1]);
}

$('.btn-add').on('click', function() {
    changeTime(1);
});

$('.btn-subtract').on('click', function() {
    changeTime(-1);
});
function changeTime(mins) {
    var currentTime = parseInt($input.data('minutes')),
    newTime = currentTime + mins,
    minutes = (newTime % 60).toString(),
    hours = (Math.floor(newTime / 60)).toString();
    if (minutes.length === 0) {
        minutes = "00";
    } else if (minutes.length === 1) {
        minutes = "0" + minutes;
    }
    $input.data('minutes', newTime).val(hours + ":" + minutes);
} 
```

我会很感激你能给我的所有帮助:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:49:10.633

您的原始代码存在几个问题：

1.  在不必要的地方使用数据属性
2.  重复ID的使用
3.  不处理文本框的新副本，而是修改原始文本框。
4.  **隐藏的问题：**在计算时间期间代码中的零填充会导致问题，导致时间只能工作到 0:08，然后在使用单个文本框而不是一个文本框时返回到 0:00。它已修复并在我的解决方案中正常工作。

下面是一个可行的解决方案，其中时间增量和减量也适用于克隆，并且它们可以按照您的需要单独工作。

此代码还包括您在我们的聊天中所说的内容 - 单击“减号”按钮时不要低于 0:00（例如，它会生成警报）。希望能帮助到你！

还有jsfiddle：http: [//jsfiddle.net/vwxfC/4/](http://jsfiddle.net/vwxfC/4/)

JS代码：

```
$("#clone-btn").click(function () {
    var last = $('.cdiv').eq(-1);
    last.clone(true).insertAfter(last);
    return false;
});

function parseTimeString(str) {
    var time = str.split(":");
    if (time[1][0] === "0") {
        time[1] = time[1].substr(1, time[1].length);
    }

    return (parseInt(time[0]) * 60) + parseInt(time[1]);
}

$('.btn-add').on('click', function () {
    changeTime(1, this);
});

$('.btn-subtract').on('click', function () {
    changeTime(-1, this);
});
function changeTime(mins, el) {
    var inp = $(el).siblings('.btninp').eq(0).children('.input-field').eq(0);

    if (inp.val() == "0:00" && mins == "-1") {

        alert("time cannot be less than 0!");
    } else {

        var ps = parseTimeString(inp.val());

        var currentTime = parseInt(ps),
        newTime = currentTime + mins,
        minutes = (newTime % 60).toString(),
        hours = (Math.floor(newTime / 60)).toString();
        if (minutes.length < 2) {
            minutes = "0" + minutes;
        }

        inp.val(hours + ":" + minutes);
    }

} 
```

HTML 代码：

```
<button id="clone-btn">Clone</button>
<div class = "cdiv">
  <a href="#" class="btn btn-subtract">-</a>
  <a href="#" class="btninp"><input type="text" class="input-field" value="0:00"> </input></a>
   <a href="#" class="btn btn-add">+</a>
  </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:25:22.743

您在这里遇到了一些问题：

1.  您的`<div>`标签有一个`id`属性，该属性是唯一的。克隆它会创建两个相同的元素`id`，这会给你带来问题。请改用`class`属性。

2.  您的事件处理程序没有考虑动态生成的元素。为此，您可以使用以下事件委托语法`.on()`：

    ```
    $('#closest_static_parent').on('click', '.btn-add', function() { 
    ```

3.  `$input`是硬编码的。而不是`$input`，使用以下方法找到`<input>`相对于 的元素`<a>`：

    ```
    $(this).closest('input'); 
    ```

# php - 如何在codeigniter中修改路由

> ID：14216912
> 
> 赞同：3
> 
> 时间：2013-01-08T14:18:18.467
> 
> 标签：php, codeigniter, url, routing

帮我解决这个问题。

举个例子：我有这个普通的网址“localhost/CI/index.php/base/storeurl”。

我怎样才能让 Codeigniter 知道寻找“localhost/CI/storeurl”。

我有一个名为 index 的函数，它接受 Base.php 类中的参数 storeURL。帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T11:25:02.543

我终于找到了我要找的东西。这是我的代码在 routes.php 中的样子。

```
/* Custom Routes. */
// Store Normal Pages.
$route['home/(:any)'] = "base/home/$1";
$route['about/(:any)'] = "base/about/$1";
$route['services/(:any)'] = "base/services/$1";
$route['contact/(:any)'] = "base/contact/$1";
$route['feedback/(:any)'] = "base/feedback/$1";

// CategoryPage.
$route['category/(:any)/(:num)'] = "base/category/$1/$2";
// ProductPage.
$route['product/(:any)/(:num)'] = "base/product/$1/$2";

// For Main Home Page.
$route['(:any)'] = "base/home/$1"; 
```

我真的很感谢所有帮助我解决这个问题的人。谢谢你们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T14:21:56.640

`index.php`在 WAMP 环境中从 CodeIgniter 中的 URL 中删除只需要三个步骤。

1.  在 CodeIgniter 的根文件夹中创建`.htaccess`文件并添加以下代码：

    ```
    RewriteEngine On
    RewriteBase /CodeIgniter/
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php/$1 [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L] 
    ```

2.  通过以下方式更改为应用程序文件夹中`$config['index_page']`的空字符串：`config.php`

    ```
    $config['index_page'] = ''; 
    ```

3.  `rewrite_module`在`httpd.conf`文件中启用 Apache 。

你也可以参考[这篇文章](http://sforsuresh.in/removing-index-php-from-url-of-codeigniter-in-wamp/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T03:46:00.060

这是一些伪代码和一些正确方向的要点，可以帮助您入门。

首先，您需要从您的网址中删除 index.php。这里肯定有数百个问题已经回答了这部分问题，所以我将这部分留给你。

正如许多人评论的那样，没有办法开箱即用地实现这种 url 结构，并且需要相当多的代码才能工作。我实现这个特定设置的方式是将所有请求路由到单个控制器，并在该控制器内处理自定义路由。

为此，请在底部添加一条路线`routes.php`作为全部内容。然后可以在此控制器之上添加其他控制器（新闻、事件等）的路由。这是一个示例 routes.php 可以帮助您入门。

**配置/路由.php**

```
// Other routes go up here

// Catch all route 
$route['(:any)'] = 'page/view';

// Home page route 
$route['default_controller'] = "page/index"; 
```

然后，您可以创建一个`view`函数`controllers/page.php`来检查 url（使用 codeigniters url helper），并加载与该 url 对应的正确视图。

**控制器/page.php**

```
class Page extends CI_Controller {

   public function index()
   {    
      // Do all code for your home page in here
   }

   public function view()
   {        
      // Retrive the url string
      $url = $this->uri->uri_string();

      // Check if the corresponding view file exists
      if (file_exists(APPPATH.'views/'.$url.'/index.php')){

         // Load the view
         $this->load->view($url.'/index');

      } else {
         show_404();
      } 
   }
} 
```

比如说，一个用户去`http://yoursite.com/CI/about-us`，页面控制器的视图函数会从 url 中获取字符串`about-us`并将其设置为 $url 变量，然后搜索你的文件结构以检查相应的视图文件是否存在 `/application/views/about-us/index.php`。如果是，它将加载该视图文件，如果不是，它将重定向到 404。

以上都是从内存中输入的伪代码，所以它可能不会直接工作，但希望能给你一个关于如何达到你想要的结果的线索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-16T03:25:15.013

我总是无法让路由工作。最后我找到了解决方案。我只想分享以帮助有需要的人，因为我真的很喜欢 codeigniter，因为它既快速又轻便。我正在研究要在 $this->uri->segment(1) 上显示的动态类别标题。

```
$route['(:any)/method/(:any)']  = 'Class/method';    
$route['(:any)/gallery/(:any)'] = 'Class/gallery';    
$route['(:any)/listing/(:any)'] = 'Class/listing'; 
```

路由会注意到只要$this->uri->segment(2)是方法，就会去执行Class的方法。你的网址会很漂亮：

```
base_url()/business-services/gallery/6 
base_url()/travel/gallery/12 
```

我还了解到路线必须具体。如果网址是这样的：

base_url()/旅游/新加坡/listing/1201

那么你的路线必须是：

```
$route['(:any)/(:any)/listing/(:num)']  = 'Class/listing'; 
```

如果你有参数传入方法（取决于你是使用参数还是uri_segment），

```
$route['(:any)/(:any)/listing/(:num)']  = 'Class/listing/$1'; 
```

玩得开心 ：）

# c++ - Implementing Binary in a C++ Program

> ID：14216921
> 
> 赞同：-1
> 
> 时间：2013-01-08T14:18:50.823
> 
> 标签：c++, assembly, binary

So I'm working on a C++ program that reads binary from a text file. Suppose I want the binary in the text file to become part of the C++ program, so that the protam references it and converts it to code that it runs. How can I go about doing this.

In general, how can I read a different programming language from a text file and make my C++ program utilize it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:21:40.793

There are several possibilities: one is loading into memory the executable as-is and jump to it.

Another is to implement a tiny virtual machine that will run your code instruction per instruction. It's not really hard for assembly, but really complex for something like PHP.

You could also just call the interpreter/compiler of your language and let it do its job.

# javascript - Angularjs指令属性绑定左上角拖动后

> ID：14216925
> 
> 赞同：7
> 
> 时间：2013-01-08T14:19:00.697
> 
> 标签：javascript, angularjs

我正在为 jqueryui 可拖动编写一个指令，但是在拖动后将左侧和顶部位置绑定到我的范围时遇到了一些麻烦。有人能指出我正确的方向吗？

```
myApp.directive('draggable', function () {
return {
    restrict: 'A',
    link: function (scope, element, attrs) {
        element.draggable({
            cursor: "move",
            stop: function (event, ui) {
                attrs.$set('xpos', ui.position.left);
            }
        });
    }
};
}); 
```

这是我正在尝试做的事情：http: [//jsfiddle.net/psinke/TmQ​​eL /](http://jsfiddle.net/psinke/TmQeL/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T16:17:19.033

添加到您的指令：

```
scope: { xpos: '=', ypos: '=' }, 
```

'=' 语法在隔离范围和父范围之间设置双向数据绑定。您在指令中对这些隔离范围属性所做的任何更改也会影响父范围，反之亦然。

然后在链接函数中：

```
stop: function (event, ui) {
  scope.xpos = ui.position.left;
  scope.ypos = ui.position.top;
  scope.$apply();
  scope.$apply();
} 
```

目前 Angular 中存在一个错误，如果您在使用 = 绑定的隔离范围属性上设置属性，则必须调用 $apply() 两次。见[https://github.com/angular/angular.js/issues/1276](https://github.com/angular/angular.js/issues/1276)

**更新：** @Peter 在评论中指出，以上内容会破坏通过输入文本框移动可拖动对象。我无法让它与隔离作用域一起工作，所以我只是让指令使用父作用域（即，指令不创建新作用域）。我使用 attrs 来修改 stop() 方法中的指定范围属性。这适用于同一页面上的多个可拖动项。

```
stop: function (event, ui) {
   scope[attrs.xpos] = ui.position.left;
   scope[attrs.ypos] = ui.position.top;
   scope.$apply();
} 
```

[小提琴](http://jsfiddle.net/mrajcok/5Mzda/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:41:53.900

是初学者普遍面临的问题。

添加以下代码。它会起作用的。

> ```
>  stop: function (event, ui) {
>       scope.divleft = ui.position.left;
>       scope.divtop = ui.position.top;
>       scope.$apply();
>   } 
> ```

原因：每当 jquery 世界发生变化时，应该通过调用 $scope.$apply() 将其传达给 AngularJS 世界。

# php - 以数组命名的 HTML 表单上的 Foreach 循环

> ID：14216929
> 
> 赞同：0
> 
> 时间：2013-01-08T14:19:07.343
> 
> 标签：php, html, database, forms, foreach

您好，我有这个带有数据库名称列表的 html 表单。

```
$stmt = $db->query("SELECT id_person, surname, firstname FROM persons ORDER BY surname,firstname");

$selected_persons= array(); 

echo "<select name='persons[]' multiple='multiple' size='7'>";
  while ($result = $stmt->fetch()) { 
     echo "<option value='".$result['id_person']."'";

     if (in_array($result['id_person'], $selected_persons)) {
        echo " selected='selected'";
     }

    echo ">".$result['surname']." ".$result['firstname']."</option>"; 
```

我需要foreach循环来返回`id_person`选定的人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:07:33.650

您的组合将是多维数组，即 $_POST['persons'][]，因此请使用以下代码检索选定的值。

```
foreach($_POST['persons'][] AS $selected_person)
{
    echo $selected_person;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:26:32.570

您选择的人员将在`$_POST['persons']`（假设表单的方法是`POST`），因此您可以使用 foreach 对其进行迭代：

```
foreach($_POST['persons'] as $id_person)
{
    echo 'selected: ' . htmlspecialchars($id_person);
} 
```

# php - 哪些 PHP 扩展将临时文件写入 /tmp 文件夹？

> ID：14216933
> 
> 赞同：4
> 
> 时间：2013-01-08T14:19:15.347
> 
> 标签：php

我的网络服务器有问题。

我注意到通常在 /tmp 目录中创建大文件。文件就像 /tmp/phpUNIQUECODE 但这些不是上传。因为在我的 php.ini 设置中配置是

```
upload_tmp_dir = /backup/tmp 
upload_max_filesize = 300M
post_max_size = 300M 
```

我发现 /tmp 中的文件是由 PHP 进程在下载文件时写入的（PHP 进程从 TCP 套接字读取文件并写入输出）。

我阅读了一些 PHP 手册，发现 tehre 是 PHP 函数 tmpfile()。它在 /tmp 文件夹中创建临时文件（即使 upload_tmp_dir 不同）。但是我的代码中没有使用这个函数。在我的代码中，没有任何内容保存到磁盘中。

这会是什么？还有哪些 PHP 扩展可以在 /tmp 文件夹中创建临时文件？

谢谢。

**更新 1.** 在我的下载功能中，我使用 ob_start 和 ob_flush 功能。ob_flush 在每 4kb 数据发布到浏览器后调用。

这个问题可能与 ob_* 函数有关吗？

**更新 2.** 我发现在我执行相同 PHP 代码以下载文件的其他服务器上，/tmp 文件夹中没有临时文件。所以这一定和php.ini设置或者apache设置有关。我还发现临时文件是正在下载的文件的副本。下载完成后，临时文件将从 /tmp 文件夹中删除。

**更新 3.** 我隔离了这个问题。我发现这不是下载的问题。这是使用 PHP HTTP 包装器读取文件的问题。我的文件存储在 amazon s3 上。我打开套接字以下载文件

```
$fh=fopen('http://s3.amazonaws.com/.....'); 
```

然后我读取文件并发送到用户浏览器。我做了一些测试，发现如果我是来自本地来源的真实文件，那么一切都很好。不会创建临时文件。我还测试了其他包装器 - ftp 和一些自定义包装器（例如，用于保管箱的自定义包装器）。一切都很好。

所以问题只针对 php http 包装器，并且只在我的一台服务器上（其他服务器上的相同代码很好）。

这个简单的代码演示了我的问题：

```
$filepath='http://bucket.s3.amazonaws.com/.....';
$_fp=fopen($filepath,'r');

if ($_fp) {
    $i=1;
    $total=0;
    while (!feof($_fp)) {
        $tmpbuf=fread($_fp, 4096);
        $total+=strlen($tmpbuf);//this is done only to make downloading slower
        if($total>=$i*4194304){
            $i++;
            sleep(1);//just to make downloading slower
        }
    }
    fclose($_fp);
} 
```

如果我将第一行替换为

```
$filepath='/path/to/local/file'; 
```

那么一切都很好。临时文件未在 /tmp 文件夹中创建

关于这个奇怪的问题有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:40:55.117

正如神秘所说，这听起来像 php 会话，在您的 php.ini 中检查以查看

> session.save_path

额外的 - -

好吧，所以可能不是会话文件，我已经重新阅读了您的 OP 和您的额外评论，如果该文件是由下载数据的脚本创建的，并且在脚本完成时被清理，那么问题是什么？

另外我要指出，设置 upload_tmp_dir 是用于通过 HTTP 上传文件（根据默认 php.ini 中的注释），因此可能与下载无关。你用什么代码来下载？该命令有设置吗？

**更新**

由于 /tmp 文件与下载文件的大小和时间相匹配，因此看起来确实是操作系统在整理数据时存储文件的方式。我怀疑这有什么可担心的，特别是如果文件通常是几个演出。它可能会假脱机到磁盘以保留系统 RAM

**更新 2**

也许我指的是操作系统不太正确，也许它是在 PHP 的某个地方选择名称/创建 tmp 文件。我所看到的底线——基于你所说的一切——是这里没有问题，这就是 PHP 的工作方式。

另一台服务器可能被设置为在其他地方写入 tmp 文件，但是如果您没有实际提供用于检查的代码片段，我看不出任何人可以帮助您提供更多详细信息。

这些 tmp 文件会给您带来什么问题？

# objective-c - 一般调试和 [__NSCFBoolean objectForKey:]

> ID：14216951
> 
> 赞同：1
> 
> 时间：2013-01-08T14:20:02.323
> 
> 标签：objective-c

```
2013-01-08 16:02:55.341 TodayApp[95470:14003] -[__NSCFBoolean objectForKey:]: unrecognized selector sent to instance 0x9b4964
2013-01-08 16:02:55.342 TodayApp[95470:14003] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFBoolean objectForKey:]: unrecognized selector sent to instance 0x9b4964'
*** First throw call stack:
(0x883012 0x20a2e7e 0x90e4bd 0x872bbc 0x87294e 0x7afc 0x234353f 0x2355014 0x23457d5 0x829af5 0x828f44 0x828e1b 0x2dcf7e3 0x2dcf668 0xfea65c 0x2679 0x2585)
libc++abi.dylib: terminate called throwing an exception 
```

我的应用程序有近 30 个课程。当我输入特定的 vc 时出现上述错误，但十次中只有一次，所以我无法重现它。如何以有效的方式调试它？通常我使用 NSLog 一步一步地“调试”，但我相信你可以用更有效的方法来启发我。

**更新**：我已经添加了例外，如答案中的建议，这是有问题的行：`NSString *card = [NSString stringWithFormat:@"%@-%@",[[UserAccount sharedInstance] cardNumber],[tokenData objectForKey:@"CardPhoneToken"]];` 我仍在试图找出它有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:42:59.527

首先设置一个异常断点。如果是这样，则在抛出异常时它可能不会显示任何有用的输出。但是你应该看到你的代码，它被抛出的地方。这很有帮助。如果您随后在调试器中按“继续执行”，可能会按两到三下左右，最终错误消息会出现在调试控制台中。到那时，可能会显示主要功能，但到那时您已经看到异常的来源。

Ok, nownig that have a look at all objects that you are dealing with in that very line of code. One of these objects (or any property of these objects) is supposed to be an NSDictionary, because, as the error message tells you, an "objectForKey:" message has been send but no appropriate selector was found. That is because the object in question is of type Boolean/NSBoolean.

You have most probabyl assigned some numerical object or pointer to something that is supposed to be an NSDictionary. It may well be that you are accessing an uninitialized pointer which just happens to point to some boolean type of thing. In that case the error may be hard to reproduce.

However, doing so will guide you onto the right track.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:23:05.313

为 throw 和 catch 上的所有异常设置异常断点。

这可以在 BreakPoint Navigator 右下角的“+”号上完成。添加异常断点...并选择 Break: On Throw 并为 On Catch 创建另一个

这应该会创建一个断点，以帮助您确定在何处生成任何异常。

* * *

* * *

更麻烦的方法是创建一个 dSYM 文件并运行一个 atos 命令。

这是通过归档您的项目来完成的。然后在管理器中右键单击存档并在查找器中显示。然后右键单击并显示包内容。将 TestApp.app.dSYM 复制到方便的位置并在终端中导航。

然后输入：

```
cd Contents/Resources/DWARF/ 
```

然后你可以运行 atos 命令：

```
atos -arch armv7 -o TestApp 0x7556fb0 
```

其中 TestApp 是您的应用名称，0x7556fb0 是您要调查的地址。在您的情况下，这可能是 0x883012。

有时这可以为您提供崩溃发生位置的类别和行号。像：

```
[Class methodName:]; -211 
```

* * *

* * *

有时似乎可行的另一种方法是为[HockeyApp](http://hockeyapp.net/)设置您的应用程序。通过这种方式，您可以将崩溃报告发送到 HockeyApp，您有时会获得更多详细信息。上传 dSYM 文件也很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:25:43.920

此异常应该很容易调试 - 搜索所有 objectForKey: 调用，并查看可以将其发送到布尔值的位置。

或者，如果此类调用的代码行数过多，则可以符号化调用堆栈： [Symbolicating iPhone App Crash Reports](https://stackoverflow.com/questions/1460892/symbolicating-iphone-app-crash-reports)

# python - 如何使用 wxpython 单击一次 svn 结帐？

> ID：14216952
> 
> 赞同：0
> 
> 时间：2013-01-08T09:59:38.167
> 
> 标签：python, svn, wxpython

当我单击 GUI 中的单个按钮时，我需要从 SVN 结帐。我使用 wxpython 开发了一个 GUI，其中有一个名为“svn checkout”的子菜单。当有人单击该子菜单时，我需要从 SVN 结帐。我尝试了以下对我不起作用的代码。

```
def OnSvnCheckout:
    svn checkout svn://localhost/dev/main 'D:\my project 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:25:05.780

您可能想在 shell 中运行 svn 命令：

```
import os

def OnSvnCheckout(event):
    os.system('svn checkout svn://localhost/dev/main D:\my project') 
```

# linux - cron.daily 澄清

> ID：14216953
> 
> 赞同：1
> 
> 时间：2013-01-08T14:20:10.310
> 
> 标签：linux, ubuntu, cron

我一直在摆弄cron。如果您安排一个脚本每天运行，并且您的计算机在 acron 安排它时关闭，如果您在当天晚些时候打开计算机，它会运行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:24:02.593

cron.daily 计划每天在特定时间运行一次。如果您的计算机当时处于关闭状态，它会错过它。

查看**/etc/crontab**以了解它计划运行的时间。在那里你会看到时间表设置..它遵循以下结构：

MIN HOUR DOM MON DOW CMD

你应该看到类似的东西......

```
02 4 * * * root run-parts /etc/cron.daily 
```

这意味着在每个月每周的凌晨 4 点后 2 分钟运行 /etc/cron.daily 文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:27:48.723

在 Ubuntu 上，您通常已经`anachron`安装了。如果上次运行作业之间的间隔大于一天，它将在您下次启动机器时运行您的日常作业。如果您的机器暂时关闭，它将不会在当天晚些时候运行作业。

从手册页：

> Anacron 可用于定期执行命令，频率以天为单位。与 cron(8) 不同，它不假定机器连续运行。因此，它可以在不是一天 24 小时运行的机器上使用，以控制通常由 cron 控制的每日、每周和每月作业。
> 
> 执行时，Anacron 从配置文件中读取作业列表，通常是 /etc/anacrontab（请参阅 anacrontab(5)）。此文件包含 Anacron 控制的作业列表。每个作业条目指定以天为单位的时间段、以分钟为单位的延迟、唯一的作业标识符和 shell 命令。
> 
> 对于每个作业，Anacron 检查该作业是否在过去 n 天内执行，其中 n 是为该作业指定的时间段。如果没有，Anacron 会在等待指定为延迟参数的分钟数后运行作业的 shell 命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T14:32:17.307

快乐是对的。我可以补充一点，如果您需要每天运行脚本，但不确定您的计算机是否会在请求的时间打开，您可以将脚本放在文件夹**/etc/cron.daily**中，它将在启动时运行。
您也可以使用[Anacron](http://linux.die.net/man/8/anacron)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T14:35:56.207

不幸的是没有。Cron 是一个守护进程，它每分钟检查一次配置并运行配置的命令。此外，您在特定于发行版的 cron.daily 中定义的 cronjobs 在特定时间执行，这通常在 /etc/crontab 中定义（读取 /etc/cron.daily 等中的所有配置）

如果您想确保您的作业每天执行一次，无论机器何时运行，我建议将其添加到您`/etc/rc.local`的启动后运行命令。

**编辑** 似乎 Ubuntu 上的默认 cron，anacron，做得更好。阅读 Mithrandir 的回答

# javascript - 错误：找不到 jquery.js

> ID：14216961
> 
> 赞同：3
> 
> 时间：2013-01-08T14:20:38.010
> 
> 标签：javascript, ruby-on-rails

我写了下一行`index.html.erb`：

```
<script src="/app/assets/javascripts/jquery.js"></script> 
```

我将文件：添加到文件`jquery.js`夹：`app/assets/javascripts`

但在控制台中，我收到一个错误：

```
GET http://localhost:3000/app/assets/javascripts/jquery.js 404 (Not Found) 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:31:37.830

## 请用这个

```
 <script src="assets/jquery.js" type="text/javascript"></script> 
```

## 这个对你有好处

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T14:25:39.570

问题是你从哪里调用`jquery.js`文件。我的意思是，这取决于你的`index.html`文件在哪里。

例如，如果您的 index.html 是 on `/app/index.html`，请尝试：

```
<script src="assets/javascripts/jquery.js"></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T14:24:23.980

您不需要完整路径，就`assets/jquery.js`足够了：

```
<script src="assets/jquery.js"></script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T14:28:49.060

你不能在这上面使用 rails helpers 吗？

```
<%= javascript_include_tag "jquery" %> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T16:21:05.117

我认为定义要添加的 javascript 文件的最常见位置是`manifest file`: `app/assets/javasripts/application.js`。它看起来像这样：

```
//= require jquery
//= require jquery-ui
//= require jquery_ujs 
```

然后，您将资产添加到应用程序范围内。

# wpf - WPF：样式中的动态属性值

> ID：14216962
> 
> 赞同：0
> 
> 时间：2013-01-08T14:20:39.910
> 
> 标签：wpf, xaml

是否可以在 WPF 样式中使用**PlaceHolder**，以后可以由实现控件为其分配一个值？就像是：

```
<Style x:Key="BigButton" TargetType="{x:Type Button}">
    <Setter Property="Foreground" Value="#58290a" />
    <Setter Property="FontFamily" Value="Lucida Console" />
    <Setter Property="FontSize" Value="24" />
    <Setter Property="Content">
        <Setter.Value>
            <StackPanel>
                <Image Source=[SOME PLACEHOLDER]></Image>
                <TextBlock>[ANOTHER PLACEHOLDER]</TextBlock>
            </StackPanel>
        </Setter.Value>
    </Setter>
</Style> 
```

然后一个 Button 可以为这个占位符分配一个图像路径，如下所示：

```
<Button Name="btn" Style="{StaticResource BigButton}">
    <SOME CLEVER WAY OF ASSIGNING A PATH TO Style.Content.StackPanel.Image.Source and Style.Content.StackPanel.TextBlock.Text>
</Button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:31:38.583

这听起来像是[Attached properties](http://blogs.msdn.com/b/helloworld/archive/2010/06/25/understanding-wpf-dependency-property-and-attached-property.aspx)的工作。

使用“占位符属性”创建一个实用程序类：

```
public static class BigButtonUtils
{
    public static Uri GetBBImage(DependencyObject obj)
    {
        return (Uri)obj.GetValue(BBImageProperty);
    }
    public static void SetBBImage(DependencyObject obj, Uri value)
    {
        obj.SetValue(BBImageProperty, value);
    }
    // Using a DependencyProperty as the backing store for BBImage.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty BBImageProperty =
        DependencyProperty.RegisterAttached("BBImage", typeof(Uri), typeof(BigButtonUtils), new UIPropertyMetadata(null));

    public static string GetBBCaption(DependencyObject obj)
    {
        return (string)obj.GetValue(BBCaptionProperty);
    }
    public static void SetBBCaption(DependencyObject obj, string value)
    {
        obj.SetValue(BBCaptionProperty, value);
    }
    // Using a DependencyProperty as the backing store for BBCaption.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty BBCaptionProperty =
        DependencyProperty.RegisterAttached("BBCaption", typeof(string), typeof(BigButtonUtils), new UIPropertyMetadata(null));
} 
```

将这些属性应用于 Button..

```
<Button Style="{StaticResource BigButtonStyle}"
        bb:BigButtonUtils.BBImage="http://programming.enthuses.me/1.png" 
        bb:BigButtonUtils.BBCaption="My caption" /> 
```

..并在您的样式中使用属性值：

```
<Style x:Key="BigButtonStyle" TargetType="{x:Type Button}">
    <Setter Property="Foreground" Value="#58290a" />
    <Setter Property="FontFamily" Value="Lucida Console" />
    <Setter Property="FontSize" Value="24" />
    <Setter Property="Content">
        <Setter.Value>
            <StackPanel DataContext="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Button}}">
                <Image Source="{Binding Path=(bb:BigButtonUtils.BBImage)}" Stretch="None" />
                <TextBlock Text="{Binding Path=(bb:BigButtonUtils.BBCaption)}" />
            </StackPanel>
        </Setter.Value>
    </Setter>
</Style> 
```

**注意：**不要在 Button 上设置任何其他内容，例如`<Button Content="..." />`或`<Button ...>SomeContent</Button>`，因为这会覆盖样式中的“占位符内容”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:30:16.893

您可以使用属性作为占位符：

```
 <Style x:Key="BigButton" TargetType="{x:Type Button}">
        <Setter Property="Foreground" Value="#58290a" />
        <Setter Property="FontFamily" Value="Lucida Console" />
        <Setter Property="FontSize" Value="24" />
        <Setter Property="Content">
            <Setter.Value>
                <StackPanel>
                    <TextBlock Text="{Binding Path=Placeholder}"></TextBlock>
                </StackPanel>
            </Setter.Value>
        </Setter>
    </Style> 
```

物业：

```
 public string _placeholder;
    public string Placeholder
    {
        get
        {
            return _placeholder;
        }
        set
        {
            _placeholder = value;
            OnPropertyChanged("Placeholder");
        }
    } 
```

现在您可以根据需要修改此属性，例如通过 OnClick-EventHandler 或命令。

# qt - Qt 嵌入式 Linux。找不到工具 kmap2qmap

> ID：14216970
> 
> 赞同：1
> 
> 时间：2013-01-08T14:21:08.147
> 
> 标签：qt, embedded-linux

我正在尝试使用线程 [Qt Embedded for Linux 更改键盘布局。键盘布局切换](https://stackoverflow.com/questions/2669464/qt-embedded-for-linux-keyboard-layout-switching)但 kmap2qmap 不起作用。bash 说找不到该命令。

我应该安装什么软件包才能使用 kmap2qmap？或者该工具的源路径在哪里？（也许我没有将它包含在 PATH 变量中）

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:02:35.793

它是 Qt 的一个工具部分，它似乎没有被二进制 Linux 发行版打包，因为它是一个特定于 Qt 嵌入式 Linux 变体的工具。因此，您可能必须构建 Qt 才能访问此工具。但最有可能的是，如果您正在进行嵌入式 Linux 开发，那么已经有一个工具可以为您构建 Qt。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-28T09:56:31.547

一个小小的补充，在我的 Qt 安装中，我运行了“MaintenanceTool”并用它来安装 Qt 源代码。如果你这样做，你会在下面找到来源

`Qt/5.6/Src/qttools/src/kmap2qmap`

Qt 是 Qt 文件夹，在那里你可以运行 qmake，make，它会在下面安装 'kmap2qmap'：

`Qt/5.6/Src/qttools/bin/kmap2qmap`

`~/Qt$ ./5.6/Src/qttools/bin/kmap2qmap /tmp/keymaps/i386/azerty/azerty.map Usage: kmap2qmap [--header] <kmap> [<additional kmaps> ...] <qmap> --header can be used to generate Qt's default compiled in qmap.`

# ruby - couchrest_model - 如何删除数据库？

> ID：14216974
> 
> 赞同：1
> 
> 时间：2013-01-08T14:21:28.717
> 
> 标签：ruby, couchrest

我希望能够开始我的测试指向一个不存在的 couchdb 数据库，这样我就可以从一个空白画布进行测试。我该怎么做？

```
describe MyCouchModel do
  before :all do
    described_class.drop # This doesn't work!
  end

  it 'should be empty' do
    described-class.all.length.should == 0
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:40:07.440

我在另一个库的一些测试中发现了这一点：

```
MyCouchModel.database.delete! 
```

所以在测试中你可以这样做：

```
describe MyCouchModel do
  before :all do
    described_class.database.delete!
    described_class.database.create!
  end
end 
```

# emacs - 如何在 hexl 模式下插入（不覆盖）一个字节？

> ID：14216978
> 
> 赞同：12
> 
> 时间：2013-01-08T14:21:35.433
> 
> 标签：emacs, hex

所有`hexl-insert-`命令都会覆盖该点的字节。是否开启没有区别`overwrite-mode`。

我需要实际插入一个新字节，将其他所有内容向下移动。

我怎样才能在emacs中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T16:27:08.687

您可能更喜欢`nhexl-mode`，它可以让您编辑文件，就好像它没有被 hexlified 一样（基本上，nhexl-mode 中的 hexlification 在重新显示期间即时完成），因此您可以毫无困难地插入/删除文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-05T16:52:31.930

我也不能直接在 nhexl-mode 中插入字符。我必须遵循这样的方法：

1.  打开文件。`M-x nhexl-mode`然后`M-x nhexl-nibble-edit-mode`
2.  在另一个编辑器中只输入**一个**字符，复制它
3.  在 Emacs 中移动光标，`C-y`拉出这个字符并调整文件格式
4.  移动光标固定十六进制

例如，如果我要插入`5300`来表示`S`，我需要按`C-y`获取`5353`，然后将其编辑为`5300`

我在 Windows 10 和*nhexl 1.2上使用**GNU Emacs 26.1 (build 1, x86_64-w64-mingw32)*

# c# - 数据网格的选定行，我想在文本框中显示一个字段

> ID：14216985
> 
> 赞同：0
> 
> 时间：2013-01-08T14:21:55.823
> 
> 标签：c#

数据网格有

雇主名称 | 位置 | 数字

当我选择第一行时，我需要雇主名称必须以 lbl 显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:37:49.897

使用源并获取行，然后从结果中获取所需的值，您可以在单击单元格时执行此操作

```
 private void dgv_CellContentClick(object sender, DataGridViewCellEventArgs e)
    {

       //get the result
       var result = (CastFromSource)this.dgvReport.Rows[e.RowIndex].DataBoundItem;

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:30:08.543

您可以使用行数据绑定事件。获取选定的行员工姓名。选择的行事件被触发，因此它可以在行数据绑定事件中处理

# javascript - 如何在我的对象中获取跨浏览器 ajax 引用

> ID：14216991
> 
> 赞同：0
> 
> 时间：2013-01-08T14:22:08.443
> 
> 标签：javascript, ajax, oop, object

我有一个返回此数据的服务器端文件

```
{
success: true,
m_sName:'smith, james',
m_ShortName:'Jim_S',
m_FirstName:'james',
m_LastName:'smith',
m_Rank:'CONT',
m_Unit:'',
m_Address:'PO Box 241',
m_City:'guthrie',
m_State:'KY',
m_Zip:'42234',
m_Phone:'270-956-3174',
m_Fax:'',
m_Email:'krullwarking@yahoo.com',
m_Title:'',
m_RegnetName:'james.andrew.smith',
m_BirthMonth:'10',
m_UserID:105745,
m_Age:47
} 
```

然后在客户端我有如下代码：

```
var Person = {
//Private members

getXmlRequestObj : function() {
        if (window.XMLHttpRequest) {
            importHTML2: new XMLHttpRequest();
        } else if(window.ActiveXObject) {
            importHTML2: new ActiveXObject("Microsoft.XMLHTTP");
        } else {
            importHTML2: "Your Browser needs an upgrade";
        }
    },

//Set up the global content retrieval object
//called importHTML
importHTML:  new ActiveXObject("Microsoft.XMLHTTP"),

getAjaxData:function(sUrl) {
    if (Person.importHTML.readyState == 4 || Person.importHTML.readyState == 0) {
        Person.importHTML.open("GET", sUrl, false);// make it wait for the response
        Person.importHTML.onreadystatechange = Person.handleDataArrived; 
        Person.importHTML.send(null);
    }       
},

//Called when the AJAX response is returned from any operation
//that lists handleContentArrived as its onreadystatechanged event
//for importHTML eg:importHTML.onreadystatechange = handleContentArrived; .
handleDataArrived: function() {
    if (Person.importHTML.readyState == 4) {
        Person._bar = eval("("+Person.importHTML.responseText+")");
        Person._sName = Person._bar.m_sName;
        Person._ShortName = Person._bar.m_ShortName;
        Person._firstName = Person._bar.m_FirstName;
        Person._lastName = Person._bar.m_LastName;
        Person._Unit = Person._bar.m_Unit;
        Person._securityGroups = Person._bar.m_Rank;
        Person._height = '6.0 ft';
        Person._weight = '280lbs';
        Person._hairColor = 'Brown/gray';
        Person._photoURL = 'www.photourl.com';
        Person._facebookID = 'Krullwarking@yahoo.com';
        Person._emailAddress = Person._bar.m_Email;
        Person._phoneNumber = Person._bar.m_Phone;
        Person._Fax = Person._bar.m_Fax;
        Person._NetworkName = Person._bar.m_RegnetName;
        Person._ID = Person._bar.m_UserID;
        Person._Address = Person._bar.m_Address;
        Person._City = Person._bar.m_City;
        Person._State = Person._bar.m_State;
        Person._Zip = Person._bar.m_Zip;
        Person._Title = Person._bar.m_Title;
    }
},
wholeName : function()
    {
    return this._firstName + ', ' + this._lastName; 
    },

// constructor
loadPerson : function(ID){
    Person._ID = ID;
    Person.getAjaxData('getUser.asp?uid='+ID);
},

setFirstName : function(fname) {
    Person._firstName = fname;
    return true;
},
// add the methods to the prototype so that all of the 
// Foo instances can access the private static
getFirstName : function() {
    return Person._firstName;
}
}
Student = {

superClass:Person,
sayHello : function(){  alert('hi, I am a student, and my name is '+this.superClass.wholeName());} 
}
Student.superClass.loadPerson(105745);
Student.sayHello(); 
```

这工作正常，但仅在 IE 中，因为 activex 对 xmlHTTP 的引用。每次我尝试让 importHTML 变量调用 this.getXmlRequestObj 或 Person.getXmlRequestObj 它都不起作用.....我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:41:46.667

您的问题是您从不使用`getXmlRequestObj`. 我猜你首先尝试做类似的事情

```
...
innerHTML: Person.getXmlRequestObj(),
... 
```

但这不起作用，因为您不能在对象自己的对象字面量定义中引用对象的属性。相反，您可以创建一个一次性初始化函数来设置`importHTML`，在对象定义之后立即调用该函数。

```
var Person = {
    ...
    initialize: function() {
        Person.importHTML = Person.getXmlRequestObj();
    }
    ...
}
Person.initialize(); 
```

**编辑：**

您的 JSON 没有带引号的键。JavaScript 非常高兴拥有这样的对象：

```
{
    foo: "bar"
} 
```

但 JSON 规范更严格。它需要引用对象键，如下所示：

```
{
    "foo": "bar"
} 
```

`eval`执行 JavaScript，因此它接受更宽松的语法。`JSON.parse`大多数其他 JSON 实用程序将只接受严格的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:33:13.813

首先，您将 设置`importHTML`为 ActiveX 而不是像设置其他变量那样使用跨浏览器方式`importHTML2`。那将是一个问题。

第二个问题是同步请求不触发`onreadystatechange`事件

```
Person.importHTML.onreadystatechange = Person.handleDataArrived; <-- not going to work 
```

将其更改为仅调用该方法

```
Person.handleDataArrived(); 
```

附带说明，您从服务器返回的 JSON 对象不是有效的 JSON。使用[jsonlint.com](http://jsonlint.com)查看错误。但是，因为您使用`eval()`的是 JSON.js 而不是，否则`JSON.parse()`您就可以侥幸逃脱。

# java - Java Struts 标记迭代器在大列表中挣扎

> ID：14216992
> 
> 赞同：1
> 
> 时间：2013-01-08T14:22:10.273
> 
> 标签：java, struts2, tags, iterator, struts

这里只是一个一般性问题。我有一个简单的网络应用程序，它允许用户过滤数据库中的许多记录。现在这不是一个特别大的列表（目前为 1,200 - 1,500）

但是我似乎遇到了一些零星的问题，没有错误，并且想知道是否有人看起来类似。

基本上，我返回的列表返回了预期的结果数量（例如 1,267），但*有时*并非所有结果都显示出来。有时您运行搜索并获得全部 1,267，有时页面似乎只是“停滞”在 74 或 123 之类的位置。再次点击搜索，可能会发生同样的情况，再次点击它，这次它可以工作（全部 1,267 个返回）。然后它会在接下来的 2 或 3 次工作，然后它会回到只显示 73 个结果。

现在从 Java 的角度来看，List 是正确的，所以这一定是 Struts 标签的问题（特别是`<s:iterator>`）。

我只是想知道是否有其他人经历过这种情况以及如何解决它。

同样值得注意的是，结果似乎加载得很慢，几乎就像 10 个块，然后延迟 2 秒，然后再延迟 10 秒，因此您可以想象 1,267 大约需要一分钟！这似乎非常错误。

如您所见，迭代器没有什么特别之处：

```
 <s:iterator value="resultList" var="obj" status="row">
    <tr>
        <td>[<s:property value="%{#row.count}"/>]</td>
        <td noWrap="true"align="center"><input type="checkbox" name="allocateChkBox" value="<s:property value="#obj.id"/>" /></td>      
        <td noWrap="true"><s:property value="#obj.reference"/></td>
        <td noWrap="true"><s:property value="#obj.status"/></td>
        <td noWrap="true"><s:property value="#obj.resource"/></td>
        <td noWrap="true"><s:property value="#obj.society"/></td>
        <td noWrap="true" align="center"><s:property value="#obj.date"/></td>
        <td noWrap="true" align="center"><s:textfield size="11" name="quantity" value="%{#obj.quantity}"/></td>                 
        <td noWrap="true"><s:property value="#obj.embellisher"/></td>
        <td noWrap="true" align="center"><s:textfield  maxLength="5" size="2" name="boxNumber" value="%{#obj.boxNumber}" /></td>
        <td noWrap="true" align="center"><s:textfield size="11" name="trackingNumber" value="%{#obj.trackingNumber}"/></td>
    </tr>
</s:iterator> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:02:58.533

当列表包含更多记录时，我也面临类似的缓慢。原因是迭代器会导致最终 jsp 类中出现“out.write”语句的日志。

在您的情况下，每次迭代都有接近 10 个 out.write for ，并且在两侧都与 & 连接。

显着提高性能的一种方法是使用 StringBuilder 在服务器端形成表格内容并使用标记（替换迭代器）编写最终字符串。

# java - 自定义调试器来调试远程/本地 java 应用程序

> ID：14216993
> 
> 赞同：0
> 
> 时间：2013-01-08T14:22:12.027
> 
> 标签：java, remote-debugging, jdi

我想使用 java 程序调试远程 java 应用程序（我不介意在程序中使用 eclipse api），但我不想使用 eclipse GUI 调试它。

任何建议/帮助将不胜感激。

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:28:02.480

使用本机 jdb，在此处了解更多信息：http: [//docs.oracle.com/javase/7/docs/technotes/tools/solaris/jdb.html](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/jdb.html)

请注意，删除调试的应用程序应该在调试模式下运行，以便您能够附加它。

# objective-c - 滑动菜单：如何处理实际变化的视图控制器

> ID：14216994
> 
> 赞同：1
> 
> 时间：2013-01-08T14:22:13.890
> 
> 标签：objective-c, ios, cocoa-touch, viewdeck

如今，似乎 50% 的 iPhone 应用程序都在使用类似 Facebook 的滑动菜单。我还使用 ViewDeck 库 (https://github.com/Inferis/ViewDeck) 使用此 UI 创建了一些应用程序。左视图是一个 UITableView，点击一个项目会改变中心视图。

不过，我一直在为良好的“菜单管理”而苦苦挣扎。你创建一个包含所有视图控制器的 NSArray 吗？一次懒加载一个更好吗？你如何处理记忆？不太确定在保持内存使用率尽可能低的同时最好的方法是什么。

当我查看这些滑动菜单库时，从来没有一个完整的示例应用程序具有工作菜单和多个控制器。就像我说的，我已经使用 ViewDeck 创建了几个应用程序，但是视图控制器的实际更改总是感觉笨拙且根本不是最佳的（包含所有实例化视图控制器的数组）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:26:14.550

我将 Array 用于视图控制器而不是视图。当用户选择指向该视图控制器的单元格时，将加载视图。所以它是延迟加载。如果你认为你需要小心内存，那么在内存警告时你可以释放你现在不需要的视图控制器。

当然，这取决于您在该控制器中有什么，但通常（标准 UI）您不需要释放它们。我从来不需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:54:27.800

首先，请注意我从未使用过 Facebook 应用程序或 ViewDeck，根据演示视频很清楚该库的用途。

我可以建议你寻找不同的模式，例如有一本书`Pro Objective-C Design Patterns for iOS`，它描述了一个非常简单的中介模式，它基本上是控制器的控制器。

内存管理完全取决于任务，我看不出有任何理由一次初始化所有视图控制器，因为它们的视图可能会在不显示的情况下被加载。此外，视图并不总是控制器中最消耗资源的部分。这种方法需要非常严格和仔细的控制器开发，您还必须使它们可重用，这并不容易。

相反，我会尝试使其尽可能灵活和简单：一组使用的视图控制器，下一个被加载并按需添加。它应该与`UINavigationController`控制器堆栈非常相似。`UINavigationController`本身就是一个很好的研究样本，你不会有源代码，但你会拥有所有的标题，并且内部逻辑并不难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T19:24:26.977

我所做的是创建了一个容器视图控制器，侧边栏菜单位于视图底部，这意味着它不可见。最重要的是，我有一个 contentView（它只是一个 UIView），我有一个 UINavigationController，它管理 UIViewControllers，导航栏设置为隐藏。然后我将对该 UINavigationController 的引用传递给侧边栏菜单，它只是带有 UITableView 的 UIView 的子类，这就是加载 UIViewController 的地方。当用户选择一行时，我分配/初始化视图控制器。因此，当新的 UIViewController 被推送到堆栈上时，它会被推送到内容视图中的 UINavigationController 上。

# wpf - 表/视图没有定义主键

> ID：14216995
> 
> 赞同：6
> 
> 时间：2013-01-08T14:22:14.127
> 
> 标签：wpf, sql-server-2008, entity-framework-4, entity-framework-4.1

我正在尝试将数据绑定与 WPF 和实体框架一起使用。

将数据源添加到我的项目后，我保存了我的项目，以查看在我完成之前是否一切正常。

但我有 11 条警告/信息消息说明：

**表/视图“MyDataBase.TableName”没有定义主键。已推断出密钥，并将定义创建为只读表/视图。**

我有 14 个表，其中 4 个表有自己的主键，其他表使用外键相互引用

这个问题到底是怎么回事？请帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T14:26:54.513

EF 中的每个实体都必须是唯一可识别的。EF 使用数据库主键来定义实体键。虽然在某种程度上可以在没有主键的情况下工作，但绝对不推荐它，因为它会导致很多问题。错误中直接提到了核心问题 - 如果表没有主键，则 EF 将其标记为只读，因为它不确定它是否可以唯一标识要更新的记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-29T13:01:26.580

事实上，这只是一个警告，但您将永远无法使用 Save 函数，在我的情况下，对于我坚持工作的设计不佳的 DB，EF 对我来说毫无价值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-27T04:54:51.760

在表中定义主键并更新实体数据模型。您可以在打开 EF 模型并右键单击并选择更新后执行此操作。从窗口中选择刷新选项并验证您的模型。

![在此处输入图像描述](../Images/1da52f6a7d13b5821914c3241ad766b2.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-30T20:36:35.113

您只需从项目中删除 EDMX 文件。现在移动到您的数据库并向每个表添加主键。之后将新的 EDMX 添加到您的项目中。它会正常工作。并且不要忘记从项目中的配置文件中删除 connectionString 标记。

# jquery - 在嵌套的 AJAX 调用中测试 JSONP 的值 (URL)

> ID：14216997
> 
> 赞同：0
> 
> 时间：2013-01-08T14:22:20.237
> 
> 标签：jquery, ajax, jsonp

我想测试包含图像的 jsonp url 的 $img。最佳做法是什么？

我应该嵌入另一个 $AJAX 调用吗？

```
var ebRand = Math.random()+'';
ebRand = ebRand * 75;
var URL = 'http://ox-d.bbt.com/w/1.0/arj?o='+ebRand+'&auid=258624&c.env=rvw';
$.ajax({
    async:true,
    url: URL,
    dataType: 'jsonp',
    crossDomain: true,
    success: openX,
    errror: errorX,
    jsonpCallback: 'openX'
});
function openX(data) {
    alert('SUccess however load function error.')
    var ad = data['ads']['ad'][0]['html'];
    $img = $(ad).find('img').attr('src');
    //I WANT TO TEST THE $IMG which holds the jsonp url for an image.
    //What is the best practive should I embedded another $AJAX call?

    console.log(data);
}
function errorX(data){
    alert('Error')
    } 
```

# python - 从 python 中的 URL 中删除 GET 变量

> ID：14216998
> 
> 赞同：3
> 
> 时间：2013-01-08T14:22:22.317
> 
> 标签：python, regex, algorithm, url, python-2.7

我有这个网址：

```
http://www.exmaple.com/boo/a.php?a=jsd 
```

我想要的输出是这样的：

```
http://www.exmaple.com/boo/ 
```

如果我有，同样明智

```
http://www.exmaple.com/abc.html 
```

它应该是

```
http://www.exmaple.com/ 
```

和

```
http://www.exmaple.com/ 
```

应该返回

```
http://www.exmaple.com/ 
```

没有任何改变

**这是我尝试过的**

```
re.sub(r'\?[\S]+','',"http://www.exmaple.com/boo/a.php?a=jsd") 
```

**但它返回**

```
http://www.exmaple.com/boo/a.php 
```

有什么建议可以做些什么来获得正确的输出，或者有没有人有更好的想法来完成这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T14:43:43.173

请`urlparse`像这样使用 stdlib 模块。一般来说，除非绝对必要，否则我会尽量避免使用正则表达式。

```
from urlparse import urlparse, urlunparse
>>> parsed = urlparse("http://www.exmaple.com/boo/a.php?a=jsd")
>>> scheme, netloc, path, params, query, fragment = parsed
>>> urlunparse((scheme,netloc,path.split('/')[1],'','',''))
'http://www.exmaple.com/boo' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:25:27.867

我会做这样的事情：

```
>>> import re
>>> url = "http://www.exmaple.com/boo/a.php?a=jsd"
>>> url[:url.rfind("/")+1]
'http://www.exmaple.com/boo/' 
```

删除最后一个“/”之后的所有内容。我不确定它是否涵盖所有特殊情况...

**编辑**：使用新解决方案`urlparse`和我的简单`rfind`：

```
import re, urlparse
def url_cutter(url):
    up = urlparse.urlparse(url)
    url2 = up[0]+"://"+up[1]+up[2]
    if url.rfind("/")>6:
            url2 = url2[:url2.rfind("/")+1]
    return url2 
```

然后：

```
In [36]: url_cutter("http://www.exmaple.com/boo/a.php?a=jsd")
Out[36]: 'http://www.exmaple.com/boo/'

In [37]: url_cutter("http://www.exmaple.com/boo/a.php?a=jsd#dvt_on")
Out[37]: 'http://www.exmaple.com/boo/'

In [38]: url_cutter("http://www.exmaple.com")
Out[38]: 'http://www.exmaple.com' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:27:57.880

可能有一种更优化的方法来做到这一点，但使用这种方法，您将不需要晦涩的导入或第三方包。

```
url = "http://www.google.com/abc/abc.html?q=test"
cleaned_url = url[:url.rindex("?")]
cleaned_url = cleaned_url.split("/")
cleaned_url = [item for item in cleaned_url if ".html" not in item]
cleaned_url = "/".join(cleaned_url) 
```