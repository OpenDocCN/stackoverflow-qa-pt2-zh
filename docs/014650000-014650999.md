# StackOverflow 问答 14650000-14650999

# sql - 查询计算多次行程之间的时间

> ID：14650000
> 
> 赞同：0
> 
> 时间：2013-02-01T15:50:19.573
> 
> 标签：sql, sql-server

我们有一个表格，存储司机在给定日期的行程次数和行程类型，如下所示

```
Date           Delivery        Pick-up
====           ========        =======
01/01/2013     5               0 
```

我们还有一个考勤表，存储司机考勤如下。

```
AttDate        InTime         OutTIme       THours
=======        ======         =======       ======
01/01/2013     10:00          13:00         3 
```

如何使用 MSSQL 2008/2012 使用员工 Thours 计算 5 次行程之间的平均时间？这是出于性能监控的目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:01:05.050

我假设您有某种`driver_id`，您必须将其添加到联接中，或者，正如@Randy 指出的那样，您将无法确定哪些行属于哪些驱动程序。
这是查询的一般形式：

```
SELECT Trip.business_day, 
       DATEDIFF(minute, arrivedAt, leftBy) / CASE WHEN deliveries = 0
                                                  THEN 1
                                                  ELSE deliveries END 
                            as average_deliveries_in_minutes
FROM Trip
JOIN Driver_Attendence
  ON Driver_Attendence.business_day = Trip.business_day 
```

（[工作 SQL Fiddle 示例](http://sqlfiddle.com/#!6/373e4/3)）
您实际上并没有列出您想要做的事情`deliveries = 0`是正确的 -`CASE`存在所以您不会得到“除以零”错误。排除没有任何交付的司机将允许您删除案例，并仅引用该列。

# sql - 用外键将列中的数据替换为其他表中的相同数据

> ID：14650003
> 
> 赞同：5
> 
> 时间：2013-02-01T15:50:31.430
> 
> 标签：sql, foreign-keys

希望你们能帮助我弄清楚如何做一些我以前没有遇到过的事情。

我有一张桌子，叫它 TableA，有很多列。其中之一是“状态”，其条目如下：

```
state
'MA'
'NJ'
'HI' 
```

等等。我想创建某种方法来将这些值提取到一个新的外键表中，称为 StateTable，其中包含 state_key 和 state 列。

例如，这是我设想的逐行进行的方式：

第 1 行：表 A 中“状态”列中的值为“MA”。检查 StateTable 是否有一个条目，其中“状态”列是“MA”。如果是这样，则获取该行的 state_key，并将 TableA 中的条目替换为外键，以便该行现在具有指向“MA”的 FK，而不是直接存储该值。如果 StateTable 没有“MA”条目，则插入它，并对新的 FK 执行相同操作。依此类推，对于每一行。

所以最终结果将是两个表：

表A

```
state
1
2
3 
```

状态表

```
state_key    state
1            'MA'
2            'NJ'
3            'HI' 
```

不应该有任何硬编码的东西，因为我也需要对其他列执行此操作，例如状态，它们具有少量有限值。

tl；dr 一种在将列转换为 FK 表时保留列中数据的方法。

有任何想法吗？谢谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T15:59:29.040

使用自动枚举字段“state_key”创建状态表，`SELECT DISTINCT ... INTO`用于填充它，并使用类似

```
UPDATE TableA SET TableA.state=
   (SELECT state_key FROM StateTable where TableA.state=StateTable.state) 
```

将值放入其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:58:41.840

我的建议是执行以下操作

1.  创建新的状态表（手动或使用 insert into 语句）
2.  如果手动创建您的状态表，请从 TableA 向其中插入唯一记录
3.  在 TableA (StateID) 外键列中创建一个新列，链接到您的新状态表
4.  通过将 TableA 状态与状态表中的状态匹配并从该表中提取 ID，将值插入到新的 StateID 列中。

如果您需要帮助查询，请告诉我。

# sql - to_char() 的数字格式掩码

> ID：14650007
> 
> 赞同：1
> 
> 时间：2013-02-01T15:50:43.383
> 
> 标签：sql, oracle11g

你能解释一下以下查询之间的区别吗

```
SELECT TO_CHAR(1980.55,'$9,999D999') FROM DUAL; 
```

和

```
SELECT TO_CHAR(1980.55,'$9G999D999') FROM DUAL; 
```

第一个查询失败并出现错误，我不明白的是组分隔符默认为'，那么为什么一个失败而另一个成功执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:58:53.677

有趣的是，以前没有遇到过，但是无法想象你为什么要混合它们。我在文档中甚至在 MSO 上都找不到任何东西，所以我推测...

`G`将逗号/句点与组分隔符/小数字符（或）混合时出现的 ORA-01481 错误`D`是“无效的数字格式模型”，这表明它纯粹是在验证字符串`'$9,999D999'`。似乎在这个阶段它不知道你的`NLS_NUMERIC_CHARACTER`设置，即使它被传递给`to_char()`函数。这似乎并不太不合理，因为相同的验证将应用于存储代码（过程、包、视图或其他），并且您不会期望基于 NLS 设置（即硬解析）重新验证缓存的查询。

它猜测它*可以*`G`通过 char 的第三个参数指定and的含义来安全地完成`D`，但这似乎对于边缘情况来说可能需要做很多工作，如果你对它们进行硬编码，那么意义就更小了无论如何将它们混合在模型中。

因此，如果在验证格式模型字符串时它不知道如何`G`以及`D`将在运行时进行评估，[那么文档中列出的限制](http://docs.oracle.com/cd/E11882_01/server.112/e41084/sql_elements004.htm#BABIGFBA)就会成为问题。您的逗号应该是组分隔符还是十进制字符？如果在运行时您的十进制字符是`.`那么格式将是无效的，因为您只能拥有其中一个。同样，如果模型是，`'9.999G999'`那么如果您的组分隔符是有效的`.`，但如果是则无效`,`。在解析时而不是在运行时失败似乎更安全、更可靠。

或者换句话说，'组分隔符默认为`,`'的点是*在*格式模型被验证之后，所以它没有任何区别。

但是，正如我所说，推测内部结构，这绝不是一个好主意。当文档说“逗号[或组分隔符]不能出现在数字格式模型中的小数字符或句点的右侧”时，它似乎有点误导，因为它们根本不能共存。可能值得提出一个文档错误？

* * *

针对 8i 的错误 1204892 提出了一个类似的问题，并作为非错误关闭，并带有评论“这是它的设计工作方式”。

# gwt - 拦截客户端证书并将其转发到 Web 服务

> ID：14650008
> 
> 赞同：1
> 
> 时间：2013-02-01T15:50:47.363
> 
> 标签：gwt, tomcat, servlet-filters, webservice-client, pki

我有一个在 tomcat 应用程序服务器上运行的 Web 应用程序 (gwt)。此 Web 应用程序使用多个 Web 服务（登录、应用程序数据传输、查询等）。tomcat 上的 web 服务客户端实现为 apache axis2 web 服务客户端。

对于用户登录，我在 Web 应用程序中提供了一个带有用户名和密码的表单。该数据通过网络服务传输以验证用户身份。

计划将洞认证机制更改为基于客户端证书的认证。身份验证仍应在 Web 服务提供商端完成。所以我的系统有三个相关的组件：web客户端、tomcat应用服务器和web服务提供者。

应用程序的每个用户都有自己的私有客户端证书（PKI 令牌，X.509-Auth-Cert）。当用户连接到 Web 应用程序时，会请求他的证书。

如何转发客户端证书以在 Web 服务中使用？（tomcat 不负责认证）。

**1.)**有没有办法在发生身份验证错误之前拦截请求并提取客户端证书？我发现了一些关于 Servlet 过滤器的信息听起来真的很好，但我不确定在哪里实现它来拦截证书，然后再根据 tomcats 密钥库进行验证。

**2.）**如果可能的话，我怎样才能将客户端证书传递给Web服务？

感谢您阅读

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:29:10.103

不，不是。身份验证中使用的真正部分是与证书关联的*私钥*，而不仅仅是证书本身。而且，通常，您无法从 Web 客户端检索它。因此，您不能真正将您从 Web 客户端收到的凭据传递到 Web 服务客户端。证书本身很容易获得，但在没有相应私钥的情况下无法进行身份验证。

# java - 如何解决 java.security.AccessControlException？

> ID：14650010
> 
> 赞同：4
> 
> 时间：2013-02-01T15:50:54.910
> 
> 标签：java, security, applet, accesscontrolexception, tempdir

我正在尝试通过我的 Web 项目上的小程序访问客户端的临时目录。
当我自己运行小程序时，它`tempdir`没有问题。

当我尝试使用 javascript 在我的项目中获取它并调用 applet 方法时，我正在使用`accessControlException`我的 javascript 控制台。当我尝试读取临时目录下的文件时，我也遇到了同样的异常。

这正是我所看到的：

```
java.security.accesscontrolexception access denied (java.util.propertypermission java.io.tmpdir read)
java.security.accesscontrolexception access denied (java.io.filepermission read) 
```

如何解决`java.security.AccessControlException`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:01:43.227

最简单的解决方案就是签署小程序。

# javascript - 打字稿和正则表达式

> ID：14650014
> 
> 赞同：5
> 
> 时间：2013-02-01T15:51:13.407
> 
> 标签：javascript, regex, typescript

打字稿 说：

> 属性“ `$1`”不存在于类型“ `{ (pattern: string, flags?: string): RegExp; new(pattern: string, flags?: string): RegExp; }`”的值上

可以通过查看*TypeScript 0.8.2*`lib.d.ts`附带的定义来解释该类型：

 *```
interface RegExp {
    /** 
      * Executes a search on a string using a regular expression pattern, and returns an array containing the results of that search.
      * @param string The String object or string literal on which to perform the search.
      */
    exec(string: string): RegExpExecArray;
    /** 
      * Returns a Boolean value that indicates whether or not a pattern exists in a searched string.
      * @param string String on which to perform the search.
      */
    test(string: string): bool;
    /** Returns a copy of the text of the regular expression pattern. Read-only. The rgExp argument is a Regular expression object. It can be a variable name or a literal. */
    source: string;
    /** Returns a Boolean value indicating the state of the global flag (g) used with a regular expression. Default is false. Read-only. */
    global: bool;
    /** Returns a Boolean value indicating the state of the ignoreCase flag (i) used with a regular expression. Default is false. Read-only. */
    ignoreCase: bool;
    /** Returns a Boolean value indicating the state of the multiline flag (m) used with a regular expression. Default is false. Read-only. */
    multiline: bool;

    lastIndex: number;
}
declare var RegExp: {
    new (pattern: string, flags?: string): RegExp;
    (pattern: string, flags?: string): RegExp;
} 
```

我的问题是如何更改/更新它以允许我参考`RegExp.$1`,`RegExp.$2`等？最好是我可以单独声明的东西，因为我不打算直接编辑`lib.d.ts`（很可能会在更新时被替换）

我试过这个无济于事：

```
declare var RegExp: {
    new (pattern: string, flags?: string): RegExp;
    (pattern: string, flags?: string): RegExp;
    $1: any;
    $2: any;
    $3: any;
    $4: any;
    $5: any;
    $6: any;
    $7: any;
    $8: any;
    $9: any;    
} 
```

`string`我想它们实际上应该用类型声明。但无论如何它都不会消除错误。

除此之外，我也很好奇这到底意味着什么（为什么用和不用 ? 声明它`new`？）：

```
new (pattern: string, flags?: string): RegExp;
(pattern: string, flags?: string): RegExp; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:23:10.093

你`declare var`的很近。接口是开放的，所以你可以写：

```
interface RegExp {
    $1: string;
    $2: string;
    // etc
} 
```

关于第二个，这是因为`new RegExp('[A-Z]')`两者`RegExp('[A-Z]')`都可以创建 RegExp（在类型方面，它既是可调用函数又是构造函数）。*

# ruby-on-rails - 如何像大多数宝石一样添加自定义模型修饰符？

> ID：14650015
> 
> 赞同：0
> 
> 时间：2013-02-01T15:51:17.537
> 
> 标签：ruby-on-rails, ruby, rubygems, mixins

我想像很多宝石一样干燥一些模型功能。例如，在 gem[中，](https://github.com/mbleigh/acts-as-taggable-on)我们应该只添加`acts_as_taggable`到任何模型中以启用标记。如何将我自己的`include_god_mode`模型修改器添加到我的 Rails 项目中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:59:46.593

所以我发现它是通过简单的类扩展和混合来实现的。

例如，在`acts-as-taggable-on`gem 中有很多模块包含在 ActiveRecord::Base 中，因此`acts_as_taggable`在模型中只是语法糖。

以下是`acts-as-taggable-on`包括以下内容的来源：

```
if defined?(ActiveRecord::Base)
  ActiveRecord::Base.extend ActsAsTaggableOn::Taggable
  ActiveRecord::Base.send :include, ActsAsTaggableOn::Tagger
end

if defined?(ActionView::Base)
  ActionView::Base.send :include, ActsAsTaggableOn::TagsHelper
end 
```

因此，如果我想在我的模型中添加这样的糖，我需要在 ActiveRecord::Base（或类似的超类，如果是 ActiveRecord ORM）中包含一个方法，它将包含我的东西的模块。

# c++ - 函数速度提前或结束

> ID：14650020
> 
> 赞同：-1
> 
> 时间：2013-02-01T15:51:38.560
> 
> 标签：c++, performance, visual-studio

在编写函数时，似乎总是有两个阵营。

1.  那些希望返回 1 的函数可以在函数中找到（通常在最后）
2.  那些喜欢线性数据流的人（通常有多个返回）

通常这更多的是个人风格，但我想谈谈性能。在我问这个问题之前，让我先提出一个假设场景：

假设要求状态：

```
Function should first try to calc ReturnVal based off of A. (Typical Case)
If A is unable to be determined then try to find based off of B. 
If B is unable to be determined then try to find based off of C. 
If all else fails then return C since that is always known.
Function should return enum which states which way the value was found. 
```

因此，可以说我们有以下内容：

```
enum HowFound
{
  eWithA,
  eWithB,
  eWithC
};

HowFound CalcReturn(int& nValue) const; 
```

**我的问题** 就速度（jmp 的数量等）而言，您认为编译器在大多数情况下可以更好地优化哪种风格？

**样式 1**

```
HowFound CalcReturn(int& nValue) const
{
  HowFound howFound = eWithA;

  const int valWithB = CalcWithB();
  const int valWithC = CalcWithC();

  nValue = CalcWithA( valWithB, valWithC );
  if (nValue == -1)
  {
    nValue = valWithB;
    howFound = eWithB;
    if (nValue == -1)
    {
       nValue = valWithC;
       howFound = eWithC;
    }
  }

  return howFound; 
} 
```

使用样式 1，您存储返回值并且永远不会提前终止函数。你有一个回报，它位于最后。

**风格 2**

```
HowFound CalcReturn(int& nValue) const
{
  const int valWithB = CalcWithB();
  const int valWithC = CalcWithC();

  nValue = CalcWithA( valWithB, valWithC );
  if (nValue != -1)
  {
    return eWithA;
  }

  if (valWithB != -1)
  {
    nValue = valWithB;
    return eWithB;
  }

  nValue = valWithC;
  return eWithC;
} 
```

使用样式 2，数据流更加“线性”。一旦找到该值，您就退出该函数。这意味着函数中有更多的终止点。

免责声明：显然每种样式都可以进行一些调整，但我的问题仍然保持不变。另外，是的，我可以编写这两个函数并检查反汇编（我有），但是随着更多“细节”的添加，结果会发生变化。我的问题是关于哪种风格表现更好的可能性更高（如果有的话）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:08:58.783

好吧，尽管编译器所做的优化变化很大，但两种代码都将减少为或多或少同等有效的代码。因此执行时间将或多或少相同。但是，如果您正在寻找节省时钟周期的方法，则应该对其进行测试。在那种情况下，故事并没有就此结束。它还取决于硬件优化，尤其是分支预测器。因此，如果您对值的频率和所采用的路径有所了解，并且您正在寻找在时钟周期级别进行保存，那么重构代码以适应路径将会有所帮助。如果您不是在寻找这个，那么请考虑可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:57:54.157

在大多数情况下，编译器将为两种样式生成相同的代码，尽管我注意到您的特定实现可能效率较低（最公平的比较将在`else`s 中分配；您的分配然后重新分配）。

但是，当然，您的编译器可能会有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:59:29.507

编译器会将您的两个示例翻译成相同的代码。它更多的是关于“哪个更容易阅读”[这实际上取决于您的代码如何匹配算法的实际描述]。

编辑：我应该说“任何体面的、优化的编译器”——一个非常基本的、优化不佳的编译器实际上可能完全按照你的要求做，而不需要重新安排任何东西，因此最终在一种情况下比另一种情况更好/更差。但是，只要您不故意编写代码以使其不必要地执行冗长的操作（例如，在长字符串上调用 strlen() 或 is_prime(101218819) 或类似的东西，然后不使用该值，您应该得到相同的结果结果）。与往常一样，如果您知道这是代码的重要部分 [基于分析]，那么请务必尝试使用您用于项目的编译器和设置，看看它是否有任何不同 - 与往常一样，询问互联网不能替代对代码的关键部分进行基准测试。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-01T16:34:20.353

[https://stackoverflow.com/faq#dontask](https://stackoverflow.com/faq#dontask)

由于以下原因，这个问题似乎可能不合适：

*   没有要解决的实际问题：“我很好奇其他人是否有这样的感觉。”</li>
*   这是一个伪装成问题的咆哮：“______糟透了，我说的对吗？”</li>

除此之外，OP 也没有真正考虑过这个问题。

这是第三种风格：

```
 HowFound CalcReturn(int& nValue) const
 {
   const int valWithB = CalcWithB();
   const int valWithC = CalcWithC();
   HowFound howFound = eWithC;
   nValue = CalcWithA( valWithB, valWithC );
   if (nValue != -1)
   {
     howFound= eWithA;
   }
   else if (valWithB != -1)
   {
     nValue = valWithB;
     howFound = eWithB;
   } 
   else {
     nValue = valWithC;
   }
   return howFound;
 } 
```

这种风格是A还是B？*无论对linear*的直觉如何，它似乎都是*线性*的。它有 1 个返回值，很可能所有 3 个函数都编译为相同的代码。尽管使用一些现代编译器，NRVO在单个出口点上效果*更好（* [http://msdn.microsoft.com/en-us/library/ms364057%28v=vs.80%29.aspx#nrvo_cpp05_topic3](http://msdn.microsoft.com/en-us/library/ms364057%28v=vs.80%29.aspx#nrvo_cpp05_topic3)，示例 4）。

 **我增加还是减少了复杂性？

这是更快还是更慢？

我可以通过多少其他方式转换此代码？

如何确定哪个更易于维护？

我可以说每次将一个函数转换为另一个只有 1 个返回值的函数必然会使代码同样或更复杂吗？

更复杂是什么意思？

其中一些是开放式问题......**

# sql - 在 WHERE 语句中使用 pl/sql 输出

> ID：14650021
> 
> 赞同：0
> 
> 时间：2013-02-01T15:51:40.003
> 
> 标签：sql, levenshtein-distance

我有一个小问题。所以我使用 Levenshtein-score 来搜索两个不同表格中街道名称之间超过 85% 的比较。但是当我在 WHERE 语句中使用我的 Levenshtein-score 计算时，我得到的输出是这样的：

*   一张表中的街道名称：BEAU SITE 1ÈRE AVENUE & BEAU SITE 2ÈME AVENUE
*   另一表中的街道名称：BEAU SITE-1ÈRE AVENUE & BEAU SITE-2ÈRE AVENUE
*   输出：连接所有，第一个与第一个和第二个，第二个与第一个和第二个。

所以我必须使用所有分数计算的最大分数，是这样的：

```
 DECLARE    
    L_SCORE NUMBER;    
    L_NEW_SCORE NUMBER;    
    L_BEST_MAP varchar2(255);
    CURSOR C_TO_FIND IS    
    SELECT TT_NAME, L_MUNI, R_MUNI    
    FROM Y_TT_NOT_LINKED_STREETS    ;    
    CURSOR C_TOMTOM_STREET (L_MUNI VARCHAR2) IS    
    SELECT STREET_NAME    
    FROM STREET_NAME SN
                JOIN STREET STR ON STR.STREET_ID = SN.STR_STREET_ID
                JOIN ADMINISTRATIVE_AREA_NAME AAN ON AAN.AAR_ADMIN_AREA_ID = STR.AAR_ADMIN_AREA_ID    
    WHERE AAN.ADMIN_AREA_NAME = L_MUNI
                 AND STR.STREET_ID NOT IN (SELECT ROMA_STREET_ID FROM Y_DS_STREETS_LINK);
BEGIN   
FOR S IN C_TO_FIND LOOP
              L_SCORE := 0;
              L_NEW_SCORE := 0;
    FOR R IN C_TOMTOM_STREET(S.L_MUNI) LOOP
                  L_SCORE := PCK$ADDRESSMATCH.GET_LEVENSHTEIN_SCORE(S.TT_NAME,R.STREET_NAME);
                  IF L_SCORE > L_NEW_SCORE  THEN
                     L_NEW_SCORE := L_SCORE ;
                     L_BEST_MAP := R.STREET_NAME ||CHR(9)||TO_CHAR(L_NEW_SCORE);
                  END IF;
    END LOOP;
    IF L_NEW_SCORE > 85 THEN
                 DBMS_OUTPUT.PUT_LINE(S.L_MUNI||CHR(9)||S.TT_NAME||chr(9)||L_BEST_MAP);
    END IF;
    L_NEW_SCORE := 0;   
END LOOP; 
END; 
```

现在的问题是，如何在 WHERE 语句中使用输出，这样我就可以只链接最大的 Levenshtein-score 而不会出现上述问题？这样： SELECT ... FROM ... WHERE （前一个块代码的最大分数）

（或者以另一种方式，在整整一周执行 SQL 之后，我看不到解决方案）

谢谢！=)

# sql - 在 SQL Server 中查找和删除重复的朋友连接

> ID：14650026
> 
> 赞同：1
> 
> 时间：2013-02-01T15:51:55.293
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我需要一个脚本来找到不止一次有朋友联系的会员，这样它就不会在网站上多次显示他们的友谊。

MemberConnection 表如下：

```
+----------------------+------------+----------------+
|  MemberConnectionID  |  MemberID  |  ConnMemberID  |
+----------------------+------------+----------------+
|  25                  |  33        | 43             |
|  26                  |  43        | 33             |
|  27                  |  13        | 143            |
|  28                  |  143       | 13             |
|  29                  |  33        | 43             |
+----------------------+------------+----------------+ 
```

如您所见，第 25 行和第 29 行是相同的，我需要找到这些重复项以便将它们删除。

我该如何为此编写脚本？

任何人都可以提供的任何帮助将不胜感激。

提前谢谢了

新杰克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:56:56.627

如果您想保留一个连接，请尝试以下操作：

使用它来选择连接：

```
;WITH CTE
AS
(
   SELECT
      MemberConnectionID, 
      ROW_NUMBER() OVER (PARTITION BY MemberID, ConnMemberID ORDER BY MemberConnectionID) RN
   FROM MemberConnection 
)
SELECT 
      MemberConnectionID
FROM CTE
WHERE RN > 1 
```

或使用它从表中删除：

```
;WITH CTE
AS
(
   SELECT
      ROW_NUMBER() OVER (PARTITION BY MemberID, ConnMemberID ORDER BY MemberConnectionID) RN
   FROM MemberConnection 
)
DELETE
FROM CTE
WHERE RN > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:06:25.527

使用它作为测试：

```
DECLARE @Table AS TABLE
    (
      MemberConnectionID INT ,
      MemberID INT ,
      ConMemberID INT
    )

INSERT  INTO @Table
        SELECT  1 ,
                2 ,
                3
INSERT  INTO @Table
        SELECT  2 ,
                3 ,
                4
INSERT  INTO @Table
        SELECT  3 ,
                2 ,
                3 
```

**选择出现的成员连接**

```
SELECT    COUNT(MemberConnectionID) AS Occurence ,
          MemberID ,
          ConMemberID
FROM      @Table
GROUP BY  MemberID ,
          ConMemberID 
```

**删除语句**

```
DELETE  FROM @Table
FROM    @Table t
        INNER JOIN ( SELECT MemberID ,
                            ConMemberID
                     FROM   ( SELECT    COUNT(MemberConnectionID) AS Occurence ,
                                        MemberID ,
                                        ConMemberID
                              FROM      @Table
                              GROUP BY  MemberID ,
                                        ConMemberID
                            ) t2
                     WHERE  t2.Occurence > 1
                   ) t3 ON t3.MemberID = T.MemberID
                           AND t3.ConMemberID = t.ConMemberID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:07:05.660

我总是使用这个小查询（更改为满足您的表）。

```
Delete MemberConnection
from MemberConnection
join
(select max(MemberConnectionId)as CountIt, MemberId, ConnMemberId
    from #MemberConnection
    group by MemberId, ConnMemberId
    having count(1) > 1
) as derived
on MemberConnection.MemberId = derived.MemberId
and MemberConnection.ConnMemberId = derived.ConnMemberId
and CountIt > MemberConnectionId 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T15:56:25.930

您可以执行以下操作：

```
SELECT * FROM 
(SELECT MemberID,ConnMemberID  ,count( MemberID,ConnMemberID ) as c FROM MemberConnection group by MemberID,ConnMemberID ) x 
WHERE x.c >1 
```

这将显示所有重复的行。

# java - Java：日期格式

> ID：14650034
> 
> 赞同：-1
> 
> 时间：2013-02-01T15:52:21.440
> 
> 标签：java, parsing, date

我正在尝试解析以下字符串

2013-02-01T09:37:20EST

我需要将它与当前日期进行比较，以查看它是在当前日期之前还是之后。

这是我正在做的

```
Date formatTime(String time) throws exception
 {
 String format = "yyyy-MM-dd HH:mm:ss z";
 DateFormat dateFormat = new SimpleDateFormat(format);
 Date expTime = dateFormat.parse(time);
 return expTime;
 } 
```

我收到 java.text.ParseException: Unparseable date: "2013-02-01T09:37:20EST" （偏移量 10）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:55:03.663

注意z`space`之前的并环绕引号 'T'`timezone``T`

```
String format = "yyyy-MM-dd'T'HH:mm:ss z"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:54:53.913

您的输入时间与您的模式`String`不匹配。`DateFormat`你可以使用：

```
String format = "yyyy-MM-dd'T'HH:mm:ssz"; 
```

[简单日期格式](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:55:00.107

格式应该是这样的：`yyyy-MM-dd'T'HH:mm:ssZ`

# python - 如何将字符串评估为 Python 中的对象？

> ID：14650037
> 
> 赞同：0
> 
> 时间：2013-02-01T15:52:32.793
> 
> 标签：python, django, types

我正在创建一个 Django 论坛项目，并且我有一个“设置”应用程序，它可以访问名为设置的表的数据库。

该表设置有`verbose_name`、`name`和`value`列。第一个只是要显示给管理员的名称，第二个是访问设置的名称（并且是表上的主键。）

现在，我有一些设置是布尔值，一些是整数，还有一些是字符串。但是，`value`是数据库中的 TEXT 类型，因此 Django 将其作为字符串返回。现在我有这个实现将布尔值转换为 Python 布尔类型：

```
class SettingsMiddleware:
    def process_request(self, request):
        request.settings = {}
        settings = Setting.objects.all()

        for setting in settings:
            if setting.value == ("True" or "1"):
                setting.value = True
            if setting.value == ("False" or "0"):
                setting.value = False

            request.settings[setting.name] = setting.value

        return None 
```

所以我有两个问题：

1.  有没有更好的方法来解决这个问题？
2.  如何确定字符串是否包含整数？我知道我可以将它转换为一个整数，`int()`如果它是有效的，但我怎么知道它是否有效呢？

显然，关于第二个问题，我将删除当前评估的“或”“1”和“或”“0”位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:54:24.227

在我看来，这[`ast.literal_eval`](http://docs.python.org/2/library/ast.html#ast.literal_eval)可能对你有用。

```
>>> import  ast
>>> ast.literal_eval("1")
1
>>> ast.literal_eval("0")
0
>>> ast.literal_eval("True")
True
>>> ast.literal_eval("False")
False
>>> ast.literal_eval("'foobar'")
'foobar'
>>> ast.literal_eval("1.2")
1.2
>>> ast.literal_eval("1.2e3")
1200.0
>>> ast.literal_eval("1,2")
(1, 2)
>>> ast.literal_eval("[1,2]")
[1, 2]
>>> ast.literal_eval("[1,2,(1,2)]")
[1, 2, (1, 2)]
>>> ast.literal_eval("1f")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/ast.py", line 49, in literal_eval
    node_or_string = parse(node_or_string, mode='eval')
  File "/usr/local/lib/python2.7/ast.py", line 37, in parse
    return compile(source, filename, mode, PyCF_ONLY_AST)
  File "<unknown>", line 1
    1f
     ^
SyntaxError: unexpected EOF while parsing 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:01:29.390

如果您想将其限制为 0,1,True,False，我会这样做

```
boolmapping = {'0':False, 'False': False, '1':True, 'True':True}
...
setting = boolmapping.get(setting, setting) 
```

但是，这可能会错误地将恰好为 1 的整数转换为 True，而实际上是 1，因此您最好将 '1' 映射为`1`，而不是`True`。

要将字符串转换为 int（如果它是一个），请执行

```
try:
    setting = int(setting)
except ValueError:
    pass 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:01:10.440

您可以简单地使用：

```
if setting.value in ["true", "True", 1, "1"]:
    setting.value = True 
```

# plone - 为什么在 Plone 4.2.1 中的 _some_ @@sharing 对话会出现 404（找不到页面）？

> ID：14650046
> 
> 赞同：1
> 
> 时间：2013-02-01T15:53:11.603
> 
> 标签：plone

大家好，感谢阅读。

我有两个（共 8 个）选项卡，无法成功激活“共享”选项卡上的“保存”按钮。如果进入 404 页（找不到页面），而不是更新共享选项卡的视图。如果我只是打开共享对话框并且不更改任何内容，我可以成功按“保存”，但如果我激活任何复选标记（例如“登录用户可以查看”），我会收到上述错误。（我以我（msiegert）和“管理员”的身份尝试过。）

**注意**：现在失去“可以查看”权限的“AG xxx”组成员仍然可以在站点搜索中显示的“AG xxx”选项卡中获得所需的内容，但由于缺少权限而无法打开结果链接- 所以“某处”似乎权限并没有完全丢失......

**背景**：我刚刚将我的 Plone-3.2.1 Data.fs 迁移到 Plone 4.2.1（在 Ubuntu-8 下）并且我使用 Intranet/Extranet-Workflow。升级完成后，我注意到对于我的一些（！）“AG xxx”选项卡，组“AG xxx”的共享条目消失了（以及访问权限）。对于大多数选项卡，我可以手动重新创建“组 'AG xxx' 具有查看和编辑权限”条目。但是对于两个选项卡，这会因上述错误而失败。

我的 httpd it apache2，它重写了所有（剩余的）URL，如下所示：

```
ProxyPassMatch ^/(.*)$ http://bbc.mdc-berlin.de:8080/VirtualHostBase/http/bbc.mdc-berlin.de:80/bioinformatics/VirtualHostRoot/$1 
```

[在http://pastie.org/6011725](http://pastie.org/6011725)可以看到 apache-log 的失败和成功单击“保存”的输出

[我在http://bbc.mdc-berlin.de/P4-sharing-error.html](http://bbc.mdc-berlin.de/P4-sharing-error.html)上发布了一系列屏幕截图，说明了导致此 404 结果的操作

[编辑 1] apache-error 日志中没有条目，apache-access 日志中的条目保持不变，但我从“instance.log”中选择...

```
 2013-02-01T17:08:31 ERROR Zope.SiteErrorLog 1359734911.820.21161067649 http://bbc.mdc-berlin.de/ag-dieterich/@@sharing
Traceback (innermost last):
  Module ZPublisher.Publish, line 126, in publish
  Module ZPublisher.mapply, line 77, in mapply
  Module ZPublisher.Publish, line 46, in call_object
  Module plone.app.workflow.browser.sharing, line 86, in __call__
  Module Products.Archetypes.CatalogMultiplex, line 73, in reindexObjectSecurity
  Module Products.ZCatalog.CatalogBrains, line 74, in _unrestrictedGetObject
  Module OFS.Traversable, line 300, in unrestrictedTraverse
   - __traceback_info__: ([], 'launch')
NotFound: launch 
```

似乎与这个“启动”参数有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:18:57.217

您的目录中至少有一个过时的对象正在破坏您的共享选项卡；请做一个完整的重新索引。

通过您的控制面板（“站点设置”），转到 ZMI，找到`portal_catlog`工具对象，转到“高级”选项卡。在那里，在“目录维护”下单击“更新目录”按钮，然后等待完整的重新索引完成。

# c# - 水晶报表中的数据重叠

> ID：14650051
> 
> 赞同：0
> 
> 时间：2013-02-01T15:53:25.723
> 
> 标签：c#

我今天创建了大约 9 个水晶报表，我发现所有报表都有问题。以下是我的报告设计的链接。我没有使用任何 SP 或 View ，只是使用数据集加载 gridview 数据。现在当我单击前端的打印按钮时..如果记录少于 10 条，它们都显示在第一页但是第二页中的摘要与详细信息重叠，如下所示链接

[http://www.facebook.com/photo.php?fbid=164068347074025&set=a.164065450407648.38272.100004125821604&type=3&theater](http://www.facebook.com/photo.php?fbid=164068347074025&set=a.164065450407648.38272.100004125821604&type=3&theater)

[http://www.facebook.com/photo.php?fbid=164068363740690&set=a.164065450407648.38272.100004125821604&type=3&theater](http://www.facebook.com/photo.php?fbid=164068363740690&set=a.164065450407648.38272.100004125821604&type=3&theater)

请帮我解决以下问题 1) 为什么即使没有记录，页面标题和详细信息布局也会显示在第二页中。2）为什么报告页脚会重叠。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:10:46.430

1) 为什么页面标题和详细信息布局即使在没有记录的情况下也会显示在第二页中。

根据您选择的页面大小，您的数据内容将成为这个东西。第二次机会是在您的设计中，您可能会在页眉、节、页脚之间获得更多水平空间。

2) 为什么报告页脚会重叠？

对于此设置属性（在底部打印）在部分专家中为真（其中部分名称写在任何部分的右键单击）

[http://arsalantamiz.blogspot.in/2008/09/how-to-handle-overlapping-of-large-text.html](http://arsalantamiz.blogspot.in/2008/09/how-to-handle-overlapping-of-large-text.html)

# c# - 在 .NET 中使用哪些类/命名空间进行图像处理？

> ID：14650054
> 
> 赞同：3
> 
> 时间：2013-02-01T15:53:32.357
> 
> 标签：c#, .net, image, image-processing, multidimensional-array

我已经用 Python/Numpy/Scipy 中的一些图像处理算法构建了一个库的原型，现在我想将代码移植到 C# 和 WPF。

我已经意识到，尽管输入文件是图像（照片），但从概念上讲，对我的领域问题很重要的是它们是浮点数的二维数组，以及我执行的操作（灰度转换、模糊、斑点检测、骨架化），甚至持久性，最好在浮点“空间”中执行，而不是在整数空间中（通常意味着字节 - uint8 -）。

所以，我看了一下 .NET 命名空间，有很多“绘图”这个、“成像”那个、“媒体”什么的，我完全糊涂了。

那么，问题来了：对于浮点图像处理，哪个 .NET 类是最明显和最常用的“图像数据容器”。

我知道 AForge，但由于我正在学习 C#，并且我的图像处理需求在这一点上不是很重，我想给原生 .NET 一个机会（但无论如何这可能是一个坏主意，所以请让我知道是不是）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:30:03.437

Based on what you already have, why not looking for the same libraries you used in Python but for C#/.NET? for example, for numeric calculations look at:

Project: [http://numerics.mathdotnet.com/](http://numerics.mathdotnet.com/)

Examples: [https://github.com/mathnet/mathnet-numerics/tree/master/src/Examples](https://github.com/mathnet/mathnet-numerics/tree/master/src/Examples)

And for examples of image processing, maybe looking at the source code of Paint.NET (its latest open sourced version - openpdn Fork of Paint.NET 3.36.7) may give you an idea of what libraries to use for images:

[http://code.google.com/p/openpdn/source/browse/#hg%2Fsrc](http://code.google.com/p/openpdn/source/browse/#hg%2Fsrc)

Both libraries are in C#.

# java - 如何在生产模式下运行 GWT

> ID：14650057
> 
> 赞同：3
> 
> 时间：2013-02-01T15:53:35.833
> 
> 标签：java, eclipse, gwt

我正在尝试按照[https://developers.google.com/web-toolkit/usingeclipse](https://developers.google.com/web-toolkit/usingeclipse)中的说明在生产模式下运行 GWT 项目。所以我的项目`foo`位于`foo`我的桌面文件夹下的一个文件`workspace`夹中。当我`foo`在项目资源管理器中右键单击项目时，单击`Google`- `GWT Compile`，我在调试控制台中看到一些类似`permutations 1, 2..`etc 的消息，之后它说编译完成。

然而，与谷歌页面所说的相反，文件夹中没有生成额外的`HTML`/文件。此外，如果我在 URL 栏中输入，我会收到一个超时错误（即使该页面只包含一个简单的调用）。`Javascript``war``foo/war/foo.html``alert`

谁能告诉我这里发生了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T20:22:37.353

如果编译后运行在 GWT 开发模式

去掉 `gwt.codesvr=127.0.0.1:9997` eclipse给出的url中的参数

编译完代码后，整个 gwt 代码将转换为，`javascript`这样您就可以像正常 `HTML`页面一样使用正确的路径进行访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-30T09:41:27.520

如果您的 GWT 项目是 Maven 项目，并且您正在使用[gwt-maven-plugin](https://www.google.com/url?q=https%3A%2F%2Fgwt-maven-plugin.github.io%2Fgwt-maven-plugin%2F&sa=D&sntz=1&usg=AFQjCNFcLvRKhHXfok69_xHkdi98EFPjGg)，则可以运行[*mvn jetty:run-war*](https://stackoverflow.com/a/7271134/1357094)（例如，将其用作 Eclipse Maven 运行配置的目标）：这将 GWT 编译您的项目进入战争，并在本地主机上运行它，从而运行您的 Prod 模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-14T01:09:42.877

*这可以在生产模式下测试纯 ui 功能。* 如果这就是您需要做的所有事情，那将很有用，特别是如果在生产模式下运行服务器会占用您想要保存的开发机器的有限资源（而用正在运行的服务器占用它们将是一种“浪费”，如果无论如何，您的测试都不需要向该服务器发出请求）。

如果您的 GWT 项目...

1.  尚未向服务器发出任何数据请求（也许您的项目还处于起步阶段），并且...
2.  是一个 Maven 项目

... 你可以...

1.  GWT 编译你的项目
2.  [Maven 包](https://stackoverflow.com/questions/9422142/missing-the-maven-package-menu-entry-in-eclipse/15722549#15722549)（这些说明使用[gwt-Eclipse-maven-plugin](https://www.google.com/url?q=https%3A%2F%2Fgwt-maven-plugin.github.io%2Fgwt-maven-plugin%2F&sa=D&sntz=1&usg=AFQjCNFcLvRKhHXfok69_xHkdi98EFPjGg)）您的项目
3.  在浏览器中打开打包的 GWT 主机页面（即：index.html，或 <Your Module >.html，位于 yourProject/target/yourProject-<snapshot version>/ 下）。利润！

这足以测试项目的 ui-only 功能，因此在生产模式下。实际上，如果您的项目具有向服务器发出数据请求的功能，但您没有测试其中任何一个，那么这仍然可以仅测试那些仅 ui 的功能。基本上，任何请求服务器数据的功能都不会返回这些请求（因为没有服务器运行来执行此操作），但所有其他功能都将起作用，因为它们只是 ui-only。

If you need to test features that make server requests for data, then you'll have to run Production Mode via a server (that would respond to the requests). For example with Jetty server, see my [other Answer](https://stackoverflow.com/a/34526849/1357094) here.

# jquery - jQuery Validate 插件 - 如何通过事件（按下按钮）显示所有错误？

> ID：14650058
> 
> 赞同：0
> 
> 时间：2013-02-01T15:53:44.307
> 
> 标签：jquery, jquery-validate, submit

我想通过按下按钮（不是提交按钮）来显示所有验证错误。

```
somebutton.button().click(function () { //not submit button
     //some code here
     //to show up all validation messages
}); 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T16:02:31.280

> **引用：** *“我想通过按下按钮（不是提交按钮）来显示所有验证错误。”*

请参阅下面的正确解决方案以及工作演示...

**HTML：**

```
<form id="myform">
    <input type="text" name="whatever" />
</form>

<button id="yourbutton">click to show errors</button> 
```

**jQuery：**

[用于`.validate()`](http://docs.jquery.com/Plugins/Validation/validate)初始化*插件*：

```
$('#myform').validate({  // initialize the plugin
    // your options and rules
}); 
```

[然后用于`.valid()`](http://docs.jquery.com/Plugins/Validation/valid)测试*表单*的有效性：

```
$('#yourbutton').click(function () {
    $('#myform').valid(); // run a validity test on the form (shows any errors)
}); 
```

**> > 工作演示：http: [//jsfiddle.net/8FdVm/](http://jsfiddle.net/8FdVm/)**

演示#2（带有提交按钮）：http: [//jsfiddle.net/3uZrt/](http://jsfiddle.net/3uZrt/)

* * *

或者，您也可以使用返回的*布尔值*`.valid()`来执行其他操作：

```
$('#yourbutton').click(function () {
    if ($('#myform').valid()) { // also instantly shows any errors
        // run code if the form tests valid
    } else {
        // run code if the form tests invalid
    }
}); 
```

演示#3（布尔）：http: [//jsfiddle.net/qd5AQ/](http://jsfiddle.net/qd5AQ/)

# android - 由于在错误的线程中启动了 android toast 消息而导致的错误

> ID：14650059
> 
> 赞同：0
> 
> 时间：2013-02-01T15:53:52.840
> 
> 标签：android, toast

嗨，我在显示 toast 消息时遇到了一些问题，实际上程序崩溃说我试图在错误的线程中显示 toast 或类似的东西。

我一直在阅读有关该主题的其他一些问题，我认为灵魂类似于使用处理程序与 UI 进行通信，但不知道该怎么做，谁能与我分享一个关于如何启动的示例/教程来自代码任何部分的祝酒词？

例如我正在尝试这样的事情：[有问题的行在** **之间]

```
public class SamplesTiming extends Activity {
        ...

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_samples_timing);
       ...

    }

        private void setButtonHandlers() {
                ((Button)findViewById(R.id.btnStart)).setOnClickListener(btnClick);
        ((Button)findViewById(R.id.btnStop)).setOnClickListener(btnClick);
        }

        private void enableButton(int id,boolean isEnable){
                ((Button)findViewById(id)).setEnabled(isEnable);
        }

        private void enableButtons(boolean isRecording) {
                enableButton(R.id.btnStart,!isRecording);
                enableButton(R.id.btnStop,isRecording);
        }

        private void startRecording(){

                              ...

                recordingThread = new Thread(new Runnable() {

                        //@Override
                        public void run() {

                                writeAudioDataToFile();
                        }
                },"AudioRecorder Thread");

                recordingThread.start();
        }

        private void writeAudioDataToFile(){

               ...

                while(isRecording){

                             ...

                        read = recorder.read(data, 0, bufferSize);

                        if(condition) **Toast.makeText(getApplicationContext(), 
                           "it happen", Toast.LENGTH_LONG).show();**

                            ...

                        }                       

        }

        private void stopRecording(){
                if(null != recorder){
                        isRecording = false;

                        recorder.stop();
                        recorder.release();

                        recorder = null;
                        recordingThread = null;
                }                  

        }

        private View.OnClickListener btnClick = new View.OnClickListener() {
               // @Override
                public void onClick(View v) {
                        switch(v.getId()){
                                case R.id.btnStart:{

                                    enableButtons(true);
                                        startRecording();

                                        break;
                                }
                                case R.id.btnStop:{

                                        enableButtons(false);
                                        stopRecording();

                                        break;
                                }
                        }
                }
        };
} 
```

非常感谢您的宝贵时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:59:50.643

如果要访问小部件，它必须在主线程中。如果您在活动中，您可以编写以下内容。

```
runOnUiThread(new Runnable(){
    public void run(){
        //toast
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:56:45.057

使用[Activity.runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)将后台线程中的 Toast 显示为：

```
while(isRecording){

......

SamplesTiming.this.runOnUiThread(new Runnable() {
    public void run() {
         // show toast here
         Toast.makeText(SamplesTiming.this, 
            "it happen", Toast.LENGTH_LONG).show();
    }
});
.....

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T16:13:32.253

如果您像我一样并且不喜欢方便的方法，请使用`Handler`：

```
public class MainActivity extends Activity {
    private Handler mHandler;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mHandler = new Handler();

        doSomethingOnAnotherThread();
    }

    private void doSomethingOnAnotherThread() {
        new Thread(new Runnable() {

            @Override
            public void run() {
                mHandler.post(new Runnable() {

                    @Override
                    public void run() {
                        Toast.makeText(MainActivity.this, "toast skagen", Toast.LENGTH_SHORT).show();
                    }
                });
            }
        }).start();
    }
} 
```

# java - "\\\\".replaceAll("\\\\", "\\") 抛出 java.lang.StringIndexOutOfBoundsException

> ID：14650064
> 
> 赞同：7
> 
> 时间：2013-02-01T15:54:10.690
> 
> 标签：java, string, replace, str-replace

Java中的以下代码片段：

```
"\\\\".replaceAll("\\\\", "\\"); 
```

抛出异常：

```
java.lang.StringIndexOutOfBoundsException: String index out of range: 1 (NO_SOURCE_FILE:0) 
```

[replaceAll](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)上的javadoc确实包含使用反斜杠的警告，并建议使用**Matcher.replaceAll**或**Matcher.quoteReplacement**。有人有关于如何用单个反斜杠替换字符串中所有出现的两个反斜杠的片段吗？

### 澄清

上面显示的实际文字只是一个示例，实际字符串可以在不同的地方多次出现两个连续的反斜杠。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-01T15:57:09.410

你可以简单地做到这一点[`String#replace()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)： -

```
"\\\\".replace("\\\\", "\\") 
```

* * *

[`String#replaceAll`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)接受一个`regex`作为参数。因此，您将不得不`backslash`两次逃脱。一次 for`Java`然后 for `Regex`。因此，实际替换使用`replaceAll`如下所示： -

```
"\\\\".replaceAll("\\\\\\\\", "\\\\") 
```

但是你真的不需要`replaceAll`这里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:00:13.730

试试这个：

```
"\\\\".replaceAll("\\{2}", "\\") 
```

第一个参数 to`replaceAll()`是一个正则表达式，`{2}`表示必须匹配两次出现的 char。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:58:42.307

如果你想使用，`Matcher.replaeAll()`那么你想要这样的东西：

```
Pattern.compile("\\\\\\\\").matcher(input).replaceAll("\\\\"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T16:07:21.723

如果替换字符串中有反斜杠，它将被视为转义字符，该方法将尝试读取下一个字符。这就是为什么，它会抛出 StringIndexOutOfBoundsException。

# java - 无法找出为什么我的 java 代码不起作用

> ID：14650065
> 
> 赞同：0
> 
> 时间：2013-02-01T15:54:11.293
> 
> 标签：java, menu, switch-statement

我正在尝试用java制作一个油漆分配器模拟原型控制台应用程序。到处搜索，似乎无法找出为什么这段代码不起作用。我使用网豆。我试图用这段代码做的是显示菜单，要求用户输入，当用户输入一个数字时，它会从菜单中选择该选项，然后我需要在菜单工作后开始让这些选项工作。感谢任何帮助。到目前为止，我的代码如下所示。

```
 package paintdispensersimulation;

    import java.util.Scanner;
    /**
    *
    * @author Kris Newton (M2124910)
    */
    public class PaintDispenserSimulation   //
    {                                       //Open Public Class 
    public static void main(String[] args)  //
    {                                       //Start Main
        Scanner in = new Scanner (System.in);   //
        int option;                             //
        boolean quit = false;                   //Declare variables                                  
        do  //
        {   //Start Do
            System.out.println("Please Make a selection:");                     //
            System.out.println("[1] Process New Job(Decimal Values)");          //
            System.out.println("[2] Process New Job(RGB Hexadecimal Values)");  //
            System.out.println("[3] Calibrate Dispenser");                      //
            System.out.println("[4] Display Summary Of Jobs");                  //
            System.out.println("[0] Exit");                                     //Print Menu
            option = in.nextInt();  //Declare User Input
            switch (option)         //Declare Switch
            {                       //Start Switch            
                case 1:                                                                     //If Option = 1
                    System.out.println("You Chose To: Process New Job(Decimal Values)");    //Print            
                    break;                                                                  //Break
                case 2:                                                                             //If Option = 2
                    System.out.println("You Chose To: Process New Job(RGB Hexadecimal Values)");    //Print  
                    break;                                                                          //Break                                                                          
                case 3:                                                                     //If Option = 3
                    System.out.println("You Chose To: Calibrate Dispenser");                //Print 
                    break;                                                                  //Break
                case 4:                                                                             //If Option = 4
                    System.out.println("You Chose To: Display Summary Of Jobs");                    //Print
                    break;                                                                          //Break
                case 0:                                                                     //If Option = 0
                    quit = true;                                                            //Quit                                                            
                    break;                                                                  //Break
                default:                                                                            //If Option Invalid
                    System.out.println("Selection Invalid: Please enter a valid selection.");       //Print           
            }   //End Switch           
        }   //End Do 
        while (!quit);                              //While Quit = True
        System.out.println("You Chose To: Exit");   //Print
    }   //End Main    
}   //End Public Class 
```

这是我尝试运行时收到的消息。

```
run:
java.lang.VerifyError: Constructor must call super() or this() before return in method paintdispensersimulation.PaintDispenserSimulation.<init>()V at offset 0
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2442)
    at java.lang.Class.getMethod0(Class.java:2685)
    at java.lang.Class.getMethod(Class.java:1620)
    at sun.launcher.LauncherHelper.getMainMethod(LauncherHelper.java:494)
    at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:486)
Exception in thread "main" Java Result: 1
BUILD SUCCESSFUL (total time: 1 second) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:06:21.417

我能够在 Eclipse 中运行此代码。

VerifyError 可能意味着字节码无效。

基本上，这是一个编译器错误，或者如果类文件已损坏

尝试在不同的机器上使用不同的 JDK 版本进行编译。

# hadoop - 维基百科页面使用 Hadoop 共同编辑图形提取

> ID：14650069
> 
> 赞同：2
> 
> 时间：2013-02-01T15:54:25.117
> 
> 标签：hadoop, mapreduce, wikipedia

我正在尝试使用 hadoop 构建维基百科共同编辑页面的图表。原始数据包含编辑列表，即每次编辑有一行告诉谁编辑了什么：

```
# revisionId pageId userId
1 1 10
2 1 11
3 2 10
4 3 10
5 4 11 
```

我想提取一个图表，其中每个节点都是一个页面，如果至少有一个编辑器编辑了两个页面（同一个编辑器），那么两个页面之间就有一个链接。对于上面的示例，输出将是：

```
# edges: pageId1,pageId2
1,2
1,3
1,4
2,3 
```

我远不是 Map/Reduce 方面的专家，但我认为这必须通过两个工作来完成：

1.  第一个作业为每个用户提取已编辑页面的列表。

    ```
    # userId pageId1,pageId2,...
    10 1,2,3
    11 1,4 
    ```

2.  第二个作业采用上面的输出，并简单地生成每个用户编辑的所有页面对（因此这些页面已由同一用户编辑，因此将在图表中链接）。作为奖励，我们实际上可以计算每个页面有多少用户共同编辑，以获得每个边缘的权重。

    ```
    # pageId1,pageID2 weight
    1,2 1
    1,3 1
    1,4 1
    2,3 1 
    ```

我使用 Hadoop 实现了这个，它可以工作。问题是第二个工作的map阶段真的很慢（其实前30%还可以，但是后面就慢了很多）。我想出的原因是因为一些用户编辑了很多页面，映射器必须生成很多这些对作为输出。因此，Hadoop 必须溢出到磁盘，从而使整个事情变得非常缓慢。

因此，我的问题如下：

1.  对于那些在 Hadoop 方面比我有更多经验的人：我做错了吗？有没有更简单的方法来提取这个图？
2.  磁盘溢出会是第二个作业的映射阶段非常慢的原因吗？我怎样才能避免这种情况？

作为一个侧节点，这在编辑的小样本中运行良好。它只会随着 GB 的数据而变慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:09:31.227

显然，这是一个被称为组合/互相关/共现的常见问题，有两种模式可以使用 Map/Reduce、Pairs 或 Stripes 来解决它：

*   [Map Reduce 设计模式：- Pairs & Stripes](http://chandramanitiwary.wordpress.com/2012/08/19/map-reduce-design-patterns-pairs-stripes/)
*   [MapReduce 模式、算法和用例](http://highlyscalable.wordpress.com/2012/02/01/mapreduce-patterns/)（互相关部分）
*   [双和条纹](http://mycloudresearch.wordpress.com/2012/03/13/pairs-and-stripes/)

我在我的问题中提出的方法是配对方法，它通常会产生更多的数据。条纹方法从组合器中受益更多，并且在我的情况下给出了更好的结果。

# unix - 如何从任何位置执行 bash 脚本？

> ID：14650070
> 
> 赞同：5
> 
> 时间：2013-02-01T15:54:27.177
> 
> 标签：unix

在 UNIX 中，我读到将 shell 脚本移动到 /usr/local/bin 将允许您通过简单地键入“[scriptname].sh”并按 Enter 键从任何位置执行脚本。

我已经移动了一个具有普通用户和 root 权限的脚本，但我无法运行它。

剧本：

```
#! bin/bash

echo "The current date and time is:"
date

echo "The total system uptime is"
uptime

echo "The users currently logged in are:"
who

echo "The current user is:"
who -m

exit 0 
```

这就是我尝试移动然后运行脚本时发生的情况：

```
[myusername@VDDK13C-6DDE885 ~]$ sudo mv sysinfo.sh /usr/local/bin

[myusername@VDDK13C-6DDE885 ~]$ sysinfo.sh

bash: sysinfo.sh: command not found 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T16:03:07.013

如果你想从*任何地方*运行脚本，你需要将它添加到你的`PATH`. 通常`/usr/local/bin`在每个用户的路径中，因此它应该可以工作。因此，在您的终端上检查您的系统`/usr/local/bin`中是否正在执行您的操作：`PATH`

```
echo $PATH 
```

您应该会看到许多列出的路径（例如`/bin`等`/sbin`...）。如果它没有列出，你可以添加它。一个更好的解决方案是将所有脚本保存在一个目录中，例如在您的目录中`home`并将其添加到您的路径中。

要在路径中添加目录，您可以修改`shell`初始化脚本并添加新目录，例如，如果您使用的是`BASH`shell，您可以编辑`.bashrc`并添加以下行：

```
PATH=$PATH:/the_directory_you_want_to_add/:/another_directory/ 
```

这会将*新目录*附加 到您现有的`PATH`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:57:44.127

您必须将其移动到路径中的某个位置。试试这个：

```
echo $PATH 
```

我敢打赌 /usr/local/bin 没有列出。

我通过在我的 $HOME （即`mkdir ~/bin`）中创建一个 bin 目录并将其添加到我的 ~/.bashrc 文件中来处理此问题（如果您还没有文件，请创建该文件）：

```
export PATH=~/bin:$PATH 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-03T18:54:10.090

提到这似乎很愚蠢，但是您确定它是可执行的吗？你chmod +x script.sh吗？shell 脚本的顶部是否有正确的 shell 路径（即 #!/bin/bash）？另外，您使用的是 UNIX、LINUX 还是 FreeBSD？（最后一个问题很重要）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-10-16T04:18:08.747

要从任何目录运行可执行文件：

1）在您的主目录下创建一个 bin 目录，并将您的可执行脚本 mv 放入其中。

```
[root@ip9-114-192-179 ~]# cd /home
[root@ip9-114-192-179 home]# mkdir bin
[root@ip9-114-192-179 home]#ls
bin  cloud-init-0.7.4-10.el7.noarch.rpm  cloud-user  epel-release-7-11.noarch.rpm 
```

2）将您的可执行脚本移动到 bin 目录中。

```
mv preeti.sh /home/bin 
```

3）现在将其添加到您的路径变量中。并获取它。

```
[root@ip9-114-192-179 ~]# echo 'export PATH="$PATH:/home/bin"' >> /etc/profile
[root@ip9-114-192-179 ~]# source /etc/profile
[root@ip9-114-192-179 ~]# echo $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin:/home/bin 
```

4）检查该路径是否添加到路径变量中。

```
[root@ip9-114-192-179 ~]# echo $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin:/home/bin 
```

5）验证脚本是否从任何随机目录运行。

# functional-programming - 类型不匹配错误

> ID：14650081
> 
> 赞同：0
> 
> 时间：2013-02-01T15:55:01.900
> 
> 标签：functional-programming, pattern-matching, sml, ml

我在 SML 上写这个函数。它应该获取可能的名字变化列表（我的名字是 Victoria，所以 V、Vic、Vicky 等）并创建 {altname1、middle、last}、{alt2、middle、last} 的记录。

所以这是我的代码：

```
fun similar_names (substits:, name) = 
    let 
    val {first=n1, second=n2, third=n3} = name
    fun name_constructor (altnames:string list, acc) =
        case altnames of 
        [] => acc
         |  a::aa  => {first=a, second=n2, third=n3}::acc
    in 
    name_constructor( get_substitutions2(substits, n1),name)

    end 
```

get_substitutions2 只会给出一个名字的所有可能变体的列表（即：字符串列表），它可以工作。

我得到的错误是：

```
a02.sml:65.2-65.58 Error: operator and operand don't agree [tycon mismatch]
  operator domain: string list * {first:string, second:'Z, third:'Y} list
  operand:         string list * {first:string, second:'Z, third:'Y}
  in expression:
    name_constructor (get_substitutions2 (substits,n1),name) 
```

我不明白为什么它会单独在记录列表和记录之间进行。你能帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T16:05:41.833

`name`只是一个记录，但`name_constructor`预计`acc`是一个列表（因为你说`::acc`）。
尝试

```
name_constructor(get_substitutions2(substits, n1), [name]) 
```

# c++ - qt / creator: dyld: 库未加载

> ID：14650087
> 
> 赞同：0
> 
> 时间：2013-02-01T15:55:08.733
> 
> 标签：c++, macos, qt, dyld

> **可能重复：**
> [在 MAC 上部署 Qt 应用程序](https://stackoverflow.com/questions/7411677/deploy-qt-application-on-mac)

我已经通过 qt creator 编译了我的应用程序的发布版本，它在我的 macbook pro (10.8) 上运行得很好。但是，尝试在我的工作计算机（也是 10.8）上运行相同的应用程序会导致以下运行时错误：

```
dyld: Library not loaded: /Users/Me/Qt5.0.0/5.0.0/clang_64/lib/QtWidgets.framework/Versions/5/QtWidgets
  Referenced from: /Volumes/Dropbox/Me/Project/Project.app/Contents/MacOS/Project
  Reason: image not found
Trace/BPT trap: 5
logout 
```

根据我的阅读，听起来我可能需要将整个 Qt 框架包含到我的包中？有没有办法在 .pro 中指定这种行为，或者我需要包含一些命令行编译标志？

# java - 有没有办法通过 Java 发送 ARP 请求？

> ID：14650089
> 
> 赞同：8
> 
> 时间：2013-02-01T15:55:14.757
> 
> 标签：java, arp

有没有办法在 Java 应用程序中发送 ARP 请求？我知道 ARP 位于 TCP 和 UDP 之下，因此默认情况下 Java 无法发送 ARP 请求。我只是想知道是否有任何第三方 Java 库可以让您发送 ARP 请求。

要捕获 ARP 回复，我知道我可以使用 jpcap 来解决这部分问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:08:12.640

java 应用程序总是可以执行一些外部命令，调用另一个工具来执行它。不过，我不确定您所说的“标准 java”是什么意思。

基于谷歌搜索，Java中的[kraken](https://github.com/nchovy/kraken/blob/master/pcap/kraken-pcap/src/main/java/org/krakenapps/pcap/util/Arping.java) [pcap](https://github.com/nchovy/kraken/tree/master/pcap)中似乎存在arping 。见[海妖](http://krakenapps.org/wiki/AboutKraken)。

还有用于此目的的[jpcap 。](http://jpcap.sourceforge.net/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-18T00:06:51.470

正如您所说，Java 标准库没有提供足够低级别的网络 API 来发送 ARP 请求。

为 libpcap / winpcap 提供 Java 绑定，因此`pcap4j`可用于发送 ARP 请求。图书馆的信息可以在他们的[主页](https://www.pcap4j.org/)上找到。有关如何发送 ARP 请求的信息，请参阅[此示例。](https://github.com/kaitoy/pcap4j/blob/v1/pcap4j-sample/src/main/java/org/pcap4j/sample/SendArpRequest.java)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-01T20:00:01.947

不，不是在本机 Java 中（我猜这是出于安全考虑）。虽然它确实需要使用 C++/C 本机代码库和 JNI 编程，但可以做到这一点。[https://forums.oracle.com/forums/thread.jspa?threadID=1690617](https://forums.oracle.com/forums/thread.jspa?threadID=1690617)

# sql-server - 如何为 2 个可为空的列添加唯一约束？

> ID：14650090
> 
> 赞同：2
> 
> 时间：2013-02-01T15:55:12.077
> 
> 标签：sql-server, sql-server-2008

谁知道如何为两列中允许 NULLS 的 2 列集创建唯一约束？我的意思是忽略 col1=NULL 和 col2=NULL 的唯一性，但是让约束在其中只有一个为 NULL 的情况下起作用？我发现如何为单列执行此操作（[如何创建一个也允许空值的唯一约束？](https://stackoverflow.com/questions/767657/how-do-i-create-unique-constraint-that-also-allows-nulls-in-sql-server)），但不能为 2 列。这是我的脚本，适用于现有记录（允许多个 NULL，NULL），但不允许添加任何新的 NULL，NULL 记录：

```
CREATE UNIQUE NONCLUSTERED INDEX MyIndex ON dbo.MyTable(col1, col2)     
WHERE col1 IS NOT NULL AND col2 IS NOT NULL 
```

更新：好吧，它可以让你添加新的 (NULL, NULL) 值，所以我错了，但是它也可以让你添加我不希望的 (1, NULL), (1, NULL) 之类的东西，所以唯一性应该在这种情况下工作，应该只允许多个 (NULL, NULL)。这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:06:42.203

其他的东西肯定是行不通的。您的代码/脚本按预期工作：

```
CREATE TABLE #MyTable
(
    Col1 INT NULL,
    Col2 INT NULL
)

CREATE UNIQUE NONCLUSTERED INDEX MyIndex ON #MyTable(col1, col2)     
WHERE col1 IS NOT NULL AND col2 IS NOT NULL

INSERT INTO #MyTable(Col1, Col2)
VALUES(NULL, NULL) --Works

INSERT INTO #MyTable(Col1, Col2)
VALUES(NULL, NULL) --Works

SELECT * FROM #MyTable

INSERT INTO #MyTable(Col1, Col2)
VALUES(1, 1) --Works

INSERT INTO #MyTable(Col1, Col2)
VALUES(1, 1) --Fails

SELECT * FROM #MyTable

DROP TABLE #MyTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:13:16.067

如果您希望值是唯一的，除非两者都为空，这意味着您希望它们是唯一的，只要至少一个值不为空。您对索引的过滤器有一个`AND`，但您需要一个`OR`.

```
CREATE UNIQUE NONCLUSTERED INDEX MyIndex ON dbo.MyTable(col1, col2)     
WHERE col1 IS NOT NULL OR col2 IS NOT NULL -- (note: doesn't work) 
```

但是……你不能这样做。SQL Server[只允许您创建带有 AND 条件的 where 子句](http://technet.microsoft.com/en-us/library/ms188783%28v=sql.105%29.aspx)。您也[不能使用持久计算列](http://connect.microsoft.com/SQLServer/feedback/details/518328/should-be-possible-to-create-a-filtered-index-on-a-deterministic-persisted-computed-column)来执行此操作。

相反，您*可以*做的是在原始表上创建一个索引视图，然后将唯一索引放在该表*上*。它有点重量级，但它应该可以工作。

所以......借用@Meff的脚本，你正在看类似的东西：

```
CREATE TABLE dbo.MyTable
(
    Col1 INT NULL,
    Col2 INT NULL
)
GO
CREATE VIEW dbo.MyTableUniqueView WITH SCHEMABINDING AS
SELECT Col1, Col2 FROM dbo.MyTable
WHERE Col1 IS NOT NULL OR Col2 IS NOT NULL 
GO
CREATE UNIQUE CLUSTERED INDEX MyTableUniqueIndex
ON dbo.MyTableUniqueView(Col1, Col2)
GO
INSERT INTO MyTable(Col1, Col2)
VALUES(NULL, NULL) --Works

INSERT INTO MyTable(Col1, Col2)
VALUES(NULL, NULL) --Works

SELECT * FROM MyTable

INSERT INTO MyTable(Col1, Col2)
VALUES(1, 1) --Works

INSERT INTO MyTable(Col1, Col2)
VALUES(1, 1) --Fails

INSERT INTO MyTable(Col1, Col2)
VALUES(1, null) --Works

INSERT INTO MyTable(Col1, Col2)
VALUES(1, null) --Fails

SELECT * FROM MyTable
GO
DROP VIEW MyTableUniqueView
DROP TABLE MyTable 
```

# java - 无法使用结果填充 SummaryTable

> ID：14650096
> 
> 赞同：0
> 
> 时间：2013-02-01T15:55:24.673
> 
> 标签：java, swing, user-interface, jtable, tablemodel

```
 private void myProfileTabStateChanged(javax.swing.event.ChangeEvent evt) {                                          
    if (myProfileTab.getSelectedComponent() == EditProfile) {
        editProfile();
    } else if (SearchAcademic == myProfileTab.getSelectedComponent()) {
        AcademicDAO aDao = new AcademicDAO();
        try {
            List<AcademicDTO> listAll = aDao.listAll(AcademicDTO.class);
            searchTable.setData(listAll);
        } catch (DBException ex) {
            Logger.getLogger(MainMenu.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
}  

public class ListDataUI<T extends BaseDTO> extends javax.swing.JPanel {

    public ListDataUI() {
        this.summaryColumnsAndTheirViewNames = Collections.emptyMap();
        this.dtoSummaryFields = Collections.emptyList();
        this.summaryTableModel = new SummaryTableModel();
        initComponents();
        this.summaryTable.setModel(summaryTableModel);
        initListeners();
    }

    /**
     * Creates new form ListDataUI
     */
    public ListDataUI(LinkedHashMap<String, String> summaryColumnsAndTheirViewNames) {
        this.summaryColumnsAndTheirViewNames = summaryColumnsAndTheirViewNames;
        this.dtoSummaryFields = new ArrayList<String>(summaryColumnsAndTheirViewNames.keySet());
        this.summaryTableModel = new SummaryTableModel();
        initComponents();
        this.summaryTable.setModel(summaryTableModel);
        initListeners();
    }

    public ListDataUI(List<String> dtoSummaryFields) {
        this.summaryColumnsAndTheirViewNames = Collections.emptyMap();
        this.dtoSummaryFields = new ArrayList<String>(dtoSummaryFields);
        this.summaryTableModel = new SummaryTableModel();
        initComponents();
        this.summaryTable.setModel(summaryTableModel);
        initListeners();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        tableSp = new javax.swing.JScrollPane();
        summaryTable = new javax.swing.JTable();

        setLayout(new java.awt.BorderLayout());

        summaryTable.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        tableSp.setViewportView(summaryTable);

        add(tableSp, java.awt.BorderLayout.CENTER);
    }// </editor-fold>                        
    // Variables declaration - do not modify                     
    private javax.swing.JTable summaryTable;
    private javax.swing.JScrollPane tableSp;
    // End of variables declaration                   
    private List<T> data;
    private Map<String, String> summaryColumnsAndTheirViewNames;
    private List<String> dtoSummaryFields;
    private SummaryTableModel summaryTableModel;

    public List<T> getData() {
        return data;
    }

    public void removeSelectedDataRow() {
        final int selectedRow = summaryTable.getSelectedRow();
        if (selectedRow != -1) {
            final int modelIndex = summaryTable.convertRowIndexToModel(selectedRow);
            data.remove(modelIndex);
            summaryTableModel.fireTableRowsDeleted(modelIndex, modelIndex);
        }
    }

    public void setData(List<T> data) {
        this.data = data;
        summaryTableModel.fireTableDataChanged();
        if (data.size() > 0) {
            summaryTable.getSelectionModel().setSelectionInterval(0, 0);
        }
    } 
```

我试图在表中显示来自数据库的行数据`searchTable`，我调用该`setData()`方法。我在“searchTable.setData(listAll);”行设置了一个断点，listAll 包含数据库中的所有数据，但没有显示在 searchTable 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:10:31.093

问题不在于连接到数据的 JTable 模型。所以你的 JTable 和它的 TableModel 完全不知道`List<T> data`。

所以基本上你需要一个`TableModel`接收你的列表然后触发一个适当的`TableModelEvent`. `TableModel`应该实现很少的基本方法来指示如何访问数据以及要显示哪些数据。

在下面找到这种实现的一个非常基本的示例（这里它基于 a`List`来 `Person`显示名字和姓氏）。将其适应您的情况应该非常简单：

```
import java.util.ArrayList;
import java.util.List;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.event.TableModelEvent;
import javax.swing.table.AbstractTableModel;

public class TestListTableModel {

    class MyTableModel extends AbstractTableModel {

        private List<Person> baseModel;

        public MyTableModel() {
            baseModel = new ArrayList<TestListTableModel.Person>();
        }

        public MyTableModel(List<Person> baseModel) {
            super();
            this.baseModel = new ArrayList<Person>(baseModel);
        }

        @Override
        public int getRowCount() {
            return baseModel.size();
        }

        @Override
        public String getColumnName(int column) {
            switch (column) {
            case 0:
                return "First Name";
            case 1:
                return "Last Name";
            }
            return null;
        }

        @Override
        public int getColumnCount() {
            return 2;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            switch (columnIndex) {
            case 0:
                return getPersonAtIndex(rowIndex).getFirstName();
            case 1:
                return getPersonAtIndex(rowIndex).getLastName();
            }
            return null;
        }

        public Person getPersonAtIndex(int rowIndex) {
            return baseModel.get(rowIndex);
        }

        public int getIndexOfPerson(Person person) {
            return baseModel.indexOf(person);
        }

        public void addPerson(Person person) {
            baseModel.add(person);
            fireTableRowsInserted(baseModel.size() - 1, baseModel.size() - 1);
        }

        public void removePerson(Person person) {
            int removed = baseModel.indexOf(person);
            if (removed > -1) {
                baseModel.remove(removed);
                fireTableRowsDeleted(removed, removed);
            }
        }

        public void setBaseModel(List<Person> baseModel) {
            this.baseModel = baseModel;
            fireTableChanged(new TableModelEvent(this));
        }

    }

    protected void initUI() {
        List<Person> personModel = new ArrayList<TestListTableModel.Person>();
        personModel.add(new Person("John", "Smith"));
        personModel.add(new Person("Peter", "Donoghan"));
        personModel.add(new Person("Amy", "Peterson"));
        personModel.add(new Person("David", "Anderson"));
        JFrame frame = new JFrame(TestListTableModel.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        MyTableModel tableModel = new MyTableModel();
        JTable table = new JTable(tableModel);
        frame.add(new JScrollPane(table));
        frame.pack();
        frame.setVisible(true);
        tableModel.setBaseModel(personModel);
    }

    public class Person {
        private final String firstName;
        private final String lastName;

        public Person(String firstName, String lastName) {
            this.firstName = firstName;
            this.lastName = lastName;
        }

        public String getFirstName() {
            return firstName;
        }

        public String getLastName() {
            return lastName;
        }
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestListTableModel().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:59:29.080

首先，您应该[为](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)您的`JTable`. 数据的任何更新都应该在表模型上完成。

将数据设置为`TableModel`. 如果每一行都是一个`Object`然后将对象添加到 TableModel 列表中。

然后使用`setModel`方法将模型设置为您的表。前任：`table.setModel(customModel);`

**PS：**首选[DefaultTableModel](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html)，其中所有必需的方法都已实现，而不是[AbstractTableModel](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/AbstractTableModel.html)。

# c# - Type.GetFields 返回空数组

> ID：14650097
> 
> 赞同：0
> 
> 时间：2013-02-01T15:55:24.817
> 
> 标签：c#, asp.net, reflection

我正在尝试动态获取公共字段，但它一直返回一个空列表。我成功加载了一个用户控件，但它是 UserControl 类型，这意味着我使用 .BaseType 来获取真实类型。但是当我调用 .GetFields() 它返回一个空的 FieldInfo 数组。

```
usercontrolPath = "/usercontrols/HelloWorldTestUC.ascx"
Page pageHolder = new Page();
UserControl usercontrol = (UserControl)pageHolder.LoadControl("~/" + usercontrolPath);
Type type = usercontrol.GetType().BaseType;

FieldInfo[] infos = type.GetFields(BindingFlags.Public);

//i will do something here
control.Controls.Add(usercontrol); 
```

这是用户控制代码：

```
public partial class HelloWorldTestUC : System.Web.UI.UserControl
{
    public int Number = 0;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            txtMessage.Text = Message.ToString();
        }
    }
} 
```

知道为什么它会返回一个空数组吗？它至少应该返回“数字”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T15:58:18.087

您的 BindingFlags 不完整。您可能想要`BindingFlags.Public | BindingFlags.Instance`公开的实例字段。

# c# - Observable.From 用于未来事件而不是主题

> ID：14650100
> 
> 赞同：-1
> 
> 时间：2013-02-01T15:55:33.447
> 
> 标签：c#, system.reactive

我如何在不使用主题的情况下在 RX 中实现这种情况。我读了很多，但我似乎无法弄清楚

```
 public class Member 
{
    public int Id { get; private set; }
    public string Email { get; private set; }

    public Member(string email)
    {
        this.Email = email;
    }
}

public class MemberRepository
{
    public void AddMember(Member member)
    {
        // save member
        memberAdded.OnNext(member);
    }

    private Subject<Member> memberAdded = new Subject<Member>();
    public IObservable<Member> MemberAdded { get { return memberAdded.AsObservable(); } }
}

public class MemberController
{
    public void Create(Member item)
    {
        var repository = new MemberRepository();
        var subs = repository.MemberAdded.Subscribe(x => SendMail(x));
        repository.AddMember(item);
    }

    private void SendMail(Member value)
    {
        // send welcome mail
    }
} 
```

我不知道如何初始化 IObservable MemberAdded，因为如果它没有 Subject 支持者，它始终为 null，我也不知道如何稍后从稍后的函数调用 OnNext。

最后，将可观察对象作为静态属性和所有订阅代码放在一个地方是否有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:22:25.893

我实现类似的方法是`MemberAdded`在我的`MemberRepository`. 然后，您可以使用`Observable.FromEvent`or `Observable.FromEventPattern`（区别在[这里](https://stackoverflow.com/questions/6463459/when-to-use-observable-fromeventpattern-rather-than-observable-fromevent)）订阅事件，如下所示：

```
public class MemberRepository
{
    public void AddMember(Member member)
    {
        // save member
        if (MemberAdded != null)
            MemberAdded(new MemberEventArgs(member, MemberEvent.Add));
    }

    public event EventHandler<MemberEventArgs> MemberAdded;
}

...

Observable.FromEventPattern<MemberEventArgs>(h => memberRepository.MemberAdded += h,
                                             h => memberRepository.MemberAdded -= h)
    .Select(e => e.Member)
    .Subscribe(m => Console.WriteLine("Member "+m+" added!)); 
```

In regard to your second question, you should avoid static properties - consider using something like the [Event Aggregator](https://stackoverflow.com/a/9756787/1860652) pattern instead

# php - Codeigniter 链接，修改它们

> ID：14650103
> 
> 赞同：0
> 
> 时间：2013-02-01T15:55:50.183
> 
> 标签：php, codeigniter

我有一个带有以下`check()`功能的 codeigniter 控制器来检查用户名和密码。

```
http://localhost/prakash/modules/index.php/login/login/login/login/login/login/check 
```

每次我提交表单（从视图）时，都会生成上面的链接。我该如何克服它。我本可以`redirect('login')`在控制器中使用而不是`$this->load->view('login/login_form');`这样，但它不会在表单中显示验证错误。

**我的控制器是**

```
function check(){

        $this->form_validation->set_rules('username', 'Username', 'required');
        if($this->form_validation->run()==FALSE){
            $this->load->view('login/login_form');
        }else{
            $this->load->model('loginModel');
            $query = $this->loginModel->validate();
            if($query){
                $data = array('username' => $this->input->post('username'),
                               'is_logged_in' => true
                            );
                $this->session->set_userdata($data);
                //redirecting to appropriate page 
                redirect('success');
            }else{
                $this->session->set_flashdata('loginCheck','Username/Password Comination Incorrect!');
                redirect('login');
            }
        }

    } 
```

**我的看法是**

```
<section class="main">
<form class="form-1" action="login/check" method="post">
    <?php echo "<p class=\"text-error\">{$this->session->flashdata('loginCheck')}</p>"; ?>
    <?php echo validation_errors(); ?>
    <p class="field">
        <input type="text" name="username" placeholder="Username or email">
        <i class="icon-user icon-large"></i>
    </p>
        <p class="field">
            <input type="password" name="password" placeholder="Password">
            <i class="icon-lock icon-large"></i>
    </p>
    <p class="submit">
        <button type="submit" name="submit"><i class="icon-arrow-right icon-large"></i></button>
    </p>
</form>
</section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:58:02.133

问题出在表单标签的 action 属性上

改变

```
<form class="form-1" action="login/check" method="post"> 
```

到

```
<form class="form-1" action="/login/check" method="post"> 
```

或者更好（如果您使用的是 url 助手）

```
<form class="form-1" action="<?php echo base_url() ?>login/check" method="post"> 
```

**为什么会这样？**

您使用的是相对于`path`当前 url 的值。

[HTML 表单动作属性](http://www.w3schools.com/tags/att_form_action.asp)

**示例 1**

*   页
    *   `[http://www.example.com/](http://www.example.com/)`
*   形式
    *   `<form class="form-1" action="login/check" method="post">`
*   将发布到
    *   `[http://www.example.com/login/check](http://www.example.com/login/check)`

**示例 2**

*   页
    *   `[http://www.example.com/login/](http://www.example.com/login/)`
*   形式
    *   `<form class="form-1" action="login/check" method="post">`
*   将发布到
    *   `[http://www.example.com/login/login/check](http://www.example.com/login/login/check)`

**示例 3**

*   页
    *   `[http://www.example.com/login](http://www.example.com/login)`
*   形式
    *   `<form class="form-1" action="/" method="post">`
*   将发布到
    *   `[http://www.example.com/](http://www.example.com/)`

# c++ - 跟进：通过 ZeroMQ pull socket 传递的 Boost 序列化自定义 C++ 对象

> ID：14650104
> 
> 赞同：5
> 
> 时间：2013-02-01T15:55:54.403
> 
> 标签：c++, boost, zeromq, boost-serialization

这是我之前在 Boost 的另一个线程中打开的后续问题[：反序列化通过 ZeroMQ pull socket 传递的自定义 C++ 对象](https://stackoverflow.com/questions/14565538/boost-de-serializing-a-custom-c-object-passed-over-zeromq-pull-socket)。该线程中的问题已根据提供的答案解决。现在我在运行时遇到了另一个问题。请看下面的描述。我真的是 C++ 领域的新手，所以如果你告诉我除了我在问题陈述中描述的内容之外，还有什么需要改进提供的代码的任何部分，我将不胜感激。

**描述：**

我有一个名为**GenericMessage**的 C++ 类，它只包含一个 id 和数据作为其成员（参见下面的代码片段 2 - GenericMessage.hxx）。我的意图是序列化这个类的一个实例，并通过实现推送模式的 ZeroMQ 套接字发送它。

序列化和发送任务已在**ZMQHandler 类（参见 sendToBE 函数）中实现，该类放置在如下****代码片段 3**所示的头文件名 ZMQHandler.hxx 中。此类由下面第四个**代码片段**中所示的**TestFE.cxx**实例化。

 **GenericMessage 实例的接收和反序列化在**TestBE.cxx**中实现， 可在下面的**第 5 个代码片段**中找到。我的意图是通过 ZMQ 套接字（即拉套接字）接收 GenericMessage 实例，对其进行反序列化，然后将其成员打印到标准输出。

我验证了通过 ZeroMQ 套接字传输的序列化和 GenericMessage 对象工作正常。反序列化似乎也有效，因为我没有得到任何异常或分段错误之类的东西。

**问题陈述：**

TestBE.cxx 中的代码（参见代码片段 5）的预期是通过 ZeroMQ 套接字接收 GenericMessage 对象，将其反序列化，然后打印其两个成员，即 id 和 data，在这种情况下是字符串对象。更准确地说，它应该首先打印它获得的字符流的内容，然后是反序列化对象的成员。相反，它根本不打印这些成员。Al，它将包括问号在内的奇怪符号放入接收到的字符流中。请看下面的第一个代码片段，你会明白我的意思。

**问题：**

**i)**为什么我不能得到预期的输出？为什么我在输出中看到标有奇怪符号的问题？为什么我看不到打印的 id 和 data 字段，尽管它们在打印的字符流中可见？

**ii)** GenericMessage 类中的数据字段是一个模板类型，它被设置为 std::string 用于测试目的。但是，在实际使用中，我计划以序列化的形式传输一个更复杂的对象。在这方面，您认为使用类 boost::archive::text_iarchive 和 boost::archive::text_oarchive 有用吗？我应该改用二进制吗？如果是这样，您认为我应该注意一些陷阱/可能的问题吗？提前致谢。

**片段 1：程序输出与预期输出**

```
 *******************
  The EXPECTED OUTPUT
  *******************
  Connecting to FE...
  CHAR [22 serialization::archive 9 0 1 0
  0 1 12 Hello there!]
  ID: 1
  Data: Hello there!

  CHAR [22 serialization::archive 9 0 1 0
  0 2 12 Hello there!]
  ID: 2
  Data: Hello there!

  CHAR [22 serialization::archive 9 0 1 0
  0 3 12 Hello there!]
  ID: 3
  Data: Hello there!

  ......

  *************************
  PRINTED OUTPUT IN REALITY
  *************************
  Connecting to FE...
  CHAR [22 serialization::archive 9 0 1 0
  0 1 12 Hello there!]
  ID: 1
  Data: Hello there!

  //continues in increasing order same as above until the 18th message in the following
  CHAR [22 serialization::archive 9 0 1 0
  0 18 12 Hello there!]
  ID: 0
  Data: 

  //!!!!AFTER the 18th message I got question marks in the printed char stream!!!!!
  CHAR [22 serialization::archive 9 0 1 0
  0 19 12 Hello there!���]
  ID: 0
  Data: 

  CHAR [22 serialization::archive 9 0 1 0
  0 20 12 Hello there!���]
  ID: 0
  Data: 
```

**代码片段 2 (GenericMessage.hxx)**

```
 #include <iostream>
  #include <string>
  #include <sstream>
  #include <boost/serialization/serialization.hpp>
  #include <boost/archive/binary_oarchive.hpp>
  #include <boost/archive/binary_iarchive.hpp>
  #include <boost/archive/text_oarchive.hpp>
  #include <boost/archive/text_iarchive.hpp>

  template <class T>
  class GenericMessage {
  public:
    GenericMessage(): 
      beId(-1)
    {}

    GenericMessage(int id, T msg): 
       beId(id), 
       data(msg)
    {}

    ~GenericMessage(){}

    T getData()
    {
      return data;
    }

    std::string toString()
    {
       std::ostringstream ss;
       ss << getBeId();
       std::string ret =  ss.str();

      return ("ID: " + ret + " DATA: " + getData());
    }

    void setBeId(int id)
    {
      beId = id;
    }

    int getBeId()
    {
      return beId;
    }

  private:
    friend class boost::serialization::access;

    int beId;
    T data;

    template <class Archive>
    void serialize(Archive & ar, const unsigned int version)
    {
        ar & beId;
        ar & data;
    }

   }; 
```

**代码片段 3 (ZmqHandler.hxx)**

```
 #include "zmq.hpp"
   #include "GenericMessage.hxx"
   #include <unistd.h>
   #include <cassert>

   template <class A>
   class ZmqHandler {
      public:

         ZmqHandler():
     mContext(1),
     mOutbHandlerSocket(mContext, ZMQ_PUSH)
         {    
             mOutbHandlerSocket.bind ("tcp://*:5555");       
         }

         ~ZmqHandler() {}

         void sendToBE(GenericMessage<A> *theMsg)
         {
            std::ostringstream archive_stream;
            boost::archive::text_oarchive archive(archive_stream);

            try
            {
                archive << theMsg;
            } catch (boost::archive::archive_exception& ex) {
                std::cout << "Archive Exception during deserializing:" << std::endl;
                std::cout << ex.what() << std::endl;           
            } catch (int e) {
                std::cout << "EXCEPTION " << e << std::endl; 
            }

           std::string outbound_data_ = archive_stream.str();
           // no need to use the c-style string function 'strlen'
           int len = outbound_data_.length();

           zmq::message_t msgToSend(len);
           memcpy( msgToSend.data(), outbound_data_.data(), len );

           mOutbHandlerSocket.send(msgToSend);
           std::cout << "SENT request: [" << theMsg->toString() << "]" << std::endl;
           std::cout << "LENGTH [" << len << "]" << std::endl;
         }   

        private:  
          zmq::context_t mContext;
          zmq::socket_t mOutbHandlerSocket;         
     }; 
```

**代码片段 4 (TestFE.cxx)**

```
 #include "ZmqHandler.hxx"

       int main ()
       {
            ZmqHandler<std::string> zmqHandler;
            int counter = 1;

            while(1)
            {  
                std::string data = "Hello there!";
                GenericMessage<std::string> msg(counter, data);
                zmqHandler.sendToBE(&msg);
                counter++;
                sleep(1);
             }

             return 0;
        } 
```

**代码片段 5 (TestBE.cxx)**

```
 #include "zmq.hpp"
       #include "GenericMessage.hxx"
       #include <fstream>

       int main ()
       {
          //  Prepare our context and socket
          zmq::context_t context (1);
          zmq::socket_t socket (context, ZMQ_PULL);

         std::cout << "Connecting to FE..." << std::endl;
         socket.connect ("tcp://localhost:5555");

         while(1){
              zmq::message_t reply;
              socket.recv (&reply);

              const char *buf = static_cast<const char*>(reply.data());
              std::cout << "CHAR [" << buf << "]" << std::endl;

              std::string input_data_( buf, reply.size() ); 
              std::istringstream archive_stream(input_data_);
              boost::archive::text_iarchive archive(archive_stream);
              GenericMessage<std::string> theMsg;

              try
              {
                 archive >> theMsg;
              } catch (boost::archive::archive_exception& ex) {
                 std::cout << "Archive Exception during deserializing:" << std::endl;
                 std::cout << ex.what() << std::endl;           
              } catch (int e) {
                 std::cout << "EXCEPTION " << e << std::endl; 
              }

              std::cout << "ID: " << theMsg.getBeId() << std::endl;
              std::cout << "Data: " << theMsg.getData() << std::endl;

           }

            return 0;
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:14:57.397

当我在我的系统上构建和运行您的代码时，`TestBE`确实会抛出反序列化异常（每次）。这是我为修复它所做的：

在您的`ZmqHandler`班级中，将方法更改`void sendToBE(GenericMessage<A> *theMsg)`为`void sendToBE(GenericMessage<A> theMsg)`. 如果需要，您可以使用 a `const&`，但您可能不想在此处使用指针。在相同的方法中，您需要更改`theMsg->XXX`为`theMsg.XXX`，因为`theMsg`不再是指针。

中`TestFE`，`zmqHandler.sendToBE(&msg);`变为`zmqHandler.sendToBE(msg);`。

**if`theMsg`必须是指针**

在`ZmqHandler`中，只需将行更改`archive << theMsg`为`archive << *theMsg`。这样一来，档案`operator<<`就在使用对象，而不是指向对象的指针。您的其余代码可以保持不变。**

# javascript - 如何阻止固定的 100% 宽度元素与浏览器的滚动条重叠？

> ID：14650105
> 
> 赞同：1
> 
> 时间：2013-02-01T15:55:55.053
> 
> 标签：javascript, html, css

我的网站有 4 列，每列用于其中一个页面。因此，包装中掩码的宽度为 400%。导航是使用 scrollTo jquery 插件进行的，垂直和水平。

因为导航栏设置为`position: fixed;`and `width: 100%;`，所以它与 div 的滚动重叠。我给了它，`right: 17px;`但它也使页面滚动+17个额外像素。

有没有办法将每个页面的宽度设置为 100% - 17 像素？

否则，如何避免`right: 17px;`在不必重叠滚动的情况下放置导航？

网站链接：[www.inbrackets.dk/test](http://www.inbrackets.dk/test)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:59:40.143

最简单的解决方案是使用[calc](https://developer.mozilla.org/en-US/docs/CSS/calc)。

```
width: -webkit-calc(100% - 17px);
width:         calc(100% - 17px); 
```

但是，它的支持有限 - IE8 及更低版本不支持它。

旁注：在几个浏览器中，尤其是在 Windows 机器上，滚动条是 20px 宽，所以你需要`right:20px`. 此外，您的字体在我的机器上也很难阅读：

![在此处输入图像描述](../Images/8acdeacde6d391dcd5163f972592274e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T17:28:58.350

我根本不会弄乱正确的定位。您的滚动条在您的`#wrapper`div 上，既然是`position: absolute`，我会调整一些设置以使滚动条*位于*`#nav`.

首先，`height`从 中删除`#wrapper`，然后将以下 css 更改/添加到`#wrapper`：

```
top: 70px ; /* clears your nav */
bottom: 0px; /* gives it the height; puts the scroll bar at the bottom of the screen */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:12:42.340

我会避免使用 calc，并将您的固定导航设置为跨左：0 和右：0；

```
position: fixed;
top:0;
right: 0;
left: 0; 
```

小提琴：http: [//jsfiddle.net/a8LXV/](http://jsfiddle.net/a8LXV/)

# javascript - 如何使用 JavaScript 或 jQuery 将动态 URL 从绝对修剪为相对

> ID：14650108
> 
> 赞同：1
> 
> 时间：2013-02-01T15:56:08.890
> 
> 标签：javascript, jquery

我使用的系统偶尔会添加到动态 img 的 src 的完整路径。

```
<a href="#" class="link">
    <img src="http://www.domain.com/images/wish-add.png" alt="" />
</a> 
```

我需要删除 /images 之前的所有内容。

我需要能够在不手动引用域的情况下做到这一点。域并不总是相同的。

我可以删除始终相同的部分.. 就像 /images.. 但我不知道如何删除 /images 之前的任何内容，无论它是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:58:25.607

```
$('img').attr('src', function (i, src) {
    return src.replace(/https?:\/\/[^\/]+/, '');
}); 
```

# android - 如何在我的 android 应用程序中为所有视图使用 Roboto 字体？

> ID：14650111
> 
> 赞同：1
> 
> 时间：2013-02-01T15:56:12.930
> 
> 标签：android

我想在我的 android 应用程序中为所有视图使用 Roboto 字体，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:09:54.743

创建自定义视图，例如 TextView、EditText 等。然后在构造函数中设置下面的 setTypeface 示例：

```
public class RobotoTextView extends TextView {

    public RobotoTextView(Context context) {
        super(context);
        setTypeface(Typeface
                .createFromAsset(context.getAssets(), "fontname.ttf"));

    }
} 
```

然后在你的布局中使用它，而不是使用标准的 TextView 使用下面的自定义类示例：

```
<packagename.RobotoTextView
            style="@style/usecustomstyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/yourid"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:08:28.103

使用字体。将您的字体文件放在 assest 文件夹中。然后写下面的代码。

```
 Typeface Roboto = Typeface.createFromAsset(getAssets(), "Roboto.ttf"); 
```

然后使用 Roboto 字体所有你的`TextView`，`EditText`..etc

```
 Textview.setTypeface(italic); 
```

# json - 面向 3rd 方客户 (AAA) 的 rest api

> ID：14650113
> 
> 赞同：0
> 
> 时间：2013-02-01T15:56:13.040
> 
> 标签：json, api, rest, authentication, oauth

我目前正在研究一个 REST/JSON API，它必须通过远程网站提供一些服务。我不知道这些网站的最终客户，他们会/不应该在 API 服务器上拥有帐户。API 服务器上存在的唯一帐户将是识别网站的帐户。由于这都是 RESTful 的，因此所有通信都将在最终用户浏览器（通过 javascript/JSON）和我的 REST API 服务之间进行，我如何确保系统不会被有兴趣增加中间人账单的第 3 方滥用? （中间人是转售我的服务的网站的所有者）。您会推荐哪些身份验证方法可以起作用，并且可以防止用户仅从网站上获取 js 代码并调用 1000000 次以使网站所有者破产？我正在考虑使用 HTTP_REFERER ，并将其转换为 IP 地址（以找出托管代码的服务器，并基于此 IP 进行身份验证），但我认为 HTTP_REFERER 很容易被欺骗。我不是在寻找我客户的最终客户在 API 服务器上注册，这将违背此 API 的目的。

请问有什么想法吗？

谢谢，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:53:15.970

这可能不是您的选择，但我之前在这种情况下所做的是在 REST 调用之上创建代理。该网站调用它自己的内部服务，然后该服务调用您的 REST 调用。优点是，就像您说的那样，没有人可以直接打您的 REST 调用或尝试欺骗调用。

如果做不到这一点，您可以实现像 HMAC （[http://en.wikipedia.org/wiki/Hash-based_message_authentication_code ）这样的身份验证方案](http://en.wikipedia.org/wiki/Hash-based_message_authentication_code) ) 这样的身份验证方案。我已经看到很多 API 都使用它。

[使用 HMAC-SHA1 进行 API 身份验证 - 如何安全地存储客户端密码？](https://stackoverflow.com/questions/5487757/using-hmac-sha1-for-api-authentication-how-to-store-the-client-password-secure)

下面是验证 Java 代码的样子： [//support.ooyala.com/developers/documentation/api/signature_java.html](http://support.ooyala.com/developers/documentation/api/signature_java.html)

无论哪种方式，我认为您都必须在服务器端做一些工作。否则，如果一切都是纯粹的客户端，人们可能能够对 API 进行逆向工程。

# php - strftime/strtotime 语法

> ID：14650117
> 
> 赞同：0
> 
> 时间：2013-02-01T15:56:35.640
> 
> 标签：php, json, syntax, strtotime, strftime

我有这段工作代码（PHP）。我遇到的问题是 strftime('%e %B',strtotime($time)); 部分（位于块的末尾）。它什么也没返回..我做错了什么？也许是语法错误？

```
<?php
function buildBaseString($baseURI, $method, $params)
{
    $r = array();
    ksort($params);
    foreach($params as $key=>$value){
        $r[] = "$key=" . rawurlencode($value);
    }

    return $method."&" . rawurlencode($baseURI) . '&' . rawurlencode(implode('&', $r)); //return complete base string
}

function buildAuthorizationHeader($oauth)
{
    $r = 'Authorization: OAuth ';
    $values = array();
    foreach($oauth as $key=>$value)
        $values[] = "$key=\"" . rawurlencode($value) . "\"";

    $r .= implode(', ', $values);
    return $r;
}

$url = "https://api.twitter.com/1.1/statuses/user_timeline.json";

$oauth_access_token = "XXXXXX";
$oauth_access_token_secret = "XXXXXX";
$consumer_key = "XXXXXX";
$consumer_secret = "XXXXXX";

$oauth = array( 'oauth_consumer_key' => $consumer_key,
    'oauth_nonce' => time(),
    'oauth_signature_method' => 'HMAC-SHA1',
    'oauth_token' => $oauth_access_token,
    'oauth_timestamp' => time(),
    'count' => 6,   
    'oauth_version' => '1.0');

$base_info = buildBaseString($url, 'GET', $oauth);
$composite_key = rawurlencode($consumer_secret) . '&' . rawurlencode($oauth_access_token_secret);
$oauth_signature = base64_encode(hash_hmac('sha1', $base_info, $composite_key, true));
$oauth['oauth_signature'] = $oauth_signature;

$header = array(buildAuthorizationHeader($oauth), 'Expect:');
$options = array( CURLOPT_HTTPHEADER => $header,
    CURLOPT_HEADER => false,
    CURLOPT_URL => $url . '?count=6',
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_SSL_VERIFYPEER => false);

$feed = curl_init();
curl_setopt_array($feed, $options);
$json = curl_exec($feed);
curl_close($feed);

$twitter_data = json_decode($json);

echo "
            <ul style='color:#6E6E6E'>";

foreach ($twitter_data as $tweet)
{
    if (!empty($tweet)) {
        $text = $tweet->text;
    }
    if (!empty($tweet)) {
        $id = $tweet->id;
    }
    if (!empty($tweet)) {
        $time = $tweet->created_at;
    }
    if (!empty($tweet)) {
        $username = $tweet->user->name;
    }
    echo '<li>';
    echo $text . "<br><a href=\"http://twitter.com/";
    echo $username ;
    echo '/status/';
    echo $id ;
    echo '"><small>';
    strftime('%e %B',strtotime($time));
    ' </small></a> - <a href="http://twitter.com/intent/tweet?in_reply_to=';
    echo $id;
    echo '"><small>rispondi</small></a> - <a href="http://twitter.com/intent/retweet?tweet_id=';
    echo $id;
    echo '"><small>retweet</small></a> - <a href="http://twitter.com/intent/favorite?tweet_id=';
    echo $id;
    echo '"><small>preferito</small></a></li>';
}

echo '
            </ul>';

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:09:42.373

只是我还是你只是错过了一个`echo`？还是您打算与 连接`.`？

```
...
echo $id ;
echo '"><small>'; 
strftime('%e %B',strtotime($time)); ' </small></a> - <a href="http://twitter.com/intent/tweet?in_reply_to='; 
echo $id;
... 
```

应该...

```
...
echo $id ;
echo '"><small>'; 
echo strftime('%e %B',strtotime($time));
echo ' </small></a> - <a href="http://twitter.com/intent/tweet?in_reply_to='; 
echo $id; 
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:02:27.860

> 警告
> 
> 仅限 Windows：
> 
> 此函数的 Windows 实现不支持 %e 修饰符。为了达到这个值，可以使用 %#d 修饰符。下面的例子说明了如何编写一个跨平台兼容的函数。
> 
> %z 和 %Z 修饰符都返回时区名称而不是偏移量或缩写。

**参考：**

*   [http://php.net/manual/en/function.strftime.php](http://php.net/manual/en/function.strftime.php)

# c# - 如何不通过使用（属性初始化程序）处理对象？

> ID：14650119
> 
> 赞同：1
> 
> 时间：2013-02-01T15:56:40.790
> 
> 标签：c#, .net

我已经看到通过“使用”语句自动处置的对象的示例，这是定义对象范围和强制处置的明确方式。

我还看到在 try/catch/finally 块的 finally 中调用了 dispose。

但是，假设一次性对象被实例化为表单类中的属性初始化程序，我如何确保在这种情况下调用 Dispose？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:00:36.147

如果你的意思是这样的：

```
var form = new Form { Dependency = new DisposableDependency() }; 
```

那么`Form`类应该在自己的`Dispose()`方法中处理它，最好的方法是实现自己的方法`IDisposable`或者在方法中处理这种一次性依赖关系（`Close()`如果存在）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:26:58.407

根据您的需要，有[多种技术可以完成此任务。](http://blogs.msdn.com/b/ploeh/archive/2006/08/10/howtodisposemembersfromforms.aspx)来自 MSDN：

`When a form is closed, all resources created within the object are closed and the form is disposed.`

如果属性的生命周期直接与表单相关联，那么您可以在设计器文件中重写的 Dispose 方法中对对象进行 Dispose。因此，当您调用 时`form.Close()`， Disposable 对象也将被丢弃。

```
 /// <summary> 
    /// Clean up any resources being used.
    /// </summary>
    /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
    protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
        {
            components.Dispose();
        }

        myDisposableObject.Dispose();

        base.Dispose(disposing);
    } 
```

设计器文件的这个特定部分不会被覆盖，但是，开发人员可能会忽略设计器文件，假设是自动生成的代码。另一种处理方式，例如挂钩到 Form 的 dispose 事件可能更适合您的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:57:36.723

让您从 IDisposable 继承类而不是使用 using(var myclass=new myclass()) {} 希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T15:59:28.070

您可以让表单实现 IDisposable 并在 Form.Dispose() 中对对象调用 Dispose() 方法

# javascript - 在 jquery 的“$.ajax”方法中将对象分配给“数据”属性

> ID：14650120
> 
> 赞同：1
> 
> 时间：2013-02-01T15:56:44.067
> 
> 标签：javascript, jquery, ajax, object

这是我对这个问题的了解：

我们有一个 ajax 函数，我们可以向它传递一个具有如下属性的对象：

```
 var ajaxRequest = {};

    ajaxRequest['type'] = 'POST';
    ajaxRequest['async'] = false;
    ajaxRequest['datatype'] = 'json';
    ajaxRequest['url'] = '/Query/getMydata';

    $.ajax(ajaxRequest); 
```

这些属性之一是由键/值对组成的数据参数：

```
 ajaxRequest['data'] = {color: 'red' , name: 'Steve' } 
```

我试图做这样的事情：

```
 var oData = [];
    oData['color'] = 'yellow';
    oData['name'] = 'Fred';

    ajaxRequest['data'] = oData; 
```

但它不起作用。

所以我的问题是：有一个对象可以分配给“数据”参数，还是我被迫用连接构建字符串？

编辑==============

也许我没有解释，我知道可以通过这样的代码创建该方法：

```
 var ajaxRequest = {
      type: 'POST',
      async: false
      ....
      }; 
```

但我正在使用对象和属性，因为我需要使方法“通用”，然后我将添加“if”，如下所示：

```
 function ajaxReq(data){
         var ajaxRequest = {};

         if( !data.isEmpty()){
             ajaxRequest['data'] = data;
         }

           ajaxRequest['type'] = 'POST';
           ajaxRequest['async'] = false;
           ajaxRequest['datatype'] = 'json';
           ajaxRequest['url'] = '/Query/getMydata';

           ...

           $.ajax(ajaxRequest);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T16:01:30.313

您的复杂方法完全没有必要。您应该只使用对象文字：

```
var ajaxRequest = {
    type: 'POST',
    async: false
    datatype: 'json',
    url: '/Query/getMydata'
};

$.ajax(ajaxRequest); 
```

你也可以嵌套它们，所以你可以这样：

```
var ajaxRequest = {
    type: 'POST',
    async: false
    datatype: 'json',
    url: '/Query/getMydata',
    data: {
        color: 'yellow',
        name: 'Fred'
    }
}; 
```

jQuery 会将其转换为您的查询字符串，因此您无需担心。

* * *

一个额外的澄清......`oData = []`导致问题的原因是`[]`创建了一个数组。在 Javascript 中，数组是一种特殊的对象。只有带有数字键的属性才被视为数组的成员（例如`oData[1]`）。如果您像使用`{}`一样使用对象文字 ( ) `ajaxRequest`，它会工作得很好。

# python - MongoDb: $sort by $in

> ID：14650122
> 
> 赞同：5
> 
> 时间：2013-02-01T15:56:49.217
> 
> 标签：python, mongodb, sorting, pymongo

我正在`find`使用运算符运行 mongodb 查询`$in`：

```
collection.find({name: {$in: [name1, name2, ...]}}) 
```

我希望结果按与我的名称数组相同的顺序排序：`[name1, name2, ...]`。我如何实现这一目标？

注意：我是通过 pymongo 访问 MongoDb，但我认为这并不重要。

编辑：由于在 MongoDb 中无法实现这一点，我最终使用了一个典型的 Python 解决方案：

```
names = [name1, name2, ...]
results = list(collection.find({"name": {"$in": names}}))
results.sort(key=lambda x: names.index(x["name"])) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-10-24T20:04:13.680

您可以使用从即将发布的 3.4 版（2016 年 11 月）开始的聚合框架来实现这一点。

假设您想要的顺序是`order=["David", "Charlie", "Tess"]`您通过此管道执行的数组：

```
m = { "$match" : { "name" : { "$in" : order } } };
a = { "$addFields" : { "__order" : { "$indexOfArray" : [ order, "$name" ] } } };
s = { "$sort" : { "__order" : 1 } };
db.collection.aggregate( m, a, s ); 
```

该`"$addFields"`阶段是 3.4 中的新阶段，它允许您在`"$project"`不知道所有其他现有字段的情况下为现有文档添加新字段。新 `"$indexOfArray"`表达式返回给定数组中特定元素的位置。

此聚合的结果将是符合您的条件的文档，按照输入数组中指定的顺序`order`，并且文档将包括所有原始字段，以及一个名为`__order`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T11:11:11.513

不可能的。$in 运算符检查存在。该列表被视为已设置。

选项：

*   拆分为 name1 ... nameN 的多个查询或以相同的方式过滤结果。更多名称 - 更多查询。
*   使用 itertools groupby/ifilter。在这种情况下 - 将“排序优先级”标志添加到每个文档，并将 name1 匹配到 PREC1，将 name2 匹配到 PREC2，......，然后按 PREC 排序，然后按 PREC 分组。

如果您的收藏在“名称”字段上有索引 - 选项 1 更好。如果没有索引或者由于写入/读取比率高而无法创建索引 - 选项 2 适合您。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-22T01:52:18.290

Vitaly 是正确的，使用 find 无法做到这一点，但可以使用聚合来实现：

`db.collection.aggregate( [ { $match: { name: {$in: [name1, name2, ...]} }, { $project: { 'name': 1, 'name1': { $eq: [ 'name1', '$name' ] }, 'name2': { $eq: [ 'name2', '$name' ] } } }, { $sort: { 'name1': 1, 'name2': 1 } } ] )`

在 2.6.5 上测试

我希望这会向其他人暗示正确的方向。

# iphone - 在不需要的视图中触发备用景观

> ID：14650127
> 
> 赞同：0
> 
> 时间：2013-02-01T15:57:06.330
> 
> 标签：iphone, ios, orientation, uistoryboardsegue

我有一个包含图像和表格视图的视图控制器。从这个视图控制器中，我将一个 segue 连接到一个包含全屏图像的横向视图（当您从 Apple 向侧面转动股票应用程序以全屏查看图形时使用的想法相同）。

通过以下方法调用此 segue：

```
- (void)updateLandscapeView
{
    UIDeviceOrientation deviceOrientation = [UIDevice currentDevice].orientation;
    if (UIDeviceOrientationIsLandscape(deviceOrientation) && !isShowingLandscapeView)
    {
        [self performSegueWithIdentifier: @"toGraph" sender: self];
        isShowingLandscapeView = YES;
    }
    else if (deviceOrientation == UIDeviceOrientationPortrait && isShowingLandscapeView)
    {
        [self dismissViewControllerAnimated:YES completion:nil];
        isShowingLandscapeView = NO;
    }
} 
```

除此之外，当 iphone 处于纵向时，我还可以将 tableview 向下钻取几个级别。问题如下：在这些后续级别上，当我将方向转向横向时，仍然会触发横向视图的转接！...我该怎么做才能避免这种情况发生？我只对从包含图像的第一个视图进入横向模式感兴趣。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:54:07.930

我不确定我是否正确解决了您的问题..但是如果您的意思是“向下钻取表格视图”以更深入地了解导航控制器层次结构，您可以尝试以下操作..

这就是我在（我认为）类似情况下所做的：

应用委托：

在.h中：

```
@property (nonatomic) BOOL shouldAutorotate; 
```

以 .m 为单位：

// 在 didFinishLaunchingWithOptions 中：

```
self.shouldAutorotate = NO; 
```

// 仍然在 .m 文件中

```
// Autorotation handling
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    return self.shouldAutorotate ?
    UIInterfaceOrientationMaskAllButUpsideDown :
    UIInterfaceOrientationMaskPortrait;
} 
```

显示纵向控制器的导航控制器

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (NSUInteger)supportedInterfaceOrientations
{
    if (self.selectedViewController)
        return [self.selectedViewController supportedInterfaceOrientations];

    return UIInterfaceOrientationMaskPortrait;
}

- (BOOL)shouldAutorotate
{
    return YES;
} 
```

Portrait View Controller（这也是您拥有的非常相似的 segue 处理）：

在视图中会出现：

```
[(AppDelegate *)[[UIApplication sharedApplication] delegate] setShouldAutorotate:YES]; 
```

旋转处理：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (BOOL)shouldAutorotate
{
    return NO;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

横向视图控制器（可能是您的全屏图像）：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
} 
```

在导航控制器层次结构的更深处（只需要纵向）：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (BOOL)shouldAutorotate
{
    return NO;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

看起来有点复杂，但这是唯一的方法，我设法让这些旋转的东西在 iOS5 和 6 中都能正常工作。

# java - 在第一次加载 ViewPager 时显示内容

> ID：14650128
> 
> 赞同：0
> 
> 时间：2013-02-01T15:57:07.470
> 
> 标签：java, android, android-viewpager

我不确定如何用其他方式来表达标题，但我的应用程序中的 viewpager 可以正常工作 - 实例化当前视图以及左视图和右视图。

我想知道的是，我是否可以仅在第一次加载 viewpager 时显示非 viewpager 元素（在本例中为 listview）的内容，然后随着 viewpager 滚动而相应更新。

相关代码：

```
_calendar.set(Calendar.MONTH, m);
_calendar.set(Calendar.YEAR, y);
holdTodaysDate.set(Calendar.MONTH, m);
holdTodaysDate.set(Calendar.YEAR, y);

_calendar = holdTodaysDate;

_calendar.add(Calendar.MONTH, offset-1); 
month = _calendar.get(Calendar.MONTH)+1;
year = _calendar.get(Calendar.YEAR);
Log.d("Calendar", "Month Year" + month + " " + year);

eventsSummary.onEventsNavigation(month, year, date_value);

--calendar adapter-- 
```

问题是`eventsSummary`（非 viewpager 元素）必须在 viewpager 加载时使用初始月份值加载，但由于 viewpager 加载三次，月份+1 显示在`eventsSummary`.

例如，二月是当前月份，它确实显示了二月，正如我在日志中看到的那样，viewpager 第一次加载时，但是 viewpager 也实例化了下一个和上一个视图 - 所以一月和三月被加载。最后`eventsSummary`显示三月的事件，而主日历（即 ViewPager 元素）显示二月。

我怎样才能`eventsSummary`显示 2 月的事件，而不是 3 月的事件，然后用用户滑动到的月份更新其视图？

我正在使用[此处显示](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)`eventsSummary`的方法在片段和 Calendar ViewPager 容器之间传递信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:57:09.227

我是否正确理解您在每个片段中设置日期`onCreate()`？

也许您应该观察 ViewPager 正在显示的页面，并[通过 OnPageChangeListener](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOnPageChangeListener%28android.support.v4.view.ViewPager.OnPageChangeListener%29)触发事件。

# json - 附加后链接将无法在 jquery mobile 上正确显示

> ID：14650133
> 
> 赞同：1
> 
> 时间：2013-02-01T15:57:27.000
> 
> 标签：json, jquery, listview, jquery-mobile

我正在尝试从 json 数据中输出列表“li”中的链接并将其传递给 jquery 移动元素。但是在我附加jquery之后，“li”上的链接似乎像常规链接一样输出（链接蓝色而不是正确的listview jquery mobile），并且没有显示jquery mobile的属性css。

不知道我是否解释正确，但我在这里做错了什么？

```
<?php include "_header.php" ?>
<div data-role="header" data-theme="c">
    <div align="center">
                //some code
    </div>
</div><!-- /header -->
<div data-role="content">   
    <div align="center"><img src="imgs/charmchasers-m.png" alt="Charmchasers logo" width="250px" ></div>    

    <div class="content-primary">
        <ul data-role="listview" data-inset="true" data-theme="e">
            <li>
                <h3>North America</h3>
                <p>H-D Dealer Charms - USA &amp; Canada.</p>
                <ul data-role="listview" data-filter="true" data-theme="c" data-inset="true" id="state-list">
                </ul>
            </li>
            <li>
                <a href="display.php?state=international" data-transition="slide">
                    <h3>International</h3>
                    <p>H-D Dealer Charms - Asia &amp; Europe.</p>
                </a>
            </li>
            <li>
                //some code
            </li>
            <li>
                //some code
            </li>
        </ul>
    </div>
</div><!-- /content -->
<div data-role="navbar" data-iconpos="bottom">
    <ul>
        <li><a href="display.php?state=new" data-role="button" data-icon="star" data-theme="a" data-transition="slide">New Charms</a></li>
        <li>//some code</li>
    </ul>
</div><!-- /navbar -->
<script>
(function() {
    var json_url = 'http://localhost:8888/MOD/charmchasers/app/mysql-to-json.php';

    $.getJSON(json_url, function(data){
        $.each(data, function(i, item) {
            $('#state-list').append('<li><a href="display.php?state=' + item.d_state  + '" data-transition="slide">' + see_abbrv(item.d_state) + '</a></li>');
        });
    });
}) ();
</script> 
```

任何的想法？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:15:07.210

每次添加新内容时都**`jQuery Mobile`**需要强制增强页面标记。它可以通过多种方式完成，如果您想了解更多信息，请查看这篇**[文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**，更透明的是我的个人博客。或者看看**[这里](https://stackoverflow.com/a/14550417/1848600)**。

应使用此功能：

```
$('#state-list').listview('refresh'); 
```

并且需要像这样更改代码：

```
(function() {
    var json_url = 'http://localhost:8888/MOD/charmchasers/app/mysql-to-json.php';

    $.getJSON(json_url, function(data){
        $.each(data, function(i, item) {
            $('#state-list').append('<li><a href="display.php?state=' + item.d_state  + '" data-transition="slide">' + see_abbrv(item.d_state) + '</a></li>');
        });
       $('#state-list').listview('refresh'); 
    });
}) (); 
```

还有一件事要记住，这一行必须在 a 内部使用，**`$.getJSON`**但在**`$.each`**循环结束并附加内容之后。最后要记住的最后一件事是，如果可能的话，经典的就绪函数不应该与一起使用，而是应该使用，在**[这里](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**找到更多信息。**`jQuery`** **`DOM`****`jQuery Mobile`****`page events`**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:07:52.907

“如果您生成新的标记客户端或通过 Ajax 加载内容并将其注入页面，您可以触发 create 事件来处理新标记中包含的所有插件的自动初始化。” - [http://jquerymobile.com/demos/1.0/docs/pages/page-scripting.html](http://jquerymobile.com/demos/1.0/docs/pages/page-scripting.html)

因此，在添加新列表项后，您必须触发创建事件来构建列表视图。尝试：

```
$('ul').listview('refresh'); 
```

或者

```
$('ul').trigger('create'); 
```

编辑：

在 $.each() 循环中试试这个：

```
$('#state-list').append('<li><a href="display.php?state=' + item.d_state  + '" data-transition="slide">' + see_abbrv(item.d_state) + '</a></li>').listview('refresh'); 
```

我刚刚添加了 .listview('refresh'); 在每个附加的末尾。如果列表视图已经初始化，它应该可以工作。

# javascript - d3 的可重用组件是对象吗？

> ID：14650134
> 
> 赞同：1
> 
> 时间：2013-02-01T15:57:28.650
> 
> 标签：javascript, d3.js

当我们打电话

```
var xAxis = d3.svg.axis() 
```

我们是在实例化一个新的轴对象吗？我知道该`axis`组件是作为闭包实现的，但如果它也是一个对象，我会感到困惑。

我的问题也适用于 Mike 的文章 Towards Reusable Charts，特别是[本节](http://bost.ocks.org/mike/chart/#reconfiguration)的结尾。使用他的模式，如果我们做类似的事情

```
var myChart = chart().width(720).height(80); 
```

是`myChart`一个对象？如果不是，那是什么？做这个和做有什么区别`var myChart = new chart();`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T22:48:37.007

是的，我们每次都实例化一个新的轴对象。这个实例是 a `function`，它在 JavaScript 中是一等 Object；意思是，您可以像这样为其分配属性：

```
function myFunc() {}
myFunc.foo = "bar";

myFunc();// This is possible (naturally)
console.log(myFunc.foo);// ...and this is valid too 
```

如果将上面的代码包装在一个函数中：

```
function giveMeMyFunc() {
    function myFunc() {}
    return myFunc;
} 
```

然后每次你打电话

```
myFuncInstance = giveMeMyFunc(); 
```

你会得到一个新的实例`myFunc`（它也是一个对象），因为`myFunc`每次调用都会声明一次。

所以我们已经确定一个函数也是一个对象。而且，当一个函数返回另一个函数时，就好像它返回了一个对象的新实例，但同时也是一个函数，你仍然可以调用`myFuncInstance()`.

为了强调这一点，也许为了回答您的其他问题，我们可以看看`d3.svg.axis()`实际是如何实现的（大致摘自 d3 源代码）：

```
d3.svg.axis = function() {
  /* Some variables here, which essentially are instance properties (protected through closure) */
  var scale = 123;
  ...

  /* This is a function, but since JavaScript functions are first-class objects, it's essentially an instance. */
  /* Each time (the outer) `d3.svg.axis()` is called, (the inner) `axis` function is a unique – not a shared – object. */
  function axis() {
    /* This is where the work of drawing the axis takes place, but won't get
      called until the axis is used (see below). */
  }

  /* Since the inner function `axis` is also an object, the following is an instance method */
  axis.scale = function(x) {
    scale = x;// here we're setting `scale`, which is basically an instance property

    // returning `axis` – a.k.a. our instance – is what enables method chaining: myAxis.scale(5).orient("left")
    return axis;
  }

  /* More methods here, like `axis.scale` above */

  /* Last line is very important: */
  /* This is where the newly created instance is return. Remember from */
  /* above, `axis` is a function, but it's an Object too, and it has the */
  /* methods we've just applied to it. */
  return axis;
}

/* Given all that, the line below returns an instance of `axis` (the inner function),
  which has more methods applied to it. */
myAxis = d3.svg.axis(); 
```

最后，由于实例`myAxis`也是一个函数，你可以调用它。这就是 d3 在将轴应用于选择时所做的事情：

```
d3.select('.x_axis').call(myAxis); 
```

D3 将调用`myAxis`其主体的函数，上面定义的主体`function axis() {}`将完成在匹配选择器的元素中实际绘制一些 SVG 内容的所有工作`'.x_axis'`。

# git - Git 找不到标记或提交哈希的远程引用

> ID：14650146
> 
> 赞同：3
> 
> 时间：2013-02-01T15:58:16.727
> 
> 标签：git

我正在尝试将（我也遇到与 fetch 相同的问题）拉到远程分支上的特定标签。我正在尝试运行：

```
 git pull origin v0.0.2.1 
```

其中 v0.0.2.1 是我的标签的名称。我收到此错误消息：

```
fatal: Couldn't find remote ref v0.0.2.1
fatal: The remote end hung up unexpectedly 
```

如果我将“v0.0.2.1”替换为该标签的哈希或该标签所指的提交的哈希，我会收到相同的错误消息。

我已经检查了远程确实有这个标签和这个提交（实际上我可以在具有这个存储库的另一台机器上成功运行上述命令）。我检查了这两台机器上的 .git/config 文件是否相同。

以下仍然有效：

```
 git pull origin HEAD 
```

另外，我用

```
git ls-remote origin 
```

我得到以下（除其他外）：

```
016d51475640e738b24cce2fb4019649ed81fa6b    refs/tags/v0.0.2.1 
```

有谁知道发生了什么？

**我找到了一种解决方法：** 以下工作：

```
 git pull origin refs/tags/v0.0.2.1 
```

这适用于我的任务，但我真的很想更多地了解为什么这种方法有效而其他方法无效。如果有人能提供一个很棒的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T22:43:43.483

在阅读 1.7.0 到 1.7.9 版本的变更[日志](https://github.com/git/git/tree/master/Documentation/RelNotes)时，`git`我们可以找到几个可能导致解释的条目。在远程端进行 ref-lookups 的方式已经改变（以加快速度）。

这可以解释为什么版本 1.7.0 需要`refs/tags/<tagname>`获取而 1.7.10 不需要。

# ios - NSMutableString 的内存问题

> ID：14650150
> 
> 赞同：2
> 
> 时间：2013-02-01T15:58:20.427
> 
> 标签：ios, objective-c, memory, nspredicate

我在使用谓词过滤数组时遇到问题。我的代码是这个：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSError *error;
NSFileManager *fm = [NSFileManager defaultManager];
NSString *filename=[NSString stringWithFormat:@"%@/%lld-%@.jpg",[paths objectAtIndex:0],[TRIP surrogateKey], ms];

NSArray *dirContents = [fm contentsOfDirectoryAtPath:[paths objectAtIndex:0] error:&error];
NSPredicate *fltr = [NSPredicate predicateWithFormat:@"SELF beginsWith %lld-%@",[TRIP surrogateKey], ms];
NSArray *registros=[dirContents filteredArrayUsingPredicate:fltr]; 
```

在调试会话中，我发现我在执行代码的最后一行时遇到问题（NSArray *registros=[dirContents filteredArrayUsingPredicate:fltr]），它给了我以下错误：

```
-[__NSCFString objCType]: unrecognized selector sent to instance 0x7e67200 2013-02-01 16:37:59.132 GastosApp[4462:11303] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString objCType]: unrecognized selector sent to instance 0x7e67200' 
```

在调试部分，我看到内存 0x7e67200 被声明的 ms 变量占用：

```
NSMutableString *ms = [[NSMutableString new] autorelease]; 
```

有没有人看到任何错误？

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:22:39.710

可能是错误的，因为 NSPredicate 会自动引用 %@ 等格式变量。

例如，这个：

```
[NSPredicate
    predicateWithFormat:@"SELF like[c] %@*%@", prefix, suffix]; 
```

将如下：`SELF LIKE[c] "prefix" * "suffix"`

正确的方法：

```
[NSPredicate
    predicateWithFormat:@"SELF like[c] %@",
    [[prefix stringByAppendingString:@"*"] stringByAppendingString:suffix]]; 
```

这给了我们一个正确的结果：`SELF LIKE[c] "prefix*suffix"`

# java - 在 bean 归档 (jar) 中定义和使用时，CDI 拦截器不起作用

> ID：14650154
> 
> 赞同：3
> 
> 时间：2013-02-01T15:58:31.097
> 
> 标签：java, glassfish, java-ee-6, cdi, interceptor

我有以下项目结构（Maven）：

```
- war with `WEB-INF/beans.xml`, `WEB-INF/web.xml` and REST service configuration
- ext-spi (packaged as jar, not bean archive) which provides some simple SPI, finally goes to `war/WEB-INF/lib`  
- ext - parent project (pom)  
-- ext-impl (jar, bean archive - META-INF/beans.xml exists) - contains CDI Interceptor (both binding and implementation) + some REST service (RequestScoped CDI Bean) which is annotated with mentioned Interceptor Binding finally goes to `war/WEB-INF/lib`  
-- ext-model (jar) - contains REST service API and data model, finally goes to `war/WEB-INF/lib` 
```

问题是拦截器根本不起作用。当然，我已经启用它（与和的`beans.xml`不同组合）。没有错误，没有警告。它看起来甚至没有从 jar 中读取 - 没有抱怨我在启用拦截器甚至格式错误的 xml 标记时给出的假类路径。当从同一个 bean 归档中获取另一个 CDI Bean时，同一个 CDI Bean 没有问题。`war``ext-impl``META-INF/beans.xml``@Inject`

如果我尝试在直接创建的某些 CDI Bean 上使用相同的拦截器`war`- 一切正常。

根据规范，它应该可以工作。

**应用服务器：** Glassfish 3.1.2.2

**拦截器：**

```
@Inherited  
@InterceptorBinding  
@Target({ ElementType.TYPE, ElementType.METHOD })  
@Retention(RetentionPolicy.RUNTIME)  
public @interface ResourceInterceptorBinding {
} 
```

您知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:22:24.020

对于那些感兴趣的人：看起来它是一个 Glassfish 错误。我刚刚发现了以下 Jira 问题：http: [//java.net/jira/browse/GLASSFISH-18802](http://java.net/jira/browse/GLASSFISH-18802)

编辑：更糟糕的是 - 我必须在所有 bean 档案中启用拦截器，这些档案可以在`META-INF\lib`. 否则它根本行不通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T16:14:20.387

只是为了好玩和咯咯笑，尝试将它添加到 war beans.xml 中，看看会发生什么。

# c++ - 程序说没有默认构造函数

> ID：14650157
> 
> 赞同：-4
> 
> 时间：2013-02-01T15:58:44.313
> 
> 标签：c++, constructor

我正在尝试编写一个程序，当用户输入电影的关键字时，程序会在标题中搜索它并返回结果。我坚持如何尝试做到这一点。我不断收到关于头类中没有默认构造函数的错误。我不知道如何解决这个问题。

这是头类

```
// Movies.h
#ifndef MOVIES_H
#define MOVIES_H
#include "Movie.h" // include Movie class definition
#include <string>
using namespace std;

class Movies {
// data is private by default
static const int MAX_MOVIES = 1000;
Movie movies[MAX_MOVIES];
int movieCnt;

public:
Movies(string);
void Test(string);
const Movie getMovie(int);

private:

void loadMovies(string);
string myToLower(string);
};
#endif 
```

这是头文件的 cpp 文件

```
// Movies.cpp
#include "Movie.h" // include Movie class definition
#include "Movies.h" // include Movies class definition
#include <fstream>
using namespace std;

 Movies::Movies(string fn){loadMovies(fn);}

 const Movie Movies::getMovie(int mc) {
return movies[mc-1];
}

void Movies::loadMovies(string fn) {
ifstream iS(fn);
string s;
getline(iS, s); // skip heading
getline(iS, s);
movieCnt=0;
while(!iS.eof()) {
    movies[movieCnt++] = Movie(s);
    getline(iS, s);
}
iS.close();
}

 void Movies::Test(string key)
{
Movies[1];
}

string Movies::myToLower(string s) {
int n = s.length();
string t(s);
for(int i=0;i<n;i++)
    t[i] = tolower(s[i]);
return t; 
```

}

这是我的主要功能

```
// MovieInfoApp.cpp
#include "Movie.h" // include Movie class definition
#include "Movies.h" // include Movies class definition
#include <iostream>
#include <string>
using namespace std;

void main() {
Movies movies("Box Office Mojo.txt");
string answer, key;
bool set = false; 
int movieCode, ant;
cout<< "Would you like to start the Movie search?";
cin>> answer;
while (answer =="y" ||answer =="Y")
{
    cout<< "would you like to enter a movie name or a movie number? (press 1      for movie name press 2 for number";
    cin>>ant;
    if (ant = 2)
    {

        cout << "Please enter the movie number: ";
        cin >> movieCode;
        Movie m = movies.getMovie(movieCode);
        if(m.getTitle().length() > 0)
        {
            cout << m.toString() << "\n";
        }
        else
        {
            cout << "\n Movie not found!\n\n" << endl;
        }
    }
    else if (ant =1)
    {   
        cout << "Please enter a keyword or title of the movie: ";
        cin >> key;
        Movies tester; // No default constructor error over here 
        tester.Test(key);
    }
    else 
    {
        cout<< "invalid entry please try again";
    }
    cout<< "Would you like to continute the Movie search?";
    cin>> answer;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:00:37.497

错误很清楚 - 你没有默认构造函数。仅供参考，默认构造函数是可以在没有任何参数的情况下调用的构造函数。

```
Movies tester; 
```

将尝试调用默认构造函数。您定义了一个非默认值 - `Movies(string);`，因此编译器不再为您生成默认值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T16:01:01.797

您正在尝试使用默认构造函数进行声明`tester`，并且您`Movie movies[1000]`使用了默认构造函数，但是您的类没有默认构造函数。

您需要为默认构造函数提供参数`tester`或定义默认构造函数。

对于数组，即使您确实定义了一个默认构造函数以使其工作，我建议不要使用将直接存储在对象中的数组，因为这样您的对象真的很大（并且可能会因意外的堆栈溢出而使您感到惊讶）。使用`std::vector`，这将解决多个问题。

# vb.net - 将组合框选定值绑定到当前行的特定列（不是数据网格视图）

> ID：14650160
> 
> 赞同：0
> 
> 时间：2013-02-01T15:58:51.213
> 
> 标签：vb.net, data-binding

我有一个在 VB 2010 项目中使用的数据库。我所做的是删除了一个数据库字段的文本框，我将它拖到表单上，并将其替换为一个组合框。字段名称是`orderstatus`。

问题是这样的：由于我从表单中删除了文本框字段，我似乎无法将组合框值绑定到活动记录中的字段。换句话说，`orderstatus`文本框不再存在。我想让用户从组合框中选择一个状态并将该值存储到 orderstatus 以便将其保存到我的数据库的当前记录中。

我想做这样的事情：

```
Private Sub Button16_Click_1(sender As System.Object, e As System.EventArgs) Handles Button16.Click
  orderstatus = ComboBox13.SelectedValue
  Me.OrdersDataSet.orders(0).orderstatus = orderstatus
  Me.Validate()
  Me.OrdersBindingSource.EndEdit()
  Me.TableAdapterManager12.UpdateAll(Me.OrdersDataSet)
End Sub 
```

但它不喜欢我尝试将值分配给字段的第二行，说没有第 0 行。我要做的就是将组合框的选定值放入正在创建的记录的 orderstatus 字段中（或更新）。

我也尝试过使用：

```
Me.OrdersDataSet.orders.orderstatusColumn = orderstatus 
```

我收到一条消息，说该列的属性是只读的。我不确定这怎么可能，因为我将数据集配置为更新等。

我可能应该提一下，我没有使用 datagridview 而是使用详细信息视图，如果这会有所不同的话。我已经看到一些关于如何使用 datagridview 执行此操作的讨论，但不知道这是否适用于我的情况。

我究竟做错了什么？我应该用什么来只更新当前行中我想要的列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:22:10.470

Ugh, turns out I had forgot to set the databinding properties of the field in question to save directly to the binding source and also select the selecteditem to bind. It was right there and I didn't realize. Ya live and learn. :)

# java - 具有父子关系的实体（单表）的 HQL 查询

> ID：14650163
> 
> 赞同：0
> 
> 时间：2013-02-01T15:59:06.987
> 
> 标签：java, hql, hibernate-annotations

我正在尝试使用 HQL 创建简单的选择查询。有一个实体将在查询中使用。如下所示：

```
@Entity
@Table(name = "my_table")
public class MyTable {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "id")
    private Long id;

    @Column(name = "name")
    private String name;

    @Column(name = "test_id")
    private Long testId;

    @Column(name = "parent_id")
    private Long parentId;

    @OneToMany(mappedBy = "parentId", 
               fetch = FetchType.EAGER, 
               cascade = CascadeType.ALL)
    private Set<MyTable> children = new HashSet<MyTable>();

    //getters and setters
} 
```

层次结构很简单。有父母（其 parent_id 值为空）和他们的孩子。所以只有两个层次。

我想创建选择所有父母和他们的孩子的查询，但是孩子有一个条件：它应该等于特定**的 test_id**。例如，要求只有**test_id = 1**的孩子。表由 Parent1 和 Child1 ( **test_id = 2** ) 和 Parent2 和 Child2 ( **test_id = 1** ) 组成。查询结果应该是 Parent1 没有孩子，Parent2 有 Child2。

询问：

```
from MyTable as myTable left fetch join myTable.children as child 
where child.testId = 1 
```

结果 - 我只得到那些有**“1” test_id**孩子的父母。但我需要所有的父母看看，即使没有需要的孩子。这里有什么问题：映射或查询？它实际上应该如何？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:28:25.187

你的映射是错误的。您有一个单向的 OneToMany 关联。所以你显然必须告诉 Hibernate 这个关联是如何映射的。你说的是：

```
@OneToMany(mappedBy = "parentId", ...) 
```

这意味着：“去看看这个双向关联的另一面，看看这个关联是如何映射的。我只是反面”。

但没有另一面。您的关联是单向的。

映射应该是：

```
@Entity
@Table(name = "my_table")
public class MyTable {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "id")
    private Long id;

    @Column(name = "name")
    private String name;

    @Column(name = "test_id")
    private Long testId;

    @OneToMany(fetch = FetchType.EAGER, 
               cascade = CascadeType.ALL)
    @JoinColumn(name = "parentId")
    private Set<MyTable> children = new HashSet<MyTable>();

    //getters and setters
} 
```

请注意，该`parentId`字段已被删除，因为它已用于映射子关联。

另一个问题是你的期望。查询返回列，或者返回实体。如果它返回一个父实体并且您向该实体询问其子实体，则将返回所有子实体。一个实体代表数据库中的内容。它不代表特定查询的结果。

如果您只想拥有一些孩子，您可以做的是寻找孩子，并找到他们的父母。为此，您需要使关联是双向的：

```
@Entity
@Table(name = "my_table")
public class MyTable {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "id")
    private Long id;

    @Column(name = "name")
    private String name;

    @Column(name = "test_id")
    private Long testId;

    @ManyToOne
    @JoinColumn(name="parentId")
    private MyTable parent;

    @OneToMany(mappedBy="parent",
               fetch = FetchType.EAGER, 
               cascade = CascadeType.ALL)
    @JoinColumn(name = "parentId")
    private Set<MyTable> children = new HashSet<MyTable>();

    //getters and setters
} 
```

查询将是：

```
select child from MyTable child 
left join fetch child.parent
where child.testId = 1 
```

这将返回所有 testId = 1 的孩子以及他们的父母。您将需要第二个查询来获取所有其他父母。就像是

```
select parent from MyTable parent 
where parent.id not in (
    select parent2.id from MyTable child   
    left join child.parent parent2
    where child.testId = 1) 
```

# c++ - 运算符的实现！= 用于 Iter 类

> ID：14650164
> 
> 赞同：0
> 
> 时间：2013-02-01T15:59:13.790
> 
> 标签：c++, c++11

基于[Iter](http://www.cprogramming.com/c++11/c++11-ranged-for-loop.html)的实现，我很难理解`operator!=`并且不明白为什么它不检查`_p_vec`？

这是`operator!=`仅比较`_pos`.

```
class Iter
{
    public:
    Iter (const IntVector* p_vec, int pos)
        : _pos( pos )
        , _p_vec( p_vec )
    { }

    // these three methods form the basis of an iterator for use with
    // a range-based for loop
    bool operator!= (const Iter& other) const
    {
        return _pos != other._pos;
    }
    ...
    ...
    private:
        int _pos;
        const IntVector *_p_vec;
}; 
```

但是，我认为正确的方法如下。换句话说，我们必须比较两者`_pos`和`_p_vec`。

```
bool Iter::operator!= (const Iter& other) const
{
    return _p_vec != other._p_vec || _pos != other._pos;
} 
```

问题> 谁的代码是正确的？

===更新 std::vector 如何比较迭代器====

```
std::vector<int> vecOne { 1, 2, 3};
std::vector<int> vecTwo { 4, 5, 6};

auto iterOne = vecOne.begin();
std::advance(iterOne, 1);

auto iterTwo = vecTwo.begin();
std::advance(iterTwo, 1);

if ( iterOne == iterTwo)
    std::cout << "iterOne == iterTwo" << std::endl;
else
    std::cout << "iterOne != iterTwo" << std::endl; 
```

输出是：`iterOne != iterTwo`

然而，

```
std::vector<int> foo;
std::vector<int> bar;

if ( foo.begin() == bar.begin() )
    std::cout << "foo.begin() == bar.begin()" << std::endl;
else
    std::cout << "foo.begin() != bar.begin()" << std::endl; 
```

输出是：`foo.begin() == bar.begin()`

GCC（版本 4.7.1）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:09:58.843

作为一般规则，迭代器的用户不应该比较来自不同容器的迭代器。在标准库中，这样做是未定义的行为。

因此，假设您只是尝试创建与标准库迭代器一样健壮的迭代器，则不需要比较容器。但是，如果您有指向容器的指针，那么检查容器是否*至少在 debug*中匹配是礼貌的，然后断言您不应该进行这种比较。

您也可以自由地在版本中检查它，但是如果您使用代码的迭代器也应该与标准容器一起使用，那么不建议依赖来自不同容器的迭代器比较不相等。

请参阅[比较来自不同容器的迭代器，](https://stackoverflow.com/questions/4657513/comparing-iterators-from-different-containers)以便有人谈论它如何是未定义的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T16:04:16.967

比较底层容器引用也是一种改进，可以确保例如`begin()`两个不同容器的迭代器比较相等。

然而，不同容器的迭代器很少被比较（当使用 STL 算法时，他们永远不会）。所以这可能被认为是一种优化。考虑一个循环，您从`begin()`到`end()`，因此您要比较的唯一迭代器是“当前”迭代器 和`end()`，它们属于同一个容器。

比较标准容器（向量等）的迭代器被认为是*未定义的行为*。实际上，由于它们从未在（好的）代码（例如标准算法）中进行比较，因此不必为这种情况定义行为。

所以这个`Iter`类的作者可能还想回到这一点并说：“比较不同向量的迭代器是未定义的行为。”

话虽如此，如果您想确保从不比较不同容器的迭代器，请忽略此检查，并可能在调试版本中对其进行断言（但不要在发布版本中进行检查）。

您可能想要比较不同容器的迭代器的一个很好的例子是链表，您将链表的结尾定义为空指针（或指向静态空项实例的指针）。考虑迭代器是指向链表项的指针；在这种情况下，`end()`迭代器只是一个空指针（或指向这个空项）。所有容器都是同一个，因此在这种情况下，您*无法*在比较方法中实施检查。也许这是没有定义这种比较的原因之一——在比较不同列表的结束迭代器时它*应该*返回“不相等”，但它*不能*。

# javascript - 向 EXT JS 应用程序搜索文本框添加了一个输入事件以触发搜索

> ID：14650167
> 
> 赞同：3
> 
> 时间：2013-02-01T15:59:29.290
> 
> 标签：javascript, extjs, keyboard-events, enter

嗨，我的输入事件下面的代码永远不会触发，我们将不胜感激。

```
 items: [{
            xtype: 'textfield',
            id: 'idhere',
            name: 'namehere',
            fieldLabel: 'lablehere:',
            width: 500,
            handler: {
                  key:13,
                  fn : function () {
                  if (e.getKey() == e.ENTER) {
                           alert("You pressed an enter button in text field.");
    }
                  }

            }
        },{
            xtype: 'button',
            text: 'texttodisplay',
            handler: function() {
                                  //my function.
            }

        }] 
```

我实际上通过使用解决了这个问题：

```
listeners:  {
                specialkey: function (f,e) {    
                     if (e.getKey() == e.ENTER) {
                        loadData();
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T19:12:02.800

我不确定为什么 Sencha 从未包含`Ext.ux.form.SearchField`在 API 文档中，但该组件已包含在我使用过的所有版本的框架中。它被设置为触发一个`submit`和一个`cancel`事件，并包括附加到该字段的适当的搜索和取消按钮。

你可以在你的框架文件中找到它：`[extjs-root]\examples\ux\form\SearchField.js`

我建议使用该组件，而不是尝试创建自己的搜索字段。我通常会覆盖默认搜索功能以满足我自己的需要，但在某些情况下我也不需要这样做。

如果您在组件 JS 的顶部添加 requires 语句，您可以像任何其他（非 UX）组件一样创建它：

例如：

要求声明：

```
Ext.define('MyApp.view.SomeComponent', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.mycomponent',
    requires: [
        'Ext.ux.form.SearchField'
    ],
    ... 
```

在面板底部工具栏中创建搜索字段：

```
bbar: {
    items: [{
        text: 'A Button'
    }, {
        text: 'Another Button'
    }, '-', {
        xtype: 'searchfield', // <- can use this xtype with requires stmt
        itemId: 'search',
        width: 250,
        emptyText: 'Enter first and last name to search...'
    }]
},
... 
```

如果您对 requires 语句有疑问，您也可以像这样创建它：

```
var search = Ext.create('Ext.ux.form.SearchField', {
    itemId: 'search',
    width: 250,
    emptyText: 'Enter first and last name to search...'
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T19:59:46.607

只是为了提供如何添加这样的监听器。有一个`specialkey`事件可以用于这种情况

```
fieldinstance.on('specialkey', function(f, e){
    if (e.getKey() == e.ENTER) {
        // your action
    }
}); 
```

无论如何，我建议使用**[@Geronimo](https://stackoverflow.com/users/1062992/geronimo)**提到的 ux 组件

# python - 使用多线程时我应该保护内置数据结构（列表，字典）吗？

> ID：14650169
> 
> 赞同：1
> 
> 时间：2013-02-01T15:59:32.203
> 
> 标签：python

我认为在使用多个线程时我应该使用 Lock 对象来保护自定义类，但是，因为 Python 使用 GIL 来确保在任何给定时间只有一个线程在运行，这是否意味着不需要使用 Lock 来保护内置输入喜欢列表？例子，

```
num_list = []
def consumer():
    while True:
        if len(num_list) > 0: 
            num = num_list.pop()
            print num
            return

def producer():
    num_list.append(1)

consumer_thread = threading.Thread(target = consumer)
producer_thread = threading.Thread(target = producer)
consumer_thread.start()
producer_thread.start() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:29:48.397

The GIL protects the interpreter state, not yours. There are some operations that are effectively atomic - they require a single bytecode and thus effectively do not require locking. (see [is python variable assignment atomic?](https://stackoverflow.com/questions/2291069/is-python-variable-assignment-atomic) for an answer from a very reputable Python contributor).

There isn't really any good documentation on this though so I wouldn't rely on that in general unless if you plan on disassembling bytecode to test your assumptions. If you plan on modifying state from multiple contexts (or modifying and accessing complex state) then you should plan on using some sort of locking/synchronization mechanism.

If you're interested in approaching this class of problem from a different angle you should look into the [Queue](http://docs.python.org/2/library/queue.html) module. A common pattern in Python code is to use a synchronized queue to communicate among thread contexts rather than working with shared state.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:10:59.730

@jeremy-brown 用文字解释（见下文）......但如果你想要一个反例：

锁并不能保护您的状态。以下示例不使用锁，因此如果该`xrange`值足够高，则会导致失败：`IndexError: pop from empty list.`

```
import threading
import time
con1_list =[]
con2_list =[]
stop = 10000
total = 500000
num_list = []
def consumer(name, doneFlag):
    while True:
        if len(num_list) > 0: 
            if name == 'nix':
                con2_list.append(num_list.pop())
                if len(con2_list) == stop:
                    print 'done b'
                    return
            else:
                con1_list.append(num_list.pop())
                if len(con1_list) == stop:
                    print 'done a'
                    return
def producer():
    for x in xrange(total):
        num_list.append(x)

def test():
    while not (len(con2_list) >=stop and len(con1_list) >=stop):
        time.sleep(1)
    print set(con1_list).intersection( set(con2_list))

consumer_thread = threading.Thread(target = consumer, args=('nick',done1))
consumer_thread2 = threading.Thread(target = consumer, args=('nix',done2))
producer_thread = threading.Thread(target = producer)
watcher = threading.Thread(target = test)
consumer_thread.start();consumer_thread2.start();producer_thread.start();watcher.start() 
```

# node.js - 在 Compound JS 项目（MongoDB）中配置数据库用户名和密码

> ID：14650179
> 
> 赞同：0
> 
> 时间：2013-02-01T15:59:51.173
> 
> 标签：node.js

我已经开始使用 CompoundJS 和 MongoDB 作为数据库。我知道我应该在 中进行主机配置`/config/database.json`，但不确定如何为数据库配置添加用户名/密码。

我尝试添加如下用户名/密码，但它不起作用

```
{ "development":
  { "driver":   "mongoose"
  , "url": "mongodb://localhost/stats_development",
    "username": "admin",
    "password": "123456"
  }
, "test":
  { "driver":   "mongoose"
  , "url": "mongodb://localhost/stats_test",
    "username": "admin",
    "password": "123456"
  }
, "production":
  { "driver":   "mongoose"
  , "url": "mongodb://localhost/stats_production",
    "username": "admin",
    "password": "123456"
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:41:45.063

我找到了解决方案..

`mongodb://user:password@host:port/dbname`

感谢 Sagish，参考：[https ://github.com/1602/compound/issues/377](https://github.com/1602/compound/issues/377)

# php - 如何使用 JavaScript 通过 GET 方法将 url 参数发送到 PHP？

> ID：14650187
> 
> 赞同：0
> 
> 时间：2013-02-01T16:00:07.003
> 
> 标签：php, javascript

这是我的JS代码...

```
function da(){
    var a=document.forms["user"]["age"].value;
    if(this.age.value < 18 || this.age.value > 85) {
        alert('some text...');
        this.age.focus();
        return false;
    }else{
        window.location.href='file.php?&'+a;
    }
} 
```

它只是将参数传递给我所在的页面......这是以防万一的形式（我是初学者，请记住）......

```
<form name="buscar" method="GET"> Some text <input                 onmouseover="Aj2('d');document.getElementById('box').style.display='block';" onmouseout="clean();" type="number" name="age" id="age" > Age <div id="help" ><!-- --> </div><br />
<input type="button" value="Send" onclick="da()">
</form> 
```

Aj2 功能不是这里的问题...感谢您可能获得的任何帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:12:30.570

像这样的事情我不是专家。

```
$('button name').on('click', function() {
   var age_ = document.getElemenetById('age');
   $.get('path of your file', {'age' : age_}, function(resp) {
        // code to pass parameter
        alert(age_);
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:13:43.623

只是一个想法，如果您实际上不必重新加载页面而只是想从 PHP 获取您的 javascript 代码的信息，您可以执行类似的操作

```
<script>

<?
    $phpvariable = "my variable";
?>

var jsvariable = <?php echo json_encode($phpvariable); ?>;

</script> 
```

现在，javascript 变量 jsvariable 将保存 PHP 变量的内容。

# r - 调整连续变量的图例宽度

> ID：14650190
> 
> 赞同：18
> 
> 时间：2013-02-01T16:00:13.937
> 
> 标签：r, ggplot2, legend

我在下面有一个脚本来说明我的问题：

```
temp.df <- data.frame(x=1:100,y=1:100,z=1:100,stringsAsFactors=FALSE)
chart <- ggplot(data=temp.df,aes(x=x,y=y))
chart <- chart + geom_line(aes(colour=z))
chart <- chart + scale_colour_continuous(low="blue",high="red")
chart <- chart + theme(legend.position="bottom")
# so far so good, but I think the legend positioned at bottom with such a small size is a waste of space, so I want to "widen" it using the line below...
chart <- chart + guides(colour=guide_legend(keywidth=5,label.position="bottom"))
# oops, it changed to legend for categorical variable 
```

如何扩大位于底部的“连续变量”图例？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-01T16:06:40.570

而不是函数`guides()`，你应该使用函数`theme()`并设置`legend.key.width=`

```
temp.df <- data.frame(x=1:100,y=1:100,z=1:100,stringsAsFactors=FALSE)
chart <- ggplot(data=temp.df,aes(x=x,y=y))
chart <- chart + geom_line(aes(colour=z))
chart <- chart + scale_colour_continuous(low="blue",high="red")
chart <- chart + theme(legend.position="bottom")
chart <- chart + theme(legend.key.width=unit(3,"cm")) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-01T16:07:52.637

您可以在代码中使用`guide_colourbar`而不是：`guide_legend`

```
temp.df <- data.frame(x=1:100,y=1:100,z=1:100,stringsAsFactors=FALSE)
chart <- ggplot(data=temp.df,aes(x=x,y=y))
chart <- chart + geom_line(aes(colour=z))
chart <- chart + scale_colour_continuous(low="blue",high="red")
chart <- chart + theme(legend.position="bottom")
chart + guides(colour=guide_colourbar(barwidth=30,label.position="bottom")) 
```

![在此处输入图像描述](../Images/0b2162e1495d2685581f06690b561253.png)

# visual-c++ - wxWidgets 自定义 wxGrid

> ID：14650192
> 
> 赞同：0
> 
> 时间：2013-02-01T16:00:18.607
> 
> 标签：visual-c++, user-interface, visual-studio-2005, wxwidgets

我尝试使用自定义标签实现自定义 wxGrid。根据 wxwidgets 文档，需要实现 Method：SetColLabelValue 和 GetColLabelValue。遗憾的是，来自 wxGridTableBase 类的方法不会被我的代码覆盖。

```
#pragma once
#include <wx/grid.h>
#include <wx/string.h>
#include <wx/event.h>
#include <wx/string.h>
#include <vector>
class Grid :
    public wxGrid
{
    unsigned int m_rows_occupied;
    std::vector<wxString> m_colLabels;
    wxString* m_colLabelsArr;
public:
    Grid(wxWindow* _parent,wxWindowID _ID,wxPoint _pos,wxSize _size,long _style);
    ~Grid(void);
    void InsertValues(char* _col1,char* _col2);
    void SetRow(unsigned int _row,char* _col1,char* _col2);
    void SetCell(unsigned int _row,unsigned int _cell,char* _col1);
    unsigned int* Size(void){return &m_rows_occupied;};
    virtual void SetColLabelValue( int WXUNUSED(col), const wxString& )override;
    virtual wxString GetColLabelValue(int col) override{return wxString("");};
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:55:29.333

您在`wxGrid`和中混合了方法`wxGridTableBase`。如果要使用自定义表，则需要从后者而不是前者派生表类。

当然，如果你只是需要自定义一些标签，根本不需要使用自定义表格，只需调用`wxGrid::SetColLabelValue()`将它们设置为你需要的任何内容。

# sql-server - 仅当一行受到影响时如何执行更新？

> ID：14650197
> 
> 赞同：2
> 
> 时间：2013-02-01T16:00:27.643
> 
> 标签：sql-server, tsql

我在 SQL Server 中有一个表，它有一个 PK ( `ID`) 和另一个由其他几列组成的（逻辑）主键（尽管没有 UNIQUE 约束）。比方说，表`PERSON`，，`PK = PERSON_ID`然后`NAME`，，`SURNAME``AGE`

我想可以说

```
UPDATE PERSON SET AGE = 43 WHERE NAME = 'XX' AND SURNAME = 'YYY' 
```

并且仅在“更新的行”= 1 时才执行，否则（超过 1 行）根本不执行。问题是我不确定 NAME 和 SURNAME 是否唯一标识一条记录，并且我无法先验地告诉它。

想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T16:11:53.523

试试下面的查询......它会帮助你

```
UPDATE PERSON 
SET AGE = 43 
WHERE NAME = 'XX' 
  AND SURNAME = 'YYY' 
  AND 1 = (SELECT COUNT(*) FROM PERSON WHERE NAME = 'XX' AND SURNAME = 'YYY) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T16:51:36.837

我将条件放在更新之前，而不是放在 where 子句中。

```
IF (SELECT COUNT(*) FROM PERSON WHERE NAME = 'XX' AND SURNAME = 'YYY') = 1
UPDATE PERSON SET AGE = 43 WHERE NAME = 'XX' AND SURNAME = 'YYY' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-04T06:52:51.357

我通常不会编写复杂的 WHERE 子句或 IF 语句，而是将整个事情包装在事务中并检查@@ROWCOUNT：

```
BEGIN TRAN
UPDATE PERSON SET AGE = 43 WHERE NAME = 'XX' AND SURNAME = 'YYY'
IF @@ROWCOUNT > 1 ROLLBACK TRAN ELSE COMMIT TRAN 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T19:53:57.723

```
UPDATE Person p1
SET p1.AGE = 43
WHERE NAME = 'XX' AND SURNAME = 'YY'
AND NOT EXISTS (
  SELECT NULL FROM Person p2
  WHERE p1.NAME = p2.NAME
  AND p1.SURNAME = p2.SURNAME
  AND p1.ID <> p2.ID) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-01T16:05:44.050

应该这样做。

```
UPDATE Person p1
SET p1.AGE = 43
WHERE NAME = 'XX' AND SURNAME = 'YY'
AND NOT EXISTS (
  SELECT NULL FROM Person p2
  WHERE p1.NAME = p2.NAME
  AND p1.SURNAME = p2.SURNAME
  GROUP BY p2.NAME, p2.SURNAME
  HAVING COUNT(*) > 1) 
```

# database - NuGet - 包管理器未连接到远程服务器

> ID：14650199
> 
> 赞同：0
> 
> 时间：2013-02-01T16:00:30.680
> 
> 标签：database, visual-studio, visual-studio-2012, nuget

在 Visual Studio 2012 中，我尝试单击项目上的“管理 NuGet 包...”选项，当包管理器打开时，它会尝试加载一段时间，然后给我“无法连接到远程服务器”。
这里有一个类似的问题：[Visual Studio/C#: Nuget Unable to connect to remote server](https://stackoverflow.com/questions/11553591/nuget-unable-to-connect-to-remote-server) 但它似乎没有我能看到的任何答案。
我已经尝试更新 Visual Studio 2012 以及更新 NuGet（“扩展和更新”选项仍然可以正常工作）然后重新启动但没有这样的运气。它之前工作，但我已经使用数据库资源管理器创建了一个新的数据库连接。我不知道这是否会影响任何事情，但这是我能想到的唯一改变，因为它正在工作。
如果您需要任何其他信息，请告诉我。

**编辑：**好吧，显然这会在一段时间后自行修复。但只有在你提交了一个关于它的问题之后......叹息。如果有人有任何想法，我仍然想知道问题是什么，但至少它现在正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:54:08.610

虽然您当然[可以在自己的计算机上访问缓存的包](http://www.hanselman.com/blog/HowToAccessNuGetWhenNuGetorgIsDownOrYoureOnAPlane.aspx)，但如果您在团队中工作，您可以将[ProGet](http://inedo.com/proget)安装为中间 NuGet 服务器，它会自动为您的团队缓存网络上的远程包。

# javascript - 隐藏占位符 Div，然后在另一个页面上使用相同的代码给出 javascript 错误

> ID：14650201
> 
> 赞同：0
> 
> 时间：2013-02-01T16:00:33.610
> 
> 标签：javascript, html, ajax, asp.net-mvc-4

`ActionView`我有通过将数据从 ajax 调用传递到控制器中的方法而生成的代码。我只能在 ajax 调用返回时访问该数据。我试图显示数据的区域没有刷新，所以我将它添加到我的`PartialView`返回到我创建的页面 div。我的问题是我有一个完全相同的小表的占位符，因此在用户提交调用 ajax 请求所需的内容之前，页面不会看起来很傻。我的问题是我在占位符区域和显示的区域中的按钮无法正常工作。我认为正在发生的事情是 javascript 被具有相同信息的两个区域弄糊涂了，但是更改名称/ID 似乎并不能解决它。这是我的代码。（我还需要占位符表在隐藏之前能够正常工作）

这是在主页：

```
 <tr>
            <td>Comments: @Html.TextBox("comments2", comment)</td>
            <td></td>
        </tr>
        <tr>

            <td style="vertical-align: middle;">Booking#:@Html.TextBox("bookNum2", bookNum)</td>

            <td><input id="saveOrder2" type="button" value="Save Order2" onclick="saveOrder2(true)" /></td>

        </tr>
        <tr>
            <td style="vertical-align: middle;">Ship Date:@Html.TextBox("shipDate2", shipDate)</td>
            <td>
                <input id="Build" type="button" value="Build Load" /> </td>
        </tr>
    </table> 
```

在 PartialView 页面中，我有这个：

```
 <tr>
            <td>Comments: @Html.TextBox("comments", comment)</td>
            <td></td>
        </tr>
        <tr>

            <td style="vertical-align: middle;">Booking#:@Html.TextBox("bookNum", bookNum)</td>

            <td><input id="saveOrder" type="button" value="Save Order" onclick="saveOrder(true)" /></td>

        </tr>
        <tr>
            <td style="vertical-align: middle;">Ship Date:@Html.TextBox("shipDate", shipDate)</td>
            <td>
                <input id="Build" type="button" value="Build Load" /></td>
        </tr>
    </table> 
```

然后我正在使用的javascript函数：

```
 function saveOrder(isSave)
{
    var comments = document.getElementById("comments2").value;
    var bookNum = document.getElementById("bookNum2").value;
    var shipDate = document.getElementById("shipDate2").value;

    var itemList = grabSaveItems();
    //alert(itemList.toString());
    var request = $.ajax(
         {
             type: "POST",
             url: "/Home/saveOrder",
             data: "itemList=" + itemList+"&isSave="+isSave+"&comments="+comments+"&bookNum="+bookNum+"&shipDate="+shipDate,
             success: function (itemList) {
             }
         });
    request.done(function () {
        if (isSave == true)
        {
            alert("The Order Was Saved");
        }

    });

    request.fail(function (Check, textStatus) { alert("Request failed: " + textStatus); });
} 
```

因此，根据订单号，我将我需要的信息添加到模型中，然后返回我的 PartialView 以显示我需要的信息。在进行此 ajax 调用后单击“保存订单”时，出现以下运行时错误：Microsoft JScript 运行时错误：未找到成员。这发生在调用保存订单之后，调试器指向该函数之后的行，不确定这意味着什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:42:32.273

好吧，我知道这很愚蠢。当您为输入的 id 分配与您的函数相同的名称时，看起来 Javascript 会变得怪异，因此它不知道该做什么/调用什么。

```
<td><input id="**saveOrder"** type="button" value="Save Order" onclick="**saveOrder**(true)"/></td> 
```

# wolfram-mathematica - MiniMaxApproximation 在 Mathematica 7 中不起作用

> ID：14650207
> 
> 赞同：1
> 
> 时间：2013-02-01T16:00:53.863
> 
> 标签：wolfram-mathematica

我是 Mathematica 的新手，我正在尝试获得某个表达式的极小极大有理函数逼近。特别是，我正在使用

```
mma = MiniMaxApproximation[x^2, {x, {8, 10}, 2, 2}] 
```

不幸的是，Mathematica 7 用我试图计算的相同表达式回复，即

```
MiniMaxApproximation[x^2, {x, {8, 10}, 2, 2}] 
```

当然，我知道这是一个非常简单的测试，因为`x^2`它是自身的有理函数逼近。

我也在尝试其他可能性，如 RationalInterpolation、EconomizedRationalApproximation 等，但没有一个有效。只有 PadeApproximant 返回结果。

任何人都知道为什么会发生这种情况？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:24:33.650

可能您的第一个问题是您尚未加载函数逼近包，启动一个新内核并尝试以下操作：

```
Needs["FunctionApproximations`"]
mma = MiniMaxApproximation[Exp[x], {x, {0, 1}, 1, 2}] 
```

您的具体示例 (x^2) 引发了一系列（对我而言）荒谬的错误。我猜 MiniMaxApproximation 在处理微不足道的退化情况时并不稳健。

* * *

显然要求分子等于您的表达式的顺序会导致错误：

```
a[x_] = MiniMaxApproximation[x^2, {x, {8, 10}, 1, 2}][[2, 1]]
Plot[ {a[x]  , x^2}, {x, -10, 30}] 
```

![在此处输入图像描述](../Images/7b4673b178be825519f49ba9f5ebfeea.png)

# javascript - 使用 JScript 生成 Excel 文件

> ID：14650220
> 
> 赞同：0
> 
> 时间：2013-02-01T16:01:55.863
> 
> 标签：javascript, jscript, wsh

我意识到您只需几行代码就可以使用 JScript/JavaScript 生成 excel 文件。但这让我想知道；为什么从来没有人提到这一点。我在网上看到的只是“使用第三方组件”或“您需要编写一个库”或指向其他涉及大量代码的 MS 文档的链接。

但为什么不直接使用 WSH？它几乎是完美的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:26:19.107

在服务器端使用 excel 组件有时是不可能的（比如服务器是 linux），并且还需要为服务器购买 excel 许可证。也很擅长我不适合经常使用。因为它不能像为此设计的组件那样快，并且需要更多的资源。

对于自己的小任务，可以使用 VBA 和 excel。但如果您打算出售软件，买家可能没有安装 excel。但您可以要求使用安装 excel 以导出到 excel。

# android - Android - 检查设备是否有本机 Facebook 应用程序

> ID：14650223
> 
> 赞同：0
> 
> 时间：2013-02-01T16:02:01.627
> 
> 标签：android, facebook

有可能，从 Facebook SDK，检查设备是否有 Facebook 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:03:55.733

我会使用[PackageManager并使用](http://developer.android.com/reference/android/content/pm/PackageManager.html)[getLauncHintentForPackage](http://developer.android.com/reference/android/content/pm/PackageManager.html#getLaunchIntentForPackage%28java.lang.String%29)方法检查 Facebook 是否有启动意图。您可以为这个方法提供一个包名，对于 facebook，这是`com.facebook.katana`.

# flash - 在 Safari 中的图像查看器下显示 Spry 菜单

> ID：14650224
> 
> 赞同：0
> 
> 时间：2013-02-01T16:02:10.803
> 
> 标签：flash, menu, show, slide, spry

我正在使用 dreamveaver CS3 设计页面，但遇到以下问题：

感谢dreamveaver，我创建了一个带有子菜单的垂直菜单栏，在它旁边我使用了媒体>图像查看器菜单来创建幻灯片。它工作得很好，除了在 Safari（在 Windows 上）中，子菜单隐藏在幻灯片下。

在网上搜索后，我发现有几个人有这个问题，通常的建议是增加子菜单上的 z-index。我试过这样做，但浏览器接缝忽略了这个属性（例如，如果我在谷歌浏览器上查看检查元素，无论如何显示正确，我会找到为该 div 定义的所有其他属性，但不是 z-index）。

我也想减少 flash 文件的 z-index，但我不知道该怎么做。

我将不胜感激任何帮助。

抱歉，danii，显然我是这个论坛的新手，所以我不太知道如何回复你。无论如何，我没有足够的地方将所有代码放在我的评论中给你回答所以这里是：

'/sciences/terre/幻灯片'); //结束AC码 http://macromedia.com/'],frameColor:#333333,bgColor:#FFFFFF,imageCaptions:[]}" /> http://macromedia.com/'],frameColor:#333333, bgColor:#FFFFFF,imageCaptions:[]}" pluginspage="这里是链接到://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" scale="exactfit" flash_component="ImageViewer.swc" wmod="transparent" >

仍然不适用于 safari（至少我的版本是 5.1.2）

我也很难删除自动添加的白色背景，但这会导致代码在其他浏览器中也不起作用。

谢谢，如果你有时间看看这个会很棒。

吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:46:51.667

确保嵌入 swf 电影（flash 对象），参数**wmode**设置为`transparent`. 看看这个以获取更多信息：[Google Chrome、Flash 和 z-index 错误行为](https://stackoverflow.com/questions/4313364/google-chrome-flash-and-z-index-wrong-behaviour)

应该没有必要减少 flash 对象的 z-index（你可以做的是设置包含它的 div 的 z-index），因为无论如何默认都是 0。

# xcode - 我可以将 Xcode 用作简单的文本编辑器吗？

> ID：14650232
> 
> 赞同：5
> 
> 时间：2013-02-01T16:02:43.440
> 
> 标签：xcode, text-editor

好吧......这可能是一个荒谬的问题。（我还在习惯 Mac。）我真的很喜欢 Xcode 的自动预填预测输入功能。

我可以使用它来简单地编辑位于硬盘驱动器上不同位置的文件吗？我真的不想创建一个项目或任何东西（除非**PROJECT**我的意思是*简单地加载几个彼此不相关的文件，但我可能想在编辑它们时来回跳转*- 我不想创建来自需要编译的文件或任何东西的项目）。

如果是这样，最好的开始方式是什么？当您打开 XCode 时，它​​会询问很多向导问题来进行设置。我将如何简单地开始一次编辑 5 个左右的文件......我可能想在它们之间来回切换 - 而且它们不在同一个目录中？

我要做的只是进行更改并保存它们，进行更多更改并再次保存，重复。有点像持有大量相互通信的 shell 脚本。

好吧......所以我知道这是一个愚蠢的问题 - 但 Xcode 对新手来说太吓人了。有时，一个人需要一个开始的地方，而我还没有找到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-06T22:58:19.687

可以从命令行打开单个文件的 Xcode 文本编辑器。

```
open -a Xcode.app filename.txt 
```

如果你打算经常使用它，你可以考虑在你的 ~/.bashrc 中创建一个别名。

```
alias xc="open -a Xcode.app" 
```

从 Xcode 6 开始，您不能以这种方式打开目录，因为它会给您一条错误消息，指出必须将目录作为项目的一部分打开。如果您在命令行上提供了多个文件，Xcode 似乎会创建一个包含您提供的文件的临时项目。您可以将文件和文件夹添加到临时项目中，但似乎没有办法保存临时项目以供以后使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-21T13:35:54.227

如果你想在 Xcode 中打开一个文件，你也可以使用`xed`.

正如手册页所说：

> xed -- Xcode 文本编辑器调用工具。

您只需调用`xed [file]`即可启动 Xcode 编辑器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T16:05:10.400

记事本++是要走的路。Xcode 从未打算用作通用文本编辑器。

编辑：抱歉，不知道 Notepad++ 没有 Mac 端口。请改用 TextWrangler。

# c# - 表达 > 在泛型方法中创建时添加不需要的转换

> ID：14650234
> 
> 赞同：8
> 
> 时间：2013-02-01T16:03:00.700
> 
> 标签：c#, linq, entity-framework, lambda, expression-trees

我有一个函数来生成要在 linq Where 子句中使用的表达式。

```
public static Expression<Func<T,bool>> GetWhereCondition<T>() where T : IActive
{
    return x => x.Active;
} 
```

（注意 IActive 只定义了属性 'Active'）

还有其他相关功能，我的想法是我可以将所需的条件注入通用类来控制业务规则等。

问题是当我运行它时，返回的表达式包含 lamda（从调试器中看到）：

```
x => Convert(x).Active 
```

这当然被 linq 拒绝：“LINQ to Entities 仅支持强制转换实体数据模型原始类型。”

所以我的问题是......

我该如何防止这种行为。没有必要进行转换，显然这是不可取的。甚至有可能防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T16:17:28.610

好吧，假设这只需要使用类（转换用于装箱值类型），您可以添加一个`class`约束：

```
public static Expression<Func<T, bool>> GetWhereCondition<T>() where T : class, IActive
{
    return x => x.Active;
} 
```

...并且转换消失了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T16:07:08.603

尝试这个：

```
public static Expression<Func<T, bool>> GetWhereCondition<T>() where T : IActive
{
    return x => x.Active;
} 
```

# c - c - 更改 char 数组的元素时未定义的行为

> ID：14650237
> 
> 赞同：0
> 
> 时间：2013-02-01T16:03:10.573
> 
> 标签：c

以下代码的第 9 行生成未定义的行为。这是因为它在全球范围`title1[]`之外吗？`main()`还是因为我缺少其他东西？

```
1\. char title1[]="The Name of the Rose";
2\. Book book1={title1,900,0};
3\. int main(){
4\.   Book book2={"Foucault's Pendulum",1000,0};
5\.   Book* book3=(Book*)malloc(sizeof(Book));
6\.   *book3=book2;
7\.   book1.next=&book2;
8\.   book2.next=book3;
9\.   book1.title[0]='B';
10\.  book2.title[0]='A';
11\.  {
12\.    Book list[2];
13\.    list[0]=book1;
14\.    list[1]=book2;
15\.    list[1].next->next=&book2;
16\.    {
17\.      Book* p=&list[0];
18\.      while (p!=0) {
19\.        p=p->next;
20\.    }
21\.  }
22\. return 0;
23.} 
```

编辑：

添加了书籍定义：

```
‫;‪struct Book‬‬
‪typedef struct Book‬ {
‫;‪  char* title‬‬
  int pages;‬‬
‫;‪  struct Book* next‬‬
‫;‪} Book‬‬ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T16:17:20.207

不，第 9 行不是未定义的行为。它写入这个数组：

```
char title1[]="The Name of the Rose"; 
```

这不是字符串文字（但由一个初始化）。这样一个普通的数组可以根据自己的喜好进行修改。如果您像这样声明它会有所不同：

```
char *title1="The Name of the Rose"; 
```

未定义的行为在第 10 行，在这里您正在写入字符串文字，这是不允许的。

顺便说一句，当在这里提出问题时，请将其简化为一个能说明您观点的最小示例。您发布的大多数代码对您的问题完全没有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:10:49.823

您正在尝试修改第 10 行中的字符串文字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:26:31.713

错误发生在第 10 行，因为字符串文字是一个常量，因此是只读的。任何写在上面都会导致错误。

# java - 从Java Android中的图像获取坐标

> ID：14650238
> 
> 赞同：2
> 
> 时间：2013-02-01T16:03:12.010
> 
> 标签：java, android, image, bufferedimage, pixels

我在一个 Android 项目中使用来自 Java 的 BufferedImage。在这个项目中，用户可以选择图像的一小部分。

例如：如果您有一张带有建筑物的公园的图像。用户可以对草进行少量选择，并且 android 程序需要保存此选择的坐标。

我想知道 BufferedImage 中是否有支持此功能的功能：让用户选择图像的一小部分（使用触摸屏）并从图像中的这些位置获取坐标。如果没有，我还能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:56:30.890

您可以将点击的像素位置 (x, y)（即光标位置）存储到*SQLite*数据库中，您不需要存储它周围的所有值。如果您想检查该像素周围的点击（带有容差值），以下代码将帮助您：

```
 int[] xyReceivedPixel = { 15, 20 };
    int[] xyOriginalPixel = { 30, 15 };
    int toleranceValue = 30;

    boolean status = (xyReceivedPixel[0] < xyOriginalPixel[0] + toleranceValue 
            || xyReceivedPixel[0] > xyOriginalPixel[0] - toleranceValue)
            && (xyReceivedPixel[1] < xyOriginalPixel[1] + toleranceValue 
                    || xyReceivedPixel[1] > xyOriginalPixel[1] - toleranceValue);

    System.out.println(status); 
```

这里，`xyOriginalPixel`是存储在数据库中的原始像素点，`xyReceivedPixel`是当再次单击时获得的像素点或要与之比较的像素点。以的最大差值`xyReceivedPixel`检查它是否在附近。`xyOriginalPixel``toleranceValue`

# c++ - 在 Qt 中的图像上拖动一个矩形

> ID：14650240
> 
> 赞同：1
> 
> 时间：2013-02-01T16:03:19.323
> 
> 标签：c++, qt, qt4, qlabel

我想有很多方法可以实现这一点。我有一个应用程序，其中视频流显示在自定义 QWidget 上，我有 QLabel 的子类，并使用 QPainter 绘制帧。鉴于此，是否可以让用户在图像上拖动一个矩形并检索坐标？要求是在拖动过程中矩形必须是可见的。

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:05:00.867

看看[QRubberBand](http://qt-project.org/doc/qt-4.8/qrubberband.html)。它允许您将这样的矩形放置在例如 QLabel 的顶部。该文档还包含一个如何使用鼠标移动和调整橡皮筋大小的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:04:56.223

在您的小部件中，您可以跟踪鼠标按下和释放的事件，并跟踪小部件上选择矩形的角在哪里。为了绘制矩形，我会看一下`QStyle::drawFocusRect`. 我认为这样做的目的是绘制一个您可以看到的矩形，无论它背后是什么。

或者试试这个：

```
QStylePainter painter(this);
QStyleOptionFocusRect option;
option.initFrom(this);
option.backgroundColor = palette().color(QPalette::Background);
painter.drawPrimitive(QStyle::PE_FrameFocusRect, option); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T16:25:30.983

有`QGraphicsView`，`void setRubberBandSelectionMode ( Qt::ItemSelectionMode mode )`但我不知道是否`QLabel`有一些类似的功能......

也许您必须在用户拖动矩形并在 mouserelease 上捕获它时绘制自己的矩形

苏龙仔

# excel - 用于范围更新的 EXCEL vba 子例程传递字母

> ID：14650244
> 
> 赞同：-1
> 
> 时间：2013-02-01T16:03:30.243
> 
> 标签：excel, vba, subroutine

我想缩短这段代码，我知道有可能我只是不知道正确的语法

我想创建一个子程序来更新字体颜色，并通过仅更改第一个单元格字母从 if 语句中调用它

有人介意帮忙吗，所以我可以记住这一点以供将来参考

提前致谢，

编辑：只是为了澄清，我想做这样的事情

```
 If Not Intersect(Target, Range("C3")) Is Nothing Then 'do the following if e3 is updated

'reset all font colors to black
Range("C8:K9,C14:K14,C37:K37").Font.ColorIndex = 1
Range("C7:K7,C11:K11,C13:K13,C23:K23,C28:K28").Font.ColorIndex = 1
Range("C10:K10,C15:K16").Font.ColorIndex = 1
Range("C17:K17").Font.ColorIndex = 1
Range("C18:K18,C33:K33").Font.ColorIndex = 1
Range("C24:K26,C29:K31").Font.ColorIndex = 1
Range("C32:K32").Font.ColorIndex = 1
Range("C36:K36,C38:K38").Font.ColorIndex = 1

    If Range("C3") = "1" Then ' do the following if C3 is 1
         updateFontColor c
    ElseIf Range("C3") = "2" Then ' do the following if C3 is 2
        updateFontColor d
    ElseIf Range("C3") = "3" Then ' do the following if C3 is 3
          updateFontColor e 
    ElseIf Range("C3") = "4" Then ' do the following if C3 is 4
        updateFontColor f

    ElseIf Range("C3") = "5" Then ' do the following if C3 is 5
        updateFontColor g

    ElseIf Range("C3") = "6" Then ' do the following if C3 is 6
              updateFontColor h     
    ElseIf Range("C3") = "7" Then ' do the following if C3 is 7
            updateFontColor i       
    ElseIf Range("C3") = "8" Then ' do the following if C3 is 8
            updateFontColor j       
    ElseIf Range("C3") = "9" Then ' do the following if C3 is 9
           updateFontColor k
               End If
End If

Sub updateFontColor(x As Range)
        Range("x8:K9,x14:x14,x37:K37").Font.ColorIndex = 2
        Range("x7:K7,x11:K11,x13:K13,x23:K23,x28:K28").Font.ColorIndex = 39
        Range("x10:K10,x15:K16").Font.ColorIndex = 35
        Range("x17:K17").Font.ColorIndex = 28
        Range("x18:K18,x33:K33").Font.ColorIndex = 38
        Range("x24:K26,x29:K31").Font.ColorIndex = 36
        Range("x32:K32").Font.ColorIndex = 44
        Range("x36:K36,x38:K38").Font.ColorIndex = 15
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:30:28.867

字符串连接运算符：&

将变量`x`作为字符串传递：

通过传递一个字符串来调用你的子：

```
updateFontColor("K") 
```

子：

```
Sub updateFontColor(x As String) 'pass x as string, not range
    Range(x & "8:K9," & x & "14:K14," & x & "37:K37").Font.ColorIndex = 2
    .
    .
    .
End Sub 
```

# javascript - 我在哪里可以找到适用于 JavaScript 的 RegEx 可视化工具？

> ID：14650247
> 
> 赞同：4
> 
> 时间：2013-02-01T16:03:44.877
> 
> 标签：javascript, regex, debugging, plugins, visualization

我目前正在调试和评论别人的 JavaScript 代码，但其中有一些可怕的 RegEx。虽然我对 RegEx 的了解相当不错，但如果有一个可靠的可视化工具可以将每个 RegEx 字符串显示为铁路图或类似的东西，这将有所帮助。

*   [我在这个问题](https://stackoverflow.com/questions/6547429/regex-syntax-diagram)上找到了一个用于 Java 的 Eclipse 插件，所以我想知道那里是否有类似的 JavaScript 插件。

*   它不一定是插件，但 Notepad++ 的某些东西会是理想的。我通过 Notepad++ 的插件管理器进行了检查，但我可以看到的两个 RegEx 工具不是很好。

*   一个接受表达式并生成图表的网页也可以正常工作，并且可以省去我大量使用 JSFiddle 的麻烦。

有谁知道这样的工具是否存在？或者，如果我遗漏了一些可以使人类解析 RegEx 更容易的技巧？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T16:09:27.773

[Regexpr](http://www.regexper.com/)生成非常漂亮的正则表达式可视化。一个简单的例子：

![来自 regexpr.com 的示例屏幕截图](../Images/f60d43855bdd9e5e86c82b833273c410.png)

还有一个更复杂的正则表达式示例，它尝试匹配 HTML 标签：

![更复杂的截图](../Images/c343c36c7491826541b1ba6f829cb7ed.png) ^(（通过[tutsplus.com](http://net.tutsplus.com/tutorials/other/8-regular-expressions-you-should-know/)）)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T16:12:15.573

请参阅[regex101.com](http://regex101.com/)，其中包括一个测试器和解释器。

![在此处输入图像描述](../Images/4c6c45559b53a745603233fdc7aa15ff.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T16:23:56.397

我将它用于我的所有正则表达式测试：[regexpal.com](http://regexpal.com)

从技术上讲，这不是您要查找的内容（也许请参阅@John Kugelman 的回答），但它可以很好地测试 regEx 并显示相应的有效/无效。使用简单。

**截屏**

![在此处输入图像描述](../Images/f5d4d469a2830dd5bffc4a4d10483ab7.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-06T01:40:36.163

您可以在 www.textpression.com 上试用 Textpression。在开发过程中可以免费下载和使用。它现在并不特别支持 JavaScript，但会在商业版本中支持。

它有一种非常直观的正则表达式可视化方式。

披露：我是作者

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-10T09:38:20.237

想要更多颜色？

[jex.im](https://jex.im/regulex/#!flags=&re=Abc%20(%5Ba-d%5D%2B%3F%7C%5Cd)%24)

在那里你可以得到剪贴板的图像，如

[![例子](../Images/9e161a712298fa9abfa1066f3f9fc06e.png)](https://i.stack.imgur.com/wU1h4.png)

为`Abc ([a-d]+?|\d)$`.

# windows-phone-8 - Windows Phone - 将缩略图预览保存到录制视频的独立存储中

> ID：14650250
> 
> 赞同：1
> 
> 时间：2013-02-01T16:03:47.670
> 
> 标签：windows-phone-8, windows-phone

我有一个应用程序，我希望允许用户录制视频，然后将该视频与代表该视频的图像一起保存到隔离存储中。我从这里的一些示例代码中找出了视频部分：

```
' Set recording state: start recording.
Private Sub StartVideoRecording()
Try
         ...
    App.ViewModel.IsDataLoaded = False

    ' Connect fileSink to captureSource.
    If captureSource.VideoCaptureDevice IsNot Nothing AndAlso captureSource.State = CaptureState.Started Then
        captureSource.Stop()

        ' Connect the input and output of fileSink.
        fileSink.CaptureSource = captureSource
        fileSink.IsolatedStorageFileName = isoVideoFileName
    End If

    ' Begin recording.
    If captureSource.VideoCaptureDevice IsNot Nothing AndAlso captureSource.State = CaptureState.Stopped Then
        captureSource.Start()
    End If

    ' Set the button states and the message.
    UpdateUI(ButtonState.Recording, "Recording...")

Catch e As Exception
    ' If recording fails, display an error.
    Me.Dispatcher.BeginInvoke(Sub() txtDebug.Text = "ERROR: " & e.Message.ToString())
End Try
End Sub

' Set the recording state: stop recording.
Private Sub StopVideoRecording()
Try
    ' Stop recording.
    If captureSource.VideoCaptureDevice IsNot Nothing AndAlso captureSource.State = CaptureState.Started Then
        captureSource.Stop()

        ' Disconnect fileSink.
        fileSink.CaptureSource = Nothing
        fileSink.IsolatedStorageFileName = Nothing

        ' Set the button states and the message.
        UpdateUI(ButtonState.NoChange, "Preparing viewfinder...")

        StartVideoPreview()
    End If
Catch e As Exception
    ' If stop fails, display an error.
    Me.Dispatcher.BeginInvoke(Sub() txtDebug.Text = "ERROR: " & e.Message.ToString())
End Try
End Sub 
```

有没有办法自动从录制的视频中提取缩略图而不强迫用户也拍照？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:00:50.140

您会很高兴知道生成了一个自动缩略图。文件名将具有 .jpg 扩展名。你可以寻找一个独立存储浏览器来查看结果。

# spring-mvc - 将 PropertyEditor 绑定到列表的所有字段？

> ID：14650253
> 
> 赞同：1
> 
> 时间：2013-02-01T16:03:50.493
> 
> 标签：spring-mvc, model-binding, propertyeditor

在我的 Spring 3.1.2 应用程序中，我有一个带有对象列表的表单，这些对象将在表单中呈现为表格。我想将属性编辑器绑定到列表的一个字段，并且还有许多其他字段共享该类型。

我正在尝试使用该[`registerCustomEditor(Class, String, PropertyEditor)`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/validation/DataBinder.html#registerCustomEditor%28java.lang.Class,%20java.lang.String,%20java.beans.PropertyEditor%29)方法进行绑定，但它不起作用。我可以绑定到具有该类的所有字段，但这不符合我的需要。我试过使用`fieldName`and`*.fieldName`作为参数。如何绑定到列表中对象上的所有字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:13:10.930

我在 中写了一些技巧`InitBinder`来查找所有适当的属性并将其添加`PropertyEditor`到每个属性中：

```
@InitBinder("detailForm")
protected void initBinder(WebDataBinder binder, WebRequest request) throws Exception {
    for (String param : request.getParameterMap().keySet()){
        if (param.endsWith("currencyAmount")){
            binder.registerCustomEditor(BigDecimal.class, param, new CurrencyPropertyEditor());
        }
    }

} 
```

# android - Android：我找不到内存泄漏

> ID：14650256
> 
> 赞同：1
> 
> 时间：2013-02-01T16:03:55.770
> 
> 标签：android, eclipse, memory-leaks

我有 2 个活动 Activity A = GameActivity 使用 PhotoTask.class 的一个实例，它扩展了 AsyncTask 并用于拍摄和保存图片。图片保存后，我启动 Activity B = ShareActivity。

当我拍照并且不改变方向时，会调用 Activity B 并且一切正常。然而，如果我改变屏幕的方向来拍照（我从纵向传递到横向），我无法启动 Activity B 并且我有错误。

```
02-01 16:09:36.571: E/AndroidRuntime(13362): FATAL EXCEPTION: main
02-01 16:09:36.571: E/AndroidRuntime(13362): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.kersplatt/com.example.kersplatt.ShareActivity}: android.view.InflateException: Binary XML file line #29: Error inflating class <unknown>
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.os.Looper.loop(Looper.java:130)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.app.ActivityThread.main(ActivityThread.java:3683)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at java.lang.reflect.Method.invokeNative(Native Method)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at java.lang.reflect.Method.invoke(Method.java:507)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:875)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:633)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at dalvik.system.NativeStart.main(Native Method)
02-01 16:09:36.571: E/AndroidRuntime(13362): Caused by: android.view.InflateException: Binary XML file line #29: Error inflating class <unknown>
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.view.LayoutInflater.createView(LayoutInflater.java:518)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:209)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.app.Activity.setContentView(Activity.java:1657)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at com.example.kersplatt.ShareActivity.onCreate(ShareActivity.java:64)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-01 16:09:36.571: E/AndroidRuntime(13362):    ... 11 more
02-01 16:09:36.571: E/AndroidRuntime(13362): Caused by: java.lang.reflect.InvocationTargetException
02-01 16:09:36.571: E/AndroidRuntime(13362):    at java.lang.reflect.Constructor.constructNative(Native Method)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.view.LayoutInflater.createView(LayoutInflater.java:505)
02-01 16:09:36.571: E/AndroidRuntime(13362):    ... 23 more
02-01 16:09:36.571: E/AndroidRuntime(13362): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:460)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.content.res.Resources.loadDrawable(Resources.java:1709)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.widget.ImageView.<init>(ImageView.java:118)
02-01 16:09:36.571: E/AndroidRuntime(13362):    at android.widget.ImageView.<init>(ImageView.java:108)
02-01 16:09:36.571: E/AndroidRuntime(13362):    ... 26 more 
```

我什至在我的代码中用位图图像进行了评论，但仍然有位图错误！

我在清单中添加了 configChanges:orientation，回收了我的 bnitmaps，使用了活动的 WeakReference 而不是活动本身作为 PhotoTask 中的变量，尝试使用 Eclipse 内存分析器查看内存泄漏（[Android：使用 Eclipse 内存分析器检测泄漏](https://stackoverflow.com/questions/14646029/android-detecting-leaks-with-eclipse-memory-analyzer)）但不明白为什么我有这些错误

我真的搜索了很多，我变得非常绝望，所以如果你能帮助我，那就太好了

供您参考，我的代码片段

```
public class ShareActivity extends Activity implements OnClickListener{
    public static final String APP_ID = "477110419013909";
    Facebook facebook = new Facebook(APP_ID);
    AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
    String FILENAME = "AndroidSSO_data";
    SharedPreferences mPrefs;
    Handler mHandler;
    File file;
    byte[] bytes;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        Log.w("SHAREACTIVITY","SECOND");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.share);
        file = (File) this.getIntent().getExtras().get("PICTURE_TAKEN");
        Bitmap bitmap = BitmapFactory.decodeFile(file.getAbsolutePath());
        Bitmap mutableBitmap = bitmap.copy(Bitmap.Config.ARGB_8888, true);
        ImageView image5 = (ImageView) findViewById(R.id.imageView5);
        image5.setImageBitmap(mutableBitmap);
        bitmap.recycle();
        mutableBitmap.recycle();

    } 
```

课堂摄影

```
public class PhotoTask extends AsyncTask<Boolean, Void, Void> {
    private Camera camera;
    private SurfaceView surfaceCamera;
    private boolean isPreview=false;
    private SurfaceHolder holder;
    private WeakReference<GameActivity> weakgameactivity;
    GameActivity gameactivity;
    private File output;

    public PhotoTask(Camera camera, SurfaceView surfaceCamera,boolean isPreview, SurfaceHolder holder, GameActivity gameactivity) {
        super();
        this.camera = camera;
        this.surfaceCamera = surfaceCamera;
        this.isPreview = isPreview;
        this.holder = holder;
        this.weakgameactivity = new WeakReference<GameActivity>(gameactivity);
        this.gameactivity=this.weakgameactivity.get();
    }

    PictureCallback myPictureCallback_JPG = new PictureCallback(){

        @Override
        public void onPictureTaken(byte[] data, Camera camera) {
            Log.w("GAMEACTIVITY","FIRST");
//          ImageView image5 = (ImageView) gameactivity.findViewById(R.id.imageView6);
            File imagesFolder = new File(Environment.getExternalStorageDirectory(), "/KersplattFolder");

            imagesFolder.mkdirs(); 
            SimpleDateFormat dateFormat = new SimpleDateFormat("yyyymmddhhmmss");
            String date = dateFormat.format(new Date());
            String fileName = "Kersplatt_" + date + ".jpg";
            output = new File(imagesFolder, fileName);
            ImageView view = (ImageView) gameactivity.findViewById(R.id.imageView6);
            view.setDrawingCacheEnabled(true);
            Bitmap b = view.getDrawingCache();
            FileOutputStream fos = null;
            try {
                fos = new FileOutputStream(output);
            } catch (FileNotFoundException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            b.compress(CompressFormat.JPEG, 95, fos);
            try {
            fos.write(data);
            fos.close();
            } catch (FileNotFoundException e) {
                    e.printStackTrace();
            }
              catch (IOException e) {
                    e.printStackTrace();
            }
              camera.stopPreview();
              Log.w("GAMEACTIVITY","INTENT");
              b.recycle();
              Intent intent = new Intent(gameactivity.getApplicationContext(),ShareActivity.class);
              // Sending the picture taken to ShareActivity
              intent.putExtra("PICTURE_TAKEN", output);
              gameactivity.startActivity(intent);
        }

    };

    @Override
    protected Void doInBackground(Boolean... params) {
         camera.takePicture(null,null, myPictureCallback_JPG);
            Log.w("GAMEACTIVITY","TAKEPICTURE");
            return null;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T00:06:49.080

有两件事可能发生。

由于您说问题仅在更改方向时发生，这表明您的活动正在记忆中。某些引用（静态的，或者与您的活动生命周期不同步的）可能会阻止 GC 在新的用于更改方向的实例膨胀之前清理旧实例。

其次，您试图将整张照片打入 ImageView。这是一个坏主意，因为照片可能*很大*并且会消耗大量内存。它甚至可能导致没有上述问题的OOME。考虑以较小的样本大小解码位图，[如本例所示](https://stackoverflow.com/a/6410472/154306)。

# wpf - 图像控件在设计中拖动后消失

> ID：14650257
> 
> 赞同：0
> 
> 时间：2013-02-01T16:03:57.300
> 
> 标签：wpf, image

我是 WPF 新手，与 WinForms 不同，我很难在设计窗口中进行设置。

我的第一个障碍是图像控件。在我将它拖到设计窗口中后，它消失了，我无法编辑它的属性（例如使用按钮控件）。进行更改的唯一方法是通过不太直观和直观的 XAML 代码。

有没有办法在设计模式下继续编辑图像控件？（例如，移动它，选择它以查看其属性面板等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:30:32.100

All you should need to do is give the image control a fixed height and width and it should stay in the designer.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T16:20:25.837

XAML 的最佳之处在于它与代码分离，以实现更好的可重用性，如 asp.net。最好学习不同的布局，如grid、wrappanel、stackpanel等。然后，你就会感受到xaml的强大。否则，您可以选择 XAML 构建工具。

[参考链接](http://msdn.microsoft.com/en-us/library/ms745058.aspx)

# c++ - 为什么以及如何读写二进制文件？

> ID：14650259
> 
> 赞同：3
> 
> 时间：2013-02-01T16:04:05.220
> 
> 标签：c++, binary, binaryfiles

我正在编写一个游戏项目作为一种爱好，目前我需要将一些资源数据（例如.BMP）存储为我自己的文件格式，以便我的游戏可以解析所有这些数据并加载到屏幕。

为了读取 BMP，我读取标题，然后读取每个像素的 RGB 数据，并且我有一个存储这些值的数组 [宽度] [高度]。

有人告诉我应该将这些类型的数据保存为二进制，但不是原因。我已经阅读了二进制及其是什么（数据的 0-1 表示），但我为什么要使用它来保存 .BMP 数据？如果我稍后在游戏中阅读它，它不是只会增加更多的复杂性，甚至可能会减慢加载过程吗？

最后，如果最好保存为二进制文件（我猜是这样，从我在其他游戏资源文件中研究的内容来看，每个人似乎都是这样做的）我如何在 C++ 中读写二进制文件？我已经看到了很多问题，但是对于许多不同类型的变量有很多不同的方法，所以我在问哪种方法是最好的/更 C++ 的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T16:14:41.937

你有这一切。计算机处理器处理二进制级别的数据。计算机中的一切都是二进制的。为了以人类可读的形式处理数据，我们编写了一些函数，这些函数可以跳过箍，使二进制数据看起来像人类可以理解的东西。因此，如果您将 .BMP 数据作为文本存储在文件中，您实际上会让计算机做更多的工作来将 .BMP 数据从其自然二进制形式转换为文本，然后再从其文本形式转换回二进制为了显示它。

事实是，您处理原始二进制形式的数据越多，您的代码运行速度就越快。更少的转换意味着更快的代码。但显然有一个折衷：如果您需要能够查看数据并理解它而不需要拿出一个神奇的解码器环，那么您可能希望将它作为文本存储在一个文件中。但在这样做时，我们必须了解必须进行转换处理才能使人类可读的文本对处理器有意义，正如我所说，处理器只对纯二进制数据进行操作。

* * *

而且，以防万一您已经知道或知道它，而您的问题是“为什么我应该以二进制模式而不是文本模式打开我的 .bmp 文件”，那么原因是打开一个文本模式下的文件要求平台根据平台执行必要的 CRLF 到 LF 转换（“\r\n”到-“\n”转换），以便在内部字符串处理级别，所有你正在处理的是 '\n' 字符。如果您的文件包含二进制数据，则您不希望继续进行该转换，否则它会在您读取文件时损坏文件中的数据。在这种状态下，大部分数据都可以正常工作，并且大部分时间都可以正常工作，但有时您会遇到一对十六进制形式的字节 0x0d,0x0a（十进制 13,10），它们将被转换到 0x0a (10), 你会在你读取的数据中丢失一个字节。因此一定要以二进制模式打开二进制文件！

* * *

好的，根据您最近的评论（如下），这是：

正如您（现在？）所了解的那样，计算机中的数据以二进制格式存储。是的，这意味着它在 0 和 1 中。但是，在编程时，您实际上不必自己摆弄 0 和 1，除非出于某种原因您正在执行按位逻辑运算。比如说一个类型的变量，`int`比如说是一个个位的集合，每个位可以是0或者1。它也是一个字节的集合，假设一个字节有8个位，那么一般有2个、 4 或 8 个字节`int`，具体取决于您的平台和编译器选项。但是您将其`int`用作`int`，而不是单独的 0 和 1。如果你这样写`int`以最纯粹的形式输出到文件中，字节（以及位）以未转换的原始形式写出。但是您也可以将它们转换为 ASCII 文本并以这种方式写出来。如果你在`int`屏幕上显示一个，你当然不想看到单独的 0 和 1，所以你以 ASCII 格式打印它，通常解码为十进制数。您可以轻松地`int`以十六进制形式打印它，即使它是相同的数字，结果也会看起来不同。例如，在十进制中，您可能有十进制值 65。同样的十六进制值是 0x41（或者，如果我们知道它是以 16 为基数的，则只有 41）。如果我们以 ASCII 格式显示它，那么相同的值就是字母 'A'（并且只考虑 2,- 4,- 或 8-byte 的低字节`int`，即`char`）。

对于本次讨论的其余部分，忘记我们在讨论一个`int`，现在考虑我们正在讨论一个`char`，或 1 个字节（8 位）。假设我们仍然有相同的值，65，或 0x41，或“A”，但是您想查看它。如果您想将该值发送到文件，您可以将其以原始形式发送，也可以将其转换为文本形式。如果以原始形式发送，它将占用文件中的 8 位（一个字节）。但是，如果您想以文本形式将其写入文件，则将其转换为 ASCII，这取决于您要写入实际值的格式（在本例中为 65），它将占用 1、2 ，或 3 个字节。假设您想用没有填充字符的十进制 ASCII 编写它。然后值 65 将占用 2 个字节：一个用于“6”，一个用于“5”。如果你想以十六进制形式打印它，它仍然需要 2 个字节：一个用于“4”，一个用于“1”，除非你在它前面加上“`char`是值 255（a 的最大值`char`）：如果我们以十进制 ASCII 形式将其写入文件，它将占用 3 个字节。但是，如果我们以十六进制 ASCII 形式写入相同的值，它仍将占用 2 个字节（或 4，如果我们在前面加上“0x”），因为十六进制的值 255 是 0xFF。`char`将此与以原始二进制形式写入 8 位字节 ( ) 进行比较：A`char`占用 1 个字节（根据定义），因此无论其值是什么，它都只会以二进制形式消耗文件的 1 个字节。

# asp.net-mvc - 打破自定义 CSS 复选框的表单中的 MVC 额外隐藏复选框

> ID：14650263
> 
> 赞同：10
> 
> 时间：2013-02-01T16:04:14.240
> 
> 标签：asp.net-mvc, checkbox

我正在尝试自定义我的 ASP.NET MVC 站点中复选框的外观和感觉，使用类似于此处详述的技术：http: [//cssdeck.com/labs/css-checkbox-styles](http://cssdeck.com/labs/css-checkbox-styles)

它们工作得很好，除非放在一个表格中。当使用@Html.CheckBoxFor() 方法时，MVC 添加了一个额外的隐藏复选框，显然是为了确保在未选中复选框时将值提交给表单 POST： [asp.net mvc: 为什么 Html.CheckBox 会生成一个额外的隐藏输入](https://stackoverflow.com/questions/2697299/asp-net-mvc-why-is-html-checkbox-generating-an-additional-hidden-input)

当表单上有额外的隐藏复选框时，我的自定义复选框不起作用。我单击它，但它不会在状态之间切换。如果我删除额外的隐藏复选框，那么它可以工作，但我想我会在提交 POST 时遇到问题。

这是最终的html：

```
<div class="kbcheckbox">
    <input checked="checked" data-val="true" data-val-required="The Approved field is required." id="UserEdit_IsApproved" name="UserEdit.IsApproved" type="checkbox" value="true">
    <input name="UserEdit.IsApproved" type="hidden" value="false">
    <label for="UserEdit_IsApproved"></label></div>
</div> 
```

这是我正在使用的 css（使用 scss）

```
.kbcheckbox {
    width: $checkbox_size;  
    height: $checkbox_size;
    position: relative;

    input[type="checkbox"]{
        visibility: hidden;
    }

    label {
        cursor: pointer;
        position: absolute;
        width: $checkbox_size;
        height: $checkbox_size;
        top: 0;
        left: 0;
        border-radius: $control_corner_radius;
        border: 1px solid $control_border_color;
        /*@include box-shadow(1px, 1px, 1px, 0, $control_border_color, inset);*/ 
        /*@include box-shadow(0px, 1px, 0px, $control_background);*/
        background: white;
    }

    label:after {
        opacity: 0;
        content: '';
        position: absolute;
        width: $checkbox_size * 0.62;
        height: $checkbox_size * 0.25;
        background: transparent;
        top: $checkbox_size * 0.2;
        left: $checkbox_size * 0.1;
        border: 3px solid black;
        border-top: none;
        border-right: none;

        @include transform(rotate(-45deg));
    } 

    label:hover {
        background: darken($control_background, 10%);
    }

    input[type=checkbox]:checked + label:after {
        opacity: 1;
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-28T23:29:04.507

在您的 CSS 中使用以下内容。您希望修改所有元素。

```
input[type = checkbox]:checked ~ label:after {
    opacity: 1;
} 
```

这是[小提琴](http://jsfiddle.net/amitsaxena17/emx7o1Lo/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-13T15:34:49.230

您可以通过在选中复选框以更改 MVC 隐藏字段上的值时连接一个事件来解决此问题，本质上是在不使用 MVC 帮助器的情况下做同样的事情

```
@Html.HiddenFor(model => model.UserEdit.IsApproved, new { @id = "chkIsApproved" }) 
```

这是你的HTML然后

```
<div class="kbcheckbox">
    <input checked="checked" data-val="true" data-val-required="The Approved field is required." id="UserEdit_IsApproved" name="UserEdit.IsApproved" type="checkbox" value="true">
    <label for="UserEdit_IsApproved"></label></div>
</div> 
```

然后只需使用一些 jQuery 将选中的属性与隐藏字段连接起来

```
$('#UserEdit_IsApproved').change(function() {
    $('#chkIsApproved').val($(this).is(':checked'));        
}); 
```

只要 MVC 隐藏字段在某处，该值就会发布到控制器。这是一些额外的工作，但它应该会给你你想要的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-08T00:48:04.663

我的解决方案有点老套，但您可以使用 jQuery 在复选框之前移动所有隐藏字段

```
 $(".checkbox > input[type=checkbox]").each(function( key, checkbox ) {
    var hidden = $(checkbox).siblings("input[type=hidden]");
    $(hidden).insertBefore($(checkbox));
 }); 
```

# ruby - Array#rotate 产生 NoMethod 错误

> ID：14650265
> 
> 赞同：-1
> 
> 时间：2013-02-01T16:04:22.630
> 
> 标签：ruby

> **可能重复：**
> [Ruby 1.8.7 中的 Array#rotate 等效项](https://stackoverflow.com/questions/5270098/arrayrotate-equivalent-in-ruby-1-8-7)

根据 ruby​​-doc.org，我输入的语法应该可以正常工作，但是在 IRB 中运行时会产生 NoMethod 错误。

```
>> a = ["1", "2", "3", "4", "5"]
=> ["1", "2", "3", "4", "5"]
>> a.rotate
NoMethodError: undefined method `rotate' for ["1", "2", "3", "4", "5"]:Array
    from (irb):14 
```

发生此错误的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:14:49.950

它是 Ruby 1.9 的新功能。您必须使用 Ruby 1.8.6 或 1.8.7。

[这是你可以做](https://stackoverflow.com/questions/5270098/arrayrotate-equivalent-in-ruby-1-8-7)的。

# css - CSS 响应式设计 - 居中对齐包含流体 div 的两个 div

> ID：14650270
> 
> 赞同：0
> 
> 时间：2013-02-01T16:04:36.977
> 
> 标签：css, responsive-design, center

我有一个需要做出响应的网站。

我有一个包含 div，它将是流动的，并且在容器中会有浮动的 div，它不能改变大小，但希望它们保持在中心并具有相等的间距。有人有什么想法吗？它们在开始时将排成 3 行，然后将减少到两个，然后是一个。

```
.container {width:100%; text-align:center;}
.qitem{display:block;text-align:left;float:left;width:320px; height:300px}
.qitem:nth-child(odd) {margin-right:1%;margin-left:10%;}
.qitem:nth-child(even){margin-right:10%;margin-left:1%;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:52:22.717

这很好用

```
 .qitem{display: inline-block;text-align:left;float:none;width:320px; height:300px} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T16:09:43.747

如果您的网站当前在线，我建议您不要针对响应式设计等常见问题实施自己的解决方案。使用 CSS 框架为您完成工作，这里有 8 个不错的 css 框架供您选择：

[http://webdesignledger.com/tools/8-useful-responsive-css-frameworks](http://webdesignledger.com/tools/8-useful-responsive-css-frameworks)

如果不能选择使用框架，请查看上一个问题：

[使网站响应的最快方法？](https://stackoverflow.com/questions/9917664/fastest-way-to-make-website-responsive)

# jquery - 正确的语法？jQuery

> ID：14650277
> 
> 赞同：-1
> 
> 时间：2013-02-01T16:05:00.640
> 
> 标签：jquery, arrays, function

我过滤一个数组，并将结果存储在另一个数组中。

然后我想使用 .each() 遍历数组，对每个数组执行各种操作，然后在 html 中显示等。

但是，我坚持如何将数组信息传递给 each() 函数。

到目前为止，我有：

```
$("select[name='album']").change(function() {
    var thisAlbum = $(this).children(":selected").attr("id");

    var result = images_gallery.filter(function(x) {
             return x.album == thisAlbum;
    });

    $('#librarian-page-container-gallery').html(' ');

    Shadowbox.setup("a.gallery", {
        gallery:            "gallery",
    });

    showImages2(result);

});

function showImages2(){
    $.each(result, function(i, image_gallery2){ 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:05:51.423

您应该将功能更改`showImages2(){`为功能`showImages2(result){`。

您缺少该`showImage2`函数的参数。

# android - 如何使用 Qt Necessitas SDK 提出 Android Intent？

> ID：14650280
> 
> 赞同：1
> 
> 时间：2013-02-01T16:05:08.053
> 
> 标签：android, c++, qt, qt-necessitas

我正在使用 C++ 和 Qt Necessitas SDK 开发一个 Android 应用程序。我的应用程序应该加载/保存文件，并且我想使用 Android 操作来处理它（这样我就可以针对 Google Drive 以及 Dropbox 等...）

问题是......我如何从 C++ 提出意图（以及我应该提出哪个意图来共享/导入我的文件）？

基本原理：如何在 Android 上使用 Qt Necessitas 加载和保存文件（自定义 mimetype 或 pdf）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T11:00:26.297

I'm a complete newbie to java and I know nothing of JNI, but apparently this link will explain how to [use the JNI to] use intents in your QT for Android applications: [http://community.kde.org/Necessitas/JNI](http://community.kde.org/Necessitas/JNI)

It looks pretty straightforward, but I'm afraid I don't yet understand what I'm reading enough to give you a better answer to your question.

Sources:

*   groups.google.com/forum/?fromgroups=#!topic/android-qt/U3eHis9mLrg
*   groups.google.com/forum/?fromgroups=#!topic/android-qt/UpgBRz8Imwo

Another option for a some things (opening websites, making phone calls, possibly opening local PDFs and images) would apparently be QDesktopServices::OpenURL() - although that seems to give open-only access (ie, opening the resource but not pulling any data back from it).

I'm interested in this so that I can use the barcode scanner app "ZXING", which has an intent-as-url at [http://zxing.appspot.com/scan](http://zxing.appspot.com/scan) - I don't know what other little secrets are out there...

HTH until someone can give you a better answer

(2 links disabled due to insufficient reputation)

# c# - 从 LookUpID 设置 ComboBox SelectedItem

> ID：14650283
> 
> 赞同：0
> 
> 时间：2013-02-01T16:05:16.577
> 
> 标签：c#

WinForms ：我正在从我的数据库表中加载我的组合框，比如标题（ID，名称）。

```
cbxTitle.DataSource = Se.Titles.ToList();
cbxTitle.ValueMember = "TitleID";
cbxTitle.DisplayMember = "TitleDesc"; 
```

& 我将所选值与客户记录一起保存，

```
customer.TitleID = Convert.ToByte(cbxTitle.SelectedValue.ToString()); 
```

回显时如何向客户显示已保存的标题？请注意，我只获得带有客户记录的 TitleID，而我没有 title.Name。我可以为此使用选定的值吗？请指教。

问候，阿尼尔。

你好，

这就是我想要做的。我不想对我的控件进行数据绑定，我可以遍历 ComBoBox.Items，并且可以使用 ToString() 查看 TitleDesc、TitleID 值。但我无法通过 ValueMember 在集合中找到该项目。

```
foreach (var item in cbxTitle.Items) 
{ 
if (item.ToString() == int(Customer.TitleID)) 
   { cbxTitle.SelectedItem = true; break; } 
} 
```

像这样...请帮忙！

问候，阿尼尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:06:42.377

```
cbxTitle.SelectedValue = customer.TitleID; 
```

# jdbc - 插入选择不起作用

> ID：14650288
> 
> 赞同：3
> 
> 时间：2013-02-01T16:05:23.740
> 
> 标签：jdbc, insert, informix, insert-select

使用 Informix 11.7，我尝试在 select 语句中使用 jdbc 位置参数执行 INSERT SELECT 查询，如下所示：

```
INSERT INTO table1(id, code, label) 
SELECT ?, ?, ? FROM table2
WHERE ... 
```

参数设置如下：

```
 stmt.setString(1, "auniqueid");
 stmt.setString(2, "code");
 stmt.setString(3, "coollabel"); 
```

我收到以下错误：

> 线程“main”java.sql.SQLException 中的异常：发生了语法错误。

当位置参数“？” 放在其他地方它工作正常。我使用 PostgreSQL 没有这个问题。我的查询有什么问题？我使用 Informix JDBC Driver v3.70 JC1。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:14:30.237

您是否期望通过占位符获得指定的列名？如果是这样，那你就一无所有了；您不能将占位符用于查询的结构元素，例如列名或表名。它们只能替换值。如果要动态 SQL 指定列，请使用动态 SQL；创建一个包含内容的字符串：

```
INSERT INTO table1(id, code, label)
    SELECT auniqueid, code, coollabel
      FROM table2
     WHERE ... 
```

并与之合作。

如果这些占位符将是值，那么您将一遍又一遍地插入相同的值，对于查询返回的每一行一次，这通常不是您想要的；您只需使用 VALUES 子句插入一行，其中允许使用占位符：

```
INSERT INTO table1(id, code, label) VALUES(?, ?, ?); 
```

那会很好用。

AFAIK，这种行为符合 SQL 标准。如果它在 PostgreSQL 中的工作方式不同，那么 PostgreSQL 提供了对该标准的扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:57:48.517

警告：我没有使用 Informix 的经验，答案基于一般观察

指定参数时，数据库需要知道每个参数的类型。如果选择列表中出现参数，则数据库无法推断参数的类型。某些数据库可能能够延迟该决定，直到它实际接收到参数，但大多数数据库将需要在解析时知道这一点。这可能是您收到错误的原因。

一些数据库——我不知道这是否适用于 Informix——允许你转换参数。例如：

```
SELECT CAST(? AS VARCHAR(20)), CAST(? AS VARCHAR(10)), CAST(? AS VARCHAR(5)) FROM ... 
```

在这种情况下，数据库将能够推断参数类型并能够正确解析查询。

有了这个，我假设您没有尝试使用参数为选择列表指定列名，因为这是不可能的。

# notepad++ - 如何在记事本++中保存设置

> ID：14650289
> 
> 赞同：15
> 
> 时间：2013-02-01T16:05:27.073
> 
> 标签：notepad++

我安装了记事本++ V 6.2.3。以前从未使用过它。

Windows 7的。

我在安装中采用了所有默认值。打开一个 html 文件，并更改 html 文件的编辑器设置，以便使用设置->首选项没有着色和其他内容。

现在，当我使用 notepad++ 打开另一个 HTML 文件时，我看不到我在那里更改的首选项。仅当我打开进行更改的第一个 HTML 文件时，这些首选项才处于活动状态。

如何保存设置以使其影响 .html 类型的所有文件，而不仅仅是一个文件？

奇怪的是在任何地方都没有保存设置选项。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-05T12:31:48.577

Notepad++ 自动将[设置写入 XML 文件](http://docs.notepad-plus-plus.org/index.php/Configuration_Files)。这些通常位于 C:\Users[user]\AppData\Roaming\Notepad++ 中，这是 Windows 7 的“受保护”区域，需要管理员权限才能编辑。

尝试以管理员身份运行 Notepad++，以便它可以修改其配置文件。编辑快捷方式可能最方便，因此它始终以管理员身份运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-12T15:54:42.913

任何来到这里的人都遇到了同样的麻烦，即您上次设置的首选项似乎*仍然*没有保留在下一个会话中，尽管所有权限似乎都很好——实际保存发生在您**关闭程序**时。

这意味着，如果它崩溃或因重新启动而被强制关闭，您对设置的更改可能会丢失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-04T23:55:53.277

我最终只是直接在“C：”驱动器下而不是在“C：\ Program Files（x86）”下重新安装了Notepad ++，这为我解决了这个问题。我为 Python 3 和 Python 2 编译器安装了快捷方式，因此我可以使用 Notepadd++ 的一个实例来同时使用这两种编译器。

我还应该提到，这是在 Windows 7 Professional 上运行的 Notepad++ v6.8.8。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-11T11:31:04.167

转到以下路径

C:\Users\YourName\AppData\Roaming\Notepad++

编辑文件 \config.xml

```
change the line  
from        <GUIConfig name="RememberLastSession">yes</GUIConfig>
Replace Yes to No
            <GUIConfig name="RememberLastSession">no</GUIConfig> 
```

# ios6 - 基本的 iphone 应用程序和断点错误

> ID：14650291
> 
> 赞同：0
> 
> 时间：2013-02-01T16:05:32.017
> 
> 标签：ios6

我正在尝试学习 ios 编码并尝试制作 foodDiary 应用程序。我使用了空项目文件，然后添加了故事板、视图控制器和表格视图控制器

当我运行我的程序时，tableView 菜单会显示其中的元素，然后当我按下 + 按钮时，会显示一个视图控制器，其中包含一个文本字段和一个按钮。当我输入一些内容并按下按钮时，我的程序会崩溃我得到断点错误，我在这里得到错误：

```
 - (IBAction)addFoodButton:(id)sender {

    NSString *newFood = [addFoodText text];

    [foodTableViewController addFood:newFood];

    [[self presentingViewController] dismissViewControllerAnimated:YES completion:nil]; 
```

}

我的部分编码是：

**DAYfoodTableViewController.h**

```
#import <UIKit/UIKit.h> 
```

@interface DAYfoodTableViewController : UITableViewController

@property (nonatomic, strong) NSMutableArray *foodArray;

-(void) addFood:(NSString *) newFood;

@结尾

**DAYfoodTableViewController.m**

```
 #import "DAYfoodTableViewController.h"
#import "DAYaddFoodViewController.h"
@interface DAYfoodTableViewController ()

@end

@implementation DAYfoodTableViewController
@synthesize foodArray;

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    DAYaddFoodViewController *addFoodViewController = [segue destinationViewController];
    [addFoodViewController setFoodTableViewController:self];
}

-(void) addFood:(NSString *)newFood
{
    [foodArray addObject:newFood];
    [[self tableView] reloadData];
}
- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    foodArray=[[NSMutableArray alloc] initWithObjects:@"Pizza",@"Chips",@"Sandwiches",@"Hot Dogs", nil];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return [foodArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"BasicCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    int rowNumber=[indexPath row];

    NSString *food=[foodArray objectAtIndex:rowNumber];

    [[cell textLabel] setText:food];

    return cell;
}

/*
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}
*/

// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [foodArray removeObjectAtIndex:[indexPath row]  ];

        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade ];

        /*
          or (by asim)

         if (editingStyle == UITableViewCellEditingStyleDelete) {
         [foodArray removeObjectAtIndex:[indexPath row]  ];

         [[self tableView] reloadData];
         }

         */
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
    }   
}

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

@end 
```

**DAYaddFoodTableViewController.h**

```
 #import <UIKit/UIKit.h>
#import "DAYfoodTableViewController.h"
@interface DAYaddFoodViewController : UIViewController

@property (nonatomic, weak) DAYfoodTableViewController *foodTableViewController;

- (IBAction)addFoodButton:(id)sender;

@property (weak, nonatomic) IBOutlet UITextField *addFoodText;

@end 
```

**DAYaddFoodTableView.m**

```
#import "DAYaddFoodViewController.h"

@interface DAYaddFoodViewController ()

@end

@implementation DAYaddFoodViewController

@synthesize foodTableViewController;
@synthesize addFoodText;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)addFoodButton:(id)sender {

    NSString *newFood = [addFoodText text];

    [foodTableViewController addFood:newFood];

    [[self presentingViewController] dismissViewControllerAnimated:YES completion:nil];

}
@end 
```

奇怪的是，当程序崩溃并且我通过模拟器重新运行程序时，它可以完美运行.. 什么可能导致这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:51:05.840

从部分代码清单中可以看出，您没有完成所有必需的任务。您已将初始控制器设置为委托，但未将委托定义为头文件中的属性或在实现文件中合成它。此外，您没有将它添加到第二个控制器，而是试图调用您的第一个控制器的可选方法，并错误地调用它。我认为这就是它崩溃的原因。您使用过的序列，加上通知，可以完成委托可以完成的许多事情。您需要研究通知和序列......它允许您在控制器之间来回传递数据。而且，在您的情况下，您需要这样做。观看适当的 WWDC 视频，并完成一些教程，这些是最好的……[http://www.raywenderlich.com/tutorials](http://www.raywenderlich.com/tutorials)

# android - 从 DialogFragment 打开 Fragment（替换 Dialogs 父级）

> ID：14650298
> 
> 赞同：6
> 
> 时间：2013-02-01T16:05:44.877
> 
> 标签：android, android-fragments, android-dialogfragment

假设我有片段 A，我从中打开一个`DialogFragment`这样的：

```
FragmentActivity fragmentActivity = (FragmentActivity) view.getContext();
FragmentTransaction ft = fragmentActivity.getSupportFragmentManager().beginTransaction();
Fragment prev = fragmentActivity.getSupportFragmentManager().findFragmentByTag("dialog");
if (prev != null) {
  ft.remove(prev);
}
ft.addToBackStack(null);
DialogFragment fragmentDialog = MyDialogFragment.newInstance();
fragmentDialog.show(ft, "dialog"); 
```

在此对话框中，单击（正/中/负）按钮后，我想打开片段 B，它应该替换片段 A。

在 Dialog 的 onClick 方法中，我运行父 Activity 的回调方法：

```
@Override
public void onClick(DialogInterface dialog, int which) {
  switch(which) {
    case DialogInterface.BUTTON_NEUTRAL:
      detailsCallbacks.openMoreDetails(); 
      break;
  }
} 
```

最后我的 Activity 的`openMoreDetails()`方法是这样的：

```
@Override
public void openMoreDetails() {
  Fragment fragmentB = Fragment.newInstance();
  FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
  ft.replace(R.id.fragment_container, fragmentB);
  ft.addToBackStack(null);
  ft.commit();
} 
```

我得到的很奇怪。片段 B 在屏幕上闪烁仅几分之一秒，然后再次被片段 A 替换（覆盖？）。

当我单击向上按钮时，我什至从片段 A 中返回，因此这些事务中没有一个被添加到后台堆栈中。我想显示片段 B，然后在按下向上按钮时返回片段 A。

有可能吗？我的方法有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-22T14:16:01.677

刚刚遇到同样的问题：

片段 A 显示自定义对话框片段。

单击对话框片段的其中一个按钮时，我想删除对话框并显示片段 B。

片段B被展示出来，瞬间消失。我的屏幕再次显示片段 A。

我最初的实现出了什么**问题：**

```
private void onClickInscription() {
    FragmentInscription frag = FragmentInscription.newInstance();
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    ft.replace(R.id.main, frag);
    ft.addToBackStack(null);
    ft.commit();
    dismiss();
} 
```

和**正确**的一个：

```
private void onClickInscription() {
    dismiss();
    FragmentInscription frag = FragmentInscription.newInstance();
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    ft.replace(R.id.main, frag);
    ft.addToBackStack(null);
    ft.commit();
} 
```

因此，请尝试首先在您的对话框中调用dismiss，然后应用`FragmentTransction`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-13T11:23:20.603

我知道自从问题发布以来已经有很长时间了，但是我通过`if(fragmentB.getView != null)`在替换语句之前添加一个来解决它。

它终于不做闪光和消失的事情了。（：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:28:47.750

您不应该从 FragmentA 打开对话框。实现从 FragmentA 到活动的回调，并让活动处理所有片段事务。

# oauth - Disqus：是否可以从外国身份发帖

> ID：14650301
> 
> 赞同：0
> 
> 时间：2013-02-01T16:05:58.760
> 
> 标签：oauth, identity, disqus

我开发 ios-application，我的目标是将 Disqus 评论部署到应用程序。

是否可以发表外国身份的评论？（脸书、推特等）？[我在 Disqus 开发者 google group](https://groups.google.com/forum/?fromgroups=#!topic/disqus-dev/8F6c5QV4aPE)中找到了这篇文章。

另外，我发现了这个例子，它实现了[Disqus](http://www.cocoacontrols.com/platforms/ios/controls/iadisquser)。
但它使用电子邮件和昵称。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:13:17.903

不，API 支持的唯一身份验证是：

1.  Disqus 帐户
2.  单点登录 (SSO)
3.  使用网站所有者的权限（发布未注册的访客评论）

您可以在此处找到更多信息：http: [//disqus.com/api/docs/auth/](http://disqus.com/api/docs/auth/)

# javascript - Javascript / jQuery：如何删除一系列编号的类？

> ID：14650302
> 
> 赞同：2
> 
> 时间：2013-02-01T16:06:03.230
> 
> 标签：javascript, jquery

> **可能重复：**
> [删除所有以某个字符串开头的类](https://stackoverflow.com/questions/57812/remove-all-classes-that-begin-with-a-certain-string)

我有一个脚本，可以将六个类中的一个随机添加到正文中。这些类的编号在 1 到 6 之间，如下所示：

`theme-1`到`theme-6`.

我需要一种干净的方法来删除所有这些。现在我有这个：

```
$('body').removeClass('theme-1');
$('body').removeClass('theme-2');
$('body').removeClass('theme-3');
$('body').removeClass('theme-4');
$('body').removeClass('theme-5');
$('body').removeClass('theme-6'); 
```

但这有点笨拙对吧？有没有办法我可以说“删除 to 之间`theme-1`的任何类`theme-6`”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:07:51.877

您可以使用循环索引来生成类名。

```
classes = ""
for(i=1; i < 7; i++)
   classes += 'theme-' + i + " ";
$('body').removeClass(classes); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:07:52.497

您可以将它们全部合并为一行：

```
$('body').removeClass('theme-1 theme-2 theme-3 theme-4 theme-5 theme-6'); 
```

或者使用循环，但如果类**总是**在 1 到 6 之间，那么循环对个人来说似乎是多余的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:07:27.120

您可以在循环中清除它们，这至少更干净一些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T16:09:40.330

如果你不知道你可能有多少，你应该使用正则表达式：

```
document.body.className = document.body.className.replace(/(^| )theme-\d+( |$)/g, ' '); 
```

* * *

如果您想留在 jQuery API 中，请使用以下命令：

```
$('body').attr('class', function (i, className) {
    return className.replace(/(^| )theme-\d+( |$)/g, ' ');
}); 
```

* * *

如果您在 上没有任何其他类，则`body`可以一举将它们全部删除：

```
$('body').removeClass(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T16:10:02.190

答案[张贴在这里](https://stackoverflow.com/questions/57812/remove-all-classes-that-begin-with-a-certain-string)。来自的代码`Pat`如下：

```
$('body')[0].className.replace(/\theme-.*?\b/g, ''); 
```

但是这个答案`Prestaul`看起来也不错。使用这个功能：

```
function removeClassByPrefix(el, prefix) {
    var regx = new RegExp('\\b' + prefix + '.*?\\b', 'g');
    el.className = el.className.replace(regx, '');
    return el;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T16:11:54.143

```
$('body').removeClass('theme-1 theme-2 theme-3 theme-4 theme-5 theme-6'); 
```

[http://jsfiddle.net/Yms5M/](http://jsfiddle.net/Yms5M/)

# iphone - 如何取消/中止 MKNetworkOperation？

> ID：14650304
> 
> 赞同：0
> 
> 时间：2013-02-01T16:06:18.680
> 
> 标签：iphone, ios, ipad, mknetworkkit

我需要中止 MKNetworkKit 中的网络操作，但在头文件中找不到执行此操作的方法。任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:12:45.390

MKNetworkEngine 有一个方法叫做`- (void) cancelAllOperations;`

您可以在[MKNetworkEngine.h](https://github.com/MugunthKumar/MKNetworkKit/blob/master/MKNetworkKit/MKNetworkEngine.h)文件中看到它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:25:53.303

你可以检查

```
if([op isExecuting]){
[op cancel];
} 
```

其中 op 是 MkNetworkOperation 的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:36:49.553

如果你有网络操作的句柄，你可以调用它的取消。MKNetworkOperation 继承自 NSOperation，检查实现（.m）文件，它覆盖了取消方法。

# html - 你如何匹配文本输入框的大小和最大长度？

> ID：14650306
> 
> 赞同：7
> 
> 时间：2013-02-01T16:06:23.543
> 
> 标签：html, css, forms

你如何匹配文本输入框的大小和最大长度？令人讨厌的是 maxlength 和 size 属性不对齐并且取决于字体使用。

```
 Example input:<input type="text" size="4" maxlength="4" /> 
```

![在此处输入图像描述](../Images/045d07c746009395221f39ba57332502.png)

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T16:11:36.033

我认为它不会匹配，并且很大程度上取决于浏览器。最好的办法是使用 CSS 来设置输入的宽度。

```
<input type="text" maxlength="4" value="1234" />

input {width:30px;} 
```

[http://jsfiddle.net/BqEsd/67/](http://jsfiddle.net/BqEsd/67/)

你也可以想出某种函数来根据字符、字体大小和语言来调整它的大小。例如像这样的东西..

**例子：**

[http://jsfiddle.net/krishollenbeck/ohpy5L95/3/](http://jsfiddle.net/krishollenbeck/ohpy5L95/3/)

# java - Java：我是否有一个有效的正则表达式来消除符号和重命名文件？

> ID：14650309
> 
> 赞同：3
> 
> 时间：2013-02-01T16:06:40.320
> 
> 标签：java, regex

我有一系列链接名称，我试图从中消除特殊字符。从简短的文件浏览来看，我最大的担忧似乎是括号、括号和冒号。`:` `[`在与 SELECT和的转义字符搏斗失败后`(`，我决定排除我想要保留在文件名中的所有内容。

考虑：

```
String foo = inputFilname ;   //SAMPLE DATA: [Phone]_Michigan_billing_(automatic).html
String scrubbed foo = foo.replaceAll("[^a-zA-Z-._]","") ; 
```

预期结果：`Phone_Michigan_billing_automatic.html`

当我放弃它时，我的转义字符正则表达式接近 60 个字符。我在更改策略之前保存的最后一个版本是`[:.(\\[)|(\\()|(\\))|(\\])]`我*认为*我要求的地方`escape-character-[()`和`]`.

毯子排除似乎工作得很好。正则表达式真的那么简单吗？关于这个策略的有效性有什么意见吗？我觉得我错过了一些东西，需要几双眼睛。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:53:51.403

在我看来，您在这项工作中使用了错误的工具。 [StringUtils 有一个名为 replaceChars 的方法](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#replaceChars%28java.lang.String,%20java.lang.String,%20java.lang.String%29)，它将用另一个字符替换所有出现的字符。这是文档：

```
public static String replaceChars(String str,
                              String searchChars,
                              String replaceChars)

Replaces multiple characters in a String in one go. This method can also be used to delete characters.

For example:
replaceChars("hello", "ho", "jy") = jelly.

A null string input returns null. An empty ("") string input returns an empty string. A null or empty set of search characters returns the input string.

The length of the search characters should normally equal the length of the replace characters. If the search characters is longer, then the extra search characters are deleted. If the search characters is shorter, then the extra replace characters are ignored.

 StringUtils.replaceChars(null, *, *)           = null
 StringUtils.replaceChars("", *, *)             = ""
 StringUtils.replaceChars("abc", null, *)       = "abc"
 StringUtils.replaceChars("abc", "", *)         = "abc"
 StringUtils.replaceChars("abc", "b", null)     = "ac"
 StringUtils.replaceChars("abc", "b", "")       = "ac"
 StringUtils.replaceChars("abcba", "bc", "yz")  = "ayzya"
 StringUtils.replaceChars("abcba", "bc", "y")   = "ayya"
 StringUtils.replaceChars("abcba", "bc", "yzx") = "ayzya" 
```

所以在你的例子中：

```
 String translated = StringUtils.replaceChars("[Phone]_Michigan_billing_(automatic).html", "[]():", null);
    System.out.println(translated); 
```

将输出：

> Phone_Michigan_billing_automatic.html

这将比您可以编写的任何正则表达式更直接和更容易理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:44:01.760

我认为您的正则表达式可以简单到`\W`匹配所有不是单词字符（字母、数字和下划线）的内容。这是否定的`\w`

所以你的代码变成：

```
foo.replaceAll("\W",""); 
```

**正如评论中指出的那样，上面还删除了句点，这也将有助于保留句点：**

```
foo.replaceAll("[^\w.]",""); 
```

细节：转义所有**不是**的东西（`^`字符类内部）、**数字、下划线、字母**（ the `\w`）或**句**点（ the `\.`）

如上所述，您可能希望将其他字符列入白名单：例如`-`. 只需将它们包含在您的角色类中即可。

```
foo.replaceAll("[^\w.\-]",""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T19:51:06.800

我认为你的正则表达式是要走的路。一般来说，白名单值而不是黑名单几乎总是更好。（只允许你知道好的字符而不是消除你认为不好的所有字符）从安全的角度来看，这个正则表达式应该是首选。你永远不会得到一个包含无效字符的 inputFilename 。

```
suggested regex: [^a-zA-Z-._] 
```

# c# - 如何从 KendoUI 绑定过滤器？

> ID：14650311
> 
> 赞同：-1
> 
> 时间：2013-02-01T16:06:41.110
> 
> 标签：c#, asp.net-mvc

我从 kendoUI 得到 queryString：

```
[0] "take"  string
[1] "skip"  string
[2] "page"  string
[3] "pageSize"  string
[4] "filter[logic]" string
[5] "filter[filters][0][value]" string
[6] "filter[filters][0][operator]"  string
[7] "filter[filters][0][field]" string
[8] "filter[filters][0][ignoreCase]"    string 
```

这个在模型中如何绑定？

很感兴趣的是`filter[filters][0] [value]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:53:23.573

[http://www.itq.nl/blogs/post/Kendo-UI-Grid-with-server-paging-filtering-and-sorting-(with-MVC3).aspx](http://www.itq.nl/blogs/post/Kendo-UI-Grid-with-server-paging-filtering-and-sorting-(with-MVC3).aspx)这是我的问题的解决方案

楷模：

```
public class SortDescription
    {
        public string field { get; set; }
        public string dir { get; set; }
    }

public class FilterContainer
    {
        public List<FilterDescription> filters { get; set; }
        public string logic { get; set; }
    }

public class FilterDescription
    {
        public string @operator { get; set; }
        public string field { get; set; }
        public string value { get; set; }
    } 
```

数据源：

```
dataSource: {
                type: "json",
                serverPaging: true,
                serverSorting: true,
                serverFiltering: true,
                allowUnsort: true,
                pageSize: 10,
                transport: { 
                    read: { 
                        url: "Export/PagedData",
                        type: "POST",
                        dataType: "json",
                        contentType: "application/json; charset=utf-8"
                    },
                    parameterMap: function(options) {
                        return JSON.stringify(options);
                    }
                },
                schema: { data: "Items", total: "TotalItemCount" }
            }, 
```

# javascript - 从javascript调用对象标签上的svg文件内的函数

> ID：14650315
> 
> 赞同：0
> 
> 时间：2013-02-01T16:06:56.013
> 
> 标签：javascript, svg

在我的 HTML 页面中，我得到：

```
<script language="JavaScript">
  function mostrar(blo) {
   var str = "";
   ...
   window.document.tbl27svg.pinta(str);
} 
```

在同一个html页面的某个地方，我有：

```
<object id="tbl27svg" data="../../imagenes/svg/tbl27.svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1100px" height="1000px" type="image/svg+xml"/> 
```

在文件 tbl27.svg 我需要调用一个函数：

```
parent.pinta=pinta

function inicia(event){
    SVGDocument = event.target.ownerDocument;                                  
}       

    function pinta(strSVG){
    var nuevoNodo=parseXML(strSVG, document);
    if(document.getElementById('grafico1').childNodes.length>0){
        if(!document.getElementById('grafico2').childNodes.length>0)
            SVGDocument.getElementById("grafico2").appendChild(nuevoNodo);
    }else{
        SVGDocument.getElementById("grafico1").appendChild(nuevoNodo);
    }
} 
```

所以，我尝试了几种方法来调用 tbl27.svg 文件上的 pinta() 函数。但我总是收到一个 java 脚本错误：“对象不支持此属性或方法”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:17:19.670

确保在`pinta()`函数声明之前放置`window.document.tbl27svg.pinta(str);`：

```
<script>
  function pinta(){
    ...
  }

  function mostrar(blo) {
    var str = "";
    ...
    window.document.tbl27svg.pinta(str);
  }
</script> 
```

# magento - 重新排列产品块

> ID：14650320
> 
> 赞同：0
> 
> 时间：2013-02-01T16:07:09.457
> 
> 标签：magento, magento-1.7

我有 3 个问题，我的正常谷歌搜索工作没有回答。我是一名内部前端 Web 开发人员，过去两周一直在尝试学习 Magento。我也是在 Stack Overflow 上发帖的新手，所以让我知道这些是否会更好地发布为单独的问题或其他内容。

**1\. 布局 - 使每个页面都使用相同的布局**

所以我的大部分页面都使用我的 2columns-left 布局，但不是全部。我在我的 local.xml 中有一些设置，还有一些我只是直接在 .phtml 页面中硬编码。我原以为以下代码会使所有页面使用相同的布局：

```
<reference name="root">
    <action method="setTemplate"><template>page/2columns-left.phtml</template></action>
    <action method="setIsHandle">
        <applied>1</applied>
    </action>  
</reference> 
```

当我在网站上工作时，我通常看不到很多页面，它们都使用默认的 Magento 布局，例如启用 /cookies 的页面或评论页面。如果您想在整个站点上使用相同的布局，而不是在 local.xml 中为每个页面设置这样的块，那么统一所有页面的最佳做法是什么？

**2\. 联系我们表格 - 点击提交按钮不起作用**

我正在编辑 CMS>Pages 下的联系我们页面，我想我可能错过了我的表单操作指向的文件。表格出现了，但没有提交。
这是我在联系我们 CMS 页面上的内容：

```
{{block type='core/template' name='contactForm' form_action="/contacts/index/post/"     template='contacts/form.phtml'}} 
```

这是单击提交按钮后出现的错误：

```
Not Found

The requested URL /contacts/index/post/ was not found on this server. 
```

我已经完成了配置设置，我认为这些是正确的，但也许我还有其他事情要做。

**3\. 产品评论 - 获得“总体”评级以显示**

在您登录并添加评论后，我的产品页面上显示了使用 form.phtml 的评论 div，但未显示评级。我显然不满足控制是否应显示评级的 if 语句的条件。下面是我相信它被抓住的 if 语句：

```
<?php if( $this->getRatings() && $this->getRatings()->getSize()): ?> 
```

我不确定如何满足这些条件。

**4\. 重新排列块 - 使用 local.xml 重新排列块的去向**

在我开始养成坏习惯之前，我想确保我从一开始就使用最佳实践。我通常只是进入模板文件并手动移动内容出现在 phtml 中的位置，但我听说最好在 XML 中进行这些更改。我似乎无法弄清楚的一个特殊问题是一个看似简单的问题：**如何使“继续结帐”按钮移动到购物车的底部？**

我正在尝试取消设置它，然后在其他块之后重新设置它。我什至无法让 unsetChild 部分工作。这是我来自 local.xml 的代码：

```
<reference name="content">
    <action method="unsetChild">
        <name>checkout.cart.top_methods</name>
    </action>
</reference> 
```

我认为这不起作用的原因是因为在 checkout.xml 中它是孩子的​​孩子。这是 checkout.xml 的一般流程：

```
<checkout_cart_index>
    <reference name="content">
        <block name="checkout.cart">
            **<block name="checkout.cart.top_methods">** 
```

有任何想法吗？非常感谢，对这篇文章的长度感到抱歉！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:03:08.757

1°) 编辑所有布局 xml 以将根引用的布局更改为 2columns-leftf.phtml 模板

你也可以通过观察者。观察 controller_action_layout_generate_blocks_after 事件并在您的方法中执行：

```
public function myEventHandling($event) {
    $event->getAction()->getLayout()->getBlock('root')->setTemplate('page/2columns-left.phtml');
} 
```

2°）模块联系人控制器索引操作 postAction() 所以它应该是 /contacts/index/post/ 所以它应该工作。除非您让您的 CMS 页面替换 /contacts/ 正常行为（模块联系人控制器索引操作 indexAction() ），否则它将在您的 cms 页面而不是联系人模块中搜索。如果您的 CMS 页面有联系人作为 url，请尝试更改它。

3°）你能更精确吗？我真的不明白你需要什么。表格或现有评级未显示？

4°) UnsetChild 或 remove 指令是全局的，您必须在替换后将其设置为不同的名称。但是您可以在模板目录中编辑布局文件（而不是 base/default/layout 目录中的那些）以将块移动到正确的位置，然后在 phtml 文件中尝试移动

```
 echo $this->getChildHtml('myblock') 
```

在适当的位置。

# lua - 如何在 Lua 中获取表的第 x 个键

> ID：14650321
> 
> 赞同：0
> 
> 时间：2013-02-01T16:07:11.110
> 
> 标签：lua

我在 Lua 中有 2 个函数，它们创建一个字典表并允许检查一个单词是否存在：

```
local dictTable = {}
local dictTableSize = 0

function buildDictionary()
    local path = system.pathForFile("wordlist.txt")
    local file = io.open( path, "r")
    if file then
        for line in file:lines() do
            dictTable[line] = true
            dictTableSize = dictTableSize + 1
        end      
        io.close(file)
    end
end

function checkWord(word)
    if dictTable[word] then
        return(true)
    else
        return(false)
    end
end 
```

现在我希望能够生成几个随机单词。但是由于单词是关键，给定 dictTableSize，我该如何选择一些。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:31:43.570

可能有两种方法：您可以使用单词保留*数组*，并且只`words[math.random(#words)]`在需要选择一个随机单词时执行（只需确保第二个与第一个不同）。

另一种方法是使用`next`您需要的次数：

```
function findNth(t, n)
  local val = next(t)
  for i = 2, n do val = next(t, val) end
  return val
end 
```

这将返回`b`（`findNth({a = true, b = true, c = true}, 3)`订单未定义）。

[您可以通过记忆](http://www.lua.org/pil/17.1.html)结果来避免重复扫描（此时您最好使用第一种方式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:26:07.693

只需在加载字典时为每个单词添加一个数字索引：

```
function buildDictionary()
    local path = system.pathForFile("wordlist.txt")
    local file = io.open( path, "r")
    if file then
        local index = 1
        for line in file:lines() do
            dictTable[line] = true
            dictTable[index] = line
            index = index + 1
        end      
        io.close(file)
    end
end 
```

现在你可以得到一个像这样的随机词：

```
function randomWord()
    return dictTable[math.random(1,#dictTable)]
end 
```

* * *

旁注：`nil`在 Lua 条件下计算为假，所以你*可以这样*写`checkWord`：

```
function checkWord(word)
    return dictTable[word]
end 
```

* * *

另一个注意事项，如果将字典功能包装到一个对象中，则全局命名空间的污染会更少：

```
local dictionary = { words = {} }

function dictionary:load()
    local path = system.pathForFile('wordlist.txt')
    local file = io.open( path, 'r')
    if file then
        local index = 1
        for line in file:lines() do
            self.words[line] = true
            self.words[index] = line
            index = index + 1
        end      
        io.close(file)
    end
end

function dictionary:checkWord(word)
    return self.words[word]
end

function dictionary:randomWord()
    return self.words[math.random(1,#self.words)]
end 
```

然后你可以说：

```
dictionary:load()
dictionary:checkWord('foobar')
dictionary:randomWord() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T17:34:39.097

这是您按照自己的方式使用单词表的一种权衡。一旦你加载它，我会反转单词表，这样你也可以通过索引获得对单词的引用，如果你必须的话。像这样的东西：

```
-- mimic your dictionary structure
local t = {
    ["asdf"] = true, ["wer"] = true, ["iweir"] = true, ["erer"] = true
}

-- function to invert your word table
function invert(tbl)
    local t = {}
    for k,_ in pairs(tbl) do
        table.insert(t, k)
    end
    return t
end

-- now the code to grab random words
local idx1, idx2 = math.random(dictTableSize), math.random(dictTableSize)
local new_t = invert(t)
local word1, word2 = new_t[idx1], new_t[idx2]
-- word1 and word2 now have random words from your 'dictTable' 
```

# c# - 带有 SeparatorTemplate 的中继器控制

> ID：14650329
> 
> 赞同：1
> 
> 时间：2013-02-01T16:07:41.947
> 
> 标签：c#, asp.net, templates, separator

如何在中继器控件的每一行之后创建水平线？我认为我应该使用“SeparatorTemplate”，我试过但没有奏效。你能告诉我将分隔符放在代码中的哪个位置，以使每一行分开吗？

这是我的代码

```
<asp:Repeater ID="EmployeesRepeater" runat="server">
        <HeaderTemplate>
            <table>
                <tr>
                    <th>
                       First Name
                    </th>
                    <th>
                        Last Name
                    </th>
                    <th>
                        Title
                    </th>
                    <th>
                        HomePhone
                    </th>
                </tr>           
        </HeaderTemplate>
        <ItemTemplate>
                <tr>
                    <td>
                        <%#Eval("FirstName") %>
                    </td>
                    <td>
                        <%#Eval("LastName") %>
                    </td>
                    <td>
                        <%#Eval("Title") %>
                    </td>
                    <td>
                        <%#Eval("HomePhone") %>
                    </td>
                </tr>
        </ItemTemplate>
        <FooterTemplate>
            </table>    
        </FooterTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:26:47.097

你可以`<hr>`在你的`ItemTemplate`.

例如：

```
<ItemTemplate>
    <tr>
        <td>
            <%#Eval("FirstName") %>
        </td>
        <td>
            <%#Eval("LastName") %>
        </td>
        <td>
            <%#Eval("Title") %>
        </td>
        <td>
            <%#Eval("HomePhone") %>
        </td>
    </tr>
    <tr>
        <td colspan="4"><hr></td>
    </tr>
</ItemTemplate> 
```

或使用`SeparatorTemplate`：

```
<SeparatorTemplate>
    <tr>
        <td colspan="4"><hr></td>
    </tr>
</SeparatorTemplate> 
```

这是一些关于如何工作的[文档](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.separatortemplate.aspx)`SeperatorTemplate`。

**编辑：** 当`SeparatorTemplate`您需要进行摘要格式化或需要更多 HTML、控件、绑定等的东西时，这非常有用。如果您只是在寻找添加行，您应该只使用 css 来适当地设置行的样式以获得所需的输出.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:31:27.077

如果为`tr`元素设置适当的样式就足够了。无需为添加分隔符而创建额外的行。

例如：

```
<ItemTemplate>
    <tr class="item">
   ....

style
{
    .item {
        border-bottom:1px solid #cfcfcf;
     }
} 
```

# javascript - 如何在 javascript 中创建一个简单的搜索功能？

> ID：14650333
> 
> 赞同：0
> 
> 时间：2013-02-01T16:07:47.713
> 
> 标签：javascript, jquery

我从一小部分学校开始，然后我想测试输入的值是否与其中一所学校匹配。到目前为止，这是我的代码：

```
 var $schools = [
     'University of Tennessee-Knoxville',
     'Maryville College',
     'Cleveland State Community College',
     'East Tennessee State University'
    ];   
    var $searchBar = $('input.searchBar');
    $searchBar.keyup(function(){
         var $searchValue = $searchBar.val();
         for (var x = 0; x < $schools.length; x++) {
             var $schoolLC = $schools[x].toLowerCase();
             var $searchLC = $searchValue.toLowerCase();
             var $searchingValue = new RegExp('.*' + $searchLC + '.*');
             if ($schoolLC.match($searchingValue)) {
                 console.log($searchLC);
             }
         }
     }); 
```

但显然有些地方是错误的（我相信我的 RegExp），因为它从不控制台记录 $searchLC。

非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:11:04.650

这不是

```
if ($searchLC.match($searchingValue)) { 
```

应该是

```
if ($schoolLC.match($searchingValue)) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:10:49.357

我认为您需要转义所有 RegEx 特殊字符：

```
function escapeRegExp(str) {
  return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
}

...
var $searchingValue = new RegExp('.*' + escapeRegExp($searchLC) + '.*');
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T16:16:34.037

试试这个：[现场演示](http://jsfiddle.net/Ms6V3/)

```
for (var x = 0; x < $schools.length; x++) {
    var $schoolLC = $schools[x].toLowerCase();
    var $searchLC = $searchValue.toLowerCase();
    var $searchingValue = new RegExp('.*' + $searchLC + '.*');
    if ($schoolLC.match($searchingValue)) {
        alert($schoolLC);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T16:19:14.603

好吧，对于这个特定的示例，您可以使用 indexOf 而不是使用 match，以便您的代码变为

```
var $schools = [
 'University of Tennessee-Knoxville',
 'Maryville College',
 'Cleveland State Community College',
 'East Tennessee State University'
];   
var $searchBar = $('input.searchBar');
$searchBar.keyup(function(){
     var $searchValue = $searchBar.val();
     for (var x = 0; x < $schools.length; x++) {
         var $schoolLC = $schools[x].toLowerCase();
         var $searchLC = $searchValue.toLowerCase();
         if ($schoolLC.indexOf($searchLC) >= 0) {
             console.log($searchLC);
         }
     }
 }); 
```

# java - 在 jsf 项目中引用来自另一个 java 项目的包

> ID：14650334
> 
> 赞同：0
> 
> 时间：2013-02-01T16:07:48.567
> 
> 标签：java, jsf, tomcat

我正在做一个 JSF 项目。还有另一个项目有很多我想使用的具有某些功能的包，但是当我在我的 jsf 项目中添加这些包的引用时，它停止工作。当我删除这些引用时，它会起作用。我读过你不能用 java 引用另一个项目中的另一个项目包。这是真的吗？

有什么解决办法吗？

# spring - 在 Spring/JSP 中导出到 Excel JQGrid 数据

> ID：14650335
> 
> 赞同：3
> 
> 时间：2013-02-01T16:07:49.973
> 
> 标签：spring, excel, jsp, jqgrid

我正在使用 Spring 3.0、JSP、Tiles 开发一个 Web 应用程序。在其中一个 JSP 页面上，我必须使用 JQgrid 显示一些数据，并且我必须提供一个按钮以方便用户将 JQgrid 中的数据导出到 Excel 工作表。

我已经成功创建了 JQgrid 并且能够显示数据。

我想知道如何在单击按钮时实现“导出到 Excel”功能。我尝试寻找几种解决方案，但找不到任何具体的解决方案。

我的处理程序代码：

```
@RequestMapping(method = RequestMethod.POST, value = "/workQueue") 
@ResponseBody   
public JqgridResponse loadXXXXXX(@RequestParam int page, @RequestParam int rows, @RequestParam String sidx, @RequestParam String sord){

    List<ReferralCase> referrals = XXXXService.getReferralCases();

    int endLimit = page * rows;
    int startLimit = endLimit - rows;
    if (endLimit > referrals.size()) {
        endLimit = referrals.size();
    }
    JqgridResponse response = new JqgridResponse();
    response.setRows(referrals.subList(startLimit, endLimit));
    response.setPage(page);
    response.setRecords(referrals.size());
    response.setTotal((referrals.size() / rows) + 1);
    return response;
} 
```

我的 JSP/JS 代码：

```
 $("#XXXXWorkQueueGrid").jqGrid({
    url:contextRoot+'/dart/workQueue',
    datatype: 'json',
    mtype: 'POST',
    colNames: ['ID','Created','Last Name','First Name','A1','A2','Status','Updated','Workflow'],
    colModel: [
               { name: 'recordId', index: 'recordId', width: 30 },
               { name: 'creationDate', index: 'creationDate', width: 40 },                   
               { name: 'lastName', index: 'lastName', width: 60 },
               { name: 'firstName', index: 'firstName', width: 60 },
               { name: 'A1', index: 'A1', width: 25 },
               { name: 'A2', index: 'A2', width: 25 },
               { name: 'status', index: 'status', width: 40 },
               { name: 'updateDate', index: 'updateDate', width: 40 },
               { name: 'workflow', index: 'workflow', width: 90 }
    ],onPaging: function() {
        $(this).setGridParam({datatype: 'json'}).triggerHandler("reloadGrid");
    },loadComplete: function() {
        $(this).setGridParam({datatype: 'json'}).triggerHandler("reloadGrid");
    },loadError: function(xhr,st,err) {
        alert(err);
    },onSelectRow : function(rowid, status, e) {
        var selRow = $(this).getGridParam("selrow");
        var selRecordId = $(this).getCell(selRow, 'recordId');
        window.location = (contextRoot+"XXXX/referralDetails?recId=" + selRecordId );            
    },
    pager: '#XXXXWorkQueuePager',
    jsonReader: {
        repeatitems: false,
        root: "rows",
        page: "page",
        total: "total",
        records: "records"
    },
    sortorder: "asc",
    sortname: 'recordId',
    gridview: true,
    viewrecords: true,
    hoverrows : false,
    autowidth: true,
    height: 'auto',
    rowNum: 12,
    forceFit: true,
    altRows:true
});
$("#XXXXXWorkQueueGrid").jqGrid('navGrid','#XXXXXWorkQueuePager',{edit:false, add:false, del:false, search:false}); 
```

});

JqgridResponse 只是我创建的一个自定义 DAO 类。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T17:31:46.577

[您可以使用Apache POI](http://poi.apache.org/)生成新的 Excel 文件并使用 Spring`AbstractExcelView`使其可下载。只需按照[这个教程](http://www.mkyong.com/spring-mvc/spring-mvc-export-data-to-excel-file-via-abstractexcelview/)来设置一切。

# python - 熊猫面板中的布尔掩码

> ID：14650341
> 
> 赞同：6
> 
> 时间：2013-02-01T16:07:53.620
> 
> 标签：python, panel, pandas, mask

我在屏蔽面板时遇到了一些问题，就像我使用 DataFrame 一样。我想做的事情感觉很简单，但我还没有找到查看文档和在线论坛的方法。我在下面有一个简单的例子：

```
import pandas
import numpy as np
import datetime
start_date = datetime.datetime(2009,3,1,6,29,59)
r = pandas.date_range(start_date, periods=12)
cols_1 = ['AAPL', 'AAPL', 'GOOG', 'GOOG', 'GS', 'GS']
cols_2 = ['close', 'rate', 'close', 'rate', 'close', 'rate']
dat = np.random.randn(12, 6)

dftst = pandas.DataFrame(dat, columns=pandas.MultiIndex.from_arrays([cols_1, cols_2], names=['ticker','field']), index=r)
pn = dftst.T.to_panel().transpose(2,0,1)
print pn

Out[14]: 
<class 'pandas.core.panel.Panel'>
Dimensions: 2 (items) x 12 (major_axis) x 3 (minor_axis)
Items axis: close to rate
Major_axis axis: 2009-03-01 06:29:59 to 2009-03-12 06:29:59
Minor_axis axis: AAPL to GS 
```

我现在有一个 Panel 对象，如果我沿项目轴取一个切片，我会得到一个 DataFrame

```
close_p = pn['close']
print close_p

Out[16]: 
ticker                   AAPL      GOOG        GS
2009-03-01 06:29:59 -0.082203 -0.286354  1.227193
2009-03-02 06:29:59  0.340005 -0.688933 -1.505137
2009-03-03 06:29:59 -0.525567  0.321858 -0.035047
2009-03-04 06:29:59 -0.123549 -0.841781 -0.616523
2009-03-05 06:29:59 -0.407504  0.188372  1.311262
2009-03-06 06:29:59  0.272883  0.817179  0.584664
2009-03-07 06:29:59 -1.767227  1.168876  0.443096
2009-03-08 06:29:59 -0.685501 -0.534373 -0.063906
2009-03-09 06:29:59  0.851820  0.068740  0.566537
2009-03-10 06:29:59  0.390678 -0.012422 -0.152375
2009-03-11 06:29:59 -0.985585 -0.917705 -0.585091
2009-03-12 06:29:59  0.067498 -0.764343  0.497270 
```

我可以通过两种方式过滤这些数据：

1）我创建一个掩码并将数据掩码如下：

```
msk = close_p > 0
close_p = close_p.mask(msk) 
```

2）我可以通过上面 msk 中的布尔运算符切片

```
close_p = close_p[close_p > 0]
Out[28]: 
ticker                   AAPL      GOOG        GS
2009-03-01 06:29:59       NaN       NaN  1.227193
2009-03-02 06:29:59  0.340005       NaN       NaN
2009-03-03 06:29:59       NaN  0.321858       NaN
2009-03-04 06:29:59       NaN       NaN       NaN
2009-03-05 06:29:59       NaN  0.188372  1.311262
2009-03-06 06:29:59  0.272883  0.817179  0.584664
2009-03-07 06:29:59       NaN  1.168876  0.443096
2009-03-08 06:29:59       NaN       NaN       NaN
2009-03-09 06:29:59  0.851820  0.068740  0.566537
2009-03-10 06:29:59  0.390678       NaN       NaN
2009-03-11 06:29:59       NaN       NaN       NaN
2009-03-12 06:29:59  0.067498       NaN  0.497270 
```

我不知道该怎么做是根据没有 for 循环的掩码过滤我的所有数据。我可以执行以下操作：

```
msk = (pn['rate'] > 0) & (pn['close'] > 0)
def mask_panel(pan, msk):
    for item in pan.items:
        pan[item] = pan[item].mask(msk)
    return pan
print pn['close']

Out[32]: 
ticker                   AAPL      GOOG        GS
2009-03-01 06:29:59 -0.082203 -0.286354  1.227193
2009-03-02 06:29:59  0.340005 -0.688933 -1.505137
2009-03-03 06:29:59 -0.525567  0.321858 -0.035047
2009-03-04 06:29:59 -0.123549 -0.841781 -0.616523
2009-03-05 06:29:59 -0.407504  0.188372  1.311262
2009-03-06 06:29:59  0.272883  0.817179  0.584664
2009-03-07 06:29:59 -1.767227  1.168876  0.443096
2009-03-08 06:29:59 -0.685501 -0.534373 -0.063906
2009-03-09 06:29:59  0.851820  0.068740  0.566537
2009-03-10 06:29:59  0.390678 -0.012422 -0.152375
2009-03-11 06:29:59 -0.985585 -0.917705 -0.585091
2009-03-12 06:29:59  0.067498 -0.764343  0.497270

mask_panel(pn, msk)

print pn['close']

Out[34]: 
ticker                   AAPL      GOOG        GS
2009-03-01 06:29:59 -0.082203 -0.286354       NaN
2009-03-02 06:29:59       NaN -0.688933 -1.505137
2009-03-03 06:29:59 -0.525567       NaN -0.035047
2009-03-04 06:29:59 -0.123549 -0.841781 -0.616523
2009-03-05 06:29:59 -0.407504       NaN       NaN
2009-03-06 06:29:59       NaN       NaN       NaN
2009-03-07 06:29:59 -1.767227       NaN       NaN
2009-03-08 06:29:59 -0.685501 -0.534373 -0.063906
2009-03-09 06:29:59       NaN       NaN       NaN
2009-03-10 06:29:59       NaN -0.012422 -0.152375
2009-03-11 06:29:59 -0.985585 -0.917705 -0.585091
2009-03-12 06:29:59       NaN -0.764343       NaN 
```

所以上面的循环就可以了。我知道使用 ndarray 有一种更快的矢量化方法，但我还没有把它放在一起。看起来这应该是 pandas 库中内置的功能。如果有一种方法可以做到这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T03:55:38.163

我认为这会起作用（以及 Panel.where 应该做什么，但它有点不重要，因为它必须处理一堆案例）

```
# construct the mask in 2-d (a frame)
In [36]: mask = (pn['close']>0) & (pn['rate']>0)

In [37]: mask
Out[37]: 
ticker                AAPL   GOOG     GS
2009-03-01 06:29:59  False  False  False
2009-03-02 06:29:59  False  False   True
....

# here's the key, this broadcasts, setting the values which 
# don't meet the condition to nan
In [38]: masked_values = np.where(mask,pn.values,np.nan)

# reconstruct the panel (the _construct_axes_dict is an internal function that returns
# dict of the axes, e.g. items -> the items, major_axis -> .....
In [42]: x = pd.Panel(masked_values,**pn._construct_axes_dict())
Out[42]: 
<class 'pandas.core.panel.Panel'>
Dimensions: 2 (items) x 12 (major_axis) x 3 (minor_axis)
Items axis: close to rate
Major_axis axis: 2009-03-01 06:29:59 to 2009-03-12 06:29:59
Minor_axis axis: AAPL to GS

# the values
In [43]: x
Out[43]: 
array([[[        nan,         nan,         nan],
    [        nan,         nan,  0.09575723],
    [        nan,         nan,         nan],
    [        nan,         nan,         nan],
    [        nan,  2.07229823,  0.04347515],
    [        nan,         nan,         nan],
    [        nan,         nan,  2.18342239],
    [        nan,         nan,  1.73674381],
    [        nan,  2.01173087,         nan],
    [ 0.24109645,  0.94583072,         nan],
    [ 0.36953467,         nan,  0.18044432],
    [ 1.74164222,  1.02314752,  1.73736033]],

   [[        nan,         nan,         nan],
    [        nan,         nan,  0.06960387],
    [        nan,         nan,         nan],
    [        nan,         nan,         nan],
    [        nan,  0.63202199,  0.56724391],
    [        nan,         nan,         nan],
    [        nan,         nan,  0.71964824],
    [        nan,         nan,  1.03482927],
    [        nan,  0.18256148,         nan],
    [ 1.29451667,  0.49804327,         nan],
    [ 2.04726538,         nan,  0.12883128],
    [ 0.70647885,  0.7277734 ,  0.77844475]]]) 
```

# c# - 希望能够在在其外部单击时关闭模态弹出窗口

> ID：14650345
> 
> 赞同：3
> 
> 时间：2013-02-01T16:08:08.347
> 
> 标签：c#, jquery, asp.net

我有一个模式弹出扩展器和一个更新面板内的面板。我确实有一个与 CancelControlId 绑定的关闭按钮。但是，我希望能够在我的模式/面板之外单击以关闭面板。（而不是使用关闭按钮）。

我尝试了几件事和一个插件clickoutside。似乎没有任何帮助。非常感谢任何帮助或建议。谢谢。

```
<asp:Content ID="Content3" ContentPlaceHolderID="rightNavigation" runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
<div id="mls_title" class="MLS_Title">
    <asp:Label ID="lblTitle1" Text="Tasks" runat="server" class="MLS_titleLbl" /><br />
</div>
    <asp:UpdatePanel ID="pnlMap" runat="server">
        <ContentTemplate>
            <div>
                <asp:Button ID="btnMap" runat="server" Text="MAP" CausesValidation="false" CssClass="btnMap" />
                <ajax:ModalPopupExtender
                    ID="ModalPopupExtender1"
                    runat="server"
                    TargetControlID="btnMap"
                    PopupControlID="panel1"
                    PopupDragHandleControlID="PopupHeader"
                    Drag="true"
                    BackgroundCssClass="ModalPopupBG">
                </ajax:ModalPopupExtender>

                <asp:Panel ID="panel1" runat="server">
                    <div class="popup_large">
                        <asp:Label ID="Label7" Text="Floor Plan" runat="server" stle="float:left"></asp:Label>
                        <asp:ImageButton ID="ImageButton1" runat="server" ToolTip="No" ImageUrl="~/Images/no.png" Style="float: right; margin-right: 20px" />
                        <br />
                        <asp:ImageButton ID="img" runat="server" Height="30em" Width="45em" />
                    </div>
                </asp:Panel>

            </div>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:51:46.087

`onclick`这是一个添加到背景以关闭模式的示例的链接：

[http://forums.asp.net/t/1528820.aspx](http://forums.asp.net/t/1528820.aspx)

在此处复制关键位以供参考：

```
function pageLoad() { 
    var mpe = $find("MPE"); 
    mpe.add_shown(onShown); 
} 
function onShown() { 
    var background = $find("MPE")._backgroundElement; 
    background.onclick = function() { $find("MPE").hide(); } 
} 

<AjaxToolKit:ModalPopupExtender ID="mdlPopup" BehaviorID="MPE" runat="server"
    TargetControlID="btnShowPopup" PopupControlID="pnlPopup"
    CancelControlID="btnClose" BackgroundCssClass="modalBackground" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-12T15:28:50.093

C＃

```
<AjaxToolKit:ModalPopupExtender .... BackgroundCssClass="jsMpeBackground" /> 
```

JavaScript（使用 jQuery）

```
jQuery('.jsMpeBackground').click(function () {
    var id = jQuery(this).attr('id').replace('_backgroundElement', '');
    $find(id).hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T12:35:26.873

编写一个动态创建的脚本，在我的示例中，当加载模式弹出扩展器时添加该脚本。注意：为了将此事件处理程序绑定到 ModalPopupExtender.OnLoad 事件，您需要添加一个引用（在客户端代码中，您可以将 'OnLoad="mpeExample_Load"' 添加到您的 ModalPopupExtender 标记）。

```
protected void mpeExample_Load(object sender, EventArgs e)    { 
   ScriptManager.RegisterClientScriptBlock(this, this.GetType(), 

"hideModalPopupViaClient", String.Format(@"function hideModalPopupViaClient() {
{ 
   var modalPopupBehavior = $find('{0}');                
   if (modalPopupBehavior) modalPopupBehavior.hide();}}", 
   mpeExample.ClientID), true);  

ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "pageLoad", String.Format(@"function pageLoad() {
{                
   var backgroundElement = $get('{0}_backgroundElement');                
   if (backgroundElement) $addHandler(backgroundElement, 'click', hideModalPopupViaClient);            
}}", 
mpeExample.ClientID), true);} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-23T15:39:09.713

我必须这样做，以便能够在不关闭它的情况下单击实际的弹出窗口，因为我有功能性用户控件，例如弹出窗口上的选项卡部分和文本框。

```
<script type="text/javascript">
    //Hide's Doc Center when clicking outside

    function pageLoad(sender, args) {
        if (!args.get_isPartialLoad()) {
            $addHandler($find("MPE")._backgroundElement, "click", closePopup);
        }
    }

    function closePopup(e) {
        $find("MPE").hide();
    }

    //End
</script> 
```

现在只需确保实际 ModelPopupExtender 中的 BehaviorID 与上面的标签匹配。像这样：

```
<ajaxToolkit:ModalPopupExtender ID="Popup" runat="server" PopupControlID="Container" BehaviorID="MPE" TargetControlID="fakeTargetControl" BackgroundCssClass="modalBackground" CancelControlID="btnCancel" /> 
```

基本上我认为这只是处理模式弹出窗口的 _backgroundElement attr 的“点击”事件，并在该事件上运行 closePopup() 函数。

# firefox - Bootstrap 单选按钮在 Firefox 中无法正常工作

> ID：14650346
> 
> 赞同：1
> 
> 时间：2013-02-01T16:08:11.093
> 
> 标签：firefox, twitter-bootstrap

我最近开始使用引导程序来创建网站的前端。我最初使用 chrome 来开发它。我最近开始在 Firefox 上进行测试，但遇到了一个问题。我在首页上有几个单选按钮。当我单击我想要的那个时，它看起来好像只选择了第一个而不是我单击的那个。如果我快速单击几次，它会正确选择。任何想法为什么会发生这种情况？代码在这里：

```
<form action="redirector.php" action="get">
            <fieldset>
            <table border="1">
                <tr>
                    <td valign="top"><b>Please select a genome:</b><br>
                    <label class="radio">
                <input type="radio" name ="genome" value="Acral2">Acremonium Alcalophilum<br><input type="radio" name ="genome" value="Aspni3">Aspergillus niger<br><input type="radio" name ="genome" value="Glotr1_1">Gloeophyllum trabeum<br><input type="radio" name ="genome" value="Phchr1">Phanerochaete chrysosporium<br><input type="radio" name ="genome" value="PleosPC15_2">Pleurotus ostreatus<br><input type="radio" name ="genome" value="Spoth2">Sporotrichum Thermophile<br><input type="radio" name ="genome" value="Thite2">Thielavia terrestris<br>                     </label>
                    </td>
                    <td valign="top">
                        <b>View proteins with JGI annotation of type:</b><br>
                        <label class="radio">
                            <input type="radio" name ="jgiAnnotation" value=sigPInformationView>SignalP Information<br>
                            <input type="radio" name ="jgiAnnotation" value=ecInformationView>EC and Pathway Information<br>
                            <input type="radio" name ="jgiAnnotation" value=domainInformationView>Domain Information<br>
                            <input type="radio" name ="jgiAnnotation" value=goInformationView>Go Information<br>
                        </label>
                        <button type="submit" class="btn">Submit</button>
                        </fieldset>
                        </form>
                    </td>
                    <td valign="top">
                    <form action="annotationInfoView.php" action="get">
                        <fieldset>
                        <b>View single protein:</b><br>
                        Enter our ID number:<input type="text" name ="ourId"><br>
                        (i.e. jgi_Spoth2_2293939)<br>
                        <button type="submit" class="btn">Submit</button>
                        </fieldset>
                    </form>
                    </td>
                </tr>
            </table> 
```

[http://jsfiddle.net/CTF2s/](http://jsfiddle.net/CTF2s/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T07:34:53.703

问题是您在单个标签内有多个单选按钮。

> 如果我快速单击几次，它会正确选择。

这可能是因为您直接单击单选按钮而不是单选按钮旁边的文本。这就是所有浏览器的行为方式，包括 Chrome。

查看[Twitter Bootstrap 的“表单”文档](http://twitter.github.com/bootstrap/base-css.html#forms)的“复选框和收音机”部分以获取工作示例。

# java - 如何在本地 dev_appserver 上启用 High Replication Datastore？

> ID：14650347
> 
> 赞同：4
> 
> 时间：2013-02-01T16:08:11.127
> 
> 标签：java, google-app-engine, google-cloud-datastore, jdo

我正在使用最新的 Java SDK 1.7.4，以及以下命令来启动开发服务器：

```
%java.home%\bin\java -Ddatastore.default_high_rep_job_policy_unapplied_job_pct=20 -cp "%~dp0\..\lib\appengine-tools-api.jar" ^
    com.google.appengine.tools.KickStart ^
       com.google.appengine.tools.development.DevAppServerMain %* 
```

（“datastore.default_high_rep_job_policy_unapplied_job_pct=20”，如[https://developers.google.com/appengine/docs/java/tools/devserver#Using_the_Datastore](https://developers.google.com/appengine/docs/java/tools/devserver#Using_the_Datastore)）

然而，日志在对 Datastore 的第一个请求中说：

```
INFO: Local Datastore initialized:
        Type: Master/Slave 
```

然后，我得到一个例外：

```
31.01.2013 19:16:02 org.datanucleus.transaction.Transaction rollback
SEVERE: Operation rollback failed on resource: org.datanucleus.store.appengine.DatastoreXAResource@404eb2, error code UNKNOWN and transaction: [DataNucleus Transaction, ID=Xid=    , enlisted resources=[org.datanucleus.store.appengine.DatastoreXAResource@404eb2]]
31.01.2013 19:16:02 com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: /themepark/post
java.lang.IllegalArgumentException: transactions on multiple entity groups only allowed in High Replication applications 
```

我有以下几行`\META-INF\jdoconfig.xml`来启用跨组（XG）事务：

```
<property name="datanucleus.appengine.autoCreateDatastoreTxns" value="true"/>
<property name="datanucleus.appengine.datastoreEnableXGTransactions" value="true"/> 
```

如何`dev_appserver.cmd`模拟高复制数据存储？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:47:46.907

**更新：**

使用提供的 dev_appserver.cmd 传递参数并运行您的代码，如下所示：

`dev_appserver --jvm_flag=-Ddatastore.default_high_rep_job_policy_unapplied_job_pct=20 <path_to_war_dir>`

如果您愿意，可以尝试将其包含`--jvm_flag=-Ddatastore.default_high_rep_job_policy_unapplied_job_pct=20`在文件的末尾（就在 之前）`dev_appserver.cmd``%*`

**老的：**

将以下内容添加到您的命令行：

`-Ddatastore.default_high_rep_job_policy_unapplied_job_pct=20`

这是此处介绍的第一件事（以及您可以使用的其他方法）：[https ://developers.google.com/appengine/docs/java/tools/devserver#Using_the_Datastore](https://developers.google.com/appengine/docs/java/tools/devserver#Using_the_Datastore)

# excel - VBA：嵌套循环：对数据集中的列求和

> ID：14650351
> 
> 赞同：0
> 
> 时间：2013-02-01T16:08:27.337
> 
> 标签：excel, vba

我试图对数据集中由块分隔的列中的值求和。循环似乎正在正确迭代，但在即时窗口中输出的循环“a”中的值不是我所期望的；它似乎引用了 A 列中的 1 个单元格，5x。该脚本包含描述我想要实现的目标的注释。

```
Sub sumCells()

Dim i, r, a, numObs As Integer
Dim Fa, Fb, Fc, Fd, Fe As Long

numObs = 10

Dim subStart As Integer

'loop to separate data into "blocks" of 10 rows (numObs). Step function used
'to contain loops below within each block. starts at 2 due to headers
For subStart = 2 To sheet1.UsedRange.Rows.Count Step numObs

   'loop to reference the rows within the subStart loop block
    For r = 2 To numObs

      'Loop to reference columns 1 through 5 (ideally I'd like to be able to
       'have this reference the actual column index so i dont have to
       'include more lines above to arrange the data accordingly
        For a = 1 To 5

           'this section is supposed to sum the values within each column
           'in this case, columns 1 to 5, within the rows specified above
           Fa = WorksheetFunction.Sum(Cells(r, 1))
           Fb = WorksheetFunction.Sum(Cells(r, 2))
           Fc = WorksheetFunction.Sum(Cells(r, 3))
           Fd = WorksheetFunction.Sum(Cells(r, 4))
           Fe = WorksheetFunction.Sum(Cells(r, 5))

       Next a

  Next r

Next subStart

End Sub 
```

数据样本，数据从第 2 行开始，不包括标题：

```
 0   4   6   8   10  762 857 997
  643   6   9   12  15  739 775 1084
  784   8   12  16  20  938 828 968
 1235   10  15  20  25  832 827 751
  809   12  18  24  30  759 131 1085
 1373   14  21  28  35  589 102 900
 1300   16  24  32  40  656 798 962
  901   18  27  36  45  782 812 786
  761   20  30  40  50  706 951 741 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:32:32.600

假设您要对每列中的每个十个块求和并将其打印到即时窗口，则此代码应该可以工作：

```
Sub sumcols()

Dim blocks As Integer
Dim Fa As Long, Fb As Long, Fc As Long, Fd As Long, Fe As Long
Dim i As Long, j As Long

blocks = 9

For i = 2 To Sheets("sheet1").Range("A1048576").End(xlUp).Row Step blocks + 1 'A1048576' will need to be changed if excel version older than '07
    'get sums for columns a through e for block starting with row i

    Fa = Application.WorksheetFunction.Sum(Sheets("sheet1").Range("A" & i & ":A" & i + blocks))
    Fb = Application.WorksheetFunction.Sum(Sheets("sheet1").Range("B" & i & ":B" & i + blocks))
    Fc = Application.WorksheetFunction.Sum(Sheets("sheet1").Range("C" & i & ":C" & i + blocks))
    Fd = Application.WorksheetFunction.Sum(Sheets("sheet1").Range("D" & i & ":D" & i + blocks))
    Fe = Application.WorksheetFunction.Sum(Sheets("sheet1").Range("E" & i & ":E" & i + blocks))

    'print values to immediate window
    Debug.Print Fa
    Debug.Print Fb
    Debug.Print Fc
    Debug.Print Fd
    Debug.Print Fe

Next i

End Sub 
```

编辑：

要使列也可以迭代，请使用：

（在这种情况下，Fa 将返回每一列的总和）

```
Sub sumcols()

Dim blocks As Integer
Dim Fa As Long, Fb As Long, Fc As Long, Fd As Long, Fe As Long
Dim i As Long, j As Long
Dim currange As Range

blocks = 9

For i = 2 To Sheets("sheet1").Range("A1048576").End(xlUp).Row Step blocks + 1 'A1048576' will need to be changed if excel version older than '07
    'get sums for columns a through e for block starting with row i

    For j = 1 To 5 'iterate through columns

    'get range to sum (first range will be A2:A12)
    Set currange = Sheets("sheet1").Range(Sheets("sheet1").Cells(i, j), Sheets("sheet1").Cells(i + blocks, j))

    Fa = Application.WorksheetFunction.Sum(currange) 'Fa will return the sum for each column for each block

    'print values to immediate window
    Debug.Print Fa

    Next j

Next i

End Sub 
```

# wix - 文件的 WiX SourcePath

> ID：14650352
> 
> 赞同：0
> 
> 时间：2013-02-01T16:08:27.677
> 
> 标签：wix, wix3.6

我正在尝试创建一个安装程序来安装几个离散的应用程序。我想创建一个变量之类的东西，所以我可以使用绝对路径

对于实用程序库之类的东西，而不是键入`c:\Users\me\Documents\VS2012\Projects\Foo\Bar\bin\Release\Util.dll`

我想创建一个目录变量并输入类似

`[FooBarRelease]\Util.dll` 那可行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:13:27.733

这是关于在 wix 中创建变量的一些信息：
[http ://wix.sourceforge.net/manual-wix2/preprocessor.htm](http://wix.sourceforge.net/manual-wix2/preprocessor.htm)

根据您的示例，您需要的内容如下所述：
[http ://wix.sourceforge.net/manual-wix3/votive_project_references.htm](http://wix.sourceforge.net/manual-wix3/votive_project_references.htm)

查看`$(var.MyProject.TargetName)`

# javascript - 是否可以在第二次调用打开框架的触发器后将焦点放在框架上（Firefox）？

> ID：14650354
> 
> 赞同：0
> 
> 时间：2013-02-01T16:08:29.833
> 
> 标签：javascript, focus, frames, window.open

我在 Firefox 中遇到问题。到目前为止，我的研究告诉我，没有真正可靠的方法来处理我的问题，但我想问一下以防万一。

我有以下 javascript/jquery 来打开一个通过按下我的页面上的按钮触发的新窗口：

```
alipayTransactionModalTrigger.click(function() {
     NIWindow=window.open("<!--ALIPAY_CONF_REDIRECT_URL-->", "NI payment");
     alipayTransactionModal.dialog("open");
  }); 
```

在 Chrome 和 Firefox 中，这会打开一个新框架，并且该框架获得焦点。这可以。但是，如果用户让这个新框架保持打开状态，然后返回到我的原始页面。他们可以点击按钮再次触发此事件。如果发生这种情况，新框架会按原样重新加载，但在 Firefox 中，新框架不会将焦点拉到此刷新上。我不确定为什么它会关注初始的新框架加载，但如果框架使用相同的事件触发器刷新，则不会关注焦点。我还没有勇气在IE中检查这个......

这是您无法可靠控制的事情之一吗？或者有没有办法做到这一点？请注意，我在上面的初始窗口打开代码行之后尝试使用 NIWindow.focus() 。没运气。

我相信我读过一些关于可能使用警报的信息，但我不确定如何实现所描述的解决方案，并且我读到它是一个有点骇人听闻的解决方案。

我总是可以打开一个新窗口“_blank”，这样可以确保焦点，但是新打开的框架 url 使用基于父窗口的参数。我无权访问该代码，因此我无法添加检查以确保数据匹配，直到我从此重定向得到响应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:16:34.573

给每个新窗口一个新名称。你有理由重用这个`"NI payment"`名字吗？

如果您的代码依赖于此窗口名称，您应该考虑直接传递窗口引用 (NIWindow) 而不是名称。注入/传递你的依赖而不是依赖一个神奇的超级全局通常是一种更好的方法。

# c# - c#：从读线程写入串行数据

> ID：14650357
> 
> 赞同：0
> 
> 时间：2013-02-01T16:08:41.000
> 
> 标签：c#, serial-port

我正在使用 c#（串行通信）从设备发送和接收数据。**接收**我的设置是这样的。我在一个单独的线程上接收，即我有这样的东西

```
comPort.DataReceived += new SerialDataReceivedEventHandler(comPort_DataReceived);

private void comPort_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
    .....
} 
```

**要写入**，我按下一个将数据写入设备的按钮。

现在，我想在从设备接收到一些数据时自动写入数据，而不是在收到数据时按下按钮。所以我的 q 是我可以 `comPort.WriteLine(textBox1.Text + "\r\n");`把

```
private void comPort_DataReceived(object sender, SerialDataReceivedEventArgs e) 
```

功能。因为当我把 write 放在这里它停止工作。否则，如上所述，使用单独的按钮按钮编写作品。

有人可以告诉我正确的方法是什么。是否有任何线程或某些问题

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:14:55.407

任何使用 UI 控件的操作（包括读写属性，如`Text`）都应该在应用程序的主线程中完成。如果您在另一个线程中，您应该使用该[`Invoke`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invoke.aspx)方法进行操作：

```
var text = (string)textBox1.Invoke(new Func<string>(() =>
    {
        return textBox1.Text;
    }));
comPort.WriteLine(text + "\r\n"); 
```

阅读[此](https://stackoverflow.com/a/1423500/1174942)答案以获取更多信息。

# sql - 多次连接同一个表中的同一列

> ID：14650358
> 
> 赞同：0
> 
> 时间：2013-02-01T16:08:44.417
> 
> 标签：sql, join, alias

我需要两个从同一个表中检索数据，但分为不同的列。

第一个表“ **PRODUCTS** ”具有以下列：

*   PROD_ID
*   PRO_TYPE_ID
*   PRO_COLOR_ID
*   PRO_WEIGHT_ID
*   PRO_PRICE_RANGE_ID

第二个表“ **COUNTRY_TRANSLATIONS** ”具有以下列：

*   ATTRIBUTE_ID
*   ATT_LANGUAGE_ID
*   ATT_TEXT_ID

第三个和最后一个表“ **TEXT_TRANSLATIONS** ”具有以下列：

*   TRANS_TEXT_ID
*   TRA_TEXT

PRO_TYPE_ID、PRO_COLOR_ID、PRO_WEIGHT_ID 和 PRO_PRICE_RANGE_ID 都是整数，可以在 ATTRIBUTE_ID 列中多次找到（取决于有多少翻译可用）。然后 ATT_TEXT_ID 与 TEXT_TRANSLATIONS 表中的 TRANS_TEXT_ID 连接。

基本上我需要运行一个查询，以便我可以多次从 TEXT_TRANSLATIONS 检索信息。现在我收到一个错误，说相关性不是唯一的。

这些数据有 20 多种语言版本，因此需要为每个属性使用整数。

关于我应该如何构建查询的任何建议？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:37:16.130

希望您使用的是支持 CTE（几乎除了 mySQL 之外的所有内容）的 RDBMS，或者您必须修改它以每次引用连接的表......

```
WITH Translations (attribute_id, text) 
                  as (SELECT c.attribute_id, t.tra_text
                      FROM Country_Translations c
                      JOIN Text_Translations t
                        ON t.trans_text_id = c.att_text_id
                      WHERE c.att_language_id = @languageId)
SELECT Products.prod_id,
       Type.text,
       Color.text,
       Weight.text,
       Price_Range.text
FROM Products
JOIN Translations as Type
  ON Type.attribute_id = Products.pro_type_id
JOIN Translations as Color
  ON Color.attribute_id = Products.pro_color_id
JOIN Translations as Weight
  ON Weight.attribute_id = Products.pro_weight_id
JOIN Translations as Price_Range
  ON Price_Range.attribute_id = Products.pro_price_range_id 
```

* * *

当然，我个人认为本地化表的设计有两方面的拙劣——

1.  一切都在同一个表中（尤其是没有“属性类型”列）。
2.  语言属性在错误的表中。

对于 1)，这主要是一个问题，因为您现在必须维护所有属性值的系统范围的唯一性。我几乎可以保证，在某些时候，你会遇到“重复”。此外，除非您设计了具有*大量*可用空间的范围，否则数据值对于类型而言是不连续的；如果您不小心，更新语句可能会在错误的值上运行，这仅仅是因为给定范围的开始和结束属于同一属性，但不是范围中的每个值。
对于 2)，这是因为文本不能完全脱离其语言（和国家/地区“语言环境”）。据我了解，某些文本的某些部分以多种语言编写是有效的，

您最好将您的本地化存储在与此类似的内容中（此处仅显示一个表格，其余表格供读者练习）：

```
Color
=========
color_id  -- autoincrement
cyan  -- smallint
yellow  -- smallint
magenta  -- smallint
key  -- smallint
     -- assuming CYMK palette, add other required attributes

Color_Localization
===================
color_localization_id  -- autoincrement, but optional: 
                       --   the tuple (color_id, locale_id) should be unique
color_id  -- fk reference to Color.color_id
locale_id  -- fk reference to locale table.  
           --    Technically this is also country dependent, 
           --    but you can start off with just language
color_name  -- localized text 
```

这应该使所有属性都有自己的一组 id，并将本地化文本与它直接本地化的内容联系起来。

# jquery - jQuery 在测试小提琴中有效，但在网站中无效

> ID：14650359
> 
> 赞同：-2
> 
> 时间：2013-02-01T16:08:49.710
> 
> 标签：jquery, html, joomla

我有这段简短的代码，只需单击一个按钮即可将内容从一个 div 复制到另一个：

```
<a id="btn123">CLICK ME</a>
<div id="test1"></div>
<div id="test2">
<h1>Heading</h1>
</div>

$("#btn1").click(function(){
     $('#test1').html($('#test2').contents());
}); 
```

这在这里工作正常[http://jsfiddle.net/9hnZx/](http://jsfiddle.net/9hnZx/)但是当我把它放到我的网站上时它不会起作用，有人知道为什么吗？谢谢

[http://bettondesignwork.co.uk/tim/j3mobile/](http://bettondesignwork.co.uk/tim/j3mobile/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T16:11:46.347

`$`不再是 jQuery 对象的别名。

您明确包含“jquery-noconflict.js”，其唯一内容是`jQuery.noConflict();`. 此行的明确意图是*从 jQuery**取消别名`$`*。

以下作品：

```
jQuery("#btn1").click(function(){
     $jQuery('#test1').html(jQuery('#test2').contents());
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T16:09:48.753

我建议你做两件事

1.  包括 jQuery 库
2.  使用 document.ready。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:23:10.670

在joomla中，jquery和motools之间存在冲突。测试它：

```
var jQuery = jQuery.noConflict();
jQuery("#btn1").on('click', function(){
      jQuery('#test1').html(jQuery('#test2').contents());
}); 
```

# java - 非常简单的素数测试 - 我想我不理解 for 循环

> ID：14650360
> 
> 赞同：14
> 
> 时间：2013-02-01T16:08:53.667
> 
> 标签：java, loops, for-loop, iterator, primes

我正在为基本的 Java 考试练习过去的试卷，我发现很难让 for 循环工作来测试一个数字是否是素数。我不想通过为更大的数字添加效率措施来使其复杂化，只是至少适用于 2 位数的数字。

目前，即使 n 是素数，它也总是返回 false。

我认为我的问题是我对 for 循环本身以及将“返回真”放在哪里有问题；和“return false;”......我敢肯定这是我犯的一个非常基本的错误......

```
public boolean isPrime(int n) {
    int i;
    for (i = 2; i <= n; i++) {
        if (n % i == 0) {
            return false;
        }
    }
    return true;
} 
```

我在 stackoverflow 其他地方找不到帮助的原因是因为类似的问题要求更复杂的实现以更有效的方式实现。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-01T16:10:51.213

你的`for`循环有一个小问题。它应该是： -

```
for (i = 2; i < n; i++)  // replace `i <= n` with `i < n` 
```

当然，您不想在`n`除以时检查余数`n`。它会一直给你`1`。

实际上，您甚至可以通过将条件更改为 - 来减少迭代次数`i <= n / 2`。因为`n`不能除以大于 的数`n / 2`，除非我们考虑`n`，我们根本不必考虑。

因此，您可以将`for`循环更改为： -

```
for (i = 2; i <= n / 2; i++) 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-02-01T16:18:56.783

您可以更早地停止并更快地跳过循环：

```
public boolean isPrime(long n) {
    // fast even test.
    if(n > 2 && (n & 1) == 0)
       return false;
    // only odd factors need to be tested up to n^0.5
    for(int i = 3; i * i <= n; i += 2)
        if (n % i == 0) 
            return false;
    return true;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T16:11:55.207

你应该写`i < n`，因为最后一个迭代步骤会给你`true`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-01T16:12:24.380

错误是 i<=n

```
for (i = 2; i<n; i++){ 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-01T17:31:13.670

```
public class PrimeNumberCheck {
  private static int maxNumberToCheck = 100;

  public PrimeNumberCheck() {
  }

    public static void main(String[] args) {
      PrimeNumberCheck primeNumberCheck = new PrimeNumberCheck();

      for(int ii=0;ii < maxNumberToCheck; ii++) {
        boolean isPrimeNumber = primeNumberCheck.isPrime(ii);

      System.out.println(ii + " is " + (isPrimeNumber == true ? "prime." : "not prime."));
    }
  }

  private boolean isPrime(int numberToCheck) {    
    boolean isPrime = true;

    if(numberToCheck < 2) {
      isPrime = false;
    }

    for(int ii=2;ii<numberToCheck;ii++) {
      if(numberToCheck%ii == 0) {
        isPrime = false;
        break;
      }
    }

    return isPrime;
  }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-03T20:25:07.747

使用此代码号可被 3 整除，将跳过 for 循环代码初始化。
For 循环迭代也将跳过 3 的倍数。

```
private static boolean isPrime(int n) {

    if ((n > 2 && (n & 1) == 0) // check is it even
       || n <= 1  //check for -ve
       || (n > 3 && (n % 3 ==  0))) {  //check for 3 divisiable
            return false;
    }

    int maxLookup = (int) Math.sqrt(n);
    for (int i = 3; (i+2) <= maxLookup; i = i + 6) {
        if (n % (i+2) == 0 || n % (i+4) == 0) {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-09T04:35:29.777

您还可以在 for 循环中为此使用一些简单的 Math 属性。

当且仅当它可以被自己整除或被 1 整除时，数字“n”才会是素数。如果数字不是素数，它将有两个因数：

```
n = a * b 
```

您可以使用for循环检查直到数字'n'的sqrt，而不是一直到'n'。如果 'a' 和 'b' 都大于数字 'n' 的 sqrt，则 a*b 将大于 'n'。所以至少有一个因子必须小于或等于平方根。

所以你的循环将如下所示：

```
for(int i=2; i<=Math.sqrt(n); i++) 
```

通过这样做，您将大大降低代码的运行时间复杂度。我认为它会归结为 O(n/2)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-04-26T05:36:54.307

最快的方法之一是只循环到 n 的平方根。

```
 private static boolean isPrime(int n){
        int square = (int)Math.ceil((Math.sqrt(n)));//find the square root
        HashSet<Integer> nos = new HashSet<>(); 
        for(int i=1;i<=square;i++){
            if(n%i==0){
                if(n/i==i){
                    nos.add(i);
                }else{
                    nos.add(i);
                    int rem = n/i;
                    nos.add(rem);
                }
            }
        }
        return nos.size()==2;//if contains 1 and n then prime
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-01T16:11:29.780

您正在检查。因此`i<=n`，何时`i==n`，您只会得到 0，并且它总是会返回 false 。尝试。`i<=(n/2)`无需检查，直到`i<n`。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-13T17:57:59.820

上述算法将 1 视为素数，尽管它不是。因此，这是解决方案。

```
static boolean isPrime(int n) {
  int perfect_modulo = 0;
  boolean prime = false;

  for ( int i = 1; i <=  n; i++ ) {
    if ( n % i == 0 ) {
      perfect_modulo += 1;
    }
  }
  if ( perfect_modulo == 2 ) {
    prime = true;
  }

  return prime;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-13T13:46:09.580

好吧，for循环有一些问题。这是代码，

```
public static boolean checkPrimeNUmber(int number) 
{ 
   if(number <= 1) 
   { 
      return false; 
   } 
   for(int a = 2; a < Math.sqrt(number); a++) 
   { 
      if(number % a == 0) 
      { 
         return false; 
      } 
   } 
   return true;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-04-23T19:47:22.240

使用 Java 8 的方式更好更干净

```
 private static boolean isPrimeA(final int number) {
        return IntStream
               .rangeClosed(2, number/2)
               .noneMatch(i -> number%i == 0);
    } 
```

# python - 我们什么时候应该在 Python 项目中调用 logging.basicConfig？

> ID：14650363
> 
> 赞同：4
> 
> 时间：2013-02-01T16:09:07.693
> 
> 标签：python, logging

我正在查看 python`logging`模块来替换自定义代码，但我无法决定应该在哪里调用该`basicConfig`方法。

如果我开发一个具有子模块的名为的`mymodule`模块，那么只`basicConfig`在`mymodule`.

但是，如果我（或其他人）想`mymodule`在自己的模块或程序中使用并使用该`logging`模块，他们就无法调用自己并被in`basicConfig`提供的选项卡住了。`basicConfig``mymodule`

我知道有一些技巧可以解决这个问题。但是正确的使用方法是什么`basicConfig`，应该在哪里调用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:11:36.673

在你的程序启动代码中调用它；最好从`__name__ == '__main__'`测试触发：

```
if __name__ == '__main__':
    import sys

    main(sys.argv) 
```

并将您需要做的不属于您的模块库的所有内容放入主函数中，包括日志记录配置。

# opencl - opencl中关于多内核的查询

> ID：14650368
> 
> 赞同：0
> 
> 时间：2013-02-01T16:09:20.410
> 
> 标签：opencl

当我使用多个内核时`opencl`，将第一个内核`(K1)`执行的结果输入到第二个内核`(K2)`执行，所以两个问题是：

1.  每个内核的事件应该不同还是每个内核应该相同？
2.  每个内核的命令队列应该不同还是每个内核都应该相同？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:33:10.217

您需要一个命令队列（假设内核在同一设备上执行）。

除非您的命令队列是使用**CL_QUEUE_OUT_OF_ORDER_EXEC_MODE_ENABLE**创建的，否则您不需要在您描述的场景中创建事件：内核按照它们入队的顺序执行。

对于无序命令队列，您应该从第一个**clEnqueueNDRangeKernel**获取一个事件，并将其作为依赖项传递给第二个。请记住使用**clReleaseEvent**释放事件。

# r - 排除状态在聚合上小于某个值的行

> ID：14650370
> 
> 赞同：2
> 
> 时间：2013-02-01T16:09:23.950
> 
> 标签：r

我目前正在借助 coursera 上的视频学习 R。当试图排除所有医院表格少于 20 个的州医院时，由于缺乏 R 的编程知识，我无法找到正确的解决方案（因为我有很多程序`C`，我试图实现的逻辑`R`也像`C`)

我用过的代码就像

```
>test <- read.csv("outcome-of-care-measures.csv", colClasses = "character")
>test[, 11] <- as.numeric(outcome[, 11])
>test2 <- table(outcome$State) 
```

从表中`test2`，我可以得到特定行的值，`test2[[2]]`但无法找出如何使用条件逻辑来获取少于 20 家医院的状态（如果我得到状态名称，那么我可以使用子集（）来解决实际问题）。我也看过`dimnames()`功能，但可以找到解决我问题的任何想法。所以我的问题是，在 R 中，我如何使用表值检查阈值。

价值存储`test2`在

```
 AK  AL  AR  AZ  CA  CO  CT  DC  DE  FL  GA  GU  HI  IA  ID  IL  IN  KS  KY  LA  MA  MD  ME 
 17  98  77  77 341  72  32   8   6 180 132   1  19 109  30 179 124 118  96 114  68  45  37 
 MI  MN  MO  MS  MT  NC  ND  NE  NH  NJ  NM  NV  NY  OH  OK  OR  PA  PR  RI  SC  SD  TN  TX 
134 133 108  83  54 112  36  90  26  65  40  28 185 170 126  59 175  51  12  63  48 116 370 
 UT  VA  VI  VT  WA  WI  WV  WY  ##State Name
 42  87   2  15  88 125  54  29  ##Count of Hospital 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:51:39.197

正如[Arun](https://stackoverflow.com/users/559784/arun)在他的评论中所指出的那样......你可以这样做`names(test2[test2 >= 20])`，以便获得高于 20 家医院的状态......[这](https://stackoverflow.com/questions/9860090/in-r-why-is-better-than-subset)是一个很好的解释，为什么你必须避免`subset`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T16:23:06.523

或者您可以将您的表格转换为 data.frame 并使用`subset`

```
dat <- as.data.frame(test2)
subset(dat, Freq < 20)
   nn Freq
1  AK   17
8  DC    8
9  DE    6
12 GU    1
13 HI   19
42 RI   12
49 VI    2
50 VT   15 
```

# php - MySQL php创建个人命名页面

> ID：14650382
> 
> 赞同：-1
> 
> 时间：2013-02-01T16:10:04.183
> 
> 标签：php, html, mysql, database, upload

我正在学习创建自己的数据库，到目前为止，我已经“感谢教程和 stackoverflow”来创建注册页面。

注册后，他们输入用户名和密码，然后打开上传页面。

上传房屋详情

在上传页面上，他们输入城市： 价格： 说明： 卧室： 浴室： 照片：

到目前为止，一旦他们输入了它在索引页面上显示的数据，我就完成了分页，重新调整了上传图像的大小，一切正常。

我的下一步是在索引页面上为每个条目打开一个显示其数据的新窗口。

问题是我很难找到代码，我希望用户在上传房屋详细信息时为其详细信息页面输入名称。

并且它不以 .php 或 .html 结尾，只需 www.mysite.com/the-desired-name

到目前为止，我的代码可能使用了糟糕的代码，但它工作正常，它帮助我实现了我想要的，直到我有经验来完善它。

我的代码是上传页面

```
 <form enctype="multipart/form-data" action="add.php" method="POST"> 
City: <input type="text" name="city"><br> 
Price: <input type="text" name = "price"><br> 
Decription: <input type="text" name ="description"><br> 
Bedrooms: <input type="text" name="bed"><br> 
Bathrooms: <input type="text" name="bath"><br> 
Your desired link name MYSITE.COM/ <input type="text" name="link"><br> 
Photo: <input type="file" name="photo"><br> 

<input type="submit" value="Add"> 
</form> 
```

然后它通过上传

```
<?php 

//This is the directory where images will be saved 
$target = "upload/"; 
$target = $target . basename( $_FILES['photo']['name']); 

//This gets all the other information from the form 
$city=$_POST['city']; 
$price=$_POST['price']; 
$description=$_POST['description']; 
$bed=$_POST['bed'];
$bath=$_POST['bath'];
$link=$_POST['link'];
$pic=($_FILES['photo']['name']); 

// Connects to your Database 
mysql_connect("host", "username", "password") or die(mysql_error()) ; 
mysql_select_db("mydatabase") or die(mysql_error()) ; 

//Writes the information to the database 
mysql_query("INSERT INTO `employees` VALUES ('$city', '$price', '$description', '$bed',         '$bath', '$link', '$pic')") ; 

if(move_uploaded_file($_FILES['photo']['tmp_name'], $target)) 
{ 
require_once 'SimpleImage.php';
$image = new SimpleImage();
$image->load($target);
$image->resize(50,50);
$image->save($target); 

//Tells you if its all ok 

echo "<script>window.location = 'http://www.mysite.com'</script>";
} 
else { 

//Gives and error if its not 
echo "Sorry, there was a problem uploading your file."; 
} 
?> 
```

然后它显示在索引页面上

```
<?php 
// Connects to your Database 
mysql_connect("host", "username",     "password") or die(mysql_error()) ; 
mysql_select_db("mydatabase") or die(mysql_error()) ; 
if (isset($_GET["page"])) { $page  = $_GET["page"]; } else { $page=1; }; 
$start_from = ($page-1) * 2; 
$data = mysql_query("SELECT * FROM employees ORDER BY bath ASC LIMIT $start_from, 2")     or die(mysql_error());

//Puts it into an array 
while($info = mysql_fetch_array( $data )) 
{ 
?>
<?php 
//Outputs the image and other data

echo "<img src=http://www.mysite.com/upload/".$info['photo'] . " /><br />"; 
echo "<b>City:</b> ".$info['city'] . " ";  
echo "<b>Price:</b> ".$info['price'] . " ";
echo "<b>Bed:</b> ".$info['bed'] . " ";
echo "<b>Bath:</b> ".$info['bath'] . " ";
echo "<b>Extra:</b> ".$info['description'] . " ";
echo "<b>Link:</b> <u>www.mysite.com/</u> ".$info['link'] . " <br /><br /></a>";

}?>
<?php 
$data = mysql_query("SELECT COUNT(photo) FROM employees") or die(mysql_error());
$info = mysql_fetch_row($data);
$total_records = $info[0]; 
$total_pages = ceil($total_records / 2); 

for ($i=1; $i<=$total_pages; $i++) { 
        echo "<a href='index.php?page=".$i."'>".$i."</a> "; 
}; 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:10:00.487

> 因为它不以 .php 或 .html 结尾，只是 www.mysite.com/the-desired-name

假设您使用的是 Apache，请查看[mod_rewrite](http://httpd.apache.org/docs/2.4/en/rewrite/)。您可以使用它将您所说的请求转换为内部请求`/showpage.php/the-desired-name`。在该`showpage.php`脚本中，您可以`the-desired-name`通过[`$_SERVER['PATH_INFO']`](https://stackoverflow.com/q/2261951/1468366)变量访问。或者，如果这不起作用，请通过其他一些变量来[`phpinfo()`](http://www.php.net/manual/en/function.phpinfo.php)告诉您。

# mysql - 优化 NOT IN 和子查询？

> ID：14650383
> 
> 赞同：1
> 
> 时间：2013-02-01T16:10:12.983
> 
> 标签：mysql, optimization

我有这个查询：

```
select distinct somecolumn from sometable
          where something = somethingelse and
          someid not in (select anotherid from another tabele where ...); 
```

我认为由于子选择，查询运行速度非常慢。有没有办法重写它，以便可以删除 not in 和 subselect？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:13:42.470

利用`LEFT JOIN`

```
SELECT  someClumn
FROM    sometable a
        LEFT JOIN anotherTable b
            ON a.someID = b.anotherID 
               -- AND condition for anotherTable
WHERE   a.something = somethingelse AND
        b.anotherID IS NULL 
```

为了获得更好的性能，请在列上定义索引：`someID`和`anotherID`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T16:14:18.413

尝试

```
select
  distinct somecolumn

from
  sometable t1
  left join anothertable t2 on (t1.someid=t2.otherid and t2.othercondition='else')

where
  t1.something='something else'
  and t2.pk is null
; 
```

并且 t2.otherid 应该被索引。

注意：子查询中的 WHERE 子句位于 JOIN 条件中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T16:36:21.757

理论上，`NOT EXISTS`应该比 优化略好，并且如果是 NULLable`NOT IN`也应该更可靠（[从 SQL Server 的角度来看的详细信息](http://www.sqlperformance.com/2012/12/t-sql-queries/left-anti-semi-join)）。虽然我承认我对 MySQL 的了解还不够，无法知道这个查询是否会更好：`anotherid`

```
SELECT somecolumn 
  FROM dbo.sometable AS s
  WHERE something = somethingelse 
  AND NOT EXISTS 
  (
    SELECT 1 FROM dbo.[another table]
    WHERE anotherid = s.someid
  ); 
```

但我怀疑这里真正的性能问题是缺少索引，而不是子查询的存在。是否被`sometable.something`索引？怎么样`sometable.somied`？和`[another table].anotherid`？也`DISTINCT`可能需要额外的排序，但它真的有必要吗？如果您有重复项，则可能表明存在设计问题...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T16:14:09.770

```
select somecolumn
from sometable
     LEFT JOIN another tabele
        ON someid  = anotherid
          AND (where clause from subquery)
WHERE anotherid IS NULL
    AND something = somethingelse 
```

如果您有一对多的关系，我认为 DISTINCT 是多余的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T16:14:50.120

尝试这个

```
 select  somecolumn from sometable
      where something = somethingelse and
      someid not in (select anotherid from another tabele where ...)
      GROUP BY somecolumn; 
```

# autocomplete - 用于自动完成的选择/Select2 样式库

> ID：14650385
> 
> 赞同：0
> 
> 时间：2013-02-01T16:10:14.773
> 
> 标签：autocomplete, javascript

我一直在我的 Web 应用程序中使用[Select2](http://ivaynberg.github.com/select2/)库来替换默认的选择元素，我真的很喜欢这个库的外观以及它的易用性。现在，我正在尝试为同一应用程序上的文本字段实现自动完成功能，并且我想使用一个类似于 Select2 的库。（为了保持 UI 一致。）你知道有没有这样的库？（谷歌没有帮助。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:35:56.813

select2 也是一个自动完成库，可以替换选择元素和输入元素。

# android - 在Android中，后台任务/进程会显着消耗电力吗？

> ID：14650387
> 
> 赞同：-1
> 
> 时间：2013-02-01T16:10:17.063
> 
> 标签：android, memory, power-management

在Android中，如果你打开一个App，但只打开一次，如果内存不短缺，它可能会在内存中保存很长时间。

这些后台任务/进程会持续消耗电力吗？会显着吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:13:02.570

如果应用程序要求它在后台运行，那么是的，只要手机处于开机状态，它就会消耗电量。一个应用程序并不那么重要，但是当多个应用程序开始在后台运行进程/服务时，真正的问题就出现了。事实上，大多数省电应用程序都会禁用这些以节省电量。

# mysql - 在 Mysql 中恢复旧数据库

> ID：14650390
> 
> 赞同：1
> 
> 时间：2013-02-01T16:10:35.440
> 
> 标签：mysql, phpmyadmin, restore

我正在尝试使用 phpMyAdmin 恢复旧数据库（从 2009 年开始）。我收到以下错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'not_null primary_key auto_increment, `Owned` int(11) not_null, `Owner` int' at line 2 
```

我用谷歌搜索了错误，但找不到解决方案。我知道多年来 MySQL 发生了一些变化，但我该怎么办？

我的查询如下：

```
CREATE TABLE `aautod` (
    `aAutoId` int(11) not_null primary_key auto_increment, 
    `Owned` int(11) not_null, 
    `Owner` int(11) not_null, 
    `Description` string(64) not_null, 
    `Model` int(11) not_null, 
    `Value` int(11) not_null, 
    `Locked` int(11) not_null, 
    `ColorOne` int(11) not_null, 
    `ColorTwo` int(11) not_null, 
    `License` string(100) not_null, 
    `Locationx` real(12) not_null, 
    `Locationy` real(12) not_null, 
    `Locationz` real(12) not_null, 
    `Angle` real(12) not_null, 
    `Parked` real(12) not_null, 
    `ParkLocationx` real(12) not_null, 
    `ParkLocationy` real(12) not_null, 
    `ParkLocationz` real(12) not_null, 
    `ParkAngle` real(12) not_null, 
    `GPS` int(11) not_null, 
    `Color1` int(11) not_null, 
    `Color2` int(11) not_nul, 
    PRIMARY KEY (`aAutoId`)
) TYPE=MyISAM DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:19:07.953

您有多个错误：

正如已经指出的`not_null`应该是`not null`。以及`primary_key`应该的`primary key`。

我`string(xx)`改为`varchar`

[http://dev.mysql.com/doc/refman/5.5/en//string-types.html](http://dev.mysql.com/doc/refman/5.5/en//string-types.html)

`real(xx)`接受两个参数，而不是 1。第二个参数是小数点后的小数位数。

[http://dev.mysql.com/doc/refman/5.5/en/floating-point-types.html](http://dev.mysql.com/doc/refman/5.5/en/floating-point-types.html)

`type=MyISAM`改为`Engine=MyIsam`

您还定义了两次主键，一次在第一行声明和表声明的最后一行。我改为这个只声明一次。

```
CREATE TABLE `aautod` (
`aAutoId` int(11) not null primary key auto_increment, 
`Owned` int(11) not null, 
`Owner` int(11) not null, 
`Description` varchar(64) not null, 
`Model` int(11) not null, 
`Value` int(11) not null, 
`Locked` int(11) not null, 
`ColorOne` int(11) not null, 
`ColorTwo` int(11) not null, 
`License` varchar(100) not null, 
`Locationx` real(12,11) not null, 
`Locationy` real(12,11) not null, 
`Locationz` real(12,11) not null, 
`Angle` real(12,11) not null, 
`Parked` real(12,11) not null, 
`ParkLocationx` real(12,11) not null, 
`ParkLocationy` real(12, 11) not null, 
`ParkLocationz` real(12, 11) not null, 
`ParkAngle` real(12, 11) not null, 
`GPS` int(11) not null, 
`Color1` int(11) not null, 
`Color2` int(11) not null
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:19:08.450

它应该是两个单独的词：`NOT NULL`, `PRIMARY KEY`.

# java - 如何在 Eclipse 调试器中检查“当前”异常？

> ID：14650394
> 
> 赞同：2
> 
> 时间：2013-02-01T16:10:54.013
> 
> 标签：java, eclipse, debugging, exception, watch

有时 Eclipse 调试器会在方法末尾有当前指令指针的异常处停止。调试视图此刻说“线程......（暂停（异常......））”

为什么它不会停在异常抛出的地方？

如何检查这些异常？要查看他们的消息和堆栈跟踪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:17:04.227

您可以使调试器在引发异常的地方停止。

在*Debug透视图的**Breakpoints*选项卡上，单击“J！” 顶部的图标。输入一个例外。它将出现在断点列表中。

 *您可以配置调试器是否停止未捕获的异常或捕获的异常或两者兼而有之。

这对于 NullPointerExceptions 特别有用。

```
 Why it doesn't stop at exception throw place? 
```

如果您正在跳过代码，那么您也正在跳过该代码中引发的异常。

```
 How to inspect these exception? To see their messages and stack traces? 
```

*您可以在Debug*透视图的*Variables*视图中检查异常。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:22:19.157

它不会停止，因为当在 Java 中引发异常时，它会一直导航到堆栈跟踪，试图找到可能捕获异常的东西。Eclipse 仅在 JVM 到达堆栈跟踪中的最后一个元素时停止线程，因此异常进入“未处理”领域。我还没有在 Eclipse 中找到任何关于如何直接从中获取堆栈跟踪的具体内容。您永远不会在这里引用异常。您可以使用 J! “断点”视图中的图标可以在抛出某种类型的异常时停止，这将帮助您获得所需的内容。

我建议您做的事情是添加一个自定义[`UncaughtExceptionHandler`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.UncaughtExceptionHandler.html)来处理像这样的未捕获异常。例如：

```
Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {
    public void uncaughtException(Thread t, Throwable e) {
        // Replace the following line with your own handling code
        e.printStackTrace();
        ErrorHelper.showDetailError(e);
    }
}); 
```**

# objective-c - CADisplayLink 的 displayLink 每秒应该调用多少次？

> ID：14650406
> 
> 赞同：0
> 
> 时间：2013-02-01T16:11:24.850
> 
> 标签：objective-c, performance, quartz-graphics, chipmunk, cadisplaylink

我有一个`CADisplayLink`符合 Chipmunk Physics 的运行，我的性能非常慢。我`NSLog`在`CADisplayLink`更新时调用的方法中添加了一个，平均每秒调用 22 次。我的印象是应该接近 60。我`frameInterval`设置为 1，那么在完美世界中应该是 60fps 吗？增量时间平均约为 0.0167 秒（而 1 / 60 IS 0.0167，这让我更加困惑）。

我的屏幕周围只有四堵墙，屏幕上只有八个圆形物体，`UIButton`每次调用都会更新到实例，所以我认为我没有做任何应该对我的4S和iPad3。我以单独的方法每 2.5 秒对每个按钮施加一次随机力。在模拟器中运行非常顺利，所以这是一个仅限设备的问题。任何人都可以帮我找出导致这里放缓的原因，以及我能做些什么吗？

这是相关代码，首先是设置链接的代码：

```
[NSTimer scheduledTimerWithTimeInterval: 2.5f target: self selector: @selector(updateForces) userInfo: nil repeats: YES];
_displayLink = [CADisplayLink displayLinkWithTarget: self selector: @selector(update)];
_displayLink.frameInterval = 1;
[_displayLink addToRunLoop: [NSRunLoop mainRunLoop] forMode: NSRunLoopCommonModes]; 
```

这是每秒应该调用 60 次（我认为！）但仅调用 22 次左右的方法：

```
if (!gameIsPaused) {
    cpFloat dt = _displayLink.duration * _displayLink.frameInterval;
    cpSpaceStep([[AGChipmunkSpace sharedInstance] space], dt);

    for (LCBall *i in balls) {
        cpVect pos1 = cpBodyGetPos(i.body);
        CGAffineTransform trans1 = CGAffineTransformMakeTranslation(pos1.x, pos1.y);
        CGAffineTransform rot1 = CGAffineTransformMakeRotation(cpBodyGetAngle(i.body));
        i.button.transform = CGAffineTransformConcat(rot1, trans1);
    }
} 
```

最后，这是每 2.5 秒调用一次的方法，用于应用随机力 (updateForces)：

```
if (!gameIsPaused) {
    for (LCBall *i in balls) {
        int randomAngle = arc4random() % 360;
        CGPoint point1 = [self getVectorFromAngle: randomAngle AndMagnitude: (arc4random() % 40) + ((arc4random() % 20) + 15)];
        i.body -> f = cpv(point1.x, point1.y);
    }
} 
```

（另外，这是我从某个角度获取矢量的方法，我怀疑这是导致问题的原因）：

```
angle = (angle / 180.0) * M_PI;
float x = magnitude * cos(angle);
float y = magnitude * sin(angle);
CGPoint point = CGPointMake(x, y);
return point; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:55:33.280

事实证明，我的故事板上有一个不同的方法，`UIViewController`它每 0.1 秒触发一次，但没有关闭，再加上物理处理，让事情陷入困境。

# c++ - 类树中间的接口声明（C++）

> ID：14650408
> 
> 赞同：-1
> 
> 时间：2013-02-01T16:11:28.003
> 
> 标签：c++, class, inheritance, interface, declaration

请看继承：

```
interface IArray
{
   virtual unsigned __int8* GetAddress() const = 0;

   virtual unsigned int GetItemCount() const = 0;

   virtual unsigned int GetItemSize() const = 0;
};

template<class T>
class CustomArrayT : public IArray
{
public:

   virtual unsigned __int8* GetAddress() const;

   virtual unsigned int GetItemCount() const;

   virtual unsigned int GetItemSize() const;

   T& GetItem(unsigned int index);
};

interface IFloatArray : public CustomArrayT<float>
{
   virtual IFloatArray* GetCompressedData() const = 0;
};

class ShannonFloatArray : public IFloatArray
{
public:

   virtual IFloatArray* GetCompressedData() const;
};

class FourierFloatArray : public IFloatArray
{
public:

   virtual IFloatArray* GetCompressedData() const;
};

class MickyMouseFloatArray : public IFloatArray
{
public:

   virtual IFloatArray* GetCompressedData() const;
}; 
```

问题的主要目标是继承**IFloatArray -> CustomArrayT**：接口继承了一些非抽象类。我不想支持多重继承。但是我需要所有的 downtree 类都具有类 CustomArrayT 的功能并实现接口 IFloatArray。

这种树有什么优缺点？

怎么可能用另一种方式来完成？也许是某种模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:13:47.113

我会这样做：

```
template<class T>
class IArray {
public:
  virtual int size() const=0;
  virtual T map(int index) const=0;
}; 
```

所有的指针都是不必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:15:09.697

您的层次结构的一个问题是 IArray 接口到底是做什么用的？

如果您希望将任何实例化的派生类作为引用或指向 IArray 的指针传递，则无法从多态性中受益，因为您需要在添加或检索任何包含的值之前进行向下转换。（因为 IArray 不能在不声明要获取或设置的类型的情况下定义 getter 或 setter 函数，并且该类型取决于实例化的派生类。）

为什么不能对基类进行模板化？“基”类应该是 CustomArray，“派生”类可以说是 typedef。

为什么不使用 std::vector？（可能是为了练习。）

# javascript - 如何测试 jQuery Traverse/Selector 是否缺少 DOM 元素 - 未定义？

> ID：14650410
> 
> 赞同：0
> 
> 时间：2013-02-01T16:11:33.833
> 
> 标签：javascript, jquery, undefined

我正在尝试确定 jQuery 选择器的结果（通过遍历 DOM）是否确实找到了 DOM 元素，但我遇到了一些问题。我认为通过检查变量是否等于`undefined`或`null`在这种情况下可以工作，但它不适合我。我觉得我在这里缺少一些基本的东西。任何帮助表示赞赏。

这是我的例子。

[jsFiddle](http://jsfiddle.net/TheJoeFletch/q4jzD/2/)

HTML

```
<ul>
    <li>

    </li>
</ul>

<div id="results"></div> 
```

Javascript/jQuery

```
var
    $element = $("ul li"),
    $parent = $element.parent().closest("li"),//this is the selector that is giving me the issue
    $r = $("#results")//just used to append the results of the if statement below
    ;

$r.append("<br />$parent = " + $parent);
$r.append("<br />typeof $parent = " + typeof $parent);
$r.append("<br />$parent.length = " + $parent.length);
$r.append("<br />$parent[0] = " + $parent[0] + "<br />");//for Chrome

if ($parent === "null") { $r.append("<br />$parent === 'null'") }//not expected to work, just testing
if ($parent === null) { $r.append("<br />$parent === null") }//not expected to work, just testing
if ($parent == null) { $r.append("<br />$parent == null") }//not expected to work, just testing

if ($parent === "undefined") { $r.append("<br />$parent === 'undefined'") }
if ($parent === undefined) { $r.append("<br />$parent === undefined") }
if ($parent == undefined) { $r.append("<br />$parent == undefined") }

if ($parent[0] === "undefined") { $r.append("<br />$parent[0] === 'undefined'") }
if ($parent[0] === undefined) { $r.append("<br />$parent[0] === undefined") }
if ($parent[0] == undefined) { $r.append("<br />$parent[0] == undefined") }

if (typeof $parent === "undefined") { $r.append("<br />typeof $parent === 'undefined'") }
if (typeof $parent === undefined) { $r.append("<br />typeof $parent === undefined") }
if (typeof $parent == undefined) { $r.append("<br />typeof $parent == undefined") }

if (typeof $parent[0] === "undefined") { $r.append("<br />typeof $parent[0] === 'undefined'") }
if (typeof $parent[0] === undefined) { $r.append("<br />typeof $parent[0] === undefined") }
if (typeof $parent[0] == undefined) { $r.append("<br />typeof $parent[0] == undefined") }

if ($parent.length == 0) { $r.append("<br />$parent.length == 0") } 
```

[jsFiddle](http://jsfiddle.net/TheJoeFletch/q4jzD/2/)

这些返回`true`；`$parent[0] === undefined`和`$parent[0] == undefined`和`typeof $parent[0] === 'undefined'`;

这是有道理的，因为 jQuery 选择器没有找到任何 DOM 对象并且没有元素`[0]`。我只尝试过这个，因为`console.log`在 Chrome 中使用对象需要这个。但我不认为这是正确的。

`$parent.length == 0`按预期工作。但是这需要一个`!== undefined' and`!== null` 吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:19:21.760

如果选择器或遍历导致零匹配元素，`length`则 jQuery 对象的属性将等于`0`. 检查元素是否匹配的标准——也是唯一必要的——方法是：

```
jQueryObject.length === 0 
```

所有选择元素的 jQuery 函数本身都会返回一个 jQuery 对象（其中包含匹配的元素），因此它的结果不可能是`null`or `undefined`。它将始终返回一个对象，并且该对象将始终具有一个`length`属性。

查看您的具体示例：

```
var $element = $("ul li"),
    $parent = $element.parent().closest("li") 
```

如果代码执行时`<li>`元素内没有元素，则将是一个空的 jQuery 对象（一个属性等于的 jQuery 对象）。调用将依次返回一个空的 jQuery 对象，然后调用也将返回一个空的 jQuery 对象。`<ul>``$element``length``0``$element.parent()``.closest('li')`

现在，假设代码执行时`<li>`元素内部有元素；`<ul>`在这种情况下，`$element`将是一个非空的 jQuery 对象。它们都有一个父对象，因此调用`$parent`将返回一个包含一些元素的 jQuery 对象。但是，如果这些元素`<li>`与文档之间没有元素，`.closest('li')`则将返回一个空的 jQuery 对象。

# windows-phone-7 - 我们可以让 Master UserControl 作为一个接口来继承它吗？

> ID：14650411
> 
> 赞同：-1
> 
> 时间：2013-02-01T16:11:35.333
> 
> 标签：windows-phone-7, windows-phone-8

在我的 windows phone 8 应用程序中，我需要一些 UserControl，它们都具有相同的功能（只有标题而不是正文）。我想知道我是否可以拥有一些类似接口的东西，所以我可以从中继承？（我可以用 UIViewController 在 ios 中做到这一点）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:33:09.797

如果您正在扩展相同的基本思想，您最好看看创建一个自定义控件，然后将您的主体作为内容添加到控件中。然后，您可以在每种情况下根据需要重新设置自定义控件的外观（并了解有关控件如何作为副作用工作的更多信息）。

这比创建 UserControl 需要更多的工作，但它听起来适合您正在做的事情，并且是在 XAML/.NET（WP、Windows Store、WPF）中解决此类问题的惯用方式。

[关于WindowsPhoneGeek](http://www.windowsphonegeek.com/articles/User-Control-vs-Custom-Control-in-Silverlight-for-WP7)上的用户控件和自定义控件之间的区别，有一篇很好的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:48:11.757

```
public abstract class MasterUserControl : UserControl
{
[...]
}

public class MyUserControl : MasterUserControl
{
} 
```

类似的东西？

# php - 使用 PHP 连接和测试 Memcached

> ID：14650413
> 
> 赞同：4
> 
> 时间：2013-02-01T16:11:35.923
> 
> 标签：php, memcached

在花了一些时间尝试在 MAMP 上设置 Memcached 之后，我可能会遇到一些麻烦......

在我的 php 信息文件中，它声明了 memcached 并显示了相关信息： ![php 信息文件的图像](../Images/6d85d20cd4d8f9db6520985d7e90b353.png)

为了学习和使用 Memcached，我使用了以下教程： [http ://net.tutsplus.com/tutorials/php/faster-php-mysql-websites-in-minutes/?search_index=1](http://net.tutsplus.com/tutorials/php/faster-php-mysql-websites-in-minutes/?search_index=1)

这是我遇到的第一个问题，这是连接到缓存服务器：使用他们所说的，似乎没有用。

```
define('MEMCACHED_HOST', '127.0.0.1');
define('MEMCACHED_PORT', '11211');
$memcache = new Memcache;
$cacheAvailable = $memcache->connect(MEMCACHED_HOST, MEMCACHED_PORT); 
```

我尝试将 127.0.0.1 更改为 localhost，但这不起作用。我的第一个调用点是将 memcache 更改为 memcached ......这仍然不起作用。

因此，我只想弄清楚如何连接和测试已使用 Memcached 建立的连接。如果 Memcache 和 Memcached 之间实际上存在不同的连接？或者，也许我设置了错误？任何建议或指导表示赞赏:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:20:46.630

首先，我想您应该尝试使用 telnet 连接到 memcahed。

```
telnet 127.0.0.1 11211 
```

假设您能够连接，这里有一些关于支持的命令的文档：http: [//lzone.de/articles/memcached.htm](http://lzone.de/articles/memcached.htm)

如果您无法通过 telnet 登录，则说明您的设置不正确，或者您可能有一些防火墙阻止了它。

PHP 有两个客户端，[memcache](http://php.net/manual/en/book.memcache.php)和[memcached](http://www.php.net/manual/en/memcached.addserver.php)。我建议使用 memcached（我不知道他们为什么将客户端命名为守护进程 - 让我发疯）。较新的 memcached 客户端支持 CAS 操作和其他一些较新的功能。

您使用的连接代码看起来更像 memcache。使用 memcached，您将需要设置服务器池或仅使用[`addServer()`](http://www.php.net/manual/en/memcached.addserver.php).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T18:09:15.020

我找到了无法连接到 Memcached 的原因，并认为我会发布答案，以防万一有人遇到与我相同的问题。

解决方案是在终端中键入以下内容：

```
memcached -d 
```

正如我发现的那样，似乎需要有效地打开 memcached。上面的代码做到了。尽管每次重新启动机器时，您都必须执行我刚才所说的操作。我仍在寻找自动启动 memcached 的答案。如果我遇到它，我会更新这篇文章。

# .net - 通过代理的.Net网络请求，自动检测凭据

> ID：14650418
> 
> 赞同：3
> 
> 时间：2013-02-01T16:11:50.997
> 
> 标签：.net, vb.net, web-services, proxy, fiddler

我花了一些时间搜索这个网站上的文章，以准确找到我想要完成的事情，但到目前为止还没有运气。我正在客户端应用程序中执行 Web 请求，我想确保它通过代理工作。我将 Fiddler2 设置为代理服务器进行测试，并强制它要求身份验证。

我基本上已经弄清楚如何让代理使用：

```
 Dim proxy As IWebProxy = WebRequest.GetSystemWebProxy()
    webService.Proxy = proxy 
```

我还尝试通过以下方式获取代理的正确凭据

```
 webService.Proxy.Credentials = System.Net.CredentialCache.DefaultCredentials 
```

并将其添加到配置部分下的 app.config 中：

```
 <system.net>
        <defaultProxy useDefaultCredentials="true" />
    </system.net> 
```

这两种情况我都得到相同的网络异常：

```
 The request failed with HTTP status 407: Proxy Auth Required. 
```

Fiddler2 的代理的用户名为 1，密码为 1，如果我以编程方式将这些作为请求的凭据，则请求将成功通过身份验证。但是，它无法像获取代理信息一样从 IE 获取凭据是否有原因？

Fiddler 的代理是否也是其工作方式的一个例外？使用 Windows 身份验证的普通代理是否适合我尝试获取凭据的方式，有什么方法可以轻松测试吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:23:00.823

*大多数*（但不是*所有*）需要身份验证的代理都使用*当前用户的 Windows 登录凭据*。因此，使用 DefaultCredentials 通常是正确的做法。

话虽如此，代理*可能*会要求自定义凭据（例如，Fiddler 想要“1:1”），当这种情况发生时，您的代码无法真正知道这些凭据是什么。您*可能*有一些运气要求 CredMan 查看是否有目标代理领域的存储凭证，但这通常不起作用（假设它曾经起作用）。您通常不能“向 IE 询问”凭据，因为作为一般规则，它不会*永久*存储凭据；相反，它会在会话的第一个请求时提示用户输入它们，并在该会话的整个生命周期内将它们保存在内存中。

如果您希望您的软件在具有此类代理的环境中运行，您应该捕获 HTTP/407 响应并提示用户输入他们的代理凭据，您可以在重试时手动将其添加到请求中。

有关此主题的讨论，请参阅我的[IEInternals](http://blogs.msdn.com/b/ieinternals/archive/2012/08/03/manual-proxy-authentication-requiring-basic-or-digest-breaks-many-applications.aspx)博客文章。

# symfony - Symfony2 中的 Behat 测试显示不需要的调试信息

> ID：14650425
> 
> 赞同：1
> 
> 时间：2013-02-01T16:12:08.293
> 
> 标签：symfony, symfony-2.1, behat

当我在 Symfony2 项目中运行 Behat 测试时，我得到很多不需要的调试行，如下所示：

```
[2013-02-01 17:07:50] request.INFO: Matched route "homepage" (parameters: "_controller": "Symfony\Bundle\FrameworkBundle\Controller\RedirectController::redirectAction", "route": "Acme_tasks_tasks", "permanent": "true", "_route": "homepage") [] []
[2013-02-01 17:07:51] security.DEBUG: Read SecurityContext from the session [] []
[2013-02-01 17:07:51] security.DEBUG: Reloading user from user provider. [] []
[2013-02-01 17:07:51] security.DEBUG: Username "john" was reloaded from user provider. [] []
[2013-02-01 17:07:51] security.DEBUG: Write SecurityContext in the session [] [] 
```

我的`behat.yml`样子是这样的：

```
default:
  formatter:
    name: progress
  extensions:
    Behat\Symfony2Extension\Extension:
      mink_driver: true
      kernel:
        env: test
        debug: false
    Behat\MinkExtension\Extension:
      base_url: 'http://local.acme.ch/app_test.php/'
      default_session: symfony2
      javascript_session: selenium
      selenium:
        host: 33.33.33.1
        port: 4444 
```

如您所见，我已经关闭了内核的调试模式，这些东西是从哪里来的？

我的安装基于 Behat 的 Symfony2 Extension。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:48:43.193

修复！[这个答案](https://stackoverflow.com/a/13347822/407697)最终帮助了我。

我不得不`config_test.yml`像这样禁用独白：

```
#config_test.yml
monolog:
    handlers:
        main:
            type: test 
```

在我还使用`php app/console cache:clear --env=test`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:25:47.127

`app_test.php`使用 mink 和 selenium 时，您的客户端正在通过前端控制器访问您的应用程序。

您需要调整此`app_test.php`文件：

```
$kernel = new AppKernel('test', false); 
```

# c++ - mount() 和 jffs2_gcd_mtd0 垃圾收集器

> ID：14650428
> 
> 赞同：2
> 
> 时间：2013-02-01T16:12:18.783
> 
> 标签：c++, linux, mount, sigchld, jffs2

我正在运行MontaVista Linux 3.1 的平台上工作。

我有一个 C++ 应用程序，由于我不会深入探讨的深奥原因，它必须在只读和读写之间定期重新安装 JFFS2 闪存文件系统。

当您执行在`int mount(...)`中指定的调用`sys/mount.h`以将文件系统设置为读写时，`jffs2_gcd_mtd0`垃圾收集器进程将按预期启动。但是，当您重复`mount`调用以返回只读时，`jffs2_gcd_mtd0`会被杀死，并成为一个已失效的进程。

几分钟后，我们最终得到了大量已失效的`jffs2_gcd_mtd0`进程，无论我们做什么，都无法摆脱它们。

我可以使用以下测试应用程序复制问题：

```
int main()
{
  while(true)
  {
    mount("/dev/mtdblock/0", "flash", "", MS_REMOUNT|MS_POSIXACL|MS_ACTIVE|MS_NOUSER|0XEC0000, "");
    sleep(1);
    mount("/dev/mtdblock/0", "flash", "", MS_RDONLY|MS_REMOUNT|MS_POSIXACL|MS_ACTIVE|MS_NOUSER|0XEC0000, "");
    sleep(1);
  }
} 
```

我尝试了各种方法来获取已失效的进程：设置`signal(SIGCHLD, SIG_IGN)`（不起作用）；`wait(int)`在设置为只读后调用（失败，errno 变为 10 - “无子进程”）；打电话`kill(0, SIGCHLD)`（不起作用）。

我是否正确假设这是`mount`我们所拥有的实现中的一个错误？鉴于这是一个错误，我该如何删除已失效的进程，并阻止进程 ID 表填满？

* * *

一些补充信息：当我使用`strace`. 现在我真的被难住了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T14:44:34.903

作为一种解决方法，我发现`mount()`从 a 中调用该命令`pthread`可以让已失效的`jffs2_gcd_mtd0`进程被回收。

我相信这是通过以下机制工作的：当线程加入时，产生的`jffs2_gcd_mtd0`进程没有父进程。因此，它被 继承`init`，然后在完成时被收割。

如果有人想更正/扩展我上面的解释，请做！

# linux - 以编程方式加载 cassandra 模式

> ID：14650429
> 
> 赞同：2
> 
> 时间：2013-02-01T16:12:22.693
> 
> 标签：linux, nosql, cassandra

我正在尝试使用 shell 脚本以编程方式安装和配置 cassandra。我安装 cassandra，运行`./cassandra`，然后尝试使用`cassandra-cli --host localhost -f <schema-file>`. 问题是它试图在 cassandra 启动之前加载模式并引发异常。有什么方法可以知道 cassandra 何时启动并运行？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:03:02.613

在加载模式之前，您可以检查是否有任何东西正在侦听 9160（Thrift 端口）。绑定到端口是服务所做的最后一件事，并表明它已准备好为请求提供服务。

如果 Cassandra 正在运行此命令将返回一些内容：

```
sudo lsof -i :9160 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:43:54.320

使用`./cassandra -f`然后当 Cassandra 开始监听 Thrift 端口时你就会知道它

# php - PHP 上的 POST 变量

> ID：14650445
> 
> 赞同：0
> 
> 时间：2013-02-01T16:12:56.953
> 
> 标签：php

如果这是 Request (var_dump($_REQUEST);) 的 vam 转储：

```
array(1) {
  ["gift_edit"]=>
  array(11) {
    ["name"]=>
    string(19) "IBM da colezionista"
    ["description"]=>
    string(0) ""
    ["validbegin"]=>
    array(3) {
      ["day"]=>
      string(2) "31"
      ["month"]=>
      string(1) "1"
      ["year"]=>
      string(4) "2013"
    }
    ["validend"]=>
    array(3) {
      ["day"]=>
      string(1) "3"
      ["month"]=>
      string(1) "3"
      ["year"]=>
      string(4) "2015"
    }
    ["redemption"]=>
    string(13) "1234567888844"
    ["points"]=>
    string(4) "1200"
    ["price"]=>
    string(4) "6000"
    ["discount"]=>
    string(2) "20"
    ["codelist"]=>
    string(33) "unoperibm
dueperibm
treperibm
"
    ["amount"]=>
    string(0) ""
    ["_token"]=>
    string(40) "f2389c3d302630a624c10660aac218d279953d06"
  }
} 
```

你如何检索**codelist**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:14:35.770

`$_REQUEST['gift_edit']['codelist']`或`$_POST['gift_edit']['codelist']`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:14:17.487

您可以使用以下代码访问它。

```
$_REQUEST['gift_edit']['codelist'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T16:15:10.980

尝试：

```
$test = $_REQUEST['gift_edit']['codelist']; 
```

# sql - SELECT DISTINCT 不排序行

> ID：14650447
> 
> 赞同：1
> 
> 时间：2013-02-01T16:13:00.747
> 
> 标签：sql, sql-server

我正在执行以下查询：

```
SELECT DISTINCT column1, colum2 FROM table.... WHERE.... 
```

但我不希望返回的结果是有序的。如何避免 sql对这些行**进行排序**？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T16:15:11.380

它们本身并没有得到排序，它们只是使用表上的任何索引返回，或者只是扫描整个表。如果您希望它们随机排序，那么您需要在查询中明确说明：

```
SELECT *
FROM (SELECT DISTINCT column1, colum2 
      FROM table.... 
      WHERE....) A
ORDER BY NEWID() 
```

[小提琴演示](http://sqlfiddle.com/#!3/1da9f/19)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:18:22.170

SELECT DISTINCT（或其他任何东西）不需要 ORDER BY ...您看到什么样的排序？可能只是数据在输入系统时已排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T17:28:31.293

`select distinct`必须识别重复的行。基本上有两种方法可以做到这一点。一种是对数据进行排序（可以使用索引隐式完成）。然后重复的行彼此相邻出现。另一种是建立哈希表。重复的行出现在相同的哈希桶中。

对于您的查询，SQL Server 选择对数据进行排序。它恰好看起来像正在订购数据。在多线程系统上，数据可能*看起来是*排序的，但是当您滚动浏览它时，您会发现排序是分块的（因为数据是从每个线程返回的）。

# c# - 将枚举数组转换为通用枚举数组

> ID：14650454
> 
> 赞同：1
> 
> 时间：2013-02-01T16:13:20.250
> 
> 标签：c#, arrays, enums

如何在 c# 中将枚举数组转换为通用枚举数组。

要清楚：

鉴于：

```
public enum PrimaryColor
{
    red = 0,
    blue = 1,
    yellow = 3
}

public enum SecondaryColor
{
    green = 0,
    purple = 1,
    orange = 2
} 
```

我想做这样的事情：

```
public class MyClass
{
    public static void Main()
    {
        PrimaryColor[] pca = {PrimaryColor.blue, PrimaryColor.yellow};
        SecondaryColor[] sca = {SecondaryColor.purple, SecondaryColor.orange};

        Enum[] enumArray = pca;
    }

} 
```

这会导致以下编译器错误：

```
Cannot implicitly convert type 'PrimaryColor[]' to 'System.Enum[]' 
```

我可以使用 linq 或更多迭代过程，但我想知道是否有更好的演员可以代替。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:15:42.717

你只能迭代地做

```
Enum[] enumArray = Array.ConvertAll(pca, item => (Enum)item); 
```

或者（效率较低，但 Linq！）

```
Enum[] enumArray = pca.Cast<Enum>().ToArray(); 
```

为什么不能简单地转换数组？因为在 C# 中，[协方差](http://msdn.microsoft.com/en-us/library/ee207183.aspx)仅对引用类型的数组启用（枚举是值类型）。因此，通过课程，`Foo`您可以：

```
Foo[] foos = new Foo[10];
object[] array = (object[])foos; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:18:54.727

```
PrimaryColor[] pca = { PrimaryColor.blue, PrimaryColor.yellow };
SecondaryColor[] sca = { SecondaryColor.purple, SecondaryColor.orange };

Enum[] enumArray = pca.Select(q => q as Enum).ToArray(); 
```

或者;

```
for (int i=0; i<pca.Count();i++)
{
    enumArray[i] = pca[i];                
} 
```

# java - Java vm 变慢，所有线程都忙于字符串操作

> ID：14650455
> 
> 赞同：24
> 
> 时间：2013-02-01T16:13:22.243
> 
> 标签：java, performance, tomcat, jvm

我遇到了一个非常特殊的问题。我的 tomcat 以大约 25% 的 CPU 24/7 完美运行，但有时我的 CPU 会飙升至 60%，系统会停止运行并且无法恢复。

当我在减速期间进行线程转储时，几乎所有线程都忙于某种字符串或相关操作。

没有 OutOfMemory 错误或任何异常被抛出，所有请求仍然得到处理，但响应时间恶化到第 n 度，即使是亚秒请求也会减慢到 60 秒甚至更多。

我的服务器配置如下：

```
    Ubuntu 12.04.2 LTS
    Linux 3.2.0-38-virtual #60-Ubuntu SMP x86_64 x86_64 x86_64 GNU/Linux

```

```
    java版本“1.7.0_13”
    Java(TM) SE 运行时环境 (build 1.7.0_13-b20)
    Java HotSpot(TM) 64 位服务器 VM（内部版本 23.7-b01，混合模式）

```

```
    导出 JAVA_OPTS='-服务器
    -Xms18g -Xmx18g
    -XX:MaxPermSize=512m
    -XX:ThreadStackSize=512
    -XX:新比率=1
    -XX:幸存者比率=4
    -XX:+UseConcMarkSweepGC
    -XX:+UseParNewGC
    -XX:+CMSClassUnloadingEnabled
    -Xloggc:/usr/tomcat/logs/gc.log
    -XX:+PrintGC详情
    -XX:+打印GCDateStamps
    -XX:+PrintTenuringDistribution
    -Dcom.sun.management.jmxremote
    -Dcom.sun.management.jmxremote.port=9999
    -Dcom.sun.management.jmxremote.authenticate=false
    -Dcom.sun.management.jmxremote.ssl=false
    -Djava.awt.headless=true'

```

**[单击此处下载线程转储。我已经删除了大部分线程及其 stackTraces](https://www.dropbox.com/s/e8kvnko76o6e4mh/threadDump.txt?dl=0)**

**[单击此处下载 vmstat 日志](https://www.dropbox.com/s/67esde7nfys3vmd/vmstat.2014-08-19.log?dl=0)**

**[点击这里下载 gc 日志](https://www.dropbox.com/s/gwiloe3ooita0sx/gc.2014-08-19.log?dl=0)**

关于这个原因的任何想法？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-23T14:47:40.973

这不是内存问题，因为在您的转储中，GC 甚至都不忙，并且有足够的可用内存。此外，CPU 卡在 60%，但如果应用程序忙于计算（GC 或其他），它会卡在 100%，如果这是网络攻击也是如此。所以这个问题的根源一定包括一些disk-IO操作。

众所周知，Tomcat 是有缺陷的，并且有几个严重的问题。我遇到的一件事是，没有什么特别的原因，Tomcat 突然用无意义的条目淹没了它自己的日志文件。这不仅导致磁盘填充到 100%，而且还大大减慢了传入请求。您可以通过查看 tomcat 日志及其大小来检查这一点。

如果这不是源，您应该使用可用的工具来[检查](https://unix.stackexchange.com/questions/55212/how-can-i-monitor-disk-io)Tomcat 的任何奇怪的磁盘 IO 并从那里继续。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T14:43:47.817

要尝试查明有问题的请求，您可以在 Tomcat 中配置[Stuck Thread Detection Valve 。](http://tomcat.apache.org/tomcat-7.0-doc/config/valve.html#Stuck_Thread_Detection_Valve)

> 这个阀门允许检测需要很长时间才能处理的请求，这可能表明正在处理它的线程被卡住了。
> 
> 当检测到这样的请求时，其线程的当前堆栈跟踪将写入具有 WARN 级别的 Tomcat 日志。
> 
> 卡住线程的 ID 和名称可通过 JMX 在stdThreadIds 和stuckThreadNames 属性中获得。这些 ID 可以与标准 Threading JVM MBean (java.lang:type=Threading) 一起使用，以检索有关每个卡住线程的其他信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-29T05:31:36.970

我认为你的问题是这个配置决定`-XX:PermSize=320m -XX:MaxPermSize=320m`不允许你的 PemSpace 动态更改，当你用尽它时会导致死锁 - 请记住实习生缓存使用 PermSpace。我会尝试更改`-XX:MaxPermSize=320m`为`-XX:MaxPermSize=512m`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-23T14:20:50.947

如果 CPU 使用率低于 100%，但应用程序已停止，这意味着某些东西正在阻止 CPU 被充分利用。

I/O 或过多的上下文切换（例如由锁引起的）通常是造成这种情况的罪魁祸首。

您可以在其中一个事件期间发布 vmsstat 1 的输出吗？- 诊断的下一步是消除上下文切换是否是这里的问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-11-05T17:54:07.077

尝试使用以下 JVM 选项增加代码缓存的最大大小：

```
-XX:ReservedCodeCacheSize=256m 
```

有关此建议的背景，请参阅[我对另一个问题的回答。](https://stackoverflow.com/a/25941663/2198517)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-23T23:44:20.653

GC 日志中是否有任何异常？看起来你正在运行一个非常大的堆，其中包含一些不寻常的选项，并且做了很多字符串分配工作。也许您会随着时间的推移遭受堆碎片的困扰（CMS 不会压缩）。还要确保没有进行交换（如果堆太大，可能会发生，因此 VM 很少访问）

我怀疑这与 GC 有关，因为显然没有线程被阻塞。您是否尝试过使用更新的 JDK？您也可以重试但删除一些不常见的选项 -XX:+CMSScavengeBeforeRemark，因为每个次要 JDK 版本可能没有太多的测试覆盖率。

另一个怀疑可能是使用奇怪字符集（kyrillic 或阿拉伯语）的传入请求导致大量字符集映射开销。还要检查您的页面上是否有一些机器人，是否有任何可疑的请求进来？您肯定需要更长的堆栈跟踪来找出字符串操作的根操作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-26T16:23:17.840

您需要使用[BTrace](http://kenai.com/projects/btrace)诊断方法调用。

编写一个这样的 breace 脚本：

### 跟踪`com.xx.xx`调用 String 的 any 方法的前缀类，并打印调用时间。

```
@TLS
private static Map<String, Integer> countMap = BTraceUtils.newHashMap();

private static String prefix = "com.xx.xx";// package like com.xx.xx which you want to trace ()

@OnMethod(clazz = "java.lang.String", method = "/.*/") //all method in String
public static void traceMethodInvoke() {
    String str = BTraceUtils.jstackStr();
    for (String currentClass : str.split("\\n")) {
        if (BTraceUtils.Strings.startsWith(currentClass, prefix)) {
            if (!countMap.containsKey(currentClass)) {
                countMap.put(currentClass, 1);
            } else {
                countMap.put(currentClass, countMap.get(currentClass) + 1);
            }
            break;
        }
    }
}

@OnTimer(5000)
public static void print() {
    BTraceUtils.println("========================================");
    for (Map.Entry<String, Integer> entry : countMap.entrySet()) {
        if (entry.getValue() > 100) {// print if cont > 10
            BTraceUtils.println(entry.getValue() + "\t\t" + entry.getKey());
        }
    }
    BTraceUtils.println("===========================================");

} 
```

* * *

结果输出如下：

```
====================================================
1022                           com.xx.xx.classA#m1
322                            com.xx.xx.classA#m2
2022                           com.xx.xx.classA#m21
422                            com.xx.xx.ccc.classX#m11
522                            com.xx.xx.zz.classS#m44
......... 
```

### 您可以更改`prefix`用于跟踪另一个包前缀。

根据结果​​，您可以分析源代码并找出问题所在。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-03-24T16:18:36.877

通过查看 RUNNABLE 线程的线程转储扫描后，有一件事很突出。您的系统似乎正在处理/尝试同时处理大量请求。除非你有很多核心，否则很可能会有很多时间切片。另一方面，我看不到明确的>>证据<<这是与 GC 相关的。（但你没有包括 GC 日志......）

我建议你看两件事。

*   查看操作系统的虚拟内存统计信息。灾难性系统减速的一个可能原因是虚拟内存抖动。这是虚拟内存页面的总应用程序需求超过可用物理内存的地方......并且操作系统花费大量时间在物理内存和交换磁盘/页面文件之间交换页面。
*   查看您收到的请求模式。在某些时候，您收到的请求的数量/类型可能会超出系统的容量。

如果问题是 VM 抖动，那么解决方案是减少应用程序内存需求。执行此操作的简单方法是**减小**Java 堆大小。

如果问题是负载，则更难解决：

*   您可以尝试增强您的硬件（或向您的虚拟机添加更多 VCPU）。
*   您可以尝试将负载分散到服务器的多个实例上。
*   您可以尝试减少工作线程的数量，这样您的服务器就不会尝试一次处理这么多的请求。
*   您可以尝试分析应用程序和/或分析请求统计信息，以查看是否有可以调整的热点，或者可以关闭昂贵的功能......

最后，您可以看看从 CMS 切换到 Parallel Collector 是否有帮助；请参阅 Oracle GC 调优页面：[可用收集器](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html#available_collectors)。但我怀疑这是一个 GC 问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-01T17:15:12.750

您应该进行的第一件事是找出哪些线程实际上正在消耗 CPU。它可能是正在执行字符串操作的线程，也可能是可能正在执行 GC 和 Sweep 操作的其他 VM 线程。[该链接说明了如何将 CPU 峰值与线程转储关联起来](https://stackoverflow.com/questions/14602451/troubleshooting-jvm-cpu-spikes/14602711#14602711)

一旦你能确定线索，就会更清楚下一步应该做什么。

希望这可以帮助

# php - 在没有 Joomla/Wordpress 的情况下安装 phpimageeditor

> ID：14650456
> 
> 赞同：0
> 
> 时间：2013-02-01T16:13:22.940
> 
> 标签：php, image, wordpress, joomla, editor

我想在没有 joomla 或 wordpress 的网站上使用[http://www.phpimageeditor.se/](http://www.phpimageeditor.se/) - 它在文档中说“很容易添加到您自己的内容管理系统” - 但没有任何文档说明如何要做到这一点。所有的文件都充满了对 joomla/wordpress-functions 的引用，所以我当然会遇到很多错误。这有可能吗？或者是否可以单独调用图像编辑器，一旦它安装在 joomla/wordpress 中，而不使用 CMS 的媒体库？

# c# - 将对象添加到 C# 中的列表后如何操作对象的属性

> ID：14650459
> 
> 赞同：-6
> 
> 时间：2013-02-01T16:13:27.047
> 
> 标签：c#, list, class, object, properties

假设我有这样的课程：

```
class public Person
{
    public string firstName;
    public string lastName;
    public string address;
    public string city;
    public string state;
    public string zip;

    public Person(string firstName, string lastName)
    {
        this.firstName = firstName;
        this.lastName = lastName;
    }
} 
```

让我们进一步说我创建了一个 Person 类型的列表，如下所示：

```
List<Person> pList = new List<Person>;
pList.Add(new Person("Joe", "Smith"); 
```

现在，我想为 Joe Smith 设置地址、城市、州和邮政编码，但我已经将对象添加到列表中。*那么，在*将对象添加到列表后，如何设置这些成员变量呢？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:14:15.297

您将项目从列表中取出，然后设置它：

```
pList[0].address = "123 Main St."; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T16:15:20.823

您可以保留对您的对象的引用。尝试像这样添加：

```
List<Person> pList = new List<Person>;
Person p = new Person("Joe", "Smith");
pList.Add(p);
p.address = "Test"; 
```

或者，您可以直接通过列表访问它。

```
pList[0].address = "Test"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T16:15:33.013

您可以像这样获取列表的第一项：

`Person p = pList[0];`或者`Person p = pList.First();`

然后，您可以根据需要对其进行修改：

`p.firstName = "Jesse";`

另外，我建议使用自动属性：

```
class public Person
{
    public string firstName { get; set; }
    public string lastName { get; set; }
    public string address { get; set; }
    public string city { get; set; }
    public string state { get; set; }
    public string zip { get; set; }

    public Person(string firstName, string lastName)
    {
        this.firstName = firstName;
        this.lastName = lastName;
    }
} 
```

你会得到相同的结果，但是如果你想要验证输入或更改设置项目的方式，它会简单得多：

```
class public Person
{
    private const int ZIP_CODE_LENGTH = 6;
    public string firstName { get; set; }
    public string lastName { get; set; }
    public string address { get; set; }
    public string city { get; set; }
    public string state { get; set; }
    private string zip_ = null;
    public string zip 
    { 
        get { return zip_; } 
        set
        {
            if (value.Length != ZIP_CODE_LENGTH ) throw new Exception("Invalid zip code.");
            zip_ = value;
        }
    }

    public Person(string firstName, string lastName)
    {
        this.firstName = firstName;
        this.lastName = lastName;
    }
} 
```

当您在此处设置属性时崩溃可能不是最好的决定，但您大致了解能够快速更改对象的设置方式，而无需在`SetZipCode(...);`任何地方调用函数。这是封装 OOP 的所有魔力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T16:19:41.950

如果您在列表中找不到要查找的元素，您可以随时使用 LINQ 再次找到该元素：

```
pList.First(person=>person.firstName == "John").lastName = "Doe"; 
```

或者，如果您需要一次重新定位所有“Doe”，您可以执行以下操作：

```
foreach (Person person in pList.Where(p=>p.lastName == "Doe"))
{
    person.address = "Niflheim";
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-01T16:17:42.153

您可以通过它的索引访问该项目。如果要查找添加的*最后*一项，则可以使用列表的长度 - 1：

```
List<Person> pList = new List<Person>;
// add a bunch of other items....
// ....
pList.Add(new Person("Joe", "Smith");
pList[pList.Length - 1].address = "...."; 
```

# php - PHP：如何转义 parse_ini_file / parse_ini_file_string 函数的注释符号

> ID：14650461
> 
> 赞同：1
> 
> 时间：2013-02-01T16:13:28.277
> 
> 标签：php, comments, ini

我有 ini 文件选项：

```
test="hello;wordl" 
```

如果您在 parse_ini_file 函数中使用 INI_SCANNER_RAW 参数，则它会返回：

```
[test]="hello 
```

因为 (;) 是注释符号。

我尝试在 (;) 之前使用 (\) 转义符号，但结果是一样的。您对如何转义评论符号有任何想法吗？

# php - 没有 CGridView 的 dataProvider 分页

> ID：14650465
> 
> 赞同：0
> 
> 时间：2013-02-01T16:13:37.463
> 
> 标签：php, yii

如何在视图中显示分页，使用自己的设计，使用`dataProvider`？我不用`CGridView`来显示`dataProvider`项目。

控制器.php：

```
public function actionIndex()
{
    $dataProvider=new CActiveDataProvider('Projects', array(
        'criteria'=>array(
        ),
        'pagination'=>array(
            'pageSize'=>Yii::app()->params['itemsPerPage'],
        ),
    ));

    $this->render('index',array(
        'dataProvider'=>$dataProvider,
    ));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:50:39.263

所有的 CGridView、CListView 和 .. 都使用一个名为 CLinkPager 的小部件

[在这里查看更多信息](http://www.yiiframework.com/doc/api/1.1/CLinkPager)

它还在关于在控制器和评论中使用它的评论中提供了很好的例子。我相信您可以轻松地将您的数据提供程序用于 CLinkPager。祝你好运。阅读公共属性，您甚至可以为不同的页面使用自己的 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:17:26.413

您可以使用其中一个[`ClinkPager`](http://www.yiiframework.com/doc/api/1.1/CLinkPager)或[`CListPager`](http://www.yiiframework.com/doc/api/1.1/CListPager)呈现一个寻呼机。下面是一个使用示例`CLinkPager`

```
$this->widget('ClinkPager',array('pages'=>new CPagination(100))); 
```

# android - Robolectric TypedArray getString() 返回 null 或空字符串

> ID：14650466
> 
> 赞同：1
> 
> 时间：2013-02-01T16:13:38.017
> 
> 标签：android, robolectric

我正在使用 Robolectric 来测试一个扩展自定义视图的活动，但是当从 TypedArray 获取值时，一切都返回 null 或空字符串。为了从类型化数组中获取正确的值，需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T02:31:21.027

Robolectric 不会重新实现整个 Android 标准库。

这是 TypeArray Shadow 类的链接： [https ://github.com/pivotal/robolectric/blob/master/src/main/java/com/xtremelabs/robolectric/shadows/ShadowTypedArray.java](https://github.com/pivotal/robolectric/blob/master/src/main/java/com/xtremelabs/robolectric/shadows/ShadowTypedArray.java)

它似乎遗漏了一些东西。您可以使用此功能来确认它确实缺少这些功能： http: [//pivotal.github.com/robolectric/javadoc/com/xtremelabs/robolectric/Robolectric.html#logMissingInvokedShadowMethods()](http://pivotal.github.com/robolectric/javadoc/com/xtremelabs/robolectric/Robolectric.html#logMissingInvokedShadowMethods())

也就是说，有希望。 最近发布了[Robolectric 2.0 Alpha 1 。](http://robolectric.blogspot.com/2013/01/robolectric-20-alpha-1.html)虽然我还没有使用它，但它声称将需要更少的影子实现，因为它将直接使用 Android 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T22:43:36.550

尝试[`getStringArray()`](http://developer.android.com/reference/android/content/res/Resources.html#getStringArray(int))改用。例如：

```
String[] myStringArray = Robolectric.getShadowApplication().getResources()
    .getStringArray(R.array.MyStringArrayIdentifier) 
```

# java - 自动化配置、版本控制和部署基于 Maven 的 java 应用程序的可行方法是什么？

> ID：14650468
> 
> 赞同：6
> 
> 时间：2013-02-01T16:13:39.780
> 
> 标签：java, maven, deployment, versioning

我们正在维护一个中等规模的代码库，整合到一个单一的多（多）模块 Maven 项目中。总体而言，整个构建有多达十个不同系统组件（Web 应用程序 (.war)、实用程序 (.jar) 等）的输出工件。

到目前为止，我们的部署过程基于简单的 bash 脚本，这些脚本通过 maven 构建请求的工件，使用有关工件、目标环境和当前构建时间戳的信息标记 scm 存储库，然后将工件上传到所选环境应用程序服务器并发布命令来重新启动正在运行的守护进程。构建工件的配置是通过 Maven 配置文件和资源过滤进行的。所以我们的构建是特定于目标环境的。

这个过程对我们很有帮助，但出于不同的原因，我想朝着更复杂的方法前进。特别是我想摆脱 bash 脚本。

那么关于基于 Maven 的 Java 应用程序的配置、版本控制和部署的最佳实践是什么？

我们的构建是否应该与环境无关，并通过目标系统上的配置文件完成配置？如果是这样，开发人员将如何处理在各种应用程序服务器上部署的配置文件中包含新的配置选项？

我们是否应该使用 Maven-versioning 又名 Maven 发布插件来标记各种构建？

配置像 Jenkins 或 Teamcity 这样的 CI 服务器来为我们构建和可选地部署我们的工件是一个好主意吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T11:03:07.340

我喜欢认为有两个问题空间：

*   构建工件（理想情况下与环境无关，因为这意味着 QA 可以获取工件的哈希值，在该工件上运行他们的测试，当需要部署时，验证灰烬并且您知道它已经过 QA。如果您的构建产生不同的工件取决于 QA 的 env 还是 staging env 或生产 env，那么您必须做更多的工作以确保投入生产的工件已经过 QA 测试并已在 staging 中上演）

*   将工件运送到环境中。在该环境需要配置工件的情况下，运输过程应该包括该配置，或者通过将适当的配置文件放在目标环境中并让工件拾取它，或者通过打开工件、配置它们并将它们密封回去向上（但以可重复和确定的方式）

Maven 是为第一个问题空间而设计的。“Maven 方式”是关于生成与环境无关的构建工件并将它们发布到二进制工件存储。如果您查看 Maven 生命周期，您将看到在工件被`deploy`编辑到 Maven 存储库（二进制工件存储）之后阶段停止。简而言之，Maven 认为它的工作已经完成。`test`此外，对于uniting 和ing有生命周期阶段，`integration-test`这两个阶段都应该可以通过与环境无关的工件来实现，但这并不是您需要的完整测试集......而是要完成您的测试，您需要实际部署将构建的工件放入*真实*环境中。

许多人试图劫持 Maven 以超越其目标（包括我自己）。例如，您有[`cargo-maven-plugin`](http://cargo.codehaus.org/Maven2+plugin)和[`ship-maven-plugin`](http://mojo.codehaus.org/ship-maven-plugin)which 涉及 maven 最终游戏之外的方面（即在工件到达 maven 存储库之后）。其中，我个人觉得，`ship-maven-plugin`（我写的，因此我以前的“包括我自己”）最接近使用“在 maven 之后”，因为默认情况下它被设计为运行，而不是在`-SNAPSHOT`您检查过的项目版本上运行在磁盘上，而是在它从远程存储库中提取的同一项目的发布版本上，例如

```
mvn ship:ship -DshipVersion=2.5.1 
```

IMO，货物的目的是在`integration-test`生命周期的各个阶段使用，但同样，您可以将其劫持用于其他目的。

如果您正在生产收缩包装的软件，即用户购买并安装在其系统上的那种软件，安装程序本身旨在为最终用户环境配置应用程序。让 Maven 构建生成安装程序很好，因为实际的安装程序（至少在某种程度上）与环境无关。好的，它可能是仅 Microsoft Windows 的安装程序，或仅 Linux 的安装程序，但它并不关心它安装在哪台用户机器上。

不过，现在我们倾向于更多地关注软件即服务，因此我们将软件部署到我们控制的服务器上。更容易被拖到“Maven 黑暗面”，其中构建配置文件用于调整构建工件的内部配置（毕竟我们只有三个部署到的环境）并且我们正在快速移动，所以不想花时间让应用程序从外部到构建的工件（听起来很熟悉？）中获取特定于环境的配置。我称之为黑暗面的原因是你真的在与 maven 想要的工作方式作斗争......你总是想知道本地存储库中的 jar 是否是使用不同的配置文件构建的，所以你最终不得不做完整的始终保持干净的构建。`pom.xml`...试想一下，如果您遵循 maven 方式，您只需从存储库中获取工件并将其移动到不同的环境中，未经修改，不受干扰，并使用 MD5、SHA1（希望是 GPG）签名来证明它是同一个神器。

所以，你问，我们如何编码运输到生产......

那么有很多方法可以解决这个问题。他们都有一套相似的核心原则，即

*   将发送到环境的配方保存在源代码控制系统中

*   理想情况下，配方应该有两个部分，一个与环境无关的部分和特定于环境的部分。

您可以使用良好的旧 bash 脚本，或者您可以使用更“现代”的工具，例如为第二个问题空间设计的 chef 和 puppet。

# 建议

您应该为正确的工作使用正确的工具。

如果是我，我会这样做：

*   使用 Maven 发布插件削减发布

*   构建的工件应该*始终*与环境无关。

*   构建的工件应包含所有配置选项的“合理默认值”。换句话说，如果缺少没有合理默认值的*必需*配置选项，它们应该快速爆炸，或者如果未指定可选选项，它们应该以合理的方式执行。*所需*配置选项的一个示例可能是数据库连接详细信息（除非应用程序乐于使用内存数据库运行）

*   在厨师 vs 傀儡战争中选择一方（无论哪一方，如果你愿意，你可以改变立场。如果你有 ANT 思维，厨师可能更适合你，如果你喜欢依赖管理魔法，傀儡可能更适合你更好的）

*   开发人员应该在定义用于部署的主厨/木偶脚本方面有发言权，至少是这些脚本的与环境无关的部分。

*   操作应定义 Chef/puppet 部署的生产环境特定细节

*   将所有这些脚本保存在 SCM 中。

*   使用 Jenkins 或任何 CI 来自动化尽可能多的步骤。Jenkins 的升级构建插件是您的朋友。

*   您的最终游戏是每次提交，只要它通过了所有必需的测试，*可以*自动部署到生产中（或者也许有人说“继续”）......注意不要说你实际上是这样做的对于每一次提交，只有你可以

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:29:41.207

What I have used in the past which work well is to use Apache Karaf+iPOJO with my version control which was subversion (I would use git today)

What the version control allowed be to do was deploy a versioned copy of Apache Karaf and my configuration files. Any changes made from development or on the production system (when something needed an urgent fix) would still be traced and could be checked in (including information about who made what change when)

What Apache Karaf supports is dynamic deployment of maven libraries from your maven repository. i.e. you have configuration files which specify the versions of jar you want tot release and it will download them as required from your maven repo and run them. The iPOJO adds components for these models which you can configure using properties values (again versioned)

This assumes you have control of the end-to-end development to deployment, but can work very well even with multiple remote sites.

# facebook - 应用程序发布到用户墙 - Graph API 与 Open Graph

> ID：14650469
> 
> 赞同：3
> 
> 时间：2013-02-01T16:13:41.387
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

当然，有很多关于如何在 Facebook 上完成很多不同事情的信息。资源不是缺少的，但我缺少某种信息。`Open Graph`我觉得and有混淆`Graph API`。

我正在编写一个将消息发布到用户墙上的应用程序。

1.  用户授予对应用程序的访问权限
2.  应用程序收集此用户信息
3.  程序（在本例中为 Java）发布到用户墙

从理论上讲，这很简单。

为了让#3 工作，我使用了`Graph API` [发布](https://developers.facebook.com/docs/reference/api/publishing/)调用。效果很好。

但是在完成所有这些工作之后，我在同一页面上看到了`/PROFILE_ID/feed`调用状态：

> 在给定个人资料的供稿/墙上发布新帖子。**请注意，此功能将很快被删除。**

*伟大的！* 我尝试使用 Open Graph 找到等价物，但似乎找不到任何类似的东西。我已经看到一个应用程序在没有用户授权的情况下发布到墙上（我只希望用户授权应用程序一次，然后应用程序可以发布多次 - 用户不能参与每个帖子）它必须使用`Action`和`Objects`，但只有 Facebook 预定义...这仍然可以通过`HTTP request`吗？

为了消除混乱，在`Open Graph`高级主题[How-To: Use an app Access token](https://developers.facebook.com/docs/technical-guides/opengraph/publishing-with-app-token/)它指回使用

```
curl -X POST \
  -F 'message=Post%20with%20app%20access%20token' \
  -F 'access_token=YOUR_APP_ACCESS_TOKEN' \
  https://graph.facebook.com/4804827/feed 
```

这又回到了我使用很快就会被删除的`Graph API`原始**方法**。

我希望有人能帮助我理解这一点。我不需要代码。已经有太多只有代码和错误修复的帖子了。我相信我需要理解。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T21:57:45.453

让我们从您的请求 3 开始：程序（在本例中为 Java）发布到用户墙

要做到这一点 1\. 你需要知道你要在用户的墙上发布什么。

1.  根据[Facebook-Opengraph](https://developers.facebook.com/docs/opengraph/)，此信息被隔离为用户 + 操作 + 对象。

2.  现在您需要定义您想要的操作。参考[这里](https://developers.facebook.com/docs/opengraph/using-actions/)

3.  然后定义你的[对象](https://developers.facebook.com/docs/opengraph/using-object-api/)

4.  将您的故事或消息发布到用户的墙上。

# sql - 如何从 Sql id 生成器的当前 Sql 事务中排除一条语句？

> ID：14650470
> 
> 赞同：1
> 
> 时间：2013-02-01T16:13:41.433
> 
> 标签：sql, sql-server, transactions, sql-server-2008-r2, locking

我想实现 id 生成器，以便能够为多个表提供唯一的记录标识，并能够将 id 分配给在客户端形成的新记录的结构。

通常明显和标准的答案是 Guid，但由于空间效率和人类可读性，我想使用 int。

id 序列中存在间隙是可以的 - 这将发生在未完成的事务、丢失的客户端连接等情况下。

为了实现，我将有一个`Counters`带有字段的表，`NextId int`并在任何时候请求 id 时递增该计数器。当我需要多个或批量插入的 id 范围时，我可以将该 id 增加 1 以上。

为了避免更新`Counters`表时出现锁定瓶颈，我需要使 id 请求原子化并且在任何其他事务之外。所以我的问题是如何做到这一点？

这在应用程序级别不是问题 - 它可以发出一个原子事务请求来获取 id 池，然后在另一个更大的事务中使用这些 id 来插入记录。

但是，如果我想在 Stored Procedure 或 Trigger 中获取新的 id，我该怎么办？

如果我将该`update Counter set NextId=NextId+1`表请求包装到嵌套事务`begin tran`中......`commit tran`它不会将其排除在锁定之外，直到外部大事务结束。

有没有办法从当前事务中排除一个 Sql 语句，以便在语句结束时锁定结束，如果外部事务回滚，它不参与回滚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:16:33.803

您需要使用第二个连接。每个连接一次不能有多个事务。

# jquery - 跨浏览器 iOS 像选择器

> ID：14650478
> 
> 赞同：3
> 
> 时间：2013-02-01T16:13:54.327
> 
> 标签：jquery, internet-explorer, cross-browser

**我想知道是否有用于JQuery**或其他 JavaScript 框架的选择器 [跨浏览器] 插件。我发现了一些像[http://download.mobiscroll.com/](http://download.mobiscroll.com/)这样的插件，但它们是基于**HTML5**和**CSS3**的。仍然有用户使用**Internet Explorer**上网！

![像这样的东西](../Images/e711b4b471aaac4d8a61d60ce87ddb90.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:31:43.053

似乎没有适用于桌面的 iOS 选择器，如果有，现在是个好主意。

# jsf - 如何在将 web.xml 映射到 .html 而不是 .jsf 时上传文件 JSF 2.0？

> ID：14650479
> 
> 赞同：0
> 
> 时间：2013-02-01T16:13:59.243
> 
> 标签：jsf, jsf-2, tomcat7, web.xml

我正在关注本指南：[http](http://balusc.blogspot.com/2009/12/uploading-files-with-jsf-20-and-servlet.html) ://balusc.blogspot.com/2009/12/uploading-files-with-jsf-20-and-servlet.html一切都很顺利，除了我注意到它只有在我的web.xml 映射到 .jsf。有任何想法吗？

我在 mojarra 的 tomcat 7.0.12 jsf 2.1.17 上，这就是我不使用 Tomahawk 的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:19:04.537

您需要确保文件上传过滤器的过滤器映射的 URL 模式也与所需的 JSF 请求匹配。假设你`FacesServlet`有一个`<url-pattern>*.html</url-pattern>`，那么这应该做：

```
@WebFilter(urlPatterns={"*.html"}) 
```

更好的是，如果您打算将它专门用于通过 JSF 上传文件，那么您还可以将它映射到 faces servlet 的 servlet 名称上。假设你有一个`<servlet-name>facesServlet</servlet-name>`，那么应该这样做：

```
@WebFilter(servletNames={"facesServlet"}) 
```

# python - 正则表达式用特定值替换组

> ID：14650489
> 
> 赞同：0
> 
> 时间：2013-02-01T16:14:42.750
> 
> 标签：python, regex

我使用python 2.7

我只是尝试用一个值更改正则表达式中的组：

```
import re

r = "/foo/bar/(?P<pk>[0-9]+)/"
rc = re.compile(r)
#that i try to do : rc["pk"] = 42 and get the resut
print rc.groupindex
#return {'pk' : 1} 
```

我需要这样做，因为我不知道正则表达式，但我知道其中有一个组。

编辑：

我想要这样的结果：

```
rc["pk"] = 42
#now rc is /foo/bar/42 because (?P<pk>[0-9]+) is replace with 42 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:26:42.980

我不是 python 程序员，但我在许多其他系统中大量使用正则表达式。我相信您可以使用该[`re.sub`](http://docs.python.org/2/library/re.html#re.sub)函数对组进行反向引用，如下所示：

搜索模式：

```
'(/foo/bar/)[0-9]+(/)' 
```

更换模式：

```
'\g<1>42\g<2>' 
```

这将取代

```
'/foo/bar/17/' 
```

和

```
'/foo/bar/42/' 
```

这甚至适用于文件夹名称本身就是表达式的情况：

```
'(/\w+/\w+/)\d+(/)' 
```

Python 还支持环视语句，如下所示：

```
'(?<=/foo/bar/)\d+(?=/)' 
```

然后你只需将匹配替换为`'42'`. （环视不会“消耗”字符，因此`'((?<=...)'`and中的文本`'(?=...)'`不会被替换。）

# python - Python中Timeit和Time的区别

> ID：14650495
> 
> 赞同：5
> 
> 时间：2013-02-01T16:15:00.300
> 
> 标签：python, performance, time

两者之间是否有任何显着差异：

```
from time import time
start = time()
# some process
print time() - start 
```

和：

```
from timeit import timeit
def my_funct():
    # some process
print timeit(my_funct, number=1) 
```

例如，我将使用[Project Euler 1](http://projecteuler.net/problem=1)（因为它真的很容易理解/解决）

```
def pE1test1(): # using time()
    from time import time
    start = time()
    print sum([n for n in range(1, 1000) if n%3==0 or n%5==0])
    print time() - start

def pE1test2(): # using timeit
    print sum([n for n in range(1, 1000) if n%3==0 or n%5==0])

from timeit import timeit
pE1test1()
print timeit(pE1test2, number=1) 
```

这输出：

```
>>> 
233168
0.0090000629425
233168
0.00513921300363 
```

`timeit`和之间的主要区别是什么`time`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T16:18:07.890

`timeit`将使用系统上可用的最佳计时功能。请参阅 上的文档[`timeit.default_timer`](http://docs.python.org/2/library/timeit.html#timeit.default_timer)。

另外，`timeit` [关闭垃圾收集器](http://docs.python.org/2/library/timeit.html#timeit.Timer.timeit)。

另外，我相信你用`timeit`错了。您应该按照文档中的最后一个[示例传递一个字符串：](http://docs.python.org/2/library/timeit.html#examples)

```
print timeit("pE1test2()","from __main__ import PE1test2",number=1) 
```

当然，另一个主要区别是它`timeit`使得为数千次迭代计时函数的执行变得微不足道（这是计时结果唯一有意义的时间）。这降低了单次运行时间比其他运行时间更长的重要性（例如，由于您的系统资源被其他程序占用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:35:10.260

这两个模块的用途非常不同。

时间模块提供对底层系统提供的各种时间/日期功能的低级访问。

timeit 模块专门用于运行性能测试。

正如您所指出的，您可以及时使用函数进行简单的计时，但是人们在尝试进行性能测试时会陷入许多常见的陷阱。timeit 试图减轻这些影响，以便获得可以合理比较的可重复数字。

# android - 屏幕旋转时如何保留 MapOverlays

> ID：14650496
> 
> 赞同：0
> 
> 时间：2013-02-01T16:15:03.133
> 
> 标签：android, google-maps, overlay, screen-orientation, screen-rotation

我已将自定义叠加层添加到地图中，但是当我更改屏幕的方向时，叠加层会被删除。有人知道如何解决这个问题吗？

前： ![带有叠加层的图像](../Images/2fe266f0beec7e50e4ee19a3033cc9ed.png)

后： ![在此处输入图像描述](../Images/7db87a9e927d436e0f8901465f85d405.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:19:35.680

当您将纵向更改为横向时。它再次加载

```
android:configChanges="orientation|screenSize" 
```

将上面的代码添加到`manifest.xml`.

# java - 如何使用 ognl 更改会话范围属性？

> ID：14650499
> 
> 赞同：1
> 
> 时间：2013-02-01T16:15:05.317
> 
> 标签：java, jsp, session, struts2, ognl

是否可以使用更改会话范围属性`ognl`？

例如，如果我的会话中有一个名为的属性，`PROCESS_CONFIG`它是一个具有属性的对象`name`，那么如何`name`在 JSP 上更改此属性？

我尝试了以下方法，但它不起作用：

```
<s:textfield value="%{#session.PROCESS_CONFIG.name}" id="PROCESSNAME" name="#session.PROCESS_CONFIG.name"/> 
```

当我提交表单并在我的操作中访问会话对象时，通过`ServletActionContext.getRequest().getSession().getAttribute("PROCESS_CONFIG")`，属性`name`没有改变。

**编辑：**

保存在 session as 中的对象`PROCESS_CONFIG`是一个非常复杂的对象（由对其他对象的大量引用组成，带有对象列表），在我看来，我只想展示其属性的一个**非常小的子集**（包括其属性组合对象）。所以，用隐藏的所有其他字段污染我的 JSP 是不切实际的！有问题的视图是一种可以更改这些字段的值的表单，我想**直接自动**更新保存在我的 struts 2 会话中的对象`PROCESS_CONFIG`，就好像`PROCESS_CONFIG`对象是我的操作的属性一样。例如，给定前面的代码片段，`PROCESSNAME`是`PROCESS_CONFIG`object 的一个属性，我想在`PROCESS_CONFIG`object 中自动更新它而不是 `PROCESSNAME`属性，然后必须明确地`PROCESSNAME`对我的 `PROCESS_CONFIG`对象进行设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:18:10.347

S2 中的会话是一个映射，您可以在将其与 JSP 中的 OGNL 一起使用之前放置属性。要解决此问题，让您的操作实施`SessionAware`并查看官方[网站](http://struts.apache.org/release/2.3.x/docs/http-session.html)的描述和用法，并阅读[我们如何](http://struts.apache.org/release/2.3.x/docs/how-do-we-get-access-to-the-session.html)从常见问题解答中访问会话。

对于您的问题：您为什么没有在 JSP 中获得该属性。因为您使用 S2 和 OGNL 来获取它（通过`#session`参考）并且您没有将属性放入 S2 会话。S2 会话实现不同于标准的 http 会话。但是，如果您将属性设置为标准 http 会话，您仍然可以以 JSP 2.0 的方式访问它。反之亦然。

# gmail - Gmail IMAP 通过 php ouath2 Zend_Mail_Protocol_Imap - 获取 X-GM-THRID

> ID：14650501
> 
> 赞同：1
> 
> 时间：2013-02-01T16:15:07.163
> 
> 标签：gmail, imap, zend-mail

我正在使用 OAuth2 身份验证通过 IMAP 访问 GMail，并且`Zend_Mail_Protocol_Imap`.

这一切都很好。

我需要做的是以线程形式呈现电子邮件，就像 GMail 界面一样。谷歌让这变得非常容易，因为他们有一个`X-GM-THRID`标题，它将对话与一个 64 位无符号整数链接起来。

我的问题是：当出现一封电子邮件时，我如何找出`X-GM-THRID`它属于什么？

首先谷歌说有一个服务器扩展`X-GM-EXT-1`是活跃的。您可以使用命令检查它是否存在`CAPABILITY`（我有）。

所有信息都表明，如果这是活动的，那么`X-GM-THRID`将简单地作为标题返回，但事实并非如此。

也许我需要让谷歌通过 fetch 命令返回它。Google 确实在这里描述了一个简单的获取过程：

[https://developers.google.com/google-apps/gmail/imap_extensions](https://developers.google.com/google-apps/gmail/imap_extensions)

我的代码正在发送`TAG5 FETCH 3673 (FLAGS RFC822.HEADER X-GM-THRID)`，但标题不包含`X-GM-THRID`.

我什至将其简化为`TAG6 FETCH 3673 (X-GM-THRID)`与谷歌示例中描述的完全相同。在这种情况下，不返回任何标题。

我对命令不是很熟悉，`IMAP`我不确定是否`Zend_Mail_Protocol_Imap`抽象了一些处理，这意味着这个标头正在被删除。

但我知道这让我发疯。

我错过了什么吗？不是标题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:48:56.747

好的，所以看起来它不是标题。它是 IMAP 命令和响应中的一个属性。

Zend_Mail_Protocol_Imap 发送的标准 fetch 命令是“TAG5 FETCH 3673 (FLAGS RFC822.HEADER)”

处理响应的代码只希望处理“FLAGS”和“RFC822.HEADER”。它将这个信息传递给扩展 Zend_Mail_Part 的 Zend_Mail_Message 对象。

Zend_Mail_Part 解析关于标志的信息。它还解析标题。

我添加的附加“X-GM-THRID”属性实际上确实得到了响应。但由于它没有传递回 Zend_Mail_Message，所以我无法使用它。它在以太中丢失了（准确地说，在我的 Zend 库中 Zend_Mail_Storage_Imap 的第 171 行左右）。

So I've hacked the core... Zend_Mail_Storage_Imap::getMessage now expects $data['X-GM-THRID'] and passes it to the constructor Zend_Mail_Part. And I now have a method Zend_Mail_Part::getXGmThrid which solves all my problems. I'll obviously refactor them into my own classes extending Zend_Mail_Storage_Imap and Zend_Mail_Part in the not too distant... but for now I know this works.

# .htaccess - 设置 Zend Framework htaccess 文件

> ID：14650507
> 
> 赞同：0
> 
> 时间：2013-02-01T16:15:19.653
> 
> 标签：.htaccess, zend-framework

那是我的项目目录：

```
/webroot
/myproject
    index.php
    /application
    /config
    /library
    /public
        /css
        /img
        /js
        index.php
        .htaccess 
```

那是我在 /myproject/index.php 中的代码

```
<?php include 'public/index.php'; 
```

.htaccess 文件中的代码：

```
#SetEnv APPLICATION_ENV development

RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L]
RewriteRule !\.(js|ico|gif|jpg|png|css|swf|html|pps)$ index.php [NC,L]

order allow,deny
allow from all 
```

问题是我无法从 css、img、js 目录加载 css、img 或 js 文件。

```
The requested URL /css/style.css was not found on this server. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:28:12.020

这不是 htaccess 问题。您的 DOCUMENT_ROOT 应该指向您的公用文件夹，但看起来它当前指向您的 myproject 文件夹（这是一个很大的安全漏洞）。你可能会发现这`/myproject/css/style.css`会很好。你应该更新你的虚拟主机设置来解决这个问题。

# c# - 是否有一组 C# 数据只读通用集合/数据结构？

> ID：14650509
> 
> 赞同：0
> 
> 时间：2013-02-01T16:15:25.697
> 
> 标签：c#, collections, f#

我正在寻找一个只读通用集合库，它是`System.Collections.Generic;`与.NET v3.5 兼容的通用集合的.NET 版本的镜像（或者更确切地说是实现或扩展）。

我猜想 F# 可能有一些只读集合（但我不确定它们是否实现了 System.Collections.Generic 的接口）。除此之外，我宁愿不在服务器上安装 F#。我想我也许可以简单地部署 F# dll，如果可行的话，我怀疑是这样。

是否有实现 System.Collections.Generic 中的接口并提供相同性能（或更好）特性的只读通用集合类库？例如，IList 的随机访问数组支持的实现（只读）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T16:18:16.163

如果您想要*不可变*集合，而不仅仅是只读集合，您可能会对[Microsoft 的不可变集合预览](http://blogs.msdn.com/b/bclteam/archive/2012/12/18/preview-of-immutable-collections-released-on-nuget.aspx)感兴趣。

中的大多数类都有对应项`System.Collections.Generic`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T16:16:30.933

[`ReadOnlyCollection<T>`](http://msdn.microsoft.com/en-us/library/vstudio/ms132474%28v=vs.90%29.aspx)在_`System.Collections.ObjectModel`

它是您想要的任何集合的包装器。最常见的是使用 a`List<T>`并用`ReadOnlyCollection<T>`.

然后，在公共实现中，您只授予访问权限`ReadOnlyCollection<T>`并将其设置`List<T>`为私有。

```
public class MyClass
{
    private List<MyItemClass> list;
    public ReadOnlyCollection<MyItemClass> MyReadOnlyCollection { get; private set; }

    public MyClass()
    {
        list = new List<MyItemClass>() { ... };
        MyReadOnlyCollection = new ReadOnlyCollection<MyItemClass>(list);
    }
} 
```

如果你想要一个“不可变对象”：

```
public class MyClass
{
    public ReadOnlyCollection<MyItemClass> MyReadOnlyCollection { get; private set; }

    public MyClass()
    {
        List<MyItemClass> list = new List<MyItemClass>() { ... };
        MyReadOnlyCollection = new ReadOnlyCollection<MyItemClass>(list);
    }
} 
```

这样， of`MyReadOnlyCollection`和 of的状态`list`就不会改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:17:30.760

你应该看看 System.Collection.ObjectModel。

那里有一个只读字典、列表和可观察列表。

他们可以很好地处理任何可枚举的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T16:26:38.860

根据您的要求，将集合公开为 可能就足够了`IEnumerable<T>`，它本质上是只读的：

```
var list = new List<int> {1,2,3,4};
var coll = list.AsEnumerable(); //read-only interface 
```

但是，调用者仍然可以将集合转换为具体类型以使其可变：

```
var backToList = (List<int>)coll; //now it's mutable again 
```

您还可以选择使用 a `ReadOnlyCollection<T>`，它没有上述问题：

```
var readonlyCollection = list.AsReadOnly(); // returns a ReadOnlyCollection<int> 
```

# java - android程序中的ClassNotFoundException

> ID：14650511
> 
> 赞同：1
> 
> 时间：2013-02-01T16:15:33.507
> 
> 标签：java, android, logcat, classnotfoundexception

我正在从这本书开始学习 android 游戏 opengl es for android。根据他之前的示例，我重新创建了一个应用程序来测试书中的一些概念：这里是代码

```
package com.badlogic.androidgames.glbasics;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class OpenGLBasicsStarter extends ListActivity {
    String tests[] = { "GLSurfaceViewTest", "GLGameTest" }; 

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, tests));
    }                                                         

    @Override
    protected void onListItemClick(ListView list, View view, int position, 
            long id) {
        super.onListItemClick(list, view, position, id);
        String testName = tests[position];
        try {
            Class clazz = Class
                    .forName("com.badlogic.androidgames.framework.glbasics." + testName);
            Intent intent = new Intent(this, clazz);
            startActivity(intent);
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
} 
```

如您所见，它使用测试数组中报告的名称列表创建了一个其他活动列表。现在：这里有两个活动的代码：

```
package com.badlogic.androidgames.glbasics;

import java.util.Random;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.app.Activity;
import android.opengl.GLSurfaceView;
import android.opengl.GLSurfaceView.Renderer;
import android.os.Bundle;
import android.util.Log;
import android.view.Window;
import android.view.WindowManager;

public class GLSurfaceViewTest extends Activity {
    GLSurfaceView glView; 

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE); 
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);             
        glView = new GLSurfaceView(this); 
        glView.setRenderer(new SimpleRenderer());
        setContentView(glView); 
    }

    @Override
    public void onResume() { 
        super.onPause();
        glView.onResume(); 
    }

    @Override
    public void onPause() { 
        super.onPause();
        glView.onPause();
    }

    static class SimpleRenderer implements Renderer { 
        Random rand = new Random(); //crea i numeri random

        @Override
        public void onSurfaceCreated(GL10 gl, EGLConfig config) { 
            Log.d("GLSurfaceViewTest", "surface created"); 
        }

        @Override
        public void onSurfaceChanged(GL10 gl, int width, int height) { 
            Log.d("GLSurfaceViewTest", "surface changed: " + width + "x" 
                    + "height");
        }

        @Override
        public void onDrawFrame(GL10 gl) {
            gl.glClearColor(rand.nextFloat(), rand.nextFloat(),
                    rand.nextFloat(), 1);
            gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
        }
    }
} 
```

和

```
package com.badlogic.androidgames.glbasics;

import java.util.Random;

import javax.microedition.khronos.opengles.GL10;

import com.badlogic.androidgames.framework.Game;
import com.badlogic.androidgames.framework.Screen;
import com.badlogic.androidgames.framework.impl.GLGame;
import com.badlogic.androidgames.framework.impl.GLGraphics;

public class GLGameTest extends GLGame {
    @Override
    public Screen getStartScreen() { 
        return new TestScreen(this); 
    }

    class TestScreen extends Screen { 
        GLGraphics glGraphics; 
        Random rand = new Random(); 

        public TestScreen(Game game) {
            super(game);
            glGraphics = ((GLGame) game).getGLGraphics();
        }

        @Override
        public void present(float deltaTime) {
            GL10 gl = glGraphics.getGL();
            gl.glClearColor(rand.nextFloat(), rand.nextFloat(),
                    rand.nextFloat(), 1);
            gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
        }

        @Override
        public void update(float deltaTime) {
        }

        @Override
        public void pause() {
        }

        @Override
        public void resume() {
        }

        @Override
        public void dispose() {
        }
    }
} 
```

此外，还有 XML 清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.badlogic.androidgames.glbasics"
    android:versionCode="1"
    android:versionName="1.0" 
    android:installLocation="preferExternal" > 
    <uses-sdk
        android:minSdkVersion="9"
        android:targetSdkVersion="9" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="GL"
        android:debuggable="true"
        android:theme="@style/AppTheme" >
        <activity 
            android:label="GL Surface View Test"
            android:name=".GLSurfaceViewTest"
            android:configChanges="keyboard|keyboardHidden|orientation" />
        <activity 
            android:label="GL Game Test"
            android:name=".GLGameTest"
            android:configChanges="keyboard|keyboardHidden|orientation" />
        <activity
            android:name=".OpenGLBasicsStarter"
            android:label="OpenGL Basics Starter"
            android:configChanges="keyboard|keyboardHidden|orientation">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
    <uses-permission android:name="android.permission.WAKE_LOCK"/> 
</manifest> 
```

现在：当我启动应用程序时，一切似乎都很好：它显示了一个包含 2 个活动的列表；但是当我尝试单击一个时，logcat 上会出现一条消息：

```
02-01 16:10:20.540: W/System.err(394): java.lang.ClassNotFoundException: com.badlogic.androidgames.framework.glbasics.GLGameTest
02-01 16:10:20.550: W/System.err(394):  at java.lang.Class.classForName(Native Method)
02-01 16:10:20.550: W/System.err(394):  at java.lang.Class.forName(Class.java:234)
02-01 16:10:20.550: W/System.err(394):  at java.lang.Class.forName(Class.java:181)
02-01 16:10:20.550: W/System.err(394):  at com.badlogic.androidgames.glbasics.OpenGLBasicsStarter.onListItemClick(OpenGLBasicsStarter.java:26)
02-01 16:10:20.550: W/System.err(394):  at android.app.ListActivity$2.onItemClick(ListActivity.java:319)
02-01 16:10:20.550: W/System.err(394):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
02-01 16:10:20.550: W/System.err(394):  at android.widget.ListView.performItemClick(ListView.java:3513)
02-01 16:10:20.550: W/System.err(394):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
02-01 16:10:20.550: W/System.err(394):  at android.os.Handler.handleCallback(Handler.java:587)
02-01 16:10:20.550: W/System.err(394):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-01 16:10:20.550: W/System.err(394):  at android.os.Looper.loop(Looper.java:123)
02-01 16:10:20.550: W/System.err(394):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-01 16:10:20.550: W/System.err(394):  at java.lang.reflect.Method.invokeNative(Native Method)
02-01 16:10:20.550: W/System.err(394):  at java.lang.reflect.Method.invoke(Method.java:507)
02-01 16:10:20.550: W/System.err(394):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-01 16:10:20.550: W/System.err(394):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-01 16:10:20.550: W/System.err(394):  at dalvik.system.NativeStart.main(Native Method)
02-01 16:10:20.560: W/System.err(394): Caused by: java.lang.NoClassDefFoundError: com.badlogic.androidgames.framework.glbasics.GLGameTest
02-01 16:10:20.560: W/System.err(394):  ... 17 more
02-01 16:10:20.560: W/System.err(394): Caused by: java.lang.ClassNotFoundException: com.badlogic.androidgames.framework.glbasics.GLGameTest in loader dalvik.system.PathClassLoader[/mnt/asec/com.badlogic.androidgames.glbasics-1/pkg.apk]
02-01 16:10:20.560: W/System.err(394):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
02-01 16:10:20.560: W/System.err(394):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
02-01 16:10:20.560: W/System.err(394):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
02-01 16:10:20.560: W/System.err(394):  ... 17 more 
```

包或类的命名一定有错误，但我什么也看不到。那么问题出在哪里？有时我之前创建了一个类似（完全相同）的应用程序来测试其他东西，但我从来没有出错，所以......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:25:37.797

您正在搜索的异常状态`com.badlogic.androidgames.framework.glbasics`

注意“框架”

这就是你定义你的类的方式，异常的来源......

```
Class clazz = Class.forName("com.badlogic.androidgames.framework.glbasics." + testName); 
```

但是你所有的课程都是......

```
package com.badlogic.androidgames.glbasics; 
```

没有“框架”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:28:42.087

检查您的包裹声明：

在您的课程中，您有：

```
package com.badlogic.androidgames.glbasics; 
```

在您发布的错误中，您需要以下内容：

```
com.badlogic.androidgames.framework.glbasics.GLGameTest 
```

# sql - 使用导入向导导入平面文件时出现“日期格式无效”

> ID：14650514
> 
> 赞同：1
> 
> 时间：2013-02-01T16:15:44.917
> 
> 标签：sql, sql-server, import

下午好，

我有一个我无法弄清楚的困境。我正在尝试在 SQL 数据库表中导入平面文件，但遇到了问题。我在 SQL 中的列是出生日期 DOB 的日期时间列。提供给我的提取平面文件将此列作为日期...因此当我导入 SQL 时，我得到：

```
Messages
Error 0xc0202009: Data Flow Task 1: SSIS Error Code DTS_E_OLEDBERROR.  An OLE DB error has occurred. Error code: 0x80004005.
An OLE DB record is available.  Source: "Microsoft SQL Server Native Client 10.0"  Hresult: 0x80004005  Description: "Invalid date format".
 (SQL Server Import and Export Wizard)

Error 0xc020901c: Data Flow Task 1: There was an error with input column "DOB" (212) on input "Destination Input" (147). The column status returned was: "Conversion failed because the data value overflowed the specified type.".
 (SQL Server Import and Export Wizard)

Error 0xc0209029: Data Flow Task 1: SSIS Error Code DTS_E_INDUCEDTRANSFORMFAILUREONERROR.  The "input "Destination Input" (147)" failed because error code 0xC020907A occurred, and the error row disposition on "input "Destination Input" (147)" specifies failure on error. An error occurred on the specified object of the specified component.  There may be error messages posted before this with more information about the failure.
 (SQL Server Import and Export Wizard) 
```

我试图弄清楚如何将 00:00:00.000 之类的随机时间添加到平面文件中的每个 DOB 中。例如，他们发送给我 1983-11-30 但我想使用 1983-11-30 00:00:00.000

有没有办法做到这一点，或者有人知道我能做什么吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:34:52.100

`yyyy-MM-dd`MSSQL 将像您这样的字符串转换为日期没有问题。你会`00:00:00.000`自动结束。您发布的错误消息“转换失败，因为数据值溢出了指定的类型”表明其中一个日期超出了有效范围。您很可能得到了无效的出生日期（查找`0000-00-00`记录或类似信息）。如果平面文件以 Excel 可以轻松解析的方式分隔，请将其拉​​入 Excel 并对该列进行排序。查看最小值和最大值，您可能会发现违规记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-20T14:52:15.670

我的情况有点不同，但我觉得发布它可以帮助其他人。与 OP 不同，我将 Access 2000 mde 文件中的数据导入 sql server management studio，但与 OP 类似，我遇到了“无效数据格式”错误。我知道冲突是由于`DateTime`访问文件中的类型列与`DataTime`sql中的格式冲突造成的。

**解决方法：**在我完成导入数据过程后，在sql server management studio -> Tasks -> Import Data 中右键单击服务器名称，然后选择源（访问）、目标（sql server）和表来完成导入时，我注意到由于类型问题转移了 0 行。但是，在 SQL Server Management Studio 中为我创建了一个表，该表表示我试图从访问表中导入的表。它具有正确的列及其关联的数据类型。

所以我所做的是我右键单击表格以进入设计视图并将列的所有数据类型更改为`DataTime`just`Date`

[![](../Images/69f2716f03c4d869e836722c625b5476.png)](https://i.stack.imgur.com/Eaqbb.png)

然后我重新进行了导入数据的过程，并且成功传输了行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-14T23:55:05.390

这是旧的，但我在我的 SSIS 数据流任务中遇到了类似的问题，希望这可能对某人有所帮助：对我来说，解决方案是检查“将源中的空值保留为数据流中的空值”选项平面文件源编辑器窗口（在连接管理器页面中）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-02T23:27:36.723

我发现在将数据库从本地 EXPRESS 复制到我的生产服务器时，表定义`smalldatetime`不是`datetime`. 在选择表的向导中，您可以选择编辑映射。在那里你可以改变你的数据类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-08T08:29:13.333

在通过向导导入数据时，我将行的类型从更改`datetime`为`date`（在映射中），它对我有用。

# ios - inApp 购买... 3 个不同地点的不同产品

> ID：14650519
> 
> 赞同：0
> 
> 时间：2013-02-01T16:16:16.480
> 
> 标签：ios, in-app-purchase, uipopovercontroller, storekit

我有一个应用内购买问题...我正在升级一个 iPad 应用。以前使用过 MKStoreKit。开始升级到最新版本，但结果发现它太复杂，太不一样了，不仅仅是“插件”。从头开始创建了一个新的“商店工具包”，它更简单，专为 iOS5+ 构建，并且符合 ARC。

场景：我有 3 个点要购买。1) 是从弹出窗口的全面升级；2) 是一个“图标”弹出框，允许用户购买图标集以在应用程序中使用；3) 是一个“背景”弹出框，它允许用户购买背景集以在应用程序中使用。所有这些都在应用程序中的不同视图中。

显然，所有可用的项目都必须可用，但它们也需要被隔离到不同的弹出框中。

我有一个“商店经理”和经理的助手。管理器有一个类方法，它包括一个集合中列出的所有产品，并通过管理器中的单个“productIdentifier”变量访问。实际项目（图像）包含在应用程序中并连接到 SQL 数据库。我玩过额外的套装，并使用过 subarrayWithRange。我在弹出窗口中显示了正确数量的集合，尽管它们没有显示正确的计数，也没有显示每组中的正确图像。

我正在寻找有关如何将这些产品分成其独特的“类别”的建议，同时保留经理的产品标识符类，以便它们反馈给经理。我不是在寻找“为我”解决它的人……我完全相信解决自己的问题。我只是在寻找一些建议来引导我走上正确的道路。

我应该为每种购买类型创建单独的类方法吗？主集中的子集？

对我如何解决这个问题有什么建议吗？任何和所有的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:22:35.200

我能够通过使用刷新表方法来解决这个问题。我只是对 3 个不同的点使用不同的范围。

```
-(void)reloadData
{
    _products = nil;
    [TJ_IAPHelper.sharedInstance requestProductsWithCompletionHandler:^(BOOL success, NSArray *products)
     {
         // by using subarrayWithRange, we limit what is displayed in the table
         // those items that actually correspond to the background sets
         // from the Apple store
         _purchaseableBackgrounds = [products subarrayWithRange:NSMakeRange(0, 6)];
         if (success)
         {
             _products = _purchaseableBackgrounds;
             [self.tableView reloadData];
         }
         [self.refreshControl endRefreshing];
     }];
} 
```

# c# - 未找到视图“错误”或其主视图 - web.config 未指定错误视图

> ID：14650528
> 
> 赞同：5
> 
> 时间：2013-02-01T16:16:43.283
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4, error-handling

背景：在面向公众的 ASP.NET MVC4 应用程序中，有时我会收到对错误 URL 的入站请求。推荐人来自外部，所以我的应用程序不受我的控制（我没有在我的应用程序中生成错误的 URL）。所以 MVC 正确地引发了一个异常并且用户看到了自定义错误页面。global.asax 被编码为通过电子邮件将错误发​​送给我。

问题。尽管 URL 不正确，但我收到的错误是出乎意料的。

例如： - 用户（从外部 URL）导航到 /Blog/View - 博客控制器没有查看操作 - 用户看到 Error500 自定义错误网页 - 我通过电子邮件收到的错误是：

> 未找到视图“错误”或其主视图，或者没有视图引擎支持搜索的位置。搜索了以下位置：~/Views/Blog/Error.aspx ~/Views/Blog/Error.ascx ~/Views/Shared/Error.aspx ~/Views/Shared/Error.ascx ~/Views/Blog/Error。 cshtml ~/Views/Blog/Error.vbhtml ~/Views/Shared/Error.cshtml ~/Views/Shared/Error.vbhtml

我不明白为什么 ASP.NET MVC4 正在寻找一个名为“错误”的视图，以及为什么 MVC 不搜索 web.config 中指定的视图 (Error500)。以下是适用的源文件：

网络配置：

```
<customErrors mode="RemoteOnly" defaultRedirect="~/Error/Error500">
  <error statusCode="404" redirect="~/Error/Error404" />
</customErrors> 
```

错误控制器文件：

```
 public class ErrorController : Controller
   {
       public ActionResult Error500()
       {
           return View();
       }

       public ActionResult Error404()
       {
          return View();
       }
   } 
```

Error404.cshtml 文件（位于 /Views/Error 文件夹中）：

```
 @{
       ViewBag.Title = "Oops...";
       Layout = "~/Views/Shared/_Layout.cshtml";
   }

   <h1>That's interesting</h1>
   <p>The page you were looking for could not be found.</p> 
```

Error500.cshtml 文件（位于 /Views/Error 文件夹中）：

```
@{
    ViewBag.Title = "Oops...";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>We're sorry about that</h1>
<p>Something unexpected just happened.  Our IT staff has been notified...time to code a hot-fix!</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-24T02:31:20.243

您确定用户点击的 URL 不存在吗？从我刚刚制作的一个小型复制品看来，如果操作方法不存在，这将按需要工作。当在路由解决的操作方法中引发错误并且您正在使用 HandleErrorAttribute 时，您将收到您提到的错误。你的路由是什么样的？

顺便说一句，向您自己发送错误电子邮件并不是接收有关您的应用程序错误的可持续途径！您应该查看错误日志记录服务来为您处理此问题。我推荐[Bugsnag](https://bugsnag.com)。（免责声明：我在 Bugsnag 工作 :)）

# ios4 - 如何在 iphone sdk 中的视频聊天等设备之间流式传输视频捕获？

> ID：14650532
> 
> 赞同：0
> 
> 时间：2013-02-01T16:16:59.970
> 
> 标签：ios4, video-streaming, audiounit, nsstream

嗨，我想制作一个在 iOS 设备之间进行视频通话的应用程序。我研究过 opentok 和 idoubs，但我想从一开始就自己做。我搜索了很多，但找不到任何解决方案。我试图以一种我认为视频聊天的方式来实现这一点。直到现在我已经完成了以下事情（通过使用**流媒体 bonjour 教程**）：

1.  创建 avcapture 会话并在其中获取 cmsamplebufferref 数据

    ```
    - (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
       fromConnection:(AVCaptureConnection *)connection{

    if( captureOutput == _captureOutput ){

    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);

    //Lock the image buffer//
    CVPixelBufferLockBaseAddress(imageBuffer,0);
    //Get information about the image//
    uint8_t *baseAddress = (uint8_t *)CVPixelBufferGetBaseAddress(imageBuffer);

    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer);
    size_t width = CVPixelBufferGetWidth(imageBuffer);
    size_t height = CVPixelBufferGetHeight(imageBuffer);

    //Create a CGImageRef from the CVImageBufferRef//
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef newContext = CGBitmapContextCreate(baseAddress, width, height, 8, bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst);
    CGImageRef newImage = CGBitmapContextCreateImage(newContext);

    //We release some components
    CGContextRelease(newContext);
    CGColorSpaceRelease(colorSpace);

    previewImage= [UIImage imageWithCGImage:newImage scale:1.0 orientation:UIImageOrientationRight];
    CGImageRelease(newImage);

    [uploadImageView performSelectorOnMainThread:@selector(setImage:) withObject:previewImage waitUntilDone:YES];

    //We unlock the  image buffer//
    CVPixelBufferUnlockBaseAddress(imageBuffer,0);

    [pool drain];

     [self sendMIxedData:@"video1"];

    }

    else if( captureOutput == _audioOutput){

        dataA= [[NSMutableData alloc] init];
        CMBlockBufferRef blockBuffer;
        CMSampleBufferGetAudioBufferListWithRetainedBlockBuffer(sampleBuffer, NULL, &currentInputAudioBufferList, sizeof(currentInputAudioBufferList), NULL, NULL, 0, &blockBuffer);
          //CMSampleBufferGetAudioBufferListWithRetainedBlockBuffer(sampleBuffer, NULL, &bufferList, sizeof(bufferList), NULL, NULL, 0, &blockBuffer);

        for (int y = 0; y < currentInputAudioBufferList.mNumberBuffers; y++) {
            AudioBuffer audioBuffer = currentInputAudioBufferList.mBuffers[y];
            Float32 *frame = (Float32*)audioBuffer.mData;

            [dataA appendBytes:frame length:audioBuffer.mDataByteSize];

        }

      [self sendMIxedData:@"audio"];
      } 
    ```

2.  现在 sendMixeddata 方法正在将这些视频/音频字节写入 NSStream。

    ```
    NSData *data = UIImageJPEGRepresentation([self scaleAndRotateImage:previewImage], 1.0);

      const uint8_t *message1 = (const uint8_t *)[@"video1" UTF8String];

     [_outStream write:message1 maxLength:strlen((char *)message1)];

     [_outStream write:(const uint8_t *)[data bytes] maxLength:[data length]];
     const uint8_t *message1 = (const uint8_t *)[@"audio" UTF8String];

     [_outStream write:message1 maxLength:strlen((char *)message1)];

      [_outStream write:(const uint8_t *)[dataA bytes] maxLength:[dataA length]]; 
    ```

3.  现在字节在接收设备上的 nsstream 委托方法中接收

    *   现在的问题是我不知道这是不是视频聊天的方式

    *   我也没有成功如何使用接收字节显示为视频。

    *   我尝试通过发送带有字节的“audio”和“video1”字符串来了解它的视频或音频。我也尝试过不使用额外的字符串。图像被正确接收和显示，但音频非常失真。

    *   请告诉我这是否是制作视频聊天应用程序的正确方法。如果是，那么我应该怎么做才能使其可用。例如：我应该一起发送音频/视频数据而不是像我的示例那样单独发送。这里我使用简单的 bonjour 教程，但我将如何使用真实的服务器实现相同的效果

    当我被困在这里时，请指导我正确的方向。

谢谢 **（抱歉格式化。我试过但无法正确格式化）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T19:52:58.447

Video streaming apps use video codecs like vp8 or h.264, which will beat your JPEG encoded frames.

You should be able to display you received NSData by doing...

```
UIImage *image = [UIImage imageWithData:data]; 
```

# django - 如何使用通用视图将当前登录的用户传递给模型？

> ID：14650535
> 
> 赞同：1
> 
> 时间：2013-02-01T16:17:05.070
> 
> 标签：django, django-forms, django-crispy-forms

我是 django 的新手，我被要求将当前登录的用户与用户创建的上下文（我的模型类）相关联。
如何/在哪里检索用户（来自`request.user`）对象？如何在模型中设置？ **是否可以使用通用视图传递`request.user`给视图？**

这是我的上下文类：

```
from django.contrib.auth.models import User

class Context(models.Model):
    title = models.CharField(max_length=32)
    description = models.TextField()
    user = models.ForeignKey(User,null=False) 
```

这是表格：

```
class ContextForm(ModelForm):

    def __init__(self, *args, **kwargs):
        self.helper = FormHelper()
        self.helper.form_method = 'post'        
        self.helper.add_input(Submit('submit', 'Submit'))
        super(ContextForm, self).__init__(*args, **kwargs)

    class Meta:
        model = Context
        exclude = ('user') 
```

来自 urls.py 的网址：

```
url(r'^create/$', CreateView.as_view(model=Context, form_class=ContextForm),name='context_create'), 
```

最后，context_form.html 格式清晰

```
{% load crispy_forms_tags %}
{% block content %}
  {% crispy form %}
{% endblock %} 
```

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:35:05.677

查看[django-braces](https://github.com/brack3t/django-braces)！它有一个[表单 mixin](https://github.com/brack3t/django-braces/blob/master/braces/forms.py)，可以从 kwargs 中弹出当前用户。还有一个基于类的视图的[混合](https://github.com/brack3t/django-braces/blob/master/braces/views.py#L218-L228)，它将用户传递给表单。如果你正在做基于类的视图，只需使用 forms.py 和 views.py 中提供的 mixins，并覆盖 save() 方法。

表格.py：

```
from braces.forms import UserKwargModelFormMixin

class ContextForm(UserKwargModelFormMixin, ModelForm):

    def __init__(self, *args, **kwargs):
        self.helper = FormHelper()
        self.helper.form_method = 'post'        
        self.helper.add_input(Submit('submit', 'Submit'))
        super(ContextForm, self).__init__(*args, **kwargs)

    class Meta:
        model = Context
        fields = ('title', 'description',)

    def save(self, force_insert=False, force_update=False, commit=True):
        obj = super(ContextForm, self).save(commit=False)
        obj.user = self.user
        if commit:
            obj.save()
        return obj 
```

视图.py

```
from braces.views import UserFormKwargsMixin

class CreateContextView(UserFormKwargsMixin, CreateView)

    model = Context
    form_class = ContextForm 
```

网址.py：

```
url(r'^create/$', CreateContextView.as_view(),name='context_create'), 
```

您也可以像这样实现它：

表格.py：

```
class ContextForm(ModelForm):

    def __init__(self, *args, **kwargs):
        self.user = kwargs.pop("user", None)
        self.helper = FormHelper()
        self.helper.form_method = 'post'        
        self.helper.add_input(Submit('submit', 'Submit'))
        super(ContextForm, self).__init__(*args, **kwargs)

    class Meta:
        model = Context
        fields = ('title', 'description',)

    def save(self, force_insert=False, force_update=False, commit=True):
        obj = super(ContextForm, self).save(commit=False)
        obj.user = self.user
        if commit:
            obj.save()
        return obj 
```

视图.py

```
def some_view(request):
    ...
    form = ContextForm(request.POST, user=request.user)
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:32:46.127

在您的模型中：

```
from django.contrib.auth.models import User

class Context(models.Model):
    title = models.CharField(max_length=32)
    description = models.TextField()
    user = models.OneToOneField(User) 
```

在与用户关联的视图中：

```
 if request.method == 'POST':
            form = ContextForm(request.POST)
            if form.is_valid():
                    user = User.objects.create_user(username=form.cleaned_data['username'], email = form.cleaned_data['email'], password = form.cleaned_data['password'])
                    user.save()

                    obj = Context(user=user, title=form.cleaned_data['title'], description=form.cleaned_data['description'])
                    obj.save() 
```

如果您需要登录，只需添加 **@login_required**

```
@login_required
def myfunction(request): 
     ... 
```

看看[这个教程](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=45&cad=rja&ved=0CFQQFjAEOCg&url=http://hackedexistence.com/project-django.html&ei=CO4LUbrJC5Ko0AWopoCgCw&usg=AFQjCNG6NVaiY39iE2jhiFv1sQNoiqpO8A&sig2=LKU_2mQ2KsShLNT4_iUcLQ&bvm=bv.41867550,d.d2k)

**编辑**

我已经看到您编辑的问题，您需要将其添加到您的 urls.py

```
TEMPLATE_CONTEXT_PROCESSORS = (
    'django.core.context_processors.request',
) 
```

这意味着它将被传递给使用 RequestContext 呈现的所有模板，所有通用视图都是如此。

# apache - Apache solr 设置域优先级

> ID：14650537
> 
> 赞同：3
> 
> 时间：2013-02-01T16:17:07.897
> 
> 标签：apache, solr, indexing

我用 nutch 3 个域（domain01、domain02 和 domain03）爬行。我想获取所有包含特定关键字的帖子（例如“冠军联赛”），然后在结果中首先显示来自 domain02 的帖子、来自 domain01 的下一个帖子和来自 domain03 的最后一个帖子。只是我想按域对它们进行优先排序

如果有办法设置域的优先级？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:54:05.563

如果您始终具有相同的域顺序，那么您可以使用索引时间文档级别提升或查询时间按域（或域顺序）排序，然后按分数。

如果域顺序取决于查询，您可以使用[QueryElevationComponent](http://wiki.apache.org/solr/QueryElevationComponent)，但我认为您必须为每个高程规则提供完整的 ID 列表，并且它可能不支持顺序。

您还可以编写自己的[自定义函数查询](http://wiki.apache.org/solr/FunctionQuery)或组件（类似于 Query Elevation 一）。

# node.js - mongoose - 为什么 findOne 返回 mongoose Model 对象但 find 没有？

> ID：14650541
> 
> 赞同：1
> 
> 时间：2013-02-01T16:17:22.540
> 
> 标签：node.js, mongodb, mongoose

为什么当我使用 mongoose`findOne`方法时，它发现在回调中返回的对象是一个有效的 mongoose 模型对象（这意味着我可以在其上调用 mongoose 模型辅助方法，例如`id`子文档或`remove`删除它），以及何时我调用 mongoose`find`方法，我只是取回一个表示我正在寻找的文档的 javascript 对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T22:06:48.533

`findOne`给你一个单一的猫鼬文档，而`find`给你一个所有匹配的猫鼬文档的数组，而不是游标。

```
YourModel.find({ something: true }, function (err, docs) {
  if (err) return handleErrorSomehow(err)
  console.log(Array.isArray(docs)) // true
  docs.forEach(function (doc) {
    console.log(typeof doc.save) // function
  })
}) 
```

# javascript - onResourceReceived 记录每个资源两次？

> ID：14650542
> 
> 赞同：9
> 
> 时间：2013-02-01T16:17:24.740
> 
> 标签：javascript, phantomjs

我正在尝试使用 phantomjs 来获取有关竞争条件影响页面的可能性的一些指标，我有 2 个脚本文件，我网站上托管的一些功能取决于来自第三方的文件设置的一些全局变量。

我认为在 phantomjs 中使用 onResourceReceived 我可以记录每个文件加载的时间，然后多次运行该测试以了解这种竞争条件多久会导致问题，下面是我的代码示例（它不是实际代码我不隶属于 BBC）：

```
(function (p, wp) {
  "use strict";
  var page, start,
    count = 0, max = 10,
    webpage = require('webpage'),
    url = "http://www.bbc.co.uk";

  function process() {
    if (max == count) {
      console.log('done processing!');
      p.exit();
    } else {
      count++;
      start = new Date();
      page = wp.create();
      page.onResourceReceived = onResourceReceived;
      page.open(url, onOpen);
    }
  }

  function onResourceReceived(response) {
    var match, t = new Date(),
    url = response.url,
    status = response.status;
    t = t.valueOf() - start.valueOf();
    if (!!(match = url.match(/locator\.css/))) {
      console.log(match[0] + ': ' + t + 'msecs status: ' + status);
    }
    if (!!(match = url.match(/en-GB\.json/))) {
      console.log(match[0] + ': ' + t + 'msecs status: ' + status);
    }
  };

  function onOpen() {
    console.log('Test ' + count + ' done!!!');
    page.close();
    process();
  }

  process();
}(phantom, require('webpage'))); 
```

这有点像我预期的那样运行，除了每个文件被记录两次，这是为什么呢？有时时差是非常不同的。locator.css：323msecs 状态：200 locator.css：323msecs 状态：200 en-GB.json：2199msecs 状态：200 en-GB.json：2200msecs 状态：200 测试 1 完成！！！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-08T22:09:57.253

您需要检查 response.stage 属性。阶段将有开始和结束。start 给出第一个字节到达的时间， end 给出你得到完整响应的时间。

请在您的功能中添加检查。

```
function onResourceReceived(response) {
    if(response.stage == 'end') return;
  //rest of your code from above example. 
```

};

# google-drive-api - Google Drive SDK：将 MSWORD 转换为 PDF - ExportLinks NULL

> ID：14650543
> 
> 赞同：0
> 
> 时间：2013-02-01T16:17:25.260
> 
> 标签：google-drive-api

当我在 Google Drive 中有一个本地 Google Docs 文档的文件时，我可以访问`exportLinks`不同的 mime 类型，也可以访问 PDF；

但是我有已经生成的 MSWORD 文档。该`exportLinks`属性始终`null`用于 MSWORD 文档。在网络界面中，我可以打印下载完美转换的 PDF 文档。

**问题：我可以使用 SDK 以某种方式从 MSWORD 文件生成 PDF 吗？**

一直在寻找线索的文档。

下载/打印链接从一个真正的长 URI 下载：

```
https://doc-0o-a0-docsviewer.googleusercontent.com/viewer/securedownload/1ve0rd17der7n5d32lker62ffdq2175h/<randomstring>/<longnumber>/<randomstring>=/<randomstring>/<randomstring>==?docid=<randomstring>&chan=<randomstring>&dom=<googleappsdomain>&sec=<randomstring>&a=gp&filename=<filename>&nonce=<nonce>&user=<userid>&hash=<hasvalue> 
```

有人吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:04:45.057

ExportLinks 仅适用于 Google 原生格式的文档，因此您必须先将 MS Word 文档转换为 Google Docs，然后才能将其导出为 pdf（和其他支持的文件格式）。

# javascript - 带有过渡的多过滤器页面 - 同位素和流沙 JS 问题

> ID：14650548
> 
> 赞同：0
> 
> 时间：2013-02-01T16:17:38.787
> 
> 标签：javascript, filter

（注意：编辑因为我刚刚意识到这个问题在某种程度上是相关的，至少在我看来！）

我想创建一个多过滤器页面，其中的结果将被动画化......我正在尝试使用 2 个不同的插件（quicksand 和 Isotope），并且两种解决方案都有问题......

---ISOTOPE---（原创）

使用 Isotope，我需要根据活动类或过滤器的 ID 过滤数据，我已经存储在 JS 中，有人知道我该怎么做吗？

我设置了一个页面，其中包含 2 个不同的过滤器，例如“颜色”（红色、蓝色、橙色...）和“类型”（方形、圆形...）在选择时，如果选择了所有颜色，则将“活动”类转换为“全部”，并且可以激活多个子过滤器。这也将活动 li 项目的 id 列表保存在一个用于颜色过滤器的字符串和另一个用于形状过滤器的字符串中

我也已经在此链接上设置了类似于组合过滤器同位素演示的页面：http: [//isotope.metafizzy.co/demos/combination-filters.html](http://isotope.metafizzy.co/demos/combination-filters.html)它工作正常但不允许选择多个子-同时过滤。

[我在此链接http://fiddle.jshell.net/desandro/JB45z/](http://fiddle.jshell.net/desandro/JB45z/)上看到了带有过滤组合的演示，但它基于我想避免的单选按钮。

我不确定我想要做的事情是否容易......就像，如何告诉同位素根据具有活动类的子过滤器或基于 li 的总和进行过滤ID保存在我的两个字符串中？

感谢您的帮助，因为您可以轻松理解我根本不擅长 js，而且英语不是我的第一语言！

--- QUICKSAND ---（已编辑）

我刚刚意识到我没有解释为什么我将所选项目的 ID 存储在 js 字符串中。这也是关于不同的js问题。

我试图用流沙而不是同位素建立相同的系统。

但是由于流沙需要有一个起始 li 和一个目标 li 来显示动画，所以我设置了 js 以将一个数组传递给一个不同的临时 php 页面，该页面使用该数组来显示一个目标 li。

直到这里一切正常，但我无法取回原始页面中的 li 数据以让流沙执行动画。我的 js 的最后一部分似乎有我无法解决的问题（尝试了太多天没有成功），js 的最后一部分是：

```
$.post( 'destination_li_filtered.php', { 
 colorString, 
 shapeString, 
 $('#ids').attr('val') 
}, 
function(data) { // should contains the resulting data from the request (?)
 $('.list').quicksand( $(data).find('li'), 
 { adjustHeight: 'auto' }, 
 function() { 
 callbackCode(); 
} 
);
e.preventDefault(); 
}); 
```

外部页面destination-li-filtered 正在显示结果，但原始页面无法取回数据...

显然我需要用同位素或流沙来设置页面，而不是两者。

但我也想知道女巫是用大约 20 个过滤器显示 100 个结果的最佳插件（不考虑组合）。当然，这是最容易使用的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:21:59.640

您应该将单选按钮和视图更改视为单独的事物。

一个常见的误解是您应该将所有状态存储在 DOM 中（即选中哪个复选框）。DOM 是一个*视图*，您不会在*视图*中保留状态。

你的 JavaScript 中应该有一个状态。

喜欢：

```
var state = "all_selected"; // green, red, blue 
```

然后，当您选中单选按钮时，它将设置适当的状态并更新列表（根据状态显示/隐藏元素）。

这使您可以进行任何您想要的控制，无论是单选按钮、复选框还是完全自定义的东西。

# php - paypal Payments pro 直接付款检查是否成功

> ID：14650553
> 
> 赞同：0
> 
> 时间：2013-02-01T16:18:06.100
> 
> 标签：php, paypal

嘿家伙希望你能帮助我。

我似乎无法为他们的直接付款 api 和变量找到任何适当的参考或文档，所以我现在在这里问。

我是第一次直接付款，根据他们的集成指南，付款状态应该是“成功”，但这是我得到的响应（即我做 `print_r($doDirectPaymentResponse);` 变量来自哪里

`$doDirectPaymentResponse = $paypalService->DoDirectPayment($doDirectPaymentReq,$credential_object);` )

```
DoDirectPaymentResponseType Object
(
    [Amount] => BasicAmountType Object
        (
            [currencyID] => USD
            [value] => 12.00
        )

    [AVSCode] => X
    [CVV2Code] => M
    [TransactionID] => 9H515811FE178263Y
    [PendingReason] => 
    [PaymentStatus] => 
    [FMFDetails] => 
    [ThreeDSecureResponse] => 
    [PaymentAdviceCode] => 
    [Timestamp] => 2013-02-01T15:56:31Z
    [Ack] => Success
    [CorrelationID] => a0a240936bf65
    [Errors] => 
    [Version] => 94.0
    [Build] => 5060305
) 
```

另外， ack 字段到底说明了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:38:20.737

`Ack`是你要关注的领域。如果是`Success`或`SuccessWithWarning`，则支付成功，并且`TransactionID`有您的交易ID。如果是`Failure`或`FailureWithWarning`，则没有通过。

# asp-classic - Server.mappath (NOT) 和 webspace 之外的域文件夹

> ID：14650554
> 
> 赞同：0
> 
> 时间：2013-02-01T16:18:07.053
> 
> 标签：asp-classic, filepath, server.mappath

是否可以连接到位于 IIS 外部的常规域文件夹上的 MS-Access mdb？我们有一个公司范围的共享 (S:) 并且正在尝试与那里的文件夹中的 mdb 进行快速的脏连接。像这样：

```
Set conn = Server.CreateObject("ADODB.Connection")
odbcName = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & server.mappath("S:/share/Workspaces/IntranetData/Departments/IT/public_datasignatures.mdb") & ";"
conn.mode=3
conn.open odbcName,"","" 
```

我会用什么代替 server.mappath 作为物理位置？

感谢您的帮助，JM

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:47:24.293

您不需要`Server.MapPath`，因为您有完整的路径；但：

*   我想 s: 只会是来自用户登录的映射驱动器，而不是来自 IIS
*   您需要引用完整的网络路径，例如 \servername\share...
*   运行 IIS 的帐户需要网络访问另一台服务器上的该共享

将 .mdb 导入 SQL Server 并以这种方式连接到它，您会得到更好的服务（没有双关语！）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:05:38.227

您根本不需要地图，因为您已经知道确切的位置，所以：

`odbcName = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=S:/share/Workspaces/IntranetData/Departments/IT/public_datasignatures.mdb;"`

# behat - 使用 Behat/Mink 测试记住我的功能

> ID：14650557
> 
> 赞同：0
> 
> 时间：2013-02-01T16:18:13.367
> 
> 标签：behat, mink

我正在尝试在 Symfony2 项目中使用 Behat 和 Mink 测试记住我的功能。但是，我的方法不起作用。

我尝试了以下方法：

```
#behat.yml

Scenario: Checking Remember me
  Given I am on "/"
  When  I fill in "username" with "john"
  And   I fill in "password" with "john"
  And   I check "remember_me"
  And   I press "Login"
  Then  I should be logged in
  When  I restart the browser
  Then  I should be logged in

Scenario: Not Checking Remember me
  Given I am on "/"
  When  I fill in "username" with "john"
  And   I fill in "password" with "john"
  And   I press "Login"
  Then  I should be logged in
  When  I restart the browser
  Then  I should be logged out 
```

我的特征上下文包含（除其他外）以下方法：

```
#FeatureContext.php

/**
 * @Then /^I should be logged in$/
 */
public function iShouldBeLoggedIn()
{
    $this->assertElementOnPage('.user-area');
}

/**
 * @Given /^I should be logged out$/
 */
public function iShouldBeLoggedOut()
{
    $this->assertElementNotOnPage('.user-area');
}

/**
 * @When /^I restart the browser$/
 */
public function iRestartTheBrowser()
{
    $driver = $this->getSession()->getDriver();
    $session = new Session($driver);
    $session->start();
    $session->visit('/');
} 
```

问题出在`iRestartTheBrowser()`. 这没有做它应该做的事情。我正在寻找一种清除会话数据但保留 cookie 的方法。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:03:03.113

I think your spec may be better worded as

```
Scenario: Checking Remember me
    Given I have logged in before and selected remember me
    When I visit "some protected web page"
    Then I should be logged in 
```

The `Given` can set state for *remember me*, and perhaps the context for this can help you isolate the need to reset the session?

The above is also easier to read for laypeople and developers alike

# mysql - MySQL用另一个表的信息更新一个表

> ID：14650562
> 
> 赞同：0
> 
> 时间：2013-02-01T16:18:32.660
> 
> 标签：mysql, sql, sql-update

我只能用一个例子来解释这一点。

我有 2 个表 ( `table1`and `table2`)，每个表都包含`fielda` `fieldb` `fieldc`and `fieldd`。

我想要

```
UPDATE table2 
SET    table2.fieldc = table1.fieldc, 
       table2.fieldd = table1.fieldd 
WHERE  table2.fielda = table1.fielda 
       AND table2.fieldb = table1.fieldb 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:20:45.393

你只是错过了“table1”声明

```
update table2, table1
... 
```

其他版本

```
UPDATE table2
JOIN table1 
  ON table2.fielda = table1.fielda 
       AND table2.fieldb = table1.fieldb 
SET    table2.fieldc = table1.fieldc, 
       table2.fieldd = table1.fieldd 
```

# java - 如何在Java中组合两个对象数组

> ID：14650563
> 
> 赞同：3
> 
> 时间：2013-02-01T16:18:38.597
> 
> 标签：java, arrays, testng

我有这个从 excel 文件中获取信息的小脚本。在我收集了我需要的信息后，我想将这两个数组合并为一个。那可能吗？

```
public Object[][] createData1() throws Exception {
    Object[][] retObjArr1 = data.getTableArray("C:\\Users\\OAH\\Workspaces\\Chrome2\\Testdata2.xls", "Sheet1", "normalCustomer");
    Object[][] retObjArr2 = data.getTableArray("C:\\Users\\OAH\\Workspaces\\Chrome2\\Testdata2.xls", "Sheet2", "langLogin");
    return(retObjArrCombined); //I want to return one array with both arrays
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:23:39.703

您可以使用该`System.arraycopy`方法（是的，全部小写）。[Java 文档](http://docs.oracle.com/javase/1.7/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)。您可以使用`java.util.Arrays`该类对数组做更多的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T16:23:53.810

这个怎么样？

[链接到另一个堆栈问题！！！！！！](https://stackoverflow.com/questions/5820905/how-do-you-append-two-2d-array-in-java-properly)

```
 public static int[][] append(int[][] a, int[][] b) {
    int[][] result = new int[a.length + b.length][];
    System.arraycopy(a, 0, result, 0, a.length);
    System.arraycopy(b, 0, result, a.length, b.length);
    return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-23T17:19:46.243

这是简单的解决方案：

```
private static Object[] concatenate(Object[] a, Object[] b) {
    Collection<Object> result = new ArrayList<Object>(a.length + b.length);
    for (Object val : a) {
        result.add(val);
    }
    for (Object val : b) {
        result.add(val);            
    }
    return result.toArray();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T17:17:22.190

其他方式：

```
Object[][] one = {{1, 2, 3}, {4, 5}, {6}};
Object[][] two = {{7, 8}, {9}};
List<Object[]> holder = new ArrayList<>();

Collections.addAll(holder, one);
Collections.addAll(holder, two);

Object[][] result = holder.toArray(new Object[holder.size()][]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T17:23:13.777

以下代码可完成您的任务：

```
Object[][] retObjArr1 = { { "a00", "a01" }, { "a10", "a11" },
        { "a20", "a21" } };
Object[][] retObjArr2 = { { "b00", "b01" }, { "b10", "b11" },
        { "b20", "b21" } };

List<Object[][]> list = new ArrayList<Object[][]>();
list.add(retObjArr1);
list.add(retObjArr2);

int totalRow = 0;
for (int all = 0; all < list.size(); all++) {
    totalRow += list.get(all).length;
}
Object[][] retObjArrCombined = new Object[totalRow][];
int rowCount = 0;
for (int all = 0; all < list.size(); all++) {
    Object[][] objects = list.get(all);
    for (int i = 0; i < objects.length; i++) {
        retObjArrCombined[rowCount] = objects[i];
        rowCount++;
    }
}
for (int i = 0; i < retObjArrCombined.length; i++) {
    for (int j = 0; j < retObjArrCombined[i].length; j++) {
        System.out.println("value at :(" + i + "," + j + ") is:"
                + retObjArrCombined[i][j]);
    }
} 
```

在此代码中，包含从等`Object[][] retObjArrCombined`复制的所有数组...并打印以下输出：`retObjArr1``retObjArr2`

```
value at :(0,0) is:a00
value at :(0,1) is:a01
value at :(1,0) is:a10
value at :(1,1) is:a11
value at :(2,0) is:a20
value at :(2,1) is:a21
value at :(3,0) is:b00
value at :(3,1) is:b01
value at :(4,0) is:b10
value at :(4,1) is:b11
value at :(5,0) is:b20
value at :(5,1) is:b21 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-11T08:42:35.620

*单线与流没有计算引体向上*
*，是的，它会慢几毫秒*

`Object[][] combi = Stream.concat( Arrays.stream( retObjArr1 ), Arrays.stream( retObjArr2 ) ).toArray( Object[][]::new );`

# linux - Android 开发者工具（ADT）安装在不作为 sudo 运行时会出现 GTK 错误

> ID：14650564
> 
> 赞同：0
> 
> 时间：2013-02-01T09:51:53.447
> 
> 标签：linux, installation, eclipse

[我使用官方说明](http://developer.android.com/sdk/installing/bundle.html)在 Ubuntu 12.10 上安装了包含 Eclipse 平台的 Android 开发人员工具 (ADT) 包。当我从命令行运行程序时，我看到此消息 8 次：

> LIBDBUSMENU-GTK-CRITICAL **：watch_submenu：断言“GTK_IS_MENU_SHELL（菜单）”失败

当我退出时，我得到：

> (ADT:5170): LIBDBUSMENU-GTK-CRITICAL **: watch_submenu: 断言 `GTK_IS_MENU_SHELL(menu)' 失败
> 
> (ADT:5170): LIBDBUSMENU-GTK-CRITICAL **: watch_submenu: 断言 `GTK_IS_MENU_SHELL(menu)' 失败
> 
> (ADT:5170): LIBDBUSMENU-GTK-CRITICAL **: watch_submenu: 断言 `GTK_IS_MENU_SHELL(menu)' 失败
> 
> (ADT:5170): LIBDBUSMENU-GTK-CRITICAL **: watch_submenu: 断言 `GTK_IS_MENU_SHELL(menu)' 失败
> 
> (ADT:5170): LIBDBUSMENU-GTK-CRITICAL **: watch_submenu: 断言 `GTK_IS_MENU_SHELL(menu)' 失败
> 
> (ADT:5170): LIBDBUSMENU-GLIB-WARNING **: 试图移除一个不相信我们是它的父母的孩子。
> 
> (ADT:5170): LIBDBUSMENU-GTK-CRITICAL **: watch_submenu: 断言 `GTK_IS_MENU_SHELL(menu)' 失败
> 
> (ADT:5170): LIBDBUSMENU-GTK-CRITICAL **: watch_submenu: 断言 `GTK_IS_MENU_SHELL(menu)' 失败

出了什么问题？ 我应该期望 ADT 正常工作，还是出现一些错误，或者功能减少
？

**更新**

运行时`sudo`：

> sudo adt-bundle-linux-x86_64/eclipse/eclipse

没有 GTK 错误。如何在不遇到`sudo`GTK 错误的情况下运行 ADT/Eclipse。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:44:59.907

首先，只需运行它，看看它是否正常运行。无需依赖期望:)

您收到的错误是 GTK 错误消息。这些很少，如果有的话，很重要，并且与抛出它们的程序的核心功能无关。它们通常意味着程序的 GUI 中有一些过时的元素。我不会太担心他们。

正如我之前所说，只是试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T11:01:36.427

您可以尝试将环境变量 UBUNTU_MENUPROXY 设置为 0。这解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T06:25:11.377

我也面临这个问题。上面提到的解决方法是使用 sudo 运行 eclipse，但这会在未来产生问题。如果您使用 maven 或 gradle 等构建工具，您将面临与权限相关的问题，因为这些工具无法写入目标文件夹。

在此之前，64 位架构的机器必须需要以下内容。

sudo apt-get install ia32-libs

[正如这里](https://askubuntu.com/questions/250168/android-developer-tools-adt-installation-gives-gtk-errors-when-not-run-as-sudo)提到的。安装 ia32-libs 的 sudo 是问题的根本原因。在尝试启动 eclipse 时安装 ia32-libs 后，对这些库的访问受到限制，您必须使用 sudo 才能成功启动 eclipse。在安装 ia32-libs 时需要一些 Linux 专家来帮助获得权限，如果可以做到这一点，没有 sudo，它会让生活变得更轻松。以下是我在没有 sudo 的情况下安装 ia32-libs 时遇到的错误。

E: 无法打开锁定文件 /var/lib/dpkg/lock - open (13: Permission denied) E: 无法锁定管理目录 (/var/lib/dpkg/)，你是 root 吗？

# c++ - 从原始标题和图像数据创建位图

> ID：14650566
> 
> 赞同：0
> 
> 时间：2013-02-01T16:18:46.317
> 
> 标签：c++, bitmap

我对在 C++ 中操作位图数据非常陌生，但我遇到了问题。我正在尝试遵循维基百科中的[这个](http://en.wikipedia.org/wiki/BMP_file_format#Example_1)例子。这是我正在使用的代码：

```
#include <iostream>
#include <fstream>
#include <Windows.h>

using namespace std;

int main()
{

    //fileheader
    BITMAPFILEHEADER* bf = new BITMAPFILEHEADER;
    bf->bfType = 66;
    bf->bfSize = 70;
    bf->bfOffBits = 54;

    //infoheader
    BITMAPINFOHEADER* bi = new BITMAPINFOHEADER;
    bi->biSize = 40;
    bi->biWidth = 2;
    bi->biHeight = 2;
    bi->biPlanes = 1;
    bi->biBitCount = 24;
    bi->biCompression = 0;
    bi->biSizeImage = 16;
    bi->biXPelsPerMeter = 2835;
    bi->biYPelsPerMeter = 2835;
    bi->biClrUsed = 0;
    bi->biClrImportant = 0;

    //image data
    unsigned char* thedata = new unsigned char;
    thedata[0] = 0;
    thedata[1] = 0;
    thedata[2] = 255;

    thedata[3] = 255;
    thedata[4] = 255;
    thedata[5] = 255;

    thedata[6] = 0;
    thedata[7] = 0;

    thedata[8] = 255;
    thedata[9] = 0;
    thedata[10] = 0;

    thedata[11] = 0;
    thedata[12] = 255;
    thedata[13] = 0;

    thedata[14] = 0;
    thedata[15] = 0;

    //dc
    HDC dc = GetDC(NULL);

    //bitmap info
    BITMAPINFO* bmi = (BITMAPINFO*)bi;

    //handle to bitmap
    HBITMAP hbmp = CreateDIBitmap(dc, bi, CBM_INIT, thedata, bmi, DIB_RGB_COLORS);

    //output to bmp....?
    ofstream outFile;
    outFile.open("outtestbmp.bmp");
    outFile << hbmp;
    outFile.close();

} 
```

过去几天我一直在搜索谷歌，试图弄清楚如何完成这项工作，但我似乎仍然无法让它发挥作用。

这符合没有错误，但最后的 outtestbmp.bmp 文件是无法打开的。我是否犯了任何巨大的错误（可能有几十个）阻止它工作？（我高度怀疑使用 ofstream 输出我的 bmp 数据是错误的）。

**编辑**：有人告诉我将 bftype 设置为 66 是错误的。什么是正确的值？

另外，我创建了一个输出应该是什么的 .bmp 文件。这是该 bmp 的十六进制数据：

```
42 4D 46 00 00 00 00 00 00 00 36 00 00 00 28 00 00 00 02 00 00 00 02 00 00 00 01 00 18        
00 00 00 00 00 10 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 FF FF  
FF FF 00 00 FF 00 00 00 FF 00 00 00 
```

这是我正在输出的 .bmp 的数据：

```
42 00 46 00 00 00 CD CD CD CD 36 00 00 00 28 00 00 00 02 00 00 00 02 00 00 00 01 00 18 
00 00 00 00 00 10 00 00 00 13 0B 00 00 13 0B 00 00 00 00 00 00 00 00 00 00 00 00 FF FF 
FF FF 00 00 FF 00 00 00 FF 00 00 00 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:26:06.457

```
bf->bfType == 66; 
```

这在两个方面是错误的。首先它是错误的值（魔法值是小端机器上的字节'BM'或0x4d42），其次它不是一个赋值。

然后：

```
unsigned char* thedata = new unsigned char; 
```

只分配*1 个*字符？

还有这个：

```
outFile << hbmp; 
```

不做你认为它做的事。你只是在写一个句柄。你不需要创建一个位图，你只需要写出你已经初始化的数据结构（一旦你让它们正确）。

你为什么要更新一切？不需要动态分配这些东西（你也不会删除它）。

我通常会这样做（为简洁起见，删除了一些代码）：

```
BITMAPFILEHEADER bf;
bf.bfType = 0x4d42;
bf.bfSize = 70;
bf.bfOffBits = 54;

//infoheader
BITMAPINFOHEADER bi;
bi.biSize = 40;
bi.biWidth = 2;
etc...

//image data
unsigned char* thedata = new unsigned char[16]; // Should really calculate this properly
thedata[0] = 0;
....

//output to bmp....?
ofstream outFile;
outFile.open("outtestbmp.bmp");
outFile.write((char *)&bf,sizeof(bf));
outFile.write((char *)&bi,sizeof(bi));
outFile.write((char *)thedata, 16);
outFile.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:24:28.203

首先，您没有为所有像素分配足够的内存，它应该类似于

```
unsigned char* thedata = new unsigned char[numPixels * bytesPerPixel]; 
```

在您的情况下，使用`2`图片`2`和`24 bpp`（每像素位数），您应该分配 12 个字节。

每个像素将对应于它们的`red`,`green`和`blue`通道的一行中的三个字节。

注意：我从未使用过 Window 的位图创建过程，但我使用了许多库来处理图像，包括`FreeImage`,`SDL`和`GD`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T16:30:09.433

HBITMAP 是位图的句柄，而不是实际的位图。真正的位图存储在内核内存中。如果您只是将位图写入文件，则无需调用 GDI。即使它是实际的位图 cout 也需要运算符重载才能将内存结构实际写入文件，因为它与磁盘上的存储结构不同。

您需要做的就是将 BITMAPFILEHEADER 写入文件，然后将 BITMAPINFOHEADER 写入文件，然后写入数据（如果我们谈论的是 RGB，非索引）。

这是有关位图如何实际存储在磁盘上的更多信息。

[位图存储 (MSDN)](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183391%28v=vs.85%29.aspx)

从文件中读取位图是一样的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T16:30:30.060

首先，您需要为像素分配足够的数据：

```
unsigned char* thedata = new unsigned char[2 * 2 * 3]; 
```

然后你需要使用`write`并打开文件为`binary`.

代替：

```
outFile.open("outtestbmp.bmp");
outFile << hbmp; 
```

就像是：

```
outFile.open("outtestbmp.bmp", ios::binary||ios::out);

outfile.write(reinterpret_cast<char *>(bf), sizeof(BITMAPFILEHEADER));
outfile.write(reinterpret_cast<char *>(bi), sizeof(BITMAPINFOHEADER));
outfile.write(reinterpret_cast<char *>(thedata), 2 * 2 * 3); 

outfile.close(); 
```

# jquery - jQuery不选择器与大于过滤器混合

> ID：14650577
> 
> 赞同：0
> 
> 时间：2013-02-01T16:19:15.867
> 
> 标签：jquery, jquery-selectors

我正在尝试编写这样的选择器：

```
$('.hide:not(.login-form, .custom-school-container, .school_select:gt(1))').removeClass('hide') 
```

但是，我收到以下错误：

```
Uncaught Error: Syntax error, unrecognized expression: .hide:not(.login-form, .custom-school-container, .school_select 
```

我显然混淆了我的语法，但我认为你可以将`:gt(index)`in 包含在一个`:not`选择器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:21:42.120

这就是我最终让它工作的方式

```
$('.hide:not(.login-form, .custom-school-container)').filter('.school_select:gt(1)').removeClass('hide') 
```

# javascript - jQuery 日志事件绑定

> ID：14650581
> 
> 赞同：0
> 
> 时间：2013-02-01T16:19:27.893
> 
> 标签：javascript, jquery, javascript-events, event-handling

需要你们的帮助。

假设我在两个不同的 JS 文件中有以下代码行：

```
$("select#selectorId").change(function() { alert("fake function"); }); 
```

每次我将函数绑定到该选择控件的更改事件时，我都希望能够在控制台上登录控件接收什么函数以及它被绑定到什么事件。

任何人都知道这是否可能（几乎一切都是正确的？）以及如何做到这一点？

提前致谢。

一切顺利！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:42:21.907

```
$("select#selectorId").on('change',function() { alert("fake function"); }); 
```

# python - 仅获取 numpy 数组中每一行的特定列

> ID：14650584
> 
> 赞同：17
> 
> 时间：2013-02-01T16:19:36.517
> 
> 标签：python, numpy, python-2.7

> **可能重复：**
> [numpy：按列访问数组](https://stackoverflow.com/questions/4455076/numpy-access-an-array-by-column)

我有一个 numpy 数组（numpy 被导入为 np）

```
gona = np.array([[ 1,  2,  3],
       [ 4,  5,  6],
       [ 7,  8,  9],
       [10, 11, 12]]) 
```

我可以通过 gona[1][:] 获取第一行整列的值。

> 数组（[4, 5, 6]）

但是，如果我尝试获取所有行的特定列的所有值（比如我想要每一行中第一列的值），我会尝试 gona[:][1]。但是我从中得到的结果和以前一样。

这可能是什么原因？我如何在 numpy 中做这样的事情？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-01T16:26:51.717

你实际上想要这样做：

```
>>> a
array([[ 1,  2,  3],
       [ 4,  5,  6],
       [ 7,  8,  9],
       [10, 11, 12]])
>>> a[:,1]
array([ 2,  5,  8, 11]) 
```

`a[:]`只返回整个数组，然后`a[:][1]`返回第二行`a`。我认为这就是你产生困惑的地方。

有关索引多维数组的更多信息，请参阅[暂定 Numpy 教程的](http://www.scipy.org/Tentative_NumPy_Tutorial)[这一](http://www.scipy.org/Tentative_NumPy_Tutorial#head-864862d3f2bb4c32f04260fac61eb4ef34788c4c)部分。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-01T16:30:50.170

在大括号的定位方面似乎有点混乱，`gona[:][1]`首先从数组中选择所有内容，然后从该数组中选择第二行。要选择特定列，请将索引放在以逗号分隔的相同方括号内：

```
gona = np.array([[ 1,  2,  3],
       [ 4,  5,  6],
       [ 7,  8,  9],
       [10, 11, 12]])

gona[1,:]
Out[21]: array([4, 5, 6])

gona[:,1]
Out[22]: array([ 2,  5,  8, 11])

gona[:,0]
Out[23]: array([ 1,  4,  7, 10]) 
```

例如，您也可以只选择一系列行

```
gona[0:2,0] # only take the two first rows of the first column
Out[24]: array([2, 5]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:22:36.143

像这样：

```
gona = numpy.array([[ 1,  2,  3],
       [ 4,  5,  6],
       [ 7,  8,  9],
       [10, 11, 12]])

# List comprehension, just get each element in 'gona', and then get first element in that list
out = [x[0] for x in gona]

print out 
```

输出：

```
>>> 
[1, 4, 7, 10]
>>> 
```

# excel - Excel 用户访问 THREDDS 数据服务器上的 NetCDF 文件的最佳方式是什么？

> ID：14650585
> 
> 赞同：1
> 
> 时间：2013-02-01T16:19:36.003
> 
> 标签：excel, netcdf, thredds

[我已经看到以下使用excel](https://publicwiki.deltares.nl/display/OET/OPeNDAP+access+with+Excel)访问 netcdf 文件的示例。

我想知道是否可以根据特定索引访问数据的某个部分（例如，来自 4D 变量的地图上某个点的参数时间序列）

在我看来，没有任何编码就不可能吗？

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:58:13.610

我知道有两种方法可以使用 Excel 从 Unidata 的 THREDDS 数据服务器访问数据：

1) 使用 OpenDAP 的 ASCII 响应提取时间序列，如下所述： [https](https://publicwiki.deltares.nl/display/OET/OPeNDAP+access+with+Excel) ://publicwiki.deltares.nl/display/OET/OPeNDAP+access+with+Excel 。这种方法适用于任何 OPeNDAP 服务器。

2) 使用 THREDDS 数据服务器提供的 NetCDF-Subset Service（这里我使用的是最新的 TDS，版本 4.3）。

因此，如果您访问 THREDDS 提供的特定数据集，例如：

[http://geoport-dev.whoi.edu/thredds/catalog/coawst_2_2/fmrc/catalog.html?dataset=coawst_2_2/fmrc/coawst_2_2_best.ncd](http://geoport-dev.whoi.edu/thredds/catalog/coawst_2_2/fmrc/catalog.html?dataset=coawst_2_2/fmrc/coawst_2_2_best.ncd)

然后点击 NetcdfSubset 服务，然后点击“Grid as Point Dataset”，你会得到这个表格：

[http://geoport-dev.whoi.edu/thredds/ncss/grid/coawst_2_2/fmrc/coawst_2_2_best.ncd/dataset.html](http://geoport-dev.whoi.edu/thredds/ncss/grid/coawst_2_2/fmrc/coawst_2_2_best.ncd/dataset.html)

您可以在其中提取最接近特定位置的时间序列，并选择 CSV 作为输出类型，当然可以轻松将其加载到 Excel 中。好处是这个表单只生成一个 RESTful URL 查询，可以通过代码修改或轻松生成。因此，例如，此查询`temp`在表面附近的 6 小时间隔内提取变量的时间序列，并且最接近 -70.6W、42.3N：

[http://geoport-dev.whoi.edu/thredds/ncss/grid/coawst_2_2/fmrc/coawst_2_2_best.ncd?var=temp&latitude=42.3&longitude=-70.6&time_start=2011-08-01T00%3A00%3A00Z&time_end=2011-08 -01T06%3A00%3A00Z&vertCoord=-.03&accept=csv](http://geoport-dev.whoi.edu/thredds/ncss/grid/coawst_2_2/fmrc/coawst_2_2_best.ncd?var=temp&latitude=42.3&longitude=-70.6&time_start=2011-08-01T00%3A00%3A00Z&time_end=2011-08-01T06%3A00%3A00Z&vertCoord=-.03&accept=csv)

产生：

```
 date,lat[unit="degrees_north"],lon[unit="degrees_east"],vertCoord[unit=""],temp[unit="Celsius"]
2011-08-01T00:00:00Z,42.31439418116631,-70.58628311827651,-0.03125,18.44405174255371
2011-08-01T01:00:00Z,42.31439418116631,-70.58628311827651,-0.03125,18.361846923828125
2011-08-01T02:00:00Z,42.31439418116631,-70.58628311827651,-0.03125,18.31492805480957
2011-08-01T03:00:00Z,42.31439418116631,-70.58628311827651,-0.03125,18.254281997680664
2011-08-01T04:00:00Z,42.31439418116631,-70.58628311827651,-0.03125,18.24005889892578
2011-08-01T05:00:00Z,42.31439418116631,-70.58628311827651,-0.03125,18.186853408813477
2011-08-01T06:00:00Z,42.31439418116631,-70.58628311827651,-0.03125,18.114046096801758 
```

有关 NetCDF 子集服务的文档在这里： [http ://www.unidata.ucar.edu/projects/THREDDS/tech/interfaceSpec/NetcdfSubsetService_4_3.html#Vertical](http://www.unidata.ucar.edu/projects/THREDDS/tech/interfaceSpec/NetcdfSubsetService_4_3.html#Vertical)

我已向 Unidata 报告的 NetCDF 子集服务中的垂直坐标存在一些问题：

1.  在 TDS 的早期版本中，网络上有一个选择来指定垂直级别。这似乎在最新版本的 TDS (4.3.15) 中消失了。因此，如果没有看到垂直级别说明符，您仍然可以通过手动将其添加到 URL 来指定某个级别。
2.  垂直选择器适用于具有维度坐标的数据，但对于无量纲垂直坐标模型，即使它们符合 CF，该服务当前也不会转换为维度坐标。所以用户接收回无量纲坐标，如果他们想要一个特定的级别，还必须指定无量纲坐标。这显然不是很有用。
3.  如果用户指定高于或低于数据集中级别的级别，则返回的数据值为 NaN。因此，对于海洋模型，如果您输入值 0，认为您将获得表面层，您可能会得到 NaN，因为表面层的水平可能是 -0.03 或其他值（如上例所示）。

我已向 Unidata 报告了所有这些问题。

# java - TreeMap 没有按我的比较器排序

> ID：14650586
> 
> 赞同：0
> 
> 时间：2013-02-01T16:19:37.390
> 
> 标签：java, collections

我有一排按钮，有些是可见的，有些不可见。所以我想对这些按钮进行排序，以便将它们添加到以可见按钮开头的面板中。

所以我创建了 LinkedHashMap ，如果按钮可见，则添加 true ，否则添加 false 。然后我创建了我的比较器，按值（布尔值）对这个地图进行排序，只有在它之后，我才将按钮添加到 TreeMap 的面板中。但是 TreeMap 最后是空的。

这是我所做的：

```
private Map<Widget, Boolean> panelButtons = new HashMap<Widget, Boolean>();
private Map<Widget, Boolean> panelSortedButtons = new TreeMap<Widget, Boolean>(comparator);
private ButtonsComparator comparator = new ButtonsComparator(panelButtons);

//UI initialization: buttons are added using addToPanel() method - described below

for(Widget widget : panelSortedButtons.keySet()) { //panelSortedButtons is empty
    panel.add(widget);
}

//----------------

//All buttons are added via this method
public void addToPanel(Widget widget, boolean isVisible) {
    panelButtons.put(widget, isVisible);
}

//----------------

private class ButtonsComparator implements Comparator<Widget>{
    Map<Widget, Boolean> buttons;

    public ButtonsComparator(Map<Widget, Boolean> buttons) {
        this.buttons = buttons;
    }

    @Override
    public int compare(Widget widget1, Widget widget2) {
        return buttons.get(widget1).compareTo(buttons.get(widget2));
    }
} 
```

如果有什么遗漏？

**更新**

我明白我的错，我必须用来自 HashMap 的数据填充我的 TreeMap。与 John B. 所展示的方式相同。

```
panelSortedButtons.putAll(panelButtons); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:23:22.310

当您返回 0 时，您说两个键相等。由于地图不允许重复，返回 0 会导致该重复被删除。在您的情况下，您只有两个选项`true`，`false`因此您永远不会拥有两个以上的密钥。

但是，您说该集合是“空的”，这表明它不是您的比较器，但您没有向集合中添加任何内容。

看起来你想做的是

```
List<Widget> widgets = new ArrayList<Widget>(panelButtons.keySet());
Collections.sort(widget, comparator); 
```

您可以将具有重复项的元素添加到这样的列表中，然后对它们进行排序而不会丢失元素，即使它们是“相同的”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T16:24:54.200

您从未`Widgets`将`TreeMap`. 您使用 a 创建了一个空`TreeMap`，`Comparator`但我看不到您在该地图中添加任何元素的位置。

编辑：

试试这个

```
//UI initialization
panelSortedButtons.putAll(panelButtons);

for(Widget widget : panelSortedButtons.keySet()) { //panelSortedButtons is empty
  panel.add(widget);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T16:22:36.637

该方法`compare`永远不会在上面的代码中使用。此外，当您实现时，`Comparable`您应该覆盖该方法`compareTo`，而不仅仅是`compare`.

此外，我从未见过您实际上向您拥有的收藏添加任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T16:30:03.477

您需要使用`TreeMap(Comparator<? super K> comparator)`之前定义的构造函数`Comparator`。您甚至在声明它之前就设置了比较器。这无法编译。

# sas - SAS 工作区服务器意外终止

> ID：14650587
> 
> 赞同：1
> 
> 时间：2013-02-01T16:19:41.633
> 
> 标签：sas

我们有一个 100M 行的大型数据集。我需要汇总一些摘要的数据。我们目前正在通过 Proc SQL 执行此操作。当我运行它时，该进程会运行一段时间，然后出乎意料地，该进程在工作区服务器中终止。这会让 EG 挂起，直到它最终出错（几小时后）。

**这可能是什么原因造成的？**我监控盒子，我们没有用尽资源。

**如何进行故障排除？**工作区服务器没有生成日志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:07:26.167

如果进程在另一个数据库上运行，通过 ODBC 直通或 SAS/Access，则跟踪选项可能有助于调试（将在日志中准确显示正在执行的内容）

```
options sastrace=',,,d' sastraceloc=saslog nostsuffix; 
```

去除：

```
options sastrace=none; 
```

关于工作区日志记录 - 这可能没有打开。您可以通过 SMC 或手动执行此操作（请参阅[本指南](http://rawsas.blogspot.co.uk/2012/10/how-to-switch-on-workspace-logging.html)）。

您能否提供有关正在执行的代码、您的环境等的更多详细信息？

另一种选择可能是在较少数量的观察上运行（inobs=100）。如果这仍然不起作用，请尝试修改您的查询 - 一次删除一个表..

# php - 如何阻止对 url 目录的访问

> ID：14650589
> 
> 赞同：0
> 
> 时间：2013-02-01T16:19:48.840
> 
> 标签：php, .htaccess, url, download

我有以下链接：www.mysite.com/uploads/file.pdf

我希望用户下载文件。但我不希望他从这个目录中可视化文件。我怎样才能做到这一点？

我正在使用 PHP 和 Apache。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:22:19.720

`Options -Indexes`在您的 .htaccess 文件中更好地使用

创建一个以`.htaccess`该目录命名的文件并添加`Options -Indexes`为文件的内容。确保在添加后按 Enter`Options -Indexes`

这将确保您的目录不能被索引。即您可以访问该文件`www.mysite.com/uploads/file.pdf`，但您不能使用列出该目录中的所有文件`www.mysite.com/uploads/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:21:00.870

添加一个名为 www.mysite.com/uploads/ 的空文件`index.html`将阻止用户查看（可视化）文件。

禁用目录索引也将起作用[如何禁用目录浏览？](https://stackoverflow.com/questions/2530372/how-do-i-disable-directory-browsing)

# extjs4.1 - 为什么这个 tpl 不起作用？

> ID：14650592
> 
> 赞同：0
> 
> 时间：2013-02-01T16:20:03.973
> 
> 标签：extjs4.1

我正在尝试在面板中使用模板。模板触发器来自另一个网格项目选择。但是这段代码不起作用....

我的代码有什么问题？只需简单地复制/粘贴我的代码即可运行...任何人，您能帮我解决这个问题吗？

HTML 代码：

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="extjs/resources/css/ext-all.css">
<script type="text/javascript" src="extjs/ext-all-debug.js">
</script>
<script type="text/javascript">
Ext.onReady(function () {

Ext.create('Ext.data.Store',{
    storeId: 'letterStore',
    fields: ['TitleLetter','LetterType'],
    data: {
    'items': [
        { 'TitleLetter' : 'Keterangan', 'LetterType' : 'Not My Type'},
        { 'TitleLetter' : 'Dua', 'LetterType' : 'Yes This is my Type' }
    ]
    },
    proxy: {
    type: 'memory',
    reader: {
        type: 'json',
        root: 'items'
    }
    }
});

var panel = Ext.create('Ext.panel.Panel',{
    title: 'Testing',
    renderTo: Ext.getBody(),
    items: [
    {
        xtype: 'gridpanel',
        title: 'Grid For TPL',
        bodyPadding: 5,
        listeners: {
        itemclick: function(selModel, record, index, options){

            var detailPanel = this.child('#detailPanel');
            detailPanel().update(record.data);
        }
        },
        store: Ext.data.StoreManager.lookup('letterStore'),
        width: 300,
        height: 300,
        columns: [
        {
            xtype: 'gridcolumn',
            dataIndex: 'TitleLetter',
            text: 'Judul Surat'
        },
        {
            xtype: 'gridcolumn',
            dataIndex: 'LetterType',
            text: 'Tipe Surat'
        },

        ]
    },
    {
        xtype: 'panel',
        itemId: 'detailPanel',
        title: 'Show TPL',
        tpl: ['I am trying to use TPL {TitleLetter}']
    },

    ]

});

});

</script>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:51:56.590

`itemclick`为您的活动试试这个：

```
itemclick: function(selModel, record, index, options) {
    // In this function, "this" refers to the grid,
    // so you need to go up to the parent panel then
    // back down to get the detailPanel

    var detailPanel = this.up().down("#detailPanel");
    detailPanel.update(record.data);
} 
```

编辑：一种更快的方法，`Ext.ComponentQuery`完全绕过。

```
itemclick: function(selModel, record, index, options) {
    var detailPanel = this.ownerCt.getComponent("detailPanel");
    if (detailPanel) {
        detailPanel.update(record.data);
    }
} 
```

# mysql - 了解 MySql 解释计划（坏索引？）

> ID：14650595
> 
> 赞同：1
> 
> 时间：2013-02-01T16:20:11.723
> 
> 标签：mysql, sql

我的系统中有一个非常基本的查询，但在查询中添加一个额外的内部联接采用执行时间形式（0.02 秒到 6.0 秒）。在我看来，我在连接列上缺少一个索引，但确实存在一个。下面是`explain plan`两个查询中的一个。到底是怎么回事？

查询速度更快...... ![在此处输入图像描述](../Images/5edb7e1123d6a866158cca9ff826775f.png)

带有一个附加连接的慢查询（table ='bd'） ![在此处输入图像描述](../Images/f0b3906b724bf3487c487237e093566c.png)

这是sql...

```
SELECT DISTINCT rsb.id 
FROM   report_session_bill rsb 
       INNER JOIN bill b 
               ON b.id = rsb.bill_id 
       INNER JOIN bill_master bm 
               ON bm.id = b.bill_master_id 
       INNER JOIN meter m 
               ON m.id = b.meter_id 
       -- slow join below... 
       INNER JOIN building bd 
               ON bd.id = m.building_id 
WHERE  rsb.report_session_id = 20693 
```

表统计...

*   report_session_bill：1,000 - 10,000 行，每小时删除一次
*   账单：100 万行
*   bill_master：750k 行
*   米：10k行
*   建筑：7k行

# javascript - json数据显示在控制台而不是浏览器中 - javascript

> ID：14650602
> 
> 赞同：0
> 
> 时间：2013-02-01T16:20:38.807
> 
> 标签：javascript, jquery, json, post

我有一些通过 jquery`$.post()`请求从 php 代码中检索到的 json 数据。格式为 json。但是调用回调函数时，我的浏览器上没有处理数据

```
$.post(url_send, data_to_send, function(callback_data){
      var info = callback_data.info;
      console.log(callback_data.info);
      ...
});

callback_data = {"success":[{"id":some_number}],"info":"some_string"} 
```

为了调试，我注意到：如果我输入这段代码`console.log(callback_data);`，正确的 json 数据会显示在我的控制台中，但如果我让`console.log(callback_data.info)`，控制台显示`'undefined'`. 有人可以解释一下吗？

编辑：在我的 php 中，我有 $reply = array('success' => $ids,'info' => $info); 回声 json_encode($reply);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:23:21.407

您的 php 页面返回的 json 可能不包含名为“info”的字段。因此，当您尝试时`callback_data.info`，由于没有信息，因此它是未定义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T16:25:57.033

callback_data 将是字符串格式，您必须使用 eval 将其转换为 json 才能将其用作对象。一旦执行 eval，您应该有 callback_data.info 类似这样的内容

```
$.post(url_send, data_to_send, function(callback_data){
      callback_data = eval('(' + callback_data + ')');
      console.log(callback_data.info);
      ...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:25:13.637

该字段为信息，应为：callback_data.information

# python - 带有 tkinter 的 Python 中的文本字段

> ID：14650605
> 
> 赞同：0
> 
> 时间：2013-02-01T16:20:46.700
> 
> 标签：python, user-interface, tkinter, tcl, tk

我正在尝试通过文档，但我很难找到三个具体的东西。

1.  什么是文本输入。
2.  如何在文本输入中获取文本。
3.  如何在文本输入中设置文本。

基本上我想像我在这个例子中对 javascript 所做的那样（这真的很简单）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>SmallForm</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script>var db = openDatabase('mydb', '1.0', 'temporal database', 2 * 1024 * 1024);
    db.transaction(function (tx) {
        tx.executeSql('CREATE TABLE foo (id unique, field1 text, field2 text)');
    });
    saveData = function(){
        db.transaction(function (tx) {
            var id = $('input[name=id]').val();
            var field1 = $('input[name=field1]').val();
            var field2 = $('input[name=field2]').val();
            tx.executeSql('insert or replace into foo values (?, ?, ?)', [id , field1, field2]);
        });
    };
    loadData = function(){
        db.transaction(function (tx) {
            var id = $('input[name=id]').val();
            tx.executeSql('select * from foo where id =?', [id],function (tx, results) {
                var len = results.rows.length;
                if (len != 1){
                    var text = len > 1? "bad data" : "no data";
                    $('input[name=field1]').val(text);
                    $('input[name=field2]').val(text);
                }
                else {
                    $('input[name=field1]').val(results.rows.item(0).field1);
                    $('input[name=field2]').val(results.rows.item(0).field2);
                }
            });
        });
    };
    </script>
</head>
<body>
    <div class="line">ID:<input type="text" name="id" value="Introduce the ID first"><input type="button" onclick="loadData()" value="Load"></div>
    <div class="line">Field1:<input type="text" name="field1" value="some field"></div>
    <div class="line">Field2:<input type="text" name="field2" value="another field"></div>
    <div class="line"><input type="button" onclick="saveData()" value="Save"></div>
</body>
</html> 
```

我找不到此 Python 文档，也不了解 Tcl/Tk 文档如何映射到 Python 代码。我想我应该检查这些：

*   [http://www.tcl.tk/man/tcl8.4/TclCmd/contents.htm](http://www.tcl.tk/man/tcl8.4/TclCmd/contents.htm)
*   [http://www.tcl.tk/man/tcl8.4/TkCmd/contents.htm](http://www.tcl.tk/man/tcl8.4/TkCmd/contents.htm)

但是我什么都不懂，要么很复杂，要么我很愚蠢，要么我跳过了一些重要的信息。很可能它是所有前者的组合。

谢谢你。对不起，如果我做错了什么。欢迎所有回复和反馈。

PD：我一直在处理来自@mmgp 的代码，并制作了这个：

```
import sqlite3, tkinter as tk

def save_data():
  insertQuery = 'insert or replace into allData values(%s)'%(','.join(map(lambda x:'?',fields)))
  cursor.execute(insertQuery, tuple(map(lambda x: variables[x].get(), fields)))
  db.commit()

def load_data():
  cursor.execute('select * from allData where %s = ?'%fields[0], [variables[fields[0]].get()])
  row = cursor.fetchone()
  if row is None:
    for f in fields:
      variables[f].set("Bad data request")
    return
  for i in range(len(fields)):
    variables[fields[i]].set(row[i])

root = tk.Tk()
root.title('Fielder2013')
fields = ['id', 'field1', 'field2']
variables = {}
buttons = {'Load':load_data, 'Save':save_data}
dfields = {}

for i in range(len(fields)):
  e = fields[i]
  dfields[e] = (tk.Label(text=e), tk.Entry())
  dfields[e][0].grid(row=i, column=0)
  dfields[e][1].grid(row=i, column=1)
  variables[e] = tk.StringVar()
  dfields[e][1]["textvariable"] = variables[e]
i = 0
for e in buttons:
  c = buttons[e]
  buttons[e] = tk.Button(text=e)
  buttons[e]['command'] = c
  buttons[e].grid(row = i, column=2)
  i+=1

with sqlite3.connect('database.sqlite3') as db:
  cursor = db.cursor()
  cursor.execute('create table if not exists allData (%s text unique%s)'%(
                 fields[0], ''.join(map(lambda e: ', %s text'%e, fields[1:]))))
  root.mainloop()
  db.commit() 
```

该代码可能不是您见过的最清晰的代码，但我的小脑袋正试图掌握一些新概念。我认为这可能对某人有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:39:43.843

官方文档总是可以在[http://docs.python.org/2/library/tkinter.html](http://docs.python.org/2/library/tkinter.html)找到。此外，搜索“python tkinter”之类的术语将返回许多其他带有有用文档的地方。

下面是一个几乎什么都不做的例子，但是在不调用某些数据库的情况下复制您的代码。

```
import Tkinter

def save_data(form):
    for widget in form:
        print widget.get()

def load_data(id_value, form):
    for i, widget in enumerate(form):
        widget.delete(0, 'end')
        widget.insert(0, id_value * (i + 2))

root = Tkinter.Tk()

lbl_id = Tkinter.Label(text=u'ID')
entry_id = Tkinter.Entry()
entry_load = Tkinter.Button(text=u'Load')
lbl_field1 = Tkinter.Label(text=u'Field 1')
entry_field1 = Tkinter.Entry()
entry_save = Tkinter.Button(text=u'Save')

lbl_id.grid(row=0, column=0)
entry_id.grid(row=0, column=1)
entry_load.grid(row=0, column=2)
lbl_field1.grid(row=1, column=0)
entry_field1.grid(row=1, column=1)
entry_save.grid(row=2, column=2)

form = [entry_field1]
entry_load['command'] = lambda: load_data(entry_id.get(), form)
entry_save['command'] = lambda: save_data(form)

root.mainloop() 
```

# ios - AVAssetExportSession 每次都失败（错误 -12780）

> ID：14650607
> 
> 赞同：11
> 
> 时间：2013-02-01T16:20:50.010
> 
> 标签：ios, avfoundation, avassetexportsession

我正在尝试合并一些音频文件（通过 MPMediaPickerController 选择），但导出总是失败，错误代码为 -12780。

当我尝试使用 AVPlayer 对象播放我的作品时，它可以正确播放。只是导出失败。

我究竟做错了什么？

这是我的代码：

```
AVAssetExportSession *exportSession;
AVPlayer *player;

- (void)mergeAudiofiles {
    // self.mediaItems is an NSArray of MPMediaItems
    if (self.mediaItems.count == 0) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                        message:@"No Tracks selected."
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
        [alert show];
        return;
    }

    // Configure audio session
    NSError *sessionError;
    AVAudioSession *session = [AVAudioSession sharedInstance];
    [session setCategory:AVAudioSessionCategoryAudioProcessing error:nil];
    [session setActive:YES error:&sessionError];
    if (sessionError) NSLog(@"Session-Error: %@", sessionError.localizedDescription);

    // Create composition
    AVMutableComposition *composition = [AVMutableComposition composition];
    AVMutableCompositionTrack *track = [composition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
    CMTime position = kCMTimeZero;

    for (MPMediaItem *item in self.mediaItems) {
        NSURL *assetURL = [item valueForProperty:MPMediaItemPropertyAssetURL];
        AVAsset *asset  = [AVAsset assetWithURL:assetURL];

        CMTimeRange duration = CMTimeRangeMake(kCMTimeZero, asset.duration);
        //        duration = CMTimeRangeMake(kCMTimeZero, CMTimeMake(5, 1));    // For player test

        NSError *error;
        [track insertTimeRange:duration ofTrack:[[asset tracksWithMediaType:AVMediaTypeAudio] lastObject] atTime:position error:&error];
        if (error) NSLog(@"ERROR! :(");

        position = CMTimeAdd(position, duration.duration);
    }

    // Path to output file
    NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
    NSURL *exportUrl = [NSURL URLWithString:[documentsDirectory stringByAppendingPathComponent:@"export.m4a"]];

    NSLog(@"Export URL = %@", exportUrl.description);

    //    Playing works!
    //    """"""""""""""
    //    AVPlayerItem *pitem = [[AVPlayerItem alloc] initWithAsset:composition];
    //    player = [[AVPlayer alloc] initWithPlayerItem:pitem];
    //    [player play];
    //
    //    return;

    // Export
    exportSession = [[AVAssetExportSession alloc] initWithAsset:composition presetName:AVAssetExportPresetAppleM4A];
    exportSession.outputURL = exportUrl;
    exportSession.outputFileType = AVFileTypeAppleM4A;

    [exportSession exportAsynchronouslyWithCompletionHandler:^{
        switch (exportSession.status) {
            case AVAssetExportSessionStatusFailed:
                NSLog(@"Export failed -> Reason: %@, User Info: %@",
                      exportSession.error.localizedDescription,
                      exportSession.error.userInfo.description);
                break;

            case AVAssetExportSessionStatusCancelled:
                NSLog(@"Export cancelled");
                break;

            case AVAssetExportSessionStatusCompleted:
                NSLog(@"Export finished");
                break;

            default:
                break;
        }
    }];
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-12-27T19:28:28.263

需要将您的导出 URL 更改为：

```
 NSURL *exportUrl = [NSURL fileURLWithPath:[documentsDirectory stringByAppendingPathComponent:@"export.m4a"]]; 
```

引用文件路径时必须使用 fileURLWithPath。我也被这个挂断了，直到我读到这个：[AVAssetExportSession outputfile](https://stackoverflow.com/questions/12529250/avassetexportsession-outputfile)

# ruby-on-rails - 设计，如何在自定义注册控制器中获取新创建的用户？

> ID：14650612
> 
> 赞同：4
> 
> 时间：2013-02-01T16:21:06.870
> 
> 标签：ruby-on-rails, devise

我正在尝试使用设计为注册添加一些额外的逻辑。我有两个注册表单，一个具有另一个对象的附加字段，该对象通过 habtm 关系连接。我已经扩展了设计注册控制器并创建了新对象（如果存在），但我不确定如何在此方法中获取新创建的用户。

在我的自定义 registrations_controller.rb 中：

```
class RegistrationsController < Devise::RegistrationsController
  def create
    unless params[:business].nil?
      @business = Business.new(params[:business])
    end
    super
    #@user.businesses << @business  #how can I implement something like this?
  end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:47:59.780

我以前做过与此非常相似的事情。看看这个问题[Make a fields_for block 条件](https://stackoverflow.com/questions/12518109/make-a-fields-for-block-conditional)

有两种方法可以做到这一点。一个快速而肮脏，另一个充分利用了轨道。

**方法一**

首先在你的模型中，确保你有`accepts_nested_attributes_for :businesses`然后在你的控制器中确保你有类似的东西

```
params[:user][:businesses] = [ params[:business] ] 
```

**方法二**

您可能想要做的一件事就是利用您的模型来发挥自己的优势。在您的视图中使用`fields_for`块允许您指定可以从模型设置方式假定的关系。

仍然确保`accepts_nested_attributes_for :businesses`您的模型中有

在您的控制器中，您需要进行一些更改。

```
def new
  resource = build_resource({})
  resource.businesses.build  # Inserts a blank object for business
  respond_with resource
end 
```

现在不要在创建操作中触摸任何内容，因为您可以删除添加的代码位。

在视图中，您可以在其中找到您的业务表格和注册表单。添加类似的东西。

```
<% form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
  # some user form stuff
  <%= f.fields_for :business do |i| %>
    <%= render "/users/registrations/business", :form => i %>
  <% end %>
<% end %> 
```

保存时，您的控制器应该识别出您正在自动向用户添加业务。

您可能需要尝试实际的格式和命名，但这使得在 Rails 中提交表单更容易使用。这也符合保持控制器美观和瘦身的理念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-20T12:00:42.457

新创建的`User`对象可用作 variable `resource`。

所以，`resource.businesses << @business`会工作。

# c++ - NVCUVID 文档在哪里？

> ID：14650613
> 
> 赞同：2
> 
> 时间：2013-02-01T16:21:11.927
> 
> 标签：c++, video, cuda

我能找到的关于 NVCUVID 的唯一官方文档是NVIDIA 的 CUDA 文档页面上[的一些示例。](http://docs.nvidia.com/cuda/cuda-samples/index.html#cuda-video-decoder-d3d9-api)NVCUVID 是否有完整的 API 参考（即函数的作用）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:32:41.430

此处有 210 年 8 月的 API 规范：[http ://www.cs.cmu.edu/afs/cs/academic/class/15668-s11/www/cuda-doc/CUDA_VideoDecoder_Library.pdf](http://www.cs.cmu.edu/afs/cs/academic/class/15668-s11/www/cuda-doc/CUDA_VideoDecoder_Library.pdf)

# javascript - 如何保存已编译的下划线模板

> ID：14650615
> 
> 赞同：0
> 
> 时间：2013-02-01T16:21:23.240
> 
> 标签：javascript, underscore.js

您可能知道，下划线模板在使用前需要编译。现在，如果您的应用程序使用了大量它们，为了呈现由多个所谓的部分组成的特定 UI，您需要编译所有这些部分，这可能需要很多时间。（参考：[http](http://underscorejs.org/) ://underscorejs.org/ ）

现在，灰尘框架在另一方面进行了优化，它支持预编译模板。（参考：[http](http://akdubya.github.com/dustjs/) ://akdubya.github.com/dustjs/ ）

如果你想用下划线达到同样的效果，你必须找到自己的工具。

到目前为止，我设法摆弄了以下代码（在 Chrome 中测试）。 [http://jsfiddle.net/GNK6M/](http://jsfiddle.net/GNK6M/)

```
sources = $('script').map(function(i, s){
    return _.template($(s).html()).prototype.constructor.source
})
console.log(sources.get().join("\n")) 
```

此代码生成编译后的 Temples 源代码并将其打印到 js 控制台。

你们知道更好的选择吗？约束是模板必须是下划线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:52:34.683

如果你使用 require.js，你可以使用这个插件来编译和包含你的模板[https://github.com/ZeeAgency/requirejs-tpl](https://github.com/ZeeAgency/requirejs-tpl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T15:40:12.907

假设我们有一个（字符串）数组中的所有源，称为“源”，（这可以通过多种方式实现，但不是问题的主题）

```
var sources = [...];

var compiled_sources = sources.map(function(i, s){
    return _.template($(s).html()).prototype.source
})

console.log(sources.get().join("\n")) 
```

# c# - 文本未到达控制台

> ID：14650618
> 
> 赞同：6
> 
> 时间：2013-02-01T16:21:39.330
> 
> 标签：c#, stdout

我有“控制台”类型的 ac# 项目，它从父应用程序中开始进入它自己的应用程序域，并产生一个控制台窗口。但是，写入控制台的任何文本都不会显示。`Console.ReadKey()`但是确实有效。有什么想法可能是错的吗？

注意：父进程的 Echo 显示在父进程的嵌入式控制台（不是 win32 控制台，而是某种 Directx GUI 小部件）中`Console.Out`，并且`System.Console.Out`不是“空”流。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Threading;

using ParentApi;

namespace LSTest4
{   
    class Program
    {

        static void Main(string[] args)
        {
            Console.OpenStandardOutput();
            ParentApi.Echo(System.Console.Out.ToString());
            Console.Out.WriteLine("monkeys");
            Console.WriteLine("app start");
            Console.Write("lalala");
            Console.ReadKey();
            ParentApi.Echo("app start");

    }
} 
```

**编辑：**

经进一步调查：

有问题的代码被注入到另一个应用程序中，注入是敌对的，由“ParentApi”管理，似乎注入目标正在重新映射标准流。在这种情况下，最好的办法是以其他方式处理跟踪。我可能会使用 WCF 将跟踪输出推送到外部进程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:41:50.247

我认为您的问题将与父应用程序有关；您提到父级没有显示真正的 Win32 控制台，我想这是子`Console.WriteLine`级呼叫的去向。
我做了一点 POC（很高兴分享代码），这表明父级可以使用 重定向控制台输出`Console.SetOut`，但不同的 AppDomain 调用`Console.WriteLine`仍会转到主控制台而不是新流。

此外，底层 Win32 API 声明：http `process can be associated with only one console`: [//msdn.microsoft.com/en-us/library/ms681944%28VS.85 ).aspx](http://msdn.microsoft.com/en-us/library/ms681944%28VS.85).aspx)

如果你真的需要一个子控制台，你可能不得不分拆一个新进程并使用进程间通信。

**编辑**
稍微反驳自己，将我的父应用程序从控制台更改为 Windows（以便它仍然可以运行）意味着我的子 AppDomain 可以打印到它定义的控制台，而我的父母仍然可以写入重定向的流。虽然，这仍然只允许一个孩子；如上。
也许如果您可以提供有关如何生成 AppDomain 的代码，它会有所帮助吗？

# php - 使用 PHP 和 HTML 显示存储在数据库中的图像

> ID：14650622
> 
> 赞同：0
> 
> 时间：2013-02-01T16:21:46.130
> 
> 标签：php, html, image, blob, echo

我想在这个 HTML 表中显示我存储在数据库中的图像。我已将文件存储为“BLOB”，并且希望将图像显示在“照片”列下。我用什么代码来回显图像？

```
 <table wactidth='100%' border='1' cellspacing='0' align="center">
    <thead align='left'>
        <th>Photo</th>
        <th>Act Name</th>   
        <th>Genre</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Number of People</th>
        <th>Actions</th>

    </thead>
    <tbody>
    <?php foreach($acts as $act):?>
        <tr>
            <td><!-- I WANT TO DISPLAY THE IMAGES UNDER THIS COLUMN--></td>
            <td><?php echo $act['ActName'];?></td>
            <td><?php echo $act['Genre'];?></td>
            <td><?php echo $act['ContactFirstName'];?></td>
            <td><?php echo $act['ContactLastName'];?></td>
            <td><?php echo $act['NumberOfPeople'];?></td>
            <td><a href="?editact&actid=<?php echo $act['actid'];?>">Edit</a>|<a href="?delete&actid=<?php echo $act['actid'];?>">Delete</a>|<a href="upload&actid=<?php echo $act['actid'];?>">Upload Image</td>
        </tr>
    <?php endforeach?>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:29:41.650

I would recommend storing just the paths to the images, like "/path/to/your/image.jpg". Then you can echo out the path just like a string

```
<td><img src="<?php echo $act['imagepath'];?>" alt="" /></td> 
```

# macos - 如何在 espresso 代码编辑器中实现设置动画？

> ID：14650624
> 
> 赞同：0
> 
> 时间：2013-02-01T16:21:53.220
> 
> 标签：macos, cocoa, uikit

如何实现与 espresso.app 中类似的设置动画，![在此处输入图像描述](../Images/cb1e8e8168d78683f311d9a6af426410.png)

![在此处输入图像描述](../Images/a8727765b6f8a81f1fe0ca43e087f2ff.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:46:19.430

我认为最简单的方法是：

1.  绘制动画并将其放入 .gif 文件
2.  将工具栏添加到您的窗口
3.  将自定义项放到您的工具栏上，由`NSImageView`和组成`NSButton`。
4.  添加 NSTrackingArea 来捕捉`moseEntered:`和`mouseExited:`
5.  设置`-[NSImageView setImage:]`您的 gif 图像或在 InterfaceBuilder 中
6.  在`mouseEntered:`发送 `-[NSImageView setAnimates:YES]`_`mouseExit:` `-[NSImageView setAnimates:NO]`
7.  如果你需要来回动画，制作两个gif文件并更改它们

我在我的适用于 mac 的 Cinemagraph 壁纸应用程序的首选项窗口中做了类似的事情。只是启动和停止 gif 文件的动画。

# javascript - Javascript - 快速删除对象数组中的重复项

> ID：14650626
> 
> 赞同：2
> 
> 时间：2013-02-01T16:22:03.947
> 
> 标签：javascript, jquery, algorithm, duplicates

我有 2 个数组，其中包含对象，例如：

```
[{"Start": 1, "End": 2}, {"Start": 4, "End": 9}, {"Start": 12, "End": 16}, ... ] 
```

我想在删除重复项的同时合并 2 个数组。目前，我正在执行以下操作：

```
array1.concat(array2); 
```

然后我正在做一个嵌套`$.each`循环，但是随着我的数组越来越大，这需要`O(n^2)`时间来执行并且不可扩展。

我认为有一种更快的方法可以做到这一点，但是，我发现的所有示例都使用字符串或整数。

有什么推荐的算法或方法可以加快速度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:45:51.750

该答案基于以下假设：顺序无关紧要，您可以从对象创建唯一键。

您将数组 a 中的所有 n 个条目复制到对象 c，创建一个唯一键，然后将数组 b 中的所有 m 个条目复制到该对象（这将自动消除重复项），您将完成`O(n+m)`：

```
var a = [{"Start": 1, "End": 2}, {"Start": 4, "End": 9}];
var b = [{"Start": 4, "End": 9}, {"Start": 3, "End": 12}];

var c = {};
a.forEach(function(el){c[el.Start+".."+el.End] = el});
b.forEach(function(el){c[el.Start+".."+el.End] = el});

console.log(c);
// yields: {"1..2":{"Start": 1, "End": 2},"4..9":{"Start": 4, "End": 9},"3..12":{"Start": 3, "End": 12}} 
```

这个对象中的这个符号有点多余，但是你合并两个数组的速度非常快。也许这可以进一步改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:26:02.120

首先对对象进行排序，从低到高。`O(n log n)`与快速排序。

然后，您可以制作修剪算法，该算法可以利用这种排序在一个循环中循环遍历两个数组`O(2n)`。

合并原始数组和修剪后的数组。

* * *

请记住，尽管 JavaScript 中的对象没有顺序，但您无法对它们进行排序。转换为数组，保留引用并对其进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:36:54.017

我对 javascript 不太熟悉，所以不能 100% 确定这是可行的（不确定比较对象是否相等等的细微之处），但是在 java 或其他语言中，这样的事情可能会起作用：

*   迭代第一个数组。
*   对于每个元素存储到一个“计数器”哈希图中，其中键是对象，值是计数。

在第一次通过之后，你应该有类似的东西：

```
{{"Start": 1, "End": 2}:1, {"Start": 4, "End": 9}:1, {"Start": 12, "End": 16}:1, ... } 
```

*   然后，遍历第二个数组
*   对于每个元素，在计数器 hashmap 中查找当前元素。
*   如果计数器 hashmap 包含与当前元素匹配的键，则它是重复的
*   否则，追加到第一个数组。

可能比必须先排序快一点（如果可以使用对象作为键，那就是）？

# javascript - 带有 mootools 的表单输入元素数组

> ID：14650627
> 
> 赞同：0
> 
> 时间：2013-02-01T16:22:07.073
> 
> 标签：javascript, mootools

我需要对表单中的所有输入元素进行排列以检查它们是否为空（验证也在服务器上）。Mootools 被用作该站点的库，所以这是我的代码：

```
$$('#emeraldForm input').addEvent("submit",function(){
    //form validation

}); 
```

我想在提交表单之前这样做。空的将被赋予一个错误类，该类将在“keyup”事件中被删除。

[在此处查看完整代码](http://jsfiddle.net/v9TR8/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:18:56.587

如果您不想使用 HTML5 required 属性或 Mootool 的更多验证提供程序（内联验证），那么您可以做一些简单的事情，例如分配所有必需的 input[type=text] 元素和 input[type=checkbox] 元素

```
class="required" 
```

然后做这样的事情：

```
$('emeraldForm').addEvent("submit",function(evt){
    var preventSubmission = false;
    $(this).getElements("input[type=text].required").each(function(elem) {
        if (elem.get("value").trim() == "") { 
            elem.addClass("error");                
            preventSubmission = true; 
        }
    });
    $(this).getElements("input[type=checkbox].required").each(function(elem) {
        if (!elem.get("checked")) { 
            elem.addClass("error");                
            preventSubmission = true; 
        }
    });
    if (preventSubmission) {
        evt.preventDefault();
    }
}); 
```

我正在添加类错误，它可以在 CSS 中指定为红色背景或输入元素旁边的某个图标或类似的注意绘图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:31:21.883

If can live with HTML5 compatible website only. Then you set the "required" attribute in the input field. There will be no need of client side or server side validation. All the HTML5 compatible browsers will do it for you. Here is some sample code:

```
<input  name="url" placeholder="Input Example" type="text" required> 
```

# objective-c - 在 ObjC 中，如何将枚举转换为 id？

> ID：14650633
> 
> 赞同：2
> 
> 时间：2013-02-01T16:22:26.000
> 
> 标签：objective-c, syntax

给定这样的方法签名：

```
+ (MY_ENUM_SET_A) stringToEnum:(NSString*)strVal;
+ (MY_ENUM_SET_B) stringToEnum:(NSString*)strVal; 
```

我想将它们更改为：

```
+ (id) stringToEnum:(NSString*)strVal; 
```

但是在我返回之前的实现方法中：我需要强制转换或做任何特殊的事情来将枚举转换为 id 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T19:46:31.907

我认为你想让它们分开，因为它们是分开`enum`的，所以我建议你做你目前正在做的事情。

# google-maps-api-2 - Google Play 服务 - 更新了吗？

> ID：14650642
> 
> 赞同：0
> 
> 时间：2013-02-01T16:22:59.593
> 
> 标签：google-maps-api-2, google-maps-android-api-2, google-play-services

有没有办法检查是否：

1.  已安装 Google Play 服务
2.  安装版本的版本，是不是运行 Google Maps v2 的最低版本？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:47:39.347

是的！

请参阅此文档：[GooglePlayServicesUtil](http://developer.android.com/reference/com/google/android/gms/common/GooglePlayServicesUtil.html)

具体来说，

```
GooglePlayServicesUtil.isGooglePlayServicesAvailable(Context context) 
```

看看[这个问题也可能是个好主意](https://stackoverflow.com/a/13789869/1103584)

# jquery - 程序选择后 div 内容的大小不一致

> ID：14650643
> 
> 赞同：0
> 
> 时间：2013-02-01T16:23:05.807
> 
> 标签：jquery, html, css, google-chrome, styles

我有一个通过使用鼠标或定时事件选择的 tile div。以下是选中和未选中的状态：

未选中的

![在此处输入图像描述](../Images/6e04315defb2ee552fd103868b706b82.png)

.selected 应用

![在此处输入图像描述](../Images/396fbe3f37eaab44cdcce1a8fadadc24.png)

```
.tile
{
    height: 70px;
    padding: 5px 10px 5px 10px;
    margin: 8px auto 0px auto;
    width: 280px;
    background-color: #99b433 !important;
    cursor: pointer;
}

.tile.selected
{
    border-left: 10px #2d89ef solid;
    width: 270px !important;
} 
```

问题是，当我单击磁贴并使用 css 应用类时，这可以正常工作：

```
// tile click handler
$('.tile').click(function () {
    $('#leftPane').children().removeClass('selected');
    $(this).addClass('selected');
}); 
```

但是当每 15 秒后从 ajax 函数调用它时：

```
$('#' + selectedId).addClass('selected'); 
```

我得到（在 chrome 中）：

![在此处输入图像描述](../Images/335e556d098a3f3dc0301bc5632ecc61.png)

但是一旦我将鼠标悬停在它上面，它就会回到上面的 .selected 应用图片。

```
.tile:hover
{
    border: 2px solid #2d89ef;
} 
```

关于这种奇怪行为的任何想法？我已经在 IE 10 和 Safari 中进行了测试，但它并没有在那里进行测试。

编辑（为埃里克）这是设置自动后发生的情况，填充整个宽度：

![在此处输入图像描述](../Images/425d39bfcc2e9b61eefbf0024c81c807.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-01T16:55:03.470

`border-left`从您的班级中删除，您`.selected`也不需要`!important`：

```
.tile.selected
{
    width: 270px;
} 
```

[http://jsbin.com/izaxuh/10/edit](http://jsbin.com/izaxuh/10/edit)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T16:55:31.833

这是因为你有`width: 270px !important;`，将宽度设置为`auto`，它会正常工作。

[http://jsbin.com/izaxuh/14](http://jsbin.com/izaxuh/14)

# macos - 分离编译和链接 - 在 D 中

> ID：14650660
> 
> 赞同：2
> 
> 时间：2013-02-01T16:24:03.650
> 
> 标签：macos, gcc, d, dmd

好的，我目前正在和 D 一起玩（第一次），所以据说我会有一些超基本的问题......我在这里...... :-)

当我用它编译链接时，`dmd`它编译得很好：

```
dmd myMain.d myTestModule.d 
```

设置`-v`(verbose) 标志时，我注意到该过程基本上是一个编译步骤（带有`-c`标志）和链接（带有`gcc`）像往常一样。

**但是**，当我尝试按以下方式编译时，我不断收到错误：

```
dmd -c MyMain.d myTestModule.d
gcc MyMain.o -o MyMain -m64 -lphobos2 -lpthread -lm 
```

* * *

```
Undefined symbols for architecture x86_64:
  "_D8someFunc3strFmZAya", referenced from:
      __Dmain in MyMain.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

这是怎么回事？有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T22:03:38.570

**编译**生成可能引用外部符号的目标文件。**链接**是将一组相关对象文件组合成单个二进制文件的过程，处理它们之间的所有外部引用以及其他任务。

每个源文件都被编译成一个匹配的目标文件。在您的情况下，您已经编译了 myMain.d 和 myTestModule.d，因此出现了两个目标文件：myMain.o 和 myTestModule.o。但是您只将其中一个提供给链接器（通过 gcc），并且可以预见地导致某些符号无法解析。

```
gcc myMain.o myTestModule.o -o MyMain -m64 -lphobos2 -lpthread -lm 
```

......应该做的伎俩。

另请注意，您可以使用相同的 dmd 二进制文件来调用链接器，并且它会为您处理链接默认内容（phobos、pthread 等）：

```
dmd myMain.o myTestModule.o -o MyMain -m64 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T20:54:08.533

您还需要链接到`myTestModule.o`. 每个文件`dmd -c`生成一个文件。而且您只是链接您创建的两个之一。`.o``.d`

# jquery - Colorbox/Drupal 在 IE 中不起作用

> ID：14650661
> 
> 赞同：0
> 
> 时间：2013-02-01T16:24:14.600
> 
> 标签：jquery, internet-explorer, drupal, colorbox

我有一个使用 Colorbox 弹出图像的新站点。它在 Firefox 和 Chrome 中运行良好，但在 IE 中什么也没有发生——除非我按 F12 打开开发者控制台，此时它可以工作。

[http://www.mckinleywoodsapts.com/photo-gallery](http://www.mckinleywoodsapts.com/photo-gallery)

感谢任何能提供帮助的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:04:34.520

您没有以正确的方式将颜色框分配给您的元素。删除链接项目的“cboxElement”类（不应该存在，colorbox 会添加该类本身，以便知道项目已正确设置）。从那里找出为什么没有将颜色框应用于带有“.colorbox”类的链接。我不能确切地说出问题所在，因为我不了解围绕它的所有 Drupal 内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:51:52.760

看起来解决方案是回到 Lightbox2 模块，因为该模块可以正常工作。

# r - 并行加载文件不适用于 foreach + data.table

> ID：14650662
> 
> 赞同：4
> 
> 时间：2013-02-01T16:24:20.203
> 
> 标签：r, foreach, parallel-processing, data.table

我想`foreach`与`data.table`（v.1.8.7）结合使用来加载文件并绑定它们。`foreach`没有并行化，并返回警告......

```
write.table(matrix(rnorm(5e6),nrow=5e5),"myFile.csv",quote=F,sep=",",row.names=F,col.names=T) 
library(data.table); 
#I use fread from data.table 1.8.7 (dev) for performance and useability
DT = fread("myFile.csv") 
```

现在假设我有 n 个要加载和行绑定的文件，我想将其并行化。（我在 Windows 上，所以没有分叉）

```
allFiles = rep("myFile.csv",4) # you can change 3 to whatever 
```

* * *

使用 lapply

```
f1 <- function(allFiles){
    DT <- lapply(allFiles, FUN=fread) #will load sequentially myFile.csv 3 times with fread
    DT <- rbindlist(DT);
    return(DT);
} 
```

## ![单线程](../Images/68f80f39760284ad0f67ccd6c2e255fb.png)

使用并行（R 的一部分作为 2.14.0）

```
library(parallel)
f2 <- function(allFiles){
    mc <- detectCores(); #how many cores?
    cl <- makeCluster(mc); #build the cluster
    DT <- parLapply(cl,allFiles,fun=fread); #call fread on each core (well... using each core at least)
    stopCluster(cl);
    DT <- rbindlist(DT);
    return(DT);
} 
```

## ![在这里它同时使用了 proc](../Images/98f36a95f89da66e41b4b90664e19022.png)

现在我想使用 foreach

```
library(foreach)
f3 <- function(allFiles){
    DT <- foreach(myFile=allFiles, .combine='rbind', .inorder=FALSE) %dopar% fread(myFile)
    return(DT);
} 
```

![在此处输入图像描述](../Images/b8a59614e6aa372a1061a0c9562d2942.png)

* * *

以下是一些确认我无法`foreach`工作的基准

```
system.time(DT <- f1(allFiles));
utilisateur     systÞme      ÚcoulÚ
      34.61        0.14       34.84
system.time(DT <- f2(allFiles));
utilisateur     systÞme      ÚcoulÚ
       1.03        0.40       24.30    
system.time(DT <- f3(allFiles));
executing %dopar% sequentially: no parallel backend registered
utilisateur     systÞme      ÚcoulÚ
      35.05        0.22       35.38 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:33:48.103

只是为了得到这个答案：

正如警告消息告诉您的那样，没有为`foreach`. 阅读[此小插曲](http://cran.r-project.org/web/packages/doParallel/vignettes/gettingstartedParallel.pdf)以了解如何做到这一点。

小插图中的简单示例：

```
library(doParallel) 
cl <- makeCluster(3) 
registerDoParallel(cl) 
foreach(i=1:3) %dopar% sqrt(i) 
```

# android - Android中的错误FFmpeg

> ID：14650665
> 
> 赞同：2
> 
> 时间：2013-02-01T16:24:28.847
> 
> 标签：android, ffmpeg, javacv

我正在使用 FrameGrabber 从 sdcard 加载视频并执行一些图像处理操作。我按照[JavaCV 站点](http://code.google.com/p/javacv/)上的教程来加载 javacc 和 ffmpeg。目前，要运行该应用程序，我正在使用连接到我的电脑的平板电脑（Asus TF 101G 和 Android 版本 4.0.3），它工作正常。但是，如果我尝试在另一台设备上运行相同的应用程序（例如，带有 Android 4.1.2 的 Nexus），我会收到以下错误：

```
02-01 16:51:54.687: E/AndroidRuntime(2839): FATAL EXCEPTION: main
02-01 16:51:54.687: E/AndroidRuntime(2839): java.lang.ExceptionInInitializerError
02-01 16:51:54.687: E/AndroidRuntime(2839):     at com.googlecode.javacv.FFmpegFrameGrabber.<init>(FFmpegFrameGrabber.java:104)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at com.example.com.uniud.avires.MainActivity.onCreate(MainActivity.java:92)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at android.app.Activity.performCreate(Activity.java:5008)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at android.os.Looper.loop(Looper.java:137)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at android.app.ActivityThread.main(ActivityThread.java:4745)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at java.lang.reflect.Method.invokeNative(Native Method)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at java.lang.reflect.Method.invoke(Method.java:511)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at dalvik.system.NativeStart.main(Native Method)
02-01 16:51:54.687: E/AndroidRuntime(2839): Caused by: java.lang.ExceptionInInitializerError
02-01 16:51:54.687: E/AndroidRuntime(2839):     at java.lang.Class.classForName(Native Method)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at java.lang.Class.forName(Class.java:217)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at com.googlecode.javacpp.Loader.load(Loader.java:338)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at com.googlecode.javacv.cpp.avcodec.<clinit>(avcodec.java:86)
02-01 16:51:54.687: E/AndroidRuntime(2839):     ... 16 more
02-01 16:51:54.687: E/AndroidRuntime(2839): Caused by: java.lang.UnsatisfiedLinkError: Cannot load library: link_image[1891]: 26325 could not load needed library 'libavutil.so' for 'libjniavutil.so' (load_library[1093]: Library 'libavutil.so' not found)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at java.lang.Runtime.load(Runtime.java:340)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at java.lang.System.load(System.java:521)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at com.googlecode.javacpp.Loader.loadLibrary(Loader.java:422)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at com.googlecode.javacpp.Loader.load(Loader.java:372)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at com.googlecode.javacpp.Loader.load(Loader.java:319)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at com.googlecode.javacv.cpp.avutil.<clinit>(avutil.java:75)
02-01 16:51:54.687: E/AndroidRuntime(2839):     ... 20 more 
```

请问有什么建议吗？

我还想附上我的**Android.mk**文件

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
OPENCV_LIB_TYPE:=STATIC
include C:/Users/Marco/Desktop/new_ADT/adt-bundle-windows-x86_64/OpenCV-2.4.3.2-android-sdk/sdk/native/jni/OpenCV.mk
OPENCV_INSTALL_MODULES:=on
#OPENCV_CAMERA_MODULES:=on
LOCAL_MODULE    := udmodule
LOCAL_SRC_FILES := udjni.cpp
LOCAL_LDLIBS +=  -llog -ldl
include $(BUILD_SHARED_LIBRARY) 
```

和我的**Apllication.mk**文件

```
APP_STL := gnustl_static
APP_CPPFLAGS := -frtti -fexceptions
APP_ABI := armeabi armeabi-v7a 
#APP_ABI := all
APP_PLATFORM := android-8 
```

有什么建议吗？谢谢

我也尝试以这种方式更改 application.mk 文件但没有结果：

```
APP_STL := gnustl_static
APP_CPPFLAGS := -frtti -fexceptions
APP_ABI := armeabi
LOCAL_CFLAGS += -march=armv7-a -mfloat-abi=softfp -mfpu=vfp -mfpu=neon
LOCAL_LDLIBS += -Wl,--fix-cortex-a8
APP_PLATFORM := android-8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:14:36.560

www.phonearena.com 上的交叉引用 我猜您的平板电脑使用的是 NVIDIA Tegra 2 处理器，但 Nexus 使用的是 Tegra 3 处理器。

我假设您在 lib 目录中复制 .so 文件。您可能会在[这里](http://opencv.org/platforms/android.html)查看 OpenCV4Android - 它打包为可以安装的 apk 文件，因此您不必担心为您的平台编译的 .so 文件。

NVIDIA 也有专门在 Tegra 处理器上运行 OpenCV 的[说明](http://docs.nvidia.com/tegra/data/How_to_Use_OpenCV_for_Tegra.html)。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T11:09:34.147

> 原因：java.lang.UnsatisfiedLinkError：无法加载库：link_image[1891]：26325 无法为“libjniavutil.so”加载所需的库“libavutil.so”（load_library[1093]：未找到库“libavutil.so”）

看起来你调用了错误的文件名？

> 找不到库“libavutil.so”

应使用[以下代码](https://stackoverflow.com/questions/20063397/how-to-load-another-so-file-in-your-android-project/20063480?noredirect=1#comment29887028_20063480)调用文件 *.so ：

```
static {
       System.loadLibrary("libavutil");
} 
```

# doctrine - 将多对多属性作为返回值的原则

> ID：14650666
> 
> 赞同：2
> 
> 时间：2013-02-01T16:24:53.467
> 
> 标签：doctrine, doctrine-orm, many-to-many

我有两个实体餐厅和美食，餐厅与美食有多对多的关系，有趣的是，美食。

因此，如果我有两家餐厅（rest1、rest2）和两种美食（印度、中国），而且两家餐厅都只有印度菜

```
rest1  indian
rest2  indian 
```

我想通过查询构建器执行 DQL 查询，该查询返回美食列表以及分配了美食的餐厅数量。所以，理论上是这样的。

```
$qb->select('rc AS cuisine, COUNT(r) AS restaurantCount')
   ->from('Restaurant', 'r')
   ->join('r.cuisines', 'rc')
   ->addGroupBy('rc'); 
```

所以，结果，我想

```
cuisine: indian restaurantCount: 2 
```

我知道这会产生错误，因为需要返回主要实体。

我也知道这可以通过创建和使用多对多的逆来实现，但我试图避免将美食赋予餐厅属性以避免双向关系的复杂性。

将餐厅作为主要选择表是否可以获得所需的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:39:41.403

以干净的 OOP 方式，不使用双向关系，我认为这是不可能的。
这没有多大意义，您是精选餐厅，但返回的是其他东西。

但是，您始终可以将原始 SQL 用于此类事情。
恕我直言，比为此强制建立双向关系更快、更清洁的解决方案。

# javascript - JS/HTML - 一页应用程序 - 取消异步操作

> ID：14650670
> 
> 赞同：2
> 
> 时间：2013-02-01T16:25:04.710
> 
> 标签：javascript, html, ajax, asynchronous

我正在开发一个单页应用程序。我第一次构建适当的单页应用程序并遇到一些问题。

* * *

每个页面都有一组可以触发的异步操作。这些操作最多可能需要 30 秒。

用户很可能会更改页面，从而导致异步操作在完成后失败。

每次页面更改时都会重新呈现页面 HTML，因此由于缺少 DOM 元素和/或其他资源/变量而导致操作失败。由于状态的变化，变量和其他资源也可能发生变化。

您一般如何处理此类问题？

* * *

我相信取消正在进行的请求几乎是不可能的，除非它被分成检查点，在继续之前进行检查。

我想一些选择是：

1.  以检查结束每个功能`active page`。这必须在与每个资源交互之前在检查点完成，以防止不必要的行为。

2.  捕获异常并让它们静默失败

* * *

有什么想法吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:30:25.580

Use events? Emit an event when you want to cancel the request, and have the request listen for the event / be ready to handle its stop gracefully.

```
function Potato {
  this.running = true;
}

Potato.prototype.stop = function () {
  this.running = false;
}

Potato.prototype.dostuff = function () {
  var things = [1, 2, 3];

  Object.keys(things).forEach(function(k) {
    if (!this.running) {
      break;
    }
    console.log(k);
  });
}

var potato = new Potato;
potato.on('stop', potato.stop);
this.emit('stop'); 
```

Sorry, not exactly clean code, but you get the idea?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:32:27.250

1.  如果是单页应用程序，用户如何更改页面？
2.  与任何 UX 决策一样，这都是关于反馈的……您必须让用户了解正在发生的事情。如果用户可以在页面执行某些操作时继续移动，那么您需要提醒用户执行其他操作将放弃他们所做的更改，或者阻止他们执行其他操作，直到当前操作完成。如果是后者，在代码中创建一个“处理”标志并不少见，该标志在动作开始时被触发，并在动作完成时被清除。这样，如果用户尝试其他会中断操作的交互，您可以在允许用户的最新操作完成之前通过检查当前是否正在处理任何内容来处理它。（上面 Zipp 的例子说明了这种策略。）

# magento - Magento 运费优惠券折扣

> ID：14650671
> 
> 赞同：0
> 
> 时间：2013-02-01T16:25:05.837
> 
> 标签：magento, shipping, discount

我正在针对特定产品运行具有两种运输方式的促销运输规则。当我使用促销代码时，它似乎可以工作，但它不会将运费折扣应用于总计。

我需要在 magento 核心修改哪些文件？

# android - 如何从使用 Tabs 和 pager 的活动中获取对 SherlockFragment 的引用

> ID：14650679
> 
> 赞同：2
> 
> 时间：2013-02-01T16:25:37.067
> 
> 标签：android, actionbarsherlock

因为这个，我非常厌倦。我试图从 SherlockFragmentActivity 调用 SherlockFragment 中的方法。我的 SherlockFragmentActivity 使用 Sherlock 的选项卡和寻呼机功能。我无法参考我的 SherlockFragment。如果您能帮助我了解如何从其活动中调用片段中存在的方法，我将不胜感激。

这是我的 SherlockFragmentActivity！

```
public class main extends SherlockFragmentActivity implements 
menu_fragment.OnMenuSelectedListener,
content_fragment.OnContactSelectedListener{
TabHost mTabHost;
ViewPager mViewPager;
TabsAdapter mTabsAdapter;

public static class TabsAdapter extends FragmentPagerAdapter implements     TabHost.OnTabChangeListener, ViewPager.OnPageChangeListener
{
private final Context mContext;
private final TabHost mTabHost;
private final ViewPager mViewPager;
private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();
private final ActionBar mActionBar;

static final class TabInfo {
    private final String tag;
    private final Class<?> clss;
    private final Bundle args;

    TabInfo(String _tag, Class<?> _class, Bundle _args) {
        tag = _tag;
        clss = _class;
        args = _args;
    }
}

static class DummyTabFactory implements TabHost.TabContentFactory {
    private final Context mContext;

    public DummyTabFactory(Context context) {
        mContext = context;
    }

    @Override
    public View createTabContent(String tag) {
        View v = new View(mContext);
        v.setMinimumWidth(0);
        v.setMinimumHeight(0);
        return v;
    }
}

    public TabsAdapter(SherlockFragmentActivity activity, TabHost tabHost, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mTabHost = tabHost;
        mViewPager = pager;
        mTabHost.setOnTabChangedListener(this);
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
        mActionBar = activity.getSupportActionBar();
    }

    public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args){
        tabSpec.setContent(new DummyTabFactory(mContext));
        String tag = tabSpec.getTag();
        Log.d("NET","tabtag: "+tag);
        TabInfo info = new TabInfo(tag, clss, args);
        mTabs.add(info);
        mTabHost.addTab(tabSpec);
        notifyDataSetChanged();
    }

    @Override
    public void onPageScrollStateChanged(int arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onPageScrolled(int arg0, float arg1, int arg2) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onPageSelected(int position) {
        // Unfortunately when TabHost changes the current tab, it kindly
        // also takes care of putting focus on it when not in touch mode.
        // The jerk.
        // This hack tries to prevent this from pulling focus out of our
        // ViewPager.
        TabWidget widget = mTabHost.getTabWidget();
        int oldFocusability = widget.getDescendantFocusability();
        widget.setDescendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS);
        mTabHost.setCurrentTab(position);
        widget.setDescendantFocusability(oldFocusability);
    }

    @Override
    public void onTabChanged(String arg0) {
        int position = mTabHost.getCurrentTab();
        mViewPager.setCurrentItem(position);
    }

    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.clss.getName(), info.args);
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

}

@Override
protected void onCreate(Bundle arg0) {
    super.onCreate(arg0);
    setContentView(R.layout.main);
    mTabHost = (TabHost) findViewById(android.R.id.tabhost);
    mTabHost.setup();

    mViewPager = (ViewPager) findViewById(R.id.pager);

    mTabsAdapter = new TabsAdapter(this, mTabHost, mViewPager);     

    mTabsAdapter.addTab(mTabHost.newTabSpec("MENU").setIndicator("MENU"),
            menu_fragment.class, null);
    mTabsAdapter.addTab(mTabHost.newTabSpec("CONTENT").setIndicator("CONTENT"),
            content_fragment.class, null);

    content_fragment c = (content_fragment) getSupportFragmentManager().findFragmentByTag(makeFragmentName(R.id.pager, 1));

    //Log.d("NET",getFragmentTag(1));
    //Log.d("NET",makeFragmentName(R.layout.contacts, 1));

    try{
        c.test();
    }catch(Exception e){
        Log.d("NET",e.toString());
    }
}

private String getFragmentTag(int pos){
    return "android:switcher:"+R.id.pager+":"+pos;   //fragmentpageradapter auto generated tag
}

private static String makeFragmentName(int viewId, int index) {
     return "android:switcher:" + viewId + ":" + index;
}

@Override
public void onMenuSelected(int i){
    Toast.makeText(getApplicationContext(), "menu selected "+i, Toast.LENGTH_SHORT).show();

}

@Override
public void onContactSelected(){
    Toast.makeText(getApplicationContext(), "contact selected", Toast.LENGTH_SHORT).show();
    //ActionBar mActionBar = getSupportActionBar();
}

} 
```

这是我的 SherlockFragment！

```
public class content_fragment extends SherlockFragment{
static ScrollView scroller_page;
static String[] contacts = {"gp","janu","tn","varun","joseph"};
OnContactSelectedListener cListener;

public interface OnContactSelectedListener {
    public void onContactSelected();
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View f = inflater.inflate(R.layout.content_fragment, container, false);

    return f;
}

public void test(){
    Toast.makeText(getSherlockActivity(), "method called ", Toast.LENGTH_SHORT).show();
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    try{
        cListener = (OnContactSelectedListener) activity;
    }catch(Exception e){
        throw new ClassCastException(activity.toString() + " must implement OnArticleSelectedListener");
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:57:18.993

尝试更换：

```
content_fragment c = (content_fragment) getSupportFragmentManager().findFragmentByTag(makeFragmentName(R.id.pager, 1)); 
```

和：

```
content_fragment c = (content_fragment) mTabsAdapter.getItem(1); 
```

# android - android TextToSpeech：获取音频时间长度

> ID：14650681
> 
> 赞同：9
> 
> 时间：2013-02-01T16:25:41.997
> 
> 标签：android, text-to-speech

我正在使用**TextToSpeech**类在 android 中工作，并且有一个具有特定长度的字符串。我想计算这个生成的文本到语音音频的估计时间（我知道我可以得到音频，然后得到这个生成的音频的时间长度，但我想探索其他替代方案）。

我正在尝试获取**speechRate**（但似乎不可能），并且使用字符串的长度创建一些公式来估计时间。

有什么建议吗？？

提前致谢。

PD：关于规范：[getSpeechRate()？（或如何判断当前设置的 TTS 速率）](https://stackoverflow.com/questions/11954874/getspeechrate-or-how-to-tell-what-rate-tts-is-currently-set-at)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-02T20:06:56.817

我使用 int pauseInSeconds=1+string.length()/7 进行简短的英语口语。

当然非常粗糙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-08T02:01:12.997

你可以这样做：

```
private void speakWord(String word)
{
     //Get time
     textToSpeech.speak(...);
     checkSpeaking(true);
}

private void checkSpeaking(boolean isSpeaking)
{
    Print.e("Speaking is: " + isSpeaking);
    if (isSpeaking)
    {
        new Handler().postDelayed(()-> 
        {
            if (textToSpeech.isSpeaking()) {
                checkSpeaking(true);
            }
            else {
                checkSpeaking(false);
            } 
        },300);
    }
    else
    {
        //Get time
    } 
} 
```

# django - 如何更改 django 以使用 MD5 保存密码？

> ID：14650689
> 
> 赞同：1
> 
> 时间：2013-02-01T16:26:14.863
> 
> 标签：django, authentication

您好，我会尝试在 django 中将默认的 SHA 加密系统更改为 MD5。

我知道.. SHA 比 MD5 更好，但我需要使用 MD5。

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:32:33.450

尝试输入您的设置：

```
PASSWORD_HASHERS = (
    'django.contrib.auth.hashers.MD5PasswordHasher',
) 
```

这会将密码存储为：

```
algorithm$hash 
```

并且会使用盐。

如果您需要不同的东西，您需要编写自己的哈希器。应该不难，看看 Django MD5 实现：[https ://github.com/django/django/blob/master/django/contrib/auth/hasers.py#L329](https://github.com/django/django/blob/master/django/contrib/auth/hashers.py#L329)

# php - 是否可以从 sql 查询中仅返回 2 个值？

> ID：14650692
> 
> 赞同：0
> 
> 时间：2013-02-01T16:26:26.067
> 
> 标签：php, mysql

是否可以从中返回 2 个值？

我希望 HAVING 子句最多有两个。

```
$sql = mysql_query("
SELECT *
FROM 
    `Bill`
WHERE
    ID_Number='12345'
HAVING 
    max(`Pay_Date`)
ORDER BY
    `Pay_Date`
 DESC LIMIT 2"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:32:44.987

您可以改为按 pay_date 订购结果。

```
$sql = mysql_query("
SELECT *
FROM 
    `Bill`
WHERE
    ID_Number='12345'
ORDER BY
    `Pay_Date`
 DESC LIMIT 2"); 
```

这应该有效，因为您将在 desc 中按 pay_date 对结果进行排序。命令。因此将显示最近的两个日期。

# mongodb - MongoDB聚合结果缓存

> ID：14650694
> 
> 赞同：3
> 
> 时间：2013-02-01T16:26:30.687
> 
> 标签：mongodb, aggregation-framework

我在 mongodb 中有一个相当大的集合，大约有 100 000 个文档（未分片）。这是一个 Web 应用程序的后端，基本上只允许用户浏览不同的方式来查看此集合中的相同信息。

对于其中一个视图，我尝试使用聚合框架计算字段的出现次数。这意味着聚合整个集合。问题是这种聚合操作（这是一个简单的分组、排序和限制管道）需要 2 秒，这对于 Web 应用程序来说太慢了。

所以我的问题是；为了缓存此聚合操作的结果，首选解决方案是什么？据我发现，不可能“聚合成”一个新的集合，或者类似的东西。目前我发现的唯一解决方案是将整个结果读入一个变量，然后使用 insert 将此变量插入一个新集合中 - 但我担心这涉及从数据库发送大量数据 => 到我的应用程序 =>回到数据库？

有什么建议么？

管道示例：

```
res = items.aggregate([
    { "$group": { "_id": { "item_id": "$item_id", "title": "$title", "category": "$category" }, "count": { "$sum": 1 } } },
    { "$sort": { "count": -1 } },
    { "$limit": 5 }
]) 
```

架构基本上是这 3 个字段 + 一些真正不相关的字段，即：

```
doc = {
    "item_id": 1000,
    "title": "this is the item title",
    "category": "this is the item category"
} 
```

我在 item_id 和所有 3 个字段上都尝试了索引，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:17:50.900

聚合将结果返回到一个文档。结果受限于16M。文档返回到应用程序。

如果你想“聚合”到一个集合 - 使用 map-reduce。

```
map_function = function () {
        emit(this.item_id, {"item_id": this.item_id, /* any other info */ "count": 1});
};

reduce_function = function (key, values) {
        var result = {"item_id": key, /* any other info should be given from one or any of values array objects */ "count": 0};
        values.forEach(function (value) {
                result["count"] += value["count"];
        });
        return result;
}; 
```

不确定您是否可以发出结构值 - 请尝试。顺便说一句，发射关键领域是好的。

# mysql - MySQL中删除和插入记录频率高的解决方案

> ID：14650696
> 
> 赞同：1
> 
> 时间：2013-02-01T16:26:37.967
> 
> 标签：mysql, performance, mongodb, insert

我的程序（游戏服务器）经常从表中删除许多记录，然后也将许多记录插入到表中。用例是：

1.  一个角色可能有很多物品，每个物品都有它的属性。
2.  一旦一个角色被加载到游戏中，他的项目就会存储在内存中。
3.  当角色存在游戏时，所有旧记录（角色加载到游戏之前）将被删除，程序会将角色的新项目插入数据库。
4.  一个角色平均有 100 个项目（100 个项目记录和 100 个其他项目属性记录）

当 CCU 达到 1k 左右时，mysql 控制这些读/写会变得非常慢。

我尝试了很多方法来优化 MySQL，但它们还不够好。我的临时解决方法是为 MySQL 数据文件夹使用 SSD 磁盘。

我的问题是：我应该使用其他 DBMS（目前正在考虑使用 MongoDB ...）吗？我应该选择什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:57:34.310

MySQL 可以处理很多事情，但是表的频繁`INSERT`,`UPDATE`和`DELETE`选项会导致严重的降级。保持 MySQL 在高负载下运行是可能的，但对于这种情况，您需要将其分片到不同的表或数据库中。

不过，为 MySQL 使用 SSD 并不是一个坏主意。

[如果您可以围绕像Redis](http://redis.io/)这样的快速键值存储来构建系统，那么您可能会拥有您想要的所有性能，前提是所有数据都可以放入内存中。

# wpf - 有人可以教我如何阅读 Storyboard.TargetProperty 及其转换组吗？

> ID：14650702
> 
> 赞同：2
> 
> 时间：2013-02-01T16:26:52.337
> 
> 标签：wpf, wpf-controls

我是一个新手，从 [http://www.codeproject.com/Articles/199014/Page-Transition-Control-for-WPF看这个例子](http://www.codeproject.com/Articles/199014/Page-Transition-Control-for-WPF)

它有很多这样的故事板对象

`<DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(TransformGroup.Children)[1].(SkewTransform.AngleX)" To="100" Duration="0:0:.75" AccelerationRatio=".9" />`

和这样的 TransformGroup

```
`<ScaleTransform 
  ScaleX="1" ScaleY="1" 
  CenterX="{Binding RelativeSource={RelativeSource AncestorType=Grid, Mode=FindAncestor}, Path=ActualWidth, Converter={StaticResource centerConverter}}" 
    CenterY="{Binding RelativeSource={RelativeSource AncestorType=Grid, Mode=FindAncestor}, Path=ActualHeight, Converter={StaticResource centerConverter}}" 
/>

<SkewTransform 
  AngleX="0" 
  AngleY="0" 
    CenterX="{Binding RelativeSource={RelativeSource AncestorType=Grid, Mode=FindAncestor}, Path=ActualWidth, Converter={StaticResource centerConverter}}" 
    CenterY="{Binding RelativeSource={RelativeSource AncestorType=Grid, Mode=FindAncestor}, Path=ActualHeight, Converter={StaticResource centerConverter}}" 
/>

<RotateTransform 
  Angle="0" 
    CenterX="{Binding RelativeSource={RelativeSource AncestorType=Grid, Mode=FindAncestor}, Path=ActualWidth, Converter={StaticResource centerConverter}}" 
    CenterY="{Binding RelativeSource={RelativeSource AncestorType=Grid, Mode=FindAncestor}, Path=ActualHeight, Converter={StaticResource centerConverter}}" 
/>
<TranslateTransform X="0" Y="0" />` 
```

有人可以向我解释它是如何工作的，这太令人困惑了！我花了一整天的时间阅读 Xaml 和 wpf 书籍，但我仍然不明白。当我尝试通过简化代码来理解时，我不断收到如下错误：'[Unknown]' 属性不指向路径'(RenderTransform).(0)[1].(1)' 中的 DependencyObject

WPF真的那么难吗！？！？！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:40:17.527

如果您是 WPF 新手，动画可能不是最好的起点，但我会看看是否可以稍微解释一下。

WPF 中有两种类型的“变换”，可用于修改 UI 对象的外观。

*   `LayoutTransform`在 WPF 确定对象在屏幕上的布局方式后修改对象
*   `RenderTransform`在渲染到屏幕后修改对象

这两个属性都包含为对象发生的[转换](http://msdn.microsoft.com/en-us/library/ms750596.aspx)`Rotate`集合： 、`Scale`、`Skew`和`Translate`（上/下或左/右）

[动画](http://msdn.microsoft.com/en-us/library/ms752312.aspx)是在特定时间段内将属性从一个值更改为另一个值的东西。例如，您可能会在`Height`1 秒内将对象的属性从 50 更改为 200，以使对象在屏幕上明显变大。

您正在查看的代码是这些动画之一。

```
<DoubleAnimation 
    Storyboard.TargetProperty="(RenderTransform).(TransformGroup.Children)[1].(SkewTransform.AngleX)" 
    To="100" Duration="0:0:.75" AccelerationRatio=".9" /> 
```

标签名称告诉我们它是 a `DoubleAnimation`，这意味着它正在修改类型为 的属性`double`。

`TargetProperty`告诉我们它正在修改集合中的第二个对象（`RenderTransform`为了简化一点，`RenderTransform.Children[1]`）

预期的 Transform 有`SkewTransform`，并且动画设置为在几秒钟内将属性从`AngleX`现在的任何内容更改为，`100``0:0:.75`

I'm not that familiar with the [AccelerationRatio](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.timeline.accelerationratio.aspx) property, however I believe it modifies how fast the value should accelerate from the start value to the end value.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:36:37.400

属性路径中使用 (XY) 形式的任何内容都表示“类型 X 中定义的 DependencyProperty Y 的值”。这些可以是普通的 DP，也可以是在其所有者以外的类型上设置的附加属性。

# php - 在 GET 变量中嵌套两个或多个 php 脚本

> ID：14650703
> 
> 赞同：2
> 
> 时间：2013-02-01T16:26:53.537
> 
> 标签：php, html

我创建了一个小脚本 minimize.php 女巫从 GET 给出的图像中回显缩略图。

另一个脚本 cover.php 回显 .mp3 文件的封面图像。

我在我的页面上都这样使用：

```
<img src="miniature.php?maxWidth=300&img=img/image.jpg" />
<img src="cover.php?file=files/beat it.mp3" /> 
```

两者都运作良好。

但我想用封面做一个缩影，我可能需要这样的东西：

```
<img src="miniature.php?maxWidth=300&img=cover.php?file=files/beat it.mp3" /> 
```

而且......这不起作用。
在将封面图像发送到微型之前，是否可以在不保存封面图像的情况下做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:53:08.027

如果您在使用cover.php 的完整编码url 在您的minimum.php 中使用file_get_content （或类似函数），这是可能的。结果 url 应该是这样的：

```
<img src="miniature.php?maxWidth=300&img=http%3A%2F%2Fwww.mywebsite.com%2Fcover.php%3Ffile%3Dfiles%252Fbeat%2520it.mp3" /> 
```

请注意，您需要对文件/beat it.mp3 进行两次编码。

# mysql - SQL选择按日和月查询顺序

> ID：14650705
> 
> 赞同：2
> 
> 时间：2013-02-01T16:26:57.160
> 
> 标签：mysql, sql, postgresql

假设今天是 2 月 3 日。

我有一张桌子：

```
CREATE TABLE devotion
(
  id serial NOT NULL,
  date timestamp without time zone
} 
```

我有 4 条记录：

```
id date
1  2013-01-01
2  2013-02-02
3  2013-03-03
4  2013-04-04 
```

我想构建一个选择查询，它将按以下顺序返回所有记录（按日期排序，但即将到来的日期在前，传递的日期附加到列表的末尾）：

```
id date
3  2013-03-03 (upcoming dates first)
4  2013-04-04
1  2013-01-01 (passed dates appended to the end of the list)
2  2013-02-02 
```

所有记录都是同一年。事实上，年不重要，只有日和月才重要。如果您能提出更好的结构，非常欢迎您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:30:08.100

`order by case when date1 > now() then 0 else 1 end case, date1`

将给出 3,4,1,2 的顺序

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T17:17:19.450

更简单：

```
ORDER BY (date1 < now()), date1 
```

您可以按表达式的布尔值排序`(date1 < now())`。
`FALSE`排序之前`TRUE`排序之前`NULL`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T17:01:43.940

这是另一个解决方案。当然，上面的答案已经足够好了。您不能假设今天是 2 月 3 日，因为我们采用`Now()`的是`Feb 2nd`. 所以我使用了演示数据`2013-02-01`。而这个答案主要取决于你的`ID`. 要说 ID 是连续的，日期也是如此。**任何人都可以自由评论这个逻辑的*狡猾部分***..

[MYSQL 演示](http://sqlfiddle.com/#!2/8f926/4)

```
select id, `date`,
case when `date` > Date_Format(Now(),'%Y-%m-%d')
then id-3
else id+2 end as x
from demo
order by x asc
;

| ID |                            DATE | X |
--------------------------------------------
|  3 |    March, 03 2013 00:00:00+0000 | 0 |
|  4 |    April, 04 2013 00:00:00+0000 | 1 |
|  1 |  January, 01 2013 00:00:00+0000 | 3 |
|  2 | February, 01 2013 00:00:00+0000 | 4 | 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T16:31:59.563

如果您使用的是 MySQL，我会说只是使用`RIGHT`，但以下内容应该适用于 psql：

```
SELECT * FROM devotion ORDER BY substring(to_char( date, 'YYYY-MM-DD') from char_length(to_char( date, 'YYYY-MM-DD')) - 5) 
```

# maven - Maven-2：如何管理依赖项所依赖的位置？

> ID：14650711
> 
> 赞同：0
> 
> 时间：2013-02-01T16:27:32.027
> 
> 标签：maven, maven-2, maven-dependency-plugin

我知道，默认情况下，使用 maven 依赖项，它会从本地 repo（.m2 目录）中获取所需的一切。在我的应用程序中，我不希望它依赖于本地目录，而是依赖于特定位置。我使用了`<scope>system</scope>`with `<systemPath>../path/to/file/</systemPath>`，但它仍然取决于 .m2 目录。无论如何，我可以更改 Maven 依赖项依赖的位置吗？

在我的应用程序中，我使用的是本机代码 (C++)，并且有`.nar`文件`.so`。在这个例子中，我特别需要依赖`.so`特定目录中的文件，但它总是指向 .m2 目录。有没有可以解决这个问题的插件？

另外，要注意我使用的是 Maven 2.2.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:31:01.857

首先，在 Maven 中没有什么需要修复的。Maven 就是这样工作的。在您的情况下，您需要一个不在 maven 存储库中的工件，这意味着您需要将该文件传输到 maven 存储库中，然后您可以使用简单的依赖项来使用该文件（.so）。有两种可能的解决方案：

通过提供 groupId、artifactId 和 version，使用[install-file将该特定文件作为工件安装到本地存储库中](http://maven.apache.org/plugins/maven-install-plugin/)

mvn install:install-file ...

另一个也是最好的解决方案是使用[存储库管理器](http://maven.apache.org/repository-management.html)并将所需的文件安装到存储库管理器中，这使得其他人也可以使用它，而不仅仅是你。

# string - 在 perl 中打印时使用三元运算符

> ID：14650715
> 
> 赞同：-1
> 
> 时间：2013-02-01T16:27:46.300
> 
> 标签：string, perl, int, ternary-operator

这是我的代码：

```
for($i=1;$i<=100;$i++){
   if($i%15==0) print "Divisible by 15";
   else if($i%5==0) print "Divisible by 5";
   else print ($i%3==0)? "Divisible by 3":$i;
   print "\n";
} 
```

它是一个非常简单的代码。我让它在 Java 中工作，虽然它在 Perl 中给出了一个错误。错误是：

```
syntax error at line 2, near ") print"
Execution aborted due to compilation errors. 
```

我是 Perl 的新手。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T16:31:11.710

Try this version:

```
for($i=1;$i<=100;$i++){
   if ($i%15==0) { print "Divisible by 15" }
   elsif($i%5==0) { print "Divisible by 5" }
   else { print +($i%3==0)? "Divisible by 3":$i; }
   print "\n";
} 
```

You need to add braces around the then-part of if statements and use `elsif` instead of `else if`.

Without the `+` in the `print` statement, perl parses the statement as:

```
print(...)  ?  "Divisible by 3"  :  $i; 
```

ie. it will use the value returned by `print` as the first argument to the ternary operator. Another solution is to write:

```
 else { print( $i % 3 == 0 ? "..." : $i ) } 
```

# javascript - 释放 Object3D

> ID：14650716
> 
> 赞同：2
> 
> 时间：2013-02-01T16:27:48.777
> 
> 标签：javascript, memory-management, three.js

我还使用 mtl 文件从 obj 文件加载模型。如何从 r55 中返回的 Object3D 中正确处理或取消分配所有几何体/材质/纹理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T17:47:53.500

尝试这个：

```
object.traverse( function ( child ) {

    if ( child.geometry !== undefined ) {

        child.geometry.dispose();
        child.material.dispose();

    }

} ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-12T08:07:40.193

感谢[mrdoob 的示例](https://stackoverflow.com/a/14652105/1763602)，我创建了一个递归处理 three.js 对象的函数。我将它添加到我个人的three.js util 库中：[https ://github.com/MarcoSulla/my3](https://github.com/MarcoSulla/my3)

```
function dispose3(obj) {
    /**
     *  @author Marco Sulla (marcosullaroma@gmail.com)
     *  @date Mar 12, 2016
     */

    "use strict";

    var children = obj.children;
    var child;

    if (children) {
        for (var i=0; i<children.length; i+=1) {
            child = children[i];

            dispose3(child);
        }
    }

    var geometry = obj.geometry;
    var material = obj.material;

    if (geometry) {
        geometry.dispose();
    }

    if (material) {
        var texture = material.map;

        if (texture) {
            texture.dispose();
        }

        material.dispose();
    }
}, 
```

我希望这个函数将被添加到三个.js 代码中，在`Scene.remove`方法中（可能只有当你设置一个可选标志时才调用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T14:18:52.123

我用这个：

```
function removeReferences(removeme){
  try{
    removeme.traverse(function(ob){
      try{
        renderer.deallocateObject(ob);
      }catch(e){} 
      try{
        ob.geometry.deallocate();
      }catch(e){}
      try{
        ob.material.deallocate();
      }catch(e){} 
      try{
        ob.deallocate()
      }catch(e){}
    });
  }catch(e){}
} 
```

# javascript - javascript中的'/'是如何工作的？

> ID：14650718
> 
> 赞同：1
> 
> 时间：2013-02-01T16:27:54.490
> 
> 标签：javascript, regex

这怎么可能？

```
var re = /\w+/; 
```

我从未在任何其他语言中看到过类似的东西。这是语言语法的一部分还是其他什么？前导'/'是我不明白的，当它用“\w+/”得到它时，js究竟做了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:30:16.577

它是一个正则表达式文字。

[**来自 MDN 文档**](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

> 您可以通过以下两种方式之一构建正则表达式：
> 
> 使用正则表达式文字，如下所示：
> 
> ```
> var re = /ab+c/; 
> ```
> 
> 正则表达式文字在评估脚本时提供正则表达式的编译。当正则表达式保持不变时，使用它以获得更好的性能。
> 
> 调用RegExp对象的构造函数，如下： 1
> 
> ```
> var re = new RegExp("ab+c"); 
> ```
> 
> 使用构造函数提供正则表达式的运行时编译。当您知道正则表达式模式将发生变化时，或者您不知道该模式并从另一个来源（例如用户输入）获取它时，请使用构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:29:50.310

这是一个[正则表达式字面量](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)。

[它与使用RegExp](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)构造函数构建正则表达式大致相同，但它在解析时立即编译，您不需要 escape `\`。

请注意，您至少在另一种语言中具有相同的句法结构：Perl。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:29:12.753

它不是 JavaScript 独有的，它的[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)或 RegEx。'/' 开始和结束您要与之比较的表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T16:29:33.240

那是一个[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)。它定义了匹配字符串和数字的规则。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T16:29:54.083

是正则表达式；用于对文本执行模式匹配和“搜索和替换”功能。

[http://www.w3schools.com/jsref/jsref_obj_regexp.asp](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T16:29:58.757

是的，它是正则表达式语法，它是 Javascript 标准的一部分，完全可以正常使用。

`/\w+/`在 RegExp 中的意思是按顺序查找字母数字字符... `\w`表示字母赌注中的任何字母或数字。`+`表示在一个序列中应该至少有 1 个或多个。

```
"this123 is a test".match(/\w+/) == "this123" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-01T16:30:46.347

有点诗意：*`/`对正则表达式就像`"`对字符串一样。*

```
var intVar = 0;
var stringVar = "0";
var regexpVar = /0/; 
```

# ruby-on-rails-3 - rails 3 从不同的控制器更新模型

> ID：14650720
> 
> 赞同：0
> 
> 时间：2013-02-01T16:27:58.073
> 
> 标签：ruby-on-rails-3, forms, model-view-controller

我有 3 张桌子：超级英雄、权力、团队

超级英雄可以拥有许多权力和许多团队。

例如：

```
superhero.rb
  name:string

  has_many :power_teams, :dependent => :destroy
  has_many :powers, :through => :power_teams, :foreign_key => :power_id 
  has_many :teams, :through => :power_teams, :foreign_key => :team_id

power.rb
  name:string
  has_many :power_teams, :dependent => :destroy

team.rb
  name:string
  has_many :power_teams, :dependent => :destroy

#This is what I want to add to
power_team
  belongs_to :superhero
  belongs_to :power
  belongs_to :team 
```

更新这里是超级英雄的控制器

```
def create
  @hero = Superhero.new(params[:hero]) 
```

形式：

```
<%= form_for(@hero) do |f| %>

  <%= f.label :name %><br />
  <%= f.text_field :name %>

  #Teams are a drop-down, you can only choose 1 team
  <%= f.collection_select(:team_ids, Team.all(:order=>:name), :id, :name, {:prompt => true}) %>

  #powers are checkboxes, you can choose multiple powers
  <% Power.all.each do |power| %>
     <label class="checkbox">
     <%= check_box_tag "superhero[power_ids][]", power.id, @hero.power_ids.include?(power.id) %>
     <%= power.name %>
     </label>
  <% end %>
<% end %> 
```

当我保存时，我得到了 1 个团队和 2 个权力（在索引页面中）：

```
Hero | Power | Team
  1      1     
  1      2
  1              1 
```

这是正确的吗？我以为我会看到并期待这个：

```
Hero | Power | Team
  1      1       1
  1      2       1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:43:42.940

您说要在权力和团队之间建立关系，而 power_team 目前只有一个声明为权力的关联。如果你在 power_teams 表上有 team_id，那么你应该在 power_team 模型中也有这个：

```
belongs_to :team 
```

这可能不是唯一的问题。很难说清楚，因为您仅部分定义了模型，没有定义您的架构，也没有提供您用来尝试更新的表单的代码等。

确保您在每个模型中都设置了两种方式的关联，并且关联的定义匹配。如果模型表中有外键列，则使用belongs_to；如果关联模型表具有为此模型定义的外键列，则使用has_one/has_many（取决于您希望返回的记录数），或者has_and_belongs_to_many（又名“HABTM”）如果您有一个*仅*有两列 - 一个用于它正在连接的两个表的每个外键。看起来您已经完成了一些依赖破坏，因此无需提及。如果您正在与旧架构集成，那么如果您在关联的任一侧使用非标准表名、非标准连接表名、非标准外键列名和/或 id 或非标准模型类名，那么您需要为关联的双方正确设置关联的其他选项。

即使您在评论中指出批量分配安全性不是问题，请确保如果您希望更新关联对象（并假设您使用具有批量分配安全性和白名单的 Rails 3.1+，这是最新 3.2.x 中的默认设置) 您要添加到为您接受嵌套属性的事物`_attributes`定义的属性名称的末尾。`attr_accessible`在 Rails 4 中，批量分配安全性即将消失，因此如果您对使用 strong_parameters 有任何兴趣，这将是研究该技术和其他新的 Rails 4 技术（rails-api、ActiveModel::Serializers 等）的好时机。目前可以在 Rails 3 中使用。

*更新：*

由于问题已更新，我现在看到 superhero 与 power_teams 有关联，反之亦然。在 superhero 或 power_team 中，该关联不是必需的，因此我将其删除。问题中的控制器似乎仍然缺少一些代码，因为它应该在加载创建表单时路由到“新”操作方法，并路由到接受表单提交的“创建”操作方法，所以有应该至少有两个方法叫做“new”和“create”。开始一个新项目并使用 rails generate scaffold 方法来获取初始内容可能是个好主意，因为您已经拥有了直接的架构（我刚才提到的更改是删除与 power_team 的超级英雄关联，反之亦然） . 根据其他问题，我知道您对 Rails 并不陌生，[http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)

# java - Java 是否有一个纯功能的不可变 Map 实现？

> ID：14650727
> 
> 赞同：1
> 
> 时间：2013-02-01T16:28:23.087
> 
> 标签：java, functional-programming

我有一个 Java 地图，其中包含许多键/值对。

我想用额外的键/值对创建这个 Map 的一个版本，但不会丢失旧版本。

简单的解决方案是复制旧的 Map，然后添加额外的键/值对，但我知道有一些不可变的 Map 算法可以更有效地实现这一点。

谁能指出我可以在 vanilla Java 中使用的这种实现（即不是 Clojure 或 Scala 库）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:43:08.687

[https://pcollections.org/](https://pcollections.org/)上的集合库似乎提供了高效的持久集合实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:32:12.440

你不能只调用 Map.putAll(Map other) 吗？我会假设 JVM 有效地实现了这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T21:00:21.073

您可以使用 java.util.Properties，使用默认值功能。

# ios - xpages如何检测IOS屏幕旋转

> ID：14650730
> 
> 赞同：2
> 
> 时间：2013-02-01T16:28:30.167
> 
> 标签：ios, xpages

我知道如何判断 IOS 设备在页面加载时的方向，但是如何检测页面查看期间屏幕何时旋转？这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T22:45:18.080

请参阅[https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html](https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)有一个部分名为：处理方向事件。

您很可能需要使用自定义 JS 来处理它。

# android - 在包 android 中找不到属性 fontFamily 的资源标识符

> ID：14650732
> 
> 赞同：19
> 
> 时间：2013-02-01T16:28:33.350
> 
> 标签：android

我面临错误

```
No resource identifier found for attribute fontFamily in package android 
```

在我的 android 应用程序中，有什么问题？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-01T16:32:26.157

如果您指的是`TextView`,`android:fontFamily`是在 API 级别 16 中添加的，并且在旧设备上不可用。您的 Android 构建目标（例如，Eclipse 中的 Properties > Android）比 API 级别 16 更早。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-11T13:37:23.817

您需要使用 API 16 或更高版本进行编译。

从命令行使用`--target 19`或更高版本，如：

```
android update project --path . --name MyApp --target 19 
```

顺便说一句：要查看目标编号如何与 API 编号匹配，请使用`android list targets`

我希望有人觉得这很有用，因为我花了几个小时试图解决以下错误：

> 错误：找不到与给定名称匹配的资源：attr 'android:fontFamily'

# security - 如何在分布式系统中管理用户（访问资源、认证）？

> ID：14650733
> 
> 赞同：3
> 
> 时间：2013-02-01T16:28:33.990
> 
> 标签：security, authentication, ssh, authorization

需要帮助管理我们系统上的开发人员身份验证。我们有多个 CentOS 服务器（数据库、Web、Redis 等），能够以集中（希望）简单的方式控制对它们的访问非常重要。我们现在使用的是 authorized_keys 文件，我们从开发人员生成的密钥中复制密钥数据。然而，这并不是那么可扩展和灵活，因为每当有人进入/离开团队时，我们都需要更新多个服务器。

我们可用的一种可能性是在执行`sshd restart`. 然而，在我投入时间实施之前，我有兴趣找出是否有更好的模式或替代方法。

验证多个用户的通常模式是什么，尤其是在多服务器环境中？一个解决方案的奖励点还允许我们定义某种角色，以封装访问（即前端开发人员可能不需要访问数据库服务器，作为一个非常人为的例子）。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T03:24:16.480

对于集中式身份验证方法，您应该研究[OpenLDAP 解决方案](http://www.idevelopment.info/data/LDAP/LDAP_Resources/OPENLDAP_Configure_System_to_Authenticate_Using_OpenLDAP_CentOS5.shtml)。这允许用于身份验证的组织结构，结合 SSH 和 PAM 后端将允许集中管理用户。至于您的角色问题，您可以利用 LDAP 组并将它们与`AllowGroups`SSHD 配置中的指令结合起来以允许此类访问（假设 SSH 是使用 UsePAM 设置的）。

# javascript - 创建新类型，还是检查类型？

> ID：14650734
> 
> 赞同：0
> 
> 时间：2013-02-01T16:28:36.623
> 
> 标签：javascript, ecmascript-5

例如，我有以下构造函数：

```
function MyType(){

    this.someProp = 'someText';

}; 
```

我创建一个新实例：

```
var myVar = new MyType(); 
```

现在我想检查这个对象的类型......

```
console.log(typeof(myVar));    //object
console.log(myVar.toString()); //[object Object] 
```

是否有任何方法`typeof`或默认`toString`方法返回**`MyType`**，而不仅仅是`object`.

*   以上内容已在 Chrome 控制台中进行了测试。

*   JSFiddle：http: [//jsfiddle.net/keqHN/](http://jsfiddle.net/keqHN/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:30:47.553

不，您不能覆盖`typeof`. 它[在规范中](http://es5.github.com/#x11.4.3)定义，并且有一组可能的返回值。它使用操作数的“[类型](http://es5.github.com/#x8)”，它只能是 null、undefined、string、boolean、number 和 object 之一。

但是，`instanceof`应该工作：

```
console.log(myVar instanceof MyType); // true 
```

旁注...`typeof`是一个运算符，而不是一个函数，所以你不需要它周围的括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:36:03.680

不，Javascript 中没有自定义类型。有 9 个原生构造函数：

*   数字（）
*   细绳（）
*   布尔值（）
*   目的（）
*   大批（）
*   功能（）
*   日期（）
*   正则表达式（）
*   错误（）

还有 3 种原始类型：

*   细绳
*   数字
*   布尔值

# wordpress - 在 wordpress 编辑器中更改模板的顺序

> ID：14650736
> 
> 赞同：0
> 
> 时间：2013-02-01T16:28:42.167
> 
> 标签：wordpress, templates

当我进入 Wordpress 编辑器时，模板文件按文件名排序。例如：

404.php 页脚.php front-page.php ... .. page.php

我想把这个列表按照模板文件中定义的“模板名称”排序。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:33:44.693

抱歉，theme-editor.php 和 class-wp-theme.php 中没有可用的钩子允许您对文件列表进行排序。

WordPress 使用自定义 scandir 函数来获取文件，然后通过 foreach 循环简单地打印它们。

您必须修改 WordPress 管理核心文件才能更改此设置 - 不建议这样做。

**编辑**：可能只需要在您的 WordPress 安装中稍作修改就可以更改此顺序。您可以准备一个插件，从管理员中删除默认主题编辑器菜单，并广告另一个链接到您的自定义 theme-editor.php（位于 wp-admin 目录中）这样：

```
function adjust_the_wp_menu() {
  remove_submenu_page( 'themes.php', 'theme-editor.php' );
  add_submenu_page('themes.php', _x('Editor', 'theme editor'), _x('Editor', 'theme editor'), 'edit_themes', 'my-theme-editor.php');
} 
```

此代码假定您已制作了一个与原始 theme-editor.php 内容完全相同的 theme-editor.php（名为 my-theme-editor.php）的副本。唯一的改变是将 my-theme-editor.php 文件中的所有“theme-editor.php”替换为“my-theme-editor.php”。

当您单击编辑器时，您将始终从管理菜单中输入此文件。整个文件都是您的，您可以尝试以您想要的方式更改顺序。Thant 你必须设法以正确的方式循环你的文件。这并不难，但你也注意到样式表被附加到 php 文件......

作为礼物，我已经为你准备了 my-theme-editor.php 文件；）这里是：

```
<?php
/**
 * Theme editor administration panel.
 *
 * @package WordPress
 * @subpackage Administration
 */

/** WordPress Administration Bootstrap */
require_once('./admin.php');

if ( is_multisite() && ! is_network_admin() ) {
    wp_redirect( network_admin_url( 'my-theme-editor.php' ) );
    exit();
}

if ( !current_user_can('edit_themes') )
    wp_die('<p>'.__('You do not have sufficient permissions to edit templates for this site.').'</p>');

$title = __("Edit Themes");
$parent_file = 'themes.php';

get_current_screen()->add_help_tab( array(
'id'        => 'overview',
'title'     => __('Overview'),
'content'   =>
    '<p>' . __('You can use the Theme Editor to edit the individual CSS and PHP files which make up your theme.') . '</p>
    <p>' . __('Begin by choosing a theme to edit from the dropdown menu and clicking Select. A list then appears of all the template files. Clicking once on any file name causes the file to appear in the large Editor box.') . '</p>
    <p>' . __('For PHP files, you can use the Documentation dropdown to select from functions recognized in that file. Lookup takes you to a web page with reference material about that particular function.') . '</p>
    <p id="newcontent-description">' . __('In the editing area the Tab key enters a tab character. To move below this area by pressing Tab, press the Esc key followed by the Tab key.') . '</p>
    <p>' . __('After typing in your edits, click Update File.') . '</p>
    <p>' . __('<strong>Advice:</strong> think very carefully about your site crashing if you are live-editing the theme currently in use.') . '</p>
    <p>' . __('Upgrading to a newer version of the same theme will override changes made here. To avoid this, consider creating a <a href="http://codex.wordpress.org/Child_Themes" target="_blank">child theme</a> instead.') . '</p>' .
    ( is_network_admin() ? '<p>' . __('Any edits to files from this screen will be reflected on all sites in the network.') . '</p>' : '' )
) );

get_current_screen()->set_help_sidebar(
    '<p><strong>' . __('For more information:') . '</strong></p>' .
    '<p>' . __('<a href="http://codex.wordpress.org/Theme_Development" target="_blank">Documentation on Theme Development</a>') . '</p>' .
    '<p>' . __('<a href="http://codex.wordpress.org/Using_Themes" target="_blank">Documentation on Using Themes</a>') . '</p>' .
    '<p>' . __('<a href="http://codex.wordpress.org/Editing_Files" target="_blank">Documentation on Editing Files</a>') . '</p>' .
    '<p>' . __('<a href="http://codex.wordpress.org/Template_Tags" target="_blank">Documentation on Template Tags</a>') . '</p>' .
    '<p>' . __('<a href="http://wordpress.org/support/" target="_blank">Support Forums</a>') . '</p>'
);

wp_reset_vars( array( 'action', 'error', 'file', 'theme' ) );

if ( $theme )
    $stylesheet = $theme;
else
    $stylesheet = get_stylesheet();

$theme = wp_get_theme( $stylesheet );

if ( ! $theme->exists() )
    wp_die( __( 'The requested theme does not exist.' ) );

if ( $theme->errors() && 'theme_no_stylesheet' == $theme->errors()->get_error_code() )
    wp_die( __( 'The requested theme does not exist.' ) . ' ' . $theme->errors()->get_error_message() );

$allowed_files = $theme->get_files( 'php', 1 );
//BINDA: Copy allowed files before stylesheets are added to your own varible to be able to sort templates without stylesheets
$myallowed_files = $allowed_files; 
$has_templates = ! empty( $allowed_files );
$style_files = $theme->get_files( 'css' );
$allowed_files['style.css'] = $style_files['style.css'];
$allowed_files += $style_files;

if ( empty( $file ) ) {
    $relative_file = 'style.css';
    $file = $allowed_files['style.css'];
} else {
    $relative_file = stripslashes( $file );
    $file = $theme->get_stylesheet_directory() . '/' . $relative_file;
}

validate_file_to_edit( $file, $allowed_files );
$scrollto = isset( $_REQUEST['scrollto'] ) ? (int) $_REQUEST['scrollto'] : 0;

switch( $action ) {
case 'update':
    check_admin_referer( 'edit-theme_' . $file . $stylesheet );
    $newcontent = stripslashes( $_POST['newcontent'] );
    $location = 'my-theme-editor.php?file=' . urlencode( $relative_file ) . '&theme=' . urlencode( $stylesheet ) . '&scrollto=' . $scrollto;
    if ( is_writeable( $file ) ) {
        //is_writable() not always reliable, check return value. see comments @ http://uk.php.net/is_writable
        $f = fopen( $file, 'w+' );
        if ( $f !== false ) {
            fwrite( $f, $newcontent );
            fclose( $f );
            $location .= '&updated=true';
            $theme->cache_delete();
        }
    }
    wp_redirect( $location );
    exit;
break;

default:

    require_once( ABSPATH . 'wp-admin/admin-header.php' );

    update_recently_edited( $file );

    if ( ! is_file( $file ) )
        $error = true;

    $content = '';
    if ( ! $error && filesize( $file ) > 0 ) {
        $f = fopen($file, 'r');
        $content = fread($f, filesize($file));

        if ( '.php' == substr( $file, strrpos( $file, '.' ) ) ) {
            $functions = wp_doc_link_parse( $content );

            $docs_select = '<select name="docs-list" id="docs-list">';
            $docs_select .= '<option value="">' . esc_attr__( 'Function Name...' ) . '</option>';
            foreach ( $functions as $function ) {
                $docs_select .= '<option value="' . esc_attr( urlencode( $function ) ) . '">' . htmlspecialchars( $function ) . '()</option>';
            }
            $docs_select .= '</select>';
        }

        $content = esc_textarea( $content );
    }

    ?>
<?php if ( isset( $_GET['updated'] ) ) : ?>
 <div id="message" class="updated"><p><?php _e( 'File edited successfully.' ) ?></p></div>
<?php endif;

$description = get_file_description( $file );
$file_show = array_search( $file, array_filter( $allowed_files ) );
if ( $description != $file_show )
    $description .= ' <span>(' . $file_show . ')</span>';
?>
<div class="wrap">
<?php screen_icon(); ?>
<h2><?php echo esc_html( $title ); ?></h2>

<div class="fileedit-sub">
<div class="alignleft">
<h3><?php echo $theme->display('Name'); if ( $description ) echo ': ' . $description; ?></h3>
</div>
<div class="alignright">
    <form action="my-theme-editor.php" method="post">
        <strong><label for="theme"><?php _e('Select theme to edit:'); ?> </label></strong>
        <select name="theme" id="theme">
<?php
foreach ( wp_get_themes( array( 'errors' => null ) ) as $a_stylesheet => $a_theme ) {
    if ( $a_theme->errors() && 'theme_no_stylesheet' == $a_theme->errors()->get_error_code() )
        continue;

    $selected = $a_stylesheet == $stylesheet ? ' selected="selected"' : '';
    echo "\n\t" . '<option value="' . esc_attr( $a_stylesheet ) . '"' . $selected . '>' . $a_theme->display('Name') . '</option>';
}
?>
        </select>
        <?php submit_button( __( 'Select' ), 'button', 'Submit', false ); ?>
    </form>
</div>
<br class="clear" />
</div>
<?php
if ( $theme->errors() )
    echo '<div class="error"><p><strong>' . __( 'This theme is broken.' ) . '</strong> ' . $theme->errors()->get_error_message() . '</p></div>';
?>
    <div id="templateside">
<?php
if ( $allowed_files ) :
    if ( $has_templates || $theme->parent() ) :
?>
    <h3><?php _e('Templates'); ?></h3>
    <?php if ( $theme->parent() ) : ?>
    <p class="howto"><?php printf( __( 'This child theme inherits templates from a parent theme, %s.' ), '<a href="' . self_admin_url('my-theme-editor.php?theme=' . urlencode( $theme->get_template() ) ) . '">' . $theme->parent()->display('Name') . '</a>' ); ?></p>
    <?php endif; ?>
    <ul>
<?php
    endif;

//Loop throught myallowed files (copied abowe) and replace cutom page templates key
    foreach ( $myallowed_files as $file => $full_path ) {
        if ( ! preg_match( '|Template Name:(.*)$|mi', file_get_contents( $full_path ), $header ) )
            continue;
        unset( $myallowed_files[ $file ] );
        $myallowed_files[ strtolower(_cleanup_header_comment( $header[1] )) ] = $full_path;
    }
//Sort by key
    ksort( $myallowed_files );
//Add stylesheets
    $style_files = $theme->get_files( 'css' );
    $myallowed_files['style.css'] = $style_files['style.css'];
    $myallowed_files += $style_files;
//Loop myallowed files in desired order
    foreach ( $myallowed_files as $filename => $absolute_filename ) :
        if ( 'style.css' == $filename )
            echo "\t</ul>\n\t<h3>" . _x( 'Styles', 'Theme stylesheets in theme editor' ) . "</h3>\n\t<ul>\n";

        $file_description = get_file_description( $absolute_filename );
        if ( $file_description != basename( $filename ) )
            $file_description .= '<br /><span class="nonessential">(' . $filename . ')</span>';

        if ( $absolute_filename == $file )
            $file_description = '<span class="highlight">' . $file_description . '</span>';
?>
        <li><a href="my-theme-editor.php?file=<?php echo urlencode( $filename ) ?>&amp;theme=<?php echo urlencode( $stylesheet ) ?>"><?php echo $file_description; ?></a></li>
<?php
    endforeach;
?>
</ul>
<?php endif; ?>
</div>
<?php if ( $error ) :
    echo '<div class="error"><p>' . __('Oops, no such file exists! Double check the name and try again, merci.') . '</p></div>';
else : ?>
    <form name="template" id="template" action="my-theme-editor.php" method="post">
    <?php wp_nonce_field( 'edit-theme_' . $file . $stylesheet ); ?>
        <div><textarea cols="70" rows="30" name="newcontent" id="newcontent" aria-describedby="newcontent-description"><?php echo $content; ?></textarea>
        <input type="hidden" name="action" value="update" />
        <input type="hidden" name="file" value="<?php echo esc_attr( $relative_file ); ?>" />
        <input type="hidden" name="theme" value="<?php echo esc_attr( $theme->get_stylesheet() ); ?>" />
        <input type="hidden" name="scrollto" id="scrollto" value="<?php echo $scrollto; ?>" />
        </div>
    <?php if ( ! empty( $functions ) ) : ?>
        <div id="documentation" class="hide-if-no-js">
        <label for="docs-list"><?php _e('Documentation:') ?></label>
        <?php echo $docs_select; ?>
        <input type="button" class="button" value=" <?php esc_attr_e( 'Lookup' ); ?> " onclick="if ( '' != jQuery('#docs-list').val() ) { window.open( 'http://api.wordpress.org/core/handbook/1.0/?function=' + escape( jQuery( '#docs-list' ).val() ) + '&amp;locale=<?php echo urlencode( get_locale() ) ?>&amp;version=<?php echo urlencode( $wp_version ) ?>&amp;redirect=true'); }" />
        </div>
    <?php endif; ?>

        <div>
        <?php if ( is_child_theme() && $theme->get_stylesheet() == get_template() ) : ?>
            <p><?php if ( is_writeable( $file ) ) { ?><strong><?php _e( 'Caution:' ); ?></strong><?php } ?>
            <?php _e( 'This is a file in your current parent theme.' ); ?></p>
        <?php endif; ?>
<?php
    if ( is_writeable( $file ) ) :
        submit_button( __( 'Update File' ), 'primary', 'submit', true );
    else : ?>
<p><em><?php _e('You need to make this file writable before you can save your changes. See <a href="http://codex.wordpress.org/Changing_File_Permissions">the Codex</a> for more information.'); ?></em></p>
<?php endif; ?>
        </div>
    </form>
<?php
endif; // $error
?>
<br class="clear" />
</div>
<script type="text/javascript">
/* <![CDATA[ */
jQuery(document).ready(function($){
    $('#template').submit(function(){ $('#scrollto').val( $('#newcontent').scrollTop() ); });
    $('#newcontent').scrollTop( $('#scrollto').val() );
});
/* ]]> */
</script>
<?php
break;
}

include(ABSPATH . 'wp-admin/admin-footer.php' ); 
```

除了将字符串“theme-editor.php”替换为“my-theme-editor.php”外，仅在第 62 行和第 180 行进行了扩展。

但是，小心使用它——我没有正确测试它，但它似乎有效。妙语是，当您有一个插件删除管理菜单并将其替换为您自己的指向 my-theme-editor.php 的链接时，您的 my-theme-editor.php 文件不会被新版本的WordPress。如果它被删除，您可以简单地将其复制回来。

# android - Android客户端和PHP服务器之间的加密

> ID：14650739
> 
> 赞同：3
> 
> 时间：2013-02-01T16:29:06.263
> 
> 标签：android, encryption, https

在加密方面，我完全是个菜鸟，我认为我的问题完全错了，让我解释一下：

我希望 Android 应用程序联系服务器以获取要在应用程序中显示的项目。然后，如果用户与此项目交互，我想向服务器发送反馈，告诉服务器单击了哪个项目以将其保存在数据库中。

第一件事是我不希望任何人在将这些“反馈”发送到服务器时通过网络“拦截”这些“反馈”。所以我决定使用https连接。但是，假设我要求反馈的脚本是[https://mydomain.com/myscript.php](https://mydomain.com/myscript.php)（带有 POST 请求）。我不希望有人对我的 Android 代码进行逆向工程并看到我正在调用此脚本来发送反馈，因为这样他就可以将它用于相同的目的。

所以然后我想“嘿，当我必须向服务器发送反馈时，让我们从服务器中获取一个密钥以将其发送回”。但同样，要获得这个密钥，我需要调用一个 php 脚本，如果有人可以调用这个脚本，得到密钥，他就可以根据需要发送反馈。

在我看来，这似乎没有尽头。而且我知道有一个 :DI 认为我正在以完全错误的方式看待这个问题。你有一些指导方针可以遵循吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T01:48:48.980

## 不要相信客户

您不能将信任扩展到客户端软件。Viega 和 McGraw 在“构建安全软件：如何以正确的方式避免安全问题”中有一句很好的引用。

> 人们通常在客户端代码中隐藏秘密，假设这些秘密是安全的。将秘密放入客户端代码的问题在于，有才华的最终用户将能够滥用客户端并窃取其所有秘密。与其做出需要成立的假设，不如不愿扩大信任。服务器应该被设计成不信任客户端，反之亦然，因为客户端和服务器都会被黑客入侵。不愿信任有助于划分。

## 一个办法

您不能信任客户端软件。但有时您可以信任个人用户。您可以删除垃圾邮件。需要考虑的事项：

1.  使用[垃圾邮件分类器](http://en.wikipedia.org/wiki/Bayesian_spam_filtering)检测垃圾邮件。这将需要一些时间。
2.  您可以对来自单个 IP 地址的 POST 进行速率限制
3.  您可以要求用户登录您的应用程序才能撰写反馈。然后来自特定帐户的速率限制反馈。
4.  更好的是，您可以要求人们首先使用 Google+ 或 facebook 的服务器进行身份验证（即，您的应用程序要求用户[验证他们的 Google 凭据](https://developers.google.com/google-apps/tasks/oauth-and-tasks-on-android#account)。这对他们来说应该很轻松，因为 95% 的 Android 用户拥有 Google 凭据。）在发布之前. 然后对每个帐户进行速率限制。大多数机器人无法访问许多/任何虚假的 facebook/Google+ 帐户，因为您必须破解[验证码](http://en.wikipedia.org/wiki/CAPTCHA)才能注册。这应该使机器人很难发帖。

大公司使用 4、3 和 1 的组合。Google Play 商店用于尝试检测所有垃圾评论并将其删除。但现在他们也使用#4。您不能在没有登录的情况下在 Google Play 商店上发表评论！

编辑：这也可能有用[http://android-developers.blogspot.ca/2013/01/verifying-back-end-calls-from-android.html?m=1](http://android-developers.blogspot.ca/2013/01/verifying-back-end-calls-from-android.html?m=1)

# javascript - 'this' 关键字可以在 RequireJS 模块中使用吗？

> ID：14650746
> 
> 赞同：5
> 
> 时间：2013-02-01T16:29:22.907
> 
> 标签：javascript, requirejs

我定义了一个 RequireJS 模块（见下文）。它是网站上每个页面所需的功能集合。

返回对象中的一个函数 initTwitter() 需要调用同一对象中的另一个函数 shortURL()。我收到一个控制台错误，上面写着“TypeError：this.shortenURL 不是函数”。

所有这些函数最初都在一个常规的 Javascript 单例对象中，并且代码运行良好。我是 RequireJS 的新手，所以我不确定 this 关键字在 RequireJS 中的工作方式是否不同，或者我只是做错了什么。

编辑：我也尝试删除“this”，但我收到“ReferenceError：shortURL is not defined”消息。

```
define(['config', 'jquery'], function(config, $) {
    /* Site-wide functions go here */

    return {
        doesObjPropertyExist: function(obj, prop) {
            var parts = prop.split('.');
                for(var i = 0, l = parts.length; i < l; i++) {
                    var part = parts[i];
                    if(obj !== null && typeof obj === "object" && part in obj) {
                        obj = obj[part];
                    }
                    else {
                        return false;
                    }
                }
            return true;
        },
        /** 
         * Shorten URL via bit.ly
         * Requires a callback function, so that once getJSON is absolutely finished, we can continue with the function
         */
        shortenURL: function(longURL, callback, settingsOverride) {
            var defaults = {
                login: '@bitly.username@',
                apiKey: '@bitly.key@'
            };

            $.extend({}, defaults, settingsOverride);
            var bitly_service_url = "http://api.bit.ly/v3/shorten?" + "&login=" + defaults.login + "&apiKey=" + defaults.apiKey + "&longUrl=" + longURL + "&format=json&callback=?";
            $.getJSON(bitly_service_url, function(results){
                if (results.status_txt === "OK") {
                    callback(results.data["url"]);
                }
                else {
                    callback(longURL);
                }
            });
        },
        initTwitter: function() {
            var bitly_obj = '',
                $bitly_link = '',
                twitterShortenUrl = function(obj, $elem) {
                    this.shortenURL(obj.url, function(url) {
                        $elem.attr('href', 'http://twitter.com/home?status=' + 'From @Real_Simple ' + arg_obj.headline + ' ' +  shortened_url);
                    });
                };

                $bitly_link = $('#share-twitter');

                /* On document.ready, only call bitly service and change the link href if the twitter link exists; cannot use page_context, 
                 * because we are looking for a specific element ID that is only placed when Twitter is needed. 
                 */
                if ($bitly_link.length) {
                    bitly_obj = config.page_context.bitly;

                    twitterShortenUrl(bitly_obj, $bitly_link);
                }
        },
        initFullSiteLink: function() {
                var canonical_url = $('link[rel="canonical"]').attr('href'),
                    content_type = config.markup_id.content;

                    if (content_type == 'search') {
                        $('#fullsite').attr('href', canonical_url + location.search + '&nomobile=1');
                    } else {
                        $('#fullsite').attr('href', canonical_url + '?nomobile=1');
                    }
        },
        initNav: function() {
            /* Global navigation */
            /* Make Channels button open and close the global flyout navigation */
            $('#channels-toggle').bind('click', function() {
                if ($('#channels').hasClass('is-open')) {
                    $('#channels').removeClass('is-open');
                } else {
                    $('#channels').addClass('is-open');
                }

                return false;
            });

            /* Touch the close button in the global flyout navigation to close it */ 
            $('#channels .close').bind('click', function() {
                $('#channels').removeClass('is-open');

                return false;
            });
        },
        omniture: {
            mobilePageTrack: function (desc) {
                /* Global function in rsmobile.js */
                omniPg(desc);
            }
        },
        init: function() {
           this.initNav();
           this.initTwitter();
           this.initFullSiteLink();
        }
    }   /* End return object */
}); 
```

编辑 2：事实证明，我的代码中的“this”在另一个函数中，所以它的作用域变成了 window。在输入函数之前，我需要保留 this 的范围。

```
initTwitter: function() {
            var bitly_obj = '',
                $bitly_link = '',
                self = this;    /* Preserve scope of this */

            var twitterShortenUrl = function(obj, $elem) {
                    self.shortenURL(obj.url, function(url) {
                        $elem.attr('href', 'http://twitter.com/home?status=' + 'From @Real_Simple ' + obj.headline + ' ' + url);
                    });
                };
/* rest of code .... */ 
```

否则，保罗的回答强调我可以返回任何东西并添加初始化。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T16:42:20.000

不，因为 Require.js 没有为`this`. 您应该将模块重写为实例对象：

```
define(['config', 'jquery'], function(config, $) {
    function obj() {
        this.initNav();
        this.initTwitter();
        this.initFullSiteLink();
    }
    obj.prototype = {
        doesObjPropertyExist: function (/*...*/) { /*...*/ },
        shortenURL: function (/*...*/) { /*...*/ },
        initTwitter: function (/*...*/) { /*...*/ },
        initFullSiteLink: function (/*...*/) { /*...*/ },
        initNav: function (/*...*/) { /*...*/ },
        omniture: function (/*...*/) { /*...*/ }
    };
    return obj;
});

require(['that_main_module'], function (obj) {
    var newObj = new obj();
}); 
```

# php - PHP表单处理，复选框数组问题

> ID：14650747
> 
> 赞同：0
> 
> 时间：2013-02-01T16:29:26.743
> 
> 标签：php

我有一个处理 HTML 表单的简单 PHP 脚本，除了多个复选框输入之外，所有内容都正确转储到电子邮件中。它不显示用户选择的复选框，而是显示 Array。

```
<?php
if($_SERVER['REQUEST_METHOD'] !== 'POST') {
//This page should not be accessed directly. Need to submit the form.
echo "error; you need to submit the form!";
die;
}

$firstname = $_POST['firstname']; $lastname = $_POST['lastname']; $initial = $_POST['initial']; $streetaddress = $_POST['streetaddress']; $addressline2 = $_POST['addressline2']; $city = $_POST['city']; $state = $_POST['state']; $zip = $_POST['zip']; $email = $_POST['email']; $month = $_POST['month']; $day = $_POST['day']; $year = $_POST['year']; $gender = $_POST['gender']; $areacode = $_POST['areacode']; $cellphone = $_POST['cellphone']; $shirtsize = $_POST['shirt_size']; $country = $_POST['country']; $dayarea = $_POST['daytime_phone_area']; $dayphone = $_POST['daytime_phone']; $shirtsizeother = $_POST['other']; $dates = $_POST['dates']; $signature = $_POST['signature']; $signday = $_POST['signature_day']; $signmonth = $_POST['signature_month']; $signyear = $_POST['signature_year']; $position = $_POST['position']; $contactmethod = $_POST['contactmethod']; $other_size = 'n/a'; $_POST['other_size'] = 'n/a'; 

//Validate first

/*
Simple form validation
check to see if required fields were entered */ if ($_POST['firstname'] == "" || $_POST['lastname'] == "" || $_POST['streetaddress'] == "" || $_POST['city'] == "" || $_POST['state'] == "" || $_POST['zip'] == "" || $_POST['email'] == "" || $_POST['month'] == "" || $_POST['day'] == "" || $_POST['year'] == "" || $_POST['gender'] == "" || $_POST['areacode'] == "" || $_POST['cellphone'] == "" || $_POST['daytime_phone_area'] == ""  || $_POST['daytime_phone'] == ""  || $_POST['dates'] == ""  || $_POST['signature'] == ""  || $_POST['signature_day'] == ""  || $_POST['signature_month'] == ""  || $_POST['shirt_size'] == ""  || $_POST['signature_year'] == ""  || $_POST['position'] == ""  || $_POST['contactmethod'] == "" ) {
    var_dump($_POST);
    echo "Please fill in all required boxes.";
    }
else {

$email_from = 'chris569x@gmail.com';//<== update the email address $email_subject = "New Volunteer Registration"; $email_body = "You have received a new volunteer registration.\n". 
"Volunteer: $firstname $initial $lastname \n".
"Address: $streetaddress \n".
"$addressline2 \n".
"$city, $state $zip \n".
"Email: $email \n".
"Date of Birth: $month/$day/$year \n".
"Gender: $gender \n".
"Cell Phone: ($areacode) $cellphone \n".
"Daytime Phone: ($dayarea) $dayphone \n".
"T-Shirt Size: $shirtsize $shirtsizeother \n".
"Volunteer Position: $position \n".
"Dates availible to volunteer: $dates \n".
"Electronic Signature: $signature $signmonth/$signday/$signyear \n".
"Preferred contact method: $contactmethod \n"; $to = "chris569x@gmail.com";//<== update the email address $headers = "From: $email_from \r\n"; //Send the email!
mail($to,$email_subject,$email_body,$headers);
//done. redirect to thank-you page.
header('Location: thanks2.htm');
echo "<meta http-equiv='refresh' content='0; url=thanks2.htm'>";
}
?> 
```

和电子邮件输出（问题是志愿者可以使用的日期）：

您收到了新的志愿者注册。志愿者：xxxxxx 地址：xxxx

xxxxxx 电子邮件：xxxx 出生日期：xxxx 性别：xxxx 手机：xxxx 日间电话：xxxx T 恤尺寸：xxxx

志愿者可用的日期：Array

电子签名：xxxx 首选联系方式：xxxx

如果您需要查看它，这里是 HTML 表单：

```
<form name="volunteer" action="form-to-email3.php" method="post">

<label>Last Name*: </label><input type="text" name="lastname" /><br /> <label>First Name*: </label><input type="text" name="firstname" /><br /> <label>Middle Initial: </label><input type="text" name="initial" size=1 maxlength=1 /><br /><br /> <label>Date of Birth*: </label><INPUT NAME="month" input type="tel" SIZE=2 MAXLENGTH=2
onKeyPress="return numbersonly(this, event)"/>/<INPUT NAME="day" input type="tel" SIZE=2 MAXLENGTH=2
onKeyPress="return numbersonly(this, event)"/>/<INPUT NAME="year" input type="tel" SIZE=4 MAXLENGTH=4
onKeyPress="return numbersonly(this, event)"/>
<SCRIPT TYPE="text/javascript">
<!--
autojump("month", "day", 2); autojump("day", "year", 2); //--> </SCRIPT><br /><br /> <label>Gender*:</label><input type="radio" name="gender" value="Male"> Male <input type="radio" name="gender" value="Female"> Female </input> <br /> <br /> <label>Street Address*: </label><input type="text" name="streetaddress" /><br /> <label>Address Line 2: </label><input type="text" name="addressline2" /><br />
<label>City*: </label><input type="text" name="city" /><br />
<label>State/Province/Region*: </label><input type="text" name="state" /><br />
<label>Zipcode*: </label>
<INPUT NAME="zip" input type="tel" SIZE=5 MAXLENGTH=5
onKeyPress="return numbersonly(this, event)"/><br />
<label>Country: </label>
<select class="element select medium" id="element_3_6" name="country"> 
</select> <br /><br />

<label>Email*: </label><input type="email" name="email" /><br /><br />

<label>Cell Phone*: </label>(<INPUT NAME="areacode" input type="tel" SIZE=3 MAXLENGTH=3
onKeyPress="return numbersonly(this, event)"/>)<INPUT NAME="cellphone" input type="tel"SIZE=7 MAXLENGTH=7
onKeyPress="return numbersonly(this, event)"/><br />
<SCRIPT TYPE="text/javascript">
<!--
autojump("areacode", "cellphone", 3);
//-->
</SCRIPT>
<label>Daytime Phone*: </label>(<INPUT NAME="daytime_phone_area" input type="tel" SIZE=3 MAXLENGTH=3
onKeyPress="return numbersonly(this, event)"/>)<INPUT NAME="daytime_phone" input type="tel"SIZE=7 MAXLENGTH=7
onKeyPress="return numbersonly(this, event)"/><br /><br />
<SCRIPT TYPE="text/javascript">
<!--
autojump("daytime_phone_area", "daytime_phone", 3); //--> </SCRIPT>

<label>T-Shirt Size*: </label><input type="radio" name="shirt_size" value="Small"> S <input type="radio" name="shirt_size" value="Medium"> M <input type="radio" name="shirt_size" value="Large"> L <input type="radio" name="shirt_size" value="XL"> XL <input type="radio" name="shirt_size" value="2XL"> 2XL <input type="radio" name="shirt_size" value="Other"> Other (Please provide)<br /> </input>
<label>Other: </label><input type="text" name="other size" /><br /><br /> <label>In which area will you be helping*: </label> <select name="position"> <option name="position" value= "Pastor">Pastor</option> <option name="position" value="Nursing Staff">Nursing Staff</option> <option name="position" value="Camp Staff">Camp Staff (Including Huddle Leaders)</option> <option name="position" value="Other Staff">Other Staff</option> </select><br /><br /> <label>Dates Attending*: <br />(Please check all dates you can be present)</label> <input type="checkbox" name="dates[]" value="7/6">Jul. 6 <input type="checkbox" name="dates[]" value="7/7">Jul. 7 <input type="checkbox" name="dates[]" value="7/8">Jul. 8 <input type="checkbox" name="dates[]" value="7/9">Jul. 9 <input type="checkbox" name="dates[]" value="7/10">Jul. 10 <input type="checkbox" name="dates[]" value="7/11">Jul. 11 <input type="checkbox" name="dates[]" value="7/12">Jul. 12<br /><br /><br /><br /></input> <label>What is the best way to contact you*? </label><input type="text" name="contactmethod" /><br /><br /><br />

<b>Electronic Submission</b>
<p>I understand that by filling in my name here, it shall act as a binding, legal signagure. </p> <label>Electronic Signagure*: </label><input type="text" name="signature" /><br />
<label>Date*: </label><INPUT NAME="signature_month" input type="tel" SIZE=2 MAXLENGTH=2
onKeyPress="return numbersonly(this, event)"/>/<INPUT NAME="signature_day" input type="tel" SIZE=2 MAXLENGTH=2
onKeyPress="return numbersonly(this, event)"/>/<INPUT NAME="signature_year" input type="tel" SIZE=4 MAXLENGTH=4
onKeyPress="return numbersonly(this, event)"/>
<SCRIPT TYPE="text/javascript">
<!--
autojump("signature_month", "signature_day", 2); autojump("signature_day", "signature_year", 2); //--> </SCRIPT><br /><br /><br /><br /><br />

<input type="submit" value="Submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:32:11.927

尝试使用 PHP 的[implode()](http://php.net/manual/en/function.implode.php)函数并更改

```
$dates = $_POST['dates']; 
```

到

```
$dates = implode(", ",$_POST['dates']); 
```

这会将数组转换为字符串，其中每个日期用逗号分隔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:36:53.463

当您`dates[]`在 HTML 表单中使用该名称时，您指定数据应为数组格式。该`[]`语法告诉表单在您的 POST 数据数组中创建一个新元素。

要逐步检查数组的值，您可以使用`foreach`：

```
foreach($dates as $v) {
    echo $v . "<br />";
} 
```

# sql - 自 2000 年以来的天数、周数、月数、年数、季度数

> ID：14650753
> 
> 赞同：0
> 
> 时间：2013-02-01T16:29:47.440
> 
> 标签：sql, datetime, oracle11g

我需要使用以下内容填充 Oracle 11g 数据库中的日历表：calendar_date、week_number、week_year、day_since_2000、week_since_2000、month_since_2000、quarter_since_2000、week_of_month

该表已经填充了自 2000 年以来的数据，我现在需要使用 since_2000 列的负数填充到 1994 年的数据。我想除了 2000 年以来的一周和 2000 年以来的季度外，我什么都想好了。

EDIT1：刚刚注意到我自 200 年以来的一周和自 2000 年以来的一个月仍然一团糟。使用下面提到的答案后，自 2000 年以来的季度看起来不错。我正在用最新的查询更新。

EDIT2：由于缺少 trunc()，它无法正常工作。它现在工作正常。最新查询已更新。

这就是我用来做的：

```
/* Formatted on 2/1/2013 11:54:27 AM (QP5 v5.227.12220.39724) */
CREATE OR REPLACE PROCEDURE populate_d_calendar (start_date     IN DATE,
                         end_date       IN DATE)
AS
BEGIN
   INSERT INTO d_calendar (calendar_date,
               week_number,
               week_year,
               day_since_2000,
               week_since_2000,
               month_since_2000,
               quarter_since_2000,
               week_of_month)
      SELECT dt,                                                        --Date
         TO_CHAR (dt,
              'ww'),                                --Week in the year
         TO_CHAR (dt,
              'yyyy'),                                          --Year
         TO_CHAR (dt - end_date),                         --Day Since 2000
         TRUNC (TO_CHAR (dt - end_date) / 7),            --Week Since 2000
         TRUNC (MONTHS_BETWEEN (dt,
                    end_date)),             --Month Since 2000
         CASE
        WHEN TO_CHAR (dt,
                  'MMDD') >= '0101'
         AND TO_CHAR (dt,
                  'MMDD') < '0401'
        THEN
             0
           +   4
             * TRUNC (  MONTHS_BETWEEN (TO_DATE (   '0101'
                             || TO_CHAR (dt,
                                     'yyyy'),
                             'mmddyyyy'),
                        TO_DATE ('01Jun2000'))
                  / 12)                                       --q1
        WHEN TO_CHAR (dt,
                  'MMDD') >= '0401'
         AND TO_CHAR (dt,
                  'MMDD') < '0701'
        THEN
             1
           +   4
             * TRUNC (  MONTHS_BETWEEN (TO_DATE (   '0101'
                             || TO_CHAR (dt,
                                     'yyyy'),
                             'mmddyyyy'),
                        TO_DATE ('01Jun2000'))
                  / 12)                                       --q2
        WHEN TO_CHAR (dt,
                  'MMDD') >= '0701'
         AND TO_CHAR (dt,
                  'MMDD') < '1001'
        THEN
             2
           +   4
             * TRUNC (  MONTHS_BETWEEN (TO_DATE (   '0101'
                             || TO_CHAR (dt,
                                     'yyyy'),
                             'mmddyyyy'),
                        TO_DATE ('01Jun2000'))
                  / 12)                                       --q3
        WHEN TO_CHAR (dt,
                  'MMDD') >= '1001'
         AND TO_CHAR (dt,
                  'MMDD') <= '1231'
        THEN
             3
           +   4
             * TRUNC (  MONTHS_BETWEEN (TO_DATE (   '0101'
                             || TO_CHAR (dt,
                                     'yyyy'),
                             'mmddyyyy'),
                        TO_DATE ('01Jun2000'))
                  / 12)                                       --q4
         END
        quarters_since_2000,                      --Quarter Since 2000
         TO_CHAR (dt,
              'w')                                 --Week of the month
    FROM (SELECT start_date + LEVEL - 1 dt
        FROM DUAL
          CONNECT BY LEVEL <= end_date - start_date + 1);
END;
/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:51:21.603

我认为您像其他人一样追求浮点数，所以也许：

```
TO_CHAR (dt - end_date)/7 week_since_2000 
```

和

```
(MONTHS_BETWEEN (dt,
            end_date)/3) quarter_since_2000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:18:55.327

**几周后**，您可以在此处遵循其中一种方法：

[http://searchoracle.techtarget.com/answer/Calculating-weeks-between-two-dates](http://searchoracle.techtarget.com/answer/Calculating-weeks-between-two-dates)

因为这将取决于哪些规则对您更有用

与**宿舍**，使用这个：

```
case 
         WHEN TO_CHAR (dt,'MMDD') >= '0101' and TO_CHAR (dt,'MMDD') < '0401' then  0 + 4 * trunc(months_between( to_date('0101' || to_char(dt,'yyyy'),'mmddyyyy'),to_date('01Jun2000' )) /12)   --q1
         WHEN TO_CHAR (dt,'MMDD') >= '0401' and TO_CHAR (dt,'MMDD') < '0701' then  1 + 4 * trunc(months_between( to_date('0101' || to_char(dt,'yyyy'),'mmddyyyy'),to_date('01Jun2000' )) /12)  --q2
         WHEN TO_CHAR (dt,'MMDD') >= '0701' and TO_CHAR (dt,'MMDD') < '1001' then  2 + 4 * trunc(months_between( to_date('0101' || to_char(dt,'yyyy'),'mmddyyyy'),to_date('01Jun2000' )) /12)  --q3
         WHEN TO_CHAR (dt,'MMDD') >= '1001' and TO_CHAR (dt,'MMDD') <= '1231' then 3 + 4 * trunc(months_between( to_date('0101' || to_char(dt,'yyyy'),'mmddyyyy'),to_date('01Jun2000' )) /12)   --q4
         end         quarters_since_2000, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T19:22:35.943

这是我从 2013 年 1 月 1 日到今天的日历表版本。我不确定您需要如何插入月数、季度数、天数等​​...您需要显示每年或一次之间的总月数？您可以自己添加这些计算或在您的帖子中添加所需的输出以使其清晰。请参阅下面的 addl 查询/评论：

```
-- Days,weeks, quarters from 1/1/2013 --
SELECT start_date                               -- 1/1/2013 --
    , TRUNC(start_date, 'iw')                  wk_starts  
    , TRUNC(start_date, 'iw') + 7 - 1/86400    wk_ends
    , TO_NUMBER (TO_CHAR (start_date, 'IW'))   ISO_wk#  
    , TO_NUMBER (TO_CHAR (start_date, 'Q'))    Quarters  
 FROM
  (
   SELECT TRUNC(SYSDATE, 'Y')-1 + LEVEL AS start_date  
     FROM dual
   CONNECT BY LEVEL <= 
  (  -- replace this part to go back to 1994 - see below --
  SELECT TRUNC(ADD_MONTHS (SYSDATE, 12), 'Y')-TRUNC(SYSDATE, 'Y') "Num of Days in 2013"   
    FROM dual
  )
)
/

START_DATE  WK_STARTS   WK_ENDS                 ISO_WK#     QUARTERS
---------------------------------------------------------------------
1/1/2013    12/31/2012  1/6/2013 11:59:59 PM    1           1
1/2/2013    12/31/2012  1/6/2013 11:59:59 PM    1           1
......
2/19/2013   2/18/2013   2/24/2013 11:59:59 PM   8           1
2/20/2013   2/18/2013   2/24/2013 11:59:59 PM   8           1
......
3/10/2013   3/4/2013    3/10/2013 11:59:59 PM   10          1
3/11/2013   3/11/2013   3/17/2013 11:59:59 PM   11          1
.......

-- 6971 days from 1/1/1994 till today - 2/1/2013 --
SELECT TRUNC(SYSDATE) - TRUNC(ADD_MONTHS (SYSDATE, -12*19), 'Y') "Num of Days from 1994"
  FROM dual
/

-- 4780 days from 1/1/2000 till today - 2/1/2013 --
SELECT TRUNC(SYSDATE) - TRUNC(ADD_MONTHS (SYSDATE, -12*13), 'Y') "Num of Days from 2000"
  FROM dual
/

-- 156 Months between from 2000 toll today --
SELECT MONTHS_BETWEEN(TRUNC(SYSDATE), TRUNC(ADD_MONTHS (SYSDATE, -12*13))) mo_btw_2000_till_today 
  FROM dual
/

-- Number of weeks btw. 2 dates -- 
SELECT to_char(sysdate, 'WW') - to_char(sysdate-30, 'WW') number_of_weeks FROM dual
/ 
```

这可能不是您想要的...为了帮助您更多，我需要查看您的查询的实际预期输出。只是想帮忙...

# javascript - 如何加快 jQuery 粘性页脚的加载时间？

> ID：14650757
> 
> 赞同：0
> 
> 时间：2013-02-01T16:29:52.743
> 
> 标签：javascript, jquery, css, footer

因此，很长一段时间以来，我一直在为粘性页脚寻找可靠的解决方案。我发现了一个在每个页面和每个浏览器上都运行良好的；但是需要一些时间才能加载然后生效。有没有办法可以加快速度？也许在页面加载之前加载它？有人提到它可以设置为“onDOMready”而不是onLoad？那有意义吗？

无论如何，这是我的代码：

```
<script>
function positionFooter() { 
    var mFoo = $("#myfooter"); 
    if ((($(document.body).height() + 
            mFoo.height()) < $(window).height() && 
            mFoo.css("position") == "fixed") || 
            ($(document.body).height() < $(window).height() && 
            mFoo.css("position") != "fixed")) 
    { 
            mFoo.css({ position: "fixed", bottom: "0px" }); 
    } 
    else 
    { 
            mFoo.css({ position: "static" }); 
    } 
} 

    $(document).ready(function () { 
            positionFooter(); 
            $(window).scroll(positionFooter); 
            $(window).resize(positionFooter); 
            $(window).load(positionFooter); 
    });
</script>

<!--content --->

<div id="myfooter" style="width:100%;"><!--footer content--></div> 
```

如何让它加载更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:37:37.757

不需要 javascript（尽管它很有帮助）。最好的办法是利用奇妙的 min-height 属性，而不是从总文档高度计算。

html

```
 <div id="wrap">
       <div id="content">
       <footer></footer>
  </div> 
```

css

```
 html,body{
      height:100%;
  }
  #wrap{
       min-height:100%;
       position:relative;      
  }

  #content{
       padding-bottom:20px; // allow room for footer
  }
  footer{
       position:absolute;
       width:100%;
       bottom:0;
       left:0;
       height:20px;
  } 
```

由于您的页面可能比这更复杂，如果您发现`min-height:100%`仅在 css 中无法产生所需的结果，您可能需要使用 javascript 进行设置。

```
 $(document).ready(function(){
       var $window = $(window),
           $wrap = $('#wrap'),
           setMinHeight = function(){
                $wrap.css('min-height',$window.height());
           };
           setMinHeight();
           $window.resize(setMinHeight);
  }); 
```

**[DEMO](http://jsfiddle.net/A6fXe/3/)** al la @Nick

**[更多内容的DEMO](http://jsfiddle.net/w8PRf/1/)**

# python - read certain number of lines from a txt file and convert to list in a pythonic way

> ID：14650764
> 
> 赞同：1
> 
> 时间：2013-02-01T16:30:09.223
> 
> 标签：python, arrays, file-io, idl-programming-language

Suppose I have the following txt file:

```
0.0163934
6
7.52438e+09
2147483648
6.3002e-06 6.31527e-08 0 0 6 0 0 4.68498e-06 0.00638412 12.6688
6.33438e-06 0 5.99588e-09 0 0 0 0 4.70195e-06 0 12.876
6.36874e-06 0 6.09398e-09 0 0 0 0 4.71894e-06 0 13.0867
6.40329e-06 0 6.19369e-09 0 0 0 0 4.73593e-06 0 13.3009
6.43802e-06 0 6.29503e-09 0 0 0 0 4.75294e-06 0 13.5185
6.47295e-06 0 6.39803e-09 0 0 0 0 4.76996e-06 0 13.7397
0.0163934
3
7.52438e+09
2147483648
6.3002e-06 0 5.89935e-09 0 0 0 0 4.68498e-06 0 12.6688
6.33438e-06 0 5.99588e-09 0 0 0 0 4.70195e-06 0 12.876
6.36874e-06 0 6.09398e-09 0 0 0 0 4.71894e-06 0 13.0867 
```

I want to read each of the first lines as floats or integers and then depending on the second line I want to read the rest of lines as a list of lists or array.

In IDL language I just have to do:

```
openr, 1, fname
readf, 1, Time
readf, 1, Bins
readf, 1, dummy
readf, 1, dummyLong
da1= fltarr(10, Bins)
readf, 1, da1 
```

So that the entire block of numbers is stored in the integer da1 which is size: 10*Bins. (rows and columns are the opposite as in python)

And then I can read the following lines in the same way.

In python I am doing:

```
Time=float(filen.readline())
Bins=int(filen.readline())
dummy=float(filen.readline())
dummyLong=long(filen.readline())

lines=[filen.readline() for i in range(Bins)]

arra=[[float(x) for x in lines[i].split()] for i in range(len(lines))] 
```

So I need two lines of code and complicated iterations that are not understandable to a beginner.

Is there a way to do it like in IDL, in a single statement and pythonic?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:05:25.927

这是一种更面向对象的方法，使用简单编码的 FSM（有限状态机）来控制读取完整数据记录的过程。当前发布的其他答案更为冗长，但它是一种相当灵活且可扩展的方式来处理此类任务并通过错误检查来完成。

```
class Record(object):
    def __init__(self, time=None, bins=None, fltarr=None):
        self.time = time
        self.bins = bins
        self.fltarr = fltarr

    def read(self, file):
        """ Read complete record from file into self and return True,
            otherwise return False if EOF encountered """
        START, STOP, EOF = 0, -1, -99

        state = START
        while state not in (EOF, STOP):
            line = file.readline()
            if not line: state = EOF; break
            # process line depending on read state
            if state == 0:
                self.time = float(line)
                state = 1
            elif state == 1:
                self.bins = int(line)
                state = 2
            elif state in (2, 3):
                # ignore line
                state += 1
            elif state == 4:
                self.fltarr = []
                last_bin = self.bins-1
                for bin in xrange(self.bins):
                    self.fltarr.append([float(x) for x in line.split()])
                    if bin == last_bin: break
                    line = file.readline()
                    if not line: state = EOF; break
                if state != EOF:
                    state = STOP

        return state == STOP

    def __str__(self):
        result = 'Record(time={}, bins={}, fltarr=[\n'.format(self.time, self.bins)
        for floats in self.fltarr:
            result += '  {}\n'.format(floats)
        return result + '])'

fname = 'sample_data.txt'
with open(fname, 'r') as input:
    data = []
    while True:
        record = Record()
        if not record.read(input):
            break
        else:
            data.append(record)

for record in data:
    print record 
```

输出：

```
Record(time=0.0163934, bins=6, fltarr=[
  [6.3002e-06, 6.31527e-08, 0.0, 0.0, 6.0, 0.0, 0.0, 4.68498e-06, 0.00638412, 12.6688]
  [6.33438e-06, 0.0, 5.99588e-09, 0.0, 0.0, 0.0, 0.0, 4.70195e-06, 0.0, 12.876]
  [6.36874e-06, 0.0, 6.09398e-09, 0.0, 0.0, 0.0, 0.0, 4.71894e-06, 0.0, 13.0867]
  [6.40329e-06, 0.0, 6.19369e-09, 0.0, 0.0, 0.0, 0.0, 4.73593e-06, 0.0, 13.3009]
  [6.43802e-06, 0.0, 6.29503e-09, 0.0, 0.0, 0.0, 0.0, 4.75294e-06, 0.0, 13.5185]
  [6.47295e-06, 0.0, 6.39803e-09, 0.0, 0.0, 0.0, 0.0, 4.76996e-06, 0.0, 13.7397]
])
Record(time=0.0163934, bins=3, fltarr=[
  [6.3002e-06, 0.0, 5.89935e-09, 0.0, 0.0, 0.0, 0.0, 4.68498e-06, 0.0, 12.6688]
  [6.33438e-06, 0.0, 5.99588e-09, 0.0, 0.0, 0.0, 0.0, 4.70195e-06, 0.0, 12.876]
  [6.36874e-06, 0.0, 6.09398e-09, 0.0, 0.0, 0.0, 0.0, 4.71894e-06, 0.0, 13.0867]
]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:34:13.807

一条线不一定比两条线好。

但你可以这样做：

```
arra = [[float(x) for x in filen.readline().split()] for _ in range(Bins)] 
```

我更喜欢两行：

```
lines = (filen.readline() for _ in range(Bins))
arra = [[float(x) for x in line.split()] for line in lines] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T16:36:48.167

```
Time=float(fname.readline())
Bins=int(fname.readline())
dummy=float(fname.readline())
dummyLong=long(fname.readline())
arra = [ [ float(num) for num in line.split() ] for line in filen ] 
```

这只是稍微有点 Pythonic，但它不会在所需的行数之后停止读取，它只是将它们全部读取。您可以使用`islice`from`itertools`来停止迭代，或者您可以在之后简单地截断列表。

这是一个例子，因为我已经在使用了，所以我`islice`冒昧地对函数式编程感兴趣......

```
from itertools import islice

CONVERTORS = (float, int, float, long, )
with open(...) as filen:
    Time, Bins, dummy, dummyLong = [ func(value) for func, value in zip(CONVERTORS, islice(filen, 4)) ]
    arra = [ map(float, line.split()) for line in islice(filen, Bins) ] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T11:00:19.927

您还可以使用 numpy loadtxt 之类的

```
from numpy import loadtxt
data = loadtxt("input.txt", unpack=False) 
```

然后根据需要转换数据类型

或者，也可以使用 readlines：

```
from numpy import fromstring
fin = open("filename.dat")
data = fin.readlines()
Bins = -3
for record range(no_of_records):
    i = record + 3 + Bins
    Time = float(data[i])
    Bins = int(data[i+1])
    dummy, dummylong = (float(data[i+2]),float(data[i+3]))
    Bins = [fromstring(data(i+4+j), dtype=float, sep=" ") for j in range(Bins)] 
```

# javascript - How can I check with Javascript if the Lync Addon is installed in Internet Explorer?

> ID：14650766
> 
> 赞同：0
> 
> 时间：2013-02-01T16:30:11.773
> 
> 标签：javascript, internet-explorer, add-on, lync

Is there a solution to detect if the Lync-Addon is installed and active in my Internet Explorer using Javascript?

I know how to detect an Addon like Adobe Reader:

```
try {
    new ActiveXObject("AcroPDF.PDF");
    alert("Adobe Reader is installed");
} catch (err) {
    alert("Adobe Reader is not installed - " + err);
} 
```

But i dont know how i can detect the Lync-Addon. Is there an ActiveX-Object like the Adobe Reader one?

Thanks in advance and sorry for my bad english im not a native speaker.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:16:12.987

Lync 插件 (Lync 2013) 在 Internet Explorer 中注册如下：

```
Name:                   Lync Browser Helper
Publisher:              Microsoft Corporation
Type:                   Browser Helper Object
Architecture:           32-bit and 64-bit
Version:                15.0.4420.0
File date:              ‎01 ‎October ‎2012, ‏‎21:47
Date last accessed:     ‎12 ‎February ‎2013, ‏‎08:11
Class ID:               {31D09BA0-12F5-4CCE-BE8A-2923E76605DA}
Use count:              47
Block count:            0
File:                   OCHelper.dll
Folder:                 C:\Program Files\Microsoft Office\Office15 
```

暴露的对象之一是`NameCtrl`：

```
new ActiveXObject('Name.NameCtrl'); 
```

如果安装了 Lync 客户端，这应该不会出错。

正如@Webritos 所提到的，真正的 ActiveX 对象似乎是 new `"OCHelper.BrowserHelper.1"`。但是，当您尝试实例化它时，您会收到以下错误（至少在带有 Lync2013 的 IE11 中）：

```
new ActiveXObject("OCHelper.BrowserHelper.1");
"Automation server can't create object" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T14:10:18.793

```
new ActiveXObject("OCHelper.BrowserHelper.1"); 
```

其中“OCHelper.BrowserHelper.1”是 Lync 浏览器帮助程序的 ProgID。

您可以使用此程序获取有关安装在您计算机上的 ActiveX 组件的信息[http://www.nirsoft.net/utils/axhelper.html](http://www.nirsoft.net/utils/axhelper.html)

关于'Name.NameCtrl'，我相信与 Lync 无关（但它可用于在网站中显示在线用户等）[https://msdn.microsoft.com/en-us/library/office/ms455335% 28v=office.14%29.aspx](https://msdn.microsoft.com/en-us/library/office/ms455335%28v=office.14%29.aspx)

# php - session timeout with member protect

> ID：14650770
> 
> 赞同：1
> 
> 时间：2013-02-01T16:30:19.233
> 
> 标签：php, session

I have a script to protect the webpages so that only registered member of my site access certain pages say i call that memberprotect.php and in that file itself i am adding an script that will keep the sesion active for 360 seconds and if the webpage is inactive for more that 360 seconds i want to redirect the page to logintimeout.php. but my problem is the script automatically taking the member page to loin.php instead of logintimeout.php pls help or sugest what i should do . pasting the entire script below

```
 <? 
 session_start();
 // set timeout period in seconds
 $inactive = 360;
 // check to see if $_SESSION['timeout'] is set
 if(isset($_SESSION['timeout']) ) {
$session_life = time() - $_SESSION['timeout'];
if($session_life > $inactive)
    { session_destroy(); 
 header('Location:logintimeout.php'); }
}
$_SESSION['timeout'] = time();
if(!session_is_registered(myusername))
{
header('location:login.php');
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:35:45.303

当您发出位置标头时，您应该停止脚本继续执行。例如：

```
<?php
header("location:http://www.google.co.uk/");
exit();
?> 
```

# asp.net-mvc - 我无法使用标准身份验证方法为 ASP.Net MVC v4.0 设置连接字符串

> ID：14650773
> 
> 赞同：3
> 
> 时间：2013-02-01T16:30:26.953
> 
> 标签：asp.net-mvc, database-connection, connection-string, vpn

请在这种情况下需要帮助：

我想在连接到 VPN 的 MVC 应用程序中使用默认的 ASP 成员资格/身份验证。在 web.config 中，我设置了连接“MyCustomConnection”：

```
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    ...
    <add name="MyCustomConnection" connectionString="Data Source=172.x.x.y\somewhere;Initial Catalog=The.Main.DB;User ID=sa;Password=sapass;Trusted_Connection=True;Integrated Security=SSPI" providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

然后在`InitializeSimpleMembershipAttribute`我有：

```
public sealed class InitializeSimpleMembershipAttribute : ActionFilterAttribute
{
    private static SimpleMembershipInitializer _initializer;
    private static object _initializerLock = new object();
    private static bool _isInitialized;

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        // Ensure ASP.NET Simple Membership is initialized only once per app start
        LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);
    }

    private class SimpleMembershipInitializer
    {
        public SimpleMembershipInitializer()
        {
            Database.SetInitializer<UsersContext>(null);

            try
            {
                using (var context = new UsersContext())
                {
                    if (!context.Database.Exists())
                    {
                        // Create the SimpleMembership database without Entity Framework migration schema
                        ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();
                    }
                }

                WebSecurity.InitializeDatabaseConnection("MyCustomConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true);
            }
            catch (Exception ex)
            {
                throw new InvalidOperationException("The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588", ex);
            }
        }
    }
} 
```

当调试器点击（在基本模板的登录超链接中单击后）`WebSecurity.InitializeDatabaseConnection("MyCustomConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true)`，抛出异常：

```
Cannot open database "The.Main.DB" requested by the login. The login failed.
Login failed for user 'VPN\MYUSER'. 
```

另外在用户上下文中：

```
public class UsersContext : DbContext
{
    public UsersContext()
        : base("MyCustomConnection")
    {
    }

    public DbSet<UserProfile> UserProfiles { get; set; }
} 
```

我的问题是：

为什么`WebSecurity.InitializeDatabaseConnection("MyCustomConnection",...`要尝试与 vpn 的用户连接，而不是使用“sa”（以及他的密码“sapass”）作为我的连接字符串。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:52:57.540

问题出在连接字符串上，特别是`Trusted_Connection=True;Integrated Security=SSPI`有关更多信息的使用，请在此处查看：[Integrated Security = True 和 Integrated Security = SSPI 之间的区别](https://stackoverflow.com/questions/1229691/difference-between-integrated-security-true-and-integrated-security-sspi)

# php - Silex：会话和关闭

> ID：14650778
> 
> 赞同：1
> 
> 时间：2013-02-01T16:30:41.343
> 
> 标签：php, session, closures, silex

我对 Silex 中的这段代码有疑问。我正在编写一个小型网络购物车，但我不明白会话对象在 Silex 中是如何工作的。这是我的代码，它总是死于：

致命错误：函数名称必须是字符串会话

在这行中：

```
$amount = $app['calculate_amount']($app['session']->get('cart'));
$items = $app['calculate_items']($app['session']->get('cart')); 
```

有任何想法吗？

谢谢！

干杯!

```
$app['calculate_amount'] = function ($cart) use ($app) {
$amount = 0.00;
$sql = "SELECT * FROM products WHERE id = ?";
if(is_array($cart))
{
    foreach($cart as $id => $qty)
    {
        $product = $app['db']->fetchAssoc($sql, array($id));
        $amount += $product["price"]*$qty;

    }
}

    return $amount;
};

$app['calculate_items'] = function ($cart) {
$items = 0;
if(is_array($cart))
{
    foreach($cart as $id => $qty)
    {
        $items += $qty;
    }
}

return $items;
};

$app->before(function (Request $request) use ($app) {
if ($request->get('save') != NULL)
{

    foreach ($app['session']->get('cart') as $id_isbn => $qty)
    {
        if ($request->get('$id_isbn')=='0')
        {
            $app['session']->set('cart', array('$id_isbn' => NULL));
        }
        else
        {
            $app['session']->set('cart', array('$id_isbn' => $request->get('$id_isbn')));
        }
    }

    $amount = $app['calculate_amount']($app['session']->get('cart'));
    $items = $app['calculate_items']($app['session']->get('cart'));

    $app['session']->set('amount', $amount);
    $app['session']->set('items', $items);

    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:56:35.227

引用 Pimple 的文档，silex 背后的 DIC：

> 因为 Pimple 将匿名函数视为服务定义，所以您需要使用protect() 方法包装匿名函数以将它们存储为参数：

```
$container['random'] = $container->protect(function () { return rand(); }); 
```

[直接链接](https://github.com/fabpot/pimple#protecting-parameters)。

简而言之：pimple 将您的匿名函数视为服务定义，并在您第一次访问它们时运行它们。`protect()`如果您想自己存储函数以供以后检索，您将需要它们。

# javafx-2 - tableview 中的 javafx 列自动调整大小

> ID：14650787
> 
> 赞同：43
> 
> 时间：2013-02-01T16:31:00.347
> 
> 标签：javafx-2, javafx

afaik javafx 中的 TableView 有 2 列调整大小策略：CONSTRAINED_RESIZE_POLICY 和 UNCONSTRAINED_RESIZE_POLICY，但我希望列调整大小以适合其单元格的内容我认为这是其他平台中的一个简单问题（如 C# 中的 datagridview）但无法解决

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2016-07-31T17:02:47.423

3年后我再次回到这个问题，一些建议是计算每个单元格中数据文本的大小（这很复杂，取决于字体大小、字体系列、填充......）

但是我意识到，当我单击表头上的**分隔线**时，它会根据我的需要调整大小以适应内容。于是我深入JavaFX源代码，终于在**TableViewSkin中找到****了resizeColumnToFitContent**方法，但它是**受保护**的方法，我们可以通过反射来解决：

 ****```
import com.sun.javafx.scene.control.skin.TableViewSkin;
import javafx.scene.control.Skin;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;

public class GUIUtils {
    private static Method columnToFitMethod;

    static {
        try {
            columnToFitMethod = TableViewSkin.class.getDeclaredMethod("resizeColumnToFitContent", TableColumn.class, int.class);
            columnToFitMethod.setAccessible(true);
        } catch (NoSuchMethodException e) {
            e.printStackTrace();
        }
    }

    public static void autoFitTable(TableView tableView) {
        tableView.getItems().addListener(new ListChangeListener<Object>() {
            @Override
            public void onChanged(Change<?> c) {
                for (Object column : tableView.getColumns()) {
                    try {
                        columnToFitMethod.invoke(tableView.getSkin(), column, -1);
                    } catch (IllegalAccessException | InvocationTargetException e) {
                        e.printStackTrace();
                    }
                }
            }
        });
    }
} 
```

注意我们调用“ **tableView.getItems()** ”所以我们必须在**setItems()之后调用这个函数**

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-03-06T15:13:43.983

在测试了以前的解决方案后，我终于找到了一个适合我的解决方案。所以这是我的（将数据插入表后调用该方法）：

```
public static void autoResizeColumns( TableView<?> table )
{
    //Set the right policy
    table.setColumnResizePolicy( TableView.UNCONSTRAINED_RESIZE_POLICY);
    table.getColumns().stream().forEach( (column) ->
    {
        //Minimal width = columnheader
        Text t = new Text( column.getText() );
        double max = t.getLayoutBounds().getWidth();
        for ( int i = 0; i < table.getItems().size(); i++ )
        {
            //cell must not be empty
            if ( column.getCellData( i ) != null )
            {
                t = new Text( column.getCellData( i ).toString() );
                double calcwidth = t.getLayoutBounds().getWidth();
                //remember new max-width
                if ( calcwidth > max )
                {
                    max = calcwidth;
                }
            }
        }
        //set the new max-widht with some extra space
        column.setPrefWidth( max + 10.0d );
    } );
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-08T10:23:31.083

我认为仅通过覆盖返回 true 的回调函数就可以解决您的问题，它将禁用重新调整列的大小，并且所有列都将重新调整大小以适合其单元格的内容。

例子：

```
TableView<String[]> table = new TableView<>();
table.setColumnResizePolicy(new Callback<TableView.ResizeFeatures, Boolean>() {
  @Override
  public Boolean call(ResizeFeatures p) {
     return true;
  }
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-14T17:28:36.220

如果您希望只有一列填充表格的剩余宽度，我找到了一个非常简单的解决方案，它很短并且不需要上面描述的 hacky 反射解决方案：

```
DoubleBinding usedWidth = columnA.widthProperty().add(columnB.widthProperty()).add(columnC.widthProperty());

fillingColumn.prefWidthProperty().bind(tableView.widthProperty().subtract(usedWidth)); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-18T18:54:28.773

或者简而言之：

```
// automatically adjust width of columns depending on their content
configAttributeTreeTable.setColumnResizePolicy((param) -> true ); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-11-12T10:13:39.183

我在这个问题上使用了其他解决方案，效果很好。但是，这样做的缺点是当 TableView 的宽度大于 TableColumns 所需的宽度时。我创建了一个 hack 来解决这个问题，它工作正常：

```
orderOverview.setColumnResizePolicy((param) -> true );
Platform.runLater(() -> FXUtils.customResize(orderOverview)); 
```

其中 FXUtils.customResize() 创建如下：

```
public static void customResize(TableView<?> view) {

    AtomicDouble width = new AtomicDouble();
    view.getColumns().forEach(col -> {
        width.addAndGet(col.getWidth());
    });
    double tableWidth = view.getWidth();

    if (tableWidth > width.get()) {
        TableColumn<?, ?> col = view.getColumns().get(view.getColumns().size()-1);
        col.setPrefWidth(col.getWidth()+(tableWidth-width.get()));
    }

} 
```

我希望这对其他人也有帮助！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-06-28T10:27:51.130

这是我发现的方式：

```
tableview.setColumnResizePolicy( TableView.CONSTRAINED_RESIZE_POLICY );
idCol.setMaxWidth( 1f * Integer.MAX_VALUE * 50 ); // 50% width
nameCol.setMaxWidth( 1f * Integer.MAX_VALUE * 30 ); // 30% width
ageCol.setMaxWidth( 1f * Integer.MAX_VALUE * 20 ); // 20% width 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-04T05:27:05.103

此代码自动调整与表格宽度成比例的所有列宽，
而当表格宽度小于 x 时，它可以将第一列宽度固定为给定值

 ````
 // To generalize the columns width proportions in relation to the table width,
        // you do not need to put pixel related values, you can use small float numbers if you wish,
        // because it's the relative proportion of each columns width what matters here:

        final float[] widths = { 1.2f, 2f, 0.8f };// define the relational width of each column 

        // whether the first column should be fixed
        final boolean fixFirstColumm = true; 

        // fix the first column width when table width is lower than:
        final float fixOnTableWidth = 360; //pixels 

        // calulates sum of widths
        float sum = 0;
        for (double i : widths) {
            sum += i;
        }

        // calculates the fraction of the first column proportion in relation to the sum of all column proportions
        float firstColumnProportion = widths[0] / sum;

        // calculate the fitting fix width for the first column, you can change it by your needs, but it jumps to this width
        final float firstColumnFixSize = fixOnTableWidth * firstColumnProportion;

        // set the width to the columns
        for (int i = 0; i < widths.length; i++) {
            table.getColumns().get(i).prefWidthProperty().bind(table.widthProperty().multiply((widths[i] / sum)));
            // ---------The exact width-------------^-------------^
    if (fixFirstColumm)
            if (i == 0) {
                table.widthProperty().addListener(new ChangeListener<Number>() {
                    @Override
                    public void changed(ObservableValue<? extends Number> arg0, Number oldTableWidth, Number newTableWidth) {

                        if (newTableWidth.intValue() <= fixOnTableWidth) {

                            // before you can set new value to column width property, need to unbind the autoresize binding
                            table.getColumns().get(0).prefWidthProperty().unbind();
                            table.getColumns().get(0).prefWidthProperty().setValue(firstColumnFixSize);

                        } else if (!table.getColumns().get(0).prefWidthProperty().isBound()) {

                            // than readd the autoresize binding if condition table.width > x
                            table.getColumns().get(0).prefWidthProperty()
                                    .bind(table.widthProperty().multiply(firstColumnProportion));
                        }

                    }
                });
            }
        } 
```

建议将代码放在单独的 TableAutoresizeModel 类中，在那里您可以处理进一步的计算，例如在隐藏列时添加侦听器...

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-21T13:47:22.920

我实现了一个解决方案，它比我在这里找到的解决方案要复杂得多，但是它允许通过双击标题**来调整特定列的大小，同时仍然让用户手动调整列的大小。**

这是通过监听表头 ( `TableHeaderRow`) 上的点击事件来实现的。当发生双击时，通过匹配鼠标事件 X 和 Y 来找到特定的列标题。

注意：要完成这项工作，每列都必须设置一个 ID。

```
// when skin is loaded (hence css), setup click listener on header to make column fit to content max width on double click
tableView.skinProperty().addListener((a, b, newSkin) -> {
    TableHeaderRow headerRow = (TableHeaderRow) tableView.lookup("TableHeaderRow");
    NestedTableColumnHeader headers = (NestedTableColumnHeader) (headerRow.getChildren().get(1));

    headerRow.setOnMouseClicked(evt -> {
        if (evt.getClickCount() != 2 || evt.getButton() != MouseButton.PRIMARY) return;

        // find the header column that contains the click
        for (TableColumnHeader header : headers.getColumnHeaders()) {
            if (header.contains(header.parentToLocal(evt.getX(), evt.getY()))) {
                fitColumnWidthToContent(header.getId());
            }
        }
        evt.consume();
    });
}); 
```

负责调整大小的方法如下：

```
 private void fitColumnWidthToContent (String colId) {
    // find column matching id
    TableColumn column = null;

    for (TableColumn tempCol : tableView.getColumns()) {
        if (tempCol.getId().equals(colId)) {
            column = tempCol;
            break;
        }
    }

    if (column == null) {
        throw new IllegalStateException("Column ID doesn't match any actual column");
    }

    // set default width to column header width
    Text text = new Text(column.getText());
    double max = text.getLayoutBounds().getWidth();

    for (int i = 0; i < tableView.getItems().size(); i++ ) {
        if (column.getCellData(i) == null) continue;

        text = new Text(column.getCellData(i).toString());
        double textWidth = text.getLayoutBounds().getWidth();

        if (textWidth > max) {
            max = textWidth;
        }
    }

    column.setPrefWidth(max + 12);
} 
```

我希望这对任何人都有用。

**为了也允许手动调整大小**，有必要在表初始化上添加更多代码：

```
// listen to width changes in columns and set to pref width (otherwise if for example width changes because of
// user resizing the column, applying the old pref width won't work because it stayed the same)
for (TableColumn col : tableView.getColumns()) {
    col.widthProperty().addListener((obs, oldVal, newVal) -> {
        col.setPrefWidth(newVal.doubleValue());
    });
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-02-13T11:14:04.797

我已经为 TreeTableView 实现了一个解决方案。它仍在进化中，但现在显示出可喜的结果。以下是解决方案的说明。

在控件外观类中，我向控件子控件添加了 TreeTableView 和一个不可见的 VBox。单元工厂向目标 TreeTableColumn 提供派生单元。派生单元格包裹一个Label节点，该节点根据空属性添加或删除到不可见的VBox中，其prefWidth根据单元格宽度设置。细胞利用：

`getProperties().put(Properties.DEFER_TO_PARENT_PREF_WIDTH, Boolean.TRUE)`

我覆盖单元格的 computePrefWidth() 方法如下：

```
@Override
protected double computePrefWidth(double height) {

    return Double.max(_box.prefWidth(-1.0), super.computePrefWidth(height) + 24.0);

} 
```

Vbox 宽度属性绑定到 TreeTableColumn 的 prefWidth。这也是调整列标题的大小所必需的。

值得注意的是，目前，为了简化解决方案的开发，这种方法在禁用内置排序、排序和调整大小功能的情况下效果很好。IE。

```
_nameColumn = new TreeTableColumn<>("Name");
_nameColumn.setResizable(false);
_nameColumn.setReorderable(false);
_nameColumn.setSortable(false); 
```

快乐编码

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-04-06T11:02:54.283

@HarleyDavidson 在 kotlin 中的回答

```
val String.fxWidth: Double
    get() = Text(this).layoutBounds.width

//  call the method after inserting the data into table
fun <T> TableView<T>.autoResizeColumns() {
    columnResizePolicy = TableView.UNCONSTRAINED_RESIZE_POLICY
    columns.forEach { column ->
        column.setPrefWidth(
            (((0 until items.size).mapNotNull {
                column.getCellData(it)
            }.map {
                it.toString().fxWidth
            }.toMutableList() + listOf(
                column.text.fxWidth
            )).maxOrNull() ?: 0.0) + 10.0
        )
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-08-24T11:51:16.550

这将根据字体和文本设置列的最小宽度，以便不会裁剪**列名。**

```
public static void setDataTableMinColumnWidth(TableView<?> dataTable)
    {
        for (Node columnHeader : dataTable.lookupAll(".column-header"))
        {
            var columnString = columnHeader.getId();
            if (columnString != null)
            {
                for (Node columnHeaderLabel : columnHeader.lookupAll(".label"))
                {
                    var tableColumn = dataTable.getColumns()
                                               .stream()
                                               .filter(x -> x.getId()
                                                             .equals(columnString))
                                               .findFirst();
                    if (columnHeaderLabel instanceof Label && tableColumn.isPresent())
                    {
                        var label = (Label) columnHeaderLabel;
                        /* calc text width based on font */
                        var theText = new Text(label.getText());
                        theText.setFont(label.getFont());
                        var width = theText.getBoundsInLocal()
                                           .getWidth();
                        /*
                         * add 10px because of paddings/margins for the button
                         */
                        tableColumn.get()
                                   .setMinWidth(width + 10);
                    }
                }
            }
        }
    } 
```

如何使用：

```
dataTable.needsLayoutProperty()
             .addListener((obs, o, n) -> setDataTableMinColumnWidth(dataTable)); 
```

对于列，需要首先设置 id 属性：

```
 TableColumn<BundImportTask, String> columnTask = new TableColumn<>("My Column");
    columnTask.setId("MyColumnId");
    columnTask.setCellValueFactory(data -> new SimpleStringProperty(data.getValue()
                                                                        .fileName())); 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2016-10-26T05:12:34.940

经过长时间的研究。最好的解决方案是..

```
tblPlan.setColumnResizePolicy((param) -> true );
Platform.runLater(() -> customResize(tblPlan)); 
```

> “自定义调整大小”

```
public void customResize(TableView<?> view) {

        AtomicLong width = new AtomicLong();
        view.getColumns().forEach(col -> {
            width.addAndGet((long) col.getWidth());
        });
        double tableWidth = view.getWidth();

        if (tableWidth > width.get()) {
            view.getColumns().forEach(col -> {
                col.setPrefWidth(col.getWidth()+((tableWidth-width.get())/view.getColumns().size()));
            });
        }
    } 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2019-04-10T07:02:06.690

```
<TableView fx:id="datalist" layoutX="30.0" layoutY="65.0" prefHeight="400.0" AnchorPane.bottomAnchor="100.0" AnchorPane.leftAnchor="30.0" AnchorPane.rightAnchor="30.0" AnchorPane.topAnchor="100.0">
        <columns>
            <TableColumn fx:id="number" minWidth="-1.0" prefWidth="-1.0" style="width: auto;" text="number" />
            <TableColumn fx:id="id" minWidth="-1.0" prefWidth="-1.0" text="id" />
            <TableColumn fx:id="name" minWidth="-1.0" prefWidth="-1.0" text="name" />
            <TableColumn fx:id="action" minWidth="-1.0" prefWidth="-1.0" text="todo" />
        </columns>
         **<columnResizePolicy>
            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
         </columnResizePolicy>**
      </TableView> 
```

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2018-05-25T19:22:22.693

```
public static void autoFillColumn(TableView<?> table, int col) {
    double width = 0;
    for (int i = 0; i < table.getColumns().size(); i++) {
        if (i != col) {
            width += table.getColumns().get(i).getWidth();
        }
    }
    table.getColumns().get(col).setPrefWidth(table.getWidth() - width);
} 
````****

# vim - 为什么 ci" 和 ci(, ci{.... 行为不同？

> ID：14650788
> 
> 赞同：33
> 
> 时间：2013-02-01T16:31:03.147
> 
> 标签：vim

我们都知道`ci"` `ci'` `ci(` `ci[`……做什么。在日常编辑中非常方便。我发现了一些奇怪的东西，并查看了帮助，没有找出原因。

说，我有一个文件：

```
foo "target"
foo 'target'
foo (target)
foo {target}
foo [target]
foo <target> 
```

如果我的光标在每一行的**开头**，（在' `f`'上），然后我输入 ci", ci', ci(...

仅适用于`cix`引号（单引号或双引号），不适用于括号。为什么他们的行为不同？

( `dix`,`vix`相同)

用 --noplugin，vim 7.3 测试

谢谢你。

**更新**

感谢@romainl 的回答。我仍然对“vim中的配对处理”有疑问

检查这个例子：

```
foo "targ\"eti\" some\"thing else " 
```

如果我有上面这样的一行，我输入`ci"`，无论光标在开头还是引号之间，它都可以正常工作，似乎vim确实有“对”的想法？

这也许是你所说的配对？

```
foo "target x some"thing else "
foo (target x some(thing else ) 
```

我有上面两行，如果（光标处`x`）我输入`ci"`and `ci(`，第二行没有发生任何事情，但第一行改为：

```
foo "I"thing else " (I is cursor) 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-01T17:07:33.377

`ci(`是一致的`ci[`，`ci{`并且`cit`和所有其他的`<action>i<something>`。只有`ci'`和`ci"`像他们一样工作。异常值在这里是引号，而不是括号。

Vim 不认为引号是成对出现的，而括号是成对出现的。它具有用于匹配对的内部逻辑，适用于实际对但不适用于引号，因此行为差异。

您不是第一个抱怨这种差异的人：[这是一个解决方案](https://gist.github.com/1171559)，也许您可​​以找到其他解决方案。

***编辑***

不幸的是，我对 Vim 的内部结构没有深入的了解，所以我只能在这里做一些假设。

如果您要求 Vim 这样做`ci"`，它会尽力找到一对双引号，但双引号不会成对出现：无法判断 a`"`是结束引号还是与括号相反的开始引号。因此，Vim 必须做出一些选择。IMO，考虑到其他家庭成员的工作方式，最有意义的选择是假设光标位于引号之间，并从右边的第一个到左边的第一个进行选择。我只能假设这种方法在某种程度上被证明是错误的，或者由于某种原因没有奏效，并且另一种方法（当前的方法）占了上风。

另一种解释可能是该机制以某种方式与无法正确处理引号`i<something>`的特定子系统（可能与？）相关联。`showmatch`

无论如何，就像你一样，我觉得这种差异很奇怪，我已经以某种方式将它内化，并将我的用法`<action>i"`与其他人的工作方式保持一致。到实际做`2t"ci"`或一些变体而不是`ci"`!! 效率低下，我知道。

你读了`:h a'`吗？我完全忘记了我对这个问题的“有限理解”，但它就在那里！它说：

> “仅在一行内有效。当光标从引号开始时，Vim 将通过从行首开始搜索来确定哪些引号对构成字符串。”

我从中得到的是：由于某些我们不知道的原因，Vim 使用另一种机制来匹配引号而不是其他对，这就是为什么`ci"`不同于`cib`和朋友。根本原因尚不清楚，但我相当肯定大局看起来很像我想象的那样。

对我来说，它看起来很像一个错误或伪装成功能的限制。

如果您仍然好奇，我建议您在[vim-dev](http://www.vim.org/maillist.php#vim-dev)上提出任何进一步的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-13T09:33:54.647

利用`%`

```
" nnoremap cb cib
nnoremap cb %cib
" nnoremap vb vib
nnoremap vb %vib
nnoremap yb %yib
nnoremap db %dab 
```

增强`%`：
[https ://github.com/andymass/vim-matchup#tocbar-dopjfd](https://github.com/andymass/vim-matchup#tocbar-dopjfd)

`b`可以匹配`(` `[` `{`，
想同时`'`匹配`'`和`"`吗？

```
 nnoremap c' :call DoubleAsSingleC()<CR>
func! DoubleAsSingleC()
    " When [!] is added, error messages will also be skipped,
    " and commands and mappings will not be aborted
    " when an error is detected.  |v:errmsg| is still set.
    let v:errmsg = ""
    silent! :s#\"\([^"]*\)\"#'\1'#g
    if (v:errmsg == "")
        echo "双变单&quot;
    endif

    exec "normal ci'"
endfunc 
```

类似的：
`d'` `y'` `v'`

# ios - NSURLConnection sendAsynchronousRequest completionHandler logs appearing before updating the UI

> ID：14650790
> 
> 赞同：1
> 
> 时间：2013-02-01T16:31:05.373
> 
> 标签：ios, objective-c, sendasynchronousrequest

I have this code to send a json string to a server

```
[NSURLConnection
 sendAsynchronousRequest:req
 queue:[[NSOperationQueue alloc] init]
 completionHandler:^(NSURLResponse *response,
                     NSData *data,
                     NSError *error)
 {

     if ([data length] >0 && error == nil)
     {

         NSLog(@"Done");

     }
     else if ([data length] == 0 && error == nil)
     {
         NSLog(@"Nothing was downloaded.");
         self.resultLabel.text=@"Done!";
         self.view.userInteractionEnabled = TRUE;
     }
     else if (error != nil){
         NSLog(@"Error = %@", error);
     }

 }]; 
```

The asynchronous request finishes fine and the logs show up almost immediately after it is finished. However, this code:

```
self.resultLabel.text=@"Done!";
self.view.userInteractionEnabled = TRUE; 
```

Takes a good 10 seconds to show up in the UI. Anyone know why this would happen?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T16:37:30.243

您必须在主线程中执行所有 UI 更改：

```
....
if ([data length] == 0 && error == nil) {
    dispatch_async(dispatch_get_main_queue(), ^{
        self.resultLabel.text=@"Done!";
        self.view.userInteractionEnabled = TRUE;
    });
}
.... 
```

# c# - C# place a carousel Control inside a Repeater

> ID：14650791
> 
> 赞同：1
> 
> 时间：2013-02-01T16:31:08.623
> 
> 标签：c#, jquery

I've the following c# code to place a carousel Control inside a Repeater :

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:Repeater ID="Repeater1" runat="server">
    <ItemTemplate>
    <table cellpadding="0" cellspacing="0" class="mycarousel">

            <tr>
                <td valign="top">

                    <a id="prev" class="myprev" href="#">
                    </a>
                </td>
                <td>

                    <div class="carousel_list">

                        <ul class="foo1" id="foo1">
                            <li>
                                <img id="img1" src="<%#Eval("IMG_SRC")%>" />    
                                </a>
                            </li>

                        </ul>

                        <div class="clearfix">
                        </div>

                    </div>

                </td>
                <td valign="top">
                    <a id="next" class="mynext" href="#">
                    </a>
                </td>
            </tr>
        </table>
   </ItemTemplate>  
    </asp:Repeater>
</asp:Content> 
```

CodeBehind :

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            FillOrder();
        }       
    }

    protected void FillOrder()
    {

        sqlcon.Open();
        sqlcmd = new SqlCommand("select * from Table_1 Order By name", sqlcon);
        da = new SqlDataAdapter(sqlcmd);
        da.Fill(dt);
        if (dt.Rows.Count > 0)
        {
            Repeater1.DataSource = dt;
            Repeater1.DataBind();
        }
        sqlcon.Close();

    } 
```

and here's the result : ![enter image description here](../Images/09edc4dfa3b14f7034f6ded160653315.png)

But what i want / hope to get is this : ![enter image description here](../Images/3e501d276fb46ec918f0d62d95ca1cc7.png)

that means put all names start with "A" into a carousel Control , with "B" into an other carousel Control ...etc

Please can anyone help me in this .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:47:11.593

我看起来你需要两个中继器控件（一个在另一个里面）。然后你应该准备分层数据结构并绑定它。

# c++ - How to overload << for string in c++

> ID：14650797
> 
> 赞同：1
> 
> 时间：2013-02-01T16:31:24.727
> 
> 标签：c++, string, overloading

> **Possible Duplicate:**
> [How to overload cout behaviour in c++](https://stackoverflow.com/questions/14649920/how-to-overload-cout-behaviour-in-c)

I would like to make cout act different for string. for example it will always add "Hello" before handovered string. So this is basically overloading operator but for String. How to do it?

Example

```
std::cout<<" Kermit"; 
```

Result

```
Hello Kermit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:35:10.540

请不要：

```
struct X
{
   X& operator << (const char* x)
   {
      std::cout << "Hello " << x;
      return *this;
   }
};

//...
X cout;
cout << "Kermit"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:40:10.090

您可以在文字周围使用包装器...

```
#include <iostream>

struct foo
{
  foo(const char* s) : str(s) {}

  friend
  std::ostream& operator<<(std::ostream& s, foo const& f)
  { return s << "Hello " << f.str; }

  const char* str;
};

int main(void)
{
  std::cout << foo("Kermit") << std::endl;
} 
```

# jquery-ui - jquery bubble popup 无法加载 jquerybubblepopup-themes

> ID：14650802
> 
> 赞同：0
> 
> 时间：2013-02-01T16:31:43.777
> 
> 标签：jquery-ui, jsp, jquery-plugins

.我想使用 jquery 气泡弹出来创建一个气泡。我读到文件夹“jquerybubblepopup-themes”应该复制到我网站的根目录中。另外，我有一个不直接在我网站的根目录下的 jsp，而是在“mywebsite/WEB-INF/jsp/admin/myfile.jsp”下。它包含这个 javascript 代码：

```
<script type="text/javascript">
$(document).ready(function(){
$('.infoTip').CreateBubblePopup({
themeName: 'black',
themePath: 'jquerybubblepopup-themes'                                                                
});
});
</script> 
```

我在“themePath”中读到，应该设置“jquerybubblepopup-themes”的相对路径。

在我的情况下，无法加载“jquerybubblepopup-themes”，如何修改 themePath 值以便加载文件“jquerybubblepopup-themes”？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T10:58:36.603

您应该在浏览器控制台中看到错误，然后您可以看到它正在尝试搜索主题（路径）的位置，并相应地调整路径

# android - 我可以删除 android-support-v4.jar 库吗？

> ID：14650805
> 
> 赞同：15
> 
> 时间：2013-02-01T16:31:50.327
> 
> 标签：android, android-library, android-support-library

当你创建一个项目时，它默认添加了这个库：

***安卓支持-v4.jar***

我可以删除它吗？如果我删除库会发生什么？该应用程序可以在某些手机中停止工作吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T16:34:15.517

> 我可以删除它吗？

你可以试试。

> 如果我删除该库会发生什么？

您将无法使用它提供的任何东西，例如 Fragments backport`ViewPager`等。

> 该应用程序可以在某些手机中停止工作吗？

您将首先得到构建错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T16:36:54.187

如果您不使用当前[SDK](http://en.wikipedia.org/wiki/Software_development_kit)目标不可用的 API，则可以安全地删除它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-11T00:36:27.517

如果您使用的是 Eclipse，并且您的项目在删除 android-support-v4 jar 后标有红色感叹号，请关闭并重新启动 Eclipse，它应该会自行恢复。（或者您可以尝试关闭并重新打开项目。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T16:39:06.520

它是一个支持库。你可以在这里读到它：

*   *[支持库设置](http://developer.android.com/training/basics/fragments/support-lib.html)*

*   *[支持库](http://developer.android.com/tools/extras/support-library.html)*

如果您不使用此 API，您可以安全地删除它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-07T01:40:57.027

我就是这么做的。所以我在所有项目中都遇到了多个错误，比如

```
...\res\values\styles.xml:7: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.AppCompat.Light'.
...\res\values-v11\styles.xml:7: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.AppCompat.Light'.
...\res\values-v14\styles.xml:8: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.AppCompat.Light.DarkActionBar'.
...\res\values\styles.xml:7: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.AppCompat.Light'.
...\res\values-v11\styles.xml:7: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.AppCompat.Light'.
...\res\values-v14\styles.xml:8: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.AppCompat.Light.DarkActionBar'.
...\res\values\styles.xml:7: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.AppCompat.Light'.
...\res\values-v11\styles.xml:7: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.AppCompat.Light'.
...\res\values-v14\styles.xml:8: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.AppCompat.Light.DarkActionBar'. 
...\res\values\styles.xml:7: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.AppCompat.Light'.
...\res\values-v11\styles.xml:7: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.AppCompat.Light'.
...\res\values-v11\styles.xml:7: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.AppCompat.Light.DarkActionBar'.
...\res\values\styles.xml:7: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.AppCompat.Light'.
...\res\values-v11\styles.xml:7: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.AppCompat.Light'.
...\res\values-v14\styles.xml:8: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.AppCompat.Light.DarkActionBar'.
...\res\values\styles.xml:7: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.AppCompat.Light'.
...\res\values-v11\styles.xml:7: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.AppCompat.Light'.
...\res\values-v14\styles.xml:8: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.AppCompat.Light.DarkActionBar'. 
```

这意味着上述资源不再可用于我的项目。

然后我继续添加`v7 appcompat`，我无法摆脱我的错误。所以我删除了它，并且错误地从磁盘中删除了项目，所以安装了它的残余（我猜），这也没有很好地结束：

```
[2014-12-07 06:25:16 - android-support-v7-gridlayout] Unable to resolve target 'android-7'
[2014-12-07 06:25:16 - android-support-v7-mediarouter] Unable to resolve target 'android-17'
[2014-12-07 06:25:16 - android-support-v7-palette] Unable to resolve target 'android-7'
[2014-12-07 06:25:17 - android-support-v7-gridlayout] Unable to resolve target 'android-7'
[2014-12-07 06:25:17 - android-support-v7-palette] Unable to resolve target 'android-7'
[2014-12-07 06:25:22 - android-support-v7-mediarouter] Unable to resolve target 'android-17'

...\sdk\extras\android\support\v7\mediarouter\res\values\styles.xml:18: error: Error retrieving parent for item: No resource found that matches the given name 'Widget.AppCompat.ActionButton'.
...\sdk\extras\android\support\v7\mediarouter\res\values\styles.xml:28: error: Error retrieving parent for item: No resource found that matches the given name 'Widget.AppCompat.Light.ActionButton'.
...\sdk\extras\android\support\v7\mediarouter\res\values\styles.xml:18: error: Error retrieving parent for item: No resource found that matches the given name 'Widget.AppCompat.ActionButton'.
...\sdk\extras\android\support\v7\mediarouter\res\values\styles.xml:28: error: Error retrieving parent for item: No resource found that matches the given name 'Widget.AppCompat.Light.ActionButton'.
[2014-12-07 06:25:26 - android-support-v7-mediarouter] 
```

**所以，是的，不要这样做！**

# java - Hadoop 命令行参数未传递给 Java 远程调试器

> ID：14650810
> 
> 赞同：0
> 
> 时间：2013-02-01T16:32:03.450
> 
> 标签：java, hadoop, command-line-arguments, remote-debugging

我已经安装了 hadoop 1.0.4。我通过添加以下内容修改了 /usr/bin/hadoop 文件：

HADOOP_DEBUG="-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=5000"

elif [ "$COMMAND" = "jar" ] ; 然后

CLASS=org.apache.hadoop.util.RunJar

HADOOP_OPTS="$HADOOP_OPTS $HADOOP_CLIENT_OPTS"

elif [ "$COMMAND" = "jar-debug" ] ; 然后

CLASS=org.apache.hadoop.util.RunJar

HADOOP_OPTS="$HADOOP_OPTS $HADOOP_CLIENT_OPTS $HADOOP_DEBUG"

命令=“罐子”

这样我可以运行“hadoop jar SomeJar.jar SomeClass”正常启动或运行“hadoop jar-debug SomeJar.jar SomeClass”以调试模式启动。这有效，除非我想将命令行参数传递给我的类（例如在 WordCount 示例中）。例如运行：

“hadoop jar-debug WordCount.jar WordCount InputDir OutputDir”

在主类的第一行有一个断点表明 String[] args 是一个空字符串（这显然会导致程序稍后失败）。如果我使用普通的 jar 命令运行它，它可以正常工作（很明显，命令行参数可以使用普通的 jar 很好地传入）。

有人知道这里发生了什么吗？我被严重卡住了。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:47:55.983

为将来遇到此问题的任何人更新：

如果启动 java 远程调试器侦听错误的 IP 地址（IE 侦听远程名称节点而不是 localhost），JRD 仍会启动，但不会传入命令行参数。

# ajax - $.post 方法正在进行时执行操作的事件是什么 jQuery

> ID：14650818
> 
> 赞同：0
> 
> 时间：2013-02-01T16:32:23.660
> 
> 标签：ajax, jquery, post, .post

$.post 方法正在进行时执行操作的事件是什么 jQuery。

解释得更清楚：我`$.post`在 PHP 的代码中使用方法。我需要显示加载图像，直到`$.post`返回一个值！

我的代码

```
$("#wit").click(function(){
    var story = $("#story").val();
    $.post('diary/ajax/ajax.php', {newdiary:story},function(data){
        if(data=="SORRY")
        {
            alert("Sorry! Try Again in few seconds");
        }
        else
        {

        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:36:19.850

在您`post()`拨打电话之前，只需在该行中显示加载图像。然后在回调函数中隐藏加载图片。请注意，对于此类操作，您还应该对失败的调用进行回调，以便在调用因某种原因失败时隐藏图像。

# html - 可以使样板文件与 IE8 一起使用吗？

> ID：14650819
> 
> 赞同：1
> 
> 时间：2013-02-01T16:32:24.417
> 
> 标签：html, internet-explorer-8, boilerplatejs

我想为即将到来的 Intranet 项目使用[Boilerplatejs](http://boilerplatejs.org)，但是，许多机器仍然是带有 IE8 的 WinXP（并且在组织中没有用于大规模 Firefox 或 Chrome 部署的选项）。

我很快尝试合并 html5shiv，但这似乎没有帮助。它似乎没有路由或其他功能正在工作。我试图弄清楚这是否值得做，或者其他人是否在花更多时间之前试图让这个工作正常进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:48:15.030

实际上，您将遇到的最困难的问题不是关于*样板js*，而是外部库。

具体的调整取决于您在应用程序中利用的功能，但首先您需要做的就是

*   添加*html5shim*以支持 HTML5 元素，例如`<section>`
*   包括*json2*库以缺少 json 序列化支持
*   [可选] 包括[*explorercanvas*](http://code.google.com/p/explorercanvas/)以启用*浮动*图表

把它放在你的`<head>`部分：

```
<!--[if lt IE 9]>
<script type="text/javascript" charset="utf-8" src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<script type="text/javascript" charset="utf-8" src="http://cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js"></script>
<script type="text/javascript" charset="utf-8" src="http://explorercanvas.googlecode.com/svn/trunk/excanvas.js"></script>
<![endif]--> 
```

使用此代码段，您将可以使用带有路由、主题和 i18n 支持的*样板js示例页面。*

然后，您会注意到在*Click Counter*示例中，无论您单击按钮多少次，您都不会获胜。这是因为由于*pubsub.js*库中的错误（？）， *clickCounter/clickme*`LOTTERY_ACTIVITY`组件发布的事件没有到达任何侦听器（我什至前段时间[提交了一个问题](https://github.com/federico-lox/pubsub.js/issues/10#issuecomment-10878509)）。要解决它，请修补*libs\pubsub\pubsub-20120708.js*，更改

 ***```
params = (args.length > 1) ? Array.prototype.splice.call(args, 1) : [] 
```

到 IE8 兼容的调用：

```
params = (args.length > 1) ? Array.prototype.splice.call(args, 1, args.length-1) : [] 
```

恭喜……你赢了！！！

*我将解决Backbone TODO*模块中剩余的问题留给您，您可以使用[原始代码](http://addyosmani.github.com/todomvc/architecture-examples/backbone/)作为指导。

总而言之，我会说***boilerplatejs*完全兼容IE8**，任何不兼容都来自支持库，而不是核心代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T20:08:10.183

并不真地。这就是 h5bp 中的代码的内容

```
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]--> 
```

这些是 ie < 9 优雅降级的条件子句。

如果这是一个很多人会使用 ie<9 的项目，那么使用 xhtml 可能会更好......只是一个工程考虑

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T04:22:46.327

BoilerplateJS 核心没有设计任何 HTML5 功能。虽然我没有在 IE8 中测试过，但我相信通过一些调整这是很有可能的。例如，如果用于路由的库 crossroadsJS 与 IE8 不兼容，您仍然可以轻松地将其替换为 pathJS 或其他与 IE8 兼容的东西。***

# c# - C#.Net Windows 消息到 Delphi

> ID：14650820
> 
> 赞同：2
> 
> 时间：2013-02-01T16:32:25.397
> 
> 标签：c#, .net, delphi, windows-messages

我在 ac# 应用程序和 delphi 应用程序之间的 Windows 消息有问题。

我用c#到c#和delphi到delphi做了一些例子，但我不能用c#到delphi

这是我相关的 C# 应用程序，它是 WM 发件人代码

```
 void Game1_Exiting(object sender, EventArgs e)
    {
        Process[] Processes = Process.GetProcesses();

        foreach(Process p in Processes)
            if(p.ProcessName == Statics.MainAppProcessName)
                SendMessage(p.MainWindowHandle, WM_TOOTHUI, IntPtr.Zero, IntPtr.Zero);

    }

    private const int WM_TOOTHUI = 0xAAAA;
    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    public static extern int SendMessage(IntPtr hwnd, [MarshalAs(UnmanagedType.U4)] int Msg, IntPtr wParam, IntPtr lParam); 
```

这是我相关的 delphi 应用程序，它是 WM 接收器代码

```
 const
      WM_TOOTHUI = 43690;
    type
      private
        MsgHandlerHWND : HWND;
        procedure WndMethod(var Msg: TMessage);

    procedure TForm1.WndMethod(var Msg: TMessage);
    begin
      if Msg.Msg = WM_TOOTHUI then
      begin
        Caption := 'Message Recieved';
      end;
    end;

    procedure TForm1.FormCreate(Sender: TObject);
    begin
      MsgHandlerHWND := AllocateHWnd(WndMethod);
    end; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T16:34:36.060

您正在将消息发送到主窗口句柄。那是 的实例的句柄`TForm1`。但是您的窗口过程附加到不同的窗口句柄，该窗口由您调用创建的`AllocateHWnd`.

一个简单的解决方法是覆盖`WndProc`in`TForm1`而不是使用`AllocateHWnd`.

```
// in your class declaration:
procedure WndProc(var Message: TMessage); override;

// the corresponding implementation:
procedure TForm1.WndProc(var Message: TMessage);
begin
  if Msg.Msg = WM_TOOTHUI then
  begin
    Caption := 'Message Recieved';
  end; 
  inherited;
end; 
```

或者正如 Mason 所说，您可以使用 Delphi 的特殊消息处理语法：

```
// in your class declaration:
procedure WMToothUI(var Message: TMessage); message WM_TOOTHUI;

// the corresponding implementation:
procedure TForm1.WMToothUI(var Message: TMessage);
begin
  Caption := 'Message Recieved';
end; 
```

也有可能`p.MainWindowHandle`甚至不是主窗口的句柄。如果您使用的是旧版本的 Delphi，则`p.MainWindowHandle`可能会找到应用程序的句柄，`Application.Handle`. 在这种情况下，您将需要`FindWindow`或`EnumWindows`在您的 C# 代码中找到所需的窗口。

此外，如果您在 Delphi 中使用十六进制声明消息常量，您的代码会更清晰：

```
WM_TOOTHUI = $AAAA; 
```

# javascript - ajax - Div 文本不变

> ID：14650824
> 
> 赞同：0
> 
> 时间：2013-02-01T16:32:28.487
> 
> 标签：javascript, xml, ajax, html

我是 AJAX 的新手，所以我在制作一个简单的 AJAX 程序时遇到了很多问题。我有一个按钮，我想做的是，当我单击它时，它下面的 div 的文本会发生变化。我尝试了很多次，但仍然找不到错误。

这是我的代码：

```
<html>
  <head>
    <script>
        function loadXMLDoc() {
            var xmlhttp;

            if(!window.XMLHttpRequest) {
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            } else {
                xmlhttp = new XMLHttpRequest();
            }

            xmlhttp.onReadyStateChange = function () {
                if(xmlhttp.readyState==2 && xmlhttp.status==200) {
                    document.getElementById('myDiv').innerHTML = xmlhttp.responseText;
                }
            };

            xmlhttp.open('GET', 'textfile.txt', true);
            xmlhttp.send();
        }
    </script>
  </head>
  <body>
    <button type="button" value="Click!" onClick="loadXMLDoc();">Hello World</button>
    <div id='myDiv'>hello!</div>
  </body>
</html> 
```

这是文本文件：

```
<p>My name is areeb siddiqui</p>
<p>My name is areeb siddiqui</p> 
```

**任何帮助，将不胜感激**

**提前致谢 ：）**

这也是我的网页： http: [//mytestingsite.site90.net/ajax/](http://mytestingsite.site90.net/ajax/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:37:05.093

更改此块：

```
if(xmlhttp.readyState==4 && xmlhttp.status==200) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:03:53.167

这应该对你有用..这就是我提出我的ajax请求的方式..非常相似

```
function loadXMLDoc() {
    var xmlhttp = null;

    if(!window.XMLHttpRequest) {
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    } else {
        xmlhttp = new XMLHttpRequest();
    }

    xmlhttp.open('GET', 'textfile.txt', true);
    xmlhttp.send();

    xmlhttp.onreadystatechange = function()
    {
        if(xmlhttp.readyState != 4 || xmlhttp.status != 200){return;}
        document.getElementById('myDiv').innerHTML = xmlhttp.responseText;
    }

} 
```

您的函数未更新的原因是因为`onreadystatechange`必须全部小写

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T17:10:51.747

check onreadystatechange

```
 xmlhttp.onreadystatechange = function () {
        if(xmlhttp.readyState==4 && xmlhttp.status==200) {
            document.getElementById('myDiv').innerHTML = xmlhttp.responseText;
        }
    }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T17:11:16.303

用 onreadystatechange 改变 onReadyStateChange 和用 xmlhttp.readyState==4 改变 xmlhttp.readyState==2

# jakarta-ee - Java EE MDB 电子邮件接收器示例

> ID：14650825
> 
> 赞同：2
> 
> 时间：2013-02-01T16:32:30.013
> 
> 标签：jakarta-ee, maven, jboss, seam, jakarta-mail

是否有 Java EE MDB 电子邮件接收器的基于 Maven（或 Ant）实现的示例？

我的意思是像[https://community.jboss.org/wiki/InboundJavaMail上描述的那样](https://community.jboss.org/wiki/InboundJavaMail)

但是，当我自己尝试实现这个时，我很容易陷入依赖地狱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T02:16:57.593

Java EE 6 SDK 包含一个“邮件连接器”示例程序。源代码在[这里](http://java.net/projects/glassfish-samples/sources/svn/show/trunk/ws/javaee6/connectors/apps/mailconnector)。它包括一个使用 JavaMail 的资源适配器和一个用于接收消息的 MDB。

# php - 如何将 UL 中的值转换为 PHP 中的关联数组

> ID：14650829
> 
> 赞同：0
> 
> 时间：2013-02-01T16:32:35.080
> 
> 标签：php, regex, arrays, strip-tags

我有一个这样的 ul 列表：

```
<ul>
    <li>                        
       <div class="time">18:45</div>
       <div class="info">description goes here</div>
       <div class="clearAll"></div>
    </li>

    <li>                        
       <div class="time">19:15</div>
       <div class="info">some info</div>
   <div class="clearAll"></div>
    </li>
</ul> 
```

我怎样才能把它变成这样的数组：

```
$array = array(
    1 => array('18:45','description goes here');
    1 => array('19:15','some info');
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:37:56.153

远离正则表达式。[`DOMDocument`](http://php.net/manual/en/class.domdocument.php)是你的朋友：

```
$dom = new DOMDocument;
$dom->loadHTML( $theHTMLstring );
$array = array();

foreach ( $dom->getElementsByTagName('li') as $li ) {

    $divs = $li->getElementsByTagName('div');

    $array[] = array(
        $divs->item(0)->textContent,
        $divs->item(1)->textContent
    );
} 
```

在此处查看实际操作：[http ://codepad.viper-7.com/5ExOqJ](http://codepad.viper-7.com/5ExOqJ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:41:20.370

通过不使用正则表达式：

```
$sx = new SimpleXMLElement($xml);

foreach ($sx->xpath('//li') as $node) {
   $time = current($node->xpath("div[@class='time']"));
   $time = "$time";

   $info = current($node->xpath("div[@class='info']"));
   $info = "$info";

   $data[] = array($time, $info);
} 
```

[http://codepad.viper-7.com/lo8k5c](http://codepad.viper-7.com/lo8k5c)

# powershell - 如何使用 Powershell 查找 API 调用返回的 XML 错误？

> ID：14650838
> 
> 赞同：0
> 
> 时间：2013-02-01T16:32:56.723
> 
> 标签：powershell, webclient, webrequest

我有一个我正在尝试测试的 API。API 返回有关错误的特定注释。

例子：

```
<errors>
    <error>distance.out.of.range</error>
</errors> 
```

在 Chrome 或 Firefox 中查询 API 时，我看到了这个 XML。

但是，当使用 IE 或 Powershell（WebClient 和 WebRequest）查询时，我只能看到“400”异常。我找不到深入研究异常的 XML。

用 try/catch 处理异常很好，但我错过了理解失败查询的细节。我怎样才能找到 XML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:15:21.827

尝试将调用的输出改组到一个对象中，并查看该对象是否具有包含错误的属性。

```
$MyApiCall = New-WebRequest 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:23:56.257

我认为您必须从异常对象中读取流

```
$req = [system.Net.WebRequest]::Create($url)
try {
    $res = $req.GetResponse()
} catch [System.Net.WebException] {
    $res = $_.Exception.Response
} 
```

$res 将有一个名为 GetResponseStream() 的方法，您可以使用它来读取数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T22:02:04.653

我建议你抓住[Fiddler](http://www.fiddler2.com/fiddler2/)并检查来自 Chrome 的请求，然后检查来自 PowerShell 的失败请求。这可能只是提供正确标题的问题。

# reporting-services - Reporting Services 2005：矩阵加表没有预期的宽度

> ID：14650839
> 
> 赞同：0
> 
> 时间：2013-02-01T16:33:02.177
> 
> 标签：reporting-services, rendering

我对包含矩阵和右侧表格的报告有疑问。矩阵包含 13 列，表包含 1 列。这些列的设计使得在交互式视图中，它们的组合宽度为 26.5 厘米：5.5 厘米 + 12 * 1.5 厘米 + 3 厘米，适合 DinA4 页面。

该报告在 Internet Explorer 9 中正确呈现，但在我使用的所有其他浏览器（FF、Opera、Safari，几乎都是最新的）中，矩阵非常纤细，仅拉伸了大约一半的页面。

如果没有矩阵的表格，所有浏览器中的一切都会很好地呈现。
在元素周围使用矩形没有帮助。

有没有人可能有类似的问题？我使用 Reporting Services 2005。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:12:32.557

SSRS 2005 和 ReportViewer 版本 9 的渲染在非 IE 浏览器中非常糟糕。[MSDN 建议使用 IE 6 或 7](http://msdn.microsoft.com/en-us/library/ms156511%28v=sql.90%29.aspx)来查看报告。

从 VS2010 和 ReportViewer 版本 10 开始，[浏览器支持改进了](http://msdn.microsoft.com/en-us/library/ms251673%28v=vs.100%29.aspx)……很多。我认为升级确实是您唯一的选择（没有告诉您的用户坚持使用 IE）。

您还没有告诉我们您的用户是*如何*查看报告的：通过网络管理器、ReportViewer 还是其他方式？如果是通过 ReportViewer，AFAIK，您也可以将 10.0.0.0 控件连接到 SSRS 2005。

# logging - 如何在 Flashbuilder 4.7 中记录或跟踪数据

> ID：14650842
> 
> 赞同：0
> 
> 时间：2013-02-01T16:33:11.260
> 
> 标签：logging, flex4, flash-builder, trace

我正在使用 Flashbuilder 4.7。我试图弄清楚如何拥有某种登录功能，而无需安装 Flash 的调试版本（它总是让 Flash 在我的系统上像垃圾一样运行）。我发现[这篇](http://livedocs.adobe.com/flex/3/html/help.html?content=logging_09.html)关于在 flex 中使用登录功能的文章。但是当我添加代码时

导入 mx.logging。*; 导入 mx.logging.targets。*;

flex 不识别类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:56:14.623

您的导入语句应在末尾包含通配符 (*)，或您希望导入的确切类名。

所以代替这个：

```
import mx.logging.;
import mx.logging.targets.; 
```

你应该做这个：

```
import mx.logging.*;
import mx.logging.targets.*; 
```

或者：

```
import mx.logging.Log;
import mx.logging.targets.TraceTarget; 
```

最后，如果没有调试 Flash Player，这些类将不会那么有用。例如，如果您使用`TraceTarget`（默认），它将通过该`trace()`方法将输出记录到您的控制台。常规 Flash Player 不会连接到控制台，因此您不会看到任何输出。

Flash Player 的可调试版本比普通的 Flash Player 慢，但它从来没有像我不能或不想使用它那样慢。没有它，我不会在 Flash 中编码。在您的代码中发生的常规 Flash Player 异常将静默发生，您可能会错过代码中的错误。在调试版本中，当异常发生时会弹出一个带有堆栈跟踪的对话框，因此您会立即注意到 :)

有一件事会使 Flash Player 的调试版本非常慢，那就是如果您[启用日志记录到磁盘](http://livedocs.adobe.com/flex/3/html/help.html?content=logging_04.html)。除非您绝对需要它，否则不要这样做（它有时几乎无法使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:06:07.877

我最终使用了[Monster Debugger](http://demonsterdebugger.com/)，我发现它很容易集成到项目中，并且界面很好。

# python - django 测试用例发布数据

> ID：14650843
> 
> 赞同：0
> 
> 时间：2013-02-01T16:33:15.787
> 
> 标签：python, django, unit-testing

我想编写一个测试用例，用于将发布数据发送到登录页面。这没用。我在这里发布我的代码，希望你能帮助我。谢谢。

```
 def setUp(self):
    """set up"""
    un = 'abc@gmail.com'
    pw = '123'
    self.user = User.objects.create_user(un, un)
    self.user.is_staff = True
    self.user.is_superuser = True
    self.user.firstname = "John"
    self.user.lastname = "Smith"
    self.user.password = '123'
    self.user.save()
    print '*** password: ', self.user.password

def testPost(self):
    """test POST requests"""
    post_data = {
        'email': 'abc@gmail.com',
        'password': '123',
    }         

    response = self.client.post(reverse('myapp_home', post_data))        
    print response.status_code 
```

错误输出如下。

```
 ERROR: testPost (submngr.tests.model_tests.model_tests.FormsTestCase)
test POST requests
----------------------------------------------------------------------
Traceback (most recent call last):
  File "tests/model_tests/model_tests.py", line 117, in testPost
    response = self.client.post('/', post_data)
  File "/usr/local/lib/python2.7/dist-packages/django/test/client.py", line 449, in post
    response = super(Client, self).post(path, data=data, content_type=content_type, **extra)
  File "/usr/local/lib/python2.7/dist-packages/django/test/client.py", line 262, in post
    return self.request(**r)
  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 111, in get_response
    response = callback(request, *callback_args, **callback_kwargs)
  File "views.py", line 84, in homepage
    print results[0].check_password(form.cleaned_data['password'])
  File "/usr/local/lib/python2.7/dist-packages/django/contrib/auth/models.py", line 304, in check_password
    return check_password(raw_password, self.password, setter)
  File "/usr/local/lib/python2.7/dist-packages/django/contrib/auth/hashers.py", line 42, in check_password
    hasher = get_hasher(algorithm)
  File "/usr/local/lib/python2.7/dist-packages/django/contrib/auth/hashers.py", line 115, in get_hasher
    "setting?" % algorithm)
ValueError: Unknown password hashing algorithm '123'. Did you specify it in the PASSWORD_HASHERS setting? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:22:51.060

您已将用户密码直接存储为纯字符串`self.user.password = 123`，但 django 使用散列算法存储用户密码，这就是您收到错误的原因。您可以使用用户方法设置用户密码，该`set_password`方法将在保存之前应用哈希算法：

```
user.set_password('123')
user.save() 
```

# ruby-on-rails - 为什么在 Heroku slug 编译期间没有编译这个新的 CSS 清单文件，而普通的应用程序清单工作正常？

> ID：14650846
> 
> 赞同：3
> 
> 时间：2013-02-01T16:33:27.210
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, asset-pipeline

我有一个在 Heroku Cedar 堆栈上运行的 Rails 3.2.11。我不在本地编译资产，它们是在 slug 编译期间自动编译的，如此[处](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar#compiling-assets-during-slug-compilation)所述。`app/assets/stylesheets/new_manifest.css.scss`除了默认的`application.css.scss`. 当我推送到 Heroku 时，这个清单文件并没有像现在这样编译`application.css.scss`。新的清单文件在开发中运行良好。为什么会这样？

**应用程序.rb**

```
config.assets.enabled = true
config.assets.version = '1.0'
config.assets.initialize_on_precompile = false 
```

**生产.rb**

```
config.assets.compile = false
config.serve_static_assets = false
config.assets.compress = true
config.assets.digest = true 
```

**Heroku 推送的控制台输出**

```
-----> Preparing app for Rails asset pipeline
       Running: rake assets:precompile
       Asset precompilation completed (83.62s) 
```

**示例页面**

```
<%= stylesheet_link_tag "new_manifest", media: "all" %> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T17:11:34.153

解决方案是添加`config.assets.precompile += %w( new_manifest.css )`到 production.rb，如此[处](http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets)所述。这在开发中不是必需的，但在生产中是必需的，这引起了我的困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:46:52.437

如果你说你`new_manifest`是一个清单文件，它应该包含在应用程序的主清单中：`application.css`. 如果您包含它，`stylesheet_link_tag`它不受资产管道控制（它被视为纯 CSS 文件，而不是清单文件）。它也即将被预编译，但包含将被忽略。有一种更合适的方法可以将附加清单文件包含在主目录中`application.css`：[索引文件](http://guides.rubyonrails.org/asset_pipeline.html)（查找 2.1.2）。

# android - 在android上使用kso ap2发送字节数组

> ID：14650848
> 
> 赞同：1
> 
> 时间：2013-02-01T16:33:28.903
> 
> 标签：android, ksoap2

我正在尝试将图像从 android 设备上传到 WCF 服务。如果我发送一个小图像（大约 20kb），那么它工作正常。如果我发送稍微大一点的图像（大约 95kb），我会收到一个错误：

```
org.xmlpull.v1.XmlPullParserException: unexpected type (position:END_DOCUMENT null@1:1 in java.io.InputStreamReader@41636470) 
```

安卓代码是：

```
 byte[] fileContents = IOUtil.readFile(image.getFileName());
    request = new SoapObject(CommonFunctions.NAMESPACE, "SaveAttachment");
    envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); 
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);
    new MarshalBase64().register(envelope);
    androidHttpTransport = new HttpTransportSE(CommonFunctions.SERVICE_URL);

    request.addProperty("SomeProperty1", somevalue1);
    request.addProperty("SomeProperty2", somevalue2);
    PropertyInfo p1=new PropertyInfo();
    p1.setName("FileContents");
    p1.setType(MarshalBase64.BYTE_ARRAY_CLASS);
    p1.setValue(fileContents);
    request.addProperty(p1);
    androidHttpTransport.call(CommonFunctions.SOAP_ACTION + "SaveAttachment", envelope);
    int fileId = Integer.parseInt(envelope.getResponse().toString()); 
```

几秒钟后在 androidHttpTransport.call 行上抛出异常。我的 WCF 服务中的断点永远不会被命中。我提高了 WCF 绑定的请求限制：

```
 <basicHttpBinding>
    <binding name="MobileIntegrationBinding" messageEncoding="Text" allowCookies="true" maxReceivedMessageSize="2147483647" maxBufferSize="2147483647">
      <security mode="Transport" />
    </binding>
  </basicHttpBinding> 
```

KSOAP 将添加到属性的数据量是否有一些限制，如果是，有没有办法增加这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:36:40.593

啊，终于明白了。我的绑定和服务声明在 web.config 中都搞砸了，所以我对 maxReceivedMessageSize 等的更改没有任何效果，因为服务使用的是默认绑定而不是使用我的自定义绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-15T21:49:55.467

你需要压缩图像

```
String imageEncoded;
InputStream is = activity.getContentResolver().openInputStream(uri);
Bitmap img = BitmapFactory.decodeStream(is);
ByteArrayOutputStream convert = new ByteArrayOutputStream();
img.compress(Bitmap.CompressFormat.JPEG, 50, convert);
byte[] b = convert.toByteArray();
imageEncoded = Base64.encodeToString(b, Base64.DEFAULT); 
```

然后使用 Base64 no byte 进行转换。在 android 上仅转换为 byte aprox 50mb 不再

# javascript - 从 javascript 中的图像重定向中获取重定向 URL

> ID：14650856
> 
> 赞同：3
> 
> 时间：2013-02-01T16:34:19.633
> 
> 标签：javascript, html

假设我们有一个指向[http://example.com/photo.png](http://example.com/photo.png)的 img 标签。此调用导致 302 重定向到[http://example.com/path/to/my/photo.png](http://example.com/path/to/my/photo.png)。有没有一种方法可以从 javascript 中看到第二个地址，即图像被重定向到的地址？我假设这样的事情是不可能的，但很想知道它是否是。

**更新：**请注意，我说的是 IMG 标签。所有响应都假设我正在使用 ajax 请求。显然，正如您在上面所说的那样，情况并非如此。

# javascript - 对 JSON 和 Javascript 的安全性感到非常困惑（和担心）

> ID：14650862
> 
> 赞同：4
> 
> 时间：2013-02-01T16:34:40.947
> 
> 标签：javascript, json, security

一段时间以来，我一直在尝试对这个主题进行一些研究，甚至引用了以下 Stack Overflow 线程：

[Javascript 劫持 - 我应该担心什么时候以及担心多少](https://stackoverflow.com/questions/6777081/javascript-hijacking-when-and-how-much-should-i-worry)

[JSON 安全最佳实践](https://stackoverflow.com/questions/395592/json-security-best-practices/430189#430189)

但我的基本问题是这个。

当我构建我的 Web 应用程序时，我会使用 Fiddler、Chrome 开发者工具、Firebug 等工具。我会即时更改内容以进行测试。我什至可以使用 fiddler 来更改发送到服务器的数据。

是什么阻止其他人打开我的网页并这样做？如果用户只需按 F12 键并打开 Chrome 开发人员工具并更改通过网络发送的数据，那么世界上所有的 jQuery 验证都是无用的，对吗？

我在这个领域还是比较新的，这让我非常担心，因为我看到“开放”协议变得越来越普遍。我还不了解 SSL（这在我要开始研究的事情清单上），所以也许这就是答案，我只是还没有深入挖掘。**但是我**在操纵我的页面时所拥有的灵活性水平似乎非常极端——这让我非常担心恶意的人会做什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T16:36:15.593

你的担心确实是有道理的。这就是为什么您应该始终验证服务器上的所有内容。客户端验证应仅用于 UX。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:37:42.207

简而言之，JavaScript 的安全性基于受信任的服务器。如果您始终信任服务器发送给您的代码，那么它应该是安全的。第三方（如广告供应商）不可能从包含它的域中获取数据。

如果服务器还向您发送用户生成的内容，特别是用户生成的代码，那么您就有潜在的安全问题。这就是 XSS 攻击的重点（在受信任的环境中运行恶意脚本）。

客户端验证应侧重于易于使用，易于纠正错误或指导用户以免犯错误。服务器应始终进行验证，但验证更严格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T16:41:21.637

验证应该始终发生在服务器端，客户端验证只有为用户提供更方便的体验才有价值。您永远不能相信用户不会最终操纵数据。（Javascript 是客户端）

接下来，如果您想保护您的服务，以便只有 user1 可以编辑 user1 的个人资料，您需要使用 OAuth（或类似协议）对 JSON 请求进行签名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T16:36:46.903

是的，没有什么可以阻止任何人干扰从浏览器发送到您的服务器的数据，这就是您不应该信任它的原因
始终检查来自用户的数据的真实性和有效性

，您也可以检查并干扰像谷歌和微软这样的大网站发回的数据，你可能会有所了解。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T16:38:22.447

您必须假设客户端是恶意的——使用 SSL 根本无法阻止这种情况。所有数据验证和授权检查都需要在服务器端完成。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T16:42:39.360

Javascript 不会成为您抵御黑客的唯一防线，事实上它根本不应该用于安全性。客户端代码可用于验证表单输入，以便尝试使用页面的用户可以有更快的响应时间，并且页面运行良好。任何试图破解您的页面的人都不会关心您的页面是否有效。无论如何，进入您服务器的所有内容都应该经过验证，并且永远不要认为是安全的。

# php - 无法将 msSQL 列名放入数组

> ID：14650873
> 
> 赞同：0
> 
> 时间：2013-02-01T16:35:30.367
> 
> 标签：php

我正在尝试将 msSQL 表的列名放入数组中。使用

```
for ($i = 0; $i < mssql_num_fields($result); ++$i) {
    echo mssql_field_name($result) . "<br><br>";
} 
```

列名打印到屏幕上就好了。还`get_type()`表明它们是字符串。但是，当我尝试将它们放入这样的数组时：

```
$column_names = array();
for ($i = 0; $i < mssql_num_fields($result); ++$i) {
     $current_column = mssql_field_name($result);
     array_push($column_names, $current_column);
} 
```

`var_dump($column_names);`给了我一个布尔值的数组（尽管是预期的长度）。都是假的。我希望看到一个包含我所有列的名称的数组。我在这里做错了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:43:51.420

看起来你错过了电话中的`$i`论点`mssql_field_name`。试试这个也许：

```
$column_names = array();
for ($i = 0; $i < mssql_num_fields($result); ++$i) {
    $column_names[] = mssql_field_name($result, $i);
} 
```

[http://php.net/manual/en/function.mssql-field-name.php](http://php.net/manual/en/function.mssql-field-name.php)

# image - 根据屏幕大小旋转图像

> ID：14650878
> 
> 赞同：2
> 
> 时间：2013-02-01T16:35:51.397
> 
> 标签：image, twitter-bootstrap, rotation, responsive-design

我试图弄清楚如何根据屏幕尺寸旋转 div 中的图像。

基本上有这样的设置：

```
<div> <div with arrow pointing right > <div> 
```

在流畅的行（引导程序）中，我需要将箭头图像旋转 90 度到向下位置，因为在移动设备中时 div 会堆叠。

我考虑过使用空白`<div>`和背景图像以及媒体查询来更改图像，但是必须有一个`<div>`设置像素尺寸的空白并不是很好（或者是吗？）。

另一个想法是在`<img>`里面有一个箭头，`<div>`并且可能使用 jQuery 来根据屏幕大小旋转它，但似乎是 OTT，并且可能超出我的理解如何去做。

任何建议或提示都会受到欢迎。也许我错过了一些非常简单的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T16:49:00.360

@Stuart 的解决方案效果很好——这是使用 CSS 的另一种可能性。这不一定是一个更好的答案，只是不同。

[http://jsfiddle.net/panchroma/u4zWp/](http://jsfiddle.net/panchroma/u4zWp/)

**HTML**

```
<img src="../image1.jpg" class="rotateMobile"> 
```

**CSS**

```
@media (max-width: 480px) {

.rotateMobile{
transform:rotate(90deg);
-ms-transform:rotate(90deg); /* IE 9 */
-moz-transform:rotate(90deg); /* Firefox */
-webkit-transform:rotate(90deg); /* Safari and Chrome */
-o-transform:rotate(90deg); /* Opera */
}
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T13:58:32.993

如果您使用两个不同的图像创建两个独立的相同元素，您可以将一个设置为以一种尺寸显示并隐藏另一个，反之亦然。

例如：

**html**

```
<img class="arrow" src="arrow.png" />
<img class="arrow90" src="arrow90.png" /> 
```

**CSS**

```
.arrow{display:block;}
.arrow90{display:none;}

@media handheld, only screen and (max-width: 491px) {
    .arrow{display:none;}
    .arrow90{display:block;}
} 
```

# c++ - C ++将指针指针设置为null？

> ID：14650883
> 
> 赞同：1
> 
> 时间：2013-02-01T16:36:19.743
> 
> 标签：c++, pointers

我正在研究某种智能指针技术，但我缺少一件。我尝试了几种组合，但逻辑如下：

```
UInt *obj = new UInt;
UInt *ref;
ref = obj;

delete obj;
obj = NULL;

if (ref == NULL)
{
    // It works
}
else
{
    // It failed
} 
```

有没有办法在不明确将 ref 设置为 NULL 的情况下点击“It Works”？

编辑：

更合适的场景是这样的：

```
class A
{
public:

    A(): ref(NULL) {}
    ~A()
    {
        if (ref != NULL)
            delete ref;
    }
    int *ref;
};

    int *obj = new int;
    A *host = new A();

    host->ref = obj; ???

    delete obj;
      obj = NULL;

    if (host->ref == NULL)
    {
        // It works.
    }
    else
    {
        // It failed.
    } 
```

...

虽然不能使用 int*& ref 作为类成员.... 必须关闭。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:47:08.560

正如您所说，您应该使用智能指针：

```
#include <memory>

std::shared_ptr<UInt> obj = std::make_shared<UInt>();
std::weak_ptr<UInt> ref = obj;

obj.reset();

if (ref.expired())
{
    // It works
}
else
{
    // It failed
} 
```

当标准库为您提供便利时，不要尝试管理您自己的内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T16:39:52.903

将 ref 声明为对指针的引用

```
Uint*& ref = obj; 
```

ref 现在将引用 obj 指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T16:41:49.593

最初两者`obj`和都`ref`指向（相同的）`UInt`实例。然后删除实例并设置`obj`为`NULL`. 但是`ref`就像任何其他常规指针一样，它仍然指向已删除的实例。

`&`相反，您可以通过添加到声明中来创建引用变量，或者在这种情况下为“引用指针” ：

```
Uint*& ref = obj; 
```

然后`ref`真正引用`obj`并保持与 相同的值（指针）`obj`。

# c++ - 如何使用 C++ 11 创建计时器事件？

> ID：14650885
> 
> 赞同：57
> 
> 时间：2013-02-01T16:36:22.773
> 
> 标签：c++, c++11

如何使用 C++ 11 创建计时器事件？

我需要类似：“从现在起 1 秒后给我打电话”。

有图书馆吗？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-02-02T18:46:57.043

对我认为您想要实现的目标进行了简单的实现。您可以使用`later`具有以下参数的类：

*   int（等待运行代码的毫秒数）
*   bool（如果为 true，则立即返回并在指定时间后在另一个线程上运行代码）
*   可变参数（正是您提供给[std::bind](http://en.cppreference.com/w/cpp/utility/functional/bind)的内容）

* * *

您可以更改`std::chrono::milliseconds`为`std::chrono::nanoseconds`甚至`microseconds`更高的精度，并添加第二个 int 和一个 for 循环来指定运行代码的次数。

来吧，享受：

```
#include <functional>
#include <chrono>
#include <future>
#include <cstdio>

class later
{
public:
    template <class callable, class... arguments>
    later(int after, bool async, callable&& f, arguments&&... args)
    {
        std::function<typename std::result_of<callable(arguments...)>::type()> task(std::bind(std::forward<callable>(f), std::forward<arguments>(args)...));

        if (async)
        {
            std::thread([after, task]() {
                std::this_thread::sleep_for(std::chrono::milliseconds(after));
                task();
            }).detach();
        }
        else
        {
            std::this_thread::sleep_for(std::chrono::milliseconds(after));
            task();
        }
    }

};

void test1(void)
{
    return;
}

void test2(int a)
{
    printf("%i\n", a);
    return;
}

int main()
{
    later later_test1(1000, false, &test1);
    later later_test2(1000, false, &test2, 101);

    return 0;
} 
```

两秒后输出：

```
101 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-10-04T17:59:31.967

Edward 的异步解决方案：

*   创建新线程
*   睡在那条线
*   在该线程中执行任务

很简单，可能只适合你。

我还想提供一个更高级的版本，它具有以下优点：

*   没有线程启动开销
*   每个进程只需要一个额外的线程来处理所有定时任务

这在大型软件项目中可能特别有用，在这些项目中，您在流程中重复执行许多任务并且您关心资源使用（线程）以及启动开销。

想法：拥有一个服务线程来处理所有已注册的定时任务。为此使用 boost io_service。

代码类似于： http: [//www.boost.org/doc/libs/1_65_1/doc/html/boost_asio/tutorial/tuttimer2/src.html](http://www.boost.org/doc/libs/1_65_1/doc/html/boost_asio/tutorial/tuttimer2/src.html)

```
#include <cstdio>
#include <boost/asio.hpp>
#include <boost/date_time/posix_time/posix_time.hpp>

int main()
{
  boost::asio::io_service io;

  boost::asio::deadline_timer t(io, boost::posix_time::seconds(1));
  t.async_wait([](const boost::system::error_code& /*e*/){
    printf("Printed after 1s\n"); });

  boost::asio::deadline_timer t2(io, boost::posix_time::seconds(1));
  t2.async_wait([](const boost::system::error_code& /*e*/){
    printf("Printed after 1s\n"); });

  // both prints happen at the same time,
  // but only a single thread is used to handle both timed tasks
  // - namely the main thread calling io.run();

  io.run();

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-10-29T04:52:03.153

使用[RxCpp](https://github.com/ReactiveX/RxCpp) ,

```
std::cout << "Waiting..." << std::endl;
auto values = rxcpp::observable<>::timer<>(std::chrono::seconds(1));
values.subscribe([](int v) {std::cout << "Called after 1s." << std::endl;}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-04T17:09:00.000

这是我到目前为止的代码：

我正在使用 VC++ 2012（没有可变参数模板）

```
//header
#include <thread>
#include <mutex>
#include <condition_variable>
#include <vector>
#include <chrono>
#include <memory>
#include <algorithm>

template<class T>
class TimerThread
{
  typedef std::chrono::high_resolution_clock clock_t;

  struct TimerInfo
  {
    clock_t::time_point m_TimePoint;
    T m_User;

    template <class TArg1>
    TimerInfo(clock_t::time_point tp, TArg1 && arg1)
      : m_TimePoint(tp)
      , m_User(std::forward<TArg1>(arg1))
    {
    }

    template <class TArg1, class TArg2>
    TimerInfo(clock_t::time_point tp, TArg1 && arg1, TArg2 && arg2)
      : m_TimePoint(tp)
      , m_User(std::forward<TArg1>(arg1), std::forward<TArg2>(arg2))
    {
    }
  };

  std::unique_ptr<std::thread> m_Thread;
  std::vector<TimerInfo>       m_Timers;
  std::mutex                   m_Mutex;
  std::condition_variable      m_Condition;
  bool                         m_Sort;
  bool                         m_Stop;

  void TimerLoop()
  {
    for (;;)
    {
      std::unique_lock<std::mutex>  lock(m_Mutex);

      while (!m_Stop && m_Timers.empty())
      {
        m_Condition.wait(lock);
      }

      if (m_Stop)
      {
        return;
      }

      if (m_Sort)
      {
        //Sort could be done at insert
        //but probabily this thread has time to do
        std::sort(m_Timers.begin(),
                  m_Timers.end(),
                  [](const TimerInfo & ti1, const TimerInfo & ti2)
        {
          return ti1.m_TimePoint > ti2.m_TimePoint;
        });
        m_Sort = false;
      }

      auto now = clock_t::now();
      auto expire = m_Timers.back().m_TimePoint;

      if (expire > now) //can I take a nap?
      {
        auto napTime = expire - now;
        m_Condition.wait_for(lock, napTime);

        //check again
        auto expire = m_Timers.back().m_TimePoint;
        auto now = clock_t::now();

        if (expire <= now)
        {
          TimerCall(m_Timers.back().m_User);
          m_Timers.pop_back();
        }
      }
      else
      {
        TimerCall(m_Timers.back().m_User);
        m_Timers.pop_back();
      }
    }
  }

  template<class T, class TArg1>
  friend void CreateTimer(TimerThread<T>& timerThread, int ms, TArg1 && arg1);

  template<class T, class TArg1, class TArg2>
  friend void CreateTimer(TimerThread<T>& timerThread, int ms, TArg1 && arg1, TArg2 && arg2);

public:
  TimerThread() : m_Stop(false), m_Sort(false)
  {
    m_Thread.reset(new std::thread(std::bind(&TimerThread::TimerLoop, this)));
  }

  ~TimerThread()
  {
    m_Stop = true;
    m_Condition.notify_all();
    m_Thread->join();
  }
};

template<class T, class TArg1>
void CreateTimer(TimerThread<T>& timerThread, int ms, TArg1 && arg1)
{
  {
    std::unique_lock<std::mutex> lock(timerThread.m_Mutex);
    timerThread.m_Timers.emplace_back(TimerThread<T>::TimerInfo(TimerThread<T>::clock_t::now() + std::chrono::milliseconds(ms),
                                      std::forward<TArg1>(arg1)));
    timerThread.m_Sort = true;
  }
  // wake up
  timerThread.m_Condition.notify_one();
}

template<class T, class TArg1, class TArg2>
void CreateTimer(TimerThread<T>& timerThread, int ms, TArg1 && arg1, TArg2 && arg2)
{
  {
    std::unique_lock<std::mutex> lock(timerThread.m_Mutex);
    timerThread.m_Timers.emplace_back(TimerThread<T>::TimerInfo(TimerThread<T>::clock_t::now() + std::chrono::milliseconds(ms),
                                      std::forward<TArg1>(arg1),
                                      std::forward<TArg2>(arg2)));
    timerThread.m_Sort = true;
  }
  // wake up
  timerThread.m_Condition.notify_one();
}

//sample
#include <iostream>
#include <string>

void TimerCall(int i)
{
  std::cout << i << std::endl;
}

int main()
{
  std::cout << "start" << std::endl;
  TimerThread<int> timers;

  CreateTimer(timers, 2000, 1);
  CreateTimer(timers, 5000, 2);
  CreateTimer(timers, 100, 3);

  std::this_thread::sleep_for(std::chrono::seconds(5));
  std::cout << "end" << std::endl;
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-04-21T04:22:43.927

如果您在 Windows 上，则可以使用[CreateThreadpoolTimer](https://msdn.microsoft.com/en-us/library/windows/desktop/ms682466(v=vs.85).aspx)函数来安排回调，而无需担心线程管理并且不会阻塞当前线程。

```
template<typename T>
static void __stdcall timer_fired(PTP_CALLBACK_INSTANCE, PVOID context, PTP_TIMER timer)
{
    CloseThreadpoolTimer(timer);
    std::unique_ptr<T> callable(reinterpret_cast<T*>(context));
    (*callable)();
}

template <typename T>
void call_after(T callable, long long delayInMs)
{
    auto state = std::make_unique<T>(std::move(callable));
    auto timer = CreateThreadpoolTimer(timer_fired<T>, state.get(), nullptr);
    if (!timer)
    {
        throw std::runtime_error("Timer");
    }

    ULARGE_INTEGER due;
    due.QuadPart = static_cast<ULONGLONG>(-(delayInMs * 10000LL));

    FILETIME ft;
    ft.dwHighDateTime = due.HighPart;
    ft.dwLowDateTime = due.LowPart;

    SetThreadpoolTimer(timer, &ft, 0 /*msPeriod*/, 0 /*msWindowLength*/);
    state.release();
}

int main()
{
    auto callback = []
    {
        std::cout << "in callback\n";
    };

    call_after(callback, 1000);
    std::cin.get();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-12T03:13:23.367

我正在寻找一个简单的解决方案，但我发现的一切都太长太复杂了。阅读文档后，我发现只需几行代码即可完成。

这个问题可能很老，但对未来的研究人员可能是有益的。

**示例：**如果要停止线程，请设置`isContinue`为。`false`

```
#include <chrono>
#include <thread>

volatile bool isContinue = true;

void NameOfYourFunction(){
  while(continue){
     std::this_thread::sleep_for(std::chrono::milliseconds(1000)); //sleep for 1 seconds
     //do something here after every 1 seconds...
  }
}

int main(){
  std::thread your_thread(NameOfYourFunction); // Register your `YourFunction`.
  your_thread.detach(); // this will be non-blocking thread.
  //your_thread.join(); // this will be blocking thread.
} 
```

使用`detach()`或`join()`根据您的情况。

*   使用`detach()`时，执行主线程继续运行。
*   使用`join()`时，执行主线程暂停并等待，直到新线程结束。

# javascript - 引导响应式布局中的 Ytplayer

> ID：14650887
> 
> 赞同：2
> 
> 时间：2013-02-01T16:36:36.403
> 
> 标签：javascript, twitter-bootstrap, responsive-design

[我有一个画廊，可以从http://ajax.googleapis.com/ajax/libs/swfobject/2/swfobject.js](http://ajax.googleapis.com/ajax/libs/swfobject/2/swfobject.js)将视频加载到 ytplayer 中，我的问题是，如何让它响应？

现在，每个屏幕尺寸都有多个播放器，但问题是，我需要它们加载从画廊链接的视频，除了第一个播放器之外，它根本不起作用。我也试过给它们命名，然后为每一个使用不同的加载视频，

```
 <div class="span3"> <a href="#ytplayer" onClick="ytplayer_loadvideo( 'YOUTUBEID' );ytplayer2_loadvideo( 'YOUTUBEID' );ytplayer3_loadvideo( 'YOUTUBEID' );"><img src="http://i2.ytimg.com/vi/YOUTUBEID/mqdefault.jpg" alt="name" /> 
```

但它似乎并没有超越找不到第一个播放器的错误（TypeError：Object # has no method 'loadVideoById'）。

他们可以在仅针对一名玩家的手动命令下正常工作`ytplayer3_loadvideo('YOUTUBEID');`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:13:36.473

于是我想出了一个办法。

如果有人好奇，我只是为每个播放器制作了带有单个命令的单独视频列表。例如，在分辨率 A 上，它显示 ytplayerA 和 listA，在分辨率 B 上，显示 ytplayerB 和 listB 等等。

是的，它又大又重，但它可以根据需要工作。

# java - 将 Char 更改为具有相同位结构的短字符。（2的补码问题）

> ID：14650889
> 
> 赞同：0
> 
> 时间：2013-02-01T16:36:38.010
> 
> 标签：java, char, bit-manipulation, short

我想将 Char 更改为具有相同位结构的 short 。两者都是16位

我知道，如果它们是我可以使用的 1s 补码，那么 short 是 2s 补码

```
if a < 0 {return (short) math.abs a + 2 ^ 15;} else {return (short) a;} //right? 
```

我如何做到这一点，以 2s 补负？

我只是希望能够像操纵 Integer 一样操纵 Char 的内部结构。

如果答案只是添加一个，我会变得情绪化:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T16:39:40.920

简单的解决方案是

```
char ch = ...
short s = (short) ch;
char ch2 = (char) s;
// ch == ch2 
```

也许你想象它必须比它更复杂；）

> 我只是希望能够像操纵 Integer 一样操纵 Char 的内部结构。

在那种情况下，你甚至不需要 a `short`，你想要一个`int`更简单的。

例如

```
// sum all the chars of a string
String s = "Hello World";
int sum = 0;
for(char ch: s.toCharArray())
    sum += ch; 
```

> 如果答案只是加一个，我会变得情绪化

不，甚至更少。:j

顺便说一句，你可以做

```
char ch = 'A';
int i = ch + 0;
int j = ch; 
```

# php - 在页面 url 和页面上使用 xml 属性 id

> ID：14650894
> 
> 赞同：0
> 
> 时间：2013-02-01T16:36:50.960
> 
> 标签：php, xml, arrays, simplexml

我通过 xml 提要提取有关体育赛事的数据，我使用 simplexml 来执行此操作。到目前为止，我得到了一个`foreach`循环，循环遍历所有事件并将它们作为包含在`<a>`标签中的事件名称列表回显，指向页面**event.php?=id**（id 由名为 id 的 events 属性确定）。

要做到这一点，我正在使用

```
<?php
    $xml = simplexml_load_file("openbet_cdn.xml");
    foreach($xml->response->williamhill->class->type->market as $market) {
        $market_attributes = $market->attributes();
        printf("<a href=\"event.php?id=%s\">%s</a>\n", 
                    $market_attributes->id, 
                    $market_attributes->name);
    }
?> 
```

我使用的提要是[http://whdn.williamhill.com/pricefeed/openbet_cdn?action=template&template=getHierarchyByMarketType&classId=5&marketSort=HH&filterBIR=N](http://whdn.williamhill.com/pricefeed/openbet_cdn?action=template&template=getHierarchyByMarketType&classId=5&marketSort=HH&filterBIR=N)

我遇到的问题是在我的页面 event.php 上，我不断收到显示的 xml 提要中的第一个事件。为此，我使用：

```
<?php 
  foreach ($xml->response->williamhill->class->type->market->participant as $participant) {   
  $participant_attributes = $participant->attributes();  

    echo "<tr>";
      // EVENT NAME
      echo "<td>";
        echo "<a href=".$market_attributes['url'].">";
        echo $participant_attributes['name'];//participants name
        echo "</a>";
      echo"</td>";

      //ODDS
      echo "<td>";
        echo $participant_attributes['odds'];
      echo "</td>"; 
    echo "</tr>";
  } 
?> 
```

我明白为什么是因为我没有引用事件页面 URL 中的 id。但我不太确定如何做到这一点，知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:53:31.650

您只需要`if`在循环中添加一个，以便您只定位与查询字符串中的事件 ID 匹配的事件 ID。还需要一个嵌套循环，因为您想遍历每个市场以找到匹配的`id`，然后遍历其每个参与者。

```
 foreach ($xml->response->williamhill->class->type->market as $market) {   

    if($market->attributes()->id == $_GET['id']) {

        foreach($market->participant as $participant) {
            $participant_attributes = $participant->attributes();  

            echo "<tr>";
              // EVENT NAME
              echo "<td>";
                echo "<a href=".$market->attributes()->url.">";
                echo $participant_attributes['name'];//participants name
                echo "</a>";
              echo"</td>";

              //ODDS
              echo "<td>";
                echo $participant_attributes['odds'];
              echo "</td>"; 
            echo "</tr>";
        }

        break; // <-- we've found the target and echo'ed it so no need to keep looping
    }
  } 
```

# linux - 启动 Tomcat

> ID：14650898
> 
> 赞同：1
> 
> 时间：2013-02-01T16:36:55.200
> 
> 标签：linux, shell, tomcat

我必须在服务器上使用同一个用户启动 2 个 tomcat 实例。我正在尝试在启动 tomcat 时设置不同的 CATALINA_BASE 但未使用此环境变量。

那是我使用的命令：

```
base0=/home/$INT/inst0
base1=/home/$INT/inst1
#...

su $INT -c "CATALINA_BASE=$base0;$cathome/bin/startup.sh"
su $INT -c "CATALINA_BASE=$base1;$cathome/bin/startup.sh" 
```

这就是我在控制台中看到的：

```
Using CATALINA_BASE:   /home/mci2/tomcat
Using CATALINA_HOME:   /home/mci2/tomcat
Using CATALINA_TMPDIR: /home/mci2/tomcat/temp 
```

catalina_home 可以，但 catalina_base 不行。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:26:48.493

您应该使用单引号：

```
su -c "var=Hello; echo $var" 
```

对比

```
su -c 'var=Hello; echo $var' 
```

shell 解释双引号内的变量，并且如果您没有`CATALINA_BASE`为执行它的环境设置 ，则在实际执行*之前*`su`将其替换为空字符串。*`su`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-04T16:46:16.663

> 如果您在单个主机上运行多个 Tomcat 实例，则应将 CATALINA_BASE 设置为适合每个实例的 .../tomcat_instance1 或 .../tomcat_instance2 目录，并将 CATALINA_HOME 环境变量设置为其文件的通用 Tomcat 安装将在两个实例之间共享。 [tomcat - CATALINA_BASE 和 CATALINA_HOME 变量](https://stackoverflow.com/questions/3090398/tomcat-catalina-base-and-catalina-home-variables)*

# python - PyAudio ErrNo 输入溢出 -9981

> ID：14650900
> 
> 赞同：8
> 
> 时间：2013-02-01T16:36:57.917
> 
> 标签：python, pyaudio

我遇到了与用户相同的错误

[Python，使用 Pyaudio 以 16000Hz 录制错误音频](https://stackoverflow.com/questions/12994981/python-error-audio-recording-in-16000hz-using-pyaudio)

错误与下图中相同（行号除外）：

![这个链接](../Images/71376fd80680fa0c1c56f7b69f494d5a.png "错误")

在我写这篇文章时，我在[这个链接](https://stackoverflow.com/questions/10733903/pyaudio-input-overflowed)中找到了我的问题的解决方案。解决方案是将比特率提高到 48000。但我已经在 44100 “被批准”了

```
if p.is_format_supported(44100.0,  # Sample rate
    input_device=devinfo["index"],
    input_channels=devinfo['maxInputChannels'],
    input_format=pyaudio.paInt16):
print 'Yay!' 
```

有谁知道为什么我在 44100 被批准并且溢出但它在 48000 工作正常？（我也被批准了48000）。

通常我是那种得到解决方案并继续前进的人，但这一次，我觉得我需要知道。感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-15T08:26:54.770

请验证设备是否实际支持 44.1。即使设备声明它确实支持它，但它并不总是真正支持它。

# apache - 内部 mod_rewrite，无重定向

> ID：14650901
> 
> 赞同：4
> 
> 时间：2013-02-01T16:37:00.493
> 
> 标签：apache, .htaccess, mod-rewrite

我想在我的 .htaccess 文件中使用 mod_rewrite 从一个 URL 到另一个 URL 进行内部重定向。目前我知道如何使用以下内容执行外部重定向：

```
RewriteRule ^incoming-controller/action1.*$ http://example.com/incoming-controller/action2 [R=301,L] 
```

我希望这在内部发生，因此用户发布到 action1，而 apache 在内部为 action2 提供请求。这可能吗？我已经阅读了有关 [P] 标志和 mod_proxy 的信息，但我找不到太多关于如何正确使用它的文档，或者它在这种情况下是否有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T16:38:29.613

只需`R=301`从标志中删除。这就是导致外部重定向的原因。

您还不需要使用完整的 URL，例如[http://example.com](http://example.com)。只需使用要重定向到的资源的 URI。

# javascript - 为什么 javascript/jQuery 不能获取 parentNode？

> ID：14650904
> 
> 赞同：3
> 
> 时间：2013-02-01T16:37:27.923
> 
> 标签：javascript, jquery, html, click

考虑到我有这样的元素：

```
<p class="ELP">2/1/2013 - <a id="EL3" class="ELLink" href="/Event htms/Event.cshtml?title=Okmulgee Public Schools County Professional Day&amp;explanation=Okmulgee Public Schools County Professional Day.&amp;dateString=2-1-2013">City Public Schools County Professional Day</a></p> 
```

为什么这个 JavaScript/jQuery 工作...：

```
$(".ELP").click(function (){
        var stringDate = $(this).text().substring(0, 8)
        console.log(stringDate)
    }); 
```

**Console.log 产生：2/1/2013**

...而这个 JavaScript/jQuery 没有？

```
$(".ELLink").click(function (){
        var stringDate = $(this).parentNode.text().substring(0, 8)
        console.log(stringDate)
    }); 
```

**由于 JavaScript 错误，Console.log 没有产生任何结果：未捕获的类型错误：无法调用未定义的方法“文本”**

很明显，我可以看到它没有“获得”正确的元素，但为什么呢？我的“a”元素的第一个父节点不是“p”元素吗？据我了解，元素的直接父节点没有（至少没有跨浏览器/平台兼容）有效的 css 选择器，或者我只会使用它。

我没看到什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T16:39:46.933

jQuery 方法称为 parent()

```
$(".ELLink").click(function (){
        var stringDate = $(this).parent().text().substring(0, 8)
        console.log(stringDate)
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:39:46.287

因为 jQuery 对象没有 parentNode 属性。

```
var stringDate = $(this.parentNode).text().substring(0, 8); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:39:43.933

`$(...)`不返回 DOM 元素，它返回一个引用 DOM 节点的类数组对象。DOM 节点有`parentNode`. jQuery 实例没有。

如果您需要选择所选元素的直接父级，您可以使用[`parent()`](http://api.jquery.com/parent)：

```
$(this).parent().text()... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T16:40:15.850

为什么不使用：

```
var stringDate = $(this).parent().text().substring(0, 8) 
```

由于您已经在使用 jQuery，因此您可以使用[父](http://api.jquery.com/parent/)函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T16:40:36.473

你需要使用`parent()`not `parentNode`。像这样：

```
$(".ELLink").click(function (){
    var stringDate = $(this).parent().text().substring(0, 8)
    console.log(stringDate)
}); 
```

# android - 如何在 Android PreferenceActivity 中创建首选项标题组？

> ID：14650906
> 
> 赞同：26
> 
> 时间：2013-02-01T16:37:31.023
> 
> 标签：android, preferences

我正在使用首选项标题来使用`PreferenceActivity`. 我正在尝试将标题划分为类别/组，例如这个（有无线和网络、设备、个人等类别）：

![](../Images/95325491ee22a1d6214f5f3c6516c68f.png)

无论如何，即使那个 Android 开发者网站是关于这种创建偏好活动的方式，我也找不到任何方法来创建与图像上相同的偏好活动。我唯一能做的就是简单的首选项标题列表。

我唯一发现的是[这个](http://xgouchet.fr/android/index.php?article4/master-on-off-preferences-with-ice-cream-sandwich)，但这有点……奇怪。所以这似乎不是一种选择。

**所以我的问题是：如何`PreferenceActivity`使用首选项标头创建可以将标头划分为类别并可以使用主开/关开关的可能性？**

我的一些代码：

**首选项标题.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<preference-headers xmlns:android="http://schemas.android.com/apk/res/android">
    <header 
        android:fragment="cz.vse.myevents.activity.SettingsActivity$EventsFragment"
        android:title="@string/settings_events"
        android:icon="@android:drawable/ic_menu_agenda" />
    <header 
        android:fragment="cz.vse.myevents.activity.SettingsActivity$OrganizationsFragment"
        android:title="@string/settings_subscribed_organizations"
        android:icon="@android:drawable/ic_menu_view"  />
</preference-headers> 
```

**设置活动**：

```
@Override
public void onBuildHeaders(List<Header> target) {
    super.onBuildHeaders(target);
    loadHeadersFromResource(R.xml.preference_headers, target);
} 
```

我不是发布碎片资源，认为没有必要。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T10:10:58.667

这是偏好类别示例，您可以使用偏好类别并设置相应的片段并实现此目的，如果我误解了您的情况，请告诉我。

这是示例布局

```
<PreferenceCategory android:title="Heading1">
        <Preference 
            android:title="title1"
            android:summary="summary1"
            android:key="keyName"/>

       <Preference 
            android:title="title2"
            android:summary="summary2"
            android:key="keyName"/>
</PreferenceCategory>

<PreferenceCategory android:title="Heading2">
        <Preference 
            android:title="title3"
            android:summary="summary3"
            android:key="keyName"/>
</PreferenceCategory> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T15:01:08.950

似乎最好的解决方案是创建三个不同的代码块——一个用于蜂窝前，一个用于蜂窝后，一个用于平板电脑。

首选项标题的使用仅在平板电脑上有效，因此它们仅在平板电脑上保留。这里没有使用分组。

post-Honeycomb 上的首选项标题有点没用，所以最好是`PreferenceScreen`在`PreferenceFragment`. 组可以很容易地通过`PreferenceCategory`。

最后，对于 pre-Honeycomb，不使用的弃用方式`PrefrenceFragment`是唯一的方式。

可悲的是，有很多代码重复，但是`UnifiedPreference`Leandros 在回答中提到的库是错误的——它`PreferenceFragment`完全忽略了它，所以它没用（至少对我来说）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-10T13:25:00.000

[为了详细说明T. Folsom](https://stackoverflow.com/users/2066060/t-folsom)的答案，这是我的实现：

res/layout/preference_header_item.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="?android:attr/activatedBackgroundIndicator"
    android:baselineAligned="false"
    android:gravity="center_vertical"
    android:minHeight="48dp"
    android:paddingRight="?android:attr/scrollbarSize" >

    <LinearLayout
        android:layout_width="@dimen/header_icon_width"
        android:layout_height="wrap_content"
        android:layout_marginLeft="6dip"
        android:layout_marginRight="6dip" >

        <ImageView
            android:id="@+id/icon"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center" />
    </LinearLayout>

    <RelativeLayout
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_marginBottom="6dip"
        android:layout_marginLeft="2dip"
        android:layout_marginRight="6dip"
        android:layout_marginTop="6dip"
        android:layout_weight="1" >

        <TextView
            android:id="@+android:id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ellipsize="marquee"
            android:fadingEdge="horizontal"
            android:singleLine="true"
            android:textAppearance="?android:attr/textAppearanceMedium" />

       <TextView
            android:id="@+android:id/summary"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@android:id/title"
            android:ellipsize="end"
            android:maxLines="2"
            android:textAppearance="?android:attr/textAppearanceSmall" />
    </RelativeLayout>

</LinearLayout> 
```

res/values/dimens.xml

```
<resources>

    <dimen name="header_icon_width">28dp</dimen>

</resources> 
```

在您的 PreferenceActivity 类中：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {

    if (savedInstanceState != null) {
        /*
         *  the headers must be restored before the super call in order
         *  to be ready for the call to setListAdapter() 
         */
        if (savedInstanceState.containsKey("headers")) {
            setHeaders((ArrayList<Header>)savedInstanceState.getSerializable("headers"));
        }
    }

    // as suggest by https://stackoverflow.com/questions/15551673/android-headers-categories-in-preferenceactivity-with-preferencefragment
    if(onIsMultiPane()) getIntent().putExtra(PreferenceActivity.EXTRA_SHOW_FRAGMENT, PreferencesFragment.class.getName());

    super.onCreate(savedInstanceState);

    ...

}

@Override
protected void onResume() {
    super.onResume();

    // https://stackoverflow.com/questions/15551673/android-headers-categories-in-preferenceactivity-with-preferencefragment
    // Select the displayed fragment in the headers (when using a tablet) :
    // This should be done by Android, it is a bug fix
    if(getHeaders() != null) {

        final String displayedFragment = getIntent().getStringExtra(EXTRA_SHOW_FRAGMENT);
        if (displayedFragment != null) {
            for (final Header header : getHeaders()) {
                if (displayedFragment.equals(header.fragment)) {
                    switchToHeader(header);
                    break;
                }
            }
        }
    }

    ...

}

/**
 * Populate the activity with the top-level headers.
 */
@Override
public void onBuildHeaders(List<Header> target) {
    // we have to save the headers as the API call getHeaders() is hidden.
    setHeaders(target);
    loadHeadersFromResource(R.xml.settings_headers, target);
}

private List<Header> headers;

private void setHeaders(List<Header> headers) {
    this.headers = headers;
}

private List<Header> getHeaders() {
    return headers;
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    outState.putSerializable("headers", (ArrayList<PreferenceActivity.Header>)headers);
    super.onSaveInstanceState(outState);
}

@Override
public void setListAdapter(ListAdapter adapter) {
    if (adapter == null) {
        super.setListAdapter(null);
    } else {
        super.setListAdapter(new HeaderAdapter(this, getHeaders()));
    }
}

private static class HeaderAdapter extends ArrayAdapter<Header> {
    static final int HEADER_TYPE_CATEGORY = 0;
    static final int HEADER_TYPE_NORMAL = 1;
    private static final int HEADER_TYPE_COUNT = HEADER_TYPE_NORMAL + 1;

    private static class HeaderViewHolder {
        ImageView icon;
        TextView title;
        TextView summary;
    }

    private LayoutInflater mInflater;

    static int getHeaderType(Header header) {
        if (header.fragment == null && header.intent == null) {
            return HEADER_TYPE_CATEGORY;
        } else {
            return HEADER_TYPE_NORMAL;
        }
    }

    @Override
    public int getItemViewType(int position) {
        Header header = getItem(position);
        return getHeaderType(header);
    }

    @Override
    public boolean areAllItemsEnabled() {
        return false; // because of categories
    }

    @Override
    public boolean isEnabled(int position) {
        return getItemViewType(position) != HEADER_TYPE_CATEGORY;
    }

    @Override
    public int getViewTypeCount() {
        return HEADER_TYPE_COUNT;
    }

    @Override
    public boolean hasStableIds() {
        return true;
    }

    public HeaderAdapter(Context context, List<Header> objects) {
        super(context, 0, objects);

        mInflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        HeaderViewHolder holder;
        Header header = getItem(position);
        int headerType = getHeaderType(header);
        View view = null;

        if (convertView == null) {
            holder = new HeaderViewHolder();
            switch (headerType) {
            case HEADER_TYPE_CATEGORY:
                view = new TextView(getContext(), null,
                        android.R.attr.listSeparatorTextViewStyle);
                holder.title = (TextView) view;
                break;

            case HEADER_TYPE_NORMAL:
                view = mInflater.inflate(R.layout.preference_header_item,
                        parent, false);
                holder.icon = (ImageView) view.findViewById(R.id.icon);
                holder.title = (TextView) view
                        .findViewById(android.R.id.title);
                holder.summary = (TextView) view
                        .findViewById(android.R.id.summary);
                break;
            }
            view.setTag(holder);
        } else {
            view = convertView;
            holder = (HeaderViewHolder) view.getTag();
        }

        // All view fields must be updated every time, because the view may
        // be recycled
        switch (headerType) {
        case HEADER_TYPE_CATEGORY:
            holder.title.setText(header.getTitle(getContext()
                    .getResources()));
            break;
        case HEADER_TYPE_NORMAL:
            holder.icon.setImageResource(header.iconRes);
            holder.title.setText(header.getTitle(getContext()
                    .getResources()));
            CharSequence summary = header.getSummary(getContext()
                    .getResources());
            if (!TextUtils.isEmpty(summary)) {
                holder.summary.setVisibility(View.VISIBLE);
                holder.summary.setText(summary);
            } else {
                holder.summary.setVisibility(View.GONE);
            }
            break;
        }

        return view;
    }

} 
```

有了所有这些代码，创建标题很简单：

```
<preference-headers xmlns:android="http://schemas.android.com/apk/res/android" >
     <header android:title="atitle" />
</preference-headers> 
```

希望这可以帮助某人。我知道我花了一些时间才能正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-16T21:53:50.977

这实际上非常简单。根据我的发现，根本`PreferenceActivity`身不支持向其添加类别/部分标题，看来您只能添加`Header`s - 这不是很有趣。

因此，您首先需要做的不是自己做任何繁重的工作，`PreferenceActivity`而是直接加载`PreferenceFragment`：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setTitle("Settings");

    // Display the fragment as the main content.
    getFragmentManager().beginTransaction()
            .replace(android.R.id.content, new PreferencesFragment())
            .commit();

}

public static class PreferencesFragment extends PreferenceFragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        addPreferencesFromResource(R.xml.prefs);
    }
} 
```

完成此操作后，您现在可以完成所有工作`PreferenceFragment`，而且好消息是**您现在可以使用类别了**！

您的 R.xml.prefs 文件应如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
    <PreferenceCategory
        android:summary="Login credentials"
        android:title="Login credentials" >
        <EditTextPreference
            android:key="username"
            android:summary="Username"
            android:title="Username" />
        <EditTextPreference
            android:key="password"
            android:summary="Password"
            android:title="Password" />
    </PreferenceCategory>

    <PreferenceCategory
        android:summary="Settings"
        android:title="Settings" >
        <CheckBoxPreference
            android:key="persist"
            android:summary="Yes/No"
            android:title="Keep me signed in" />

    </PreferenceCategory>
</PreferenceScreen> 
```

只需`PreferenceCategory`为您要添加的每个新类别创建一个。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-13T11:56:46.253

AOSP settings_headers.xml 实现：

```
<preference-headers
        xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- WIRELESS and NETWORKS -->
    <header android:title="@string/header_category_wireless_networks" />

    <!-- Wifi -->
    <header
        android:id="@+id/wifi_settings"
        android:fragment="com.android.settings.wifi.WifiSettings"
        android:title="@string/wifi_settings_title"
        android:icon="@drawable/ic_settings_wireless" />

    <!-- Bluetooth -->
    <header
        android:id="@+id/bluetooth_settings"
        android:fragment="com.android.settings.bluetooth.BluetoothSettings"
        android:title="@string/bluetooth_settings_title"
        android:icon="@drawable/ic_settings_bluetooth2" />

    <!-- Data Usage -->
    <header
        android:id="@+id/data_usage_settings"
        android:fragment="com.android.settings.DataUsageSummary"
        android:title="@string/data_usage_summary_title"
        android:icon="@drawable/ic_settings_data_usage" />

    <!-- Operator hook -->
    <header
        android:fragment="com.android.settings.WirelessSettings"
        android:id="@+id/operator_settings">
        <intent android:action="com.android.settings.OPERATOR_APPLICATION_SETTING" />
    </header>

    <!-- Other wireless and network controls -->
    <header
        android:id="@+id/wireless_settings"
        android:title="@string/radio_controls_title"
        android:breadCrumbTitle="@string/wireless_networks_settings_title"
        android:fragment="com.android.settings.WirelessSettings"
        android:icon="@drawable/empty_icon" />

   <!-- Ethernet -->
   <header
        android:id="@+id/ethernet_settings"
        android:title="@string/eth_radio_ctrl_title"
        android:icon="@drawable/ic_settings_ethernet"
        android:fragment="com.android.settings.ethernet.EthernetSettings"/>

    <!-- DEVICE -->
    <header android:title="@string/header_category_device" />

    <!-- Sound -->
    <header
        android:id="@+id/sound_settings"
        android:icon="@drawable/ic_settings_sound"
        android:fragment="com.android.settings.SoundSettings"
        android:title="@string/sound_settings" />

    <!-- Display -->
    <header
        android:id="@+id/display_settings"
        android:icon="@drawable/ic_settings_display"
        android:fragment="com.android.settings.DisplaySettings"
        android:title="@string/display_settings" />

    <!-- Storage -->
    <header
        android:id="@+id/storage_settings"
        android:fragment="com.android.settings.deviceinfo.Memory"
        android:icon="@drawable/ic_settings_storage"
        android:title="@string/storage_settings" />

    <!-- Battery -->
    <header
        android:id="@+id/battery_settings"
        android:fragment="com.android.settings.fuelgauge.PowerUsageSummary"
        android:icon="@drawable/ic_settings_battery"
        android:title="@string/power_usage_summary_title" />

    <!-- Application Settings -->
    <header
        android:fragment="com.android.settings.applications.ManageApplications"
        android:icon="@drawable/ic_settings_applications"
        android:title="@string/applications_settings"
        android:id="@+id/application_settings" />

    <!-- TEMPORARY FACTORY STARTER WILL BE REMOVED WITH UPDATED SETTINGS -->
    <header
        android:icon="@drawable/ic_settings_applications"
        android:title="Factory"
        android:id="@+id/application_settings" >
        <intent android:action="android.intent.action.MAIN"
                android:targetPackage="com.jamdeo.tv.sample.factory"
                android:targetClass="com.jamdeo.tv.sample.factory.TvFactoryMainActivity" />
    </header>

    <!-- Manufacturer hook -->
    <header
        android:fragment="com.android.settings.WirelessSettings"
        android:id="@+id/manufacturer_settings">
        <intent android:action="com.android.settings.MANUFACTURER_APPLICATION_SETTING" />
    </header>

    <!-- PERSONAL -->
    <header android:title="@string/header_category_personal" />

    <!-- Data Sync. The settings activity will ensure this is resolved to an
         activity on the system image, otherwise it will remove this
         preference. -->
    <header
        android:fragment="com.android.settings.accounts.ManageAccountsSettings"
        android:icon="@drawable/ic_settings_sync"
        android:title="@string/sync_settings"
        android:id="@+id/sync_settings" />

    <!-- Location -->
    <header
        android:fragment="com.android.settings.LocationSettings"
        android:icon="@drawable/ic_settings_location"
        android:title="@string/location_settings_title"
        android:id="@+id/location_settings" />

    <!-- Security -->
    <header
        android:fragment="com.android.settings.SecuritySettings"
        android:icon="@drawable/ic_settings_security"
        android:title="@string/security_settings_title"
        android:id="@+id/security_settings" />

    <!-- Language -->
    <header
        android:id="@+id/language_settings"
        android:fragment="com.android.settings.inputmethod.InputMethodAndLanguageSettings"
        android:icon="@drawable/ic_settings_language"
        android:title="@string/language_settings" />

    <!-- Backup and reset -->
    <header
        android:fragment="com.android.settings.PrivacySettings"
        android:icon="@drawable/ic_settings_backup"
        android:title="@string/privacy_settings"
        android:id="@+id/privacy_settings" />

    <!-- SYSTEM -->
    <header android:title="@string/header_category_system" />

    <!-- Dock -->
    <header
        android:id="@+id/dock_settings"
        android:fragment="com.android.settings.DockSettings"
        android:icon="@drawable/ic_settings_dock"
        android:title="@string/dock_settings" />

    <!-- Date & Time -->
    <header
        android:id="@+id/date_time_settings"
        android:fragment="com.android.settings.DateTimeSettings"
        android:icon="@drawable/ic_settings_date_time"
        android:title="@string/date_and_time_settings_title" />

    <!-- Accessibility feedback -->
    <header
        android:id="@+id/accessibility_settings"
        android:fragment="com.android.settings.AccessibilitySettings"
        android:icon="@drawable/ic_settings_accessibility"
        android:title="@string/accessibility_settings" />

    <!-- Development -->
    <header
        android:id="@+id/development_settings"
        android:fragment="com.android.settings.DevelopmentSettings"
        android:icon="@drawable/ic_settings_development"
        android:title="@string/development_settings_title" />

    <!-- About Device -->
    <header
        android:id="@+id/about_settings"
        android:fragment="com.android.settings.DeviceInfoSettings"
        android:icon="@drawable/ic_settings_about"
        android:title="@string/about_settings" />

</preference-headers> 
```

`<header>`仅与`android:title`属性一起使用。

# python - Django 和 JSON

> ID：14650907
> 
> 赞同：0
> 
> 时间：2013-02-01T16:37:33.187
> 
> 标签：python, django, json, dojo

我正在寻找在 Django 中创建以下 JSON（我正在使用 a [`DataGrid`](http://dojotoolkit.org/reference-guide/1.6/dojox/grid/example_grid_styling_rows.html)）：

```
{
    identifier: 'id',
    label: 'name',
    items: [
            { id: 'AF', name:'Africa', type:'continent', population:'900 million', area: '30,221,532 sq km',
                    timezone: '-1 UTC to +4 UTC',
                    children:[{_reference:'EG'}, {_reference:'KE'}, {_reference:'SD'}] },
                { id: 'EG', name:'Egypt', type:'country' },
                { id: 'BR', name:'Brazil', type:'country', population:'186 million' },
                { id: 'AR', name:'Argentina', type:'country', population:'40 million' }
]} 
```

我现在正在做这样的事情：

```
filesJson = []
for index,lv in enumerate(letterList):
    printed = ''
    if lv.letter.received:
        inout = '<span class="..."></span>'
    else:
        inout = '<span class="..."></span>'
    if lv.printed_last:
        printed = '<span class="..."></span>'
    filesJson.append({'id':str(index),
                      'letterID':lv.letter.id,
                      'position':str(index).zfill(4),
                      'inout':inout,
                      'dateH':lv.humanReadableCreated(),
                      'date':lv.created.strftime('%d/%m/%y'),
                      'time':lv.created.strftime('%H:%M'),
                      'user':lv.created_by.username,
                      'name':lv.name(),
                      'printed':printed})

finalJson = {}
finalJson['id'] = 'id'
finalJson['label'] = 'name'
finalJson['items'] = filesJson
return HttpResponse(simplejson.dumps(finalJson), mimetype="application/json") 
```

我不断得到`list indices must be integers, not str`。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T16:39:17.143

你有错别字...

```
finalJson = [] 
```

应该

```
finalJson = {} 
```

# asp.net-mvc - Mvc 4 代理服务器/控制器

> ID：14650912
> 
> 赞同：0
> 
> 时间：2013-02-01T16:37:42.360
> 
> 标签：asp.net-mvc, proxy

我正在尝试实现 Jonathon Kresner “Asp .net Mvc 4 代理服务器/控制器（有关跨域请求的帮助）” [https://gist.github.com/jkresner/3982746](https://gist.github.com/jkresner/3982746)。

谁能指出如何从jquery调用它？

与文章[gist.github.com/jkresner](http://gist.github.com/jkresner)的 coffescript 调用让我感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:20:31.153

咖啡脚本基本上说，对于自己无法连接到远程 URL 的客户端，将指定的远程 URL 引用（即[http://api.othersite.com/Widget/7](http://api.othersite.com/Widget/7)）替换为对[http://的引用myoriginalpagehost.com/proxy](http://myoriginalpagehost.com/proxy)并让服务器端将[http://myoriginalpagehost.com/proxy](http://myoriginalpagehost.com/proxy) URI 中的内容代理到[http://api.othersite.com/Widget/7](http://api.othersite.com/Widget/7) URL。

关于该代理需要注意的一件事是，似乎缓存控制机制可能会被破坏，从而导致潜在的重大系统负载。在复制/粘贴某人的代码之前需要考虑的事情。：-/

[本文](http://www.iis.net/learn/extensions/url-rewrite-module/reverse-proxy-with-url-rewrite-v2-and-application-request-routing)讨论了使用 IIS 的 URL 重写机制的代理问题的另一种解决方案。无需编码，只需配置。

# ruby-on-rails - 如何计算 Ruby on Rails 中布尔列的总和

> ID：14650913
> 
> 赞同：3
> 
> 时间：2013-02-01T16:37:55.063
> 
> 标签：ruby-on-rails, rails-activerecord

我有一个带有布尔值的列，并想使用“sum”函数来计算总数。此列用于获取类似于 Stack Overflow 或 reddit 的投票计数。

这是我的代码

```
votes = Vote.all
total = votes.sum(:direction)
puts' ....................' + total.to_s 
```

这是我的错误...

```
undefined method `+' for #<Vote:0x000000047c9170> 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T16:45:33.317

布尔值的总和？我只是用`direction=false`or来计算值`direction=true`

```
total_down = Vote.where(direction: false).count #down vote
total_up = Vote.where(direction: true).count #up vote
puts "....... #{total_up} .... #{total_down}" 
```

# maven - 我可以在 Maven 中使用分发管理来分发文件目录吗？

> ID：14650919
> 
> 赞同：0
> 
> 时间：2013-02-01T16:38:19.103
> 
> 标签：maven

我有一个 maven 项目，它使用 pom.xml 中定义的一些插件生成一组资源文件。我想使用诸如 distributionManagement 之类的东西将这些生成的文件推送到 Git 中的一个分支。我可以看到我可以使用 Apache Wagon 之类的东西来进行分发，但 distributionManagement 设置似乎只适合存储库、站点和重定位元素。

有没有办法添加一些自定义的 distributionManagement 元素，或者任何人都可以建议另一种将我生成的资源推送到 git 分支的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:50:22.780

使用普通的maven项目，将生成的资源放入**generate-resources**生命周期阶段，并将结果打包成jar文件，最后使用通常的部署（** mvn deploy **）或与创建发布有关将生成的工件传输到 Maven 存储库中。

# jquery - 使用带有 webSQL 和 JSON 对象数组的 jQuery UI 自动完成

> ID：14650923
> 
> 赞同：1
> 
> 时间：2013-02-01T16:38:22.567
> 
> 标签：jquery, json, local-storage, jquery-ui-autocomplete, web-sql

所以这个杀了我..

我正在尝试使用 jQuery UI 自动完成插件来处理 webSQL 表。我遇到的问题是我需要从 json 对象数组中获取两个字段；一个 id 字段和一个 name 字段，并将它们推送到 JSON 对象数组中，然后将其绑定到自动完成插件。

当用户在自动完成输入字段中键入时，他们应该只看到名称字段，并且在选择名称时应该将 id 字段设置为变量。

下面是我的一个例子：

```
 var allFields = [];

    db.runInTxn({
        dbAction: function (txn) {
            txn.executeSql('SELECT <Id>, <Field1>, <Field2> FROM <Table>', null, function (txn, resultSet) {
                var rows = resultSet.rows;
                for (var i = 0; i < rows.length; i++) {
                    var row = rows.item(i);
                    allFields.push(
                         {1: row.<Id>, 2: row.<Field1>, 3: row.<Field2>}
                    );

                }

            }, function (txn, error) {
                console.log('Select error.', error);
            });
        }
    });

    //autocomplete field1 input
    $("#field1").autocomplete({
        source: allFields, 
        select: function (event, ui) {
            alert(ui.<Id>);
            //return false;
        }
    }); 
```

这行不通。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:58:44.497

所以我想通了。。

实际上真的很简单..需要为要成为自动完成值的字段指定一个名为“值”的键。因此，field1将是自动完成的值，并且在选择field1时将返回ID。

```
var allFields = [];

db.runInTxn({
    dbAction: function (txn) {
        txn.executeSql('SELECT <Id>, <Field1>, <Field2> FROM <Table>', null, function (txn, resultSet) {
            var rows = resultSet.rows;
            for (var i = 0; i < rows.length; i++) {
                var row = rows.item(i);
                allFields.push(
                     {1: row.<Id>, value: row.<Field1>, 3: row.<Field2>}
                );

            }

        }, function (txn, error) {
            console.log('Select error.', error);
        });
    }
});

//autocomplete field1 input
$("#field1").autocomplete({
    source: allFields, 
    select: function (event, ui) {
        alert(ui.item.<Id>);
        //return false;
    }
}); 
```

# php - 禁用 cURL 阅读

> ID：14650924
> 
> 赞同：2
> 
> 时间：2013-02-01T16:38:27.340
> 
> 标签：php, curl

有人正在通过 cURL 阅读我的页面。如何禁用它通过 cURL 访问我的页面？他正在使用这种方法阅读我的页面

```
function ajax(){
$.ajax({
type: "POST",
url: "../ajaxupdate.php",
data: { link: "58699768" }
}).success(function( msg ) {
$('#postcontent').html( msg );
ajax();
});
}
ajax(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:47:15.690

这将是非常困难的，因为 cURL 提供了大量的选项，因此可能会绕过几乎任何安全性，除非您要求验证码或登录/密码与活动的 cookie 和会话。您可以做的两件事是： 1\. 以您喜欢的任何方式阻止 ip - 在脚本中或使用 iptables。2.当你看到他的用户代理时杀死脚本，这样他/她什么都得不到。

但正如我所说，有数百万种方法可以绕过这些代理、切换用户代理以及介于两者之间的任何方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:47:51.617

您可以通过检查来过滤烦人的客户端的连接`$_SERVER['HTTP_USER_AGENT']`。

如果它包含字符串，则`curl`返回一个空白页。

例如

```
if (preg_match('/curl/i', $_SERVER['HTTP_USER_AGENT'])) 
    return; 
```

显然这不是一个 100% 安全的方法，因为`curl`可以将自定义设置`User-Agent`到 HTTP 标头中。

# performance - Cassandra 性能：拆分 CF 与否？

> ID：14650926
> 
> 赞同：2
> 
> 时间：2013-02-01T16:38:30.843
> 
> 标签：performance, cassandra

我正在设计一个 Cassandra 数据库来了解它。但是我有一个问题，我想请一些专家帮助我澄清：

我读过每个列族的行都通过节点分布，因此每个节点都有给定列族的行的一部分。这是否意味着将一个列族划分为多个列族不是一个好主意，即使该列族有数百万行？

我对 RDBMS 的经验表明，最好将非常大的表拆分为较小的表以获得更好的性能，但似乎在 Cassandra 中不需要这个，而且，如果我有很多列族，我需要更多的内存. 我对吗？在一个列族中保留许多行以获得更好的性能是否比将列族拆分为多个行更好？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:51:22.120

在 Cassandra 中不需要对列族进行分片。您可以在一个 CF 中放入尽可能多的数据，只要您有存储空间和机器来存储它。但是，要考虑的一件事是，与使用一些具有真正大驱动器的机器相比，使用许多较小的机器可以获得更好的性能。而且您不想将所有这些数据放在共享存储上。Cassandra 通过并行顺序读取和写入来提高速度。

您确实需要注意的一件事是无限制的行增长——即以无限制的方式将列添加到行中。这是一个非常容易解决的问题，如果需要，可以通过分片密钥来解决。但即便如此，您也可以连续写入数百万列。

# asp.net-mvc - IIS 托管 ASP.NET MVC 站点为包含“web.config”的 url 提供 http 404

> ID：14650927
> 
> 赞同：0
> 
> 时间：2013-02-01T16:38:31.257
> 
> 标签：asp.net-mvc, asp.net-mvc-3, iis, web-config, http-status-code-404

使用包含 web.config 的 url 从 IIS（托管 ASP.NET MVC 3 站点）请求页面会产生 404 错误。带有 app.config 的 URL 没有问题。本地 Visual Studio 开发服务器对此类 url 没有任何问题。

1 - 除了 web.config 之外，还有哪些其他特殊词被 IIS 处理？在请求过滤页面/隐藏段选项卡中，这是当前状态：

![在此处输入图像描述](../Images/20b83fce20eb88eff09858f3a8608383.png)

~~我猜这些不是特殊词，因为 IIS 可以毫无问题地处理 bin、App_code 等词。~~

**答：**我想这些是 IIS 以这种方式处理的词。所以这些是我认为的默认词，这个列表是可配置的（新项目可以添加到这个列表中）。

2 - 是否有任何快速修复（如通过 web.config 修改）来处理带有这些特殊单词的 url？

顺便说一句，我不想​​提供 web.config 文件。网址格式为： *www.mysite.com/es/web.config/1*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:51:38.730

这是该部分下的 IIS 配置的`Request Filtering`一部分：

![请求过滤](../Images/20ce53c56cdddfe96692c99286862470.png)

您可以添加/删除过滤器。
**但是**，我确实认为将其删除是一个非常**糟糕的主意**`web.config`。

[http://www.iis.net/configreference/system.webserver/security/requestfiltering](http://www.iis.net/configreference/system.webserver/security/requestfiltering)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-16T12:10:33.637

**原因：**

> 正如您已经展示了 IIS 配置的快照。这些是 .Net 应用程序中保留的文件夹和文件，因此 IIS 想要保留这些以确保安全。
> 
> 包含这些字符串的 URL 作为 404 响应返回，前提是这些字符串出现在之前`?`并且恰好在 2 个斜杠之间`/../`或最后。例如：*www.example.com/bin/anything.ext*或*www.example.com/folder/sub/web.config*
> 
> IIS 在任何地方都可以匹配这些字符串，因为我们可以在任何目录级别使用 web.config。
> 
> 如果这些字符串有任何内容，那么页面将由 IIS 提供。例如：*www.example.com/bin-folder/anthing.ext*或*www.example.com/sub/bin.html*或*www.example.com/-web.confing/page.aspx*都可以。

* * *

**我建议**在这些字符串中使用一些其他词，或者在带有扩展名的 URL 末尾使用，这样它就不会出现在两个斜杠之间。

例如：`www.example.com/en-web.config/1`或`www.example.com/en/1/web.config.aspx`

* * *

* * *

**即使那样我也有一个棘手的解决方案：**

如果您真的需要这些字符串，而 URL 中没有其他词，那么我建议您使用`use URL-ReWrite.`. 这可能整体上并不快，但除了第 2 步之外它快速方便，因为第 2 步取决于您的应用程序。

**1-**在顶级的 IIS 中添加此规则：

正则表达式匹配：*(/web|^web)\.(config$|config/)* //`OR as your requirement`

重新写入：*handler.aspx?url={REQUEST_URI}*

```
<rule name="web-config" stopProcessing="true">
  <match url="(/web|^web)\.(config$|config/)" />
  <conditions logicalGrouping="MatchAll" trackAllCaptures="false" />
  <action type="Rewrite" url="handler.aspx?url={REQUEST_URI}" appendQueryString="false" />
</rule> 
```

**2-**在`handler.aspx`（或任何其他语言页面）检查`url`GET 变量并做出相应的响应。`Request.QueryString("url")`

*   小心操作，因为您在这里控制着安全性。
*   我建议仅将实际页面内容包含在响应中，`handler.aspx or handler.php`而不是重定向等。
*   在包含内容之前首先验证 URL（通过正则表达式等），并包含硬编码的内容，不要将 URL 的任何部分放入变量中，并在 response-inclusion-code 中使用该变量。

**3-**最后从 IIS 管理器中，在特定网站中转到请求过滤->隐藏段选项卡并删除所需字符串。例如：web.config。这一步也可以通过 web.config 完成：

```
<security>
  <requestFiltering>
    <requestLimits maxAllowedContentLength="209715200" />
    <hiddenSegments>
      <remove segment="web.config" />
    </hiddenSegments>
  </requestFiltering>
</security> 
```

现在，IIS 将为页面提供服务，您的处理程序页面将在用户浏览器中显示具有完全相同 URL 的输出。

# matlab - 大向量外积 Matlab

> ID：14650930
> 
> 赞同：0
> 
> 时间：2013-02-01T16:38:53.673
> 
> 标签：matlab, matrix-multiplication

我想在 Matlab 中计算同一向量的外积。一个有代表性的例子是：

```
x=rand(1e5,1);
sigma=x*x'-spdiags(x,0,length(x),length(x)); 
```

有什么明显的方法可以加快速度吗？x*x' 是一个对称矩阵，但还没有找到一种方法来帮助 Matlab 使用该信息来加快速度。

编辑：有一种方法可以用循环来做到这一点，但我还看不到好处：

```
for k=1:length(x)
   sigma(k:length(x),k)=x(k).*x(k:length(x));
end 
```

以上可能适用于稀疏数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:05:42.583

您是否考虑过使用[`pdist`](http://www.mathworks.com/help/stats/pdist.html)自定义距离功能

```
sigmaCompact = pdist( x(:), @(x, Y) x.*Y );
sigma = squareform(sigmaCompact); 
```

直至特殊处理`sigma( k, k );`

# javascript - 将值设置为货币 in

> ID：14650932
> 
> 赞同：66
> 
> 时间：2013-02-01T16:38:59.687
> 
> 标签：javascript, jquery, html, currency-formatting

我正在尝试使用 javascript 将用户输入的数字格式化为货币。这在`<input type="text" />`. 但是，`<input type="number" />`我似乎无法将值设置为任何包含非数字值的值。以下小提琴显示了我的问题

[http://jsfiddle.net/2wEe6/72/](http://jsfiddle.net/2wEe6/72/)

无论如何我可以将值设置为类似的值`$125.00`吗？

我想使用`<input type="number" />`以便移动设备知道要调出键盘进行数字输入。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-02-01T16:44:36.073

添加参数`step="0.01"`：`<input type="number" />`

```
<input type="number" min="0.01" step="0.01" max="2500" value="25.67" /> 
```

演示：http: [//jsfiddle.net/uzbjve2u/](http://jsfiddle.net/uzbjve2u/)

但是美元符号必须留在文本框之外......每个非数字或分隔符都会被自动裁剪。

否则，您可以使用经典文本框，[如此处所述](http://www.bendewey.com/code/formatcurrency/demo/)。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-02-05T16:33:47.547

`<input type="number" />`最后，我制作了一个 jQuery 插件，可以为我设置合适的格式。我还注意到，在某些移动设备上，`min`and`max`属性实际上并不会阻止您输入比指定更低或更高的数字，因此插件也会考虑这一点。下面是代码和示例：

```
(function($) {
  $.fn.currencyInput = function() {
    this.each(function() {
      var wrapper = $("<div class='currency-input' />");
      $(this).wrap(wrapper);
      $(this).before("<span class='currency-symbol'>$</span>");
      $(this).change(function() {
        var min = parseFloat($(this).attr("min"));
        var max = parseFloat($(this).attr("max"));
        var value = this.valueAsNumber;
        if(value < min)
          value = min;
        else if(value > max)
          value = max;
        $(this).val(value.toFixed(2)); 
      });
    });
  };
})(jQuery);

$(document).ready(function() {
  $('input.currency').currencyInput();
});
```

```
.currency {
  padding-left:12px;
}

.currency-symbol {
  position:absolute;
  padding: 2px 5px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<input type="number" class="currency" min="0.01" max="2500.00" value="25.00" />
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-10-29T23:06:12.327

你们是完全正确的数字只能进入数字字段。我使用与已经列出的完全相同的东西，在 span 标签上添加了一些 css 样式：

```
<span>$</span><input type="number" min="0.01" step="0.01" max="2500" value="25.67"> 
```

然后添加一些样式魔法：

```
span{
  position:relative;
  margin-right:-20px
}
input[type='number']{
  padding-left:20px;
  text-align:left;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-01T16:50:40.433

您似乎需要两个字段，一个用于货币的选择列表和一个用于值的数字字段。

在这种情况下，一种常见的技术是使用 div 或 span 进行显示（屏幕外的表单字段），然后单击切换到表单元素进行编辑。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-01T16:46:34.353

当类型设置为“数字”时，浏览器只允许输入数字。[详情在这里](http://www.w3.org/TR/html-markup/input.number.html#input.number.attrs.type)。

您可以使用 type="text" 并使用 JavaScript 过滤掉除数字输入之外的任何其他内容，[如下所述](https://stackoverflow.com/questions/995183/how-to-allow-only-numeric-0-9-in-html-inputbox-using-jquery)

# c# - 实体框架 - 手动将属性添加到多对多关系 - 模型优先

> ID：14650936
> 
> 赞同：1
> 
> 时间：2013-02-01T16:39:13.127
> 
> 标签：c#, asp.net, entity-framework, ef-model-first

## 设想：

[如此处](http://www.itq.nl/blogs/post/Code-First-Entity-Framework-Additional-properties-on-many-to-many-join-tables.aspx)所述，一旦您将其他属性添加到简单的连接表（多对多关系），它就不再是隐藏关联。这些问题也解决了这个问题：

*   [实体框架中的多对多关系与关系信息](https://stackoverflow.com/questions/13041163/many-to-many-relationship-in-entity-framework-with-relationship-informantion)
*   [如何使用实体框架向关联（关系）添加属性](https://stackoverflow.com/questions/4233585/how-can-i-add-properties-to-an-association-relationship-using-the-entity-frame)

现有代码已经使用了简单的、自动隐藏的导航属性，并且对自动生成的表进行了一些小的自定义，因此我想在更改基础关系表时避免重构整个项目。

## 问题：

有没有办法让自动导航（多对多）访问器都可以保留，但我也可以直接访问关系实体？

我可以编写自己的访问器，从关系表中进行选择，但是它们不再存在`EntityCollections`，因此我担心我会丢失引擎盖下发生的任何魔法，例如跟踪等。

我可以手动添加`EntityCollections`到实体吗？

## 期待：

起初：`Product* <-> *Offer`

*   一个产品有很多优惠（比如 50% 的折扣，BOGO）
*   相同的优惠可以适用于许多产品（“红衬衫”和“蓝裤子”是 BOGO）

期望： `Product* <-[sort]-> *Offer`

*   当我列出产品的报价时，我可以独立地对它们进行排序
*   即“Red Shirt”有“50% off”然后是“BOGO”，但“Blue Pants”显示“BOGO”然后是“50% off”

那么我希望能够做到：

```
// original access, do stuff
List<Offer> applicableOffers = currentProduct.Offers.Where(...);
// hit up the join table directly for properties
var applicableOffersInOrder = applicableOffers.OrderBy(o => o.ProductOffers.Sort); 
```

而不是

```
var applicableOffersInOrder = currentProduct.ProductOffers
        .OrderBy(o => o.Sort)
        .Offers.Where(...); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:07:44.283

我认为*最简单*的方法是在非自动生成的`partial`类中手动添加两个属性：

```
partial class Offer
{
    public IQueryable<Product> Products 
    { 
       get { return this.ProductOffers.Select(x => x.Product); } 
    }
}
partial class Product
{
    public IQueryable<Offer> Offers 
    { 
       get { return this.ProductOffers.OrderBy(x => x.Sort).Select(x => x.Offer); } 
    }
} 
```

当您想要添加新的 时，这将无济于事`ProductOffer`，但是由于您实际上有额外的数据 ( `Sort`)，因此无论如何您都应该通过`ProductOffers`集合来执行此操作。

# arrays - Matlab：在数组中创建组的映射和重复项的索引

> ID：14650939
> 
> 赞同：0
> 
> 时间：2013-02-01T16:39:20.100
> 
> 标签：arrays, matlab, grouping, duplicates

我有两个 Matlab 数组 A（包含数字组）和 B（包含属于 A 中的组的值），数组 A 中有重复

```
A = [1 1 1 2 2 3 4 4 4 4 4] 
B = [1 2 3 3 5 4 4 1 6 7 8] 
```

现在我想得到以下两张地图：

```
 C = ['1': {1,2,3}, '2': {3,5}, '3':{4}, '4':{1,6,7,8}] 
```

其中 C 给出了一个映射，其中组号作为索引和该特定组中的相关值。

```
D = ['1':{2,4},'2':{1},'3':{4},'4':{1}] 
```

其中 D 给出了一个以 A 中的组号为索引的映射。这些值是来自 A 的组号，对于该特定子组，B 中有重复的值。

处理这个问题的最有效方法是什么？地图是存储此类数据的良好数据结构。我知道第一个可以处理我想避免的 for 循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:54:18.347

我不明白你是怎么到达的`D`。

对于`C`，您可以使用`accumarray`：

```
C = accumarray(A,B,[],@(x){x}) 
```

`C{1}`是`[1 2 3]`

# c# - 在 ListView 中拖放的视觉辅助

> ID：14650940
> 
> 赞同：0
> 
> 时间：2013-02-01T16:39:22.373
> 
> 标签：c#, winforms, listview, drag-and-drop

## 问题

我有两个 ListView。一个选项可以拖入另一个选项。这是“字段”ListView。另一个是“builder” ListView。我想不出一种方法来直观地向用户展示项目将被插入的位置。我想在 ListViewItem 之间画一条线以在视觉上帮助用户。

```
private void builder_DragEnter(object sender, DragEventArgs e)
{
    e.Effect = DragDropEffects.Move;
}

private void fields_DragEnter(object sender, DragEventArgs e)
{
    e.Effect = DragDropEffects.Move;
}

private void fields_ItemDrag(object sender, ItemDragEventArgs e)
{
    fromBuilder = false;
    fields.DoDragDrop(e.Item, DragDropEffects.Move);
}

private void builder_ItemDrag(object sender, ItemDragEventArgs e)
{
    fromBuilder = true;
    builder.DoDragDrop(e.Item, DragDropEffects.Move);
}

private void builderAndFields_DragDrop(object sender, DragEventArgs e)
{
    ListViewItem i = new ListViewItem();
    i = e.Data.GetData(typeof(ListViewItem)) as ListViewItem;

    // Since this function works for both the builder and the fields,
    // we have to check to see where we are dropping, the sender
    // is the ListView we are dropping onto
    if (sender.Equals(builder))
    {
        ListViewItem c = new ListViewItem();
        c = (ListViewItem)i.Clone();
        Point cp = builder.PointToClient(new Point(e.X, e.Y));
        Console.WriteLine("cp: " + cp);
        ListViewItem dragToItem = builder.GetItemAt(cp.X, cp.Y);
        Console.WriteLine("dragToItem: " + dragToItem);
        int dropIndex = dragToItem.Index;
        // Now, we have to check to see if we are reordering or adding
        // So, we check the flag to see if the dragDrop was initiated 
        // on the builder or on the fields ListView
        if (fromBuilder)
        {
            builder.Items.Insert(dropIndex, c);
            builder.Items.Remove(i);
        }
        else
        {
            Console.WriteLine(dropIndex);
            builder.Items.Insert(dropIndex, c);
        }
    }
    // If the sender is the fields listView, the user is trying to remove
    // the item from the builder.
    else
    {
        builder.Items.Remove(i);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:55:28.727

看看[PreviewDragEnter](http://msdn.microsoft.com/en-us/library/vstudio/system.windows.uielement.previewdragenter%28v=vs.100%29.aspx)、[PreviewDragOver](http://msdn.microsoft.com/en-us/library/vstudio/system.windows.uielement.previewdragover%28v=vs.100%29.aspx)和[PreviewDragLeave](http://msdn.microsoft.com/en-us/library/vstudio/system.windows.uielement.previewdragleave%28v=vs.100%29.aspx)。

您可以使用该事件将 Adorner 添加到您的下拉列表中。如果您搜索“WPF DragDropHelper”，您会发现几个详细的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:22:45.743

[更好的 ListView](http://www.componentowl.com/better-listview)支持开箱即用的[删除突出显示和插入标记：](http://www.componentowl.com/documentation/better-listview/data/chapter-drag-drop.html)

![在此处输入图像描述](../Images/6f910bb0ff03199576a5c8893d0f4889.png)

我认为您也可以使用**DragOver**事件处理程序中的**HitTest()**方法在常规 ListView 中执行此操作。

# xml - 如何为 junit 测试套件创建 xml 输出

> ID：14650941
> 
> 赞同：1
> 
> 时间：2013-02-01T16:39:22.953
> 
> 标签：xml, junit, suite

我想知道如何`XML`为`Junit`套件创建文件。

目前，我有一个自定义运行器，它扩展`BlockJUnit4ClassRunner`并生成`XML`每个测试类，其中包含使用的类、方法以及特定于给定类集（使用了哪个引擎）等信息的信息。

现在我需要为整个套件而不是每个测试类都这样做。所以我的问题是，我最好的选择是扩展套件并在那里实现我的逻辑，还是有更好的方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:52:05.273

您不需要编写自定义运行程序，而是需要自定义`RunListener`.

# javascript - 防止表单提交工作......太好了

> ID：14650942
> 
> 赞同：0
> 
> 时间：2013-02-01T16:39:37.603
> 
> 标签：javascript, jquery, html

我有一个表单，我不想在第一次单击提交时提交，但第二次它应该像正常提交一样工作。所以我`not-submittable`在加载时向表单添加了一个类，然后在第一次单击后删除该类......（我认为）应该让它正常提交。但是，这不会发生。第一次单击按预期工作，删除类并更改按钮文本。然而，第二次点击做同样的事情。那么，我在这里缺少什么？

jQuery：

```
 $('form#survey_7042 #ACTION_SUBMIT_SURVEY_RESPONSE').addClass('not-submittable');

  $('form#survey_7042 #ACTION_SUBMIT_SURVEY_RESPONSE.not-submittable').click(function(event) {
      $('form#survey_7042 #ACTION_SUBMIT_SURVEY_RESPONSE').removeClass('not-submittable');
      $('form#survey_7042 #ACTION_SUBMIT_SURVEY_RESPONSE').val('Continue');
      $('form#survey_7042 #ACTION_SUBMIT_SURVEY_RESPONSE').removeAttr('disabled');
    return false;
  }); 
```

前javascript按钮：

```
<input type="submit" class="Button" value="Submit Survey" id="ACTION_SUBMIT_SURVEY_RESPONSE" name="ACTION_SUBMIT_SURVEY_RESPONSE"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:47:54.217

> 引用 OP：“我有一个表单，我不想在第一次点击提交时提交，但第二次它应该像正常提交一样工作。”

仅使用 jQuery`.one()`阻止第`submit`一次点击。

[http://api.jquery.com/one/](http://api.jquery.com/one/)

```
$('#ACTION_SUBMIT_SURVEY_RESPONSE').one('submit', function(e) {
    e.preventDefault();
    // do what you need to do on first click
} 
```

或者...

```
$('#ACTION_SUBMIT_SURVEY_RESPONSE').one('submit', function(e) {
    e.preventDefault();
    // do what you need to do on first click
    if ( some-condition ) {  // under certain conditions allow submit on first click
        $(this).submit();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T16:44:16.857

`.click()`尝试使用`.on()`and`.off()`方法来绑定和取消绑定事件，而不是使用。在你的情况下：

```
$('form#survey_7042 #ACTION_SUBMIT_SURVEY_RESPONSE.not-submittable').on("click.stopSubmit", function(event) {

    $('form#survey_7042 #ACTION_SUBMIT_SURVEY_RESPONSE').removeClass('not-submittable');
    $('form#survey_7042 #ACTION_SUBMIT_SURVEY_RESPONSE').val('Continue');
    $('form#survey_7042 #ACTION_SUBMIT_SURVEY_RESPONSE').removeAttr('disabled');

    if (...conditions are met.....) {
        $('form#survey_7042 #ACTION_SUBMIT_SURVEY_RESPONSE.not-submittable').off("click.stopSubmit");
    }

    return false;
}); 
```

您可能会注意到该`.on()`方法的第一个参数是处理程序的字符串表示形式，但我附加了命名空间“.stopSubmit”。命名您的处理程序允许您取消绑定一个特定的点击处理程序，而不是所有的点击处理程序。最好的部分是，如果您仍想使用原始处理程序中的代码，您可以创建一个单独的单击处理程序来运行该代码，并且当您取消绑定“.stopSubmit”处理程序时，它不会被取消绑定。

请注意`.on()`and`.off()`是推荐的绑定/取消绑定方法 - jQuery 不再推荐`.bind()`and `.unbind()`。

**更新**
在阅读您关于在满足某些条件之前不解除绑定的评论后，我想指出您可以`.off()`在条件中插入调用。我已经更新了代码以反映这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T16:44:39.077

如果有某些必须匹配的标准，请使用`submitable`包含您的逻辑的地方，使发送表单成为可能：

```
var submit = $('form#survey_7042 #ACTION_SUBMIT_SURVEY_RESPONSE');
submit.addClass('not-submittable');

submit.click(function(event) {
    if (true == submitable) {
        submit.removeClass('not-submittable').val('Continue').removeAttr('disabled');
        submit.unbind();
        event.preventDefault();
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T16:53:42.050

你可以做这样的事情

```
 $(document).ready(function () {

         $('#ACTION_SUBMIT_SURVEY_RESPONSE').click(function (event) {
             if (!$('#ACTION_SUBMIT_SURVEY_RESPONSE').hasClass(".not-submittable")) {

                 //do all conditions you wish on first click

                 //if condidition meets add this class to button
                 $('#ACTION_SUBMIT_SURVEY_RESPONSE').addClass(".not-submittable");

                 //stop form submit
                 event.preventDefault();
             }
             else {

                 //calls when button have .not-submittable class may be second or any no of clicks
                 $('#ACTION_SUBMIT_SURVEY_RESPONSE').removeClass('not-submittable');
                 $('#ACTION_SUBMIT_SURVEY_RESPONSE').val('Continue');
                 $('#ACTION_SUBMIT_SURVEY_RESPONSE').removeAttr('disabled');
                 //commented return false so form submits normally
             }
         });

     }); 
```

# java - 如何从多个字符串中解析文本？

> ID：14650946
> 
> 赞同：0
> 
> 时间：2013-02-01T16:39:44.343
> 
> 标签：java, android, string, parsing

我正在使用终端仿真器库来创建终端，然后使用它将通过串行输入的数据发送到串行设备。当数据被发回时，我想解析它并在editText中向用户显示最重要的信息。目前我收到字节数组/块并将它们转换为字符串。当我得到一个 \r 或 \n 时，我创建一个新字符串并重复该过程。这对于大多数命令来说都很好，但是有些命令会通过多行返回结果，例如此处的“show vlan”：

![在此处输入图像描述](../Images/ea20ae242ac051cfc2ae74d759b1a1b1.png)

当我遍历这个时，我得到每一行的字符串。例如，第一个将包含 VLAN 名称状态和端口。所以现在我有一个问题，我怎样才能让 VLAN 1 有 x 个端口处于活动状态。它们在不同的字符串中。这是我对一行感兴趣的当前更简单命令的代码和屏幕截图：

![在此处输入图像描述](../Images/26106d65edbb098309a858af2d8350b4.png)

```
Handler viewHandler = new Handler();
Runnable updateView = new Runnable() {
    @Override

    public void run() {

        mEmulatorView.invalidate();

        if (statusBool == true) {
            for (int i = 0; i < dataReceived.length(); i++) {
                parseCommand = parseCommand + dataReceived.charAt(i);

 if (dataReceived.charAt(i) == '\n' || dataReceived.charAt(i) == '\r'){

    if(parseCommand.contains("KlasOS"))
            {

        String[] tokens = parseCommand.split("\\s{1,}");

        final String ReceivedText = mReceiveBox.getText().toString() + " "
        + new String("Software Version: " + tokens[1] + "\n" );

        runOnUiThread(new Runnable() {
            public void run() {
                                mReceiveBox.setText(ReceivedText);
                                mReceiveBox.setSelection(ReceivedText.length());

                            }
                        });         

                            }

                parseCommand = "";

            }               
            }

            statusBool = false;
            viewHandler.postDelayed(updateView, 1000);
        }
    }
}; 
```

现在我想改变它，这样我就可以处理多行了。如果字符串包含某些信息，最好的方法是存储字符串吗？

我需要在右手editText上输出这个：

"以下端口在 vlan 1 上：Fa1/0, fa1/1, fa1/2, fa1/3, fa1/4, fa1/5, fa1/6, fa1/7, fa1/8, fa1/9, fa1 /10, fa1/11, Gi0"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:09:55.360

基本上，您需要一种可靠地检测命令结果结束的方法。然后归结为发送您的命令，从设备读取数据直到遇到结果的结尾，最后解析该结果。

`switch#`我会像您在自己的答案中那样扫描提示 ( )。也许您甚至可以强制设备使用更特殊的字符序列，这不太可能出现在命令的常规输出中，并且更容易检测结果的结尾。例如，您可以尝试将提示配置为包含控制字符，如 ^G 或 ^L。或者，如果您的用户不介意，您总是可以发送第二个命令来发出这样的序列，例如“show vlan; echo ^G”。

您还应该为命令错误做好准备，这会导致不同的输出，例如，预期的更多或更少的行或完全不同的输出格式。结果甚至可能同时包含常规输出和警告或错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:28:29.593

我用一个布尔值和几个字符串以一种凌乱的方式解决了这个问题。我做了一个附加字符串的方法。

```
if((parseCommand.contains("VLAN Name") && parseCommand.contains("Status")&& parseCommand.contains("Ports")) 
                            || ((ShowVlanAppend.contains("VLAN Name")&& ShowVlanAppend.contains("Status")&& ShowVlanAppend.contains("Ports"))))
                        {
                                commandParse();
                                if(finalCommandBool == true){
                                runOnUiThread(new Runnable() {
                                    public void run() {

                                        mReceiveBox.setText(finalCommand);
                                        mReceiveBox.setSelection(finalCommand.length());
                                        ShowVlanAppend = "";
                                        finalCommand = "";
                                        finalCommandBool = false;
                                    }
                                });

                                }

                        }
 public void commandParse()

        {
            if (!parseCommand.contains("switch#")){
            ShowVlanAppend = ShowVlanAppend + parseCommand;
            }
            else{
                finalCommand = ShowVlanAppend;
                finalCommandBool = true;
            }

        } 
```

# freemarker - freemarker中变量表达式中的！“”是什么意思？

> ID：14650949
> 
> 赞同：0
> 
> 时间：2013-02-01T16:39:49.393
> 
> 标签：freemarker, templating, ofbiz

我从 apache ofbiz 开发书中获得了以下代码：

```
<#macro displayData data>
  <#if data?is_sequence>
    <#assign keys = data?first?keys/>
  <#else>
    <#assign keys = data?keys/>
</#if>
  <#-- Header -->
  <tr>
    <#list keys as key>
      <td class="dark-grid"><b>${key}</b></td>
    </#list>
  </tr>
  <#-- Data -->
  <#if data?is_sequence>
    <#list data as record>
        <tr>
            <#list keys as key>
            <td class="light-grid">${record[key]!""}</td>
            </#list>
        </tr>
    </#list>
  <#else>
        <tr>
          <#list keys as key>
          <td class="light-grid">${data[key]!""}</td>
          </#list>
    ￼     <h1>Processed script: "${parameters.scriptName}"</h1>
          <#if data?has_content && (data?is_sequence || data?is_hash)>
        </tr> </#if>
  </#if>
</#macro> 
```

当我尝试在前端显示某些内容时，出现以下错误：

```
Error on line 31, column 38 in component://crmsfa/webapp/crmsfa/tests/displayData.ftl Expecting a string, date or number here, Expression record[key]!"" is instead a freemarker.ext.beans.SimpleMethodModel The problematic instruction: ---------- ==> ${record[key]!""} [on line 31, column 36 in component://crmsfa/webapp/crmsfa/tests/displayData.ftl] in user-directive displayData [on line 7, column 9 in component://crmsfa/webapp/crmsfa/tests/displayData.ftl] ---------- Java backtrace for programmers: ---------- freemarker.core.NonStringException: Error on line 31, column 38 in component://crmsfa/webapp/crmsfa/tests/displayData.ftl Expecting a string, date or number here, Expression record[key]!"" is instead a freemarker.ext.beans.SimpleMethodModel at freemarker.core.Expression.getStringValue(Expression.java:126) at 
```

freemarker.core.Expression.getStringValue(Expression.java:93)

我想知道两件事，以便我可以首先调试这个我从来没有遇到过${record[ **key** **]!""}**（变量中的 !"" ）或**data?first?keys/>**有人可以解释一下这两个表达式的语义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T08:57:29.057

错误的原因是类型`data[key]`不合适。该`!''`部分在失败的情况下没有任何作用，因为只有在存在`data[key]`或`null`缺失时才会起作用。

否则请使用手册，它描述了这些运算符的含义以及这里的任何人都可以：http: [//freemarker.org/docs/dgui_template_exp.html#exp_cheatsheet](http://freemarker.org/docs/dgui_template_exp.html#exp_cheatsheet)

# c - 使用 snprinf() 是否需要考虑每个连接字符串末尾的空字节？

> ID：14650950
> 
> 赞同：0
> 
> 时间：2013-02-01T16:39:50.267
> 
> 标签：c, string-concatenation, mips32, printf

```
char str[33] = "";
snprintf(str, sizeof str, "%s%s%s%s", preg->opbits,preg->rsbits,preg->rtbits,preg->ibits);
char *instruction = &str[0] 
```

我正在尝试从 32 位长的 MIPS 汇编指令的字符串表示的不同元素构建二进制字符串，其中 opbits 是 6 位操作码，rsbits 是第一个源寄存器的 5 位数，rtbits 是立即数 (i) 类型指令的目标寄存器的 5 位编号，而 ibits 表示 16 位整数值。我希望将它们连接成一个字符数组，然后将一个指针分配给该数组的第一个元素，该指针可以传递给一个已经定义的函数，将一个写为字符串的数字转换为一个字符串（在指定的基数中，该基数也传递给 strtoint 函数) 为整数值。

我的主要问题是，我是否需要考虑要连接的每个字符串末尾的空字节，其次，这行得通吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:42:49.343

> 我的主要问题是，我是否需要考虑要连接的每个字符串末尾的空字节，其次，这行得通吗？

不，您不必为每个子字符串计算一个空字符，您只需为结果字符串连接添加 1 个空字符

因此，如果您的字符串结果的长度为 32 + 1（空字符）= 33

因此，如果结果连接字符串的长度为 32，则您的定义是可以的

```
char str[33] = ""; 
```

# javascript - 如何使用 javascript 减慢这个动画的速度

> ID：14650951
> 
> 赞同：1
> 
> 时间：2013-02-01T16:39:52.060
> 
> 标签：javascript, jquery, leaflet

我正在向地图添加折线并使用折线装饰器插件向折线添加行进方向箭头。然后`setInterval`使用简单的计数增量作为偏移百分比沿折线移动箭头。

问题是我进一步放大（超过缩放级别 13）箭头速度太快了。你能建议一种减慢速度的方法吗？

一些变量是：

`map.getZoom()`根据缩放级别更改速度？

`polyArray.length`根据折线的长度改变速度可能吗？

在这里看小提琴：http: [//jsfiddle.net/KSv2h/](http://jsfiddle.net/KSv2h/)

下面是我的全部功能

```
// add map polylines
function addPolyline(polyArray, colour) {
    console.log(polyArray.length);
    polyline = L.polyline(polyArray, {color: colour});
    var arrowHead = L.polylineDecorator(polyline).addTo(mylayergroup);
    var arrowOffset = 0;
    var anim = window.setInterval(function() {
        arrowHead.setPatterns([
                {offset: arrowOffset+'%', repeat: 0, symbol: new L.Symbol.ArrowHead({pixelSize: 15, polygon: false, pathOptions: {stroke: true}})}
        ])
        if(++arrowOffset > 100)
            arrowOffset = 0;

    }, 100);
    mylayergroup.addLayer(polyline).addTo(map);
} 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:48:54.870

```
 // add map polylines
function addPolyline(polyArray, colour) {
    console.log(polyArray.length);
    polyline = L.polyline(polyArray, {color: colour});
    var arrowHead = L.polylineDecorator(polyline).addTo(mylayergroup);
    var arrowOffset = 0;
    var anim = window.setInterval(function() {
        arrowHead.setPatterns([
                {offset: arrowOffset+'%', repeat: 0, symbol: new L.Symbol.ArrowHead({pixelSize: 15, polygon: false, pathOptions: {stroke: true}})}
        ])
        if(++arrowOffset > 100)
            arrowOffset = 0;

    }, 1000); /* HERE 1000 INSTEAD OF 100 */
    mylayergroup.addLayer(polyline).addTo(map);
} 
```

对我来说工作得很好，速度很慢，即使你放大。它似乎比缩小更快是合乎逻辑的。还是我不明白你的问题，问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:22:30.593

这似乎在起作用，需要一些微调..谢谢

```
// add map polylines
function addPolyline(polyArray, colour) {
    console.log(polyArray.length);
    polyline = L.polyline(polyArray, {color: colour});
    var arrowHead = L.polylineDecorator(polyline).addTo(mylayergroup);
    var arrowOffset = 0;
var anim = function(){   
    if(map.getZoom() < 15 ) { 
        arrowHead.setPatterns([
            {offset: arrowOffset+'%', repeat: 0, symbol: new L.Symbol.ArrowHead({pixelSize: 15, polygon: false, pathOptions: {stroke: true}})}
        ])
        if(++arrowOffset > 100)
            arrowOffset = 0;        
        if(map.getZoom() <= 12) {
            setTimeout(anim, 100);
        } else if (map.getZoom() == 13) { 
            setTimeout(anim, 200);
        } else if (map.getZoom() == 14 ) { 
            setTimeout(anim, 300);
        }
    } else {
        arrowHead.setPatterns([
            {offset: 0, repeat: 100, symbol: new L.Symbol.ArrowHead({pixelSize: 10, polygon: false, pathOptions: {stroke: true}})}
        ])      
    }
}
anim();
    mylayergroup.addLayer(polyline);
} 
```

# mysql - 使用 mysql 中的 vba 更新 excel 文件数据

> ID：14650953
> 
> 赞同：0
> 
> 时间：2013-02-01T16:39:55.543
> 
> 标签：mysql, excel, vba, database-connection

是否有可能在使用 VBA 打开时使用特定查询从 mysql 服务器更新 excel 表？

我是 VBA 新手，是否可以在更新工作表时监控 Excel 工作表上的数据更改？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:48:43.083

如果您使用`Data`>`Get External Data`工具栏来设置 MySQL 数据提取，则可以将工作簿设置为在打开时刷新 -[这是一个](http://grok.lsu.edu/article.aspx?articleid=1577)显示非常基础的链接。

至于跟踪/监控更改，您必须更详细地了解您希望如何发生......作为一般规则，这不是很容易做到。

希望这可以帮助！！

# php - 尝试在 PHP 中替换行颜色

> ID：14650954
> 
> 赞同：0
> 
> 时间：2013-02-01T16:39:58.540
> 
> 标签：php, function, html-table

我正在寻找使用 PHP 函数来替换行颜色。这是我所拥有的（尽管它不起作用）：

```
function row($year) {
    if($year%2) 
        $color == "#FFF";
    else
        $color == "#000";
}

for ($year=2013; $year<=2023; $year++) 
    {
    row($year);
    echo "<tr bgcolor='$color'><td>$year</td><td>$tdate</td></tr>";
    } 
```

基本上，如果一年是奇数，我希望该行的颜色为白色。如果是，黑色。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T16:42:20.843

为什么不直接使用 CSS 和[`nth-child`](https://developer.mozilla.org/en-US/docs/CSS/:nth-child)选择器呢？

```
tr:nth-child( 2n ) {
  background-color: #000;
}
tr:nth-child( 2n + 1 ) {
  background-color: #FFF;
} 
```

`<tr>`那么元素上就不需要更多的属性了。

除了 IE，大多数浏览器都支持这个。请参阅[MDN 的浏览器兼容性](https://developer.mozilla.org/en-US/docs/CSS/:nth-child#Browser_compatibility)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T16:43:00.697

> [来自 W3c](http://www.w3.org/TR/html4/present/graphics.html)
> 
> 15.1.1 背景颜色 -`bgcolor` 属性已被弃用，取而代之的是用于指定背景颜色信息的样式表。

现在你应该做的是

```
function row($year) {
    return ($year % 2 == 0) ? "#FFFFFF" : "#000000";
}

for ($year = 2013; $year <= 2023; $year++) {
    echo "<tr style='background-color:".row($year).";'><td>$year</td><td>$tdate</td></tr>";
} 
```

但是，您似乎不知道`==`它的等于运算符它的非赋值运算符是什么

例如，赋值运算符所做的是将右手边的值分配给左手

> ![在此处输入图像描述](../Images/f5b3d75ed1bd1cb8e77803952e3604de.png)

[比较运算符（`==`）](http://www.php.net/manual/en/language.operators.comparison.php)所做的是

```
$a == $b    Equal   TRUE if $a is equal to $b after type juggling. 
```

其次你还有一个变量的范围

> [**变量**](http://php.net/manual/en/language.variables.scope.php)的范围是定义它的上下文。大多数情况下，所有 PHP 变量都只有一个作用域。这个单一范围也涵盖了包含和必需的文件。
> 
> 以上引用自 php 手册以阅读更多内容，[**请查看**](http://php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T16:42:09.513

```
function row($year) {
    $color = '';
    if($year%2) 
        $color = "#FFF";
    else
        $color = "#000";

   return $color;
}

for ($year=2013; $year<=2023; $year++) 
    {
    $color = row($year);
    echo "<tr bgcolor='$color'><td>$year</td><td>$tdate</td></tr>";
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T16:42:36.877

```
for ($year=2013; $year<=2023; $year++) 
{
    echo "<tr bgcolor='".$year%2==0?"#fff":"#000"."'><td>$year</td><td>$tdate</td></tr>";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T16:44:06.697

就像其他编程语言一样，您必须知道何时使用局部变量和全局变量。在这种情况下，您试图在一个函数中使用另一个函数的变量。

```
function row($year) {
    if($year%2 == 1) 
        return "#FFF";
    else
       return "#000";
}

for ($year=2013; $year<=2023; $year++) 
    {
    echo "<tr bgcolor='".row($year)."'><td>$year</td><td>$tdate</td></tr>";
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T16:42:55.867

您没有将函数的结果保存在任何地方。尝试这个：

```
function row($year) {
    if($year%2) 
        $color == "#FFF";
    else
        $color == "#000";
}

for ($year=2013; $year<=2023; $year++) 
{
    $color = row($year);
    echo "<tr bgcolor='$color'><td>$year</td><td>$tdate</td></tr>";
} 
```

这是关于变量范围的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-01T16:43:23.937

你没有从函数返回任何东西，像这样

```
function row($year) {
    if($year%2) 
        $color == "#FFF";
    else
        $color == "#000";
return $color;
}

for ($year=2013; $year<=2023; $year++) 
    {
    $color = row($year);
    echo "<tr bgcolor='$color'><td>$year</td><td>$tdate</td></tr>";
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-05T10:35:12.830

```
<?php
$host=""; // Host name
$username=""; // Mysql username
$password=""; // Mysql password
$dbname=""; // Database name
$tblname=""; // Table name
// Connect to server and select databse
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$dbname")or die("cannot select DB");
$sql="SELECT * FROM $tblname";
$result=mysql_query($sql);
// Define $color=1
$color="1";
echo '<h3 align = "center">Employee Details <hr /></h3>';
echo '<table width="400" border="1" align="center" cellpadding="2" cellspacing="0">';
while($rows=mysql_fetch_row($result)){
// If $color==1 table row color = #FFCCFF
if($color == 1){
echo "<tr bgcolor='#FFCCFF'><td>$rows[0]</td><td>$rows[1]</td><td>$rows[2]</td><td>$rows[3]</td></tr>";
// Set $color==2, for switching to other color
$color="2";
}
// When $color not equal 1, table row color = #FFC600
else {
echo "<tr bgcolor='#FFC600'><td>$rows[0]</td><td>$rows[1]</td><td>$rows[2]</td><td>$rows[3]</td></tr>";
// Set $color back to 1
$color="1";
}
}
echo '</table>';
mysql_close();
?> 
```

在上面的编码中，首先我们从数据库中选择数据，然后我们定义了一个值为 1 的变量 $color。在 while 循环之后添加一个 if 条件。如果 $color=1 那么表格行颜色将为 #FFCCFF 和里面if条件我们设置$color==2来切换到其他颜色.

# asp.net - Facebook C# SDK - 托管站点上的错误，同时读取有趣的页面访问令牌

> ID：14650955
> 
> 赞同：1
> 
> 时间：2013-02-01T16:40:01.003
> 
> 标签：asp.net, vb.net, facebook, access-token

我正在使用 Facebook C# SDK 与我的 funpage 交互，我编写了一个 ASP NET vb 页面，在 fun page 墙上发布照片，它在我的本地机器上运行良好，但是当我尝试执行页面时收到此错误我的网站：

尝试通过方法“DynamicClass.CallSite.Target(System.Runtime.CompilerServices.Closure, System.Runtime.CompilerServices.CallSite, System.Object)”访问类型“System.Runtime.CompilerServices.CallSite`1”失败。

当我尝试使用我的页面访问令牌对数组进行循环时会发生这种情况。（我/帐户）

下面的代码在 _step = 3 之后生成此错误：

```
 Dim app As New FacebookClient(access_token)
    _step = 1
    Dim accts As Object = app.Get("/me/accounts")
    _step = 2
    ' find the access token for the fan page
    Dim page_access_token As String
    _step = 3

    For Each acct As Object In accts.data
        _step = 4

        If acct.id = Session("page_id").ToString() Then
            _step = 5
            page_access_token = acct.access_token
            '  get_album(page_access_token);
            _step = 6
            Dim fb As New FacebookClient(page_access_token)
            _step = 7
            Session.Add("page_access_token", page_access_token)
            Exit For
        End If
    Next 
```

我在网上看到我的托管服务将服务器信任级别设置为中。希望有人能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-05T14:05:56.790

我在将我的网站发布到 Aruba 服务器时遇到了同样的问题。我在访问它之前解决了它投射从 Facebook 检索到的动态对象。

在您的代码中，您有：

```
For Each acct As Object In accts.data 
```

但是 accts 只是一个对象，Aruba 阻止访问其 .data 元素

尝试创建包含您希望从 FB 收到的所有元素的类。

```
Public Class fbcls_accts
    Public data() As fbcls_image
End Class

Public Class fbcls_image
    Public height As Integer
    Public width As Integer
    Public source As String
End Class 
```

然后使用 JavaScriptSerializer 将您的对象转换为最终类型：

```
result = (New JavaScriptSerializer().ConvertToType(Of fbcls_accts)(accts)) 
```

# php - 从控制台/命令行调用 PHP 不起作用

> ID：14650958
> 
> 赞同：1
> 
> 时间：2013-02-01T16:40:09.220
> 
> 标签：php, linux

我正在尝试将传入的邮件通过管道传输到此脚本。因此，如果我调用“php /home/user/www/mysite/public/index.php -m”它可以正常工作。但是，如果我调用“/home/user/www/mysite/public/index.php -m”（没有 php）我会返回 HTML，我还会将“#!/usr/bin/php”添加到索引的顶部。 php 并添加了“chmod +x index.php”，但如果在没有前导 php 的情况下调用它，它仍会返回 HTML（默认错误页面）。有人知道怎么修这个东西吗？

旁注，为什么我需要它在没有 php 的情况下调用是因为我在我的 cpanel 上使用了“默认地址”来将传入的电子邮件传送到这个脚本。它只允许我提供一个脚本名称。不是前缀...

```
\#!/usr/bin/php
<?PHP
    ..... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:44:51.533

啊，我才发现问题，和 Zend 2 完全没有关系。

我运行了命令“which php”，它说：

# #!/usr/local/bin/php

不是

# #!/usr/bin/php

# ios - CAEmitterLayer：使用带有 CAEmitterCell 的 @2x (retina) png 图像

> ID：14650964
> 
> 赞同：6
> 
> 时间：2013-02-01T16:40:24.977
> 
> 标签：ios, xcode, calayer, caemitterlayer, caemittercell

使用 CAEmitterLayer，@2x (retina) 图像不会像在 iOS 其他地方那样被缩放属性。我得到的结果是@2x 版本显示为非视网膜图像大小的 4 倍，而不是按比例缩小。

知道如何解决这个问题吗？我已经尝试在 UIImageView 中测试图像疼痛，结果应该是这样，所以这似乎是 CAEmitterLayer 和 CAEmitterCell 的问题。图像具有正确的 @2x.png 说明符。

这是我正在使用的代码：

```
CAEmitterLayer *fallingCoinEmitter = [CAEmitterLayer layer];
fallingCoinEmitter.emitterPosition = CGPointMake(self.view.bounds.size.width / 2.0, -30);
fallingCoinEmitter.emitterSize = CGSizeMake(self.view.bounds.size.width * 2.0, 0.0);;

    // Spawn points for the flakes are within on the outline of the line
fallingCoinEmitter.emitterMode  = kCAEmitterLayerOutline;
fallingCoinEmitter.emitterShape = kCAEmitterLayerLine;

    // Configure the snowflake emitter cell
CAEmitterCell *coin = [CAEmitterCell emitterCell];
coin.birthRate      = 8.0;
coin.lifetime       = 5.0;
coin.velocity       = -180;             // falling down slowly
coin.velocityRange = 80;
coin.yAcceleration = 40;
coin.emissionRange = 0.4 * M_PI;        // some variation in angle
coin.spinRange      = 0.45 * M_PI;      // slow spin
coin.contents       = (id) [[UIImage imageNamed:@"Coin_Generic_Emitter"] CGImage];
coin.scale          = 1.0;
coin.scaleRange     = 0.0;

    // Make the flakes seem inset in the background
fallingCoinEmitter.shadowOpacity = 1.0;
fallingCoinEmitter.shadowRadius  = 4.0;
fallingCoinEmitter.shadowOffset  = CGSizeMake(0.0, 3.0);
UIColor *darkGreenColor = [UIColor colorWithRed:0.005 green:0.163 blue:0.005 alpha:1.000];
fallingCoinEmitter.shadowColor   = [darkGreenColor CGColor];
[fallingCoinEmitter setContentsScale:[UIScreen mainScreen].scale];
//fallingCoinEmitter.shouldRasterize = YES;
//[fallingCoinEmitter setRasterizationScale:[UIScreen mainScreen].scale];
//fallingCoinEmitter.scale = fallingCoinEmitter.scale / [[UIScreen mainScreen] scale];

    // Add everything to our backing layer below the UIContol defined in the storyboard
fallingCoinEmitter.emitterCells = [NSArray arrayWithObject:coin];
[self.view.layer insertSublayer:fallingCoinEmitter atIndex:0]; 
```

谢谢！

更新：

@Fabian，设置 contentScale 不起作用，至少不是我的解决方案

```
 [fallingCoinEmitter setContentsScale:[UIScreen mainScreen].scale]; 
```

我也试过这个没有结果..

```
 emitter.shouldRasterize = YES;
    [emitter setRasterizationScale:[UIScreen mainScreen].scale]; 
```

并且设置比例范围不起作用。iPad 2 和 iPad 3 (w RD) 的尺寸仍然存在差异。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T16:41:55.963

您应该尝试根据设备的屏幕修改您`CAEmmitterCell`的 s'`scale`和属性。`scaleRange`

`cell.scale = cell.scale / [[UIScreen mainScreen] scale];`

# c++ - c ++如何跳过父析构函数的调用

> ID：14650971
> 
> 赞同：0
> 
> 时间：2013-02-01T16:40:49.407
> 
> 标签：c++, class, inheritance, destructor

下面的问题不是很常见，所以我在网上找不到任何可能有帮助的东西：

我有`class parent`，它**必须**有默认的构造函数和析构函数，我不应该定义关于这两个成员的任何内容。

我需要控制`ptr`破坏，只有在它没有被引用时才必须被破坏，这由`counter`in控制`someclass`。

```
class parent {
public:
   someclass * ptr;
}
class child: public parent {

   ~child() {                           //<-- this line
      cout<<"in ~child!"<<endl;
      if(this->ptr == NULL)  cout<<"ptr is NULL"<<endl;
      this->ptr->delete_reference();    //<-- here ptr = NULL
    }

    someclass* get_ptr() {
       return this->ptr;
    }
}

class someclass {
  void delete_reference() {
    counter--;
    if(counter == 0)   delete this;
} 
```

问题是在parent 的默认析构函数中`this line`被调用并且确实没有被正确地破坏。`ptr = NULL``ptr`

有没有办法通过这些限制跳过 ~parent 的调用？

我也尝试删除继承，并有一个`parent`in的实例`child`，但同样的事情发生了，再次调用父级的析构函数。

此外，我需要`ptr`加入，`parent`因为有更多的子班，他们需要分享这些信息。

谢谢！

**编辑：** 好的，据我所知，我在这里出了点问题……问题是 ptr 如何为 NULL。只要我混淆了析构函数调用的顺序，那么问题就不在`this line`.

```
void function() {
  child ch1;
  for(int i = 0; i<1; i++) {
    cout<<iterating<<endl; 
    do_some_work(ch1);
  }
  if(ch1->get_ptr() != NULL) cout<<"ptr is OK"<<endl;

  return;
  //Here is the destructor ~child called (?)
}

int main() {
  function();

} 
```

上面的调用是我使用的方式`child`。里面`do_some_work`其实有很多工作在这里难以描述。

关键是`do_some_work`完成后，`ptr`就OK了。然后我想析构函数被调用并且`ptr`似乎是`NULL`.

因此，上面将打印：

```
iterating
ptr is OK
in child
ptr is NULL
Segmentation fault 
```

修改后有什么解释吗？

非常感谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:43:25.053

> > 问题是在这一行中调用了父级的默认析构函数

不。

> > 并且 ptr = NULL,

和不。

*首先，父级的析构函数（默认或其他）在子级之后*调用，而不是之前。

其次，父级的默认析构函数可能没有设置`ptr`为`NULL`. 它可能根本没有接触`ptr`。（我说“可能”，因为没有办法知道。`ptr`在父析构函数返回后完全引用是未定义的行为。）

我建议你得出了一个错误的结论。请发布一个简短的完整程序来演示您的问题，我们可以帮助您得出正确的结论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:46:34.457

想到两件事：

1.  您可以轻松检查`if(ptr) ...`[或者`if (this->ptr)`如果您愿意]。
2.  这似乎相当“错误”。不调用基类析构函数绝对不是正常类行为的一部分，并且会让我认为类层次结构是错误的。

所以，总而言之，当你“需要”这样做时，你可能做错了什么。想想你的类如何交互，并解决基本问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:42:20.543

`delete`如果父级的析构函数不是虚拟的，则通过派生指针访问对象是未定义的行为，因此此代码表现出未定义的行为。

无论如何，如果父级没有定义析构函数，那么你为什么担心不调用它呢？

# memory - 存储在内存（例如 DDR3）中的数据量是否会影响其功耗？

> ID：14650973
> 
> 赞同：0
> 
> 时间：2013-02-01T16:41:07.393
> 
> 标签：memory, memory-management

我不熟悉记忆原理。这可能是一个幼稚的问题。

假设我有一个 1GB 的 DRAM，就像我的平板电脑中的那个。

200MB数据还是500MB数据会不会有功耗差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T23:27:16.440

如果数据只是存在于内存中并且未被访问，则否。

但在以下情况下功耗会增加：

1.  您读取内存 - 使用读取电路 - 当数据存在于内存中时，您很可能会读取数据

2.  当您更改/写入内存时 - 当单元格中的位更改从 0 到 1 或从 1 到 0 时消耗很大

此外，在设备开启的任何时候都有恒定的漏电流。

# ios - 为什么 hitTest 不返回附加到窗口的视图？

> ID：14650975
> 
> 赞同：0
> 
> 时间：2013-02-01T16:41:16.440
> 
> 标签：ios, uiview, uiwindow, hittest

有人可以花一秒钟给我指点吗？

我有一个 UIView 附加到一个 UIWindow，我正在玩点的 hitTesting（原因比我想在这里讨论的要复杂得多）。

给定作为窗口的子视图附加的视图，我希望 hitTest 会找到该视图，但它似乎没有：

```
- (void)test_hitTest_shouldFindTheViewAttachedToAWindow {
    UIWindow *window = [[UIWindow alloc] initWithFrame:CGRectMake(0, 0, 210, 520)];
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(10, 20, 200, 500)];
    [window addSubview:view];

    // This is ok
    GHAssertEquals([view hitTest:CGPointMake(110, 270) withEvent:nil], view, nil);

    // This fails: why? I would expect it to return the view, but it return null.
    GHAssertEquals([view.window hitTest:CGPointMake(110, 270) withEvent:nil], view, nil);
} 
```

重点是在窗口范围内清除，对吗？为什么它找不到视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T15:25:32.730

`UIWindow`默认情况下创建为不可见，这意味着`hitTest:withEvent`将忽略它。如果您设置`view.window.hidden = NO`then`hitTest:withEvent`将按您的预期工作。

# javascript - Filepicker.io - base64 解码图像不可见

> ID：14650985
> 
> 赞同：0
> 
> 时间：2013-02-01T16:41:44.583
> 
> 标签：javascript, filepicker.io

我正在使用 filepicker.io 将现有文件 (FPFile) 导出到给定目标。我将现有的 FPFile 用作一种小型临时文件，因此导出很快。然后，在导出完成后，我试图用一些图像数据（base64 编码）写回我刚刚导出的文件。问题是，在我写入数据后，图像不可见。图像不会在 Firefox、Chrome 或 IE 中显示。我实际上可以在 Photoshop 中打开图像，它显示得很好，所以我知道正在写入数据。文件写入后似乎存在某种错误。也许我只是在做一些愚蠢的事情。这是我的代码：

```
var fpfile = { url: 'https://www.filepicker.io/api/file/ermKMZgVSu2GCEouu4Lo',
  filename: this.curFile.name, mimetype: 'image/jpeg', isWriteable: true};

  filepicker.exportFile(
    fpfile,
    function(FPFile){
        var data = canvas.toDataURL('image/jpeg');
        writeData(FPFile, data);
    }
  );

  function writeData(file, data){
    filepicker.write(file, data,
      {
        base64decode: true
      },
      function(FPFile){
        console.log("Write successful:", FPFile.filename);
      },
      function(FPError) {
        console.log(FPError.toString());
      },
      function(progress) {
        console.log("Loading: "+progress+"%");
      }
    );
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:26:25.957

例如，当您使用`toDataURL`呼叫时，您会包含前缀

```
data:image/png;base64 
```

This needs to be stripped from the actual contents of the image before doing base64 decoding

# python - Django-Storages 未正确安装

> ID：14650989
> 
> 赞同：0
> 
> 时间：2013-02-01T16:41:56.693
> 
> 标签：python, django, amazon-ec2, python-django-storages

我正在将我的第一个 django 应用程序部署到 EC2 服务器。我正在从 S3 服务器提供我的静态文件，所以我正在使用 django-storages 应用程序。

`sudo pip install django-storages`我在 EC2 服务器上安装了它。但是，当我尝试导入它时，我不断收到错误“找不到模块”。然而，当我运行`pip freeze`django-storages 时显示为已安装。

我在我的开发机器上遵循了完全相同的程序，一切正常。有任何想法吗？

我还应该提到 EC2 服务器正在运行 bitnami ubunutu 64 位 django 堆栈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:53:32.073

如果您使用的是 virtualenv，我发现您不需要添加 sudo。所以只是尝试做一个 pip install django-storages ？

# ios - UILabel 的 minimumScaleFactor 是如何工作的？

> ID：14650990
> 
> 赞同：115
> 
> 时间：2013-02-01T16:41:58.030
> 
> 标签：ios, objective-c, uilabel

我以前用过`minimumFontSize`，但现在不推荐使用该功能，我不太明白它是如何`minimumScaleFactor`工作的。

我希望最大字体大小为 10，最小为 7。

如何使用比例因子将字体大小调整为 7？

`UILabel`创建：

```
UILabel *label = [[UILabel alloc] init];
[label setTranslatesAutoresizingMaskIntoConstraints:NO];
label.text =  [labelName uppercaseString];
label.textAlignment = NSTextAlignmentCenter;
label.textColor = [UIColor whiteColor];
label.font = [UIFont fontWithName:HELVETICA_FONT_STYLE_BOLD size:9.5];
label.backgroundColor = [UIColor clearColor];
label.minimumScaleFactor = .1f;

[label addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:[label(WIDTH)]"
                                                              options:0
                                                              metrics:@{@"WIDTH" : [NSNumber numberWithFloat:buttonSize.width]}
                                                                views:NSDictionaryOfVariableBindings(label)]];

[contentView addSubview:label]; 
```

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2013-03-04T18:40:43.613

您需要设置`label.adjustsFontSizeToFitWidth = YES;`

* * *

## 回答 #2

> 赞同：107
> 
> 时间：2013-03-11T06:10:42.603

除了其他答案所说的之外，如果您将 minSize/defaultSize (division) 作为`minimumScaleFactor`，它将与使用旧的`minimumFontSize`.

例如，如果您希望使用默认标签大小的最小字体大小为 10，您可以执行以下操作：

`[label setMinimumScaleFactor:10.0/[UIFont labelFontSize]];`

`[UIFont labelFontSize]`（如果不是默认值，请替换为标签的字体大小）。

这与以下内容相同： `[label setMinimumFontSize:10.0];`

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-02-01T16:44:30.260

根据[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UILabel_Class/Reference/UILabel.html)：

> 使用此属性可指定当前字体大小的最小乘数，以产生可接受的字体大小，以便在显示标签的文本时使用。如果您为此属性指定值 0，则当前字体大小用作最小字体大小。

因此，如果您的标签的默认字体大小为`10`，您将其设置`0.7f`为 a`minimumScaleFactor`并且它应该做同样的事情`minimumFontSize`。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-04-17T02:04:40.433

除了其他答案之外，我将添加一个对初学者友好的解释，以帮助我自己：

如何计算一个`minimumScaleFactor`？将标签的最小字体大小除以标签的默认字体大小。例如，您的默认字体大小为 25。您的最小字体大小为 10。

10/25 = 0.4

0.4 是你的`minimumScaleFactor`价值。另请参阅上面的@Jsdodgers 答案。

# ios - UIPanGestureRecognizer 与滚动视图冲突

> ID：14650991
> 
> 赞同：9
> 
> 时间：2013-02-01T16:42:01.893
> 
> 标签：ios, uiscrollview, uigesturerecognizer, uipangesturerecognizer

我正在尝试将平移手势识别器添加到包含滚动视图的视图中，但我想我的优先级有问题。

我的全局 UIView 有一个这样的 UIPanGestureRecognizer 设置：

```
_bottomPanGestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(bottomPanGestureDetected:)];
_bottomPanGestureRecognizer.minimumNumberOfTouches = 2;
_bottomPanGestureRecognizer.maximumNumberOfTouches = 2;
_bottomPanGestureRecognizer.delaysTouchesBegan = NO;
_bottomPanGestureRecognizer.delaysTouchesEnded = NO; 
```

我想识别这个手势以从底部显示另一个视图，并进行某种从下到上的捏合。

问题是滚动视图在我之前识别出它自己的平移手势。

所以我试图推迟它，这要归功于：

```
[_scrollView.panGestureRecognizer requireGestureRecognizerToFail:_bottomPanGestureRecognizer]; 
```

它正在工作，在我的两根手指向下到向上识别器之后触发了滚动视图事件，但现在的问题是，当我只用一根手指在滚动视图中滚动时，滚动会在一小段延迟后起作用。

我希望这次活动没有延迟，这可能吗？欢迎任何想法！

干杯。

西里尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-15T11:57:01.940

如果还没有解决，我为我解决了这个问题。

我向 UIScrollView 添加了一个 UIPanGestureRecognizer 以检测两个手指平移手势，并且默认的 UIScrollView 行为（滚动到某物）仍然有效。

所以我所做的就是将 UIPanGestureReconizer 添加到 UIScrollView：

```
UIPanGestureRecognizer *pangestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(displayReloadIndicator:)];
pangestureRecognizer.minimumNumberOfTouches = 2;
pangestureRecognizer.delegate = self;
[self.scrollView addGestureRecognizer:pangestureRecognizer];
[pangestureRecognizer release]; 
```

在此之后我添加了代码：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {

    return YES;
} 
```

在此之后，我实现了平移手势识别器操作方法。

```
- (void) displayReloadIndicator:(UIPanGestureRecognizer*) panGestureRecognizer {

    UIGestureRecognizerState gestureRecognizerState = gestureRecognizer.state;

    CGPoint translation = [gestureRecognizer translationInView:self.scv_bibgesamt];

    if (gestureRecognizerState == UIGestureRecognizerStateBegan) {

        // create a UIView with all the Pull Refresh Headers and add to UIScrollView
        // This is really much lines of code, but its simply creating a UIView (later you'll find a myRefreshHeaderView, which is my base view) and add UIElements e.g. UIActivityIndicatorView, a UILabel and a UIImageView on it
        // In iOS 6 you will also have the possibility to add a UIRefreshControl to your UIScrollView

    }

    else if (gestureRecognizerState == UIGestureRecognizerStateEnded
             || gestureRecognizerState == UIGestureRecognizerStateCancelled) {

        if (translation.y >= _myRefreshHeaderView.frame.size.height + 12) { // _myRefreshHeaderView is my baseview

         //so the UIScrollView has been dragged down with two fingers over a specific point and have been release now, so we can refresh the content on the UIScrollView
         [self refreshContent];

         //animatly display the refresh view as the top content of the UIScrollView
         [self.scrollView setContentOffset:CGPointMake(0, myRefreshHeaderView.frame.size.height) animated:YES];
    }

    else {

         //the UIScrollView has not been dragged over a specific point so don't do anything (just scroll back to origin)
         [self.scrollView setContentOffset:CGPointMake(0, 0) animated:YES];

         //remove the view (because it's no longer needed)
         [_myRefreshHeaderView removeFromSuperview];
    }
} 
```

**更新：**

如果您可能希望从导航控制器集成向后滑动功能，则应集成以下代码：

```
- (void) viewDidLoad {

    [super viewDidLoad];

    if ([self.navigationController respondsToSelector:@selector(interactivePopGestureRecognizer)]) {

        self.navigationController.interactivePopGestureRecognizer.enabled = YES;

        self.navigationController.interactivePopGestureRecognizer.delegate = nil;
    }

    //setup view controller
} 
```

和

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {

    if (gestureRecognizer == _panGestureRecognizer
        && [self.navigationController.viewControllers count] > 1) {

        CGPoint point = [touch locationInView:self.view.window];

        if (point.x < 20
            || point.x > self.view.window.frame.size.width - 20) {

            return NO;
        }
    }

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-10T07:11:35.767

实现 panRecognizer 委托以启用同时识别 UIScrollView UIGestureRecognizer

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    if (_panRecognizer == gestureRecognizer) {
        if ([otherGestureRecognizer.view isKindOfClass:UIScrollView.class]) {
            UIScrollView *scrollView = (UIScrollView *)otherGestureRecognizer.view;
            if (scrollView.contentOffset.x == 0) {
                return YES;
            }
        }
    }

    return NO;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-27T21:15:17.963

**斯威夫特 4**

如果使用滚动视图，您可以在下面使用，当滚动视图在最顶部拖动时，它只是一个 panGestureRecognizer：

translation.y > 0 表示您正在从上到下移动，而 locationInScrollView.y < 500.0 表示您在 500 或更少处结束拖动（您可以自定义它）以防止在滚动的中间或底部完成刷新。

```
func scrollViewDidEndDragging(_ scrollView: UIScrollView, willDecelerate decelerate: Bool) {

    let translation = scrollView.panGestureRecognizer.translation(in: scrollView.superview)
    let locationInScrollView = scrollView.panGestureRecognizer.location(in: scrollView)

    if translation.y > 0 && locationInScrollView.y < 500.0 {
        print("scrollView refresh:  Y: \(locationInScrollView.y)")
        setupUI()
    }
} 
```

# backbone.js - Backbone.js 按钮单击事件未触发

> ID：14650992
> 
> 赞同：0
> 
> 时间：2013-02-01T16:42:06.833
> 
> 标签：backbone.js, backbone-events

我无法让按钮单击事件在主干中注册。我在它之前列出的事件（输入中的按键）工作正常。

这是我的观点：

```
App.Views.TaskAddForm = Backbone.View.extend({
    tagName: 'div',
    initialize: function(){

    },
    events: {
        'keypress #newTask': 'createNewTask',
        'click #newTaskBtn': 'createNewTask', 
    },
    template: App.Templates.TaskAddForm,
    render: function(){
        this.$el.html(this.template());
        this.$el.attr('id','taskAddForm');
        if (!this.newTask){
            this.newTask = this.$('#newTask');
            this.newPriority = this.$('#newPriority');
        }
        return this;
    },
    createNewTask: function(e){
        if (e.keyCode !== 13) {
            return;
        }
        var task = this.newTask.val();
        var priority = this.newPriority.val();
        if ($.trim(task).length > 0){
           this.collection.add({name: task, priority: priority});
        }
        this.clearForm();
    },
    clearForm: function(){
        this.newTask.val('');
        this.newPriority.val(1);
    }
}); 
```

这是我的模板：

```
<h2>Add Task</h2>
<div class="input-append">
    <select id="newPriority" class="input-medium" style="margin-right: 20px;">
        <option value="1">Now</option>
        <option value="2">Today</option>
        <option value="3">Tomorrow</option>
        <option value="4">Sooner</option>
        <option value="5">Later</option>
    </select>
    <input type="text" id="newTask" placeholder="New Task" class="input-xxlarge">
    <button class="btn" type="button" id="newTaskBtn">Add Task</button>
</div> 
```

您可以看到我实际上并没有将任何内容传递到此模板中，但我仍想使用模板，因为我将根据用户正在处理的内容向页面添加和删除此“添加表单”视图。

输入上的按键有效。点击它旁边的按钮，没有！我什至尝试在我的渲染函数中添加 this.delegateEvents() ，但我似乎没有做任何事情来让按钮工作。我觉得它必须是我只是想念的相对简单的东西！有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:47:30.530

您的事件可能正在触发，但是

```
if (e.keyCode !== 13) {
    return;
} 
```

导致提前返回。event的`event`对象`click`没有`keyCode`，当然不是 13。

只需将事件处理程序分成两个方法，并让它们调用一个通用方法：

```
events: {
    'keypress #newTask': 'taskNameChanged',
    'click #newTaskBtn': 'addButtonClicked',
},

taskNameChanged: function(e) {
  if(e.keyCode === 13) this.createTask();
},

addButtonClicked: function() {
  this.createTask();
}

createTask: function() {
  //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:17:48.557

尝试`keyup`改用 - 这可能会导致问题。[jquery 文档](http://api.jquery.com/keypress/)声明它不是官方事件，因此可能在浏览器等方面有不同的支持。我总是使用并且`keypress`可以肯定地说它可以全面工作。

你也肯定事件没有被解雇吗？您是否尝试过在方法开始时发出警报？有时，老派的方法实际上可以提供帮助！

# tfs - TFS2010：为多个团队项目下的项目构建定义

> ID：14650993
> 
> 赞同：0
> 
> 时间：2013-02-01T16:42:09.147
> 
> 标签：tfs, tfsbuild

我有一个包含 3 个项目的 Visual Studio 解决方案。同样的解决方案是有一个文件夹，我在其中添加了属于其他 TFS 团队项目的现有项目。

```
TeamPrj1
|- Solution1
 |- External Reference(folder)
 |- PrjA (added as existing project) 
 |- Prj1
 |- Prj2
TeamPrj2
|- SolutionA
 |- PrjA 
```

我想为我的解决方案 1 构建 TFS。我面临的问题是解决方案没有在 TFS 构建服务器上编译，因为它找不到 PrjA 的引用。我知道在工作区映射中需要进行一些调整，我也浏览了[不同的论坛](http://social.msdn.microsoft.com/Forums/en-US/tfsgeneral/thread/f33bdfad-b868-40d9-a447-21beb70754c5)和博客文章，但仍然无法正常工作。有人说要添加 PrjA dll 作为文件引用，但我不想走那条路，因为如果 PrjA 中的某些变化比 Sol1 需要重新引用最新的 dll 怎么办。作为参考添加后，每次从 TFS 打开解决方案 1 时，它都会自动获取最新的。

目前下面是我的工作区映射。

```
 Active $/TeamPrj1/Main/Solution1
 $(SourceDir)

 Active $/TeamPrjA/Main/SolutionA
 $(SouceDir)\Main\ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T03:58:08.833

由于解决方案需要使用相对路径引用其他项目，因此您需要确保构建定义的工作空间映射实际上产生与本地工作空间相同的文件结构。

从您的文件夹名称来看，您应该使用以下映射：

```
 Active | $/TeamProj1/Main/Solution1 | $(Sourcedir)\Solution1
 Active | $/TeamProjA/Main/SolutionA | $(Sourcedir)\SolutionA 
```

`PrjA.csproj`但在我们知道定义为in的相对路径之前，我无法确定确切的目标路径`Solution1.sln`。

您可能还需要在 Build Definition 编辑器的 Process 选项卡中更新解决方案的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T02:27:57.270

如果您有一个 Visual Studio 项目，例如一个包含多个团队项目使用的共享库代码的团队项目，

*   您可以在拥有团队的项目中管理项目，也可以专门为共享项目创建单独的团队项目。

*   如果您选择后一种方法并使用公共共享项目，
    Microsoft Visual Studio Team Foundation
    Server (TFS) 源代码管理中的文件夹结构如下所示

![在此处输入图像描述](../Images/bb05254d95e8e9c5c4c02ccb15954dbf.png)

有关更多信息，请参阅以下内容：

[第 6 章 - 在 Visual Studio Team System 中管理源代码管理依赖项](http://msdn.microsoft.com/en-us/library/bb668956.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:09:07.003

我想最好的选择是拥有一个企业 NuGet 服务器并在内部发布这个 NuGet 站点的包。

对于不同 Team Projects 下的 Visual Studio 解决方案，他们可以轻松 NuGet 进行引用。TFS 自动构建还可以轻松恢复任何解决方案的 NuGet 包。

您还可以使用自动化构建将 NuGet 包拖放到 NuGet 服务器，以获取在多个 TeamProject 和 Team Collections 中也很常见的程序集/exe。（构建模板中的 xcopy 命令）。

**使用这种方法的最大好处：**一切都是自动化的。无需进行任何手动合并和签入。可以跨多个 TeamProject 和 TeamCollections 使用。如果父公共 dll 发生变化，它的自动构建可以将其推送到 NuGet 服务器。下次通过 NuGet 使用公共 dll 的所有其他项目将始终拥有最新的，因为在构建服务器上它将始终从 NuGet 下载最新的（假设您保持版本#相同）。